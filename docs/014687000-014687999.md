# StackOverflow 问答 14687000-14687999

# vb.net - 互联网连接测试 (VB.NET)

> ID：14687001
> 
> 赞同：-2
> 
> 时间：2013-02-04T12:39:36.760
> 
> 标签：vb.net, powershell

```
[Activator]::CreateInstance([Type]::GetTypeFromCLSID([Guid]‘{DCB00C01-570F-    4A9B-8D69-199FDBA5723B}’)).IsConnectedToInternet 
```

[http://blogs.msdn.com/powershell/archive/2009/04/03/setting-network-location-to-private.aspx](http://blogs.msdn.com/powershell/archive/2009/04/03/setting-network-location-to-private.aspx)

我从上面的源代码中找到了这个 PowerShell 代码，它按预期工作，但是我想让它在 VB.NET 中工作以检查 Internet 连接。可以请一位专家帮忙吗，因为到目前为止我一直无法管理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:07:38.730

这是底层 wininet API 的简单接口。

```
Private Declare Function InternetGetConnectedState Lib "wininet.dll" _ 
                (ByRef lpdwFlags As Int32, ByVal dwReserved As Int32) As Boolean        
Public Shared Function IsConnectedToInternet( ) As Boolean
    Try
        Dim flags as Integer;
        return InternetGetConnectedState(flags, 0)
    Catch
        return False
    End Try
End Function 
```

请参阅[PInvoke.net](http://pinvoke.net/default.aspx/wininet/InternetGetConnectedState.html)

# c# - 有没有办法从 R 中调用 .NET 的字符串库？

> ID：14687006
> 
> 赞同：1
> 
> 时间：2013-02-04T12:39:44.020
> 
> 标签：c#, .net, r

我对 C# .NET 很熟悉，我想从 .NET 的`System.Text`库中调用函数，例如`.PadLeft()`,`string.Format`等。

有谁知道这是可能的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:17:43.200

目前，正如其他人所提到的，从 R 调用 .NET 代码并不容易。使用`rcom`包[可能是可行](https://stackoverflow.com/questions/12410528/calling-net-c-from-r?rq=1)的，但是 R 程序员和 C# 程序员的交集很小，所以很少有人尝试过。

如果您愿意调整您的技术堆栈，则有一些选择。

*   MATLAB 具有出色的 .NET 集成，可以做 R 可以做的大部分事情。

*   `rJava`R 通过包有很好的 Java 集成。

如果您对纯 R 解决方案感到满意，那么该`stringr`软件包使字符串处理变得非常轻松。 `stringr::str_pad`与C#的`string.PadLeft`方法相同。 `sprintf`, `format`, `formatC`, 和`prettyNum`from base R 提供了多种格式化数字的方法。该`scales`软件包还具有几个格式化功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-10T10:59:34.690

我知道这篇文章已经存在了一段时间，但由于在 StackOverflow 上搜索答案是一项持续的事情，我想我会提出另一个选择。

rClr 包可从[https://r2clr.codeplex.com/](https://r2clr.codeplex.com/)获得，很快将迁移到[https://rclr.codeplex.com/](https://rclr.codeplex.com/)。可以调用任意 .NET 代码，包括字符串操作：

```
library(rClr)
clrCallStatic('System.String', 'Format', 'Hello, the number is {0}', 42L)
## [1] "Hello, the number is 42" 
```

然而，由于字符串及其数组是有意透明地转换为 R 字符向量的，因此诸如此类的实例方法`PadLeft`并不容易获得。一个带有静态方法的辅助类就可以了。如果有兴趣，我会考虑在包中添加用于 .NET 字符串操作的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T12:42:29.133

R 和 .NET 没有任何关系。这意味着这是不容易的。

您应该简单地学习在 R 中使用的正确方法。

# css - CSS - 控制领先

> ID：14687007
> 
> 赞同：1
> 
> 时间：2013-02-04T12:39:45.640
> 
> 标签：css

CSS中的领先是如何控制的？我有一个正在包装的标题标签。顶线和底线之间的距离太大。我想减少这个数额。这不是我尝试过的填充或边距。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:40:57.380

尝试使用这个：

```
line-height:normal; 
```

或将其设置为等于您的标题`font-size`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:24:25.150

基本上，前导是用`line-height`属性设置的，对于它，最好的方法通常是将其设置为纯数字。它以当前字体大小为隐含单位。设置`line-height: 1`是指将文本设置为实心，使一行的高度等于字体的大小（高度）。对于某些字体，您可以使用更小的值，例如 0.9 甚至 0.8。您需要使用您的实际内容和样式对此进行测试，但最好谨慎（文本可能有一天会更改，并且使用的字体可能不是您声明的）。

不过，行的格式可能会更复杂。如果文本中有上标或来自不同字体的字符，浏览器可能会感到被迫使用大于 CSS 中声明的行高。

PS 通常，如果标题需要换行，则需要缩短。

# android - 尝试从应用程序内下载 .apk 文件。获取“客户端标识标头”错误

> ID：14687011
> 
> 赞同：1
> 
> 时间：2013-02-04T12:39:59.643
> 
> 标签：android, apk, content-type, user-agent, http-get

[这是从服务器不工作的应用程序内更新下载](https://stackoverflow.com/questions/14684246/in-application-update-downloads-from-server-not-working-service-provider-error)的后续问题。[服务提供商错误？](https://stackoverflow.com/questions/14684246/in-application-update-downloads-from-server-not-working-service-provider-error). 我已将移动互联网设置更改为“不调整任何网站”，但现在我收到以下错误消息。`Your request did not supply a client identification header.`

我已经尝试如下`setHeader`，`HttpGet`但这没有任何区别。此错误消息可能意味着什么？

```
httpget.setHeader("Accept", "application/vnd.android.package-archive");
httpget.setHeader("Content-Type", "application/vnd.android.package-archive");
String userAgent = System.getProperty("http.agent");
httpget.setHeader("User-Agent", userAgent); 
```

我可以从 Android Internet 浏览器中毫无问题地下载 .apk，并且该代码在同一移动运营商的不同平板电脑和操作系统版本上运行。欢迎任何帮助或想法。这真让我抓狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:18:39.080

我必须手动定义用户代理字符串，如下所示。这样做后工作。

```
String userAgent = "Mozilla/5.0 (Linux; U; Android 2.2; en-us; SCH-I800 Build/FROYO) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1";
httpget.setHeader("User-Agent", userAgent); 
```

希望这可以帮助有同样问题的人。

# asp.net - 在按钮单击时将 div 显示为弹出窗口

> ID：14687012
> 
> 赞同：-2
> 
> 时间：2013-02-04T12:39:59.583
> 
> 标签：asp.net, gridview

我正在工作 asp.net 。

在我的应用程序中，我的 aspx 页面中有一个 div，其中有一个 gridview。现在我需要在按钮单击时将此 div 显示为弹出窗口。如何使用它。

**代码**：

```
<div id="gvdiv">
<asp:gridview id="gvsample" runat="server"/>
</div> 
```

**注意**：我需要将 div **gvdiv**显示为弹出窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:43:47.440

尝试这个：

**c#代码**：

```
gvdiv.datasource=yourdatasource;
gvdiv.databind();
Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function", "showpopup();", true); 
```

**脚本**：

```
 function showpopup() {
    $("#popup").fadeIn('slow');
    } 
```

如果需要，可以在单击按钮上编写 c# 代码。

# c# - 执行中引发的引用错误，但未显示在 Visual Studio 错误消息中

> ID：14687013
> 
> 赞同：1
> 
> 时间：2013-02-04T12:40:01.473
> 
> 标签：c#, reference, ext.net

因此，我将 ext.net 引用为`.aspx`站点的程序集。然后我复制了网站和相应的代码，并调整了类名和命名空间。我一直在使用相同的解决方案。现在当我参考时，就像在旧网站上一样：

```
<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %> 
```

和调试，旧站点正确显示（因为我没有对其进行任何更改），但“复制”站点将 a 记录`uncaught reference error`到开发人员控制台。

```
Uncaught ReferenceError: Ext is not defined 
```

**编辑：**
副本和原件是同一个站点的两个接口——>它们在同一个文件夹和同一个项目中

**编辑2：**
在检查并重新检查从清理解决方案到我发现的任何可能的重建之后，default_admin（副本）不包括在解决方案中，即使我这样做了，似乎更新删除了引用。现在我遇到了问题，无法将“Ext.Net.xml”复制到“bin/Ext.Net.xml”，而且代码隐藏中的类型未正确加载

**编辑3：**
好吧。现在我有一个 web.config 文件，这与包括 ext.net 框架的工作组件一样，我想它可能真的是客户端 javascript 问题，但即使在安装 NuGet 之后也会发生错误，现在我们再次处于旧错误。我还通过创建一个新站点来“复制”该站点以修复不同的错误。

**编辑 4：**
新的 Checkout 和从 0 重新启动也无济于事

**编辑 5：**
从 -1 重新启动有帮助，直到我将具有默认值的 RecordFields 添加到网格中。似乎标记属性的引用对于转换为 javascript 并不完全正确，请参阅 [RecordField 中的 Default Value throws JavaScript error on execute](https://stackoverflow.com/questions/14726669/default-value-in-recordfield-throws-javscript-error-on-execute)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T21:03:15.613

我相信这是一个客户端 JavaScript 错误。

我的猜测是您缺少 Web.config 的必需部分。请查看以下 README.txt 的第 IV 部分，并三重检查您是否已将所有 Ext.NET 相关配置添加到您的项目 Web.config 文件中。

[http://examples.ext.net/#/Getting_Started/Introduction/README/](http://examples.ext.net/#/Getting_Started/Introduction/README/)

希望这可以帮助。

# xml - XML 文件错误：实体未定义

> ID：14687015
> 
> 赞同：1
> 
> 时间：2013-02-04T12:40:04.873
> 
> 标签：xml, visual-studio, visual-studio-2012, app-config

我使用 Visual Studio 2012，这里有一个 C# 项目，当然我`App.config`在我的项目中使用。一切都很好，直到我添加了这样的内容：

```
<add key="myChar" value="&sup2;"/> 
```

错误：

```
Entity 'sup2' not defined 
```

那么 sup2 应该代表`²`就像`&qout;`代表一样`"`。因为`&qout;`我没有得到任何错误。为什么？我仍然能够编译，但我想摆脱这个消息 - 或者理解为什么它是 VS 的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:46:17.287

只有一小部分对 XML 有效的实体 - 那些转义部分 XML 标记本身的实体：

*   引用
*   放大器
*   后
*   lt
*   gt

HTML 中的各种语法还有很多。

[参考（对不起它的维基百科）](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML)

# iphone - 邮件撰写模块在 ios6 中停止工作

> ID：14687019
> 
> 赞同：1
> 
> 时间：2013-02-04T12:40:32.023
> 
> 标签：iphone, xcode, sdk, ios6

我有一个我前段时间构建的应用程序，它使用邮件撰写模块并且可以工作，但是，一旦我升级到 iOS6，它就停止工作了。这是我的 .h 中的代码：

```
#import <UIKit/UIKit.h>
#import <MessageUi/MFMailComposeViewController.h>

@interface SecondViewController : UIViewController <MFMailComposeViewControllerDelegate>

-(IBAction)email;

@end 
```

这是我的 .m 代码：

```
#import "SecondViewController.h"

@implementation SecondViewController

-(IBAction)telephone2 {

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel://01748826265"]];
}

-(IBAction)email {
MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];
[composer setMailComposeDelegate:self];
if ([MFMailComposeViewController canSendMail]) {
    [composer setToRecipients:[NSArray arrayWithObjects:@"info@pizzaprontorichmond.co.uk", nil]];
    [composer setSubject:@"subject here"];
    [composer setMessageBody:@"message here" isHTML:NO];
    [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
    [self presentModalViewController:composer animated:YES];
}
[self dismissModalViewControllerAnimated:YES];
}
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error {
if (error) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"error" message:[NSString stringWithFormat:@"error %@", [error description]] delegate:nil cancelButtonTitle:@"dismiss" otherButtonTitles:nil, nil];
    [alert show];

}
[self dismissModalViewControllerAnimated:YES];
} 
```

有谁知道是什么导致它破裂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:45:24.817

尝试添加此语句。

```
composer.wantsFullScreenLayout = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T13:33:51.840

请检查以下链接：-

1.  [教程](http://www.edumobile.org/iphone/iphone-programming-tutorials/compose-mail-application-in-iphone/)
2.  [例子](http://snipplr.com/view/58761/)

执行此操作后，请不要忘记在`Settings`iPhone 5 中设置您的帐户。请添加您的邮件帐户。如果仍然遇到任何问题，这将起作用并使我恢复原状。

# ios - 在 iPad 上通过 HTTP 自动后台更新

> ID：14687020
> 
> 赞同：0
> 
> 时间：2013-02-04T12:40:32.970
> 
> 标签：ios, ipad, background-process

我正在创建一个 iPad 应用程序，我需要以下功能：

> 每当应用程序运行时（例如，在后台或前台），定期（例如，每小时一次）检查一些 HTTP（s）并可能下载和存储一些数据。

这背后的动机是允许应用程序缓存一些数据，以便在需要时可以离线使用。我知道这会缩短电池寿命，但现在这不是问题。

根据我在[Apple iOS Programming Guide: Background Execution and Multitasking](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)中阅读的内容，应用程序可以执行后台任务。我找不到适合我需要的案例：

*   在后台执行有限长度任务：这仅适用于“从前台进入后台”任务。
*   安排本地通知的传递：显然不是这样，我正在创建任何通知，我只需要下载一些数据。
*   实现长时间运行的后台任务：这似乎是一个问题，但在探索时，它有几个类别，我没有找到任何可以涵盖我的用例（从 apple.com 复制粘贴）：
    *   `audio`— 应用程序在后台向用户播放有声内容。（此内容包括使用 AirPlay 的流式音频或视频内容。）
    *   `location`- 该应用程序让用户随时了解他们的位置，即使它在后台运行。
    *   `voip`— 该应用程序使用户能够使用 Internet 连接拨打电话。
    *   `newsstand-content`— 该应用程序是一个报亭应用程序，可在后台下载和处理杂志或报纸内容。
    *   `external-accessory`— 该应用程序与需要通过外部附件框架定期提供更新的硬件附件配合使用。
    *   `bluetooth-central`— 该应用程序与需要通过核心蓝牙框架定期提供更新的蓝牙配件配合使用。
    *   `bluetooth-peripheral`——应用通过Core蓝牙框架支持外设模式下的蓝牙通信。

实现此功能时应该如何进行？在iOS中甚至可能吗？

我正在使用 6.0.1 或 6.1 iOS 和 4.6 XCode。

编辑：我首先想到的是报亭内容，但在参考文件的更深处有：

> 当您的服务器发送推送通知以指示有新问题可用时，系统会检查您的应用程序是否具有带有 newsstand-content 值的 UIBackgroundModes 键。

但我需要 PULL 请求，而不是推送（iPad 必须询问服务器，而不是相反）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:44:04.123

你不这样做，这会很快耗尽电池，Apple 不希望你这样做。Apple 经常反对对服务器的 PULL 请求。也没有必要。

正如您所总结的，您的应用程序不属于任何一个背景类别。

您应该只在用户决定打开您的应用程序时更新应用程序数据，只有这样才是更新数据的好时机。

如果确实需要将新数据通知用户，则应实现推送通知。这是通知用户应用程序需要关注的方式。如果通过通知打开您的应用程序，您可以更新数据，甚至向用户展示选择的通知数据。

想象一下，用户打开你的应用程序一次，然后再也不看它，你的应用程序仍然会更新。使用它应该使用的电池和带宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:49:27.357

我会经常在应用程序处于活动状态时亲自轮询数据，并在应用程序再次处于活动状态时触发幕后更新。在应用程序处于活动状态时定期进行轮询将使您在应用程序处于活动状态时下载更少的数据。

就个人而言，如果我有一个应用程序我知道会耗尽我的电池，我会立即删除。可能只是我，但我会注意类似的事情。

另一种方法是使用通知提醒用户有新内容，因此当应用程序有新内容时，会发送通知，然后当用户选择此通知时，他们知道可能需要更新内容。

希望这是有道理的，而且很多都是自以为是的

# crystal-reports - 与 Crystal Reports 中的回车匹配的字符串

> ID：14687022
> 
> 赞同：1
> 
> 时间：2013-02-04T12:40:45.090
> 
> 标签：crystal-reports, sap, crystal-reports-2010

我想知道如何在 Crystal Reports 中获取报表字段的回车？我问是因为当我使用时`split({tableField}, char(10))[1]`，我没有得到第一行文字。例如，字符串：

“每个人都
感兴趣”

应该显示字符串“Everyone”。相反，它显示像 split() 这样的原始字符串没有做任何事情。`char(10)`似乎与回车不匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:35:24.570

你想要`Split( {table.field}, Chr(10) )[1]`。

** 编辑 **

```
// split the text on carriage returns
Local Stringvar Array lines := Split( {table.field}, Chr(10) );

// the number of carriage returns will be 1 less than the number of lines
Local Numbervar delimiters := Ubound(lines)-1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:51:14.380

如果`instr({table.field},chr(10))=0`或`ubound(split({table.field},chr(10)))=1`则该字符在字符串中不存在。

不过，可能值得一提的是，它`chr(10)`是*换行符*，而不是*回车符*，即`chr(13)`. 我怀疑你只是在寻找错误的角色。试试吧`chr(13)`。

# html - iOS中的两列选择微调器

> ID：14687030
> 
> 赞同：0
> 
> 时间：2013-02-04T12:41:12.450
> 
> 标签：html, ios, ipad, mobile-safari

选择菜单是否可以在 iOS 中打开具有两列的微调器？类似于当您输入日期类型时，iOS 会打开其自定义微调器，其中包含可单独选择的不同列。

抱歉应该指定“在 HTML 中”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:43:17.837

不使用本机控件，不。请注意，有一些库已经可用：

[http://cubiq.org/dropbox/sw/](http://cubiq.org/dropbox/sw/)是模仿 iOS 界面的一个很好的例子。

# freemarker - 如何从 freemarker 中的序列中检索对象键？

> ID：14687035
> 
> 赞同：0
> 
> 时间：2013-02-04T12:41:28.110
> 
> 标签：freemarker, ofbiz

我有一个作为序列返回的对象列表，我想检索每个对象的键，以便能够正确显示对象。目前我尝试**data?first?keys**似乎得到了返回对象的查询（不知道如何解释最后一句话，但下面的 img 显示了我试图解释的内容）。 ![在此处输入图像描述](../Images/6ec33b3e8347cd2c134c38ef0bc618db.png)

返回的对象数量是正确的（7），但显示每个对象的键是我的目标。[尝试这个](https://stackoverflow.com/questions/14650949/whats-the-meaning-of-within-a-variable-expression-in-freemarker)的宏在这里（来自 apache ofbiz 开发书籍第 8 章）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:10:24.977

似乎我的序列是一个哈希列表，正如 Daniel Dekany[这篇文章](http://freemarker.624813.n4.nabble.com/Can-t-get-hashes-to-work-td626670.html)所解释的那样：

> 最初的问题是， someHash[key] 需要一个 *字符串*作为键。因为，根据定义，FTL 的散列类型将 *字符串*键映射到任意值。它与 Java 的 Map 不同。（请注意，为了使事情更加复杂，在 FTL 中 someSequenceOrString[index] 需要一个整数索引。因此，[] 也用于此。）现在 someBeanWrappedMap(key) 在技术上与所有 []-s 无关，它只是一个方法调用，所以它接受所有类型的键。如果你有一个带有非字符串键的 Map，你必须使用它。

感谢 D Dekany，如果你在堆栈上，这结束了我对 ftl 模板的半天挫败感。

# android - 如何在android中计算修复日期收件箱短信

> ID：14687036
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:41:32.763
> 
> 标签：android, sms, counter

我正在尝试开发一个短信计数器应用程序，我想在其中计算当前日期的所有短信。我不想计算总收件箱短信。我正在使用以下代码，但没有得到确切的结果。它正在计算总收件箱短信。

TextView 视图 = 新的 TextView(this);

```
 Uri uriSMSURI = Uri.parse("content://sms/inbox");
    Cursor cur = getContentResolver().query(uriSMSURI, null, null, null,null);
    /*
    int nsm = 0;
    while(cur.moveToNext()){
    nsm+= + cur.getCount();
    }
    */
    String sms = "";

   while ( cur.moveToNext());{
     //   sms += "From :" + cur.getString(2) + " : " + cur.getString(11)+"\n";   
   //    sms += cur.getString(2); 
        sms += "Total SMS in the INBOX : "+cur.getCount();
   }
    view.setText(sms);

    setContentView(view); 
```

我是一个新的学习者。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T13:08:03.813

如果你想计算过去 24 小时内收到的短信数量，你可以这样做（不确定这是否真的有效，因为我没有测试过，但你明白了）：

```
Uri uriSMSURI = Uri.parse("content://sms/inbox");
long now = System.currentTimeMillis();
long last24 = now - 24*60*60*1000;//24h in millis
String[] selectionArgs = new String[]{Long.toString(last24);
String selection = "WHERE " + "date" + ">?";
Cursor cur = getContentResolver().query(uriSMSURI, null, selection, selectionArgs,null); 
```

然后一个简单的`cur.getCount()`应该让你收到短信的数量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T11:02:41.153

```
Uri uriSMSURI = Uri.parse("content://sms/inbox");
    long now = System.currentTimeMillis();
    long last24 = now - 24*60*60*1000;//24h in millis
    String[] selectionArgs = new String[]{Long.toString(last24)};
    String selection = "date" + ">?";
    String[] projection = new String[]{"date"};
    Cursor cur = getContentResolver().query(uriSMSURI, projection, selection, selectionArgs,null);

    String sms = String.valueOf(cur.getCount()); 
```

这是我想要的确切结果感谢您给我快速回复

# wpf - WPF：在wpf中重用资源的正确方法

> ID：14687037
> 
> 赞同：0
> 
> 时间：2013-02-04T12:41:41.880
> 
> 标签：wpf, wpf-controls

我`<Window.Resources>`在 Xaml 的标签中定义了一些情节提要，我想在许多 UIElement 对象上使用它们，所以我想我必须以某种方式不断重置情节提要我检索到的所有内容，因为它之前可能已经使用过，什么是正确的方法去做这个？我是否将`MyStoryBoard.clone()`我从资源中提取的所有内容都称为？还是我应该打电话`MyStoryBoard.GetAsFrozen()`？有一个更好的方法吗？标准做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:52:18.580

您可以将[x:Shared](http://msdn.microsoft.com/en-us/library/aa970778.aspx)属性设置为 false，以防止您的资源被重复使用。这将为每次调用创建一个新实例`{StaticResource MyStoryBoard}`。

```
<StoryBoard x:Key="MyStoryBoard" x:Shared="False" /> 
```

# scala - Scala：如何从 Map 制作 Hash(Trie)Map（通过 Anorm in Play）

> ID：14687042
> 
> 赞同：5
> 
> 时间：2013-02-04T12:42:09.287
> 
> 标签：scala, playframework, anorm

在[docs.scala-lang.org](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.HashMap%24%24HashTrieMap)上阅读[HashTrieMaps](http://docs.scala-lang.org/overviews/collections/concrete-immutable-collection-classes.html#hash_tries)上的这句话后：

> 例如，要在地图中找到给定的键，首先要获取该键的哈希码。然后，哈希码的最低 5 位用于选择第一个子树，然后是接下来的 5 位，以此类推。一旦存储在节点中的所有元素的哈希码在此级别之前选择的位中彼此不同，选择就会停止。

我认为这是一个很棒的（阅读：快！）集合来存储我的 Map[String, Long]。

在我的 Play Framework（使用 Scala）中，我使用 Anorm 加载了大约 18k 个元素的这段代码。加载需要几秒钟（没什么大不了的，但有什么提示吗？）。我想把它放在“内存中”，以便快速查找字符串到长翻译。

```
val data = DB.withConnection { implicit c ⇒
  SQL( "SELECT stringType, longType FROM table ORDER BY stringType;" )
    .as( get[String]( "stringType" ) ~ get[Long]( "longType " )
    map { case ( s ~ l ) ⇒ s -> l }* ).toMap.withDefaultValue( -1L )
} 
```

此代码`data`的类型为`class scala.collection.immutable.Map$WithDefault`. 我希望这是一种类型`HashTrieMap`（或者`HashMap`，据我所知，链接引用的所有 Scala HashMap 都属于 HashTrieMap？）。奇怪的是，我找不到如何将其转换为 HashTrieMap 的方法。（我是 Scala、Play 和 Anorm 的新手。）

```
// Test for the repl (2.9.1.final). Map[String, Long]:
val data = Map( "Hello" -> 1L, "world" -> 2L ).withDefaultValue ( -1L )
data: scala.collection.immutable.Map[java.lang.String,Long] =
  Map(Hello -> 1, world -> 2)

// Google showed me this, but it is still a Map[String, Long].
val hm = scala.collection.immutable.HashMap( data.toArray: _* ).withDefaultValue( -1L )

// This generates an error.
val htm = scala.collection.immutable.HashTrieMap( data.toArray: _* ).withDefaultValue( -1L ) 
```

所以我的问题是如何将 MapWithDefault 转换为 HashTrieMap（或 HashMap，如果它共享 HashTrieMap 的实现）？

欢迎任何反馈。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T13:49:56.173

正如您指出的文档所解释的那样，不可变映射已经在后台实现为`HashTrieMap`s. 您可以在 REPL 中轻松验证这一点：

```
scala> println( Map(1->"one", 2->"two", 3->"three", 4->"four", 5->"five").getClass )
class scala.collection.immutable.HashMap$HashTrieMap 
```

所以你没有什么特别的事情要做，你的代码已经在`HashMap.HashTrieMap`你甚至没有意识到的情况下使用。

`immutable.Map` 更准确地说，是的默认实现`immutable.HashMap`，由 进一步细化（扩展）`immutable.HashMap.HashTrieMap`。请注意，虽然小的不可变映射*不是*的实例`immutable.HashMap.HashTrieMap`，但作为特殊情况实现（这是一种优化）。有一个特定的大小阈值，它们开始被执行为 `immutable.HashMap.HashTrieMap`. 例如，在 REPL 中输入以下内容：

```
val m0 = HashMap[Int,String]()
val m1 = m0 + (1 -> "one")
val m2 = m1 + (2 -> "two")
val m3 = m2 + (3 -> "three")
println(s"m0: ${m0.getClass.getSimpleName}, m1: ${m1.getClass.getSimpleName}, m2: ${m2.getClass.getSimpleName}, m3: ${m3.getClass.getSimpleName}") 
```

将打印：

```
m0: EmptyHashMap$, m1: HashMap1, m2: HashTrieMap, m3: HashTrieMap 
```

所以这里的空地图是`EmptyHashMap$`. 添加一个元素得到 a `HashMap1`，再添加一个元素最终得到 a `HashTrieMap`。

* * *

最后，使用`withDefaultValue`不会改变任何东西，因为`withDefaultValue`只会返回一个`Map.WithDefault`包含初始映射的实例（仍然是 a `HashMap.HashTrieMap`）。

# c++ - SFML TCP 数据包接收

> ID：14687046
> 
> 赞同：0
> 
> 时间：2013-02-04T12:42:34.323
> 
> 标签：c++, tcp, sfml, packet

我将一个数据包作为客户端发送到服务器，我希望服务器将该数据包转发给所有客户端，代码如下：

```
#include <iostream>
#include <SFML/Network.hpp>
using namespace std;
int main()
{
int fromID; // receive data from 'fromID'
int Message; // fromID's message

sf::SocketTCP Listener;
if (!Listener.Listen(4567))
    return 1;
// Create a selector for handling several sockets (the listener + the socket associated to each client)
sf::SelectorTCP Selector;

Selector.Add(Listener);

while (true)
{
    unsigned int NbSockets = Selector.Wait();
    for (unsigned int i = 0; i < NbSockets; ++i)
    {
        // Get the current socket
        sf::SocketTCP Socket = Selector.GetSocketReady(i);

        if (Socket == Listener)
        {
        // If the listening socket is ready, it means that we can accept a new connection
            sf::IPAddress Address;
            sf::SocketTCP Client;
            Listener.Accept(Client, &Address);
            cout << "Client connected ! (" << Address << ")" << endl;

            // Add it to the selector
            Selector.Add(Client);
        }
        else
        {
            // Else, it is a client socket so we can read the data he sent
            sf::Packet Packet;
            if (Socket.Receive(Packet) == sf::Socket::Done)
            {

               // Extract the message and display it
                Packet >> Message;
                Packet >> fromID;
                cout << Message << " From: " << fromID << endl;

                //send the message to all clients
                for(unsigned int j = 0; j < NbSockets; ++j)
                {
                    sf::SocketTCP Socket2 = Selector.GetSocketReady(j);

                    sf::Packet SendPacket;
                    SendPacket << Message;
                    if(Socket2.Send(SendPacket) != sf::Socket::Done)
                        cout << "Error sending message to all clients" << endl;
                }
            }
            else
            {
              // Error : we'd better remove the socket from the selector
                Selector.Remove(Socket);
            }
        }
    }
}
return 0; 
```

}

客户端代码：在 Player 类中我有这个功能：

```
void Player::ReceiveData()
{
 int mess;
 sf::Packet Packet;
 if(Client.Receive(Packet) == sf::Socket::Done)
 {
    Client.Receive(Packet);
    Packet >> mess;
    cout << mess << endl;
 }
} 
```

主.cpp：

```
Player player;
player.Initialize();
player.LoadContent();
player.Connect();
..
..
//GAME LOOP
while(running==true)
{
   sf::Event Event;
   while(..) // EVENT LOOP
   {
   ...
   }
   player.Update(Window);
   player.ReceiveData();
   player.Draw(Window);
} 
```

当我运行此客户端代码时，程序没有响应，冻结。问题在于 ReceiveDate() 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:45:23.967

所有的套接字，即使是由 SFML 创建的，默认情况下都是阻塞的。这意味着当您尝试接收时，没有任何东西可以接收，调用将被阻塞，使您的应用程序看起来“冻结”。

您可以使用该函数切换 SFML 套接字的阻塞状态[`sf::SocketTCP::SetBlocking`](http://www.sfml-dev.org/documentation/1.6/classsf_1_1SocketTCP.php#aa80f7711b15fe33a5c7005acedae43c9)。

* * *

发送给所有客户端失败的问题是因为你`GetSocketReady`用来让客户端发送到。该函数只为*准备好的*客户端返回一个套接字（即先前调用`Wait`将套接字标记为具有输入）。

您需要重构服务器以以另一种方式跟踪连接的客户端。常见的方法是每次在外循环中重置和重新创建选择器，并有一个单独的连接客户端集合（例如 a `std::vector`）。

# ruby - 将 Handsoap::SoapResponse 转换为 ruby 中的特定类

> ID：14687053
> 
> 赞同：0
> 
> 时间：2013-02-04T12:43:04.447
> 
> 标签：ruby, handsoap

我正在使用 HandSoap 为 JAX-WS SOAP API 制作客户端代码。我能够使用 Nokigiri gem 从 SoapResponse 中提取 XML，但我无法将该响应转换为任何特定的类。ruby 有什么方法可以将 Handsoap::SoapResponse 转换为特定的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:55:43.210

我做了一些研究，似乎没有其他方法可以直接做到这一点，所以我使用 XML 来获取一个哈希并递归遍历这个哈希来初始化类实例。

从 SOAP 响应中获取 XML 和哈希

```
 response = client.someSoapCall({:someParameter => "someValue"})
  doc = Nokogiri::XML.parse(response.document.to_raw)
  hash = Hash.from_xml(doc.to_s) 
```

此函数将哈希转换为类

```
def recast(className, hash)
  hash.each_pair do |k, v|
    if (v.class==Hash)
      find(className, v)
    else
      membersArray = className.public_methods
      membersArray.each {
          |x|

        if (x.to_s==k.to_s)
          member =x.to_s
          className.send "#{member}=", v.to_s
        end

      }
    end
  end

end 
```

# geoip - maxmind 中包含哪些数据 areaCode 和 metroCode 列？

> ID：14687056
> 
> 赞同：4
> 
> 时间：2013-02-04T12:43:19.870
> 
> 标签：geoip, maxmind

正如我所理解的区号 - 是区域电话代码，对吗？那么地铁代码栏的用途是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-04-15T20:24:40.630

Metro Code 是一个 DMA 代码，类似于洛杉矶的“803”，由 Google AdWords 定义。区号确实是国家代码之后的电话前缀。

[https://developers.google.com/adwords/api/docs/appendix/cities-DMAregions](https://developers.google.com/adwords/api/docs/appendix/cities-DMAregions)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-04T12:53:18.883

地铁代码是各州的邮政编码，例如 24100

# android - Vitamio libffmpeg.so

> ID：14687059
> 
> 赞同：2
> 
> 时间：2013-02-04T12:43:32.080
> 
> 标签：android, android-videoview, vitamio

我正在玩 Vitamio 演示，并且喜欢我所看到的。但是，我需要稍微自定义 ffmpeg 源代码（修改 http.c 以便将 http 流的默认设置设置为不可搜索）。我已按照[此处](https://github.com/yixia/FFmpeg-Android)的步骤重建 libffmpeg.so。到目前为止，一切都很好，一切都很好......

但是，我看不到 libffmpeg.so 在 Vitamio 包中的位置。我看到一个名为 libarm.so 的库。它住在里面吗？如果是这样，如何使用包含的修改后的 libffmpeg.so 重新打包它？

谢谢

担

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:58:28.550

您在原始文件夹中看到的 libarm.so 实际上是一个包含文件夹的 7z。文件夹对应：

*   **60** -armv6
*   **61** - 支持 vfp 的 armv6
*   **70** - 使用 vfpv3-D16 武装 v7
*   **71** - 带有霓虹灯优化的 arm v7

Vitamio 将在运行时解压缩与您的系统匹配的那个并使用它。

您必须更改每个文件夹中的 libffmpeg.so 并再次压缩它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T08:56:38.223

Vitamio 的作者更新了 FFMpeg-Android 项目并撰写了“How to”文章[http://www.vitamio.org/en/2013/Tutorial_0509/13.html](http://www.vitamio.org/en/2013/Tutorial_0509/13.html)

自此更新以来，一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:42:36.253

也许我应该检查一下我做对了。首先，我像这样下载 ffmpeg 源代码：

```
git clone git clone git://source.ffmpeg.org/ffmpeg.git ffmpeg 
```

我然后：

```
cd ffmpeg 
```

...最后：

```
git checkout 5e99df019a850e9ffa96d73e72b8a47a93a61de8 
```

ffmpeg 文件夹中的“版本”文件现在读取为“0.11.1”，我认为这是对的吗？

各个 libffmpeg.so 文件都可以毫无问题地构建。然后我将它们复制到您描述的文件夹中，并使用 7z 命令行将它们重新打包为 libarm.so。我正在使用 NDK r8c 进行构建。无论我做什么，我的设备和模拟器都会不断出现这种恼人的崩溃。有时它会起作用，但很少见。我现在已经尝试了数百种不同的东西，这让我非常生气:)

# c# - '<'，十六进制值 0x3C，是无效的属性字符

> ID：14687062
> 
> 赞同：7
> 
> 时间：2013-02-04T12:43:43.530
> 
> 标签：c#, .net, vsto

我开发了 VSTO 插件。现在，当我尝试在我的机器上安装 VSTO 插件时，我收到如下异常。

System.Xml.XmlException：'<'，十六进制值 0x3C，是无效的属性字符。第 21 行，第 39 位。

我已经在第 21 行签入了 .vsto 文件。该行如下。

```
<publisherIdentity name="CN=&quot;&lt;itranscript.net&gt;&quot;"/> 
```

上面一行有什么问题。谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-09-13T22:18:12.550

我知道这是旧的，但这是我在这里搜索的第一件事。我有一个类似的问题，但这是由于单独的 app_settings.config 文件中的元素格式错误，所以它把我扔了，因为错误是指 Web.Config。所以在Web.config中，有这样的东西

```
<appSettings file="DebugPrimaryPaul_AppSettings.config"> 
```

在 _AppSettings.config 中是这样的

```
<add key ="RegionalCodes" value="xxxxxxxxxxxxxxxxxx /> 
```

请注意缺少的 " 后值，这会导致行格式错误。错误是指 Web.config 中低得多的行。将 " 放入修复它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T11:24:16.507

我找到了解决方案。`<publisherIdentity name="CN=&quot;&lt;itranscript.net&gt;&quot;"/>`是不正确的。鉴于名称中的正确值解决了我的问题...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-11T18:07:00.450

我正在寻找的答案是替换`<`为`&lt;`

# .htaccess - Apache 2.2 HTTP_HOST 未正确解析为 localhost

> ID：14687072
> 
> 赞同：2
> 
> 时间：2013-02-04T12:44:06.670
> 
> 标签：.htaccess, mod-rewrite, apache2, localhost, http-host

**显然，整个问题是 chrome v.24 和主机解析中新引入的错误，htaccess 在任何其他浏览器中都可以正常工作。不知道如何“关闭”这个问题，如果有人可以指点我^^**

尝试使用在 Windows 上本地运行的 Apache 2.2 进行简单的重写。

```
RewriteCond %{HTTP_HOST} !=localhost
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

重定向到“www.localhost/”

第一行不应该与本地主机匹配吗？

还尝试了这些替代方案：

```
1
RewriteCond %{REMOTE_ADDR} !127.0.0.1
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

2
RewriteCond %{HTTP_HOST} !^(www\.|localhost$) [NC]  
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

3
RewriteCond %{HTTP_HOST} !^(www\.|127.0.0.1$) [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

4
RewriteCond %{HTTP_HOST} !^(www\.|localhost$) [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

5
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} !^localhost$ [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

6
RewriteCond %{HTTP_HOST} !^localhost$ [NC]
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

每个人都去“www.localhost/”，有人知道出了什么问题吗？

# jsf - 带有参数的登录站点

> ID：14687078
> 
> 赞同：0
> 
> 时间：2013-02-04T12:44:30.300
> 
> 标签：jsf

我们有一个 jsf 应用程序，带有一个正常的登录站点。现在我们必须将此应用程序与另一个应用程序集成，我的问题是在两个应用程序之间传递参数。假设客户端在一个应用程序中有一个 ID，我必须从第二个应用程序加载登录页面，我认为从第一个应用程序通知第二个应用程序有关客户端的最简单方法是使用参数加载登录页面，即第一个应用程序的客户端 ID。

另一种方式，我的第二个应用程序必须独立运行，所以我需要两个登录页面，一个没有参数，一个有参数。这种方式甚至是可能的，或者有另一种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:36:38.527

您不能在两个不同的应用程序之间共享会话。您将参数从第一个应用程序传递到第二个应用程序的策略对我来说似乎是正确的。

如果您想共享登录名，那么另一种方法可能是在第一个应用程序的加密 cookie 中添加登录详细信息，当您重定向到另一个应用程序时，第二个应用程序可以根据加密的 cookie 验证登录。

两个应用程序都应该在同一个域中运行以接受 cookie（例如 .xyz.com）

这就是大多数 SSO（单点登录）应用程序通过使用 LTPA 令牌作为 cookie 来共享会话的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:16:18.230

第二个应用程序可以有具有两种不同形式的单个登录页面。

您可以从第一个应用程序传递一些 ID 作为会话属性的一部分，并在第二个应用程序的登录页面中获取该会话属性。在这里，您可以检查您是否获得了会话属性（是否为空），并根据需要呈现相关表单。相反，如果直接点击第二个应用程序的登录页面，则该会话属性将不存在，您可以根据需要呈现其他表单。

# asp.net-mvc - 合并 SelectList 中的 2 个字段

> ID：14687082
> 
> 赞同：5
> 
> 时间：2013-02-04T12:44:41.890
> 
> 标签：asp.net-mvc, selectlist

目前我有 SelectList 写入 ID，并在表单上显示 FirstName。

```
ViewBag.Person = new SelectList(db.Person, "ID", "FirstName"); 
```

如何将 FirstName 和 LastName 连接到 SelectList 中？就像是：

```
ViewBag.Person = new SelectList(db.Person, "ID", "FirstName & LastName"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T12:50:07.750

尝试这样的事情：

```
ViewBag.Person = 
new SelectList((from s in db.Person select new { 
    ID=s.ID,
    FullName = s.FirstName+ " " + s.LastName}), 
    "ID", 
    "FullName", 
    null); 
```

或向您的 Person 模型添加新属性

```
public string Fullname 
{
    get 
    {
        return string.Format("{0} {1}", FirstName, LastName);
    }
} 
```

# javascript - ShadowBox Js - 直接全屏打开视频

> ID：14687083
> 
> 赞同：0
> 
> 时间：2013-02-04T12:44:44.950
> 
> 标签：javascript, jquery, mobile, fullscreen, shadowbox

有没有办法配置shadowBox直接全屏打开视频？当您使用移动设备而不是弹出窗口在网站上冲浪时，我想要这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:33:17.207

如果您正在嵌入基于 Flash 的视频播放器，那么答案是否定的。由于存在安全限制，您不能从 javascript 或 Flash 环境之外的任何其他地方调用视频全屏模式。

但是您可以通过将视频播放器放置在宽度和高度为 100% 的某个 DIV 中来制作一些伪全屏，并制作一些 GUI 元素和 javascript 逻辑以在某些事件（如 onclick）上关闭该 DIV。

如果您的视频是基于 HTML 的视频标签，您可以从 javascript 调用全屏模式。更多关于从 javascript 调用视频标签全屏的信息可以在这里找到：[https ://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode?redirectlocale=en-US&redirectslug=DOM%2FUsing_full-screen_mode](https://developer.mozilla.org/en-US/docs/DOM/Using_fullscreen_mode?redirectlocale=en-US&redirectslug=DOM%2FUsing_full-screen_mode)

# iphone - Objective-C 中的多边形

> ID：14687085
> 
> 赞同：0
> 
> 时间：2013-02-04T12:45:06.117
> 
> 标签：iphone, objective-c, xcode, uiview, polygon

我想按照[附件](http://i.stack.imgur.com/GQeRl.png)中给出的绘制多边形！有可能这样做吗？关于多边形的另一件事，我想将它创建为 UIView。就像我们创建矩形和正方形一样。因为我需要使用“标签”属性。是否可以以这种方式创建多边形？

我经历了另一个想法，我应该创建三个视图并相互附加（在[附件](http://i.stack.imgur.com/GQeRl.png)中给出）。

您可以按照示例考虑一些视图框架..

**查看1）CGRectMake（0,0,50,50）；**

**查看2）CGRectMake（50,0,50,50）；**

**查看3）CGRectMake（50,50,50,50）；**

我可以创建三个视图，但如何连接这些视图并制作一个视图（**我们的多边形**）？

你能给我解决方案或任何建议来解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:52:01.837

UIView 的整个形状必须是方形的。您不能创建不是方形/矩形的 UIView。

您可以使用 UIBezierPath 绘制它...

```
UIBezierPath *path = [[UIBezierPath alloc] init];

[path moveToPoint:CGPointMake(0, 0)];
[path addLineToPoint:CGPointMake(100, 0)];
[path addLineToPoint:CGPointMake(100, 100)];
... and so on. 
```

然后在 drawRect 你可以...

```
[path stroke]; 
```

# matplotlib - 如何为matplot散点图中的每个气泡设置_gid（）？

> ID：14687089
> 
> 赞同：2
> 
> 时间：2013-02-04T12:45:28.190
> 
> 标签：matplotlib, scatter

我通过以下代码绘制散点图：

```
import matplotlib.pyplot as plt

x = [2,4,6]
y = [1,3,7]
r = [650,890,320]
clr = ['r','b','g']
bubble_id = ['C0','C1','C2']

H0 = plt.scatter(x,y,s=r,c=clr) 
```

![matplotlib 散点图的气泡](../Images/12d9f839bb5ff7b7e8f0565b9967ae87.png)

然后我想把`'set_gid()'`三个泡泡`'C0', 'C1' ,'C2'`分别作为。怎么做 ？作为`H0`单个对象`<matplotlib.collections.PathCollection object at 0x0ADA6D30>`，我不知道如何分解 H0 并找到 H0 的三个“泡泡儿子”。感谢您的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:49:14.073

所以，我知道这可能不是最有效的解决方案，但是循环呢？

```
import matplotlib.pyplot as plt
import itertools as it

X = [2,4,6]
Y = [1,3,7]
radius = [650,890,320]
clr = ['r','b','g']
bubble_id = ['C0','C1','C2']

ax = plt.subplot(111)
for x, y, r, c, id in it.izip(X, Y, radius, clr, bubble_id):
    ax.scatter(x,y,s=r,c=c, gid=id) 
```

视觉上给出了相同的情节。

在 Ipython 中，我查看了`PathCollection`方法，看起来没有简单的方法可以从中取出单个补丁。

**2020年编辑**

由于现在您很可能使用 python 3（如果不是的话），因此可以使用内置的`zip`而不是`itertools.izip`. 感谢@Guimute 恢复了答案

# php - SELECT CONCAT 查询的回显结果？

> ID：14687090
> 
> 赞同：1
> 
> 时间：2013-02-04T12:45:29.347
> 
> 标签：php, mysql, sql, join, phpmyadmin

所以，我试图让一个 SELECT CONCAT 查询运行，返回查询结果并基本上将它们显示在 .php 网页上。例如，如果我手动将以下 SQL 代码放入 PHPMyAdmin：

```
SELECT CONCAT(m.Name, ' ', p.Model, ' - ', p.StorageSize, ' - ', o.Name, ' - ', p.Price)
FROM phones p
JOIN manufacturer m
ON p.ManufacturerID = m.ManufacturerID
JOIN operatingsystem o
ON p.OSID = o.OSID 
```

PHPMyAdmin 运行它并显示“Apple iPhone 5 - 16GB - iOS - 499.99。但是，我试图让它显示在 .php 页面上而不是仅仅通过 PHPMyAdmin 并且无法让它工作。我猜我需要使用某种 echo 命令，但是当我使用例如 echo $result 时，它要么在网页上不显示任何内容，要么有时在“资源 id #3”上显示。我的整个 PHP 代码如下：

```
<html>
<head>
<LINK rel="stylesheet" href="style.css">
<title>Phones | Mobiles Four You</title>
</head>

<body>
<div id="container"> 
<div id"header"><img src="images/logo.png" alt="Logo"/></div>
<div id="navbar">
<ul>
<li><a id=”nav-home” class=”first” href="index.php">Home</a></li>
<li><a id=”nav-phones” href="phones.php?sort=Make">Phones</a></li>
<li><a id=”nav-search” href="search.php">Search</a></li>
<li><a id=”nav-login” href="login.php">Login</a></li>
<li><a id=”nav-contact” class=”last” href="contact.php">Contact</a></li>
</ul>
</div>

<div id="content">
<h1>Mobile Phones</h1>
</div>

<?php
$con = mysql_connect("b*********", "*****", "*****");
if (!$con)
{
die('Could not connect: '  . mysql_error());
}

mysql_select_db("bg29li", $con);
$query = ("SELECT CONCAT(m.Name, ' ', p.Model, ' - ', p.StorageSize, ' - ', o.Name, ' -             ', p.Price)
FROM phones p
JOIN manufacturer m
ON p.ManufacturerID = m.ManufacturerID
JOIN operatingsystem o
ON p.OSID = o.OSID"); 

mysql_close($con);
?>
</body>
</html> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:49:32.257

给串联的名称一个别名，然后遍历行并回显它们：

```
mysql_select_db("bg29li", $con);
$query = ("SELECT CONCAT(m.Name, ' ', p.Model, ' - ', p.StorageSize, ' - ', o.Name, ' -             ', '£' , p.Price) AS Names
FROM phones p
JOIN manufacturer m
ON p.ManufacturerID = m.ManufacturerID
JOIN operatingsystem o
ON p.OSID = o.OSID"); 

$result = mysql_query($query);

while($row=mysql_fetch_array($result))
{
    // here you can get the values using $row['names']
    echo $row['names'];

} 

mysql_close($con); 
```

但是，请停止使用 mysql_query 扩展并改用 PDO 或准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:50:15.260

```
$query = "SELECT CONCAT(m.Name, ' ', p.Model, ' - ', p.StorageSize, ' - ', o.Name, ' -             ', p.Price)  AS val
FROM phones p
JOIN manufacturer m
ON p.ManufacturerID = m.ManufacturerID
JOIN operatingsystem o
ON p.OSID = o.OSID"; 

$res  = mysql_query($query);

while($row = mysql_fetch_assoc($res)){
    print_r($row);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:51:45.627

mysql_select_db("bg29li", $con);

首先创建 sql 查询以字符串格式运行

$query = "SELECT CONCAT(m.Name, ' ', p.Model, ' - ', p.StorageSize, ' - ', o.Name, ' - ', p.Price) FROM 电话 p 加入制造商 m ON p .ManufacturerID = m.ManufacturerID 加入操作系统 o ON p.OSID = o.OSID";

之后运行这个查询，你会得到 $result 变量的结果

$result = mysql_query($query);

while ($row = mysql_fetch_array($result, MYSQL_NUM)) {

```
printf("%s  ", $row[0]); 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:52:53.460

```
 $query = ("SELECT CONCAT(m.Name, ' ', p.Model, ' - ', p.StorageSize, ' - ', o.Name, ' -             ', p.Price)
FROM phones p
JOIN manufacturer m
ON p.ManufacturerID = m.ManufacturerID
JOIN operatingsystem o
ON p.OSID = o.OSID"); 
```

这还不够`mysql_query($query)`需要执行，否则它只是一个字符串变量，那么您将不得不使用 mysql_fetch_array 或 mysql_fetch_object 来获得结果

# android - iPhone中等效的Android字符串文件（Monotouch）

> ID：14687091
> 
> 赞同：1
> 
> 时间：2013-02-04T12:45:42.870
> 
> 标签：android, iphone, string, xamarin.ios, xamarin.android

在 android 中，我们有名称为 String 的文件。开发人员在此文件中定义他们用于命名对象的字符串值。这是一个非常有用的方法。因为避免了硬编码字符串值（您可以从单个文件中更改它们，更改时间更短），对于创建多语言应用程序等也很有用（更多信息只需谷歌这个）。

但问题是：iPhone（Monotouch）是否有这样的机制来定义字符串，或者开发人员必须为此定义自己的机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:56:51.950

在 XCode 中，您会找到 File/New File，然后在左侧选择“Resource”，然后您会找到“Strings File”。

从代码中，您将引用字符串文件中的键`NSLocalizedString`：

```
NSLog("%@", NSLocalizedString(@"YOUR-STRING-KEY-OR-DEFAULT-VALUE", @"Comment about what this is")); 
```

有关第二个参数的详细信息[，NSLocalizedString() 的第二个参数是什么？](https://stackoverflow.com/questions/1442822/what-is-the-second-parameter-of-nslocalizedstring)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:52:14.327

将您的字符串放在一个文件中。使它们成为全局常量。在整个应用程序中访问它们。当您更改这些时，更改将无处不在。

在整个应用程序中拥有持久的字符串引用并不是什么大问题。我想它可以用任何体面的编程语言和平台来完成。

# c# - 为什么以下 c# win 表单验证方法不起作用？

> ID：14687092
> 
> 赞同：0
> 
> 时间：2013-02-04T12:45:52.300
> 
> 标签：c#, winforms, validation

我有一个包含 5 个验证元素的验证方法，其中 4 个按预期工作，但 1 个没有，问题是为什么不呢？

我遇到的问题是验证“CompetitionCourse”。只有当组合框 cbCourseRound1 不为空时，我才希望 IsValid 为真。目前，无论此组合框是空白还是填充，这都在验证。所有其他验证工作正常，

```
private bool Validate(Competition compSetup)
        {
            string CompetitionName = compSetup._CompetitionName;
            int CompetitionFormat = compSetup._CompetitionFormatId;
            string CompetitionGender = cbGenderOfCompetiton.Text;
            string CompetitionMarker = cbMarker.Text;
            string CompetitionCourse = cbCourseRound1.Text;

            if (!CompetitionName.Equals(string.Empty) && !CompetitionGender.Equals("Mixed") && CompetitionFormat.Equals(1) && !CompetitionCourse.Equals(string.Empty) &&
                ((CompetitionGender.Equals("Female") && CompetitionMarker.Equals("Red")) || (!CompetitionGender.Equals("Female") && !CompetitionMarker.Equals("Red"))))
            {
                IsValid = true;
            }
            else
            {
                IsValid = false;
            }
            return IsValid;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:53:52.843

取决于里面有什么`CompetitionCourse`。您必须通过调试代码自行检查。

如果 ComboBox 文本字段为空白，则最好明确确保`CompetitionCourse`包含`null`（因为我怀疑它包含“”）：

```
CompetitionCourse = (string.IsNullOrEmpty(cbCourseRound1.Text)) ? null : cbCourseRound1.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:55:52.453

可能您应该尝试修剪文本框周围的空白。例如，`txtName.Trim();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:49:33.110

> 目前，无论此组合框是空白还是填充，这都在验证。

检查组合框的[Items](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.items.aspx)属性，而不是`Text`Property 之类的。

```
cbCourseRound1.Items != null && cbCourseRound1.Items.Count > 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:50:09.723

首先，使用`.Equals`for 字符串是非常 Java 的。C# 有运算符重载，看起来好多了：

```
if(CompetitionName!="" && CompetitionGender!="Mixed" ...) 
```

至于测试本身，你需要设置一个断点，看看 `CompetitionCourse 有什么。我的猜测是它不是一个空字符串，而是其中有一些空格。尝试使用

```
...!CompetitionCourse.Trim()!="" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T13:03:19.153

您的代码很难阅读，我将尝试简化它：

```
private bool Validate(Competition compSetup)
{
    bool isValid = cbGenderOfCompetiton.Text != "Female" && cbMarker.Text == "Red";
    if (!isValid)
    {
        isValid = !string.IsNullOrEmpty(compSetup._CompetitionName);
        if (isValid)
            isValid = compSetup._CompetitionFormatId.Text == "Female";// this is redundant: cbGenderOfCompetiton.Text != "Mixed";
        if (isValid)
            isValid = CompetitionFormat == 1;
        if (isValid)
            isValid = cbCourseRound1.SelectedIndex != -1;
        if (isValid)
            isValid = cbMarker.Text == "Red"; 
    }
    return isValid;
} 
```

请注意，我使用了`SelectedIndex`代替，`Combobox.Text`因为它不太容易出错。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T13:18:36.663

不要使用 !Equals，而是使用 IsNullOrWhitespace 或 IsNullOrEmpty。它工作得更好。

# r - 在R中将excel输出从字符转换为数字

> ID：14687095
> 
> 赞同：2
> 
> 时间：2013-02-04T12:46:05.700
> 
> 标签：r, excel, import

我有个问题。假设我有一个向量 x：

`x`：

```
 [1] "2 416" "143"   "280"   "2 503" "144"   "128"   "55"    "697"   "826"   "9"     "35"    "9 257" "234"   "2 044" NA      "219"  
[17] NA      NA      "219"   "7 431" "82"    "88"    "186"   "231"   "192"   "456"   "585"   "75"    "142"   NA      NA      NA     
[33] "72"    "246"   "900"   "143"   "231"   "195"   "282"   "226"   "967"   "247"   "2 252" "694"   "64"    "7 744" "204"   "428"  
[49] "19"    "94"    "174"   "292"   "94"    "172"   "221"   "123"   "404"   "385"   "324"   "346"   "658"   "53"    "377"   "119"  
[65] NA      "51"    "391"   "1 072" "387"   "1 742" "518"   "173"   "366"   "67"    "163"   "1 151" "382"   "864"   "184"   "172"  
[81] NA      "538"   "39"    "2 272" "334"   "464"   "82"    "112" 

class(x) 
"character" 
```

我从 Excel 导入了这个向量

```
x=read.csv(file="C:/Users/Documents/x.csv",header=TRUE,sep=";",na.strings=c("NA",""),
dec = ",",stringsAsFactors=FALSE,blank.lines.skip = F) 
```

不，当我尝试转换`x`为数字时，会发生这种情况：

```
as.numeric(x)

 [1]  NA 143 280  NA 144 128  55 697 826   9  35  NA 234  NA  NA 219  NA  NA 219  NA  82  88 186 231 192 456 585  75 142  NA  NA  NA  72
[34] 246 900 143 231 195 282 226 967 247  NA 694  64  NA 204 428  19  94 174 292  94 172 221 123 404 385 324 346 658  53 377 119  NA  51
[67] 391  NA 387  NA 518 173 366  67 163  NA 382 864 184 172  NA 538  39  NA 334 464  82 112
Warning message:
NAs introduced by coercion 
```

所以一些数字，即“2 416”被转换为NA，而我希望将数字转换为2 416。我希望R解释`"2 416"`为数值`2416`我做错了什么？

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:52:23.017

在进行转换之前，您必须用空字符串替换空格：

```
x <- c("2 416", "143", "280", "2 503") 
```

立即转换失败，因为“2 416”不是数字：

```
as.numeric(x)
[1]  NA 143 280  NA
Warning message:
NAs introduced by coercion 
```

用于`gsub()`用空字符串替换空格，然后转换：

```
as.numeric(gsub(" ", "", x))
[1] 2416  143  280 2503 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:57:33.570

使用`stringr`包

你可以做类似的事情

```
library(stringr)
> as.numeric(str_replace_all(dat,pattern=' ',replacement=''))
 [1] 2416  143  280 2503  144  128   55  697  826    9   35 9257  234 2044   NA  219   NA   NA  219 7431   82   88  186  231  192  456  585   75  142
[30]   NA   NA   NA   72  246  900  143  231  195  282  226  967  247 2252  694   64 7744  204  428   19   94  174  292   94  172  221  123  404  385
[59]  324  346  658   53  377  119   NA   51  391 1072  387 1742  518  173  366   67  163 1151  382  864  184  172   NA  538   39 2272  334  464   82
[88]  112 
```

# objective-c - iPad - 多行字符串的 CGContextShowTextAtPoint

> ID：14687105
> 
> 赞同：1
> 
> 时间：2013-02-04T12:46:29.807
> 
> 标签：objective-c, ipad, core-graphics, xcode4.5, cgaffinetransform

我正在使用以下代码片段来绘制文本：

```
CGFloat DegreesToRadiansText(CGFloat degrees) {return degrees * M_PI / 180;};
CGContextSelectFont (context, "Arial Rounded MT Bold", 18, kCGEncodingMacRoman);
CGContextSetCharacterSpacing (context, 0);
CGContextSetTextDrawingMode (context, kCGTextFill);
CGContextSetGrayFillColor(context, 0.0, 1.0);
CGAffineTransform myTextTransform = CGAffineTransformRotate(CGAffineTransformScale(CGAffineTransformIdentity, 1.f, -1.f ),(DegreesToRadiansText (-90));
CGContextSetTextMatrix (context, myTextTransform);
CGContextShowTextAtPoint (context, 552, 445, "iPhone\nUser", 11); 
```

如果我绘制单行文本，上面的代码工作正常。

但是，如果我添加多行文本（即上面代码中显示的具有 '\n' 字符的文本。）它会显示为单行文本。

现在我得到如下图所示的输出：

[http://tinyurl.com/crrz9ew](http://tinyurl.com/crrz9ew)

但我想要如下图所示的输出：

[http://tinyurl.com/ctntbfk](http://tinyurl.com/ctntbfk)

有什么方法可以使用函数 CGContextShowTextAtPoint 绘制多行字符串，或者有什么替代方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-28T06:55:00.357

您可以将其绘制为 CGContext 的 drawInRect:withAttributes 方法，您必须为绘制文本提供高度。

# asp.net-mvc - 在局部视图中使用输出缓存注册 Javascript/CSS 文件仅一次

> ID：14687106
> 
> 赞同：1
> 
> 时间：2013-02-04T12:46:33.840
> 
> 标签：asp.net-mvc

我想创建需要包含 Javascript/CSS 文件才能正常运行的部分视图。同一个局部视图可以在一个页面中多次包含，因此如果我将 Javascript/CSS 文件嵌入到局部视图 HTML 内容中，这些文件将被嵌入 N 次。我希望这些文件只嵌入一次。

此外，此类局部视图正在使用该`Html.Action`方法呈现，以便利用输出缓存，因此 Action 方法不会一直执行。

我的想法是使用一些管理此类嵌入的控制器在部分视图中注册 javascript/css 文件，然后将它们输出到页面的脚本部分，在结束`</body>`标记之前的底部，但由于操作将被缓存，例如代码不保证执行，但可以从缓存中加载。

对于这种情况的最佳实践有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:19:34.800

您可以定义 2 个自定义助手：

```
public static class HtmlExtensions
{
    public static IHtmlString RenderRegisteredScripts(this HtmlHelper htmlHelper)
    {
        var ctx = htmlHelper.ViewContext.HttpContext;
        var registeredScripts = ctx.Items["_scripts_"] as Stack<string>;
        if (registeredScripts == null || registeredScripts.Count < 1)
        {
            return null;
        }
        var sb = new StringBuilder();
        foreach (var script in registeredScripts)
        {
            var scriptBuilder = new TagBuilder("script");
            scriptBuilder.Attributes["type"] = "text/javascript";
            scriptBuilder.Attributes["src"] = script;
            sb.AppendLine(scriptBuilder.ToString(TagRenderMode.Normal));
        }
        return new HtmlString(sb.ToString());
    }

    public static void RegisterScript(this HtmlHelper htmlHelper, string script)
    {
        var ctx = htmlHelper.ViewContext.HttpContext;
        var urlHelper = new UrlHelper(htmlHelper.ViewContext.RequestContext);
        var registeredScripts = ctx.Items["_scripts_"] as Stack<string>;
        if (registeredScripts == null)
        {
            registeredScripts = new Stack<string>();
            ctx.Items["_scripts_"] = registeredScripts;
        }
        var src = urlHelper.Content(script);
        if (!registeredScripts.Contains(src))
        {
            registeredScripts.Push(src);
        }
    }
} 
```

然后有一个`_Layout.cshtml`你在最后调用`RenderRegisteredScripts`助手的地方：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
</head>
<body>
    @RenderBody()
    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    @RenderSection("Scripts", required: false)
    @Html.RenderRegisteredScripts()
</body>
</html> 
```

现在您可以拥有一个视图，它可以根据需要多次渲染部分部分：

```
@for (int i = 0; i < 10; i++)
{
    @Html.Partial("_Foo")    
}

@Html.Action("Bar") 
```

并在此部分 ( `_Foo.cshtml`) 中使用`RegisterScript`帮助程序为此部分注册依赖脚本：

```
@{Html.RegisterScript("~/scripts/foo.js");} 
```

现在，当您查看生成的 HTML 标记时，该脚本仅包含一次：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <link href="/Content/Site.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <script src="/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="/scripts/foo.js" type="text/javascript"></script>
</body>
</html> 
```

# java - Java：多线程不起作用

> ID：14687108
> 
> 赞同：1
> 
> 时间：2013-02-04T12:46:44.247
> 
> 标签：java, multithreading

我在java中尝试这个程序但是当我把所有东西都放在`run()`方法中时我没有得到任何输出

主.java：

```
public class Main {

    static int line;
    static boolean ret = true;
    static BufferedReader br;

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {

            File f = new File("tere.dat");
            // boolean ret = f.createNewFile() ;
            br = new BufferedReader(new FileReader(f));

            new Test(br.readLine());
            new Test(br.readLine());
    }

} 
```

测试.java：

```
public class Test extends Thread {

    private String input;
    static int thread_count = 0;

    public Test(String l)
    {
         input = l;
    }

    public void run()
    {
        System.out.println("Checking from other class  : This was printed from file :>>");
        System.out.println(input);
        String upper = input.toUpperCase();
        System.out.println("");
        System.out.println("The String in all UpperCase :" + upper);
    }
} 
```

我想要做的是我想使用两个线程从文件中读取行，然后显示我得到的任何内容。我是 Java 新手

**编辑**：

我没有使用该`start()`方法。尽管即使在使用后 `start()`它也只从文件中读取 2 行并停止。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T12:48:22.627

你必须`start()`你的线程。

另外，我建议在继续之前阅读有关 Java 线程和并发的优秀教程，因为它是一个复杂的主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:49:08.143

你需要用`start()` 我建议你不要扩展 Thread 而是实现 Runnable 来启动你的线程。

顺便说一句：除非您输入的**速度非常快**，否则您不会看到使用线程的区别。启动线程并完成它大约需要 0.1 毫秒，因此除非您键入的速度比这快得多，否则不会有任何区别。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T12:49:20.597

您需要启动线程：

```
(new Test(br.readLine())).start(); 
```

而且，您必须添加一些`join`等待线程完成，因为您的主线程将在创建线程之前完成执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T12:49:30.793

你必须启动它们：

```
 (new Test(br.readLine())).start();
        (new Test(br.readLine())).start(); 
```

# php - MongoDB似乎不想推送到数组

> ID：14687113
> 
> 赞同：0
> 
> 时间：2013-02-04T12:47:04.527
> 
> 标签：php, mongodb, insert, push, shopping-cart

我正在制作一个在线购物车，但在将添加到购物车添加到商品时遇到了很大的问题

```
 $collection->update(
                array('session' => $_SESSION["redi-Shop"],
                array('$push'=>
                array('items'=> $_POST["item"])
                ))); 
```

当客户选择他们的第一个项目添加到购物车时，它工作正常

```
 $collection->insert(
   array('session' => $_SESSION["redi-Shop"],
   'status' => "cart",
   'items' =>$_POST['item'])); 
```

但是在添加第一项之后，它不允许我再添加。

请任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:35:29.920

第一次插入时，该`items`字段不是数组（可能是字符串）。

根据[mongodb $push doc](http://docs.mongodb.org/manual/reference/operator/push/)：

> 如果 $push 语句中指定的字段不是数组，则操作将失败。

将插入操作更改为：

```
$collection->insert(
   array(
      'session' => $_SESSION["redi-Shop"],
      'status' => "cart",
      'items' => array($_POST['item'])
   )); 
```

然后运行您的更新查询。

# mobiscroll - 带有 .click() 处理程序的 mobiscroll 图像列表

> ID：14687119
> 
> 赞同：1
> 
> 时间：2013-02-04T12:47:39.623
> 
> 标签：mobiscroll

当我绑定一个

```
$(document).on("click", '.dw-sel', function(e) { opens modal box }); 
```

点击时，它每次都会触发，即使有拖动也是如此。我想调用 click 函数，只有在没有任何拖动轮子的情况下点击。是否已经提供了此类活动？或者如何实现区分点击和拖动？

编辑：

好的，在 mobiscroll.core.js 中找到了解决方案 929 行

```
 if (!dist && !moved) { // this is a "tap"
        istap = true;
        tindex = Math.floor((stop - ttop) / h);
        var li = $('.dw-li', target).eq(tindex)
        li.addClass('dw-hl'); // Highlight
        setTimeout(function() {
            li.removeClass('dw-hl');
        }, 200);
    } else {
        tindex = Math.round(pos - dist / h);
        istap = false;
    } 
```

我设置了变量 istap，并以此为基础我的点击事件。

# login - 我可以在我的网站中使用什么谷歌图片来“使用谷歌登录”

> ID：14687123
> 
> 赞同：7
> 
> 时间：2013-02-04T12:48:05.240
> 
> 标签：login, oauth, permissions, graphical-logo

我正在构建一个 Web 应用程序，我需要它进行 facebook 和 google 身份验证，但我找不到有关在这种情况下使用 google 品牌形象使用政策的信息。

对于 facebook，我发现了这个：

[https://www.facebook.com/brandpermissions/logos.php](https://www.facebook.com/brandpermissions/logos.php)

但我找不到类似的谷歌品牌形象页面，我只找到了这个：

[http://www.google.com/+/business/brand-guidelines.html](http://www.google.com/+/business/brand-guidelines.html)

但他们不谈论登录。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-19T00:03:12.810

以下是登录按钮的特定按钮和品牌指南： [https ://developers.google.com/identity/branding-guidelines](https://developers.google.com/identity/branding-guidelines)

# windows-phone-8 - Windows 8 - 关闭模拟器并重新打开后，安装的应用程序丢失了吗？

> ID：14687132
> 
> 赞同：2
> 
> 时间：2013-02-04T12:48:38.770
> 
> 标签：windows-phone-8, windows-phone-8-emulator

我今天早上开始在 windows-8 上工作，我很惊讶安装的应用程序没有显示在我早上安装的模拟器中。要清楚。
1\. 我`Test1`使用 Visual Studio Express 2012创建了一个名为的新项目。
2\. 我安装在模拟器上。
3.我完全关闭模拟器。
4\. 一个小时后，我`Test2`使用 Visual Studio Express 2012 创建。

但我无法`Test1`在 windows-8 手机模拟器中找到该项目。

但是当我在 iPhone 和 android 上工作时，如果我重新创建模拟器，这些应用程序将可用。

有什么问题吗？我需要更改任何设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:55:42.370

模拟器不会将应用程序安装保存到基本映像。（这对于 WP7x 模拟器是正确的）。我不记得看到任何东西告诉我它已经改变了。

模拟器关闭 + 启动 == 全新的模拟器。只有当您更改显示语言等设置并且模拟器启动重新启动时，它才会保留您的应用程序等。

# c# - 使用linq检查记录是最后一个还是第一个

> ID：14687136
> 
> 赞同：4
> 
> 时间：2013-02-04T12:48:51.107
> 
> 标签：c#, asp.net, linq

我有一个**对象列表**。我想确定用户何时会获得**列表中的第一个或最后一个对象**，这样我就可以禁用页面上的一些按钮。

例如，我可能有一些布尔值，如果请求的对象是列表中的最后一个或第一个，那么它将返回`true`，否则返回`false`。

任何的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T13:02:17.907

如果您的对象列表确实是 a `List`，那么明确使用它可能会更好（改编了 Mehmet Ataş 的答案）：

```
static class ListExtensions
{
  public static bool IsFirst<T>(this List<T> items, T item)
  {
    if (items.Count == 0)
      return false;
    T first =  items[0];
    return item.Equals(first);
  }

  public static bool IsLast<T>(this List<T> items, T item)
  {
    if (items.Count == 0)
      return false;
    T last =  items[items.Count-1];
    return item.Equals(last);
  }
} 
```

这样您就可以消除 LINQ 开销（虽然不多，但很重要）。但是，您的代码必须使用`List<T>`它才能工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T12:53:48.043

您可以编写扩展方法，例如

```
public static class IEnumerableExtensions
{
    public static bool IsLast<T>(this IEnumerable<T> items, T item)
    {
        var last =  items.LastOrDefault();
        if (last == null)
            return false;
        return item.Equals(last); // OR Object.ReferenceEquals(last, item)
    }

    public static bool IsFirst<T>(this IEnumerable<T> items, T item)
    {
        var first =  items.FirstOrDefault();
        if (first == null)
            return false;
        return item.Equals(first);
    }

    public static bool IsFirstOrLast<T>(this IEnumerable<T> items, T item)
    {
        return items.IsFirst(item) || items.IsLast(item);
    }
 } 
```

你可以像这样使用它

```
 IEnumerable<User> users = // something
 User user = // something

 bool isFirstOrLast = users.IsFirstOrLast(user); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T12:52:11.567

```
var yourObject = yourList[0];
if(list.Count > 0)
    if(yourObject == list.First() || yourobject == list.Last())
    {
     //item is either first or last
    } 
```

**但请记住检查列表是否包含至少 1 个项目**，否则您最终会遇到[First](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.first.aspx) , [Last](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.last.aspx)的异常。

以上将比较对象的引用，您可以通过实现自定义[IComparable](http://msdn.microsoft.com/en-us/library/system.icomparable.aspx)来比较它们的值，或者您可以比较它们的值。

# c# - 如何转到 While 循环的下一个值

> ID：14687138
> 
> 赞同：0
> 
> 时间：2013-02-04T12:48:53.853
> 
> 标签：c#, winforms, visual-studio-2010

我有一个`While loop`读作 a`line`的 a `file.txt`。我还有一个名为的方法，如果返回值为 ，则`VerifyPhoto`返回`true/false`我想转到下一项。我怎么能这样做？我试过了，但它只是把所有东西都留给了......`while loop``false``break``return``form`

```
while (!reader.EndOfStream)
  {
     if(VerifyPhoto(filed.matriculation) == false)
        {
          //go to the next line of the file.txt
        }
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T12:49:54.140

您可能想熟悉其他控制语句：[继续](http://msdn.microsoft.com/en-us/library/923ahwt1%28v=vs.71%29.aspx)

[编辑] 最新版本的文档：[继续](http://msdn.microsoft.com/en-us/library/923ahwt1.aspx)，谢谢 Jeppe。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:49:57.220

`continue;`（还有一些使它成为 30 个字符）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:53:45.303

根据您的实际代码，也许您可​​以简单地反转布尔测试，因此只有在`VerifyPhoto`返回时才执行某些操作`true`：

```
while (...)
{
    if(VerifyPhoto(filed.matriculation))
    {
        // Do the job
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:54:05.887

[continue](http://msdn.microsoft.com/en-us/library/923ahwt1%28v=vs.71%29.aspx)语句将控制权传递给它出现的封闭迭代语句的下一次迭代

```
while (!reader.EndOfStream)
{
    if(VerifyPhoto(filed.matriculation) == false)
    {
        continue;
        //go to the next line of the file.txt
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T12:56:18.513

我在你这样做的方式上遗漏了什么吗？您在开始循环之前阅读了第一行吗？如果是这样，你不需要类似的东西

```
**string line;**
while (!reader.EndOfStream)
  {
     if(VerifyPhoto(filed.matriculation) == false)
        {
          //go to the next line of the file.txt
          **line = file.ReadLine();**
        }
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T12:56:19.650

如果您尝试逐行阅读，那么[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)可能会有用。

此外，您正在寻找的是[`continue`](http://msdn.microsoft.com/en-us/library/923ahwt1(v=vs.80).aspx)声明。

```
string myFile = @"c:\path\to\my\file.txt";

foreach(string line in File.ReadLines(myFile))
{
    //Do stuff
    //if(!VerifyPhoto())
    //    continue;
    //Do other logic
} 
```

# delphi - 德尔福。反转光标颜色

> ID：14687139
> 
> 赞同：4
> 
> 时间：2013-02-04T12:48:56.510
> 
> 标签：delphi, bitmap, cursor, delphi-7

我想为我的应用程序使用大的倒十字光标。但是我的代码使光标的背景反转。光标仍然是白色的。

```
var
  IconInfo: TIconInfo;
  AndMask, Bmp: TBitmap;
  w, h: Integer;
begin
  w := Screen.Width * 2;
  h := Screen.Height * 2;

  // Creation And Mask
  AndMask := TBitmap.Create;
  AndMask.Monochrome := True;
  AndMask.Height := h;
  AndMask.Width := w;

  // Draw on And Mask
  AndMask.Canvas.Brush.Color := clWhite;
  AndMask.Canvas.FillRect(AndMask.Canvas.ClipRect);

//  AndMask.Canvas.Pen.Color := clWhite;
  AndMask.Canvas.Pen.Width := 3;
  AndMask.Canvas.MoveTo(w div 2, 0);
  AndMask.Canvas.LineTo(w div 2, h);
  AndMask.Canvas.MoveTo(0, h div 2);
  AndMask.Canvas.LineTo(w, h div 2);

  {Create the "XOr" mask}
  Bmp := TBitmap.Create;
  Bmp.Width := w;
  Bmp.Height := h;
  {Draw on the "XOr" mask}
  Bmp.Canvas.Brush.Color := clWhite;
  Bmp.Canvas.FillRect(Rect(0, 0, w, h));

  IconInfo.fIcon := true;
  IconInfo.xHotspot := w div 2;
  IconInfo.yHotspot := h div 2;
  IconInfo.hbmMask := AndMask.Handle;
  IconInfo.hbmColor := Bmp.Handle;

  Screen.Cursors[1]:= CreateIconIndirect(IconInfo);
  Screen.Cursor:=1;
end; 
```

如何使背景透明和光标反转？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:28:10.540

```
procedure TForm1.Button1Click(Sender: TObject);

var
  IconInfo: TIconInfo;
  AndMask, Bmp: TBitmap;
  w, h: Integer;
begin
  w := Screen.Width * 2;
  h := Screen.Height * 2;

  // Creation And Mask
  AndMask := TBitmap.Create;
 // AndMask.Monochrome := True;
  AndMask.Height := h;
  AndMask.Width := w;

  // Draw on And Mask
  AndMask.Canvas.Brush.Color := clWhite;
  AndMask.Canvas.FillRect(AndMask.Canvas.ClipRect);

  AndMask.Canvas.Pen.Color := clwhite;
  AndMask.Canvas.Pen.Width := 3;
  AndMask.Canvas.MoveTo(w div 2, 0);
  AndMask.Canvas.LineTo(w div 2, h);
  AndMask.Canvas.MoveTo(0, h div 2);
  AndMask.Canvas.LineTo(w, h div 2);

  {Create the "XOr" mask}
  Bmp := TBitmap.Create;
  Bmp.Width := w;
  Bmp.Height := h;

  {Draw on the "XOr" mask}
  Bmp.Canvas.Brush.Color := clblack;
  Bmp.Canvas.FillRect(Rect(0, 0, w, h));
  Bmp.Canvas.Pen.Color := clwhite;
  Bmp.Canvas.Pen.Width := 3;
  Bmp.Canvas.MoveTo(w div 2, 0);
  Bmp.Canvas.LineTo(w div 2, h);
  Bmp.Canvas.MoveTo(0, h div 2);
  Bmp.Canvas.LineTo(w, h div 2);

  IconInfo.fIcon := true;
  IconInfo.xHotspot := w div 2;
  IconInfo.yHotspot := h div 2;
  IconInfo.hbmMask := AndMask.Handle;
  IconInfo.hbmColor :=  Bmp.Handle;

  Screen.Cursors[1]:= CreateIconIndirect(IconInfo);
  Screen.Cursor:=1;

end; 
```

# php - 在 php.net 上找到的数据库适配器

> ID：14687140
> 
> 赞同：1
> 
> 时间：2013-02-04T12:49:06.820
> 
> 标签：php, mysql

我在 mysql-connect 页面上的 php.net 上找到了一个 db 适配器。
这是一个浏览量很大的页面（我想）。

它包括作者声称的单例模式类。

[在http://php.net/manual/en/function.mysql-connect.php](http://php.net/manual/en/function.mysql-connect.php)上找到

作家说：

> “这是一个管理单个数据库连接的单例类。Open 方法使用常量值作为默认值，通过在每个网页顶部加载的初始化程序脚本从 ini 文件中读取。您还可以通过手动输入来覆盖默认值自己的（如果您需要在脚本中切换服务器或数据库名称）。qry 函数采用准备好的语句，并将根据第二个参数返回第一行、第一个关联行、第一个单元格或整个结果集（整个结果如果省略）。”
> 
> 用法：$DB = DB::Open();
> $result = $DB->qry(" {SQL 语句} ;");

```
<?php
    abstract class Database_Object
    {
        protected static $DB_Name;
        protected static $DB_Open;
        protected static $DB_Conn;

        protected function __construct($database, $hostname, $hostport, $username, $password)
        {
            self::$DB_Name = $database;
            self::$DB_Conn = mysql_connect($hostname . ":" . $hostport, $username, $password);
            if (!self::$DB_Conn) { die('Critical Stop Error: Database Error<br />' . mysql_error()); }
            mysql_select_db(self::$DB_Name, self::$DB_Conn);
        }

        private function __clone() {}

        public function __destruct()
        {
//            mysql_close(self::$DB_Conn);  <-- commented out due to current shared-link close 'feature'.  If left in, causes a warning that this is not a valid link resource.
        }
    }

    final class DB extends Database_Object
    {
        public static function Open($database = DB_NAME, $hostname = DB_HOST, $hostport = DB_PORT, $username = DB_USER,$password = DB_PASS)
        {
            if (!self::$DB_Open)
            {
                self::$DB_Open = new self($database, $hostname, $hostport, $username, $password);
            }
            else
            {
                self::$DB_Open = null;
                self::$DB_Open = new self($database, $hostname, $hostport, $username, $password);
            }
            return self::$DB_Open;
        }

        public function qry($sql, $return_format = 0)
        {
            $query = mysql_query($sql, self::$DB_Conn) OR die(mysql_error());
            switch ($return_format)
            {
                case 1:
                    $query = mysql_fetch_row($query);
                    return $query;
                    break;
                case 2:
                    $query = mysql_fetch_array($query);
                    return $query;
                    break;
                case 3:
                    $query = mysql_fetch_row($query);
                    $query = $query[0];
                    return $query;
                default:
                    return $query;
            }
        }
    }
?> 
```

看了代码我有一个疑问，这真的是单例吗（见 DB 类和 Open 函数）？

静态属性如何使单例模式起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:50:39.140

我明白你的意思，如果`self::$DB_Open`确实存在，它将它设置为 null 并创建对象的新实例。

看来你是对的，这似乎不像单例模式。

关于具有静态属性的单例模式。与**对象范围内**的实例变量不同，静态变量在**类范围内**。
这意味着即使您多次创建一个对象，它每次仍将使用相同的静态属性值。这就是让它们非常适合计数器和全局单例的原因。

见下文：

```
Class A {
static int y=1;
int x=3;
}
$newA = new A();
$newB = new A();
$newC = new A(); 
```

以上创建了 x 的 3 个实例。您可以在 1 个实例中进行更改，它只会在该 1 个实例中进行更改。
但是只创建了 1 个 y 实例。所以 1 的变化和所有 3 的变化都会改变。它们都存在于相同的上下文中。因此指向相同的值。如果您增加一个，其他人将显示相同的增量等。

所以要重新迭代，即使只存在一个实例，`DB_Conn`它也会不断地重置它并再次写入它（它不必像这样行事）。

为了解决这个问题，作者可以返回该`self::$DB_Open`属性（如果它确实存在）。

# c - 将 int 放入 int 指针会在 C 中产生运行时错误。

> ID：14687145
> 
> 赞同：0
> 
> 时间：2013-02-04T12:49:19.410
> 
> 标签：c, pointers

以下[代码](http://ideone.com/5Zu8Zm)在 ideone 中运行良好，但在 codeblocks IDE 中出现运行时错误。我的 IDE 是否损坏或是否存在任何特定于编程语言的问题。

```
#include<stdio.h>

int main(){
    int *pointer;
    int num = 45;
    *pointer = num;
    printf("pointer points to value %d", *pointer);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T12:50:26.450

替换这个

```
*pointer = num; 
```

经过

```
pointer = &num; 
```

在为其赋值之前，您的指针应该指向一个内存空间。

当您以这种方式定义指针时：

```
int *pointer; 
```

这意味着您已经定义了指针，但指针尚未指向内存空间。如果您直接使用指针而不将其指向内存空间（就像您在代码中所做的那样），那么您将获得**未定义的行为**。

将指针指向内存空间可以通过以下方式之一完成：

1) 指向一个静态内存

```
int num;
int *pointer = &num; 
```

num 是一个定义为静态的 int。所以指针可以指向num内存

2）指向动态内存

```
int *pointer = malloc(sizeof(int)); 
```

指针可以指向动态内存。可以分配动态内存`malloc()`，当内存变得无用时，我们可以释放内存`free(pointer)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:50:48.767

将 num 的地址分配给指针，因为指针应该保存地址而不是值。[您可以在此处](http://www.cplusplus.com/doc/tutorial/pointers/)阅读有关指针的更多信息

```
pointer = &num; 
```

通过指针改变变量的值

```
*pointer = 11; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T14:43:01.147

首先，您已经通过“int *pointer”定义了一个指针。

然后，尝试使用“*pointer = num”来实现间接访问——将num的值赋给指针“pointer”所指向的内存空间。

好的，问题来了！从你的代码中，你只定义了一个指针，但你没有让它指向一个内存空间。不这样做就进行间接访问是非常危险的。因此，您会看到运行时错误。

现在，您应该添加“int value;pointer = &value;” 到你的代码。它将使指针“指针”指向“值”。您可以通过间接访问“*pointer = num”将“num”分配给“value”。

在我看来，学习指针的时候应该区分定义和间接访问。

我是一个英语很差的人。这是我在堆栈溢出中的第一个答案。希望我的回答可以帮助到你。谢谢你。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-04T12:53:35.140

首先你应该初始化它试图指向的指针，然后用它来修改指向的值..as...

```
pointer=&num; 
```

现在使用指针来改变或访问它所指向的值。

# coding-style - 编码风格。短函数与内联代码

> ID：14687153
> 
> 赞同：0
> 
> 时间：2013-02-04T12:49:33.340
> 
> 标签：coding-style

对于使用短函数与使用内联代码，您如何看待其他程序员？

功能示例：

```
//Check if all keys from $keys exist in $array
function functionName(array $array, array $keys) {
    return array_diff($keys, array_keys($array));
}

functionName($mas,$keys); 
```

与仅使用代码相比：

```
array_diff($keys, array_keys($mas)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:52:19.500

我认为在你的例子中，这是多余的。没有充分理由无需创建额外的函数调用并将字节添加到文件大小。

此外，内联`array_diff($keys, array_keys($mas));`对于其他程序员来说更容易调试，而不是通过查看您的代码来准确找出`functionName()`它的作用和位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:24:45.080

It depends on what `functionName` actually is.

If you're using `customerDetailsAreValid` throughout your code and you suddenly have to add validation of `$array['email']`, you're going to be grateful for the separation of intent and implementation.

If on the other hand you're wrapping `array_diff` in the function `diffArray` there isn't much point.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T19:42:30.387

我认为在编写您希望在任何时间都存在的逻辑时，清晰度是首要考虑的问题。

一般来说，我讨厌内联函数。我认为他们很懒惰，提倡意大利面条式的代码，并且总体上表现出开发人员完全不关心样式/可读性/清晰度。

文件大小 - 我发现这个论点非常武断。js文件传输一次，然后cahced。在许多情况下，您会发现描述性名称等（希望是注释）都会增加文件大小。如果大小非常重要，请使用文件最小化器，使文件尽可能小。

寻找功能？尝试弄清楚在大量 docReady 中到底发生了什么怎么样。CTL-F 通常调用查找工具。

我承认可能存在一些简单的情况，即内联函数对代码的可读性几乎没有影响。但是，内联方法永远不会比引用和实现的交替分离更清晰。

我的两分钱

# https - Axis2：尚未检测到传输 https 的端口号

> ID：14687161
> 
> 赞同：0
> 
> 时间：2013-02-04T12:50:04.693
> 
> 标签：https, port, axis2

此错误出现在我服务器的日志中。堆栈跟踪是：

[警告] 尚未检测到传输 https 的端口号 org.apache.axis2.AxisFault：在 org.apache.axis2.transport.http.AxisServletListener.getEPRsForService(AxisServletListener.java: 94) 在 org.apache.axis2.description.AxisEndpoint.calculateEndpointURL(AxisEndpoint.java:198) 在 org.apache.axis2.description.AxisEndpoint.calculateEndpointURL(AxisEndpoint.java:175) 在 org.apache.axis2.description.AxisEndpoint .getEndpointURL(AxisEndpoint.java:63) 在 org.apache.axis2.description.AxisService2WSDL11.getEndpointURL(AxisService2WSDL11.java:1264) 在 org.apache.axis2.description.AxisService2WSDL11.generateHttpPort(AxisService2WSDL11.java:738) 在 org. org.apache.axis2 中的 apache.axis2.description.AxisService2WSDL11.generateService(AxisService2WSDL11.java:487)。description.AxisService2WSDL11.generateOM(AxisService2WSDL11.java:233) 在 org.apache.axis2.dataretrieval.WSDLDataLocator.outputInlineForm(WSDLDataLocator.java:131) 在 org.apache.axis2.dataretrieval.WSDLDataLocator.getData(WSDLDataLocator.java:73)在 org.apache.axis2.dataretrieval.AxisDataLocatorImpl.getData(AxisDataLocatorImpl.java:81) 在 org.apache.axis2.description.AxisService.getData(AxisService.java:2964) 在 org.apache.axis2.description.AxisService.getWSDL (AxisService.java:1645) 在 org.apache.axis2.description.AxisService.printWSDL(AxisService.java:1413) 在 org.apache.axis2.transport.http.ListingAgent.handleWSDLRequest(ListingAgent.java:327) 在 org. apache.axis2.transport.http.ListingAgent.processListService(ListingAgent.java:183) 在 org.apache.axis2.transport.http.AxisServlet.doGet(AxisServlet.java:260) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:621) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 在 org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain .java:305) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225) 在 org.apache.catalina 的 org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)。 core.StandardContextValve.invoke(StandardContextValve.java:123) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) 在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) at org.apache.coyote.http11 .AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java :312) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(线程.java:662)org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579) org.apache.coyote.AbstractProtocol 的服务（CoyoteAdapter.java:407） .tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579) org.apache.coyote.AbstractProtocol 的服务（CoyoteAdapter.java:407） .tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread.java:662)312) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread .java:662)312) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) 在 java.lang.Thread.run(Thread .java:662)

在服务器上 https 未设置，但显然所有请求都在 http 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:35:26.413

此错误的原因在以下文档中进行了说明：

[http://axis.apache.org/axis2/java/core/docs/servlet-transport.html](http://axis.apache.org/axis2/java/core/docs/servlet-transport.html)

# javascript - javascript中的setInterval基于所做的更改

> ID：14687163
> 
> 赞同：0
> 
> 时间：2013-02-04T12:50:08.377
> 
> 标签：javascript, jquery, ajax

我遇到了 javascript 要求的问题。我有一个 html 使用 setInterval 每 1500 毫秒永久调用一次脚本。

```
 var t = setInterval(loadData(),1500); 
```

loadData 函数调用一个脚本，该脚本将 JSON 作为列表返回，我想要做的是从固定间隔更改为可变间隔。例如，如果两次调用脚本之间没有更改，我必须为间隔设置另一个值。听说可以用jquery linq比较开头的列表长度和刷新时的列表长度来改变时间值。我还听说我可以将 count 的值保存在 cookie 中以便始终进行比较。

请问有什么想法吗？我将感激不尽。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:51:56.717

我猜你正在尝试做：

```
var speed = 1500,
    t = setInterval(loadData, speed);

function loadData() {
    if (something == true) {
        something = false;
        speed = 3000;
        clearInterval(t);
        t = setInterval(loadData, speed);
    }else{
        //do something
    }
} 
```

您应该只引用该函数，添加括号会立即运行该函数。当使用速度变量时，您需要清除并再次运行间隔函数以更改速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:57:38.900

如果间隔是可变的，那么您不能使用 setInterval，第一次调用后不会更改哪个时间段。您可以使用 setTimeout 更改时间段：

```
var period=1500
var timer;
var callback = function() {
    loadData();
    timer = setTimeout( callback, period )
};

var changePeriod = function( newPeriod ) {
    period = newPeriod;
}

//first call
callback(); 
```

现在，您只需要调用 changePeriod( ms ) 来更改之后的时间段

# java - 自定义协议上的 Java 句柄链接

> ID：14687167
> 
> 赞同：0
> 
> 时间：2013-02-04T12:50:18.627
> 
> 标签：java, protocols

我的 Java(Swing) 应用程序中需要进程链接。例如，用户单击 myproc://test=1&name=name 之类的链接，我的 Java 应用程序必须使用此链接。我的意思是，当用户单击磁力链接时，我需要行为，例如 uTorrent。是否存在正确的方法来做到这一点？我的意思是我的应用程序如何处理外部系统事件，例如在我的协议链接上单击浏览器中的链接。

已解决（解决方法）。我没有找到如何将工作的 java 应用程序注册为 portocol 处理程序。我这样做： - java 应用程序包含小型 http-server 并监听一些端口 - 在我的网站上，我添加到 localhost:port 的链接

这很丑陋，但有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:59:52.427

是的，这是可能的。它被称为协议处理程序。网上有很多教程可以指导您正确实施它。这是一个[很好的](http://doc.sumy.ua/prog/java/exp/ch12_04.htm)。

简而言之，您需要将 a`URLStreamHandler`和`URLConnection`子类放在一起来处理您的协议。然后使用（通常通过）将其注册到 JVM，`java.protocol.handler.pkgs`以便它可以识别它。这听起来令人生畏，但它相当简单。

# javascript - 有哪些流行的网络媒体播放器？此外，它们是否能够支持 .mpeg 或 .avi 文件？

> ID：14687168
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:50:19.383
> 
> 标签：javascript, html, media-player

我正在寻找一个媒体播放器来实现我的网站。今天有哪些流行的选择？我需要媒体播放器来播放视频，特别是 .mpeg、.mpeg4 或 .avi。

这可能吗，还是我必须将 .avi/.mpeg 转换为 .wma （我找到了 Yahoo 网络媒体播放器，除了我必须转换所有视频文件之外，它似乎还不错）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:05:13.190

[http://diveintohtml5.info/video.html](http://diveintohtml5.info/video.html) 这里是一个链接，告诉你所有关于网站和浏览器兼容性的视频格式

# git - git + go - 如何使用 go get 处理子项目

> ID：14687176
> 
> 赞同：6
> 
> 时间：2013-02-04T12:51:08.850
> 
> 标签：git, go, git-submodules

我为我的软件使用版本控制系统`git`。而“在”源代码中，我`go get`用来自动从 github 获取软件。我该如何处理“双重混帐”的情况？

当我`git add`在目录上运行时`src/github.com/somename/someproject`，它本身就是一个 git 存储库，这会添加什么吗？（当我跑步时它看起来不像这样`git status`）

我应该使用`git submodule`添加的`git get`子目录吗？

在这种情况下，最佳做法是什么？

* * *

编辑：我的`$GOPATH`软件项目确实有一个自定义环境。这就是为什么`src/github.com/somename/someproject`在我的软件目录层次结构中找到该目录的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T10:26:52.530

虽然@nemo 的答案可能是要走的路，但这就是我所做的：我从下载的存储库中删除了`.git`and`.gitignore`文件。`go get`我拥有的源路径在我的源目录中：`GOPATH=.../myproject/src/go/`. 这样所有`go get`下载都在我的项目树中，我可以用 git 处理它。

我认为这是“政府”（见我对我的问题的评论）应该做的，但我无法让它发挥作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:18:24.077

如果你想存储你使用的外部包的修订版本，最好 go import remote 语法支持类似的东西`github.com/user/project/sub/directory/revision`，不幸的是它不支持。在 golang-nuts 邮件列表上有一个关于这个主题的讨论，查看它以获取可能的解决方案和警告[。](https://groups.google.com/forum/?fromgroups=#!topic/golang-nuts/0avuiWURSQk)

最简单的方法可能是分叉您使用的项目并导入您的分叉，这样您就可以完全控制更新。像 github 这样的平台让这样做变得非常容易。

来自`go help remote`：

> 新下载的包被写入 GOPATH 环境变量中列出的第一个目录（参见“go help gopath”）。

因此，您提出的子模块解决方案是可能的，但并不容易使用，因为您必须在获取时指定自定义 GOPATH。我建议分叉图书馆并引用叉子。

# python - 将这个简单的块转换为惯用的 Python 代码

> ID：14687180
> 
> 赞同：1
> 
> 时间：2013-02-04T12:51:18.103
> 
> 标签：python, list, python-2.7, idioms

```
def run(first, second):
    sum=[]
    for i in range(len(first)):
        third.append(second[i]+first[i])
    return sum

print run([1,2,3],[10,20,30]) 
```

该代码工作正常，并打印出一个包含三个元素的列表，其中每个元素是“第二”和“第一”中相同索引的两个元素的总和，特别是`[11, 22, 33]`. 有没有更直接的方法来返回相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:52:02.943

当然，使用[`zip()`内置函数](http://docs.python.org/2/library/functions.html#zip)和[列表推导](http://docs.python.org/2/reference/expressions.html#list-displays)：

```
def run(first, second):
    return [a + b for a, b in zip(first, second)] 
```

演示：

```
>>> def run(first, second):
...     return [a + b for a, b in zip(first, second)]
... 
>>> print run([1,2,3],[10,20,30])
[11, 22, 33] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:00:05.877

并且只是指出另一种方式，它绕过 zip，但确实引入了地图......（有些人发现可读性较差或不喜欢......）

```
from operator import add
third = map(add, first, second) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T12:59:05.770

您可以使用内置函数[map](http://docs.python.org/2/library/functions.html#map)、[sum](http://docs.python.org/2/library/functions.html#sum)和[zip](http://docs.python.org/2/library/functions.html#zip)：

```
>>> map(sum, zip([1, 2, 3], [10, 20,30]))
[11, 22, 33] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:01:11.480

Martijn 发布的最简单的选项：

```
def run(a, b):
    return [x + y for x, y in zip(a, b)] 
```

一种可能的改进是使其适用于任意数量的列表，而不仅仅是两个：

```
def run(*args):
    return [sum(p) for p in zip(*args)] 
```

另一个概括是允许其他运算符：

```
def run(func, *args):
    return map(func, *args) 
```

然后，例如：

```
import operator

print run(operator.add, [1,2,3],[10,20,30])  # [11, 22, 33]
print run(operator.sub, [1,2,3],[10,20,30])  # [-9, -18, -27] 
```

请注意，在所有三种情况下，`run`都不需要单独的函数，可以简单地用内置调用替换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T13:09:07.013

另一种方法是使用`map`- 尽管注意处理不同列表长度之间的差异`zip`以及`map`处理不同列表长度时的差异很有趣。

我认为在大多数情况下@Marijn Pieters`zip`解决方案会做你想要的，因为`zip`它在处理列表时更加可爱和柔软。

```
In [414]: first = [1,2,3]
In [415]: second = [10,20,30]
In [416]: [a + b for a, b in zip(first, second)]
Out[416]: [11, 22, 33]

In [417]: import operator
In [418]: map(operator.add, first, second)
Out[418]: [11, 22, 33]

In [419]: second = [10,20,30,40]
In [420]: [a + b for a, b in zip(first, second)]
Out[420]: [11, 22, 33]

In [421]: map(operator.add, first, second)
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-421-dd15f26f1e89> in <module>()
----> 1 map(operator.add, first, second)

TypeError: unsupported operand type(s) for +: 'NoneType' and 'int'

In [422]: map(None, first, second)
Out[422]: [(1, 10), (2, 20), (3, 30), (None, 40)] 
```

# java - 没有从服务器返回到客户端

> ID：14687182
> 
> 赞同：0
> 
> 时间：2013-02-04T12:51:26.330
> 
> 标签：java, sockets, networking

我正在尝试制作一个简单的服务器/客户端应用程序来使用套接字。我可以成功地获得服务器和客户端之间的单线通信，例如客户端向服务器发送消息，服务器确认并发送回单条消息。

问题是，当 BufferedReader 中有多行时，我尝试将来自服务器的传入回复读回客户端。

例子...

服务器和客户端互相提供一条线路。

```
import java.io.*;
import java.net.*;
import java.awt.*;

class Server {
public static void main(String args[])throws IOException
{
    Server myServ = new Server();
    myServ.run();
}//end main
public void run() throws IOException
{
ServerSocket serSKT = new ServerSocket(729);
Socket socket = serSKT.accept();

BufferedReader BR = new BufferedReader(new InputStreamReader(socket.getInputStream()));
PrintWriter PW = new PrintWriter(socket.getOutputStream());

String fromClient = BR.readLine();
System.out.println(fromClient);

if(fromClient !=null)
{PW.println("Server giving response to client");PW.flush();}
}}//end class server 
```

客户：

```
import java.io.*;
import java.net.*;

class Client
{
public static void main(String args[])throws IOException
{
Client myCli = new Client();
myCli.run();
}
public void run() throws IOException
{
int port = 729;

Socket mySkt = new Socket("localhost",port);

PrintWriter myPW = new PrintWriter(mySkt.getOutputStream(),true);

BufferedReader myBR = new BufferedReader(new InputStreamReader(mySkt.getInputStream()));

myPW.println("Message from client to server");

String temp=myBR.readLine();
System.out.println(temp);
}} 
```

所以上面的工作正常..现在当我尝试使用 for 循环将 10 行文本打印到服务器，然后从服务器打印 10 行到客户端时，我遇到了问题。例如..这是服务器和客户端..

```
import java.io.*;
import java.net.*;
import java.awt.*;

class Server {
public static void main(String args[])throws IOException
{
    Server myServ = new Server();
    myServ.run();
}//end main
public void run() throws IOException
{
ServerSocket serSKT = new ServerSocket(729);
Socket socket = serSKT.accept();

BufferedReader BR = new BufferedReader(new InputStreamReader(socket.getInputStream()));
PrintWriter PW = new PrintWriter(socket.getOutputStream());
String fromClient = null;
while((fromClient = BR.readLine())!=null)
{
System.out.println(fromClient);//this is being printed successfully
}

if(fromClient !=null)
{
for(int i=0;i<10;i++){
PW.println("Server giving response to client"+i);}
PW.flush();}
}}//end class server 
```

客户：

```
import java.io.*;
import java.net.*;

class Client
{
public static void main(String args[])throws IOException
{
Client myCli = new Client();
myCli.run();
}
public void run() throws IOException
{
int port = 729;

Socket mySkt = new Socket("localhost",port);

PrintWriter myPW = new PrintWriter(mySkt.getOutputStream(),true);

BufferedReader myBR = new BufferedReader(new InputStreamReader(mySkt.getInputStream()));

for(int i =0;i<10;i++)
myPW.println("Message from client to server"+i);

String temp=null;
while((temp=myBR.readLine())!=null){
System.out.println(temp);}
}} 
```

以上将向服务器打印消息 10 次，服务器将显示客户端发送成功的内容：

```
while((fromClient = BR.readLine())!=null)
{
 System.out.println(fromClient);//this is being printed successfully
} 
```

我不明白的是为什么客户端不会收到“服务器响应客户端”消息并将其打印到控制台：

```
String temp=null;
while((temp=myBR.readLine())!=null){
 System.out.println(temp);} //should be printing "Server giving repsonse to client" 
```

对不起，它很长，谢谢，但我正在尝试没有成功！

***********编辑****** ******

 **万一其他人遇到这个问题，可以通过在客户端类中向 printwriter 打印一个命令来解决这个问题，以允许服务器知道它已经完成。例如：

```
for(int i =0;i<10;i++){
myPW.println("Message from client to server"+i);}
myPW.println("Finished"); 
```

现在在服务器类中，应该检查发送给它的文本是否有“Finished”命令，如果是这样，打破while循环并开始发送回客户端，我相信BufferedReader为null的唯一方法是如果它是封闭的，所以它是无限循环的。感谢大家的帮助。

```
while((fromClient = BR.readLine())!=null)
{
if(fromClient.equals("Finished"))
{
break;
}
System.out.println(fromClient);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:03:40.393

看起来您永远不会退出服务器中的 while() 循环，在第 10 行之后，服务器等待另一行（以及另一行，以及另一行，等等）。客户端必须通知服务器他已完成发送，例如通过发送一条专用线路。然后您应该退出服务器上的 while 循环并开始发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:06:12.073

我认为问题在于：

```
while((fromClient = BR.readLine())!=null)
{
System.out.println(fromClient);//this is being printed successfully
} 
```

`BR.readLine()``null`在流结束（例如关闭/断开连接）之前不会返回。您不应该将其用作您的中断条件，它会在内部等待`readLine()`更多数据出现在流中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:14:13.070

您正在等待客户端关闭流，即`br.readLine() == null`在发送任何内容之前。发生这种情况`fromClient`后将为空，在这种情况下你什么也不发送

我建议你试试

```
for (String s; (s = BR.readLine())!=null;) {
    System.out.println(s);
    PW.println("Server response to " + s);
} 
```**

# php - 将大文件加载到数据库中

> ID：14687185
> 
> 赞同：0
> 
> 时间：2013-02-04T12:51:33.603
> 
> 标签：php, postgresql, data-migration

我有一个大文件，大约`11 Mb`. 这是一个 CSV 文件，我需要将该文件的内容加载到 Postgres 数据库中。

我使用 PHP 脚本来完成这项工作，但总是在某个时刻停止。

我为 PHP 内存和其他东西放了大容量，我可以加载更多数据，但不是所有数据。

我该如何解决？我需要清理任何高速缓存吗？在 PHP 中管理大文件的一些秘密？

提前致谢。

**更新：添加一些代码**

```
$handler = fopen($fileName, "r");
$dbHandler = pg_connect($databaseConfig);

while (($line = $handler->fgetcsv(";")) !== false) {
    // Algorithms to transform data

    // Adding sql sentences in a variable

    // I am using a "batch" idea that execute all sql formed after 5000 read lines
    // When I reach 5000 read lines, execute my sql
    $results = pg_query($dbHandler, $sql);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:57:45.150

如果您可以直接访问服务器（并且您不使用某些颠覆软件），postgre 有一个更好的选择，它在资源方面的要求要低得多。请记住，php 是一种缓慢且消耗资源的语言

```
COPY my_table_name FROM '/home/myfile.csv' DELIMITERS ',' CSV 
```

# jsf-2 - Primefaces BarChart XAXIS 刻度标签在旋转后更改

> ID：14687190
> 
> 赞同：0
> 
> 时间：2013-02-04T12:51:55.667
> 
> 标签：jsf-2, primefaces, rotation, jqplot, bar-chart

我正在使用 primefaces 3.5RC1 并想旋转条形图的刻度标签。我编写了下面的代码，并旋转刻度标签。但是，刻度标签变成了数字。刻度标签应该是像“No Family”或任何其他类似的字符串名称。我该如何解决这个问题？

```
function barChartExtender(){
      this.cfg.axes= {
                   xaxis: {
                             tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                             tickOptions: {
                                       angle: 60
                                  }
                          }
                   };
} 
```

旋转后的标签 ![带数字的标签](../Images/3e020eaf62fb3f532590b4e4f00f8bab.png)

旋转前的标签 ![标签意味着](../Images/a8b595f68c1cab07c35498f474e455db.png)

请帮助...谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T09:17:28.673

您不需要设置 `tickRenderer: $.jqplot.CanvasAxisTickRenderer`或任何扩展器进行旋转。

对于 5.0 之前的 PrimeFaces 版本，请在组件上使用**xaxisAngle**属性，例如；

`xaxisAngle="-50"`像：

```
<p:barChart id="basic" value="#{chartBean.categoryModel}" xaxisAngle="60" 
      title="Basic Bar Chart" min="0" max="200" style="height:300px"/> 
```

对于较新的版本，请参阅：

*   [Primefaces 5 旋转轴刻度标签](https://stackoverflow.com/questions/28835755/primefaces-5-rotated-axis-tick-labels)

# php - 我不能在 Twig_Extension 类中将内部函数与 Twig_SimpleFilter 一起使用

> ID：14687191
> 
> 赞同：6
> 
> 时间：2013-02-04T12:51:56.240
> 
> 标签：php, symfony, twig

我有一个基于 twig 的 Symfony 2 项目。由于 Symfony 2 的性质，使用了命名空间。因此，我无法在命名空间之外提供全局函数。

这是我的 Twig 扩展**类**：

```
<?php
namespace Web\MailBundle\Twig;

use Twig_Extension, Twig_SimpleFilter;

class Twig extends Twig_Extension
{
    public function getName()
    {
        return 'twig_extension';
    }

    public function getFilters() {
        return array(
            'shortKey'  => new Twig_SimpleFilter('shortKey', 'myCustomFilterFunction')
        );
    }

    public function myCustomFilterFunction() {
        //code here...
    } 
```

**结果**： `FatalErrorException: Error: Call to undefined function myCustomFilterFunction()`

**为什么**：因为，Twig 试图找到这个函数，但它在一个类中。如果这次我将它移到课外，我将面临命名空间。因为它是命名空间的。

**研究**：我挖掘代码。树枝做同样的事情。他们在课堂之外编写过滤器和函数。但由于命名空间，我不能这样做。如果可能的话，我想通过使用适当的解决方案来做到这一点。如果失败；我将提供最新的解决方案，即创建另一个没有命名空间的 php 文件并将其包含到项目中......

--

我怎样才能克服它？Twig Filter 已被弃用，我们必须使用 SimpleFilter 方法。但我只是无法完成它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T12:58:48.380

您可以将基于数组的可调用对象作为第二个参数传递给`Twig_SimpleFilter`构造函数 - 在您的情况下，使用如下数组：

```
public function getFilters() {
    return array(
        'shortKey'  => new Twig_SimpleFilter('shortKey', array($this, 'myCustomFilterFunction'))
    );
} 
```

使用过滤器时，它将使用您的对象的方法。

[请参阅Twig 文档](http://twig.sensiolabs.org/doc/advanced.html#filters)中的示例。

# c++ - 丢弃4个精度点？

> ID：14687197
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:52:12.877
> 
> 标签：c++, floating-point, floating-point-precision

我有一个浮点数，但我只想要这个数字直到 2 点精度。我如何在 C++ 中得到这个？

```
float foo(float num) { // num=1234.567891
    // code
    return num2;           // returns 1234.560000
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:55:42.760

一个简单的方法是：

```
float foo(float num) {
    return floor(num * 100) / 100;
} 
```

您还可以考虑：

```
float foo(float num) {
    return (int)(num * 100) / 100.0f;
} 
```

负数可能存在差异。我可以从您的问题中获得的唯一信息是您想要的正数`floor`（而不是`round`例如）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:17:55.613

您可以尝试通过乘法和舍入/截断将浮点数舍入到一定的小数位。

所以`num = floor(num * 100.f) / 100.f;`会尝试截断到小数点后两位。

但是请注意，这与固定浮点数的*精度*不同。根据定义，浮点数中的小数点*floats*。而且你只有大约 7 位数的精度。

所以你的原始数字不能像“1234.567891”那样精确——这对于浮点数来说太精确了。

也许更重要的是，您从此类函数中获得的输出也可能不准确。“1234.56”不能用浮点数精确表示，所以返回值不会是“1234.560000”。

数字的整数部分越大，小数点后可以表示的位数越少。事实上，即使是一个中等大的数字也根本不能代表任何小数部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:51:00.393

浮点类型有自己的内部精度。你不能改变它。您可以通过各种方式调整值，但最终浮点类型管理它们自己的精度，并且您无法成功限制它们的功能。即使您设法将一堆零强制到某个值的低位，后续计算仍将使用完整精度，并且您只是在计算中引入了一些随机噪声。

您**可以做的是控制****输入**和**输出**的有效位数。这几乎总是管理精度的正确方法。

# java - 找不到函数 JNA + SiUSBXp

> ID：14687202
> 
> 赞同：0
> 
> 时间：2013-02-04T12:52:23.347
> 
> 标签：java, jna

我正在尝试将 JNA 与来自 SiLabs 的 USBXPRESS 库（siusbxp.dll）一起使用，虽然基本功能工作正常，但 SI_GetDeviceProductString 函数存在问题。

```
public class usbxpress 
{

public interface SiUSBXp extends StdCallLibrary 
{
SiUSBXp INSTANCE = (SiUSBXp) Native.loadLibrary("SiUSBXp", SiUSBXp.class);

byte SI_GetNumDevices (IntByReference lpdwNumDevices);
byte SI_GetProductString( int dwDeviceNum, byte[] lpvDeviceString, int dwFlags);
byte SI_Open (int dwDevice, HANDLEByReference cyHandle);
byte SI_GetPartNumber (HANDLE cyHandle, ByteByReference lpbPartNum);        
byte SI_GetDeviceProductString (HANDLE cyHandle, PointerByReference lpProduct, ByteByReference lpbLength, int bConvertToASCII);
//byte SI_GetDeviceProductString (HANDLE cyHandle, LPVOID lpProduct, LPBYTE lpbLength, BOOL bConvertToASCII = TRUE); //original c function
}

public static void main(String[] args) 
{
//checking number of connected devices  
IntByReference lpdwNumDevices = new IntByReference();
SiUSBXp.INSTANCE.SI_GetNumDevices (lpdwNumDevices);        
System.out.println(lpdwNumDevices.getValue());

//opening the device
HANDLEByReference dev_handle_ref = new HANDLEByReference();
byte status = SiUSBXp.INSTANCE.SI_Open(0, dev_handle_ref);
System.out.printf("Status %d\n", status);

HANDLE device_handle = dev_handle_ref.getValue();

//checking part number
ByteByReference lpbPartNum = new ByteByReference();
SiUSBXp.INSTANCE.SI_GetPartNumber(device_handle, lpbPartNum);
System.out.printf("Part number is CP210%d\n", lpbPartNum.getValue());      

//checking product string - does not work
PointerByReference lpProduct = new PointerByReference();
ByteByReference lpbLength = new ByteByReference();
SiUSBXp.INSTANCE.SI_GetDeviceProductString(device_handle, lpProduct, lpbLength, 1);
}} 
```

当我尝试运行它时，出现以下错误：

```
> Exception in thread "main" java.lang.UnsatisfiedLinkError: Error looking up function 'SI_GetDeviceProductString': at com.sun.jna.Function.<init>(Function.java:179) 
at com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:391) 
at com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:371) 
at com.sun.jna.Library$Handler.invoke(Library.java:205) 
at $Proxy0.SI_GetDeviceProductString(Unknown Source) 
```

感觉就像是 C 函数的默认参数的问题。我尝试使用 int 作为参数并尝试省略它，但这些都没有帮助。我什至没有达到 SI_Write (HANDLE cyHandle, LPVOID lpBuffer, DWORD dwBytesToWrite, LPDWORD lpdwBytesWritten, OVERLAPPED* o = NULL); 函数，这有望导致更多问题:)

谁能建议我如何处理 JNA 中的默认函数参数？

更新： SI_Write 函数以这种方式工作正常：

```
byte SI_Write (HANDLE cyHandle, PointerByReference lpBuffer, int dwBytesToWrite, IntByReference lpdwBytesWritten, Pointer o);
...
SiUSBXp.INSTANCE.SI_Write (device_handle, lpBuffer, message.length, lpdwBytesWritten, null); 
```

所以问题是由其他原因引起的，但它仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:49:28.367

我已经设法通过使用旧版本的 SiUSBXp 库解决了这个问题，该库是在互联网上找到的。从 SiLabs 网站下载的较新版本表现得很奇怪 - 有时 SI_GetDeviceProductString 函数在 Dependency Walker 中可见，有时则不可见，而较旧的版本很好。

# php - 如何使用 onchange 返回 URL 并提交表单

> ID：14687203
> 
> 赞同：0
> 
> 时间：2013-02-04T12:52:24.893
> 
> 标签：php, javascript, html

首先，网站上可能有类似的问题得到解答，但在仔细考虑了哪些解决方案和问题后，我仍然不知道该怎么做。

我希望返回一个 URL 并将我的用户发布到从选择列表中选择的 URL 的页面。

目前它使用以下代码使用普通提交按钮工作；

```
<form id="formurl" name="formurl" method="post" action="" onSubmit="return getURL(this.url.value)">
            <!-- begin postcode list -->
            <select size="1" name="url" id="posctode_srch" onchange="this.form.submit()">
              <option value="e1-office-space/">E1</option>
              <option value="e7-office-space/">E7</option>
              <option value="e10-office-space/">E10</option>
              <option value="e11-office-space/">E11</option>
              <option value="e14-office-space/">E14</option>
              <option value="e15-office-space/">E15</option>
              <option value="e16-office-space/">E16</option>
              <option value="e17-office-space/">E17</option>
              <option value="ec1-office-space/">EC1</option>
              <option value="ec2-office-space/">EC2</option>
              <option value="ec3-office-space/">EC3</option>
              <option value="ec4-office-space/">EC4</option>
            </select>

            <input type="image" src="images/graphics/new/btn_go.png" class="go_btn" width="119" border="0" value="submit" onclick="_gaq.push(['_trackEvent', 'Contact', 'AreaSearchForm',,, false]);" alt="Area search submit" />

          </form> 
```

我正在寻找使用 post 但我正在使用 get 对其进行测试，以查看在选择选项时会创建什么结果。当表单设置为让我看到`?url=e7-office-space%2F`时，我可以安全地假设它在某种程度上工作，但是输出缺少一些东西来获取选项的值，仅此而已？

作为这种东西的新手，我猜这是一个 php / html 问题，因为功能在那里，它只是某个地方被滥用的元素，所以如果有人能帮我看看我哪里出错了，我真的很感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:59:02.193

你有三样东西——

1.  设置网址
2.  设置谷歌的东西
3.  如果不在提交事件中，则提交表单

在下面的代码中，如果您只能依赖 javascript，则可以省略图像

## [演示](http://jsfiddle.net/mplungjan/MHw4A/)

```
window.onload=function() {
  document.getElementById("formurl").onsubmit=function() {
      var val = this.url.value;
      if (val=="") {
         alert("Please select a value");
         return false; 
      }
      this.action="http://bing.com/search?q="+val;
      _gaq.push(['_trackEvent', 'Contact', 'AreaSearchForm',,, false]);
  }
  document.getElementById("posctode_srch").onchange=function() {
    var val = this.value;
    if (val=="") return;
    this.form.onsubmit(); // not 100% sure but this should not trigger twice
    this.form.submit();   // since this is not triggering onsubmit
  }
} 
```

使用

```
<form id="formurl" name="formurl" method="post" action="">
             <!-- begin postcode list -->
            <select size="1" name="url" id="posctode_srch">
              <option value="">Please select</option>
              <option value="e1-office-space/">E1</option>
              <option value="e7-office-space/">E7</option>
              <option value="e10-office-space/">E10</option>
              <option value="e11-office-space/">E11</option>
              <option value="e14-office-space/">E14</option>
              <option value="e15-office-space/">E15</option>
              <option value="e16-office-space/">E16</option>
              <option value="e17-office-space/">E17</option>
              <option value="ec1-office-space/">EC1</option>
              <option value="ec2-office-space/">EC2</option>
              <option value="ec3-office-space/">EC3</option>
              <option value="ec4-office-space/">EC4</option>
            </select>
            <input type="image" src="images/graphics/new/btn_go.png" 
            class="go_btn" width="119" border="0" value="submit" 
            alt="Area search submit" />
  </form> 
```

# regex - Notepad++ / UltraEdit：搜索 id="xyz" 并替换 xyz

> ID：14687207
> 
> 赞同：1
> 
> 时间：2013-02-04T12:52:33.313
> 
> 标签：regex, replace, notepad++, ultraedit

我想构建一个测试场景，需要在`html`文档中搜索：

```
<a id="xyz" href="#"></a>
<a id="123pa" href="#"></a>
<span id="sdasd"></span> 
```

我想替换`id="someString"`为`id=""`

使用 Notepad++ 和 UltraEdid。

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:01:46.553

替换`id=".+?"`或。`id="[^"]+"`_`id=""`

# android - Android OAuth 2.O 无法检索访问令牌

> ID：14687210
> 
> 赞同：2
> 
> 时间：2013-02-04T12:52:38.703
> 
> 标签：android, oauth

我正在尝试从 Android 客户端使用 Google Calendar API。由于某些原因，我为已安装的应用程序选择了 OAuth 2.0 而不是 Account Manager。
[https://developers.google.com/accounts/docs/OAuth2InstalledApp](https://developers.google.com/accounts/docs/OAuth2InstalledApp)

我已经在开发人员 API 控制台上注册了我的应用程序，因此我有 client_id 和重定向 uri。控制台不显示 client_secret。

我从谷歌服务器收到授权码 4/XdlW5dvFW3OWCnKdeG8yDOOjYGAw

```
https://accounts.google.com/o/oauth2/token?
code=4/XdlW5dvFW3OWCnKdeG8yDOOjYGAw&
client_id=54957922365-fjaa2quhukho8sr5bkpkoq8038vdjh9m.apps.googleusercontent.com&
redirect_uri=urn:ietf:wg:oauth:2.0:oob&
grant_type=authorization_code 
```

如果我使用提到的参数创建这个 HTTPS URL，我会收到 405 错误方法不允许在我的代码中。正如上面 URL 中所指定的，我已经添加了参数，但无法使用访问令牌交换身份验证代码。有谁知道为什么我在能够检索授权码时没有获得访问令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:35:29.193

感谢您提供代码片段，但我没有在浏览器上发布链接，我已经在 Android 项目中编写了正确的 android HTTPS 代码。仅供参考，我分享了网址。我已经解决了这个问题。为了帮助其他开发人员，我附上代码： [https ://github.com/misskhushboo/Code-Snippets.git](https://github.com/misskhushboo/Code-Snippets.git)

# javascript - CKEDITOR：从 Javascript 中的多个实例名称中获取数据

> ID：14687212
> 
> 赞同：1
> 
> 时间：2013-02-04T12:52:43.283
> 
> 标签：javascript, ckeditor

因为我在 HTML 代码中有多个文本区域，所以我通过 Javascript 传递 id 值来检索每个文本区域中的数据。但是，在 JS 函数中，“CKEDITOR.instances.id”没有按预期表示，例如 CKEDITOR.instances.editor_1、CKEDITOR.instances.editor_2 或 CKEDITOR.instances.editor_4，因此，我没有任何检索到的数据。任何人都知道如何解决这个问题，请告诉我。非常感谢。

HTML 代码：

```
 <textarea name="edit_1"></textarea>
    <input type="button" value="submit" onClick="getValue('edit_1')" />
    <textarea name="edit_2"></textarea>
    <input type="button" value="submit" onClick="getValue('edit_2')" />
    <textarea name="edit_2"></textarea>
    <input type="button" value="submit" onClick="getValue('edit_3')" /> 
```

JS代码：

```
 var getValue = function(id) {
        var content = CKEDITOR.instances.id.getData();
        alert(content);
    }; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T14:38:46.887

尝试在 id 之间添加 []

```
var getValue = function(id) {
    var content = CKEDITOR.instances[id].getData();
    alert(content);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-21T06:01:47.400

我必须做这样的事情，因为我正在将事件绑定到具有多个实例的操作。并试图获取数据，但它总是会为除最后一个之外的任何一个返回 null ......虽然使用事件（e.editor）有效。

```
var editors = CKEDITOR.instances;
    for (var x in editors) {
      if (editors[x]) {
        var thisName = editors[x].name;
        if (editors[thisName]) {
          editors[thisName].on('focus', function (e) {
            socket.emit('ckeditor_field_type_edit', user, e.editor.name);
          });
          editors[thisName].on('key', function (e) {
            var data = e.editor.getData();
            socket.emit('ckeditor_field_type_typing', user, e.editor.name, data);
          });
          editors[thisName].on('blur', function (e) {
            var data = e.editor.getData();
            setTimeout(function () {
              socket.emit('ckeditor_field_type_edit_finish', user, e.editor.name, data);
            }, 1000);
          });
        }
      }
    } 
```

# php - 来自产品数组的类别数组

> ID：14687220
> 
> 赞同：1
> 
> 时间：2013-02-04T12:53:21.357
> 
> 标签：php, arrays, for-loop, categories, product

我有一个产品数组，其中包含按显示顺序排序的产品列表。

```
$products = array(
[0] = array(
 "productID" => 189736,
 "title" => "Spice Girls Album",
 "category" => "CD",
 "order" => "0"
),
[1] = array(
 "productID" => 23087,
 "title" => "Snakes on a plane",
 "category" => "DVD",
 "order" => "0"
),
[2] = array(
 "productID" => 9874,
 "title" => "The Beatles Album",
 "category" => "CD",
 "order" => "1"
), ... etc etc 
```

我试图弄清楚将它变成这样的类别数组的逻辑：

```
$categories = array(
   [0] => array(
        "title" => "CD",
        "products" => array (
            [0] => "Spice Girls Album",
            [1] => "The Beatles Album"
        ) 
    ),
   [1] => array(
        "title" => "DVD",
        "products" => array (
            [0] => "Snakes on a plane"
        ) 
) 
```

因此，对于我拥有的每种产品：

```
if (!in_array($product['cateogry'], $categories)){
    $categories[] = $product['cateogry'];
    $categories[$product['category']][] = $product; 
} else {
    $categories[$product['category']][];
} 
```

但这不起作用，因为我认为 in_array 没有足够深入地检查类别数组。有人对解决此问题的最佳方法有任何建议吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:59:36.940

你有正确的想法`$categories[$product['category']][] = $product`。您需要检查的是密钥是否`$product['category']`存在于`$categories`：

```
if (array_key_exists($product['category'], $categories)) {
    $categories[$product['category']]['products'][] = $product['title'];
} else {
    // initialize category data with first product
    $categories[$product['category']] = array(
        'title' => $product['category'],
        'products' => array($product)
    );
} 
```

这将为您提供以下形式的数组：

```
$categories = array(
   "CD" => array(
        "title" => "CD",
        "products" => array (
            [0] => "Spice Girls Album",
            [1] => "The Beatles Album"
        ) 
    ),
   "DVD" => array(
        "title" => "DVD",
        "products" => array (
            [0] => "Snakes on a plane"
        ) 
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T12:57:52.353

也许你应该使用 array_key_exists() 而不是 in_array()。 [http://php.net/manual/en/function.array-key-exists.php](http://php.net/manual/en/function.array-key-exists.php)

$product['cateogry'] 有错别字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:01:18.920

```
$categories  = array();
foreach($products as $product){
    $categories[$product['category']]['title']                           = $product['category'];
    $categories[$product['category']]['products'][$product['productID']] = $product['title'];
}

print_r($categories); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:04:21.917

你可以使用这样的东西：

```
$new_products = array();
foreach ($products as $product) {
  $new_products[$product['category']][] = $product['title'];
} 
```

这会将它们放入您想要的数组中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T13:06:20.857

```
<pre>
<?php
$p[] = array(productID => 189736,title => 'Spice Girls Album', category => 'CD', order => 0);
$p[] = array(productID => 23087, title => 'Snakes on a plane', category => 'DVD', order => 0);
$p[] = array(productID => 9874, title => 'The Beatles Album', category => 'CD', order => 1);
foreach($p as $p){
    $c[$p['category']]['title'] = $p['category'];
    $c[$p['category']]['products'][] = $p['title'];
}
print_r($c);
?> 
```

# android - Android facebook sdk 3.0 注销不起作用？

> ID：14687231
> 
> 赞同：4
> 
> 时间：2013-02-04T12:53:55.647
> 
> 标签：android, facebook, facebook-graph-api

我正在使用 facebook sdk 3.0 登录我的应用程序。登录工作正常。一旦我注销我的应用程序，它就不会发生。

我的注销代码：

```
Facebook mFb=new Facebook("xxxxxxxx");
mFb.logout(this); 
```

给我一些想法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-26T12:47:54.250

我一直面临同样的问题最后我找到了这个修复

```
public void logout()
{
    Session session = Session.getActiveSession();
    if (session != null) {
        session.closeAndClearTokenInformation();
    }
    else
    {
        Session session2 = Session.openActiveSession((Activity)context, false, null);
        if(session2 != null)
            session2.closeAndClearTokenInformation();
    }
    Session.setActiveSession(null);

} 
```

我不知道里面发生了什么，但我想如果找不到它，我们将不得不创建新会话并清除它的令牌信息。它对我有用。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T12:58:17.620

试试这个：

```
if( mFb.isSessionValid() ) {                                  
    mFb.logout(getApplicationContext());
    SessionStore.clear(getApplicationContext());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T08:16:41.923

答：工作正常

```
Session.openActiveSession(this, true, new Session.StatusCallback() {
@Override
public void call(final Session session, final SessionState state, Exception exception){
    // TODO Auto-generated method stub
    if(session.isOpened()){
        Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {
            @Override
            public void onCompleted(GraphUser user, Response response) {
            // TODO Auto-generated method stub
                if(user!=null){
                    try{
                        session.close();
                        session.closeAndClearTokenInformation();
                        //state.isClosed();
                    }catch (Exception e) {
                        Log.e(tag, "getUserIdMethod--->"+e);
                    }

                }
            }
        });                 
    }
}}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-30T16:11:59.217

对于 Facebook 使用：

```
LoginManager.getInstance().logOut(); 
```

注销。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T13:13:47.800

您是否尝试在单独的线程上调用它：

```
public void logout()
    {
        new Thread(){
            public void run() {
                try {
                    mFacebook.logout(your_current_class_name.this);
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            };
            }.start();
    } 
```

# iphone - UILabel 在 UItableView 中不会消失

> ID：14687233
> 
> 赞同：0
> 
> 时间：2013-02-04T12:54:09.220
> 
> 标签：iphone, xcode, uitableview

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

//    NSLog(@"msgcnt123 %@\n",[messageCount objectAtIndex:indexPath.row]);

    NSArray *seperateArray = [[clist objectForKey:[[clist allKeys]objectAtIndex:indexPath.row]]componentsSeparatedByString:@"@"];

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
//    NSLog(@"key %@\n",[[clist allKeys]objectAtIndex:indexPath.row]);

    cell.textLabel.text = [seperateArray objectAtIndex:0];
//    cell.textLabel.text = [contactlist objectAtIndex:indexPath.row];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

//    NSLog(@"sep %@\n",seperateArray);

    if (![[seperateArray objectAtIndex:1] isEqualToString:@"0"]) {
        NSLog(@"msgCount %@\n",[seperateArray objectAtIndex:1]);
        lblCnt = [[UILabel alloc]initWithFrame:CGRectMake(260, 13, 20, 20)];
        lblCnt.backgroundColor = [UIColor lightGrayColor];
        lblCnt.textColor = [UIColor blackColor];
        lblCnt.text = [seperateArray objectAtIndex:1];
        lblCnt.textAlignment = UITextAlignmentCenter;
        lblCnt.layer.masksToBounds = YES;
        lblCnt.layer.cornerRadius = 2.0f;
        [cell.contentView addSubview:lblCnt];

    }
    else
    {
        NSLog(@"msgCount1 %@\n",[seperateArray objectAtIndex:1]);
        [lblCnt removeFromSuperview];
        lblCnt.hidden = YES;
    }

    return cell;
} 
```

我在每一行中添加了一个标签，显示收到的消息数量。在 didSelect 方法中，我将标签计数设为零，这样我就可以从 tableView 中消失标签。如果表格视图中的标签不止一行，则不会消失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:05:26.287

达到你想要的简单而肮脏的方法是使用标签

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *cellIdentifier = @"cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
}

NSArray *seperateArray = [[clist objectForKey:[[clist allKeys]objectAtIndex:indexPath.row]]componentsSeparatedByString:@"@"];

cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
cell.textLabel.text = [seperateArray objectAtIndex:0];
cell.selectionStyle = UITableViewCellSelectionStyleNone;

if (![[seperateArray objectAtIndex:1] isEqualToString:@"0"]) {

    lblCnt = [[UILabel alloc]initWithFrame:CGRectMake(260, 13, 20, 20)];
    lblCnt.backgroundColor = [UIColor lightGrayColor];
    lblCnt.textColor = [UIColor blackColor];
    lblCnt.text = [seperateArray objectAtIndex:1];
    lblCnt.textAlignment = UITextAlignmentCenter;
    lblCnt.layer.masksToBounds = YES;
    lblCnt.layer.cornerRadius = 2.0f;
    [cell.contentView addSubview:lblCnt];

    //Add a tag
    lblCnt.tag = 1000;

}
else
{
    /*
    NSLog(@"msgCount1 %@\n",[seperateArray objectAtIndex:1]);
    [lblCnt removeFromSuperview];
    lblCnt.hidden = YES;
     */

    for (UIView *view in [cell.contentView subviews]) {

        if (view.tag == 1000) {
            [view removeFromSuperview];
        }

    }

}

return cell;
} 
```

并根据标签选择视图。

# c# - 从活动目录 C# 获取所有用户

> ID：14687234
> 
> 赞同：-1
> 
> 时间：2013-02-04T12:54:17.410
> 
> 标签：c#, active-directory

> **可能重复：**
> [我可以从 Asp.Net 中的 DirectorySearcher 获得超过 1000 条记录吗？](https://stackoverflow.com/questions/90652/can-i-get-more-than-1000-records-from-a-directorysearcher-in-asp-net)
> [c# Active Directory Services findAll() 仅返回 1000 个条目](https://stackoverflow.com/questions/3488394/c-sharp-active-directory-services-findall-returns-only-1000-entries)

尝试从 AD 读取所有用户时遇到问题。Active Directory 包含超过 3000 个用户，但我只能读取 1000 个。这是我的代码

```
public DirectoryEntry directoryEntry = new DirectoryEntry(ldap, userName, password);
public DirectorySearcher directorySearcher = new DirectorySearcher(directoryEntry);

var allUsers = directorySearcher.FindAll(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:00:00.620

是用户设置问题。根据此[页面](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/22cff477-18f0-4993-9627-a9871aaf73a2/)，您必须将页面大小设置为 1000 才能获得超过 1000 个结果：

> OmegaMan：是的，这很奇怪，必须将页面大小设置为 1000 才能获得超过 1000 条的记录。这是一个技巧/问题，人们不会忘记解决问题的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:07:53.580

您需要设置您的`PageSize`属性`DirectorySearcher`以进行*分页搜索*并返回 1000 多行：

```
public DirectoryEntry directoryEntry = new DirectoryEntry(ldap, userName, password);

public DirectorySearcher directorySearcher = new DirectorySearcher(directoryEntry);
directorySearcher.PageSize = 500;  // ADD THIS LINE HERE !

var allUsers = directorySearcher.FindAll(); 
```

# asp.net - 动态添加 href 目标并在新选项卡中打开它

> ID：14687236
> 
> 赞同：0
> 
> 时间：2013-02-04T12:54:29.753
> 
> 标签：asp.net, hyperlink, href, servercontrols

我的代码是：

```
 <a href='<%# Eval("websitename")%>' runat="server" target="_blank">
 <asp:Label runat="server" Text='<%# Eval("websitename")%>'></asp:Label>
 </a> 
```

当我单击它在我的本地主机中搜索该网站时，我将从后面的代码中绑定网站名称。

如果该网站名称是“www.stackoverflow.com”，它会像“localhost:1234/www.stackoverflow.com”一样打开

如何重定向到 www.stackoverflow.com。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:58:52.830

添加`http://`到地址的开头：

```
 <a href='http://<%# Eval("websitename")%>' runat="server" target="_blank">
       <asp:Label runat="server" Text='<%# Eval("websitename")%>'></asp:Label>
 </a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:00:16.943

检查网站名称是否以开头，`http://`如果不是，请添加它。

或者，如果网站名称从不以 开头`http://`，则执行

```
<a href='<%# "http://" + Eval("websitename")%>' 
```

# google-maps - Google Maps API 异步加载

> ID：14687237
> 
> 赞同：2
> 
> 时间：2013-02-04T12:54:32.867
> 
> 标签：google-maps, google-maps-api-3, google-loader

我正在使用以下代码在 IE9 中异步加载 Google Maps API 脚本：

```
function initialize() {
  ...
}

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=TRUE_OR_FALSE&callback=initialize";
  document.body.appendChild(script);
}

window.onload = loadScript; 
```

现在的问题是，当脚本完全加载时，`initialize()`会自动调用该函数。但是有时当用户配额超出时，该`initialize()`函数不会被调用，我们看到的不是 map，而是纯白屏幕。

我想检测到这一点并触发我的自定义函数，该函数会显示一些警报，例如：`"Error!"`。

谁能告诉我如何做到这一点？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:48:36.227

正如安德鲁所说，没有直接的方法来处理这个问题。但是，您至少可以考虑这种可能性。

在合理的时间范围内设置超时（5 秒？）。在超时回调函数中，测试 google 和/或 google.maps 是否存在。如果它不存在，则假定脚本加载失败。

```
setTimeout(function() {
  if(!window.google || !window.google.maps) {
    //handle script not loaded
  }
}), 5000);
// Maps api asynchronous load code here. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:18:39.413

我终于找到了解决这个问题的方法。Chad 提供了一个很好的解决方案，但唯一的问题是您不能将那段代码放入`callback()`函数中，因为如果脚本加载失败，`callback()`则永远不会调用该函数！

因此，根据乍得提到的内容，我终于想出了以下解决方案：

```
function initialize() {
  ...
}

function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "http://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&sensor=TRUE_OR_FALSE&callback=initialize";
  setTimeout(function () {
        try{
            if (!google || !google.maps) {
                //This will Throw the error if 'google' is not defined
            }
        }
        catch (e) {
            //You can write the code for error handling here
            //Something like alert('Ah...Error Occurred!');
        }
    }, 5000);
  document.body.appendChild(script);
}

window.onload = loadScript; 
```

这对我来说似乎很好用！:)

# asp.net - ASP.net 服务器控件和使用 AjaxcontrolToolkit

> ID：14687239
> 
> 赞同：2
> 
> 时间：2013-02-04T12:54:40.047
> 
> 标签：asp.net, visual-studio-2010, ajaxcontroltoolkit, asp.net-4.0

我对服务器控件 VS 有疑问。用户控件 (.ascx)。目前，当我编写用户控件时，我希望能够利用 AjaxControlToolKit DLL。特别是，我希望我的用户控件能够进行部分回发并使用各种扩展程序（例如modalPopUp）。不过，我的老板更喜欢我们使用服务器控件，以便我们可以将它们编译成 DLL 并在各种应用程序中使用它们。我的问题是：如果我将用户控件重写为服务器控件，我还能使用 AjaxControlToolKit 及其所有功能（异步回发和扩展程序）吗？

仅供参考：我正在使用 Visual Studio 2010、AjaxControlToolkit 4.1.60919 和 .Net 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:02:15.837

是的，您将能够做到这一点。只需从类接口继承您的控件`CompositeControl`，并将任何扩展程序或控件从 ACT 项目添加到 Controls 集合，就像您应该使用序号 ASP.NET 服务器控件执行此操作一样。您也可以继承现有的控件并实现`INamingContainer`接口，但在这种情况下，您必须`RenderChildren`从控件的方法中手动调用`Render`方法：

```
[DefaultProperty("Text")]
[ToolboxData("<{0}:WatermarkedTextBox runat=server></{0}:WatermarkedTextBox>")]
public class WatermarkedTextBox : TextBox, INamingContainer
{
    private AjaxControlToolkit.TextBoxWatermarkExtender _watermarkExtender;

    public string WatermarkText
    {
        get
        {
            return ViewState["WatermarkText"] as string;
        }
        set
        {
            ViewState["WatermarkText"] = value;
        }
    }

    protected override void CreateChildControls()
    {
        Controls.Clear();

        this._watermarkExtender = new AjaxControlToolkit.TextBoxWatermarkExtender
        {
            ID = "wte",
            TargetControlID = this.ID,
            WatermarkText = this.WatermarkText
        };
        this.Controls.Add(_watermarkExtender);
    }

    protected override void Render(HtmlTextWriter writer)
    {
        base.Render(writer);
        RenderChildren(writer);
    }
} 
```

}

# javascript - 如何在图像上方的列中心画一条黑线？

> ID：14687241
> 
> 赞同：1
> 
> 时间：2013-02-04T12:54:46.497
> 
> 标签：javascript, html, css

我需要能够在特定列（td）的中心准确地绘制一条黑线。此列包含一个图像，因此黑线必须位于图像的顶部。

我在 CSS 中尝试这个，但是 javascript 就可以了。我不想为黑线使用图像。

我尝试过：

```
.verticalLine {
    position: relative;
    float: center;
    height: 100%;
    border-right: 1px solid #000;
    z-index: 9999;
} 
```

进而：

```
<td align="center" valign="center">
    <div class="verticalLine" id="verticalLine"></div>
etc. 
```

......但这并没有显示任何东西。

我也试过了`left: 50%;`，`left: 428;`但也没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:04:24.997

使用您的代码：

```
<td align="center" valign="center"><div class="verticalLine" id="verticalLine"></div> 
```

我为此使用的 CSS 可能如下所示：

```
td {
    position: relative;
}
.verticalLine{
    position: absolute;
    top: 0px;
    left: 0px;
    width: 50%;
    height: 100%;
    border-right: solid 1px #000;
    z-index: 9999;
} 
```

使用 TD 相对定位，您的行可以定位`absolute`，这会将其从标准流程中取出，并且不会影响单元格中其他元素的定位。当然，如果您`position: relative`使用类将 应用于 TD 会更好，因此它不会影响所有其他 TD 标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:01:35.457

您的 td 需要相对位置，然后您可以将 div 相对定位为 50% 并将边框放在左侧：

```
td {
  position: relative;
}

.verticalLine {
  position: relative;
  left: 50%;    
  height: 100%;
  border-left: 1px solid #000;
  z-index: 9999;
} 
```

此处的示例（仅使用 id 为 #wrapper 的 div 来代替 td）：[http ://codepen.io/anon/pen/DBphv](http://codepen.io/anon/pen/DBphv)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:04:05.550

这很容易做到。

HTML

```
<table>
    <tr>
        <td align="center" valign="center"><div class="verticalLine" id="verticalLine"></div><img src="http://www.ehdwalls.com/plog-content/thumbs/1440x900/animals/small/610-citten_1440x900.jpg" /></td>
    </tr>
</table> 
```

CSS

```
.verticalLine {
    position: relative;
    float: center;
    height: 100%;
    width: 1px;
    background: #000;
    z-index: 9999;
}

td {
     height: 50px;   
} 
```

我做了一个快速的 jsfiddle 示例： [jsfiddle 示例](http://jsfiddle.net/hEqZ5/1/)

# apache2 - Apache 向 Kerberos 发送错误的服务器主体名称

> ID：14687245
> 
> 赞同：2
> 
> 时间：2013-02-04T12:54:57.183
> 
> 标签：apache2, ldap, debian, kerberos

我正在尝试针对 kerberos 对我的 apache 进行身份验证。我有两个网站在同一台服务器上运行，我使用 VirtualHosts 来实现这一点，并将 DNS 设置为该服务器有两个名称，以便每个网站都有一个单独的名称。我最近添加了一个新的 ldap/Kerberos 服务器并尝试将我的一个网站连接到它，但我未能获得正确的凭据以使其正常工作。添加一些调试后，我发现 apache 查找的是 HTTP/fist-server-name 而不是 HTTP/second-server-name，因此在 Kerberos 数据库和 keytab 中找不到正确的主体。如何强制 apache 对第二个服务器名称进行检查以验证来自我的第二个网站的调用？看起来在 apache 配置中添加 ServerName 属性是不够的！我可以通过更改主机文件中的服务器名称顺序来做到这一点，

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T10:02:23.167

我假设您正在使用 mod_auth_kerb。您需要添加：

```
KrbServiceName Any 
```

到您的 Apache 配置。这将告诉 mod_auth_kerb 接受对其使用的密钥表中存储有密钥的任何主体的身份验证，而不是假设将使用什么主体并且只接受对该主体的身份验证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T23:41:56.780

您需要确定要为每个网站使用的 Kerberos SPN。您可以通过运行以下命令检查密钥表中列出的 SPN：`klist -k <Keytab>`-- 确保您正在检查 Apache 使用的密钥表文件。

在`VirtualHost`声明中，您需要更改`KrbServiceName`值以匹配您从 keytab 中确定的值。重新启动 Apache，它应该在与 Kerberos 通信时开始使用它。

一个例子看起来像：

```
 KrbServiceName HTTP/yourservice.domain@REALM.COM 
```

确保 AD 具有匹配的服务帐户和 SPN，并且它可以通过 DNS 解析回 Apache 服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-24T00:55:52.223

# c# - MySql.Data.MySqlClient.MySqlException (0x80004005)

> ID：14687258
> 
> 赞同：0
> 
> 时间：2013-02-04T12:56:07.343
> 
> 标签：c#, mysql

```
 try
                {

                   // Console.WriteLine("wtf");
                    con.ConnectionString = WebConfigurationManager.ConnectionStrings["dbconn"].ConnectionString;
                    cmd.Connection = con;
                    cmd.CommandType = System.Data.CommandType.Text;
                    con.Open();
                    cmd.CommandText = "select count(*) from hr WHERE emp_id=@1)";
                    cmd.Parameters.AddWithValue("@1", emp_id);

                   dr = cmd.ExecuteReader();
                   int count = 0;
                    while (dr.Read())
                     {
                         count = dr.GetInt32(0);
                     }
                     dr.Close();
                     cmd.Dispose();
                     cmd.Parameters.Clear();
                    if (count > 0)
                    {

                        cmd.CommandText = "DELETE FROM hr WHERE emp_id=@1')";
                        cmd.Parameters.AddWithValue("@1", emp_id);
                        cmd.ExecuteNonQuery();
                        res.Write("deleted");
                    }
                    else
                    {
                        res.Write("zero");
                    }
                    con.Close();

                } 
```

我在附近收到 sql 错误 `dr = cmd.ExecuteReader();`

**错误信息 ：**

```
 MySql.Data.MySqlClient.MySqlException (0x80004005): You have an error in your SQL
 syntax; check the manual that corresponds to your MySQL server version for the right
 syntax to use near ')' at line 1 at MySql.Data.MySqlClient.MySqlStream.ReadPacket() at 
MySql.Data.MySqlClient.NativeDriver.GetResult(Int32& affectedRow, Int64& insertedId) at 
MySql.Data.MySqlClient.Driver.GetResult(Int32 statementId, Int32& affectedRows, Int64& 
insertedId) at MySql.Data.MySqlClient.Driver.NextResult(Int32 statementId, Boolean force)
 at MySql.Data.MySqlClient.MySqlDataReader.NextResult() at 
MySql.Data.MySqlClient.MySqlCommand.ExecuteReader(CommandBehavior behavior) at 
MySql.Data.MySqlClient.MySqlCommand.ExecuteReader() at 
prod.Controller.HR.HRDel.ProcessRequest(HttpContext context 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:01:45.127

MySqlClient 期望`?`参数 char 而不是`@`

另外我不确定是否`1`是有效的参数名称。尝试使用`?p_1`

`')`最后，正如 RhysW 所说，您的 DELETE 语句和`)`SELECT 语句中有一个额外的

# android - android错误java.lang.NoClassDefFoundError

> ID：14687259
> 
> 赞同：3
> 
> 时间：2013-02-04T12:56:15.350
> 
> 标签：android

我在市场上有 android 应用程序，所以我收到此错误，但我不知道为什么。

```
Exception class java.lang.NoClassDefFoundError
Source method MainActivity.onCreate()

java.lang.NoClassDefFoundError: android.app.DownloadManager
at com.example.viewpagerexample.MainActivity.onCreate(MainActivity.java:182)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1069)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2751)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2803)
at android.app.ActivityThread.access$2300(ActivityThread.java:135)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2136)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:144)
at android.app.ActivityThread.main(ActivityThread.java:4937)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:00:46.773

DownloadManager 是在 API 级别 9（又名 Gingerbread）上添加的。我猜你在 AndroidManifest.xml 中声明 minSDK 低于 9

如果是这种情况，您需要为使用旧 Android 版本的用户设计一种解决方法。您可以使用以下代码检查您的应用正在运行的版本：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.GINGERBREAD) {
    // Use DownloadManager
}
else {
    // Workaround
} 
```

# dynamics-crm-2011 - MS CRM 2011 表单：“默认可见”字段属性复选框不起作用

> ID：14687261
> 
> 赞同：1
> 
> 时间：2013-02-04T12:56:18.903
> 
> 标签：dynamics-crm-2011

我最近将 crm 4 数据库迁移到 crm 2011。我们使用的是内部部署版本。

我现在正在调整脚本和表单以适应 crm 2011。对于我的一个表单，我遇到了以下问题：我试图从表单中隐藏所有者。

为此，我取消选中字段属性表单上的“默认可见”复选框。

这适用于大多数表单，但无论我做什么，都会在其中一个表单上显示所有者。我已经能够在表单中移动字段，删除标签等。所有这些都有效，但是对可见性的更改将不起作用。

有人见过这个吗？为什么它不起作用？有没有人知道如何在不编写自定义 javascript 的情况下解决问题（这可能会起作用，但我有兴趣让“默认可见”复选框再次起作用。

## 更新

自定义实体仅定义了一个表单。此表单上没有自定义 javascript，但我还是检查了 javascript 错误，但没有。更奇怪的是，如果我查看 html 代码，如果未选中复选框（样式可见性设置为可见！），我会看到以下代码：

```
<td class="ms-crm-FieldLabel-LeftAlign ms-crm-Field-Required" id="ownerid_c" style="visibility: visible;"> 
```

而复选框被勾选了我会得到（根本没有样式属性！）：

```
<td class="ms-crm-FieldLabel-LeftAlign ms-crm-Field-Required" id="ownerid_c"> 
```

不用说我确实发布了我的更改。

在复选框按预期工作的表单上，我看到以下 html（样式属性显示设置为无）：

```
<td class="ms-crm-FieldLabel-LeftAlign ms-crm-Field-Required" id="ownerid_c" style="display: none;"> 
```

## 更新 2

此问题发生在实体的更新表单中（因此所有者不为空）。我将所有者移动到一个部分并尝试隐藏该部分，但不幸的是该部分不会隐藏。**但是*，如果我将所有者移出该部分，该部分将隐藏。我想知道这个所有者字段有什么，这不会让我隐藏它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T19:29:15.787

这困扰了我很久，直到我意识到发生了什么。我试图使更新表单完全只读。CRM 表单要求更新表单上至少有一个可读字段。当它找不到时，它会留下一个可见且可读的（通常是所有者或名称字段或任何恰好是表单上的最后一个字段）。我在某处找到了以下 javascript 代码，它可以很好地禁用表单上的所有字段，而不会显示您设置为默认不可见的讨厌的所有者字段。（感谢作者，因为我不记得我在哪里得到它）

```
function DisableFormFields() {
    Xrm.Page.ui.controls.forEach(function(control, index) {
        if (doesControlHaveAttribute(control)) {
            control.setDisabled(true);
        }
    });
}

function doesControlHaveAttribute(control) {
    var controlType = control.getControlType();
    return controlType != "iframe" && controlType != "webresource" && controlType != "subgrid";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:53:38.653

因为这是 CRM 中表单的基本部分，所以我猜测您的真正问题是导致该字段未被隐藏的其他问题。如果您`F12`在 IE 中推送，并转到脚本选项卡进行调试，您是否看到任何 javascript 错误？

还要确保您查看的是正确的。在 CRM 2011 中，您可以为不同的角色使用不同的表单，因此请务必检查左上角的下拉表单。

并且不要忘记发布您的自定义设置！

## 编辑

我确实知道，如果一个字段被标记为必填项，那么如果您尝试保存表单并且它为空，它将无论如何都会显示它。这是在创建实体时发生的，还是在已填充值的实体更新时发生的？

我会尝试将字段移动到它自己的部分，并使整个部分不可见。这也是一个很好的做法，因为如果您向表单添加其他字段，隐藏的字段将占用表单中的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T22:55:18.660

您使用的是 CRM 2011 的 RTM 版本吗？有一个已知错误已通过汇总 1 修复

> 如果未选择“默认可见”字段，则无法通过客户端 API 将字段可见性设置为“真”。

也许您的问题与此错误有关/相关

你可以在这里阅读更新日志：

[Microsoft Dynamics CRM 2011 的更新汇总 1 可用](http://support.microsoft.com/kb/2466084/en-us)

# php - php curl 内存使用情况

> ID：14687264
> 
> 赞同：1
> 
> 时间：2013-02-04T12:56:22.593
> 
> 标签：php, memory, curl, ob-start

我有这个从页面列表中获取 html 的函数，一旦我运行它两个小时左右，脚本就会中断并显示已超出内存限制，现在我试图取消设置/设置为 null 一些变量，希望能释放一些内存，但这是同样的问题。各位大佬能看一下下面的代码吗？：

```
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    if ($proxystatus == 'on'){
        curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
        curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, TRUE);
        curl_setopt($ch, CURLOPT_PROXY, $proxy);
    }
    curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
    curl_setopt($ch, CURLOPT_URL, $site);
    ob_start();
    return curl_exec($ch); // the line the script interrupts because of memory
    ob_end_clean();
    curl_close($ch);

    ob_flush();
    $site = null;
    $ch = null;

} 
```

任何建议都受到高度赞赏。我已将内存限制设置为 128M，但在增加它之前（对我来说似乎不是最好的选择）我想知道在运行脚本时是否可以做些什么来使用更少的内存/释放内存。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:06:39.907

您确实在泄漏内存。请记住，`return`立即结束当前函数的执行，因此您的所有清理（最重要的是`ob_end_clean()`and `curl_close()`）永远不会被调用。

`return`应该是函数所做的最后一件事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-12T12:06:40.870

我知道已经有一段时间了，但其他人可能会遇到类似的问题，所以如果它可以帮助其他人......对我来说，这里的问题是 curl 被设置为将输出保存到字符串。[这就是`curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);`] 如果输出太长，脚本将用完该字符串的允许内存。[返回类似`FATAL ERROR: Allowed memory size of 134217728 bytes exhausted (tried to allocate 130027520 bytes)`] 的错误解决方法是使用 curl 提供的其他输出方法之一：输出到标准输出，或输出到文件。在任何一种情况下，都不需要 ob-start 。

因此，您可以使用以下任一选项替换大括号的内容：

选项 1：输出到标准输出：

```
$ch = curl_init();
if ($proxystatus == 'on'){
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, TRUE);
    curl_setopt($ch, CURLOPT_PROXY, $proxy);
}
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
curl_setopt($ch, CURLOPT_URL, $site);
curl_exec($ch);
curl_close($ch); 
```

选项 2：输出到文件：

```
$file = fopen("path_to_file", "w"); //place this outside the braces if you want to output the content of all iterations to the same file
$ch = curl_init();
if ($proxystatus == 'on'){
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_HTTPPROXYTUNNEL, TRUE);
    curl_setopt($ch, CURLOPT_PROXY, $proxy);
}
curl_setopt($curl, CURLOPT_FILE, $file);    
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");
curl_setopt($ch, CURLOPT_URL, $site);
curl_exec($ch);
curl_close($ch);
fclose($file);  //place this outside of the braces if you want to output the content of all iterations to the same file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:00:26.263

确定这不是 cURL 问题。使用诸如 xdebug 之类的工具来检测脚本的哪一部分正在消耗内存。

顺便说一句，我还将它更改为不运行两个小时，我会将它移动到每分钟运行的 cronjob，检查它需要什么然后停止。

# android - 无法在发布版本中附加子进程（Android）

> ID：14687265
> 
> 赞同：0
> 
> 时间：2013-02-04T12:56:40.043
> 
> 标签：android, native, ptrace

我尝试通过在 Android 上调用 ptrace(PTRACE_ATTACH, iChildPid, 0, 0) 来分叉然后跟踪我的孩子： - 并在使用调试版本时获得成功 - 并在发布版本时失败（不允许操作（1））

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:36:32.583

好的 :( 这是 Android 功能。如果应用程序未标记为可调试（清单：android:debuggable = false），PTRACE_ATTACH 在两个方向（parent2child 和 child2parent）都不起作用。只有 root 可以这样做。

# python - 如何将 os.system('cat /var/log/dmesg') 复制到变量

> ID：14687266
> 
> 赞同：3
> 
> 时间：2013-02-04T12:56:47.300
> 
> 标签：python, linux, shell

```
import sys
import os

log = os.system('cat /var/log/demesg') 
```

此代码通过运行 shell 脚本打印文件`cat /var/log/dmesg`。但是，它不会复制到日志中。我想在其他地方使用这些数据，或者像打印日志一样打印数据。

我该如何实施？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T13:00:00.637

只需自己从文件中读取：

```
with open('/var/log/dmesg') as logf:
    log = logf.read()
print(log) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T17:46:55.577

作为一个选项，看看 IPython。交互式 Python 带来了许多易于使用的工具。

```
ipy$ log = !dmesg
ipy$ type(log)
 <3> IPython.utils.text.SList
ipy$ len(log)
 <4> 314 
```

调用系统，并将标准输出作为字符串列表捕获到变量中。

专为协作科学而设计，也适用于通用 Python 编码。基于 Web 的协作笔记本（具有交互式图形，类似于 Sage 笔记本）也是一个很好的奖励功能，以及对并行计算的无处不在的支持。

[http://ipython.org](http://ipython.org)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:50:27.030

要从子进程读取输入，您可以使用**os**模块中的**fork** ()、**pipe** () 和**exec** () ；或使用**子流程**模块

# javascript - 无法在 Google Chrome 中获取 JSON 文件？

> ID：14687273
> 
> 赞同：11
> 
> 时间：2013-02-04T12:57:37.377
> 
> 标签：javascript, jquery, json, google-chrome

> **可能重复：**
> [在 Chrome 中使用本地文件的 jQuery getJSON 问题](https://stackoverflow.com/questions/2541949/problems-with-jquery-getjson-using-local-files-in-chrome)

我的 html 文件“index.html”和“contact.json”都在同一个文件夹中

我获取 json 文件的代码

```
function loadData(fileName) { 
    // getting json from a remote file
    // by returning the jqXHR object we can use the .done() function on it
    // so the callback gets executed as soon as the request returns successfully
    return $.getJSON( fileName + ".json");
}

function fillDataTable(data) {
//  alert(data);
    // iterate over each entry in the data.info array
    $.each(data.info, function(index, element) {
    // append it to the table
    $("#contact").append('<tr><td>' + element.name + '</td><td>'+ element.email +'</td><td>' + element.phone +'</td><td>' + '<input type="button" id="edit" onclick="edit(this.name)" name="'+ element.name +'" value="Edit"></input>' +'</td></tr>')
    }); 
}

$(document).ready(function(){

    // the file's name. "contact" in this example.
    var myFile = "contact";

    loadData(myFile).done(function(data) {
        // check if we acutally get something back and if the data has the info property
        if (data && data.info) {
            // now fill the data table with our data
            fillDataTable(data)
        }
    });
}); 
```

我的 json 文件

```
{
    "info": [
        {
            "name":"Noob Here",
            "email":"myemail@server.com",
            "phone":"123456"
        },
        {
            "name":"Newbie There",
            "email":"hisemail@server.com",
            "phone":"589433"
        }
    ]
} 
```

我的html

```
<div id="container-1">
    <ul>
        <li><a href="#fragment-1">List</a></li>
    </ul>   
    <div id="fragment-1">
        <table id="contact">
        <tr>
        <th> Name </th>
        <th>E-mail </th>
        <th> Phone </th>
        </tr>
        </table>
    </div>
</div> 
```

CDN 给

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.0/jquery-ui.min.js"></script> 
```

该代码可以正常`Firefox`工作，但不能在`Google Chrome`.

得到的错误`Google Chrome`

```
XMLHttpRequest cannot load file:///home/user/jquery/contact.json. Origin null is not allowed by Access-Control-Allow-Origin. 
```

html 和 json 文件都在同一个位置。如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T13:08:48.453

Chrome 根本不允许对本地文件进行 ajax 调用。参考**[这个](http://code.google.com/p/chromium/issues/detail?id=40787&q=ajax%20local&colspec=ID%20Stars%20Pri%20Area%20Feature%20Type%20Status%20Summary%20Modified%20Owner%20Mstone%20OS)**

但是，如果您希望 Chrome 在本地运行，您可以使用标志 --allow-file-access-from-files 启动 Chrome。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T13:07:38.787

**[在这里](https://stackoverflow.com/a/3744697/2039657)**检查答案

尝试通过http访问json文件或使用jsonp

# asp.net - 具有多个 LDAP 服务器的 ASP.NET MVC 应用程序

> ID：14687276
> 
> 赞同：0
> 
> 时间：2013-02-04T12:57:43.160
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, active-directory

我们正在使用一个使用 Windows 身份验证的 ASP.NET MVC 3.0 Web 应用程序。我们有一个主域控制器和多个（现在两个）备份服务器，用于故障转移场景。

我们是否需要通过为主要和次要添加多个成员资格提供程序来明确地在我们的 Web 应用程序中处理从主要 LDAP 服务器到次要服务器的故障转移？或者是否可以使用负载平衡器在 Web 应用程序之外透明地处理这种故障转移？

如果我们需要从 Web 应用程序处理它，有人可以参考一些
有关如何处理的资源

1.  配置多个会员提供者
2.  检测到主 LDAP 服务器已关闭
3.  从主 LDAP 服务器切换到辅助 LDAP 服务器进行身份验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:35:47.507

如果您将 connectionString 指向域而不是特定服务器，这应该不是问题。AD 擅长处理 DC 下线。

# ajax - JSF 2.1 SelectOneMenu 自动切换到初始值

> ID：14687280
> 
> 赞同：0
> 
> 时间：2013-02-04T12:57:55.523
> 
> 标签：ajax, jakarta-ee, web-applications, jsf-2

我在 index.xhtml 中有 2 个 SelectOneMenu，如下所示。menu1 本质上选择一种语言（sp 或 en），而 menu2 显示可能的序列号（0 到 3）。我有初始化两个菜单上的默认值的初始化构造函数（后构造函数）。但是由于某些奇怪的原因，如果我为默认语言以外的语言选择默认序列号以外的序列号，则语言会以某种方式重置为初始默认值:(

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">

    <h:head>
        <title>My page</title>
    </h:head>
    <h:body>
                            <div>
                                <h4>Change Existing Description</h4>
                            </div>
                            <h:form id="myForm">
                                    <h:panelGrid columns="4">
                                        <h:outputLabel value="Language:" />
                                        <h:selectOneMenu value="#{myBean.language}">
                                            <f:selectItems value="#{myBean.languages}" />
                                            <f:ajax listener="#{myBean.doUpdate}" render ="myForm" />
                                        </h:selectOneMenu>
                                        <h:outputLabel value="SerialID:" />
                                        <h:selectOneMenu value="#{myBean.serialID}">
                                            <f:selectItems value="#{myBean.serialIDs}" />
                                            <f:ajax listener="#{myBean.doUpdate}" render ="myForm" />
                                        </h:selectOneMenu>

                                    </h:panelGrid>
                                </h:form>
    </h:body>
</html> 
```

这是我的 Bean 代码。问题出在哪里？？请指教！

```
package bean;

import java.util.ArrayList;
import java.util.List;
import javax.annotation.PostConstruct;
import javax.ejb.Stateful;
import javax.enterprise.context.RequestScoped;
import javax.faces.bean.ManagedBean;

@ManagedBean(name = "myBean")
//@Stateless
@Stateful
@RequestScoped
public class MyBean {

    public static final int PERMISSIONS = 2;
    private List<String> languages;
    private String language;
    private int serialID;
    private List<Integer> serialIDs;

    /**
     * init() method for initializing the bean. Is called after constuction.
     */

    @PostConstruct
    private void init() {
    //public MyBean () {
        languages = getAllLanguages();
        language = "en"; //defaultLanguage 
        serialID = 3;
        serialIDs = getSerialIDsFromOverview();
    } 

    public List<String> getLanguages() {
        System.out.println("getLanguages, language " +language);
        return languages;
    }

    public int getPERMISSIONS() {
        return PERMISSIONS;
    }

    public String getLanguage() {
        System.out.println("getLanguage " +language);
        return language;
    }

    public void setLanguage(String language) {
        System.out.println("setLanguage " +language);
        this.language = language;
    }

    public int getSerialID() {
        System.out.println("getSerialID " +serialID);
        return serialID;
    }

    public void setSerialID(int serialID) {
          System.out.println("setSerialID " +serialID);
        this.serialID = serialID;
    }

    public List<Integer> getSerialIDs() {
        System.out.println("getSerialIDs language =  "+language );
        return serialIDs;
    }

    public List<String> getAllLanguages() {
        List<String> results = new ArrayList<String>();
        results.add("sp");
        results.add("en");

        if(results != null){
            System.out.println("getting all languages");
        }
        return results;
    }

    public void doUpdate() {

         System.out.println("doUpdate language " +language);
         System.out.println("doUpdate serialID " +serialID);

    }

    /**
     * Returns a list of all serialIDs present in the overview.
     * @return 
     */
    private List<Integer> getSerialIDsFromOverview() {
        List<Integer> results = new ArrayList<Integer>();
        results.add(0);
        results.add(1);
        results.add(2);
        results.add(3);
        return results;
    }

} 
```

更新：

在接受了**cubbuk**的建议后，我坐下来用 @ViewScoped 注释更正了我的代码，并使 bean 实现了可序列化。这行得通。然而，接下来我要做的是包含一个**@EJB 注释**来调用一个无状态bean，它调用实体管理器从数据库中获取序列ID，而不是“硬编码”它。那是我遇到问题的时候：不可序列化异常“ **java.io.NotSerializableException: bean.__EJB31_Generated__**。我该如何解决这个问题？当我将 myBean 返回到 RequestScope 并删除 Serializable 时，我可以毫无问题地运行代码，但是切换菜单的初始化值:(

顺便说一句，我检查了这篇文章：[@ViewScoped 托管 bean 中的 @EJB 导致 java.io.NotSerializableException](https://stackoverflow.com/questions/3037722/ejb-in-viewscoped-managed-bean-causes-java-io-notserializableexception)并将我的状态保存方法设置为服务器，但这给了我“来自服务器的响应”弹出消息:(请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:50:16.203

由于您在每次请求后都使用`@RequestScoped`bean 作为支持 bean，因此您的`init`方法被调用并且您的值被重置。为避免这种情况，您需要使用`@ViewScoped`bean 作为支持 bean。我相应地更新了您的 bean，请注意您的支持 bean 现在实现了`Serializable`接口。这是必需的，因为此 bean 将存储在您的 servlet 中，如果内容不能保存在内存中，则需要将其刷新到磁盘。要了解`@ViewScoped`bean 的详细信息，请查看以下帖子：

> [http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html](http://balusc.blogspot.com/2010/06/benefits-and-pitfalls-of-viewscoped.html)

除此之外，为了命名约定，我将 your `getAllLanguages`and`getSerialIDsFromOverview`方法重命名为`initAllLanguages`and `initSerialIds`as 以 get 和 set 开头的方法可能会令人困惑，因为它们主要用于 getter 和 setter。

最后，当您`f:ajax`默认使用命令时，`UIInput`将呈现并执行绑定到的 ajax 命令。由于您不`h:selectOneMenu`根据彼此的值刷新菜单，因此您不需要呈现整个表单。对于这种情况，以下内容就足够了：

```
<h:form id="myForm">
                                    <h:panelGrid columns="4">
                                        <h:outputLabel value="Language:" />
                                        <h:selectOneMenu value="#{myBean.language}">
                                            <f:selectItems value="#{myBean.languages}" />
                                            <f:ajax listener="#{myBean.doUpdate}"/>
                                        </h:selectOneMenu>
                                        <h:outputLabel value="SerialID:" />
                                        <h:selectOneMenu value="#{myBean.serialID}">
                                            <f:selectItems value="#{myBean.serialIDs}" />
                                            <f:ajax listener="#{myBean.doUpdate}"/>
                                        </h:selectOneMenu>

                                    </h:panelGrid>
                                </h:form>

@ManagedBean
@ViewScoped
public class MyBean implements Serializable
{

    public static final int PERMISSIONS = 2;
    private List<String> languages;
    private String language;
    private int serialID;
    private List<Integer> serialIDs;

    /**
     * init() method for initializing the bean. Is called after constuction.
     */
    @PostConstruct
    protected void init()
    {
        //public MyBean () {
        System.out.println("lang: " + language);
        System.out.println("serialId: " + serialID);
        System.out.println("init is called");
        initAllLanguages();
        initSerialIds();
        language = "en"; //defaultLanguage 
        serialID = 3;
    }

    public List<String> getLanguages()
    {
        return languages;
    }

    public int getPERMISSIONS()
    {
        return PERMISSIONS;
    }

    public String getLanguage()
    {
        return language;
    }

    public void setLanguage(String language)
    {
        this.language = language;
    }

    public int getSerialID()
    {
        return serialID;
    }

    public void setSerialID(int serialID)
    {
        this.serialID = serialID;
    }

    public List<Integer> getSerialIDs()
    {
        return serialIDs;
    }

    private void initAllLanguages()
    {
        languages = new ArrayList<String>();
        languages.add("sp");
        languages.add("en");
    }

    public void doUpdate()
    {

        System.out.println("doUpdate language " + language);
        System.out.println("doUpdate serialID " + serialID);

    }

    /**
     * Returns a list of all serialIDs present in the overview.
     *
     * @return
     */
    private void initSerialIds()
    {
        serialIDs = new ArrayList<Integer>();
        serialIDs.add(0);
        serialIDs.add(1);
        serialIDs.add(2);
        serialIDs.add(3);
    }
} 
```

干杯

# python - 我需要为我开发的自定义字段编写哪些测试？

> ID：14687281
> 
> 赞同：0
> 
> 时间：2013-02-04T12:58:05.380
> 
> 标签：python, django, django-testing

我开发了一个自定义字段，扩展 ImageField 和这个自定义字段，动态创建 2more 普通字段。现在，我需要为这个自定义字段编写测试吗？

此自定义字段需要进行哪些测试？你能说出它们的名字，以便我对这些测试用例进行编码。我不是在技术上问如何编写测试，我不知道，但我会学习。但是，我想知道的是，我需要在这里测试什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:07:52.833

尝试测试如何使用自定义字段的每种情况。例如，尝试通过它发送不同类型的数据（字符串、整数、空白、不同的图像格式等）并检查它是否符合您的期望。

# c++ - 建立gtest版本

> ID：14687282
> 
> 赞同：17
> 
> 时间：2013-02-04T12:58:07.613
> 
> 标签：c++, linux, googletest

我如何知道我正在使用的项目中使用的是哪个版本的 Gtest？我正在一个linux平台上工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-16T12:55:34.190

`libgtest`或库的源代码`libgtest_main`不包含允许识别其版本（类似`GetGTestVersion ()`或其他）的特殊功能。头文件也没有任何定义的标识符（类似`GTEST_VERSION`或其他）。因此，您无法`Google C++ Testing Framework`在运行时检查用户代码中的版本。

但是维护者提供了作为框架的一部分的特殊脚本[scripts/gtest-conf](https://code.google.com/p/googletest/source/browse/trunk/scripts/gtest-config.in)，其中：

```
...
provides access to the necessary compile and linking
flags to connect with Google C++ Testing Framework, both in a build prior to
installation, and on the system proper after installation.
... 
```

除其他外，该脚本有几个与版本相关的选项：

```
...
Installation Queries:
...
--version the version of the Google Test installation

Version Queries:
--min-version=VERSION return 0 if the version is at least VERSION
--exact-version=VERSION return 0 if the version is exactly VERSION
--max-version=VERSION return 0 if the version is at most VERSION
... 
```

该脚本还包含它的使用示例：

```
Examples:
gtest-config --min-version=1.0 || echo "Insufficient Google Test version."
... 
```

这意味着用户可以在构建时使用脚本测试框架的版本`gtest-config`。

**注意**：

该脚本在配置期间通过[configure.ac](https://code.google.com/p/googletest/source/browse/trunk/configure.ac)`gtest-config`中声明的变量获取框架的实际版本。

```
...
AC_INIT([Google C++ Testing Framework],
        [1.7.0],
        [googletestframework@googlegroups.com],
        [gtest])
... 
```

并在填充的文件中调用`autoconf`以下标识符后：`configure`

```
...
# Identity of this package.
PACKAGE_NAME='Google C++ Testing Framework'
PACKAGE_TARNAME='gtest'
PACKAGE_VERSION='1.7.0'
PACKAGE_STRING='Google C++ Testing Framework 1.7.0'
PACKAGE_BUGREPORT='googletestframework@googlegroups.com'
PACKAGE_URL=''
...
# Define the identity of the package.
PACKAGE='gtest'
VERSION='1.7.0'
... 
```

到目前为止，使用选项[AC_CONFIG_HEADERS](https://www.gnu.org/software/autoconf/manual/autoconf-2.65/html_node/Configuration-Headers.html)编译的框架将此标识符存储到文件`build-aux/config.h`中，并且在编译时可供用户使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T03:12:34.100

gtest 主目录中的文件 CHANGES 包含一个 gtest 版本号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-18T16:46:19.743

如果你已经克隆了[官方 repo](https://github.com/google/googletest)，你可以在 Google Test 的目录中检查最新的 Git 提交（例如使用`git log -n 1`或`git rev-parse HEAD`）并将其与已[发布版本](https://github.com/google/googletest/releases)列表进行比较。

在我的例子中，提交哈希是 ec44c6c1675c25b9827aacd08c02433cccde7780，结果对应于 release-1.8.0。

# php - 从php中的字符串中提取十进制或整数

> ID：14687284
> 
> 赞同：0
> 
> 时间：2013-02-04T12:58:13.337
> 
> 标签：php

例如：

```
$str .= "Additional tax(2.34)";
$str .= "Additional tax(3)"; 
```

谁能帮我从字符串中提取数字。我需要这样的数组格式

```
Array ( [0] => 2.34 [1] => 3 ); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T13:05:55.067

这应该这样做：

```
<?php
    $str = '';
    $str .= "Additional tax(2.34)";
    $str .= "Additional tax(3)";

    if (preg_match_all('/\((\d+(?:\.\d+)?)\)/', $str, $matches) > 0) {
        var_dump($matches[1]);
    }
?> 
```

# android - 将带有共享库的预构建 apk 添加到 AOSP 时出错

> ID：14687287
> 
> 赞同：8
> 
> 时间：2013-02-04T12:58:18.207
> 
> 标签：android, android-ndk, android-source, apk

我尝试将预构建的 APK 添加到我的 Android 构建中。APK 包含多个共享库（*.so 文件）。它编译没有问题，但我仍然从应用程序中收到一个错误，表明找不到库。

为什么会这样？

这是`android.mk`代码：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := apkwithso
LOCAL_SRC_FILES := $(LOCAL_MODULE).apk
LOCAL_REQUIRED_MODULES := libx liby libz
LOCAL_MODULE_CLASS := APPS
LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)
LOCAL_CERTIFICATE := PRESIGNED
include $(BUILD_PREBUILT) 
```

libx、y、z 是我的 libx.so、liby.so 和 libz.so

我还尝试将 .so 从 APK 手动复制到 out lib 目录，但没有成功。

我正在为 Galaxy Nexus Maguro 使用 Android 4.1.2 进行编译。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-01T01:52:52.750

我自己也遇到过这个问题，原因是当 APK 文件包含在构建中时，它们基本上绕过了安装过程。这个安装过程是从 apk 中提取任何共享库并将其放在适当的位置的点，如果这种情况永远不会发生，那么这些库将不可用。这是因为在 AOSP 构建期间从源代码构建的包要么在构建过程中包含其预构建的共享库，要么它们的库也是从源代码构建的，在任何一种情况下，这些库都放在适当的位置。

出于这个原因，除了 apk 模块本身之外，您还应该在同一个 .mk 文件中添加以下内容：

```
include $(CLEAR_VARS)
LOCAL_MODULE := libapkwithso
LOCAL_SRC_FILES := lib/libapkwithso.so # or wherever your so is
LOCAL_MODULE_TAGS := optional
LOCAL_MODULE_SUFFIX := .so
LOCAL_MODULE_CLASS := SHARED_LIBRARIES
include $(BUILD_PREBUILT) 
```

然后加：

```
LOCAL_REQUIRED_MODULES := libapkwithso 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T16:56:15.367

`BUILD_PREBUILT`调用`prebuild.mk`脚本。该脚本的描述如下：

> 复制预建文件的标准规则

它不会告诉您将安装该应用程序。所以我认为这就是您的应用程序找不到库的原因。

解决方案是从包中提取库并将它们与应用程序分开复制。[您可以在此处](https://groups.google.com/d/msg/android-platform/4kRyiFofQkA/qvjlVEPwt2QJ)找到如何执行此操作的详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T17:07:33.427

也可以在添加自定义供应商目录时以`aospSource:destinationOnImage`如下格式指定文件：`device-partial.mk`

```
PRODUCT_COPY_FILES += \
    vendor/your-custom-vendor/your-device/proprietary/libx.so:system/lib/libx.so 
```

您可以在此处添加几乎任何您喜欢的内容（.apk 文件除外），它将被复制到您的图像中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-25T14:16:44.453

我的指示与您的错误无关！但它可能对类似的错误有帮助

如果您尝试使用以下方法复制预构建的 apk：

```
PRODUCT_COPY_FILES += $(LOCAL_PATH)/prebuilt/filename.apk 
```

你得到这个错误：

```
Prebuilt apk found in PRODUCT_COPY_FILES: ... , use BUILD_PREBUILT instead!. Stop. 
```

您可以删除此检查我的修改文件`build/core/MakeFile`并评论以下行：

```
define check-product-copy-files
$(if $(filter %.apk, $(call word-colon, 2, $(1))),$(error \
    Prebuilt apk found in PRODUCT_COPY_FILES: $(1), use BUILD_PREBUILT instead!))
endef 
```

`#`通过在每一行之前插入

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-08T12:51:44.007

也应该为每个单独的库添加多个库到一个 apk 一个附加部分（如 Justin Buser 的回答）。

# mysql - 复杂查询中小表与大表的 MySQL 连接 - 它们有多消耗？

> ID：14687288
> 
> 赞同：0
> 
> 时间：2013-02-04T12:58:19.127
> 
> 标签：mysql, database, performance, database-design, join

假设数据库很大。我对搜索结果页面有一个非常复杂的查询。在下面的查询中，您可以看到我从 user_profile 表中检索了一些属性值 id，例如，教育是一个属性。当我有属性教育的值 id 时，我从数组（php 代码）中检索此 id 的标签名称，其中 id 是数组键。

```
 public static $education        = array(0 => 'No answer', 
                                          1 => 'High school',
                                          2 => 'Some college',
                                          3 => 'In college',
                                          4 => 'College graduate',
                                          5 => 'Grad / professional school',                                    
                                          6 => 'Post grad'); 
```

类似的还有大约 10 个其他属性。否则我的查询会更加复杂，我需要创建表 attribute_id_label 并为每个属性创建另一个连接以检索每个属性的值 id 的标签名称。这意味着额外的 10 个连接可能会降低查询速度。但这仍然是正确的方法。

所以我的问题是：如果表 attribute_id_label 只有大约 500 条记录。由于该表非常小，与该表进行 10 次联接会有什么大的不同吗？即使表 user_profile 非常大并且查询已经很复杂，如您所见？

这是我的查询：

```
 SELECT 
    group_concat(DISTINCT looking.looking_for SEPARATOR ',') as lookingFor, 
    group_concat(DISTINCT photo.photo ORDER BY photo.photo_id DESC SEPARATOR ',') as photos, 
    profile.user_id as userId, 
    url as profileUrl, 
    nickname, 
    avatar.photo, 
    city, 
    ethnicity, 
    education, 
    occupation, 
    income, 
    //and 10 more fields like education, occupation, ethnicity...
    FROM user_profile profile 
    LEFT JOIN user_profile_photo photo ON photo.user_id=profile.user_id 
    LEFT JOIN user_profile_photo avatar ON avatar.photo_id=profile.photo_id 
    INNER JOIN user_profile_looking_for looking ON looking.user_id=profile.user_id 
    LEFT JOIN user_profile_txt txt ON txt.user_id = profile.user_id 
    INNER JOIN place a ON a.place_id=profile.place_id 
    INNER JOIN (SELECT lat, lon FROM place WHERE place_id = :place_id) b ON (3959 * acos( cos( radians(b.lat) ) * cos( radians( a.lat ) ) * cos( radians( a.lon ) - radians(b.lon) ) + sin( radians(b.lat) ) * sin( radians( a.lat ) ) ) ) < :within 
    GROUP BY profile.user_id LIMIT 0,12 
```

大多数属性不会由用户填充，并且由于您建议不可为空，对于那些未填充的属性最好使用什么？我可以为每个属性使用额外的字段没有答案。每个属性都会有额外的价值没有答案。让我们以属性教育和想要为例。属性教育有 id 1，want 是 2。

```
eav_attribute_option 
option_id | attr_id | label 
1 | 1 | No answer 
2 | 1 | High school 
3 | 1 | ...  
4 | 2 | No answer 
5 | 2 | Opportunities 
6 | 2 | ... 
```

但是现在问题重复了，每个属性都没有答案值。但这是避免 NULL 值的方法。我不确定这是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:44:04.940

我已经做了很多这种编码表的工作。它通常对性能的帮助大于伤害。@alxklx 指出了事实：您**必须**确保您的编码表（例如教育）格式正确。那是，

*   Education_id 列必须是 codelist 表中的唯一主键。
*   Education_id 列应该是一个简单的原始数据类型。也就是说，将其设为 an`int`而不是 a`decimal`或`varchar`。
*   当education_id 出现在您的数据表中时，它必须与您在codelist 表中使用的数据类型相同，并且它必须不可为NULL。换句话说，不要在数据表中使用 NULL 来表示缺失数据。

如果你做这些事情，你的 JOIN 看起来就这么简单

```
 FROM people p
  JOIN education e ON p.education_id = e.education_id 
```

RDBMS 的优化器知道它们是简单的 1:1 连接。

话虽如此，在将任何复杂查询放入实时系统之前，都需要检查其功能和性能。

如果您在`people`使用中缺少数据，则education_id（或其他一些attribute_id）为零或一。在每个代码列表表中放置一行，id 为 0 或 1，值为“未知”或“用户没有告诉我们”或任何有意义的值。（您可以根据应用程序的便利性选择零或一。我更喜欢零，但这只是个人喜好。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:16:27.873

您需要考虑的两个非常重要的事情 - 首先是表和第二个索引有多大。如果一个大表上缺少索引，或者字段的数据类型与你加入它的表的字段的数据类型不同——这可能需要几天甚至几个月的时间。就我个人而言，我用巨大的桌子完成了更大的选择，结果非常好，大约 2 秒。使用解释选择来查看查询的状态，如果有问题，请描述您的表，显示它们的索引并进行比较。如果我们不了解您的数据库设计，真的很难给您一个明确的答案......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:05:31.680

一般来说 - 非常非常一般 - 在外键关系上连接 - 即，attribute_id 确实是主键，具有相应的索引，具有索引友好的数据类型（如 INT），您可以将连接视为有效地没有性能角度。

找出答案的最佳方法是尝试并要求 EXPLAIN 告诉您发生了什么。

# .net - PowerShell Invoke-Sqlcmd - 不返回 DataTable 或 DataSet

> ID：14687289
> 
> 赞同：2
> 
> 时间：2013-02-04T12:58:21.670
> 
> 标签：.net, dataset, powershell-2.0, boxing, unboxing

如果我执行以下操作，

```
PS > $a = Invoke-Sqlcmd -ServerInstance <blah> -Database <blah> -Query "SELECT <blah>" 
```

（其中只是有效内容的占位符）

然后返回的类型如下所示：

```
PS > $a.gettype()

IsPublic IsSerial Name                         BaseType        
-------- -------- ----                         --------        
True     True     Object[]                     System.Array 
```

理想情况下，我想将 $a 传递给一个接受 System.Data.DataSet （或类似）形式的 .NET 类型的函数。

有关详细信息，我正在使用 Chad Miller 的 SQLPS 模块，该模块在 Windows 7 下的 PowerShell 2 上包装了早期 SQL Server (SQL Server 2008) 的官方 MS 发行版。

我怀疑这可能与装箱和拆箱有关，但我不清楚。

有没有办法将查询结果作为 System.Data.DataSet 类型返回？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-28T15:39:58.060

从 2016 年 7 月版本的 sqlps 开始，您可以简单地执行以下操作：

```
Invoke-Sqlcmd "select 1 as foo" -OutputAs DataTables 
```

好东西！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:20:18.863

这是一种返回不使用 [dataset] 类型`invoke-sqlcmd`的方法（找不到方法...）

```
$sql="SELECT <blah> FROM <dbo.blah>"
$connectionstring= "Server='myblahserver';database='blah';trusted_connection=yes;" 
$ds = new-object data.dataset 
$da = New-Object system.data.sqlclient.sqldataadapter $sql, $connectionstring 
$null = $da.Fill($ds) 
$ds.ExtendedProperties["sql"]= $sql 
$ds.ExtendedProperties["connectionstring"]= $connectionstring 
$ds 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-09T01:00:37.797

我发现这样做的唯一方法是使用此处提供的代码创建一个用于将数组转换为数据表的函数：

[https://gallery.technet.microsoft.com/scriptcenter/4208a159-a52e-4b99-83d4-8048468d29dd](https://gallery.technet.microsoft.com/scriptcenter/4208a159-a52e-4b99-83d4-8048468d29dd)

加载此函数后，您可以获取 invoke-sqlcmd 的结果并将其传递到函数中，如下所示：

```
$results = Invoke-Sqlcmd -inputfile $scriptpath -ServerInstance $instance
$dt = $results | Out-Datatable 
```

# angularjs - AngularJS 将数据从指令控制器传递到另一个

> ID：14687296
> 
> 赞同：1
> 
> 时间：2013-02-04T12:58:29.047
> 
> 标签：angularjs

我有一个表单，你可以用它来编辑图片库，当然我已经为它创建了一个指令，如下所示：

画廊编辑.html

```
<div>
  <form ng-submit="submit()">
    <label>Headline:</label>
    <input type="text" ng-model="gallery.headline" placeholder="Enter headline here" value=""/>

    <label>channels:</label>
    <channelselect></channelselect>

    <input type="submit"/>
  </form>
</div> 
```

因此，galleryEdit 有另一个指令 channelSelect，您可以使用它选择一个频道（不仅适用于画廊）

频道选择.html

```
<div>
  <select>
      <option value="{{channel.shortCode}}">{{channel.name}}</option>
  </select>
</div> 
```

GalleryEdit 有一个控制器，它为其指令传递数据（称为“gallery”），因此它的 $scope 具有 $scope.gallery 属性，其中包含通道 id：$scope.gallery.channel。由于 channelselect 有不同的控制器，它有它的范围，这个 gallery.channel 不能从那个范围看到。有没有办法将数据从画廊传递到通道控制器/指令？使用 $scope.$parent 不是一个解决方案，因为 channelSelect 不应该知道数据来自哪里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T14:19:35.247

`galleryEdit`您可以在指令范围和指令范围之间设置双向绑定`channelselect`。

在`channelselect`指令的定义中，您可以执行以下操作：

```
directive('channelselect', [function () {
    ...
    scope: {channel: '='}
    ...
}]) 
```

这将为您的指令创建一个**隔离范围**`channelselect`，并允许您使用标签`channel`上的属性`<channelselect>`来设置与其父范围的**双向绑定。**

所以现在你可以这样做`galleryEdit.html`：

```
<channelselect channel="gallery.channel"></channelselect> 
```

现在`channelselect`'s`$scope.channel`将被绑定到`galleryEdit`'s `$scope.gallery.channel`.

有关隔离范围的更多详细信息，请参阅AngularJS[指令](http://docs.angularjs.org/guide/directive)指南的**指令定义对象**部分。

# iphone - 如何在iOS上图像透明部分的imageview后面触摸？

> ID：14687297
> 
> 赞同：2
> 
> 时间：2013-02-04T12:58:42.183
> 
> 标签：iphone, ios, touch, user-interaction, image-masking

在这里，我想在按钮点击时获得按钮动作事件的触摸 - **B**

当点击图像时（在图像的可见区域），点击手势方法将调用

但问题是图像在按钮上，它覆盖了按钮的某些部分我想在该覆盖部分上执行按钮操作事件 - **A**

我已经尝试但无法在覆盖部分上获得按钮操作:(

![图像遮罩](../Images/88f25dc5394a82bacdd67a50a028b405.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:02:03.243

在该部分上放一个透明按钮

**更新**

```
 -(void)singleTapImageview:(UITapGestureRecognizer *)gesture
 {
    NSLog(@"single-tap");
    CGPoint touchLocation = [gesture locationInView:self.imageViewParent];
    float x = touchLocation.x;
    float y = touchLocation.y;

    //Using gesture recogniser you can get the current position of touch

    UIImage* image = imageViewParent.image;
    CFDataRef data = CGDataProviderCopyData(CGImageGetDataProvider(image.CGImage));
    UInt8 *pixels = (UInt8 *)CFDataGetBytePtr(data);

    UIGraphicsBeginImageContext(image.size);
    [image drawInRect:CGRectMake(0, 0, image.size.width, image.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 1);
    CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [UIColor redColor].CGColor);
    int index = ((x + (y * (int)image.size.width)) * 4) + 3;
    CGFloat alpha = pixels[index];
    if (alpha == 0)
    {
        // call button acton
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:30:10.213

您可以通过为重叠按钮编写 hittest 函数来解决该问题。

在 hittest 中，您必须通过检查坐标来决定按下哪个按钮。

[http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/hitTest:withEvent](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/hitTest:withEvent)：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:15:21.297

只需避免以这种方式将按钮与图像重叠即可。看起来很可怕。

对于更长期的解决方案，我建议与 UX 设计师和图形艺术家交朋友。如果你幸运的话，那甚至可能是同一个人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:07:19.763

您可以添加一个新的透明按钮，该按钮将与您的图像部分和现有按钮都重叠，具有框架

`CGRectMake(button.frame.origin.x, button.frame.origin.y, button.frame.size.width, button.frame.size.height);`

# mysql - 记录用户更新

> ID：14687298
> 
> 赞同：3
> 
> 时间：2013-02-04T12:58:44.340
> 
> 标签：mysql, sql, database-design

在制作一个小型社区网站时，我正在寻求一些建议，以了解如何最好地设计一个表，该表将存储数据作为流拉取，例如：

```
User X has added a friend!
User Y has commented on a post!
User X changed their profile picture!
User X has changed their motto! 
```

目前这是我的设置，但在我继续想知道我是否走在正确的轨道上之前

```
update_id  int PK
member_id  int FK
friend_id  int FK
update_action text
update_time   datetime
update_hidden  tinyint 
```

目前，我计划运行一个额外的插入查询，以便在用户执行此操作时使用每个活动更新此表，但不确定这是否是最好的，或者在我的情况下是完成此操作的好方法。感谢您抽出宝贵的时间，我们将不胜感激任何提示或建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:57:05.957

您可以为系统应提供的所有不同活动创建一个表格。

```
CREATE TABLE activity
(
    id MEDIUMINT UNSIGNED PRIMARY KEY UNIQUE NOT NULL AUTO_INCREMENT,
    description NVARCHAR(126) UNIQUE NOT NULL
); 
```

例如：评论过帖子，有新朋友等。

然后根据活动的 id 记录所有发生的活动（以便您可以手动定义代码中应该使用哪个活动）并以某种方式存储它，如下所示：

```
CREATE TABLE activityLog
(
    id MEDIUMINT UNSIGNED PRIMARY KEY UNIQUE NOT NULL AUTO_INCREMENT,
    userId UNSIGNED NOT NULL,
    friendId UNSIGNED DEFAULT NULL,
    acitivityId UNSIGNED NOT NULL,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    hidden TINYINT(1) DEFAULT 0,
    FOREIGN KEY(userId) REFERENCES users(id),
    FOREIGN KEY(friendId) REFERENCES users(id),
    FOREIGN KEY(acitivityId) REFERENCES activity(id)
); 
```

假设您将用户存储在名为“用户”的表中。

只需确保创建新活动、链接活动等很容易。

# c# - 解析 Json Twitter 搜索

> ID：14687311
> 
> 赞同：0
> 
> 时间：2013-02-04T12:59:36.080
> 
> 标签：c#, silverlight, api, windows-phone-7, twitter

我正在尝试解析来自 twitter 的 Json 搜索结果，并且我正在使用 JArray。

问题是这样的，我可以解析某人的用户名并显示结果，但是，当我尝试解析搜索 API 时，什么也没有显示。这是我的代码：

```
private void twitterClient()
{
    WebClient wc = new WebClient();
    wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(DownloadStringCompleted);

    wc.DownloadStringAsync(new Uri("http://search.twitter.com/search.json?q=twitter&rpp=5&include_entities=true&result_type=mixed"));
}

void DownloadStringCompleted(object senders, DownloadStringCompletedEventArgs e)
{
    try {

       JArray twitterContent = JArray.Parse(e.Result);

    }catch(Exception twit_error)
    {
       MessageBox.Show("Cannot parse"); 
    }
 } 
```

如您所见，该 URL 存在，如果我将 url 从搜索更改为某人的用户名，它将解析并显示这些结果。

希望有人可以帮助我或提供一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:08:01.760

提供的 URI 返回的 JSON 不是一个数组，它是一个对象。因此不会

```
JObject.Parse 
```

更合适？

# javascript - 如何在旋转后找到矩形的新坐标

> ID：14687318
> 
> 赞同：2
> 
> 时间：2013-02-04T12:59:50.300
> 
> 标签：javascript, html, canvas

在画布上旋转后矩形的 Y 坐标。如图所示，矩形将在其中心点轴上旋转。旋转和画布恢复后，我想找到新的 X、Y 坐标，如第二张图片所示，在旋转点为 50,50 之前，旋转后它们可能为 62,40。

我发现了[**类似的问题**](https://stackoverflow.com/questions/581837/wpf-getting-new-coordinates-after-a-rotation)，所以我从那里拍摄了图像，但这个问题是针对一些 WPF 的，我的要求是 JS。旋转后如何找到矩形所有角的坐标？

![在此处输入图像描述](../Images/49e3e5d2451bbf3006ddbadc6be395af.png)

![在此处输入图像描述](../Images/d59e06b3042eb5be76b214d732a402ee.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T17:43:41.927

为此，我制作了一个简单的 JavaScript 转换类。

使用它，您可以通过制作变换来变换任意点。

变换画布时，`Transform`以相同的方式变换对象，然后调用`transformPoint(x, y)`以取回适当的坐标。

因此，在您的情况下，调用`transformPoint(50, 50)`将返回 about`[62, 40]`等。

[https://github.com/simonsarris/Canvas-tutorials/blob/master/transform.js](https://github.com/simonsarris/Canvas-tutorials/blob/master/transform.js)

这是一个例子：http: [//jsfiddle.net/b2fEX/](http://jsfiddle.net/b2fEX/)

# android - Android 日历 URI 错误

> ID：14687321
> 
> 赞同：3
> 
> 时间：2013-02-04T12:59:55.837
> 
> 标签：android, calendar, uri

我正在通过我的应用程序在 Google 日历上创建活动。

不知何故，它从一天到另一天都不起作用，当我请求添加事件时它没有插入它。

我收到以下错误：

> 02-04 20:32:36.975: I/CalendarProvider2(20633): 发送通知意图: Intent { act=android.intent.action.PROVIDER_CHANGED dat=content://com.android.calendar }

错误 ：

> 02-04 20:32:36.975：W/ContentResolver(20633)：无法获取类型：content://com.android.calendar（未知 URL 内容：//com.android.calendar）

这是我的代码：

```
//create note in google calendar
                long calID = Long.parseLong(calendarId);
                TimeZone timeZone = TimeZone.getDefault();

                ContentResolver cr = getContentResolver();
                ContentValues values = new ContentValues();
                values.put(Events.DTSTART, startMillis);
                values.put(Events.DURATION, "PT1H");
                values.put(Events.TITLE, content);
                values.put(Events.CALENDAR_ID, calID);
                values.put(Events.EVENT_TIMEZONE, timeZone.getID());
                Uri uri = cr.insert(Events.CONTENT_URI, values);

                // get the event ID that is the last element in the Uri
                idSync = (int) Long.parseLong(uri.getLastPathSegment()); 
```

# r - 在 R 中，如何进行涉及求解微分方程的非线性最小二乘优化？

> ID：14687326
> 
> 赞同：5
> 
> 时间：2013-02-04T13:00:05.103
> 
> 标签：r, optimization, nonlinear-optimization

# 更新可重现的例子来说明我的问题

我最初的问题是“在 R 中实现信任区域反射优化算法”。但是，在生成可重现示例的过程中（感谢@Ben 的建议），我意识到我的问题是在 Matlab 中，一个函数`lsqnonlin`对于我拥有的大多数情况来说，它是好的（意味着不需要选择一个好的起始值，速度很快），而在 R 中，没有这样一个万能的功能。不同的优化算法在不同的情况下效果很好。不同的算法得出不同的解决方案。这背后的原因可能不是R中的优化算法不如Matlab中的trust-region-reflective算法，也可能与R如何处理自动微分有关。这个问题其实源于两年前的工作中断。当时，包**optimx的作者之一 John C Nash 教授**有人建议，Matlab 已经为自动微分做了大量工作，这可能是 Matlab lsqnonlin 比 R 中的优化函数/算法执行得更好的原因。我无法用我的知识弄清楚。

下面的示例显示了我遇到的一些问题（更多可重现的示例即将出现）。要运行示例，首先运行`install_github("KineticEval","zhenglei-gao")`. 您需要安装包**mkin**及其依赖项，并且可能还需要为不同的优化算法安装一堆其他包。

`lsqnonlin`基本上，我正在尝试解决 Matlab 函数文档（[http://www.mathworks.de/de/help/optim/ug/lsqnonlin.html](http://www.mathworks.de/de/help/optim/ug/lsqnonlin.html)）中描述的非线性最小二乘曲线拟合问题。在我的例子中，曲线是由一组微分方程建模的。我将通过示例进行更多解释。我尝试过的优化算法包括：

*   来自`nls.lm`列文堡-马夸特的马克
*   港口从`nlm.inb`
*   L-BGFS-B 从`optim`
*   spg 来自`optimx`
*   `solnp`包**Rsolnp**

我也尝试了其他一些，但没有在这里展示。

## 我的问题总结

*   R 中是否有可靠的函数/算法可供使用，例如`lsqnonlin`在 Matlab 中可以解决我的非线性最小二乘问题类型？（我找不到一个。）
*   对于一个简单的案例，不同的优化达到不同的解决方案的原因是什么？
*   是什么让`lsqnonlin`R 中的功能更胜一筹？信任区域反射算法或其他原因？
*   有没有更好的方法来解决我的问题类型，以不同的方式制定？也许有一个非常简单的解决方案，但我只是不知道。

## 示例 1：一个简单的案例

我会先给出R代码，稍后再解释。 ![示例 1 的拟合图](../Images/acf019a6ece4bcabb97ddd617d5e8ee0.png)

```
ex1 <- mkinmod.full(
  Parent = list(type = "SFO", to = "Metab", sink = TRUE,
                k = list(ini = 0.1,fixed = 0,lower = 0,upper = Inf),
                M0 = list(ini = 195, fixed = 0,lower = 0,upper = Inf),
                FF = list(ini = c(.1),fixed = c(0),lower = c(0),upper = c(1)),
                time=c(0.0,2.8,   6.2,  12.0,  29.2,  66.8,  99.8, 127.5, 154.4, 229.9, 272.3, 288.1, 322.9),
                residue = c( 157.3, 206.3, 181.4, 223.0, 163.2, 144.7,85.0, 76.5, 76.4, 51.5, 45.5, 47.3, 42.7),
                weight = c( 1,  1,   1, 1, 1,   1,  1,     1,     1,     1,     1,     1,     1)),
  Metab = list(type = "SFO",
               k = list(ini = 0.1,fixed = 0,lower = 0,upper = Inf),
              M0 = list(ini = 0, fixed = 1,lower = 0,upper = Inf),
                    residue =c( 0.0,  0.0,  0.0,  1.6,  4.0, 12.3, 13.5, 12.7, 11.4, 11.6, 10.9,  9.5,  7.6),
               weight = c( 1,  1,   1, 1, 1,   1,  1,     1,     1,     1,     1,     1,     1))
  )
ex1$diffs
Fit <- NULL
alglist <- c("L-BFGS-B","Marq", "Port","spg","solnp")
for(i in 1:5) {
  Fit[[i]] <- mkinfit.full(ex1,plot = TRUE, quiet= TRUE,ctr = kingui.control(method = alglist[i],submethod = 'Port',maxIter = 100,tolerance = 1E-06, odesolver = 'lsoda'))
  }
names(Fit) <- alglist
kinplot(Fit[[2]])
(lapply(Fit, function(x) x$par))
unlist(lapply(Fit, function(x) x$ssr)) 
```

最后一行的输出是：

```
L-BFGS-B     Marq     Port      spg    solnp 
5735.744 4714.500 5780.446 5728.361 4714.499 
```

除了“Marq”和“solnp”之外，其他算法都没有达到最优。此外，'spg'方法（还有'bobyqa'等其他方法）对于这种简单的情况需要太多的函数评估。此外，如果我更改起始值并制作`k_Parent=0.0058`（该参数的最佳值）而不是随机选择的`0.1`，“Marq”再也找不到最佳值了！（下面提供的代码）。我也有“solnp”找不到最佳值的数据集。但是，如果我`lsqnonlin`在 Matlab 中使用，对于这种简单的情况，我没有遇到任何困难。

```
ex1_a <- mkinmod.full(
  Parent = list(type = "SFO", to = "Metab", sink = TRUE,
                k = list(ini = 0.0058,fixed = 0,lower = 0,upper = Inf),
                M0 = list(ini = 195, fixed = 0,lower = 0,upper = Inf),
                FF = list(ini = c(.1),fixed = c(0),lower = c(0),upper = c(1)),
                time=c(0.0,2.8,   6.2,  12.0,  29.2,  66.8,  99.8, 127.5, 154.4, 229.9, 272.3, 288.1, 322.9),
                residue = c( 157.3, 206.3, 181.4, 223.0, 163.2, 144.7,85.0, 76.5, 76.4, 51.5, 45.5, 47.3, 42.7),
                weight = c( 1,  1,   1, 1, 1,   1,  1,     1,     1,     1,     1,     1,     1)),
  Metab = list(type = "SFO",
               k = list(ini = 0.1,fixed = 0,lower = 0,upper = Inf),
              M0 = list(ini = 0, fixed = 1,lower = 0,upper = Inf),
                    residue =c( 0.0,  0.0,  0.0,  1.6,  4.0, 12.3, 13.5, 12.7, 11.4, 11.6, 10.9,  9.5,  7.6),
               weight = c( 1,  1,   1, 1, 1,   1,  1,     1,     1,     1,     1,     1,     1))
  )

Fit_a <- NULL
alglist <- c("L-BFGS-B","Marq", "Port","spg","solnp")
for(i in 1:5) {
  Fit_a[[i]] <- mkinfit.full(ex1_a,plot = TRUE, quiet= TRUE,ctr = kingui.control(method = alglist[i],submethod = 'Port',maxIter = 100,tolerance = 1E-06, odesolver = 'lsoda'))
  }
names(Fit_a) <- alglist
lapply(Fit_a, function(x) x$par)
unlist(lapply(Fit_a, function(x) x$ssr)) 
```

现在最后一行的输出是：

```
L-BFGS-B     Marq     Port      spg    solnp 
5653.132 4866.961 5653.070 5635.372 4714.499 
```

我将在这里解释我正在优化的内容。如果您已运行上述脚本并查看曲线，我们将使用具有一阶反应的二室模型来描述曲线。表达模型的微分方程在`ex1$diffs`：

```
 Parent 
                                    "d_Parent = - k_Parent * Parent" 
                                                               Metab 
"d_Metab = - k_Metab * Metab + k_Parent * f_Parent_to_Metab * Parent" 
```

对于这个简单的例子，我们可以从微分方程推导出描述两条曲线的方程。要优化的参数是`$M_0,k_p, k_m, c=\mbox{FF_parent_to_Met} $`带约束的`$M_0>0,k_p>0, k_m>0, 1> c >0$`。

```
$$
\begin{split}
            y_{1j}&= M_0e^{-k_pt_i}+\epsilon_{1j}\\
            y_{2j} &= cM_0k_p\frac{e^{-k_mt_i}-e^{-k_pt_i}}{k_p-k_m}+\epsilon_{2j}
            \end{split}
$$ 
```

因此，我们可以在不求解微分方程的情况下拟合曲线。

```
BCS1.l <- mkin_wide_to_long(BCS1)
BCS1.l <- na.omit(BCS1.l)
indi <- c(rep(1,sum(BCS1.l$name=='Parent')),rep(0,sum(BCS1.l$name=='Metab')))
sysequ.indi <- function(t,indi,M0,kp,km,C)
  {
    y <- indi*M0*exp(-kp*t)+(1-indi)*C*M0*kp/(kp-km)*(exp(-km*t)-exp(-kp*t));
    y
  }
M00 <- 100
kp0 <- 0.1
km0 <- 0.01
C0 <- 0.1
library(nlme)
result1 <- gnls(value ~ sysequ.indi(time,indi,M0,kp,km,C),data=BCS1.l,start=list(M0=M00,kp=kp0,km=km0,C=C0),control=gnlsControl())
#result3 <- gnls(value ~ sysequ.indi(time,indi,M0,kp,km,C),data=BCS1.l,start=list(M0=M00,kp=kp0,km=km0,C=C0),weights = varIdent(form=~1|name))
## Coefficients:
##          M0           kp           km            C 
## 1.946170e+02 5.800074e-03 8.404269e-03 2.208788e-01 
```

这样做，经过的时间几乎为0，达到了最佳状态。然而，我们并不总是有这种简单的情况。该模型可能很复杂，需要求解微分方程。参见示例 2

## 例子2，一个复杂的模型

我很久以前就处理过这个数据集，没有时间自己完成以下脚本的运行。（您可能需要几个小时才能完成跑步。） ![拟合图示例](../Images/6d21f462d9804e6dbfdcb61dba57e1f0.png)

```
data(BCS2)
ex2 <- mkinmod.full(Parent= list(type = "SFO",to = c( "Met1", "Met2","Met4", "Met5"),
                                 k = list(ini = 0.1,fixed = 0,lower = 0,upper = Inf),
                                 M0 = list(ini = 100,fixed = 0,lower = 0,upper = Inf),
                                 FF = list(ini = c(.1,.1,.1,.1),fixed = c(0,0,0,0),lower = c(0,0,0,0),upper = c(1,1,1,1))),
                    Met1 = list(type = "SFO",to = c("Met3", "Met4")),
                    Met2 = list(type = "SFO",to = c("Met3")),
                    Met3 = list(type = "SFO" ),
                    Met4 = list(type = "SFO", to = c("Met5")),
                    Met5 = list(type = "SFO"),
                    data=BCS2)
ex2$diffs
Fit2 <- NULL
alglist <- c("L-BFGS-B","Marq", "Port","spg","solnp")
for(i in 1:5) {
  Fit2[[i]] <- mkinfit.full(ex2,plot = TRUE, quiet= TRUE,ctr = kingui.control(method = alglist[i],submethod = 'Port',maxIter = 100,tolerance = 1E-06, odesolver = 'lsoda'))
  }
names(Fit) <- alglist
(lapply(Fit, function(x) x$par))
unlist(lapply(Fit, function(x) x$ssr)) 
```

这是一个示例，您将看到如下警告消息：

```
DLSODA-  At T (=R1) and step size H (=R2), the    
  corrector convergence failed repeatedly     
  or with ABS(H) = HMIN   
In above message, R = 
[1] 0.000000e+00 2.289412e-09 
```

# 原来的问题

Matlab 优化工具箱求解器中使用的许多方法都基于信任区域。根据 CRAN 任务视图页面，只有包**trust**、**trustOptim**、**minqa** 实现了基于信任区域的方法。但是，`trust`并且`trustOptim`需要梯度和粗麻布。`bobyqa`在**minqa**似乎不是我要找的那个。根据我的个人经验，与我在 R 中尝试的算法相比，Matlab 中的信任区域反射算法通常表现更好。所以我试图在 R 中找到该算法的类似实现。

我在这里问了一个相关的问题：[R function to search for a function](https://stackoverflow.com/questions/13703344/is-there-an-r-function-using-the-same-algorithm-implemented-in-the-lsqnonlin-f)

Matthew Plourde 提供的答案`lsqnonlin`在 Matlab 中给出了一个具有相同函数名称的函数，但没有实现 trust-region-reflective 算法。我编辑了旧的并在这里提出了一个新问题，因为我认为 Matthew Plourde 的回答通常对正在寻找功能的 R 用户非常有帮助。

我再次搜索并没有运气。是否还有一些功能/包可以实现类似的 matlab 功能。如果没有，我想知道是否允许我将 Matlab 函数直接翻译成 R 并用于我自己的目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-04T13:44:47.580

一般来说，当只看你问题的标题时，我会建议简单地使用这个`FME`包。但这不是您问题的重点，成功可能取决于您设置模型的方式。

对于您在示例中显示的问题类型（使用多个转换产品拟合退化数据），我创建了该[`mkin`](http://kinfit.r-forge.r-project.org/mkin_static/)包作为 FME 的便利包装器来解决此类问题。那么让我们看看 mkin 0.9-29 在这些情况下的表现如何。使用 mkin，您只能使用 FME 提供的算法：

## 示例 1

```
library(mkin)

ex1_data_wide = data.frame(
  time= c(0.0, 2.8, 6.2, 12.0, 29.2, 66.8, 99.8, 127.5, 154.4, 229.9, 272.3, 288.1, 322.9),
  Parent = c(157.3, 206.3, 181.4, 223.0, 163.2, 144.7,85.0, 76.5, 76.4, 51.5, 45.5, 47.3, 42.7),
  Metab = c(0.0, 0.0, 0.0, 1.6, 4.0, 12.3, 13.5, 12.7, 11.4, 11.6, 10.9, 9.5, 7.6))

ex1_data = mkin_wide_to_long(ex1_data_wide, time = "time")

ex1_model = mkinmod(Parent = list(type = "SFO", to = "Metab"),
                    Metab = list(type = "SFO"))

algs = c("L-BFGS-B", "Marq", "Port")

times_ex1 <- list()
fits_ex1 <- list()
for (alg in algs) {
  times_ex1[[alg]] <- system.time(fits_ex1[[alg]] <- mkinfit(ex1_model, ex1_data,
                                                             method.modFit = alg))
}

times_ex1
unlist(lapply(fits_ex1, function(x) x$ssr)) 
```

因此，nls.lm 中的 Levenberg-Marquardt 和 Port 算法都找到了您的最小值，而 LM 更快：

```
$`L-BFGS-B`
       User      System verstrichen 
      2.036       0.000       2.051 

$Marq
       User      System verstrichen 
      0.716       0.000       0.714 

$Port
       User      System verstrichen 
      2.032       0.000       2.030 

L-BFGS-B     Marq     Port 
5742.312 4714.498 4714.498 
```

当我告诉 mkin 使用编队分数而不是速率时

```
ex1_model = mkinmod(Parent = list(type = "SFO", to = "Metab"),
                    Metab = list(type = "SFO"), use_of_ff = "max") 
```

并使用您的起始值，

```
for (alg in algs) {
  times_ex1[[alg]] <- system.time(fits_ex1[[alg]] <- mkinfit(ex1_model, ex1_data,
    state.ini = c(195, 0),
    parms.ini = c(f_Parent_to_Metab = 0.1, k_Parent = 0.0058, k_Metab = 0.1),
    method.modFit = alg))
} 
```

所有三种算法都找到相同的解决方案，甚至更快。但是，如果我在调用 mkinfit ( ) 时关闭比率和分数的转换`transform_rates = FALSE, transform_fractions = FALSE`，我会得到

```
L-BFGS-B     Marq     Port 
5653.132 4714.498 5653.070 
```

所以它似乎与参数在内部转换的方式有关（当你给出界限时，FME 也会这样做）。在 mkin 中，我进行了显式的内部参数转换，因此使用默认设置的优化参数不需要界限。

## 示例 2

```
library(mkin)
library(KineticEval) # for the dataset BCS2
data(BCS2)

ex2_data = mkin_wide_to_long(BCS2, time = "time")

ex2_model = mkinmod(Parent = list(type = "SFO", to = paste0("Met", 1:5)),
                    Met1 = list(type = "SFO", to = c("Met3", "Met4")),
                    Met2 = list(type = "SFO", to = "Met3"),
                    Met3 = list(type = "SFO"),
                    Met4 = list(type = "SFO", to = "Met5"),
                    Met5 = list(type = "SFO"))

times_ex2 <- list()
fits_ex2 <- list()

for (alg in algs) {
  times_ex2[[alg]] <- system.time(fits_ex2[[alg]] <- mkinfit(ex2_model, ex2_data,
    method.modFit = alg))
}   

times_ex2
unlist(lapply(fits_ex2, function(x) x$ssr)) 
```

同样，LM 是最快的，但最低的最小值是由 Port 找到的：

```
$`L-BFGS-B`
       User      System verstrichen 
     75.728       0.004      75.653 

$Marq
       User      System verstrichen 
      6.440       0.004       6.436 

$Port
       User      System verstrichen 
     51.200       0.028      51.180 

L-BFGS-B     Marq     Port 
485.3099 572.9635 478.4379 
```

我过去总是推荐 LM，但最近我也发现它有时会陷入局部最小值，这取决于定义不明确的参数的起始值。一个例子是 Schaefer 07 数据，在 mkin 包中[mkinfit 的最后一个单元测试中处理](https://github.com/jranke/mkin/blob/master/inst/unitTests/runit.mkinfit.R)过，称为`test.mkinfit.schaefer07_complex_example`.

希望这是有用的，亲切的问候，

约翰内斯

PS：当我注意到您在 github 上的 KineticEval 包中添加了一个纯 R 实现的信任区域反射优化作为函数 lsqnonlin() 并且我正在搜索信任区域反射时，我发现了这个问题。

# c++ - EXC_BAD_ACCESS 与 box2d 和 b2body

> ID：14687330
> 
> 赞同：0
> 
> 时间：2013-02-04T13:00:11.587
> 
> 标签：c++, objective-c

我得到一个 EXC_BAD_ACCESS 从 b2fixture 访问 b2body。这可能是由于我缺乏 c++ 知识，因为我是一个混合 c++ 的 ObjC 开发人员（刚从 box2d 开始）：

```
Myb2dUserData.h
@interface Myb2dUserData : NSObject {
    MyContact *climbingHoldContact;  
}

@property (nonatomic, assign) MyContact *climbingHoldContact;

Myb2dUserData.mm
    b2Fixture *fixA = climbingHoldContact->fixtureA;
    b2Body *bodA = fixA->GetBody(); //EXC_BAD_ACCESS 
```

我在 b2ContactListener 中分配了 crawlHoldContact，这几乎是这段代码的副本： [http ://www.raywenderlich.com/505/how-to-create-a-simple-breakout-game-with-box2d-and- cocos2d-tutorial-part-22](http://www.raywenderlich.com/505/how-to-create-a-simple-breakout-game-with-box2d-and-cocos2d-tutorial-part-22)

```
void MyContactListener::BeginContact(b2Contact* contact) {

    MyContact myContact = { contact->GetFixtureA(), contact->GetFixtureB() };
    _contacts.push_back(myContact);

    b2Fixture *fixtureA = contact->GetFixtureA();
    b2Body *bodyA = fixtureA->GetBody();
    Myb2dUserData *userDataA = (Myb2dUserData *)bodyA->GetUserData();
    bodyHoldUD.climbingHoldContact = &myContact; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:34:51.497

这个变量 ,`myContact`是本地的`BeginContact`：

```
MyContact myContact = { contact->GetFixtureA(), contact->GetFixtureB() }; 
```

但是在这里，您正在存储一个指向它的指针以供将来参考：

```
bodyHoldUD.climbingHoldContact = &myContact; 
```

`BeginContact`返回时，该变量`myContact`不再存在，当您稍后尝试访问它时，`fixtureA`您的计算机会说`EXC_BAD_ACCESS`，因为那里的任何东西都被其他东西覆盖了。
这与返回指向局部变量的指针是相同的问题。

请注意，您构建的示例将`MyContact`s 存储在向量中，而不是`MyContact*`s。

您应该能够通过将`climbingHoldContact`成员更改为不是指针来解决这个问题。

# ruby-on-rails - Rails Gem 安装但不安装命令（包？） - Rubber Gem

> ID：14687336
> 
> 赞同：0
> 
> 时间：2013-02-04T13:00:34.267
> 
> 标签：ruby-on-rails, amazon-ec2, gem

我正在尝试安装橡胶 gem 以将我的应用程序部署到 Amazon EC2。Rubber 安装得很好，但是当我运行 Rubber -h 来查看已安装的命令时，我只得到 config.h 。这是一个打印屏幕来演示：

![在此处输入图像描述](../Images/5a8d46968ba0c1296246ac0c136708b7.png)

我已经浪费了大约三天的时间，所以非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:46:55.527

这可能为时已晚，但我遇到了同样的问题，我通过键入以下内容在控制台中手动安装 Capistrano gem 绕过了它。

```
gem install capistrano 
```

我能够进入下一步。希望这有帮助。

# jquery - jQuery Cycle 插件寻呼机错误

> ID：14687339
> 
> 赞同：0
> 
> 时间：2013-02-04T13:00:51.367
> 
> 标签：jquery, plugins, cycle

我正在尝试输入一个 jquery Cycle 来控制整个网站的 4 个不同的周期。它们都有不同的 ID 标签，但是，寻呼机控件 div 出现了 4 次。这是我的jQuery：

```
$('#homeslide, #hairslide, #panamaslide, #chawtonsslide') 
.cycle({ 
fx: 'fade', 
speed: '1000', 
timeout: '8000', 
next: '#next',
prev: '#prev',
cleartypeNoBg: 'true',
pager: '#controls'
}); 
```

HTML：

```
<div id="banner-container">
    <div id="prev"></div>
    <div id="next"></div>
    <div id="controls"></div>
    <div id="homeslide">
        <img src="template/banner1.jpg" alt="Banner Image 1" />
        <img src="template/banner2.jpg" alt="Banner Image 2" />
        <img src="template/banner3.jpg" alt="Banner Image 3" />
        <img src="template/banner4.jpg" alt="Banner Image 4" />
        <img src="template/banner5.jpg" alt="Banner Image 5" />
        <img src="template/banner6.jpg" alt="Banner Image 6" />
        <img src="template/banner7.jpg" alt="Banner Image 7" />
    </div>
    <div id="hairslide">
        <img src="template/banner2.jpg" alt="Banner Image 1" />
        <img src="template/banner2.jpg" alt="Banner Image 2" />
        <img src="template/banner3.jpg" alt="Banner Image 3" />
        <img src="template/banner4.jpg" alt="Banner Image 4" />
        <img src="template/banner5.jpg" alt="Banner Image 5" />
        <img src="template/banner6.jpg" alt="Banner Image 6" />
        <img src="template/banner7.jpg" alt="Banner Image 7" />
    </div>
    <div id="panamaslide">
        <img src="template/banner2.jpg" alt="Banner Image 1" />
        <img src="template/banner2.jpg" alt="Banner Image 2" />
        <img src="template/banner3.jpg" alt="Banner Image 3" />
        <img src="template/banner4.jpg" alt="Banner Image 4" />
        <img src="template/banner5.jpg" alt="Banner Image 5" />
        <img src="template/banner6.jpg" alt="Banner Image 6" />
        <img src="template/banner7.jpg" alt="Banner Image 7" />
    </div>
    <div id="chawtonsslide">
        <img src="template/banner2.jpg" alt="Banner Image 1" />
        <img src="template/banner2.jpg" alt="Banner Image 2" />
        <img src="template/banner3.jpg" alt="Banner Image 3" />
        <img src="template/banner4.jpg" alt="Banner Image 4" />
        <img src="template/banner5.jpg" alt="Banner Image 5" />
        <img src="template/banner6.jpg" alt="Banner Image 6" />
        <img src="template/banner7.jpg" alt="Banner Image 7" />
    </div>
</div> 
```

![在此处输入图像描述](../Images/87ac5a64e966c4797a1bf99bbc7d5860.png)

除了显示 4 个寻呼机 div 之外，它还可以工作。我打算尝试 $.each 计数，但由于他们都需要 ID，我认为我做不到。值得注意的是，这些不同的图像块是通过我们的 CMS 控制的，并且每页只显示某些图像块。示例：home.htm 仅显示 #homeslide

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:24:16.973

为什么不使用 .each() 函数将寻呼机控件动态添加到每个循环。

```
$.each( $('#homeslide, #hairslide, #panamaslide, #chawtonsslide'), function(i, e){
    $(e).before('<div id="nav' + i + '">').cycle({
        // other options here
        pager:  '#nav' + i
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:26:08.243

如何为每个幻灯片添加一个“幻灯片”类而不是根据类调用每个类似，这样你就可以保留你的 id

[http://www.malsup.com/jquery/cycle/pager-double.html](http://www.malsup.com/jquery/cycle/pager-double.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T11:09:40.300

```
$('#homeslide') 
    .cycle({ 
    fx: 'scrollVert', 
    speed: '1000', 
    timeout: '8000', 
    pager: '#pager',
    pagerAnchorBuilder: function(i) {
            return '<a href="#"></a>';
    },
    next: '#next',
    prev: '#prev',
    cleartypeNoBg: 'true'
});

$('#hairslide') // can add other divs here that require to use the same pager
    .cycle({ 
    fx: 'fade', 
    speed: '1000', 
    timeout: '8000',
    next: '#next',
    prev: '#prev',
    pager: '#pager',
    pagerAnchorBuilder: function(i) {
            return $('#pager a:eq('+i+')');
    },
    cleartypeNoBg: 'true',
}); 
```

# java - Slick2D 音乐无法正常工作

> ID：14687340
> 
> 赞同：0
> 
> 时间：2013-02-04T13:00:59.133
> 
> 标签：java, lwjgl, slick2d

我目前正在测试 Slick2D，这就是我编写 Pong 游戏的原因，此外，在这个 PongGame 中，您可以选择 ./music 文件夹中的音乐文件

当我通过 Eclipse 运行它时，一切正常。当我导出它时，使用文件夹中的所有本机和库运行它，它也会启动，但音乐菜单不起作用（当我选择音乐时它会崩溃）

您可以在以下位置看到代码： [https ://bitbucket.org/JohnnyCrazy/pingpong/src/f2fd635ccfef/src/me/Johnny/Slick2D?at=master](https://bitbucket.org/JohnnyCrazy/pingpong/src/f2fd635ccfef/src/me/Johnny/Slick2D?at=master)

```
Error: Mon Feb 04 13:47:05 CET 2013 ERROR:OpenAL error: Invalid
Operation (40964) org.lwjgl.openal.OpenALException: OpenAL error:
Invalid Operation (40964)
        at org.lwjgl.openal.Util.checkALError(Util.java:64)
        at org.lwjgl.openal.AL10.alDeleteBuffers(AL10.java:1097)
        at org.newdawn.slick.openal.AudioImpl.release(AudioImpl.java:56)
        at org.newdawn.slick.Music.release(Music.java:424)
        at me.Johnny.Slick2D.Slick2D.setMusic(Slick2D.java:57)
        at me.Johnny.Slick2D.MusikState.update(MusikState.java:108)
        at org.newdawn.slick.state.StateBasedGame.update(StateBasedGame.java:278)
        at org.newdawn.slick.GameContainer.updateAndRender(GameContainer.java:678)
        at org.newdawn.slick.AppGameContainer.gameLoop(AppGameContainer.java:456)
        at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:361)
        at me.Johnny.Slick2D.Slick2D.main(Slick2D.java:40) Mon Feb 04 13:47:05 CET 2013 ERROR:Game.update() failure - check the game code.
  org.newdawn.slick.SlickException: Game.update() failure - check the
  game code.
         at org.newdawn.slick.GameContainer.updateAndRender(GameContainer.java:684)
         at org.newdawn.slick.AppGameContainer.gameLoop(AppGameContainer.java:456)
         at org.newdawn.slick.AppGameContainer.start(AppGameContainer.java:361)
         at me.Johnny.Slick2D.Slick2D.main(Slick2D.java:40) 
```

我不明白为什么它在 Eclipse 中工作并且导出它没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:22:54.397

的构造函数的 JavaDocs[`Music(String)`](http://slick.cokeandcode.com/javadoc/org/newdawn/slick/Music.html#Music%28java.lang.String%29)并不完全清楚它如何解释`String`. 采用 a 的 J2SE 方法`String`通常假定它代表`File`. 如果是这样，那也是失败的原因。

通常，这些类型的资源在应用程序时成为[嵌入式资源](/questions/tagged/embedded-resource "显示标记为“嵌入式资源”的问题")。建成。嵌入式资源必须由 访问`URL`。查看[嵌入的资源信息。有关](https://stackoverflow.com/tags/embedded-resource/info)形成`URL`.

# ios - 添加带有简单动画的子视图时使用 NSLayoutConstraints

> ID：14687343
> 
> 赞同：1
> 
> 时间：2013-02-04T13:01:05.690
> 
> 标签：ios, objective-c, nslayoutconstraint

我正在尝试向我的菜单项（messageViewMenu）添加一个视图（messageView），以便当点击菜单项时，这个新视图会添加到它的正上方，并且它们都一个接一个地向下滑动屏幕 - Evernote 5.1 .2 有类似的东西。

我正在使用 NSLayoutConstraint 将新视图附加到我认为是菜单项的顶部。然后，我将菜单项的现有垂直约束设置为标题 UIView (_headerMessageConstraint) 以增长到 300 大小。我希望新视图的后缘垂直附加到菜单项的前缘，并且它们在屏幕上向下滑动一起。

但是，新视图会随着菜单项向下滑动，然后在其后面继续滑动，直到看起来顶部边缘对齐。

谁能告诉我哪里出错了？在此先感谢您的帮助

史蒂夫

编辑。自从我发布这篇文章以来，我了解到当我添加新视图（MessageViewController 的 mvc.view）时，它默认放置在 0,0。我不希望它在 0,0，所以似乎我必须在我希望它出现的位置为它设置一个框架 - 使用自动布局时这似乎是错误的 - 或者将此新视图添加到子视图并为子视图的高度设置动画，也许......虽然我可能会在这里谈论自己进入一个黑暗的地方。

```
MessageViewController *mvc = [[MessageViewController alloc] init];
[mvc.view setTranslatesAutoresizingMaskIntoConstraints:NO];
UIView *messageView = mvc.view;
[self.view addSubview:messageView];

UIView *messageViewMenu = self.messageViewMenu;

NSDictionary* views = NSDictionaryOfVariableBindings(messageViewMenu, messageView);

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[messageView]|"
                                                                    options:0
                                                                    metrics:nil
                                                                    views:views]];

[self.view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[messageView(200)]-[messageViewMenu]"
                                                                    options:0
                                                                    metrics:nil
                                                                    views:views]];
[self.view layoutSubviews]; // UPDATE - THIS IS THE CODE THAT WAS MISSING - IT DISPLAYS THE SUBVIEWS BEFORE THE ANIMATION STARTS. THANKS @RDELMAR 

[UIView animateWithDuration:0.9 animations:^{
                        _headerMessageConstraint.constant = 200;
                        [self.view layoutIfNeeded];
                        } completion:^(BOOL finished){}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T15:49:25.240

我不确定您到底要做什么，但是您需要在动画块上方添加 [self.view layoutSubviews] 行。在您制作动画之前，主视图需要在其起始位置布局您的新视图。

如果您希望 2 个视图彼此重叠且没有空间，您还需要删除“V:[messageView(200)]-[messageViewMenu]”中的破折号。

# rpm - Puppet-Agent 无法从 YUM-Repo 解析 RPM

> ID：14687344
> 
> 赞同：0
> 
> 时间：2013-02-04T13:01:07.823
> 
> 标签：rpm, puppet, yum

我正在尝试从我们自己的 YUM 存储库中额外解决 RPM。我在“/etc/yum.repos.d/”中声明了额外的 Yum-Repo，并运行命令“yum install JDK-jdk.x86_64”，rpm 安装成功。

但是当使用 Puppet 的以下清单时，Puppet 似乎没有查看声明的附加 YUM 存储库：

```
class tomcat7_rhel {
  package { "sun-JDK-1.6.0":
    ensure => latest,
    require => Yumrepo["JDK-jdk.x86_64"]    
    #require => Package["JDK-jdk.x86_64"]    
  }
} 
```

运行代理：

```
puppet agent --test --environment det 
```

错误如下所示：

> 错误：无法从远程服务器检索目录：服务器上的错误 400：无效关系：Package[sun-JDK-1.6.0] { require => Yumrepo[JDK-jdk.x86_64] }，因为 Yumrepo[JDK-jdk.x86_64 ] 似乎不在目录中警告：未在失败的目录上使用缓存错误：无法检索目录；跳过跑步

目前我完全被卡住了，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:09:02.723

尝试在软件包安装时要求 yum 更新，以确保您获得最新添加：

```
exec {"yum_update":
  command => "yum update -y",
}

package { "sun-JDK-1.6.0":
    ensure => latest,
    require => [ Yumrepo["JDK-jdk.x86_64"], Exec["yum_update"] ],
} 
```

# php - 是否有任何 apache 配置来增强网络爬取性能？

> ID：14687350
> 
> 赞同：0
> 
> 时间：2013-02-04T13:01:38.683
> 
> 标签：php, zend-framework, curl, web-scraping, web-crawler

我有一个 php 网络爬虫，当在 localhost 上运行时，它经常在几页后冻结，让我的网络浏览器显示加载标志，仅此而已。

我已经检查了我的代码，它可能有一个错误.. 虽然在过去几个小时查看它之后，我已经准备好探索其他可能性。

当我的爬虫运行时，它会随着不同进程的开始和结束而转储信息。我也经常flush(); 以确保浏览器向他们显示 ost 最新消息。（这为浏览器提供了控制台类型的外观）。

我现在研究 Apache 配置的原因是因为我的程序并不总是冻结在同一个地方。有时它在搜索要添加到队列的新 URL 的“a”标签时冻结，有时它在下载 xhtml 数据本身时冻结，此时：

```
 private function _getXhtml() {
        $curl = curl_init();
        if (!$curl) {
            throw new Exception('Unable to init curl. ' . curl_error($curl));
        }
        curl_setopt($curl, CURLOPT_URL, $this->_urlCurrent);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
        // Faking user agent
        curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)');
        $xhtml = curl_exec($curl);
        if (!$xhtml) {
            $xhtml = null;
            echo 'PROBLEM' . $this->_urlCurrent . '<br />';
            //throw new Exception('Unable to read XHTML. ' . curl_error($curl));
        }
        curl_close($curl);
        return $xhtml;
    } 
```

除此之外，我想知道是否可以对 apache 的配置文件或 PHP.ini 进行任何修改以增强 localhost 环境以进行 Web 抓取？

任何帮助，将不胜感激。

更新：

我相信我已将其范围缩小到 Zend_Dom_Query。这就是为什么我的应用程序在不同阶段崩溃的原因（有时当它为爬行列表抓取一个 href 时，有时当它在页面中寻找某些东西以“收获”时）

这是我的输出示例。

**在这里，应用程序在第一页崩溃..同时获取一个 url。**

```
 string(25) "Scraping page number 0..." 
string(9) "Mining..." 
string(15) "Getting <a>...." 
string(24) "Finished getting <a>...." 
string(20) "Getting <a href>...." 
string(43) "Mining page http://www.a-site.co.uk/ ..." 
string(17) "New page found..." 
string(18) "Page confirmed...." 
string(29) "Finished Getting <a href>...." 
string(20) "Getting <a href>...." 
string(43) "Mining page http://www.a-site.co.uk/ ..." 
string(29) "Finished Getting <a href>...." 
string(20) "Getting <a href>...." 
```

**在这里，应用程序在提取元素时失败**

```
string(25) "Scraping page number 5..."
string(9) "Mining..."

//This bit loops for around 70 URLS
string(15) "Getting <a>...."
string(24) "Finished getting <a>...."
string(20) "Getting <a href>...."
string(48) "Mining page http://www.a-site.org ..."
string(29) "Finished Getting <a href>...."
//end loop

string(70) "Harvesting http://www.a.site.org/a-url-path/..."
string(19) "Harvesting html element..." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:16:44.050

该脚本看起来不错，因此可能是您正在抓取的网站尝试添加

```
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT ,5); //timeout in seconds.
curl_setopt($curl, CURLOPT_TIMEOUT, 30); //timeout in seconds. 
```

你也可以尝试让你的爬虫看起来更像一个真正的浏览器。我个人使用我自己的头文件，我可以使用 fiddler2 找到，然后在 curl 中重新创建它们。

# android - 甚至 Activity 都声明了 im Manifest 但它显示异常

> ID：14687356
> 
> 赞同：0
> 
> 时间：2013-02-04T13:02:06.027
> 
> 标签：android, android-manifest, declaration

我在清单文件中声明了我的活动，但它对我显示异常

```
<activity android:name="BuyClick"></activity> 
```

我没有得到我的清单文件发生了什么

例外情况如下

```
 02-04 12:33:52.161: E/AndroidRuntime(1260): FATAL EXCEPTION: main
                           02-04 12:33:52.161: E/AndroidRuntime(1260): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.kt.pos/com.kt.pos.BuyClick}; have you declared this activity in your AndroidManifest.xml?
                           02-04 12:33:52.161: E/AndroidRuntime(1260):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1541)
                            02-04 12:33:52.161: E/AndroidRuntime(1260):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
                            02-04 12:33:52.161: E/AndroidRuntime(1260):     at android.app.Activity.startActivityForResult(Activity.java:3351)
                             02-04 12:33:52.161: E/AndroidRuntime(1260):    at android.app.Activity.startActivityForResult(Activity.java:3312)
                             02-04 12:33:52.161: E/AndroidRuntime(1260):    at android.app.Activity.startActivity(Activity.java:3522)
                             02-04 12:33:52.161: E/AndroidRuntime(1260):    at android.app.Activity.startActivity(Activity.java:3490)
                              02-04 12:33:52.161: E/AndroidRuntime(1260):   at com.kt.pos.POSMainActivity$1.onFinish(POSMainActivity.java:21)
                             02-04 12:33:52.161: E/AndroidRuntime(1260):    at android.os.CountDownTimer$1.handleMessage(CountDownTimer.java:118)
                          02-04 12:33:52.161: E/AndroidRuntime(1260):   at android.os.Handler.dispatchMessage(Handler.java:99)
                           02-04 12:33:52.161: E/AndroidRuntime(1260):  at android.os.Looper.loop(Looper.java:137)
                          02-04 12:33:52.161: E/AndroidRuntime(1260):   at android.app.ActivityThread.main(ActivityThread.java:4745)
                         02-04 12:33:52.161: E/AndroidRuntime(1260):    at java.lang.reflect.Method.invokeNative(Native Method)
                        02-04 12:33:52.161: E/AndroidRuntime(1260):     at java.lang.reflect.Method.invoke(Method.java:511)
                       02-04 12:33:52.161: E/AndroidRuntime(1260):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
                        02-04 12:33:52.161: E/AndroidRuntime(1260):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
                        02-04 12:33:52.161: E/AndroidRuntime(1260):     at dalvik.system.NativeStart.main(Native Method)
                    02-04 12:38:52.231: I/Process(1260): Sending signal. PID: 1260 SIG: 9 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:05:46.050

它应该是

```
<activity android:name=".BuyClick"></activity> 
```

或者

```
<activity android:name="com.kt.pos.BuyClick"></activity> 
```

它需要使用包名完全限定或以“.”开头。如果它在主包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:05:32.030

尝试这个 ：

```
<activity android:name="com.kt.pos.BuyClick"></activity> 
```

在清单中定义它们之前，请始终将您的包名称与活动一起使用。

# mysql - 我的 SQL 查询无法在多个房间预订中获得低成本房间

> ID：14687358
> 
> 赞同：1
> 
> 时间：2013-02-04T13:02:24.490
> 
> 标签：mysql, sql

Bellow 是我的“房间”mysql 表。（这是我在此处创建的示例表。）

![在此处输入图像描述](../Images/42aea2d6dc8dc23b47df4af224e57b9c.png)

我想显示低价客房，以防多间客房预订。例如：用户选择了两个房间，一个成人在第一个房间，2 个成人在第二个房间。现在我的结果应该如下

![在此处输入图像描述](../Images/6ee33bb7cb5376b8a78d8ec7abbf238a.png)

我的查询是： **SELECT * FROM rooms WHERE hotel_code="100" GROUP BY Adult+child 按成本 ASC 排序**

它不工作。我无法通过此查询获得预期结果。请让我知道解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:13:17.263

试试这个：

```
SELECT  r.*
FROM Rooms r
INNER JOIN
(
  SELECT 
    adult, child, MIN(Cost) MinCost
  FROM Rooms
  WHERE hotel_code = 100
  GROUP BY  adult, child
) m ON r.adult = m.adult AND r.child = m.child
  AND r.cost = m.mincost
ORDER BY r.id
LIMIT 2; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/b341f/4)

这会给你：

```
| ID | HOTEL_CODE |    ROOM_TYPE | ADULT | CHILD | COST |
---------------------------------------------------------
|  2 |        100 | Single Delux |     1 |     0 |   20 |
|  3 |        100 | Twin Stadard |     2 |     0 |   25 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:43:20.207

用（不太可扩展的）扩展来扩展 Mahmoud 的思想......

```
SELECT a.*
  FROM
     ( SELECT x.* 
         FROM rooms x 
         JOIN 
            ( SELECT hotel_code
                   , adult
                   , child
                   , MIN(cost) min_cost 
                FROM rooms 
               GROUP 
                  BY hotel_code
                   , adult
                   , child
            ) y 
           ON y.hotel_code = x.hotel_code 
          AND y.adult = x.adult 
          AND y.child = x.child 
          AND y.min_cost = x.cost
     ) a
  LEFT
  JOIN
     ( SELECT x.* 
         FROM rooms x 
         JOIN 
            ( SELECT hotel_code
                   , adult
                   , child
                   , MIN(cost) min_cost 
                FROM rooms 
               GROUP 
                  BY hotel_code
                   , adult
                   , child
            ) y 
           ON y.hotel_code = x.hotel_code 
          AND y.adult = x.adult 
          AND y.child = x.child 
          AND y.min_cost = x.cost
     ) b
    ON b.hotel_code = a.hotel_code
   AND b.adult = a.adult
   AND b.child = a.child
   AND b.cost = a.cost
   AND b.id < a.id
 WHERE b.id IS NULL; 
```

# c++ - Objective-c iOS 中的 QR 生成器

> ID：14687361
> 
> 赞同：1
> 
> 时间：2013-02-04T13:02:41.723
> 
> 标签：c++, ios, objective-c, xcode, qr-code

我想在 iOS 应用程序中实现 QR 编码器。我已经找到了解决方案..

[iPhone 二维码编码器](https://github.com/myang-git/QR-Code-Encoder-for-Objective-C)

但是，这是使用 C++ 编译器，需要更好的解决方案。

我找到了这个：

[Objective-C QR 编码器](https://github.com/lightforce/qrcode)

然而，这个程序是为 OS X 而不是 iOS 开发的。

有没有人可能有一个可行的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-11T04:41:01.743

iOS 7 提供了用于生成二维码的内置类 [https://github.com/shu223/iOS7-Sampler](https://github.com/shu223/iOS7-Sampler)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-29T11:02:47.667

我最近评估了不同的条码编码器 SDK，以在 iPhone 应用程序中生成 EAN-13、DataMatrix 和 Interleaved 2of5 条码。这些是我能找到的：

OnBarcode
[http://www.onbarcode.com](http://www.onbarcode.com)
商业，二进制库（不支持 armv64）

Zint
[http://sourceforge.net/projects/zint/](http://sourceforge.net/projects/zint/)
GPL-licensed，C 库
SDK 的最佳 API，但许可证使其不适合封闭源代码的 iPhone 应用程序

Cocoa-Touch-Barcodes
[https://github.com/netshade/Cocoa-Touch-Barcodes](https://github.com/netshade/Cocoa-Touch-Barcodes)
BSD 许可，Objective-C 库
无 ARC 支持，无 DataMatrix 编码器

RSBarcodes
[https://github.com/yeahdongcn/RSBarcodes](https://github.com/yeahdongcn/RSBarcodes)
MIT 许可，Objective-C 库
No DataMatrix 和 Interleaved2of5 编码器

iOS-QR-Code-Encoder
[https://github.com/moqod/iOS-QR-Code-Encoder](https://github.com/moqod/iOS-QR-Code-Encoder)
MIT-licensed, Objective-C library
仅支持 QR-Codes

QR-Code-Encoder-for-Objective-C
[https://github.com/myang-git/QR-Code-Encoder-for-Objective-C](https://github.com/myang-git/QR-Code-Encoder-for-Objective-C)
Apache-licensed, Objective-C/C++ library
只支持 QR-Codes

libdmtx
[http://www.libdmtx.org](http://www.libdmtx.org)
Simplified BSD-licensed, C library (Cocoa-Wrapper available)
只支持DataMatrix

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:17:01.577

你可以使用 zint [http://sourceforge.net/projects/zint/](http://sourceforge.net/projects/zint/) 它是用 C 编写的，你可以在 Objective C 中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T15:27:55.630

使用这个： [https](https://github.com/angrauel/QR-Code-Encoder-for-Objective-C) ://github.com/angrauel/QR-Code-Encoder-for-Objective-C （针对 IOS 6 更新）

如果您在放入设备时遇到错误：

转到 Build Settings -> Architectures 然后删除默认值“ `Standard (armv7, armv7s)`”并添加两个新值：“ `armv6`”；“ `armv7`”。

这应该可以解决所有问题。

# tf-cli - 获取 TFS 2010 中的所有标签

> ID：14687362
> 
> 赞同：0
> 
> 时间：2013-02-04T13:02:46.427
> 
> 标签：tf-cli

是否可以在嵌套文件夹中递归获取所有标签？

当做类似的事情时：

```
tf history *  /recursive 
```

在标签选项卡中我看到

> “参数 filterItem 不能包含通配符”

我尝试了各种不同的选项，但没有运气，我找不到在 msdn 中递归地做标签的参考。

编辑：为了详细说明我的问题的背景，我们使用标签来标记修补程序版本。所以发布是一个分支，而一个修补程序是一个标签。我想获得整个项目的所有修补程序标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T10:03:16.797

切换到您感兴趣的目录并执行此操作`tf.exe labels`，这将向您显示包含该目录的所有标签。您可以通过使用获取有关一个标签的更多详细信息`tf.exe /format:detailed labelname`。

# html - 统一码在在 Safari 5.1 (Windows) 上未正确呈现

> ID：14687364
> 
> 赞同：0
> 
> 时间：2013-02-04T13:03:01.150
> 
> 标签：html, windows, unicode, safari

在 Safari 5.1/Windows XP 中，按钮元素中的 unicode 箭头未显示。`<span>`工作正常。

```
<span>▼&lt;/span>
<button>▼&lt;/button> 
```

截图： [http ://cl.ly/image/1T0J1X10141A](http://cl.ly/image/1T0J1X10141A)

小提琴：http: [//jsfiddle.net/christianhaller/nTvjU/1/](http://jsfiddle.net/christianhaller/nTvjU/1/)

有什么提示可以解决这个问题吗？

更多信息：同一操作系统上的 IE8 的 unicode 字符没有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:31:42.400

这是字体问题。它在 Windows 7 上的 Safari 5.1.7 中不存在，但我能够在虚拟 Windows XP 中的 Safari 5.1.7 中重现它。代替三角形字符，出现一个小矩形，这是缺少字形的常见指示符。

显然，在 Windows XP 上，Safari 使用某些固定字体（似乎是 Microsoft Sans Serif）作为`button`元素，并且在遇到该字体中不存在的字符时无法查找其他字体。幸运的是，这可以通过指定包含它的字体来解决。如果您`button`通常更喜欢在 Microsoft Sans Serif 中呈现元素，则在 CSS 中指定备用字体就足够了：

```
button { font-family: Microsoft Sans Serif, Arial } 
```

[相当多的字体](http://www.fileformat.info/info/unicode/char/25bc/fontsupport.htm)包含三角形字符，因此有很多选择。您可能希望将其中一些作为`button`元素的主要字体，而不仅仅是作为后备字体。

# c++ - 如何在 LLVM 模块中插入函数

> ID：14687367
> 
> 赞同：8
> 
> 时间：2013-02-04T13:03:08.330
> 
> 标签：c++, llvm

我正在编写一个 LLVM 通行证，我在其中通过调用`llvm::CloneFunction`. 现在我还想在模块中插入这些功能。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T13:31:12.617

*   `Function::Create`使用或通过其他方式创建新功能。A`Function`的构造函数接受插入新函数的模块。
*   [使用CloneFunctionInto](http://llvm.org/docs/doxygen/html/CloneFunction_8cpp_source.html)将一个函数克隆到该新函数中，或者只是复制您需要的 BB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-11T11:25:05.207

`CloneFunction`会自动将新函数插入到旧函数的模块中。从[doxygen](https://llvm.org/doxygen/namespacellvm.html#aedeb89fa4ceb608d9d49bcd53ddcd2c1)：

> 返回指定函数的副本并将其添加到该函数的模块中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-05T06:26:59.847

您可以使用 CloneFunction 并将其插入到模块中，如下所示

```
 Function* duplicateFunction = CloneFunction(F, VMap,
                                              /*ModuleLevelChanges=*/false);
  F->getParent()->getFunctionList().push_back(duplicateFunction); 
```

从 llvm 源中的 PartialInlining.cpp 窃取的示例。

# if-statement - 批处理脚本中 FOR 循环中 IF 的比较运算符替换

> ID：14687368
> 
> 赞同：2
> 
> 时间：2013-02-04T13:03:10.653
> 
> 标签：if-statement, for-loop, batch-file

我想在一个可能很简单的情况下寻求您的帮助（解决方案对我来说还未知）。

我正在尝试为 if 命令提供一个变量，以使代码更加“动态”，但这对我来说失败了：此时 % 是意外的。

这是一个简单的例子：

```
> for %i in (NEQ) do (if 1 %i 2 echo jo)
%i was unexpected at this time. 
```

虽然以下工作就像魅力：

```
>set oper=NEQ
>for %i in (NEQ) do (if 1 %oper% 2 echo works)
works 
```

因为我应该留在 for 循环中（并且我从实际代码中的 for 循环中获取实际的运算符），所以我真的很困惑如何解决它......

也尝试使用 EnableDelayedExpansion，但是！变量！而不是运营商也被拒绝。有没有办法在 IF 的 FOR 循环中提交变量，而无需对脚本进行重大修改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:53:10.020

> 有没有办法在 IF 的 FOR 循环中提交变量？

不！因为，该`IF`语句有它自己的解析器，并且它期望在这个解析阶段已经扩展了一些标记。
因此，既不能扩展选项，也不能扩展运算符，也不能扩展`NOT`.
但允许使用延迟或 FOR 变量扩展值。

```
setlocal EnableDelayedExpansion
set myOperator=EQU
IF 1 %myOperator% 1 echo Works
IF 1 !myOperator! 1 echo FAILS
for %%O in (EQU) do IF 1 %%O 1 echo Works 
```

百分比扩展有效，因为它在`IF`解析器获取行之前被扩展。

如果你真的需要使用变量运算符，那么你需要使用一个函数。

```
for %%O in (EQU) do call :myFunc %%O
exit /b

:myFunc 
IF ONE %1 ONE echo Works
exit /b 
```

**编辑：**
特殊解析器也是原因，这里不可能使用语句的`CALL`扩展。`IF`

喜欢这个想法

```
set myOperator=EQU
CALL IF 1 %%myOperator%% 1 echo Works 
```

这应该扩展到`IF 1 EQU 1 echo Works`，但 和 的组合`CALL`总是`IF`失败。

# java - selenium WebDriver 中的异常：b.addEventListener 不是函数

> ID：14687370
> 
> 赞同：0
> 
> 时间：2013-02-04T13:03:17.093
> 
> 标签：java, selenium-webdriver

当我尝试通过下面的代码查找输入元素时

```
driver.findElement(By.cssSelector("input[name=\"passengers[0].passengerName\"]")).sendKeys("xxxxxxxxxxxxxx"); 
```

硒抛出以下错误..

```
org.openqa.selenium.WebDriverException: b.addEventListener is not a function
Command duration or timeout: 16 milliseconds
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 20:21:45'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '2.6.38-13-generic', java.version: '1.6.0_24'
Session ID: e713ccdc-dc05-40a1-923a-8ee51cfa525b
Driver info: org.openqa.selenium.firefox.FirefoxDriver
Capabilities [{platform=LINUX, acceptSslCerts=true, javascriptEnabled=true, browserName=firefox, rotatable=false, locationContextEnabled=true, version=16.0.2, cssSelectorsEnabled=true, databaseEnabled=true, handlesAlerts=true, browserConnectionEnabled=true, nativeEvents=false, webStorageEnabled=true, applicationCacheEnabled=true, takesScreenshot=true}]
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
        at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)
        at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
        at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:533)
        at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:302)
        at org.openqa.selenium.remote.RemoteWebDriver.findElementByCssSelector(RemoteWebDriver.java:379)
        at org.openqa.selenium.By$ByCssSelector.findElement(By.java:407)
        at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:294)
        at irctcticketbooking.Main.main(Main.java:119)
Caused by: org.openqa.selenium.remote.ErrorHandler$UnknownServerException: b.addEventListener is not a function
Build info: version: '2.28.0', revision: '18309', time: '2012-12-11 20:21:45'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '2.6.38-13-generic', java.version: '1.6.0_24'
Driver info: driver.version: unknown
        at <anonymous class>.<anonymous method>(resource://fxdriver/modules/web_element_cache.js:7185)
        at <anonymous class>.<anonymous method>(file:///tmp/anonymous8377906034759035727webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js:6821)
        at <anonymous class>.<anonymous method>(file:///tmp/anonymous8377906034759035727webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js:8245)
        at <anonymous class>.<anonymous method>(file:///tmp/anonymous8377906034759035727webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js:8260)
        at <anonymous class>.<anonymous method>(file:///tmp/anonymous8377906034759035727webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:10222)
        at <anonymous class>.<anonymous method>(file:///tmp/anonymous8377906034759035727webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:10227)
        at <anonymous class>.<anonymous method>(file:///tmp/anonymous8377906034759035727webdriver-profile/extensions/fxdriver@googlecode.com/components/command_processor.js:10167) 
```

我试过元素 id、name、css 和 xpath。没有什么有助于摆脱这个例外。

源html文件：[https](https://dl.dropbox.com/u/345966710/A.html) ://dl.dropbox.com/u/345966710/A.html 测试java代码：[https ://dl.dropbox.com/u/345966710/Test.java](https://dl.dropbox.com/u/345966710/Test.java)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:26:53.667

`findElementByName("passengers[0].passengerName").sendKeys("P1")` 为我工作

使用带有 ff 16 的 java webdriver 2.25 - Windows

也尝试使用 2.28。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:17:19.017

尝试这样的事情

```
driver.findElement(By.cssSelector("[name*='0'][name*='passengerName']")).sendKeys("test"); 
```

# python - 为 Visual Studio 2010 安装 python 工具的问题

> ID：14687374
> 
> 赞同：1
> 
> 时间：2013-02-04T13:03:22.867
> 
> 标签：python, wpf, visual-studio-2010, user-interface, ptvs

我为 Visual Studio 1.1 安装了[Iron python 2.7.3](http://ironpython.codeplex.com/releases/view/81726) 和[python 工具](http://pytools.codeplex.com/releases/view/76091)

但是当我尝试创建一个新的 python 项目时，它只让我创建一个命令行应用程序。我想用 Iron Python 创建一个 GUI，所以我期待创建一个 WPF 项目。该文档指出，如果我安装了 Iron python，它应该可用。我做错什么了吗？我尝试重新安装 Iron python 和 python 工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:40:08.117

安装后。您是否设置了交互式和解释器设置以使用您的 Ironpython 2.7.3？

步骤“3\. 获取 PTVS”：[http ://pytools.codeplex.com/wikipage?title=Installation%20-%20details&referringTitle=Home](http://pytools.codeplex.com/wikipage?title=Installation%20-%20details&referringTitle=Home)

您应该在工具 > 选项 > Python 工具下两个屏幕的下拉列表中看到 IronPython 2.7.3 版本

![在此处输入图像描述](../Images/8964b0505646ae6bdab25c67b9fae491.png)

![在此处输入图像描述](../Images/01c7396d5c373373dd67a6f95f586753.png)

而且，对我来说，它有效，所有模板都可用：

![在此处输入图像描述](../Images/367de6f52949c1ae2aab1f1d8b29d271.png)

更新：查找模板文件夹：

C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\Microsoft

C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\Extensions\Microsoft\IronPython Interpreter\1.5\Templates\Projects

你应该有： - ConsoleProject - SilverlightProject - WinformsProject - WpfProject

您的模板可能有问题，因此请查看此网站并准确了解项目模板的工作方式以及所有模板的位置，以便您可以尝试自己修复它们（如果问题仍然存在）。

Visual Studio 模板

[http://msdn.microsoft.com/en-us/library/vstudio/6db0hwky(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/6db0hwky(v=vs.100).aspx)

# c - 有哪些内存地址可供使用？

> ID：14687388
> 
> 赞同：0
> 
> 时间：2013-02-04T13:04:22.427
> 
> 标签：c, memory, ubuntu

我如何找出适合使用的内存地址？

更具体地说，*如何*使用特定地址的示例在这里：[指向特定固定地址的指针](https://stackoverflow.com/questions/2389251/pointer-to-a-specific-fixed-address)，但没有关于*为什么*这是读/写的有效地址的信息。

我想要一种找出可用地址`x`的方法。`y`

这样我就可以在没有特定模拟器的情况下执行类似于内存映射 IO 的操作。（我的链接问题相关，因此我可以使用一组地址在 Ubuntu 上进行测试，另一组地址用于实际的片上软件）

请具体回答 Ubuntu。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:20:16.293

您可以使用`malloc()`返回的任何内存地址。此外，您可以指定需要多少内存。和你在一起`realloc()`之后，你甚至可以改变主意。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T13:17:38.810

您在这里混合了两个独立的主题。您要链接到的[问题](https://stackoverflow.com/questions/2389251/pointer-to-a-specific-fixed-address)是关于微控制器的内存映射 IO。它指的是[ATM128](http://www.atmel.com/Images/doc2467.pdf)，来自 Atmel 的微控制器。该问题的 OP 正在尝试写入其中一个寄存器，这些寄存器被赋予特定的地址。

如果您尝试写入寄存器的地址，您需要了解内存映射 IO 的工作原理，您需要阅读您正在使用的芯片组/IC 的规范。问这个谈论“Ubuntu特定答案”是没有意义的。

您在 Ubuntu 操作系统上运行的程序正在运行它自己的虚拟地址空间。因此，询问地址`x`是否`y`可供使用是毫无意义的……除非您正在访问硬件，否则寻找特定地址是没有意义的，只需使用操作系统为您提供的地址，您就会知道自己很好。

* * *

根据您的编辑，您正在尝试模拟内存映射 IO，您可以执行以下操作：

```
#ifdef SIMULATION
    unsigned int TX_BUF_REG;  // The "simulated" 32-bit register
#else
#define TX_BUF_REG 0x123456   // The actual address of the reg you're simulating
#endif 
```

然后使用访问器宏通过掩码读取或写入特定位（通常这样做）：

```
#define WRITE_REG_BITS(reg, bits) {reg |= bits;}
...
WRITE_REG_BITS(TX_BUF_REG, SOME_MASK); 
```

静态变量可以通过这种方式在模拟中使用，因此您不必担心写入哪些地址是“安全的”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:40:36.737

对于引用的 ATMega128 微控制器，您可以在[数据表](http://www.atmel.com/Images/doc2467.pdf "数据表")中查看哪些地址映射到寄存器。在安装了操作系统的 PC 上，您将无法通过这种方式直接访问硬件寄存器。至少不是来自用户空间。通常只允许设备驱动程序（环 0）访问硬件。

正如其他人已经提到的那样，您必须使用例如`malloc()`告诉操作系统您需要一个指向允许您写入的内存卡盘的指针。这是因为操作系统管理整个系统的内存。

# git - 您将如何使用 Gitolite-v3 仅在某些目录中授权推送？

> ID：14687389
> 
> 赞同：2
> 
> 时间：2013-02-04T13:04:23.000
> 
> 标签：git, repository, gitolite

我有一个 symfony 项目的工作配置：

```
@admin = admin ku
   @developer = sarhan dima_syrv sarhandom a_bobkov
   @testers = novikov_d 

   repo    dev
       - master = @admin @developer @testers
       RW+      =   @admin @developer
       RW+     =   jenkins ku
       RW      =   @testers 
```

我想让测试人员组只能写入文件夹测试。我正在做这个配置：@admin = admin ku @developer = sarhan dima_syrv sarhandom a_bobkov @testers = novikov_d

```
repo    dev
       - master = @admin @developer @testers
       RW      =   @admin @developer
       RW+     =   jenkins
       RW      =   @testers
       RW NAME/ =  @admin
       RW NAME/src =   @admin @developer
       RW NAME/src/.*/.*/Tests   =   @testers 
```

我有一个 symfony 项目的工作配置我想让测试人员组只能写入文件夹测试我正在做这个配置它只给了我解决方案的一部分，测试人员只能在测试文件夹中写入，但没有人可以推送新的分支只能记录在旧的分支中。如何让每个人都创建一个新的分支，而测试人员只能写入文件夹 Tests？请帮我！

# actionscript-3 - 取消选择as3中的选择项

> ID：14687391
> 
> 赞同：0
> 
> 时间：2013-02-04T13:04:35.473
> 
> 标签：actionscript-3, flash, action

首先，我在`_txtbtn`. 然后我选择任何 mc 并在它们上创建许多侦听器。现在我想在单击时删除侦听器`_can`。所以我创建了`_unselect`函数。但它没有按预期工作。

```
function _txtbtn(e:*):void
{
myText = new TextField();
mc3 = new MovieClip();
myText.text = "text...";
myText.type = "input";

mc3.addChild(myText);
addChild(mc3);
mc3.x = _can.x;
mc3.y =  p;
p = mc3.y + mc3.height + 10;
 this.mc3.addEventListener(MouseEvent.MOUSE_DOWN,_select);

function _select(e:MouseEvent):void
{

tool_stage.combo.addEventListener(Event.CHANGE,_font);
tool_stage.steeper.addEventListener(Event.CHANGE,_size);
tool_stage.italic.addEventListener(MouseEvent.CLICK,_bold);
tool_stage.colPicker2.addEventListener(ColorPickerEvent.CHANGE, changeColor1);
_can.addEventListener(MouseEvent.MOUSE_DOWN,_unselect);
}

function _unselect(e:*){
mc3.removeEventListener(MouseEvent.MOUSE_DOWN,_select);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:39:51.583

我的直觉告诉我，您可能已经为“mc3”注册了多个鼠标按下的听众。在不了解代码的全部范围的情况下，我建议您在将鼠标按下侦听器添加到 mc3 之前添加以下行。

```
// This is the new line, it is just to remove any prior event registrations just to be safe.
this.mc3.removeEventListener(MouseEvent.MOUSE_DOWN,_select);
//This is the original line of the code, leave it as is
this.mc3.addEventListener(MouseEvent.MOUSE_DOWN,_select); 
```

# php - 是否可以使用数据验证来验证单元格？

> ID：14687392
> 
> 赞同：0
> 
> 时间：2013-02-04T13:04:46.560
> 
> 标签：php, phpexcel

我知道可以在单元格上设置数据验证。但是，是否可以实际验证单元格？或者是这样吗？，只设置验证规则，但从不实际验证值？

我一直在漫游“验证”函数/方法的源代码，但似乎找不到它。

# python - 获取包含文本的标签的最快方法

> ID：14687394
> 
> 赞同：0
> 
> 时间：2013-02-04T13:04:49.780
> 
> 标签：python, lxml

我需要使用 . 抓取所有包含文本的标签`lxml.html`。我一直在使用`{e.tag for e in doc.xpath('.//*[text()= true()]')}`，但是通配符和`text()`查询`lxml`都非常慢。有没有更快的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:18:37.070

你可以试试这个：

```
>>> import itertools
>>> [e.tag for e in itertools.ifilter(lambda x: x.text,doc.findall('.//'))] 
```

不确定它是否更快，但它避免了您提到的两件事（XPath 通配符和`text()`函数）。

如果你只想使用列表（而不是迭代器），那么这个语法就更简单了：

```
>>> filter(lambda x: x.text,doc.findall('.//')) 
```

如果您在找到每个标签时处理它（很可能更快），则应该使用迭代器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:47:33.547

获取一组标签名称，其元素包含一些文本：

```
tags = {e.tag for e in doc.iter() if e.text} 
```

# c++ - 在基础 ctor-initialiser 中将其强制转换为 `Derived*` 是否合法？

> ID：14687396
> 
> 赞同：12
> 
> 时间：2013-02-04T13:05:13.880
> 
> 标签：c++, language-lawyer

给定以下 CRTP 示例：

```
template <typename T>
int foo(T* const)
{
   return 0;
}

template <typename Derived>
struct Base
{
   Base() : bar(foo(static_cast<Derived*>(this)) {};
   int bar;
};

struct Derived1 : Base<Derived1> {}; 
```

**`this`到这里的转换`Derived*`有效吗？**我似乎记得可能不是，但现在找不到具体的证据。

`this`此阶段的“自然”类型是`Base* const`，并且在某些情况下，即使`this`在初始化期间静态转换指针也是不行的，例如在基础构造完成之前*向上转换*（12.7/3）。

@DeadMG 说：

> 在初始化列表中获取这个的标准中有一个明确的例外。它用于将指向您自己的指针传递给子对象。

12.6.2/12 确实说：

> [ 注意：因为 mem-initializer 是在构造函数的范围内计算的，所以 this 指针可以在 mem-initializer 的表达式列表中使用来引用正在初始化的对象。——尾注]

...虽然这不足以说转换`Derived*`为有效。

我的直觉是，在对象初始化的这个阶段，`this`它并*没有*指向一个实例，因此，严格来说，`Derived`即使只是*有*一个指向它的类型的指针也是 UB。`Derived*`那是因为它既不是有效指针也不是空指针。

（这可能对这样的方法产生实际影响[，](https://stackoverflow.com/a/14686833/560648)尽管在那个答案和我上面的例子中，整个事情可以通过简单地编写`static_cast<Derived*>(0)`来回避。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:19:35.900

我认为是UB。

正如迈克所说：

> 此时，已为完整对象分配了存储空间，但仅初始化了基本子对象。因此，您只能以 C++11 中描述的“有限方式”使用对象的其余部分。

我的解释是，这不是其中一种方式。

更正式地说：

> `[C++11: 3.8/1]:`对象的生命周期是对象的运行时属性。**如果一个对象是一个类或聚合类型，并且它或它的一个成员是由一个普通默认构造函数以外的构造函数初始化的，则称该对象具有非普通初始化。**[*注意：*通过简单的复制/移动构造函数进行初始化是非平凡的初始化。— *尾注*]**类型对象的生命周期`T`开始于：**
> 
> *   获得具有适当对齐和大小的类型`T`的存储，并且
> *   **如果对象有非平凡的初始化，它的初始化就完成了。**

和：

> `[C++11: 3.8/5]:` **在对象的生命周期开始之前但在对象将占用的存储空间分配**之后，或者在对象的生命周期结束之后并且在对象占用的存储空间被重用或释放之前，**指向该存储空间的任何指针可以使用对象将要或曾经位于的位置，但只能以有限的方式使用。**对于正在建造或破坏的物体，见 12.7。否则，这样的指针指的是分配的存储（3.7.4.2），并且使用指针就像指针是 type 一样`void*`，是明确定义的。这样的指针可能会被取消引用，但生成的左值只能以有限的方式使用，如下所述。**如果出现以下情况，该程序具有未定义的行为：**
> 
> *   该对象将是或曾经是具有非平凡析构函数的类类型，并且指针用作*delete-expression*的操作数，
> *   指针用于访问非静态数据成员或调用对象的非静态成员函数，或
> *   指针被隐式转换（4.10）为指向基类类型的指针，或者
> *   **指针用作`static_cast`**(5.2.9) 的操作数（转换为`void*`、 或`void*`以及随后为`char*`、 或时`unsigned char*`除外），或
> *   指针用作`dynamic_cast` *[..]的操作数*

# maven - 如何在 Maven 中正确引用 JRE？

> ID：14687399
> 
> 赞同：1
> 
> 时间：2013-02-04T13:05:30.277
> 
> 标签：maven, java

在我们的应用程序中，我们将 JRE 打包为嵌入式 DLL（以避免典型的 Windows 问题）。

由于我们的项目是典型的 Maven 公民，我想将该 JRE 作为 Maven 依赖项包含在内，以便以后使用。但是有这样的神器吗？如果不是，那么打包它的首选方式是什么？

*   压缩整个 JRE 文件夹并将其上传到我们的 Nexus？
*   使用“神奇”神器？
*   任何其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:41:25.987

我想这已经在这里被触及[了](https://stackoverflow.com/questions/8540454/jre-1-6-in-maven-repository-public-or-private "这里")

此外，如果您在 Linux 上，那么您可以将 RPM 解决方案用于应用程序/服务器，但它更多的是用于部署而不是开发的解决方案。

# mongodb - 在流星生产服务器中恢复一个 mongodb

> ID：14687404
> 
> 赞同：3
> 
> 时间：2013-02-04T13:05:49.813
> 
> 标签：mongodb, meteor

我正在尝试将所有数据从我的本地主机默认流星 mongo 数据库复制到生产服务器以在“app.meteor.com”中使用它。

我尝试使用“meteor mongo --url app.meteor.com”提供的信息来使用mongorestore，但它没有修改任何文档。此外，当我连接到服务器的 mongo 数据库时，我只能读取（查找）文档。当我使用更新或插入功能时，它说“不是主人”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-07T17:39:08.657

运行 ~/meteor/meteor mongo -U yoapp

你会得到这样的东西

```
mongodb://client:387shff-fe52-07d4-69a4-ba321f3665fe7@c0.meteor.m0.mongolayer.com:27017/yoapp_meteor_com 
```

取值并像这样放入 mongorestore

```
mongorestore -u client -p 387shff-fe52-07d4-69a4-ba321f3665fe7 -h c0.meteor.m0.mongolayer.com:27017 -db yoapp_meteor_com /home/user/dump/yoapp 
```

我刚刚将一个产品应用程序转储到我的本地开发机器上。测试一些新的变化。将代码推送到meteor.com 上的临时安装，然后使用mongorestore 填充临时数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:21:31.917

> 此外，当我连接到服务器的 mongo 数据库时，我只能读取（查找）文档。当我使用更新或插入功能时，它说“不是主人”

这可能是因为您要连接的服务器不是 MASTER，而是副本集中的 SLAVE。从站是只读的，所有写入都需要定向到主站。您可以通过查询`rs.conf()`和查看`members`. 请参阅[http://docs.mongodb.org/manual/reference/replica-configuration/](http://docs.mongodb.org/manual/reference/replica-configuration/)

获取大师，然后尝试`mongoimport`/`mongorestore`就可以了。

您还应该跟踪生产服务器上的 mongod 日志，以查看导入时是否有任何错误（前提是您有权访问）。

# java - 为什么 HashMap 不保证地图的顺序会随着时间的推移保持不变

> ID：14687406
> 
> 赞同：9
> 
> 时间：2013-02-04T13:05:53.990
> 
> 标签：java, hashmap

我在这里阅读了 Hashmap 和 Hashtable 之间的区别：http: [//javarevisited.blogspot.sg/2010/10/difference-between-hashmap-and.html](http://javarevisited.blogspot.sg/2010/10/difference-between-hashmap-and.html)

任何人都可以解释为什么它说跟随？

*“5\. HashMap 不保证地图的顺序会随着时间的推移保持不变。”*

重新散列期间订单是否会改变，这就是为什么？

如果您能向我指出表现出这种不保证订单保持不变的行为的资源或集合列表，那也很好。

AFIK，ArrayList 提供了这样的保证（如果我错了，请告诉我）

编辑：“地图顺序”=可能是输入键或值的顺序。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T13:09:17.797

[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)没有顺序 - 在任何时候。它实际上不用于此目的。即使不重新散列，顺序*也可能会改变。*

如果您需要订单保持不变，请使用 [LinkedHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T13:22:08.140

散列策略的要点是以伪随机方式放置对象。这样做是为了在大多数情况下，只有一个键/元素会被散列到给定的存储桶中。这允许 O(1) 查找时间。当 HashMap 或 Hashtable 增长时，桶的数量会发生变化，并且键/元素会以另一种伪随机方式放置。

最简单的解决方案是使用 LinkedHashMap。这将保持添加顺序或可选的最后访问顺序。我更喜欢使用这个集合，因为它使调试更容易，因为我可以预测对象可能在哪里，有时添加对象的顺序可能是有用的信息。

顺便说一句，如果您对少量键可以有多少个订单感兴趣，那么[哈希集合中的元素顺序](http://vanillajava.blogspot.co.uk/2011/09/order-of-elements-in-hash-collection.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T13:15:32.547

对我来说，以下代码：

```
Map <Integer, Object> map = new HashMap <Integer, Object> (4);

map.put (60, null);
map.put (48, null);
map.put (29, null);

System.out.println (map);

map.put (47, null);
map.put (15, null);
map.put (53, null);

map.remove (47);
map.remove (15);
map.remove (53);

System.out.println (map); 
```

输出：

```
{29=null, 48=null, 60=null}
{48=null, 29=null, 60=null} 
```

由于超过初始容量（此处为 4）时发生的重新散列，顺序发生了变化。即使再次删除了额外的条目，原始订单也不会恢复。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T13:09:22.617

HashMap 有许多存储条目的桶（实现为数组）。

当一个项目被添加到地图时，它被分配到一个基于其 hashCode 的值和 HashMap 的桶大小的桶。（请注意，桶可能已经被占用，这称为冲突。处理得当且正确，但我将忽略该处理的描述，因为它不会改变概念）。

[为什么 HashMap 不保证地图的顺序会随着时间的推移保持不变](http://mkbansal.wordpress.com/2010/06/24/hashmap-how-it-works/)

# python - Python-RPy - “x$terms 中的错误：$ 运算符对原子向量无效”

> ID：14687415
> 
> 赞同：1
> 
> 时间：2013-02-04T13:06:35.113
> 
> 标签：python, r

我是 RPy 的新手，如果我的问题是微不足道的，请原谅。我正在尝试编写此主题的最佳解决方案：[Screening (multi)collinearity in a regression model](https://stackoverflow.com/questions/3042117/screening-multicollinearity-in-a-regression-model) in Python，但出现以下错误：

> rpy.RPy_RException：x$terms 中的错误：$ 运算符对原子向量无效

我写的代码：

```
from rpy import *
r.set_seed(42)
a=r.rnorm(100)
b=r.rnorm(100)
m=r.model_matrix('~a+b') 
```

我究竟做错了什么？

编辑：使用 agstudy 写的回复（感谢您的帮助！）我准备了适用于 rpy2 的解决方案

```
from rpy2 import robjects
rset_seed = robjects.r('set.seed')
fmla = robjects.Formula('~a+b')
model_matrix = robjects.r('model.matrix')
rnorm = robjects.r('rnorm')
rset_seed(42)
env = fmla.environment
env['a']=rnorm(100)
env['b']=rnorm(100)
m=model_matrix(fmla) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:14:19.153

这应该工作

```
fmla = r.Formula('~a+b')
env = fmla.environment
env['a'] = a
env['b'] = b
r.model_matrix(fmla) 
```

在 R 中，您可以重现错误

```
set_seed(42)
a=rnorm(100)
b=rnorm(100)
m=model.matrix('~a+b')
Error: $ operator is invalid for atomic vectors
m=model.matrix(formula('~a+b')) ## this works
  (Intercept)          a          b
1           1 -0.1011361  0.4354445
2           1  0.3782215 -1.5322641
3           1  1.4772023  0.3280948
4           1  0.2892421  1.9012016
5           1 -0.2596562  0.2036678
6           1 -0.5585396 -0.1536021 
```

# python - 如何在测试用例中使用数据库视图

> ID：14687418
> 
> 赞同：0
> 
> 时间：2013-02-04T13:06:52.287
> 
> 标签：python, django

我无法在测试用例中使用数据库视图。另一方面，我可以在前端功能中使用那些数据库视图。但是当我尝试从它的视图中获取数据时，在测试用例中返回 null。

请给我建议在测试用例中使用数据库视图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T20:08:59.287

数据库视图是指您使用的是代表底层数据库视图的非托管模型（如此[处](https://docs.djangoproject.com/en/dev/ref/models/options/#managed)所述）？

如果是这样，我发现在单元测试期间，Django 会忽略`managed = False`模型元中的设置并创建一个实际的表。除非你在你的 this 中明确地填充它，否则`setUp`它将是空的。

解决此问题的一种快速而简单的方法是显式删除表并在测试用例的`setUp`方法中创建视图，如下所示：

```
# Imports
from django.db import connection
from django.core.files import File

...

        # Inside your test case setUp method
        # Drop the table
        cursor = connection.cursor()
        # See note 1
        cursor.execute("SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0; DROP TABLE IF EXISTS myproject_myview; SET SQL_NOTES=@OLD_SQL_NOTES;")
        cursor.close()

        # Create the view
        # See note 2
        file_handle=open('/full/path/to/myproject/sql/create_myview.sql','r+')
        sql_file=File(file_handle)
        sql = sql_file.read()
        cursor = connection.cursor()
        cursor.execute(sql) 
        cursor.close() 
```

笔记：

1.  这是为了解决 MySQL 问题，因此可能不适用于您的情况。该表只会在第一次`setUp`运行时存在。如果您尝试在后续传递中删除表，MySQL 将生成警告 - 此代码会抑制它们。

2.  此文件包含格式为单个视图的创建代码`CREATE OR REPLACE VIEW myproject_myview AS...`。我发现尝试使用相同的光标执行包含多个命令的文件也会导致问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T08:03:52.337

我猜数据库视图是指在视图中访问数据库。

话虽如此，我认为您的问题是您没有 Django 尝试测试的测试数据库。

这就是您开始使用它及其所谓的固定装置的方式。（您也可以使用 SQL 来执行此操作，但**我**认为使用固定装置更容易）。

最简单的是使用`dumpdata`Django 提供的命令。

`python manage.py dumpdata`

这将创建一个文件，该文件将位于您的应用程序目录中，您可以在测试中使用它，如下所示：

例如

`myDjangoProject/myCoreApp/fixtures/myCoreApp_views_testdata.json`

注意：`myCoreApp`不会被命名为这个。

您还可以`FIXTURES_DIR`在 as 中设置一个设置，`settings.py`告诉 Django 将来在哪里寻找固定装置。

要在测试中使用固定装置，请执行以下操作

```
class SomeViewThatIWantToTest(TestCase): #Note, you must use django.test.TestCase
    fixtures = ['core_views_testdata.json'] 
```

在此之后，您应该能够正常访问视图中的数据。这可能需要一些调整以适合您的确切示例，因此我在底部添加了官方文档的链接！

祝你好运，如果我错了，请纠正我！:)

[在此处阅读有关此的更多信息](https://docs.djangoproject.com/en/dev/howto/initial-data/#providing-initial-data-with-fixtures)

# android - 来自非 fragmentActivity 的 GetSupportFragmentManager

> ID：14687420
> 
> 赞同：0
> 
> 时间：2013-02-04T13:06:57.180
> 
> 标签：android, android-alertdialog

情况是这样的。我在一个无法更改的长继承链的末端有一个活动子类。所以我不能让我的活动扩展`FragmentActivity`。我希望在发生旋转等情况时显示对话框而不泄漏它们。

谷歌主要建议（现已弃用）[dismissDialog(int)](http://developer.android.com/reference/android/app/Activity.html#dismissDialog%28int%29)。弃用消息建议使用片段进行对话。这是有道理的。但正如我所说，我无法扩展`FragmentActivity`，因此无法让片段管理器启动我的对话片段。我还针对 min sdk 9 并希望避免使用不推荐使用的方法。

我想到的一种解决方案是在虚拟 FragmentActivity 上调用 start 以显示我的 dialogFragment。但这似乎完全打败了对话的动力。

有没有希望？我可以以某种方式从非片段活动启动对话片段吗？我可以以不推荐的方式显示和关闭对话框吗？我错过了任何其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:12:26.763

好吧，我建议您修复所有问题并扩展 FragmentActivity。但无论如何，既然没有 a 就无法完成`FragmentActivity`，这里有一个解决方法

创建一个不可见的 FragmentActivity（使用半透明主题很容易）

*   启动此活动以处理其中的对话框。
*   当对话框被关闭时完成它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:45:29.187

我终于着手手动处理我的对话框。意思是：

```
Dialog currentdialog; // holds the current open dialog

@Override
protected void onSaveInstanceState (Bundle outState){
    super.onSaveInstanceState(outState);        
    ...
    if(currentdialog!=null){
        currentdialog.dismiss();
    }
}

public void makeDialog(){
    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    // set some of the dialog fields
    currentdialog = alert.create();        
    currentdialog.show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-03T05:32:06.890

它将起作用：

```
 CustomFieldsDialog customDialog = new    
 CustomFieldsDialog();                            
 customDialog.show(getActivity().getSupportFragmentManager(),    
 "CustomFieldsDialog"); 
```

# c# - C# WPF Combobox 下拉列表到多列

> ID：14687422
> 
> 赞同：5
> 
> 时间：2013-02-04T13:07:02.817
> 
> 标签：c#, wpf, list, combobox, multiple-columns

是否可以“强制”列表中的组合框项目出现在两列中？

例如像这样：

## CB精选项目

## CB 项目 1 | CB 项目 4

## CB 项目 2 | CB 项目 5

## CB 项目 3 |

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T13:23:22.157

好吧，你可以，这是 XAML：

```
<ComboBox Name="ComboBox">
    <ComboBox.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid Columns="2"/>
        </ItemsPanelTemplate>
    </ComboBox.ItemsPanel>
</ComboBox> 
```

现在做一个简单的测试，将 0 到 8 的数字相加得到：

![组合框中的统一网格](../Images/88b1d723e510596c36f7699fcc4d9b3e.png)

现在你可以随心所欲地设计它...... :)

当然，每个项目（在这种特殊情况下是每个数字）都是单独的、可点击的项目，这样就不会有误解。

[编辑] 我刚刚注意到您想以“相反的方式”进行操作，即在“行”的方向上，如果是这样，那么`WrapPanel`正如其他答案中有人建议的那样，最好使用相反的方式。首先`UniformGrid`在列方向上填充网格。

也许有一种方法可以做到这一点`UniformGrid`，但是没有明显且简单的一键更改（我之前在这里错了:)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T13:23:44.540

您可以将 ItemsPanel 更改为 WrapPanel，只需注意高度（您可以编写一个转换器来根据项目数计算它）：

```
<ComboBox>
    <ComboBox.Resources>
        <Style TargetType="ComboBox">
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <WrapPanel IsItemsHost="True" Orientation="Vertical" Width="100" Height="50" />
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="ComboBoxItem">
            <Setter Property="Width" Value="50" />
        </Style>
    </ComboBox.Resources>

    <ComboBoxItem Content="Value 1" />
    <ComboBoxItem Content="Value 2" />
    <ComboBoxItem Content="Value 3" />
    <ComboBoxItem Content="Value 4" />
    <ComboBoxItem Content="Value 5" />
</ComboBox> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T13:15:23.240

您需要将 a`WrapPanel`放入`ItemsPanel`组合框中。

```
<ComboBox>
    <ComboBox.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel Orientation="Vertical" Height="100" />
        </ItemsPanelTemplate>
    </ComboBox.ItemsPanel>

    <ComboBoxItem Content="Value 1" />
    <ComboBoxItem Content="Value 2" />
    <ComboBoxItem Content="Value 3" />
    <ComboBoxItem Content="Value 4" />
    <ComboBoxItem Content="Value 5" />
    <ComboBoxItem Content="Value 6" />
    <ComboBoxItem Content="Value 7" />
    <ComboBoxItem Content="Value 8" />
    <ComboBoxItem Content="Value 9" />
    <ComboBoxItem Content="Value 10" />
    <ComboBoxItem Content="Value 11" />
    <ComboBoxItem Content="Value 12" />
    <ComboBoxItem Content="Value 13" />
    <ComboBoxItem Content="Value 14" />
    <ComboBoxItem Content="Value 15" />
</ComboBox> 
```

![在此处输入图像描述](../Images/8e60d7fae11d4ffadfdef783220815b6.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:12:27.370

您可以尝试更改控制模板以使用 Grid 并使用转换器来决定 cbitems 是哪一列和哪一行。不过，我不确定您将如何处理所选项目。

# asp.net-mvc-4 - MVC4 Mailgun 交付的 webhook

> ID：14687432
> 
> 赞同：2
> 
> 时间：2013-02-04T13:07:53.587
> 
> 标签：asp.net-mvc-4, model-binding, webhooks, mailgun

我在使用 Mailgun 交付的 webhook 时遇到问题，可以在这里找到：[http](http://documentation.mailgun.net/user_manual.html#events-webhooks) : //documentation.mailgun.net/user_manual.html#events-webhooks，查找“Delivered Event Webhook”

除非我将应用的 requestValidationMode 修改为 2.0，否则我无法引用 Request.Params["Message-Id"]

在没有 requestValidationMode = 2.0 的情况下尝试引用此字段时，我确实遇到了潜在的不安全错误。该字段的内容是：<20130203200110.12345.12345@mydomain.mailgun.org>。我还尝试声明一个模型以利用自动模型绑定。我的模型如下所示：

```
public class MailgunDeliveredEvent
{
    public string Id { get; set; }
    public string Event { get; set; }
    public string Recipient { get; set; }
    public string Domain { get; set; }

    [AllowHtml]
    [JsonProperty(PropertyName="Message-Id")]
    public object MessageId { get; set; }

    public int Timestamp { get; set; }
    public string Token { get; set; }
    public string Signature { get; set; }        
} 
```

当我尝试引用 MessageId 字段时，它返回 null。我试图添加

```
[Bind(Exclude="message-headers")] 
```

因为我对那个领域不感兴趣。在控制器中，我设置了

```
[ValidateInput(false)] 
```

我似乎无法找回 Message-Id 字段。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T19:27:53.490

我似乎已经让它工作了，以防有人遇到同样的问题......

我添加了一个新的模型绑定器，如下所示：

[Asp.Net MVC 2 - 将模型的属性绑定到不同的命名值](https://stackoverflow.com/questions/4316301/asp-net-mvc-2-bind-a-models-property-to-a-different-named-value)

然后我像这样改变了我的模型：

```
[ModelBinder(typeof(DefaultModelBinderEx))]
public class MailgunDeliveredEvent
{
    public string Id { get; set; }
    public string Event { get; set; }
    public string Recipient { get; set; }
    public string Domain { get; set; }

    [BindAlias("Message-Id")]
    public string MessageId { get; set; }

    public int Timestamp { get; set; }
    public string Token { get; set; }
    public string Signature { get; set; }        
} 
```

一切似乎都有效，我不需要打电话

```
[ValidateInput(false)] 
```

在控制器上。

希望对某人有所帮助。

# php - Codeigniter xml_from_result 输出带有奇怪的字符“´╗┐´╗┐”

> ID：14687436
> 
> 赞同：3
> 
> 时间：2013-02-04T13:08:07.360
> 
> 标签：php, xml, codeigniter, character-encoding

我正在使用 codeigniter 框架，因为任何输出我都有这个字符“´╗┐´╗┐”

> //config.php
> 
> $config['charset'] = 'UTF-8';

我的打印 [http://web.wipix.com.br/Capturar.PNG](http://web.wipix.com.br/Capturar.PNG)

```
/* Model */
public function AllVotos()
{
$this->load->dbutil();          

$select = $this->db->query("SELECT SUM(voto = '0') as insatisfatorio,   SUM(voto = '1') as bom, SUM(voto = '2') as excelente FROM qr_wiplay_participacoes ");

$config = array (
            'root'    => 'root',
            'element' => 'element',
            'newline' => "\n",
            'tab'     => "\t"
           );

return $this->dbutil->xml_from_result($select, $config);
}

/* Controller */

public function AllVotos(){

$xml = $this->home_model->AllVotos();

$this->output->set_content_type('text/xml');

$this->output->set_output($xml); 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T16:26:35.677

这是因为文件带有 BOM 签名使用您的编辑器删除签名 Dreamweaver

```
Modify => Properties page => Title / Encoding => Clear => Include Unicode Signature (BOM) 
```

# opengl - 使用 glDrawRangeElementsBaseVertex()

> ID：14687437
> 
> 赞同：0
> 
> 时间：2013-02-04T13:08:12.103
> 
> 标签：opengl, opengl-3

我在使用 glDrawRangeElementsBaseVertex() 时遇到了一些疑问。

以下是源代码：

```
GLfloat vertices[]=
    {
        -0.9,-0.9,1.0,1.0,
        -0.1,-0.9,1.0,1.0,
        -0.1,-0.1,1.0,1.0,
        -0.9,-0.1,1.0,1.0,

        0.1,0.1,1.0,1.0,
        0.9,0.1,1.0,1.0,
        0.9,0.9,1.0,1.0,
        0.1,0.9,1.0,1.0,

        -0.9,0.1,1.0,1.0,
        -0.1,0.1,1.0,1.0,
        -0.1,0.9,1.0,1.0,
        -0.9,0.9,1.0,1.0,

        0.1,-0.1,1.0,1.0,
        0.1,-0.9,1.0,1.0,
        0.9,-0.9,1.0,1.0,
        0.9,-0.1,1.0,1.0
    };

GLuint indices_uint[]=
    {
          0,1,2,3,222,//Triangle 0 
          4,5,6,7,222,//Triangle 1
          8,9,10,11,222,//Triangle 2    
          12,13,14,15,222,//Triangle 3

          4,5,6,7,222,//Triangle 1
          8,9,10,11,222,//Triangle 2    
          4,5,6,7,222,//Triangle 1        
          12,13,14,15,222//Triangle 3
    };

glEnable(GL_PRIMITIVE_RESTART);

glPrimitiveRestartIndex(222);

glEnableVertexAttribArray(position);

glVertexAttribPointer(position, 4, GL_FLOAT, GL_FALSE, 0,vertices);

glDrawRangeElementsBaseVertex(GL_TRIANGLE_STRIP,0,7,10,GL_UNSIGNED_INT,indices_uint,4); 
```

我不确定输出到底应该是什么。代码呈现三角形 1 和三角形 2。当我将 [start,end] 传递为 [0,7] 时，三角形 2 的绘制究竟如何？

规范说：

```
Index values lying outside the range [start, end] are treated in the same way as glDrawElementsBaseVertex() 
```

这是否意味着即使 {8,9,10,11} 超出 [0,7] 范围，它们仍将用于渲染？如果是这样，那么为什么我们必须使用 glDrawRangeElementsBaseVertex() ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:28:06.480

> 规范说：

就在那条线之前，规范说：

> **在添加 basevertex 之前，**数组索引中的所有值必须位于 start 和 end 之间（包括两端）。

 **开始和结束索引是在将基本顶点添加到它们之前的索引。这个想法是您的开始/结束索引匹配索引数组中的内容，而不是后偏移索引值。

另外，您引用的行是错字；实际规范说：

> 位于范围之外的索引值 [start; end] 的处理方式与**DrawRangeElements**相同。

[OpenGL Wiki](http://www.opengl.org/wiki/GLAPI/glDrawRangeElementsBaseVertex)上的错字已更正。**

# bash - 服务器信息脚本在读取时挂起

> ID：14687440
> 
> 赞同：0
> 
> 时间：2013-02-04T13:08:32.040
> 
> 标签：bash

```
read -p "Which server do you want to know about: "
read var_server
echo $var_server
for $var_server
  do
    $echo ping -a $var_server
    $ehco nmap -O $var_server
done 
```

当我使用 sh -x 执行时，我的脚本挂在“读取 var 服务器”上，谁能告诉我谢谢。它只是停下来坐在

```
+ read var_server 
```

不知道我哪里出错了

谢谢比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:11:22.990

你有两个单独的`read`电话。将它们组合成一个调用，因此只提示您输入一条信息：

```
read -p "Which server do you want to know about: " var_server 
```

`for`循环也是荒谬的。你只有一台服务器，没有什么可以循环的，所以删除循环。然后你写了`$echo`and`$ehco`而不是`echo`. 因此，将整个 for 循环更改为仅这两行：

```
echo ping -a $var_server
echo nmap -O $var_server 
```

# php - 给定圆心坐标、半径和扫角，如何计算圆弧的终点坐标？

> ID：14687441
> 
> 赞同：3
> 
> 时间：2013-02-04T13:08:33.213
> 
> 标签：php, geometry

我正在使用一些填充弧在 PHP 中工作，但我无法找到一种计算弧终点坐标的方法。我知道**中心点坐标**、**半径**（宽度和高度相同）、**起始角度**和**结束角度**（根据 php imagefileldarc() 函数的要求）。由此，我如何计算弧的终点坐标？

我试过以下公式无济于事：

```
$end['x'] = cos($Angle) * $Radius + $CenterX; 
$end['y'] = sin($Angle) * $Radius + $CenterY; 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:18:20.097

您绘制弧线的事实并不重要。您的计算将始终是：

x=cos(角度)*ratio+centerx
y=sin(角度)*ratio+centery

# node.js - Node js - 用户身份验证，在会话中存储什么？

> ID：14687446
> 
> 赞同：7
> 
> 时间：2013-02-04T13:08:53.887
> 
> 标签：node.js, session, authentication

首先，我没有找到任何类似的问题或有用的材料。如果我错过了什么，我很抱歉！

其次，我对[node-passport](http://passportjs.org/)或[connect-auth](https://github.com/ciaranj/connect-auth)或[everyauth等现成的解决方案不感兴趣](https://github.com/bnoguchi/everyauth)

现在的问题。我正在使用 Redis 来存储快速会话。我的问题是，当用户进行身份验证时（即在发布用户名和密码并且在集合中找到此类用户之后）我应该在会话中存储什么？

1.  我可以存储整个用户对象（例如，它来自 MongoDB 的方式）。我看到的一个缺点是，当用户在数据库中被修改时（他编辑了他的个人资料），我必须在会话中“重新设置”用户对象。如果例如管理员更改了用户的配置文件，它会变得更加复杂 - 在这种情况下，会话不知道用户已被修改并且需要从数据库刷新其数据，因此会话当前持有过时的用户对象，这将仅在用户下次登录时更新。

2.  创建一个“hash => userid”集合并在会话中仅存储哈希。然后每个请求，调用一个将检查的中间件（下面的伪代码，省略了对不存在哈希的检查，在这种情况下，用户可能会被认为是会话过期后未登录）：

    if(req.session 中的用户哈希) res.local.user = db.users.findById(db.sessions.findUserIdByHash(req.session.userhash));

    那么这种方法的明显缺点是额外的集合（即mongodb）或key => value（即redis）存储hash => userid，这还需要一些程序来清理旧的会话散列（计划任务\cron，它将运行和删除旧的过期哈希）。

3.  另一个类似于 #2 的解决方案，不是使用 3-d 方集合/key=>value 存储，而是将哈希作为部分用户对象存储在 MongoDB 中。然而，此方法消除了额外的集合/redis 键值，但仍需要计划任务来清理旧的过期会话。并且由于过期会话可能由“过期日期”属性定义，因此更容易维护活动会话的 3-d 方集合，而不是将会话相关数据放入 MongoDB 中的用户对象中（从而使用户对象变得巨大）。

我是 Node-js 的新手，这就是我问的原因。我也明白可能没有正确答案，或者可能受限于个人喜好。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T17:04:09.863

与传统框架（如 PHP/ASP/whatever）相比，Node/Express 中的会话确实没有什么特别之处。你会如何处理 PHP 中的用户登录？

只需将用户 ID 存储在会话中。需要时从 Mongo 中提取用户数据。

会话数据是安全的（因为客户端不能像使用 cookie 那样摆弄它），因此您可以依赖会话的用户 ID 指向已正确验证的用户数据。

# javascript - 如何在调整大小函数中只调用一次函数？

> ID：14687459
> 
> 赞同：2
> 
> 时间：2013-02-04T13:09:24.427
> 
> 标签：javascript, jquery, function, resize

知道如何使用 .resize 只调用一次函数，然后永久取消或禁用它吗？

```
$(window).resize(function () {
    if ($(window).width() < 800) {
        size = true;
        mob();
    }
}); 
```

更新：很棒的东西，感谢**sdespont** - 让它与开/关一起工作：

```
$(window).on('resize',function () {
            if ($(window).width() < 800){
                    agent = true;
                    mob();
            }
            }); 
```

然后在满足条件后关闭调整大小功能：

```
$(window).off('resize'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:11:54.627

jQuery 有这样的[`.one`](http://api.jquery.com/one/)方法：

```
$(window).one("resize", function () { /* */ }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:12:24.040

使用`one`函数[http://api.jquery.com/one/](http://api.jquery.com/one/)

```
$(window).one('resize',function () {
    if ($(window).width() < 800){
        size = true;
        mob();
    }
});
$(window).trigger('resize'); 
```

或`on/off`函数[http://api.jquery.com/on/](http://api.jquery.com/on/)

```
$(window).on('resize',function () {
    if ($(window).width() < 800){
        size = true;
        mob();
    }
});

$(window).trigger('resize').off('resize'); 
```

# php - PHP上传重命名图像并在电子邮件中作为附件发送

> ID：14687463
> 
> 赞同：0
> 
> 时间：2013-02-04T13:09:30.827
> 
> 标签：php

我正忙于PHP上传和邮件功能，基本上它需要上传的图像并将其作为附件放入电子邮件中，然后还将其上传到目录，我将如何根据日期重命名图像但保留扩展名，人们可以上传具有相同文件名的图像...

这是上传功能：

```
$newdirectory = "applicants";
$count = 0;
foreach ($_FILES['myfile']['name'] as $filename)
{
    $temp = $_FILES['myfile']['tmp_name'][$count];
    move_uploaded_file($temp, $newdirectory . '/' . $filename);
    $count++;
} 
```

然后是整个 php 函数：

```
<?php
    function printMember($member) {
        foreach($member as $key=>$value) {
            //Fill the aux string first
            $str.= "$key : $value <br />";
        }
        //string that will be added to $msg variable inside the loop
        return $str;
    }

    $json = $_POST['parameters'];
    $json_string = stripslashes($json);
    $data = json_decode($json_string, true);
    $depCount = count($data["dependants"]);

    $msg .= "<h2>Main member data:</h2>";
    $msg .= printMember($data["mainmember"]);
    $msg .= "<h2>There are $depCount Dependants</h2>";

    foreach ($data["dependants"] as $index => $dependant) {
       $msg .= "<h2>Dependant $index</h2>";
       $msg .= printMember($dependant);
    }

    $strTo = "chante@jamfactory.co.za";
    $strSubject = "Image Testing";
    $strMessage = nl2br($msg);

    //*** Uniqid Session ***//
    $strSid = md5(uniqid(time()));

    $strHeader = "";
    $strHeader .= "From: Dawid<xxx@xxx.co.za>\nReply-To:xxxx@xxx.co.za";

    $strHeader .= "MIME-Version: 1.0\n";
    $strHeader .= "Content-Type: multipart/mixed; boundary=\"".$strSid."\"\n\n";
    $strHeader .= "This is a multi-part message in MIME format.\n";

    $strHeader .= "--".$strSid."\n";
    $strHeader .= "Content-type: text/html; charset=utf-8\n";
    $strHeader .= "Content-Transfer-Encoding: 7bit\n\n";
    $strHeader .= $strMessage."\n\n";

    //*** Attachment ***//
    $count = 0;
    foreach($_FILES['myfile']['name'] as $filename)
    {
        $temp = $_FILES['myfile']['tmp_name'][$count];
        $strFilesName = $filename;
        $strContent = chunk_split(base64_encode(file_get_contents($temp))); 
        $strHeader .= "--".$strSid."\n";
        $strHeader .= "Content-Type: application/octet-stream; name=\"".$strFilesName."\"\n"; 
        $strHeader .= "Content-Transfer-Encoding: base64\n";
        $strHeader .= "Content-Disposition: attachment; filename=\"".$strFilesName."\"\n\n";
        $strHeader .= $strContent."\n\n";
        $count++;
    }

    $flgSend = @mail($strTo,$strSubject,null,$strHeader);  // @ = No Show Error //

    if($flgSend)
    {
        echo "Mail send completed.";
        $newdirectory = "applicants";
        $count = 0;
        foreach ($_FILES['myfile']['name'] as $filename)
        {
            $temp = $_FILES['myfile']['tmp_name'][$count];
            move_uploaded_file($temp, $newdirectory . '/' . $filename);
            $count++;
        }
    }
    else
    {
        echo "Cannot send mail.";
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:17:22.903

用`move_uploaded_file()`..你可以选择文件名..

> 该函数检查以确保 filename 指定的文件是有效的上传文件（意味着它是通过 PHP 的 HTTP POST 上传机制上传的）。**如果文件有效，它将被移动到目的地给定的文件名。**

所以你可以做

```
 $newfilename='yourFileName';
 move_uploaded_file($temp, $newdirectory . '/' . $newfilename);// this will save your filename with newfilename from temp to newdirectory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:18:50.483

试试这个方法来获取扩展名并重命名新文件名：

```
foreach ($_FILES['myfile']['name'] as $filename)
{ 
     $temp = $_FILES['myfile']['tmp_name'][$count];

     $ImageExt = substr($filename, strrpos($filename, '.'));
     $ImageExt = str_replace('.','',$ImageExt);

     $filename = "YOUR_NEW_NAME_HERE".$ImageExt;
     move_uploaded_file($temp, $newdirectory . '/' . $filename);
     count++;
} 
```

如果文件名包含多个点（。）那么你可以使用[pathinfo](http://uk.php.net/manual/en/function.pathinfo.php)`substr(strrchr($file_name,'.'),1);`也会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:26:00.167

我将`pathinfo`用于排除文件扩展名，并添加额外的`timestamp`内容以防止文件名冲突并替换现有文件。

```
$newdirectory = "applicants";
$count = 0;
foreach ($_FILES['myfile']['name'] as $filename)
{

    $temp = $_FILES['myfile']['tmp_name'][$count];
    $file_info = pathinfo($filename);

    // Don't you forget to have the $user available here ...
    $filename = $user . '_' . time() . '.' . $file_info['extension'];

    move_uploaded_file($temp, $newdirectory . '/' . $filename);
    $count++;
} 
```

# python - 使用 Flask 转储 HTTP 请求

> ID：14687468
> 
> 赞同：9
> 
> 时间：2013-02-04T13:10:01.520
> 
> 标签：python, flask

我正在开发一个基于 Flask 应用程序的 Web 应用程序 ( [https://github.com/opensourcehacker/sevabot](https://github.com/opensourcehacker/sevabot) )，它具有基于 HTTP 的 API 服务。

许多开发人员正在使用和扩展 API，我想添加一个功能，将 Flask 的 HTTP 请求打印到 Python 日志输出，这样您就可以看到原始 HTTP 有效负载、源 IP 和您获得的标头。

*   Flask 提供了哪些钩子，这种 HTTP 请求转储最容易实现

*   是否有任何现有的解决方案和最佳实践可供学习？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T13:39:28.250

Flask在 at 提供了一个标准[记录器，](http://docs.python.org/dev/library/logging.html#logging.Logger)[这个 gist](https://gist.github.com/3257877)[`current_app.logger`](http://flask.pocoo.org/docs/quickstart/#logging)中有一个示例配置，但如果你想记录每个请求，你可以将记录调用集中在 before_request 处理程序中：

```
from flask import request, current_app

@app.before_request
def log_request():
    if current_app.config.get('LOG_REQUESTS'):
        current_app.logger.debug('whatever')
        # Or if you dont want to use a logger, implement
        # whatever system you prefer here
        # print request.headers
        # open(current_app.config['REQUEST_LOG_FILE'], 'w').write('...') 
```

# freepascal - Lazarus 中的非对称加密

> ID：14687471
> 
> 赞同：1
> 
> 时间：2013-02-04T13:10:09.307
> 
> 标签：freepascal, lazarus

是否有任何支持非对称加密的 lazarus ( free pascal ) 库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:58:26.333

Lazarus/FPC 带有 openssh 标头 afaik。可能没有必要走外部程序路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T21:30:48.200

要在 Lazarus 中进行非对称加密，您需要集成 openssl。

如果你使用 windows 下载[http://slproweb.com/download/Win32OpenSSL_Light-1_0_1e.exe](http://slproweb.com/download/Win32OpenSSL_Light-1_0_1e.exe)

现在你可以像这样在 lazarus 中使用 openssl：

```
uses ..., Process;

...

procedure encrypt_file();
var hProcess : TProcess;
begin
  hProcess := TProcess.Create(nil);
  hProcess.Executable := 'openssl';
  hprocess.Parameters.Add('aes-256-cbc');
  hprocess.Parameters.Add('-a -salt');
  hprocess.Parameters.Add('-in secrets.txt'); //input file
  hprocess.Parameters.Add('-out secrets.txt.enc'); //output file  
  hProcess.Options := hProcess.Options + [poWaitOnExit, poUsePipes]; 
  hProcess.Execute;
end;

procedure decrypt_file();
var hProcess : TProcess;
begin
  hProcess := TProcess.Create(nil);
  hProcess.Executable := 'openssl';
  hprocess.Parameters.Add('aes-256-cbc');
  hprocess.Parameters.Add('-d -salt');
  hprocess.Parameters.Add('-in secrets.txt.enc'); //input file
  hprocess.Parameters.Add('-out secrets.txt.new'); //output file  
  hProcess.Options := hProcess.Options + [poWaitOnExit, poUsePipes]; 
  hProcess.Execute;
end; 
```

注意：该示例是针对非对称的对称加密阅读这篇文章： http: [//www.devco.net/archives/2006/02/13/public_-_private_key_encryption_using_openssl.php](http://www.devco.net/archives/2006/02/13/public_-_private_key_encryption_using_openssl.php)

# javascript - 是否可以将整数作为键存储在 javascript 对象中？

> ID：14687474
> 
> 赞同：5
> 
> 时间：2013-02-04T13:10:26.407
> 
> 标签：javascript, jquery, json, types, indexing

我正在 JSON 中创建一个索引文件，我将其用作我正在处理的 javascript 应用程序的数据库索引。

我的索引将如下所示：

```
{
"_id": "acomplex_indices.json",
"indexAB": {
    "title": {
        "Shawshank Redemption": [
            "0"
        ],
        "Godfather": [
            "1"
        ],
        "Godfather 2": [
            "2"
        ],
        "Pulp Fiction": [
            "3"
        ],
        "The Good, The Bad and The Ugly": [
            "4"
        ],
        "12 Angry Men": [
            "5"
        ],
        "The Dark Knight": [
            "6"
        ],
        "Schindlers List": [
            "7"
        ],
        "Lord of the Rings - Return of the King": [
            "8"
        ],
        "Fight Club": [
            "9"
        ],
        "Star Wars Episode V": [
            "10"
        ],
        "Lord Of the Rings - Fellowship of the Ring": [
            "11"
        ],
        "One flew over the Cuckoo's Nest": [
            "12"
        ],
        "Inception": [
            "13"
        ],
        "Godfellas": [
            "14"
        ]
    },
    "year": {
        "1994": [
            "0",
            "3"
        ],
        "1972": [
            "1"
        ],
        "1974": [
            "2"
        ],
        "1966": [
            "4"
        ],
        "1957": [
            "5"
        ],
        "2008": [
            "6"
        ],
        "1993": [
            "7"
        ],
        "2003": [
            "8"
        ],
        "1999": [
            "9"
        ],
        "1980": [
            "10"
        ],
        "2001": [
            "11"
        ],
        "1975": [
            "12"
        ],
        "2010": [
            "13"
        ],
        "1990": [
            "14"
        ]
    }
}
} 
```

所以对于每一个`keyword`（比如低俗小说），我都会存储匹配的`document-id(s)`.

我的问题是**整数/数字/非字符串数据**，例如上面示例中的发布年份。这是作为字符串存储的，而我曾希望它将作为数字存储。

我正在创建这样的索引条目：

```
// indices = the current index file
// doc = the document to update the index with
// priv.indices = all indices defined for this application instance
// priv.indices.fields = index fields e.g. "year", "director", "title"
// priv.indices.name = name of this index

priv.updateIndices = function (indices, doc) {
var i, j, index, value, label, key, l = priv.indices.length;

// loop all indices to add document
for (i = 0; i < l; i += 1) {
  index = {};
  index.reference = priv.indices[i];
  index.reference_size = index.reference.fields.length;
  index.current = indices[index.reference.name];

  for (j = 0; j < index.reference_size; j += 1) {
    label = index.reference.fields[j];    // like "year"
    value = doc[label];                   // like 1985

    // if document has a label field (e.g. doc.year = 1985)
    if (value !== undefined) {

      // check if the index file already contains an entry for 1985
      index.current_size = priv.getObjectSize(index.current[label]);

      if (index.current_size > 0) {
        // check if the document id is already in the index
        // in case the data is updated (e.g. change 1982 to 1985)
        key = priv.searchIndexByValue(
          index.current[label],
          doc._id,
          "key"
        );
        if (!!key) {
          delete index.current[label][key];
        }
      }
      // create a new array if 1985 is not in the index yet
      if (index.current[label][value] === undefined) {
        index.current[label][value] = [];
      }
      // add the document id to an existing entry
      index.current[label][value].push(doc._id);
    }
  }
}
return indices; 
```

};

这很好用，除了我想存储为非字符串（整数、数字或日期时间）的字段，就像上面示例中的年份一样，最终在我的索引中作为字符串。

**问题**：
是否可以在 JSON 文档中存储“非字符串”类型？如果是这样，我是否也可以将键/值对的键存储为“非字符串”元素。

如果不是，我是否必须在我的索引定义中添加一个参数来声明每个键的类型，以便在遇到它时修改键字符串，或者有更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T13:12:26.087

> 是否可以在 JSON 文档中存储“非字符串”类型？

是的。属性的值可以是字符串、数字、布尔值、对象、数组或 null（`undefined`这是一个值得注意的例外 - 它是原生 JavaScript 类型，但它不是有效的 JSON 值）。

> 我还可以将键/值对的键存储为“非字符串”元素吗？

不可以。密钥名称必须始终是字符串。但是，这并不意味着您不能将该字符串解析为其他 JavaScript 类型。例如，如果您有一个字符串但需要一个数字，则可以使用`parseInt`函数或一元运算`+`符。

有关更多详细信息，请参阅[JSON 语法](http://www.json.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:14:57.913

不，你不能，在 JSON 中键是字符串。

您可以做的最好的事情是存储这些键的字符串表示形式，无论是整数还是对象（更复杂，您必须构建一个序列化函数）。

如果您只想使用从 0 开始的连续整数键，则可以使用数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:16:59.290

根据[json spec](http://json.org)，您可以在任何可以有值的地方有一个数字。所以对象的键必须是字符串，但值可以是数字。此外，数组中的任何值都可以是数字。

不过，规范并不重要；我相信问题是这一行：

```
index.current[label][value].push(doc._id); 
```

当您阅读`doc._id`时，那是一个字符串。如果要将其作为数字存储在 JSON 中，则需要对其进行强制转换：

```
index.current[label][value].push(parseInt(doc._id, 10)); 
```

另请注意，[*仅*将数字作为 ID 不是有效的 HTML](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)。

# c# - 针对每个 Web 请求和生命周期范围的 SimpleInjector 混合生活方式

> ID：14687475
> 
> 赞同：5
> 
> 时间：2013-02-04T13:10:27.923
> 
> 标签：c#, .net, dependency-injection, simple-injector

我正在使用 Simple Injector 作为我的 IoC 容器，并采用以下技术来为某些对象注册“混合”生活方式，无论是按 Web 请求还是每个线程。

```
interface IUnitOfWork { }
interface IWebUnitOfWork : IUnitOfWork { }
interface IThreadUnitOfWork : IUnitOfWork { }
class UnitOfWork : IWebUnitOfWork, IThreadUnitOfWork { }

container.RegisterPerWebRequest<IWebUnitOfWork, UnitOfWork>();
container.RegisterLifetimeScope<IThreadUnitOfWork, UnitOfWork>();
container.Register<IUnitOfWork>(() => container.GetInstance<UnitOfWork>());

// Register as hybrid PerWebRequest / PerLifetimeScope.
container.Register<UnitOfWork>(() =>
{
    if (HttpContext.Current != null)
        return container.GetInstance<IWebUnitOfWork>() as UnitOfWork;
    else
        return container.GetInstance<IThreadUnitOfWork>() as UnitOfWork;
}); 
```

我对这个解决方案并不完全满意，因为对于每个要求，我必须定义额外的空接口以使其工作并确保它们被我的具体类引用。

有什么理由我不应该使用以下扩展方法而不是定义额外的接口？如果这些方法存在问题，是否有其他方法可以完全确定我当前的容器实例正在 IIS 中运行？

```
public static void RegisterHybridLifestyle<TService, TImplementation>(
    this Container container)
    where TService : class
    where TImplementation : class, TService
{
    if (System.Web.Hosting.HostingEnvironment.ApplicationHost != null)
        container.RegisterPerWebRequest<TService, TImplementation>();
    else
        container.RegisterLifetimeScope<TService, TImplementation>();
}

public static void RegisterForLifestyle<TConcrete>(
    this Container container)
    where TConcrete : class
{
    if (HostingEnvironment.ApplicationHost != null)
        container.RegisterPerWebRequest<TConcrete>();
    else
        container.RegisterLifetimeScope<TConcrete>();
} 
```

* * *

**更新**

上述问题[和后续问题](https://stackoverflow.com/questions/14693774/when-would-you-need-simpleinjector-hybrid-registration-how-can-an-object-hoste)是基于对 SimpleInjector 和混合注册的误解。上面和 SO 其他地方描述的技术适用于容器可以为 Web 请求和不在 Web 请求上下文中运行的后台进程的请求提供服务的情况。我一直在尝试实现的是变量注册，以适应适用于 Web 请求***或的容器的配置***线程请求的容器配置。即我需要将我的容器配置为在 IIS 中工作并在 Windows 服务中工作。我不需要可以同时满足两者的动态注册。

结果是以下扩展方法，我从我的解决方案中删除了“额外”接口:-)

```
public static void RegisterForScope<TService, TImplementation>(this Container container)
    where TService : class
    where TImplementation : class, TService
{
    if (System.Web.Hosting.HostingEnvironment.ApplicationHost != null)
        container.RegisterPerWebRequest<TService, TImplementation>();
    else
        container.RegisterLifetimeScope<TService, TImplementation>();
}

public static void RegisterForScope<TConcrete>(this Container container)
    where TConcrete : class
{
    if (System.Web.Hosting.HostingEnvironment.ApplicationHost != null)
        container.RegisterPerWebRequest<TConcrete>();
    else
        container.RegisterLifetimeScope<TConcrete>();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:59:52.760

> 我对这个解决方案并不完全满意

是的，我同意这一点。老实说，不得不做这样的事情实际上很糟糕 IMO。这就是在 Simple Injector 2.0 中修复此问题的原因。它包含生活方式的明确概念，并将包含一种`Lifestyle.CreateHybrid`方法，使登记混合生活方式变得更加容易。

但是，您似乎不需要混合生活方式。混合生活方式是一种可以动态切换的生活方式（在每次调用`GetInstance<T>`和每次注射时），而您似乎只需要在启动期间进行切换。我认为使用`RegisterHybridLifestyle`您定义的扩展方法没有任何害处，但请记住，这并不是真正的混合生活方式（因此名称有点误导），而只是配置/部署切换。

Simple Injector 2 及更高版本使这更容易，它允许您执行以下操作：

```
// Define a lifestyle once based on the deployment.
Container.Options.DefaultScopedLifestyle =
    Lifestyle.CreateHybrid(
        lifestyleSelector: HostingEnvironment.ApplicationHost != null,
        trueLifestyle: new WebRequestLifestyle(),
        falseLifestyle: new LifetimeScopeLifestyle());

// And use it for registering the unit of work
// (no extra interfaces needed anymore).
container.Register<IUnitOfWork, UnitOfWork>(Lifestyle.Scoped);

// After setting DefaultScopedLifestyle, you can usr Lifestyle.Scoped
container.RegisterCollection(
    typeof(ISubscriber<>),
    new [] { typeof(ISubscriber<>).Assembly },
    Lifestyle.Scoped); 
```

# javascript - 一次性 QML 列间距覆盖

> ID：14687480
> 
> 赞同：2
> 
> 时间：2013-02-04T13:11:08.810
> 
> 标签：javascript, qt, layout, qml, spacing

我使用 QML 列布局，但我只想禁用（或减少）两个元素之间的间距。在其余部分之间应单独留出间距。

可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T19:00:25.023

减少是困难的，但增加两个相邻项目之间的空间很容易：只需`Item`在它们之间插入一个空白，并需要额外的垂直空间（当然减去一个额外的常规间距），如`height`. 不要忘记也设置一个非零值`width`，否则该项目将不会被考虑到布局计算中。

在没有为`Column`自身设置间距的情况下，您可以通过这种方式实现每种可能的间距配置。这显然有点hacky，但没有其他办法。

# ms-access - 在两个不同的列上使用日期时间条件查询访问

> ID：14687481
> 
> 赞同：1
> 
> 时间：2013-02-04T13:11:13.250
> 
> 标签：ms-access

我有一个 Access 数据库文件有这两列和值

```
IODate(Date/Time)
IOTime (string)

IODate      IOTime
2013-02-04  11:20:52
2013-02-04  11:23:42
2013-02-04  11:52:02
2013-02-04  12:00:46
2013-02-04  12:53:34
2013-02-04  13:48:28
2013-02-04  13:52:12
2013-02-04  14:47:37
2013-02-04  14:47:51
2013-02-04  14:52:38
2013-02-04  14:53:38
2013-02-04  14:54:25
2013-02-04  15:08:28
2013-02-04  15:11:22
2013-02-04  15:11:33
2013-02-04  15:11:37
2013-02-04  15:12:46
2013-02-04  15:12:49
2013-02-04  15:12:51 
```

`(2013-02-04 11:20:52)`现在我想使用 Query How can I选择大于 datetime 的值。??

注意：我无法在表中进行任何架构更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:30:28.917

您可以将时间添加到日期并对该列进行查询：

```
SELECT t.IODate, t.IOTime, [iODate]+CDate([IOTime]) AS IODateTime
FROM IOData t
WHERE ([iODate]+CDate([IOTime]))>#2013-02-04 11:20:52# 
```

# android - 在使用 JsonReader 解析 Json 时，我收到 SSLProtocolException

> ID：14687482
> 
> 赞同：0
> 
> 时间：2013-02-04T13:11:14.537
> 
> 标签：android, ssl, android-parser, jsonreader

我正在尝试使用 JsonReader 解析 json 响应，以便我可以直接使用 Inputstream 来解析它。但我遇到了一个例外。日志猫：

```
02-04 18:30:54.515: W/System.err(1695): javax.net.ssl.SSLProtocolException: Read error: ssl=0x36d690: Failure in SSL library, usually a protocol error
02-04 18:30:54.525: W/System.err(1695):     at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_read_byte(Native Method)
02-04 18:30:54.525: W/System.err(1695):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLInputStream.read(OpenSSLSocketImpl.java:765)
02-04 18:30:54.525: W/System.err(1695):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readLine(HttpURLConnectionImpl.java:660)
02-04 18:30:54.525: W/System.err(1695):     at org.apache.harmony.luni.internal.net.www.protocol.http.ChunkedInputStream.readChunkSize(ChunkedInputStream.java:77)
02-04 18:30:54.525: W/System.err(1695):     at org.apache.harmony.luni.internal.net.www.protocol.http.ChunkedInputStream.read(ChunkedInputStream.java:45)
02-04 18:30:54.525: W/System.err(1695):     at java.io.InputStream.read(InputStream.java:157)
02-04 18:30:54.525: W/System.err(1695):     at java.util.zip.InflaterInputStream.fill(InflaterInputStream.java:225)
02-04 18:30:54.525: W/System.err(1695):     at java.util.zip.InflaterInputStream.read(InflaterInputStream.java:178)
02-04 18:30:54.525: W/System.err(1695):     at java.util.zip.GZIPInputStream.read(GZIPInputStream.java:174)
02-04 18:30:54.525: W/System.err(1695):     at java.io.InputStreamReader.read(InputStreamReader.java:255)
02-04 18:30:54.525: W/System.err(1695):     at com.google.gson.stream.JsonReader.fillBuffer(JsonReader.java:825)
02-04 18:30:54.525: W/System.err(1695):     at com.google.gson.stream.JsonReader.nextString(JsonReader.java:1045)
02-04 18:30:54.525: W/System.err(1695):     at com.google.gson.stream.JsonReader.nextValue(JsonReader.java:784)
02-04 18:30:54.525: W/System.err(1695):     at com.google.gson.stream.JsonReader.objectValue(JsonReader.java:766)
02-04 18:30:54.525: W/System.err(1695):     at com.google.gson.stream.JsonReader.peek(JsonReader.java:380) 
```

我该如何解决这个问题。

# python - 在 iOS 应用程序中运行 python 脚本

> ID：14687485
> 
> 赞同：4
> 
> 时间：2013-02-04T13:11:27.337
> 
> 标签：python, ios, objective-c, xcode, cocoa-touch

我需要在 ios 应用程序中运行 python 脚本。我发现这个问题[在 ios 中运行了一个简单的 python 脚本](https://stackoverflow.com/questions/11276656/run-a-simple-python-script-in-ios) 作为答案，他包括 Python.h

```
#include <Python.h> 
```

我在哪里可以得到这个文件？在哪个库或框架中？编译器告诉我“找不到 Python.h 文件”

我正在使用 Mac OS X 10.8.2、xCode 4.6 我在 System/Library/Frameworks/Python.framework 中有 Python.framework 和 Python.h

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:13:39.283

您正在查看的脚本适用于 OS X，而不是 iOS。遗憾的是，iOS**不**包含 Python 框架。

# syntax - Domino Designer 查询：数值运算

> ID：14687492
> 
> 赞同：1
> 
> 时间：2013-02-04T13:11:55.007
> 
> 标签：syntax, lotus-domino

通过提交查询时，`NotesDatabase.FTSearch`我收到错误消息：

```
Notes Error: Query is not understandable 
(FIELD Form="Contact" AND ( FIELD CUSTOMER_ID <> 1)) (262) 
```

具有等号的相同查询执行正常（与`<=`and相同`>=`）：
( `FIELD Form="Contact" AND ( FIELD CUSTOMER_ID = 1)`)
因此，我认为“不等于”运算符存在错误。

[该文档](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FH_FTSEARCHRANGE_METHOD_DB_JAVA.html)解释了除“不等于”操作之外的数值上的各种运算符。更糟糕的是，它指出，

> 您不能在数学符号 =、<、>、<= 或 >= 之后放置 NOT；在日期或数字之前

那么正确的方法是什么？`<>`并`!=`没有工作。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:48:51.770

这至少适用于文本字段：

```
![CUSTOMER_ID]=1 
```

试一试，我不确定数字。如果它不起作用，您可以这样做：

```
[CUSTOMER_ID]>1 OR [CUSTOMER_ID]<1 
```

西蒙的建议也可能有效（没有第一个下划线）。

# algorithm - 如何从随机点识别椭圆/椭球？联合国加权平均值？

> ID：14687494
> 
> 赞同：2
> 
> 时间：2013-02-04T13:11:58.990
> 
> 标签：algorithm, geometry, average, image-recognition, montecarlo

假设我们在 2D（或 3D）中得到随机点，这些点往往在椭圆（或椭圆体）上。我们不能保证点在椭圆（椭球面）上均匀分布。

任务是确定椭圆（椭球）参数，即中心位置和半轴。

我们不能取平均值，因为它会被加权。我的意思是，如果点将从椭圆的一侧初步计算，则平均会给出错误的结果。

那么问题是如何`UN-weight`平均？

**更新**

我认为在椭圆的情况下，参数可以通过矩等统计量来确定。他们可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:22:43.423

任何椭圆都可以使用 5 个点来完全定义（请参阅[此处](http://sarcasticresonance.wordpress.com/2012/05/14/how-many-points-does-it-take-to-define/)的详细推理）。所以，如果你知道这些点是没有错误的并且在一个椭圆上，你可以从你的集合中取任意 5 个点并得到椭圆参数。

如果这些点可能有误差分量，您可以使用梯度下降之类的方法在数据集上拟合一个椭圆。作为误差函数，我将使用数据点和椭圆之间距离的平方和。例如，对于每个数据点，您可以取由它定义的线和当前椭圆中心，将其与椭圆相交，并考虑从该点到最近的 2 个交点的距离。

最后，[这是](http://www.mathworks.com/matlabcentral/fileexchange/3215-fitellipse/content/fit_ellipse.m)一个 Matlab 包，它实现了一些类似的东西。功能文档也非常丰富。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:52:59.017

椭圆上的任何点都将服从方程 x^2 / a ^ 2 + y ^ 2 / b ^ 2 = 1 如果你有两个这样的点，它应该可以使用联立方程法求解

# java - 不支持的major.minor版本java作为带有procrun的windows服务

> ID：14687496
> 
> 赞同：0
> 
> 时间：2013-02-04T13:12:05.623
> 
> 标签：java, tomcat, windows-services, procrun

我正在尝试将我的 java 应用程序作为 Windows 服务运行。我按照这里所说的做了：http: [//web.archive.org/web/20090228071059/http ://blog.platinumsolutions.com/node/234](http://web.archive.org/web/20090228071059/http://blog.platinumsolutions.com/node/234)

和[http://commons.apache.org/daemon/procrun.html](http://commons.apache.org/daemon/procrun.html)

我得到了这个例外：

```
 2013-02-04 14:52:25 Commons Daemon procrun stderr initialized
  java.lang.UnsupportedClassVersionError: serviceWrapper : Unsupported major.minor version 51.0
      at java.lang.ClassLoader.defineClass1(Native Method)
      at java.lang.ClassLoader.defineClassCond(Unknown Source)
      at java.lang.ClassLoader.defineClass(Unknown Source)
      at java.security.SecureClassLoader.defineClass(Unknown Source)
      at java.net.URLClassLoader.defineClass(Unknown Source)
      at java.net.URLClassLoader.access$000(Unknown Source)
      at java.net.URLClassLoader$1.run(Unknown Source)
      at java.security.AccessController.doPrivileged(Native Method)
      at java.net.URLClassLoader.findClass(Unknown Source)
      at java.lang.ClassLoader.loadClass(Unknown Source)
      at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
      at java.lang.ClassLoader.loadClass(Unknown Source)
  Exception in thread "main" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:12:03.763

此异常表示您正在运行的 JRE 是 Java 6.0 或更早版本，但您尝试运行的类（或至少其中一些）已使用 Java 7.0 编译器编译。

有两种方法可以解决这个问题：

*   将您的执行平台升级到 Java 7.0，您的代码应该按原样运行。

*   为 Java 6.0（或更早版本）平台重新编译您的代码：

    *   安装 Java 6.0（或更早版本）JDK 并重新编译您的代码。

    *   使用现有的 Java 7.0 构建环境编译代码，但使用合适的“-target”和“-bootclasspath”选项让编译器生成 Java 6.0 兼容代码。

（我建议升级...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:14:57.717

java.lang.UnsupportedClassVersionError 的发生是因为编译时 JDK 较高，而运行时 JDK 较低。

显示的版本号描述了类文件兼容的 JRE 版本。

```
J2SE 7 = 51,
J2SE 6.0 = 50,
J2SE 5.0 = 49,
JDK 1.4 = 48,
JDK 1.3 = 47,
JDK 1.2 = 46,
JDK 1.1 = 45 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:16:15.610

您的应用程序是 Java 7 应用程序，但看起来您拥有 Java 6（或更低版本）。[您可以在 Java 网站](http://java.com)上安装 Java 7 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:14:15.017

您的 Windows 上安装的默认 JRE 似乎是 1.6 或更低，而您尝试运行的类是在 Java 7 下编译的。

# javascript - 如何在向导的 Rails 中使用 JavaScript 隐藏/显示后退/下一个按钮？

> ID：14687497
> 
> 赞同：0
> 
> 时间：2013-02-04T13:12:06.483
> 
> 标签：javascript, ruby-on-rails, wizard

我用这个 gem 创建了一个向导表单：[https ://github.com/stephenbaldwin/fuelux-rails](https://github.com/stephenbaldwin/fuelux-rails)

一切都在进行下一步和上一步。但是，在第一步隐藏“prev”按钮并在最后一步仅显示“submit”按钮的“rails 方式”是什么？这是我会在js中做的事情吗？

_form.html.erb

```
<%= form_for(@wizard) do |f| %>

  <div>
    <div id="MyWizard" class="wizard">
      <ul class="steps">
        <li data-target="#step1" class="active"><span class="badge badge-info">1</span>Step 1<span class="chevron"></span></li>
        <li data-target="#step2"><span class="badge">2</span>Step 2<span class="chevron"></span></li>
        <li data-target="#step3"><span class="badge">3</span>Step 3<span class="chevron"></span></li>
      </ul>
    </div>
    <div class="step-content">
      <div class="step-pane active" id="step1">
        <div class="field">
          <%= f.label :field1 %><br />
          <%= f.text_field :field1 %>
        </div>
      </div>
      <div class="step-pane" id="step2">
        <div class="field">
          <%= f.label :field2 %><br />
          <%= f.text_field :field2 %>
        </div>
      </div>
      <div class="step-pane" id="step3">
        <div class="field">
          <%= f.label :field3 %><br />
          <%= f.text_field :field3 %>
        </div>
      </div>
      <input type="button" class="btn btn-mini" id="btnWizardPrev" value="prev">
      <input type="button" class="btn btn-mini" id="btnWizardNext" value="next"></br>

      <div>
        <%= f.submit :class => 'btn btn-mini btn-primary' %>
      </div>
    </div>
  </div>
<% end %> 
```

应用程序.js 文件：

```
$(function() {
    $('#MyWizard').on('change', function(e, data) {
        console.log('change');
        if(data.step===3 && data.direction==='next') {
            // return e.preventDefault();
        }
    });
    $('#MyWizard').on('changed', function(e, data) {
        console.log('changed');
    });
    $('#MyWizard').on('finished', function(e, data) {
        console.log('finished');
    });
    $('#btnWizardPrev').on('click', function() {
        $('#MyWizard').wizard('previous');
    });
    $('#btnWizardNext').on('click', function() {
        $('#MyWizard').wizard('next','foo');
    });
    $('#btnWizardStep').on('click', function() {
        var item = $('#MyWizard').wizard('selectedItem');
        console.log(item.step);
    });
}); 
```

旁注/问题 - 有没有办法将此 .js 放入我的资产管道而不将其存储在 application.js 中？我试图在 javascripts 下创建一个单独的 .js，但它并没有引入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:59:52.413

在您的 javascript 文件中替换此块

```
$('#MyWizard').on('change', function(e, data) {
    console.log('change');
    if(data.step===3 && data.direction==='next') {
        // return e.preventDefault();
    }
}); 
```

带有以下块：（**更新）**

```
$('#MyWizard').on('change', function(e, data) {
  console.log('change');
  $('#wizard-submit').hide(); //hide the submit button on each step.
  if(data.step === 3 && data.direction === 'next') {
    // return e.preventDefault();
    $('#wizard-submit').show(); //show the submit button only on last(3rd in your case) step.
  }

  switch(data.step) {
    case 1:
      if(data.direction === 'next')
        $('#btnWizardPrev').show();
      else
        $('#btnWizardPrev').hide();

      $('#btnWizardNext').show();
      break;
    case 2:
      if(data.direction === 'next') {
        $('#btnWizardPrev').show();
        $('#btnWizardNext').hide();
      }
      else {
        $('#btnWizardPrev').hide();
        $('#btnWizardNext').show();
      }
      break;
    case 3:
      // I would recommend to show the prev button on last step but hide the next button.
      if(data.direction === 'next')
        $('#btnWizardNext').hide();
      else
        $('#btnWizardNext').show();

      $('#btnWizardPrev').show();
      break;
    default:
      $('#btnWizardPrev').show();
      $('#btnWizardNext').show();
  }
}); 
```

上面的代码将根据您所在的步骤显示/隐藏按钮。

对于您的第二个问题：您是否`//= require_tree .`在**application.js**中指定了。如果是，请尝试将代码包含在`$(document).ready(function(){..code goes here..})`

**更新**请参阅上面的更新代码。我不确定这是否是正确的方法，但我能够让它以这种方式工作。

还要添加`#btnWizardPrev { display: none; }`
**假设**：表格中有三个步骤。如果还有更多，则需要在 switch 语句中添加更多案例。基本上你需要打破**case 2:**在这种情况下的声明。`case 2:`条件是删除下一步按钮，所以如果`next`有更多步骤，请将`next`条件移动到倒数第二个步骤。

**更新**将您的提交按钮代码替换为`<%= f.submit :class => 'btn btn-mini btn-primary', :id => 'wizard-submit' %>`. 这只会将**id**属性添加到您的提交按钮。您可以使用任何值作为其 id。然后只需通过添加此 css 来隐藏提交按钮`#wizard-submit { dispay: none }`，然后在您的 javascript 文件中使用上面更新的 jquery 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T23:21:11.287

向导插件已经在第一步禁用了上一个按钮。`button.btn-prev`它在向导容器中寻找一个

```
<div id="myWizard" class="wizard">
  <div class="actions">
    <button class="btn btn-mini btn-prev"> <i class="icon-arrow-left"></i>Prev</button>
    <button class="btn btn-mini btn-next" data-last="Finish">Next<i class="icon-arrow-right"></i></button>
  </div> 
```

如果您想隐藏禁用的上一个按钮，您可以使用 css 定位它以避免 javascript

```
.wizard button.btn-prev[disabled] {
  display: none;
} 
```

# java - 在 Java 中使用 MongoDB 中的日期范围进行查询

> ID：14687499
> 
> 赞同：3
> 
> 时间：2013-02-04T13:12:10.557
> 
> 标签：java, mongodb, date

我是使用 MongoDB 的新手。我把它填满了收据，例如：一张收据看起来像这样：

```
{ 
  "_id" : { 
          "$oid" : "510fa057c6f818c2bfd0b279"
          } ,

  "StoreName" : "Metro" ,
  "StoreNumber" : 521 , 
  "Items" : [ { 
               "ItemName" : "Battery" , 
               "ItemManufacturer" : "Duracell" ,
               "ItemPrice" : 12 ,
               "ItemQuantity" : 2 , 
               "ItemTotalPrice" : 24
              } , 

              { 
               "ItemName" : "TV CRT 25 inch" , 
               "ItemManufacturer" : "Toshiba" , 
               "ItemPrice" : 1659 , 
               "ItemQuantity" : 1 , 
               "ItemTotalPrice" : 1659
              } ,
              { 
                "ItemName" : "Mobile" , 
                "ItemManufacturer" : "Nokia" , 
                "ItemPrice" : 2966 , 
                "ItemQuantity" : 4 , 
                "ItemTotalPrice" : 11864
             }
          ] ,
  "Date" : {
            "$date" : "2012-06-16T01:21:11.758Z"
           } , 
  "Total" : 13547
} 
```

我需要进行查询，在其中指定日期范围以获取该范围内的所有收据。我尝试了以下查询，但它没有返回任何内容。

```
 BasicDBObject query = 
       new BasicDBObject(
           "Date", 
           new BasicDBObject(
               "$gt", 
               "2012-06-20T10:05:21.968Z"
           ).append(
               "$lte",
               "2012-09-24T05:29:43.031Z"
           )
       ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T13:26:11.140

MongoDB dates work in conjunction with java.util.Date. Change your query to something like this :

```
Date start = new java.util.Date(2012, 06, 20, 10, 05);
Date end = new java.util.Date(2012, 06, 20, 10, 30);

BasicDBObject query = new BasicDBObject("Date", 
    new BasicDBObject("$gt", start)).
            append("$lte", end) )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:28:59.363

你可以试试：

```
 Date gtDate = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS").parse("2012-06-20T10:05:21.968");
    Date lteDate = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS").parse("2012-09-24T05:29:43.031");
    BasicDBObject dateQueryObj = new BasicDBObject("Date",  new BasicDBObject("$gt", gtDate).append("$lte", lteDate));

    DBCursor cursor = collection.find(dateQueryObj); 
```

# c# - 我们可以从当前登录的用户 MVC4 访问哪些信息

> ID：14687508
> 
> 赞同：-2
> 
> 时间：2013-02-04T13:12:30.740
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我们可以从当前登录的用户那里收集到我们的应用程序的哪些信息？

服务器是否保存有关网络上的计算机名称或使用的操作系统的任何信息或任何其他类似信息？

谢谢

**编辑**我将需要基本上得出一个如下表：

```
Username     Computer-Network Name    OS      Last Logged in date
  Craig           craig-pc            WIN7          today 
```

我知道我可以获取上次登录日期等但不能获取其他信息，原因是系统正在从桌面迁移到网络

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:26:32.150

> 我们可以从当前登录的用户那里收集到我们的应用程序的哪些信息？

用户名。

> 服务器是否保存有关网络上的计算机名称或使用的操作系统的任何信息或任何其他类似信息？

不，但是您当然可以通过查看`Request.UserHostAddress`属性来检索此信息，例如检索 IP 地址。这可以根据请求完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:15:01.273

你可以使用：

```
Request.Browser.Platform 
```

要检索用户所在的平台/操作系统和版本，请通过

```
Request.UserAgent 
```

您可以使用它来检索计算机名称：

```
var host = Dns.GetHostEntry(Request.UserHostAddress);
string hostName = host.HostName; //Computer name 
```

# c# - Nunit System.Xml.XmlUrlResolver.GetEntity System.Xml.XmlException：不支持对象类型

> ID：14687512
> 
> 赞同：1
> 
> 时间：2013-02-04T13:12:49.967
> 
> 标签：c#, .net, xml, nunit

使用 Nunit 2.6.2 测试 C# dll 时出现此错误。

```
System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)
System.Xml.XmlException : Object type is not supported. 
```

请看一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:16:00.877

ofObjectToReturn 必须是一个`Stream`类型

见[msdn](http://msdn.microsoft.com/en-us/library/system.xml.xmlresolver.getentity%28v=vs.100%29.aspx)

> 例外：
> 
> XmlException : ofObjectToReturn 不是 Stream 类型。

# php - 如何显示来自不同表的数据？

> ID：14687513
> 
> 赞同：2
> 
> 时间：2013-02-04T13:12:50.323
> 
> 标签：php, mysql, sql

```
表格1
| 身份证 | 职位名称 | Post_Status | 父ID | 发布_内容 | Post_Type |
+----+------------+-------------+------------+-- ---------+------------+
| 1 | 约翰样品| 发表 | 0 | 内容文本 | 人 |
| 2 | | 继承 | 1 | 图片1.jpg | 附件|
| 3 | | 继承 | 1 | 图片2.jpg | 附件|
| 4 | | 继承 | 1 | 图片3.jpg | 附件|
| 5 | 标记样品| 发表 | 0 | 标记文字 | 人 |
| 6 | | 继承 | 5 | 图片1.jpg | 附件|
| 7 | | 继承 | 5 | 图片2.jpg | 附件|
| 8 | | 继承 | 5 | 图片3.jpg | 附件|

表 2
| 元ID | post_id | 元密钥 | 元值 |
+---------+----------+----------------+------------ ------------+
| 1 | 1 | 地址 | 样品街,国家 |
| 2 | 1 | 电话 | 10000000000000 |
| 3 | 1 | 性别 | 男 |
| 4 | 1 | 主图 | 2 |
| 5 | 2 | 缩略图 | John_thumbnail.jpg |
| 6 | 2 | 元数据 | 数据数据数据 |
| 7 | 5 | 地址 | 马克街,国家 |
| 8 | 5 | 电话 | 20000000000000 |
| 9 | 5 | 性别 | 男 |
| 10 | 5 | 主图 | 6 |
| 11 | 6 | 缩略图 | Mark_thumbnail.jpg |
| 12 | 6 | 元数据 | 数据数据数据 |

```

**我想这样显示**

名称：John 示例
评论：内容文本
地址：Sample Street, Florida
电话：10101010101010
性别：男性
**缩略图：John_thumbail.jpg**
照片：images1.jpg、images2.jpg、images3.jpg

名称：Mark 示例
评论：Mark 文本
地址：Mark Street , 佛罗里达州
电话：20101010101010
性别：男性
**缩略图：Mark_thumbail.jpg**
照片：images1.jpg、images2.jpg、images3.jpg

![查看缩略图如何链接](../Images/ad5e17ad4f5a1439a2e52efbaacede69.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:16:55.663

尝试这个：

```
SELECT
  t.Post_Name AS Name,
  MAX(CASE WHEN t2.meta_key = 'Address' THEN t2.meta_value END) AS 'Address',
  MAX(CASE WHEN t2.meta_key = 'Phone' THEN t2.meta_value END) AS 'Phone',
  MAX(CASE WHEN t2.meta_key = 'Sex' THEN t2.meta_value END) AS 'Sex',
  GROUP_CONCAT(DISTINCT p.Post_Content  SEPARATOR ',') AS Photo
FROM Table1 p
INNER JOIN table1 t ON p.parent_ID = t.ID
INNER JOIN Table2 t2 ON t.Id = t2.post_id
GROUP BY p.Post_Name; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/4ca7b/8)

这会给你：

```
|        NAME |               ADDRESS |          PHONE |  SEX |                            PHOTO |
--------------------------------------------------------------------------------------------------
| John Sample | Sample Street,Country | 10000000000000 | Male | image3.jpg,image2.jpg,image1.jpg | 
```

* * *

然后使用 PHP，您可以按照您想要的方式显示它们。

* * *

## 更新

如果您想将 的值显示`user comment`为注释，您可以这样做：

```
SELECT
  t.Post_Name AS Name,
  MAX(CASE WHEN t2.meta_key = 'Address' THEN t2.meta_value END) AS 'Address',
  MAX(CASE WHEN t2.meta_key = 'Phone' THEN t2.meta_value END) AS 'Phone',
  MAX(CASE WHEN t2.meta_key = 'Sex' THEN t2.meta_value END) AS 'Sex',
  GROUP_CONCAT(DISTINCT p.Post_Content  SEPARATOR ',') AS Photo,
  GROUP_CONCAT(DISTINCT t.post_Content) comment
FROM Table1 p
INNER JOIN table1 t ON p.parent_ID = t.ID
INNER JOIN Table2 t2 ON t.Id = t2.post_id
GROUP BY p.Post_Name; 
```

## [更新的 SQL 小提琴演示](http://www.sqlfiddle.com/#!2/4ca7b/10)

* * *

## 更新2：

基于更新的样本数据：

```
SELECT
  p.Post_Name AS Name,
  MAX(CASE WHEN t.meta_key = 'Address' THEN t.meta_value END) AS 'Address',
  MAX(CASE WHEN t.meta_key = 'Phone' THEN t.meta_value END) AS 'Phone',
  MAX(CASE WHEN t.meta_key = 'Sex' THEN t.meta_value END) AS 'Sex',
  GROUP_CONCAT(DISTINCT c.Post_Content  SEPARATOR ',') AS Photo,
  GROUP_CONCAT(DISTINCT p.post_Content) comment
FROM
(
  SELECT *
  FROM Table1 
  WHERE parent_id = 0
) AS p
INNER JOIN table1 AS c ON p.ID      = c.parent_ID
INNER JOIN table2 AS t ON t.post_id = p.id
GROUP BY p.post_Name; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/69f05/14)

这会给你：

```
|        NAME |               ADDRESS |          PHONE |  SEX |                            PHOTO |      COMMENT |
-----------------------------------------------------------------------------------------------------------------
| John Sample | Sample Street,Country | 10000000000000 | Male | image2.jpg,image1.jpg,image3.jpg | Content Text |
| Mark Sample |   Mark Street,Country | 20000000000000 | Male | image3.jpg,image1.jpg,image2.jpg |   Mark  Text | 
```

* * *

## 更新 2

对于更新的数据，试试这个：

```
SELECT 
  t1.*,
  t2.meta_value AS 'Thumbnail'
FROM
(
  SELECT
    p.Post_Name AS Name,
    MAX(CASE WHEN t.meta_key = 'Address' THEN t.meta_value END) AS 'Address',
    MAX(CASE WHEN t.meta_key = 'Phone' THEN t.meta_value END) AS 'Phone',
    MAX(CASE WHEN t.meta_key = 'Sex' THEN t.meta_value END) AS 'Sex',
    MAX(CASE WHEN t.meta_key = 'Primary pic' THEN t.meta_value END) AS 'Primary_pic',
    GROUP_CONCAT(DISTINCT c.Post_Content  SEPARATOR ',') AS Photo,
    GROUP_CONCAT(DISTINCT p.post_Content) comment
  FROM
  (
    SELECT *
    FROM Table1 
    WHERE parent_id = 0
  ) AS p
  INNER JOIN table1 AS c ON p.ID      = c.parent_ID
  INNER JOIN table2 AS t ON t.post_id = p.id
  GROUP BY p.post_Name
) AS t1
INNER JOIN table2 t2  ON t1.Primary_pic = t2.post_id
                     AND t2.meta_key = 'Thumbnail'; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/eb016/11)

这会给你：

```
|        NAME |               ADDRESS |          PHONE |  SEX | PRIMARY_PIC |                            PHOTO |      COMMENT |          THUMBNAIL |
----------------------------------------------------------------------------------------------------------------------------------------------------
| John Sample | Sample Street,Country | 10000000000000 | Male |           2 | image3.jpg,image1.jpg,image2.jpg | Content Text | John_thumbnail.jpg |
| Mark Sample |   Mark Street,Country | 20000000000000 | Male |           6 | image1.jpg,image2.jpg,image3.jpg |   Mark  Text | Mark_thumbnail.jpg | 
```

* * *

* * *

## 更新 3

对于这个新`meta_data`列，您将需要对第二个表再进行一次连接，就像我们对这样的操作所做的`primary pic`那样：

```
SELECT 
  t1.Name,
  t1.Address,
  t1.Phone,
  t1.Sex,
  t1.Photo,
  t1.Comment,
  t2.meta_value AS 'Thumbnail',
  t3.meta_value AS 'meta_data'
FROM
(
  SELECT
    p.Post_Name AS Name,
    MAX(CASE WHEN t.meta_key = 'Address' THEN t.meta_value END) AS 'Address',
    MAX(CASE WHEN t.meta_key = 'Phone' THEN t.meta_value END) AS 'Phone',
    MAX(CASE WHEN t.meta_key = 'Sex' THEN t.meta_value END) AS 'Sex',
    MAX(CASE WHEN t.meta_key = 'Primary pic' THEN t.meta_value END) AS 'Primary_pic',
    GROUP_CONCAT(DISTINCT c.Post_Content  SEPARATOR ',') AS Photo,
    GROUP_CONCAT(DISTINCT p.post_Content) comment
  FROM
  (
    SELECT *
    FROM Table1 
    WHERE parent_id = 0
  ) AS p
  INNER JOIN table1 AS c ON p.ID      = c.parent_ID
  INNER JOIN table2 AS t ON t.post_id = p.id
  GROUP BY p.post_Name
) AS t1
INNER JOIN table2 t2  ON t1.Primary_pic = t2.post_id
                     AND t2.meta_key = 'Thumbnail'
INNER JOIN table2 t3  ON t1.Primary_pic = t3.post_id
                     AND t3.meta_key = 'meta_data'; 
```

## [像这样](http://www.sqlfiddle.com/#!2/c4c45/3)

这会给你：

```
|        NAME |               ADDRESS |          PHONE |  SEX |                            PHOTO |      COMMENT |          THUMBNAIL |      META_DATA |
-------------------------------------------------------------------------------------------------------------------------------------------------------
| John Sample | Sample Street,Country | 10000000000000 | Male | image1.jpg,image2.jpg,image3.jpg | Content Text | John_thumbnail.jpg | data_data_data |
| Mark Sample |   Mark Street,Country | 20000000000000 | Male | image2.jpg,image3.jpg,image1.jpg |   Mark  Text | Mark_thumbnail.jpg | data_data_data | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:32:53.860

试试下面的代码

```
SELECT    Table1.ID,
Table1.POST_NAME,
Table1.Post_Status,
Table1.Parent_ID,
Table1.Post_Content,
Table1.Post_Type,
Table2.meta_id,
Table2post_id,  
Table2meta_key,
Table2.meta_value       
FROM TABLE2,TABLE1
WHERE TABLE1.id= TABLE2.post_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:17:58.317

我会研究 SQL 中的 JOINS，如下所示：

```
SELECT post.post_name, 
       phone.meta_value 
FROM   table_1 AS post 
       LEFT JOIN table_2 AS phone 
              ON post.id = phone.id 
                 AND phone.meta_key = "phone" 
```

根据需要进行编辑。

# jquery - 调整浮动元素的大小，使用 JQuery UI Resizable 调整大小，调整窗口大小以适应其父容器

> ID：14687515
> 
> 赞同：1
> 
> 时间：2013-02-04T13:13:02.330
> 
> 标签：jquery, css, jquery-ui, css-float, jquery-ui-resizable

我无法解决浮动元素和 JQuery UI Resizable 和窗口调整大小事件的问题。

这是有问题的**[jsFiddle](http://jsfiddle.net/rxVPq/116/)**。

基本上，我有一个父容器 - .tab - 和 3 个子 div。.content1、.content2 和 .content3。当使用“alsoInverResize”函数调整 .content1 的大小时，.content2 和 content3 的大小都会成反比。

```
<div class="tab">
    <div class="container1"></div>
    <div class="container2"></div>
    <div class="container3"></div>
</div>

$(".container1").resizable({
    containment: "parent",
    handles: "s",
    alsoInverResize: ".container2, .container3",
    maxHeight: $(".tab").height()
}); 
```

尽管所有 3 个子 div 都以百分比宽度和高度开始以适合其父级，但当它们调整大小时，它们会得到平面大小，并且当您将窗口大小调整为小于原始大小时，它们会从父容器溢出，使 .container3在 .container2 下向左浮动，或者如果窗口的大小比原始大小大，则其宽度小于其父级。

我试图在窗口调整大小事件上再次设置百分比大小，但这会阻止可调整大小的插件甚至工作，显然不是预期的效果（[http://jsfiddle.net/fh77N/2/](http://jsfiddle.net/fh77N/2/)）：

```
$(".container1").css({"height" : "50%", "width" : "100%"});
$(".container3").css({"height" : "50%", "width" : "70%"});
$(".container2").css({"height" : "50%", "width" : "30%"}); 
```

我想让三个子容器的大小相等，调整为 window.resize 上的窗口或父级的比例，或者让它们恢复到原来的百分比大小，但保持可调整大小的功能。

# asp.net - 处理 HTML 数组输入元素

> ID：14687516
> 
> 赞同：0
> 
> 时间：2013-02-04T13:13:06.570
> 
> 标签：asp.net, web-applications, asp.net-3.5

我知道在 PHP 中我们可以很容易地创建这样的东西来处理 HTML 数组元素：

```
<input name="test[0]" value="1" />
<input name="test[1]" value="2" />
<input name="test[2]" value="3" /> 
```

然后在代码中我可以将其作为数组访问：

```
$arrElements = $_POST['test'];
echo $arrElements[0]; // prints: 1 
```

我一直在尝试在 ASP.NET（Web 应用程序）中做同样的事情。但不幸的是，这（也）并不那么容易。

因此，如果我使用与上面相同的 HTML，然后我尝试在我的 CodeBehind 中执行以下操作：

```
var test = Request.Form.GetValues("test"); 
```

但这导致`test`存在`null`。有没有办法像我用 PHP 一样处理 HTML 数组元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:36:59.873

更改您的 html ：

```
<input name="test" value="1" />
<input name="test" value="2" />
<input name="test" value="3" /> 
```

后面的代码：

```
var test = Request.Form.GetValues("test"); 
```

现在您将在 test var 中获得值数组。

如果您无法更改 html，则可以使用以下代码：

```
var testList = new List<string>();
foreach (string key in Request.Form.AllKeys)
{
    if (key.StartsWith("test[") && key.EndsWith("]"))
    {
        testList.Add(Request.Form[key]);
    }
} 
```

# mysql - 在 JAVA swing 中将数据库记录显示到 JTable

> ID：14687518
> 
> 赞同：1
> 
> 时间：2013-02-04T13:13:09.667
> 
> 标签：mysql, swing, jdbc, jtable

我试图在 Jtable 中显示数据库记录，但我没有得到正确的代码。我正在使用 IDE netbeans，数据库是 mysql。我可以看到面板和滚动窗格，但未显示表格。我认为表属性有问题，或者不知道它是否不可见。我的代码如下：

```
try{        
    panel_paylist.setVisible(true);
    String dbUrl = "jdbc:mysql://localhost/hostel";
    String dbClass = "com.mysql.jdbc.Driver";
    Class.forName("com.mysql.jdbc.Driver");
    Connection conn=DriverManager.getConnection(dbUrl,"root","17121990");
    System.out.println("Connected!!!!");
    MainScreen obj = new MainScreen(conn); 

    String[] columnNames = {"First Name",
                    "Last Name",
                    "Amount Recvd.",
                    "Date","Cheque/cash","cheque no","Balance Amt.","Total Amt.",
                    "Vegetarian"};

    ResultSet rs = null;
    Statement sql= null;
    ArrayList<Object[]> data = new ArrayList<>();
    String query="SELECT firstname,lastname, amountreceivd,dte,creditcashcheque,cheque_no,balance_amt, totalamount,Remark FROM payment;";
    sql = con.createStatement();
    sql.executeQuery(query);
    rs = sql.getResultSet();

    while(rs.next()){
                Object[] row = new Object[]{rs.getString(1), 
                rs.getString(2), 
                rs.getInt(3),
                rs.getString(4),
                rs.getString(5),
                rs.getString(6),
                rs.getInt(7),
                rs.getInt(8),
                rs.getString(9)};
                data.add(row);
            }
    Object[][] realData = data.toArray(new Object[data.size()][]);
    table_paylist= new JTable(realData, columnNames);
    scroll_paylist= new JScrollPane(table_paylist);        
    table_paylist.setPreferredScrollableViewportSize(new Dimension(800, 200));
    table_paylist.setFillsViewportHeight(true);
    panel_paylist.setLayout(new BorderLayout());
    panel_paylist.add(scroll_paylist, BorderLayout.CENTER); 
    }
    catch(Exception e)
    {

    } 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:08:01.290

首先，您缺少本地主机的端口号。改变

`"jdbc:mysql://localhost/hostel"`

到

`"jdbc:mysql://localhost:3306/hostel";`

第二点不要在 sql 字符串的末尾使用分号（;）。即删除分号

`"SELECT firstname,lastname, amountreceivd,dte,creditcashcheque,cheque_no,balance_amt, totalamount,Remark FROM payment;"`

你也可以试试这个

```
public DefaultTableModel PlayList() throws ClassNotFoundException,SQLException,ParseException
    {

        String[] columnNames = {"First Name","Last Name","Amount Recvd.","Date","Cheque/cash","cheque no","Balance Amt.","Total Amt.","Vegetarian"};

        DefaultTableModel dtm = new DefaultTableModel(columnNames , 0);

        dtm.setColumnCount(9);

        Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:8080/hostel","root","17121990");
        PreparedStatement ps1 = null;
        ResultSet rs1 = null;

        try
            {
                Class.forName("com.mysql.jdbc.Driver");
                ps1=conn.prepareStatement("SELECT firstname,lastname,mountreceivd,dte,creditcashcheque,cheque_no,balance_amt,totalamount,Remark FROM payment");
                rs1 = ps1.executeQuery();
                while(rs1.next())
                {
                   dtm.addRow(new Object[]{rs1.getString(1)
                                            rs.getString(2), 
                                            rs.getInt(3),
                                            rs.getString(4),
                                            rs.getString(5),
                                            rs.getString(6),
                                            rs.getInt(7),
                                            rs.getInt(8),
                                            rs.getString(9)});
                }
            }
        finally
            {
                rs1.close();
                ps1.close();
                conn.close();
            }
        return dtm;
    } 
```

现在使用`PlayList()`方法作为你的 jtable 的 setmodel 方法的参数；

IE`jtable.setmodel(PlayList());`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T17:58:56.233

使用 rs2xml 第三方 Jar 文件显示查询结果。这很有帮助

# git - osx 10.5.8 上的 Firefox os Gaia 出错

> ID：14687529
> 
> 赞同：1
> 
> 时间：2013-02-04T13:13:34.733
> 
> 标签：git, gaia, firefox-os

我尝试使用 mozilla[说明安装 Gaia](https://wiki.mozilla.org/Gaia/Hacking)

OSX：10.5.8 Xcode：3.1.4 Git：git-1.7.5.4-i386-leopard

```
$ cd ~/ffos/
$ git clone git://github.com/mozilla-b2g/gaia.git gaia
Cloning into gaia...
remote: Counting objects: 110061, done.
remote: Compressing objects: 100% (31997/31997), done.
remote: Total 110061 (delta 78367), reused 106338 (delta 75377)
Receiving objects: 100% (110061/110061), 294.06 MiB | 846 KiB/s, done.
Resolving deltas: 100% (78367/78367), done.
$ cd gaia/
$ DEBUG=1 make
rm -rf xulrunner-sdk /usr/bin/curl -O http://ftp.mozilla.org/pub/mozilla.org/xulrunner/nightly/2012/09/2012-09-20-03-05-43-mozilla-central/xulrunner-18.0a1.en-US.mac-x86_64.sdk.tar.bz2
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 54.2M  100 54.2M    0     0   527k      0  0:01:45  0:01:45 --:--:--  590k
tar xjf xulrunner*.tar.bz2 && rm xulrunner*.tar.bz2
test -d profile || mkdir -p profile
run-js-command  applications-data
dyld: unknown required load command 0x80000022
/bin/bash: line 1:   439 Trace/BPT trap          ./xulrunner-sdk/bin/run-mozilla.sh ./xulrunner-sdk/bin/xpcshell -e "$JS_CONSTS" -f build/utils.js "build/applications-data.js"
make: *** [applications-data] Error 133 
```

我找到了这篇文章，但它是一样的： [http ://sebastian.germes.in/blog/2012/04/dyld-unknown-required-load-command-0x80000022-tracebpt-trap/](http://sebastian.germes.in/blog/2012/04/dyld-unknown-required-load-command-0x80000022-tracebpt-trap/)

如果有人对我的问题有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T13:45:20.797

您可能需要安装[node.js](http://nodejs.org/)才能运行 js 命令...

# android - 编辑文本中的负值

> ID：14687533
> 
> 赞同：0
> 
> 时间：2013-02-04T13:13:50.703
> 
> 标签：android, android-edittext

转换是其他类，我正在工作`MainActivity`；

当我清除edittext然后输入“-”然后它会产生错误，但是当我输入一些值然后在edittext的第一个位置然后它不会产生错误，请帮助我附上我的错误日志。

```
Conversion conversion;

conversion = new Conversion();

@Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
if(edittext.length()!=0){
String Result =conversion.temp(spinner1.getSelectedItemPosition(),
        spinner2.getSelectedItemPosition(),edittext.getText().toString());
 textView.setText(Result);
 }

 } 
```

这是我的功能

```
public String temp(int ddfrom,int ddto,String edittextvalue) {

float s;
    float inputValue = Float.parseFloat(edittextvalue);
    s = rate*inputValue;
return String.valueOf(s);

} 
```

> ```
>  02-04 12:56:33.029: E/AndroidRuntime(317): Uncaught handler: thread main exiting due to uncaught exception
>       02-04 12:56:33.119: E/AndroidRuntime(317): java.lang.NumberFormatException: -
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at org.apache.harmony.luni.util.FloatingPointParser.initialParse(FloatingPointParser.java:149)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:319)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at java.lang.Float.parseFloat(Float.java:288)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at com.sample.unitconverter.Conversion.timee(Conversion.java:651)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at com.sample.unitconverter.UnitConverter$6.onTextChanged(UnitConverter.java:397)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.widget.TextView.sendOnTextChanged(TextView.java:6131)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.widget.TextView.handleTextChanged(TextView.java:6172)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:6316)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.text.SpannableStringBuilder.sendTextChange(SpannableStringBuilder.java:889)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:352)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:269)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:432)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:409)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:28)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.view.inputmethod.BaseInputConnection.replaceText(BaseInputConnection.java:578)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.view.inputmethod.BaseInputConnection.commitText(BaseInputConnection.java:174)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at com.android.internal.widget.EditableInputConnection.commitText(EditableInputConnection.java:120)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:231)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at      com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:57)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.os.Handler.dispatchMessage(Handler.java:99)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.os.Looper.loop(Looper.java:123)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at android.app.ActivityThread.main(ActivityThread.java:4363)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at java.lang.reflect.Method.invokeNative(Native Method)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at java.lang.reflect.Method.invoke(Method.java:521)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
>       02-04 12:56:33.119: E/AndroidRuntime(317):    at dalvik.system.NativeStart.main(Native Method) 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:21:59.537

这是因为“-”无法解析为浮点数，并且您收到 NumberFormatException。

```
public String temp(int ddfrom,int ddto,String edittextvalue) {
    float s;
    try {
        float inputValue = Float.parseFloat(edittextvalue);
        s = rate*inputValue;
        return String.valueOf(s);
    }
    catch (NumberFormatException nfe) {
           //Error handling.
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:31:15.807

一开始你的方法应该是

```
public String temp(int ddfrom,int ddto,String edittextvalue) {
float s;
try {
    float inputValue = Float.parseFloat(edittextvalue);
    s = rate*inputValue;
    return String.valueOf(s);
catch (NumberFormatException nfe) {
       //Error handling.
}
return "";

} 
```

并将侦听器代码更新为

```
@Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
if(edittext.length()!=0){
     if(edittext.length()==1 && "-".equals(edittext.getText().toString())) {
         //Nothing to do
     } else {

         String Result =conversion.temp(spinner1.getSelectedItemPosition(),
        spinner2.getSelectedItemPosition(),edittext.getText().toString());
        textView.setText(Result);
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:21:14.097

如果您正在使用`android:inputType="numberDecimal"`不允许负数。在这种情况下，您应该添加：`android:inputType="numberDecimal|numberSigned"` 这将适用于您的情况

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:19:07.780

我不确定您在做什么，但是每次在`onTextChanged`函数中更改文本时您都在解析一个浮点数（调用函数`temp`）

修复函数`temp`以在例如出现解析错误时返回 0。这是因为字符串“-”不会被解析为浮点数。

```
public String temp(int ddfrom,int ddto,String edittextvalue) {
        try {
        float s;
        float inputValue = Float.parseFloat(edittextvalue);
        s = rate*inputValue;
        return s;
    } catch(Exception ex) {
        return "0";
    }

} 
```

# google-app-engine - 关于 Google App Engine for Java 的博客

> ID：14687534
> 
> 赞同：0
> 
> 时间：2013-02-04T13:13:52.440
> 
> 标签：google-app-engine

我正在考虑在我的 GAE/J 应用程序上添加一个博客，并想知道这样做的最佳方式是什么。

有什么我可以使用的实现吗？

我应该自己写点什么吗？

我读过微博，但它是用 python 编写的，我不确定它是否会与我的 Java 应用程序共存。

欣赏你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:38:31.727

虽然我不知道您可以使用任何实现，但这个问题非常广泛，您可以做很多不同的事情，编写自己的就是其中之一。

首先，您可以使用[Blogger API](https://developers.google.com/blogger/)来阅读帖子并将其展示在您的应用中。通过这样做，您可以使用 Blogger 的 UI 添加/修改/删除帖子，并且在您自己的应用程序中，您将只显示帖子。此解决方案的唯一问题是关于评论，您可以在其中实现自己的（只是从某个地方开始）或包括 Facebook 的[评论框](https://developers.facebook.com/docs/reference/plugins/comments/)。

我正是为[kiebdoj.com/blog/](http://www.kiebdoj.com/blog/)做的，它为我节省了很多时间，因为我没有实现自己的[WYSIWYG](http://en.wikipedia.org/wiki/WYSIWYG)编辑器或帖子管理器。那是用 Python 编写的，所以我无法提供任何示例，但无论哪种情况，它都不是为了独立工作而编写的。

# vb.net - VB.Net - 如何用文本中的另一个数组替换一个数组

> ID：14687535
> 
> 赞同：0
> 
> 时间：2013-02-04T13:13:52.667
> 
> 标签：vb.net

我一直在搜索，我发现了一些类似的问题，但它们都不是我的解决方案，所以我需要的是 Visual Basic 中的这个：

我有一个文本*（字符串）*，我有两个这样的数组：

```
Dim data_array_one As String() = {"One", "Two", "Three", "Four"}
Dim data_array_two As String() = {"Five", "Six", "Seven", "Eight"} 
```

我需要将文本中的每个“<em>One”替换为“<em>Five”，将每个“<em>Two”替换为“<em>Six”，等等......我一直在使用一个简单的替换功能：

```
text1 = text1.Replace("One", "Five")
text1 = text1.Replace("Two", "Six")
... 
```

但是现在数组包含 24 个元素，并且每天它都会自动递增，所以我需要从数组中自动执行它，而不是实际的方式......在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:06:10.520

你可以试试这个作为一个简单的修复。

```
dim i as single

For i = 0 to data_array_one.getlength(0)
text1 = text1.Replace(data_array_one(i), data_array_two(i))
next 
```

但是，它的效率不是很高，正如 tcarvin 在对您的问题的评论中所说，这可能会导致在“十四”中替换“四”的问题。

# c - 如何使用 C 实现有效地处理日志文件

> ID：14687541
> 
> 赞同：0
> 
> 时间：2013-02-04T13:14:18.327
> 
> 标签：c, logging, sed, awk

我想处理一个日志文件（使用C），其中数据用双冒号“::”分隔。我想像这样的工具`awk`并且`sed`会非常有效地做到这一点。但是 awk 输出值是否有可能传递给我的 C 变量？例如，一个日志信息是这样的：

```
a::b::c::d 
```

我有一个`struct`由 4 个`int`元素组成的。如何将 4 个部分保存到结构元素中？
我曾想过使用`strtok`libary call 作为另一种方式，但在调用它之前，我必须从一大堆日志信息中整理出合适的行，这让我更多地考虑`sed`or `grep`。
感谢您的帮助。如果你有更好的选择，那将是非常好的你分享它。

更新：我忘了强调上面提到的一切都是在**运行时**完成的，包括“根据给定的值排序匹配的行”，并处理它们，然后存储值。`scanf`很好，但是如果里面`string`有空格怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:22:49.770

`strtok`在你真正需要它之前，我会远离它。这可以通过`scanf`.

```
scanf("%d::%d::%d::%d", &a, &b, &c, &d); 
```

并且，这三个工具`sed`中，真正取决于“梳理合适的线条”的细节。可以很好地检测一个值。并且是更强大的工具，但它们需要更多的时间投入来学习（它们都是图灵完备的编程语言）。`awk``grep``grep``awk``sed`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:23:17.950

假设您有一个指针“s”指向具有 4 个整数字段和一个打开的文件“日志文件”的结构：

```
 res = fscanf(logfile, "%d::%d::%d::%d", &s->field0, &s->field1, &s->field2, &s->field3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:24:04.320

您始终可以使用多种工具。例如，假设您的日志文件位于文件`log.out`.

然后您可以使用`grep`选择您感兴趣的行：

```
grep "^-\?[0-9]\+::-\?[0-9]\+::-\?[0-9]\+::-\?[0-9]\+$" log.out 
```

您可以将其存储为另一个文件，*也*可以直接将其提供给您的程序：

```
grep ... | ./analyze_data 
```

假设您的程序名为`analyze_data`. 在程序的源代码中，您只需读取`stdin`并存储所需的值：

```
scanf("%d::%d::%d::%d", &a, &b, &c, &d); 
```

当然有适当的错误检查。

# android - 是否可以在接收短信时运行活动或线程

> ID：14687545
> 
> 赞同：0
> 
> 时间：2013-02-04T13:14:27.343
> 
> 标签：android, sms

是否可以使用读取传入消息文本的服务创建活动或线程，例如如果 text=ab，启动任何活动，如果 text=abc，更改音频管理器设置，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:19:15.150

查看这篇关于[如何处理短信](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)的文章。

在您的清单中指定：

```
 <receiver android:name=".MyActivityIWhantToLaunch" android:exported="true" >
       <intent-filter android:priority="1000">
           <action android:name="android.provider.Telephony.SMS_RECEIVED" />
       </intent-filter>
    </receiver> 
```

# python - Google API Python 客户端错误

> ID：14687552
> 
> 赞同：3
> 
> 时间：2013-02-04T13:14:41.013
> 
> 标签：python, api, oauth-2.0, google-api-python-client

我想要一个脚本来获取 Google+ 的主页。我用于那个谷歌的 [脚本](https://github.com/musicmetric/google-api-python-client/blob/master/samples/plus/plus.py)。client-secrets.json 文件是：

```
{
 "web": {
   "client_id": "##########",
   "client_secret": "############",
   "redirect_uris": ["http://localhost:8080/oauth2callback/"],
   "auth_uri": "https://accounts.google.com/o/oauth2/auth",
   "token_uri": "https://accounts.google.com/o/oauth2/token",
   "client_email":"##########@developer.gserviceaccount.com",
   "javascript_origins":["http://localhost:8080/"]
        }
} 
```

但是当我想启动这个应用程序时，它会打开一个带有错误和损坏机器人的页面：

`The redirect URI in the request: http://localhost:8080/ did not match a registered redirect URI`

请帮我解决我的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T11:54:22.547

我找到了解决方案！您应该创建另一个客户端 ID，但用于桌面应用程序！之后，您需要使用它的**client_id**和**client_secret**。它适用于在没有托管的情况下进行开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:11:06.250

您用于`client_id`并`client_secret`对应于您创建的 Google API 项目的值并将通过

[https://code.google.com/apis/console/?pli=1#project:XYZ](https://code.google.com/apis/console/?pli=1#project:XYZ)

`XYZ`您的项目 ID在哪里。

在这个项目中，您需要确保这`http://localhost:8080/`是一个重定向 URI

1.  单击右侧的“API 访问”选项卡
2.  为您的应用找到相应的“Web 应用程序的客户端 ID”框
3.  点击“编辑设置...”
4.  添加`http://localhost:8080/`到“授权重定向 URI”框

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T22:14:26.657

**在端口 80**上运行本地服务器并制作配置 URL 只是`http://localhost`为我修复了它。

例如，对于您的情况

```
{
 "web": {
   "client_id": "##########",
   "client_secret": "############",
   "redirect_uris": ["http://localhost/oauth2callback/"],
   "auth_uri": "https://accounts.google.com/o/oauth2/auth",
   "token_uri": "https://accounts.google.com/o/oauth2/token",
   "client_email":"##########@developer.gserviceaccount.com",
   "javascript_origins":["http://localhost"]
        }
} 
```

# c# - 如何区分分配给文件夹安全的用户和组？

> ID：14687558
> 
> 赞同：4
> 
> 时间：2013-02-04T13:14:57.933
> 
> 标签：c#, .net

我编写了一个简单的代码来检索文件夹的安全信息，该信息包含用户和组以及他们对文件夹的权限

```
public void GetSecurityRules(DirectoryInfo directoryInfo)
    {
        DirectorySecurity DSecurity = directoryInfo.GetAccessControl();
        AuthorizationRuleCollection Rules = DSecurity.GetAccessRules(true, true, typeof(NTAccount));

        foreach (FileSystemAccessRule fileSystemAccessRule in Rules)
        {
            Console.WriteLine("User/Group name {0}",fileSystemAccessRule.IdentityReference.Value);
            Console.WriteLine("Permissions: {0}", fileSystemAccessRule.FileSystemRights.ToString());
        }
    } 
```

在这一行中`fileSystemAccessRule.IdentityReference.Value`，我同时获得了用户和组，但我如何知道该值是代表用户还是组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:37:23.243

据我所知，CLR 不会公开此信息。您必须[`LsaLookupSids`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721799.aspx)手动 p/invoke 并检查它将返回的 SID_NAME_USE 值。CLR 也调用此函数以将 SID 转换为帐户名称，但它会丢弃 SID_NAME_USE 值。对于代码，打开你的反射器，打开 mscorlib 并查看内部`TranslateToNTAccounts`函数是如何`System.Security.Principal.SecurityIdentifier`工作的。

作为替代方案，如果您不打算重复进行此类查找，则使用 WMI 可能更容易——[`Win32_Account`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394061.aspx)按 SID 查询 a 并检查 SIDType 成员。

# php - 查询不返回任何内容。如何输入测试以确保我知道它正在工作？

> ID：14687567
> 
> 赞同：0
> 
> 时间：2013-02-04T13:15:32.887
> 
> 标签：php

在被告知访问数据库的旧方法不正确之后。我现在已经开始使用 PDO 对象了。我正在设置一个简单的查询，但我没有得到任何结果。任何帮助或建议将不胜感激。它甚至没有将查询打印回给我。打开错误消息会有所帮助吗？

```
<?php

//print_r(PDO::getAvailableDrivers()); 

$config['db'] = array( //This is the config array with the database details
'host'              => 'localhost',
'username'          => 'root',
'password'          => '',
'dbname'            => 'website'
); 

$db = new PDO('mysql:host=' . $config['db']['host'] . ';dbname' . $config['db']['dbname'],         $config['db']['username'], $config['db']['password']); //Instanciate an PDO Object
$query = $db->query("SELECT 'articles'.'title' FROM 'articles'");//running a query from the database

print_r($query); //printing a query

//while ($row = $query->fetch(PDO::FETCH_ASSOC)){
//      echo $row['title'], '<br>';
//} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:55:33.457

我建议您阅读 PDO 以及错误处理和报告。

[http://php.net/manual/en/pdo.error-handling.php](http://php.net/manual/en/pdo.error-handling.php) 和 [http://php.net/manual/en/pdo.errorinfo.php](http://php.net/manual/en/pdo.errorinfo.php)

他们应该向您展示如何轻松地从您的 sql 查询中获取正确的错误，以便您可以看到出了什么问题。

In you're case your query is wrong it should be `$query = $db->query("SELECT title FROM articles");` No need to specify the tabl to pull from in your select param section and no need for single quotes. You should be using the back tick quote not single quote anyway `

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T13:21:50.603

PHP手册：

```
<?php
function getFruit($conn) {
    $sql = 'SELECT name, color, calories FROM fruit ORDER BY name';
    foreach ($conn->query($sql) as $row) {
        print $row['name'] . "\t";
        print $row['color'] . "\t";
        print $row['calories'] . "\n";
    }
}
?> 
```

您不需要在表名或列名上加上引号。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T13:24:58.143

为什么不先准备语句然后执行它们？

```
$stmt = $db->prepare($sql);
$stmt->execute();
$results = $stmt->fetchAll(); 
```

# ios - 由于 CTFontRef 导致的内存泄漏

> ID：14687568
> 
> 赞同：2
> 
> 时间：2013-02-04T13:15:35.407
> 
> 标签：ios, memory-leaks, ctfontref

我正在使用下面的代码生成 PDF，但它会导致内存泄漏，有人可以帮忙吗？代码如下。

```
- (void)drawText:(NSString*)textToDraw inFrame:(CGRect)frameRect {

    NSMutableAttributedString *string = [[[NSMutableAttributedString alloc]
                                         initWithString:textToDraw] autorelease];

    // make a few words bold

    CTFontRef helveticaBold = CTFontCreateWithName(CFSTR("Helvetica-Bold"), 8.0, NULL);

    [string addAttribute:(id)kCTFontAttributeName
                   value:(id)helveticaBold
                   range:NSMakeRange(0, [string length])];

    // add some color.
    if (_flag == 1) {

        [string addAttribute:(id)kCTForegroundColorAttributeName
                       value:(id)[UIColor whiteColor].CGColor
                       range:NSMakeRange(0, [string length])];

    } else {

        [string addAttribute:(id)kCTForegroundColorAttributeName
                       value:(id)[UIColor blackColor].CGColor
                       range:NSMakeRange(0, [string length])];
    }

    // layout master
    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)string);

    CGMutablePathRef framePath = CGPathCreateMutable();
    CGPathAddRect(framePath, NULL, frameRect);

    // Get the frame that will do the rendering.
    CFRange currentRange = CFRangeMake(0, 0);
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
    CGPathRelease(framePath);

    // Get the graphics context.
    CGContextRef    currentContext = UIGraphicsGetCurrentContext();

    // Put the text matrix into a known state. This ensures
    // that no old scaling factors are left in place.
    CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);
    CGContextSetRGBFillColor(currentContext, 0, 0, 0, 1.0);

    // Core Text draws from the bottom-left corner up, so flip
    // the current transform prior to drawing.
    CGContextTranslateCTM(currentContext, 0, frameRect.origin.y*2);
    CGContextScaleCTM(currentContext, 1.0, -1.0);

    // Draw the frame.
    CTFrameDraw(frameRef, currentContext);

    CGContextScaleCTM(currentContext, 1.0, -1.0);
    CGContextTranslateCTM(currentContext, 0, (-1)*frameRect.origin.y*2);

    CFRelease(frameRef);
    //CFRelease(stringRef);
    CFRelease(framesetter);

} 
```

我在生成时多次调用此函数

PDF，每次这都会导致内存泄漏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T13:22:33.990

`CTFontCreateWithName`遵循创建名称规则，即如果您创建它，您就拥有它，并且您必须在完成后释放它：

```
CFRelease(helveticaBold); 
```

# jsf-2 - 基于编程表单的身份验证

> ID：14687572
> 
> 赞同：1
> 
> 时间：2013-02-04T13:16:00.347
> 
> 标签：jsf-2, form-authentication

我正在尝试执行基于编程表单的身份验证，似乎

我的 web.xml：

```
 <web-app>

            <context-param>
                <param-name>javax.faces.PROJECT_STAGE</param-name>
                <param-value>Development</param-value>
            </context-param>

            <servlet>
                <servlet-name>Faces Servlet</servlet-name>
                <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
                <load-on-startup>1</load-on-startup>
            </servlet>

            <servlet-mapping>
                <servlet-name>Faces Servlet</servlet-name>
                <url-pattern>*.jsf</url-pattern>
            </servlet-mapping>

            <servlet-mapping>
                <servlet-name>Faces Servlet</servlet-name>
                <url-pattern>*.xhtml</url-pattern>
           </servlet-mapping>

            <welcome-file-list>
                <welcome-file>confirmauthentication.xhtml</welcome-file>
            </welcome-file-list>

            <session-config>
                 <session-timeout>10</session-timeout>
            </session-config>

            <security-constraint>
                <display-name>Authentication Ex Login</display-name>
                <web-resource-collection>
                    <web-resource-name>SecuredArea</web-resource-name>
                    <url-pattern>/*</url-pattern>
                    <http-method>GET</http-method>
                    <http-method>POST</http-method>
                </web-resource-collection>
                <auth-constraint>
                    <description/>
                    <role-name>*</role-name>
                </auth-constraint>  
            </security-constraint>

            <login-config>
                <auth-method>FORM</auth-method>
                <realm-name>mysqldomain</realm-name>
                <form-login-config>
                <form-login-page>/authentication.xhtml</form-login-page>
                <form-error-page>/error.xhtml</form-error-page>
                </form-login-config>
            </login-config>

            <security-role>
                <description/>
                <role-name>*</role-name>
            </security-role>
                </web-app> 
```

我的 jsf 页面名为 authentication.xhtml：

```
 <h:form>
                <h:panelGrid border="0" columns="2"> 
                   <h:outputText value="Username"/>
                   <h:inputText value="#{beanJSF.userName}" required="true" />

                   <h:outputText value="Password"/>
                  <h:inputSecret value="#{beanJSF.password}" required="true" />

                   <h:commandButton value="Log in" action="#{beanJSF.submit}">
                         <f:ajax execute="@form" render="@form" />
                   </h:commandButton>
                   <h:messages />    
                </h:panelGrid>
              </h:form> 
```

似乎当我按下“登录”按钮时，没有调用提交方法，我无法弄清楚原因。当我按下按钮时，server.log 不显示任何内容（此消息未显示“（“我在登录方法中！！！！！！！！！...”）。

我的托管豆：

```
 @URLMappings(mappings={
                @URLMapping(id="success", pattern = "/authentication/", viewId =    "/confirmauthentication.jsf")})
                public class BeanJSF implements Serializable  {

            private String password;
            private String userName;
                // User is the Entity
                private User loggedUser;

            @EJB
            UserEJB services;

                public String submit() throws IOException {
            System.out.println("I am in the login method!!!!!!!! " + getUserName()+ "  " + getPassword());   

                FacesContext context = FacesContext.getCurrentInstance();
                ExternalContext externalContext = context.getExternalContext();
                HttpServletRequest request = (HttpServletRequest) externalContext.getRequest();

                try {
                         request.login(userName, password);

               User user = services.authenticationUser(userName, password);  
                    this.setLoggedUser(user);
                    return "home?faces-redirect-true";

                } catch (ServletException e) {
                    // Handle unknown username/password in request.login().
                    context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,"Unknown login", null));
                    return null;
                }
            }

            public void logout() throws IOException {
                ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
                externalContext.invalidateSession();
                externalContext.redirect(externalContext.getRequestContextPath() + "/authentication.xhtml");
            }

               //+ setters and getters for username, password and loggedUser
        } 
```

我的 EJB 是：

```
 @Stateless
                public class UserEJB{

                @PersistenceContext(unitName = "PyPersistenceUnit")
                private EntityManager entityManager;

                 public UserEJB(){}

                @TransactionAttribute(TransactionAttributeType.REQUIRED)
                public User authenticationUser(String userName, String password){

                try{
                 User user = entityManager.createNamedQuery(User.FIND_USER,User.class). setParameter("userName", userName).setParameter("password", password).getSingleResult();
                 return user;
            }
            catch(NonUniqueResultException ex){
                ex.printStackTrace();
                return null;
            }
            catch(NoResultException ex){
                ex.printStackTrace();
                return null;
            }
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:42:01.553

您的 bean 不受 JSF 管理，因此 JSF 无法在任何地方找到该 bean。

将 JSF bean 管理注释添加到类中。

```
@ManagedBean
@RequestScoped
public class BeanJSF implements Serializable {
    // ...
} 
```

# .net - WPF MessageBox 样式未设置

> ID：14687576
> 
> 赞同：0
> 
> 时间：2013-02-04T13:16:05.070
> 
> 标签：.net, wpf, wpf-controls, themes

我正在尝试使用 ResourceDictonary 使用 wpf 主题。它适用于 TabControl、Buttons、TextInput 和除 MessageBox 之外的其他控件。这是我应用主题的方式。

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/PresentationFramework.Aero;component/themes/aero.normalcolor.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources> 
```

我还取消了 app.manifest 文件中的dependencyAssembly 注释，但它似乎对我不起作用。我不想使用扩展的 WPF 工具包。关于如何在 MessageBox 控件上应用主题的任何建议。

IDE：Visual Studio 2010、Windows 7

# html - HTML表格行跨度奇怪的行为

> ID：14687579
> 
> 赞同：2
> 
> 时间：2013-02-04T13:16:14.837
> 
> 标签：html, html-table

我有以下html代码：

```
<table border="1">
    <tbody>
        <tr>
            <td rowspan="4">1 Rowspan=4</td>
            <td rowspan="3">2 Rowspan=3</td>
        </tr>
        <tr>
            <td>3 something</td>
        </tr>
        <tr>
            <td>4 something</td>
        </tr>
        <tr>
            <td>5 something</td>
        </tr>
        <tr>
            <td>6 something</td>
            <td>7 something</td>
        </tr>
        <tr>
            <td>8 something</td>
            <td>9 something</td>
        </tr>
    </tbody>
</table> 
```

它的行为如下：

![在此处输入图像描述](../Images/74d6f8440080ca07b5ec6d1fede2c479.png)

这是错误的！应该只有 2 列！

我希望 #3 低于 #2 和 #4 低于 #1。

为什么这不可能？

这是一个小提琴：http: [//jsfiddle.net/FvY5b/](http://jsfiddle.net/FvY5b/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:56:02.647

该标记违反了 HTML 表格模型。[如果在 HTML5 模式下使用http://validator.w3.org](http://validator.w3.org)检查标记，则会报告错误：“表格行为 3 列宽，超出了第一行建立的列数 (2)。”

因此，正如@Aditi 的回答和 Madara Uchiha 的评论中所建议的那样，在 CSS 中更改`rowspan="4"`并`rowspan="2"`删除`rowspan="3"`并设置第一行的高度（因为明显的意图是使其高于其他情况）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:26:37.423

在前两行试试这个......

```
<tr>
        <td rowspan="2">1 Rowspan=4</td>
        <td>2 Rowspan=3</td>
</tr>
<tr>
            <td>4 something</td>
        </tr>
        <tr>
            <td>3 something</td>
        </tr> 
```

# c - 为什么即使没有服务器监听，ZeroMQ 连接也会返回 0？

> ID：14687581
> 
> 赞同：5
> 
> 时间：2013-02-04T13:16:16.687
> 
> 标签：c, zeromq

我在 C 中使用 ZeroMQ 3.2。我遇到的问题是每当我尝试连接到某个远程端点时

```
void* context = zmq_ctx_new();
void* socket = zmq_socket(context, ZMQ_DEALER);
int rc = zmq_connect(socket, addr); 
```

[rc 始终为 0，这意味着API](http://api.zeromq.org/3-2%3azmq-connect)中提到的一切都正常。即使根本没有服务器*监听*。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T17:08:11.857

一切都是应有的。ZeroMq 的一个优点（当然取决于您如何看待它）是您不必在服务器启动后进行连接，这也意味着即使与服务器的连接暂时断开也可以连接。ZeroMq 将保持连接（请求）并重试。

[zmq_connect()](http://api.zeromq.org/3-2%3azmq-connect)的 Api 文档指出：

> 对于大多数传输和套接字类型，连接不会立即执行，而是根据 ØMQ 的需要执行。因此，对 zmq_connect() 的成功调用并不意味着连接已经或可以实际建立。因此，对于大多数传输和套接字类型，绑定服务器套接字和连接客户端套接字的顺序无关紧要。第一个例外是使用 inproc:// 传输：您必须在调用 zmq_connect() 之前调用 zmq_bind()。第二个例外是 ZMQ_PAIR 套接字，它不会自动重新连接到端点。

如文档中所见，无响应/现有端点没有错误代码。基本上，只要您提供一个有效的端点（例如，您没有达到每个进程的套接字限制），您就应该很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:27:06.227

正如指南所述：

> 一旦客户端节点执行 zmq_connect() 连接就存在并且该节点可以开始将消息写入套接字。在某个阶段（希望在消息排队太多以至于它们开始被丢弃或客户端阻塞之前），服务器启动，执行 zmq_bind() 并且 ØMQ 开始传递消息。

# android - 更改列表菜单中的背景颜色

> ID：14687585
> 
> 赞同：1
> 
> 时间：2013-02-04T13:16:33.847
> 
> 标签：android

我正在使用新波士顿的视频教程中的列表菜单构建一个简单的应用程序 [http://www.youtube.com/watch?v=zjHYyAJQ7Vw&list=EC2F07DBCDCC01493A](http://www.youtube.com/watch?v=zjHYyAJQ7Vw&list=EC2F07DBCDCC01493A)在该课程中，您创建了这个没有任何布局的列表菜单。这一切都对我有用，几乎，菜单在活动中，但我在菜单中看不到任何文字。仅当我按下其中一个菜单选项时，文本才可见。当我在 AVD 或手机上运行我的应用程序时，背景总是白色的。

当您在没有 layout.xml 的活动中创建列表菜单时，有没有办法更改背景颜色和文本颜色？还是可能有其他问题？珍贵的帮助。谢谢！

编辑：我不确定是活动的背景颜色还是菜单中的按钮？全是白色，文本也是白色，但菜单中的选项之间有一条灰线。我不确定下面的答案是否有效，因为我没有使用任何带有列表视图的 xml 布局文件？也许最好用 xml lyaout 文件来代替？Preciate一些进一步的帮助！

编辑：添加了一些代码：

```
public class Menu extends ListActivity{

String classes[] = {"MainActivity", "Example1", "Example2"};

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setListAdapter(new ArrayAdapter<String>(Menu.this,android.R.layout.simple_dropdown_item_1line, classes));
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String selectedClass = classes[position];
    try{
    Class ourClass = Class.forName("com.test.theNewBoston." + selectedClass);
    Intent ourIntent = new Intent(Menu.this, ourClass);
    startActivity(ourIntent);
    }catch(ClassNotFoundException e){
        e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:29:46.287

在我看来，使用普通的 Activity 比使用 ListActivity 更好。

```
ListView list  = (ListView)findViewById(R.id.listView1);

list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    //ListView parent, View v, int position, long id 
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        arg1.setBackgroundColor(Color.RED);
    }
}); 
```

你可以像这样设置背景颜色：

```
list.setBackgroundColor(Color.BLUE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:34:41.307

通过应用选择器尝试这样。它将帮助您更改背景颜色。

```
 <?xml version="1.0" encoding="utf-8"?>
    <selector xmlns:android="http://schemas.android.com/apk/res/android">

        <item android:drawable="@color/pink" android:state_pressed="true"/>

        <item android:drawable="@android:color/transparent"/>

    </selector> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T06:04:20.150

```
public class HttpEx extends ListActivity {

    String options[] = {"BasicConnect","ConnectToSql","TBA","TBA",
                        "TBA","TBA"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<>(getApplicationContext(), android.R.layout.simple_list_item_1, options));
        getListView().setBackgroundColor(Color.BLACK); //add this code into the onCreate
    } 
```

这就是我如何为我的 ListActivity 更改背景颜色。getListView().setBackgroundColor(Color.BLACK); //将此代码添加到onCreate

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-04T13:20:26.157

你可以像这样在java上更改listview的背景

```
yourlistview.setBackgroundColor(color) 
```

对于单击您中的每个项目，您`ListView`可以通过`BG`两种方式进行更改：

第一的。添加`item click listener`到您的`ListView`列表中：

```
list.setOnItemClickListener(new OnItemClickListener() {
    @Override
    //ListView parent, View v, int position, long id 
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        arg1.setBackgroundColor(Color.Black);
    }
}); 
```

第二。使用`Adapter`您的`ListView`然后在`GetView`每个项目上添加 clicklistener

我认为第一种方法更好

# wordpress - 在 wordpress 中调整上传图片的大小

> ID：14687588
> 
> 赞同：0
> 
> 时间：2013-02-04T13:16:44.323
> 
> 标签：wordpress, image-resizing

我有这个我建立的新闻门户，客户想要不同大小的特色图片。

我都准备好了我的第一个想要的尺寸，他们已经发布了大约 200 多个帖子，都准备好了该图像尺寸。现在，如果我更改大小，它只会在新帖子/或重新上传当前精选图片时更改（手动操作太多了）。

我的问题是，有没有办法调整上传的图片大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:40:16.350

我从未使用过它，但我认为[Regenerate Thumbnails](http://wordpress.org/extend/plugins/regenerate-thumbnails/)插件可以做到这一点。

# android - Android sax 解析器图像和文本并传递到下一个活动

> ID：14687594
> 
> 赞同：0
> 
> 时间：2013-02-04T13:16:55.150
> 
> 标签：android, parsing, saxparser

我想通过 SAX Parser 解析它并通过 url 加载图像并将其传递给下一个要显示的活动。但是，如果有任何人可以帮助我或给我一些可重用的代码，我将不胜感激。这是我的 xml 文件。这是我解析的数据类和适配器类。现在我想解析数据，如（日期、成本、描述、图像）并将所有内容放入字符串到它们各自的标签中，并在需要时将其传递给下一个活动。请帮助我还需要在图像上实现共享，所以我需要来自 xml 的图像的 url

**解析数据类**

公共类 ParseData 扩展 DefaultHandler { boolean title , cost , pubDate , link = false;

```
StringBuffer stringTitle , stringCost  , stringPubdate , stringLink = null;

ArrayList<String> arrtitle = new ArrayList<String>();

ArrayList<String> arrcost = new ArrayList<String>();

ArrayList<String> arrpubDate = new ArrayList<String>();

ArrayList<String> arrlink = new ArrayList<String>();

//---------START ELEMENT----------//

@Override
public void startElement(String uri , String localName , String qName , Attributes attributes) throws SAXException 
{
    super.startElement(uri, localName, qName, attributes);

    if(localName.equalsIgnoreCase("title"))
    {
        title = true;

    }else if(localName.equalsIgnoreCase("cost"))
    {
        cost = true;

    }else if(localName.equalsIgnoreCase("pubDate"))
    {
        pubDate = true;

    }else if(localName.equalsIgnoreCase("link"))
    {
        link = true;
    }
}
//--------END ELEMENT----------//

@Override
public void endElement(String uri , String localName , String qName) throws SAXException 
{
    super.endElement(uri, localName, qName);
    if(localName.equalsIgnoreCase("title"))
    {
        title = false;

    }else if(localName.equalsIgnoreCase("cost"))
    {
        cost = false;

    }else if(localName.equalsIgnoreCase("pubDate"))
    {
        pubDate = false;

    }else if(localName.equalsIgnoreCase("link"))
        link = false;
}

@Override
public void characters(char[] ch, int start, int length)throws SAXException 
{
    super.characters(ch, start, length);

    if(title)
    {
        stringTitle = new StringBuffer("");
    title_flag = true;
    }

    if(cost)
    {
        stringCost = new StringBuffer("");
        cost_flag = true;
    }

    if(pubDate)
    {
       stringPubdate = new StringBuffer("link");
   pubDate_flag = true;
    }

    if(link)
    {
       stringLink = new StringBuffer("");
       link_flag = true;
    }
} 
```

}

**连接器类**

公共类 BindDataAdapter 扩展 BaseAdapter {

```
ArrayList<String> title;

ArrayList<String> cost;

ArrayList<String> pubDate;

LayoutInflater inflater;

//---------DEFAULT CONSTRUCTOR-----------//

public BindDataAdapter()
{

}

//-------PARAMETERIZED CONSTRUCTOR------//

public BindDataAdapter(Activity activity , ArrayList<String> title , ArrayList<String> cost , ArrayList<String> pubDate)
{
    this.title = title;

    this.cost = cost;

    this.pubDate = pubDate;

    inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

}

@Override
public int getCount() 
{
    return title.size();
}

@Override
public Object getItem(int position) 
{
    return position;
}

@Override
public long getItemId(int position) 
{
    return position;
}

@Override
public View getView(int position , View convertView , ViewGroup parent) 
{

    if(convertView == null)
    {
        convertView = inflater.inflate(R.layout.list_row , null);
    }

    TextView textViewtitle = (TextView) convertView.findViewById(R.id.type);

    TextView textViewcost = (TextView) convertView.findViewById(R.id.cost);

    TextView textViewdate = (TextView) convertView.findViewById(R.id.date);

    //----I coudnot put text view using setText----//

    return convertView;
} 
```

}

这是我的 MainActivity 类

公共类 MainActivity 扩展 Activity {

```
static final String URLxml = "http://78.46.34.27/kapapps/transaction.xml";

String line = null;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    ListView listView = (ListView) findViewById(R.id.listview);

    try 
    {

        SAXParserFactory factory = SAXParserFactory.newInstance();

        SAXParser saxParser = factory.newSAXParser();

        XMLReader reader = saxParser.getXMLReader();

        URL sourceUrl = new URL(URLxml);

        ParseData data = new ParseData();

        reader.setContentHandler(data);

        reader.parse(new InputSource(sourceUrl.openStream()));

        BindDataAdapter bindDataAdapter = new BindDataAdapter(this , data.title , data.cost , data.pubDate);

        listView.setAdapter(bindDataAdapter);

    } catch (ParserConfigurationException e) 
    {
        e.printStackTrace();

    } catch (SAXException e) 
    {
        e.printStackTrace();

    } catch (MalformedURLException e) 
    {
        e.printStackTrace();
    } catch (IOException e) 
    {
        e.printStackTrace();
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:34:18.963

你的`ParseData`代码应该是这样的：

```
public class ParseData extends DefaultHandler { 

    StringBuilder elementText;
    ArrayList<String> arrtitle = new ArrayList<String>();
    ArrayList<String> arrcost = new ArrayList<String>();
    ArrayList<String> arrpubDate = new ArrayList<String>();
    ArrayList<String> arrlink = new ArrayList<String>();

    public ParseData() {
        elementText = new StringBuilder();
    }

    @Override
    public void endElement(String uri , String localName , String qName) throws SAXException {
        if ("title".equals(localName)) {
            arrtitle.add(elementText.toString().trim());
        } else if ("cost".equals(localName)) {
            arrcost.add(elementText.toString().trim());
        } else if ("pubDate".equals(localName)) {
            arrpubDate.add(elementText.toString().trim());
        } else if ("link".equals(localName)) {
            arrlink.add(elementText.toString().trim());
        }
        elementText.setLength(0);
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        elementText.append(ch, start, length);
    }
} 
```

另一方面，您应该始终在不同的线程中进行 HTTP 请求和 XML 解析（也许使用`AsyncTask`）。然后，一旦解析响应，更新 UI 并显示结果。你需要做很多改变才能让它运行，兄弟。

在`getView`方法中，为什么不能将字符串设置为 TextViews）？（只是利用`getItem(position)`）

**编辑**

如果您的 XML 是这样的，我将定义一个带有所有子标签的 JavaBeans 类，然后作为解析器的结果获取该类的实例列表。这是执行此操作的正确方法。

键入 JavaBeans 类以对 XML 的每个元素进行建模：

```
public class Type {

    int id;
    String title;
    String cost;
    String date;
    String link;

    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public String getCost() {
        return cost;
    }
    public void setCost(String cost) {
        this.cost = cost;
    }
    public String getDate() {
        return date;
    }
    public void setDate(String date) {
        this.date = date;
    }
    public String getLink() {
        return link;
    }
    public void setLink(String link) {
        this.link = link;
    }
} 
```

解析器现在将构建该类的列表：

```
public class ParseData extends DefaultHandler { 

    StringBuilder elementText;
    List<Type> types;
    Type type;

    public ParseData() {
        types = new ArrayList<Type>();
        elementText = new StringBuilder();
    }

    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
        if ("type".equals(localName)) {
            type = new Type();
        }
    }

    @Override
    public void endElement(String uri , String localName , String qName) throws SAXException {
        if ("title".equals(localName)) {
            type.setTitle(elementText.toString().trim());
        } else if ("cost".equals(localName)) {
            type.setCost(elementText.toString().trim());
        } else if ("pubDate".equals(localName)) {
            type.setDate(elementText.toString().trim());
        } else if ("link".equals(localName)) {
            type.setLink(elementText.toString().trim());
        } else if ("type".equals(localName)) {
            types.add(type);
        }
        elementText.setLength(0);
    }

    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
        elementText.append(ch, start, length);
    }
} 
```

**编辑 2**

在您的`getView()`方法中，您必须启动一个从给定的（从 XML 解析的）`AsycTask`检索 a的方法。在方法内部，您可以使用实用方法来检索位图，在方法内部，您可以使用将检索到的位图设置为ImageView。`Bitmap``URL``doInBackground``BitmapFactory``onPostExecute``setImageBitmap``appropiate`

`WeakReference`注意：始终通过使用UI 小部件或在适当时取消`AsyncTask`实例来防止配置更改问题、滚动列表过快或类似的事情。

# c# - 显示 .txt 文件时保持格式

> ID：14687600
> 
> 赞同：0
> 
> 时间：2013-02-04T13:17:09.260
> 
> 标签：c#

我是 c# 的新手，我有一个问题可能有一个非常简单的解决方案。我想导入一个 .txt 文件以在文本框中查看并保持原始文件的格式（所有正确的间距）。这可能吗？当用户单击按钮并显示文件时，我正在使用以下代码打开 .txt 文件。同样，我对编程很陌生，任何帮助都将不胜感激。

```
OpenFileDialog ofd = new OpenFileDialog();

ofd.Filter = "txt files (*.txt)|*.txt|All files (*.*)|*.*";

if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    StreamReader sr = File.OpenText(ofd.FileName);
    string s = sr.ReadLine();
    StringBuilder sb = new StringBuilder();
    while (s != null)
    {
        sb.Append(s);
        s = sr.ReadLine();
    }
    sr.Close();
    textBox1.Text = sb.ToString();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:20:39.463

我相信你应该使用

```
sb.AppendLine(); 
```

代替`sb.Append();`

现在，您可以（应该）也使用`ReadToEnd()`，正如 David Heffernan 所建议的那样。

```
using(StreamReader sr = File.OpenText(ofd.FileName)) {
   textBox1.Text = sr.ReadToEnd();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:22:48.453

我相信你是在想这个。不需要你的循环，框架已经提供了方便的方法来做你想要的。

我会这样写代码：

```
using (StreamReader sr = new StreamReader(ofd.FileName))
{
    textBox1.Text = sr.ReadToEnd();
} 
```

我猜你关于保留间距的问题是因为你的循环不保留换行符。这是使用内置框架的另一个原因。让它承受压力并正确处理细节。

# templates - 自定义 Joomla 模板

> ID：14687602
> 
> 赞同：0
> 
> 时间：2013-02-04T13:17:22.660
> 
> 标签：templates, joomla, header, customization

再会！

你能帮我弄清楚如何自定义 joomla 2.5 模板。问题是 main(index page) 不应该包含 header 块，但其他页面应该。是否有任何解决方案（可能在管理面板中的某个位置找到此选项）。对不起，我的英语不好和对 joomla 的纯知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:21:55.507

如果您可以向我展示您的网站，这可能会有所帮助，但一种简单的选择是使用以下方法来测试模板中的首页：

```
<?php
$app = JFactory::getApplication();
$menu = $app->getMenu();
if ($menu->getActive() == $menu->getDefault()) {
        echo 'This is the front page';
}
?> 
```

另一种选择是防止所有标题模块显示在首页上（如果您的标题由模块组成）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:03:53.473

您可以使用两个不同的模板，并将其中一个分配给您的首页，并将第二个设为默认模板，这样它将分配给您的其余页面。但是，如果唯一不同的是标题的存在并且其他所有内容（如布局、颜色、形状等）都相同，您通常不会这样做。在您的情况下，将标题实现为模块（使用“自定义 HTML”模块类型）并将其设置为仅显示在首页上更有意义。

祝你好运！удачи！

# java - 如何在网站上显示来自谷歌驱动器的word文档？

> ID：14687605
> 
> 赞同：1
> 
> 时间：2013-02-04T13:17:34.487
> 
> 标签：java, google-drive-api

我想显示来自嵌入网站的谷歌驱动器的一些文件。我正在下载 pdf，所以他们使用 adobe 插件。

```
<object  data="https://docs.google.com/..." width="100%" height="100%"></object> 
```

但我也想在网站上显示其他文件（word/excel，...）。目前我正在使用预览，但我找不到放大/缩小、下载按钮、...

```
<iframe src="https://docs.google.com/file/d/googleId/preview" width="100%" height="100%"></iframe> 
```

我也可以使用 /edit 代替 /preview，但这会在 Iframe 中提供整个驱动器 ui。

**还有其他方法可以在网站上显示驱动器文件吗？**

我的应用程序存储了它必须显示的文件的所有驱动器 ID。所有使用该应用程序的用户都具有对该文件的读取权限！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:14:34.980

您可以使用 Google Docs Viewer 轻松嵌入任何文档，如下所示：

```
<iframe src="http://docs.google.com/viewer?url=https%3A%2F%2Fdocs.google.com%2Fuc%3Fexport%3Ddownload%26id%3D0BzEbtMoF6IXbRGE1MUtHYTI1Rkk&embedded=true" width="450" height="350"></iframe> 
```

`0BzEbtMoF6IXbRGE1MUtHYTI1Rkk`文件ID在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:42:16.843

显示这些文件的另一种方法是将它们导出为 PDF。为此，您可以使用`exportLinks`文件资源的 。

[Google 在有关使用 Drive SDK 下载文件](https://developers.google.com/drive/manage-downloads#downloading_google_documents)的文档中提供了如何获取这些导出链接的示例。

# android - 在 Android 上格式化相对于现在的日期的最佳方法

> ID：14687608
> 
> 赞同：35
> 
> 时间：2013-02-04T13:17:42.423
> 
> 标签：android, string, date

我正在 Android 应用程序中创建一个功能来获取任意日期（过去、现在或未来）并找到与现在相关的差异。

my`now`和`due`variables 都是`longs`，这是我的代码：

```
long now = System.currentTimeMillis();
long due = now + 864000;

Log.d("Time in 1 day", DateUtils.getRelativeTimeSpanString(due,now, DateUtils.DAY_IN_MILLIS)); 
```

我希望输出类似于`yesterday`,`today`或. 但是，当前输出返回...`in 4 days``19/12/2012``in 0 days`

我**不**希望时间出现在这些日期字符串上。

我做错了什么，是在 Android 上格式化日期的最佳方法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-09T12:33:33.040

我的想法正在改变：

`DateUtils.getRelativeTimeSpanString(due, now, 0L, DateUtils.FORMAT_ABBREV_ALL);`

由于文档说它返回相对于现在的时间。

如果失败，请使用一些出色的库：

[乔达时间](http://joda-time.sourceforge.net/)

[漂亮时光](http://github.com/ocpsoft/prettytime)

[过去](http://github.com/kevinsawicki/java-timeago)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-10T11:32:20.523

最后我已经实现了你想要的..！

首先你需要[从这里下载 Joda Time](http://sourceforge.net/projects/joda-time/files/joda-time/2.2/)

将其解压缩到任何文件夹并将**joda-time-2.2.jar**放入 androidProject/libs 文件夹。

**主要活动**

```
import org.joda.time.DateTime;
import org.joda.time.Days;
import org.joda.time.Months;
import org.joda.time.MutableDateTime;
import org.joda.time.Weeks;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;

public class MainActivity extends Activity
{
  private int day ;
  private int month ;
  private int year ;
  private int hour ;
  private int minute ;
  private long selectedTimeInMillis;
  private long currentTimeInMillis;
  private String strDay ="";

 @Override
 protected void onCreate(Bundle savedInstanceState) 
 {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    year = 2013;
    month = 8;
    day = 10;
    hour = 15;
    minute = 28;

    DateTime selectedTime = new DateTime(year,month,day,hour,minute);
    selectedTimeInMillis = selectedTime.getMillis();

    MutableDateTime epoch = new MutableDateTime();
    epoch.setDate(selectedTimeInMillis); //Set to Epoch time

    DateTime now = new DateTime();

    currentTimeInMillis = now.getMillis();

    int days = Days.daysBetween(epoch, now).getDays();
    int weeks = Weeks.weeksBetween(epoch, now).getWeeks();
    int months = Months.monthsBetween(epoch, now).getMonths();

    Log.v("days since epoch: ",""+days);
    Log.v("weeks since epoch: ",""+weeks);
    Log.v("months since epoch: ",""+months);

    if(selectedTimeInMillis < currentTimeInMillis) //Past 
    {       
        long yesterdayTimeInMillis = currentTimeInMillis - 86400000;

        DateTime today = new DateTime(currentTimeInMillis);
        int year = today.getDayOfYear();
        int intToday = today.getDayOfMonth();
        DateTime yesterday = new DateTime(yesterdayTimeInMillis);
        int intYesterday = yesterday.getDayOfMonth();
        DateTime selectedDay = new DateTime(selectedTimeInMillis);
        int intselectedDay = selectedDay.getDayOfMonth();
        int intselectedYear = selectedDay.getDayOfYear();

        if(intToday == intselectedDay & year == intselectedYear)
        {
            strDay = "today";
        }
        else if(intYesterday == intselectedDay)
        {
            strDay = "yesterday";
        }
        else
        {
            strDay = "before "+ days +" days from today";
        }

    }
    else if(selectedTimeInMillis > currentTimeInMillis) //Future
    {
        long tomorrowTimeInMillis = currentTimeInMillis + 86400000;

        DateTime tomorrow = new DateTime(tomorrowTimeInMillis);
        int intTomorrow = tomorrow.getDayOfMonth();
        DateTime today = new DateTime(selectedTimeInMillis);
        int intToday = today.getDayOfMonth();

        if(intToday == intTomorrow)
        {
            strDay = "tomorrow";
        }
        else
        {
            days = -days;
            strDay = "after "+ days +" days from today";
        }

    }

    Log.v("strDay: ",""+strDay);
  }
} 
```

你只需要改变 day 的值，你就会得到期望的输出。目前我已将日期 10 作为输入，因此输出将是今天。

我设置了**date/day = 10** , **month = 8** , **year = 2013** , **hour = 15** , **min = 28**

**对于过去的日期：**

```
input day 9 output yesterday

input day 3 output before 7 days from today

input year 2012 and day 10 output before 365 days from today 
```

**对于未来的日期：**

```
input day 11 output tomorrow

input day 27 output after 17 days from today

input day 23 and year 2016 output after 1109 days from today 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-09T12:30:24.627

> 在 Android 上格式化相对于现在的日期的最佳方法

我建议你使用[`JodaTime`](http://joda-time.sourceforge.net/)

它是轻量级的方便库，我认为实际上是处理 Date 实例的最佳工具。

你可以从[这里](https://stackoverflow.com/questions/2179644/how-to-calculate-elapsed-time-from-now-with-joda-time)开始。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-09T12:38:32.023

为什么不检查`yesterday`并`tomorrow`避免`in 0 days`/`0 days ago`错误并留下`DateUtils.getRelativeTimeSpanString`处理剩余的情况？

```
String relative = null;

if(now < due && (due-now)<864000){
    relative = "tomorrow";
}else if(now > due && (now-due)<864000){
    relative = "yesterday";
}else{
    relative = DateUtils.getRelativeTimeSpanString(due, now, DateUtils.DAY_IN_MILLIS); // e.g. "in 4 days"
}

Log.d("result", relative); 
```

编辑：您也可以添加`today`一个简单的检查。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-07T02:06:46.473

**构建.gradle**

```
compile 'joda-time:joda-time:2.9.9' 
```

**实用程序.java**

```
private static SimpleDateFormat DATE_FORMAT = new SimpleDateFormat("MMM dd, yyyy");
    private static SimpleDateFormat TIME_FORMAT = new SimpleDateFormat(" 'at' h:mm aa");
    public static String getRelativeDateTimeString(Calendar startDateCalendar) {
        if (startDateCalendar == null) return null;

        DateTime startDate = new DateTime(startDateCalendar.getTimeInMillis());
        DateTime today = new DateTime();
        int days = Days.daysBetween(today.withTimeAtStartOfDay(), startDate.withTimeAtStartOfDay()).getDays();

        String date;
        switch (days) {
            case -1: date = "Yesterday"; break;
            case 0: date = "Today"; break;
            case 1: date = "Tomorrow"; break;
            default: date = DATE_FORMAT.format(startDateCalendar.getTime()); break;
        }
        String time = TIME_FORMAT.format(startDateCalendar.getTime());
        return date + time;
    } 
```

**输出**

```
Yesterday at 9:52 AM
Today at 9:52 AM
Tomorrow at 9:52 AM
Sep 05, 2017 at 9:52 AM 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-05T07:27:07.353

实际原因是数字 864000 以毫秒为单位，对应 14 分钟。与 DAY_IN_MILLIS（一天）相比，14 分钟太小了。在那里你得到“0天”。如果您希望它“在 14 分钟内”产生，只需将 DAY_IN_MILLIS 更改为 MIN_IN_MILLIS。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-06T19:05:21.617

我来这里是为了另一种选择，但我找不到完美而不是我的代码。所以我在这里分享了任何改进都是受欢迎的。

```
public String getCreatedAtRelative() {
    SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'", Locale.US);
    df.setTimeZone(TimeZone.getTimeZone("IST"));
    CharSequence relative = null;
    try {
        relative = DateUtils.getRelativeTimeSpanString(df.parse(createdAt).getTime(), new Date().getTime(),
                0L, DateUtils.FORMAT_ABBREV_ALL);
    } catch (ParseException e) {
        Log.e("Parse Exception adapter", "created at", e);
    } catch (NullPointerException e) {
        e.printStackTrace();
    }
    if (null == relative) {
        return createdAt;
    } else {
        return relative.toString().replace(".", " ");
    }
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-02-11T13:09:53.247

对于 Android，您可以使用[Joda-Time-Android](https://github.com/dlew/joda-time-android)库最简单的方法：

```
Date yourTime = new Date();
DateTime dateTime = new DateTime(yourTime); //or simple DateTime.now()
final String result = DateUtils.getRelativeTimeSpanString(getContext(), dateTime); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-02-04T15:29:53.113

所以你的计算是以毫秒为单位的，然后你用 SimpleDateFormat 格式化结果。

为此，您可以像这样轻松使用 SimpleDateFormat 格式化程序：

```
Date date = new Date(milliseconds);
SimpleDateFormat formatter = new SimpleDateFormat("EEEE dd MMMM yyyy");
String strDate = formatter.format(date); 
```

所以你的计算应该以毫秒为单位，然后你用 SimpleDateFormat 格式化结果。

模式（“EEEE dd MMMM yyyy”）允许您获取日期格式，例如 2013 年 2 月 4 日星期一。

您可以随意更改模式：“EEEE dd/MM/yy”，...

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-08-01T09:26:26.727

长现在 = System.currentTimeMillis();

DateUtils.getRelativeDateTimeString(mContext, now), DateUtils.SECOND_IN_MILLIS, DateUtils.DAY_IN_MILLIS, 0)

[一个链接](https://imgur.com/a/Wq8Tr)！

# ios - 在 iOS 6.1 上，UISwitch IBOutlet 始终为 nil

> ID：14687610
> 
> 赞同：6
> 
> 时间：2013-02-04T13:17:54.043
> 
> 标签：ios, objective-c, cocoa-touch

我在静态 UISwitch 上工作时遇到了一些麻烦`UITableView`。当应用程序加载时，我必须恢复某个特定的最后状态`UISwitch`，但是每当我检查 的状态时`IBOutlet`，它都是 nil。我试图手动分配变量，这也无济于事。

这是我正在做的事情：

设置控制器.h

```
//IBOutlet connected correctly
@property (strong, nonatomic) IBOutlet UISwitch *switch_displayDetail; 
```

设置控制器.m

```
- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];

    if (!_switch_displayDetail) {
        NSLog(@"_switch_displayDetail is NIL"); //This is always displayed
    }

    //Switch is default to YES, I am trying to set it to NO
    //This line does nothing...
    [_switch_displayDetail setOn:[dataManager shouldDisplayDetail] animated:YES];
} 
```

当我检查它的状态时，其他任何地方`_switch_displayDetail`都是零。我正在调用所有超级初始化方法。iOS 6.1 有什么变化吗？

[编辑] 使用合成变量也不起作用。

[编辑 2] 发现问题是 Xcode 或 iPhone 模拟器上的错误。在我的 iPod touch 上进行测试后，初始算法运行良好。

我要被这个问题发疯了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:38:23.737

我直接知道那些*暮光区*问题是多么令人沮丧。诊断信息显然太少，但我想我会分享我如何处理调试。

1.  覆盖 switch_displayDetail 的设置器，在那里记录值，但也`self`
2.  然后进入`viewWillAppear`，记录同样的事情

我有一种感觉，我们在这里谈论的不是同一个例子。如果我是对的，setter 将显示一个值，但不是`viewWillAppear`. 如果我错了，那么两者都将为零，在这种情况下，要么您没有调用正确的`init`方法，要么您的链接在 IB 中不正确。

只是我的两分钱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T16:25:11.270

谢谢大家的回答，但在几乎放弃之后，我在我的 iPod touch 上测试了我的应用程序，它运行良好。这看起来像是 iPhone 模拟器上的一个错误，或者很可能是 Xcode 上的一个错误（这里没有什么新东西）。重置 iPhone 模拟器菜单上的所有设置和数据后，它也在那里工作。

所以，在发疯之前，先**在真机上测试你的 App**。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T13:57:18.017

第一的 ：

```
@property (strong, nonatomic) IBOutlet UISwitch *switch_displayDetail; // should be a weak property 
```

然后你@synthesized 你的财产了吗？

# java - 如何从字符串文字池中清除条目

> ID：14687613
> 
> 赞同：1
> 
> 时间：2013-02-04T13:18:01.800
> 
> 标签：java

> **可能重复：**
> [String.intern() 的垃圾收集行为](https://stackoverflow.com/questions/2431540/garbage-collection-behaviour-for-string-intern)
> [Java 如何存储字符串以及子字符串如何在内部工作？](https://stackoverflow.com/questions/14193571/how-does-java-store-strings-and-how-does-substring-work-internally)

据我说，当声明为 null 时，字符串引用不会从字符串文字池中删除条目，我想知道如何清除它。

```
 String object="csk";// creates an Object in Java Heap and makes an entry String Literal Pool .
    object=null// however make this reference to null object . 
```

//但它不会从字符串文字中删除一个条目。我怀疑它是否从文字池中删除了一个条目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:32:28.853

字符串文字 (WeakHashMap) 也存储在称为“permgen”堆的堆内存中。需要在 JVM 中进行配置以查找和收集不再需要的动态加载的类，这可能会导致字符串文字被垃圾收集。或者当 JVM 执行 Full gc 时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:29:16.200

Java[如何存储字符串以及子字符串如何在内部工作？](https://stackoverflow.com/questions/14193571/how-does-java-store-strings-and-how-does-substring-work-internally)：

> 池中的字符串可以被垃圾收集（这意味着如果字符串已满，可能会在某个阶段从池中删除）

# c# - 抽象 ViewModel 在被继承时是否被视为模型？

> ID：14687615
> 
> 赞同：1
> 
> 时间：2013-02-04T13:18:04.980
> 
> 标签：c#, mvvm, terminology

如果我有一个由子 ViewModel (VM-B,C,D) 继承的抽象 ViewModel (VM-A)，那么该 ViewModel (VM-A) 是否被视为 ViewModel 的模型？

示例：VM-A 是一个“Shape”类，包含*x*个公共属性，具有抽象的 Calculate() 方法。

VM-B 是一个“Circle”类，继承了 VM-A，并且重写了 Calculate 以使用公共属性执行自己的计算。

那时 VM-A 是否被视为模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:25:52.180

No, it is considered a base ViewModel. The concept **Model** refers to either a domain model which represents the real state content (an object-oriented approach), or the data access layer that represents that content (a data-centric approach).

# symfony - 如何在 symfony 2.x 中实现 per-bundle 404 页面

> ID：14687616
> 
> 赞同：2
> 
> 时间：2013-02-04T13:18:05.390
> 
> 标签：symfony

在我正在处理的一个项目中，需要为每个捆绑包实现自定义 404 页面。

在[文档](http://symfony.com/doc/2.0/cookbook/controller/error_pages.html)中没有提到此类功能。

我正在与一些同事讨论这个问题，并被告知它必须使用 kernel.exception 事件，可惜这个事件缺少包调用它的信息。

恕我直言，这应该通过对 symfony 路由器组件应用补丁来解决，这将允许开发人员指定可以进一步处理这种情况的包罗万象的路由。

另一种选择是更改 RouterInterface::match 方法的行为以返回包含匹配路径和匹配它的包的一致输出。目前这是不可能的，因为如果匹配失败，它会抛出异常并且根本不会给你任何信息，虽然它可以。

例如，我有一个 ApiBundle，它被定义为处理以“/api”开头的 url。目前处理这个并设置自定义 404 页面的唯一方法是在 kernel.exception 和 preg_match() 时获取请求的 url。然而，这是应该避免的硬编码，因为包不应该有这样的知识——它是在 app/config/routing 文件下定义的。

你怎么看？
我也将不胜感激任何其他解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:08:15.347

我最终实现了我的自定义[ExceptionController](http://symfony.com/doc/2.0/reference/configuration/twig.html#config-twig-exception-controller)，它调度了一个我称为“ourCompany.exception_response”的事件。

*   默认捆绑包有一个优先级为 -1024 的侦听器。
*   如果自定义捆绑包处理异常并设置其响应，则必须标记事件并停止传播。
*   自定义包可以使用服务容器来获取它想要的任何东西，以确定是否处理异常。

# codeigniter - CodeIgniter - 从表中获取行，其中 id 是数组的 id

> ID：14687624
> 
> 赞同：0
> 
> 时间：2013-02-04T13:18:33.507
> 
> 标签：codeigniter

我有一张 korisnik 表，有 3 列（id、用户名、密码）。我想要一些像：

```
$upit = "SELECT * FROM korisnik WHERE username = '" . $_POST['username'] . "'
AND password = SHA1('" . $_POST['password'] . "')";
$temp = $upit->fetch(PDO::FETCH_ASSOC); 
        $_SESSION['id'] = $temp['id'];

 if ($pdo_izraz->num_rows() == 1) {    
    session_start();
    $_SESSION['autorizovan'] = 1;
    $temp = $pdo_izraz->fetch(PDO::FETCH_ASSOC);
    $_SESSION['id'] = $temp['id'];

    $upit = ("Select * from korisnici where id=" . $_SESSION['id']);*
    $izraz = $dbh->query($upit);
    $obj = $izraz->fetch(PDO::FETCH_ASSOC);
    $username = $obj['username'];
    echo "<p id='bbb'><b >$username</b>:Welcome</p>"; 
```

我想在 CodeIgniter 中做这样的事情（得到一行，其中 id=array of one row ($_SESSION['id']

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:42:02.367

我想你正在寻找`result_array()`

[在此处](http://ellislab.com/codeigniter/user-guide/database/results.html)查看手册

```
$query = $this->db->query("YOUR QUERY");

foreach ($query->result_array() as $row)
{
   echo $row['title'];
   echo $row['name'];
   echo $row['body'];
} 
```

**更新**

```
public function login($user, $pass) // Takeing the username/pass from form
{
    $this->db->where('username', $user);
    $this->db->where('password', md5($pass));

    $query = $this->db->get('korisnici');

    if ($query->num_rows() == 1)
    {
        $_SESSION['id'] = $this->query->row()->id;
        return TRUE;
    }
    else
    {
        return FALSE;
    }
}

public function getData()//Get result of array
{
    $this->db->where('id', $_SESSION['id']);
    $query = $this->db->get('korisnici');
    return $query->result(); // here you can change for result_array() if you want
} 
```

# string - 我应该如何从clojure中的惰性序列中创建一个字符串？

> ID：14687632
> 
> 赞同：3
> 
> 时间：2013-02-04T13:18:57.343
> 
> 标签：string, printing, clojure, lazy-evaluation

我一直使用 str 来构造字符串：

```
user> (str '(1 2 3) " == " '(1 2 3))
"(1 2 3) == (1 2 3)" 
```

大约每天一次，我的屁股被咬到了：

```
user> (str '(1 2 3) " == " (map identity '(1 2 3)))
"(1 2 3) == clojure.lang.LazySeq@7861" 
```

我想我可以说：

```
user> (with-out-str (print '(1 2 3) " == " (map identity '(1 2 3))))
"(1 2 3)  ==  (1 2 3)" 
```

相反，但它看起来很难看。有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:25:32.890

您可以使用`print-str`：

```
(print-str '(1 2 3) " == " (map identity '(1 2 3)))
;; => "(1 2 3) == (1 2 3)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:58:14.097

您可以使用以下方法将 LazySeq 对象转换为 Cons 对象`seq`：

```
user=> (str '(1 2 3) " == " (map identity '(1 2 3)))
"(1 2 3) == clojure.lang.LazySeq@7861"

user=> (str '(1 2 3) " == " (seq (map identity '(1 2 3))))
"(1 2 3) == (1 2 3)" 
```

# ios - 如何为苹果 appStore 创建虚荣 URL？

> ID：14687635
> 
> 赞同：1
> 
> 时间：2013-02-04T13:19:10.960
> 
> 标签：ios, app-store, vanity-url

最近有消息传出，可以为 Apple Appstore 创建虚荣 URL。 ![在此处输入图像描述](../Images/f426c2ea85f87acfb59edbedfcadd7a6.png)

但我找不到在 iTunes Connect 中额外添加的任何选项来执行此操作。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T13:25:27.353

看来我们什么都不用做……只需要在[http://appstore.com/末尾添加公司名称或应用名称即可](http://appstore.com/)

似乎由于所有应用程序名称和公司名称都已经是唯一的，因此苹果执行了将应用程序商店链接重新路由到实际 iTunes 链接的所有后台工作。

iOS：[http](http://appstore.com/) : //appstore.com/ <.companyname.> 例如，[http ://appstore.com/ikural](http://appstore.com/ikural)

Mac：[http](http://appstore.com/mac/) : //appstore.com/mac/ <.companyname.> 例如，[http ://appstore.com/mac/popcap](http://appstore.com/mac/popcap)

苹果提供了这个[问答页面](https://developer.apple.com/library/ios/#qa/qa1633/_index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:27:10.730

你不创造它。它基于您的公司或应用程序名称。它不是很健壮（两个具有相同名称的应用程序可以具有相同的 URL）。请参阅 Apple 的[技术问答](https://developer.apple.com/library/ios/#qa/qa1633/_index.html)。特别是，最后一段内容如下：

> 这些 App Store 短链接是为了方便而提供的，并不保证链接到特定的应用程序或公司。在任何营销或其他公共材料中使用它们之前，请务必测试您的 URL。如果存在命名冲突，请继续使用标准 itunes.apple.com URL，其中包含 URL 中的唯一数字标识符。

# .net - 使用自定义源设置gridview中的页数

> ID：14687637
> 
> 赞同：1
> 
> 时间：2013-02-04T13:19:23.997
> 
> 标签：.net, gridview, paging, sqldatasource

这是场景：我有对 TemplateField 标题进行排序的 gridView - 设置了 SortExpression 并实现了 gridView_Sorting 函数。

我在 ViewState 中存储排序值和方向。

我也不使用 SQL 检索所有记录，而只是检索“PageSize”记录，与此处描述的非常相似： [启用排序和分页的 T-SQL 存储过程无法正常工作](https://stackoverflow.com/questions/8937145/t-sql-stored-procedure-with-sorting-and-paging-enabled-not-working-properly)

我使用 List 作为数据源。

现在，我的问题是，因为我只检索“PageSize”的记录，所以我的分页没有显示。gridView.PageCount 不能设置，因为它是只读的。如果我使用 objectDataSource 作为源，那么我的排序将无法正常工作。现在它工作得很好 - 对于第一页......因为不显示分页。

那么，如何设置 GridView 的页数？

我正在使用 Visual Studio 2010 和 SQL Server 2008。

任何提示将不胜感激。

# html - 为什么 MVC actionlink 不能正确呈现？

> ID：14687638
> 
> 赞同：1
> 
> 时间：2013-02-04T13:19:23.657
> 
> 标签：html, asp.net-mvc, html-helper, html.actionlink

我正在传递这个：

```
<%: Html.ActionLink("Edit", "EditCRMRequest", "CRM", new { Id = item.Id })%> 
```

我正在浏览器中：

```
http://something.com/CRM/EditCRMRequest?Length=3 
```

带有错误代码：

> 参数字典包含“ApricaCRMEvent.Controllers.CRM.CRMController”中方法“System.Web.Mvc.ActionResult EditCRMRequest(Int32)”的不可为空类型“System.Int32”的参数“Id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

如果我在浏览器中明确编写它，它可以正常工作：

```
http://something.com/CRM/EditCRMRequest?Id=3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:26:05.197

Correct way:

```
<%: Html.ActionLink("Edit", "EditCRMRequest", "CRM", new { Id = item.Id },null)%> 
```

No overload method like this:

```
Html.ActionLink(string text, string action, string controller, object routeValues) 
```

If you write like above, `Lenght=3` is represent "CRM". Controller name behave as routeValues

Correct method is:

```
Html.ActionLink(string text, string action, string controller, object routeValues, object htmlAttributes) 
```

# plugins - 如何使用 Netbeans 插件？

> ID：14687643
> 
> 赞同：0
> 
> 时间：2013-02-04T13:19:38.697
> 
> 标签：plugins, netbeans

我使用的是 NetBeans 7.2.1，而且我是 Java 新手（但我大部分时间都在 C# 中编程）。我最近从 Java.net 下载、安装并激活了一个插件（nbm 文件）。我一直在努力研究如何在我的 JFrame 应用程序中“导入”或“打包”它，以便我开始编写代码。

这是下载插件的链接：http: [//java.net/projects/nbplugin-avr/downloads](http://java.net/projects/nbplugin-avr/downloads)

有人可以指导我吗，这在 C# 中有很大的不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:24:25.863

插件适用于 netbeans 应用程序。它将功能添加到 netbeans IDE。插件不是您可以导入项目的类。

您还应该检查该插件是为 netbeans 6 还是 7 编写的。netbeans 6 插件在 netbeans 7 上不起作用

# objective-c - UISPlitViewController 弹出按钮丢失

> ID：14687646
> 
> 赞同：0
> 
> 时间：2013-02-04T13:19:44.127
> 
> 标签：objective-c, uisplitviewcontroller

我正在尝试以编程方式用 SplitViewController 替换当前视图。这是我的代码。

```
ProjectNavigationController *projectNavPanel = [[ProjectNavigationController alloc] init];
[projectNavPanel setProjectIndex:[indexPath row]];
[projectNavPanel setKuluId:[[[[[appDelegate userSettingsDictionary] objectForKey:@"Projects"] objectAtIndex:[indexPath row]] objectForKey:@"Kulu Id"] intValue]];

ProjectDetailController *projectDetailPanel = [[ProjectDetailController alloc] init];
[projectDetailPanel setProjectIndex:[indexPath row]];
ProjectSplitViewController *splitRootController = [[ProjectSplitViewController alloc] init];

[splitRootController setViewControllers:[NSArray arrayWithObjects:projectNavPanel, projectDetailPanel, nil]];

[[self view] removeFromSuperview];
[[appDelegate window] setRootViewController:splitRootController]; 
```

这几乎可以正常工作，但有一个例外。当拆分视图控制器加载并处于纵向模式时，导航视图会隐藏 - 正如预期的那样 - 但详细视图没有带有按钮的工具栏，用于在弹出视图中显示导航。根据我的研究，我知道这是默认行为。我错过了什么吗？detailViewController 中的代码很少，所以我没有在此处包含代码，但如果有帮助，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:04:13.327

您的代码中缺少一些东西；

首先，要让导航栏添加按钮，你必须`UINavigationController`在你的`UISplitViewController`和你的`ProjectDetailController`.

其次，您必须设置一个 UISplitViewControllerDelegate 并使用委托方法来添加按钮：

```
- (void)splitViewController:(UISplitViewController *)svc willHideViewController:(UIViewController *)aViewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)pc
{   
    [[projectDetailPanel navigationItem] setLeftBarButtonItem:barButtonItem animated:YES];
}

- (void)splitViewController:(UISplitViewController *)svc willShowViewController:(UIViewController *)aViewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    [[projectDetailPanel navigationItem] setLeftBarButtonItem:nil animated:YES];
} 
```

第三，不要忘记将标题设置为 your ，或在您刚刚实现的方法中`ProjectNavigationController`手动设置标题。`barButtonItem``splitViewController:willHideViewController:withBarButtonItem:forPopoverController`

# html - 如何在 TextArea 中放置语法突出显示的代码

> ID：14687647
> 
> 赞同：1
> 
> 时间：2013-02-04T13:19:45.173
> 
> 标签：html, syntax-highlighting

我已经使用 Rainbow 创建了一个简单的语法荧光笔，现在效果很好，我想将结果代码放在 textarea 中，但是每当我这样做时，

```
var text='<pre><code data-language="java">'+MyCode+'</code></pre>';
document.write(text); 
```

它不工作。实际上我想做这样的事情：[所有](http://tohtml.com)颜色代码的输出文本都在textarea中打印。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:23:56.563

**edit:** [http://codemirror.net/](http://codemirror.net/) seems to do just this.

as far as i know, you can not highlight / stylize parts of a textarea. it's either the whole textarea or no style.

you can check out [http://www.jsfiddle.net](http://www.jsfiddle.net) to see how they did it. It's complicated.

# java - 在 GUI 中显示的矢量图形

> ID：14687651
> 
> 赞同：1
> 
> 时间：2013-02-04T13:20:02.083
> 
> 标签：java, swing, applet, jframe, vector-graphics

`JFrame`是否可以在或中加载矢量图像（例如 .svg、.cdr、.pdf）`Applet`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:58:07.983

我会使用[Apache Batik SVG Toolkit](http://xmlgraphics.apache.org/batik/)。免费。

# css - 为什么 Font Squirrel 的 @font-face 定义包含两个 src 声明？

> ID：14687657
> 
> 赞同：2
> 
> 时间：2013-02-04T13:20:26.800
> 
> 标签：css, font-face

在对以跨浏览器友好的方式使用 @font-face 的“正确”语法进行一些研究时，我遇到了以下站点，这很有意义：
[http ://www.fontspring.com/blog/ the-new-bulletproof-font-face-syntax](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

但是，如果您查看 Font Squirrel 提供的任何 @font-face 演示代码，@font-face 定义如下：

```
@font-face {
    font-family: 'OswaldLight';
    src: url('/utils/load_demo_font.php?font=1145/Oswald-Light-webfont.eot');
    src: url('/utils/load_demo_font.php?font=1145/Oswald-Light-webfont.eot?#iefix') format('embedded-opentype'),
         url('/utils/load_demo_font.php?font=1145/Oswald-Light-webfont.woff') format('woff'),
         url('/utils/load_demo_font.php?font=1145/Oswald-Light-webfont.ttf') format('truetype'),
         url('/utils/load_demo_font.php?font=1145/Oswald-Light-webfont.svg#OswaldLight') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

为什么 Font Squirrel 演示脚本都包含两个 src 声明？我无法理解这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-20T14:59:15.557

这是一个IE9兼容模式问题。

完整的解释，先看：[http ://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

> 这个怎么运作
> 
> Internet Explorer <9 在 src 属性的解析器中有一个错误。如果您在 src 中包含多个字体格式，IE 将无法加载它并报告 404 错误。原因是 IE 试图将左括号之间的所有内容作为文件加载到最后一个右括号。要处理这种错误行为，您只需先声明 EOT 并附加一个问号。问号使 IE 误以为字符串的其余部分是查询字符串并仅加载 EOT 文件。

然后看后续文章：[http ://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax](http://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax)

> 微软提出了我们本月早些时候引入的新语法的潜在问题。即将发布的 IE9 带有一项功能，可以在 IE7 和 IE8 模式下进行渲染。在这两种模式下，微软“修复”了影响实际 IE7 和 IE8 的解析器错误。此修复破坏了这些兼容模式的 @font-face 语法。
> ...
> 这种语法与我们之前的迭代完全相同，只是添加了第二个“src:”属性，再次指定 EOT。我们将由您决定是否有必要这样做。

如果您不关心兼容性视图，您可以先将其清除`src`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:23:36.143

如果浏览器理解第二个而不是第一个，则第二个覆盖第一个。通过这种方式，您可以添加对多个浏览器的兼容性。浏览器 A 使用第一个 SRC，浏览器 B、C 和 D 使用第二个 SRC 语句。

# c# - c#中的随机名称生成器

> ID：14687658
> 
> 赞同：4
> 
> 时间：2013-02-04T13:20:28.300
> 
> 标签：c#, random, names

我有一个女性和男性名字的列表，然后是数组中的姓氏列表。

我试图做的是使用随机生成器在这些数组中获取这些名称，并根据我的调用输出一个随机的名字和姓氏。

完成后，我将在其他类中引用该方法，而不必每次都将其写出来。

这是我到目前为止的代码：

```
 private void RandName()
  {
        string[] maleNames = new string[1000] { "aaron", "abdul", "abe", "abel", "abraham", "adam", "adan", "adolfo", "adolph", "adrian"};
        string[] femaleNames = new string[1000] { "abby", "abigail", "adele", "adrian"};
        string[] lastNames = new string[1000] { "abbott", "acosta", "adams", "adkins", "aguilar"};

        Random rand = new Random(DateTime.Now.Second);
        if (rand.Next(1, 2) == 1)
        {
            FirstName = maleNames[rand.Next(0, maleNames.Length - 1)];
        }
        else
        {
            FirstName = femaleNames[rand.Next(0, femaleNames.Length - 1)];
        }

  } 
```

**我的问题是：**如何使用我创建的名称数组创建一个随机名称生成器？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-04-19T13:37:42.263

```
 public static string GenerateName(int len)
    { 
        Random r = new Random();
        string[] consonants = { "b", "c", "d", "f", "g", "h", "j", "k", "l", "m", "l", "n", "p", "q", "r", "s", "sh", "zh", "t", "v", "w", "x" };
        string[] vowels = { "a", "e", "i", "o", "u", "ae", "y" };
        string Name = "";
        Name += consonants[r.Next(consonants.Length)].ToUpper();
        Name += vowels[r.Next(vowels.Length)];
        int b = 2; //b tells how many times a new letter has been added. It's 2 right now because the first two letters are already in the name.
        while (b < len)
        {
            Name += consonants[r.Next(consonants.Length)];
            b++;
            Name += vowels[r.Next(vowels.Length)];
            b++;
        }

        return Name;

     } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T13:29:33.697

我猜你的随机生成器的结果每次都是一样的..

`rand`如果这是你的问题，你不应该每次都创建局部变量。而是创建字段。

喜欢：

```
private static Random rand = new Random(DateTime.Now.Second);

private void RandName()
{
   ...
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-04T13:26:14.283

好的，在不知道您面临的问题的情况下，这有点像在黑暗中刺伤，但我认为您的问题是您已将数组大小声明为`1000`，但每个值只输入了大约 10 个值。因此，您的数组只有 1% 已满，因此您大多会获得空名称。

尝试以下操作：

```
// Note I have not specified the array size.
string[] maleNames   = {"aaron", "abdul", "abe", "abel", "abraham", "adam", "adan", "adolfo", "adolph", "adrian"};
string[] femaleNames = {"abby", "abigail", "adele", "adrian"};
string[] lastNames   = {"abbott", "acosta", "adams", "adkins", "aguilar"}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T13:29:13.883

由于随机实例是在`RandName`其中创建的，因此当方法调用非常快（循环中的fe）时，您将创建相同的名称。您应该使用一个字段或将随机数作为参数传递给该方法。

除此之外，你永远不会到达`else`这里的街区

```
if (rand.Next(1, 2) == 1) 
```

因为 的第二个参数[`Random.Next`](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)是唯一的上限，它总是生成 1。所以你可能想要这个：

```
if (rand.Next(0, 2) == 1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T13:59:20.683

我认为你应该看看[AutoPoco](http://autopoco.codeplex.com/)。

如何使用它的[一个例子。](https://stackoverflow.com/questions/4884762/how-to-get-random-values-for-logicaltypes/4885952#4885952)

如果您[更深入地查看](http://autopoco.codeplex.com/wikipage?title=DataSourceList&referringTitle=Documentation)文档，您会发现已经存在的名字和姓氏数据源（可以使用、放大或替换）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-28T22:37:09.573

像这样格式化你的字符串......

```
 string[] maleNames = new string[] { "aaron", "abdul", "abe", "abel", "abraham", "adam", "adan", "adolfo", "adolph", "adrian"};
    string[] femaleNames = new string[] { "abby", "abigail", "adele", "adrian"};
    string[] lastNames = new string[] { "abbott", "acosta", "adams", "adkins", "aguilar"}; 
```

或者对我来说，更简单的方法是使用列表。我用它们来遍历文件。主要区别在于您必须使用 List.Add() 一次添加一个，并且它使用 List.Count 而不是 Array.Length。List 还允许您修改条目而无需调整数组的大小。在您的情况下，您尝试创建的列表如下所示

```
List<string> maleNames = new List<string>();
List<string> femaleNames = new List<string>();
List<string> lastNames = new List<string>(); 
```

然后使用 System.IO 打开单独的文件并将每一行读入三个列表。这就是我会做的方式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-11T14:03:39.157

```
 public string GenerateToken(Byte length) {
        var bytes = new byte[length];
        var rnd = new Random();
        rnd.NextBytes(bytes);
        return Convert.ToBase64String(bytes).Replace("=", "").Replace("+", "").Replace("/", "");
    } 
```

是一个非常简单的生成器..

# jquery - 带有 jquery.ui 滑块的 jqGrid 过滤器：值小于 100 时的奇怪行为

> ID：14687660
> 
> 赞同：2
> 
> 时间：2013-02-04T13:20:31.727
> 
> 标签：jquery, jqgrid

我们已经使用 jqGrid 之外的按钮和滑块等 jquery.ui 组件实现了过滤（在网上商店中）。列表（网格）的可用过滤器取决于当前处于活动状态的类别。当按钮和滑块被按下/使用时，我们创建规则并将它们添加到过滤器属性中，并在必要时将它们删除。

在大多数情况下，这就像一个魅力，但是当为包含从 < 100 到 > 100 的值的类别创建特定过滤器时，如果我们使用滑块进行过滤，结果会出现奇怪的情况。一旦我们开始拉动滑块的下部，当较低的值大于最小值（即 < 100）但小于 100 时，整个结果集就会消失。在这种情况下，最小值是 97,6 和对于滑块上的值 98 和 99，结果为空。但是当滑块值变为 100 或更大时，结果是正确的。我还将值低于 100 的文章更改为 > 100，然后一切都按预期工作。

当拉动滑块的下端时，我们向过滤器添加一个“ge”规则，当我们拉动较高值的一端时，我们添加一个“le”规则。

我们使用 jqgrid 4.3.1，我今天也尝试使用 4.4.4 版本，结果相同。

我们也使用瑞典语语言环境，如果这与 jqGrid 如何解释网格中的值有关。

**更新（代码）**：

首先，我们从要在网格中显示的项目集合中获取最小值和最大值。

```
else if (dynamicFilters[l].Type == "slider") {
                            //Get the smallest and the biggest value that we should be able to filter on

                            //Parse the value so that there are no non-numberic characters, and also replace ',' with '.' so that it can be converted to a numeric value
                            var currentValue = property.Value.replace(/[^0-9.,]/g, '').replace(/[,]/g, '.');
                            var index = property.Value.indexOf(".");

                            if (index >= 0) {
                                currentValue = property.Value.substring(0, index);
                            }

                            currentValue = Number(currentValue);

                            //Specific case where no value has been set
                            if (dynamicFilters[l].Values[0] == 0 && dynamicFilters[l].Values[1] == 0) {
                                dynamicFilters[l].Values[0] = currentValue;
                                dynamicFilters[l].Values[1] = currentValue;
                            } else {
                                //Else check if the value is either smaller or larger than those in the array
                                if (dynamicFilters[l].Values[0] > currentValue) {
                                    dynamicFilters[l].Values[0] = currentValue;
                                }
                                if (dynamicFilters[l].Values[1] < currentValue) {
                                    dynamicFilters[l].Values[1] = currentValue;
                                }
                            }
                        } 
```

这似乎工作正常，我已经在 Chrome devtools 中调试过它并且值是正确的。

然后我们在 GUI 中创建实际的滑块：

```
else if (filter.Type == "slider") {
            //Create the slider filters

            //Start the container for the slider filter, the second div is then used to create the slider with the jQuery UI control
            $("#dynamicFilters").append('<div class="dynamic-filter"><strong>' + filter.DisplayName + '</strong> <input type="text" id="' + filterId + '_amount" class="dynamic-filter-amount"></input><div id="' + filterId + '" class="dynamic-slider-filter" filter-property="' + filter.ParameterName + '" filter-type="' + filter.Type + '" filter-unit="' + filter.Unit + '" filter-value="' + filter.Values[0] + ';' + filter.Values[1] + '"></div></div>');

            var filters = currentProfile.Filters;
            var minValue = -1;
            var maxValue = -1;

            //Check if there are any values saved for this very filter, if so set the values of the slider
            if (filters != null && !currentProfile.FilterListUrlChanged) {
                for (var j = 0; j < filters.length; j++) {
                    if (filters[j].Field == filter.ParameterName && filters[j].OperatorType == "ge") {
                        minValue = filters[j].Data;
                    }
                    if (filters[j].Field == filter.ParameterName && filters[j].OperatorType == "le") {
                        maxValue = filters[j].Data;
                    }
                }
            } else {
                minValue = filter.Values[0];
                maxValue = filter.Values[1];
            }

            if (minValue == -1) {
                minValue = filter.Values[0];
            }

            if (maxValue == -1) {
                maxValue = filter.Values[1];
            }

            //Create the actual slider
            if (filter.Values[0] != filter.Values[1]) {
                $("#" + filterId).slider({
                    range: true,
                    min: parseInt(filter.Values[0]),
                    max: parseInt(filter.Values[1]),
                    values: [parseInt(minValue), parseInt(maxValue)],
                    slide: function (event, ui) {
                        var filterProperty = $(this).attr("filter-property");
                        var filterType = $(this).attr("filter-type");
                        var filterUnit = $(this).attr("filter-unit");
                        $("#" + filterProperty + "_amount").val("(" + ui.values[0] + " " + filterUnit + " - " + ui.values[1] + " " + filterUnit + ")");
                        articleListFilter._applyFilter(that, filterProperty, filterType, [ui.values[0], ui.values[1]]);
                    },
                    stop: function (event, ui) {
                        //Add the slider filter to the current profile, but only if they have actually moved from their initial position
                        if (ui.values[0] != $(this).slider("option", "min")) {
                            articleListFilter._addProfileFilter(document.URL, $(this).attr("filter-property"), "ge", $(this).attr("filter-type"), ui.values[0]);
                        }
                        else {
                            articleListFilter._removeProfileFilter(document.URL, $(this).attr("filter-property"), $(this).attr("filter-type"), "ge", ui.values[0]);
                        }

                        if (ui.values[1] != $(this).slider("option", "max")) {
                            articleListFilter._addProfileFilter(document.URL, $(this).attr("filter-property"), "le", $(this).attr("filter-type"), ui.values[1]);
                        }
                        else {
                            articleListFilter._removeProfileFilter(document.URL, $(this).attr("filter-property"), $(this).attr("filter-type"), "le", ui.values[1]);
                        }
                    }
                });
                $("#" + filterId + "_amount").val("(" + $("#" + filterId).slider("values", 0) + " " + filter.Unit + " - " + $("#" + filterId).slider("values", 1) + " " + filter.Unit + ")");
            }
        } 
```

这部分也有效（据我所见），值设置正确，并且它适用于我们尝试使用滑块过滤的所有其他属性。即使范围是 < 100 到 > 100。

_applyFilter 函数如下所示：

```
_applyFilter: function (that, property, type, value) {
    var myfilter = {};

    //Get a new fresh filter or the current one
    if (that.data("Filter") == null) {
        myfilter.filter = { groupOp: "AND", rules: [] };
        myfilter.HasPriceFilter = false;
        myfilter.HasBrandFilter = false;
        myfilter.HasSmallFilter = false;
        myfilter.HasMediumFilter = false;
        myfilter.HasLargeFilter = false;
        myfilter.HasAdditionFilter = false;
        myfilter.HasMiscFilter = false;
    } else {
        myfilter = that.data("Filter");
    }

    myfilter = articleListFilter._filterDynamic(myfilter, property, type, value);

    //Must reload here so that the paging won't get stuck on a page that has no items. Must be done before the filter is set.
    $("#articles").trigger("reloadGrid");

    that.data("Filter", myfilter);

    articleListFilter._setFilter(that, myfilter.filter, 1);
} 
```

_filterDynamic 函数的工作方式如下：

```
else if (type == "slider") {
        //Need to check if there already is a filter for the same property and type, if the data should be changed or pushed into the rules array
        var addMinRule = true;
        var addMaxRule = true;
        var minValue = $("#" + property).slider("option", "min");
        var maxValue = $("#" + property).slider("option", "max");

        for (var j = 0; j < myFilter.filter.rules.length; j++) {
            var rule = myFilter.filter.rules[j];

            if (rule.field == property && rule.op == "ge") {
                rule.data = value[0];
                addMinRule = false;
            }
            else if (rule.field == property && rule.op == "le") {
                rule.data = value[1];
                addMaxRule = false;
            }
        }

        if (addMinRule) {
            myFilter.filter.rules.push({ field: property, op: "ge", data: value[0] });
        }

        if (addMaxRule) {
            myFilter.filter.rules.push({ field: property, op: "le", data: value[1] });
        }

        if (value[0] == minValue || value[1] == maxValue) {
            for (var k = 0; k < myFilter.filter.rules.length; k++) {
                var removeRule = myFilter.filter.rules[k];

                if (removeRule.field == property && removeRule.op == "ge") {
                    if (value[0] == minValue) {
                        myFilter.filter.rules.splice(k, 1);
                    }
                }
                else if (removeRule.field == property && removeRule.op == "le") {
                    if (value[1] == maxValue) {
                        myFilter.filter.rules.splice(k, 1);
                    }
                }
            }
        }
    } 
```

欢迎任何帮助或类似的故事！

亲切的问候，比约恩

# git - Gemfile 锁合并冲突

> ID：14687662
> 
> 赞同：2
> 
> 时间：2013-02-04T13:20:53.413
> 
> 标签：git

我正在使用我的应用程序从我的主分支执行 git pull 到一台本地机器，它在我的 Gemfile 锁中给我一个合并冲突错误。

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:17:51.593

您更改了 Gemfile 的版本。其他人在 master 上更改了相同的 Gemfile。

现在 git 无法决定是要保留自己的版本，还是要使用主版本，或者只是部分使用主版本。

您是否故意更改了 Gemfile？

如果是，可能`git mergetool`会帮助您解决冲突。

如果不是，您可以简单地用`git reset --hard @{u}`.

# python - 如何编写一个程序来乘以最短行的数字列表？

> ID：14687663
> 
> 赞同：1
> 
> 时间：2013-02-04T13:21:03.567
> 
> 标签：python, sequence

当我在做一个简单的计算器时，我来到了这一点。我做了一个简单的程序来汇总数字列表，如下所示，但是乘法程序有点长。

那么任何人都可以知道如何在python中制作多个数字列表的短程序。这是我的代码。

```
def calculate(oper,*nm):
    return oper(nm)

add=lambda x:sum(x)

def mult(lst):
    tmp=1
    for i in lst:
        tmp*=i
    return tmp 
```

计算（加，2,34,2）

计算（多，8,5,7）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:24:10.223

Really, you do not need to define `calculate` because Python already has a name for it: [reduce](http://docs.python.org/2/library/functions.html#reduce).

```
def calculate(oper, *nm):
    return reduce(oper, nm)

In [6]: import operator

In [7]: calculate(operator.add, 2, 34, 2)
Out[7]: 38

In [8]: calculate(operator.mul, 8, 5, 7)
Out[9]: 280 
```

Note: In Python3, `reduce` has been moved to the [functools module](http://docs.python.org/3.3/library/functools.html?highlight=functools%20reduce#functools.reduce). (Thanks to @ErikRoper for pointing this out.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:23:58.467

You can use the in-built `reduce` function, which takes a callable, a list and an optional starting element. It calls `callable` with a tuple `(elem, result)` where element is the `ith` element from the list and `result` is the result so far.

```
reduce(lambda item,prod: item * prod, range(1, 5), 1)
Out[2]: 24 
```

So the above would call the lambda function first with `(1,1)`, then with `(2,1*1)` then `(3,2*1)` and finally `(4,3*2)`

So you'd define `add` and `mult` and replace your `calculate` with the built-in reduce

```
add = lambda item,cumul_sum: item + cumul_sum
mult = lambda item,product: item * product 
reduce(add, range(1,5), 0)
Out[5]: 10
reduce(mult, range(1,5), 1)
Out[6]: 24 
```

[http://docs.python.org/2.7/library/functions.html?highlight=reduce#reduce](http://docs.python.org/2.7/library/functions.html?highlight=reduce#reduce)

# windows-phone-7 - 使 WP8 应用程序与 WP7 兼容

> ID：14687664
> 
> 赞同：1
> 
> 时间：2013-02-04T13:21:11.327
> 
> 标签：windows-phone-7, windows-phone-8

我最近为 Windows Phone 8 制作了一个应用程序，现在我希望能够在带有 WP7.x 的旧设备上运行它。这是否可能无需创建一个针对 WP7 而不是 WP8 的全新 Visual Studio 项目？我以 WP8 为目标，以确保我不会在可用功能上受到阻碍，但我认为我最终没有使用任何 WP7 中不可用的功能，所以现在我想扩展 WP7.x 兼容性。关于如何尽可能容易地实现这一点的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:38:44.313

虽然没有自动方式将 WP8 项目“还原”为 WP7 项目，但可以通过编辑 .csproj 文件手动完成。

我目前没有方便的 Windows 8 系统，所以我不能确定涉及哪些项目，但查看 WP7 项目的项目文件，我（似乎）记得调整以下所有或部分行：

```
<SilverlightVersion>$(TargetFrameworkVersion)</SilverlightVersion>

<TargetFrameworkProfile>WindowsPhone71</TargetFrameworkProfile>

<TargetFrameworkIdentifier>Silverlight</TargetFrameworkIdentifier>

<Import Project="$(MSBuildExtensionsPath)\Microsoft\Silverlight for Phone\$(TargetFrameworkVersion)\Microsoft.Silverlight.$(TargetFrameworkProfile).Overrides.targets" />

<Import Project="$(MSBuildExtensionsPath)\Microsoft\Silverlight for Phone\$(TargetFrameworkVersion)\Microsoft.Silverlight.CSharp.targets" /> 
```

如果没记错的话，WP8 项目文件包含类似的行，只需将它们替换为上面的行。WP7 项目文件和 WP8 项目文件之间的比较应该能让您顺利上路。当然，也可能存在需要删除或添加的依赖项。

否则，总是可以选择开始一个全新的项目:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:37:53.010

您需要创建一个新的 WP7 项目。可能有一种方法可以编辑您的项目和解决方案文件，但只需创建一个新的 WP7 项目并将现有代码添加到 t.

顺便提一句。你应该反过来做，从 WP7 开始，只有当你需要 WP8 中的（很少）新功能时才将项目升级到 WP8。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:37:19.407

您将不可避免地必须创建另一个以 WP7.x 为目标的项目，
但这相对容易，尤其是在您不使用 WP8 专用功能的情况下。

为了提高可维护性，您应该考虑在项目之间共享可重用的代码文件，例如利用 Visual Studio 的“添加为链接”功能。

# c++ - 对于非常接近 1 的基数，std::pow() 非常慢

> ID：14687665
> 
> 赞同：5
> 
> 时间：2013-02-04T13:21:13.617
> 
> 标签：c++, performance, glibc, pow

我有一个解方程的数字代码，`f(x) = 0`我必须在其中提高`x`幂`p`。我用一堆东西来解决它，但最后我有牛顿的方法。解决方案恰好等于`x = 1`，因此是我的问题的原因。例如，当迭代解决方案接近 时`1`，`x = 1 + 1e-13`计算所需的时间`std::pow(x, p)`会大大增加，很容易增加 100 倍，使我的代码无法使用。

运行这个东西的机器是CentOS上的AMD64（Opteron 6172），命令很简单`y = std::pow(x, p);`。类似的行为出现在我所有的机器上，都是 x64。如此[处所述](http://entropymine.com/imageworsener/slowpow/)，这不仅是我的问题（即，其他人也很生气），仅出现在 x64 上且仅用于`x`接近`1.0`. 类似的事情也发生在`exp`。

解决这个问题对我来说至关重要。有谁知道是否有办法绕过这种缓慢？

编辑：约翰指出这是由于非规范化。那么问题来了，如何解决这个问题？代码是 C++，编译后`g++`用于`GNU Octave`. 看来，尽管我已设置`CXXFLAGS`包含`-mtune=native`and `-ffast-math`，但这并没有帮助，代码运行速度也一样慢。

现在的伪解决方案：对于所有关心这个问题的人，下面建议的解决方案对我个人来说并不适用。我真的需要平时的速度`std::pow()`，但没有周围的呆滞`x = 1`。我个人的解决方案是使用以下技巧：

```
inline double mpow(double x, double p) __attribute__ ((const));

inline double mpow(double x, double p)
{
    double y(x - 1.0);
    return (std::abs(y) > 1e-4) ? (std::pow(x, p)) : (1.0 + p * y * (1.0 + (p - 1.0) * y * (0.5 + (1.0 / 6.0) * (p - 2.0) * y)));
} 
```

界限可以改变，但对于 -40 < p < 40，误差小于大约 1e-11，这已经足够了。与我发现的相比，开销很小，因此为我解决了这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T13:40:08.283

显而易见的解决方法是在实数中注明，`a ** b == exp(log(a) * b)`并改用该形式。您需要检查它是否不会对结果的准确性产生不利影响。编辑：正如所讨论的，这也受到了几乎同样程度的放缓的影响。

问题不在于异常，至少不是直接的；尝试计算`exp(-2.4980018054066093e-15)`会遇到同样的减速，并且 -2.4980018054066093e-15 肯定不是异常的。

如果您不关心结果的准确性，那么缩放指数或指数应该会让您超出慢速区域：

```
sqrt(pow(a, b * 2))
pow(a * 2, b) / pow(2, b)
... 
```

glibc 维护人员知道此错误：http: [//sourceware.org/bugzilla/show_bug.cgi](http://sourceware.org/bugzilla/show_bug.cgi?id=13932) ?id=13932 - 如果您正在寻找修复而不是解决方法，您需要委托浮点数学专家具有开源经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-16T03:26:42.577

64位Linux？

使用来自 FreeBSD 的 pow() 代码。

Linux C 库 (glibc) 对于某些输入具有可怕的最坏情况性能。

见：[http ://entropymine.com/imageworsener/slowpow/](http://entropymine.com/imageworsener/slowpow/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:26:05.590

It could be your algorithm, too. Perhaps switching to something like BFGS instead of Newton's method will help.

You don't say anything about your convergence criteria. Maybe those need adjusting as well.

# java - 检查 AsyncTask 上的连接

> ID：14687673
> 
> 赞同：0
> 
> 时间：2013-02-04T13:21:44.133
> 
> 标签：java, android, multithreading, android-asynctask

我在 asynctask 之前检查了连接和正确的链接，但有时应用程序会崩溃，因为我认为是在 UI 线程上进行的。如果我将代码放在 AsyncTask 上，应用程序总是崩溃。有什么解决办法吗？

在 onCreate 方法上：

```
if(connectionOK())
      {
          try {
                url = new URL(bundle.getString("direccion"));
                con = (HttpURLConnection) url.openConnection();
                if(con.getResponseCode() == HttpURLConnection.HTTP_OK)
                {
                    Tarea tarea = new Tarea(this);
                    tarea.execute();
                }
                else
                {
                    con.disconnect();
                   //show alertdialog with the problem
                    direccionInvalida();
                }
        } catch (Exception e){e.printStackTrace();}

      }
      else
      { 
             //show alertdialog with the problem
             notConnection() 
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:28:41.963

试试这个，检查里面的网络连接`doInBackground`。

```
public class GetTask extends AsyncTask<Void, Void, Integer> {

    protected void onPreExecute() {
        mProgressDialog = ProgressDialog.show(MainActivity.this,
                "Loading", "Please wait");
    }

    @Override
    protected Integer doInBackground(Void... params) {
        // TODO Auto-generated method stub
                   if(connectionOK()){
        //ADD YOUR API CALL
              return 0;
                  }esle{
                     return 1;
                   }

    }

    protected void onPostExecute(Integer result) {
        super.onPostExecute(result);
        if (mProgressDialog.isShowing()) {
            mProgressDialog.dismiss();
        } 
                    if(result == 0){
                       //do your stuff
                     }else{
                      //show alertdialog with the problem
                     }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:28:04.097

你的问题很模糊！

然而：在较新的机器人中，您不能在 UI 线程上执行此行：

```
con = (HttpURLConnection) url.openConnection(); 
```

所以一个简单的解决方案是将所有内容添加到一个新线程中：

```
new Thread() {
    public void run() {
        //add all your code
    }
}.start(); 
```

但是，您的代码有一些块可以显示这样的对话框（猜测）：

```
//show alertdialog with the problem
notConnection(); 
```

这些功能应该在 UI 线程上完成。所以使用处理程序：

```
//add this outsire the thread
Handler mHandler = new Handler(); 
```

然后在您的代码中使用：

```
mHandler.post(new Runnable() {
    public void run() {
        notConnection();
    }
}); 
```

* * *

最后，这是一个修复。真正的解决方案是让您无论如何发布 AsyncTask 并处理错误或成功`onPostExecute()`

# javascript - $(this) 与 $.each 循环上下文中的 'element' 参数不同

> ID：14687679
> 
> 赞同：1
> 
> 时间：2013-02-04T13:22:17.230
> 
> 标签：javascript, jquery

> **可能重复：**
> [jQuery 等价于获取 Canvas 的上下文](https://stackoverflow.com/questions/2925130/jquery-equivalent-of-getting-the-context-of-a-canvas)

我的问题是：

1）为什么注释代码的行为不像上面那样（即为什么会抛出错误）？

```
$(function () {
  $('#ex4').append('<canvas class=can ></canvas>');
  $('#ex4').append('<canvas class=can ></canvas>');
  $('#ex4').append('<canvas class=can ></canvas>');

  $('#ex4 canvas').each(function (index, element) {
    $(this).attr("width", "125")
    $(this).attr("height", "50")

    var context = element.getContext("2d");
    //var context = $(this).getContext("2d");   error

    context.strokeStyle = "red";
    context.fillStyle = "#999900";
    context.font = "30px Arial";
    context.fillText("HTML5", 0, 35);
  });
}) 
```

2）我如何解决下面类似代码中的错误（大概与上面相同）？

```
$.each(data[0], function (i) {
  $('#content').append('<canvas id=' + i + ' class=can ></canvas>');
  $('#content #' + i).attr("width", "125")
  $('#content #' + i).attr("height", "50")

  //var context = $('#content #'+i).getContext("2d"); error

}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:43:36.400

[`getContext`](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement)是 canvas 元素的方法，而不是 jQuery 方法。

您看到的任何对象`$(...)`都是 jQuery 对象，您只能从该对象访问 jQuery 方法和属性。要访问 jQuery 对象的底层元素，您可以像数组一样取消引用它。例如，jQuery 对象中的第一个元素是`$(...)[0]`，依此类推。

在`each`循环的上下文中，您标记为的对象`element`实际上是 HTML 元素（在本例中为 canvas 元素），这就是该行起作用的原因。`this`并且`element`在那里是同义词，因此您可以使用其中任何一个。`$(this)`并且`$(element)`都是 jQuery 对象。

同样，在您的第二个示例中，`$('#content #'+i)`引用一个 jQuery 对象，并`$('#content #'+i)[0]`为您提供底层 DOM 元素。

```
$('#content #'+i)[0].getContext("2d"); //yields appropriate result 
```

* * *

### 作为一般说明

`Object xyz has no method 'abc'`当您尝试在 jq 对象上调用时，您无疑会收到错误消息或类似的东西`getMethod`，通常表明您将方法链接到您误解其结构的东西上 - 通常是一个好兆头，您应该去并查阅您正在使用的对象的 API。将对象记录到控制台通常也可以很好地了解它的结构，在这种情况下，这样做会告诉您您实际上并没有在画布上进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:27:19.170

代替 `//var context = $(this).getContext("2d");`

采用：`var context = $(this)[0].getContext("2d");`

而不是：`//var context = $('#content #'+i).getContext("2d"); error`

采用：`var context = $('#content #'+i)[0].getContext("2d"); error`

# windows - 将具有 unicode 名称的文件拖放到 Windows 中的批处理文件中

> ID：14687694
> 
> 赞同：1
> 
> 时间：2013-02-04T13:23:14.063
> 
> 标签：windows, batch-file, unicode, drag-and-drop, unicode-string

我想通过Windows下的拖放通过批处理文件处理一些文件。

一些文件的名称中包含 unicode 字符，例如 Example_ěø.txt

不幸的是，许多非 ASCII 字符在此过程中被破坏了。例如，使用一个简单的批处理文件，如

```
echo %* 
```

当我拖放具有上面给出的示例名称的文件时，我得到：

```
C:\>echo "C:\Example_eo.txt"
"C:\Example_eo.txt" 
```

所以ěø已经转换为eo，自然找不到该文件。

Windows 批处理文件中是否有任何方法可以访问拖放到批处理文件中的文件的实际 unicode 名称/路径？

* * *

解答： 使用 chcp 65001，但为了防止命令终止 bat 文件，有必要将命令的任何输出路由到 nul。我还发现有必要使用 && 将以下命令放在同一行。所以我的示例 bat 文件现在显示为

```
chcp 65001 > nul && echo %* && pause 
```

其中显示了放置在其上的文件名/路径的 unicode/utf-8 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:46:25.103

您可以使用

```
chcp 65001 
```

并将 cmd 中的字体更改为`Lucida Console`.

# actionscript-3 - Separating movement tween and alpha tween using GreenSock

> ID：14687696
> 
> 赞同：0
> 
> 时间：2013-02-04T13:23:16.847
> 
> 标签：actionscript-3, air, tween, flash-cs6, gsap

I'm using GreenSock's TweenMax in AS3, Flash AIR 3.2 for iOS. I'm trying to get a string of text to start fading using the `autoAlpha` plugin at a certain point (such as after it reaches the middle of the tween) during the movement tween, and not from start to finish. At the moment it is tweening *both* the movement and alpha from the start position to finish. Is this possible to do?

```
TweenMax.to(textOne, 14, {x:xScreenPos - 150, ease:SlowMo.ease.config(1, 0), repeat:-1, autoAlpha:0.5}); 
```

EDIT: This is the current code with the functions and syntax fixed, but it does not work for some reason. There is still a movement tween, but the alpha is not tweening anymore. The logic seems correct though. (`alpha` now replaces `autoAlpha` because it works over the latter).

```
import com.greensock.events.TweenEvent;
import com.greensock.TweenMax;

var _middle:Boolean = false;
var _tween:TweenMax;

public function run():void {
    _tween = TweenMax.to(textOne, 14, {x:xScreenPosEnd, ease:SlowMo.ease.config(1, 0), repeat:-1});
    _tween.addEventListener(TweenEvent.UPDATE, updateListener);
    _tween.addEventListener(TweenEvent.REPEAT, repeatListener);
}

function updateListener(e:TweenEvent):void {
    if(_tween.totalProgress() > 0.5 && _middle == false) {
        TweenMax.to(textOne, 7, {ease:SlowMo.ease.config(1, 0), repeat:-1, alpha:0});
        _middle = true;
    }
}

function repeatListener(e:TweenEvent):void {
    textOne.alpha = 1.0;
    _middle = false;
} 
```

EDIT: `totalProgress()` has been replaced with `progress()` and the alpha tweens again – but there's another problem with the alpha tween. I've traced out both `textOne.alpha` and `_tween.progress()` to debug. Either it's because of the single-threaded nature of AS3, it is messing up the call logic at the end of each loop... because there is a delayed end to the alpha tween, the REPEAT call cannot set the alpha to 1 in time, before the progress tween starts. Or it's something in the logic which is wrong. I tried setting the (alpha) tween time of TextOne to 6, but it still messes it up.

Actually, I'm not too sure what's going on after thinking about it a bit more. It makes NO logical sense. The first alpha tween is fine, then it messes up on repeat and repeats the alpha tween (but at the wrong progress() position) a few times, then stays at 0 forever. Here's a snapshot of the traces:

ALPHA: 0.0078125
PROGRESS: 0.9979285714285714
MIDDLE: true
...
ALPHA: 0
PROGRESS: 0.9992857142857144
MIDDLE: true

ALPHA: 0
PROGRESS: 0.00028571428571438115
MIDDLE: true

ALPHA: 0
PROGRESS: 0.000714285714285826
MIDDLE: false

ALPHA: 0.99609375
PROGRESS: 0.0015714285714287155
MIDDLE: false
...
ALPHA: 0.1015625
PROGRESS: 0.4504285714285715
MIDDLE: false

ALPHA: 0.09765625
PROGRESS: 0.4515714285714285
MIDDLE: false
...
ALPHA: 0.00390625
PROGRESS: 0.4992142857142858
MIDDLE: false

ALPHA: 0
PROGRESS: 0.5003571428571431
MIDDLE: false

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:12:27.553

只需使用两个`TweenMax.to()`电话。给一个`delay:`参数和一个较小的值`duration`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:20:07.027

您可以保存第一个 TweenMax.to 并为 TweenEvent.UPDATE 事件附加一个侦听器，这样您就可以在每次 tween 更改值时调用一个函数。

然后获取 currentProgress 的值并检查该值是否高于 0.5（这意味着它超过了补间的中间）并开始第二个补间。您需要一个 bool 变量，因此每个中间补间只执行一次。

您可以为 TweenEvent.REPEAT 事件添加另一个侦听器，以便在补间重复时将 alpha 对象的值重置为 1。

```
var middle:Boolean = false;
TweenMax tween = TweenMax.to(textOne, 14, {x:xScreenPos - 150, ease:SlowMo.ease.config(1, 0), repeat:-1});
tween.addEventListener( TweenEvent.UPDATE, updateListener );
tween.addEventListener( TweenEvent.REPEAT, repeatListener );

function updateListener( e:TweenEvent ):void
{
  if( tween.currentProgress > 0.5 && middle == false )
  {
   TweenMax.to(textOne, 7, {ease:SlowMo.ease.config(1, 0), repeat:0, autoAlpha:0});
   middle = true;
  }
}

function repeatListener( e:TweenEvent ):void
{
 textOne.alpha = 1.0;
 middle = false;
} 
```

希望这可以帮助

# java - 写入数据库时 UTF-8 编码错误（读取正常）

> ID：14687698
> 
> 赞同：6
> 
> 时间：2013-02-04T13:23:18.520
> 
> 标签：java, jsf, jakarta-ee, jpa, character-encoding

我在使用**JSF**和**EclipseLink JPA**到**MySQL**数据库的 Web 应用程序中遇到了大问题。

当我从数据库中读取数据时，JSF 会以 UTF-8 读取和写入我的字符。但在数据库中字符不好。

fe：输入字符：“żźćółzxcv”，写入数据库：“?????zxcv”。但是如果我手动将数据写入数据库，例如：“żźćółzxcv”，那么在 JSF 中读取是完美的。

我从这里尝试了一切：[通过 PrimeFaces 输入组件检索的 Unicode 输入已损坏](https://stackoverflow.com/questions/9634230/typing-chinese-with-primefaces-peditor-component/9839362#9839362)

我发现JSF中的编码很好，但问题出在java中，因为如果我手动设置

```
current.setUwagiZ("żźćóżźćłąśóżźćł TE");
getFacade().edit(current); 
```

在数据库记录中是错误的：`???ó??????ó???? TE`

我在 JDBC 资源中设置了 characterEncoding 和 useUnicode。此外，当某些工具在 NetBeans 编码中执行命令是可以的并且 MySQL 中的数据是 UTF-8 时，所以连接似乎很好。

所以问题是java，但我完全不知道如何解决这个问题:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T13:36:02.680

当信使本身知道传输双方使用的字符编码时，可能会出现问号。[这就是Mojibake](http://en.wikipedia.org/wiki/Mojibake)的不同之处，它不是信使的错，而是生产者和/或消费者的错。

在具有数据库后端的普通 Web 应用程序中，只有两个地方会发生这种情况：与 DB 通信和与 HTTP 客户端通信。您已经排除了 HTTP 部分，所以留下了 DB 部分。

DB 部分的使者是 JDBC 驱动程序。您需要告诉 JDBC 驱动程序使用 UTF-8。众所周知，MySQL JDBC 驱动程序默认使用客户端平台默认编码，在您的特定情况下显然不是 UTF-8。

将以下 2 个属性添加到 JDBC 连接：

*   `useUnicode=true`
*   `characterEncoding=UTF-8`

目前还不清楚您是如何配置 JDBC 连接的，但如果它是“普通的”JDBC，那么将它们指定为 JDBC URL 中的查询字符串：

```
jdbc:mysql://localhost:3306/db_name?useUnicode=true&characterEncoding=UTF-8 
```

或者，如果它是特定于容器的数据源配置，则将它们指定为单独的连接属性，与指定用户名和密码的方式完全相同。

### 也可以看看：

*   [Unicode - 如何让字符正确？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

# c++ - 什么 C++11 操作/内存订单保证新鲜度？

> ID：14687703
> 
> 赞同：8
> 
> 时间：2013-02-04T13:23:31.883
> 
> 标签：c++, multithreading, concurrency, c++11, atomic

> **可能重复：**
> [并发：C++11 内存模型中的原子和易失性](https://stackoverflow.com/questions/8819095/concurrency-atomic-and-volatile-in-c11-memory-model)

有了C++11`<atomic>`规范，有没有新鲜度的保证？不同内存顺序的描述只处理重新排序（据我所知）。

具体来说，在这种情况下：

```
#include <atomic>

std::atomic<int> cancel_work(0);

// Thread 1 is executing this function
void thread1_func() {

    ...

    while (cancel_work.load(<some memory order>) == 0) {
        ...do work...
    }
}

// Thread 2 executes this function
void thread2_func() {

    ...

    cancel_work.store(1, <some memory order>);

    ...

} 
```

如果线程 1 和线程 2 不共享除 之外的任何其他数据`cancel_work`，那么在我看来，不需要任何排序保证，并且`std::memory_order_relax`对于存储和加载都足够了。但这是否保证线程 1 将永远看到更新，`cancel_work`而不是重复读取其本地缓存行而不从主内存刷新它？如果不是，那么做出该保证所需的最低要求是多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T13:31:18.810

没有什么可以保证：一切都与订购有关。甚至`memory_order_seq_cst`只是保证事情以单一的总顺序发生。理论上，编译器/库/cpu 可以`cancel_store`在程序结束时安排每次加载。

29.3p13 中有一个一般性声明：

> 实现应该使原子存储在合理的时间内对原子负载可见。

但是没有关于什么构成“合理的时间”的规范。

所以：`memory_order_relaxed`应该没问题，但`memory_order_seq_cst`在某些平台上可能会更好，因为缓存行可能会更快地重新加载。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T13:27:44.247

看来[这个答案](https://stackoverflow.com/a/8833218/264177)也回答了我的问题。好吧，希望我的问题能帮助谷歌人更好地找到它。

线程 1“应该”`cancel_work`在“合理的时间内”看到更新，但是（显然）没有具体说明什么是合理的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T13:37:28.313

调用一个函数[未被编译器内联]将自动重新加载任何保存不是立即本地变量的寄存器。因此，只要运行 thread1_func() 的处理器基于 刷新或更新了它的缓存内容`store`，它就会工作。

`memory_order_relax`应该确保数据（在将来的某个时间点）从任何其他处理器缓存中刷新[这在 x86 中是自动的，但并非所有类型的处理器，例如某些 ARM 处理器都需要“代码驱动刷新”]，但它不保证在任何其他写入[常规或原子变量]之前发生。

请注意，内存顺序仅影响当前线程/处理器。另一个线程或处理器在存储或加载期间做什么完全取决于该线程/处理器。我的意思是，在您的情况下，在其他处理器/线程写入值之后`thread1_func()`，您可能能够在`0`一小段时间内读取该值。`1`所有原子操作保证是它要么获得旧值或新值，而不是介于两者之间 [除非你使用`memory_order_relax`，这不会强制线程内操作之间的加载/存储的任何顺序。但是，无论您使用什么内存顺序，atomic 都应该保证[假设正确实现]该值最终会更新。只是在轻松的情况下更难判断。

# ios - 包含 UIViewControllers - 我应该使用 .xib 还是情节提要？

> ID：14687709
> 
> 赞同：0
> 
> 时间：2013-02-04T13:23:46.267
> 
> 标签：ios, uiviewcontroller, xib

我正在制作一个应用程序，它将有一个 VC 做与 UITabBarController 类似的工作，我正在使用

```
[self addChildViewController:theViewController];
// [self addSubview ... etc 
```

将自定义 UIViewController 的视图作为我的主（根）VC 的子视图。

所以我的问题是，这是实例化 VC 的正确方法，而不必以编程方式构建它的 UI - 从 .xib 文件还是从情节提要？

使用 xib：

```
UICustomViewController *controller = [[UICustomViewController alloc] initWithNibName:@"customVC" bundle:nil]; 
```

带有故事板：

```
UICustomViewController* child = [self.storyboard instantiateViewControllerWithIdentifier:identifier]; 
```

我相信 .xib 文件是老东西，故事板是要走的路，但我也读过[这篇文章](http://seanquinlan.com/2012/05/25/creating-a-container.html)，这表明使用故事板来做这件事有点 hacky。不知道，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:30:31.590

两种方式没有任何重大区别，它们是相同的。但在许多其他角度故事板是直接的方式，没有任何hacky

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T15:25:25.257

如果您希望在应用程序打开时出现子视图控制器，您可以在情节提要中完成，而无需任何代码。将容器视图添加到您的根 vc 中，您将自动获得嵌入其中的视图控制器。

# php - 我的基于 PHP 的网站似乎有所有损坏的链接

> ID：14687715
> 
> 赞同：0
> 
> 时间：2013-02-04T13:24:08.177
> 
> 标签：php, html, .htaccess, cpanel

我最近购买了一个网站的 PHP 脚本。在首页，每当我点击登录、注册或任何其他链接时，我都会收到*404 错误（找不到页面）*。

链接的类型为: `http://domain.com/login`, `http://domain.com/register`, 等等，但是当我检查文件管理器时，我发现没有名为 login 或 register 等的文件夹。相反，有诸如此类的`login.php`文件`register.php`。因此，当我将链接重命名为`http://domain.com/login.php`or`/register.php`等​​时，它可以工作！

除了编辑所有文件中的链接之外，有没有办法解决这个问题？也许可以通过更改`.htaccess`文件来完成某些事情。

PS：我用cpanel。

我检查了我的`.htaccess`文件并发现了这个（我需要在那里编辑什么吗？）：

```
options -multiviews
<IfModule mod_rewrite.c>
RewriteEngine On 
RewriteBase /
RewriteRule ^users$ users.php
RewriteRule ^login$ login.php
RewriteRule ^logout$ logout.php
RewriteRule ^conversations/([^/.]*)?$ conversations.php?u=$1&%{QUERY_STRING}
</IfModule>
<IfModule mod_security.c> 
# Turn off mod_security filtering. 
SecFilterEngine Off 
# The below probably isn't needed, 
# but better safe than sorry. 
SecFilterScanPOST Off 
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:28:13.510

您需要使用`.htaccess`文件重写 URL 以删除 .php 扩展名并将流量重定向到正确的脚本。

有关更多详细信息，请参阅[Stack Overflow 问题*Remove .php extension with .htaccess*](https://stackoverflow.com/questions/4026021/remove-php-extension-with-htaccess#answer-4026967)的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:05:59.560

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

## Internally forward /dir/foo to /dir/foo.php
RewriteCond %{DOCUMENT_ROOT}/$1.php -f
RewriteRule ^(.*?)/?$ $1.php [L] 
```

# iphone - 嵌套的 Json Xcode 4.5

> ID：14687720
> 
> 赞同：1
> 
> 时间：2013-02-04T13:24:23.173
> 
> 标签：iphone, json

我一直在查看堆栈，但无法让嵌套的 json 工作，

我不断收到此错误，并且我的数据未加载到表格视图中。如果我不使用嵌套，我的代码就可以工作。

2013-02-04 13:17:20.961 Big Wave App[2338:c07]-[__NSCFDictionary objectAtIndex:]：无法识别的选择器发送到实例 0x7165510

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

    NSURL *url = [NSURL URLWithString:@"http://blog.bigwavemedia.co.uk/?json=get_recent_posts"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];

}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    data = [[NSMutableData alloc] init];

}

-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData{
    [data appendData:theData];
}

-(void) connectionDidFinishLoading:(NSURLConnection *)connection{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

    news = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
    [mainTableView reloadData];

}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error{
    UIAlertView *errorView = [[UIAlertView alloc] initWithTitle:@"error" message:@"the download could not complete" delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [errorView show];

    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

}
-(int)numberOfSectionsInTableView:(UITableView *)tableView{
    return  1;
}

-(int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [news count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MainCell"];
    }

    cell.textLabel.text = [[[news objectAtIndex:indexPath.row] objectForKey:@"title"] valueForKey:@"id"];

    return cell;
} 
```

任何帮助都会很棒，这是我的第一个 xcode 项目，对我来说是全新的。

[http://jsonviewer.stack.hu/#http://blog.bigwavemedia.co.uk/?json=get_recent_postshttp://blog.bigwavemedia.co.uk/?json=get_recent_posts](http://jsonviewer.stack.hu/#http://blog.bigwavemedia.co.uk/?json=get_recent_postshttp://blog.bigwavemedia.co.uk/?json=get_recent_posts)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:49:09.490

在您的项目中添加[sbjson](https://github.com/stig/json-framework/)库。并尝试使用此代码而不是您的代码。在 .h 文件中

```
NSMUtableArray * idArray; 
```

并在 .m 文件中

```
 #import "SBJson.h"

- (void)viewDidLoad
{       

idArray = [[NSMutableArray alloc] init];

 NSString *post =@"";

                NSURL *url=[NSURL URLWithString:@"http://blog.bigwavemedia.co.uk/?json=get_recent_posts"];

                NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

                NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

                NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
                [request setURL:url];
                [request setHTTPMethod:@"POST"];
                [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
                //[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
                // [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
                [request setHTTPBody:postData];

                //[NSURLRequest setAllowsAnyHTTPSCertificate:YES forHost:[url host]];

                NSError *error = [[NSError alloc] init];
                NSHTTPURLResponse *response = nil;
                NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

                //NSLog(@"Response code: %d", [response statusCode]);
                if ([response statusCode] >=200 && [response statusCode] <300)
                {
                    NSString *responseData = [[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];
                    // NSLog(@"Response ==> %@", responseData);                    

                    SBJsonParser *jsonParser = [SBJsonParser new];
                    NSDictionary *jsonData = (NSDictionary *) [jsonParser objectWithString:responseData error:nil];

                    //NSLog(@"json data is : %@",jsonData);

                    NSArray *allDataArray = [[NSArray alloc]init];
                    allDataArray= [jsonData objectForKey:@"posts"];

                    for(int i=0;i<[allDataArray count];i++)
                    {
                        NSDictionary *tempDictionary = [allDataArray objectAtIndex:i];

                        if([tempDictionary objectForKey:@"id"]!=nil)
                        {

                            [idArray addObject:[tempDictionary objectForKey:@"id"]];
                        }

                    }

                } else {
                    if (error) NSLog(@"Error: %@", error);
                    [self alertStatus:@"Connection Failed" :@"Does not find any data!"];
                }

            }
            @catch (NSException * e) {
                NSLog(@"Exception: %@", e);
                [self alertStatus:@"Data not found." :@"Does not find any data!"];
            }
[super viewDidLoad];
} 
```

**更新**

对于 tableview 添加这个

```
-(int)numberOfSectionsInTableView:(UITableView *)tableView{
    return  1;
}

-(int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [news count];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MainCell"];
    }

    cell.textLabel.text = [idArray objectAtIndex:indexPath.row];

    return cell;
} 
```

# java - 依赖项应该注入一次还是在每个对象中注入

> ID：14687722
> 
> 赞同：2
> 
> 时间：2013-02-04T13:24:37.683
> 
> 标签：java, spring, design-patterns, dependency-injection

我正在尝试更改一些遗留代码以将 DI 与 Spring 框架一起使用。我有一个具体的案例，我想知道哪个是最合适的实现方式。

它是一个java桌面应用程序。有一个 DataManager 接口用于从数据存储中查询/更改数据。目前只有一种实现使用 XML 文件进行存储，但将来可以添加 SQL 实现。同样对于单元测试，我可能需要模拟它。

目前，需要数据管理器的每个代码和平都通过使用工厂来检索它。这是工厂的源代码：

```
public class DataManagerFactory   
{  
    private static DataManagerIfc dataManager;

    public static DataManagerIfc getInstance()
    {
        // Let assume synchronization is not needed
        if(dataManager == null)
            dataManager = new XMLFileDataManager();

        return dataManager;
    }
} 
```

现在我看到了 3 种将应用程序更改为使用 DI 和 Spring 的方法。

I. 只在工厂中注入依赖，不要更改任何其他代码。

这是新代码：

```
public class DataManagerFactory  
{
    private DataManagerIfc dataManager;

    public DataManagerFactory(DataManagerIfc dataManager)
    {
        this.dataManager = dataManager;
    }

    public DataManagerIfc getDataManager()
    {
        return dataManager;
    }

    public static DataManagerIfc getInstance()
    {
        return getFactoryInstance().getDataManager();
    }

    public static DataManagerFactory getFactoryInstance()
    {
        ApplicationContext context =
                    new ClassPathXmlApplicationContext(new String[] {"com/mypackage/SpringConfig.xml"});

        return context.getBean(DataManagerFactory.class);
    }
} 
```

以及带有 bean 描述的 XML：

```
<bean id="dataManagerFactory"
            class="com.mypackage.DataManagerFactory">
    <constructor-arg ref="xmlFileDataManager"/>
</bean>

<bean id="xmlFileDataManager"
    class="com.mypackage.datamanagers.xmlfiledatamanager.XMLFileDataManager">
</bean> 
```

二、更改使用数据管理器的每个类，使其通过构造函数并将其存储为类变量。仅为创建链开始的“根”类创建 Spring bean 定义。

三、同Ⅱ。但是对于每个使用数据管理器的类，创建一个 Spring bean 定义并使用 Spring Ioc 容器实例化每个这样的类。

由于我是 DI 概念的新手，我会很感激每一个建议，什么是正确的和“最佳实践”的解决方案。提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:31:18.887

使用选项 3。

第一个选项使您的代码无法测试。您将无法轻松地模拟静态工厂方法以使其返回模拟 DataManager。

第二个选项将强制您让根类知道所有非根类的所有依赖项，以使代码可测试。

第三个选项真正使用依赖注入，每个 bean 只知道它的直接依赖关系，并由 DI 容器注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:30:36.097

嗯...你为什么首先写工厂？Spring 并不是为了让你改变你编写代码的方式（不仅仅是为了适应 Spring），所以保持工厂是正确的，因为它使用了众所周知的模式。将依赖项注入工厂将保留该行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:53:07.470

选项 3 是正确的路线。通过使用这样的配置，您可以有效地获取配置的组件并在*新*配置中使用它们，一切都会按预期工作。

根据经验，我希望调用 Spring 来实例化应用程序上下文并获取顶级 bean。我不希望重复调用 Spring 框架来获取多个 bean。一切都应该以正确的级别注入以反映责任等。

请注意（因为您是新手）不要在数据管理器中深入了解每个可用的课程！这是一个很常见的错误，如果你没有充分抽象和集中职责，你会发现你正在配置有很多管理器的类。当你看到你正在做这件事时，现在是退后一步，看看你的抽象和组件化的好时机。

# java - 收听单击列表视图中的按钮

> ID：14687723
> 
> 赞同：0
> 
> 时间：2013-02-04T13:24:42.343
> 
> 标签：java, android, listview, button, adapter

我有一个带有列表视图的片段。listview 使用自定义适配器。列表视图中的每个项目都包含一个按钮。我需要的是让活动知道我在列表视图中按下了什么按钮。我需要这个，因为片段也需要根据按下的按钮向其活动发送消息。所以基本上我希望`OnClickListener`在片段中而不是在适配器中。

我试图通过遍历其所有元素并执行 getChild() 来从列表中获取按钮，但它不会对点击做出反应。

```
Button theButton = (Button)theListView.getChildAt(i).findViewById(R.id.button_id); 
```

我也尝试过使用适配器上的 getView。

```
Button theButton = (Button) adapter.getView(i, null, null).findViewById(R.id.button_id); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:32:27.623

像往常一样在适配器中设置 OnClickListener，但保留对片段的引用！

假设您的片段类是 MyFragment。将您的片段传递给适配器；-ie 在构造函数中

```
private MyFragment theFragment;
public YourAdapter(MyFragment f) {
    this.theFragment = f;
} 
```

通过这种方式，您可以`theFragment`在您设置的每个 OnClickListener 中使用。

# sed - 试图在 ubuntu 上逃避 / for sed

> ID：14687725
> 
> 赞同：-1
> 
> 时间：2013-02-04T13:24:52.637
> 
> 标签：sed

我正在尝试使用 sed 替换文件中的路径。

```
sudo sed 's/a/b/g' -i /tmp/test 
```

然而变量是

```
a = /var/lib and 
b = /data/lib 
```

我如何逃脱斜线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:27:05.590

命令后面的字符`s`不需要是`/`. 使用路径时，我使用`:`，如下所示：

```
sudo sed 's:a:b:g' -i /tmp/test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:27:41.543

您可以更改 sed 的分隔符，例如使用`#`：

```
$ sed 's#/var/lib#data/lib#'
/var/lib   
data/lib 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:28:52.717

这应该工作

```
sed  -i "s@$a@$b@g" /tmp/test 
```

您需要注意两件事：

1）如果要在 sed 行中使用变量，请使用**双引号**

2) 分隔符可以不是“ `/`”，例如`@, #, : ...`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T13:30:58.483

在 sed(1) 中，与在 vi(1) 中一样，“/”只是常用的分隔符。它可以用 转义`\`，在修改路径名称时导致“倾斜牙签综合症”：

`sed -e 's/\/var\/lib/data\/lib/' ...`

您可以使用另一个非单词字符，例如';'：

`sed -e 's;/var/lib;data/lib; ...`

# ios - Are HTML5 tags be broken in iOS 6.1 apps using UIWebView (PhoneGap)?

> ID：14687731
> 
> 赞同：0
> 
> 时间：2013-02-04T13:25:12.367
> 
> 标签：ios, cordova, uiwebview

We have a PhoneGap application that uses HTML5 video tags. If you click the "Done" button while a video is playing, the video stops, but the video element shows a double preview image: One in the background, which is rotated 90º and one in the foreground that is the correct orientation.

Has anyone else experienced this and do you know of a workaround?

![enter image description here](../Images/c78d3902d7852597352a727ea8966a66.png)

# php - strlen 不起作用

> ID：14687736
> 
> 赞同：1
> 
> 时间：2013-02-04T13:25:26.660
> 
> 标签：php, function

我只是做了一个简单的脚本，但它不起作用。

```
function check_length($string, $min_length, $max_length) {
  $length = strlen($string);
  if(strlen($length) < $min_length || strlen($length) > $max_length)
  { 
    header("Location: /kontakty/blad");
  }
}

check_length($_POST["name"], "3", "45");
check_length($_POST["surname"], "3", "45");
check_length($_POST["group_id"], "1", "11"); 
```

当我将数据发送到脚本时，该函数不会检查这一点。

* * *

**编辑**：我就像你写的那样，现在脚本不想重定向。

[**完整脚本**](http://wklej.org/hash/4937e6cdeec/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T13:27:33.180

你有一个错误。删除 $length 上的 strlen。

```
function check_length($string, $min_length, $max_length) {
      $length = strlen($string);

     if($length < $min_length || $length > $max_length)
     { 
      header("Location: /kontakty/blad");
     }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T13:51:10.803

似乎您在 unicode'd 站点 (kontakty) 上使用此脚本，并假设您需要使用此脚本来`mb_strlen`代替`strlen`。此外，`trim`在这种情况下，使用或“a”给出 2 长度。

```
function check_length($string, $min, $max) {
    $length = mb_strlen(trim($string), 'utf-8');
    if ($length < $min || $length > $max) { 
        header('Location: /kontakty/blad');
    }
} 
```

如果`mb_strlen`不适合你，可以使用这个：

```
function strlen_unicode($str) {
    return count(preg_split(
        '~~u', $str, -1, PREG_SPLIT_NO_EMPTY));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T13:42:45.427

```
function check_length($string, $min_length, $max_length) {

  $length = strlen($string);  <= calculated once

  if(strlen($length) < $min_length || strlen($length) > $max_length)
  ^^^^^^^^^^^^^                       ^^^^^^^
                                     no need of this it will calculate length of 
                                     $length no string   

  { 
    header("Location: /kontakty/blad");
  }
} 
```

尝试

```
function check_length($string, $min_length, $max_length) {

  if(strlen($string) < $min_length || strlen($string) > $max_length)
  { 
    header("Location: /kontakty/blad");
  }
} 
```

[根据您评论链接中的代码](http://wklej.org/hash/4937e6cdeec/)

* * *

## **笔记**

1.  整个**`ext/mysql`**PHP 扩展提供了所有以 mysql_ 为前缀的函数，[从 PHP v5.5.0 开始正式弃用，](http://php.net/manual/en/changelog.mysql.php)并将在未来删除。所以使用`PDO`或者`MySQLi`

**好读**

1.  [不推荐使用 mysql 扩展并将在将来删除：请改用 mysqli 或 PDO](https://stackoverflow.com/questions/13944956/the-mysql-extension-is-deprecated-and-will-be-removed-in-the-future-use-mysqli/13944958#comment19236631_13944958.)
2.  [MySQL 开发人员的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
3.  [Pdo 初学者教程](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14110189#14110189)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T13:27:36.557

在行中替换`strlen($length)`为`$length`：

```
if(strlen($length) < $min_length || strlen($length) > $max_length) 
```

你正在取长度的长度，这是没有意义的。

# java - JavaFX 应用程序中的 AccessControlException

> ID：14687738
> 
> 赞同：0
> 
> 时间：2013-02-04T13:25:27.997
> 
> 标签：java, web-applications, javafx-2, accesscontrolexception

我正在尝试在网页中嵌入 Java FX 音乐播放器。此 JavaFX 应用程序在 Web 启动模式下运行良好。但是当我尝试在 web 模式下运行它或尝试在构建后访问它的网页时，它给了我 AccessControlException。错误信息是这样的：

```
 Match: beginTraversal
Match: digest selected JREDesc: JREDesc[version 1.6+, heap=-1--1, args=null, href=http://java.sun.com/products/autodl/j2se, sel=false, null, null], JREInfo: JREInfo for index 0:
    platform is: 1.7
    product is: 1.7.0_13
    location is: http://java.sun.com/products/autodl/j2se
    path is: C:\Program Files\Java\jre7\bin\javaw.exe
    args is: null
    native platform is: Windows, x86 [ x86, 32bit ]
    JavaFX runtime is: JavaFX 2.2.5 found at C:\Program Files\Java\jre7\
    enabled is: true
    registered is: true
    system is: true

    Match: ignoring maxHeap: -1
    Match: ignoring InitHeap: -1
    Match: digesting vmargs: null
    Match: digested vmargs: [JVMParameters: isSecure: true, args: ]
    Match: JVM args after accumulation: [JVMParameters: isSecure: true, args: ]
    Match: digest LaunchDesc: file:/C:/Users/lenovo/Documents/NetBeansProjects/MusicPlay/dist/MusicPlay.jnlp
    Match: digest properties: []
    Match: JVM args: [JVMParameters: isSecure: true, args: ]
    Match: endTraversal ..
    Match: JVM args final: 
    Match: Running JREInfo Version    match: 1.7.0.13 == 1.7.0.13
     Match: Running JVM args match: have:<>  satisfy want:<>
java.security.AccessControlException: access denied ("java.util.PropertyPermission" "user.dir" "read")
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)
    at java.lang.System.getProperty(Unknown Source)
    at java.io.Win32FileSystem.getUserPath(Unknown Source)
    at java.io.Win32FileSystem.resolve(Unknown Source)
    at java.io.File.getAbsolutePath(Unknown Source)
    at java.io.File.getAbsoluteFile(Unknown Source)
    at java.io.File.toURI(Unknown Source)
    at musicplay.MusicPlay.start(MusicPlay.java:90)
    at com.sun.javafx.applet.FXApplet2$1.run(FXApplet2.java:131)
    at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:179)
    at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:176)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:176)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    at java.lang.Thread.run(Unknown Source)
CacheEntry[file:/C:/Users/lenovo/Documents/NetBeansProjects/MusicPlay/dist/MusicPlay.jnlp]: updateAvailable=true,lastModified=Mon Feb 04 18:25:32 IST 2013,length=948
CacheEntry[file:/C:/Users/lenovo/Documents/NetBeansProjects/MusicPlay/dist/MusicPlay.jnlp]: updateAvailable=true,lastModified=Mon Feb 04 18:25:32 IST 2013,length=948
CacheEntry[file:/C:/Users/lenovo/Documents/NetBeansProjects/MusicPlay/dist/MusicPlay.jar]: updateAvailable=false,lastModified=Mon Feb 04 18:46:10 IST 2013,length=31879
Java Plug-in 10.13.2.20
Using JRE version 1.7.0_13-b20 Java HotSpot(TM) Client VM
User home directory = C:\Users\lenovo
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
l:   dump classloader list
m:   print memory usage
o:   trigger logging
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
x:   clear classloader cache
0-5: set trace level to <n>
---------------------------------------------------- 
```

我尝试通过授予以下权限来编辑 .java.policy 文件

```
 grant codeBase "file:*" {
        permission java.security.AllPermission;
}; 
```

但它仍然给了我同样的信息。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:45:57.803

我自己找到了答案。在网页中嵌入 JavaFX 应用程序时。您的应用程序（或网页）不允许访问本地文件结构。我以前也试图这样做。我正在传递歌曲文件的路径。但实际上您需要将媒体文件托管在某个服务器目录中，例如 Apache 服务器目录。一个网页可以很容易地访问 Apache Server Directory。您需要将媒体文件的 URI 传递到您的应用程序中。例子`currentFile="http://localhost/songs/Jaane_Kaise.mp3";`

# javascript - Ajax 发布请求字符串数据而不是对象

> ID：14687741
> 
> 赞同：3
> 
> 时间：2013-02-04T13:25:36.723
> 
> 标签：javascript, jquery, ajax

与[这个问题](https://stackoverflow.com/questions/5046930/jquery-send-string-as-post-parameters)类似，我需要在发布请求中发送一个字符串作为数据。

与那个不同的是，我不能使用一个对象，因为我有重复的项目。正如您在我的示例数据 sn1 中看到的那样，sn2 和 sn3 在不同的日期时间重复了几次。

样本数据：

`&sn3=2013-2-4T12:43:52&sn3=2013-2-4T12:43:55&sn1=2013-2-4T12:43:59&sn1=2013-2-4T12:44:0&sn2=2013-2-4T12:44:0&sn3=2013-2-4T12:44:2&sn2=2013-2-4T12:44:3&sn3=2013-2-4T12:44:19&sn3=2013-2-4T12:44:19&sn3=2013-2-4T12:44:19&sn2=2013-2-4T12:44:19&sn3=2013-2-4T12:44:21&sn2=2013-2-4T12:44:22&sn2=2013-2-4T12:46:39&sn3=2013-2-4T12:46:42&sn2=2013-2-4T12:46:44&sn2=2013-2-4T12:46:45&sn2=2013-2-4T12:46:46&sn2=2013-2-4T12:47:27&sn2=2013-2-4T12:47:27&sn2=2013-2-4T12:49:44&sn2=2013-2-4T12:50:21&sn2=2013-2-4T12:52:21&sn2=2013-2-4T12:52:24&sn2=2013-2-4T12:57:35&sn3=2013-2-4T12:57:38&sn3=2013-2-4T12:57:39&sn2=2013-2-4T12:57:39&sn2=2013-2-4T12:57:40&sn3=2013-2-4T12:57:46&sn3=2013-2-4T13:21:30`

我尝试使用以下

```
console.log(screens); //logs my sample data posted above.
        $.ajax({
            url : url,
            type: "POST",
            dataType : 'text',
            data : screens,
            success : function(data) {
                console.log("sucessfull sending:")
                console.log(data);
            },
            error : function() {
                console.log('failed');
            }

        }); 
```

但它总是触发失败。

我可以将其作为字符串发送吗？如果没有，我怎样才能使用相同的密钥发送多个项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:35:45.063

```
 console.log(screens); //logs my sample data posted above.
    $.ajax({
        url : url,
        type: "POST",
        dataType : 'text',
        data : {screens:screens},
        success : function(data) {
            console.log("sucessfull sending:")
            console.log(data);
        },
        error : function() {
            console.log('failed');
        }

    }); 
```

看`data : {screens:screens},`，如果你做这样的事情，在服务器上你将能够得到它：`screensString = Request["screens"]`. 之后，screensString 将包含一个包含所有屏幕的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:47:26.670

当您未在 ajax 选项中指定 contentType 时，您的请求将默认为 'application/x-www-form-urlencoded; 字符集=UTF-8'。但是，当您的帖子数据只是文本时，您应该通过指定 contentType 'text' 让服务器知道这一事实。与 contentType 不同，dataType 指定您期望从服务器返回的响应数据的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T13:58:45.260

我认为您需要在参数中使用 [] 。

而不是`&sn3=`多次发送（这是在重写自己）将它作为这样的数组发送`&sn3[]=`

如果您从表单输入使用获取此数据`name="sn3[]"`并且如果是这种情况，我建议您将`$('#yourform').serialize()`其用作发送的数据

# wpf - WPF 标签前景色

> ID：14687743
> 
> 赞同：27
> 
> 时间：2013-02-04T13:25:47.953
> 
> 标签：wpf, colors, foreground

我`Label`在 a 中有 2 秒，`StackPanel`并为它们设置了`Foreground`颜色......第二个显示为黑色，而它不应该显示为黑色。

```
<StackPanel HorizontalAlignment="Right" Orientation="Horizontal"  Grid.Column="4" Grid.Row="0" Width="Auto" Margin="0,0,20,0">
    <Label Content="{lex:LocText CGI, Suffix=:}" Foreground="#FFE0E0E0" FontSize="24" VerticalAlignment="Bottom" Margin="0,0,0,10" HorizontalAlignment="Right" />
    <Label Content="{Binding Cgi}" ContentStringFormat="{}{0}%" Foreground="#FFE0E0E0" FontSize="24" VerticalAlignment="Bottom" Margin="0,0,0,10" HorizontalAlignment="Right" />
</StackPanel> 
```

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-04T13:41:13.383

我检查了您的 XAML，它工作正常 - 例如，两个标签的前景都是灰色的。
我的猜测是你有一些风格会影响它的外观......

尝试将您的 XAML 移动到一个全新的窗口并亲自查看...然后，检查您是否有任何`Window.Resources`可能影响标签的主题或样式（例如）...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-11-07T00:10:39.530

标题“WPF Label Foreground Color”非常简单（正是我想要的），但是 OP 的代码非常混乱，很容易忽略在两个不同的标签上设置文本前景色是多么简单：

```
<StackPanel>
    <Label Foreground="Red">Red text</Label>
    <Label Foreground="Blue">Blue text</Label>
</StackPanel> 
```

总之，不，您的代码段没有任何问题。

# mysql - MYSQL 无法在 Windows 7 上启动服务

> ID：14687744
> 
> 赞同：0
> 
> 时间：2013-02-04T13:25:48.323
> 
> 标签：mysql, windows-7

编辑：由于电源故障，大多数情况下都会发生这种情况。

有两件事对我有用。
1\. 知道如何在MySQL中修改root密码，并做好数据库备份。
2\. 安装 MYSQL 作为服务。 `C:\> "C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld" --install`

几天前我已经完成了 MYSQL 5.6 的全新安装。第一天一切都很好。我可以访问城市和世界表。

第二天，我开始遇到错误。我读了一些以在管理员级别运行 mysqld。它解决了问题，但我无法再访问城市和世界表了。

第三天。我只收到这个错误。

注意： MYSQL 服务之前运行良好，当时防火墙、防病毒 (avast) 和 apache 正在运行。

在管理员模式下运行时：

```
C:\Program Files\MySQL\MySQL Server 5.6\bin>mysql -u root -p localhost
Enter password: ***********
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)

C:\Program Files\MySQL\MySQL Server 5.6\bin>mysql -u root -p localhost
Enter password: *
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)

C:\Program Files\MySQL\MySQL Server 5.6\bin>mysql -u root -p localhost
Enter password:
ERROR 1049 (42000): Unknown database 'localhost' 
```

在用户模式下运行时（也是管理员）：

```
C:\Program Files\MySQL\MySQL Server 5.6\bin>mysql -u root -p localhost
Enter password: ***********
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)

C:\Program Files\MySQL\MySQL Server 5.6\bin>mysql -u root -p localhost
Enter password: *
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES)

C:\Program Files\MySQL\MySQL Server 5.6\bin>mysql -u root -p localhost
Enter password:
ERROR 1049 (42000): Unknown database 'localhost' 
```

无法从 Control Panel\All Control Panel Items\Administrative Tools\Service Error Message 启动 MYSQL 服务；WIndows 无法在本地计算机上启动 MYSQL56 服务 错误 1067 进程意外终止

问候：Msinfo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-16T21:21:11.533

如果要指定主机，则需要在“localhost”之前使用“-h”，否则只需删除“localhost”，考虑到系统上正在运行的服务器，它应该可以正常工作。

此外，MySQL 服务器是“mysqld.exe”而不是“mysql.exe”。mysqld（d 代表守护进程）是应该在后台运行的服务器，它执行创建表、数据库等实际工作。但是 mysql.exe 只是连接到服务器并帮助您执行 SQL 查询。mysql.exe 只是一个连接服务器的接口。如果您想知道为什么您的服务器（在您的情况下是 Windows 服务）没有启动，您应该在 Program Files 下的 MySQL 服务器安装文件夹中看到 XXX.log。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T14:26:26.607

尝试通过各自的名称“localhost”在 MySql 中创建数据库，例如：创建数据库 localhost；通过这样做，您可以清除以下错误 **ERROR 1049 (42000): Unknown database 'localhost'**

希望我是对的

谢谢，大雅

# migration - liquibase include file and dbDoc Or update fails

> ID：14687747
> 
> 赞同：0
> 
> 时间：2013-02-04T13:25:53.307
> 
> 标签：migration, database-migration, liquibase

I have directory structure for migrations as follow:

db1:

*   latest/ (triggers,functions,procedures)
*   tables/
*   v000/master.xml
*   update.xml

# db1/update.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <include   file="v000/master.xml" relativeToChangelogFile="true"/>

</databaseChangeLog> 
```

db2: (try to include db1/update.xml) schema here , as I need to extend/add to db1 schema )

*   update.xml

# db2/update.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <include   file="../db1/update.xml" />

</databaseChangeLog> 
```

db1> **liquibase --changeLogFile=update.xml update , successful**

but

db2 > **liquibase --changeLogFile=update.xml validate**

show validation errors for tables included from db1/v000/master.xml

```
<include file="tables/12_createTable_audiences.xml" /> 
```

`Error Reading Migration File:tables/12_createTable_audiences.xml .....`

if I fix the error by following changes (for each table: in db1/v000/mater.xml)

```
 <include file="../tables/12_createTable_audiences.xml" relativeToChangelogFile="true"/> 
```

db2 > **liquibase --changeLogFile=update.xml validate/update works fine**

but

db2 > **liquibase --changeLogFile=update.xml dbDocs ~/docs/db1**

fails on table 12_createTable_audiences.xml

Does any one know how to fix these (path issues) ? Why update and dbDoc commands behave differently for same paths ?

thanks for your kind support.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:51:23.650

`relativeToChangelogFile`尝试从根目录指定包含文件中的路径，而不是使用属性。就像是

```
<iuclude file = "./Update/db1/update.xml" /> 
```

# r - lme4/Matrix：未找到入口点 - 如何修复？

> ID：14687753
> 
> 赞同：2
> 
> 时间：2013-02-04T13:26:18.110
> 
> 标签：r, statistics, regression, lme4, mixed-models

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T11:16:28.920

I have now solved this problem.

It required a minor upgrade of R from v 2.15.1 to 2.15.2

# zend-framework2 - How to Show Stack Traces in Zend Framework 2

> ID：14687754
> 
> 赞同：1
> 
> 时间：2013-02-04T13:26:20.307
> 
> 标签：zend-framework2, stack-trace

This seems like a really simple question but, as with many things ZF2, I cannot seem to find an answer.

I am learning to use ZF2, after having developed in ZF1 for years. I am following the tutorials but finding it quite frustrating as when I have an error or bad configuration I just get a blank page - no clues, no stack trace.

In ZF1 to print errors and stack traces to screen you could add the following line in .htaccess

```
SetEnv APPLICATION_ENV development 
```

and in application.ini

```
[development : production]
phpSettings.display_startup_errors = 1 
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

How do I do this in ZF2??

I see no way to turn on a development mode?

I tried adding the following to local.php but always just get a blank page when something goes wrong and need to check the Apache2 log file to see what the problem was:

```
'view_manager' => array(
    'display_exceptions' => true,
    ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:22:52.537

尝试重命名`local.php`为`debug.local.php`（或 something.local.php）。

我猜它没有被自动加载模式拾取`application.config.php`：

```
'config/autoload/{,*.}{global,local}.php' 
```

# c# - 使用 StringReader 附加文 本（在 reader.ReadLine() 之后）

> ID：14687757
> 
> 赞同：2
> 
> 时间：2013-02-04T13:26:26.923
> 
> 标签：c#, append, stringreader

现在我正在使用 c# 构建一个游戏应用程序，这将需要从游戏脚本的文本文件中加载。（相当简单的视觉小说游戏）

现在，当主窗体加载时，我从文件 script.txt 加载脚本并声明：

```
StringReader reader = new StringReader(script); 
```

作为一个全局变量

现在在阅读器位于字符串脚本中间的游戏中间，我需要从阅读器的下一行开始追加。基本上我想要实现的目标：

> 将“news.txt”中的所有文本附加到从 reader.ReadLine() 开始的脚本中[即在字符串脚本的中间]

实现这一目标的最有效解决方案是什么？

我知道的：

```
StreamReader sr = new StreamReader("news.txt");
string news = sr.ReadToEnd();
//Now how to append 'news' to reader.ReadLine() ?? 
```

编辑以获得更多说明（对不起，这是我第一次在这里问）：我将尝试更多地解释我在这里想要实现的目标。我现在有什么：

```
//global variables
string script;
StringReader reader;

//during form_load
StreamReader sr = new StreamReader("script.txt");
script = sr.ReadToEnd();
reader - new StringReader(script);

//And as the game progresses, I keep on implementing reader.ReadLine()..
//At one point, the program will ask the user, do you want to watch the news?
DialogResult dialogResult = MessageBox("Do you want to watch the news?", , MessageBoxButtons.YesNo

if(dialogResult == DialogResult.Yes)
{
   StreamReader newsSr = new StreamReader("news.txt");
   string news = newsSr.ReadToEnd();
   //now I want to append the contents of 'news' to the string 'script' after reader.ReadLine() - any best way to implement this?
} 
```

一种可能的方法（我认为这也是最糟糕的方法）是通过引入一个计数变量，以获取最后一个 reader.ReadLine() 的起始位置，并使用 Insert 执行所需的结果，如下所示： script = script.Insert （开始索引，新闻）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:48:44.063

您不能写入`StringReader`.

但是，如果我了解您的最新问题，我认为您想要这个。

```
StreamReader sr = new StreamReader("news.txt");
string news = string.Empty;
string line = sr.ReadLine();

while (line != null)
{
   news += line;
   news += someOtherString;
   line = sr.ReadLine();
} 
```

*除此之外*，我不会使用字符串连接来做到这一点。我会用`StringBuilder`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:14:20.783

只需使用 . 将文件加载到内存中即可`File.ReadAllLines()`。

然后，您可以将其作为字符串数组访问，而无需担心读取器、写入器、流等。

例如：

```
// load files as arrays
string[] scriptLinesArray = File.ReadAllLines("script.txt");
string[] newsLinesArray = File.ReadAllLines("news.txt");

// convert arrays to lists
var script = new List<string>(scriptLinesArray);
var news = new List<string>(newsLinesArray );

// append news list to script list
script.AddRange(news); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T14:39:48.023

最后我能够解决这个问题。这就是我使用的（以防有人想知道:)）

```
//I'm using a switch statement, in case reader.ReadLine() == "#(morningnews)"
dialogResult = MessageBox.Show("Do you want to watch the news?", , MessageBoxButtons.YesNo);
if(dialogResult = DialogResult.Yes)
{
  StreamReader sr = new StreamReader(directoryName + "\\morningactivities\\morningnews1.txt");
  string news = sr.ReadToEnd();
  script = script.Replace("#(morningnews)", "#(morningnews)\n" + news);
  reader = new StringReader(script);
  while (reader.ReadLine() != "#(morningnews)")
    continue;
  loadNextScript();
} 
```

感谢所有提供帮助的人，它给了我真正想出这个的灵感。

# database - 从应用程序内部设置 Glassfish 数据库

> ID：14687762
> 
> 赞同：1
> 
> 时间：2013-02-04T13:26:43.667
> 
> 标签：database, glassfish

我有一个使用简单数据库进行登录管理的 JSF 应用程序。我使用 Oracle Galssfish 作为服务器，在管理控制台上完成所有必要的配置（设置驱动程序、连接池等）后，它工作正常。

但是，我想知道是否有一种方法可以从我的应用程序内部设置连接池参数（ip、端口、用户名和密码）。我可以在我的 bean 上创建我需要的所有属性，然后获取/设置就可以了，但是如何在 Glassfish 上设置它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:07:27.870

您可以使用 AMX（应用程序服务器管理扩展）：

请参阅[https://blogs.oracle.com/JagadishPrasath/entry/creating_jdbc_connection_pool_resource#4_Creating_Connection_Pool__Resource](https://blogs.oracle.com/JagadishPrasath/entry/creating_jdbc_connection_pool_resource#4_Creating_Connection_Pool__Resource)

# jboss - 使用 intellij idea 调试 Jboss 7.x

> ID：14687764
> 
> 赞同：4
> 
> 时间：2013-02-04T13:26:59.780
> 
> 标签：jboss, intellij-idea, remote-debugging

我正在尝试在我的 macbook pro（os Mountain Lion）上调试应用程序。但是当我点击调试时，它会提醒：`unable to connect localhost 4010`. 我在 jboss 上将端口设置为 4010。这是应用程序启动时的输出。

```
Listening for transport dt_socket at address: 4010 
```

关于吉的；调试设置是“远程服务器”远程连接设置；

```
host : localhost
port : 4010 
```

![配置 ss1](../Images/78e02af80a8d6b7decce14ad25a44723.png) ![配置 ss2](../Images/09cfbfdeeb13389552372fbc4e1b1891.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:44:14.560

您很可能正在为 HTTP 端口使用调试器端口：

![HTTP 端口](../Images/c91fe5c634396d99595bc99eb1b41cc2.png)

![调试器端口](../Images/b677985bb4ea0c8cf452755bf7761d44.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-06T08:33:58.633

如果您只想连接到本地应用程序服务器：

1.  打开“运行/调试配置”窗口。
2.  添加新配置 -**远程**
3.  将端口设置为您的 Jboss 套接字端口

# iphone - QuickDialog 需要一个 QNumberElement

> ID：14687772
> 
> 赞同：1
> 
> 时间：2013-02-04T13:27:10.077
> 
> 标签：iphone, ios, forms, quickdialog

我已经阅读了所有的课程`QuickDialog`。但我找不到适合我需要的元素。我需要一个值为 的元素`NSNumber`，并且键盘类型为`UIKeyboardTypeNumberPad`。也许我没有注意到一个。有人可以告诉我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:21:00.503

那不是 QDecimalElement 吗？

[https://github.com/escoz/QuickDialog/blob/master/quickdialog/QDecimalElement.m](https://github.com/escoz/QuickDialog/blob/master/quickdialog/QDecimalElement.m)

# ios - AudioSessionSetActive(true) 在 kAudioSessionCategory_PlayAndRecord 类别处于活动状态时立即停止 iPod 播放器

> ID：14687774
> 
> 赞同：2
> 
> 时间：2013-02-04T13:27:10.813
> 
> 标签：ios, core-audio, audiosession

我有点困惑。我正在运行以下设置。我正在使用 kAudioSessionCategory_PlayAndRecord 类别，iPod 在后台播放一些音乐。

如果我想播放一些具有以下类别覆盖的应用音乐，iPod 音乐将通过 [[AVAudioSession sharedInstance] setActive:YES...] 调用很快停止，但似乎闪避和混合工作。一旦我的应用程序声音停止，同样的情况也会发生，再次使用相应的 ...:setActive:NO] 调用。如果我将使用 MediaPlayback 类别，则应用程序声音和 iPod 声音之间的“混合”可以正常工作而不会出现任何中断。类别切换对我来说不是一个选项（我还需要蓝牙覆盖），因此我期待有人可以帮助我解决这个问题。

```
- (IBAction) playAppSound: (id) sender {

    NSError *activationError = nil;
    [[AVAudioSession sharedInstance] setActive: NO error: &activationError];

    // set internal speakers as default...
    UInt32 useDefaultSpeakers = 1;
    AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker,
                       sizeof(useDefaultSpeakers),
                       &useDefaultSpeakers);

    // always try to enable ducking
    UInt32 shouldDuck = 1; 
    AudioSessionSetProperty( kAudioSessionProperty_OtherMixableAudioShouldDuck,
                       sizeof(UInt32),
                       &shouldDuck );

    UInt32 doSetProperty = 1;
    AudioSessionSetProperty (
                        kAudioSessionProperty_OverrideCategoryMixWithOthers,
                        sizeof (doSetProperty),
                        &doSetProperty
                        );

// Activates the audio session.

[[AVAudioSession sharedInstance] setActive: YES error: &activationError];

[appSoundPlayer play]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:06:15.030

我发现设置`kAudioSessionProperty_OtherMixableAudioShouldDuck` **和** `kAudioSessionProperty_OverrideCategoryMixWithOthers`会话会导致意想不到的`kAudioSessionCategory_PlayAndRecord`事情发生（即混合覆盖失败）。您的应用程序真的必须避开其他音频吗？当我从我的应用程序中删除该部分时，一切都按我的预期工作。

# jquery - 为什么 jquery .change() 不能与 jquery 插件 jquery.selectbox-0.6.1.js 一起使用？

> ID：14687775
> 
> 赞同：0
> 
> 时间：2013-02-04T13:27:13.603
> 
> 标签：jquery, select

我正在尝试使用 jquery.selectbox-0.6.1.js 插件进行下拉。

我想对选择框上的更改事件执行一些操作，但对更改事件执行

选择框什么都没有发生..我不知道为什么这会发生在我身上。

这是我的代码：

```
<select id="per-page-select">
<option>1</option>
<option>2</option>
<option>3</option> 

         $('#per-page-select').selectbox().change(function() 
    {
          window.location = pager_url.replace('!REPLACEPAGE!', $(this).val());
    }); 
```

上面的代码不起作用，但如果我删除 .selectbox() 那么代码工作正常。

```
$('#per-page-select').change(function() 
    {
          window.location = pager_url.replace('!REPLACEPAGE!', $(this).val());
    }); 
```

上面的代码有效，因为这里我没有使用 selectbox()。

这是 jquery.selectbox-0.6.1.js 的代码

```
jQuery.fn.selectbox = function(options){
    /* Default settings */
    var settings = {
        className: 'jquery-selectbox',
        animationSpeed: "normal",
        listboxMaxSize: 10,
        replaceInvisible: false
    };
    var commonClass = 'jquery-custom-selectboxes-replaced';
    var listOpen = false;
    var showList = function(listObj) {
        var selectbox = listObj.parents('.' + settings.className + '');
        listObj.slideDown(settings.animationSpeed, function(){
            listOpen = true;
        });
        selectbox.addClass('selecthover');
        jQuery(document).bind('click', onBlurList);
        return listObj;
    }
    var hideList = function(listObj) {
        var selectbox = listObj.parents('.' + settings.className + '');
        listObj.slideUp(settings.animationSpeed, function(){
            listOpen = false;
            jQuery(this).parents('.' + settings.className + '').removeClass('selecthover');
        });
        jQuery(document).unbind('click', onBlurList);
        return listObj;
    }
    var onBlurList = function(e) {
        var trgt = e.target;
        var currentListElements = jQuery('.' + settings.className + '-list:visible').parent().find('*').andSelf();
        if(jQuery.inArray(trgt, currentListElements)<0 && listOpen) {
            hideList( jQuery('.' + commonClass + '-list') );
            jQuery('.indented .jquery-selectbox').addClass('hidden');
        }
        return false;
    }

    /* Processing settings */
    settings = jQuery.extend(settings, options || {});
    /* Wrapping all passed elements */
    return this.each(function() {
        var _this = jQuery(this);
        if(_this.filter(':visible').length == 0 && !settings.replaceInvisible)
            return;
        var replacement = jQuery(
            '<div class="' + settings.className + ' ' + commonClass + '">' +
                '<div class="' + settings.className + '-moreButton" />' +
                '<div class="' + settings.className + '-list ' + commonClass + '-list" />' +
                '<span class="' + settings.className + '-currentItem" />' +
            '</div>'
        );
        jQuery('option', _this).each(function(k,v){
            var v = jQuery(v);
            var listElement =  jQuery('<span class="' + settings.className + '-item value-'+v.val()+' item-'+k+'">' + v.text() + '</span>');   
            listElement.click(function(){                
                var thisListElement = jQuery(this);
                var thisReplacment = thisListElement.parents('.'+settings.className);
                var thisIndex = thisListElement[0].className.split(' ');
                for( k1 in thisIndex ) {
                    if(/^item-[0-9]+$/.test(thisIndex[k1])) {
                        thisIndex = parseInt(thisIndex[k1].replace('item-',''), 10);
                        break;
                    }
                };
                var thisValue = thisListElement[0].className.split(' ');
                for( k1 in thisValue ) {
                    if(/^value-.+$/.test(thisValue[k1])) {
                        thisValue = thisValue[k1].replace('value-','');
                        break;
                    }
                };                
                thisReplacment
                    .find('.' + settings.className + '-currentItem')
                    .text(thisListElement.text())
                    .addClass('activated');
                    jQuery('.indented .jquery-selectbox').addClass('hidden');
                    jQuery('.t-current').text(thisListElement.text());
                thisReplacment
                    .find('select')
                    .val(thisValue)
                    .triggerHandler('change');
                var thisSublist = thisReplacment.find('.' + settings.className + '-list');
                if(thisSublist.filter(":visible").length > 0) {
                    hideList( thisSublist );
                }else{
                    showList( thisSublist );
                }
            }).bind('mouseenter',function(){
                jQuery(this).addClass('listelementhover');
            }).bind('mouseleave',function(){
                jQuery(this).removeClass('listelementhover');
            });
            jQuery('.' + settings.className + '-list', replacement).append(listElement);
            if(v.filter(':selected').length > 0) {
                jQuery('.'+settings.className + '-currentItem', replacement).text(v.text());
            }
        });
        replacement.find('.' + settings.className + '-moreButton').click(function(){
            var thisMoreButton = jQuery(this);
            var otherLists = jQuery('.' + settings.className + '-list')
                .not(thisMoreButton.siblings('.' + settings.className + '-list'));
            hideList( otherLists );
            var thisList = thisMoreButton.siblings('.' + settings.className + '-list');
            if(thisList.filter(":visible").length > 0) {
                hideList( thisList );
            }else{
                showList( thisList );
            }
        }).bind('mouseenter',function(){
            jQuery(this).addClass('morebuttonhover');
        }).bind('mouseleave',function(){
            jQuery(this).removeClass('morebuttonhover');
        });
        replacement.find('.' + settings.className + '-currentItem').click(function(){
            var thisMoreButton = jQuery(this);
            var otherLists = jQuery('.' + settings.className + '-list')
                .not(thisMoreButton.siblings('.' + settings.className + '-list'));
            hideList( otherLists );
            var thisList = thisMoreButton.siblings('.' + settings.className + '-list');
            if(thisList.filter(":visible").length > 0) {
                hideList( thisList );
            }else{
                showList( thisList );
            }
        }).bind('mouseenter',function(){
            jQuery(this).parent().find('.jquery-selectbox-moreButton').addClass('morebuttonhover');
        }).bind('mouseleave',function(){
            jQuery(this).parent().find('.jquery-selectbox-moreButton').removeClass('morebuttonhover');
        });
        _this.hide().replaceWith(replacement).appendTo(replacement);
        var thisListBox = replacement.find('.' + settings.className + '-list');
        var thisListBoxSize = thisListBox.find('.' + settings.className + '-item').length;
        if(thisListBoxSize > settings.listboxMaxSize)
            thisListBoxSize = settings.listboxMaxSize;
        if(thisListBoxSize == 0)
            thisListBoxSize = 1;   
        var thisListBoxWidth = Math.round(_this.width() + 2);
        if(jQuery.browser.safari)
            thisListBoxWidth = thisListBoxWidth * 1;
        replacement.css('width', thisListBoxWidth + 'px');
        thisListBox.css({
            width: Math.round(thisListBoxWidth-1) + 'px'
        });
    });
}
jQuery.fn.unselectbox = function(){
    var commonClass = 'jquery-custom-selectboxes-replaced';
    return this.each(function() {
        var selectToRemove = jQuery(this).filter('.' + commonClass);
        selectToRemove.replaceWith(selectToRemove.find('select').show());       
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:31:58.187

`bind()`如果您使用的是 selectbox() jquery 插件，则需要更改事件

尝试这个

```
 $('#per-page-select').selectbox().bind('change', function(){
      window.location = pager_url.replace('!REPLACEPAGE!', $(this).val());
}); 
```

# c++ - c++ 类中的运算符重载函数

> ID：14687779
> 
> 赞同：0
> 
> 时间：2013-02-04T13:27:31.497
> 
> 标签：c++, class, arguments, operator-overloading

这是我的独立运算符重载函数。

```
#include <fstream>
#include <iostream>
#include <sstream>
#include <string>
#include <vector>
using namespace std;

typedef vector <string> record_t;
typedef vector <record_t> data_t;

istream& operator >> ( istream& ins, record_t& record )
  {

  record.clear();
  string line;
  getline( ins, line );
  stringstream ss( line );
  string field;
  while (getline( ss, field, '\t' ))
    {
    stringstream fs( field );
    string f("");  // (default value is 0.0)
    fs >> f;
    record.push_back( f );
    }
  return ins;
  }

istream& operator >> ( istream& ins, data_t& data )
  {

  data.clear();
  record_t record;
  while (ins >> record)
    {
    data.push_back( record );
    }
  return ins;  
  }

int main()
  {
  // Here is the data we want.
  data_t data;

  ifstream infile( "split.idx" );
  infile >> data;

  if (!infile.eof())
    {
    cout << "Fooey!\n";
    return 1;
    }

  infile.close();

  // Otherwise, list some basic information about the file.
  cout << "Your CSV file contains " << data.size() << " records.\n";

  return 0;
  } 
```

这里我有两个运算符重载函数。

```
istream& operator >> ( istream& ins, record_t& record )
istream& operator >> ( istream& ins, data_t& data ) 
```

现在我希望以 Class 格式编写函数。所以我在名为（“Headers.h”）的头文件中声明了typedef数据和记录变量

```
typedef vector <string> record_t;
typedef vector <record_t> data_t; 
```

现在我写了一个类。文件处理程序1.h

```
#ifndef _FILEHANDLER
#define _FILEHANDLER
#endif

class FileHandler1
{

    public : 

        istream& operator >> ( istream& ins, record_t& record );

        istream& operator >> ( istream& ins, data_t& data );

}; 
```

文件处理程序1.cpp

```
#include "Headers.h"
#include "FileHandler1.h"
istream& FileHandler1:: operator >> ( istream& ins, record_t& record )
{
//Same set of code I posted initially 
}

istream& FileHandler1:: operator >> ( istream& ins, data_t& data )
{
// Same set of code  
} 
```

现在我得到了以下错误。

> 错误：'std::istream& FileHandler1::operator>>(std::istream&, record_t&)' 必须只有一个参数

我怎样才能修复这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:32:18.970

二元运算符，例如`operator>>`，可以实现为非成员函数或成员函数。当它被实现为非成员函数时，它需要两个参数，比如说`T`和`U`。当它被实现为成员函数时，它接受一个参数 - 只是`U`- 左操作数是它所属的类的类型。

也就是doing `t >> u`，其中`operator>>`的成员`T`，calls `t.operator>>(u)`。

在这里，您尝试创建`operator>>`的成员`FileHandler1`，即使 的左操作数`>>`不是该类型。如果您被允许，则操作员必须是 的成员`istream`，但这不取决于您，因为它是标准类型。您必须将这些函数实现为非成员函数。

如果您*确实*有 的`operator>>`成员`FileHandler1`，则必须使用单个参数声明它：

```
FileHandler1& operator >> ( U& right_operand ); 
```

然后你必须将它与一个`FileHandler1`对象一起用作左操作数：

```
FileHandler1 fh;
U u;
fh >> u; // Equivalent to fh.operator>>(u) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:32:30.947

类中的输入运算符适用于当类实例*是*输入流时。例如在你的情况下：

```
FileHandler1 fh1;
fh1 >> something; 
```

以上翻译为：

```
fh1.operator>>(something); 
```

这就是成员输入运算符只接受一个参数的原因，这就是错误消息告诉您的内容。

这似乎不是您想要的，因此您必须将输入运算符保留为独立函数。

# java - 基于 Line Starter 拆分文本文件

> ID：14687781
> 
> 赞同：1
> 
> 时间：2013-02-04T13:27:34.153
> 
> 标签：java, string

我想根据行首将行拆分为列表，但在尝试时遇到异常。

**文件内容：**

```
H1|!!!!!!!!!!!!!!!!!
L1|DDDDDDDDDDDDD
L2|DDDDDDDDDDDDD
H2|!!!!!!!!!!!!!!!!!
L1|DDDDDDDDDDDDD
L2|DDDDDDDDDDDDD
L3|DDDDDDDDDDDDD
EOF 
```

**输出 ：**

```
 Postring size :8
SSSSS:H1|!!!!!!!!!!!!!!!!!
0head:H1|!!!!!!!!!!!!!!!!!
1detail:L1|DDDDDDDDDDDDD
2detail:L2|DDDDDDDDDDDDD
3detail:H2|!!!!!!!!!!!!!!!!!
SSSSS:H2|!!!!!!!!!!!!!!!!!
3head:H2|!!!!!!!!!!!!!!!!!
4detail:L1|DDDDDDDDDDDDD
5detail:L2|DDDDDDDDDDDDD
6detail:L3|DDDDDDDDDDDDD
7detail:EOF
SSSSS:L1|DDDDDDDDDDDDD
SSSSS:L2|DDDDDDDDDDDDD
SSSSS:L3|DDDDDDDDDDDDD
SSSSS:EOF
hshshshshs::::::: 
```

[[H2|！！！！！！！！！！！！！！！！！！！！！，L1|DDDDDDDDDDDDD，L2|DDDDDDDDDDDDD，L3|DDDDDDDDDDDDD，EOF]]

**listOrder --是行字符串列表**

```
 List<Order> listOrder = new ArrayList<Order>();
           Set<List<String>> hs = new HashSet<List<String>>();
           if(poString !=null && poString.size() > 0)
            {      

               headerstart:
               for(int i=0;i<poString.size();i++)
               {
                   String s = poString.get(i);
                   if(s.startsWith("H"))
                   {
                       List<String> tempS = new ArrayList<String>();
                       tempS.add(s);
                       System.out.println("head:"+s);
                       for(int j=i+1;i<poString.size();j++)
                       {
                           String t = poString.get(j);
                           System.out.println("detail:"+t);
                           if(t.startsWith("H"))
                           {
                               i = j-1;
                                               hs.add(tempS);
                               continue  headerstart;
                            }
                           else
                           {
                            tempS.add(t);
                           }
                       }
                       hs.add(tempS);
                   }
               } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:29:39.937

在你的外循环中： -

```
for(int i=0;i<poString.size();i++) 
```

当`i`达到的值时`poString.size() - 1`，则在内循环中：-

```
for(int j=i+1;i<poString.size();j++) 
```

的值用`j`初始化`poString.size()`。现在，由于您的条件`i < poString.size()`仍然适用于`i = poString.size() - 1`，因此您在循环内移动，并`j`在以下位置访问索引：-

```
String t = poString.get(j); 
```

这是`IndexOutOfBounds`。事实上，你只会在外循环的第一次迭代中遇到这个问题。由于条件中的逻辑错误，您的内部循环永远不会中断。

因此，基本上，您需要将内部循环更改为：-

```
for(int j=i+1; j < poString.size();j++) 
```

请注意，我只在条件部分更改`i`为`j`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:36:46.267

这里

```
for(int j=i+1;i<poString.size();j++) 
```

在执行此操作时，您将在包含您的逻辑的 for 的上下文之外存储手动递增`j`的值。`i`这可以看作是“未经检查”的增量，`i`因为您使用`j`定义您使用索引迭代的同一集合的`i`索引。

每当您这样做时，在最后一个元素上，您将使用超出数组边界的索引 for `j`，因为如果最后一个索引是`7`（请记住，列表像数组一样从索引`0`到索引），将是8、会扔。`length - 1``j``poString.get(j)``IndexOutOfBoundsException`

每当您手动增加索引的值或在特定时间构造一个给定的不同变量时，您都应该始终进行范围检查（如果`j`介于`0`和之间，则都包括在检查中）。`poString.size() - 1`循环将迭代直到不再满足条件（即，当`i< poString.size()`返回 false 时），但您的条件与 相关`i`，而不是与 相关`j`，从而在处理迭代中针对其他索引验证的索引时允许这种不幸。由于检查不是在`for`循环中完成的，因此您必须手动进行。

在你的情况下，这样的事情可能是解决方案：

```
int j = 0;
for(j = i + 1;j < poString.size();j++) 
```

由于此迭代`j`直接控制。

# c# - 将 RGB 浮点数据转换为十六进制字符串

> ID：14687786
> 
> 赞同：3
> 
> 时间：2013-02-04T13:27:51.153
> 
> 标签：c#, rgb

我正在编写一个修改游戏的工具，游戏使用浮点数来存储 RGB 数据（范围从 0.0 -> 1.0）。您最好如何建议我将浮点 RGB 数据转换为十六进制字符串/字节 RGB 数据？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-04T13:33:46.570

```
var rgbString = string.Format("#{0}{1}{2}", 
    ((int)(redValue * 255)).ToString("X2"), 
    ((int)(greenValue * 255)).ToString("X2"), 
    ((int)(blueValue * 255)).ToString("X2")); 
```

编辑（也许更易读的代码）：

```
var rgbString = string.Format("#{0:X2}{1:X2}{2:X2}", 
    (int)(redValue * 255), 
    (int)(greenValue * 255), 
    (int)(blueValue * 255)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:36:37.347

```
float rVal = 0.5f;
float gVal = 0.94140625f;
float bVal = 0.21484375f;

byte rByte = (byte)(rVal * 256);
byte gByte = (byte)(gVal * 256);
byte bByte = (byte)(bVal * 256);

string rgb = rByte.ToString("X2") + gByte.ToString("X2") + bByte.ToString("X2"); 
```

结果：

> 80F137

# r - 基本 R 指南：逐字记录？在 R 中使用 knitr

> ID：14687788
> 
> 赞同：6
> 
> 时间：2013-02-04T13:27:55.780
> 
> 标签：r, latex, knitr, pdflatex

我正在为我的公司制作介绍性 R 指南。我正在做一个 R 帮助功能的小演示（速记）

```
?mean 
```

这是在 knitr 块中：

```
<<eval=FALSE>>=
?mean
@ 
```

输出：

```
`?`(mean) 
```

我希望它在我输入时输出它，即`?mean`不是`?(mean)`（带有反引号）。有谁知道这个的解决方法？

谢谢！

抱歉，如果这是一个重复的问题或有一个非常简单的解决方案 - 这不是一个容易搜索的主题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:58:55.687

设置`tidy=FALSE`将为您提供您正在寻找的结果：

```
<<eval=FALSE, tidy=FALSE>>=
?mean
@ 
```

输出

```
?mean 
```

# javascript - Javascript重定向，最快的方法？

> ID：14687790
> 
> 赞同：6
> 
> 时间：2013-02-04T13:28:02.743
> 
> 标签：javascript, jquery, html, redirect, meta

我正在使用 javascript 并`localStorage`重定向。
但我发现有很多方法可以做到这一点。这里有几个：

```
document.location
document.location.href
window.open(url,how)
window.location
top.location
window.navigate() //not sure that this works 
```

和 html 元方式

```
<meta http-equiv="REFRESH" content="0;url=http://www.google.com"/> 
```

我只是对上述哪个（或任何其他代码）将重定向更快感兴趣。至于信息，当打开新标签时，我将使用它来重定向（到网站）谷歌浏览器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T13:36:30.423

元重定向是一种可怕的黑客攻击，它破坏了后退按钮。永远不要使用它。

其余基本等价。`window.location`是最常见的。

最快的方法可能不是从 JS 重定向，而是使用`<a href>`（如果您需要在导航之前执行一些操作，则使用单击处理程序），例如使浏览器能够预取 DNS。

# java - 在 im4java 中打开 SWT 图像

> ID：14687794
> 
> 赞同：1
> 
> 时间：2013-02-04T13:28:17.673
> 
> 标签：java, image, swt, im4java

我有一个 SWT 应用程序，用户可以在其中将图像拖放到画布上。删除后，我在 SWT.graphics.Image 实例中跟踪图像。

现在我想使用 im4java 编辑图像并在画布对象上显示图像。但我坚持将图像放入 IMOperation 对象。

```
Image i = this.image; //image is stored in here
ConvertCmd cmd = new ConvertCmd();
IMOperation op = new IMOperation();
//how can i edit the image data using the op object? 
```

是否可以通过这种方式编辑 Image 对象？

编辑：我想在这里更具体：我知道如何使用以下方法将图像加载到操作中：

```
IMOperation op = new IMOperation();
op.addImage("myimage.jpg"); 
```

但在我的情况下，我不想通过文件名加载图像，但我想使用 Image 实例。

```
op.setImageData(i.getImageData()) //does sth like this exist? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:28:16.330

可能不是。你可以：

1.  使用`BufferedImage`s 并在嵌入式 AWT 控件中显示它们。
2.  使用`BufferedImage`s[并将它们与 SWT 相互转换](https://stackoverflow.com/questions/6498467/conversion-from-bufferedimage-to-swt-image)。这很慢（根据我的经验），可能不适用于所有图像。
3.  用于[`ImageLoader`](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/graphics/ImageLoader.html)处理[输入/输出流](http://im4java.sourceforge.net/docs/dev-guide.html#piping)。

# ruby - 如何在 twilio rest api 中改变声音？

> ID：14687795
> 
> 赞同：1
> 
> 时间：2013-02-04T13:28:21.620
> 
> 标签：ruby, twilio

我正在尝试使用 twilio 创建一个示例应用程序，其中进行了调用。我正在通过 twiml-ruby gem 生成 twiml。我只是想知道如何将声音变成女人的声音。

现在默认是 man 当我使用

```
r.Say "hello world" 
```

如何传递该语音参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:35:41.917

[https://github.com/twilio/twilio-ruby#getting-started-with-twiml](https://github.com/twilio/twilio-ruby#getting-started-with-twiml)

该文档指定了一个语音参数：

```
r.Say 'hello there', :voice => 'woman' 
```

# ruby-on-rails - 如何从compoundjs控制器中的json检索数据

> ID：14687799
> 
> 赞同：1
> 
> 时间：2013-02-04T13:28:40.063
> 
> 标签：ruby-on-rails, json, node.js, mongodb

嗨，我是新手`compound Js`。

在`compound js`，我正在从后端检索数据，因为数据是 json 格式。

在我的控制器中，我编写了代码来通过像这样传递 id 来检索数据-

```
action(function teamforsportsid(req, res){

return Team.find(req.params.id, function(err, team){

    if(!err) {

        return send(team[0]["_id"]);

    }else {
        return console.log(err);
    }
 }); 
```

});

在这个团队[0]["_id"] 中，我得到了特定的 ID。

代替`team[0]["_id"]`，我用过`team[0]["first_name"]`，但我没有得到名字......

我的json会是这样的......

```
[
{
"_id": "510b51ff6ee1f5ab2800001f",

"first_name": "Pittsburgh"} ] 
```

有没有其他方法可以在控制器中检索数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:36:43.380

用这个-

```
action(function teamforsportsid(req, res){

return Team.find(req.params.id, req.params.first_name, function(err, team){

    if(!err) {

        return send(team[0]["_id"], team[0]["first_name"]);

    }else {
        return console.log(err);
    }
 });

}); 
```

# c# - 如何更改列表框选定项目的背景和前景？

> ID：14687810
> 
> 赞同：0
> 
> 时间：2013-02-04T13:29:16.923
> 
> 标签：c#, wpf, listbox, datatemplate, textblock

```
<Window.Resources>
    <Style x:Key="ListBoxStyle" TargetType="{x:Type ListBox}">
        <Setter Property="Background" Value="{StaticResource ResourceKey=ListboxBack}"/>
        <Setter Property="Foreground" Value="Green"/>
        <Setter Property="Width" Value="284"/>
        <Setter Property="Height" Value="332"/>
        <Setter Property="Margin" Value="18,77,0,151"/>
        <Setter Property="ItemTemplate" Value="{DynamicResource DataTemplate1}"/>
        <Setter Property="HorizontalAlignment" Value="Left"/>
        <Setter Property="BorderThickness" Value="0"/>
        <Setter Property="Padding" Value="0,0,0,0"/>
</Style>

    <DataTemplate x:Key="DataTemplate1">
        <Grid Width="276" Height="36" Background="{x:Null}" Opacity="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.069*"/>
                <ColumnDefinition Width="0.931*"/>
            </Grid.ColumnDefinitions>
            <TextBlock x:Name="recback" Padding="40,0,0,0" Text="{Binding [0], FallbackValue=Number}" Width="Auto" HorizontalAlignment="Stretch" Margin="-1.899,0,-5.334,0" Grid.Column="0" FontSize="13.333" Height="38.277" VerticalAlignment="Top" Foreground="Black" Background="{x:Null}" Opacity="1" Grid.ColumnSpan="2" />
            <Rectangle HorizontalAlignment="Stretch" Height="1" Margin="3.5,0" VerticalAlignment="Bottom" Width="Auto" Fill="White" Grid.ColumnSpan="2"/>
        </Grid>
    </DataTemplate>
</Window.Resources>

<ListBox Style="{StaticResource ResourceKey=ListBoxStyle}" BorderThickness="0" x:Name="listBox1" Foreground="White" FontSize="18" d:LayoutOverrides="VerticalAlignment" BorderBrush="{x:Null}" /> 
```

我`ListBox`用`DataTemplate`. `DataTemplate`包含 a`Rectangle`和 a `Textblock`。当我选择项目时，`ListBox`我想更改`TextBlock`前景和`Rectangle`背景。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:45:25.677

使用类似于以下的方法。这样，您将`x:Key`使用此 ListBox Only 的指定使用覆盖默认画笔。也许您需要额外或不同`x:Key`的 s 来覆盖

```
<ListBox>
    <ListBox.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="LightBlue" />
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Green" />
    </ListBox.Resources>
</ListBox> 
```

通过再次阅读您的问题，我了解到您的 DataTemplate 中可能还需要 DataTriggers。您也可以尝试类似这样**的方法。注意 Forground 和 BackGround 应该设置为不在 TextBlock 中的样式**，这样代码才能正常工作：

```
 <TextBlock x:Name="recback" Padding="40,0,0,0" Text="{Binding [0], FallbackValue=Number}" Width="Auto" 
             HorizontalAlignment="Stretch" Margin="-1.899,0,-5.334,0" Grid.Column="0" FontSize="13.333" Height="38.277"
             VerticalAlignment="Top" Opacity="1" Grid.ColumnSpan="2">
      <TextBlock.Style>
          <Style TargetType="{x:Type TextBlock}">
              <Setter Property="Foreground" Value="Black"/>
              <Setter Property="Background" Value="{x:Null}"/>
              <Style.Triggers>
                  <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ListBoxItem}}, Path=IsSelected}" Value="True">
                      <Setter Property="Foreground" Value="Red"/>
                      <Setter Property="Background" Value="Yellow"/>
                  </DataTrigger>
              </Style.Triggers>
          </Style>
      </TextBlock.Style>
  </TextBlock> 
```

# ssis - 在 SSIS 脚本组件中接收“索引超出数组范围”错误

> ID：14687812
> 
> 赞同：2
> 
> 时间：2013-02-04T13:29:20.887
> 
> 标签：ssis

我有一个 SSIS 包，它现在因“索引超出数组范围”错误而失败。它发生在脚本组件任务中，但我在日志中看不到任何关于它失败的行的更多信息。这是我的脚本组件的文本，有人能看出这有什么问题吗？我没有更改包中的任何内容，它只是突然开始失败。

```
Imports System
Imports System.Data
Imports System.Math
Imports Microsoft.SqlServer.Dts.Pipeline.Wrapper
Imports Microsoft.SqlServer.Dts.Runtime.Wrapper

<Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute> _
<CLSCompliant(False)> _
Public Class ScriptMain
    Inherits UserComponent

    ' Wrapper for web service

    'Private CurrencyInfo As RetrieveExchangeRatesOutputMessageContract

    ' wrapper for Response from web service

    Public Overrides Sub Input0_ProcessInputRow(ByVal Row As Input0Buffer)

        Try
            Dim ws As New CurrencyExchangeWS.CurrencyExchangeWS
            Dim inContract As New CurrencyExchangeWS.ExchangeRateInputDataContract
            Dim msg As New CurrencyExchangeWS.RetrieveExchangeRatesInputMessageContract
            Dim inContracts(1) As CurrencyExchangeWS.ExchangeRateInputDataContract
            'Dim dt As Date = Now
            'dt = dt.AddDays(-1)

            inContract.RequestAsOfDate = Now
            'inContract.RequestAsOfDate = "2011-07-18"

            ' IMPORTANT: You need to specify SourceCurrencyIdSpecified and TargetCurrencyIdSpecified or the service will assume these values are null.
            inContract.SourceCurrencyIdSpecified = True
            inContract.SourceCurrencyId = Row.CurrencyTypeId

            inContract.TargetCurrencyIdSpecified = True
            inContract.TargetCurrencyId = 47

            inContracts(0) = inContract

            msg.ExchangeRateInputCollection = inContracts

            ws.Credentials = System.Net.CredentialCache.DefaultCredentials

            Dim outMsg As CurrencyExchangeWS.RetrieveExchangeRatesOutputMessageContract = ws.RetrieveExchangeRates(msg)

            'Dim rate =outMsg.ExchangeRateInfoCollection(0).Rate
            Dim rate As Decimal = outMsg.ExchangeRateInfoCollection(0).Rate

            'Dim edate = outMsg.ExchangeRateInfoCollection(0).RequestAsOfDate

            Dim edate = outMsg.ExchangeRateInfoCollection(0).RateAsOfDate

            'Dim edate As DateTime
            'edate = outMsg.ExchangeRateInfoCollection(0).RateAsOfDate

            Row.date = edate
            Row.rate = Convert.ToDecimal(1.0 / rate)

            'Dim currency = outMsg.ExchangeRateInfoCollection(0).TargetCurrencyId

        Catch ex As Exception

            ComponentMetaData.FireError(1, ComponentMetaData.Name, ex.Message, String.Empty, 0, True)

        End Try

    End Sub
    Public Overrides Sub PreExecute()
        MyBase.PreExecute()
        '
        ' Add your code here for preprocessing or remove if not needed
        ''
    End Sub

    Public Overrides Sub PostExecute()
        MyBase.PostExecute()
        '
        ' Add your code here for postprocessing or remove if not needed
        ' You can set read/write variables here, for example:
        ' Me.Variables.MyIntVar = 100
        ''
    End Sub

    'Public Overrides Sub Input0_ProcessInputRow(ByVal Row As Input0Buffer)
    '
    ' Add your code here
    '
    'End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:25:25.987

乍一看，最可能的罪魁祸首是`outMsg.ExchangeRateInfoCollection`包含零项。不幸的是，我们没有足够的信息来肯定地说。获取该附加信息的一种可能方法是在`Try ... Catch`块之外声明一个进度字符串变量，在代码中的每个步骤之前对其进行更新，并将其包含在`FireError`消息中：

```
Public Overrides Sub Input0_ProcessInputRow(ByVal Row As Input0Buffer)
    Dim progress As String

    Try
        Dim ws As New CurrencyExchangeWS.CurrencyExchangeWS
        Dim inContract As New CurrencyExchangeWS.ExchangeRateInputDataContract
        Dim msg As New CurrencyExchangeWS.RetrieveExchangeRatesInputMessageContract
        Dim inContracts(1) As CurrencyExchangeWS.ExchangeRateInputDataContract

        progress = "Setting inContract.RequestAsOfDate"
        inContract.RequestAsOfDate = Now
        progress = "Setting inContract.SourceCurrencyIdSpecified"
        inContract.SourceCurrencyIdSpecified = True

        ' etc, etc, etc.

        Dim outMsg As CurrencyExchangeWS.RetrieveExchangeRatesOutputMessageContract
        progress = "Setting outMsg"
        outMsg = ws.RetrieveExchangeRates(msg)

        progress = String.Format("Setting rate; outMsg.ExchangeRateInfoCollection.Length is {0}", outMsg.ExchangeRateInfoCollection.Length)
        ' This is likely the place where the IndexOutOfRangeException is being thrown
        Dim rate As Decimal = outMsg.ExchangeRateInfoCollection(0).Rate

        ' rest of code
    Catch ex As Exception
        ComponentMetaData.FireError(1, ComponentMetaData.Name, progress + ": " + ex.Message, String.Empty, 0, True)
    End Try
End Sub 
```

# android-fragmentactivity - TabActivity 的替代方式是什么？

> ID：14687814
> 
> 赞同：0
> 
> 时间：2013-02-04T13:29:28.610
> 
> 标签：android-fragmentactivity

嗨，我想使用选项卡活动（我的选项卡视图必须在底部）并且 android 版本 4.0 或更高版本被告知不推荐使用选项卡活动。所以它一定是比它更好的方法。但我找不到正确的。一些教程给了我使用 Fragments 的建议，但实际上我对此一无所知。所以请建议我最好的教程或片段的示例代码或其他最佳替代方式。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:34:42.827

一个建议是使用 Sherlock ActionBar。包内有关于 Fragments、ActionBar、带标签的导航的很好的示例项目！我推荐[ActionBarSherlock](http://actionbarsherlock.com/)！它也是 2.x 兼容的！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T11:41:44.973

这是来自android开发者网站的链接，

[http://developer.android.com/reference/android/app/TabActivity.html](http://developer.android.com/reference/android/app/TabActivity.html)

和一个教程，

[http://maxalley.wordpress.com/2013/05/18/android-creating-a-tab-layout-with-fragmenttabhost-and-fragments/](http://maxalley.wordpress.com/2013/05/18/android-creating-a-tab-layout-with-fragmenttabhost-and-fragments/)

只需按照上面的链接，您就可以轻松创建 i。

# ruby-on-rails-3 - NoMethodError 异常：未定义的方法`use_transactional_fixtures with cucumber selenium

> ID：14687817
> 
> 赞同：3
> 
> 时间：2013-02-04T13:29:35.440
> 
> 标签：ruby-on-rails-3, cucumber, capybara

我写的时候出错了

```
RSpec.configure do |c| 
    c.use_transactional_fixtures = true
    c.include Capybara::DSL
end 
```

NoMethodError 异常：未定义的方法`use_transactional_fixtures

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T19:51:53.090

你可能没有安装

```
gem 'rspec-rails' 
```

或者您的规格中可能不需要它

```
require 'rspec/rails' 
```

**use_transaction_fixtures**是*rspec-rails gem*的一部分：

[https://github.com/rspec/rspec-rails/blob/master/lib/rspec/rails/fixture_support.rb#L31](https://github.com/rspec/rspec-rails/blob/master/lib/rspec/rails/fixture_support.rb#L31)

希望这可以帮助你

问候

ED

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T19:11:55.580

您应该在 rspec.rb 文件中编写此代码

# objective-c - 子托管对象上下文的内容是否始终与其父对象的内容相同？

> ID：14687821
> 
> 赞同：17
> 
> 时间：2013-02-04T13:29:40.587
> 
> 标签：objective-c, xcode, core-data, nsmanagedobjectcontext

如何更新子托管对象上下文，使其与父对象具有相同的数据？

据我所知，储蓄时，孩子只走一步，即向父母。然而，当获取 fetch 时，总是会一直深入到父存储和持久存储。所以我希望事情会是一样的。

然而事实并非如此。

我有一个托管对象上下文，它是所有其他托管对象上下文的父级。

一个孩子更改数据并保存。父母也变了。我在父级上执行了 FetchRequest，我看到数据发生了变化。

但是，有些父母的孩子仍然使用旧数据。相同的对象 id 相同的数据。不知何故，财产的价值保持不变。

如何告诉孩子从父母那里重新加载新数据？

更准确地说

说 P 是父母

说它有 C1 C2 C3 作为孩子

然后 C1 更改数据并提交。更改会传播到 P。但是，在 C2 和 C3 执行 executeFetchRequest 仍会显示旧数据。

是什么赋予了？

例如，当我检查 imageBlob 属性时，我得到的是：

孩子：

```
2013-02-05 13:57:42.865 BadgerNew[78801:c07] imageBlob: <UIImage: 0x89c3c50>
2013-02-05 13:57:42.866 BadgerNew[78801:c07] imageBlob: <null>
2013-02-05 13:57:42.866 BadgerNew[78801:c07] imageBlob: <null>
2013-02-05 13:57:42.866 BadgerNew[78801:c07] imageBlob: <null> 
```

家长：

```
2013-02-05 13:57:42.868 BadgerNew[78801:c07] imageBlob: <UIImage: 0x114af650>
2013-02-05 13:57:42.868 BadgerNew[78801:c07] imageBlob: <UIImage: 0x8e492e0>
2013-02-05 13:57:42.868 BadgerNew[78801:c07] imageBlob: <UIImage: 0x114c79b0>
2013-02-05 13:57:42.869 BadgerNew[78801:c07] imageBlob: <UIImage: 0xa8c76e0> 
```

这是一个更全面的版本，为什么我记下 moc、父 moc、blob、URL 和对象 ID。孩子：

特别是我希望主队列 managedobject 上下文是父级的另一个子级，而不是所有其他 managedObjectContext 的父级。另一方面，我还希望 mainQueue 托管对象上下文具有最新信息。我想知道标准解决方案是什么。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-08T06:20:54.110

孩子有无效的现有参考。如果您希望在父保存后兄弟姐妹同步，您必须使用`reset`.

调用之后`reset`，所有接收者的托管对象都被“遗忘”。如果使用此方法，则应确保还丢弃对使用接收器获取的任何托管对象的引用，因为之后它们将无效。

如果您想更好地控制子上下文中更改的对象，您还可以`refreshObject:mergeChanges:`在保存父上下文时使用在所有子上下文中更改的单个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T20:08:05.353

实际上有很多关于如何正确执行此操作的文档，包括 2011 年和 2012 年的 WWDC 会议视频。2012 年会议 214 “核心数据最佳实践”对您来说特别有趣。

例如，对于您的保存，它应该如下所示：

```
 [child performBlock:^{
     [child save:&error];
     [parent performBlock:^{
         [parent save:&parentError];
     }];
 }]; 
```

这样可以保存孩子，更改会转到父级，而您保存在父级上 - 这会将所有这些更改正确传播到其他子上下文。查看您的问题，我认为您的实施可能会遇到其他一些问题，而 Session 214 可能对解决这些问题非常有帮助。

至于重置上下文，我不建议在使用父子上下文时这样做。我也会避免使用`refreshObject:mergeChanges:`. 为此目的使用 objectWithID 可能会为您节省很多痛苦，因为它将充分利用托管对象上下文的行缓存。它也只会遍历孩子和父母的堆栈以满足请求。

# angularjs - 如何将 json 作为字符串参数传递给指令

> ID：14687822
> 
> 赞同：8
> 
> 时间：2013-02-04T13:29:40.747
> 
> 标签：angularjs

当我尝试评估下面的 json 表单时，它给了我一个错误 -

```
eval("{form: 'form' , nameToMatch: 'password1'}") 
```

为什么上述表格无效？

但是下面的工作正常 -

```
eval("{form: 'form'}") 
```

我正在尝试将上述 json 作为字符串传递，作为指令的参数输入。

下面是html -

```
<input type="password" name="password2" ng-model="user.confirmPassword" placeholder="Confirm Password" match="{form: 'form', nameToMatch: 'password1'}" required="required"/> 
```

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-04T14:06:39.947

在你的 json 周围加上括号：

```
 eval("({form: 'form' , nameToMatch: 'password1'})") 
```

不过，这似乎不是一个有角度的问题。不确定您要做什么：

无论如何，要将json*传递*给指令，有很多方法可以做到这一点。我不确定您为什么要这样做，而不仅仅是传递一个对象。

传递 json 可以有很多方法......

1.  从您的属性对象：

    ```
    app.directive('foo', function () {
       return function(scope, element, attrs) {
           var obj = eval('(' + attrs.foo + ')');
       };
    }); 
    ```

    在哪里

    ```
    <div foo="{'test':'wee'}"></div> 
    ```

2.  从一个孤立的范围：

    ```
    app.directive('foo', function () {
       return {
         restrict: 'E',
         scope: {
          'jsonIn' : '@'
         },
         link: function(scope, element, attrs) {
           var obj = eval('(' + scope.jsonIn + ')');
         };
       };
    }); 
    ```

    在哪里

    ```
    <foo json-in="{'test':'wee'}"></foo> 
    ```

`eval`但是，如果可以的话，不惜一切代价避免使用本机要好得多。在几乎所有情况下你都可以。如果您有一些数据，只需将其放在作用域参数上的对象中，然后通过隔离作用域上的双向属性或按名称传递它，然后对其执行角度 $eval。

**编辑：传递一个对象...**

您可以在隔离范围上使用两种方式绑定：

```
app.directive('foo', function (){
  return {
     restrict: 'E',
     scope: {
        'data' : '='
     },
     link: function(scope, elem, attrs) {
        console.log(scope.data);
     }
  };
}); 
```

在哪里

```
<foo data="{ test: 'wee' }"></foo> 
```

这样做的真正酷之处在于，如果您使用的是作用域属性，它将双向更新：

```
app.controller('MainCtrl', function($scope) {
    $scope.bar = { id: 123, name: 'Bob' };
}); 
```

在哪里

```
<foo data="bar"></foo> 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-05T16:06:53.763

[See also](https://stackoverflow.com/questions/12371159/how-to-get-evaluated-attributes-inside-a-custom-directive/22883211#22883211). @Blesh has mentioned in passing, but not emphasized: Angular provides you with a 'safe'-ish version of `eval()`, which works perfectly for passing declarative objects/arrays into your directive if you don't want to declare them on your scope, and wisely don't want to use native `eval()`. In the OP's example, just use this inside the directive:

```
angular.$eval(attrs.match); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T16:23:21.313

您似乎正在尝试在表单中确认密码。有很多方法可以做到这一点，而无需借助 JSON 在 AngularJS 中传递值。我在网上找到的最有用的资源来自这个 Google Group 线程：

> 1) [http://jsfiddle.net/pkozlowski_opensource/GcxuT/23/](http://jsfiddle.net/pkozlowski_opensource/GcxuT/23/)将第二个字段中的值与第一个字段的*模型值进行比较*
> 
> 2) [http://jsfiddle.net/S8TYF/](http://jsfiddle.net/S8TYF/)将第二个字段中的 值与第一个字段的*输入值进行比较*
> 
> 差异可能很细微，但会产生实际影响：使用 (2)，只要您开始在第一个字段中输入任何内容，确认验证就会启动。使用 (1) 确认验证仅在第一个字段有效后才会启动。在电子邮件确认示例中，这意味着在电子邮件验证错误被整理出来之前，您不会开始显示确认错误（因此用户可以同时专注于一个错误）。

来源：[https ://groups.google.com/d/msg/angular/R4QeNsNksdY/migbplv8GxIJ](https://groups.google.com/d/msg/angular/R4QeNsNksdY/migbplv8GxIJ)

从第[一个链接开始](http://jsfiddle.net/pkozlowski_opensource/GcxuT/23/)，该指令的使用如下：

```
<label>e-mail</label>
<input name="email" type="email" required ng-model="email">  

<label>repeat e-mail</label>
<input name="emailRepeat" type="email" required 
       ng-model="emailRepeat" 
       ui-validate-equals="email"> 
```

其中`ui-validate-equals`指令指向`email`在第一个输入中定义的模型。

如果您也想在那里寻找解决问题的其他想法，有一些[StackOverflow 的答案。](https://stackoverflow.com/a/14012512/586621)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-16T22:48:18.000

> 不过，这似乎不是一个有角度的问题。

同意 - vanilla JS 可以很好地处理这个问题。

```
// Markup (HTML)
<div mydirective='{"test1": "foo", "test2": "bar"}'></div>

// App (JS)
JSON.parse(attrs['mydirective']); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-07T16:03:16.653

以角度使用 JSON.parse(string)。确保您的参数是字符串格式。

# facebook - 确定 my_page 是否仅由 facebook 加载的最佳方法

> ID：14687824
> 
> 赞同：0
> 
> 时间：2013-02-04T13:29:48.077
> 
> 标签：facebook, iframe, request, facebook-javascript-sdk, facebook-canvas

是否有确定 my_page 是否被加载到只有 facebook 的 iframe 的可靠方法？

* * *

一些部分帮助的技术：

**A** (php) - php $_REQUEST 似乎有一些隐含的可能性，但似乎有问题，因为我相信它可以被其他网站模仿。

**B** (js) - 我可以使用 js 来执行*(self == parent)*来确定 my_page 是否正在加载到父框架中......但我无法获得更多信息。例如，父级的 url。

**C** (fb-jsSDK) - facebook javascript SDK 为我提供了一些关于 my_page 是否由登录用户加载的*信息*，但如果由未登录用户加载，则似乎没有信息。

* * *

*IGY（和其他人）：请不要垃圾我的帖子......如果你知道互联网上有更好的地方问这个问题，然后告诉我。Facebook 建议开发者来这里提问。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:24:51.643

我想说最好的方法是寻找[`signed_request`](https://developers.facebook.com/docs/howtos/login/signed-request/)参数——当它在那里*并且*你已经成功验证它时，你可以确定它是你的应用程序在 Facebook 上直接加载到画布或页面选项卡 iframe 中.

（验证 signed_request 需要您的应用程序密码，只有您和 Facebook 知道。）

由于您仅`signed_request`在页面的初始加载时获得一个，因此您应该将该信息（*页面已在 facebook.com 上的 iframe 中调用）*放入您的会话中，以便您可以在后续页面上查找它。

# php - 登录到谷歌帐户

> ID：14687826
> 
> 赞同：1
> 
> 时间：2013-02-04T13:29:59.120
> 
> 标签：php, redirect

我想登录到我的 google 帐户，然后我想重定向到特定的[url](https://play.google.com/apps/publish/v2/statistics/download?package=?&sd=?2&ed=?&dim=overall,country,language,os_version,device,app_version,carrier&met=active_device_installs,daily_device_installs,daily_device_uninstalls,daily_device_upgrades,active_user_installs,total_user_installs,daily_user_installs,daily_user_uninstalls,daily_avg_rating,total_avg_rating&dev_acc=?)。我想这样做是为了检索带有统计信息的 csv 文件。所以我的问题是如何登录并重定向到上述网址？我希望这发生在后端，我不想提供用户名和密码，因为这将始终相同。我已使用下面的代码登录，但我采取以下响应

```
<?php

require 'openid.php';
try {
  $openid = new LightOpenID('https://www.google.com');
  if (!$openid->mode) {

    $openid->identity = 'https://www.google.com/accounts/o8/id';
    $openid->required = array('namePerson/first', 'namePerson/last', 'contact/email');
    header('Location: ' . $openid->authUrl());
    if ($openid->validate()) {
        echo 'User <b>' . $openid->identity . '</b> has logged in.<br>';

        echo "<h3>User information</h3>";

        $identity = $openid->identity;
        $attributes = $openid->getAttributes();
        $email = 'alexdowining@gmail.com';
        $first_name = 'Alex';
        $last_name = 'Dowining';

        echo "mode: " . $openid->mode . "<br>";
        echo "identity: " . $identity . "<br>";
        echo "email: " . $email . "<br>";
        echo "first_name: " . $first_name . "<br>";
        echo "last_name: " . $last_name . "<br>";
    } else {
        echo 'User ' . $openid->identity . 'has not logged in.';
    }
}
} catch (ErrorException $e) {
  echo $e->getMessage();
}

 ?> 
```

1.  那是一个错误。您请求的服务目前不可用。服务错误-27。我们知道的就这些。

# css - 如何在css中获得带下划线的单词下的标签？

> ID：14687831
> 
> 赞同：1
> 
> 时间：2013-02-04T13:30:11.370
> 
> 标签：css

这就是我要找的效果

```
blahblahblah blah blah blahblahalhab foo bar.
------------           -------------
     A                       B 
```

如何在 HTML/CSS/JavaScript 中的带下划线的单词下方直接获取 A 和 B 标签？

**开始：**

```
<p><span><u>text number 1</u></span> followed by <span><u>text number 2</u></span> end of sentence</p>
<p>        <span>A</span>                                  <span>B</span></p> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T13:36:48.483

标记（HTML）：

```
<span class="labeled">blahblahblah<span class="label">A</span></span> blah blah <span class="labeled">blahblahalhab<span class="label">B</span></span> foo bar. 
```

样式（CSS）：

```
span.labeled {
    display: inline-block;
    vertical-align: top;
}
span.labeled span.label {
    display: block;
    text-align: center;
    border-top: 1px solid black;
} 
```

演示：http: [//jsfiddle.net/SxaK6/](http://jsfiddle.net/SxaK6/)

结果：

![在此处输入图像描述](../Images/357155ae67f369bc289edd910ba5f17c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T14:00:28.037

另一种方法是，如果您只想要*视觉效果*而不一定要有`HTML`for 'A' 和 'B' `<span>`，将使用[`CSS3` `:before` `pseudo-element`](http://coding.smashingmagazine.com/2011/07/13/learning-to-use-the-before-and-after-pseudo-elements-in-css/)：

HTML

```
<span id="a" class="labeled">blahblahblah</span> blah blah 
<span id="b" class="labeled">blahblahalhab</span> foo bar. 
```

CSS

```
span.labeled {        
    border-bottom: 1px solid black;
    position: relative;
}

.labeled:before{
    margin-top: 25px;
    position: absolute;
    text-align: center;
    left: 0;
    right: 0;
}
#a:before{
    content: 'A';
}
#b:before{
    content: 'B';    
} 
```

演示：http: [//jsfiddle.net/cu8Q5/](http://jsfiddle.net/cu8Q5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:35:27.857

我会在标记的下划线元素*内添加标签，然后使用 CSS 重新定位：*

```
<span class="underlined">
   blahblahblah<span class="label">A</span>
</span> 
blah blah 
<span class="underlined">
   blahblahalhab<span class="label">B</span>
</span>
foo bar. 
```

```
.underlined {
    position: relative;
    text-decoration: underline;
}

.label {
    position: absolute;
    top: 105%;
    display: block;
    width: 100%;
    text-align: center;
} 
```

[http://jsfiddle.net/AyC84/](http://jsfiddle.net/AyC84/)

# java - 带有 SQL 查询的休眠注解

> ID：14687832
> 
> 赞同：0
> 
> 时间：2013-02-04T13:30:20.447
> 
> 标签：java, hibernate, annotations

我想创建一个休眠 SQL 查询并将其转换为对象而不创建表。

例如我有

```
StringBuilder query = new StringBuilder();
query.append("SELECT groupId, categoryId, name FROM AssetCategory");

SQLQuery sqlQuery = session.createSQLQuery(query.toString());
sqlQuery.addEntity("Categories", Categories.class);

List<Categories> list = sqlQuery.list(); 
```

类别对象声明如下：

```
@Entity
public class Categories implements Serializable {

@Column(name = "name")
String name;

@Column(name = "categoryId")
Long categoryId;

@Column(name = "groupId")
Long groupId; 
```

当然这行不通，因为没有 ID。而且这个表也不需要创建。那么我将如何声明呢？

有什么提示吗？

我只是找不到文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:33:56.320

您可以使用 SQLTransformer 来执行此操作。您甚至不需要 pojo 中的注释。

[读这个。](http://relation.to/2133.lace)它会帮助你意识到你应该做什么。

# c# - 使用 XMLreader 将 XML 转换为 CSV

> ID：14687833
> 
> 赞同：1
> 
> 时间：2013-02-04T13:30:24.240
> 
> 标签：c#

我想将我的 XML 转换为 CSV 文件

“系统/主机箱/前面板；“OMA/LCDprops/LCDobj/lcdaccessstate”；0->禁用；1->启用；2->NA”

其中“System/Main Chassis/Front Panel=报表中xml显示页面的路径”“OMA/LCDprops/LCDobj/lcdaccessstate=node path(xpath)”“0->disabled;1->enabled;2->NA =该特定节点的所有可能值及其含义"

有人可以让我知道实现这一目标的最佳方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:53:37.440

一个更简单的解决方案可能是从 xml 到文本文件的 xsl 样式表转换。**如果需要，可以使用XslCompiledTransform**对象在 C# 中管理 xsl 转换

# maven - Maven，多网络模块共享控制器，jsp，样式，脚本

> ID：14687834
> 
> 赞同：1
> 
> 时间：2013-02-04T13:30:24.920
> 
> 标签：maven, spring-mvc

Maven 可以将公共控制器、jsp 和其他资源共享给 web 模块。

结构

**web1（包装罐）**

```
--main
        --java
            --controller
                MyControllerToShared with @Controller annotation
        --resources
        --webapp
            --scripts
                javascripts files
            --styles
                css files
            --WEB-INF
                --views
                    jsp to share
    pom.xml 
```

**web2（包装大战）**

```
Classic web app structure with dependency of web1.jar 
```

我的 web2 应用程序可以工作，但没有找到在 web1 模块中定义 URI 的 HTTP 请求的映射。我使用注解@Controller 和@RequestMapping。我在 servlet.xml 中定义：

```
<context:component-scan base-package="controller" />
<mvc:annotation-driven/> 
```

如何在不同的 Web 模块之间共享控制器和资源？最后，我需要有 3 个带有公共内容的 Web 应用程序（错误处理程序、jsp 的错误、样式、js ......）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:07:07.183

为什么不创建一个包含所有共享资源的额外项目？您可以在所有 Web 应用程序中重用它，只需在 pom.xml 中包含共享文件作为依赖项。

您可以从具有共享资源的附加项目开始：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>nl.connexys</groupId>
    <artifactId>shared</artifactId>
    <version>1.0-SNAPSHOT</version>
    <name>Shared resources</name>

</project> 
```

然后，在您的 webapp 项目中，您可以将该项目用作依赖项：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>nl.connexys</groupId>
    <artifactId>webapp</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>Webservice endpoints</name>

    <dependencies>
        <dependency>
            <groupId>nl.connexys</groupId>
            <artifactId>shared</artifactId>
            <version>1.0-SNAPSHOT</version>
        </dependency>
    </dependencies>
</project> 
```

但这都是非常基本的 Maven 东西。我认为这些示例应该为您指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T19:22:08.727

看看这个答案： [https](https://stackoverflow.com/a/14143954/600007) ://stackoverflow.com/a/14143954/600007 和参考：[http ://maven.apache.org/plugins/maven-war-plugin/overlays.html](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)

它适用于 jsp-s、js-s 等...

# susy-compass - 如何在列之间获得 1px 边框？

> ID：14687838
> 
> 赞同：1
> 
> 时间：2013-02-04T13:30:38.220
> 
> 标签：susy-compass

在排水沟中心的两个 Susy 网格项目之间绘制 1px 边框的首选/最干净的方法是什么？

Susy 通过向网格项添加边距来创建排水沟，所以我不能简单地添加右边界（例如，您*可以*使用[Zen Grids](http://zengrids.com/)，它通过应用一半的排水沟宽度来创建排水沟两侧填充）。

我想它可以使用`with-grid-settings()`mixin 来定义一个没有排水沟的替代网格，但这感觉就像一个混乱的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T18:07:19.713

目前没有一个很好的解决方案，但我希望在下一个主要版本中有一个。您可以做的是使用 Susy 函数（真的是 Susy 最强大的部分）创建自己的数学。像这样的东西：

```
.left-column {
  @include box-sizing(border-box);
  float: left;
  width: columns(2) + gutter()/2;
  padding-right: gutter()/2;
  margin-right: gutter()/2;
  border-right: 1px solid;
} 
```

# c - 确保父进程在子进程之前终止

> ID：14687839
> 
> 赞同：1
> 
> 时间：2013-02-04T13:30:52.217
> 
> 标签：c, linux, pid

如果我在 a 之后在孩子中使用以下行`fork`：

```
while( getppid() != 1 ) 
```

确保父进程在子进程之前终止（当父进程终止时，子进程的父进程成为`init`进程）那么我可能面临哪些问题（如果有）？

这是确保孩子在父母之后终止的好方法吗？

还有什么其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:32:50.823

自旋循环从来都不是一件好事。分叉前打开管道。让孩子阻止阅读。当父级终止时，管道将关闭，子级将继续。（确保孩子关闭管道的写入端！）

例如：（警告：省略所有错误检查）

```
int
main( void ) {
    int fd[ 2 ];
    pipe( fd );
    if( fork() ) {
        sleep( 2 );
        puts( "parent awakes" );
    } else {
        char k;
        close( fd[ 1 ]);
        read( fd[ 0 ], &k, 1 );
        puts( "child continues" );
    }
    return 0;
} 
```

另请注意，孩子应该在完成后关闭管道的读取端，但我已将其从示例代码中删除，因为它与等待父母终止的问题无关。

# sql - SQL Server - 有条件的外部应用

> ID：14687840
> 
> 赞同：4
> 
> 时间：2013-02-04T13:30:58.170
> 
> 标签：sql, sql-server-2008

SQL Server 2008 中是否有类似下面的方法？

可以根据条件指定外部应用（连接）表吗？

```
declare @bGetExtendedInfo bit
set @bGetExtendedInfo = 1

declare @param nvarchar(24)
set @param = 'CO-02-BBB'

select t1.*, t2.ID
from t1
outer apply (
              case when @bGetExtendedInfo= 0 
                  then (select 0) as ID  /* dummy value */
                  /*really expensive query trying to avoid when extended info is not needed*/
                  else (select top 1 ID from tbl1 where tbl1.code = @param)
              end
             ) t2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T14:17:56.907

您只需加入即可轻松完成此操作：

```
SELECT t1.*, t2.*
FROM   t1 cross join
       (SELECT *
        FROM (SELECT top 1 tb10.*, 0 as bCcond src FROM tb10 
              UNION ALL
              SELECT top 1 tb11.*, 1 as bCcond src FROM tb11
             ) t
        WHERE @bCond = bCcond
       ) t2 
```

在表是非常复杂的连接的情况下，执行`top`之前的`union all`操作还应该有助于优化器生成更好的查询计划。

此外，`top`不使用 an`order by`通常是不受欢迎的。它可以通过不同的调用返回不同的行，但不能保证这些行是随机的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T13:34:23.477

试试这个，

```
DECLARE @bCond BIT
SET @bCond = 1

SELECT t1.*, t2.*
FROM   t1 OUTER APPLY
             (
                SELECT TOP 1 *
                FROM
                    (
                        SELECT *, 'a' src FROM tb10
                        UNION ALL
                        SELECT *, 'b' src FROM tb11
                    )s
                WHERE   src = CASE WHEN @bCond = 0 THEN 'a' ELSE 'b' END
             ) t2 
```

# jquery - 未捕获的类型错误：无法读取未定义的属性“短信”

> ID：14687843
> 
> 赞同：0
> 
> 时间：2013-02-04T13:31:06.077
> 
> 标签：jquery, cordova

我正在尝试编写用于在 phonegap 中发送短信的代码。我已经编写了代码。但是我收到了错误：未捕获的类型错误：无法读取未定义的属性“短信”。以下是我的代码。请指教。

```
<!DOCTYPE html>
<html>
    <head>
    <meta name="viewport" content= "width=device-width; height=device-height; user-scalable=no">
        <link rel="stylesheet" type="text/css" href= "jquery.mobile-1.0b3.min.css"> 
        <script src="jquery-1.6.min.js" type= "text/javascript"></script>
        <script src="jquery.mobile-1.0b3.min.js" type="text/javascript"> </script>
        <script src="cordova-2.3.0.js" type="text/javascript"> </script>
        <Script src="smsplugin.js" type="text/javascript" ></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>  
</head>
<script type="text/javascript">
//document.addEventListener("deviceready", onDeviceReady, false);
//function onDeviceReady () {

function Message() {
alert("hi");
alert('Phone: ' + $('#phone').val() + ' Message: ' + $('#message').val());
window.plugins.sms.send($('#phone').val(), 
    $('#message').val(), 
    function () { 
       alert('Message sent successfully');  
    },
    function (e) {
        alert('Message Failed:' + e);
    }
);
}

</script>
<body>
<div id="startPage" data-role="page" data-theme="a">
<a href="home.html" data-role="button" data-transition="turn" data-inline="true" data-icon="back">Back</a>
<div data-role="header">
<h1>SMS Demo</h1>
</div>
<div data-role="content">
<label for="phone">Recipient Number:</label>
<input type="tel" id="phone" name="phone" placeholder="SMS Number"/>
<label for="message">Message:</label>
<textarea id="message" name="message" placeholder="Type your text message here...........(Eg- Hi Dad, I am in an emergency...please help me.I am located at (GPS Location))"></textarea>    
<!--<a href="#" id="sms" data-role="button"  onclick="Message()">Send</a></br>-->
  <button id= "sendbutton" onClick="Message()">Send</button>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:12:29.923

取消注释您的 deviceready 事件侦听器并在 onDeviceReady 函数中调用 Message。

请参阅插件的示例代码...

```
function onDeviceReady () {
        $('#send').bind('click', function () {
            alert('Phone: ' + $('#phone').val() + ' Message: ' + $('#message').val());
            window.plugins.sms.send($('#phone').val(), 
                $('#message').val(), 
                function () { 
                   alert('Message sent successfully');  
                },
                function (e) {
                    alert('Message Failed:' + e);
                }
            );
        });                         
    }
    document.addEventListener("deviceready", onDeviceReady, false); 
```

# asp.net - 选择 sql 查询以进行自动完成的问题

> ID：14687849
> 
> 赞同：0
> 
> 时间：2013-02-04T13:31:18.700
> 
> 标签：asp.net, web-services

我有一个 textbox.prefixtext 应该给出它应该显示的任何内容。但是，我需要在查询的 where 子句中给出一些条件。例如：

```
“从 ListItems 中选择 ItemName，其中 ItemName 像 @myParameter+'%' AND Listname=???? GROUP BY ItemName”
```

如何在 webservice 中传递 Listname 参数？有可能..提前谢谢

# xml - Apache CXF 的“无法展开操作”

> ID：14687850
> 
> 赞同：1
> 
> 时间：2013-02-04T13:31:21.983
> 
> 标签：xml, apache, cxf

我正在尝试使用 cxf 部署 Web 服务。

我使用以下代码来声明我的端点

```
<jaxws:endpoint
xmlns:wsdl="com_documentation_service_standardfeatures_application_webservices_uc51_webserviceServer_WebServiceSearch"  
 id="webServiceSearchEndpoint"
    implementor="#com.documentation.service.standardfeatures.application.webservices.uc51_webserviceServer.WebServiceSearch"
    wsdlLocation="classpath:resources/schemas/wsdl/com_documentation_service_standardfeatures_application_webservices_uc51_webserviceServer_WebServiceSearch.wsdl"
    endpointName="wsdl:WebServiceSearchPort"
    serviceName="wsdl:com_documentation_service_standardfeatures_application_webservices_uc51_webserviceServer_WebServiceSearch"
    address="http://localhost:8888/service2"
    /> 
```

我的wsdl看起来像这样

```
[...]
<wsdl:types>
<schema targetNamespace="com_documentation_service_standardfeatures_application_webservices_uc51_webserviceServer_WebServiceSearch_types" xmlns="http://www.w3.org/2001/XMLSchema"
 xmlns:team51="com_documentation_business_standardfeatures_application_webservices_uc51_webserviceClient_entities_Team51"    >
    <import namespace="com_documentation_business_standardfeatures_application_webservices_uc51_webserviceClient_entities_Team51" schemaLocation="classpath:resources/schemas/xsd/com_documentation_business_standardfeatures_application_webservices_uc51_webserviceClient_entities_Team51.xsd"/>
    <element name="team51" type="team51:team51"/>
    <element name="anyType" type="xsd:anyType"/>
    <element name="string" type="xsd:string"/>
    <element name="integer" type="xsd:integer"/>
    <element name="float" type="xsd:float"/>
    <element name="long" type="xsd:long"/>
    <element name="dateTime" type="xsd:dateTime"/>
    <element name="boolean" type="xsd:boolean"/>        
    <element name="collection" type="types:collectionType"/>        
    <complexType name="collectionType">
        <sequence>
            <element type="xsd:anyType" minOccurs="0" maxOccurs="unbounded" name="element"/>
        </sequence>
    </complexType>  
</schema>
</wsdl:types>

  <wsdl:message name="team51FindByID">
    <wsdl:part name="id" element="types:long"/>
  </wsdl:message>
  <wsdl:message name="team51FindByIDResponse">
       <wsdl:part name="return" element="types:team51"/>
  </wsdl:message>

  <wsdl:portType name="WebServiceSearch">  
   <wsdl:operation name="team51FindByID">
     <wsdl:input name="team51FindByID" message="team51FindByID">
   </wsdl:input>
    <wsdl:output name="team51FindByIDResponse" message="team51FindByIDResponse">
   </wsdl:output>
   </wsdl:operation>    
 </wsdl:portType>  
[...] 
```

运行tomcat服务器时，总是出现以下信息。

```
 ATTENTION: Could not unwrap Operation {documentation_service_standardfeatures_application_webservices_uc51_webserviceServer_WebServiceSearch}team51FindByID to match method "public abstract Type1 team51FindByID(java.lang.Long)"

 org.apache.cxf.endpoint.ServerImpl initDestination 
```

我的配置有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:30:50.817

在该 wsdl 上运行 wsdl2java 并确保方法签名与生成的匹配。看起来您没有 @SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE) 注释并且该方法的返回类型是错误的。（看起来应该是 Team51，而不是 Type1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T10:15:13.910

您定义操作的命名空间不正确。错误正是揭示了命名空间不正确的类，因此它无法找到它并且无法解包。

修复命名空间应该使您能够正确地创建 WSDL。

# python - 清除网页中的 POST

> ID：14687851
> 
> 赞同：2
> 
> 时间：2013-02-04T13:31:36.110
> 
> 标签：python, django, web-applications

我有一个小型 python/django 网站，我正在使用 html 表单发布一些信息，但令人讨厌的是，这些信息存储在 POST 中，因此当用户在 IE/chrome 中刷新时，他们会收到有关包含 POST 数据的页面的警告消息. 如何在处理后清除 POST 数据，以便用户可以刷新而不看到此警告消息？

我也有一些逻辑如下检测POST

```
 if request.method == "POST":
     do something 
```

全选 在新窗口中打开

当我实际发布表单时这很好，但是当我刷新页面时，它也会检测到 POST 并执行我现在不想做的逻辑。我该如何解决这个问题？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:43:27.830

正如 Rohan 所说，您应该使用`HttpResponseRedirect`. 但您也可以使用快捷方式：

```
from django.shortcuts import redirect

def some_view(request):
    if request.method == 'POST':
        # do smth
        return redirect('/page-with-form/') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:35:59.033

表单经过验证并且有效后。然后重定向到其他页面，例如成功页面或重定向到同一视图。重定向将避免`Double Form Submition problem`. [在此处](http://www.theserverside.com/news/1365146/Redirect-After-Post)阅读更多相关信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:38:55.233

`HttpResponseRedirect`当您返回 POST 请求的响应时使用。这在[教程 4](https://docs.djangoproject.com/en/dev/intro/tutorial04)中解释为

*增加选择计数后，代码返回一个 HttpResponseRedirect 而不是普通的 HttpResponse。HttpResponseRedirect 接受一个参数：用户将被重定向到的 URL（在这种情况下，我们如何构造 URL，请参见以下几点）。*

*正如上面的 Python 注释所指出的，在成功处理 POST 数据后，您应该始终返回一个 HttpResponseRedirect。这个技巧不是特定于 Django 的。这只是很好的 Web 开发实践。*

# macos - Is it possible to get my private key back from a mobile HDD?

> ID：14687860
> 
> 赞同：0
> 
> 时间：2013-02-04T13:32:35.483
> 
> 标签：macos, key, private

My Mac used as a developing machine was down a few days ago. It turned out an issue of the HDD. Unfortunately, I forgot to backup my private keys for iOS development and distribution. So, I can't debug or distribute my apps now. I find that the old driver is still readable as a mobile HDD, but I just can't start the system on it(I've tried all well-known tools to recover but none of them worked).

Is it possible to get my private keys back from that driver? If not, what can I do as remediation?

Thanks in advance!

Derek

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T18:02:47.450

I'm not an iOS developer, but I'm pretty sure the keys are handled the same was as for a Mac developer: stored in your keychain. If this is the case, and you can mount the old HD, you should be able to recover the old keychain pretty easily:

1.  Mount the old HD, and navigate into your old home folder in the Finder.
2.  Open the hidden Library folder by choosing File menu > Go to Folder, then entering "Library" in the dialog.
3.  Inside the Library, open the Keychains subfolder.
4.  Copy Login.keychain to your new HD. This would also be a really good time to make a backup copy somewhere else as well.

At this point, you have a couple of choices. You can either migrate the relevant entries from your old keychain to the one in your new account (which may be tricky, 'cause they may not be easy to spot among all the other things stored in your old keychain), or just replace your new account's keychain with the old one (which means any new passwords etc you've memorized since swapping HDs will be unavailable). For the first option:

1.  Rename the old keychain (to something like Old Login.keychain), then double-click it to open it in Keychain Access.
2.  Unlock the old keychain by selecting it in the sidebar, then clicking the padlock icon near the top and entering your old login password.
3.  Select the relevant items (good luck finding them all!), and drag them over to your current "Login" keychain in the sidebar. Authenticate as requested.

For the second option:

1.  Quit everything except the Finder.
2.  Open your current user Library folder (the easiest way to do this is to hold the `Option` key, pull down the Go menu, and choose Library.
3.  Rename the current Login.keychain to something else, then move the old Login.keychain into its place.
4.  Log out and back in. If your old login password was different than your new one, you'll get an error unlocking the keychain with an option to fix it by entering the old login password.

# wcf - WCF CommunicationException：了解根本原因

> ID：14687862
> 
> 赞同：0
> 
> 时间：2013-02-04T13:32:41.087
> 
> 标签：wcf, communicationexception

我正在编写一个连接到 WCF 服务的应用程序。当我在客户端收到 CommunicationException 时，我需要了解问题是在服务端还是由于无效的客户端配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:37:48.827

您可以将以下部分添加到 WCF 主机配置文件中：

```
<system.diagnostics>
        <sources>
            <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
                <listeners>
                    <add name="xml" type="System.Diagnostics.XmlWriterTraceListener" initializeData="logs\WCFLog.svclog"/>
                </listeners>
            </source>
        </sources>
    </system.diagnostics> 
```

这将创建一个 svclog 文件，它可以为您提供有关连接问题原因的更多信息。

# wpf - WPF 在单独的线程中运行动画

> ID：14687870
> 
> 赞同：2
> 
> 时间：2013-02-04T13:33:06.880
> 
> 标签：wpf, multithreading, data-binding

我有一个应用程序，我必须在选项卡项中的用户控件上绑定一个数据网格女巫。

这个过程需要一段时间，所以我在单独的线程中创建了另一个带有加载动画的选项卡项，当我在数据网格中加载数据时，我选择带有动画的选项卡项，直到加载数据。

问题是动画正在开始，但是当数据网格绑定开始时，动画是冻结的。

```
this.Dispatcher.Invoke(DispatcherPriority.Normal,
            new Action(
                delegate()
                {
                    tiLoading.Content = new Controls.Loading.LoadingAnimation();
                    tiLoading.IsSelected = true;
                }
        ));

//And now I populate the content of the Tab Item with the User Control that contains data grid

connType = choseConnType(); // Here is a dialog witch ask the user somethig and return a value
tiGeneral.Content = new Windows.General(true, connType); 
```

在开始绑定的对话框之后，LoadingAnimation 被冻结。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:02:06.643

这是可以理解的。如果你有长时间运行的进程，你应该使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=vs.100%29.aspx)来运行它。

```
public void ItsGonnaBeLong()
{
    this.IsBusy = true;
    var worker = new BackgroundWorker();
    worker.DoWork += this.MyDoWorkMethod;
    worker.RunWorkerCompleted += this.MyDoWorkCompleted;
    worker.RunWorkerAsync();
}

private void MyDoWorkCompleted(object sender, RunWorkerCompletedEventArgs e)
{
   // executed after work on background thread is completed
   this.IsBusy = false;
}

private void MyDoWorkMethod(object sender, DoWorkEventArgs e)
{
   // Do something.
} 
```

把你的动画放在不同的 TabItem 上是不是很漂亮？您是否考虑过使用`BusyIndicator`Extended [WPF Toolkit](http://wpftoolkit.codeplex.com/)？您可以简单地用 BusyIndi​​cator 包装您的控件并使用它的 IsBusy 属性来运行它。

```
<xctk:BusyIndicator IsBusy="True" >
        <my:MyUserControl />
</xctk:BusyIndicator> 
```

# jquery - 动态添加后突出显示表行

> ID：14687873
> 
> 赞同：2
> 
> 时间：2013-02-04T13:33:18.780
> 
> 标签：jquery

查看如何在使用 jquery 动态添加表格行后突出显示我的代码似乎可以毫无问题地添加该行，但它没有突出显示正确的行

jQuery

```
$('#opponents tr:last').after('<tr><td>data</td><td>more data</td></tr>').effect("highlight", {}, 3000); 
```

火腿/桌子

```
%table.twelve#opponents
      %thead
        %tr
          %th Name
          %th Manager
      %tbody
        - @opponents.each do |opponent|
          %tr
            %td= opponent.name
            %td.span1
              - if can? :update, @opponent
                .btn-group
                  %button.btn.dropdown-toggle{"data-toggle" => "dropdown"}
                    %i.icon-pencil
                    Manage
                    %span.caret
                  %ul.dropdown-menu
                    %li= link_to "Edit #{opponent.name}", "#modalOpponent"
                    -if can? :manage, @opponent
                      %li.divider
                      %li= link_to "Delete #{opponent.name}", opponent, :method => :delete, :remote => :true, :confirm => true 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T13:38:49.913

我会假设该效果将应用于`tr:last`主要选择器。

`after()`从原始选择器返回 jQuery 对象，`$('#opponents tr:last')`允许您继续链接到该主选择器。

* * *

[**演示**](http://jsfiddle.net/sBg47/)- 使用现有代码，突出显示错误的行

* * *

尝试将新行分离成自己的行，然后直接对其应用效果。与此类似：

```
var $newRow = $('<tr><td>data</td><td>more data</td></tr>');

$('#opponents tr:last').after($newRow);
$newRow.effect("highlight", {}, 3000); 
```

* * *

[**DEMO**](http://jsfiddle.net/DCwJN/) - 上述代码的工作演示

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:40:40.567

您必须在效果中添加 css，如下所示：

```
$('#opponents tr:last').after('<tr><td>data</td><td>more data</td></tr>').effect("highlight", {color:'#ff0000'}, 3000); 
```

# android - 在画布上创建图像数组

> ID：14687874
> 
> 赞同：0
> 
> 时间：2013-02-04T13:33:22.367
> 
> 标签：android, arrays, arraylist, android-canvas

我正在尝试创建可以在画布上绘制的图像数组。这就是我所拥有的：

```
List<Integer> imageHolder = new ArrayList<Integer>(); 
imageHolder.add((int)R.drawable.bus_1);
imageHolder.add((int)R.drawable.bus_2);
imageHolder.add((int)R.drawable.bus_3); 
```

然后我尝试从我的 onDraw 方法访问这样的图像：

```
protected void onDraw(Canvas canvas) {
        canvas.drawColor(Color.BLACK);

        for (int i = 0; i < imageHolder.size(); i++){

            canvas.drawBitmap(imageHolder.get(i), 0, 0, null);
        }

    } 
```

但是我收到一条错误消息，说我的论点不适用于我的 canvas.drawbitmap。有谁知道如何做到这一点？我一直在寻找有关如何做到这一点的解释，但我在任何地方都找不到。

编辑：这就是我如何在屏幕上的不同点打印出 3 张图像：

```
for (int i = 0; i < imageHolder.size(); i++) {
    bMap = BitmapFactory.decodeResource(res, imageHolder.get(0));
    canvas.drawBitmap(bMap, 100, 100, null);
    bMap2 = BitmapFactory.decodeResource(res, imageHolder.get(1));
    canvas.drawBitmap(bMap2, 500, 100, null);
    bMap3 = BitmapFactory.decodeResource(res, imageHolder.get(2));
    canvas.drawBitmap(bMap3, 900, 100, null);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:44:00.117

您所做的是您最初将一堆**整数**添加到 ArrayList，然后您尝试循环通过此 ArrayList 并使用由该整数标识的资源绘制位图。问题是类中`drawBitmap`方法的第一个参数`Canvas`必须是颜色的整数数组或位图资源。不只是一个整数，指向一个。有关更多信息，[请查看文档](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28int%5B%5D,%20int,%20int,%20float,%20float,%20int,%20int,%20boolean,%20android.graphics.Paint%29)。

为了通过 ID 作为位图获取特定资源，您需要执行以下操作：

```
Bitmap bMap = BitmapFactory.decodeResource(getResources(), R.drawable.your_drawable_id); 
```

或者在您的情况下，您的循环需要如下所示：

```
Resources res = getResources(); // Cache them
Bitmap bMap;
for (int i = 0; i < imageHolder.size(); i++){
    bMap = BitmapFactory.decodeResource(res, imageHolder.get(i));
    canvas.drawBitmap(bMap, 0, 0, null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:36:51.990

哈哈！检查[`canvas.drawBitmap`](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20android.graphics.Matrix,%20android.graphics.Paint%29)第一个参数是一个位图对象，而您只有指向资源的整数。

您可以使用：

```
canvas.drawBitmap(BitmapFactory.decodeResource(getContext().getResources(), imageHolder.get(i)), 0, 0, null); 
```

# javascript - JavaScript 关系比较运算符如何强制类型？

> ID：14687876
> 
> 赞同：10
> 
> 时间：2013-02-04T13:33:36.573
> 
> 标签：javascript, type-conversion

当操作数属于不同类型时，哪些规则适用于 JavaScript 关系比较运算符？

例如，如何`true > null`评估？我可以在我的开发者控制台中输入它并给出结果`true`，但是为什么呢？

我搜索了一下，但没有找到任何解释这一点的博客文章，尽管有很多解释 == 和 === 比较运算符的类型强制。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-04T13:33:36.573

JavaScript 关系比较运算符类型强制在[JavaScript 规范](http://es5.github.com/)中定义，特别是在描述运算符的第[11.8 到 11.8.5](http://es5.github.com/#x11.8)节以及描述强制操作数的过程的第[9.1 节（ToPrimitive）](http://es5.github.com/#x9.1)和第[9.3 节（ToNumber）中。](http://es5.github.com/#x9.3)

简而言之，4 个比较运算符（`<`、`>`、`<=`和`>=`）尽最大努力将每个操作数转换为一个数字，然后比较这些数字。例外情况是两个操作数都是字符串时，在这种情况下它们按字母顺序进行比较。

具体来说，

1.  如果参数`o`是对象而不是原始类型，[请尝试](http://es5.github.com/#x8.12.8)通过调用`o.valueOf()`或 - 如果`o.valueOf`未定义或调用时未返回原始类型 - 通过调用将其转换为原始值`o.toString()`

2.  如果两个参数都是字符串，则根据它们的[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)比较它们。例如，这意味着`"a" < "b"`and`"a" < "aa"`都返回 true。

3.  否则，[将每个基元转换为一个数字](http://es5.github.com/#x9.3)，这意味着：

    *   `undefined`->`NaN`
    *   `Null`-> +0
    *   `Boolean`原始类型 -> `1`if `true`, `+0`if`false`
    *   `String`->[尝试](http://es5.github.com/#x9.3.1)从字符串中解析一个数字
4.  然后按照您对运算符的期望比较每个项目，并注意任何涉及的比较`NaN`计算结果为`false`.

因此，这意味着以下内容：

```
console.log(true > null);           //prints true
console.log(true > false);          //prints true
console.log("1000.0" > 999);        //prints true
console.log("  1000\t\n" < 1001);   //prints true

var oVal1 = { valueOf: function() { return 1; } };
var oVal0 = { toString: function() { return "0"; } };

console.log(oVal1 > null);         //prints true
console.log(oVal0 < true);         //prints true
console.log(oVal0 < oVal1);        //prints true 
```

# ejb - EJB：方法调用和接口

> ID：14687878
> 
> 赞同：1
> 
> 时间：2013-02-04T13:33:40.617
> 
> 标签：ejb, jboss7.x, ejb-3.1

我目前正在升级我们的业务 javaee 环境。应该实现一个新功能，它允许管理影响同一服务器上其他 Web 应用程序的 Web 框架中的维护通知。通知应该使用 EJB 传输（框架将它们发送到应用程序或应用程序请求它们）。

我试图基于接口来实现它。这些接口用于方法签名中，并且这些接口的具体实现仅由 web 框架和应用程序知道。但是所有调用都失败并出现 ClassNotFoundException（当框架向应用程序发送通知时）或 ClassCastException（当应用程序要求新的维护时）。

问题：使用接口实现这一点是不可能的吗？我总是需要双方的具体实现吗？前面的 EJB 查找确实使用接口（@Remote 注释）工作，那么为什么会有这些异常呢？

提前致谢！

* * *

我将为您简要介绍我的课程，以便您了解有关我在做什么的更多信息：

*   **接口：IMaintenanceInfo：** 该接口将用于 EJB 方法调用，并包含有关单个维护的信息。
*   **接口：IRemoteMaintenanceEJB：** 此接口是RemoteMaintenanceEJB 的@Remote 接口。应用程序使用它来请求新的维护。
*   **接口：IApplicationEJB：** 该接口用于接收来自网络框架的维护通知。它是@Remote。
*   **类：MaintenanceInfoImpl：** 此类实现 IMaintenanceInfo
*   **类：RemoteMaintenanceEJBImpl：** 此类实现 IRemoteMaintenanceEJB
*   **类：ApplicationEJBInfo：** 此类实现 IApplicationEJB

* * *

当**RemoteMaintenanceEJBImpl**将**MaintenanceInfoImpl**发送到**ApplicationEJBImpl**时，将使用以下方法：

```
public interface IApplicationImpl {
    public void announceMaintenance(IMaintenanceInfo maintenanceInfo);
} 
```

调用

```
remoteApplication.announceMaintenance(new MaintenanceInfoImpl(date/*, ...*/)) 
```

在应用程序端失败并出现*ClassNotFoundException*，因为它试图找到仅在 webframework 端可用的**MaintenanceInfoImpl 。**

> 引起：java.lang.ClassNotFoundException: package.webapp.wf.framework.MaintenanceInfoImpl from [Module "deployment.CommonDBFrontend.war:main" from Service Module Loader] at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java: 190) 在 org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456) 在 org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java) 的 org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468) :398) at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at org.jboss.marshalling .cloner.ClassLoaderClassCloner.clone(ClassLoaderClassCloner.java:49) 在 org.jboss.marshalling.cloner.SerializingCloner.clone(SerializingCloner.java:157) at org.jboss.marshalling.cloner.SerializingCloner.clone(SerializingCloner.java:134) at org.jboss.marshalling.cloner.SerializingCloner.clone(SerializingCloner. java:186) 在 org.jboss.as.ejb3.remote.LocalEjbReceiver.clone(LocalEjbReceiver.java:267) 的 org.jboss.marshalling.cloner.SerializingCloner.clone(SerializingCloner.java:134)

这再次引发了这个异常（JBoss AS 7.1.2）

> java.lang.RuntimeException：JBAS014154：编组 EJB 参数失败

* * *

当**ApplicationEJBImpl**向**RemoteMaintenanceEJBImpl**请求新的维护时，将使用以下方法：

```
public interface IRemoteMaintenanceEJB {
    pubilc List<IMaintenanceInfo> getMaintenances();
} 
```

调用失败并出现异常

> 原因：java.lang.ClassCastException：package.webapp.wf.framework.MaintenanceInfoImpl 无法在 package.webapp.ejb.impl.ApplicationEJBImpl.announceMaintenance(ApplicationEJBImpl.java:187) 处的 package.webapp.ejb.IMaintenanceInfo 中转换为 package.webapp.ejb.IMaintenanceInfo .webapp.ejb.impl.ApplicationEJBImpl.initialize(ApplicationEJBImpl.java:96) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.7.0_11] 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_11] 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) [rt.jar:1.7.0_11] at java.lang.reflect.Method.invoke(Unknown Source) [rt.jar:1.7 .0_11] ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T09:29:31.010

为 MaintenanceInfoImpl 类实现 java.io.Serializable 并确保您将 serialVersionUID 设置为相同。

# ember.js - Ember 值绑定到 Redactor 所见即所得

> ID：14687880
> 
> 赞同：6
> 
> 时间：2013-02-04T13:33:48.483
> 
> 标签：ember.js

我正在使用 Redactor WYSIWYG 编辑器，它允许您在初始化其代码之前使用最少的标记，如下所示：

```
<textarea id="redactor" name="content">
…
</textarea> 
```

然而，在初始化期间，Redactor 将`textarea`使用以下内容包装它：

```
<div class="redactor_box">
  <div class="redactor_ redactor_editor" contenteditable="true" dir="ltr">
    …
  </div>
  <textarea id="redactor" name="content" style="display: none;">
    …
  </textarea>
</div> 
```

我目前已经在 Ember 中完成了这项工作

模板：

```
{{ view App.RedactorView valueBinding='contentAttributes.headerContent' class='header-redactor' name='headerContent' }} 
```

查看扩展 Ember.TextArea：

```
App.RedactorView = Ember.TextArea.extend({
  didInsertElement: function() {
    $("#"+this.elementId).redactor();
  }
}); 
```

这仍然具有与`textarea`（现在隐藏）的绑定，但我现在需要绑定`redactor_editor`类。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T15:49:53.943

在对 Redactor 代码进行一些挖掘之后，我发现如果您的元素注定要成为编辑器而不是`textarea`元素，那么 Redactor 会做相反的事情并添加`textarea`if your a using a `div`instead 例如。

更新了我的视图并根据 Ember.TextArea 和 Ember.TextSupport 中的代码对其进行了调整，以便获得正确的值，如果您也使用`contenteditable`启用的元素，这可能会正常工作。

```
App.RedactorView = Ember.View.extend({
  tagName: 'div',
  init: function() {
    this._super();

    this.on("focusOut", this, this._elementValueDidChange);
    this.on("change", this, this._elementValueDidChange);
    this.on("paste", this, this._elementValueDidChange);
    this.on("cut", this, this._elementValueDidChange);
    this.on("input", this, this._elementValueDidChange);
  },
  _updateElementValue: Ember.observer(function() {
    var $el, value;
    value = Ember.get(this, "value");
    $el = this.$().context;
    if ($el && value !== $el.innerHTML) {
      return $el.innerHTML = value;
    }
  }, "value"),
  _elementValueDidChange: function() {
    var $el;
    $el = this.$().context;
    return Ember.set(this, "value", $el.innerHTML);
  },
  didInsertElement: function() {
    this.$().redactor();
    this._updateElementValue();
  }
}); 
```

这是一个演示它的 JSBin：[http://emberjs.jsbin.com/cefebepa/1/edit](http://emberjs.jsbin.com/cefebepa/1/edit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-10T23:03:22.877

我正在使用 Ember + Foundation，kroofy 的解决方案对我来说就像一个魅力。

contentEditable 的高度是在没有填充的情况下加载的（缺少一个段落），所以我更改为 redactor 的 insertHtml 方法来更新值。

从：

```
return $el.innerHTML = value; 
```

到：

```
return this.$().redactor('insertHtml', value); 
```

谢谢克罗菲。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T15:01:06.647

首先，当你想访问 Ember View 的 DOM 元素时，你应该使用这个：

```
this.$() 
```

代替

```
$("#"+this.elementId) 
```

关于 Redactor 问题...我不确定将 Ember 代码与 WYSIWYG 编辑器的功能结合起来是否明智，但如果您确定了，您可以执行以下操作：

```
App.RedactorView = Ember.TextArea.extend({
  didInsertElement: function() {
    var box = this.$().closest('.' + this.elementId + '_box');
    box.find('.' + this.elementId + '_redactor_editor').redactor();
  }
}); 
```

# android - 动画，延迟

> ID：14687882
> 
> 赞同：0
> 
> 时间：2013-02-04T13:33:55.797
> 
> 标签：android, animation, delay

我想做一个动画，我有 10 个球的图像，我想做：

1.  `Image1`可见，所有其他图像隐藏
2.  `Image2`可见所有其他隐藏的图像
3.  ...
4.  `Image10`可见所有其他隐藏的图像

我应该在一个动画中做到这一点（如何？）还是应该创建一个 java 方法 showImage(String pathimage) 来显示位于 pathimage 的图像并隐藏其他的？我可以使用任何关于时间延迟的想法吗

```
handler.postDelayed(new Runnable() { 
    public void run() { }
} 
```

**编辑，这是我的代码** 问题是 run() 总是在似乎是无限循环的情况下被调用。但我看不出我的错误在哪里

游戏活动

```
 protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
.....
        ImageView image2 = (ImageView) findViewById(R.id.imageView3);
        image2.setOnTouchListener(new OnTouchListener(){

            @Override
            public boolean onTouch(View arg0, MotionEvent arg1) {
                myAsyncRunnable mar = new myAsyncRunnable(GameActivity.this);
                mar.execute(null);
                PhotoTask photoTask = new PhotoTask(camera,surfaceCamera,isPreview,holder,GameActivity.this);
                photoTask.execute(null);
                Log.w("GAMEACTIVITY","PHOTOTASK");
                return false;
            }

        });
} 
```

我的异步任务

```
public class myAsyncRunnable extends AsyncTask<Void, Boolean, Void> {

    GameActivity gameactivity;

    @Override
    protected Void doInBackground(Void... params) {
        pull();
        return null;
    }

public myAsyncRunnable(GameActivity gameactivity) {
    super();
    this.gameactivity = gameactivity;
}

    public void pull() {

        final ImageView image3 = (ImageView) gameactivity.findViewById(R.id.imageView3);
        final int drawables[] = new int[] {R.drawable.pull2,R.drawable.pull3,R.drawable.pull4,R.drawable.pull5,R.drawable.pull6,R.drawable.pull7};
        Runnable runnable = new Runnable() {

            @Override
            public void run() {
                for (int i=0;i<drawables.length;i++) {
                    image3.setImageResource(drawables[i]);
                    gameactivity.handler.postDelayed(this, 500);
                    Log.w("asyncrunnable","run"+i);
                }

            }

        };
        gameactivity.handler.post(runnable);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:39:01.727

你不应该创建 10 个 ImageViews 来做这样的动画。

只有一个 ImageView 就足够了！使用处理程序以`setImage`每 x 毫秒左右的任何形式更新图像。

初始化数组中的图像和整数中的当前图像：

```
int drawables[] = new int[] {R.drawable.image1, R.drawable.image2, ...};
int mCurrent = 0; 
```

然后初始化您的更新程序：

```
 Runnable runnable = new Runnable() {

    @Override
    public void run() {
                 if(mCurrent>=drawables.length)mCurrent=0;
                 imageView.setImageResource(drawables[mCurrent]);
                 mHandler.postDelayed(this, 3000); //every 3 seconds
    }
}; 
```

最后，当您想开始时，只需发布​​可运行文件：

```
mHandler.post(runnable); 
```

* * *

你的代码是错误的：

试试这个拉功能（虽然我并不真正认可整个代码风格，但没有时间修复它）

```
public void pull() {

    final ImageView image3 = (ImageView) gameactivity.findViewById(R.id.imageView3);
    final int drawables[] = new int[] {R.drawable.pull2,R.drawable.pull3,R.drawable.pull4,R.drawable.pull5,R.drawable.pull6,R.drawable.pull7};
            for (int i=0;i<drawables.length;i++) {
                final int j = i;
    Runnable runnable = new Runnable() {

        @Override
        public void run() {
                image3.setImageResource(drawables[j]);

        }

    };
                gameactivity.handler.postDelayed(this, 500 * i);
                Log.w("asyncrunnable","run"+i);
            }
} 
```

}

# math - 具有多个权重的双四元数蒙皮

> ID：14687884
> 
> 赞同：2
> 
> 时间：2013-02-04T13:34:06.487
> 
> 标签：math, 3d, quaternions

我正在从一个 cg 软件中导入动画网格，该软件每个顶点使用 3 个权重进行蒙皮。每一个都加权其他旋转轴（X、Y 和 Z）。它创造了非常令人信服的效果，我想在我的应用程序中在 GPU 上实时实现这一点。

目前我对动画使用双四元数，我想用这三个权重而不是一个权重来加权它们。一开始它看起来很简单——只需使用这三个权重对 i、j 和 k（或着色器符号中的 x、y、z）分量进行加权：

```
q.x *= weight.x
q.y *= weight.y
q.z *= weight.z 
```

但问题在于实分量（w）。我不知道如何正确称重。

我尝试将它乘以所有三个权重的平均值，但它给了我奇怪的结果：

```
q.w *= (weight.x + weight.y + weight.z) / 3 
```

通过围绕轴的旋转加权平均，可以完美地工作，但只能围绕一个轴旋转。当同时围绕 2 个或 3 个轴进行非零旋转时，它在视觉上会给出完全错误的结果。

```
q.w *= (weight.x * q.x + weight.y * q.y + weight.z * q.z) / (q.x + q.y + q.z) 
```

# java - GUI-Frame 不显示任何组件

> ID：14687885
> 
> 赞同：0
> 
> 时间：2013-02-04T13:34:08.883
> 
> 标签：java, swing

这是我的代码，但框架显示一个空窗口并且没有错误（语法或其他）。我认为这是 JPanel 或 GridLayout 中的一些错误。当我将鼠标放在 GridLayout 上 时，`p1.setLayout(new GridLayout(2,2));`它会显示`"Note:This element has no attached source and the Javadoc could not be found in the attached javadoc"`.

这是测试

```
 import javax.swing.JFrame;

  public class test {

    public static void main(String[] args) {

        menu frame = new menu();
        frame.setTitle("menu");
        frame.setSize(400,400);
        frame.setLocationRelativeTo(null);// Center the frame 
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);     
    }
  } 
```

还有我的代码

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;

import javax.swing.Box;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class menu extends JFrame{

JButton jbtAdd = new JButton("add");
JButton jbtPrint = new JButton("print");

ArrayList<Product> manu = new ArrayList<Product>();

public void menu(){

    JPanel p1=new JPanel();

    p1.setLayout(new GridLayout(2,2));

    p1.add(new JLabel("add new product"));
    p1.add(jbtAdd);
    p1.add(new JLabel("print menu"));
    p1.add(jbtPrint);

    JPanel p2=new JPanel(new BorderLayout());
    p2.add(new JTextField("MENU"), BorderLayout.NORTH);

    p2.add(p1,BorderLayout.CENTER );

    add(p2, BorderLayout.SOUTH);

    jbtAdd.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            JOptionPaneMultiInput input=new JOptionPaneMultiInput();    
        }
    }); 
};

public class JOptionPaneMultiInput {

    public void JOptionPaneMultiInput(){

    JTextField productField = new JTextField(5);
    JTextField priceField = new JTextField(5);

    JPanel myPanel = new JPanel();
    myPanel.add(new JLabel("enter product"));
    myPanel.add(productField);
    myPanel.add(Box.createHorizontalStrut(15)); // a spacer
    myPanel.add(new JLabel("enter price"));
    myPanel.add(priceField);

    int result=  JOptionPane.showConfirmDialog(null, myPanel, 
         "Please Enter product and price Values", JOptionPane.OK_CANCEL_OPTION);

    String name1= productField.getText();

    double price1=Double.parseDouble(priceField.getText());

    if (result == JOptionPane.OK_OPTION) {            
       Product name  = new Product(name1, price1);
         manu.add(name);
    } 

  }
}

private class Product{

    private String name = "noname";
    private Double price=new Double(100);

    public Product(String name1, double price1) {
        // TODO Auto-generated constructor stub
    }

    public void Product(){
        };

    public void Product(String name,double price)
    {
        this.name=name;
        this.price=price;
    };

    public double getPrice(){
    return price;}

    public void setPrice(Double p){
        price=p;}

    public String getName(){
        return name;}

    public void setName(String n){
        name=n;}

  } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:38:07.280

您当前在构造函数中有一个额外的`void`关键字，有效地将其作为方法，因此它永远不会被调用。代替

```
public void menu() { 
```

和

```
public menu() { 
```

同样对于`Product`, 替换

```
public void Product() { 
```

和

```
public Product() { 
```

*旁白：* Java[代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)表明类名以大写字母开头，为您提供一个`Menu`类。

# python - 如何从字符串中删除所有非字母（所有语言）和非数字字符？

> ID：14687890
> 
> 赞同：4
> 
> 时间：2013-02-04T13:34:29.263
> 
> 标签：python, regex, python-2.7

我一直在寻找很长一段时间，但我找不到关于这个主题的任何解释。

如果我有一个字符串，说：`u'àaeëß35+{}"´'`。我希望删除所有非字母数字字符（但是，我希望`à, ë, ß`等保留。

我对 Python 还很陌生，我想不出一个正则表达式来执行这个任务。我能想到的唯一其他解决方案是有一个列表，其中包含我要删除的字符并遍历替换它们的字符串。

这里正确的 Pythonic 解决方案是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T13:39:23.837

```
In [63]: s = u'àaeëß35+{}"´'

In [64]: print ''.join(c for c in s if c.isalnum())
àaeëß35 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:38:04.187

关于什么：

```
def StripNonAlpha(s):
    return "".join(c for c in s if c.isalpha()) 
```

# ruby-on-rails - 如何在 Rails 3 中为日期字段编写包含验证器？

> ID：14687893
> 
> 赞同：1
> 
> 时间：2013-02-04T13:34:56.630
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

我想写如下的包含验证器：

```
validates :application_date,
  inclusion_of: { in: Date.today..20.years.from_now }

# Schema
#  application_date       :date 
```

但我明白了

```
bad value for range 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:41:00.187

您收到该错误的原因`20.years.from_now`是返回一个日期时间对象 (ActiveSupport::TimeWithZone) 并`Date.today`返回一个日期。因此，您的范围将不起作用，因为它使用两种不同的对象类型。您可以通过将后者转换为日期来修复它：

```
Date.today..20.years.from_now.to_date 
```

# sql - EDMX 设计师定制协会

> ID：14687895
> 
> 赞同：0
> 
> 时间：2013-02-04T13:35:02.467
> 
> 标签：sql, entity-framework, edmx, ef-model-first

我对 edmx 设计器有疑问。我有一个表（评论）和一个视图（用户）。我想在评论中添加它们之间的关联，UserId。当我这样做时，我会在 Comment - UserId1 中获得额外的列。之后我有错误，那个 UserId1 没有被映射。wrog 这里是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:12:59.833

当您获得添加新关联对话框时，会选择一个名为“将外键属性添加到'您的实体名称'实体”的选项。确保取消选择此选项。

您可能还需要在关联属性面板中设置引用约束 - 这是 EF 在导航属性中使用关联的方式。

# sqlite - 您如何设置要测试的 Mvvmcross SQLite 插件？

> ID：14687897
> 
> 赞同：1
> 
> 时间：2013-02-04T13:35:06.613
> 
> 标签：sqlite, nunit, mvvmcross

我对 mvvmcross 很陌生，我正在开发一个使用 SQLite 插件作为模型“后端”的应用程序。（目前只有 WinRT 和 WP/8，但在两个平台都可以正常工作时将其移植到 Droid 和 IOS）。我想使用 NUnit 和 VS2012 设置一些测试，但是很难找到有关如何在 SetupFixture 类/设置中初始化框架和插件的示例以进行测试。已经做过这件事的人可以指出我正确的方向吗？

非常感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:49:59.240

我通常不在 SQLite 接口级别本身进行测试。

相反，我通常将 SQLite 的使用包装在非常简单的存储库中。这些存储库中的每一个都提供了一个接口。每个存储库和 SQLite 本身都被假定为已知的良好组件 - 所以它没有经过测试。这使我可以使用 Mocks 为这些存储库测试其他代码，而不是尝试模拟或使用 SQLite 本身。

* * *

如果要在 SQLite 级别进行测试：

*   你可以写一个 ISQLiteConnection 测试实现
*   或者您可以编写一些使用 Windows 插件上的 SQLite 之一进行测试的东西

# makefile - Makefile：递归宏调用无限期运行

> ID：14687899
> 
> 赞同：0
> 
> 时间：2013-02-04T13:35:19.497
> 
> 标签：makefile

我正在尝试创建一个创建自定义文件系统的 Makefile，我的问题是在其中复制一些包。我需要处理一个包含我需要包含的所有包的目录，但每个包可能包含也可能不包含描述其依赖关系的相关文件。这是我尝试做的摘录：

```
PKGS_DIR := $(shell pwd)/packages
PKGS := $(wildcard $(PKGS_DIR)/*.pkg)

.PHONY: $(PKGS)

define getdeps
    @if [ ! -f $(2)/$(1) ]; then \
        echo $(1) >> $(BASE_DIR)/deplist.tmp; \
        if [ -f $(PKGS_DIR)/$(1).dep ]; then \
            depapps=`cat $(PKGS_DIR)/$(1).dep`; \
            $(foreach depapp,$$depapps,\
                $(call getdeps,$(depapp),$(BASE_DIR)/optional); \
            ) \
        fi \
    fi
endef

$(PKGS):
    @echo processing $(notdir $@)
    $(call getdeps,$(notdir $@),$(BASE_DIR)/optional) 
```

使用此代码，我的 makefile 崩溃，因为它进入无限循环，我不明白为什么。我的问题是：是否可以在宏定义中进行递归调用？有没有更好的方法来实现这一点？也许使用 shell 脚本来实现它并在我的 makefile 中调用它会更好。

任何建议将不胜感激。

提前致谢

# bash - 控制在 UNIX shell 上运行的后台作业的数量

> ID：14687905
> 
> 赞同：4
> 
> 时间：2013-02-04T13:35:36.193
> 
> 标签：bash, unix, concurrency

我有一个问题，我一个接一个地运行我的 bash 命令行脚本，例如：

```
./process.sh data1.txt
./process.sh data2.txt
...
./process.sh dataN.txt 
```

我想做的是将这些作为后台作业启动，但在任何给定时间只有 10 个运行。我可以用传统的编程语言来做到这一点（我很喜欢使用连接、等待风格的结构）我的问题是如何使用 UNIX bash 来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:41:25.237

```
BG_LIMIT=10
counter=0
for data in data*.txt; do
    ./process.sh $data &
    if (( ++counter % $BG_LIMIT == 0 )); then
        echo "Wating for background jobs to complete..."
        wait
    fi
done
echo "Waiting for any remaining jobs to complete..."
wait 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T14:35:25.187

您也可以使用`xargs`：

```
$ for x in data*.txt; do echo "$x"; done | xargs -n 1 -P 10 ./process.sh 
```

`for`循环的不同变体是可能的： `find`、简单`echo data*.txt`等。关键是在标准输入上生成文件名列表以供`xargs`读取。

# jsf-2 - 如何避免在 ajax 请求中调用 preRenderView 方法？

> ID：14687910
> 
> 赞同：16
> 
> 时间：2013-02-04T13:35:58.403
> 
> 标签：jsf-2

我需要在页面加载时调用支持 bean 中的方法。我使用它实现了它

```
<f:event listener="#{managedBean.onLoad}" type="preRenderView"> 
```

但是，每当在页面中发出 ajax 请求时，就会再次调用该方法。我的要求中不需要它。如何避免在ajax请求中调用该方法？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-04T15:13:00.900

该`preRenderView`事件只是在呈现视图之前在每个请求上调用。ajax 请求也是呈现视图的请求。所以这种行为是完全可以预料的。

你基本上有两个选择：

1.  用bean`@PostConstruct`上的方法替换它。`@ViewScoped`

    ```
    @ManagedBean
    @ViewScoped
    public class ManagedBean {

        @PostConstruct
        public void onLoad() {
            // ...
        }

    } 
    ```

    只有在第一次构造 bean 时才会调用它。只要您在回发、ajax 或非 ajax 之间与同一个视图交互，视图范围的 bean 实例就会存在。

    * * *

2.  如果当前请求是 ajax 请求，请在侦听器方法内部执行检查。

    ```
    @ManagedBean
    // Any scope.
    public class ManagedBean {

        public void onLoad() {
            if (FacesContext.getCurrentInstance().getPartialViewContext().isAjaxRequest()) { 
                return; // Skip ajax requests.
            }

            // ...
        }

    } 
    ```

    或者，如果您真的有兴趣跳过回发而不是专门的 ajax 请求，那么请改为：

    ```
     if (FacesContext.getCurrentInstance().isPostback()) { 
                return; // Skip postback requests.
            } 
    ```

# windows - 有没有人有在 R（Windows 操作系统）中打开 hdf 文件的经验？

> ID：14687913
> 
> 赞同：5
> 
> 时间：2013-02-04T13:36:05.240
> 
> 标签：windows, r, hdf5

我无法在 R 中使用 hdf 文件。我相信 R 包`hdf5`将是我使用这些文件所需要的，但在安装它时遇到了困难。我收到以下警告：

```
> install.packages("hdf5")
Installing package(s) into ‘C:/Users/ME/Documents/R/win-library/2.15’
(as ‘lib’ is unspecified)
--- Please select a CRAN mirror for use in this session ---

   package ‘hdf5’ is available as a source package but not as a binary

    Warning message:
package ‘hdf5’ is not available (for R version 2.15.2) 
```

有没有人有设置 R 的 Windows 操作系统版本来读取和使用 hdf 文件的经验？[可以在这里](http://orca.science.oregonstate.edu/data/2x4/monthly/vgpm.r2012.m.chl.m.sst4/hdf/vgpm.2002182.hdf.gz)找到我希望使用的 hdf 文件示例。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-04T14:27:56.177

Bioconductor [rhdf5](http://bioconductor.org/packages/release/rhdf5)软件包可在所有平台上使用，并且没有系统依赖项。

```
source("http://bioconductor.org/biocLite.R")
biocLite("rhdf5") 
```

然后每个会话

```
library("rhdf5") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-04T14:05:38.190

您需要先编译包。请参阅[Rtools](http://cran.r-project.org/bin/windows/Rtools/)以获得帮助。

在[HDF5 的 CRAN 页面上，](http://cran.r-project.org/web/packages/hdf5/index.html)您可以从自述文件中看到 CRAN 使用的 Windows 构建机器上缺少依赖项。也许您可以自己编译这些依赖项。

实际上这里有一个包中的指南（win_readme.txt）：

## hdf5 R 包 - Windows 自述文件：

要编译然后使用 hdf5 库，您需要 hdf5 库的 Windows 二进制文件，网址为： [http](http://hdf.ncsa.uiuc.edu) ://hdf.ncsa.uiuc.edu 。我们使用 Windows 二进制版本 1.4.3 对其进行了测试。

下载 zip 包并将其解压缩到某个位置（例如，在 c:\temp 中；此目录将在下面调用）。

## 1）库的编译：

*   如果还没有解压库的当前源文件在 \src\hdf5 中。

*   将 hdf5dll.dll 从 \5-143-win\c\release\dll 复制到 \src\hdf5\src

*   将 \5-143-win\c\release\include 复制到 \src\hdf5\src\include （此目录中的所有文件）

*   现在您应该像往常一样使用 Rcmd INSTALL %R_HOME%\src\hdf5 成功编译

*   您可以压缩目录 \library\hdf5 以制作可安装的 Windows 二进制包

## 2）hdf5库的安装：

如果您没有将相应的 hdf5dll.dll 放在您的路径中，您将无法运行此包中的函数... 警告：使用与用于编译的版本不同的 dll 版本可能会导致 R 崩溃！

# python - 在这种情况下如何配置 __init__.py ？

> ID：14687914
> 
> 赞同：1
> 
> 时间：2013-02-04T13:36:12.067
> 
> 标签：python, python-2.7

我有一个具有以下结构的 python 应用程序。

```
/app
  /models
    __init__.py
    profile.py
  /views
    __init__.py
    index.py
    login.py
  __init.py
main.py 
```

目前这三个`__init__.py`文件都是空的。

在类似的文件`index.py`中，我有几个类。

```
class IndexHandler(webapp2.RequestHandler):
    #blah blah 
```

我在文件中写了什么，这样我就可以在不输入完整包路径的情况下`__init.py__`调用类`profile.py`等等？`index.py`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:55:55.773

Python 中的命名空间是显式的。在每个`__init__.py`文件中，导入您希望在该包的命名空间中可用的任何模块、函数和类。

例如，如果你希望`app`包有一个`index`成员，在`/app/__init__.py`：

```
from views import index 
```

或者，如果您希望类本身成为命名空间的一部分：

```
from models.views import IndexHandler 
```

这将允许您执行以下操作：

```
import app
handler1 = app.index.IndexHandler()  # example 1
handler1 = app.IndexHandler()  # example 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:40:36.613

从技术上讲，您不必在`__init__.py`文件中放入任何内容。您应该能够从`main.py`文件中导入模型，只要它位于 app 文件夹中，并使用以下功能：

```
import models    
models.profile.whatever 
```

如果您`main.py`位于 /app 文件夹的“上方”，则您的 /app 文件夹中将需要一个`__init__.py`文件。那么你可以这样做：

```
import app
app.models.profile.whatever 
```

# iphone - 如何从 iPhone 中的 NSMutableArray 中删除对象

> ID：14687916
> 
> 赞同：-3
> 
> 时间：2013-02-04T13:36:23.147
> 
> 标签：iphone, objective-c, uitableview, nsmutablearray

我正在尝试删除 UITableView 行并从 NSMutableArray 中删除对象。这是我删除行的代码。

```
 [myArray removeObjectAtIndex:indexPath.row]; 
```

在此之后，我正在重新加载我的 tableView。使用它删除该对象。但是，问题是当我第二次运行应用程序时，已删除的对象再次显示在 tableview 中。如何从数组中删除对象？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:38:16.177

我认为您正在重新初始化数组，这就是它发生的原因。

```
[myArray removeObjectAtIndex:indexPath.row]; 
```

这条线肯定会从 myArray 中删除对象。您可以在此行执行后通过断点或 NSLOg 进行检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:42:27.743

只需检查您的**myArray Initialization**部分。

**1）**检查当您加载特定视图时是否调用了您的 myArray 的 Initialization ！

**2）**检查您的`viewDidLoad`Method ，如果您已经在`myArray`那里初始化了，那么该元素将永远不会被删除。

**答案：**使用**断点**和`NSLogs`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:43:35.393

您已经从某处加载了`myArray`，现在数据在 RAM 中，删除该对象会将其从 RAM 中删除，但它已经存在于您加载该数组的那个位置。也从那个地方删除。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-04T14:02:13.443

首先告诉我......你从哪里得到 Array.. 我的意思是来自`database`or `plist`or `coredata`or `locally`?? 如果您在方法中本地创建数组并从中获取`viewDid`数组项，那么它将获得您在`viewDid`..最后的核心数据（关于如何删除数据） 。`database``plist``coredata``[tableView reloadData];`

# windows-phone-8 - windows phone 8 自定义消息框

> ID：14687917
> 
> 赞同：1
> 
> 时间：2013-02-04T13:36:28.817
> 
> 标签：windows-phone-8, messagebox, customdialog

我想实现一个对话框（或警报对话框），例如在 Android 中扩展 Dialog 组件。

在电话 8 消息框中只允许显示标题和消息。我想在我的对话框中添加新的视图，如按钮、图像等。我怎样才能做到这一点，或者有可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:45:51.867

[Windows Phone Toolkit](http://phone.codeplex.com/)包含一个自定义消息框的示例，它已经允许更多（尽管仍然有限，imo）自由。如果那个不能满足您的要求，您可以查看源代码以了解如何滚动您自己的消息框。

如果没记错的话，它会在内部使用[Popup](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup%28v=vs.95%29.aspx)来显示模态屏幕。

# jsp - 将名称列表映射到 Struts 1.2 中的 Form List 或 Map

> ID：14687921
> 
> 赞同：-1
> 
> 时间：2013-02-04T13:36:42.027
> 
> 标签：jsp, struts-1

我将用一个例子来解释我的问题。在我的 JSP 页面中，表单有成对的输入元素来输入员工的名字和姓氏。可以有很多员工。我需要将这些带有员工的名字和姓氏映射到Form bean中的一个`List`或任何一个。`Collection`List 或任何其他集合可能具有具有属性“firstName”、“lastName”的值对象。这在 struts 1.2 中可行吗？如果可能的话，我该怎么做？任何示例代码或有用的链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:22:49.460

这可以在 Struts 中通过使用索引和映射属性来处理。

请参阅文档中的说明：[索引属性、映射属性和索引标签](http://struts.apache.org/1.x/struts-taglib/indexedprops.html)。

# drag-and-drop - SL5 OOB：为 TreeVIewItem 启用拖放

> ID：14687930
> 
> 赞同：0
> 
> 时间：2013-02-04T13:36:57.983
> 
> 标签：drag-and-drop, silverlight-5.0, out-of-browser

我试图让拖放工作能够将文件拖到我的 SL5 OOB 应用程序上。我已经让它与 TextBox 一起使用，但无法让它与 TreeView/TreeViewItem 一起使用。

这是xml：

```
<sdk:TreeView Style="{StaticResource TreeViewStyle1}"   
    ItemsSource="{Binding Items}" AllowDrop="True" Drop="AnyDropTarget_OnDrop">  
      <sdk:TreeView.ItemTemplate>
        <sdk:HierarchicalDataTemplate ItemsSource="{Binding Children}" >
          <TextBlock Text="{Binding Name}" Foreground="WhiteSmoke" AllowDrop="True" Drop="AnyDropTarget_OnDrop" />  
       </sdk:HierarchicalDataTemplate>
     </sdk:TreeView.ItemTemplate>
</sdk:TreeView> 
```

我究竟做错了什么？
感谢您提供任何见解....
**更新**：
似乎必须从本地计算机启动 OOB 应用程序；从 VS2012 开始时， d 'nd 似乎根本不起作用。

在上面的 xaml 中，除了/代替 TextBlock 之外，是否可以使 TreeViewItem 成为放置目标？
**更新第二**个：
提取 TreeView.ItemTemplate 以使其易于“样式化”的最佳方法是什么？

# javascript - 非 IE 浏览器的 Range.select() 等效方法

> ID：14687932
> 
> 赞同：1
> 
> 时间：2013-02-04T13:37:06.440
> 
> 标签：javascript, range, contenteditable

如果我有

```
var range = document.body.createTextRange(); 
```

我`range.select();`在 Internet Explorer 中调用，与其他浏览器（Firefox、Chrome、Opera）中的范围选择方法等效的是什么？在创建范围对象并将其添加到当前选择后，我正在寻找使我的插入符号在 contenteditable div 中可见的东西。

谢谢！

稍后编辑：我需要这个，因为我试图让我的应用程序在所有浏览器上运行，并且我需要将插入符号放置在 contenteditable div 中，就在用户从弹出窗口中选择的文本之后。到目前为止，我的应用程序在 IE 上运行，但我还需要让它在 Opera、Firefox 和 Chrome 上运行。我在 IE 上放置插入符号的 Javascript 代码如下所示：

```
 function setCaretPos()
 {
    if (document.selection) 
    {
       /* IE */
       var range = document.body.createTextRange();
       range.moveToElementText(editableDiv);
       var insertedSpan = document.getElementById('span' + count);
       var preCaretRange = document.body.createTextRange();
       preCaretRange.moveToElementText(insertedSpan);
       preCaretRange.moveEnd("character", 2);
       range.setEndPoint("EndToEnd", preCaretRange);
       range.collapse(false);
       range.select();
    }
    else
    {
     if (window.getSelection) {
     /* Firefox, Opera, Chrome */
     var sel = window.getSelection();
     if(sel.rangeCount)
     {
        var range = sel.getRangeAt(0);
        var insertedSpan = document.getElementById('span' + count);
        range.selectNodeContents(insertedSpan);
        range.collapse(false);
        sel.removeAllRanges();
        sel.addRange(range);
       }
     }
 } 
```

使用上面的代码，跨度内的文本被选中，但我的问题是插入跨度后插入符号没有显示，它只是消失了。

任何建议都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T15:31:06.773

其他浏览器中的等价物是通过[`Selection`](https://developer.mozilla.org/en-US/docs/DOM/Selection)对象：

```
var range = document.createRange();
var selection = window.getSelection();
selection.removeAllRanges();
selection.addRange(range); 
```

# tridion - 发布后页面源的对齐方式变得扭曲

> ID：14687938
> 
> 赞同：0
> 
> 时间：2013-02-04T13:37:23.473
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们正在使用 Tridion 2011 SP1。发布页面后，页面的源代码变得扭曲。Javascript 和其他 HTMl 部分出现在同一行，它似乎忽略了换行符，但如果我们将粘贴页面源复制到 Notepad++ 对齐看起来不错，但在页面源中显示它已损坏。即使在页面预览源是正确的。可以做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:35:40.850

首先，正如其他人已经指出的那样，这应该是完全没有必要的，并且绝对不会影响您网站的正常运行。这纯粹是肤浅的。事实上，正如 Chris 所提到的，许多开发人员都在努力尽可能地“[缩小](http://en.wikipedia.org/wiki/Minification_%28programming%29)”他们的代码，以减少通过网络传输给用户的比特数量。

但是，如果您**真的**需要 Windows 样式的行尾，以下 .Net TBB 应该会有所帮助。确保在生成输出*后运行它。*

```
using Tridion.ContentManager.Templating;
using Tridion.ContentManager.Templating.Assembly;

namespace SDLTridion.Bootstrap.Templating
{
    [TcmTemplateTitle("Enforce Windows Line Ending")]
    public class EnforceWindowsLineEnding : ITemplate
    {
        public void Transform(Engine engine, Package package)
        {
            Item outputItem = package.GetByName(Package.OutputName);
            string outputContent = outputItem.GetAsString();
            outputContent = outputContent.Replace("\r", "\r\n");
            outputItem.SetAsString(outputContent);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T13:53:51.580

默认情况下，tridion 仅使用换行符来指示行尾，但大多数 Windows 应用程序都希望行尾标记为回车换行符，并将仅包含换行符的文本显示为只有一行。

您可以修改您的发布代码，因此呈现过程中的最后一个步骤是在所有之前没有回车的换行符之前附加一个回车，然后页面源将不会出现“扭曲”

需要注意的一点是，这不应该对页面呈现给最终用户的方式产生任何影响。

# opengl - 如何将opengl从windows移动到linux？

> ID：14687947
> 
> 赞同：-1
> 
> 时间：2013-02-04T13:38:11.897
> 
> 标签：opengl

我想在不使用 glut 的情况下将 OpenGL 应用程序从 Windows 转移到 Linux。我在 linux 中制作了 opengl 应用程序并且不得不使用 glut，但我无法在那个环境中安装我的 aap。再次为我的英语感到抱歉。在 C++ 中，在哪里可以找到 opengl 指令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:42:20.140

你提供的信息很少。首先也是最重要的：如何创建窗口和 OpenGL 上下文？

普通的 Win32 / WGL API？然后你必须使用 Xlib / GLX 重做整个事情。这是在 Linux / X11 [https://github.com/datenwolf/codesamples/tree/master/samples/OpenGL/x11argb_opengl上执行的示例程序](https://github.com/datenwolf/codesamples/tree/master/samples/OpenGL/x11argb_opengl)

不过，我建议使用一些已建立的 GUI 工具包/框架，例如 Qt、GTK+ 或 wxWidgets。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:42:22.153

GLUT 只是一个工具库，它使使用 GL 更加舒适。OpenGL 在 Windows 和 Linux 上应该是相同的，所以您需要做的就是安装头文件（请参阅您的 Linux 风格的说明手册或告诉我们您正在使用哪个）并运行 Makefile。

# java - 带有始终发送 Null 参数的 PHP 客户端的 Jax Ws

> ID：14687948
> 
> 赞同：0
> 
> 时间：2013-02-04T13:38:14.663
> 
> 标签：java, php, web-services, soap, jax-ws

我创建了一个 JaxWs 服务。用户试图用 PHP 客户端调用它，唯一的参数是一个字符串。当我使用 Eclipse Web 服务浏览器（测试器）时，它很好。当用户尝试使用 PHP 时，我在方法中收到一个空参数。我还没有对 wsdl 或代码进行任何定制。在此先感谢您的任何指点...

方法

```
 @WebService(endpointInterface = "my.endpoint.class")
    public class ExternalReportsImpl implements ExternalReports {
private org.w3c.dom.Document doc;
@Resource
private WebServiceContext context;
private enum Types {
    tfbData, tfbRate, tfbSupport, tfbMakes, tfbVin, tfbSave, tfbRetrieve;
}
@Override

public String getReports(String xmlSource){
    XmlHelper xh;
    SupportTables support =  new SupportTables();
    Connection con = null;  
    Policy policy  = null;
    String schema  = "";
    String ret     = "";
    ServletContext servletContext = (ServletContext)   context.getMessageContext().get(MessageContext.SERVLET_CONTEXT);
    try {
        xh = new XmlHelper();
        doc = xh.loadDoc(xmlSource);
             } 
```

WSDL 片段

```
<message name="getReports"><part name="parameters" element="tns:getReports"/></message><message name="getReportsResponse"><part name="parameters" element="tns:getReportsResponse"/></message><portType name="ExternalReports"><operation name="getReports"><input wsam:Action="http://my.class/ExternalReports/getReportsRequest" message="tns:getReports"/><output wsam:Action="http://my.class/ExternalReports/getReportsResponse" message="tns:getReportsResponse"/></operation></portType> 
```

PHP客户端

```
 error_reporting(E_ALL);

    $url = 'http://my.endpoint/ExternalReportsWebService?wsdl';

    $client = new SoapClient($url);

    class getReports {
  function __construct($arg0) {
    $this->getReports = $arg0;
}
    }

   class getReportsResponse {
function __construct($arg0='') {
    $this->getReportsResponse = $arg0;
}
     }

     //$GR = new getReports(file_get_contents("test/test.xml") );
     $GR = new getReports("test") );
     $GRR = new getReportsResponse();

      $report = new SoapVar( $GR  , SOAP_ENC_OBJECT, 'getReports', $url);
      $response = new SoapVar( $GRR  , SOAP_ENC_OBJECT, 'getReportsResponse', $url);

      echo nl2br(htmlspecialchars(print_r($client->getReports($report, $response), true))); 
```

将此代码添加到 PHP CLIENT

```
 echo "<br> LAST REQUEST <br>"  ;
     echo $client->__getLastRequest();
     echo " <br> Functions <br>"  ;
     echo $client->__getFunctions();
     echo " <br> Types <br>"  ;
     echo $client->__getTypes();
     echo "<br> Request headers <br>"  ;
     echo $client->__getLastRequestHeaders(); 
```

客户追踪结果

```
 LAST REQUEST
        TEST
    Functions
       Array
    Types
       Array
    Request headers
       POST /myApp/ExternalReportsWebService HTTP/1.1 Host: localhost:8080          Connection: Keep-Alive User-Agent: PHP-SOAP/5.3.14 Content-Type: text/xml; charset=utf-8 SOAPAction: "" Content-Length: 531 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:29:04.747

找到这个链接

[http://www.lampjunkie.com/2010/03/get-phps-soapclient-to-speak-with-javas-jax-ws/](http://www.lampjunkie.com/2010/03/get-phps-soapclient-to-speak-with-javas-jax-ws/)

我的架构已命名为 params

```
 <xs:schema version="1.0" targetNamespace="http://my.namespace/"><xs:element name="getReports" type="tns:getReports"/><xs:element name="getReportsResponse" type="tns:getReportsResponse"/><xs:complexType name="getReports"><xs:sequence><xs:element name="arg0" type="xs:string" minOccurs="0"/></xs:sequence></xs:complexType><xs:complexType name="getReportsResponse"><xs:sequence><xs:element name="return" type="xs:string" minOccurs="0"/></xs:sequence></xs:complexType></xs:schema> 
```

不得不添加

```
$addRequest = new stdClass();
$addRequest->argO = "String I was sending";
$response = $client->add($addRequest); 
```

# android - 将整数数组复制到下一个活动

> ID：14687949
> 
> 赞同：0
> 
> 时间：2013-02-04T13:38:15.473
> 
> 标签：android

我有

```
Integer[] mainArray; 
```

在我的一项活动中，随机填充了唯一值。
现在我希望这个数组复制到下一个活动？
怎样才能实现？我已经看到似乎没有选择携带它

```
Bundle b=new Bundle();
b.putIntArray("key", mainArray);
Intent i=new Intent(context, Class);
i.putExtras(b); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:47:22.673

尝试这个，

而不是整数数组使用arraylist。

```
Intent i=new Intent(context, Class);
 i.putIntegerArrayListExtra("name", arraylist);
 startActivity(i); 
```

其他这个整数数组列表到下一个活动

```
 Intent i = getIntent();
 ArrayList<String> list = new ArrayList<String>();
 list = i.getStringArrayListExtra("name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:40:25.477

这正是您所需要的：

```
Bundle b=new Bundle();
b.putIntArray("key", mainArray);
Intent i=new Intent(context, Class);
i.putExtras(b); 
```

只需
在 onCreate() 上从您的其他活动中获取数据：

```
int data[] = getIntent().getIntArrayExtra("key"); 
```

问题是什么？

`int`Java和`Integer`Java之间是有区别的。您可以在此处了解更多信息：[Java 和 C# 中的 int 和 Integer 有什么区别？](https://stackoverflow.com/questions/564/what-is-the-difference-between-an-int-and-an-integer-in-java-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:41:28.510

在发送整数数组的活动中使用：

```
intent.putExtra("array", mainArray); 
```

在接收这个整数数组的活动中使用：

```
int array[] = getIntent().getIntArrayExtra("array") 
```

# php - PHP图片透明

> ID：14687954
> 
> 赞同：0
> 
> 时间：2013-02-04T13:38:26.720
> 
> 标签：php, image, resize, thumbnails, transparent

我正在尝试使用以下代码调整 PNG 透明图像的大小：

```
$src=ImageCreateFrompng($uploadedfile);
$background=imagecolorallocate($src,0,0,0);
imagecolortransparent($src,$background);
imagealphablending($src,false);
imagesavealpha($src,true);
$dst=ImageCreateTrueColor($tn_width,$tn_height);
imagecopyresampled($dst,$src,0,0,0,0,$tn_width,$tn_height,$width,$height);
Imagepng($dst,$dstfile); 
```

我使用过`imagealphablending($src,false)`，`imagesavealpha($src,true)`但它仍然上传黑色背景的图像而不是透明的图像。

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:39:41.817

这是因为您将透明图像复制到黑色图像上。您对 aplhablending 的错误设置仅适用于原始图像，因此当您在新图像上复制时，aplha blending 已打开。
您的代码只需要一点改进：

```
$transparent = imagecolorallocatealpha($dst, 0,0,0,127);  //Transparent background color
imagealphablending($dst,false);            //Not to compound transparent colors with opaque
imagesavealpha($dst,true);                 //Allow transparency
imagefilledrectangle($dst, 0, 0, imagesx($dst), imagesy($dst), $transparent);   //Give the destination image transparent background
//Now you can copy 
```

## 要不就

```
imagealphablending($dst,false);   //I'm not 100% sure this will make it, but its worth a try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:41:47.060

imagecolorallocate($src,0,0,0);

该行看起来像是从源获取图像，然后使用 000 背景。哪个是黑色的。只是猜测，对功能不熟悉

# android - 如何为两个分辨率不同但尺寸相同的平板电脑设置布局？

> ID：14687958
> 
> 赞同：1
> 
> 时间：2013-02-04T13:38:43.030
> 
> 标签：android, xml, android-layout

我正在为具有 800*400 和 mdpi 分辨率的平板电脑开发 Android 应用程序。但根据要求，我必须使用 ldpi 分辨率制作 800* 400 的应用程序。我为平板电脑和指定的文件夹 /layout 和 /layout-large 做了不同的布局。但仍然只有 large 工作。我无法理解如何让它在一个应用程序中运行。请帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:48:38.730

使用 Layout-mdpi 和 layout-ldpi。为了更具体，您还可以在 Layout-normal-mdpi 和 Layout-normal-ldpi 中定义两种不同的布局。将您各自的布局放在这些文件夹中。

# c# - 将数据从一个 Datagrid 访问到另一个 Datagrid

> ID：14687960
> 
> 赞同：2
> 
> 时间：2013-02-04T13:38:49.723
> 
> 标签：c#, wpf, wpf-controls, wpfdatagrid

我正在开发一个用户界面来查看学生数据库中的学生详细信息。我的应用程序中有三个数据网格，如下所示：

左侧的第一个数据网格用于从列表中选择学生，另外两个必须显示有关所选学生的信息。

*学生信息*数据网格依赖于选择*学生*数据网格，*个人信息数据网格*依赖于*学生信息*数据网格。我已经完成了数据库连接以填充“选择学生”数据网格中的学生列表，但我不知道如何进一步进行。到目前为止，我已经明白我应该创建一个`DataGridView.CellClick`事件。

任何人都可以建议我进一步进行。

![学生数据库的用户界面](../Images/4ba181c95c9f40b97f16a6a6d9f6c35e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:01:12.307

您可以将`ItemsSource`Personal *Information*数据网格的 绑定到*Student Info*`SelectedItem`数据网格的，并将*Student* Info 数据网格的ItemsSource绑定到*Select a Student*数据网格的 。**`SelectedItem`**

 ***这样，*学生信息*数据网格将在您选择学生时自动更新，*学生信息数据网格将在您选择**学生信息*数据网格中的项目时自动更新。

绑定：

```
ItemsSource="{Binding ElementName=StudentDataGrid, Path=SelectedItem.StudentInfo}" 
```

将 ElementName 和 Path 替换为您的数据网格的名称和正确的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T13:44:39.310

嗨，如果您关注 MVVM，那么最好绑定 DataGrid 的 SelectedItem /SelectedValue 以获取 SelectedItem 而不是 SelectionChanged 事件。我希望这会有所帮助。

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <ListBox ItemsSource="{Binding Students}" DisplayMemberPath="Name" SelectedItem="{Binding SelectedStudent, Mode=TwoWay}"/>
    <StackPanel Grid.Column="1">
        <TextBlock Text="{Binding SelectedStudent.FamilyName}"/>
        <TextBlock Text="{Binding SelectedStudent.PhoneNumber}"/>
    </StackPanel>
</Grid>

    public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        DataContext = new ViewModel();
    }
}

public class ViewModel : INotifyPropertyChanged
{
    public ViewModel()
    {
        Students = new ObservableCollection<Student>();
        Students.Add(new Student()
        {
            Name = "James",
            FamilyName = "mangol",
            PhoneNumber = "01234 111111"
        });
        Students.Add(new Student()
        {
            Name = "Bob",
            FamilyName = "angol",
            PhoneNumber = "01234 222222"
        });
        Students.Add(new Student()
        {
            Name = "Emma",
            FamilyName = "pangol",
            PhoneNumber = "01234 333333"
        });
    }
    public ObservableCollection<Student> Students { get; set; }

    private Student selectedStudent;
    public Student SelectedStudent
    {
        get { return selectedStudent; }
        set { selectedStudent = value; Notify("SelectedStudent"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void Notify(string propName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }

}
public class Student:INotifyPropertyChanged
{

    private string name;

    public string Name
    {
        get { return name; }
        set { name = value; Notify("Name"); }
    }

    private string familyname;

    public string FamilyName
    {
        get { return familyname; }
        set { familyname = value;Notify("FamilyName"); }
    }

    private string phonenumber;

    public string PhoneNumber
    {
        get { return phonenumber; }
        set { phonenumber = value; Notify("PhoneNumber"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void Notify(string propName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }
} 
```

上面的示例演示了如何使用 Binding 使用**SelectedItem**。这不是您问题的确切解决方案，但这会让您了解如何使用 SelectedItem。我已经为 ListBox 展示了它对 DataGrid 的工作方式相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T13:41:55.323

在选择学生时，您应该获得所选记录的 ID。从那里，您可以根据记录的 ID 加载详细信息。***

# ios - 如何将 AVAsset 音频从一台 iOS 设备无线传输到另一台设备？

> ID：14687963
> 
> 赞同：2
> 
> 时间：2013-02-04T13:38:57.310
> 
> 标签：ios, core-audio, audio-streaming, audioqueue, avassetreader

我正在做一些事情，比如从 iPod 库中流式传输音频，通过网络或蓝牙发送数据，以及使用音频队列播放。

感谢这个[问题和代码](https://stackoverflow.com/questions/12264799/why-is-audio-coming-up-garbled-when-using-avassetreader-with-audio-queue)。帮我很多。

我有两个问题。

1.  我应该从一台设备发送什么到另一台设备？CMSampleBufferRef？音频缓冲区？数据？音频队列缓冲区？包？我不知道。

2.  当应用程序完成播放时，它崩溃了，我得到了错误（-12733）。我只想知道如何处理错误而不是让它崩溃。（检查OSState？当错误发生时，停止它？）

    错误：无法读取样本数据 (-12733)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T17:18:03.117

我将首先回答您的第二个问题 - 不要等待应用程序崩溃，您可以通过检查您正在阅读的 CMSampleBufferRef 中可用的样本数量来停止从轨道中提取音频；例如（此代码也将包含在我的答案的第二部分）：

```
CMSampleBufferRef sample;
sample = [readerOutput copyNextSampleBuffer];

CMItemCount numSamples = CMSampleBufferGetNumSamples(sample);

if (!sample || (numSamples == 0)) {
  // handle end of audio track here
  return;
} 
```

关于您的第一个问题，这取决于您要抓取的音频类型 - 它可能是 PCM（非压缩）或 VBR（压缩）格式。我什至不会费心解决 PCM 部分，因为通过网络将未压缩的音频数据从一部手机发送到另一部手机根本不明智 - 它不必要地昂贵并且会阻塞您的网络带宽。所以我们留下了VBR数据。为此，您必须发送内容`AudioBuffer`并`AudioStreamPacketDescription`从样本中提取。但是话又说回来，最好用代码来解释我在说什么：

```
-(void)broadcastSample
{
    [broadcastLock lock];

CMSampleBufferRef sample;
sample = [readerOutput copyNextSampleBuffer];

CMItemCount numSamples = CMSampleBufferGetNumSamples(sample);

if (!sample || (numSamples == 0)) {
    Packet *packet = [Packet packetWithType:PacketTypeEndOfSong];
    packet.sendReliably = NO;
    [self sendPacketToAllClients:packet];
    [sampleBroadcastTimer invalidate];
    return;
}

        NSLog(@"SERVER: going through sample loop");
        Boolean isBufferDataReady = CMSampleBufferDataIsReady(sample);

        CMBlockBufferRef CMBuffer = CMSampleBufferGetDataBuffer( sample );                                                         
        AudioBufferList audioBufferList;  

        CheckError(CMSampleBufferGetAudioBufferListWithRetainedBlockBuffer(
                                                                           sample,
                                                                           NULL,
                                                                           &audioBufferList,
                                                                           sizeof(audioBufferList),
                                                                           NULL,
                                                                           NULL,
                                                                           kCMSampleBufferFlag_AudioBufferList_Assure16ByteAlignment,
                                                                           &CMBuffer
                                                                           ),
                   "could not read sample data");

        const AudioStreamPacketDescription   * inPacketDescriptions;

        size_t                               packetDescriptionsSizeOut;
        size_t inNumberPackets;

        CheckError(CMSampleBufferGetAudioStreamPacketDescriptionsPtr(sample, 
                                                                     &inPacketDescriptions,
                                                                     &packetDescriptionsSizeOut),
                   "could not read sample packet descriptions");

        inNumberPackets = packetDescriptionsSizeOut/sizeof(AudioStreamPacketDescription);

        AudioBuffer audioBuffer = audioBufferList.mBuffers[0];

        for (int i = 0; i < inNumberPackets; ++i)
        {

            NSLog(@"going through packets loop");
            SInt64 dataOffset = inPacketDescriptions[i].mStartOffset;
            UInt32 dataSize   = inPacketDescriptions[i].mDataByteSize;            

            size_t packetSpaceRemaining = MAX_PACKET_SIZE - packetBytesFilled - packetDescriptionsBytesFilled;
            size_t packetDescrSpaceRemaining = MAX_PACKET_DESCRIPTIONS_SIZE - packetDescriptionsBytesFilled;        

            if ((packetSpaceRemaining < (dataSize + AUDIO_STREAM_PACK_DESC_SIZE)) || 
                (packetDescrSpaceRemaining < AUDIO_STREAM_PACK_DESC_SIZE))
            {
                if (![self encapsulateAndShipPacket:packet packetDescriptions:packetDescriptions packetID:assetOnAirID])
                    break;
            }

            memcpy((char*)packet + packetBytesFilled, 
                   (const char*)(audioBuffer.mData + dataOffset), dataSize);

            memcpy((char*)packetDescriptions + packetDescriptionsBytesFilled, 
                   [self encapsulatePacketDescription:inPacketDescriptions[i]
                                         mStartOffset:packetBytesFilled
                    ],
                   AUDIO_STREAM_PACK_DESC_SIZE);  

            packetBytesFilled += dataSize;
            packetDescriptionsBytesFilled += AUDIO_STREAM_PACK_DESC_SIZE; 

            // if this is the last packet, then ship it
            if (i == (inNumberPackets - 1)) {          
                NSLog(@"woooah! this is the last packet (%d).. so we will ship it!", i);
                if (![self encapsulateAndShipPacket:packet packetDescriptions:packetDescriptions packetID:assetOnAirID])
                    break;

            }

        }

    [broadcastLock unlock];
} 
```

我在上面代码中使用的一些方法是您不需要担心的方法，例如为每个数据包添加标头（我正在创建自己的协议，您可以创建自己的协议）。有关更多信息，请参阅[本](http://www.raywenderlich.com/2012/07/13/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-3/)教程。

```
- (BOOL)encapsulateAndShipPacket:(void *)source
              packetDescriptions:(void *)packetDescriptions
                        packetID:(NSString *)packetID
{

    // package Packet
    char * headerPacket = (char *)malloc(MAX_PACKET_SIZE + AUDIO_BUFFER_PACKET_HEADER_SIZE + packetDescriptionsBytesFilled);

    appendInt32(headerPacket, 'SNAP', 0);    
    appendInt32(headerPacket,packetNumber, 4);    
    appendInt16(headerPacket,PacketTypeAudioBuffer, 8);   
    // we use this so that we can add int32s later
    UInt16 filler = 0x00;
    appendInt16(headerPacket,filler, 10);    
    appendInt32(headerPacket, packetBytesFilled, 12);
    appendInt32(headerPacket, packetDescriptionsBytesFilled, 16);    
    appendUTF8String(headerPacket, [packetID UTF8String], 20);

    int offset = AUDIO_BUFFER_PACKET_HEADER_SIZE;        
    memcpy((char *)(headerPacket + offset), (char *)source, packetBytesFilled);

    offset += packetBytesFilled;

    memcpy((char *)(headerPacket + offset), (char *)packetDescriptions, packetDescriptionsBytesFilled);

    NSData *completePacket = [NSData dataWithBytes:headerPacket length: AUDIO_BUFFER_PACKET_HEADER_SIZE + packetBytesFilled + packetDescriptionsBytesFilled];        

    NSLog(@"sending packet number %lu to all peers", packetNumber);
    NSError *error;    
    if (![_session sendDataToAllPeers:completePacket withDataMode:GKSendDataReliable error:&error])   {
        NSLog(@"Error sending data to clients: %@", error);
    }   

    Packet *packet = [Packet packetWithData:completePacket];

    // reset packet 
    packetBytesFilled = 0;
    packetDescriptionsBytesFilled = 0;

    packetNumber++;
    free(headerPacket);    
    //  free(packet); free(packetDescriptions);
    return YES;

}

- (char *)encapsulatePacketDescription:(AudioStreamPacketDescription)inPacketDescription
                          mStartOffset:(SInt64)mStartOffset
{
    // take out 32bytes b/c for mStartOffset we are using a 32 bit integer, not 64
    char * packetDescription = (char *)malloc(AUDIO_STREAM_PACK_DESC_SIZE);

    appendInt32(packetDescription, (UInt32)mStartOffset, 0);
    appendInt32(packetDescription, inPacketDescription.mVariableFramesInPacket, 4);
    appendInt32(packetDescription, inPacketDescription.mDataByteSize,8);    

    return packetDescription;
} 
```

接收数据：

```
- (void)receiveData:(NSData *)data fromPeer:(NSString *)peerID inSession:(GKSession *)session context:(void *)context
{

    Packet *packet = [Packet packetWithData:data];
    if (packet == nil)
    {
         NSLog(@"Invalid packet: %@", data);
        return;
    }

    Player *player = [self playerWithPeerID:peerID];

    if (player != nil)
    {
        player.receivedResponse = YES;  // this is the new bit
    } else {
        Player *player = [[Player alloc] init];
        player.peerID = peerID;
        [_players setObject:player forKey:player.peerID];
    }

    if (self.isServer)
    {
        [Logger Log:@"SERVER: we just received packet"];   
        [self serverReceivedPacket:packet fromPlayer:player];

    }
    else
        [self clientReceivedPacket:packet];
} 
```

**笔记：**

1.  有很多网络细节我没有在这里介绍（即，在接收数据部分。我使用了很多定制的对象，但没有扩展它们的定义）。我没有，因为解释所有这些超出了关于 SO 的一个答案的范围。但是，您可以遵循 Ray Wenderlich 的[优秀教程](http://www.raywenderlich.com/12735/how-to-make-a-simple-playing-card-game-with-multiplayer-and-bluetooth-part-1)。他花时间解释网络原理，我上面使用的架构几乎是逐字从他那里得到的。但是有一个问题（见下一点）

2.  根据您的项目，GKSession 可能不适合（特别是如果您的项目是实时的，或者如果您需要同时连接 2-3 台以上的设备）它有很多[限制](https://stackoverflow.com/questions/11612732/iphone-p2p-is-ksession-unreliable-beyond-4-peers)。您将不得不深入挖掘并直接使用 Bonjour。[iPhone 酷项目](https://stackoverflow.com/questions/11612732/iphone-p2p-is-gksession-unreliable-beyond-4-peers)有一个很好的快速章节，提供了使用 Bonjour 服务的一个很好的例子。它并不像听起来那么可怕（苹果文档在这个主题上有点霸道）。

3.  我注意到您使用 GCD 进行多线程处理。同样，如果您正在处理实时，那么您不想使用为您完成繁重工作的高级框架（GCD 就是其中之一）。有关此主题的更多信息，请阅读这篇出色的[文章](http://www.rossbencina.com/code/real-time-audio-programming-101-time-waits-for-nothing)。[还可以在此](https://stackoverflow.com/a/12454761/766570)答案的评论中阅读我和[贾斯汀](https://stackoverflow.com/users/191596/justin)之间的长时间讨论。

4.  您可能想查看iOS 6 中引入的[MTAudioProcessingTap](http://chritto.wordpress.com/2013/01/07/processing-avplayers-audio-with-mtaudioprocessingtap/)。它可能会在处理 AVAsset 时为您节省一些麻烦。我没有测试这些东西。它是在我完成所有工作后出现的。

5.  最后但并非最不重要的一点是，您可能需要查看[学习核心有声](https://rads.stackoverflow.com/amzn/click/com/0321636848)读物。这是关于这个主题的广泛认可的参考。我记得在你问这个问题的时候，我和你一样被困住了。核心音频很重，需要时间才能融入。所以只会给你指点。您将不得不花时间自己吸收这些材料，然后您将弄清楚事情是如何进行的。祝你好运！

# php - 在类方法和类中保存静态实例有区别吗

> ID：14687965
> 
> 赞同：3
> 
> 时间：2013-02-04T13:39:01.903
> 
> 标签：php, singleton

使用单例模式时。在类中保存静态实例和在返回实例的方法中保存有什么区别吗？

例子：在课堂上。

```
class cExampleA {
    static $mInstance;

    protected function __construct() {
        /* Protected so only the class can instantiate. */
    }

    static public function GetInstance() {
        return (is_object(self::$mInstance) ? self::$mInstance : self::$mInstance = new self());
    }
} 
```

在返回方法内部。

```
class cExampleB {
    protected function __construct() {
        /* Protected so only the class can instantiate. */
    }

    static public function GetInstance() {
        static $smInstance;
        return (is_object($smInstance) ? $smInstance : $smInstance = new self());
    }
} 
```

附带说明一下，在示例中使用了有效的三元运算符（意​​味着它会导致问题），使用 is_object 而不是 isset 有什么好处/坏处吗？

更新：似乎唯一的区别是静态实例的范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:38:42.750

有趣的问题。在行为方面，据我所知，这两个示例之间没有任何区别（范围除外）。

PHP 是一种松散类型的编程语言，因此您甚至可以在示例 A 中一起省略类属性声明。使用松散类型的语言似乎总是有更多方法可以实现相同的目标！

真正的问题很快就变成了设计模式之一（在这种情况下是数据封装），以确保我们编写的代码遵循由比我聪明得多的人设计的约定！

在此示例中，类应*拥有*其属性并适当地设置该属性的范围（在本例中为私有）并提供逻辑访问器方法。

我会这样写：

```
class ExampleA
{
    static private $_instance = null;

    private function __construct(){}

    static public function getInstance()
    {
        if (!self::$_instance instanceof self) {
            self::$_instance = new self();
        }

        return self::$_instance;
    }
} 
```

如果要将变量包含在方法本身中，严格来说它不会是类属性。此外，您会失去一点易读性，即其他开发人员（不习惯示例 B 的设计模式）会寻找类属性声明，而不是挖掘类方法。

*   关于匈牙利符号的注释：[为什么我不应该使用“匈牙利符号”？](https://stackoverflow.com/questions/111933/why-shouldnt-i-use-hungarian-notation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:58:44.370

> 在类中保存静态实例和在返回实例的方法中保存有什么区别吗？

不，功能上没有区别，如果您将静态实例属性的可见性修改为受保护或私有：

```
class cExampleA {
    protected static $instance = null;
    // ...
} 
```

*顺便说一句，不要使用像`$mInstance`;这样的符号。现在你不需要那些拐杖*

另外，看看您如何将构造函数设置为受保护的可见性，我假设您希望以后能够扩展该类？在这种情况下，您需要更改`getInstance()`方法：

```
public final static function GetInstance() 
{
    if (self::$instance === null) {
        self::$instance = new static;
    }
    return self::$instance;
} 
```

否则，您的构造函数应该只是私有的，以便您可以`new self;`再次使用。

# unicode - PostKbdMessage 用于 Windows Mobile 中的 å 字符？

> ID：14687966
> 
> 赞同：1
> 
> 时间：2013-02-04T13:39:10.560
> 
> 标签：unicode, windows-mobile

我正在尽力模拟键盘输入以在 windows mobile 上获取 å 和 Å。

不幸的是，WM6 不支持 KEYEVENTF_UNICODE，所以我的挑战开始了。

我已经尝试过 SendInput、keybd_event、PostMessage、SendMessage 和 PostKeybdMessage。我的尝试都没有奏效。问题是大多数 API 只接受 VK_ 值，而上述字符没有 VK_ 值。使用 PostKeybdMessage 创建 æ 和 ø 工作正常，但不适用于 å。

这是最有效的代码：

```
// http://symbolcodes.tlt.psu.edu/accents/codealt.html
BOOL PostRawVKey( UINT vKey, UINT flag )
{
    KEY_STATE_FLAGS kstate[1];
    UINT charbuff[1];
    BOOL bReturn = FALSE;
    HWND hwnd = (HWND)-1;

   switch (flag)
   {
      case VK_SHIFT:
         kstate   [0]   = KeyShiftAnyShiftFlag;
         break;
      case VK_CONTROL:
         kstate   [0]   = KeyShiftAnyCtrlFlag;
         break;
      case VK_MENU://ALT
         kstate   [0]   = KeyShiftAnyAltFlag;
         break;
      case KeyShiftDeadFlag:
          kstate[0] = KeyShiftDeadFlag;
      default:
         kstate   [0]   = KeyStateDownFlag;
         break;
   }

   switch (vKey)
   {
      case VK_RETURN:
         charbuff [0]   = 0x0D;
         break;
      case VK_TAB:
         charbuff [0]   = 0x09;
         break;
      case VK_UP:
         charbuff [0]   = 0x26;
         break;
      case VK_DOWN:
         charbuff [0]   = 0x28;
         break;
      default:
        charbuff [0]    = vKey;
         break;
   }

  if(PostKeybdMessage( hwnd, vKey, kstate[0], 1, &kstate[0], &charbuff[0]) )
  {
      bReturn = TRUE;
//      keybd_event(0,0,m_dwUserDefinedKeySound,0);
  }
  return bReturn; 
}
...
PostRawVKey(L'ä', 0);
PostRawVKey(L'æ', 0);   //  æ=0230 Æ=0198
PostRawVKey(L'°', KeyShiftDeadFlag);
PostRawVKey(L'a', 0);
PostRawVKey(L'ø', 0);   //  ø=0248 Ø=0216
PostRawVKey(L'å', 0);   //  å=0229 or 134, Å=0197   //not OK
... 
```

这就是没有任何å的结果：

![没有å输入](../Images/0590fd6bc805d614b66661306db4f4c7.png)

我也尝试使用 keybd_event 并模拟 Alt+134，没有成功。

查看按下软键盘上的符号时发出的键盘消息，我看到：

![点击 å 的关键信息](../Images/504cf98a7fbb581c8a2c250d606ed7f9.png)

```
msg     wParam   lParam
KeyDown VK_CLEAR 0x00000001
CHAR    å 0xe5   0x00000001
KeyUp   VK_CLEAR 0xc0000001 
```

所以我也试过

```
SendMessage(hwnd, WM_KEYDOWN, VK_CLEAR, 0x00000001);
SendMessage(hwnd, WM_CHAR, 0x000000e5, 0x00000001);
SendMessage(hwnd, WM_KEYUP, VK_CLEAR, 0xc0000001); 
```

任何人都可以提供一个工作示例代码（c/c++）吗？

由于 Microsoft 键盘可以发出 å，我该怎么做？

背景是一个键盘重映射器，它将一些键重新映射到丹麦字符。

# php - 无需认证即可拉取 Soundcloud 曲目列表

> ID：14687968
> 
> 赞同：3
> 
> 时间：2013-02-04T13:39:14.893
> 
> 标签：php, api, soundcloud

我想提取某个用户跟踪列表并显示它。现在我正在执行此操作，但我总是需要连接（通过按下链接）是否有一种方法可以消除此步骤或始终进行身份验证。我已经在 soundcloud api 上重新搜索了这个但没有成功，我不明白为什么在访问公共数据时需要身份验证。

```
<?php
session_start();
//session_destroy();
require 'Soundcloud.php';

$soundcloud = new Services_Soundcloud('MY_CLIENT_ID', 'MY_SECRET', 'http://www.ericmlt.com/MarcKane/soundcloud/');
$soundcloud->setDevelopment(FALSE);

$authURL = $soundcloud->getAuthorizeUrl();

echo "<a href='$authURL'>Connect to Soundcloud</a>";

//Attempt to get token from Session first
//Set the token otherwise..

try {

    $accessToken = $soundcloud->accessToken($_GET['code']);
    if(!isset($_SESSION['token'])){
    $_SESSION['token'] = $accessToken['access_token'] ;
}  else {
    $soundcloud->setAccessToken($_SESSION['token']);
}
} catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
    exit($e->getMessage());
}
try {
    $tracks = json_decode($soundcloud->get('tracks', array('user_id' => '857348')), TRUE);
} catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
    exit($e->getMessage());
}

foreach ($tracks as $track){
    $trackID = $track['id'];
    echo '<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F'.$trackID.'"></iframe>';
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T14:59:20.697

您可以像这样创建一个曲目列表：

```
echo '<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http://api.soundcloud.com/users/857348"></iframe>'; 
```

否则，如果您需要检索曲目列表并为每个曲目创建小部件（不是真的推荐），您可以使用这个（注意我写的 PHP 不多，但想法是向以下 URL 发出 HTTP GET） ：

```
$tracks_json = file_get_contents('http://api.soundcloud.com/users/857348/tracks.json?client_id=YOUR_CLIENT_ID');
$tracks = json_decode($tracks_json);
foreach ($tracks as $track){
  $trackID = $track->id;
  echo '<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F'.$trackID.'"></iframe>';
} 
```

您真的不需要在这里进行身份验证。

# javascript - 如何在 div 中显示带有 src 文件的 Javascript 标记

> ID：14687969
> 
> 赞同：0
> 
> 时间：2013-02-04T13:39:17.937
> 
> 标签：javascript, jquery, html

我需要`div`在`body`内容的 a 中显示一个 javascript 引用吗？

如何在页面加载后动态地在`body`部件中插入 JS 文件，而不是在 中？`head`

页面加载后的 HTML 如下所示：

```
<div class="cls1" id="id1">
    <script src="url" ></script>
</div> 
```

我在尝试，

```
$("#id1").append("<script src="www.example.com/ex.js" ></script>"); 
```

或者

```
document.write("<script src="www.example.com/ex.js" ></script>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T13:41:15.400

`.text`将安全地添加它（转义 html），同时`.append`或`.html`实际修改 dom 并执行您的 javascript 文件

```
$("#id1").text('<script src="www.example.com/ex.js" ></script>'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T13:43:43.150

您在 append 中使用双引号，并为 src 'attribute' 使用双引号。您必须对 src 'attribute' 使用单引号。

试试这个代码：

```
$("#id1").append("<script src='www.example.com/ex.js' ></script>"); 
```

或者

```
document.write("<script src='www.example.com/ex.js'></script>"); 
```

# powershell-3.0 - PowerShell ISE 打开多个选项卡

> ID：14687974
> 
> 赞同：2
> 
> 时间：2013-02-04T13:39:30.327
> 
> 标签：powershell-3.0, powershell-ise

我是 PowerShell 新手，刚刚发现 PowerShell ISE (3.0)。以前我为 cmd-windows 使用了三个快捷方式：

1.  一种用于 jboss 运行服务器脚本
2.  一种用于需要 JDK6 的构建脚本
3.  一种用于需要 JDK7 的构建脚本

这些快捷方式将以正确的路径打开窗口并设置 JAVA_HOME。

现在我想创建一个快捷方式，可以在 PowerShell ISE 中以适当的名称打开相应的选项卡。我在想我可以在脚本中操作 $psISE.PowerShellTabs，但我只能创建新选项卡并更改名称，我无法随意更改目录或变量。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-13T13:44:49.527

Mark 提供的方法并不总是正常工作。您需要等待并检查您的选项卡是否准备就绪，而不是假设任意延迟。

```
$NewTab = $psISE.PowerShellTabs.Add()
$NewTab.DisplayName = "NewTab"

While (-not $NewTab.CanInvoke) {
    Start-Sleep -m 100
}

$NewTab.Invoke({cd C:\ ; cls}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T20:37:44.973

您可以使用调用方法来运行代码。

```
$NewTab = $psISE.PowerShellTabs.Add()
$NewTab.DisplayName = "NewTab"
sleep -m 160
$NewTab.Invoke({cd C:\ ; cls}) 
```

这将创建一个新选项卡，将其命名为 NewTab，等待它打开，将目录更改为 C:\ 并清除输出。

# facebook - 2013 年 3 月 Facebook 消息迁移

> ID：14687976
> 
> 赞同：0
> 
> 时间：2013-02-04T13:39:36.393
> 
> 标签：facebook, facebook-graph-api, facebook-fql

开发人员路线图（[https://developers.facebook.com/roadmap/#march-2013](https://developers.facebook.com/roadmap/#march-2013)）提到“没有用户会话就不能访问邮箱 FQL 表”，我无法弄清楚“用户会话”是什么意思。

如果用户注销，API 调用会不起作用吗？API 调用需要进行哪些更改（如果有）？除了 access_token 之外，我们是否必须传递其他参数？

他们提到 FQL 表将无法访问。这是否意味着图形 API 端点将继续工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:38:54.977

我有同样的问题，对此有一些更清楚的说明将不胜感激。

我为我的应用启用了 3 月 6 日的更改，它似乎仍然可以访问邮箱。但也许我正在测试的用户自从我今天为他启用了我的应用程序后就有了一个会话？我的应用程序获得了有效期为 60 天的令牌，这是否构成会话？

Graph API 的文档表明需要用户会话。

# ajax - Twitter引导选项卡“选项卡”方法在ajax加载某些页面内容后不起作用

> ID：14687981
> 
> 赞同：0
> 
> 时间：2013-02-04T13:40:14.283
> 
> 标签：ajax, jquery, twitter-bootstrap, tabs

我在工作中使用 twitter bootstrap。"tab" 方法（即；`$("a element under tab li").tab("show")`）完美地切换到由 jQuery 选择器指定的新选项卡，直到完成 ajax 加载。当我使用创建新选项卡`jQuery append`时，加载其窗格内容`jQuery load`并尝试使用 tab("show") 切换到该新选项卡，它给出错误元素没有方法`tab`

更新

```
 <div class="tabbable">
      <ul class="nav nav-tabs" id="tab-set">
        <li class="active"><a data-toggle="tab" href="#tab1"> tab 1</a></li>
        <li><a data-toggle="tab" href="#tab2">tab 2</a></li>
        <li><a data-toggle="tab" href="#tab3">tab 3</a></li>
        <li><a data-toggle="tab" class="ajax" href="test.html">tab 4 - ajax</a></li>
      </ul>
      <div class="tab-content" id="tab-content">
        <div id="tab1" class="tab-pane active"> tab 1 content </div>
        <div id="tab2" class="tab-pane"> tab 2 content </div>
        <div id="tab3" class="tab-pane"> tab 3 content </div>
      </div>
    </div> 
```

这是通过 ajax 添加新标签的 javascript 代码

```
$("#tab-set").append("<li id='"+tabType+"'><a href='#" + tabType +
       "-pane' data-toggle=\"tab\"> " + tabName + "</a></li>");

$("#tab-content").append("<div class=\"tab-pane\" id=\"" +tabType + "-pane\"></div>");
$("#" + tabType + "-pane").load(tabUrl); 
```

添加新标签后，我尝试使用切换到该标签

```
$("#" + tabType + " a").last().tab("show"); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:53:03.090

在这条线上：

```
$("#tab-content").append("<div class=\"tab-pane\" id=\"" +tabType + "-pane\"></div>"); 
```

你有#tab-content，但你的div实际上有一个tab-content类，而不是一个id。所以它需要是：

```
$(".tab-content").append("<div class=\"tab-pane\" id=\"" +tabType + "-pane\"></div>"); 
```

我通过为 tabType、tabName 和 tabUrl 创建变量来测试您的代码，它适用于我上面提到的微小更改。但是我无法得到与您相同的错误（元素没有方法选项卡），所以如果这仍然对您不起作用，那么还有其他事情发生，您将需要发布更多代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T02:58:49.377

是的，我现在遇到了麻烦。

我正在使用 na 加载页面`$("#" + tabType + "-pane").load(tabUrl);`，该页面也有 html、head、body 元素，并且它还在其中加载 jquery。这就产生了问题。它与[此处给出的问题有关](https://stackoverflow.com/questions/4787457/javascript-doesnt-execute-in-safari-when-loading-entire-page-via-jquerys-load)

现在我更改了加载页面的内容，它只加载所需的基本内部元素，没有 html、head、script、body 等标签。

这让我头疼了一整天。感谢上帝，我终于修好了。

编辑

甚至不需要删除所有元素。只需要注意不要从该加载页面再次加载 jquery（通过 $("#" + tabType + "-pane").load(tabUrl); 加载）。

# java - ReadWriteLock 等待对象被设置

> ID：14687983
> 
> 赞同：2
> 
> 时间：2013-02-04T13:40:21.570
> 
> 标签：java, concurrency, locking

`DependingService`依赖于`service`异步和动态注入的对象`DependingService.setService(Object)`。如果在设置对象`DependingService.doSomething()`之前`service`调用，那么线程应该等待 5 秒`service`才能可用。

如何进行正确有效的锁定？我的第一种方法如下所示：

```
import java.util.concurrent.TimeUnit;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.ReadWriteLock;
import java.util.concurrent.locks.ReentrantReadWriteLock;

public class DependingService {

    private final ReadWriteLock rwLock = new ReentrantReadWriteLock();
    private final Condition condition = rwLock.writeLock().newCondition();
    private Object service;

    // service injected dynamically by container
    public void setService(final Object service) {
        rwLock.writeLock().lock();
        try {
            this.service = service;
            System.out.println("Signalling");
            condition.signalAll();
        } finally {
            rwLock.writeLock().unlock();
        }
    }

    public void doSomething() {
        rwLock.readLock().lock();
        try {
            if (service == null) {
                // we can't upgrade to write lock, so release read lock first
                rwLock.readLock().unlock();
                rwLock.writeLock().lock();
                try {
                    if (service == null) {
                        System.out.println("Waiting fo 5 seconds");
                        condition.await(5, TimeUnit.SECONDS);
                    }
                } catch (final InterruptedException e) {
                    e.printStackTrace();
                } finally {
                    // downgrade to read lock
                    rwLock.readLock().lock();
                    rwLock.writeLock().unlock();
                }
                if (service == null) {
                    throw new RuntimeException("service is null");
                }
            }

            // use the service
            System.out.println(service.toString());
        } finally {
            rwLock.readLock().unlock();
        }
    }

} 
```

**编辑：** 请注意，`DependingService.setService(Object)`可能随时多次设置为 null 或任何其他对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T14:45:29.790

我想不出一种简单的方法来使用高级 API 构建这种行为。请参阅下面使用等待/通知模式的建议。要点：

*   `service`是`volatile`为了确保可见性而不必锁定阅读
*   `service`总是在本地复制，`doSomething`以防止您检查服务不为空，然后调用`service.toString()`并获取 NPE，因为`setService(null);`同时已被调用。
*   在每个 while 循环中调整等待时间，以确保您等待的时间不超过 5 秒。
*   它使用基本同步，但仅当 service 为 null 时 - 在 service 不为 null 的基本情况下，在`doSomething`. 如果您`setService`每毫秒调用多次，您可能会遇到性能问题。

注意：未测试。

```
public class DependingService {

    private final Object lock = new Object();
    private volatile Object service;

    // service injected dynamically by container
    public void setService(final Object service) {
        this.service = service;
        synchronized(lock) {
            lock.notifyAll();
        }
    }

    public void doSomething() throws InterruptedException {
        //make a local copy to avoid problems due to service becoming
        //null in the middle of the method
        Object localService = service; 
        if (localService == null ) {
            long end = System.nanoTime() + TimeUnit.NANOSECONDS.convert(5, TimeUnit.SECONDS);
            synchronized(lock) {
                while ((localService = service) == null) {
                    long waitNanos = end - System.nanoTime();
                    if (waitNanos < 0) break;
                    lock.wait(waitNanos / 1000000);
                }
            }
        }
        if (localService == null) {
            throw new RuntimeException("timeout: service is still null");
        }
        // use the service
        System.out.println(localService.toString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:45:00.987

也许像这样使用 CountDownLatch 会更好：

```
public class DependingService {
    private final CountDownLatch serviceLatch = new CountDownLatch (1);
    private Object service;

    public void setService (final Object service) 
    {
        this.service = service;
        serviceLatch.countDown ();
    }

    public void doSomething () throws InterruptedException
    {
        if (!serviceLatch.await (5, TimeUnit.SECONDS))
            throw new RuntimeException ("Service is still null");

        // Service is not null here
        System.out.println (service);
    }
} 
```

# spring - ibatis 在插入语句中选择

> ID：14687986
> 
> 赞同：0
> 
> 时间：2013-02-04T13:40:26.837
> 
> 标签：spring, spring-mvc, db2, dao, ibatis

我有一个选择查询，它将参数设置为插入查询。

使用的数据库：DB2

```
insert into table_name
(col1,col2,col3,col4)
(select col1,col2,col3,col4 from table_name_2) 
```

如果 select 返回的 cols 之一为 null，则上述语句在 ibatis 中失败。我使用 websphere 并启用了跟踪日志，我使用 qtoad 在跟踪日志中运行查询，它运行良好。

我哪里错了？

请帮忙。

实际查询：

```
INSERT INTO DB2TUNT.WKSET_VEND_ITEM (WKSET_I,WKSET_ITEM_I,VEND_I,GMS_VEND_I,VOP_TYPE_C,MFR_STYL_T)      
(SELECT 7725263,VITEM.DIR_ITEM_I,DIR.PRIM_VEND_I,VITEM.GMS_VEND_I,VITEM.VOP_TYPE_C,VITEM.MFR_STYL_T) 
```

错误：应用参数映射时发生错误。检查语句（更新失败）。

看起来这种情况只发生在 db2 上。有谁能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T08:20:44.540

在您的插入中缺少 values 关键字。

```
INSERT INTO table_name VALUES (...) 
```

# java - 为嵌套的 JSON 对象创建 GWT 覆盖

> ID：14687988
> 
> 赞同：0
> 
> 时间：2013-02-04T13:40:34.617
> 
> 标签：java, javascript, json, gwt, overlay

我刚刚发现了这个很棒的网站，我允许自己用以下问题来打扰您：

如何从内部（嵌套）JSON 对象访问字段，这里从 JSON 对象“flights”中命名为“flightLegs”？

为了通过 GWT 应用程序从外部 API（此处为 flightstats）访问 JSON 对象，我使用以下方法：

这是 JSON 对象（我通过 api 正确接收到它，我也可以在主页上查看它）：

```
 "flights": [
{
"departureAirportFsCode": "ZRH",
"arrivalAirportFsCode": "NRT",
"departureDateFrom": "2013-01-28",
"departureDateTo": "2013-03-30",
"departureDaysOfWeek": [
 1,
 2,
 3,
 4,
 5,
 6,
 7
 ],
"arrivalDateAdjustment": 1,
"departureTime": "13:00:00.000",
"arrivalTime": "08:55:00.000",
"distanceMiles": 5969,
"flightDurationMinutes": 715,
"layoverDurationMinutes": 0,
"flightType": "NON_STOP",
"serviceType": "PASSENGER_ONLY",
"online": true,
"flightLegs": [
 {
 "departureAirportFsCode": "MUC",
 "arrivalAirportFsCode": "NRT",
 "departureTime": "13:00:00.000",
 "arrivalTime": "08:55:00.000",
 "departureDateAdjustment": 0,
 "arrivalDateAdjustment": 1,
 "arrivalTerminal": "1",
 "carrierFsCode": "LX",
 "flightNumber": "160",
 "codeshare": false,
 "equipmentCodes": [
  "343"
 ],
 "distanceMiles": 5969,
 "flightDurationMinutes": 715,
 "layoverDurationMinutes": 0
}
] 
```

例如，我可以使用以下代码为外部 JSON 对象“航班”的所有字段创建叠加层：

```
public final native String getDepartureFromAirport() /*-{
    return this.departureAirportFsCode;
}-*/; 
```

这也很完美。

但我还需要访问 Flightnumber，即来自“flightLegs”JSON 对象的字段“flightnumber”。我试过：

```
public final native String getDepartureFromAirport() /*-{
    return this.flightLegs.flightNumber;
}-*/; 
```

但这不起作用，它只会给我留下一个空对象或空对象（根据错误消息）。所以我很不知道如何访问内部 JSON 对象。

老实说，任何帮助将不胜感激！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:43:59.080

`flightLegs`是一个包含对象的数组，所以它是`this.flightLegs[0].flightNumber`.

# ios - 权限 添加日历事件 iOS

> ID：14687991
> 
> 赞同：1
> 
> 时间：2013-02-04T13:40:38.563
> 
> 标签：ios, privacy, eventkit

没有权限时如何显示错误？（例如“你不给我们在你的日历上写字的权限。”）。

这是我的代码：

```
if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")) {

EKEventStore *es = [[EKEventStore alloc] init];
[es requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
    /* This code will run when uses has made his/her choice */
}];
}
        NSDateFormatter *   dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"ddMMyy"];

        NSString *fechainicio = datum;
        NSString *fechafin = datum;
        titel = [NSString stringWithFormat:@"%@ (%@)", titel, plaatslabel.text];

        NSDate * date = [[NSDate alloc] init];
        date = [dateFormatter dateFromString:fechainicio];
        NSDate * date2 = [[NSDate alloc] init];
        date2 = [dateFormatter dateFromString:fechafin];

        EKEventStore *eventStore = [[EKEventStore alloc] init];

        EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
        event.title     = @"Optreden Ronald Goedemondt";
        event.location = titel;
        event.allDay = YES;

        event.startDate = date;
        event.endDate   = date2;

        [event setCalendar:[eventStore defaultCalendarForNewEvents]];
        NSError *err;
        [eventStore saveEvent:event span:EKSpanThisEvent error:&err];

WBSuccessNoticeView *notice = [WBSuccessNoticeView successNoticeInView:self.view title:@"Show geplaatst in uw agenda."];
[notice show]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T13:51:49.977

`granted`将是`YES`如果访问已被授予或`NO`以其他方式。
此外，您应该确保仅`-requestAccessToEntityType:completion:`在必要时调用：

```
EKEventStore *es = [[EKEventStore alloc] init];
EKAuthorizationStatus authorizationStatus = [EKEventStore authorizationStatusForEntityType:EKEntityTypeEvent];
BOOL needsToRequestAccessToEventStore = (authorizationStatus == EKAuthorizationStatusNotDetermined);

if (needsToRequestAccessToEventStore) {
   [es requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
        if (granted) {
            // Access granted
        } else {
            // Denied
        }
    }];
} else {
    BOOL granted = (authorizationStatus == EKAuthorizationStatusAuthorized);
    if (granted) {
        // Access granted
    } else {
        // Denied
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T13:45:44.443

这是我使用的代码。奇迹般有效：

```
-(void)askPermissionForCalendarAccess {
    EKEventStore *eventStore = [[EKEventStore alloc] init];
    /* iOS 6 requires the user grant your application access to the Event Stores */
    if ([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)])
    {
        /* iOS Settings > Privacy > Calendars > MY APP > ENABLE | DISABLE */
        [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {

            if (granted) {

                NSLog(@"granted");
                //This method checks to make sure the calendar I want exists, then move on from there...
                [self checkForCalendar];

            } else {

                //put error popup code here.
                NSLog(@"denied");
                [self performSelectorOnMainThread:@selector(showDeniedAccessAlert) withObject:nil waitUntilDone:NO];
            }
        }];
    }
} 
```

# laravel - Laravel 4：如何运行原始 SQL？

> ID：14687993
> 
> 赞同：85
> 
> 时间：2013-02-04T13:40:49.537
> 
> 标签：laravel, laravel-4

我想在 Laravel 4 中重命名一个表，但不知道该怎么做。

SQL 是`alter table photos rename to images`. 如果有 Eloquent 解决方案，我也想知道如何运行原始 SQL，因为有时别无选择。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-02-04T13:49:55.987

在[Laravel 4 手册](https://laravel.com/docs/4.2/database)中- 它谈到了执行如下原始命令：

```
DB::select(DB::raw('RENAME TABLE photos TO images')); 
```

**编辑：**我刚刚在[Laravel 4 文档](http://laravel.com/docs/4.2/database#running-queries)中发现这可能更好：

```
DB::statement('drop table users'); 
```

**更新：**在 Laravel 4.1（也许是 4.0 - 我不确定）中 - 你也可以对原始 Where 查询执行此操作：

```
$users = User::whereRaw('age > ? and votes = 100', array(25))->get(); 
```

**进一步更新**如果您特别希望重命名表 - 有一个模式命令 - 请参阅下面的 Mike 的答案。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-08T21:11:38.783

实际上，Laravel 4 在[Illuminate/Database/Schema/Builder.php](https://github.com/laravel/framework/blob/master/src/Illuminate/Database/Schema/Builder.php)中确实有一个表重命名功能，目前只是没有记录：`Schema::rename($from, $to);`.

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-07-26T08:46:07.767

您也可以`DB::unprepared`用于`ALTER TABLE`查询。

`DB::unprepared`旨在用于类似的查询`CREATE TRIGGER`。但本质上它直接执行原始 sql 查询。（不使用 PDO`prepared`语句）

[https://github.com/laravel/framework/pull/54](https://github.com/laravel/framework/pull/54)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-05-23T15:45:31.377

到目前为止，我发现最好的方法是绕过 Laravel 并直接使用 Pdo 对象执行查询。

**例子**

```
DB::connection()->getPdo()->exec( $sql ); 
```

我通常发现一次性查询更快、更高效，只需打开我的数据库查询工具并输入带有完整语法检查的查询，然后直接执行它。

如果您必须使用存储过程或需要使用任何数据库函数，这将变得至关重要

**示例 2** 将 created_at 设置为您需要的值，并侧面浸泡任何碳质

```
$sql = 'UPDATE my_table SET updated_at = FROM_UNIXTIME(nonce) WHERE id = ' . strval($this->id);
DB::statement($sql); 
```

我发现这在控制器中有效，但在迁移中无效

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-09-30T16:30:44.153

在 Laravel 4 中重命名表的公认方法是使用 Schema 构建器。所以你想做：

```
Schema::rename('photos', 'images'); 
```

来自[http://laravel.com/docs/4.2/schema#creating-and-dropping-tables](http://laravel.com/docs/4.2/schema#creating-and-dropping-tables)

如果你真的想自己写一个原始的 SQL 查询，你总是可以这样做：

```
DB::statement('alter table photos rename to images'); 
```

注意：Laravel 的 DB 类也支持运行原始 SQL `select`、`insert`、`update`和`delete`查询，例如：

```
$users = DB::select('select id, name from users'); 
```

有关详细信息，请参阅[http://laravel.com/docs/4.2/database#running-queries](http://laravel.com/docs/4.2/database#running-queries)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-01-12T23:14:28.467

这是我如何运行 RAW SELECT、获取结果和访问值的简化示例。

```
$res = DB::select('
        select count(id) as c
        from prices p 
        where p.type in (2,3)
    ');
    if ($res[0]->c > 10)
    {
        throw new Exception('WOW');
    } 
```

如果您只想运行没有返回结果的 sql 脚本，请使用此

```
DB::statement('ALTER TABLE products MODIFY COLUMN physical tinyint(1) AFTER points;'); 
```

在 laravel 5.1 中测试

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-20T11:43:00.067

**[Laravel raw sql](https://codeem.co/laravel-raw-sql-query/) - 插入查询：**

让我们创建一个获取链接以插入可通过 url 访问的数据。所以我们的链接名称是“insertintodb”，在该函数中我们使用 db class 。db 类帮助我们与数据库交互。我们使用 db 类静态函数 insert 。在插入函数中，我们将编写 PDO 查询以在数据库中插入数据。在下面的查询中，我们将在帖子表中插入“我的标题”和“我的内容”作为数据。

将以下代码放入路由目录内的 web.php 文件中：

```
Route::get('/insertintodb',function(){
DB::insert('insert into posts(title,content) values (?,?)',['my title','my content']);
}); 
```

现在从下面的浏览器链接中触发插入查询：

```
localhost/yourprojectname/insertintodb 
```

您可以通过进入数据库表来查看上述插入查询的输出。您将找到一条 id 为 1 的记录。

**Laravel raw sql – 读取查询：**

现在，让我们创建一个获取链接来读取数据，该链接可通过 url 访问。所以我们的链接名称是'readfromdb'。我们使用 db 类静态函数读取。在 read 函数中，我们将编写 PDO 查询以从数据库中读取数据。在下面的查询中，我们将从帖子表中读取 id 为“1”的数据。

将以下代码放入路由目录内的 web.php 文件中：

```
Route::get('/readfromdb',function() {
    $result =  DB::select('select * from posts where id = ?', [1]);
    var_dump($result);
}); 
```

现在从下面的浏览器链接读取上面的查询：

```
localhost/yourprojectname/readfromdb 
```