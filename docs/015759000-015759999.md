# StackOverflow 问答 15759000-15759999

# css - CSS 编译/压缩和 Source Maps v3

> ID：15759000
> 
> 赞同：4
> 
> 时间：2013-04-02T08:00:58.180
> 
> 标签：css, node.js, minify, source-maps

有谁知道可以压缩/缩小/组合我的 CSS 文件并生成可与 Chrome 一起使用的有效 v3 SourceMap 的工具？最好是 NodeJS 工具。

我所知道的 Node 压缩器是 clean-css、csso、css-condense（使用 css-parse，但在 bootstrap.css 上会阻塞）和 cssmin（来自 YUI 的端口，但没有 CLI）。这些似乎都没有源映射支持。

我认为 SASS (Ruby) 和可能的 Less.js 正在实现，但这些都是预处理器工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T06:52:28.943

[mincer-sourcemap](https://github.com/mklabs/mincer-sourcemap)似乎能够生成 CSS 源图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T06:15:51.827

[mincer](https://github.com/nodeca/mincer) assets pipeline 1.0.0+ 版本带有源映射支持。那是 ruby​​ 到 node.js 的 sprockets 端口。引擎的最新状态在[wiki](https://github.com/nodeca/mincer/wiki)上。

对于 CSS，您现在可以使用[LESS](http://lesscss.org/) + [AutoPrefixer](https://github.com/ai/autoprefixer) + [CssWring](https://github.com/hail2u/node-csswring)链。[SASS](https://github.com/andrew/node-sass)也有 sourcemaps 支持，但它还没有被 mincer 采用。

在最近的将来， [Stylus](https://github.com/learnboost/stylus)也应该添加源地图支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-11T21:05:02.700

我使用[https://ajaxmin.codeplex.com/](https://ajaxmin.codeplex.com/)效果很好，也在引导程序上。

它可以缩小 JS 和 CSS。处理源映射和文件捆绑。

有很多选项，但我使用一些 xml 文件来定义应该缩小的内容和应该捆绑的内容。您也可以只使用命令行。

我的用例是编译时创建。如果您是运行时创建，那么您应该使用其他东西。

# java - 复杂的将行转换为列数组

> ID：15759002
> 
> 赞同：0
> 
> 时间：2013-04-02T08:01:06.247
> 
> 标签：java, arrays, loops, multidimensional-array

我得到了这些代码：

```
String[] s1={"Samsung Smarphone","20MB"};
            String[] s11={"Apple Smarphone","25MB"};

            String[] s2={"Samsung Smarphone","3 in"};
            String[] s22={"Apple Smarphone","6 in"};

            String[] s3={"Samsung Smarphone","3GB"};
            String[] s33={"Apple Smarphone","2 GB"};

            String[] s4={"Apple Smarphone","iphone1"};
            String[] s44={"Apple Smarphone","iphone2"};
            String[] s444={"Apple Smarphone","iphone3"};

            List<String[]> l1=new ArrayList<String[]>();
            l1.add(s1);
            l1.add(s11);

            List<String[]> l2=new ArrayList<String[]>();
            l2.add(s2);
            l2.add(s22);

            List<String[]> l3=new ArrayList<String[]>();
            l3.add(s3);
            l3.add(s33);

            List<String[]> l4=new ArrayList<String[]>();
            l4.add(s4);
            l4.add(s44);
            l4.add(s444);

            Vector<List<String[]>> myV=new Vector<List<String[]>>();
            myV.add(l1);
            myV.add(l2);
            myV.add(l3);
            myV.add(l4);

            List<String[]> resultL=new ArrayList<String[]>();

            String[] mainS={"Samsung Smarphone","Apple Smarphone","Apple Smarphone","Apple Smarphone"};
            for (int i=0; i<mainS.length; i++){

                String[] theRow=new String[myV.size()+1];

                for (int k=0; k<myV.size(); k++){
                    List<String[]> smallList=(List<String[]>)myV.elementAt(k);
                    String[][] small2DArr=new String[smallList.size()][2];
                    smallList.toArray(small2DArr);

                    String strMain=mainS[i];
                    int rows=small2DArr.length;

                    int cols=2;

                    for( int y=0; y<rows; y++)
                    {
                        for(int z=0; z<cols; z++){
                            String str=small2DArr[y][z];
                            if(strMain.equals(str))
                            {
                                theRow[0]=strMain;
                                theRow[k+1]=small2DArr[y][1];
                            }
                        }
                    }
                }
                resultL.add(theRow);
            }

            for(int u=0; u<resultL.size(); u++)
            {
                String[] myR=resultL.get(u);
                //int ddd=xxx.length;
                System.out.println("\n----------------\n");
                for (String s : myR)
                {
                    System.out.print(s +"\t");
                }

            } 
```

结果是：

```
Samsung Smarphone   20MB    3 in    3GB null    
----------------

Apple Smarphone 25MB    6 in    2 GB    iphone3 
----------------

Apple Smarphone 25MB    6 in    2 GB    iphone3 
----------------

Apple Smarphone 25MB    6 in    2 GB    iphone3 
```

上面的结果是不正确的。我想要这样的结果：

```
Samsung Smarphone   20MB    3 in    3GB null    
----------------

Apple Smarphone 25MB    6 in    2 GB    iphone1 
----------------

Apple Smarphone 25MB    6 in    2 GB    iphone2 
----------------

Apple Smarphone 25MB    6 in    2 GB    iphone3 
```

你能帮我修一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:29:02.590

这里的主要问题是平等检查，`if(strMain.equals(str))`. 由于所有三款智能手机都代表相同的公司名称，因此您会得到错误的值（以先到者为准）。
对于此类问题，最好不要根据公司名称（这里是苹果智能手机）进行检查。想想你将如何设计一个数据库。
如果您为相同的表示设计一个数据库，您永远不会使用公司名称作为您的主键，对吧？因为一家公司可以在市场上拥有多部手机。
我的建议使用 bean 而不是纯字符串。bean 包含公司名称和 id。覆盖bean的equals方法。像下面这样的东西，

```
class MyBean{
        private String company;
        private int id;
        public MyBean(int id, String company) {
            this.id = id;
            this.company = company;
        }

        @Override
        public boolean equals(Object obj) {
            return id == ((MyBean)obj).id;
        }

        @Override
        public String toString() {
            return company;
        }
    } 
```

这只是一个例子。您可以按照自己的算法进行均衡。

# jquery - 通过触发jQuery提交按钮提交表单不起作用

> ID：15759004
> 
> 赞同：0
> 
> 时间：2013-04-02T08:01:14.790
> 
> 标签：jquery, asp.net-mvc-3, form-submit

我有一个有表单的页面。我有一个 window.setTimeout 将调用触发提交按钮的函数。超时设置为 10 秒。但是，如果时间已过，则调用该函数但未提交表单。似乎提交按钮没有提交表单。请帮助如何使此功能工作。我希望如果调用“SubmitForm”函数，它将提交按钮而不单击提交按钮。下面是我的代码。

**HTML**

```
@model MVCViewState.Models.Product
<!DOCTYPE html>
<html>
<head>
    <title>Create</title>
    <script type="text/javascript">
        window.setTimeout(SubmitForm, 10000);
        function SubmitForm() {
            alert('called');
            $('#btnSubmit').submit();
        }
    </script>
</head>
<body>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
    @using (Html.BeginForm("Create", "Products", FormMethod.Post, new { id = "ProductForm" }))
    {
        @Html.ValidationSummary(true)
        <fieldset>
            <legend>Product</legend>

            <div class="editor-label">
                @Html.LabelFor(model => model.Name)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Name)
                @Html.ValidationMessageFor(model => model.Name)
            </div>

            <div class="editor-label">
                @Html.LabelFor(model => model.Description)
            </div>
            <div class="editor-field">
                @Html.EditorFor(model => model.Description)
                @Html.ValidationMessageFor(model => model.Description)
            </div>
            <p>
                <input type="submit" value="Create" id="btnSubmit"/>
            </p>
        </fieldset>
    }
    <div>
        @Html.ActionLink("Back to List", "Index")
    </div>
</body>
</html> 
```

**控制器**

// // 发布：/产品/创建

```
 [HttpPost]
    public ActionResult Create(Product product)
    {
        try
        {
            List<Product> products;
            if (Session["products"] != null) products = Session["products"] as List<Product>;
            else products = new List<Product>();
            if (products != null) products.Add(product);
            product.Id = products.Max(x => x.Id) + 1;
            Session["products"] = products;
            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:05:27.670

`#btnSubmit`是您的提交按钮，而不是您的表单。尝试提交按钮几乎没有意义。你可能的意思是：

```
$('#ProductForm').submit(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T08:40:02.477

尝试点击而不是提交。

```
$('#btnSubmit').click(); 
```

# asp.net - 存储在 MemoryStream 中的图像的裁剪中心

> ID：15759009
> 
> 赞同：2
> 
> 时间：2013-04-02T08:01:33.987
> 
> 标签：asp.net, image, bitmap, crop, memorystream

我有一个图像上传表单，它存储两种尺寸的图像：大图像和缩略图图像。

对于缩略图图像，我试图从中心裁剪图像并将大小重新调整为：30px x 30px。

这是我的代码：

```
 private static Bitmap ResizeImage(MemoryStream uploadStream, int maxWidth, int maxHeight)
    {
        Image img = Image.FromStream(uploadStream);

        double ratioX = (double)maxWidth / img.Width;
        double ratioY = (double)maxHeight / img.Height;
        double ratio = Math.Max(ratioX, ratioY);

        int newWidth = (int)(img.Width * ratio);
        int newHeight = (int)(img.Height * ratio);

        Bitmap resizedBitmap = new Bitmap(newWidth, newHeight);
        Graphics.FromImage(resizedBitmap).DrawImage(img, 0, 0, newWidth, newHeight);

        img.Dispose();

        return resizedBitmap;
    }

    private static Bitmap CropImageToCentre(MemoryStream uploadStream, int width, int height)
    {
        Image img = Image.FromStream(uploadStream);
        Bitmap resizedBitmap = new Bitmap(img); 

        int StartX = 0, StartY = 0;
        int EndX = img.Width, EndY = img.Height;
        bool Crop = false;

        if (img.Width > width)
        {
            int MidX = img.Width / 2;
            StartX = MidX - (width / 2);
            EndX = MidX + (width / 2);
            Crop = true;
        }

        if (img.Width > height)
        {
            int MidY = img.Height / 2;
            StartY = MidY - (height / 2);
            EndY = MidY + (height / 2);
            Crop = true;
        }

        if (Crop)
        {
            Size imgSize = new Size(width, height);
            resizedBitmap = new Bitmap(img, imgSize);
        }

        img.Dispose();

        return resizedBitmap;
    }

    public static Bitmap ResizeThumbnail(MemoryStream ms)
    {
        int thumbWidth = int.Parse(ConfigurationManager.AppSettings["thumbwidth"]);
        int thumbHeight = int.Parse(ConfigurationManager.AppSettings["thumbheight"]);

        return CropImageToCentre(BitmapToMemoryStream(ResizeImage(ms, thumbWidth, thumbHeight)), thumbWidth, thumbHeight);
    }

    public static Bitmap ResizeLargeImage(MemoryStream ms)
    {
        int width = int.Parse(ConfigurationManager.AppSettings["largewidth"]);
        int height = int.Parse(ConfigurationManager.AppSettings["largeheight"]);

        return ResizeImage(ms, width, height);
    }

    private static MemoryStream BitmapToMemoryStream(Bitmap bm)
    {
        MemoryStream memoryStream = new MemoryStream();
        bm.Save(memoryStream, System.Drawing.Imaging.ImageFormat.Jpeg);

        return memoryStream;
    } 
```

我遇到的问题是在调用该`ResizeThumbnail()`方法时，图像没有被裁剪或调整为 30px 的高度和宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:35:33.750

发现问题。我已将`CropImageToCentre`方法更新为以下内容：

```
private static Bitmap CropImageToCentre(MemoryStream uploadStream, int width, int height)
{
    Image img = Image.FromStream(uploadStream);
    Bitmap resizedBitmap = new Bitmap(img); 

    int StartX = 0, StartY = 0;
    int EndX = img.Width, EndY = img.Height;
    bool Crop = false;

    if (img.Width > width)
    {
        int MidX = img.Width / 2;
        StartX = MidX - (width / 2);
        EndX = MidX + (width / 2);
        Crop = true;
    }

    if (img.Height > height)
    {
        int MidY = img.Height / 2;
        StartY = MidY - (height / 2);
        EndY = MidY + (height / 2);
        Crop = true;
    }

    if (Crop)
    {
        Bitmap cropped = new Bitmap(width, height);
        Graphics.FromImage(cropped).DrawImage(img, new Rectangle(0, 0, width, height), new Rectangle(StartX, StartY, EndX, EndY), GraphicsUnit.Pixel);
        resizedBitmap = cropped;
    }

    return resizedBitmap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:33:23.270

可以有多种解决方案，可能是这样的，请参阅此功能

```
 private Size getScaledImageDimensions(int currentImageWidth,int currentImageHeight,
                                            int desiredImageWidth,int desiredImageHeight)
    {
        /* First, we must calculate a multiplier that will be used

        * to get the dimensions of the new, scaled image.
        */

        double scaleImageMultiplier = 0;

        /* This multiplier is defined as the ratio of the

        * Desired Dimension to the Current Dimension.
        * Specifically which dimension is used depends on the larger
        * dimension of the image, as this will be the constraining dimension
        * when we fit to the window.
        */

        /* Determine if Image is Portrait or Landscape. */
        if (currentImageHeight > currentImageWidth)    /* Image is Portrait */
        {
            /* Calculate the multiplier based on the heights. */
            if (desiredImageHeight > desiredImageWidth)
            {
                scaleImageMultiplier = (double)desiredImageWidth / (double)currentImageWidth;
            }

            else
            {
                scaleImageMultiplier = (double)desiredImageHeight / (double)currentImageHeight;
            }
        }

        else /* Image is Landscape */
        {
            /* Calculate the multiplier based on the widths. */
            if (desiredImageHeight >= desiredImageWidth)
            {
                scaleImageMultiplier = (double)desiredImageWidth / (double)currentImageWidth;
            }

            else
            {
                scaleImageMultiplier = (double)desiredImageHeight / (double)currentImageHeight;
            }
        }

        /* Generate and return the new scaled dimensions.

        * Essentially, we multiply each dimension of the original image
        * by the multiplier calculated above to yield the dimensions
        * of the scaled image. The scaled image can be larger or smaller
        * than the original.
        */

        return new Size(
        (int)(currentImageWidth * scaleImageMultiplier),
        (int)(currentImageHeight * scaleImageMultiplier));
    }//end of fun

   // you can call it like this
   {
         Image tempImage = (Image)<someImageSource....>;

                    /* Calculate the dimensions necessary for an image to fit. */
                    Size fitImageSize = this.getScaledImageDimensions(
                    current_Width, current_Height, desired_Width, desired_Height);
         Bitmap imgOutput = new Bitmap(tempImage, fitImageSize.Width, fitImageSize.Height);
   } 
```

//代码结尾对我有用，不好识别

# html - IE 8/9 中的下拉列表宽度

> ID：15759012
> 
> 赞同：2
> 
> 时间：2013-04-02T08:01:47.350
> 
> 标签：html, css, drop-down-menu, internet-explorer-8

下图描述了我目前的问题。是否有（css）方法可以在没有 JavaScript/JQuery 的情况下在 IE8/9 中实现“良好的浏览器”行为（如 FF）？找到了 2008 / 2011 年的一些旧帖子，但没有任何可能的解决方案。

（例如[Thread1](https://stackoverflow.com/questions/73960/dropdownlist-width-in-ie) [Thread2](https://stackoverflow.com/questions/7585512/drop-down-width-ie-labels-crop)）

![在此处输入图像描述](https://i.stack.imgur.com/x5gNG.png)

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:04:48.547

```
<!--[if IE]>
<style>
select{
width: 250px;
}
</style>
<![endif]--> 
```

该代码仅适用于 IE 浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T19:36:48.890

这是一个很好的起点。它在演示中效果不佳，但最终评论中有解决方案，代码看起来很容易改进： http: [//www.dougboude.com/blog/1/2008/05/Viewing-Option -Text-in-IE7-thats-Wider-than-the-Select-List.cfm](http://www.dougboude.com/blog/1/2008/05/Viewing-Option-Text-in-IE7-thats-Wider-than-the-Select-List.cfm)

# asp.net-mvc - 如何显示当地温度

> ID：15759014
> 
> 赞同：0
> 
> 时间：2013-04-02T08:01:58.553
> 
> 标签：asp.net-mvc

我正在做一个 MVC 项目，我想在其中显示请求页面的本地区域的温度，谁能告诉我如何使用本地 IP 地址来执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:12:00.170

不要在 .NET 中寻找类似的方法`int GetTemperature(string ip)`，您将找不到任何方法。在 Internet 上查找您可以查询的 API，它会为您提供此信息。例如，您可以查看[`Yahoo Weather API`](http://developer.yahoo.com/weather/).

# sharepoint - 图片库没有功能区 - 如何一步签入所有签出的图片？

> ID：15759019
> 
> 赞同：0
> 
> 时间：2013-04-02T08:02:11.280
> 
> 标签：sharepoint, sharepoint-2010

我有一个图片库。版本控制已打开。我的问题是没有选项可以一步签入所有签出的图片。此库中完全缺少功能区。我怎样才能做到这一点？

![在此处输入图像描述](https://i.stack.imgur.com/Yf416.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:28:32.887

Sharepoint 2010 中的图片库没有在其中实现功能区 GUI，可能是由于 Microsoft 必须按时交付产品。

图片库使用与 Sharepoint 2007 相同的功能。

在 Sharepoint 2010 的图片库中找不到功能区。

我希望我能正确理解你的问题

谢谢

# javascript - window.location.href 不重定向

> ID：15759020
> 
> 赞同：33
> 
> 时间：2013-04-02T08:02:16.257
> 
> 标签：javascript, dom-events, window.location

我知道这是一个讨论很多的问题，但我不知道为什么它对我不起作用。

这是我的功能：

```
function ShowComments(){

 alert("fired");
 var movieShareId = document.getElementById('movieId');
 //alert("found div" + movieShareId.textContent || movieShareId.innerText);
 //alert("redirect location: /comments.aspx?id=" + movieShareId.textContent || movieShareId.innerText + "/");
 window.location.href = "/comments.aspx?id=" + movieShareId.textContent || movieShareId.innerText + "/";
 var newLocation = window.location;
 //alert("full location: " + window.location);

} 
```

如果我没有注释警报，或者如果我打开了 Mozilla 的 bugzilla，它可以正常工作，否则它不会重定向到其他页面。

任何想法为什么？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-01-15T09:41:01.590

如果您通过提交按钮调用此函数。这可能是浏览器不重定向的原因。它将运行函数中的代码，然后提交页面而不是重定向。在这种情况下，更改按钮的类型标签。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-12-06T08:35:41.703

从这个答案，

[window.location.href 不工作](https://stackoverflow.com/questions/18300674/window-location-href-not-working)

你只需要添加

```
return false; 
```

在函数的底部

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-24T07:10:47.100

来自这里的解决方案：http: [//www.codeproject.com/Questions/727493/JavaScript-document-location-href-not-working](http://www.codeproject.com/Questions/727493/JavaScript-document-location-href-not-working)

```
document.location.href = 'Your url',true; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-02T08:07:54.880

缺少一些括号。

改变

```
 window.location.href = "/comments.aspx?id=" + movieShareId.textContent || movieShareId.innerText + "/"; 
```

至

```
 window.location = "/comments.aspx?id=" + (movieShareId.textContent || movieShareId.innerText) + "/"; 
```

`||`与相比，没有优先级`+`。

分配后也删除所有内容`window.location`：此代码不应在页面更改时执行。

注意：您不需要设置`location.href`. 设置就足够了`location`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-02-15T17:37:20.083

确保您没有在 URL 末尾发送“#”。就我而言，这阻止了 window.location.href 工作。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-05-27T07:56:54.460

您不能使用`window.location.replace`或`document.location.href`任何您喜欢的 vanilla javascript 方法将页面重定向**到自身**。

因此，如果您从后端动态添加重定向路径，或者从数据标签中提取它，请确保在某个阶段检查重定向到当前页面。它可能很简单：

```
if(window.location.href == linkout)
{
    location.reload();
}
else
{
    window.location.href = linkout;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-02T08:07:32.590

`window.location.replace`是模拟重定向的最佳方式：

```
function ShowComments(){
    var movieShareId = document.getElementById('movieId');
    window.location.replace("/comments.aspx?id=" + (movieShareId.textContent || movieShareId.innerText) + "/");
} 
```

更多关于为什么`window.location.replace`是最好的 javascript 重定向的信息可以在[**这里**](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)找到。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-12-10T13:28:13.550

我会给你一个很好的函数来解决这个问题：

```
function url_redirect(url){
    var X = setTimeout(function(){
        window.location.replace(url);
        return true;
    },300);

    if( window.location = url ){
        clearTimeout(X);
        return true;
    } else {
        if( window.location.href = url ){
            clearTimeout(X);
            return true;
        }else{
            clearTimeout(X);
            window.location.replace(url);
            return true;
        }
    }
    return false;
}; 
```

这是该问题的通用工作解决方案`window.location`。一些浏览器会出现问题，`window.location.href`有时也会发生`window.location`故障。这就是为什么我们也使用`window.location.replace()`“最后一次尝试”的任何情况和超时。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-02-03T14:05:23.660

在我的情况下，它在设置时间间隔后对所有浏览器都按预期工作。

```
setTimeout(function(){document.location.href = "myNextPage.html;"},100); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-08T22:25:01.337

window.location.href 在 Android 中不起作用。我清除了 Android Chrome 中的缓存，它工作正常。建议在参与各种编码之前先尝试一下。

# c# - 32 位 dll 参考在 64 位机器上没有失败

> ID：15759022
> 
> 赞同：0
> 
> 时间：2013-04-02T08:02:19.650
> 
> 标签：c#, visual-studio-2010, build, 32bit-64bit

我创建了一个控制台应用程序。在那个应用程序中，我引用了一个 x86 编译的 dll。在项目设置中，我将目标平台更改为 x64。

当我运行应用程序 (F5) 时，它会抛出 BadImageFormatException。没关系，但是如果我只是构建（构建成功）并将 .exe 文件复制到其他一些 64 位操作系统机器并运行运行正常的 exe，而不是在 VS 中运行应用程序。

为什么它在另一台机器上没有失败。是什么原因？

我的开发机器是64bit windows 7，VS2010是32bit，另一台机器是64bit windows server 2008 R2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:24:50.960

因为 32 位 dll 与 64 位 CPU 兼容，所以另一方面，64 位 dll 与 32 位 CPU 不兼容。

当您调试应用程序时，调试器期望应用程序是 64 位的，这就是它失败的原因。

尝试在不调试 CTRL+F5 的情况下运行它，它会运行得很好。

# facebook - Facebook API 获取“观看”电影/电视节目列表或“阅读”书籍列表？

> ID：15759032
> 
> 赞同：5
> 
> 时间：2013-04-02T08:02:53.273
> 
> 标签：facebook, api, facebook-graph-api, facebook-opengraph

我的 facebook 个人资料最近已迁移到新布局。在关于页面中，我发现电影/电视节目部分已分为“已观看”、“想看”、“喜欢”三个选项卡。类似的情况适用于书籍部分。

我知道我们可以使用“/me/movies”来获取用户喜欢的电影列表。但是，我找不到获取“已观看”和“想观看”列表的方法，我发现这很有趣。

除了已经可用的电影/电视节目/书籍的“喜欢”列表之外，还有什么关于我如何访问（读/写）这些列表的建议？非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T13:50:09.580

video.watches 没有返回截至 2018 年 4 月 4 日的数据。 [https://developers.facebook.com/docs/reference/opengraph/action-type/video.watches/](https://developers.facebook.com/docs/reference/opengraph/action-type/video.watches/)

如果您使用[Graph API Explorer](https://developers.facebook.com/tools/explorer)并指向： [https : **//graph.facebook.com/me/video.watches**](https://graph.facebook.com/me?video_watches)

这将为您提供观看过的视频列表。

如果没有，请确保您已通过单击**Get Access Token按钮授予****user_actions.video**权限，然后选中**User Data Permissions**下的 user_actions.video 框，并获取新的访问令牌。

 ****我还担心似乎无法通过 Graph 以编程方式实际发布到这些集合。**您可以使用video_watches**操作发布从您自己的应用程序观看的电影，但它不会将其添加到“电影”应用程序控制的“我看过的电影”集合中（似乎只有 Facebook 本身可以发布或更新的应用程序通过）。无法获取访问令牌来发布我可以看到的电影应用程序。因此，无法通过 Graph 发布“我看过的电影”或“我想看的电影”。它最终会在您自己的应用程序集合中被沙盒化。

如果这是不正确的，请有人插话这可能是如何完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-03T14:26:46.803

就我而言，我输入`me/video.watches`而不是`me?fields=video_watches`.

[阅读本文了解更多信息。](https://developers.facebook.com/docs/reference/opengraph/action-type/video.watches/)****

# c++ - 使用复制和交换习语实现的移动构造函数和赋值运算符

> ID：15759034
> 
> 赞同：0
> 
> 时间：2013-04-02T08:03:02.137
> 
> 标签：c++, c++11, move-semantics

在以下示例中，我不明白为什么赋值运算符中的参数使用复制构造函数而不是要构建的移动构造函数

```
struct Foo
{
    int data;

    Foo()
    {
        static int cpt = 1;
        data = cpt++;
        std::cout <<  "Foo\n";
    }

    Foo(const Foo& foo)
    {
        std::cout <<  "const Foo&\n";
        data = foo.data; 
    }

    Foo(Foo&& foo)
    {
        std::cout <<  "Foo&&\n";
        data = foo.data;
        foo.data = 0;
    }

    Foo& operator= (Foo foo)  //<--- call the copy ctor and not the move ctor as I expected
    {
        data = foo.data;
    std::cout <<  "operator=\n";
    return *this;   
    }

    Foo& operator+ (const Foo& foo)
    {
        data += foo.data;
        return *this;
    }
};

int main()
{ 
    Foo f;
    Foo f1;
    Foo f3;

    f3 = f + f1;

    std::cout << f3.data;

    std::cin.ignore(); 

    return 1; 
} 
```

输出：

```
Foo
Foo
Foo
const Foo&
operator=
3 
```

编译器：MSVCS2012 CTP

***编辑：***

从[什么是移动语义？](https://stackoverflow.com/questions/3106110/what-are-move-semantics/11540204#11540204)

> “但是如果你说 a = x + y，移动构造函数将初始化它（因为表达式 x + y 是一个右值）......”

但实际上 x + y 只有`operator +`在以“特殊”方式实现时才是右值，所以呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:14:58.760

你的假设是不正确的。赋值运算符使用任何可用的构造函数：

```
Foo a;
Foo b;

Foo x;

x = a;             // copy constructor
x = std::move(b);  // move constructor
x = Foo();         // move constructor 
```

您的误解来自您的笨拙`operator+`，它不会像您所相信的那样返回右值。

*更新：*正确的“加号”运算符对如下所示：

```
Foo& operator+= (const Foo& foo)
{
    data += foo.data;
    return *this;
}

Foo operator+ (const Foo& rhs)
{
    return Foo(*this) += rhs;
} 
```

（通常，您也可以制作这些签名`Foo rhs`并`std::move(rhs)`在适当的情况下使用，尽管对于这个简单的类没有任何区别。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:48:05.223

正如其他人指出的那样，问题是`operator +()`. 具体来说，它返回一个`Foo&`，即一个左值引用。由于左值引用是左值（这不是重言式），它不能绑定到右值引用。因此，`Foo(Foo&&)`无法调用。

我不会说`operator +()`and`operator +=()`应该如何实现（有关此主题的更多信息，请参阅其他答案和其中的评论）。我将专注于*rvalue x lvalue*。正如 Scott Meyers[*在 C++11 中的通用引用中所说*](http://accu.org/var/uploads/journals/Overload111.pdf)

> 这些术语的精确定义很难开发（C++11 标准通常根据具体情况指定表达式是左值还是右值）......

但是，可以使用以下函数来检查对象是左值还是右值：

```
#include <type_traits>

template <typename T>
bool is_lvalue(T&&) {
    return std::is_reference<T>::value;
}

template <typename T>
bool is_rvalue(T&&) {
    return !std::is_reference<T>::value;
} 
```

例如下面的代码

```
struct bar {
    bar&  operator+(const bar&) { return *this;  }
    bar&& operator-(const bar&) { return std::move(*this); }
};

int main() {

    bar b1;
    bar b2;

    std:: cout << std::boolalpha;

    std:: cout << is_rvalue( b1 + b2) << std::endl;
    std:: cout << is_rvalue( b1 - b2) << std::endl;

} 
```

输出

```
false
true 
```

注意：`bar`，受原始代码的启发，使用`operator +()`，`operator -()`但就这件事而言，作为运算符并没有什么特别之处。

功能`is_lvalue()`和`is_rvalue()`可以改进。例如它们可以，`constexrp`但我在这里保持简单，因为一些编译器（特别是 VS2012）还没有实现`constexpr`。

关于这些函数如何工作的解释，是基于如何`T`推导出来的。我引用前面提到的 Scott Meyers 的文章：

> 在模板参数 [ ... ] 的类型推导期间，相同类型的左值和右值被推导为具有略微不同的类型。特别是，类型 T 的左值被推导为类型 T&（即，对 T 的左值引用），而类型 T 的右值被推导为简单类型 T。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:55:36.610

您需要提供两个重载，`operator=`因为您的代码不会移动`data`：

```
Foo& operator= (const Foo& foo)
{
    data = foo.data;
    return *this;   
}

// only needed if the implementation can benefit from a movable object
Foo& operator= (Foo&& foo)
{
    data = std::move(foo.data); // without std::move, as above, the copy-ctor is called
    return *this;   
} 
```

也就是说，这个签名有什么问题：

```
Foo& operator= (Foo foo); 
```

? 问题是，您总是**强制**传递一个对象，这会导致效率低下。考虑：

```
Foo f, f2;
f = f2; 
```

（当然，在示例中，优化器很可能会移除所有开销）。

一般来说，`operator=`不需要副本，所以它不应该要求一个*。*另请参阅 Andy Prowl 关于[如何“正确”获取参数](https://stackoverflow.com/questions/15600499/how-to-pass-parameters-correctly/15600615#15600615)的精彩观点。

# php - XML-RPC wp.upload 工作正常但使图像损坏

> ID：15759036
> 
> 赞同：0
> 
> 时间：2013-04-02T08:03:04.307
> 
> 标签：php, wordpress

我尝试了很多方法来使用 xml-rpc 将图像上传到 wordpress，并通过一系列文件名、路径和文件类型获得完美的响应。不过，如果我在 wordpress 中查看图像，它会生成一个 0 字节损坏的图像文件。

我已经创建了一个类来操作所有查询，例如创建帖子/编辑帖子/删除帖子等。所有工作文件只是 wp.uploadfile 运行良好。

这是我的图片上传功能。

```
function upload_pic($url, $pic, $type='image/jpg')
{
    $fs = filesize($url);
    $file = fopen($url, 'rb');
    $filedata = fread($file, $fs);
    fclose($file);

    $content = array(
        'name'  => $pic,
        'type'  => $type,
        'bits'  => new IXR_Base64($filedata), 
        'overwrite' => false 
    );

    $params = array(1,$this->UserName,$this->PassWord,$content,true);
    return $this->send_request('wp.uploadFile',$params);
} 
```

我得到以下回应

```
 Array
   (
       [id] => 190
       [file] => P_1364799102.jpg
       [url] => http://localhost/wordpress/wp-content/uploads/2013/04/P_13647991025.jpg
       [type] => image/jpg
   ) 
```

响应看起来不错，但静止图像文件已损坏 0 字节。

请帮我解决一下这个。我也试过'metaWeblog.newMediaObject'，但问题还是一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:53:10.440

我找到了一个修复它现在工作正常。

```
function upload_pic($postid, $myFile, $name, $type='image/jpeg')
{
    $rpcurl = $this->XMLRPCURL;;
    $username = $this->UserName;
    $password = $this->PassWord;

    $file=file_get_contents($myFile);
    $filetype = $type;
    $filename = $name;

    xmlrpc_set_type($file,'base64'); // <-- required!
    $params = array($postid,$username,$password,array('name'=>$filename,'type'=>$filetype,'bits'=>$file,'overwrite'=>false));

    $request = xmlrpc_encode_request('wp.uploadFile',$params);
    $result = xmlrpc_decode($this->go($request,$rpcurl));
    return $result;
} 
```

谢谢

# ruby - 无法从 xmpp4r 发送消息？

> ID：15759045
> 
> 赞同：0
> 
> 时间：2013-04-02T08:03:40.653
> 
> 标签：ruby, xmpp, messaging, xmpp4r

我正在尝试使用 xmpp4r 测试向一个 jid 帐户发送消息：

```
require 'xmpp4r'
include Jabber

jid = JID::new('alice@wonderland.lit')
password = 'secr3t'

cl = Client::new(jid)
cl.connect('166.78.7.179')
cl.auth(password)
cl.send(Presence.new)

to = 'arthur@wonderland.lit'
subject = 'XMPP4R test'
body = 'Hi, this is a XMPP4R test'
m = Message::new( to, body ).set_type(:chat).set_id('1').set_subject(subject)
cl.send m 
```

但我总是得到以下异常：

```
/home/subout/.rvm/gems/ruby-1.9.3-p374@subout/gems/xmpp4r-0.5/lib/xmpp4r/client.rb:118:in `rescue in auth': closed stream (Jabber::ClientAuthenticationFailure)
   from /home/subout/.rvm/gems/ruby-1.9.3-p374@subout/gems/xmpp4r-0.5/lib/xmpp4r/client.rb:108:in `auth'
   from send_message2.rb:9:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:06:19.573

*   首先，请您在此处添加`Jabber::debug = true`设置`cl.connect`并在此处发布输出吗？
*   其次，XMPP 服务器似乎有问题（您确定它在 '166.78.7.179' 运行吗？）
*   而且，最后但并非最不重要的一点是，您为什么决定使用“过时的”`xmpp4r`而不是现代的继任者 [`Blather`](https://github.com/adhearsion/blather)？

# php - PHP 未写入第一个 SQL 字段

> ID：15759046
> 
> 赞同：0
> 
> 时间：2013-04-02T08:03:44.463
> 
> 标签：php, mysql

谢谢各位，搞定了，原来是在js中一个单词拼写不正确，总是很简单

这是我将数据写入本地服务器上的数据库的脚本，它目前只写入 2 个字段，而不是别名字段，我做错了什么吗？我已经三次检查了 html 表单和数据库字段中的名称。

```
<?php
  // 1\. Create connection to database

  mysql_connect('localhost','root','') or die('Could not connect to mysql: <hr>'.mysql_error());

  // 2\. Select database

  mysql_select_db("trialdb") or die('Could not connect to database:<hr>'.mysql_error());

  // 3\. Assign variables (after connection as required by escape string)

$alias = $_POST['alias'];
$name = $_POST['name'];
$email = $_POST['email'];

  // 4\. Insert data into table

  mysql_query("INSERT INTO user_data (alias, name, email) VALUES ('$alias', '$name', '$email')"); 
  Echo 'Your information has been successfully added to the database.';  
  print_r($_POST);
  mysql_close()
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:15:48.440

首先，您应该始终检查`POST`变量是否正确发送：

```
if (
    !isset($_POST['alias']) or
    !isset($_POST['name']) or
    !isset($_POST['email'])
) // something is wrong 
```

其次，您不想将用户输入直接注入到 sql 查询中。您应该首先执行一些转义（或者甚至更好地用[PDO](http://php.net/manual/en/book.pdo.php)或[mysqli](http://php.net/manual/en/book.mysqli.php)`mysql_*`替换已弃用的驱动程序并使用[准备好的语句](https://stackoverflow.com/a/60496/493122)）：

```
$alias = mysql_real_escape_string($_POST['alias']);
$name = mysql_real_escape_string($_POST['name']);
$email = mysql_real_escape_string($_POST['email']); 
```

第三，您可能希望在打印成功消息之前检查查询是否正确执行：

```
$res = mysql_query("INSERT INTO user_data (alias, name, email) VALUES ('$alias', '$name', '$email')"); 

echo ($res) 
    ? 'Your information has been successfully added to the database.' 
    : 'Your information couldn't be added to the database'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:18:01.440

你可以试试

```
<?php

$conn = mysql_connect('localhost','root','') or die('Could not connect to mysql: '.mysql_error());

mysql_select_db("trialdb", $conn) or die('Could not connect to database:'.mysql_error());

$alias = $_POST['alias'];
$name = $_POST['name'];
$email = $_POST['email'];

mysql_query("INSERT INTO user_data (`alias`, `name`, `email`) VALUES ('$alias', '$name', '$email')", $conn); 

echo 'Your information has been successfully added to the database.';  

print_r($_POST); 

mysql_close();

?> 
```

# nhibernate - 带有 access="field" 映射的 Hibernate Criteria API

> ID：15759049
> 
> 赞同：1
> 
> 时间：2013-04-02T08:03:56.047
> 
> 标签：nhibernate, nhibernate-mapping, nhibernate-criteria, hbmxml

我在使用 Hibernate Criteria API 时遇到问题：

```
var query = session.QueryOver<MyClass>().Where(param => param.Name == "myFilterName").List<MyClass>(); 
```

如果运行此语句，则会抛出 NHibernate.QueryException：

> 无法解析属性：名称：MyClass

在 StackTrace 中：

> 在 NHibernate.Persister.Entity.AbstractPropertyMapping.ToType(String propertyName)

MyClass.hbm.xml 文件具有这种方式映射的属性：

```
<property name="name" access="field">
  <column name="NAME" length="50" not-null="true" />
</property> 
```

我认为问题的出现是因为 hibernate 无法访问 MyClass 的属性“名称”，因为它是映射的`access="field"`，但是由于应用程序设计要求，我无法更改这种访问属性的方式。这个想法是通过使用 Criteria API 和 lambda 表达式来创建查询，以避免硬编码的字符串属性名称。

我也尝试过使用具有相同异常结果的表达式：

```
var criterion = Expression.Where<MyClass>(param => param.Name == "myFilterName");
var result = session.CreateCriteria<MyClass>().Add(criterion).List<MyClass>(); 
```

有人知道我如何向 Criteria API 指示 MyClass 的属性映射为`access="field"`？

非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:07:58.213

不确定您想要实现什么，拥有类代码可能会有所帮助。

无论如何，根据您提供的内容，我猜映射应该是：

`<property name="Name" access="field.camelcase">`

见[http://www.nhforge.org/doc/nh/en/#mapping-declaration-property](http://www.nhforge.org/doc/nh/en/#mapping-declaration-property)

# maven - jaxb2-maven 插件

> ID：15759050
> 
> 赞同：-1
> 
> 时间：2013-04-02T08:03:57.390
> 
> 标签：maven, maven-jaxb2-plugin, jaxb2-maven-plugin

我想从 xsd 文件生成 java 类，所以当我运行代码时它会显示错误

> 没有找到架构...这是代码...请帮助...

```
<plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jaxb2-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>xjc</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>

                    <schemaDirectory>src/main/resources/xsd</schemaDirectory> 
                    <includeSchema>**/*.xsd</includeSchema>
                    <!-- <generatepackage>org.onesync.esb.datasync.model</generatepackage> -->
                    <!-- The package in which the source files will be generated. -->
                    <packageName>org.onesync.esb.datasync.model</packageName>
                    <!-- The working directory to create the generated java source files. -->
                    <outputDirectory>src/main/java/org/onesync/esb/datasync/model</outputDirectory>

                </configuration>
            </plugin>
        </plugins> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T19:22:54.787

我认为尝试省略该参数`<includeSchema>**/*.xsd</includeSchema>`的语法无效。`jaxb2-maven-plugin:xjc`

如果您不指定 schemaFiles，它应该使用 schemaDirectory 中的所有 XSD 文件。

**“schemaFiles -- 用于模式的文件列表，以逗号分隔。如果没有，则在 schemaDirectory 中使用所有 xsd 文件。此参数还接受 Ant 样式的文件模式。”** （参见[jaxb2-maven-plugin 文档](http://mojo.codehaus.org/jaxb2-maven-plugin/xjc-mojo.html)）

顺便说一句，使用 maven 的配置参数来引用目录通常是个好主意。例如，更改`<schemaDirectory>src/main/resources/xsd</schemaDirectory>`为`<schemaDirectory>${project.basedir}/src/main/resources/xsd</schemaDirectory>`.

最后，您可能还想参考[这个类似的 SO 帖子](https://stackoverflow.com/questions/2857081/how-can-i-tell-jaxb-maven-to-genereate-multiple-schema-packages)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T14:32:04.917

我也在使用 maven 配置，几乎花在编译项目的东西上。后来我才知道它在寻找模式文件，即 schema.xsd。

如果您使用的是 MAVEN 配置，那么默认情况下您可以将架构文件放在资源目录下。

但是，如果您想指定查找模式文件的路径，则可以在插件配置中使用**schemaDescription的****includeSchema**标记。

 **```
 OR 
```

您也可以使用有效的 pom 来搜索特定的标签。

maven中有效pom的命令：mvn help:effective-pom

谢谢**

# javascript - 匹配除字母以外的所有内容的正则表达式

> ID：15759053
> 
> 赞同：6
> 
> 时间：2013-04-02T08:04:15.113
> 
> 标签：javascript, regex

我正在尝试编写匹配除字母之外的所有内容的正则表达式。到目前为止，我已经写了这样的东西：

```
/[^a-zA-Z]+/ 
```

但是，在测试过程中，我发现当我写例如“qwe”或“qqqqqweqwe123123”或类似的东西时它工作得很好，但是当我从数字开始字符串时，例如：“1qweqwe”，它不匹配。

除了输入字符串的任何位置的字母之外，我还需要做什么才能匹配所有内容？

提前致谢。

编辑：我发现的正确正则表达式是：

```
/^[^a-zA-Z]*$/ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T08:45:45.420

> 除了输入字符串的任何位置的字母之外，我还需要做什么才能匹配所有内容？

您需要使用正则表达式标志来实现这一点

尝试这个

```
'1qwe2qwe'.match(new RegExp(/[^a-zA-Z]+/g)) 
```

它应该返回`["1", "2"]`

`g`正则表达式末尾的标志告诉正则表达式引擎在找到一个匹配项后继续遍历字符串。如果没有`g`标志，它只会在找到第一个匹配项时放弃遍历。你可以在[这里找到参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:43:59.533

您的正则表达式未锚定，因此它将产生`true`部分匹配。如果整个字符串不应包含字母：

```
if (/^[^a-zA-Z]+$/.test(str)) {
    // all characters are not alphabetical
} 
```

或者更确切地说，如果所有字符都必须是数字（或空字符串）：

```
if (/^\d*$/.test(str)) {
    // all characters are digits
} 
```

# .net - 私有方法作为程序集在调用堆栈中的第一个方法

> ID：15759054
> 
> 赞同：1
> 
> 时间：2013-04-02T08:04:27.413
> 
> 标签：.net, datetime, vsto, encapsulation

在客户端系统的日志中记录了以下异常。

```
System.ArgumentOutOfRangeException: Value to add was out of range.
Parameter name: value
  at System.DateTime.Add(Double value, Int32 scale)
  at ButtonPressed()
  at MessageEvent(MessageEventArgs e) 
```

自定义方法相当简单

```
Public Sub ButtonPressed
    If mWindows.Count > 0 AndAlso mLastEvent.AddSeconds(1) > Now
        PostMessage(New IntPtr(mHwnd), 1125, UIntPtr.Zero, IntPtr.Zero)
    End If
End Sub 
```

我很难解释这样的调用堆栈是如何可能的，因为`DateTime.Add(Double value, Int32 scale)`它是一个私有方法，而不是由我的代码调用。

[DateTime.Now 抛出异常](https://stackoverflow.com/questions/10323881/datetime-now-is-throwing-an-exception)似乎在多线程环境中对此给出了解释。但是我的调用堆栈上没有调用，`DateTime.get_Now`所以它真的是相同的根本原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:10:39.453

我怀疑 JIT 已经内联了该`AddSeconds`方法，仅此而已。

例如，考虑这个非常简单的代码：

```
using System;

class Test
{
    static void Main()
    {
        var max = DateTime.MaxValue;
        var oops = max.AddSeconds(1);
    }
} 
```

在我的 .NET 4.5 机器上，它会生成以下堆栈跟踪：

```
Unhandled Exception: System.ArgumentOutOfRangeException:
   The added or subtracted value results in an un-representable DateTime.
Parameter name: value
   at System.DateTime.AddTicks(Int64 value)
   at Test.Main() 
```

注意没有`AddSeconds`来电。现在它与您看到的轨迹不完全相同，但这很可能是由于框架版本差异造成的。

我建议您在方法开始时登录`mLastEvent`- 我的猜测是您会发现接近`DateTime.MaxValue`.

# tomcat - @AssertTrue 注释在哪个 jsf 阶段检查？

> ID：15759056
> 
> 赞同：0
> 
> 时间：2013-04-02T08:04:32.013
> 
> 标签：tomcat, jsf-2, bean-validation, hibernate-validator

我有一个 JSF 应用程序，我在一个名为*isPasswordsEquals()的方法上使用**@AssertTrue*来确认密码匹配。但是，该方法似乎无法正常工作。它将错误消息添加到上下文中，但在密码不匹配时不会引发任何异常。正在进行的交易刚刚完成。

 *我需要调用这个函数还是隐式调用它？我为tomcat启动参数添加了-ea。我需要在 web.xml 中添加任何东西来进行断言吗？

我正在使用 tomcat 7、myfaces 2.1.10、jvm 7 和 eclipse ide。我的构建路径中有验证 api 1.0 和休眠验证器 4.3.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T07:06:07.667

首先，Java 断言与 Bean Validation 和*@AssertTrue 之*类的约束无关。它们是完全不同的东西。出于这个原因，使用 -ea JVM 选项不会做任何事情。

我的猜测是*isPasswordEquals*没有被评估，因为 JSF 实际上没有验证整个 bean，而是只通过*Validator#validateValue 验证*给定的属性。您的方法未连接到具体属性，因此未得到验证。验证是否适用于密码字段本身？例如，您是否可以向它们添加*@NotNull*或*@NotEmpty*之类的内容，并且验证会引发异常。这将表明对属性进行了验证。

据我所知，没有办法在 JSF 中使用类级别的约束或对非属性值的约束。如果您使用 JPA，则必须自己进行验证调用，对实体管理器回调使用基于生命周期的验证。*

# java - 使用 toString 从哈希表中获取字符串表示

> ID：15759062
> 
> 赞同：0
> 
> 时间：2013-04-02T08:04:57.927
> 
> 标签：java, hashmap, tostring

只是想知道从哈希表中表示字符串的最佳方法是什么，我想您会在 toString 方法中以某种方式使用迭代器，但不确定。

它应该如下所示

```
{5/10 = 3/9}
to
{true@5/10}@3/9 
```

到目前为止我有（我知道这不使用迭代器，因为我不确定如何在这方面使用它）

```
@Override
public String toString() {

    for (Map.Entry<BigFraction, BigFraction> entry : knowledgeD.entrySet()) {
        BigFraction key = entry.getKey();
        BigFraction value = entry.getValue(); 
```

其中 bigfraction 只是分数数据类型，将其替换为您想要的任何内容

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:16:01.660

如果您想查看确切的 toString() 表示，可以打开 HashTable 类并查看 toString() 方法。
这是直接来自JDK，

```
public synchronized String toString() {
    int max = size() - 1;
    if (max == -1)
        return "{}";

    StringBuilder sb = new StringBuilder();
    Iterator<Map.Entry<K,V>> it = entrySet().iterator();

    sb.append('{');
    for (int i = 0; ; i++) {
        Map.Entry<K,V> e = it.next();
            K key = e.getKey();
            V value = e.getValue();
            sb.append(key   == this ? "(this Map)" : key.toString());
        sb.append('=');
        sb.append(value == this ? "(this Map)" : value.toString());

        if (i == max)
        return sb.append('}').toString();
        sb.append(", ");
    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:08:03.173

以下可能有效，我相信

```
@Override
public String toString()
{
    final StringBuilder builder = new StringBuilder();
    for (final Map.Entry<String, String> entry : myTable.entrySet())
    {
        builder.append(entry.getKey());
        builder.append("=>");
        builder.append(entry.getValue());
        builder.append("\n");
    }

    return builder.toString();
} 
```

# eclipse - 为 Eclipse 安装 aptana 插件和 Jboss 工具

> ID：15759063
> 
> 赞同：1
> 
> 时间：2013-04-02T08:05:01.147
> 
> 标签：eclipse

尝试通过 Eclipse 的安装新软件功能安装 Aptana Web 开发工具时，出现此错误：

```
Cannot complete the install because of a conflicting dependency.
  Software being installed: Aptana Web Development Tools 1.2.7.024747 (com.aptana.ide.feature.feature.group 1.2.7.024747)
  Software currently installed: JBoss Tools JSF 3.4.0.Final-v20121205-2220-B66 (org.jboss.tools.jsf.feature.feature.group 3.4.0.Final-v20121205-2220-B66)
  Only one of the following can be installed at once: 
    Mozilla XPCOM Eclipse plugin 1.9.2.16 (org.mozilla.xpcom 1.9.2.16)
    org.mozilla.xpcom 1.8.1.3-20070320
  Cannot satisfy dependency:
    From: Aptana Web Development Tools 1.2.7.024747 (com.aptana.ide.feature.feature.group 1.2.7.024747)
    To: com.aptana.ide.feature.xul.feature.group [1.2.7.024747]
  Cannot satisfy dependency:
    From: Embedded Firefox Support (XUL-based) 1.2.7.024747 (com.aptana.ide.feature.xul.feature.group 1.2.7.024747)
    To: org.mozilla.xpcom [1.8.1.3-20070320]
  Cannot satisfy dependency:
    From: JBoss Tools JSF 3.4.0.Final-v20121205-2220-B66 (org.jboss.tools.jsf.feature.feature.group 3.4.0.Final-v20121205-2220-B66)
    To: org.jboss.tools.vpe.feature.feature.group 3.3.0
  Cannot satisfy dependency:
    From: JBoss Tools Visual Page Editor 3.4.0.Final-v20121205-1952-B75 (org.jboss.tools.vpe.feature.feature.group 3.4.0.Final-v20121205-1952-B75)
    To: org.jboss.tools.vpe.xulrunner [3.4.0.Final-v20121205-1952-B75]
  Cannot satisfy dependency:
    From: Browser (XULRunner) Plug-in 3.4.0.Final-v20121205-1952-B75 (org.jboss.tools.vpe.xulrunner 3.4.0.Final-v20121205-1952-B75)
    To: bundle org.mozilla.xpcom 1.9.1 
```

无论如何要安装 aptana 和 jboss 工具，因为我需要 aptana 插件中的 jquery 自动完成

# jquery - jQuery fadeToggle 在不可见元素上

> ID：15759069
> 
> 赞同：1
> 
> 时间：2013-04-02T08:05:40.080
> 
> 标签：jquery

在 Jquery 文档中，fadeToggle 正在工作当在可见元素上调用时，如果我想以零不透明度开始我的元素怎么办。有没有办法解决这个问题或使用任何其他方法。我不想使用 display: none

```
<h2>toggle</h2>

<div class="box">box</div>

.box {
   opacity: 0;
}

$('h2').click(function(){
   $('.box').fadeToggle();
}); 
```

[http://jsfiddle.net/A6PWN/](http://jsfiddle.net/A6PWN/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:09:20.923

放置`display:none`为盒子的样式并`opacity:0`从css中删除

您的代码应如下所示：

```
<h2>toggle</h2>
<div class="box" style="display:none">box</div> 
```

和 CSS

```
.box {
   /* no opacity here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:11:48.627

`fadeToggle();`如果您不想“真正”消失元素，请`display:none;`尝试使用元素样式；`animate();`这个：http: [//jsfiddle.net/A6PWN/1/](http://jsfiddle.net/A6PWN/1/)

```
$("h2").click(function () {
  $(".box").animate({
    opacity: 1,
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:11:55.043

您可以先将不透明度设置为1

```
.css('opacity', 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:14:51.440

像这样使用

```
$('h2').click(function(){
    $('.box').css('opacity', 1);
    $('.box').fadeToggle();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T08:17:04.733

```
$('h2').click(function() {
    var boxOpacity = parseInt($('.box').css('opacity'));
    $('.box').animate({
        opacity: boxOpacity == 0 ? 1 : 0
    });
}); 
```

[http://jsfiddle.net/A6PWN/4/](http://jsfiddle.net/A6PWN/4/)

这是使用不透明度，而不是显示：无；

编辑：我的坏..更新它以使用该框。:D

# python - 如何在 Mac 上将 openCV 安装到 Enthought python 发行版中

> ID：15759071
> 
> 赞同：7
> 
> 时间：2013-04-02T08:05:42.070
> 
> 标签：python, macos, opencv, computer-vision, enthought

编辑：好的，我已经更概括了这个问题，希望我能得到答案。最后，我关心的只是以某种方式将 openCV 安装到 Mac 计算机上的 Enthought python 发行版中。任何帮助将不胜感激，脚本并不超出我的能力，但我对计算机编程的理解不足，无法弄清楚这些参数的含义以及与 Linux 与 mac 的不同之处。

提示：我一直遵循本网站上的指南，但它适用于 Linux，95% 的“make”命令失败：http: [//pyetc.wordpress.com/2013/01/09/installing-the- enthought-python-distribution-with-opencv/](http://pyetc.wordpress.com/2013/01/09/installing-the-enthought-python-distribution-with-opencv/)

```
export EPDPATH=$HOME/.local/epd-7.3-2-rh5-x86_64
# prepend the EPD bin dir to your path to make your shell prefer the EPD python interpreter to the system python interpreter
export PATH=$EPDPATH/bin:$PATH
# also the python packages should be searched in the correct location
export PYTHONPATH=$EPDPATH/lib/python2.7/site-packages 
```

其次是：

```
mkdir build
cd build
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX:PATH=$HOME/.local -D PYTHON_EXECUTABLE:FILEPATH=$EPDPATH/bin/python -D PYTHON_INCLUDE_DIR:PATH=$EPDPATH/include/python2.7 -D PYTHON_LIBRARY:FILEPATH=$EPDPATH/lib/libpython2.7.so -D PYTHON_LIBRARY_PATH:UNINITIALIZED=$EPDPATH/lib/libpython2.7.so -D PYTHON_NUMPY_INCLUDE_DIR:PATH=$EPDPATH/lib/python2.7/site-packages/numpy/core/include -D PYTHON_PACKAGES_PATH:PATH=$EPDPATH/lib/python2.7/site-packages -D SPHINX_BUILD:FILEPATH=$EPDPATH/bin/sphinx-build -D PYTHONINTERP_FOUND=1 -D BUILD_PYTHON_SUPPORT=ON -D INSTALL_PYTHON_EXAMPLES:BOOL=ON ..
make
make install 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-08T17:48:26.343

虽然我对你的问题没有确切的答案，但我想我有一个解决你问题的方法。巧合的是，我昨天也在我的 Mac 上安装 OpenCV 时遇到了困难。我最后只是通过使用 macports 安装 python 和 opencv 来做到这一点。这样你在 enthought 发行版中就没有 opencv，但是你可以使用 macports 简单地安装你在 enthought 发行版中使用的所有包。

所以只需从这个页面安装 macports：http: [//www.macports.org/install.php](http://www.macports.org/install.php)

然后做：

```
sudo port install python27 # (or any other version you want)
sudo port install py27-numpy
sudo port install opencv +python27 
```

当然，您可以安装您需要的任何其他软件包：

```
sudo port install py27-scipy 
sudo port install py27-ipython
etc. 
```

最后，您必须确保在命令行中键入“python”时，它确实指的是您使用 macports 安装的版本。您可以通过编辑您的 ~/.bash_profile 来做到这一点，如下所示：

```
sudo open -t ~/.bash_profile 
```

打开后，只需查看是否有对其他 python 发行版的引用。您很可能在其中引用了您的 Enthough 版本。注释掉所有其他 python 版本并添加以下行：

```
export PATH=/opt/local/bin:/opt/local/sbin:$PATH 
```

这应该可以解决问题：让 opencv 与 python 一起工作，同时仍然拥有你喜欢的所有科学模块。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-28T10:22:20.063

最新版本的 Enthought Python (Canopy) 在包管理器中包含 opencv。只需打开 Canopy，打开包管理器，搜索 opencv 并点击安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T17:23:17.100

我做了以下工作，让它在带有 Enthought (Canopy) 的 OS X 上运行：

1.  下载opencv
2.  复制到 /usr/local/opencc-2.4.10
3.  `cd /usr/local/opencc-2.4.10`
4.  mkdir 发布
5.  光盘发行
6.  `export PYTHONPATH=/Users/<me>/Library/Enthought/Canopy_64bit/User/lib/python2.7/site-packages:$PYTHONPATH`
7.  `cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_NEW_PYTHON_SUPPORT=ON -D BUILD_EXAMPLES=ON -D PYTHON_LIBRARY=/Users/<me>/Library/Enthought/Canopy_64bit/System/lib/libpython2.7.dylib ..`
8.  制作
9.  须藤使安装
10.  `cp /usr/local/lib/python2.7/site-packages/cv* ~/Library/Enthought/Canopy_64bit/User/lib/python2.7/site-packages/`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-15T16:27:08.770

就我而言，复制`cv2.so`到 Canopy 站点包目录就足够了。

**这是细节和我尝试过的。**

1.  [从此官方下载链接](https://github.com/Itseez/opencv/archive/3.1.0.zip)下载 OpenCV 源文件。

2.  这是我尝试过的命令历史记录。为此，您可能需要安装`cmake`.

    ```
    $ pwd
    /Users/kei/Downloads/opencv-3.1.0
    $ mkdir release
    $ cd release
    $ cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local ..
    $ make -j4
    $ sudo make install
    $ cp /usr/local/lib/python2.7/site-packages/cv2.so /Users/kei/Library/Enthought/Canopy_64bit/User/lib/python2.7/site-packages 
    ```

3.  检查 Python 上的版本。

    ```
    import cv2
    print cv2.__version__ # will print '3.1.0' 
    ```

就这样。我不知道这是否是正确的方法，但是，无论如何，我可以安装`OpenCV 3.1.0`在我的 mac OS X 10.11 上运行的 Enthought Canopy 上。

# c# - 串口连接，Readline/ReadExisting 不工作

> ID：15759076
> 
> 赞同：1
> 
> 时间：2013-04-02T08:05:53.753
> 
> 标签：c#, serial-port

我正在尝试与另一台机器建立串行连接。我正在使用虚拟串行端口仿真器来尝试这个。我在超级终端上使用的设置如下所示。我可以看到 portopen 是`true`，但我无法检查我是否可以写或读。当我尝试`ReadLine`它提供的方法时`TimeoutException`，当它是 readExisting 命令时，它什么也不做。`DataReceived`也永远不会触发。你能帮我解决这个问题吗？

```
 private void Page1_Load(object sender, EventArgs e)
        {

        //Port name can be identified by checking the ports

        // section in Device Manager after connecting your device
        serialPort1.PortName = "COM14"; // that one works for me

        //Provide the name of port to which device is connected

        //default values of hardware[check with device specification document]
        serialPort1.BaudRate = 115200;
        serialPort1.Parity = Parity.None;
        serialPort1.DataBits = 8;
        serialPort1.StopBits = StopBits.One;
        serialPort1.Handshake = Handshake.None;
        serialPort1.RtsEnable = true;
        serialPort1.DtrEnable = true;
        serialPort1.ReceivedBytesThreshold = 8;
        serialPort1.ReadTimeout = 2000;
        serialPort1.DataReceived += new SerialDataReceivedEventHandler(serialPort1_DataReceived);  //
        // Writes data to the Serial Port output buffer 

        //opens the port
        serialPort1.Open();
    }

      private void serialPort1_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {

        inputData = serialPort1.ReadExisting();
        this.Invoke((MethodInvoker)delegate { DoUpdate(); });

    }

     public void DoUpdate()
    {
        textOutput.Text = (textOutput.Text + inputData);

    }

     private void btnReadExist_Click(object sender, EventArgs e)
    {

        if ((serialPort1.IsOpen == true))
        {

           serialPort1.WriteLine("something"); 
           string read= serialPort1.ReadExisting();
           //string output = serialPort1.ReadLine();
           textOutput.Text += read;

        }
    }

    private void Page1_FormClosed(object sender,System.Windows.Forms.FormClosedEventArgs e)
    {
        //  Close the Serial Port
          serialPort1.Close();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:23:57.400

问题似乎是您正在阅读两个代码块：首先，直接在按钮事件中发送文本之后。其次，您分配了一个事件，该事件在异步调用时读取数据。您应该决定使用哪一个并删除另一个。

# java - Eclipse 超时

> ID：15759081
> 
> 赞同：1
> 
> 时间：2013-04-02T08:06:15.730
> 
> 标签：java, eclipse, google-app-engine, error-handling, timeout

我想延迟为我的 Web 应用程序加载结果所需的时间，或者为了测试目的而减少超时会话。有没有办法实现这个？我在 Java 中使用 eclipse 和 gae。

// 超时会话会像这样吗？

```
 setTimeout( function(){ window.location = "main.jsp"; }, 10000 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:47:18.113

您是否希望在 Java 中做同样的事情？

如果是，您有以下方法`Thread.sleep()`：

[http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html)

请注意，GAE 中的页面执行时间应该小于 30 秒，如果超过它，它将抛出`DeadlineExceededException`.

# java - Java Mail API：查找邮件是转发邮件还是回复另一封邮件

> ID：15759086
> 
> 赞同：4
> 
> 时间：2013-04-02T08:06:34.600
> 
> 标签：java, jakarta-mail

我有一个很特别的要求

我正在使用 Java Mail API 来访问用户的收件箱。您可以说它就像一个用于投诉的服务收件箱。用户通过向该地址发送电子邮件来注册投诉。我从收件箱中提取每封电子邮件并创建新的投诉。我的问题是我不想为回复或转发的电子邮件制造不必要的投诉。有没有办法找出来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T08:17:26.147

大多数电子邮件客户端都会添加`Re:`或添加`Fwd:`到主题行，但我不会依赖它来确定电子邮件是回复还是转发文本；例如，德国邮件客户端可能会将`Betr.:`原始主题放在前面。

相反，您可能想查看`In-Reply-To:`标题和/或`References:`标题。有关这些标头的详细信息，请参阅[RFC 4021](https://www.rfc-editor.org/rfc/rfc4021)。

`Message`您可以通过调用该[`getHeader(java.lang.String)`](http://docs.oracle.com/javaee/6/api/javax/mail/Part.html#getHeader(java.lang.String))方法从 a 中检索标头。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T08:28:41.497

阅读电子邮件标题可能会有所帮助，请参阅 [http://javamail.kenai.com/nonav/javadocs/javax/mail/Part.html#getAllHeaders()](http://javamail.kenai.com/nonav/javadocs/javax/mail/Part.html#getAllHeaders())。在回复的情况下，消息头将包括：

```
In-Reply-To: Message-ID of the message that this is a reply to 
```

在转发消息的情况下，可能会保留选定的标头。不像前一种情况那么直接，但仍然可以确定它是否是转发的消息。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Email_forwarding#Manual_client-based_forwarding](http://en.wikipedia.org/wiki/Email_forwarding#Manual_client-based_forwarding)。

# android - 如何使 ScrollPane 捕捉到某些位置

> ID：15759089
> 
> 赞同：2
> 
> 时间：2013-04-02T08:06:48.807
> 
> 标签：android, libgdx

我有一个 ScrollPane，它在一个组中水平对齐了多个图像。我需要的是水平滚动，以在滚动时“捕捉”到图像，而不仅仅是滚动到所需的任何数量。所以在任何滑动之后，滚动应该停止以适应整个图像而不是半个图像。主要是每个图像宽度等于滚动窗格宽度。知道如何使用 libgdx ScrollPane 实现这一目标吗？

这是一个示例代码：

```
Image imgWhite = new Image(white);
imgWhite.setSize(width, height);
imgWhite.setPosition(0, 0);

Image imgYellow = new Image(white);
imgYellow.setColor(Color.YELLOW);
imgYellow.setSize(width, height);
imgYellow.setPosition(width, 0);

Image imgGreen = new Image(white);
imgGreen.setColor(Color.GREEN);
imgGreen.setSize(width, height);
imgGreen.setPosition(2*width, 0);

Group grp = new Group();
grp.addActor(imgWhite);
grp.addActor(imgGreen);
grp.addActor(imgYellow);
grp.setSize(3*width, height);

ScrollPane scrollPane = new ScrollPane(grp);
scrollPane.setSize(width, height); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T00:05:37.893

使用`PagedScrollPane`（调用`addPage`添加图像）：

```
package com.your.package;

import com.badlogic.gdx.math.MathUtils;
import com.badlogic.gdx.scenes.scene2d.Actor;
import com.badlogic.gdx.scenes.scene2d.ui.ScrollPane;
import com.badlogic.gdx.scenes.scene2d.ui.Skin;
import com.badlogic.gdx.scenes.scene2d.ui.Table;
import com.badlogic.gdx.utils.Array;
import com.esotericsoftware.tablelayout.Cell;

public class PagedScrollPane extends ScrollPane {

    private boolean wasPanDragFling = false;

    public static interface ScrollRunnable
    {
        public void run(Actor scrolledTo);
    }

    private Table content;
    private float pageSpace;
    private ScrollRunnable onScroll;

    public PagedScrollPane (float pageSpace) {
        super(null);
        setup(pageSpace);
    }

    public PagedScrollPane (Skin skin, float pageSpace) {
        super(null, skin);
        setup(pageSpace);
    }

    public PagedScrollPane (Skin skin, String styleName, float pageSpace) {
        super(null, skin, styleName);
        setup(pageSpace);
    }

    public PagedScrollPane (Actor widget, ScrollPaneStyle style, float pageSpace) {
        super(null, style);
        setup(pageSpace);
    }

    public void setOnScroll(ScrollRunnable onScroll)
    {
        this.onScroll = onScroll;
    }

    private void setup(float pageSpace) {
        this.pageSpace = pageSpace;
        this.onScroll = null;

        content = new Table();
        content.defaults().space(pageSpace);
        super.setWidget(content);
    }

    public void addPages (Actor... pages) {
        for (Actor page : pages) {
            content.add(page).expandY().fillY();
        }
    }

    public Cell addPage (Actor page) {
        return content.add(page).expandY().fillY();
    }

    @Override
    public void act (float delta) {
        super.act(delta);
        if (wasPanDragFling && !isPanning() && !isDragging() && !isFlinging()) {
            wasPanDragFling = false;
            scrollToPage();
        } else {
            if (isPanning() || isDragging() || isFlinging()) {
                wasPanDragFling = true;
            }
        }
    }

    @Override
    public void setWidget (Actor widget)
    {
        //
    }

    public void setPageSpacing (float pageSpacing) {
        if (content != null) {
            content.defaults().space(pageSpacing);
            for (@SuppressWarnings("rawtypes") Cell cell : content.getCells()) {
                cell.space(pageSpacing);
            }
            content.invalidate();
        }
    }

    private void scrollToPage () {
        final float width = getWidth();
        final float scrollX = getScrollX() + getWidth() / 2f;

        Array<Actor> pages = content.getChildren();
        if (pages.size > 0) {
            for (Actor a : pages) {
                float pageX = a.getX();
                float pageWidth = a.getWidth();

                if (scrollX >= pageX - pageWidth && scrollX < pageX + pageWidth)
                {
                    setScrollX(pageX - (width - pageWidth) / 2f);
                    if (onScroll != null)
                    {
                        onScroll.run(a);
                    }
                    break;
                }
            }
        }
    }

    public void scrollTo(Actor listenerActor)
    {
        float pageX = listenerActor.getX();
        float pageWidth = listenerActor.getWidth();
        final float width = getWidth();

        setScrollX(pageX - (width - pageWidth) / 2f);
    }

    public void addEmptyPage(float offset)
    {
        content.add().minWidth(offset);
    }
} 
```

此外，它具有`setOnScroll`允许在将窗格滚动到某个图像后设置回调的方法。

编辑：修改`scrollToPage()`方法中的条件以避免盲点（滚动永远不会捕捉到页面）。

# xaml - 状态记录数据模板 Windows Store

> ID：15759110
> 
> 赞同：0
> 
> 时间：2013-04-02T08:08:24.913
> 
> 标签：xaml, windows-8, windows-store-apps

我正在开发一个 Windows 应用商店应用程序，并且我有一个带有自定义 DataTemplate 的 ListBox。我已经意识到（在我的尝试中）在 XAML 中进行状态记录时我无法修改样式，并且我无法在不修改其他状态的情况下为捕捉状态修改 DataTemplate。如何专门针对样式或数据模板解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:07:17.687

windows 模板项目处理这个问题的方式是拥有数据模板的多个实例，并根据状态使它们可见或隐藏。

# oop - OO 语言中的变量/对象数据结构

> ID：15759112
> 
> 赞同：1
> 
> 时间：2013-04-02T08:08:38.460
> 
> 标签：oop, variables, object, data-structures

在面向对象的编程语言中，当您定义变量时，它最终会成为对对象的引用。变量本身不是对象，而是指向带有分配给该变量的值的对象。

问题是这如何有效地工作？变量分配给对象的机制是什么？

我认为组织的方式是一个链表，但是找不到参考数据是如何用 Ruby 或 Java 等语言构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:27:09.053

> 在面向对象的编程语言中，当您定义变量时，它最终会成为对对象的引用。

这并非总是如此。例如，C++ 可以被认为是一种面向对象的语言，但该语言的用户可以将变量用作引用/指针或显式用作值。

但是，您是对的，因为某些（通常是更高级别的）OO 语言隐式使用引用，因此该语言的用户不必担心这些关于性能的实现“细节”。他们试图为此承担责任。

> 这如何有效地工作？变量分配给对象的机制是什么？

考虑一个简单的例子。当一个对象作为参数传递给函数时会发生什么？必须制作该对象的副本，以便函数可以在本地引用该对象。对于隐式使用引用的 OO 语言，只需要复制对象的**地址**，而真正的按值传递将需要对象的完整内存内容的副本，这可能非常大（想想对象或类似的集合）。

对此的详细解释涉及到组装的核心。例如，为什么首先需要将对象复制到函数调用？为什么地址的间接寻址不会比直接值花费更长的时间？等等。

**有关的**

[按引用传递与按值传递有什么区别？](https://stackoverflow.com/questions/373419/whats-the-difference-between-passing-by-reference-vs-passing-by-value)

# java - 使用java模式匹配删除单个字母单词

> ID：15759113
> 
> 赞同：4
> 
> 时间：2013-04-02T08:08:40.467
> 
> 标签：java, regex, pattern-matching

我想使用模式匹配从 Java 中的字符串中消除所有单字母单词。我编码如下：

```
 String str = "P@";

    //remove single char words and extra white spaces
    inputStr = inputStr.replaceAll("\\b[\\w']{1}\\b", "").replaceAll("\\s+", " ").trim(); 
```

我期望输出为 P@，因为输入不是单个字母词。但是我得到输出为@，因为它消除了P。所以基本上它只考虑匹配模式的字母字符。而我想根据输入的字符串的长度进行匹配。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:14:32.390

尝试使用这个：

```
 String data = "asd df R# $R $$ $ 435 4ee 4";

    String replaceAll = data.replaceAll("(\\s.\\s)|(\\s.$)", " ");
    System.out.println(replaceAll); 
```

输出是：`asd df R# $R $$ 435 4ee`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:27:45.913

用这个

```
str = str.replaceAll("(^.$|\\s.\\s|^.\\s|\\s.$)", "").replaceAll("\\s+", " ").trim(); 
```

您的解决方案的问题是您正在使用`\b`它在单词的末尾和开头期待一个字符，因此它不适用于您的情况。

`/b`

匹配单词字符（由 \w 匹配的任何内容）和非单词字符（由 [^\w] 或 \W 匹配的任何内容）之间的位置以及字符串的开头和/或结尾（如果第一个）和/或字符串中的最后一个字符是单词字符。

[**参考正则表达式**](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T12:26:41.493

试试这个正则表达式：

```
\s([^\s]{1})\s 
```

应该捕获单个字符的非空格，由两边的空格分隔。如果您需要接受非空白字符，例如“，”和“。” 作为分隔符，您需要添加这些分隔符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T00:59:22.933

测试用例是：

**asd df R# $R $$ $ 435 4ee 4 hey buddy 这是我想要的测试**

```
"[!-~]?\\b[A-z]\\b[!-~]?"
"[!-~]?\\b[\\w]\\b[!-~]?" 
```

上述代码的输出是：

**asd df $$ $ 435 4ee 4 嘿伙计 这是测试通缉**
**asd df $$ $ 435 4ee 嘿伙计 这是测试通缉**

注意在第二个中缺少四个。第二个正则表达式摆脱了不知道单个数字是否计数的数字

# r - R 中的 copy-on-modify 语义到底是什么，规范的来源在哪里？

> ID：15759117
> 
> 赞同：81
> 
> 时间：2013-04-02T08:08:50.037
> 
> 标签：r, pass-by-reference, pass-by-value

每隔一段时间，我就会遇到 R 具有**修改时复制语义**的概念，例如在[Hadley 的 devtools wiki](https://github.com/hadley/devtools/wiki/Functions)中。

> 大多数 R 对象具有修改时复制语义，因此修改函数参数不会更改原始值

我可以将此术语追溯到 R-Help 邮件列表。例如，Peter Dalgaard 在 2003 年[7 月](https://stat.ethz.ch/pipermail/r-help/2003-July/036437.html)写道：

> R 是一种函数式语言，具有惰性求值和弱动态类型（变量可以随意更改类型：a <- 1 ; a <- "a" 是允许的）。从语义上讲，尽管在实现中使用了一些优化技巧来避免最严重的低效率，但一切都是在修改时复制的。

同样，Peter Dalgaard 在[2004 年 1 月](http://tolstoy.newcastle.edu.au/R/help/04/01/0331.html)写道：

> R 具有修改时复制语义（原则上，有时在实践中），因此一旦对象的一部分发生更改，您可能必须在新的地方寻找包含它的任何内容，包括可能的对象本身。

更早些，在2000 年[2 月](https://stat.ethz.ch/pipermail/r-help/2000-February/009952.html)， Ross Ihaka 说：

> 为了实现这一点，我们付出了很多努力。我将语义描述为“修改时复制（如有必要）”。仅在修改对象时才进行复制。（如有必要）部分意味着如果我们可以证明修改不能更改任何非局部变量，那么我们只需继续修改而不复制。

**说明书上没有**

无论我多么努力地搜索，我都无法在[R 手册](http://cran.r-project.org/manuals.html)中找到对“修改时复制”的引用，无论是在[R 语言定义](http://cran.r-project.org/doc/manuals/r-release/R-lang.html)中还是在[R 内部](http://cran.r-project.org/doc/manuals/r-release/R-ints.html)

**问题**

我的问题有两个部分：

1.  这是在哪里正式记录的？
2.  修改时复制如何工作？

例如，谈论“按引用传递”是否合适，因为*承诺*被传递给函数？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-02T13:08:55.547

## 按值调用

[R 语言定义](http://cran.r-project.org/doc/manuals/r-patched/R-lang.html)说明了这一点（在第[4.3.3 节参数评估](http://cran.r-project.org/doc/manuals/r-patched/R-lang.html#Argument-evaluation)中）

> 在 R 参数中调用函数的语义是**按值调用**。通常，提供的参数表现得好像它们是使用提供的值和相应形式参数的名称初始化的局部变量。**更改函数内提供的参数的值不会影响调用框架中变量的值**。[强调补充]

虽然这没有描述**copy-on-modify**工作的机制，但它确实提到更改传递给函数的对象不会影响调用框架中的原始对象。

附加信息，特别是关于**修改时复制方面的信息，请参见**[R Internals 手册](http://cran.r-project.org/doc/manuals/r-patched/R-ints.html)[1.1.2 Rest of Header](http://cran.r-project.org/doc/manuals/r-patched/R-ints.html#Rest-of-header)部分的`SEXP`s描述。具体来说，它指出[强调添加]

> 该`named`字段由`SET_NAMED`和宏设置和访问，`NAMED` 并取值和。R 有一个*“按值调用”的* 错觉，所以像这样的赋值`0``1``2`
> 
>  *```
> b <- a 
> ```
> 
> *似乎制作了一份副本`a`并将其称为`b`*. 但是，*如果既`a`没有也没有`b`随后改变，则不需要复制。* 真正发生的是新符号`b`绑定到与值对象上`a`的`named`字段相同的值（在本例中为`2`）。当一个对象即将被更改时，会查询该`named`字段。值`2`表示对象在更改之前必须被复制。（请注意，这并不是说必须复制，只是无论是否必要都应该复制。）值`0`表示已知没有其他 `SEXP`与该对象共享数据，因此可以安全地对其进行更改。的值`1`用于以下情况
> 
> ```
> dim(a) <- c(7, 2) 
> ```
> 
> 原则上，在计算期间存在 a 的两个副本（原则上）
> 
> ```
> a <- `dim<-`(a, c(7, 2)) 
> ```
> 
> 但不再如此，因此可以优化一些原始函数以避免在这种情况下复制。*

 *虽然这没有描述对象作为参数传递给函数的情况，但我们可以推断出相同的过程在运行，特别是考虑到前面引用的 R 语言定义中的信息。

## 函数评估中的 Promise

我认为将**承诺***传递*给函数是不正确的。参数传递给函数，使用的实际表达式存储为承诺（加上指向调用环境的指针）。只有当参数被评估时，存储在 promise 中的表达式才会在指针指示的环境中检索和评估，这个过程称为*强制*。

因此，我认为在这方面谈论*传递引用*是不正确的。R 具有*按值调用的*语义，但会尽量避免复制，除非对传递给参数的值进行评估和修改。

NAMED 机制是一种优化（正如@hadley 在评论中指出的那样），它允许 R 跟踪是否需要在修改时进行复制。正如 Peter Dalgaard 所讨论的，NAMED 机制的运作方式有一些微妙之处（在[R Devel 线程](http://r.789695.n4.nabble.com/Confused-about-NAMED-td4103326.html)中@mnel 在他们对问题的评论中引用）

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-05-04T03:18:26.750

我对它做了一些实验，发现 R 总是在第一次修改下复制对象。

你可以在我的机器上看到结果[http://rpubs.com/wush978/5916](http://rpubs.com/wush978/5916)

如果我犯了任何错误，请告诉我，谢谢。

* * *

# 测试一个对象是否被复制

我使用以下 C 代码转储内存地址：

```
#define USE_RINTERNALS
#include <R.h>
#include <Rdefines.h>

SEXP dump_address(SEXP src) {
  Rprintf("%16p %16p %d\n", &(src->u), INTEGER(src), INTEGER(src) - (int*)&(src->u));
  return R_NilValue;
} 
```

它将打印 2 个地址：

*   数据块地址`SEXP`
*   连续块的地址`integer`

让我们编译并加载这个 C 函数。

```
Rcpp:::SHLIB("dump_address.c")
dyn.load("dump_address.so") 
```

## 会话信息

这里是`sessionInfo`测试环境。

```
sessionInfo() 
```

## 写时复制

首先我测试了*copy on write*的属性，这意味着 R 仅在对象被修改时才复制它。

```
a <- 1L
b <- a
invisible(.Call("dump_address", a))
invisible(.Call("dump_address", b))
b <- b + 1
invisible(.Call("dump_address", b)) 
```

对象`b`从修改处复制`a`。R 确实实现了该`copy on write`属性。

# 就地修改向量/矩阵

然后我测试当我们修改向量/矩阵的元素时 R 是否会复制对象。

## 长度为 1 的向量

```
a <- 1L
invisible(.Call("dump_address", a))
a <- 1L
invisible(.Call("dump_address", a))
a[1] <- 1L
invisible(.Call("dump_address", a))
a <- 2L 
invisible(.Call("dump_address", a)) 
```

地址每次都会改变，这意味着 R 不会重用内存。

## 长向量

```
system.time(a <- rep(1L, 10^7))
invisible(.Call("dump_address", a))
system.time(a[1] <- 1L)
invisible(.Call("dump_address", a))
system.time(a[1] <- 1L)
invisible(.Call("dump_address", a))
system.time(a[1] <- 2L)
invisible(.Call("dump_address", a)) 
```

对于长向量，R 在第一次修改后重用内存。

而且，上面的例子还表明，当对象很大时，“就地修改”确实会影响性能。

## 矩阵

```
system.time(a <- matrix(0L, 3162, 3162))
invisible(.Call("dump_address", a))
system.time(a[1,1] <- 0L)
invisible(.Call("dump_address", a))
system.time(a[1,1] <- 1L)
invisible(.Call("dump_address", a))
system.time(a[1] <- 2L)
invisible(.Call("dump_address", a))
system.time(a[1] <- 2L)
invisible(.Call("dump_address", a)) 
```

似乎 R 仅在第一次修改时复制对象。

我不知道为什么。

## 改变属性

```
system.time(a <- vector("integer", 10^2))
invisible(.Call("dump_address", a))
system.time(names(a) <- paste(1:(10^2)))
invisible(.Call("dump_address", a))
system.time(names(a) <- paste(1:(10^2)))
invisible(.Call("dump_address", a))
system.time(names(a) <- paste(1:(10^2) + 1))
invisible(.Call("dump_address", a)) 
```

结果是一样的。R 仅在第一次修改时复制对象。*

# xpath - Scriptella：如何在通过 Xpath 从 XML 中获取数据时处理错误

> ID：15759118
> 
> 赞同：1
> 
> 时间：2013-04-02T08:09:04.287
> 
> 标签：xpath, etl, scriptella

我有一个关于从 XML xpath 获取数据的查询。

```
 <query connection-id="in">
    CommunicationCenter/Response/MenuData/Menu/Noun
<!--something I have to do inside script using the data fetched from xpath-->
</query> 
```

我的问题是 - 假设 1 个 XML 没有这种 Xpath 结构。它具有“OtherCommCenter/MenuData/Menu/Noun”或其他结构。然后，当我运行作业时，它说作业没有例外地执行，因为它没有从 xpath 获得任何值，所以什么也没发生。意味着它返回null。那么，**我该如何捕捉那里的错误呢？我必须知道 xpath 中的哪个元素会产生问题，或者如果这不可能，至少是哪个 xml 在结构中产生了这个错误？**

（**因为在我的项目中，我必须处理多个 XML，我通过将作业提交给 ExecutorService 来做到这一点，**就像您在[如何使用 Scriptella 的 ETL 多个文件中描述的那样？](https://stackoverflow.com/questions/12383025/how-to-etl-multiple-files-using-scriptella#)）

PS最后一部分，我是这样做的

```
<connection id="in" driver="xpath" url="$input"/> 
```

其中“input”是不同 xml 文件名的映射键。

有谁能够帮助我？有必要尽快了解我的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:06:24.933

这是一个人为的例子。假设有某种 XML - 人和汽车。

人.xml：

```
<people>
    <person></person>
</people> 
```

汽车.xml：

```
<cars>
    <car/>
</car> 
```

以下 xml 对 /people/person 和 /cars/car 运行 2 次查询，并在至少找到一条记录时设置全局标志：

```
<etl>
    <connection driver="jexl" id="jexl"/>
    <connection driver="xpath" id="xpath" url="input.xml"/>
    <connection id="log" driver="text"/>

    <query connection-id="xpath">
        /people/person
        <script connection-id="jexl">
            # set flag to true if at least one element was found
            etl.globals['people']=true;
        </script>
    </query>
    <script connection-id="log" if="!etl.globals['people']">
        WARNING: No people found in the XML file
    </script>

    <query connection-id="xpath">
        /cars/car
        <script connection-id="jexl">
            etl.globals['cars']=true;
        </script>
    </query>

    <script connection-id="log" if="!etl.globals['cars']">
        WARNING: No cars found in the XML file
    </script>
</etl> 
```

# php - Zend Framework 2 - 包装的表单元素导致验证失败

> ID：15759119
> 
> 赞同：1
> 
> 时间：2013-04-02T08:09:13.203
> 
> 标签：php, forms, annotations, zend-framework2

我正在使用包含包装元素的表单。包装发生在[此处](https://stackoverflow.com/a/15661426/1331671)描述的视图中。

我的动作是这样的：

```
 $myForm = [definition here]
 $myForm->setName('entity');
 $myForm->setWrapElements(true);

 $request = $this->getRequest();
 if ($request->isPost()) {

        $myEntity = new Entity();
        $myForm->bind($myEntity);
        $myForm->setData($request->getPost()->get('entity')); 
```

问题：调用`$myForm->isValid()`时无效。之后调用`$myForm->getData()`它是空的。

我在动作中重复了`setName`and`setWrapElements`但不管有没有它，它都不起作用。

有什么想法我可能做错了吗？表单定义保持不变，适用于非包装表单。所以我猜错误不在那里。

**PS：**回显`$myForm->isValid()`返回一个空字符串。有没有办法获取错误消息？表单字段填充了我输入的数据，并且没有显示任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:08:12.977

使用以下内容：

`$form->getMessages()`

会给你验证信息。

您可以转储内容或循环循环消息`foreach`。例如：

```
foreach($form->getMessages() as $msgId => $msg) {
    echo "Validation error: $msgId => $msg"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T01:43:44.207

您可以尝试在代码中添加行吗，正如我在 zend 的 Form.php 中看到的那样，在您调用 prepare() 之前，元素名称不会被“实体”包裹；

```
$myForm->setName('entity');
$myForm->setWrapElements(true);
$myForm->prepare(); // << add this 
```

但我不相信它会有所帮助，因为你描述的行为看起来没什么不同。Cau 你向我们展示了更多 Aydin 和 Sina 想要的 Entity 和 var_dumps 的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:13:17.760

在 ZF2 中，如果表单无效，则不绑定数据。原因是您在 isValid 的返回中看到了一个空字符串，因为返回类型是布尔值，请改用 var_dump。

# java - Java requestFocus() 在构造函数中不起作用

> ID：15759125
> 
> 赞同：2
> 
> 时间：2013-04-02T08:09:33.713
> 
> 标签：java, focus, request

在我的 Java Swing 应用程序中，Reuestfocus 方法在构造函数中不起作用。但如果我使用 requestfocus 和按钮动作监听器，它就可以工作。我想在表单加载时设置 Requestfocus。我不明白这里有什么问题。PS我使用JInternal Frame

```
 txtItemName.requestFocusInWindow (); // did not work
  txtItemName.requestFocus ();  // did not work 
```

* * *

```
 public ItemMgt() {

        initComponents();

        SwingUtilities.invokeLater(new Runnable() {
              @Override
              public void run() {
                    txtItemName.requestFocus(); // did not work
              }
        });
  } 
```

* * *

```
 private void formInternalFrameActivated(javax.swing.event.InternalFrameEvent evt) {
        txtItemName.requestFocus(); // did not work.
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:21:54.100

这种情况可能是因为您的组件不可见，因此 GUI 管理器无法对其设置焦点。

如文档中所述：

> (..) 组件必须是可显示的、可聚焦的、**可见**的，并且它的所有祖先（顶级窗口除外）都必须可见，才能授予请求。

通常，您应该避免在构造函数中使用如此健壮的逻辑。应该首先构建您的图形组件。完成后，应根据您的喜好对其进行调整。

建议使用[requestFocusInWindow() 代替 requestFocus()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#requestFocusInWindow%28%29)更多[信息](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#requestFocus%28%29)请访问教程：[如何使用焦点子系统](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-04T04:35:03.783

如果您使用的是 Netbeans IDE，那么它会容易得多。只需通过取消选中“属性”窗口中的“可聚焦”属性来确保文本框之前的所有控件都不可聚焦。这将使您的文本框成为第一个可聚焦控件，从而允许它在打开内部框架时接收焦点

# c++ - QwtPlot 鼠标点击事件

> ID：15759126
> 
> 赞同：0
> 
> 时间：2013-04-02T08:09:33.903
> 
> 标签：c++, events, qwt

我需要在 QwtPlot 绘图区域（不是整个小部件！）上获取鼠标单击的 x 和 y 坐标。问题是`bool event(QEvent*)`每个事件都只调用一个方法。我找到了一些解决方案（[http://www.qtcentre.org/archive/index.php/t-9502.html](http://www.qtcentre.org/archive/index.php/t-9502.html)），使用 QwtPlotPicker 但这对我不起作用，我使用的是 Qwt 6 并且有没有像`setSelectionState()`.

QwtPlot绘图区鼠标点击事件的实现方法有哪些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:51:02.943

与 5 相比，Qwt 6 发生了一些变化。

现在我们需要使用`QwtPlotPicker::setStateMachine(QwtPickerMachine)`方法设置状态机。有几个选项（派生类）：

*   `QwtPickerClickPointMachine`
*   `QwtPickerClickRectMachine`
*   `QwtPickerDragPointMachine`
*   `QwtPickerDragRectMachine`
*   `QwtPickerPolygonMachine`
*   `QwtPickerTrackerMachine`

取决于我们的需要。

接下来我们需要做的是使用我们的自定义插槽`connect()`发出信号，我们可以在其中获取 x 和 y 坐标或其他有趣的数据。`selected(...)``QwtPlotPicker`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-31T23:48:20.863

我正在使用 QwtPlotCanvas 子类中的鼠标事件方法捕获鼠标事件，并使用 QwtPlot 中的转换方法将鼠标事件 x 和 y 坐标映射到它们在图中表示的值。

创建 QwtPlotCanvas 的子类并像这样覆盖 mousePressEvent 方法。

```
void SpecialMapPlotCanvas::mousePressEvent (QMouseEvent* event) {
    QWidget::mousePressEvent (event);
    double x = plot() -> invTransform (plot() -> xBottom, event -> pos().x());
    double y = plot() -> invTransform (plot() -> yLeft, event -> pos().y());
    std::cout << "Values " << x << " " << y << "\n";
} 
```

然后通过实例化该类的一个对象并将其传递给 QwtPlot::setCanvas 在 QwtPlot 上设置画布。然后 SpecialMapPlotCanvas::plot() 为您提供了对拥有的 QwtPlot 的引用，其 invTransform 方法可用于将点击坐标转换为绘图值。如果您在 QwtPlot 本身上使用鼠标事件，您会得到错误的答案，因为这里的鼠标事件坐标与整个 QwtPlot 小部件区域（如您所说）相关，而不仅仅是画布。

# html - 将数据绑定到标签 MVC4

> ID：15759130
> 
> 赞同：0
> 
> 时间：2013-04-02T08:09:53.913
> 
> 标签：html, asp.net-mvc, asp.net-mvc-4

我将使用MVC4将数据绑定到标签，但这并不成功..数据来模型。这是我的代码。

```
<div class="newclass">
                        @Html.LabelFor(m => m.NewsTeam.NewsMgr, new { style = "width:100%", @class = "newcssval" })
                    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:14:17.553

这只会给你字段的名称（或者它是类中的显示值）。我怀疑您需要的是以下内容。

```
@Html.TextBoxFor(m => m.NewsTeam.NewsMgr,
                            new { @class = "newcssval", @readonly = true }) 
```

这将为您提供一个包含模型数据内容的只读文本框。

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T08:20:53.127

如果您的意图是简单地显示属性的值，请使用`Display`or`DisplayFor`助手：

```
@Html.DisplayFor(m => m.NewsTeam.NewsMgr) 
```

或者，完全忘记助手：

```
@Model.NewsTeam.NewsMgr 
```

如果属性包含 HTML，则需要使用`Raw`帮助程序：

```
@Html.Raw(Model.NewsTeam.NewsMgr) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T08:24:18.713

试试这样：

```
@Html.LabelFor(m => Model.NewsTeam.NewsMgr) 
```

或使用 DisplayFor

```
@Html.DisplayFor(m => m.NewsTeam.NewsMgr) 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T11:28:30.900

用这个，

@Model.NewsTeam.NewsMgr
它只会将属性的值显示为标签

或使用，

@Html.DisplayFor(m => m.NewsTeam.NewsMgr)

# python - 检查一组dicts是否都等于false的最快方法是什么？

> ID：15759131
> 
> 赞同：1
> 
> 时间：2013-04-02T08:10:01.660
> 
> 标签：python, python-2.7

例如，给定以下字典数组：

```
[{}, {}, {}, {}, {}, {}, {}] 
```

我想测试是否有任何非空字典，如果有则返回 True，例如：

```
[{}, {}, {}, {}, {}, {}, {}] == False
[{}, {}, {}, {}, {}, {}, {'key': 'val'}] == True 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T08:11:09.577

使用该[`any`](http://docs.python.org/2/library/functions.html#any)功能。

```
>>> any([{}, {}, {}, {}, {}, {}, {}])
False
>>> any([{}, {}, {}, {}, {}, {}, {'key': 'val'}])
True 
```

该`any`函数遍历一个可迭代对象并检查是否有任何值是`True`-ish。这些值是不包括在下面的任何值：

```
False
0  # and any value equal to it, e.g. 0.0
None
[]
()
# and any other empty container 
```

是`{}`一个空容器（字典），因此`False`在布尔上下文中求值。当您在列表中包含一个非空字典时，结果是`True`，因为列表中现在有一个`True`在布尔上下文中计算为的值。

# symfony - SonataAdminBundle 设置为 NULL $formMapper

> ID：15759132
> 
> 赞同：0
> 
> 时间：2013-04-02T08:10:09.637
> 
> 标签：symfony, null, sonata-admin

如果输入中没有写入任何内容，如何设置字段 NULL ？

我想要一个复选框来 NULLIFY 该字段。（即使字段为空，mysql字段也需要NULL）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T08:23:45.687

让我建议一种在 symfony2 和 sonata-admin 中实现这一目标的有效方法

专门用于具有 nullable = true 的布尔字段（nb：symfony2 中的 mysql 字段布尔实际上是 tinyint:1）

一旦它被编辑，这样的字段通常会传递给 true 但如果你拦截请求并评估给定字段的值，你可以像这样修改它：

在您的管理类中，假设对象的属性是*属性*

```
public function prePersist($object)
{
    if (in_array($object->getProperty(), array(NULL, '', '3',)))
        $object->setProperty(NULL);
}

public function preUpdate($object)
{
    if (in_array($object->getProperty(), array(NULL, '', '3',)))
        $object->setProperty(NULL);
} 
```

> 数字 3 是我在我的案例中为需要 null 的选择实现的

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
        ->add('property', 'choice', array(
            'choices' => array(
                '3' => 'Yes and No',
                '0' => 'No',
                '1' => 'Yes',
            ),
            'empty_value' => false,// unset this and empty would work also
            'required' => false,
        ))
    //    ->add('property', null, array('required' => false))// checkbox if bool
    ;
} 
```

希望有帮助！干杯，文斯

# javascript - 当元素在类属性中具有插值运算符时，addClass 不起作用

> ID：15759133
> 
> 赞同：0
> 
> 时间：2013-04-02T08:10:11.643
> 
> 标签：javascript, angularjs

我正在尝试在 angular.js`link`函数中使用 addClass 函数，我想我发现了一个错误。

**问题：**

如果我在模板`{{}}`的属性中有一个插值运算符 ( ) ，那么将默默地失败并且不添加新类。`class``addClass`

例如 -

考虑到这个链接功能：

```
angular.module('myApp', []).directive('afterRepeat', function() {
    return  {        
        link: function(scope,element, attrs){                                                
                if (scope.$index%2==0){
                    element.addClass("special");
                }
            }
    }
}); 
```

**该模板有效并正确添加了类**

```
<div class="item" ng-repeat="item in items" after-repeat>item {{$index}}</div> 
```

**这个模板不**

```
<div class="item{{$index}}" ng-repeat="item in items" after-repeat>item {{$index}}</div> 
```

**这是一个[演示问题的jsFiddle](http://jsfiddle.net/opherv/CRyZh/)**

我认为这是因为属性值在链接函数之后被评估 - 但这对我来说没有意义。链接功能不应该是链中的最后一步吗？

有谁知道如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:36:15.170

两种选择：

a) 在作用域上有一个方法，它将返回适当的类名  

```
$scope.getClass = function(index){
  var klass = 'item' + index;
  if(index % 2 === 0){
    klass += ' special';
  }
  return klass;
};

<div ng-class="getClass($index)" ng-repeat="item in items">item {{$index}}</div> 
```

b) 使用 ng-class 表达式：

```
<div 
  class="{{'item'+$index}}" 
  ng-class="{special: $index%2==0}" 
  ng-repeat="item in items"
>
  item {{$index}}
</div> 
```

[小提琴](http://jsfiddle.net/dDJyw/)

# sqlite - 如何将列值转换为 Sqlite 中的行？

> ID：15759136
> 
> 赞同：1
> 
> 时间：2013-04-02T08:10:21.200
> 
> 标签：sqlite

我在sqlite中有一个表值，例如..

我在这样的 sqlite 查询中获得了价值..

```
select * from tablename where id='101' and id='102' and id='1' and id='18'

101 Local Local Local   Local   Local   Local
102 9               12      9       12      9
  1 3:55    4:20    4:40    5:00    5:20    5:40
 18 4:50    5:15    5:35    5:55    6:15    6:35 
```

上面的值我需要在 sqlite 查询中转换，如下所示..

```
Local       9       3:55    4:50
Local       12      4:20    5:15
Local       9       4:40    5:35
Local       12      5:00    5:55
Local       9       5:20    6:15
Local       9       5:40    6:35 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:32:03.310

哦，所以你被一个糟糕的数据库设计困住了，你不能改变它......这很糟糕。它应该被分成 4 个表（至少）。无论如何，在这种特殊情况下，这是一种方法。

我假设第一个查询等效于：

```
SELECT id, F1, F2, F3, F4, F5, F6
FROM tablename
WHERE id IN (101,102,1,18) 
```

因此，您可以像这样进行转置/旋转/实际调用的任何内容：

```
SELECT 
  MAX(CASE WHEN id=101 THEN F1 END) R1,
  MAX(CASE WHEN id=102 THEN F1 END) R2,
  MAX(CASE WHEN id=1 THEN F1 END) R3,
  MAX(CASE WHEN id=18 THEN F1 END) R4
FROM tablename
UNION
SELECT 
  MAX(CASE WHEN id=101 THEN F2 END) R1,
  MAX(CASE WHEN id=102 THEN F2 END) R2,
  MAX(CASE WHEN id=1 THEN F2 END) R3,
  MAX(CASE WHEN id=18 THEN F2 END) R4
FROM tablename
UNION
SELECT 
  MAX(CASE WHEN id=101 THEN F3 END) R1,
  MAX(CASE WHEN id=102 THEN F3 END) R2,
  MAX(CASE WHEN id=1 THEN F3 END) R3,
  MAX(CASE WHEN id=18 THEN F3 END) R4
FROM tablename
UNION
SELECT 
  MAX(CASE WHEN id=101 THEN F4 END) R1,
  MAX(CASE WHEN id=102 THEN F4 END) R2,
  MAX(CASE WHEN id=1 THEN F4 END) R3,
  MAX(CASE WHEN id=18 THEN F4 END) R4
FROM tablename
UNION
SELECT 
  MAX(CASE WHEN id=101 THEN F5 END) R1,
  MAX(CASE WHEN id=102 THEN F5 END) R2,
  MAX(CASE WHEN id=1 THEN F5 END) R3,
  MAX(CASE WHEN id=18 THEN F5 END) R4
FROM tablename
UNION
SELECT 
  MAX(CASE WHEN id=101 THEN F6 END) R1,
  MAX(CASE WHEN id=102 THEN F6 END) R2,
  MAX(CASE WHEN id=1 THEN F6 END) R3,
  MAX(CASE WHEN id=18 THEN F6 END) R4
FROM tablename 
```

不幸的是，它以一种奇怪的方式排序。

我真的建议你说服负责人重新设计数据库。一些设计者认为拥有这种结构的表是“灵活的”并且“提高了性能”，但事实并非如此：使用此类表进行实际工作需要高度非平凡的查询，大多数 DBMS***无法优化***，因为它们从未被期望处理带着这样的暴行。

这样的表也打破了关系模型的想法。每个表必须有一个语句“模板”，例如，`CREATE TABLE S (id INTEGER, name TEXT, address TEXT)`可以有模板“ID ID 的供应商称为 NAME，位于 ADDRESS”。现在，当您将表中的内容放入模板时，该表中的每一行都会为您*生成关于世界的真实陈述*`S`：如果将包含一行`(1, "Bob & Co.", "Lime St., 125")`，那么它将告诉您“ID 为 1 的供应商称为 Bob & Co.，并且是位于石灰街，125 英寸。

所有的关系操作：选择、投影、连接、过滤等。不只是以特定方式组合表，不！它们还结合了“模板”，因此您可以说出查询为您提供的确切信息。反之亦然，如果你可以通过组合这些“模板”来表达你想要的信息，它几乎会自动给你一个相应的查询。

而且您必须使用的表格可能与没有理智的“模板”相关联。这就是为什么您必须编写无意义的查询才能获得有用的东西。请注意，我基本上可以猜测结果集的“模板”，

```
R1      R2   R3     R4
============================
Local   9   3:55   4:50
... 
```

这类似于“R2 类型的事件发生在 R1 地点，从 R3 时间开始，到 R4 时间结束”。我对么？

# jquery - Jquery 对象不支持此属性或方法

> ID：15759137
> 
> 赞同：1
> 
> 时间：2013-04-02T08:10:22.770
> 
> 标签：jquery, jquery-plugins

我的 JSP 页面中有以下内容，但出现错误

```
Message: Object doesn't support this property or method 
```

在 `$("#projects").dataTable({`

如果我删除

```
.makeEditable({
                   sAddURL: "addController"
                              }); 
```

那么没有js错误，我该如何解决这个问题？

**JS代码**

```
$(document).ready(function () {
    $("#projects").dataTable({ // error here
        "bServerSide": true,
        "sAjaxSource": "mycontroller",
        "bProcessing": true,
        "sPaginationType": "full_numbers",
        "bJQueryUI": true
    }).makeEditable({
        sAddURL: "addController"
    });
}); 
```

我有以下js文件

```
 <script src="scripts/jquery-1.4.4.min.js" type="text/javascript"></script>
 <script src="scripts/jquery.dataTables.editable.js" type="text/javascript">
 </script>
 <script src="scripts/jquery.jeditable.js" type="text/javascript"></script>
 <script src="scripts/jquery.validate.js" type="text/javascript"></script>
 <script src="scripts/jquery-ui.js" type="text/javascript"></script>

 <script src="scripts/jquery.js" type="text/javascript"></script>
 <script src="scripts/jquery.dataTables.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T08:15:31.600

您两次包含 jQuery 库，可能使用了两个不同的版本。`scripts/jquery-1.4.4.min.js`并且`scripts/jquery.js`都是 jQuery 库。

第二个将替换第一个，在此过程中，您将丢失添加到第一个实例的所有插件。由于您最终只使用了 dataTables 插件，因此该`makeEditable`调用将不起作用。这不是`dataTable`不存在的方法，错误只是在该行上报告，因为语句从那里开始。

删除 jQuery 库的第二个包含。如果它与 jQuery 库的 1.4.4 版本不兼容，您可能还需要不同版本的 dataTables 插件。或者使用更高版本的 jQuery。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T08:25:48.727

好吧，@Guffa 已经充分回答了。如果你愿意，你可以接受他的回答。:)

我只是想补充一点，那就是jQuery版本之间的冲突。这是因为如果您使用的插件与您所包含的 jQuery 版本不兼容（一段时间发生在我身上）。您可以添加与该插件兼容的另一个 jQuery 版本，以及使用[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:15:11.340

根据您提供的内容，我只能假设在加载`$('#projects').dataTable`之前正在执行。`jquery.dataTables.min.js`

# c++ - 如何在Visual Studio中打开fstream进行读写操作

> ID：15759139
> 
> 赞同：2
> 
> 时间：2013-04-02T08:10:33.700
> 
> 标签：c++, fstream

对于我的项目，我想使用 Fstream 打开文件，并且我想同时打开它进行读写操作。我正在使用 Visual Studio。
通常它只是，`file.open();`但由于 Visual Studio 中存在一个错误（您可以在本主题[如何使用 fstream 指针对文件进行操作？](https://stackoverflow.com/questions/15684052/how-do-i-operate-on-file-using-fstream-pointers)在对 sftrabbit 答案的评论中找到更多关于它的信息）并不那么容易。 `File.Open()`将打开文件仅用于读取（写入将无效）并以这种方式打开文件以进行我们需要做`file.open(path, std::fstream::in | std::fstream::out | std::fstream::trunc)`的写入，但这只会打开它用于写入，而不是用于读取。

任何想法如何只用一行打开文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:13:36.383

简单的代码。

```
stream file;
file.open(fileName,ios::in | ios::out); 
```

他在旗帜之间使用的符号就是`piping`符号。

# php - 将用户输入保存到页面

> ID：15759144
> 
> 赞同：1
> 
> 时间：2013-04-02T08:10:53.577
> 
> 标签：php, html, mysql

我觉得我的设计中缺少一个关键环节，我希望一些优秀的程序员可以填补我的空缺（这不是我真正的经验领域）

**是）我有的**

页面 - form.html

```
<div style="text-align:left">
<form action="addtoserver.php" method="post">
Server Name: <input type="text" name="servername"><br>
<br>
Server Address: <input type="text" name="serveraddress"><br>
<br>
Port Number: <input type="text" name="portnumber"><br>
<br>
Server Description :<TEXTAREA NAME="description" ROWS=3 COLS=30 ></TEXTAREA>
<br>
<input name="Submit" type="submit" value="Add Server" />
</form>
<div style="text-align:left"> 
```

页面 - addtoserver.php

```
<html>
<body>
Server Name :<?php echo $_POST["servername"]; ?><br>
<br>
Server Address : <?php echo $_POST["serveraddress"]; ?><br>
<br>
Port Number : <?php echo $_POST["portnumber"]; ?><br>
<br>
Server Description : <?php echo $_POST["description"]; ?><br>

<?php

$ip = $_POST['serveraddress'];
$port = $_POST['portnumber'];

if (!$socket = @fsockopen($ip, $port, $errno, $errstr, 30))
{
  echo "<centre><font color='red'><strong>Server Is Offline!</strong></font></center>";
}
else 
{
  echo "<centre><font color='green'><strong>Server Is Online!</strong></font></centre>";  

  fclose($socket);
}

?>

</body>
</html> 
```

一切都是肉汁

**目的**

我为我的网站设计了这个，用户将单击“添加服务器”链接并将被定向到表单页面，他们将填写表单页面并在提交后被定向到 addserver.php 页面。在此页面上，我不会将帖子适当地留在那里，并且下一个用户会进来并添加他的服务器，并将该帖子列在下面。

**我的困境**

我不确定下一步要做什么，我是否必须将用户输入添加到 Mysql，然后将其从 Mysql 导出到页面，或者是否有其他方法。如果从数据库导入，我是否必须编写一个 PHP 脚本才能让帖子一个接一个地出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:22:13.717

> 我不确定下一步要做什么，我是否必须将用户输入添加到 Mysql，然后将其从 Mysql 导出到页面？

如果您需要持久数据，那么您肯定需要一些静态存储，例如数据库或 XML 文件。无论哪种方式，是的，您都希望将用户输入存储到其中（确保您完全了解此类操作背后的安全需求），然后从那里检索它。

# javascript - 发布方法不起作用

> ID：15759145
> 
> 赞同：1
> 
> 时间：2013-04-02T08:10:58.060
> 
> 标签：javascript, python, html, ajax, google-app-engine

我想使用 ajax 使用 post 提交表单数据，因为在提交后的表单 post 中它被重定向到新页面。

```
<form id="myContactForm">
    <p>
        <label for="byour_name">Your name</label><input type="text" name="byour_name" value="" id="byour_name">
    </p>
    <p>
        <label for="byour_email_address">Your email address</label><input type="text" name="byour_email_address" value="" id="byour_email_address">
    </p>
    <p>
        What's on your mind?<br>
        <textarea name="Message" rows="10" cols="25"></textarea>
    </p>
    <p>
        <input type="submit" value="Send it!" onClick="sendMail()">
    </p>
</form>

function sendMail() {
    $.ajax( {
        url: "/email",
       type: "POST",
       data: $("#myContactForm").serialize(),
    success: function( response) {
                alert(response);
             },
      error: function() {
                alert('failure');
    }
    });
} 
```

每次我提出请求错误功能正在执行。我正在谷歌应用引擎上编写应用程序。我不断收到此错误：

```
self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe 
```

我的帖子请求处理程序是：

```
def post(self):

    Content = self.request.get("Message")
    byName = self.request.get("byour_name")
    byEmailAddress = self.request.get("byour_email_address")

    gmailUser = 'id@gmail.com'
    gmailPassword = 'password'
    dataSend = byName

    mail.send_mail(sender  = gmailUser,
                   to      = gmailUser,
                   subject ="Email Sent By : "+ byName + "@" + byEmailAddress,
                   body    = Content)
    self.response.out.write(byEmailAddress) 
```

在我点击提交按钮 URl 更改为：

```
http://localhost:8080/?byour_name=username&byour_email_address=userEmail@gmail.com%40gmail.com&Message=mlm%0D%0A#contact 
```

当我提出获取请求时，有人可以帮助我..但是发布请求如何更改以获取请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:45:08.500

您没有阻止默认提交。从您的 sendMail 函数返回 false，或者将事件作为参数并调用`preventDefault()`它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:30:05.010

我想我知道您要做什么，要解决此问题，您可以执行以下操作：

删除 onclick="sendMail()"

并将您的 JavaScript 函数更改为：

```
$('#myContactForm').submit(function () {
  $.ajax( {
    url: "/email",
    type: "POST",
    data: $("#myContactForm").serialize(),success: 
      function( response) {   
        alert(response);         
      },                  
      error: function(){                                              
        alert('failure');                                    
      }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T11:37:57.467

请删除表单标签并通过 id 获取所需的值，然后使用 ajax 方法。因为可能是ajax post和form request方法有冲突。我认为表单具有您之前所说的默认获取方法，这可能是每当您在表单获取方法之后单击提交第一个 ajax 发布请求时的原因，这可能是您的服务器抛出错误的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:57:14.020

```
<form id="myContactForm" method="post"> 
```

在您的表单标签上使用 post。我想这会对你有很大帮助。

# python-2.7 - src/lxml/etree_defs.h:9:31：致命错误：libxml/xmlversion.h：没有这样的文件或目录

> ID：15759150
> 
> 赞同：106
> 
> 时间：2013-04-02T08:11:32.463
> 
> 标签：python-2.7, lxml, pip

1.  我正在运行以下命令来安装该文件“ `pip install -r requirements.txt --download-cache=~/tmp/pip-cache`”中的软件包。

2.  requirements.txt 包含像这样的包

```
# Data formats
# ------------
PIL==1.1.7 # 

html5lib==0.90
httplib2==0.7.4
lxml==2.3.1

# Documentation
# -------------
Sphinx==1.1
docutils==0.8.1

# Testing
# -------
behave==1.1.0
dingus==0.3.2
django-testscenarios==0.7.2
mechanize==0.2.5
mock==0.7.2
testscenarios==0.2
testtools==0.9.14
wsgi_intercept==0.5.1 
```

在安装“lxml”包时，我收到以下错误

```
Requirement already satisfied (use --upgrade to upgrade): django-testproject>=0.1.1 in /usr/lib/python2.7/site-packages/django_testproject-0.1.1-py2.7.egg (from django-testscenarios==0.7.2->-r requirements.txt (line 33))
Installing collected packages: lxml, Sphinx, docutils, behave, dingus, mock, testscenarios, testtools, South
  Running setup.py install for lxml
    Building lxml version 2.3.1.
    Building without Cython.
    ERROR: /bin/sh: xslt-config: command not found

    ** make sure the development packages of libxml2 and libxslt are installed **

    Using build configuration of libxslt
    building 'lxml.etree' extension
    gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i686 -mtune=atom -fasynchronous-unwind-tables -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i686 -mtune=atom -fasynchronous-unwind-tables -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.linux-i686-2.7/src/lxml/lxml.etree.o -w
    In file included from src/lxml/lxml.etree.c:239:0:
    src/lxml/etree_defs.h:9:31: fatal error: libxml/xmlversion.h: No such file or directory
    compilation terminated.
    error: command 'gcc' failed with exit status 1
    Complete output from command /usr/bin/python -c "import setuptools;__file__='/root/Projects/ir/build/lxml/setup.py';execfile(__file__)" install --single-version-externally-managed --record /tmp/pip-SwjFm3-record/install-record.txt:
    Building lxml version 2.3.1.

Building without Cython.

ERROR: /bin/sh: xslt-config: command not found

** make sure the development packages of libxml2 and libxslt are installed **

Using build configuration of libxslt

running install

running build

running build_py

copying src/lxml/cssselect.py -> build/lib.linux-i686-2.7/lxml

copying src/lxml/__init__.py -> build/lib.linux-i686-2.7/lxml

copying src/lxml/sax.py -> build/lib.linux-i686-2.7/lxml

copying src/lxml/pyclasslookup.py -> build/lib.linux-i686-2.7/lxml

copying src/lxml/usedoctest.py -> build/lib.linux-i686-2.7/lxml

copying src/lxml/doctestcompare.py -> build/lib.linux-i686-2.7/lxml

copying src/lxml/_elementpath.py -> build/lib.linux-i686-2.7/lxml

copying src/lxml/ElementInclude.py -> build/lib.linux-i686-2.7/lxml

copying src/lxml/builder.py -> build/lib.linux-i686-2.7/lxml

copying src/lxml/html/clean.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/__init__.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/_dictmixin.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/ElementSoup.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/usedoctest.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/defs.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/builder.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/_html5builder.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/diff.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/html5parser.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/_diffcommand.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/_setmixin.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/soupparser.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/html/formfill.py -> build/lib.linux-i686-2.7/lxml/html

copying src/lxml/isoschematron/__init__.py -> build/lib.linux-i686-2.7/lxml/isoschematron

copying src/lxml/etreepublic.pxd -> build/lib.linux-i686-2.7/lxml

copying src/lxml/tree.pxd -> build/lib.linux-i686-2.7/lxml

copying src/lxml/etree_defs.h -> build/lib.linux-i686-2.7/lxml

copying src/lxml/isoschematron/resources/rng/iso-schematron.rng -> build/lib.linux-i686-2.7/lxml/isoschematron/resources/rng

copying src/lxml/isoschematron/resources/xsl/XSD2Schtrn.xsl -> build/lib.linux-i686-2.7/lxml/isoschematron/resources/xsl

copying src/lxml/isoschematron/resources/xsl/RNG2Schtrn.xsl -> build/lib.linux-i686-2.7/lxml/isoschematron/resources/xsl

copying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/iso_svrl_for_xslt1.xsl -> build/lib.linux-i686-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1

copying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/iso_schematron_message.xsl -> build/lib.linux-i686-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1

copying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/iso_schematron_skeleton_for_xslt1.xsl -> build/lib.linux-i686-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1

copying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/iso_abstract_expand.xsl -> build/lib.linux-i686-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1

copying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/iso_dsdl_include.xsl -> build/lib.linux-i686-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1

copying src/lxml/isoschematron/resources/xsl/iso-schematron-xslt1/readme.txt -> build/lib.linux-i686-2.7/lxml/isoschematron/resources/xsl/iso-schematron-xslt1

running build_ext

building 'lxml.etree' extension

gcc -pthread -fno-strict-aliasing -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i686 -mtune=atom -fasynchronous-unwind-tables -D_GNU_SOURCE -fPIC -fwrapv -DNDEBUG -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m32 -march=i686 -mtune=atom -fasynchronous-unwind-tables -D_GNU_SOURCE -fPIC -fwrapv -fPIC -I/usr/include/python2.7 -c src/lxml/lxml.etree.c -o build/temp.linux-i686-2.7/src/lxml/lxml.etree.o -w

In file included from src/lxml/lxml.etree.c:239:0:

src/lxml/etree_defs.h:9:31: fatal error: libxml/xmlversion.h: No such file or directory

compilation terminated.

error: command 'gcc' failed with exit status 1

----------------------------------------
Command /usr/bin/python -c "import setuptools;__file__='/root/Projects/ir/build/lxml/setup.py';execfile(__file__)" install --single-version-externally-managed --record /tmp/pip-SwjFm3-record/install-record.txt failed with error code 1
Storing complete log in /root/.pip/pip.log 
```

任何人都可以检查并指导我会出现什么问题以及为什么？缺少安装的任何软件包。

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2013-04-02T09:48:48.370

使用安装 libxslt-devel 和 libxml2-devel

```
sudo apt-get install libxml2-dev libxslt1-dev 
```

安装后按照上面的

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-04-02T09:39:31.000

1.  使用安装 Cython

    `easy_install Cython`

2.  完成 cython 后，使用安装 libxslt-devel 和 libxml2-devel

    `yum install libxslt-devel libxml2-devel`

这对我有用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-07-12T16:41:14.120

选择的答案是对的，但我只是想为那些使用 Fedora 的人添加：使用 dnf 时`libxslt1`调用。`libxslt`所以命令是：

```
sudo dnf install libxml2-devel libxslt-devel 
```

`devel`dnf 与`dev`apt-get 相同。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-02-01T12:37:29.647

经过认证的答案完美无缺。但只需添加 alpine 的安装命令即可安装 libxslt-devel & libxml2-devel

```
apk add --update libxml2-dev libxslt-dev 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-08-27T12:47:18.460

如果没有 sudo 权限，您可以使用以下命令安装 lxml：

```
STATIC_DEPS=true pip install lxml 
```

如[lxml 文档中所述](http://lxml.de/installation.html#using-lxml-with-python-libxml2)

# game-physics - 子弹物理：如何使软体“静止”（有点）？

> ID：15759154
> 
> 赞同：0
> 
> 时间：2013-04-02T08:11:47.767
> 
> 标签：game-physics, bullet

我对 Bullet 还很陌生，一周前开始使用它。我主要玩刚体，一切都按预期工作，但现在我还需要在我的模拟中添加柔体，事情变得有点复杂。

**我想要什么：**我必须创建一个简单但不切实际的场景：主要对象是一个悬浮在世界中心的可变形球，它不靠在任何东西上，只是“漂浮”在那里。然后，我应该能够将各种刚体扔向球，使其变形但不移动。

**我尝试了什么：**我的问题是我不知道如何让我的主要软体漂浮在场景的中心。我尝试将其每个节点的质量设置为零，但显然它不再变形。我还改变了它的总质量，它给出了相同的结果（我不确定它是否与将所有质量设置为 0 相同）。我也尝试给它 STATIC 标志，但这并没有改变任何东西。

**我可以尝试的方法（但似乎过于复杂）：**一种可能性是将球悬挂到具有点对点约束的固定位置，但我担心它会使球变形并可能产生不需要的摆动运动。我的另一个想法是将球封闭在一个由飞机制成的隐形盒子中，该盒子将其保持在空中但不会与其他物体（尤其是我将扔的刚性物体）发生反应，但我担心这种解决方案会实施起来很麻烦，并且当球压在盒子上时盒子的表面可以辨认。

**总结：**我需要一个保持相同中心的球形软体。如果我向它扔东西，我应该看到它的表面波纹，但它不应该“全球”移动。有没有办法干净地做到这一点？

谢谢您的帮助！

（我在 Bullet 论坛上问过同样的问题，但没有答案）

# windows-8 - 使用 C# 显示销售管道漏斗图 windows 8 应用程序

> ID：15759160
> 
> 赞同：0
> 
> 时间：2013-04-02T08:12:09.077
> 
> 标签：windows-8, crm

我想创建一个销售管道漏斗图，并将其显示给用户。有没有办法使用 C# 或任何替代方法使用 CRM sdk 来实现这一点？

罗希特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:13:02.337

您不能使用 CRM SDK 在另一个应用程序中显示漏斗图。为此，您必须使用另一个图表 API，并使用 CRM SDK 从 CRM 获取数据。看看[这个](http://www.highcharts.com/)图表 api。

# java - 相对尺寸不起作用

> ID：15759165
> 
> 赞同：2
> 
> 时间：2013-04-02T08:12:23.383
> 
> 标签：java, swing, user-interface, sizing

我一直在尝试制作一个相对于窗口大小大小的 JLabel，但由于某种原因，这个 JLabel 没有出现在屏幕上。

这是包含基本界面的 MainGUI 类中使用的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class MainGUI extends JFrame{

    JPanel core;
    GridBagConstraints c;

    JLabel[] sts;

    public MainGUI(){

       core = new JPanel(new GridBagLayout()); 
       getContentPane().add(core, BorderLayout.CENTER);
       setDefaultCloseOperation(EXIT_ON_CLOSE);
       setSize(500, 500); 

       sts = new JLabel[10];

       int width = (int)(66/100) * getWidth(), height = (int)(75/100) * getHeight();       //problem: due to these sizes the JLabel is not appearing

       for(int i = 0; i < sts.length; i++){ 
          sts[i] = new JLabel("test");
          sts[i].setOpaque(true);
          sts[i].setBackground(Color.BLACK);
          sts[i].setForeground(Color.BLACK);
          sts[i].setPreferredSize(new Dimension(width,height)); //size being set
       }

       c = new GridBagConstraints();

       c.gridx = 0;
       c.gridy = 0;

       core.add(sts[1], c);

    }

} 
```

任何帮助找到解决方案将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:18:18.370

几个问题——

1.  标签的前景色和背景色相同
2.  您需要在标签上设置一些文本
3.  检查是否正确计算了首选大小，因为如果该行被注释掉，则会显示标签。计算的高度和宽度为零。

这将始终返回零，因为除法的结果是 int-

```
int width = (int)(66/100) * getWidth(); 
```

做了-

```
 int width = (int)(((float)66/100) * getWidth()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:18:07.770

试试[RelativeLayout](https://code.google.com/p/relativelayout/)库。[Wiki 上](https://code.google.com/p/relativelayout/wiki/RelativeLayoutTutorial)有一个教程。

# magento - 将新目录价格规则应用于 Magento 中的当前购物车

> ID：15759167
> 
> 赞同：0
> 
> 时间：2013-04-02T08:12:31.837
> 
> 标签：magento, magento-1.5

我为“批发”客户组中的客户创建了新的目录价格规则。我为该组分配了一个客户。客户当前在其购物车中有商品，但这些商品的价格未更新以反映新的目录价格规则。有没有办法更新这些产品的报价，而不需要客户删除所有商品并将其重新添加到他们的购物车中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:08:47.953

我找到了解决该问题的方法。如果你去废弃的购物车，点击客户的购物车，点击创建订单，将商品添加到订单中，然后将它们放回客户的购物车......更新的价格现在将反映在购物车中。

# android - 在android中解析json 2数组（嵌入）

> ID：15759168
> 
> 赞同：2
> 
> 时间：2013-04-02T08:13:01.400
> 
> 标签：android, arrays, json, parsing

我正在尝试查找jsonObject**距离中的****值**（即 10194）

 **```
{
   "destination_addresses" : [ "Burnaby, BC, Canada" ],
   "origin_addresses" : [ "Vancouver, BC, Canada" ],
   "rows" : [
      {
         "elements" : [
            {
               "distance" : {
                  "text" : "10.2 km",
                  "value" : 10194
               },
               "duration" : {
                  "text" : "19 mins",
                  "value" : 1118
               },
               "status" : "OK"
            }
         ]
      }
   ],
   "status" : "OK"
} 
```

我写了这段代码，但它给了我 null

```
 rows = jObj.getJSONObject(TAG_ROWS);
       JSONArray elements = new JSONArray (rows.getString(TAG_ELEMENTS));
       for (int i=0; i<elements.length();i++){
            JSONObject obj = elements.optJSONObject(i);
            JSONObject distance = obj.getJSONObject(TAG_DISTANCE);
             value= distance.getString(TAG_VALUE); 
```

任何的想法 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:18:20.103

根据您的`JSON`, even`rows`是 type `JSONArray`，但是您正在获取行，这种方式

```
rows = jObj.getJSONObject(TAG_ROWS); 
```

因此，问题。

你需要这样获取`rows`：-

```
JSONArray rows = jObj.getJSONArray(TAG_ROWS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:19:14.540

对象 'rows' 必须是 JSONArray 类型，因为它包含的是一个数组。之后，您必须执行另一个 for 并获取另一个数组，即“元素”，然后为第二个数组执行循环。你必须得到类似的东西：

```
rows = jObj.getJSONArray(TAG_ROWS);
 for (int i=0; i<rows.length();i++){
       JSONArray elements = new JSONArray (rows.getString(TAG_ELEMENTS));
       for (int j=0; j<elements.length();j++){
            JSONObject obj = elements.optJSONObject(j);
            JSONObject distance = obj.getJSONObject(TAG_DISTANCE);
             value= distance.getString(TAG_VALUE);
       }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:48:56.030

您必须执行以下操作

```
try {
    JSONObject jsonObj = new JSONObject(YOUR-JSON-STRING-HERE);

    String destination = jsonObj.getString("destination_addresses");
    // printing the destination and checking wheather parsed correctly
    Log.v("Destination", destination);

    JSONArray jarRow = jsonObj.getJSONArray("rows");
    for(int i=0;i<jarRow.length(); i++){
        // creating an object first
        JSONObject ElementsObj = jarRow.getJSONObject(i);
        // and getting the array out of the object
        JSONArray jarElements = ElementsObj.getJSONArray("elements");
        for(int j=0; j<jarElements.length(); j++){
            JSONObject distanceObj = jarElements.getJSONObject(j).getJSONObject("distance");
            String distanceStr = distanceObj.getString("value");
            Log.v("finally getting distance : ", distanceStr);
        }
    }

} catch (JSONException e) {
    e.printStackTrace();
} 
```

这是来自**DDMS的屏幕截图**

![在此处输入图像描述](https://i.stack.imgur.com/lsuh1.png)**

# windows-phone-8 - 为什么 XAML TextBox 中没有类似于 PlaceHolder 的属性

> ID：15759169
> 
> 赞同：9
> 
> 时间：2013-04-02T08:13:08.220
> 
> 标签：windows-phone-8

windows phone 8 中的 xaml 中的文本框是否有任何**“占位符类型”属性可用**

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-02T09:11:54.217

在官方的[Windows Phone 工具包](https://phone.codeplex.com/)中有 PhoneTextBox ，[这里](http://www.geekchamp.com/articles/windows-phone-toolkit-phonetextbox-in-depth)有介绍。

示例代码：

```
<toolkit:PhoneTextBox Hint="Password"/> 
```

![在此处输入图像描述](https://i.stack.imgur.com/UfHUf.jpg)

将工具包添加到您的项目：在您的包管理器控制台中输入以下内容：
`PM> Install-Package WPtoolkit`
并且

```
xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit" 
```

页面内`<phone:PhoneApplicationPage`标签`xaml`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:09:18.433

TextBox 没有占位符属性。我使用以下解决方案来解决用户名文本框的问题：

XAML：

```
<Grid>
    <TextBlock Name="UsernamePlaceholder" Text="Username" />
    <TextBox Name="UsernameTextBox" Text="" GotFocus="TextBox_GotFocus" LostFocus="TextBox_LostFocus"/>
</Grid> 
```

代码：

```
private void TextBox_GotFocus(object sender, RoutedEventArgs e) 
{    
    UsernamePlaceholder.Visibility = Visibility.Collapsed;
}

private void TextBox_LostFocus(object sender, RoutedEventArgs e)
{
    if (sender is TextBox)
    {
        var textbox = sender as TextBox;
        if (string.IsNullOrEmpty(textbox.Text))
        {
            UsernamePlaceholder.Visibility = Visibility.Visible;
        }
    }
} 
```

这基本上将 TextBox 替换为 Grid 元素，其中包含一个 TextBox 和一个 TextBlock（用作占位符）。然后当文本框被聚焦时，文本块被隐藏，当它失去焦点时，如果文本框为空，则显示文本块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-18T15:11:09.627

试试下面的代码：

```
<TextBox x:Name="InvoiceDate" Text="" Width="300"  TextAlignment="Left" Height="30" Grid.Row="0" Grid.Column="3" Grid.ColumnSpan="2" />
                    <TextBlock IsHitTestVisible="False" Text="Men att läsa" Width="300"  TextAlignment="Left" Height="30" Grid.Row="0" Grid.Column="3" Grid.ColumnSpan="2" Padding="5, 5, 5, 5"  Foreground="LightGray">
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Text, ElementName=InvoiceDate}" Value="">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>                                    
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T22:19:31.357

我的解决方案是基于 PKENO 的回答

**XAML（用户控件）：**

```
<UserControl x:Class="FestivalProject.Controls.TextBoxPH"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"            
             mc:Ignorable="d">
    <TextBox x:Name="testTextBox" Margin="0" LostFocus="testTextBox_LostFocus" GotFocus="testTextBox_GotFocus"/>
</UserControl> 
```

**用户控件背后的代码：**

```
public partial class TextBoxPH : UserControl
    {
        private String _Text;

        public String Text
        {
            get { return _Text; }
            set { 
                _Text = testTextBox.Text = value;               
            }
        }

        private String _PlaceHolder;
        public String PlaceHolder
        {
            get { return _PlaceHolder; }
            set { 
                _PlaceHolder =testTextBox.Text = value;      
            }
        }        

        public TextBoxPH()
        {           
            InitializeComponent();  
        }   

        private void testTextBox_LostFocus(object sender, RoutedEventArgs e)
        {
            if (string.IsNullOrEmpty(testTextBox.Text)) testTextBox.Text = PlaceHolder;              

        }

        private void testTextBox_GotFocus(object sender, RoutedEventArgs e)
        {
            if (testTextBox.Text.Equals(PlaceHolder, StringComparison.OrdinalIgnoreCase)) testTextBox.Text = string.Empty;

        }
    } 
```

**XAML（在窗口中）：**

```
<txtPH:TextBoxPH  Margin="5"  Grid.ColumnSpan="2" PlaceHolder="PlaceholderText"/> 
```

可能不是最有效的方法，但它确实有效。

# sql-server - EF 阻止对数据库表的访问

> ID：15759170
> 
> 赞同：1
> 
> 时间：2013-04-02T08:13:13.007
> 
> 标签：sql-server, entity-framework

我有`CodeFirst`网络应用程序`MVC4+EF+SQLServer`。有`Statistic`带`DateStamp(DateTime)`列的表。Web 应用程序`Statistic`对这样的每个请求在表中执行计算（Where 和 Count）

```
public IQueryable<Statistic> GetStatisticForCurrentMonthByIp(string ip)
{
   return _context.Statistic.Where(p => p.Ip == ip && SqlFunctions.DateDiff("mm", DateTime.UtcNow, p.DateStamp) == 0);
} 
```

上面的方法在控制器中这样调用

```
var statList = _statisticService.GetStatisticForCurrentMonthByIp(queueItem.Ip).ToList(); 
```

问题是有时我需要删除`Statistic`表中的所有记录，但网络应用程序锁定了`Statistic`表。当我尝试在 SQL Server 中执行 SQL 时，它会冻结。

```
DELETE FROM Statistic 
```

知道如何解决问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:23:54.807

> 它只是冻结

因此，您需要调查 SQL Server 中的阻塞。一个简单的工具是[活动监视器](http://msdn.microsoft.com/en-us/library/cc879320(v=sql.105).aspx)。这有点过时但仍然有用：[了解和解决 SQL Server 阻塞问题](http://support.microsoft.com/kb/224453)。

您会发现 reads block writes 和 writes block reads，可能是因为您的隔离级别（请参阅[using new TransactionScope() Considered Harmful](https://docs.microsoft.com/en-us/archive/blogs/dbrowne/using-new-transactionscope-considered-harmful)）。

在生产中使用批量删除是非常有问题的，并且总是导致阻塞。一个更好的选择是[`TRUNCATE`](http://msdn.microsoft.com/en-us/library/ms177570.aspx)如果你真的想核对内容。DELETE 应该小批量使用，不仅可以防止彻底阻塞，而且您也不会由于容纳*每一行删除*所需的增长而导致大量日志中断。

> 知道如何解决问题吗？

查看[数据库引擎中基于行版本控制的隔离级别](http://msdn.microsoft.com/en-us/library/ms177404(v=sql.105).aspx)。确保您不使用`new TransactionScope()`.

# c - 每1分钟执行一次程序

> ID：15759173
> 
> 赞同：1
> 
> 时间：2013-04-02T08:13:24.360
> 
> 标签：c

我想执行每 1 分钟调用一次函数的简单 c 程序。请帮我编码。

```
#include<stdio.h>
main()
{
    printf("hello");
    fun1();
    printf("welcome");
    delay(1000);

}
void  fun1()
{
    printf("fun1 is called");

    delay(10000);
}

void delay(int k)
{

    for(i=0;i<k;i++)
    {}
} 
```

我想要的输出格式：

```
hello
welcome 
```

在 10 条语句之后的每 10 次，它应该打印 fun1 被调用，然后它应该继续打印 hello welcome another 10 次

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:18:39.230

您可以使用[睡眠](http://www.gnu.org/software/libc/manual/html_node/Sleeping.html)功能。它将延迟执行一段给定的时间。[在这里](https://stackoverflow.com/a/3379146/147072)和[这里](https://stackoverflow.com/a/264363/147072)你有更多的资源和例子。

以我发布的第一个 SO 链接（特定于 Windows）中的 Anon 先生为例：

```
#include <windows.h>
#include <stdio.h>

int main() {
    printf( "starting to sleep...\n" );
    Sleep( 3000 );   // sleep three seconds
    printf( "sleep ended\n" );
} 
```

提示是要注意大写的 S。

祝你好运！

# php - codeigniter 视频上传

> ID：15759178
> 
> 赞同：4
> 
> 时间：2013-04-02T08:13:36.557
> 
> 标签：php, codeigniter

我正在尝试上传视频。

**我的 mime 配置：**

```
'wmv' => array('video/wmv', 'video/x-ms-wmv', 'flv-application/octet-stream', 'application/octet-stream'),
'flv' => array('video/x-flv', 'flv-application/octet-stream', 'application/octet-stream'),
'mp4' => 'video/mp4',
'3gp' => 'video/3gpp' 
```

**我的观点：**

```
 <div id="upload">
        <?php
        echo form_open_multipart('audio');
        echo form_upload('userfile');
        echo form_submit('upload','Upload');
        echo form_close();
        ?>
</div> 
```

**我的控制器：**

```
 function index() {
    $this->load->model('Audio_model');
    if ($this->input->post('upload')) {
        $this->Audio_model->do_upload();
    }
    $this->load->view('v_audio');
} 
```

**我的模型：**

```
 function do_upload() {
    $config = array(
        'allowed_types' =>  'mp4|3gp|flv|mp3',
        'max_size'=>'100000',
        'upload_path' => $this->gallery_path
    );
    $this->load->library('upload', $config);
    if ($this->upload->do_upload()) {
        echo "Upload success!";
    } else {
        echo "Upload failed!";
    }
} 
```

我可以成功上传 mp3，但不能上传 mp4、3gp 或 flv，它们都无法上传。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-13T13:02:59.267

在 config/mimes.php 中添加 mime 类型

```
'flv'    => array('video/x-flv', 'flv-application/octet-stream', 'application/octet-stream'),
'mp4' => 'video/mp4',
'3gp' => 'video/3gpp' 
```

并在根文件夹中制作 Video 文件夹就足够了.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:30:40.107

检查上传路径并将名称传递给 $this->upload->do_upload('userfile') 并在 php.ini 中增加 max_size(upload_max_filesize = 10M)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-04T11:15:40.150

```
$allowedExts = array("jpg", "jpeg", "gif", "png", "mp3", "mp4", "wma");
        $extension = pathinfo($_FILES['file']['name'], PATHINFO_EXTENSION);

        if ((($_FILES["file"]["type"] == "video/mp4")
            || ($_FILES["file"]["type"] == "audio/mp3")
            || ($_FILES["file"]["type"] == "audio/wma")
            || ($_FILES["file"]["type"] == "image/pjpeg")
            || ($_FILES["file"]["type"] == "image/gif")
            || ($_FILES["file"]["type"] == "image/jpeg"))

                && ($_FILES["file"]["size"] < 20000)
                && in_array($extension, $allowedExts))

            {
                    if ($_FILES["file"]["error"] > 0)
                            {
                                  echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
                            }
                    else
                            {
                                  echo "Upload: " . $_FILES["file"]["name"] . "<br />";
                                  echo "Type: " . $_FILES["file"]["type"] . "<br />";
                                  echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
                                  echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";
                                  if (file_exists("upload/" . $_FILES["file"]["name"]))
                                        {
                                                echo $_FILES["file"]["name"] . " already exists. ";
                                        }
                                  else
                                        {
                                                move_uploaded_file($_FILES["file"]["tmp_name"],
                                                "video/" . $_FILES["file"]["name"]);
                                                echo "Stored in: " . "video/" . $_FILES["file"]["name"];
                                        }
                            }
            }
        else
            {
                    echo "Invalid file"; 
```

# actionscript-3 - 如何在组容器上使用铅笔绘制不同的形状并在 flex4 中调整大小和旋转它？

> ID：15759179
> 
> 赞同：2
> 
> 时间：2013-04-02T08:13:36.763
> 
> 标签：actionscript-3, apache-flex, flex4.6

可以执行所有操作，如移动、旋转、调整绘制形状的大小。我使用的是 as3 和 flex4.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:14:23.417

似乎您必须使用对象句柄库来移动、旋转、调整形状大小……您可以从以下链接下载此库。

[https://github.com/marc-hughes/ObjectHandles](https://github.com/marc-hughes/ObjectHandles)

[http://www.objecthandles.com/](http://www.objecthandles.com/)

# iphone - UIWebView - YouTube 视频横向模式 - iOS6

> ID：15759180
> 
> 赞同：0
> 
> 时间：2013-04-02T08:13:37.723
> 
> 标签：iphone, xcode, video, ios6, landscape

我想以全屏（横向模式）在 UIWebView 中播放 YouTube 视频，但我所有的其他视图都只能在纵向模式下。怎么可能只有 YouTube 视频处于横向模式？

我是否必须在应用目标摘要中启用横向模式？

感谢帮助！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:11:01.760

如果您的应用程序使用多个方向，那么您需要在项目目标摘要中定义它们。例如纵向、横向左侧和横向右侧。

如果您的设备适用于 iOS5，请使用以下方法（**在 iOS6 中已弃用**）旋转到特定方向。

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
```

如果您的设备在 iOS6 上运行。您应该使用以下方法。

[– shouldAutorotate –supportedInterfaceOrientations & –preferredInterfaceOrientationForPresentation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

如果您的应用程序支持这两个版本，那么您可以保留这两种方法并检查您的视图控制器是否通过以下方式响应特定方法

```
if ([self respondsToSelector:@selector(methodToCheck)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:11:55.110

```
myTableView.autoresizingMask =   UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;

CGAffineTransform rotate = CGAffineTransformMakeRotation(1.57079633);
[myTableView setTransform:rotate];
self.view = myTableView; 
```

这也可以*

确保我在tableview中完成了

# arrays - 如何从二进制文件中读取整个结构数组

> ID：15759185
> 
> 赞同：2
> 
> 时间：2013-04-02T08:14:23.380
> 
> 标签：arrays, structure

你能帮我处理这段代码吗？我的问题是我无法从二进制文件中读取整个结构。（顺便说一句，我完成了编写部分）我在 C 中创建了一个结构

```
struct inventory
{
    char c_name[30];
    char model[30];
    char color[30];
    float p_price;
    float s_price;
    float profit;
}c_inven[100]; 
```

我想做的是阅读它并将其发送到其他功能，该功能将其存储在另一个结构中。这是我用来阅读的代码

```
fread(&c_inven,sizeof(inventory),1,cars); 
```

我正在使用这个函数调用发送它

```
sort(c_inven);
*printing[1]* 
```

这个函数头接收它 void sort(struct inventory sort_inven[100]) 但是当我用 for 循环打印值时，它只打印 c_inven[0].xxxxxx 的值，并在我移动到 c_inven 时返回空白。 [1]。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:42:08.847

您的 fread 调用仅读取一个条目。你需要打电话

```
fread(&c_inven,sizeof(struct inventory),100,cars); 
```

假设您在`c_inven`指向的地方分配了足够的内存。

此外，如果您检查`fread`的返回值，它会告诉您它读取了多少条目。

打印`c_inven[1]`打印那里的任何东西，也许是内存中的下一个变量。

# javascript - JavaScript 在除 Firefox 之外的任何浏览器中都能正常工作？

> ID：15759186
> 
> 赞同：0
> 
> 时间：2013-04-02T08:14:31.720
> 
> 标签：javascript, prototypejs, dom-events

好的，这是我的 JavaScript

```
<script type="text/javascript" language="JavaScript">
function manageCart(task,item) {
var url = 'managecart.php';
var params = 'task=' + task + '&item=' + item;
var ajax = new Ajax.Updater(
          {success: ''},
          url,
          {method: 'get', parameters: params, onFailure: reportError});
}

function reportError(request) {
$F('cartResult') = "An error occurred";
} 
```

这是 HTML

```
<p>
<a href="javascript:void(0)" onclick="manageCart('add',83)">Add to cart</a>
</p> 
```

该脚本在 Firefox 中不起作用，我运行了一些 Firefox JS 调试器，但它们没有显示任何错误。我的 JavaScript 不太好，所以如果可以的话，请帮助我 :) 这个脚本实际上使用了 Prototype 库，如果它能让事情更清楚的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:25:02.187

对于这种类型的 Ajax 调用，请不要使用`Ajax.Updater`，因为它旨在使用 ajax 响应的内容更新特定元素。我相信您只想进行一个简单的单个 ajax 调用，因此 using`Ajax.Request`将是您想要使用的。

使用 Ajax.Updater 的原始代码

```
var url = 'managecart.php';
var params = 'task=' + task + '&item=' + item;
var ajax = new Ajax.Updater(
      {success: ''},
      url,
      {method: 'get', parameters: params, onFailure: reportError}); 
```

使用 Ajax.Request 的代码

```
var url = 'managecart.php';
var params = 'task=' + task + '&item=' + item;
var ajax = new Ajax.Request(url,
     {
          method: 'get',
          parameters: params,
          onFailure: reportError,
          onSuccess: function(){
              console.log('It Worked');
          }
     }); 
```

我在这个调用中放置了一个成功处理程序，只是为了确认它对你有用——它应该输出到你的控制台。您可以将其删除或`console.log()`在您满意时对其进行评论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:40:17.887

我在 FireBug 上花了更多时间，发现了错误。

时间戳：03.04.2013 10:36:38 错误：ReferenceError：无效分配左侧源文件：[http](http://www.example.com/index.php) ://www.example.com/index.php 行：413，列：18 源代码：

```
('cartResult') = "An error occurred"; 
```

Firefox 迫切希望语句看起来像这样：

```
('cartResult') == "An error occurred"; 
```

# unit-testing - 实现长时间运行和依赖测试的最佳方法

> ID：15759188
> 
> 赞同：0
> 
> 时间：2013-04-02T08:14:36.660
> 
> 标签：unit-testing, testing, jenkins

我们有集成测试。它们中的大多数都很简单，但是当我们应该准备数据并检查它们而不是等待 5 小时时，我们有几个用例。准备好的数据应该由系统守护进程处理，我们应该在 5 小时后再次检查它们。

我们的问题：

1.  如果我们将所有测试作为单个项目，那么我们只会在 5 小时内看到测试结果，jenkins 有没有办法查看当前测试结果状态？

2.  在phase_A运行的地方和几个小时后phase_B运行后实现测试的最佳实践是什么，它取决于phase_A

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:39:22.910

由于测试相互依赖，并且您关心两个过程的集成。我会说您想更改测试，以使完成的时间大大少于 5 小时。

考虑将时间差移到配置文件中，以便在测试中，例如将时间设置为 5 秒。这类似于将数据库连接设置到测试数据库而不是生产数据库。您主要担心的是 Process_A 的结果发生在 Process_B 之后的某个时间间隔，并且两者需要交互。

# sql - oracle select & update 或 select & insert 在多线程环境中

> ID：15759191
> 
> 赞同：2
> 
> 时间：2013-04-02T08:14:42.210
> 
> 标签：sql, multithreading, oracle, plsql

我有一个问题，我的印象是解决方案很简单，但我无法弄清楚。

A 有一个多线程环境和一个 pl sql 存储过程。在这个过程中，我有类似的东西：

```
select * into mycount from toto;
If mycount >0 then update...;
else insert ...; 
```

问题是我有很多线程调用这个过程。有没有一种简单的方法可以一次只让一个线程执行上面的代码？我知道我可以使用`select for update`，但因为我可以有一个 UPDATE 或 INSERT 我想这对我不起作用。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:21:37.843

您想要的最简单的解决方案是在应用程序级别引入某种中间队列 - 各种线程将向队列发送请求，队列处理器将从队列中读取请求并对D B。

在我看来，这将是最简单的解决方案，因为您无需进行太多更改即可使其正常工作。唯一的潜在问题是，如果需要响应，此解决方案可能会很复杂 - 如果是这样，这仍然是一种选择，但由于必须处理异步响应，应用程序代码会有点复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:41:13.963

有一个单独的表 MODIFY_CHECKER，只有一列 FLAG。使用此表和列作为一种方法，只允许一个线程在您的实际表上更新/插入（我想是 TOTO）

您可以在现有的 PL/SQL 过程中添加如下内容 -

```
IF (select count(1) from modify_checker where flag = 1) > 0 THEN
  -- Another thread is already working, so just raise exception
  RAISE <<exception>>
ELSE
  -- No other thread working on this, so go ahead
  UPDATE modify_checker SET flag = 1;
  COMMIT;
  <<actual code to update or insert actual table>>
  UPDATE modify_checker SET flag = 0;
  COMMIT;
END IF; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T11:53:53.857

您可以在访问该过程时立即锁定并在退出该过程时释放它。这样一次只有一个人可以访问它。

ALTER TABLE tl_test 启用表锁；

ALTER TABLE tl_test 禁用表锁定；

# android - 将位图的大小减小到 Android 中的某个指定像素

> ID：15759195
> 
> 赞同：33
> 
> 时间：2013-04-02T08:14:55.667
> 
> 标签：android, bitmap, compression

我想将我的位图图像大小减小到最大 640 像素。例如，我有大小为 1200 x 1200 像素的位图图像。如何将其减小到 640 像素。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-04-02T08:31:36.553

如果您传递位图`width`然后`height`使用：

```
public Bitmap getResizedBitmap(Bitmap image, int bitmapWidth, int bitmapHeight) {
    return Bitmap.createScaledBitmap(image, bitmapWidth, bitmapHeight, true);
} 
```

如果要保持位图比例相同，但将其减小到最大边长，请使用：

```
public Bitmap getResizedBitmap(Bitmap image, int maxSize) {
        int width = image.getWidth();
        int height = image.getHeight();

        float bitmapRatio = (float) width / (float) height;
        if (bitmapRatio > 1) {
            width = maxSize;
            height = (int) (width / bitmapRatio);
        } else {
            height = maxSize;
            width = (int) (height * bitmapRatio);
        }

        return Bitmap.createScaledBitmap(image, width, height, true);
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-02T08:17:13.360

使用此方法

```
 /** getResizedBitmap method is used to Resized the Image according to custom width and height 
  * @param image
  * @param newHeight (new desired height)
  * @param newWidth (new desired Width)
  * @return image (new resized image)
  * */
public static Bitmap getResizedBitmap(Bitmap image, int newHeight, int newWidth) {
    int width = image.getWidth();
    int height = image.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(image, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-02T08:18:34.683

或者你可以这样做：

```
Bitmap.createScaledBitmap(Bitmap src, int dstWidth, int dstHeight, boolean filter); 
```

通过 filter = false 将产生块状的像素化图像。

通过 filter = true 会给你更平滑的边缘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-20T08:56:52.373

**这是将位图图像分辨率（像素）降低到所需值的工作代码...**

```
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.widget.ImageView;
import android.widget.Toast;

public class ImageProcessActivity extends AppCompatActivity {

    private static final String TAG = "ImageProcessActivity";
    private static final String IMAGE_PATH = "/sdcard/DCIM/my_image.jpg";

    public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {

        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {

            final int halfHeight = height / 2;
            final int halfWidth = width / 2;

            // Calculate the largest inSampleSize value that is a power of 2 and keeps both
            // height and width larger than the requested height and width.
            while ((halfHeight / inSampleSize) >= reqHeight && (halfWidth / inSampleSize) >= reqWidth) {

                inSampleSize *= 2;
            }
        }

        return inSampleSize;
    }

    public static Bitmap decodeSampleDrawableFromFile(String file, int reqWidth, int reqHeight) {

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeFile(file, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeFile(file, options);
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_image_process);

        new AsyncTask<Object, Object, Bitmap>() {

            @Override
            protected Bitmap doInBackground(Object... objects) {

                try {

                    return decodeSampleDrawableFromFile(IMAGE_PATH, 640, 640);

                } catch (Exception e) {

                    e.printStackTrace();

                }
                return null;
            }

            @Override
            protected void onPostExecute(Bitmap bitmap) {
                super.onPostExecute(bitmap);

                ((ImageView) findViewById(R.id.img)).setImageBitmap(bitmap);
            }
        }.execute();
    }
} 
```

> 脚步：
> 
> 1.  获取`Bitmap.Options`（图像信息）。
>     
>     
> 2.  将大小采样到所需的样本大小。
>     
>     
> 3.  `Bitmap`使用给定选项（所需分辨率）从图像文件加载到对象`bitmap`中。但是在后台线程中执行此操作。
>     
>     
> 4.  `Bitmap`将图像加载到`ImageView`UI 线程 ( `onPostExecute()`) 中。

# c - 如何打印所有目录和这些目录下的文件？

> ID：15759197
> 
> 赞同：0
> 
> 时间：2013-04-02T08:15:08.857
> 
> 标签：c, embedded, system, systems-programming

我正在搜索当前目录中的目录，如果我跨越一个目录，我再次进入并搜索目录和文件，但我找不到问题。我总是得到相同的结果和一些特定的目录。在代码中，我在数组中获取目录名称并打印它们。结果如下所示；

```
direc Num (except parent and curr) : 6

/home/sabri/Desktop/Test/Untitled Folder 3

/home/sabri/Desktop/Test/Untitled Folder 3

/home/sabri/Desktop/Test/Untitled Folder 3

/home/sabri/Desktop/Test/Untitled Folder 3

/home/sabri/Desktop/Test

/home/sabri/Desktop/Test/Untitled Folder 4

/home/sabri/Desktop/Test/Untitled Folder 4

/home/sabri/Desktop/Test/Untitled Folder 4 
```

但我的目录是；

```
Untitled Folder 1

Untitled Folder 2

Untitled Folder 3

Untitled Folder 4

Untitled Folder 5 
```

* * *

```
int listFilesIndir(char *currDir) 
{
    struct dirent *direntp;
    char newDir[20][250];

    DIR *dirp;
    int x ,y =0,i=0 ;

    if ((dirp = opendir(currDir)) == NULL) 
    {
        perror ("Failed to open directory");
        return 1;
    }

    while ((direntp = readdir(dirp)) != NULL)
    {
        printf("%s\n", direntp->d_name);
        if(direntp->d_type == DT_DIR)
        {
            y++;
            chdir(direntp->d_name);
            getcwd(newDir[i],250);
            listNewDir(direntp->d_name);
            i++;

        }
    }

    printf("direc Num (except parent and current) : %d\n",y-2 );

    for ( i = 0; i < 10; ++i)
    {
        printf("%s\n", newDir[i]);
    }

    while ((closedir(dirp) == -1) && (errno == EINTR)) ;

    return 0;
}

int listNewDir(char *currDir) 
{
    struct dirent *direntp;
    DIR *dirp;

    if ((dirp = opendir(currDir)) == NULL) 
    {
        perror ("Failed to open directory");
        return 1;
    }

    while ((direntp = readdir(dirp)) != NULL)
        printf("%s\n", direntp->d_name);

    while ((closedir(dirp) == -1) && (errno == EINTR)) ;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:26:04.287

您需要跳过“。” 和“..”条目。您也不应该执行 chdir 和 getcwd。只需将目录名称传递给您的 listNewDir 函数即可打印该目录中的文件。（如果您想保存名称，您可以将名称 strcpy 到 newDir 中。）
此外，for 循环最多只能达到 10 个，而 newDir 只适用于 20 个条目。我认为这些仅用于测试。

# git - 从历史记录中删除不需要的文件，包括所有带有 filter-branch 的 refs

> ID：15759198
> 
> 赞同：3
> 
> 时间：2013-04-02T08:15:09.647
> 
> 标签：git, git-svn, git-filter-branch, git-rewrite-history

我最近克隆了一个 SVN 存储库，它曾经有一些二进制文件，现在不再需要了。不幸的是，我已经将它推送到了 Github，其中包含二进制文件。我现在想使用 'git filter-branch' 删除这些，但在标签和分支方面我遇到了一些问题。

基本上，我创建了一个简单的 shell 脚本来删除由以下命令确定的文件列表：

```
git rev-list --objects --all | grep .jar > files.txt 
```

删除脚本如下所示：

```
#!/bin/sh
while read file_hash file_to_remove
do
    echo "Removing "$file_to_remove;
    git filter-branch --index-filter "git rm --cached --ignore-unmatch $file_to_remove"
    rm -rf .git/refs/original/;
    git reflog expire --all --expire-unreachable=0;
    git repack -A -d;
    git prune
done < $1 
```

我有几个标签（都在 .git/packed-refs 中列出），一个 .git/refs/remotes/origin （指向 Github 存储库）。使用上述脚本删除文件没有想要的效果（'du -cm' 仍然输出相同的大小；'git rev-list' 仍然列出文件），直到我手动从 .git/packed 中删除所有引用-refs 和 .git/refs/remotes/origin 目录。

自然地，我失去了所有标签以及使用这种方法将我的本地更改推回 Github 的可能性。有什么我错过的，或者有没有其他方法可以在不破坏我的历史记录的情况下从所有分支/标签中删除文件？

非常感谢，马蒂斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T11:03:32.973

我最终在一个裸克隆的存储库（git clone --mirror repo-url）上使用了[BFG Repo Cleaner 。](http://rtyley.github.io/bfg-repo-cleaner/)它遍历每个分支/标签，让每个工作都正常工作，它甚至比过滤器分支快得多。希望这可以帮助其他有类似问题的人。

这是我的包装脚本：

```
#!/bin/bash
#usage: ./remove_files.sh file_list.txt bare-repo-dir
while read file_hash file_to_remove
do
    echo "Removing "$file_to_remove;
    lastFile=`echo $file_to_remove | awk -F/ '{print $NF}'`;
    java -jar bfg.jar --delete-files $lastFile $2;
done < $1

cd $2;
git gc --prune=now --aggressive;
cd ..; 
```

# php - 教义父子查找无效的 Foreach

> ID：15759203
> 
> 赞同：1
> 
> 时间：2013-04-02T08:15:17.710
> 
> 标签：php, doctrine-orm, associations, parent-child

我只是想用 Doctrine 2 建立一个简单的亲子关系，但我显然做错了什么。我正在关注Doctrine 网站的[关联映射页面](http://docs.doctrine-project.org/en/latest/reference/association-mapping.html)上所说的内容。

我收到以下错误：

```
Warning: Invalid argument supplied for foreach() in .../Doctrine/ORM/Persisters/BasicEntityPersister.php on line 1579

Fatal error: Call to a member function setValue() on a non-object in .../Doctrine/ORM/PersistentCollection.php on line 175 
```

这是我的数据库设置：

```
CREATE TABLE IF NOT EXISTS `foo` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

这是我的课：

```
namespace Classes;

/** @Entity @Table(name="foo") */
class Foo
{
    /**
     * @Id @Column(type="integer")
     * @GeneratedValue(strategy="AUTO")
     */
    protected $id;

     /**
     * @OneToMany(targetEntity="classes\Foo", mappedBy="parent_id")
     **/
    private $children;

    /** @ManyToOne(targetEntity="classes\Foo", inversedBy="children") 
     *  @JoinColumn(name="parent_id", referencedColumnName="id")
     **/
    private $parent;

    public function __get($name)
    {
        if(property_exists($this, $name)){
            return $this->$name;
        } else {
            throw new \Exception('Field "' . $name . '" does not exist.');
        }
    }
} 
```

这是调用它的页面：

```
$server = '/Applications/XAMPP/htdocs/projects/Scratch';

require_once $server . '/Model/bootstrap.php';

$myFoo = $em->find('classes\Foo',37);

echo $myFoo->id . '<br />';

echo count($myFoo->children); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:38:35.440

虽然不是答案，但这里有一个解决方法......

您可以使用：

```
$children = $em->getRepository('classes\Foo')->findby(array('parent_id',parentID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T04:11:06.323

我自己似乎找不到这个，但是 PHP 中的命名空间区分大小写吗？

我在设置此类关系时看到的另一件事是在实体构造函数中实例化集合。这将特别适用于儿童财产。

希望这可以帮助。

# google-chrome - 是否可以在普通网页下运行 chrome api

> ID：15759210
> 
> 赞同：2
> 
> 时间：2013-04-02T08:15:56.493
> 
> 标签：google-chrome, google-chrome-extension

嗨，我想在我的网站下使用[https://developer.chrome.com/extensions/tabs.html](https://developer.chrome.com/extensions/tabs.html) api

如果我安装了 chrome 插件或者它只能在扩展下使用，是否可以在我的网站上使用这个 api？

# android - 虚拟传感器安卓

> ID：15759220
> 
> 赞同：0
> 
> 时间：2013-04-02T08:16:31.470
> 
> 标签：android, android-sensors

我在谷歌论坛上看到一个帖子说卡尔曼滤波器是在android虚拟传感器中实现的（[http://code.google.com/p/android/issues/detail?id=17780](http://code.google.com/p/android/issues/detail?id=17780) post#8）。但是我在android文档中没有找到任何关于卡尔曼滤波器的内容。那么卡尔曼滤波器是在android API中实现的吗？我在哪里可以获得虚拟传感器 (TYPE_ROTATION_VECTOR) 的源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:28:19.827

如果他们没有在虚拟传感器中使用卡尔曼滤波器，那么他们应该使用！上个月我发布了一个简单的卡尔曼滤波器来回答“[平滑 GPS 数据](https://stackoverflow.com/questions/1134579/smooth-gps-data/15657798)”这个问题。这不是您要求的情况，但如果您之前没有见过卡尔曼滤波器，它可能是一个不错的起点，因为卡尔曼滤波器可能非常复杂，在 Android 上过滤位置数据就是一个简单的例子。

# wpf - Caliburn micro wpf 多个项目

> ID：15759221
> 
> 赞同：4
> 
> 时间：2013-04-02T08:16:40.307
> 
> 标签：wpf, mef, caliburn.micro

我想开始将我快速增长的项目分解成更多模块化/更小的部分。您将如何将您的视图/视图模型分解为其他项目，有时甚至不知道谁在运行时才进入事件/消息传递/指挥管道？

至少，我只需要更有说服力地组织我的视图/视图模型，最多我希望通过一些模块化将 MEF + Caliburn Micro + WPF 派对提升到一个新的水平。

那么，任何想法我如何开始？一些关于覆盖 appbootstrapper 中的创建的讨论，但这些示例似乎都是 MEF 之前的。

-J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:40:12.510

你已经看过 caliburn.micro 上的教程了吗？

[Mindscape “caliburn.micro 入门”](http://www.mindscapehq.com/blog/index.php/2012/01/12/caliburn-micro-part-1-getting-started/)

第 4 章很好地描述了当你想使用 MEF 时该怎么做

[Mindscape“事件聚合器（包括带有 MEF 的引导程序）”](http://www.mindscapehq.com/blog/index.php/2012/2/1/caliburn-micro-part-4-the-event-aggregator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:50:28.820

你可以浏览这个由 10 部分组成的精彩视频系列，`PRISM + Unity`从头开始教授（你在问什么） - [http://channel9.msdn.com/blogs/mtaulty/prism--silverlight-part-1-taking-sketched -code-towards-unity](http://channel9.msdn.com/blogs/mtaulty/prism--silverlight-part-1-taking-sketched-code-towards-unity)。

**注意：**它与 Silverlight 无关。

搏一搏 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:19:47.917

考虑使用[PRISM](http://compositewpf.codeplex.com/)。这是为了完全满足您的要求而构建的，并且可以与 MEF 一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:24:37.060

这一切都发生在您的[Bootstrapper](https://caliburnmicro.codeplex.com/SourceControl/changeset/view/ae616b84192450d079cf8b6fb91f0d8b8cda4e6a#src/Caliburn.Micro.Silverlight/Bootstrapper.cs)中。在那里，您可以配置您的 IoC（和/或 MEF）以使用您想要的任何约定从您想要的任何地方加载/组合视图/视图模型。它为此 puprose 提供了几个有用的可覆盖方法。有关MEF 的示例，请参阅[this 。](https://caliburnmicro.codeplex.com/wikipage?title=Customizing%20The%20Bootstrapper&referringTitle=Documentation)

# memory - 什么是 idr_alloc()

> ID：15759222
> 
> 赞同：7
> 
> 时间：2013-04-02T08:16:42.003
> 
> 标签：memory, linux-kernel, linux-device-driver, embedded-linux

在源代码实现中，它说`idr_alloc()`用于分配新`idr`条目。我找不到`man page`并且想知道为什么要使用它，尤其是在为`MTD`设备编写驱动程序时。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T08:43:04.127

该`idr`库在内核中用于管理将整数 ID 分配给对象并通过 id 查找对象。完整介绍见这篇[LWN 网文](https://lwn.net/Articles/103209/)；基本思想是您有以下操作：

*   `idr_get_new(struct idr *idp, void *ptr, int *id)`-- 为指针分配一个新的 ID`ptr`并通过返回它`id`

*   `void *idr_find(struct idr *idp, int id)`-- 返回对应的指针`id`

*   `void idr_remove(struct idr *idp, int id)`-- 清除条目`id`

这在映射到内核对象的小整数 ID 有用的任何地方都很有用——例如，次要数字或返回到用户空间的其他索引。

# php - 不能将 PDOStatement 类型的对象用作数组

> ID：15759223
> 
> 赞同：2
> 
> 时间：2013-04-02T08:16:52.043
> 
> 标签：php, mysql, pdo

我想检查指定用户的某些列是否持有高于 0 的值。

**问题**

在执行查询***然后执行它时***，我收到此错误：

```
Fatal error: Cannot use object of type PDOStatement as array in C:\xampp\htdocs\recover\admin\create.php on line 40 
```

我的代码（查询+执行）：

```
if (isset($_SESSION['user'])) {
        $admin = $CONNECT_TO_DATABASE->prepare("SELECT * FROM admin WHERE username = :username");
        $admin->bindValue(':username', $_SESSION['user']);
        $admin->execute(); 
```

错误行（40）：

```
if ($settings['create_admins'] > 0 || $admin['super_admin'] > 0 ) { 
```

**问题：**

为什么我会收到此错误？我如何解决它？

我试过这样做：

```
$admin = $CONNECT_TO_DATABASE->prepare("SELECT * FROM admin WHERE username = :username");
$admin = $admin->bindValue(':username', $_SESSION['user']);
$admin = $admin->execute(); 
```

并得到另一个错误：

```
Fatal error: Call to a member function execute() on a non-object in C:\xampp\htdocs\recover\admin\create.php on line 38 
```

谢谢！

编辑：我需要 ->fetch 对象，但我刚刚完成了这个，并摆脱了错误。但它不影响？我的意思是我正在呼应那一行，它给了我一个空值（什么都没有）。为什么？

```
$admin = $CONNECT_TO_DATABASE->prepare("SELECT * FROM admin WHERE username = ".$_SESSION['user']."");
$admin = $admin->fetch(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T08:25:56.843

从：

```
$admin = $CONNECT_TO_DATABASE->prepare("SELECT * FROM admin WHERE username = :username");
[...]
if ($settings['create_admins'] > 0 || $admin['super_admin'] > 0 ) { 
```

`$admin`是`PDOStatament`类而不是数组的类型。因此你不能打电话给`[]`接线员。

此外，您真的不应该总是分配`$admin`给每个方法的返回结果，因为大多数`PDOStatament`方法返回布尔值：

```
$admin = $CONNECT_TO_DATABASE->prepare("SELECT * FROM admin WHERE username = :username");
$admin->bindValue(':username', $_SESSION['user']);
$admin->execute(); 
```

要从表中检索`super_admin`列，`admin`您应该添加（在`execute()`语句之后）：

```
$result = $admin->fetch(PDO::FETCH_ASSOC); 
```

它将填充（希望，这取决于表模式是什么）`$result['super_admin']`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T08:30:23.283

试试这个：

```
$sql = "SELECT * FROM admin WHERE username = ?";
$stmt = $CONNECT_TO_DATABASE->prepare($sql);
$stmt->execute(array($_SESSION['user']));
$admin = $stmt->fetch();
if($admin) {
   //do something if query returns row(s)
} 
```

# r - 使用 R 进行因子分析

> ID：15759226
> 
> 赞同：11
> 
> 时间：2013-04-02T08:16:58.623
> 
> 标签：r, statistics, factor-analysis

我试图使用 R 和 varimax 旋转进行因子分析，但没有成功。我在 SAS 上运行相同的确切数据并且可以获得结果。

在 R 中，如果我使用

```
fa(r=cor(m1), nfactors=8, fm="ml", rotate="varimax") 
```

我会得到

```
In smc, the correlation matrix was not invertible, smc's returned as 1s
In smc, the correlation matrix was not invertible, smc's returned as 1s
Error in optim(start, FAfn, FAgr, method = "L-BFGS-B", lower = 0.005,  : 
  L-BFGS-B needs finite values of 'fn'
In addition: Warning messages:
1: In cor.smooth(R) : Matrix was not positive definite, smoothing was done
2: In cor.smooth(R) : Matrix was not positive definite, smoothing was done
3: In log(e) : NaNs produced 
```

如果我使用

```
factanal(cor(m1), factors=8) 
```

我会得到

```
Error in solve.default(cv) : 
  system is computationally singular: reciprocal condition number = 4.36969e-19 
```

谁能帮助我如何使用 R 成功进行因子分析。谢谢。

提前 Tq

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T16:35:00.040

警告和错误表明您的矩阵是奇异的，因此优化问题不存在解决方案。

这意味着您需要使用不同的因子分析方法。在给定奇异矩阵的情况下，使用`fa()`in package您有两种选择来执行因子分析：`psych`

*   `pa`（主轴因素分析）
*   `minres`（最小残差因子分析）

但是，鉴于您的数据，`minres`似乎只会产生有用的结果，尽管有许多健康警告：

```
library(psych)
library(GPArotation)
fa(r=cor(m1), nfactors=8, rotate="varimax", SMC=FALSE, fm="minres") 
```

这给出了：

```
In smc, the correlation matrix was not invertible, smc's returned as 1s
In factor.stats, the correlation matrix is singular, an approximation is used
In factor.scores, the correlation matrix is singular, an approximation is used
I was unable to calculate the factor score weights, factor loadings used instead
Factor Analysis using method =  minres
Call: fa(r = cor(m1), nfactors = 8, rotate = "varimax", SMC = FALSE, 
    fm = "minres")
Standardized loadings (pattern matrix) based upon correlation matrix
                MR1   MR3   MR2   MR6   MR5   MR4   MR7   MR8   h2    u2
Adorable       0.64  0.69  0.04  0.26  0.05  0.04  0.01  0.14 0.98 0.020
Appealing      0.69  0.66  0.06  0.22  0.06  0.00  0.03  0.08 0.98 0.021
Beautiful      0.39  0.82 -0.16  0.11  0.24 -0.05 -0.07 -0.08 0.93 0.071
Boring        -0.49 -0.70  0.33 -0.27  0.01  0.03  0.11 -0.16 0.95 0.054
Calm           0.76  0.42  0.33  0.10  0.28 -0.04  0.02  0.05 0.96 0.038
Charming       0.62  0.75  0.04  0.15  0.07 -0.03  0.03  0.01 0.98 0.024
Chic           0.07  0.94 -0.13  0.17 -0.03  0.12 -0.02  0.02 0.95 0.048
Childish      -0.13  0.00  0.04  0.04 -0.04  0.98  0.01  0.00 0.98 0.016
Classic        0.82  0.16  0.28 -0.31  0.14  0.10  0.16  0.06 0.94 0.058
Comfortable    0.66  0.50  0.19  0.39  0.27 -0.02  0.13  0.08 0.97 0.033
Cool           0.81  0.43  0.03  0.32  0.00  0.01 -0.03  0.20 0.98 0.016
Creative       0.78  0.37 -0.41  0.14 -0.05  0.06 -0.05  0.20 0.98 0.024
Crowded       -0.34 -0.12 -0.77 -0.13 -0.18  0.04  0.44  0.00 0.96 0.041
Cute           0.50  0.78  0.03  0.18  0.07  0.25 -0.09  0.14 0.98 0.024
Elegant        0.67  0.70  0.07 -0.04  0.10 -0.14  0.03  0.07 0.98 0.021
Feminine       0.09  0.96  0.00  0.01  0.01 -0.02  0.04  0.03 0.93 0.069
Fun            0.58  0.45 -0.21  0.56  0.01  0.20 -0.06 -0.08 0.95 0.054
Futuristic     0.91  0.26 -0.10  0.14 -0.07 -0.03 -0.18 -0.08 0.98 0.021
Gorgeous       0.82  0.52 -0.04  0.14  0.05 -0.09 -0.08 -0.01 0.98 0.019
Impressive     0.82  0.48 -0.02  0.23  0.05  0.00 -0.10  0.07 0.98 0.021
Interesting    0.72  0.55  0.05  0.34  0.15  0.01 -0.13  0.03 0.98 0.020
Light          0.20  0.49  0.30  0.72  0.22  0.03 -0.03  0.02 0.93 0.065
Lively         0.62  0.66 -0.06  0.37  0.16  0.00 -0.04 -0.03 0.98 0.021
Lovely         0.68  0.68 -0.04  0.12  0.19 -0.03 -0.08  0.01 0.98 0.019
Luxury         0.89  0.36 -0.02  0.00  0.08 -0.15 -0.04 -0.07 0.96 0.036
Masculine      0.91 -0.06 -0.05  0.24  0.05 -0.08  0.00 -0.17 0.94 0.063
Mystic         0.95  0.05  0.13  0.01 -0.03  0.00 -0.10  0.00 0.93 0.069
Natural        0.47  0.32  0.42  0.19  0.57 -0.17  0.23  0.02 0.95 0.050
Neat          -0.07  0.06  0.27  0.08  0.93 -0.01 -0.06 -0.01 0.96 0.042
Oldfashioned  -0.64 -0.54  0.20 -0.31  0.16  0.13  0.27 -0.16 0.97 0.026
Plain         -0.23 -0.19  0.88 -0.06  0.18  0.06  0.14 -0.14 0.94 0.062
Pretty         0.66  0.68  0.06  0.17  0.16 -0.11  0.01  0.10 0.97 0.029
Professional   0.82  0.41  0.09  0.18  0.16 -0.18  0.04  0.13 0.96 0.039
Refreshing     0.54  0.58  0.19  0.45  0.30 -0.03  0.10  0.07 0.98 0.021
Relaxing       0.56  0.65  0.34  0.26  0.21 -0.04  0.13 -0.03 0.97 0.026
Sexy           0.35  0.81  0.27  0.05 -0.01 -0.24  0.01 -0.19 0.94 0.056
Simple         0.08  0.01  0.96  0.08  0.09  0.02  0.04  0.12 0.96 0.041
Sophisticated  0.86  0.44 -0.01  0.04 -0.04 -0.12  0.08  0.05 0.96 0.040
Stylish        0.77  0.58  0.06  0.15  0.00 -0.07  0.07  0.08 0.97 0.030
Surreal        0.85  0.39  0.14  0.18 -0.05  0.02  0.08 -0.02 0.93 0.067

                        MR1   MR3  MR2  MR6  MR5  MR4  MR7  MR8
SS loadings           16.50 11.81 3.57 2.45 1.89 1.34 0.55 0.37
Proportion Var         0.41  0.30 0.09 0.06 0.05 0.03 0.01 0.01
Cumulative Var         0.41  0.71 0.80 0.86 0.91 0.94 0.95 0.96
Proportion Explained   0.43  0.31 0.09 0.06 0.05 0.03 0.01 0.01
Cumulative Proportion  0.43  0.74 0.83 0.89 0.94 0.98 0.99 1.00

Test of the hypothesis that 8 factors are sufficient.

The degrees of freedom for the null model are  780  and the objective function was  NaN
The degrees of freedom for the model are 488  and the objective function was  NaN 

The root mean square of the residuals (RMSR) is  0.01 
The df corrected root mean square of the residuals is  0.02 

Fit based upon off diagonal values = 1
Measures of factor score adequacy             
                                               MR1 MR3 MR2  MR6  MR5  MR4  MR7  MR8
Correlation of scores with factors               1   1   1 1.00 1.00 1.00 1.00 0.99
Multiple R square of scores with factors         1   1   1 1.00 1.00 1.00 0.99 0.98
Minimum correlation of possible factor scores    1   1   1 0.99 0.99 0.99 0.98 0.97
Warning messages:
1: In cor.smooth(R) : Matrix was not positive definite, smoothing was done
2: In log(det(m.inv.r)) : NaNs produced
3: In log(det(r)) : NaNs produced
4: In cor.smooth(r) : Matrix was not positive definite, smoothing was done
5: In cor.smooth(r) : Matrix was not positive definite, smoothing was done 
```

# java - 如何在方法内的授予权限中检查用户角色

> ID：15759227
> 
> 赞同：0
> 
> 时间：2013-04-02T08:17:01.700
> 
> 标签：java, spring, spring-security

我的应用程序中有一个自定义（合成）用户角色来限制用户活动。我们使用@Secured() 并在我们应用程序的许多部分中使用合成用户角色。

问题是我需要检查登录用户是否具有此合成角色以执行某些操作。我尝试使用 HttpServletRequest 的 isUserInRole()，但是如果使用他的原始角色检查用户角色而不使用合成/授予角色检查，则此方法返回 true。我也尝试过使用 RoleHierarchy.getReachableGrantedAuthorities() 但我的经理希望我在更高级别上做。SecurityContextHolder 中的 getAuthorities 也只返回用户的原始角色，而不是他授予的角色。

安全上下文文件包含

```
<bean id="roleHierarchy"
    class="org.springframework.security.access.hierarchicalroles.RoleHierarchyImpl"
    xmlns="http://www.springframework.org/schema/beans">
    <property name="hierarchy">
        <value>             
            ROLE_SysAdmin > ROLE_UserPassowrdResetInfoManager
            ROLE_FacilityGroupAdmin > ROLE_UserPassowrdResetInfoManager            
        </value>
    </property>
</bean> 
```

ROLE_SysAdmin 是用户的原始角色，ROLE_UserPassowrdResetInfoManager 是授予的角色。我的问题与[Spring Security: User Authorization in Java Class](https://stackoverflow.com/questions/6277682/spring-security-user-authorization-in-java-class)类似，除了我需要检查用户的 synthetic.granted 角色。谢谢。

# asp.net - 用经典asp以aspx形式插入数据

> ID：15759229
> 
> 赞同：0
> 
> 时间：2013-04-02T08:17:04.973
> 
> 标签：asp.net, sql, asp-classic

我正在使用参数化查询在带有经典 asp 的 aspx 页面中插入数据。下面是我的代码：

```
cmd = Server.CreateObject("ADODB.Command")
cmd.CommandText = "insert into Sponsor_Inputs 
(sponsor,Spon_Username,Spon_PASSWORD,Spon_First_Name,Spon_Last_Name,Spon_Co_Name,Spon_E_Mail,
  Spon_Phone,Spon_TOU,Remote_Computer_Name,Browser_Type,
  unsub_notif,Spon_CurrentMsg_NL,Spon_Pic_NL,Spon_Web_NL,Spon_Email_NL,
  Spon_YourName_NL,Spon_Phone_NL,Spon_Email,Spon_PhoneBan,Spon_Logo,Spon_YourName,
  Spon_Pic,featurestring,spon_fr_alias,spon_em_addr,spon_sub_line,spon_add_msg,
  spon_add_msg2,Spon_Current_Msg,newsletter_template) 
  values 
     (@sponsor ,@Spon_Username ,@Spon_PASSWORD ,@Spon_First_Name ,@Spon_Last_Name 
      ,@Spon_Co_Name ,@Spon_E_Mail ,@Spon_Phone ,@Spon_TOU ,@Remote_Computer_Name 
      ,@Browser_Type ,@unsub_notif ,@Spon_CurrentMsg_NL ,@Spon_Pic_NL ,@Spon_Web_NL 
      ,@Spon_Email_NL ,@Spon_YourName_NL ,@Spon_Phone_NL ,@Spon_Email ,@Spon_PhoneBan 
      ,@Spon_Logo ,@Spon_YourName ,@Spon_Pic ,@featurestring ,@spon_fr_alias ,@spon_em_addr 
      ,@spon_sub_line ,@spon_add_msg ,@spon_add_msg2 ,@Spon_Current_Msg ,
     @newsletter_template )"
cmd.CommandType = CommandType.Text                               
cmd.Parameters.Append(cmd.CreateParameter("@sponsor", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 200, sponsor))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Username", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 50, Spon_Username))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_PASSWORD", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 50, Spon_PASSWORD))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_First_Name", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 150, Spon_First_Name))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Last_Name", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 150, Spon_Last_Name))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Co_Name", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 300, Spon_Co_Name))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_E_Mail", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 150, Spon_E_Mail))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Phone", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 50, Spon_Phone))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_TOU", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 50, Spon_TOU))
cmd.Parameters.Append(cmd.CreateParameter("@Remote_Computer_Name", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, , Remote_Computer_Name))
cmd.Parameters.Append(cmd.CreateParameter("@Browser_Type", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, , Browser_Type))
cmd.Parameters.Append(cmd.CreateParameter("@unsub_notif", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 50, unsub_notif))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_CurrentMsg_NL", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, , Spon_CurrentMsg_NL))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Pic_NL", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, , Spon_Pic_NL))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Web_NL", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 250, Spon_Web_NL))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Email_NL", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 150, Spon_Email_NL))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_YourName_NL", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 300, Spon_YourName_NL))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Phone_NL", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 50, Spon_Phone_NL))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Email", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 150, Spon_Email))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_PhoneBan", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 50, Spon_PhoneBan))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Logo", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, , Spon_Logo))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_YourName", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 200, Spon_YourName))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Pic", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, , Spon_Pic))
cmd.Parameters.Append(cmd.CreateParameter("@featurestring", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, , featurestring))
cmd.Parameters.Append(cmd.CreateParameter("@spon_fr_alias", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 200, spon_fr_alias))
cmd.Parameters.Append(cmd.CreateParameter("@spon_em_addr", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 150, spon_em_addr))
cmd.Parameters.Append(cmd.CreateParameter("@spon_sub_line", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, , spon_sub_line))
cmd.Parameters.Append(cmd.CreateParameter("@spon_add_msg", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, 50, spon_add_msg))
cmd.Parameters.Append(cmd.CreateParameter("@spon_add_msg2", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, , spon_add_msg2))
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Current_Msg", System.Data.SqlDbType.VarChar, System.Data.ParameterDirection.Input, , Spon_Current_Msg))
cmd.Parameters.Append(cmd.CreateParameter("@newsletter_template", System.Data.SqlDbType.NChar, System.Data.ParameterDirection.Input, 1, newsletter_template))
rs = Server.CreateObject("ADODB.Recordset")
rs = cmd.Execute 
```

使用上面的代码我得到以下错误：

参数类型错误、超出可接受范围或相互冲突。

```
Description: An unhandled exception occurred during the execution of the current web request.
Please review the stack trace for more information about the error and where it originated 
in the code. 
```

异常详情：

```
System.Runtime.InteropServices.COMException: Arguments are of the wrong type, are out of 
acceptable range, or are in conflict with one another. 
```

源错误：

```
Line 858:                                        
Line 859:                                    
Line 860:                                          
cmd.Parameters.Append(cmd.CreateParameter("@sponsor", System.Data.SqlDbType.VarChar,   
System.Data.ParameterDirection.Input, 200, sponsor))
Line 861:                                          
cmd.Parameters.Append(cmd.CreateParameter("@Spon_Username", System.Data.SqlDbType.VarChar,     
System.Data.ParameterDirection.Input, 50, Spon_Username))
Line 862:                                        
cmd.Parameters.Append(cmd.CreateParameter("@Spon_PASSWORD", System.Data.SqlDbType.VarChar, 
System.Data.ParameterDirection.Input, 50, Spon_PASSWORD)) 
```

它有什么问题？我使用了这里的语法：[How do I run a parameterized SQL query in classic ASP? 它安全吗？](https://stackoverflow.com/questions/3579687/how-do-i-run-a-parameterized-sql-query-in-classic-asp-and-is-it-secure)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:58:43.213

错误肯定是由您为 cmd.CommandType 提供的常量和您用于参数的所有 .NET 常量引起的。根据 ADO 的规范使用常量。

还可以尝试“？” 而不是 SQL 中的命名参数。我上次这样做已经有一段时间了，但我似乎记得我在 SQL 中使用命名参数时遇到了问题。这是我维护的解决方案中的工作代码：

```
strSQL = ...
strSQL = strSQL & "WHERE col1 = 1 AND col2 = 1 AND col3 = ? AND col4 != somevalue "
...
Set objParameter = cmd.CreateParameter("@NamedParamHereIsOk", adInteger, adParamInput, 5) 'Use constants as per "classic" ADO specifications'
objParameter.value = some_value
cmd.Parameters.Append objParameter 
```

# windows - 记录屏幕保护程序活动

> ID：15759236
> 
> 赞同：2
> 
> 时间：2013-04-02T08:17:25.787
> 
> 标签：windows, screensaver

正如标题所说，我想知道是否有任何方法可以查看屏幕保护程序活动的日志。像这样的东西：

02/02/2013 10:16:47 屏幕保护程序启动

2013 年 2 月 2 日 10:17:23 屏幕保护程序停止

我正在运行带有 ElectricSheep 屏幕保护程序的 Win7 Home Premium 64（真棒顺便说一句）

我不确定这是问的正确地方，但我相信您的计算机专家可以帮助我:) 谢谢

# objective-c - 具有可配置 URL 的 webview

> ID：15759239
> 
> 赞同：0
> 
> 时间：2013-04-02T08:17:33.033
> 
> 标签：objective-c, xcode, cocoa, webview, nsapplication

我是目标 c 编程和使用可可应用程序的新手。

这是我`static URL`的基于 webview 的应用程序。

**AppDelegate.h 包含**

```
@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet WebView *webview;

@end 
```

**我的 AppDelegate.m 包含**

```
@implementation AppDelegate

@synthesize webview;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{

    NSString *urlString = @"http://www.google.com";
    [[webview mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]]];

}

@end 
```

使用这个指定`URL`的 .

我正在尝试找出使我能够配置 URL 的解决方案。例如，从单独的窗口保存 URL 并通过点击保存按钮加载我的 webview 与新指定的 URL。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:35:04.880

创建一个`UITextField`和一个`UIButton`。单击按钮后，加载插入到文本字段中的 url。例如，假设您的文本字段名为 _tf，而您的 webview 名为 _wv：

```
- (IBAction)btnClicked
{
    [_wv loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:_tf.text]]];
} 
```

当然，您需要验证输入的文本实际上是一个有效的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:36:50.630

这里有很多代码要写如何做到这一点。

首先看这个教程：它会给你一个具体的解释如何制作一个好的webView：[http ://www.youtube.com/watch?v=hoynCQLF2H0](http://www.youtube.com/watch?v=hoynCQLF2H0)

之后，您需要有 2 个视图。如何做到这一点： [http ://www.youtube.com/watch?v=AL13RmE18ek](http://www.youtube.com/watch?v=AL13RmE18ek)

然后，您需要为 UITextField 和 UIButton 制作插座，并且您需要为按钮制作 IBAction。

之后，您可以使用 NSUserDefaults 保存数据并在另一个视图中检索它： [http ://www.youtube.com/watch?v=I0d1E3S-PKE](http://www.youtube.com/watch?v=I0d1E3S-PKE)

如您所见，您想知道的一切都在 Youtube 上。看看一些很棒的导师，比如：Dani Arnaout、GeekyLemonDevelopment 或 TheNewBoston。

# javascript - 如何从选择下拉列表中拆分文本以使用 Jquery/Javascript 进行乘法运算

> ID：15759240
> 
> 赞同：3
> 
> 时间：2013-04-02T08:17:35.627
> 
> 标签：javascript, jquery

我有一个选择下拉菜单来选择产品尺寸，它还会告诉您每种尺寸的价格。

我想显示总成本以及它将覆盖多少公顷。1 公斤 = 1 公顷

该值是尺寸的 ID，在添加到购物车时使用。

```
<select class="productChoice">
    <option value="">-- Please select --</option>
    <option value="2317474">1KG $180</option>
    <option value="2317475">5KG $100</option>
    <option value="2317476">10KG $200</option>
    <option value="2317477">50KG $900</option>
</select>

<input type="text" id="Units_5183442" class="productTextInput" value="0">

<label id="hectares_5183442"></label> Hectares
<label id="total_5183442"></label> 
```

所以你选择你的产品尺寸，然后你想购买多少该尺寸。从那里我想在各自的标签中显示两个不同的值。

我正在努力分离选项文本来做我需要的事情。无法通过 NaN。

到目前为止，我得到的是：

```
$('#Units_5183442').keyup(multiply);
$('select.productChoice').change(multiply);
function multiply() {
    var quantity = parseFloat($('#Units_5183442').val());
    var dollars = cantfigureouthowtodothis
    var size = cantfigureouthowtodothis

    $('#total_5183442').text('$'+(quantity * dollars )); 
    $('#hectares_5183442').text((quantity * size)); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:31:57.217

这将更新公顷和总成本标签：

```
$(function() {
    $('.productChoice').change(function() {

        if($('#Units_5183442').val() == 0)  // min 1
            $('#Units_5183442').val(1);

        var selectedText = $(this).find('option:selected').text(); 
        var match = selectedText.match(/\d{1,3}KG/g);
        if(match.length == 1)
        {
            var kg = parseInt(match[0].replace('KG',''));
            var costMatch = selectedText.match(/\$\d{1,3}/g);
            if(costMatch.length == 1)
            {
               var cost = parseInt(costMatch[0].replace('$',''));
               var quantity = parseInt($('#Units_5183442').val());  // presume you can only order integer quantities?

               $('#hectares_5183442').text(kg * quantity);
                $('#total_5183442').text('Total cost: $' + cost * quantity)
            }
        }
    });

    $('#Units_5183442').keyup(function() {
        $('.productChoice').trigger('change');
    });
}); 
```

JS 小提琴在这里：http: [//jsfiddle.net/zud2Z/2/](http://jsfiddle.net/zud2Z/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:23:12.310

这是使用提取值的一种方法`split()`

[jsFiddle](http://jsfiddle.net/Tyriar/BLz8G/)

```
var str = '1KG $180';
var kgs = str.split('KG')[0];
var dollars = str.split('$')[1];
alert('kgs: ' + kgs +
      '\ndollars: ' + dollars); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:29:58.057

像这样的东西：

```
var calcResult = function() {

    var oSel = jQuery('.productChoice option:selected'),
        sText = oSel.text(),
        aData = sText.split(' '),
        mass = 0,
        price = 0,
        num = parseInt(jQuery('#Units_5183442').value());

    if( (aData.length > 1) && (aData[0] != '--') ) {
        mass = parseInt(aData[0]);
        price = parseInt(aData[1]);
    }

    jQuery('#total_5183442').text(num * price);
    jQuery('#hectares_5183442').text(num * mass);

};

jQuery('.productChoice').on('change', calcResult);
jQuery('#Units_5183442').on('change', calcResult); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:32:27.297

或这个

```
var txt = '1KG $100';//assuming you've finally got and have validated this string
vals = txt.split('KG $');

var dollars = vals[1];
var size = vals[0] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T08:40:33.323

您还可以为您的产品创建一个对象，然后将其用于您的计算。

```
var products = {
        '2317474':{
            qt:1,
            price:180
        }
    }; 
```

然后通过产品ID访问它

```
var prod = products[id]; 
```

# c# - 为什么我不能为第二张图表添加价值？

> ID：15759244
> 
> 赞同：0
> 
> 时间：2013-04-02T08:17:55.330
> 
> 标签：c#, charts, microsoft-chart-controls

我目前正在使用 MS 图表控件。在这个对象中，我有 2 个系列：平衡和音量。数据到

```
foreach (double balance in grStats.getChangedBalance())
{
    chartBalanceAndVolume.Series["Balance"].Points.Add(new DataPoint(0, balance));
} 
```

添加成功。但如果我写成

```
int index = 1;
foreach (double volume in grStats.getVolumes())
{
    chartBalanceAndVolume.Series["Volume"].Points.Add(new DataPoint(index, volume));
    index++;
} 
```

这导致图表“余额”中的值相加。这是为什么？

# lua - 在 Corona 中操作线条

> ID：15759253
> 
> 赞同：2
> 
> 时间：2013-04-02T08:18:23.410
> 
> 标签：lua, coronasdk

感谢在线教程，我使用 display.newLine() 在 Corona 中创建了一条线。我还在学习，所以我有几个问题。

是否可以为绘制的线创建触摸事件？就像一旦我在我的场景中有一条线，如果我触摸那条线，就会发生一些事情。

如果可能，我该怎么做？我尝试了对其他对象执行的操作，并使用了 line:addEventListener("touch", something) 之类的方法，但它不起作用。

另外，是否可以为绘制的线创建某种动画？就像画线一样，几帧之后，擦掉它并画一个新的？（我说的是自动而不是通过触摸事件来绘制它）

最后，是否可以仅使用 1 条线绘制曲线？如果我要使用绘制的线条创建某种动画，我会尽量避免使用这么多线条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:02:37.110

> 是否可以为绘制的线创建触摸事件？

是的，根据[Corona Labs API for `LineObject`s](http://docs.coronalabs.com/api/type/LineObject/index.html#methods "线对象")，方法和属性继承自[`DisplayObject`](http://docs.coronalabs.com/api/type/DisplayObject/index.html#methods "显示对象")，其中一种方法包括[`EventListener`s](http://docs.coronalabs.com/api/type/EventListener/addEventListener.html "事件监听器")。你可以这样尝试：

```
local line = display.newLine( ... )
line:addEventListener( "tap", myFunc ) 
```

> 是否可以为绘制的线创建某种动画？就像画线一样，几帧之后，擦掉它并画一个新的？

再一次，是的。您可以使用表中的[`performWithDelay`](http://docs.coronalabs.com/api/library/timer/performWithDelay.html)方法`timer`。一个例子是这样的：

```
i, line = 30, display.newLine( 20, 50, 200, 300 )
changeText = function()
  line.x1 = 20 + (i % 80)
  line.x2 = 50 + (i % 100)
  i = i * 2
end
timer.performWithDelay( 1000, changeText ) 
```

> 是否可以仅使用 1 条线绘制曲线？

您需要阅读一些有关几何的知识。一条线不能弯曲。否则圆就不是多边形。

# php - 使用 PDO 的 UPDATE 语法错误

> ID：15759255
> 
> 赞同：0
> 
> 时间：2013-04-02T08:18:25.587
> 
> 标签：php, mysql, pdo, sql-update

我正在尝试运行`UPDATE`，但出现语法错误。我正在使用 php 和 PDO 来创建`UPDATE`命令。我的语法有什么问题？

> 更新教育，其中 userId = :userId AND fieldId = :fieldId SET fieldId = :fieldId, educationTitle = :educationTitle,educationDegree = :educationDegree, startDate = :startDate, endDate = :endDate,educationDescription = :educationDescription;

错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'WHERE userId = '35' AND fieldId = '4' SET fieldId = '4', educationTitle = 'ththt' 附近使用正确的语法

更新：

我试过像下面的示例一样放置`WHERE`，`SET`但我仍然遇到语法错误。

> 更新教育集 fieldId =：fieldId，educationTitle =：educationTitle，educationDegree =：educationDegree，startDate =：startDate，endDate =：endDate，educationDescription =：educationDescription，其中 userId =：userId AND fieldId =：fieldId；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:19:02.247

放在`WHERE`后面`SET`。

```
UPDATE  education  
SET     fieldId = :fieldId, 
        educationTitle = :educationTitle, 
        educationDegree = :educationDegree, 
        startDate = :startDate, 
        endDate = :endDate, 
        educationDescription = :educationDescription
WHERE   userId = :userId AND 
        fieldId = :fieldId 
```

# html - TinyMCE：隐藏的文本区域

> ID：15759258
> 
> 赞同：2
> 
> 时间：2013-04-02T08:18:34.770
> 
> 标签：html, css, tinymce, rich-text-editor

我尝试在我的网站上设置 tinyMCE。这是我的设置：

```
<script type="text/javascript" src="extensions/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
    tinyMCE.init({
        // General options
        mode : "exact",
        elements: "mceContent",
        language : "ru",
        theme : "advanced",
        forced_root_block : false,
        force_br_newlines : true,
        force_p_newlines : false,

        plugins : "safari,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

        theme_advanced_buttons1 : "bold,italic,underline,strikethrough,formatselect,forecolor,backcolor,link,unlink,justifyleft,justifycenter,justifyright,bullist,numlist,|,pasteword,pastetext,table,image,|,undo,redo,|,code,fullscreen",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,
        height: 400,
        width: 680,

        skin : "o2k7",
        skin_variant : "blue",
        theme_advanced_toolbar_align : "left",
        relative_urls : false
    });
</script> 
```

这是我的html代码：

```
<textarea class="span8" name="mceContent" id="mceContent" rows="15" 
    style="width: 40em; height: 20em" >
        {$mceContent}
</textarea> 
```

当我打开此页面时，文本区域被隐藏。这是我在浏览器中看到的 html 代码：

```
<textarea class="span8" name="mceContent" id="mceContent" rows="15" 
style="width: 40em; height: 20em; visibility: hidden;">                 
</textarea> 
```

那么，我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-10-30T10:22:08.630

您`tinymce.init()`在 DOM 正确加载之前运行。你需要把你的`init()`内部包装起来`document.ready`：

```
document.addEventListener('DomContentLoaded', function(){

    tinyMCE.init({
        // your init options
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-22T12:00:22.450

好吧，这不是问题。bcoz 你已经将***元素：“mceContent”***值传递给 tinymce 构造函数，通过这样做，插件将隐藏匹配的元素，它将改为编辑器。

# c# - 从对象类型访问 ResultsView

> ID：15759260
> 
> 赞同：-1
> 
> 时间：2013-04-02T08:18:37.130
> 
> 标签：c#

如何从 Object 类型的对象访问 ResultsView？

```
Object table = null;
Class.CallSomeMethod( ref table); 
```

`table`有结果视图，我不知道如何访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:26:56.227

只需将`table`变量转换为适当的类型：

```
((SomeTypeWithResultView)table).ResultsView 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:31:49.923

```
Object table = null;    
var varTable = ((SomeTableType)table).ResultsView;
method(ref varTable); 
```

# php - 侧边栏 WP 小部件

> ID：15759265
> 
> 赞同：1
> 
> 时间：2013-04-02T08:18:58.310
> 
> 标签：php, wordpress, widget, sidebar

好的，所以这行得通，一切都很好。但我不明白为什么它会起作用：

在我的functions.php中，我有：

```
register_sidebar( array(
 'name' => 'Welcome',
 'id' => 'Welcome',
 'before_widget' => '',
 'after_widget' => '',
 'before_title' => '<h1>',
 'after_title' => '</h1>',
) ); 
```

那里没有奇怪的东西。但是在我的循环文件中，我有这个，我不明白为什么它会输出一个小部件：

```
<div class="large-4 columns welcomeText sidebar">
  <?php if ( dynamic_sidebar('Welcome') ) : ?>
  <?php endif; ?>
</div> 
```

if-statment 说如果有动态侧边栏“欢迎”什么都不做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:26:02.790

您调用`dynamic_sidebar( $index )`显示已注册的侧边栏。显示的是位于**DashBoard > Appearance > Widgets**的已注册侧边栏小部件的内容，该函数在成功时返回 true，在失败时返回 false。

来自[WordPress 法典：](http://codex.wordpress.org/Function_Reference/dynamic_sidebar)

> 返回值应该用于确定是否显示静态侧边栏。这可确保您的主题即使在 Widgets 插件未激活时也看起来不错。

所以你的代码实际上应该是

```
<?php if ( !dynamic_sidebar('Welcome') ) : ?> 
```

# symfony - 原则 2：OneToMany 关系，按外键排序

> ID：15759267
> 
> 赞同：2
> 
> 时间：2013-04-02T08:19:02.813
> 
> 标签：symfony, doctrine-orm, sql-order-by, one-to-many

我有三个实体（`Profile`和`ProfileValue`）`Value`。
A`Profile`与 具有一对多关系，后者与实体`ProfileValue`具有多对一关系。`Value`

是否有可能从 获得相关`ProfileValues`的`Profile`，由 订购的`value id`？

如果我`orderby`为非外键添加注释，如 中的启用字段`ProfileValue`，它可以工作。但是对于外键，它失败了 message *`"inrecognized field"`*。有任何想法吗？

```
/**
 *
 * @ORM\Table(name="profile")
 * @ORM\Entity
 */
class Profile {

    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false, options={"unsigned"=true})
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var array $profileCValues
     * @ORM\OneToMany(targetEntity="ABC\XYZBundle\Entity\ProfileValue", mappedBy="profile", cascade={"persist"})
     * @ORM\OrderBy({"value" = "ASC"})
     */
    private $profileValues; 
```

这是`ProfileValue`实体：

```
/**
 * ABC\XYZBundle\Entity\ProfileValue
 *
 * @ORM\Table(name="profile_value", indexes={@ORM\Index(columns={"profile_id"}), @ORM\Index(columns={"value_id"}) })
 * @ORM\Entity
 */
class ProfileValue {
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false, options={"unsigned"=true})
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var integer $enabled
     *
     * @ORM\Column(name="enabled", type="boolean", length=1, nullable=true)
     */
    private $enabled;

    /**
     * @var ABC\XYZBundle\Entity\Profile
     * @ORM\ManyToOne(targetEntity="ABC\XYZBundle\Entity\Profile", inversedBy="profileValues")
     * @ORM\JoinColumn(name="profile_id", referencedColumnName="id", nullable=true, onDelete="CASCADE")
     */
    private $profile;

    /**
     * @var ABC\XYZBundle\Entity\Value
     * @ORM\ManyToOne(targetEntity="ABC\XYZBundle\Entity\Value")
     * @ORM\JoinColumn(name="value_id", referencedColumnName="id", onDelete="CASCADE")
     */
    private $value;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-25T14:45:19.770

有同样的问题并通过添加一个带有外键的新字段来解决它：

```
/**
 * @var integer $valueId
 *
 * @ORM\Column(name="value_id", type="integer")
 */
private $valueId; 
```

然后你可以毫无问题地订购它：

```
/**
 * @var array $profileCValues
 * @ORM\OneToMany(targetEntity="ABC\XYZBundle\Entity\ProfileValue", mappedBy="profile", cascade={"persist"})
 * @ORM\OrderBy({"valueId" = "ASC"})
 */
private $profileValues; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-16T09:51:03.487

这行得通吗？

```
/**
 * @var array $profileCValues
 * @ORM\OneToMany(targetEntity="ABC\XYZBundle\Entity\ProfileValue", mappedBy="profile", cascade={"persist"})
 * @ORM\OrderBy({"id" = "ASC"})
 */
private $profileValues; 
```

我不使用 XML，但这适用于 YML：

```
oneToMany:
  foos:
    targetEntity:             Company\ProjectBundle\Entity\Foo
    mappedBy:                 bar
    orderBy:                  { 'id': ASC } 
```

# c# - 如何在我使用区分大小写的语言时解决 COM 中不区分大小写的冲突名称

> ID：15759269
> 
> 赞同：2
> 
> 时间：2013-04-02T08:19:04.607
> 
> 标签：c#, com, case-sensitive, case-insensitive, wmp

这个问题是[本文](https://stackoverflow.com/questions/15630656/how-to-attach-event-to-dynamic-object-or-com-object)的延伸。

在同样的情况下，我通过它创建了一个 WMP ActiveX 实例`ProgID`。

```
protected const string WMP_PROG_ID = "WMPlayer.OCX.7";

private dynamic _wmp;

protected virtual bool init(){
    try{
        _wmp = Activator.CreateInstance(Type.GetTypeFromProgID(WMP_PROG_ID));
    }
    catch{ return false; }
    return connectEvent();
} 
```

根据[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/dd564034.aspx)文档，WMPlayer 对象中有一个`Error`事件和一个`error`属性。因此，我尝试以这种方式附加事件。

```
protected bool connectEvent(){
    try{
        _wmp.PlayStateChange += new StateHandler(_wmp_PlayStateChange);
        //_wmp.Error += new Action(_wmp_ErrorEvent);
    }
    catch { return false; }
    return true;
}

protected void _wmp_PlayStateChange(WMPlayerState state){
    //do something I like
}

protected void _wmp_ErrorEvent(){
    //do some error handling
} 
```

如果我继续`//_wmp.Error += new Action(_wmp_ErrorEvent)`评论，则没有编译错误并且`PlayStateChange`效果很好。

但是，如果我删除注释标记，则会出现运行时异常。 `Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: can not apply operator "+=" between 'System.__ComObject' and 'System.Action'`

似乎这两个“错误”是冲突的，因为 COM 不区分大小写。我该如何解决？我的目标是在不使用 AxWindowsMediaPlayer 的情况下附加到“错误”事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:54:39.703

我遇到了和你非常相似的问题，但我的问题是`Size`. 重新定义了强类型 ActiveX 控件`Size`，因此我需要将其转换回`Control`表单设计者想要在我的表单上调整控件大小的时候。

```
((Control)this.axLEAD1).Size = new System.Drawing.Size(298, 240); 
```

如果您可以获得 com 对象的强类型类（通过添加引用或使用[tlbimp.exe](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28v=vs.80%29.aspx)），则可以强制转换为强类型 com 对象，而不是`__ComObject`使用正确的方法。

# javascript - 如何检查表单是否使用新值提交？

> ID：15759271
> 
> 赞同：0
> 
> 时间：2013-04-02T08:19:12.383
> 
> 标签：javascript, jquery, ruby-on-rails

我有一个简单的表格。现在，如果表单提交的新值与第一次搜索的值不同，我需要做的是隐藏一个 div 元素。

我该怎么做？

我在 Rails 上使用 jquery 和 ruby

这是代码

```
<%= form_tag home_path, :method => "post", :name=>"onLoad",  :remote=> true  do %>
                <div class="containePrepend">
                    <% if params[:searchedValue].nil? == true%>

                    <%=text_field_tag 'search', nil, :placeholder => 'Please enter the product to continue' %>
                    <%else%>
                    <%=text_field_tag 'search', nil, :value => params[:searchedValue]%>
                    <%end%>

                </div>
                <%= button_tag(:type => 'submit', :id => "buttonSubmit") do %>
                <% end %>
                <% end %> 
```

表单正在通过 ajax 提交`appends`给 div

```
<div class="product_first_roll"></div>
<div class="product_old_roll"></div> 
```

现在，如果搜索的值比前一个值新。我想从里面的旧搜索中隐藏内容

```
<div class="product_first_roll"></div>
<div class="product_old_roll"></div> 
```

并且只显示里面的新的

```
<div class="product_first_roll"></div>
<div class="product_old_roll"></div> 
```

对不起，如果它听起来太复杂或搞砸了。如果我只知道如何检查表单是否使用新值提交，我可以弄清楚其余的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:44:21.417

一种方法是：

只需一个 div 并在每次搜索后用新的搜索结果更新同一个 div，这样就不需要隐藏旧的 div。

或者，

在表单中添加一个隐藏字段，例如`<%= hidden_field_tag :previous_search_value, params[:searchValue] %>`，`controller action`

```
@hidden = params[:previous_search_value].eql?(params[:searchValue]) 
```

现在完成此操作后，在成功函数或 .js.erb 文件中添加以下逻辑以隐藏您的 div。

```
<% if @hidden %>
  $("#product_old_roll").hide();
<% end %> 
```

希望这会有所帮助。

# java - 呼叫请求限制

> ID：15759278
> 
> 赞同：0
> 
> 时间：2013-04-02T08:19:29.717
> 
> 标签：java, android, mobile

我是 Android 和移动开发的新手。我想在两个号码之间发送大量*的呼叫请求。呼叫应被调度并立即取消。

*) 分钟。每秒 10 次，最大值。每秒 100 次

我在 Android 的某个时间段内可以开始的通话次数是否有限制？

1.  使用 Android / Java 还有其他限制吗？
2.  提供商可能会阻止如此多的呼叫请求吗？
3.  接收者是否会可靠地注意到确切的呼叫数量？

编辑：我想弄清楚，如何只与呼叫请求进行通信，并且不收取任何费用。没有骚扰或欺骗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:26:58.020

您可以使用意图向电话号码发起呼叫。

```
String number = "123-456-777-2";
String uri = "tel:" + number.trim() ;
Intent intent = new Intent(Intent.ACTION_CALL);
intent.setData(Uri.parse(uri));
startActivity(intent); 
```

就像我之前说的，你需要 CALL_PHONE 权限。

[http://developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)

请注意，如果您使用`ACTION_DIAL`，您将看到自己拨打电话的选项（它将被预拨），然后您不需要 CALL_PHONE 权限。

# asp.net - ASP .NET VB 获取发布文件

> ID：15759288
> 
> 赞同：0
> 
> 时间：2013-04-02T08:19:52.863
> 
> 标签：asp.net, vb.net, visual-studio-2012

我继承了一个旧的 ASP/VB Web 应用程序项目，并试图让它在我的计算机上运行（Win 7，VS Web Express 2012），但之前从未做过任何 ASP 或 VB。

我有一个`Upload2.aspx`文件和一个`Upload2.aspx.vb`文件。

`Upload2.aspx`看起来像这样：

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="Upload2.aspx.vb" Inherits="Upload2" %>
...
<asp:FileUpload ID="fuData" runat="server" /> 
```

`Upload2.aspx.vb`看起来像这样：

```
Partial Class Upload2
    Inherits System.Web.UI.Page

    Private Sub manageUpload()
        Dim pf As HttpPostedFile = fuData.PostedFile
... 
```

出于某种原因，它在 fuData 上给了我一个错误： `'fuData' is not declared. It may be inaccessible due to its protection level.`

它不应该自动能够从 aspx 页面上的 id 访问变量吗？

# r - 在 data.frame 中分割连续数据

> ID：15759291
> 
> 赞同：0
> 
> 时间：2013-04-02T08:19:59.393
> 
> 标签：r, split

我的数据结构是

```
id value1 value2
1  0.12   1
2  0.09   0
3  0.05   0
4  0.65   1
5  0.68   0
... 
```

我需要使用 拆分数据`value1`，例如 0< value1 <=0.2 == 1 或 0.2 < value1 <=0.4 == 2...（最大值`value1`为 1，最小值`value1`为 0）

我的观点是，我想利用`value1`范围作为拆分的参考。

所以，我会期待这样的结果。

```
id value1 value2 group
1  0.12   1      1 (because value1 is range of 0~0.2)
2  0.09   0      1 (because value1 is range of 0~0.2)
3  0.05   0      1 (because value1 is range of 0~0.2)
4  0.65   1      4 (because value1 is range of 0.6~0.8)
5  0.68   0      4 (because value1 is range of 0.6~0.8)
... 
```

组向量不能有值 2 或 3。这是因为`value1`不包括 0.2~0.4 和 0.4~0.6 的范围。

另外，我需要按组计算`value2`因子的比率。

根据上述数据，`group1`由 33.33% 1 和 66.66% 0 组成。另外，`group4`由 50% 1 和 50% 0 组成。

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:24:53.457

您可以只使用该`cut`功能。首先创建一些示例数据：

```
dd = data.frame(id = 1:20, value1=runif(20)) 
```

接下来，定义断点并划分`value1`

```
cuts = cut(dd$value1, breaks=seq(0, 1, 0.2)) 
```

然后将削减转换为数字（使用一些因子魔法），以获得你想要的：

```
as.numeric(cuts) 
```

所以

```
dd$group = as.numeric(cut(dd$value1, breaks=seq(0, 1, 0.2))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:22:23.467

您可以简单地执行以下操作

```
DF <- read.table(text='id value1 value2
1  0.12   1
2  0.09   0
3  0.05   0
4  0.65   1
5  0.68   0', header=TRUE)

DF$group <- (DF$value1)%/%0.201 + 1

DF
##   id value1 value2 group
## 1  1   0.12      1     1
## 2  2   0.09      0     1
## 3  3   0.05      0     1
## 4  4   0.65      1     4
## 5  5   0.68      0     4

# to get % of '1' in each group
result <- aggregate(value2 ~ group, DF, function(x) sum(x)/length(x))
result
##   group    value2
## 1     1 0.3333333
## 2     4 0.5000000 
```

# java - 序列化任何对象

> ID：15759293
> 
> 赞同：3
> 
> 时间：2013-04-02T08:20:05.750
> 
> 标签：java

我试过这样做：

```
ByteArrayOutputStream b = new ByteArrayOutputStream();
ObjectOutputStream o = new ObjectOutputStream(b);
o.writeObject(obj); 
```

其中 obj 是我制作的一个简单类：

```
class Car {
  int id;
  String color;
  //... 
} 
```

但是我得到`java.io.NotSerializableException`

是否可以序列化任何类型的`java.lang.Object`into `byte array`？是这样，怎么样？

**更新：**

将被“序列化”的类不实现`Serializable`接口；我正在尝试做的这件事背后的想法是，我试图拥有一个数据库支持`java.util.Map`，其中地图中的对象`put`直接存储在数据库中，因此任何类型的`Object`

我还看到了一些序列化框架，在序列化任意对象时如何绕过这个“限制”，有一个类注册，如：

```
kryo.register(SomeClass.class, 0); 
```

不确定这一点。

但我很确定我需要做的是：

*   反射读取对象的字段和方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:21:00.960

您的`Car`类需要实现`Serializable`接口以便您能够访问`Serialize`您的对象。

```
class Car implements Serializable { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T09:55:27.593

不可能使用 java.io.ObjectOutputStream 序列化每个`Object`.

来自[ObjectOutputStream的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)

> 只有支持 java.io.Serializable 接口的对象才能写入流。

如果你绝对需要 java 对象序列化[kryo 值得](https://code.google.com/p/kryo/#Quickstart)一试。默认情况下，您只需要执行以下操作：

```
Kryo kryo = new Kryo();
// ...
Output output = new Output(new FileOutputStream("file.bin"));
SomeClass someObject = ...
kryo.writeObject(output, someObject);
output.close(); 
```

Kryo 不需要你的类来实现`Serializable`，你可以为你的类提供单独的[序列化](http://kryo.googlecode.com/svn/api/v2/com/esotericsoftware/kryo/Serializer.html)器来控制序列化形式。但是是可选的。

该代码`kryo.register(SomeClass.class, 0);`也是可选的，它优化了序列化过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:24:29.740

这里有用于序列化/反序列化的通用 ObjectSerializer（改编自 Apache 库）：

```
public class ObjectSerializer {

    private static final String TAG = "ObjectSerializer";

    public static String serialize(Serializable obj) {// throws IOException {
        if (obj == null) return "";
        try {
            ByteArrayOutputStream serialObj = new ByteArrayOutputStream();
            ObjectOutputStream objStream = new ObjectOutputStream(serialObj);
            objStream.writeObject(obj);
            objStream.close();
            return encodeBytes(serialObj.toByteArray());
        } catch (Exception e) {
            //throw WrappedIOException.wrap("Serialization error: " + e.getMessage(), e);
            Log.e(TAG, "Serialization error: " + e.getMessage());
            return null;
        }
    }

    public static Object deserialize(String str) {// throws IOException {
        if (str == null || str.length() == 0) return null;
        try {
            ByteArrayInputStream serialObj = new ByteArrayInputStream(decodeBytes(str));
            ObjectInputStream objStream = new ObjectInputStream(serialObj);
            return objStream.readObject();
        } catch (Exception e) {
            //throw WrappedIOException.wrap("Deserialization error: " + e.getMessage(), e);
            Log.e(TAG, "Deserialization error: " + e.getMessage());
            return null;
        }
    }

    public static String encodeBytes(byte[] bytes) {
        StringBuffer strBuf = new StringBuffer();

        for (int i = 0; i < bytes.length; i++) {
            strBuf.append((char) (((bytes[i] >> 4) & 0xF) + ((int) 'a')));
            strBuf.append((char) (((bytes[i]) & 0xF) + ((int) 'a')));
        }

        return strBuf.toString();
    }

    public static byte[] decodeBytes(String str) {
        byte[] bytes = new byte[str.length() / 2];
        for (int i = 0; i < str.length(); i+=2) {
            char c = str.charAt(i);
            bytes[i/2] = (byte) ((c - 'a') << 4);
            c = str.charAt(i+1);
            bytes[i/2] += (c - 'a');
        }
        return bytes;
    }

} 
```

# variables - 无法编译:: 我不明白我的错误。主要是“声明为无效”错误和“StudentType 未在此范围内声明”。

> ID：15759294
> 
> 赞同：0
> 
> 时间：2013-04-02T08:20:14.100
> 
> 标签：variables, compiler-errors, field

**运行编译器时，我不断收到这些错误：**

```
Program04.cpp:21:14: error: variable or field âgetDataâ declared void
Program04.cpp:21:14: error: âStudentTypeâ was not declared in this scope
Program04.cpp:21:26: error: expected primary-expression before â]â token
Program04.cpp:21:29: error: expected primary-expression before âintâ
Program04.cpp:23:15: error: variable or field âsortDataâ declared void
Program04.cpp:23:15: error: âStudentTypeâ was not declared in this scope
Program04.cpp:23:27: error: expected primary-expression before â]â token
Program04.cpp:23:30: error: expected primary-expression before âintâ
Program04.cpp:27:22: error: variable or field âcomputeAveragesâ declared void
Program04.cpp:27:22: error: âStudentTypeâ was not declared in this scope
Program04.cpp:27:34: error: expected primary-expression before â]â token
Program04.cpp:27:37: error: expected primary-expression before âintâ
Program04.cpp:29:16: error: variable or field âprintDataâ declared void
Program04.cpp:29:16: error: âStudentTypeâ was not declared in this scope
Program04.cpp:29:28: error: expected primary-expression before â]â token
Program04.cpp:29:31: error: expected primary-expression before âintâ
Program04.cpp: In function âint main()â:
Program04.cpp:34:1: error: âStudentTypeâ was not declared in this scope
Program04.cpp:34:13: error: expected â;â before âstudentsâ
Program04.cpp:37:9: error: âstudentsâ was not declared in this scope
Program04.cpp:37:19: error: ânâ was not declared in this scope
Program04.cpp:37:20: error: âgetDataâ was not declared in this scope
Program04.cpp:38:21: error: âsortDataâ was not declared in this scope
Program04.cpp:39:25: error: âcomputeAveragesâ was not declared in this scope
Program04.cpp:40:19: error: âprintDataâ was not declared in this scope
Program04.cpp: At global scope:
Program04.cpp:45:14: error: variable or field âgetDataâ declared void
Program04.cpp:45:14: error: âStudentTypeâ was not declared in this scope
Program04.cpp:45:38: error: expected primary-expression before âintâ 
```

**一切对我来说都很好，所以我显然不明白。有什么建议么？**

* * *

程序文件

* * *

```
using namespace std;
#include "StudentType.h"
#include <iostream>
#include <iomanip>
#include <fstream>
#include <climits>
#include <string>

const int MAX_STDS = 20;

void getData(StudentType[], int&);

void sortData(StudentType[], int&);

void getFormat(string&);

void computeAverages(StudentType[], int&);

void printData(StudentType[], int&);

int main () {

StudentType students[MAX_STDS];
StudentType();

getData(students, n);
sortData(students, n);
computeAverages(students);
printData(students);

return 0;
}

void getData(StudentType students[], int n){
    ifstream fin;
    int grade;
    string filename, name;
    bool done = false;

    cout << "Enter filename: ";
    cin >> filename;
    fin.open(filename.c_str());
    while(true) {
       try {
         fin.open(filename.c_str());
         if(!fin) {
            throw(string("Could not open " + filename + "."));
         }
         break;
       }
       catch (string s) {
          cout << s << endl;
          cout << "Enter a different file name: ";
          cin >> filename;
       }
    }
    n=0;
    while(n<MAX_STDS && getline(fin, name)) {
       students[n].setName(getFormat(name));
       for(int i = 0; i < NUM_GRDS; ++i) {
          fin >> grade;
          student[n].setGrade(grade, i);
       }
       getline(fin, name);
       ++n;
    }
}

void printData(StudentType students[], int n) {
    for(int i = 0; i < n; ++i) {
       students[i].printLine();
    }
}

void computeAverages(StudentType students[], int n) {
    for(int i = 0; i < n; ++i) {
       students[i].computeAverage();
    }
}

void sortData(StudentType students[], int n) {
    for(int i=0; i<n-1; i++) {
       for(int j=0; j < n-1-i; ++j) {
          if(students[j].getName() > students[j+1].getName()) {
             swap(students[j], students[j+1]);
          }
       }
    }
}

void getFormat(string& name) {
    string first;
    string middle;
    string last;
    char n, m;
    int size = 0;
    n = name.find(' ');
    first = name.substr(0, n);
    m = name.find(' ', n + 1);
    size = name.size();
    if (m != string::npos) {
       middle = name.substr(n+1, m-(n+1));
       last = name.substr(m+1, size - (m+1));
    }
    else {
       middle = "";
       last = name.substr(n + 1, size - (n + 1));
    }
    name = last + ", " + first;
    if (middle != "") {
       name = (name + ' ') + middle[0];
    }
} 
```

* * *

头文件

* * *

```
#ifdef STUDENTTYPE__H
#define STUDENTTYPE__H

#include <string>
#include<iostream>

const int NUM_GRDS = 10;

class StudentType {
   public:
      StudentType();
      void setName(std::string);
      void setGrade(int, int);
      void computeAverage();
      std::string getName() const;
      void print(std::ostream& = std::cout) const;
   private:
      std::string name;
      int grades[NUM_GRDS];
      float avg;
};

#endif 
```

* * *

实施文件

* * *

```
#include "StudentType.h"
#include <iomanip>

StudentType::StudentType(){
    name = "";
    for(int i =0; i <NUM_GRDS; ++i){
       grades[i] = 0;
    }
    avg = 0.0;
}

void StudentType::setName(std::string newName){
    name = newName;
}

void StudentType::setGrade(int grade, int num){
    grades[num] = grade;
}

void StudentType::computeAverage(){
    float total = 0;
    for(int i = 0; i<NUM_GRDS; ++i){
       total += grades[i];
    }
    avg = total/NUM_GRDS;
}

std::string StudentType::getName() const{
    return name;
}

void StudentType::printLine(std::ostream& out) const {
    out.setf(std::left);
    out.setf(std::fixed);
    out.setf(std::showpoint);
    out << "\n" << setw(25) << "Student" << setw(50) << "Grades" << setw(10) << "Average" << endl;
    out << "_____________________________________________________________________________________" << endl;
    out << std::left << std::setw(25) << name << std::right << ' ';
    for(int i = 0; i < NUM_GRDS; ++i){
    out << std::setw(5) << grades[i] << ' ';
    }
    out << setprecision(2) << std::setw(6) << avg << endl;
} 
```

* * *

**程序编译后我的输出应该是这样的......**

* * *

```
Enter file name: grades.dat

Student                  Grades                                            Average
________________________________________________________________________________________
Last, First              90   80   70   60   50   40   30   20   10   0    45.00
Last, First              40   40   40   40   40   40   40   40   40   40   40.00
Last, First              54   98   65   32   21   87   54   65   98   32   60.60
Flames, Blood A          9    8    7    6    5    4    3    2    1    0    4.50
Bottoms, Car             32   65   98   87   54   24   56   89   78   68   65.10
Guitars, Dean            10   10   10   10   10   10   10   10   10   10   10.00
Honer, Ruth T            78   56   12   23   45   89   31   64   97   79   57.40
Hot, Zepher R            12   54   87   89   56   32   51   46   97   31   55.50
.
.
. 
```

**输入文件应具有此格式并包含 20 多个学生用于测试目的：g0、g1、...g9 应为 0 到 100 的 10 个等级**

```
First Middle Last
g0 g1 g2 g3 g4 g5 g6 g7 g8 g9
First Last
g0 g1 g2 g3 g4 g5 g6 g7 g8 g9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:26:27.597

改变

```
#ifdef STUDENTTYPE__H 
```

到

```
#ifndef STUDENTTYPE__H 
```

那么你有适当的双重包含保护

（我必须说一个很常见的错字）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:30:00.080

通过仔细查看您的文件，我发现了 2 个主要错误：

您在头文件中的包含保护搞砸了：

```
#ifdef STUDENTTYPE__H
#define STUDENTTYPE__H 
```

你可能想要：

```
#ifndef STUDENTTYPE__H
#define STUDENTTYPE__H 
```

另外，在程序文件中：

```
void getData(StudentType[], int&); 
```

与实现不匹配

```
void getData(StudentType students[], int n){ 
```

应该是

```
void getData(StudentType students[], int& n){ 
```

对于其他方法也是如此。

另外，我不确定 stackoverflow 是否适合您，因为您没有具体问题，但似乎只是在这里“调试”您的所有错误。也许从一些 c++ 教程开始，并尝试使用编译器的错误消息来追踪所有错误。

# python - 表达式或语句？：'if a : do_something()' 或 '(a and do_somthing())'，哪个更好？

> ID：15759297
> 
> 赞同：2
> 
> 时间：2013-04-02T08:20:28.667
> 
> 标签：python, coding-style, expression

我发现 python 可以很容易地以“lisp”风格进行编码。

# 经验：

正常方式：

```
if a:
    do_something() 
```

“功能”方式：

```
(a and do_something()) 
```

正常方式：

```
if not a:
    do_somthing()
elif b:
    do_otherthing() 
```

“功能”方式

```
((not a and do_something()) or (b and do_otherthing())) 
```

正常方式：

```
a = bla.get_a()
if a is None:
    a = A() 
```

“功能”方式：

```
a = (bla.get_a() or A()) 
```

这个功能非常吸引人，我可以在一行中编码，而这必须以正常方式写成几行。

但我不知道它是“pythonic”还是比平时更糟。

google coding stype 也没有定义哪个更符合规则。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T08:22:14.787

确实

```
if a: 
    do_something() 
```

第二个（`a and do_somthing())`）是可怕的和hacky。正如@limelights 所说，The Zen of Python 说*Explicit 比implicit*和readability *counts*更好。如果你还没有 读过[PEP-8](http://www.python.org/dev/peps/pep-0008/) ，你可能应该读一下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T08:40:49.820

`((not a and do_something()) or (b and do_otherthing()))`不同于

```
if not a:
    do_somthing()
elif b:
    do_otherthing() 
```

通过以下方式：

如果`do_something()`返回 false 值，则第二个表达式`(b and do_otherthing())`也会被计算。

像这样工作的表达式应该使用Python 2.5 引入的[`b if a else c`语法：](http://docs.python.org/2/reference/expressions.html#conditional-expressions)

```
do_somethind() if not a else (b and do_otherthing()) 
```

但是，在您的情况下，您不需要结果，您应该避免这样做，并更好地将语句语法与`:`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T08:33:36.620

如果通过“函数方式”你的意思是“这看起来有点像 LISP”，当然，你已经用括号括住你的代码并删除了冒号。但这并不能使它成为一种“函数式”编程风格，就像它使括号内的语句成为一个列表一样。本质上，您正在利用逻辑运算符的短路特性使您的代码更难阅读。

此外，第二个示例中的代码示例实际上在逻辑上并不相同。if`a`为 false 并`do_something()`返回一个 false 值（包括`None`，如果没有显式的 return 语句则自动返回的值），那么`or`实际上不会短路，如果`b`为 true，那么`do_otherthing()`也会被执行。

# javascript - JavaScript - 正则表达式 - 如何替换除 X 之外的从 A 到 Z 的每个字符？

> ID：15759298
> 
> 赞同：0
> 
> 时间：2013-04-02T08:20:32.000
> 
> 标签：javascript, regex, replace

如何用示例“-”替换此字符串中没有“X”的每个字母：

"XASDXDAX".replace(/([AZ^X])/,"-") 应该返回："X---X--X"

正则表达式中一定有问题或其他问题，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T08:21:49.380

你已经接近了，你只需要添加`g`修饰符（对于“全局”），并且你不能同时表达一个类和一个否定类（如果它是第一个字符，`^`则唯一特殊`[]`），所以只需列出范围。此外，您不需要捕获组（`()`）：

```
result = "XASDXDAX".replace(/[A-WY-Z]/g,"-"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:22:51.427

```
"XASDXDAX".replace(/([A-WYZ])/g,"-") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T08:34:48.440

这是您正在搜索的简单正则表达式。试试这个

```
 var str="XASDXDAX".replace(/[^X]/g,"-"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:34:49.213

您还可以使用带全局修饰符的否定类`g`来替换每个非 X 字符：

```
"XASDXDAX".replace(/([^X])/g,"-") 
```

# sql - perl 执行 sql 文件（DBI oracle）

> ID：15759301
> 
> 赞同：0
> 
> 时间：2013-04-02T08:20:36.757
> 
> 标签：sql, oracle, perl, dbi

我有以下问题，我有一个要使用 DBI CPAN 模块 Perl 执行的 SQL 文件我在这个网站上看到了两个解决方案来解决我的问题。

1.  [逐行读取 SQL 文件](https://stackoverflow.com/questions/4217306/execute-sql-file-in-perl)

2.  [一条指令读取 SQL 文件](https://stackoverflow.com/questions/6714170/how-to-pass-in-sql-query-input-file-to-a-perl-dbi-sub-routine)

那么，哪个更好，每种解决方案之间的真正区别是什么？

**编辑**

是为了图书馆。我需要检索输出**和**返回码。

传递的文件类型可能如下：

```
 set serveroutput on;
    set pagesize 20000;
    spool "&1."
    DECLARE
        -- Récupération des arguments
        -- &2: FLX_REF, &3: SVR_ID, &4: ACQ_STT, &5: ACQ_LOG, &6: FLX_COD_DOC, &7: ACQ_NEL, &8: ACQ_TYP    
        VAR_FLX_REF VARCHAR2(100):=&2;
        VAR_SVR_ID NUMBER(10):=&3;
        VAR_ACQ_STT NUMBER(4):=&4;
        VAR_ACQ_LOG VARCHAR2(255):=&5;
        VAR_FLX_COD_DOC VARCHAR2(30):=&6;
        VAR_ACQ_NEL NUMBER(10):=&7;
        VAR_ACQ_TYP NUMBER:=&8;
    BEGIN
        INSERT INTO ACQUISITION_CFT 
            (ACQ_ID, FLX_REF, SVR_ID, ACQ_DATE, ACQ_STT, ACQ_LOG, FLX_COD_DOC, ACQ_NEL, ACQ_TYP) 
        VALUES 
            (TRACKING.SEQ_ACQUISITION_CFT.NEXTVAL, ''VAR_FLX_REF'', 
                ''VAR_SVR_ID'', sysdate, VAR_ACQ_STT, ''VAR_ACQ_LOG'',
                ''VAR_FLX_COD_DOC'', VAR_ACQ_NEL, VAR_ACQ_TYP);
    END;

    /
    exit; 
```

我还有另一个问题要问，同样是 DBI Oracle 模块。我可以对 SQL 文件和控制文件使用相同的代码吗？

（SQL 控制文件示例）

```
 LOAD DATA
    APPEND INTO TABLE DOSSIER
    FIELDS TERMINATED BY ';'
    (
    DSR_IDT,
    DSR_CNL,
    DSR_PRQ,
    DSR_CEN,
    DSR_FEN,
    DSR_AN1,
    DSR_AN2,
    DSR_AN3,
    DSR_AN4,
    DSR_AN5,
    DSR_AN6,
    DSR_PI1,
    DSR_PI2,
    DSR_PI3,
    DSR_PI4,
    DSR_NP1,
    DSR_NP2,
    DSR_NP3,
    DSR_NP4,
    DSR_NFL,
    DSR_NPG,
    DSR_LTP,
    DSR_FLF,
    DSR_CLR,
    DSR_MIM,
    DSR_TIM,
    DSR_NDC,
    DSR_EMS NULLIF DSR_EMS=BLANKS "sysdate",
    JOB_IDT,
    DSR_STT,
    DSR_DAQ "CASE WHEN :DSR_DAQ IS NOT NULL THEN SYSDATE ELSE NULL END"

    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:30:26.643

一次读取一行表格更复杂，但它可以使用更少的内存 - 只要您构建代码以利用每个项目的数据并且以后不需要全部。

通常您希望单独处理每个项目（例如，对数据进行处理），在这种情况下，您不妨使用逐行读取方法来定义您的循环。

默认情况下，我倾向于使用单指令方法，但是一旦我担心记录的数量（尤其是在长时间运行的批处理中），或者需要循环遍历数据作为第一个任务，那么我就会读取记录一个-一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:42:34.067

实际上，您引用的两个答案提出了相同的解决方案，逐行阅读和执行（但第一个更清楚）。第二个问题有一个可选答案，其中文件包含*一个语句*。

如果不逐行执行 SQL，则很难捕获任何错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:27:31.343

*“逐行”仅在每个 SQL 语句位于一行时才有意义。您可能的意思是逐个声明。*

除此之外，这取决于您的 SQL 文件是什么样的以及您想要做什么。

**您的 SQL 文件有多复杂？** 它可以包含这样的东西吗？

```
select foo from table where column1 = 'bar;';   --Get foo; it will be used later. 
```

按语句读取 SQL 文件语句的简单方法是用分号（或任何语句分隔符）分割。但是，如果您在其他地方可能有分号，例如注释或字符串，则此方法将失败。如果你用分号分割这条语句，你会尝试执行以下四个“命令”：

```
select foo from table where column1 = 'bar;
';
--Get foo; 
it will be used later. 
```

显然，这些都不是有效的。正确处理这样的语句绝非易事。您必须完全解析 SQL 才能弄清楚语句是什么。不幸的是，没有现成的模块可以为您执行此操作（这[`SQL::Script`](http://search.cpan.org/~adamk/SQL-Script/lib/SQL/Script.pm)是 SQL 文件处理模块的一个良好开端，但根据文档，此时它只是拆分为分号）。

如果您的 SQL 文件很简单，在语句或注释中不包含任何语句分隔符；或者如果它可以通过其他方式进行预测（例如每行有一个语句），那么很容易将文件拆分为语句并逐个执行它们。但是，如果您必须处理任意 SQL 语法，包括上述情况，这将是一项复杂的任务。

**什么样的任务？**

*   您需要检索输出吗？
*   检测任何单个语句中的错误是否重要，或者它只是一个可以运行而无需担心的批处理作业？

如果这是您可以运行并忘记的事情，您可以让 Perl 执行一个系统命令，告诉 Oracle 处理该文件。这将比自己处理所有语句更简单。但是，如果您需要在 Perl 中处理结果或处理错误，则必须逐个声明地自己处理。

**更新：**根据您的回复，您想编写一个可以处理任意 SQL 语句的库。在这种情况下，您肯定需要解析 SQL 并一次执行一条语句。这是可行的，但并不简单。块的可能性`BEGIN...END`意味着您必须能够正确处理语句中的分号。

[`SQL::Statement`模块类](http://search.cpan.org/~rehsack/SQL-Statement-1.402/)可能会有所帮助。

# php - 单击 2 个中的任何一个按钮即可提交我的表单

> ID：15759304
> 
> 赞同：0
> 
> 时间：2013-04-02T08:21:04.030
> 
> 标签：php, html

不显示全部和显示功能之间没有关系。

即使我评论了 ShowAll 函数中的代码，表单仍然被提交。

当我单击按钮时，是否有任何与 POST 事件相关的内容？

我今天也做了 1 处更改，因为我删除了表单标签正文之外的第二个按钮代码

旧代码

```
<form name="form2" method="post" action= "submitlogin.php"> 

<td class="label"><br><input type="submit" name="submit" value="Submit-" size="25" onclick="display()"></td>

<button id='button' onclick="ShowAll()" >Click </button>

</form> 
```

新变化

```
<form name="form2" method="post" action= "submitlogin.php"> 

<td class="label"><br><input type="submit" name="submit" value="Submit-" size="25" onclick="display()"></td>

</form>

<button id='button' onclick="ShowAll()" >Click </button> 
```

// 现在 ShowAll 在表单标签正文之外停止工作

# html - 由于锚标签，看起来很奇怪的破折号

> ID：15759305
> 
> 赞同：1
> 
> 时间：2013-04-02T08:21:08.910
> 
> 标签：html, css

在图像右侧列出的元素中有一个看起来很奇怪的破折号，我一生都无法弄清楚，但是当我取出`<a>`标签时它就消失了。

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:24:38.817

这是链接的常规下划线。具体来说，图像标签后面的空白区域会被加下划线。

您可以将样式添加`text-decoration: none;`到链接以删除下划线：

```
.team-list-item a { text-decoration: none; } 
```

或者，您可以在标记后写入`div`右侧`img`以删除空白，或者您可以使图像成为浮动到左侧的块元素：

```
.team-list.item img { float: left; } 
```

但是，最后两个替代方案会稍微改变布局，因为它会减少图像右侧的空间。另一方面，您可能想要这样做，并使用边距或填充来调整空间，因为这提供了比使用空格字符进行间距更稳定的布局。

# wpf - 在 WPF 中使用 Multibinding 时是否必须使用转换器？

> ID：15759308
> 
> 赞同：3
> 
> 时间：2013-04-02T08:21:25.750
> 
> 标签：wpf, binding, multibinding, converters

我想知道是否在某些情况下您可以在没有转换器的情况下使用多重绑定 - 以及迫使我们使用转换器的限制。

特别是我试图以 string.format 样式将一个字符串绑定到另外两个字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:54:58.113

在没有转换器的情况下使用 a 的最常见区域`MultiBinding`是当您有一个连接两个单独值的字符串格式时

比如说：

格式化具有 First、Last 部分的名称，并且您希望根据语言环境对其进行格式化

```
<StackPanel>
  <TextBlock x:Name="firstName"
              Text="John" />
  <TextBlock x:Name="lastName"
              Text="Wayne" />
  <TextBlock>
    <TextBlock.Text>
      <MultiBinding StringFormat="{}{0} {1}">
        <Binding ElementName="firstName"
                  Path="Text" />
        <Binding ElementName="lastName"
                  Path="Text" />
      </MultiBinding>
    </TextBlock.Text>
  </TextBlock>
</StackPanel> 
```

您确实看到很多使用转换器的地方，因为使用 a`MultiBinding`您的操作与 a 相同，`Binding`但是您将多个源值格式化为单个结果而不是单个输入 -> 单个输出。

您可以使用 Binding`ConverterParameter`来提供另一个输入值，但是您有一些限制，例如无法为其提供运行时 Bound 值，这`MultiBinding`更适合您想要绑定所有输入的多个输入。

它归结为您的用例，如果您想根据您以自定义方式评估的不同输入类型提供结果，您需要一个转换器（非常类似于绑定。只需将差异视为 1 个输入绑定- 能够对抗多个值）

# jquery - 淡化效果 页面之间

> ID：15759317
> 
> 赞同：-2
> 
> 时间：2013-04-02T08:22:01.503
> 
> 标签：jquery, html, css

我怎样才能创建这样的效果（每次单击菜单上的选项时，您都会看到一个很好的淡入淡出效果，它只发生在网页的内容中而不是整个页面中）请参见示例：

[http://www.wix.com/demone2/country_b_and_b](http://www.wix.com/demone2/country_b_and_b)

如果您知道一些可以实现该效果的 jquery 脚本或者您知道其他技术，请告诉我。

任何帮助将不胜感激。

编辑：

我在菜单中的链接中添加了一个 class="transition"，并在我想要产生效果的 div 中添加了一个 class="divTofade"。Jojo 提供的链接效果很好，但会在整个页面上产生效果，只需删除和更改一些我可以淡化的代码，但不能像我给出的示例 web 那样工作，正在淡化 -div class="transition"- 到0 之后重定向到另一个链接，在示例中，当 -div class="transition"- 消失时，您可以在后台看到您正在重定向的链接的内容。

```
$("a.transition").click(function(event){
 event.preventDefault();
 linkLocation = this.href;

$(".divToFade").fadeOut(1000, redirectPage);
});

function redirectPage() {
window.location = linkLocation;
}; 
```

请帮我 ：-）

对不起我的英语，不是我的母语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:36:22.813

使用 jquery 你可以为页面添加一些淡入淡出效果

```
http://api.jquery.com/fadeIn/
http://api.jquery.com/fadeOut/ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-04T09:20:53.353

你可以在这里实现这个效果：

[http://www.onextrapixel.com/2010/02/23/how-to-use-jquery-to-make-slick-page-transitions/](http://www.onextrapixel.com/2010/02/23/how-to-use-jquery-to-make-slick-page-transitions/)

# python - 如何使用 threading.timer 开始 - 暂停 - 继续 - 暂停 - 继续 - 暂停？

> ID：15759318
> 
> 赞同：0
> 
> 时间：2013-04-02T08:22:05.187
> 
> 标签：python

如何使用 threading.timer 开始-暂停-继续-暂停-继续-暂停？

到目前为止我所做的:=

```
class Scheduling(threading.Thread):
    def __init__(self):
            self.schedule = None
            threading.Thread.__init__(self)

    def run(self):                                
            self.schedule = threading.Timer(2, self.run).start() 
```

主要是，我有这样的电话：

```
sched = Scheduling()
sched.start() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:06:03.733

> 我写了 def fin(self): self.schedule.cancel() 但它没有停止为什么？

您的 self.schedule 对象不是 threading.Timer 对象。start() 方法[实际上不返回任何计时器对象](http://docs.python.org/2/library/threading.html#threading.Thread.start)。您需要显式创建计时器。

```
class Scheduling(threading.Thread):
    def __init__(self):
            self.schedule = None
            threading.Thread.__init__(self)

    def run(self):                                
            self.schedule = threading.Timer(2, self.run)
            self.schedule.start()

    def cancel(self):
            self.schedule.cancel() 
```

我没有测试它。但是，我不确定您希望 Timer 做什么。两秒钟后它会调用 run 来重新启动一个新的计时器？

# wso2 - 返回属性值作为代理服务中的响应

> ID：15759319
> 
> 赞同：0
> 
> 时间：2013-04-02T08:22:08.363
> 
> 标签：wso2, wso2esb

我有一种情况，我创建了一个代理服务，其中我使用了内联 wsdl，以便我可以从 try-it 工具传递一些数据。之后，我想获取从 try-it 传递到 in seq 的数据，这是我能够做到的。之后就没有使用 inline-wsdl。在“顺序”中，我使用了一个自定义类调解器，其中我设置了一个名为“用户”的属性，并且我将该属性值（用户）保存在属性调解器中。现在我想通过输出序列将此属性作为响应发送。如何执行此操作。请帮助...我的代理代码是：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="ProviderPublication" transports="https,http" statistics="disable" trace="disable" startOnLoad="false">
   <target>
      <inSequence>
         <property xmlns:xs="http://www.openandaway.org/xml/BBC/" name="URI" expression="//xs:SessionID" scope="default" type="STRING"/>
         <payloadFactory>
            <format>
               <p:Session xmlns:p="http://www.openandaway.org/xml/BBC/">
                  <xs:ChannelURI xmlns:xs="http://www.openandaway.org/xml/BBC/">$1</xs:ChannelURI>
               </p:Session>
            </format>
            <args>
               <arg xmlns:ns="http://org.apache.synapse/xsd" expression="get-property('URI')"/>
            </args>
         </payloadFactory>
         <log level="full">
            <property name="Inside_In_Sequence" value="---------Hi i am inside in sequence--------------"/>
         </log>
         <log level="full">
            <property name="PropValFromURI" expression="get-property('URI')"/>
         </log>
      </inSequence>
      <outSequence>
         <log level="full">
            <property name="Inside_Out_Sequence" value="-------Hi inside Out Sequence--------------------"/>
         </log>
         <property name="GetDataFromINSeq" expression="get-property('URI')" scope="default" type="STRING"/>
         <log level="full">
            <property name="GetPropValueFromInSeq" expression="get-property('URI')"/>
         </log>
         <send/>
      </outSequence>
   </target>
   <publishWSDL uri="http://10.224.188.87:2425/BBC1.0/services/BBCPublicationService?wsdl"/>
   <description></description>
</proxy> 
```

在上面的代码中，我无法进入 out 序列。它没有击中顺序。我在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:12:09.413

您可以在结尾处访问该属性。请参考以下主题。

[stWSO2ESB OutSequence 处理](https://stackoverflow.com/questions/13144596/stwso2esb-outsequence-processing)

[将属性从 inSequence 传递到 outSequence](https://stackoverflow.com/questions/13377837/pass-property-from-insequence-to-outsequence)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:51:30.113

在您的代理的顺序中，我没有看到您将消息发送到任何后端。即我没有看到顺序中的发送部分。没有消息出去，就没有办法响应输出序列。

关于访问类调解器设置的属性的原始问题，如果您将范围设置为“突触”的属性设置为，您可以在代理中的任何位置访问它。

# android - 日期选择器对话框侦听器

> ID：15759324
> 
> 赞同：3
> 
> 时间：2013-04-02T08:22:16.307
> 
> 标签：android, android-widget, datepicker, textview, datepickerdialog

我必须使用 DatePickerDialog 在文本视图中获取选定的日期。当我单击文本视图时，应出现 DatePickerDialog。

我写了这个

```
private DatePickerDialog.OnDateSetListener dateOnDateSetListener = new DatePickerDialog.OnDateSetListener() {

    @Override
    public void onDateSet(DatePicker view, int selectedYear, int selectedMonth, int selectedDay) {
        datePick.setText(new StringBuilder().append(selectedDay).append("-").append(selectedMonth).append("-").append(selectedYear));
    }
};

datePick = (TextView) findViewById(R.id.date_pick);

    datePick.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            Calendar calendar = Calendar.getInstance();
            year = calendar.get(Calendar.YEAR);
            monthOfYear = calendar.get(Calendar.MONTH);
            dayOfMonth = calendar.get(Calendar.DAY_OF_MONTH);
            new DatePickerDialog(getContext(), dateOnDateSetListener, year, monthOfYear, dayOfMonth);
        }
    }); 
```

但它不起作用。所以几乎没有谷歌搜索，我把它改成了这个并且它的工作，但我不明白为什么会这样？我在上面的代码中搞砸了什么吗

```
datePick = (TextView) findViewById(R.id.date_pick);

    datePick.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
            Calendar calendar = Calendar.getInstance();
            year = calendar.get(Calendar.YEAR);
            monthOfYear = calendar.get(Calendar.MONTH);
            dayOfMonth = calendar.get(Calendar.DAY_OF_MONTH);
            showDialog(DATE_DIALOG_ID);
        }
    });

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
       // set date picker as current date
       return new DatePickerDialog(this, dateOnDateSetListener, 
                     year, monthOfYear,dayOfMonth);
    }
    return null;
}

private DatePickerDialog.OnDateSetListener dateOnDateSetListener = new DatePickerDialog.OnDateSetListener() {

    @Override
    public void onDateSet(DatePicker view, int selectedYear, int selectedMonth, int selectedDay) {
        datePick.setText(new StringBuilder().append(selectedDay).append("-").append(selectedMonth).append("-").append(selectedYear));
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:35:14.440

> 但它不起作用。所以几乎没有谷歌搜索，我把它改成了这个并且它的工作，但我不明白为什么会这样？我在上面的代码中搞砸了什么吗

您并没有真正搞砸任何事情，只是忘记调用`.show()`对话框；IE：

```
new DatePickerDialog(getContext(), dateOnDateSetListener, year, monthOfYear, dayOfMonth).show(); 
```

`.show()`它在第二个代码片段中没有工作的原因是因为那里`Activity`管理对话框，因此将负责在返回的对话框上调用该方法`onCreateDialog(int id)`。

一般来说，我会推荐第二种方法，因为您真的不想自己管理对话框的生命周期 - 仅仅是因为当您的活动在配置更改等时重新创建时，要正确处理它是相当痛苦的。但是，对于更现代的解决方案，使用片段，您应该考虑将对话框包装在 a[`DialogFragment`](http://developer.android.com/reference/android/app/DialogFragment.html)中（支持库中还有一个适用于预蜂窝设备的版本）。

# css - 使用 -ms-filter 的 IE8 和 IE9 渐变覆盖元素

> ID：15759326
> 
> 赞同：1
> 
> 时间：2013-04-02T08:22:28.270
> 
> 标签：css, internet-explorer, internet-explorer-8, internet-explorer-9, gradient

申请时：

```
-ms-filter:"progid:DXImageTransform.Microsoft.gradient(GradientType=1,startColorstr=#FFFFFF,endColorstr=#000000)"; 
```

对于 DIV，渐变的行为就好像它是覆盖 div 的元素，因此鼠标光标不再更改，也不会在 div 上发生 mousemove 事件。div 中唯一仍在响应的部分是边框。

我用谷歌搜索，哭着把奶牛放在床上，但都无济于事。它显示完美，但我需要让包含的 div 响应鼠标事件，而且我没有更多的头发可以撕掉。

当我们不再关心使用 IE8/9 的可怜草皮时，确实会是快乐的一天

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:25:28.317

不幸的是，你是对的；这正是梯度过滤器的工作原理。

我认为您在这里唯一的办法是使用传统的预渲染渐变图像作为 CSS 背景，或者将过滤器应用于直接位于 div 后面的另一个元素（或者`:before`可能是伪元素？我不确定如何渐变适用于生成的盒子）。

# java - 使用摇摆时出错

> ID：15759329
> 
> 赞同：0
> 
> 时间：2013-04-02T08:22:44.127
> 
> 标签：java, swing, jbutton, runtime-error, imageicon

我正在尝试使用一些按钮创建面板，该按钮可以禁用另一个按钮 代码完美编译但在运行时显示错误有什么问题。我无法调试这个。

```
Exception in thread "main" java.lang.NoClassDefFoundError: buttondemo (wrong nam
e: components/buttondemo)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:14
2)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:472) 
```

这是代码

```
import javax.swing.AbstractButton;
import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.JFrame;
import javax.swing.ImageIcon;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;

public class buttondemo extends JPanel implements ActionListener {
    private JButton b1, b2, b3;

    public buttondemo() {
        ImageIcon Left = createImageIcon("C:\\Users\\nco\\Desktop\\Swing\\components\\images\\left.png");
        ImageIcon Right = createImageIcon("C:\\Users\\nco\\Desktop\\Swing\\components\\images\\right.jpg");
        ImageIcon Middle = createImageIcon("C:\\Users\\nco\\Desktop\\Swing\\components\\images\\middle.jpg");
        b1 = new JButton("Disable middle button", Left);
        b1.setVerticalTextPosition(AbstractButton.CENTER);
        b1.setMnemonic(KeyEvent.VK_D);// shortcut D
        b1.setActionCommand("disable");
        b2 = new JButton("middle button", Middle);
        b2.setVerticalTextPosition(AbstractButton.BOTTOM);
        b2.setVerticalTextPosition(AbstractButton.CENTER);
        b3.setMnemonic(KeyEvent.VK_M);// shortcut M
        b3 = new JButton("Enable middle button", Right);
        b3.setVerticalTextPosition(AbstractButton.RIGHT);
        b3.setMnemonic(KeyEvent.VK_E);// shortcut E
        b3.setActionCommand("enable");
        b3.setEnabled(false);
        b1.addActionListener(this);
        b3.addActionListener(this);
        b1.setToolTipText("click on the middle button to " + "disable middle");
        b3.setToolTipText("click on the middle button to " + "enable middle");
        b2.setToolTipText("click disable");
        add(b1);
        add(b2);
        add(b3);
    }

    public void actionPerformed(ActionEvent e) {
        if ("disable".equals(e.getActionCommand())) {
            b2.setEnabled(false);
            b1.setEnabled(false);
            b3.setEnabled(true);
        } else {
            b2.setEnabled(true);
            b1.setEnabled(true);
            b3.setEnabled(false);
        }
    }

    protected static ImageIcon createImageIcon(String path) {
        java.net.URL img = buttondemo.class.getResource(path);
        if (img != null) {
            return new ImageIcon(img);
        } else {
            System.err.println("could not find path" + path);
            return null;
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("Button demso");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        buttondemo Contentpane = new buttondemo();
        Contentpane.setOpaque(true);
        frame.setContentPane(Contentpane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String args[]) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:47:17.973

*   `b3.setMnemonic(KeyEvent.VK_M);// shortcut M`是非`JButton`初始化的代码行（在下一个代码行中初始化）

*   并非所有[Text 和 Icon 的组合都可以匹配在一起](http://www.java2s.com/Code/Java/Swing-JFC/MovingtheIconinaJButtonComponent.htm)，AbstractButton 也不例外

*   [仅对BorderLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)使用常量

![在此处输入图像描述](https://i.stack.imgur.com/r0HaM.jpg)

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingConstants;
import javax.swing.UIManager;

public class buttondemo extends JPanel implements ActionListener {

    private JButton b1, b2, b3;

    public buttondemo() {
        Icon Left = UIManager.getIcon("OptionPane.errorIcon");
        Icon Right = UIManager.getIcon("OptionPane.informationIcon");
        Icon Middle = UIManager.getIcon("OptionPane.warningIcon");
        b1 = new JButton("Disable middle button", Left);
        b1.setVerticalTextPosition(SwingConstants.TOP);
        b1.setHorizontalTextPosition(SwingConstants.CENTER);
        b1.setMnemonic(KeyEvent.VK_D);//shortcut D
        b1.setActionCommand("disable");
        b2 = new JButton("middle button", Middle);
        b2.setVerticalTextPosition(SwingConstants.BOTTOM);
        b2.setHorizontalTextPosition(SwingConstants.LEFT);
        b3 = new JButton("Enable middle button", Right);
        b3.setMnemonic(KeyEvent.VK_M);//shortcut M
        b2.setVerticalTextPosition(SwingConstants.EAST);
        b2.setHorizontalTextPosition(SwingConstants.CENTER);
        b3.setActionCommand("enable");
        b3.setEnabled(false);
        b1.addActionListener(this);
        b3.addActionListener(this);
        b1.setToolTipText("click on the middle button to " + "disable middle");
        b3.setToolTipText("click on the middle button to " + "enable middle");
        b2.setToolTipText("click disable");
        add(b1);
        add(b2);
        add(b3);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if ("disable".equals(e.getActionCommand())) {
            b2.setEnabled(false);
            b1.setEnabled(false);
            b3.setEnabled(true);
        } else {
            b2.setEnabled(true);
            b1.setEnabled(true);
            b3.setEnabled(false);
        }
    }

    protected static ImageIcon createImageIcon(String path) {
        java.net.URL img = buttondemo.class.getResource(path);
        if (img != null) {
            return new ImageIcon(img);
        } else {
            System.err.println("could not find path" + path);
            return null;
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("Button demso");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        buttondemo Contentpane = new buttondemo();
        Contentpane.setOpaque(true);
        frame.setContentPane(Contentpane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String args[]) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

编辑

WinXP 上的 Java6 导致同样的异常

> java.lang.NoClassDefFoundError: JButton/ButtonDemo 引起：java.lang.ClassNotFoundException: JButton.ButtonDemo at java.net.URLClassLoader$1.run(URLClassLoader.java:202) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:307) 在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301) 在 java.lang .ClassLoader.loadClass(ClassLoader.java:248) 找不到主类：JButton.ButtonDemo。程序将会退出。线程“main”Java 结果中的异常：1

*   但必须使用正确`private`的使用而不是`protected static ImageIcon createImageIcon(String path) {`导致异常

@看

```
private ImageIcon createImageIcon(String path) {
    java.net.URL img = ButtonDemo.class.getResource(path);
    if (img != null) {
        return new ImageIcon(img);
    } else {
        System.err.println("could not find path" + path);
        return null;
    }
} 
```

# php - 警告：mysql_result()：提供的参数不是有效的 MySQL 结果资源v

> ID：15759333
> 
> 赞同：-2
> 
> 时间：2013-04-02T08:22:51.723
> 
> 标签：php, mysql

所以，我一直在为我正在处理的 Paypal IPN 脚本而烦恼——当谈到 PHP 时，我有点白痴。

我有一个名为 glob.inc.php 的脚本，它连接到我的数据库并检查用户是否是高级用户，但是当脚本运行时，我得到了这个：

> 警告：mysql_result()：提供的参数不是第 11 行 /public_html/fts/rs_ipn/glob.inc.php 中的有效 MySQL 结果资源

这是 glob.inc.php 的脚本：

```
 <?php
session_start();

// database connection
mysql_connect('XXXXXXXX','XXXXXXXX');
mysql_select_db('XXXXXXXX');

// premium check function
function is_premium() {
    $premium_query = mysql_query("SELECT 'premium' FROM 'users' WHERE 'user_id'='".$_SESSION['user_id']."'");
    $premium = mysql_result($premium_query, 0, 'premium');
    if ($premium =='1') {
    return true;
    } else {
      return false;
    }
 }

?> 
```

我已经尝试了我能想到的一切，但我没有快乐！可能有兴趣知道该脚本未能成功检查用户是否为高级用户。会话创建正常，数据库连接也很好。

希望你能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:25:18.597

您需要[获取结果](http://www.php.net/mysql-fetch-row)而不是尝试访问资源。

提问前请参考文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:27:22.047

您是否检查过查询是否正确执行？

请参阅[此示例](http://php.net/manual/en/function.mysql-result.php)。

此外，如评论中所述，不要使用 mysql_* 函数，而是使用 mysqli_* 或 PDO。

# sql - tsql 左外连接，多条记录显示在一行上

> ID：15759337
> 
> 赞同：1
> 
> 时间：2013-04-02T08:23:26.027
> 
> 标签：sql, tsql, sql-server-2005

嗨，我有两个具有 1-N 关系的表，其中 N 最大为 3。一个组至少有 1 个用户，最多有 3 个用户。我想使用选择查询在单行上显示组和所有可能的用户。

团体 ：

```
ID  Name
1   Group1
2   Group2 
```

用户：

```
ID  Username IDGroup
1   User1    1
2   User2    2
3   User3    1
4   User4    1 
```

结果（没有用户名可以显示为空或空字符串）：

```
IDGroup GroupName Username1 Username2 Username3
1       Group1    User1     User3     User4
2       Group2    User2     Null      Null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:37:28.873

您可以使用[Pivot](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.90%29.aspx)。

```
select P.IDGroup,
       P.GroupName,
       P.[1] as Username1,
       P.[2] as Username2,
       P.[3] as Username3
from 
  (
  select G.ID as IDGroup,
         G.Name as GroupName,
         U.Username,
         row_number() over(partition by G.ID order by U.Username) as rn
  from Groups as G
    left outer join Users as U
      on G.ID = U.IDGroup
  ) as T
pivot
  (
  max(T.Username) for T.rn in ([1],[2],[3])
  ) as P 
```

[SQL小提琴](http://sqlfiddle.com/#!3/85244/1)

**更新：**

如果需要更多字段，我会这样做。

```
select T.IDGroup,
       T.GroupName,
       max(case when T.rn = 1 then T.Username end) as Username1,
       max(case when T.rn = 1 then T.Email end) as Email1,
       max(case when T.rn = 2 then T.Username end) as Username2,
       max(case when T.rn = 2 then T.Email end) as Email2,
       max(case when T.rn = 3 then T.Username end) as Username3,
       max(case when T.rn = 3 then T.Email end) as Email3
from (
     select G.ID as IDGroup,
            G.Name as GroupName,
            U.Username,
            U.Email,
            row_number() over(partition by G.ID order by U.Username) as rn
     from Groups as G
       left outer join Users as U
         on G.ID = U.IDGroup
     ) as T
group by T.IDGroup,
         T.GroupName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T10:04:32.610

我也想提供这个答案，因为如果您想添加其他字段，它也很好，而且我认为更灵活：

```
select  
        T.IDGroup
       ,T.GroupName
       ,[1] = max(case when rn = 1 then T.Username end)
       ,[2] = max(case when rn = 2 then T.Username end)
       ,[3] = max(case when rn = 3 then T.Username end)
from 
  (
  select G.ID as IDGroup,
         G.Name as GroupName,
         U.Username,
         row_number() over(partition by G.ID order by U.Username) as rn
  from Groups as G
    left outer join Users as U
      on G.ID = U.IDGroup
  ) as T
group by T.IDGroup, T.GroupName 
```

# c# - 如何为 GTK 创建自己的样式并在我的应用程序中执行它

> ID：15759340
> 
> 赞同：0
> 
> 时间：2013-04-02T08:23:40.343
> 
> 标签：c#, gtk

我想在我的应用程序中为 GTK 和 /use/ 创建一个自定义样式。

即使我知道如何创建样式，应用程序也会使用系统默认样式（或运行应用程序的用户的默认选择）。是否可以覆盖它，以便我的应用程序始终使用我为它创建的样式（皮肤）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:29:32.547

您可以将整个 Mono Runtime（19 mb 开销）嵌入到您的应用程序中。这样就不会有任何依赖关系，您的用户甚至不需要安装 .NET 或 MONO。参考以下链接： [http ://www.mono-project.com/Embedding_Mono](http://www.mono-project.com/Embedding_Mono)

您可以将所有 GTK# 程序集复制到您的程序目录中。但是不推荐它，因为如果用户安装了另一个版本的 Gtk 运行时，您可能会遇到很多问题。

您可以将 GTK# 安装程序与应用程序的 Windows 安装程序集成。

您可以使用部署管理/依赖管理软件，但这很昂贵，因为所有好的都是适当的。

另请参阅以下链接：

[http://www.mono-project.com/Embedding_Mono](http://www.mono-project.com/Embedding_Mono)

希望它有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:46:34.830

您需要查看[GtkCssProvider](https://developer.gnome.org/gtk3/stable/GtkCssProvider.html)。这是 Gtk 中用于解析和加载调整后的 css 主题的类，您需要为您的应用程序设置一个新的提供程序并让该提供程序加载您的自定义主题。相关的功能在那里，或者足够接近。

# iphone - 如何在多个类（视图控制器）中使用 NSObject 类中的 NSString

> ID：15759342
> 
> 赞同：0
> 
> 时间：2013-04-02T08:23:46.723
> 
> 标签：iphone, ios, objective-c, xcode

我有一个 NSObject 类，它有一个名为 tweetTitle 的 NSString；

TweetDesc.h 文件

```
#import <Foundation/Foundation.h>

@interface TweetDesc : NSObject

@property (strong, nonatomic) NSString * tweetTitle;

-(void) setFullTweetTitle:(NSString *) fullTweetTitle;
@end 
```

TweetDesc.m 文件

```
@implementation TweetDesc
@synthesize tweetTitle;

-(void) setFullTweetTitle:(NSString *) fullTweetTitle
{
    self.tweetTitle = fullTweetTitle;
}
@end 
```

我有三个类（视图控制器），FirstViewController、SecondViewController 和 ThirdViewController。

这是FirstViewController FirstViewController.h的代码

```
@interface TweetViewController : UIViewController <UITextViewDelegate>
@property (strong, nonatomic) NSString * tweet;
@property (weak, nonatomic) IBOutlet UITextView *tvTweetTitle;
- (IBAction)btnCreateTweet:(id)sender;
@end 
```

第一视图控制器.m

```
@implementation TweetViewController
@synthesize tvTweetTitle, tweet;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.tvTweetTitle.delegate = self;
}

- (IBAction)btnCreateTweet:(id)sender
{
    tweet = [[NSString alloc]initWithFormat:@"%@", tvTweetTitle.text];

    TweetDesc * td = [[TweetDesc alloc]init];
    [td setFullTweetTitle:tweet];

    SecondViewController * svc = [self.storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];
    [self.navigationController pushViewController:ivc animated:YES];
} 
```

我的问题是：如何在第二个和第三个 ViewController 中使用 tweetTitle 而无需创建 TweetDesc 类的新实例并在每个 ViewControler 中再次设置 tweetTitle。

在我尝试的第二个视图控制器中：

```
TweetDesc * td = [[TweetDesc alloc]init];
NSLog(@"%@", td.tweetTitle); 
```

但我得到空值，似乎它已经发布或其他东西。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:47:20.120

只需给出`SecondViewController`一个`TweetDesc`属性，如下所示：

```
@interface TweetDesc : UIViewController

@property (nonatomic, strong) TweetDesc *tweetDesc;

... 
```

然后，在实例化 a 之后`SecondViewController`，设置它的`tweetDesc`属性：

```
SecondViewController * svc = [self.storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];
svc.tweetDesc = td;
[self.navigationController pushViewController:svc animated:YES]; 
```

在您的`SecondViewController`实现中，用于`self.tweetDesc`访问实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:40:50.460

首先，您不需要单个属性的类，仅使用字符串。有几种方法可以做到这一点。

*   首先，您可以在**AppDelegate**中全局定义一个 tweet 属性。
*   您可以将变量引用从一个视图控制器传递到另一个视图控制器。
*   或者，您可以使用**NSUserDefaults**来设置和获取文本。

在您的情况下，第一个更有用。只需执行以下操作

在 AppDelegate.h

定义一个属性为 NSString *tweetText;

现在在你的行动

```
- (IBAction)btnCreateTweet:(id)sender
{
     AppDelegate *appDelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate];
     appDelegate.tweetText=tvTweetTitle.text;  
} 
```

然后在您想要访问该值的任何控制器中，只需使用

```
AppDelegate *appDelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate];
NSLog("%@",appDelegate.tweetText); 
```

NSUserDefaults 可以使用与设置值相同的方法

```
[[NSUserDefaults standardUserDefaults] setObject:tvTweetTitle.text forKey:@"Tweet"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

并得到

```
NSLog("%@",[[NSUserDefaults standardUserDefaults] valueForKey:@"Tweet"]); 
```

确保在导航到其他控制器之前设置值..

以上应该解决你的目的..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:58:12.317

根据您的评论，我觉得您希望每个视图控制器都持有一个`TweetDesc`对象。为此，您可以有一个像这样的基类

```
@interface baseViewController:UIViewController
@property(strong, nonatomic)TweetDesc *td;
@end 
```

你所有的视图控制器都应该派生自这个基类。所以你的控制器定义看起来像这样 -

```
@interface FirstViewController:baseViewController
...
@end

@interface SecondViewController:baseViewController
...
@end

@interface ThirdViewController:baseViewController
...
@end 
```

U 在 FirstViewController 中实例化它 -

```
TweetDesc * td = [[TweetDesc alloc]init];
[td setFullTweetTitle:@"whatever string you want"]; 
```

并将其传递给 SecondViewController - //就像 Rob Mayoff 的回答

```
SecondViewController * svc = [self.storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];
svc.tweetDesc = td;
[self.navigationController pushViewController:svc animated:YES]; 
```

**在SecondViewController 内部**，您可以将其称为`self.tweetDesc`. 然后使用上面的代码将其传递给您想要的任何视图控制器。

```
 ThirdViewController *third= [self.storyboard instantiateViewControllerWithIdentifier:@"ThirdViewController "];
    third.tweetDesc = self.tweetDesc;
    [self.navigationController pushViewController:third animated:YES]; 
```

将它传递给任何视图控制器，只需确保它的基类是 baseClassViewController。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:29:14.390

您需要使用`category`where`TweetDesc`您创建添加默认标题的方法。或者您可以创建`TweetDesc`一个始终拥有一个标题的单例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T08:29:30.453

在您`ViewController`创建一个名为`initWithTweetDesc`. 该方法将如下所示：

```
- (id)initWithTweetDesc:(TweetDesc*)tweet
{
    self = [super init];
    if (self) {
        _tweet = tweet;
    }
    return self;
} 
```

现在，当您想移动到新的视图控制器时，运行以下代码：

```
TweetViewController *vc = [[TweetViewController alloc] initWithTweetDesc:tweetDesc];
[self.navigationController pushViewController:vc animated:YES]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T08:40:12.933

您可以为此使用 AppDelegate。

`@property(nonatomic, strong) TweetDesc * td;`在`AppDelegate.h`文件中声明属性。

并改变方法，如：

```
- (IBAction)btnCreateTweet:(id)sender
{
    tweet = [[NSString alloc]initWithFormat:@"%@", tvTweetTitle.text];

    TweetDesc * td = [[TweetDesc alloc]init];
    [td setFullTweetTitle:tweet];
    [[[UIApplication sharedApplication] delegate] setTd:td];

    SecondViewController * svc = [self.storyboard instantiateViewControllerWithIdentifier:@"SecondViewController"];
    [self.navigationController pushViewController:ivc animated:YES];
} 
```

在您的第二个和第三个视图控制器中，您可以使用以下方法获取值：

```
TweetDesc *desc = [[[UIApplication sharedApplication] delegate] td];
NSLog(@"%@",desc.fullTweetTitle); 
```

# java - 如何从 FileOutputStream 对象中检索字符串值？

> ID：15759344
> 
> 赞同：2
> 
> 时间：2013-04-02T08:23:57.683
> 
> 标签：java, android

我面临着一种情况，我必须将 300 MB 的数据写入 XML。使用 Streams 我完美地执行了任务而没有遇到`OutOfMemory`异常。

现在我必须将`FileOutputStream`对象转换为实际数据并将其传递`String`给其他方法。

我已经尝试过，但没有得到预期的结果。请让我知道**如何将`FileOutputStream`对象转换为字符串值**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T16:16:02.850

如果您的**String 太大**并且您试图一次将其保存在内存中，它**总是**会导致您**OutOfMemoryError**与您使用的阅读器无关。

所以，问题不在于你的读者。问题是您的 String 对象（您要传递的对象）。

如果您需要将如此大的文件作为字符串变量存储/传递，那么您的架构肯定有问题。

您的错误是您试图将 XML 文本放入 Java String 变量中。您应该避免将大对象存储在内存中，这是这里的关键点。

通常文本是压缩比为 0.1 - 0.01 的对象。

尝试使用 ZipOutputStream/ZipInputStream（或一些类似的库）——它们可以很好地处理读取/写入文件的流。

在我的实践中，它可以完美地处理巨大的 XML 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:44:05.717

你是怎么写文件的？FileOutputStream 创建是可以的，但是当你使用 FileOutputStream 编写时，你必须向它传递一些东西。当您将数据传递给 时`FileOutputStream.write(some_data)`，为什么不同时在 a`StringBuffer`中写入相同的内容？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:44:14.483

您无法从`FileOutputStream`. 尝试`FileReader`从文件中读取数据。

您不能使用最初用于创建文件的数据吗？如果不是，您可以使用 XML Parser like `SAX`or`JDOM`来读取数据

# android - 后台模式下的 Android MediaPlayer

> ID：15759347
> 
> 赞同：1
> 
> 时间：2013-04-02T08:24:16.080
> 
> 标签：android, service, media-player

我有一个关于 android MediaPlayer 类的问题正如我所见，当用户切换到后台模式时，默认情况下 MediaPlayer 会继续运行。

但是我在这里看到的[媒体播放](http://developer.android.com/guide/topics/media/mediaplayer.html).. 他们说如果我们想让 MediaPlayer 在后台播放，我们必须使用服务。

如果服务已经在后台播放，我想知道为什么要使用服务

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T15:31:43.077

活动非常多变，如果 android 内存不足，它将开始使用 onDestroy() 杀死后台任务/活动。一旦调用该方法，您的 mediaPlayer 将被销毁并停止播放。然而，服务被赋予比后台活动更高的优先级，android 将尽可能避免破坏它们，可能永远不会。

# java - 键“P RIMARY”的休眠重复条目“7090”

> ID：15759348
> 
> 赞同：2
> 
> 时间：2013-04-02T08:24:18.493
> 
> 标签：java, mysql, hibernate

当应用程序尝试在数据库中插入记录行时出现以下错误。

```
SQL Error: 1062, SQLState: 23000
ERROR org.hibernate.util.JDBCExceptionReporter  - Duplicate entry '7089' for key      'PRIMARY'
ERROR org.hibernate.event.def.AbstractFlushingEventListener  - Could not synchronize   database state with session
Caused by: java.sql.BatchUpdateException: Duplicate entry '7090' for key 'PRIMARY'
    at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1269)
    at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:955)
    at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)
    at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:242) 
```

定义是

```
@Id
@Column(name = "CST_CUSTOMER_ID_PK")
@GenericGenerator(name = "generator", strategy = "increment")
@GeneratedValue(generator = "generator")
public Long getId() {
    return id;
}

public void setId(Long id) {
    this.id = id;
} 
```

发生错误的部分是：

```
savedCustomer = customerDao.save(customer);
            mtmrsLogger.debug("saved customer id:" + savedCustomer.getId());
            /**
             * Updating Customer Trans Table
             */
            updateCustomerTransForMakerChecker(customer,     customerform.getAuditDetails());

            /**
             * Updating Customer Audit
             */
            updateCustomerAuditForMakerChecker(customer, customerform.getAuditDetails());
            //status=1;
            //Add customer ewallet account
            updateCustomerInWalletBalance(customer, customerform.getAuditDetails());
            //send sms to customer
            smsManager.sendSMSToCUCustomer(customer.getMobileno(), userBean);
        }
        mtmrsLogger.exiting("CustomerManagerImpl", "addCustomer"); 
```

我的日志显示，程序已经到了 'Exiting Class: CustomerManagerImpl Method: addCustomer' 这部分。我保存了客户，我在其他两个表中设置了相同的条目。客户表的主键是其他两个表的外键。我迷路了请帮忙。

```
CREATE TABLE `CST_CUSTOMER_INFO` (
`CST_CUSTOMER_ID_PK` bigint(11) NOT NULL AUTO_INCREMENT,
`CST_MOBILE` varchar(30) DEFAULT NULL,
   `CST_FIRST_NAME` varchar(50) DEFAULT NULL,
`CST_LAST_NAME` varchar(150) NOT NULL,
`CST_MIDDLE_NAME` varchar(50) DEFAULT NULL,
PRIMARY KEY (`CST_CUSTOMER_ID_PK`)
) ENGINE=InnoDB AUTO_INCREMENT=4103 DEFAULT CHARSET=latin1 
```

我在生产中偶尔会出错，但在本地没问题..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:01:30.400

由于表格被多个应用程序修改，使用`@GenericGenerator(name = "generator", strategy = "increment")`将导致歧义。

**解释**

> 策略增量：它生成类型为 long、short 或 int 的标识符，这些标识符仅在没有其他进程将数据插入同一个表时才是唯一的。它不应该在集群环境中使用。

因此，您应该重新考虑使用什么策略来生成 id。使用`sequence`或`native`策略可以解决您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T08:44:15.780

代替

```
`CST_CUSTOMER_ID_PK` bigint(11) NOT NULL AUTO_INCREMENT, 
```

和

```
`CST_CUSTOMER_ID_PK` bigint(11) NOT NULL, 
```

您正在使用 hibernate/java 增加 id，不需要让 DBMS 也增加它。

# c# - ASP.Net MVC 3 中不同项目上的数据访问层和业务逻辑层

> ID：15759351
> 
> 赞同：2
> 
> 时间：2013-04-02T08:24:20.117
> 
> 标签：c#, asp.net, asp.net-mvc-3, entity-framework, repository-pattern

我目前正在使用 ASP.Net MVC 3 开发一个 Web 应用程序。

我的解决方案中有这个结构：

*   WebApp 项目（模型、视图、控制器）
*   服务层（接口、业务逻辑）
*   领域项目（存储库、接口、EF）
*   EF4POCO 项目 (POCO)

只是想知道这是否正确，我的数据访问层和业务逻辑层位于不同的项目中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:34:51.743

只要您的应用程序层是松散耦合的（例如通过使用接口/依赖注入/等），它们就可以在同一个项目中。

但是，是的，将它们拆分为单独的项目是常见的做法，并且从长远来看可能更易于维护和扩展。

# macros - 防止 if 表达式的错误分支中的宏扩展

> ID：15759353
> 
> 赞同：2
> 
> 时间：2013-04-02T08:24:25.453
> 
> 标签：macros, clojure, expansion

`if`在 Clojure 中，不匹配条件的表达式分支不会被计算，因此在计算以下表达式时不会引发异常：

```
=> (if nil (/ 1 0))
nil 
```

但是，宏在评估 之前仍会被扩展`if`，因此您仍然可以获得如下异常：

```
=> (if nil (proxy [nil] []))
CompilerException java.lang.NullPointerException, compiling:(NO_SOURCE_PATH:1) 
```

我正在编写一个宏，它的接口名称有时会作为 arg 提供，在这种情况下，宏将生成调用`proxy`. 其他时候，接口 arg 将是`nil`，然后宏扩展为类似的东西`(if nil (proxy [nil] [])`，所以我得到了上面的异常。SSCE 将是：

```
=> (defmacro make-listener [listener-name & methods]
     `(if ~listener-name
        (proxy [~listener-name] []
          ~@(map (fn [m] `(~m [e#])) methods))))
#'user/make-listener
=> (make-listener java.awt.event.ActionListener actionPerformed)
#<Object$ActionListener$46793e3a user.proxy$java.lang.Object$ActionListener$46793e3a@ed5b2>
=> (make-listener nil)
CompilerException java.lang.NullPointerException, compiling:(NO_SOURCE_PATH:1) 
```

当没有提供接口 arg 时，如何以不引发异常的方式编写宏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T08:56:51.323

如果 listener-name 为 nil，那么宏应该什么都不做，即您需要在宏扩展时检查 listener-name（不在宏发出的代码中）。

```
(defmacro make-listener [listener-name & methods]
  (if listener-name
     `(proxy [~listener-name] []
       ~@(map (fn [m] `(~m [e#])) methods)))) 
```

# c# - 使用 .NET SslStream 的 FTPS 服务器

> ID：15759355
> 
> 赞同：6
> 
> 时间：2013-04-02T08:24:33.653
> 
> 标签：c#, .net, ssl, ftps

我正在用 C# 开发一个 FTP 服务器，我刚刚使用`SslStream`类完成了 FTPS 显式模式功能的实现，一切正常。

我在使用 fileZilla > 3.0.11 作为客户端时遇到问题。我用谷歌搜索了一下，似乎`sslstream`实现没有正确关闭连接。（不发送`close_notify`警报）。使用 WinScp、SmartFTP 和 lftp 一切正常。

任何想法或任何其他 SSL 库？

或者也许某种方式来硬编码`close_notify`警报并发送它？

具体的代码示例会很棒！

创建 sslStream：

```
_sslStream = new SslStream(socket.GetStream());      
var _cert = new X509Certificate2(certPath,pass);    
_sslStream.AuthenticateAsServer(_cert); 
```

关闭连接：

```
_sslStream.Close();
socket.Close();
_sslStream = null;
socket = null; 
```

FileZilla 3.6.0.2 错误日志：

```
Response:   150 Opening data connection for LIST
Trace:  CFtpControlSocket::TransferParseResponse()
Trace:    code = 1
Trace:    state = 4
Trace:  CFtpControlSocket::SendNextCommand()
Trace:  CFtpControlSocket::TransferSend()
Trace:    state = 5
Trace:  CTlsSocket::OnRead()
Trace:  CTlsSocket::ContinueHandshake()
Trace:  TLS Handshake successful
Trace:  TLS Session resumed
Trace:  Cipher: AES-128-CBC, MAC: SHA1
Trace:  CTransferSocket::OnConnect
Trace:  CTransferSocket::OnReceive(), m_transferMode=0
Trace:  CTlsSocket::Failure(-110, 0)
Error:  GnuTLS error -110 in gnutls_record_recv: The TLS connection was non-properly terminated.
Error:  Could not read from transfer socket: ECONNABORTED - Connection aborted
Trace:  CTransferSocket::TransferEnd(3)
Trace:  CFtpControlSocket::TransferEnd()
Trace:  CTlsSocket::OnRead()
Trace:  CFtpControlSocket::OnReceive()
Response:   226 LIST successful. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T08:54:40.610

我认为，你有真正的理由重新发明轮子。已经有在 C#/.NET 中实现 FTPS 服务器的库，例如[SecureBlackbox](http://www.eldos.com/sbb/desc-ftps.php)（不过，它是商业的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-25T06:30:30.203

请查看我在[此处](https://stackoverflow.com/questions/237807/net-sslstream-doesnt-close-tsl-connection-properly/22626756#22626756)发布的解决方法。如果我们能一起使这个解决方法变得更好，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T00:16:06.333

怎么样

```
_sslStream.Dispose(); 
```

我想知道 Dispose 方法是否处理`close_notify`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T19:03:28.803

如果在关闭 Socket 之前调用 Shutdown 会发生什么？

```
socket.Shutdown(SocketShutdown.Both); 
```

# jasper-reports - 如何减少报表中的空白？

> ID：15759360
> 
> 赞同：-1
> 
> 时间：2013-04-02T08:24:43.200
> 
> 标签：jasper-reports

这是我的模板：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report_viwe_2" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isIgnorePagination="true" uuid="3cb87247-a775-45d7-b09b-4211897bff60">
    <queryString language="SQL">
        <![CDATA[SELECT * FROM team]]>
    </queryString>
    <field name="team_teamno" class="java.lang.String"/>
    <field name="team_teamlead" class="java.lang.String"/>
    <field name="team_teammem1" class="java.lang.String"/>
    <field name="team_teammem2" class="java.lang.String"/>
    <group name="team_teamlead">
        <groupExpression><![CDATA[$F{team_teamlead}]]></groupExpression>
    </group>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="61" splitType="Stretch"/>
    </columnHeader>
    <detail>
        <band height="125" splitType="Stretch">
            <textField>
                <reportElement uuid="bff92bff-1492-496c-b0e5-5e5e38f341e5" x="24" y="33" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{team_teamno}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="fa26359e-2fc7-4fdf-a972-9265832c77ac" x="162" y="33" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{team_teamlead}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="c425bb55-97cb-4949-8926-3159f109aaa8" x="284" y="33" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{team_teammem1}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="9dda41b1-e0f1-403d-ae59-ee7fe15889a3" x="414" y="33" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{team_teammem2}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="d6efe743-2133-45da-82ba-f8eb56e82c9e" x="39" y="4" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{team_teamno}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="d1b79bae-55ae-47e3-9b16-403af876b6d0" x="185" y="9" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{team_teamlead}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="a653ec3b-4ce4-4871-b784-a7fa9878293a" x="297" y="4" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{team_teammem1}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="c4bb9aa3-3dc2-4db0-a13b-31d43b1972d3" x="447" y="12" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{team_teammem2}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

我只是想使用 php 在网页上打印 JasperReports 的报告。

问题是在网页上打印时，第一页是空白的，在下一页它会显示数据。我正在降低乐队的高度。但是还有一个额外的页面出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:43:28.770

摆脱你的空乐队。您有`title`,`pageHeader`和`columnHeader`带已声明高度但未使用。这些波段将出现在您的详细波段之前。完全删除它们或至少将它们的高度设置为零。

您还有`background`、和空的带区`columnFooter`，也可以删除。`pageFooter``summary`

# facebook - 页面上的新评论系统以奇怪的顺序显示？

> ID：15759361
> 
> 赞同：0
> 
> 时间：2013-04-02T08:24:44.713
> 
> 标签：facebook, facebook-comments

有没有机会在 Facebook 页面上获得评论顺序的一些“设置”？我们激活了新的“回答模式”或类似的东西，所以人们可以回复任何评论。

但是，奇怪的是，当有人新添加评论时，它会在讨论之间的某个地方添加它。设置在哪里 - 我们什么时候可以按日期对父评论进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:16:55.237

评论的顺序没有设置。它们都基于交互性分数。因此，交互性越高，评论中的排序就越早。

你可以在这里找到更多信息：http: [//allfacebook.com/replies-ranked-comments_b113737](http://allfacebook.com/replies-ranked-comments_b113737)

# c++ - 带有 Visual Studio 2012 的静态 libzip

> ID：15759373
> 
> 赞同：6
> 
> 时间：2013-04-02T08:25:45.867
> 
> 标签：c++, windows, visual-studio-2012, zip

我正在尝试使用 libzip 库构建一个小应用程序。我在本文的帮助下下载并编译了 libzip：

[带有 Visual Studio 2010 的 libzip](https://stackoverflow.com/questions/10507893/libzip-with-visual-studio-2010)

问题是它动态编译库，需要 zlib.dll 和 zip.dll 都存在。我想完全静态地编译应用程序，因此不需要额外的 dll。有人知道我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T06:08:20.117

好的......这是交易：

您需要转到文件***lib\CMakeLists.txt***并在末尾添加（黑色线）

ADD_LIBRARY(zip 共享 ${LIBZIP_SOURCES} ${LIBZIP_EXTRA_FILES})

**ADD_LIBRARY(zipstatic 静态 ${LIBZIP_SOURCES} ${LIBZIP_EXTRA_FILES})**

SET_TARGET_PROPERTIES(zip PROPERTIES VERSION 3.0 SOVERSION 3) TARGET_LINK_LIBRARIES(zip ${ZLIB_LIBRARY})

安装（目标 zip 存档目标库库目标库）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-29T14:17:44.940

> 好的......这是交易：
> 
> 您需要转到文件 lib\CMakeLists.txt 并在末尾添加（黑色线条） 您需要转到文件 lib\CMakeLists.txt 并在末尾添加（黑色线条）
> 
> ...

libzip v1.5.1 的正确字符串是：

```
ADD_LIBRARY(zipstatic STATIC ${LIBZIP_SOURCES} ${LIBZIP_EXTRA_FILES} ${LIBZIP_OPTIONAL_FILES} ${LIBZIP_OPSYS_FILES}) 
```

# symfony - symfony 2，分页

> ID：15759375
> 
> 赞同：0
> 
> 时间：2013-04-02T08:25:50.850
> 
> 标签：symfony

我刚刚开始使用 Symfony2，但我在分页方面遇到了一些问题。

我的`Account`课上有这段代码：

```
public function indexAction($page)
{
    $session = $this->get('session');

    if ($session->get('valid')=='true') {
        $em = $this->getDoctrine()->getManager();

        $entities = $em->getRepository('ProjectCRMBundle:Account')->findAll();

        $user = new Account();
        $form = $this->container->get('form.factory')->create(new AccountType());
        $total = $this->getDoctrine()->getRepository('ProjectCRMBundle:Account')->createQueryBuilder('p')->getQuery()->getResult();

        /* total of résultat */
        $total_users    = count($total);
        $users_per_page = 1;
        $last_page      = ceil($total_users / $users_per_page);
        $previous_page  = $page > 1 ? $page - 1 : 1; 
        $next_page      = $page < $last_page ? $page + 1 : $last_page;

        /* résultat  à afficher*/
        $entities          = $this->getDoctrine()->getRepository('ProjectCRMBundle:Account')->createQueryBuilder('p')->setFirstResult(($page * $users_per_page) - $users_per_page)->setMaxResults(1)->getQuery()->getResult();

        return $this->render('ProjectCRMBundle:Account:index.html.twig', array(
            'entities'      => $entities,
            'last_page'     => $last_page,
            'previous_page' => $previous_page,
            'current_page'  => $page,
            'next_page'     => $next_page,
            'total_users'   => $total_users,
            'form'          => $form->createView(),
            'user'          => $user,
        ));

        return $this->render('ProjectCRMBundle:Account:index.html.twig');
    } else {
        return $this->redirect($this->generateUrl('user_login'));
    }
}

/**
 * Creates a new Account entity.
 *
 */
public function createAction(Request $request)
{
    $entity = new Account();
    $form = $this->createForm(new AccountType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();
        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('account_show', array('id' => $entity->getId())));
    }

    return $this->render('ProjectCRMBundle:Account:new.html.twig', array(
        'entity' => $entity,
        'form'   => $form->createView(),
    )); 
} 
```

不忘前路`account.yml`

```
account:
    pattern:  /{page}
    defaults: { _controller: "ProjectCRMBundle:Account:index" , page: 1 } 
```

乍一看，它似乎可以工作，但是在尝试添加一个新帐户后，我收到了以下消息：

> LIMIT 参数 offset=-1 无效

谁能解决我的问题？

# visual-studio-2010 - Visual Studio 中的 SharePoint 开发，无需在每次代码更改时进行部署/调试

> ID：15759380
> 
> 赞同：3
> 
> 时间：2013-04-02T08:26:18.597
> 
> 标签：visual-studio-2010, visual-studio, sharepoint, sharepoint-2010

我正在使用连接到本地 SP2010 安装的 VS2010，我在 VS2010（即 WebPart）中编辑代码，然后为了在浏览器上查看结果，我部署了解决方案。

这很烦人，因为它是一个大项目，部署解决方案需要几分钟时间。

我想知道是否可以使用“编辑-> 保存-> F5”方法，即使对于 SharePoint。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T13:55:22.523

我将在这里整合我从善良的人们那里得到的答案以及我为解决/缓解我的缓慢问题所做的实际工作：

*   从这里安装 CKSDev Visual Studio 插件：http: [//cksdev.codeplex.com/](http://cksdev.codeplex.com/)
*   在设置为“True”的 SharePoint 项目属性选项卡上，属性“自动复制到 SharePoint 根目录”，每次保存“视觉”（ascx、aspx、js、css、..）源文件时，它都会自动复制到 SP 配置单元上，而无需使用 Quick Depl 手动推送它。选项 ![项目属性](https://i.stack.imgur.com/WecOf.png)
*   在 SharePoint 项目属性页面（右键单击、属性）上，添加以下构建后事件命令行：

> "C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin\gacutil.exe" /i "$(TargetPath)"
> 
> iis重置

前面的命令将：

1.  将项目 dll 安装到 GAC
2.  重新启动 IIS 以捕获新的 dll

现在，每次您保存视觉更改或构建代码时，它都会自动推送到 SP 安装。

对于较新的源文件，我仍然需要正常部署项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:25:09.497

您可以通过将修改后的文件复制到 SharePoint Hive[14] 内的相应文件夹中来做到这一点（或者您可以直接在那里编辑它），并回收应用程序池。

请注意，此解决方案仅适用于 Web 部件、页面和 xml 文件，不适用于代码文件。

如果您修改了代码文件，则必须重新编译它们并将 dll 复制到 GAC[%systemroot%\assembly] 或 BIN[14\bin] 文件夹，具体取决于您的设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:38:25.200

[从此处](http://cksdev.codeplex.com)下载 CKS：开发工具版（又名 CKSDev）并安装到 VS 2010。您将在解决方案管理器中看到新的上下文菜单“快速部署”，这将加快请求的任务：部署到 GAC/BIN、回收应用程序池等（快捷方式可访问！）。非常方便的工具。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T20:20:02.113

使用 CKSDev，并将您的解决方案分成更小的解决方案，以便您可以处理项目的子集，如果您的 webpart 依赖于主解决方案中的每个项目，我会感到非常惊讶。如果您在没有 Internet 访问权限的虚拟机上进行开发，请确保您每次回收应用程序池时都不会等待认证检查超时（部署时发生）。阅读此处了解如何：http: [//joelblogs.co.uk/2011/09/20/certificate-revocation-list-check-and-sharepoint-2010-without-an-internet-connection/](http://joelblogs.co.uk/2011/09/20/certificate-revocation-list-check-and-sharepoint-2010-without-an-internet-connection/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T09:31:00.863

我将在调试代码期间执行以下步骤。

1）如果您只更改代码程序集而不是在更改代码后构建您的项目。

2) 打开`Assembly`文件夹（运行 > 程序集）并拖放您的项目的 dll（将从您的项目目录\bin\Debug 中找到它）。

3）打开`IIS`（运行> inetmgr）并转到`Application Pools`并找到您的sharepoint we-app's Pool。选择应用程序池`(Recycle)`后。

4) 现在回到`VS SharePoint Project`.Debug > Attach to Process > [w3wp.exe](http://adotnetdude.blogspot.in/2010/05/visual-studio-2010-debugger-not.html#comment-form)。

应该达到你的断点。

就是这样。

# directshow - directshow：样本“弹跳球”的帧率

> ID：15759382
> 
> 赞同：0
> 
> 时间：2013-04-02T08:26:40.100
> 
> 标签：directshow

Bouncing Ball 是 windows sdk 中的示例之一，它源自 CSourceStream。我使用 GraphEdit 并构建这个简单的图表：

弹跳球 -> 色彩空间转换器 -> 视频混合渲染器 9

当图形运行时，我在 Video Mixing Renderer 9 的属性页面中看到 fps 约为 50，这是预期的，但是，如果我取消选择“使用时钟”选项，则 fps 为 60。根据文档，图形运行速度为不使用参考时钟时可能，所以我认为 fps 应该超过 60。如何更改不使用参考时钟时 fps 将超过 60 的示例代码？

# c# - fluent nhibernate 是否需要映射关系的双方？

> ID：15759390
> 
> 赞同：0
> 
> 时间：2013-04-02T08:27:02.343
> 
> 标签：c#, fluent-nhibernate

关系的双方都需要映射吗？

以下面的类示例为例，父母可以有很多孩子，但父母不需要任何关于孩子的知识

```
public class Parent{
    public string ParentName { get; set; }
}

public class Child {
    public string ChildName { get; set; }
    public Parent Parent { get; set; }
} 
```

随着孩子的流畅映射：

```
Map(x => x.ChildName).Not.Nullable();
References(x => x.Parent, "Parent_id") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:25:10.513

您的映射足以拥有从子级到父级的外键。在您的类模型中，父级不必知道它的子级。如果您想从父级获得更多控制（即一次性删除所有子级的父级），请将子级映射为具有级联的反向集合。

# css - 工具提示弹出框区域内的手风琴不会出现

> ID：15759397
> 
> 赞同：0
> 
> 时间：2013-04-02T08:27:28.733
> 
> 标签：css, popup, accordion, tooltip

在我的 html 页面中，我有一个工具提示内容（仅由 css 元素构建，没有 javascript）。我打算在工具提示内容中插入一个可在单击时向上滚动的手风琴内容（也仅由 css 构建）。

这是我的 CSS 和 HTML 代码示例：

```
<html>
    <head>
        <!-- SOURCE accordion CSS   jsfiddle.net/m_raffaele/E4acF/  -->
        <!-- SOURCE tooltip CSS    http://inserthtml.com/demo/pop-in-dialogue/   -->
        <style>            
            .id-content {
                width: 608px; height: 854px;
                margin:0 auto;
                background:yellow;
            }

            /* TOOLTIP Bawah */
            .container-2b {
                width:608px; height:854px;
                position: relative;
                float:right;
                z-index:15;
                margin: 0 auto;
            }

            .container-2b input {
                display: none;
            }

            .container-2b input:checked + .popbox-2b {
                opacity: 0.9; 
                -webkit-transform: scale(1);
                -moz-transform: scale(1);
                -ms-transform: scale(1);
                font-variant: normal;
                padding:10px 5px 5px 5px;
            }

            /* ICON  klik   url(../../images/idsirtii/b4tap.jpg); background-size:99px 130px;*/
            .container-2b label {
                width:99px; height:130px;
                position: relative;
                float:right; margin-top:-182px;
                background-color:green;
            }

            .container-2b label:checked + {
                width:99px; height:130px;
                position: relative;
                float:right; 
                background-color:red; 
            }

            /*buat kotak tooltip POP UP yg muncul*/
            .popbox-2b {
                width:598px; height: 830px; background: grey;

                border: 1px solid transparent; opacity: 0;
                position: relative;
                margin-top:-182px;
                z-index: 10;
                color:white;
                font-size:12px; font-family: "scada-regular"; color:white;
                text-align:center; line-height:1.5em;

                box-shadow-opacity;0.5;
                /*gradien warna
                box-shadow: inset 0px 40px 60px -30px rgba(200,200,255,1), 0px 0px 20px rgba(0,0,0,0.1); 
                /* border-radius: 7px; efek ujung tumpul */
                -moz-perspective: 1000;
                -ms-perspective: 1000;
                -webkit-perspective: 1000;

                -webkit-transform-style: preserve-3d;
                -moz-transform-style: preserve-3d;
                -ms-transform-style: preserve-3d;

                -webkit-transform: scale(0.1);
                -moz-transform: scale(0.1);
                -ms-transform: scale(0.1);

                -webkit-transition: all fade;
                -moz-transition: all fade;
                -ms-transition: all fade;
            }

            /*****************************************
            ACCORDION TAB
            ******************************************/
            /*
            *
            *    Author:    Michael Raffaele <michael@mraffaele.com>
            *    Date:    25th October 2011
            *    Info:     http://www.mraffaele.com/blog/2011/10/25/css-accordion-no-javascript/
            *
            */

            /* Shared for all accordion types margin-top:-500px;    */
            .accordion {
                width:550px;
                font-family:"strait"; font-size:14px;
                margin:0 auto;
                background:#fcf;
                position:absolute;
                bottom: 0px;
            }
            .accordion ul {
                list-style:none;
                margin:0;
                padding:0;    
            }
            .accordion li {
                margin:0;
                padding:0;
            }
            .accordion [type=radio], .accordion [type=checkbox] {
                display:none;
            }
            .accordion label {
                position:relative; bottom:0;
                background:blue; display:block;
                cursor:pointer;
                font-size:16px; color:white; line-height:16px;
                -webkit-transition: all .1s ease-out;
                -moz-transition: all .1s ease-out;
                text-transform:uppercase;
            }
            .accordion ul li label:hover, .accordion [type=radio]:checked ~ label, .accordion [type=checkbox]:checked ~ label {
                background:red;
                color:#FFF;
            }
            .accordion .content-acc {
                padding:0 10px;
                overflow:hidden;
                border:1px solid #fff; /* Make the border match the background so it fades in nicely */
                -webkit-transition: all .5s ease-out;
                -moz-transition: all .5s ease-out;

            }
            .accordion p {
                color:red;
                margin:0 0 10px;
            }
            .accordion h3 {
                color:blue;
                padding:0;
                margin:10px 0;
            }

            /* Vertical */
            .vertical ul li {
                overflow:hidden;
                margin:0 0 1px;
            }
            .vertical ul li label {
                padding:10px;
            }
            .vertical [type=radio]:checked ~ label, .vertical [type=checkbox]:checked ~ label {
                border-bottom:0;
            }
            .vertical ul li label:hover {
                 /* border:1px solid #542437; We don't want the border to disappear on hover */
            }
            .vertical ul li .content-acc {
                height:0px;
                border-top:0;
            }
            .vertical [type=radio]:checked ~ label ~ .content-acc, .vertical [type=checkbox]:checked ~ label ~ .content-acc {
                height:300px;
                /*border:1px solid #542437; */
            }
        </style>
    </head> 
    <body>
        <div class="id-content">  

        <!--TOOLTIP-->
        <div class="container-2b">
            <label for="activate-2b" class="container-2b"></label>
            <input type="checkbox" name="activate-2b" id="activate-2b" />

            <div class="popbox-2b"></div>
        </div>
        <!--div TOOLTIP-->

        <!--ACCORDION-->
        <div class="accordion vertical">
            <ul>
                <li>
                    <input type="checkbox" id="checkbox-1" name="checkbox-accordion" />
                    <label for="checkbox-1">This is an example accordion item</label>

                    <div class="content-acc">
                        <br/ >
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse nec posuere lorem. Pellentesque hendrerit, lorem
                            luctus porttitor vestibulum, eros sapien mattis libero, euismod congue
                            neque nisi at ipsum. Mauris semper ipsum sit amet metus semper
                            malesuada. Donec vel est justo, ac porta diam.</p>
                    </div>
                </li>
            </ul>
        </div>
    </body>
</html> 
```

但是，当我将“手风琴垂直”div 放在工具提示“pop-box2b”内时，手风琴似乎无处不在，而不是在工具提示“pop-box2b”区域内，我找不到它的位置。

这两个内容（工具提示和手风琴）都使用复选框。

可能是因为我在同一页面中使用了 2 个复选框吗？

如果我错误地放置/修改了手风琴内容，有人可以帮我找出代码中是否有问题吗？

如果我把它放在工具提示弹出框区域内，为什么手风琴不会出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:25:54.913

无法清楚地理解您的问题 - 不确定这是否是您想要的。但看看，让我知道...

```
<http://jsfiddle.net/Diezel23/L8g6z/1/> 
```

# php - 从 ajax 获取的 json 创建 html

> ID：15759402
> 
> 赞同：1
> 
> 时间：2013-04-02T08:27:47.117
> 
> 标签：php, jquery, ajax, json, symfony

**我想做的事：**

我有一个基于 symfony2 (php) 的应用程序。一个简单的操作以 json 格式返回数据，如下所示

```
 $headers = array(
        'Content-Type' => 'application/json'
    );

    return new Response($data, 200, $headers); 
```

像这样从 javascript 调用此操作

```
function loadData(action){
    $.ajax({
        type: "POST",
        url: action,
        success: function(data){
            console.log(data);
        },
        error: function(XMLHttpRequest, textStatus, errorThrown) {
            alert(errorThrown);
        }
    });
} 
```

所以到目前为止，这似乎非常基本。从控制台我可以看到返回的正确数据。这些数据应该放在项目网站的某个地方。

**问题：**

是否有任何直接的方法可以在 javascript 中从 json 创建 html？实际上我想从项目的逻辑中分离模板（树枝）。那么在 loadData 方法的成功回调中生成 html 是否正确？

我可以通过返回 html 而不是 json 来绕过这个问题。但我考虑为我的项目构建某种休息 api，我认为需要 json 进行传输。

有什么建议或想法吗？请分享您的处理方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:43:28.243

您可以使用[角度 js](http://angularjs.org/)。**symfony**有一件好事：

```
angular.module('myApp', []).config(function($interpolateProvider){
        $interpolateProvider.startSymbol('[[').endSymbol(']]');
    };
); 
```

它会随着 TWIG 的变化`{{`而**改变**`[[`并让您使用模板。

 **[这](https://stackoverflow.com/a/13031318/739897)将有助于 Angular js 中的**json 查询**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:38:35.237

获取数据并将其发送回服务器？我认为它不正确。

尝试查看[underscore.js](http://underscorejs.org/) ( _.template() ) 以在客户端使用接收到的 json 对象进行模板化。

并尝试像这样使用 TWIG：

```
_.templateSettings = {
  interpolate : /\[\[(.+?)\]\]/g
};

var template = _.template("Hello [[ name ]]!");
template({name : "Mustache"});
=> "Hello Mustache!" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:29:40.697

看看[把手](http://handlebarsjs.com/)。

您基本上可以将 JSON 传递给 Handlebars 模板：

**模板：**

```
<script id="entry-template" type="text/x-handlebars-template">
    <div class="entry">
        <h1>{{title}}</h1>
        <div class="body">
            {{body}}
        </div>
    </div>
</script> 
```

**JS：**

```
var source   = $("#entry-template").html(),
    template = Handlebars.compile(source),
    context = {title: "My New Post", body: "This is my first post!"},
    html    = template(context); 
```

**结果：**

```
<div class="entry">
    <h1>My New Post</h1>
    <div class="body">
        This is my first post!
    </div>
</div> 
```**

# android - Android：如何将选定的微调器项设为 TextView？

> ID：15759403
> 
> 赞同：0
> 
> 时间：2013-04-02T08:27:55.547
> 
> 标签：android, onclick, textview, spinner, selected

我试图从微调器中获取选定的项目，以便在选择后直接显示。想象一下，如果这就像一个问答游戏。如果您选择了其中一个错误，则会出现一个 TOAST（我无法正常工作）。如果我选择了正确的，则会出现一个不同的 TOAST，我会将它链接到一个新活动。如何让 onselect 输出或将其选择显示到 textview 以及如何为正确/错误答案实现 if 语句？

```
package com.example.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

public class MainActivity extends Activity implements OnItemSelectedListener{

String[] test_array;
TextView display, selected;
String result;
Spinner spinner;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Spinner spinner = (Spinner) findViewById(R.id.spinner);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.test_array, android.R.layout.simple_spinner_item);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
}

@Override
public void onItemSelected(final AdapterView<?> parent, View view, final int pos,
        long id) {
    // TODO Auto-generated method stub
    result = (String) spinner.getSelectedItem();
    display = (TextView) findViewById (R.id.display);
    display.setText(result);
}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

}
} 
```

我根据 SDK 中的 GOOGLE 示例进行了修改。这是修改后的代码。

```
package com.example.test;

import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.TextView;

public class MainActivity extends Activity{

String[] test_array;
TextView display, selected;
String result, sSelect;
Spinner spinner;
int mPos;
String mSelection;
ArrayAdapter<CharSequence> mAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Spinner spinner = (Spinner) findViewById(R.id.spinner);
    this.mAdapter = ArrayAdapter.createFromResource(this, R.array.test_array, android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(this.mAdapter);
    OnItemSelectedListener listener = new myOnItemSelectedListener();
    spinner.setOnItemSelectedListener(listener);
}

public class myOnItemSelectedListener implements OnItemSelectedListener {

    @Override
    public void onItemSelected(AdapterView<?> parent, View v, int pos,
            long id) {
        // TODO Auto-generated method stub
        MainActivity.this.mPos = pos;
        MainActivity.this.mSelection = parent.getItemAtPosition(pos).toString();
        TextView resultText = (TextView) findViewById(R.id.display);
        resultText.setText(MainActivity.this.mSelection);
    }

    @Override
    public void onNothingSelected(AdapterView<?> parent) {
        // TODO Auto-generated method stub

    }

}
} 
```

textview 现在更改为所选项目，现在*我将尝试 if/else。* if/else 语句会导致崩溃。

```
04-03 01:38:17.648: E/AndroidRuntime(817): FATAL EXCEPTION: main
04-03 01:38:17.648: E/AndroidRuntime(817): java.lang.NullPointerException
04-03 01:38:17.648: E/AndroidRuntime(817):  at com.example.test.MainActivity$myOnItemSelectedListener.onItemSelected(MainActivity.java:43)
04-03 01:38:17.648: E/AndroidRuntime(817):  at android.widget.AdapterView.fireOnSelected(AdapterView.java:892)
04-03 01:38:17.648: E/AndroidRuntime(817):  at android.widget.AdapterView.access$200(AdapterView.java:49)
04-03 01:38:17.648: E/AndroidRuntime(817):  at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:860)
04-03 01:38:17.648: E/AndroidRuntime(817):  at android.os.Handler.handleCallback(Handler.java:615)
04-03 01:38:17.648: E/AndroidRuntime(817):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-03 01:38:17.648: E/AndroidRuntime(817):  at android.os.Looper.loop(Looper.java:137)
04-03 01:38:17.648: E/AndroidRuntime(817):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-03 01:38:17.648: E/AndroidRuntime(817):  at java.lang.reflect.Method.invokeNative(Native Method)
04-03 01:38:17.648: E/AndroidRuntime(817):  at java.lang.reflect.Method.invoke(Method.java:511)
04-03 01:38:17.648: E/AndroidRuntime(817):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-03 01:38:17.648: E/AndroidRuntime(817):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-03 01:38:17.648: E/AndroidRuntime(817):  at dalvik.system.NativeStart.main(Native Method)
04-03 01:39:04.718: E/Trace(865): error opening trace file: No such file or directory (2)
04-03 01:39:06.028: D/gralloc_goldfish(865): Emulator without GPU emulation detected. 
```

实现代码

```
public class myOnItemSelectedListener implements OnItemSelectedListener {

@Override
public void onItemSelected(AdapterView<?> parent, View v, int pos,
        long id) {
    // TODO Auto-generated method stub
    MainActivity.this.mPos = pos;
    MainActivity.this.mSelection = parent.getItemAtPosition(pos).toString();
    TextView resultText = (TextView) findViewById(R.id.display);
    resultText.setText(MainActivity.this.mSelection);
    if(result.equalsIgnoreCase("abc")){
    // Toast in here
     }else{
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:31:59.557

试试这个

```
@Override
    public void onItemSelected(AdapterView<?>; parent, View view, int position, long id) {
        // On selecting a spinner item
        String item = parent.getItemAtPosition(position).toString();

        // Showing selected spinner item
        Toast.makeText(parent.getContext(), "Selected: " + item, Toast.LENGTH_LONG).show();

    } 
```

试试这个`if-else`声明

```
spinner = (Spinner) findViewById(R.id.test);

        spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {

                String item = "nothing";
                 // On selecting a spinner item
                if(parent.getItemAtPosition(position).toString().equalsIgnoreCase("novels"))
                    item = parent.getItemAtPosition(position).toString();
                else{
                    //do other things
                }

                // showing a toast on selecting an item 
                Toast.makeText(parent.getContext(), item, Toast.LENGTH_LONG).show();
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:39:11.687

根据你的解释：

```
@Override
public void onItemSelected(final AdapterView<?> parent, View view, final int pos,
        long id) {
    // TODO Auto-generated method stub
    result = spinner.getSelectedItem().toString();
    display = (TextView) findViewById (R.id.display);
    display.setText(result);
    if(result.equalsIgnoreCase("abc")){
        // for correct ans... open new activity using intent
    }else{
       // for wrong ans...
    }
} 
```

# java - 外部化 Spring 库 Web 应用程序

> ID：15759404
> 
> 赞同：0
> 
> 时间：2013-04-02T08:27:59.493
> 
> 标签：java, spring, websphere, tomcat7, static-libraries

大家早上好，

我想知道是否可以外部化 Spring 库。我们有很多应用程序/Webservices，它们都使用相同的 Spring - libs，现在我们被迫将我们的应用程序部署在 Websphere (8.5.0.1) 服务器上。由于 Websphere 和 Classloading 与我之前所知道的一切都有些不同......

出色地 ...

思路如下：

创建一个包含所有 Springlibraries 的 mavenproject 并将此 jar 文件添加到服务器。我们想继续在 tomcat 服务器上进行开发，并在 websphere 上进行部署，而无需太多麻烦......

但是，如果我将所有 springlibs 移动到外部文件，似乎无法正确加载应用程序（Classloader 问题？）。因此，如果你们中的任何人可以给我一个提示或一个好的建议，我将非常感激。当然，如果我错过了一个事实，为什么不可能呢？

编辑：这就是我的 pom.xml 的实际外观（当然是一部分），我真的，真的不喜欢它......

```
<plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <configuration>
                    <packagingExcludes>WEB-INF/lib/hibernate*.jar,
                        WEB-INF/lib/*spring*.jar,
                        WEB-INF/lib/xml-apis*.jar,
                        WEB-INF/lib/xpp3_min*.jar,
                        WEB-INF/lib/xstream*.jar,
                        WEB-INF/lib/antlr*.jar,
                        WEB-INF/lib/webservices-api*.jar,
                        WEB-INF/lib/commons-collections*.jar,
                        WEB-INF/lib/dom4j*.jar,
                        WEB-INF/lib/javassist*.jar,
                        WEB-INF/lib/jboss-logging*.jar,
                        WEB-INF/lib/jboss-transaction-api*.jar,
                        WEB-INF/lib/primefaces*.jar,
                        WEB-INF/lib/redmond*.jar,
                        WEB-INF/lib/sunny*.jar,
                        WEB-INF/lib/akka*.jar,
                        WEB-INF/lib/scala*.jar,
                        WEB-INF/lib/scala*.jar,
                        WEB-INF/lib/jsf-impl*.jar,
                        WEB-INF/lib/jsf-api*.jar,
                        WEB-INF/lib/config-0.3.1.jar,
                        WEB-INF/lib/commons-collections*.jar,
                        WEB-INF/lib/commons-lang*.jar,
                        WEB-INF/lib/cglib-nodep*.jar,
                        WEB-INF/lib/slf4j-api*.jar,
                        WEB-INF/lib/quartz*.jar,
                        WEB-INF/lib/c3p0*.jar,
                        WEB-INF/lib/ojdbc6*.jar,
                        WEB-INF/lib/mysql-connector-java*.jar,
                        WEB-INF/lib/aopalliance-1.0.jar,
                        WEB-INF/lib/aspectjrt-1.6.8.jar,
                        WEB-INF/lib/cdi-api-1.0.jar,
                        WEB-INF/lib/commons-cli-1.2.jar,
                        WEB-INF/lib/commons-io-2.3.jar,
                        WEB-INF/lib/commons-logging-1.1.1.jar,
                        WEB-INF/lib/freemarker-2.3.9.jar,
                        WEB-INF/lib/javax.inject-1.jar,
                        WEB-INF/lib/jboss-interceptor-api-1.1.jar,
                        WEB-INF/lib/jcl-over-slf4j-1.6.1.jar,
                        WEB-INF/lib/jettison-1.0.jar,
                        WEB-INF/lib/jsr250-api-1.0.jar,
                        WEB-INF/lib/validation-api-1.0.0.GA.jar
                    </packagingExcludes>
                </configuration>
            </plugin> 
```

但如果我这样做，将此库添加为外部，我的应用程序可以工作（但**只是**在 Websphere 上，这绝对不是我的意图）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:59:10.237

尝试按照@Dhanush Gopinath 的建议将弹簧库保留在 WEB-INF/lib 文件夹中，然后将类加载器最后更改为父级。

要更改类加载器，请在域管理器控制台中转到。

服务器 > WebSphere 应用程序服务器 > $Server 名称 > 服务器特定应用程序设置

将 ClassLoader 策略更改为“Single”，将类加载模式更改为“parent last”。检查这是否有帮助。

![在此处输入图像描述](https://i.stack.imgur.com/2HaYV.png)

# itext - 阅读和编写 PDF 的 TOC

> ID：15759406
> 
> 赞同：1
> 
> 时间：2013-04-02T08:28:08.793
> 
> 标签：itext, tableofcontents

我的要求是在由其他进程生成的 PDF 前面加上一个“封面”。

我编写了一个相对简单的 Ant 任务来连接 PDF 文档列表，并且效果很好，但是在此过程中没有保留 TOC。TOC 我的意思是..

![显示两种样式的目录的图像](https://i.stack.imgur.com/ghiyT.png)

理想情况下，两个 TOC 都将被保留，并针对它们的新偏移量进行调整，但我看不到在 iText API 中读取或写入 TOC（左侧）的方法。任何人都可以吗？

M。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T15:46:52.007

我是[关于 iText 的书](http://itextpdf.com/book)的作者，在本书的上下文中，我编写了一个示例来解释如何在保留书签（又名大纲树）的同时连接 PDF。[您可以在此处](http://itextpdf.com/examples/iia.php?id=141)找到此示例。如您所见，您需要该`SimpleBookmark`对象从现有文档中提取书签。确保您移动页码，否则您的链接将指向错误的页面。最后使用该方法将新对象添加`ArrayList<HashMap<String, Object>>`到对象中。`PdfCopy``setOutlines()`

再一次，我们发现了阅读文档可以节省时间的证据；-)

# php - 如何修复智能手机中的证书错误

> ID：15759407
> 
> 赞同：-3
> 
> 时间：2013-04-02T08:28:12.887
> 
> 标签：php, ssl-certificate, smartphone, digital-certificate, mobile-website

我已经使用 php 和 smarty 开发了移动网站。对于实时站点，在智能手机中，所有 https 页面都显示证书错误，例如“安全警告。此站点的安全证书存在问题。站点名称与证书上的名称不匹配”。如何摆脱这个问题。请任何人帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:31:54.650

您可以从 Verisign、Thawte、Geotrust、Comodo、GoDaddy、GlobalSign 等证书颁发机构 (CA) 为您的站点购买证书。这将解决您的问题。

# ruby-on-rails - 究竟什么是“工人”？

> ID：15759416
> 
> 赞同：1
> 
> 时间：2013-04-02T08:28:54.963
> 
> 标签：ruby-on-rails, nginx, resque, unicorn, worker

我感到失落。

**Nginx**有它自己的“ *Worker* ”进程，

**独角兽**有自己的“*工人*”设置，

**Resque**有它自己的“*工人*”。

Unicorn 的设置应该和 Nginx 的或 Resque 的有关吧？

我真的在寻找线索，但没有得到任何线索。

所有这些“*工人*”都一样吗？

如果不是，您能简要说明它们是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:13:37.637

Nginx - Nginx 是获取传入请求并根据请求为独角兽提供服务的 Web 服务器。Unicorn - 每个独角兽工作者加载一个单独的 Rails 环境（工作者）。
Resque - 每个 Resque 工作者加载一个单独的 Rails 环境（工作者）。

Unicorn 和 Resque 的目的不同。
**Unicorn 为 Web 请求提供服务。**
**Resque 从 Redis 获取后台作业并对其进行处理**

# mongodb - MongoDB 是否适合某些用例？

> ID：15759420
> 
> 赞同：3
> 
> 时间：2013-04-02T08:28:57.963
> 
> 标签：mongodb, nosql

我正在考虑将 MongoDB 用于 Web 应用程序，但我已经读到在某些情况下不推荐使用它。我想知道我的项目会是其中一种情况。

这是我系统中实体的简要概述-

*   有具有标准用户详细信息属性的用户
*   每个用户可以有多个收据，一个收据只能有一个用户
*   收据包含许多产品
*   产品具有标准的产品详细信息属性
*   用户可以有多个好友，每个好友本身就是一个用户
*   用户可以对产品进行评论
*   会有一个声誉系统，就像 stackoverflow 上的那样，用户可以在其中获得积分和徽章

如您所见，有许多实体之间存在各种关系。数据完整性很重要。这种模式适合 MongoDB 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T13:32:29.920

您的数据似乎是非常相关的，而不是面向文档的。

您还指出数据完整性是一项重要要求（我假设您的意思是不同实体之间的参照完整性）。当实体没有存储在同一个文档中时，在 MongoDB 中很难保证它们之间的完整性。此外，MongoDB 不能强制执行任何约束（字段值的唯一性除外）。

总体而言，您似乎也有一种非常相关的思维模式，这将使您难以使用 MongoDB 的用途。

出于这些原因，我建议您坚持使用关系数据库。

您首先考虑使用 MongoDB 的原因可能是因为您听说它速度快且可扩展性好。是的，它速度很快，并且可以很好地扩展，但这只是因为**它不强制引用完整性**并且因为**它不执行表连接**。当您需要这些功能并因此不得不寻找丑陋的变通方法来模拟它们时，MongoDB 将不再那么快。

# java - 如何连续提取多个术语的谷歌点击数？

> ID：15759422
> 
> 赞同：0
> 
> 时间：2013-04-02T08:29:05.320
> 
> 标签：java, httpclient

我想使用 HttpClient 的类来连续提取多个词条的谷歌点击次数，但是谷歌服务器不让我重复做这个操作，你能帮我吗？这是我的程序，参数Concept是我要搜索的词。</p>

```
public static double extractGoogleCount(String Concept)
    {
    double temp = 0;
    HttpClient httpClient = new HttpClient();
    String url = "http://www.google.com/search?hl=en&newwindow=1&q="
        + Concept + "&aq=f&aqi=&aql=&oq=&gs_rfai=";
    GetMethod getMethod = new GetMethod(url);
    getMethod.getParams().setParameter(HttpMethodParams.RETRY_HANDLER,
        new DefaultHttpMethodRetryHandler());
    try
    {
        int statusCode = httpClient.executeMethod(getMethod);
        if (statusCode != HttpStatus.SC_OK)
        {
            System.err.println("Method failed: "
                + getMethod.getStatusLine() + url);
        }
        InputStream responseBody = getMethod.getResponseBodyAsStream();
        DataInputStream dis = new DataInputStream(responseBody);
        String returnPage = dis.readLine();
        while (returnPage != null)
        {
            int index = returnPage.indexOf("<div id=\"resultStats\">");
            if (index == -1)
            {
            returnPage = dis.readLine();
            continue;
            }
            String sub = returnPage.substring(index, index + 100);
            if (sub.indexOf("About") >= 0)
            {

            String[] result = sub.split(" ");
            String number = result[2].replaceAll(",", "");
            temp = Double.parseDouble(number);
            } else
            {
            String[] result = sub.split(" ");
            String number = result[1].substring(result[1]
                .indexOf(">") + 1);
            System.out.println("number:" + number);
            temp = Double.parseDouble(number);
            }
            break;
        }

        return temp;
    } catch (HttpException e)
    {
        System.out.println("Please check your provided http address!");
        e.printStackTrace();
    } catch (IOException e)
    {
        e.printStackTrace();
    } 
    catch (Exception e)
    {
        e.printStackTrace();
        return temp;
    } finally
    {
        httpClient.getState().clear();
        getMethod.releaseConnection();

    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:39:44.023

Google 仅允许每秒来自单个客户端的一定数量的请求。尝试添加：

```
 Thread.sleep(200); 
```

到代码，它应该可以工作。您可能想要创建另一个线程来完成获取工作，以便在需要以某种方式显示此数据时可以对程序执行其他操作

# c# - 枚举 hashset 并从中删除元素

> ID：15759428
> 
> 赞同：5
> 
> 时间：2013-04-02T08:29:33.337
> 
> 标签：c#, linq, hashset

我想通过一个 HashSet 并对每个元素进行（复杂的）检查，这会导致保存元素、从 HashSet 中删除元素或什么都不做。

由于 foreach 循环不允许我更改 HashSet 并且索引不可用，因此我不知道如何执行任务（不做缓慢的事情，例如先复制 HashSet 或应用多个 LINQ 操作，这意味着枚举 HashSet 超过一次）。

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T08:31:34.210

您只需将[RemoveWhere()](http://msdn.microsoft.com/en-us/library/bb361254.aspx)与适当的谓词函数一起使用。

如果需要，您可以对您的谓词产生副作用，它会复制被检查的元素（假设这就是“保存元素”的意思）。也许这听起来有点老套，但我认为它会很好用。

这是有效的，因为您的谓词函数将以未定义的顺序呈现 HashSet 的每个元素，因此您可以决定如何处理每个元素，以及返回`true`以删除它并`false`保留它。

[编辑] 这是一个代码示例。

```
using System;
using System.Collections.Generic;

namespace Demo
{
    public class Program
    {
        [STAThread]
        private static void Main(string[] args)
        {
            var hashSet = new HashSet<int> {4, 0, 6, -1, 23, -8, 14, 12, -9, 5, 2};
            var itemProcessor = new ItemProcessor();

            hashSet.RemoveWhere(itemProcessor.Process);

            Console.WriteLine("Max = {0}, Min = {1}", itemProcessor.Max, itemProcessor.Min);
            Console.WriteLine("\nHashSet contents:");

            foreach (int number in hashSet)
            {
                Console.WriteLine(number);
            }
        }
    }

    public sealed class ItemProcessor
    {
        private int max = int.MinValue;
        private int min = int.MaxValue;

        // Removes all negative numbers and calculates max and min values.

        public bool Process(int item)
        {
            max = Math.Max(item, max);
            min = Math.Min(item, min);

            return (item < 0);
        }

        public int Max { get { return max; } }
        public int Min { get { return min; } }
    }
} 
```

# javascript - 我正在尝试使用 JavaScript 中的正则表达式验证日期，但它无法正常工作？

> ID：15759434
> 
> 赞同：0
> 
> 时间：2013-04-02T08:29:53.517
> 
> 标签：javascript

我正在尝试使用 JavaScript 验证一个简单的日期，但无论我输入什么日期，它都会出现错误。我确信我可能在做一些愚蠢的事情，但我找不到解决方案。

```
<script type="text/javascript">
/* <![CDATA[ */
function validateDate(date) {
var dateCheck = /^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;
    if (dateCheck.test(date) == false) {
        window.alert("Please enter a correct date");
    }
    else {
    window.alert("The date was entered correctly!");
    }
}
/* ]]> */
</script>

Please enter a date:
input type='text' name='date' id='date'>
input type='button' name="submitDate" id='submitDate' value='Submit' onclick="validateDate()"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:38:30.127

我已经在这个[jsFiddle](http://jsfiddle.net/2NEEe/)以及 rubular.com 上的正则表达式本身上[对其](http://rubular.com/r/w22aCHIuEF)进行了测试，两者都使用“xx-xx-xxxx”格式的日期。当您尝试使用诸如“xx-xx-xx”之类的格式时，它会失败。

示例代码：

```
 var dateCheck = /^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$/;

    if (dateCheck.test("02-03-2013") == false) {
        window.alert("Please enter a correct date");
    } else {
        window.alert("The date was entered correctly!");
    } 
```

您要检查的确切格式是什么？也许您想看看[XDate](http://arshaw.com/xdate/)，它提供了一个非常好的 JavaScript 库来处理日期（您可以使用该`.valid`方法检查日期是否有效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:43:40.397

您的正则表达式似乎运行良好。但是，您忘记了`date`函数声明中的参数，这可能是问题所在。

```
function validateDate(date) {
    ...
} 
```

* * *

哦，好吧，我看到你编辑了你的问题，我明白了。当你给`name`一个输入元素一个属性时，你就引用了这个元素。所以如果你想使用命名输入的值`date`，你必须使用`date.value`.

我用你的代码制作了一个 jsFiddle 并使用`date.value`：http: [//jsfiddle.net/BssTY/](http://jsfiddle.net/BssTY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:02:08.827

您可以添加更多详细信息以进一步限制输入：

```
^(([1-9]|[0][0-9]|[1-2][0-9]|[3][0-1])(\/|\-)([1-9]|[0][1-9]|[1][0-2])(\/|\-)([1-9]{1}[0-9]{3}|[0-9]{2}))$ 
```

见[http://rubular.com/r/uTJ55LKzMK](http://rubular.com/r/uTJ55LKzMK)

分解正则表达式以检查月份中的*天数*：

```
([1-9]|[0][0-9]|[1-2][0-9]|[3][0-1])

- Single digit, eg. 1 or 2 or 3 up to 9
- OR, can be double digits leading with 0, eg. 01 or 02 or 03 up to 09
- OR, can be double digits leading with 1 or 2, eg. 10 or 11 or 22 or 23 up to 29
- OR, can be double digits leading with 3, eg. 30 or 31 
```

检查*月份*的正则表达式：

```
([1-9]|[0][1-9]|[1][0-2])
- Single digit, eg. 1 or 2 or 3 up to 9
- OR, can be double digits leading with 0, eg. 01 or 02 or 03 up to 09
- OR, can be double digits leading with 1, eg. 10 or 11 or 12 
```

检查*年份*的正则表达式：

```
([1-9]{1}[0-9]{3}|[0-9]{2})
- Four digits leading with # in range [1-9], eg. 1001 or 1100, up to 9999
- OR, can be double digits leading with # in range [0-9], eg. 00 or 01 up to 99 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:58:15.847

验证日期不仅仅是检查格式。OP 函数认为“30-02-2013”​​是可以的。测试字符串的一种方法是创建一个日期对象并检查原始对象，例如

```
 // Format dd-mm-yyyy
function validateDate(s) {
    s = s.split('-');
    var d = new Date(s[2], --s[1], s[0]);
    return !!d && d.getMonth() == s[1] && d.getDate() == s[0];
}

validateDate('30-02-2013'); // false
validateDate('29-02-2000'); // true 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-02T08:32:44.840

使用这样的简单验证：

```
validformat=/^\d{2}\/\d{2}\/\d{4}$/ 
```

# c# - 如何在 Webkit.Net 中选择用户控件 WebKitBrowser 的所有文本？

> ID：15759442
> 
> 赞同：1
> 
> 时间：2013-04-02T08:30:15.457
> 
> 标签：c#, .net, webkit, webbrowser-control

WebKitBrowser 中有一个方法`SelectedText`，但是没有`SelectAll`. 有没有办法让我做如下的事情：

```
string GetAllTextOfBrowserAsPlainText(WebKitBrowser webKitBrowser)
{
    webKitBrowser.SelectAll(); //Doesn't exist
    return webKitBrowser.SelectedText;
} 
```

我的目标是完全呈现网页（包括样式），然后将网页内容复制到平面文本中，就像我在浏览器中使用复制/粘贴一样。

直接获取`InnerText`或使用 HTML 不是一种选择。

我已经尝试使用 WebBrowser UC`WebBrowser1.Document.ExecCommand`来捕获文本，但是我无法让样式正常工作。我现在正在尝试 WebKit，而且我非常接近得到我想要的东西。有什么帮助吗？WebKit是否`ExecCommand("SelectAll",...)`存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:37:02.047

尝试使用 WebClient

```
 using (WebClient wc = new WebClient())
      string mystring= wc.DownloadString("http://yoururl.com"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:33:08.693

我通过在下载的 html 末尾添加 javascript 解决了这个问题。从代码中调用 js 很棘手，因为 WebKit.Net 似乎无法直接执行此操作。以下不是我的最终生产代码，但会在此过程中对同一地点的任何人有所帮助：

```
private WebKitBrowser _browser = ...;
private string _selectAllCopyScript = "<script>document.execCommand('SelectAll', false, null);document.execCommand('Copy', false, null); </script>";
private string _plain = ...;

Form1()
{
    ...
    _browser.DocumentCompleted += OnDocumentCompleted;
}

private string GetAllTextOfBrowserAsPlainText(String html)
{
    _browser.Focus();
    _browser.DocumentText = html + _selectAllCopyScript; //Calls OnDocumentCompleted when done
}

private void OnDocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    _plain = Clipboard.GetText();
    Clipboard.Clear();
} 
```

我希望我找到了一个不必使用剪贴板的解决方案。最终复制的纯文本 html 存储在`_plain`.

# objective-c - 更改 ABPeoplePickerNavigationController 属性

> ID：15759443
> 
> 赞同：0
> 
> 时间：2013-04-02T08:30:18.380
> 
> 标签：objective-c

我正在尝试更改联系人表的某些属性，但我不能。首先，我需要删除取消按钮并设置一个“添加”按钮。我尝试使用委托方法将其设置为 nil，但它没有用。

它起作用的唯一方法是：

```
 [picker setAllowsCancel:NO]; 
```

这给出了一个警告：（我不想冒险）

```
instance method not found 
```

我还需要删除“组”按钮。

所以在底线，我想从上栏中删除所有按钮，并设置我自己的按钮。我该怎么做？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:45:42.873

咆哮，你不能使用方法：

```
[picker setAllowsCancel:NO]; 
```

这是 Apple 的私有 API（非公开），他们会拒绝您的应用。

```
ABPeoplePickerNavigationController *tempABPNC = [[ABPeoplePickerNavigationController alloc] init];
tempABPNC.peoplePickerDelegate = self;
tempABPNC.delegate = self;
[self presentModalViewController:tempABPNC animated:YES];
[tempABPNC release]; 
```

您必须添加“ tempABPNC.delegate = self; ”然后实现 UINavigationControllerDelegate 方法：

```
- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated{
viewController.title = @"选择联系人";
tinlnTempVC = viewController;
viewController.navigationItem.leftBarButtonItem = nil;
UIViewController *tempABVC = [navigationController.viewControllers lastObject];
tempABVC.title = @"选择联系人";
if([viewController.view.subviews count]==0){ //if user disable app open contact,you can create your own view,
    UIView *tempV=[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, IS_IPHONE5 ? 504 : 416)];
    ...
    ...
    viewController.view = tempV;
    [tempV release];
}} 
```

在这个viewcontroller中，子类ABPeoplePickerNavigationController，所以我们可以用我们自己的按钮替换navigationleft、right、backitem

```
static UIViewController *tinlnTempVC;
@implementation ABPeoplePickerNavigationController (tinlnCustom)

- (void)viewWillLayoutSubviews{
if ([[[UIDevice currentDevice] systemVersion] floatValue] < 5.0)
    return;
UIButton *dismisBtn = [UIButton DIYNavigationBarItemBtnWithTitle:@"返 回" NC:tinlnTempVC.navigationItem];
[dismisBtn addTarget:self action:@selector(backToPayPhone) forControlEvents:UIControlEventTouchUpInside];}

- (void)backToPayPhone{
[self dismissModalViewControllerAnimated:YES];}

@end 
```

希望对你有帮助，咆哮，这个方法在iOS 5.0-6.1运行完美，在iOS 4.3-5.0第一次显示backitem无法替换。

# java - 使用 iText 创建 PDF 而不将其保存到临时文件

> ID：15759446
> 
> 赞同：1
> 
> 时间：2013-04-02T08:30:28.950
> 
> 标签：java, itext

代码：

```
private String FILE = "e:/FirstPdf.pdf";

public void preparePDF() {
        try {
            Document document = new Document();
            PdfWriter.getInstance(document, pdfFile);
            document.open();
            addTitlePage(document);
            document.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
} 
```

一切正常，但我想要的是不要将 pdf 保存到临时文件夹中，而只是将其插入到一个`private File`或其他东西中。我正在创建一个具有下载 PDF 文件功能的 Web 应用程序，我只需要将 pdf 放在变量中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:45:19.783

`ByteArrayOutputStream`如果不想保存，可以使用`PDF`. 看看这个[例子](http://itextpdf.com/examples/iia.php?id=173)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:44:35.547

`PdfWriter`有一个静态方法`getInstance(Document document, OutputStream os)`。使用 a`ByteArrayOutputStream`将内容存储到字节数组。稍后，使用此数组将文件发送给用户。也许您需要将数组包装成`ByteArrayInputStream`.

这样，您不需要将文件存储在文件系统上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:45:14.013

您可以将 写入`document`而`OutputStream`不是文件。如果您希望能够动态生成和下载 PDF 文件（即，如果它不需要超过一秒钟左右的时间来生成），那么您可以创建一个 servlet 并写入`HttpServletResponse.getOutputStream()`.

```
PdfWriter.getInstance(document, response.getOutputStream()) 
```

# canvas - three.js：如何让多个材质为一个网格工作

> ID：15759447
> 
> 赞同：7
> 
> 时间：2013-04-02T08:30:37.410
> 
> 标签：canvas, three.js, webgl, javascript

我对three.js有一个大问题：

我想要一个简单的立方体，每个面上都有不同的颜色。我试过这样：

```
// set the scene size
    var WIDTH = jQuery('#showcase').width() - 20, HEIGHT = jQuery('#showcase').height();

    // set some camera attributes
    var VIEW_ANGLE = 45, ASPECT = WIDTH / HEIGHT, NEAR = 0.1, FAR = 10000000;

    this.container = jQuery('#showcase');

    this.renderer = new THREE.WebGLRenderer();
    this.camera = new THREE.PerspectiveCamera(VIEW_ANGLE, ASPECT, NEAR, FAR);
    this.scene = new THREE.Scene();
    this.scene.add(this.camera);

    // camera start position
    this.camera.position.z = this.model.radius;
    this.camera.position.y = this.model.cameraY;
    this.camera.position.x = 0;
    this.camera.lookAt(this.scene.position);

    this.renderer.setSize(WIDTH, HEIGHT);
    this.container.append(this.renderer.domElement);

    //Multiple Colors
    var materials = [new THREE.MeshBasicMaterial({
        color : 0xFF0000
    }), new THREE.MeshBasicMaterial({
        color : 0x00FF00
    }), new THREE.MeshBasicMaterial({
        color : 0x0000FF
    }), new THREE.MeshBasicMaterial({
        color : 0xAA0000
    }), new THREE.MeshBasicMaterial({
        color : 0x00AA00
    }), new THREE.MeshBasicMaterial({
        color : 0x0000AA
    })];

    this.geometry = new THREE.CubeGeometry(100, 100, 100, materials);

    this.mesh = new THREE.Mesh(this.geometry,  new THREE.MeshFaceMaterial());

    this.scene.add(this.mesh);

    // create a point light
    this.pointLight = new THREE.PointLight(0xFFFFFF);
    this.pointLight.position = this.scene.position;
    this.scene.add(this.pointLight);

    this.renderer.render(this.scene, this.camera); 
```

但我收到此错误消息：“Uncaught TypeError: Cannot read property 'map' of undefined”来自 three.js 中的第 19152 行。

对我来说，这似乎是 webgl 渲染器的问题。在我在这里和其他地方找到的大多数主题中，他们都在使用画布渲染器。但我想继续使用 webgl 渲染器。

有人知道这个问题吗？非常感谢：-）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T08:45:49.313

试试这个

```
this.geometry = new THREE.CubeGeometry(100, 100, 100);
this.mesh = new THREE.Mesh(this.geometry, new THREE.MeshFaceMaterial(materials)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:09:42.883

也许尝试使用数组。

使用three.js 49（如果它与57一起使用则不适用）我将此代码用于具有不同材料的天空盒：

```
var axes = new THREE.AxisHelper();
scene.add( axes );

var materialArray = [];
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'textures/himmel.jpg' ) }));
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'textures/himmel.jpg' ) }));
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'textures/himmel.jpg' ) }));
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'textures/himmel.jpg' ) }));
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'textures/himmel.jpg' ) }));
    materialArray.push(new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'textures/himmel.jpg' ) }));
    var skyboxGeom = new THREE.CubeGeometry( 5000, 5000, 5000, 1, 1, 1, materialArray );
    var skybox = new THREE.Mesh( skyboxGeom, new THREE.MeshFaceMaterial() );
    skybox.flipSided = true;
    scene.add( skybox ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-09T05:43:30.157

也试试这个，应用顶点颜色。

```
var geom = new THREE.BoxGeometry(20, 20, 20);
var faceIndices = ['a', 'b', 'c'];
var vertexIndex, point;
mat = new THREE.MeshBasicMaterial({
vertexColors: THREE.VertexColors
});
mesh = new THREE.Mesh(geom, mat);
scene.add(mesh);
geom.faces.forEach(function (face) { // loop through faces
for (var i = 0; i < 3; i++) {
vertexIndex = face[ faceIndices]; 
point = geom.vertices[vertexIndex]; 
color = new THREE.Color(
point.x + 0.5, 
point.y + 0.5,
point.z + 0.5
);
face.vertexColors[ i ] = [![the output will be as in the attached picture][1]][1]color; 
}
}); 
```

# java - 用 Mockito 模拟“内部”对象

> ID：15759448
> 
> 赞同：5
> 
> 时间：2013-04-02T08:30:43.833
> 
> 标签：java, junit, mockito

对单元测试和模拟非常陌生，我有一个方法来测试它调用一个新对象的方法。如何模拟内部对象？

```
methodToTest(input){
...
OtherObject oo = new OtherObject();
...
myresult = dosomething_with_input;
...
return myresult + oo.methodX();
} 
```

我可以模拟 oo 以返回“abc”吗？我真的只想测试我的代码，但是当我模拟“methodToTest”以返回“42abc”时，我不会测试我的“dosomething_with_input”代码......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:32:07.733

我认为实现的类`methodToTest`被命名为`ClassToTest`

*   创建一个工厂类`OtherObject`
*   把工厂当作一个领域`ClassToTest`
*   任何一个
    *   将工厂作为构造函数的参数传递`ClassToTest`
    *   或者在分配`ClassToTest`对象时初始化它并为工厂创建一个setter

你的测试类应该看起来像

```
public class ClassToTestTest{
    @Test
    public void test(){
        // Given
        OtherObject mockOtherObject = mock(OtherObject.class);
        when(mockOtherObject.methodX()).thenReturn("methodXResult");
        OtherObjectFactory otherObjectFactory = mock(OtherObjectFactory.class);
        when(otherObjectFactory.newInstance()).thenReturn(mockOtherObject);
        ClassToTest classToTest = new ClassToTest(factory);

        // When
        classToTest.methodToTest(input);

        // Then
        // ...
    }
} 
```

# path - 如何计算neo4j中的平均路径长度

> ID：15759454
> 
> 赞同：0
> 
> 时间：2013-04-02T08:31:15.023
> 
> 标签：path, neo4j, average

我在 neo4j 中有 1250000 个节点，现在我想计算这些节点之间的平均路径长度。有没有有效的方法来做到这一点？如果我使用：for x in nodes: for y in nodes: cal(x,y) 我认为这会花费太多时间。所以我想要一个更有效的算法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:31:58.157

您可以尝试避免计算您在前面的步骤中已经计算的路径（就像您在动态编程中所做的那样）。例如，假设你有路径 x->y->z，而不是在计算 x--->z 路径时，你会记住路径 x->y 和 y->z 以便你可以使用它们稍后的。

如果您使用这种方法，您可能会遇到内存限制，具体取决于您的服务器配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:13:17.630

好吧，我会复制图表（例如在 Neo4j HA 集群中），然后在每个节点上只运行总 x 的一部分，这样计算就会并行化。

# java - android sqlite 并发保存

> ID：15759457
> 
> 赞同：2
> 
> 时间：2013-04-02T08:31:22.183
> 
> 标签：java, android, sqlite, concurrency

对于我正在编写的应用程序，我目前在并发保存到 sqlite 数据库时遇到问题。

情况如下：

我有一个列表视图，当它被单击时，该项目被标记为同步。一个标志被保存到数据库中。此外，然后启动一个异步线程，该线程从服务器检索数据，然后将其本地保存到 sqlite 数据库。

在此期间，可以单击其他列表项，这会将它们标记为同步（并写入一个需要同步到数据库的标志）

如果用户离开应用程序或应用程序被终止，则需要该标志，项目被标记为同步但尚未同步。

从 ui 线程调用的代码：[从 UI 线程执行]

```
Project p = (Project) obj;
if (p.getDoSync() == 0){
   p.setDoSync(1);
   p.save();
} 
```

此代码可以与以下代码同时执行，该代码位于异步方法中：

[从异步方法执行]

```
 for (Project project : ProjectRepository.forSyncStatus(SyncStatus.NEEDS_SYNC)){
    try {
       db.beginTransactionNonExclusive();
       project.sync();
       db.setTransactionSuccessful();
       } finally {
          db.endTransaction();
       }
    } 
```

我们正在处理大量带有嵌套对象的 json 数据。project.sync() 解开 json 并从中创建 java 对象并保存它们。所以一个 project.sync(); 本身包含多个插入。

问题不是应用程序崩溃，而是 UI 冻结。如何防止 UI 冻结？我现在完全不知所措。

[编辑] 我做了一些实验。问题是交易。然而，该交易是必要的，否则 project.sync(); 需要很长时间。没有事务就没有 UI 冻结。

# sql - {ts '2013-04-02 00:00:00'} 是什么？

> ID：15759458
> 
> 赞同：18
> 
> 时间：2013-04-02T08:31:22.920
> 
> 标签：sql, sql-server, crystal-reports-2008

当我分析正在运行的 T-SQL 时，我发现一个在 where 子句中有**{ts** '2013-04-02 00:00:00'} 的查询。我对此非常好奇，并试图找到源头。它由 CrystalReport 报表执行。

这是查询。

```
SELECT *
FROM    [Table] B
WHERE   CONVERT(VARCHAR, [AddedDateTime], 111) 
        BETWEEN CONVERT(VARCHAR, {ts '2013-03-31 00:00:00'}, 111)
        AND     CONVERT(VARCHAR, {ts '2013-04-02 00:00:00'}, 111) 
```

谁能告诉我它是什么以及我们可以在哪里使用它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-02T08:33:38.313

这是一个[ODBC 文字](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms712360%28v=vs.85%29.aspx)转义序列

> ODBC 为日期、时间和时间戳文字定义了转义序列。这些转义序列的语法如下：

```
{ts 'value'} 
```

* * *

> 我们可以在哪里使用它？

`datetime`期望值的任何地方。（“时间戳”是 SQL Server 所称的 SQL 标准白话`datetime`）。

# wcf - 调用 WCF 服务的错 误

> ID：15759462
> 
> 赞同：0
> 
> 时间：2013-04-02T08:31:33.210
> 
> 标签：wcf, windows-phone-7

我用 WCF 服务构建了一个服务器：IService.cs 和 Service.cs。文件的代码如下：

服务.cs

```
[ServiceContract]
public interface ITaiKhoanNguoiChoi
{ 
    [OperationContract]
    void InsertStaff(string username);
 } 
```

服务.cs

```
public void InserStaff(string username)
        {
            try
            {
                conn = new SqlConnection(strConnect);
                conn.Open();
                cmd = new SqlCommand("insert into STAFF values('" + username+ "')", conn);
                cmd.ExecuteNonQuery();
                conn.Close();
            }
            catch
            {

            }
        } 
```

好的，这就是我构建的所有服务代码。然后，我将在我的客户端调用服务，代码如下所示：

```
ServiceClient proxy = new ServiceClient();
private void btnInsert_ManipulationStarted(object sender, ManipulationStartedEventArgs e)
        {
            proxy.InsertStaffCompleted += new EventHandler<AsyncCompletedEventArgs>(InsertStaffMethod);
            proxy.InsertStaffAsync("John");            
        }

void InsertStaffMethod(object o, AsyncCompletedEventArgs e) 
        { 
            MessageBox.Show("YAY!");
        } 
```

现在，在我第一次单击 btnInsert 时，“YAY”将显示 1 次。

第二次单击 btnInsert 时，“YAY”将显示 2 次。

……

在我第 N 次单击 btnInsert 时，“YAY”将显示 N 次。

那是我的问题。我不明白为什么我只点击1次，服务器的InsertStaff方法会被调用很多次。

你能为我解释一下吗？以及如何解决问题。我只希望 InsertStaff 方法仅在单击 btnInsert 1 次时执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:48:57.503

自从我使用 WebForms 事件生命周期以来已经有一段时间了，但我认为每次单击 btnInsert 时都会添加 EventHandler，因此每次都会触发越来越多的事件。

解决办法是不要线

```
proxy.InsertStaffCompleted += new EventHandler<AsyncCompletedEventArgs>(InsertStaffMethod); 
```

在按钮单击处理程序中。

创建代理，然后在表单加载事件中添加一次事件处理程序。

顺便说一句，如果这将最终成为生产代码，请注意行中 SQL 注入的可能性：

```
cmd = new SqlCommand("insert into STAFF values('" + username+ "')", conn); 
```

# php - 致命错误：使用 php5 在我的 apache2 服务器中调用未定义的函数 curl_init()

> ID：15759465
> 
> 赞同：2
> 
> 时间：2013-04-02T08:31:38.773
> 
> 标签：php, curl, apache2

当我在 windows7 环境中运行我使用 curl 的项目时出现此错误。

```
 Fatal error: Call to undefined function curl_init() 
```

我使用的是 Apache2.2 和最新版本的 PHP，目录是 C:/Apache2；C：/PHP。**我在php.ini**中为 curl 设置（删除；）扩展名，还检查**了 php_curl.dll**、**ssleay32.dll**和**libeay32.dll**文件是否存在于**C:/PHP**目录以及**C:/windows/system32**中。

是否有任何与配置相关的问题或其他问题？

高级感谢任何类型的解决方案...

** 我的服务器不是 wamp/xamp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:08:05.207

如果您确实在`php.ini`（正确的）中启用了 curl 扩展。您应该重新启动您的网络服务器。并检查输出`phpinfo();`

# php - 使用有效路径打开远程 pdf 文件返回 404

> ID：15759466
> 
> 赞同：3
> 
> 时间：2013-04-02T08:31:39.057
> 
> 标签：php, drupal, http-status-code-404

我正在尝试在 drupal 中显示与文章关联的相应 PDF 文件，这样如果浏览器配备了呈现 pdf 的功能，它应该直接打开，如果没有显示带有“打开”、“保存”和“取消”的常规对话框允许用户在选项中进行选择。PDF 存在于公共 Web 服务器中，可以访问图像和文件等所有资源。

我用来完成的代码如下：

```
$pdf_file_name = "http://mysite.com/valid-pdf-file.pdf";
drupal_set_header('Content-type: application/pdf');
drupal_set_header('Content-Disposition: inline; filename="' . $pdf_file_name
 . '"');
$fp = fopen($pdf_file_name, "r");
$file_open_timeout = 60;
if ($fp) {
  stream_set_timeout($fp, $file_open_timeout); 
  while (!feof($fp)) {
    echo fread($fp, 65536);
    flush();
  }
  fclose($fp);
}
else {
  watchdog("pdf logging", "Could not open the file " . $pdf_file_name);
} 
```

尽管此代码适用于我的一些初始 pdf 文件（我假设它们是不超过 10 MB 的小文件），但它在许多其他文件上都失败了，并显示以下错误消息：

> fopen（[http://mysite.com/valid-pdf-file.pdf](http://mysite.com/valid-pdf-file.pdf)）：无法打开流：HTTP 请求失败！HTTP/1.1 404 未找到

通过浏览器打开该文件[http://mysite.com/valid-pdf-file.pdf](http://mysite.com/valid-pdf-file.pdf)的路径会直接呈现该文件，而不会出现任何错误消息。因此，我根据一些谷歌搜索尝试了`stream_set_timeout`上面的代码，但尽管文件肯定存在，但仍然无法克服 404 错误。

这是一个无法打开的 URL 的示例：

“ [http://fileservername.com/resources/sitename/2013/03/20/bed6e3de-41bf-4bf9-bed8-d21508eaa8ca/Trouble](http://fileservername.com/resources/sitename/2013/03/20/bed6e3de-41bf-4bf9-bed8-d21508eaa8ca/Trouble) --云纲要优化.pdf”

我还用 url 编码文件路径进行了测试，但结果没有什么不同；`urlencode($pdf_file_name)`在 fopen 和 readfile 中做了。

此外，我检查了这些麻烦的 pdf 文件的文件/文件夹权限是否与正常打开的文件/文件夹权限不同，但发现并没有什么不同。

此文件处理的替代代码

```
ob_clean();
flush();
readfile($pdf_file_name);
exit(); 
```

给出了相同的结果，其中麻烦的 pdf 返回 404，而其他的工作正常。任何关于我错过了什么来获得这个功能或更好地实现这个功能的任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:05:48.460

您的问题确实是 URL 编码，但您不能只是`urlencode()`整个字符串，因为这也会转义一些需要保持不变的字符。我会建议这样的事情：

```
function escape_url($url)
{
    // Check that the input data is sane
    if (!$parts = parse_url($url)) {
        return false;
    }
    if (!isset($parts['scheme'], $parts['host'])) {
        return false;
    }

    // construct site base URL
    $result = $parts['scheme'] . '://';

    if (isset($parts['user'])) {
        $result .= $parts['user'];
        if (isset($parts['pass'])) {
            $result .= ':' . $parts['pass'];
        }
        $result .= '@';
    }

    $result .= $parts['host'];

    // Normalize path
    if (!isset($parts['path'])) {
        // if no path assume domain root
        $parts['path'] = '/';
    }
    $parts['path'] = preg_split('#/+#', $parts['path']); // split to path components
    $parts['path'] = array_map(function($part) { // ensure all components are correctly escaped
        return urlencode(urldecode($part));
    }, $parts['path']);
    $parts['path'] = implode('/', $parts['path']); // reconstruct string
    $result .= $parts['path'];

    // parse the query string an rebuild it
    if (isset($parts['query'])) {
        parse_str($parts['query'], $query);
        if (function_exists('get_magic_quotes_gpc') && get_magic_quotes_gpc()) {
            // undo magic_quotes
            array_walk_recursive($query, function(&$value) {
                $value = preg_replace('#\\\\([\'"\\\\\\x00])#', '$1', $value);
            });
        }
        $result .= '?' . http_build_query($query);
    }

    // add document fragment if present
    if (isset($parts['fragment'])) {
        $result .= '#' . $parts['fragment'];
    }

    return $result;
}

$url = 'http://fileservername.com/resources/sitename/2013/03/20/bed6e3de-41bf-4bf9-bed8-d21508eaa8ca/Trouble --Cloud Compendium optimized.pdf';
echo escape_url($url);
// output:
// http://fileservername.com/resources/sitename/2013/03/20/bed6e3de-41bf-4bf9-bed8-d21508eaa8ca/Trouble+--Cloud+Compendium+optimized.pdf 
```

[看到它工作](http://codepad.viper-7.com/nDT4v6)

**注意：**这用于[`parse_str()`](http://www.php.net/manual/en/function.parse-str.php)规范化可能在 URL 上的任何查询字符串，这受[`magic_quotes_gpc`](http://www.php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc)配置选项的影响。**此选项已弃用，不安全，应禁用**，但您应该注意，如果启用它会影响此函数的输出。无法在运行时调整此设置，您需要确保在您的环境中禁用该设置。

**编辑**更正了路径组件的潜在双重编码，添加了对搞砸时的修复`magic_quotes`。请注意，这些修复使用闭包，因此需要 PHP 5.3+，因为[`create_function()`](http://php.net/create-function)可以替换较低版本或辅助函数。

# android - 如何直接从 Google 的 GCM 服务器取消注册用户的设备？

> ID：15759467
> 
> 赞同：1
> 
> 时间：2013-04-02T08:31:41.647
> 
> 标签：android, google-cloud-messaging

我想让用户切换以选择是否要在他们的设备上接收通知，我可以使用网络服务调用从我的服务器中删除 deviceID，但是设备仍然会收到通知，所以我发现 deviceID 仍然生活在 GCM 服务器上，我尝试使用`GCMRegistrar.unregister(context);`但它没有效果，我仍然收到通知。

有人可以帮我解决这个问题，我不知道如何关闭接收通知，还有其他方法吗？

这是我的`BroadcastReceiver`

```
 <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>

                <!-- Receives the actual messages. -->
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <!-- Receives the registration id. -->
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="com.dfdsf.fdsf" />
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T08:38:30.690

它可以通过以下方式轻松控制：

1.  用户选择“我不想再收到通知”
2.  应用程序通知您的推送服务器。
3.  您的服务器删除数据库中的 GCM id 记录。

您不必通知 GCM 服务器。因为您的服务器不会再向此手机发送任何内容。如果用户仍然得到，那是你的服务器错误。

后来，如果用户决定再次接收。只需再次将 gcm id 通知给您的推送服务器。

* * *

要在客户端阻止消息，有两种方法：

1) 通过发出注销 Intent 从 gcm 注销您的应用程序。请参阅此[URL](http://developer.android.com/google/gcm/gcm.html#unregistering)的第一部分。

2) 每当您收到推送消息时，请检查您的应用设置。如果设置为 ON，则对消息执行某项操作，例如显示通知。如果设置为 OFF，则忽略该消息。

* * *

服务器端阻止的优点是您可以严格控制哪些用户可以接收消息。例如订阅到期，您将希望直接从服务器中删除记录，而不是依赖客户端阻止。

# rational-rsa - IBM 理性软件架构师：缺少“依赖”关系

> ID：15759469
> 
> 赞同：0
> 
> 时间：2013-04-02T08:31:47.493
> 
> 标签：rational-rsa

我使用 IBM 理性软件架构师 8.0.4 版。

我遇到的问题是：

在 RUP 分析模型中，我创建了一个 UML 包（“系统模型”）。然后我在包中创建一个用例图。从“用例”面板中，我在图中创建了两个包元素（“ATM 系统”）和（“银行系统”）。

然后我尝试在它们之间建立依赖关系，但我做不到。如果我从 ATM 系统中拖出一条线，然后停在空白处，我会得到两个选项（“创建参考到”、“创建附注到”）。但我知道应该有一个选项“创建依赖项”，它不在这里。

那么如何使该选项出现或如何在没有该选项的情况下建立依赖关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:23:20.387

我怀疑您使用了 RUP 分析模型模板。模型模板允许您向可在图表上使用的模型元素添加功能（和约束）。您可以通过两种方式解决此问题：

第一种是使用没有约束的 General->Blank Package 模板创建模型。要创建模型，请转到 File->New->UML Model，保持默认的 Standard Model，然后选择 General->Blank Package。然后在类图中创建您的包和依赖项，并将包和依赖项复制并粘贴到用例图中。

第二个是更改原始模型的功能。在 Project Explorer 视图中选择模型，然后查看属性视图。在属性视图中，选择 Capabilities 部分并展开标题为 UML Element Building Blocks 的部分 - 并确保选中 UML Dependency。现在您应该能够在包之间添加依赖关系（您可能需要在图表上右键并选择过滤器->显示/隐藏关系才能看到它）。

这似乎是一种奇怪的方法 - 但不同的模板用于限制可以添加到图表中的内容，以确保您的图表是正确的（根据您设置的标准，或为您设置的标准）。

您可能还想考虑您要在图表中表示的内容。显示包（表示系统）通常不用于用例图中。您可能想查看一些其他图表来表示这些概念。如果您需要展示您的 ATM 和银行系统 - 将它们表示为子系统可能会更好（我们可以对此进行更深入的讨论，但这有点离题）。

我希望这会有所帮助。

# java - 鼠标坐标到cnc位置

> ID：15759486
> 
> 赞同：0
> 
> 时间：2013-04-02T08:33:33.533
> 
> 标签：java, communication

我叫帕斯卡，今年 19 岁。对于我的实习，我必须证明是否可以从鼠标接收 IR 坐标并将其以 Gcode 位置发送到 CNC 机床。

编程语言是Java。这不能再改变了。

基本思想是制作一个与鼠标和数控机床建立通信的程序。我已经有两个分开工作的程序。它被称为 SimpleWrite 和 MouseCoordinates（都是用 Java 编写的）。SimpleWrite 程序通过 com 端口写入特定消息。mousecoordinates 与鼠标建立连接并将 IR 坐标记录到控制台。

鼠标 ==> 电脑 ==> 数控机床。. IRcoordinates ==> 格式化为 Gcode ==> 通过 comport 发送

所以主要问题是：如何将这两个程序（其中包含一个主要方法）结合到一个工作程序中？因此程序开始与鼠标通信，并通过 comport 发送这些以 Gcode 格式格式化的坐标（使用 SimpleWrite 程序）。

我不是要向我展示解决方案，而是简单地提供一些搜索提示。我唯一的问题是我在Java编程方面不是很好，那么如果将这两个程序设置为一个工作程序，程序结构会是什么样子？

这个项目是保密的，所以它实际上不是鼠标，但概念也是如此。simplewrite 程序是开源的。

SimpleWrite：[http ://www.java-samples.com/showtutorial.php?tutorialid=214](http://www.java-samples.com/showtutorial.php?tutorialid=214)

原谅我模糊的英语:)。

提前致谢。

问候帕斯卡

@编辑：

这些程序现在合并了。SimpleWrite 给我消息“Data verzonden”（表示已发送数据），然后连接鼠标并将坐标打印到控制台。实际上发送的数据仍然是messageString。

现在第一个问题已经解决了，下一个问题对我来说仍然是一个黑点。SimpleWrite 程序最初是为打开一个 comport 并通过该 comport 发送一个字符串“messageString”而构建的。结合这两个程序就像单独运行它们一样。

如何将传入的 x 和 y 坐标格式化为 gcode，然后发送 gcode 数据流，如 G0 X(x 坐标) Y(y 坐标) 而不是单个 outputStream.write(messageString.getBytes()); ?

所以它会像：G0 X30 Y30 G0 X31 Y31 G0 X32 Y32 等等....

我不知道传入的gcode之间有多少时间以及CNC机器是否会先缓冲这些命令（以及他可以缓冲多少）然后执行它们，但这是第三个问题:)。

完整的图片现在是：鼠标坐标到 pc ==> OK！USB 端口打开 ==> 好的！USB 端口流（单字符串）==> 好的！ **鼠标 x 和 y 坐标 ==> Gcode 不行！鼠标 gcode ==> CNC 机器不行！**

再次感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:40:33.933

> 如何将这两个程序（包含一个主要方法）组合到一个工作程序中？

如果我理解正确，这就是您遇到的问题。在这两个程序中，将`main()`方法更改为`init()`并创建一个新程序，`main()`如下所示。

```
public static void main(String[] args){
    Program1.init();
    Program2.init();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:52:16.157

您必须更改代码，以便首先处理“鼠标”和 COM 端口的设置内容。然后，获取其余的“鼠标阅读器”代码，并将写入控制台的内容替换为调用写入 COM 端口的方法。因此，您的新 main 方法（可能在新类中）应大致如下所示：

```
/* open mouse input */
/* open COM output */
while (true) {
    /* read from mouse */
    /* reformat as gcode */
    /* write the data to the COM port */
} 
```

尽量重用现有的类，而不通过调用它们的方法来修改它们。

# sql-server - 运行 SQL Server 2008 实例

> ID：15759490
> 
> 赞同：0
> 
> 时间：2013-04-02T08:33:39.590
> 
> 标签：sql-server, sql-server-2008

我在一台机器上安装了 SQL Server 2008 和 2005。我知道 SQL 2005 版本默认运行。我的问题是如何更改 SQL 以运行 2008 版本？

您的帮助将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:24:27.590

无法将命名实例更改为默认值...。您必须重新安装...

我找到了一个显示以下组合的站点： sp_dropserver nameofinstance sp_addserver machinename,'local'

和一些注册表黑客。

[资源链接。](https://groups.google.com/forum/?fromgroups=#!topic/microsoft.public.sqlserver.server/VExOr0Pd-vM)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:26:32.127

这实际上是可能的。

1.  删除当前的 instname (sp_dropserver)
2.  添加新实例名称（sp_addserver 'new name','local'）
3.  停止 sqlserver
4.  修改hklm\software\microsoft\microsoft sql server\
5.  修改hklm\system\mssql$
6.  使用“sc create”添加新的 mssql$
7.  以新的 inst_name 启动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:44:24.030

我认为不可能将命名实例设为默认实例。[这里](https://stackoverflow.com/questions/35026/sql-server-convert-a-named-instance-to-default-instance)给出了原因。

但是，如果您需要将 sql 2008 作为默认实例，[这里](https://stackoverflow.com/questions/265081/how-to-create-default-instance-after-creating-a-named-instance)建议使用一种方法。您必须安装一个新实例并将其设置为默认实例。

# android - 退出按钮无法正常工作

> ID：15759496
> 
> 赞同：1
> 
> 时间：2013-04-02T08:34:25.473
> 
> 标签：android

我已经开发了应用程序，我想为退出按钮编写代码。我正在搜索退出按钮的代码，我从互联网上得到它。现在退出按钮代码工作正常，但是当我从模拟器打开应用程序时，它直接打开第三个活动。闪屏和第二个活动看不到我不知道我哪里出错了

这是退出按钮的代码

```
public void onClick(View v) {
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    finish();
    startActivity(intent);
} 
```

你能告诉我代码在哪里吗

**我的清单文件是**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.app.finan"
android:versionCode="1"
android:versionName="1.0" >
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<supports-screens 
    android:smallScreens="true"
    android:normalScreens="true"
    android:largeScreens="true"
    android:xlargeScreens="true"
    android:resizeable="true"

android:anyDensity="true"/>
<application
    android:allowClearUserData="true"
    android:icon="@drawable/dollar"
    android:label="@string/app_name"
    android:theme="@style/AppTheme">
    <activity
        android:name="com.app.finan.Splashscreen"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.app.finan.MainActivity"
        android:label="@string/app_name" 
        android:theme="@style/AppBaseTheme">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.app.finan.second"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.app.finan.Monthc"
        android:label="@string/app_name" >
        <intent-filter>
           <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:43:41.960

我知道您遇到了什么样的问题，无论您在哪里使用代码退出您的应用程序，只需添加此代码，以便您的活动重新启动！

```
public void onPause()
{
  super.onPause();
  finish();
} 
```

如果您使用了任何静态变量，只需按下 EXIT BUTTON 将它们设置为 NULL！并尝试在意图后完成您的活动！

```
startActivity(intent);
finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:57:22.337

你需要学习 `Activity Stack`

实际上你想要做的是*模仿*我们点击*主页按钮*的相同动作，即将活动发送到后台

您的应用程序根据代码正常运行。当您**单击退出按钮**时，它会将应用程序发送到后台，如**主页操作**，并从实际离开的位置**恢复，即在这种情况下是第三个活动。**

我通常会在这种时候杀死应用程序，而不是使用以下代码段使其变得复杂

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

只需将其添加到您退出按钮单击..

有关 Activity Stack 的详细知识，请在[此处阅读 google docs中的活动堆栈](http://developer.android.com/guide/components/tasks-and-back-stack.html)

或添加`intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`以清除当前堆栈中的所有活动的方式使其发生

# jenkins - Jenkins：有条件地启动一个项目

> ID：15759497
> 
> 赞同：0
> 
> 时间：2013-04-02T08:34:35.347
> 
> 标签：jenkins, hudson, post-build

Jenkins 构建了我们软件套件的设置项目。之后，它使用 XP 启动虚拟机，安装我们的软件，执行一些测试，然后关闭虚拟机。接下来在Win7上进行同样的安装和测试程序，然后在Win8、Server 2008 R2、Server 2012...

这意味着，当“关闭从站”项目完成后，必须根据之前的从站启动一个新的从站。

“构建后任务”插件允许根据项目的输出执行脚本（我可以在此处添加“ver”语句以获取相关信息），但它无法启动项目。

另一个插件允许根据项目结果（成功、不稳定、失败）执行操作 - 但这在这里不适用。

目前，我想为每个从属创建特定的批处理文件，这些文件将通过 vmrun 启动下一个客户端，然后关闭当前的从属。但我不喜欢这种解决方法，因为有关项目顺序的信息已从 Jenkins master 中移走。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:01:56.773

对我来说，听起来奴隶詹金斯实例比你的情况更麻烦。

一个将在主服务器上运行并控制虚拟机的启动/关闭以及在每个虚拟机上运行安装/测试过程的大批处理文件怎么样？

# tesseract - Tesseract 中每个区域的不同字符集白名单

> ID：15759498
> 
> 赞同：0
> 
> 时间：2013-04-02T08:34:38.087
> 
> 标签：tesseract

Tesseract 支持指定字符集白名单和黑名单，还支持使用 UNVL 的 UZN 文件格式指定区域。

但是，我现在需要扫描一个包含 2 个区域的文档，一个仅包含数字，一个包含普通文本。我可以在**不执行 Tesseract 两次**的情况下为 2 个区域指定不同的字符集吗？

如果没有，我可能会尝试修改`UNICHARSET`类的代码以某种方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:37:25.750

我终于通过使用 Base API 中的 SetImage()/SetRectangle() 做到了。对于每个矩形，我运行以下代码：

```
 api.SetRectangle(left, top, width, height);
    api.SetVariable("tessedit_char_whitelist", whitelist.c_str());
    char *s = api.GetUTF8Text();
    printf("%s", s);
    delete s; 
```

# ios - 使用 UIPageControl 和子 ViewController 进行内存管理

> ID：15759501
> 
> 赞同：0
> 
> 时间：2013-04-02T08:34:48.573
> 
> 标签：ios, objective-c, memory-management

在我的项目中，我使用本教程`addChildViewControllers`：[http](http://www.wannabegeek.com/?p=168) ://www.wannabegeek.com/?p=168在本教程中，情节提要上只有 3 个视图控制器。在我的项目（ARC）中，我得到了更多的视图控制器，而且我还不止一次地添加了一些在情节提要上的视图控制器。例如：

```
 [self addChildViewController:firstViewController];
  [self addChildViewController:firstViewController];
  [self addChildViewController:firstViewController];
  [self addChildViewController:secondViewController];
  [self addChildViewController:secondViewController];
  [self addChildViewController:thirdViewController]; 
```

问题是这会占用大量内存，因为它们都已加载。我的问题是如何减少这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:19:29.657

看完教程后，我有一个更好的建议给你：使用[`UIPageViewController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html). 它完全满足您的需求，并且使用 dataSource 协议，因此您不必将所有视图控制器都保存在内存中。我很确定这就是你想要的。除非您有充分的理由这样做，否则不要滚动您自己的页面视图控制器。

[WWDC 2011 Session 102](https://developer.apple.com/videos/wwdc/2011/?id=102)会给你一个很好的介绍`UIPageViewController`和容器视图控制器。

# java - Android - 获取支持的语言环境列表

> ID：15759507
> 
> 赞同：5
> 
> 时间：2013-04-02T08:34:58.850
> 
> 标签：java, android, locale

我必须实现`AutoComplete TextView`所有支持`locales`的 Android 设备。我尝试了以下方法：

```
 public class AutoCompleteView extends Activity{

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_dropdown_item_1line, Locales);
    AutoCompleteTextView textView = (AutoCompleteTextView)
            findViewById(R.id.locale_list);
    textView.setAdapter(adapter);
}
static Locale[] locales = Locale.getAvailableLocales();
private static final String[] Locales = ;
} 
```

我能够使用`Locale[]`. 在最后一行代码中，如何将其解析为`String[] Locales`..请朋友们帮帮我....

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T09:39:10.427

抱歉回复晚了

试试这个

```
 Locale[] locales = Locale.getAvailableLocales();
            ArrayList<String> localcountries=new ArrayList<String>();
            for(Locale l:locales)
            {
                localcountries.add(l.getDisplayLanguage().toString());
            }
    String[] languages=(String[]) localcountries.toArray(new String[localcountries.size()]); 
```

我希望这能帮到您。

# asp.net-mvc - 从 DropDownList 中获取值，在 ActionLink (ASP.NET MVC4) 中使用

> ID：15759513
> 
> 赞同：4
> 
> 时间：2013-04-02T08:35:17.350
> 
> 标签：asp.net-mvc, actionlink, html-select

我的视图中有这个：

```
@Html.DropDownList("dropBox", (List<SelectListItem>)ViewBag.SelectedListItems) 
```

我想从 dropBox 中获取选定的值并将其发布回控制器，如下所示：

```
@Html.ActionLink("Add","AddAction", "AddController", new {@accessID = *here*}) 
```

*这*是我只想添加“dropBox”.SelectedValue 的地方，但我该怎么做呢？

我还能如何回发 dropBox 的 SelectedValue？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:59:55.477

actionlink 助手在服务器端呈现，下拉列表的值由用户在客户端选择

所以你可以做的是这样的：

```
 <a id='badd'>add</a>
        <script>
         $('#badd').click(function(e){
             e.preventDefault();
             window.location.replace = 
    '<%=Url.Action("Add","AddAction", "AddController")%>' + '?accessID='+ $('#dropBox').val();
             });
        </script> 
```

# c++ - C++ 模板类给出没有明显错误的语法错误

> ID：15759516
> 
> 赞同：0
> 
> 时间：2013-04-02T08:35:32.717
> 
> 标签：c++, templates, syntax-error, doubly-linked-list

我为双向链表编写了一个“节点”模板类。

头文件：

```
template< class T >
class Node
{
public:
    Node();
    ~Node();

    Node<T>* GetNext();
    Node<T>* GetPrev();

    void SetNext( Node<T>* pNode );
    void SetPrev( Node<T>* pNode );

    void SetData( T& data );
    T*  GetData();

private:
    Node<T>*    p_Next;
    Node<T>*    p_Prev;
    T*      p_Data; 
};

template< class T >
Node<T>::Node() : p_Next(NULL), p_Prev(NULL), p_Data(NULL)
{

}

//======================================================================================

template< class T >
Node<T>::~Node()
{
    if( p_Data != NULL)
        delete p_Data;

    p_Next = NULL;
    p_Prev = NULL;
}

//======================================================================================

template< class T >
Node<T>* Node<T>::GetNext()
{
    return p_Next;
}

//======================================================================================

template< class T >
Node<T>* Node<T>::GetPrev()
{
    return p_Prev;
}

//======================================================================================

template< class T >
void Node<T>::SetData( T& data )
{
    if(p_Data == NULL)
        p_Data = new T;

    *p_Data = data;
}

//======================================================================================

template< class T >
T*  Node<T>::GetData()
{
    return p_Data;
} 
```

当我尝试编译它时，Visual Studio 在具有构造函数实现的行中给出了以下语法错误。

```
error C2143: syntax error : missing ';' before '<'
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
error C2988: unrecognizable template declaration/definition
error C2059: syntax error : '<'
error C2588: '::~Node' : illegal global destructor
fatal error C1903: unable to recover from previous error(s); stopping compilation 
```

如上所述，我无法识别任何语法错误。请帮助我，我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:58:55.233

看起来您还没有为 NULL 包含一些定义。

请考虑`nullptr`改用。在 VS2010 中，您可能需要为此添加定义，但是当更改为完全兼容 C++11 的编译器时，您将使用为此目的而设计的 C++ 关键字。

# mysql - 查找接近距离 GPS

> ID：15759518
> 
> 赞同：0
> 
> 时间：2013-04-02T08:35:39.240
> 
> 标签：mysql, gps, request, location, coordinates

我有一个包含 GPS 坐标纬度和经度的 mysql 表。

我想请求获取给定位置附近的记录。

我已经尝试了 2 个请求并合并了结果，但它不正确......

```
//Req 1 - bigger than my position 
$req1 = mysql_query('SELECT * FROM table WHERE latitude >= 47.6621549 and longitude >= 2.3547128 ORDER BY latitude, longitude');

 //Req 2 - samller than my position 
$req2 = mysql_query('SELECT * FROM table WHERE latitude <= 47.6621549 and longitude <= 2.3547128 ORDER BY latitude, longitude'); 
```

是否可以通过一个请求来实现？有了这个，我想用gmap距离API检索到给定位置的距离，我认为这不是问题......

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:43:33.820

尝试这个。

```
$range = 2;/* 2 mi */   
mysql_query("SELECT t1.*,
    (
        3956 * 2 * 
        ASIN(
            SQRT(
                POWER(SIN(($lat - t1.latitude) * pi()/180 / 2), 2) 
                + COS($lat * pi()/180) * COS(t1.latitude * pi()/180) 
                * POWER(SIN(($lng - t1.longitude) * pi()/180 / 2), 2)
            )
        )
    ) AS distance 
    FROM table
    HAVING distance < $range
    ORDER BY distance ASC"); 
```

# java - Java - 解析行

> ID：15759520
> 
> 赞同：3
> 
> 时间：2013-04-02T08:35:43.733
> 
> 标签：java, file, parsing

从文件中解析这些行的最佳做法是什么？

```
files       txt 50     // first gab are spaces, the second is tabulator
files       bmp 9979
files       all 2063
score       scr 656
index       ind 0.0779
index       ind 0.0213 
```

我只需要获取值（`50, 9979`等）才能将它们保存到 CSV 文件（但这不是这个问题的一部分）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T08:38:25.137

您可以拆分`\s+`并访问返回数组的最后一个单元格。

```
for (String line : lines) {
    String[] data = line.split("\\s+");
    String lastEntry = data[data.length - 1];
    // lastEntry contains what you're looking for
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T08:40:42.340

这是你想要的吗？

```
BufferedReader br = new BufferedReader(new FileReader(file));
String line;
while ((line = br.readLine()) != null) {
   String val = line.split("\\s+")[2];
   //do something with val

}
br.close(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T08:38:17.090

这看起来像典型的平面文件。要读取数字，您只需将光标移动到感兴趣点的每一行并读取您需要的所有字符。

对于您的情况，您应该从 16 开始并阅读到行尾。

```
1234567890123456
files       txt 50     
files       bmp 9979
files       all 2063
score       scr 656
index       ind 0.0779
index       ind 0.0213 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T08:38:20.700

使用 a 读取每一行，`FileReader`然后拆分`String`by 空格并检索第三个索引。

```
String value =line.split("\\s+")[2]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T08:37:38.770

读取行，遍历它们并使用正则表达式拆分行并获取值。就是这样。

# symfony - Swiftmailer 不使用一个域发送电子邮件 Symfony2

> ID：15759524
> 
> 赞同：0
> 
> 时间：2013-04-02T08:36:14.153
> 
> 标签：symfony, swiftmailer

我正在将一些邮件配置到我的 Symfony2 项目中，但遇到了一些麻烦。

如果我使用我公司的一个电子邮件域，Swiftmailer 什么也不做，它说邮件已发送（send() 方法返回 > 0）但我什么也没收到。

如果我将其配置为从 gmail 地址发送，则它可以正常工作；如果我将其配置为从我的另一个域发送，它也可以。

什么可能导致这个问题？

谢谢。

# c# - 来自另一个程序集的 WPF DataTemplate

> ID：15759529
> 
> 赞同：1
> 
> 时间：2013-04-02T08:36:41.057
> 
> 标签：c#, wpf, xaml

是否可以引用位于 DataTemplateSelector 的另一个程序集中的 DataTemplate。

目前我有这样的事情：

```
public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        var element = container as FrameworkElement;

        if (element != null && item != null && item is BrowserBaseViewModel)
        {
            return element.FindResource("BrowserDataTemplate") as DataTemplate;
        }
        return null;
    } 
```

但它仅适用于当前程序集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T08:42:57.287

当然，在您`app.xaml`的 ResourceDictionary 中写入“包含”，以便可以在您的应用程序中找到该词典。

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/MyOtherAssembly;component/MyAssemblyXaml.xaml" /> 
```

现在将找到您的数据模板，因为资源查找将查看 app.xaml 资源，并找到您引用的 xaml。

# c# - 使用 While 条件执行存储过程时出错

> ID：15759534
> 
> 赞同：0
> 
> 时间：2013-04-02T08:36:59.347
> 
> 标签：c#

```
 SqlConnection sqlConn = new SqlConnection(MyClass.GlobalConn());
        sqlConn.Open();

        try
        {
            string getAllBranch = "SELECT iBranch_num,LTRIM(RTRIM(sConstant)) FROM tblgobranch";
            SqlCommand cmdgetAllBranch = new SqlCommand(getAllBranch, sqlConn);
            SqlDataReader dRgetAllBranch=cmdgetAllBranch.ExecuteReader();

            while (dRgetAllBranch.Read())
            {

                SqlCommand cmd = new SqlCommand("dbo.rvk_GetSalesPerItem", sqlConn);
                cmd.CommandType = CommandType.StoredProcedure;

                cmd.Parameters.Add("@piDateFrom", SqlDbType.Int).Value = FromDT1;
                cmd.Parameters.Add("@piDateThru", SqlDbType.Int).Value = ToDT2;
                cmd.Parameters.Add("@BRANCH", SqlDbType.NVarChar).Value = dRgetAllBranch[1].ToString();
                cmd.Parameters.Add("@brNum", SqlDbType.Int).Value = dRgetAllBranch[0].ToString();
                cmd.Parameters.Add("@PluCode", SqlDbType.NVarChar).Value = str1;
                cmd.ExecuteNonQuery();

            } 
```

我在这里出错了

> *“已打开与此命令关联的数据读取器”*

请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:39:52.290

`SqlDataReader dRgetAllBranch=cmdgetAllBranch.ExecuteReader();`当您尝试在同一连接上执行存储过程时，您当前正在打开的连接 ( ) 上执行读取器。这就是错误的原因。

`while`在你的循环中试试这个

```
SqlConnection sqlConnStoredProc = new SqlConnection(MyClass.GlobalConn());
sqlConnStoredProc.Open();

SqlCommand cmd = new SqlCommand("dbo.rvk_GetSalesPerItem", sqlConnStoredProc);
cmd.CommandType = CommandType.StoredProcedure;

cmd.Parameters.Add("@piDateFrom", SqlDbType.Int).Value = FromDT1;
cmd.Parameters.Add("@piDateThru", SqlDbType.Int).Value = ToDT2;
cmd.Parameters.Add("@BRANCH", SqlDbType.NVarChar).Value = dRgetAllBranch[1].ToString();
cmd.Parameters.Add("@brNum", SqlDbType.Int).Value = dRgetAllBranch[0].ToString();
cmd.Parameters.Add("@PluCode", SqlDbType.NVarChar).Value = str1;
cmd.ExecuteNonQuery();

sqlConnStoredProc.Close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:42:44.253

在使用阅读器时，您必须使用新的连接对象来执行另一个命令。

```
 SqlConnection sqlConn = new SqlConnection(MyClass.GlobalConn());
    sqlConn.Open();

    try
    {
        string getAllBranch = "SELECT iBranch_num,LTRIM(RTRIM(sConstant)) FROM tblgobranch";
        SqlCommand cmdgetAllBranch = new SqlCommand(getAllBranch, sqlConn);
        SqlDataReader dRgetAllBranch=cmdgetAllBranch.ExecuteReader();

        while (dRgetAllBranch.Read())
        {
            using(var con = new SqlConnection(MyClass.GlobalConn()))
            {

            con.Open();

            SqlCommand cmd = new SqlCommand("dbo.rvk_GetSalesPerItem", con);
            cmd.CommandType = CommandType.StoredProcedure;

            cmd.Parameters.Add("@piDateFrom", SqlDbType.Int).Value = FromDT1;
            cmd.Parameters.Add("@piDateThru", SqlDbType.Int).Value = ToDT2;
            cmd.Parameters.Add("@BRANCH", SqlDbType.NVarChar).Value = dRgetAllBranch[1].ToString();
            cmd.Parameters.Add("@brNum", SqlDbType.Int).Value = dRgetAllBranch[0].ToString();
            cmd.Parameters.Add("@PluCode", SqlDbType.NVarChar).Value = str1;
            cmd.ExecuteNonQuery();

            }

        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:43:24.607

我认为您需要循环中的开放连接

```
while (dRgetAllBranch.Read())
        {

            SqlCommand cmd = new SqlCommand("dbo.rvk_GetSalesPerItem", sqlConn);
            cmd.Connection.Open();  //Open
            cmd.CommandType = CommandType.StoredProcedure;

            cmd.Parameters.Add("@piDateFrom", SqlDbType.Int).Value = FromDT1;
            cmd.Parameters.Add("@piDateThru", SqlDbType.Int).Value = ToDT2;
            cmd.Parameters.Add("@BRANCH", SqlDbType.NVarChar).Value = dRgetAllBranch[1].ToString();
            cmd.Parameters.Add("@brNum", SqlDbType.Int).Value = dRgetAllBranch[0].ToString();
            cmd.Parameters.Add("@PluCode", SqlDbType.NVarChar).Value = str1;
            cmd.ExecuteNonQuery();
            cmd.Connection.Close();  //Close
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:46:56.777

您只能使用一个 SqlCommand。在while循环之前打开，在循环之后关闭。

```
SqlConnection sqlConn = new SqlConnection(MyClass.GlobalConn());
    sqlConn.Open();

    try
    {
        string getAllBranch = "SELECT iBranch_num,LTRIM(RTRIM(sConstant)) FROM tblgobranch";
        SqlCommand cmdgetAllBranch = new SqlCommand(getAllBranch, sqlConn);
        SqlDataReader dRgetAllBranch=cmdgetAllBranch.ExecuteReader();

        SqlCommand cmd = new SqlCommand("dbo.rvk_GetSalesPerItem", sqlConn);
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Connection.Open();//open one time
        while (dRgetAllBranch.Read())
        {                
            cmd.parameters.Cler();//clear old parameter and add new
            cmd.Parameters.Add("@piDateFrom", SqlDbType.Int).Value = FromDT1;
            cmd.Parameters.Add("@piDateThru", SqlDbType.Int).Value = ToDT2;
            cmd.Parameters.Add("@BRANCH", SqlDbType.NVarChar).Value = dRgetAllBranch[1].ToString();
            cmd.Parameters.Add("@brNum", SqlDbType.Int).Value = dRgetAllBranch[0].ToString();
            cmd.Parameters.Add("@PluCode", SqlDbType.NVarChar).Value = str1;
            cmd.ExecuteNonQuery();

        }
        cmd.Connection.Close();//open one time 
```

# android - 开始活动需要很长时间

> ID：15759540
> 
> 赞同：0
> 
> 时间：2013-04-02T08:37:25.560
> 
> 标签：android, web-services, dynamic, android-asynctask

调用意图后，启动活动需要很长时间，并且应用程序是动态应用程序。我正在连接到服务器并从服务器检索信息。我希望立即开始活动，但我尝试了`AsyncTask`但没有任何结果。

**MainActivity.java**

```
public class MainActivity extends Activity {
    private ArrayList<Data> arraydata;
    private Data data;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Handler handler=new Handler();
        handler.postDelayed(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                //finish();
                new ShowDialogAsyncTask().execute();
                /*Intent i=new Intent(MainActivity.this,XMLParsingActivity.class);
                startActivity(i);*/
            }

        },3000);
    }
    private class ShowDialogAsyncTask extends AsyncTask<Void, Integer, Void>{

       int progress_status;
         TextView txt_percentage=new TextView(MainActivity.this);
        protected void onPreExecute() {
               // update the UI immediately after the task is executed
               super.onPreExecute();
               Toast.makeText(MainActivity.this, "Loading.....", Toast.LENGTH_LONG).show();

              //  Intent i=new Intent(MainActivity.this,XMLParsingActivity.class);
                //MainActivity.this.startActivity(i);

                progress_status = 0;
                txt_percentage.setText("downloading 0%");

              }
    @Override
    protected Void doInBackground(Void... arg0) {
        // TODO Auto-generated method stub
        Intent i=new Intent(MainActivity.this,XMLParsingActivity.class);
        startActivity(i);

          /* while(progress_status<100){

                progress_status += 5;

                publishProgress(progress_status);
                SystemClock.sleep(200);

               }*/
           //Intent i=new Intent(MainActivity.this,XMLParsingActivity.class);
            //startActivity(i);
return null;

    }
    @Override
      protected void onProgressUpdate(Integer... values) {
       super.onProgressUpdate(values);
        ProgressBar progressBar=new ProgressBar(MainActivity.this);
       progressBar.setProgress(values[0]);
       txt_percentage.setText("downloading " +values[0]+"%");

      }
    @Override
      protected void onPostExecute(Void result) {
       super.onPostExecute(result);
      /* Toast.makeText(MainActivity.this, "Loading.....", Toast.LENGTH_LONG).show();
        txt_percentage.setText("download complete");
        Intent i=new Intent(MainActivity.this,XMLParsingActivity.class);
        MainActivity.this.startActivity(i);*/

      }

    }

} 
```

从我想移动到的主要活动中`XMLParsingActivity`，它由`ListViews`从服务器检索到的 xml 数据组成。在 XMLParsingActivity 我使用了动态信息。

**XMLParsingActivity.java**

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home);
        //mCustomView = getLayoutInflater().inflate(R.layout.home, null);

        //final ActionBar bar = getActionBar();
        //bar.setCustomView(mCustomView, new ActionBar.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        //arraydata=getIntent().getParcelableExtra("ary");
        listview=(ListView)findViewById(R.id.lv);
        arraydata =new ArrayList<Data>();
         Uri="http://vegaentertain.com/android/list.xml";
          // Toast.makeText(this, "Loading List.....", Toast.LENGTH_LONG).show();

        new ShowDialogAsyncTask().execute();
}

    private class ShowDialogAsyncTask extends AsyncTask<Void, Integer, Void>{

           int progress_status;
            protected void onPreExecute() {
                   // update the UI immediately after the task is executed
                   super.onPreExecute();
                  // ProgressBar bar=new ProgressBar(XMLParsingActivity.this);
                 //  bar.setVisibility(View.GONE);
                  Toast.makeText(XMLParsingActivity.this, "Loading List.....", Toast.LENGTH_LONG).show();
                  }
        @Override
        protected Void doInBackground(Void... arg0) {
            // TODO Auto-generated method stub
             XMLParser parser=new XMLParser();

                String xml=parser.getXmlFromUri(Uri);
                Document doc=parser.getDomElement(xml);
                NodeList nodes=doc.getElementsByTagName("actress");

                for(int i=0;i<nodes.getLength();i++){
                    data=new Data();
                    Element e=(Element)nodes.item(i);
                    data.setName(parser.getValue(e,"name"));
                    data.setDate(parser.getValue(e,"date"));
                    data.setImageurl(parser.getValue(e,"image-url"));
                    arraydata.add(data);
                }

    return null;

        }
        @Override
          protected void onProgressUpdate(Integer... values) {
           super.onProgressUpdate(values);

          }
        @Override
          protected void onPostExecute(Void result) {
           super.onPostExecute(result);
            listview.setAdapter(new CustomAdapter(arraydata,XMLParsingActivity.this));
            listview.setOnItemClickListener(new OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                        long arg3) {
                    // TODO Auto-generated method stub
                    new ShowAsyncTask(arg2).execute();

                }
            });

          }
        private class ShowAsyncTask extends AsyncTask<Void, Integer, Void>{
            int pos;
            public ShowAsyncTask(int arg2) {
                // TODO Auto-generated constructor stub
                pos=arg2;
            }
            protected void onPreExecute() {
                   // update the UI immediately after the task is executed
                   super.onPreExecute();

                     connectionProgressDialog = new ProgressDialog(XMLParsingActivity.this);
                    connectionProgressDialog.setCancelable(true);
                    connectionProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
                    connectionProgressDialog.setMessage("Connecting to Server...");
                    connectionProgressDialog.show();
                    }

            @Override
            protected Void doInBackground(Void... params) {
                // TODO Auto-generated method stub

                return null;
            }
             protected void onProgressUpdate(Integer... values) {
                   super.onProgressUpdate(values);
                    connectionProgressDialog.dismiss();
                   // downloadSpinnerProgressDialog.show();
                }
            @Override
            protected void onPostExecute(Void result) {
                // TODO Auto-generated method stub
                super.onPostExecute(result);
                Intent i=new Intent(XMLParsingActivity.this,List.class);
                i.putExtra("pos",pos);
                XMLParsingActivity.this.startActivity(i);
            }

        }
        }

        } 
```

可以给我一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:26:35.953

1.  MainActivity.java 中不需要 AsyncTask。（注意：你不能从 AsyncTask() 的 doInbackground 调用意图）。通过查看您的代码，我相信它只是一个闪屏。在这种情况下，请使用以下内容：

    ```
    @Override
    protected void onStart() {

    super.onStart();

     Handler handler = new Handler();

        // run a thread after 2 seconds to start the home screen
        handler.postDelayed(new Runnable() {

            @Override
            public void run() {

                   //code written here will execute after 2000ms(2 seconds)
                   // write your intent to move from MainActivity.this to XMLParsingActivity.class

        }, 2000); 
      }
    } 
    ```

2.  这需要时间，因为您调用了“new ShowDialogAsyncTask().execute();” 在 XMLParsingActivity 类的 onCreate() 方法中。由于它需要向服务器发送请求、获取响应、解析和更新 UI，因此显然需要时间。

3.  您可以做的是，在 onStart() 方法中调用该 AsyncTask 。最初显示一个 ProgressDialog 以让用户知道某事正在进行中。最后在 onPostExecute() 中，只需将 ProgressBar 的可见性设置为 GONE 并使内容的可见性可见。

# silverlight - 实现 MVVM 的文本框的鼠标悬停事件上的 MessageBox

> ID：15759542
> 
> 赞同：0
> 
> 时间：2013-04-02T08:37:28.247
> 
> 标签：silverlight, mvvm

我是 Silverlight 中 MVVM 的新手。

在实现 MVVM 时，如何在文本框的鼠标悬停事件上显示文本框。由于没有附加命令属性，因此我可以绑定到某些操作，就像在 Button 控件中一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:09:53.023

您可以使用交互来使命令在任何类型的事件上执行：

```
<i:Interaction.Triggers>
   <i:EventTrigger EventName="MouseHover">
     <i:InvokeCommandAction Command="{Binding ShowTextBoxCommand}">
     </i:InvokeCommandAction>
   </i:EventTrigger>
</i:Interaction.Triggers> 
```

但首先您需要在 UserControl 中声明名称空间，如下所示：

```
xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 
```

并且您需要安装表达式混合 sdk 和项目中引用的程序集。

这是一篇很好的文章，它帮助我开始在 UI 端使用带有事件的 MVVM：

[http://www.codeproject.com/Articles/204567/Using-Microsoft-Expression-Blend-4-0-to-Implement](http://www.codeproject.com/Articles/204567/Using-Microsoft-Expression-Blend-4-0-to-Implement)

# java - 使用登录表单身份验证时 PrimeFaces 不呈现

> ID：15759543
> 
> 赞同：1
> 
> 时间：2013-04-02T08:37:28.857
> 
> 标签：java, jsf, authentication, primefaces, glassfish

我正在尝试在我的应用程序中创建一个登录名。我正在使用 PrimeFaces 和 Oracle Glassfish 3.1.2。我在 Glassfish 服务器上的文件领域内创建了一个用户。并使用表单选择身份验证。这是代码：

**登录页面：**

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui" 
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:head>
        <title>Test</title>
    </h:head>
    <h:body>    
            <p:panel header="Prihlásenie" style="width: 300px; margin-left: auto; margin-right: auto;">
                <form method="POST" action="j_security_check">
                    <h:panelGrid columns="2" id="logingrid" style="width: 100%;">

                        <h:outputLabel for="j_username" value="Meno:" />
                        <p:inputText id="j_username" required="true" label="j_username" style="width: 100%;"/>

                        <h:outputLabel for="j_password" value="Heslo:" />   
                        <p:password id="j_password" label="Heslo" required="true" style="width: 100%;"/>

                        <f:facet name="footer">
                            <h:commandButton type="submit" value="Prihlás" style="width: 100%"/>
                        </f:facet>
                    </h:panelGrid>
                </form>
            </p:panel>
    </h:body>
</html> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/secure/temy.xhtml</welcome-file>
    </welcome-file-list>
    <security-constraint>
        <display-name>Sec</display-name>
        <web-resource-collection>
            <web-resource-name>Secure</web-resource-name>
            <description/>
            <url-pattern>/faces/secure/*</url-pattern>
            <http-method>GET</http-method>
            <http-method>PUT</http-method>
            <http-method>HEAD</http-method>
            <http-method>POST</http-method>
            <http-method>OPTIONS</http-method>
            <http-method>TRACE</http-method>
            <http-method>DELETE</http-method>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>spravcovia</role-name>
        </auth-constraint>
        <user-data-constraint>
            <description/>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint>
    <security-constraint>
        <display-name>Pub</display-name>
        <web-resource-collection>
            <web-resource-name>Public</web-resource-name>
            <description/>
            <url-pattern>*.css</url-pattern>
            <url-pattern>*.jpg</url-pattern>
            <url-pattern>*.gif</url-pattern>
            <url-pattern>/error.xhtml</url-pattern>
            <url-pattern>/login.xhtml</url-pattern>
            <http-method>GET</http-method>
            <http-method>PUT</http-method>
            <http-method>HEAD</http-method>
            <http-method>POST</http-method>
            <http-method>OPTIONS</http-method>
            <http-method>TRACE</http-method>
            <http-method>DELETE</http-method>
        </web-resource-collection>
        <user-data-constraint>
            <description/>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint>
    <login-config>
        <auth-method>FORM</auth-method>
        <realm-name>dbrealm</realm-name>
        <form-login-config>
            <form-login-page>/login.xhtml</form-login-page>
            <form-error-page>/error.xhtml</form-error-page>
        </form-login-config>
    </login-config>
    <security-role>
        <description/>
        <role-name>spravcovia</role-name>
    </security-role>
</web-app> 
```

**glassfish-web.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">
  <security-role-mapping>
    <role-name>spravcovia</role-name>
    <group-name>spravcovia</group-name>
  </security-role-mapping>
  <class-loader delegate="true"/>
  <jsp-config>
    <property name="keepgenerated" value="true">
      <description>Keep a copy of the generated servlet class' java code.</description>
    </property>
  </jsp-config>
</glassfish-web-app> 
```

事实是，当我不使用 Primefaces 标签或 jsf 标签进行输入时，只有这种输入，它工作正常：

```
Username: <input type='text' name='j_username' />
Password: <input type='password' name='j_password' /> 
```

我想如果通过阻止/ *我没有阻止使用primefaces，但我不知道如何启用它。

**更新：** 我已经更新了 web.xml 和 glassfish-web.xml 。这也是我的项目目录（NetBeans）。在 WEB-INF 中只有 glassfish-web.xml 和 web.xml：

![项目目录结构](https://i.stack.imgur.com/u4hcY.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T08:48:01.367

您的问题是当用户未登录时您正在阻止所有资源，即使用户未登录，您也应该让 CSS、JavaScript... 等资源得到处理。为此，请在 web.xml 中添加此部分：

```
<security-constraint>
  <web-resource-collection>
    <web-resource-name>Public</web-resource-name>
    <url-pattern>*.css</url-pattern>
    <url-pattern>*.jpg</url-pattern>
    <url-pattern>*.gif</url-pattern>
    <url-pattern>/javax.faces.resource/*</url-pattern>
  </web-resource-collection>
</security-constraint> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-13T19:48:22.470

也许这篇文章可以帮助你

[使用 j_security_check 在 Java EE / JSF 中执行用户身份验证](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0)

看看 BalusC 的答案。祝你好运。

# c# - 使用方法并将用户输入放入数组

> ID：15759545
> 
> 赞同：0
> 
> 时间：2013-04-02T08:37:29.787
> 
> 标签：c#

我正在尝试创建一个程序，该程序使用方法和数组来获取用户输入并显示 min、max、ave 和 total。我创建了从用户输入返回最小值、最大值、总计和平均值的方法。该代码让我获得用户输入但不会显示。我做错了什么？这就是我所拥有的。

```
class Program
 {
   const int SIZE = 6;
   static void Main(string[] args)

{

     double min = 0.0;
      double max = 0.0;
      double ave = 0.0;
      double total = 0.0;
      double[] numbers = new double[SIZE];

  getInput(numbers);
  calcmin(numbers, ref min);
  calcmax(numbers, ref max);
  calcTotal(numbers, ref total);
  calcave(numbers, ref ave, ref total);
  printResult(numbers, ref min, ref max, ref ave, ref total);

  }//v

  static void calcave(double[] numbers, ref double ave, ref double total)

  {
    int sub = 0;
    while (sub < numbers.Length)

  {
     ave = total / numbers.Length;

  }
     sub++;

  }//end while

 static void calcTotal(double[] numbers, ref double total)

 {
   int sub = 0;
   while (sub < numbers.Length)

 {
    total = numbers[sub] + total ;

 }
   sub++

 }//end while

 static void calcmax(double[] numbers, ref double max)

 {
  int sub = 0;
  max = numbers[0];
  while (sub < numbers.Length)

   if (numbers[sub] > max)

 {
    numbers[sub] = max;

}//end if

 sub++;

 }//end while

  static void calcmin(double[] numbers, ref double min)

 {
  int sub = 0;
  min = numbers[0];
  while (sub < numbers.Length)

  if (numbers[sub] < min)
  {
     numbers[sub] = min;

  }//end if

   sub++;

 }//end while

 static void getInput(double[] numbers)

 {
   int sub = 0;
   for (sub = 0; sub < numbers.Length; sub++)

   {
      Console.WriteLine("Enter number {0}",sub + 1);

       while (!double.TryParse(Console.ReadLine(), out numbers[sub]))

       Console.WriteLine("Please try again.");

 }//End write lines

    }//end while

 static void printResult(double[] numbers, ref double min, ref double max, ref double ave, ref double total)

  {

     Console.WriteLine("The smallest number is {0}.", min);

     Console.WriteLine("the largest number is {0}.", max);

     Console.WriteLine("the total is {0}.", total);

     Console.WriteLine("The average is {0}.", ave);

}//end write lines for out put of Minimum, Maximum, Total, and Average.
     }
   }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:42:14.800

在您的`calcmin`方法中，您不会增加`s`循环中的值。所以循环永远不会结束。将其更改为：

```
static void calcmin(double[] numbers, ref double min)
{
    int sub = 0;
    min = numbers[0];
    while (sub < numbers.Length)
    {
        if (numbers[sub] < min)
        {
            numbers[sub] = min;
        }

        sub++;
    }
 } 
```

中的相同错误`calmax`。你的总数应该是这样的：

```
static void calcTotal(double[] numbers, ref double total)
{
    int sub = 0;
    while (sub < numbers.Length)
    {
            total = numbers[sub] + total;
            sub++;     //IT MUST BE HERE
    }  
    //sub++;           //NOT HERE
} 
```

和同样的错误`calcave`。

**编辑：**寻找差异。这是完整的代码。

```
class Program
{
    const int SIZE = 6;
    static void Main(string[] args)
    {
        double min = 0.0;
        double max = 0.0;
        double ave = 0.0;
        double total = 0.0;
        double[] numbers = new double[SIZE];

        getInput(numbers);
        calcmin(numbers, ref min);
        calcmax(numbers, ref max);
        calcTotal(numbers, ref total);
        calcave(numbers, ref ave,  total);
        printResult(numbers, ref min, ref max, ref ave, ref total);

        Console.ReadLine();
    }

    static void calcave(double[] numbers, ref double ave,  double total)
    {
        ave = total / numbers.Length;
    }

    static void calcTotal(double[] numbers, ref double total)
    {

        int sub = 0;
        while (sub < numbers.Length)
        {
            total = numbers[sub] + total;
            sub++;
        }
    }

    static void calcmax(double[] numbers, ref double max)
    {
        int sub = 0;
        max = numbers[0];
        while (sub < numbers.Length)
        {
            if (numbers[sub] > max)
            {
                max = numbers[sub];  //HERE
            }
            sub++;
        }
    }

    static void calcmin(double[] numbers, ref double min)
    {
        int sub = 0;
        min = numbers[0];
        while (sub < numbers.Length)
        {
            if (numbers[sub] < min)
            {
                min = numbers[sub];  //HERE
            }

            sub++;
        }
    }

    static void getInput(double[] numbers)
    {
        int sub = 0;
        for (sub = 0; sub < numbers.Length; sub++)
        {
            Console.WriteLine("Enter number {0}", sub + 1);

            while (!double.TryParse(Console.ReadLine(), out numbers[sub]))
                Console.WriteLine("Please try again.");
        }
    }

    static void printResult(double[] numbers, ref double min, ref double max, ref double ave, ref double total)
    {

        Console.WriteLine("The smallest number is {0}.", min);

        Console.WriteLine("the largest number is {0}.", max);

        Console.WriteLine("the total is {0}.", total);

        Console.WriteLine("The average is {0}.", ave);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:51:37.860

您的程序中有几个错误。

在不是里面的`calcmin`声明。这样，循环将永远不会结束。另一个问题是您在方法中的逻辑。此方法用最小值替换数组中的所有值。在此方法之后，您的整个数组具有相同的值。`sub++``while``while``calcmin``numbers`

`calcmax`您的方法也是如此。`sub++`在您的 while 循环之外，您正在用最大值（等于前一种方法之后的最小值）替换所有值。

`calctotal`有循环的`sub++`外部。`while`

calcave 只需要总数和项数来计算平均值。我不明白你为什么使用`while`循环（`sub++`在循环之外）。

您应该阅读[语句块](http://msdn.microsoft.com/en-us/library/ms173143.aspx)以了解如何`sub++`在 while 循环内移动。

# c++ - 何时将“class_name obj_name = func()”替换为“class_name obj_name{func()}”有意义？

> ID：15759546
> 
> 赞同：5
> 
> 时间：2013-04-02T08:37:31.983
> 
> 标签：c++, assign, initializer-list

在代码中，我看到以下构造：

```
const class_name obj_name{func()}; 
```

func() 返回一个名为 的类的对象`class_name`。所以，我想知道为什么不使用以下结构：

```
const class_name obj_name = func(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T08:42:13.643

```
const class_name obj_name{func()}; 
```

写到上面，作者试图遵循*统一的初始化语法*（由 C++11 引入），以避免因*vexing parse*和*most vexing parse*引起的问题，即使是有经验的程序员也会误入陷阱。他正试图将最佳实践灌输到他的大脑中，这样他就不会偶尔陷入上述解析问题，如下所述。

考虑到这一点，

```
struct X { /*....*/ }; // some class

struct Y 
{
    Y();
    Y(int i);
    Y(X x);
}; 
```

现在可以这样写：

```
Y y(100); // declare an object y of type Y 
```

调用第二个构造函数，这很好。到目前为止，一切顺利！

但不小心有人写了这个：

```
Y y(); 
```

（错误地）认为它调用了默认构造函数。但事实是它不会调用默认构造函数。相反，它声明了一个`y`不带参数的函数，并返回`Y`. 这在 C++中称为**vexing parse 。**

同样，一个人可以写这个（意外地），

```
Y y(X()); 
```

认为它调用第三个构造函数传递一个动态`X`创建的类型的对象。再次，这是错误的。相反，它声明了一个函数，该函数`y`接受一个函数指针（类型为函数，不接受任何内容并返回`X`）并返回`Y`。它被称为C++ 中**最令人头疼的解析**。

所以统一的初始化语法避免了所有这些问题，你可以这样写：

```
Y y1{};      // invokes 1st constructor
Y y2{100};   // invokes 2nd constructor
Y y3{X{}};   // invokes 3rd constructor 
```

并遵循相同的语法，

```
Y { function_call() }; 

const class_name obj_name { func() }; // taken from your question! 
```

这是*统一*的，当然也是最佳实践，不是吗？

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:39:43.230

从 C++11 开始，引入了[统一初始化](http://en.wikipedia.org/wiki/C%2B%2B11#Uniform_initialization)特性，它提供了几种初始化类型的方法。

在这种情况下，两种语法都会调用`class_name(class_name const&)`复制构造函数（如果存在的话）。因此没有真正的区别。这只是一个偏好问题。

请注意，`{}`在这种情况下，语法并不总是如此：如果存在适当类型的 initialization_list 构造函数，则使用该构造函数，**否则**使用适当的构造函数初始化类元素。

如果*最令人头疼的 Parse*原则（如果它可能被解释为函数原型，那么它将是）发生，你需要使用两者中的任何一个来告诉编译器以下不是函数原型：

```
typename class_name obj_name(func());
class_name obj_name { func() }; 
```

# jsp - JSP 绝对路径

> ID：15759549
> 
> 赞同：16
> 
> 时间：2013-04-02T08:37:40.070
> 
> 标签：jsp, intellij-idea

有人可以解释为什么不建议在 JSP 中使用绝对路径（例如，IntelliJ IDEA 向我显示警告）？ ![在此处输入图像描述](https://i.stack.imgur.com/WKxxJ.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-02T09:08:48.043

考虑 JSP 中的以下代码：

```
<script src="/path/to/script.js" /> 
```

`www.example.com`并且您在 servlet 上下文中部署您的应用程序`myContext`，您的脚本将由浏览器在

```
www.example.com/path/to/script.js 
```

但是，浏览器将找不到该脚本。实际可以找到它的 URL 包含 servlet 上下文以及 URL 的一部分：

```
www.example.com/myContext/path/to/script.js 
```

因此，您应该将 JSP 中的 URL 更改为：

```
<script src="${pageContext.request.contextPath}/path/to/script.js" /> 
```

然后上下文路径也可以在 URL 中使用，一切都会正常工作。

# php - SimpleXml 如何在新创建的根元素中附加现有 XML

> ID：15759557
> 
> 赞同：1
> 
> 时间：2013-04-02T08:38:28.830
> 
> 标签：php, xml-parsing

我有一些来自服务器的 XML 响应，但它们没有根元素，因为我无法用新的 SimpleXML 解析它们，所以我需要创建一个根元素，然后将所有这些 xml 添加到这个创建的根元素

```
 $res = bill_curl('GetAccounts'); //getting a list of accounts WITHOUT the <root> xml
 $xml = new SimpleXMLElement("<root></root>"); // creating a root element
 $xml->addChild($res); // adding to the <root> childrens 
```

但问题是：

1）`"<!--?xml version="1.0" encoding="UTF-8"?-->"`留在里面，同样在文档的顶部

2) 得到一些像“<”、“/>”这样的符号如何去除它们？

**更新：**

```
 <document>
              <answer>
            <account>12345678</account>
            <info>someinfo</info>
            </answer>
             <answer>
            <account>23456789</account>
        <info>some info</info>
           </answer>
   </document> 
```

这是我在字符串操作之后得到的，然后我做了：

```
$xml = new SimpleXMLElement($str); 
```

在这里我得到一个开始和结束标签不匹配的错误，我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:51:56.000

我不是特别热衷于这种解决方案的脆弱性。但是，听起来您正在针对有缺陷的 API 进行集成，因此我建议您进行一些基本的字符串操作来获得您想要的内容：

```
$str = '<?xml version="1.0" encoding="UTF-8"?><testing>2</testing><test2>1</test2>';
// the above was a test string to represent the results of the below:
$str = bill_curl('GetAccounts');

// Switch the search string below with the actual doctype you're getting from the API.
// It looks to have been commented out in your question which may or may not be the case.
$str = str_replace('<?xml version="1.0" encoding="UTF-8"?>', '', $str);
$str = '<root>'.$str.'</root>';

$xml = new SimpleXMLElement($str);
var_dump($xml); 
```

# c++ - 名为 TYPE_BOOL(c++ code) 的变量与 ios 宏冲突

> ID：15759559
> 
> 赞同：4
> 
> 时间：2013-04-02T08:38:30.060
> 
> 标签：c++, ios, protocol-buffers

我正在尝试将 protobuf c++ 构建到 ios 中。但是它的实现包含一个 TYPE_BOOL 枚举变量，它与 ios 宏中的 TYPE_BOOL 冲突。并且编译失败。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-19T18:51:47.753

有一些合理（但很老套）的选项：

1.  `#include`在您使用任何 iOS 标头`TYPE_BOOL` *之前*使用的任何 protobuf 标头。`#include`例子：

    ```
    #include <google/protobuf/descriptor.h>
    #include <ConditionalMacros.h> 
    ```

    `TYPE_BOOL`这使您可以在自己的代码中使用 iOS ，但不能使用 protobuf 的`TYPE_BOOL`.

2.  `#include`iOS 标头，然后`#undef TYPE_BOOL`是`#include`protobuf 标头。例子：

    ```
    #include <ConditionalMacros.h>
    #undef TYPE_BOOL
    #include <google/protobuf/descriptor.h> 
    ```

    `TYPE_BOOL`这使您可以在自己的代码中使用 protobuf ，而不是 iOS 的`TYPE_BOOL`.

3.  如果您需要两个定义，这可能有效（未经测试）：

    ```
    #include <google/protobuf/descriptor.h>

    // Make a copy of TYPE_BOOL before it is hidden by a macro.
    const google::protobuf::FieldDescriptor::Type PROTOBUF_TYPE_BOOL =
        google::protobuf::FieldDescriptor::TYPE_BOOL;

    #include <ConditionalMacros.h> 
    ```

    现在`PROTOBUF_TYPE_BOOL`在需要 Protobuf 定义时使用。

请注意，`google/protobuf/descriptor.pb.h`它还定义了一个`TYPE_BOOL`. 可以用同样的方法解决，但是大多数人不使用那个标题，所以我把它排除在例子之外。

# javascript - 为什么我的 Fullcalendar 保存的事件发生在前一天？

> ID：15759566
> 
> 赞同：1
> 
> 时间：2013-04-02T08:38:51.987
> 
> 标签：javascript, jquery, web, fullcalendar

**您好**，
我的网站需要一个日历，所以我发现了 fullcalendar.js，这太棒了！

我创建了一个日历，可以在其中设置事件并通过 cookie 保存事件。实际上它有效但是当我设置一个事件时，第一次保存它并重新加载我的日历=>事件发生在前一天！？？

我不明白为什么！
也许有人可以帮助我？

我的代码在那里：

```
<!DOCTYPE html>
<html>
<head>
<link href='fullcalendar.css' rel='stylesheet' />
<link href='fullcalendar.print.css' rel='stylesheet' media='print' />
<script src='../jquery/jquery-1.9.1.min.js'></script>
<script src='../jquery/jquery-ui-1.10.2.custom.min.js'></script>
<script src='../jquery-cookie/jquery.cookie.js'></script>
<script src='fullcalendar.min.js'></script>
<script>

$(document).ready(function() {

                /* initialize the external events
        -----------------------------------------------------------------*/
        $('#external-events div.external-event').each(function() {

            // create an Event Object (http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)
            // it doesn't need to have a start or end
            var eventObject = {
                title: $.trim($(this).text()) // use the element's text as the event title
            };

            // store the Event Object in the DOM element so we can get to it later
            $(this).data('eventObject', eventObject);

            // make the event draggable using jQuery UI
            $(this).draggable({
                zIndex: 999,
                revert: true,      // will cause the event to go back to its
                revertDuration: 0  //  original position after the drag
            });

        });

        /* initialize the calendar
        -----------------------------------------------------------------*/
        var savedEvents = $.cookie("DSCalendar");
        if(savedEvents)
        {
            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'agendaDay,agendaWeek,month'
                },
                editable: true,
                droppable: true, // this allows things to be dropped onto the calendar !!!
                drop: function(date, allDay) { // this function is called when something is dropped

                    // retrieve the dropped element's stored Event Object
                    var originalEventObject = $(this).data('eventObject');

                    // we need to copy it, so that multiple events don't have a reference to the same object
                    var copiedEventObject = $.extend({}, originalEventObject);

                    // assign it the date that was reported
                    copiedEventObject.start = date;

                    copiedEventObject.allDay = allDay;

                    // render the event on the calendar
                    // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
                    $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);                
                },
                events: JSON.parse(savedEvents)
            });
        }
        else
        {
            $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'agendaDay,agendaWeek,month'
                },
                editable: true,
                droppable: true, // this allows things to be dropped onto the calendar !!!
                drop: function(date, allDay) { // this function is called when something is dropped

                    // retrieve the dropped element's stored Event Object
                    var originalEventObject = $(this).data('eventObject');

                    // we need to copy it, so that multiple events don't have a reference to the same object
                    var copiedEventObject = $.extend({}, originalEventObject);

                    // assign it the date that was reported
                    copiedEventObject.start = date;
                    alert(copiedEventObject.start);
                    copiedEventObject.allDay = allDay;

                    // render the event on the calendar
                    // the last `true` argument determines if the event "sticks" (http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/)
                    $('#calendar').fullCalendar('renderEvent', copiedEventObject, true);

                }
            });
        }

        $("#save").click(function(){
            var eventsFromCalendar = $('#calendar').fullCalendar( 'clientEvents');
            var eventsForCookie = [];

            $.each(eventsFromCalendar, function(index,value) {
                var event = new Object();
                event.id = value.id;
                event.start = value.start;
                alert('event = '+event.start);
                event.end = value.end;
                event.title = value.title;
                eventsForCookie.push(event);
            });
            console.log(JSON.stringify(eventsForCookie));
            $.cookie("DSCalendar", JSON.stringify(eventsForCookie), {expires: 1});

            var savedEvents = $.cookie("DSCalendar");

            console.log(JSON.parse(savedEvents));

        });

});

</script>
<style>

    body {
        margin-top: 40px;
        text-align: center;
        font-size: 14px;
        font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
        }

    #wrap {
        width: 1100px;
        margin: 0 auto;
        }

    #external-events {
        float: left;
        width: 150px;
        padding: 0 10px;
        border: 1px solid #ccc;
        background: #eee;
        text-align: left;
        }

    #external-events h4 {
        font-size: 16px;
        margin-top: 0;
        padding-top: 1em;
        }

    .external-event { /* try to mimick the look of a real event */
        margin: 10px 0;
        padding: 2px 4px;
        background: #3366CC;
        color: #fff;
        font-size: .85em;
        cursor: pointer;
        }

    #external-events p {
        margin: 1.5em 0;
        font-size: 11px;
        color: #666;
        }

    #external-events p input {
        margin: 0;
        vertical-align: middle;
        }

    #calendar {
        float: right;
        width: 900px;
        }

</style>
</head>
<body>
<div id='wrap'>

<div id='external-events'>
<h4>Draggable Events</h4>
<div class='external-event'>Free on the Morning</div>
<div class='external-event'>Free on the After-noon</div>
<div class='external-event'>Free on the night</div>
<div class='external-event'>Free all the day</div>
<p>
<input type='button' id='save' /> <label for='save'>save</label>
</p>
</div>

<div id='calendar'></div>

<div style='clear:both'></div>
</div>
</body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:10:53.947

**我找到了解决方案**

日期时间设置为 00:00，因此尝试通过执行更改日期`date.setHours(15);`，现在可以了。

# iphone - 使用 sqlite 的电话簿 iOS 应用程序

> ID：15759567
> 
> 赞同：0
> 
> 时间：2013-04-02T08:38:52.363
> 
> 标签：iphone, ios, xcode, sqlite, sigabrt

我几乎完成了这个项目。我使用 SQLite 创建了一个电话簿的小型应用程序。成功构建后我面临线程错误。总而言之，我会告诉你我在这个项目中的最新进展。我创建了一个简单的电话簿，您可以在其中添加该人的姓名、号码和地址。有两个按钮可以保存和查找联系人。所有状态都打印在标签上。我已将 libsqlite3.dylib 包含并导入到项目中。一旦构建完成。我在主类中遇到一个线程错误，说明 libc++abi.dylib：终止调用抛出异常。

有什么帮助吗？我几乎完成了这个项目。

我的 viewcontroller.h 看起来像这样：

```
#import <UIKit/UIKit.h>
#import <sqlite3.h>

@interface ViewController : UIViewController
@property (strong, nonatomic) IBOutlet UITextField *name;
@property (strong, nonatomic) IBOutlet UITextField *address;
@property (strong, nonatomic) IBOutlet UITextField *phone;
@property (strong, nonatomic) IBOutlet UILabel *status;
- (IBAction)saveData:(id)sender;
- (IBAction)findContact:(id)sender;
@property (strong, nonatomic) NSString *databasePath;
@property (nonatomic) sqlite3 *contactDB;
@end 
```

我的 viewcontroller.m 看起来像这样：

```
#import "ViewController.h"
@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *docsDir;
    NSArray *dirPaths;

    // Get the documents directory
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    docsDir = dirPaths[0];

    // Build the path to the database file
    _databasePath = [[NSString alloc]
                 initWithString: [docsDir stringByAppendingPathComponent:
                                  @"contacts.db"]];

    NSFileManager *filemgr = [NSFileManager defaultManager];

    if ([filemgr fileExistsAtPath: _databasePath ] == NO)
    {
        const char *dbpath = [_databasePath UTF8String];

        if (sqlite3_open(dbpath, &_contactDB) == SQLITE_OK)
        {
            char *errMsg;
            const char *sql_stmt =
        "CREATE TABLE IF NOT EXISTS CONTACTS (ID INTEGER PRIMARY KEY AUTOINCREMENT, NAME TEXT, ADDRESS TEXT, PHONE TEXT)";

            if (sqlite3_exec(_contactDB, sql_stmt, NULL, NULL, &errMsg) != SQLITE_OK)
            {
                _status.text = @"Failed to create table";
            }
            sqlite3_close(_contactDB);
        }

        else

        {
            _status.text = @"Failed to open/create database";
        }
    }
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)saveData:(id)sender
{
    sqlite3_stmt    *statement;
    const char *dbpath = [_databasePath UTF8String];

    if (sqlite3_open(dbpath, &_contactDB) == SQLITE_OK)
    {

        NSString *insertSQL = [NSString stringWithFormat:
                           @"INSERT INTO CONTACTS (name, address, phone) VALUES (\"%@\", \"%@\", \"%@\")",
                           self.name.text, self.address.text, self.phone.text];

        const char *insert_stmt = [insertSQL UTF8String];
        sqlite3_prepare_v2(_contactDB, insert_stmt,
                       -1, &statement, NULL);
        if (sqlite3_step(statement) == SQLITE_DONE)
        {
            self.status.text = @"Contact added";
            self.name.text = @"";
            self.address.text = @"";
            self.phone.text = @"";
        }

        else

        {
            self.status.text = @"Failed to add contact";
        }
        sqlite3_finalize(statement);
        sqlite3_close(_contactDB);
    }
}

- (IBAction)findContact:(id)sender
{
    const char *dbpath = [_databasePath UTF8String];
    sqlite3_stmt    *statement;

    if (sqlite3_open(dbpath, &_contactDB) == SQLITE_OK)
    {
        NSString *querySQL = [NSString stringWithFormat:
                          @"SELECT address, phone FROM contacts WHERE name=\"%@\"",
                          _name.text];

        const char *query_stmt = [querySQL UTF8String];

        if (sqlite3_prepare_v2(_contactDB,
                           query_stmt, -1, &statement, NULL) == SQLITE_OK)
        {
            if (sqlite3_step(statement) == SQLITE_ROW)
            {
                NSString *addressField = [[NSString alloc]
                                      initWithUTF8String:
                                      (const char *) sqlite3_column_text(
                                                                         statement, 0)];
                _address.text = addressField;
                NSString *phoneField = [[NSString alloc]
                                    initWithUTF8String:(const char *)
                                    sqlite3_column_text(statement, 1)];
                _phone.text = phoneField;
                _status.text = @"Match found";
            }
            else
            {
                _status.text = @"Match not found";
                _address.text = @"";
                _phone.text = @"";
            }
            sqlite3_finalize(statement);
        }
        sqlite3_close(_contactDB);
    }
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T20:12:58.273

在“.h”文件中的导入语句中，改为：

```
#import "/usr/include/sqlite3.h" 
```

您必须指定 sqlite3 头文件的完整路径。

# iis - 具有相同模式的友好 URL

> ID：15759568
> 
> 赞同：0
> 
> 时间：2013-04-02T08:38:54.797
> 
> 标签：iis, web-config, rewrite, friendly-url

我可以重定向并创建一个友好的 URL：

```
<rule name="RedirectUserFriendlyURL1" stopProcessing="true">
    <match url="^Product/Tour\.aspx$" />
        <conditions>
            <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
        </conditions>
        <action type="Redirect" url="Product/Tour" appendQueryString="false" />
</rule>

<rule name="RewriteUserFriendlyURL2" stopProcessing="true">
    <match url="^Product/Tour$" />
        <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        </conditions>
    <action type="Rewrite" url="Product/Tour.aspx" />
</rule> 
```

但是，例如，如果我有：

```
http://www.domain.com/Product/Features.aspx
http://www.domain.com/Product/Download.aspx
http://www.domain.com/Product/FAQ.aspx 
```

等等

我可以编写一条规则来为所有这些链接创建友好的 URL 以便接收吗？

```
http://www.domain.com/Product/Features
http://www.domain.com/Product/Download
http://www.domain.com/Product/FAQ 
```

当有几个链接时很容易，但是有很多规则很难维护。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:27:19.497

您可以使用正则表达式模式和[反向引用](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-20-configuration-reference#Using_back-references_in_rewrite_rules)来执行此操作：

```
<rule name="RedirectUserFriendlyURL1" stopProcessing="true">
    <match url="^Product/([A-z0-9]+)\.aspx$" />
        <conditions>
            <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
        </conditions>
        <action type="Redirect" url="Product/{R:1}" appendQueryString="false" />
</rule>

<rule name="RewriteUserFriendlyURL2" stopProcessing="true">
    <match url="^Product/([A-z0-9]+)$" />
        <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
        </conditions>
    <action type="Rewrite" url="Product/{R:1}.aspx" />
</rule> 
```

如果你有很多 url 需要重写，你也应该阅读关于[Rewrite Maps](http://www.iis.net/learn/extensions/url-rewrite-module/using-rewrite-maps-in-url-rewrite-module)的文档。

# storage - IOPS 与吞吐量

> ID：15759571
> 
> 赞同：104
> 
> 时间：2013-04-02T08:39:09.940
> 
> 标签：storage, throughput

1.  大数据存储中 IOPS 和吞吐量之间的主要区别是什么？
2.  文件大小对 IOPS 有影响吗？为什么？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-04-02T08:55:07.673

IOPS 衡量每秒读取和写入操作的数量，而吞吐量衡量每秒读取或写入的位数。

尽管它们测量不同的事物，但它们通常彼此跟随，因为 IO 操作具有大致相同的大小。

如果你有大文件，你只需要更多的 IO 操作来读取整个文件。文件大小对 IOPS 没有影响，因为它衡量的是读取或写入的集群数量，而不是文件数量。

如果您有小文件，则会有更多开销，因此虽然 IOPS 和吞吐量看起来不错，但您可能会遇到较低的实际性能。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2020-08-09T15:03:09.450

这是我在谈论吞吐量和 IOPS 时提出的类比。

把它想象成：

1.  您有 4 个大小相同的桶（磁盘块），您想用水填充或清空。

2.  您将使用水壶将水转移到水桶中。现在你的问题是：

*   在给定的时间（每秒），你可以倒（写）或取出（读）多少壶水？这是 IOPS。

*   在给定时间（每秒），水壶可以连续进出水桶的水量（bit、kb、mb 等）是多少？这是吞吐量。

此外，您倒水和/或取水的过程会有所延迟。这是延迟。

谈论 IOPS 和吞吐量时需要考虑 3 件事：

*   大小（文件大小/块大小）
*   模式（随机/顺序）
*   混合（读/写）百分比

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2019-09-10T12:09:36.477

磁盘 IOPS 描述了磁盘上每秒输入/输出操作的计数，与块大小无关。

磁盘吞吐量描述了每秒可以传输多少数据，因此块大小在计算应用程序所需的吞吐量时起着巨大的作用

让我们以 3000 IOPS 和 SQL 数据库引擎为例，db 引擎的块大小称为[页面大小](https://docs.microsoft.com/en-us/sql/relational-databases/pages-and-extents-architecture-guide?view=sql-server-2017#pages-and-extents)，对于 SQL Server，它等于 8 KB。如果您想计算实际吞吐量，如果定义了 IOPS，您将得到以下公式：

```
throughput = [IOPS] * [block size] = 3000 * 8 = 24 000 KB/s = 24 MB/s 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-10-02T16:26:31.010

**IOPS** - 读写操作的数量，主要用于 AWS 中用于 Cassandra 等数据库的 OLTP 事务。

**吞吐量**- 是每秒传输的位数。即每秒传输的数据。主要用于大数据hadoop、kafka流等高数据传输应用的单元

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-17T03:14:41.390

**IOPS** - 存储系统从开始到结束每秒执行输入/输出操作所花费的时间构成 IOPS。

**吞吐量**- 以每秒兆字节为单位的数据传输速度通常称为吞吐量。早些时候，它以千字节为单位。但是现在这个标准已经变成了兆字节。

有关此的更多信息，请参阅：[IOPS 和吞吐量之间有什么区别？](https://forum.huawei.com/enterprise/en/what-is-the-difference-between-iops-and-throughput/thread/557357-891)

# episerver - 找出您在站点上运行的 EPiServer 版本的最快方法

> ID：15759581
> 
> 赞同：2
> 
> 时间：2013-04-02T08:39:34.867
> 
> 标签：episerver, episerver-6, episerver-6-r2

除了 episerver.config 之外，是否还有其他地方可以找到该站点所构建的 EPiServer 的哪个版本（“EPiServer 6”/“EPiServer 6 R2”）？

通常我会查看 episerver.config 并将这些数字与部署中心中的数字进行比较，以确定它是“EPiServer 6”还是“EPiServer 6 R2”。

我只使用 EPiServer 6 和 EPiServer 6 R2，所以这些版本与问题最相关。

编辑：用我所说的版本更新了前两段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:16:17.337

查看实际 EPiServer 版本的最简单方法之一是在 admin 中查看插件管理器：

![在此处输入图像描述](https://i.stack.imgur.com/S5sqU.png)

*   6.0.530.0 - 6 R1
*   6.1.379.0 - 6 R2
*   7.0.586.1 - 7

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T09:03:20.170

正如其他人所说，管理模式下的插件管理器，或者只是查看编辑器/管理模式浏览器窗口的标题会显示版本。

此外，这里是版本号列表及其相应的发布“名称”： [http ://epiwiki.se/configuration/episerver-version-nummber-vs-release-number](http://epiwiki.se/configuration/episerver-version-nummber-vs-release-number)

EPiServer 版本号与发布号（取自程序集 EPiServer.dll）

*   7.0.586.4 - EPiServer 7 - 补丁 1
*   7.0.859.4 - EPiServer 框架
*   7.0.586.1 - EPiServer 7
*   1.1.1239.0 - EPiServer 共享
*   7.0.859.1 - EPiServer 框架
*   7.0.1764.1 - EPiServer 搜索
*   7.0.499.1 - EPiServer 7 预览版
*   6.1.379.5xx - EPiServer CMS 6 R2（具有不同版本的通用修补程序）
*   6.1.379.1 - EPiServer CMS 6 R2
*   6.0.530.0 - EPiServer CMS 6
*   5.2.375.236 - EPIServer CMS 5 R2 SP2
*   5.2.375.133 - EPiServer CMS 5 R2 SP1
*   5.2.375.7 - EPiServer CMS 5 R2
*   5.1.422.267 - EPiServer CMS 5 SP3
*   5.1.422.256 - EPiServer CMS 5 SP2
*   5.1.422.122 - EPiServer CMS 5 SP1
*   5.1.422.4 - EPiServer CMS 5
*   4.62.0.469 - EPiServer CMS 4.62B

版本号使用以下模式构建：

Major.release.buildnumber.days

在哪里：

主要 - 是可能对先前版本进行重大更改的主要版本

发布 - 发布号不应包含重大更改

内部版本号 - 内部版本号

天 - 生成内部版本号后的天数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:31:09.993

EPiServer Admin 或 Edit 中的标题标签将显示您正在运行的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:44:54.810

当涉及到 CMS 6 R1/R2 时，您可以寻找功能。例如，R2 附带的个性化功能。

# android - 如何关闭画布中的复杂路径？

> ID：15759582
> 
> 赞同：2
> 
> 时间：2013-04-02T08:39:35.670
> 
> 标签：android, canvas

我想在画布上画一个椭圆。基本上，我将四个贝塞尔曲线组合成一个椭圆。

我成功地绘制了一个椭圆，但我不知道如何关闭它。

代码：

```
//Paints for bazier curve
Paint bezierPaint = new Paint();
bezierPaint.setColor(Color.RED);
bezierPaint.setStyle(Paint.Style.STROKE);
bezierPaint.setStrokeCap(Paint.Cap.ROUND);
bezierPaint.setStrokeWidth(3.0f);
bezierPaint.setAntiAlias(true);

//Oval Path
Path ovalPath = new Path();

//Draw the first curve. from top point to right point
ovalPath.moveTo(160,0);
ovalPath.cubicTo(210, 0, 260, 100, 260, 150);

//Draw the second curve. from right point to bottom point   
ovalPath.moveTo(260, 150);
ovalPath.cubicTo(260, 200, 210, 300, 160, 300);

//Draw the thrid curve. from bottom point to left point         
ovalPath.moveTo(160, 300);
ovalPath.cubicTo(110, 300, 60, 200, 60, 150);

//Draw the fourth curve. from left point to top point           
ovalPath.moveTo(60, 150);
ovalPath.cubicTo(60, 100, 110, 0, 160, 0);

**//I expect this oval close correctly. But in actually, the fourth curve was closed. 
//Please see the image in attachment.How should I close this path as my expectation?**
ovalPath.close()

canvas.drawPath(ovalPath, bezierPaint); 
```

![在此处输入图像描述](https://i.stack.imgur.com/4CYlA.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-24T22:16:42.910

只需挂断电话即可`path.close()`。此函数添加从当前绘制点到第一个绘制点的线段。我认为跳过这个电话没有任何害处。

或者，更加注意您的片段的方向，以便每个片段从最后一个结束的地方开始，更重要的是，让最后一个在第一个开始的地方结束。

或者按照marnaish所说的去做，然后使用`drawOval()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-18T16:08:04.763

我认为使用以下函数绘制椭圆更容易：

```
canvas.drawOval(ovalRect, paint); 
```

椭圆形矩形是一个[RectF](http://developer.android.com/reference/android/graphics/RectF.html)对象，椭圆形将在其中找到它的位置。

# jquery - 在鼠标悬停时使用 jquery 隐藏特定文本

> ID：15759584
> 
> 赞同：0
> 
> 时间：2013-04-02T08:39:41.037
> 
> 标签：jquery, html, css, mouseover

我似乎无法让它工作：

```
$('.products-grid li').hover(
function(){
    $('.price').html().replace('DKK','');
}); 
```

当鼠标悬停在列表项上时，我希望不显示“DKK”。我知道我可以通过在 DKK 周围添加一个跨度来做到这一点，但这对我来说是不可能的。正如您在此处看到的那样，我被锁定在 HTML 的设置中。

[http://jsfiddle.net/4UeMd/](http://jsfiddle.net/4UeMd/)

希望可以有人帮帮我。这可能是我缺少的一个简单的 jQuery 编码，但我不太明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:43:23.963

在脚本中设置`html`元素的。目前脚本只是修改了它的innerHtml，`.price`没有设置`html`价格。

```
$('.products-grid li').hover(
    function(){
        $('.price').html($('.price').html().replace('DKK',''));
    }); 
```

**工作示例：http:** [//jsfiddle.net/4UeMd/5/](http://jsfiddle.net/4UeMd/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:43:33.527

这是提示的小代码：

```
abcd xyz <label class='txt'>DDK</label>dbs ksbdh ksjdk <label class='txt'>DDK</label> 
```

在函数上编写以下脚本：

```
$('.txt').hide(300); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:43:55.560

您需要调用 .html() 两次，一次获取字符串，一次设置字符串。

[jsFiddle](http://jsfiddle.net/Tyriar/tkduT/)

```
$('.products-grid li').hover(function () {
    $('.price').html($('.price').html().replace('DKK', ''));
}); 
```

您的代码`$('.price').html().replace('DKK','');`正在获取每个`.price`元素上的文本，替换文本并将其返回为空。

* * *

要在您离开元素时取回 DKK，您可以执行此操作，您还希望定位`.price`not `li`。

[jsFiddle](http://jsfiddle.net/Tyriar/tkduT/5/)

```
$('.products-grid .price').hover(function () {
    $(this).each(function () {
        var me = $(this);
        me.html(me.html().replace('DKK', ''));
    });
}, function () {
    $(this).each(function () {
        var me = $(this);
        me.html(me.html() + 'DKK');
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:45:30.193

1.  您需要使用 replced 版本设置 html
2.  您需要使用 .each 为所有 .price 执行此操作，以便正确应用它

    ```
    $('.products-grid li').mouseover(function(){
    $('.price').each(function(){
        var replaced = $(this).html().replace('DKK','');
        $(this).html(replaced);
    }); 
    ```

    });

# php - 向数组中的所有现有记录添加新的键/值

> ID：15759603
> 
> 赞同：2
> 
> 时间：2013-04-02T08:40:31.630
> 
> 标签：php, arrays

假设我有一个如下数组：

```
$list[] = array('a' => 1, 'b' => 4);
$list[] = array('a' => 2, 'b' => 5);
$list[] = array('a' => 3, 'b' => 6); 
```

是否可以向所有数组元素添加新的`Key & Value`like ，但**不**循环所有记录或使用相似函数？`c => null`**`map`**

 **最终结果应该与此类似：

```
$list[] = array('a' => 1, 'b' => 4, 'c' => null);
$list[] = array('a' => 2, 'b' => 5, 'c' => null);
$list[] = array('a' => 3, 'b' => 6, 'c' => null); 
```

实际上，我正在考虑即时制作第二个数组并将其组合到原始数组，或者只是循环遍历数组并扩展它，只是想知道是否有更好的替代方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:47:30.123

不，你不能在不遍历数组的情况下执行此操作，要么显式通过 for 循环，要么隐式使用 array_walk 或类似的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T08:49:57.273

无耻：

```
array_walk($list, function(&$v){ $v['c'] = null; }); 
```

* * *

**好的进一步评论**

如果您担心数组的结构并希望某些键存在，即使它们没有明确定义，那么您正在尝试描述特定的东西 - 在这种情况下，您最好在类中定义该对象 - 从可读性和诚信的立场。

例如：

```
class MyObject {
  public $a; 
  public $b; 
  public $c;
  function __construct(){
     // this line is lazy but it's just a demo
     list($a,$b,$c) = func_get_args();
     $this->a = $a;
     $this->b = $b;
     $this->c = $c;
  }
}

$list[] = new MyObject(1, 4);
$list[] = new MyObject(2, 5);
$list[] = new MyObject(3, 6);

print_r($list); 
```

[运行代码](http://ideone.com/duP9Jf)

在这种情况下——如果我们没有在构造函数中指定***“c”*** ——它仍然被隐式设置为*null*。因此，您之后不需要`$list`再次循环遍历数组。尽管为了完整起见，我可能应该在这里指出，可能存在速度-内存权衡。

输出：

```
Array
(
    [0] => MyObject Object
        (
            [a] => 1
            [b] => 4
            [c] => 
        )

    [1] => MyObject Object
        (
            [a] => 2
            [b] => 5
            [c] => 
        )

    [2] => MyObject Object
        (
            [a] => 3
            [b] => 6
            [c] => 
        )

 ) 
```

* * ***

# mysql - SQL在两个日期时间范围内添加唯一索引

> ID：15759607
> 
> 赞同：0
> 
> 时间：2013-04-02T08:40:37.653
> 
> 标签：mysql, sql, database

我有一个名为 SpecialOffer 的表，其 productId、shopId、from 、 until ，其中最后两个是日期时间。

我知道我可以做这样的事情

```
CREATE UNIQUE INDEX UniqueIndex2 ON SpecialOffer(codP, codS) 
```

使 codP 在 codS 范围内是唯一的，但我怎样才能仅在 'from' 和 'until' 之间实现这种唯一性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T11:07:58.700

您需要使用触发器来执行此操作——插入和更新触发器。这些可以检查时间段内的重叠。

一般来说，在 MySQL 中，大多数约束都是通过触发器来处理的（唯一约束和外键约束除外）。

# forms - Symfony2：如何制作与字段具有多对多关系的表单？

> ID：15759613
> 
> 赞同：1
> 
> 时间：2013-04-02T08:40:50.930
> 
> 标签：forms, symfony, doctrine-orm, entity-relationship

这是我的实体：

```
/**
 * Message_User
 *
 * @ORM\Table(name="message_user")
 * @ORM\Entity
 * @ORM\HasLifecycleCallbacks()
 */
class Message_User
{    
/**
 * @ORM\ManyToOne(targetEntity="Learnpack\UserBundle\Entity\User", inversedBy="mu")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 * @ORM\Id
 */
protected $user;

/**
 * @ORM\ManyToOne(targetEntity="Learnpack\MessageBundle\Entity\Message", inversedBy="mu")
 * @ORM\JoinColumn(name="message_id", referencedColumnName="id")
 * @ORM\Id
 */
protected $message;

/**
 * @var string $status
 *
 * @ORM\Column(name="status", type="string", length=45)
 */
private $status;
}

    /**
 * Message
 *
 * @ORM\Table(name="message")
 * @ORM\Entity
 */
class Message
{
/**
 * @var integer
 *
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var string
 *
 * @ORM\Column(name="subject", type="string", length=100)
 */
private $subject;

/**
 * @var string
 *
 * @ORM\Column(name="content", type="text")
 */
private $content;

/**
 * @var string
 *
 * @ORM\Column(name="status", type="string", length=45)
 */
private $status;

/**
 * @var string
 *
 * @ORM\Column(name="file", type="string", length=100)
 */
private $file;

/**
 * @var \DateTime
 *
 * @ORM\Column(name="send", type="datetime")
 */
private $send;

/**
 * @var \DateTime
 *
 * @ORM\Column(name="created", type="datetime")
 */
private $created;

/**
 * @var \DateTime
 *
 * @ORM\Column(name="modified", type="datetime")
 */
private $modified;

/**
 * @ORM\ManyToOne(targetEntity="Learnpack\UserBundle\Entity\User", inversedBy="user")
 * @ORM\JoinColumn(name="user_id", referencedColumnName="id")
 */
protected $sender; 
```

现在我想制作一个带有基本消息发送的表格。将有三个字段：

收件人、主题和内容。

我的问题是我不知道如何使用 ajax 为收件人添加字段“输入”。

# c++ - “this”指针变为空 C++

> ID：15759614
> 
> 赞同：1
> 
> 时间：2013-04-02T08:40:53.570
> 
> 标签：c++, qt, qthread

我有一个带有两个类的 C++ Qt 静态库 - *dataprocthread*和*calcvalue*。在第一个中，当我从*calcvalue*的实例调用方法时，指针`this`（引用*dataprocthread*类）突然变为`null`.

这是*dataprocthread.h*：

```
class DataProcThread : public QThread
{
    Q_OBJECT

    public:
        DataProcThread(int sarray[9], int val);

    signals:
        workDone(int result);

    private:            
        int _sarray[9];
        int _val;
        void run();
}; 
```

*dataprocthread.cpp*：

```
DataProcThread::DataProcThread(int sarray[9], int val)
{
    for (int x = 0; x < 9; x++)
    {
        _sarray[x] = sarray[x];
    }
    _val = val;
}

void DataProcThread::run()
{
    CalcValue* cv = new CalcValue();
    int myval = 0;
    for (int i = 0; i < 100; i++)
    {
        myval = cv->processData(this->_val);
        if (this->_sarray[0] != myval)
        {
            //do something
        }
    }
    emit workDone(intValue);
} 
```

*计算值.h*：

```
class CalcValue
{
    public:
        CalcValue();
        int processData(int someval);
}; 
```

*计算值.cpp*：

```
CalcValue::CalcValue()
{
}

int processData(int someval)
{
    //do something and return int value
} 
```

当我运行此代码时，它突然收到信号“分段错误”。使用调试器，我发现`DataProcThread::run()`函数中的问题：当我调用`cv->processData`函数时，一切正常。但是在下一行 ( `if (this->_sarray[0] != myval)`) 上，`this`指针变为`null`（我可以在 Locals 窗口中看到它），因此，我无法访问`this->_sarray`变量。

如果它很重要，这就是我启动线程的方式（从我的库之外的另一个类）：

```
DataProcThread* thread = new DataProcThread(sarray, val);
QObject::connect(thread, SIGNAL(workDone(int)), this, SLOT(collectWork(int)));
thread->start(); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:07:20.647

正如评论中指出的那样，问题发生在`processData`函数中：它正在写入内存。

我只是使用[`strncpy`](http://www.cplusplus.com/reference/cstring/strncpy/)而不是[`strcpy`](http://www.cplusplus.com/reference/cstring/strcpy/)问题消失了（[这](https://stackoverflow.com/questions/1258550/why-should-you-use-strncpy-instead-of-strcpy)是一个很好的解释）。

# google-apps-script - 在数百个谷歌电子表格中汇总相同的单元格

> ID：15759615
> 
> 赞同：0
> 
> 时间：2013-04-02T08:40:58.237
> 
> 标签：google-apps-script, google-sheets

我的谷歌驱动器中有数百份报告。每个报告都是它自己的文件（电子表格，只有一张）。

我需要所有这些电子表格中的单元格 B10。如果有一个带有两个参数的函数会很棒：

1.  包含电子表格文件的目录的名称
2.  您想要总计的特定单元格。

我试着做脚本

```
function Suma(cell)
{
  var files = DocsList.getFilesByType('spreadsheet', 0, 100);
  for (var i = 0; i < files.length; i++)
  {
   var sheets = SpreadsheetApp.open(files[i]).getSheets();
   var sum = 0;
   for (var i = 0; i < sheets.length ; i++ )
   {
     var sheet = sheets[i];
     var val = sheet.getRange(cell).getValue();

        if (typeof(val) == 'number') 
        {
            sum += val;   
        }
   }
  }
  return sum;
} 
```

当然需要一些帮助:) THX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:08:12.360

你正在做的事情是好的，但是你可能想要列出一个文件夹上的文件而不是整个驱动器。如果你有太多的 ss 并且脚本会超时，也会失败。解决这个问题是可能的，但需要更复杂的代码。最好在客户端使用 jsapi 或 appengine。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T21:53:07.917

由于打开每个电子表格需要时间，这将是缓慢的，并且有超时的风险。

此版本的函数将采用文件夹名称和目标单元格，并从文件夹中的所有电子表格中生成该位置的数值总和。

文件夹和文件的集合`DriveApp`依赖*迭代器*而不是数组，因此您有两个使用`.hasNext()`和`.next()`访问集合中对象的示例。

```
function Suma(folderName, cell)
{
  var folders = DriveApp.getFolders();
  var folderFound = false;
  var folder;
  while (folders.hasNext() && !folderFound) {
    folder = folders.next();
    folderFound = folder.getName() == folderName;
  }
  if (!folderFound) throw "No folder named " + folderName;  // Error

  var sheets = folder.getFilesByType(MimeType.GOOGLE_SHEETS);
  var sum = 0;
  while (sheets.hasNext()) {
    var sheet = SpreadsheetApp.openById(sheets.next().getId());
    var val = sheet.getActiveSheet().getRange(cell).getValue();
    if (typeof(val) == 'number') {
      sum += val;   
    }
  }
  return sum;
} 
```

# c# - 我们可以为解决方案中的所有项目指定一个引用路径吗？

> ID：15759619
> 
> 赞同：1
> 
> 时间：2013-04-02T08:41:15.337
> 
> 标签：c#

有没有一种方法可以为解决方案中的所有项目指定一个参考路径？我目前有 40 多个项目，我想在一个地方更新它。

提前致谢。

# sql-server - 左外连接搞笑结果

> ID：15759621
> 
> 赞同：0
> 
> 时间：2013-04-02T08:41:19.070
> 
> 标签：sql-server

请查看以下关于左外连接的 2 个查询，并告诉我为什么存在差异。 `Query 1`返回 1489 行：

```
SELECT distinct a.GMS_MATERIALNUMBER,a.MATERIAL_DESCRIPTION, b.LDMC
FROM [AP_GDC2_PREPARATION_TEST].[dbo].[GDM_AUTOPULL] a
left outer join  [AP_GDC2_STAGING_TEST].[dbo].[CFS_DIS_LDMC] b on
a.GMS_MATERIALNUMBER = b. GMS_MATERIALNUMBER and b.SAP_COMPANY_CODE= '1715'
and a.CFS_ORGANIZATION_CODE like 'rd_kr' 
```

`Query 2`仅返回 295 行，这与我从 where CFS_ORGANIZATION_CODE like 'rd_kr' 执行简单的 select * 时给出的行数相同

```
SELECT distinct a.GMS_MATERIALNUMBER,a.MATERIAL_DESCRIPTION, b.LDMC
FROM [AP_GDC2_PREPARATION_TEST].[dbo].[GDM_AUTOPULL] a
left outer join  [AP_GDC2_STAGING_TEST].[dbo].[CFS_DIS_LDMC] b on
a.GMS_MATERIALNUMBER = b. GMS_MATERIALNUMBER and b.SAP_COMPANY_CODE= '1715'
where a.CFS_ORGANIZATION_CODE like 'rd_kr' 
```

基本上`query 2`是我想要的结果，但我的问题是为什么`query 1`不起作用？当涉及`ON`到`left outer join`?

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:45:02.070

两者在字面上是不同的。

第一个查询在**表连接发生之前对表进行过滤**。

第二个**过滤器在连接表完成后从总结果中过滤**。

* * *

这是一个例子

表格1

```
ID   Name
1    Stack
2    Over 
3    Flow 
```

表2

```
T1_ID   Score
1       10
2       20
3       30 
```

* * *

在您的第一个查询中，它看起来像这样，

```
SELECT  a.*, b.Score
FROM    Table1 a
        LEFT JOIN Table2 b
           ON a.ID = b.T1_ID AND
              b.Score >= 20 
```

它所做的是在加入表之前，`table2`首先按分数过滤记录。因此，将在 table1 上连接的唯一记录是

```
T1_ID   Score
2       20
3       30 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1f4fd/2)

因为`Score`of`T1_ID`只有10。查询的结果是

```
ID   Name    Score
1    Stack   NULL
2    Over    20
3    Flow    30 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1f4fd/3)

* * *

而第二个查询不同。

```
SELECT  a.*, b.Score
FROM    Table1 a
        LEFT JOIN Table2 b
           ON a.ID = b.T1_ID
WHERE   b.Score >= 20 
```

它首先连接记录，无论它在另一个表上是否有匹配的记录。所以结果将是

```
ID   Name    Score
1    Stack   10
2    Over    20
3    Flow    30 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1f4fd/5)

和过滤发生`b.Score >= 20`。所以最终的结果将是

```
ID   Name    Score
2    Over    20
3    Flow    30 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1f4fd/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:44:40.670

不同之处在于您制作了`LEFT JOIN`. 因此，您从第一个表中获取所有行，并从第二个表中获取所有匹配的行。

在您的第二个查询`JOIN`中，您首先设置您的`WHERE`语句以减少结果。

# asp.net - 绑定时如何在asp.net控件中使列的某些行为空

> ID：15759622
> 
> 赞同：0
> 
> 时间：2013-04-02T08:41:20.517
> 
> 标签：asp.net

我有如下数据

```
 Header1  Header2
     Main1      Sub1
     Main1      Sub2
     Main1      Sub3
     Main2      Sub1
     Main2      Sub2
     Main2      Sub3 
```

我需要在 ASP.NET 服务器控件中显示数据，如下所示

![在此处输入图像描述](https://i.stack.imgur.com/WIEwW.jpg)

如何在 asp.net 服务器控件中进行操作（任何）

html代码如下。

```
 <table cellpadding="0" cellspacing="0" >
<tr>
<td>
Header1
</td><td>Header2</td>
</tr> <tr>
<td>
Main1
</td><td>sub1</td>
</tr> <tr>
<td>

</td><td>sub2</td>
</tr> <tr>
<td>

</td><td>sub3</td>
</tr>
<tr>
<td>
Main2
</td><td>sub1</td>
</tr> <tr>
<td>

</td><td>sub2</td>
</tr> <tr>
<td>

</td><td>sub3</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:05:44.860

获取数据表中的数据而不是......这样做......

```
Datatable dt=Getdata();//custom function to get data in datatable

List<string> list=new List<string>;

foreach(DataRow dr in dt.Rows)
{
if(list.Contains(dr["Header1"].ToString())
dr["Header1"]="";
else
list.Add(dr["Header1"].ToString());
} 
```

在此数据表设置 gridview 的源之后。

# c# - 编辑该项目并发布后如何刷新站点核心树节点

> ID：15759624
> 
> 赞同：-1
> 
> 时间：2013-04-02T08:41:25.277
> 
> 标签：c#, asp.net, tree, sitecore

发布后我需要刷新站点核心树节点。当前行为是当我更新某些项目并发布时，站点核心树节点不会刷新。我必须手动刷新 sitecore 树节点。如何完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:46:39.910

我最近创建了一个命令

```
Context.ClientPage.SendMessage(this, "item:load(id=" + item.ID + ")"); 
```

用于加载新创建的节点。也许这也适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:52:35.193

John West 有解决这个问题的最佳方法：

[https://community.sitecore.net/technical_blogs/b/sitecorejohn_blog/posts/load-or-reload-an-item-in-the-sitecore-asp-net-cms](https://community.sitecore.net/technical_blogs/b/sitecorejohn_blog/posts/load-or-reload-an-item-in-the-sitecore-asp-net-cms)

# sql-server - MS SQL Server 中是否有等效于 ConvertTimeFromUtc 的方法？

> ID：15759627
> 
> 赞同：3
> 
> 时间：2013-04-02T08:41:36.113
> 
> 标签：sql-server, tsql

SQL Server 中是否有一个函数可以将保存为 UTC 时间的 DateTime 转换为本地时间？问题是我将时间保存为 UTC 时间，并且我曾经将时区偏移量计算为

> 选择@tzoffset = datediff(mi,SYSDATETIMEOFFSET(),SYSDATETIME())

并将其添加到我的 UTC 时间，在夏令时到来之前它工作得很好。由于选择了**当前**时区偏移量，因此计算对于 DST 之前的值无效。

由于日期以 ASP.NET Web 表单呈现，因此我通过将日期呈现为 来解决该问题`TimeZoneInfo.ConvertTimeFromUtc((DateTime)Eval("maxtime"), TimeZoneInfo.Local)`，这会自动工作。

T-SQL 中是否有同样优雅的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:03:25.180

事情没那么简单。阅读此[http://blogs.msdn.com/b/bartd/archive/2009/03/31/the-death-of-datetime.aspx](http://blogs.msdn.com/b/bartd/archive/2009/03/31/the-death-of-datetime.aspx)

# sed - 用 sed 查找和替换字符串

> ID：15759629
> 
> 赞同：0
> 
> 时间：2013-04-02T08:41:42.830
> 
> 标签：sed, replace

我需要使用 sed 进行多文件查找和替换（删除）。我有这行：

所以换行：

```
<meta name="keywords" content="there could be anything here"> 
```

在当前目录及其下的所有文件中使用 '' （无）。

到目前为止，我已经得到了这个：

```
sed -e 's/<meta name="keywords" content=".*>//g' myfile.html' 
```

但我知道这只会删除 < 或 > 标签。我该如何匹配

```
<meta name="keywords" content=" 
```

并删除从那个到下一个的所有内容

```
> 
```

我还需要对当前目录中（递归）下的所有文件执行此操作。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:27:05.317

sed 有删除指令尝试使用

```
sed -e '/<meta name="keywords"/d' myfile.html 
```

# c# - qbxml quickbooks 项目自定义字段过滤器

> ID：15759630
> 
> 赞同：0
> 
> 时间：2013-04-02T08:41:48.267
> 
> 标签：c#, intuit, qbxml

有没有办法通过过滤一个自定义字段来生成 XML 请求以仅获取一个项目及其信息？

例如，我有一个“条形码”自定义字段，我想通过条形码编号获取项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:55:55.250

答：不可以。您不能按自定义字段过滤

# c# - 将实体框架与多个 MS SQLSERVER 数据库一起使用

> ID：15759631
> 
> 赞同：8
> 
> 时间：2013-04-02T08:41:48.593
> 
> 标签：c#, sql-server

我来回搜索，但似乎无法掌握我需要的东西。如果最近回答了这个问题，我很抱歉。重定向到讨论对我有好处。

这就是场景。我的老板指示我从 Microsoft Visual Foxpro（MS 将于 2015 年停止支持）迁移到 .Net C#。为了良好的基础和采用最佳实践，我决定先学习，将相关信息拼凑在一起，然后开始编码。这是第二年。

我们是一家为 50 多个客户提供工资单处理外包服务的局公司。每个客户目前都有自己的数据库。数据库中的表具有完全相同的结构。

我是新手。对.net 世界来说是全新的。

我开始使用数据表、数据读取器使用原始 SQL，但在我的研究中，我得到了一些令人沮丧的讨论。许多人认为实体框架应该服务于目的。但是允许混合使用方法，尤其是在涉及复杂查询时。

有人可以指出我可以在其中使用 50 多个相同数据库实现实体框架的一些“好读物”。每个数据库都是完全独立的，与其他数据库无关。当用户登录时，他们选择需要为其处理工资单的客户，然后 EF 指向该数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:01:54.673

EF 需要 2 条不同的信息来处理数据库中的数据：

1) 数据库模式：它作为编译代码包含在您的应用程序中，通常不能在运行时更改。

2) 连接字符串：这是在运行时提供的，通常来自配置文件。

在您的情况下，所有数据库都具有相同的模式，因此您可以只对一个数据库进行建模，它将适用于所有其他数据库。

您要更改的部分是连接字符串。这告诉 EF 如何查找数据库并且可以在运行时提供。

有一个`DbContext`以连接字符串作为参数的构造函数的重载：[`MSDN: DbContext Constructor (String)`](http://msdn.microsoft.com/en-us/library/gg679467%28v=vs.103%29.aspx)

框架中甚至还有一些类可以帮助您创建连接字符串：

[`MSDN: EntityConnectionStringBuilder Class`](http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnectionstringbuilder.aspx)

[`MSDN: Connection String Builders`](http://msdn.microsoft.com/en-us/library/ms254947.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T09:02:25.657

嗯，我碰巧真的很喜欢 EF Code First，但我不确定它是否适合你正在做的事情。您的架构多久更改一次？

# 你应该使用 EF 吗？

## 英孚的优势

如果架构定期更改，EF Code First 的迁移部分可能会为您节省大量时间和精力，因为您通常可以取消用于架构升级的 SQL 脚本 - 架构更改最终会与您的其余代码一起在源存储库中反而。你将从这里开始：

[https://stackoverflow.com/a/8909092/176877](https://stackoverflow.com/a/8909092/176877)

我也很喜欢设置 EF 的简单程度，以及针对它编写 LINQ 查询并准确返回我从数据库构建的 POCO 的简单程度。

但 EF 可能不是最合适的。

## 其他需要考虑的 ORM

许多其他 ORM 支持 LINQ 和 POCO，更好地支持现有数据库（在 EF Code First 中可能很难映射一些东西），以及对异步操作的现有支持（EF 目前在 5.0 上；6.0 有异步） --（更新：EF6 是最新的，它的异步支持很棒。它的批量删除很糟糕，应该像瘟疫一样避免，为此使用纯 SQL）。

特别是[NHibernate](https://stackoverflow.com/questions/624609/linq-to-nhibernate)是现有数据库支持的现场野兽，但它有点像配置工作，而且似乎是政治内讧导致文档在不同版本和分支之间发生冲突。

许多“[微型 ORM](http://www.diplo.co.uk/blog/2011/8/15/small-is-beautiful-net-micro-orms.aspx) ”要简单得多——该链接指向 2011 年的一个简短列表，但如果您四处寻找，您会在 .Net 中找到 30 个左右。有些生成更好或不太理想的查询，有些根本没有，有些让您编写 SQL（不要使用那些）-您必须四处寻找适合您的查询。这可能是一项更大的研究任务，但我怀疑这些最适合您正在尝试做的事情之一的简单配置和小学习曲线。

# 回答您的具体问题

## 一次与所有客户端数据库对话

如果您同时从一个应用程序连接到所有 50 个数据库，则需要实例化 50 个 DbContext，例如：

```
var dbClient1 = new DbClient1();
var dbClient2 = new DbClient2(); 
```

假设您四处制作小包装类，例如：

```
public class DbClient1 : CoreDbContext
{
    public DbClient1()
        : base("DbClient1") // Means use the connection string named "DbClient1" in Web.Config 
```

其中 CoreDbContext 是项目中扩展 DbContext（任何 EF 项目的标准部分）的主要 EF 类。

## 一次只与一个人交谈

如果您只使用每个应用程序一个，那么[任何 EF 教程都可以](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc)。

唯一的主要技巧是在模式更改发生时迁移这些 Db。有两种基本方法。无论哪种方式，您都可以获取备份并在本地恢复它们的副本，以便您可以针对它们测试您的迁移 ( `update-database -f -verbose`)。如果您不冒数据错误的风险，例如将列更改为 NOT NULL 并发现您的本地测试实例没有空值，那么一位客户就这样做了，kaboom。一旦让它们工作，您就可以决定如何更新生产。有很多方法可以做到这一点，包括编写一个自定义的前滚/后退工具（或找到一个），将 SQL 脚本签入 git，聘请 DBA，或者更简单：

### 显而易见的 - SQL 脚本

将迁移转储到 SQL ( `update-database -script`) 并针对实际生产数据库运行它。

### 我对少量数据库的疯狂方式

将每个 db 的条目添加到 Web.Config，并为每个条目创建一个项目配置，例如“DbDeployClient1”、“DbDeployClient2”等。在每个条目中创建一个类似于 DbDeployClient1 的构建定义，然后将其添加到您的 DbContext 类中：

```
public CoreDbContext()
#if DbDeployClient1
    : base("DbDeployClient1")
#elseif DbDeployClient2
    : base("DbDeployClient2")
    // etc
#endif
{ 
```

这使您可以快速切换到 DbDeploy 配置并直接从 Visual Studio 对目标数据库运行迁移。显然，如果您这样做，您需要在您正在迁移的实际 SQL Server 实例上临时打开一个端口，最好只允许您的 IP。一个好处是您可以从那里的迁移中获得明显的错误，并获得完整的回滚功能，而无需任何实际工作 - 您正在利用的所有回滚支持只是 EF 的一部分。一个开发人员可以做到这一点，而不会遇到一堆其他瓶颈。但它有很多机会来降低风险和提高自动化程度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-03T01:47:51.763

这很简单

我有，

```
//WMSEntities is conection string name in web.config 
//also the name of Entitiframework
public WMSEntities() : base("name=WMSEntities") 
        {
        } 
```

已经在 edmx 文件夹的自动生成的 Model.Context.cs 中

为了在运行时连接到多个数据库，我在同一个文件 Model.Context.cs 中创建了另一个将连接字符串作为参数的构造函数，如下所示

```
 public WMSEntities(string connStringName)
            : base("name=" + connStringName)
        {
        } 
```

现在，我在 Web.Config 中添加了其他连接字符串，例如

```
 <add name="WMSEntities31" connectionString="data source=TESTDBSERVER_NAME;
       initial catalog=TESTDB;userid=TestUser;password=TestUserPW/>

<add name="WMSEntities" connectionString="data source=TESTDBSERVER_NAME12;
     initial catalog=TESTDB12;userid=TestUser12;password=TestUserPW12/> 
```

然后，当连接到数据库时，我调用下面的方法传递`connetionString`名称作为参数

```
 public static List<v_POVendor> GetPOVendorList(string connectionStringName)
  {    
      using (WMSEntities db = new WMSEntities(connectionStringName))
      {               
          vendorList = db.v_POVendor.ToList();                 

      }
  } 
```

# java - Domino XPage 上 Jackson 的 Java 权限

> ID：15759633
> 
> 赞同：0
> 
> 时间：2013-04-02T08:41:51.013
> 
> 标签：java, security, jackson

在 XPage 内的 Domino 服务器上使用 Codehaus Jackson 会产生以下堆栈跟踪

```
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM: java.lang.SecurityException: not allowed to access members in class class java.util.ArrayList
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM:  at java.lang.Throwable.<init>(Throwable.java:67)
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM:  at lotus.notes.AgentSecurityManager.checkMemberAccess(Unknown Source)
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM:  at java.lang.Class.checkMemberAccess(Class.java:112)
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM:  at java.lang.Class.getDeclaredMethods(Class.java:675)
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM:  at org.codehaus.jackson.map.introspect.AnnotatedClass._addMemberMethods(AnnotatedClass.java:620)
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM:  at org.codehaus.jackson.map.introspect.AnnotatedClass.resolveMemberMethods(AnnotatedClass.java:413)
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM:  at org.codehaus.jackson.map.introspect.BasicClassIntrospector.classWithCreators(BasicClassIntrospector.java:185)
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM:  at org.codehaus.jackson.map.introspect.BasicClassIntrospector.collectProperties(BasicClassIntrospector.java:157)
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM:  at org.codehaus.jackson.map.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:96)
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM:  at org.codehaus.jackson.map.introspect.BasicClassIntrospector.forSerialization(BasicClassIntrospector.java:16)
[07715:00011-2293234576] 04/02/2013 10:28:12 AM  HTTP JVM:  at org.codehaus.jackson.map.SerializationConfig.introspect(SerializationConfig.java:973) 
```

在 java.policy 我尝试了以下设置：

```
// Jackson (JSON)
permission java.lang.reflect.ReflectPermission "suppressAccessChecks";
// permission java.lang.RuntimePermission "accessDeclaredMembers";
// permission java.lang.RuntimePermission "accessClassInPackage.java.util.ArrayList";
permission java.security.AllPermission; 
```

第一个权限与当前问题无关。我试图用第二个和第三个设置来解决它，但它不起作用。

只有最后一个设置有帮助，但这已经很重要了......有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:04:02.130

我不熟悉 Domino XPages，但我认为它遵循标准的 Java 安全方案，所以这里有一些想法/想法：

不要将您的应用程序特定的安全配置放在“全局”空间中。相反，找到正确的代码库并将其添加到 java.policy 文件中它自己的 codepase 部分：

```
grant codeBase "myCodeBase" {
    // Security configuration here, e.g.
    // permission java.security.AllPermission;
    // If you end up using AllPermissions, at least it only applies to your app
}; 
```

弄清楚你的“codeBase”是什么，然后用它代替“myCodeBase”。

对于不同类型的访问所需的特定权限，您可以查看文档[Permissions in Java™ SE 7 Development Kit (JDK)](http://download.java.net/jdk8/docs/technotes/guides/security/permissions.html)。在您的堆栈跟踪中，似乎`getDeclaredMethods`是导致问题的调用。在提到的文档中，描述了所需的权限：

> java.lang.类
> 
> > 公共类[] getDeclaredClasses() 公共字段[] getDeclaredFields()
> > 
> > 公共方法[] getDeclaredMethods()
> > 
> > 公共构造函数[] getDeclaredConstructors()
> > 
> > 公共字段 getDeclaredField（字符串名称）
> > 
> > 公共方法 getDeclaredMethod(...)
> > 
> > 公共构造函数 getDeclaredConstructor(...)

需要权限

> 如果“this”类的类加载器与调用者的类加载器相同，则默认 checkMemberAccess 不需要任何权限。否则，它需要 java.lang.RuntimePermission "accessDeclaredMembers"。如果此类在包中，则还需要 java.lang.RuntimePermission "accessClassInPackage.{pkgName}"。

因此，您在策略文件中的注释条目似乎是正确的。如果您取消注释这些行，它应该可以解决这个特定的安全异常，但您可能会遇到新的异常。

**编辑：**您说不能为您的应用程序指定代码库，但您至少应该能够指定指向您的特定 jar 文件的代码库，如下所示：

```
grant codeBase "file://file_url_to_jar" { } 
```

它可能无法解决您的问题，但可以让您更进一步。

**编辑：**

如果一切都失败了，仍然无法正常工作，您可以打开 java 安全调试。它会产生大量输出，但有助于追踪安全错误。通过添加`-Djava.security.debug=all`到 JVM 启动选项来启用它。

**编辑：**

`accessDeclaredMembers`对于这个特定的权限`accessDeclaredMembers`（ .

# javascript - 目标手机

> ID：15759638
> 
> 赞同：1
> 
> 时间：2013-04-02T08:42:06.877
> 
> 标签：javascript, css, mobile, target

我想使用这样的 CSS 媒体查询来定位移动设备：

```
@media (min--moz-device-pixel-ratio: 1.5),
       (-o-min-device-pixel-ratio: 3/2),
       (-webkit-min-device-pixel-ratio: 1.5),
       (min-resolution: 1.5dppx) {

   /* your retina rules here */
} 
```

手机的正确设置是什么。假设我想避免定位平板电脑和更大的屏幕，而只定位手机？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:47:01.867

引用这个[答案](https://stackoverflow.com/a/7354648/1479606)：

```
min-width: 320px  // smartphones, iPhone, portrait 480x320 phones
min-width: 481px  // portrait e-readers (Nook/Kindle), smaller tablets @ 600 or @ 640 wide.
min-width: 641px  // portrait tablets, portrait iPad, landscape e-readers, landscape 800x480 and 854x480 phones
min-width: 961px  // tablet, landscape iPad, lo-res laptops ands desktops
min-width: 1025px // big landscape tablets, laptops, and desktops
min-width: 1281px // hi-res laptops and desktops 
```

# java - 获取regions start key和end key-HBase

> ID：15759641
> 
> 赞同：1
> 
> 时间：2013-04-02T08:42:14.253
> 
> 标签：java, hadoop, hbase

我有 hbase 0.94.0。我正在尝试检索所有区域的 StartKey 和 EndKey。

我使用以下代码在 hbase 中获取区域。

```
MetaScanner ms=new MetaScanner();
System.out.println("Region of .META. "+ms.listAllRegions(config)); 
```

它产生了以下输出。

```
Region of .META. [{NAME => 'Student9,,1364452609604.9955bddb298229d6b9fa749dfa7d6b40.', STARTKEY => '', ENDKEY => '0011000', ENCODED => 9955bddb298229d6b9fa749dfa7d6b40,}, {NAME => 'Student9,0011000,1364452609604.f1766f38ceabbe6400c266f99d1a9a29.', STARTKEY => '0011000', ENDKEY => '0011\x85\x85\x85', ENCODED => f1766f38ceabbe6400c266f99d1a9a29,}, 
```

现在我想为`.META.`表中的每个区域检索 startkey 和 endkey。

我该怎么做？帮助示例代码！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:39:33.427

```
Pair<byte[][],byte[][]> pair=table1.getStartEndKeys();
            byte[][] start=pair.getFirst();
            byte[][] end=pair.getSecond();
            for(int c=0;c<start.length;c++)
            {
                    String st_end=new String(start[c]);
                    String en2=new String(end[c]);      
                    System.out.println("StartKey :"+st_end+" "+"End Key :"+en2);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T19:40:24.177

在 Java 中，

```
 try (HTable table = new HTable(new JobConf(HBaseConfiguration.create()), TABLE_NAME)) {
        byte[][] keys = table.getStartKeys();
        for (byte[] keyBytes : keys) {
            String key = new String(keyBytes, StandardCharsets.UTF_8);
            // first region does not have start key (is null)
            // last region does not have end key
            if (StringUtils.isNotBlank(key)) {
                System.out.println(key);
            }
        }
    } 
```

# c# - 绘制矩形 C# Mouse_down 工作 Mouse_up 不

> ID：15759644
> 
> 赞同：0
> 
> 时间：2013-04-02T08:42:22.140
> 
> 标签：c#, forms, draw, rectangles

我想在 mouse_down 事件工作正常的窗体上绘制一个矩形，但是我如何对 mouse_up 进行编程。我应该如何确定起始坐标。

[http://oi49.tinypic.com/2wcnof8.jpg](http://oi49.tinypic.com/2wcnof8.jpg)

```
 Rectangle rect = new Rectangle();
    Color rastercolor = Color.Black;

    private void drawGrid(Color rastercolor)
    {
        Graphics gfx = this.CreateGraphics();
        Pen pen = new Pen(rastercolor);
        for (int i = 0; i <= 2000; i = i + 20)
        {
            gfx.DrawLine(pen, 0, i, 2000, i);
        }
        for (int x = 0; x < 2000; x = x + 20)
        {
            gfx.DrawLine(pen, x, 0, x, 2000);
        }
    }

    protected override void OnMouseDown(MouseEventArgs e)
    {
        rect = new Rectangle(e.X, e.Y, 0, 0);

        if (e.Button == MouseButtons.Middle)
        {
            ColorDialog coldial = new ColorDialog();
            coldial.ShowDialog();
            Color rastercolor = coldial.Color;
            tekenGrid(rastercolor);
        }
    }

    protected override void OnMouseMove(MouseEventArgs e)
    {
        if (e.Button == MouseButtons.Left)
        {
            rect = new Rectangle(rect.Left, rect.Top, e.X - rect.Left, e.Y - rect.Top);
        }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        tekenGrid(rastercolor);
        using (Pen pen = new Pen(Color.Red, 2))
        {
            e.Graphics.DrawRectangle(pen, rect);
        }
    }

    private void Frm1_MouseUp(object sender, MouseEventArgs e)
    {
        Graphics g = this.CreateGraphics();
        Pen pen = new Pen(Color.Red, 2);
        g.DrawRectangle(pen, rect);
    }

    private void Frm1_Load(object sender, EventArgs e)
    {

    }

    private void Frm1_MouseDown(object sender, MouseEventArgs e)
    {
        Graphics g = this.CreateGraphics();
        Pen pen = new Pen(Color.Blue, 2);
        g.DrawRectangle(pen, rect);
    }
} 
```

}

任何帮助将不胜感激，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:09:52.363

不确定这是否是您的目标。请尝试此代码。

```
 public partial class Form1 : Form
 {
    public Form1()
    {
        InitializeComponent();
        this.DoubleBuffered = true;
    }

    Rectangle rect = new Rectangle(); 
       Color _rastercolor = Color.Black;
       private Pen _pen=new Pen(Color.Red,2);

        private void tekenGrid(Color rastercolor,  Graphics gfx)
        {

            Pen pen = new Pen(rastercolor);
            for (int i = 0; i <= 2000; i = i + 20)
            {
                gfx.DrawLine(pen, 0, i, 2000, i);
            }
            for (int x = 0; x < 2000; x = x + 20)
            {
                gfx.DrawLine(pen, x, 0, x, 2000);
            }
        }

        protected override void OnMouseDown(MouseEventArgs e)
        {
            rect = new Rectangle(e.X, e.Y, 0, 0);

            if (e.Button == MouseButtons.Middle)
            {
                ColorDialog coldial = new ColorDialog();
                coldial.ShowDialog();
                Color rastercolor = coldial.Color;
                tekenGrid(rastercolor,this.CreateGraphics());
            }
            else
            base.OnMouseDown(e);
        }

        protected override void OnMouseMove(MouseEventArgs e)
        {
            if (e.Button == MouseButtons.Left)
            {
                rect = new Rectangle(rect.Left, rect.Top, e.X - rect.Left, e.Y - rect.Top);
                this.Refresh();
            }

            base.OnMouseMove(e);
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            tekenGrid(_rastercolor,e.Graphics);
                e.Graphics.DrawRectangle(_pen, rect);
        }

        private void Frm1_MouseUp(object sender, MouseEventArgs e)
        {
            _pen = new Pen(Color.Red, 2);
            this.Refresh();
        }

        private void Frm1_Load(object sender, EventArgs e)
        {

        }

        private void Frm1_MouseDown(object sender, MouseEventArgs e)
        {
           _pen = new Pen(Color.Blue, 2);

        }

} 
```

# mysql - MySQL 查询 - 改进帮助

> ID：15759647
> 
> 赞同：0
> 
> 时间：2013-04-02T08:42:33.213
> 
> 标签：mysql, performance, query-optimization

我有这个查询要执行：

```
SELECT u1.firstname,
       u1.lastname,
       u1.totalcommission,
       u1.userid,
       count(DISTINCT u2.userid) AS level1,
       count(DISTINCT u3.userid) AS level2
FROM users AS u1
INNER JOIN users AS u2 ON u1.userid = u2.affiliate1
AND u2.signupdate BETWEEN '2011-01-01 00:00:00' AND '2013-04-02 23:59:59'
LEFT JOIN users AS u3 ON u1.userid = u3.affiliate2
WHERE u1.usertypeid != '1'
GROUP BY u1.userid
ORDER BY count(DISTINCT u2.userid) DESC 
```

表的索引：

```
PRIMARY BTREE   Yes No  userid  41318   A   No  
email   BTREE   Yes No  email   41318   A   No  
affiliate1  BTREE   No  No  affiliate1  1967    A   Yes 
affiliate2  BTREE   No  No  affiliate2  258 A   Yes 
signupdate  BTREE   No  No  signupdate  41318   A   No 
```

查询有效，但问题是速度非常慢（表 users 有 43k 行，仅此而已），由于 count(distinct) 函数，它需要大约 10 秒。有没有办法用性能更好的东西代替它？

谢谢，

/卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:08:43.727

您已经按 user_id 分组，而不是按订单计数。或者，您可以使用 DESC 和 group by 简单地订购它

```
SELECT
  u1.firstname,
  u1.lastname,
  u1.totalcommission,
  u1.userid,
  count( distinct u2.userid ) AS level1,
  count( distinct u3.userid ) AS level2
FROM users AS u1
  INNER JOIN users AS u2
    ON u1.userid = u2.affiliate1
  INNER JOIN users AS u3
    ON u1.userid = u3.affiliate2
WHERE u1.usertypeid != '1'
    and u2.signupdate between '2011-01-01 00:00:00'
    and '2013-04-02 23:59:59'
GROUP BY u1.userid DESC , u2.userid , u3.userid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:57:15.867

由于一些意想不到的笛卡尔结果，您可能会受到重创。我会尝试以下。由于您的第一个内部联接基于必须存在的affiliate1 条目，因此我将预先汇总这些条目以获得每个附属公司的 1 条记录，其中附属公司的 ID 加入回用户表，并且仅获取用户类型为 != '1' 的那些。这基本上为您创建了您的计数 DISTINCT。然后，加入用户表以获取此会员的用户信息。然后，做一个类似的左连接，但是对于第二个会员（如果有的话......也基于会员的用户类型！='1'）。

现在，您将在 MAX 中获得每张桌子 1:1 的比例，并且应该非常快。

```
SELECT 
      u1.firstname,
      u1.lastname,
      u1.totalcommission,
      u1.userid,
      PreAggUA1.AffiliateUsers as Level1,
      PreAggUA2.AffiliateUsers as Level2
   FROM 
      ( select 
              ua1.affiliate1,
              count(*)  as AffiliateUsers
           from users ua1
              join users ua1b
                  on ua1.affiliate1 = ua1b.userid
                 and ua1b.userTypeID != '1'
              group by
                 ua1.affiliate1 ) as PreAggUA1

         JOIN Users u1
            on PreAggUA1.Affiliate1 = u1.UserID

         LEFT JOIN ( select 
                           ua2.affiliate2,
                           count(*)  as AffiliateUsers
                        from 
                           users ua2
                              join users ua2b
                                 on ua2.affiliate2 = ua2b.userid
                                and ua2b.userTypeID != '1'
                         group by
                            ua2.affiliate2 ) as PreAggUA2
            on PreAggUA1.Affiliate1 = PreAggUA2.Affiliate2
   ORDER BY 
      PreAggUA1.AffiliateUsers DESC 
```

# c# - 来自数据库错误的 Datagridview 数据绑定

> ID：15759649
> 
> 赞同：0
> 
> 时间：2013-04-02T08:42:38.210
> 
> 标签：c#, sql-server-2005-express

我的 Windows C# 应用程序中有一个 datagridview。我正在将我的 SQL Server 2005 数据库中的一些数据绑定到其中。datagridview 已经有固定数量的列和行及其各自的名称。问题是数据显示在我希望获取数据的列之后。代码如下

```
SqlCommand cmd = new SqlCommand("Select * from INV_details_1 where i_n = '" + textBox3.Text + "'", sconn);

            SqlDataAdapter da2 = new SqlDataAdapter();

            da2.SelectCommand = cmd;

            DataSet ds2 = new DataSet();

           da2.Fill(ds2);

            dgv_details.DataSource = ds2.Tables[0].DefaultView; 
```

问题是数据显示在我想要的列标题之后。我希望获取这些指定列中的数据。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:48:52.877

`DataPropertyName`您必须使用Datagridview 列的属性将 datagridview 的每一列与数据库中的相应列映射。前任：

```
dgv_details.Columns[0].DataPropertyName = "Name" 
```

这会将 datagridview 中的第 0 列与数据表中的“名称”列映射

# c++ - 为什么要为 char* 和 w_char* 而不是其他原始类型制作 uninitialized_copy( ) 的专用版本？

> ID：15759650
> 
> 赞同：1
> 
> 时间：2013-04-02T08:42:39.727
> 
> 标签：c++, templates, stl

这是 的专业化版本`char*`：

```
inline char* uninitialized_copy(const char* first, const char* last, char* result)
{
  memmove(result, first, last-first);
  return result + (last - first);
} 
```

据说 memmove 是 char* 和 w_char* 实现该方法最有效的方式。但是为什么 int* 等基本类型不能这样实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T19:51:10.760

在设计标准时，人们相信像这样的一些专业化可以用来提高性能。事实证明，编译器变得更好，并且无论如何都从基本模板生成相同的代码。

许多当前的编译器甚至具有`memmove`内置函数并在它们可以利用已知对齐或当对象的大小恰好是寄存器大小的偶数倍时生成改进的内联版本。

这是[我最喜欢的示例](https://stackoverflow.com/a/11639305/597607)，当编译器意识到可以使用单个寄存器移动来复制 8 字节字符串时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T19:57:24.413

C++ 标准实际上并没有说应该`uninitialized_copy`对这些类型进行专门化；它只是要求应该有一个调用的模板函数`uninitialized_copy`应该在迭代器范围内工作。但是，C++ 标准确实允许编译器和库的作者实现他们自己的这个函数的特化，如果他们选择这样做的话。

有很多充分的理由专门`uninitialized_copy`研究单个角色。在某些情况下，编译器提供了[内在函数](http://en.wikipedia.org/wiki/Intrinsic_function)，`memmove`并且`memcpy`由于正常优化，它们比它们通常输出的代码要快得多。因此，专门针对`char`and`wchar_t`类型的代码是有意义的，因为这些内在函数将优于标准循环。

我很难确切地说出图书馆作者为什么*不*专门研究其他类型。我的猜测是他们对此进行了测试，并没有发现太大的性能差异。由于库作者在提供标准模板版本之上所做的任何事情都`uninitialized_copy`超出了规范的要求，这可能只是因为他们很忙，需要处理其他事情。您必须直接与他们联系以获得更明确的答案。

简而言之 - 图书馆作者根本不需要提供任何专业化，他们选择加入这个专业化是很好的。如果不联系他们，很难明确地说出他们为什么不选择为其他类型这样做。

希望这可以帮助！

# c# - 需要一个组合框绑定问题修复

> ID：15759659
> 
> 赞同：0
> 
> 时间：2013-04-02T08:43:15.787
> 
> 标签：c#, sql, wpf, combobox

你好。我正在学习 C# 和 WPF，请在我的代码中添加您的代码，这样我就可以轻松理解了。我是`Binding`使用`CombBox`C# 代码的 WPF 中的一员，我确实需要修复这段代码中的问题，但我无法在我的代码中找到我可以写的更多内容。

```
string sql = "SELECT " + ColumnsValue + "," + ColumnsName + " FROM " + TableName;
SqlDataAdapter da = new SqlDataAdapter(sql, Connection);
DataSet ds = new DataSet();                
da.Fill(ds, TableName);
ComboBox.ItemsSource = ds.Tables[0].DefaultView;
ComboBox.DisplayMemberPath = ds.Tables[0].Columns[ColumnsName].ToString();
ComboBox.SelectedValuePath = ds.Tables[0].Columns[ColumnsValue].ToString(); 
// Some Code here to to fix this
ComboBox.Selected = "--Select--"; 
```

我需要帮助来修复它如何使用一个`Select`值作为顶部的选定值`ComboBox`。希望有朋友有解决办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:42:08.923

您可以创建名为 defaultTable 的表的新对象并分配 defaultTable.ColumnName = "--Selected--" defaultTable.ColumnValue = 0 （如果 columnValue 是 int，否则如果 columnValue 是字符串，则为“0”） ComboBox.Insert(0, defaultTable) ;

然后绑定ItemSource。希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:05:26.030

这是在 stackoverflow 中找到的一个答案。

这是[链接](https://stackoverflow.com/questions/6443169/set-default-value-for-combobox)

有些选项是

1.  如果您使用文件隐藏代码，则可以执行以下代码片段之类的操作。

    ```
    myComboBox.Items.Insert(0, "--Select Item--");

    myComboBox.SelectedIndex = 0; 
    ```

2.  您可以使用价值转换器

请查看这篇[文章](http://graemehill.ca/nullable-combo-boxes-in-wpf/)以使用值转换器

# android - 当我单击恢复按钮时如何恢复它？

> ID：15759666
> 
> 赞同：1
> 
> 时间：2013-04-02T08:43:31.277
> 
> 标签：android, handler, runnable, thread-sleep, postdelayed

//自应用程序启动以来的时间计数器，一个后台任务

```
 private long mStartTime = 0L; 
```

//私有 long mPauseTime = 0L;

```
 private TextView mTimerLabel; 
```

//Handler 处理消息到定时器任务

```
 private Handler mHandler = new Handler();

    static final int UPDATE_INTERVAL = 1000;

    String timerStop1;

     @Override
     public void onCreate(Bundle savedInstanceState) {

     mTimerLabel = (TextView) findViewById(R.id.textTimer);

     if(mStartTime == 0L){
         mStartTime = SystemClock.uptimeMillis();
         mHandler.removeCallbacks(mUpdateTimeTask);
         mHandler.postDelayed(mUpdateTimeTask, 100);

       }                

        timerPauseButton.setTag(1);
        timerPauseButton.setText("Pause");

 final Button timerPauseButton = (Button) findViewById(R.id.btnTimerPause);

        timerPauseButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view){ 
```

//更改按钮文本

```
 final int status =(Integer) view.getTag();

                  if(status == 1) {
                      mHandler.removeCallbacks(mUpdateTimeTask);

                      mTimerLabel.setText(timerStop1);

                      timerPauseButton.setText("Resume");
                      view.setTag(0); //resume
                  } else{

                      mHandler.removeCallbacks(mUpdateTimeTask);
                      mHandler.postDelayed(mUpdateTimeTask, 100);
                      timerPauseButton.setText("Pause");
                      view.setTag(1); //pause
                      }

            }
        });

   } 
```

//OnCreate结束

```
 private Runnable mUpdateTimeTask = new Runnable(){

            public void run() { 
                 {
                  final long start = mStartTime;
                  long millis = SystemClock.uptimeMillis()- start;

                  int seconds = (int) (millis / 1000);
                  int minutes = seconds / 60;
                  seconds = seconds % 60;

                  mTimerLabel.setText("" + minutes + ":"
                                                  + String.format("%02d", seconds));                             

                  timerStop1 = minutes + ":"
                                + String.format("%02d", seconds);

                  mHandler.postDelayed(this, 200);         
                  }

            }    
    }; 
```

为什么我单击暂停按钮但计时器也会在后台运行？例如，当我在 5 秒后单击 3 秒内的暂停时，我单击了恢复，但它继续以 8 秒而不是 3 秒继续？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:02:16.973

`SystemClock.uptimeMillis()`当设备未处于深度睡眠状态时，时钟会继续运行。您只捕获一次开始时钟时间，因此当前和增长`mStartTime`之间的差异。暂停只会停止将时差格式化为.`upTimeMillis()``mStartTime``mUpdateTimeTask``mTimerLabel`

# cassandra - 在 cassandra 1.2 中重命名键空间和列族

> ID：15759667
> 
> 赞同：1
> 
> 时间：2013-04-02T08:43:31.567
> 
> 标签：cassandra, rename, cql3

如何在 cassandra 1.2 中重命名键空间和列族？我知道不再支持 cassandra-cli rename api -[如何在 Cassandra 中重命名键空间](https://stackoverflow.com/questions/7649104/how-to-rename-keyspace-in-cassandra)。也许CQL3中有一些api？或者一些用于创建新列族并将所有数据从旧列族处理到新列族的 api？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:51:45.687

重命名在内部被禁用，而不仅仅是在 thrift API 中。所以也没有 CQL 命令可以做到这一点。

但是，这里描述了一个手动过程：

[https://issues.apache.org/jira/browse/CASSANDRA-1585](https://issues.apache.org/jira/browse/CASSANDRA-1585)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-18T10:15:05.107

对于仅重命名列族，您也可以按照以下说明进行操作：

[http://mail-archives.apache.org/mod_mbox/cassandra-user/201201.mbox/%3C4EF306AC-98D5-45BE-A29C-B68187FBA9C9@thelastpickle.com%3E](http://mail-archives.apache.org/mod_mbox/cassandra-user/201201.mbox/%3C4EF306AC-98D5-45BE-A29C-B68187FBA9C9@thelastpickle.com%3E)

基本上是创建新的 CF，将 SStables 从旧列族复制到重命名文件的列族。

# php - 使用 php 函数在字符串中搜索单词

> ID：15759675
> 
> 赞同：5
> 
> 时间：2013-04-02T08:43:47.617
> 
> 标签：php, string, function

当我搜索“银行”时，它应该显示以下列表中的 Bank-List1、Bank-List2。

铁路列表、银行列表 1、银行列表 2、教育、电子商务、文章、铁路列表 1。

有没有要显示的php函数？

我得到了完全匹配的输出。但是这种类型的搜索没有结果。

请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:45:29.567

你可以使用[stristr](http://php.net/stristr)

`stristr — Case-insensitive strstr()`

```
<?php    // Example from PHP.net
  $string = 'Hello World!';
  if(stristr($string, 'earth') === FALSE) {
    echo '"earth" not found in string';
  }
// outputs: "earth" not found in string
?> 
```

因此，对于您的情况，如果您的列表位于名为`$values`

你可以做

```
foreach($values as $value)
{
      if(stristr($value, 'bank') !== FALSE) 
      {
        echo $value."<br>";
      }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:54:07.373

您可以使用**[stristr](http://php.net/manual/en/function.stristr.php)**来完成。此函数返回从第一次出现 needle 到结束的所有 haystack。返回匹配的子字符串。如果没有找到 needle，则返回 FALSE。

这是完整的代码：

```
<?php

  $str="Railway-List, Bank-List1, Bank-List2, Education, Ecommerce, Articles, Railway-List1";
  $findme="bank";
  $tokens= explode(",", $str);
  for($i=0;$i<count($tokens);$i++)
  {
    $trimmed =trim($tokens[$i]);
    $pos = stristr($trimmed, $findme);
    if ($pos === false) {}
    else
    {
        echo $trimmed.",";
    }
  }
?> 
```

**[演示](http://ideone.com/W1nWEF)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:02:08.193

此解决方案仅对这种文本模式有效，例如：word1、word2、word3

```
<?php
$text = 'Railway-List, Bank-List1, Bank-List2, Education, Ecommerce, Articles, Railway-List1.';

function search_in_text($word, $text){

 $parts = explode(", ", $text);
 $result = array();
 $word = strtolower($word);

 foreach($parts as $v){

  if(strpos(strtolower($v), $word) !== false){
   $result[] = $v;
  }

 }

 if(!empty($result)){
    return implode(", ", $result);
 }else{
    return "not found";
 }
}

echo search_in_text("bank", $text);
echo search_in_text("none", $text);
?> 
```

输出：

```
Bank-List1, Bank-List2
not found 
```

# android - 处理 RecognitionListener 错误

> ID：15759676
> 
> 赞同：5
> 
> 时间：2013-04-02T08:43:50.460
> 
> 标签：android, speech-recognition

我正在使用 Android 的语音 API 来不断地从用户那里获取输入。但是，当发生错误时，这并不能很好地工作。

我所做的是在检测错误的方法中重新启动侦听器。它有时会起作用，但识别器经常挂起一段时间。特别是在检测到服务器、网络超时和识别器繁忙错误之后。这很烦人！

我找到了一些解决这个问题的尝试，但没有一个对我有用。

你有更好的主意吗？

这是我的代码：

```
private void startSR(){

    intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    //intent.putExtra(RecognizerIntent., value)
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, mContext.getPackageName());

    intent.putExtra(RecognizerIntent.EXTRA_MAX_RESULTS, 10);

    Log.d(TAG,"Speech recognition started!");
    if (recognizer != null) {
        recognizer = null;
        mListener = null;
    }

    Log.d(TAG,"setRecognitionListener");
    recognizer = SpeechRecognizer.createSpeechRecognizer(mContext);
    mListener = new Listener();

    recognizer.setRecognitionListener(mListener);

    recognizer.startListening(intent);

}
class Listener implements RecognitionListener{

    @Override
    public void onBeginningOfSpeech() {
        Log.i(TAG, "onBeginningOfSpeech");
        mStatus = "Beginning speech";
    }

    @Override
    public void onBufferReceived(byte[] buffer) {
        Log.i(TAG, "onBufferReceived");

    }

    @Override
    public void onEndOfSpeech() {
        Log.i(TAG, "onEndOfSpeech");
        mStatus = "Speech ended";
    }

    @Override
    public void onEvent(int eventType, Bundle params) {
        Log.i(TAG, "onEvent " + eventType);

    }

    @Override
    public void onPartialResults(Bundle partialResults) {
        Log.i(TAG, "onPartialResults");
        mStatus = "Partial results";
    }

    @Override
    public void onReadyForSpeech(Bundle params) {
        Log.i(TAG, "onReadyForSpeech");
        mReady = true;
        mStatus = "Speech engine ready";
    }
    @Override
    public void onRmsChanged(float rmsdB) {
        // TODO Auto-generated method stub

    }
    @Override
    public void onError(int error) {
        // TODO Auto-generated method stub
        mError = "";
        mStatus = "Error detected";
        switch (error) {
        case SpeechRecognizer.ERROR_NETWORK_TIMEOUT:                
            mError = " network timeout"; 
            startListening();
            break;
        case SpeechRecognizer.ERROR_NETWORK: 
            mError = " network" ;
            //toast("Please check data bundle or network settings");
            return;
        case SpeechRecognizer.ERROR_AUDIO: 
            mError = " audio"; 
            break;
        case SpeechRecognizer.ERROR_SERVER: 
            mError = " server"; 
            startListening();
            break;
        case SpeechRecognizer.ERROR_CLIENT: 
            mError = " client"; 
            break;
        case SpeechRecognizer.ERROR_SPEECH_TIMEOUT: 
            mError = " speech time out" ; 
            break;
        case SpeechRecognizer.ERROR_NO_MATCH: 
            mError = " no match" ; 
            startListening();

            break;
        case SpeechRecognizer.ERROR_RECOGNIZER_BUSY: 
            mError = " recogniser busy" ; 
            break;
        case SpeechRecognizer.ERROR_INSUFFICIENT_PERMISSIONS: 
            mError = " insufficient permissions" ; 
            break;

        }
        Log.i(TAG,  "Error: " +  error + " - " + mError);

        //startSR();
    }

    @Override
    public void onResults(Bundle results) {
        mStatus = "Got some results";
        mResultAvailable = true;
        String str = new String();
        Log.d(TAG, "onResults " + results);

        mResults = results.getStringArrayList(SpeechRecognizer.RESULTS_RECOGNITION);

        //mConfidences = results.getDoubleArray(SpeechRecognizer.CONFIDENCE_SCORES);

        Log.i(TAG, toString());

        startListening();

    }

}// class Listener

public ArrayList<String> getResults(){
    return mResults;
}
public void startListening(){
    if (SpeechRecognizer.isRecognitionAvailable(mContext)) {
        if (recognizer!=null){
            recognizer.startListening(intent);
            mResultAvailable = false;
            mResults = new ArrayList<String>();
        }
        else
            startSR();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T00:26:59.093

*   如果您收到识别器忙错误，您必须先打电话`cancel`，然后再打电话`startListening`
*   如果您遇到服务器或网络错误，您必须在调用之前检查网络连接`startListening`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T13:48:55.177

```
Intent RC = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);

        if (!RC.hasExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE))
        { 
            RC.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE, "com.dummy");
        } 

        sr.startListening(RC); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T09:42:38.653

尝试在错误后正确清理，例如调用`cancel`或`destroy`在`SpeechRecognizer`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-08T12:22:03.673

我发布这个很晚，但这可能会帮助一些人。我也面临同样的错误，而且在一段时间后它也没有听，我尝试了以下，它对我有所帮助，试试这样做，

```
case SpeechRecognizer.ERROR_RECOGNIZER_BUSY: 
        recognizer.destroy();
        startSR(); // As it destroys the current objects & calling startSR() will instantiate
                   // objects again 
```

# ios - 我可以这样使用PhoneGap吗？

> ID：15759680
> 
> 赞同：2
> 
> 时间：2013-04-02T08:44:09.250
> 
> 标签：ios, cordova

我想以这种方式使用phonegap：

1.  在本机中创建一个 iphone 项目，而不是在 phoneGap 中。
2.  在视图控制器中创建一个 uiwebview
3.  在该 webview 中使用 phoneGap 的 api。

我可以这样做吗？你能总结一下步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:49:05.613

是的你可以。
[在您的 iOS 应用程序中嵌入 PhoneGap](http://devgirl.org/2012/11/15/embed-cordovaphonegap-in-your-native-ios-app/)

# python - Python，etree：如何将实例复制到继承类的新实例中？

> ID：15759681
> 
> 赞同：0
> 
> 时间：2013-04-02T08:44:09.780
> 
> 标签：python, class, inheritance, elementtree

我编写了一个继承自 xml.etree.ElementTree.Element 类的类，以使用显示 etree 元素的完整标签名称的方法扩展该类，以及一种用 XML 值替换元素完整内容的简单方法细绳..

在新类的**init**方法中，我只想在实例化时将 etree 元素的副本作为参数传递。

第一次尝试是：

```
def __init__(self, elem):
     self = elem 
```

但是随后传递的“元素”的“子标签”列表丢失了。

下面的解决方案有效，但是否有一种“更智能”的方法可以将完整的“elem”复制到新对象中？

```
import xml.etree.ElementTree as ET

#
# this class allows to replace the content including all subelement of an etree element
# by an XML string content
#

class xmltag(ET.Element):

    # constructor
    def __init__(self, elem):

        self.tag = elem.tag
        self.text = elem.text
        self.attrib = elem.attrib
        self.tail = elem.tail
        for s in next(elem.iter()):
            self.append(s)

    # get string of complete start tag name                    
    def __get_tag_start(self):
        tag="<"+self.tag
        for k in self.attrib.keys():
            tag=tag+" "+k+"=\"" + self.attrib[k] + "\""

        return tag+">"

    # get string of end tag name
    def __get_tag_end(self):
        return "</" + self.tag + ">" + (self.tail or "")

    # get string of whole content between start and end tag
    def get_tag_content(self):

        content=self.text or ""
        for s in next(self.iter()):
            xs=xmltag(s)               
            content=content+xs.__get_tag_start()
            content=content+(xs.text or "")
            content=content+xs.__get_tag_end()

        return content

    # change tag name
    def set_tag_name(self,tagname):
        self.tag=tagname    

    # change content
    def set_tag_content(self,content):
        try:
            elem=ET.fromstring(self.__get_tag_start()+content+self.__get_tag_end())

            self.clear()
            self.tag = elem.tag
            self.text = elem.text
            self.attrib = elem.attrib
            self.tail = elem.tail
            for s in next(elem.iter()):
                self.append(s)

            elem.clear()

        except:
            pass

#
# testdata
#

xmldata="""<?xml version="1.0"?>
<data>
    <country name="Liechtenstein">
        <rank>1</rank>
        <year>2008</year>
        <gdppc>141100</gdppc>
        <neighbor name="Austria" direction="E"/>
        <neighbor name="Switzerland" direction="W"/>
    </country>
    <country name="Singapore">
        <rank>4</rank>
        <year>2011</year>
        <gdppc>59900</gdppc>
        <neighbor name="Malaysia" direction="N"/>
    </country>
    <country name="Panama">
        <rank>68</rank>
        <year>2011</year>
        <gdppc>13600</gdppc>
        <neighbor name="Costa Rica" direction="W"/>
        <neighbor name="Colombia" direction="E"/>
    </country>
</data>"""

#
# MAIN
#

if __name__ == "__main__":

    root = ET.fromstring(xmldata)
    element=root.find("country")

    if ET.iselement(element):

        x=xmltag(element)
        print(x.get_tag_content())

        x.set_tag_content("abc")
        print(ET.tostring(x,encoding="unicode"))

        x.set_tag_content("EFG")
        print(ET.tostring(x,encoding="unicode"))

        x.set_tag_name("test")
        print(ET.tostring(x,encoding="unicode")) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:24:26.133

这更正了原始`__init__()`方法中的错误：

```
def __init__(self, elem):
    self.elem = elem 
```

这会将整个复制`elem`到您的实例中，您现在可以访问其属性，例如`self.elem.tag`or `self.elem.text`。

# c# - 更新后台工作人员 winforms 中的标签文本

> ID：15759688
> 
> 赞同：14
> 
> 时间：2013-04-02T08:44:29.540
> 
> 标签：c#, winforms, backgroundworker

我正在使用 BackGroundWorker 类在 sqlserver 中插入一些值。我在这里有 for 循环来插入值。我正在使用以下代码

```
 public void bw_Convert_DoWork(object sender, DoWorkEventArgs e)
    {           
        e.Result = e.Argument;
        for (int i = 0; i <  fTable.Rows.Count; i++)
        {
            try
            {
                SqlCommand cmd = new SqlCommand("INSERT INTO TBL_CDR_ANALYZER (LNG_UPLOAD_ID, DAT_START, LNG_DURATION, INT_DIRECTION, INT_CALL_DATA_TYPE, \n" +
                    "TXT_TARGET_NUMBER, TXT_OTHER_PARTY_NUMBER, TXT_TARGET_IMSI, TXT_TARGET_IMEI, TXT_TARGET_CELL_ID, TXT_ROAMING_NETWORK_COMPANY_NAME) VALUES \n" +
                    "(@UPLOAD_ID, @START_DATE, @DURATION, @DIRECTION, @CALL_TYPE, @TARGET_NUMBER, @OTHER_PARTY_NUMBER, @IMSI, @IMEI, @CELL_ID, @ROAMING_NAME)", sqlCon);
                cmd.Parameters.Add("@UPLOAD_ID", SqlDbType.Int).Value = 1;
                cmd.Parameters.Add("@START_DATE", SqlDbType.DateTime).Value = fTable.Rows[i]["CallDate"];
                cmd.Parameters.Add("@DURATION", SqlDbType.Int).Value = fTable.Rows[i]["CallDuration"];
                cmd.Parameters.Add("@DIRECTION", SqlDbType.Int).Value = GetCallDirection(fTable.Rows[i]["CallDirection"].ToString());
                cmd.Parameters.Add("@CALL_TYPE", SqlDbType.Int).Value = GetCallType(fTable.Rows[i]["CallType"].ToString());
                cmd.Parameters.Add("@TARGET_NUMBER", SqlDbType.VarChar, 25).Value = fTable.Rows[i]["TargetNo"];
                cmd.Parameters.Add("@OTHER_PARTY_NUMBER", SqlDbType.VarChar, 25).Value = fTable.Rows[i]["OtherPartyNo"];
                cmd.Parameters.Add("@IMSI", SqlDbType.VarChar, 50).Value = fTable.Rows[i]["IMSI"];
                cmd.Parameters.Add("@IMEI", SqlDbType.VarChar, 50).Value = fTable.Rows[i]["IMEI"];
                cmd.Parameters.Add("@CELL_ID", SqlDbType.VarChar, 50).Value = fTable.Rows[i]["CellID"];
                cmd.Parameters.Add("@ROAMING_NAME", SqlDbType.NVarChar, 255).Value = fTable.Rows[i]["RoamingCompany"];
                sqlCon.Open();
                cmd.ExecuteNonQuery();
                sqlCon.Close();
            }
            catch (SqlException ex)
            {

            }
            finally
            {
                sqlCon.Close();
            }
            bw_Convert.ReportProgress((100 * i) / fTable.Rows.Count);  
            **Label1.Text = i.ToString() + "Files Converted";** // getting error Here.                  
        }    
    } 
```

我如何在此处更新 Label1 文本

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-02T08:47:09.963

这应该可以从后台线程更改 GUI。

```
Label1.Invoke((MethodInvoker)delegate {
   Label1.Text = i.ToString() + "Files Converted";}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T08:48:39.767

您无法访问 UI 界面对象，例如 DoWork 方法中的标签。
DoWork 运行在与 UI 元素不同的线程上。
您需要通过 ProgressChanged 事件或调用委托来更新您的界面。

首先将`WorkerReportsProgress`BackgroundWorker 的属性设置为 True，然后，对`ReportProgress`方法的调用将引发`ProgressChanged`将在界面元素的同一线程中运行的事件

```
private void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
     Label1.Text = e.ProgressPercentage.ToString();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T08:57:44.990

您必须实施 ProgressChanged-Event。

```
private void bw_Convert_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
   //The progress in percentage
   int progress = e.ProgressPercentage;
   //A custom-value you can pass by calling ReportProgress in DoWork
   object obj = e.UserState;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-12T03:01:49.973

//你也可以试试这个更新你的标签

```
this.Invoke(new MethodInvoker(delegate 
          {
             Label1.Text = i.ToString() + "Files Converted";
          })); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-01T15:17:33.890

我遇到了同样的问题。我已经在 Progress Changed Background Worker Event 中，但即使使用上述两个版本的 Method Invoker 也无济于事。然后我尝试了这个并且它起作用了：

```
 lblCount.Text = string.Format("Total Directories: {0} Total Files: {1}", TotalDirectories, TotalFiles);
 lblCount.Update(); 
```

# c - C中的链表访问冲突

> ID：15759691
> 
> 赞同：1
> 
> 时间：2013-04-02T08:44:35.937
> 
> 标签：c, linked-list, access-violation

我不确定我是否正确理解了链表的概念。我想做的是创建一个链表，它接收整数 6 作为它的第一个“数据”。相反，当我尝试将整数写入第一个节点的数据时，我得到了这个访问冲突错误。我在这里错过了什么具体的东西吗？

```
 ///////////////////////////////

typedef struct List_Node
{
    int data;
    struct List_Node* next;
}List_Node;

typedef struct List
{
    List_Node* head;
}List;

////////////////////////////////

List* create_list();
void print_list(List_Node *x);
void add_to_node(List_Node *a,int val);

////////////////////////////////

void main()
{
    List *a = create_list();
    List_Node *ind = a->head;
    printf("List:\n");
    add_to_node(ind,6);
}

void print_list(List_Node *a)
{
    while(a != NULL)
    {
        printf("%d \n",a->data);
        a = a->next;
    }
    return;
}

void add_to_node(List_Node *a,int val)
{
    a->data = val;
}

struct List* create_list()
{
struct List* list = (List*) malloc(sizeof(List));
list->head = NULL;
return list;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:48:30.533

代码按原样取消引用`NULL`指针：`a->head``NULL`

```
list->head = NULL; /* inside create_list()` and 'list' returned to ...*/

List_Node *ind = a->head; /* ... inside main(), and then passed to */
add_to_node(ind,6);       /* add_to_node() ... */

a->data = val;            /* and dereferenced inside add_to_node(). */ 
```

取消引用`NULL`指针是未定义的行为。要更正，`malloc()`请记住 a`List_Node`并分配给`a->head`。建议创建一个`add_node()`分配内存并将新`int`值分配给新`malloc()`d 节点的函数。

* * *

[我要转换 malloc 的结果吗？](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:02:40.810

正如所有人都指出的那样，您将`NULL`指针取消引用为您的`list->head`contains `NULL`。

我应该指出的另一件事是，您正在创建一个列表。但不是任何节点。列表中没有节点。您必须为节点分配内存然后使用它。

`add_to_node()`因此，您可以使用`add_node`将`list`或和 值作为参数的函数来代替`head`，创建一个节点（即为节点分配内存），设置值并将其添加到列表中。

此外，在您的情况下，该结构`List`是多余的，因为它仅包含一个成员。相反，您可以简单地使用`List_node* head`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:16:20.640

## 你在做什么：

### 在`create_list`：

*   为`List`指针分配内存。
*   将列表的头部设置为 NULL。

### 在`add_to_node`：

*   将指定节点指针的`data`元素设置为指定的`val`.

### 在`main`：

*   通过调用创建`List`指针。这个列表有一个 NULL 头。`a``create_list`
*   初始化`List_Node`指针 ,`ind`以指向已创建列表的头部（为 NULL）。
*   试图`ind`通过调用将 的数据元素设置为 6 `add_to_node`。
    *   **这是您的程序导致访问冲突异常的地方。**
    *   `ind`=空。因此`NULL->data`=未定义的行为。

* * *

## 你应该做什么：

### 在`create_list`：

*   为`List`指针分配内存，比如`linked_list`.
*   `linked_list`为' 的`head`指针分配内存。
*   对于`linked_list`'s `head`，分别初始化`data`和`next`指向 0 和 NULL 的指针。

### 在`add_to_node`：

*   做你现在正在做的同样的事情。

### 在`main`：

*   通过调用创建一个`List`指针。现在，这个列表将有一个有效的、已初始化的 NULL 头，但没有有意义的数据。`a``create_list`
*   `data`通过调用设置列表的头部`add_to_node(a->head, 6);`。

**注意：**这只会确保您的列表中有一个头节点。您没有在任何地方创建其他节点。

# c - 将结构存储在共享内存中是一种好习惯吗？

> ID：15759700
> 
> 赞同：1
> 
> 时间：2013-04-02T08:44:54.857
> 
> 标签：c, shared-memory

我一直在寻找，我没有找到任何有价值的东西，所以我在这里问。

将结构直接保存在 C 的共享内存中是一种好习惯吗？我的意思是，像这样：

```
typedef struct {
    ...
} foo;

int id = shmget(sizeof(foo), ...);
foo* bar = (foo*) shmat(id, ...); 
```

或者分配一个数组并仅存储您需要的字段是否更好，例如

```
#define SHM_FIELD_A(shm) (*(shm))
#define SHM_FIELD_B(shm) (*(shm) + 1) 
```

如果我想存储一个复杂的结构（带有双精度、字符、不同大小的数据），使用结构可能会更好。但是，如果我只想存储整数，哪个会更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:47:22.417

首先，请不要`shmat()`在C中强制转换返回值，这样做没有意义，它可以隐藏错误。

其次，你从来不说“好”和“更好”是什么意思；你在优化什么？

如果这对应用程序有意义，我当然会推荐存储结构，如果这些值足够相关以保证将它们存储在结构中，那么共享该结构应该同样有意义。

当然，这意味着共享此访问权限的应用程序是如此紧密耦合，以至于必须共享一个结构声明是没有问题的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:53:00.167

通过存储结构，您将把所有无聊的工作（字段访问、分配大小、对齐）委托给编译器。我认为将它作为一个结构没有任何危险。结构或数组 - 它仍然是一块内存。当您想通过有意义的名称访问内部的某些内容时，结构布局告诉编译器要生成哪些偏移量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:49:38.317

共享内存的主要用途是进程间通信（IPC）。如果这不是目标，我找不到任何理由保存在共享内存中

# c# - 如何从 XML 获取我想要的节点

> ID：15759707
> 
> 赞同：1
> 
> 时间：2013-04-02T08:45:10.207
> 
> 标签：c#, xml, xpath, .net-2.0

```
<?xml version="1.0" encoding="utf-8" ?> 
  <Root>
       <Fruits>
            <Fruit>hahahaha</Fruit>
       </Fruits>
  </Root> 
```

如果我尝试这段代码，

```
 string[] cFruitName; int i=0;
  XmlDocument a= new XmlDocument();
  a.LoadXml(getXML());

  foreach (XmlNode xn in a)
  {
     cFruitName[i] = xn.Text;
     i++;
  } 
```

但我得到`null`了`xn.Text`。

我想要的只是获取水果的值，例如本例中的“hahahah”。

**编辑**

我现在更改了我的 XML。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T08:46:35.443

```
var xml = XDocument.Parse(getXML());

var fruits = xml.Descendants("fruit").Select(n => n.Value);

Console.WriteLine(string.Join(Environment.NewLine, fruits)); 
```

印刷

```
hahahaha 
```

**对.net 2.0**版本使用 XPath

```
XmlDocument xml = new XmlDocument();
xml.LoadXml(getXML());

XmlNodeList fruits = xml.SelectNodes("//fruit");

foreach (XmlNode fruit in fruits)
{
    Console.WriteLine (fruit.InnerText);
} 
```

打印相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:46:43.097

试试这个：

```
string[] cFruitName; int i=0;
XmlDocument a= new XmlDocument();
a.LoadXml(getXML());

foreach (XmlNode xn in a.Where(x=>x.Text != null))
{
   cFruitName[i] = xn.Text;
   i++;
} 
```

或者

```
string[] cFruitName; int i=0;
XmlDocument a= new XmlDocument();
a.LoadXml(getXML());

foreach (XmlNode xn in a.Where(x=>x.Name == "fruit"))
{
   cFruitName[i] = xn.Text;
   i++;
} 
```

# python - 使用python读写CSV文件

> ID：15759710
> 
> 赞同：-4
> 
> 时间：2013-04-02T08:45:15.940
> 
> 标签：python

我有一个名为 temp.csv 的 csv，其中 3 列

```
Name    Iteration     Value //this temp.csv file
module1   1             10
module2   2             20
module3   3             30
module4   4             40
module1   5             50
module2   6             60
module3   7             70
module4   8             80
module1   9             90 
```

现在我想要一个名为 accumuated.csv 的新 csv

```
Name    Iteration     Value
module1   1,5,9        150 i.e. 10+50+90
module2   2,6          80 i.e. 20+60
modul13   3,7          100 i.e.  30+70
module4   4,8          120 i.e. 40+80 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:57:45.013

您应该维护一个以“名称”为键的字典。该值可以是带有“迭代”和“值”的列表。

遍历输入的 csv 文件并根据“名称”更新字典。

**示例代码：**

```
with open("111.csv") as f:
    lines = f.readlines()
    print lines

data = {}

for line in lines[1:]:
    print line
    name, iteration, value = line.split()
    print line
    if name not in data:
        data[name] = [[], 0]

    data[name][0].append(iteration)
    data[name][1] += int(value)

print data 
```

现在将其写回输出文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:05:38.253

我建议使用名称作为键和列表的字典，包括迭代（作为子列表）和总和作为值，例如：

```
d = {}
with open("orig.csv") as f:
    lines = [f.split(',') for f in f.readlines()[1:]
for line in lines:
    if line[0] not in d:
        d[line[0]] = [0,[]]
    d[line[0]][1].append(line[1])
    d[line[0]][0] += line[2]
with open("new.csv",'w') as f:
    f.write("Name,Iteration,Value")
    for mod in d:
        f.write(mod+',"'+','.join(d[mod][1])+'",'+d[mod][0]+'\n') 
```

# django - 升级到 django 1.5.1 后无法绑定表单数据

> ID：15759712
> 
> 赞同：4
> 
> 时间：2013-04-02T08:45:16.870
> 
> 标签：django, django-1.5

我刚刚从 django 1.4.5 升级到 django 1.5.1，并注意到我所有的表单处理代码都停止了工作。具体来说，用 POST 返回的表单数据已经找不到了。

Django代码 -

在这里，我按照 Django 1.5 文档中的说明，在用户提交 request.POST 对象后传入它以实例化 LoginUserForm

```
class UserLoginForm(forms.Form):
    email = forms.EmailField(widget=forms.TextInput(attrs={'placeholder': 'Enter email',
                                                       'class': 'span4'}))
    password = forms.CharField(widget=forms.PasswordInput(attrs={'class': 'span4'}))

def login_user(self,request):
    user = None
    if request.method == 'POST':
        print "post:", request.POST.items()
        form = UserLoginForm(request.POST)
        if form.is_valid():
            data = form.cleaned_data
            email = data['email']
            password = data['password']
            if email and password:
                user_service = UserService()
                email = email.lower()
                password = string_utils.hash_password(password) 
                user = user_service.get_by_email_and_password(password      = password,
                                                              email         = email)
    return user 
```

我的表单模板

```
<form class="well" action="/web/user/login_user?next={{ next_url }}" method="post">
{% csrf_token %}
    <label><strong>Email:</strong></label>
        {{ form.email }}
    <label><strong>Password:</strong></label>
        {{ form.password }}
    <br />        
        <div class="row">
            <div class="span4" style="text-align: right;">
            <button type="submit" class="btn">Login</button>
            </div>
        </div>
        <div class="row">
            <div class="span2">
            <a href="/web/forgot_password" class="gray-underline" style="line-height: 25px; font-size: 12px; ">Forgot Password?</a>
            </div>
            <div class="span2" style="text-align: right;">                   
            </div>
        </div>          
</form> 
```

Django.1.4.5 的输出 -

```
Django version 1.4.5, using settings 'myproj.settings'
post: [(u'csrfmiddlewaretoken', u'DnRTYpV1EF9XMQRAKoc3u37wya0TS3mX'), (u'password',     u'abcde'), (u'email', u'john@doe.com')]
data: {'password': u'abcde', 'email': u'john@doe.com'} 
```

Django 1.5.1 的输出 -

```
Django version 1.5.1, using settings 'myproj.settings'
post: [] 
```

我查看了 Django 1.5.1 发行说明，注意到有一部分关于[非表单数据不再包含在 request.POST 中](https://docs.djangoproject.com/en/dev/releases/1.5/#non-form-data-in-http-requests)。

> HTTP 请求中的非表单数据 request.POST 将不再包含通过 HTTP 请求发布的数据，并且标头中具有非特定于表单的 >content-types。在以前的版本中，使用 >multipart/form-data 或 application/x-www-form-urlencoded 以外的内容类型发布的数据仍将最终在 >request.POST 属性中表示。希望在这些情况下访问原始 POST 数据的开发人员应该使用 request.body 属性。

但是，鉴于我的数据包含`<form></form>`在模板中的元素中并使用 django 的`Form`类生成，我不明白为什么数据不在 POST 中？我应该如何提取我的表单数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T13:25:27.443

您似乎需要将 application/x-www-form-urlencoded 或 multipart/form-data 作为 enctype 属性添加到您的表单标签。

# .net - 在 C++/MFC 应用程序中使用 .NET？

> ID：15759714
> 
> 赞同：2
> 
> 时间：2013-04-02T08:45:23.457
> 
> 标签：.net, mfc, c++-cli

我们管理和开发的程序是用 C++/MFC 编写的。我们希望将其现代化为 .NET，但不想立即重写整个应用程序。因此，我们正在考虑用 .NET 编写程序的新部分，同时用 C++/MFC 维护程序的其余部分。

当我们在 Internet 上读到这一点时，它说了很多关于从托管代码调用非托管代码的内容。但我们想以另一种方式来做。我们查到了一些资料表明是可以的，但是看起来非常繁琐和繁琐。

那可能吗？这是一个很好的解决方案吗？有没有更好的方法来逐步使程序现代化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:54:00.787

这是使用 C++/CLI 来使用 C++/MFC 代码中的 .NET 部分的常用方法。当你了解它时，它并不难。.NET UI 控件应该有一个方法来设置父窗口的 HWND 和控件的大小（虽然不是所有的都有）。许多 .NET 组件遇到的另一件事是 .NET 程序集的混淆，这会阻止使用来自 C++/CLI 的控件。

我们是一家 .net 图表制造商，客户已使用我们的产品对其应用程序进行现代化改造。我们有关于如何从 C++/CLI 使用 .NET 图表的文档和示例应用程序。

```
#using "Arction.LightningChartUltimate.dll"
using namespace Arction::LightningChartUltimate;

//"Global managed variables"  
ref class GlobalObjects {
public:
   static Arction::LightningChartUltimate::LightningChartUltimate^ chart; 
}; 

void CMainFrame::CreateChart(HWND hwndParent)
{

    GlobalObjects^ go = gcnew GlobalObjects();

    //Embeddable trial key is used here. 
    go->chart = gcnew LightningChartUltimate("licensekey"); 

    LightningChartUltimate^ chart = go->chart;

    //Disable repaints for every property change
    chart->BeginUpdate(); 

    //Set parent window by window handle
    chart->SetParentWindow((System::IntPtr) hwndParent); 

    //Remove existing series 
    chart->ViewXY->PointLineSeries->Clear(); 

    //Create new series 
    PointLineSeries^ series = gcnew PointLineSeries(chart->ViewXY, chart->ViewXY->XAxes[0], chart->ViewXY->YAxes[0]);
    const int PointCount = 10; 

    //Create SeriesPoint array
    array<SeriesPoint> ^ data =
        gcnew array<SeriesPoint>(PointCount);

    //Fill the array
    double yValues[PointCount] = {0.0, 5.0, 4.0, 3.0, 8.0, 10.0, 9.0, 8.0, 3.0, 2.0};
    for(int i=0; i<PointCount; i++)
    {
        data[i].X = i+1; 
        data[i].Y = yValues[i]; 
    }

    //Add the points to series
    series->AddPoints(data,false);

    //Add the series itself into chart's PointLineSeries collection
    chart->ViewXY->PointLineSeries->Add(series); 

    //Fit the axis ranges to data assigned
    chart->ViewXY->FitView();

    //Allow repaints, update chart
    chart->EndUpdate();  

} 

void CMainFrame::OnSize(UINT nType, int cx, int cy)
{
    __super::OnSize(nType, cx, cy);

    RECT rectStatusBar;
    if (m_wndStatusBar.m_hWnd)
        m_wndStatusBar.GetClientRect(&rectStatusBar);

    //Set the new size to LightningChart object, with SetBounds method call
    GlobalObjects^ go = gcnew GlobalObjects();
    if (go)
    {
        LightningChartUltimate^ chart = go->chart;
        if (chart)
            chart->SetBounds(2, 2, cx - 4, cy - rectStatusBar.bottom - 2);
    }
} 
```

并不比这更难，所需的代码量几乎与 C# 相同。

另一种方法是使用 C#（WinForms 或 WPF）创建新的 DLL，并为 C++ 应用程序导出一个简单的 API，从而最大限度地减少非托管端的 C++/CLI 使用。

（我是 LightningChart 组件的 CTO。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:21:47.963

最简单的存档方法是使用 COM+ 托管 C#，然后从 C++ 添加这些 COM+ 作为引用。这是一个简单的过程，还增加了一些好处，例如代码封装。

[http://my.execpc.com/~gopalan/dotnet/complus/complus.net_accountmanager.html](http://my.execpc.com/~gopalan/dotnet/complus/complus.net_accountmanager.html)

# jquery - 嵌套选项卡大小 - JQuery

> ID：15759715
> 
> 赞同：3
> 
> 时间：2013-04-02T08:45:27.093
> 
> 标签：jquery, css, jquery-ui

大家早上好。我对 JQuery UI 很陌生，你也许可以提供帮助。我有一个使用 JQuery UI 创建的嵌套选项卡

![当它大小](https://i.stack.imgur.com/Z2Zrs.png)

![当它伸展](https://i.stack.imgur.com/dbrwl.png)

我几乎没有最终进入嵌套选项卡的控件。问题是，内部选项卡的高度由我将放入其中的控件数（以行为单位）决定。例如：在某些情况下，内部选项卡的高度将在外部选项卡的限制范围内，或者有时它会从内部选项卡延伸。

理想情况下，我正在寻找一种解决方案，该解决方案将具有基于用户屏幕的静态高度，该解决方案将容纳选项卡内的所有控件，并在需要时提供自动滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:49:52.733

如果您的内容是在页面加载时创建的，您可以使用以下方法来测量包装选项卡的高度：

```
var outerTabHeight = $("outerTabID").height(); 
```

现在您需要设置内部选项卡的高度，可以这样做，以便高度略小于包装选项卡，这就是您想要的方式：

```
$("innerTabID").height() = outerTabHeight - 50; 
```

可以根据需要增加或减少 50 以增加或减少尺寸。

# xml - ColdFusion 创建 XML 并将其作为电子邮件附件发送

> ID：15759719
> 
> 赞同：2
> 
> 时间：2013-04-02T08:45:31.263
> 
> 标签：xml, email, coldfusion, email-attachments, coldfusion-8

我的应用程序要求我创建一个 XML 文档并将其作为附件发送给用户。我想知道是否有任何方法可以创建 XML 文档并将其作为附件发送而不将文件保存到服务器？我问这个的原因是会有很多电子邮件被发送，我不想让服务器超载文件。如果没有办法做到这一点，我意识到我可以保存文件，通过电子邮件发送，然后删除文件。但是，如果我可以创建文件并在不保存的情况下发送它会容易得多。我已经看到使用 PDF 完成此操作，您可以在其中使用创建 PDF`<cf document>`并将其作为参数发送`<cfmailparam>`，XML 是否有类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:33:50.970

正如其他人在评论中提到的那样，您应该能够使用用于 PDF 交付的相同逻辑并将其应用于 XML 交付。如果您包含您的代码，我们可以为您提供更多帮助。

或者您可以让 ColdFusion 自动为您处理文件删除。`<cfmailparam>`您提到的标签的另一个属性是“删除”。如果您包含“remove”属性并将其设置为 true，ColdFusion 会在邮件成功传递后删除附件文件（如果有）。在 ColdFusion 8.0.1 中与您正在使用的“内容”属性一起添加。[记录在这里](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c15.html)

# c# - C# 类似于 C++ 中的 DateTime

> ID：15759726
> 
> 赞同：4
> 
> 时间：2013-04-02T08:45:54.530
> 
> 标签：c#, c++, datetime

`C# DateTime`C ++中类的替代方法是什么？我正在寻找一个支持增加小时、天或周的基础日历。它还应该支持日期比较。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T08:47:59.263

C++ 在标准库中没有日期/时间类。但是你可以使用 Boost -

[http://www.boost.org/doc/libs/1_40_0/doc/html/date_time.html](http://www.boost.org/doc/libs/1_40_0/doc/html/date_time.html)

[http://www.boost.org/doc/libs/1_40_0/doc/html/date_time/date_time_io.html#date_time.io_tutorial](http://www.boost.org/doc/libs/1_40_0/doc/html/date_time/date_time_io.html#date_time.io_tutorial)

# android - Android 上 Cordova 2.5 中 openDatabase 上的仅硬件“未定义”数据库错误 - 仅适用于第一次尝试

> ID：15759727
> 
> 赞同：1
> 
> 时间：2013-04-02T08:45:56.177
> 
> 标签：android, cordova, undefined, opendatabase

刚刚将我的 android 应用程序更新到 Cordova 2.5，虽然它在模拟器中运行良好，但它在我的 HTC 愿望上产生了一个问题，以至于我在尝试时收到“未定义”数据库错误

```
db = window.openDatabase("ProblemDirectoryDB", "1.0", "PhoneGap Demo", 100000); 
```

但是，如果我第二次打开同一个页面，它就可以正常工作，从那时起，即使在强制停止并重新启动之后也是如此。我可以通过删除应用程序的数据来重新创建错误。相关代码如下。非常感激地收到任何帮助/想法。

```
var db;
var dbCreated = false;

function onBodyLoad(){
$.mobile.loadingMessageTextVisible = true;
$.mobile.loadingMessage = "Loading...";
$.mobile.showPageLoadingMsg();
if (!window.device){
     document.addEventListener("deviceready", onDeviceReady, false);
    } 
else {
    onDeviceReady();
    }
}

function onDeviceReady() {
db = window.openDatabase("ProblemDirectoryDB", "1.0", "PhoneGap Demo", 100000);
    if (dbCreated){
        db.transaction(getProblems, read_transaction_error);
        }
    else{
        db.transaction(populateDB, create_transaction_error, populateDB_success);
        }
navigator.splashscreen.hide();
}

function populateDB_success() {
dbCreated = true;
    db.transaction(getProblems, transaction_error);
}

function create_transaction_error(tx, error) {
$.mobile.hidePageLoadingMsg();
    alert("Create Database Error: " + error);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T23:06:37.157

令人难以置信的是，经过几个小时和几乎完全的重写，我终于在我的调用中发现了`100000`bytes`size`参数`window.openDatabase`——我的数据库现在超过了 256K，所以只需将其更改为`300000`似乎已经解决了我的问题！难怪似乎没有人遇到过同样的问题——没有人愚蠢到没有注意到尺寸参数！尽管它为什么在模拟器上以及在硬件上的第二次和连续打开上都有效，但我不知道。总之，问题解决了。

# android - 触发 DDMS 屏幕捕获的任何键盘快捷键

> ID：15759728
> 
> 赞同：1
> 
> 时间：2013-04-02T08:46:09.740
> 
> 标签：android, android-emulator

大多数时候，当我想捕获调试应用程序的屏幕截图时，我会使用 DDMS 中的以下按钮。

![在此处输入图像描述](https://i.stack.imgur.com/2RiYT.png)

但是，我想知道，是否有任何快速的键盘快捷键可以代替使用鼠标？这是因为在某些情况下，我需要一个屏幕截图，其中应用的 UI 组件被按下。我已经用完了我唯一的鼠标来执行**按下**的动作。因此，我没有第二个鼠标可以按下 DDMS 捕获屏幕按钮。:)

我不想使用 Windows 操作系统的屏幕截图功能。这是因为我有时需要在应用程序中使用准确的颜色代码。使用 Windows 屏幕捕获不会生成准确的图像来表示应用程序中使用的颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:51:26.577

[如何使用 Eclipse 获取模拟器截图？](https://stackoverflow.com/questions/2065993/how-to-take-emulator-screenshots-using-eclipse)

> 在 DDMS 中，按 Ctrl+S 截取屏幕截图。

# wpf - Nlog 不会在应用程序关闭时打印消息

> ID：15759730
> 
> 赞同：0
> 
> 时间：2013-04-02T08:46:14.060
> 
> 标签：wpf, .net-4.0, nlog

所有 ViewModel 类都继承自一个基类：

```
public abstract class ScreenBase : ViewModelBase, IScreen, IDisposable
{
  protected readonly NLog.Logger _logger;
  protected ScreenBase()
        : this(Messenger.Default) { }

  protected ScreenBase(IMessenger messenger)
        : base(messenger)
  {
    _logger = NLog.LogManager.GetLogger(this.GetType().Name);
    _logger.Debug("{0} ({1}) constructed. ", this.GetType().Name, this.GetHashCode());
  }

  ~ScreenBase()
  {
    FinalizeProc();
  }

  [Conditional("DEBUG")]
  private void FinalizeProc()
  {
    _logger.Debug("{0} ({1}) Finalized. ", this.GetType().Name, this.GetHashCode());
  }
} 
```

如您所见，任何时候 ViewModel 实例被创建/销毁，它都应该记录它。我将它记录到控制台窗口和文件中：

```
<targets>
  <!-- add your targets here -->
  <target name="logDebugInfo" xsi:type="File" deleteOldFileOnStartup="true" fileName="${specialfolder:folder=CommonApplicationData}/MyApp/debug.txt" layout="${longdate} | ${uppercase:${level}} | ${stacktrace} | ${message}${onexception:EXCEPTION OCCURRED\:${exception:format=tostring}}" />
  <target name="console" xsi:type="Console" />
</targets>

<rules>
  <!-- add your logging rules here -->
  <logger name="*" minlevel="Trace" maxlevel="Info" writeTo="logDebugInfo" />
  <logger name="*" minlevel="Trace" writeTo="console" />   
</rules> 
```

每条消息都会被正确记录，直到应用程序关闭。当在主视图上按下“X”关闭按钮时，我没有在代码中做任何特定的事情，我让应用程序自行关闭。但是，此时不会显示“已完成”消息。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T00:47:01.917

发生这种情况的原因是 Logger 在应用程序关闭时被销毁。

# ios - iOS 应用上的贝宝

> ID：15759731
> 
> 赞同：1
> 
> 时间：2013-04-02T08:46:21.610
> 
> 标签：ios, paypal

我正在开发一个简单的 iOS 应用程序，它从 Paypal 接收付款并将实物商品发送给客户。我从 www.x.com 了解到我需要将我的应用程序提交给 Paypal 以供批准。

最近 Paypal 正在从 x.com 迁移到 developer.paypal.com 并发布了新版本的 iOS sdk，但是在新的开发者网站上没有提及应用程序提交和批准程序。我有几个问题：

1.  是否还需要将我的应用程序提交给 Paypal 以供批准？如何？
2.  Paypal iOS SDK 是否仅在美国有效，因为实时凭据仅在美国可用？（在 x.com 中似乎没有提到这个限制）
3.  如果我的应用需要提交到 x.com，我在哪里可以获得 Paypal 设备的 UDID？
4.  我现在使用的是 PayPal Mobile Express Checkout Library (PP_MECL) 1.03，这个版本还能用吗？或者我需要迁移到 1.04？似乎 PayPal iOS SDK 1.04 是完全不同的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:10:06.140

如果您使用新的 iOS SDK，则无需提交您的应用以供审批。如果 iOS SDK 有你需要的功能，你应该在 MECL 上使用它——它有一个更流畅的界面并支持信用卡支付。常见问题解答[https://developer.paypal.com/webapps/developer/support/faq](https://developer.paypal.com/webapps/developer/support/faq)提到 iOS SDK 目前仅针对美国市场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:11:21.393

如果您只是使用 MECL 库，则不必提交应用程序以供批准，您只需要在将应用程序定义添加到 www.x.com 后自动从其门户获取的开发和生产令牌。

设置 ENV_LIVE 环境时，必须在代码中使用此令牌。

对于 iOS，最新的 MECL 版本是 1.0.3，但请确保您确实拥有最新的软件包，因为他们在 2012 年 12 月发布了 iOS 6 的更新，而没有更改库版本号（喘气！）

正如其他人已经指出的那样，新的 PayPal iOS SDK 1.04 是一个完全不同的库，但如果您在移动网站上接受付款，MECL 库仍然是正确的选择。

干杯

# php - 根据条件php添加到数组

> ID：15759733
> 
> 赞同：2
> 
> 时间：2013-04-02T08:46:21.987
> 
> 标签：php, mysql, arrays

数据库表：

```
 Table Name: friends

   user_id   |  friend_id  |  accepted  |  key_id  
 --------------------------------------------------
    123      |    234      |     2      |    1     
    123      |    456      |     2      |    2
    123      |    789      |     1      |    3     
    222      |    123      |     2      |    4     
    498      |    123      |     2      |    5 
```

初始查询（获得确认的朋友）

```
$user_id=123;
$query="SELECT * FROM friends WHERE
    (user_id='$user_id' OR friend_id='$user_id')
    AND accepted='2'";
$result=mysqli_query($dbc, $query);
while($row=mysqli_fetch_array($result))
{
   if($row['user_id']==$user_id)
   {
       $friend[]=$row['friend_id'];
   }
   if($row['friend_id']==$user_id)
   {
       $friend[]=$row['user_id'];
   }
}

print_r($friend); 
```

我想要做的是将`friend`匹配的id设置到数组中，其中user_id等于`$user_id`或friend_id等于`$user_id`并且接受的值为2。目前上面没有返回任何东西，我不确定我是否正在正确格式化/创建数组。

在这种情况下，获得正确结果的最佳方法是什么。我还需要格式化数组，以便它可以包含在另一个 MYSQL 语句中，使用`IN()`条件从另一个表中进行选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:56:59.997

您的查询应该是这样的

```
$query="SELECT *
        FROM friends
        WHERE (user_id = $user_id OR friend_id = $user_id)
        AND accepted = '2'"; 
```

请记住，您应该给出整数而不是字符串。它正确地获取记录。

输出

```
key_id  user_id friend_id   accepted
-------------------------------------
1       123     234         2
2       123     456         2
4       222     123         2
5       489     123         2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:49:41.520

您没有将所需的参数传递给`mysqli_fetch_array`：

```
while($row=mysqli_fetch_array($result))) 
```

您可以在文档中阅读更多[内容。](http://php.net/manual/en/mysqli-result.fetch-array.php)

# php - 长名称（PHP）的问题：如何在固定空间长度的末尾放置 3 个点（…）

> ID：15759736
> 
> 赞同：0
> 
> 时间：2013-04-02T08:46:38.710
> 
> 标签：php, string, long-integer, trim

我们在网站上显示时遇到困难`LONG NAMES`，急需帮助。

我们实际上需要将 IMAGE NAMES 放在具有`FIXED WIDTH`. 因为图像名称有时比图像宽度长，我们不想在太多行上显示完整的名称，因为它看起来不好看。

然后，我们要么希望在最多 1 行（或 2 行）上显示名称（取决于页面）。

当名称长于 1（或 2）行时，我们想剪切图像名称并在行尾放置 3 个点（...），以便第三个点到达图像的末尾。

我们试图找到一个解决方案，但定义字符串长度不是其中之一，因为如果我们定义例如 10 个字符的限制，然后在后面加上 3 个点，它不会解决问题，因为所有字符都没有相同的长度：

示例 1：AAAAAAAAAA

示例 2：IIIIIIIII

这个解决方案是不合适的，因为 3 个点永远不会放在同一个地方（在图像的末尾）

有没有人有办法解决吗？

我们非常感谢您的帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:58:16.300

PHP 作为一种服务器端语言，无法知道浏览器将如何呈现文本。CSS 解决方案更可行：

```
div.picture-name{
    width: 100px;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
} 
```

看到它[在行动](http://jsfiddle.net/X4N44/)。

PS 不能保证 IE 支持`text-overflow: ellipsis`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:53:41.007

我知道这不是最好的选择，但是您可以将每个字符放在 div 或 span 中，然后您可能可以控制刺痛的长度。

# r - 仅访问生存对象的一部分

> ID：15759740
> 
> 赞同：2
> 
> 时间：2013-04-02T08:46:55.103
> 
> 标签：r, survival-analysis

使用我生成的包`survival`中的`R`我这样的 Kaplan-Meiser-object

```
library(survival)
fit <- survfit(Surv(time, status) ~ ph.ecog + sex, data=lung) 
```

使用`print(fit)`我得到

```
> print(fit)
Call: survfit(formula = Surv(time, status) ~ ph.ecog + sex, data = lung)

   1 observation deleted due to missingness 
                 records n.max n.start events median 0.95LCL 0.95UCL
ph.ecog=0, sex=1      36    36      36     28    353     303     558
ph.ecog=0, sex=2      27    27      27      9    705     350      NA
ph.ecog=1, sex=1      71    71      71     54    239     207     363
ph.ecog=1, sex=2      42    42      42     28    450     345     687
ph.ecog=2, sex=1      29    29      29     28    166     105     288
ph.ecog=2, sex=2      21    21      21     16    239     199     444
ph.ecog=3, sex=1       1     1       1      1    118      NA      NA 
```

我现在如何才能访问这个整体生存对象的一部分？就像打印结果只是为了`sex=1`？

当然我可以做类似的事情

```
fit_sex1 <- survfit(Surv(time, status) ~ ph.ecog + sex, data=lung[lung$sex == 1,])
print(fit_sex1) 
```

但是使用非常大的数据集，多次重新创建生存对象是不利的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:34:22.540

您可以使用`grep`：

```
containsText <- "sex=1"
fit_sex1 <- fit[c(grep(containsText ,names(fit$strata)))]
print(fit_sex1) 
```

# c# - 如何在 asp.net 中使用 OpenXml 以编程方式创建 PPT 幻灯片

> ID：15759743
> 
> 赞同：-1
> 
> 时间：2013-04-02T08:47:04.770
> 
> 标签：c#, asp.net

我想根据图像数量以编程方式创建 PPT 幻灯片，

我使用 VS2010 和 OpenXml，

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:10:58.323

检查这个[MSDN 链接](http://support.microsoft.com/kb/303718)，你会有所了解。

[又一个资源。](http://msdn.microsoft.com/en-us/library/office/jj159403%28v=office.14%29.aspx)

# java - Java & XML：修复一些问题

> ID：15759747
> 
> 赞同：0
> 
> 时间：2013-04-02T08:47:15.813
> 
> 标签：java, xml, xstream

我正在尝试通过 xml 为游戏加载我的 npc 掉落物。我已经开始加载过程，但遇到了一些问题。首先，我每个 npc 只能有 1 滴，而不会创建另一个具有相同 npc id 的“newNpc”案例，否则会出现加载错误。我想每个 npc 有多个掉落。我还需要帮助阅读和使用稀有的定义。示例： if (Math.random(100) > 95) { // 将 VERY_RARE 项目放在这里 |

我的 XStreamUtil 类（加载 xml 文件）：

```
package server.engine.util;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

import server.game.entity.npc.impl.drops.NpcDropDefinition;
import server.game.entity.npc.impl.drops.NpcDropDefinition.LoadDropDefinitions;

import com.thoughtworks.xstream.XStream;
import com.thoughtworks.xstream.converters.reflection.Sun14ReflectionProvider;

public class XStreamUtil {

    private static XStreamUtil instance = new XStreamUtil();
    private static XStream xStream = new XStream(new Sun14ReflectionProvider());

    public static XStreamUtil getInstance() {
        return instance;
    }

    public static XStream getxStream() {
        return xStream;
    }

    static {
        xStream.alias("newNpc", NpcDropDefinition.class);
    }

    public static void loadAllFiles() throws IOException {
        LoadDropDefinitions.load();
    }

    public static void writeXML(Object object, File file) throws IOException {
        FileOutputStream out = new FileOutputStream(file);
        try {
            xStream.toXML(object, out);
            out.flush();
        } finally {
            out.close();
        }
    }

} 
```

我的 XML 定义类：

```
package server.game.entity.npc.impl.drops;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.List;

import server.engine.util.XStreamUtil;

/**
 * NpcDropDefinition.java
 * 
 * @author Notorious
 */

public class NpcDropDefinition {

    private int npcId, itemId, itemAmount;
    private DropRarity dropRarity;

    enum DropRarity {
        CONSTANT,
        COMMON,
        UNCOMMON,
        RARE,
        VERY_RARE;
    }

    /**
     * @return the npcId
     */
    public int getNpcId() {
        return npcId;
    }

    /**
     * @return the itemId
     */
    public int getItemId() {
        return itemId;
    }

    /**
     * @return the itemAmount
     */
    public int getItemAmount() {
        return itemAmount;
    }

    public DropRarity getDropRarity() {
        return dropRarity;
    }

    public static class LoadDropDefinitions {

        /**
         * Holds all of the definitions for prayer
         */
        private static NpcDropDefinition[] def = null;

        public static NpcDropDefinition[] getDefinitions() {
            return def;
        }

        /**
         * Loads the definitions of pvm points from the XML file
         * 
         * @throws FileNotFoundException
         */
        public static void load() throws FileNotFoundException {
            @SuppressWarnings("unchecked")
            List<NpcDropDefinition> XMLlist = (List<NpcDropDefinition>) XStreamUtil
                    .getxStream().fromXML(
                            new FileInputStream("./data/xml/npcDrops.xml"));
            def = new NpcDropDefinition[XMLlist.size()];
            for (int i = 0; i < def.length; i++) {
                def[i] = XMLlist.get(i);
            }
            if (def.length > 1 || def.length < 1)
                System.out.println("[Npc-Drops]: " + def.length
                        + " npc drops have been loaded..");
            else
                System.out
                        .println("[Npc-Drops]: Only one npc drop has been loaded..");
        }
    }
} 
```

我的 Drop Handler 类：

```
package server.game.entity.npc.impl.drops;

import server.Server;
import server.game.entity.Client;
import server.game.entity.npc.NpcHandler;
import server.game.entity.player.PlayerHandler;

/**
 * NpcDropHandler.java
 * 
 * @author Notorious
 */

public class NpcDropHandler {

    public void dropItems(int i) {
        Client c = (Client) PlayerHandler.players[NpcHandler.npcs[i]
                .getKillerIndex()];
        if (c != null) {
            Server.itemHandler.createGroundItem(c, 1, NpcHandler.npcs[i].absX,
                    NpcHandler.npcs[i].absY, 1, c.playerId);
        }
    }
} 
```

我当前的 Xml 文件：

```
<list>
    <newNpc>
        <npcId>1265</npcId>
        <itemId>995</itemId>
        <itemAmount>10</itemAmount>
        <dropRarity>COMMON</dropRarity>
    </newNpc>
</list> 
```

# jquery - 删除与元素关联的事件

> ID：15759754
> 
> 赞同：0
> 
> 时间：2013-04-02T08:47:28.480
> 
> 标签：jquery, mouseevent

我有 5 个 img 标签。

```
<img id="test-btn" src="image/btn1.png" onmouseover="this.src='image/btn2.png'" onmousedown="this.src='image/btn1.png'" onmouseup="this.src='image/btn2.png'" onmouseout="this.src='image/btn1.png'" onclick="uponClickingTestBtn()" style="heignt:15px;width:30px;"> 
```

当我单击其中一个图像标签时，应禁用其他图像标签。我不希望像 onmouseover 这样的事件发生在图像上。是否可以删除与元素关联的事件？我试过

```
$('#test-btn').filter("input,textarea,select,button").prop('disabled',true); 
```

和

```
$('#test-btn :input').attr('disabled', true); 
```

但没有用。我将如何做到这一点？我还想稍后启用这些 img 点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:53:07.740

为了符合您的代码，您可以这样做：

```
$('#test-btn :input').attr('onmousedown', null);
$('#test-btn :input').attr('onmouseover', null);
$('#test-btn :input').attr('onclick', null);
$('#test-btn :input').attr('onmouseout', null);
$('#test-btn :input').attr('onmouseup', null); 
```

但是，请考虑不要放置内联事件，并使用 jquery .on() 女巫具有 off() 功能来删除事件。

如果您仍然使用第一个解决方案，您可以重新分配一个事件，如下所示：

```
$('#test-btn :input').attr('onmouseover', "this.src='image/btn2.png'");
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:49:09.303

NULL 函数绑定，它在点击时不再做任何事情。为了确保我也为元素内的属性添加了删除。

```
var button = document.getElementById('test-btn');
button.onmouseover = null;
button.removeAttribute('onmouseover'); 
```

在 jQuery 中，您可以直接`preventDefault`或返回`false`. 有时人们同时使用两者。`false`如果您还想在点击内执行操作，请记住在最后返回，否则该功能将“中止”；

```
$('#test-btn').click(function(evt) {
    evt.preventDefault();

    return false;
}); 
```

# sql - LOWER 的 SQL 问题

> ID：15759760
> 
> 赞同：1
> 
> 时间：2013-04-02T08:47:51.400
> 
> 标签：sql, sql-server, sql-insert

我在 SQL Server 2008r2 的 SQL 中使用 LOWER 时遇到问题 我想我对 lower 的用法有误解，我总是遇到同样的错误 Incorrect syntax near ','

```
INSERT INTO [ch-s-0008180].HolidayTracker.dbo.HtUser(FirstName,LastName,Email,UserName,AdAccount,AdDomain)
SELECT u1.firstName,u1.lastName,u1.email,'CH'+(LOWER(LEFT(u1.firstName,2))+(LOWER(LEFT(u1.lastName,3)),'EUROPE\'+(LOWER(LEFT(u1.firstName,2))+(LOWER(LEFT(u1.lastName,3)),''
FROM HolidayTracker.dbo.HTUser u1
    LEFT JOIN HolidayTracker.dbo.HtUser u2 ON u1.firstName = u2.FirstName AND u1.lastName = u2.LastName AND u1.email = u2.Email 
```

感谢您的帮助和快速答复

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:50:38.950

`(`你之前有多余的`LOWER`。这是修改后的查询。

```
INSERT  INTO [ch-s-0008180].HolidayTracker.dbo.HtUser(FirstName,LastName,Email,UserName,AdAccount,AdDomain)
SELECT  u1.firstName, 
        u1.lastName, 
        u1.email, 
        'CH' + LOWER(LEFT(u1.firstName,2)) + LOWER(LEFT(u1.lastName,3)), 
        'EUROPE\' + LOWER(LEFT(u1.firstName,2)) + LOWER(LEFT(u1.lastName,3)),
        ''
FROM    HolidayTracker.dbo.HTUser u1
        LEFT JOIN HolidayTracker.dbo.HtUser u2 
            ON  u1.firstName = u2.FirstName AND 
                u1.lastName = u2.LastName AND 
                u1.email = u2.Email 
```

*代码的颜色搞砸了。`\`在`EUROPE`不逃避`'`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:52:27.800

您没有正确关闭支架。

`'CH'+(LOWER ...,'' FROM`

# jsp - struts 2 jsp单选按钮动作

> ID：15759770
> 
> 赞同：0
> 
> 时间：2013-04-02T08:48:37.230
> 
> 标签：jsp, jakarta-ee, html-table, struts2, radio-button

我有一个包含对象的列表，并且使用这些对象填充了 jsp 表。我想向该表添加一个单选按钮列，当我单击一个单选按钮时，我想将该对象加载到相关的文本字段中以进行更新过程。我怎样才能做到这一点？

这是我的表jsp代码：

```
<table class="tldFromContent" border="1" width="800px">

    <tr class="tblMenuColorMsg" height="25px">
        <td>Select</td>
        <td><strong>Description</strong></td>
    </tr>
    <%
        int j = 0;
    %>
    <s:iterator value="pcinitiladataList">
        <tr >
            <td><input type="radio" id="selectedCar1" name="selectedCar" value="${decrp}"  >Edit</td>
                <td align="right"><s:property
                        value="decrp" /></td>                                                   
        </tr>
        <%j++;%>
    </s:iterator>
</table> 
```

我想要做的是当我单击表中的单选按钮时，该原始数据中的相关数据应加载到文本字段和日期时间选择器中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:28:53.397

使用 AjaxWebparts 库中的 Ajax 更新字段标记这是链接和示例

[http://ajaxtags.sourceforge.net/usage.html](http://ajaxtags.sourceforge.net/usage.html)

希望这可以帮助 ：）

# wordpress - Wordpress 如何在选项页面中添加自定义帖子类型？

> ID：15759772
> 
> 赞同：1
> 
> 时间：2013-04-02T08:48:39.150
> 
> 标签：wordpress, custom-post-type

基本上，我们可以使用在管理菜单中添加自定义帖子类型

> 'show_in_menu' => 'menu-slug'

但我想知道在设置菜单（option_page）下添加此自定义帖子类型的代码是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:33:25.557

它非常简单，您就在附近，只需使用

```
'show_in_menu' => 'options-general.php' 
```

# android - Admobs 似乎只允许在选定设备上投放测试广告。可以使它通用吗？

> ID：15759774
> 
> 赞同：0
> 
> 时间：2013-04-02T08:48:38.577
> 
> 标签：android, admob

我在我的 android 应用程序中使用 admobs，并希望在论坛、家人和朋友中与选定的用户一起测试它。

我想在他们的设备上展示测试广告以避免条件问题。

医生说：

```
adRequest.addTestDevice("TEST_DEVICE_ID");// Test Android Device 
```

但正如我计划与非技术人员分享的那样，我很确定他们将无法获得他们的设备 ID。

有没有办法强制在任何设备上展示测试广告？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:00:41.960

您可以使用以下行

```
adRequest.setTesting(true); 
```

看到我已经像这样用于测试目的

```
AdRequest adRequest = new AdRequest();
adRequest.setTesting(true);
adView.loadAd(adRequest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:20:16.487

这个是正确答案

[https://stackoverflow.com/a/8665279/327402](https://stackoverflow.com/a/8665279/327402)

不是官方的，但至少，这行得通！

```
String aid = Settings.Secure.getString(getContext().getContentResolver(), "android_id");

Object obj = null;
try {
    ((MessageDigest) (obj = MessageDigest.getInstance("MD5"))).update(
                                   aid.getBytes(), 0, aid.length());

    obj = String.format("%032X", new Object[] { new BigInteger(1,
                                   ((MessageDigest) obj).digest()) });
} catch (NoSuchAlgorithmException localNoSuchAlgorithmException) {
    obj = aid.substring(0, 32);
}
adRequest.addTestDevice(obj.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:58:03.647

我不知道是否有办法在选定的设备上展示测试广告，但您可以插入与广告尺寸相同的视图（我认为是 50 x 350？），并明确广告应该放在那里. 如果您真的想要，您甚至可以将其设为图像视图，截取 Google 测试广告的屏幕截图，然后创建一个 onClickListener 将您发送到 Google.com。

# php - 使用 json_decode 解码 json（包含编码如 \u003c HTML 实体），意外结果

> ID：15759779
> 
> 赞同：0
> 
> 时间：2013-04-02T08:49:02.347
> 
> 标签：php, json

试图解码这个json：

```
$json = '{"d":{"results":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/Composite?Sources=\u0027web+spell+relatedsearch\u0027&Query=\u0027\"\u003e\u003c/a\u003e\u003cimg src=\"&$skip=0&$top=1#\"\u003e\u003cscript\u003ealert(\u00273\u0027);\u003c/script\u003e\"\u0027&Market=\u0027it-IT\u0027&Adult=\u0027Strict\u0027&Options=\u0027DisableLocationDetection+EnableHighlighting\u0027&WebSearchOptions=\u0027DisableQueryAlterations\u0027","type":"ExpandableSearchResult"},"ID":"5afc1ab9-f4a7-43e1-9d14-dbec42f83c0c","WebTotal":"4","WebOffset":"0","ImageTotal":"","ImageOffset":"","VideoTotal":"","VideoOffset":"","NewsTotal":"","NewsOffset":"","SpellingSuggestionsTotal":"","AlteredQuery":"","AlterationOverrideQuery":"","Web":[{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00275afc1ab9-f4a7-43e1-9d14-dbec42f83c0c\u0027)/Web?$skip=0&$top=1","type":"WebResult"},"ID":"38cc61c8-4ce2-4013-92ee-a2fa4de3abcc","Title":"apache 2.2.21 exploits - Page 2 - Code Exploits Collection","Description":"... script\u003e password_verify \"\u003e\u003cscript\u003ealert(2);\u003c/script\u003e firstname \"\u003e\u003cscript\u003ealert(3);\u003c/script ... 703F67657470776E65643D: Administrators\u003c/a\u003e\u003cimg src=\"http://192.168.0.15/learn ...","DisplayUrl":"exploitsdownload.com/search/apache%202.2.21/2","Url":"http://exploitsdownload.com/search/apache%202.2.21/2"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00275afc1ab9-f4a7-43e1-9d14-dbec42f83c0c\u0027)/Web?$skip=1&$top=1","type":"WebResult"},"ID":"df1b6d37-efc1-4d3c-bed5-7d6e34a3d686","Title":"siteniz için htlm kodları - Sayfa 3 - Baktabul Forum","Description":"... gelecek ve sooon\") \u003c/script\u003e \u003cscript\u003e alert(\"4!!\") \u003c/script\u003e \u003cscript\u003e alert(\"3!!!\") \u003c/script\u003e \u003cscript\u003e ... BURAYA YAZIN!!!\u0027,500,300); return false\" \u003e \u003e\u003e\u003eGİRİŞ \u003c\u003c\u003c\u003c\u003c/a\u003e \u003cIMG SRC= \"http ...","DisplayUrl":"www.baktabul.net/webmaster/42351-siteniz-icin-htlm-kodlari-3.html","Url":"http://www.baktabul.net/webmaster/42351-siteniz-icin-htlm-kodlari-3.html"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00275afc1ab9-f4a7-43e1-9d14-dbec42f83c0c\u0027)/Web?$skip=2&$top=1","type":"WebResult"},"ID":"fab98f52-bbe6-40f7-805d-5ab14b503827","Title":"php 5.2.17 exploits - Page 1 - Code Exploits Collection","Description":"... trace_results.php?product_id=117&amp;project_id=40&amp;funder=31\"\u003e\u003cscript\u003ealert(3);\u003c/script ... 703F67657470776E65643D: Administrators\u003c/a\u003e\u003cimg src=\"http://192.168.0.15/learn ...","DisplayUrl":"exploitsdownload.com/search/php%205.2.17","Url":"http://exploitsdownload.com/search/php%205.2.17/"},{"__metadata":{"uri":"https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00275afc1ab9-f4a7-43e1-9d14-dbec42f83c0c\u0027)/Web?$skip=3&$top=1","type":"WebResult"},"ID":"82b3c849-4cdc-409a-95a8-a74310b723aa","Title":"DEV ARŞİV \u0027\u0027Hazır kodlar\u0027ın %90 burada\u0027\u0027 İçeri buyrun\u003e\u003e\u003e","Description":"... ve sooon\")\u003c/script\u003e \u003cscript\u003ealert(\"4!!\")\u003c/script\u003e \u003cscript\u003ealert(\"3!!!\")\u003c/script ... BURAYA YAZIN!!!\u0027,500,300); return false\"\u003e\u003e\u003e\u003eGİRİŞ\u003c\u003c\u003c\u003c\u003c/a\u003e\u003cIMG SRC=\"http ...","DisplayUrl":"www.zevkli.org/dev-ar350304v-haz305r-kodlar305n-90-burada-304231...","Url":"http://www.zevkli.org/dev-ar350304v-haz305r-kodlar305n-90-burada-304231eri-buyrungtgtgt-t180384.html"}],"Image":[],"Video":[],"News":[],"RelatedSearch":[],"SpellingSuggestions":[]}]}}'; 
```

php返回给我使用`var_dump(json_decode($jsonOriginalResults, true));`

解码了 \u003c 字符的错误数组，但为什么呢？

我只是期待这样的结果：

```
array(1) {
  ["d"]=>
  array(1) {
    ["results"]=>
    array(1) {
      [0]=>
      array(19) {
        ["__metadata"]=>
        array(2) {
          ["uri"]=>
          string(403) "https://api.datamarket.azure.com/Data.ashx/Bing/Search/Composite?Sources=\u0027web+spell+relatedsearch\u0027&Query=\u0027"\u003e\u003c/a\u003e\u003cimg src="&=0&=1#"\u003e\u003cscript\u003ealert(\u00273\u0027);\u003c/script\u003e"\u0027&Market=\u0027it-IT\u0027&Adult=\u0027Strict\u0027&Options=\u0027DisableLocationDetection+EnableHighlighting\u0027&WebSearchOptions=\u0027DisableQueryAlterations\u0027"
          ["type"]=>
          string(22) "ExpandableSearchResult"
        }
        ["ID"]=>
        string(36) "5afc1ab9-f4a7-43e1-9d14-dbec42f83c0c"
        ["WebTotal"]=>
        string(1) "4"
        ["WebOffset"]=>
        string(1) "0"
        ["ImageTotal"]=>
        string(0) ""
        ["ImageOffset"]=>
        string(0) ""
        ["VideoTotal"]=>
        string(0) ""
        ["VideoOffset"]=>
        string(0) ""
        ["NewsTotal"]=>
        string(0) ""
        ["NewsOffset"]=>
        string(0) ""
        ["SpellingSuggestionsTotal"]=>
        string(0) ""
        ["AlteredQuery"]=>
        string(0) ""
        ["AlterationOverrideQuery"]=>
        string(0) ""
        ["Web"]=>
        array(4) {
          [0]=>
          array(6) {
            ["__metadata"]=>
            array(2) {
              ["uri"]=>
              string(144) "https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00275afc1ab9-f4a7-43e1-9d14-dbec42f83c0c\u0027)/Web?=0&=1"
              ["type"]=>
              string(9) "WebResult"
            }
            ["ID"]=>
            string(36) "38cc61c8-4ce2-4013-92ee-a2fa4de3abcc"
            ["Title"]=>
            string(58) "apache 2.2.21 exploits - Page 2 - Code Exploits Collection"
            ["Description"]=>
            string(257) "... script\u003e password_verify "\u003e\u003cscript\u003ealert(2);\u003c/script\u003e firstname "\u003e\u003cî€€script\u003ealert(3);\u003c/scriptî€ ... 703F67657470776E65643D: Administrators\u003c/î€€a\u003e\u003cimg srcî€="http://192.168.0.15/learn ..."
            ["DisplayUrl"]=>
            string(45) "exploitsdownload.com/search/apache%202.2.21/2"
            ["Url"]=>
            string(52) "http://exploitsdownload.com/search/apache%202.2.21/2"
          }
          [1]=>
          array(6) {
            ["__metadata"]=>
            array(2) {
              ["uri"]=>
              string(144) "https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00275afc1ab9-f4a7-43e1-9d14-dbec42f83c0c\u0027)/Web?=1&=1"
              ["type"]=>
              string(9) "WebResult"
            }
            ["ID"]=>
            string(36) "df1b6d37-efc1-4d3c-bed5-7d6e34a3d686"
            ["Title"]=>
            string(54) "siteniz iÃ§in htlm kodlarÄ± - Sayfa 3 - Baktabul Forum"
            ["Description"]=>
            string(326) "... gelecek ve sooon") \u003c/script\u003e \u003cscript\u003e alert("4!!") \u003c/script\u003e \u003cî€€script\u003e alert("3!!!") \u003c/scriptî€\u003e \u003cscript\u003e ... BURAYA YAZIN!!!\u0027,500,300); return false" \u003e \u003e\u003e\u003eGÄ°RÄ°Åž \u003c\u003c\u003c\u003c\u003c/î€€a\u003e \u003cIMG SRCî€= "http ..."
            ["DisplayUrl"]=>
            string(65) "www.baktabul.net/webmaster/42351-siteniz-icin-htlm-kodlari-3.html"
            ["Url"]=>
            string(72) "http://www.baktabul.net/webmaster/42351-siteniz-icin-htlm-kodlari-3.html"
          }
          [2]=>
          array(6) {
            ["__metadata"]=>
            array(2) {
              ["uri"]=>
              string(144) "https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00275afc1ab9-f4a7-43e1-9d14-dbec42f83c0c\u0027)/Web?=2&=1"
              ["type"]=>
              string(9) "WebResult"
            }
            ["ID"]=>
            string(36) "fab98f52-bbe6-40f7-805d-5ab14b503827"
            ["Title"]=>
            string(55) "php 5.2.17 exploits - Page 1 - Code Exploits Collection"
            ["Description"]=>
            string(228) "... trace_results.php?product_id=117&amp;project_id=40&amp;funder=31"\u003e\u003cî€€script\u003ealert(3);\u003c/scriptî€ ... 703F67657470776E65643D: Administrators\u003c/î€€a\u003e\u003cimg srcî€="http://192.168.0.15/learn ..."
            ["DisplayUrl"]=>
            string(40) "exploitsdownload.com/search/php%205.2.17"
            ["Url"]=>
            string(48) "http://exploitsdownload.com/search/php%205.2.17/"
          }
          [3]=>
          array(6) {
            ["__metadata"]=>
            array(2) {
              ["uri"]=>
              string(144) "https://api.datamarket.azure.com/Data.ashx/Bing/Search/ExpandableSearchResultSet(guid\u00275afc1ab9-f4a7-43e1-9d14-dbec42f83c0c\u0027)/Web?=3&=1"
              ["type"]=>
              string(9) "WebResult"
            }
            ["ID"]=>
            string(36) "82b3c849-4cdc-409a-95a8-a74310b723aa"
            ["Title"]=>
            string(102) "DEV ARÅžÄ°V \u0027\u0027HazÄ±r kodlar\u0027Ä±n %90 burada\u0027\u0027 Ä°Ã§eri buyrun\u003e\u003e\u003e"
            ["Description"]=>
            string(283) "... ve sooon")\u003c/script\u003e \u003cscript\u003ealert("4!!")\u003c/script\u003e \u003cî€€script\u003ealert("3!!!")\u003c/scriptî€ ... BURAYA YAZIN!!!\u0027,500,300); return false"\u003e\u003e\u003e\u003eGÄ°RÄ°Åž\u003c\u003c\u003c\u003c\u003c/î€€a\u003e\u003cIMG SRCî€="http ..."
            ["DisplayUrl"]=>
            string(67) "www.zevkli.org/dev-ar350304v-haz305r-kodlar305n-90-burada-304231..."
            ["Url"]=>
            string(100) "http://www.zevkli.org/dev-ar350304v-haz305r-kodlar305n-90-burada-304231eri-buyrungtgtgt-t180384.html"
          }
        }
        ["Image"]=>
        array(0) {
        }
        ["Video"]=>
        array(0) {
        }
        ["News"]=>
        array(0) {
        }
        ["RelatedSearch"]=>
        array(0) {
        }
        ["SpellingSuggestions"]=>
        array(0) {
        }
      }
    }
  }
} 
```

使用此自定义函数获得此结果：

```
function json_decoder($json) {
    $comment = false;
    $out = '$x=';

    for ($i = 0; $i < strlen($json); $i++) {
        if (!$comment) {
            if (($json[$i] == '{') || ($json[$i] == '['))
                $out .= ' array(';
            else if (($json[$i] == '}') || ($json[$i] == ']'))
                $out .= ')';
            else if ($json[$i] == ':')
                $out .= '=>';
            else
                $out .= $json[$i];
        } else
            $out .= $json[$i];
        if ($json[$i] == '"' && $json[($i - 1)] != "\\")
            $comment = !$comment;
    }

    eval($out . ';');
    return $x;
} 
```

但我想使用 php json_decode 函数而不是自定义函数......有什么建议吗？

# regex - sed的转义工具

> ID：15759786
> 
> 赞同：1
> 
> 时间：2013-04-02T08:49:21.577
> 
> 标签：regex, sed

我的日常生活很艰难，我必须手动修补数以万计的文件，而 80% 的时间我都在编写用于修补文件的 sed 正则表达式。

所以例如我有一行代码：

```
"    Limit("POST", "*", ".*", 1000, PER_MINUTE)," 
```

我已经在某个特定的地方注入了一些文件，所以我为此使用 sed：

```
limits_py=/my/path/limits.py
sed -i "s/\ \ \ \ Limit(\"POST\",\ \"\*\",\ \"\.\*\",\ 10,\ PER_MINUTE),/\ \ \ \ Limit(\"POST\",\ \"\*\",\ \"\.\*\",\ 1000,\ PER_MINUTE),/" ${limits_py} 
```

我真的厌倦了为每个代码字符串手动编写 sed 正则表达式。

所以问题：如何从字符串生成 sed？

例如，这样的事情将是一种幸福：

```
echo 'someclass.somemethod("some_argument") # blah blah my comment here' > sed_generator --replace 
```

为sed“调整”每一行真的很烦人..有什么工具吗？或者甚至更好地`diff`生成两个文件并为每个差异生成 sed 正则表达式替换？也许没有正则表达式可以sed？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:04:42.577

首先，尝试：

```
s|\(["*]\)|\\\1|g 
```

（注意括号中的特殊字符列表，目前只有`"`和`*`。）

这将转

```
"    Limit("POST", "*", ".*", 1000, PER_MINUTE)," 
```

进入

```
\"    Limit(\"POST\", \"\*\", \".\*\", 1000, PER_MINUTE),\" 
```

在 "before" 行和 "after" 行上运行此命令，将结果与 一起粘贴`s|...|...|`，您将获得：

```
s|\"    Limit(\"POST\", \"\*\", \".\*\", 1000, PER_MINUTE),\"|\"    Limit(\"POST\", \"\*\", \".\*\", 10, PER_MINUTE),\"| 
```

这将一个变成另一个。一旦你得到这个工作（你可能需要更多的特殊字符，比如`&`和`$`），我们可以进行改进，比如从文件中读取“之前”和“之后”行。（我不确定您为什么要区分两个文件并针对每个差异执行此操作-为什么不直接用另一个文件覆盖一个文件？）

# python - 需要访问单个资源的多个线程

> ID：15759787
> 
> 赞同：1
> 
> 时间：2013-04-02T08:49:21.983
> 
> 标签：python, python-2.7

我目前正在开发一个程序，其中多个线程需要访问单个数组列表。该数组用作“缓冲区”。一个或多个线程写入此列表，一个或多个其他线程读取并从该列表中删除。我的第一个问题是，Python 线程中的数组是否安全？如果不是，处理情况的标准方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:51:19.000

如果只有一个资源，请尝试使用[Threading.lock 。](http://docs.python.org/2/library/threading.html#lock-objects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:55:02.657

您应该使用[队列](http://docs.python.org/2/library/queue.html)库。 [这](http://www.ibm.com/developerworks/aix/library/au-threadingpython/)是一篇很好的文章，解释了线程和队列。

```
import Queue
import threading
import urllib2
import time
from BeautifulSoup import BeautifulSoup

hosts = ["http://yahoo.com", "http://google.com", "http://amazon.com",
        "http://ibm.com", "http://apple.com"]

queue = Queue.Queue()
out_queue = Queue.Queue()

class ThreadUrl(threading.Thread):
    """Threaded Url Grab"""
    def __init__(self, queue, out_queue):
        threading.Thread.__init__(self)
        self.queue = queue
        self.out_queue = out_queue

    def run(self):
        while True:
            #grabs host from queue
            host = self.queue.get()

            #grabs urls of hosts and then grabs chunk of webpage
            url = urllib2.urlopen(host)
            chunk = url.read()

            #place chunk into out queue
            self.out_queue.put(chunk)

            #signals to queue job is done
            self.queue.task_done()

class DatamineThread(threading.Thread):
    """Threaded Url Grab"""
    def __init__(self, out_queue):
        threading.Thread.__init__(self)
        self.out_queue = out_queue

    def run(self):
        while True:
            #grabs host from queue
            chunk = self.out_queue.get()

            #parse the chunk
            soup = BeautifulSoup(chunk)
            print soup.findAll(['title'])

            #signals to queue job is done
            self.out_queue.task_done()

start = time.time()
def main():

    #spawn a pool of threads, and pass them queue instance
    for i in range(5):
        t = ThreadUrl(queue, out_queue)
        t.setDaemon(True)
        t.start()

    #populate queue with data
    for host in hosts:
        queue.put(host)

    for i in range(5):
        dt = DatamineThread(out_queue)
        dt.setDaemon(True)
        dt.start()

    #wait on the queue until everything has been processed
    queue.join()
    out_queue.join()

main()
print "Elapsed Time: %s" % (time.time() - start) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:56:36.237

您需要提到的 ATOzTOA 之类的锁。您通过以下方式创建它们

```
lock = threading.Lock() 
```

并且线程在进入临界区时获取它们。完成部分后，他们释放锁。写这个的pythonic方法是

```
with lock:
   do_something(buffer) 
```

# php - PHP 数组格式化

> ID：15759790
> 
> 赞同：0
> 
> 时间：2013-04-02T08:49:31.457
> 
> 标签：php, arrays, variables, formatting

我有变量 $array 包含：

```
Array ( [0] => A [1] => C ) 
```

我希望将此数组转换为两个新变量：

```
Variable 1 outputting: A,C
Variable 1 outputting: 'A', 'C' 
```

另一个例子：

```
Array ( [0] => B [1] => C [2] => D)
Variable 1: B,C,D
Variable 2: 'B', 'C', 'D' 
```

我怎样才能做到这一点？谢谢，劳伦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:52:31.547

使用[`implode()`](http://www.php.net/manual/en/function.implode.php)：

```
$result = implode(',', $array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:52:43.067

您可以像这样将每个元素制作为数组：

```
foreach ($array as $a) $$a = $a; // result: $a = "a"; $b = "b"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:16:34.140

```
 $array = array ( 'A' , 'C');
    $a = implode(',',$array);
    $b = "'". implode("','" , $array) . "'";
    var_dump($a , $b); 
```

更新：

或者变量 $array 也可以写成

```
 $array = array ( '0' => 'A' , '1' => 'C'); 
```

如果你在变量中有这个数组，只需使用它来代替 $array 变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T09:22:40.597

完整的代码...

```
 $array=Array ( "0" => "A" ,
    "1" => "C" ,
    );

  $var1 = implode(',', $array);

  echo $var1;
  echo "<br>";

   $result1 = implode(',',$array);
   $var2 = "'".str_replace(",", "', '", $result1)."'";
    echo $var2; 
```

这工作正常......我已经检查过了

# logback - 如何使 LogbackValve 异步支持？

> ID：15759795
> 
> 赞同：1
> 
> 时间：2013-04-02T08:49:45.740
> 
> 标签：logback, servlet-3.0

我在我的网络应用程序中使用 logback-access。

但是当我`<Valve className="ch.qos.logback.access.tomcat.LogbackValve"/>`在 server.xml 中使用时，我使用 request.startAsync() 的 servlet 将失败。

```
java.lang.IllegalStateException: Not supported.
at org.apache.catalina.connector.Request.startAsync(Request.java:1664)
at org.apache.catalina.connector.Request.startAsync(Request.java:1657)
at org.apache.catalina.connector.RequestFacade.startAsync(RequestFacade.java:1023)
at com.nut.NutServlet.doPost(NutServlet.java:61)
at com.nut.NutServlet.doGet(NutServlet.java:51)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at ch.qos.logback.access.tomcat.LogbackValve.invoke(LogbackValve.java:172)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

**这是因为 ch.qos.logback.access.tomcat.LogbackValve 不是 asyncSupported。那么我怎样才能让它异步支持呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T03:02:05.713

您只需要设置`asyncSupported="true"`您在其中配置阀门的属性`server.xml`。

```
<Valve className="ch.qos.logback.access.tomcat.LogbackValve" asyncSupported="true"/> 
```

# java - XML 递归节点解析器

> ID：15759796
> 
> 赞同：-1
> 
> 时间：2013-04-02T08:49:46.423
> 
> 标签：java, xml, parsing, recursion

我一直在尝试寻找解决方案，通过网络以及许多博客、论坛和网站进行搜索，但我仍然被这个问题所困扰。

我有一个这样的 XML 源：

```
<?xml version="1.0" encoding="UTF-8" ?>
<root>
   <level_one>
      <level_two>
         #text
      </level_two>
      <level_two>
         #text
      </level_two>
   </level_one>
</root> 
```

然后，在 Java 中，我尝试以递归方式解析这个 XML 文件。这是我的功能：

```
public void parseXML(Node root, Node parent)
{
   if (root.hasChildNodes())
   {
      NodeList childrens = root.getChildNodes();
      for (int i = 0; childrens.getLength(); i++)
      {
            parseXML(childrens.item(i), root);           
      }//for
   }//fi:root_childrens
   else
      System.println.out(parent.getNodeName()+"::"+root.getNodeValue());
} 
```

有一次，当我加载 XML 文件时，我会：

```
xmlDoc.normalize();
parseXML(xmlDoc.getFirstChild(), null); 
```

好的，这工作......或多或少。现在，我得到的响应如下：

```
root:: //OK
level_one:: //OK
level_two::#text //OK
level_one:: //WRONG: should not appear any more
level_two::#text //OK
level_one:: //WRONG: should not appear any more
root:: //WRONG: should not appear any more 
```

我正在使用以下库：

```
import javax.xml.*;
import org.w3c.dom.*; 
```

谢谢你的帮助。

编辑1：**仅供参考。XML 文件的深度超过 2 个级别。**

编辑 2：如果我将**parent.getNodeName()**更改为**root.getNodeName()**，我会得到以下响应：

```
#text::
#text::
#text::
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:02:44.047

这是因为您的程序正在显示包含空格的空文本节点，例如：“\n”

您的 xml 可能会像这样查看：

```
<?xml version="1.0" encoding="UTF-8" ?>
<root>[A node that contains "\n    "]
   <level_one>[A node that contains "\n    "]
      <level_two>
         #text
      </level_two>
      <level_two>
         #text
      </level_two>[A node that contains "\n    "]
   </level_one>[A node that contains "\n    "]
</root> 
```

这就是节点显示两次的原因。

要获得所需的输出，您可以编写如下内容：

```
public static void parseXML(Node node, Node parent)
{
   if (node.hasChildNodes())
   {
      System.out.println(node.getNodeName());
      NodeList childrens = node.getChildNodes();
      for (int i = 0; i < childrens.getLength(); i++)
      {
            parseXML(childrens.item(i), node);           
      }//for
   }//fi:root_childrens
   else {
      String nodeValue = node.getNodeValue().trim();
      if (nodeValue.length() > 0){
          System.out.println(parent.getNodeName() + "::" + nodeValue);
      }

   }
} 
```

这将打印：

```
#document
root
level_one
level_two
level_two::#text
level_two
level_two::#text 
```

# visual-studio-2012 - Visual Studio 2012 安装失败

> ID：15759797
> 
> 赞同：0
> 
> 时间：2013-04-02T08:49:53.273
> 
> 标签：visual-studio-2012

我正在尝试从 iso 映像在 win 7 Enterprise sp1 上安装 Visual Studio 2012。我得到以下错误列表：

1.  Microsoft visual c++ 2012 x86 minimum runtime -11.0.507 找不到请求的对象
2.  Microsoft Visual c++ 2012 x86 附加运行时 -11.0.507 找不到请求的对象
3.  Microsoft Visual c++ 2012 x86 调试运行时 -11.0.507 找不到请求的对象
4.  Microsoft Visual C++ 2012 编译器找不到请求的对象

谢谢等待回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:10:24.350

检查您的 ISO 映像是否损坏（[其他人](https://stackoverflow.com/questions/14146692/vs2012-error-on-setup-on-windows-8-visual-c-2012-x86-minimum-runtime-cannot)似乎发现这是他们的问题）。

# python - 如何在 Python 中将 256 位大端整数转换为小端？

> ID：15759806
> 
> 赞同：3
> 
> 时间：2013-04-02T08:50:15.290
> 
> 标签：python, struct, endianness

不太复杂，或者我希望如此。我有一个 256 位十六进制整数编码为大端，我需要将其转换为小端。Python 的 struct 模块通常就足够了，但[官方文档](http://docs.python.org/2/library/struct.html)没有列出大小甚至接近我需要的格式。

使用 struct 的非长度特定类型（尽管我可能做错了）似乎不起作用：

```
>> x = 'ffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000'
>> y = struct.unpack('>64s', x)[0] # Unpacking as big-endian
>> z = struct.pack('<64s', y) # Repacking as little-endian
>> print z
'ffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000' 
```

示例代码（应该发生什么）：

```
>> x = 'ffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000'
>> y = endianSwap(x)
>> print y
'00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T09:10:00.013

该`struct`模块无法处理 256 位数字。因此，您必须手动进行编码。

首先，您应该将其转换为字节：

```
x = 'ffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000'
a = x # for having more successive variables
b = a.decode('hex')
print repr(b)
# -> '\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00' 
```

这样您就可以[使用@Lennart 的方法](https://stackoverflow.com/a/15759881/296974)来反转它：

```
c = b[::-1]
# -> '\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff'

d = c.encode('hex')
z = d
print z
# -> 00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:53:42.540

```
>>> big = 'ffffffffffffffffffffffffffffffffffffffffffffffffffffffff00000000'
>>> big[::-1]
'00000000ffffffffffffffffffffffffffffffffffffffffffffffffffffffff' 
```

# ruby-on-rails - 工厂女孩嵌套属性

> ID：15759808
> 
> 赞同：0
> 
> 时间：2013-04-02T08:50:16.500
> 
> 标签：ruby-on-rails, factory-bot, specifications, pry

在**Rails 控制台**中，我运行此命令

```
bill = Bill.last
bill.bill_extras 
```

结果是这样的。

```
[#<BillExtra id: 141, bill_id: 621, content: "extra fee", prize: #<BigDecimal:7fa2e37d4f50,'0.248E3',9(18)>, created_at: "2012-08-02 04:48:12", updated_at: "2012-08-02 04:50:41">] 
```

**在规范文件**中，

```
require 'spec_helper'
require 'pry'
describe Bill do

  before(:all) do
    @project=Factory(:project_started)
    @customer_bill=Factory(:customer_invoice, :project => @project)
    @creavite_bill=Factory(:creative_invoice, :project => @project)
    @bill_extra=Factory.build(:bill_extra, :bill => @customer_bill)
  end
  binding.pry
end 
```

当我在调试时，在 pry 中运行这些命令，

```
@customer_bill.bill_extras 
```

这将是一个空数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:53:34.593

我认为语法不完全正确。

`FactoryGirl.create(:project_started)`

是创建物品的方式。

# node.js - 如何使自定义环境像 expressJs 中的生产环境一样工作？

> ID：15759809
> 
> 赞同：0
> 
> 时间：2013-04-02T08:50:23.387
> 
> 标签：node.js, express, configuration-files

我是新手`nodeJs+ExpressJs app`。我想`app.js`在自定义环境中运行。

例如： `NODE_ENV=production node app.js`将以`production`模式运行应用程序，视图模板将为`cached`. 但是有一个选项，我们可以`app.js`在任何自定义模式下运行，例如`NODE_ENV=custom_environment node app.js`. 如果是这样，如何捕捉视图模板？还是会捕获所有环境模式？就`development`模式而言，我认为视图模板不会被缓存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:55:48.107

您可以使用以下选项选择用于哪个环境的设置`app.configure`：

```
app.configure('custom_environment', function() {
  app.enable('view cache'); // enable view cache for this environment
  // perhaps load middleware specific for your custom environment:
  app.use(...);
}); 
```

# java - 在服务器之间移动文件

> ID：15759812
> 
> 赞同：0
> 
> 时间：2013-04-02T08:50:33.430
> 
> 标签：java, file, move

我能够使用 JAVA URL 连接在同一系统中实现将文件从一个目录移动到另一个目录。但是我必须将文件从一台服务器的目录移动到另一台服务器（linux 或 windows），并且我不应该使用第三方 Java蜜蜂。有没有办法实现这个？如果是，程序中需要哪些配置细节。请告诉我如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:55:41.270

像下面这样写一个非常小的脚本怎么样..

```
SOURCEDIR=/home/subodhr/e_books/
DESTDIR=user@server:home/subodhr/Destination/    
rsync -avh --exclude="*.bak" $SOURCEDIR $DESTDIR 
```

**使用moveFile.sh**`.sh`之类的扩展名保存此文件， 然后将脚本执行为**`./moveFile.sh`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:53:49.990

将内容读入可序列化的对象，并将它们传递给不同的机器。收到后，只需将它们写入磁盘。您应该能够使用核心 Java API 执行此操作。**

# ibm-mobilefirst - 获取由 dojox.mobile.searchbox 过滤的列表项的 ID

> ID：15759816
> 
> 赞同：0
> 
> 时间：2013-04-02T08:50:41.700
> 
> 标签：ibm-mobilefirst, dojox.mobile

我正在开发一个显示每个客户的列表项的移动应用程序。这个列表可以被 dojox.mobile.searchbox 组件过滤。在此链接上，我找到了此行为的示例（ [http://download.dojotoolkit.org/release-1.8.3/dojo-release-1.8.3/dojox/mobile/tests/test_SearchBox-demo.html](http://download.dojotoolkit.org/release-1.8.3/dojo-release-1.8.3/dojox/mobile/tests/test_SearchBox-demo.html) ），但是错过了知道点击了什么元素的可能性。我需要这个功能来创建一个包含一些客户详细信息的新视图。

我的项目在dojoInit函数中设置了两个主要函数：

```
require([
            "dojox/mobile/parser",
            "dojox/mobile",
            "dojox/mobile/compat",
            "dojox/mobile/SearchBox",
            "dojo/ready",
            "dijit/registry",
            "dojo/data/ItemFileReadStore",
            "dojo/store/DataStore",
            "dojox/mobile/ScrollableView",
            "dojox/mobile/EdgeToEdgeDataList",
            "dojox/mobile/SimpleDialog",
            "dojox/mobile/RoundRect",
            "dojox/mobile/Button",
            "dojox/mobile/RadioButton",
            "dojox/mobile/Switch"
            ], function(parser, mobile, compat, SearchBox, ready, registry, 
                        ItemFileReadStore, DataStore, ScrollableView, 
                        EdgeToEdgeDataList, RoundRect, Button, RadioButton, Switch){

            onSearch = function(results, query, options){
                // Callback when a search completes.
                WL.Logger.debug("results: " + results);
                WL.Logger.debug("query: " + query);
                list.setQuery(query);
            };

            ready(function(){
                searchBox = registry.byId("searchBox");
                searchBox.queryExpr = "*${0}*";
                list = registry.byId("list");
            });
        }); 
```

但是只有在从菜单请求功能时，才通过调用函数来设置 dataStore：

```
function listCustomers(){

WL.Logger.debug("entrata in listCustomers()");

require([
            "dojox/mobile/parser",
            "dojox/mobile",
            "dojox/mobile/compat",
            "dojox/mobile/SearchBox",
            "dojo/ready",
            "dijit/registry",
            "dojo/data/ItemFileReadStore",
            "dojo/store/DataStore",
            "dojox/mobile/ScrollableView",
            "dojox/mobile/EdgeToEdgeDataList",
            "dojox/mobile/SimpleDialog",
            "dojox/mobile/RoundRect",
            "dojox/mobile/Button",
            "dojox/mobile/RadioButton",
            "dojox/mobile/Switch"
            ], function(parser, mobile, compat, SearchBox, ready, registry, 
                        ItemFileReadStore, DataStore, ScrollableView, 
                        EdgeToEdgeDataList, RoundRect, Button, RadioButton, Switch){

var static_data = { 
        items: [ 
            {label: "Alabama", moveTo: "testView", id: "Alabama"},
            {label: "Alaska"},
            {label: "American Samoa"},
            {label: "Arizona"},
            {label: "Arkansas"},
            {label: "Armed Forces Europe"},
            {label: "Armed Forces Pacific"},
            {label: "Armed Forces the Americas"},
            {label: "California"},
            {label: "Colorado"},
            {label: "Connecticut"},
            {label: "Delaware"},
            {label: "District of Columbia"},
            {label: "Federated States of Micronesia"},
            {label: "Florida"},
            {label: "Georgia"},
            {label: "Guam"},
            {label: "Hawaii"},
            {label: "Idaho"},
            {label: "Illinois"},
            {label: "Indiana"},
            {label: "Iowa"},
            {label: "Kansas"},
            {label: "Kentucky"},
            {label: "Louisiana"},
            {label: "Maine"},
            {label: "Marshall Islands"},
            {label: "Maryland"},
            {label: "Massachusetts"},
            {label: "Michigan"},
            {label: "Minnesota"},
            {label: "Mississippi"},
            {label: "Missouri"},
            {label: "Montana"},
            {label: "Nebraska"},
            {label: "Nevada"},
            {label: "New Hampshire"},
            {label: "New Jersey"},
            {label: "New Mexico"},
            {label: "New York"},
            {label: "North Carolina"},
            {label: "North Dakota"},
            {label: "Northern Mariana Islands"},
            {label: "Ohio"},
            {label: "Oklahoma"},
            {label: "Oregon"},
            {label: "Pennsylvania"},
            {label: "Puerto Rico"},
            {label: "Rhode Island"},
            {label: "South Carolina"},
            {label: "South Dakota"},
            {label: "Tennessee"},
            {label: "Texas"},
            {label: "Utah"},
            {label: "Vermont"},
            {label: "Virgin Islands, U.S."},
            {label: "Virginia"},
            {label: "Washington"},
            {label: "West Virginia"},
            {label: "Wisconsin"},
            {label: "Wyoming"},
        ]
    };

    // dojo.data store for dojox.mobile.EdgeToEdgeDataList
    dataStore = new ItemFileReadStore({data: static_data});
    // dojo.store for dojox.mobile.SearchBox
    store = new DataStore({store: dataStore});

    searchBox = null;
    list = null;

    list = dijit.registry.byId("list");

    searchBox = dijit.registry.byId("searchBox");
    searchBox.set("store", store);

    list.setStore(dataStore, {label: "*"});

});
} 
```

我使用静态数据进行初始测试。HTML 脚本如下：

```
<input data-dojo-type="dojox.mobile.SearchBox" type="search" id="searchBox"
                style="width:100%" placeHolder="Search" 
                data-dojo-props='store:store, searchAttr: "label", ignoreCase: true, incremental: true, pageSize:1, onSearch:onSearch, queryExpr: "*${0}*"'>

            <div data-dojo-type="dojox.mobile.ScrollableView">
                <ul data-dojo-type="dojox.mobile.EdgeToEdgeDataList" 
                id="list"></ul>
            </div> 
```

有什么方法可以让你选择什么项目来构建下一个视图？像“onclick”事件......

谢谢

恩里科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T15:59:25.280

我在 js 文件中使用它：

```
mydata+="{ 'label': '"+codice_catalogo[i].CODCT+"', 'moveTo':'#', 'onClick':function(){  Nextview('"+codice_catalogo[i].CODCT+"')}   }, ";

function Nextview(){
var w =  dijit.registry.byId('view_dove_sei_posizionato');
w.performTransition('view_dove_vuoi_andare',1,"slide",null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T09:24:04.370

您可以做的是设置每个项目的 userClickAction，并且在该处理程序中，您可以在某处记录单击的项目。由于您使用 DataList，您应该重写列表的 createListItem 函数来设置 userClickAction。

希望有帮助。

```
Eric 
```

# jquery - 以百分比定义 maxHeight 的 jquery 对话框

> ID：15759817
> 
> 赞同：10
> 
> 时间：2013-04-02T08:50:42.153
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我创建了一个小项目，我必须在其中显示一个使用 jquery-ui 对话框的模式对话框。

我想以百分比定义对话框的最大高度。我已经尝试了几件事，但没有一个有效。

请有人可以帮助我可能是什么问题。

见[http://jsbin.com/otiley/1/edit](http://jsbin.com/otiley/1/edit)

非常感谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-02T08:56:48.673

试试[这个](http://forum.jquery.com/topic/dialog-size-as-percent)链接以百分比设置高度。

```
$(document).ready(function() {
$('#testColorBox').click(function() {
    var wWidth = $(window).width();
    var dWidth = wWidth * 0.8;
    var wHeight = $(window).height();
    var dHeight = wHeight * 0.8;
    var $link = $(this);
    var $dialog = $('<div></div>')
        .load('test.html')
        .dialog({
            autoOpen: false,
            modal: true,
            title: $link.attr('title'),
            overlay: { opacity: 0.1, background: "black" },
            width: dWidth,
            height: dHeight,
            draggable: false,
                            resizable: false
        });
    $dialog.dialog('open');
    return false;
  });   
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-02T08:55:23.767

jQuery UI 只允许您以像素表示最大高度。您需要在代码中按百分比执行计算。

```
$(document).ready(function(){
  $( "#dialog-modal" ).html($("#temp").html());
  $("div#dialog-modal").dialog({
      height: "auto",
    maxHeight: $("div#dialog-modal").outerHeight() * .2,
      resizable: false,
      width: "70%",
      modal: true,
      title: "Hello"
  });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T08:56:02.930

您可以通过检查窗口高度或某些 div 的高度来做到这一点。

这是一个例子：http: [//jsbin.com/otiley/4/edit](http://jsbin.com/otiley/4/edit)

或者 ：

```
 $(document).ready(function(){
   var height = $(window).height();
   height = height*0.20;
  $( "#dialog-modal" ).html($("#temp").html());
  $("div#dialog-modal").dialog({
      height: "auto",
      maxHeight: height,
      resizable: false,
      width: "70%",
      modal: true,
      title: "Hello"
  });
}); 
```

您可以获取任何 div 的高度并计算任何所需的百分比。

# google-plus - 使用 PHP 客户端发布 Google+ 朋友圈时出现 401 未经授权的访问

> ID：15759821
> 
> 赞同：0
> 
> 时间：2013-04-02T08:50:48.307
> 
> 标签：google-plus, google-api-php-client

我正在尝试使用 API 在 google+ 中发布片刻，创建一个简单的示例，但出现 401 错误。我正在关注[https://plus.google.com/+SilvanoLuciani/posts/2kMX9Dzaf8V](https://plus.google.com/+SilvanoLuciani/posts/2kMX9Dzaf8V)中的 Silvano Luciani 步骤，为了发布片刻，我已经：

*   从这里下载了最后一个库 0.6.1：[https ://code.google.com/p/google-api-php-client/downloads/list](https://code.google.com/p/google-api-php-client/downloads/list)

*   从 Silvano Luciani 下载的示例：[https ://gist.github.com/silvolu/5054214](https://gist.github.com/silvolu/5054214)

*   使用我的 G+ 应用程序中的所有数据配置示例文件

这直接不起作用，在示例中，在第 16 行，要求一个类**Google_PlusService**，它不存在，所以我将它更改为类**Google_PlusMomentsService**。

随着更改，它发布到类似于**“plus/v1moments/people/”**的 URL并显示 404 错误。所以，我修改了**src/contrib/Google_PlusMomentsService.php**中的 URL ，第 73 行从**"plus/v1moments/people"** => 到**"plus/v1/people"**。

之后，它显示它需要**setRequestVisibleActions**才能工作，我意识到 Google 客户端没有该方法，所以我从 Google 存储库中获取最后一个 Google_client：[https ://code.google.com/p/google- api-php-client/source/detail?r=534](https://code.google.com/p/google-api-php-client/source/detail?r=534)

好的，现在，它可以工作了，但它显示 401 错误，我不知道该怎么做。

错误是：

> 调用 POST [https://www.googleapis.com/plus/v1/people/me/moments/vault?key=XXXXXXXXXXXXXXX](https://www.googleapis.com/plus/v1/people/me/moments/vault?key=XXXXXXXXXXXXXX)时出错：(401) 在 C:\wamp\www\gPlus\src\io\Google_REST.php 中未授权在第 66 行

其中 XXXXXXXXXX 密钥是我在文件中设置的开发人员密钥。看起来 POST 不包括 URL 中的操作，但我不确定这是否是问题或如何解决它。有没有人知道如何解决它？谢谢！

# 更新

正如 Luciano 所指出的，我使用的是过时的 google-php-client，因此，正如他所指出的，我已经从 SVN 存储库下载了最后一个代码。但是在设置配置文件后，在 Moments 中包含来自 Silvano 的时刻示例文件，并在 Google 控制台和配置文件中配置 API 重定向 URL，/examples 文件夹中的示例不起作用。执行 Silvano PHP 示例会引发“不可用”错误：

> Esta página web no está disponible Es posible que la página web [https://accounts.google.com/o/oauth2/auth?response_type=code&redirect_uri=http%3A%2F%2Flocalhost%2FgplusAPI%2Fexamples%2Fmoments%2Findex.php&client_id= xxxxxxxx.apps.googleusercontent.com&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.login&access_type=offline&approval_prompt=force&request_visible_actions=http%3A%2F%2Fschemas.google.com%2FAddActivity+http%3A%2F% 2Fschemas.google.com%2FReviewActivity](https://accounts.google.com/o/oauth2/auth?response_type=code&redirect_uri=http%3A%2F%2Flocalhost%2FgplusAPI%2Fexamples%2Fmoments%2Findex.php&client_id=xxxxxxxx.apps.googleusercontent.com&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fplus.login&access_type=offline&approval_prompt=force&request_visible_actions=http%3A%2F%2Fschemas.google.com%2FAddActivity+http%3A%2F%2Fschemas.google.com%2FReviewActivity) esté temporalmente inactiva o que se haya trasladado definitivamente a otra dirección。错误 15 (net::ERR_SOCKET_NOT_CONNECTED)：错误 deconocido。

但库中的其他示例也存在相同的错误。时间问题，还是图书馆问题？

# 更新 2

是的，是浏览器的问题。它仍然出现在 Chrome 中，但使用 Firefox 就像一个魅力，它不再出现 401 错误，这很好，XD

现在，我有另一个问题，它返回一个数组，但它没有在流中发布任何内容。西尔瓦诺，这正常吗？无论如何，非常感谢您的帮助，我的主要问题得到了解答，完成流发布又少了一步，XD！

数组是：

```
Array ( 
    [kind] => plus#moment 
    [type] => http://schemas.google.com/AddActivity 
    [target] => Array ( 
        [kind] => plus#itemScope 
        [url] => https://developers.google.com/+/plugins/snippet/examples/thing 
    ) 
    [result] => Array ( 
        [kind] => plus#itemScope 
    ) 
    [id] => xxxxxxxxx 
) 
```

# 更新 3

好的，看起来为了防止垃圾邮件，他们不允许直接在流上发布。有关更多信息，请参阅此问题的答案：

[使用 google-api-PHP-client 在 Google+ 流中的帖子未显示在用户的流中](https://stackoverflow.com/questions/15830255/post-in-google-stream-is-not-showing-up-in-users-stream-using-google-api-php-c)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:53:38.123

您需要使用可以在[主干](https://code.google.com/p/google-api-php-client/source/checkout)中找到的库版本，以便 gist 中显示的代码正常工作。

您不应该使用 Google_PlusMomentsService，因为它已被弃用（并且已从主干中删除）。奇怪的是 Google_PlusService 不存在，它就在[这里](https://code.google.com/p/google-api-php-client/source/browse/trunk/src/contrib/Google_PlusService.php)。

# regex - 替换模式的正则表达式

> ID：15759822
> 
> 赞同：-1
> 
> 时间：2013-04-02T08:50:49.043
> 
> 标签：regex, visual-studio-2010

我使用`Microsoft Visual Studio`并有一个文件，其中包含一些由`|`. 我需要找到一个特定的模式并将其从文件中删除

```
sometext|maxusage=sometext,,,,...|somemoretext 
```

我想隔离任何`|`后跟的`maxusage=`，然后是任何文本直到下一个`|`

在上述情况下，我需要隔离

```
|maxusage=sometext,,,,...| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:08:57.280

它简单而单一的陈述

```
File.WriteAllText("c:\\test.txt", Regex.Replace(File.ReadAllText("c:\\test.txt"), "\|maxusage=[^\|]+\|", "")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:53:37.883

这是我的朋友的 C# 代码，

```
using System;
using System.Text.RegularExpressions;

public class Example
{
  public static void Main()
 {
   string pattern = @"\p{Sc}*(?<amount>\s?\d+[.,]?\d*)\p{Sc}*";
  string replacement = "${amount}";
  string input = "$16.32 12.19 £16.29 €18.29  €18,29";
  string result = Regex.Replace(input, pattern, replacement);
  Console.WriteLine(result);
 }
} 
```

// 该示例显示以下输出： // 16.32 12.19 16.29 18.29 18,29

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:53:45.350

请注意，它确实有效（如果 Visual Studio 没有实现惰性量词，则不会）：

```
/\|maxusage=.*?\|/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T08:53:46.137

使用这个正则表达式`\|maxusage.*?\|`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T08:54:07.810

为什么不使用`string.Split()`来拆分您的字符串并进行调查呢？

```
string[] parts = text.Split('|');
foreach(string s in parts){
//iterate of array and find what you are looking for
} 
```

# firefox - Firefox 仅在链接悬停和使用 onmouseover / onmouseout 时出现故障

> ID：15759825
> 
> 赞同：0
> 
> 时间：2013-04-02T08:50:58.363
> 
> 标签：firefox, hover, onmouseover, onmouseout, blink

大家好，我在使用 Firefox 并结合 onMouseOver 和 onMouseOut - 事件时遇到了一些奇怪的行为。

我得到了这个代码，即：

```
 <a href='examplelink' onmouseover='showPopup();' onmouseout='hidePopup();'>My example link</a> 
```

这显示了一个弹出 onmouseover 并在 onmouseout 上隐藏它。在其他所有浏览器中都很好，除了 Firefox。问题是，当我将链接悬停在链接顶部时，一切似乎都正常。但是当我将链接悬停在下三分之一时，光标一直从鼠标指针变为默认光标，弹出窗口打开并隐藏，打开并隐藏...

这里有人也有这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:29:59.807

听起来你`showPopup`在指针下显示弹出窗口，所以当然会触发链接上的鼠标悬停，隐藏弹出窗口，所以现在指针再次位于链接上方，触发鼠标悬停等。

# python - 如何计算列表中大于给定数字的元素的出现次数？

> ID：15759827
> 
> 赞同：6
> 
> 时间：2013-04-02T08:51:07.677
> 
> 标签：python, list, count

假设我有这个列表：

```
a = [1.1, 2, 3.1, 4, 5, 6, 7.2, 8.5, 9.1] 
```

我想知道有多少个元素大于 7。结果应该是`3`. 在 Python 中有没有一种优雅的方法来做到这一点？我试过了，`count`但它不起作用。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T08:51:42.673

```
>>> a = [1.1 , 2 , 3.1 , 4 , 5 , 6 , 7.2 , 8.5 , 9.1]
>>> sum(x > 7 for x in a)
3 
```

`bool`这利用了s 也是s的事实`int`。

[（如果你反对这个因为你认为它不清楚或*pythonic*然后阅读[这个链接](https://stackoverflow.com/a/3175293/1219006)）]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T14:55:44.507

更短，使用 numpy：

```
sum(np.array(a)>7) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T12:21:12.053

编写一个函数，返回大于特定数字的元素计数。

```
def get_max_count(l, num):
    count = 0

    for x in l:
        if x > num:
            count+=1
    return count

l = [1.1, 2, 3.1, 4, 5, 6, 7.2, 8.5, 9.1]
print get_max_count(l=l, num = 7) 
```

# string - LISP-从字符串中删除元音

> ID：15759828
> 
> 赞同：1
> 
> 时间：2013-04-02T08:51:11.170
> 
> 标签：string, lisp, common-lisp

我想编写一个从字符串中删除所有元音的函数。我想定义一个检测元音的函数，类似于 symbolp、zerop 等，如果是元音，删除它。我怎样才能做到这一点？我将不胜感激对此的任何意见。谢谢

```
(defun deletevowels (string)
(go through the list
   (if vowel-p deletevowels )
)
) 
```

不过，我有一个问题，如果它是最后一个元音，我该如何修改它以满足我想要做的，删除字符串中的所有元音？在下面的代码中，我提到了这个函数，元音-p 之一。

```
(defun strip-vowel (word)
  "Strip off a trailing vowel from a string."
  (let* ((str (string word))
         (end (- (length str) 1)))
    (if (vowel-p (char str end))
        (subseq str 0 end)
        str)))

(defun vowel-p (char) (find char "aeiou" :test #'char-equal)) 
```

此外，如果我使用下面的函数将字符串转换为列表，然后在列表中循环而不是字符串来查找元音并删除它，会更容易吗？

```
(defun string-to-list (string)
  (loop for char across string collect char)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:41:00.143

```
CL-USER 27 > (defun vowel-p (char)
               (find char "aeiou" :test #'char-equal))
VOWEL-P

CL-USER 28 > (remove-if #'vowel-p "abcdef")
"bcdf" 
```

请参阅：Common Lisp Hyperspec，[REMOVE-IF](http://www.lispworks.com/documentation/HyperSpec/Body/f_rm_rm.htm#remove-if)。

```
CL-USER 29 > (defun deletevowels (string)
               (remove-if #'vowel-p string))
DELETEVOWELS

CL-USER 30 > (deletevowels "spectacular")
"spctclr" 
```

# .htaccess - 使用 PHP 创建对搜索引擎友好的 URL

> ID：15759832
> 
> 赞同：0
> 
> 时间：2013-04-02T08:51:31.373
> 
> 标签：.htaccess, mod-rewrite

我对 reg exp、mod_rewrite 和 .htaccess 的修改不是很熟悉。我想创建搜索引擎优化的链接，这样访问者就不必

1.  看到文件类型ie company.php 变成了公司
2.  查看完整的查询字符串

我目前拥有的是： [http ://www.mysite.com/company.php?company_id=74&name=DesignSourceLtd](http://www.mysite.com/company.php?company_id=74&name=DesignSourceLtd)

我想要的样子是 [http://www.mysite.com/company/74/DesignSourceLtd](http://www.mysite.com/company/74/DesignSourceLtd)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:59:58.473

你对 PHP 的工作并不大，只要确保你将创建干净的 url，所以删除特殊字符和德语变音符号（如果有的话）。

只需在 php 脚本中将链接从 [http://www.mysite.com/company.php?company_id=74&name=DesignSourceLtd](http://www.mysite.com/company.php?company_id=74&name=DesignSourceLtd)转到[http://www.mysite.com/company/74/DesignSourceLtd 。](http://www.mysite.com/company/74/DesignSourceLtd)

现在，在您的 .htaccess 文件中，执行以下操作：

```
RewriteEngine On

Options FollowSymLinks

RewriteRule ^([-_a-zA-Z0-9]*)/([-_a-zA-Z0-9]*)/([-_a-zA-Z0-9]*)$ index.php?page=$1&id=$2&name=$3 
```

这将引导您： index.php?page=company&id=74&name=DesignSourceLtd

# firefox - Selenium Web Driver(Firefox) 有时无法通过 id 找到网页中存在的元素

> ID：15759842
> 
> 赞同：2
> 
> 时间：2013-04-02T08:51:49.297
> 
> 标签：firefox, selenium, python-2.7, automation, selenium-webdriver

我正在使用`Selenium Web Driver`Fire Fox 在`Python`.

问题是有时对于某些元素，`NoSuchElementException`即使该元素与我正在搜索的 id 存在，我也会得到。

我正在使用`find_element_by_id(id)`方法。

我的代码是

`d = webdriver.Firefox()`

`elm5 = d.find_element_by_id("ctl00_bodyContent_tabGroupAdmin")`

`elm5.click()`

该元素的 HTML 是：

```
<div id="ctl00_bodyContent_tabGroupAdmin" class="tab">
                <div onclick="OpenTab(3); DisableProgressBarDisplay(); return false;">
                    Group Administrators</div>
                <div class="cap_right">
                </div>
            </div> 
```

有没有人遇到过同样的问题？请建议一些解决方法。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:10:12.847

我建议您必须等待元素出现。

看看这个[关于如何等待的答案](https://stackoverflow.com/questions/7781792/selenium-waitforelement)

我们也有这个问题，有时在使用 selenium 时。页面太慢了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:42:04.197

我对Python一无所知，但是我正在使用java使用selenium Webdriver，我想问题出在bcz可能你没有切换到当前帧。您可以通过向上检查您的 html 内容来检查这一点，您将能够找到当前帧。

在java中，我们曾经这样做是 driver.switchTo().frame(driver.findElement(By.name("officePane")));

你可以在python中检查这个类似的希望它会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T13:34:15.513

```
from selenium.webdriver.common.by import By
from selenium.webdriver.support import expected_conditions as EC
from selenium.webdriver.support.ui import WebDriverWait 
```

将这些添加到代码的开头并

```
WebDriverWait(d, 20).until(EC.presence_of_element_located((By.ID, "ctl00_bodyContent_tabGroupAdmin"))) 
```

顺便说一句，您可以在一行中查找并单击元素，如下所示：

```
d.find_element_by_id("ctl00_bodyContent_tabGroupAdmin").click() 
```

祝你好运，感谢[用户](https://stackoverflow.com/users/1320237/user)为我们教授这个解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-11T07:10:41.543

希望您的问题现在得到解决。但自上周以来，我面临着同样的问题。这是您的问题的以下代码。它会在元素被频繁检测和某些时候未被检测到时，专门检测框架并定位元素。

```
WebDriver d = new FirefoxDriver();  <-- Intialize your Firefox driver
WebDriverWait  frame = new WebDriverWait(driver, 50); <-- Creating wait object for frame
frame.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(By.tagName("iframe")));
WebDriverWait wait1 = new WebDriverWait(driver, 50); <-- Creating wait object for element 
wait1.until(ExpectedConditions.elementToBeClickable(find_element_by_id("ctl00_bodyContent_tabGroupAdmin"))).click(); 
```

希望这将解决您的问题，如果它没有解决。

# php - 自动安排在特定时间执行 php 脚本

> ID：15759843
> 
> 赞同：1
> 
> 时间：2013-04-02T08:51:49.443
> 
> 标签：php, mysql, events, scheduled-tasks

我正在开发一个需要事件的网络应用程序。用户在特定时间创建事件，我需要执行脚本并在确切时间激活事件，以便事件可以开始。关于如何做到这一点的任何想法？我用谷歌搜索并通过堆栈溢出搜索，但我遇到的只是在特定时间多次执行。我需要的是在自动设定的时间执行。希望你能帮帮我，我很绝望。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T09:18:02.513

你有 3 个选项。我的建议：如果可以，请使用 cron，如果必须，请使用用户驱动，最后使用守护程序。

**（1）cron（如评论中所述）**

cron 是用于 linux 系统的调度程序，它将在您的系统上运行命令行作业。您通过 ssh 登录到您的服务器，输入`crontab -e`，然后添加如下一行：

```
4 5 * * * php /path/to/my/script.php 
```

这将在每天早上 5:04 运行脚本。

```
<?php
// /path/to/my/script.php

// Do something 
```

一些托管服务允许使用 GUI 输入 cron 作业。还有外部 cron 服务，它们会在特定时间为您调用 URL。

**(2) 守护进程**

这是最高级的选项，也是最不可靠的选项：您运行一个包含无限循环的命令行脚本。然后脚本会定期检查状态并做出响应。因为它可能在运行几个月后崩溃，所以您必须有第二个脚本来重新启动它以防万一。这是很多工作，但它是最灵活的方法。

```
<?php

while (1) {   

  // fetch $last_exec_timestamp from database

  if ($last_exec_timestamp < time() + 86400) {
    // set last_exec_timestamp to now in database

    // do something
  }
  sleep(5); 
```

}

**3\. 用户驱动**

如果您的网站上有大量流量，您可以在没有更多输出时在页脚中简单地包含一个作业。确保此代码速度很快，否则不幸的用户将等待它。

```
<?php

// fetch $last_exec_timestamp from database

if ($last_exec_timestamp < time() + 86400) {
  // set last_exec_timestamp to now in database
  // do something
} 
```

还有更多奇特的“用户驱动”方法，我没有在[另一个堆栈溢出问题](https://stackoverflow.com/a/14469376/187273)中亲自测试过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T08:55:53.083

你正在寻找的是 CRON JOBS

[http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

# ruby-on-rails - 运行 solr:server_win rake 命令时出错

> ID：15759854
> 
> 赞同：1
> 
> 时间：2013-04-02T08:52:30.033
> 
> 标签：ruby-on-rails, rake, sunspot-solr

运行 solr:start_win 的 rake 命令时出现以下错误。我还安装了 sunspot_rails gem。
请帮助我们。

```
C:\Documents and Settings\Administrator\Desktop\trunk>rake solr:start_win
(in C:/Documents and Settings/Administrator/Desktop/trunk)
java.lang.NoClassDefFoundError: and
Caused by: java.lang.ClassNotFoundException: and
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: and.  Program will exit.
Exception in thread "main" production Solr started successfully on 8982. 
```

# javascript - 使用 javascript 从选项中获取数组值以填充文本字段

> ID：15759863
> 
> 赞同：2
> 
> 时间：2013-04-02T08:52:55.723
> 
> 标签：javascript, html

我有一个表单，用户可以使用 ajax 进行“即时搜索”，搜索结果显示为“选择...选项”标签，当用户选择一个选项时，它的值将填充一个文本字段。代码的“简化”版本是这样的：

```
<form action="action.php" method="post" name="form1" id="form1">
    Code: <input type="text" name="Code" value="" size="32" readonly="readonly" /> <br />
    <select class="paselect" onchange="form1.elements['Code'].value = this.options[this.selectedIndex].value;">
        <option value="2413">2413 - Name A</option>
        <option value="2414">2414 - Name B</option>
        <option value="2415">2415 - Name C</option>
    </select>
</form> 
```

您也可以在线查看：http: [//jsfiddle.net/BCXfQ/](http://jsfiddle.net/BCXfQ/)

现在，我需要为每个选项选择获取两个值，如下所示：

```
<form action="action.php" method="post" name="form1" id="form1">
    Code: <input type="text" name="Code" value="" size="32" readonly="readonly" /> <br />
    Name: <input type="text" name="Name" value="" size="32" readonly="readonly" /> <br />
    <select class="paselect" onchange="form1.elements['Code'].value = this.options[this.selectedIndex].value;">
        <option value="['Name A', '2413']">2413 - Name A</option>
        <option value="['Name B', '2414']">2414 - Name B</option>
        <option value="['Name C', '2415']">2415 - Name C</option>
    </select>
</form> 
```

但我不知道如何获取数组值并用代码填充两个字段，另一个用名称填充。

在线：http: [//jsfiddle.net/zm3nX/](http://jsfiddle.net/zm3nX/)

我从现在开始尝试改变

```
form1.elements['Code'].value = this.options[this.selectedIndex].value 
```

到

```
form1.elements['Code'].value = this.options[this.selectedIndex].value[0] 
```

并

```
form1.elements['Code'].value = this.options[this.selectedIndex[0]].value 
```

但没有运气。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T09:12:15.850

您是否考虑过使用数据属性？

```
Code: <input type="text" id="foo-code" name="Code" value="" size="32" readonly="readonly" /> <br />
Name: <input type="text" id="foo-name" name="Name" value="" size="32" readonly="readonly" /> <br />
<select class="paselect" id="foo-list">
  <option data-name="Name A" data-code="2413">2413 - Name A</option>
  <option data-name="Name B" data-code="2413">2413 - Name B</option>
  <option data-name="Name C" data-code="2413">2413 - Name C</option>
</select> 
```

把东西粘在一起：

```
var select = document.getElementById("foo-list");
var code = document.getElementById("foo-code");
var name = document.getElementById("foo-name");
select.addEventListener('change', function(event) {
  code.value = this.getAttribute("data-code");
  name.value = this.getAttribute("data-name");
}, false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T09:24:17.710

您可以执行以下操作：

```
<script>
function updateValues(el) {
  var form = el.form;
  var v = el.value;
  v = v.replace(/^\[\'|\'\]$/g,'').split("', '");
  form.Code.value = v[1];
  form.Name.value = v[0];
}
</script>

<form action="action.php" method="post" name="form1" id="form1">
  Code: <input type="text" name="Code" size="32" readonly> <br>
  Name: <input type="text" name="Name" size="32" readonly> <br>
  <select class="paselect" onchange="updateValues(this);">
    <option value="['Name A', '2413']">2413 - Name A
    <option value="['Name B', '2413']">2413 - Name B
    <option value="['Name C', '2413']">2413 - Name C
  </select>
</form> 
```

请注意，在 IE 中，如果用户使用光标键导航选项，则每次他们将焦点移动到不同的选项时都会调度 onchange 事件。其他浏览器将等待实际选择选项卡或空格（取决于浏览器）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T11:59:58.907

是的，我会采取类似于 Angular 这样做的方法 - 使用 jquery 和 rodneyrehm 的示例：

```
<select class="paselect" id="foo-list">
  <option data-name="Name A" data-code="2413">2413 - Name A</option>
  <option data-name="Name B" data-code="2413">2413 - Name B</option>
  <option data-name="Name C" data-code="2413">2413 - Name C</option>
</select>

$('#foo-list').change(function() {
    var opt = $(this.options[this.selectedIndex]);
    var name = opt.attr('data-name');
    var code = opt.attr('data-code');

    $('#status').text('Name: ' + name + ', Code: ' + code);
}); 
```

[http://jsfiddle.net/b9chris/mbSLB/](http://jsfiddle.net/b9chris/mbSLB/)

这避免了潜在的脆弱正则表达式；您存储的字符串以及在考虑和错误检查变得更简单时要转义的内容。

前缀只是为了`data-`符合 HTML5 规范，但事实是您可以组成您喜欢的任何属性名称 - 因此，如果您在服务器上生成此 HTML 并希望保持简短，您甚至可以使用`a=`和`b=`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T09:40:00.160

使用此代码。

```
<script>
    function setdata(selectvalue, selecttext){  
        form1.elements['Code'].value = selectvalue;
        form1.elements['Name'].value = selecttext;
    }
</script>

<form action="action.php" method="post" name="form1" id="form1">
    Code: <input type="text" name="Code" value="" size="32" readonly="readonly" /> <br />
    Name: <input type="text" name="Name" value="" size="32" readonly="readonly" /> <br />
    <select class="paselect" onchange="setdata(this.value,this.options[this.selectedIndex].text)">
         <option value="['Name A', '2413']">2413 - Name A</option>
         <option value="['Name B', '2414']">2414 - Name B</option>
         <option value="['Name C', '2415']">2415 - Name C</option>
    </select>
</form> 
```

希望对您有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T09:57:40.793

试试这个

```
<form action="action.php" method="post" name="form1" id="form1">
    Code: <input type="text" name="Code" value="" size="32" readonly="readonly" /> <br />
    Name: <input type="text" name="Name" value="" size="32" readonly="readonly" /> <br />
    <select class="paselect" onchange="getValue(this.value);">
        <option value="Name A-2413">2413 - Name A</option>
        <option value="Name B-2413">2413 - Name B</option>
        <option value="Name C-2413">2413 - Name C</option>
    </select>
</form>

<script>
    function getValue(val){ 
        var myval=val.split('-');
        form1.elements['Code'].value=myval[1];
        form1.elements['Name'].value=myval[0];
    }
</script> 
```

# c# - 列表字符串列表c#

> ID：15759867
> 
> 赞同：0
> 
> 时间：2013-04-02T08:53:02.763
> 
> 标签：c#, arrays, list, params

我正在创建一些使用 CarlosAG ExcelXMLWriter 的方法，我特别想改进这种方法

```
public void insertaRango(Worksheet sheet, List<object> values, int columnMerge = 0, string styleID = null, DataType dt = DataType.String)
{
    WorksheetRow row = sheet.Table.Rows.Add();
    WorksheetCell cell;
    foreach (var value in values)
    {
        cell = row.Cells.Add();
        cell.Data.Text = value.ToString();
        cell.MergeAcross = columnMerge;
        cell.StyleID = styleID;
        cell.Data.Type = dt;
    }
} 
```

它通过一些选项生成一系列数据，主要问题是如果我想写这些数据

```
//Client    Money       Date
//------    -----       ----------
//Jhon Doe  1,034.88    2013-02-01
//Chris S.  4,882.12    2013-02-08
//
//TOTAL     XXXXXXXX 
```

我无法`=SUM`为“Money”列执行功能，因为列表只接受一种类型的数据，如果我将其设置为`string`数字，则不会那样使用，如果我使用`int`字符串将无法解析......此方法的其余参数存在相同的问题，它不能是每个项目的一个参数...

所以基本上我想做这样的事情，但我迷路了......

```
Objects {
    "Item 1" { // This is the value of the cell.
        dt => String,
        columnMerge => 0,
        styleID => "MyStyle",
    },
    "Item 2" { // This is the value of the cell.
        dt => String,
        columnMerge => 3,
        styleID => "MyStyle2",
    },
    "1,034.88" { // This is the value of the cell.
        dt => Number,
        columnMerge => 0,
        styleID => "numberStyle",
    }
} 
```

然后，当然，解析方法上的所有内容......

我希望我已经解释了一切，谢谢。 **更新**

感谢给出的答案，我已将构造函数添加到类中，现在一切正常，谢谢。

```
public class CellValue
{
    public CellValue()
    {
        ColumnMerge = 0;
        StyleID = "Default";
        DataType = DataType.String;
        Value = null;
    }
    public int ColumnMerge { get; set; } // Combinación de celdas indice base 0.
    public string StyleID { get; set; } // Estilo deseado para la celda (consultar método generarEstilos).
    public DataType DataType { get; set; } // Tipo de datos de la celda ()
    public object Value { get; set; } // Valor de la celda.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:12:40.523

如果您希望能够为每个单元格设置单独的参数，请为单元格值声明容器类型：

```
class CellValue
{
    public int ColumnMerge { get; set; }
    public string StyleID { get; set; }
    public DataType DataType { get; set; }
    public object Value { get; set; }
} 
```

并通过 list of`CellValue`而不是 list of `object`：

```
 public void insertaRango(Worksheet sheet, List<CellValue> values)
    {
        WorksheetRow row = sheet.Table.Rows.Add();
        WorksheetCell cell;
        foreach (var value in values)
        {
            cell = row.Cells.Add();
            cell.Data.Text = value.Value.ToString();
            cell.MergeAcross = value.ColumnMerge;
            cell.StyleID = value.StyleID;
            cell.Data.Type = value.DataType;
        }
    } 
```

# jquery - jQuery .on('click',.. 不会在 Safari 中触发

> ID：15759870
> 
> 赞同：1
> 
> 时间：2013-04-02T08:53:08.690
> 
> 标签：jquery, safari, click

我有这些动态添加到 html 表中的图标。其中之一是垃圾桶。当它被点击时，该行应该被删除。

在开发过程中，我在 Firefox、Chrome 和 IE 中对其进行了测试，一切都像魅力一样。但是现在有一个 Safari 用户注意到在 Safari 中根本没有触发点击。我下载并安装了最新版本的 Safari for Windows 来检查自己，单击垃圾桶图标时确实没有任何反应。

奇怪的是，该页面在 Safari 中完美运行的其他元素上有更多的点击事件。

它们都使用 .on() 和 .off()。（有些只是 .click() ）。

我的代码：

```
/**
 * Delete row from html table 
 */
$(document).on('click', '.deleteRow', function() {
    $('#row_' + $(this).attr('id').substr(4)).remove();
}); 
```

如您所见，jQuery 代码并不复杂。有谁知道为什么它在 Firefox、Chrome 和 IE 中有效，而在 Safari 中无效？

编辑：此外，我注意到 Safari 中的另一个奇怪行为。在 CSS 中，我将光标设为指针。再次，除 Safari 之外的所有浏览器都正确添加了 CSS 规则。具有类 .deleteRow 的标签是一个`<i>`标签..

编辑：

```
html = '<tr class="rowDomain" id="row_'+domain+'_'+ext+'">';
html += '<td class="get"><input type="hidden" name="hdnDomains[]" value="'+domain+'_'+ext+'_'+a+'_'+term+'_'+data.price+'" />'+domain+'.'+ext+' '+stars+'</td>';
html += '<td class="'+a+'">'+b+'</td>';
html += '<td>'+term+' jaar</td><td>&euro; '+(parseFloat(data.price).toFixed(2)).toString().replace('.',',')+'</td>';
html += '<td><i class="deleteRow icon-trash" id="btn_'+domain+'_'+ext+'" title="Verwijder domein uit selectie."></i></td>';
html += '</tr>';
$('#tblDomains').append(html); 
```

`<table>`以上是每次用户单击按钮时添加到我的 HTML 。该图标位于最后一个`<td>`标签中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:58:16.017

我找到了解决方案。我猜这与我使用的标签类型有关。`<i>`如果我在标签的背景上添加颜色，它就可以工作。

所以在CSS中我做了：

```
.deleteRow {background-color:rgba(255,255,255,0.1);} 
```

现在光标是一个指针，点击处理程序完成了它的工作。

虽然不知道为什么...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:46:45.313

这样的事情将是正确的..

```
$('.deleteRow').on('click', function() { 
  $(this).parents('tr:first').remove();
}); 
```

# asp.net - 使用 XSLT 以特定方式重新排序 XML 元素

> ID：15759871
> 
> 赞同：-1
> 
> 时间：2013-04-02T08:53:09.723
> 
> 标签：asp.net, xml, xslt, xslt-1.0

我有两个 XSL 变量。1.产品ID

```
 <prdid>
    <id>8143794</id>
    <id>8143793</id>
    <id>8142229</id>
    <id>8143796</id>
  </prdid> 
```

2.产品xml

```
 <root>
  <product>
    <estocklevel>0</estocklevel>
    <id>8142229</id>
    <isp_brand extra="isp_brand"></isp_brand>
    <isp_produktserie extra="isp_produktserie"></isp_produktserie>
    <isp_model extra="isp_model"></isp_model>
  </product>
  <product>
    <estocklevel>0</estocklevel>
    <id>8143793</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Bred</isp_model>
  </product> 
  <product>
    <estocklevel>0</estocklevel>
    <id>8143794</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Smal</isp_model>
  </product>
  <product>
    <id>8143796</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Smal</isp_model>
  </product>
</root> 
```

现在我想要的是，在一个 for 循环中，我想按照 prdid XML 的顺序获取 productxml 中的每个产品

```
 <xsl:for-each select="prdid/id">
        <!--i want to get a product node from productxml here which got same id of that in this for loop -->
      <xsl:value-of select="productxml/id"/>
    </xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T03:17:06.880

**这种转换简短而有效**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:variable name="vProds" select=
   "document('file:///c:/temp/delete/products.xml')"/>

 <xsl:key name="kProdById" match="product" use="id"/>

 <xsl:template match="/*">
  <root><xsl:apply-templates/></root>
 </xsl:template>

 <xsl:template match="id">
  <xsl:variable name="vId" select="."/>
  <xsl:for-each select="$vProds">
   <xsl:copy-of select="key('kProdById', $vId)"/>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当它应用于提供的“prdid”XML 文档时**：

```
<prdid>
    <id>8143794</id>
    <id>8143793</id>
    <id>8142229</id>
    <id>8143796</id>
</prdid> 
```

**第二个提供的文档包含在文件中`c:\temp\delete\products.xml`：**

```
<root>
    <product>
        <estocklevel>0</estocklevel>
        <id>8142229</id>
        <isp_brand extra="isp_brand"></isp_brand>
        <isp_produktserie extra="isp_produktserie"></isp_produktserie>
        <isp_model extra="isp_model"></isp_model>
    </product>
    <product>
        <estocklevel>0</estocklevel>
        <id>8143793</id>
        <isp_brand extra="isp_brand">Leitz</isp_brand>
        <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
        <isp_model extra="isp_model">Bred</isp_model>
    </product>
    <product>
        <estocklevel>0</estocklevel>
        <id>8143794</id>
        <isp_brand extra="isp_brand">Leitz</isp_brand>
        <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
        <isp_model extra="isp_model">Smal</isp_model>
    </product>
    <product>
        <id>8143796</id>
        <isp_brand extra="isp_brand">Leitz</isp_brand>
        <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
        <isp_model extra="isp_model">Smal</isp_model>
    </product>
</root> 
```

**产生了想要的正确结果：**

```
<root>
   <product>
      <estocklevel>0</estocklevel>
      <id>8143794</id>
      <isp_brand extra="isp_brand">Leitz</isp_brand>
      <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
      <isp_model extra="isp_model">Smal</isp_model>
   </product>
   <product>
      <estocklevel>0</estocklevel>
      <id>8143793</id>
      <isp_brand extra="isp_brand">Leitz</isp_brand>
      <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
      <isp_model extra="isp_model">Bred</isp_model>
   </product>
   <product>
      <estocklevel>0</estocklevel>
      <id>8142229</id>
      <isp_brand extra="isp_brand"/>
      <isp_produktserie extra="isp_produktserie"/>
      <isp_model extra="isp_model"/>
   </product>
   <product>
      <id>8143796</id>
      <isp_brand extra="isp_brand">Leitz</isp_brand>
      <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
      <isp_model extra="isp_model">Smal</isp_model>
   </product>
</root> 
```

**说明**：

正确使用**[钥匙](http://www.w3.org/TR/xslt#key)**。

**这演示了如何在 XSLT 1.0 中使用来自一个 XML 文档的值作为另一个 XML 文档中节点的键**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:57:31.087

我假设“Productxml”是您的输入 XML 文件。

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:my="my:my">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <!--
  The order in which you want to process the <product> elements. You could also
  have this in a separate file if you want, and change the document() function
  below to point to that file instead.
  -->
  <my:prdid>
    <id>8143794</id>
    <id>8143793</id>
    <id>8142229</id>
    <id>8143796</id>
  </my:prdid>

  <!-- Identity template -->
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="root">
    <!-- Save reference to the nodeset that contains all <product> children -->
    <xsl:variable name="products" select="product"/>

    <xsl:copy>
      <!--
      For each <id> element in the <my:prdid> element (document('') refers to
      the current stylesheet)...
      -->
      <xsl:for-each select="document('')/*/my:prdid/id">
        <!--
        ...apply the <product> element that has the same id value as this <id>
        element
        -->
        <xsl:apply-templates select="$products[id = current()]"/>
      </xsl:for-each>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

### 输入

```
<root>
  <product>
    <estocklevel>0</estocklevel>
    <id>8142229</id>
    <isp_brand extra="isp_brand"></isp_brand>
    <isp_produktserie extra="isp_produktserie"></isp_produktserie>
    <isp_model extra="isp_model"></isp_model>
  </product>
  <product>
    <estocklevel>0</estocklevel>
    <id>8143793</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Bred</isp_model>
  </product> 
  <product>
    <estocklevel>0</estocklevel>
    <id>8143794</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Smal</isp_model>
  </product>
  <product>
    <id>8143796</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Smal</isp_model>
  </product>
</root> 
```

### 输出

```
<root>
  <product>
    <estocklevel>0</estocklevel>
    <id>8143794</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Smal</isp_model>
  </product>
  <product>
    <estocklevel>0</estocklevel>
    <id>8143793</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Bred</isp_model>
  </product>
  <product>
    <estocklevel>0</estocklevel>
    <id>8142229</id>
    <isp_brand extra="isp_brand"/>
    <isp_produktserie extra="isp_produktserie"/>
    <isp_model extra="isp_model"/>
  </product>
  <product>
    <id>8143796</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Smal</isp_model>
  </product>
</root> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:57:52.463

xsl:sort 应该是你需要的。看看这里：

[http://www.w3schools.com/xsl/el_sort.asp#gsc.tab=0](http://www.w3schools.com/xsl/el_sort.asp#gsc.tab=0)

编辑1：这应该工作

```
<xsl:for-each select="//prdid/id">
  <xsl:call-template name="sortedId">
    <xsl:with-param name="id" select="."></xsl:with-param>
  </xsl:call-template>
</xsl:for-each>    

<xsl:template name="sortedId" >
    <xsl:param name="id"></xsl:param>
    <xsl:apply-templates select="//product[id=$id]" />
</xsl:template>

<xsl:template match="product">
    <xsl:copy-of select="." />
</xsl:template> 
```

# matlab - 如何要求用户从运行时给定列表中选择对象？

> ID：15759872
> 
> 赞同：0
> 
> 时间：2013-04-02T08:53:12.513
> 
> 标签：matlab, dynamic, user-input

我正在编写一个脚本，需要用户选择要在其上工作的子目录。

在这里指出我被卡住的地方：

```
curr_dir = dir(pwd);

% Select only subdirectories
dirs = {curr_dir([curr_dir(:).isdir]).name}';
dirs(ismember(dirs,{'.','..'})) = [];

% Ask the user which one to use
dir_selected = 0;
while dir_selected == 0;
    selection = ; % <------------- INSERT HERE MISSING CODE
    if length(selection) == 1
        dir_selected = 1;
    elseif length(selection) > 1
        fprintf('\nPlease enter only one value\n');
    elseif selection > length(dirs)
        fprintf('\nPlease enter a valid value\n');
    else
        fprintf('\nPlease enter a value\n');
    end
end

path_files = dirs(selection); 
```

我需要向用户列出当前的子目录（连同它们的索引），并要求用户输入他想要工作的文件夹的索引。

我已经看到了`input()`和的示例`prompt()`，但大多数都假设消息是静态的。是否可以动态生成消息/提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:08:11.803

好的，对不起大家，我找到了解决问题的方法。

我使用以下代码：

```
fprintf('\nPlease select the desired subdirectory:\n');
for i = 1:length(dirs)
    fprintf('%i: %s\n',i,dirs{i});
end
selection = input('Which is the desired subdirectory?: '); 
```

# java - 用于存储大型 char/byte/int 数组的节省内存的最佳库？

> ID：15759874
> 
> 赞同：3
> 
> 时间：2013-04-02T08:53:18.793
> 
> 标签：java, arrays, collections, primitive

在重新发明可能已经多次发明的任何轮子之前，我正在寻找一个库，它可以让我处理潜在的巨大 char 数组（而不是 Char），同时保持堆开销和不必要的堆分配很小。

这意味着数组实现应该允许

1.  以 collection.get(long index) 访问元素
2.  将元素存储为 collection.put(long index, char what) 并在必要时自动分配调整数组大小
3.  通过我想选择的一些大小的恒定大小块重新调整数组的大小，例如 2^14 个元素。

第 3 点对我的目的很重要：许多实现只是通过分配两倍于当前大小的东西来调整集合的大小，复制并丢弃旧的。如果集合变得非常大并且下一次调整大小操作将需要全部或更多内容，则这很糟糕，尽管堆上仍然可能有足够的空间。

此外，索引类型应该很长，以便可以在数组中存储超过 2^(32-1) 个元素。

因此，如果我要实现这一点，我可能会使用可选择块大小的动态数组。第一级数组将以任何旧方式调整大小（它不会包含太多元素），而第二级数组将始终具有 2^N 的某个固定块大小。

有没有人知道一个库可以做到这一点或类似的内存效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:56:46.867

我想我找到了适合我需要的库：http://fastutil.di.unimi.it/ 上的 Fastutil 库[有](http://fastutil.di.unimi.it/)char、int 等的“BigList”实现，这似乎完全符合我想要的方式我想要它，还有更多。Javadoc： http: [//fastutil.di.unimi.it/docs/](http://fastutil.di.unimi.it/docs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:06:44.337

如果您需要服务，请尝试使用[Voldemort](http://www.project-voldemort.com/voldemort/)（它是 LinkedIn 项目）的用法类似于从地图中检索（获取和放置）。

您可以配置所需的内存。这会将数据存储在文件系统中（内部使用 bdb）。对于我的测试，它的性能结果与 HashMap 一样好

事实上，任何键值存储都可以使用。我相信[Redis](http://redis.io/)也是一个不错的选择。但是我没用过所以不能评论

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T10:17:45.423

如果你想拥有可嵌入的方法，那么我会推荐[Trove](https://bitbucket.org/robeden/trove/)框架。它快速、轻量级，并且面向原始存储和大量数据。

# javascript - 清理 JSON 值，但不清理结构

> ID：15759876
> 
> 赞同：0
> 
> 时间：2013-04-02T08:53:36.833
> 
> 标签：javascript, json

我是 JavaScript 新手，我想要一个这样的 JSON 结构：

## JSON

```
{
    "ObjektId":["1","11","111","1111"],
    "Selected": [
        {
            "SelectedObjektId":"555",
            "SelectedObjektValues":["Test1","Test2","Test3"]
        },
        {
            "SelectedObjektId":"112555",
            "SelectedObjektvalues":["11Test1","22Test2","22Test3"]
        }//,and many others 
    ]
} 
```

## JS

```
var json = new Object();
json.ObjektId = new Array("1", "11", "111", "1111");
json.Selected = new Array();
//console.log(JSON.stringify(json));
var util = new Object();
util.SelectedObjektId = "555";
util.SelectedObjektValues = new Array("Test1", "Test2", "Test3");

json.Selected.push(util);
//console.log(JSON.stringify(json));
util.SelectedObjektId = "112555";
util.SelectedObjektValues = new Array("11Test1", "22Test2", "22Test3");

json.Selected.push(util); 
```

我已经建立了这个，但现在我的问题。我通过一个函数动态生成它，JSON 模型是一个全局变量。现在，当我调用该函数两次等时，JSON 中包含旧值和新值。但我只想要新的 JSON 值。我尝试了几件事，但没有任何效果。

```
function getJSONObjektList() {

    //HauptJSONknoten
    var jsonObjekt = {};
    jsonObjekt.ObjektId = [];
    jsonObjekt.Selected = [];
    //HilfsJSONknoten
    var utilJSONObjekt = {};
    utilJSONObjekt.SelectedObjektId;
    utilJSONObjekt.SelectedObjektWerte = [];

    doc = XYZ.GetCurrentDocument();
    doc.GetAllObjects(function (objects) {
        for (var i = 0; i < objects.length; i++) {
            var obj = objects[i];
            var id = obj.id;
            var caption = obj.caption;
            var type = obj.type;
            var my = obj.my;
            console.log("[obj:" + obj + " id:" + id + " caption:" + caption + " type:" + type + " my: " + my + "]");

            //liste alle verfuegbaren  Objekte auf 
            jsonObjekt.ObjektId.push(id);

            if (type === "Statusbox") {
                doc.GetObject(id, function () {
                    var statusboxInhalt = this.Data.Rows;

                    for (var j = 0; j < statusboxInhalt.length; j++) {
                        var inhalt = statusboxInhalt[j];
                        console.log("Name: " + inhalt[0].text + " Wert: " + inhalt[2].text);

                        utilJSONObjekt.SelectedObjektId = inhalt[0].text;

                        var valAr = inhalt[2].text.split(",");
                        for (var k = 0; k < valAr.length; k++) {
                            utilJSONObjekt.SelectedObjektWerte.push($.trim(valAr[k]));
                        }
                        jsonObjekt.Selected.push(utilJSONObjekt);
                    }
                });
            }
        }
    });
    $('#txtboxQv').append(JSON.stringify(jsonObjekt));
    return jsonObjekt;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:00:00.303

在 JavaScript 中，对象是通过引用传递的。这意味着您的 util 对象仍然引用您推送到 json 对象中的那个。

基本上，您需要创建一个新对象。

这是您的代码的更新版本，写得更习惯了：

```
var json = {};
json.ObjektId = ["1", "11", "111", "1111"];
json.Selected = [];
//console.log(JSON.stringify(json));

var util = {};
util.SelectedObjektId = "555";
util.SelectedObjektValues = ["Test1", "Test2", "Test3"];

json.Selected.push(util);
//console.log(JSON.stringify(json));

util = {}; // this is the key, you need to create a new Object
util.SelectedObjektId = "112555";
util.SelectedObjektValues = ["11Test1", "22Test2", "22Test3"];

json.Selected.push(util); 
```

我所做的语法更改指南：

*   [a, b, ...] - new Array(a, b, ...) 的语法糖；
*   {} - new Object() 的语法糖；

这将产生以下 JSON：

```
{
  "ObjektId": [
    "1",
    "11",
    "111",
    "1111"
  ],
  "Selected": [
    {
      "SelectedObjektId": "555",
      "SelectedObjektValues": [
        "Test1",
        "Test2",
        "Test3"
      ]
    },
    {
      "SelectedObjektId": "112555",
      "SelectedObjektValues": [
        "11Test1",
        "22Test2",
        "22Test3"
      ]
    }
  ]
} 
```

**更新：**

这是我对您期望的最佳猜测：

```
function getJSONObjektList() {
    //HauptJSONknoten
    var jsonObjekt = {};
    jsonObjekt.ObjektId = [];
    jsonObjekt.Selected = [];
    //HilfsJSONknoten

    doc = XYZ.GetCurrentDocument();
    doc.GetAllObjects(function (objects) {
        for (var i = 0; i < objects.length; i++) {
            var obj = objects[i];
            var id = obj.id;
            var caption = obj.caption;
            var type = obj.type;
            var my = obj.my;
            console.log("[obj:" + obj + " id:" + id + " caption:" + caption + " type:" + type + " my: " + my + "]");

            //liste alle verfuegbaren  Objekte auf 
            jsonObjekt.ObjektId.push(id);

            if (type === "Statusbox") {
                doc.GetObject(id, function () {
                    var statusboxInhalt = this.Data.Rows;
                    var utilJSONObjekt;

                    for (var j = 0; j < statusboxInhalt.length; j++) {
                        // make sure to re-initialize so we don't update the same reference
                        utilJSONObjekt = {};
                        utilJSONObjekt.SelectedObjektId;
                        utilJSONObjekt.SelectedObjektWerte = [];

                        var inhalt = statusboxInhalt[j];
                        console.log("Name: " + inhalt[0].text + " Wert: " + inhalt[2].text);

                        utilJSONObjekt.SelectedObjektId = inhalt[0].text;

                        var valAr = inhalt[2].text.split(",");
                        for (var k = 0; k < valAr.length; k++) {
                            utilJSONObjekt.SelectedObjektWerte.push($.trim(valAr[k]));
                        }
                        jsonObjekt.Selected.push(utilJSONObjekt);
                    }
                });
            }
        }
    });
    $('#txtboxQv').append(JSON.stringify(jsonObjekt));
    return jsonObjekt;
} 
```

**编辑：**

我刚刚意识到你的问题可能是什么。从您的评论来看，这似乎`doc.GetAllObjects`是一个异步调用。这意味着它可能会在`jsonObjekt`返回后调用该函数。

`jsonObjekt`如果在传递给返回的函数之前不使用，这不是问题`doc.GetAllObjects`，但情况可能并非如此。

相反，您应该做的是`getJSONObjektList`将函数作为参数，并`jsonObjekt`在完成填充后用您的函数调用它：

```
function getJSONObjektList(cb) {
    var jsonObjekt = {};

    ...

    doc = XYZ.GetCurrentDocument();
    doc.GetAllObjects(function (objects) {
        // this is likely getting called after the outer function exits

        // do your computation here
        for (...) {
            ...
        }

        $('#txtboxQv').append(JSON.stringify(jsonObjekt));
        cb(jsonObjekt);
    });

    // don't rely on jsonObjekt being populated here; GetAllObjects is probably async
} 
```

您内部还有另一个可能的异步调用（GetObject）。我不知道您的其余代码，因此我无法就如何处理何时考虑填充 jsonObjekt 提出建议，但希望这可以为您提供足够的方向来解决问题。你很可能需要重新架构一些东西。

# javascript - jQuery：查找重复的 ID 并删除除第一个之外的所有 ID

> ID：15759882
> 
> 赞同：16
> 
> 时间：2013-04-02T08:53:43.553
> 
> 标签：javascript, jquery, each

```
 $('[id]').each(function () {

        var ids = $('[id="' + this.id + '"]');

        // remove duplicate IDs
        if (ids.length > 1 && ids[0] == this) $('#' + this.id).remove();

    }); 
```

以上将删除第一个重复的 ID，但我想删除最后一个。我试过`$('#'+ this.id + ':last')`但无济于事。

[小提琴](http://jsfiddle.net/z4VYw/1/)

在小提琴中，当附加操作发生时，应保留值为“sample”的输入。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-02T09:04:18.153

使用 jquery 过滤器`:gt(0)`排除第一个元素。

```
$('[id]').each(function () {
    $('[id="' + this.id + '"]:gt(0)').remove();
}); 
```

或者选择所有可用元素，然后使用 排除第一个元素`.slice(1)`。

```
$('[id]').each(function (i) {
    $('[id="' + this.id + '"]').slice(1).remove();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T09:03:47.420

尝试：

```
 $('[id="' + this.id + '"]:not(#" + this.id + ":first)').remove(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T09:14:10.087

你可以试试

```
$("#ID").nextAll().remove(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-18T10:39:47.517

```
$('[id]').each(function() {
   var $ids = $('[id=' + this.id + ']');
   if ($ids.length > 1) {
     if(this.id === your_id)//which is duplicating
         $ids.not(':first').remove();
     }
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-02T09:13:37.983

试试这个

```
var duplicated = {};

$('[id]').each(function () {   

    var ids = $('[id="' + this.id + '"]');

    if ( ids.length <= 1 ) return  ;

    if ( !duplicated[ this.id ] ){
         duplicated[ this.id ] = [];   
    }       

    duplicated[ this.id ].push( this );

});

// remove duplicate last ID, for elems > 1 
for ( var i in duplicated){

    if ( duplicated.hasOwnProperty(i) ){  

             $( duplicated[i].pop() ).remove();            
    }
} 
```

和 jsfiddle 是[http://jsfiddle.net/z4VYw/5/](http://jsfiddle.net/z4VYw/5/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-02T09:27:09.720

这段代码比其他一些代码要长，但双嵌套循环应该使其操作显而易见。

这种方法的优点是它只需要扫描 DOM 以生成具有`id`属性的元素列表*一次*，然后使用相同的列表来查找（并删除）重复项。

已经删除的元素将`parentNode === null`在遍历数组时被跳过。

```
var $elems = $('[id]');
var n = $elems.length;

for (var i = 0; i < n; ++i) {
    var el = $elems[i];
    if (el.parentNode) {  // ignore elements that aren't in the DOM any more
        var id = el.id;
        for (var j = i + 1; j < n; ++j) {
            var cmp = $elems[j];
            if (cmp.parentNode && (cmp.id === id)) {
                $(cmp).remove();  // use jQuery to ensure data/events are unbound
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T09:06:50.243

我会`not()`用来删除当前元素`ids`并删除其余元素：

（[小提琴](http://jsfiddle.net/ErMMR/1/)）

```
$('body').on("click", ".placeholder", function() {

    data = '<section id="e1"><input name="e1name" /></section><section id="two"><input name="two" value="two section" /></section>';

    $('form').append(data);

        // ideally I'd like to run this function after append but after googling I find that's not possible.
        // for each ID ...
        $('[id]').each(function () {

            var ids = $('[id="' + this.id + '"]');

            if (ids.length>1) {                    
                ids.not(this).remove();            
            }

            return;

        });

}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-22T07:05:21.490

尝试使用以下功能对我来说很好：

```
 $('#favourities-ajax ul li').each(function(i) {
      $('[id="' + this.id + '"]').slice(1).remove();
      }); 
```

# php - POST 未填写

> ID：15759893
> 
> 赞同：-1
> 
> 时间：2013-04-02T08:54:26.250
> 
> 标签：php, post

**问题**

每当我单击提交按钮时，我正在填写一个 POST，它应该设置 POST。但不幸的是，由于某种随机原因，它没有填满 POST。

**编码**

```
 echo '
        <form action="settings.php" method="POST">
        <textarea name="area" class="input" id="textarea">'.$settings_welcome_page['paragraph'].'</textarea><br />
        <input type="submit" value="Edit" class="button">
        </form>';

        if (isset($_POST['area'])) {
            $update = $CONNECT_TO_DATABASE->prepare("UPDATE welcome_text SET paragraph = :message");
            $update->bindValue(':message', $_POST['paragraph']);
            $update->execute();
            header ('Location: settings.php?status=sucess');    
        } else {
            echo' post not working ';
        } 
```

它正在返回回声“发布不工作”。这意味着未设置 POST '区域'。

问题是什么？我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:57:52.310

```
$_POST['paragraph'] 
```

应该

```
$_POST['area'] 
```

在将值绑定到您的条件时，您可以广告

```
if(isset($_POST['area']) || (isset($_GET['status']) == 'success')){
    // code here..
} 
else{
   // code here..
} 
```

让你看看你是否已经提交了表格并且没有落入其他人。

一般来说..你的代码应该是这样的

```
if (isset($_POST['area']) || (isset($_GET['status']) == 'succes')) {
            $update = $CONNECT_TO_DATABASE->prepare("UPDATE welcome_text SET paragraph = :message");
            $update->bindValue(':message', $_POST['area']);
            $update->execute();
            header ('Location: settings.php?status=sucess');    
        } else {
            echo' post not working ';
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:03:28.200

这就是发生的事情：

1.  您填写表格并点击“编辑”，
2.  表单被 POST 并将数据放入数据库，
3.  您重新定位到同一页面，但**没有**POST（通过调用该`header`函数）。
4.  您的页面显示，没有 POST，呈现“发布不工作”。

要修复，请删除`header()`调用，它不会重新加载。

那，并参考正确的索引：`$_POST['area']`而不是`$_POST['paragraph']`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:26:24.030

在您的代码中，您的服务器将通过重定向标头回答 POST：

```
 if (isset($_POST['area'])) {
        header ('Location: settings.php?status=sucess');    
    } else {
        echo' post not working ';
    } 
```

当浏览器接收到这个标头时，a`GET settings.php?status=sucess`被发送到服务器。这就是您收到`post not working`消息的原因。

如果您尝试此代码，您将看到您的 POST 运行良好：

```
<html><body><?php 
 echo '
     <form action="settings.php" method="POST">
       <textarea name="area" class="input" id="textarea">bla bla ...</textarea><br />
       <input type="submit" value="Edit" class="button">
     </form>';

    if (isset($_POST['area'])) {
        echo' this was a POST of area='.$_POST['area'];
    } else {
        echo' this was a GET ';
    }
?></body></html> 
```

# cordova - 电话应用程序未在 iphone 设备中访问 web 服务

> ID：15759898
> 
> 赞同：2
> 
> 时间：2013-04-02T08:54:38.470
> 
> 标签：cordova

我已经创建了电话应用程序，此应用程序与 web 服务一起使用，它在模拟器中正常工作，但在设备中它不工作。设备无法访问网络服务。

我已经在 config.xml 中添加了 url ...我正在附加 config.xml

```
<content src="index.html" />

<plugins>
    <plugin name="Device" value="CDVDevice" />
    <plugin name="Logger" value="CDVLogger" />
    <plugin name="Compass" value="CDVLocation" />
    <plugin name="Accelerometer" value="CDVAccelerometer" />
    <plugin name="Camera" value="CDVCamera" />
    <plugin name="NetworkStatus" value="CDVConnection" />
    <plugin name="Contacts" value="CDVContacts" />
    <plugin name="Debug Console" value="CDVDebugConsole" />
    <plugin name="Echo" value="CDVEcho" />
    <plugin name="File" value="CDVFile" />
    <plugin name="FileTransfer" value="CDVFileTransfer" />
    <plugin name="Geolocation" value="CDVLocation" />
    <plugin name="Notification" value="CDVNotification" />
    <plugin name="Media" value="CDVSound" />
    <plugin name="Capture" value="CDVCapture" />
    <plugin name="SplashScreen" value="CDVSplashScreen" />
    <plugin name="Battery" value="CDVBattery" />
    <plugin name="Globalization" value="CDVGlobalization" />
    <plugin name="InAppBrowser" value="CDVInAppBrowser"  />

</plugins>

<key>ExternalHosts</key>
<array>
    <string>192.168.3.253:8086*</string>
</array>

<access origin="*.192.168.3.253:8086.*" subdomain = "true" /> 
```

"

但它不起作用。请帮我...

谢谢 keerthi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:00:53.417

**您的外部主机是否可公开访问？**

如果不是，您的应用程序将无法访问它。

这是一个常见的问题，因为任何移动开发人员，无论是 android/iphone 开发人员，测试都可以在模拟器/模拟器上工作，但在手机上部署时就无法工作。

# emacs - 通过 Emacs 在代码注释中插入图片

> ID：15759901
> 
> 赞同：7
> 
> 时间：2013-04-02T08:54:46.033
> 
> 标签：emacs, comments, editor

一个想法刚刚出现在我的脑海中。有什么方法可以在代码注释中插入图片来帮助解释我们的代码吗？毕竟，一张图抵得上一千个字。

由于我使用 Emacs，到目前为止是否有 Emacs 的实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T12:06:31.850

看一下`iimage-mode`：这是在文本缓冲区中显示图像的标准解决方案。

例如，给定以下文件：

```
/* an image is worth a thousand words:
 * <path/to/image.png>
 */
int main (int argc, char **argv) {
  return 0;
} 
```

然后运行`M-x``turn-on-iimage-mode`应该显示`image.png`在其路径的位置。

* * *

但是，我同意@user4815162342 的评论，即您需要将图像与源文件一起分发，并记住在需要时更新它们（有时很难更新代码注释，因为它们只是文本；IMO 更难更新图像注释）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T09:28:01.087

您是在谈论 ASCII 图形还是实际图像？

对于 ASCII 艺术，`M-x artist-mode`它允许您绘制简单（或不太简单）的图像。此外，如果您需要绘制基于 ASCII 的 UML 图，[CEDET](http://cedet.sourceforge.net/uml.shtml)可以为您完成。

对于插入实际图像，有很多函数，如[create-image](http://www.gnu.org/software/emacs/manual/html_node/elisp/Defining-Images.html#Defining-Images)和[insert-image](http://www.gnu.org/software/emacs/manual/html_node/elisp/Showing-Images.html)，因此编写一个将图像插入评论的次要模式应该很简单。不过，我不知道有任何现成的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:35:44.223

如果您还想粘贴在线图像，[cacoo.el](https://github.com/kiwanami/emacs-cacoo/blob/master/cacoo.el#L22)将非常有用。它缓存在线图像并明智地调整其大小。因此，从第二次开始显示图像要快得多。它也适用于本地图像。

它最初是为名为[cacco](https://cacoo.com/)的 Web 服务开发的，但它适用于任何在线图像。

# jquery - 使用 jQuery 解析 JSON 时的意外结果

> ID：15759908
> 
> 赞同：0
> 
> 时间：2013-04-02T08:55:07.777
> 
> 标签：jquery, json

小提琴：http: [//jsfiddle.net/wy4wd/19/](http://jsfiddle.net/wy4wd/19/)

我正在解析一个 json 对象，但它落入了 else 中，导致 html 出现`Error`在它应该出现的时候`ID not found`，我不知道为什么。

如果`success`is ，它工作正常`1`。

JSON 由 post 请求返回，但出于提问目的，我在本地声明它。

```
$(document).ready(function() {
    var data = '{"success": "0","patient_cid": "0"}';
    var response = jQuery.parseJSON(data);

    if (response.success == 0) {
        if (response.patient_cid == 0) {            
            $('#resultpanel').html('<p>ID not found</p>');
        }
        if (response.patient_ambassador == 0) {                 
            $('#resultpanel').html('<p>ID found but not an ambassador</p>');
        }               
        if (response.soap_error == '1') {                   
            $('#resultpanel').html('<p>SOAP error</p>').fadeIn('slow');
        }                   
    }
    if (response.success == 1){
        $('#resultpanel').html('<p>success</p>').fadeIn('slow');
    }   
    else {              
        $('#resultpanel').html('<p>Error</p>').fadeIn('slow');
    }   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:57:39.390

它应该是

```
//... previous code here
else if (response.success == 1){
//... the rest of the code here 
```

如果我理解正确的话。

否则将执行第一个错误解析，但替换为最后一个 else 语句中的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:02:20.460

它与 JSON 的解析无关，是`if`语句中的逻辑导致了这种情况。

面板实际上设置为“未找到 ID”一小会儿，但随后您将其替换为“错误”。

把`else`你第一个处理的地方`success == 0`，并`else if`用来做一个条件链：

```
if (response.success == 0) {
    if (response.patient_cid == 0) {            
        $('#resultpanel').html('<p>ID not found</p>');
    }
    else if (response.patient_ambassador == 0) {                 
        $('#resultpanel').html('<p>ID found but not an ambassador</p>');
    }               
    else if (response.soap_error == '1') {                   
        $('#resultpanel').html('<p>SOAP error</p>').fadeIn('slow');
    }                   
    else {              
        $('#resultpanel').html('<p>Error</p>').fadeIn('slow');
    }
}
if (response.success == 1){
    $('#resultpanel').html('<p>success</p>').fadeIn('slow');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T09:06:11.990

您已将值设置为您想要的值，但随后被此行重置为 Error `$('#resultpanel').html('<p>Error</p>').fadeIn('slow');`

您应该了解 false-y 和 truth-y 在 javascript 中的工作原理：我会这样做：

```
$(document).ready(function() {
var data = '{"success": "0","patient_cid": "0"}',
    response = jQuery.parseJSON(data),
    message;

    if (response.success == '1') {
        message = 'success';
    }
    else {
        if (response.patient_cid == '0') {            
            message = 'ID not found';
        }
        else if (response.patient_ambassador == '0') {
            message = 'ID found but not an ambassador';                 
        }               
        else if (response.soap_error == '1') {
            message = 'SOAP error';                              
        }
        else {              
            message = 'Error';                              
        }   
    }   
    $('#resultpanel').html('<p>' + message + '</p>').fadeIn('slow');
}); 
```

# asp.net - 使用 css2.1 在 asp 中继器内进行垂直滚动

> ID：15759909
> 
> 赞同：0
> 
> 时间：2013-04-02T08:55:21.157
> 
> 标签：asp.net, scroll, repeater, css

在我的 aspx 页面中，我正在调用中继器，问题是我想要一个固定大小的页面，但我想将滚动保持在中继器内，那么我该怎么做呢？

我的 asp div 不会接受 overflow-y 选项，说它在 css2.1 中不存在，并且溢出选项给了我垂直和水平滚动！

```
<asp:Repeater ID="TheRepeater" runat="server" OnItemDataBound="TheRepeater_OnItemDataBound" EnableViewState="true" EnableTheming="true">
        <HeaderTemplate>
            <div style="overflow-y: scroll;  margin-top:5px; margin-left:5px; min-height:15px; ">
                </HeaderTemplate>
                <ItemTemplate>
                    <div >
                        <%#DataBinder.Eval(Container.DataItem, "Object")%> - 

                        <%#DataBinder.Eval(Container.DataItem, "AssignedTo")%> 
                    </div>
                </ItemTemplate>
                <FooterTemplate>
            </div>  
        </FooterTemplate>
    </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T09:05:28.777

用这个：

```
<asp:Panel ID="Panel1" runat="server" ScrollBars="Vertical">
<asp:Repeater ID="TheRepeater" runat="server" OnItemDataBound="TheRepeater_OnItemDataBound" EnableViewState="true" EnableTheming="true">
        <HeaderTemplate>            
                </HeaderTemplate>
                <ItemTemplate>
                    <div>
                        <%#DataBinder.Eval(Container.DataItem, "Object")%> - 

                        <%#DataBinder.Eval(Container.DataItem, "AssignedTo")%> 
                   </div>                      
                </ItemTemplate>
                <FooterTemplate>               
        </FooterTemplate>
    </asp:Repeater>
</asp:Panel> 
```

希望这有帮助。

# jquery - jQuery addClass 没有按预期工作

> ID：15759910
> 
> 赞同：0
> 
> 时间：2013-04-02T08:55:21.983
> 
> 标签：jquery

我有两个图像，单击时我正在使用 addClass 添加一个名为“活动”的类并将图像更改为活动状态颜色：-

```
 $("#img-onlinebooking-guest").click(function() { 

         $(this).addClass('active');
         $('#img-onlinebooking-acc').removeClass('active');
         $(this).attr("src", "images/bookguest-a.png");

    });

    $("#img-onlinebooking-acc").click(function() { 

         $(this).addClass('active');
         $('#img-onlinebooking-cash').removeClass('active');
         $(this).attr("src", "images/bookaccount-a.png");

    }); 
```

在悬停事件中，我将图像更改为“悬停”图像并检查该类是否“活动”。

```
 $('#img-onlinebooking-guest:not(.active)').hover(

        function () {
            $(this).attr("src", "images/bookguest-h.png");
        },

        function () {
            $(this).attr("src", "images/bookguest.png");

    });

    $('#img-onlinebooking-acc:not(.active)').hover(

        function () {
            $(this).attr("src", "images/bookaccount-h.png");
        },

        function () {
            $(this).attr("src", "images/bookaccount.png");

    }); 
```

基本上，我想要的工作方式是，当您单击图像时，它会变为活动图像，而在悬停时，它会变为悬停图像。同时，如果图像处于活动状态，我不希望悬停状态做任何事情。

[正如您在此处](http://www.marandy.com/one2onev2)看到的那样，这几乎可以正常工作。

唯一的问题是，当我单击其他选项卡之一时，它会按预期将单击的项目更改为“活动”，但是在鼠标移出时，它会在应保持为活动颜色时将其恢复为默认颜色。

有什么想法可以解决这个问题吗？（希望我已经解释过了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:58:53.823

理想情况下，您应该在大多数情况下使用 CSS，因为它就是为此而构建的。结果更干净，没有处理悬停事件。

**HTML**

将图像更改为 div

```
<div id="main-online-user"> 
    <a href="javascript:void(0)" onclick="changesrc('main-online-frame','http://www.marandy.com/one2oneob/login-guest.php')">
        <div alt="One 2 One Guest" id="img-onlinebooking-guest" class="left"></div>
    </a>
    <a href="javascript:void(0)" onclick="changesrc('main-online-frame','http://www.marandy.com/one2oneob/login.php')">
        <div alt="One 2 One Account" id="img-onlinebooking-acc" class="left active"></div>
    </a>
    <a href="javascript:void(0)" onclick="changesrc('main-online-frame','http://www.marandy.com/one2oneob/login-guest.php')">
         <div alt="One 2 One Cash" id="img-onlinebooking-cash" class="left"></div>
    </a>
</div> 
```

**JS**

定位不是当前元素的所有元素并删除类，然后添加到当前元素。

```
$("#img-onlinebooking-guest").click(function () {
    $('#main-online-user a').not(this).removeClass('active');
    $(this).addClass('active');
});

$("#img-onlinebooking-acc").click(function () {
    $('#main-online-user a').not(this).removeClass('active');
    $(this).addClass('active');
});

$("#img-onlinebooking-cash").click(function () {
    $('#main-online-user a').not(this).removeClass('active');
    $(this).addClass('active');
}); 
```

**CSS**

活动和悬停样式相同，因此不存在意外删除它的问题。

```
#main-online-user img {
    width:102px;
    height:42px;
}
#img-onlinebooking-acc {
    background:url(images/bookaccount.png);
}
#img-onlinebooking-guest {
    background:url(images/bookguest.png);
}
#img-onlinebooking-cash {
    background:url(images/bookcash.png);
}

#img-onlinebooking-acc.active,
#img-onlinebooking-acc:hover {
    background:url(images/bookaccount-a.png);
}
#img-onlinebooking-guest.active,
#img-onlinebooking-guest:hover {
    background:url(images/bookguest-a.png);
}
#img-onlinebooking-cash.active,
#img-onlinebooking-cash:hover {
    background:url(images/bookcash-a.png);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:59:00.520

您的问题是在设置活动课程之前设置了事件，因此事件已经存在执行此操作

```
$('#img-onlinebooking-guest').hover(

        function () {
            if(!$(this).hasClass("active"){
                $(this).attr("src", "images/bookguest-h.png");
            }
        },

        function () {
            if(!$(this).hasClass("active"){
                $(this).attr("src", "images/bookguest.png");
            }

    });

    $('#img-onlinebooking-acc').hover(

        function () {
            if(!$(this).hasClass("active"){
                 $(this).attr("src", "images/bookaccount-h.png");
            }
        },

        function () {
            if(!$(this).hasClass("active"){
                 $(this).attr("src", "images/bookaccount.png");
            }

    }); 
```

简而言之，如果对象具有“活动”类，则不要执行任何操作，因此从技术上讲，您的问题不在于 Click 事件，即使在 UI 中看起来如此

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:59:59.137

像这样试试

```
 $("#img-onlinebooking-guest").click(function() { 

     $('#img-onlinebooking-acc').removeClass('active');
     $(this).addClass('active');         
     $(this).attr("src", "images/bookguest-a.png");

});

$("#img-onlinebooking-acc").click(function() { 

     $('#img-onlinebooking-cash').removeClass('active');
     $(this).addClass('active');
     $(this).attr("src", "images/bookaccount-a.png");

}); 
```

首先，您需要从其他人中删除活动课程，然后您可以分配给您的特定课程

# file - MVC - 下载 .Zip 并刷新页面

> ID：15759916
> 
> 赞同：0
> 
> 时间：2013-04-02T08:55:33.747
> 
> 标签：file, model-view-controller, redirect, refresh

所以我确实已经问过这个问题，但我没有得到合适的答案。所以我会再试一次。

我有一个在单击按钮时调用的方法。该按钮当前返回一个 .Zip 文件

```
return File(directory + @"\Issues.zip", "appicaltion/zip", "IssueReports.zip"); 
```

太好了，但我也想刷新页面。我一直在寻找，我似乎无法在任何地方找到答案。我不知道这样的事情怎么会这么难回答。

但我会在这里，耐心等待答案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T17:43:59.800

您可以使用 ajax 调用该操作，并在成功时使用 JS 刷新页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T19:33:21.880

同样，我只是希望在选择下载按钮后几秒钟刷新页面。我主要希望视图显示更新的下载计数和日期。

在尝试了几个好的选项后，我选择了以下简单的解决方案：

在视图中，我向调用以下脚本的下载按钮添加了一个 onclick 事件。其他一切都保持不变：

```
function ReloadAfterDelay()
{
    setTimeout(function () {
        window.location.reload(1);
    }, 5000);
} 
```

# iphone - Facebook FQL 查询 (#601) 解析器错误：位置 133 处出现意外的“_52096”

> ID：15759927
> 
> 赞同：0
> 
> 时间：2013-04-02T08:55:57.877
> 
> 标签：iphone, ios, objective-c, facebook-fql

```
- (void)getPhotosForAlbumId:(NSString *)albumId andUserIdentifier:(NSString *)userId
{
  NSString *ob = userId != nil?userId:@"me()";

    NSString *query = [NSString stringWithFormat:
                       @"SELECT pid,src,src_big,src_big_width,src_big_height, src_small_width, src_small_height,created FROM photo WHERE aid = %@ and owner = %@", albumId, ob];

    // Set up the query parameter
    NSDictionary *queryParam =
        [NSDictionary dictionaryWithObjectsAndKeys:query, @"q", nil];

    // Make the API request that uses FQL    
    [FBRequestConnection startWithGraphPath:@"/fql"
                                 parameters:queryParam
                                 HTTPMethod:@"GET"
                          completionHandler:^(FBRequestConnection *connection,
                                              id result,
                                              NSError *error) {
         if (error)
         {
             NSLog(@"Error: %@", [error localizedDescription]);
         }
         else
         {
             NSLog(@"Result: %@", result);
       NSArray *data = [result objectForKey:@"data"];                       
         }
     }];
} 
```

我有这个错误：

```
>error:Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0xd16a20 {com.facebook.sdk:ErrorSessionKey=<FBSession: 0xdf4f20, state: FBSessionStateOpen, loginHandler: 0xdf52a0, appID: 446665702078325, urlSchemeSuffix: , tokenCachingStrategy:<FBSessionTokenCachingStrategy: 0xf1c34c0>, expirationDate: 2013-05-31 11:29:38 +0000, refreshDate: 2013-04-01 11:29:38 +0000, attemptedRefreshDate: 0001-12-30 00:00:00 +0000, permissions:(
    "friends_photos",
    "user_photos"
)>, com.facebook.sdk:ParsedJSONResponseKey=<CFBasicHash 0xd74560 [0x3f721650]>{type = mutable dict, count = 2,
entries =>
    1 : <CFString 0x6b2968 [0x3f721650]>{contents = "code"} = <CFNumber 0xd74590 [0x3f721650]>{value = +400, type = kCFNumberSInt32Type}
    2 : <CFString 0x6aa5e8 [0x3f721650]>{contents = "body"} = <CFBasicHash 0xd2caa0 [0x3f721650]>{type = mutable dict, count = 1,
entries =>
    11 : <CFString 0xd51570 [0x3f721650]>{contents = "error"} = <CFBasicHash 0xd14880 [0x3f721650]>{type = mutable dict, count = 3,
entries =>
    2 : <CFString 0xd2cad0 [0x3f721650]>{contents = "type"} = <CFString 0xd121c0 [0x3f721650]>{contents = "OAuthException"}
    3 : <CFString 0xd15dc0 [0x3f721650]>{contents = "message"} = <CFString 0xd13120 [0x3f721650]>{contents = "(#601) Parser error: unexpected '_52096' at position 133."}
    6 : <CFString 0xd26720 [0x3f721650]>{contents = "code"} = 601
}}}, com.facebook.sdk:HTTPStatusCode=400} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:19:48.480

I found a solution for my problem and problem was from owner string what i bind. Album is a string identifier in fql and when I bind it from facebook response albumId was a NSDecimalNumber, to resolv problem just add the commons for aid and that is it. How need to look query now.

```
NSString *query = [NSString stringWithFormat:
@"SELECT pid,src,src_big,src_big_width,src_big_height, src_small_width, src_small_height,created FROM photo WHERE aid = \"%@\" and owner = %@", albumId, ob]; 
```

# php - 优化查询（MySQL）

> ID：15759929
> 
> 赞同：0
> 
> 时间：2013-04-02T08:55:59.500
> 
> 标签：php, mysql, query-optimization

## 我在 MYSQL 中有这个表：

```
产品（prodId，隐藏）
cat_binds(prodId,SptPath)
参数（paramId，prodId，langId，值）

```

## 询问

```
选择
        DISTINCT（参数值）
从
        产品，
        猫绑定，
        参数
在哪里
        products.prodId = params.prodId
        和
        params.paramId = '1'
        和
        params.langId = '1'
        和
        products.prodId = cat_binds.prodId
        和
        cat_binds.SptPath LIKE '-2147483644\_%'
        和
        products.Hide = '0'

```

如何优化这个查询？如何创建正确的索引以生成更少的结果所需的行。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:59:14.333

使用连接而不是获取不需要的行的笛卡尔。

```
SELECT DISTINCT
  (params.value)
FROM products
  LEFT JOIN cat_binds
    ON cat_binds.prodId = products.prodId
  LEFT JOIN params
    ON params.prodId = products.prodId
WHERE params.paramId = '1'
    AND params.langId = '1'
    AND cat_binds.SptPath LIKE '-2147483644\_%'
    AND products.Hide = '0' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:00:27.720

您的 SQL 看起来不错，如果您在所有 ID 字段上添加了主索引，我认为它会很好。MySQL 还将在内部进行优化以使顺序正确。我只关心包含 LIKE 表达式的 WHERE 条件。由于您在最后使用 '%' 条件，我认为将索引添加到此列会有所帮助，但如果您将 '%' 放在前面，则索引不会有太大影响

# java - “我们在运行时在 java 中改变任何对象的行为”是什么意思

> ID：15759932
> 
> 赞同：6
> 
> 时间：2013-04-02T08:56:06.240
> 
> 标签：java, runtime

我正在阅读 Orielly 设计模式，其中有一行是“ `We can change the Behavior of any object at runtime`”以及如何使用 getter 和 setter 在运行时更改对象的行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T08:59:38.510

行为是对象的工作方式。运行时间是应用程序的生命。所以该声明意味着在程序运行期间我们能够操纵对象可以做什么。

要进行模拟，请参见以下示例：

```
public class MyObjectTest {

  public static final void main(String[] args) {

   MyObject myObject = new MyObject(); 

   String theMessage = "No message yet.";

   theMessage = myObject.readSecretMessage();

   myObject.setIsSafe(true);

   theMessage = myObject.readSecretMessage();

  }
}

public class MyObject {

 private boolean isSafe = false;

 public boolean isSafe() {
    return this.isSafe;
 } 

 public boolean setIsSafe(boolean isSafe) {
   return this.isSafe = isSafe;
 }

 public String readSecretMessage() {

   if(isSafe()) {
    return "We are safe, so we can share the secret";
   }
   return "They is no secret message here.";
 }
} 
```

分析：

该程序将返回两个不同的消息，取决于字段的决定`isSafe`。这可以`new`在运行时的对象生命周期（对象生命周期以 operator 开始）期间进行修改。

这意味着，我们可以改变对象的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T09:06:30.337

让我在运行时用 2 条腿和 4 条腿交替地遛猫 :).. 基本上，这意味着您可以在运行时使用 getter 和 setter 来改变 Cat 的行为。

```
class Cat
{
    int legs = 2;

    public void walk() {
       System.out.println("Walking on " + legs + " legs");
    }

    public int getLegs()
    {
       return legs;
    }

    public void setLegs(int legs)
    {
       this.legs = legs;
    }
}

public void static main()
{
     Cat c = new Cat();
     c.setLegs(4);
     c.walk();

     c.setLegs(2);
     c.walk();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:04:51.603

从表面上看，它是没有意义的，或者至少是不正确的。您可以更改对象的属性，但不能更改其行为（当然，除非其行为取决于其属性的值）。您必须提供更多上下文才能理解这一点。

# function - Maxscript函数前向声明

> ID：15759933
> 
> 赞同：2
> 
> 时间：2013-04-02T08:56:08.693
> 
> 标签：function, forward-declaration, maxscript

我遇到了 Maxscripts 第一次运行（从冷启动）时无法工作的老问题，因为需要在使用函数之前声明它们。

以下脚本将在第一次运行时失败：

```
fOne()
function fOne = 
(
    fTwo()
)

function fTwo = 
(
    messageBox ("Hello world!")
) 
```

我们得到错误：“类型错误：调用需要函数或类，得到：未定义”。第二次，脚本将运行良好。

但是，向脚本添加前向声明后，我们不再收到错误消息。霍拉！但是不再调用该函数。嘘！

```
-- declare function names before calling them!
function fOne = ()
function fTwo = ()

fOne()
function fOne = 
(
    fTwo()
)

function fTwo = 
(
    messageBox ("Hello world!")
) 
```

那么，前向声明在 Maxscript 中是如何工作的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T11:54:25.357

你不能在声明它之前调用它......它不是动作脚本......它在你第二次运行代码时工作，因为它可以找到函数......

```
struct myFunc (
    function fOne =  (
        fTwo()
    ),
    function fTwo =  (
        messageBox ("Hello world!")
    )
)
myFunc.fOne() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T08:49:40.843

对我未来的自己：保持一切本地化。将截面函数声明为（局部）变量。注意定义函数的代码中的下落

```
( -- put everything in brackets

    (
    -- declare the second function first!
    local funcTwo

    -- declare function names before calling them!
    function funcOne = ()
    function funcTwo = ()

    funcOne()

    function funcOne = 
    (
    funcTwo()
    )

    function funcTwo = 
    (
    messageBox ("Hello world")
    )
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-16T17:30:29.007

"::" 是关键。遗憾的是，这不是一个众所周知或记录在案的功能。 [http://lotsofparticles.blogspot.ie/2009/09/lost-gems-in-maxscript-forcing-global.html](http://lotsofparticles.blogspot.ie/2009/09/lost-gems-in-maxscript-forcing-global.html)

```
::fOne() -- this will error if forward declaration is not working.

function fOne = 
(
    ::fTwo()
)

function fTwo = 
(
    messageBox ("Hello world!")
) 
```

# php - 记录集的 Netbeans 代码完成

> ID：15759934
> 
> 赞同：2
> 
> 时间：2013-04-02T08:56:20.597
> 
> 标签：php, sql, netbeans

在 PHP 中声明了一个查询并获取了一行

例如

```
$query=$db->query("select name,address from people where postcode like 'SO%'");
$row=$query->fetch_object(); 
```

是否可以设置代码完成，以便当我输入

```
$row-> 
```

我得到了查询中字段的下拉列表（即姓名和地址）。代码完成适用于许多其他事情，包括内部 SQL 语句，所以我认为这将是一个不错的功能（我希望有人会告诉我它已经存在了！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T23:44:30.933

`$row`是**设计时间**，而不是填充值。此值仅在**运行时**设置，带有数据库查询。

如果您绝对需要，只有一种解决方法`mydata->`。

该功能的优点是`setProps()`可以验证值。

```
[...]
define(val1, "name");
define(val2, "address");

$query = "SELECT ".val1.", ".val2." from people where postcode like 'SO%'";
$result = mysql_query($query);

if (!$result) {
    $message  = 'invalid query: ' . mysql_error() . "\n";
    $message .= 'query: ' . $query;
    die($message);
}

while($rows[]=mysql_fetch_array($result,MYSQL_ASSOC));

class MyArrayObject extends ArrayObject {
        public $name;
        public $address;

        public function setProps($name) {
            if (isset($name[val1])) {$this->name = $name[val1]; }
                               else {$this->name = 'n/a';}
            if (isset($name[val2])) {$this->address = $name[val2]; }
                               else {$this->address = 'n/a';}
        }
}

$mao = new MyArrayObject($rows,ArrayObject::ARRAY_AS_PROPS);
$iterator = $mao->getIterator();
while ($iterator->valid()) {
    $mao->setProps($iterator->current());
    echo  "<br>\n";
    echo $mao->name . "<br>\n" ;
    echo $mao->address ;
    $iterator->next();
}

mysql_close($link);
[...] 
```

**代码完成**

![在此处输入图像描述](https://i.stack.imgur.com/O6my0.jpg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T14:44:52.667

没有任何代码完成。

您只能使用 vdoc 自动完成现有类。

```
$query=$db->query("select name,address from people where postcode like 'SO%'");
$row=$query->fetch_object();
/* @var $row \Existing\Class */
$row-> 
```

# android - Android 将数据从 ListView 传递到 Popup 窗口

> ID：15759935
> 
> 赞同：1
> 
> 时间：2013-04-02T08:56:30.520
> 
> 标签：android, listview, popup

我一直在为我的问题寻找解决方案，但仍然无法弄清楚。我想达到什么目的？

1.  我有一个`Data`对象，它代表我正在使用的数据。只是一个带有几个`String`变量的简单类，它还实现了`Parcelable`.
2.  我使用外部 Web 服务填充`Data`对象并获得了`List<Data> dataList = new ArrayList<Data>();`结果。我将此列表发送给另一个`Activity`.
3.  我得到了一个可以查看结果的`DataAdapter`扩展程序，一切正常，我只是设置了我的适配器并在.`ArrayAdapter<Data>``ListView`

    数据 = getIntent().getParcelableArrayListExtra("data");

    dataAdapter = new DataAdapter(this, R.layout.activity_results_list,data);

    list.setAdapter(dataAdapter);

4.  现在事情开始变得棘手。在每个列表元素上，我添加了一个按钮

    ```
    Button... android:onClick="showPopup" 
    ```

该`showPopup`方法创建一个`PopupWindow`，然后我用我的布局对其进行膨胀。

```
LinearLayout viewGroup = (LinearLayout) findViewById(R.id.table_phones);

LayoutInflater layoutInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

View layout = layoutInflater.inflate(R.layout.popup_phones, viewGroup); 
```

我的问题和问题是：如何将我的数据传递给该弹出窗口？例如，我只想从`Data`与给定项目关联的对象中传递一些文本`ListView`并将其显示在我的弹出窗口中。

如果您需要，我可以粘贴更多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:06:40.953

首先，您将选定的列表项转换为集合对象。然后您可以将其转换为数组列表。然后您可以从该数组列表访问并将数据填充到您的弹出窗口。示例代码：

```
lv1.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,long arg3) {
        Collection<Object> str = mylist.get(arg2).values();
        ArrayList<Object> al1 = new ArrayList<Object>(str);

        LayoutInflater layout = (LayoutInflater) getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);
        View popupView = layout.inflate(R.layout.your_popup, null);

        popupWindow.showAtLocation(popupView, Gravity.CENTER, 0, 0);

        TextView tv1 = (TextView) popupView.findViewById(R.id.textView3);
        TextView tv2 = (TextView) popupView.findViewById(R.id.textView4);
        TextView tv3 = (TextView) popupView.findViewById(R.id.textView5);
        TextView tv4 = (TextView) popupView.findViewById(R.id.textView6);
        TextView tv5 = (TextView) popupView.findViewById(R.id.textView7);

        tv1.setText(al1.get(1));
        tv2.setText(al1.get(2));
        tv3.setText(al1.get(3));
        tv4.setText(al1.get(4));
        tv5.setText(al1.get(5));

        Button close = (Button) popupView.findViewById(R.id.close);
        close.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                popupWindow.dismiss();
            }
        });
    }
}); 
```

我希望这能帮到您。

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:42:40.717

我终于设法完成了我的任务。Gunaseelan 的回答很好，但它不适用于我列表中的 Button，仅适用于整个列表项。我在这里找到了解决方案：

[http://cyrilmottier.com/2011/11/23/listview-tips-tricks-4-add-several-clickable-areas/](http://cyrilmottier.com/2011/11/23/listview-tips-tricks-4-add-several-clickable-areas/)

我只需要创建一个自定义 onCLickListener 并将其附加到我的自定义适配器中。然后在 onClick 方法中，我只是创建我的弹出窗口，获取单击按钮的位置并填充数据。

```
private OnClickListener phonesListener = new OnClickListener() {

    @Override
    public void onClick(View v) {
        ListView lv = (ListView) findViewById(R.id.list_results);
        final int position = lv.getPositionForView(v);.... make whatever you need 
```

# java - JSF 数据表过滤器示例

> ID：15759936
> 
> 赞同：2
> 
> 时间：2013-04-02T08:56:34.303
> 
> 标签：java, jsf, primefaces

我有以下代码。

```
<p:column  headerText="Bank">
    <f:facet name="header">
    <p:selectOneMenu id="bank" value="#{reportsExecHistManagedBean.bankList}">
    <f:selectItem itemLabel="Select Bank" itemValue="" />
        <f:selectItems value="#{reportsExecHistManagedBean.bankList}"/>
        </p:selectOneMenu>
        </f:facet>
        <h:outputText value="#{tr.bank}" />
        </p:column> 
```

如何在此处启用过滤，当用户选择任何 selectItem 时，数据表会显示过滤后的值。我的桌子上也有lazyLoading。我不想遵循代码

```
 <p:column headerText="Bank" filterBy="#{tr.bank}" style="text-align:left; width:10px;"  filterOptions="#{reportsExecHistManagedBean.bankList}" filterMatchMode="exact">
                            <h:outputText value="#{tr.bank}"/>
                        </p:column> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:21:13.293

过滤器是 primefaces 数据表中一个非常强大的功能，您可以使用过滤器作为示例

对于列过滤器，它是这样的

```
<p:column id="modelColumn" filterBy="#{car.model}"  
                headerText="Model" footerText="contains"  
                filterMatchMode="contains"> 
```

filterMatchMode 可以有值：-“startsWith”（默认）、“endsWith”、“contains”和“exact”

[您可以从http://www.primefaces.org/showcase/ui/datatableFiltering.jsf](http://www.primefaces.org/showcase/ui/datatableFiltering.jsf)的官方网站了解更多关于数据过滤器的信息

# plone - 运行 Zope 的配置错误：未配置数据库

> ID：15759945
> 
> 赞同：0
> 
> 时间：2013-04-02T08:57:12.573
> 
> 标签：plone, zope

我在尝试安装附加组件 CalendarX 后尝试使用命令启动 Zope 时收到以下错误。我刚刚修改了`buildout.cnf`at`/zinstance`目录并运行了`buildout`位于 at的目录`/bin`。之后我在调试模式下运行并发现了以下错误。我可以做些什么来恢复更改或重新启动正确配置的服务器？

错误：

```
:/var/plone/zinstance# ./bin/plonectl fg
instance: /var/plone/zinstance/parts/instance/bin/runzope -X debug-mode=on
2013-04-02 10:31:40 INFO ZServer HTTP server started at Tue Apr  2 10:31:40 2013
        Hostname: 0.0.0.0
        Port: 8080
2013-04-02 10:31:40 INFO Zope Set effective user to "plone"
2013-04-02 10:31:41 INFO Marshall libxml2-python not available. Unable to register libxml2 based marshallers.
/var/plone/Zope-2.10.7-final-py2.4/lib/python/Products/COREBlog2/configuration/schema.xml
2013-04-02 10:31:44 INFO Plone Dependency
Unable to detect Zope version. Please make sure you have Zope 2.10.4 or newer installed.
2013-04-02 10:31:44 WARNING SecurityInfo Conflicting security declarations for "getTags"
2013-04-02 10:31:44 WARNING SecurityInfo Class "COREBlogEntry" had conflicting security declarations
2013-04-02 10:31:46 INFO Plone Python does not have SSL support. OpenID support not available
2013-04-02 10:31:49 INFO PlacelessTranslationService You have a stale entry for 'Products.LDAPMultiPlugins' in your ZMI Products section.You should consider removing it.

2013-04-02 10:31:49 INFO PlacelessTranslationService You have a stale entry for 'Products.LDAPUserFolder' in your ZMI Products section.You should consider removing it.

2013-04-02 10:31:49 INFO PlacelessTranslationService You have a stale entry for 'Products.PloneLDAP' in your ZMI Products section.You should consider removing it.

2013-04-02 10:31:49 INFO PlacelessTranslationService You have a stale entry for 'Products.sevillaSkin2' in your ZMI Products section.You should consider removing it.

2013-04-02 10:31:49 INFO PlacelessTranslationService You have a stale entry for 'Products.sevillaSkin3' in your ZMI Products section.You should consider removing it.

2013-04-02 10:31:49 INFO PlacelessTranslationService You have a stale entry for 'Products.sevillaSkin_' in your ZMI Products section.You should consider removing it.

2013-04-02 10:31:49 INFO PlacelessTranslationService You have a stale entry for 'Products.sevillaSkin_1' in your ZMI Products section.You should consider removing it.

2013-04-02 10:31:49 INFO PlacelessTranslationService You have a stale entry for 'Products.sevillaSkin_2' in your ZMI Products section.You should consider removing it.

2013-04-02 10:31:49 INFO PlacelessTranslationService You have a stale entry for 'Products.sevillaSkin_23_06' in your ZMI Products section.You should consider removing it.

2013-04-02 10:31:49 INFO PlacelessTranslationService You have a stale entry for 'Products.sevillaSkin_new' in your ZMI Products section.You should consider removing it.

2013-04-02 10:31:49 INFO PlacelessTranslationService You have a stale entry for 'Products.sevillaSkin_old' in your ZMI Products section.You should consider removing it.

2013-04-02 10:31:50 INFO PloneFormGen Patching plone.app.portlets ColumnPortletManagerRenderer to not catch Retry exceptions
2013-04-02 10:31:50 INFO Zope Ready to handle requests
2013-04-02 10:31:55 ERROR Zope.ZODBMountPoint Failed to mount database. ZConfig.ConfigurationError (No database configured for mount point at /site1)
Traceback (most recent call last):
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Products/ZODBMountPoint/MountedObject.py", line 257, in _getOrOpenObject
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Products/ZODBMountPoint/MountedObject.py", line 147, in _getMountedConnection
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Products/ZODBMountPoint/MountedObject.py", line 157, in _getDB
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Zope2/Startup/datatypes.py", line 276, in getDatabase
    name = self.getName(mount_path)
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Zope2/Startup/datatypes.py", line 293, in getName
    self._mountPathError(mount_path)
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Zope2/Startup/datatypes.py", line 268, in _mountPathError
    raise ConfigurationError(
ConfigurationError: No database configured for mount point at /site1
2013-04-02 10:31:55 ERROR Zope.ZODBMountPoint Failed to mount database. ZConfig.ConfigurationError (No database configured for mount point at /site1)
Traceback (most recent call last):
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Products/ZODBMountPoint/MountedObject.py", line 257, in _getOrOpenObject
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Products/ZODBMountPoint/MountedObject.py", line 147, in _getMountedConnection
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Products/ZODBMountPoint/MountedObject.py", line 157, in _getDB
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Zope2/Startup/datatypes.py", line 276, in getDatabase
    name = self.getName(mount_path)
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Zope2/Startup/datatypes.py", line 293, in getName
    self._mountPathError(mount_path)
  File "/usr/local/Plone/Zope-2.10.7-final-py2.4/lib/python/Zope2/Startup/datatypes.py", line 268, in _mountPathError
    raise ConfigurationError(
ConfigurationError: No database configured for mount point at /site1
^C2013-04-02 10:38:47 INFO SignalHandler Caught signal SIGINT
2013-04-02 10:38:47 INFO Z2 Shutting down 
```

有什么帮助吗？感谢提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T19:13:32.157

我终于找到了解决方案。

1）停止 Zope 实例（plonectl 或其他）：

```
$./bin/plonectl stop 
```

2) 正确填写您的 zope.conf 文件。应该看起来像这样。

```
<zodb_db main>
    # Main database
    cache-size 5000

# FileStorage database
    <filestorage>
      path /var/plone/zinstance/var/filestorage/Data.fs
    </filestorage>
    mount-point /
</zodb_db>
<zodb_db site1>
    <filestorage>
      path /var/plone/zinstance/var/filestorage3/Data.fs
    </filestorage>
    mount-point /site1
</zodb_db> 
```

3）重新运行构建：

```
$./bin/buildout 
```

4）启动zope实例：

```
$./bin/plonectl start (normal mode)
$./bin/plonectl fg (debug mode) 
```

当您运行文件更改`buildout`时。`zope.conf`

# jsf - ViewScoped 绑定错误 - 已修复？

> ID：15759952
> 
> 赞同：0
> 
> 时间：2013-04-02T08:57:40.520
> 
> 标签：jsf, jsf-2

我正在使用 Primefaces 3.5 和 Mojarra 2.1.17，我今天遇到了[此处](http://balusc.blogspot.co.at/2010/06/benefits-and-pitfalls-of-viewscoped.html#HeyTheresPitfallsInTheTitle)描述的错误。不过，我已经阅读了一些关于 SO 的答案，其中说该错误目前已修复。有人能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:30:03.340

在 Mojarra 2.2 正式发布之前使用 Mojarra 2.1.x，直到您可以通过将 javax.faces.PARTIAL_STATE_SAVING 设置为该特定页面的 false 来在视图范围内使用绑定。尽可能避免在 viewscope 中使用绑定

# html - 从 HTML 过渡到 HTML - 仅更改 DOCTYPE 后会有任何问题

> ID：15759956
> 
> 赞同：0
> 
> 时间：2013-04-02T08:57:45.133
> 
> 标签：html, doctype

我们有一个用 HTML 过渡创建的网站，并将其放置在所有文档头部的 DOCTYPE 中。如果我们只输入 DOCTYPE HTML 而不是过渡的长行，会有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:06:56.457

这取决于您拥有的确切 DOCTYPE 字符串。如果它符合 HTML 4.01 规范并因此包含一个 URL，那么浏览器可能会以“标准模式”或“几乎标准模式”处理它，请参阅[使用 Doctype 激活浏览器模式](http://hsivonen.iki.fi/doctype/)。这通常意味着没有变化或变化有限（由于“几乎标准模式”或“标准模式”之间的微小差异——`<!DOCTYPE HTML>`触发后者）。

另一方面，如果您一直在使用*没有*URL 的 HTML 4.01 过渡 DOCTYPE，那么重要的浏览器会以“怪癖模式”显示您的页面。这可能意味着不同的事情，从没有影响到完全破坏，请参阅[Web 浏览器中的 Quirks 模式会发生什么？](http://www.cs.tut.fi/~jkorpela/quirks-mode.html)

此外，如果您使用验证器，则会有很多含义：HTML5 的验证与基于 SGML 的验证本质上是不同的。但是，验证器具有用户界面，可让您覆盖 DOCTYPE 并指定要用于检查的 HTML 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:36:26.317

通过这样做，您实际上是在告诉浏览器“此页面采用 HTML 5！”。但是它不会影响您的 html，除非它具有不推荐使用的标签，如,`<font>`或不推荐使用的属性，如(in ) full list 可以在[这里](http://www.codehelp.co.uk/html/deprecated.html)找到，因为它是向后兼容的，如此处[所述](http://www.w3.org/TR/html5-diff/)。`<menu>``<u>``vspace``<body>`

请注意，一些浏览器继续支持已弃用的标签和属性，但最好使用 CSS 属性或类似标签来完成这项工作。

# html - 如何从图像列表中共享特定图像

> ID：15759963
> 
> 赞同：-2
> 
> 时间：2013-04-02T08:58:02.693
> 
> 标签：html, facebook, twitter

我正在开发一个正在进行中的摄影网站。它以列表形式显示作者的所有照片。我想添加一个功能，以在悬停共享按钮弹出窗口或通过始终固定在图片库左侧的浮动共享来将特定图像共享到社交网络。

在社交网络上共享整个列表很容易，但我无法共享特定图像。我已将共享按钮设置为 div 并且可以正常工作。

如何添加此功能或从哪里开始？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:40:11.383

当您执行“分享按钮”时，您必须指定要分享的网址，如果您只想分享页面的图片，则必须输入图片的网址。

最好用图像做一个页面，因为一些社交网络从页面本身获取标题和描述，其他人可以传递信息。

注意：您共享的网页必须是 urlencoded。

脸书的例子：

```
<a href="http://www.facebook.com/share.php?u=http%3A%2F%2Fwww.domain.com%2Fpage.php">Share on facebook!</a> 
```

所有社交网络都有一个帮助页面，解释如何创建分享按钮。

# javascript - 多文件上传验证 - 限制选择同一文件两次

> ID：15759965
> 
> 赞同：1
> 
> 时间：2013-04-02T08:58:05.810
> 
> 标签：javascript, jquery, html, dom, validation

我想从我的表单中的多个上传字段中限制两次选择相同的文件。

我已经制作了以下代码来从同一输入字段中选择/取消选择/重新选择文件。

```
<input type="file" name="attachment" id="attachment" multiple>
<script type="text/javascript">
fileList = [];
$("#attachment").fileupload({
    sequentialUploads : true,
    change : function(e, data) {
        for ( var i = 0; i < data.files.length; i++) {
            //display files and clear options
            fileList.push(data.files[i]);
        }
        return false;
    }
});
</script> 
```

谁能告诉我是否有任何方法可以从输入文件中获取所选文件的路径，以便我可以将其与之前选择的文件进行比较并验证我的表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T08:53:18.290

您无法从浏览器获取真实的文件路径。出于安全原因，浏览器不允许为您提供文件的真实路径。所以你不能比较重复文件的文件路径。但是，如果有必要，您可以使用 hashcode() 方法比较文件。[这是https://drupal.org/node/1077598](https://drupal.org/node/1077598)上的相同讨论主题

# jquery - Jquery在滚动上加载更多内容，有时不执行javascripts

> ID：15759974
> 
> 赞同：0
> 
> 时间：2013-04-02T08:58:20.050
> 
> 标签：jquery, ajax

我的网站是gapagap.com，当我向下滚动浏览帖子时，它会加载更多帖子，但其中有一个“投票”功能，点击时有时适用于某些帖子，有时不适用于随机帖子。这是代码片段..

**索引文件**

```
 <div id="entries-content" class="list">
            <ul id="entries-content-ul" class="col-1">
                {section name=i loop=$posts}
                {include file="posts_bit.tpl"}
                {/section}   
                      {literal}
            <script type="text/javascript">
            $(document).ready(function(){
      //calling header function to set the active tab state
      headerTabChange('hot');

                var tpage = 2;
                function lastAddedLiveFunc()
                {

                                      $('div#lastPostsLoader').html('');
                    $.get("{/literal}{$baseurl}/{literal}indexmore.php?page="+tpage, function(data){
                        if (data != "") {

                                            $(".col-1").append(data);

                        }
                        $('div#lastPostsLoader').empty();
                    });
                };

                $(window).scroll(function(){

                    var wintop = $(window).scrollTop(), docheight = $(document).height(), winheight = $(window).height();
                    var  scrolltrigger = 0.95;

                    if  ((wintop/(docheight-winheight)) > scrolltrigger) {
                     lastAddedLiveFunc();
                     tpage = tpage+1;
                     $('#backtotop').show();
                    }
                });
            });
            </script>
            {/literal}     

              </ul>
            <div id="lastPostsLoader"></div>
        </div>  
    </div>

      {include file='right.tpl'}
      {include file='vote_js.tpl'} 
```

**这是 vote_js.tpl 的代码：**

```
 {literal}
     <script type="text/javascript">
          $('.vote').click(function(){
        if( $(this).hasClass('loved')){
        $(this).removeClass('loved');
        likedeg(-1,$(this).attr('rel'));
        }else{
        likedeg(1,$(this).attr('rel'));
         $(this).addClass('loved');
        }
        });
        function likedeg(x,p){
        jQuery.ajax({
        type:'POST',
        url:'{/literal}{$baseurl}{literal}'+ '/likedeg.php',
        data:'art='+x+'&pid=' + p,
        success:function(e){
            $('#love_count_'+p).html(e);
            }
        });
         }
        </script>
    {/literal} 
```

**这是另一个在post.tpl**中具有投票功能的代码

 **```
 <li>
    {if $smarty.session.USERID ne ""}

   <a class="vote love {insert name=get_fav_class value=var PID=$posts[i].PID}" id="post_love_{$posts[i].PID}" rel="{$posts[i].PID}" href="javascript:void(0);"><span>{$lang144}</span></a>
      {else}
     <a class="vote love " id="post_love_{$posts[i].PID}" rel="{$posts[i].PID}" href="{$baseurl}/login"><span>{$lang144}</span></a>
       {/if}
      </li> 
```

**投票功能在function.php中**

```
 function insert_get_fav_status($var)
       {
              global $conn;
          $query="SELECT count(*) as total FROM posts_favorited WHERE                   USERID='".mysql_real_escape_string($_SESSION[USERID])."' AND PID='".intval($var[PID])."'";
          $executequery=$conn->execute($query);
$total = $executequery->fields[total];
//echo $total.'<br />';
//var_dump($var);
return intval($total);
        }

         function insert_get_fav_class($var)
             {
               global $conn;
                $query="SELECT count(*) as total FROM posts_favorited WHERE  USERID='".mysql_real_escape_string($_SESSION[USERID])."' AND PID='".intval($var[PID])."'";
               $executequery=$conn->execute($query);
               $total = $executequery->fields[total];
                  //echo $total.'<br />';
                 //var_dump($var);
                if (intval($total) == 1) return("loved");
                 else return ("");
               }

             function insert_get_unfav_status($var)
             {
              global $conn;
                $query="SELECT count(*) as total FROM posts_unfavorited WHERE  USERID='".mysql_real_escape_string($_SESSION[USERID])."' AND PID='".intval($var[PID])."'";
           $executequery=$conn->execute($query);
           $total = $executequery->fields[total];
          return intval($total);
                }

                function insert_get_fav_count($var)
                {
                 global $conn;
             $query="SELECT count(*) as total FROM posts_favorited WHERE                           PID='".intval($var[PID])."'";
          $executequery=$conn->execute($query);
          $total = $executequery->fields[total];
         return intval($total);
                } 
```

**请理解我是一名 PHP 开发人员。我对 JAVASCRIPT 和 JQUERY 的了解为零。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:40:31.100

```
$.get("{/literal}{$baseurl}/{literal}indexmore.php?page="+tpage).done(function(data) {
    if (data != "") {
        $(".col-1").append(data);
    }
    $('div#lastPostsLoader').empty();
}); 
```

试试这个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T06:09:21.177

很抱歉再次回答我自己的问题……但坦率地说，我不想改变这个习惯……哈哈。

那里代替

`{ $(".col-1").append(data);`

我把它换成了 `{ $(".col-1").html(html()+data);`

感谢大家的支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T10:33:36.827

如果你的意思是这段代码：

```
<script type="text/javascript">
 (function (d, buildThese) {
   var homeScript, newScript, n = buildThese.length, i;
   for (i = 0; i < n; i = i + 1) {
     newScript = d.createElement('SCRIPT');
     newScript.type = 'text/javascript';
     newScript.async = true;
     newScript.src = buildThese[i];
     homeScript = d.getElementsByTagName('SCRIPT')[0];
     homeScript.parentNode.insertBefore(newScript, homeScript);
  }
});
</script> 
```

您确实意识到您当前正在调用此闭包：

*   **在您的元素完全插入 DOM 之前**
*   **不带任何参数（试试看：在这个特定的函数中， d 和 buildThese 都是*undefined*）**
*   不检查

两个加粗的原因是导致您的代码搞砸的原因。如果你没有任何东西， buildThese 将是未定义的，它的长度将为 0。因此，循环将永远不会运行。即使是这样，d 也是未定义的，因此您会在 d.createElement 上遇到致命错误。

您想要的功能是 jQuery **done()**。这个聪明的小函数允许你设置一个回调，当插入所有新元素时触发。它是这样工作的：

```
$.get("myURL").done(function() { alert("I'm done!"); }); 
```

这也会对您的代码产生两个意想不到的影响：

*   每次加载新页面时，它将允许您没有重复的 Twitter API 脚本
*   它将**只**允许您获取 HTML，因此将您的 JS 保存在一个地方。**

# twitter - 自定义 twitter-widget api 1.1

> ID：15759975
> 
> 赞同：2
> 
> 时间：2013-04-02T08:58:25.827
> 
> 标签：twitter

我想用新的 API 自定义 twitter 小部件。这里的例子：http: [//jsfiddle.net/br3t/jQzXK/](http://jsfiddle.net/br3t/jQzXK/)

```
<a class="twitter-timeline" data-theme="dark"  href="https://twitter.com/snkgames"  data-widget-id="314861924259078144" width="800" height="50" data-chrome="noheader nofooter" data-border-color="#cc0000" lang="RU">Tweets by @snkgames</a> 
```

我需要删除头像，缩小字体。此外，不允许使用尺寸样式。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T13:10:07.007

我发现了这个...将自定义 CSS 添加到 Twitter 1.1 嵌入小部件；

[自定义推特 1.1](http://kevinburke.github.io/customize-twitter-1.1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-12T15:10:50.517

我在这里找到了一个很有帮助的网站：[http ://www.webdevdoor.com/javascript-ajax/custom-twitter-feed-integration-jquery/](http://www.webdevdoor.com/javascript-ajax/custom-twitter-feed-integration-jquery/)

这里还有用于嵌入的文档。它提供了一个客户端选项列表来覆盖服务器端的东西 [https://dev.twitter.com/docs/embedded-timelines](https://dev.twitter.com/docs/embedded-timelines)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T04:48:40.650

我发现这个关于 Twitter 开发的讨论，也许它可以帮助 [https://dev.twitter.com/discussions/11386?page=1](https://dev.twitter.com/discussions/11386?page=1)

# php - php sql记录无法通过变量连接

> ID：15759976
> 
> 赞同：-1
> 
> 时间：2013-04-02T08:58:29.720
> 
> 标签：php, javascript, sql, variables, record

`<form name="form1"/>`

`<input type="text" name="code1" value="D50" size="7" maxlength="10" onblur="chkidpro(this.value,'provider1');" />`

`<input type="text" name="code2" value="" size="7" maxlength="10"/>`

`<form/>`

`<script type="text/javascript">`

`var jvalue = form1.code1.value;`

`<?php $abc = "<script>document.write(jvalue)</script>"?>`

`</script>`

`<?PHP $con = mysql_connect("localhost","abc_one","PASS");`

`mysql_select_db("abc_one", $con);`

`$c= "D50";`

`$jval = $abc;`

`$result2 = mysql_query("SELECT * FROM tblprocode where code='". $c."';");`

`$tab = mysql_fetch_array($result2);`

`$fld1 = $tab['card'];`

`mysql_close($con);`

`?>`

`<?php echo $jval; ?>`

`<?php echo $fld1; ?>`

***如果我更换*** `$result2 = mysql_query("SELECT * FROM tblprocode where code='". $jval."';");`

`<?php echo $abc; ?> // its print as D50`

`<?php echo $jval; ?> // its print as D50`

`<?php echo $fld1; ?> // its not print, its blank`

***如果我更换*** `$result2 = mysql_query("SELECT * FROM tblprocode where code='". $c."';");`

`<?php echo $abc; ?> // its print as D50`

`<?php echo $jval; ?> // its print as D50`

`<?php echo $fld1; ?> // its print record data`

**请帮我看看有什么问题？？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:24:36.083

我认为你应该使用`trim`函数`$jval = trim($abc);`

# validation - 导入旧测试帐户时，Paypal 沙箱电子邮件验证失败

> ID：15759977
> 
> 赞同：1
> 
> 时间：2013-04-02T08:58:34.247
> 
> 标签：validation, email, import, paypal

我正在尝试在新的贝宝开发者页面上导入旧的测试帐户，但它说我的电子邮件地址无效。我的电子邮件格式为“fname.lname@provider.com”。我认为它是有效的，它曾经是。发生了什么变化？有什么办法可以找回旧账号吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:00:46.670

这是因为此文件中第 12888 行的这个愚蠢的正则表达式：[https ://www.paypalobjects.com/eboxapps/js/15/5b6c59feedeae95c484f296dc3b9de/main.js](https://www.paypalobjects.com/eboxapps/js/15/5b6c59feedeae95c484f296dc3b9de/main.js)

```
var EMAIL_REGEX = new RegExp("^[_A-Za-z0-9-]+(\\.[_A-Za-z0-9-])*@[A-Za-z0-9--]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$"); 
```

它不匹配。在电子邮件地址的本地部分。

如果您想使用 chrome devtools 修复它，请在该行放置一个断点，输入您的电子邮件（这将触发断点），然后右键单击该行并选择“实时编辑”，然后在第一个匹配组上添加一个点，像这样：`[_A-Za-z0-9-.]`所以它变成了这样：

```
var EMAIL_REGEX = new RegExp("^[_A-Za-z0-9-.]+(\\.[_A-Za-z0-9-])*@[A-Za-z0-9--]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$"); 
```

按 Ctrl+S 并单击“恢复脚本执行”（右侧的小播放图标）。完毕。

# javascript - 如何在 div 中查找内容是否可用？

> ID：15759978
> 
> 赞同：0
> 
> 时间：2013-04-02T08:58:38.117
> 
> 标签：javascript, jquery, html, css

这是我的示例代码。如果您单击下一个按钮，它将显示该页面的下一个内容。如果您再单击一次，则会显示空白页面，因为内容不存在。如何在 div 中查找内容是否可用？

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<style type="text/css" media="screen">
body {background-color:white; font:16px Helvetica, Arial; color:black;}
.pagination {margin:auto; display:block; height:275px; width:65%; position:relative; overflow:hidden;     border:1px solid black;}
</style>
<script>
$(document).ready(function() {
//$('.pagination').children().wrapAll('<div class="content"/>');
$('.next').click(function() {
    var height = 10;
    var current = ($('.content').css('margin-top') || '0px');
    var pag = document.getElementById("page");
    //for(i=0; i<pag.
    $('.content').css('margin-top',current.substring(0,current.length-2) - $('.pagination').height() + 'px');
});
});

function clk()
{
    var idc = document.getElementById("c");
    //console.log(idc);
}

function test()
{
    var idc = document.getElementById("c");
    var tn = idc.childNodes[0];
    var sp = document.createElement("span");
    var range = document.createRange();

    range.selectNode(tn);
    range.surroundContents(sp);

    console.log("test" + sp.offsetTop);

    return false;
}
</script>
</head>
<body>
<div id="page" class="pagination" style="padding:5px">
<div class="content">
    <p>The House of Representatives shall be composed of Members chosen every second Year by the People of the several States, and the Electors in each State shall have the Qualifications requisite for Electors of the most numerous Branch of the State Legislature.</p>
    <p>No Person shall be a Representative who shall not have attained to the Age of twenty five Years, and been seven Years a Citizen of the United States, and who shall not, when elected, be an Inhabitant of that State in which he shall be chosen.</p>
    <p>(Representatives and direct Taxes shall be apportioned among the several States which may be included within this Union, according to their respective Numbers, which shall be determined by adding to the whole Number of free Persons, including those bound to Service for a Term of Years, and excluding Indians not taxed, three fifths of all other Persons.) (The previous sentence in parentheses was modified by the 14th Amendment, section 2.) The actual Enumeration shall be made within three Years after the first Meeting of the <span id="c" onclick="clk()">Congress</span> of the United States, and within every subsequent Term of ten Years, in such Manner as they shall by Law direct. The Number of Representatives shall not exceed one for every thirty Thousand, but each State shall have at Least one Representative; and until such enumeration shall be made, the State of New Hampshire shall be entitled to chuse three, Massachusetts eight, Rhode Island and Providence Plantations one, Connecticut five, New York six, New Jersey four, Pennsylvania eight, Delaware one, Maryland six, Virginia ten, North Carolina five, South Carolina five and Georgia three.</p>
    <p>When vacancies happen in the Representation from any State, the Executive Authority thereof shall issue Writs of Election to fill such Vacancies.</p>
    <p>The House of Representatives shall chuse their Speaker and other Officers; and shall have the sole Power of Impeachment.</p>
    </div>
</div>
<ul>
<li>Previous</li>
<li class="next">Next</li>
<li><a href="" onclick="return test()">Click</a></li>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:07:40.647

```
if ($('div').html()) {
    // Not empty
} else {
    // Empty
} 
```

[http://jsfiddle.net/bmzmN/](http://jsfiddle.net/bmzmN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:02:44.757

没有看到您的代码，但一般检查`$('#yourdiv').html()`是否为空

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:13:40.343

只是对 Kaloyan 所说的话的补充。

```
if ($.trim($('div').html())) {
    $('p').text('Not empty');
} else {
    $('p').text('Empty');
} 
```

您可以使用上述内容，以便甚至可以修剪空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T09:20:00.120

如果 div 的长度为 0，则表示该 div 内没有内容。你也可以这样检查。请看一下

[http://jsfiddle.net/X5r8r/1108/](http://jsfiddle.net/X5r8r/1108/)

```
$("#div_1").html().trim().length
$("#div_2").html().trim().length 
```

# java - 如何限制 antlr3 中令牌的长度？

> ID：15759980
> 
> 赞同：0
> 
> 时间：2013-04-02T08:58:49.167
> 
> 标签：java, compiler-construction, antlr, antlr3

我正在尝试使用 antlr 构建编译器，现在我想将我的语言中的标识符长度限制为小于 9。

我的代码现在看起来像这样：

```
IDENTIFIER: CHAR(CHAR|INT)*; 
```

where`CHAR`和`INT`都是片段。我想知道是否有任何方便的方法可以让我实现我的目标，而不是使用这个：

```
IDENTIFIER: CHAR(CHAR|INT)(CHAR|INT)...(CHAR|INT);//repeate (CHAR|INT) 8 times. 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:49:58.300

您应该在词法分析器完成后使用单独的检查来实现这一点。如果您尝试在词法分析器中验证标识符的长度，则输入包含`Identifier2Long`可能会执行以下操作：

1.  `Identifier`通过丢弃`I`.
2.  `dentifier2`通过丢弃`d`.
3.  ...更多
4.  最后，成功解析`fier2Long`为标识符*并将其作为下一个令牌返回*。

您可以通过覆盖来实现检查[`Lexer.nextToken`](http://antlr3.org/api/Java/org/antlr/runtime/Lexer.html#nextToken%28%29)。

# vba - 如何从 VBA 代码打开受保护的工作簿？

> ID：15759981
> 
> 赞同：2
> 
> 时间：2013-04-02T08:58:52.843
> 
> 标签：vba, excel, excel-2007

如何从 VBA 代码打开受保护的工作簿（带密码）？我已经尝试过这个指令

`Workbooks.Open Filename:="D:\file.xls", ReadOnly:=False, Password:="semsem"` 它不起作用。关于这个问题有什么建议吗？
注意：我使用 EXcel2007。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:00:34.910

在 vba 项目中，您是否保护项目不被查看？如果是这样，我认为这将无法实现，因为如果您想要进行任何代码更改，项目需要在物理上不受保护。从 vba 编程的角度来看，这无济于事，但从用户防篡改的角度来看，它确实有帮助。

1.  如果您不打算编辑代码，我只能建议您留下密码。

2.  如果您打算更改代码，我只能建议您让项目不受保护并尝试以另一种方式保护文件。

3.  **未经测试**，但一个想法是以编程方式创建一个包含新代码的工作表并将此工作表复制到此工作簿中。

帮助不大，但我能提供的唯一答案。

**要手动删除保护：**

1.  如果这是一次性的，双击项目并输入密码，一旦完成，保存并关闭项目将保持此保护。 ![http://www.allaboutvba.vbapasswordremover.net/images/screen/protect-excelrun10.gif](https://i.stack.imgur.com/cSRZe.gif)

2.  或者如果它是永久的，则右键单击项目>项目属性>保护并取消选中锁定项目以进行查看。 ![http://www.allaboutvba.vbapasswordremover.net/images/screen/protect-excellock8.gif](https://i.stack.imgur.com/c19BR.gif)

来自[关于 VBA的图片](http://www.allaboutvba.vbapasswordremover.net/protect-excel-vba-file.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T06:20:43.190

If a Workbook is password protected, it can be opened using VBA. But, If a VBA Macro is Password Protected, It cannot be opened or controlled from VBA. For security purpose this is not allowed.

One alternate option would be to pass KeyPress events to enter the password.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T09:31:45.623

尝试以下操作：

```
Workbooks.Open Filename:="D:\file.xlsx", Password:="semsem" 
```

# android - UserSearchManager 期间的 XMPP 服务不可用（503）错误

> ID：15759990
> 
> 赞同：1
> 
> 时间：2013-04-02T08:59:22.370
> 
> 标签：android, xmpp, chat, smack, asmack

今天早上我遇到了一个复杂的问题。我正在使用 XMPP 创建聊天应用程序。我成功登录并可以与用户聊天。

现在，我想在 XMPP 服务器中**搜索用户。**但我得到错误**服务不可用（503）**

这是我的代码：-

```
 UserSearchManager usm = new UserSearchManager(connection);
Form searchForm = usm.getSearchForm("search."+connection.getServiceName());
Form answerForm = searchForm.createAnswerForm();
answerForm.setAnswer("Username", true);
answerForm.setAnswer("search", "rahul@opensip01");
ReportedData data = usm.getSearchResults(answerForm, "search."+connection.getServiceName());
System.out.println("data is "+data); 
```

还有一点。当我通过访问[http://www.igniterealtime.org/builds/smack/docs/3.2.2/javadoc/org/jivesoftware/smackx/search/UserSearchManager.html#getSearchServices()来使用](http://www.igniterealtime.org/builds/smack/docs/3.2.2/javadoc/org/jivesoftware/smackx/search/UserSearchManager.html#getSearchServices())**getSearchServices(** ) 时。我得到了**零**值。

 **这是代码：-

```
UserSearchManager usm = new UserSearchManager(connection);
System.out.println(usm.getSearchServices().size()); 
```

我已经在我的 XMPP 服务器中安装了高级搜索插件。但仍然得到零输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:18:02.797

当 serach 不使用时，`@`只需键入这样的名称

`answerForm.setAnswer("search", "rahul");`**

# java - 线程在 ReceiveNextEvent 中被阻塞

> ID：15759993
> 
> 赞同：0
> 
> 时间：2013-04-02T08:59:39.117
> 
> 标签：java, jna

使用 JNA，我构建了一个 api 来使用`Carbon`框架从 Mac 接收操作系统事件。现在，有一个函数`Carbon.framework`定义为：

```
OSStatus ReceiveNextEvent (
ItemCount inNumTypes, //ItemCount is a 32-bit iteration count
const EventTypeSpec *inList, //EventTypeSpec is a structure
EventTimeout inTimeout,//EventTimeout is double-length integer of type EventTime
Boolean inPullEvent,
EventRef *outEvent
); 
```

文档是这样说的：

> inNumTypes
> 
> 要等待的事件类型数（如果有任何事件应该导致此函数返回，则为 0）。在列表中。我们正在等待的事件类型列表（如果任何事件应该导致此函数返回，则传递 NULL）。
> 
> inTimeout 返回前等待的时间（最好通过 kEventDurationForever）。￼￼￼
> 
> inPullEvent 为该参数传递 true 以从队列中移除下一个匹配事件。
> 
> outEvent 指向与传入列表匹配的下一个事件的指针。如果您在 inPullEvent 参数中传递 true，则该事件归您所有，完成后您应该释放它。
> 
> 返回值 指示是否接收到事件、超时到期或退出当前事件循环的结果。有关可能的值，请参见“碳事件管理器结果代码”（第 257 页）。讨论
> 
> 此函数尝试获取指定类型的下一个事件。如果事件队列中没有事件匹配，此函数将运行当前事件循环，直到匹配的事件到达，或超时到期。除了计时器触发之外，您的应用程序在此函数内部时会被阻止等待事件到达。

同样，我在 JNA 通话中写了以下内容：

```
NativeLong ReceiveNextEvent(NativeLong inNumTypes, EventTypeSpec[] inList,float inTimeout ,boolean inPullEvent, EdSdkLibrary.__EdsObject outEvent); 
```

`__EdsObject`延伸`PointerType`。

```
public static class __EdsObject extends PointerType {
    public __EdsObject(Pointer address) {
        super(address);
    }
    public __EdsObject() {
        super();
    }
};

EventTypeSpec is:
public class EventTypeSpec extends Structure {

    public int eventClass;
    public int eventKind;

    protected List getFieldOrder() {
        return Arrays.asList(new String[]{"eventClass", "eventKind"});
    }
} 
```

和电话是`carbon.ReceiveNextEvent(new NativeLong(1), null, 1.0f, true, eventRef)`

天知道为什么，但这条线索并没有从声明中出来。有趣的是，它确实会获取事件并分发它们，但不会出来。它与我定义函数的方式有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:50:00.087

您的映射不正确，并且您没有提供本机代码可以将事件写入其中的事件结构。

```
NativeLong ReceiveNextEvent(NativeLong inNumTypes, EventTypeSpec[] inList, double inTimeout, byte inPullEvent, Pointer outEvent); 
```

您*必须*为本地代码提供足够大小的缓冲区`outEvent`来写入事件数据（您只提供了一个未初始化的指针，因此当您的方法签名实际上正确时会崩溃）。

`float`您没有使用而不是参数崩溃的事实`double`只是偶然的。实际发生的情况是，之前的所有参数都`inTimeout`被写入堆栈中的错误位置，因此您的结果将是未定义的。

但是，我不明白您为什么要查看这些事件的操作系统事件队列。根据 EDSDK 文档，事件被发送到直接在 EDSDK 库中注册的回调。我在文档或 EDSDK 示例代码中都没有提到操作系统事件队列。

# actionscript-3 - 设置为不显示的文本字段不保留其值

> ID：15759995
> 
> 赞同：1
> 
> 时间：2013-04-02T08:59:44.087
> 
> 标签：actionscript-3, flash

我有一个项目，我们有很多淡入淡出的文本字段，所有这些字段都有一个实例名称，加载时我以 JSON 格式从服务器加载变量，我解析这种格式并将数组分配给所有实例名称。

当我触发一个影片剪辑，淡入带有文本的元素时，未设置文本。如果我 THEN 触发数据加载功能，则实际加载了文本，但如果剪辑不可见，Flash 似乎不会加载实例。

我怎样才能解决这个问题？这与垃圾收集有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:18:43.193

我确定它不是垃圾收集，如果您使用 Action-Script 3，您需要“嵌入字体”以显示文本：

尝试调试您的代码，是否有任何错误？

我假设如果您使用操作脚本 2 文本框在加载 vars 时没有参考，这将解释没有错误消息..操作脚本 3 会告诉您文本不足”因此是错误。

详细说明：

当您加载变量时，您的 text_fields 尚未准备好，变量加载到帧“1”，文本字段直到稍后才存在，所以......您需要存储变量，直到您的文本字段准备好。