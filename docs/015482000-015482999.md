# StackOverflow 问答 15482000-15482999

# python - 如何格式化python记录器的默认消息

> ID：15482003
> 
> 赞同：3
> 
> 时间：2013-03-18T16:31:51.793
> 
> 标签：python, logging

我正在使用 python 日志记录模块。

当我输出任何消息时，它具有默认输出字符串作为前缀。

例如

```
 logging.info("any message") 
```

给出带有前缀“INFO：”的输出

```
 INFO:any message 
```

我想打印没有任何前缀的简单消息。

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:34:16.787

阅读[API](http://docs.python.org/2/library/logging.html)。

```
FORMAT = '%(asctime)-15s %(clientip)s %(user)-8s %(message)s'
logging.basicConfig(format=FORMAT)
d = {'clientip': '192.168.0.1', 'user': 'fbloggs'}
logger = logging.getLogger('tcpserver')
logger.warning('Protocol problem: %s', 'connection reset', extra=d) 
```

给

```
2006-02-08 22:20:02,165 192.168.0.1 fbloggs  Protocol problem: connection reset 
```

您必须自定义记录器的格式，类似于上图所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:36:48.500

要仅输出消息，请使用以下格式字符串：

```
logging.basicConfig(format='%(message)s') 
```

# mysql - MySQL 连接代码需要修复。我遇到了死胡同

> ID：15482005
> 
> 赞同：0
> 
> 时间：2013-03-18T16:31:54.227
> 
> 标签：mysql, vb.net, connection

我目前正在为 DayZ 服务器开发一个自定义管理面板，它将在本地计算机上运行并连接到远程数据库。我比以往任何时候都更多地使用 Google 搜索，但我遇到了死胡同。我似乎找不到此代码的修复程序，我发现并被告知它应该可以工作。

```
Public Function sqlConnect(ByVal server, port, instance, uname, pword) As Boolean
    Dim connection As SqlConnection
    connection = New SqlConnection()
    connection.ConnectionString = "Server=" & server & port & "; Uid=" & uname & "; Pwd=" & pword & "; Database=***;"
    Try
        connection.Open()
        MessageBox.Show("Connection Opened Successfully")
        Return True
        connection.Close()
    Catch mysql_error As SqlException
        MessageBox.Show("Error Connecting to Database: " & mysql_error.Message)
        Return False
    Finally
        connection.Dispose()
    End Try
End Function 
```

如果这里的任何人都可以帮助我找到有关如何进入该 MySQL 服务器的解决方案，那么您将永远欠我的债。

注意：我正在使用 VS 2012 express，专门在 VB.NET 中进行编程，因为它是一个非常大的项目（对我来说），而且它是我最了解的语言。可以下载任何所需的附加组件，只要其他用户也不必下载它。

我以前从未使用过 MySQL 数据库，所以我可能只是在做一些完全错误的事情。

编辑：预先提供的信息包括：服务器 ip、端口、数据库 ID、用户名和密码。

![mysql_error.Message](../Images/b5c87b3ade3251a68f735ed10b4d1ffa.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:35:59.563

您无法连接到`MySQL`使用`SqlConnection`类。它旨在连接到 MS SQL Server。试试用**[这个](http://dev.mysql.com/downloads/connector/net/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:12:35.220

找到了，这段代码完美运行：

```
Public Function sqlConnect(ByVal server, port, instance, uname, pword) As Boolean
    Dim connection As MySqlConnection
    connection = New MySqlConnection()
    connection.ConnectionString = "Host=" & server & ";port=" & port & _
 ";user=" & uname & ";password=" & pword & ";"
    Try
        connection.Open()
        MessageBox.Show("Connection Opened Successfully")
        Return True
        connection.Close()
    Catch mysql_error As MySqlException
        MessageBox.Show("Error Connecting to Database: " & mysql_error.Message)
        Return False
    Finally
        connection.Dispose()
    End Try
End Function 
```

# perl - 在 csv 文件中转义逗号 Perl

> ID：15482008
> 
> 赞同：0
> 
> 时间：2013-03-18T16:32:05.637
> 
> 标签：perl, comma

我必须读取包含 19000 个条目的文本文件，重新排列它们，然后将它们放回 csv 文件中。问题是某些条目包含逗号，当我输出回 csv 时，它会在逗号处中断。输出时有没有办法转义逗号？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T16:33:33.840

使用[Text::CSV](http://p3rl.org/Text%3a%3aCSV)。它会为你处理逃跑。如果适用，它还将读取数据。我认为最好的方法不是逃避逗号，而是使用字段封闭符。这些看起来像这样：

```
row 1,some data,"some long text, with a comma"\n
row 2,some more data,"lots of ,,,,,"\n 
```

您当然可以决定只使用其他东西作为分隔符。A`;`由欧洲非英语 Excel 使用，即在德国。

大多数其他程序（包括 Excel 和 Open Office Calc）通常都可以理解另一个分隔符和字段包围符。但是您当然应该在更改输出中的任何内容之前验证您的数据接收器。

# ios - 将 NSString 与 UITextField 文本进行比较永远不会被调用

> ID：15482011
> 
> 赞同：1
> 
> 时间：2013-03-18T16:32:08.290
> 
> 标签：ios, objective-c, cocoa-touch, nsstring, uitextfield

我在 my 中记录了文本的值，`UITextField`我想稍后将文本与原始文本字段值进行比较。我尝试这样的事情，但我从来没有得到`NSLog`显示。任何想法为什么？

```
defaultTopicText = topicTextField.text;
if ([topicTextField.text isEqualToString:defaultTopicText]){
    NSLog(@"YES");
}else{
    NSLog(topicTextField.text);
    NSLog(defaultTopicText);
} 
```

代码看起来和你看到的*一模一样。*我分配值的第一行和另一行 - 我与它进行比较。它没有被调用。

**编辑：**

代码本身**被**调用，当我将它们放入时，我也会得到相同的值`NSLog`。问题可能是文本字段包含`@"\n"`字符吗？

`NSLog`给了我这个：

```
2013-03-18 20:45:22.037 myapp[524:907] 

Here comes the text
2013-03-18 20:45:22.039 myapp[524:907] 

Here comes the text 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:36:38.063

尝试打印出 the 的值`topicTextField.text`并查看显示的内容。否则设置断点以查看您是否到达该特定代码行。

您还可以尝试在删除空格和换行后进行比较，如果有的话

```
NSString *trimmmedText = [topicTextField.text stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

if ([trimmmedText isEqualToString:defaultTopicText]){
    NSLog(@"YES");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:37:23.223

尝试更改为：

```
NSString *newString = [defaultTopicText stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

if ([newString isEqualToString:defaultTopicText]){
    NSLog(@"YES");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:43:15.420

我输入了以下找到的答案......运行它应该会给你答案：

```
if(!defaultTopicText){
    NSLog(@"defaultTopicText is nil");
}else{
    NSLog(@"defaultTopicText is a: %@".[defaultTopicText classname]);
}

defaultTopicText = topicTextField.text;
if ([topicTextField.text localizedCaseInsensitiveCompare:defaultTopicText] == NSOrderedSame){
    NSLog(@"YES");
}else{
NSLog(@"\"%@\" != \"%@\"",defaultTopicText, topicTextField.text);
} 
```

然后我意识到：`topicTextField.text`如果它是nil，则使用这种比较方法只能与自身不是同一个对象。

`topicTextField.text`必须是`nil`......所以它最终执行：

```
id var = nil;
[var isEqual:nil]; 
```

并且运行时使它返回 0；

...所以修复你的出口`topicTextField`

# sql - SQL 查询列更新

> ID：15482024
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:33:02.920
> 
> 标签：sql, postgresql

```
+-------------------------------+
| id  subscriber       package  |
+-------------------------------+
| 1   5553288          heart    |
| 2   4443365          love     |
| 3   5553288          love     |
| 4   3332353          love     |
| 5   5845569          tech     |
+-------------------------------+ 
```

我想更新这张表。

如果订阅者仅注册了套餐`love`，我想将其更改为`heart`.

如果订阅者有包`love`& `heart`。我想删除 for 的行`love`并将它们保留在 for 的行中`heart`。

我试过用这个

```
UPDATE subscriber
SET package=`heart
WHERE package=`love` 
```

`

有点它不会起作用，因为两个包中都有订户

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:46:14.823

一旦你为你的规范有了一个好的选择语句，你就已经完成了大部分艰苦的工作。从中创建 DML 语句通常是微不足道的，即使您使用整个事物作为您的 where 子句或将其作为派生表加入。

```
-- If a subscriber has signed up for package love only, I'd like to change it to heart.
update MyTable
set package = 'heart'
where subscriber in (
        -- Get subscribers with only love
        select subscriber
        from MyTable
        group by subscriber
        -- This having clause will handle duplicate subscriptions to love
        having max(package) = min(package)
            and max(package) = 'love'
    );

-- And if a subscriber has package love & heart. I'd like to delete the row for love and leave them with the row for heart.
delete from MyTable
where package = 'love'
    and subscriber in (
        -- Get subscribers with heart
        select subscriber
        from MyTable
        where package = 'heart'
    )
    and subscriber in (
        -- Get subscribers with love
        select subscriber
        from MyTable
        where package = 'love'
    ); 
```

# ruby-on-rails - active admin / formtastic ，将所有输入添加到一个块中

> ID：15482026
> 
> 赞同：0
> 
> 时间：2013-03-18T16:33:09.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin, formtastic

一个报告，has_many answers 和一个 answerbelongs_to 报告。嵌套表单显示并有效，但对于我有 5 个答案

添加答案

回答**__**

添加答案

回答**__**

[下3]

我如何将它们分组到一个标题为“添加答案”和 5 个输入的块中？

```
 form do |f|
    f.inputs "New Report" do 
      f.input :title
      f.input :type
      f.input :help_text
      f.input :text_box_present
      f.input :text_box_default
      f.input :template_id
    end

    f.inputs "ADD Answers", for: :answers do |a|
      a.input :text, label: "Answer", required: false
    end
    f.actions  
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T09:27:03.507

哇，这是 Active admin 和 formtastic 为嵌套属性提供的一些优雅的东西

```
f.inputs "Answers"  do
  f.has_many :answers do |a|
    a.input :text, label: "Answer", required: false
  end 
end 
```

它将使用 javascript 自动添加删除/添加按钮，用于添加多个答案

# asp.net - 如何从后面的代码以编程方式注册和处理 UserControl？

> ID：15482027
> 
> 赞同：0
> 
> 时间：2013-03-18T16:33:12.133
> 
> 标签：asp.net, user-controls, code-behind

我想从后面的代码中注册（或引用）并以编程方式处理 UserControl。我搜索了很多，但没有找到注册或引用 UserControl 的有用解决方案。

编辑：

我做了如下：

ASPX 页面：

```
<%@ Reference Control="~/ucContents.ascx" %> 
```

ASPX 页面后面的代码：

```
 Control Contents1 = null;
    try
    {
        Contents1 = LoadControl("~/ucContents.ascx");
        if (Contents1 != null)
        {
           ((ucContents)Contents1).CatID = Request.QueryString["catid"];
        }
    }
    catch
    { } 
```

我想知道是否可以动态地在''code behind''处进行参考工作（<%@ Reference Control="~/ucContents.ascx" %>）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:30:28.130

是的，您可以像发布的方式一样动态加载`UserControl`-

```
try {
    var ucContents = LoadControl("~/ucContents.ascx") as ucContents;    
    PlaceHolder1.Controls.Add(ucContents);
    ucContents.CatID = Request.QueryString["catid"];
}
.... 
```

注意：如果是动态加载，则不需要`Reference`在父页面的 aspx 中添加标签。

# c# - 使用 XmlSerializer 进行 OData 分页

> ID：15482032
> 
> 赞同：0
> 
> 时间：2013-03-18T16:33:29.450
> 
> 标签：c#, asp.net-web-api, odata

我已经设法`$inlinecount`用 WebApi.OData (v 4.0.0) 使用`ODataQueryOptions<T>`和`PageResult<T>`类来实现，如下所示：

POCO

```
public class Poco
{
    public int id { get; set; }
    public string name { get; set; }
    public string type { get; set; }
} 
```

控制器

```
[ActionName("Default")]
public PageResult<Poco> Get(ODataQueryOptions<Poco> queryOptions)
{
    var data = new Poco[] { 
        new Poco() { id = 1, name = "one", type = "a" },
        new Poco() { id = 2, name = "two", type = "b" },
        new Poco() { id = 3, name = "three", type = "c" },
        new Poco() { id = 4, name = "four", type = "d" },
        new Poco() { id = 5, name = "five", type = "e" },
        new Poco() { id = 6, name = "six", type = "f" },
        new Poco() { id = 7, name = "seven", type = "g" },
        new Poco() { id = 8, name = "eight", type = "h" },
        new Poco() { id = 9, name = "nine", type = "i" }
    };

    var t = new ODataValidationSettings() { MaxTop = 2 };
    queryOptions.Validate(t);
    var s = new ODataQuerySettings() { PageSize = 1 };
    IQueryable results = queryOptions.ApplyTo(data.AsQueryable(), s);

    var next = Request.GetNextPageLink();
    var count = Request.GetInlineCount();

    return new System.Web.Http.OData.PageResult<Poco>(
        results as IEnumerable<Poco>, next, count);
} 
```

当我从 JSON 切换到老式 XmlSerializer 时出现错误 406。有谁知道这是否应该工作？

```
var xml = GlobalConfiguration.Configuration.Formatters.XmlFormatter;
xml.UseXmlSerializer = true;
GlobalConfiguration.Configuration.Formatters.Remove(
    GlobalConfiguration.Configuration.Formatters.JsonFormatter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:18:38.533

`PageResult`不能被序列化，`XmlSerializer`因为它没有公共的、无参数的构造函数。但是没有什么能阻止你定义你自己的类似类型，它有一个公共的、无参数的构造函数。做起来应该很简单。我建议查看源代码`PageResult`并采用类似的方法。

# windows - 在 .bat 中转义 %USERPROFILE% 标记

> ID：15482033
> 
> 赞同：0
> 
> 时间：2013-03-18T16:33:31.033
> 
> 标签：windows, for-loop, batch-file, cmd, directory

我可以在`%USERPROFILE%`cmd 中或通过 bat 文件获取用户的主目录。但我只得到一个反斜杠`C:\Users\guy`，我需要用转义斜杠对其进行转换。

它应该看起来像`C:\\Users\\guy`

这该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:46:42.210

试试这个：

```
@echo off
set "profile=%USERPROFILE:\=\\%"
echo %profile% 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:46:55.103

这适用于我的机器：

```
echo %USERPROFILE:\=\\% 
```

或作为变量：

```
set a=%USERPROFILE:\=\\%
echo %a% 
```

# php - 手机获取问题

> ID：15482035
> 
> 赞同：0
> 
> 时间：2013-03-18T16:33:36.440
> 
> 标签：php, javascript, mobile, get

```
Viewport argument value "device-width;" for key "width" is invalid, and has been ignored. Note that ';' is not a separator in viewport values. The list should be comma-separated. index.php:8
Viewport argument value "1.0;" for key "initial-scale" was truncated to its numeric prefix. Note that ';' is not a separator in viewport values. The list should be comma-separated. index.php:8
Viewport argument value "1.0;" for key "maximum-scale" was truncated to its numeric prefix. Note that ';' is not a separator in viewport values. The list should be comma-separated. index.php:8
Failed to load resource: the server responded with a status of 404 (Not Found) 
Uncaught ReferenceError: jQuery is not defined jQueryJson.js:156
Uncaught ReferenceError: jQuery is not defined jquery.mobile-1.0.min.js:8
Failed to load resource 
```

您好，我在尝试与我的教授交谈时遇到一些问题，但他无法解释我的错误是什么或我该如何解决我的问题。这是我的手机页面，如果有人可以帮助我了解一下，我真的很想整理一下

提前感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:38:49.870

好吧，第一个错误是对语法大喊大叫。它说用逗号替换分号。

你有类似的东西

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;"> 
```

它想要

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

下一个错误：

> 加载资源失败：服务器响应状态为 404（未找到）

这是说它没有加载文件，并且`Uncaught ReferenceError: jQuery is not defined jQueryJson.js:156`看起来你没有上传 jQuery 文件。

# codeigniter - 未定义的变量：查询 - codeigniter

> ID：15482038
> 
> 赞同：0
> 
> 时间：2013-03-18T16:33:42.623
> 
> 标签：codeigniter, variables

我收到消息：

遇到 PHP 错误

严重性：通知

消息：未定义变量：查询

文件名：views/main.php

行号：12

这是我的控制器的代码：

```
function get_all(){
    $this->load->model('book_model');
    $this->load->library('table');
    $this->load->helper('html');

    $data['query'] = $this->books_model->books_getall();
    $this->load->view('main', $data);
} 
```

这是我的观点：

```
<h1> List of books in library</h1>
<table border="1"/>
<tr>
    <th>ID</th>
    <th>Title</th>
    <th>Author</th>
    <th>Information</th>
    <th>Publisher</th>
    <th colspan="2">Action</th>
</tr>
<?php
if(is_array($query)){

foreach ($query as $row){

echo "<tr>";
echo "<td>".$row->id."</td>";
echo "<td>".$row->title."</td>";
echo "<td>".$row->author."</td>";
echo "<td>".$row->information."</td>";
echo "<td>".$row->publisher."</td>";
echo "<td>".anchor('book/input'.$row->id,'Edit')."</td>";
echo "<td>".anchor('book/delete'.$row->id,'Delete')."</td>";
echo "</tr>";
}
}
?>
</table> 
```

提前感谢您的帮助

编辑：这是我的模型代码：

```
function get_all(){

$this->load->database();
$query = $this->db->get('books');
return $query->result(); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:02:33.867

据我所知，第 12 行似乎是这一行：

```
if(is_array($query)){ 
```

并且错误消息说 $query 未定义。当您将 $data['query'] 传递给视图时，它变成了 $query。

我注意到您的模型也返回 $query->result()。这是不正确的 - 应该在循环内使用 result() 来循环遍历结果，并且您可以使用 num_rows() 来测试超过零的结果，如下例所示：

模型

```
function example()
{
    $query = $this->db->get('books');
    return $query;
} 
```

控制器

```
$this->load->model('book_model');
$this->load->library('table');
$this->load->helper('html');

$data['query'] = $this->books_model->books_getall();
$this->load->view('main', $data); 
```

看法

```
if($query->num_rows() > 0)
{
    foreach($query->result() as $row)
    {
        // Do stuff here on each $row
    }
} 
```

建议大家看看[CodeIgniter的这部分文档](http://ellislab.com/codeigniter/user-guide/database/examples.html)，其实挺好的。

# vim - Vim：是否可以绑定一个键来打开搜索（即让我进入命令模式，输入斜线，但不要输入任何内容）

> ID：15482039
> 
> 赞同：0
> 
> 时间：2013-03-18T16:33:46.610
> 
> 标签：vim

虽然 vim 的做事方式总体上不错，但我觉得有些方面确实阻碍了作为一个没有完全致力于 vim 进行文本编辑的人。

这意味着我在 Sublime Text 中点击`Esc`+`/`并在文件中输入斜杠，并在 vim 中点击`Ctrl`+ `F`，向下滚动页面。

`Ctrl`+`S`和`:w`自定义映射也会发生类似的事情，`;`但`:`它仍然不像`Ctrl`+那样方便和安全`S`。更不用说在 PuTTY 中，Ctrl+S 做了一些相当令人不安的事情（它暂停终端的输出，直到按下 Ctrl+Q）。基本上，恕我直言，有些事情（比如切换到“查找模式”并保存文件）很适合附加到全局左侧主行快捷方式和弦，而不是要求用户在模态命令行中搞乱。它经常被用来让用户接受这些模式变化。我想这不是一个合理的抱怨，因为整个 vim 都是围绕模态概念构建的，而这些功能就是由此产生的结果。

无论如何，我想让我的大脑更轻松一些，因为我已经尝试了一段时间来保持它完好无损，而且它太多了（我或多或少地内化了`Ctrl`在 Windows 机器上的切换一个桌面键盘和拇指`Cmd`在我的 Macbook 上的使用，但这种模态文本编辑器业务似乎太多了）。我没有经过太多深思熟虑就决定全局 Homerow 键和弦更直观。

将 Ctrl+S 映射到`:w`是微不足道的，所以这里的问题是关于查找模式的。我想绑定 Ctrl+F 让我进入查找模式，但重复它不应该在查找命令中键入斜杠。这可以做到吗？是否有一个冒号命令在执行时只是将我放入当前的 find-command-buffer-thing 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:39:49.977

在您的`.vimrc`添加中：

```
inoremap <C-f> <Esc>/
noremap <C-f> <Esc>/ 
```

无论您处于何种模式，这都会让您进入“查找”模式（实际上它只是在命令行中键入一个斜杠，您可以使用它来搜索）。使用这些绑定，即使您处于插入模式，它也适用于所有模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:35:53.463

你想要这个吗？

```
nnoremap <c-f> / 
```

如果你喜欢你也可以试试

```
nnoremap <c-f> q/ 
```

第二个映射将您带到搜索历史窗口。您可以选择以前的搜索关键字/模式。也可用于输入新图案（按`i`）

顺便说一句，没有`find`模式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T17:12:45.243

可以为 Vim 中的不同模式单独定义映射，请参阅`:help map-modes`. 这会自动处理您建议的`<C-f>`映射：最初，您处于*normal mode*，然后在*command-line mode*中输入搜索模式。

如果你到目前为止只是偶尔使用 Vim，并且觉得它太“不同”，有几件事可能会使切换变得更容易：

*   *easy Vim* (`evim`或`vim -y`) 默认为插入模式
*   在 Windows 上，`:behave mswin`脚本`$VIMRUNTIME/mswin.vim`创建一些常见的 Windows 快捷方式
*   图形 GVIM 有菜单项，如*编辑 > 查找...*和工具栏。

有些事情，比如`<C-s>`码头的流量控制冻结是不幸的，主要是历史事故；你不能因为这些而责怪 Vim。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T18:39:47.070

你不需要映射任何东西。`/`有足够的表现力，绝对不会比`<C-f>`. 同样`<C-s>`，尽管有一定的熟悉度，但并不比. 好多少`:w<CR>`。你正在学习一种新工具，记得吗？

你应该集中精力去适应 Vim 的模式。对您而言，进行搜索涉及点击这一简单事实表明`<Esc>`您没有获得该部分。您对在 ST 中使用 Vim 快捷方式和在 Vim 中使用 ST 快捷方式的其他评论也不是好兆头，您抱怨必须适应 Mac 的 Cmd 的部分是锦上添花，IMO。

这听起来可能很残酷，但是从您的问题来看，您似乎同时做的太多，没有组织，而且可能没有充分的理由。

从 Windows 切换到 Mac OS X*并同时*从 ST2 切换到 Vim 肯定会令人困惑，我建议你放慢速度，在你失去理智并浪费更多时间之前做出选择。

这让我想到了这个：你为什么使用 Mac 以及你为什么使用 Vim？

Windows 是一个很好的操作系统。Sublime 是一个很好的编辑器。即使你切换到 Mac，Sublime 也能很好地工作。那么为什么选择 Vim？

如果你厌倦了一些 Sublime 的限制并想要 Vim 的强大功能，那很好。但是你*必须*绕开它的形式和尴尬，并接受改变你的习惯。

如果你不以更大的灵活性接近 Vim，**你将永远无法获得全部好处。**

如果你决定使用 Vim 是因为它很时髦，我会恭敬地建议你停下来，回到 Sublime。Vim 很奇怪，Vim 不一样，Vim 很大，Vim 是个兔子洞……如果你还没有准备好使用它并坚持不接受它的核心设计，你就不会走得太远，何必呢？你几乎可以在不接触 Vim 的情况下完成你所有的职业生涯。这没有什么可耻的。

另一方面， 重新映射`/`到......</p>`<C-f>`

# jquery - UL 的 jQuery 自动高度

> ID：15482042
> 
> 赞同：0
> 
> 时间：2013-03-18T16:33:54.707
> 
> 标签：jquery, accordion, jquery-ui-accordion

我正在为我的菜单使用带有嵌套 UL/LI 项目的 jQuery Accordion（而不是 div）。我希望每个面板只有它需要的那么大（不要像最大的面板那么大）。我试过设置**autoHeight: false**但它什么也没做。任何想法如何使它与 UL/LI 结构一起工作？

```
<div class="LeftNav">
    <div class="menu vertical menu-vertical">
        <ul class="root static" id="accordion">
            <li class="static dynamic-children"><a class="static dynamic-children menu-item" title="Information Technology" href="/IT"><span class="additional-background"><span class="menu-item-text">IT</span></span></a>
            <ul class="dynamic">
                <li class="dynamic"><a class="dynamic menu-item" title="IT Requests" href="/IT/requests"><span class="additional-background"><span class="menu-item-text">IT Requests</span></span></a></li>
                <li class="dynamic"><a class="dynamic menu-item" title="Frequently asked questions" href="/IT/faqs"><span class="additional-background"><span class="menu-item-text">FAQs</span></span></a></li>
                <li class="dynamic"><a class="dynamic menu-item" title="Forms" href="/IT/forms"><span class="additional-background"><span class="menu-item-text">Forms</span></span></a></li>
                <li class="dynamic"><a class="dynamic menu-item" title="Child 1" href="/HSE/child1"><span class="additional-background"><span class="menu-item-text">Child 1</span></span></a></li>
            </ul>
            </li>
            <li class="static dynamic-children"><a class="static dynamic-children menu-item" title="HSE" href="/HSE"><span class="additional-background"><span class="menu-item-text">HSE</span></span></a>
                <ul class="dynamic">
                    <li class="dynamic"><a class="dynamic menu-item" title="Child 1" href="/HSE/child1"><span class="additional-background"><span class="menu-item-text">Child 1</span></span></a></li>                    
                </ul>
            </li>
            <li class="static"><a class="static menu-item" title="HSE" href="/commonly-used"><span class="additional-background"><span class="menu-item-text">Commonly Used</span></span></a></li>
            <li class="static"><a class="static menu-item" title="Human Resources, Payroll and Benefits" href="/human-resources-payroll-and-benefits"><span class="additional-background"><span class="menu-item-text">HR, Payroll and Benefits</span></span></a></li><li class="static"><a class="static menu-item" title="Office Services and Supplies" href="/office-services-and-supplies"><span class="additional-background"><span class="menu-item-text">Office Services and Supplies</span></span></a></li><li class="static"><a class="static menu-item" title="Sales, Marketing and Leasing" href="/sales-marketing-and-leasing"><span class="additional-background"><span class="menu-item-text">Sales, Marketing and Leasing</span></span></a></li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:45:45.490

我认为他们已经替换`autoHeight`为`heightStyle`

[http://api.jqueryui.com/accordion/](http://api.jqueryui.com/accordion/)

**高度风格**

类型：字符串

默认值：“自动”

控制手风琴和每个面板的高度。可能的值：

```
"auto": All panels will be set to the height of the tallest panel.
"fill": Expand to the available height based on the accordion's parent height.
"content": Each panel will be only as tall as its content. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:40:18.610

看来这是一个CSS问题。尝试：

```
menu li {
    height: auto !important;
} 
```

# sharpdx - 如何使用 SharpDX.Toolkit 管理计算着色器的常量缓冲区？

> ID：15482044
> 
> 赞同：0
> 
> 时间：2013-03-18T16:34:01.933
> 
> 标签：sharpdx

我正在使用 SharpDX 运行计算着色器，并为某些输入使用常量缓冲区。我自己创建常量缓冲区并在计算着色器中使用它们，如下所示：

```
// 'device' type is SharpDX.Direct3D11.Device
// 'constBuf' type is SharpDX.Direct3D11.Buffer
device.ImmediateContext.ComputeShader.SetConstantBuffer(0, constBuf); 
```

我想开始使用 SharpDX.Toolkit 来管理常量缓冲区。Toolkit 给了我类型的对象`SharpDX.Toolkit.Graphics.Buffer`。如何使用它为我的计算着色器设置常量缓冲区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:58:36.570

[xoofx 在评论](https://stackoverflow.com/questions/15482044/how-can-i-use-sharpdx-toolkit-to-manage-constant-buffers-for-compute-shaders#comment21948140_15482044)中回答了我的问题，所以我将在此处复制它。

> 我不完全了解 Toolkit 中的常量缓冲区有什么好处。唯一的好处是使用 Effect 框架（其中常量缓冲区处理完全隐藏），但这需要对您的代码进行一些重大更改。否则，您可以像在着色器中使用它们一样使用此缓冲区。**Toolkit 中的缓冲区无论如何都可以转换为 Direct3D11.Buffer，因此您可以尝试。**

# c# - Linq 排序、分组和返回字典

> ID：15482046
> 
> 赞同：1
> 
> 时间：2013-03-18T16:34:02.183
> 
> 标签：c#, linq, dictionary

我有一个名为 FrameList 的自定义对象 (PONO) 数组，我可以通过 orderBy 和 GroupBy 进行排序和分组。但是现在我想返回一个字典，我得到了错误：

**（顺便说一句，没有错误是我删除了 .ToDictionary() 方法。）**

> 错误 1“System.Linq.IGrouping”不包含“类型”的定义，并且找不到接受“System.Linq.IGrouping”类型的第一个参数的扩展方法“类型”（您是否缺少 using 指令或程序集参考？） C:\Users\ysg4206\Documents\Visual Studio 2010\Projects\Watson\CatalogServiceClasses\BuildToby.cs 21 38 Watson

这是排序和分组的片段：

```
 var dict = request.FrameList.OrderBy(f => f.trueDate)
        .GroupBy(f => f.type)
        .ToDictionary(f => f.type, f => f); 
```

这是 FrameList 的定义（这是一个简单的 FrameData 数组）

```
[DataContract]
public class FrameData
{
    [DataMember]
    public String idx { get; set; }
    [DataMember]
    public String type { get; set; }
    [DataMember]
    public String path { get; set; }
    [DataMember]
    public String date { get; set; }
    [DataMember]
    public DateTime trueDate { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:39:53.503

目前尚不清楚您要做什么。

如果您只是想创建一个惯用的多地图，请尝试：

```
var lookup = request.FrameList.ToLookup(f => f.type); 
```

如果您希望使用`Dictionary`该类创建多地图，请尝试：

```
var dict = request.FrameList
                  .GroupBy(f => f.type)
                  .ToDictionary(g => g.Key, g => g.ToList()); 
```

请注意，在这两种情况下，`OrderBy`分组之前都是无用的，因为 Lookup 和 Dictionary 本质上是无序的集合。如果您想通过订购来完成某些事情（也许您希望按日期订购组内的物品？），请澄清，我们也许可以提供更合适的东西。

编辑：根据您的评论，看起来您需要：

```
var dict = request.FrameList
                  .GroupBy(f => f.type)
                  .ToDictionary(g => g.Key, 
                                g => g.OrderBy(f => f.trueDate)
                                      .ToList()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:35:26.807

假设您的方法签名是`IDictionary<string,IList<FrameData>>`

尝试使用下一个代码片段：

```
var dict = request.FrameList
    .OrderBy(f => f.trueDate)
    .GroupBy(f => f.type)
    .ToDictionary(f => f.Key, f => f.ToList()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:36:34.163

GroupBy 运算符返回[IGrouping](http://msdn.microsoft.com/en-us/library/bb344977.aspx)对象。这些对象具有`Key`属性。但是分组对象没有`type`属性（它的实体属性）：

```
 var dict = request.FrameList
        .OrderBy(f => f.trueDate)
        .GroupBy(f => f.type) // this selects IEnumerable<IGrouping>
        .ToDictionary(g => g.Key, g => g); 
```

注意：如果这是一个 Linq to Entities 查询，则`GroupBy`返回`IQueryable<IGrouping<TKey, TElement>>`

# .net - Visual Studio 参考项目/Dll 的

> ID：15482047
> 
> 赞同：0
> 
> 时间：2013-03-18T16:34:05.583
> 
> 标签：.net, winforms, visual-studio, architecture, reference

如果我有订单中的项目列表。

```
1\. Commons
2\. DAL
3\. BAL
4\. WebUI 
```

在上述项目中，引用应该以这种方式发生。

```
DAL refer's to Commons.
BAL refer's to DAL.
WebUI refer's to BAL. 
```

那么，为什么当我从**WebUI访问****BAL的方法时会出错，该方法返回一个在****Commons**中定义的对象。因为，在一个项目依赖中，WebUI 依赖于所有三个项目。但是为了方便起见，我不想在 WebUI 项目中包含 Common,BAL,DAL 的引用。但是我想要它应该自动包含所有依赖项目的引用（如果有的话）。

 ****任何人都可以帮助我了解如何摆脱 Visual Studio 的这种意外行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:36:36.843

如果`WebUI`使用中定义的*任何*类型，则`Commons`必须将**项目**`Commons`作为对项目的引用包含在内。即使该类型用作在项目正在使用的不同程序集（即）中声明的方法的返回类型。**`WebUI``BAL``WebUI`**

 **这个真的没办法了。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:37:41.770

在项目中引用 DLL 并不会将 DLL 的代码包含（复制）到项目中。如果`BAL`返回定义在`Commons`to中的对象`WebUI`，那么`WebUI`也需要引用 to`Commons`以便知道返回的类型。

如果您想解决这个问题，可以尝试使用[ILMerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)将程序集合并在一起，然后引用合并的程序集。我建议在软件发布期间这样做。否则，它似乎会使开发和调试变得更加繁琐。******

# php - 我的 PDO 查询对 SQL 注入安全吗

> ID：15482049
> 
> 赞同：12
> 
> 时间：2013-03-18T16:34:08.660
> 
> 标签：php, sql, pdo, sql-injection

我对 PDO 还很陌生，想知道下面的查询是否可以避免 SQL 注入。如果是这样，我将在整个站点中使用此方法。

```
 // make connection to DB
$db = new PDO('mysql:host='.$dateBaseHost.';dbname='.$dateBaseName, $dateBaseUsername, $dateBasePassword);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

//simple query and binding with results
$query = $db->prepare(" SELECT * FROM `profile` WHERE `fullname` = :fullname ");

$search = (isset($_GET['search']) === true) ? $_GET['search'] : '' ; // ? : shorthand for if else

// bind parameters - avoids SQL injection
$query->bindValue(':fullname', $search);

//try... if not catch exception
try {
    // run the query
    $query->execute();

    $rows = $query->fetchAll(PDO::FETCH_ASSOC);
    echo '<pre>', print_r($rows, true),'</pre>';
}
catch (PDOException $e){
    sendErrorMail($e->getMessage(), $e->getFile(), $e->getLine());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T16:36:04.427

是的 - 以这种方式使用时，参数化查询不会被注入。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T16:38:18.313

只要您正确使用准备好的语句，您就不会被注入。但是只要您将任何外部数据**直接**插入到查询中，即使它是一个准备好的语句，例如

```
INSERT INTO $table VALUES (:param) 
```

你很脆弱 -`$table`在这种情况下可能会被颠覆，即使你使用的是准备好的语句。

任何告诉你简单地切换 mysql->PDO 或 mysqli 会让你更安全的人是完全**错误**的。使用任何一个库，您都可能同样容易受到注入攻击。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T16:43:59.400

你还应该

```
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false); 
```

默认情况下，它使用模拟模式，它只是做的`mysql_real_escape_string`。在某些边缘情况下，您仍然容易受到 SQL 注入的攻击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:39:33.303

是的，它相当安全，但整个脚本可以改进：

```
if (isset($_GET['search']) {
    // make connection to DB
    $opt = array(
        PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
        PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
    );
    $dsn = "mysql:host=$dateBaseHost;dbname=$dateBaseName;charset=$dateBaseCharset";
    $db  = new PDO($dsn, $dateBaseUsername, $dateBasePassword, $opt);

    //simple query and binding with results
    $query = $db->prepare("SELECT * FROM profile WHERE fullname = ?");
    $query->execute(array($_GET['search']));
    $rows = $query->fetchAll();
    echo '<pre>', print_r($rows, true),'</pre>';
} 
```

*   您需要将 errmode 设置为连接选项
*   **永远不要**使用 try..catch 来处理错误信息。如果您想针对每个错误发送一封电子邮件（这太疯狂了），您必须为此进行设置`my_exception handler()`。
*   将搜索设置为空字符串没有任何意义
*   连接到 PDO 应该移动到单独的文件（未显示）
*   字符集必须在 DSN 中设置

# java - 使用 netty.io 在管道外触发请求

> ID：15482056
> 
> 赞同：1
> 
> 时间：2013-03-18T16:34:34.163
> 
> 标签：java, netty, pipelining

使用netty代理实现的正确方法是什么，但只是在管道中的一个阶段例如`

```
@Override
  public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
        Channel ch = e.getChannel();

        ChannelBuffer time = ChannelBuffers.buffer(4);
      time.writeInt((int) (System.currentTimeMillis() / 1000L + 2208988800L));

      ChannelFuture f = ch.write(time);

     f.addListener(new ChannelFutureListener() {
            public void operationComplete(ChannelFuture future) {
              Channel ch = future.getChannel();
                ch.close();
          }
        });
  }` 
```

不要使用 currentTimeMillis API 获取当前日期，而是向另一台服务器发出异步请求，获取结果，然后继续管道的下一步。提前致谢

# android - 无法正确使用 android:sharedUserId

> ID：15482059
> 
> 赞同：1
> 
> 时间：2013-03-18T16:34:36.953
> 
> 标签：android, sharedpreferences

我知道之前已经发布过类似的问题，但我相信我的确切用例还没有答案。

我有我的 Android 应用程序的试用版和完整版。当用户购买完整版时，两个版本应该共享他们的设置。一个应用程序中的更改也应该显示在另一个应用程序中。卸载一个应用程序时，应为另一个应用程序保留设置。这不是一次性导入，因为用户可能不会卸载试用版应用程序，甚至可以继续使用它。

两个应用程序使用**相同的共享用户 ID**并在**同一进程中**运行。但是，当我调用 getFilesDir() 时，返回的目录包含应用程序的包名，因此两个应用程序用于存储文件的目录不同。如何在不使用外部存储的情况下让两个应用程序使用完全相同的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:40:47.607

> 如何在不使用外部存储的情况下让两个应用程序使用完全相同的文件？

这将不符合您的目标：

> 卸载一个应用程序时，应为另一个应用程序保留设置

鉴于该目标，根据定义，您不能使用将在卸载时删除的单个文件，就像用户卸载该应用程序一样，另一个应用程序已损坏。

您的选择是：

1.  使用外部存储，特别是*不* `getExternalFilesDir()`使用or `getExternalCacheDir()`, or

2.  让每个应用程序维护自己的文件副本，使用某种机制使更改保持同步，或者

3.  切换到应用内购买，这样您就没有单独的免费/付费应用，或者

4.  放弃“两个应用程序都应该共享它们的设置”的目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:41:22.937

如果您希望在包含所有组件的进程关闭后保留这些首选项，则需要将这些首选项保存到文件或数据库中。

一个快速的方法，如果你有这个在你的控制中，就是将你的应用程序的所有 uid 更改为相同的，并使用文件 api 从文件或数据库中读取和写入。不过，使用数据库与使用内容提供者仅一步之遥……这可能是最正确的解决方案。

# java - 仅更改 TIFF 标头而不重写图像内容

> ID：15482065
> 
> 赞同：2
> 
> 时间：2013-03-18T16:35:01.997
> 
> 标签：java, header, tiff, overwrite, jai

我正在使用 JAI 读取/写入包含不同类型图像（不同大小、不同压缩方法）的多页 TIFF，我必须读取文件，更改页面 TIFF 标头中的一些值并将这些标头写回而不更改图像内容/压缩。

虽然我能够读取所有页面和标题，修改标题并重新编写整个 TIFF，但我担心重新压缩所需的时间，特别是当“主”图像已经是 JPEG 压缩时，多次读/写会丢失越来越多的数据。

我已经想到了两件事：

1.  编写特定的标题内容以标记文件中的位置并破解它以更改
2.  [在 C libtiff](http://www.remotesensing.org/libtiff/libtiff.html)之上编写一个 JNI 包装器（但我宁愿不这样做）

如果可能的话，我宁愿用 JAI 来做这一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T15:08:38.983

我找不到任何合适的方法，除了手动读取文件，将图像数据重写为已读取并通过 TIFF 字段位置/偏移量进行修补......

# image - WooCommerce - 如何在产品循环中阻止小产品图片使大产品图片相形见绌？

> ID：15482066
> 
> 赞同：1
> 
> 时间：2013-03-18T16:35:06.817
> 
> 标签：image, loops, overriding, product, woocommerce

目前，我的特色图片正在产品循环中使用（默认情况下）。

问题是，因为所有产品图像都被调整为固定尺寸（为了更好的布局），较小产品的图像实际上使较大产品的图像相形见绌。

除非有人有更好的建议，否则我决定解决此问题的一种方法是在产品循环中使用不同的产品图像。这样，我可以在较小的产品图像上方添加一个空白区域，这样它们在调整大小时就不会使其他产品相形见绌。（注意 - 我不能只将此编辑后的图像设置为特色图像，因为我不希望此空白区域显示在灯箱中。）

那么，首先，这是解决我的问题的最佳方法吗？如果是这样，那么指定要在产品循环中使用的自定义图像的最佳方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T13:57:47.213

这是我想出的解决这个问题的功能。它需要放在您的functions.php 文件中。用法见函数注释...

```
/**
 * This function is used to display a custom image in the shop page if a custom
 * image exists for the product. This may be required, for example, to prevent
 * images of small products dwarfing images of larger products on the shop page.
 * 
 * To set a custom image for a product, create a custom field for it (in the
 * Edit Product page) called custom_product_thumbnail_url . (The image that you
 * specify can contain additional white space to prevent it being enlarged.)
 * 
 * This function overrides the function of the same name in WooCommerce's
 * woocommerce-template.php file.
 *
 * @access public
 * @subpackage  Loop
 * @param string $size (default: 'shop_catalog')
 * @param int $placeholder_width (default: 0)
 * @param int $placeholder_height (default: 0)
 * @return string
 */
function woocommerce_get_product_thumbnail( $size = 'shop_catalog', $placeholder_width = 0, $placeholder_height = 0  ) {

    global $post, $woocommerce;

    if ( ! $placeholder_width )
            $placeholder_width = $woocommerce->get_image_size( 'shop_catalog_image_width' );
    if ( ! $placeholder_height )
            $placeholder_height = $woocommerce->get_image_size( 'shop_catalog_image_height' );

    $imgSrc = get_post_meta($post->ID, 'custom_product_thumbnail_url', true);
    if ($imgSrc)
            return '<img src="'. $imgSrc .'" alt="' . get_the_title($post->ID) . '" width="' . $placeholder_width . '" height="' . $placeholder_height . '" />';
    if ( has_post_thumbnail() )
            return get_the_post_thumbnail( $post->ID, $size );
    elseif ( woocommerce_placeholder_img_src() )
            return '<img src="'. woocommerce_placeholder_img_src() .'" alt="Placeholder" width="' . $placeholder_width . '" height="' . $placeholder_height . '" />';

} 
```

# css - 固定位置 div 在 iOS6 Safari 上显示为透明

> ID：15482067
> 
> 赞同：2
> 
> 时间：2013-03-18T16:35:07.890
> 
> 标签：css, position, positioning, fixed, css-position

我目前有一个 div 在以手机分辨率显示时会更改为页面底部的固定位置，并且应该显示作者内容。单击此 div 时，菜单会使用 jquery 向上滑动。此时，div 显示为透明的，但是当点击 div 应该在的位置时，它会像应该的那样滑动打开菜单。

我不确定发生了什么，但我所做的所有调试都没有导致任何结果。有没有其他人经历过这个，或者知道如何解决它？

这是该片段的 HTML/CSS：

```
<div id="secondaryBox" class="span6 pull-right">
                    <div id="author" class="collapsed">
                        <?php if(!empty($user['avatarPath'])){?>
                            <img src="<?php echo $user['avatarPath'] ?>" class="avatar avatar-50 photo avatar-default" height="50" width="50" />
                        <?php }else{
                            echo get_avatar( $current_user, 50); 
                        } ?>
                        <h5><?php echo $user['displayName']; ?></h5>
                        <h6><span class="hidden-phone"><?php echo get_current_user_role($user['role']) ?>, </span><?php echo $user['schoolName']; ?></h6>
                        <div id="phoneCaret" class="circleCaret visible-phone"><b class="caret"></b></div>
                    </div>
                    <?php if ( current_user_can('read') ) { ?>
                    <div id="hiddenMenu">
                        <div class="addMenu hidden-phone collapsed">
                            <span>Additional Options </span>
                            <div class="circleCaret"><b class="caret"></b></div>
                        </div>
                        <ul id="slideOutMenu">
                            <?php if ( current_user_can('add_users') ) { ?>
                                <li><a href="/wp-admin/admin.php?page=users"><i class="icon-th-list icon-white"></i> Manage Users</a></li>
                                <?php if(is_super_admin($current_user->ID)){?>
                                <li><a href="/wp-admin/admin.php?page=import"><i class="icon-th-list icon-white"></i> Export Users</a></li>
                                <?php }?>
                                <li class="divider"></li>
                            <?php } 
                            if ( current_user_can('manage_categories') ) { ?>
                                <li><a href="<?php $networkURL ?>/wp-admin/network/sites.php"><i class="icon-plus icon-white"></i> Create School</a></li>
                                <li><a href="/wp-admin/edit-tags.php?taxonomy=category"><i class="icon-tags icon-white"></i> Manage Categories</a></li>
                                <li><a href="/wp-admin/admin.php?page=school_settings"><i class="icon-edit icon-white"></i> School Settings</a></li>
                                <li class="divider"></li>
                            <?php }
                            if ( current_user_can('manage_network_options') ) { ?>
                                <li><a href="/wp-admin/network/sites.php"><i class="icon-globe icon-white"></i> Network Sites</a></li>
                                <li><a href="/wp-admin/options-general.php"><i class="icon-wrench icon-white"></i> Settings</a></li>
                                <li><a href="/wp-admin/admin.php?page=wpengine-common"><i class="icon-cog icon-white"></i> WP Engine Settings</a></li>
                                <li><a href="/wp-admin/options-general.php?page=limit-login-attempts"><i class="icon-wrench icon-white"></i> Login Attempts</a></li>
                                <li class="divider"></li>
                            <?php } ?>
                            <li><a href="/wp-admin/admin.php?page=dashboard"><i class="icon-home icon-white"></i> My Dashboard</a></li>
                            <li><a href="<?php echo network_site_url(); ?>"><i class="icon-globe icon-white"></i> Dewsly.com</a></li>
                            <li><a href="/wp-admin/admin.php?page=profile"><i class="icon-user icon-white"></i> My Profile</a></li>
                            <li><a target="_blank" href="http://support.dewsly.com"><i class="icon-question-sign icon-white"></i> Support</a></li>
                            <li><a onclick="return confirm(\'Do you really want to logout?\')" href="<?php echo get_site_url(1); ?>/?my_error=logout"><i class="icon-off icon-white"></i> Logout</a></li>
                        </ul>
                    </div>
                    <?php } ?>
                </div> 
```

CSS：

```
#author{
        position:fixed;
        bottom:0;
        left:0;
        width:100%;
        background-color:#212121;
        height:70px;
        z-index: 1001;
        overflow:hidden;
        cursor:hand;
        padding:10px;
        border-top:1px solid #595555;
    }
#secondaryBox {
        height: 0px;
        position:fixed;
        bottom:70px;
        width:100%;
        overflow:auto !important;
        left:0;
        z-index: 100;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:29:56.980

After quite a bit more reading the issue was having a fixed position div within a scrolling div. The information given in the comments of the post linked from here gave me the guidance. Although that is frustrating, at least I know how to resolve the issue now.

[http://remysharp.com/2012/05/24/issues-with-position-fixed-scrolling-on-ios/](http://remysharp.com/2012/05/24/issues-with-position-fixed-scrolling-on-ios/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T23:58:02.777

丑陋但可行的解决方案；

```
setTimeout(function() {
        $("#fixedElement").css("right", "373px");
    }, 100); 
```

我不知道为什么，在您更改/设置元素的位置后，它再次变得可见。

# unicode - UTF-8 中 pg_dump 的 STDERR

> ID：15482071
> 
> 赞同：0
> 
> 时间：2013-03-18T16:35:15.323
> 
> 标签：unicode, command-line, utf-8, stderr, pg-dump

我将 pg_dump 的标准错误重定向到文件：

```
pg_dump ...... 2>pg_dump.log 
```

但这个文件是 ANSI 编码的。我想在 UTF-8 或 Unicode 中看到它。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T02:21:43.687

[人 pg_dump](http://www.postgresql.org/docs/9.2/static/app-pgdump.html)

```
-E encoding
--encoding=encoding
Create the dump in the specified character set encoding. By default, the dump is created in the database encoding. 
```

顺便说一句：关于“UTF-8 或 Unicode”，“或”没有意义；UTF-8 是 Unicode 的编码之一（其他是 UTF-16）

更新：对不起，我误解了你的问题。您是否对 Postresql 生成的文本错误消息或来自您自己数据的某些查询/数据的文本感兴趣？如果是前者，我认为 LC_MESSAGES 设置应该可以工作[http://www.postgresql.org/docs/9.2/interactive/locale.html](http://www.postgresql.org/docs/9.2/interactive/locale.html) 在其他地方，你总是可以使用[iconv](http://linux.die.net/man/1/iconv)

# powershell - 如何在powershell中提示用户处理xml文件？

> ID：15482076
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:35:28.607
> 
> 标签：powershell, active-directory

我对powershell很陌生，我有一个需要处理的xml文件，其中包含一堆这样的行：

```
<root>
  <userManagement>
    <user><account>Chico</account>
    <firstname>Leonard</firstname>
    <lastname>Marx</lastname>
    <description>Pianist</description>
    <password>Password1</password>
    <manager/>
    <ou>comedians</ou>
    <memberOf>
    <group>MBrothers</group>
    <group>GGMusicians</group>
    </memberOf>
    </user>... 
```

我需要能够提示用户在命令行输入文件名。我如何在脚本中编写它？（显然会有更多，但我一次只工作一步）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:53:17.950

如果用户有 Powershell V3，你可以这样做"

```
$XML_filpath = 'c:\XMLfiles'

$XML_file=
Get-ChildItem $XML_filpath\*.xml |
select Name |
Out-GridView -Title 'Select XML file to process' -OutputMode Single 

[xml]$xml = gc "$XML_filpath\$($XML_file.name)" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:42:28.910

像这样

```
$filename = read-host "Insert file name to process"

[xml]$xml = gc $filename 
```

# c# - 服务器在 ASP.NET 中发起客户端响应

> ID：15482084
> 
> 赞同：0
> 
> 时间：2013-03-18T16:35:46.113
> 
> 标签：c#, asp.net

我有一个 ASP.NET 应用程序，它有一个表单，它发送它的信息以供后端服务器处理。虽然服务器有时需要将信息发送回前端客户端页面以进行确认。我希望服务器线程坐下来等待客户端响应，然后在收到来自客户端的确认后继续。

我已经研究过使用 ICallbackEventHandler ，但它不会像我当前的设计所需要的那样保持会话。

关于我需要如何调整设计或实现我正在寻找的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:40:14.813

如果您想避免完整的回发，您可以使用[SignalR 之](http://signalr.net/)类的技术从服务器调用客户端上的 javascript 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:41:36.010

你可以使用`Ajax Developpement`，例如你可以使用`UpdatePanel control` 基于`Triggers`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.updatepanel.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.updatepanel.aspx)

在您的具体情况下，您可以使用`Update Method`

链接：http : [//msdn.microsoft.com/fr-fr/library/system.web.ui.updatepanel.update.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.updatepanel.update.aspx)

# c# - Threading.Timer 在控制台应用程序中停止

> ID：15482093
> 
> 赞同：2
> 
> 时间：2013-03-18T16:36:05.897
> 
> 标签：c#, .net, console

我正在使用包含 ID 作为键和队列作为值的字典。我有一个线程写入队列，另一个线程读取队列，所以我需要使用 .NET 4.0 中引入的并发结构。作为其中的一部分，我尝试编写一个测试应用程序来填充队列，但我遇到了一个问题，即计时器在大约 10 秒后停止。我真的不明白为什么，因为没有什么可捕获的，没有错误消息或任何提示我可能出现的问题。

那么有人可以向我解释为什么计时器在大约 10 秒后停止吗？我已经在两台不同的计算机上尝试过这个（都使用 Visual Studio 2012，但使用 .NET Framework 4.0）。

```
class Program {

    private readonly ConcurrentDictionary<int, ConcurrentQueue<TestObject>> _pipes = 
        new ConcurrentDictionary<int, ConcurrentQueue<TestObject>>();

    static void Main() {
        Program program = new Program();
        program.Run();
        Console.Read();
    }

    private void Run() {
        _pipes[100] = new ConcurrentQueue<TestObject>();
        _pipes[200] = new ConcurrentQueue<TestObject>();
        _pipes[300] = new ConcurrentQueue<TestObject>();

        Timer timer = new Timer(WriteStuff, null, 0, 100);
    }

    private void WriteStuff(object sender) {
        for (int i = 0; i < 5; i++) {
            foreach (KeyValuePair<int, ConcurrentQueue<TestObject>> pipe in _pipes) {
                pipe.Value.Enqueue(
                    new TestObject { Name = DateTime.Now.ToString("o") + "-" + i });
            }
            i++;
        }
        Console.WriteLine(DateTime.Now + "added stuff");
    }
}

internal class TestObject {
    public string Name { get; set; }
    public bool Sent { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:48:48.497

最有可能的是，计时器超出范围并被收集。在外部范围声明计时器。那是：

```
private Timer timer;
private void Run()
{
    ...
    timer = new Timer(WriteStuff, null, 0, 100);
} 
```

另外，我认为您会发现它[`BlockingCollection`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)比`ConcurrentQueue`. `BlockingCollection`围绕并发集合包装了一个非常好的 API，使得在删除事物时更容易在队列上进行非忙等待。在其默认配置中，它使用 a`ConcurrentQueue`作为后备存储。使用它所需要做的就是`ConcurrentQueue`在代码中替换为`BlockingCollection`，然后从调用更改`Enqueue`为调用`Add`。如：

```
for (int i = 0; i < 5; i++)
{
    foreach (var pipe in _pipes)
    {
        pipe.Value.Add(
            new TestObject { Name = DateTime.Now.ToString("o") + "-" + i });
    }
} 
```

# list - 一个列表上有多个功能？

> ID：15482095
> 
> 赞同：0
> 
> 时间：2013-03-18T16:36:13.257
> 
> 标签：list, haskell

我有一个清单

```
[1,1,1,1,1] 
```

我正在尝试编写将返回列表的函数

```
[2,3,4,5,6] 
```

我想像这样使用功能图

```
map (+1) [1,1,1,1,1] 
```

这将返回

```
[2,2,2,2,2] 
```

之后我想在返回列表的最后四个元素上调用 map 函数，所以在我得到 [2,2,2,2,2] 之后我想在最后四个 [2,2,2,2] 上使用 map 将返回[3,3,3,3] 并替换第一次地图调用的最后四个元素，所以我得到 [2,3,3,3,3] 等。

```
map (+1)[1,1,1,1,1] 
map (+1)  [2,2,2,2] 
map (+1)    [3,3,3] 
map (+1)      [4,4] 
map (+1)        [5] 
```

回来：

```
[2,2,2,2,2]
[2,3,3,3,3] 
[2,3,4,4,4]
[2,3,4,5,5]
[2,3,4,5,6] 
```

我只需要返回最后一个列表...顺便说一句，这只是简化版本，原来我有列表列表...我只是不知道如何调用我描述的函数..谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T16:55:49.810

我想你想要类似的东西

```
mapTails f [] = []
mapTails f (x:xs) = f x : mapTails f (map f xs) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T17:26:10.760

IMO 最优雅的方式是

```
zipWith($) $ iterate((+1).) id 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T16:54:27.987

`scanl` *几乎*可以满足您的要求：

```
Prelude> scanl (+) 1 [1,1,1,1,1]
[1,2,3,4,5,6] 
```

您可以删除第一项，它只是我们传入的初始状态值：

```
Prelude> tail $ scanl (+) 1 [1,1,1,1,1]
[2,3,4,5,6] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T16:56:42.217

您可以使用递归函数来完成您正在寻找的东西，而不是：

```
myFn :: Num a => [a] -> [a]
myFn []     = []
myFn (x:xs) = x + 1 : (myFn $ map (+1) xs)

main = print $ myFn [1,1,1,1,1]  -- Prints [2,3,4,5,6] 
```

见[http://codepad.org/wBwynlGt](http://codepad.org/wBwynlGt)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T16:55:01.957

您的算法版本 O(n ² ) 时间：

```
plusSlow :: [Int] -> [Int]
plusSlow [] = []
plusSlow (x:xs) = (head mapped):(plusSlow $ tail mapped)
                 where mapped = map (+1) (x:xs) 
```

更快的版本 O(n) 时间：

```
plusFast :: [Int] -> [Int]
plusFast x = pf x 1

pf :: [Int] -> Int -> [Int]
pf [] _ = []
pf (x:xs) n = (x+n):(pf xs (n+1)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T16:50:00.923

这样的事情会做你想要的吗？

```
startList = [1,1,1,1] -- orwhatever you want it to be 
map (\(x,i) -> x + i) $ zip startList [1..] 
```

`zip`基本上将列表中的每个元素与您要添加到其中的内容配对，然后 map 函数将列表中的每个元素添加到该值以获得您想要的结果 。

# python - 如何使用调试器生成跟踪文件？

> ID：15482097
> 
> 赞同：0
> 
> 时间：2013-03-18T16:36:18.780
> 
> 标签：python, debugging, trace, instrumentation

我的工作是检测 python 应用程序，使其生成包含必要动态信息的跟踪文件。我正在使用 python 脚本来检测源代码。我通过在源代码中插入大量语句并连续生成跟踪文件来实现。

我的问题是，有没有办法使用调试器来生成跟踪文件？

如果是这样，谁能给我一个例子，说明在调试期间如何在任何函数中插入打印语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T13:14:18.800

为此，您可以使用 Python 跟踪模块。它显示所有正在运行的代码

[从代码中的某个点跟踪所有语句](https://stackoverflow.com/questions/20706614/trace-all-statements-from-a-point-in-code)

您也可以插入打印语句，但是您必须记住事后清理它们。逗号分隔您要打印的参数。

```
print 'logpoint 1, vals: ', vals 
```

# c# - 使用应用程序浏览网站

> ID：15482101
> 
> 赞同：0
> 
> 时间：2013-03-18T16:36:25.410
> 
> 标签：c#, selenium, automation, webpage

我正在寻找一个 C# 应用程序来为我自动化一些流程。其中之一是浏览我经常访问的几个网站，例如grooveshark。我希望我的应用程序能够让我登录网站并搜索/播放歌曲。

我已经对该主题进行了一些谷歌搜索，并遇到了一种叫做硒的东西。我想知道这是否是我想要完成的最佳工具，或者是否有其他选择更适合我的需求？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:47:54.050

为了使您的流程自动化，您可以使用`Microsoft Test Manager`who is tool about`testing and generating code`

例如，在 Microsoft Test Manager 2012 上，您有新的功能，例如`Exploratory Test`，您探索应用程序并生成测试的过程。

链接：http: [//msdn.microsoft.com/en-us/library/vstudio/hh191621.aspx](http://msdn.microsoft.com/en-us/library/vstudio/hh191621.aspx)

创建测试后，您可以生成 Coded UI Test 并包含在构建过​​程中

注意：您必须使用 Team Foundation Server 或 Service 才能与 Test Case WorkItem 交互

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:43:25.903

Selenium 会很好，除非网站使用 Flash。如果他们这样做了，那么你几乎被困住了。

[https://code.google.com/p/selenium/](https://code.google.com/p/selenium/)

[http://selenium.googlecode.com/git/docs/api/dotnet/index.html](http://selenium.googlecode.com/git/docs/api/dotnet/index.html)

[http://docs.seleniumhq.org/docs/03_webdriver.jsp](http://docs.seleniumhq.org/docs/03_webdriver.jsp)

我会阅读 Selenium 并在您遇到特定问题时回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:46:14.633

如果您有 Visual Studio Premium 或更高版本，我建议您使用 Coded UI。我还建议 CUITe [http://cuite.codeplex.com/](http://cuite.codeplex.com/)因为它简化了代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:50:30.483

这绝对取决于您的自动化将能够做什么。我根本不知道*硒*。我认为这是为了按特定顺序记录网站上的某些操作。尽管您只能在网站（实际客户端）功能提供的范围内自动化该过程。

如果您想构建一些客户尚未提供的不同、更高级的行为，您需要构建自己的客户端。那需要一些反向工程。例如自动化浏览器游戏就是这种情况。通常，浏览器游戏客户端不提供扫描一定数量的玩家并自动将它们与您自己的玩家资料进行比较，因此您自己构建此功能将是唯一可能的解决方案。

# android - Android中小时变化的回调方法

> ID：15482102
> 
> 赞同：-2
> 
> 时间：2013-03-18T16:36:25.703
> 
> 标签：android

我想创建一个响应时间变化的动态壁纸，如果时间是 18:00 它应该更改为夜间壁纸。是否有任何回调方法来检查时间变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:49:45.390

在 Android 中安排一个循环任务，并将初始延迟设置为当前时间和 18:00 小时之间的时间差。要了解调度重复任务，请查看此线程 -[在 Android 中调度重复任务](https://stackoverflow.com/questions/14376470/scheduling-recurring-task-in-android)

我建议你使用一个`AlarmManager`. 看一下[类里面与调度相关的方法](http://developer.android.com/reference/android/app/AlarmManager.html#setInexactRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:01:00.703

你可以使用 AlarmManager 来设置一个挂起的意图在你想要的任何时候被触发。然后，您可以在广播接收器中获取意图并更新您的壁纸。

# .htaccess - 删除 html 扩展名并在所有目录上的文件中添加斜杠而不影响内部 url

> ID：15482106
> 
> 赞同：0
> 
> 时间：2013-03-18T16:36:40.763
> 
> 标签：.htaccess, mod-rewrite, redirect, trailing-slash, canonicalization

我正在使用下面的代码将 index.html 和非 www 版本的 URL 重定向到 www。它还从文件中删除 *.html 扩展名。现在，我想在所有目录的文件末尾**添加一个斜杠。**以下是我想要获得的示例：

*   www.mydomain.com.au/contact.html 转到 www.mydomain.com.au/contact/
*   www.mydomain.com.au/contact 转到 www.mydomain.com.au/contact/
*   www.mydomain.com.au/glass-replacement/Brisbane.html 转到 /glass-replacement/Brisbane/

等等……

```
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^.*\/index\.html\ HTTP/
RewriteRule ^(.*)index\.html$ /$1 [R=301,L]
RewriteCond %{http_host} ^mydomain.com.au$ [nc]
RewriteRule ^(.*)$ http://www.mydomain.com.au/$1 [r=301,nc,L]

RewriteCond %{THE_REQUEST} \ /(.+/)?index(\.html)?(\?.*)?\  [NC]
RewriteRule ^(.+/)?index(\.html)?$ /%1 [R=301,L]
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule ^(.+)\.html$ /$1 [R=301,L]
RewriteCond %{SCRIPT_FILENAME}.html -f
RewriteRule [^/]$ %{REQUEST_URI}.html [QSA,L] 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:55:29.470

尝试这个：

```
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^.*\/index\.html\ HTTP/
RewriteRule ^(.*)index\.html$ /$1 [R=301,L]
RewriteCond %{http_host} ^glassnow.com.au$ [nc]
RewriteRule ^(.*)$ http://www.glassnow.com.au/$1 [r=301,nc,L]

RewriteCond %{THE_REQUEST} \ /(.+/)?index(\.html)?(\?.*)?\  [NC]
RewriteRule ^(.+/)?index(\.html)?$ /%1 [R=301,L]
RewriteCond %{ENV:REDIRECT_STATUS} ^$
RewriteRule ^(.+)\.html$ /$1 [R=301,L]
RewriteCond %{SCRIPT_FILENAME}.html -f
RewriteRule [^/]$ %{REQUEST_URI}.html [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ http://www.glassnow.com.au/$1/ [R=301,L] 
```

# asp.net - 来自下拉列表的 Gridview SQL LIKE

> ID：15482108
> 
> 赞同：0
> 
> 时间：2013-03-18T16:36:46.817
> 
> 标签：asp.net, gridview

我有一个`textbox`,`dropdownlist`和一个绑定到 gridview 的 SQL 语句。

如何在子句`dropdownlist`之后将值添加到 SQL 语句`WHERE`？

我尝试了以下方法，但没有显示任何数据。

```
"SELECT FirstName, LastName FROM tblPerson WHERE '" & ddlSearch.SelectedValue & "' LIKE '%" & txtSearch.Text & "%' ORDER BY FirstName 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:43:25.763

您在查询中缺少列名，所以试试这个

```
string query = "SELECT FirstName, LastName FROM tblPerson
                WHERE  myDDLColumn like '% " + ddlSearch.SelectedValue + "'%'" + "and 
                myTextBoxColumn like '%" + txtSearch.Text + "'%'"; 
```

**编辑**：如果您的下拉列表包含列名作为下拉项目的值，那么您可以将其写为：

```
string query = "SELECT FirstName, LastName FROM tblPerson WHERE "+
                ddlSearch.SelectedValue+" like '%" + txtSearch.Text + "'%'"; 
```

# r - 在 R 中的情节图例中有小节？

> ID：15482113
> 
> 赞同：4
> 
> 时间：2013-03-18T16:36:54.133
> 
> 标签：r, formatting, plot, legend

我生成以下图例：

```
legend(
  "bottomleft"
  , legend=c(
    expression(bold("Long:" ~ (w==10^2 ~ ";" ~ h==10^5)))
    , expression(q[c] == 0.00 ~ ";" ~ beta == 0)
    , expression(q[c] == 0.05 ~ ";" ~ beta == 2)
    , expression(q[c] == 0.10 ~ ";" ~ beta == 10)
    , expression(q[c] == 0.20 ~ ";" ~ beta == 10)
    , expression(q[c] == 0.40 ~ ";" ~ beta == 10)
    , expression(bold("Wide:" ~ (w==10^3 ~ ";" ~ h==10^3)))
    , expression(q[c] == 0.00 ~ ";" ~ beta == 0)
    , expression(q[c] == 0.05 ~ ";" ~ beta == 2)
    , expression(q[c] == 0.10 ~ ";" ~ beta == 10)
    , expression(q[c] == 0.20 ~ ";" ~ beta == 10)
    , expression(q[c] == 0.40 ~ ";" ~ beta == 10)
  )
  , col=c("n", 1, 2, 3, 4, 5, -1, 1, 2, 3, 4, 5)
  , lty=c(F, 1, 1, 1, 1, 1, -1, 2, 2, 2, 2, 2)
  , cex=.65
) 
```

这给了我：

![在此处输入图像描述](../Images/25dfc5560a185530f5273797c79efdf5.png)

有一个标题会更好，它也跨越“线+点”样本区域：

![在此处输入图像描述](../Images/e418f4863cdaa18dee20d5d007505cee.png)

我怎么能意识到这一点？（例如，我尝试设置`n`或`FALSE`在 lty 部分中，但这不起作用，...）。我也未能对齐`qc`和 -`beta`值，但那是另一回事，......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:07:35.263

使用`@DWin`提出的解决方法：

设置示例图：

```
plot(1:10,type="n") 
```

保存图例并`phantom`隐藏要手动编写的标题

```
saveleg <- legend(
  "bottomleft"
  , legend=c(
      expression(phantom(bold("Long:" ~ (w==10^2 ~ ";" ~ h==10^5))))
    , expression(q[c] == 0.00 ~ ";" ~ beta == 0)
    , expression(q[c] == 0.05 ~ ";" ~ beta == 2)
    , expression(q[c] == 0.10 ~ ";" ~ beta == 10)
    , expression(q[c] == 0.20 ~ ";" ~ beta == 10)
    , expression(q[c] == 0.40 ~ ";" ~ beta == 10)
    , expression(phantom(bold("Wide:" ~ (w==10^3 ~ ";" ~ h==10^3))))
    , expression(q[c] == 0.00 ~ ";" ~ beta == 0)
    , expression(q[c] == 0.05 ~ ";" ~ beta == 2)
    , expression(q[c] == 0.10 ~ ";" ~ beta == 10)
    , expression(q[c] == 0.20 ~ ";" ~ beta == 10)
    , expression(q[c] == 0.40 ~ ";" ~ beta == 10)
  )
  , col=c("n", 1, 2, 3, 4, 5, -1, 1, 2, 3, 4, 5)
  , lty=c(F, 1, 1, 1, 1, 1, -1, 2, 2, 2, 2, 2)
  , cex=.65
  , trace=TRUE
) 
```

`text`然后使用新指定的 x 轴值从保存的图例中获取要重新绘制的两位的 y轴值。

```
text(
    c(0.6,0.6),
    saveleg$text$y[c(1,7)],
    c(
      expression(bold("Long:" ~ (w==10^2 ~ ";" ~ h==10^5))),
      expression(bold("Wide:" ~ (w==10^3 ~ ";" ~ h==10^3)))
     ),
    cex=0.65,
    pos=4
) 
```

结果：

![在此处输入图像描述](../Images/f4d698600da91ee57698cd7e74a70649.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T00:26:31.043

类似的方法，但使用`legend`标题，并在之后添加矩形（框）之前创建两个图例（没有框）

```
plot(1)
# legend 1
l1 <- legend(
  "topleft"
  , legend=c(expression(q[c] == 0.00 ~ ";" ~ beta == 0)
    , expression(q[c] == 0.05 ~ ";" ~ beta == 2)
    , expression(q[c] == 0.10 ~ ";" ~ beta == 10)
    , expression(q[c] == 0.20 ~ ";" ~ beta == 10)
    , expression(q[c] == 0.40 ~ ";" ~ beta == 10)),
  title = expression(bold("Long:" ~ (w==10^2 ~ ";" ~ h==10^5))),
  , col=c( 1, 2, 3, 4, 5)
  , lty=c(1, 1, 1, 1, 1)
  , cex=.65,
   bty='n')
# legend 2, placed directly below legend 1
l2 <- legend(x = l1$rect$left, y = with(l1$rect, top - h),
             legend =c(expression(q[c] == 0.00 ~ ";" ~ beta == 0)
                       , expression(q[c] == 0.05 ~ ";" ~ beta == 2)
                       , expression(q[c] == 0.10 ~ ";" ~ beta == 10)
                       , expression(q[c] == 0.20 ~ ";" ~ beta == 10)
                       , expression(q[c] == 0.40 ~ ";" ~ beta == 10)),
             title = expression(bold("Wide:" ~ (w==10^3 ~ ";" ~ h==10^3))),
              col=c( 1, 2, 3, 4, 5)
             , lty=c(  2, 2, 2, 2, 2)
             , cex=.65,
             bty='n')
# add the rectangle around the legend
rect(xleft = l1$rect$left, ybottom = with(l2$rect, top - h), 
     xright = l1$rect$left + max(l1$rect$w, l1$rect$w), ytop = l1$rect$top) 
```

![在此处输入图像描述](../Images/bc8d7d31b49b7aec8c05f3bdc76bdf72.png)

# c# - 通过 Rfc2898DeriveBytes 的密码哈希 - 传递给 getBytes 的内容

> ID：15482114
> 
> 赞同：9
> 
> 时间：2013-03-18T16:36:57.250
> 
> 标签：c#, .net, hash, pkcs#5, rfc2898

我正在使用 Rfc2898DeriveBytes 来散列密码。

但是，我不确定将什么传递给需要 int 的 GetBytes 方法。

我应该传递什么价值，为什么？

```
 Rfc2898DeriveBytes hasher = new Rfc2898DeriveBytes(password, System.Text.Encoding.Default.GetBytes(salt), PasswordHasher.Iterations);
      return Convert.ToBase64String(hasher.GetBytes(100)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T17:22:04.963

如[http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.getbytes.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.getbytes.aspx)中所述，GetBytes 的参数是您希望 GetBytes 方法为您生成的字节数。如果您想要 5 个字节，则传递 5。如果您想要 500，则传递 500。您要求的字节数通常取决于您要生成的密钥（或其他加密输入）的预期用途所需的字节数。

为了更好地理解输出，请尝试运行以下命令行应用程序：

```
internal static class Program
{
    private static void Main()
    {
        var deriver = new Rfc2898DeriveBytes("apples and oranges", 100, 20);
        Program.WriteArray(deriver, 5);
        Program.WriteArray(deriver, 10);
        Program.WriteArray(deriver, 20);

        Console.ReadLine();
    }

    private static void WriteArray(Rfc2898DeriveBytes source, int count)
    {
        source.Reset();
        Console.WriteLine(string.Join(" ", source.GetBytes(count).Select(b => b.ToString())));
    }
} 
```

输出应如下所示：

```
208 194 113 91 125
208 194 113 91 125 157 138 234 20 151
208 194 113 91 125 157 138 234 20 151 159 151 23 94 11 210 38 101 186 143 
```

本质上，您将获得一个一致的字节列表（基于密码、盐和迭代），无论您选择什么长度。您可以随时从相同的输入重新生成完全相同的字节列表。

# json - 如何在列数未知时创建由 JSON 填充的 DataTable

> ID：15482119
> 
> 赞同：1
> 
> 时间：2013-03-18T16:37:20.087
> 
> 标签：json, asp.net-mvc-3

我的网络应用程序中有一个表，它是这样创建的：

```
<table id="mygrid">
    <thead>
        <th>Col1</th>
        <th>Col2</th>
        <th>Col3</th>
    </thead>
</table>
<script type="text/javascript">
    $(document).ready(function() {
        window.oTable = $("#mygrid").dataTable({
            "bServerSide": true,
            "bSort": false,
            "sAjaxSource": "@Url.Action("MyFunction", "Events")",
            "fnServerParams": function(aoData) {
                aoData.push({ name: "arg1", value: "@Model.arg1" });
            },
            "aoColumns": [
                { "mDataProp": "Column1" },
                { "mDataProp": "Column2" },
                { "mDataProp": "Column3" }
            ],
            "bJQueryUI": true,
            "sPaginationType": "full_numbers",
            "bProcessing": false
        }); 
```

我用返回 JSON 结果的函数填充它，如下所示：

```
ActionResult MyFunction(string arg1, ...)
{
    List<string> someList = ...;
    object array = eventsList.Select(str => new
    {
        Column1 = str + "1",
        Column2 = str + "2",
        Column3 = str + "3"
    });

    var result = new
    {
        sEcho = ...,
        iTotalRecords = ...,
        iTotalDisplayRecords = ...,
        aaData = array
    };

    return Json(result, JsonRequestBehavior.AllowGet);
} 
```

现在我想动态生成表，所以我不知道设计时的列数。例如：

```
<table id="mygrid"><thead>
    @{
        foreach (string col in colNames)
            <th>@col</th>
    }
</thead></table> 
```

您能否建议我应该如何更改我的 Javascript 和 C# 代码以类似的方式填充表格？是否可以？我可以`"mDataProp"`像生成列一样在 Javascript 代码中生成行，但是如何在 C# 代码中创建 JSON 结果？

**添加：**

我已经解决了控制器的问题。正如我所发现的，字典列表被序列化为与匿名对象列表完全相同的 JSON，所以我写了这个：

```
for (int i = 0; i < n; ++i)
{
    list.Add(new Dictionary<string, string>());
    foreach (int colName in colNames) events[i][colName] = cellValue;
}
var result = new 
{
    ...,
    aaData = list
};
return Json(result, JsonRequestBehavior.AllowGet); 
```

现在我有新问题。我无法像在 HTML 代码中生成标签一样使用 C# 循环生成“aoColumns”数组。我试过这样：

```
"aoColumns": [
    @{
        for (int i = 0; i < n; ++i)
        {
            string colName = "Column" + i.ToString();
            { "mDataProp": "@colName" },
        }
    }
], 
```

但它不起作用。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:46:39.700

DataTables 不允许动态更改列，但您可以在数据之前获取列并在其回调函数上加载数据表...

```
$.ajax('url/columns', function(data){

   //write table header

var options =   
"bProcessing": true, 
"bServerSide": true, 
"sAjaxSource": getGridDataUrl, 
"iDisplayLength": 10,
"aoColumns": //column settingssss
};
    $('#myDataTable').dataTable(options);

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:01:20.670

我解决了我的问题。生成 JavaScript 比我想象的要容易。问题是，当我将 aoColumns 数组生成为 C# 字符串，然后将其分配给“aoColumns”属性时，如下所示：

```
"aoColumns": [
    @propertyStr
], 
```

编译器以某种方式隐藏了引号和大括号。正确的方法是这样做：

```
"aoColumns": [
    @Html.Raw(propertyStr)
], 
```

# html - 水平和垂直对齐 DIV - CSS

> ID：15482123
> 
> 赞同：1
> 
> 时间：2013-03-18T16:37:30.763
> 
> 标签：html, css, alignment

我为我的网页设置了以下内容：

HTML：

```
<div id="headercontent">
    <div id="topnav"></div>
    <div id="dailycalendar"></div>
    <div id="headerimage"></div>
</div> 
```

CSS：

```
#headercontent { width: 990px; height: 162px; position: relative; margin: 0 0 0 0; vertical-align: top; padding: 0px; }
#topnav { float: left; width: 720px; height: 50px; }
#dailycalendar { float: left; width: 720px; height: 112px; }
#headerimage { float: right; width: 270px; } 
```

我希望`div`使用 CSS 和跨浏览器功能按以下顺序排列标签：

```
----------------- ----------------
-    topnav     - -              -
----------------- -  headerimage -
----------------- -              -
- dailycalendar - -              -
----------------- ---------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:48:17.837

我通过更改 div 的顺序并在 headerimage 上设置高度来管理它：

```
<div id="headercontent">
    <div id="headerimage"></div>
    <div id="topnav"></div>
    <div id="dailycalendar"></div>
</div>

#headerimage { float: right; width: 270px; height:100%; background-color:green } 
```

[http://jsfiddle.net/pyXer/](http://jsfiddle.net/pyXer/)

# php - 如何从 txt 中读出一个值并将其添加到 php 的下拉列表中？

> ID：15482124
> 
> 赞同：1
> 
> 时间：2013-03-18T16:37:34.597
> 
> 标签：php, list, drop-down-menu

我从一个可以找到“免费”一词的 txt 文件中写出每一行。

```
<?php
$filename = "data.txt";
$fp = fopen($filename, "r") or die("Couldn't open $filename");
while(!feof($fp))
{ $line = fgets($fp);
if (preg_match('/free/',$line)) // Print the line if it contains the word 'Ravi'
print "$line<br>";
}
fclose($fp);
?> 
```

我想将带有“免费”一词的每一行添加到下拉列表中，我可以在其中选择一个并将此值转发到我的电子邮件中。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:44:01.450

只需通过 php 构建一个选择元素并将其提供`$line`：

```
// after $fp = fopen...
$h = '<select name="aname" id="aname">';

// within your while-loop    
$h .= '<option value="'.$line.'">'.$line.'</option>';

// after your while-loop
$h .= '</select>';

echo $h; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:41:14.077

是的，可以这样做。

添加一些 echo 语句如下：

```
$filename = "data.txt";
$fp = fopen($filename, "r") or die("Couldn't open $filename");
echo "<select>";      //  THIS ONE
while(!feof($fp)) {
  $line = fgets($fp);
  if (preg_match('/free/',$line))
    echo "<option>" . $line . "</option>";   // THIS ONE
}
echo "</select>";         // AND THIS ONE
fclose($fp); 
```

# vxworks - VxWorks 启动挂起（从 0x100000 开始）

> ID：15482125
> 
> 赞同：1
> 
> 时间：2013-03-18T16:37:38.450
> 
> 标签：vxworks

我正在尝试在 Wind River SBC83XX PowerQUICC II Pro 上启动 VxWorks 6.3。我使用 Wind River Workbench 作为我的 IDE。我配置了内核，构建了它，并尝试运行它，但它挂起`Starting at 0x100000`，没有进一步的输出。

`@`这是在提示符下键入后终端的输出：

```
boot device          : mottsec
unit number          : 0 
processor number     : 0 
host name            : XXXXXXXXXXX
file name            : C:\WindRiver\workspace\vxworks-dev\default\vxWorks
inet on ethernet (e) : 69.88.163.22:ffffff00
host inet (h)        : 69.88.163.21
gateway inet (g)     : 69.88.163.1
user (u)             : XXXXXXXXX
ftp password (pw)    : XXXXXXXX
flags (f)            : 0x0 

Attaching interface lo0... done
Attached IPv4 interface to mottsec unit 0
Loading... 1838288
Starting at 0x100000... 
```

任何建议将不胜感激; 我需要在紧张的日程中为大学课程工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T16:22:27.680

许多事情可能是错误的。
我要做的第一件事是检查 RAM 大小。如果它超过板上的数量，则可能会发生这种情况。

串口和shell配置了吗？我建议添加独立的 shell 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T22:32:20.913

如果符号表被编译为独立的，这有时会基于其他配置发生。

将符号表编译到图像中。

在工作台：内核配置-> CTRL+F，搜索“内置符号表”，-> 包含它。

# c++ - 从 tr1::regex_search 获取匹配索引

> ID：15482126
> 
> 赞同：0
> 
> 时间：2013-03-18T16:37:41.090
> 
> 标签：c++, regex, tr1

使用时如何获取匹配的索引`std::tr1::regex_search`？

```
// sequence of string sub-matches
std::tr1::smatch result;

if (!std::tr1::regex_search(text, result, pattern))
    return false; 
```

我只能从`std::tr1::smatch result`变量中获取字符串，但不能获取匹配的索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:46:25.677

我错过了它，因为我搜索了一种`index`方法，但它作为一种方法就在那里 -`std::tr1::smatch::position()`将给出匹配的索引。

# javascript - Javascript 仅在 Firefox 中不起作用

> ID：15482131
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:38:01.930
> 
> 标签：javascript, firefox, mozilla, onmouseover

我有一个将鼠标悬停在缩略图上的脚本，它将显示放大的图像。这项工作在 IE、Chrome 和 Safari 中运行良好。但是在 Firefox 中它不能正常工作。它将显示图像，但不会正确悬停在图像旁边。它将停留在页面上的绝对位置，而不是遵循真实的正文值。它应该像在 IE 或 chrome 中一样位于固定位置。

我想知道是否需要添加 Mozilla 或 Firefox 特定的异常。这是我的代码：

```
//  Simple Image Trail script- By JavaScriptKit.com
var offsetfrommouse = [15, 10]; //image x,y offsets from cursor position in pixels.
var myimageheight = 250;
var myimagewidth = 250;
if (document.getElementById || document.all) {
    document.write('<div id="DynPreviewPlace"></div>');
}

function gettrailobj() {
    if (document.getElementById)
        return document.getElementById("DynPreviewPlace").style
    else if (document.all)
        return document.all.DynPreviewPlace.style
}

function gettrailobjnostyle() {
    if (document.getElementById)
        return document.getElementById("DynPreviewPlace")
    else if (document.all)
        return document.all.DynPreviewPlace
}

function truebody() {
    if (window.getComputedStyle && !window.globalStorage && !window.opera) {
        return (!window.chrome && window.getComputedStyle && document.compatMode != "CSS1Compat") ? document.documentElement : document.body
    } else if () {} else {
        return (!window.chrome && document.compatMode && document.compatMode != "BackCompat") ? document.documentElement : document.body
    }
}

function showtrail(imagename, title, width, height) {
    document.onmousemove = followmouse;
    (height == 0) ? height = myimageheight : '';
    width += 15
    height += 30
    myimageheight = height
    myimagewidth = width
    newHTML = '<div class="DynPreviewWraper" style="width:' + width + 'px;"><div id="DynPreviewContainer"><div class="DynPreviewLoader"><div align="center">Loading preview...</div><div class="DynPreviewLoaderBg"><div id="DynProgress"> </div></div></div></div>';
    newHTML = newHTML + '<h2 class="DynPreviewTitle">' + ' ' + title + '</h2>'
    newHTML = newHTML + '<img onload="javascript:remove_loading();" src="' + imagename + '" class="DynPreviewTempLoad" alt="" />';
    newHTML = newHTML + '<!--[if lte IE 6.5]><iframe></iframe><![endif]--></div>';
    gettrailobjnostyle().innerHTML = newHTML;
    gettrailobj().display = "block";

}

function hidetrail() {
    gettrailobj().innerHTML = " ";
    gettrailobj().display = "none"
    document.onmousemove = ""
    gettrailobj().left = "-500px"
}

function followmouse(e) {
    var xcoord = offsetfrommouse[0]
    var ycoord = offsetfrommouse[1]
    var docwidth = document.all ? truebody().scrollLeft + truebody().clientWidth : pageXOffset + window.innerWidth - 15
    var docheight = document.all ? Math.min(truebody().scrollHeight, truebody().clientHeight) : Math.min(window.innerHeight)
    if (typeof e != "undefined") {
        if (docwidth - e.pageX < myimagewidth + 2 * offsetfrommouse[0]) {
            xcoord = e.pageX - xcoord - myimagewidth;
        } else {
            xcoord += e.pageX;
        }
        if (docheight - e.pageY < (myimageheight + 110)) {
            ycoord += e.pageY - Math.max(0, (110 + myimageheight + e.pageY - docheight - truebody().scrollTop));
        } else {
            ycoord += e.pageY;
        }
    } else if (typeof window.event != "undefined") {
        if (docwidth - event.clientX < myimagewidth + 2 * offsetfrommouse[0]) {
            xcoord = event.clientX + truebody().scrollLeft - xcoord - myimagewidth;
        } else {
            xcoord += truebody().scrollLeft + event.clientX
        }
        if (docheight - event.clientY < (myimageheight + 110)) {
            ycoord += event.clientY + truebody().scrollTop - Math.max(0, (110 + myimageheight + event.clientY - docheight));
        } else {
            ycoord += truebody().scrollTop + event.clientY;
        }
    }
    var docwidth = document.all ? truebody().scrollLeft + truebody().clientWidth : pageXOffset + window.innerWidth - 15
    var docheight = document.all ? Math.max(truebody().scrollHeight, truebody().clientHeight) : Math.max(document.body.offsetHeight, window.innerHeight)
    if (ycoord < 0) {
        ycoord = ycoord * -1;
    }
    gettrailobj().left = xcoord + 'px';
    gettrailobj().top = ycoord + 'px';
}
var t_id = setInterval(animate, 20);
var pos = 0;
var dir = 2;
var len = 0;

function animate() {
    var elem = document.getElementById('DynProgress');
    if (elem != null) {
        if (pos == 0) len += dir;
        if (len > 32 || pos > 79) pos += dir;
        if (pos > 79) len -= dir;
        if (pos > 79 && len == 0) pos = 0;
    }
}

function remove_loading() {
    this.clearInterval(t_id);
    var targelem = document.getElementById('DynPreviewContainer');
    targelem.style.display = 'none';
    targelem.style.visibility = 'hidden';
    var t_id = setInterval(animate, 60);
} 
```

这真让我抓狂。我一直在尝试一切。您可以在这里看到问题所在的页面：[https ://www.woodenduckshoppe.com/shoppe/christmas-decorations/](https://www.woodenduckshoppe.com/shoppe/christmas-decorations/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:51:52.803

> 您的 truebody 函数在不同的浏览器中运行不同的代码。你试过不这样做吗？——鲍里斯·兹巴尔斯基 15 小时前

我一直在试图弄清楚在那里写什么。我只是不知道该为 firefox/mozilla 放什么。那是唯一有问题的浏览器。

我看到在 Firefox 中没有读取真体，我只是不知道为什么或如何修复它。

# iphone - UIBarButtonItems 在 UINavigationBar 中是正常的，在 UIToolBar 中调整大小

> ID：15482134
> 
> 赞同：1
> 
> 时间：2013-03-18T16:38:04.537
> 
> 标签：iphone, ios, objective-c

我使用此代码自定义 UIBarButtonItems：

```
backImage = [UIImage imageNamed:@"barButtonImage"];
backImage = [backImage resizableImageWithCapInsets:UIEdgeInsetsMake(0.0f, 6.0f, 0.0f, 6.0f) resizingMode:UIImageResizingModeTile];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[[UIBarButtonItem appearance] setBackgroundImage:backImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

所有导航栏看起来都很好 ![在此处输入图像描述](../Images/32905f49719d4890f93d84d96028961a.png)

但是工具栏以奇怪的方式调整了项目的大小： ![在此处输入图像描述](../Images/f899824430f7b37f1311bf1415fb6bc1.png)

所有 UIBarButtonItems 都在故事板中定义，没有任何自定义视图。如何删除此调整大小？

# r - setting up texmaker with knitr on linux

> ID：15482138
> 
> 赞同：2
> 
> 时间：2013-03-18T16:38:14.990
> 
> 标签：r, knitr, texmaker

I am trying to change the R Sweave command to knitr on linux. The current (R Sweave) command is found under options > configure:

```
R CMD Sweave %.Rnw 
```

Yihui gives and example of how to do this on windows [here](http://yihui.name/knitr/demo/editors/).

How would you do this on linux (ubuntu)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T18:38:06.117

`Rscript` isn't called by using `Rscript.exe` on Linux. Just change Rscript.exe to `Rscript`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T07:53:19.567

I just wanted to add that I just discovered that the abovementioned code does not work when child Rnw documents are included with `\Sexpr{knit_child('path')}`.

Use `Rscript -e "library(knitr); knit('%.Rnw')"` instead.

Please mention in the comments if you know of any difference in output between `knit::knit2pdf()` and `knit()`.

# c# - 如何减少具有许多单元格的 PdfPTable 的内存消耗

> ID：15482142
> 
> 赞同：2
> 
> 时间：2013-03-18T16:38:21.417
> 
> 标签：c#, itextsharp, pdfptable, pdf-writer

我正在使用由单个 PdfTable 组成的 ITextSharp 创建 PDF。不幸的是，对于特定的数据集，由于创建的大量 PdfPCells，我得到了内存不足异常（我已经分析了内存使用情况 - 我有近 1/2 百万个单元格！）

在这种情况下，有什么办法可以减少内存使用量？我试过在不同的点（每行之后）冲洗和完全压缩

PdfWriter 基于 FileStream

代码看起来很像这样：

```
Document document = Document();
FileStream stream = new FileStream(fileName,FileMode.Create);                                   
pdfWriter = PdfWriter.GetInstance(document, stream);
document.Open();
PdfPTable table = new PdfPTable(nbColumnToDisplay);
foreach (GridViewRow row in gridView.Rows)
{
    j = 0;
    for (int i = 0; i < gridView.HeaderRow.Cells.Count; i++)
    {
        PdfPCell cell = new PdfPCell( new Phrase( text) );
        table.AddCell(cell);
    }   
}
document.Add(table);
document.Close(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T17:54:23.763

iTextSharp 有一个非常酷的接口，称为[`ILargeElement`](http://sourceforge.net/p/itextsharp/code/532/tree/trunk/src/core/iTextSharp/text/ILargeElement.cs)实现`PdfPTable`。根据文档：

```
/**
* Interface implemented by Element objects that can potentially consume
* a lot of memory. Objects implementing the LargeElement interface can
* be added to a Document more than once. If you have invoked setCompleted(false),
* they will be added partially and the content that was added will be
* removed until you've invoked setCompleted(true);
* @since   iText 2.0.8
*/ 
```

因此，您需要做的就是在创建 后`PdfPTable`，将`Complete`属性设置为 false。在你的内部循环中做某种形式的计数器，每隔一段时间添加表，从而清除内存。然后在循环结束时设置`Complete`为 true 并再添加一次。

下面是显示这一点的示例代码。如果没有计数器检查，此代码在我的机器上使用了大约 500MB 的 RAM。计数器每 1,000 个项目检查一次，它就会下降到 16MB 的 RAM。您需要为计数器找到自己的最佳位置，这取决于您平均添加到每个单元格的文本量。

```
string fileName = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "table.pdf");
Document document = new Document();
FileStream stream = new FileStream(fileName, FileMode.Create);
var pdfWriter = PdfWriter.GetInstance(document, stream);
document.Open();

PdfPTable table = new PdfPTable(4);
table.Complete = false;
for (int i = 0; i < 1000000; i++) {
    PdfPCell cell = new PdfPCell(new Phrase(i.ToString()));
    table.AddCell(cell);
    if (i > 0 && i % 1000 == 0) {
        Console.WriteLine(i);
        document.Add(table);
    }
}
table.Complete = true;
document.Add(table);
document.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-27T09:06:09.730

PdfPTable pdftbale = new PdfPTable(gridview.HeaderRow.Cells.Count);

```
 foreach (TableCell tabhead in gridview.HeaderRow.Cells)
    {
        PdfPCell pdfcell1 = new PdfPCell(new Phrase(tabhead.Text));
        pdftbale.AddCell(pdfcell1);
    }

    foreach (GridViewRow gd in gridview.Rows)
    {
        foreach (TableCell tab in gd.Cells)
        {
            PdfPCell pdfcell = new PdfPCell(new Phrase(tab.Text));
            pdftbale.AddCell(pdfcell);
        }
    }

    iTextSharp.text.Document pdfDocument = new iTextSharp.text.Document(PageSize.A4, 10f, 10f, 10f, 10f);
    PdfWriter.GetInstance(pdfDocument, new FileStream(Server.MapPath("~/pdf/" + DateTime.Now.ToString("ddMMyyyyhhmmss") + ".pdf"), FileMode.Create));
    pdfDocument.Open();
    pdfDocument.Add(pdftbale);
    pdfDocument.Close(); 
```

# adobe - 如何播放录制的 adobe 连接会话？

> ID：15482148
> 
> 赞同：1
> 
> 时间：2013-03-18T16:38:49.717
> 
> 标签：adobe, adobe-connect

我通过在录制 URL 的末尾添加 /output/recording.zip?download=zip 来下载会话记录。记录文件夹有一些 .flv 和 .xml 文件。我怎样才能玩这个会话？我用的是 flv 编辑器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T11:19:06.863

您使用 /output/recording.zip?download=zip 查询下载的录音不是视频，它包含 FLV 格式，但不会播放。

要播放录制文件，使录制文件脱机，在 Adob​​e Connect 9 中，录制页面上有一个选项“制作 Flv”，位于“操作”选项卡下。

您必须播放完整的录音才能下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T17:36:59.367

是的，我认为您需要为此使用编辑器。通常下载 Adob​​e Connect 记录的方式是[官方文档](http://help.adobe.com/en_US/connect/8.0/using/WS20F14479-39A1-42e2-AF0A-F8C2F1AA9BE4.html)中描述的方式。

# c# - BuildPredicate 比较两个字段

> ID：15482151
> 
> 赞同：1
> 
> 时间：2013-03-18T16:38:53.440
> 
> 标签：c#, lambda, linq-to-entities, expression, automapper

我正在尝试映射两个字段之间的比较，以前我只进行字段`Expression.Constant`比较。

```
 private static Expression<Func<TDomainModel, bool>> BuildPredicate<TDomainModel>(string leftPropName, string rightPropName, TypeMap map)
  {
        PropertyMap leftPropMap = map.GetPropertyMaps().FirstOrDefault(pro => pro.DestinationProperty.Name == leftPropName);
        Expression leftParam = leftPropMap.CustomExpression.Body;

        PropertyMap rightPropMap = map.GetPropertyMaps().FirstOrDefault(pro => pro.DestinationProperty.Name == rightPropName);
        Expression rightParam = rightPropMap.CustomExpression.Body;

        Expression operatorBody = Expression.GreaterThanOrEqual(leftParam, rightParam);

        return Expression.Lambda<Func<TDomainModel, bool>>(operatorBody, leftPropMap.CustomExpression.Parameters[0]);
  } 
```

但是我总是得到一个例外......

`The parameter 's' was not bound in the specified LINQ to Entities query expression.`

这两个属性都在同一个实体上，甚至在它们的映射中使用“s”。不知道如何解决这个问题。我已经尝试将这两个`CustomExpression.Parameters`值都放入返回的 Lambda 中，但是它抱怨过多的重载。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:50:17.010

您需要使用与左表达式相同的参数重写右表达式。他们现在不同了。

我曾经这样做[是在右侧创建一个 Expression.Invoke 节点，然后使用](https://github.com/juanplopes/simple-commons/blob/master/src/Simple/Expressions/PredicateBuilder.cs#L28)[ExpressionVisitor](https://github.com/juanplopes/simple-commons/blob/master/src/Simple/Expressions/InvocationExpander.cs)扩展调用。

# ios - 为什么在尝试使用 presentViewController 时会出现此错误？

> ID：15482154
> 
> 赞同：0
> 
> 时间：2013-03-18T16:39:00.197
> 
> 标签：ios, objective-c, storyboard, uitableview, uiactionsheet

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UITableViewController loadView] loaded the "2Pv-MD-gdY-view-bDF-TR-G6E" nib but didn't get a UITableView.' 
```

为什么我会这样？我的应用程序的要点是我有一个 UITableViewController 和一个触发操作表的按钮。当按下特定选项时，操作表会呈现一个视图控制器（模态）。这是我的代码：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSString *buttonTitle = [actionSheet buttonTitleAtIndex:buttonIndex];

    if ([buttonTitle isEqualToString:@"Text"]) {
        AddTextViewController *addTextViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"addTextViewController"];
        [self presentViewController:addTextViewController animated:YES completion:nil];
    } 
```

}

我可以提供任何进一步需要的信息，但我不确定出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:32:28.300

看起来您正在尝试实例化一个 nib 并且它不存在。笔尖是否包含在项目成员中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:21:51.157

您是否在 xib 中为此表视图控制器创建了视图？您可能只需要将 xib 文件中的 tableView 属性连接到 tableView。

# ios - iPad mini 的屏幕分辨率或帧大小是多少？

> ID：15482155
> 
> 赞同：-4
> 
> 时间：2013-03-18T16:39:01.947
> 
> 标签：ios

面试官问我*ipad* mini的分辨率或界限？`Ipad`和2一样吗？或者这个的确切答案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:40:04.877

是的，它与 iPad 2 和原始 iPad 具有相同的分辨率，1024 x 768。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:41:04.850

如果您需要，`frame/bounds`那么：

```
CGFloat width = [UIScreen mainScreen].bounds.size.width; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:53:17.967

IPAD mini 的屏幕分辨率为 1,024×768

# divide-by-zero - C++ 0xC0000094：整数除以零

> ID：15482156
> 
> 赞同：-4
> 
> 时间：2013-03-18T16:39:05.393
> 
> 标签：divide-by-zero

这段代码在 100000 之前运行良好，但如果您输入 1000000，它就会开始出现错误`C++ 0xC0000094: Integer division by zero`。我确信这与浮点有关。我尝试了 (/fp:precise)、(/fp:strict)、(/fp:except) 和 (/fp:except-) 的所有组合，但没有得到肯定的结果。

```
#include "stdafx.h"
#include "time.h"
#include "math.h"
#include "iostream"
#define unlikely(x)(x)

int main()
{
    using namespace std;
    begin:
    int k;
    cout<<"Please enter the nth prime you want: ";
    cin>>k;
    int cloc=clock();
    int*p;p=new int [k];
    int i,j,v,n=0;
    for(p[0]=2,i=3;n<k-1;i+=2)
    for(j=1;unlikely((v=p[j],pow(v,2)>i))?!(p[++n]=i):(i%v);++j);
    cout <<"The "<<k<<"th prime is "<<p[n]<<"\nIt took me "<<clock()-cloc<<" milliseconds to find your prime.\n";
    goto begin;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:56:23.650

问题中显示的代码不会`p[1]`对其进行初始化或赋值。在设置的`for`循环中`j=1`，`p[j]`用于对 的赋值`v`。结果为 的未知值`v`。显然，它恰好为零，这导致表达式中被零除`i%v`。

由于此代码未记录，结构不良且不可读，因此正确的解决方案是丢弃它并从头开始。

浮点数与问题无关，尽管使用`pow(v, 2)`来计算*v* ²是一个糟糕的选择；`v*v`会更好。但是，当整数除以零时，某些系统会打印出误导性消息“Floating exception”。尽管有消息，但这是整数运算中的错误。

# verilog - 模拟器显示错误输入

> ID：15482162
> 
> 赞同：1
> 
> 时间：2013-03-18T16:39:20.417
> 
> 标签：verilog, xilinx, hdl

我已经为verilog中的程序编写了一个测试平台。奇怪的问题是模拟器显示的输入与我提供的输入完全不同。因此输出也会受到影响。为什么会这样？我正在 Xilinx 中测试代码。这里是测试台

我的输入是 1010101 模拟器显示 0110101

```
module HamDecoderTop;

// Inputs
reg clk;
reg rst;
reg [6:0] hword;

// Outputs
wire [3:0] data;

HammingDecoder uut (
    .clk(clk), 
    .rst(rst), 
    .hword(hword), 
    .data(data)
);

initial begin
    // Initialize Inputs
    clk = 0;
    rst = 0;

    #1 rst =1;

    #10 hword = 1010101;

end

always
#2 clk=~clk;

endmodule 
```

这是模拟器显示的内容。

![在此处输入图像描述](../Images/49c53a94f42788367935db7214d9c7d4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:47:29.670

`7'b`如果您希望将其解释为七位二进制文​​件，则需要在您的 hword 文字值前面加上 a 。默认情况下，它被解释为十进制值`1,010,101`，当转换为二进制时，它是`11110110100110110101`. 这个二进制数的前 7 位就是您在模拟器中看到的。

# android - 检测缓冲错误（或超时）Android MediaPlayer - 使用定时器超时？

> ID：15482168
> 
> 赞同：3
> 
> 时间：2013-03-18T16:39:42.370
> 
> 标签：android, timer, android-mediaplayer

显然没有抛出异常，因此我可以在缓冲流式音频内容时识别错误。例如，我已断开路由器的连接，应用程序将继续尝试缓冲整个时间。当我重新连接时，它会完成缓冲，即使在断开连接超过一分钟后也会继续！

所以问题是我不能让我的用户在那里坐那么久而不考虑这个问题。检测 Android 媒体播放器缓冲问题的正确方法是什么？

我正在考虑使用[Timer](http://developer.android.com/reference/java/util/Timer.html "定时器")进行超时。我可能会从 15 秒开始（使用代理我测试了 5kbps 连接，这是最坏的情况，能够在 6-10 秒内开始播放，所以我认为 15 秒是一个合理的超时时间）。这听起来像是一个好计划吗？如果是这样，我应该在每次缓冲区尝试时创建一个新的 Timer，还是应该在播放服务的整个生命周期内保持相同的 Timer？

所以基本上我在问两个问题：

1）检测缓冲区是否有问题的正确方法是什么？有我忽略的听众吗？我已经尝试过 MediaPlayer.OnErrorListener 当然在我的测试中不会触发。我的结论是我必须有一个超时来检测缓冲错误。

2）如果我在第一点上是正确的，那么使用计时器的正确方法是什么？每次缓冲区尝试都创建一个或重复使用相同的缓冲区？ **编辑**我还应该重新启动（或取消并创建一个新的）Timer onBufferUpdate 吗？使用 onBufferUpdate 侦听器，我应该知道一些数据正在返回，因此可能应该用它来重置计时器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T01:04:26.507

根据您的问题，我了解到主要目标是检测您的播放器是否因缓冲而停滞的情况并采取一些措施。为了处理这种情况，我觉得以下 2 位听众可能有助于识别相同的情况。

[`MediaPlayer.onBufferingUpdate`](http://developer.android.com/reference/android/media/MediaPlayer.OnBufferingUpdateListener.html)将提供缓冲的及时进展。因此，如果有 2 个具有相同`percent`值的回调，这可能表明潜在的缓冲。

还有另一个侦听[`MediaPlayer.onInfoListener`](http://developer.android.com/reference/android/media/MediaPlayer.OnInfoListener.html)器有一些您可能感兴趣的特定事件。在此侦听器上，如果`what`is [`MEDIA_INFO_BUFFERING_START`](http://developer.android.com/reference/android/media/MediaPlayer.html#MEDIA_INFO_BUFFERING_START)，则表明播放器正在暂停播放以进行缓冲，即触发您的逻辑。同样[`MEDIA_INFO_BUFFERING_END`](http://developer.android.com/reference/android/media/MediaPlayer.html#MEDIA_INFO_BUFFERING_END)表示填充缓冲区后重新开始播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:46:57.503

你应该看看这篇文章。媒体播放器有一个 ErrorListener 来获取任何错误。

[http://developer.android.com/reference/android/media/MediaPlayer.OnErrorListener.html](http://developer.android.com/reference/android/media/MediaPlayer.OnErrorListener.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-28T01:46:44.377

为了在准备期间进行缓冲，您必须设置自己的计时器，该计时器在一段时间后调用 player.reset()。这会使播放器回到初始状态。

对于准备后（播放期间）的缓冲，您必须监控 getPosition()。如果它落后于某个最大值，请调用 reset()。这允许您为播放设置经验阈值。不仅可以处理失败的连接，还可以处理断断续续的连接。

最好的解决方案是不使用 MediaPlayer。请改用公共 VLC 衍生产品。MP 有太多内部化的私有设计限制，需要可怕的变通方法（例如，不能添加编解码器）。在这种情况下，RTFM 给了你错误的希望。

除非您正在做一个非常直接的 android 应用程序，否则不要依赖任何 android api。一些开源替代品得到更好的支持，这是有充分理由的。

（真的bandeely olly jolly 令人满意的编辑咆哮已删除）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T15:46:29.083

```
int count=40;//for 40 seconds to wait for buffering after it will finish the activity
//boolean timeoutflag=false;

timeout = new Handler(Looper.getMainLooper()) {
            @Override
            public void handleMessage(Message msg) {
                System.out.println("value of count="+msg.getData().getLong("count"));
                if (msg.getData().getBoolean("valid")) {
                    if (msg.getData().getLong("count") == 0 && !timeoutflag) 
                    {

                        if (pDialog != null && pDialog.isShowing()) 
                                {   
                                try
                                {
                                pDialog.dismiss();
                                }catch(Exception e)
                                {
                                    e.printStackTrace();
                                }
                                }
                            Toast.makeText(getApplicationContext(),
                                    "Unable To Load This Video", Toast.LENGTH_LONG).show();
                        finish();

                    } else {
                    }

                }

            }
        };
        timeout.postDelayed(null, 0);
        new Thread(new Runnable() {

            @Override
            public void run() {
                while (count > 0) {
                    try {
                        Thread.sleep(1020);
                    } catch (Exception e) {
                    }

                    Message msg = new Message();
                    Bundle b = new Bundle();
                    b.putBoolean("valid", true);
                    b.putLong("count", --count);
                    msg.setData(b);
                    timeout.sendMessage(msg);

                }

            }
        }).start();
        // set timeoutflag=true; in setOnPreparedListener of video view 
```

# php - 在 codeigniter 中编写“一次性”javascript

> ID：15482170
> 
> 赞同：2
> 
> 时间：2013-03-18T16:39:50.340
> 
> 标签：php, javascript, codeigniter

我正在处理我的第一个代码点火器项目。我有一些需要编写的 javascript 来启动文档准备好的实例。这是一个关闭，永远不会再被调用。我需要将它包含在头部，但在某些情况下我需要在正文的末尾执行此操作。因此，例如，假设我有这个：

```
<script>
alert('this is a one off alert');
</script> 
```

做这些事情的最佳实践是什么？将它放在控制器中是否可以接受？它需要一个模型写作吗？或者我是否需要为要在 MVC 中的每个脚本创建单独的视图？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:30:41.763

通常我使用的做法是这样的：

1.  所有视图文件都加载一个公共标题。并且视图文件在控制器的末尾加载。

2.  您可以硬编码或传递要从控制器启动的脚本的链接。对脚本标签进行硬编码是不言自明的。如果您想更动态地执行此操作，您可以设置一个脚本源数组并在标头中循环它们。

所以在控制器中

```
$data['scripts'] = array();
$data['scripts'][] = 'http://yoursourcehere'; 
```

或者如果是自托管：

```
$data['scripts'][] = site_url('assets/js/yourscript.js'); 
```

然后视图

```
if(isset($scripts))
{
   foreach($scripts as $script)
   {
      echo '<script type="text/javascript" src="'.$script.'"></script>';
   }    
} 
```

所以基本上你可以把你所有的自定义脚本放在一个单独的文件中，然后以这种方式加载它。它很实用，因为它可以以一种通用的方式一次加载所有脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:22:05.253

JS 是 HTML 的一部分，所以它不应该在控制器或模型中，所以它应该在视图中，因为你正在使用框架，那么你应该将它保存在一个单独的文件中，你可以为控制器中的每个方法拥有单独的文件或每个控制器一个 JS 文件。

你也可以在你的核心文件夹中创建一个 base_controller 并用它扩展你的所有控制器，在那里你可以设置所有默认的 JS 和 CSS。因此，如果您为控制器调用索引方法，它将使用默认的 JS 和 CSS 加载，如果需要添加任何新的，只需从控制器传递它，如 John B 所说

您可以在帮助文件中使用此功能

```
/**
 * getting js files from public folder
 * @param array $js
 * @return string
 */
function js_tag($js) {
    $out = "";
    if (!empty($js)) {
        $js = array_reverse($js);
        foreach ($js as $j) {
            if (strstr($j, "http:") == "" && strstr($j, "https:") == "") {
                if ($j == 'tinymac') {
                    $out.='<script type="text/javascript" src="' . base_url() . 'jscripts/tiny_mce/tiny_mce.js"></script>' . "\n";
                } else {
                    $out.='<script type="text/javascript" src="' . base_url() . 'public/js/' . $j . '"></script>' . "\n";
                }
            } else {
                $out.='<script type="text/javascript" src="' . $j . '"></script>' . "\n";
            }
        }
    }
    $out .= '<script type="text/javascript"> var baseurl = "' . base_url() . '"</script>' . "\n";
    return $out;
}

/**
 * getting css files from public folder
 * @author Amir M
 * @param array $css
 * @return string
 */
function css_tag($css) {
    $out = "";
    if (!empty($css)) {
        $css = array_reverse($css);
        foreach ($css as $c) {
            if (strstr($c, "http:") == "" && strstr($c, "https:") == "") {
                $out.= link_tag(base_url() . "public/css/" . $c) . "\n";
            } else {
                $out.= link_tag($c) . "\n";
            }
        }
    }
    return $out;
} 
```

你可以从控制器调用它

```
public function index(){
  $data['js'] = js_tag('one.js', 'two.js' , 'jquery.js');
  $data['css'] = css_tag('one.css', 'two.css' , 'jquery-ui.css');
$thuis->load->view('index' , $data);
} 
```

注意：上述方法将反转数组，因此数组中的最后一个值将首先出现在页面上，因此将 jQuery 保持在数组中的最后

在所有网站上通用的标题中

```
<?php echo $js.$css?> 
```

# c# - 如何检测 Windows 7 所需的重新启动

> ID：15482174
> 
> 赞同：13
> 
> 时间：2013-03-18T16:40:03.600
> 
> 标签：c#, windows, windows-7, reboot, required

我正在做一个项目，在 Windows 7 PC 上安装了多个软件和驱动程序。这将在没有用户输入的情况下工作。

现在有一个问题：如何在此程序中确定是否需要重新启动才能完成安装（可以是驱动程序或软件）。

我们正在使用嵌入式 Windows 7，并且没有启用任务栏或任何工具提示或类似的东西可见。软件以静默模式安装。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T16:45:31.583

使用以下注册表项：

```
HKLM\System\CurrentControlSet\Control\Session Manager\PendingFileRenameOperations 
```

资料来源：[如何确定我刚刚安装的 MSI 是否要求重新启动 Windows？](https://stackoverflow.com/questions/1685821/how-to-find-out-if-an-msi-i-just-installed-requested-a-windows-reboot)

正如这个问题的提问者所发现的`HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Component Based Servicing\RebootPending`那样，只要操作系统是 Vista 或更高版本，机器上的重新启动就会挂起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-01T15:47:27.933

经过长时间的研究，我找到了一种方法，如何直接在 .NET 应用程序中使用本机 Windows DLL 查询挂起的重新启动。主要问题是 Windows 必须重新启动的原因可能有很多。此外，Windows 版本有时也会发挥作用。

在研究过程中，我遇到了一篇描述 Windows Update 环境中各种脚本的文章，例如确定是否启用了自动更新服务或是否需要重新启动计算机。在那里您将找到对 Microsoft.Update.SystemInfo 对象的引用，该对象最终导致 ISystemInformation 接口具有[ISystemInformation::get_RebootRequired](https://docs.microsoft.com/en-us/windows/win32/api/wuapi/nn-wuapi-isysteminformation)方法（获取一个布尔值，指示是否需要重新启动系统才能完成安装或卸载一个或更多更新。）。

有关旅程的更多详细信息，请参阅我的博客文章[在 C# 和 PowerShell 中以编程方式确定 Windows 计算机的挂起重启状态](https://www.prugg.at/2019/06/19/determine-programmatically-pending-reboot-status-for-a-windows-machine-in-c-and-powershell/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-24T10:18:07.357

“ [PendingReboot”](https://www.powershellgallery.com/packages/PendingReboot/)模块将所有提到的测试（+ CCM WMI 探测）合并到一个方便的 cmdlet 中，以可靠地检测挂起的重新启动：

```
# Install
Install-Module -Name PendingReboot

# Run
Test-PendingReboot -Detailed 
```

# oracle - ROracle 挂了，如何取消查询

> ID：15482179
> 
> 赞同：0
> 
> 时间：2013-03-18T16:40:11.400
> 
> 标签：oracle, r

`R`当我在using上执行查询时`ROracle`，有时查询似乎挂起，我无法停止执行`CTRL+C`或点击`ESC`. 我可以做些什么（Win7 上的 R.2.15.2）来停止查询并返回`R>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:05:15.847

我过去用于不间断 R 代码的一个技巧是在对`parallel::mcparallel`. 然后，如果它挂起，我可以终止分叉进程并继续进入主 R 进程。例子：

```
function.that.hangs <- function(...) system("while true; do echo hello; sleep 1; done")

# This might hang
result <- function.that.hangs(...)

# Do this instead, the run the function in a forked process.
p <- mcparallel(function.that.might.hang(...))
# This might still hang, but you can kill the stuck R process and it will return.
result <- mmcollect(p)[[1]] 
```

（这个例子可能不会阻止你使用 CTRL+C，但你明白了。

# c# - c# TCPclient设置IP

> ID：15482182
> 
> 赞同：0
> 
> 时间：2013-03-18T16:40:16.543
> 
> 标签：c#, httpclient, port

我正在尝试使用 httpclient 发送数据包

```
TcpClient tc = new TcpClient(ip, 4500);

            string s = "A7007000601D3B00";

            byte[] arr = new byte[s.Length/2];
            for ( var i = 0 ; i<arr.Length ; i++ ){
             arr[i] = (byte)Convert.ToInt32(s.Substring(i*2,2), 16);
            }

            NetworkStream stream = tc.GetStream();
            stream.Write(arr, 0, arr.Length);
            tc.Close(); 
```

问题是它从端口 47109 发送，但是我需要使用端口 46324 发送数据包。我该如何设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:45:31.403

TcpClient 构造函数的重载允许您将其绑定到特定的本地 IP 地址和端口。请参阅[MSDN 上的文档](http://msdn.microsoft.com/en-us/library/3bsb3c8f.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:01:06.487

示例中的原因[Is there a way to specify the local port to used in tcpClient?](https://stackoverflow.com/questions/2869840/is-there-a-way-to-specify-the-local-port-to-used-in-tcpclient) 不起作用可能是因为列表中的第一个地址实际上不是本地机器的 ip 地址。这样的事情可能会解决问题并提取正确的本地 IP 地址：

```
string remoteIP = "x.x.x.x";
IPAddress ipAddress = Dns.GetHostEntry(Dns.GetHostName()).AddressList.Where(x => x.AddressFamily == AddressFamily.InterNetwork).First();
IPEndPoint ipLocalEndPoint = new IPEndPoint(ipAddress, 47109);
TcpClient clientSocket = new TcpClient(ipLocalEndPoint);
clientSocket.Connect(remoteIP, 4500); 
```

# ruby-on-rails - 使用单个 Partial 的所有视图的 Rails CRUD 按钮

> ID：15482185
> 
> 赞同：0
> 
> 时间：2013-03-18T16:40:20.710
> 
> 标签：ruby-on-rails, ruby, controller, views, crud

Rails 新手在这里。

无论控制器如何，我想使用单个部分在所有视图上创建我的 CRUD 按钮。所以这就是我到目前为止所做的工作。在我的控制器中，我有：

**信息控制器.rb**

```
class InformationController < ApplicationController
  before_filter :set

  def set
    #Set Paths
    @new_path = new_information_path
    @edit_path = edit_information_path
  end

  #Then normal index, show, etc definitions follows

end 
```

我将以索引和编辑页面为例。

**index.html.haml**

```
-@operation = "index" #To let partial know what page it is in
-render 'form', operation: @operation 
```

**编辑.html.haml**

```
-@operation = "edit"
- render 'form', operation: @operation 
```

然后，在我的部分形式中，我有：

**_form.html.haml**

```
.form-inputs
  .container-fluid
    .span8
      .simple_form_for @foo do |f|
        =f.input :title, as: :string
        =render 'controls', f: f, operation: @operation 
```

在我的控件表单中，无论控制器如何，我都只显示 CRUD 按钮，我有：

**_controls.html.haml**

```
-if(operation=="new")
  link_to "Create", @new_path, class: "btn btn-success"
-else
  -if(operation=="edit")
    =f.submit "Update"
  -else
    .span3
      %table
        %tr
          %td=link_to "Edit", @edit_path(f), class: "btn btn-primary"
          %td=link_to "Delete", f, confirm: "Are you sure", method: :delete, class: "btn btn-danger" 
```

所以这适用于加载“编辑、删除和创建”按钮的索引页面。但我不知道如何正确地将控制器中的edit_information_path 分配给@edit_path，因为这需要一个编辑参数'f'。

分配@new_path = new_information_path 有效，但@edit_path 需要'f'。有什么技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:14:33.313

试试这个：

```
link_to "Edit",{:controller => params[:controller], :action => :edit, :id => f.object.id}, class: "btn btn-primary" 
```

或者：

```
link_to "Edit",{:controller => controller_name, :action => :edit, :id => f.object.id}, class: "btn btn-primary" 
```

# php - PHP 在邮件中显示生成的图像

> ID：15482186
> 
> 赞同：1
> 
> 时间：2013-03-18T16:40:23.440
> 
> 标签：php, html, email

因此，当用户注册时，他们会收到一封电子邮件，而我正在尝试将图像添加到该电子邮件中。该图像是使用 php 动态生成的，因此它不是静态 url。该代码有效，但是当我将其添加到电子邮件代码时，图像显示为空白。我知道代码有效，因为我已经回显了正文，并且图像在我的浏览器中显示正常，但在电子邮件中为空（我在图像周围有一个边框，边框显示出来，里面是空的）。

```
$img = "<img src='../inc/barcode.php?id=".$regid."' style='padding:5px; border:2px dashed '/>"; 
```

别处

```
$body .= $img; 
```

那么有谁知道为什么图像不会显示，以及我怎样才能让它显示呢？

此外，另一个问题是，我如何显示图像的通用 url，以便代替 /img.php?id="" 它只是读取 /img.php 或其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:54:24.507

您使用的是相对链接，而不是绝对链接。

```
$img = '<img src="http://www.mydomain.com/inc/barcode.php?id='.$regid.'" style="padding:5px; border:2px dashed" />'; 
```

# php - 带有屏幕结果的 PHP 测验

> ID：15482190
> 
> 赞同：4
> 
> 时间：2013-03-18T16:40:26.827
> 
> 标签：php, html, forms

我正在尝试根据我找到的教程创建一个简单的测验。[http://css-tricks.com/building-a-simple-quiz/](http://css-tricks.com/building-a-simple-quiz/)

不幸的是，这让我转动我的轮子，答案可能很简单。

我得到了这个完美的工作。我想更改功能。我希望它做其他事情，而不是计算答案。

1.  我想再次显示问题。
2.  此外，选择的答案和正确的答案。回应答案，**而不是**字母 A、B、C、D。

对我来说，进行测验并说您错过了 2 并且不显示错过了哪些问题，这似乎很愚蠢。

**我宁愿避免使用数据库**。它可以在屏幕上、在新屏幕上或通过电子邮件发送。没有偏好。有什么建议么？

这是来自上述网站的代码：

```
<form action="grade.php" method="post" id="quiz">
<li>

<h3>CSS Stands for...</h3>

<div>
    <input type="radio" name="question-1-answers" id="question-1-answers-A" value="A" />
    <label for="question-1-answers-A">A) Computer Styled Sections </label>
</div>

<div>
    <input type="radio" name="question-1-answers" id="question-1-answers-B" value="B" />
    <label for="question-1-answers-B">B) Cascading Style Sheets</label>
</div>

<div>
    <input type="radio" name="question-1-answers" id="question-1-answers-C" value="C" />
    <label for="question-1-answers-C">C) Crazy Solid Shapes</label>
</div>

<div>
    <input type="radio" name="question-1-answers" id="question-1-answers-D" value="D" />
    <label for="question-1-answers-D">D) None of the above</label>
</div>

</li>
</form>
<input type="submit" value="Submit Quiz" /> 
```

然后是 PHP 脚本：

```
<?php

$answer1 = $_POST['question-1-answers'];
$answer2 = $_POST['question-2-answers'];
$answer3 = $_POST['question-3-answers'];
$answer4 = $_POST['question-4-answers'];
$answer5 = $_POST['question-5-answers'];

$totalCorrect = 0;

if ($answer1 == "B") { $totalCorrect++; }
if ($answer2 == "A") { $totalCorrect++; }
if ($answer3 == "C") { $totalCorrect++; }
if ($answer4 == "D") { $totalCorrect++; }
if ($answer5) { $totalCorrect++; }

echo "<div id='results'>$totalCorrect / 5 correct</div>";

?> 
```

任何建议或链接将不胜感激。我的谷歌技能让我失望了。我想搜索的所有内容都会带来不相关的内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T17:19:27.590

为了能够回应答案，而不是你需要先存储问题的字母。您不需要使用数据库，只需使用数组即可。

如果您要使用数组，我建议将所有内容存储在数组中。由于 html 的结构是一样的，这可以节省你很多时间。您可以只写一次问题，然后在整个脚本中自动实现它。

```
<?php 

$Questions = array(
    1 => array(
        'Question' => 'CSS stands for',
        'Answers' => array(
            'A' => 'Computer Styled Sections',
            'B' => 'Cascading Style Sheets',
            'C' => 'Crazy Solid Shapes'
        ),
        'CorrectAnswer' => 'A'
    ),
    2 => array(
        'Question' => 'Second question',
        'Answers' => array(
            'A' => 'First answer of Second question',
            'B' => 'Second answer Second question',
            'C' => 'Third answer Second question'
        ),
        'CorrectAnswer' => 'C'
    )
);

if (isset($_POST['answers'])){
    $Answers = $_POST['answers']; // Get submitted answers.

    // Now this is fun, automated question checking! ;)

    foreach ($Questions as $QuestionNo => $Value){
        // Echo the question
        echo $Value['Question'].'<br />';

        if ($Answers[$QuestionNo] != $Value['CorrectAnswer']){
            echo '<span style="color: red;">'.$Value['Answers'][$Answers[$QuestionNo]].'</span>'; // Replace style with a class
        } else {
            echo '<span style="color: green;">'.$Value['Answers'][$Answers[$QuestionNo]].'</span>'; // Replace style with a class
        }
        echo '<br /><hr>';
    }
} else {
?>
    <form action="grade.php" method="post" id="quiz">
    <?php foreach ($Questions as $QuestionNo => $Value){ ?>
    <li>
        <h3><?php echo $Value['Question']; ?></h3>
        <?php 
            foreach ($Value['Answers'] as $Letter => $Answer){ 
            $Label = 'question-'.$QuestionNo.'-answers-'.$Letter;
        ?>
        <div>
            <input type="radio" name="answers[<?php echo $QuestionNo; ?>]" id="<?php echo $Label; ?>" value="<?php echo $Letter; ?>" />
            <label for="<?php echo $Label; ?>"><?php echo $Letter; ?>) <?php echo $Answer; ?> </label>
        </div>
        <?php } ?>
    </li>
    <?php } ?>
    <input type="submit" value="Submit Quiz" />
    </form>
<?php 
}
?> 
```

很酷的一点是，如果您想添加另一个问题，则无需添加任何 HTML 或任何内容。只需添加问题及其答案，正确答案，它就会自动工作！顺便说一句，这是一个文件，而不是 2 个。所以它应该提交给自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:43:37.573

基本结构类似于

```
if ($answer1 == "B") { 
   $totalCorrect++;
} else {
   $wronganswers[] = "You got #1 wrong. correct answer is B / ...text_of_answer_here ";
}

...

if ($totalCorrect != $number_of_questions) {
    echo implode($wronganswers);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:46:51.357

以下是关于网页的简单经验法则*：

html - 内容

css - 样式

javascript - 行为

只需在其中添加一些非常简单的 JS，而不仅仅是`$totalcorrect`它，它应该会实时更新。

PHP 是服务器端的，只在服务器上运行一次（并将您的网页输出到客户端）。JS 是客户端的，只要您告诉它在客户端上运行，它就会一直运行。

（*一般 jist，不完全 100% 正确，但功能齐全）

编辑：如果您正在关注 PHP 教程，这将无济于事

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-03T17:06:34.303

Try this: i edited the code of Gillian lo wong. i added a score at the end and also display your wrong answer.

```
<?php 

    $Questions = array(
        1 => array(
            'Question' => '1\. CSS stands for',
            'Answers' => array(
                'A' => 'Computer Styled Sections',
                'B' => 'Cascading Style Sheets',
                'C' => 'Crazy Solid Shapes'
            ),
            'CorrectAnswer' => 'B'
        ),
        2 => array(
            'Question' => '2\. What is the Capital of the Philippines',
            'Answers' => array(
                'A' => 'Cebu City',
                'B' => 'Davao City',
                'C' => 'Manila City'
            ),
            'CorrectAnswer' => 'C'
        )
    );

    if (isset($_POST['answers'])){
        $Answers = $_POST['answers']; // Get submitted answers.

        // Now this is fun, automated question checking! ;)

        foreach ($Questions as $QuestionNo => $Value){
            // Echo the question
            echo $Value['Question'].'<br />';

            if ($Answers[$QuestionNo] != $Value['CorrectAnswer']){
                 echo 'You answered: <span style="color: red;">'.$Value['Answers'][$Answers[$QuestionNo]].'</span><br>'; // Replace style with a class
                 echo 'Correct answer: <span style="color: green;">'.$Value['Answers'][$Value['CorrectAnswer']].'</span>';
            } else {
                echo 'Correct answer: <span style="color: green;">'.$Value['Answers'][$Answers[$QuestionNo]].'</span><br>'; // Replace style with a class
                echo 'You are correct: <span style="color: green;">'.$Value['Answers'][$Answers[$QuestionNo]].'</span>'; $counter++;

            }

            echo '<br /><hr>'; 
                                    if ($counter=="") 
                                    { 
                                    $counter='0';
                                    $results = "Your score: $counter/2"; 
                                    }
                                    else 
                                    { 
                                    $results = "Your score: $counter/2"; 
                                    }
                }                           echo $results;
    } else {  
    ?>
        <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" id="quiz">
        <?php foreach ($Questions as $QuestionNo => $Value){ ?>

            <h3><?php echo $Value['Question']; ?></h3>
            <?php 
                foreach ($Value['Answers'] as $Letter => $Answer){ 
                $Label = 'question-'.$QuestionNo.'-answers-'.$Letter;
            ?>
            <div>
                <input type="radio" name="answers[<?php echo $QuestionNo; ?>]" id="<?php echo $Label; ?>" value="<?php echo $Letter; ?>" />
                <label for="<?php echo $Label; ?>"><?php echo $Letter; ?>) <?php echo $Answer; ?> </label>
            </div>
            <?php } ?>

        <?php } ?>
        <input type="submit" value="Submit Quiz" />
        </form>
    <?php 
    }
    ?> 
```

# jquery - 禁用 Html 控件

> ID：15482191
> 
> 赞同：0
> 
> 时间：2013-03-18T16:40:29.087
> 
> 标签：jquery, html, xhtml

我有一个带有 HTML 控件的 aspx 页面，基于按钮单击功能，我想更改控件的可见性。如果用户单击编辑，我想禁用控件，否则（新）启用控件。请建议我这样做.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:56:38.277

在所有下拉列表中添加一个类（例如：class="test"），然后单击、启用或禁用。见小提琴：http: [//jsfiddle.net/KPfvw/](http://jsfiddle.net/KPfvw/)

```
$("#btnNew").click(function() {
    $(".test").prop("disabled", false);
});

$("#btnEdit").click(function() {
    $(".test").prop("disabled", true);
}); 
```

# java - 片段替换并不总是有效

> ID：15482192
> 
> 赞同：2
> 
> 时间：2013-03-18T16:40:29.523
> 
> 标签：java, android, android-fragments

这是我的情况：

我有几个片段动态添加到 FragmentStatePagerAdapter，这很好用。但是现在我希望能够在按下按钮时替换片段。

```
public class QuestionFragment extends UpperFragment {

      ...

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    setRetainInstance(true);
    CustomViewPager.enabled = true;

    View rootView = inflater.inflate(R.layout.question, container, false);

    Button btn = ((Button) rootView.findViewById(R.id.bQuestion));

    if (how == true) {
        btn.setVisibility(View.VISIBLE);
        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // lijst afgaan met alle how en kijken welke id nodig is

                for (int i = 0; i < XmlParserSax.howFragments.size(); i++) {
                    Fragment how = XmlParserSax.howFragments.get(i);

                    if (howId.equals(((UpperFragment) how).getIdNum())) {

                        FragmentTransaction transaction = getFragmentManager()
                                .beginTransaction();
                        transaction
                                .replace(R.id.flQuestion, how, "howFragment")
                                .setTransition(
                                        FragmentTransaction.TRANSIT_FRAGMENT_OPEN)
                                .addToBackStack(null).commit();
                        break;

                    }

                }

            }
        });
    } else {
        btn.setVisibility(View.GONE);
    }

    return rootView;
} 
```

因此，当我按下按钮时，当前布局（R.id.flQuestion）被新片段替换。这行得通，但棘手的部分来了：

当我滑动到下一个片段并使用按钮滑动到片段时，它会继续工作，但是如果我滑动 2 次到下一个片段（相同类型的 QuestionFragment），它会执行新片段的功能，但不会显示新片段..所以它似乎不能替换 R.id.flQuestion 因为它可能存储在内存中？

即使接下来的 2 个片段具有相同的类型和相同的布局（R.id.flQuestion），我也需要确保始终替换片段。

这是新 frag 的类布局

```
public class HowFragment extends UpperFragment {
 ..
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    setRetainInstance(true);
    View rootView = inflater.inflate(R.layout.how, container, false);

    //if back key pressed return to layout of Question
    rootView.setFocusableInTouchMode(true); //this line is important
    rootView.requestFocus();
    rootView.setOnKeyListener( new View.OnKeyListener()
    {
        @Override
        public boolean onKey( View v, int keyCode, KeyEvent event )
        {
            if( keyCode == KeyEvent.KEYCODE_BACK )
            {
                CustomViewPager.enabled = true;
                return false;
            }
            return true;
        }
    } );

    //don't allow pushing button again
    rootView.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            return true;

        }

    });

    return rootView;
} 
```

同样重要的是要告诉：我对两个片段都使用了框架布局（因此 xml 中没有硬编码的片段标签）

说清楚：当下一个片段来自不同的类时会发生这种情况，没问题 ![普通的](../Images/82fff3cf0913d94106d2796fad92736c.png)

当下一个片段来自相同的布局和类时会发生这种情况： ![问题](../Images/94860e92e16536544be22ec630374eb2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:05:16.590

我必须测试代码，但据我所知，最简单的方法是获取新的 Fragment，即使它是同一个片段类。

> 片段方法 = XmlParserSax.howFragments.get(i);

如果此函数返回片段的新实例，它应该可以工作。

希望有帮助

编辑 ：

我很确定活动可以在创建片段后访问按钮。否则，您需要一个处理程序来传递单击以在适配器中处理它。我看到您的片段列表是静态的（不推荐）。由于您没有为如何设置 pageradapter 添加任何代码，因此我不知道您使用的是哪个列表，但您需要更改该列表中的项目。从你初始化pager的Activity中，你可以调用public函数来替换当前pager item pager。（您可以使用 ViewPager.getCurrentItem()）

我还没有测试过，所以你可能需要调整和玩来完善它。

希望这可以帮助。

这是一个示例：

> ```
>  public static class MyAdapter extends FragmentStatePagerAdapter {
>   ArrayList<Fragment> fragmentArray = new ArrayList<Fragment();
>    public MyAdapter(FragmentManager fm) {
>        super(fm);
>    }
> 
>    //didn't put in the function to populate the list with fragments
> 
>   public void replaceItem(Fragment newFrag, int pos){
>        fragmentArray.remove(pos);
>        fragmentArray.add(pos,newFrag);
>        notifyDataSetChanged();
>   }
> 
>   @Override
>    public int getCount() {
>        return fragmentArray.size();
>    }
> 
>    @Override
>    public Fragment getItem(int position) {
>        return fragmentArray.get(position);
>    } 
> ```
> 
> }

# replace - 是否有在不同文件中查找相同部分的应用程序？

> ID：15482196
> 
> 赞同：0
> 
> 时间：2013-03-18T16:40:41.417
> 
> 标签：replace, copy-paste

我有一个遗留的 HTML 网站，我需要添加一些功能。看看它，我注意到每个 HTML 文件中有许多“通用”部分 - 页脚、一些脚本块、标题等。我想将所有这些部分移动到单独的文件中（现在使用 SSI 包含它们） -这将使项目的理解更加容易。但是，有些块看起来相似但有些不同（例如不同的类名）。如此简单的剪切/粘贴是行不通的——我必须仔细检查我移除的每一块。我不想那样做——文件太多了。我想知道是否有一个应用程序可以比较一堆文件并找到相同的块（不一定存在于所有文件中）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:56:50.320

你想要一个[克隆检测器](http://en.wikipedia.org/wiki/Duplicate_code)。

许多克隆检测器只会发现相同的代码行或相同的标记序列。那些对你不起作用。您需要一个了解如何检测参数化克隆的克隆检测器。

一些基于令牌的检测器会发现只有很小变化的克隆作为参数；例如，如果它*只是*一个不同的类名，这些可能对你有用。这种检测器通常会产生非结构化的克隆序列；以下是从基于令牌的检测器的角度进行的克隆：

```
 }   void  foo( 
```

和

```
 }

   void bar( 
```

为避免此类克隆，令牌检测器通常坚持使用非常长的令牌序列，这意味着它们可能会错过大小适中但有趣的克隆。

我们的 CloneDR 将找到参数可能是复杂结构的参数化克隆。它通过解析感兴趣的代码并比较抽象语法树来做到这一点，抽象语法树代表基本代码减去所有布局和空白。在树或树序列不同的情况下，它可以建议代表整个子树的参数（例如，表达式、htmt 标记组、属性的存在/不存在等）。因为它在树上操作，所以它不能提出上面那种克隆。这反过来意味着它可以找到有意义的适度大小的克隆以及大型克隆。

CloneDR 从精确的语言描述进行操作，以生成与语言结构精确匹配的克隆。有一个专门用于 HTML 的版本。

（我是架构师；您可以在 Wikipedia 页面上查看我关于 CloneDR 的技术论文。）

# c - Alarm() 可以像这样在多线程中使用吗？

> ID：15482198
> 
> 赞同：0
> 
> 时间：2013-03-18T16:40:42.727
> 
> 标签：c, alarm

我很好奇我是否能够使用 unistd c 函数执行以下操作`alarm(int signal)`

拥有我的 main.... 并为每个线程创建帽子以使用该函数初始化一个 SIGALRM，该函数应在激活时关闭我的线程。这可能吗？还是 1 SIGALRM / main 仅合法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:58:57.690

好的，首先，[`alarm()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/alarm.html)它实际上是一个*无符号*整数值，它是它到期前的秒数。所以你的例子`int signal`不是正确的实现`alarm()`，仅供参考。

就这一点而言：

`for each thread that is created to initialization a SIGALRM`
生成的`SIGALRM`内容是针对**进程**而不是每个线程完成的，因此您必须捕捉警报并制定一些内部策略来了解您为哪个线程引发并相应地处理它。一旦你有了你的处理程序，你可以一遍又一遍地发出警报，但请记住：

> 报警请求不堆叠；

所以你必须一次做这个。这仍然是可能的，但并不像您希望的那样完全直截了当。

对于我正在谈论的非常粗略的例子：

*   你有一个跟踪请求的“经理”
*   线程 1 告诉经理它需要在 10 秒内处理一些事情
*   经理“记录”这个并调用 set`alarm(10)`
*   线程 2 告诉管理器它需要在 3 秒内被唤醒
*   经理打电话`alarm(0)`来终止警报，然后打电话`alarm(3)`并注意到一旦响起，它需要调用`alarm(7)`以完成线程 1 的睡眠时间
*   在您的警报处理程序中，您只需致电经理并让它知道警报响起，它将唤醒适当的线程（2）然后为下一个重置警报。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T17:11:43.043

> 进程中的每个线程都有一个独立的信号掩码，它指示线程当前阻塞的信号集。线程可以使用 pthread_sigmask(3) 操作其信号掩码。在传统的单线程应用程序中，可以使用 sigprocmask(2) 来操作信号掩码。

来自 man 7 的信号。

问题是警报每个进程而不是每个线程都有效，因此如果线程的 sigmask 相同，则您无法真正知道哪个会收到信号。

# c++ - 类内部的 std::bind，事件系统的一般概念

> ID：15482199
> 
> 赞同：0
> 
> 时间：2013-03-18T16:40:43.923
> 
> 标签：c++, c++11, scope, lambda, conceptual

我正在开发一个基于简单[事件系统](https://github.com/immapoint/NaNO3/blob/master/src/NaNO3/System/Event.hpp)的库。

对于使用 GUI 元素（“控件”），这些是非常需要的。例如，[`Window`](https://github.com/immapoint/NaNO3/blob/master/src/NaNO3/Graphics/Window.hpp)该类有一堆事件，如“onMouseMove”、“onKeyPress”、“onKeyRelease”、.. 然而，控件的基本类是[`Control`](https://github.com/immapoint/NaNO3/blob/master/src/NaNO3/Graphics/Control.hpp)类。它有一个虚函数draw（显然是绘制控件）和一个连接控件和主窗口事件的虚函数connect（类似于Qt Signal-Slot-Concept）。

但是由于`Event`该类将`std::function<...>`指针作为主题（=> Slot），因此我不能简单地将派生控件类的成员函数与窗口事件联系起来。作为一种解决方法，我正在做以下事情：

```
class A : public Control {
    friend class Window;

    public:
        A(){
            this->eventHandler = [this] () -> void {
                 if ( someCondition ) this->onSomeCondition.notify();
            };
        }

        Event<> onSomeCondition;

    protected:
        std::function<void()> eventHandler;

        void connect(Window *window){
            window->onSomeHigherEvent.attach(&this->eventHandler);
        }

        void draw(...) const{

            drawSome(...);

        }

}; 
```

这基本上所做的是，它将一个 lambda 函数分配给`std::function<...>`构造函数中的 ，并将其附加`std::function<...>`到所选事件。

但是有一个主要问题：如果我实例化该类的更多对象会发生什么？如果我在类中指定了事件处理程序，则作为普通函数，如下所示：

```
void eventHandler() {
    if ( someCondition ) this->onSomeCondition.notify();
} 
```

并且可以将该函数分配给`std::function<...>`using `std::bind`，由于某种原因它不起作用，至少只要我使用以下调用：

```
std::bind(&A::eventHandler, this, std::placeholders::_1); // *this will not work since that's just a (reference to the?) copy to of the object. 
```

无论如何，lambda-function-workaround 似乎时间效率较低，因为它并没有真正内置到类中。有没有更有效的方法来解决这个问题？也许不是通过特别解决 lambda 函数问题，而是通过改变概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:42:50.330

我不确定你在问什么，因为我找不到问题，但是......

> `std::bind(&A::eventHandler, this, std::placeholders::_1); // *this will not work since that's just a (reference to the?) copy to of the object.`

这将创建一个具有一个未绑定参数的可调用对象，即它期望用一个参数调用，这与它不兼容，`std::function<void()>`因为这是一个期望在没有参数的情况下调用的函数。它也与您显示的成员函数不兼容`eventHandler`，因为它也没有参数。

也许你只是想使用`std::bind(&A::eventHandler, this);`

# javascript - Jquery内部ajax（get）在phonegap + android 2.2上不起作用

> ID：15482202
> 
> 赞同：0
> 
> 时间：2013-03-18T16:40:52.830
> 
> 标签：javascript, android, jquery, cordova, mobile

我不确定问题是在请求中还是在结果显示中，但这对我不起作用，当我点击手机上的链接时，我在桌面（Chrome）上看到白屏工作没有问题。

```
$('a').on('click', function(click_event){
  $.get($(this).attr('href'),function(response_text){
    $('body').html(response_text)           
 })
 click_event.preventDefault()
 return false
}) 
```

'Debugging' with weinre 它告诉我它进入了get函数......我正在使用PhoneGap Build并且没有设置config.xml，但是当我在手机上安装应用程序时，它会询问访问互联网的权限...

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:35:25.487

href 中的 URL 是什么？

它是外部 URL 还是本地路径？

如果是后者，请在此处阅读白名单指南...

[http://docs.phonegap.com/en/2.5.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.5.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T06:36:36.167

我通过在 get 调用中添加最后一个参数“dataType”作为“html”解决了这个问题，由于某种原因，它假设了另一种类型的内容（我猜是 xml 或 json）。现在一切正常:)

# coronasdk - 在 Android 设备中加载图像需要太多时间？

> ID：15482208
> 
> 赞同：1
> 
> 时间：2013-03-18T16:41:08.453
> 
> 标签：coronasdk

在我的游戏中，我使用了更多的物理对象。因此加载图像需要花费很多时间。但仅在 android 设备中。在模拟器中它运行完美。但我在 android 设备中遇到问题。请帮助我。在所有物理对象加载它之后运行良好。但在changescene中花费了一些时间。我在网上搜索但我没有得到任何解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:12:13.283

我认为您可能会在更改场景操作时删除并重新创建图像。在执行任何操作之前尝试加载所有图像。您可以简单地将它们加载到设备的内存中：

```
display.newImageRect( name, xVal, yVal ) 
```

# c# - 从另一个项目相同的解决方案 asp.net mvc 访问文件

> ID：15482213
> 
> 赞同：1
> 
> 时间：2013-03-18T16:41:24.210
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, filepath

我有解决方案“解决方案”和两个项目：

*   **solution.WebUI**（这里用户将文件上传到某个文件夹，如“~/uploads”
*   **solution.WebApi**（这里我必须访问用户文件）

在 web api 项目中，我访问如下文件：

```
 public HttpResponseMessage GetPdfPage()
    {
        HttpResponseMessage responce =  new HttpResponseMessage();
        responce.Content = new StreamContent(new FileStream(HttpContext.Current.Server.MapPath("~/somefile.pdf"), FileMode.Open, FileAccess.Read));
        responce.Content.Headers.ContentType = new MediaTypeHeaderValue("application/pdf");

        return responce;
    } 
```

我必须如何修改文件路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:45:30.863

我认为共享文件夹是一个更好的解决方案 [http://support.microsoft.com/kb/324267](http://support.microsoft.com/kb/324267)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-28T05:29:46.933

我也遇到了类似的问题，我需要在相同的解决方案下从 BLL 项目访问另一个项目（主）的上传文件夹。为此，我为 Upload 文件夹使用了绝对路径（未硬编码）。我认为下面的代码也应该适合你。

```
public HttpResponseMessage GetPdfPage()
    {
        HttpResponseMessage responce =  new HttpResponseMessage();
        string basePath = System.AppDomain.CurrentDomain.BaseDirectory;
        responce.Content = new StreamContent(new FileStream(HttpContext.Current.Server.MapPath(basePath +"somefile.pdf"), FileMode.Open, FileAccess.Read));
        responce.Content.Headers.ContentType = new MediaTypeHeaderValue("application/pdf");

        return responce;
    } 
```

# xamarin.ios - 将 Monotouch.Dialog 元素值保存到文件

> ID：15482225
> 
> 赞同：1
> 
> 时间：2013-03-18T16:42:03.820
> 
> 标签：xamarin.ios, monotouch.dialog

我正在使用 MonoTouch 开发我的 iPhone 应用程序。我想使用单触。用于向客户端显示一些数据并让他们更改数据然后再次将它们保存到文件的对话框。

我的代码类似于 Xamarin 教程的代码：（原始 [示例链接）](http://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog/reflection_api_walkthrough)

```
public enum Category
{
    Travel,
    Lodging,
    Books
}

public class ExpesObject{
    public string name;
}

public class Expense
{
    [Section("Expense Entry")]

    [Entry("Enter expense name")]
    public string Name;
    [Section("Expense Details")]

    [Caption("Description")]
    [Entry]
    public string Details;
    [Checkbox]
    public bool IsApproved = true;
    [Caption("Category")]
    public Category ExpenseCategory;
} 
```

它代表了`TableView`如此美好。但问题是，我们如何保存这些元素的数据并在其他类应用程序中使用它们？这样做的最佳方法是什么？我猜我们可以在用户更改数据时将数据保存到文件中。但是我们如何检测用户何时更改数据呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:00:51.170

在您展示的示例中，您使用的是 Monotouch.Dialog 的简单反射 API。虽然这很好也很容易，但它确实限制了你可以做的事情。我建议学习使用 Monotouch.Dialog 的 Elements API ( [http://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog/elements_api_walkthrough](http://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog/elements_api_walkthrough) )，它可以让您更好地控制每个项目表，并能够检测到变化等。

每个表格单元格（例如，名称是一个单元格，您可以对其进行编辑）在某些事情发生时具有操作/事件，例如更改文本。

例如，可以使用执行以下操作的元素 API 制作上面的屏幕。

```
public class ExpenseViewController : DialogViewController
{
    EntryElement nameEntry;

    public ExpenseViewController() : base(null, true)
    {
        Root = CreateRootElement();

        // Here is where you can handle text changing
        nameEntry.Changed += (sender, e) => {
            SaveEntryData(); // Make your own method of saving info.
        };
    }

    void CreateRootElement(){
         return new RootElement("Expense Form"){
             new Section("Expense Entry"){
                 (nameEntry = new EntryElement("Name", "Enter expense name", "", false))
             },
             new Section("Expense Details"){
                 new EntryElement("Description", "", "", false),
                 new BooleanElement("Approved", false, ""),
                 new RootElement("Category", new Group("Categories")){
                     new CheckboxElement("Travel", true, "Categories"),
                     new CheckboxElement("Personal", false, "Categories"),
                     new CheckboxElement("Other", false, "Categories")
                 }
             }
         };
    }

    void SaveEntryData(){
        // Implement some method for saving data. e.g. to file, or to a SQLite database.
    }

} 
```

考虑这些领域以开始使用 Elements API： 来源：[https ://github.com/migueldeicaza/MonoTouch.Dialog](https://github.com/migueldeicaza/MonoTouch.Dialog)

MT.D 介绍：[http ://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog](http://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog)

MT.D 元素演练：[http ://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog/elements_api_walkthrough](http://docs.xamarin.com/guides/ios/user_interface/monotouch.dialog/elements_api_walkthrough)

# mysql - MYSQL“您的 SQL 语法有错误”，使用 LIKE 命令

> ID：15482227
> 
> 赞同：1
> 
> 时间：2013-03-18T16:42:11.007
> 
> 标签：mysql

我有一个查询：

```
SELECT cricketTarget FROM ifTable WHERE  ifAlias LIKE '06K284646%'; 
```

而MYSQL的答案是

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'LIKE '06K284646%'' at line 1 
```

这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:49:18.127

尝试

```
SELECT cricketTarget FROM ifTable WHERE  ifAlias LIKE '%06K284646%';
                                                    // ^ Add a percentage here. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:50:57.723

在 `` 符号之间使用 ifAlias，因为它看起来像 ifAlias 是一个关键字

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-19T13:23:19.410

问题就这样解决了——我对查询进行了如下修改：

```
SELECT cricketTarget FROM ifTable WHERE ifTable.ifAlias LIKE '%06K284646%' 
```

现在它工作正常。Tnx 给所有人！

# clojure - Clojure中可变参数函数中除第i个变量外的所有变量

> ID：15482231
> 
> 赞同：2
> 
> 时间：2013-03-18T16:42:14.710
> 
> 标签：clojure

我开始学习 Clojure，并试图实现一些基本的数值导数函数以供练习。我正在尝试创建一个`gradient`接受 n 变量函数和评估它的点的函数。为了以“功能”风格做到这一点，我想将渐变实现为`map`1 变量导数。

一元导数函数很简单：

```
(defn derivative 
"Numerical derivative of a univariate function."
[f x]
    (let [eps 10e-6] ; Fix epsilon, just for starters.
          ; Centered derivative is [f(x+e) - f(x-e)] / (2e)
          (/ (- (f (+ x eps)) (f (- x eps))) (* 2 eps)))) 
```

我想沿着这些线设计渐变：

```
(defn gradient
"Numerical gradient of a multivariate function."
[f & x]
    (let [varity-index          (range (count x))
        univariate-in-i (fn [i] (_?_))] ; Creates a univariate fn
                                         ; of x_i (other x's fixed)
        ;; For each i = 0, ... n-1:
        ;; (1) Get univariate function of x_i
        ;; (2) Take derivative of that function
        ;; Gradient is sequence of those univariate derivatives.

        (map derivative (map univariate-in-i varity-index) x))) 
```

因此，`gradient`具有可变的 arity（可以接受任何数量的 x），以及 x 的计数顺序。该函数`univariate-in-i`接受一个索引`i = 0, 1, ... n-1`并通过部分输出除 之外的所有变量来返回一个 1 变量函数`x_i`。例如，你会得到：

```
#(f x_0 x_1 ... x_i-1 % x_i+1 ... x_n)
                      ^
                     (x_i still variable) 
```

`map`-ping 这个函数`varity-index`在 each 中得到一个 1 变量函数序列`x_i`，然后对这些函数进行`map`-ping得到每个导数序列，这是我们想要的梯度。`derivative``x_i`

我的问题是：我不确定实施的好方法`univariate-in-i`是什么。我基本上需要填写 x 的值，`f`除了在某个特定位置（即，放置`%`上面），但以编程方式。

我对技术比对解决方案更感兴趣（即，我知道如何计算梯度，我正在尝试学习函数式编程和惯用的 Clojure）。因此，我想坚持将梯度视为偏出函数上的一维导数的映射的策略。但是，如果有更好的“功能”方法，请告诉我。如果可能的话，我宁愿不求助于宏。

提前致谢！

**更新：**

使用下面 Ankur 的答案，我得到的梯度函数是：

```
(defn gradient
"Numerical gradient of a multivariate function."
[f & x]
    (let [varity-index     (range (count x))
          x-vec            (vec x)
          univariate-in-i 
             (fn [i] #(->> (assoc x-vec i %) (apply f)))]

       (map derivative (map univariate-in-i varity-index) x))) 
```

这正是我所希望的，并且看起来非常简洁和实用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:06:20.987

你可以定义`univariate-in-i`如下。（假设所有其他位置值都在某个 var default 中定义，它是一个向量）

```
(fn [i] #(->>
           (assoc default i %)
           (apply f))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-30T08:56:04.700

如果您发现这有点难以理解（在如何实现渐变的上下文中），使用 clojure 的多变量渐变实现的另一个变体： [![在此处输入图像描述](../Images/8126774e02a91ca09b376e23b2103d44.png)](https://i.stack.imgur.com/frt1S.png) 那么，给定`f and vector v of a1,....,aN`，将在除 xi 之外的所有变量都固定的情况下进行区分：

```
(defn partial-diff [f v i]
  (let [h 10e-6
        w (update v i + h)]
    (/ (- (apply f w) (apply f v))
       h)))

(defn gradient [f v]
  (map #(partial-diff f v %) (range (count v)))) 
```

=>

```
(gradient (fn [x y] 
              (+ (* x x) (* x y y))) [3 3])
=> (15.000009999965867 18.000030000564493) 
```

# c - 非套接字上的套接字操作，C中的客户端服务器程序

> ID：15482234
> 
> 赞同：4
> 
> 时间：2013-03-18T16:42:22.040
> 
> 标签：c, sockets

我是套接字编程的新手，我正在尝试编写一个简单的套接字来连接我 PC 上的另一个套接字（`nc -l 35353`）

尝试绑定套接字时不断收到错误，我不知道如何调试它。

* * *

**更新：**套接字调用返回 0 作为文件描述符，虽然手册页没有说这是非法的，但我认为 unix/linux 默认为 stdin、stdout 和 stderr 保留 fd 0、1 和 2。我不确定这是否与我看到的绑定错误有关，我只是觉得这可能是合适的。

这是代码

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<netinet/in.h>
#include<sys/types.h>
#include<sys/socket.h>

//typedef struct sockaddr_in sockaddr_in;

int main()
{
    int sock_fd;
    if( sock_fd = socket(AF_INET, SOCK_STREAM, 0) < 0)
    {
        perror("Socket Creation error!\n");
        return 1;
    }
    struct sockaddr_in myaddr;

    memset((char*)&myaddr, 0, sizeof(myaddr));
    myaddr.sin_family = AF_INET;
    uint32_t myip = (127<<24)|(0<<16)|(0<<8)|1;
    myaddr.sin_addr.s_addr = htonl(myip);
    myaddr.sin_port = htons(1337);

    int binderror = bind(sock_fd, (struct sockaddr*)&myaddr, sizeof(myaddr));
    printf("bind error %d\n",binderror);
    if( binderror < 0)
    {
        perror("Bind Error!\n");
        return 1;
    }

    struct sockaddr_in serveraddr;

    memset((char*)&serveraddr, 0, sizeof(serveraddr));
    serveraddr.sin_family = AF_INET;
    serveraddr.sin_port = htons(35353);
    //unsigned char serverip[] = {127,0,0,1};
    uint32_t serverip = (127<<24)|(0<<16)|(0<<8)|1;
    serveraddr.sin_addr.s_addr = htonl(serverip);

    if( connect(sock_fd, (struct sockaddr*)&serveraddr, sizeof(serveraddr)) < 0 ){
        perror("Could not connect\n");
        return 0;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:05:04.327

你的问题在这里——

```
if( sock_fd = socket(AF_INET, SOCK_STREAM, 0) < 0) 
```

这是旧的优先级， `if ( a = b == c )`就像说它`if ( a = ( b == c ))`
正在调用函数，将其与布尔结果进行比较`-1`并将布尔结果分配给`sock_fd`

你应该做的是——

```
if( (sock_fd = socket(AF_INET, SOCK_STREAM, 0)) < 0) 
```

# jpa - Spring Data JPA 获取

> ID：15482235
> 
> 赞同：8
> 
> 时间：2013-03-18T16:42:24.220
> 
> 标签：jpa, spring-data, spring-data-jpa

有没有办法定义一个 Spring 数据规范（返回一个 JPA 谓词），其唯一目的是执行急切的获取？

我有一个使用延迟加载定义各种关系的实体，但是有几个查询我想返回包括所有相关集合在内的整个实体表示，但这些查询的标准可能会有所不同。我看过一些帖子（例如在[spring 论坛上](http://forum.springsource.org/showthread.php?115594-Custom-fetch-groups-with-Spring-Data-JPA...possible)）讨论了可能引入 fetch 组，这可能是理想的解决方案；但是，由于这还不是 JPA 规范的一部分，因此 Spring Data 不提供对它的支持。

我正在寻找一种可重用的方法来对各种动态查询执行急切获取。

例如，我考虑开发一个可重用的规范，其唯一目的是执行预加载，并且可以与其他规范结合，例如：

```
private static Specification<MyEntity> eager() {

    return new Specification<MyEntity>() {

        @Override
        public Predicate toPredicate(Root<MyEntity> root, CriteriaQuery<?> query, CriteriaBuilder cb) {
            for (PluralAttribute<? super MyEntity, ?, ?> fetch : root.getModel().getPluralAttributes()) {
                root.fetch(fetch, JoinType.LEFT);
            }
            query.distinct(true);
            return null;
        }

    };
} 
```

本规范的目标是在各种查询中重用它，例如：

```
repository.findAll(where(eager()).and(otherCriteria).or(otherCriteria)); 
```

但是，Eager fetching 规范不是真正的谓词，因此它返回，并且在与其他谓词链接时`null`会导致明显的问题（即）。`NullPointerExceptions`

（请注意，*仅*此谓词确实按预期工作；即以下查询将正确获取：）`repository.findAll(eager());`。

是否有可以从“eager”规范返回的适当的非空谓词，或者是否有任何其他可重用的方法来触发使用 Spring Data JPA 规范的渴望获取（无需将渴望加载到另一个规范上）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T12:56:40.343

我们在修复[DATAJPA-300](https://jira.springsource.org/browse/DATAJPA-300)`null` `Specification`的过程中改进了s 和s 的处理。您可能想尝试一下 1.4 快照，看看这会如何影响您的场景。`Predicate`

# python - Python中的数据比较

> ID：15482242
> 
> 赞同：0
> 
> 时间：2013-03-18T16:42:41.573
> 
> 标签：python, uml

我有这样的UML图：

```
                   学校
                      |
                   老师
                      |
                   孩子们  

```

我正在访问类`School`、`Teache`r 和`Children`python 中的数据，如下所示：

```
for Teacher in School.getTeachers():
        print Teacher.getName()
        for Children in Teacher.getChildrens():
            print Children.getName() 
```

这是我得到的输出：

```
史密斯先生
一种
乙
C
D
乙
F
保罗先生
D
乙
F
```

我想比较下`teacher1`每个孩子的名字和老师二下的每个孩子的名字。

这两个的输出应该是：

> A,B,C 不在 Paul 先生手下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:48:01.700

# 基本代码

使用集合，像这样：

```
teachers = list(School.getTeachers())
teacher1 = teachers[0]
teacher2 = teachers[1]

diff = set(teacher1.getChildrens()) - set(teacher2.getChildrens())
print "%s are not under %s" % (", ".join(c.getName() for c in diff), teacher2.getName()) 
```

# 扩展示例

```
>>> class Student(object):
...     def __init__(self, name):
...         self.name = name
...     def getName(self):
...         return self.name    
... 
>>> class Teacher(object):
...     def __init__(self, name, students):
...         self.name = name
...         self.students = students
...     def getChildrens(self):
...         return self.students
...     def getName(self):
...         return self.name
... 
>>> class School(object):
...     def __init__(self, teachers):
...         self.teachers = teachers
...     def getTeachers(self):
...         return self.teachers
... 
>>> students = [Student("A"), Student("B"), Student("C"), Student("D"), Student("E"), Student("F"), ]
>>> s = Teacher("Smith", students)
>>> p = Teacher("Paul", students[3:])
>>> school = School([s, p])
>>> 
>>> teachers = list(school.getTeachers())
>>> teacher1 = teachers[0]
>>> teacher2 = teachers[1]
>>> 
>>> diff = set(teacher1.getChildrens()) - set(teacher2.getChildrens())
>>> print "%s are not under %s" % (", ".join(c.getName() for c in diff), teacher2.getName())
B, C, A are not under Paul 
```

# c++ - 在使用动态共享内存分配的情况下正确的内核调用

> ID：15482245
> 
> 赞同：0
> 
> 时间：2013-03-18T16:42:56.683
> 
> 标签：c++, cuda, shared-memory

开发商，

有人可以给我一个提示吗？我没有找到任何关于如何在同一个内核中分配常量和动态共享内存的信息，或者让我们更珍贵地问：如何调用一个内核，其中需要分配的共享内存量在编译时只是部分知道？以[分配共享内存](https://stackoverflow.com/questions/5531247/allocating-shared-memory)为例，如何进行动态分配变得非常明显。但是让我们假设我有以下内核：

```
__global__ void MyKernel(int Float4ArrSize, int FloatArrSize)
{
  __shared__ float Arr1[256];
  __shared__ char  Arr2[256];
  extern __shared_ float DynamArr[];
  float4* DynamArr1 = (float4*) DynamArr;
  float* DynamArr = (float*) &DynamArr1[Float4ArrSize];

  // do something
} 
```

内核调用：

```
int SharedMemorySize = Float4ArrSize + FloatArrSize;

SubstractKernel<<< numBlocks, threadsPerBlock, SharedMemorySize, stream>>>(Float4ArrSize, FloatArrSize) 
```

我实际上无法弄清楚编译器如何将共享内存的大小仅链接到我想要动态分配的部分。或者参数“SharedMemeorySize”是否代表了每块共享内存的总量，所以我需要计算常量内存的大小（int SharedMemorySize = Float4ArrSize + FloatArrSize + 256*sizeof(float)+ 256*sizeof(char)） ?

请赐教或只是简单地指向一些代码片段。提前非常感谢。

欢呼格雷格

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:06:11.457

引用编程指南，`SharedMemorySize`指定除了静态分配的内存之外，每个块动态分配的共享内存中的字节数；这个动态分配的内存被声明为外部数组的任何变量使用。`SharedMemorySize`是一个可选参数，默认为 0。

因此，如果我了解您想要做什么，它可能看起来像

```
extern __shared_ float DynamArr[];
float*  DynamArr1 = DynamArr;
float4* DynamArr2 = (float4*) &DynamArr[DynamArr1_size]; 
```

请注意，我没有测试它。

[这](https://stackoverflow.com/questions/5531247/allocating-shared-memory)是非常有用的帖子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:05:37.017

来自[CUDA 编程指南](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#c-language-extensions)：

> [kernel's] 执行配置是通过在函数名和带括号的参数列表之间插入 <<< Dg, Db, Ns, S >>> 形式的表达式来指定的，其中：
> 
> *   **Ns 是 size_t 类型，指定除了静态分配的内存之外，每个块动态分配的共享内存中的字节数；这个动态分配的内存被声明为外部数组的任何变量使用，如[__ *shared* __](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#shared)中所述；Ns 是一个可选参数，默认为 0；**

所以基本上，您在内核调用期间指定的共享内存大小与动态分配的共享内存有关。您不必在共享内存中手动添加静态分配数组的大小。

# mongodb - GORM - 使用 mongoDB 时似乎忽略了唯一约束

> ID：15482246
> 
> 赞同：1
> 
> 时间：2013-03-18T16:43:07.057
> 
> 标签：mongodb, grails, unique-constraint, grails-domain-class, database

这是域类：

```
class User {
    String name
    String email

    static constraints = {
        name()
        email(unique: true)
    }
} 
```

当我调用 save 方法时，电子邮件唯一属性被忽略，并创建了重复记录。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:31:35.477

找到了解决方案：

```
 static mapping = {
    email index:true, indexAttributes: [unique:true]
 } 
```

# php - 获取公共或基本目录

> ID：15482247
> 
> 赞同：1
> 
> 时间：2013-03-18T16:43:09.250
> 
> 标签：php, laravel, laravel-4

当您使用 base_path() 或 public_path() 时，结果包含 bootstrap/.. 或 bootstrap/../public 因为路径取自 bootstrap/paths.php 文件。有什么方法可以只获取真正的基本路径吗？

例如：/homepages/0/d271770356/htdocs/ 或 /homepages/0/d271770356/htdocs/public

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:48:12.653

PHP 有一个名为[realpath()](http://uk3.php.net/manual/en/function.realpath.php)的函数。但是，在大多数情况下，这不是必需的，因为文件功能通常可以正常工作`..`。

# android - 使用 ant 构建 android 应用程序

> ID：15482248
> 
> 赞同：0
> 
> 时间：2013-03-18T16:43:10.597
> 
> 标签：android, ant

我需要使用其他库编译我的应用程序。问题是我不想在我的应用程序中包含外部库。

在 Eclipse 中，我可以选择是否要与我的应用程序一起导出选定的库/源。

我如何修改 ant 脚本以简单地跳过给定的库，并且在构建 apk 时不包含它们？

此外，任何有关 adt 插件如何创建 apk 的信息都会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:55:43.773

使用 Proguard 中的[libraryjars](http://proguard.sourceforge.net/index.html#manual/usage.html)选项。它从输出中跳过 jar。引用文档。

> 指定要处理的应用程序的库 jar（或 war、ears、zip 或目录）。这些 jar 中的文件不会包含在输出 jar 中。

[proguard android](http://proguard.sourceforge.net/index.html#manual/examples.html)示例可以让您开始使用配置文件。Proguard 也可以从 ant 中调用。

# node.js - Nest 恒温器如何通信

> ID：15482257
> 
> 赞同：4
> 
> 时间：2013-03-18T16:43:26.653
> 
> 标签：node.js, heroku, raspberry-pi

我想构建一个类似于 Nest Thermostat 的基于 Raspberry Pi (RPi) 的设备，只是我想控制电灯开关。我知道我可以轻松地在 RPi 上编写 Node.js 脚本，然后将其连接到我的本地路由器并使用连接到同一路由器的 PC 来控制它。

但是，我想让它更像一个 Nest。我希望能够通过像 Heroku 这样的云提供商跨不同子网控制 20 个（或更多）RP。

Nest 恒温器不需要用户打开路由器上的端口，以便 Nest 服务器可以与其通信。

Nest 如何在不启用客户路由器中的端口转发的情况下通过网络控制客户的恒温器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T18:41:53.907

博客文章[Nest Thermostat API using Node JS and Nest API Update](http://www.wiredprairie.us/blog/index.php/archives/1754)讨论了恒温器和 Nest 实验室服务器之间的 API。尤其是：

> API 主要使用 POST 到其 Web 服务器的 JSON 格式数据。

所以有你的答案。通过使用 HTTPS 定期将数据发布到 Nest Web 服务器，Nest 能够避免用户打开其路由器上的任何端口。

* * *

值得一提的是，博客文章中的非官方 API（在 node.js 中！）可在 github 上找到：[Unofficial Nest API on Node](https://github.com/wiredprairie/unofficial_nodejs_nest)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T17:45:12.323

我认为恒温器会定期发布带有恒温器序列号的请求以进行嵌套。它可能在 http 标头中设置为无限或更可能有超时，如果没有针对该设备的命令进入，nest 服务器会在一分钟左右后简单地关闭连接。每当nest 关闭连接时，恒温器就会打开一个新连接。当命令请求带有序列号时，它会快速查找以找到当前连接到该恒温器的线程。该命令在当前恒温器请求的负载中发送，执行后，连接关闭，恒温器打开一个新的请求嵌套。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-21T20:49:43.367

看看 HTML 5 标准中的 eventSource。它做所有需要的事情。

# c# - 从字符串中提取标记

> ID：15482258
> 
> 赞同：-2
> 
> 时间：2013-03-18T16:43:30.560
> 
> 标签：c#, html, regex, string, token

我有一个 html 文件，其中包含未知数量的令牌。关键字稍后将由用户分配给某些数据。我想确定 html 包含多少令牌。标记可能看起来像：¤SomeID¤ 或 ¤Name¤ 甚至 ¤SomeLongerWord¤。

有人可以给我一个带有正则表达式的完整代码，它将令牌从字符串中收集到一个列表中吗？

例子：

```
string ExtractFromThis = "Hello ¤Name¤, do you speak ¤SomeLanguage¤?"
List<string> IldLikeToHave = Magic(ExtractFromThis); 
//IldLikeToHave should contain {"¤Name¤", "¤SomeLanguage¤"} 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T17:16:36.587

您可以使用简单的正则表达式，例如`¤.*?¤`（注意非贪婪星）匹配包含在`¤`. 这是一个[示例](http://regexr.com/?345un)。您可以使用[Regex.Matches()](http://msdn.microsoft.com/en-us/library/e7sf90t3.aspx)来获取所有匹配项。

如果您对获取分隔符内的文本感兴趣，您也可以将量词放在这样的捕获组中`¤(.*?)¤`，并用于[`Match.Groups()`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.groups.aspx)获取每个匹配项的捕获组。

我不使用 C#，但这里有一个示例，它可能应该是这样的：

```
string pattern = @"¤(.*?)¤";
string input = "Hello ¤Name¤, do you speak ¤SomeLanguage¤?";
MatchCollection matches = Regex.Matches(input, pattern);
List<string> l = new List<string>();
foreach (Match match in matches) {
     l.add(match.Groups[1].Value);
} 
```

# gnuplot - GNUplot 为 pdfcairo 输出添加字体

> ID：15482262
> 
> 赞同：1
> 
> 时间：2013-03-18T16:43:36.997
> 
> 标签：gnuplot

我需要在 GNUplot 的 PDF 输出中使用一种名为 Moon Fonts TTF 的符号字体。GNUplot 在 Aqua 终端中发现它没有问题。

我试过了：

> 设置字体路径“/Users/house/Library/Fonts/MoonPhases.ttf”

和其他来自 gnuplot 帮助页面的添加字体建议没有运气。

在排版专家的一些支持下，我还尝试了一系列 .ttf、.otf、postscript 和 unicode 映射字体，但完全没有运气：pdfcairo、postscript 或 epscairo 似乎找不到它。

GNUplot 的“显示字体路径”给出：

> 系统字体路径是“/System/Library/Fonts”“/Library/Fonts”“/Users/house/Library/Fonts”

并且字体在这些路径之一中。我还尝试将它们直接放在 GN 的工作目录中。

如果有人对如何使这项工作提出建议，将不胜感激。

OSX雪豹
GNUplot 4.6.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-30T22:21:15.557

我通过 MacPorts 安装了 gnuplot。该文件夹`/opt/local/etc/fonts`包含该文件`fonts.conf`。在那里你会找到一个“字体目录列表”部分。然而，即使`~/Library/Fonts`默认情况下它是 gnuplot fontlist 变量的一部分（因此 aquaterm 能够使用它们），它也没有在此处列出（因此 pdfcairo 不能使用它们）。

快速修复是创建以下符号链接：

```
cd ${HOME}
ln -s Library/Fonts .fonts 
```

然后你的 pdfcairo 输出应该会选择在你的 Mac 上安装在用户级别的字体。我已经在 Mavericks (10.9.5) 上使用 gnuplot 4.6 对此进行了测试，它似乎工作正常。

# xml - 使用 XSL 基于 XML 的参数添加节点

> ID：15482266
> 
> 赞同：1
> 
> 时间：2013-03-18T16:43:53.013
> 
> 标签：xml, xslt, add

如果当前子元素之一等于条件，我的目标是向 XML 文件添加一个新元素。如果不满足该条件，则继续使用原始 XML 文件的当前模板。

我有一个示例 XML 文件，它下面当前包含 2 个已订购的项目。XML 文件的整体结构将保持不变，但订购的商品数量将是可变的，这可以添加额外的 AlbumOrderItems，因为每个 XML 文件的客户订单都是唯一的。

原始 XML 文件

```
<AlbumOrder> 
   <PartnerCode>ABC Company</PartnerCode> 
   <AffiliateCode>abcpro</AffiliateCode> 
   <PartnerOrderID>449</PartnerOrderID> 
   <NumItems>2</NumItems> 
   <DateTime>03/14/2013 12:16 AM</DateTime> 
<AlbumOrderItem> 
   <PartnerCode>ABC Company</PartnerCode>
   <AffiliateCode>abcpro</AffiliateCode> 
   <PartnerOrderID>449</PartnerOrderID> 
   <PartnerOrderItemID>1</PartnerOrderItemID> 
   <DateTime>03/14/2013 12:16 AM</DateTime> 
   <ProductCategory>ALBUM</ProductCategory> 
   <Quantity>2</Quantity> 
<ShipAddress> 
   <FirstName>Joe</FirstName> 
   <LastName>Black</LastName> 
</ShipAddress> 
</AlbumOrderItem>
<AlbumOrderItem> 
    <PartnerCode>ABC Company</PartnerCode> 
    <AffiliateCode>abcpro</AffiliateCode> 
    <PartnerOrderID>449</PartnerOrderID> 
    <PartnerOrderItemID>2</PartnerOrderItemID> 
    <DateTime>03/14/2013 12:16 AM</DateTime>  
    <ProductCategory>CARD</ProductCategory>  
    <Quantity>1</Quantity> 
    <Package>10</Package> 
    <NumPrints>10</NumPrints> 
<ShipAddress> 
    <FirstName>Joe</FirstName>
    <LastName>Black</LastName> 
</ShipAddress> 
</AlbumOrderItem> 
</AlbumOrder> 
```

如果 ProductCategory 等于“ALBUM”，则向 AlbumOrderItem 添加一个新元素。下面的示例 XML 输出包含两个新添加的元素，标题为：Package 和 NumPrints，它们都被添加到第一个 AblumOrderItem

所需的输出 XML

```
<AlbumOrder> 
   <PartnerCode>ABC Company</PartnerCode> 
   <AffiliateCode>abcpro</AffiliateCode> 
   <PartnerOrderID>449</PartnerOrderID> 
   <NumItems>2</NumItems> 
   <DateTime>03/14/2013 12:16 AM</DateTime> 
 <AlbumOrderItem> 
   <PartnerCode>ABC Company</PartnerCode>
   <AffiliateCode>abcpro</AffiliateCode> 
   <PartnerOrderID>449</PartnerOrderID> 
   <PartnerOrderItemID>1</PartnerOrderItemID> 
   <DateTime>03/14/2013 12:16 AM</DateTime> 
   <ProductCategory>ALBUM</ProductCategory> 
   <Quantity>2</Quantity> 
   <Package>XY</Package>      ****NODE to add
   <NumPrints>Z</NumPrints>   ****NODE to add
<ShipAddress> 
   <FirstName>Joe</FirstName> 
   <LastName>Black</LastName> 
</ShipAddress> 
</AlbumOrderItem>
<AlbumOrderItem> 
   <PartnerCode>ABC Company</PartnerCode> 
   <AffiliateCode>abcpro</AffiliateCode> 
   <PartnerOrderID>449</PartnerOrderID> 
   <PartnerOrderItemID>2</PartnerOrderItemID> 
   <DateTime>03/14/2013 12:16 AM</DateTime>  
   <ProductCategory>CARD</ProductCategory>  
   <Quantity>1</Quantity> 
   <Package>10</Package> 
   <NumPrints>10</NumPrints> 
<ShipAddress> 
   <FirstName>Joe</FirstName>
   <LastName>Black</LastName> 
</ShipAddress> 
</AlbumOrderItem> 
</AlbumOrder> 
```

我目前正在使用下面的文件，但它似乎没有应用所需的更改。它似乎只是根据默认的 XSL 模板/规则生成原始 XML 的完整副本。我不确定下面是否存在语法问题，尤其是模板匹配参数。我也不确定如何搜索或遍历整个 XML 文件中的所有 ProductCategory 元素。如果您有任何问题，请告诉我。如果 ProductCategory 等于 ALBUM 并考虑多个 AlbumOrderItems 部分，任何帮助将不胜感激，以便将节点添加到 AlbumOrderItem。

当前的 XSL 脚本

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
 <xsl:param name="TESTname">PACK_TEST</xsl:param>
 <xsl:param name="TESTvalue"><xsl:value-of select="AlbumOrder/AlbumOrderItem/Package"/>
 </xsl:param>

 <xsl:output method="xml"/>
 <xsl:template match="node()|@*">
 <xsl:copy>
 <xsl:apply-templates select="node()|@*"/>
 </xsl:copy>
 </xsl:template>

 <xsl:template match="AlbumOrderItem[ProductCategory=Album]">
 <xsl:element name="{$TESTname}"><xsl:value-of select="$TESTvalue"/></xsl:element>
 <xsl:apply-templates select="node()|@*"/>
 </xsl:template>
 </xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:58:22.027

缺少引号和错误案例见下文

```
<xsl:template match="AlbumOrderItem[ProductCategory='ALBUM']"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:52:56.520

Treemonkey 已经展示了您在路径中遇到的错误。如果您对如何在您指定的特定位置（在 ShipAddress 之前）插入这些节点感兴趣，您可以这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*" />
  <xsl:param name="TESTname">PACK_TEST</xsl:param>
  <xsl:param name="TESTvalue">
    <xsl:value-of select="AlbumOrder/AlbumOrderItem/Package"/>
  </xsl:param>

  <xsl:template match="@* | node()" name="Copy">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="AlbumOrderItem[ProductCategory = 'ALBUM']/ShipAddress">
    <xsl:element name="{$TESTname}">
      <xsl:value-of select="$TESTvalue" />
    </xsl:element>
    <xsl:call-template name="Copy" />
  </xsl:template>
</xsl:stylesheet> 
```

# .net - 如何在没有 2068 的 .NET 中获取 MQSeries 队列名

> ID：15482267
> 
> 赞同：2
> 
> 时间：2013-03-18T16:43:55.670
> 
> 标签：.net, c#-4.0, ibm-mq

我有一个正在运行的通用“数据泵”是 Windows 服务的一部分；它的一个实例存在于我正在监视的来自 MQSeries 队列的新传入消息的每个队列中。如果 Get 方法失败，我希望能够显示队列的名称，因此我正在尝试构建一个可以在 catch 处理程序中使用的调试变量。我在下面设置 debugQueueInfo 的行上得到了 2068 MQRC_SELECTOR_NOT_FOR_TYPE。

```
 debugLocation = "queueGetName";
    debugQueueInfo = "Queue:" + queueIn.RemoteQueueManagerName + ":"
                          + queueIn.RemoteQueueName;

    debugLocation = "queueGetMessage";
    queueIn.Get(mqMessage, mqGetMessageOptions); 
```

如何获取当前队列管理器名称和队列名称？变量 queueIn 的类型是 IMB.WMQ.MQQueue，我使用的是 .NET API。

当队列是对象被构建时，我使用了以下内容：

```
queueOptions = MQC.MQOO_INPUT_AS_Q_DEF + MQC.MQOO_FAIL_IF_QUIESCING + MQC.MQOO_INQUIRE + MQC.MQOO_BROWSE; 
MQQueue mqQueue = qmgr.AccessQueue(mqCloneSpecs.queueName, queueOptions); 
```

根据 2068 错误代码的文档，我认为添加 MQC.MQOO_BROWSE 可能会解决问题，但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T04:24:01.353

RemoteQueueManagerName 和 RemoteQueueName 仅对远程队列有效。我认为这就是您获得 2068 的原因。MQOO_BROWSE 选项用于获取消息而不将其从队列中删除。

您可以使用`Name`属性来获取队列名称，例如

```
debugQueueInfo = "Queue:" + queueIn.Name; 
```

`MQQueue`类没有获取队列管理器名称的属性。您必须从 MQQueueManager 实例中获取它。

# c# - 将 Collection 类分配给列表框的项目

> ID：15482272
> 
> 赞同：-3
> 
> 时间：2013-03-18T16:44:11.683
> 
> 标签：c#, collections, listbox, collectionbase

我相信应该有更简单的方法来做到这一点。我有一个基于 Collection 的类，该类是另一个类的集合。目前，每当我的班级中有新项目时，我都会将该项目分配给列表框。我似乎无法找到将集合类中的所有值分配给列表框集合的方法，因为它是一个集合。有任何想法吗？谢谢

好的，到目前为止我所做的是我在集合中使用的 Class 中有一个 tostring 覆盖。这就是我希望列表框显示的内容。

```
 public override string ToString()
    {

        return string.Format("{0} {1}: {2}", tTypev.ToString(),
                Datev.ToString("MM/dd/yyyy"), Amountv.ToString("C"));
    } 
```

这是我希望列表框中的每个项目显示的内容。

```
 class Transactions : System.Collections.CollectionBase
                {
                     ...
                } 
```

是我的集合类，包含另一个类的集合，Tansaction。目前，我使用 lstTransactions.Items.Add()、.Remove、.RemovAt 等将项目添加到列表框中，并使用 .Add()、.Remove 等将项目添加到 Collection Class、Transactions。但我试图减少对外部控件的依赖，并且只在几行代码中使用它们。我试图使用类似的东西：

```
lstTransactions.DataSource = (Transaction)myTrans; 
```

但这似乎不起作用。主要是因为我无法弄清楚 DataSource 采用了什么属性。

我也试过：

```
lstTransactions.Items = 
```

但它告诉我项目是只读的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:10:13.677

**在 Windows 窗体中：**

1.  您可以使用 DataSource 属性来绑定对象集合。
2.  DisplayMember 属性为数据源对象中的一个属性的名称。

***示例代码：*** 在下面的示例中，输出列表框将显示 2 项：Apple 和 Ball。

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

            EmployeeCollection data = new EmployeeCollection();
            data.AddEmployee(new Employee("Apple", 25));
            data.AddEmployee(new Employee("Ball", 50));

            listBox1.DataSource = data;
            listBox1.DisplayMember = "Name";
        }

    }

    public class Employee
    {
        public Employee(string name, int age)
        {
            this.Name = name;
            this.Age = age;
        }

        public int Age
        {
            get; private set;
        }

        public string Name
        {
            get; private set;
        }
    }

    public class EmployeeCollection : System.Collections.CollectionBase
    {
        public void AddEmployee(Employee employee)
        {
            this.List.Add(employee);
        }
    }
} 
```

**在 WPF 中：**

您可以使用 ListBox 的 ItemSource 属性来绑定集合（可能是 List、Enumerable、Collections.._ 完成这项工作

***示例片段：***

```
IList<string> data = new List<string>() {"A", "B"};

ListBox listBox = new ListBox();
listBox.ItemsSource = data; 
```

# .net - 如何返回默认的 DataPointStyle？

> ID：15482273
> 
> 赞同：0
> 
> 时间：2013-03-18T16:44:17.500
> 
> 标签：.net, silverlight, xaml, styles

默认情况下`ColumnSeries.DataPointStyle`非常好，但它的标签不可见。

所以我应用了自定义样式来制作可见的数据点标签，但在此之后，默认样式现在看起来很难看。

如何返回默认数据点样式并同时使数据点标签可见？谢谢你！

这是我的 XAML：

```
 <toolkit:ColumnSeries  Title="Male" ItemsSource="{Binding MaleSerie}" IndependentValueBinding="{Binding ItemName}"
            DependentValueBinding="{Binding Count}"   ToolTipService.ToolTip="{Binding Count}"
            AnimationSequence="Simultaneous"  
            HorizontalAlignment="Left" Height="304" VerticalAlignment="Top" Width="266">

            <toolkit:ColumnSeries.DataPointStyle>
                <Style TargetType="toolkit:ColumnDataPoint">
                    <Setter Property="Background" Value="Blue"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="toolkit:ColumnDataPoint">
                                <Grid>
                                    <Rectangle
                            Fill="{TemplateBinding Background}"
                            Stroke="Black"/>
                                    <Grid  Background="#aaffffff"  Margin="0"  HorizontalAlignment="Center"  VerticalAlignment="Center">
                                        <TextBlock  FontSize="10" Text="{TemplateBinding FormattedDependentValue}"  FontWeight="Bold" Width="Auto" Margin="2"/>
                                    </Grid>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </toolkit:ColumnSeries.DataPointStyle>

        </toolkit:ColumnSeries> 
```

![在此处输入图像描述](../Images/15c167993e2e23d402d9c2911b9306ad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:50:05.857

对于标准 Silverlight 控件，您通常可以从 MSDN 中找到默认样式。

示例：ComboBox 默认模板：

[http://msdn.microsoft.com/en-us/library/dd334408(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/dd334408(v=vs.95).aspx)

对于工具包，您可能需要下载源代码，复制然后修改您需要的内容。

# ios - 确定在视图中绘制的线是否被点击的最佳方法是什么？

> ID：15482274
> 
> 赞同：1
> 
> 时间：2013-03-18T16:44:20.833
> 
> 标签：ios, objective-c

我有一个视图，其中有几条线在不同方向上绘制。我需要确定用户点击了哪条线路，然后做出相应的响应。

我脑子里有几个不同的想法，但我想要最好、最有效的方法来做到这一点......

最终，对我来说最有意义的是将每一行放在单独的视图中，并像单独的对象一样对待。如果我这样做了，我是否需要将视图定位并旋转到该线的确切位置，以便我知道何时点击它？如果不是，我会假设视图将相互重叠，我将无法确定点击了哪条线。

我希望我说得通。请让我知道实现这一目标的最佳方法。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T17:03:44.083

对我来说，解决这个问题的最佳方法是将 UIView 创建为线条。如果它们只是带有纯色的线条，只需使用背景视图并相应地设置 CGRectFrame 。

为了在不处理位置等的情况下对触摸事件做出反应，请在 UIView 的 init 方法中创建一个 touchEvent，如下所示：

```
UITapGestureRecognizer *onTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(lineClicked)];
 [self addGestureRecognizer:onTap]; 
```

在 UIView 类中声明函数：

```
-(void)lineClicked {
  //You can check some @property here to know what line was clicked for example
  if (self.color == [UIColor blackColor])
      //do something
  else
      //do another thing

  // You can use a custom protocol to tell the ViewController that a click happened
  (**) if ([self.delegate respondsToSelector:@selector(lineWasClicked:)]) {
         [self.delegate lineWasClicked:self];
     }
} 
```

(**) 单击该行后，您可能希望将一些逻辑放入您的 viewController 中。解决此问题的最佳方法是在 CustomUIView.h 文件中声明 @protocol 并将 self 作为参数传递，以便 viewController 知道谁被点击：

```
@protocol LineClikedDelegate <NSObject>
@optional
- (void)lineWasClicked:(UIView *)line; //fired when clicking in the line
@end 
```

最后，在 CustomUIView 中创建一个 @property 来指向委托：

```
@property id<DisclosureDelegate> delegate; 
```

在 ViewController 中。当您将行创建为 UIViews 时，将委托设置为：

```
blackLine.delegate = self. 
```

在 ViewController 中实现该方法`- (void)lineWasClicked:(UIView *)line;`并设置好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T21:31:53.113

根据要求，我将其添加为答案：

您可以使用图层而不是视图来显示线条。这在绘图中既有效又允许命中测试以确定哪条线已被点击。

[这是](https://stackoverflow.com/questions/5847876/whats-the-best-approach-to-draw-lines-between-views/5848118#5848118)几何计算的代码。

# java - 在 Maven 中设置 cucumber-jvm 格式选项以附加所有测试执行结果

> ID：15482276
> 
> 赞同：6
> 
> 时间：2013-03-18T16:44:25.407
> 
> 标签：java, maven, cucumber-jvm

问题是关于 Maven 中的黄瓜格式选项：

在每个 Junit 中，我都有类似的东西：

```
@Cucumber.Options(format = { "pretty", "html:target/cucumber-html-report/foo" }) 
```

我在 pom 文件中添加了以下选项：

```
 <properties>
    <cucumber.options> --format html:target/cucumber-html-report/allFoos</cucumber.options>     
  </properties> 
```

生成的报告只有最后一次执行。

有没有办法做一个“追加”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T22:15:55.703

Your issue is that when cucumber runs a junit runner file it opens or creates the specified html report file you reference in the runner file. Since cucumber has no idea what each and every test runner plans on writing to when it runs, it overwrites the file if it is used by multiple test runners. There is no append that you could add to have all of your test runs write to a single file. Your best option (and best practice) is to have each junit test runner write to an individual file, with a name that is descriptive of what the test suite is testing.

# asp.net - asp.net 网络表单——发布时出现 404

> ID：15482277
> 
> 赞同：0
> 
> 时间：2013-03-18T16:44:27.973
> 
> 标签：asp.net, http-status-code-404, publish

我在让我的项目发布到服务器进行工作时遇到了一些问题。我们没有共享到项目目录或 FTP 服务器设置的文件夹，因此为了发布我必须在本地发布它，远程发布到服务器中，然后将项目文件复制/粘贴到所需位置。

我之前已经做过很多次了，没有任何问题，但由于某种原因，它现在对我不起作用。每次我访问该站点时，我都会收到 HTTP 404

我注意到的一件奇怪的事情是在 IIS 中，当我单击“基本设置”时，虚拟路径设置为 /portalDEV/Apps，别名为 UA，物理路径为 D:\websites\portalDEV\Apps\UA，当我单击在“测试设置”上，我收到一条错误消息，指出应用程序路径无效。

有任何想法吗？如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:55:55.863

在您的服务器 IIS 上，您必须创建链接应用程序物理路径的虚拟路径。

1.  您设置了别名

2.  您设置应用程序的目录

3.  在治疗结束时检查框架版本部分

![在此处输入图像描述](../Images/558922713edbea0b4e94cd77ab4d7ce0.png)

# python - 在脚本中使用 __name__ 变量时出现运行时警告

> ID：15482278
> 
> 赞同：3
> 
> 时间：2013-03-18T16:44:28.040
> 
> 标签：python, python-2.7, ubuntu-12.04

我尝试`___name__`在 python 脚本的开头使用：

```
#!/usr/bin/python
# Comments...
# blabla
#

__name__="cigarline_by_pos.py"
__synopsis__ = "cigarline_by_pos.py | INPUT_BAM_FILE  --output OUTPUT_FILE [--output OUTPUT_FILE_R2 --readsplit]"
__example__ = "cigarline_by_pos.py hg18.bam  --output hg18_read1.csv --output  hg18_read2.csv --readsplit"
__date__ = "05/2013"
__authors__ = "Frederic Escudie & Antoine Leleu"
__keywords__ = "SAM Alignment"
__description__ = "Sum by position the status of reads. This provides for example the number of reads that have a mismatch at first base."

__version__ = '2.3.1'

import argparse,re,sys

the rest of the code... 
```

但随后 Python 会打印一个警告：

```
cigarline_by_pos.py:29: RuntimeWarning: Parent module 'cigarline_by_pos' not found while handling absolute import
  import argparse,re,sys 
```

我不知道它可能来自什么。

我只知道如果我删除`___name__`脚本的行，但我想要这个变量。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T16:45:48.830

你不应该`__name__`在你的脚本中设置；Python 已经设置了它，并依赖该值用于其他目的，例如导入。Python 脚本或模块的`__name__`值可以更改，但在尝试这样做之前，您需要知道自己在做什么并了解 Python 的内部结构。

***甚至一般*不要设置双下划线变量。**它们仅供 Python 使用；仅当它们被记录为可设置时才设置它们，例如`__all__`在模块中。

有关当前使用的双下划线名称（dunder 名称）的概述，请参阅[Python 数据模型文档。](http://docs.python.org/2/reference/datamodel.html)

# scripting - GIMP Python-fu 导出文件只导出透明层

> ID：15482280
> 
> 赞同：5
> 
> 时间：2013-03-18T16:44:40.203
> 
> 标签：scripting, gimp, save-image, python-fu

我在通过 GIMP 在 python 中保存图像时遇到问题。我可以得到图像并应用我想要的效果，但是当我去保存时，它只保存一个图层而不是所有东西（注意：背景是透明的），因为背景是透明的，我不能让它保存任何东西透明背景。我正在使用的代码发布在下面：

```
image_array = gimp.image_list()
i=0
for image in image_array:
    img = image_array[i]
    layers = img.layers
    last_layer = len(layers)-1
    try:
        disable=pdb.gimp_image_undo_disable(img)
        pdb.gimp_layer_add_alpha(layers[0])
        drw = pdb.gimp_image_active_drawable(img)
        pdb.plug_in_colortoalpha(img,drw,(0,0,0))
        drw = pdb.gimp_image_active_drawable(img)
        enable = pdb.gimp_image_undo_enable(img)

    except:
        print "ERROR"

    pdb.file_png_save(img, drw, "C:\\Users\\jammer\\Desktop\\test.png",
                      "test.png",0,9,1,1,1,1,1)
    i+=1 
```

我也尝试过`file_png_save2`，但我觉得问题出在 drw 对象上，因为我只想复制单击**File->Export**并保存为 PNG 的选项，而无需通过 GUI 执行此操作。我宁愿让它自动保存（我有 49 张图像，每个图像都会自动命名，但首先我需要让它用一张图像正确导出）。正如我之前所说，上面的代码只导出透明背景，即使更改为 GIF 也不能解决问题。如何在保留所有图层和透明背景的同时将文件导出为 PNG？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T00:07:40.687

我发现了我的问题！我没有合并可见图层并将其设置为等于新图层，然后在将图像保存为 png 时将其用作“可绘制对象”！我在下面发布了固定代码：

```
image_array = gimp.image_list()
i=0
for image in image_array:
    img = image_array[i]
    layers = img.layers
    last_layer = len(layers)-1
    try:
        disable=pdb.gimp_image_undo_disable(img)
        pdb.gimp_layer_add_alpha(layers[0])
        drw = pdb.gimp_image_active_drawable(img)
        pdb.plug_in_colortoalpha(img,drw,(0,0,0))
        layer = pdb.gimp_image_merge_visible_layers(img, gimpfu.CLIP_TO_IMAGE)#FIXES PROBLEM OF ONLY EXPORTING TRANSPARENCY!
        enable = pdb.gimp_image_undo_enable(img)

    except:
        print "ERROR"

    pdb.file_png_save2(img, layer, "C:\\Users\\jammer\\Desktop\\test.png","test.png",1,9,1,1,1,1,1,0,1)
    i+=1 
```

# android - ActivityUnitTestCase 和 ActivityInstrumentationTestCase2 的区别

> ID：15482282
> 
> 赞同：22
> 
> 时间：2013-03-18T16:44:55.090
> 
> 标签：android, instrumentation

我是 Android Instrumentation 案例的新手。我一直在查看 API 示例，发现有时我们使用 ActivityUnitTestCase 和 ActivityInstrumentationTestCase2。两者有什么区别 ？我们什么时候会使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-13T00:47:00.027

请参阅此处讨论的差异： [http ://www.vogella.com/articles/AndroidTesting/article.html#activity_testing](http://www.vogella.com/articles/AndroidTesting/article.html#activity_testing)

关键点：

*   ActivityUnitTestCase 可用于测试布局和隔离方法。
*   当您想要发送触摸/鼠标事件和测试状态管理时，可以使用 ActivityInstrumentationTestCase2。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-09T18:24:54.853

ActivityInstrumentationTestCase2 类用于功能测试，而 ActivityUnitTestCase 用于对 Activity 进行单元测试。

# javascript - 在应用程序中使用 jquery/js 剥离 css 搜索结果页面

> ID：15482283
> 
> 赞同：-1
> 
> 时间：2013-03-18T16:44:55.873
> 
> 标签：javascript, jquery, css

我正在尝试构建一个应用程序来访问我的网站搜索并在应用程序中提取结果。

目前我只有一个`iframe`应用程序，它基本上可以提取我的整个网站搜索结果、标题、横幅、css 等，因此在应用程序的 iframe 中拥有整个网站看起来并不漂亮。

我的问题是，我将如何在我网站的搜索结果页面中使用 jquery/javascript，以便查看刚刚发生的搜索是来自我的应用程序还是我的网站？

然后，如果它来自我的应用程序，请更改 css 以去除所有装饰、页脚、横幅等，以便它只显示结果。

我应该在 URL 上做一个 get 参数来区分吗？

我对 jquery/javascript 非常陌生，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:23:19.947

不需要 JavaScript，您可以使用[CSS 媒体查询](http://www.w3.org/TR/css3-mediaqueries/)根据屏幕大小隐藏额外内容。你可以在你的样式表中使用这样的东西：

```
@media (max-width:500px) {
    #banner, #footer, .decorations {
        display: none;
    }
} 
```

这将使得当显示窗口小于 500 像素宽时，带有 id 的横幅和页脚的元素以及任何带有类装饰的元素都将被隐藏。

# c - 如何访问已知内存地址的内容？

> ID：15482287
> 
> 赞同：1
> 
> 时间：2013-03-18T16:45:17.020
> 
> 标签：c, memory

我知道可以使用`&`运算符找到变量或函数的内存地址。但是，如果我知道某物在记忆位置`2`，我该如何访问它？

例如，如果我声明一个指向 的指针`2`，它将被读取为值`2`，而不是内存地址`2`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T16:47:12.323

您只需要将其转换为指针：

```
int *pointerToTwo = (int *)2; 
```

然后你可以像往常一样取消引用：

```
int valueAtTwo = *pointerAtTwo; 
```

您做这种事情的通常原因是访问内存映射寄存器，在这种情况下，`volatile`建议使用关键字：

```
int valueAtTwo = *(volatile int *)2; 
```

或者也许将所有转换都粘贴到一个宏中，以使您的代码更易于阅读：

```
#define intValueAt(x)  (*(volatile int)(x))
int valueAtTwo = intValueAt(2); 
```

旁白： `2`对于这个用例，几乎可以肯定不是一个有效的地址。我只是因为您在问题中的引用才使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:53:28.673

```
void* pMemory = (void*)2L; 
```

这将创建一个`void*`(void 指针) 并将其地址设置为`2`.

请注意，如果您的进程不应该访问该内存（您没有读取它的权限），这可能会导致各种错误。另请注意，您不应该随机读取地址。使用指针直接访问内存位置容易出错。这就是为什么软件开发人员开发了如此多的技术来帮助我们仅在正确的情况下使用正确的预期数据类型访问正确的内存地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T17:10:58.970

您可以将其转换为 int* 以获取指针，如下所示：

```
int *ptr = (int *)2; 
```

然后你可以通过普通的 * 操作符访问 2 的内容。

```
int i = *ptr; 
```

会做你想做的。

但是，值得注意的是，实际上，上面的“i”并不是 RAM 第二个单元格的实际内容。这是因为在用户模式应用程序中，“2”始终被视为虚拟地址，并（在运行时）被转换为物理地址。通常没有办法在类 Unix 操作系统的用户模式代码中做这些事情。

# javascript - 如何增加画布长度？

> ID：15482296
> 
> 赞同：2
> 
> 时间：2013-03-18T16:45:43.730
> 
> 标签：javascript, html, canvas, html5-canvas

在我的 javascript 应用程序中，我有一个函数可以将内容的长度（高度）增加或减少一定量（比如说 150 像素）。目前我只是创建足够大的画布并使用我需要的数量。显然，我最终会以这种方式耗尽空间。

我可以想到一些解决方案，但它们都有其缺点，我不知道哪个会更好：

1.  在画布中添加滚动条。不知道它是如何工作的。
2.  调整画布高度。我每次都需要重新绘制图片。
3.  使用新画布添加或销毁新 div。

在这种情况下，最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:57:18.803

**您可以永远扩大画布，只需让用户使用滚动条导航您的图像**

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/Cgrcs/](http://jsfiddle.net/m1erickson/Cgrcs/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; padding:50px; }
    canvas{border:1px solid red;}
    div{ overflow:scroll; width:300px; height:300px; border:2px solid blue; }
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    var img=new Image();
    img.onload=function(){
      ctx.drawImage(img,0,0,img.width,img.height,0,0,canvas.width,canvas.height);
    }
    img.src="http://us.123rf.com/400wm/400/400/leungchopan/leungchopan1202/leungchopan120200432/12559267-singapore-cityscape.jpg";

}); // end $(function(){});
</script>

</head>

<body>
    <div>
            <canvas id="canvas" width=800 height=500></canvas>
    </div>
</body>
</html> 
```

# java - 安卓：强制关闭

> ID：15482298
> 
> 赞同：1
> 
> 时间：2013-03-18T16:45:48.063
> 
> 标签：java, android, android-asynctask

我是 android 应用程序开发的新手，我正在尝试开发一个工作应用程序。但是我创建的这个页面自从创建以来就出现了问题，我真的希望有人可以帮助我。每次我运行这个程序时，应用程序就会关闭。

这是源代码：

```
public class Latest extends ListActivity {

// Progress Dialog
private ProgressDialog pDialog;

// Creating JSON Parser object
JSONParser jParser = new JSONParser();

ArrayList<HashMap<String, String>> eventsList;

// url to get all products list
private static String url_all_products = "http://";

// JSON Node names
private static final String TAG_SUCCESS = "success";
private static final String TAG_BOOKS = "books";
private static final String TAG_TITLE = "title";
private static final String TAG_AUTHOR = "author";
private static final String TAG_DESCRIPTION = "description";
private static final String TAG_PRICE = "price";
private static final String TAG_DISCOUNT = "discount";
private static final String TAG_CATEGORY = "category";
private static final String TAG_PID = "pid";

// products JSONArray
JSONArray events = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_latest);

    // Hashmap for ListView
    eventsList = new ArrayList<HashMap<String, String>>();

    // Loading products in Background Thread
    new LoadAllProducts().execute();

    // Get listview
//  ListView lv = getListView();

}

// Response from Edit Product Activity
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    // if result code 100
    if (resultCode == 100) {
        // if result code 100 is received 
        // means user edited/deleted product
        // reload this screen again
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}

/**
 * Background Async Task to Load all product by making HTTP Request
 * */
class LoadAllProducts extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(Latest.this);
        pDialog.setMessage("Loading Books. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    /**
     * getting All products from url
     * */
    protected String doInBackground(String... args) {
        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

        // Check your log cat for JSON reponse
        Log.d("All Products: ", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // products found
                // Getting Array of Products
                events = json.getJSONArray(TAG_BOOKS);

                // looping through All Products
                for (int i = events.length()-1; i > events.length()-4; i--) {
                    JSONObject c = events.getJSONObject(i);

                    // Storing each json item in variable
                    String pid = c.getString(TAG_PID);
                    String title = c.getString(TAG_TITLE);
                    String author = "Author :" +c.getString(TAG_AUTHOR);
                    String description = c.getString(TAG_DESCRIPTION);
                    String price = "Price :" +c.getString(TAG_PRICE);
                    String discount = "Discount : " +c.getString(TAG_DISCOUNT);
                    String category = "Category :" +c.getString(TAG_CATEGORY);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_PID, pid);
                    map.put(TAG_TITLE, title);
                    map.put(TAG_AUTHOR, author);
                    map.put(TAG_DESCRIPTION, description);
                    map.put(TAG_PRICE, price);
                    map.put(TAG_DISCOUNT, discount);
                    map.put(TAG_CATEGORY, category);
                    // adding HashList to ArrayList
                    eventsList.add(map);
                }
            } 

        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();
        // updating UI from Background Thread
        runOnUiThread(new Runnable() {
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                ListAdapter adapter = new SimpleAdapter(
                        Latest.this, eventsList,
                        R.layout.list_item2, new String[] { TAG_PID, TAG_TITLE, TAG_AUTHOR, TAG_DESCRIPTION, TAG_PRICE, TAG_DISCOUNT, TAG_DESCRIPTION},
                        new int[] { R.id.pid, R.id.title, R.id.author,R.id.description, R.id.price, R.id.discount,R.id.category });
                // updating listview
                setListAdapter(adapter);
            }
        });

    }

}
} 
```

这是LogCat（错误）：

```
Buffer Error(1024): Error converting result java.lang.NullPointerException: lock == null
JSON Parser(1024): Error parsing data org.json.JSONException: End of input at character 0 of 
AndroidRuntime(1024): FATAL EXCEPTION: AsyncTask #1
AndroidRuntime(1024): java.lang.RuntimeException: An error occured while executing  doInBackground()
AndroidRuntime(1024):   at android.os.AsyncTask$3.done(AsyncTask.java:299)
AndroidRuntime(1024):   at  java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
AndroidRuntime(1024):   at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
AndroidRuntime(1024):   at java.util.concurrent.FutureTask.run(FutureTask.java:239)
AndroidRuntime(1024):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
AndroidRuntime(1024):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
AndroidRuntime(1024):   at java.lang.Thread.run(Thread.java:856)
AndroidRuntime(1024): Caused by: java.lang.NullPointerException
AndroidRuntime(1024):   at com.spyraa.bookstore.Latest$LoadAllProducts.doInBackground(Latest.java:113)
AndroidRuntime(1024):   at com.spyraa.bookstore.Latest$LoadAllProducts.doInBackground(Latest.java:1)
AndroidRuntime(1024):   at android.os.AsyncTask$2.call(AsyncTask.java:287)
AndroidRuntime(1024):   at java.util.concurrent.FutureTask.run(FutureTask.java:234)
AndroidRuntime(1024):   ... 3 more 
```

这是 JSONParser 类：

```
public class JSONParser {
    private static final String TAG = "JSONParser";

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

// function get json from url
// by making HTTP POST or GET method
public JSONObject makeHttpRequest(String url, String method,
        List<NameValuePair> params) {

    // Making HTTP request
    try{
        // check for request method
        if(method == "POST"){
            Log.d(TAG, "method=POST");
            // request method is POST
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            Log.d(TAG, "url=" + url);
            HttpPost httpPost = new HttpPost(url);
            httpPost.setEntity(new UrlEncodedFormEntity(params));

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();

        }else if(method == "GET"){
            Log.d(TAG, "method=GET");
            // request method is GET
            DefaultHttpClient httpClient = new DefaultHttpClient();
            String paramString = URLEncodedUtils.format(params, "utf-8");
            url += "?" + paramString;
            Log.d(TAG, "url=" + url);
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            is = httpEntity.getContent();
        }           

        Log.d(TAG, "HTTP request done");
    } catch (UnsupportedEncodingException e) {
        Log.d(TAG, "UNSUPPORTED ENCODING: ", e);
    } catch (ClientProtocolException e) {
        Log.d(TAG, "CLIENT PROTOCOL: ", e);
    } catch (IOException e) {
        Log.d(TAG, "IO EXCEPTION: ", e);
    }

    try {
        Log.d(TAG, "Extract response");
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            Log.d(TAG, "line=" + line);
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
        Log.d(TAG, "json=" + json);
    } catch (Exception e) {
        Log.d(TAG, "Exception: ", e);
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        Log.d(TAG, "Parse JSON");
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.d(TAG, "JSONException: ", e);
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

这是最近的 logcat：

```
03-19 12:44:55.985: D/dalvikvm(919): GC_CONCURRENT freed 338K, 15% free 2791K/3268K, paused 111ms+119ms, total 437ms
03-19 12:45:10.246: D/dalvikvm(919): GC_CONCURRENT freed 373K, 16% free 2815K/3324K, paused 110ms+100ms, total 551ms
03-19 12:45:11.366: D/JSONParser(919): IO EXCEPTION: 
03-19 12:45:11.366: D/JSONParser(919): org.apache.http.conn.HttpHostConnectException: Connection to http:// refused
03-19 12:45:11.366: D/JSONParser(919):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:183)
03-19 12:45:11.366: D/JSONParser(919):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
03-19 12:45:11.366: D/JSONParser(919):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
03-19 12:45:11.366: D/JSONParser(919):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
03-19 12:45:11.366: D/JSONParser(919):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
03-19 12:45:11.366: D/JSONParser(919):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
03-19 12:45:11.366: D/JSONParser(919):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
03-19 12:45:11.366: D/JSONParser(919):  at com.spyraa.bookstore.JSONParser.makeHttpRequest(JSONParser.java:66)
03-19 12:45:11.366: D/JSONParser(919):  at com.spyraa.bookstore.Latest$LoadAllProducts.doInBackground(Latest.java:105)
03-19 12:45:11.366: D/JSONParser(919):  at com.spyraa.bookstore.Latest$LoadAllProducts.doInBackground(Latest.java:1)
03-19 12:45:11.366: D/JSONParser(919):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-19 12:45:11.366: D/JSONParser(919):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-19 12:45:11.366: D/JSONParser(919):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-19 12:45:11.366: D/JSONParser(919):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-19 12:45:11.366: D/JSONParser(919):  at java.lang.Thread.run(Thread.java:856)
03-19 12:45:11.366: D/JSONParser(919): Caused by: java.net.ConnectException: failed to connect to http/1 (port 80): connect failed: ECONNREFUSED (Connection refused)
03-19 12:45:11.366: D/JSONParser(919):  at libcore.io.IoBridge.connect(IoBridge.java:114)
03-19 12:45:11.366: D/JSONParser(919):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
03-19 12:45:11.366: D/JSONParser(919):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
03-19 12:45:11.366: D/JSONParser(919):  at java.net.Socket.connect(Socket.java:842)
03-19 12:45:11.366: D/JSONParser(919):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
03-19 12:45:11.366: D/JSONParser(919):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
03-19 12:45:11.366: D/JSONParser(919):  ... 14 more
03-19 12:45:11.366: D/JSONParser(919): Caused by: libcore.io.ErrnoException: connect failed: ECONNREFUSED (Connection refused)
03-19 12:45:11.366: D/JSONParser(919):  at libcore.io.Posix.connect(Native Method)
03-19 12:45:11.366: D/JSONParser(919):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
03-19 12:45:11.366: D/JSONParser(919):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
03-19 12:45:11.366: D/JSONParser(919):  at libcore.io.IoBridge.connect(IoBridge.java:112)
03-19 12:45:11.366: D/JSONParser(919):  ... 19 more
03-19 12:45:11.499: D/JSONParser(919): Extract response
03-19 12:45:12.838: D/JSONParser(919): Exception: 
03-19 12:45:12.838: D/JSONParser(919): java.lang.NullPointerException: lock == null
03-19 12:45:12.838: D/JSONParser(919):  at java.io.Reader.<init>(Reader.java:64)
03-19 12:45:12.838: D/JSONParser(919):  at java.io.InputStreamReader.<init>(InputStreamReader.java:79)
03-19 12:45:12.838: D/JSONParser(919):  at com.spyraa.bookstore.JSONParser.makeHttpRequest(JSONParser.java:83)
03-19 12:45:12.838: D/JSONParser(919):  at com.spyraa.bookstore.Latest$LoadAllProducts.doInBackground(Latest.java:105)
03-19 12:45:12.838: D/JSONParser(919):  at com.spyraa.bookstore.Latest$LoadAllProducts.doInBackground(Latest.java:1)
03-19 12:45:12.838: D/JSONParser(919):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-19 12:45:12.838: D/JSONParser(919):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-19 12:45:12.838: D/JSONParser(919):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-19 12:45:12.838: D/JSONParser(919):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-19 12:45:12.838: D/JSONParser(919):  at java.lang.Thread.run(Thread.java:856)
03-19 12:45:12.985: D/JSONParser(919): Parse JSON
03-19 12:45:31.570: D/JSONParser(919): JSONException: 
03-19 12:45:31.570: D/JSONParser(919): org.json.JSONException: End of input at character 0 of 
03-19 12:45:31.570: D/JSONParser(919):  at org.json.JSONTokener.syntaxError(JSONTokener.java:450)
03-19 12:45:31.570: D/JSONParser(919):  at org.json.JSONTokener.nextValue(JSONTokener.java:97)
03-19 12:45:31.570: D/JSONParser(919):  at org.json.JSONObject.<init>(JSONObject.java:154)
03-19 12:45:31.570: D/JSONParser(919):  at org.json.JSONObject.<init>(JSONObject.java:171)
03-19 12:45:31.570: D/JSONParser(919):  at com.spyraa.bookstore.JSONParser.makeHttpRequest(JSONParser.java:101)
03-19 12:45:31.570: D/JSONParser(919):  at com.spyraa.bookstore.Latest$LoadAllProducts.doInBackground(Latest.java:105)
03-19 12:45:31.570: D/JSONParser(919):  at com.spyraa.bookstore.Latest$LoadAllProducts.doInBackground(Latest.java:1)
03-19 12:45:31.570: D/JSONParser(919):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-19 12:45:31.570: D/JSONParser(919):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-19 12:45:31.570: D/JSONParser(919):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-19 12:45:31.570: D/JSONParser(919):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-19 12:45:31.570: D/JSONParser(919):  at java.lang.Thread.run(Thread.java:856)
03-19 12:45:32.365: D/dalvikvm(919): GC_CONCURRENT freed 412K, 17% free 2798K/3352K, paused 55ms+31ms, total 671ms 
```

除了上述之外，大多数 logcat 都包含以下内容：

```
03-19 12:45:44.466: I/Choreographer(919): Skipped 289 frames!  The application may be doing too much work on its main thread.
03-19 12:45:44.706: W/Trace(919): Unexpected value from nativeGetEnabledTags: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:57:48.387

由于您没有提供行号，我只能猜测。

> 解析数据 org.json.JSONException 时出错：在字符 0 处输入结束

提示无效的 JSON 字符串。您应该将收到的 JSON 字符串打印到 logcat 以进行调试。

**更新**：

`JSONParser`（到目前为止我所看到的）的问题主要是它捕获异常，转储一些消息然后*继续*。结果是您通常有几条消息并且不知道它最初在哪里失败。

这就是为什么您必须添加跟踪语句`makeHttpRequest()`以查看失败的原因。另一种（附加）方法是删除所有 try/catch 语句并让异常传播到外部。然后，您将获得第一次失败所在的堆栈跟踪，并且可以看到问题的真正原因是什么。

但即便如此，正确的跟踪和调试日志也是必不可少的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:56:29.577

听起来像是处理不当的 JSON 数据。你确定你得到的 JSON 的结构吗？一个样本可能会有所帮助。

# regex - 为什么这个逆 RegEx 匹配在 Visual Studio 中不起作用？

> ID：15482304
> 
> 赞同：0
> 
> 时间：2013-03-18T16:46:11.733
> 
> 标签：regex, visual-studio-2005

我有一个正则表达式：

```
ConfigurationManager.ConnectionStrings.Item\(\"((?!foo).)*\" 
```

在[Rubular](http://rubular.com/)中工作并按预期匹配两个字符串中的**第二个：**

```
ConfigurationManager.ConnectionStrings.Item("foo")
ConfigurationManager.ConnectionStrings.Item("bar") 
```

但是，如果我在 Visual Studio 2005 中运行相同的表达式 - 我没有匹配项。它实际上应该匹配存在的每个实例，`ConfigurationManager.ConnectionStrings.Item...`因为它们都不匹配 word `foo`。

**当然，除非逆表达式在 Visual Studio 中不起作用。**

如果这是真的，我将如何在 Visual Studio 2005 中获得相同的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:52:26.443

下面的正则表达式改编自[Visual Studio 中查找和替换功能](http://msdn.microsoft.com/en-sg/library/2k3te2cs%28v=vs.80%29.aspx)的正则表达式语法，它**不是通常的基于 Perl 的正则表达式语法**。

```
ConfigurationManager.ConnectionStrings.Item\("(~(foo).)*" 
```

`~(pattern)`，根据描述：

> ```
> Prevent match    ~(X)    Prevents a match when X appears at this point 
>                          in the expression. For example, real~(ity) matches 
>                          the "real" in "realty" and "really," but not the
>                          "real" in "reality." 
> ```

应该类似于负前瞻的`(?!pattern)`工作方式。

# tsql - TSQL 日期比较返回错误的以文本为中心的错误

> ID：15482311
> 
> 赞同：1
> 
> 时间：2013-03-18T16:46:32.157
> 
> 标签：tsql, sql-server-2005, sql-server-2008

就在那时，我还有一个。这与我之前使用的过程相同。结果不是我需要的，所以回到绘图板上。系统是一样的：

SQL Server 2005 || Excel 2007 || SQL 管理工作室 2008R2

我在比较两个日期时遇到问题。SSMS 抛出的错误毫无意义。这是代码：

```
declare @calendar_start char(8)
declare @years int

set @calendar_start = '20130101'
set @years = 1

----------------------------------------------------------------------------
-- standard declaration stuff.  -
----------------------------------------------------------------------------

-- for ease of entry, I convert the start timeto a real time ---------------
----------------------------------------------------------------------------
declare @startdate datetime
set     @startdate = CONVERT (datetime, @calendar_start, 112)

-- to calculate the end of the forecast, I use the start date and add the --
-- provided number of year -------------------------------------------------
----------------------------------------------------------------------------
declare @enddate datetime
set     @enddate = dateadd(year,+@years,@startdate)
----------------------------------------------------------------------------

-- I need a variable to advance the plotting month. the plotting month is --
-- how I am going to spread out the project all year from a single date ----
----------------------------------------------------------------------------
declare @counter int
set     @counter = 0
----------------------------------------------------------------------------

----------------------------------------------------------------------------
-- this table will be used to have all the calendar dates by year-month ----
----------------------------------------------------------------------------
create table #calendar (calenderid char(6))

insert into #calendar
    select 
        distinct left(calendarid,6) [yearmonth]
    from 
        [cmdb_core].[dbo].[Calendar] 
    where 
        datevalue between @startdate and @enddate
----------------------------------------------------------------------------

----------------------------------------------------------------------------
-- rather than hitting the database any number of times, I load the whole --
-- of the computed estimates table into memory. it is faster that way.  ----
----------------------------------------------------------------------------
create table #baseline (
    [adjusted_ExpectedActionDt] datetime
    ,[key] text
    ,projectid text
    ,projectnm text
    ,ParentChaseProjectNo text
    ,VersionTag text
    ,itemid text
    ,Qty int
    ,ItemNotes text
    ,CashflowType text
    ,frequency text
    ,UnitPrice float
    ,[cost] float
)

insert into #baseline (
    [adjusted_ExpectedActionDt]
    ,[key]
    ,projectid
    ,projectnm
    ,ParentChaseProjectNo
    ,VersionTag
    ,itemid
    ,Qty
    ,ItemNotes
    ,CashflowType
    ,frequency
    ,UnitPrice
    ,[cost]
)
select  
    case
        when (ExpectedActionDt is not null)
            then ExpectedActionDt
        when (IntegratedReleasePlanDt is not null)
            then IntegratedReleasePlanDt
        else
            DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0)
    end [adjusted_ExpectedActionDt]
    ,cast(ModelEstimateId as nvarchar(max))+cast(BucketId as nvarchar(max))+cast(ItemNo as nvarchar(max)) [key]
    ,projectid
    ,projectnm
    ,ParentChaseProjectNo   
    ,VersionTag
    ,itemid
    ,Qty
    ,ItemNotes
    ,CashflowType
    ,frequency
    ,UnitPrice
    ,null [cost]
from 
    estimate.ComputedEstimates
where
        [status] <> 'Hold'
    and CostCategory <> 'Assembly'
    and includeinforecast = 'Y'
    and cashflowtype <> 'Notional'
    and Qty <> 0
    and case
            when (ExpectedActionDt is not null)
                then ExpectedActionDt
            when (IntegratedReleasePlanDt is not null)
                then IntegratedReleasePlanDt
            else
                DATEADD(YEAR, DATEDIFF(YEAR, 0, GETDATE()), 0)
        end between @startdate and @enddate
--------------------------------------------------------------------------

--------------------------------------------------------------------------
-- we need a place to contain the results of the interation through the --
-- baseline temp table. the results table will be that. ------------------
--------------------------------------------------------------------------
create table #results (
    [adjusted_ExpectedActionDt] datetime
    ,[plot_date] datetime
    ,[key] text
    ,projectid text
    ,projectnm text
    ,ParentChaseProjectNo text
    ,VersionTag text
    ,itemid text
    ,Qty int
    ,ItemNotes text
    ,CashflowType text
    ,frequency text
    ,UnitPrice float
    ,[cost] float
)

-- this loop is how we will build the results. it is governed by the -----
-- date. as I iterate through the loop, I incriment the plot date so -----
-- that I can show a project and it's costs over the range of dates ------
-- rather than only the month it goes into production --------------------
--------------------------------------------------------------------------
WHILE (@startdate <= @enddate)
BEGIN
insert into #results (
    [adjusted_ExpectedActionDt]
    ,[plot_date]
    ,[key]
    ,projectid
    ,projectnm
    ,ParentChaseProjectNo
    ,VersionTag
    ,itemid
    ,Qty
    ,ItemNotes
    ,CashflowType
    ,frequency
    ,UnitPrice
    ,[cost]
)
select 
    [adjusted_ExpectedActionDt]
    ,dateadd(month,+@counter,[adjusted_ExpectedActionDt])
    ,[key]
    ,projectid
    ,projectnm
    ,ParentChaseProjectNo
    ,VersionTag
    ,itemid
    ,Qty
    ,ItemNotes
    ,CashflowType
    ,frequency
    ,UnitPrice
    ,case
        when frequency = 'OneTime' 
            then 
--=====================================================================--
--===================== this is where the problem is ==================--
--=====================================================================--           
                case
                    when dateadd(mm, datediff(mm,0, [adjusted_ExpectedActionDt]), 0) = 
                         dateadd(mm, datediff(mm,0, dateadd(month,+@counter,[adjusted_ExpectedActionDt])), 0)
                        then [Qty]
                    else
                        0
                end
--=====================================================================--
--=====================================================================--
        else
            cast(round((UnitPrice*Qty)/12,0) as int)
        end [cost]
 from #baseline

set @counter = @counter+1
set @startdate = dateadd(month,+1,@startdate)
END
--------------------------------------------------------------------------

--------------------------------------------------------------------------
-- now we have to return the results but it is not enough to just dump ---
-- the table, I have to add a date that covers all month regardless of ---
-- that month's presence in the results table. I use the calendar temp, --
-- which has those dates as a basis of the outer join --------------------
--------------------------------------------------------------------------

select  
    c.calenderid
    ,r.[adjusted_ExpectedActionDt]
    ,r.[plot_date]
    ,r.[key]
    ,r.projectid
    ,r.projectnm
    ,r.ParentChaseProjectNo
    ,r.VersionTag
    ,r.itemid
    ,r.Qty
    ,r.ItemNotes
    ,r.CashflowType
    ,r.frequency
    ,r.UnitPrice
    ,r.[cost] 
from 
    #calendar c
    left outer join
    #results r
    on c.calenderid = cast(year(r.[adjusted_ExpectedActionDt])as char(4))+RIGHT('0'+ CONVERT(VARCHAR,month(r.[adjusted_ExpectedActionDt])),2)
--------------------------------------------------------------------------
GO 
```

问题是：

```
--=====================================================================--
--===================== this is where the problem is ==================--
--=====================================================================--           
                case
                    when dateadd(mm, datediff(mm,0, [adjusted_ExpectedActionDt]), 0) = 
                         dateadd(mm, datediff(mm,0, dateadd(month,+@counter,[adjusted_ExpectedActionDt])), 0)
                        then [Qty]
                    else
                        0
                end
--=====================================================================--
--=====================================================================-- 
```

当我尝试运行此代码时，出现以下错误：

```
Msg 402, Level 16, State 1, Line 149
The data types text and varchar are incompatible in the equal to operator. 
```

这是最令人烦恼的，因为比较是日期匹配而不是文本。这是我尝试过的： 1\. 大量的互联网搜索 2\. 将 case 语句更改为 if 语句，但无法获得正确的语法。3\. 将日期更改为 datepart 功能仅拉年份。我们知道应该返回一个 int 4\. 将比较更改为“1=1”，这显然是数字并且应该始终为真 5\. 尝试转换为连接文本 (yyyymm) 6\. 与我们的一位 SQL 开发人员交谈（我是不是按标题，但希望在这个项目结束时出现:)）

真正奇怪的是这个通用代码有效

```
select 
    dateadd(mm, datediff(mm,0, getdate()), 0)
    ,dateadd(mm, datediff(mm,0, getdate()+60), 0)
    ,case
        when dateadd(mm, datediff(mm,0, getdate()), 0) = 
             dateadd(mm, datediff(mm,0, getdate()+60), 0)
            then 'matches'
        else
            'different'
    end 
```

最后一点信息是，如果我评论有问题的代码只留下 [Qty] 字段，它运行良好。

帮帮我欧比-任何人，你是我唯一的希望。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:05:08.737

我认为问题不在于您的 CASE 声明的那一部分，我认为是：

```
when frequency = 'OneTime' 
```

因为频率列是数据类型文本。

你可以试试：

```
 when cast(frequency as varchar(20)) = 'OneTime' 
```

或者其他的东西。

# checkbox - 在javascript中单击另一个时选中/取消选中复选框

> ID：15482317
> 
> 赞同：0
> 
> 时间：2013-03-18T16:46:56.207
> 
> 标签：checkbox

尝试在单击另一个复选框时清除 2 个复选框。我已经搜索了这个答案，并尝试使用示例中的信息，但由于某种原因，我没有尝试任何工作。这是我目前正在使用的代码。

```
function control()
{
/*var one = document.getElementById('one');
var two = document.getElementById('two');
var three = document.getElementById('three');*/

if(document.forms[0].one.checked == true)
{
    document.forms[0].two.checked == false;
    document.forms[0].three.checked == false;
}

if(document.forms[0].two.checked == true)
{
    document.forms[0].three.checked == false;
    document.forms[0].one.checked == false;
}

if(document.forms[0].three.checked == true)
{
    document.forms[0].one.checked == false;
    docuemnt.forms[0].two.checked == false;
}
}
</SCRIPT>
</head>
<body>
<form action="" method="POST" name="getArea">
<input type="checkbox" onClick="control()" name="one">Standard Shipping<br />
<input type="checkbox" onClick="control()" name="two">Overnight Shipping<br />
<input type="checkbox" onClick="control()" name="three">Priority Shipping<br />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:11:57.973

你在尝试类似下面的东西吗？

```
<html>
<head>
 <script type="text/javascript">

function control(idSelected)
{
/*var one = document.getElementById('one');
var two = document.getElementById('two');
var three = document.getElementById('three');*/

if(idSelected==1)
{
    document.forms[0].two.checked = false;
    document.forms[0].three.checked = false;
}

if(idSelected==2)
{
    document.forms[0].three.checked = false;
    document.forms[0].one.checked = false;
}

if(idSelected==3)
{
    document.forms[0].one.checked = false;
    docuemnt.forms[0].two.checked = false;
}
}
</SCRIPT>
</head>
<body>
<form action="" method="POST" name="getArea">
<input type="checkbox" onClick="control(1)" name="one">Standard Shipping<br />
<input type="checkbox" onClick="control(2)" name="two">Overnight Shipping<br />
<input type="checkbox" onClick="control(3)" name="three">Priority Shipping<br />
</form>
</body>
</html> 
```

# python - 如何避免在 Python 中覆盖系统库的属性？

> ID：15482319
> 
> 赞同：1
> 
> 时间：2013-03-18T16:47:03.713
> 
> 标签：python, python-module

假设我们有一段错误的代码不小心覆盖了某个系统库的属性，如下所示：

```
import socket
socket.error = 'some other object' 
```

有没有办法防止这种行为，或者找到负责这样做的代码？

我尝试从 socket.error 中创建一个属性，但这不起作用：

```
def fget(self):
    return socket.error

def fset(self, value):
    raise SystemError('You cannot alter this attribute.')

# From now on, settings socket.error = x should raise an error
socket.error = property(fget, fset) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T17:01:03.367

您可以（暂时）将其粘贴在您的代码中：

```
class Bridge(object):
    def __init__(self, module):
        self.__dict__['module'] = module
    def __getattr__(self, attr):
        return getattr(self.module, attr)
    def __setattr__(self, attr, val):
        raise TypeError('{a!r} can not be set'.format(a=attr))

import sys
import socket
socket = sys.modules['socket'] = Bridge(socket) 
```

然后设置属性`socket`（至少以最常用的方式）会引发异常。回溯将允许您定位错误。

```
print(socket.error)
setattr(socket, 'error', 'blah') 
```

产量

```
% test.py
<class 'socket.error'>
Traceback (most recent call last):
  File "/home/unutbu/pybin/test.py", line 15, in <module>
    setattr(socket, 'error', 'blah')
  File "/home/unutbu/pybin/test.py", line 10, in __setattr__
    raise TypeError('{a!r} can not be set'.format(a=attr))
TypeError: 'error' can not be set 
```

# spring - 具有多个自定义过滤器和角色的 Spring 安全性

> ID：15482322
> 
> 赞同：0
> 
> 时间：2013-03-18T16:47:23.250
> 
> 标签：spring, filter, spring-security, roles, pre-authentication

我正在使用带有两个过滤器的 Spring 安全性： - 一个用于客户端证书的 x.509 身份验证的过滤器。他的过滤器所做的只是将用户名从证书中提取到原则中。- 一个过滤器进行基于标头的身份验证。标头应该有用户名和角色。在这个过滤器中，我检查以确保安全上下文中已经存在一个主体。如果存在，我确保它与标题中的内容匹配。然后我从标题中提取角色并设置授予的权限。我有一个 url 模式，我希望角色可以访问 - 'ROLE_USER'

现在问题来了。该请求仅命中第一个过滤器（X.509），此标头中明显缺少角色，并且访问被弹簧安全拒绝。

我无法切换过滤器的顺序，因为如果我这样做了，那么 spring 提供的 X.509 过滤器只会看到主体已经存在并且什么都不做，使其无用。

有没有办法将角色检查推迟到处理完所有过滤器？或任何其他方式来实现我想要做的事情。

这是我的弹簧安全配置：

```
<security:http auto-config="true" entry-point-ref="customEntryPoint">
    <security:intercept-url pattern="/user/**"  access="ROLE_USER"/>
    <security:custom-filter after="EXCEPTION_TRANSLATION_FILTER" ref="x509Filter"  />
    <security:custom-filter after="FILTER_SECURITY_INTERCEPTOR" ref="headerFilter"/>
</security:http> 
```

其中 x509Filter 是标准弹簧安全过滤器，配置为：

```
<beans:bean id="x509PrincipalExtractor" class="org.springframework.security.web.authentication.preauth.x509.SubjectDnX509PrincipalExtractor">
    <beans:property name="subjectDnRegex" value="CN=(.*?),"/>
</beans:bean> 
```

如果需要，我可以提供经过清理的 customHeaderFilter，但此时控件永远不会到达过滤器，因此对于其中发生的事情无关紧要。

任何帮助/指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:17:45.427

感谢来自@Maksym 的指针，通过将customHeaderFilter 中的'after' 更改为'before' 解决了问题，如下所示：

```
<security:custom-filter before="FILTER_SECURITY_INTERCEPTOR" ref="headerFilter"/> 
```

FilterSecurityInterceptor 负责处理 HTTP 资源的安全性，包括应用角色检查。在我的情况下，X509Filter 会触发设置主体，但不会设置任何权限。这将导致拦截器拒绝访问资源，并且 headerFilter 甚至不会出现。

通过将 headerFilter 的位置设置为拦截器允许使用给定权限正确设置安全上下文中的主体和身份验证对象之前的位置，从而导致预期的行为。

# django-forms - 如何让 django ModelForm 在为该字段运行 clean_ 之前不清理 ManyToManyField？

> ID：15482325
> 
> 赞同：0
> 
> 时间：2013-03-18T16:47:30.870
> 
> 标签：django-forms

```
class MyModel(models.Model) :
  people = models.ManyToManyField(User,related_name='people')
  ...

class MyForm(ModelForm) :
  class Meta :
     model = MyModel
     widgets = {'people':TextInput(),}
  def clean_people(self) :
     # turn a comma-separated list of names into a Python list
     return [name0,name1,...]
  def clean(self) :
     # if no other errors, turn list of names into list of Users 
```

这不起作用，因为在调用 field.clean 之前不会调用 clean_people，其中 field 是 ModelMultipleChoiceField 的一个实例，它检查 Python 列表或元组，因此会引发 ValidationError 并跳过 clean_people。调用顺序是这样的原因是否有原因，是否有一些标准规定可以避免这个问题？我可以在 MyForm 的每个实例中将 field.clean 设置为 lambda x:x，但这看起来真的很难看。将 MyForm 中的 people 字段明确定义为 CharField 可能是正确的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:03:40.937

你为什么不[覆盖 clean](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#overriding-the-clean-method)的行为？

```
class MyForm(ModelForm):
    class Meta:
        model = MyModel
        widgets = {'people':TextInput(),}

    def clean_people(self):
        # turn a comma-separated list of names into a Python list
        return [name0,name1,...]

    # override below!
    def clean(self):
        super(MyForm, self).clean()
        # do stuff you need, eg: call clean_people(self)
        return self.cleaned_data 
```

我不确定我是否 100% 理解您的问题，但仅仅在 clean() 之前定义 clean_people() 并不意味着它会在之前被调用，甚至根本不会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:53:13.377

好像是吧？事情是在表单中定义人员字段，覆盖模型对该字段的想法

```
class MyModel(models.Model) :
  people = models.ManyToManyField(User,related_name='people')
  ...

class MyForm(ModelForm):
    people = CharField(...)

    class Meta :
       model = MyModel

    def clean_people(self) :
       # turn a comma-separated list of names into a Python list
       return [name0,name1,...]

    def clean(self) :
       # if no other errors, turn list of names into list of Users 
```

# css - 使用 CSS 为特定的 wordpress 文章设置样式

> ID：15482330
> 
> 赞同：0
> 
> 时间：2013-03-18T16:48:01.920
> 
> 标签：css, wordpress, styles

如何在没有管理员身份的情况下将 CSS 样式应用于 wordpress 文章？

我在谷歌上[找到](http://codex.wordpress.org/CSS) [了很多](http://digwp.com/2010/02/custom-css-per-post/)[信息](http://thethemefoundry.com/blog/html-wordpress/)，但没有一个适用于我的案例，因为：

1.  我**不是该站点的管理员**，因此更改主题、全局样式表或破解 php 以允许 html`style`标记很遗憾不是一种选择。
2.  我只想更改**一些文章**的样式，所以即使我有授权，我也对更改默认样式表不感兴趣。

目前，我发现的唯一解决方案是使用`style`感兴趣的属性 html 标签，但它容易出错并且不能很好地扩展。

关于包含内联或来自外部 url 的 css 样式规则的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:56:39.603

根据我的经验，帖子中的样式标签**确实**有效（使用文本编辑器在 WP 3.5.1 中进行测试）。但是，您必须巧妙地使用样式以确保覆盖默认值。一个简单的方法是使用`important`符号：

```
<style type="text/css" scoped>
* {
color:red!important;
}
</style>

<h1> hello </h1> 
```

帖子的所有内容（在本例中为“你好”）显示为红色。

使用该`scoped`属性意味着样式仅适用于博客文章，而不适用于整个页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:00:59.647

您是在谈论更改您仅创建的特定帖子吗？

如果是这样，我猜你只能访问有问题的帖子，因此你很难做任何可扩展的事情。

您说您不能更改样式表或更改默认样式表，但如果可以的话，您可以使用您选择的 id 名称将您想要特定样式的所有文章包装在他们自己的 div 中。然后，这将使用您的 div id 自动更改 post 中的所有元素，并在您创建的所有页面上进行缩放，而无需每次都重新定义规则，例如：

```
<div id="antoines-article">
All your content
</div> 
```

您唯一的其他选择是使用内联样式

```
<div style="background-color: green">All your content</div> 
```

或在您的帖子内容之前添加此内容（但请记住，默认情况下仅允许管理员和编辑角色）

```
<style>
div { background-color: green; }
</style> 
```

这里的不同之处在于，第一条规则只会更改它所附加的 div，而第二条规则会将所有 div 更改为绿色。

这可能仍然不是你所追求的，但我担心你所说的你的选择非常有限。

此外，在大多数 CSS 定义之后使用 !important 标记将覆盖样式表中的 CSS 样式，如果您发现某些内容不会为您改变。例如

```
div { background-color: green !important; } 
```

此外，您可以要求您网站的网站管理员设置特定的页面模板，加载不同的 CSS 样式，然后您可以使用这些样式。

# sympy - Sympy 将表达式重写为模板

> ID：15482332
> 
> 赞同：4
> 
> 时间：2013-03-18T16:48:04.367
> 
> 标签：sympy

如果我有一个表达式，例如`c1 / (c2*s + c3)`我希望 sympy 将表达式转换为一个看起来像`C1 / (s + C2)`这样的模板，`C1 = c1/c2`并且`C2 = c3/c2`.

有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-02-19T16:46:24.570

所以你在问“C1 和 C2 必须是什么才能实现这一点？” `solve`可以回答这个问题：

```
>>> v = var('c1:4 C1:3 s')
>>> expr = c1 / (c2*s + c3)
>>> tmpl = C1 / (s + C2)
>>> t = tmpl.free_symbols - expr.free_symbols
>>> solve(expr - tmpl, t, dict=True)
[{C1: c1/c2, C2: c3/c2}] 
```

# regex - 2个正则表达式字符串之间的区别

> ID：15482334
> 
> 赞同：-6
> 
> 时间：2013-03-18T16:48:22.460
> 
> 标签：regex

这两个在做什么有什么区别？谢谢

```
 var m = document.referrer.match(/\&cd=([\d]*)/); 
```

和

```
var m = document.referrer.match(/cd=(.*?)&/); 
```

哪一种更高效、更有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:51:49.110

**`/\&cd=([\d]*)/`**- 匹配任何以 "&cd=" 开头的字符串，后跟任何零个或多个十进制数字。第一个捕获组是十进制数字。

**`/cd=(.*)&/`**- 匹配任何以 "cd=" 开头的字符串，后跟零个或多个字符，直到并包括第一个 "&"。第一个捕获组是“cd=”和“&”之间的所有字符。

它们相似，但不等价。您应该使用哪一个取决于您的确切需求。从您的评论来看，听起来您想使用：

```
var m = document.referrer.match(/[?&]cd=(\d+)/); 
```

# .net - PropertyChangedCallbacks 执行的顺序

> ID：15482340
> 
> 赞同：1
> 
> 时间：2013-03-18T16:49:08.460
> 
> 标签：.net, wpf, mvvm

我有一个用户控件，它有两个 DependencyProperties。每个 DependencyProperty 都有 PropertyChangedCallback。在设置属性值的顺序中调用回调很重要。所以如果我写

```
Status = MyStatus.DataIsImporting;

var data = AsynchronouslyImportData();

Data = data; 
```

我希望在 Data 的属性更改回调之前调用 Status 的属性更改回调。但是根据调试（找不到任何有关它的文档），回调调用的顺序是未定义的。有什么办法可以解决吗？

**更新。**您在上面看到的状态和数据并未直接设置为用户控件实例。这些是 ViewModel 属性，它们通过绑定对用户控制属性。

**更新2**。我现在正在处理这个问题并且有一个非常奇怪的修复。以下是我之前使用用户控件的方式：

```
<MyUserControl Status={Binding Status, Mode=TwoWay} Data={Binding Data}/> 
```

我刚刚更改了绑定顺序，它起作用了！

```
<MyUserControl Data={Binding Data} Status={Binding Status, Mode=TwoWay}/> 
```

它仍然以异步方式运行（看起来绑定系统内部存在某种消息循环），但现在它以正确的顺序调用 PropertyChangedCallback 处理程序。

我在谷歌上搜索绑定顺序，不时发现类似的问题（例如，[这个](https://stackoverflow.com/questions/11632212/bizarre-dependencyproperty-asynchronous-behaviour)），但仍不清楚为什么会发生。

**更新 3.**我找到了问题的真正根源。使用我的控件的应用程序具有带有多个 DataTemplates 的 ContentControl（取决于 ViewModel 类型）。当我的控件所在的 DataTemplate 不是当前的（或者当您切换到其他 DataTemplate 并返回时），就会发生所描述的行为。我仍在澄清细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:03:24.660

我可能应该用这个陈述来作为这个答案的开头：

“如果您需要`DependencyProperty`通过排列/排序 的顺序来对 a 所做的更改进行排序`DependencyPropertyChangedCallbacks`，那么您可能做错了。”

也就是说，这里有一些闲置的代码，*有点*像你在说的那样：

物体：

```
public class SomeThing : DependencyObject, IDisposable
{
    public static readonly DependencyProperty StatusProperty = 
        DependencyProperty.Register(
            "Status", 
            typeof(string), 
            typeof(SomeThing), 
            new FrameworkPropertyMetadata(OnStatusChanged));
    public static readonly DependencyProperty DataProperty = 
        DependencyProperty.Register(
            "Data", 
            typeof(string), 
            typeof(SomeThing), 
            new FrameworkPropertyMetadata(OnDataChanged));

    // The OrderedBag is from the Wintellect.PowerCollections, 
    // as I was too lazy to write my own PriorityQueue-like implementation
    private static OrderedBag<Tuple<int, DependencyObject, DependencyPropertyChangedEventArgs>> _changeQueue = 
        new OrderedBag<Tuple<int, DependencyObject, DependencyPropertyChangedEventArgs>>((l,r) => l.Item1.CompareTo(r.Item1));

    private static object _syncRoot = new object();
    private static Task queueTenderTask;
    private static CancellationTokenSource canceller;

    static SomeThing()
    {
        canceller = new CancellationTokenSource();
        queueTenderTask = Task.Factory.StartNew(queueTender);
    }

    public string Status
    {
        get { return (string)this.GetValue(StatusProperty); }
        set { this.SetValue(StatusProperty, value); }
    }
    public string Data
    {
        get { return (string)this.GetValue(DataProperty); }
        set { this.SetValue(DataProperty, value); }
    }

    public void Dispose()
    {
        if(canceller != null)
        {
            canceller.Cancel();
            if(queueTenderTask != null)
            {
                queueTenderTask.Wait();
            }
        }
    }

    private static void OnStatusChanged(
        DependencyObject dobj, 
        DependencyPropertyChangedEventArgs args)
    {
        lock(_syncRoot)
        {
            _changeQueue.Add(Tuple.Create(0, dobj, args));
        }
    }
    private static void OnDataChanged(
        DependencyObject dobj, 
        DependencyPropertyChangedEventArgs args)
    {
        lock(_syncRoot)
        {
            _changeQueue.Add(Tuple.Create(1, dobj, args));
        }
    }
    private static void ProcessChange(
        Tuple<int, DependencyObject,DependencyPropertyChangedEventArgs> pair)
    {
        // do something useful?
        Console.WriteLine(
            "Processing change on {0} from {1} to {2}", 
            pair.Item3.Property.Name, 
            pair.Item3.OldValue, 
            pair.Item3.NewValue);
    }

    private static void queueTender()
    {
        Console.WriteLine("Starting queue tender...");
        var shouldCancel = canceller.IsCancellationRequested;
        while(!shouldCancel)
        {
            lock(_syncRoot)
            {
                if(_changeQueue.Count > 0)
                {
                    var nextUp = _changeQueue[0];
                    _changeQueue.RemoveFirst();    
                    ProcessChange(nextUp);
                }
            }
            for(int i=0;i<10;i++)
            {
                shouldCancel = canceller.IsCancellationRequested;
                if(shouldCancel) break;
                Thread.Sleep(10);
            }
        }
    }
} 
```

和测试：

```
void Main()
{
    var rnd = new Random();
    using(var ob = new SomeThing())
    {
        for(int i=0;i<10;i++)
        {
            if(rnd.NextDouble() > 0.5)
            {
                Console.WriteLine("Changing Status...");
                ob.Status = rnd.Next(0, 100).ToString();
            }
            else
            {
                Console.WriteLine("Changing Data...");
                ob.Data = rnd.Next(0, 100).ToString();
            }
        }
        Console.ReadLine();
    }
} 
```

输出：

```
开始排队招标...
更改状态...
更改状态...
更改状态...
更改数据...
更改数据...
更改数据...
更改数据...
更改数据...
更改数据...
更改状态...
处理状态从到 1 的更改
处理状态从 1 到 73 的更改
处理状态从 73 到 57 的更改
处理状态从 57 到 33 的更改
处理从数据到 10 的更改
处理数据从 10 到 67 的变化
处理数据从 67 到 40 的变化
处理数据从 40 到 64 的变化
处理数据从 64 到 47 的变化
处理数据从 47 到 81 的变化
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-20T22:07:30.767

根据您的评论，这些属性不需要是`DependencyProperties`. 它们是`TwoWay`绑定的来源，但这并不要求它们是`DependencyProperties`. 您可以使用`TwoWay`绑定到任何标准属性，并实现`INotifyPropertyChanged`以在源值更改时通知目标。

`Binding`Target 必须是 a ，`DependencyProperty`但不是 Source ，即使对于`TwoWay`Binding （默认`TextBoxes`绑定`TwoWay`，您可以将它们绑定到标准属性）。

如果您手动提出属性更改通知，这些操作将在同一线程上按顺序发生，并且您将保证通知按顺序发生。与`DependencyProperties`您一起让框架管理值和通知，并且无法保证顺序。

`DependencyProperties`在 ViewModel 中很少需要。大多数时候，您只需要您的 ViewModel 来实现`INotifyPropertyChanged`和引发属性更改通知。

# android - Android 开发：通过 ViewBinder 将本地图像文件插入从 SQLite 数据库引用的 ListView

> ID：15482344
> 
> 赞同：1
> 
> 时间：2013-03-18T16:49:38.473
> 
> 标签：android, listview, local-storage, android-viewbinder

所以我有一个应用程序，用户可以拍照并将其存储在本地。图像名称存储在我的 SQLite 数据库中，以供将来调用照片时参考。现在我已经追踪到将位图图像设置为图像视图的问题。这是我的代码：

```
 private void displayListView() {
    // TODO Auto-generated method stub

    Cursor cursor = info.getListData();
    String[] listViewColumns = new String[] { Database.KEY_BREWNAME, Database.KEY_BREWERY, Database.KEY_RATING,
            Database.KEY_DATEIMAGENAME, };
    int[] dataToListView = new int[] { R.id.tvBrewName, R.id.tvBrewery, R.id.tvRating, R.id.ivThumb, };

    dataAdapter = new SimpleCursorAdapter(this, R.layout.entrymain, cursor, listViewColumns, dataToListView, 0);

    ViewBinder viewBinder = new ViewBinder() {
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
            ImageView image = (ImageView)view;
            Log.w(TAG, "******************List Image loaded == " + columnIndex + " **********************");
            try {
                FileInputStream fis = openFileInput(cursor.getString(columnIndex));
                fis.close();
                Log.w(TAG, "******************List Image loaded == fis.close **********************");
                image.setImageBitmap(BitmapFactory.decodeStream(fis));
                Log.w(TAG, "******************List Image loaded == setimage success **********************");

            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            return true;

        };
    };
    ImageView image = (ImageView)findViewById(R.id.ivThumb);
    viewBinder.setViewValue(image, cursor, cursor.getColumnIndex("date_image_name"));
    dataAdapter.setViewBinder(viewBinder);

    listview.setAdapter(dataAdapter); 
```

代码在没有 ViewBinder 的情况下工作得很好，通过使用 log.w，我将问题追溯到 image.setImageBitmap(BitmapFactory.decodeStream(fis)) ，我不太明白为什么它不会像我一样设置图像在其他地方使用此代码取得了巨大成功。关于为什么它不会设置的任何想法，我发现这与 java.io.IOException: read failed: EBADF (Bad file number) 有关，但是我该如何解决这个问题？预先感谢！

这是我的错误日志的一部分：

```
 03-18 10:44:16.281: D/ActivityThread(19380): setTargetHeapUtilization:0.25
03-18 10:44:16.281: D/ActivityThread(19380): setTargetHeapIdealFree:8388608
03-18 10:44:16.281: D/ActivityThread(19380): setTargetHeapConcurrentStart:2097152
03-18 10:44:16.782: I/Adreno200-EGLSUB(19380): <ConfigWindowMatch:2087>: Format RGBA_8888.
03-18 10:44:16.792: E/(19380): <s3dReadConfigFile:75>: Can't open file for reading
03-18 10:44:16.792: E/(19380): <s3dReadConfigFile:75>: Can't open file for reading
03-18 10:44:17.112: D/AbsListView(19380): Get MotionRecognitionManager
03-18 10:44:17.152: W/Start(19380): ******************List Image loaded == 4 **********************
03-18 10:44:17.162: W/Start(19380): ******************List Image loaded == fis.close **********************
03-18 10:44:17.162: W/System.err(19380): java.io.IOException: read failed: EBADF (Bad file number)
03-18 10:44:17.172: W/System.err(19380):    at libcore.io.IoBridge.read(IoBridge.java:442)
03-18 10:44:17.172: W/System.err(19380):    at java.io.FileInputStream.read(FileInputStream.java:179)
03-18 10:44:17.172: W/System.err(19380):    at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:168)
03-18 10:44:17.172: W/System.err(19380):    at java.io.BufferedInputStream.read(BufferedInputStream.java:309)
03-18 10:44:17.172: W/System.err(19380):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
03-18 10:44:17.172: W/System.err(19380):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:619)
03-18 10:44:17.172: W/System.err(19380):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:691)
03-18 10:44:17.172: W/System.err(19380):    at com.ex.beerlog.Start$1.setViewValue(Start.java:78)
03-18 10:44:17.172: W/System.err(19380):    at com.ex.beerlog.Start.displayListView(Start.java:91)
03-18 10:44:17.172: W/System.err(19380):    at com.ex.beerlog.Start.onCreate(Start.java:56)
03-18 10:44:17.172: W/System.err(19380):    at android.app.Activity.performCreate(Activity.java:5048)
03-18 10:44:17.172: W/System.err(19380):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
03-18 10:44:17.172: W/System.err(19380):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052)
03-18 10:44:17.172: W/System.err(19380):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
03-18 10:44:17.182: W/System.err(19380):    at android.app.ActivityThread.access$700(ActivityThread.java:139)
03-18 10:44:17.182: W/System.err(19380):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
03-18 10:44:17.182: W/System.err(19380):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 10:44:17.182: W/System.err(19380):    at android.os.Looper.loop(Looper.java:137)
03-18 10:44:17.182: W/System.err(19380):    at android.app.ActivityThread.main(ActivityThread.java:4918)
03-18 10:44:17.182: W/System.err(19380):    at java.lang.reflect.Method.invokeNative(Native Method)
03-18 10:44:17.182: W/System.err(19380):    at java.lang.reflect.Method.invoke(Method.java:511)
03-18 10:44:17.182: W/System.err(19380):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
03-18 10:44:17.182: W/System.err(19380):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
03-18 10:44:17.182: W/System.err(19380):    at dalvik.system.NativeStart.main(Native Method)
03-18 10:44:17.182: W/System.err(19380): Caused by: libcore.io.ErrnoException: read failed: EBADF (Bad file number)
03-18 10:44:17.182: W/System.err(19380):    at libcore.io.Posix.readBytes(Native Method)
03-18 10:44:17.182: W/System.err(19380):    at libcore.io.Posix.read(Posix.java:118)
03-18 10:44:17.182: W/System.err(19380):    at libcore.io.BlockGuardOs.read(BlockGuardOs.java:149)
03-18 10:44:17.182: W/System.err(19380):    at libcore.io.IoBridge.read(IoBridge.java:432)
03-18 10:44:17.182: W/System.err(19380):    ... 23 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:54:49.170

您正在尝试从已关闭的`InputStream`. `fis.close();`必须在之后调用`image.setImageBitmap(BitmapFactory.decodeStream(fis));`

此外，`setViewValue`如果您确实将值设置为，则必须检查方法`ImageView`：

```
ViewBinder viewBinder = new ViewBinder() {
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
        if (!(view instanceof ImageView) || view.getId() != R.id.ivThumb) {
            return false;
        }

        // the rest of the code
    };
}; 
```

最后一件事。您不需要显式调用`viewBinder.setViewValue(image, cursor, cursor.getColumnIndex("date_image_name"));`，因为`SimpleAdapter`它会为您完成。只需删除此行，一切都应该正常。

# c - SIGPIPE 在一个简单的两进程程序中

> ID：15482349
> 
> 赞同：1
> 
> 时间：2013-03-18T16:50:02.613
> 
> 标签：c, pipe, fork, sigpipe

我有一个简单的叉子和管道设置，我以前使用过。但这一次，我接到了一个`SIGPIPE`电话`write`。这是代码

```
int fd[2];

int pid;

if (pipe(fd) == -1) {
    perror("pipe init error"); 
    exit(1);
}

// signal(SIGPIPE, SIG_IGN);
if ((pid = fork()) < -1) {
    perror("fork error"); exit(1);
}
// parent
else if (pid > 0) {
    close(fd[0]); 

    write(fd[1], "WHAT", MAXWORD); //SIGPIPE here

    close(fd[1]);
    int status;
    wait(&status);
}

// child
else {
    close(fd[1]);
    // void foo(char *dirname, int in, int out);
    // foo takes a path, reads from fd 'in' and outputs to 'fd' out
    foo("./some/path", fd[0], 1);
    close(fd[0]);
} 
```

这是函数 foo：

```
void foo(char *dirname, int in, int out){

    int string_length;
    char word[MAXWORD];

    // to get rid of \n
    char* sep;
    sep = malloc(sizeof(char));

    // read from piped stdin until it's closed
    while ((string_length = read(in, word, MAXWORD)) > 0){

        // get rid of \n
        sep = strchr(word, '\n');
        *sep = '\0';

        printf("THe word is: %s\n", word);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:54:01.373

如果在管道上写入时获得 SIGPIPE，则意味着没有进程可以从管道中读取：当前进程也没有（您已经关闭了管道的读取端——这很好；相反，您会陷入僵局如果您没有关闭它，则死亡）或其他（子）进程。

由于您没有显示该函数的`foo()`作用，因此我们无法告诉您更多关于哪里出了问题。

* * *

现在`foo()`已添加，尚不清楚发生了什么。有问题，但大多数都不是节目塞。

1.  参数`dirname`未使用。
2.  参数`out`未使用。
3.  `sep`您泄漏了在循环中分配的内存。
4.  您不能确保从管道读取的字符串以空值结尾。这可能会导致崩溃，进而导致写入失败。

我怀疑第 4 项是当务之急；其他更多的是整洁。

我注意到在主代码中，你有：

```
write(fd[1], "WHAT", MAXWORD); //SIGPIPE here 
```

除非`MAXWORD`是 4 或 5，否则您将走在失败的道路上；你应该只写 4 或 5 个字符。

结合`read()`... 读取将尝试读取 MAXWORD 字节，但可能会更少。但是，没有迹象表明写入的数据包含换行符，因此在输入中搜索换行符不会可靠地工作。然而，这个问题也应该在管道被成功写入之后显现出来，而不是之前。

我注意到该变量`int fd_parent_write_word[2];`未使用，代码使用变量`int fd[2]`而不声明它。

当您要分析的不是 SSCCE（[简短、独立、正确的示例](http://sscce.org/)）时，这很麻烦。当测试用例被简化为一个可以编译和运行的简单程序时，提交者确信问题会随之重现，这会容易得多。

* * *

此 SSCCE 代码编译干净并运行正常：

```
#include <assert.h>
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

enum { MAXWORD = 5 };

static void foo(int in);

static void he_who_pays_the_piper(int signum)
{
    assert(signum == SIGPIPE);
    const char msg[] = "Received signal SIGPIPE\n";
    write(2, msg, sizeof(msg)-1);
    exit(1);
}

int main(void)
{
    int fd[2];
    int pid;

    if (pipe(fd) == -1) {
        perror("pipe init error"); 
        exit(1);
    }

    signal(SIGPIPE, he_who_pays_the_piper);
    if ((pid = fork()) < -1) {
        perror("fork error"); exit(1);
    }
    else if (pid > 0) {
        close(fd[0]); 
        write(fd[1], "WHAT", MAXWORD); //SIGPIPE here
        close(fd[1]);
        int status;
        pid = wait(&status);
        printf("Got status 0x%04X from %d\n", status, pid);
    }
    else {
        close(fd[1]);
        foo(fd[0]);
        close(fd[0]);
    }
    return 0;
}

static void foo(int in)
{
    int string_length;
    char word[MAXWORD];

    while ((string_length = read(in, word, MAXWORD)) > 0)
        printf("The word is: %.*s\n", string_length, word);
} 
```

示例输出：

```
The word is: WHAT
Got status 0x0000 from 49458 
```

请注意，这是有效的，因为`'\0'`字符串末尾的`WHAT`被写入管道，并从管道中读取。大多数情况下，您不会编写包含尾随的字符串`'\0'`。

# r - R中的编码：如何将此字符串转换为UTF-8？

> ID：15482351
> 
> 赞同：1
> 
> 时间：2013-03-18T16:50:04.033
> 
> 标签：r, encoding, utf-8

我正在使用 R 从旧的名声数据库中读取数据。这通常工作得很好，但是在阅读描述时我得到了意想不到的编码。例如：

```
a <- "\U3e34653c"
# is supposed to be 
"ä" 
```

我试图`iconv`解决这个问题，但尽管尝试了许多可能性，但我无法以正确的方式显示它。我的语言环境：en_US.UTF-8。有没有办法替换（子）这样的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:06:44.673

尝试使用不同的编码字符串打开文件？正如里卡多建议的那样，也许是拉丁语？如果不是，也许其他一些异国风味：

```
f <- file( "myfile.db" , encoding = "Latin-1" )
dat <- readLines( f ) 
```

你能链接到一些数据吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-16T12:42:42.537

从 SQL Server（通过 ODBC 和 RODBC 包）提取数据时，我遇到了同样的问题。我通过更改 ODBC 驱动程序上的设置以将所有字符串视为 unicode 来解决它。

更具体地说，我正在为 SQL Server 使用 Actual Technologies ODBC 驱动程序，并且在“高级语言设置”下可以指定“将文本类型视为 Unicode”，并将“多字节文本编码”选项设置为 UTF-8。

# ruby-on-rails-3 - 如何验证文本在 Rails 中不是空白的

> ID：15482354
> 
> 赞同：33
> 
> 时间：2013-03-18T16:50:26.103
> 
> 标签：ruby-on-rails-3, validation, chars

如果我做

```
 validates :body, :presence => true, :length => {:maximum => 30000, :message => ' is a bit long...'}
  validates :body, :length => {:minimum => 10, :message => ' is a bit short...'} 
```

我仍然有可能拥有仅包含`spaces`和`/r`或`/n`- 不可见字符的文本，虽然根据定义该文本不是空白的，但通过查看它是空白的

如何验证文本是否具有上面列出的最小和最大长度并且也是可见的（不是 10 个空格）

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-08-31T17:09:45.357

Rails 添加了方便的方法`blank?`来检查 false、nil 和空字符串，如此[处](http://api.rubyonrails.org/classes/Object.html#method-i-blank-3F)所述。
Rails 还添加了方便的验证器`allow_blank: false`。

所以在你的情况下应该是：

`validates :body, presence: true, allow_blank: false`

* * *

编辑（上面的原始答案）：

正如下面的答案所述，`allow_blank: false`不需要，因为这是`presence: true`.

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-07-18T20:02:45.647

`presence: true`根据 [http://guides.rubyonrails.org/active_record_validations.html#presence已经这样做了](http://guides.rubyonrails.org/active_record_validations.html#presence)

> 此帮助器验证指定的属性不为空。它使用空白？方法来检查值是 nil 还是空字符串，即一个空字符串或由空格组成的字符串。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-18T18:47:19.417

如果您尝试添加如下内容会怎样：

```
validates_format_of :body, :with => /\A[[:graph:]]\Z/i 
```

笔记：

*   `validates_format_of`让您使用正则表达式进行验证
*   `[[:graph:]]`让您检查字符串中的可打印字符（[请参阅“字符类”](http://ruby-doc.org/core-2.0/Regexp.html)）

# html - 图像（带有背景图像）作为链接

> ID：15482357
> 
> 赞同：1
> 
> 时间：2013-03-18T16:50:33.507
> 
> 标签：html, css

单击图像时，我正在尝试获取指向正常工作的页面的链接。在这个[jsFiddle 上](http://jsfiddle.net/cvh2013/KEzT3/)，您将看到三个圆形图像。当鼠标悬停在其中任何一个上时，将呈现背景阴影图像。当您单击“律师事务所”图像时，应该会显示一个带有一些文本的简短 HTML 页面。所发生的情况是，指向律师事务所文本的链接不是作为图像本身呈现，而是作为“>”字符呈现 - 请参见下面的屏幕截图。

谁能指导我如何使图像充当链接？还确保当鼠标悬停在背景图像上时，背景图像继续位于律师事务所图像的中心。

CSS：

```
.center {text-align: center;}

#sfimages {padding:15px;}

#sfimages:hover {
background-image: url(http://ubuntuone.com/1SRrDB8i8cBtpm3Smxaz5r);
background-repeat: no-repeat;
background-position:center;     
} 
```

HTML：

```
<body>
<table style="width: 100%">
    <tr>
            <td class="center">
                <div id="sfimages"> 
                <a href="http://ubuntuone.com/3JHwAhFuNUCVfq1QOOjBGG">                              >
                <object type="image/svg+xml"
                    data="http://ubuntuone.com/5b5ZUS86nHAffWiOirDwFr">
                    <img src="http://ubuntuone.com/12qOaTGCZYzQtqFJpaGbPV" alt="" />
                </object>
                </a>
                </div>
            </td>
            <td class="center">
                <div id="sfimages">
                <object type="image/svg+xml"
                    data="http://ubuntuone.com/6tkHm9c2r1eH9PMB9Nr3Ux">
                    <img src="http://ubuntuone.com/54AaqhQUU8npACF2vXzKFp" alt="" />
                </object>
                </div>
            </td>
            <td class="center">
                <div id="sfimages">
                <object type="image/svg+xml"
                    data="http://ubuntuone.com/7Ur09JXlGVvF2GhXFbLXlx">
                    <img src="http://ubuntuone.com/4CXw05d1dsSf9VhAIPNZf6" alt="" />
                </object>
                </div>
            </td>
    </tr>
</table> 
```

![在此处输入图像描述](../Images/350a7c351d9d3fd9a4e446a086053740.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:57:58.563

抱歉耽搁了一段时间，这对我来说是忙碌的一天，我有足够的时间来回答你的问题。这是我推荐的。看起来您正在使用的代码是从 inkscape 生成的？当它运行时，源代码简直是疯了，尤其是在对象区域内。但是，如果您想要链接，请不要害怕。只需进行以下细微调整，您就应该可以使用链接了！

CSS：

```
.center {
    text-align: center;
}

#sfimages {
padding:15px;
position:relative;
width:380px;
height:273px;
}

#sfimages:hover {
    background-image: url(http://ubuntuone.com/1SRrDB8i8cBtpm3Smxaz5r);
    background-repeat: no-repeat;
    background-position:center;     
}

#ext-site {
display:block;
width:380px;
height:273px;
position:absolute;
z-index:9999;
} 
```

的HTML：

```
<table style="width: 100%">
    <tr>
            <td class="center">
                <div id="sfimages"> 
                <a id="ext-site" href="http://ubuntuone.com/3JHwAhFuNUCVfq1QOOjBGG"></a>                              
                <object type="image/svg+xml"
                    data="http://ubuntuone.com/5b5ZUS86nHAffWiOirDwFr">
                    <img src="http://ubuntuone.com/12qOaTGCZYzQtqFJpaGbPV" alt="" />
                </object>

                </div>
            </td>
            <td class="center">
                <div id="sfimages">
                <object type="image/svg+xml"
                    data="http://ubuntuone.com/6tkHm9c2r1eH9PMB9Nr3Ux">
                    <img src="http://ubuntuone.com/54AaqhQUU8npACF2vXzKFp" alt="" />
                </object>
                </div>
            </td>
            <td class="center">
                <div id="sfimages">
                <object type="image/svg+xml"
                    data="http://ubuntuone.com/7Ur09JXlGVvF2GhXFbLXlx">
                    <img src="http://ubuntuone.com/4CXw05d1dsSf9VhAIPNZf6" alt="" />
                </object>
                </div>
            </td>
    </tr>
</table> 
```

这是一个经典的技巧，涉及一个绝对定位的锚链接，在一个相对的显示块元素内。只要锚延伸到其父级的大小，它就充当整个部分顶部的不可见按钮。

看看我的新[小提琴](http://jsfiddle.net/blackhawx/EB7Kb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:55:12.060

有多余的字符：请检查以下代码（在评论中有完整代码的链接）：

```
<table style="width: 100%">
    <tr>
        <td class="center">
            <div id="sfimages"> 
            <a href="http://ubuntuone.com/3JHwAhFuNUCVfq1QOOjBGG">                              
            <object type="image/svg+xml"
                data="http://ubuntuone.com/5b5ZUS86nHAffWiOirDwFr">
                <img src="http://ubuntuone.com/12qOaTGCZYzQtqFJpaGbPV" alt="" />
            </object>
            </a>
            </div>
        </td>
        <td class="center">
            <div id="sfimages">
            <object type="image/svg+xml"
                data="http://ubuntuone.com/6tkHm9c2r1eH9PMB9Nr3Ux">
                <img src="http://ubuntuone.com/54AaqhQUU8npACF2vXzKFp" alt="" />
            </object>
            </div>
        </td>
        <td class="center">
            <div id="sfimages">
            <object type="image/svg+xml"
                data="http://ubuntuone.com/7Ur09JXlGVvF2GhXFbLXlx">
                <img src="http://ubuntuone.com/4CXw05d1dsSf9VhAIPNZf6" alt="" />
            </object>
            </div>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:55:34.947

第 6 行：

```
<a href="http://ubuntuone.com/3JHwAhFuNUCVfq1QOOjBGG">                              > 
```

卸下额外的闭合支架。

# mysql - 加载文件中的 Str_to_date 导致 NULL 值

> ID：15482361
> 
> 赞同：1
> 
> 时间：2013-03-18T16:50:44.463
> 
> 标签：mysql, database, csv

我要定位的表中的字段是 date_sent DATE

这是 CSV 的一部分和以下导入查询。为什么将日期字段设置为 NULL？

```
1,"1/21/2013","0",1
2,"2/27/2013","0",1 
```

这是 SQL

```
 LOAD DATA LOCAL INFILE 'C:/Users/Me/CSV.csv'
     INTO TABLE Collections
     FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
     LINES TERMINATED BY '\r\n'
(`id`, @DATE_STR, `col`, `sid`)
SET `date_sent` = STR_TO_DATE(@DATE_STR, '%m/%d/%Y') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:54:45.227

来自[MySQL 的开发页面](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

```
%m        Month, numeric (00..12)
%d        Day of the month, numeric (00..31) 
```

您需要`%c`改用（可能`%e`也是）。

```
%c        Month, numeric (0..12)
%e        Day of the month, numeric (0..31) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:54:59.670

尝试使用这种日期格式：

```
STR_TO_DATE(@DATE_STR, '%c/%e/%Y') 
```

*   `%c`是月份，数字，`0..12`而`%m`是格式中的月份`00..12`
*   `%e`是月份中的日期，数字，`0..31`而`%d`是格式中的日期`00..31`

请参阅[DATE_FORMAT](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)的文档。

# android - 从服务中获取通知栏视图组

> ID：15482362
> 
> 赞同：0
> 
> 时间：2013-03-18T16:50:45.523
> 
> 标签：android

我有一个后台服务，我想从中获取通知栏的视图组。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:13:36.007

您无法从任何 SDK 应用程序组件中获取“通知栏的视图组”，更不用说服务了。

# javascript - 隐藏系列中的特定点

> ID：15482366
> 
> 赞同：2
> 
> 时间：2013-03-18T16:51:03.073
> 
> 标签：javascript, highcharts

我需要根据数据对象中的值在 Highcharts 中切换系列中的特定点。这可能吗？[我在API](http://api.highcharts.com/highcharts#series.data)中看不到任何可以切换系列中的点的内容。

我知道我可以专门删除点，但我更愿意隐藏它们，因为用户会想要频繁地显示/隐藏，而且我不想每次都重建整个系列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:57:06.763

您可以使用`Point.update`标记半径并将其设置为 0。

```
selectedPoint.update({marker: { radius: 0 }}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:56:06.987

要走的路是使用 point.remove 和 series.addpoint 调用。我不认为 highcharts 有隐藏点的概念。

# django - Django 模型和管理面板

> ID：15482368
> 
> 赞同：0
> 
> 时间：2013-03-18T16:51:04.120
> 
> 标签：django, django-models, django-admin, django-orm

大家好，我有这个模型

```
class Class1(models.Model):
    ....
    ctime = models.FloatField()  # I am storing date in timestamp here
    .... 
```

是否可以在管理面板中将 ctime 字段显示为浮点数而不是时间字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:03:11.223

检查[Django 文档](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_overrides)。您可以覆盖模型字段的默认小部件 -

```
from django.db import models
from django.contrib import admin

# Import our custom widget and our model from where they're defined
from myapp.widgets import RichTextEditorWidget
from myapp.models import MyModel

class MyModelAdmin(admin.ModelAdmin):
    formfield_overrides = {
        models.TextField: {'widget': RichTextEditorWidget},
    } 
```

或者，对于单个模型，如[本答案](https://stackoverflow.com/a/5263578/257944)中所述-

```
class StopAdminForm(forms.ModelForm):
  class Meta:
    model = Stop
    widgets = {
      'approve_ts': ApproveStopWidget(),
    }

class StopAdmin(admin.ModelAdmin):
  form = StopAdminForm 
```

也检查该问题中的其他答案。a

# java - java如何实现从内部内部类对封闭类的访问？

> ID：15482370
> 
> 赞同：6
> 
> 时间：2013-03-18T16:51:07.890
> 
> 标签：java

我在内部类中创建了一个内部类：

```
public class EnclosingClass {

    public class InnerClass {
        private EnclosingClass getEnclosing() {
            return EnclosingClass.this;
        }

        public class InnerInnerClass {
            private InnerClass getEnclosing() {
                return InnerClass.this;
            }

            private EnclosingClass getEnclosingOfEnclosing() {
                return EnclosingClass.this;
            }
        }        
    }
} 
```

我很惊讶 java 允许`InnerInnerClass`直接访问`EnclosingClass`. 这段代码是如何由 Java 内部实现的？

`InnerInnerClass`保持两个指针（一个在 上，`InnerClass`另一个在 上`EnclosingClass`）或 InnerInnerClass`EnclosingClass`通过`InnerClass`?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T16:56:30.050

您只需要使用 javap 反汇编生成的类即可查看发生了什么：

```
private EnclosingClass getEnclosingOfEnclosing();
  Code:
     0: aload_0
     1: getfield      #1                  // Field this$1:LEnclosingClass$InnerClass;
     4: getfield      #3                  // Field EnclosingClass$InnerClass.this$0:LEnclosingClass;
     7: areturn 
```

因此，它首先获取*直接*封闭类的实例，然后从中获取“顶级”封闭类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:53:42.013

如果内部类不是“静态的”，则它们在内部包含对包含它们的类的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T16:54:07.377

除非您将内部类设为静态，否则是的，它确实具有对其存在的实例的引用，并且可以引用它的成员（包括私有），内部内部类，内部内部内部类等也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T16:55:13.773

public 和 private 是一个指针问题，它是一个编译器问题。

**问题是执行**类/变量/方法范围的编译器之一。因为私有方法`getEnclosing()`属于 的范围`InnerClass`，所以可以在整个类中访问它。

请注意，指针与问题无关。
使用[反射](https://stackoverflow.com/questions/37628/what-is-reflection-and-why-is-it-useful)，您仍然可以访问类的私有成员。

# java - java.lang.IllegalStateException：在查询中找不到超类型

> ID：15482377
> 
> 赞同：0
> 
> 时间：2013-03-18T16:51:54.257
> 
> 标签：java, hibernate, jpa, jpa-2.0

我有以下

```
@Entity
@Table(name = "PROJECTS")
public class Project implements Serializable {

  @Id
  private Integer SlNo;

  @Id
  private Long projectNo;

  private Date projectDate;
} 
```

在 DAO 类中

```
CriteriaBuilder cb = entityManager.getCriteriaBuilder();

CriteriaQuery<Long> countQ = cb.createQuery(Long.class);
Root<Project> empCount = countQ.from(Project.class);
countQ.select(cb.count(empCount));

TypedQuery<Long> countquery = entityManager.createQuery(countQ);// error in this line 
```

我`java.lang.IllegalStateException: No supertype found`在上面的行中遇到了异常。如何解决或解决此问题？貌似有[bug](https://hibernate.atlassian.net/browse/HHH-7216)，请问有解决办法吗？

我在用`Hibernate 4.1.0.Final`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:18:36.307

我已经通过`@EmbeddedId`在实体类和`@Embeddable`主键类中使用解决了这个问题。

```
@Entity
@Table(name = "PROJECTS")
public class Project {
@Column(name = "SL_NO" , insertable = false, updatable = false)
private Integer SlNo;
@Column(name = "PROJECT_NO" , insertable = false, updatable = false)
private Long projectNo;
private Date projectDate;

@EmbeddedId
ProjectPK projectPK; 
```

和主键类

```
@Embeddable
public class ProjectPK implements Serializable {
@Column(name = "SL_NO")
private Integer SlNo;
@Column(name = "PROJECT_NO")
private Long projectNo; 

//with hashCode and equals implementation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T11:36:37.680

对于使用@EmbeddedId 的情况，这是我的解决方案。我在一个类本身中编写了这段代码，在实体类中。

*   Class MyEntity - 这是我的表的实际实体类。“OtherFields”是那些不属于主键的字段。
*   Class MyEntityPrimaryKeys - 这是为我的复合键创建的类，它为我的“MyEntity”类创建主键。这里 ROLLNO 和 AGE 一起构成一个主键。

我的实体.java

```
@Entity
@Table(name = "myTable")
public class MyEntity extends GenericPersistableEntity implements Serializable {
    private static final long serialVersionUID = 1L;

    @EmbeddedId 
    MyEntityPrimaryKeys id;//Composite Primary key

    //Composite fields can be declared here for getter and setters
    @Column(name = "ROLLNO")
    private Long RollNo;

    //Composite fields can be declared here for getter and setters
    @Column(name = "AGE")
    private Long age;

    @Column(name = "OtherFields"
    private Long OtherFields;

    //getter and setters comes here
}

@Embeddable
 class MyEntityPrimaryKeys  implements Serializable{

    private static final long serialVersionUID = 1L;

    @Column(name = "ROLLNO")
    Long RollNo;

    @Column(name = "AGE")
    Long age;

    @Override
    public int hashCode() {
        HashCodeBuilder hcb = new HashCodeBuilder();
        hcb.append(RollNo);
        hcb.append(age);
        return hcb.toHashCode();
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) {
            return true;
        }
        if (!(obj instanceof MyEntityPrimaryKeys)) {
            return false;
        }
        MyEntityPrimaryKeys that = (MyEntityPrimaryKeys) obj;
        EqualsBuilder eb = new EqualsBuilder();
        eb.append(RollNo, that.RollNo);
        eb.append(age, that.age);
        eb.append(tonMonth, that.tonMonth);
        eb.append(tonYear, that.tonYear);
        return eb.isEquals();
    }
} 
```

# android - Android：将数据从 Activity 传递到其他对象

> ID：15482379
> 
> 赞同：0
> 
> 时间：2013-03-18T16:52:02.290
> 
> 标签：android, android-activity, broadcastreceiver, alarmmanager

我正在开发一个使用警报管理器的 Android 应用程序。

该应用程序由多个 Activity 组成。每当警报响起时，就会显示一个新的活动。这个新活动接收来自用户的一些输入，然后我需要返回这些数据。更详细地说：我以以下方式构建了我的应用程序

MainActivity 的 onCreate() 实例化了一个名为 ReminderManager 的类，然后调用一个公共方法（在这个类中）来设置警报（使用警报管理器）。另一个名为 AlarmReceiver 的类扩展了 BroadcastRecevier，它的 onResult() 方法调用了一个新的 Activity。

现在我希望这个活动返回从用户插入的数据。

示意图：

```
MainActivity [onCreate] ---> ReminderManager [setAlarm] ---> onResult() ---> NewActivity 
```

NewActivity，是我想要接收从用户插入的数据的活动。

我知道，我不能从 BraodcastReceiver 类的 onResult() 调用 startActivityForResult()，那么，将数据传递给 RemiderManager 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-18T17:01:34.507

查看 Android 共享首选项：http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

如何使用它的一个例子是另一个问题。 [如何在 Android 中使用 SharedPreferences 来存储、获取和编辑值](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)

# ios6 - 我的配置文件即将在一天后到期（iOS）？

> ID：15482381
> 
> 赞同：1
> 
> 时间：2013-03-18T16:52:03.060
> 
> 标签：ios6

我的原始配置文件明天到期。我已经更新了我的年度应用程序开发人员（99 美元）。这是一个临时配置文件。我仍然想更新此配置文件。我似乎找不到正确的答案？任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:58:57.380

Apple 提供了用于配置文件管理的所有文档。只需登录到您的[developer.apple.com](https://developer.apple.com)个人资料，然后使用此链接[更换过期证书](http://developer.apple.com/library/ios/#documentation/Xcode/Conceptual/ios_development_workflow/10-Configuring_Development_and_Distribution_Assets/identities_and_devices.html#//apple_ref/doc/uid/TP40007959-CH4-SW3)

这是另一个文档：

**分销证书必须定期更新**

```
A distribution certificate is valid for one year from date of issue. After it expires, you won’t be able sign and install apps on your devices although this will not affect any existing apps in the App Store.

To continue distribution, navigate to the Devices organizer in Xcode. Select the expired profile and click Renew Profile in the red bar at the top. This will renew your expired certificate and add it to the provisioning profile. After you get a new distribution certificate, you can submit new apps or app updates to the App Store.

If you are enrolled in the iOS Developer Enterprise Program, revoking your distribution certificate will make your app fail on any installed devices. Only revoke your certificate if your app or private key have been compromised. You can create a second distribution certificate six months before your existing certificate expires. The overlapping certificate allows you to continue to build and distribute your app once your first certificate expires. 
```

[在这里](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html)找到这个

重复问题：[更新 iOS 分发证书的正确方法](https://stackoverflow.com/questions/10759973/proper-way-to-renew-distribution-certificate-for-ios)

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-19T11:00:56.447

“替换和过期证书”的链接已损坏。苹果网站上的“在此处查找”链接已“停用”。

# asp.net - 你如何在.net WebApi中序列化派生类的IEnumerable

> ID：15482382
> 
> 赞同：0
> 
> 时间：2013-03-18T16:52:05.580
> 
> 标签：asp.net, xml-serialization, asp.net-web-api

我正在使用 .net WebApi 创建 Web 服务，并且当属性之一是派生类的 IEnumerable 时，将类序列化为 XML 时遇到问题。我尝试添加 knownType 赌注得到以下错误：

> “错误 1 ​​属性 'KnownType' 在此声明类型上无效。它仅在 'class, struct' 声明上有效。”

JSON 序列化工作完美，但对于 XML，我得到：

```
<Error>
<Message>An error has occurred.</Message>
<ExceptionMessage>
The 'ObjectContent`1' type failed to serialize the response body for content type 'application/xml; charset=utf-8'.
</ExceptionMessage>
<ExceptionType>System.InvalidOperationException</ExceptionType>
<StackTrace/>
<InnerException>
<Message>An error has occurred.</Message>
<ExceptionMessage>
Type 'test.order' cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute. If the type is a collection, consider marking it with the CollectionDataContractAttribute. See the Microsoft .NET Framework documentation for other supported types.
</ExceptionMessage>
.... 
```

**派生类示例**

```
public class orderDetailBase
{
    public int sequence { get; set; }
    //.... more properties
}

public class onlineOrderDetail : orderDetailBase
{
    public string ip { get; set; }
    //.... more properties
}

public class inStoreOrderDetail : orderDetailBase
{
    public string storeAddress { get; set; }
    //.... more properties
} 
```

**类到连载**

```
public class order
{
    public int orderNumber{ get; set; }
    //..... more
    public IEnumerable<orderDetailBase> { get; set; }   // Serializing this causes issues 
```

任何想法如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:02:23.120

您可以尝试修改您的“orderDetailBase”类，如下所示：

```
[DataContract]
[KnownType(typeof(onlineOrderDetail))]
[KnownType(typeof(inStoreOrderDetail))]
public class orderDetailBase
{
   [DataMember]
   public int sequence { get; set; } 
```

# git - 如何撤消 _changes_ 到 Git 中旧提交中的特定文件？

> ID：15482384
> 
> 赞同：0
> 
> 时间：2013-03-18T16:52:17.263
> 
> 标签：git, tortoisegit

这可能是重复的，我只是没有碰巧找到一个。

基本上情况是：在某个提交中对文件进行了一些小的更改，现在该文件已被修改得更多（以添加新功能等）。

我想做的是自动撤消（如果可能的话）该提交中对文件的*更改，**而无需*实际返回文件的旧版本；即，无论该提交的差异是什么，它的反面都应该应用于当前版本。结果是最新文件的新“固定”版本。

我意识到计算机并不总是可以做到这一点，但是当错误提交后的未来变化完全不相关并且在不同的位置时，它应该是可能的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T16:58:12.733

找出您要撤消的提交，`revert`然后：

```
$ git revert 53ab103e8f 
```

将恢复提交`53ab103e8f`（通过在您的存储库中创建一个新条目，明确恢复该更改；如果恢复有问题，您将被要求手动解决冲突）

# bash - 将一个文件作为输入，从另一个文件中删除其内容

> ID：15482388
> 
> 赞同：1
> 
> 时间：2013-03-18T16:52:32.870
> 
> 标签：grep, bash

作为我正在编写的脚本的一部分，我需要将一个文件（单词列表）作为输入，并从另一个输入文件中删除这些单词的所有实例。我该怎么做这样的事情？也许使用[grep](/questions/tagged/grep "显示标记为“grep”的问题")？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:55:22.120

怎么样

```
$ grep -v -f words_to_exclude.txt input.txt 
```

在哪里

`-f`指定您希望 grep 匹配的单词文件

`-v`指定您希望 grep 输出*不*匹配的内容

以上要求在两个文件中每行一个单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:57:22.117

**man grep**说：

> -f FILE, --file=FILE 从 FILE 中获取模式，每行一个。空文件包含零个模式，因此不匹配任何内容。（-f 由 POSIX 指定。）

和这个：

> -v, --invert-match 反转匹配的感觉，选择不匹配的行。（-v 由 POSIX 指定。）

所以，是的，使用 grep 将是一个好方法。至少如果您想从输入文件中删除*所有包含特殊单词的行。*如果您只想删除单个单词，事情会变得更加复杂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:58:34.067

sed 可能是您正在寻找的。示例脚本：

```
#! /usr/bin/bash
for word in $(cat $1); 
do
sed s/$word//g $2 > tmp;
mv tmp $2;
done; 
```

假设您将其保存到 script.sh 中，您可以这样称呼它：

```
./script.sh wordsToExclude.txt textToProcess.txt 
```

`$1`在这种情况下是 bash 中的“参数号 1” `wordsToExclude.txt`，同样，`$2`是`textToProcess.txt`

这样做的作用是它用任何内容替换 $word 的每个实例，tmpfile 只是作为 sed 写入的缓冲区，因此它不会在工作时破坏源。

sed 命令中的`g`是“全局替换标志”。sed 的默认行为是仅替换一行中第一次出现的搜索模式。该`g`标志告诉 sed 替换所有出现的事件，而不仅仅是第一个。

# http - OpenCart 突然停止工作：HTTP 错误 500

> ID：15482401
> 
> 赞同：0
> 
> 时间：2013-03-18T16:53:37.577
> 
> 标签：http, opencart

上个月我使用 OpenCart v1.5.5.1 并且有几十个订单顺利通过。

今天突然，我在访问 www.domain.com/shop/* 时收到 HTTP 错误 500，但 www.domain.com 工作正常。到目前为止，我尝试无济于事：

*   重新启动服务器
*   清除 /logs/error.txt
*   删除 .htaccess

**日志中的最后一个错误是：**

```
2013-03-17 19:10:11 - PHP Notice:  Error: Table 'shop_db.geo' doesn't exist<br />Error No: 1146<br />SELECT g.id,g.full_name,g.name,g.postcode,z.zone_id,z.country_id FROM geo g LEFT JOIN zone z ON g.zone_id = z.zone_id WHERE g.name LIKE '99%' AND g.postcode <> '' ORDER BY population DESC LIMIT 12 in /var/www/domain.com/html/shop/system/database/mysql.php on line 50
2013-03-17 19:10:11 - PHP Notice:  Error: Table 'shop_db.geo' doesn't exist<br />Error No: 1146<br />SELECT g.id,g.full_name,g.name,g.postcode,z.zone_id,z.country_id FROM geo g LEFT JOIN zone z ON g.zone_id = z.zone_id WHERE g.name LIKE '990%' AND g.postcode <> '' ORDER BY population DESC LIMIT 12 in /var/www/domain.com/html/shop/system/database/mysql.php on line 50 
```

**这是.htaccess**

```
# 1.To use URL Alias you need to be running apache with mod_rewrite enabled. 

# 2\. In your opencart directory rename htaccess.txt to .htaccess.

# For any support issues please visit: http://www.opencart.com

Options +FollowSymlinks

# Prevent Directoy listing 
Options -Indexes

# Prevent Direct Access to files
<FilesMatch "\.(tpl|ini|log)">
 Order deny,allow
 Deny from all
</FilesMatch>

# SEO URL Settings
RewriteEngine On
# If your opencart installation does not run on the main web folder make sure you folder it does run in ie. / becomes /shop/ 

RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteRule ^download/(.*) /index.php?route=error/not_found [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA]

### Additional Settings that may need to be enabled for some servers 
### Uncomment the commands by removing the # sign in front of it.
### If you get an "Internal Server Error 500" after enabling any of the following settings, restore the # as this means your host doesn't allow that.

# 1\. If your cart only allows you to add one item at a time, it is possible register_globals is on. This may work to disable it:
# php_flag register_globals off

# 2\. If your cart has magic quotes enabled, This may work to disable it:
# php_flag magic_quotes_gpc Off

    # 3\. Set max upload file size. Most hosts will limit this and not allow it to be overridden but you can try
    # php_value upload_max_filesize 999M

    # 4\. set max post size. uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
    # php_value post_max_size 999M

    # 5\. set max time script can take. uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
    # php_value max_execution_time 200

    # 6\. set max time for input to be recieved. Uncomment this line if you have a lot of product options or are getting errors where forms are not saving all fields
    # php_value max_input_time 200

    # 7\. disable open_basedir limitations
    # php_admin_value open_basedir none

    # 8\. force the administration log-in screen to always load in HTTPS
    #RewriteEngine On
    #RewriteCond %{HTTPS} off
    #RewriteRule (.*) https://www.overair.ca/shop/admin/ [R] 
```

**和 php.ini**

```
magic_quotes_gpc = Off;
register_globals = Off;
default_charset = UTF-8;
memory_limit = 64M;
max_execution_time = 36000;
upload_max_filesize = 999M;
safe_mode = Off;
mysql.connect_timeout = 20;
session.use_cookies = On;
session.use_trans_sid = Off;
session.gc_maxlifetime = 172800;
allow_url_fopen = on;
;display_errors = 1;
;error_reporting = E_ALL; 
```

但是，我注意到他们过去几天一直在附近，没有任何问题。在我从备份恢复并丢失几个订单之前，我希望有人能提供帮助。

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:31:26.450

错误编号 1146 表示它正在尝试连接的表不在数据库中，您可能需要检查数据库并查看表是否存在并检查 config.php。希望你能找出问题所在！！！

# jquery - 将完整日历的事件源中的 url：“xyz”重定向到和操作类

> ID：15482402
> 
> 赞同：0
> 
> 时间：2013-03-18T16:53:39.680
> 
> 标签：jquery, struts2, fullcalendar

我是 web 应用程序开发的新手，目前我在工作中分配了一个 web 应用程序，我需要使用 struts2 java 实现完整的日历，我已经显示了它，但我无法将它重定向到一个从数据中获取数据的操作类mySQL 并显示它。请给我指点如何做到这一点，我现在尝试了 8 天，但仍然没有运气。

谢谢！！！

添加的代码：

我知道用于获取 json 提要的事件源的 java/servlet 语法是：

```
eventSources: [{
            url: '/mailexample/calendarevents',
            type: 'GET',
             dataType: 'json',
          }] 
```

截至目前我已经尝试过：

```
url: 'calanderevents.action',
type: 'GET',
 dataType: 'json', 
```

或者

```
 url action: 'calendarevents',
    type: 'GET',
     dataType: 'json', 
```

或者

```
url: 'calendarevents',  
// where calendar events maps to an action class
        type: 'GET',
         dataType: 'json', 
```

所有这些似乎都不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:23:55.317

应该是这样的……试试看

```
$('#calendar').fullCalendar({
events: function(start, end, callback) {
    $.ajax({
        url: 'calanderevents.action',
        dataType: 'json',
        data: {
            // our hypothetical feed requires UNIX timestamps
            start: Math.round(start.getTime() / 1000),
            end: Math.round(end.getTime() / 1000)
        },
        success: function(data) {
            var events = [];
            // logic to get each item from data and push it in events array
            callback(events);
        }
    });
}
}); 
```

# opengl - OpenGL 着色器信息结果错误

> ID：15482405
> 
> 赞同：0
> 
> 时间：2013-03-18T16:53:50.170
> 
> 标签：opengl, shader

我在 Windows 7 上使用 glew，当我打电话时：

```
int compileResult = 0;
int infoLogLength = 0;
//compile code
glGetShaderiv(_vertexShaderID, GL_COMPILE_STATUS, &compileResult);
glGetShaderiv(_vertexShaderID, GL_INFO_LOG_LENGTH, &infoLogLength);
GLchar vInfoLogMessage[512];
glGetShaderInfoLog(_vertexShaderID, infoLogLength, NULL, vInfoLogMessage); 
```

我不得不对 512 进行硬编码，因为**infoLogLength**总是返回 0。我用谷歌搜索它，发现它有时会在 Android 上发生，但我没有使用 Android SDK/NDK ......即使这样，**vInfoLogMessage**也是完全没有信息，无论是成功还是失败。

**但是compileResult**显示为已成功编译，但如果失败，我希望能够获取信息。

这可能是什么原因造成的？

**编辑**：~~程序链接返回一个错误，但我无法得到它，因为它没有填充 infoLogMessage ......~~ 这是我的错误，它也成功返回。

着色器的代码（如果相关）是：

```
//fragmentShader
#version 330 core
out vec3 color;
void main()
{
    color = vec3(1, 0, 0);
}

//vertexShader
#version 330 core
layout(location = 0) in vec3 vertexPosition_modelspace;
void main()
{
    gl_Position.xyz = vertexPosition_modelspace;
    gl_Position.w = 1.0;
} 
```

# ios - Facebook iOS SDK 3.2 在使用 logPurchase:currency 时产生错误：

> ID：15482407
> 
> 赞同：2
> 
> 时间：2013-03-18T16:54:00.560
> 
> 标签：ios, facebook-ios-sdk

使用新的 Facebook iOS SDK 3.2，每当我调用

```
[FBInsights logPurchase:price currency:currencyCode]; 
```

结果如下：

```
FBSDKLog: Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0x202319a0 {com.facebook.sdk:HTTPStatusCode=400, com.facebook.sdk:ParsedJSONResponseKey={
body =     {
    error =         {
        code = 100;
        message = "(#100) The specified events list contains unrecognized events that cannot be logged";
        type = OAuthException;
    };
};
code = 400;
} 
```

听起来像是 Facebook 的错误，因为这里没有太多出错的余地……

知道为什么会显示此错误吗？

# php - 如何创建 PHP 函数来创建对 AWS 的 JSON 请求（创建作业）

> ID：15482408
> 
> 赞同：2
> 
> 时间：2013-03-18T16:54:01.123
> 
> 标签：php, json, amazon-web-services

AWS 上有一项名为 Elastic Transcoder 的新服务。我知道一些 PHP，但我咬的比我能咀嚼的还要多……

我将如何创建一个简单的 PHP 函数，它将获取我的变量并创建一个 JSON 请求（当然格式正确）并在 AWS 上创建一个作业。以下是 AWS 提供的语法：

注意：我已经创建了一个能够提供所有必填字段的表单。

```
To create a job, send a POST request to the

/2012-09-25/jobs

resource. 
```

这是语法：

```
POST /2012-09-25/jobs HTTP/1.1
Content-Type: application/json; charset=UTF-8
Accept: */*
Host: elastictranscoder.Elastic Transcoder endpoint.amazonaws.com:443
x-amz-date: Mon, 14 Jan 2013 17:49:52 GMT
Authorization: AWS4-HMAC-SHA256 
           Credential=AccessKeyID/request-date/Elastic Transcoder endpoint/ets/aws4_request,
           SignedHeaders=host;x-amz-date;x-amz-target,
           Signature=calculated-signature
Content-Length: number of characters in the JSON string
{
"Input":{
  "Key":"name of the file to transcode",
  "FrameRate":"auto"|"10"|"15"|"23.97"|"24"|"25"|"29.97"|"30"|"60",
  "Resolution":"auto"|"width in pixelsxheight in pixels",
  "AspectRatio":"auto"|"1:1"|"4:3"|"3:2"|"16:9",
  "Interlaced":"auto"|"true"|"false",
  "Container":"auto"|"3gp"|"asf"|"avi"|"divx"|"flv"|"mkv"|"mov"|"mp4"|
     "mpeg"|"mpeg-ps"|"mpeg-ts"|"mxf"|"ogg"|"vob"|"wav"|"webm"
},
"Output":{
  "Key":"name of the transcoded file",
  "ThumbnailPattern":""|"pattern",
  "Rotate":"auto"|"0"|"90"|"180"|"270",
  "PresetId":"preset to use for the job"
},
"PipelineId":"pipeline to add the job to"
} 
```

需要提供的上述代码部分在语法的原始发布中以斜体显示：

[http://docs.aws.amazon.com/elastictranscoder/latest/developerguide/create-job.html#create-job-examples](http://docs.aws.amazon.com/elastictranscoder/latest/developerguide/create-job.html#create-job-examples)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T23:56:23.017

[适用于 PHP](http://aws.amazon.com/sdkforphp)的AWS 开发工具包包括对 Amazon Elastic Transcoder 的支持。您是否有不想使用它的理由？ [这](http://docs.aws.amazon.com/aws-sdk-php-2/latest/class-Aws.ElasticTranscoder.ElasticTranscoderClient.html)是 PHP SDK 文档的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-11T03:30:44.743

我建议使用图书馆，尤其是当您感到头疼时。

如果您不想安装 SDK 或希望避免使用较大包的开销，这里有一个用于使用 Elastic Transcoder 的独立 PHP 类：

[https://github.com/LPology/ElasticTranscoderPHP](https://github.com/LPology/ElasticTranscoderPHP)

要创建新的转码作业（使用默认设置）：

```
$pipelineId = 'pipelineId';
$input = array('Key' => 'inputFile');
$output = array(
  'Key' => 'outputFile.mp4',
  'PresetId' => 'presetId'
);

AWS_ET::setAuth($awsAccessKey, $awsSecretKey);
$result = AWS_ET::createJob($input, array($output), $pipelineId); 
```

# jquery - PhotoSwipe.js 显示 UNDEFINED 并且无法显示图像

> ID：15482411
> 
> 赞同：0
> 
> 时间：2013-03-18T16:54:09.140
> 
> 标签：jquery, jquery-mobile, photoswipe

我正在使用 Photoswipe，并且使用与网站上显示的完全相同的 HTML 结构和脚本，但是当单击我的缩略图时，会打开黑屏并仅显示一个“X”图标。

JS 错误面板显示 404 not found。它正在尝试将“未定义”添加到图像路径的末尾。

JS：

```
<script>
    $(document).ready(function () {

        var myPhotoSwipe = $("#ulProdImgs").photoSwipe({ enableMouseWheel: false, enableKeyboard: false });

    }); 
    </script> 
```

HTML：

```
<ul id="ulProdImgs">
<li>
<a href="/images/fence.jpg"><img src="/images/fence.jpg" alt="Image 01" /></a>
</li>
<li>
<a href="/images/fence.jpg"><img src="/images/fence.jpg" alt="Image 02" /></a>
</li>
</ul> 
```

我正在使用 jQuery 1.8.0 - 这不兼容吗？

错误是将未定义添加到路径末尾，如下所示：

`GET http://mysite.com/page/undefined 404 (Not Found)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:02:09.260

查看文档，您似乎需要将 photoswipe 附加到锚点。

试试这个：

```
var myPhotoSwipe = $("#ulProdImgs a").photoSwipe({ enableMouseWheel: false, enableKeyboard: false }); 
```

# c++ - 重载返回类型 >>

> ID：15482412
> 
> 赞同：3
> 
> 时间：2013-03-18T16:54:11.327
> 
> 标签：c++, operators, operator-overloading

为任何类重载 >> 运算符的标准方法返回 istream（或任何输入流）类型的对象是否有充分的理由。

例如，由于这个原因，代码如下

```
y = (cin >> x) ; 
```

`>>`如果重载具有输入对象的返回类型，它将不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:02:26.110

> 例如，由于这个原因，代码如下
> 
> `(cin >> x) = y;`
> 
> 不会工作。如果重载 >> 具有输入对象的返回类型，它将具有。

不，它不一定 - 在很多情况下你会看到`error: lvalue required as left operand of assignment`，除非你返回一个参考。（[点击这里进行演示](http://liveworkspace.org/code/2P2HgI%245)）

一般的原因是它允许*链接*，例如做类似的事情

```
mystream >> a >> b >> c; 
```

对于输入/输出流，还有一个额外的好处是可以将流转换为`void*`(C++03) 或`bool`(C++11)，这允许检查构造中的错误，例如

```
while (cin >> x) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:54:11.327

因为那时像 cin >> x >> y 这样的东西就行不通了。这比前面的例子使用得更频繁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:05:12.967

在极少数情况下`(cin >> x) = y;`是需要的。*预计*左侧变量是要返回的变量。示例：`(x += 5) = 7`, 'x' 被返回，然后设置为 7 - '5' 不是返回的。所以`(cin >> x)`'cin' 的预期结果是返回，它允许实现[operator chaining](https://stackoverflow.com/questions/9555555/how-does-operator-chaining-happen-in-c)。

在您的：'(cin >> x) = y;'中，预期的阅读方式是“cin >> x”，然后是“cin = 7”。这没有多大意义。返回其他内容只会让阅读您的代码的程序员感到困惑，因为他们的期望没有得到满足。（见[最小惊讶原则](http://en.wikipedia.org/wiki/Principle_of_least_astonishment)）

这并不意味着 'x y'*总是*需要返回对左侧的引用。通常，返回其他内容可能更有意义。例如，'myInt >> 4' 返回一个向右位移 4 位的 'myInt'*的副本。*

# c++ - c/c++ - 警告：sched_policy.h：没有这样的文件或目录

> ID：15482418
> 
> 赞同：0
> 
> 时间：2013-03-18T16:54:29.747
> 
> 标签：c++, c

我试图从 android 工具箱编译 ps.c 但我一直收到同样的错误

这是代码

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <fcntl.h>

#include <string.h>

#include <sys/stat.h>
#include <sys/types.h>
#include <dirent.h>

#include <pwd.h>

#include <sched_policy.h>

static char *nexttoksep(char **strp, char *sep)
{
char *p = strsep(strp,sep);
return (p == 0) ? "" : p;
}
static char *nexttok(char **strp)
{
return nexttoksep(strp, " ");
}

#define SHOW_PRIO 1
#define SHOW_TIME 2
#define SHOW_POLICY 4
#define SHOW_CPU 8
#define SHOW_MACLABEL 16

static int display_flags = 0;

static int ps_line(int pid, int tid, char *namefilter)
{
char statline[1024];
char cmdline[1024];
char macline[1024];
char user[32];
struct stat stats;
int fd, r;
char *ptr, *name, *state;
int ppid, tty;
unsigned wchan, rss, vss, eip;
unsigned utime, stime;
int prio, nice, rtprio, sched, psr;
struct passwd *pw;

sprintf(statline, "/proc/%d", pid);
stat(statline, &stats);

if(tid) {
    sprintf(statline, "/proc/%d/task/%d/stat", pid, tid);
    cmdline[0] = 0;
    snprintf(macline, sizeof(macline), "/proc/%d/task/%d/attr/current", pid, tid);
} else {
    sprintf(statline, "/proc/%d/stat", pid);
    sprintf(cmdline, "/proc/%d/cmdline", pid);
    snprintf(macline, sizeof(macline), "/proc/%d/attr/current", pid);
    fd = open(cmdline, O_RDONLY);
    if(fd == 0) {
        r = 0;
    } else {
        r = read(fd, cmdline, 1023);
        close(fd);
        if(r < 0) r = 0;
    }
    cmdline[r] = 0;
}

fd = open(statline, O_RDONLY);
if(fd == 0) return -1;
r = read(fd, statline, 1023);
close(fd);
if(r < 0) return -1;
statline[r] = 0;

ptr = statline;
nexttok(&ptr); // skip pid
ptr++; // skip "("

name = ptr;
ptr = strrchr(ptr, ')'); // Skip to *last* occurence of ')',
*ptr++ = '\0'; // and null-terminate name.

ptr++; // skip " "
state = nexttok(&ptr);
ppid = atoi(nexttok(&ptr));
nexttok(&ptr); // pgrp
nexttok(&ptr); // sid
tty = atoi(nexttok(&ptr));

nexttok(&ptr); // tpgid
nexttok(&ptr); // flags
nexttok(&ptr); // minflt
nexttok(&ptr); // cminflt
nexttok(&ptr); // majflt
nexttok(&ptr); // cmajflt
#if 1
utime = atoi(nexttok(&ptr));
stime = atoi(nexttok(&ptr));
#else
nexttok(&ptr); // utime
nexttok(&ptr); // stime
#endif
nexttok(&ptr); // cutime
nexttok(&ptr); // cstime
prio = atoi(nexttok(&ptr));
nice = atoi(nexttok(&ptr));
nexttok(&ptr); // threads
nexttok(&ptr); // itrealvalue
nexttok(&ptr); // starttime
vss = strtoul(nexttok(&ptr), 0, 10); // vsize
rss = strtoul(nexttok(&ptr), 0, 10); // rss
nexttok(&ptr); // rlim
nexttok(&ptr); // startcode
nexttok(&ptr); // endcode
nexttok(&ptr); // startstack
nexttok(&ptr); // kstkesp
eip = strtoul(nexttok(&ptr), 0, 10); // kstkeip
nexttok(&ptr); // signal
nexttok(&ptr); // blocked
nexttok(&ptr); // sigignore
nexttok(&ptr); // sigcatch
wchan = strtoul(nexttok(&ptr), 0, 10); // wchan
nexttok(&ptr); // nswap
nexttok(&ptr); // cnswap
nexttok(&ptr); // exit signal
psr = atoi(nexttok(&ptr)); // processor
rtprio = atoi(nexttok(&ptr)); // rt_priority
sched = atoi(nexttok(&ptr)); // scheduling policy

tty = atoi(nexttok(&ptr));

if(tid != 0) {
    ppid = pid;
    pid = tid;
}

pw = getpwuid(stats.st_uid);
if(pw == 0) {
    sprintf(user,"%d",(int)stats.st_uid);
} else {
    strcpy(user,pw->pw_name);
}

if(!namefilter || !strncmp(name, namefilter, strlen(namefilter))) {
    if (display_flags & SHOW_MACLABEL) {
        fd = open(macline, O_RDONLY);
        strcpy(macline, "-");
        if (fd >= 0) {
            r = read(fd, macline, sizeof(macline)-1);
            close(fd);
            if (r > 0)
                macline[r] = 0;
        }
        printf("%-30s %-9s %-5d %-5d %s\n", macline, user, pid, ppid, cmdline[0] ?    cmdline : name);
        return 0;
    }

    printf("%-9s %-5d %-5d %-6d %-5d", user, pid, ppid, vss / 1024, rss * 4);
    if (display_flags & SHOW_CPU)
        printf(" %-2d", psr);
    if (display_flags & SHOW_PRIO)
        printf(" %-5d %-5d %-5d %-5d", prio, nice, rtprio, sched);
    if (display_flags & SHOW_POLICY) {
        SchedPolicy p;
        if (get_sched_policy(pid, &p) < 0)
            printf(" un ");
        else
            printf(" %.2s ", get_sched_policy_name(p));
    }
    printf(" %08x %08x %s %s", wchan, eip, state, cmdline[0] ? cmdline : name);
    if(display_flags&SHOW_TIME)
        printf(" (u:%d, s:%d)", utime, stime);

    printf("\n");
}
return 0;
}

void ps_threads(int pid, char *namefilter)
{
char tmp[128];
DIR *d;
struct dirent *de;

sprintf(tmp,"/proc/%d/task",pid);
d = opendir(tmp);
if(d == 0) return;

while((de = readdir(d)) != 0){
    if(isdigit(de->d_name[0])){
        int tid = atoi(de->d_name);
        if(tid == pid) continue;
        ps_line(pid, tid, namefilter);
    }
}
closedir(d);
}

int ps_main(int argc, char **argv)
{
DIR *d;
struct dirent *de;
char *namefilter = 0;
int pidfilter = 0;
int threads = 0;

d = opendir("/proc");
if(d == 0) return -1;

while(argc > 1){
    if(!strcmp(argv[1],"-t")) {
        threads = 1;
    } else if(!strcmp(argv[1],"-x")) {
        display_flags |= SHOW_TIME;
    } else if(!strcmp(argv[1], "-Z")) {
        display_flags |= SHOW_MACLABEL;
    } else if(!strcmp(argv[1],"-P")) {
        display_flags |= SHOW_POLICY;
    } else if(!strcmp(argv[1],"-p")) {
        display_flags |= SHOW_PRIO;
    } else if(!strcmp(argv[1],"-c")) {
        display_flags |= SHOW_CPU;
    } else if(isdigit(argv[1][0])){
        pidfilter = atoi(argv[1]);
    } else {
        namefilter = argv[1];
    }
    argc--;
    argv++;
}

if (display_flags & SHOW_MACLABEL) {
    printf("LABEL USER PID PPID NAME\n");
} else {
    printf("USER PID PPID VSIZE RSS %s%s %s WCHAN PC NAME\n",
           (display_flags&SHOW_CPU)?"CPU ":"",
           (display_flags&SHOW_PRIO)?"PRIO NICE RTPRI SCHED ":"",
           (display_flags&SHOW_POLICY)?"PCY " : "");
}
while((de = readdir(d)) != 0){
    if(isdigit(de->d_name[0])){
        int pid = atoi(de->d_name);
        if(!pidfilter || (pidfilter == pid)) {
            ps_line(pid, 0, namefilter);
            if(threads) ps_threads(pid, namefilter);
        }
    }
}
closedir(d);
return 0;
} 
```

和 sched_policy.h

```
#ifndef __CUTILS_SCHED_POLICY_H
#define __CUTILS_SCHED_POLICY_H

#ifdef __cplusplus
extern "C" {
#endif

 typedef enum {
    SP_DEFAULT    = -1,
    SP_BACKGROUND = 0,
    SP_FOREGROUND = 1,
    SP_SYSTEM     = 2,  // can't be used with set_sched_policy()
    SP_AUDIO_APP  = 3,
    SP_AUDIO_SYS  = 4,
    SP_CNT,
    SP_MAX        = SP_CNT - 1,
    SP_SYSTEM_DEFAULT = SP_FOREGROUND,
} SchedPolicy;

extern int set_sched_policy(int tid, SchedPolicy policy);

extern int get_sched_policy(int tid, SchedPolicy *policy);

extern const char *get_sched_policy_name(SchedPolicy policy);

#ifdef __cplusplus
}
#endif

#endif 
```

我在 c/c++ 方面的知识为 0，我试图用 eclipse 编译它
也从命令行使用 gcc 尝试过同样的错误

我的java项目需要它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:03:12.977

使用 include 有一个区别：
* `#include <some_library>`- 这将在标准文件夹中搜索库文件
vs
* `#include "some_library"`- 这将在您当前的工作目录中搜索文件。

你想用`#include "sched_policy.h"`

查看此问题的答案以获取有关差异的更多信息：
[#include <filename> 和 #include "filename" 之间有什么区别？](https://stackoverflow.com/questions/21593/what-is-the-difference-between-include-filename-and-include-filename)

# php - php setAttribute 用 & 替换 &

> ID：15482421
> 
> 赞同：0
> 
> 时间：2013-03-18T16:54:44.807
> 
> 标签：php

我正在尝试做这样的事情（其中 $doc 是一个 DOMDocument）

```
$link_found = $doc->getElementsByTagName('a');

foreach ($link_found as $idx => $link) {
    $link->setAttribute('href', "/test.php?t=1&q=2" ) ;
} 
```

一切正常，但现在我得到了href

```
"/test.php?t=1&amp;q=2" 
```

我需要文字`&`，而不是编码`&amp;`

我需要

```
 "/test.php?t=1&q=2" 
```

像一个普通的查询字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:03:05.297

标准要求，`&`如果它没有引入实体，*即使*它在属性中，也要对其进行转义。

`i_`（这一定是我在一个句子中使用的最多的词......曾经......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:02:05.807

```
$string = html_entity_decode($string); // you're welcome 
```

# java - 如何列出当前目录中的文件？

> ID：15482423
> 
> 赞同：40
> 
> 时间：2013-03-18T16:54:47.893
> 
> 标签：java, file, directory

我希望能够列出当前目录中的文件。我做了一些应该可以工作但没有返回所有文件名的东西。

```
File dir = new File(".");
File[] filesList = dir.listFiles();
for (File file : filesList) {
    if (file.isFile()) {
        System.out.println(file.getName());
    }
} 
```

它返回`.classpath`，但我很确定我在这个文件夹中有其他 java 文件。也许当前文件夹的点符号不正确？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-18T16:59:07.363

试试这个，检索文件夹和子文件夹中的所有文件

```
public static void main(String[]args)
    {
        File curDir = new File(".");
        getAllFiles(curDir);
    }
    private static void getAllFiles(File curDir) {

        File[] filesList = curDir.listFiles();
        for(File f : filesList){
            if(f.isDirectory())
                getAllFiles(f);
            if(f.isFile()){
                System.out.println(f.getName());
            }
        }

    } 
```

仅检索文件/文件夹

```
public static void main(String[]args)
    {
        File curDir = new File(".");
        getAllFiles(curDir);
    }
    private static void getAllFiles(File curDir) {

        File[] filesList = curDir.listFiles();
        for(File f : filesList){
            if(f.isDirectory())
                System.out.println(f.getName());
            if(f.isFile()){
                System.out.println(f.getName());
            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-18T18:05:01.800

> 也许当前文件夹的点符号不正确？

打印结果[`File.getCanonicalFile()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getCanonicalFile%28%29)以检查路径。

> 谁能向我解释为什么 src 不是当前文件夹？

调用 JVM 时，您的 IDE 正在设置类路径。

EG（到达 Netbeans） 如果您选择菜单`File`| `Project Properties (all classes)`您可能会看到类似以下内容：

![Netbeans 项目选项](../Images/fca508bb0c27ade46fe772538efd0f0e.png)

这是`Working Directory`这里感兴趣的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T16:58:51.540

您应该验证它`new File(".")`确实指向您认为它指向的位置 -`.classpath`暗示了一些 Eclipse 项目的根......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T17:00:46.347

对此进行了快速窥探，但这看起来应该可行。虽然我还没有测试过。

```
 File f = new File("."); // current directory

    File[] files = f.listFiles();
    for (File file : files) {
        if (file.isDirectory()) {
            System.out.print("directory:");
        } else {
            System.out.print("     file:");
        }
        System.out.println(file.getCanonicalPath());
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T17:13:10.650

您的代码没有任何问题。它应该列出指定目录直接包含的所有文件和目录。

问题很可能是以下之一：

*   该`"."`目录不是您所期望的。`"."`路径名实际上表示 JVM 的“当前目录”或“工作目录” 。`"."`您可以通过打印来验证实际是什么目录`dir.getCanonicalPath()`。

*   您误解了`dir.listFiles()`返回的内容。它不会返回下面树中的所有对象`dir`。它只返回*直接*在`dir`.

该`".classpath"`文件表明您正在查看 Eclipse 项目目录，并且 Eclipse 项目*通常*配置有子目录中的 Java 文件，例如`"./src"`. 我不希望在`"."`目录中看到任何 Java 源代码。

* * *

> 谁能向我解释为什么 src 不是当前文件夹？”

假设您在 Eclipse 中启动应用程序，则当前文件夹*默认*为项目目录。您可以通过启动器配置向导中的面板之一更改默认当前目录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T17:21:31.280

如果您独立编译和运行代码（从命令行），您的代码会给出预期的结果。在eclipse中，每个项目的默认工作目录是项目目录，这就是你得到这个结果的原因。

您可以在 java 中将 user.dir 属性设置为：

```
 System.setProperty("user.dir", "absolute path of src folder"); 
```

那么它将给出预期的结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-11T14:00:35.817

我在我的本地目录中使用了这个答案（例如`E://`）它对于第一个目录和第二个目录工作正常，在搜索我发现问题是由隐藏目录创建的原因之后，输出产生了一个 java 空指针异常，并且这个目录是由windows创建的，以避免这个问题，只需使用这个

```
public void recursiveSearch(File file ) {
 File[] filesList = file.listFiles();
    for (File f : filesList) {
        if (f.isDirectory() && !f.isHidden()) {
            System.out.println("Directoy name is  -------------->" + f.getName());
            recursiveSearch(f);
        }
        if( f.isFile() ){
            System.out.println("File name is  -------------->" + f.getName());
        }
    }
} 
```

# tfs - TFS 2012 Web 访问保存查询结果已禁用

> ID：15482432
> 
> 赞同：4
> 
> 时间：2013-03-18T16:55:12.587
> 
> 标签：tfs

我已安装 TFS 2012，但在显示查询结果的 Web 访问表单中的“保存结果”按钮出现问题。它在所有情况下都是灰色的，即使在安装了 TFS 的服务器上运行。

有人知道如何启用此按钮吗？此工具栏上的刷新、打开和两个链接按钮都可以正常工作，但保存结果按钮显示为灰色且无法单击。

感谢您的任何帮助。

哦，另外，如果有人知道如何使结果网格中的行背景颜色交替出现，我将永远欠你的债！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T18:41:44.927

愚蠢的我，我认为“保存结果”会保存查询的结果，但它只是保存查询返回的任何工作项中的更改。要导出这些结果，请选择网格中的任何项目（然后 control+a 选择所有项目）并剪切/粘贴到 excel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T17:26:41.667

ctrl+a（在 chrome 中）选择整个页面。

对我有用的是选择顶行，然后按住 shift，然后选择底行。然后 ctrl+c，打开一个对话框，然后是另一个 ctrl+c，然后粘贴到 Excel 中（在提示符上选择“ok”）。

像冠军一样工作。

# ios - 如何最好地处理 iOS 应用程序中没有互联网连接

> ID：15482434
> 
> 赞同：3
> 
> 时间：2013-03-18T16:55:13.697
> 
> 标签：ios, mobile, connection

我正在开发一个管理调查的应用程序。它会在设备上存储尽可能多的数据，但在应用程序中有一些地方，如果用户没有 Internet 连接，则继续进行是没有意义的。因此，如果用户已经成功登录一次，他们的详细信息将从本地 SQLlite 数据库中提取，登录屏幕将被跳过，他们直接进入他们可以选择回答的调查菜单。如果其中有他们已经完成的调查，他们可以选择编辑他们的答案。那时，调查问题应该已经在设备的本地数据库中，但我需要从服务器下载他们的所有答案，以防他们使用不同的设备对其进行了修改。另外，当然，如果他们想开始新的调查，我需要检索问题。如果他们没有互联网连接，他们需要在那个时候停下来。我显示一个对话框，通知他们没有 Internet 连接，应该稍后再试。这一切都很好。如果用户有 Internet 连接，我也会显示类似的对话框，但主机无法访问，但对话框后我该怎么办？在 Android 中，当他们关闭对话框时，我可以退出应用程序，但 Apple 不赞成强制关闭应用程序，那么我在 iOS 设备上该怎么办？只是希望用户最终离开并做其他事情？但是对话后我该怎么办？在 Android 中，当他们关闭对话框时，我可以退出应用程序，但 Apple 不赞成强制关闭应用程序，那么我在 iOS 设备上该怎么办？只是希望用户最终离开并做其他事情？但是对话后我该怎么办？在 Android 中，当他们关闭对话框时，我可以退出应用程序，但 Apple 不赞成强制关闭应用程序，那么我在 iOS 设备上该怎么办？只是希望用户最终离开并做其他事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:02:09.733

您可以在对话框中创建一个重试按钮，以尝试重新建立连接。

或者您可以设置一个 NSTimer 以在设定的持续时间内检查连接。这似乎是最可行的，因为它允许用户继续编辑他们的调查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T17:04:53.913

我可能会呈现一个 UIAlertView 或某种用户无法关闭的模式，然后一旦可达性或任何机制报告连接再次可用，以编程方式关闭警报/模式。

退出用户的应用程序非常突然，很可能会导致您的应用程序被 AppStore 拒绝。

编辑：

最终，听起来您想要做的只是阻止他们继续进行调查，而不一定阻止他们使用该应用程序。听起来您只需要一个“临时”区域/视图来告诉他们正在发生的事情以及他们目前无法进行任何调查的原因。看看其他需要始终保持连接的应用程序，例如 Pandora、Netflix、Hulu 等……当您在 AirPlane 模式下打开他们的应用程序或在使用时关闭 WiFi 会发生什么？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T17:02:23.893

鉴于这种情况，我认为如果您在退出之前放置一个对话框，Apple 不会拒绝您的应用程序。

诸如“服务器无法访问，没有它，此应用程序将无法运行。该应用程序现在将关闭。谢谢您，祝您有美好的一天！”

如果您的二进制文件被拒绝，您可以尝试解释情况。

# android - Android 仪表 ListView 点击

> ID：15482438
> 
> 赞同：0
> 
> 时间：2013-03-18T16:55:20.780
> 
> 标签：android, instrumentation

我的活动中有一个 ListView。当我单击 ListView 中的某个项目时，我会调用一个意图并启动一个新的 Activity。我已经设置了我的测试用例，并获得了我的 ListView 的参考。我现在如何模拟用户单击 ListView 行？下面是我的测试用例的代码，它正确通过

```
@SmallTest
    public void testAdapter(){
        childActivity=startActivity(mStartIntent, null, null);
        TextView t2=(TextView) childActivity.findViewById(R.id.text2);
        secondListView=(ListView)childActivity.findViewById(R.id.myListView);
        assertNotNull(secondListView);
        getInstrumentation().callActivityOnCreate(childActivity, null);
        getInstrumentation().callActivityOnResume(childActivity);
        assertEquals(t2.getText(), text);
        final ArrayAdapter<String> testAdapter=(ArrayAdapter<String>) secondListView.getAdapter();
        assertFalse(testAdapter.isEmpty());

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:57:06.960

你需要`OnItemClickListener`：

```
secondListView.setOnItemClickListener(new OnItemClickListener()
            {
                @Override
                public void onItemClick(AdapterView<?> parent, View searchListV, int position, long id)
                {
                    //Do stuff here
                }
            }); 
```

**编辑：**

要以编程方式单击，请使用以下命令：

```
secondListView.performItemClick(view, position, id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:36:29.537

这里有更详细的代码： [活动测试](http://developer.android.com/tools/testing/activity_testing.html)和 SpinnerTest 示例应用程序。

# python - 如何防止在 urlopen 上永久阻塞

> ID：15482439
> 
> 赞同：3
> 
> 时间：2013-03-18T16:55:21.667
> 
> 标签：python, sockets, python-2.7, urllib2

我遇到了一个问题，`urllib2.urlopen`/`requests.post`偶尔会永远阻塞`socket.recv`并且永远不会返回。

我试图找出为什么会发生这种情况并解决这个问题，但同时我想知道是否有办法防止它永远阻塞？

我已经知道`timeout`for 的可选参数`urllib2.urlopen`，`socket.setdefaulttimeout`但不幸的是，对于我的用例来说，超时不是解决方案，因为我正在使用 POST 上传文件，我使用的任何超时值都会冒中断正常文件上传的风险。

我也看到了一些使用信号的解决方案，但这与对我使用超时有同样的问题（而且也是问题，因为我不是从主线程执行此操作）。

是否只有在一段时间内没有通过套接字发送/接收数据时才可能超时？或者也许有某种方法可以使用 select / poll 来防止我遇到的死锁/阻塞？

如果有使用 select / poll 的解决方案，我将如何将其合并到`urllib2.urlopen`/中`requests.post`？

* * *

我也有这样的想法，如果我可以通过写入类型的接口发送文件数据，那么我将控制对文件的迭代并一次发送块，我可能有足够的控制权来避免停顿。我不确定如何实现它，所以我问了一个问题：[Upload a file with a file.write interface](https://stackoverflow.com/questions/15230595/upload-a-file-with-a-file-write-interface)

**更新** 似乎我一直对`timeout`python中的含义有误解，它似乎实际上是空闲超时或读/写超时（可能是我第一次[不同意 Guido](http://markmail.org/message/joyaeqco47v3u2o2)）。我一直认为这是响应应该返回的最长时间 - 谢谢@tomasz 指出这一点！

但是在添加超时参数（同时使用`urllib2`和测试`requests`）之后，我遇到了一些非常奇怪和微妙的场景，可能是特定于 mac 的，其中超时无法正常工作，我越来越倾向于认为这是一个错误。我将继续调查并找出问题所在。再次感谢 tomasz 对此的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T22:07:51.617

我相信您可以通过在操作系统级别调整 TCP 设置来摆脱挂起状态，但假设您的应用程序无法在专用（并且可由您维护）机器上运行，您应该寻求更通用的解决方案。

您询问：

> 是否只有在一段时间内没有通过套接字发送/接收数据时才可能超时

这正是`socket.settimeout`（或传递给`urllib2`）会给你的行为。与基于 SIGALRM 的超时（即使在缓慢的数据传输期间也会终止）相反，只有在定义的时间段内没有传输数据时才会发生传递给套接字的超时。如果在此期间已经传输了一些但不是所有数据，则调用`socket.send`or应该返回部分计数，然后将使用后续调用来传输剩余数据。`socket.recv``urllib2`

话虽如此，如果您的 POST 调用将在多个`send`调用中执行，并且任何（但不是第一个）调用会阻塞并超时而不发送任何数据，则它仍可能在上传过程中的某个地方终止。您给人的印象是您的应用程序无法正确处理它，但我认为它应该，因为它类似于强制终止进程或只是断开连接。

您是否测试并确认`socket.settimeout`不能解决您的问题？或者您只是不确定行为是如何实现的？如果前者是正确的，请您提供更多细节吗？我很确定您只需设置超时是安全的，因为 python 只是使用行为如上所述的低级 BSD 套接字实现。为了给您更多参考，请查看`setsockopt`手册页和`SO_RCVTIMEO`/或`SO_SNDTIMEO`选项。我希望`socket.settimeout`完全使用这些功能和选项。

**--- EDIT ---** *（提供一些测试代码）*

因此，我能够获取`Requests`模块并与`urllib2`. `recv`我已经运行了正在接收数据块的服务器，每次调用之间的间隔越来越长。正如预期的那样，当间隔达到指定的超时时间时，客户端超时。例子：

**服务器**

```
import socket
import time

listener = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
listener.bind(("localhost", 12346))
listener.listen(1)
sock,_ = listener.accept()

interval = 0.5
while 1:
  interval += 1 # increase interval by 1 second
  time.sleep(interval)
  # Get 1MB but will be really limited by the buffer
  data = sock.recv(1000000)
  print interval, len(data)
  if not data:
    break 
```

**客户端** *（请求模块）*

```
import requests

data = "x"*100000000 # 100MB beefy chunk
requests.post("http://localhost:12346", data=data, timeout=4) 
```

**客户端** *（urllib2 模块）*

```
import urllib2

data = "x"*100000000 # 100MB beefy chunk
urllib2.urlopen("http://localhost:12346", data=data, timeout=4) 
```

**输出** *（服务器）*

```
> 1.5 522832
> 2.5 645816
> 3.5 646180
> 4.5 637832 <--- Here the client dies (4.5 seconds without data transfer)
> 5.5 294444
> 6.5 0 
```

两个客户都提出了一个例外：

```
# urllib2
URLError: timeout('timed out',)

# Requests
Timeout: TimeoutError("HTTPConnectionPool(host='localhost', port=12346): Request timed out. (timeout=4)",) 
```

一切都按预期工作！如果没有将超时作为参数传递，则对 的`urllib2`反应也很好`socket.setdefaulttimeout`，但`Requests`没有。这并不奇怪，因为内部实现根本不需要使用默认值，并且可以根据传递的参数简单地覆盖它或使用非阻塞套接字。

我一直在使用以下方法运行它：

```
OSX 10.8.3
Python 2.7.2
Requests 1.1.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:11:05.337

您提到无限期阻塞“非常偶尔”发生，并且您正在寻找后备以避免在这种情况下上传文件失败。在这种情况下，我建议对您的发帖调用使用超时，并在超时的情况下重试发帖。所有这些都需要一个简单的 for 循环，如果除了超时之外发生任何事情，就会中断。

当然，您应该在发生这种情况时记录警告消息，并监控这种情况发生的频率。而且您应该尝试找到冻结的根本原因（正如您提到的那样）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:19:19.603

一种可能的决定 - 您可以将 urllib2 请求嵌套到具有 ALRM 信号处理的块中，或者将其放入线程中并在超时时强制停止。这将强制通过 timeout 停止您的请求，尽管存在任何内部 urllib2 问题，关于这种情况的老问题： [Python: kill or terminate subprocess when timeout](https://stackoverflow.com/questions/4158502/python-kill-or-terminate-subprocess-when-timeout)

# php - asort() 在 php 中使用数组中的两个字符串

> ID：15482441
> 
> 赞同：0
> 
> 时间：2013-03-18T16:55:34.740
> 
> 标签：php, sorting

数组（ [0] => 约翰·史密斯）

数组（ [0] => 玛丽·史密斯）

数组（ [0] => 杰克斯派洛）

我想根据其名字对以下数组进行排序，(John,Mary,Smith)

然而这个回报`111`

```
$araySort = array($r['fullname']);
                        $sort = asort($araySort, SORT_REGULAR);
                        echo "<pre>";   
                        print_r($sort); 
                        echo "</pre>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:58:16.087

[`asort`](http://php.net/manual/en/function.asort.php)通过引用修改数组并`true`在成功时返回 (1)。您想累积循环中的所有名称，然后调用该函数。

# mvvm - 与 JayData 的 Kendo UI MVVM 数据绑定

> ID：15482444
> 
> 赞同：1
> 
> 时间：2013-03-18T16:55:37.937
> 
> 标签：mvvm, kendo-ui, jaydata

我是一个整体（剑道 UI && MVVM）的新手。

我正在尝试将下拉列表与本地数据库绑定，并在标记为 //<<<<<<

我在这里做错了什么？- 我已经看到了 JayData 上可用的示例，但它并没有清楚地说明如何绑定本地数据库。

我的代码看起来像这样。

```
 <div id="wrapper">
        <div id="NESTForm">

            <select data-role="dropdownlist" data-value-field="UserID" data-text-field="Name"
                data-bind="source: userSource">
            </select>

        </div>
    </div>
    <script>
        var userDB;
        $(document).ready(function () {

            $data.Entity.extend("Users",
            {
                UserID: { type: "int", key: true, required: true },
                Name: { type: "string", required: true }

            });

            $data.EntityContext.extend("EXAMPLEDB", {
                Users: { type: $data.EntitySet, elementType: Users }
            });

            userDB = new EXAMPLEDB({
                name: "webSql", databaseName: "EXMPLEDB",
                dbCreation: $data.storageProviders.DbCreationType.DropTableIfChange
            });

            var viewModel = kendo.observable({

                //Initial data  binders   ,
                userSource: userDB.Users.asKendoDataSource() //<<<<<< this throws error

            });

            // apply the bindings
            kendo.bind(document.body.children, viewModel);

        });

    </script> 
```

错误是

```
Uncaught TypeError: Object function (a,b){var c=this,d,e;c.trigger(w,{field:a}),a==="this"?d=c:(e=O[a]=O[a]||n.getter(a,!0),d=e(c),b&&typeof d=="function"&&(d=d.call(c)));return d} has no method 'push' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T18:44:57.170

好吧，我在 JayData 论坛上发布了同样的问题并想通了。虽然我从 Jaydata 下载了包，但脚本文件很旧，但社区建议我直接在 SVN 链接到脚本

只是为了记录，上面的代码可以正常工作。

这是社区回复

[http://jaydata.org/forum/viewtopic.php?f=3&t=174&sid=2ff7d9f37bf758a573c70a89fac507fb](http://jaydata.org/forum/viewtopic.php?f=3&t=174&sid=2ff7d9f37bf758a573c70a89fac507fb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:07:28.330

我现在不能尝试，它看起来没问题，只是你必须等待你的数据库准备好，比如：

```
userDB.onReady(function() {
var viewModel = ... 
```

# sql - 如何使用 SQL OUTER JOIN 有效地 JOIN HUGE 表

> ID：15482445
> 
> 赞同：1
> 
> 时间：2013-03-18T16:55:39.563
> 
> 标签：sql, performance, oracle, join, oracle10g

Oracle 10g 64 位 Red Hat Enterprise Linux 5 64 位

我目前可以访问规范化的第三方数据库。这些有大量数据，我的要求是通过连接大量表来公开物化视图。

表 1：Example_Master 列：MasterID (VARCHAR2(250)) MasterName (VARCHAR2(250)) 行：9000 万主键：MasterID

表 2：Example_ChildA1 列：ChildA1ID (VARCHAR2(250)) MasterID(VARCHAR2(250)) 行：2500 万

表 3：Example_ChildA1ID 列：ChildA1ID (VARCHAR2(250)) ChildA1Name(VARCHAR2(250)) 主键：ChildA1ID

表 4：Example_ChildA2 列：ChildA2ID (VARCHAR2(250)) MasterID(VARCHAR2(250)) 行：3500 万

表 5：Example_ChildA2ID 列：ChildA2ID (VARCHAR2(250)) ChildA2Name(VARCHAR2(250)) 主键：ChildA2ID

ETC。，

每个子表可能有也可能没有与 MASTERID 等效的条目。所以我必须获取所有 MASTERID 及其相关的 CHILD 名称。如果没有任何 Child 的等效值，则它必须返回“NULL”。所以我现在有下面的物化视图语法

```
 SELECT a.MasterName, c.ChildA1Name, e.ChildA2Name, g.ChildA3Name
 FROM 
 Example_Master a,
 Example_ChildA1 b,
 Example_ChildA1ID c,
 Example_ChildA2 d,
 Example_ChildA2ID e,
 Example_ChildA3 f,
 Example_ChildA3ID g
 WHERE 
 c.ChildA1ID(+) = b.ChildA1ID
 AND e.ChildA2ID(+) = d.ChildA2ID
 AND g.ChildA3ID(+) = f.ChildA3ID
 AND a.MasterID=b.MasterID (+)
 AND a.MasterID=d.MasterID (+)
 AND a.MasterID=f.MasterID (+) 
```

我必须再加入 5 个像上面这样的子表，并且这个查询的成本变得如此巨大，以至于需要将近 16 分钟才能得到结果。有没有更好的方法来使用 OUTER JOINS？如果您需要有关我的问题的更多详细信息，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T19:59:40.353

当您像这样对大型表进行 equi-join 时，您可以希望的最佳计划是一组哈希外连接，其成本通常等于全表扫描的成本加上大型哈希表溢出到磁盘的开销。

只有存在覆盖索引，才能真正降低全表扫描的成本。

拥有大量可用内存当然可以降低哈希表溢出到磁盘的可能性，但也可以通过在连接键上对表进行等分区来帮助。通常这是通过散列分区完成的，使用尽可能多的散列分区来防止将散列表保留在内存中。更多来自文档：[https](https://docs.oracle.com/cd/B28359_01/server.111/b32024/part_avail.htm#CIHCDBIF) ://docs.oracle.com/cd/B28359_01/server.111/b32024/part_avail.htm#CIHCDBIF （或搜索“partition-wise join”）

请注意，您不需要使用并行查询来从分区连接中受益——串行查询也有好处。

顺便说一句，感谢您使用的不是低于 10g 的版本——您无法有效地与 LARGE_TABLE LEFT OUTER JOIN SMALL TABLE 进行等值连接，因为优化器无法首先访问小表来创建哈希表-- 这总是一个嵌套循环:(

# actionscript-3 - 如何使用按钮保持文本的定位？

> ID：15482454
> 
> 赞同：0
> 
> 时间：2013-03-18T16:56:22.667
> 
> 标签：actionscript-3, flash, flashdevelop

试图创建一个带有文本的按钮，但似乎找不到一种简单的方法来让它们正确定位。我想在构建按钮之后，我也可以将按钮的 x/y/height/width 定位为文本字段的参数。但是 trace(bStart.x) 和 trace(bStart.y) 都返回 0。我做错了什么？

是）我有的：

```
var bFormat:TextFormat = new TextFormat();
bFormat.font = "Arial";
bFormat.bold = true;
bFormat.color = 0x000000;
bFormat.size = 28;
bFormat.align = "center";

var bStart:Sprite = new Sprite();
bStart.graphics.beginFill(0X00FF00, 1);
bStart.graphics.drawRect(stage.stageWidth / 2 - 100, stage.stageHeight / 2 - 200, 100, 50);
bStart.graphics.endFill();
bStart.buttonMode = true;
bStart.mouseChildren = false;

var bStartText:TextField = new TextField();
bStartText.defaultTextFormat = bFormat;
bStartText.text = "Start";
bStartText.x = bStart.x;
bStartText.y = bStart.y;
bStartText.height = bStart.height;
bStartText.width = bStart.width;

stage.addChild(bStart);
bStart.addChild(bStartText); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:04:53.257

因为你没有改变 bStart 的 x&y，你只是从 x&y 起点开始绘制，Sprite 对象本身仍然在 0,0

试试这个

```
...
bStart.graphics.drawRect(stage.stageWidth / 2 - 100, stage.stageHeight / 2 - 200, 0, 0);
bStart.graphics.endFill();
bStart.x = 100;
bStart.y = 50;
... 
```

如果您在 Sprite 中添加文本，它将具有与 sprite 相同的坐标，因此无需将文本 x,y 设置为相同。

# sql - 忽略 VS 2012 中 sql 文件中的错误

> ID：15482459
> 
> 赞同：2
> 
> 时间：2013-03-18T16:56:30.467
> 
> 标签：sql, vb.net, visual-studio-2012

我在 Visual Studio 2012 的 VB.NET 项目中有“.sql”文件。

它们配置为：

```
Build Action = None
Copy to output Directory = Copy Always 
```

在 Visual Studio 的文本编辑器中打开文件时，出现编译错误。当文件关闭时，我没有得到编译错误。

我不希望它在这些文件中发现错误，因为我不想阻止项目成功构建。这些对我来说基本上只是文本文件。

关于如何禁用此功能的任何想法？

（错误的一个例子是`SQL80001: Incorrect syntax near '<'`，这是有道理的，因为它是无效的 SQL，但这是我想要的。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:10:33.423

幻象错误虽然烦人，但不会阻止项目成功构建。他们只会使错误列表变得模糊，并使发现真正的问题变得更加困难。我知道这并不能解决您的核心问题，但它至少应该让您的项目得以构建！

# c# - 为什么 type.getConstructor 将类型数组作为参数？

> ID：15482460
> 
> 赞同：2
> 
> 时间：2013-03-18T16:56:35.473
> 
> 标签：c#, reflection, constructor

我目前正在尝试学习反射，并且已经看到了一些使用 GetConstructor 的示例，我想这是我需要了解的基本功能之一，以便能够开始使用反射。我认为我了解代码的作用以及我将如何使用它。

来自 msdn 的代码示例

[http://msdn.microsoft.com/en-us/library/h93ya84h.aspx](http://msdn.microsoft.com/en-us/library/h93ya84h.aspx)

```
types[0] = typeof(int);
// Get the constructor that takes an integer as a parameter.
ConstructorInfo constructorInfoObj = myType.GetConstructor(types); 
```

我对代码的唯一问题是我不明白为什么我需要创建一个虚拟类型数组才能使用 GetConstructor 方法（“方法是以这种方式构造的”除外）。在我看来，逻辑参数将是一个整数，其中包含我试图通过反射获得的构造函数的索引。如果存在原因，有人可以解释为什么将类型数组用作参数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:01:02.840

通过签名搜索构造函数，即通过参数类型的有序列表。这就是为什么你需要传递一个构造函数参数类型的数组。在我看来，这是非常合乎逻辑的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T17:01:59.570

它需要一个带有特定签名的`Type[]`搜索。`constructor`

`array represent the order of Parameter`接受的类型`Constructor`

根据 MSDN 上给出的示例

```
public class MyClass1
  {
      public MyClass1(){}
      public MyClass1(int i){}
  } 
```

如果你通过了类似的东西

```
Type[] types = new Type[1];
types[0] = typeof (long);

ConstructorInfo constructorInfo = typeof (MyClass1).GetConstructor(types); 
```

`constructorInfo`本来是`null`，因为不`constructor`存在以`long`作为论据的存在

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T17:01:33.023

因为构造函数可以有零个或多个参数。类型列表告诉反射要获取*哪个*构造函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T17:04:28.947

> [..] 我不明白为什么我需要创建一个虚拟类型数组才能使用 GetConstructor 方法（“方法是以这种方式构造的”除外）

通常，反射可以解决诸如“从已知具有构造函数的类型创建对象，该构造函数接受一个 int，然后是 string，然后是 double”。考虑到这一点，提供一组参数类型作为输入是有意义的。由于您正在从可能有多个类型的类型中寻找*单个*构造函数，您还希望如何消除歧义？

> 在我看来，逻辑 in 参数将是一个整数，其中包含我试图通过反射获得的构造函数的索引。

您希望该指数代表什么？不保证反射 API 以与在源编程语言中声明的顺序相同的顺序对成员进行排序。无论如何，看起来您想要一个可以枚举/索引的构造函数数组。[`Type.GetConstructors`](http://msdn.microsoft.com/en-us/library/e687hf0d.aspx)将对此有所帮助。

# sql - 在 Fluent NHibernate 中实现父子关系

> ID：15482466
> 
> 赞同：0
> 
> 时间：2013-03-18T16:56:49.113
> 
> 标签：sql, fluent-nhibernate

我是 Fluent NHibernate 的新手。我非常关注它生成的 SQL 模型的“清洁度”。

目前我有一个基于 OpenID 的身份验证系统，每个用户都可以关联到多个 OpenID，并拥有一个个人密码。实体如下所示（简化为基本实体）：

```
public class User
    {
        public virtual long Id { get; set; }

        public virtual string EmailAddress { get; set; }

        public virtual IEnumerable<OpenId> OpenIds { get; set; }
    }

public class OpenId
    {
        public virtual Uri Uri { get; set; }

        public virtual User Owner { get; set; }
    } 
```

基本上我想从 OpenID 导航到相应`Owner`的，反之亦然，给定一个用户，获取他的关联`OpenIds`.

问题出在生成的 SQL 上。以下是映射：

```
internal class UserMapping : ClassMap<User>
{
    public UserMapping()
    {
        Id(x => x.Id);
        Map(x => x.EmailAddress);

        HasMany(x => x.OpenIds)
            .Inverse()
            .AsBag()
            .Cascade.All()
            .LazyLoad()
            .NotFound.Ignore()
            .Fetch.Join();

    }
}

internal class OpenIdMapping : ClassMap<OpenId>
{
    public OpenIdMapping()
    {
        Id(x => x.Uri);

        References(x => x.Owner)
            .Cascade.All()
            .LazyLoad();
    }
} 
```

子实体生成的SQL如下

```
create table `OpenId` (Uri VARCHAR(255) not null, Owner_id BIGINT, User_id BIGINT, primary key (Uri))
alter table `OpenId` add index (Owner_id), add constraint FKA39F7E21DE3E69E4 foreign key (Owner_id) references `User` (Id)
alter table `OpenId` add index (User_id), add constraint FKA39F7E21E052E59D foreign key (User_id) references `User` (Id) 
```

我不想要`Owner_id`和`User_id`列，因为它们是多余的

## 一般来说

如何在 Fluent NHibernate 中创建双向导航的父子关系？如何**避免**多余的外键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:19:16.997

确保关联的双方都使用相同的外键列。

```
HasMany(x => x.OpenIds)
        .KeyColumn("Owner_id")
        .Inverse()
        .AsBag()
        .Cascade.All()
        .LazyLoad()
        .NotFound.Ignore()
        .Fetch.Join() 
```

References 语句还提供了一种指定自定义列名的方法。因此，您可以使用不带 id 后缀的列名，如“所有者”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:55:11.690

重构`Owner`属性`User`仍然有效

# php - 如何在php中接收带点的URL参数

> ID：15482467
> 
> 赞同：0
> 
> 时间：2013-03-18T16:56:49.280
> 
> 标签：php

如何在 php.ini 中动态接收带点的参数。

假设我知道有一个 URL 参数`"hl"`，但是在参数名称中附加了一些动态值，例如

`"h1.u", "hl.p"`这些参数是否可以使用动态名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:02:16.957

看来这是已知的行为，并且有一些解决方法（创建一个函数来获取实际的 $_GET 参数）。

查看这个问题了解更多详情：[Get PHP to stop replace '.' $_GET 或 $_POST 数组中的字符？](https://stackoverflow.com/questions/68651/get-php-to-stop-replacing-characters-in-get-or-post-arrays)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:01:32.610

`$_GET`是一个枚举数组。

这意味着，您可以遍历整个`$_GET`数组并检查“变体”。

意味着参数 h1.u 将位于`$_GET['h1.u'];`

搜索可以像这样工作：

```
foreach($_GET as $key => $value) {
    if(strpos($key, "h1") !== false) {
        //Do stuff
    }
} 
```

该代码将遍历整个数组，并在其键中的某处查找包含“h1”的任何内容并对其进行处理。

`strpos``boolean false`如果未找到将返回，这就是为什么您需要进行类型检查而不是检查的`not 0`原因，因为 h1 很可能位于位置 0（第一个字符）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:09:34.010

```
$gets=array_keys($_GET);
foreach($item in $gets){
  $check1=explode($item, ".");
  if(count($check1) <2){
    //No appended keys recieved
  }

  else{
    $key = $check1[0];
    $apeendedPart= $check1[1];
  }

 //Do something with these two
} 
```

未经测试，可能存在小错误。如果你找到了，我会纠正它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-08T12:50:27.560

据我所知，点字符在 GET 变量中是不允许的。GET 将它们替换为“_”。如果您的变量自然不会有任何下划线，这很好：在 PHP 脚本的开头，您只需查找 'h1_' 加上整个可能字母的任何动态组合（或者，调整 Ronnie 的答案以使用 '_ ' 代替 '。'）。

我遇到了 _ 是 GET 变量名中的有效字符的情况，但我需要一种方法来指定 '.' 也。所以我使用 Javascript 来确保所有的 '.' 预先变成'__'（两个下划线），然后我在接收PHP中寻找这种模式。

# c# - 如何计算给定程序的堆栈和堆中占用的内存？

> ID：15482469
> 
> 赞同：0
> 
> 时间：2013-03-18T16:57:02.390
> 
> 标签：c#, memory-management

是否可以计算 c#.net 控制台应用程序中程序占用的堆栈内存和堆内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:59:09.727

你也可以`Memory profiler Tool` 用来检查你的记忆

链接：[http ://www.red-gate.com/products/dotnet-development/ants-memory-profiler/?utm_source=google&utm_medium=cpc&utm_content=unmet_need&utm_campaign=antsmemoryprofiler&gclid=CNCaM7ehrYCFczHtAodwR4AJQ](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/?utm_source=google&utm_medium=cpc&utm_content=unmet_need&utm_campaign=antsmemoryprofiler&gclid=CNCauM7ehrYCFczHtAodwR4AJQ)

# xml - 为什么 xml 架构说日期无效？

> ID：15482474
> 
> 赞同：0
> 
> 时间：2013-03-18T16:57:14.247
> 
> 标签：xml, xsd

我有一个架构文件，并且正在针对 xml 进行验证。但它说出生日期（日期）不是有效日期。我刚刚从架构中删除了其他标签，否则它会导致阅读时间过长。谁能发现我做错了什么？我以前没有太多使用 xml 模式的经验。

顺便说一句，我正在使用 vb.net。

我的xml如下。

```
 <?xml version="1.0" encoding="UTF-8" ?>
  <EEL>
  <CANDIDATE>
  <SURNAME>JONNY</SURNAME>
  <FORENAME>WALKER</FORENAME>
  <DOB>29/12/2005</DOB>
  <SEX>M</SEX>  
  <POSTCODE>DD12DL</POSTCODE> 
  </CANDIDATE>
  </EEL> 
```

在架构中，

```
<?xml version="1.0" encoding="UTF-8"?>
 <xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="EEL">
    <xs:complexType>
        <xs:sequence>
            <xs:element maxOccurs="unbounded" name="CANDIDATE">
                <xs:complexType>
                    <xs:sequence>
                                               <xs:element name="DOB" type="xs:date" minOccurs ="1" maxOccurs="1" />
                                            </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
</xs:element> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:00:04.377

日期需要按如下格式“YYYY-MM-DD”指定，默认

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:00:26.553

XMLSchema 需要（几乎）ISO 8601 格式的数据字符串，您没有提供：[http ://www.w3.org/TR/xmlschema-2/#date](http://www.w3.org/TR/xmlschema-2/#date)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:00:42.853

看看[这个问题](https://stackoverflow.com/questions/254753/what-is-the-correct-format-to-use-for-date-time-in-an-xml-file-net)和[这个问题](https://stackoverflow.com/questions/5039657/using-xsdate-i-want-date-in-format-yyyymmdd)。

他们声明为了与 XSD 声明兼容，Xml 文件中的日期必须以 ISO8601 格式（或与之非常相似的格式）声明。

# c# - 在标准应用程序中注入自定义代码

> ID：15482476
> 
> 赞同：1
> 
> 时间：2013-03-18T16:57:20.750
> 
> 标签：c#, ninject, unity-container

我们公司有一个标准应用程序。现在我想在应用程序中注入一些自定义程序集。

通常，如果您有一个 ninject 内核或统一容器，您可以获得如下实现：

```
IKernel kernel = new StandardKernel();
DealerService myServ = new DealerService(kernel.Get<IDealerController>()); 
```

经销商服务：

```
public partial class DealerService : ServiceBase
{
    private readonly IDealerController Controller;

    public DealerService(IDealerController controller)
    {
        Controller = controller;

        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        Process();
    }

    protected override void OnStop()
    {
    }

    public void Process()
    {
        Controller.GetDealerDetails(5);
    }
} 
```

经销商控制器接口

```
public interface IDealerController
{
    Dealer GetDealerDetails(int dealerId);
} 
```

经销商控制器的实现：

```
public class DealerController : IDealerController
{
    public Dealer GetDealerDetails(int dealerId)
    {     
        throw new NotImplementedException("This is a custom error thrown from the controller implementation");
    }
} 
```

现在问题是我不希望标准应用程序知道自定义程序集。经销商服务是一个工作流活动，因此由工作流基础动态发现。问题是注入`DealerController`的是空的......我如何`IDealerController`在没有行的情况下在我的标准应用程序中注入实现`kernel.Get<IDealerController>()`。

如果将 Ninject 与 ninject MVC 3 nuget 包一起使用，则将实现注入到 mvc 控制器的构造函数中，而无需调用`kernel.Get<IDealerController>()`.

**编辑：** 添加了作为程序集名称 Ninject.Extensions.Controllers.Module 的模块，以便通过命名约定找到模块。这在 Ninject[文档](https://github.com/ninject/ninject/wiki/Modules-and-the-Kernel)中有所描述。这适用于我的 MVC 应用程序。

```
public class ControllersModule : NinjectModule
{
    public override void Load()
    {            
        this.Bind<IDealerController>().To<DealerController>();            
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:39:30.157

如果您想将实现`IDealerController`注入.`DealerService``DealerService`

```
IKernel kernel = new StandardKernel();
kernel.Bind<IDealerController>.To<DefaultDealerController>(); //.InSingletonScope();
kernel.Bind<DealerService>().ToSelf(); //.InSingletonScope();
DealerService myServ = kernel.Get<DealerService>(); 
```

要动态加载 Ninject 配置，您可以使用[模块](https://github.com/ninject/ninject/wiki/Modules-and-the-Kernel)方法和`kernel.Load("*.dll")`方法。[如果您将有某个接口的多个实现，您还应该在条件绑定](https://github.com/ninject/ninject/wiki/Contextual-Binding)的帮助下指定应该使用哪一个。

```
kernel.Bind<IDealerController>
      .To<SpecialDealerController>()
      .When(x=> SpecialConditionIsMet()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T22:22:27.627

您可以在每个程序集中有不同的`Module`继承：`NinjectModule`

```
public class WarriorModule : NinjectModule
{
    public override void Load() 
    {
        Bind<IWeapon>().To<Sword>();
        Bind<Samurai>().ToSelf().InSingletonScope();
    }
} 
```

然后使用`Kernel`动态加载来自所有程序集的所有模块`AppDomain`：

```
kernel.Load(AppDomain.CurrentDomain.GetAssemblies()); 
```

所有示例均取自[Ninject 文档](https://github.com/ninject/ninject/wiki/Modules-and-the-Kernel)。

# c++ - 有多少种方法可以将一个数的 2 个因数分组？(C/C++)

> ID：15482478
> 
> 赞同：0
> 
> 时间：2013-03-18T16:57:26.283
> 
> 标签：c++, c, grouping, permutation, combinations

如果假设一个数 X = A1*A2*...*An，其中 A1, A2, .., An 是 X 的因数。我们可以用多少种方式排列这 N 个因数，一次包含 2 个因数？

假设 X 有 5 个因子，因为 g,h,j,k 表达式 ghjk 可以用 5 种方式计算，即 (((gh)j)k) , (g(h(jk))) , (g((hj)k) ) , ((g(hj))k) 和 ((gh)(jk))

所以输入为 ghjk

输出应该是 5

我如何在 C/C++ 中做到这一点？

给定 1 < N < 34 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:47:10.490

我认为你的意思是“X 有 5 个因素，如 g、h、j、k、i”你只为上面的 X 放了 4 个因素。似乎您正在寻找 5 个元素中的 2 个元素的组合。

这不是 S 选择 K 的简单组合，没有重复：

嗯！/k!(nk)!

其中 n 是集合中元素的数量，k 是 k 组合。

对你来说，这将是一组 5 个中的 2 个的子集：（n = 5，k = 2）

5！/ 2!*(5-2)! = 5！/ (2!* 3!) = 10

(g,h), (g,j), (g,k), (g,i)

(h,j), (h,k), (h,i)

(j,k), (j, i)

(k,i)

因此，在一组 5 个因素中，实际上有 10 个可能的 2 个因素组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:49:24.227

在不改变因子顺序的情况下，因子的乘积`n`可以用括号括起来`C(n-1)`，其中`C(k)`第`k`-th [Catalan number](http://en.wikipedia.org/wiki/Catalan_number)，

```
C(k) = 1/(k+1) * \binom(2*k, k)
     = 1/(k+1) * (2k)!/(k!)² 
```

由于`n`因子乘积的（全）括号等效于构建带有叶子的二叉树`n`，这也是带有叶子的二叉树的不同结构的数量`n`。

如果允许更改因子的顺序，则必须将其乘以因子的不同顺序的数量，这只是`n!`在没有重复因子的情况下，并且

```
n!/(a_1! * ... * a_k!) 
```

如果分别存在`k`具有多重性的不同因素`a_i`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:49:56.617

您的问题是使用[加泰罗尼亚数字](http://en.wikipedia.org/wiki/Catalan_number)：Cn 是用括号括起来的关联表达式的数量。它也是具有 n+1 个叶子的可能全二叉树的数量（全二叉树 = 一棵树，其中每个节点正好有 2 个子节点，或者是一个叶子）。

因此，可以[使用递归来生成所有组合](http://ideone.com/RauVM9)：

```
#include <iostream>
#include <string>
#include <vector>

typedef std::vector<std::string> str_vector;

// Combine u and v, and add the result to w
// u and v contains all possible combinations with respectively m and n - m letters
// So w will contain combinations with n letters
void combine(str_vector& w, const str_vector& u, const str_vector& v)
{
    for(unsigned int t = 0; t < u.size(); t++)
        for(unsigned int i = 0; i < v.size(); i++)
            w.push_back("(" + u[t] + v[i] + ")");
}

// The function resolving our problem
// It output an array containing all possible combinations
// with n letters, starting with startLetter
str_vector problem(unsigned int n, char startLetter)
{
    if(n == 1)
        // Only one combination with one letter.
        // Array with 1 string which contains only one character
        return str_vector(1,std::string(1,startLetter));
    else
    {
        str_vector w;
        // Get all combinations for n-1 letters, and add them to w
        for(unsigned int t = 1; t < n; t++)
            combine(w, problem(t, startLetter), problem(n - t, startLetter + (char)t));
        return w;
    }
}

int main()
{
    // Get all possible combinations with 4 letters
    const str_vector& r = problem(4,'a');

    // Print all solutions
    for(unsigned int t = 0; t < r.size(); t++)
        std::cout << r[t] << "\n";
} 
```

这段代码不是最快的，也不是最优化的。但是，我认为它非常具有可读性。

对于组合数，公式为：

![加泰罗尼亚语号码](../Images/880e5359e7e8bddab100016dea85134c.png)

这可以简化为：

```
 (2n)!
Cn = ---------
     n!² (n+1) 
```

计算 Cn 为您提供具有 n+1 个标识符的组合数。但是，它并没有为您提供解决方案。

# javascript - 如何在同一张地图上绘制国家和城市的地图

> ID：15482483
> 
> 赞同：3
> 
> 时间：2013-03-18T16:57:37.567
> 
> 标签：javascript, google-maps, countries

我正面临来自 Google 的 Geochart API 的特定问题。很明显，我想要地理图表国家，但也有几个城市。

这些城市有国家代码，但如果我不使用“标记”模式，它就不起作用。

而且，如果我使用“标记”模式，它将不再适用于您可以想象的国家/地区。

所以我该怎么做？顺便说一句，我还能做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T14:18:27.910

“是的，这是 Google GeoChart 中的一个限制，但是您可以使用[VectorWorkz GeoChart](http://vectorworkz.com/)，它允许您执行此操作以及更多操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:14:07.560

不可以，不能在同一个 GeoChart 中使用标记和城市。

这个问题之前在这里被问过：

[Google Geocharts：同一地图上的区域和标记？](https://stackoverflow.com/questions/11650130/google-geocharts-regions-and-markers-on-same-map)

# c# - 当我的程序不在所有打开的应用程序之上时得到按键

> ID：15482485
> 
> 赞同：0
> 
> 时间：2013-03-18T16:57:38.590
> 
> 标签：c#, winforms, keypress

就像某些字典软件一样，当您选择一个单词并按下快捷键时，将显示软件并在这种情况下翻译单词，我想在我的应用程序打开并按下一个特殊键时触发一个事件。有关确切想要做什么的更多信息：我想在按下“PageDown”之类的特殊键后获得一个数字（用户按“PageDown”然后输入他的号码，然后再次按“PageDown”）并使用该号码做一些工作。我不希望我的应用程序凌驾于所有其他应用程序之上，实际上我想默默地做这一切。示例代码将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:14:21.520

如果您只想处理 1-2 个键，那么查看 Windows [RegisterHotKey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)函数可能不是一个坏主意。但是如果你想处理更多的键，你可能会更好地使用全局键盘钩子。

如果您只对 1-2 个键感兴趣，那么您可以在[How to register a global hotkey for your application in C#](http://www.fluxbytes.com/csharp/how-to-register-a-global-hotkey-for-your-application-in-c/)中找到有关如何实现[RegisterHotKey的示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)

# java - Process.waitFor() 一个线程

> ID：15482492
> 
> 赞同：2
> 
> 时间：2013-03-18T16:58:06.737
> 
> 标签：java, multithreading, process, processbuilder, inputstreamreader

在运行外部脚本时，我想同时和分别读取该脚本的 ErrorStream 和 OutputStream ，然后进一步处理它们。因此，我`Thread`为其中一个流启动了一个。不幸的是，似乎`Process`并没有终止，而是在非线程流没有进一步输入之后返回。`waitFor``Thread`

简而言之，这就是我正在做的事情：

```
ProcessBuilder pb = new ProcessBuilder(script);  
final Process p = pb.start();  

new Thread(new Runnable() {  
  public void run() {
    BufferedReader br = new BufferedReader(new InputStreamReader(p.getErrorStream()));
    ...read lines and process them...
  }
}).start();

BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
...read lines and process them...

int exitValue = p.waitFor();
p.getOutputStream().close();
return exitValue; 
```

有没有被终止`waitFor`的可能？`Thread`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:17:45.843

这是做你想做的事情的一般代码。在这种情况下，既有输入也有输出：我`someFile`将管道输入流程并将输出管道传输到`System.out`. `Files.copy()`并且`ByteStreams.copy()`只是将一个`InputStream`连接到一个`OutputStream`. 然后我们等待命令完成。

```
final Process pr = Runtime.getRuntime().exec(cmd);

new Thread() {
    public void run() {
        try (OutputStream stdin = pr.getOutputStream()) {
            Files.copy(someFile, stdin);
        } 
        catch (IOException e) { e.printStackTrace(); }
    }
}.start();

new Thread() {
    public void run() {
        try (InputStream stdout = pr.getInputStream()) {
            ByteStreams.copy(stdout, System.out);
        } 
        catch (IOException e) { e.printStackTrace(); }  
    }
}.start();              

int exitVal = pr.waitFor();
if( exitVal == 0 )
    System.out.println("Command succeeded!");
else    
    System.out.println("Exited with error code " + exitVal); 
```

如果您在 Java 7 之前使用*try-with-resources*块运行，则使用更详细的版本：

```
final Process pr = Runtime.getRuntime().exec(cmd);

new Thread() {
    public void run() {
        OutputStream stdin = null;
        try {
            Files.copy(someFile, stdin = pr.getOutputStream());
        } 
        catch (IOException e) { e.printStackTrace(); }
        finally {
            if( stdin != null ) {
                try { stdin.close(); } 
                catch (IOException e) { e.printStackTrace(); }
            }
        }               
    }
}.start();

new Thread() {
    public void run() {
        InputStream stdout = null;
        try {
            ByteStreams.copy(stdout = pr.getInputStream(), System.out);
        } 
        catch (IOException e) { e.printStackTrace(); }
        finally {
            if( stdout != null ) {
                try { stdout.close(); } 
                catch (IOException e) { e.printStackTrace(); }
            }
        }               
    }
}.start();              

int exitVal = pr.waitFor();
if( exitVal == 0 )
    System.out.println("Command succeeded!");
else    
    System.out.println("Exited with error code " + exitVal); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:29:30.057

您可以使用`Thread.join(...)`等待 a`Thread`完成。请注意，`InterruptedException`如果当前线程在您等待的线程完成之前收到中断，则调用将引发。

# c++ - 如果不将变量与函数调用 C 中的先前值进行比较，我能否知道变量是否已更改其值？

> ID：15482496
> 
> 赞同：4
> 
> 时间：2013-03-18T16:58:13.403
> 
> 标签：c++, c

用于以下 C/C++ 代码

```
void fun(int* x)
{
    //SOMECODE;//WITHOUT SAVING PREVIOUS VALUE
    if(SOME CONDITION)
    printf("VALUE OF X IS DIFFERENT THAN PREVIOUS CALL \n");
}

int main()
{
    int a;
    a=9;
    fun(&a);
    a=12;
    fun(&a);
    return 0;
} 
```

是否有任何函数或标志值可以为我们提供有关变量是否更改的信息，如果有任何解决方案，请回复

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T17:27:57.147

如果不提供一些额外的代码来在“最后一次”调用函数期间存储参数，*则**根本*没有机会检测是否使用相同的值或其他值调用它。

 *由于 x 的*“当前”*值将仅存在于堆栈中，因此一旦您的函数调用完成，它将完全丢失。

在前**多线程**时代，只需在函数的最后一次运行期间使用静态变量来缓存 x 的值`func`就可以（几乎）解决了您的问题：

```
void fun (int x) {
    static int old_value = VALUE_INVALID;

    if(x != old_value)
       printf("VALUE OF X IS DIFFERENT THAN PREVIOUS CALL \n");

    old_value = x;
} 
```

仍然使用这种方法的唯一问题是重入 - 这意味着如果`func`在信号处理程序中调用缓存值可能会被搞砸。

如果在**多线程**应用程序中运行，您还必须在使用这种方法时提供某种锁定机制，否则您迟早会搞砸的。

无论如何，您可能会在这种情况下搞砸，因为您必须澄清*“最后”*调用函数和“执行*期间”值的*确切含义。

是线程 A 在线程 B 之前进入 func 但仍在执行的当前正确值，还是线程 B 在 B 之后进入但已经完成 func 执行的线程 B 的当前正确值？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T17:04:38.883

再次阅读您的问题，您不是在检查变量是否更改，而是在检查同一词法标识符的两个*不同*实例是否不同。

除非通过明确的比较，否则这是不可能的。

* * *

关于检测变量更改的原始答案：

在可移植的标准 C 或 C++ 中没有办法。

但是，有一些特定于环境的方法可以检测变量何时更改。您可以使用 MMU 访问控制标志（通过`mprotect`或`VirtualProtect`）在第一次写入时生成异常，并从处理程序内部设置脏标志。（几乎每个现代操作系统都使用内存映射文件来执行此操作，以确定是否需要将其写回磁盘）。或者您可以使用硬件断点来匹配对该地址的写入（调试器使用它在变量上实现断点）。

与旧值相比，这些都不会像旧值那样有效。（但与旧值相比会错过 ABA 场景）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T17:07:02.147

无法检查当前值是否与上次调用时发送的值不同。

在运行时，每次调用`fun()`都会创建一个独立的堆栈帧，其中包含自己的`x`. `fun()`无法在此堆栈帧（用于存储局部变量）内保存任何值以供以后调用。

也无法确定“变量是否在不与先前值比较的情况下更改了其值”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T18:08:33.903

检查变量是否改变的目的是什么？

如何使用包含变量和标志的结构。更改变量时设置标志并将 struct 传递给 function 。现在测试函数中的标志以检查变量是否已更改。*

# c++ - 如何在 Eigen3 中调整向量的大小

> ID：15482498
> 
> 赞同：5
> 
> 时间：2013-03-18T16:58:17.693
> 
> 标签：c++, eigen, eigen3

我将两个 Eigen3 向量包装在一个模板`LineSegment<T,dim>`类中。你可以这样使用它：

```
typedef LineSegment<double,2> LineSegment2d;
typedef LineSegment<double,3> LineSegment3d;
typedef LineSegment<int,3> LineSegment3i; 
```

它包含一个模板化的方法来更改组件的尺寸。这是修剪的定义：

```
template<typename T,int dim>
struct LineSegment
{
public:
  template<int newDim>
  LineSegment<T,newDim> to() const
  {
    Eigen::Matrix<T,newDim,1> newp1;
    Eigen::Matrix<T,newDim,1> newp2;

    // TODO initialise newp1 and newp2 from d_p1 and d_p2

    return LineSegment<T,newDim>(newp1, newp2);
  }

  // ... other members ...

protected:
  Eigen::Matrix<T,dim,1> d_p1;
  Eigen::Matrix<T,dim,1> d_p2;
} 
```

所以我的问题是，我怎样才能组成返回值，如上所示？这应该支持增加和减少维度。

我尝试使用 Eigen3 [resize(int)](http://eigen.tuxfamily.org/dox/classEigen_1_1PlainObjectBase.html#a0b8db206b78137e95dc0833952ed1ed0)方法，但如果没有看到有关混合矩阵大小的警告，就无法让它工作。

最终，这应该有效：

```
LineSegment2d ls2d;
LineSegment3d ls3d = ls2d.to<3>(); // increase dim
ls2d = ls3d.to<2>();               // decrease dim 
```

我对 C++ 模板相对较新，如果这不仅仅是一个 API 问题并且与模板有关，我将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:47:11.243

首先，`resize`如果新的元素数量与旧的元素数量不同，Eigen 的方法会重新分配内存，无论是在增长时还是在收缩时，所以在这种情况下你会丢失数据

下面的方法使用[`.head<int>()`](http://eigen.tuxfamily.org/dox/classEigen_1_1DenseBase.html#ad051b1f86e01a2ab8ab517ba100409b8)的是 Eigen3 的版本`.start<int>()`，加上一些模板编程，这样你就不必检查你是在缩小还是在增长：

```
#include <Eigen/Core>

template <bool COND, int A, int B>
struct IF
{
  enum { val = A };
};

template <int A, int B>
struct IF<false, A, B>
{
  enum { val = B };
};

template <int A, int B>
struct MIN : IF<A < B, A, B>
{
};

template <typename T,int dim,int newDim>
Eigen::Matrix<T,newDim,1> to(Eigen::Matrix<T,dim,1> p)
{
  Eigen::Matrix<int,newDim,1> newp =
    Eigen::Matrix<T,newDim,1>::Zero();

  newp.template head< MIN<dim,newDim>::val >() =
    p.template head< MIN<dim,newDim>::val >();

  return newp;
} 
```

使用它，以下程序：

```
#include <iostream>

int main()
{
  Eigen::Vector2i p_2i(1,2);
  Eigen::Vector3i p_3i(3,4,5);

  std::cout << to<int, 2, 3>(p_2i) << std::endl << std::endl;
  std::cout << to<int, 3, 2>(p_3i) << std::endl << std::endl;

} 
```

给出作为输出：

```
1
2
0

3
4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T01:14:21.307

为了完整起见，这里是*原位*解决方案，使用[@sgvd 的技术](https://stackoverflow.com/a/15484513/24874)完美地完成了这项工作：

```
template<typename T,int dim>
struct LineSegment
{
public:
  template<int newDim>
  LineSegment<T,newDim> to() const
  {
    Eigen::Matrix<T,newDim,1> newp1;
    Eigen::Matrix<T,newDim,1> newp2;

    newp1.template head< MIN<dim,newDim>::val >() = d_p1.template head< MIN<dim,newDim>::val >();
    newp2.template head< MIN<dim,newDim>::val >() = d_p2.template head< MIN<dim,newDim>::val >();

    return LineSegment<T,newDim>(newp1, newp2);
  }

  // ... other members ...

protected:
  Eigen::Matrix<T,dim,1> d_p1;
  Eigen::Matrix<T,dim,1> d_p2;

private:
  template <bool COND, int A, int B>
  struct IF
  {
    enum { val = A };
  };

  template <int A, int B>
  struct IF<false, A, B>
  {
    enum { val = B };
  };

  template <int A, int B>
  struct MIN : IF<A < B, A, B>
  {};
} 
```

以及通过的单元测试：

```
TEST (LineSegmentTests, to)
{
  EXPECT_EQ ( LineSegment3i(Vector3i(1,2,0), Vector3i(3,4,0)),
              LineSegment2i(Vector2i(1,2),   Vector2i(3,4)  ).to<3>() );

  EXPECT_EQ ( LineSegment2i(Vector2i(1,2),   Vector2i(4,5)),
              LineSegment3i(Vector3i(1,2,3), Vector3i(4,5,6)).to<2>() );

  EXPECT_EQ ( LineSegment3i(Vector3i(1,2,3), Vector3i(4,5,6)),
              LineSegment3i(Vector3i(1,2,3), Vector3i(4,5,6)).to<3>() );
} 
```

# php - 如果金额 = 字段中的数字，则显示 X 值

> ID：15482500
> 
> 赞同：0
> 
> 时间：2013-03-18T16:58:31.577
> 
> 标签：php, if-statement, conditional-statements

编写一个小的 php 计算器表格来显示输入数字金额的溢价。

不幸的是，成本缩放没有静态公式。所以我尝试了数据范围的 if/else echo 语句

```
if(
    $policyamount<="10000". print("35\.00").
    $policyamount<="15000". print("42\.00"). 
```

等等。我是否正确地接近这个，或者这是周一早上的偏执狂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:00:40.513

让我们先从正确的语法开始

```
if($policyamount<=10000)
    echo "35.00";
elseif ($policyamount<=15000)
    echo "42.00"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:01:31.287

就个人而言，我会定义一个这样的数组：

```
$prices = array(
    10000 => 35,
    15000 => 42,
    // define more price points here
); 
```

然后，显示价格：

```
$copy = $prices;
foreach($copy as $k=>$v) {
    if( $policyamount <= $k) {
        echo number_format($v,2);
        break; // end the loop
    }
} 
```

# android - 样式 Android 时间选择器

> ID：15482502
> 
> 赞同：1
> 
> 时间：2013-03-18T16:58:33.310
> 
> 标签：android, dialog, datetimepicker

我使用了 android 提供的时间选择器，我试图找到一种设置按钮样式的方法。我已经设法为其他对话框执行此操作，但由于这是由 android 提供的，所以我没有 xml 文件。

有没有办法获取 xml 文件并存储在我的应用程序中，而不是引用默认布局？

或者这是不可能的，是否必须在代码中设置样式？

谢谢您的帮助

# svn - SVN 忽略所有存储库

> ID：15482507
> 
> 赞同：0
> 
> 时间：2013-03-18T16:58:47.973
> 
> 标签：svn, ignore

是否可以为我的存储库（而不是工作副本）设置 svn:ignore （或类似的东西）？

我可以修改某种配置文件以使其正常工作吗？希望有人可以帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:42:33.713

问题`global-ignore`在于它是基于每个用户的。每个用户都必须将其添加到他们的 Subversion 配置中。

你真正需要的是一个预提交钩子。我有[一个](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)可以完全满足您的要求：禁止将特定文件类型提交到存储库中的任何位置。

这是一个 Perl 脚本，但它不需要可选参数（除非您想使用 LDAP 功能来创建用户组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:01:04.117

有颠覆配置文件：

[http://svn.gnu.org.ua/svnbook/svn.advanced.html#svn.advanced.confarea.opts.config](http://svn.gnu.org.ua/svnbook/svn.advanced.html#svn.advanced.confarea.opts.config)

您可以在哪里设置忽略。

```
# global-ignores = *.o *.lo *.la *.al .libs *.so *.so.[0-9]* *.a *.pyc *.pyo 
```

# c++ - 什么是非 POD 对象的 xvalue 和 prvalue 之间允许的使用或行为差异的示例？

> ID：15482508
> 
> 赞同：18
> 
> 时间：2013-03-18T16:58:49.310
> 
> 标签：c++, c++11, rvalue

[什么是 rvalues、lvalues、xvalues、glvalues 和 prvalues？](https://stackoverflow.com/questions/3601602/what-are-rvalues-lvalues-xvalues-glvalues-and-prvalues)很好地概述了右值/左值的分类，最近对该问题的回答之一（[https://stackoverflow.com/a/9552880/368896](https://stackoverflow.com/a/9552880/368896)）强调了纯右值“类似于”旧式右值的观点，而新的 xvalues 允许“类似左值”的行为。

但是，请考虑以下代码：

```
class X {};
X foo() { return X(); }

int main()
{
    foo() = X(); // foo() is a prvalue that successfully appears on the lhs
} 
```

在此示例中，表达式`foo()`是出现在左侧的纯右值，并接受赋值。

这让我开始思考——“xvalues”与“prvalues”不同的逻辑，因为xvalues（它们是glvalues）可以出现在左侧，似乎被这个例子打破了。这里我们有一个prvalue——它不是一个glvalue——成功地出现在lhs上并接受分配。

（注意：在 POD 的情况下，上面的示例将无法编译，因此对于 POD，xvalues 和 prvalues 之间的区别似乎是有意义的。因此，这个问题专门针对非 POD 类型。）

那么，在 xvalue 和 prvalue 之间允许的使用或行为的真正区别是什么，需要将这种区别写入标准？一个不同的例子将是一个很好的替代答案。

**附录**

Pubby的评论是正确的。prvalue 的生命周期由编译器延长，但 xvalue 的生命周期不是。

所以，这里是这个问题的答案：

考虑以下代码：

```
// ***
// Answer to question, from Pubby's comment
// ***

class X
{
public:
    X() : x(5) {}
    int x;
};

X foo() { return X(); }
X&& goo() { return std::move(X()); } // terrible coding, but makes the point

int main()
{
    foo() = X();
    X&& x1 = foo(); // prvalue - lifetime extended!  Object resides directly on stack as return value
    X&& x2 = goo(); // xvalue - lifetime not extended.  Object (possibly polymorphic) resides somewhere else.
    x1.x = 6;
    x2.x = 7; // Danger!

    std::cout << x1.x << std::endl; // Just fine
    std::cout << x2.x << std::endl; // prints garbage in VS 2012
} 
```

这证明了纯右值和 xvalue 之间的行为差​​异。在这里，我们有相同的客户端代码，除了绑定的不同（prvalue 与 xvalue）。

如示例代码所示，prvalue 的生命周期会自动延长，但 xvalue 的生命周期不会。

还揭示了其他明显的差异：对于纯右值，对象本身作为函数的返回值出现在堆栈上；相应地，因为prvalue的静态类型保证是它的动态类型（见下面的答案），延长它的生命周期是有意义的，并且可以由编译器完成。

另一方面，对于 xvalue，对象位于某个未知的任意位置，因此编译器无法轻易延长其生命周期，特别是考虑到该类型可能是多态的。

感谢你的回答。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T17:44:41.443

对于多态非 pod 类型的 xvalue 表达式，表达式的动态类型在编译时通常是未知的（因此它们上的 typeid 表达式被求值，并且虚拟函数调用通常不能被去虚拟化）。

对于纯右值，这不适用。动态类型等于静态类型。

另一个区别是`decltype(e)`xvalues 的 rvalue 引用类型和 prvalues 的非引用类型。

另一个区别是，对纯右值没有进行左值到右值的转换（它们已经是结果会产生的）。这可以通过一些相当奇怪的代码来观察

```
struct A { 
    int makeItANonPod; 
    A() = default;

  private:
    int andNonStdLayout;
    A(A const&) = default;
};

void f(...);

int main() {
  f(A()); // OK
  f((A&&)A()); // illformed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T06:46:40.973

xvalue 和 prvalue 之间的真正区别是什么？xvalue 是一种右值，它可以是 cv 限定的，**可以引用一个对象**，并且动态类型等于或不等于静态类型。

```
const int&& foo();
int&& _v=foo(); 
```

如果没有 xvalue，上述函数 foo 的返回值只能是右值。但是内置类型没有 const rvalue！因此，上面的非常量变量 _v 总是可以绑定 foo() 的返回值，即使我们希望 foo() 返回一个 const 右值。

# derby - 在没有真实表的情况下使用 Derby 解析 SQL？

> ID：15482515
> 
> 赞同：1
> 
> 时间：2013-03-18T16:59:02.990
> 
> 标签：derby, sql-parser

我是 Derby 的新手，正在尝试确定其中的 SQL 解析器是否可以与真实数据库分开使用。例如，我希望能够获取 SQL 语句中引用的表的列表。我相信这可以通过从给定的 jdbc 嵌入式驱动程序连接中获取 ContextManager 来完成，然后从查询树中获取结果集节点（参见[http://rickosborne.org/blog/2010/02/derby-svn-coldfusion -sql-解析器/](http://rickosborne.org/blog/2010/02/derby-svn-coldfusion-sql-parser/) )。

我遇到的问题是 SQL 中的表实际上并不存在于 Derby DB 中（并且 Derby 正确地检查了这一点并以 java.sql.SQLSyntaxErrorException: "Table/View 'FOO' does not exist .") 那么...有没有办法配置连接，以便在执行 prepareStatement(sql) 时不检查表的存在？（连接是使用 driver.connect("jdbc:derby:memory:dummy;create=true",props) 创建的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:10:15.127

也许您可以创建表格？由于它是一个内存数据库，因此创建表将是一项开销非常低的操作。

# javascript - 带有可变变量的 for() 循环

> ID：15482516
> 
> 赞同：0
> 
> 时间：2013-03-18T16:59:04.593
> 
> 标签：javascript, loops

HTML：

```
<a id="link1" href="#">LINK1</a>
<div id="text1" style="display: none;">text1 div</div>

<a id="link2" href="#">LINK2</a>
<div id="text2" style="display: none;">text2 div</div>

<a id="link3" href="#">LINK3</a>
<div id="text3" style="display: none;">text3 div</div> 
```

JS：

```
for (var i = 0; i <= 500; i++) {
  $('#link' + i).click(function() {
    $('#text' + i).toggle('fast');
    return false;
  });
} 
```

但它不起作用。想法是让每个#link(number) 显示适当的#text(number) 块。但此时此刻我的 phpstorm 说“i”是可变变量....提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:05:01.837

您在这里有一个[关闭问题](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)，以避免它只是`i`作为数据传递给事件处理程序。

```
for (var i = 0; i <= 500; i++) {
  $('#link' + i).click(i, function(e) {
    $('#text' + e.data).toggle('fast');
    return false;
  });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:09:22.633

我认为您可以执行以下操作：

为每个添加一个类“targetLink”：

```
<a id="link1" class="targetLink" href="#">LINK1</a> 
```

替换针对类本身的 for 循环：

```
$("a.targetLink").toggle(function() {
    $(this).next("div").slideDown(350);
}, function() {
    $(this).next("div").slideUp(350);
}); 
```

小提琴：http: [//jsfiddle.net/VinnyFonseca/yxpCA/](http://jsfiddle.net/VinnyFonseca/yxpCA/)

编辑：单击另一个项目时关闭先前打开的 div 的额外功能。

```
$("a.targetLink").toggle(function() {
    $(".open").slideUp(350);
    $(this).next("div").slideDown(350).addClass("open");
}, function() {
    $(this).next("div").slideUp(350).removeClass("open");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:11:30.843

首先编辑 href 属性以引用相应的 Dom 元素和一些类来识别锚点。

```
<a id="link1" href="#text1" class="some-class">LINK1</a>
<div id="text1" style="display: none;">text1 div</div>

<a id="link2" href="#tex2" class="some-class">LINK2</a>
<div id="text2" style="display: none;">text2 div</div>

<a id="link3" href="#tex2" class="some-class">LINK3</a>
<div id="text3" style="display: none;">text3 div</div> 
```

然后修改javascript

```
$('.some-class').click(function() {
    $( $(this).attr('href') ).toggle('fast');
}); 
```

# php - 如何在 prestashop 中设置 id_tax、rate？

> ID：15482520
> 
> 赞同：1
> 
> 时间：2013-03-18T16:59:18.713
> 
> 标签：php, prestashop

我想在 prestashop 中将付款与卡集成，但 id_tax、tax、rate 为 NULL，当我重定向到 payu 时，出现错误：'invalid account'。这是从购物车中选择产品的代码：

```
foreach ($products as $key => $product)
    {
          $PName[] = str_replace('"', '\'', $product['name']);
          $PCode[]        =  $product['id_product'];
         // $PPrice[] = $q['product_price_no_tva'] + $q['product_price_no_tva']*$q['product_markup']/100;
          $PPrice[] = number_format(Tools::convertPrice($product['price'], $currency), 2, '.', '');
          $PQTY[] = $product['quantity'];
          $PVAT[] = $product['rate']; ''
        '
     }
    var_dump($product);
    die(); 
```

* * *

```
array(52) { ["id_product_attribute"]=> string(1) "0" ["id_product"]=> string(4) "5376" ["id_customization"]=> NULL ["cart_quantity"]=> string(1) "1" ["customization_quantity"]=> NULL ["name"]=> string(28) "Liv 52 DS x 60 cp - Himalaya" ["description_short"]=> string(59) "

Mai usor de administrat ! O tableta cu putere dubla.
" ["available_now"]=> string(0) "" ["available_later"]=> string(0) "" ["id_category_default"]=> string(2) "14" ["id_supplier"]=> string(3) "213" ["id_manufacturer"]=> string(3) "201" ["on_sale"]=> string(1) "0" ["ecotax"]=> string(8) "0.000000" ["additional_shipping_cost"]=> string(4) "0.00" ["available_for_order"]=> string(1) "1" ["quantity"]=> int(1) ["price"]=> float(27.5) ["weight"]=> string(1) "0" ["width"]=> string(1) "0" ["height"]=> string(1) "0" ["depth"]=> string(1) "0" ["out_of_stock"]=> string(1) "2" ["active"]=> string(1) "1" ["date_add"]=> string(19) "2012-06-21 11:41:29" ["date_upd"]=> string(19) "2013-03-18 17:00:19" ["minimal_quantity"]=> string(1) "1" ["id_tax"]=> NULL ["tax"]=> NULL ["rate"]=> NULL ["price_attribute"]=> NULL ["quantity_attribute"]=> NULL ["ecotax_attr"]=> NULL ["link_rewrite"]=> string(29) "liv-52-ds-cpr-x-60-himalayaca" ["category"]=> string(23) "afectiuni-hepatobiliare" ["unique_id"]=> string(5) "53260" ["reference"]=> string(6) "W51645" ["supplier_reference"]=> string(0) "" ["weight_attribute"]=> NULL ["ean13"]=> string(0) "" ["upc"]=> string(0) "" ["pai_id_image"]=> NULL ["pai_legend"]=> NULL ["stock_quantity"]=> int(5) ["price_wt"]=> float(27.5) ["total_wt"]=> float(27.5) ["total"]=> float(27.5) ["id_image"]=> string(7) "5376-14" ["legend"]=> string(34) "Liv 52 DS-cpr. x 60 - Himalaya(CA)" ["reduction_applies"]=> bool(false) ["allow_oosp"]=> int(0) ["features"]=> array(0) { } } 
```

# jquery - JQuery.Validate 添加带有消息的动态规则

> ID：15482523
> 
> 赞同：25
> 
> 时间：2013-03-18T16:59:26.883
> 
> 标签：jquery, jquery-mobile, jquery-validate

我有一个使用 jquery.validate 的表单。我最初使用一组规则和自定义消息调用验证...

```
$("#formName").validate( {
  rules: {
    myExistingInput: {
      required: true
    }
  },
  messages: {
    myExistingInput: {
      required: "Enter something"
    }
  },
  ignore: null, // include hidden fields (see below)
  submitHandler: function(form) {
    // do stuff
  },
  invalidHandler: function(event, validator) {
    // do stuff (some of the fields may have been hidden by a collapsible panel
    // if there is an error on one of those fields, expand the panel so the error
    // becomes visible)
  }
}); 
```

后来，我在表单中动态添加字段，并为这些字段添加规则......

```
$("#formName").append(...);

$("#newInputName").rules("add", {
  required: true,
  messages: {
    required: "Enter something else"
  }
}); 
```

如果我然后提交表单，我会从 jquery.validate 中收到一个错误...

> 检查元素 newInputName 时发生异常，检查“消息”方法。类型错误：无法获取未定义或空引用的属性“调用”

在浏览器中调试，我可以看到错误是从“检查”函数中抛出的，并且“方法”变量设置为“消息”。

如果我从对规则的调用中删除消息（“添加”，...

```
$("#newInputName").rules("add", {
  required: true
}); 
```

它按预期工作，但显然我现在没有自定义错误消息。

我在这里看到了很多关于 SO 的例子，表明我的语法是正确的。有什么建议么？

顺便说一句：jQuery 验证插件 - v1.11.0 - 2/4/2013

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-18T17:19:26.593

正如您发布的那样，您的代码似乎可以正常工作，没有错误。

**准备好 DOM 的演示：http: [//jsfiddle.net/UZTnE/](http://jsfiddle.net/UZTnE/)**

**使用 PageInit 和 jQuery Mobile 进行演示：http: [//jsfiddle.net/xJ3E2/](http://jsfiddle.net/xJ3E2/)**

```
$(document).on("pageinit", function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            field1: {
                required: true
            }
        },
        messages: {
            field1: {
                required: "Enter something"
            }
        }
    });

    $('[name*="field"]').each(function () {
        $(this).rules('add', {
            required: true,
            messages: {
                required: "Enter something else"
            }
        });
    });

}); 
```

**HTML**：

```
<form id="myform">
    <input type="text" name="field1" />
    <input type="text" name="field2" />
    <input type="submit" />
</form> 
```

**顺便说一句**：

这个...

```
ignore: null, // include hidden fields 
```

应该...

```
ignore: [], // include hidden fields 
```

请参阅： [jQuery Validate - 启用隐藏字段验证](https://stackoverflow.com/questions/8466643/jquery-validate-enable-validation-for-hidden-fields/8565769#8565769)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-03-01T08:40:47.560

```
$(document).ready(function(){
  $("#controlId").rules("add", {
     required : true,
     messages : { required : 'field is required.' }
  });
});
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-17T10:05:25.203

作为对这个老问题的回答，我确实喜欢这样来获取规则对象中的信息。

添加规则后，您可以添加如下消息：

```
var inputRules = $('input').rules();
inputRules.messages = {required: 'your message'}; 
```

[![在此处输入图像描述](../Images/948582d927bf89f65f967f307ff70b88.png)](https://i.stack.imgur.com/2tFaA.png)

祝你好运！

# javascript - 无法使用 requirejs 扩展主干视图

> ID：15482524
> 
> 赞同：8
> 
> 时间：2013-03-18T16:59:27.240
> 
> 标签：javascript, backbone.js, requirejs, amd

我熟悉构建主干应用程序，但正在尝试将其转换为使用 requirejs，我面临的问题是当我尝试扩展父视图时，它是`undefined`

尝试将 base-view.js 扩展到 properties-view.js 时

```
 define(['backbone','underscore','jquery','views/node/base-view'],                  
   function(Backbone, _, $, NodeBaseView){
     PropertiesView = NodeBaseView.extend({

        });
     }
}); 
```

在父基础视图中实例化子视图

```
 define(['backbone','underscore','jquery','views/node/properites-view'], function(Backbone, _, $, PropertiesView){
    NodeBaseView = Backbone.View.extend({
    ..
        new PropertiesView({});
    ..
    });

}); 
```

这里的 NodeBaseView 是`undefined`在尝试为 PropertiesView 扩展它时。有什么帮助吗？

注意：我正在使用 AMD 版本的骨干网和下划线[https://github.com/amdjs](https://github.com/amdjs)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-12T13:15:29.367

让我们假设这个定义位于“views/main”中

```
define(['backbone', 'views/node/base'],                          
    function(Backbone, BaseView){
        var MainView = BaseView.extend({

        });

        return MainView;
    }
); 
```

然后作为您的孩子查看：

```
define(['backbone', 'views/node/base'],                          
    function(Backbone, BaseView) {
        var PropertiesView = BaseView.extend({

        });

        return PropertiesView;
    }
); 
```

然后在遥远的宇宙中的某个地方：

```
myView = new MainView(); 
```

使用手册中的示例：

```
define(['backbone', 'views/node/base'],                          
    function(Backbone, BaseView){
        var MainView = BaseView.extend({

        });

        return MainView;
    }
); 
```

然后

```
define(['backbone'], function (Backbone) {                  
  var BaseView;

  require(['views/node/base'], function(b){
      BaseView = b;
  });

  var PropertiesView = BaseView.extend({

  });

  return PropertiesView;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T17:03:11.260

这里的问题似乎是循环依赖。基础视图需要属性视图，反之亦然。这导致其中一个未定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-13T14:52:00.510

您可以动态要求 PropertiesView，这样 BaseView 就不必依赖它。

```
define(['backbone','underscore','jquery','views/node/base-view'],
   function(Backbone, _, $, NodeBaseView){
     PropertiesView = NodeBaseView.extend({

        });
     }
     return PropertiesView;
}); 
```

在这里你需要 PropertiesView

```
define(['backbone','underscore','jquery'],
    function(Backbone, _, $, PropertiesView){
        NodeBaseView = Backbone.View.extend({
        ..
            var PropertiesView = require('views/node/properites-view');
        ..
            new PropertiesView({});
        ..
        });

}); 
```

例子：

```
define(['views/node/base-view', 'views/node/properites-view'],
    function(NodeBaseView, PropertiesView){
        return {
            base: new NodeBaseView()
        }
}); 
```

# uiscrollview - 是否可以为自定义滚动视图重用 UIScrollView 滚动物理？

> ID：15482527
> 
> 赞同：0
> 
> 时间：2013-03-18T16:59:31.927
> 
> 标签：uiscrollview

我有一个带有一些复杂滚动行为的自定义视图。我希望滚动具有与 相同的物理特性`UIScrollView`，包括惯性和边缘弹跳。是否有可能以某种方式重用物理代码`UIScrollView`以节省工作量并提供一致的用户体验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:59:31.927

这有点像黑客，但可以做到。[该解决方案在WWDC 2012](https://developer.apple.com/videos/wwdc/2012/) Session #223: [Enhancing User Experience with Scroll Views](https://developer.apple.com/videos/wwdc/2012/?id=223)中有很好的解释。主要技巧是在您的内容上放置一个常规，观察委托调用`UIScrollView`报告的偏移更改并相应地调整您的自定义视图的内容。`scrollViewDidScroll:`唯一的问题是接受其他触摸输入（因为滚动视图会覆盖您的真实内容视图并吞下输入），但即使这样也很容易解决，如 WWDC 视频中所示。

# jquery - jQuery Validation 插件：如何强制使用某种电话号码格式###-###-####

> ID：15482532
> 
> 赞同：5
> 
> 时间：2013-03-18T16:59:56.917
> 
> 标签：jquery, jquery-validate

我在页面上有 jQuery 验证插件。当有人在表单字段中输入电话号码时，我希望验证器只识别某种格式：

```
###-###-#### 
```

我在 JavaScript 中看到了这一点：

```
phone_number: {
    required: true,
    number: true 
}, 
```

我可以在那里添加一些东西来指定电话号码所需的格式吗？我发现了一些关于添加[jQuery Mask 插件](http://forum.jquery.com/topic/phone-number-validation-in-jquery)的信息，但如果我可以避免它，我宁愿不增加页面重量。（另外......当然必须存在某种方法来验证某种格式。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T17:05:38.577

如果您有点灵活，[@Sparky 的建议很好，但如果您](https://stackoverflow.com/a/15482615/497356)*只*需要这种格式，您可以添加自定义规则：

```
$.validator.addMethod('customphone', function (value, element) {
    return this.optional(element) || /^\d{3}-\d{3}-\d{4}$/.test(value);
}, "Please enter a valid phone number");

$(document).ready(function () {
    $("#myform").validate({
        rules: {
            field1: 'customphone'
        }
    });
}); 
```

**示例：http:** [//jsfiddle.net/kqczf/16/](http://jsfiddle.net/kqczf/16/)

您可以轻松地将其变成自定义类规则。这样，您只需将一个类添加到您想要拥有规则的每个输入，并可能从`validate`调用中省略规则对象：

```
$(document).ready(function () {
    $("#myform").validate();
});

<input type="text" name="field1" id="field1" class="required customphone" /> 
```

**示例：http:** [//jsfiddle.net/kqczf/17/](http://jsfiddle.net/kqczf/17/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T17:03:23.123

只需使用[jQuery Validate 插件](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.js)[文件](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.js)`phoneUS`中包含的规则。[`additional-methods.js`](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.0/additional-methods.js)

**演示：http: [//jsfiddle.net/c9zy9/](http://jsfiddle.net/c9zy9/)**

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            phone_number: {
                required: true,
                phoneUS: true
            }
        }
    });

}); 
```

`additional-methods.js`或者，您可以直接提取该`phoneUS`方法，而不是包括整个文件。

**演示：http: [//jsfiddle.net/dSz5j/](http://jsfiddle.net/dSz5j/)**

```
$(document).ready(function () {

    jQuery.validator.addMethod("phoneUS", function (phone_number, element) {
        phone_number = phone_number.replace(/\s+/g, "");
        return this.optional(element) || phone_number.length > 9 && phone_number.match(/^(\+?1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
    }, "Please specify a valid phone number");

    $('#myform').validate({ // initialize the plugin
        rules: {
            phone_number: {
                required: true,
                phoneUS: true
            }
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T17:02:09.923

查看 jQuery [Masked Input Plugin](http://digitalbush.com/projects/masked-input-plugin/)。它允许您使用以下内容屏蔽输入：

```
$("#phone_number").mask("999-999-9999"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-20T09:38:41.827

你应该试试这个，它可以根据你的要求运作良好

```
jQuery.validator.setDefaults({
  debug: true,
  success: "valid"
});
$( "#myform" ).validate({
  rules: {
    field: {
      required: true,
      phoneUS: true
    }
  }
}); 
```

# java - 为什么 Javassist ProxyFactory 的 create 方法没有根据 args 参数调用正确的构造函数？

> ID：15482534
> 
> 赞同：0
> 
> 时间：2013-03-18T17:00:00.587
> 
> 标签：java, javassist

考虑以下类声明：

```
class A{
    private String x;
    public A(String x) {
            this.x = x;
    }
} 
```

当我尝试使用 javassist 使用以下代码为 A 类创建代理时：

```
ProxyFactory factory = new ProxyFactory();
factory.setSuperclass(A.class);
MethodHandler mh = new MethodHandler() {...};
A a = (A) factory.create(new Class<?>[0], new String(){"hello"}, mh); 
```

然后我得到了`java.lang.RuntimeException: java.lang.NoSuchMethodException: app.test.A_$$_javassist_0.<init>()`

为什么 javassist 不根据传递给 create 方法的第二个参数的参数类型使用正确的构造函数实例化类 A？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-15T18:07:09.360

通过传递`new Class<?>[0]`，您是在告诉工厂调用无参数构造函数。尝试：

```
factory.create(new Class<?>[] { String.class }, new String[]{ "hello" }, mh); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T17:00:48.603

您可以将最后一条语句替换为：

```
Class proxyKlass = factory.createClass();
Constructor<T> ctor = proxyKlass.getConstructor(String.class);
T res = ctor.newInstance(new String(){"hello"});
((Proxy) res).setHandler(handler); 
```

# matlab - MATLAB - 使用邻接矩阵和坐标计算图形/网络中点之间距离的有效方法

> ID：15482539
> 
> 赞同：1
> 
> 时间：2013-03-18T17:00:17.320
> 
> 标签：matlab, matrix, sparse-matrix, matrix-multiplication, euclidean-distance

我在二维坐标空间中有网络表示。我有一个邻接矩阵`Adj`（它是稀疏的）和一个`coordinate`矩阵，其中包含绘制的图中所有点/节点/顶点的 x,y 值。

我想尽可能有效地计算这些点之间的距离。我想避免循环遍历矩阵中的条目并一一计算成对距离。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T20:30:47.150

```
[n, d] = size(coordinate);
assert(d == 2);
resi = sparse(Adj * diag(1:n));
resj = sparse(diag(1:n) * Adj);
res = sparse(zeros(n));
f = find(Adj)
res(f) = sqrt((coordinate(resi(f), 1) - coordinate(resj(f), 1)) .^ 2 + (coordinate(resi(f), 2) - coordinate(resj(f), 2)) .^ 2); 
```

编辑：糟糕，修复了一个错误

澄清：我假设你的意思是坐标矩阵[http://www.passagesoftware.net/webhelp/Coordinate_Matrix.htm](http://www.passagesoftware.net/webhelp/Coordinate_Matrix.htm)

编辑 2：我实际上不确定 Adj 是否是一个逻辑矩阵（或者你是否可以有一个稀疏的逻辑矩阵）。我修复了它以避开潜在的陷阱

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:08:24.093

如果您的图是稀疏的，那么您应该考虑使用[邻接列表](http://en.wikipedia.org/wiki/Adjacency_list)。

遍历邻接列表将允许您在时间对的数量上获得所有连接点对，而不是遍历邻接矩阵中的空条目。

# unity3d - 在 Unity 中使用光线投射修改 AI 脚本

> ID：15482543
> 
> 赞同：0
> 
> 时间：2013-03-18T17:00:28.003
> 
> 标签：unity3d, unityscript, raycasting

所以我设法修改了一些我为光线投射找到的代码，以便我的敌人向我的第一人称相机的坐标移动。但是，我需要改变光线投射在场景中的障碍物周围移动敌人的方式。我对`myTransform`//变量感到有些困惑`transform`。`target`

所以这是我的代码；

```
var speed : float = 10.0;
private var dir : Vector3;
private var dirFull : Vector3;
var target : Transform;
var rotationSpeed = 3;

var myTransform : Transform;

function Awake()
{
  myTransform = transform;
}

function Start()
{
  target = GameObject.FindGameObjectWithTag("Player").transform; //Target the player
}

function FixedUpdate()
{ 
  // the directional vector to the target
  dir = (target - transform.position).normalized;
  var hit : RaycastHit;

  // more raycasts   
  var leftRay = transform.position + Vector3(-0.125, 0, 0);
  var rightRay = transform.position + Vector3(0.125, 0, 0);

  // check for forward raycast
  if (Physics.Raycast(transform.position, transform.forward, hit, 5)) /
  {
     if (hit.transform != this.transform)
     {
       Debug.DrawLine (transform.position, hit.point, Color.white);

       dir += hit.normal * 20; // 20 is force to repel by
     }
  }

  // check for leftRay raycast
  if (Physics.Raycast(leftRay, transform.forward, hit, 5)) 
  {
     if (hit.transform != this.transform)
     {
       Debug.DrawLine (leftRay, hit.point, Color.red);

       dir += hit.normal * 20; // 20 is force to repel by
     }
  }

  // check for rightRay raycast
  if (Physics.Raycast(rightRay, transform.forward, hit, 5)) 
  {
     if (hit.transform != this.transform)
     {
       Debug.DrawLine (rightRay, hit.point, Color.green);

       dir += hit.normal * 20; // 20 is force to repel by
     }
  }

   // rotation
var rot = Quaternion.LookRotation (dir);

transform.rotation = Quaternion.Slerp (transform.rotation, rot, Time.deltaTime);

//position
transform.position += transform.forward * (2 * Time.deltaTime); // 20 is speed
} 
```

我几乎可以肯定我唯一需要更改的是`dir`变量，以便它使用新的转换代码。但正如我所说，我一直对使用哪个变量感到困惑。

编辑：我的理解是我需要更改更新底部的代码，以便考虑到通过光线投射遇到障碍物时发生的旋转。这就是为什么我认为只有“dir”和“rot”需要更改，然后在位置和旋转代码中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:25:33.550

大多数`FixedUpdate()`函数用于计算您的`dir`值。但是，最后有评论说代码正在更新位置，但他们不使用计算`dir`值。我无法对此进行测试，但您似乎需要将最后一行更改为：

```
transform.position += dir * (2 * Time.deltaTime); 
```

就目前而言，这段代码忽略了敌人或玩家的任何位置：

```
transform.position += transform.forward * (2 * Time.deltaTime); // 20 is speed 
```

它只是试图“向前”移动敌人，这被定义为（在[Unity 文档](http://docs.unity3d.com/Documentation/ScriptReference/Transform-forward.html)中）为“世界空间中变换的蓝色轴”。

如果您有将敌人朝 方向旋转的代码`dir`，那么您似乎需要将敌人朝那个方向移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T19:09:11.350

我必须改变的只是代码行。

```
dir = (target - transform.position).normalized; 
```

到...

```
dir = target.position - myTransform.position; 
```

因此，当我猜到需要更改的是 dir 变量时，我是对的。

# c# - 删除字符串组合框项目 C#

> ID：15482544
> 
> 赞同：0
> 
> 时间：2013-03-18T17:00:29.617
> 
> 标签：c#, sql, sql-server

谢谢你的帮助。你们所有人（字面意思）

我检查了我正在更新条目的代码的另一部分，我使用了该代码并对其进行了修改。现在它可以工作了

**这里是**

```
string sql = "DELETE from Login WHERE UserName = '" + comboBox1.SelectedItem.ToString() + "'";

            SqlCommand cmd = conn.CreateCommand();
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = sql;

            cmd.Parameters.Add(new SqlParameter("@UserName", comboBox1.SelectedItem.ToString()));
            int rowdel = cmd.ExecuteNonQuery();
            MessageBox.Show("Done!"); 
```

这是我从通过组合框选择的数据库中删除特定行的代码。我的老师使用了相同的代码并且他的程序有效。但是它显示错误：

**" int rowInserted = cmd.ExecuteNonQuery(); "**

它说

**System.Data.dll 中出现“System.Data.SqlClient.SqlException”类型的未处理异常附加信息：“=”附近的语法不正确。**

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
        {
            string connectionString = "Server = HP-PC\\SQLExpress; Database = CProject; Trusted_Connection = True";
            SqlConnection conn = new SqlConnection();
            conn.ConnectionString = connectionString;
            conn.Open();

            string sql = "delete from [Login] where UserName = " + comboBox1.SelectedText.ToString();

            SqlCommand cmd = conn.CreateCommand();
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = sql;

            int rowInserted = cmd.ExecuteNonQuery();
            label7.Text = rowInserted.ToString();

            conn.Close();

        }

        private void AddDeleteUsers_Load(object sender, EventArgs e)
        {
            string connectionstring = "Server=HP-PC\\SQLExpress;Database=CProject;Trusted_Connection=True;";
            SqlConnection conn = new SqlConnection();
            conn.ConnectionString = connectionstring;
            conn.Open();

            SqlCommand cmd = conn.CreateCommand();
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "select UserName from Login";

            SqlDataReader reader = cmd.ExecuteReader();

            while (reader.Read())
            comboBox1.Items.Add(reader["UserName"].ToString());
            reader.Close();

            conn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:03:17.753

我给你一个提示。

错误消息在您的 SQL 代码中，在这一行中：

```
 string sql = "delete from [Login] where UserName = " + comboBox1.SelectedText.ToString(); 
```

问题是 SQL 需要单引号中的文本，例如 `'text'`...

在不提供答案的情况下（因为这是家庭作业），我认为这足以让您弄清楚吗？

**编辑“按大众需求”**

顺便说一句，不建议只从 HTML 输入（您的 ComboBox）中获取值的原因之一是它可能被恶意人员操纵并替换为 SQL 代码，这称为 SQL 注入。

为避免这种情况，建议使用参数。

一个例子是

```
 string sql = "delete from [Login] where UserName = @UserName" 
```

然后，您必须在执行命令之前将参数添加到命令中

```
command.Parameters.AddWithValue("@UserName", comboBox1.SelectedText.ToString()); 
```

这可以防止有人将您的 SQL 语句变成险恶的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T17:02:51.703

改变

```
string sql = "delete from [Login] where UserName = " + comboBox1.SelectedText.ToString(); 
```

对此

```
string sql = "delete from [Login] where UserName = '" + comboBox1.SelectedText.ToString() + "'"; 
```

您需要在文本周围加上单引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T17:02:52.597

尝试这个：

```
string sql = "delete from [Login] where UserName = '" + comboBox1.SelectedText.ToString() + "'"; 
```

最好使用`SqlParameter`避免sql注入。

```
 string sql = "delete from [Login] where UserName = @username";

        SqlCommand cmd = conn.CreateCommand();
        cmd.CommandType = CommandType.Text;
        cmd.CommandText = sql;
        cmd.Parameters.AddWithValue("@username", comboBox1.SelectedText.ToString());

        int rowInserted = cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T17:03:04.397

```
string sql = "delete from [Login] where UserName = '" + comboBox1.SelectedText.ToString()+ "'"; 
```

更好，不是吗？

顺便提一下Sql注入...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T17:12:24.803

为了防止 SQL 注入攻击，您应该使用参数化查询：

```
 string connectionString = "Server = HP-PC\\SQLExpress; Database = CProject; Trusted_Connection = True";
    using (SqlConnection conn = new SqlConnection(connectionString))
    {
        conn.Open();
        string sql = "delete from [Login] where UserName = @UserName;";

        using (SqlCommand cmd = new SqlCommand(sql, conn))
        {
            SqlParameter p = new SqlParameter("UserName", comboBox1.SelectedText.ToString());
            cmd.Parameters.Add(p);
            cmd.ExecuteNonQuery();
        }
    } 
```

# ruby - Minitest 规范：多个 before/end 块

> ID：15482545
> 
> 赞同：3
> 
> 时间：2013-03-18T17:00:36.160
> 
> 标签：ruby, testing, minitest

这是我遇到的情况的一个最小的通用示例：

**测试/mytest.rb**

```
describe "What I want to test" do
  include TestUtils

  temporary_change_value(settings, :tmp_setting, value)

  describe "test1 blablabla" do
    # ...
  end

  describe "test2 blablabla" do
    # ...
  end
end 
```

**测试/支持/test_utils.rb**

```
module TestUtils

  def self.included(base)
    base.class_eval do
      extend ClassMethods

      before do
        MyMainClass.interface = TestInterface.new
        MyMainClass.handler.display.clear
      end

      after do
        MyMainClass.handler.display.clear
      end
    end
  end

  module ClassMethods

    def temporary_change_value(item, key, value)
      old_value = nil

      before do
        old_value = item[key]
        item[key] = value
      end

      after do
        item[key] = old_value
      end
    end

  end
end 
```

该`TestUtils`模块包含在每个测试文件中，因此始终执行公共`before`和`end`任务，但在这种情况下，我还需要将该方法`temporary_change_value`用作该文件中所有测试的前块。这不起作用，似乎只有一个`before`/`end`块被执行（特别是设置的那个`MyMainClass.interface`）

*我尝试过的事情*

我试图改变`before`/`end`块的顺序，就像这样。

```
describe "What I want to test" do
  extend TestUtils::ClassMethods

  temporary_change_value(settings, :tmp_setting, value)

  include TestUtils

  describe "test1 blablabla" do
    # ...
  end

  describe "test2 blablabla" do
    # ...
  end
end 
```

还是行不通。现在`settings`值没有改变，所以它似乎是第二个`before`/`end`块，包括唯一一个被执行的。

问题：我怎样才能做到这一点并且仍然保持干燥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:15:15.763

从 MiniTest 3.3 开始，before/end 只是方法，而不是钩子，所以当您调用 before do ... end 时，您将覆盖以前的 before 方法。您可以使用的是`MiniTest::TestCase.add_setup_hook`（[http://bfts.rubyforge.org/minitest/MiniTest/Unit/TestCase.html#method-c-add_setup_hook](http://bfts.rubyforge.org/minitest/MiniTest/Unit/TestCase.html#method-c-add_setup_hook)）。您应该能够将代码放在该特定测试用例中`temporary_change_value()`的块内，以实现您正在寻找的内容。`add_setup_hook`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T15:34:21.087

感谢 Minitest gem @zenspider 的维护者，我终于设法解决了这个问题。

**测试/my_test.rb**

```
class TestWhatIWant < TestUtils::TestCase
  temporary_change_value settings, :tmp_setting, value

  describe "test1 blablabla" do
    # ...
  end

  describe "test2 blablabla" do
    # ...
  end
end 
```

**测试/支持/test_utils.rb**

```
module TestUtils
  module ClassUtils

    def temporary_change_value item, key, value
      mod = Module.new do
        extend Minitest::Spec::DSL

        before do
          @old_value = item[key]
          item[key] = value
        end

        after do
          item[key] = @old_value
        end
      end

      include mod
    end

    class TestCase < Minitest::Spec
      extend TestUtils::ClassUtils
      include TestUtils

      def setup
        Byebug.interface = TestInterface.new
        Byebug.handler.display.clear
      end
    end

  end
end 
```

# sql - 从 VB 脚本执行时，有效的 SQL 查询失败

> ID：15482566
> 
> 赞同：1
> 
> 时间：2013-03-18T17:01:30.033
> 
> 标签：sql, vbscript, oledb

我有在 SQL 管理工作室中成功运行的 SQL 查询，但是当我从 VB 脚本运行相同的查询时，它失败并出现错误：

> 用于 SQL Server 的 Microsoft OLE DB 提供程序：关键字“ALTER”附近的语法不正确。

我的 SQL 查询是：

```
SET XACT_ABORT ON;
BEGIN TRANSACTION VersionBuild
BEGIN TRANSACTION
GO
CREATE TABLE dbo.TimeTemplate
    (
    id int NOT NULL IDENTITY (1, 1),
    startTime datetime NOT NULL,
    endTime datetime NOT NULL
    )  ON [PRIMARY]
GO
ALTER TABLE dbo.TimeTemplate ADD CONSTRAINT
    PK_TimeTemplate PRIMARY KEY CLUSTERED 
    (
    id
    ) WITH( STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]

GO
COMMIT

INSERT INTO [dbo].[TimeTemplate] ([startTime],[endTime])
VALUES ('2013-03-15 00:00:00.000','2013-03-15 23:59:00.000')

INSERT INTO [dbo].[Form] ([name] , [description], [dateCreated], [fileName])
VALUES ('TimeTemplates.aspx' , '' , getdate(), 'TimeTemplates.aspx')

;

If @@Error <> 0 BEGIN
ROLLBACK TRANSACTION VersionBuild
END ELSE 
BEGIN
UPDATE Version SET version = 74;
COMMIT TRANSACTION VersionBuild
END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:22:48.990

来自[MSDN：](http://msdn.microsoft.com/en-us/library/ms188037.aspx)

> GO 不是 Transact-SQL 语句；它是 sqlcmd 和 osql 实用程序以及 SQL Server Management Studio 代码编辑器识别的命令。

同样来自同一篇文章：

> 如果基于 ODBC 或 OLE DB API 的应用程序尝试执行 GO 命令，它们会收到语法错误。SQL Server 实用程序从不向服务器发送 GO 命令。

尝试删除您的`GO`语句并将脚本分解为多个命令。

# android - Android Activity 任务在前台

> ID：15482582
> 
> 赞同：0
> 
> 时间：2013-03-18T17:02:04.943
> 
> 标签：android, android-activity, launch, activity-stack

我有 3 个活动任务 ABC

```
<activity android:name=".LoginActivity"
    android:label="@string/app_name"
    android:noHistory="true">
    <intent-filter>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
</activity>
<activity android:name=".DashboardActivity"
              android:label="@string/app_name" >
</activity>
<activity android:name=".CreateNewPolygonActivity"
              android:label="@string/app_name"
              android:launchMode="singleTask"
              android:alwaysRetainTaskState="true"
              android:configChanges="orientation|keyboard|keyboardHidden">
</activity>
<service android:name=".services.RecordCircuitService"
             android:enabled="true" >
</service> 
```

我有一个`Service`使用 GPS 的`LocationManager`。

我的应用程序有这个逻辑：

1.  单击启动器图标 - > 开始登录活动
2.  登录后 - > 登录活动是完成（）；并启动dashboardActivity
3.  在仪表板中，我开始`CreateNewPolygonActivity`使用`Service`GPS
4.  按 HOME（这是重新组织`RecordActivity`到前台）

在我有一些错误之后工作

1.  打开`CreateNewPolygonActivity`与`onCreate`
2.  打开`DashboardActivity`

我认为我的任务组织有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:10:54.140

`launchMode="singleTask"`通过设置您的活动不会达到预期的结果。Android 不会为此创建单独的任务，因为您尚未设置`taskAffinity`. 在任何情况下，您都不想通过使用来做到这一点，`launchMode="singleTask"`因为这会导致比它解决的问题更多的问题。此启动模式仅适用于主屏幕更换！

删除`launchMode="singleTask"`` from`CreateNewPolygonActivity`

此外，您应该`android:noHistory="true"`从登录活动中删除。这也没有必要。由于您在用户启动 DashboardActivity 时已经完成了登录活动，因此当他按下 BACK 按钮时，它不会返回到登录活动（我假设这是您想要的）。

一旦你完成了这些事情，请告诉我们还有什么问题。

# azure - 是否可以在云服务部署时更改连接字符串？

> ID：15482590
> 
> 赞同：3
> 
> 时间：2013-03-18T17:02:19.937
> 
> 标签：azure, azure-web-roles

我写了一个 asp.net mvc 4 网站。为了我的公司目的，我创建了几个发布配置文件，以便在不同的天蓝色网站上发布它。每个配置文件都会更改连接字符串。

它工作得很好。

我现在正在尝试使用 azure 云服务做同样的事情（我将我的网站添加为新的云服务项目中的 Web 角色）。但是我不知道如何在部署时根据我的云服务项目发布配置文件更改我的 Web 角色的连接字符串。

有没有办法做这样的事情？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:35:33.287

您可以将连接字符串存储在角色的 ServiceConfiguration 文件`.cscfg`中，然后在代码中使用以下内容来检索设置：

```
string connectionString = RoleEnvironment.GetConfigurationSettingValue("myConnectionString"); 
```

部署后，您可以通过管理门户修改 ServiceConfiguration 中的值。

# visual-studio - 在 Visualstudio 中运行存储在网络驱动器上的 Webapp

> ID：15482592
> 
> 赞同：0
> 
> 时间：2013-03-18T17:02:23.773
> 
> 标签：visual-studio, networking, web-applications, virtualbox, drive

我要疯了！我希望你能给我一个建议。

在 Virtualbox 中，我运行的是 Windows Server 2008 R2。在这台机器上，我试图调试 Visualstudio 2010 中的 web 应用程序。webbapplication 存储在网络驱动器上。那么网络驱动器确实是我硬盘的一个分区。由于共享文件夹，虚拟机将其识别为网络驱动器，但我认为我与实际问题无关。

当我尝试启动应用程序时，会出现如下错误：

> “/”应用程序中的服务器错误。
> 
> 配置错误
> 
> 说明：处理服务此请求所需的配置文件期间发生错误。请查看下面的具体错误详细信息并适当地修改您的配置文件。
> 
> 解析器错误消息：加载配置文件时出错：无法开始监视对“E:\Testing\In Work\5.1 SP1\SitefinityWebApp”的更改。
> 
> 源错误：
> 
> [没有相关的源代码行]
> 
> 源文件：E:\Testing\In Work\5.1 SP1\SitefinityWebApp\web.config 行：0
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.18034

我已经尝试使用以下方法通过 caspol 获得对应用程序的完全信任：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\CasPol.exe -m -ag 1 -url "file:////\\VBOXSVR\d_drive\Testing\In Work\5.1 SP1\SitefinityWebApp*" FullTrust -exclusive on 
```

或这个

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\CasPol.exe -machine -addgroup All_Code -url "E:\Testing\In Work\*" FullTrust 
```

但没有任何帮助！

有人有解决办法吗？

ps 如果我在虚拟硬盘上运行相同的项目，它工作正常！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:58:32.347

Windows 似乎无法像本地驱动器一样监视网络驱动器的文件更改，因此实际上将源代码放在哪里很重要，这样您的 WebApp 可以在更改时自动重新加载它——[这里](https://stackoverflow.com/a/911507/2148786)给出了一个可能但可能已经过时的解决方案。

# cakephp - CakePHP：使用 APC 进行缓存仍然会创建缓存文件，没有性能优势

> ID：15482594
> 
> 赞同：4
> 
> 时间：2013-03-18T17:02:26.547
> 
> 标签：cakephp, caching, apc

我的问题：

我正在做 Apache Benchmark 测试，看看 CakePHP APC 引擎是否工作。但是，如果我将 Cake 的缓存配置设置为使用 APC 引擎，带有序列化缓存数据的缓存文件仍在 tmp 文件夹中创建，这让我认为正在使用文件缓存。

我也没有获得任何性能优势：使用 APC 和文件引擎，测试结果约为 4 秒。如果我在控制器中硬编码普通的 apc_add() 和 apc_fetch 函数，测试结果会更好：~3.5 秒。

所以 APC 正在工作，但 Cake 不知何故不能使用它。

我的设置：

引导程序.php：

```
/*Cache::config('default', array(
    'engine' => 'File', 
    'duration'=> '+999 days',
    'prefix' => 'file_',
));*/
Cache::config('default', array(
    'engine' => 'Apc',
    'duration'=> '+999 days',
    'prefix' => 'apc_',
)); 
```

控制器：

```
$catalogsLatest = Cache::read('catalogsLatest');
if(!$catalogsLatest){
$catalogsLatest = $this->Catalog->getCatalogs('latest', 5, array('Upload'));
Cache::write('catalogsLatest', $catalogsLatest);
} 
```

php.ini：

```
[APC]
apc.enabled = 1
apc.enable_cli = 1 
apc.max_file_size = 64M 
```

如果我在缓存执行之前或之后检查控制器中的 Cache::settings()，我会得到以下结果：

```
Array
(
    [engine] => Apc
    [path] => E:\wamp\www\cat\app\tmp\cache\
    [prefix] => apc_
    [lock] => 1
    [serialize] => 
    [isWindows] => 1
    [mask] => 436
    [duration] => 86313600
    [probability] => 100
    [groups] => Array
        (
        )
) 
```

我正在使用 CakePHP 2.2.4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T21:00:51.650

**是的，当然 APC 缓存会提高您的 cakephp 驱动的应用程序性能**所以让我们从我的以下说明中检查您的设置，并在按照说明进行基准测试并告诉我结果后让我知道。您可以使用 CakePHP 中的 APC 缓存引擎将整个 HTML 视图文件缓存在缓存中。Cake 的**CacheHelper**将为您完成这项工作。假设您有一个**PostsController**，并且您想要缓存与此控制器相关的所有视图文件。在这种情况下，首先您必须在控制器中定义以下代码。

```
 class PostsController extends AppController {
       public $helpers = array('Cache');
   } 
```

在您的**bootstrap.php**文件中，您必须添加**CacheDispatcher**。

```
 Configure::write('Dispatcher.filters', array(
        'CacheDispatcher'
       )
   ); 
```

现在再次在您的**PostsController**中，您必须告诉缓存文件。

```
 public $cacheAction = array(
        'view' => 36000,
        'index'  => 48000
    ); 
```

这会将视图操作缓存 10 小时，将索引操作缓存 13 小时。

让我知道您的 apache 基准测试工具测试结果。[我认为在另一个线程https://stackoverflow.com/a/18916692/1431786](https://stackoverflow.com/a/18916692/1431786)上正在讨论最相似的问题。

谢谢。

# json - 让 jqGrid 在列中显示原始 json

> ID：15482607
> 
> 赞同：1
> 
> 时间：2013-03-18T17:03:09.093
> 
> 标签：json, jqgrid

我有一个用例，我想让 jqGrid 为特定列显示一些原始 JSON。我从服务器发送了以下 JSON：

```
{"items":[
    {
        "code":"ABC123",
        "description":"",
        "custom_data":{"items":[
            {"prop1":"val1","prop2":"val2"},
            {"prop1":"val3","prop2":"val4"}
        ]}
    },
    {"code":"ABC124","description":"","custom_data":[]},
    ...,
]} 
```

和这样的 jqGrid 配置：

```
{
url:'/api/somewhere',
datatype: "json",
jsonReader : {
    root:"items",
    repeatitems: false,
    id: "code"
},
colNames:['Code',
          'Description',
          'Data',],
colModel:[
    {   
            name:'code', index:'code', width:100, hidden:false, 
        edittype:'text', 
        editable: true, 
        editrules:{required:true, edithidden:true}, 
        editoptions: {readonly:false}
    },
    {   
            name:'description', 
            index:'description', 
            width:250, 
            editable:true, 
            edittype:'text', 
            editrules:{required:true} 
        },
    {
    name:'custom_data',
    index:'custom_data', 
    width:100, 
    hidden:true, 
    sortable:false, 
    editable:true, 
    edittype:'text', 
    editrules:{required:false, edithidden:true}
    },
],
    ..., 
```

网格显示 OK，但 custom_data 列显示为 [object Object]。我需要的是它显示原始 JSON 字符串，我尝试使用 loadComplete 事件在每个行对象的 custom_data 对象上调用 JSON.stringify，但这不起作用。无论如何，我需要在 GET 之后进行一些数据操作，因为我想从 custom_data 对象中删除空值。

我的用户很乐意阅读和编辑原始 JSON，因此我还需要添加/编辑表单来接受原始 JSON，然后将其发布。

我不确定我是否只是使用错误的事件将对象转换回字符串，或者是否还有其他事情发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:59:34.530

您可以做的是为`"custom_data"`列使用自定义格式化程序

```
formatter: function (cellValue, options, rawData) {
    return cellValue.items ? JSON.stringify(cellValue.items) : "";
} 
```

我更改了列[的演示](http://www.ok-soft-gmbh.com/jqGrid/crazystick.htm) `hidden`属性以查看数据`"custom_data"``true`

![在此处输入图像描述](../Images/5cb74f3bb06d318aba2c77b5b0e20b3c.png)

此外，您可以考虑使用`userdata`而不是隐藏列来保存其他自定义数据。我建议您另外阅读[答案，该答案](https://stackoverflow.com/a/14205263/315935)不仅显示了如何使用`userdata`，还显示了如何在表单子网格中显示其他数据。

# django - 如何在 Django 中加入这两个查询？

> ID：15482613
> 
> 赞同：1
> 
> 时间：2013-03-18T17:03:14.833
> 
> 标签：django, django-queryset

我在 Django 中有这样的查询：

```
shared_file = File.objects.filter(id__in= Share.objects.filter(users_id = log_id).values_list('files', flat=True)).annotate(count=Count('share__shared_user_id'))   
file1 = [i.file_name for i in shared_file]

shared_username = [User.objects.filter(id__in= Share.objects.filter(users_id = log_id, files__file_name=k).values_list('shared_user_id', flat=True)).values_list('username') for k in file1] 
```

我想加入他们，这样我就可以遍历它并找到共享文件的用户名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:21:58.273

您可以[`select_related()`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.select_related)在一个查询中使用和获取相关对象（并避免使用查询进行列表推导）：

我假设在[您之前的问题](https://stackoverflow.com/questions/15474953/how-to-print-list-according-to-index-in-django-template)中使用模型定义：

```
class Share(models.Model):
    users = models.ForeignKey(User)
    files = models.ForeignKey(File)
    shared_user_id = models.IntegerField()
    shared_date = models.TextField() 
```

您可以使用以下方法一次性获取与用户和文件的共享：

```
shares = Share.objects.select_related('users', 'files').filter(users_id = log_id).all()

for share in shares:
    share             # Share model
    share.users       # User model
    share.files       # File model 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:22:11.843

[使用来自 STL http://docs.python.org/2/library/itertools.html#itertools.chain](http://docs.python.org/2/library/itertools.html#itertools.chain)的 itertools 链

```
chain(file1, shared_username) 
```

# java - Neo4J 作业执行时间

> ID：15482616
> 
> 赞同：0
> 
> 时间：2013-03-18T17:03:23.177
> 
> 标签：java, graph, time, neo4j, execution

我正在尝试记录 Neo4J 算法的执行。我运行一个算法 10 次，但是第一次运行总是比其余的执行时间长得多。例如：

```
elapsed time = | 86345.0 | 3417.0 | 3416.0 | 4228.0 | 3369.0 | 3323.0 | 3338.0 | 3370.0 | 3775.0 | 3370.0 //ms 
```

为什么会这样？Neo4J 是否足够聪明，可以将已访问（从数据库读取）的顶点存储在内存中，因此从第二次执行开始，它从内存而不是数据库中读取？我的数据集足够小，可以放入内存（还剩下很多空间）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:11:20.443

你的假设是正确的。Neo4j 在多个级别上使用缓存：

1.  映射内存缓存
2.  对象缓存

第一次运行在冷缓存上运行，因此必须从 I/O 子系统读取所有数据。任何后续访问都将受益于缓存。

有关更深入的解释，请参见[http://docs.neo4j.org/chunked/stable/configuration-caches.html](http://docs.neo4j.org/chunked/stable/configuration-caches.html)。

# actionscript-3 - 查找沿路径 AS3 的所有点

> ID：15482618
> 
> 赞同：1
> 
> 时间：2013-03-18T17:03:31.253
> 
> 标签：actionscript-3, flash, bezier

基本上，我想将影片剪辑随机添加到贝塞尔曲线上的任何点。有没有办法找到路径上的所有点？或者也许有一种方法可以找到方程（它是一条二次曲线）？如果一切都失败了，有没有办法沿着直线找到点（不是完全水平或垂直）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:57:36.060

如果您使用钢笔工具，这将创建一个`Shape`. 您可以通过读取结果来访问此形状的路径`Shape.graphics.readGraphicsData()`

请参阅[readGraphicsData](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#readGraphicsData%28%29)的参考。

# c# - VoiceXML - 在录音中识别 DTMF

> ID：15482620
> 
> 赞同：0
> 
> 时间：2013-03-18T17:03:32.337
> 
> 标签：c#, asp.net-mvc, voicexml

我从事 IVR 工作已经有一段时间了，但我们有一个案例，我希望得到一些专业知识/反馈：

是否可以录制一条消息，用户可以按下 DTMF 音来指示我们将插入自己的声音的暂停？在这种情况下，用户会记录如下内容：“早上好，[DTMF]，请致电 [DTMF] 的办公室以核对您的帐户。”。

不确定我们是否会将生成的 WAV 文件切成小块以插入变量，或者在发送消息之前进行一些后处理。

有没有人有这样的经验？

谢谢

吉姆斯坦利黑板连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:58:26.823

在 VoiceXML 中，您将使用[*记录*元素](http://www.w3.org/TR/voicexml20/#dml2.3.6)来记录来自用户的消息。*记录*元素有一个属性调用*dtmfterm*，如果设置为 true（默认设置）将终止记录。如果此属性设置为 false，则在达到*maxtime设置或达到**finalsilence*持续时间的静音时终止录制。*将 dtmfterm*设置为 false 只会导致 DTMF 成为录音的一部分。将*dtmfterm*设置为 true 将导致录制被终止。

我创建了使用调用者创建的录音的应用程序，但从来没有像您的要求那样操纵录音的应用程序。您可以做的是将录音连接在一起。这是一个[QA，展示了如何使用 C# 连接 wav 录音](https://stackoverflow.com/questions/6777340/how-to-join-2-or-more-wav-files-together-programatically)。

您将不得不试验的是您是否可以通过使用语法来捕捉按下了哪个 DTMF 键。规范对此没有提及，但它可能在某种程度上特定于您正在使用的 VoiceXML IVR 平台。如果您知道使用了哪个 DTMF 键，则可以指示用户按 * 插入静音，按 # 终止录制。两者都将终止录音，但如果按下 *，VoiceXML 中的逻辑将再次进入录音，如果按下 #，则完全停止录音过程。然后，您将使用串联将这些录音串在一起，并在串联过程中使用预先录制无声的 wav 文件，该文件插入用户录制的片段之间。

从标签看来，您正在为 VoiceXML 应用程序使用 C# 和 MVC。[有一个名为VoiceModel](http://voicemodel.codeplex.com/)的开源项目，可以更轻松地使用 ASP.NET MVC 4 开发 VoiceXML 应用程序。您可以在此处[了解它如何处理此环境中的录音](http://kevin-junghans.blogspot.com/?q=record)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:26:30.280

如果你想插入一个暂停并想留在 UI 标签内，到目前为止我在 IVR 中做了多少工作，我们可以留在 UI 内的唯一 dtmf 是，我们会在按下 '*' 时`*`返回一个"，`grammar "REPEAT`在 REPEAT 的 UI 条件标签中，您将添加静音（暂停）wav 文件。

记录部分，我们使用`osdmtype = record`它映射到一个 xslt，它有助于记录和识别客户的回答是/否。
但尽管如此，我对确切的要求有点困惑，需要更多细节。
抱歉无法添加评论，因为没有足够的代表。
您可以给我发邮件，或者我可以在这里添加更多答案。

# javafx - javafx 1.3 列表视图

> ID：15482623
> 
> 赞同：-1
> 
> 时间：2013-03-18T17:03:39.990
> 
> 标签：javafx

我想显示数据库中的数据。javaFx 1.3 中没有 TableView，所以我使用了 ListView。但是，当我将文本框放在列表视图中时，它表现不佳。我在获取数据时遇到问题。谁能给我一个带有文本框的listview代码，它还可以获取和更新数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:23:49.847

```
var lv_dept_nm:String = "";

var lv_dept_des:String = "";

var lv_dept_name:TextBox;

var lv_dept_desc:TextBox;

var lv_dept_upBtn: Button;

var lv_dept_flag:Boolean = false;

var lv_dept_ind: Integer;

var lv_dept_len: Integer = 0;

var lv_dept_size:Integer = 0;

function removeLastChar(str: String)

{

    var string;

    if(str != "")
    {
        string = str.substring(0, str.length()-1);
    }
    else
    {
        string = str;
    }
    return string;
}

var viewDepartmentListView: ListView = ListView 

{

        items: bind [dept_choicebox_item]

        layoutInfo: LayoutInfo{height:bind lv_dept_size}
        layoutX: 170
        layoutY: 150
        width: 500
        cellFactory: function() {
            var listCell: ListCell;           

            if(dept_choicebox_item.size() > 5)
            {
                lv_dept_size = 55 * 5;
            }
            else
            {
                lv_dept_size = 55 * dept_choicebox_item.size();
            }
            listCell = ListCell {
                node : HBox {
                    width: 200
                    content: [
                         VBox {
                            spacing: 10
                            content: [
                                Label {
                                    text: bind dept_choicebox_item[listCell.index]
                                    visible: bind not listCell.empty and not lv_dept_flag or not listCell.selected or (lv_dept_ind != listCell.index)
                                }
                                lv_dept_name = TextBox
                                {
                                    promptText: bind dept_choicebox_item[listCell.index]
                                    onKeyPressed: function(ke: KeyEvent)
                                    {
                                        if(ke.code.toString() == "VK_BACK_SPACE")
                                        {
                                            lv_dept_len = lv_dept_nm.length();
                                            lv_dept_nm = removeLastChar(lv_dept_nm);
                                        }
                                    }
                                    onKeyTyped: function(e:KeyEvent)
                                    {
                                        if(lv_dept_len != 0)
                                        {
                                            lv_dept_len = 0;
                                        }
                                        else if(lv_dept_nm == "")
                                        {
                                            lv_dept_nm = e.char;
                                        }
                                        else
                                        {
                                            lv_dept_nm = '{lv_dept_nm}{e.char}';
                                        }
                                    }

                                    columns: 12
                                    visible:bind not listCell.empty and lv_dept_flag and listCell.selected and (lv_dept_ind == listCell.index)
                                }
                            ]
                        }
                         VBox {
                            spacing: 10
                            content: [
                                Label {
                                    text: bind description[listCell.index]
                                    visible: bind not listCell.empty and not lv_dept_flag or not listCell.selected or (lv_dept_ind != listCell.index)
                                }
                                lv_dept_desc = TextBox
                                {
                                    promptText: bind description[listCell.index]
                                    onKeyPressed: function(ke: KeyEvent)
                                    {
                                        if(ke.code.toString() == "VK_BACK_SPACE")
                                        {
                                            lv_dept_len = lv_dept_des.length();
                                            lv_dept_des = removeLastChar(lv_dept_des);
                                        }
                                    }
                                    onKeyTyped : function(e: KeyEvent)
                                    {
                                        if(lv_dept_len != 0)
                                        {
                                            lv_dept_len = 0;
                                        }
                                        else if(lv_dept_des == "")
                                        {
                                            lv_dept_des = e.char;
                                        }
                                        else
                                        {
                                            lv_dept_des = '{lv_dept_des}{e.char}';
                                        }
                                    }
                                    columns: 12
                                    visible:bind not listCell.empty and lv_dept_flag and listCell.selected and (lv_dept_ind == listCell.index)
                                }                                
                            ]
                        }
                        VBox{
                            spacing: 10
                            content: [
                                Button {
                                    vpos: VPos.TOP;
                                    text: "Edit"
                                    visible: bind not listCell.empty and (not lv_dept_flag or not listCell.selected or (lv_dept_ind != listCell.index))
                                    action: function() {
                                        lv_dept_ind = listCell.index;
                                        lv_dept_flag = true;
                                    }
                                }
                                lv_dept_upBtn = Button {
                                    vpos: VPos.TOP;
                                    text: "Update"
                                    visible: bind not listCell.empty and lv_dept_flag and listCell.selected and (lv_dept_ind == listCell.index)
                                    action: function() {
                                        cs = cn.prepareCall("call update_dept(?,?,?)");
                                        cs.setString(1, '{dept_choicebox_item[listCell.index]}');
                                        cs.setString(2, '{lv_dept_nm}');
                                        cs.setString(3, '{lv_dept_des}');
                                        cs.executeUpdate();
                                        dept_choicebox_item[listCell.index] = lv_dept_nm;
                                        description[listCell.index] = lv_dept_des;
                                        lv_dept_flag = false;
                                        lv_dept_nm = "";
                                        lv_dept_des = "";
                                    }
                                }
                            ]
                        }
                        VBox{
                            spacing: 10
                            content: [
                                Button {
                                    vpos: VPos.TOP;
                                    text: "Delete"
                                    visible: bind not listCell.empty and (not lv_dept_flag or not listCell.selected or (lv_dept_ind != listCell.index))
                                    action: function() {
                                        cs = cn.prepareCall("call delete_dept(?)");
                                        cs.setString(1,'{dept_choicebox_item[listCell.index]}');
                                        cs.executeUpdate();
                                        delete dept_choicebox_item[listCell.index] from dept_choicebox_item;
                                        delete description[listCell.index] from description;
                                        lv_dept_size = 55 * dept_choicebox_item.size();
                                    }
                                }
                            ]
                        }
                        ]
                        }            
            }
        }
        visible:true;
    }; 
```

# mysql - Mysql函数程序

> ID：15482625
> 
> 赞同：0
> 
> 时间：2013-03-18T17:03:42.940
> 
> 标签：mysql

嘿，伙计们，我从来没有对 mysql 感到过暴力，但这次我一直想用它做更多的事情。所以我一直在想如果有一个函数可以：返回一个记录集。好像可行！？所以这就是我所做的。唯一的问题是我有一个错误

`-->ERROR 1415 not allowed to return a result set from a function;`

:$

所以我的意思是我疯狂地认为这不是很实用，除非您想使用 mysql 将文本格式转换为 xml。鉴于我的期望似乎在 mysql 的范围内，有人可以启发我纠正这个简单的例子吗？

```
CREATE FUNCTION func01(value1 INT )
RETURNS varchar(150)
DETERMINISTIC
BEGIN
  DECLARE var_name VARCHAR(150);
  SET var_name = "";
  SELECT users.username
    FROM users
    WHERE Id = param1;
  RETURN var_name;
END; 
```

感谢您对此的帮助。请更正它我真的想要一个函数或过程的工作示例，这个参考太少了...... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:56:33.577

我做了一些改变：

```
CREATE FUNCTION func01(value1 INT )
RETURNS varchar(150)
DETERMINISTIC
BEGIN
 DECLARE var_name VARCHAR(150);
 SET var_name = "";
SELECT users.username into var_name
FROM users
WHERE Id = value1;
RETURN var_name;
END; 
```

现在它应该可以工作了。

萨卢多斯 :)

# haskell - 如何将脚本加载到 ghci？

> ID：15482632
> 
> 赞同：9
> 
> 时间：2013-03-18T17:04:02.367
> 
> 标签：haskell

我刚开始学习 Haskell，很难理解 Haskell 程序的“流程”。

例如在 Python 中，我可以编写一个脚本，将其加载到解释器并查看结果：

```
def cube(x):
    return x*x*x

print cube(1)
print cube(2)
print cube(cube(5))
# etc... 
```

在 Haskell 中，我可以这样做：

```
cube x = x*x*x
main = print (cube 5) 
```

加载它，`runhaskell`它会打印`125`.
或者我可以使用`ghci`并手动输入我想测试的所有功能

但我想要的是使用我的文本编辑器，编写几个函数，一些测试，然后让 Haskell 打印一些结果：

```
-- Compile this part
cube x = x*x*x

-- evaluate this part:
cube 1
cube 2
cube (cube 3)
--etc.. 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T17:08:51.567

很有可能！

```
$ ghci
> :l filename.hs 
```

这将加载文件，然后您可以直接使用这些功能。

```
> :r 
```

这将导致文件在您进行编辑后重新加载。无需提及该文件，它会重新加载您加载的最后一个文件。如果您`ghci filename.hs`最初这样做而不是`:l`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-18T17:06:01.773

```
cube x = x*x*x

main = do
    print $ cube 1
    print $ cube 2
    print $ cube (cube 3) 
```

```
$ ghci cube.hs
...
ghci> main 
```

请参阅[GHCI 用户指南](http://www.haskell.org/ghc/docs/latest/html/users_guide/ghci.html)。

* * *

我还强烈建议您查看[QuickCheck](http://book.realworldhaskell.org/read/testing-and-quality-assurance.html)库。

你会惊讶于它可以进行多么棒的测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T17:08:53.160

要将 Haskell 源文件加载到 GHCi 中，请使用`:load`命令

[cf 在 Haskell 文档中加载源文件](http://www.haskell.org/ghc/docs/7.6.2/html/users_guide/loading-source-files.html)

# java - Eclipse 和 HotSpot VM：它默认运行/调试客户端还是服务器？

> ID：15482633
> 
> 赞同：0
> 
> 时间：2013-03-18T17:04:04.100
> 
> 标签：java, eclipse, jvm, jvm-hotspot

注意：这不是关于服务器或客户端 Java 应用程序的问题。这是关于[HotSpot VM 的客户端和服务器版本](http://www.oracle.com/technetwork/java/hotspotfaq-138619.html#compiler_types)。

我目前使用的是 Eclipse 4.2 和 Oracle 的 Java 1.7，尽管这适用于 Java 和 Eclipse 的所有版本。

*   如果我使用 Eclipse 的**Run**按钮来执行一个 Java 类，没有额外的配置，它会运行客户端还是服务器 VM？
*   我知道我可以使用 VM 选项单独设置这些，但是如果我想更改整个项目的设置，而不必配置每个类，我可以在哪里做呢？（例如，它默认为客户端，但我想确保它运行服务器。）
*   **Debug**按钮运行的 VM是否与**Run**按钮不同？我想将调试器附加到服务器虚拟机可能更难。例如，两者都支持调试还是总是运行客户端虚拟机？

寻找这个问题的权威答案，有事实支持。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:14:45.567

> 如果我使用 Eclipse 的 Run 按钮来执行一个 Java 类，没有额外的配置，它会运行客户端还是服务器 VM？

它将使用“已安装的 JRES”配置窗格中提供的 vm 参数在工作区默认 JRE 上运行（见下文）

> 我知道我可以使用 VM 选项单独设置这些，但是如果我想更改整个项目的设置，而不必配置每个类，我可以在哪里做呢？（例如，它默认为客户端，但我想确保它运行服务器。）

转到窗口>首选项>已安装的JRES（编辑您要启动的JRE）将服务器添加到默认vm参数

这将适用于您将进行的所有启动配置（通过从 eclipe 执行 java 类）。

我认为没有办法将 JRE vm 参数绑定到特定项目的所有启动配置。

> Debug 按钮运行的 VM 是否与 Run 按钮不同？

您可以选择（通过编辑调试配置）。默认情况下，我认为它使用工作区默认 JRE

# java - 向窗体添加扩展控件 - NetBeans

> ID：15482635
> 
> 赞同：0
> 
> 时间：2013-03-18T17:04:17.003
> 
> 标签：java, swing, netbeans, extend

我是 Java 新手，所以需要一点帮助：

Java 编程我使用 NetBeans。因此，在制作表格时，我使用现有的摆动控件，只是将它们放在表格上。但是，例如，我想改进控制，因为添加一些新的动作监听器，所以好的解决方案是覆盖它。

我可以创建新类并编写：

```
 public class ExtendedControl extends Control
{
} 
```

但是，是否可以`ExtendedControl`自动添加到表单（如原始控件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:09:23.583

您将需要编写自己的 JavaBean 组件。这可以通过 Netbeans 轻松完成。完成后，您可以将 JavaBean 添加到 Beans 文件夹，或者在 Palette Manager 中的任何您希望的位置。

[这](http://docs.oracle.com/javase/tutorial/javabeans/)是手册，[这里](http://docs.oracle.com/javase/tutorial/javabeans/writing/index.html)是一个示例，向您展示如何继续。 [这些](http://netbeans.dzone.com/articles/how-create-import-a-javabean-c-0)是添加到调色板所必需的几个步骤。

# mysql - 列别名的 HAVING 子句中带有 UPPER 的列未知

> ID：15482637
> 
> 赞同：1
> 
> 时间：2013-03-18T17:04:17.827
> 
> 标签：mysql, alias, having, clause

我有一个使用 DataTables 和服务器端处理的 webapp。我有一些 SQL 查询可以任意重新组合列中的数据，所以我得到这样的查询：

```
SELECT case `column`
WHEN 'value1' then 'group1'
WHEN 'value2' then 'group1'
ELSE `column` END AS `column grouped`, SUM(`2010`)
GROUP BY `colonne grouped` 
```

现在，我添加了一些基于用户输入的过滤，我喜欢这样：

```
SELECT case `column`
WHEN 'value1' then 'group1'
WHEN 'value2' then 'group1'
ELSE `column` END AS `column grouped`, SUM(`2010`)
GROUP BY `column grouped`
HAVING `column grouped` LIKE '%test%' 
```

它仍然可以正常工作，但是当我试图让整个事情变得不敏感时，我的麻烦就来了，所以我这样做了：

```
SELECT case `column`
WHEN 'value1' then 'group1'
WHEN 'value2' then 'group1'
ELSE `column` END AS `column grouped`, SUM(`2010`)
GROUP BY `colonne grouped`
HAVING UPPER(`column grouped`) LIKE '%test%' 
```

现在我得到“#1054 - '有子句'中的未知列'列分组'”

作为一种解决方法，我做这样的事情：

```
SELECT case `column`
WHEN 'value1' then 'group1'
WHEN 'value2' then 'group1'
ELSE `column` END AS `column grouped` , SUM(`2010`)
GROUP BY `colonne grouped`
HAVING UPPER(case `column`
WHEN 'value1' then 'group1'
WHEN 'value2' then 'group1'
ELSE `column` END) LIKE '%test%' 
```

但这并不是很方便。任何人都知道为什么我不能将 UPPER 与自定义别名一起使用？

顺便说一句，我正在使用 MySQL 5.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:16:09.090

根据[文档](https://dev.mysql.com/doc/refman/5.5/en/select.html)，您不能在`HAVING`子句中使用函数：

> SQL 标准要求 HAVING 必须仅引用 GROUP BY 子句中的列或聚合函数中使用的列。但是，MySQL 支持对这种行为的扩展，并允许 HAVING 引用 SELECT 列表中的列和外部子查询中的列。

您仅限于已检索的列。我不知道背后是否有技术原因，但这就是 SQL 标准所要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:20:51.007

尝试使`UPPER`in`WHERE`子句

```
 SELECT case `column`
     WHEN 'value1' then 'group1'
     WHEN 'value2' then 'group1'
     ELSE `column` END AS `column grouped`, SUM(`2010`)
     WHERE UPPER(`column grouped`) LIKE '%test%'
     GROUP BY `colonne grouped` 
```

# c++ - 为什么有些人将 f 附加到变量的末尾？

> ID：15482638
> 
> 赞同：2
> 
> 时间：2013-03-18T17:04:17.967
> 
> 标签：c++

在我正在阅读的 OGRE3d 教程中[，](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Intermediate+Tutorial+1)程序员不断`f`在他初始化的任何变量的末尾添加，就像我决定擦除并查看它`200.00f`是否编译并且编译得很好，添加的意义何在变量的结尾？`0.00f``f``f`

编辑：所以你是说，如果我用它初始化一个变量，`200.03`它不会将它初始化为一个浮点数，但如果我用`200.03f`它来做呢？如果不是，那么 f 在哪里变得有用呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T17:07:49.713

这是一种指定必须将数字解释为“浮点数”而不是“双精度数”的方法（这是 C++ 十进制数的标准，占用了两倍的内存）。

这个讨论可能会有所帮助：

[http://www.cplusplus.com/forum/beginner/24483/](http://www.cplusplus.com/forum/beginner/24483/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T17:06:19.943

引自[http://msdn.microsoft.com/en-us/library/w9bk1wcy.aspx](http://msdn.microsoft.com/en-us/library/w9bk1wcy.aspx)

> 没有 f、F、l 或 L 后缀的浮点常量具有 double 类型。如果字母 f 或 F 是后缀，则常量的类型为 float。如果以字母 l 或 L 为后缀，则它的类型为 long double。例如：

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T17:06:45.657

`200.00f`不是变量。它不能*变化*。

它是一个编译时常量，具有`float`表示形式。`f`表示它是一个`float`.

相比之下，`200.00`将被解释为`double`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-18T17:27:22.057

C 标准规定常量浮点数是双精度数，这将操作提升为双精度数。

```
float a,b,c;
...
a = b+7.1;  this is a double precision operation
...
a = b+7.1f;  this is a single precision operation
...
c = 7.1; //double
a = b + c; //single all the way 
```

双精度需要更多的常量存储空间，加上变量操作数从单精度到双精度的转换，然后从双精度到单精度的转换以分配结果。如果您不了解浮点的工作方式、舍入等，那么所有的转换都在进行，您可能不会得到您认为会得到的结果。编译器可能会在路径中的某个点优化其中的一些行为，使其更难理解真正的问题，并且硬件中的 fpu 可能接受混合模式操作数，也隐藏了真正发生的事情。

这不仅是速度问题，而且是准确性问题。最近有一个 SO question，几乎是同样的问题，为什么这种比较只适用于一个数字而不是另一个数字。以分数 5/11 为例 0.454545....

```
float a = 0.45454545454;
...
if(a>0.4545454545) b=1;
... 
```

在我们假设的系统中，我们只能将三个数字存储到 a 中，所以 a = .455 因为我们默认使用向上舍入模式。但是我们的比较将被认为是双重的，因为我们没有把 f 放在数字的末尾。双版本是 0.454545。a 转换为双精度值，结果为 0.455000，因此：

```
if(0.455000>0.454545) b = 1; 
```

0.455 大于 0.454545，所以 b 为 1。

```
float a = 0.45454545454;
...
if(a>0.4545454545f) b=1;
... 
```

所以现在比较是单精度的，所以我们将 0.455 与 0.455 进行比较，后者并不更大，所以 b=1 不会发生。

当您编写以十进制为底的浮点常量时，计算机中的浮点数以 2 为底，并且它们并不总是像 5/11 那样在以 11 为底的情况下工作得很好，但在以 10 为底的情况下，您会得到一个无限重复的数字. 例如，十进制的 0.1 会创建二进制的重复模式。根据尾数截断的位置，舍入可以使尾数的 lsbit 向上舍入（如果您使用的浮点格式甚至有舍入，也取决于您使用的舍入模式）。哪一个本身会产生问题，具体取决于您如何使用变量，如上面的比较所示。

对于非浮点数，编译器通常会为您节省，但有时不会：

```
unsigned long long a;
...
a = ~3;
a = ~(3ULL);
... 
```

根据编译器和计算机的不同，这两个赋值可能会给你不同的结果，一个可能会给你 0x00000000FFFFFFFC，另一个可能会给你 0xFFFFFFFFFFFFFFFC。

如果你想要一些特定的东西，当你告诉编译器你想要什么时你应该很清楚，否则编译器会猜测并且并不总是做出你想要的猜测。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T17:06:14.610

这意味着该值将被解释为单精度浮点变量（类型`float`）。没有 f 后缀，它被解释为双精度浮点变量（类型`double`）。

这通常是为了通过将双精度值分配给浮点变量来关闭编译器关于可能丢失精度的警告。当您没有收到这样的警告时，您可能已经在编译器设置中关闭了警告（这很糟糕！）。

但它也可以具有微妙的句法意义。如您所知，C++ 允许具有相同名称但参数类型不同的函数。在这种情况下，f 后缀可以确定调用哪个函数。

# c# - 从 MVC 中的代码调用客户端 jquery 弹出窗口

> ID：15482640
> 
> 赞同：0
> 
> 时间：2013-03-18T17:04:24.890
> 
> 标签：c#, jquery, asp.net-mvc-3

是否可以从 mvc3 后面的代码中调用 jquery 弹出窗口。我正在通过后面的代码在页面上进行几次验证，并希望显示验证成功消息。我尝试使用 ScriptManager.RegisterStartCLient 但看起来它已被弃用。

mvc3中有这样的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T19:56:58.370

不确定背后的代码在 ASP.NET MVC 的上下文中意味着什么。但可能您应该将验证消息从using传递`Controller`给. 例如：`View``ViewBag`

```
public class HomeController : Controller
{
   public ActionResult Index()
   {
      ViewBag.Message = "Your message";
      return View();
   }
} 
```

`script`如果消息存在，然后在视图中使用剃刀渲染：

```
@if (ViewBag.Message != null) {
   <script>$('#example').some_popup_plugin("@ViewBag.Message")</script>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T21:50:01.920

我向 viewModel 添加了一个属性，当我渲染视图时，我检查了该属性并显示了 jquery 弹出窗口。

就像是 ：

```
 @if(Model.IsSUccess)
      showDialog(); 
```

# opengl - GL_MODELVIEW 和 GL_PROJECTION

> ID：15482641
> 
> 赞同：1
> 
> 时间：2013-03-18T17:04:27.157
> 
> 标签：opengl

我的代码目前看起来像这样：

```
glViewport (0, 0, this->w(), this->h());

glMatrixMode(GL_PROJECTION);

glLoadIdentity();
glFrustum(-1.0, 1.0, -1.0, 1.0, 1.5, 20.0);
//glTranslated (m_fXmovement, 0.0, m_fZmovement - 5);
//glRotated (m_fYangleView, 1.0, 0.0, 0.0);
//glRotated (m_fXangleView, 0.0, 1.0, 0.0);

///// Model View \\\\\

glMatrixMode(GL_MODELVIEW);

glTranslated (m_fXmovement, 0.0, m_fZmovement - 5 );
glRotated (m_fYangleView, 1.0, 0.0, 0.0);
glRotated (m_fXangleView, 0.0, 1.0, 0.0);

DrawWaveFrontObject (m_pDataObjectMedia);

glPushMatrix();
    glTranslated (0.0, -3.0, 0.0);  
    DrawArea();
glPopMatrix();  

DrawClickAnimation();

glLoadIdentity(); 
```

首先，我在 GL_PROJECTION 中有运动部分，一切都运行良好，直到我开始处理雾......感觉就像相机没有移动，感觉更像是一个额外的相机指向那个相机......

然后我不小心将运动部分复制到了 GL_MODELVIEW 并且雾按照我想要的方式行动......一切都很好，接受点击动画不再与该区域相关，现在动画随着我的自我移动透视图....而且我真的不明白我必须在这两个视图中的哪一个中绘制什么样的图。谁能根据我的代码给我示例或解释，或者提示我可以在我的风格中改进什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-12-15T13:42:06.650

来自[opengl.org 论坛](https://www.opengl.org/discussion_boards/showthread.php/133880-Diference-between-GL_MODELVIEW-and-GL_PROJECTION "OpenGL.org 论坛")的引用：

> 投影矩阵用于创建您的查看体积。想象现实世界中的一个场景。你并没有真正看到你周围的一切，只有你的眼睛让你看到的东西。例如，如果你是一条鱼，你会看到更广泛的事物。所以当我们说我们设置了投影矩阵时，我们的意思是我们设置了我们想要从我们创建的场景中看到的东西。我的意思是你可以在你世界的任何地方绘制物体。如果它们不在视图体积内，您将看不到任何东西。当您创建视图体积时，想象您创建了 6 个裁剪平面来定义您的视野。
> 
> 至于模型视图矩阵，它用于对您世界中的模型（对象）进行各种转换。像这样，您只需定义一次对象，然后平移或旋转或缩放它。
> 
> 您将在场景中绘制对象之前使用投影矩阵来设置视图体积。然后绘制对象并相应地更改模型视图矩阵。当然，您可以在绘制模型的过程中更改矩阵，例如，如果您想绘制场景然后绘制一些文本（使用某些方法可以在正交投影中更轻松地工作），然后改回模型视图矩阵。
> 
> 至于名称 modelview，它与建模和查看转换的二元性有关。如果将相机向后拉 5 个单位，或者将对象向前移动 5 个单位，则基本相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:50:34.777

首先，我建议您尝试放弃固定功能管道（glTranslate 等），因为它已经被弃用了 10 年。如果您有兴趣，请在[此处](http://www.arcsynthesis.org/gltut/)查找更现代的教程。

至于您的问题，您可以想象这两个矩阵的含义：投影矩阵本质上捕获了相机本身固有的属性，例如其视野的形状。

另一方面，模型视图矩阵由模型矩阵和视图矩阵两部分组成。模型部分用于从对象空间（相对于对象本身）转换到世界空间。然后，视图部分从那里转换到眼睛空间，其中相机位于原点并指向（负？）z 轴。总之，模型视图矩阵基本上说明了对象相对于相机的定位方式。

有关更多信息，[此](http://www.songho.ca/opengl/gl_transform.html)资源详细描述了 OpenGL 上下文中的图形转换。

[2017 年 1 月]**编辑**：来自第一个链接的页面这些天似乎无法访问，因此从他们的档案中还有另一个[指向相同内容的链接。](http://web.archive.org/web/20140209181347/http://www.arcsynthesis.org/gltut/)

# android - 使用 9-patch imagebutton 更大

> ID：15482643
> 
> 赞同：0
> 
> 时间：2013-03-18T17:04:34.867
> 
> 标签：android, android-layout, nine-patch

我有一个带有一些 imageButton 的屏幕，它在手机上看起来不错，但我想在平板电脑上使用它们。

所以，我尝试了 9-patch，但我不知道如何使用 button.9.png。

我为 ldpi、mdpi、hdpi 和 xhdpi 创建图像，它们都是 name.9.dpi

如何根据屏幕尺寸“告诉”应用程序调整大小？

这是我的布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center"
android:background="@drawable/background"
>

<ImageButton
    android:id="@+id/account_but"
    android:background="@null"
    android:contentDescription="@string/accountDesc"
    android:layout_marginTop="50dip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/boton_usos" />

<ImageButton
    android:id="@+id/alquilar_but"
    android:background="@null"
    android:contentDescription="@string/alquilarDesc"
    android:layout_marginTop="5dip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/boton_alquilar" />

<ImageButton
    android:id="@+id/paradas_but"
    android:background="@null"
    android:contentDescription="@string/paradasDesc"
    android:layout_marginTop="5dip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/boton_paradas" />

<ImageButton
    android:id="@+id/noticias_but"
    android:background="@null"
    android:contentDescription="@string/noticiasDesc"
    android:layout_marginTop="5dip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/boton_noticias" />

<ImageButton
    android:id="@+id/incidencia_but"
    android:background="@null"
    android:contentDescription="@string/incidenciaDesc"
    android:layout_marginTop="5dip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/boton_incidencia" />

 <ImageButton
    android:id="@+id/informacion_but"
    android:background="@null"
    android:contentDescription="@string/infoDesc"
    android:layout_marginTop="5dip"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/boton_informacion" />

<ImageButton
        android:id="@+id/banner_but"
        android:background="@null"
        android:contentDescription="@string/infoDesc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dip"
        android:src="@drawable/banner" />  

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:09:26.123

请广泛地看[这个](http://developer.android.com/guide/practices/screens_support.html)。它将解释您要对图像和不同 dpi 文件夹执行的操作。

9 补丁主要用于拉伸，因此您不需要它用于不同的密度。它们通常是非常小的图像，甚至会拉伸以占据更大视图的背景和 src。

# ffmpeg - 在视频开头显示水印

> ID：15482644
> 
> 赞同：0
> 
> 时间：2013-03-18T17:04:35.400
> 
> 标签：ffmpeg, watermark

需要在使用 ffmpeg 的视频的前 3 秒添加水印。这是我现在得到的：

```
ffmpeg -y -i '255871.mov' -qscale:v 0 -qscale:a 0 -vf '[in] transpose=1 [out];movie=watermark.png , select=lte(t\,3) [bg]; [out][bg] overlay=x=20:y=main_h-60 [out]' output.mp4 
```

它将视频向右旋转，并在前 3 秒的视频底部添加水印。问题是在整个视频中都可以看到水印。

认为选择根本不起作用。尝试了以下命令

```
ffmpeg -y -i '255871.mov' -qscale:v 0 -qscale:a 0 -vf '[in] transpose=1 [out];movie=watermark.png , select=0 [bg]; [out][bg] overlay=x=20:y=main_h-60 [out]' output.mp4 
```

水印不可见。这是正确的，并证明`select`过滤器按预期工作。据我了解，这就是 ffmpeg 的工作方式：它使最短视频的最后一帧可见。

如何在 N 秒后强制 ffmpeg 丢弃显示水印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:47:57.010

必须自己回答。[ffmpeg 邮件列表](http://ffmpeg.org/pipermail/ffmpeg-user/2013-March/014123.html)帮助我解决了这个问题。主要思想是使用 Apple Animation 编解码器（它支持透明度）将现有水印转换为视频，并使用[淡入淡出](https://ffmpeg.org/ffmpeg-filters.html#fade)滤镜淡出创建视频的最后一帧。

例子：

```
ffmpeg -loop 1 -i watermark.png -t 3 -c qtrle -vf 'fade=out:73:1:alpha=1' watermark.mov
ffmpeg -y -i '255871.mov' -qscale:v 0 -qscale:a 0 -vf '[in] transpose=1 [out];movie=watermark.mov [bg]; [out][bg] overlay=x=20:y=main_h-60 [out]' output.mp4 
```

需要淡出，因为 ffmpeg 将覆盖视频的最后一帧用于视频的其余部分。`alpha=1`此过滤器通过参数使最后一帧完全透明。其实应该是这样`fade=out:74:1:alpha=1`，但是对我没有用，不知道为什么

# c - 如何将当前日期和时间以及字符串打印到 C 文件中的一行？

> ID：15482654
> 
> 赞同：0
> 
> 时间：2013-03-18T17:05:02.640
> 
> 标签：c

我的 C 程序中有一个日志文件，每次用户执行查询时我都会尝试输入该日志文件。它可以工作，除了它将日期和时间打印到一行并将活动字符串打印到下面的行。我需要它将整个条目打印到一行。我已经尝试了一切，但不明白为什么它不起作用。我认为这与time_string有关。请问有人可以帮忙吗？代码如下所示；

```
/*
 * This function writes a log to the log file.
 */
 void write_log(char *activity) {
     FILE *lf;
     time_t current_time;
     char *time_string;

     current_time = time(NULL);
     time_string = ctime(&current_time);
     strcat(time_string, activity);
     lf = fopen("logs.txt", "a+");
     fprintf(lf, "%s\n", activity);
     fclose(lf);
 } 
```

该函数在 main 中调用，并为活动传递一个字符串文字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:08:41.027

从[man ctime](http://linux.die.net/man/3/ctime)：

> 该调用`ctime(t)`相当于`asctime(localtime(t))`. 它将日历时间转换为**“Wed Jun 30 21:49:08 1993\n”**`t`形式的以空字符结尾的字符串

 **所以一个`\n`字符包含在结果字符串中。您必须删除换行符：

```
char* nl = strrchr(time_string, '\n');
if (nl) *nl = '\0'; 
```

同样值得注意的是，来自同一个链接的参考页面：

> 返回值指向一个静态分配的字符串，随后调用任何日期和时间函数可能会覆盖该字符串。

由于所述原因*，*`strcat()`这很重要，并且由于可能的缓冲区溢出，不知道该缓冲区有多大，因此将其用作 a 中的目标是不安全的。而不是执行`strcat()`删除换行符并执行两次文件写入；一个用于`time_string`，一个用于`activity\n`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:12:55.633

返回的字符串`ctime`以换行符结尾。见`ctime(3)`。

此外，您正在尝试修改`ctime`由 C 库使用的静态缓冲区返回的字符串。这可能导致缓冲区溢出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T17:20:53.643

怎么样

```
fprintf(lf, "%.*s %s\n", strlen(time_string) - 1, time_string, activity); 
```

将`%.*s`删除 time_string 的尾随换行符，因为指定的精度是字符串长度 - 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T17:44:31.650

```
void write_log(char *activity) 
{

     FILE *lf;
     time_t current_time;
     char *time_string;
     int length = 0;
     char *line = NULL;

     current_time = time(NULL);
     time_string = ctime(&current_time);
     length = strlen(time_string) + strlen(activity) + 1;
     line = (char *)malloc(length);
     if(line){
        memset(line,'\0',length);
        strncpy(line,time_string, strlen(time_string)-1);
        strcat(line," ");
        strcat(line,activity); 
        lf = fopen("logs1.txt", "a+");
        fprintf(lf, "%s\n", line);
        fclose(lf);
        free(line);
     }
 } 
```**

# sql - 如果...开始...结束

> ID：15482655
> 
> 赞同：0
> 
> 时间：2013-03-18T17:05:05.043
> 
> 标签：sql, if-statement, create-table

我有这个查询，并且在“）”（CREATE TABLE 的结尾）和“END”附近出现不正确的语法错误。

现在，如果我删除 BEGIN 和 END 行，这可以正常工作，但我不完全确定它有什么问题。

注意：这不是成品，因为在这之后还有更多，在它之前还有更多。这只是一个更大的项目的一部分，但这些部分是相当独立的，除了该 [ARCSCON] 表的存在之外，此查询中的任何内容都不依赖于任何其他部分。

谁能告诉我我做错了什么？

```
IF  EXISTS( SELECT * FROM sys.objects 
    WHERE OBJECT_ID = OBJECT_ID(N'[dbo].[ARCSCON]'))
BEGIN

CREATE TABLE  [tempSAItems](        
            [Id] int identity(44444,1),
            [Name] nvarchar(55),
            [Type] nvarchar(50) DEFAULT 'Service Agreement',
            [Inactive] bit DEFAULT '0',
            [Purchased] bit DEFAULT '0',
            [MSDS] bit DEFAULT '0',
            [IncomeAccountID] int DEFAULT '7',
            [LaborCoverd] bit DEFAULT '0',
            [PartsCoverd] bit DEFAULT '0',
            [LifeTime] bit DEFAULT '0',
            [TravelCoverd] bit DEFAULT '0',
            [NumVisits] int, --[DURATION]
            [bLaborItem] bit DEFAULT '0',
            [bDirectCost] bit DEFAULT '0',
            [bAddToSales] bit DEFAULT '0',
            [sCostingMethod] nvarchar(50) DEFAULT 'Average Cost')
GO

INSERT INTO [tempSAItems]([Name])
SELECT DISTINCT [SCHEDTYPE]
FROM [ARCSCON]
GO  

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:12:12.517

正如@LittleBoobyTables 评论的那样，只是摆脱`Go`了中间的文字。

```
IF  EXISTS( SELECT * FROM sys.objects 
    WHERE OBJECT_ID = OBJECT_ID(N'[dbo].[ARCSCON]'))
BEGIN

CREATE TABLE  [tempSAItems](        
            [Id] int identity(44444,1),
            [Name] nvarchar(55),
            [Type] nvarchar(50) DEFAULT 'Service Agreement',
            [Inactive] bit DEFAULT '0',
            [Purchased] bit DEFAULT '0',
            [MSDS] bit DEFAULT '0',
            [IncomeAccountID] int DEFAULT '7',
            [LaborCoverd] bit DEFAULT '0',
            [PartsCoverd] bit DEFAULT '0',
            [LifeTime] bit DEFAULT '0',
            [TravelCoverd] bit DEFAULT '0',
            [NumVisits] int, --[DURATION]
            [bLaborItem] bit DEFAULT '0',
            [bDirectCost] bit DEFAULT '0',
            [bAddToSales] bit DEFAULT '0',
            [sCostingMethod] nvarchar(50) DEFAULT 'Average Cost')
--GO
^Here

INSERT INTO [tempSAItems]([Name])
SELECT DISTINCT [SCHEDTYPE]
FROM [ARCSCON]
GO  

END 
```

# macos - Mac npm 使用 ENOENT 出错

> ID：15482658
> 
> 赞同：7
> 
> 时间：2013-03-18T17:05:13.647
> 
> 标签：macos, node.js, npm, gruntjs

我最近从 Windows 转换到 Mac，目前只是想设置我的工具。

我首先使用自制软件安装了节点，这给了我错误（与我仍然存在的相同）。后来我使用自制软件删除了节点，并使用节点网站上的 pkg 进行了安装。

我可以在命令行和 npm 中访问节点。问题是当我尝试在本地项目上安装模块时，我得到如下信息：

`npm install grunt-contrib`

```
Error extracting archive { [Error: ENOENT, open '/Users/davidmckeown/dev/adt-com/node_modules/grunt-contrib/node_modules/grunt-contrib-qunit/node_modules/grunt-lib-phantomjs/node_modules/phantomjs/tmp/phantomjs-1.7.0-macosx.zip']
  errno: 34,
  code: 'ENOENT',
  path: '/Users/davidmckeown/dev/adt-com/node_modules/grunt-contrib/node_modules/grunt-contrib-qunit/node_modules/grunt-lib-phantomjs/node_modules/phantomjs/tmp/phantomjs-1.7.0-macosx.zip' } 
```

上面的另一条消息包含：

```
npm ERR! phantomjs@0.2.6 install: `node install.js`
npm ERR! `sh "-c" "node install.js"` failed with 8
npm ERR!
npm ERR! Failed at the phantomjs@0.2.6 install script.
npm ERR! This is most likely a problem with the phantomjs package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     node install.js
npm ERR! You can get their info via:
npm ERR!     npm owner ls phantomjs
npm ERR! There is likely additional logging output above.

npm ERR! System Darwin 12.2.1
npm ERR! command "node" "/usr/local/bin/npm" "install" "grunt-contrib"
npm ERR! cwd /Users/davidmckeown/dev/adt-com
npm ERR! node -v v0.10.0
npm ERR! npm -v 1.2.14
npm ERR! code ELIFECYCLE 
```

任何帮助找出导致问题的原因都会很棒。据我所知，其他模块也会发生这种情况。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-06-26T15:47:09.060

`npm cache clean`

或者如果安装在 su 下

`sudo npm cache clean`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T20:00:28.730

5 个月前 grunt qunit 包存在一个问题 - [https://github.com/gruntjs/grunt-lib-phantomjs/issues/5](https://github.com/gruntjs/grunt-lib-phantomjs/issues/5)。

尝试安装这个特定的包：

`sudo npm install grunt-contrib-qunit`

您安装的软件包是许多软件包的捆绑包。qunit 软件包版本未明确更新到此捆绑包中的最新版本，这就是清除 npm 缓存可能会解决此问题的原因。

# emacs - 如何让 Emacs 消息模式在发送时终止消息缓冲区？

> ID：15482662
> 
> 赞同：1
> 
> 时间：2013-03-18T17:05:25.860
> 
> 标签：emacs, elisp

在 Emacs 中，我`message-mode`用来撰写和发送电子邮件。当我执行`mail-send`( `C-c C-c`) 时，它会发送我的消息并掩埋缓冲区，而缓冲区仍然潜伏在后台。

如何指示 Emacs 杀死缓冲区`mail-send`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:07:35.030

用于`customize`设置`message-kill-buffer-on-exit`或`t`添加

```
(custom-set-variables '(message-kill-buffer-on-exit t)) 
```

到你的`.emacs`.

# asp.net-mvc - ClaimsAuthorizationManager 问题

> ID：15482663
> 
> 赞同：3
> 
> 时间：2013-03-18T17:05:31.913
> 
> 标签：asp.net-mvc, authorization, wif

我正在使用自定义**ClaimsAuthorizationManager**在 MVC 中进行授权，但我遇到了问题。

*   即使我只是在 CheckAccess 方法中返回“true”，所有文件/图像也会被 500 运行时错误阻止，因为：

> 异常信息：异常类型：NotSupportedException 异常消息：ID1075：如果当前主体 (HttpContext.Current.User) 不是 ClaimsPrincipal，则无法使用 ClaimsAuthorizationModule。在 System.IdentityModel.Services.ClaimsAuthorizationModule.Authorize()

我没有在应用程序的早期更改有关当前校长的任何内容...想法？我被难住了，搜索那个错误什么也没有发现......

* * *

```
<system.webServer>    
    <modules>      
      ...
      <add name="ClaimsAuthorizationModule" type="System.IdentityModel.Services.ClaimsAuthorizationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    </modules>
</system.webServer>

  <system.identityModel>
    <identityConfiguration>
      <claimsAuthorizationManager type="NamespaceFun.CustomAuthorizationManager, NamespaceFun" >
    <policy resource="http://localhost:52606/" action="GET">
    </policy>
      </claimsAuthorizationManager>
      ...
    </identityConfiguration>
   </system.identityModel>

public class CustomAuthorizationManager : ClaimsAuthorizationManager
{      
    public override bool CheckAccess(AuthorizationContext context)
    {   
        return true;            
    }       
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:39:36.913

我只是遇到了同样的问题，所以我将我的 web.config 与 WIF 书中的一个进行了比较，结果发现我`preCondition="managedHandler"`在 add 元素的末尾丢失了，而且您似乎也丢失了它。

[MSDN 示例](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsauthorizationmanager.aspx)中似乎也缺少它。

正确方法：

```
<add name="ClaimsAuthorizationModule" 
     type="System.IdentityModel.Services.ClaimsAuthorizationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" 
     preCondition="managedHandler" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T18:06:27.813

它认为我会问一个问题，然后一个小时后自己回答。但这让我困惑了好几天。直到它实际上阻止我完成其他事情，我才不得不深入研究它。

所以无论如何，我所做的很简单。此Microsoft的**ClaimsAuthorizationManager示例在提供图像时***没有*任何问题。 [http://code.msdn.microsoft.com/vstudio/Claims-Aware-MVC-523e079b](http://code.msdn.microsoft.com/vstudio/Claims-Aware-MVC-523e079b "链接")

所以我比较了两个应用程序的 Web.config 文件，发现它们“惊人地”相似。

唯一的区别是我的 Intranet 应用程序在 system.webServer 部分中有这些处理程序：

```
 <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers> 
```

我实际上需要弄清楚这些在做什么，但目前，删除它们解决了我原来的问题。

在我看来，WIF 仍然是一个巨大的“黑匣子”。当谷歌搜索错误完全没有返回时，很难采用新技术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T07:26:52.920

我实际上认为完全使用索赔授权模块是一个非常糟糕的主意。原因是该模块基于 URL - 但在 MVC 中，所有内容都与路由表或控制器/操作无关。

每当两者不同步时，您的授权策略中可能存在漏洞（加上您已经遇到的静态文件问题）。我实际上更喜欢基于属性的方法——我构建了授权属性（一个用于 MVC，一个用于 Web API）与 ASP.NET 配合得很好：

[http://leastprivilege.com/2012/10/26/using-claims-based-authorization-in-mvc-and-web-api/](http://leastprivilege.com/2012/10/26/using-claims-based-authorization-in-mvc-and-web-api/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-27T03:13:16.803

就我而言，使用自定义 ClaimsAuthorizationManager 时文件（包括 JavaScript）被阻止的原因是`runAllManagedModulesForAllRequests`模块标签中的属性：

```
<modules runAllManagedModulesForAllRequests="true"> 
```

这会导致自定义 ClaimsAuthorizationManager 处理所有请求，[即使该请求不是针对托管内容的](http://www.iis.net/configreference/system.webserver/modules)。**删除**该属性可以解决问题。

# android - 如何在android中使用位置设置这两个不同的图像？

> ID：15482667
> 
> 赞同：3
> 
> 时间：2013-03-18T17:05:40.663
> 
> 标签：android, position, imageview

我有两个不同的图像，想使用不同的视图设置它们，但稍微重叠以匹配下面的图像。我还希望能够为`OnClickListener`它们中的每一个设置不同的值。我知道使用 iOS 我可以使用`x`和`y`值设置视图位置，但我不确定如何在 Android 中执行此操作。

我该怎么做呢？

期望的结果：

![在此处输入图像描述](../Images/6efc057e32f7170270cfc2fd1b634498.png)

图一

![在此处输入图像描述](../Images/5b8a929f57fbd87616dea6a0204a34fd.png)

图二

![在此处输入图像描述](../Images/3a888295724b67d65c28d6ed24d017b3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:21:18.493

尝试将这两个图像设置为`ImageView`'s 并将它们放入`FrameLayout`. 这样您就可以根据需要设置它们，因此它们可以相互重叠。这样您就可以分别为它们设置一个`clickable`和属性：`onClick`

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/iFirstImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@drawable/sort_image_1"
    android:clickable="true"
    android:onClick="setFirstImageClick"
    android:src="@drawable/sort_image_1" />

<ImageView
    android:id="@+id/iSecondImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@drawable/sort_image_2"
    android:clickable="true"
    android:onClick="setSecondImageClick"
    android:src="@drawable/sort_image_2" /> 
```

`setFirstImageClick`并在您的活动中创建方法`setSecondImageClick`来决定每个图像点击应该做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:15:16.090

您可以随意放置第一张图片，然后在 xml 中使用第二张图片

```
android:layout_toRightOf="firstImageId" 
```

之后，您可以分别设置每个 onClick。

# jquery - ajax jquery 不工作，不进入成功

> ID：15482668
> 
> 赞同：0
> 
> 时间：2013-03-18T17:05:44.123
> 
> 标签：jquery

我有一个 html 页面试图调用下面的 ajax jquery 调用。如果我将 url 放在浏览器中，我会取回数据。第一个警报有效，显示我们 R IN。成功的警报永远不会弹出，它会转到错误警报。我的代码有什么问题吗？

```
 function GetAllStaff() {
        alert('we R IN');
    $.ajax({
     type: "GET",
        url:"http://MyServer/MyService/api/StaffSearch/GetAllStaff",

        data: "{}",
        contentType: "application/json; charset=utf-8",
        cache: false,
        dataType: "json",
        success: function(data) {

            alert('hello world');

        },
        error: function(msg) {

            alert('This is the error: ' + msg.d);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:33:10.843

这是一个跨域问题，我刚刚添加了 $.support.cors=true; 行 它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:38:46.150

只需删除 DATA 线，它应该可以工作。查找 ajax 请求问题的一个好方法是使用 FireBug。

```
$.ajax({
     type: "GET",
        url:"http://MyServer/MyService/api/StaffSearch/GetAllStaff",
        contentType: "application/json; charset=utf-8",
        cache: false,
        dataType: "json",
        success: function(data) {

            alert('hello world');
        },
        error: function(msg) {
            alert('This is the error: ' + msg.d);
        }
    }); 
```

# android - 我可以使用 Android 4.1 JellyBean 内置的 Android CRT 关机动画吗？

> ID：15482669
> 
> 赞同：0
> 
> 时间：2013-03-18T17:05:43.987
> 
> 标签：android, android-4.2-jelly-bean

我有一个应用程序，我想将 Android 4.1 内置的 Android CRT 关机动画用于我的 onPause 活动过渡动画。但是，我无法找出这个动画 xml 在 Android 源代码中的位置。我的猜测是它在某些来源中的某个地方，因为动画看起来相当复杂。这不仅仅是一个简单的缩放/翻译的事情。

这是它的样子：[http ://www.youtube.com/watch?v=_zFwpb_LDHQ](http://www.youtube.com/watch?v=_zFwpb_LDHQ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T14:03:32.350

你应该看看这个动画`mElectronBeamOnAnimator`，它可以在：

> /frameworks/base/services/java/com/android/server/power/DisplayPowerController.java

并且不要忘记设置`mElectronBeamFadesConfig`为 false ，这将使用 mode `ElectronBeam.MODE_WARM_UP`，也就是 CRT 效果。

正如 Bibek 所说，它用于`openGL`绘制这个动画而不仅仅是一个 xml 文件。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:12:32.307

据我所知，你不能。它不是 SDK 的一部分。您可能必须创建自己的。我猜，它不是 XML，而是一些本机代码或至少是 OpenGL。

# apache - 使用 htaccess 按扩展名重定向文件

> ID：15482670
> 
> 赞同：0
> 
> 时间：2013-03-18T17:05:44.910
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我有一个托管在 Windows Server 中的站点，其中包含 WP 安装和一堆自定义 ASP 页面。我必须将整个站点移动到新的 Linux 主机，并将 ASP 页面移动到 Windows Server 中的子域。

我需要一个 .htaccess 脚本来将 *.asp 文件重定向到子域，例如，[http:](http://www.domain.com/pagex.asp?id=12345) //www.domain.com/pagex.asp?id=12345到[http://windows.domain.com/pagex。 asp?id=12345](http://windows.domain.com/pagex.asp?id=12345)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:09:57.263

```
RewriteEngine On
RewriteRule ^/?(.+\.asp)$ http://windows.domain.com/$1 [L,R=301] 
```

你可以在这里测试你的规则：

[htaccess 测试仪](http://htaccess.madewithlove.be/)

[我用您的示例 url ( http://www.domain.com/pagex.asp?id=12345](http://www.domain.com/pagex.asp?id=12345) )测试了上述规则，它返回了您的示例结果 ( [http://windows.domain.com/pagex.asp? id=12345](http://windows.domain.com/pagex.asp?id=12345)）。

# bash - 输出 apt-get upgrade 到文本

> ID：15482671
> 
> 赞同：4
> 
> 时间：2013-03-18T17:06:01.183
> 
> 标签：bash, ubuntu, apt-get

我编写了一个脚本来更新 ubuntu 软件包并通过电子邮件发送给我，但是升级和服务重新启动的输出不会通过电子邮件发送或生成。我尝试从命令行运行更新并输出到文本文件，但仍然没有任何内容写入文本文件。有任何想法吗？

```
TEMP="/tmp/upgrade.txt"
MAIL_ADDR="user@example.com"
cat /dev/null > $TEMP
apt-get update && apt-get upgrade --assume-yes > $TEMP
mail -s "Upgrade for $HOSTNAME" $MAIL_ADDR < $TEMP
rm $TEMP 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T17:58:17.237

只需在 apt-get 命令中使用 '&>' 重定向即可解决此问题。

```
apt-get update &>$TEMP
apt-get upgrade --assume-yes &>> $TEMP 
```

# prolog - SWI-Prolog：“未定义的过程”错误

> ID：15482674
> 
> 赞同：0
> 
> 时间：2013-03-18T17:06:08.897
> 
> 标签：prolog

我无法解决 Learn Prolog Now 练习（[本页](http://learnprolognow.org/lpnpage.php?pagetype=html&pageid=lpn-htmlse12)的最后一个）。简而言之：有一堆格式为“byCar (place1, place2)”、“byTrain (place1, place2)”和“byAirplane (place1, place2)”的事实，我必须编写一个 travel/3 谓词（我称之为门票）告诉您从地点 1 到地点 2 需要购买哪些门票。

例如，查询

```
tickets(valmont, losAngeles, X) 
```

应该返回这样的答案：

```
X = goByCar(valmont, saarbruecken,
   goByTrain(saarbruecken, frankfurt,
   goByAirplane(frankfurt, bangkok,
   goByAirplane(bangkok, auckland,
   goByAirplane(auckland, losAngeles))))) 
```

我目前的解决方案是：

```
ticketsDir(A, B, goByCar(A, B)) :- byCar(A, B).
ticketsDir(A, B, goByTrain(A, B)) :- byTrain(A, B).
ticketsDir(A, B, goByAirplane(A, B)) :- byAirplane(A, B).

swapGo(goByCar(A, B)) :- goByCar(B, A).
swapGo(goByTrain(A, B)) :- goByTrain(B, A).
swapGo(goByAirplane(A, B)) :- goByAirplane(B, A).

mergeGo(goByCar(A, B), Go2) :- goByCar(A, B, Go2).
mergeGo(goByTrain(A, B), Go2) :- goByTrain(A, B, Go2).
mergeGo(goByAirplane(A, B), Go2) :- goByAirplane(A, B, Go2).

tickets(A, B, Go) :- ticketsDir(A, B, Go).
tickets(A, B, swapGo(Go)) :- ticketsDir(B, A, Go).
tickets(A, B, mergeGo(Go1, Go2)) :- ticketsDir(A, Z, Go1), tickets(Z, B, Go2).
tickets(A, B, mergeGo(Go1, Go2)) :- ticketsDir(Z, A, Go1), tickets(Z, B, Go2). 
```

但是，该查询返回以下结果：

```
X = mergeGo(goByCar(valmont, saarbruecken),
   mergeGo(goByTrain(saarbruecken, frankfurt),
   mergeGo(goByAirplane(frankfurt, bangkok),
   mergeGo(goByAirplane(bangkok, auckland),
   swapGo(goByAirplane(losAngeles, auckland))))))" 
```

现在奇怪的是，查询

```
swapGo(goByCar(A, B)) 
```

返回：

```
Error: swapGo/1: Undefined procedure: goByCar/2 
```

和查询

```
mergeGo(goByCar(A, B), go2) 
```

返回：

```
Error: mergeGo/2: Undefined procedure: goByCar/3 
```

似乎我错误地定义了“swapGo”和“mergeGo”，或者“tickets”。有什么建议可以解决吗？谢谢！

# c# - 使用 for 循环打印图案

> ID：15482681
> 
> 赞同：-1
> 
> 时间：2013-03-18T17:06:43.270
> 
> 标签：c#, for-loop, console-application

如何使用 for 循环打印模式？

```
图(3) 图(4)

   ** **
    ** **
     ** **
      ** **
                           **

```

我试过这个：

```
static void PrintPattern (int column)
{
    for (int r = 0; r <= column + 1; r++)
    {
        Console.Write("**");
        for (int c = 0; c < r; c++)
        {
            Console.WriteLine(" ");
        }
        Console.WriteLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:16:23.307

为好玩，希望我不会收到太多的-1

```
int depth = 4;
var rows = Enumerable.Range(0, depth + 1)
                     .Select(v => new string('\t', v) + "**" );

var oneString = string.Join(Environment.NewLine, rows);

Console.WriteLine (oneString); 
```

印刷：

```
**
  **
    **
      **
        ** 
```

备注：如果你使用`' '`作为分隔符，而不是 tab `'\t'`，你会得到下一个结果：

```
**
 **
  **
   **
    ** 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:44:23.847

```
 void Main()
    {
        const int rowCount = 10;
        Console.Write("**");
        for (var rowNumber = 0; rowNumber < rowCount - 1; rowNumber++)
        {
            Console.Write("\n ");
            for (var spaceCount = 0; spaceCount < rowNumber; spaceCount++)
            {
                Console.Write(" ");
            }
            Console.Write("**");
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:17:09.887

工作得很好。. .

> 对于图 3：行 = 4，
> 对于图 4：行 = 5

```
 static void Main(string[] args)
    {
        int lines = 5;
        for (int i = 0; i < lines; i++)
        {
            bool flag = false;
            for (int j = 0; j < lines; j++)
            {
                if (j == i)
                {
                    Console.WriteLine("**");
                    flag = true;
                }
                else
                {
                    if (!flag)
                        Console.Write(" ");
                }
            }
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-08T22:35:55.727

我不懂 C#，但我会用 Java 帮助你。您应该根据需要更改语法（`Console.Write`== `System.out.print`&& `Console.Writeline`== `System.out.println`）。所以这里是代码：

```
 static void printPattern(int column){
   int spaceCount = 2;//number of spaces before **, change as needed
   int k;//number of times ** is printed each row, must remain always 1
   for(int i = 0; i < column; i++){
       System.out.println();//starts each row with a new line
       for(int j = 1; j < spaceCount; j++){
           System.out.print(" ");//prints j spaces in each row
        }
        spaceCount++;//increment spacecount each row, so j can also go + 1 
        for(k = 1; k <= 1; k++){
            System.out.print("**");//each row prints ** k times
        }
        k--;//k must remain 1
    }
} 
```

对于图（3）调用`printPattern(4);`图（4）`printPattern(5);`

# python - 如何获取内存中python对象的大小？

> ID：15482689
> 
> 赞同：1
> 
> 时间：2013-03-18T17:07:03.740
> 
> 标签：python, memory

我想知道一个对象在python中占用了多少内存。

我说的是使用定义的对象，而不是 python 中的内置数据结构和数组。

# android - android上的chrome不会杀死我的会话

> ID：15482690
> 
> 赞同：1
> 
> 时间：2013-03-18T17:07:07.000
> 
> 标签：android, google-chrome, php

如何禁用 chrome 的缓存。我不使用缓存，所以我只注册一个会话变量，但它会在每次打开时记住会话变量。

此代码有效，但是当我关闭并打开 chrome 时，它​​不起作用

```
<?php
if (!isset($_SESSION["mobile_redirect"]))
{
   $_SESSION['mobile_redirect']=1;
   header("Location:http://".$this->otherSiteData['servername']);
   exit;
}
?> 
```

# c++ - 命名空间错误“不是命名空间名称”

> ID：15482692
> 
> 赞同：3
> 
> 时间：2013-03-18T17:07:12.953
> 
> 标签：c++, namespaces

我最近正在访问命名空间，因为我有一组函数/方法但没有数据，所以合乎逻辑的方法是将它们粘贴在命名空间中。（对不起，如果这个问题缺少任何东西）。

我有以下内容：

数学.h

```
namespace Math {

   double Euclidean();

} 
```

数学.cpp

```
#include "Math.h"
double Math::Euclidean() {
  // Implementation
} 
```

在另一个命名空间中，我需要访问“数学”命名空间：

```
namespace foo {

     foo();
} 
```

Foo.cpp

```
#include "Math.h"
#include "foo.h"

using namespace Math; 

foo::foo() {
  // use the math function
  Math::Euclidean(); 
```

}

我得到错误：

`Math’ is not a namespace-name`

我可能错过了一些非常简单的东西，但是，我似乎无法弄清楚。

我试图阅读以下内容：[在这里](http://nepsweb.co.uk/pgtcpp/namespace.htm)，但似乎这使用了一个类，我想在不使用类的情况下做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T18:13:45.047

这个问题已经过时了一个小时，所以我正在推广@Bo Persson 的直观评论。

> “math.h”也是一个 C 标准头文件。也许这就是编译器所包含的。

您可能正在使用 Windows，其中`Math.h`和`math.h`描述相同的文件。

重命名您的文件，使其与标准库头文件的名称不同，编译器会看到它。

# excel - VBA中的字符串分隔问题

> ID：15482693
> 
> 赞同：2
> 
> 时间：2013-03-18T17:07:21.353
> 
> 标签：excel, vba

感谢您对以下内容的帮助。

我需要在 VBA 中分离一些数据，以便可以将其设置为要在文件命名系统中使用的单独变量。

我有以下代码：

```
 Sub StripSlash1()
Dim strVal As String, strVal2 As String, strVal3 As String, strVal4 As String

'strVal = "jack\tom\rich\Nicolson\KingMcManaman"
'strVal = "L:\Pictures\A B C\A5 GROUP\A5 KHAKI\f"
strVal = "L:\Pictures\A B C\A5 GROUP\BPD"

    Cells(2, 5).Formula = strVal

    strVal2 = Right(strVal, InStr(strVal, "\") - 1)
    Cells(2, 6).Formula = strVal2

    strVal4 = Left(strVal, InStrRev(strVal, "\") - 1)
    Cells(2, 7).Formula = strVal4

    strVal3 = Right(strVal4, InStr(strVal4, "\") - 1)
    Cells(2, 8).Formula = strVal3

End Sub 
```

开头的三个 strVal 是运行代码以测试代码的数据的 3 种不同选择。\ 的数量在不同的情况下可能会有所不同。

我们需要的结果是：

数据集 1 strVal2 = KingMcManaman strVal3 = Nicolson

数据集 2 strVal2 = f strVal3 = A5 卡其色

数据集 3 strVal2 = BPD strVal3 = A5 GROUP

我会很感激你的意见，因为我一直没有运气。

问候，

山姆

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T17:23:07.403

请考虑使用`Split`在您的情况下执行以下操作的函数：

```
strVal = "L:\Pictures\A B C\A5 GROUP\BPD"
Dim arrVal As Variant
    arrVal = Split(strVal, "\") 
```

要获得其中的一部分，`strVal`您必须记住 arrVal 是一个数组：

```
strVal2 = arrVal(UBound(arrVal))         'result: BPD
strVal3 = arrVal(UBound(arrVal)-1)       'result: A5 GROUP 
```

等等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:46:44.857

```
Sub Tester()

    Dim s, arr

    s = "aaa\bbb\ccc\d\eee"
    arr = Split(s, "\")

    With ActiveSheet.Cells(2, 5)
        .Value = s
        .Offset(0, 1).Resize(1, UBound(arr) + 1).Value = arr
    End With

End Sub 
```

# python - 将整数列表转换为十六进制表示的函数

> ID：15482698
> 
> 赞同：1
> 
> 时间：2013-03-18T17:07:45.157
> 
> 标签：python, hex

我的功能`hex2int`如下：

```
import binascii

def hex2int(hexdata):
    return [ord(c) for c in binascii.unhexlify(hexdata)] 
```

它变成了一个字符串

```
'000000000000000000030c1a314a616d72614d331f0e0603010100000000000000010101010000010305060502000000021c4179b1dcedd2a76e41210e0906040403020202020100020825528dcdf2ffe0a86f3b22130c0a08060402000000000001010203020100000000000000000000000000000203030200000000020307142c5584a8bba37c4e28160c080603000000000000000001010101010101010101000000000000000d285c93c5dac7a06c4226160f0a0704030303030403030100000000000000000002030405040301000000000000000000000000000000000000000000000007111c2732404d5a61675f5342322118100d0a080604020100' 
```

进入以下列表：

```
[0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 12, 26, 49, 74, 97, 109, 114, 97, 77, 51, 31, 14, 6, 3, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1, 3, 5, 6, 5, 2, 0, 0, 0, 2, 28, 65, 121, 177, 220, 237, 210, 167, 110, 65, 33, 14, 9, 6, 4, 4, 3, 2, 2, 2, 2, 1, 0, 2, 8, 37, 82, 141, 205, 242, 255, 224, 168, 111, 59, 34, 19, 12, 10, 8, 6, 4, 2, 0, 0, 0, 0, 0, 1, 1, 2, 3, 2, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 3, 2, 0, 0, 0, 0, 2, 3, 7, 20, 44, 85, 132, 168, 187, 163, 124, 78, 40, 22, 12, 8, 6, 3, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 13, 40, 92, 147, 197, 218, 199, 160, 108, 66, 38, 22, 15, 10, 7, 4, 3, 3, 3, 3, 4, 3, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 4, 5, 4, 3, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 17, 28, 39, 50, 64, 77, 90, 97, 103, 95, 83, 66, 50, 33, 24, 16, 13, 10, 8, 6, 4, 2, 1, 0] 
```

我正在尝试编写`int2hex`获取此列表并返回第一个字符串的反函数。

我目前有

```
def int2hex(intdata):
    return binascii.hexlify(''.join([hex(i) for i in intdata])) 
```

但这不会返回正确的结果。你能解释一下我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:10:55.810

只需使用`format()`：

```
''.join(format(my_int, '02x') for my_int in my_list) 
```

它将每个整数值格式化为 2 位小写十六进制值，如果值小于 16，则以 0 开头。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T17:11:59.787

没有对 Python 2.7+ 的理解：

```
binascii.hexlify(bytearray(my_list)) 
```

在 Python 2.6 上，它需要一个“只读”缓冲区，这与 bytearray 不同：

```
binascii.hexlify(buffer(bytearray(my_list))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T17:10:02.397

```
print ''.join("%02x"%my_int for my_int in my_list) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T17:31:11.013

这里有一些很好的答案可以解决您遇到的问题，但不要解释您为什么会遇到它。

当你跑

```
 >>> binascii.unhexlify(hexdata)
 '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x0c\x1a1JamraM3\x1f\x0e\x06\x03x01\x01x00x00x00x00\x00\x00\x00\x01\x01\x01\x01\x00\x00\x01\x03\x05\x06\x05\x02\x00\x00x00x02x1cAy\xb1\xdc\xed\xd2\xa7nA!\x0e\t\x06\x04\x04\x03\x02\x02\x02\x02\x01\x00x02x08%Rx8d\xcd\xf2\xff\xe0\xa8o;"\x13\x0c\n\x08\x06\x04\x02\x00\x00\x00x00x00x01x01x02\x03\x02\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00x00x02x03x03\x02\x00\x00\x00\x00\x02\x03\x07\x14,U\x84\xa8\xbb\xa3|N(\x16x0cx08x06x03x00\x00\x00\x00\x00\x00\x00\x00\x01\x01\x01\x01\x01\x01\x01x01x01x01\x00x00x00\x00\x00\x00\x00\r(\\\x93\xc5\xda\xc7\xa0lB&\x16\x0f\n\x07x04x03\x03\x03x03x04\x03\x03\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02\x03\x04\x05'\x04\x03x01x00x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00x00x00\x00\x07\x11\x1c\'2@MZag_SB2!\x18\x10\r\n\x08\x06\x04\x02\x01\x00' 
```

你得到一个字符串，其中每个字符的二进制值都是你想要的数字（因此`'\x00'`，这就是你使用的原因`ord()`

但是，您正在运行

```
 >> ''.join([hex(i) for i in intdata])
 '0x00x00x00x00x00x00x00x00x00x30xc0x1a0x310x4a0x610x6d0x720x610x4d0x330x1f0xe0x60x30x10x10x00x00x00x00x00x00x00x10x10x10x10x00x00x10x30x50x60x50x20x00x00x00x20x1c0x410x790xb10xdc0xed0xd20xa70x6e0x410x210xe0x90x60x40x40x30x20x20x20x20x10x00x20x80x250x520x8d0xcd0xf20xff0xe00xa80x6f0x3b0x220x130xc0xa0x80x60x40x20x00x00x00x00x00x10x10x20x30x20x10x00x00x00x00x00x00x00x00x00x00x00x00x00x00x20x30x30x20x00x00x00x00x20x30x70x140x2c0x550x840xa80xbb0xa30x7c0x4e0x280x160xc0x80x60x30x00x00x00x00x00x00x00x00x10x10x10x10x10x10x10x10x10x10x00x00x00x00x00x00x00xd0x280x5c0x930xc50xda0xc70xa00x6c0x420x260x160xf0xa0x70x40x30x30x30x30x40x30x30x10x00x00x00x00x00x00x00x00x00x20x30x40x50x40x30x10x00x00x00x00x00x00x00x00x00x00x00x00x00x00x00x00x00x00x00x00x00x00x00x70x110x1c0x270x320x400x4d0x5a0x610x670x5f0x530x420x320x210x180x100xd0xa0x80x60x40x20x10x0' 
```

这给了你一个 ascii 表示。您需要按照`chr()`自己的方式进行操作，或者使用其他答案之一中的一种不错的选择。

# json - JSON 字符串到 HTML

> ID：15482700
> 
> 赞同：0
> 
> 时间：2013-03-18T17:07:45.990
> 
> 标签：json

在我的 JSON 字符串（来自服务器响应）中，我有一个 HTML 标签，例如`abc<br/>dd`. 该字符串作为其内容进入 DOM 元素。

如何将其显示为正确的 HTML，而不是原始字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:12:33.807

您需要将其设置为 HTML 而不是文本。直接使用 DOM，你会设置`element.innerHTML = myValue;`. 如果你使用 jQuery，你会使用`$('#myElement').html(myValue);`.

# database - 在数据库中存储和读取 NSKeyedArchived NSData

> ID：15482701
> 
> 赞同：1
> 
> 时间：2013-03-18T17:07:45.970
> 
> 标签：database, nsdictionary, nsdata, nskeyedarchiver, data-serialization

我有一个包含大量变量的对象，这些变量需要保存在本地以及数据库中。该对象将使用 NSKeyedArchiver 进行序列化并在本地存储（与[https://github.com/nicklockwood/CryptoCoding](https://github.com/nicklockwood/CryptoCoding)中的 CryptoCoder 结合使用）。

现在我正在尝试将数据存储在数据库（cloudant.com）中。我可以使用 NSData 直接发送数据，将（例如，<F60323 04A525 ... ... 6D3301>）存储在数据库中，但是读回来我不知道如何将其转换回 NSData。将 NSString 与编码一起使用会产生空结果。

因为序列化的数据写在一个遵循 plist 格式的文件中，所以我尝试使用 NSPropertyListSerialization 将其转换为 NSDictionary 并将其发送出去，但转换不准确。

需要建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:58:02.110

NSData（例如，< F60323 04A525 ... ... 6D3301 >）是十六进制格式。我相信您正在调用该`[NSData description]`方法来获得该结果。它不应该用于序列化，尽管序列化并非不可能。（只需要编写一个自定义的十六进制数据转换器）

有很多方法可以通过网络传输数据。我假设您使用 HTTP 作为传输层。我列出了两种方法可以做到这一点

### JSON 方式（也适用于 plist，虽然它支持更多数据类型）

编写自定义序列化器和反序列化器，将要序列化的对象转换为 NSJSONSerializer 可以成功序列化为 JSON 的对象。

可以转换为 JSON 的对象必须具有以下属性：

*   顶级对象是 NSArray 或 NSDictionary。
*   所有对象都是 NSString、NSNumber、NSArray、NSDictionary 或 NSNull 的实例。
*   所有字典键都是 NSString 的实例。
*   数字不是 NaN 或无穷大。

*参考：*

*   *[NSJSONSerializer 参考](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)*
*   *[NSPropertyListSerializer 参考](https://stackoverflow.com/questions/15482701/storing-and-reading-nskeyedarchived-nsdata-to-from-database)*

### 通过 HTTP 的原始 NSData

通过 HTTP 上传原始 NSData（来自 NSCoding）通常使用 application/octet-stream 或 multipart/form-data 的 HTTP POST 完成。

如果您想使用 application/x-www-form-urlencoded 等其他方法进行 POST，则需要将其序列化为 web 友好编码，如 base64 或十六进制。我推荐使用 Base64。iOS 不附带 Base64 编码器和解码器，但我编写了一个（基于 Mattt Thompson 的 AFNetworking 实现）。我知道其他人写过类似的方法，我审查并发现 Mattt Thompson（以及随后我派生的 base64 解码器代码）是干净的、可读的和尽可能少的逻辑。

[Objective-C 中的 Base64 编码和解码实现](https://github.com/lxcid/LXSupport/blob/master/src/LXSupport/LXSupport/LXSHelperOfNSData.m#L20-L106)

确保从服务器检索数据时，如果它是（base64 或十六进制）编码的，请先解码。将解码后的数据序列化为 JSON、Property List 或 NSCoding，具体取决于您的实现。

基本上，反转您的序列化步骤。

# coldfusion - Coldfusion 9 中的 Markdown 处理，支持表格扩展

> ID：15482705
> 
> 赞同：6
> 
> 时间：2013-03-18T17:07:50.977
> 
> 标签：coldfusion, markdown

我正在尝试使用在 Coldfusion 9 上工作的表扩展来获得 Markdown。在 stackoverflow 上还有一些关于 CF 和 Markdown 的其他类似问题，但没有一个涉及扩展。

到目前为止，我已经尝试过；

*   markdownj 通过 javaloader.cfc
*   通过 javaloader.cfc[挂钩](https://github.com/sirthias/pegdown)
*   showdownjs via [orangepips nice cfc](https://stackoverflow.com/questions/4600535) （我会链接所有这些但没有超过 2 个的代表）

所有这些都适用于基本的 Markdown，但没有一个支持开箱即用的表格。
pegdown 和 showdown.js 都支持表格扩展。然而，Markdownj 目前并不支持它，但我认为值得一试。

我认为我的问题在于获取正确的语法以在 pegdown 或 showdown 中加载扩展。两者的工作方式截然不同，一种是纯 Java，另一种是解释型 Javascript。

## 对于挂钩

我这里的代码非常简单，只使用 javaloader 来加载 pegdown 和它所需的 parboiled 库。这部分看起来工作正常，没有错误，但是当我尝试使用 pegdown 类时，我得到了一个相当普遍的错误；

```
An exception occurred while instantiating a Java object. The class must not be an interface or an abstract class. Error: ''. 
```

调用pegdown的代码；

```
<cfscript>
    jClass = [
        "#getDirectoryFromPath(getCurrentTemplatePath())#/pegdown/pegdown-1.2.1.jar"
        ,   "#getDirectoryFromPath(getCurrentTemplatePath())#/pegdown/parboiled-core-1.1.3.jar"
        ];
    javaloader      = createObject('component','components.javaloader.JavaLoader').init(jClass, true);

    variables.pegdown = javaloader.create("org.pegdown.PegDownProcessor");
</cfscript>
<cfdump var="#variables.pegdown#" /> 
```

## 对于showdownjs：

我已经尝试将扩展文件（extensions/table.js）添加到 var 以进行评估，并根据文档将扩展 var 添加到转换器选项，但它不起作用。我猜 showdown.js 不希望在底层 Java scriptEngineManager 中运行，因为主 showdown.js 脚本无法“看到”表扩展，在第 246 行失败；

```
The script had an error: sun.org.mozilla.javascript.internal.JavaScriptException: Extension 'undefined' could not be loaded. It was either not found or is not a valid extension. (#246) in at line number 246 
```

我的 showdown.js 代码基于上面链接问题中的 Orangepips 答案。

```
<cfcomponent output="false" accessors="true">
    <cffunction name="init" output="false" access="public" returntype="Showdown" hint="Constructor">
        <cfset variables.manager = createObject("java", "javax.script.ScriptEngineManager").init()>
        <cfset variables.engine = manager.getEngineByName("javascript")>
        <cfreturn this/>
    </cffunction>

    <cffunction name="toHTML" output="false" access="public" returntype="any" hint="">
        <cfargument name="markdownText" type="string" required="true"/>
        <cfset var local = structNew()/>
        <cfset var bindings = variables.engine.createBindings()>
        <cfset var result = "">
        <cfset var showdownJS = "" />

        <cftry>
            <cfset bindings.put("markdownText", arguments.markdownText)>
            <cfset variables.engine.setBindings(bindings, createObject("java", "javax.script.ScriptContext").ENGINE_SCOPE)>
            <cfset showdownJS &= fileRead('#getDirectoryFromPath(getCurrentTemplatePath())#/showdown.js')>
            <cfset showdownJS &= fileRead('#getDirectoryFromPath(getCurrentTemplatePath())#/extensions/table.js')>
            <cfset showdownJS &= showdownAdapterJS()>
            <cfset result = engine.eval(showdownJS)>
            <cfcatch type="javax.script.ScriptException">
                <cfset result = "The script had an error: " & cfcatch.Message>
            </cfcatch>
        </cftry>

        <cfreturn result>
    </cffunction>

    <cffunction name="showdownAdapterJS" output="false" access="private" returntype="string" hint="">
        <cfset var local = structNew()/>
<cfsavecontent variable="local.javascript">
<cfoutput>#chr(13)##chr(10)#
var __converter = new Showdown.converter({extensions:['table']});
__converter.makeHtml(markdownText);</cfoutput>
</cfsavecontent>
        <cfreturn local.javascript>
    </cffunction>
</cfcomponent> 
```

我对任何想法持开放态度，并且对一种解决方案比另一种解决方案没有任何特别的偏好。

## 堆栈跟踪

```
java.lang.ClassNotFoundException: org.parboiled.BaseParser at 
coldfusion.bootstrap.BootstrapClassLoader.loadClass(BootstrapClassLoader.java:235) at 
java.lang.ClassLoader.loadClass(Unknown Source) at 
com.compoundtheory.classloader.NetworkClassLoader.loadClass(NetworkClassLoader.java:463) at 
java.lang.ClassLoader.loadClass(Unknown Source) at 
java.lang.ClassLoader.loadClassInternal(Unknown Source) at 
java.lang.ClassLoader.defineClass1(Native Method) at 
java.lang.ClassLoader.defineClass(Unknown Source) at 
java.lang.ClassLoader.defineClass(Unknown Source) at 
com.compoundtheory.classloader.NetworkClassLoader.loadClass(NetworkClassLoader.java:450) at 
java.lang.ClassLoader.loadClass(Unknown Source) at 
java.lang.ClassLoader.loadClassInternal(Unknown Source) at 
java.lang.Class.getDeclaredFields0(Native Method) at 
java.lang.Class.privateGetDeclaredFields(Unknown Source) at 
java.lang.Class.privateGetPublicFields(Unknown Source) at 
java.lang.Class.getFields(Unknown Source) at 
coldfusion.runtime.java.ObjectHandler.Initialize(ObjectHandler.java:35) at 
coldfusion.runtime.java.ObjectHandler.<init>(ObjectHandler.java:30) at 
coldfusion.runtime.java.ReflectionCache$1.fetch(ReflectionCache.java:29) at 
coldfusion.util.SoftCache.get_statsOff(SoftCache.java:133) at 
coldfusion.util.SoftCache.get(SoftCache.java:81) at 
coldfusion.runtime.java.ReflectionCache.get(ReflectionCache.java:36) at 
coldfusion.runtime.java.JavaProxy.<init>(JavaProxy.java:35) at 
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at 
sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) at 
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) at 
java.lang.reflect.Constructor.newInstance(Unknown Source) at 
coldfusion.runtime.java.JavaProxy.CreateObject(JavaProxy.java:166) at 
coldfusion.runtime.java.JavaProxy.invoke(JavaProxy.java:80) at 
coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2360) at 
cfJavaLoader2ecfc535209679$funcCREATEJAVAPROXY.runFunction(/srv/vhosts/myproject/httpdocs/components/javaloader/JavaLoader.cfc:329) at 
coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:472) at 
coldfusion.filter.SilentFilter.invoke(SilentFilter.java:47) at 
coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:405) at 
coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:368) at 
coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:55) at 
coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:321) at 
coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:220) at 
coldfusion.runtime.CfJspPage._invokeUDF(CfJspPage.java:2582) at 
cfJavaLoader2ecfc535209679$funcCREATE.runFunction(/srv/vhosts/myproject/httpdocs/components/javaloader/JavaLoader.cfc:87) at 
coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:472) at 
coldfusion.filter.SilentFilter.invoke(SilentFilter.java:47) at 
coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:405) at 
coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:368) at 
coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:55) at 
coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:321) at 
coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:220) at 
coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:491) at 
coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:337) at 
coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2360) at 
cfpegdown2ecfm1473046932.runPage(/srv/vhosts/myproject/httpdocs/_temp/markdown/pegdown.cfm:22) at 
coldfusion.runtime.CfJspPage.invoke(CfJspPage.java:231) at 
coldfusion.tagext.lang.IncludeTag.doStartTag(IncludeTag.java:416) at 
coldfusion.runtime.CfJspPage._emptyTcfTag(CfJspPage.java:2722) at 
cfApplication2ecfc294205112$funcONREQUEST.runFunction(/srv/vhosts/myproject/httpdocs/Application.cfc:377) at 
coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:472) at 
coldfusion.runtime.UDFMethod$ReturnTypeFilter.invoke(UDFMethod.java:405) at 
coldfusion.runtime.UDFMethod$ArgumentCollectionFilter.invoke(UDFMethod.java:368) at 
coldfusion.filter.FunctionAccessFilter.invoke(FunctionAccessFilter.java:55) at 
coldfusion.runtime.UDFMethod.runFilterChain(UDFMethod.java:321) at 
coldfusion.runtime.UDFMethod.invoke(UDFMethod.java:220) at 
coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:491) at 
coldfusion.runtime.TemplateProxy.invoke(TemplateProxy.java:337) at 
coldfusion.runtime.AppEventInvoker.invoke(AppEventInvoker.java:88) at 
coldfusion.runtime.AppEventInvoker.onRequest(AppEventInvoker.java:280) at 
coldfusion.filter.ApplicationFilter.invoke(ApplicationFilter.java:356) at 
coldfusion.filter.RequestMonitorFilter.invoke(RequestMonitorFilter.java:48) at 
coldfusion.filter.MonitoringFilter.invoke(MonitoringFilter.java:40) at 
coldfusion.filter.PathFilter.invoke(PathFilter.java:94) at 
coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70) at 
coldfusion.filter.BrowserDebugFilter.invoke(BrowserDebugFilter.java:79) at 
coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28) at 
coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38) at 
coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46) at 
coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38) at 
coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22) at 
coldfusion.filter.CachingFilter.invoke(CachingFilter.java:62) at 
coldfusion.CfmServlet.service(CfmServlet.java:200) at 
coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89) at 
jrun.servlet.FilterChain.doFilter(FilterChain.java:86) at 
com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doRequestNoFilter(FusionReactorCoreFilter.java:712) at 
com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doFusionRequest(FusionReactorCoreFilter.java:341) at 
com.intergral.fusionreactor.filter.FusionReactorCoreFilter.doFilter(FusionReactorCoreFilter.java:246) at 
com.intergral.fusionreactor.filter.FusionReactorFilter.doFilter(FusionReactorFilter.java:121) at 
jrun.servlet.FilterChain.doFilter(FilterChain.java:94) at 
coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42) at 
coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46) at 
jrun.servlet.FilterChain.doFilter(FilterChain.java:94) at 
jrun.servlet.FilterChain.service(FilterChain.java:101) at 
jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106) at 
jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42) at 
jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286) at 
jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543) at 
jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203) at 
jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428) at 
jrunx.scheduler.WorkerThread.run(WorkerThread.java:66) 
```

# 更新

这要归功于 barnyr。
问题源于我对 Java 缺乏了解以及对 PegDown 和 Parboiled 的一些额外依赖。

Parboiled 需要 Pegdown 的 java 和核心 .jar。Pegdown 期望找到 我使用的 4.1 版并包含 -all- 版本的[ASM 库。](http://forge.ow2.org/projects/asm/)
建议只包含必要的 asm jar，但现在这足以让我更进一步。

## CF9 的工作代码（在 JRUN/Linux 上运行）

```
<!--- Load some demo markdown content --->
<cfset markdownString = fileRead("#getDirectoryFromPath(getCurrentTemplatePath())#/demo.txt")>

<!--- Directory containing all the necessary jar files. --->
<cfset jarDir = "#getDirectoryFromPath(getCurrentTemplatePath())#pegdown" />

<!--- Array of necessary classes --->
<cfset jClass = [
        "#jarDir#/parboiled-java-1.1.3.jar"
        ,   "#jarDir#/asm-all-4.1.jar"
        ,   "#jarDir#/parboiled-core-1.1.3.jar"
        , "#jarDir#/pegdown-1.2.1.jar"
        ] />
<cfset javaloader = createObject('component','components.javaloader.JavaLoader').init(jClass, false) />

<!--- Hex values for different extensions can be found in org.pegdown.Extensions.java (0x20 is for tables support) --->
<cfset variables.pegdown = javaloader.create("org.pegdown.PegDownProcessor").init(javaCast("int", InputBaseN("0x20", 16))) />

<!--- Output the HTML conversion --->
<cfoutput>#variables.pegdown.markdownToHtml(markdownString)#</cfoutput> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:32:03.870

由于 PegDown 的依赖项 - parboiled 的分布方式，您会收到错误消息。

这是一个 Scala 项目，它产生了多个 JAR。您拥有的半熟核心 jar 似乎只有核心算法和 Scala 语言 API。

要使用 Java API，您还需要掌握提供绑定的 parboiled-java 库（包括`BaseParser`上面异常中提到的类）。GitHub repo 只有 1.1.4 文件，但这里有 1.1.3 jar 的副本：http: [//mirrors.ibiblio.org/maven2/org/parboiled/parboiled-java/1.1.3/parboiled-java -1.1.3.jar](http://mirrors.ibiblio.org/maven2/org/parboiled/parboiled-java/1.1.3/parboiled-java-1.1.3.jar)

如果您下载它并将其添加到您要交给`JavaLoader`您的 jar 文件数组中，应该没问题。

# jquery - jQuery：在整个表中获取 a 的 id

> ID：15482708
> 
> 赞同：0
> 
> 时间：2013-03-18T17:08:00.400
> 
> 标签：jquery, html

我正在尝试检索整个表格中某个表格单元格的 ID。

例子

```
<table>
  <tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
  </tr>  
  <tr>
    <td>4</td>
    <td class="current">5</td>
    <td>6</td>
  </tr>
</table> 
```

我正在尝试获取的索引`td.current`但`<tr>`与`<table>`

所以，而不是简单地做

```
$('td.current').index() 
```

这将输出 1，我需要它输出 4（整个表中的第 5 个 td）。

阅读[index() 文档](http://api.jquery.com/index/)，我尝试了多种方法，但它总是返回 -1。我可以用循环来做到这一点，但我试图只用选择器来做到这一点。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T17:11:07.883

`$('.current').index('td');`应该这样做。

**[jsFiddle 示例](http://jsfiddle.net/j08691/T9pjM/)**

index() 文档的关键部分是：

> 如果在元素集合上调用 .index() 并传入 DOM 元素或 jQuery 对象，则 .index() 返回一个整数，指示传递的元素相对于原​​始集合的位置。

因此，您需要传入一组元素以进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:12:59.610

请试试这个::

```
$('td.current').index('td'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:11:43.137

尝试：

```
table = $('.current').parent().children('td');
$('.current').index(table); 
```

**编辑：**

此方法与@j08691 的方法相同，但它只查看里面的表格，`.selected`以防同一页面上有更多表格。否则@j08691 的答案会更好，因为它使用的代码更少。

# android - 如何将 youtube 频道集成到 android 应用程序而不离开它

> ID：15482710
> 
> 赞同：0
> 
> 时间：2013-03-18T17:08:02.063
> 
> 标签：android, youtube

我正在尝试将 youtube 频道集成到我的 android 应用程序中，我使用了以下代码：

```
intent.setData(Uri.parse(urlStr ));
startActivity(intent); 
```

它工作正常，但它在 youtube 网站上打开，因此无法返回应用程序。

我该怎么做才能使 youtube 成为应用程序的一部分而不离开它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:16:13.223

我会推荐使用[YouTube Data API v3](https://developers.google.com/youtube/v3/)。您拥有那里描述的所有需要​​的文档。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:13:20.413

你可以做这个

```
Intent lVideoIntent = new Intent(null, Uri.parse("ytpl://"+YOUTUBE_PLAYLIST_ID), this, OpenYouTubePlayerActivity.class); 
```

开始活动（lVideoIntent）；

看看这个项目：[https ://code.google.com/p/android-youtube-player/](https://code.google.com/p/android-youtube-player/)

# sql - 在sql中自动生成代码

> ID：15482712
> 
> 赞同：-2
> 
> 时间：2013-03-18T17:08:09.197
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用微软的 sql 服务器。我想为我正在使用的表格中的项目生成一个代码我希望代码看起来像这样 AA/034、AA/365……

AA 是一个不会改变的简单数字序列，034 或 365 是一年中的天数，因此代码不会唯一；同一天输入的所有结果都将使用相同的代码。例如，如果今天是 1 月 28 日，则生成的代码将为 AA/028。你能帮我处理这段代码的 SQL 查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:12:52.143

您可以使用T-SQL 中的[DATEPART方法获取一年中的哪一天。](http://msdn.microsoft.com/en-us/library/ms174420.aspx)所以要获取该字段的内容：

```
("AA/" + DATEPART(dy, date_goes_here)) AS datecode 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:14:52.057

假设您的日期列被称为`EnteredDate`

`Select 'AA/' + Right('000' + Cast(DATEPART(dy, EnteredDate)as varchar(3)),3)`

# perl - 使用 File::Map 进行部分文件内存映射

> ID：15482719
> 
> 赞同：0
> 
> 时间：2013-03-18T17:08:38.103
> 
> 标签：perl

[`File::Map`](http://metacpan.org/module/File%3a%3aMap)有没有办法使用该模块进行某种部分文件映射？

如果我写

```
map_file($map, $filename); 
```

它告诉我这个操作没有足够的内存。

看来我的文件太大了，无法将它们完全映射到内存中。我可以逐块映射它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:13:08.607

根据[文档](http://search.cpan.org/~leont/File-Map-0.56/lib/File/Map.pm)，是的：map_file 可以采用两个可选参数`$offset`和`$length`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:16:42.173

如果您正在映射文本文件，那么您应该使用[`Tie::File`](http://metacpan.org/module/Tie%3a%3aFile)。它将根据需要将文件的必要部分分页进出内存，并且您永远不会达到限制。

# symfony - Symfony2 获取实体上的验证约束

> ID：15482725
> 
> 赞同：13
> 
> 时间：2013-03-18T17:09:05.783
> 
> 标签：symfony, symfony-2.1

我正在研究一种获取实体的所有验证约束的方法（我想要实现的是以 JSON 格式返回此数据并使用 JQuery Validation Plugin 在客户端应用相同的约束），但是我在获取约束时遇到了一些麻烦，这是我当前的代码：

```
 $metadata = new \Symfony\Component\Validator\Mapping\ClassMetadata("Namespace\JobBundle\Entity\Job");
    $annotationloader = new AnnotationLoader(new AnnotationReader());
    $annotationloader->loadClassMetadata($metadata); 
```

我在 $metadata 中得到的是约束属性的空数组，其余的（$properties 和 $members 只有错误消息......但没有实际约束（例如：必需，整数......））。

我做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-19T15:25:54.500

我可能会使用验证器服务而不是实例化新的类元数据。你永远不知道某些类是否是通过服务初始化的。

```
$metadata = $this->container
                 ->get('validator')
                 ->getMetadataFactory()
                 ->getClassMetadata("Name‌​space\JobBundle\Entity\Job"); 
```

并且`$metadata`应该有您正在寻找的数据

Symfony 2.3 及更高版本

```
$metadata = $this->container
                 ->get('validator')
                 ->getMetadataFor("Name‌​space\JobBundle\Entity\Job"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-26T05:03:41.143

```
private function getValidations()
    {
        $validator=$this->get("validator");
        $metadata=$validator->getMetadataFor(new yourentity());
        $constrainedProperties=$metadata->getConstrainedProperties();
        foreach($constrainedProperties as $constrainedProperty)
        {
            $propertyMetadata=$metadata->getPropertyMetadata($constrainedProperty);
            $constraints=$propertyMetadata[0]->constraints;
            foreach($constraints as $constraint)
            {
                //here you can use $constraint to get the constraint, messages etc that apply to a particular property of your entity
            }
        }
    } 
```

**$validator=$this->get("validator");
$metadata=$validator->getMetadataFor(new yourentity());**
对象 $metadata 现在包含有关与您的特定实体有关的验证的所有元数据。

# jquery - 方法/函数的jquery继承

> ID：15482727
> 
> 赞同：0
> 
> 时间：2013-03-18T17:09:18.357
> 
> 标签：jquery, inheritance

所以我有一个表格，一旦用户点击“添加新”按钮，我就可以添加一个新的表格行。问题是最初表有 4 行，当我在这 4 行中的任何一行上单击“添加新”按钮时，它会添加一个新行，但是如果我在任何新创建的行上单击“添加新”按钮，则没有行创建的。这些新创建的行没有继承此“添加行”功能。我对 jquery 比较陌生，我只知道基础知识（我在项目中需要什么）。所以这是我的代码：

```
$('.new-row').on('click', function(){
        var add_parent_div_id = $(this).parent().data('divid');
        var last_row = last_row_id();
                var cl="gray";

        //add a new row
        $('[data-divid="'+add_parent_div_id+'"]').after('<div class="cell '+ (cl) +'" data-divid="'+ (++last_row) +'" ><div class="new-row"></div><div class="item-cell"><input type="text" value="Item name..." ></input></div> <div class="qty-cell"><input type="text" value="1" ></input></div> <div class="price-cell"><input type="text" value="0.00" ></input></div> <div class="discount-cell" ><input type="text" value="0.00" ></input></div> <div class="subtotal-cell"><input type="text" value="0.00" ></input></div><div class="remove-row"></div></div>');

    }); 
```

因此，一旦您单击添加按钮，它就会附加一个新行。

我怎样才能做到这一点，以便新创建的行会听这个

```
$('.new-row').on('click', function(){ 
```

并添加一个新行....

作为一个 jquery 新手，我将不胜感激任何代码结构建议以及任何关于此的最佳实践建议......

谢谢你。

# ios - iTunes Connect 中的应用购买问题

> ID：15482734
> 
> 赞同：4
> 
> 时间：2013-03-18T17:09:43.187
> 
> 标签：ios, in-app-purchase, app-store-connect

我提交了应用程序以供审核...我忘记为该版本添加应用程序内购买。由于这个原因，该应用程序自然被拒绝了。

现在我的问题是：我无法将应用内购买添加到此版本，因为

> 应用内购买无法添加到此版本，因为它已提交审核。要管理您的应用内购买，请返回应用摘要页面并单击管理应用内购买按钮。

但我无法提交新的应用版本...因为此版本实际上并未提交，所以我可以更新它。

我需要删除该应用程序并将其读入 iTunes Connect 还是有解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T17:40:53.160

我在[这里找到了解决方案](https://stackoverflow.com/a/12309829/1270586)

基本上是：

1.  上传你的二进制文件
2.  等到“等待审核”
3.  自己拒绝二进制文件（应用程序版本>二进制详细信息>拒绝二进制文件）
4.  等到“开发者被拒绝”
5.  去添加你的应用内购买
6.  重新提交二进制文件

# vba - x天后删除电子邮件的VBA代码

> ID：15482736
> 
> 赞同：3
> 
> 时间：2013-03-18T17:09:45.200
> 
> 标签：vba, outlook, outlook-2010

我正在尝试删除收件箱中超过 90 天的所有电子邮件。我无法使用自动存档，因为它已在我的办公室被禁用。我有一些代码似乎不会删除所有超过 90 天的邮件。我认为问题可能与我的循环有关。我将 Outlook 2010 与 Exchange 2010 一起使用。

```
Private Sub RemoveEmail90()

Dim olSession As Outlook.Application, olNamespace As NameSpace
Dim olInbox As Outlook.MAPIFolder
Dim i As Integer
Set olSession = New Outlook.Application
Set olNamespace = olSession.GetNamespace("MAPI")
Set olInbox = olNamespace.GetDefaultFolder(olFolderInbox)
Set Delete_Items = olInbox.Items

For i = Delete_Items.Count To 1 Step -1
    If TypeName(Delete_Items.Item(i)) = "MailItem" Then
            If DateDiff("d",now, Delete_Items.Item(i).ReceivedTime) > 90 Then Delete_Items.Item(i).Delete
    End If
Next

Set olSession = Nothing
Set olNamespace = Nothing
Set olInbox = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:03:27.573

我能够通过调整代码来修复它。现在代码运行得很好。我将第 13 行的“m”更改为“d”，现在它正在删除所有较旧的电子邮件。更新了上面的代码。

```
If DateDiff("d",now, Delete_Items.Item(i).ReceivedTime) > 90 Then Delete_Items.Item(i).Delete 
```

# javascript - 为什么我不能用 JavaScript（不是 HttpOnly）使 cookie 过期

> ID：15482743
> 
> 赞同：2
> 
> 时间：2013-03-18T17:10:10.413
> 
> 标签：javascript, cookies, jquery-cookie

我在通过 JavaScript 开发的框架中设置了一个 cookie（该框架似乎正在使用[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)）。我正在这个框架内开发，但无权访问框架代码，我想通过 JavaScript 删除一个 cookie（我无权访问此框架内的任何服务器端）。

通过 Chrome 检查 cookie，我可以说很多：

```
"domain": "www.example.com", 
"expirationDate": 1667235180, 
"hostOnly": true, 
"httpOnly": false, 
"name": "my_cookie", 
"path": "/", 
"secure": false, 
"session": false, 
"storeId": "0", 
"value": "123456789" 
```

它是 hostOnly，但这应该没问题，因为我试图从域字段中设置的同一域中删除。

我正在尝试使用以下代码将其删除：

```
function clearCookie(name, domain, path) {
      var domain = domain || document.domain;
      var path = path || "/";
      document.cookie = name + "=; expires=" + +new Date + "; domain=" + domain + "; path=" + path;
};

clearCookie('my_cookie', 'www.example.com', '/'); 
```

但是，当我这样做时，它会创建一个域为“.www.example.com”的新会话 cookie（注意额外的句点），并且不会删除当前的 cookie。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-05T15:50:32.963

老问题，但我刚刚遇到这个问题并发现了这个问题。

如果您有 hostOnly cookie，请不要在修改/过期时指定域。

如果没有提供，大多数 cookie 处理库将自动指定域，这使得编辑 hostOnly cookie 变得困难，如果不是不可能的话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:59:45.997

我认为您设置到期时间的方式存在问题。使用 JavaScript 设置 cookie 需要 UTC/GMT 格式的日期。请参阅此相关答案：

[在设置 cookie 时指定到期日期时，我可以使用哪些日期格式？](https://stackoverflow.com/questions/11136372/which-date-formats-can-i-use-when-specifying-the-expiry-date-when-setting-a-cook)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:19:01.490

您实际上无法通过 javascript 删除 cookie。您所做的是将现有 cookie 设置为过期，然后允许浏览器处理其销毁。如果您检查 jquery-cookie 源，您会发现它实际上具有销毁 cookie 的功能，您可以在此处使用它来简化操作。

这里的简单答案是使用现有框架的删除功能。

```
$.removeCookie(key) 
```

# javascript - window.location 不带条件执行

> ID：15482744
> 
> 赞同：2
> 
> 时间：2013-03-18T17:10:13.123
> 
> 标签：javascript, jquery, html

```
<a href="www.google.com" class="social" id="social">Link one</a> 
<a href="www.cnn.com" class="social" id="social">Link two</a> 
<a href="www.facebook.com" class="social" id="social">Link three</a> 
```

我希望能够让用户：

1.  点击一个链接
2.  将链接 href 存储到`$href`变量中
3.  用户从复选框中选择后，将用户带到该 `$href`位置。

我一直在使用[**这个小提琴**](http://jsfiddle.net/Jg8jT/19/)。

那么，如何在选择复选框时让链接转到各自的位置？

如果有人可以提供任何帮助或建议；我真的很感激谢谢！

```
p{
    display: inline-block;
}
input[type="checkbox"]:disabled + label{
    opacity: .5;
}
.faded{ color: grey;
    opacity: .5;
}

<p>Links should go to their respective locations upon checkbox selection</p>
<br>

<a href="www.google.com" class="social" id="social">Link one</a> 
<a href="www.cnn.com" class="social" id="social">Link two</a> 
<a href="www.facebook.com" class="social" id="social">Link three</a> 

<div class="know-your-role">
    <div id="checkwrapper">
        <form method="POST" action="">
            <p>Are you a</p>
            <input type="checkbox" id="check-1"  class="checkchoice student" value="1"><label for="check-1" class="choice student tooltip" title="Student">Student</label>
            <p>or</p>
            <input type="checkbox" id="check-2" class="checkchoice teach" value="2"><label for="check-2" class="choice teach tooltip" style="padding-right: 20px;" title="Teacher">Teacher</label>
            <p>?</p>
        </form>
    </div>
    <div class="style-select type">
        <input type="text" placeholder="What year" />
    </div>
    <p class="faded">       
     "What year" input should only appear when student is selected'
    </p>
</div> 
```

**JavaScript**

```
$('.type').hide(); 
$(".know-your-role").hide();

$(".social").click(function(e){
    e.preventDefault();
    var href = $(this).attr('href');
    $(".wizard").hide();
    $('.know-your-role').show('fast');
    var $student = $('input:checkbox.student');
    var $teach = $('input:checkbox.teach');

    if($student.is(':checked') & $(".year").va() != ""){
        window.location.href = href;
    }else if ($teach.is(':checked')){
        window.location.href = href;
    }
});

$(function(){
    $('#check-1').change(function() {
        $('#checkwrapper').hide();
        $('.type').css('width','110px')
        $('.type').show();
    });
});

$('input:checkbox.checkchoice').click(function(){
    var $inputs = $('input:checkbox.checkchoice');
    if($(this).is(':checked')){
        $inputs.not(this).prop('disabled',true);
    }else{
        $inputs.prop('disabled',false);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:15:34.593

```
<a href="http://www.google.com" class="social">Link one</a> 
<a href="http://www.cnn.com" class="social">Link two</a> 
<a href="http://www.facebook.com" class="social">Link three</a> 
```

Ids 必须是唯一的，并且 href 必须在前面`http://`

```
if($student.is(':checked') & $(".year").va() != ""){ 
```

正确的语法`val()`不是`va()`

[http://jsfiddle.net/knoxzin1/Jg8jT/20/](http://jsfiddle.net/knoxzin1/Jg8jT/20/)

----------------------- 已编辑 -------------- -------------

[http://jsfiddle.net/knoxzin1/Jg8jT/29/](http://jsfiddle.net/knoxzin1/Jg8jT/29/)

现在按照OP的要求工作

# javascript - Sticky footer hack 快到了，有什么提示可以让我更接近吗？

> ID：15482747
> 
> 赞同：0
> 
> 时间：2013-03-18T17:10:15.120
> 
> 标签：javascript, html, css, sticky-footer

这是网站：[http ://www.square1cards.com/](http://www.square1cards.com/)

我正在尝试使用粘性页脚来改进响应式设计，因此我们不兼容的许多 CSS 选项和固定选项也确实不能满足。

由于我的顶部内容（用于主页）是固定高度，因此通过 javascript，我尝试简单地将顶部边距更改为窗口高度与该固定值之间的差值（当窗口高度大于固定值时）。粗暴的黑客攻击。

如果您慢慢调整浏览器高度，它可以正常工作，但是当您快速调整高度时，它会导致页脚稍微跳出屏幕。如果我能解决这个问题，我应该没问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:14:13.510

我发现 Matthew James Taylor 的教程非常有用。它只使用 HTML 和 CSS 对我有用。我强烈推荐这种方法而不是使用 JavaScript。

[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T21:52:21.023

我不确定您到底想要实现什么，但我将在[本教程](http://conijnwebdesign.nl/tutorials/how-to-get-100-height-css.php)中介绍所有已知的粘页脚技术，或者人们（有时错误地）称之为粘页脚的技术。让我们知道它是否对您有帮助。

# matlab - 找到通过矩阵的最小和路径

> ID：15482750
> 
> 赞同：-1
> 
> 时间：2013-03-18T17:10:19.063
> 
> 标签：matlab

我有一个数据矩阵 X ，其中行是时间戳，列是测量值。我可以通过以下方式轻松找到通过矩阵的最低总和路径：

```
[r c]=size(X)
for w=1:r
Y(w)=min(X(w,:))
end

result = sum(Y) 
```

这很有用，但真正有用的是如果有一个函数可以告诉我指定频率的不同路径。例如，如果我将 2 行组合在一起，这会使频率减半……如果有一个函数可以找到我在指定容差下具有不同频率的不同路径，那么对它们进行排名，这将是完美的！

有很多问题要问，但必须有一个统计或数学工具可以做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:17:45.143

不确定我是否完全理解这个问题，但如果我读到你想要的内容，这应该可以解决固定频率的问题：

```
frequency = 2;
r = size(X,1);
Y = zeros(r,1);
for w=1:frequency:r
Y(w)=min(min(X(w:w+frequency-1,:)))
end

result = sum(Y) 
```

您可以遍历频率以找到每个频率的最佳路径长度。

请注意，找到具有不同频率的最佳路径（例如，首先是 2，然后是 3，然后是 2）将是一个完全不同的问题。我认为这要复杂得多，您可能想研究线性规划。

# mongodb - 使用 pymongo 和自定义 _id 字段进行更新

> ID：15482751
> 
> 赞同：2
> 
> 时间：2013-03-18T17:10:24.810
> 
> 标签：mongodb, pymongo

我正在尝试根据[本文档](http://docs.mongodb.org/manual/use-cases/pre-aggregated-reports/)将预先汇总的性能指标存储在分片 mongodb 中。

我正在尝试使用这样的 upsert 更新可能存在或不存在的记录中的分钟子文档（`self.collection`是 pymongo 集合实例）：

```
self.collection.update(query, data, upsert=True) 
```

询问：

```
{   '_id': u'12345CHA-2RU020130304',
    'metadata': {   'adaptor_id': 'CHA-2RU',
                    'array_serial': 12345,
                    'date': datetime.datetime(2013, 3, 4, 0, 0, tzinfo=<UTC>),
                    'processor_id': 0}
} 
```

数据：

```
{   'minute': {   '16': {   '45': 1.6693091}}} 
```

问题在于，在这种情况下，“分钟”子文档始终只有最后一个`hour: { minute: metric}`条目，分钟子文档不会为其他时间创建新条目，它总是覆盖一个条目。

我也尝试过使用 $set 样式的数据输入：

```
{ '$set': {   'minute': {   '16': {   '45': 1.6693091}}}} 
```

但它最终是一样的。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T21:07:45.113

我最终设置了这样的字段：

询问：

```
{   '_id': u'12345CHA-2RU020130304',
    'metadata': {   'adaptor_id': 'CHA-2RU',
                    'array_serial': 12345,
                    'date': datetime.datetime(2013, 3, 4, 0, 0, tzinfo=<UTC>),
                    'processor_id': 0}
} 
```

我正在设置这样的指标：

```
data = {"$set": {}}

for metric in csv:
  date_utc = metric['date'].astimezone(pytz.utc)
  data["$set"]["minute.%d.%d" % (date_utc.hour,
                                date_utc.minute)] = float(metric['metric']) 
```

它创建这样的数据：

```
{"$set": {'minute.16.45': 1.6693091,
          'minute.16.46': 1.566343,
          'minute.16.47': 1.22322}} 
```

这样在`self.collection.update(query, data, upsert=True)`运行时它会更新这些字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T23:33:31.890

在列出的两个示例中，您只是将字段 ( `'minute'`) 设置为特定值，它是第一次更新时添加的唯一原因是因为字段本身不存在，因此必须创建。

很难确定你在这里拍摄的确切目标，但我认为你可以做的是稍微改变你的模式，这样它`'minute'`就是一个数组。然后，您可以使用[`$push`](http://docs.mongodb.org/manual/reference/operator/push/)添加值，无论它们是否已经存在或者[`$addToSet`](http://docs.mongodb.org/manual/reference/operator/addToSet/)您不想重复。

我不得不稍微修改您的文档以使其在 shell 中有效，因此我的`_id`（和其他一些字段）与您的略有不同，但它仍然应该足够接近以进行说明：

```
db.foo.find({'_id': 'u12345CHA-2RU020130304'}).pretty()
{
        "_id" : "u12345CHA-2RU020130304",
        "metadata" : {
                "adaptor_id" : "CHA-2RU",
                "array_serial" : 12345,
                "date" : ISODate("2013-03-18T23:28:50.660Z"),
                "processor_id" : 0
        }
} 
```

现在让我们添加一个`minute`包含文档数组而不是单个文档的字段：

```
db.foo.update({'_id': 'u12345CHA-2RU020130304'}, { $addToSet : {'minute': { '16': {'45': 1.6693091}}}})
db.foo.find({'_id': 'u12345CHA-2RU020130304'}).pretty()
{
        "_id" : "u12345CHA-2RU020130304",
        "metadata" : {
                "adaptor_id" : "CHA-2RU",
                "array_serial" : 12345,
                "date" : ISODate("2013-03-18T23:28:50.660Z"),
                "processor_id" : 0
        },
        "minute" : [
                {
                        "16" : {
                                "45" : 1.6693091
                        }
                }
        ]
} 
```

然后，为了说明添加，添加一个稍微不同的条目（因为我正在使用`$addToSet`这是添加新字段所必需的：

```
db.foo.update({'_id': 'u12345CHA-2RU020130304'}, { $addToSet : {'minute': { '17': {'48': 1.6693391}}}})
db.foo.find({'_id': 'u12345CHA-2RU020130304'}).pretty()
{
        "_id" : "u12345CHA-2RU020130304",
        "metadata" : {
                "adaptor_id" : "CHA-2RU",
                "array_serial" : 12345,
                "date" : ISODate("2013-03-18T23:28:50.660Z"),
                "processor_id" : 0
        },
        "minute" : [
                {
                        "16" : {
                                "45" : 1.6693091
                        }
                },
                {
                        "17" : {
                                "48" : 1.6693391
                        }
                }
        ]
} 
```

# elasticsearch - 这些数字在 ElasticSearch 头中意味着什么？

> ID：15482752
> 
> 赞同：22
> 
> 时间：2013-03-18T17:10:27.170
> 
> 标签：elasticsearch

在我的 ElasticSearch head 的 Overview 选项卡中，它显示以下内容：

库存大小：2.2gb (2.2gb) 文档：1062049 (1598589)

有人能告诉我 2 个文档编号 1062049 和 1598589 是什么意思吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T18:24:03.517

第一个数字是`num_docs`，第二个数字是`max_docs`。两者均由[Index Status API提供](http://www.elasticsearch.org/guide/reference/api/admin-indices-status.html)

*   `num_docs`很简单：它是此时存在于索引中的文档数
*   `max_docs`有点模糊，我相信这是您的索引在合并删除已删除文档之前看到的最大文档。它还包括嵌套文档，这些文档在内部是一个新文档，但对最终用户显示为单个文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-11T05:29:53.440

不带括号的值向我们显示**了主分片大小的总和**。

括号内的值显示我们**主分片大小的总和 + 副本分片大小的总和**。

在您的情况下，您只有 1 个主分片和 0 个副本分片。因此，它显示索引大小为 2.2 GB (2.2 GB)。

***文档计数遵循类似的约定。***

我希望这有帮助。

# nagios - xinetd 不加载 /etc/profile.d 中设置的环境变量

> ID：15482753
> 
> 赞同：1
> 
> 时间：2013-03-18T17:10:27.280
> 
> 标签：nagios, xinetd

我`xinetd`用来提供`check_mk_agent`. 我有自定义 check_mk_agent 脚本，其中一些配置了环境变量。这些环境变量设置在`/etc/profile.d/set_env.sh`. 当我`check_mk_agent`手动运行时，找到了环境变量，并且自定义检查成功。当我这样做`telnet myhost 6556`时，找不到环境变量，并且自定义检查失败。

我的问题是，什么是确保`set_env.sh`在 xinetd 上下文中运行的好方法？我宁愿不在 xinetd 配置中使用`env`和`passenv`变量，因为在同一主机上的多个位置不必要地维护环境变量会很烦人。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:00:09.510

编辑文件 check_mk_agent 文件，并在 #!/bin/bash 之后添加流线：

```
source /etc/profile.d/set_env.sh 
```

保存它，然后重试。

# javascript - 将基于类的样式更改为内联样式

> ID：15482755
> 
> 赞同：3
> 
> 时间：2013-03-18T17:10:28.747
> 
> 标签：javascript, jquery, html, css

是否有可用的服务将基于类的样式更改为内联样式。我需要设计一封电子邮件，并且使用类更容易和更快，但是最后必须将所有内容更改为内联样式。似乎应该有一个程序可以做到这一点，但我似乎找不到任何东西。

```
 <table class="g">
    <tr>
        <td>
            <p>
                content should be bright green
            </p>
            <span>
                content should be red and bold
            </span>
        </td>
    </tr>
</table>
<style>
table.g p{
    color:#3f0;
}
table.g span{
    color:#f00;
    font-weight:bold;
}
</style> 
```

这可以自动更改为

```
<table>
    <tr>
        <td>
          <p style="color:#3f0;">
                content should be bright green
            </p>
            <span style="color:#f00;font-weight:bold;">
                 content should be red and bold
            </span>
        </td>
    </tr>
</table> 
```

使用某种了解 CSS 规则如何应用并可以自动转换它们的软件？

*用javascript和jquery标记，以防有办法使用它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T17:12:53.650

*   网页应用：
    *   [http://beaker.mailchimp.com/inline-css](http://beaker.mailchimp.com/inline-css)
*   Python：
    *   [https://github.com/davecranwell/inline-styler](https://github.com/davecranwell/inline-styler)
    *   [https://github.com/rennat/pynliner](https://github.com/rennat/pynliner)
    *   [https://github.com/peterbe/premailer](https://github.com/peterbe/premailer)（它将相对路径更改为绝对路径）
*   PHP：
    *   [https://github.com/tijsverkoyen/CssToInlineStyles](https://github.com/tijsverkoyen/CssToInlineStyles)
    *   [https://github.com/christiaan/InlineStyle](https://github.com/christiaan/InlineStyle)（允许使用外部 CSS 样式表）
*   红宝石：
    *   [https://github.com/maca/inline-style](https://github.com/maca/inline-style)
    *   [https://github.com/purify/mail_style](https://github.com/purify/mail_style)（更正img标签中的src attr）
*   JavaScript：
    *   [https://github.com/LearnBoost/juice](https://github.com/LearnBoost/juice)
    *   [https://npmjs.org/package/grunt-email-builder](https://npmjs.org/package/grunt-email-builder)（Grunt.js 插件）
    *   [https://github.com/jonkemp/gulp-inline-css（Gulp](https://github.com/jonkemp/gulp-inline-css)插件）
*   C＃
    *   [https://github.com/milkshakesoftware/PreMailer.Net](https://github.com/milkshakesoftware/PreMailer.Net)

# vim - 没有 vimwiki 的 vimwiki 样式链接？

> ID：15482757
> 
> 赞同：4
> 
> 时间：2013-03-18T17:10:32.843
> 
> 标签：vim, hyperlink, vim-plugin

我最喜欢 vimwiki 的功能之一是它处理链接的方式。不幸的是，我使用其他东西（vimoutliner）作为我的主要笔记，它没有任何地方接近 vimwiki 的链接功能。

是否有一个插件可以在编辑任意文件时添加 vimwiki 的链接功能（或至少类似的功能），而不仅仅是 *.wiki 文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T18:39:18.240

我认为您可以为您的简单用例编写一个，例如：

```
function! LinkForward()
    let g:fromFile=expand('%:p')
    let fn= substitute(getline('.'),'^.*\[\[\([^\]]*\)\].*$',"\\1",'g')
    execute "e ".fn
endfunction

nnoremap <cr> :call LinkForward()<cr>

function! LinkBackward()
    execute "e ".g:fromFile
endf

nnoremap <bs> :call LinkBackward()<cr> 
```

source 这将执行一些类似的操作，例如按下`Enter`将`[[path/to/file/foo]]foo`转到该`foo`文件，并且在该文件中按下`<Backspace>`将使您返回。

请注意**，上面的代码只是示例，它不会完美运行**。你可以让它更好地工作，例如：

*   添加一个列表/（堆栈）来存储文件跳转历史。
*   定义这种操作仅适用于某些文件类型
*   检查光标下的行是否不匹配`[[...]]`然后正常`<Enter>`
*   等等..如果您愿意，可以查看 vimwiki 的代码并“借用”一些片段供您个人使用。

希望它对你有帮助.. 祝你好运。

# jquery - jquery向li添加元素不起作用

> ID：15482758
> 
> 赞同：2
> 
> 时间：2013-03-18T17:10:35.367
> 
> 标签：jquery, html, onclick, jquery-click-event

大家好

我在`<li>`从 jquery 添加元素时遇到问题，

这是我的jQuery代码

```
$(".div1").on('click','li',function(){
        var phonenumber = $(this).text();
        $("#phones ul").append("<li>"+phonenumber+"</li>");
    }); 
```

但是当点击`div1`什么也没发生，请问我做错了什么？

### 笔记

当我改变时，`phonenumber`我得到了我需要的信息。

### 编辑

```
 <div class="div1">
<li>press here to show your phone number</li>    
<div id="phones">
<ul>

</ul>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:23:36.910

我想你所遭受的不是把你的代码放在`$(document).ready()`方法中。

将您的 jQuery 代码更改为如下所示：

```
$(document).ready(function () {
    $(".div1").on('click', 'li', function () {
        var phonenumber = $(this).text();
        $("#phones ul").append("<li>" + phonenumber + "</li>");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:26:22.647

你的 HTML 应该是这样的：

```
<div class="div1">press here to show your phone number</div>
<ul id="phones">
</ul> 
```

然后你可以这样做：

```
$(".div1").on('click', function(){
    var phonenumber = $(this).text();
    $("#phones").append("<li>" + phonenumber + "</li>");
}); 
```

# java - Egit 的哪个 Eclipse 版本？

> ID：15482760
> 
> 赞同：0
> 
> 时间：2013-03-18T17:10:39.333
> 
> 标签：java, eclipse, egit

我有`Eclipse IDE for C/C++ Developers Version: Juno Release`并且我使用`Egit`的`.jsp` `.ejs` `.sql`文件有我无法用当前版本打开的文件（与`.java`在 Eclipse 编辑器中双击打开的文件不同）。

我与`windows 7`.

我需要哪个 eclipse 版本或任何扩展工具来打开它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:14:58.797

您可以右键单击文件并选择打开方式...> 其他 > 内部编辑器，然后选择文本编辑器打开任何文件。

# file - 解析文件以获取matlab中的数组数组

> ID：15482761
> 
> 赞同：0
> 
> 时间：2013-03-18T17:10:41.163
> 
> 标签：file, matlab, parsing

我需要在 Matlab 中解析一个 .txt 文件，以便文件的所有行都是数组中的不同元素。数组的每个元素也将是一个整数数组。所以我需要从 .txt 文件中创建一个数组数组。

我遇到的问题是我无法弄清楚使用哪个函数来解析文件。如果我使用 importdata(filename)，它只会解析文件的第一行。如果我使用 textscan，它会以列的形式解析文件，并且文件的格式如下：

```
1 1 1 1 1
13 13 13 13 13

2 2 2 2 2
14 14 14 14 14 
```

我需要每一行都是一个数组，然后我可以用它来比较我的数据。

是否有任何一种功能可以满足我的目的？我试过查看 MATLAB 文档，但无法理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:43:40.480

如果每个数组需要不同的大小，则需要使用元胞数组来包含它们。像这样的东西：

```
fid = fopen('test.txt'); %opens the file
tline = fgets(fid); % reads in the first line
data = {}; % creates an empty cell array
index = 1; % initializes index
while ischar(tline) % loops while the line that has just been read contains characters, that is, the end of the file has not been reached.  
    data{index} = str2num(tline); % converts the line that has just been read in to a string and assigns it to the current column of data
    tline = fgets(fid); % reads in the next line 
    index = index + 1; % increments index
end

fclose(fid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:44:28.963

如果您知道您的数据将具有 5 个数字后跟一个数字的特定格式，您可以使用 dlmread 然后格式化生成的矩阵。

```
data = dlmread('data.txt',' ');
multipleValueRows = data(1:2:end,:);
singleValueRows = data(2:2:end,1); 
```

数据矩阵的大小（文件的行数）x 5 列。在只有一个数字的行中，数据矩阵将在第 2-5 列中包含零。

# reporting - 您将如何处理基于 RavenDB 文档数据的聚合/报告场景？

> ID：15482762
> 
> 赞同：1
> 
> 时间：2013-03-18T17:10:46.167
> 
> 标签：reporting, ravendb, aggregation

我们使用 RavenDB (2261) 作为基于队列的视频上传系统的后端，并且我们被要求提供有关上传系统的各种指标的“实时”SLA 报告。

文档格式如下所示：

```
{
  "ClipGuid": "01234567-1234-abcd-efef-123412341234",
  "CustomerId": "ABC123",
  "Title": "Shakespeare in Love",
  "DurationInSeconds": 82,
  "StateChanges": [
    {
      "OldState": "DoesNotExist",
      "NewState": "ReceivedFromUpload",
      "ChangedAt": "2013-03-15T15:38:38.7050002Z"
    },
    {
      "OldState": "ReceivedFromUpload",
      "NewState": "Validating",
      "ChangedAt": "2013-03-15T15:38:38.8453975Z"
    },
    {
      "OldState": "Validating",
      "NewState": "AwaitingSubmission",
      "ChangedAt": "2013-03-15T15:38:39.9529762Z"
    },
    {
      "OldState": "AwaitingSubmission",
      "NewState": "Submitted",
      "ChangedAt": "2013-03-15T15:38:43.4785084Z"
    },
    {
      "OldState": "Submitted",
      "NewState": "Playable",
      "ChangedAt": "2013-03-15T15:41:39.5523223Z"
    }
  ],
} 
```

在每个 ClipInfo 记录中，每次剪辑从处理链的一个部分传递到另一个部分时，都会添加一组 StateChanges。我们需要做的是将这些 StateChanges 减少到两个特定的时间跨度——我们需要知道剪辑从 DoesNotExist 变为 AwaitingSubmission 需要多长时间，以及从 DoesNotExist 变为 Playable 需要多长时间。然后我们需要按日期/时间对这些持续时间进行分组，这样我们就可以绘制一个简单的 SLA 报告，如下所示：

![Mockup video upload SLA](../Images/d43ade806fc6a6cb08625638d0c326bb.png)

The necessary predicates can be expressed as LINQ statements but when I try specifying this sort of complex logic within a Raven query I just seem to get back empty results (or lots of DateTime.MinValue results)

I realise document databases like Raven aren't ideal for reporting - and we're happy to explore replication into SQL or some other sort of caching mechanism - but at the moment I just can't see any way of extracting the data other than doing multiple queries to retrieve the entire contents of the store and then performing the calculations in .NET.

Any recommendations?

Thanks,

Dylan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:25:58.443

I have made some assumptions which you may need to adjust for:

*   You operate strictly in the UTC time zone - your "day" is midnight to midnight UTC.
*   Your week is Sunday through Saturday
*   The date you want to group by is the first status date reported (the one marked with "DoesNotExist" as its old state.)

You will need a separate map/reduce index per date bracket that you are grouping on - Daily, Weekly, Monthly.

They are almost identical, except for how the starting date is defined. If you want to get creative, you might be able to come up with a way to make these into a generic index definition - but they will *always* end up being three separate indexes in RavenDB.

```
// This is the resulting class that all of these indexes will return
public class ClipStats
{
    public int CountClips { get; set; }
    public int NumPassedWithinTwentyPct { get; set; }
    public int NumPlayableWithinOneHour { get; set; }
    public DateTime Starting { get; set; }
}

public class ClipStats_ByDay : AbstractIndexCreationTask<ClipInfo, ClipStats>
{
    public ClipStats_ByDay()
    {
        Map = clips => from clip in clips
                        let state1 = clip.StateChanges.FirstOrDefault(x => x.OldState == "DoesNotExist")
                        let state2 = clip.StateChanges.FirstOrDefault(x => x.NewState == "AwaitingSubmission")
                        let state3 = clip.StateChanges.FirstOrDefault(x => x.NewState == "Playable")
                        let time1 = state2.ChangedAt - state1.ChangedAt
                        let time2 = state3.ChangedAt - state1.ChangedAt
                        select new
                        {
                            CountClips = 1,
                            NumPassedWithinTwentyPct = time1.TotalSeconds < clip.DurationInSeconds * 0.2 ? 1 : 0,
                            NumPlayableWithinOneHour = time2.TotalHours < 1 ? 1 : 0,
                            Starting = state1.ChangedAt.Date
                        };

        Reduce = results => from result in results
                            group result by result.Starting
                            into g
                            select new
                            {
                                CountClips = g.Sum(x => x.CountClips),
                                NumPassedWithinTwentyPct = g.Sum(x => x.NumPassedWithinTwentyPct),
                                NumPlayableWithinOneHour = g.Sum(x => x.NumPlayableWithinOneHour),
                                Starting = g.Key
                            };
    }
}

public class ClipStats_ByWeek : AbstractIndexCreationTask<ClipInfo, ClipStats>
{
    public ClipStats_ByWeek()
    {
        Map = clips => from clip in clips
                        let state1 = clip.StateChanges.FirstOrDefault(x => x.OldState == "DoesNotExist")
                        let state2 = clip.StateChanges.FirstOrDefault(x => x.NewState == "AwaitingSubmission")
                        let state3 = clip.StateChanges.FirstOrDefault(x => x.NewState == "Playable")
                        let time1 = state2.ChangedAt - state1.ChangedAt
                        let time2 = state3.ChangedAt - state1.ChangedAt
                        select new
                        {
                            CountClips = 1,
                            NumPassedWithinTwentyPct = time1.TotalSeconds < clip.DurationInSeconds * 0.2 ? 1 : 0,
                            NumPlayableWithinOneHour = time2.TotalHours < 1 ? 1 : 0,
                            Starting = state1.ChangedAt.Date.AddDays(0 - (int) state1.ChangedAt.Date.DayOfWeek)
                        };

        Reduce = results => from result in results
                            group result by result.Starting
                            into g
                            select new
                            {
                                CountClips = g.Sum(x => x.CountClips),
                                NumPassedWithinTwentyPct = g.Sum(x => x.NumPassedWithinTwentyPct),
                                NumPlayableWithinOneHour = g.Sum(x => x.NumPlayableWithinOneHour),
                                Starting = g.Key
                            };
    }
}

public class ClipStats_ByMonth : AbstractIndexCreationTask<ClipInfo, ClipStats>
{
    public ClipStats_ByMonth()
    {
        Map = clips => from clip in clips
                        let state1 = clip.StateChanges.FirstOrDefault(x => x.OldState == "DoesNotExist")
                        let state2 = clip.StateChanges.FirstOrDefault(x => x.NewState == "AwaitingSubmission")
                        let state3 = clip.StateChanges.FirstOrDefault(x => x.NewState == "Playable")
                        let time1 = state2.ChangedAt - state1.ChangedAt
                        let time2 = state3.ChangedAt - state1.ChangedAt
                        select new
                        {
                            CountClips = 1,
                            NumPassedWithinTwentyPct = time1.TotalSeconds < clip.DurationInSeconds * 0.2 ? 1 : 0,
                            NumPlayableWithinOneHour = time2.TotalHours < 1 ? 1 : 0,
                            Starting = state1.ChangedAt.Date.AddDays(1 - state1.ChangedAt.Date.Day)
                        };

        Reduce = results => from result in results
                            group result by result.Starting
                            into g
                            select new
                            {
                                CountClips = g.Sum(x => x.CountClips),
                                NumPassedWithinTwentyPct = g.Sum(x => x.NumPassedWithinTwentyPct),
                                NumPlayableWithinOneHour = g.Sum(x => x.NumPlayableWithinOneHour),
                                Starting = g.Key
                            };
    }
} 
```

Then when you want to query...

```
var now = DateTime.UtcNow;

var today = now.Date;
var dailyStats = session.Query<ClipStats, ClipStats_ByDay>()
                        .FirstOrDefault(x => x.Starting == today);

var startOfWeek = today.AddDays(0 - (int) today.DayOfWeek);
var weeklyStats = session.Query<ClipStats, ClipStats_ByWeek>()
                         .FirstOrDefault(x => x.Starting == startOfWeek);

var startOfMonth = today.AddDays(1 - today.Day);
var monthlyStats = session.Query<ClipStats, ClipStats_ByMonth>()
                          .FirstOrDefault(x => x.Starting == startOfMonth); 
```

In the results, you will have *totals*. So if you want percent averages for your SLA, simply divide the statistic by the count, which is also returned.

# python - 使用opencv和python的人脸检测精度

> ID：15482763
> 
> 赞同：2
> 
> 时间：2013-03-18T17:10:49.923
> 
> 标签：python, opencv

我最近开始学习opencv并编写了一个程序来检测python图像中的人脸并将所有检测到的人脸保存为单独的图像。它适用于某些图像，但无法检测到许多图像中的所有面孔。

[它甚至在这个（ http://imgur.com/HUh3tIK](http://imgur.com/HUh3tIK)）简单图像中也失败了。它只检测右脸而不检测左脸。请帮助如何纠正这个以提高准确性？

```
import cv2.cv as cv
import string
im = cv.LoadImageM("D:\Test\Dia.jpg")
storage = cv.CreateMemStorage()
haar=cv.Load("C:\opencv\data\haarcascades\haarcascade_frontalface_default.xml")
detected = cv.HaarDetectObjects(im, haar, storage, 1.1, 2,cv.CV_HAAR_DO_CANNY_PRUNING,(10,10))
i = 0
if detected:
    for face in detected:
        i = i + 1
        xx = face[0][0]
        yy = face[0][1]
        width = face[0][2]
        height = face[0][3]

        pankaj12 = (width,height)
        cvIm = cv.LoadImage("D:\Test\Dia.jpg")

        cropped = cv.CreateImage(pankaj12,cvIm.depth, cvIm.nChannels)
        src_region = cv.GetSubRect(cvIm, face[0])
        cv.Copy(src_region, cropped)
        cv.SaveImage("D:\Test\Pankaj"+str(i)+".jpg",cropped)

input("Press Enter to continue...") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T21:49:29.347

通过使用 OpenCV 提供的不同 haarcascades 分类器多次运行该算法，然后结合结果，我获得了更好的运气。

在实践中，如果两个分类器找到相似的结果，您可以将它们组合起来，并为组合结果赋予更高的分值。

为了进一步改进检测，您还可以使用分类器来检测眼睛、鼻子和嘴巴。如果您在检测到的人脸中找到这些人脸，您还可以为这些人脸添加更多价值。

在此过程中，您可以获得带有分值的检测到的人脸列表。分数越高，检测越有可能是正确的。

希望这可能会有所帮助。

# python - Scipy.Spatial.KDTree.query - 大型数据集问题

> ID：15482767
> 
> 赞同：0
> 
> 时间：2013-03-18T17:10:53.210
> 
> 标签：python, scipy, spatial, kdtree

我正在使用 SciPy.Spatial 中的[KDQuery](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.KDTree.query.html)函数。一旦我的数据量变得非常大，我就会遇到问题。我意识到该算法不一定设计为对大型数据集有效，但它似乎（从源头）大小应该只增加处理时间，而不是影响输出。

这是一个代码片段：

```
sizes = [ 10**i for i in range(5,6) ] #10^5 for this test
data = np.random.random_integers(0,100,(sizes[-1],2))
for size in sizes:
    kd = ps.common.KDTree(data)
    nnq = kd.query(data,k=2+1, p=2)
    info = nnq[1] #This is the indices of the neighbors
    neighbors = {}
    idset = np.arange(len(info)) #Indices of the input point
    for i, row in enumerate(info):
        row = row.tolist()
        row.remove(i)
        neighbors[idset[i]] = list(row) 
```

当 i 不在列表中时，这将返回一个值错误（ValueError list.remove(x): x not in list）。对于小于 10^5 的数据大小，此代码按预期工作。

错误的一个潜在原因是已达到递归限制。为了探索这一点，我将递归深度设置为 1,000,000 ( `sys.setrecursionlimit(1000000)`)。这并不能缓解问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:43:51.500

错误发生在您的代码中的语句中`row.remove(i)`。问题是你的随机数据集可能有重复的点，有时同一个点可以重复三遍以上。当数据集很大时，这很可能发生。发生这种情况时，一个点的三个最近邻居可能不包括该点本身。这会导致`row.remove(i)`.

# ruby-on-rails - 在 find 方法中混合 :select 和 :include (Rails 2)

> ID：15482768
> 
> 赞同：0
> 
> 时间：2013-03-18T17:10:53.690
> 
> 标签：ruby-on-rails, ruby, include, find, ruby-on-rails-2

我有 2 个模型，`User`并且`UserProfile`. 一个`user`has_one user_profile 和一个`user_profile`belongs_to 用户。

**1）不选择查找**

控制台中的这个查询工作正常，只需要 2 个 SQL 查询。

```
>> User.find(:all, :limit => 10, :include => [ :user_profile ]) 
```

```
User Load (0.3ms)   SELECT * FROM `users` LIMIT 10
UserProfile Load (0.3ms)   SELECT `user_profiles`.* FROM `user_profiles`
      WHERE (`user_profiles`.user_id IN (1,2,3,...)) 
```

**`user`2）在模型上使用选择查找**

我可以从`User`模型中选择列，使用

```
>> User.find(:all, :select => '`users`.id, `users`.last_name',
     :limit => 10, :include => [ :user_profile ]) 
```

```
User Load (0.3ms)   SELECT `users`.id, `users`.last_name FROM `users` LIMIT 10
UserProfile Load (0.2ms)   SELECT `user_profiles`.* FROM `user_profiles`
      WHERE (`user_profiles`.user_id IN (17510,18087,17508,17288...)) 
```

一切正常。请注意，我必须`users.id`在用户选择的列中进行设置，因为第二个查询不起作用（返回 NULL）。

**`user_profile`3) 在模型上使用 select 查找**

但是当我尝试从`UserProfile`模型中选择列时，我只得到了 1 个查询，这不关心我的`:select`

```
>> User.find(:all,
     :select => '`users`.id, `users`.last_name, `user_profiles`.permalink',
     :limit => 10, :include => [ :user_profile ]) 
```

```
User Load Including Associations (0.6ms) SELECT `users`.`id` AS t0_r0,
  `users`.`login` AS t0_r1, ....
  `user_profiles`.`id` AS t1_r0,
  `user_profiles`.`birth_date` AS t1_r1,
  LEFT OUTER JOIN `user_profiles` ON user_profiles.user_id = users.id LIMIT 10 
```

如您所见，Rails 查询包含来自用户的字段和来自我未选择的 user_profiles 的字段。

**4) 加入方式**

Codeit 目的是一种具有`join`功能的方法：

```
user_details = User.find(:all,
   :select => '`users`.id, `users`.last_name, `user_profiles`.permalink',
   :limit => 10, :joins => [ :user_profile ]
) 
```

```
User Load (0.2ms) SELECT `users`.id, `users`.last_name, `user_profiles`.permalink
   FROM `users`
   INNER JOIN `user_profiles` ON user_profiles.user_id = users.id
   LIMIT 10 
```

此解决方案适用于 SQL 查询，但不会在用户和用户配置文件之间建立“链接”。需要 10 个新查询，而方法 1 和 2 只进行 2 个 SQL 查询。

```
 user_details.map(&:user_profile).map(&:permalink)
 UserProfile Load (0.3ms)   SELECT * FROM `user_profiles` WHERE (`user_profiles`.user_id = 1) LIMIT 1
 UserProfile Load (0.2ms)   SELECT * FROM `user_profiles` WHERE (`user_profiles`.user_id = 2) LIMIT 1
 ... (10 times) ...
 UserProfile Load (0.3ms)   SELECT * FROM `user_profiles` WHERE (`user_profiles`.user_id = 10) LIMIT 1 
```

是否有正确的语法可以得到与前 2 个查询相同的结果，但是`:select`女巫只选择我的模型的几列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:25:55.127

使用`join`：

```
User.find(:all,
 :select => '`users`.id, `users`.last_name, `user_profiles`.permalink',
 :limit => 10, :joins => [ :user_profile ]) 
```

`include`用于`eager loading`. 它用于解决`(N+1)`访问 user_profile 时的查询`users`问题`user_profile`。如果要选择`columns`包含的表，则需要使用`join`. 如果您使用包含表的列，它将只是从`select`子句中忽略。

**编辑：**

```
user_details = User.find(:all,
   :select => '`users`.id, `users`.last_name, `user_profiles`.permalink',
   :limit => 10, :joins => [ :user_profile ]
 )

user_details.map(&:permalink) 
```

# python - 如何在python（Django）中根据日期时间范围过滤对象

> ID：15482775
> 
> 赞同：1
> 
> 时间：2013-03-18T17:11:10.660
> 
> 标签：python, django, datetime, filtering

我正在尝试创建一个包含所有最新帖子的页面。

```
class Post(models.Model):
     title = models.CharField(max_length=40)
     postTime = models.DateTimeField(auto_now_add=True) 
```

我找到了这个例子：

```
 start_date = datetime.date(2005, 1, 1)
 end_date = datetime.date(2005, 3, 31)
 Post.objects.filter(postTime__range=(start_date, end_date)) 
```

我知道我想使用 __range 函数。但是我怎样才能做到这一点，以便我可以得到从**今天到两周前的所有帖子**

**像这样的东西：**

```
start_date = datetime.date(date from two weeks ago)
end_date = datetime.date(currentdate)
Post.objects.filter(postTime__range(start_date, end_date)) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:12:54.167

```
start_date = end_date - datetime.timedelta(days=14) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:13:03.667

```
from datetime import date, timedelta

Post.objects.filter(postTime__range=(date.today(), date.today() - timedelta(days=14))) 
```

# php - Jquery序列化并传入其他自定义帖子数据

> ID：15482777
> 
> 赞同：1
> 
> 时间：2013-03-18T17:11:12.033
> 
> 标签：php, javascript, jquery, ajax, post

```
function DoAjax( args )
{
    var formData = "?" + $("form[name=" + args.formName + "]").serialize();

    $.ajax({
        type: "POST",
        url: args.url + formData,
        data: {
            request: args.request
        },
        success: function (data) {
            alert(data);
            args.callback.html(data);
        },
        error: function (a, b, c) {
            alert("error: " + a + ", " + b + ", " + c + ".");
        }
    });

    return false;       
} 
```

我需要将一个自定义数据位传递给我的名为“request”的 php 脚本，它表示要在 php 页面上运行哪个进程……但我还想序列化表单上的任何其他表单字段。这是正确的做法吗（将序列化添加到 URL 的末尾）因为我似乎无法从我的 PHP $_POST["whatever"]

编辑：：：///

```
<?php                                 
    $request = $_POST[ "request" ];   

    if( isset( $request ) )
    {
        require_once( "includes.php" );

        function LogInWithClientCred()
        {
            $username = CheckIsset( "username" );
            $password = CheckIsset( "password" );

            echo $_REQUEST["username"];
            echo $_GET["username"]; // echos correctly the username.. but I want it to be post data instead! 
```

请忽略安全性，这是为了您的目的而伪造的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:43:32.223

将您的附加数据组合`formData`成一个字符串。

```
var formData =  $("form[name=" + args.formName + "]").serialize() + "&request=" + args.request;

$.ajax({
    url: args.url,
    data: formData,
    type: "POST",
    ...
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:17:35.480

我不太确定我是否很好地解决了你的问题，但我认为你正在将表单数据附加到 URL 并在 ajax 中使用 POST。

你能试一下吗

$_REQUEST["whatever"] 看看你得到了什么

**编辑** 看到commnets后，我想我现在明白了

```
 function DoAjax( args )
{
    var formData =  $("form[name=" + args.formName + "]").serialize();

    $.ajax({
        type: "POST",
        url: args.url,
        data: {
            request: args.request,
        formData:formData
        },
        success: function (data) {
            alert(data);
            args.callback.html(data);
        },
        error: function (a, b, c) {
            alert("error: " + a + ", " + b + ", " + c + ".");
        }
    });

    return false;       
} 
```

现在 $_POST[formData] 应该可以工作了

**编辑** 也看到这个

github.com/maxatwork/form2js

# asp.net - Panel Enabled 属性未传播

> ID：15482779
> 
> 赞同：1
> 
> 时间：2013-03-18T17:11:18.317
> 
> 标签：asp.net

我正在我的公司开发一个 ASP .Net Web 应用程序。
该应用程序包含一个复合用户控件，由一个复选框、几个面板和其他控件组成。

一个面板包含多个子控件，尤其是自定义服务器控件。
自定义服务器控件继承自 TextBox。

选中或取消选中复选框时执行处理程序。
处理程序中的一条语句将面板的 Enabled 属性设置为 false。
但是自定义服务器控件的 Enabled 属性在 PreRender 中等于 true。
为什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:25:07.883

我公司中有几年 ASP .Net 编程经验的人告诉我，以下行为是正常的：
当设置了 Panel 的 Enabled 属性时，该设置不会传播到子控件。

# c# - Windows Phone 7 上的 Bing Api（数据服务客户端）

> ID：15482792
> 
> 赞同：1
> 
> 时间：2013-03-18T17:12:11.037
> 
> 标签：c#, api, windows-phone-7, bing, bing-api

首先对我致命的英语感到抱歉。

我在 Windows Phone 7 上遇到了 Bing Search Api 的问题。我从 Bing.com/Developers 添加了 BingSearchContainer.cs 文件，但它需要参考 System.Data.Service.Client。我找到了两个 .dll 文件。首先几乎很好，但是 DataServiceContext 类（它是来自 bing.com 的这个文件中的 BingSearchContainer 类的基类）没有 Credentials 属性。所以我在搜索更多信息，我找到了有关 Windows Phone 7 的 OData 库的信息。有同样的问题，我有额外的问题，因为这个 .dll 没有 DataServiceQuery。

有人知道我在哪里可以找到 Bing 搜索 API 的良好 System.Data.Service.Client.dll 文件吗？我花了两天时间解决这个问题，什么也没做。

# highslide - HTML-Popup 和 Gallery 同时在 Highslide 上

> ID：15482799
> 
> 赞同：0
> 
> 时间：2013-03-18T17:12:14.867
> 
> 标签：highslide

我是使用 Highslide 的新手，我有一个问题。如何在同一页面上打开图库和 HTML 弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:35:31.603

此示例的此页面编码应该让您走上正轨：

[http://www.roadrash.no/hs-support/gallery-horizo​​ntal-strip+html.html](http://www.roadrash.no/hs-support/gallery-horizontal-strip+html.html)

它的关键是为画廊定义一个幻灯片组，并将所有画廊图像标记为该组的一部分，*而不*是以这种方式标记 HTML 弹出窗口。

# sql - 加入时间范围查询

> ID：15482800
> 
> 赞同：-1
> 
> 时间：2013-03-18T17:12:21.790
> 
> 标签：sql, sql-server

我有两张桌子。

地图

```
Product    Channel  ProgDate   AdvTime
Air    Pix  30-04-2011  20:57:16
Air    Pix  30-05-2011  00:55:08 
```

工商管理硕士

```
Product    Channel Date   ProgStartTime ProgEndTime
Air    Pix  30-04-2011  23:00:00   02:00:00
Air    Pix  30-04-2011  21:00:00   22:00:00 
```

我必须检查 MAP 中的 AdvtTime 是否在 MBA 表中的`StartTime`&之间。`EndTime`

但是当持续时间（`ProgStartTime`- `ProgEndTime`）为一小时时，我需要 + 或 - 5 分钟的缓冲区。

我 `00:05:08 to match 23:00:00`需要，`02:00:00`并且 。`20:57:16 to match 21:00:00``22:00:00`

我使用以下查询加入

```
Select Distinct mb.Id as mbaid,mp.id as mapid, mp.Channel as Channel, mp.Product,mp.ProgDate, mp.AdvTime, mb.Channel,  mb.ProgStartTime, 
  mb.ProgEndTime, convert(time, dateadd(minute, datediff(minute, mb.progStartTime, mb.progEndTime), 0)) as timeDiff from map22 as mp inner join mba22 as mb 
on ((mp.ProgDate = mp.ProgDate and mp.Channel=mb.Channel and mp.Product=mb.Product)) 
 where (mp.ProgDate = mb.ProgDate
           AND AdvTime >= ProgStartTime
           AND (AdvTime <= ProgEndTime OR ProgEndTime < ProgStartTime))
          OR
          (mp.ProgDate = Dateadd(day,1,mb.ProgDate)
           AND ProgEndTime < ProgStartTime
           AND AdvTime <= ProgEndTime)
order by  mp.Id asc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:58:40.817

```
Select  Distinct mb.Id as mbaid,
        mp.id as mapid, 
        mp.Channel as Channel, 
        mp.Product,
        mp.ProgDate, 
        mp.AdvTime, 
        mb.Channel,  
        mb.ProgStartTime, 
        mb.ProgEndTime, 
        convert(time, dateadd(minute, datediff(minute, mb.progStartTime, mb.progEndTime), 0)) as timeDiff 
From    map22 as mp 
Inner   Join mba22 as mb 
        on  mp.ProgDate = mp.ProgDate 
        and mp.Channel= mb.Channel 
        and mp.Product= mb.Product
Where   mp.ProgDate = mb.ProgDate
And     Convert(DateTime,ProgDate) + Convert(DateTime,AdvTime)
            Between 
            Case 
            When ProgEndTime < ProdStartTime And DateDiff(hh,ProgEndTime,ProgStartTime) > 23 Then DateAdd(mi,-5,Convert(DateTime,[Date]) + Convert(DateTime,ProgStartTime))
            When ProgEndTime > ProdStartTime And DateDiff(hh,ProgStartTime,ProgEndTime) > 1 Then DateAdd(mi,-5,Convert(DateTime,[Date]) + Convert(DateTime,ProgStartTime)) 
            Else Convert(DateTime,[Date]) + Convert(DateTime,ProgStartTime) End
            And 
            Case 
            When ProgEndTime < ProdStartTime And DateDiff(hh,ProgEndTime,ProgStartTime) > 23 Then DateAdd(mi,5,Convert(DateTime,Case When ProgEndTime < ProdStartTime Then DateAdd(dd,1,[Date]) Else [Date] End) + Convert(DateTime,ProgEndTime))  
            When ProgEndTime > ProdStartTime And DateDiff(hh,ProgStartTime,ProgEndTime) > 1 Then DateAdd(mi,5,Convert(DateTime,Case When ProgEndTime < ProdStartTime Then DateAdd(dd,1,[Date]) Else [Date] End) + Convert(DateTime,ProgEndTime))  
            Else (Case When ProgEndTime < ProdStartTime Then DateAdd(dd,1,Convert(DateTime,[Date])) Else Convert(DateTime,[Date]) End) + Convert(DateTime,ProgEndTime) End
Order By mp.Id Asc 
```

# google-maps - 以度/公里为单位获取 Google 静态地图的尺寸

> ID：15482802
> 
> 赞同：0
> 
> 时间：2013-03-18T17:12:24.697
> 
> 标签：google-maps, latitude-longitude, google-static-maps

我想知道在给定缩放级别和地图大小（以像素为单位）的情况下，是否有任何方法可以获取谷歌静态地图图像的尺寸（以度或公里为单位）。

我已经看到了一个以度数计算经度的公式：

```
(widthInPixels/256)*(360/pow(2,zoomLevel)); 
```

这是非常准确的。但是，公里和度数之间的比率会根据您与两极或赤道的距离而变化，因此这个公式不起作用（即使我用 360 代替 180）

有没有人有这个公式或任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T00:45:42.497

您可以使用 MKMetersBetweenMapPoints 以公里为单位查找尺寸。

```
//Let's say region is represents the piece of map
    MKMapPoint pWest = MKMapPointForCoordinate( CLLocationCoordinate2DMake(region.center.latitude, region.center.longitude-region.span.longitudeDelta/2.0));
    MKMapPoint pEast = MKMapPointForCoordinate( CLLocationCoordinate2DMake(region.center.latitude, region.center.longitude+region.span.longitudeDelta/2.0));
    CLLocationDistance distW = MKMetersBetweenMapPoints(pWest, pEast)/1000.0;//map width in km
    MKMapPoint pNorth = MKMapPointForCoordinate( CLLocationCoordinate2DMake(region.center.latitude+region.span.latitudeDelta/2.0, region.center.longitude));
    MKMapPoint pSouth = MKMapPointForCoordinate( CLLocationCoordinate2DMake(region.center.latitude-region.span.latitudeDelta/2.0, region.center.longitude));
    CLLocationDistance distH = MKMetersBetweenMapPoints(pNorth, pSouth)/1000.0;;//map height in km 
```

# c# - 实体框架不断覆盖属性。需要其他解决问题的方法

> ID：15482806
> 
> 赞同：0
> 
> 时间：2013-03-18T17:12:33.443
> 
> 标签：c#, entity-framework

我有一个现有的应用程序/数据库。作为升级的一部分，我的任务是添加实体框架。

我遇到了一个问题，当我生成（或重新生成）edmx 时，代码不再识别数据库表中的外键，并且当代码运行时，它抱怨缺少 id，因为我假设它是“猜测”外键应该是什么。

我可以通过将以下属性添加到自动生成的模型定义来解决这个问题。

```
[ForeignKey("NavigationProperty")] 
```

但是，如果/当重新生成 edmx 时，所有这些都会被吹走，并且必须重新添加。

尽管生成的类是部分的，但由于这些属性被添加到现有成员中，我无法将它们移动到单独的文件中。

那么，我该如何绕过这个选项呢？理想情况下，我想确保在生成 edmx 时它会拾取外键，以便永久修复此问题。如果这不能完成，下一步是询问是否有某种方式可以以编程方式生成这些关联，所以它只完成一次。

谢谢

编辑 - 在示例表定义中添加

这是短信自动生成的代码。外键定义有什么问题吗？

```
CREATE TABLE [dbo].[ShopProductTypes](
[id] [int] IDENTITY(1,1) NOT NULL,
[Shop_Id] [int] NOT NULL,
[Product_Id] [int] NOT NULL,
[CreatedDate] [datetime] NOT NULL,
[CancelledDate] [datetime] NULL,
[Archived] [bit] NOT NULL,
 CONSTRAINT [PK_ShopProductTypes] PRIMARY KEY CLUSTERED 
(
[id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF,         ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[ShopProductTypes]  WITH CHECK ADD  CONSTRAINT     [FK_ShopProductTypes_Shop] FOREIGN KEY([Shop_Id])
REFERENCES [dbo].[Shops] ([Id])
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:54:43.543

我找到了这个：

[http://blogs.msdn.com/b/dsimmons/archive/2007/09/01/ef-codegen-events-for-fun-and-profit-aka-how-to-add-custom-attributes-to-我的生成类.aspx](http://blogs.msdn.com/b/dsimmons/archive/2007/09/01/ef-codegen-events-for-fun-and-profit-aka-how-to-add-custom-attributes-to-my-generated-classes.aspx)

它涉及更多。

# c# - 转换接近夏令时的日期时间？

> ID：15482809
> 
> 赞同：5
> 
> 时间：2013-03-18T17:12:35.557
> 
> 标签：c#, dst, datetime-conversion

我正在开发为 24/7/365 运行的 GPS 设备运行报告的软件。部分报告输出要求我们将存储的数据库时间（保留在中央标准时间）转换为用户计时器（任何请求的时区）。当人们运行在时间更改前后开始和结束的报告时，我们每年都会遇到两次 DST 问题。它在一行中失败：

```
return TimeZoneInfo.ConvertTime(dateToConvert, DatabaseTime, UserTime); 
```

`dateToConvert`是一个`DateTime`要转换的。`DatabaseTime`并且`UserTime`都是`TimeZoneInfo`对象。我没有做任何棘手或复杂的事情，但 DST 时间更改附近的 DateTimes 会引发异常。例如，`3/10/2013 2:02:11 AM`即使它正在从中央时间“转换”为中央时间。

在 DST 时间变化附近处理 DateTimes 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:55:59.697

您的数据库中有垃圾，3/10/2013 2:02:11 AM 从未存在过。那天早上 1:59 之后的一分钟是凌晨 3:00，时钟移动了一个小时。.NET 不会容忍那个垃圾日期。

您将需要找出垃圾时间戳是如何在您的数据库中结束的。显然，无视夏令时规则的时间从一个时区转换为另一个时区，例如在一个时区活动但在另一个时区不活动，很可能是垃圾的来源。如果您无法修复您的 dbase 以使用 UTC，那么至少在您的代码中执行此操作。首先在一个时区使用 UTC，然后在另一个时区返回本地时间。使用 TimeZoneInfo 类、ConvertTimeFrom/ToUtc 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T17:48:42.940

我遇到了这个问题。我通过添加一个新的 GMT 时间列来修复它。这允许应用程序使用原始数据和任何与 GMT 一起使用的修复程序。然后我更改了应用程序，以便任何有夏令时问题的代码都可以访问这个新列。此外，随着时间的推移，我将任何用于计算的代码重新指向这个新列，让显示器与旧列一起工作。它并不优雅，但它可以工作并且很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T18:29:43.043

转换应该正常工作，因为时间并不是真正的垃圾，正如汉斯所说，它只是未经调整的（我刚刚发明的一个术语）。`3/10/2013 2:02:11 AM CDT == 3/10/2013 8:02:11 AM UTC == 3/10/2013 3:02:11 AM CDT`...它们在语义上都是等价的。如果您不相信我，请在[timeanddate.com](http://www.timeanddate.com)上进行转换，然后查看它们都相等（尽管他们的计算器四舍五入到最接近的 5 分钟）。.NET 代码是否允许这种语义等价，我没有尝试过，因为我目前不在我的开发箱前面。

更新＃1：

在设置为 CST 时区的计算机上运行以下代码：

```
using System;

namespace TimeZoneSample
{
    public static class Program
    {
        public static void Main()
        {
            DateTime t = DateTime.Parse("3/10/2013 2:02:11 AM");
            Console.WriteLine(t);
            Console.WriteLine(t.ToUniversalTime());
            Console.WriteLine(t.ToUniversalTime().ToLocalTime());
        }
    }
} 
```

这会产生以下控制台输出：

```
3/10/2013 2:02:11 AM
3/10/2013 8:02:11 AM
3/10/2013 3:02:11 AM 
```

证明我原来的解释是正确的。***quod erat 示范***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T21:04:06.763

如果可能的话，我会遵循其他答案之一 - 你想正确解决这个问题。如果您在秋季过渡期间的时间不正确，则不会产生异常，只会随机休息一个小时。

有一种解决方法可以让您摆脱当前的困境。由于只有春季期间缺少的一小时会导致异常，因此您可以捕获异常并在重复转换之前添加一个小时。

# c++ - 在 C++ 文件中调用 dll

> ID：15482819
> 
> 赞同：1
> 
> 时间：2013-03-18T17:12:57.213
> 
> 标签：c++, dll

我创建了一个 DLL 文件（helloWorld.dll）：

```
#define WIN32_LEAN_AND_MEAN
#include <windows.h>

#define DLL_FUNC extern "C" __declspec(dllexport)

DLL_FUNC int __stdcall Hello() {
    MessageBox(HWND_DESKTOP, "Hello, world", "MEssage", MB_OK);
    return 0;
 } 
```

之后，我创建了一个我想调用的 cpp (useDLL.cpp)

```
#include <windows.h>
#include <stdio.h>

int main () {
    typedef void (*pfunc)();
    HINSTANCE hdll = LoadLibrary("HelloWorld.dll");
    pfunc Hello;
    Hello = (pfunc)GetProcAddress(hdll, "hello");
    Hello();
    return 0;
} 
```

如何调用 Hello() 函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T17:18:24.627

问题中的代码包含许多错误：

1.  `LoadLibrary`返回`HMODULE`而不是`HINSTANCE`
2.  函数指针具有错误的返回值和不正确的调用约定。
3.  函数名称区分大小写，您必须考虑名称修饰。
4.  您根本没有进行错误检查。您的代码可能在调用时失败`GetProcAddress`，返回`NULL`然后在您尝试调用函数时炸弹`NULL`。

所以你需要这样的东西：

```
typedef int (__stdcall *HelloProc)();
....
HMODULE hdll = LoadLibrary("HelloWorld.dll");
if (hdll == NULL)
    // handle error
HelloProc Hello = (HelloProc)GetProcAddress(hdll, "_Hello@0");
if (Hello == NULL)
    // handle error
int retval = Hello(); 
```

函数名称被修饰，因为您使用了`__stdcall`. 如果您使用过`__cdecl`, 或 .def 文件，则不会有任何装饰。我假设 MSVC 装饰。似乎装饰与您的编译器 mingw 不同，并且函数名为`"Hello@0"`.

`LoadLibrary`坦率地说，使用 .lib 文件而不是调用and更容易做到这一点`GetProcAddress`。如果可以的话，我现在就改用这种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:16:28.370

您需要专门搜索并找到您正在寻找的特定函数，查看此链接： [Calling functions in a DLL from C++](https://stackoverflow.com/questions/539358/calling-functions-in-a-dll-from-c)

# c# - 为添加到 dataGridView 的每一行添加一个计时器，如果删除了行，则将其删除

> ID：15482825
> 
> 赞同：0
> 
> 时间：2013-03-18T17:13:07.957
> 
> 标签：c#, datagridview, timer

我正在尝试为添加到 dataGridView 的每一行添加一个计时器，并在删除一行时将其删除。

由于错误，我根本无法让计时器运行：

“System.Timers.Timer”不包含“Tick”的定义，并且找不到接受“System.Timers.Timer”类型的第一个参数的扩展方法“Tick”（您是否缺少 using 指令或程序集引用?)

当前上下文中不存在名称“myTimer_Tick”

这是我所拥有的一个例子：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Drawing;
using System.Linq;
using System.Media;
using System.Data.OleDb;
using System.Text;
using System.IO;
using System.Windows.Forms;
using System.Timers;

private void dataGridView1_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
{
    System.Timers.Timer myTimer = new System.Timers.Timer();
    myTimer.Interval = 30000;
    myTimer.Tick += new EventHandler(myTimer_Tick);
    myTimer.Enabled = true;
    myTimer.Start();
}

public void MyTimer_Tick(object sender, EventArgs e)
{
    MessageBox.Show("30 seconds scince you added a row");
}

private void dataGridView1_RowsRemoved(object sender, DataGridViewRowsRemovedEventArgs e)
{
    //remove a timer here that corresponds to this row, 
    //if row removed before timer elapsed
} 
```

感谢您为我提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:28:17.933

你应该使用

```
System.Windows.Forms.Timer 
```

代替

```
using System.Timers; 
```

看[这里](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)和[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:36:30.570

首先，`System.Timer`没有`.Tick`事件。改用`Timer.Elapsed`：

```
myTimer.Elapsed += new EventHandler(MyTimer_Tick); 
```

[编辑：用字典替换列表]

您还需要多个计时器以及将计时器保持在范围内的方法。使用`Dictiory<DataGridViewRow, Timer>`在类级别声明的对象：

```
private Dictionary<DataGridViewRow, System.Timers.Timer> timers = new Dictionary<DataGridViewRow, System.Timers.Timer>();

private void dataGridView1_RowsAdded(object sender, DataGridViewRowsAddedEventArgs e)
{
    var myTimer = new System.Timers.Timer();
    myTimer.Interval = 30000;
    myTimer.Elapsed += new ElapsedEventHandler(MyTimer_Tick);
    myTimer.Enabled = true;

    // Potential bug source: If you programmatically add multiple rows at once,
    // a timer is only added to the first row
    timers.Add(dataGridView1.Rows[e.RowIndex], myTimer);
} 
```

现在在 RowsRemoved 事件处理程序中，您获取行索引并将其从`timers`字典中删除；例如，`timers.RemoveAt(rowIndex)`。

# sql - sql + xquery 删除多个父节点

> ID：15482834
> 
> 赞同：0
> 
> 时间：2013-03-18T17:13:26.020
> 
> 标签：sql, sql-server-2008, xpath, xquery

在下面的 xml 中，我有三个 5 /Item 元素，其中 4 个有一个 Blob 子元素。我想删除具有子 Blob 元素但仅在 Item/@Name 中包含文本“Blob”的元素。

```
<Items>
    <Item Name="Blob123">
        <Blob/>
    </Item>
    <Item Name="Blob124">
        <Blob/>
    </Item>
    <Item Name="Blob125">
        <Blob/>
    </Item>
    <Item Name="Blob126">
    </Item>
    <Item Name="Xyz126">
        <Blob/>
    </Item>
</Items> 
```

此查询返回名为 'Blob%' 的 3 个 /Item 元素和一个子 /Blob 元素就好了。

```
 select xmlVal.query('(/Items/Item[contains(@Name, "Blob")]/Blob/..)') 
```

但是，当我尝试使用此 xquery 删除这些元素时：

```
 select xmlVal.modify('delete (/Items/Item[contains(@Name, "Blob")]/Blob/..)') 
```

我得到：不正确地使用 XML 数据类型方法“修改”。在这种情况下，需要一个非突变方法。

我究竟做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:37:19.580

如果它对其他人有帮助，要解决这个问题，我需要使用 update/set 并且还需要稍微更改 xpath

update table1 set xmlVal.modify('delete (/Items/Item[contains(@Name, "Blob")][Blob])')

# python - 使用 Python 2.6 unittest 捕获响应代码

> ID：15482835
> 
> 赞同：0
> 
> 时间：2013-03-18T17:13:27.317
> 
> 标签：python, unit-testing

使用 unittest 通过 API 测试一些边缘情况。所有这些案例都使用自定义异常类返回 400 系列响应代码。不幸的是，我似乎找不到捕获这些自定义异常或读取 unittest 检查本身的响应代码的方法。

我收到的是一个“AppError”异常，其中一条消息提到它是 400 响应而不是 200 或 300。如果可以的话，我想避免解析异常消息。这也需要在 Python 2.6+ 上工作。如何在我的 unittest 检查中捕获自定义异常，或者在不解析异常消息的情况下确定导致错误的响应代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:25:12.117

您必须捕获异常并断言它不是 400 响应：

```
try:
    call_api_method()
except AppError as ae:
    self.assert(ae.errorcode < 400) 
```

这就要求异常携带错误码作为属性；您可能需要检查异常上可用的属性。默认情况下`.args`会在那里（它是一个元组），但是对于此类异常来说，最好也有一个错误代码属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:11:32.210

我想出了如何做到这一点。事实证明，使用 webtest（我忘了提到它正在使用），您可以传入一个参数`expect_errors=True`并保存请求的返回值。然后，您可以使用以下命令检查响应状态

```
self.assertEqual('400 Bad Request', response.status) 
```

# sql - 在 SQL 中更改表的模式名称

> ID：15482838
> 
> 赞同：217
> 
> 时间：2013-03-18T17:13:28.593
> 
> 标签：sql, sql-server, tsql, schema

我想更改`Employees`数据库中表的模式名称。在当前表`Employees`数据库模式名称是`dbo`我想将其更改为`exe`. 我该怎么做 ？

例子：

从

```
dbo.Employees 
```

至

```
exe.Employees 
```

我试过这个查询：

```
ALTER SCHEMA exe TRANSFER dbo.Employees 
```

但这给了我一个错误：

> 无法更改架构“exe”，因为它不存在或您没有权限。

我错过了什么？

* * *

## 回答 #1

> 赞同：330
> 
> 时间：2013-03-18T17:32:23.977

**创建架构：**

```
IF (NOT EXISTS (SELECT * FROM sys.schemas WHERE name = 'exe')) 
BEGIN
    EXEC ('CREATE SCHEMA [exe] AUTHORIZATION [dbo]')
END 
```

**改变模式：**

```
ALTER SCHEMA exe 
    TRANSFER dbo.Employees 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2015-09-25T20:02:31.613

```
ALTER SCHEMA NewSchema TRANSFER [OldSchema].[TableName] 
```

在 SQL 中使用查询时，我总是必须使用方括号`ALTER SCHEMA`，否则会收到错误消息。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-03-18T17:20:13.863

试试下面

```
declare @sql varchar(8000), @table varchar(1000), @oldschema varchar(1000), @newschema   varchar(1000)

  set @oldschema = 'dbo'
  set @newschema = 'exe'

 while exists(select * from sys.tables where schema_name(schema_id) = @oldschema)

  begin
      select @table = name from sys.tables 
      where object_id in(select min(object_id) from sys.tables where  schema_name(schema_id)  = @oldschema)

    set @sql = 'alter schema ' + @newschema + ' transfer ' + @oldschema + '.' + @table

   exec(@sql)
 end 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-12-02T05:59:19.100

```
CREATE SCHEMA exe AUTHORIZATION [dbo]
GO

ALTER SCHEMA exe
TRANSFER dbo.Employees
GO 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-10-14T21:30:13.453

通过 SSMS，我通过以下方式创建了一个新模式：

*   单击服务器内对象资源管理器中的安全文件夹，
*   右键单击模式
*   选择“新架构...”
*   命名我的新架构（在您的情况下为 exe）
*   点击确定

我发现这篇文章更改了架构，但在尝试更改为新架构时也遇到了相同的权限错误。我的 SSMS 中列出了几个数据库，所以我只是尝试指定数据库并且它有效：

```
USE (yourservername)  
ALTER SCHEMA exe TRANSFER dbo.Employees 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-07-19T13:17:57.760

您的代码是：

```
FROM
 dbo.Employees
TO
 exe.Employees 
```

我试过这个查询。

```
ALTER SCHEMA exe TRANSFER dbo.Employees 
```

只需编写`create schema exe`并执行它

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-03-18T17:18:32.490

看看 MSDN...

`CREATE SCHEMA`：http: [//msdn.microsoft.com/en-us/library/ms189462.aspx](http://msdn.microsoft.com/en-us/library/ms189462.aspx)

然后

`ALTER SCHEMA`：http: [//msdn.microsoft.com/en-us/library/ms173423.aspx](http://msdn.microsoft.com/en-us/library/ms173423.aspx)

或者你可以在SO上检查它...

[如何将表移动到 T-SQL 中的架构中](https://stackoverflow.com/questions/1149159/how-do-i-move-a-table-into-a-schema-in-t-sql)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-11-22T06:50:09.547

以防万一，有人在寻找较低版本 -

对于 SQL Server 2000：

sp_changeobjectowner @objname = 'dbo.Employess' , @newowner ='exe'

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-12-03T18:55:38.390

Make sure you're in the right database context in SSMS. Got the same error as you, but I knew the schema already existed. Didn't realize I was in 'MASTER' context. ALTER worked after I changed context to my database.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-18T17:17:31.617

在 sql 中重命名对象要非常小心。如果你没有完全放弃你正在做的事情，你可能会导致依赖关系失败。话虽如此，只要您可以在环境中正确访问，这很容易（太多了）重命名事物：

```
exec sp_rename 'Nameofobject', 'ReNameofobject' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-13T20:10:05.917

您还可以通过 1-双击数据库图 2-右键单击您的 certian 实体->选择属性 3-在身份右侧将数据从默认模式“dbo”传输到向导中的模式，更改模式名称

# python - 如何使 Django 管理命令不打开事务？

> ID：15482841
> 
> 赞同：6
> 
> 时间：2013-03-18T17:13:38.733
> 
> 标签：python, database, django, django-manage.py

我正在编写一个要更改默认隔离级别的管理命令。Django 和我的数据库将默认它为“READ COMITTED”，我需要它仅针对这个特定的管理命令是“READ UNCOMMITTED”。

运行时：

```
./manage.py my_command 
```

我注意到 Django 默认打开一个具有默认隔离级别的事务，即使您的命令不需要任何数据库连接：

```
from django.core.management.base import BaseCommand

class Command(BaseCommand):
    help = "Updates assortment data by refreshing the mviews"

    def handle(self, *args, **options):
        print "fdkgjldfkjgdlkfjgklj" 
```

这种行为不适合我的问题，我问是否有办法：

*   编写一个管理命令，让 Django 甚至不接触数据库，让所有事务控制完全手动？

*   编写一个管理命令，您可以只为它定义事务特征？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T10:12:37.033

我在 Facebook 上看到了你的帖子，并认为我可以提供一些帮助 :-)

您可以在以下数据库设置中指定未提交读取的数据库连接`settings.py`：

```
DATABASES: {
    'default': {...}
    'uncommitted_db': {
        'ENGINE': ...
        'NAME': ...
        'USER': '...',
        'PASSWORD': '...',
        'HOST': '...', 
        'OPTIONS': {
            'init_command': 'SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED'  #MySQL
            'init_command': 'SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED' #Postgres
        }
    }
} 
```

有了这个，您可以使用 Django 的正常多数据库语法访问您的非事务性数据库连接：

```
Model.objects.using('uncommitted_db').all() 
```

当然，您可能不希望您的非事务性数据库连接在整个应用程序中全局可用，因此理想情况下，您需要一种方法使其仅在执行此管理命令期间可用。不幸的是，管理命令不是这样工作的：一旦你点击类`handle`上的方法`Command`，你的`settings.py`已经被解析并且你的数据库连接已经被创建。如果您能找到一种方法在运行后使用一组新的数据库设置重新初始化 Django，或者`settings.py`根据您的启动条件在您的数据库中进行逻辑拆分，如下所示：

```
import sys
if 'some_management_cmd' in sys.argv: 
    DATABASES['default']['OPTIONS']['init_command'] = 'SET TRANSACTION...' 
```

这可以工作，但非常可怕！

# python - 部署后的 Openshift 脚本

> ID：15482842
> 
> 赞同：0
> 
> 时间：2013-03-18T17:13:40.090
> 
> 标签：python, node.js, openshift, openshift-client-tools

我正在使用 openshift 部署使用 python、mongodb 和 node.js 的应用程序。

将我所有的代码和数据推送到服务器后，它说当**rhc 客户端**关闭时**服务不可用。**

 **那是因为我没有编写**部署**后脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:28:59.887

你是什​​么意思你需要打开 RHC？它只是发送一个命令，然后完成执行。

RHC 客户端是一种将 REST 请求发送到 OpenShift 代理的无状态方式——它与运行您的应用程序的节点绝对没有连接，除非您使用 RHC APP TAIL 命令或类似的命令。您的意思是当您在应用程序中的 ssh 保持打开状态时？请不要忘记我们在一天不使用后关闭了应用程序，它需要一段时间才能启动。

该应用程序是否有 git hub 存储库？

不需要部署后脚本。

您的应用程序的日志说明了什么。您可以通过执行 RHC APP TAIL 或通过 SSH 进入您的应用程序并转到 ~/python-2.6/logs 来访问它们。**

# android - 容器如何传递给片段？

> ID：15482844
> 
> 赞同：3
> 
> 时间：2013-03-18T17:13:48.033
> 
> 标签：android, android-fragments

我试图理解别人的代码。他们正在使用片段（我对此很模糊）。

我知道一个片段以`onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState`.. 开头，但我无法理解“容器”的设置位置。

我应该去哪里看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:23:35.193

`container`由 Android 框架处理，它通常是指在 FragmentTransaction[`add(int containerViewId, Fragment fragment)`](https://developer.android.com/reference/android/app/FragmentTransaction.html#add%28int,%20android.app.Fragment%29)或[`replace(int containerViewId, Fragment fragment)`](https://developer.android.com/reference/android/app/FragmentTransaction.html#replace%28int,%20android.app.Fragment%29).

例如，这是来自[开发人员指南](https://developer.android.com/guide/components/fragments.html#Adding)：

```
ExampleFragment fragment = new ExampleFragment();
fragmentTransaction.add(R.id.fragment_container, fragment);
fragmentTransaction.commit(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T17:25:44.083

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    v = inflater.inflate(R.layout.news_list, container, false);
    return v;
} 
```

布局`news_list`是针对这个片段的。

# r - R泊松置信区间

> ID：15482845
> 
> 赞同：0
> 
> 时间：2013-03-18T17:13:57.237
> 
> 标签：r, poisson, confidence-interval, standard-error

我使用泊松回归（`glm()`with `family='poisson'`）并希望以下列形式给出答案：

“每个预测值在区间 [low, high] 中都有一个误差，概率为 0.95”。

1.  有可能吗？如果是，如何？
2.  我看到了几种方法。

1）计算残差并获得低值和高值。我应该使用哪个发行版？

2）使用功能`predict.glm(model, type = 'link', se.fit=TRUE)`。计算正态分布的置信区间。利用

```
model$family$linkinv() 
```

找出低值和高值。

我已经实施了第二种情况。问题是我怎样才能以上述形式给出答案？

# junit - 我可以在 Jenkins 仪表板中使跳过的测试更加突出吗？

> ID：15482846
> 
> 赞同：2
> 
> 时间：2013-03-18T17:13:57.533
> 
> 标签：junit, jenkins

我在 Jenkins 中有一个正在测试的项目（“测试安装”；它进行了一些回归测试以验证安装程序是否有效）。这个项目对 Jenkins 控制之外的东西有软依赖：如果最新的安装程序不可用，那么我们就无法测试它。不过，我们总是可以重新测试旧的安装程序，这似乎值得做（我们有 CPU 周期，所以我们不妨烧掉它们）。

如果安装程序不是最新的，我想要发出响亮的警告，然后继续进行测试。

我尝试的第一件事是在安装程序过期时进行失败的测试。这很突出，但令人困惑，因为安装测试实际上并不是失败的事情。

现在我有相同的测试，但它使用 JUnit 假设而不是断言，这意味着测试要么跳过，要么通过。这也不够完美，因为 Jenkins 在首页上报告了“9 个测试，0 个失败”，而且只有当我深入到测试结果的多个层时，我才看到 9 个测试中有 1 个被跳过。

我可以让 Jenkins 在首页报告跳过的测试吗？我没有找到合适的插件。我应该使用更好的方法来警告安装程序已过时吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-07T16:09:47.047

为您回答问题有点晚，但可能对其他人有帮助。. .

我认为最适合这种情况的两件事很简单：

*   添加一项额外的测试以检查最新的安装程序版本并失败。因此，该工作将被标记为不稳定。

*   或者您可以使用其中一个构建后插件来检查日志并将作业标记为失败而不是不稳定。

没有一种*简单*的方法可以使跳过的测试更加突出。

但是您可以对测试结果进行一些后处理。

我们在作业脚本/测试脚本中生成一个 VERSION.txt 文件并将其放入作业工作区。然后我们使用 Groovy Postbuild 操作并设置作业描述：

“Groovy 后期构建”

```
def currentBuild = Thread.currentThread().executable
def ws = manager.build.workspace.getRemote()
String desc = new File(ws + "/VERSION.txt").text
currentBuild.setDescription(desc) 
```

这非常有用，我们可以在作业历史记录中查看测试的版本或其他详细信息。

把东西标记得更显眼。. . >;) 你可以使用徽章和一些时髦的东西。 [![建立徽章示例，在工作历史侧栏中查看。 徽章还显示在作业页面、构建监视器视图中，.  .  .](../Images/8dd1debefba753ec1d9b0b5afe16d49b.png)](https://i.stack.imgur.com/BB7Ib.png)

使用的插件：

[https://wiki.jenkins.io/display/JENKINS/Groovy+Postbuild+Plugin](https://wiki.jenkins.io/display/JENKINS/Groovy+Postbuild+Plugin)

Groovy Postbuild 插件是唯一真正需要的插件。Badges API 是 Groovy Postbuild 插件的一部分。

[https://wiki.jenkins.io/display/JENKINS/Groovy+plugin](https://wiki.jenkins.io/display/JENKINS/Groovy+plugin)

Groovy 插件对于试验 groovy 或使用 groovy 制作工作很有用。

[https://wiki.jenkins.io/display/JENKINS/Build+Trigger+Badge+Plugin](https://wiki.jenkins.io/display/JENKINS/Build+Trigger+Badge+Plugin)

实际上，徽章在 jenkins groovy postbuild 插件中可用。如果使用各种触发器但实际上不需要设置徽章，我使用的 BuildTriggerBadge 插件仍然很有用。我在安装时将其包含在此处，但我不能 100% 确定没有它我的代码是否可以正常工作（但我可能 98.5% 确定）。我没有安装徽章插件。

请参阅下面的一些带有徽章的常规实验：

```
def currentBuild = Thread.currentThread().executable
def ws = manager.build.workspace.getRemote()
String desc = new File(ws + "/VERSION.txt").text
currentBuild.setDescription(desc)

if (desc.contains("ERROR")) {
  coverageText="VarkeninK, SomethinK iz bad."
  // Apologies :-7 I can only assume this was from Viktor in http://www.userfriendly.org/ web comic
  manager.addShortText(coverageText, "black", "repeating-linear-gradient(45deg, 
yellow, yellow 10px, Orange 10px, Orange 20px)", "0px", "white")
}

manager.addShortText("GreyWhite0pxWhite", "grey", "white", "0px", "white")
manager.addShortText("BlackGreen0pxWhite", "black", "green", "0px", "white")
manager.addShortText("BlackGreen5pxWhite", "black", "green", "5px", "white")
manager.addShortText("VERSION WhiteGreen0pxWhite", "white", "green", "0px", "white")
manager.addShortText("WhiteGreen5pxWhite", "white", "green", "5px", "white")

manager.addShortText("VERSION Black on Lime Green", "black", "limegreen", "0px", "white")

// darkgrey is lighter than grey!! :-P
manager.addShortText("OBSOLETE YellowDarkGrey5pxGrey", "yellow", "darkgrey", "5px", "grey")
manager.addShortText("OBSOLETE YellowGrey5pxGrey", "yellow", "grey", "5px", "grey")

manager.removeBadges()

manager.addShortText("VERSION Black on Lime Green", "black", "limegreen", "0px", "white")
manager.addShortText(desc, "black", "limegreen", "5px", "white")
manager.addShortText("OBSOLETE YellowGrey5pxGrey", "yellow", "grey", "5px", "grey")

manager.addBadge("warning.gif", "Warning test")
manager.addWarningBadge("other warning test")

// https://wiki.jenkins.io/display/JENKINS/Groovy+Postbuild+Plugin

// contains(file, regexp) - returns true if the given file contains a line matching regexp.
// logContains(regexp) - returns true if the build log file contains a line matching regexp.
// getMatcher(file, regexp) - returns a java.util.regex.Matcher for the first occurrence of regexp in the given file.
// getLogMatcher(regexp) - returns a java.util.regex.Matcher for the first occurrence of regexp in the build log file.
// setBuildNumber(number) - sets the build with the given number as current build. The current build is the target of all methods that add or remove badges and summaries or change the build result.
// addShortText(text) - puts a badge with a short text, using the default format.
// addShortText(text, color, background, border, borderColor) - puts a badge with a short text, using the specified format.
// addBadge(icon, text) - puts a badge with the given icon and text. In addition to the 16x16 icons offered by Jenkins, groovy-postbuild provides the following icons:
//  - completed.gif
//  - db_in.gif
//  - db_out.gif
//  - delete.gif
//  - error.gif
//  - folder.gif
//  - green.gif
//  - info.gif
//  - red.gif
//  - save.gif
//  - success.gif
//  - text.gif
//  - warning.gif
//  - yellow.gif
// addBadge(icon, text, link) - like addBadge(icon, text), but the Badge icon then actually links to the given link (since 1.8)
// addInfoBadge(text) - puts a badge with  info icon and the given text.
// addWarningBadge(text) - puts a badge with  warning icon and the given text.
// addErrorBadge(text) - puts a badge with  error icon and the given text.
// removeBadges() - removes all badges from the current build.
// removeBadge(index) - removes the badge with the given index.
// createSummary(icon) - creates an entry in the build summary page and returns a summary object corresponding to this entry. The icon must be one of the 48x48 icons offered by Jenkins. You can append text to the summary object by calling its appendText methods:
// appendText(text, escapeHtml)
// appendText(text, escapeHtml, bold, italic, color)
// removeSummaries() - removes all summaries from the current build.
// removeSummary(index) - removes the summary with the given index.
// buildUnstable() - sets the build result to UNSTABLE.
// buildFailure() - sets the build result to FAILURE.
// buildSuccess() - sets the build result to SUCCESS. 
```

# linux - 自动 ACL 签入 shell 脚本

> ID：15482848
> 
> 赞同：1
> 
> 时间：2013-03-18T17:14:07.860
> 
> 标签：linux, shell, unix, acl

我想从你那里得到一些关于如何实现它的想法。让我解释一下我的问题：

场景：我们有一个系统，它必须设置一些特定的 ACL 才能运行它。因此，在运行之前，如果我可以运行某种预检查以验证所有设置是否正确，那就太好了。

目标：创建一个脚本，在启动系统警报之前检查这些 ACL，以防其中一个错误基于文件/文件夹及其 ACL 列表。

问题：由于 getfacl 结果不是一个简单的返回，我发现进行这种检查的唯一方法是解析结果并分析它的每一部分，这并不像我想要的那样优雅。

我怀疑你们中的许多人必须做一些 ACL 检查，但可以肯定的是，你们可以为我的事业做出贡献:)

提前谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:19:06.717

> 由于 getfacl 结果不是一个简单的返回，我发现进行这种检查的唯一方法是解析结果并分析它的每一部分，这并不像我想要的那样优雅。

你到底想做什么？如果您只是将调用结果与`getfacl`所需的 ACL 进行比较，那应该很容易。例如，假设您已将所需的 ACL 存储在名为 的文件中`acl-i-want`，您可以执行以下操作：

```
 getfacl /path > acl-i-have
   if ! diff -q acl-i-have acl-i-want; then
      echo "ACLs are different."
   fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T19:57:37.203

如何使用`Python`模块`pylibacl`

```
>>> import posix1e
>>> acl1 = posix1e.ACL(file="file1.txt")
>>> print acl1
user::rw-
group::r--
other::r-- 
```

# javascript - 显示和隐藏块 js。

> ID：15482852
> 
> 赞同：0
> 
> 时间：2013-03-18T17:14:17.743
> 
> 标签：javascript, hide, show

我想显示阻止用户带有 decstop 并将其隐藏在手机上。有了这个就OK了。但相反我不明白。对不起我的英语不好。

```
$('#decstop').show();
$('#phone').hide();
if(window.width() <= 480) {
    $('#decstop').hide();
} else {
    $('#phone').show();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:18:27.487

尝试在控制语句中使用`$(window).width()`, 而不是。`window.width()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:34:17.497

您需要指定每个条件的所有元素会发生什么。另外，$(window)，而不是 window。

```
$('#decstop').show();
$('#phone').hide();

if( $(window).width() <= 480 ) {
    $('#decstop').hide();
    $('#phone').show();
} else {
    $('#decstop').show();
    $('#phone').hide();
} 
```

# c# - System.Guid 到 _GUID？

> ID：15482853
> 
> 赞同：1
> 
> 时间：2013-03-18T17:14:17.783
> 
> 标签：c#, c++, c++-cli

我有一个 c++ 项目，我正在尝试从 .net c# 使用。主要问题是在c ++中我有类似的东西

```
static const GUID guid ={ 0x4be732d4, 0x3244, 0x4ad3, { 0x92, 0xbd, 0xf2, 0x80, 0x9d, 0xf0, 0x96, 0xf6 } };
HRESULT ActivateItem(String^ Name, String^ Var )
{
    hr = Item->SetId(&guid);
    StartItem(&guid);
}

From C# would be ActivateItem("someName", "someVar"); 
```

我需要在 c# 中创建 GUID 才能在 DB 中使用它，但 System.Guid 显然与 _GUID 不同，而且我在 C++ 方面非常糟糕。

有人可以帮忙吗？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-06T16:48:26.280

MSDN 提供了有关如何执行此操作[的便捷教程，请注意，该代码也可以在需要时在 C++/CLI 中使用。](https://msdn.microsoft.com/en-us/library/wb8scw8f.aspx)

从 _GUID 转换：

```
System::Guid FromGUID(_GUID& guid) {  
   return System::Guid(guid.Data1, guid.Data2, guid.Data3,   
                guid.Data4[0], guid.Data4[1],   
                guid.Data4[2], guid.Data4[3],   
                guid.Data4[4], guid.Data4[5],   
                guid.Data4[6], guid.Data4[7] );  
} 
```

要转换回 _GUID：

```
_GUID ToGUID(System::Guid& guid) {  
   array<Byte>^ guidData = guid.ToByteArray();  
   pin_ptr<Byte> data = &(guidData[0]);    
   return *(_GUID*)data;  
} 
```

# templates - 有条件地选择节点不起作用

> ID：15482855
> 
> 赞同：1
> 
> 时间：2013-03-18T17:14:23.657
> 
> 标签：templates, xslt

我只是想选择属性值为“cd”的节点“productgroep”。这不起作用，我真的不明白为什么，我搜索了答案但没有找到任何答案。

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="Oefening_8.xsl"?>
<catalogus>
<!-- cd catalogus -->
<productgroep type="cd">
    <item referentienummer="7051444" catalogusnummer="1800022" EAN="0025218000222">
     ...
</productgroep>
<productgroep type="film">
    <item referentienummer="8051445" catalogusnummer="2800023" EAN="5051888073650">
     ....
</productgroep>
</catalogus 
```

XSL：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="html"/>
<xsl:template match="/">   
    <html>
        <head>
            <title>Oefening_8.xsl</title>
            <meta charset="utf-8"/>
            <link href="Oefening_8.css" type="text/css" rel="stylesheet"/>
        </head>
        <body>
            <h1></h1>
                <xsl:template match="productgroep[@type='cd']">
                </xsl:template>
        </body>
    </html>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:39:24.330

An`<xsl:template/>`不能是 a 的子级`<xsl:template/>`，因此您的样式表当前无效并且可能在某处出现错误，具体取决于您使用 XML 和 XSL 的方式。

一种解决方案是创建单独`<xsl:template>`的 s 并用于`<xsl:apply-templates />`处理源元素的子元素。

```
<xsl:template match="/">
    <html>
        <head>
            <title>Oefening_8.xsl</title>
            <meta charset="utf-8"/>
            <link href="Oefening_8.css" type="text/css" rel="stylesheet"/>
        </head>
        <body>
            <h1></h1>
            <xsl:apply-templates />
        </body>
    </html>
</xsl:template>

<xsl:template match="productgroep[@type='cd']">
    <xsl:value-of select="item/@catalogusnummer"/> <!-- print @catalogusnummer for example -->
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:54:08.357

正如@andyb 指出的那样，模板中不能有模板。可能是您打算使用`xsl:apply-templates`where you have `xsl:template`，但这也不适用于您使用的路径，因为当前上下文是目录*上方*的节点。您的选项是更改初始`xsl:template`以选择根元素：

或者

或使用完整路径`xsl:apply-templates`：

我更喜欢第一个选项：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="html"/>
<xsl:template match="/*">   
    <html>
        <head>
            <title>Oefening_8.xsl</title>
            <meta charset="utf-8"/>
            <link href="Oefening_8.css" type="text/css" rel="stylesheet"/>
        </head>
        <body>
            <h1></h1>
            <xsl:apply-templates select="productgroep[@type='cd']" />
        </body>
    </html>
</xsl:template>
</xsl:stylesheet> 
```

# symfony - Symfony2：JMSSecurityExtraBundle：@PreAuthorize 中的#id == user.getId() 不起作用

> ID：15482857
> 
> 赞同：2
> 
> 时间：2013-03-18T17:14:34.367
> 
> 标签：symfony, annotations

我尝试访问通过@PreAuthorize 注释（Symfony2 2.1.8）保护它的控制器中的函数：

当我写：

```
/*    
* @PreAuthorize("hasRole('ROLE_ADMIN') or #id == '5'")
*/

public function editAction($id){ 
(...) 
```

我可以通过，但是当我使用：

```
/*    
* @PreAuthorize("hasRole('ROLE_ADMIN') or #id == user.getId()")
*/

public function editAction($id){ 
(...) 
```

我收到“令牌没有所需的角色。”错误，是的，我已使用正确的 ID 登录并进行了身份验证...

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:40:27.190

好吧，我想通了...

基本上 PreAuthorize 注释就是这样做的

```
user.getId() === '5' 
```

其中 getId 返回一个整数并与字符串进行比较。我设法通过将此方法添加到我的用户实体来使其工作：

```
public function getStringId()
{
    return (string) $this->id;
} 
```

然后将注释更改为此

```
@PreAuthorize("user.getStringId() == '2' and hasRole('ROLE_ADMIN')") 
```

希望有帮助！

# html - 如何将图像固定在右下角

> ID：15482859
> 
> 赞同：3
> 
> 时间：2013-03-18T17:14:37.903
> 
> 标签：html, css

我正在尝试将页脚/导航固定在屏幕的右下角，因此当您向下滚动时，它始终可见，当您拉动浏览器的右下角使其变大时，它将保持固定在角落. 当您缩小浏览器时，我还希望它缩小。我想办法在左上角做到这一点，但不是在右边。

我努力了

```
 position:fixed;
 bottom:0;
 right:0: 
```

但这似乎不起作用。我在页面边缘和我的图像（[http://i.imgur.com/FZoaLd0.jpg](http://i.imgur.com/FZoaLd0.jpg)）之间留下了一个神秘的空间（在 div 上做一个负边距不会抹去这个空间）我也不想要将其粘贴为背景图像，因为我最终想将其制作为图像映射。

抱歉，如果这令人困惑！在这方面我还是个新手。

```
 <div id="footer">
<img src= "images/swirlfooter.png" width="75%" height="75%">
</div> 
```

宽度和高度是空间的罪魁祸首吗？如果是这样，我将如何解决？只需按照我需要的确切尺寸创建图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T17:24:28.123

首先，如果您不希望它在滚动时移动，您需要一个固定位置。

```
#footer {
    position:fixed;
    right:0;
    bottom:0;
    margin:0;
    padding:0;
    width:75%;
}
#footer img {width:100%;} 
```

并清除边距：

```
html, body {
   margin:0;
   padding:0;
} 
```

小心，`position:fixed`不幸的是，iOS 上的 safari 无法使用（iPhone、iPad ......）

你可以在这里看到一个**[演示](http://jsfiddle.net/FvSCn/1/)**。

**编辑**

另一种解决方案是将 img 放在页脚的背景中，如下**[例所示](http://jsfiddle.net/FvSCn/3/)**：

```
#footer {
    position:fixed;
    right:0;
    bottom:0;
    margin:0;
    width:75%;
    height:75%;
    background:url(http://i.imgur.com/FZoaLd0.jpg) no-repeat bottom right;
    background-size:100%;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T17:16:33.273

绝对位置将随着滚动而移动。你需要的是`positon:fixed;`

```
#footer {
    position:fixed;
    bottom:0;
    right:0:
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:17:10.993

利用

```
position:fixed; 
```

而不是`absolute`.

Fixed 将始终保持在窗口的右下角。
滚动时绝对变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T17:16:18.697

你需要`position: fixed;`.

您可能还想尝试清除正文和 HTML 边距：

```
html {
  margin: 0;
  padding: 0;
}
body {
  margin: 0;
  padding: 0;
} 
```

是否与任何将位置设置为的父容器一起使用`position: relative;`？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-06T02:45:31.453

HTML：

```
<div class="class-name">
   <img src="images/image-name.png">
</div> 
```

CSS：

```
div.class-name {
    position: fixed;
    margin-top: -50px;
    top: 100%;
    left: 100%;
    margin-left: -120px;
    z-index: 11000;
}
div.class-name img{
    width: 100px;
} 
```

`margin-top`根据您的图像高度进行更改。

# forms - jqgrid根据dataURL结果显示editform（整个表单）

> ID：15482860
> 
> 赞同：0
> 
> 时间：2013-03-18T17:14:38.907
> 
> 标签：forms, jqgrid, edit

我正在使用表单编辑，但我只希望在 dataURL 的结果正确的情况下显示 ADD 表单。我可以隐藏它，但我真的不想要它。另外， hide() 仅在清除警报后才有效

```
$("#schedule").jqGrid('editGridRow', "new", {
    url: './ar_schedule_update.cgi?',
    editData: {visitor:visitor},
    beforeInitData: function() {
        $('#schedule').setColProp('archiveid',{editable: true,hidden:false, edittype: 'select', 
            editoptions: {dataUrl: './ar_archiveid_edit_options.cgi?system=' + selected_system,
                          buildSelect: function(data) {
                                if (data.match(/^ERROR/)) {
                                       $('#editmodschedule').hide(); //Makes it disappear ok after alert cleared
                                       alert(data);
                                       return false;
                                }
                                return data;
                           }
                    }
            });
       },
       beforeShowForm: function(formid) {
             //NEED TO EVALUATE CONDITION HERE? AND BAIL IF ERROR
       },
       onClose: function() {............... 
```

在此先感谢，迈克

# android - 使用 FragmentPagerAdapter 在左侧添加选项卡

> ID：15482863
> 
> 赞同：6
> 
> 时间：2013-03-18T17:14:45.940
> 
> 标签：android, android-tabs, illegalstateexception, fragmentpageradapter

这将是我关于标签的最后一个问题，我保证 :) （也许）所以从以前的问题和尝试和错误中，我有 FragmentPagerAdapter 称为 PagerAdapter 它创建了一些标签，也让我能够动态创建新的标签。问题是新标签总是会插入到我现有标签的右侧：

（图片：![http://s7.directupload.net/file/d/3198/73dyzvzv_png.htm](../Images/73a9b756b75b0d578b8187c0215f8a85.png)

我尝试了以下方法：

1.  添加一个静态条目“null”，在创建初始选项卡集时将被跳过。然后稍后在创建“临时选项卡”时，我可以将该条目覆盖到我想要的任何片段。给了我一些奇怪的 IllegalSTateException ......

2.  我认为效果最好的事情实际上真的很想做得不好：而不是添加片段：

    ```
    private final List<Fragment> mFragments = new ArrayList<Fragment>();

    public void addFragment(Fragment fragment) {
        mFragments.add(fragment);
        notifyDataSetChanged();
    } 
    ```

使用

```
mFragments.add(0, fragment); 
```

但它给出了一个带有消息的 IllegalStateException：

```
Can't change tag of fragment ChatFragment 
```

当我尝试添加临时片段时。现在，两个问题：

1.  有没有办法绕过那个片段选项卡，我可以暂时去掉所有片段标签并重建它们吗？或者

2.  有没有更好更优雅的方法来做到这一点？还是我应该重新设计我的 UI 以便可以在右侧使用选项卡？:P

编辑：这里有一些代码：（我不想只是向人们发布死亡之墙，因为它可能会吓跑他们：o）

片段页面适配器：

```
public class PagerAdapter extends FragmentPagerAdapter {

  private Context mContext;

  public PagerAdapter(FragmentManager fm, Context context) {
    super(fm);
    mContext = context;
  }

  private final List<Fragment> mFragments = new ArrayList<Fragment>();
  public void addFragment(Fragment fragment) {
    mFragments.add(fragment);
    notifyDataSetChanged();
  }

  @Override
  public Fragment getItem(int position) {
    return mFragments.get(position);
  }

  @Override
  public int getCount() {
    return mFragments.size();
  }

  @Override
  public String getPageTitle(int position) {

    switch (position) {
    case 0:
      return mContext.getString(R.string.tab_title_chats);
    case 1:
      return mContext.getString(R.string.tab_title_contacts);
    case 2:
      return mContext.getString(R.string.tab_title_create);
    }
    return "WOOPS";

  }

} 
```

主要活动：

```
public class LaunchActivity extends FragmentActivity implements ActionBar.TabListener {

  private PagerAdapter mAdapter;
  private FragmentManager man;
  private ViewPager mViewPager;
  private ActionBar actionBar;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_container);

    // Set up the action bar.
    actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Layout stuff
    mViewPager = (ViewPager) findViewById(R.id.masterViewPager);

    // Creating the mAdapter and initializing the mViewPager
    man = getSupportFragmentManager();
    mAdapter = new PagerAdapter(man, getApplicationContext());
    mViewPager.setAdapter(mAdapter);

    for (int i = 0; i < 2; i++) {
      makeFragments(i);
      System.out.println("Baking tasty fragment instances...nom nom nom");
    }

    // Called when tab changes
    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
      @Override
      public void onPageSelected(int position) {
        actionBar.setSelectedNavigationItem(position);
      }
    });

    for (int i = 0; i < mAdapter.getCount(); i++) {
      System.out.println("Working...");

      actionBar.addTab(actionBar.newTab().setText(mAdapter.getPageTitle(i)).setTabListener(this));
    }

  }

  // Add fragment instances to ArrayList depending on their future position on the ActionBar
  private void makeFragments(int i) {

    if (i == 0) {
      mAdapter.addFragment(ChatFragment.getInstance());

    }
    else if (i == 1) {
      mAdapter.addFragment(ContactFragment.getInstance());
    }
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.layout_container, menu);
    return true;

  }

  @Override
  public void onTabSelected(Tab tab, FragmentTransaction ft) {
    mViewPager.setCurrentItem(tab.getPosition());

  }

  public void addTab(int i) {
    mAdapter.addFragment(ComposeFragment.getInstance());
    System.out.println("Created new Fragment, now adding it as a tab");
    actionBar.addTab(actionBar.newTab().setText(mAdapter.getPageTitle(i)).setTabListener(this));
    System.out.println("Added it as a tab. Hurray");

  }

  /** IGNORE BELOW **/

  @Override
  public void onTabUnselected(Tab tab, FragmentTransaction ft) {
  }

  @Override
  public void onTabReselected(Tab tab, FragmentTransaction ft) {
  }

} 
```

堆栈跟踪：

```
 03-18 18:32:29.274: E/AndroidRuntime(26435): FATAL EXCEPTION: main
    03-18 18:32:29.274: E/AndroidRuntime(26435): java.lang.IllegalStateException: Can't change tag of fragment ChatFragment{41492428 #1 id=0x7f070004 android:switcher:2131165188:1}: was android:switcher:2131165188:1 now android:switcher:2131165188:2
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.support.v4.app.BackStackRecord.doAddOp(BackStackRecord.java:398)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.support.v4.app.BackStackRecord.add(BackStackRecord.java:389)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.support.v4.app.FragmentPagerAdapter.instantiateItem(FragmentPagerAdapter.java:99)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:801)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.support.v4.view.ViewPager.populate(ViewPager.java:992)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:523)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.support.v4.view.ViewPager.setCurrentItemInternal(ViewPager.java:495)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.support.v4.view.ViewPager.dataSetChanged(ViewPager.java:875)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.support.v4.view.ViewPager$PagerObserver.onChanged(ViewPager.java:2690)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.database.DataSetObservable.notifyChanged(DataSetObservable.java:37)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.support.v4.view.PagerAdapter.notifyDataSetChanged(PagerAdapter.java:276)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at com.package.subpackage.components.PagerAdapter.addFragment(PagerAdapter.java:25)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at com.package.subpackage.someapp.core.LaunchActivity.addTab(LaunchActivity.java:116)
    03-18 18:32:29.274: E/AndroidRuntime(26435):    at com.

com.package.subpackage.fragments.full.ChatFragment$1.onClick(ChatFragment.java:51)
03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.view.View.performClick(View.java:4204)
03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.view.View$PerformClick.run(View.java:17355)
03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.os.Handler.handleCallback(Handler.java:725)
03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.os.Looper.loop(Looper.java:137)
03-18 18:32:29.274: E/AndroidRuntime(26435):    at android.app.ActivityThread.main(ActivityThread.java:5041)
03-18 18:32:29.274: E/AndroidRuntime(26435):    at java.lang.reflect.Method.invokeNative(Native Method)
03-18 18:32:29.274: E/AndroidRuntime(26435):    at java.lang.reflect.Method.invoke(Method.java:511)
03-18 18:32:29.274: E/AndroidRuntime(26435):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-18 18:32:29.274: E/AndroidRuntime(26435):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-18 18:32:29.274: E/AndroidRuntime(26435):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T13:05:26.377

我可以通过重写 OnPageChangeListener 的 onPageSelected 方法来实现这一点。假设您按 A<->B<->C 的顺序排列了三页。如果我们从 A 向右滚动，目标是到达 C，同样，如果我们从 C 向左滚动，到达 A。

为此，请将您的页面定义为 5 个页面 (3+2)，并按如下方式组织页面：

C<->A<->B<->C<->A

现在在 onPageSelected 方法中，检查如果位置为 0，则将其更改为 3 (getCount()-2)，如果位置为 4 (getCount()-1)，则将其更改为 1。确保这样可以帮助你.

谢谢

# asp.net-mvc - SelectList 未选择所选项目

> ID：15482867
> 
> 赞同：0
> 
> 时间：2013-03-18T17:15:02.987
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

不知道发生了什么，但是当我在我的选择列表中指定一个选定的项目时，它没有被分配标记中的“选定”属性。

我的模型有一个名为 PlanningYears 的属性，它是一个包含 2011、2012、2013 和 2014 值的列表。

我希望选择当前年份，并且我尝试过：

```
@Html.DropDownListFor(m => m.PlanningYears , new SelectList(Model.PlanningYears, DateTime.Now.Year), null, null) 
```

但无济于事。

这听起来可能与：[http ://aspnet.codeplex.com/workitem/4932](http://aspnet.codeplex.com/workitem/4932)

谁能想到解决方法？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:21:08.600

```
@{    
    var testModel = new int?[]
        {
            2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2012, 2013, 2014
        };

    var current = DateTime.Now.Year;

    var list = testModel.Select(x => new SelectListItem
        {
            Text = x.ToString(),
            Value = x.ToString(),
            Selected = (x == current)
        });
}

@Html.DropDownList("testModel", list) 
```

这是工作 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:15:04.873

一般来说，对于任何下拉列表，您的视图模型中都需要两个属性：要显示的项目列表和将所选值绑定到的字符串或 int。

因此，在您的情况下，您的模型中需要以下两个属性：

```
public int PlanningYear { get; set; }
public List<SelectListItem> PlanningYears { get; set; } 
```

DropDownListFor 帮助器没有重载来设置默认选定值，因此您应该在控制器中执行此操作：

```
viewModel.PlanningYear = DateTime.Now.Year; 
```

然后你的助手在视图中

```
 @Html.DropDownListFor(x => x.PlanningYear, Model.PlanningYears) 
```

# algorithm - 按所有元素对元组数组进行排序

> ID：15482876
> 
> 赞同：2
> 
> 时间：2013-03-18T17:15:34.343
> 
> 标签：algorithm, sorting, data-structures, binary-search-tree, trie

我想按所有元素对元组数组进行排序（就像它们在特里一样）。如果输入是 (1,2,5), (1,2,3), (1,1,4), (2,8,9)，对应的输出是 (1,1,4), ( 1,2,3), (1,2,5),(2,8,9)。相应的尝试将是：

```
 root
   /   \
  1     2
 / \    | 
1   2   8
|  /\   |
4 3  5  9 
```

我正在考虑为元组中的每个位置使用搜索树。还有一种明显的幼稚方式（按第一个位置排序，然后按第二个位置排序，等等）。有人看到更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:24:24.217

您在上面概述的基于 trie 的方法与对元组进行最重要的数字基数排序非常相似。您基本上是根据它们的第一个数字将它们分配到存储桶中，然后根据剩余的数字递归地将存储桶细分为更小的组。您可能需要考虑显式执行 MSD 基数排序而不是构建 trie，因为当数据稀疏时，尝试可能会导致内存效率低下，而 MSD 基数排序具有相当好的内存使用率（特别是如果您隐式实现所有内容）。

在您上面给出的示例中，元组中的所有数字都是个位数。如果是这种情况，您最多可以有 10 × 10 × 10 = 1000 个可能的不同元组，这不是很大。在这种情况下，您可能需要考虑仅使用带有自定义比较器的标准排序算法，因为更优化的排序的好处在这种规模下可能不会那么明显。另一方面，如果您的元组中有更多条目，那么可能值得投资于更聪明的排序，例如 MSD 基数排序。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:57:35.297

基数排序到特里，就像合并排序到二叉树

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T18:13:05.220

如何保持简单，并将元组值视为元组的所有元素的总和到某个基数，比如 10，然后我们将 (1,2,5) 设为 125，所以不时地用任何简单的比较排序（如堆）对它们进行排序种类

# javascript - 禁用使用 javascript 移动的文本

> ID：15482881
> 
> 赞同：0
> 
> 时间：2013-03-18T17:15:51.727
> 
> 标签：javascript, textselection

我正在为以下问题寻找 javascript 解决方案。我在我的网站上使用 CKEditor，但我认为这无关紧要。因为我认为这是本机功能，而不是 CKEditor 的功能。

我想禁用在编辑器中移动选定的文本。用户需要能够在编辑器中移动选择文本，这可能不会被禁用。

我唯一想禁用的是移动选择。或者更好的选择下降。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:29:55.190

使用`ondrop`事件。

```
myEditor.ondrop = function preventDrop (e) {
    e.preventDefault();
}; 
```

[jsfiddle.net/PHgdZ](http://jsfiddle.net/PHgdZ/)

但是，如果更改跟踪是您真正追求的，则无需阻止拖放。只需使用`ondrop`事件来跟踪更改。对于较新的浏览器，只需使用`oninput`. 无论输入法如何，这都会检测到变化。

[jsfiddle.net/PHgdZ/1](http://jsfiddle.net/PHgdZ/1/)

# iphone - 重新创建添加联系人屏幕

> ID：15482884
> 
> 赞同：2
> 
> 时间：2013-03-18T17:16:03.023
> 
> 标签：iphone, ios, xcode, screen, contact

我正在尝试重新创建添加联系人屏幕。我可以使用 UITableViewController 来做到这一点，但是，我无法设置单元格的宽度以为添加照片按钮腾出空间。有任何想法吗？

![截屏](../Images/45f573676ace7d9db4e63c64df457333.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:14:48.153

如果您想查看标准视图在做什么，请编写一个显示视图的应用程序，在模拟器中运行它，当视图出现时暂停调试器，然后在调试器中键入以下命令：

```
po [[UIWindow keyWindow] recursiveDescription] 
```

当你这样做时，你会看到这样的列表：

```
(lldb) po [[UIWindow keyWindow] recursiveDescription]
$0 = 0x075b38c0 <UIWindow: 0x7582f20; frame = (0 0; 320 480); layer = <UIWindowLayer: 0x7581a40>>
   | <UILayoutContainerView: 0x7593940; frame = (0 0; 320 480); autoresize = W+H; layer = <CALayer: 0x7593a00>>
   |    | <UINavigationTransitionView: 0x75961a0; frame = (0 0; 320 480); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x7596270>>
   |    |    | <UIViewControllerWrapperView: 0x81867b0; frame = (0 64; 320 416); autoresize = W+H; layer = <CALayer: 0x8186860>>
   |    |    |    | <ABPersonContainerView: 0x75a14f0; frame = (0 0; 320 416); autoresize = W+H; layer = <CALayer: 0x75a15f0>>
   |    |    |    |    | <ABPersonTableView: 0x7b66e00; baseClass = UITableView; frame = (0 0; 320 416); clipsToBounds = YES; autoresize = W+H; gestureRecognizers = <NSArray: 0x75a2050>; layer = <CALayer: 0x75a1b50>; contentOffset: {0, 0}>
   |    |    |    |    |    | <UITableViewBackgroundView: 0x75a2a50; frame = (0 0; 320 416); layer = <CALayer: 0x75a2ae0>>
   |    |    |    |    |    |    | <UIImageView: 0x75a2c60; frame = (0 0; 320 416); opaque = NO; autoresize = W+H; userInteractionEnabled = NO; layer = <CALayer: 0x75a35b0>>
   |    |    |    |    |    |    | <UIView: 0x75a2da0; frame = (0 0; 320 416); autoresize = W+H; layer = <CALayer: 0x75a35e0>>
   |    |    |    |    |    | <ABChameleonCell: 0x8183e90; baseClass = UITableViewCell; frame = (0 452; 320 46); text = 'add new address'; hidden = YES; autoresize = W; tag = 11; layer = <CALayer: 0x8182fd0>>
   |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x8184950; frame = (41 0; 270 46); autoresize = W; layer = <CALayer: 0x81849d0>>
   |    |    |    |    |    |    | <UITableViewCellContentView: 0x8184060; frame = (42 1; 268 43); gestureRecognizers = <NSArray: 0x8184410>; layer = <CALayer: 0x81841d0>>
   |    |    |    |    |    |    |    | <UILabel: 0x8184460; frame = (10 0; 248 43); text = 'add new address'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x81844f0>>
   |    |    |    |    |    |    | <UITableViewCellEditControl: 0x8185400; frame = (0 0; 41 46); opaque = NO; layer = <CALayer: 0x8185480>>
   |    |    |    |    |    |    |    | <UIImageView: 0x8185b50; frame = (6 9; 29 29); opaque = NO; userInteractionEnabled = NO; tag = 1; layer = <CALayer: 0x8184c90>>
   |    |    |    |    |    |    | <UIImageView: 0x81853a0; frame = (42 1; 268 8); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8185890>>
   |    |    |    |    |    | <ABMultiCell: 0x81804f0; baseClass = UITableViewCell; frame = (0 391; 320 46); autoresize = W; tag = 11; layer = <CALayer: 0x81803d0>>
   |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x8182a60; frame = (41 0; 270 46); autoresize = W; layer = <CALayer: 0x8182ae0>>
   |    |    |    |    |    |    | <UITableViewCellContentView: 0x8180440; frame = (42 1; 268 43); gestureRecognizers = <NSArray: 0x8180760>; layer = <CALayer: 0x8180630>>
   |    |    |    |    |    |    |    | <ABMultiCellContentView_Simple: 0x81808f0; frame = (0 0; 268 43); clipsToBounds = YES; layer = <CALayer: 0x81809b0>>
   |    |    |    |    |    |    |    |    | <UILabel: 0x8180a90; frame = (5 14; 72 17); text = 'home page'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x81809f0>>
   |    |    |    |    |    |    |    |    | <ABDividerView: 0x8180de0; frame = (79 0; 1 44); layer = <CALayer: 0x8180d60>>
   |    |    |    |    |    |    |    |    |    | <ABSteadfastLineView: 0x8180ce0; frame = (0 0; 1 44); layer = <CALayer: 0x8180d90>>
   |    |    |    |    |    |    |    |    | <ABHighlightingTextField: 0x8180f80; baseClass = UITextField; frame = (83 12; 180 21); clipsToBounds = YES; opaque = NO; gestureRecognizers = <NSArray: 0x81814f0>; layer = <CALayer: 0x81810f0>>
   |    |    |    |    |    |    |    |    |    | <UITextFieldLabel: 0x8182330; frame = (0 0; 180 19); text = 'URL'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x81823c0>>
   |    |    |    |    |    |    |    | <UILabel: 0x8182e00; frame = (0 0; 0 0); clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x8182e90>>
   |    |    |    |    |    |    | <UITableViewCellEditControl: 0x8183560; frame = (0 0; 41 46); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8183c60>>
   |    |    |    |    |    |    |    | <UIImageView: 0x8183c90; frame = (20 24; 0 0); userInteractionEnabled = NO; tag = 1; layer = <CALayer: 0x8183cf0>>
   |    |    |    |    |    |    | <UIImageView: 0x81834b0; frame = (42 1; 268 8); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8183ac0>>
   |    |    |    |    |    | <ABMultiCell: 0x817d210; baseClass = UITableViewCell; frame = (0 331; 320 45); autoresize = W; tag = 12; layer = <CALayer: 0x817d110>>
   |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x817f960; frame = (41 0; 270 45); autoresize = W; layer = <CALayer: 0x817f9e0>>
   |    |    |    |    |    |    |    | <UIView: 0x817fa10; frame = (1 0; 268 1); hidden = YES; autoresize = W; layer = <CALayer: 0x817fa70>>
   |    |    |    |    |    |    | <UITableViewCellContentView: 0x817d140; frame = (42 0; 248 43); gestureRecognizers = <NSArray: 0x817d470>; layer = <CALayer: 0x817d1a0>>
   |    |    |    |    |    |    |    | <ABMultiCellContentView_Simple: 0x817d790; frame = (0 0; 248 43); text = 'Default'; clipsToBounds = YES; layer = <CALayer: 0x817d850>>
   |    |    |    |    |    |    |    |    | <UILabel: 0x817d8d0; frame = (5 14; 72 17); text = 'text tone'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x817d6c0>>
   |    |    |    |    |    |    |    |    | <ABHighlightingTextField: 0x817db80; baseClass = UITextField; frame = (83 12; 160 21); text = 'Default'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; gestureRecognizers = <NSArray: 0x817e0b0>; layer = <CALayer: 0x817d8a0>>
   |    |    |    |    |    |    |    |    |    | <UITextFieldLabel: 0x817dcf0; frame = (0 0; 160 19); text = 'Default'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x817dd80>>
   |    |    |    |    |    |    |    | <UILabel: 0x81801f0; frame = (0 0; 0 0); clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x8180280>>
   |    |    |    |    |    |    | <UITableViewCellEditControl: 0x817fde0; frame = (0 0; 41 45); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x817fe60>>
   |    |    |    |    |    |    |    | <UIImageView: 0x817fe90; frame = (20 23; 0 0); userInteractionEnabled = NO; tag = 1; layer = <CALayer: 0x817fef0>>
   |    |    |    |    |    |    | <UIButton: 0x817d4c0; frame = (280 0; 30 43); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x817d580>>
   |    |    |    |    |    |    |    | <UIImageView: 0x817f420; frame = (10 15; 10 13); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x817f480>>
   |    |    |    |    |    |    | <UIView: 0x817fb80; frame = (42 0; 268 1); userInteractionEnabled = NO; layer = <CALayer: 0x817fbe0>>
   |    |    |    |    |    | <ABMultiCell: 0x8143ed0; baseClass = UITableViewCell; frame = (0 286; 320 45); autoresize = W; tag = 12; layer = <CALayer: 0x813a1a0>>
   |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x817ad90; frame = (41 0; 270 45); autoresize = W; layer = <CALayer: 0x81798f0>>
   |    |    |    |    |    |    |    | <UIView: 0x817ae10; frame = (1 44; 268 1); hidden = YES; autoresize = W+TM; layer = <CALayer: 0x817ae70>>
   |    |    |    |    |    |    | <UITableViewCellContentView: 0x8143200; frame = (42 1; 248 43); gestureRecognizers = <NSArray: 0x8141ba0>; layer = <CALayer: 0x8140760>>
   |    |    |    |    |    |    |    | <ABMultiCellContentView_Simple: 0x8144120; frame = (0 0; 248 43); text = 'Default'; clipsToBounds = YES; layer = <CALayer: 0x8157150>>
   |    |    |    |    |    |    |    |    | <UILabel: 0x813f890; frame = (5 14; 72 17); text = 'ringtone'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x8157510>>
   |    |    |    |    |    |    |    |    | <ABHighlightingTextField: 0x81412d0; baseClass = UITextField; frame = (83 12; 160 21); text = 'Default'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; gestureRecognizers = <NSArray: 0x817b320>; layer = <CALayer: 0x813d910>>
   |    |    |    |    |    |    |    |    |    | <UITextFieldLabel: 0x81706b0; frame = (0 0; 160 19); text = 'Default'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8156a20>>
   |    |    |    |    |    |    |    | <UILabel: 0x817cdf0; frame = (0 0; 0 0); clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x817ce80>>
   |    |    |    |    |    |    | <UITableViewCellEditControl: 0x8153b70; frame = (0 0; 41 45); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8153bf0>>
   |    |    |    |    |    |    |    | <UIImageView: 0x817c040; frame = (20 23; 0 0); userInteractionEnabled = NO; tag = 1; layer = <CALayer: 0x8153c20>>
   |    |    |    |    |    |    | <UIButton: 0x8179120; frame = (280 1; 30 43); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8145d80>>
   |    |    |    |    |    |    |    | <UIImageView: 0x8152f20; frame = (10 15; 10 13); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8141820>>
   |    |    |    |    |    |    | <UIImageView: 0x813a780; frame = (42 1; 268 8); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x817cc30>>
   |    |    |    |    |    | <ABMultiCell: 0x75bda30; baseClass = UITableViewCell; frame = (0 225; 320 46); autoresize = W; tag = 11; layer = <CALayer: 0x75bd910>>
   |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x75c0300; frame = (41 0; 270 46); autoresize = W; layer = <CALayer: 0x75c0380>>
   |    |    |    |    |    |    | <UITableViewCellContentView: 0x75bd980; frame = (42 1; 268 43); gestureRecognizers = <NSArray: 0x75bdde0>; layer = <CALayer: 0x75bdc00>>
   |    |    |    |    |    |    |    | <ABMultiCellContentView_Simple: 0x75bdf70; frame = (0 0; 268 43); clipsToBounds = YES; layer = <CALayer: 0x75be030>>
   |    |    |    |    |    |    |    |    | <UILabel: 0x75be0d0; frame = (5 14; 72 17); text = 'home'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x75be070>>
   |    |    |    |    |    |    |    |    | <ABDividerView: 0x75be680; frame = (79 0; 1 44); layer = <CALayer: 0x75be4d0>>
   |    |    |    |    |    |    |    |    |    | <ABSteadfastLineView: 0x75be320; frame = (0 0; 1 44); layer = <CALayer: 0x75be500>>
   |    |    |    |    |    |    |    |    | <ABHighlightingTextField: 0x75be820; baseClass = UITextField; frame = (83 12; 180 21); clipsToBounds = YES; opaque = NO; gestureRecognizers = <NSArray: 0x75bed90>; layer = <CALayer: 0x75be990>>
   |    |    |    |    |    |    |    |    |    | <UITextFieldLabel: 0x75bfbd0; frame = (0 0; 180 19); text = 'Email'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x75bfc60>>
   |    |    |    |    |    |    |    | <UILabel: 0x813ad50; frame = (0 0; 0 0); clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x813f2d0>>
   |    |    |    |    |    |    | <UITableViewCellEditControl: 0x813bdb0; frame = (0 0; 41 46); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x81397a0>>
   |    |    |    |    |    |    |    | <UIImageView: 0x8140ee0; frame = (20 24; 0 0); userInteractionEnabled = NO; tag = 1; layer = <CALayer: 0x813bf90>>
   |    |    |    |    |    |    | <UIImageView: 0x817a3f0; frame = (42 1; 268 8); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8170920>>
   |    |    |    |    |    | <ABMultiCell: 0x75b7990; baseClass = UITableViewCell; frame = (0 164; 320 46); autoresize = W; tag = 11; layer = <CALayer: 0x75b7890>>
   |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x75bb650; frame = (41 0; 270 46); autoresize = W; layer = <CALayer: 0x75bb750>>
   |    |    |    |    |    |    | <UITableViewCellContentView: 0x75b78e0; frame = (42 1; 268 43); gestureRecognizers = <NSArray: 0x75b7d40>; layer = <CALayer: 0x75b7b20>>
   |    |    |    |    |    |    |    | <ABMultiCellContentView_Simple: 0x75b7ed0; frame = (0 0; 268 43); clipsToBounds = YES; layer = <CALayer: 0x75b7fe0>>
   |    |    |    |    |    |    |    |    | <UILabel: 0x75b86b0; frame = (5 14; 72 17); text = 'mobile'; clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x75b8740>>
   |    |    |    |    |    |    |    |    | <ABDividerView: 0x75b8a40; frame = (79 0; 1 44); layer = <CALayer: 0x75b89c0>>
   |    |    |    |    |    |    |    |    |    | <ABSteadfastLineView: 0x75b8ab0; frame = (0 0; 1 44); layer = <CALayer: 0x75b89f0>>
   |    |    |    |    |    |    |    |    | <ABHighlightingTextField: 0x75b8c40; baseClass = UITextField; frame = (83 12; 180 21); clipsToBounds = YES; opaque = NO; gestureRecognizers = <NSArray: 0x75b91b0>; layer = <CALayer: 0x75b8db0>>
   |    |    |    |    |    |    |    |    |    | <UITextFieldLabel: 0x75b9ff0; frame = (0 0; 180 19); text = 'Phone'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x75ba080>>
   |    |    |    |    |    |    |    | <UILabel: 0x75bd5f0; frame = (0 0; 0 0); clipsToBounds = YES; userInteractionEnabled = NO; layer = <CALayer: 0x75bd680>>
   |    |    |    |    |    |    | <UITableViewCellEditControl: 0x75bba70; frame = (0 0; 41 46); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x75bbb40>>
   |    |    |    |    |    |    |    | <UIImageView: 0x75bc980; frame = (20 24; 0 0); userInteractionEnabled = NO; tag = 1; layer = <CALayer: 0x75bbd90>>
   |    |    |    |    |    |    | <UIImageView: 0x75bc320; frame = (42 1; 268 8); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x75bbea0>>
   |    |    |    |    |    | <UIView: 0x817afb0; frame = (0 0; 320 164); layer = <CALayer: 0x817b010>>
   |    |    |    |    |    |    | <ABPersonTableHeaderView: 0x75a6c60; frame = (0 0; 320 164); clipsToBounds = YES; layer = <CALayer: 0x75a6d40>>
   |    |    |    |    |    |    |    | <UITableView: 0x7b69200; frame = (90 15; 222 134); clipsToBounds = YES; gestureRecognizers = <NSArray: 0x75a7360>; layer = <CALayer: 0x75a6f90>; contentOffset: {0, 0}>
   |    |    |    |    |    |    |    |    | <ABMultiCell: 0x8178a20; baseClass = UITableViewCell; frame = (0 0; 222 134); autoresize = W; layer = <CALayer: 0x8178b90>>
   |    |    |    |    |    |    |    |    |    | <UIGroupTableViewCellBackground: 0x8188af0; frame = (1 0; 220 134); autoresize = W; layer = <CALayer: 0x8188b70>>
   |    |    |    |    |    |    |    |    |    | <UITableViewCellContentView: 0x8178ed0; frame = (2 1; 218 131); gestureRecognizers = <NSArray: 0x8179440>; layer = <CALayer: 0x81790c0>>
   |    |    |    |    |    |    |    |    |    |    | <ABMultiCellContentView_Name: 0x75aa690; frame = (0 0; 218 131); clipsToBounds = YES; layer = <CALayer: 0x75aa7f0>>
   |    |    |    |    |    |    |    |    |    |    |    | <ABHighlightingTextField: 0x75af0f0; baseClass = UITextField; frame = (3 12; 210 21); clipsToBounds = YES; opaque = NO; tag = 1; gestureRecognizers = <NSArray: 0x75b10f0>; layer = <CALayer: 0x75af2b0>>
   |    |    |    |    |    |    |    |    |    |    |    |    | <UITextFieldLabel: 0x75b5d50; frame = (-8 0; 210 19); text = 'First'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x759c7b0>>
   |    |    |    |    |    |    |    |    |    |    |    | <ABHighlightingTextField: 0x75b3450; baseClass = UITextField; frame = (3 56; 210 21); clipsToBounds = YES; opaque = NO; tag = 2; gestureRecognizers = <NSArray: 0x75b3c20>; layer = <CALayer: 0x75b35c0>>
   |    |    |    |    |    |    |    |    |    |    |    |    | <UITextFieldLabel: 0x75b6300; frame = (-8 0; 210 19); text = 'Last'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x75b6390>>
   |    |    |    |    |    |    |    |    |    |    |    | <ABDividerView: 0x75b4c20; frame = (0 44; 218 2); layer = <CALayer: 0x75b4ce0>>
   |    |    |    |    |    |    |    |    |    |    |    |    | <ABSteadfastLineView: 0x75b4f50; frame = (0 0; 218 1); layer = <CALayer: 0x75b4fe0>>
   |    |    |    |    |    |    |    |    |    |    |    |    | <ABSteadfastLineView: 0x7582ad0; frame = (0 1; 218 1); layer = <CALayer: 0x754e520>>
   |    |    |    |    |    |    |    |    |    |    |    | <ABHighlightingTextField: 0x75b0f10; baseClass = UITextField; frame = (3 100; 210 21); clipsToBounds = YES; opaque = NO; tag = 3; gestureRecognizers = <NSArray: 0x75547e0>; layer = <CALayer: 0x7555f90>>
   |    |    |    |    |    |    |    |    |    |    |    |    | <UITextFieldLabel: 0x75b6600; frame = (-8 0; 210 19); text = 'Company'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x75b6690>>
   |    |    |    |    |    |    |    |    |    |    |    | <ABDividerView: 0x7594010; frame = (0 88; 218 2); layer = <CALayer: 0x7581a10>>
   |    |    |    |    |    |    |    |    |    |    |    |    | <ABSteadfastLineView: 0x75a7300; frame = (0 0; 218 1); layer = <CALayer: 0x75905b0>>
   |    |    |    |    |    |    |    |    |    |    |    |    | <ABSteadfastLineView: 0x75aa790; frame = (0 1; 218 1); layer = <CALayer: 0x7592ba0>>
   |    |    |    |    |    |    |    |    |    | <UIImageView: 0x8189540; frame = (2 1; 218 8); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x8189b50>>
   |    |    |    |    |    |    |    | <ABPersonImageView: 0x75a8b80; baseClass = UIControl; frame = (9 15; 68 68); autoresize = RM+BM; gestureRecognizers = <NSArray: 0x75a94b0>; layer = <CALayer: 0x75a8c90>>
   |    |    |    |    |    |    |    |    | <ABClippingImageView: 0x817b340; frame = (0 0; 68 68); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x75ac9d0>>
   |    |    |    |    |    |    |    | <ABPersonNameDisplayView: 0x81796f0; baseClass = UIControl; frame = (89 15; 222 56); alpha = 0; autoresize = W; gestureRecognizers = <NSArray: 0x8179ac0>; layer = <CALayer: 0x81797f0>>
   |    |    |    |    |    |    |    |    | <UILabel: 0x8179d80; frame = (0 28; 0 0); clipsToBounds = YES; autoresize = W; userInteractionEnabled = NO; layer = <CALayer: 0x8179ed0>>
   |    |    |    |    |    |    |    |    | <UILabel: 0x817a2c0; frame = (0 0; 222 0); clipsToBounds = YES; autoresize = W; userInteractionEnabled = NO; layer = <CALayer: 0x817a350>>
   |    |    |    |    |    | <UIImageView: 0x7595250; frame = (1 408; 318 7); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x759eb20>>
   |    |    |    |    |    | <UIImageView: 0x759fd30; frame = (312 1; 7 290); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x759f080>>
   |    | <UINavigationBar: 0x7593b40; frame = (0 20; 320 44); autoresize = W; gestureRecognizers = <NSArray: 0x7595b40>; layer = <CALayer: 0x7593c40>>
   |    |    | <_UINavigationBarBackground: 0x7593fa0; frame = (0 0; 320 44); opaque = NO; autoresize = W; userInteractionEnabled = NO; layer = <CALayer: 0x7594080>>
   |    |    |    | <UIImageView: 0x75947b0; frame = (0 44; 320 3); opaque = NO; autoresize = W+TM; userInteractionEnabled = NO; layer = <CALayer: 0x7594810>>
   |    |    | <UINavigationItemView: 0x7596ac0; frame = (98 9; 123 27); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x7596b90>>
   |    |    | <UINavigationButton: 0x759b3d0; frame = (5 7; 60 30); opaque = NO; layer = <CALayer: 0x759b520>>
   |    |    |    | <UIImageView: 0x759d230; frame = (0 0; 60 30); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x759d290>>
   |    |    |    | <UIButtonLabel: 0x759bf90; frame = (10 7; 40 15); text = 'Cancel'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x759c080>>
   |    |    | <UINavigationButton: 0x759e860; frame = (265 7; 50 30); opaque = NO; layer = <CALayer: 0x759e950>>
   |    |    |    | <UIImageView: 0x759f0b0; frame = (0 0; 50 30); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x759f110>>
   |    |    |    | <UIButtonLabel: 0x759ea00; frame = (10 7; 30 15); text = 'Done'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x759eaf0>> 
```

虽然那里有很多，但我想你会看到这个 tableview 的第一个单元格是一个很大的单元格，带有“添加照片”图像和另一个嵌套的 tableview 在它的右边。

但正如您所发现的，如果您只是尝试添加联系人，[`ABNewPersonViewController`](http://developer.apple.com/library/ios/#documentation/AddressBookUI/Reference/ABNewPersonViewController_Class/Reference/Reference.html)则提供必要的功能（实际上，这就是我用来创建上述递归描述的功能）。当您发布此问题时，我以为您只是想更好地了解此 UI 是如何生成的。但与往常一样，如果您可以使用现有的 API，那就更好了。

# jquery - 使用 JQuery 调整大小不起作用

> ID：15482887
> 
> 赞同：0
> 
> 时间：2013-03-18T17:16:15.697
> 
> 标签：jquery, jquery-ui

我正在尝试使用 jQuery 重新调整大小并拖动 div，获取新的位置和尺寸，然后发布到数据库。问题是，它不会重新调整大小，请帮助

这是代码...

```
<html>      
<head>
<title>resize</title>
<script type="text/javascript"                src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript"    src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>

<script type="text/javascript">
    //Global variables
    var request,height,width,xpos,ypos,specs;
    //Ajax lines

    function getRequestData()//determine the browser
    {
        if(window.ActiveXObject){request=new     ActiveXObject('Microsoft.XMLHTTP');}
        if(window.XMLHttpRequest){request=new XMLHttpRequest();}
        else{alert('Your Browser is not AJAX enabled');request=null;}
        return request;
    }

    function sendIt(specs)
    {
        request=getRequestData();
        data="d="+specs;
        request.open("POST","post.php",true);
        request.setRequestHeader('Content-Type','application/x-www-form-   urlencoded');
        request.send(data);
    }

    /*request.onreadystatechange=function()
    {
        if((request.readyState==4)&&request.status==200)
        {

        }
    }*/

    function drag()
    {
        $('#prototype').draggable
        (
            {
                containment:'document',
                cursor:'move',
                stop:getPos
            }
        );
        $('#prototype').resizable
        (
            {
                containment:'document',
                stop:getDimension
            }
        );
    }

    function getPos(event,ui)
    {
        xpos=parseInt(ui.offset.left);
        ypos=parseInt(ui.offset.top);
          specs='background:black;position:relative;left:'+xpos+';top:'+ypos+';';
    }

    function getDimension(event,ui)
    {
        width=parseInt(ui.size.width);
        height=parseInt(ui.size.height);
        specs+='width:'+width+';height:'+height+';';
    }

</script>
</head>
<body>
<?php
    $css="SELECT CSS FROM style";
    $css=mysql_query($css) or die(mysql_error());
    $css=mysql_fetch_array($css);
    foreach($css as $c);
?>
<div id="prototype" style="<?echo $c?>"></div>
<button onclick="JavaScript:sendIt(specs);">save</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:27:29.713

您是否将其包装在 document.ready 中？您的 jQuery 不会作用于加载时不存在的元素。

```
$(document).ready(function() {
    ...
}); 
```

或速记

```
$(function() {
    ...
}); 
```

# jquery - Jquery Nivo Slider 在主页上不起作用 - Joomla 2.5

> ID：15482890
> 
> 赞同：0
> 
> 时间：2013-03-18T17:16:25.013
> 
> 标签：jquery, conflict, nivo-slider

我是 Joomla 的新手，目前正在使用 Joomla 2.5 制作网站[http://www.aapkikundli.com/](http://www.aapkikundli.com/)

我的 Nivo Slider 工作正常，直到 2 天前突然停止在主页上工作。然而令我惊讶的是，它在其他菜单项上运行良好

我怀疑一些 jquery 冲突并使用 FireBug 调试了页面。我现在在主页上看到 3 个错误，但不知道如何在 Joomla 2.5 上查找和修复这些文件！

非常感谢您的帮助。！

Chrome调试器的错误如下

```
Failed to load resource: the server responded with a status of 404 (Not Found)     
https://ajax.googleapis.com/ajax/libs/jquery/1.9/jquery.min.js
Uncaught ReferenceError: jQuery is not defined jquerynoconflict.js:1
Uncaught SyntaxError: Unexpected token ( www.aapkikundli.com:314
Uncaught TypeError: Object #<Object> has no method 'wowSlider' script.js:22
Failed to load resource: the server responded with a status of 400 (OK) 
```

如何找到这些文件并更正它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T12:31:21.407

我找到了一个很适合你的简单修复方法。禁用其中之一.. 例如在 nivo-slider/ppgallery 冲突中转到“滑块”模块...高级选项并查找“包含 jQuery 核心”.. 设置为否。你的冲突应该得到解决！

# asp.net-mvc - asp net mvc 部分视图验证

> ID：15482892
> 
> 赞同：1
> 
> 时间：2013-03-18T17:16:29.043
> 
> 标签：asp.net-mvc, validation, partial-views

你好你好吗？我正在尝试验证 ASP NET MVC 中的表单。

我有一个部分视图“地址”，可用于某些实体，如公司、个人等。

我的问题是，当我提交表单时，只有父视图的控件得到验证，部分视图中的控件没有。

这是一些代码，我希望你能帮我

**人物视图**

```
@model Entities.Person

@using (Html.BeginForm("Create", "Person", FormMethod.Post))
{

    <table>
        <tr>
            <td>
                @Html.LabelFor(model => model.FirstName)
                <div class="control">
                    @Html.TextBoxFor(model => model.FirstName, new { @maxlength = 7, @class = "numeric"})
                    @Html.ValidationMessageFor(model => model.FirstName)
                </div>
                <div class="spacer-short"></div>
            </td>
            <td>
                @Html.LabelFor(model => model.LastName)
                <div class="control">
                    @Html.TextBoxFor(model => model.LastName, new { @maxlength = 7, @class = "numeric"})
                    @Html.ValidationMessageFor(model => model.LastName)
                </div>
                <div class="spacer-short"></div>
            </td>
        </tr>
    </table>
    @{ Html.RenderAction("Index", "Address", new {id = Model.AddressId});} //Renders the Address form part

    <div class="spacer"></div>
    <button type="submit" data-button="true" data-button-icon="ui-icon-disk" class="">Create</button>
    <button type="button" data-button="true" data-button-icon="ui-icon-circle-close" class="button-cancel">Cancel</button>
} 
```

**地址视图**

```
@model Entities.Address

<table>
     <tr>
         <td>
            @Html.LabelFor(model => model.Street)
            <div class="control">
                @Html.TextBox("Address.Street", Model.Street)
                @Html.ValidationMessage("Address.Street")
             </div>
           <div class="spacer-short"></div>
           </td>
           <td>
              @Html.LabelFor(model => model.Number)
              <div class="control">
                @Html.TextBox("Address.Number", Model.Number)
                @Html.ValidationMessage("Address.Number")
             </div>
           <div class="spacer-short"></div>
            </td>
        </tr>
    </table> 
```

然后我有一些用于人员和地址字段的验证元数据（[必需]）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T19:07:18.040

使用`@Html.Partial(...)`并期望显示验证错误的一个常见错误是未将 ViewData 传递给该部分。：

```
@Html.Partial([ViewName], [EmailAddressObject], ViewData) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:19:37.623

尝试使用`Html.Partial(...)`而不是`Html.RenderAction(...)`渲染局部视图。这可能会抑制验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:14:24.783

试试这个：

```
@Html.EditorFor(Model.Street)
@Html.ValidationMessageFor(Model.Street) 
```

而不是这个：

```
@Html.TextBox("Address.Street", Model.Street)
@Html.ValidationMessage("Address.Street") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-26T14:04:55.397

**模型**

> 重要提示：管理 Nuget 包

=>> JQuery.Validation

=>> Microsoft.JQueryUnobtrusive.Validation

安装。

**1) 第一步**

> 使用 System.ComponentModel.DataAnnotations；

**2)**

```
 public int Id { get; set; }
    [Required(ErrorMessage = "* Kategori adı boş geçilemez.")]
    [DisplayName("Kategori Adı")]
    public string CategoryName { get; set; }
    [Required(ErrorMessage = "* Kategori açıklaması boş geçilemez.")]
    [DisplayName("Kategori Açıklaması")]
    public string Description { get; set; } 
```

**3)**

```
if (model != null && ModelState.IsValid)
                {
                    var categoryCreate = new Categories
                    {
                       //code
                    };
                    _CategoriesService.Create(categoryCreate);
                } 
```

**4）** 添加ViewModel @model Models.CategoryViewModel 之后

```
@Html.TextBoxFor(model => model.CategoryName, new { @class = "form-control input-sm", id = "categoryTitle", @placeholder = "Kategori adını giriniz.", @type= "text", @required=true })

@Html.ValidationMessageFor(model => model.CategoryName, "", new { @class = "error-message" })

@Html.TextBoxFor(model => model.Description, new { @class = "form-control input-sm", id = "categoryArticle", @placeholder = "Kategori açıklamasını giriniz.", @type = "text", @required = true })

@Html.ValidationMessageFor(model => model.Description, "", new { @class = "error-message" }) 
```

# extjs - ExtJS - 将 ExtJS 组件的状态保存在数据库中

> ID：15482898
> 
> 赞同：3
> 
> 时间：2013-03-18T17:16:49.667
> 
> 标签：extjs

您是否知道如何将 ExtJS 组件的状态（宽度、可折叠、...）保存在数据库中，而不是保存在 cookie 中。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T17:22:15.857

您所要做的就是实现一个由您正在使用的[有状态](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.state.Stateful)组件使用的[提供程序。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.state.Provider)

在你的`Ext.state.Provider`，你实现`get`和`set`使用你的数据库，可能使用 AJAX，甚至可能使用 Ext 的[RESTful](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Rest)存储

然后你告诉你的应用程序通过调用来使用你的自定义提供程序

```
Ext.state.Manager.setProvider(foo.providers.AjaxProvider); 
```

有关自定义示例，请参阅[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.state.CookieProvider](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.state.CookieProvider)

# tomcat - Grails 日志记录配置被忽略

> ID：15482900
> 
> 赞同：0
> 
> 时间：2013-03-18T17:16:59.463
> 
> 标签：tomcat, grails, logging, log4j

Log4j 似乎忽略了我在 Config.groovy 中的一些 Grails Logging 设置，但没有忽略其他设置。我在 tomcat 上运行 Grails 2.2.1。

我已经设置了我的配置文件（如下）以将所有错误和更高消息记录到控制台（映射到 tomcat 中的 catalina.out），将解析、调度和联合包中的所有信息和更高消息记录到 master.log , 并将 parse、schedule 和 syndicate 包中的更高消息调试到各自的 parse、schedule 和 syndicate 日志中。

appenders 部分中提到的所有文件都在适当的位置创建，并接收日志消息。但是，**master.log 正在接收调试消息**，并且 master.log 和 syndicate.log**的大小都已增长到 19GB**，而配置明确将它们限制为 25MB...

谁能看到我做错了什么？grails 怎么会尊重我的配置中的一行而不是下一行？我的 Config.groovy 文件的相关部分是：

```
log4j = {
// Uncomment to override the default logging level across all
//   classes.
root {
      warn catalinaOut
}

appenders {
  // this line prevents all messages from being duplicated to stdout DONT DELETE
    console name: "stdout",
            layout: pattern(conversionPattern: "")
    console name: "catalinaOut",
                layout: pattern(conversionPattern: "%-5p [%d] %c{2} %m%n")
    file name: "dcsFileAppender",
                file: "logs/data-collection-system/master.log",
                maxFileSize: "25MB",in
                maxBackupIndex: 10,
                layout: pattern(conversionPattern: "%-5p [%d] %c{2} %m%n")
    file name: "parseFileAppender",
                file: "logs/data-collection-system/parse.log",
                maxFileSize: "25MB",
                maxBackupIndex: 10,
                layout: pattern(conversionPattern: "%-5p [%d] %c{2} %m%n")
    file name: "scheduleFileAppender",
                file: "logs/data-collection-system/schedule.log",
                maxFileSize: "25MB",
                maxBackupIndex: 10,
                layout: pattern(conversionPattern: "%-5p [%d] %c{2} %m%n")
    file name: "syndicateFileAppender",
                file: "logs/data-collection-system/syndicate.log",
                maxFileSize: "25MB",
                maxBackupIndex: 10,
                layout: pattern(conversionPattern: "%-5p [%d] %c{2} %m%n")
}

environments {
    production {
      info dcsFileAppender: ["com.progauge.icp.parse", "com.progauge.icp.schedule", "com.progauge.icp.syndicate"]
      all parseFileAppender: ["com.progauge.icp.parse"],
        scheduleFileAppender: ["com.progauge.icp.schedule"],
        syndicateFileAppender: ["com.progauge.icp.syndicate"]
    }
}
} 
```

作为旁注，我必须将 stdout 的模式设置为空字符串，因为我不想要标准的控制台日志记录行为，但是将 appender 设置为 null 会破坏我的自定义控制台日志记录，这也是我不想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:37:37.730

到目前为止，我发现您的配置存在三个主要问题：

*   日志级别由*每个记录器*设置- 如果您想将不同级别的消息从同一记录器发送到不同的附加器，那么您需要将记录器设置为最详细的级别，然后在相关附加器上设置*阈值*以过滤掉消息日志级别太细了。
*   如果您想限制文件大小并进行备份，那么您应该使用类型的附加程序`rollingFile`而不是`file`
*   禁止`stdout`您应该使用的默认附加程序`'null'`（这是与值相反的四个字符串 null `null`，并定义了一个 Log4J `NullAppender`，一个忽略写入它的任何日志消息的接收器）。

尝试更多类似的东西：

```
log4j = {
  // Uncomment to override the default logging level across all
  // classes.
  root {
      warn 'catalinaOut'
  }

  appenders {
    // this line prevents all messages from being duplicated to stdout
    'null' name: "stdout"

    console name: "catalinaOut",
                layout: pattern(conversionPattern: "%-5p [%d] %c{2} %m%n")

    // threshold to make this appender only log INFO and higher messages
    rollingFile name: "dcsFileAppender",
                file: "logs/data-collection-system/master.log",
                maxFileSize: "25MB",
                maxBackupIndex: 10,
                layout: pattern(conversionPattern: "%-5p [%d] %c{2} %m%n"),
                threshold: org.apache.log4j.Level.INFO

    rollingFile name: "parseFileAppender",
                file: "logs/data-collection-system/parse.log",
                maxFileSize: "25MB",
                maxBackupIndex: 10,
                layout: pattern(conversionPattern: "%-5p [%d] %c{2} %m%n")
    rollingFile name: "scheduleFileAppender",
                file: "logs/data-collection-system/schedule.log",
                maxFileSize: "25MB",
                maxBackupIndex: 10,
                layout: pattern(conversionPattern: "%-5p [%d] %c{2} %m%n")
    rollingFile name: "syndicateFileAppender",
                file: "logs/data-collection-system/syndicate.log",
                maxFileSize: "25MB",
                maxBackupIndex: 10,
                layout: pattern(conversionPattern: "%-5p [%d] %c{2} %m%n")
  }

  environments {
    production {
      all parseFileAppender: ["com.progauge.icp.parse"],
        scheduleFileAppender: ["com.progauge.icp.schedule"],
        syndicateFileAppender: ["com.progauge.icp.syndicate"],
        dcsFileAppender: ["com.progauge.icp.parse", "com.progauge.icp.schedule", "com.progauge.icp.syndicate"]
    }
  }
} 
```

# request - 使用 Fluent API 请求的代理身份验证？

> ID：15482903
> 
> 赞同：4
> 
> 时间：2013-03-18T17:17:02.413
> 
> 标签：request, client, fluent-interface

我目前正在使用带有代理信息的获取请求：

```
String result1 = Request.Get("_http://somehost/")
        .version(HttpVersion.HTTP_1_1)
        .connectTimeout(1000)
        .socketTimeout(1000)
        .viaProxy(new HttpHost("myproxy", 8080))
        .execute().returnContent().asString(); 
```

结果是“需要代理身份验证”错误。我相信发出请求的服务器需要用户名和密码？如果是这样，我该如何添加该细节？我以前从未使用过 Fluent API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-03T12:41:59.397

这是一个使用 Fluent API 的示例。执行程序可用于指定代理的凭据。

```
 HttpHost proxyHost = new HttpHost("myproxy", 8080);

    Executor executor = Executor.newInstance()
        .auth(proxyHost, "username", "password");

    String result1 = executor.execute(Request.Get("_http://somehost/")
        .viaProxy(proxyHost))
        .returnContent()
        .asString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T11:10:49.333

你需要一个`CredentialsProvider`.

```
final CredentialsProvider credsProvider = new BasicCredentialsProvider();
credsProvider.setCredentials(new AuthScope(proxy), new UsernamePasswordCredentials(username, password));

final HttpPost httppost = new HttpPost(uri);
httppost.setConfig(RequestConfig.custom().setProxy(proxy).build());

String line = HttpClientBuilder.create().setDefaultCredentialsProvider(credsProvider).build() .execute(httppost).getStatusLine()); 
```

此外，4.3.1 中存在影响身份验证的错误。它在 4.3.2 中修复。 [https://issues.apache.org/jira/browse/HTTPCLIENT-1435](https://issues.apache.org/jira/browse/HTTPCLIENT-1435)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-31T12:11:16.400

```
Executor executor = Executor.newInstance()
        .auth(new HttpHost("myproxy", 8080), "username", "password")
        .authPreemptive(new HttpHost("myproxy", 8080));
Response response = executor.execute(<your reques>); 
```

# dependency-injection - 在进行构造函数或设置器注入时，依赖项的正确粒度是多少？

> ID：15482905
> 
> 赞同：3
> 
> 时间：2013-03-18T17:17:06.407
> 
> 标签：dependency-injection, inversion-of-control

我正在尝试为自己定义一些依赖注入指南。在为要通过构造函数或 setter 注入注入的类定义依赖项时，正确的粒度应该是多少？该类可以是服务、存储库等。假设有一个存储库类，如下所示：

```
public class ProductRepository 
{
    //Option-A
    public ProductRepository(DataSource dataSource)
    {
    }

    //Option-B      
    public ProductRepository(SqlSession sqlSession)
    {
    }

    //Option-C
    public ProductRepository(SqlSessionTemplate sqlSessionTemplate)
    {
    }
} 
```

上述类所需的最小依赖是 DataSource 接口。存储库类在内部使用 SqlSessionTemplate（SqlSession 接口的实现）。如代码所示，构造函数注入有 3 种选择。以下是我的理解：

**Option-A（DataSource 依赖项）** 这是存储库类的最小依赖项。从消费者的角度来看，此构造函数是正确的选择，但从单元测试的角度来看，它不适合，因为 DataSource 在存储库实现中由 SqlSessionTemplate 内部使用。

**Options-B (SqlSession 依赖)** 从单元测试的角度来看，这是正确的选择，但从消费者的角度来看，这是正确的选择。此外，存储库实现与 SqlSessionTemplate 接口的特定实现紧密耦合。因此，如果消费者通过 SqlSessionTemplate 以外的一些不同的 SqlSession 接口，它将不起作用。

**Options-C（SqlSessionTemplate 依赖项）** SqlSessionTemplate 作为实现而不是接口似乎不适合单元测试。此外，与 DataSource 相比，实例化 SqlSessionTemplate 对消费者不利。因此放弃了这个选项。

Option-A 和 Option-B 似乎是可用的选择。但是，消费者的观点和单元测试的观点之间存在权衡，反之亦然。

我是依赖注入的新手。我向 DI 专家寻求建议。什么是正确的解决方案（如果有）？在上述情况下你会怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T09:12:28.690

您正在谈论对存储库进行单元测试，但这通常是没有用的，因为存储库是您通往数据库的网关并且与它有很强的耦合。单元测试应单独进行，但存储库只能使用数据库进行测试。因此：集成测试。

如果您能够从存储库中抽象出特定于数据库的逻辑（正如您似乎正在做的那样），那么就没有什么需要测试的了，因为存储库的职责是与数据库进行通信。如果还有很多东西需要测试，那么……在这种情况下，您的存储库类可能违反了[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，这使得您的存储库难以维护。

因此，由于您通常会使用数据库测试存储库本身，因此从测试的角度来看，注入什么并不重要，因为您必须以无论如何都能够连接到数据库的方式构建存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:28:23.810

> 这是存储库类的最小依赖项。

我认为这是确定合适的耦合量的起点。您应该注入不超过或少于满足要求所需的量。

这是一个非常笼统的指导方针，几乎相当于“它取决于”，但这是开始思考它的好方法。我对 DataSource、SqlSession 或 SqlSessionTemplate 的了解不够，无法在上下文中回答。

> 存储库类在内部使用 SqlSessionTemplate（SqlSession 接口的实现）

为什么存储库不能简单地将接口用作依赖项？接口不覆盖实现的所有公共方法吗？如果没有，接口是否甚至是有用的抽象？

我无法完全拼凑出您要做什么以及依赖项如何工作，但我最好的猜测是：

1.  您需要通过构造函数注入 SqlSession 和 DataSource，**或者**
2.  您需要通过 Repository 的构造函数注入 SqlSession，并将 DataSource 注入 SqlSessionTemplate 的构造函数

# c# - MS UIAutomation 对文本无用吗？如何设置字体粗细、获取插入符号位置、插入文本等？

> ID：15482907
> 
> 赞同：2
> 
> 时间：2013-03-18T17:17:09.913
> 
> 标签：c#, .net, .net-3.5, ui-automation

我正在研究用于控制文本的 Microsoft UIAutomation，但发现它没用。我需要做以下事情：

*   获取插入符号位置
    *   [这篇文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ff384841%28v=vs.85%29.aspx#SystemCaret)向我暗示我需要跟踪插入符号，如果我不知道它的原始位置，这将不起作用....
*   在特定位置插入文本
    *   `ValuePattern`只发现使用's覆盖整个字段的能力`SetValue`
*   设置字体粗细
    *   我可以读取字体粗细，但无法设置它
*   ETC

到目前为止，我已经阅读了许多文章，但没有人指出这些的可能性。[这个 SO 问题](https://stackoverflow.com/questions/4665045/how-to-get-the-word-under-the-cursor-in-windows)对我开始很有帮助，但是当我试图深入挖掘时，我遇到的问题多于答案。是我去 MS Accessibility Automation 的唯一选择，它在 WPF 虚拟化等方面表现不佳。

如果有人可以为我指出一篇有用的文章或提供上述缺点的示例，那就太好了。但是，此时我并不抱希望，因为这一切似乎都导致了获取信息的方法，但没有更新信息。

**编辑**

我什至试图深入研究`UIAutomationClient.dll`，似乎确实没有对此的支持。似乎 UIA 主要用于提取粗略的信息并单击周围。没有真正的文本支持

[这是另一个 SO 问题...与此问题相对相似...](https://stackoverflow.com/questions/10720162/set-text-on-textfield-textbox-with-the-automation-framework-and-get-the-change)似乎验证 UIA 对我的需求无用..

**哈克解决方法**

我们的解决方法是使用 UIA 获取一般上下文，然后使用 AutoIt SendKeys

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-28T06:58:08.840

您指向的文章描述了希望支持 UI 自动化的 TextPattern 的应用程序需要如何工作，而不是希望使用 TextPattern*检索信息的**客户端需要如何工作。*特别是，*实现*者需要跟踪插入符号；*客户*没有。

 ***话虽如此，TextPattern*旨在*检索信息，而不是设置它；在与旨在插入文本的文本服务框架广泛合作之后，我可以理解为什么。（许多应用程序的设计初衷并不是允许任意未经请求地操纵其数据结构；允许应用程序决定何时可以操纵它们严重扭曲了文本服务的设计。）

前两项非常简单。您可以使用 IUIAutomationTextPattern::GetSelection 获取选定的文本；[这将返回一个文本范围](http://msdn.microsoft.com/en-us/library/windows/desktop/ee696221%28v=vs.85%29.aspx)的集合，您可以提取其位置等。

虽然您不能直接操作文本范围的内容，但您可以选择它，然后使用 SendKeys 等生成输入。***

# counter - jQuery 文件上传：在 $.each 中使用计数器

> ID：15482911
> 
> 赞同：0
> 
> 时间：2013-03-18T17:17:31.960
> 
> 标签：counter, blueimp, jquery-file-upload

我正在使用 jQuery-File-Upload 的 fileuploaddone 回调将隐藏的输入插入表单以将其发送到服务器：

```
$('#fileupload').bind('fileuploaddone', function (e, data) {
    $.each(data.files, function (index, file) {
        $('<input type="hidden" name="file' + index + '" value="' + file.name + '">').appendTo('#fileupload');
    }); 
}); 
```

问题是计数器`index`不会增加。插入到我的表单中的内容：

```
<input type="hidden" name="file0" value="filename.png">
<input type="hidden" name="file0" value="filename2.png">
etc 
```

我尝试使用单独的计数器：

```
$('#fileupload').bind('fileuploaddone', function (e, data) {
    var i = 0;
    $.each(data.files, function (index, file) {
        $('<input type="hidden" name="file' + i + '" value="' + file.name + '">').appendTo('#fileupload');
        i++;
    }); 
}); 
```

但结果是一样的。诀窍是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:24:43.680

您的集合`data.files`每个仅包含 1 个对象，因此您的计数器/索引永远不会增加。

看看下面一行。

```
$('#fileupload').bind('fileuploaddone', function (e, data) { 
```

*每个*文件都会发生“fileuploaddone”事件。

# java - 我正在使用 jsoup 从网站 url 中提取图像，但我希望页面首先加载，是否有这样做？

> ID：15482914
> 
> 赞同：0
> 
> 时间：2013-03-18T17:17:37.790
> 
> 标签：java, javascript, image, jsoup

问题是我试图从中提取的一些 url 有尚未加载的 javascript 幻灯片容器。我想在幻灯片中获取图像，但由于尚未加载它还没有抓取元素。有没有办法做到这一点？这是我到目前为止所拥有的

```
Document doc = Jsoup.connect("http://news.nationalgeographic.com/news/2013/03/pictures/130316-gastric-brooding-frog-animals-weird-science-extinction-tedx/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed%3A+ng%2FNews%2FNews_Main+%28National+Geographic+News+-+Main%29").get();
Elements jpg = doc.select("img[src$=.jpg]"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:08:41.853

jsoup 无法处理 javascript，但您可以为此使用额外的库：

*   [使用 jsoup 解析 JavaScript](https://stackoverflow.com/questions/14904776/parse-javascript-with-jsoup/14925848#14925848)
*   [试图解析被javascript隐藏的html](https://stackoverflow.com/questions/13666453/trying-to-parse-html-hidden-by-javascript/14715242#14715242)

# java - Eclipse NoSuchMethod 异常；配置构建路径

> ID：15482919
> 
> 赞同：0
> 
> 时间：2013-03-18T17:17:51.287
> 
> 标签：java, eclipse, nosuchmethoderror

我有一个 Maven 项目，它实际上构建为多个 java 项目。项目 B 包含一个类，该类是项目 A 的子类。当我尝试在调试器中运行此类时，当该方法尝试从其父级调用任何功能时，我收到 NoSuchMethod 错误。

Maven 设置旨在编译每个项目并将其放置在 maven 存储库中，以便其他项目可以找到它们（它具有依赖性，因此它首先构建 pre-req 项目）。这对部署都有好处，但我不想强迫人们在 eclipse 中调试时每次启动调试器时都进行 maven 安装。相反，我尝试将 pre-req 项目添加到适用项目的类路径（构建路径-> 添加类文件夹）。这行不通。我*认为*这是由于我的构建路径中同时包含 Maven 存储库和类路径？但是应该强制解析类文件夹，并且应该在安装 maven 之前解析较新的类文件夹对吗？

如何配置它以使其工作而无需每次都重新进行 maven 安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:54:24.440

确保您已安装 m2eclipse 插件。

[http://eclipse.org/m2e/download/](http://eclipse.org/m2e/download/)

另外，安装 m2eclipse-wtp 插件

[http://marketplace.eclipse.org/content/maven-integration-eclipse-wtp#.UUdUhBxwrIU](http://marketplace.eclipse.org/content/maven-integration-eclipse-wtp#.UUdUhBxwrIU)

确保您已将项目创建为“Maven”项目。因此，如果您查看“ProjectA->Properties->Builders”，您应该会看到“Maven Project Builder”。

如果您按照上述所有步骤操作，您的项目依赖项应该会正确解析并且不会出现错误。

如果您仍然有错误，请发布您的 Eclipse 项目结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:56:18.963

你的 pom 文件到底是什么样的？我经常使用一种设置，其中我有一个由其他 Maven 子项目组成的父 Maven 项目。

我将有一个看起来像这样的父 pom：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<groupId>put group id here</groupId>
<artifactId>name of artifact id</artifactId>
<version>0.2.0-SNAPSHOT</version>
<packaging>pom</packaging>

<modules>
    <module>example-subproject-1</module>
    <module>example-subproject-2</module>
    </modules>
</project> 
```

然后，我将在子项目中拥有如下所示的 pom 文件（假设这是子项目 1 的 pom 文件）：

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<parent>
    <artifactId>artifact id of parent pom</artifactId>
    <groupId>group id of parent pom</groupId>
    <version>version number of parent pom</version>
</parent>
<groupId>group id</groupId>
<artifactId>artifact id</artifactId>
<packaging>packaging</packaging>
<version>1</version>
<name>put name here</name>
<dependencies>
    <dependency>
        <groupId>group id of example subproject 2</groupId>
        <artifactId>example-subproject-2</artifactId>
        <version>version number of example subproject 2</version>
    </dependency>
</dependencies>
</project> 
```

当我以这种方式进行设置时，如果我在根目录中，我可以编译整个项目。如果我只想编译一个特定的目录，我只需切换到那个目录。确保在您的依赖项部分中包含任何需要的子项目。

# css - Twitter Bootstrap - 自定义页面说明

> ID：15482920
> 
> 赞同：0
> 
> 时间：2013-03-18T17:17:59.010
> 
> 标签：css, twitter-bootstrap, less

如果您访问[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)，您可以自定义 Twitter-Bootstrap 的 css 和 js 文件以仅包含您需要的内容。

但是，我并不真正了解“代码和 pre”之类的东西，也不知道我是否需要它。是否有资源可以遍历每个复选框选项的属性，以便我更好地了解是否应该包含它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:24:28.277

不知道？您可以下载所有组件！[http://twitter.github.com/bootstrap/assets/bootstrap.zip](http://twitter.github.com/bootstrap/assets/bootstrap.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:29:50.297

我不确定是否有资源，请尝试仅下载您担心的部分并检查它们。

关于 CODE 和 PRE：

[<code> vs <pre> vs <samp> 用于内联和块代码片段](https://stackoverflow.com/questions/4611591/code-vs-pre-vs-samp-for-inline-and-block-code-snippets)

因此该复选框适用于这些文本元素的特定样式。

# php - 变量在定义时似乎未初始化

> ID：15482921
> 
> 赞同：0
> 
> 时间：2013-03-18T17:17:59.147
> 
> 标签：php

我正在尝试对网站进行有组织的设置，但我遇到了一个问题，在 Class 文件上，`$website['website_name'] = 'Delusion Servers';`当我将变量放在函数中时，我已经使用过，它说它未初始化。

```
<?php

/*
 * Delusion Servers
 * Website access at (delusionservers.com).
 * Developed, designed and managed by Lewes B.
 * PAGE: WEBSITE.CLASS.PHP
 */

$website['website_name'] = 'Delusion Servers';

class website {

    function killPage($content){
        die("

            <h1>" . $website['website_name'] ."encountered an error</h1>

            <br /><br />" . $content . "

            ");
    }
}

$website = new Website;
?> 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:18:38.590

你在类中的函数是在不同的范围内。

试试这个：

```
class website {

    function killPage($content){
        die("

            <h1>" . $this->website_name ."encountered an error</h1>

            <br /><br />" . $content . "

            ");
    }
}

$website = new Website;
$website->website_name = 'Delusion Servers'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:19:37.167

```
class website {

   public $website = array();

    public function __construct() {
        $this->website['website_name'] = 'Delusion Servers';
    }

    function killPage($content){
        die("

            <h1>" . $this->website['website_name'] ."encountered an error</h1>

            <br /><br />" . $content . "

            ");
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T17:21:52.203

**解决方案 1：类常量**

```
class Settings {
    const WEBSITE_NAME = 'Delusion Servers';
}

class website {

    function killPage($content){
        die("<h1>" . Settings::WEBSITE_NAME ." encountered an error</h1>
             <br /><br />" . $content);
    }
} 
```

**解决方案 2：全局常量**

```
define("WEBSITE_NAME","Delusion Servers");
...
class website {

    function killPage($content){
        die("<h1>" . WEBSITE_NAME ." encountered an error</h1>
             <br /><br />" . $content);
    }
} 
```

**解决方案 3：类属性**

```
class website {
    private $websiteName = "Delusion Servers";

    function killPage($content){
        die("<h1>" . $this->websiteName ." encountered an error</h1>
             <br /><br />" . $content);
    }
} 
```

# java - 将 Maven 存储库列入黑名单

> ID：15482922
> 
> 赞同：3
> 
> 时间：2013-03-18T17:18:00.680
> 
> 标签：java, maven

当我为我的项目运行集成测试时，它试图在一个被传递的 repo 中搜索，我需要等待超时。我像这样将那个回购列入黑名单。

```
 <repository>
        <id>seacrh-snapshots</id>
        <name>Exodus Snapshot Repository</name>
        <url>http://repo URL/</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
   </repository> 
```

但是当我运行 IT 测试时，它仍然在拉这个 repo：

```
Downloading: URL repo/maven-metadata.xml 
```

还有什么需要改变的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:39:24.023

我强烈建议使用 Maven 存储库管理器，例如 Nexus。它将帮助您使用 Maven 获得稳定且可重复的构建。您可以在那里禁用存储库（或者 Nexus 也可以为您处理此问题）。

[http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)

[http://maven.apache.org/repository-management.html](http://maven.apache.org/repository-management.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T23:14:59.343

通常，当 maven 运行时，它会按以下顺序获取工件

1.  它检查您的本地 .m2/repositories 文件夹
2.  如果它找不到工件，那么它会读取您的 pom / parent pom/ super Pom / user level setting.xml/ global setting.xml - 为了找到外部存储库来下载工件，通常这些 repo 要么直接来自互联网（如预先配置的默认 maven 存储库）或本地私有 repo 管理器（如 nexus、Artifactory）。
3.  Maven 将按照声明的顺序执行 repo。

首先，检查您的项目有效-pom 是否没有其他任何东西覆盖您的配置。在终端中通过在项目根目录上键入 mvn help:effective-pom 或在你的 pom 的 eclipse“有效 pom”视图中轻松地输入。

否则，考虑安装本地存储库管理器是一个很好的用例，因为每次运行 maven 时都不需要从外部获取第三方依赖项。我会推荐 Artifactory 比 nexus 好得多。

# sql - SQL 函数

> ID：15482924
> 
> 赞同：0
> 
> 时间：2013-03-18T17:18:13.893
> 
> 标签：sql, function, select, sqrt

以下，前提条件。

表称为点，列是 id start_long start_lat des_lat des_long

```
Select 
  * 
from 
  point 
WHERE 
  SQRT((71,5x(`start_long`-`des_long`))x(71,5x(`start_long`-`des_long`))+(111,3x(`start_lat`-`des_lat`))x(111,3x(`start_lat`-`des_lat`)))<=10.0 
```

我收到 #1241 - 操作数应包含 1 列错误。怎么了？

我想轻松获得平方根（这是两点之间距离的正确函数）小于 10 公里的结果。

x 代表乘法星

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:26:06.770

您的`SQRT`函数中有逗号，导致您的操作数有多个列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T17:26:34.650

您在某些数字`71,5`和其他点中使用逗号`10.0`

我怀疑您打算`.`为小数使用句点，并且逗号被解释为单独的参数。

# python - 如何在 App Engine 项目上构建网络客户端/系统测试？

> ID：15482927
> 
> 赞同：1
> 
> 时间：2013-03-18T17:18:20.913
> 
> 标签：python, google-app-engine, testing, django-nonrel

是否有一种通用/最佳实践方法来为 GAE python 构建客户端 javascript 测试平台？

我知道GAE SDK 有一个Testbed API，并且有nose-gae。这两个似乎都是为服务器端代码的单元测试而设计的。我目前正在 django-nonrel 上运行，并为此使用 django 的单元测试框架。

我正在寻找一个类似的测试框架，我可以在其中加载夹具数据，但运行一个真正的 HTTP 服务器，以便我可以对服务器运行 Selenium 测试。这样我就可以针对固定数据测试我的 javascript AJAX 调用。

我目前通过让 django 的测试框架在加载固定装置后在单独的线程上启动 GAE SDK dev_appserver 来实现这一点。这能够处理来自浏览器的 HTTP 调用。它主要适用于我，但在少数情况下存在一些片状线程问题。最糟糕的是，它相当 hacky，并且深入 SDK 以启动 dev_appserver。这将与 dev_appserver2 中断。

我想知道是否有更好的方法来解决这个问题。有了所有的 GAE 开发人员，其他人必须针对固定数据运行系统测试？

# javascript - 为什么这个 ajax 脚本复制了选择框？

> ID：15482935
> 
> 赞同：0
> 
> 时间：2013-03-18T17:18:33.707
> 
> 标签：javascript, ajax, codeigniter, http-post

我只是在尝试城邦选择。我认为此代码块将发布数据打印到屏幕..但它复制选择框，然后将选择框打印到屏幕。是不是很奇怪？

```
$(document).ready(function(){
  $('#ilce').change(function(){
    var ilceid = $('#ilce').val();

     $.ajax({
      type: 'POST',
      url: 'ilce/ajax',
      data: 'ilceid'+ilceid,
      success: function(sonuc){
        $('#ilce').css('background-color','#efefef');
        $('#semt').html(sonuc);
      }

     });

  });
}); 
```

html是：

```
<?php echo  form_open('ilce/index')?>
<select id="ilce" name="ilce">
<option value="">Select Town</option>
<?php foreach ($ilce as $x):?>
<option value="<?php echo $x['id']?>"><?php echo $x['ad']?></option>
<?php endforeach?>
</select>
<p id="semt"></p> 
```

并且，必须打印发布数据的 ilce/ajax 控制器？？？

```
<?php

class Ilce extends CI_Controller{

        public function ajax()
        {
                print_r($_POST);

        }

} //end of controller 
```

正如我所说，这段代码必须是打印帖子数据`<p id="semt"></p>`对吗？

但是这段代码只是复制`<select>`并在`.change()`立即粘贴到屏幕后变成了 2 个选择框。

# asp.net - ASP.NET - 一分钟后会话变量为空

> ID：15482938
> 
> 赞同：0
> 
> 时间：2013-03-18T17:18:47.157
> 
> 标签：asp.net, iis, session-variables

我有一个在 IIS 服务器 8 上运行的 asp.net 网站。

我的 Session 变量在一分钟的空闲时间（一致地）后设置为 null，之后我得到未处理的异常。但是，如果我继续导航并做某事，一切正常。

在我的 web.config 文件中，会话状态模式为 SQLServer，超时为 20（分钟）。我认为即使默认情况下超时也是 20 分钟，所以在一分钟内发生这种情况真的让我感到困惑。

我不明白还有什么其他东西会使会话变量失去它们的值？任何指针？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:22:48.277

我建议运行数据包嗅探器，例如 WireShark 或使用 Fiddler 工具，以确保在发生这种情况时获得相同、一致的会话 ID cookie。如果由于某种原因您获得不同的会话，这可以解释问题。否则，请使用调试器检查您的代码，以确保您没有错误地清除会话值或将会话值设置为 null。

# python - 除了 Udp6SocketTransport Pysnmp 之外，您还有其他选择吗

> ID：15482942
> 
> 赞同：0
> 
> 时间：2013-03-18T17:19:12.957
> 
> 标签：python, linux, windows, ipv6, pysnmp

我正在尝试制作一个可以在 Pysnmp 中使用 IPv6 的程序，并且我已经从谷歌等网站上阅读了很多内容。

而且我总是发现人们使用`Udp6SocketTransport`. 但问题是这个类不能在所有平台上工作，我需要它，所以它可以在 Windows 和 Linux 上工作。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:29:01.973

pysnmp 中的 IPv6 支持完全依赖于其平台支持。因此，如果 Udp6SocketTransport 类在一个平台上工作，但在另一个平台上不工作 - 很可能该平台缺乏 IPv6 支持。

你能检查一下吗：

```
>>> import socket
>>> socket.has_ipv6
True
>>> 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:16:28.993

Have you [installed IPv6](http://support.microsoft.com/kb/2478747) into your Windows machine? I assume it's a Windows XP.

# jquery - 增加/减少/重置字体大小不起作用

> ID：15482946
> 
> 赞同：0
> 
> 时间：2013-03-18T17:19:22.397
> 
> 标签：jquery, css

我正在尝试在我的网络服务器上设置增加/减少/重置字体大小选项，但它似乎不起作用。我希望调整所有元素的大小（即标题、按钮、模式窗口等）

到目前为止，这是我的代码，我在这里包含了一个 jsfiddle：http: [//jsfiddle.net/R3NGU/3/](http://jsfiddle.net/R3NGU/3/)

```
 var originalFontSize = $('.page').css('font-size');

 // reset font size

 $(".resetFont").click(function () {
     $('html').css('font-size', originalFontSize);
 });

 // increase font Size

 $(".increaseFont").click(function () {
     var currentFontSize = $('html').css('font-size');
     var currentFontSizeNum = parseFloat(currentFontSize, 10);
     var newFontSize = currentFontSizeNum * 1.2;
     $('html').css('font-size', newFontSize);
     return false;
 });

 // decrease font size

 $(".decreaseFont").click(function () {
     var currentFontSize = $('html').css('font-size');
     var currentFontSizeNum = parseFloat(currentFontSize, 10);
     var newFontSize = currentFontSizeNum * 0.8;
     $('html').css('font-size', newFontSize);
     return false;
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:23:00.510

代替：

```
$('html').css('font-size', newFontSize); 
```

使用[通配符所有选择器](http://api.jquery.com/all-selector/)：

```
$('*').css('font-size', newFontSize); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/R3NGU/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T01:58:36.183

我用它来减小每个元素的所有字体大小

```
jQuery('body').each(function(index) {
    jQuery(this).find('*').each(function() {

    var cur_size =  jQuery(this).css('font-size');
   //alert(cur_size);
    cur_size = cur_size.replace("px",""); 
   jQuery(this).css('font-size', (cur_size - 2));
    });
}); 
```

# awk - 单列到多列可调整行和列 AWK

> ID：15482948
> 
> 赞同：0
> 
> 时间：2013-03-18T17:19:26.390
> 
> 标签：awk

我输入的数据看起来像这样，格式为“mm/yyyy，数据”：

```
Location 1
08/2012, 44.1
09/2012, 34.2
10/2012, 24.3
11/2012, 14.4
12/2012, 04.5
01/2013, 14.6
02/2013, 24.7
Location 2
08/2012, 33.1
09/2012, 44.2
10/2012, 55.3
11/2012, 66.4
12/2012, 77.5
01/2013, 88.6
02/2013, 11.7
Location 3
08/2012, 35.1
09/2012, 45.2
10/2012, 55.3
11/2012, 66.4
12/2012, 77.5
01/2013, 71.6 
02/2013, 19.7
Location 4
etc
etc 
```

我正在使用一个 awk 脚本，就是这样 -

awk '}printf (NR %276 == 0 )? $0"\n" : $0"\t" }' 输入文件（我使用的是 NR%276，因为这是每个新重复列的列长度或上面部分显示的原始数据中的“位置”）。awk 可以在 n 列输出中将单列数据块从“位置 X”划分到“位置 Y”吗？

我正在获取输出，但以文本换行方式水平运行单个 col 输入文件的输出或像这样“蛇行”是不正确的 - 位置 1 mm/yyyy、data1 data2 等位置 2 mm/yyyy、data1 data2 等位置3 mm/yyyy, data1 data2 etc.

相反，我需要我的输出数据类似于此，但对于 276 行和大约 150 列/位置或输入文件中 276 行的“位置”数据的最后一个单列块（如上所示的缩短示例）。将有助于将行数增加到 277，例如 03/2013 或 >150 个位置。

```
Location 1        Location 2        Location 3
08/2012, 44.1     08/2012, 33.1     08/2012, 35.1
09/2012, 34.2     09/2012, 44.2     09/2012, 45.2
10/2012, 24.3     10/2012, 55.3     10/2012, 55.3
11/2012, 14.4     11/2012, 66.4     11/2012, 66.4
12/2012, 04.5     12/2012, 77.5     12/2012, 77.5
01/2013, 14.6     01/2013, 88.6     01/2013, 71.6
02/2013, 24.7     02/2013, 11.7     02/2013, 19.7 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:41:40.697

试试这个单行：

```
 awk '/^Location/{j=0;++i}{l[i,++j]=$0}END{for(m=1;m<=j;m++){for(n=1;n<=i;n++)printf l[n,m] (n==i?"":"\t");print ""}}' file 
```

**笔记**

*   上面的行将你的一列输入转换为三列输出，没有处理你的`276 rows`东西。（我认为我们不需要做那个计算。）
*   在输出中，列是`tab`分开的。
*   行和列不是硬编码的，您可以使用真实数据进行测试

用你的数据测试：

```
kent$  awk '/^Location/{j=0;++i}{l[i,++j]=$0}END{for(m=1;m<=j;m++){for(n=1;n<=i;n++)printf l[n,m] (n==i?"":"\t");print ""}}' file      
Location 1      Location 2      Location 3
08/2012, 44.1   08/2012, 33.1   08/2012, 35.1
09/2012, 34.2   09/2012, 44.2   09/2012, 45.2
10/2012, 24.3   10/2012, 55.3   10/2012, 55.3
11/2012, 14.4   11/2012, 66.4   11/2012, 66.4
12/2012, 04.5   12/2012, 77.5   12/2012, 77.5
01/2013, 14.6   01/2013, 88.6   01/2013, 71.6 
02/2013, 24.7   02/2013, 11.7   02/2013, 19.7 
```

**编辑**评论

```
 awk '!/^[0-9]/{j=0;++i}{l[i,++j]=$0}END{for(m=1;m<=277&&m<=j;m++){for(n=1;n<=i;n++)printf l[n,m] (n==i?"":"\t");print ""}}' file 
```

*   上面的行与硬编码的“位置”不匹配，但适用于非数字标题（也适用于“位置”）
*   276, 277 我不知道是什么意思。但是上面的一行将为每个块（在您的示例中的位置）打印最多 276 行。如果行数小于 276，则只打印实际行数。

您可以稍微调整一下单线，以满足您的需求。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T18:47:37.240

假设每个位置的数据行数相同：

```
numcols=$(tac input_file | awk '$1 == "Location" {print $2; exit}')
pr -t -s --columns=$numcols input_file 
```

由于您知道每个位置有多少行，因此计算位置数：

```
numcols=$(( $(wc -l < input_file) / 277 )) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T22:10:01.693

您可以尝试另一个 awk：

```
awk '!/^[0-9]/{n=0} {n++; A[n]=A[n] (A[n]?OFS:x) $0} END{for(i=1; i<=n; i++) print A[i]}' OFS='\t' file 
```

* * *

要在每个位置仅打印第二列：

```
awk '!/^[0-9]/{n=0} {n++; A[n]=A[n] (A[n]?OFS:x) $2} END{for(i=1; i<=n; i++) print A[i]}' OFS='\t' file 
```

# c++ - 数组的引用

> ID：15482955
> 
> 赞同：4
> 
> 时间：2013-03-18T17:19:36.780
> 
> 标签：c++, arrays, pointers

我有以下代码

```
char str[] = "some string"; // legal
char const* str2 = str;     // legal
char const** str3 = &str2;  // legal
char const** str4 = &str;   // illegal (error: cannot convert 'char (*)[12]' to 'const char (*)[]' in initialization ) 
```

为什么最后一个没有编译？是什么类型的`&str`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T17:22:03.467

因为`str`是数组，所以类型`&str`是“指向 12 数组的指针`const` `char`”。有效的声明是：

```
char const (*str4)[12] = &str; 
```

声明`str3`工作正常，因为`str2`是“指向”的指针`const` `char`，而不是数组，使用数组到指针的转换进行初始化。当您获取数组的地址时，不会发生相同的数组到指针的转换，如`str4`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:26:25.010

因为取消引用的数量。(str[] 或 str*) -> 数据，str2 -> 数据，str3 -> 指针(str2) -> 数据，str4 -> 指针 -> 数据。* simbols 的数量告诉您很多次，您需要取消引用它才能获取数据。每次都是从一个地址跳到另一个地址，只有最后一次访问实际上是数据。

正确的方法是：

```
char const* str4 = &str; //or
char const* str4 = str2; 
```

# tsql - 如何从另一个表中创建一个引用 NOT Primary 或 Unique 列的 Foreigne 键？

> ID：15482958
> 
> 赞同：0
> 
> 时间：2013-03-18T17:19:45.833
> 
> 标签：tsql, ssms, foreign-key-relationship

我制作了具有一个主键和一个外键的经典 Employee - Employer 表。外键引用主要的，因此它是一个自引用表：

```
CREATE TABLE Worker
(
    OIB NUMERIC(2,0),
    Name NVARCHAR(10),
    Surname NVARCHAR(20),
    DateOfEmployment DATETIME2 NOT NULL,
    Adress NVARCHAR(20),
    City NVARCHAR(10),
    SUPERIOR NUMERIC(2,0) UNIQUE,
    Constraint PK_Worker PRIMARY KEY(OIB),
    CONSTRAINT FK_Worker FOREIGN KEY (Superior) REFERENCES Worker(OIB)
); 
```

应该为我的所有员工保留积分的第二张表是这样制作的：

```
CREATE TABLE Point
(
    OIB_Worker NUMERIC(2,0) NOT NULL,
    OIB_Superior NUMERIC(2,0) NOT NULL,
    Pt_To_Worker tinyint,
    Pt_To_Superior tinyint,
    Month_ INT NOT NULL,
    Year_ INT NOT NULL,
    CONSTRAINT FK_Point_Worker FOREIGN KEY (OIB_Worker) References Worker(OIB),
    CONSTRAINT FK_Point_Worker_2 FOREIGN KEY (OIB_Superior) References Worker(Superior),
    CONSTRAINT PK_Point PRIMARY KEY(OIB_Worker,OIB_Superior,Month_,Year_)
); 
```

它应该能够为每个员工每月存储成绩。也就是说，我有两个外键，一个用于 Worker.OIB，一个用于 Worker.Superior。此外，我有一个由 Point.OIB_Worker、Point.OIB_superior、Point.Month_ 和 Point.Year_ 列组成的复合主键。键是复合的，因为它需要每月一次以上禁用输入成绩。

我的问题是：

**如何制作从Point到Worker的外键，以便任何上级都可以分配一个以上的员工？**

如果你仔细观察，我的实施是有效的，但每个经理只能有一名员工。这是因为外键必须引用其他表中的主列或唯一列。而我的 Worker.Superior 是唯一的，所以它只能有唯一的值（没有重复）。

我想很多人会觉得这个例子很有趣，因为它是创建新数据库时的常见问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:47:15.783

我认为您的 FK_Point_Worker_2 也应该有 References Worker(OIB)，并且您应该从 Worker.Superior 中删除 UNIQUE 约束。这样，一个上级就可以有多个工人分配给他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T19:21:38.700

想想看。你对 SUPERIOR 有独特的限制，你对为什么两个员工不能拥有相同的 SUPERIOR 感到困惑。这就是唯一约束所做的 - 不允许重复。

FK 只能引用一个或多个唯一列。

带有 References Worker (OIB) 的 FK_Point_Worker_2 并不能保证 OIB 是一个上级。

我将在（OIB，SUPERIOR）上的 Worker 上添加一个唯一约束，
并删除 SUPERIOR 上的唯一约束。
它永远是独一无二的，因为 OIB 是独一无二的。然后有复合FK关系。

这是复合 FK 关系的示例

```
ALTER TABLE [dbo].[wfBchFolder]  WITH CHECK ADD  CONSTRAINT [FK_wfBchFolder_wfBch] FOREIGN KEY([wfID], [bchID])
REFERENCES [dbo].[WFbch] ([wfID], [ID])
GO 
```

# regex - Express.js：如何在 req.param 中制作 app.get('/[:userId]i'..)？

> ID：15482959
> 
> 赞同：5
> 
> 时间：2013-03-18T17:19:55.787
> 
> 标签：regex, node.js, routing, get, express

我正在使用 nodejs 0.8.21 并表示 3.1.0

我需要`userId`从 url中读取`http://mysite.com/39i`。这意味着`userId=39`。怎么做？谢谢你。样本：

```
app.get('/:userId_i', function(req, res) { });
app.param('userId', function(req, res, next, id){ }); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T17:43:59.447

假设您有一个数字 id 后跟 an`i`并且您希望 id 仅作为数字返回。

```
app.get("/:id([0-9]+)i", function (req, res) {...}); 
```

这将匹配一个数字，后跟一个`i`，并且只会给你 in 中的数字`req.params.id`。

例子：

```
curl -XGET localhost:8080/124i 
```

给了我以下`req.params`

```
[ 'id': 124 ] 
```

# ios - 尝试使用 GCDAsyncSocket 进行缓冲传输

> ID：15482967
> 
> 赞同：2
> 
> 时间：2013-03-18T17:20:45.417
> 
> 标签：ios, objective-c, http, gcdasyncsocket, nsinputstream

（更新）我正在尝试读取一个大文件（视频或图片）并通过 SOAP 请求将其发送到远程服务器。我需要将数据编码为 Base64 字符串。我正在尝试按以下方式执行此操作：

*   为将“绕过”base64 编码数据的 SOAP 请求创建一个模板 xml

*   将 SOAP xml 的第一部分推入缓冲区

*   打开视频文件并将其编码为块并将每个编码的块推入缓冲区

*   最后，推送 SOAP xml 的第二部分

为了能够将上述部分“排队”，我正在尝试使用具有缓冲功能的 GCDAsyncSocket。我认为由于 GCDAsyncSocket 在 TCP 级别上运行，我需要自己编写 HTTP POST 标头。所以，有很多我只是模糊理解的活动部分，我可能做错了。但我的插座似乎从来没有起飞，我什至不知道如何调试它。这是我的相关代码，试试看你是否发现任何明显的错误：

```
NSString *soapBody = ...; //Create the SOAP xml here with the part in the middle reserved for the Base64 encoded data (marked with string "CUT_HERE";
NSArray *soapBodyArray = [soapBody componentsSeparatedByString:@"CUT_HERE"];
self.p_soapBodyPart1 = [soapBodyArray[0] dataUsingEncoding:NSUTF8StringEncoding];
self.p_soapBodyPart2 = [soapBodyArray[1] dataUsingEncoding:NSUTF8StringEncoding];
socketQueue = dispatch_queue_create("socketQueue", NULL);//socketQueue is an ivar
self.p_socket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:socketQueue];//create the socket
NSError *err = nil;
if (![p_socket connectToHost:myURL onPort:80 error:&err]) // Asynchronous!
{
   NSLog(@"I goofed: %@", err);
   return;
}
NSString* httpHeader = [NSString stringWithFormat:@"POST %@ HTTP/1.1\r\nHost: %@\r\nAccept-Encoding: gzip, deflate\r\nContent-Type: text/xml\r\nAccept-Language: en-us\r\nAccept: */*\r\nSOAPAction: http://tempuri.org/myAction\r\nConnection: keep-alive\r\nUser-Agent: ...\r\n\r\n", webserviceOperationsPath, webserviceHost];//Create the HTTP POST header 
[p_socket writeData:[httpHeader dataUsingEncoding:NSUTF8StringEncoding] withTimeout:-1 tag:1]; //enqueue the HTTP header
[p_socket writeData:self.p_soapBodyPart1 withTimeout:-1 tag:2]; //enqueue the first part of the SOAP xml
[self setUpStreamsForInputFile: [self.p_mediaURL path]];//set up NSInputStream to read from media file and encode it as Base64 
```

套接字似乎总是可以正常连接，我看到使用这个委托方法：

```
- (void)socket:(GCDAsyncSocket *)sock didConnectToHost:(NSString *)host port:(uint16_t)port
{
    NSLog(@"Socket Connected");
} 
```

setUpStreamsForInputFile 方法（在上面的第一个代码清单中调用）：

```
- (void)setUpStreamsForInputFile:(NSString *)inpath {
    self.p_iStream = [[NSInputStream alloc] initWithFileAtPath:inpath];
    [p_iStream setDelegate:self];
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0);
    dispatch_async(queue, ^ {
        [p_iStream scheduleInRunLoop:[NSRunLoop currentRunLoop]
                           forMode:NSDefaultRunLoopMode];
        [p_iStream open];
        [[NSRunLoop currentRunLoop] run];
    });
} 
```

现在，前一个方法中的 NSInputStream 设置将向这个委托发送事件：

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode {
    switch(eventCode) {
        case NSStreamEventHasBytesAvailable:
        {
            if (stream == self.p_iStream){
                if(!self.p_tempMutableData) {
                    self.p_tempMutableData = [NSMutableData data];
                }
                uint8_t buf[24000];
                unsigned int len = 0;
                len = [p_iStream read:buf maxLength:24000];//read a chunk from the file
                if(len) {
                        [p_tempMutableData appendBytes:(const void *)buf length:len];
                        NSString* base64encData = [Base64 encodeBase64WithData:self.p_tempMutableData];//encode the chunk
                        self.p_streamEncData = [base64encData dataUsingEncoding:NSUTF8StringEncoding];
                        [p_socket writeData:self.p_streamEncData withTimeout:-1 tag:3];//write the encoded chunk to the socket 
                }   
            }
            break;
        }
        case NSStreamEventEndEncountered:
        {
            [stream close];
            [stream removeFromRunLoop:[NSRunLoop currentRunLoop]
                              forMode:NSDefaultRunLoopMode];
            stream = nil;
            [p_socket writeData:self.p_soapBodyPart2 withTimeout:-1 tag:4];//write the second part of SOAP xml
            break;
        }
        ... //some other events handled here
    }
} 
```

套接字应该使用此委托将内容输出到日志

```
- (void)socket:(GCDAsyncSocket *)sock didWriteDataWithTag:(long)tag
{
    if (tag == 1)
        NSLog(@"HTTP Header Written");
    else if (tag == 2)
        NSLog(@"Soap Part 1 written");
    else if (tag == 3)
        NSLog(@"File written");
    else if (tag == 4)
        NSLog(@"Soap Part 2 written");
} 
```

但这是随机发生的。例如，有时我看到前 2 个 if 被调用，有时却没有。当我这样做并且它到达第三个“如果”（我正在写入实际编码数据的那个）时，它只写入了 2 或 3 次，仅此而已 - 考虑到文件的大小，我认为次数太少了。我从来没有看到它到达最后一个“if”，它应该写 SOAP xml 的最后一部分。将不胜感激任何帮助！提前致谢。

## 进一步更新 (3/19/13)

今天测试套接字时，我根本不再收到写入事件，这告诉我它是随机的，我做错了什么。今天连接打开，但在某个时候超时，正如我使用以下委托方法所看到的：

```
- (void)socketDidDisconnect:(GCDAsyncSocket *)sock withError:(NSError *)err
{    // This method is executed on the socketQueue (not the main thread)
    dispatch_async(dispatch_get_main_queue(), ^{
        @autoreleasepool {
            NSLog(@"socketDidDisconnect:withError: \"%@\"", err);
        }
    });
} 
```

返回

socketDidDisconnect:withError: "错误域=NSPOSIXErrorDomain Code=60 "操作超时" UserInfo=0x1cd89b00 {NSLocalizedFailureReason=connect() 函数出错，NSLocalizedDescription=操作超时}"

虽然我仍在上面的流委托中运行 Base64 数据的写入。

# php - 第 2 层的重复项目

> ID：15482973
> 
> 赞同：0
> 
> 时间：2013-03-18T17:21:18.167
> 
> 标签：php, duplicate-removal, organizational-chart

我有一个显示组织树的页面，但是在第 2 级有重复的项目。我想要的是避免重复...

这是示例显示：

```
<ul id="org" style="display: none;">
<li>Brit School                        
    <ul>
        <li>Amy Winehouse
            <ul>
                <li>Carina Round</li>
            </ul>
        </li>
        <li>Adele Adkins
            <ul>
                <li>Kreayshawn K</li>
                <li>Leona Lewis</li>
            </ul>
        </li>
        <li>Adele Adkins
            <ul>
                <li>Kreayshawn K</li>
                <li>Leona Lewis</li>
            </ul>
        <li>Arctic Monkey
            <ul>
                <li>PJ Harvey</li>
            </ul>
        </li>
    </ul>

</li> 
```

我想省略第二条记录 Adele 这是我在 PHP 中的示例代码

```
<ul id="org" style="display: none;">
<?php foreach ($lvl1 as $genesA) {?>
    <li>
        <?php echo $genesA->LevelFullName1?>
        <?php if($genesA->lvlMemF) {?>
        <ul>
        <?php if($genesA->lvlMemF) {?>
            <?php foreach ($lvl2 as $genesB) {?>
                <?php if($genesB->lvlMemS) {?>
                <li><?php echo $genesB->LevelFullName2 ?>
                <?php if($genesB->lvlMemS) {?>
                  <ul>
                    <?php if($genesB->lvlMemS) {?>
                        <?php foreach ($lvl3 as $genesC) {?>
                            <?php if($genesB->lvlMemS == $genesC->referrerLvl3) {?>
                                <li>
                                    <?php echo $genesC->LevelFullName3?>
                                </li>
                            <?php } ?>
                        <?php } ?>
                    <?php } ?>
                  </ul>
                  <?php } ?>
                </li>
                <?php } else { ?>

                <?php } ?>
            <?php } ?>
        <?php } ?>
        </ul>

        <?php }?>
    </li>
<?php } ?> 
```

我不太确定我是否走在正确的轨道上我只想要一个肮脏的修复就是这样:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:26:53.540

应该这样做：

```
<?php
$seen = array();
?>
<ul id="org" style="display: none;">
<?php foreach ($lvl1 as $genesA) {?>
    <li>
        <?php echo $genesA->LevelFullName1?>
        <?php if($genesA->lvlMemF) {?>
        <ul>
        <?php if($genesA->lvlMemF) {?>
            <?php foreach ($lvl2 as $genesB) {?>
                <?php if($genesB->lvlMemS) {?>
                <li><?php echo $genesB->LevelFullName2 ?>
                <?php if($genesB->lvlMemS) {?>
                  <ul>
                    <?php if($genesB->lvlMemS) {?>
                        <?php foreach ($lvl3 as $genesC) {?>
                            <?php if($genesB->lvlMemS == $genesC->referrerLvl3) {?>
                                <?php if(!in_array($genesC->LevelFullName3, $seen)?>
                                <li>
                                    <?php echo $genesC->LevelFullName3?>
                                    <?php $seen[] =$genesC->LevelFullName3;?>
                                </li>
                                <?php }?>
                            <?php } ?>
                        <?php } ?>
                    <?php } ?>
                  </ul>
                  <?php } ?>
                </li>
                <?php } else { ?>

                <?php } ?>
            <?php } ?>
        <?php } ?>
        </ul>

        <?php }?>
    </li>
</ul> 
```

您可能想检查我的 if 是否在正确的位置，因为`ul`如果已经看到所有名称，您可能会得到空块。

# jquery - 扩展 Bootstrap 下拉菜单/在 Coffee Script 中使用 super

> ID：15482976
> 
> 赞同：1
> 
> 时间：2013-03-18T17:21:26.717
> 
> 标签：jquery, twitter-bootstrap, coffeescript

我正在尝试扩展 Bootstrap 下拉菜单。我使用的方法与扩展 Bootstrap 模态时使用的方法相同，但在 Dropdown 上它似乎不起作用。我通读了 BS 代码，但没有发现这两者之间有任何明显的区别。

```
_tgl = $.fn.dropdown.Constructor::toggle
$.fn.dropdown.Constructor::toggle = ->
  alert('foo')
  _tgl.apply(this, arguments)

_show = $.fn.modal.Constructor::show
$.fn.modal.Constructor::show = ->
  alert('bar')
  _show.apply(this, arguments) 
```

下面的代码工作正常，在打开模式时我收到​​警报，在切换下拉列表时没有任何反应。如果我将警报插入到 BS Dropdown 的基本切换中，警报会弹出我们，因此会调用基本方法，跳过我的覆盖......有什么想法吗？

这里的第二个问题是为什么 super 在这里不起作用？例如：

```
$.fn.dropdown.Constructor::toggle = ->
  alert('foo')
  super 
```

据我了解，该文档指出， super 会调用父方法，但会导致编译错误“无法在实例方法之外调用 super”。这是否意味着即使我覆盖了类方法，我也不能在类上下文之外使用 super ？

PS：这是第一个例子的编译JS代码，不熟悉coffeescript的人：

```
 _tgl = $.fn.dropdown.Constructor.prototype.toggle;

  $.fn.dropdown.Constructor.prototype.toggle = function() {
    alert('foo');
    _tgl.apply(this, arguments);
  };

  _show = $.fn.modal.Constructor.prototype.show;

  $.fn.modal.Constructor.prototype.show = function() {
    alert('foo');
    _show.apply(this, arguments);
  }; 
```

# ruby-on-rails - 如何在响应 Ajax 请求后清除 Rails flash 对象？

> ID：15482978
> 
> 赞同：10
> 
> 时间：2013-03-18T17:21:40.190
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, rails-flash

我正在为我的一些控制器操作做这种事情：

```
def my_method

  flash[:notice] = "Success."

  respond_to do |format|
    format.js { render 'common/flashes' }
  end

end 
```

它工作得很好，并且闪光警报和通知显示得很好。但是当用户点击转到另一个页面时，flash 消息会再显示一次。由于我处理它们的方式，Rails 显然不知道它们已被使用。完成上述渲染后如何清除它们？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-01-30T03:45:17.373

Rahul 的回答可以更简洁地表达为`application_controller.rb`或任何其他控制器：

```
after_action -> { flash.discard }, if: -> { request.xhr? } 
```

这利用了`ActionController`对 lambda 和条件过滤器的处理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T17:26:57.000

在你的 application_controller.rb

```
after_filter :clear_xhr_flash

def clear_xhr_flash
  if request.xhr?
    # Also modify 'flash' to other attributes which you use in your common/flashes for js
    flash.discard
  end
end 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-05-02T17:40:25.653

在 Rails 5.2 上，这些答案都不适合我。打电话后，`flash.discard`我仍然有一条消息。相反，我不得不打电话`flash[:notice] = nil`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-11-20T13:34:21.450

用于清洁所有闪光灯`flash.clear`，而不是`flash.discard`

[https://api.rubyonrails.org/v5.1.7/classes/ActionDispatch/Flash/FlashHash.html#method-i-clear](https://api.rubyonrails.org/v5.1.7/classes/ActionDispatch/Flash/FlashHash.html#method-i-clear)

# objective-c - 这会造成任何泄漏吗？

> ID：15482979
> 
> 赞同：1
> 
> 时间：2013-03-18T17:21:47.857
> 
> 标签：objective-c, cocoa, memory-leaks, nsarray

我在 mutableCopy 中有包含 Store 类型对象的数组。我释放数组，我释放数组之前释放所有对象吗？

```
NSMutableArray *stores=[[NSMutableArray alloc]init];
[stores addObject:[store1 mutableCopy]];
[stores addObject:[store2 mutableCopy]];
[stores addObject:[store3 mutableCopy]];
...
[stores release]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T17:29:40.463

If you don't use ARC, then you need to release your objects at some point, since the `- mutableCopy` method creates a new object with a retain count of +1\. To avoid leaks, you should write:

```
[stores addObject:[[store1 mutableCopy] autorelease]; 
```

Now, there is no reason not to use ARC. If you use ARC, you're fine and you don't call `- release` on anything.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T17:28:13.560

是的。

你应该使用：

```
[stores addObject:[[store1 mutableCopy] autorelease]]; 
```

# iphone - 弹出视图控制器时Coredata无法正常工作

> ID：15482984
> 
> 赞同：0
> 
> 时间：2013-03-18T17:21:56.820
> 
> 标签：iphone, core-data, uinavigationcontroller

我有 2 个视图控制器（比如 A 和 B）......我在 A 中有一些记录现在我想编辑核心数据中的数据......为此，我将导航控制器推到 B..在那里我编辑数据在核心数据中.. Itz 工作正常.. 这是我用于编辑的代码..

```
NSManagedObjectContext *managedContext = [self managedObjectContext];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"CamImage" inManagedObjectContext:managedObjectContext];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entity];

    // Set the predicate -- much like a WHERE statement in a SQL database
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name == %@", xapp.patientName];
    [request setPredicate:predicate];

    // Set the sorting -- mandatory, even if you're fetching a single record/object
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
    NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
    [request setSortDescriptors:sortDescriptors];
    sortDescriptors = nil;
    NSError *error;
    // Request the data -- NOTE, this assumes only one match, that
    // yourIdentifyingQualifier is unique. It just grabs the first object in the array.
    CamImage *event = [[managedObjectContext executeFetchRequest:request error:&error] objectAtIndex:0];

    [event setMedicineImage:butImage];
    [event setMedicineName:text.text];
    [event setQuantity:[jst objectAtIndex:0]];
    [event setUnit:[jst objectAtIndex:1]];
    [event setMeal:meal];
     request = nil;

    NSMutableArray *mutableFetchResults = [[self.managedObjectContext executeFetchRequest:request1
                                                                                    error:&error] mutableCopy];
    if (mutableFetchResults == nil) {
        // Handle the error.
    }

    // Set self's events array to the mutable array, then clean up.
    [self setCamImage:mutableFetchResults];
    NSLog(@"AddMedicineArray:%@",camImage);
    [self.navigationController popViewControllerAnimated:YES];
} 
```

在上面的代码中，我编辑了数据并再次获取它..我可以发现数据被正确编辑..编辑后我弹出到 B..在 viewwillappear 方法中我再次获取数据..但我找到了旧记录仅...一旦我再次运行该应用程序，我发现已正确获取编辑的数据.. 这是 viewwillappear 中的代码

```
-(void)viewWillAppear:(BOOL)animated{

    camImage=Nil;
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"CamImage" inManagedObjectContext:self.managedObjectContext];
    [request setReturnsObjectsAsFaults:NO];
    [request setEntity:entity];

    NSError *error = nil;
    NSMutableArray *mutableFetchResults = [[self.managedObjectContext executeFetchRequest:request error:&error] mutableCopy];
    if (mutableFetchResults == nil) {
        // Handle the error.
    }

    // Set self's events array to the mutable array, then clean up.
    [self setCamImage:mutableFetchResults]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:43:06.467

`viewWillAppear`没有被调用，因为父视图始终保留在视图层次结构中。相反，实现`navigationController:willShowViewController:animated:`看到这个问题：[iOS 5 viewWillAppear not being called when popping a NavigationController](https://stackoverflow.com/questions/8915799/ios-5-viewwillappear-not-being-called-when-popping-a-navigationcontroller)

# asp.net - 如何检查它是否是一个好的验证码？

> ID：15482987
> 
> 赞同：0
> 
> 时间：2013-03-18T17:22:04.753
> 
> 标签：asp.net, asp-classic, captcha

我正在使用以下代码实现验证码系统：[http ://www.thomasmoore.it/webdesign/asp/captcha.asp](http://www.thomasmoore.it/webdesign/asp/captcha.asp)

正如您在该页面中看到的那样，有一个带有字母数字字符的图像示例。

下面是一个例子：

![在此处输入图像描述](../Images/14bf026600d3fc290563ef3ec45b8fe7.png)

我想了解该图像是否足够强大。你知道是否有脚本可以破坏它吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:29:09.963

我不知道如何回答你的问题，但我建议使用之前已经使用和测试过的控件..比如[recaptcha](http://www.google.com/recaptcha)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:43:56.497

我不会使用它，不是因为它不安全，而是因为它不可访问。如果您的用户使用屏幕阅读器怎么办？继续使用可访问的解决方案，例如 recaptcha，让您的用户满意；）

至于安全性，我的观点可能有争议，但我认为这并不重要。为什么？因为如果攻击者真的想破坏您的网站，他们可以使用[Mechanical Turk](https://www.mturk.com)或提供以非常低的价格手动解决*任何*验证码的众多在线服务之一。当然，一个好的验证码是他们打破的另一个障碍，但不要太相信他们。

# sed - 计算文本文件中的时间偏移

> ID：15482988
> 
> 赞同：0
> 
> 时间：2013-03-18T17:22:04.900
> 
> 标签：sed, peoplesoft

我正在使用**sed**处理一个很长的 PeopleSoft 跟踪文件。跟踪文件充满了信息，但我感兴趣的是每个步骤需要多长时间处理，以及该步骤在数据库中影响的行数。

我有一个*相当丑陋*的bash 脚本，它基本上是一系列 sed 管道。它工作得很快，所以没关系。当然，我欢迎任何澄清代码的建议。

我必须说，虽然它很丑陋，但（对我来说）它正在经历哪些顺序步骤是很清楚的。非专家通常完全无法理解 sed/awk 一个衬里。

```
#!/bin/bash

sed '/./=' "$1" | sed '/./N; s/\n/ /' | sed '/--/!d' | sed '/-- B/d' | sed '/--  /d' | sed '/Instance/d' | sed '1,/Application Engine ended normally/!d' | awk '/Row/ {n = $0; getline; print $0 n; next } 1' > "$1".txt 
```

**计时**

大多数行包含时间信息，格式为 HH:MM:SS。许多语句都在亚秒级运行，因此时间字段通常不会改变。我想生成一个新字段，它是上一行的偏移量。只需要考虑秒数，因为无论如何大多数操作都是亚秒级的。

```
246 -- 14.54.43 .(TL_TIMEADMIN.MAIN.Step040) (PeopleCode)238 -- Row(s) affected: 1
247 -- 14.54.43 Program Skipping Step due to non-zero return code from PeopleCode at TL_TIMEADMIN.MAIN.Step040
249 -- 14.54.43 .(TL_TIMEADMIN.MAIN.Step050) (Call Section TL_TIMEADMIN.DISPATCH)
251 -- 14.54.45 ..(TL_TIMEADMIN.DISPATCH.Step02a) (PeopleCode)
253 -- 14.54.45 ..(TL_TIMEADMIN.DISPATCH.Step02a) (SQL)
266 -- 14.54.45 ..(TL_TIMEADMIN.DISPATCH.Step02b) (Call Section TL_TA000200.TA000200)258 -- Row(s) affected: 1
268 -- 14.54.46 ...(TL_TA000200.TA000200.Step001) (PeopleCode)
270 -- 14.54.46 ...(TL_TA000200.TA000200.Step001) (Call Section FUNCLIB_TLTA.STEPMSG) 
```

我想看到这样的东西：

```
246 -- 14.54.43 0 .(TL_TIMEADMIN.MAIN.Step040) (PeopleCode)238 -- Row(s) affected: 1
247 -- 14.54.43 0 Program Skipping Step due to non-zero return code from PeopleCode at TL_TIMEADMIN.MAIN.Step040
249 -- 14.54.43 0 .(TL_TIMEADMIN.MAIN.Step050) (Call Section TL_TIMEADMIN.DISPATCH)
251 -- 14.54.45 2 ..(TL_TIMEADMIN.DISPATCH.Step02a) (PeopleCode)
253 -- 14.54.45 0 ..(TL_TIMEADMIN.DISPATCH.Step02a) (SQL)
266 -- 14.54.45 0 ..(TL_TIMEADMIN.DISPATCH.Step02b) (Call Section TL_TA000200.TA000200)258 -- Row(s) affected: 1
268 -- 14.54.46 1 ...(TL_TA000200.TA000200.Step001) (PeopleCode)
270 -- 14.54.46 0 ...(TL_TA000200.TA000200.Step001) (Call Section FUNCLIB_TLTA.STEPMSG) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:22:22.823

可以使用 awk 解决方案吗？

```
{
  split($3, time, ".")
  if (NR == 1) prev = time[3]
  $3 = $3 " " time[3] - prev
  prev = time[3]
  print
} 
```

输出：

```
$ awk -f time.awk input
246 -- 14.54.43 0 .(TL_TIMEADMIN.MAIN.Step040) (PeopleCode)238 -- Row(s) affected: 1
247 -- 14.54.43 0 Program Skipping Step due to non-zero return code from PeopleCode at TL_TIMEADMIN.MAIN.Step040
249 -- 14.54.43 0 .(TL_TIMEADMIN.MAIN.Step050) (Call Section TL_TIMEADMIN.DISPATCH)
251 -- 14.54.45 2 ..(TL_TIMEADMIN.DISPATCH.Step02a) (PeopleCode)
253 -- 14.54.45 0 ..(TL_TIMEADMIN.DISPATCH.Step02a) (SQL)
266 -- 14.54.45 0 ..(TL_TIMEADMIN.DISPATCH.Step02b) (Call Section TL_TA000200.TA000200)258 -- Row(s) affected: 1
268 -- 14.54.46 1 ...(TL_TA000200.TA000200.Step001) (PeopleCode)
270 -- 14.54.46 0 ...(TL_TA000200.TA000200.Step001) (Call Section FUNCLIB_TLTA.STEPMSG) 
```

# asp.net - 捕获所有请求 mvc 4

> ID：15482990
> 
> 赞同：0
> 
> 时间：2013-03-18T17:22:09.917
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, routes, http-request

我有一个包含资源的文件夹，我想为所有拥有正确令牌的用户提供访问它的机会。请求如下：

```
 www.mysite.com/uploads/images?token = some security value 
```

所以我需要处理所有以

```
 www.mysite.com/uploads 
```

检查正确的令牌并批准或拒绝请求。你能举一个基本的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:39:40.233

为什么不直接创建一条路线`www.mysite.com/uploads/images/token`呢？

```
 routes.MapRoute(
            "Uploads", // Route name
            "uploads/images/{token}", // URL with parameters
            new { controller = "uploads", action = "images", token = "" } // Parameter defaults
        );
    } 
```

这条路线应该放在您的路线列表的顶部，并会捕获以`/uploads`... 开头的路线。您的用户将被路由到`uploadsController`（在这种情况下），并将执行作为字符串参数`images`传递的操作方法。`Token`

# sql - 如何优化sql查询-标签云

> ID：15482998
> 
> 赞同：0
> 
> 时间：2013-03-18T17:22:48.460
> 
> 标签：sql, lag, tag-cloud

```
SELECT DISTINCT tag, occurences
FROM ' . DBPREFIX . 'tags
WHERE ID >= 
(
    SELECT 
        FLOOR(MAX(ID) * RAND()) 
    FROM 
        ' . DBPREFIX . 'tags
) AND exclude=0 ORDER BY ID LIMIT ' . MAX_TAGS 
```

我有壁纸网站，但我遇到了服务器滞后问题 - 每次访问我的网站时，都会加载标签云（随机 25 个标签）并执行此查询。我有 4000 多张壁纸和 10000 多个标签。如何优化这个查询？我的网站每天至少中断 3-5 次。

PS 我的朋友建议我每 5 分钟执行一次查询，但我不知道如何实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:37:27.907

你的朋友有个好主意。无论您使用什么服务器端框架，都要为其寻找缓存选项。

另一个想法是摆脱“随机”要求。