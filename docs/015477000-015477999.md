# StackOverflow 问答 15477000-15477999

# c# - RemoveAt 和 Insert 列表项的替代方法

> ID：15477004
> 
> 赞同：1
> 
> 时间：2013-03-18T12:36:01.093
> 
> 标签：c#, list

我正在寻找一种更好的数据结构或方法来简单地替换动态数组中的对象。似乎列表是选择，但是我阅读并注意到 RemoveAt 和 Insert 的性能不如我希望的那样好。

让我详细说明我想要实现的目标：

> 清单 1
> 
> 1.  清单项目 1
> 2.  清单项目 2
> 3.  清单项目 3
> 
> 清单2
> 
> 1.  清单项目 1
> 2.  清单项目 2
> 3.  空值

两个列表都使用相同的对象类型。我想用 List1[1] 替换 List2 的空列表项 -- 列表项 1 克隆。我使用克隆，因此复制的列表项的值是一个单独的实例。

我还想用 List2 的列表项 1 的克隆替换 List2 的列表项 2。

这是我要实现的一些示例代码：

```
projCraneVertices.RemoveAt(projCraneVertices.Count - 4);
projCraneVertices.Insert((projCraneVertices.Count - 3), realCraneVertices[botPoint].clone());
projCraneVertices.RemoveAt(projCraneVertices.Count - 3);
projCraneVertices.Insert((projCraneVertices.Count - 2), projCraneVertices[botPoint].clone());
projCraneVertices.RemoveAt(projCraneVertices.Count - 2);
projCraneVertices.Insert((projCraneVertices.Count - 1), realCraneVertices[topPoint].clone());
projCraneVertices.RemoveAt(projCraneVertices.Count - 1);
projCraneVertices.Insert((projCraneVertices.Count), projCraneVertices[topPoint].clone()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:39:53.587

据我了解，您需要一种`Replace`方法。试试这个扩展：

```
public static class Extensions
{
  public static void Replace<T>(this IList<T> list, int index, T item)
  {
    list[index] = item;
  }
} 
```

像这样调用：

```
 List<int> ints = new List<int>() { 1, 2, 3 };
  List<int> ints2 = new List<int>() { 4, 5, 6 };
  ints.Replace(0, ints2[0]); 
```

以上将列出第一个列表 - `4, 2, 3`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:42:02.213

> 我还想用 List2 的列表项 1 的克隆替换 List2 的列表项 2。

好吧，你可以像这样更简单：

```
proCraneVertices[2] =  realCraneVertices[1].Clone(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:54:13.637

使用 List of T 将解决您的 removeAt 问题，并且 inset 这在引擎盖下使用 Array 并将向您展示一些有助于摆脱这些 anoing 方法的好功能。

您可以使用 List 提供的一些功能，如下所示。

Replace // 将项目从一项替换为另一项

[T级列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

# sql - 在 SQL 中为主键选择字符变化数据类型的优缺点是什么？

> ID：15477005
> 
> 赞同：32
> 
> 时间：2013-03-18T12:36:02.450
> 
> 标签：sql, foreign-keys, primary-key, postgresql-9.1, sqldatatypes

在我学习期间（大约 4 年前）所学的数据库课程中，我认为建议避免使用*字符串*作为主键的数据类型。

***有人能告诉我在 SQL 中为主键选择字符变化*数据类型的优缺点是什么，以及上述前提在多大程度上是正确的？**

注意：（我使用的是*PostgreSQL*数据库）。当您需要从另一个表中引用这样的表时，我也在处理一种情况，从而将外键放在*字符变化*的数据类型上。请也考虑到这一点。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-18T13:27:10.997

选择字符数据类型作为主键字段的优点是您可以选择它可以显示的数据。例如，您可以将电子邮件地址作为用户表的键字段。这消除了对额外列的需要。另一个优点是，如果您有一个包含多个其他表的索引的公共数据表（想象一个带有对 FINANCE、CONTACT 和 ADMIN 表的外部引用的 NOTES 表），您可以轻松知道它来自哪个表（例如您的 FINANCE 表索引为 F00001，CONTACT 表的索引为 C00001，以此类推）。恐怕这个答复的缺点会更大，因为我反对这种方法。

缺点如下：

1.  在 PostgreSQL 中正是因为这个原因而存在串行数据类型
2.  将按顺序输入数字索引，并且需要进行最少的重新索引（即，如果您有一个带有 Apple、Carrot 键的表并且想要插入 Banana，则该表必须围绕索引移动，以便将 Banana 插入中间. 如果索引是数字，你很少会在索引中间插入数据）。
3.  与数据取消链接的数字索引不会改变。
4.  数字索引更短，并且它们的长度可以固定（4 个字节与您选择的任何 varchar 长度）。

在您的情况下，您仍然可以将外键放在数字索引上，所以我不确定您为什么要强制它成为 varchar 类型。理论上，在数字字段上搜索和过滤比文本字段更快，因为服务器将被迫首先转换数据。一般来说，您将拥有一个非聚集的数字主键，然后在您将要过滤的数据列上创建一个聚集键。

这些是编写 SQL 时的通用标准，但在进行基准测试时，您只会发现 varchar 列在连接和过滤方面比整数列慢一点。只要你的主键没有改变，那么你就没事。

# c++ - 如何禁止隐式转换为基类？

> ID：15477006
> 
> 赞同：6
> 
> 时间：2013-03-18T12:36:02.983
> 
> 标签：c++

我想在我的代码中清楚地区分 3D 和 2D 点。显而易见的解决方案是有单独的类。

另一方面，从 z = 0 的 3D 点到 2D 点的转换非常普遍。因此我想使用一个通用的基类，这样我就可以在内存中就地进行这些转换。为了清楚地将类型分开，我想禁止隐式转换为该基类。那可行吗？

或者是否有不同的方法来创建具有类似功能的不同类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:38:04.340

这不能回答您的问题，但要解决您的问题，您可以在 3D 类中创建一个方法，在请求时返回 2D 点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:43:34.330

您可能会私下派生子类：

```
class PointBase {
  // ...
};

class Point2D : private PointBase {
  // ...
};

class Point3D : private PointBase {
  // ...
}; 
```

这种方法的副作用是，任何公共成员`PointBase`也无法从外部访问，因此子类必须通过为它们提供代理方法或使用关键字指定它们来显式访问它们`using`。这就是为什么只有当通用逻辑`PointBase`相当大并且在一个地方实现它比提到的缺点带来更多好处时，我才会这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:03:51.023

如果您的点存储为矢量，您可以将 3D 和 2D 点类定义为模板类，并带有`int`指定维度计数的参数：

```
template<int dimensions> class Point {
    vector<int> coords;
    Point() : coords(dimensions) {}
    ....
    template<int other_dimensions> convertToPoint() const
    {
        // Handle different options here like:
        //   dimensions > other_dimensions
        //   dimensions < other_dimensions
        // et cetera
    }
}; 
```

并实例化点类：

```
typedef Point<2> Point2D;
typedef Point<3> Point3D;
Point2D pt = Point3D(1, 2, 3).convertToPoint<2>(); // Point2D(1, 2);
Point3D pt = Point2D(4, 5).convertToPoint<2>(); // Point3D(4, 5, 0); 
```

这样，您将拥有相同的逻辑但完全不同的类型和简单的转换。更不用说你只需要定义*一个*类而不是两个单独的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T15:33:09.667

如果您想在不进行任何复制的情况下访问 3d 矢量的 2d 部分，那么实际上只有一个合理的解决方案。

```
class Vector2d { ... };
class Vector3d {
    Vector2d part2d;
    double z;
public:
    Vector2d& as2d() { return part2d; }
}; 
```

任何基于继承的恶作剧都很可能导致糟糕的设计、未定义的行为或两者兼而有之。

# node.js - 如何使用 NodeJS 创建图表？

> ID：15477008
> 
> 赞同：37
> 
> 时间：2013-03-18T12:36:14.853
> 
> 标签：node.js, graph, charts

是否可以使用 NodeJS 创建图表，例如带有自定义图标的条形图和饼图？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T14:58:40.003

[d3](http://d3js.org/)可能是你最好的选择。它可以生成几乎任何类型的图表。

您可以直接在浏览器中生成图表，或者如果您确实需要图像文件，您可以[使用 node 中的模块并将输出转换为图像](https://eng.wealthfront.com/2011/12/22/converting-dynamic-svg-to-png-with-node-js-d3-and-imagemagick/)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-29T04:44:53.070

基本上，您可以使用任何图表库。例如：

*   [谷歌图表 API](https://developers.google.com/chart/)
*   [Chartjs](http://www.chartjs.org/)
*   [宪章派](http://gionkunz.github.io/chartist-js/)

在您的服务器模板代码中，您可能希望使用服务器变量输出数据。下面的示例使用 swig 模板引擎、ExpressJS 和 Chartist 库

```
<div class="ct-chart ct-perfect-fourth"></div>
<script>
    new Chartist.Line('.ct-chart', {
        labels: {{ chartLabel | raw }}, 
        series : [{{ charts | raw}}]
    }, {
        axisY: {
            onlyInteger: true
        }
    });
</script> 
```

[在此处](http://thenextweb.com/dd/2015/06/12/20-best-javascript-chart-libraries/)了解有关其他图表库的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-26T05:53:49.007

使用高图表

你必须安装

```
npm install -g node-highcharts 
```

请参考以下链接

[https://github.com/davidpadbury/node-highcharts](https://github.com/davidpadbury/node-highcharts)

# iphone - 本地通知处理

> ID：15477020
> 
> 赞同：0
> 
> 时间：2013-03-18T12:36:58.803
> 
> 标签：iphone, xcode, cocoa-touch

我正在尝试破解本地通知的工作方式。

我写了这一行是为了展示我安排的通知：

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification{

    [[UIApplication sharedApplication] presentLocalNotificationNow:notification];

} 
```

问题是它运行了无数次。

如果我写别的东西它只运行一次，但我知道这一行应该弹出通知的消息。

任何人都可以解释一下吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:24:26.573

找到了，

我没有意识到通过达到 didReceiveLocation 方法，如果 iPhone 未激活，它会自动发送通知消息。

不需要写什么...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:57:39.973

`presentLocalNotificationNow`正在触发`didReceiveLocalNotification`，而后者又在调用`presentLocalNotificationNow`......所以你最终会陷入无限循环。

# jsf - 自定义 JSF 组件：将“startElement”与“script”一起使用会产生注释

> ID：15477025
> 
> 赞同：1
> 
> 时间：2013-03-18T12:37:15.117
> 
> 标签：jsf, comments, myfaces, custom-renderer

我正在渲染一个自定义 JSF 组件。在方法**encodeBegin 中**，我想包含一些 java 脚本。

```
public void encodeBegin(FacesContext context) throws IOException {
   ResponseWriter writer = context.getResponseWriter();
   writer.startElement("script", this);
   writer.writeAttribute("type", "text/javascript", null);
   writer.writeText("var width=400",null);
   writer.endElement("script");
} 
```

渲染组件时，脚本标记的内容被注释掉。

```
<script type="text/javascript"><!--
var width=400;
//--></script> 
```

谁能解释为什么会出现此评论以及我如何摆脱它？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:11:37.827

这是特定于 MyFaces 实现的，而不是 JSF 规范。Mojarra 实现不这样做。

这种将 JavaScript 正文放在 HTML 注释中的方法基本上是 HTML 史前史的遗留物，当时存在不支持`<script>`元素的浏览器。那些 HTML 注释基本上隐藏了 JavaScript 内容，以防止那些古老的 HTML 解析器将 JavaScript 代码解释和显示为**纯文本**。

另请参阅[Mozilla 开发人员网络 - 为 XHTML 编写 JavaScript](https://developer.mozilla.org/en/docs/Writing_JavaScript_for_XHTML)：

> 这是 HTML 中的常见做法，用于对不支持 JS 的浏览器隐藏脚本。在 XML 时代，注释就是它们的本意：注释。在处理文件之前，所有注释都将从文档中删除，因此将您的脚本包含在其中就像将您的午餐扔进食人鱼池一样。此外，注释掉你的脚本真的没有意义——过去十年编写的浏览器都不会在页面上显示你的代码。

请注意最后一句话，这是非常正确的，过去十年开发的任何单一浏览器都不会再这样做了。MyFaces 显然有点过分热心地假设现在仍然会使用这种史前浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:40:09.767

没关系

这种做法是将 javascript 代码标记为注释，因此自动工具不会尝试将其解析为 HTML（例如，检查您的页面是否符合 HTML 4 的工具）。

Javascript 引擎将忽略 HTML 注释并处理代码（Javascript 注释是`/*`和`//`

出于同样的原因，这种方法的一种变体是将 Javascript 放在`CDATA`标签中。

# mysql - 满足条件的表的特定行的大小

> ID：15477036
> 
> 赞同：0
> 
> 时间：2013-03-18T12:37:48.487
> 
> 标签：mysql

```
SELECT (data_length)'Size' 
FROM information_schema.TABLES 
WHERE table_name='abc' 
```

这给了我表“abc”的总数据大小。但我想要满足 where 子句条件的特定行的数据大小。

说，

```
SELECT (data_length)'Size' 
FROM information_schema.TABLES 
WHERE table_name='abc'
and abc.id=1 
```

所以，我想要满足这个条件的行的 data_length，但上面不起作用。

我想你明白我的询问。

# login - 如何只允许批准的用户登录我的 wiki？

> ID：15477037
> 
> 赞同：0
> 
> 时间：2013-03-18T12:37:50.940
> 
> 标签：login, hook, mediawiki

我在我的 wiki 数据库中的用户表中添加了一个名为`approved_account`. 该列的标准值为`0`（零）。

当用户尝试登录 wiki 时，我想添加一个异常，这样如果`approved_account = 0`登录尝试被拒绝。

有谁知道我应该如何以及在哪里放置 if 语句？

* * *

**编辑：**我已经走了这么远。我正在使用 AbortLogin 挂钩，因为每次用户尝试登录时我都需要验证我的陈述是否正确。

但是，我的代码不会让*任何人*进入。它会阻止所有登录尝试，即使我在该`approved_account`字段中有正确的值。谁能帮我解决这个问题？

```
<?php
/** 
* Prevent a user from accessing this file directly and provide a helpful 
* message explaining how to install this extension.
*/
if ( !defined( 'MEDIAWIKI' ) ) {
    echo <<<EOT
To install the Test extension, put the following line in your LocalSettings.php file: 
require_once( "$IP/extensions/approvedaccount.php" );
EOT;
    exit( 1 );
}

// Extension credits that will show up on Special:Version
$wgExtensionCredits['parserhook'][] = array(
    'name' => 'Approved Account extension',
    'description' => 'Prevent login',
    'author' => 'Me',
    'url' => 'http://www.mediawiki.org/wiki/Extension:approvedaccount'
);
$wgHooks['AbortLogin'][] = 'approvedaccount::onAbortLogin';

class approvedaccount
{
    public static function onAbortLogin( $user, $password, &$retval ) {
    global $wgOut, $wgUser;

    $dbr = wfGetDB( DB_SLAVE );
    $res = $dbr->select(
    'user',                                     // $table
    array( 'user_name', 'approved_account' ),   // $vars (columns of the table)
    'user_name = "'.$wgUser.'"',                // $conds
    __METHOD__,                                 // $fname = 'Database::select',
    array( 'ORDER BY' => 'user_name ASC' )      // $options = array()
    );

    $output = '';
    foreach( $res as $row ) {
    $output .= 'Användarnamn: ' . $row->user_name . ' , Approved Account: ' . $row->approved_account . ".";
    }

    if ($row->approved_account = "1"){
    //$this->loadDefaults();
    //  return false;
    header("Location: http://hbg-whirlpool.emea.stream.corp/index.php?title=Special:UserLogout&returnto=Main+Page");
    exit();  // you need to exit after a Location header is sent
    }   
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:15:06.843

您可以使用简单的[AuthPlugin](http://www.mediawiki.org/wiki/AuthPlugin)来完成此操作，覆盖该`strictUserAuth()`方法以为符合条件的用户返回 true。

但是，我怀疑您以错误的方式处理此问题。为什么不直接定义一个新的[用户组](http://www.mediawiki.org/wiki/Manual%3aUser_rights)，比如，`approved`然后将相应的记录添加到[user_groups 表中](http://www.mediawiki.org/wiki/User_groups_table)以获得批准的用户？您将无法阻止未经批准的用户登录，但您*可以*`edit`通过仅向已批准的组授予权限来阻止他们进行编辑，如下所示：

```
$wgGroupPermissions['*']['edit'] = false;
$wgGroupPermissions['user']['edit'] = false;
$wgGroupPermissions['approved']['edit'] = true; 
```

（如果您愿意，您甚至可以撤销`read`未经批准的用户的许可，但请先阅读有关[限制 MediaWiki 中的读取访问权限](http://www.mediawiki.org/wiki/Manual%3aPreventing_access#Restrict_viewing_of_all_pages)的警告。）

* * *

**编辑：**我发现您的 AbortLogin 挂钩存在一些问题。

*   做一个 301 重定向和一个`exit()`在钩子中间可能不是一个好主意。当然，它可能*会*中止登录，但这并不是钩子的真正用途。相反，您应该只返回挂钩函数`false`以指示应该中止登录或`true`继续进行正常的登录检查。

*   无论如何，您正在执行`exit()`when the `approved_account` column is `1`，这可能正是您*不想*中止登录的时候。

*   ...或者，更确切地说，您一直在做`exit()`，因为您在条件中使用了赋值运算符`=`而不是比较运算符`==`，导致它始终为真。（别担心，这是 PHP 和其他类 C 语言中的常见错误。避免的一种方法是养成使用“尤达条件”之类的习惯，`1 == $row->approved_account`如果您遗漏一个，这将产生错误`=`，因为您不能分配给`1`.)

*   此外，将 User 对象与字符串连接可能不会产生任何有意义的东西。而且，即使它确实存在，那里也会存在 SQL 注入漏洞。此外，钩子参数已经包含一个 User 对象，因此您应该使用它而不是全局对象`$wgUser`（无论如何这在登录期间可能已经过时）。

我承认其中一些东西的文档记录确实很差。除了[AbortLogin](http://www.mediawiki.org/wiki/Manual%3aHooks/AbortLogin)文档，我建议查看[通用 MediaWiki 钩子文档](http://www.mediawiki.org/wiki/Manual%3aHooks)，以及从[SpecialUserlogin.php](https://github.com/brion/MediaWiki/blob/master/includes/specials/SpecialUserlogin.php)调用钩子的实际方式。对于数据库访问，我还会向您指出[数据库包装函数 docs](http://www.mediawiki.org/wiki/Manual%3aDatabase_access#Wrapper_functions)；不幸的是，[方法文档页面](http://svn.wikimedia.org/doc/classDatabaseBase.html)现在给出了 404 错误，因此您需要再次直接查看文档[的源代码。](https://github.com/brion/MediaWiki/blob/master/includes/db/Database.php)

无论如何，我会像这样重写你的钩子：

```
public static function onAbortLogin( $user, $password, &$retval, &$msg ) {
    $dbr = wfGetDB( DB_SLAVE );
    $row = $dbr->selectRow(
        'user',
        'approved_account',
        array( 'user_id' => $user->getID() ),
        __METHOD__
    );

    if ( !$row || !$row->approved_account ) {
        $retval = LoginForm::ABORTED;  // actually the default, but let's be sure
        $msg = 'login-abort-not-approved';  // optional: custom error message
        return false;
    }
    else {
        // account is approved, return true to proceed with other login checks
        return true;
    }
} 
```

如果您想要自定义消息，您还需要`MediaWiki:login-abort-not-approved`在您的 wiki 上创建页面。（如果你想把它变成一个适当的 MediaWiki 扩展，你可以[在 i18n 文件中提供一个默认消息](http://www.mediawiki.org/wiki/Manual%3aSpecial_pages#Basic_special_page_template)，但这在这里可能有点过分了。）

* * *

**编辑 2：**是的，您可以在扩展中添加任意数量的挂钩。（事实上​​，您甚至*不需要*扩展，如果您愿意，可以直接在 LocalSettings.php 中定义简单的特定于站点的挂钩。）我*认为*这样的事情可以用于[AddNewAccount 挂钩](http://www.mediawiki.org/wiki/Manual%3aHooks/AddNewAccount)来注销用户，虽然我必须注意我还没有实际测试过这个：

```
public static function onAddNewAccount( $user, $byEmail ) {
    global $wgUser;
    // try to log out the new user only if they're actually logged in
    if ( $user->getName() == $wgUser->getName() ) $user->logout();
    return true;
} 
```

该`if`子句之所以存在，是因为当用户在登录到预先存在的帐户时创建新帐户时也会调用 AddNewAccount，在这种情况下，将他们从原始帐户中注销将是一个不受欢迎的意外。（从技术上讲，`if ( $user == $wgUser )`应该足够了，但是明确地比较用户名而不是对象引用似乎更安全。）

请注意，此时将新用户注销会从新用户创建代码下拉出地毯，因此可能会发生一些不寻常的事情。例如，我怀疑用户创建日志实际上可能最终会显示“NewUserName 创建了新用户帐户 NewUserName”之类的内容，并且“帐户成功创建”页面可能会暂时显示用户已登录，即使他们实际上是不是。

首先以某种方式避免自动登录行为会更干净，但是如果不修补 SpecialUserlogin.php，我看不到任何明显的方法：确定新用户是否自动登录的唯一检查是`if ( $this->getUser()->isAnon() )`，它只检查用户是否已经登录。据我所知，即使以某种方式伪造（这本身就是一个丑陋的 kluge）似乎并不实际。

但是，如果您不介意修补 MediaWiki 核心，只需将条件替换为`if ( false )`（或者`if ( false && $this->getUser()->isAnon() )`，如果您想保持自文档化）就可以解决问题。请注意，您仍然可以保留 AddNewAccount 挂钩作为备份，以防您在升级或其他情况后忘记重新应用补丁。

# php - onclick改变css

> ID：15477046
> 
> 赞同：1
> 
> 时间：2013-03-18T12:38:27.947
> 
> 标签：php, javascript, html, css, class

我正在用 PHP 制作一个简单的日历应用程序，我想`<td>`根据用户的操作更改块样式。但是我希望当“menuclick”类打开时，其他类停止工作，直到我单击另一个块。前一个块也应该关闭。提前致谢。

```
echo'<td onclick=className="menuclick"; onmouseover=className="menuon"; onmouseout=className="menuoff";>' . $countDay++ . "</td>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:48:08.077

我们来看看[http://api.jquery.com/addClass/](http://api.jquery.com/addClass/)

```
 $("#menuItemId").addClass(function(index, currentClass) {
    var addedClass;

    if ( currentClass === "menuon" ) {
      addedClass = "menuoff";

      alert("menu has class "+addedClass+" now");

    }

    return addedClass;
  }); 
```

如果你想删除一个类或某些“状态”：[http ://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:43:59.277

好吧，如果你想内联，它有点复杂。我宁愿使用 jQuery 并做这样的事情：

HTML：

```
<td class="menuClickable">Whatever...</td> 
```

Javascript：

```
$(document).load(function() {
    $('.menuClickable').click(function() {
        $(this).removeClass('menuon');
        $(this).addClass('menuClick');
    });
}); 
```

当然，这只是快速和肮脏的版本......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:42:58.090

我认为您可以使用以下方法实现您想要的：

```
echo '<td onclick="this.className=\'menuclick\';" onmouseover="this.className=\'menuon\';" onmouseout="this.className=\'menuoff\';">' 
```

[http://jsfiddle.net/WDu9v/](http://jsfiddle.net/WDu9v/)

好像每个人都在给出一个 jquery 答案，而 jbabey 正在抱怨内联 js：

```
$('td').each(function() {
    $(this).mouseenter(function() {
        $(this).removeClass().addClass('menuon');
    });
    $(this).mouseleave(function() {
        $(this).removeClass().addClass('menuoff');
    });
    $(this).click(function() {
        $(this).removeClass().addClass('menuclick');
    }); 
}); 
```

[http://jsfiddle.net/WDu9v/1/](http://jsfiddle.net/WDu9v/1/)

# jqgrid - 获取特定记录的页码

> ID：15477047
> 
> 赞同：0
> 
> 时间：2013-03-18T12:38:29.373
> 
> 标签：jqgrid

我正在尝试找到一种方法来获取特定记录的页码。

这是我的问题，在添加新行后，我重新加载网格，并进行排序，新行可以在任何页面上结束。我需要能够找到该特定记录的页码，以便导航到其页面并选择它。

我怎样才能做到这一点，而不必加载每个页面直到我找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:34:40.470

正如我所看到的，要完成添加新记录的位置，重新加载网格，然后让显示的页面成为在排序网格中可以找到新记录的页面。作为一种解决方案，我认为您需要设置`reloadAfterSubmit: false`，然后生成您自己的重新加载，您将在其中（通过 postData）传入一个值，该值将告诉您的控制器更改数据页面以返回到 jqGrid。

当控制器在该字段中接收到值时，您必须编写一些代码来查找记录所属的数据页，然后将该页传递给 jqGrid。

由于网格将被排序，您可以找到该记录在排序数据集中的位置，然后抓取该页面。如果您没有非常大的数据集，您可以遍历每个页面，直到找到包含结果的页面，但是该方法将取决于您将拥有多少数据集。（例如 5 页记录，仅遍历所有记录可能是可以接受的，随着数据集变得更大，您将不得不考虑获取正确的数据页。）

# sql-server - 限制或中止由 Asp.Net 发起的 Sql Server 事务

> ID：15477049
> 
> 赞同：0
> 
> 时间：2013-03-16T01:12:46.440
> 
> 标签：sql-server, rollback, transactions

目标：限制在 Asp.Net 网页上启动的 Sql Server 事务的持续时间。

一个事务不仅仅是一个命令，所以 SqlCommand.CommandTimeout 不够强大。

场景：Asp.Net 页面执行以下操作：

```
SqlConnection connection = new SqlConnection("yourserver");
connection.Open();
tran1 = connection.BeginTransaction();
command.Transaction = tran1;
command.CommandText = "select lots of stuff";
command.ExecuteScalar()
command.CommandText = "select some more stuff";
command.ExecuteScalar()
command.CommandText = "update some stuff";
command.ExecuteScalar()
tran1.Commit();
connection.Close(); 
```

如果所有工作花费的时间太长，一路上锁定资源，那么我们希望该事务被中止，无论它在哪里，要么由 Sql Server 本身，要么由 Asp.Net。此外，如果启动它的客户端计算机掉出窗口。

如果 Asp.Net 中止执行，但让事务保持打开状态，或者 Sql 命令正在运行，那么这还不够好。这一切都是为了保护所有其他用户免受一个人过于繁重的工作。然后那个人需要重新考虑他的工作的大小，把它分成更小的块。

在 Asp.Net 中，我查看了 ExecutionTimeout、ScriptTimeout、CommandTimeout。在 Sql Server 中，我查看了 QUERY_GOVERNOR_COST_LIMIT 和 LOCK_TIMEOUT。

这些似乎都没有达到目标。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:41:18.687

`TransactionScope`自动管理事务并且可以给它一个超时值。

# android - 将视频从 android 手机分享到 facebook

> ID：15477050
> 
> 赞同：0
> 
> 时间：2013-03-18T12:38:35.997
> 
> 标签：android, facebook, youtube, youtube-api

我正在用 android 开发一个录像机。要求用户应该能够将此视频分享/上传到他/她的 Facebook 帐户或 Youtube 帐户。我是否需要为此目的使用 facebook 和 youtube API，或者是否有任何更简单的方法可以将其从 android 手机共享到 Internet。这可能是一个愚蠢的问题，但把我当作编程世界的一个不成熟和新手。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:29:09.380

有两种不同的方法：

[1) 通过数据 API](https://developers.google.com/youtube/v3/)上传到 YouTube，然后获取视频 ID 并使用 Facebook API 将链接发送到 Facebook。（如果您希望您的视频在 FB 之外可用并吸引更多观众）

2) 使用 Facebook API 直接上传到 Facebook。（如果您想将视频直接发布到 FB 并仅在 FB 中分享。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:37:18.243

是的，它可能是 talhamalik

您已使用 Intent.ACTION_SEND，系统将显示您可以共享的应用程序列表（在设备上）。该网站解释了如何：

[http://sudarmuthu.com/blog/sharing-content-in-android-using-action_send-intent](http://sudarmuthu.com/blog/sharing-content-in-android-using-action_send-intent)

# ios4 - dyld：惰性符号绑定失败：找不到符号：

> ID：15477053
> 
> 赞同：1
> 
> 时间：2013-03-18T12:38:45.463
> 
> 标签：ios4, dyld

当我尝试在 iOS 4.3 Simulator 中运行我的项目时，它会抛出以下异常：

```
dyld: lazy symbol binding failed: Symbol not found: _CGPathCreateWithEllipseInRect
  Referenced from: /Users/macintosh/Library/Application Support/iPhone Simulator/4.3.2/Applications/FCBB8196-9F46-4F4E-BFB3-C28D0AAEC74F/Tick.app/Tick
  Expected in: /Users/macintosh/Desktop/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics

dyld: Symbol not found: _CGPathCreateWithEllipseInRect
  Referenced from: /Users/macintosh/Library/Application Support/iPhone Simulator/4.3.2/Applications/FCBB8196-9F46-4F4E-BFB3-C28D0AAEC74F/Tick.app/Tick
  Expected in: /Users/macintosh/Desktop/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator4.3.sdk/System/Library/Frameworks/CoreGraphics.framework/CoreGraphics 
```

我已将目标设置为 ios 4.3。我的项目在 ios 5 和 6 上运行良好。我认为某些库丢失或在旧版本中不受支持。我应该怎么做才能解决这个问题？任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:32:15.050

`CGPathCreateWithEllipseInRect`在 iOS 4.3 上不可用。它是 iOS 5.0 中的新功能。

# android - 如何在Android中停用待机模式？

> ID：15477054
> 
> 赞同：0
> 
> 时间：2013-03-18T12:38:45.897
> 
> 标签：android

有没有办法以编程方式停用待机模式？

在我的 Android 应用程序中，我正在执行一项我不能让设备进入该模式的任务，这可能吗？

谢谢。

# wordpress - 我尝试打开文章时出现奇怪的 WordPress 行为

> ID：15477055
> 
> 赞同：0
> 
> 时间：2013-03-18T12:38:48.440
> 
> 标签：wordpress, content-management-system

我正在本地 Web 服务器上开发一个简单的 Word Press 博客，但我发现了一个奇怪的行为

之后我发布了一篇新文章，它出现在主页上，但是当我点击它的标题打开它时，出现以下错误消息：

> 未找到
> 
> 在此服务器上找不到请求的 URL /wordpress/archives/56。
> 
> Apache/2.2.22 (Ubuntu) 服务器在 localhost 端口 80

如果我尝试单击文章的相关类别图标或单击“添加您的评论”图标，我也会遇到同样的问题

如果我不使用永久链接似乎工作正常！！！所以问题与Permalin有关....

为什么？使用永久链接解决的一些想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:09:01.250

正如 Vickey 上面所说，您需要更新 .htaccess 文件以使用永久链接。

如果您的 Wordpress 安装在您的根文件夹内名为“wordpress”的文件夹中，那么它将与此类似；

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /wordpress/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L]
</IfModule>

# END WordPress 
```

# python - 如何删除/隐藏 matplotlib 滑块值

> ID：15477059
> 
> 赞同：1
> 
> 时间：2013-03-18T12:38:55.110
> 
> 标签：python, widget, matplotlib

我有一个使用 matplotlib 滑块小部件的简单滑块。现在默认情况下在滑块的右侧显示滑块的当前值。但是我想删除或隐藏这个值不被显示。是否有可能这样做，如果可以，怎么做？这是我当前拥有的内容（顶部图像显示具有当前值的滑块）和我想要的内容（底部图像显示滑块但未显示滑块值）的图示。

![在此处输入图像描述](../Images/e1affbe27425425942832c251d2dd811.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:53:30.210

`Slider.valtext`是文本对象，您可以通过以下方式切换它：

```
sfreq = Slider(axfreq, 'Freq', 0.1, 30.0, valinit=f0)
sfreq.valtext.set_visible(False) 
```

# ios - ViewController_iPad.xib 与 ViewController~ipad.xib

> ID：15477061
> 
> 赞同：4
> 
> 时间：2013-03-18T12:38:58.597
> 
> 标签：ios, xcode, naming-conventions, xib

我正在编写一个教程，一些有趣的事情引起了我的注意。我刚刚创建了一个单一视图应用程序项目，我注意到两个 .xib 文件，一个名为`ViewController_iPhone.xib`，一个名为`ViewController_iPad.xib`。在我的项目中，如果我想为 iPhone 和 iPad 使用不同的 .xib，我会`ViewController.xib`为 iPhone 和`ViewController~ipad.xib`iPad 使用。我有点理解这可能是一个新的命名约定，但是如果我针对旧的 iOS 版本，我可以使用这个命名约定事件吗？这也发生在 xCode 4.6

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T12:54:49.533

我想你可能遇到过 iOS 上的通用应用程序，或者可能会根据设备加载 .xib 文件。无论哪种方式，您都应该使用`~ipad`代替`~iPad`和`~iphone`代替 `~iPhone`以使其正常工作。

两者都将在模拟器上工作，但之前会在设备上放弃。

请从 Apple 参考中查找适用于[iOS 支持设备特定资源的摘录](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i-CH1-SW2)

iOS 支持特定于设备的资源

在 iOS 4.0 及更高版本中，可以将单个资源文件标记为仅在特定类型的设备上可用。此功能简化了您必须为通用应用程序编写的代码。您可以让捆绑加载例程选择正确的文件，而不是创建单独的代码路径来为 iPhone 加载一个版本的资源文件和为 iPad 加载不同版本的文件。您所要做的就是适当地命名您的资源文件。

要将资源文件与特定设备相关联，请在其文件名中添加自定义修饰符字符串。包含此修饰符字符串会产生具有以下格式的文件名：

.

该字符串表示资源文件的原始名称。它还代表您从代码访问文件时使用的名称。同样，字符串是用于标识文件类型的标准文件扩展名。该字符串是区分大小写的字符串，可以是以下值之一：

```
~ipad - The resource should be loaded on iPad devices only.

~iphone - The resource should be loaded on iPhone or iPod touch devices only. 
```

# php - 当复选框 = 默认选中时显示输入

> ID：15477073
> 
> 赞同：0
> 
> 时间：2013-03-18T12:39:49.350
> 
> 标签：php, javascript, checkbox, default, show

我找到了一种在选中复选框时显示/取消隐藏 div 的方法，但在默认情况下选中复选框时却没有。

```
<?php 
  $checked=product_exists($row[ 'serial']) ? ' checked="checked"': ''; 
  echo '<input type="checkbox" '. $checked . '> '. $row[ 'name'] .'<br />'; 
?> 
```

那是检查框的代码，现在我需要一些东西：-检查是否选中了复选框->显示其隐藏的div

我希望有人可以帮助我，谢谢。

额外代码：

```
<?php $result=mysql_query( "select * from products"); while($row=mysql_fetch_array($result)){
?>
<div class="column">
    <?php $checked=product_exists($row[ 'serial']) ? ' checked="checked"':
    ''; $serial=$row[ 'serial']; echo '<input type="checkbox" '. $checked .
    '> '. $row[ 'name'] . ''. $serial . '<br />'; $result2=mysql_query(
    "select * from productsmenus where serial = $serial"); while($row=mysql_fetch_array($result2)){ echo '<div style="'.($checked===''
    ? 'display: none;' : ''). '"></div>';}?>
</div>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:53:47.013

也许这可能是一个临时修复：

```
echo '<div style="'.str_replace('checked="checked"', 'display: none;', $checked).'">'; 
```

如果我没记错的话，这是你的问题，不是吗？如果选中该复选框，则隐藏一个 div。反过来也很简单：

```
echo '<div style="'.($checked === '' ? 'display: none;' : '').'">'; 
```

但老实说，我认为你的做法并不正确。是的，我不知道你到底想做什么，但仍然。您正在*“构建”*您的页面，但您仍然需要检查给定的产品是否存在？
也许寻找一种获取所有数据的方法，这样您就可以将一组产品传递给某种模板脚本，这在当今大多数框架中都是惯例。

*更新：*
查看您的网站后，您可能会更好地使用 JS 和 AJAX 调用：

```
document.body.addEventListener('change', function(e)
{
     var div, checkboxTxt, xhr
     target = e.target || e.srcElement;
     if (target.tagName.toLowerCase() !== 'input' || target.type !== 'checkbox')
     {//value of a non-checkbox changed, ignore event
         return e;
     }
     checkboxTxt = target.parentNode.innerText.replace(/[^a-z ]/gi, '').trim();
     if (target.checked === false)
     {//checkbox was unchecked --> hide div
         div = document.getElementBy(checkboxTxt);
         div.parentNode.removeChild(div);
         return e;
     }
     //add div: checkbox was checked
     xhr = new XMLHttpRequest();
     xhr.open('post', 'your/ajax/url', true);
     xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');|
     xhr.onreadystatechange = function()
     {//things to do with server data
         if (this.readyState === 4 && this.status === 200)
         {//call complete
             div = document.getElementById(checkboxTxt);//assuming it's hidden... you can create a new element here, too if you like
             div.style.display = 'block';
             div.innerHTML = this.responseText;//or, if it's a JSON object, parse and get the things you need to build the html...
         }
     };
     xhr.send(JSON.stringify({checkbox:checkboxTxt});
}, false); 
```

当然，这个片段不会削减它，但它应该足以让你走上正轨。快乐编码（veel plezier，成功）

# c# - 使用 C# 在 DataGridView 中当前选定的值

> ID：15477077
> 
> 赞同：1
> 
> 时间：2013-03-18T12:40:01.643
> 
> 标签：c#, winforms, datagridview

我正在尝试从 DataGridView 获取当前选定的值

```
MessageBox.Show(""+dataGridView1.SelectedCells.ToString()+"") 
```

但它从不显示所选值。

表明

> System.Windows.Forms.DataGridViewSelectedCellCollection

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:42:33.017

你应该这样做

```
MessageBox.Show(dataGrdiView1.SelectedCells[0].Value.ToString()); 
```

尝试访问单个单元格的值或文本，而不是整个集合

您还可以遍历整个`SelectedCells`集合

```
 string text;
 foreach (DataGridViewCell cell in dataGridView1.SelectedCells)
 {
     //MessageBox.Show(cell.Value.ToString());
     text +=cell.Value.ToString();
 }
 MessageBox.Show(text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:42:16.573

```
string message = string.Empty;
foreach (var c in _dataGridView1.SelectedCells)
    message += " " + c.Value.ToString();
MessageBox.Show(message); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:44:24.320

如果它总是选择一个单元格，您可以使用。dataGridView1.SelectedCells[0].tostring。您之所以获得类名 ia 是因为您要返回一组选定的单元格，因为它们一次可以选择多个单元格。

# django - Django：如何从另一个模块中的定义创建模型

> ID：15477079
> 
> 赞同：0
> 
> 时间：2013-03-18T12:40:03.120
> 
> 标签：django, django-south, django-orm, django-syncdb

假设我有这个 Django 设置：

```
appA - models.py
     - views.py
     - etc...

global - models.py 
```

我想要的是从`global.models`in导入模型，以便它们被syncdb 和 south`appA.models`视为普通模型。`appA`

全球模型：

```
from django.db import models
class Foo(models.Model):
    #django model stuff 
```

appA.models：尝试 1：

```
from global.models import *

>>manage.py schemamigration appA --auto
>>does not see Foo 
```

尝试2：

```
from global.models import Foo

class Foo(Foo):
    pass

>>manage.py schemamigration appA --auto
>>Error: One or more models did not validate:
>>appA.Foo: 'foo_ptr' has a relation with model <class 'global.models.Foo'>, which has either not been installed or is abstract. 
```

实现此目的的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:45:16.060

```
from .models import Foo

class Foo(models.Model):
    #stuff

    class Meta:
        abstract = True 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:48:42.647

*global*是一个 python 语句，你不应该用它来命名你的包之一。尝试使用不同的名称，并且不要忘记将`__init__.py`文件放入目录中以将其转换为 python 包。

# ibm-mobilefirst - WL.Server.readSingleJMSMessage 上的零超时导致类转换异常

> ID：15477081
> 
> 赞同：1
> 
> 时间：2013-03-18T12:40:10.750
> 
> 标签：ibm-mobilefirst

根据文档，从`JMS`队列中读取消息的无限等待是通过指定来实现的`"timeout: 0"`。使用非零值调用可以`WL.Server.readSingleJMSMessage`正常工作，因为零超时函数会立即返回，我可以找到日志条目：

```
com.worklight.integration.model.InvocationContext E FWLSE0099E: An error occurred while invoking procedure jms_topic/JMSConsumerFWLSE0100E: parameters:{ "arr": [ { "destination": "myqueue", "singleMessage": true, "timeout": 0.0 }]} java.lang.Double cannot be cast to java.lang.Integer FWLSE0101E: Caused by: null 
```

对于像记录的参数这样的正值`"timeout: 1000"`是正确的，也是“超时：1000”。对于“超时：0”，记录的值是浮点数，`"timeout: 0.0"`在 Java 端是意外的。

我看不到强制积分零作为文字的方法，我试过了，`"timeout: 0x0"`或者`"timeout: parseInt(0)"`问题似乎出在`JS-Java`翻译中。可惜这样的基本边界条件在发布前没有经过测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:36:59.863

这似乎是一个不幸的错误，目前没有已知的解决方法。将打开一个缺陷来解决该问题。我们将继续为当前版本寻找可能的解决方法。

# ios - 在下一个后退按钮操作中删除 CCLabelTTF

> ID：15477083
> 
> 赞同：0
> 
> 时间：2013-03-18T12:40:29.373
> 
> 标签：ios, xcode, ipad, cocos2d-iphone

我不知道如何删除我的标签字符串。事情是这样的，按下下一个按钮并删除标签，添加下一个标签（与后退按钮相同）这是按下下一个/后退按钮时启动的方法：

```
-(void)showStoryContentWithIndex:(int)index
{
    [self removeChild:card cleanup:YES];

    NSString* plistPath = [[NSBundle mainBundle] pathForResource:@"Names" ofType:@"plist"];
    NSArray* contentArray = [NSArray arrayWithContentsOfFile:plistPath];

    CCLabelTTF *truckName = [CCLabelTTF labelWithString:[contentArray objectAtIndex:currentIndexSelected]  fontName:CUSTOM_FONT_NAME fontSize:80];

    truckName.position = ccp(500, 220);
    [self addChild:TName];

    NSString * cardSpriteName = [NSString stringWithFormat:@"%d.png",currentIndexSelected];
    card = [CCSprite spriteWithSpriteFrameName:cardSpriteName];
    [card setPosition:ccp (500,500)];
    [card setOpacity:255];
    [self addChild:card z:4];
} 
```

所以，我需要实现一种删除标签的方法，我试图使用 removeChild，但那里什么也没出现。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:59:43.110

为下一个和上一个标签保留一个 iVar，而不是删除它们，你为什么不

```
// in .h

CCLabelTTF *_nextLabel, *_previousLabel;

// somewhere in init 

_nextLabel = [CCLabelTTF ...];
[self addChild:_nextLabel]              
_previousLabel = [CCLabelTTF ...];
[self addChild:_previousLabel]              

// and finally, when you update 

[_nextLabel setString:@"new next"];
[_previousLabel setString:@"new previous"]; 
```

编辑 ：

```
NSString* newNext = [dic objectForKey:@"keyForNext"];
[_nextLabel setString:newNext]; 
```

# oauth-2.0 - 创建 oAuth 2.0 服务器实现时，请求 URI 应该是什么？

> ID：15477084
> 
> 赞同：2
> 
> 时间：2013-03-18T12:40:30.660
> 
> 标签：oauth-2.0

在阅读了[oAuth 2.0 草案 23](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-23)之后，我对 oAuth 的工作原理有了更好的理解，但是我不理解的一件事是请求 uri：

我已经阅读了草稿中的部分，它解释了请求 uri 需要是来自客户端的绝对 url，但是如果我正在制作一个 android/iphone 应用程序，那么这个值必须是什么，因为我的应用程序不是网络上的网站服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:47:30.240

您可以定义自己的自定义 URI 方案，例如

```
myapp://oauthcallback 
```

现在你设置你的应用程序来监听这个方案（适用于[Android](https://stackoverflow.com/q/2958701/1467115)和[iOS](https://stackoverflow.com/q/5384467/1467115)）。当您的浏览器/webview 在授权请求后被重定向时，您的应用程序将启动，您可以处理与 URI 一起发送的查询参数。

# javascript - 根据出生日期计算年龄（jQuery 或 PHP）[不基于用户输入]

> ID：15477086
> 
> 赞同：1
> 
> 时间：2013-03-18T12:40:36.430
> 
> 标签：javascript, php, jquery, date-math, date

我正在寻找一个 JavaScript 或 PHP 脚本，它允许我根据某人的出生日期以`mm/dd/yyyy`格式计算某人的年龄。我发现这个非常有用的链接“ [Calculate age in JavaScript](https://stackoverflow.com/questions/4060004/calculate-age-in-javascript) ”，但它似乎是为处理用户输入而设计的。但是，我正在创建一个页面，将 DOB 作为简单文本直接放入 HTML 中。那么还可以计算年龄吗？基本上，我希望这行文本成为最终结果：

```
29 (10/17/1983) 
```

`29`自动计算并显示为年龄的值。

如果这样的事情是可能的，我将非常感谢您的帮助。我对 PHP 和/或 jQuery 相当熟悉，但我当然不是高级专业人士。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T12:41:23.963

PHP：

```
$today = new DateTime();
$birthdate = new DateTime("1973-04-18 09:48:00");
$interval = $today->diff($birthdate);
echo $interval->format('%y years'); 
```

[看到它在行动](http://codepad.viper-7.com/HqDw29)。您显然可以格式化输出以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:46:10.340

Javascript：

这可能比您要求的更多，但会给您以年、月和日为单位的年龄。

像这样： `8 years, 7 months, 21 days old`

如果您有一个只有几天大的新生儿的网站，这很有效。

这是我大约 9 年前在我女儿的网站上使用的东西

```
 function GetMyAge()
{
<!--

birthTime = new Date("July 25, 2004 00:00:00 GMT-0600")
todaysTime = new Date();

<!-- Parse out specific date values
todaysYear = todaysTime.getFullYear()
todaysMonth = todaysTime.getMonth()
todaysDate = todaysTime.getDate()
todaysHour = todaysTime.getHours()
todaysMinute = todaysTime.getMinutes()
todaysSecond = todaysTime.getSeconds()
birthYear = birthTime.getFullYear()
birthMonth = birthTime.getMonth()
birthDate = birthTime.getDate()
birthHour = birthTime.getHours()
birthMinute = birthTime.getMinutes()
birthSecond = birthTime.getSeconds()

<!-- Adjusts for Leap Year Info
if ((todaysYear / 4) == (Math.round(todaysYear / 4))) {
   countLeap = 29}
else {
     countLeap = 28}

<!-- Calculate the days in the month
if (todaysMonth == 2) {
   countMonth = countLeap}
else {
     if (todaysMonth == 4) {
        countMonth = 30}
     else {
        if (todaysMonth == 6) {
           countMonth = 30}
        else {
           if (todaysMonth == 9) {
              countMonth = 30}
           else {
              if (todaysMonth == 11) {
                 countMonth = 30}
              else {
                 countMonth = 31}}}}}

<!-- Doing the subtactions
if (todaysMinute > birthMinute) {
   diffMinute = todaysMinute - birthMinute
   calcHour = 0}
else {
   diffMinute = todaysMinute + 60 - birthMinute
   calcHour = -1}
if (todaysHour > birthHour) {
   diffHour = todaysHour - birthHour + calcHour
   calcDate = 0}
else {
   diffHour = todaysHour + 24 - birthHour  + calcHour
   calcDate = -1}
if (todaysDate > birthDate) {
   diffDate = todaysDate - birthDate + calcDate
   calcMonth = 0}
else {
   diffDate = todaysDate + countMonth - birthDate  + calcDate
   calcMonth = -1}
if (todaysMonth > birthMonth) {
   diffMonth = todaysMonth - birthMonth + calcMonth
   calcYear = 0}
else {
   diffMonth = todaysMonth + 12 - birthMonth + calcMonth
   calcYear = -1}
diffYear = todaysYear - birthYear + calcYear

<!-- Making sure it all adds up correctly
if (diffMinute == 60) {
   diffMinute = 0
   diffHour = diffHour + 1}
if (diffHour == 24) {
   diffHour = 0
   diffDate = diffDate + 1}
if (diffDate == countMonth) {
   diffDate = 0
   diffMonth = diffMonth + 1}
if (diffMonth == 12) {
   diffMonth = 0
   diffYear = diffYear + 1}

if (diffYear != 1)
    YearPlural = "s"
else
    YearPlural=""

if (diffMonth != 1)    
    MonthPlural = "s"
else
    MonthPlural=""

if (diffDate != 1)     
    DatePlural = "s"
else
    DatePlural=""

if (diffYear == 0 && diffMonth == 0)
    return (diffDate + ' day' + DatePlural + ' old.  ');
else if (diffYear == 0)
    return (diffMonth + ' month' + MonthPlural + ', ' + diffDate + ' day' + DatePlural + ' old.  ');
else
    return (diffYear + ' year' + YearPlural + ', ' + diffMonth + ' month' + MonthPlural + ', ' + diffDate + ' day' + DatePlural + ' old.  ');
}
// --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:46:12.923

在javascript中你可以计算它：

```
function getAge(dateString) {
    var today = new Date();
    var birthDate = new Date(dateString);
    var age = today.getFullYear() - birthDate.getFullYear();
    var m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }
    return age;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T12:53:27.127

计算年龄的最简单方法是：

```
CURRENT YEAR - BIRTH YEAR = AGE  
IF(CURRENT MONTH DAY < BIRTH MONTH DAY) AGE--; 
```

IE 还活着但 -1 如果你还没有过生日

> MONTH DAY 是 3 月 1 日的 0301

# c# - 带有运行时参数的 Lambda 表达式或委托

> ID：15477087
> 
> 赞同：1
> 
> 时间：2013-03-18T12:40:39.137
> 
> 标签：c#, events, dynamic

[作为我的问题的](https://stackoverflow.com/questions/15436946/dynamic-event-subscription-and-1-handler)后续，我正在尝试创建一个匿名事件处理程序，其参数是在运行时决定的。

```
private void RegisterEventHandlers(Control ctl)
{
  foreach (Command command in CommandList)
  {
    EventInfo eventInfo = ctl.GetType().GetEvent(command.Name);

    List<ParameterExpression> callArguments = new List<ParameterExpression>();
    foreach (ParameterInfo parameter in eventInfo.EventHandlerType.GetMethod("Invoke").GetParameters())
    {
      callArguments.Add(Expression.Parameter(parameter.ParameterType, parameter.Name));
    }

    //begin pseudo code
    method = (callArguments) => 
    {
      if (sender != null) ...
      if (e != null) ...
      name = command.name;
    };
    or
    method = new delegate
    {
      if (sender != null) ...
      if (e != null) ...
      name = command.name;
    };
    //end pseudo code

    var body = Expression.Call(Expression.Constant(this), method, callArguments);
    var lambda = Expression.Lambda(eventInfo.EventHandlerType, body, callArguments);

    eventInfo.AddEventHandler(ctl, lambda.Compile());
  }
} 
```

我发现我对 lambda 表达式和委托的知识太缺乏解决这个问题......

匿名处理程序只需将发送者对象、事件参数和命令对象转发给另一个函数。并非所有事件都具有相同的参数，因此我想到将处理程序定义为具有动态参数的匿名函数。

但是，非常欢迎其他可能解决我的问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:46:20.513

您可以将委托/lambda 声明为采用 params 数组：

```
method = delegate(params object[] args)
{
    ...
}; 
```

在其中，使用 MethodInfo 类获取有关应将参数转发到的方法的信息。

但我认为你在这里太有活力了。反射允许您绕过使用编译时功能时所需的正常抽象机制。这会导致复杂性、可读性丧失，并将大量编译时错误转化为运行时错误。您仍然可以在运行时使用多态性和委托来决定内容，同时保持可读性和编译时类型安全。微软在他们的库中都这样做了。除了在 System.Reflection 命名空间的实际实现中，您永远不会看到需要使用反射的库。

# amazon-ec2 - Amazon EC2 预留实例

> ID：15477088
> 
> 赞同：1
> 
> 时间：2013-03-18T12:40:43.087
> 
> 标签：amazon-ec2

我维护了很多不同类型的亚马逊实例（中型、微型、小型）等。但是，有些实例我想保留几年。但，

从我到处读到的：

```
Reserved instances are a billing feature, not a technical feature. 
```

因此，如果我保留一个微型实例，然后将该实例从微型转换为大型实例，那么保留的实例插槽是否会被我的 ec2 实例列表中的下一个微型实例占用（前提是它们位于同一个 AZ 中）？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T20:48:21.240

是的，基本上如你所说。当您被计费时，亚马逊首先检查保留实例，并且仅当您不在这些实例中时，才适用正常费率。

[请参阅此处以供参考](http://aws.amazon.com/en/ec2/reserved-instances/)：

“易于使用：预留实例易于使用，无需更改您使用 EC2 的方式。在计算您的账单时，我们的系统将首先自动应用预留实例费率，以最大限度地降低您的成本。实例小时将仅在开启时收取- 当您在该小时运行的实例总数超过您拥有的适用预留实例数量时的需求率。”

所以从技术上讲，保留实例和非保留实例之间没有区别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:37:21.953

任何与预订匹配的实例都会使用它。预留不绑定到特定实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-27T22:05:31.073

是的。

我喜欢称之为涓涓细流。预留实例将向下渗透到与相同实例大小匹配的下一个未预留实例。

注意：一个不错的功能是能够在同一实例类型中将实例重新组织为不同大小。例如，您有 5 个 m1.xlarge 实例，您可以将它们拆分为 40 个 m1.small 实例，反之亦然。不幸的是，您不能在 m1、t1、c1、c3 等之间移动。

# java - Java中的IST到EST时间转换

> ID：15477091
> 
> 赞同：0
> 
> 时间：2013-03-18T12:40:48.927
> 
> 标签：java, datetime, datetimeoffset

我在 IST 时间中有一个 Java 日期字段。我想将其转换为 EST 时间，并且输出应仅为日期类型。我可以使用以下代码完成相同的操作：-

```
SimpleDateFormat dateTimeFormat = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss");
dateTimeFormat.setTimeZone(TimeZone.getTimeZone("Asia/Calcutta"));
Date date = new Date();
DateFormat timeFormat = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss");
timeFormat.setTimeZone(TimeZone.getTimeZone("America/New_York"));
String estTime = timeFormat.format(date);
date = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss", Locale.ENGLISH).parse(estTime); 
```

上述代码的问题在于，虽然日期转换为 EST 时间，但时区仍显示为 IST 而不是 EST。日期的其余部分转换得非常好。有没有办法在日期字段中将时区明确设置为 EST。对此的任何帮助将不胜感激。

-Subhadeep

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:50:49.840

该类`Date`与时区无关。基本上，它始终基于 GMT，尽管在打印时它使用当前系统时区来调整它。

但是，`Calendar`是特定于时区的。请参阅[Calendar.setTimeZone()](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#setTimeZone%28java.util.TimeZone%29)。

考虑：

```
 Calendar cal = new GregorianCalendar();
   cal.setTimeZone(TimeZone.getTimeZone("America/New_York"));
   cal.setTime(new Date()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-19T21:18:38.790

# *java.time*

旧的日期时间 API（`java.util`日期时间类型及其格式类型`SimpleDateFormat`等）已过时且容易出错。建议完全停止使用它并切换到`java.time`现代[日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^*。

## 使用`java.time`现代 API 的解决方案：

```
import java.time.Instant;
import java.time.ZoneId;
import java.time.ZonedDateTime;

public class Main {
    public static void main(String[] args) {
        Instant instant = Instant.now();
        System.out.println(instant);

        ZonedDateTime zdtIndia = instant.atZone(ZoneId.of("Asia/Calcutta"));
        ZonedDateTime zdtNewYork = instant.atZone(ZoneId.of("America/New_York"));

        System.out.println(zdtIndia);
        System.out.println(zdtNewYork);
    }
} 
```

**输出：**

```
2021-05-19T21:08:54.241341Z
2021-05-20T02:38:54.241341+05:30[Asia/Calcutta]
2021-05-19T17:08:54.241341-04:00[America/New_York] 
```

[`Instant`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html)表示时间线上的一个瞬时点。`Z`输出中的 是零时区偏移的时[区指示符](https://en.wikipedia.org/wiki/ISO_8601#Time_zone_designators)。它代表 Zulu 并指定`Etc/UTC`时区（时区偏移量为`+00:00`小时）。

从**[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解更多关于`java.time`现代[日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^*的信息。

## 使用旧版 API 的解决方案：

该`java.util.Date`对象不是像[现代日期时间类型](https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html)那样的真实日期时间对象；相反，它表示自称为“纪元” `January 1, 1970, 00:00:00 GMT`（或 UTC）的标准基准时间以来的毫秒数。当您打印 的对象时`java.util.Date`，其`toString`方法会返回 JVM 时区中的日期时间，根据此毫秒值计算得出。如果您需要在不同的时区打印日期时间，则需要将时区设置为`SimpleDateFormat`并从中获取格式化字符串。

**演示：**

```
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.TimeZone;

public class Main {
    public static void main(String[] args) {
        Date date = new Date();
        System.out.println(date);

        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS[zzzzz]");

        sdf.setTimeZone(TimeZone.getTimeZone("Asia/Calcutta"));
        String dtIndia = sdf.format(date);

        sdf.setTimeZone(TimeZone.getTimeZone("America/New_York"));
        String dtNewYork = sdf.format(date);

        System.out.println(dtIndia);
        System.out.println(dtNewYork);
    }
} 
```

**输出：**

```
Wed May 19 22:16:08 BST 2021
2021-05-20T02:46:08.024[India Standard Time]
2021-05-19T17:16:08.024[Eastern Daylight Time] 
```

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，您可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和您的 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:10:18.103

你应该在你的模式中添加`z`时区`SimpleDateFormat`模式吗？

所以，应该是`DateFormat timeFormat = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss z")`。我像这样更改了您的代码：

```
public static void main(String[] args) throws ParseException {
    SimpleDateFormat dateTimeFormat = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss z");
    dateTimeFormat.setTimeZone(TimeZone.getTimeZone("Asia/Calcutta"));
    Date date = new Date();

    System.out.println(dateTimeFormat.format(date)); // this print IST Timezone

    DateFormat timeFormat = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss z");
    timeFormat.setTimeZone(TimeZone.getTimeZone("America/New_York"));

    String estTime = timeFormat.format(date);
    date = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss z", Locale.ENGLISH).parse(estTime);

    System.out.println(timeFormat.format(date)); // this print EDT Timezone currently (on March)
} 
```

在最后的打印语句中，当前日期格式使用**EDT 时区**（东部夏令时间）打印。也许是因为[这个](http://en.wikipedia.org/wiki/Eastern_Time_Zone)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-08T08:36:52.420

[John B](https://stackoverflow.com/a/15477276/642706)的正确答案解释说 java.util.Date 似乎有一个时区，但没有。它的`toString`方法在生成字符串表示时应用您的 JVM 的默认时区。

这是避免与 Java 捆绑在一起的 java.util.Date 和 .Calendar 类的众多原因之一。避开他们。而是使用[Joda-Time](http://www.joda.org/joda-time/)或 Java 8 中内置的 java.time 包（受 JSR 310 定义的 Joda-Time 启发）。

这是 Joda-Time 2.3 中的一些示例代码。

```
String input = "01/02/2014 12:34:56";
DateTimeFormatter formatterInput = DateTimeFormat.forPattern( "MM/dd/yyyy HH:mm:ss" );
DateTimeZone timeZoneIndia = DateTimeZone.forID( "Asia/Kolkata" );
DateTime dateTimeIndia = formatterInput.withZone( timeZoneIndia ).parseDateTime( input );

DateTimeZone timeZoneNewYork = DateTimeZone.forID( "America/New_York" );
DateTime dateTimeNewYork = dateTimeIndia.withZone( timeZoneNewYork );

DateTime dateTimeUtc = dateTimeIndia.withZone( DateTimeZone.UTC ); 
```

转储到控制台...</p>

```
System.out.println( "input: " + input );
System.out.println( "dateTimeIndia: " + dateTimeIndia );
System.out.println( "dateTimeNewYork: " + dateTimeNewYork );
System.out.println( "dateTimeUtc: " + dateTimeUtc ); 
```

运行时……</p>

```
input: 01/02/2014 12:34:56
dateTimeIndia: 2014-01-02T12:34:56.000+05:30
dateTimeNewYork: 2014-01-02T02:04:56.000-05:00
dateTimeUtc: 2014-01-02T07:04:56.000Z 
```

# c# - DateTime 运算符给出奇怪的结果

> ID：15477097
> 
> 赞同：-1
> 
> 时间：2013-03-18T12:40:57.727
> 
> 标签：c#, sql-server, asp.net-mvc, datetime

我有两个 SQL 查询字符串，其中一个有效，一个无效。

工作的：

```
string updateLoginTime = "UPDATE DeviceUsers SET lastLogin = '" + dateTime + "' WHERE ID = '" + userID + "'"; 
```

这个没有：

```
string updateText = "UPDATE DocumentsRead SET timeRead = '" + dateTime + "' WHERE userID = '" + userID + "' AND fileName = '" + fileOnly +"'"; 
```

它抛出一个错误：

> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。

在这两个查询中，`dateTime`参数都作为字符串传递给 Web 方法。任何想法为什么第一个有效但第二个无效？

-编辑-

第二个查询现在的格式如下：

```
dateTime = DateTime.Now.ToString("dd-MM-yy HH-mm-ss");

using (var conn = new SqlConnection(ConfigurationManager.ConnectionStrings["EndUsersConnectionString"].ConnectionString)) 
using (var cmd = conn.CreateCommand())
{
    conn.Open();

    cmd.CommandText = "UPDATE DocumentsRead SET timeRead = @timeRead WHERE userID = @userID AND fileName = @fileName";

    cmd.Parameters.AddWithValue("@timeRead", dateTime);
    cmd.Parameters.AddWithValue("@userId", userID);
    cmd.Parameters.AddWithValue("@fileName", fileName);

    cmd.ExecuteNonQuery();
} 
```

仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T12:44:16.320

永远不要那样做。**切勿**使用字符串连接来构建 SQL 查询。如果您不想遇到，请**始终**[`Bobby Tables`](http://xkcd.com/327/)使用参数化查询：

```
using (var conn = new SqlConnection(someConnectionString))
using (var cmd = conn.CreateCommand())
{
    conn.Open();
    cmd.CommandText = "UPDATE DocumentsRead SET timeRead = @timeRead WHERE userID = @userID AND fileName = @fileName";
    cmd.Parameters.AddWithValue("@timeRead", someDateTimeInstance);
    cmd.Parameters.AddWithValue("@userId", userId);
    cmd.Parameters.AddWithValue("@fileName", fileName);
    cmd.ExecuteNonQuery();
} 
```

这样，您不仅不会遇到 Bobby Tables，而且您的查询也会正常工作。

做 SQL 开发时应该尊重的黄金法则不是永远不要使用`+`运算符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:45:01.063

仔细检查表属性上的数据类型。

DeviceUsers.lastLogin 类型似乎已正确设置为 Date，但 DocumentsRead.timeRead 可能未正确配置。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T12:46:54.817

连接 sql 查询通常是一种不好的做法，因此最好使用参数化查询，但是在您的情况下，您可能在具有不同语言环境的环境中工作，因此应用程序服务器和 dbms 使用不同的日期格式（dd/mm/yyyy 和例如 mm/dd/yyyy)

# ios - 如何为开发设置推送通知？

> ID：15477104
> 
> 赞同：3
> 
> 时间：2013-03-18T12:41:30.233
> 
> 标签：ios, objective-c, push-notification

我为 ios 开发了一个应用程序，并已在应用程序商店发布。推送通知系统在开发中运行良好，但现在，我根本没有收到任何通知。在发布之前，我已经生成了与启用推送并配置了生产推送 SSL 证书的应用程序 ID 关联的开发配置文件。我已经下载了生产推送 SSL 证书并将其安装在我的钥匙串访问中，将其及其私钥导出，将它们转换为 pem 并将它们合并到一个唯一的 pem 文件中，我将其上传到我的服务器，其中包含发送的 php 脚本通知。我已将我的 php 脚本中的服务器更改为生产服务器（ssl://gateway.push.apple.com:2195）。脚本似乎仍然发送通知并且不会触发任何错误。

我错过了什么？

这是我的 php 脚本：

```
<?PHP
/* Here there's Code to retrieve device tokens and put it in a variable $deviceToken from     my online database and then...*/

$message = "Message to be sent";    
$payload = '{
                "aps" : 

                    { "alert" : "'.$message.'",
                      "badge" : 1,
                      "sound" : "bingbong.aiff"
                    } 
            }';

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ck.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', 'secret');

// se l'app è già sull'appstore togliere sandbox e lasciare solo gateway.push.apple.com:2195
// invece di gateway.sandbox.push.apple.com:2195
$fp = stream_socket_client('ssl://gateway.push.apple.com:2195', $err, $errstr, 60, STREAM_CLIENT_CONNECT, $ctx);
if(!$fp){
    print "Failed to connect $err $errstrn";
    return;
} else {
    print "Notifications sent! </br>";
}

foreach($devArray as $deviceToken){
    $msg = chr(0) . pack("n",32) . pack('H*', str_replace(' ', '', $deviceToken)) . pack        ("n",strlen($payload)) . $payload;
    print "sending message :" . $payload . "n to device:".$deviceToken."</br>";
    fwrite($fp, $msg);
}
fclose($fp); 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:30:09.033

因为您必须使用有效的“生产推送 SSL 证书”而不是“开发推送 SSL 证书”重新生成 PEM。

编辑：对不起，我读错了两次。该过程看起来不错，我发布了我一直使用的 php 代码，它看起来非常相似，但您可以尝试对其进行编辑。

```
<?php
      // Passphrase for the private key (ck.pem file)
      // $pass = ”;
      // Get the parameters from http get or from command line
      $message = 'Testo Notifica Push';
      $badge = 1;
      $sound = 'default';

      // Put your private key's passphrase here:
    $passphrase = '';

      // Construct the notification payload
      $body = array();
      $body['aps'] = array('alert' => $message);

      if ($badge)
            $body['aps']['badge'] = $badge;
      if ($sound)
            $body['aps']['sound'] = $sound;

      /* End of Configurable Items */

// Put your device token here (without spaces):
$deviceToken = '20afc981ce9f0c63b5beb83d561d086a1338b2d42dd6defef67e4b7dbabe72b9';

////////////////////////////////////////////////////////////////////////////////

$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'cert.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

// Open a connection to the APNS server
$fp = stream_socket_client(
    'ssl://gateway.push.apple.com:2195', $err,
    $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

if (!$fp)
    exit("Failed to connect: $err $errstr" . PHP_EOL);

echo 'Connected to APNS' . PHP_EOL;

// Construct the notification payload
      $body = array();
      $body['aps'] = array(’alert’ => $message);

      if ($badge)
            $body['aps']['badge'] = $badge;
      if ($sound)
            $body['aps']['sound'] = $sound;

// Encode the payload as JSON
$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
    echo 'Message not delivered' . PHP_EOL;
else
    echo 'Message successfully delivered' . PHP_EOL;

// Close the connection to the server
fclose($fp);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T07:04:14.140

设置推送时要做的最后一步是确保您没有混合生产和开发设备令牌！就我而言，在我的数据库中，推送发送到的第一个设备令牌是开发设备令牌。发生这种情况时，Apple 服务器会终止连接，避免发送任何其他通知。感谢苹果！

# sql - 返回字符串中的单词

> ID：15477108
> 
> 赞同：-1
> 
> 时间：2013-03-18T12:41:41.643
> 
> 标签：sql, oracle, varchar2

如果没有任何内容，如何返回 varchar2 数据类型中的第二个单词和空白？这个想法是在函数中使用函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:01:01.407

```
regexp_substr(column, '\S+', 1, 2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:45:09.800

`substr(column, instr(column, ' ') + 1)`

编辑（仅用于第二个单词）：

`substr(col, instr(col, ' '), instr(col, ' ', instr(col, ' ') + 1) - instr(col, ' '))`

再次编辑：

正如科林指出的那样，`REGEXP_SUBSTR(col,'\S+',1,2)`可能是这样做的更好方法

# erlang - Mnesia，选择和二级索引

> ID：15477114
> 
> 赞同：3
> 
> 时间：2013-03-18T12:42:04.583
> 
> 标签：erlang, mnesia

我为表创建了索引并有一个问题。mnesia:select 是否使用二级索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T12:58:04.943

来自[http://www.erlang.org/doc/efficiency_guide/tablesDatabases.html](http://www.erlang.org/doc/efficiency_guide/tablesDatabases.html)

> 不扫描完整表时存在例外情况，例如，如果在搜索 ordered_set 表时绑定了部分键，或者如果它是 Mnesia 表并且在选择/匹配的字段上有二级索引。

# python - 修复命令提示符中的 Python 进度条

> ID：15477122
> 
> 赞同：0
> 
> 时间：2013-03-18T12:42:25.270
> 
> 标签：python, performance, optimization, progress-bar, command-prompt

我编写了以下代码（在代码审查中进行了审查）以便在 python 2.7 中打印进度条（PS：我知道 Python 中有一个[进度条模块](https://pypi.python.org/pypi/progressbar/2.2)）

```
from __future__ import division
import sys

class Progress(object):
    def __init__(self, maxval):
        self._pct = 0
        self.maxval = maxval

    def update(self, value):
        pct = int((value / self.maxval) * 100.0)
        if self._pct != pct:
            self._pct = pct
            self.display()

    def start(self):
        self.update(0)

    def finish(self):
        self.update(self.maxval)

    def display(self):
        sys.stdout.write("|%-100s| %d%%" % ('#' *self._pct, self._pct) + '\n')
        sys.stdout.flush()

# test
import time

toolbar_width = 300
pbar = Progress(toolbar_width)
pbar.start()
for i in xrange(toolbar_width):
    time.sleep(0.1) # do real work here
    pbar.update(i)
pbar.finish() 
```

我希望在我的 IDE（例如：Pyscripet、PyCharm 等）和命令提示符中使用这个进度条。当我使用命令提示符运行时，我遇到以下两个问题，我无法理解如何解决。

![在此处输入图像描述](../Images/1042696dd5b755809e887558f8785cdd.png)

1.  首先，进度条打印出限制（我用了 100s）
2.  其次，进度条一个接一个地打印所有条。我希望只有一个在循环期间增加的栏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:58:39.303

**问题1：**

您的终端窗口宽度小于 100 个字符，这就是为什么您的进度条似乎打印超出限制，而它只是将输出包装为 80 个字符（这是 Windows 上的标准和控制台宽度）。

为避免包装，请尝试：

```
sys.stdout.write("|%-50s| %d%%" % ('#' *int(self._pct/2), self._pct) + '\n') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:03:24.593

**问题 2**：如果要在一行中显示递增的进度控制台栏，则必须重置光标位置，可以*通过*在`stdout`.

```
import sys, time

for x in range(10):
    sys.stdout.write((x+1) * '#')
    time.sleep(1)
    sys.stdout.write("\r") # !!! carriage return sign under Windows !!!

print("Fine") 
```

但我很遗憾地说：*大多数情况下这在 IDE 标准输出封装环境中不起作用*

Eclipse、PyCharm 等正在读取标准输出管道并将更改原始打印到控制台视图中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:06:03.993

**1.**可能是由于行长而换行，终端看起来窄于 100 个字符宽。如果您想假设 80 个字符（大多数控制台默认为），我认为您还有 7 个字符的其他内容，因此进度条使用 73 个字符的宽度。

```
 sys.stdout.write("|%-73s| %3d%%" % ('#' * int(self._pct*.73), self._pct) + '\n') 
```

**2.**要保持在同一行，请使用`sys.stdout.write`并且不要在末尾包含换行符。然后在`\r`每行的开头添加一个以返回开头。

```
 sys.stdout.write("\r|%-73s| %3d%%" % ('#' * int(self._pct*.73), self._pct)) 
```

您还可以使用`%3d%%`填充百分比，使其始终保持右对齐。

# linux - Perl oneliner 用特殊字符匹配许多不同值的路径中的确切单词

> ID：15477126
> 
> 赞同：0
> 
> 时间：2013-03-18T12:42:31.937
> 
> 标签：linux, perl, bash, ksh, ls

如何与**find /tmp -type l -exec ls -l**输出中的 $TARGET_NAME 值完全匹配？

```
 $ find /tmp -type l -exec ls -l 2>/dev/null {} +
 lrwxrwxrwx 1 root root  24 Mar 18 12:41 /tmp/test/link -> /usr/admin/Collect_tests
 lrwxrwxrwx 1 root root  43 Mar 18 12:41 /tmp/test/link1 -> /usr/admin/Collect_tests/Upload.CM@.www.com
 lrwxrwxrwx 1 root root  68 Mar 18 12:41 /tmp/test/link2 -> /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com
 lrwxrwxrwx 1 root root 100 Mar 18 12:42 /tmp/test/link3 -> /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com/List.files.emails.dummy*Printed
 lrwxrwxrwx 1 root root  92 Mar 18 12:42 /tmp/test/link4 -> /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com/List.files@emails.dummy 
```

值的例子

```
 TARGET_NAME=Upload.CM@.www.com
 TARGET_NAME=Upload_Shema@@@.DATA.com
 TARGET_NAME=List.files.emails.dummy*Printed 
```

**目标：**仅当 $TARGET_NAME 与最后一个字段中的单词完全匹配时才打印：“链接名称”和“PATH”（最后一个字段）。

示例（当我们想要精确匹配时 - 而**TARGET_NAME** =Upload_Shema@@@.DATA.com 然后）：

结果将显示如下

```
/tmp/test/link2 /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com
/tmp/test/link3 /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com/List.files.emails.dummy*Printed
/tmp/test/link4 /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com/List.files@emails.dummy 
```

有几个条件：

1）只需要匹配最后一个字段（来自`ls -l`输出）

例子

```
 /usr/admin/Collect_tests/Upload.CM@.www.com 
```

2) $TARGET_NAME 值应该匹配整个单词

完全匹配示例（同时**TARGET_NAME=Upload.C​​M@.www.com**）：

```
 /usr/admin/Collect_tests/Upload.CM@.www.com 
```

非完全匹配示例：

```
 /usr/admin/Collect_tests/Upload.CM@.www.c 
```

3) $TARGET_NAME 左侧必须存在反斜杠（“/”），$TARGET_NAME 右侧必须找到反斜杠或字符串结尾。

4) 需要将特殊字符转义为：“/”、“ **@** ”。“ ***** ”等

5) 代码将成为 ksh 脚本的一部分（并且可以由 Perl oneliner 或[AWK](http://en.wikipedia.org/wiki/AWK)或 ksh 等实现。）

**例子**

```
 find /tmp -type l -exec ls -l 2>/dev/null {} + | < Perl one liner .............. > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:08:46.017

鉴于以下链接

```
$ cd /tmp

$ ls -l link* | sed -e 's/^.*\(link\)/\1/'
link -> /usr/admin/Collect_tests
link1 -> /usr/admin/Collect_tests/Upload.CM@.www.com
link2 -> /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com
link3 -> /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com/List.files.emails.dummy*Printed
link4 -> /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com/List.files.emails.dummy
link5 -> /usr/admin/Collect_tests/Upload.CM@.www.com/ 
```

使用 File::Find 模块，如

```
$ TARGET_NAME='Upload_Shema@@@.DATA.com' perl -MFile::Find -le 'find sub {
   -l && defined($dst = readlink $_) &&
   index($dst, $ENV{TARGET_NAME}) >= 0 &&
   print "$File::Find::name $dst" }, @ARGV' /tmp
/tmp/link2 /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com
/tmp/link3 /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com/List.files.emails.dummy*Printed
/tmp/link4 /usr/admin/Collect_tests/Upload.CM@.www.com/Upload_Shema@@@.DATA.com/List.files.emails.dummy 
```

作为一个单线，这真的很笨拙。作为一个单独的命令，它变成

```
#! /usr/bin/env perl

use strict;
use warnings;

use File::Find;

die "Usage: $0 root-dir ..\n" unless @ARGV;
die "$0: TARGET_NAME is not defined\n" unless exists $ENV{TARGET_NAME};

sub print_matching_target_name {
  return unless -l && defined(my $dst = readlink $_);
  print "$File::Find::name $dst\n" if index($dst, $ENV{TARGET_NAME}) >= 0;
}

find \&print_matching_target_name, @ARGV; 
```

样本输出：

```
$查找目标
用法：查找目标根目录..

$ 查找目标 /tmp
查找目标：未定义 TARGET_NAME

$ TARGET_NAME=Upload.C​​M@.www.com ./find-target /tmp
/tmp/link2 /usr/admin/Collect_tests/Upload.C​​M@.www.com/Upload_Shema@@@.DATA.com
/tmp/link3 /usr/admin/Collect_tests/Upload.C​​M@.www.com/Upload_Shema@@@.DATA.com/List.files.emails.dummy*打印
/tmp/link4 /usr/admin/Collect_tests/Upload.C​​M@.www.com/Upload_Shema@@@.DATA.com/List.files.emails.dummy
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:30:42.650

尝试这样做：

```
#!/bin/bash

while IFS= read -r file; do
    printf "TARGET_NAME=%q\n" "$file"
done < <(find /tmp -type l -printf '%l\n') 
```

结果是反斜杠的，例如：

```
TARGET_NAME=/tmp/foo/List.files.emails.dummy\*Printed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:53:55.477

由于目标可能与要返回的部分相同也可能不同，因此进行两个单独的正则表达式调用似乎最容易（如果应该对其进行概括也可能会有所帮助）：

```
perl -ne 'print "$1" if (m#Upload.CM@.www.com# && m#([^/]+)\s*$#);' 
```

换句话说，找到目标短语然后获取 find 的最后一个组件（不包含“/”的组件）。当两个条件都满足时，打印括号中捕获的文本。

关于特殊字符：如果将“#”替换为更传统的“/”，你需要将我写成“/”的那个转义，否则，“@”应该不会给你带来麻烦。当然，如果它在您的系统上运行，只需使用“\”转义它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T22:01:13.817

正如在回答您的上一个问题（已删除）时提到的那样，解析`ls`输出非常不理想。`readlink`可以代替使用。

```
find /tmp -type l -exec \
   perl -e'
      my $TARGET_NAME = shift;
      for (@ARGV) {
         my $p = readlink($_);
         $p =~ m{(?:^|/)\Q$TARGET_NAME\E(?:/|\z)}
            or next;
         print("$_\t$p\n");
      }
   ' "$TARGET_NAME" {} \; 
```

或者更高效，

```
perl -MFile::Find::Rule -e'
   my ($TARGET_NAME, $BASE) = @ARGV;
   for (File::Find::Rule->symlink->in($BASE)) {
      my $p = readlink($_);
      $p =~ m{(?:^|/)\Q$TARGET_NAME\E(?:/|\z)}
         or next;
      print("$_\t$p\n");
   }
' "$TARGET_NAME" /tmp 
```

根据要求，这将匹配

```
TARGET_NAME
TARGET_NAME/
TARGET_NAME/x
.../TARGET_NAME
.../TARGET_NAME/
.../TARGET_NAME/x 
```

但不是

```
TARGET_NAMEx/...
.../TARGET_NAMEx
.../TARGET_NAMEx/...
xTARGET_NAME/...
.../xTARGET_NAME
.../xTARGET_NAME/... 
```

* * *

注意：如果您支持，请更改`find ... -exec ... \;`为。`find ... -exec ... +``find`

# ios - 如果我调出 UIActionSheet，如何使其中一个选项转到新视图？

> ID：15477131
> 
> 赞同：0
> 
> 时间：2013-03-18T12:42:53.647
> 
> 标签：ios, objective-c, ios6, segue, uiactionsheet

我真的不知道该怎么做。我创建了`UIActionSheet`，当我点击一个按钮时它会出现，但我希望在为应用程序选择某个选项时选择一个新的视图控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:48:52.310

您调用 UIActionSheetDelegate 方法（当用户点击按钮时）`[self performSegueWithIdentifyer:@"segue_id"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:48:06.147

( [-actionSheet:clickedButtonAtIndex:)](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIModalViewDelegate_Protocol/UIActionSheetDelegate/UIActionSheetDelegate.html)的使用`Delegate`方法`UIActionSheet`

```
#pragma mark - UIActionSheet Delegate Methods

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if(buttonIndex == 0)
    {
        // code for Button 1 
    }
    if(buttonIndex == 1)
    {
       // code for Button 2
    }
} 
```

# xhtml - XForms 数据模型不能保存在 XML 文件中

> ID：15477137
> 
> 赞同：1
> 
> 时间：2013-03-18T12:43:05.087
> 
> 标签：xhtml, xforms, xsltforms

我有以下 XForms 代码：

```
<?xml-stylesheet href="./xsltforms.xsl" type="text/xsl"?>
<?xsltforms-options debug="yes"?>
<html
   xmlns="http://www.w3.org/1999/xhtml"
   xmlns:xf="http://www.w3.org/2002/xforms"
   xmlns:ev="http://www.w3.org/2001/xml-events">
   <head>
      <title>XForms Submit Example</title>
      <xf:model id="MyModel">
                <xf:instance src="./Model.xml"/>
                <xf:bind id="FirstName" nodeset="/MyData/FirstName"/>
                <xf:submission id="save" method="put" action="./myData.xml" replace="none" />
                <xf:submission id="loadDoc" action="./myData.xml" replace="instance" method="get" />
      </xf:model>
   </head>
   <body>
                <xf:input ref="FirstName" incremental="true">
            <xf:label>Please enter your first name: </xf:label>
         </xf:input>
                <br/>
                <br/>

                Output First Name: <xf:output ref="FirstName" />

                <br/>
                <br/>

                <xf:submit submission="save">
         <xf:label>Save</xf:label>
                </xf:submit>

                <br/>
                <br/>

                <xf:submit submission="loadDoc">
         <xf:label>Load</xf:label>
                </xf:submit>

   </body>
</html> 
```

此表单包含一个文本框字段和两个按钮`save`和`load`，以及对文件的 1 个依赖项，`Model.xml`即：

```
<?xml version="1.0" encoding="UTF-8"?>
<MyData>
                <FirstName>John</FirstName>
                <Data2>Two</Data2>
                <Data3>Three</Data3>
</MyData> 
```

问题是：当我在文本框中输入一些数据时，按保存按钮，模型应该保存到`myData.xml`. 此文件存在于磁盘上且不是只读的

实际上什么也没发生，文件的数据也不会更新（顺便说一下加载按钮工作正常）。

这种行为的原因是什么以及如何解决这个问题并将输入的数据保存到外部文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:01:07.430

您是否已经尝试在操作属性中添加“file://”？

-阿兰

# javascript - 计算图像地图上多边形区域的宽度和高度

> ID：15477138
> 
> 赞同：3
> 
> 时间：2013-03-18T12:43:08.350
> 
> 标签：javascript, image, imagemap

是否可以使用坐标计算图像地图上每个多边形区域的宽度和高度？

我有一个图像并使用具有多个不同大小多边形的图像映射。我需要找到每个中心点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T15:59:49.493

要找到中心点，需要找到多边形的最小和最大 X 和 Y 坐标，然后取每个的中点，得到平均中心点。这是一个函数，它将为一组图像映射区域执行此操作。该函数接受一个数组而不是一个区域，以防您需要来自多个区域的中心点，这在地理图像地图中很常见。

这里的工作示例将在所选美国州的中心点上画一个圆圈：http: [//jsfiddle.net/jamietre/6ABfa/](http://jsfiddle.net/jamietre/6ABfa/)

```
/* Calculate the centermost point of an array of areas 
   @param {element[]}   areas     an array of area elements
   @returns {object}              {x,y} coords of the center point
 */

function calculateCenterPoint(areas) {
    var maxX = 0,
        minX = Infinity,
        maxY = 0,
        minY = Infinity;

   // note: using Array.prototype.forEach instead of calling forEach directly 
   // on "areas" so it will work with array-like objects, e.g. jQuery

    Array.prototype.forEach.call(areas, function (e) {
        var i = 0,
            coords = e.getAttribute('coords').split(',');

        while (i < coords.length) {
            var x = parseInt(coords[i++],10),
                y = parseInt(coords[i++],10);

            if (x < minX) minX = x;
            else if (x > maxX) maxX = x;

            if (y < minY) minY = y;
            else if (y > maxY) maxY = y;
        }
    });

    return {
        x: minX + (maxX - minX) / 2,
        y: minY + (maxY - minY) / 2
    };
} 
```

# visual-studio-2012 - 包更新仅显示在包管理器中

> ID：15477141
> 
> 赞同：0
> 
> 时间：2013-03-18T12:43:17.253
> 
> 标签：visual-studio-2012, nuget, nuget-package

在“NuGet 包管理器”中显示可用的更新包。

在命令行上`Get-Package -Updates`，什么都不显示：

![在此处输入图像描述](../Images/2c500bf7e0483da381457a00bddae4cc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:21:37.733

在对话框中，您配置了 3 个包源，我想这些更新来自其他两个包源，而不是官方的 NuGet 包源。

另一方面，在控制台中，您仅选择官方 NuGet 包源（在组合框中）。这就是为什么它不显示更新。

# c# - ObjectDataSource/Grid - 动态列

> ID：15477145
> 
> 赞同：0
> 
> 时间：2013-03-18T12:43:23.443
> 
> 标签：c#, telerik, radgrid, objectdatasource

我需要一个显示产品列表的 ASP.NET 屏幕，右侧是系统中每个“批发商”的列，每个项目的价格作为每列中的项目。

我将在此使用 Telerik RadGrid，并且用户必须能够过滤/分页 - 所以我假设我需要使用显式数据源。我已经开始创建一个 ObjectDataSource，其结构如下：

```
 public string ProductRange { get; set; }
    public long ProductID { get; set; }
    public string Product { get; set; }
    public decimal TradePrice { get; set; }
    public Dictionary<Wholesaler, decimal?> WholesalerPrices; 
```

我正在动态创建我的列，如下所示：

```
 WDBDataContext dc = new WDBDataContext();
        List<Wholesaler> wholesalerList = dc.Wholesalers.OrderBy(a => a.Name).ToList();
        gvProductRange.Columns.Add(new GridBoundColumn() { UniqueName = "ProductRange", HeaderText = "Product Range", DataField = "ProductRange" });
        gvProductRange.Columns.Add(new GridBoundColumn() { UniqueName = "Product", HeaderText = "Product", DataField = "Product" });
        gvProductRange.Columns.Add(new GridBoundColumn() { UniqueName = "TradePrice", HeaderText = "Trade Price", DataField = "TradePrice", DataFormatString = "{0:c}" });
        foreach (Wholesaler wholesaler in wholesalerList)
        {
            gvProductRange.Columns.Add(new GridBoundColumn() { UniqueName = wholesaler.ID.ToString(), HeaderText = wholesaler.Name, DataField = wholesaler.ID.ToString(), DataFormatString = "{0:c}" });
        } 
```

但是，我如何能够在运行时转换从 objectdatasource 返回的数据以绑定到这些正确的列 - 如果这甚至可能的话？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:53:07.153

是“gvProductRange”网格视图吗？为什么不直接分配 gvProductRange.DataSource = 批发商列表？

# java - 每个线程循环多次重复一个方法

> ID：15477146
> 
> 赞同：2
> 
> 时间：2013-03-18T12:43:33.467
> 
> 标签：java, swing, timer

为了提供一些背景信息，我目前正在开发一个 Java 编码的弹球游戏。我将它保存在 MVC 设计模型中。它有一个相当逼真的物理系统，可以处理碰撞、重力、摩擦等。该系统现在运行在 20 FPS 系统上。

我遇到的问题是检查系统中碰撞的物理循环通过运行一种方法来工作，该方法使用球的当前速度计算直到下一次碰撞的时间。最有效的方法显然是继续运行检查以考虑球在检查之间的运动以使其尽可能准确，并且如果直到碰撞的时间小于直到下一次检查的时间，然后进行碰撞。

然而，目前我正在使用的系统每秒只能运行 20 次循环，这并不能提供我想要的准确结果，尤其是在高加速度时，例如在球发射时。

我使用的计时器循环位于 MVC 的控制器部分，并调用位于模型内的物理部分。我可以传递在控制器中调用方法时剩余的时间，物理系统可以使用它，但是我不知道如何多次运行循环，同时仍然跟踪下一次屏幕刷新之前的剩余时间？

理想情况下，我希望每次屏幕刷新至少运行 10 次。如果有人需要更多信息，请询问。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:42:27.303

所以实际的问题是你不知道什么时候会发生碰撞以及下一帧更新是什么时候？

这些不应该是单独的运行任务吗？一个管理碰撞检测的线程和一个进行更新的线程？每个线程都可以按自己的间隔运行（Timer.addTask(...)），并且它们应该被同步，因此在执行渲染线程时不会执行碰撞/位置更新。

希望这能回答你的问题。

问候，罗布。

# symfony - 编写此 Symfony2 URL 重定向的更好方法

> ID：15477147
> 
> 赞同：0
> 
> 时间：2013-03-18T12:43:34.043
> 
> 标签：symfony

这有效，但它很混乱。我一直在搞乱参数包，但没有什么能像我拥有的​​代码那样好用。

我只想重定向到同一页面并删除一个查询字符串，但要编码得比这更好：

```
$r = $this->request;

$url = $r->getUri();

$replace = "abc=" . $r->query->get( 'abc' );
$url = str_replace("?".$replace, "?", $url);
$url = str_replace("&".$replace, "", $url);

$response = new RedirectResponse($url);
$this->event->setResponse($response); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T12:57:46.097

要删除整个查询字符串：

```
$response = new RedirectResponse($request->getPathInfo()); 
```

要从查询字符串中删除一个参数：

```
$route  = $request->get('_route');
$params = array_merge(
    $request->get('_route_params'), 
    $request->query->all()
);

unset($params['param_to_remove']);
// or $params['param_to_remove'] = null;

$response = new RedirectResponse($this->router->generate($route, $params); 
```

# android - 如何在 Android Honeycomb 上使用 KSoap？

> ID：15477149
> 
> 赞同：0
> 
> 时间：2013-03-18T12:43:36.417
> 
> 标签：android, performance, soap, android-asynctask, ksoap2

我做了关于 Android 中 kSoap的[教程！](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)

我的代码适用于 Android 2.2，但不适用于 Android 4.0.3！我听说我必须将代码切换到`AsyncTask`...。现在我不知道该怎么做！有谁能够帮我？

这是我的代码！

```
package com.webservice;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class FirstScreen extends Activity {

    /** Called when the activity is first created. */
    private static String SOAP_ACTION1 = "http://tempuri.org/FahrenheitToCelsius";
    private static String SOAP_ACTION2 = "http://tempuri.org/CelsiusToFahrenheit";
    private static String NAMESPACE = "http://tempuri.org/";
    private static String METHOD_NAME1 = "FahrenheitToCelsius";
    private static String METHOD_NAME2 = "CelsiusToFahrenheit";
    private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";

    Button btnFar, btnCel, btnClear;

    EditText txtFar, txtCel;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_first_screen);
        btnFar = (Button) findViewById(R.id.btnFar);
        btnCel = (Button) findViewById(R.id.btnCel);
        btnClear = (Button) findViewById(R.id.btnClear);

        txtFar = (EditText) findViewById(R.id.txtFar);

        txtCel = (EditText) findViewById(R.id.txtCel);
        btnFar.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // Initialize soap request + add parameters
                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);
                // Use this to add parameters
                request.addProperty("Fahrenheit", txtFar.getText().toString());
                // Declare the version of the SOAP request
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);

                envelope.setOutputSoapObject(request);
                envelope.dotNet = true;
                try {
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(
                            URL);
                    // this is the actual part that will call the webservice
                    androidHttpTransport.call(SOAP_ACTION1, envelope);
                    // Get the SoapResult from the envelope body.
                    SoapObject result = (SoapObject) envelope.bodyIn;
                    if (result != null){
                        // Get the first property and change the label text
                        txtCel.setText(result.getProperty(0).toString());
                    }else{
                        Toast.makeText(getApplicationContext(), "No Response",
                                Toast.LENGTH_LONG).show();
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
        btnCel.setOnClickListener(new View.OnClickListener(){

            @Override
            public void onClick(View v){
                // Initialize soap request + add parameters
                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME2);
                // Use this to add parameters
                request.addProperty("Celsius", txtCel.getText().toString());
                // Declare the version of the SOAP request
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                        SoapEnvelope.VER11);
                envelope.setOutputSoapObject(request);
                envelope.dotNet = true;
                try {
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(
                            URL);
                    // this is the actual part that will call the webservice
                    androidHttpTransport.call(SOAP_ACTION2, envelope);
                    // Get the SoapResult from the envelope body.
                    SoapObject result = (SoapObject) envelope.bodyIn;
                    if (result != null){
                        // Get the first property and change the label text
                        txtFar.setText(result.getProperty(0).toString());
                    }else{
                        Toast.makeText(getApplicationContext(), "No Response",
                                Toast.LENGTH_LONG).show();
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });

        btnClear.setOnClickListener(new View.OnClickListener(){
            @Override
            public void onClick(View v){
                txtCel.setText("");
                txtFar.setText("");
            }
        });
    }
} 
```

现在我用 AsyncTask 试过了，但我还是不行！有什么帮助吗？

```
package com.webservice;

import org.ksoap2.SoapEnvelope;

import org.ksoap2.serialization.SoapObject;

import org.ksoap2.serialization.SoapSerializationEnvelope;

import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;

import android.os.AsyncTask;
import android.os.Bundle;

import android.view.View;

import android.widget.Button;

import android.widget.EditText;

import android.widget.Toast;

public class FirstScreen extends Activity

{
/** Called when the activity is first created. */

private static String SOAP_ACTION1 = "http://tempuri.org/FahrenheitToCelsius";

private static String SOAP_ACTION2 = "http://tempuri.org/CelsiusToFahrenheit";

private static String NAMESPACE = "http://tempuri.org/";

private static String METHOD_NAME1 = "FahrenheitToCelsius";

private static String METHOD_NAME2 = "CelsiusToFahrenheit";

private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";

Button btnFar,btnCel,btnClear;

EditText txtFar,txtCel;

@Override

public void onCreate(Bundle savedInstanceState)

{
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_first_screen); 
        btnFar = (Button)findViewById(R.id.btnFar);

        btnCel = (Button)findViewById(R.id.btnCel);

        btnClear = (Button)findViewById(R.id.btnClear);

        txtFar = (EditText)findViewById(R.id.txtFar);

        txtCel = (EditText)findViewById(R.id.txtCel);

        btnFar.setOnClickListener(new View.OnClickListener()
        {
                 @Override
                  public void onClick(View v)
                  {
                      new one1().execute();
                  }
            });

        btnCel.setOnClickListener(new View.OnClickListener()
        {
                  @Override
                  public void onClick(View v)
                  {
                      new one2().execute();
                  }
            });

        btnClear.setOnClickListener(new View.OnClickListener()
        {
                  @Override
                  public void onClick(View v)
                  {
                        txtCel.setText("");
                        txtFar.setText("");
                  }
            });     
 }

private class one1 extends AsyncTask<String, Integer, String> {

    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub
           //Initialize soap request + add parameters

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);       

        //Use this to add parameters

        request.addProperty("Fahrenheit",txtFar.getText().toString());

        //Declare the version of the SOAP request

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

        envelope.setOutputSoapObject(request);

        envelope.dotNet = true;

        try {

              HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

              //this is the actual part that will call the webservice

              androidHttpTransport.call(SOAP_ACTION1, envelope);

              // Get the SoapResult from the envelope body.

              SoapObject result = (SoapObject)envelope.bodyIn;

              if(result != null)

              {

                    //Get the first property and change the label text

                    txtCel.setText(result.getProperty(0).toString());

              }

              else

              {

                    Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();

              }

        } catch (Exception e) {

              e.printStackTrace();

        }

        return null;
    }

}

private class one2 extends AsyncTask<String, Integer, String> {

    @Override
    protected String doInBackground(String... params) {
        // TODO Auto-generated method stub
        //Initialize soap request + add parameters

  SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME2);       

  //Use this to add parameters

  request.addProperty("Celsius",txtCel.getText().toString());

  //Declare the version of the SOAP request

  SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

  envelope.setOutputSoapObject(request);

  envelope.dotNet = true;

  try {

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

        //this is the actual part that will call the webservice

        androidHttpTransport.call(SOAP_ACTION2, envelope);

        // Get the SoapResult from the envelope body.

        SoapObject result = (SoapObject)envelope.bodyIn;

        if(result != null)

        {

              //Get the first property and change the label text

              txtFar.setText(result.getProperty(0).toString());

        }

        else

        {

              Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();

        }

  } catch (Exception e) {

        e.printStackTrace();

  }
        return null;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:52:24.773

您所要做的就是创建一个类

```
private class TaskAsync extends AsyncTask<String, Void, String> {

      @Override
      protected String doInBackground(String... params) {

            // Do all your connection stuff here

            return "Executed";
      }      

      @Override
      protected void onPostExecute(String result) {
           // here you fetch the data into the UI widgets
      }

      @Override
      protected void onPreExecute() {
      }

      @Override
      protected void onProgressUpdate(Void... values) {
      }
} 
```

然后打电话

```
new TaskAsynk().execute; 
```

希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:54:20.377

在异步类的 doInBackground 方法中编写代码

```
 private class async extends AsyncTask<String, Void, String> {

      @Override
      protected String doInBackground(String... params) {

            }

            return "Executed";
      }      

      @Override
      protected void onPostExecute(String result) {

      }

      @Override
      protected void onPreExecute() {
      }

      @Override
      protected void onProgressUpdate(Void... values) {
      }
} 
```

并单击按钮调用

```
 new async().execute(); 
```

# jsp - 在 JSP 中迭代数据库结果

> ID：15477151
> 
> 赞同：2
> 
> 时间：2013-03-18T12:43:39.307
> 
> 标签：jsp, jstl

**设想：**

我在类*DatabaseDAO中有一个方法**gerRow()* ，它获取一些表行并将它们添加到类*Row*的对象中。

 **每个*Row*对象都被添加到一个**ArrayList**中。*getRow()*方法返回该ArrayList。

**问题：**

我的问题是**如何**在 JSP 中迭代文本结果？我打算使用 JSTL 标签`<c:out>`和`<c:ForEach>`. 我认为这是唯一的选择。我该怎么做？

**产生的困难：**

我调用的方法返回一个 ArrayList。ArraList 具有行对象。然后，我必须将该行中的每一列分开才能打印出来。

Row 对象属于 Row 类，有 Row.getColum1、Row.getColum2、Row.getColum3 等。

**样本：**

```
<jsp:useBean id="xxxxxxxxxxxx" class="xxxxxxxxxxxx" scope="request" />
<c:forEach var="xxxxxxxxxxxx" items="${xxxxxxxxxxxx}">
    <c:out value="${xxxxxxxxxxxx.xxxxxxxxxxxx}" />
    <c:out value="${xxxxxxxxxxxx.xxxxxxxxxxxx}" />
</c:forEach> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:17:15.940

我猜你不知道是什么`x`。这称为[表达语言](https://stackoverflow.com/tags/el/info)。

你不需要这个`<jsp:useBean id="xxxxxxxxxxxx" class="xxxxxxxxxxxx" scope="request" />`

表达式语言通常翻译成get方法，但是你不需要放“get”这个词。像这样`myObj.getId();`写的东西：`#{myObj.id}`. 就是这样，如果你想在 html 表上写这个，就这样做（我假设是 html 表，因为你说“我必须将该行中的每个列分开才能打印出来”）。

```
<table>
    <c:forEach var="rowObj" items="${myClass.myArrayList}">
        <tr>
            <td>${rowObj.column1}</td>
            <td>${rowObj.column2}</td>
            <td>${rowObj.column3}</td>
        </tr>
    </c:forEach>
</table> 
```

请注意，答案中最重要的部分是我提供的链接，您应该了解所有这些。您是否已经将数组列表放入请求中？在这里很难说哪个是真正的问题。

**另请参阅：** [如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)**

# java - 如何将图像作为字符串转换为 PNG 文件

> ID：15477152
> 
> 赞同：5
> 
> 时间：2013-03-18T12:43:44.840
> 
> 标签：java, struts2

我正在使用一个名为[wPaint](https://github.com/websanova/wPaint)的 jQuery 插件来允许用户绘制自己的图像。我将生成的图像作为字符串发送到服务器作为开头的字符串

> 数据：图像/png；base64，

我尝试了以下两种方法，但这两种方法我都无法存储图像。

方法一

```
String imageData = parameterParser.getStringParameter("image", ""); 
byte[] imgByteArray = Base64.decodeBase64(imageData.getBytes());
FileOutputStream fileOutputStream = new FileOutputStream("/home/arvind/Desktop/test.png");
fileOutputStream.write(imgByteArray);
fileOutputStream.close(); 
```

在这种情况下，文件被写入但不显示图像。但是，当我删除文件扩展名时，我得到了发送到服务器的字符串（即 imageData 中的任何内容）。

方法二

```
String imageData = parameterParser.getStringParameter("image", ""); 
byte[] imgByteArray = Base64.decodeBase64(imageData.getBytes());
InputStream in = new ByteArrayInputStream(imgByteArray);
BufferedImage bImageFromConvert = ImageIO.read(in);
ImageIO.write(bImageFromConvert, "png", new File("/home/arvind/Desktop/test.png")); 
```

BufferedImage bImageFromConvert 为空，因此在创建文件时出现异常 (IllegalArgumentException)。

Base64 类来自 apache commons 编解码器库，版本为 1.2。

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T08:34:35.870

最初，我使用以下代码将数据发送到服务器。

```
 $.ajax({
        url : '/campaign/holiImageUpload.action',
        type : 'POST',
        data : "image=" + $("#wPaint2").wPaint("image")
        success :function(data){
        }
    }); 
```

现在我使用以下代码将数据发送到服务器

```
var imgData = $("#wPaint2").wPaint("image");
    $.ajax({
        url : '/campaign/holiImageUpload.action',
        type : 'POST',
        data : {image : imgData},
        success :function(data){
        }
    }); 
```

在服务器端，这是最终代码：

```
String imageData = parameterParser.getStringParameter("image", "");

    try {
        imageData = imageData.substring(22);
        byte[] imgByteArray = Base64.decodeBase64(imageData.getBytes());
        InputStream in = new ByteArrayInputStream(imgByteArray);
        BufferedImage bufferedImage = ImageIO.read(in);
        ImageIO.write(bufferedImage, "png", new File("/home/arvind/Desktop/test.png"));
    catch(Exception ex){
        ex.printStrackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:59:15.703

您似乎正在尝试`data:image/png'base64`与 Base64 编码数据一起解码？在将 Base64 数据解码为图像字节之前，您需要从输入字符串中删除它。

此外，您不想将字符串解码为字节......就像字符串一样。

# java - Java - 我如何对二维数组进行排序？

> ID：15477155
> 
> 赞同：0
> 
> 时间：2013-03-18T12:43:56.970
> 
> 标签：java, arrays, sorting, double

我有一个关于排序数组的问题。

我有一个这样的数组：

```
long[][] allDate = new long[lenght][2]; 
```

并且值是： `allDate[][0]`以毫秒为单位表示日期，并`allDate[][1]`在这种情况下表示值，例如它之前的日期价格

```
allDate[0][0] = 142142141
allDate[0][1] = 90 
```

`allDate[][0]`从现在开始，日期的值总是在未来，我想做的是按时间顺序对这些日期进行排序。但问题是我想保持他们的价格，所以我可以将它添加到我的 Jfreechart 折线图中。

在这个循环中

```
 for (int i = 0; i < a7; i++) {
        int day = (int) (new Date().getTime() + allDate[i][0] / (1000 * 60 * 60 * 24));
        int month = (int) (new Date().getTime() + allDate[i][0] / (1000 * 60 * 60));
        int year = (int) (new Date().getTime() + allDate[i][0] / (1000 * 60));
        s1.add(new Day(day, month, year), (eWallet + allDate[i][1]));
    } 
```

任何想法如何排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:46:27.223

> 并且值是： allDate[][0] 以毫秒为单位表示日期， allDate[][1] 表示在这种情况下的值，它是从之前的日期价格

所以我要做的*第一件事就是避免将它们存储为二维数组。*相反，存储一对值的一维集合（无论是数组还是列表）：

```
PriceSnapshot[] prices = ...; 
```

Where`PriceSnapshot`将由时间戳（无论是 a `long`、 a `Date`、 Joda Time`Instant`等还是其他）和价格组成。

那时，您可以轻松编写 a`Comparer<PriceSnapshot>`按时间进行比较，并使用它进行排序。当然你可以写 a`Comparer<long[]>`代替，但这不会那么好。

（另请注意，在当前循环中，您将使用“当前时间”3 次，这意味着您最终可能会得到不同的日期。坏主意。拍摄“现在”的*单个*快照，然后重复使用它。）

# .net - 我想在 FlowDocument 中使用 rgb 设置文本“前景”

> ID：15477158
> 
> 赞同：0
> 
> 时间：2013-03-18T12:44:06.570
> 
> 标签：.net, xaml, flowdocument

我想在 FlowDocument 中使用 rgb 设置文本“前景”。

我怎样才能做到这一点？

```
String ^text = "<FlowDocument \
xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\" \
xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\" \
<Paragraph> \
<Span FontSize=\"18\" Foreground=\"Red\">Some text in the paragraph.</Span> \
Some text that is not bold. \
</Paragraph> \
</FlowDocument> "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:32:13.970

您需要以十六进制格式表示**argb**，其中 a = ff, r = 01, g = 02, b =03

```
Foreground=\"ff010203\" 
```

# ruby-on-rails - 如何在 form_tag 中使用 country_selection 实现国家选择

> ID：15477162
> 
> 赞同：0
> 
> 时间：2013-03-18T12:44:16.467
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在搜索表单中使用国家/地区选择，并且想知道 contry_select_tag 不适用于 form_tag

我试过以下

```
<%= form_tag new_search_path  :html => {:multipart => true} do %>
   <%= text_field_tag :search_val%>
   <%= country_select_tag :country,[],["Germany", "France", "Austria", "Switzerland", "Netherlands", "Spain", "USA", "Russia"]%>

   <%= submit_tag "Search" %>
<%end%> 
```

并收到以下错误消息

```
undefined method `country_select_tag' for #<#<Class:0xb6640828>:0xb5d06d5c> 
```

更改`country_select_tag`为`country_select`我没有错误，但`:country`参数`params`保持为空

```
!ruby/hash:ActiveSupport::HashWithIndifferentAccess
utf8: ✓
authenticity_token: GbmhaZAuSA3s88pTz+ZQJ6mxqZ1nrTpgSlSf40vttUY=
search_val: Test
country: 
commit: Search
html: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  multipart: 'true'
controller: searches
action: results 
```

我需要使用法线`select_tag`并用模型中的国家/地区填充它还是有其他解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:48:17.440

尝试删除国家部分

```
 <%= form_tag new_search_path  :html => {:multipart => true} do %>
       <%= text_field_tag :search_val%>
       <%= select_tag :country,[],["Germany", "France", "Austria", "Switzerland", "Netherlands", "Spain", "USA", "Russia"]%>

       <%= submit_tag "Search" %>
    <%end%> 
```

更多信息在这里[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html)

# java - 带有数组的 Java 泛型类型

> ID：15477163
> 
> 赞同：0
> 
> 时间：2013-03-18T12:44:19.837
> 
> 标签：java, android, generics

我无法为此正确编写通用方法：

```
private int [] loadIntArray(String key, int [] defaultArray) {
    int [] array = new int [4];
    for( int index=0; index<4 ; index++) {
        array[index] = sp.getInt(key + index, defaultArray[index]);
    }
    return array;
} 
```

我写了这个：

```
private <T[]> loadArray(String key, <T[]> defaultArray) {
    <T[]> array = new <T[LEVELS]>;
    for( int index=0; index<4 ; index++) {
        array[index] = sp.getInt(key + index, defaultArray[index]);
    }
    return array;
} 
```

但它不编译。
我收到几个错误，“缺少方法的返回类型”，“私有令牌后预期的类型”。

写它的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:01:12.883

为了实现这一点，您必须在`class parameter`您的方法中添加一个

```
Class<T> type 
```

你的方法现在看起来如下

```
 private <T> T[] loadArray(Class<T> type, String key, T[] defaultArray) {
      T[] array = (T[]) Array.newInstance(type, defaultArray.length);
      for (int index = 0; index < array.length; index++) {
         array[index] = sp.getInt(key + index, defaultArray[index]);
      }
      return array;
   } 
```

问题后更新：
**对该方法的调用如何？（例如类型“int”）？**

创建 Pair 对象时，不能用原始类型替换类型参数 K 或 V：

`Pair<int, char> p = new Pair<>(8, 'a');` // 编译时错误 您只能用非原始类型替换类型参数 K 和 V：

```
Pair<Integer, Character> p = new Pair<>(8, 'a'); 
```

**一种可能的解决方法**
（以通用方式传递它并将其保留为原始数组的唯一方法是作为对象。）

```
Object a[]= {1,2,3};
loadArray(Object.class, "test", a); 
```

或者您可以使用非原始类型（整数）

```
Integer a[]= {1,2,3};
loadArray(Integer.class, "test", a); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:50:21.247

您将返回一个 type 数组`T`，而不是某个 type `T[]`。

这将更朝着您想要的方向发展。

```
private <T> T[] loadIntArray(String key, T[] defaultArray) {
    T[] array = new T[4]; // Need more info to correct this
    for (int index = 0; index < 4; index++) {
        array[index] = sp.getInt(key + index, defaultArray[index]);
    }
    return array;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T05:40:49.997

假设`defaultArray`将永远是`nil`并且永远是组件类型的数组`T`，您可以使用它的类型来构造新数组：

```
import java.lang.reflect.Array;

private <T> T[] loadIntArray(String key, T[] defaultArray) {
    T[] array = (T[])Array.newInstance(defaultArray.getClass().getComponentType(), 4);
    for (int index = 0; index < 4; index++) {
        array[index] = sp.getInt(key + index, defaultArray[index]);
    }
    return array;
} 
```

但是请注意，如果`defaultArray`的运行时类型是某个子类型的数组`T`，这将不起作用。它会导致一个`ArrayStoreException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T12:52:40.347

首先，方法签名应如下所示：

```
private <T> T[] loadArray(String key, T[] defaultArray) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T16:48:41.813

这是OP。
虽然这不是标记的答案，但我想发布最终编译的代码，以便那些想要看到它的人。

*其他答案中没有提到的一件重要的事情是 Java 泛型不支持只支持原始类型（int、float、...）的对象。所以我不得不将我的数组改为 Integer 和 Float。*

```
private <T> void loadArray(final T[] array, final String key, final T[] defaultArray) {
    int count = array.length;
    for( int index = 0; index < count; index++ ) {
        //if( array[index] instanceof PointF ) {
        if( array instanceof PointF[] ) {
            PointF element = new PointF();
            element.x = sp.getFloat(key + index, (Float) defaultArray[index]);
            element.y = sp.getFloat(key + index, (Float) defaultArray[index]);
            array[index] = (T) element;
        //} else if( array[index] instanceof Float ) {
        } else if( array instanceof Float[] ) {
            Float element = sp.getFloat(key + index, (Float) defaultArray[index]);
            array[index] = (T) element;
        //} else if( array[index] instanceof Integer ) {
        } else if( array instanceof Integer[] ) {
            Integer element = sp.getInt(key + index, (Integer) defaultArray[index]);
            array[index] = (T) element;
        }
    }
} 
```

**编辑**
事实证明，如果数组是有尺寸的，但没有初始化，

```
array[index] instanceof Integer 
```

返回`false`，所以我将测试更改为

```
arrray instanceof Integer[] 
```

`true`即使数组元素是，它也会返回`null`。

# codeigniter - URI 路由 Codeigniter

> ID：15477168
> 
> 赞同：0
> 
> 时间：2013-03-18T12:44:33.143
> 
> 标签：codeigniter, url-rewriting

在 CodeIgniter 中遇到路由问题。

这是我的 routes.php

```
$route['default_controller'] = "site/site/index/$1";
$route['404_override'] = '';
$route['admin'] = 'admin/index'; 
```

我正在使用模块化系统，我的文件夹格式是：

![文件夹](../Images/4d17c3cb589efddafa67949a591c1567.png)

在模块>站点>控制器>site.php中，我有以下内容可以获取输入到cms中的每个路径，但问题是当我导航到localhost/my_site/时，它会显示页面但有错误，所以如果我将以下路线放入： $route['site/(:any)'] = 'site/site/index/$1'; 然后它可以工作并显示所有页面，但显然我不想要这个，我希望它知道主页已设置。或者这可以通过**htaccess DirectoryIndex**来完成吗？

如果这没有意义，或者您无法理解我的意思，请大声告诉我，我会尝试解释更多细节，但这就是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:25:52.423

我认为这是因为您的默认控制器需要一个参数，但您没有传递它

```
$route['default_controller'] = "site/site/index/$1"; 
```

我认为应该是

```
$route['default_controller'] = "site/site/index"; 
```

# java - Java：可序列化的内部和匿名类是否应该具有 SerialVersionUID？

> ID：15477169
> 
> 赞同：4
> 
> 时间：2013-03-18T12:44:41.443
> 
> 标签：java, serialization, inner-classes, anonymous-class, serialversionuid

虽然我目前不打算序列化任何东西，但我给所有可序列化的外部类以及静态嵌套类 a `SerialVersionUID`，因为这是正确的方法。

但是，我在[这里](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/serial-arch.html)读到

> 出于几个原因，强烈建议不要对内部类（即不是静态成员类的嵌套类）（包括本地和匿名类）进行序列化。...

所以我的问题是：

我应该给内部类和匿名类一个`SerialVersionUID`，还是应该添加一个`@SuppressWarnings("serial")`？

一种方法比另一种更合适吗？

在任何情况下，我都会对这些类进行临时引用，因为我不希望它们被序列化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:02:54.123

给他们一个 serialVersionUID，因为：

*   这是一个很好的一般做法，指定它当然没有什么坏处。
*   警告应该被解决，而不是被压制。
*   有时，当内部类变得足够大时，它们会被更改为顶级类。

很好（出于您链接到的文档中所述的所有原因）您不会序列化这些内部类的实例。`writeObject`我想，如果您偏执或担心其他开发人员可能无法做出同样的判断，您可以通过在每个内部类中设置一个无条件抛出异常的方法来强制执行该选择。

# python - 这是什么类型的 URL 编码？

> ID：15477171
> 
> 赞同：0
> 
> 时间：2013-03-18T12:44:48.103
> 
> 标签：python

我有编码的 URL

```
http://blahblah.com/s%E2%80%8Btart/DEE-G%E2%80%8B6F-W4A-2N1%E2%80%8B5 
```

为了

```
http://blahblah.com/start/DEE-G6F-W4A-2N15 
```

这是哪种编码以及如何在 Python 中进行转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:48:51.657

编辑：（由于与@interjay 的对话）：

`%E2%80%8B`代表一个`ZERO WIDTH SPACE`。那些可能不应该在那里。您可以使用以下命令删除它们`str.replace`：

```
In [135]: 'http://blahblah.com/s%E2%80%8Btart/DEE-G%E2%80%8B6F-W4A-2N1%E2%80%8B5'.replace('%E2%80%8B', '')
Out[135]: 'http://blahblah.com/start/DEE-G6F-W4A-2N15' 
```

* * *

通常，引用的 URL 可以使用[urllib.unquote](http://docs.python.org/2/library/urllib.html#urllib.unquote)取消引用：

```
In [6]: import urllib

In [7]: print(urllib.unquote('http://blahblah.com/s%E2%80%8Btart/DEE-G%E2%80%8B6F-W4A-2N1%E2%80%8B5'))
http://blahblah.com/s​tart/DEE-G​6F-W4A-2N1​5 
```

* * *

以下是您如何判断`%E2%80%8B`代表 a 的方法`ZERO WIDTH SPACE`：

```
In [18]: x = urllib.unquote('%E2%80%8B')

In [19]: y = x.decode('utf-8')

In [20]: import unicodedata as UD

In [21]: [UD.name(c) for c in y]
Out[21]: ['ZERO WIDTH SPACE'] 
```

请注意，未引用的 URL 包括零宽度空间：

```
In [4]: urllib.unquote('http://blahblah.com/s%E2%80%8Btart/DEE-G%E2%80%8B6F-W4A-2N1%E2%80%8B5')
Out[4]: 'http://blahblah.com/s\xe2\x80\x8btart/DEE-G\xe2\x80\x8b6F-W4A-2N1\xe2\x80\x8b5' 
```

输入 URL 似乎是一件奇怪的事情......

# javascript - 带有客户端排序和过滤的jQuery数据表中的服务器端分页

> ID：15477174
> 
> 赞同：1
> 
> 时间：2013-03-18T12:44:57.830
> 
> 标签：javascript, jquery, jquery-datatables

数据表要​​求，有可能吗？

示例场景：

1\. 服务器一次返回 10 行。
2\. 使用分页
3\. 返回上一个呈现的页面不会重新加载来自服务器的数据
4\. 排序应该是可配置的，以便仅处理已经加载的数据，而不是查询服务器
5\. 过滤应该可配置为处理客户端数据或查询服务器。

使用 jquery Datatables 可以满足这组要求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:50:25.353

好的，答案是这样的：如果你使用服务器进程来获取数据，那么当你进行排序、分页和过滤时，它总是会从服务器端获取数据，你没有机会在客户端这样做。第一次用的时候也有同样的需求，最后还是放弃了。简而言之，如果您选择服务器端，它将处理服务器端数据的所有事情。

# java - 在 DB2 数据库中插入 1500 万行

> ID：15477179
> 
> 赞同：5
> 
> 时间：2013-03-18T12:45:03.487
> 
> 标签：java, sql, db2

我必须在数据库中加载大约 1500 万行数据`DB2`——使用`java`.

为简单起见，我不打算讨论文件的格式或数据库中的表数。假设只有一个包含 5 列的表从一个巨大的单个 csv 文件中获取数据。

在这种情况下 - 我需要一些东西

1.  快速地
2.  稳定的

我并不担心

1.  代码重用
2.  模块化
3.  可测试性

在我看来，使用简单的批量插入`java`是要走的路。我知道`Spring Batch`但不知道是否值得努力添加该层。

向小组提问 - 你有什么建议。世界上任何东西`Java / Java EE`都是可接受的解决方案（只要它不需要我们需要购买的软件）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:19:51.360

使用加载工具将其放入您创建的新表中。
查看日志文件以确保没有加载错误。
使用 JDBC 或存储过程来操作数据。
备份您的目标表。
使用简单的插入语句将数据添加到目标表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:57:13.087

使用像 Pentaho 或 Talend 这样的 ETL 会很棒。

# xml - 弹簧安全 3 xml 文件

> ID：15477180
> 
> 赞同：0
> 
> 时间：2013-03-18T12:45:03.837
> 
> 标签：xml, spring, security, url, intercept

请让我知道我可以运行我的应用程序的 Spring Security xml 文件的最大大小是多少。只是想知道这一点，因为如果最终用户继续在其中添加 n 个拦截 URL 标记，那么我可以运行我的应用程序的大小。服务器/容器在启动时不应失败。

# ruby - 升级宝石后 Phusion 乘客投掷错误

> ID：15477185
> 
> 赞同：1
> 
> 时间：2013-03-18T12:45:10.217
> 
> 标签：ruby, gem, dependencies, redmine, phusion

我目前正在运行 Redmine，在更新 gems 时，Phusion Passenger 抛出错误，无法找到所需的库。似乎它一直在寻找较旧的宝石，而不是较新的宝石。

更新 gem 后，我运行命令：

```
gem cleanup 
```

删除不再需要的所有旧宝石。

不幸的是，尽管安装了较新的 gem，Phusion Passenger 仍然抛出以下错误：

```
Could not find activesupport-3.2.11 in any of the sources (Bundler::GemNotFound) 
```

`activesupport-3.2.12`但是已经安装了。

为了暂时解决这个问题，我需要重新安装旧版本。不幸的是，我需要安装所有旧版本的依赖项......有没有办法让 Phusion Passenger 看到所需宝石的新版本？我对 Ruby、Rails 或 gems 知之甚少，因此感谢我在此问题上获得的任何帮助。

谢谢你

编辑：根据请求，这里是输出`gem dependency activesupport -reverse-dependencies`：

```
Gem activesupport-3.2.12
  i18n (~> 0.6)
  multi_json (~> 1.0)
  Used by
    actionpack-3.2.12 (activesupport (= 3.2.12))
    activemodel-3.2.12 (activesupport (= 3.2.12))
    activerecord-3.2.12 (activesupport (= 3.2.12))
    activeresource-3.2.12 (activesupport (= 3.2.12))
    rails-3.2.12 (activesupport (= 3.2.12))
    railties-3.2.12 (activesupport (= 3.2.12))
    treetop-1.4.12 (activesupport (>= 0, development)) 
```

编辑：我想我找到了问题的根源：Redmine 目录中的那个`Gemfile`和那个。`Gemfile.lock`在`Gemfile.lock`文件中，它列出了以下内容：

```
specs:
    actionmailer (3.2.11)
    actionpack (= 3.2.11)
    mail (~> 2.4.4)
    actionpack (3.2.11)
    activemodel (= 3.2.11)
    activesupport (= 3.2.11)
    builder (~> 3.0.0)
    erubis (~> 2.7.0)
    journey (~> 1.0.4)
    rack (~> 1.4.0)
    rack-cache (~> 1.2)
    rack-test (~> 0.6.1
    ... 
```

所以，这很可能是导致所有问题的文件......现在，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:59:32.230

您必须执行以下操作：

打开 Redmine `Gemfile`（应该位于 redmine 项目的根目录）。在该文件中，您将更新`gems`. 在终端中，转到 Redmine 项目的根目录（与 Gemfile 所在的级别相同），然后执行`bundle install`. 这将更新您的`gems`并将您的替换`Gemfile.lock`为列出新宝石的新宝石。

# javascript - Javascript - 悬停时的 addClass() 不起作用

> ID：15477186
> 
> 赞同：3
> 
> 时间：2013-03-18T12:45:10.923
> 
> 标签：javascript, html, css, jquery

## html

```
<ul class="navBarExtended">
   <li><a href="#">Link</a></li>
</ul> 
```

## css

```
.onHover{
text-decoration: underline;
 } 
```

## javascript

```
$("ul.navBarExtended li a").hover(
    function(){
        $(this).addClass("onHover");
    },
    function(){
        $(this).removeClass("onHover");
 }); 
```

我正在尝试将“onHover”类添加到元素上，特别是一个链接，但它似乎不起作用..那么您认为问题可能出在哪里？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T12:47:40.593

更好的解决方案可能是像这样使用[`:hover`伪类](https://developer.mozilla.org/en-US/docs/CSS/%3ahover)：

```
ul.navBarExtended li a:hover {
   text-decoration: underline;
} 
```

但是，您的原始代码似乎确实有效（假设您已将`a`元素的默认 CSS 设置为没有下划线）：http: [//jsfiddle.net/jaypeagi/wSG4s/](http://jsfiddle.net/jaypeagi/wSG4s/)

还值得注意的是，在您的代码中，如果您将 script 标签放在包含`a`元素的 HTML 之前，它将不起作用（[请参阅此处](http://jsbin.com/ikaxeb/2)）。这是因为当脚本运行时，元素不存在。考虑让您的代码在[JQuery 文档就绪事件](http://api.jquery.com/ready)上运行。[这里的例子](http://jsbin.com/ikaxeb/3)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T12:47:40.550

我认为那是因为默认情况下`a`标签已经有了`text-decoration`. 只需添加额外的 css 以将其默认设置为 none：

```
ul.navBarExtended li a {
    text-decoration: none;
} 
```

但是你真的应该只使用一个 CSS 类来管理悬停（如果可能的话），通过添加：

```
ul.navBarExtended li a:hover {
    text-decoration: underline;
} 
```

# mediawiki-api - 仅以一种语言获得维基词典标题的简单方法？

> ID：15477189
> 
> 赞同：8
> 
> 时间：2013-03-18T12:45:23.620
> 
> 标签：mediawiki-api, wiktionary

我可以很容易地得到一个包含维基词典中所有标题的[转储](http://dumps.wikimedia.org/enwiktionary/latest/enwiktionary-latest-all-titles-in-ns0.gz)，但是这个转储包含每个单词，甚至是非英语单词。

例如，您可以找到`souris`（`mouse`法语）：[https ://en.wiktionary.org/wiki/souris](https://en.wiktionary.org/wiki/souris)

是否有一种简单的方法或现有的脚本来*仅获取一种**特定*语言的标题。我想从维基词典中获取所有英语单词，不包括该语言中不存在的单词。

到目前为止，我唯一的想法是解析文本并检查是否有`==English==`一行，但它太慢而无法使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:42:25.543

我认为您需要：

*   解析维基词典中已经存在的[英语单词](http://en.wiktionary.org/wiki/Index:English)列表，这些列表是从数据库转储中提取的。
*   下载数据库转储（不仅是标题）并自己提取术语。

我尝试了选项 a)，只是因为选项 b) 意味着需要几 GB 的下载量。这非常简单，实际上我包含了一个快速的 JS 实现，您可以使用它作为基础以您喜欢的语言创建自己的脚本。

```
var baseURL="http://en.wiktionary.org/wiki/Index:English/"
var letters=['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']

for(i=0;i<letters.length;i++) {
    var letter = letters[i];
    console.log(letter);
    $.get(baseURL+letter, function(response) { 
        $(response).find('ol li a').each( function (k,v) { console.log(v.text) })    
    })
} 
```

**编辑** 我自己对这个主题很好奇，所以我写了一个 python 脚本。以防万一有人发现它有用：

```
from lxml.cssselect import CSSSelector
from lxml.html import fromstring
import urllib2

url = 'http://en.wiktionary.org/wiki/Index:English/'
letters = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
for l in letters:
    req = urllib2.Request(url+l, headers={'User-Agent' : "Magic Browser"}) 
    con = urllib2.urlopen( req )
    response = con.read()
    h = fromstring(response)
    sel = CSSSelector("ol li a")

    for x in sel(h):
        print x.text.encode('utf-8') 
```

我会自己将结果粘贴到 pastebin，但 500kb 的限制不会让我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T14:38:42.110

根据@serans 的回答，我创建了一个 GitHub Gist 在 Swift 中做同样的事情

[https://gist.github.com/ashleymills/549ab8aff05ec90f4350#file-wiktionaryfetcher-swift](https://gist.github.com/ashleymills/549ab8aff05ec90f4350#file-wiktionaryfetcher-swift)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T05:14:28.877

serans 发布的解决方案和代码示例很棒，但我无法让他的 python 代码运行。

我按照他的例子写了一个 ruby​​ 版本：

```
#!/usr/bin/env ruby

require 'net/http'
require "rexml/document"

url = 'http://en.wiktionary.org/wiki/Index:English/'

('a'..'z').to_a.each do |letter|
  response = Net::HTTP.get(URI(url + letter))
  doc = REXML::Document.new(response)
  REXML::XPath.each(doc, "//ol/li/a") do |element|
    puts element.text
  end
end 
```

# php - 将php数组插入javascript

> ID：15477190
> 
> 赞同：0
> 
> 时间：2013-03-18T12:45:32.560
> 
> 标签：php

我有一个脚本：

*   从 txt 文件中读取 url
*   做一些计算
*   将结果插入表中

我想用 php 数组替换 txt 文件。这是我当前的代码：

```
<script type="text/javascript">

   $.get("imones.txt", function (data) {
        var array = data.split(/\r\n|\r|\n/);
        var beforeLoad = (new Date()).getTime(); 
        var loadTimes = []; 
            var beforeTimes = [];                           
        $('#frame_id').on('load', function () {                                             
            beforeTimes.push(beforeLoad); /
            loadTimes.push((new Date()).getTime());               
            $('#frame_id').attr('src', array.shift());  
                try {
                $.each(loadTimes, function (index, value) {                 
                    var result = (value - beforeTimes[index]) / 1000; 
                        if (result < 0) { 
                            result = result * (-1);
                        }
                    $("#loadingtime" + [index]).html(result);                       
                    beforeLoad = value;             
                });
                } catch(ex) {}
        }).attr('src', array.shift()); 

</script> 
```

它从 imones.txt 中读取，然后将每个 url 插入到一个框架中，进行一些计算，然后将结果插入到`#loadingtime`div 中。我想用 php 数组替换 imones.txt。我也希望将输出存储在另一个 php 数组中，而不是将其存储在 div 中。有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:54:52.277

尝试这样的事情：

```
<?php
    $str = implode(',',$yourPhpArr);
?>

<script type="text/javascript">

    var urls = "<?=$str?>";

    var array = urls.split(/,/);
    var beforeLoad = (new Date()).getTime(); 
    var loadTimes = []; 
    var beforeTimes = [];

    $('#frame_id').on('load', function () {                                             
       beforeTimes.push(beforeLoad); /
            loadTimes.push((new Date()).getTime());               
            $('#frame_id').attr('src', array.shift());  
                try {
                $.each(loadTimes, function (index, value) {                 
                    var result = (value - beforeTimes[index]) / 1000; 
                        if (result < 0) { 
                            result = result * (-1);
                        }
                    $("#loadingtime" + [index]).html(result);                       
                    beforeLoad = value;             
                });
                } catch(ex) {}
        }).attr('src', array.shift()); 

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:51:00.927

让一个 php 文件回显您的数组：

```
echo Array(1,2,3,4,5); 
```

你的 html/javascript：

```
 $.get("yourphp.php", function (data) {
        var array = data.split(/\r\n|\r|\n/);
        var beforeLoad = (new Date()).getTime(); 
        var loadTimes = []; 
            var beforeTimes = [];                           
        $('#frame_id').on('load', function () {                                             
            beforeTimes.push(beforeLoad); /
            loadTimes.push((new Date()).getTime());               
            $('#frame_id').attr('src', array.shift());  
                try {
                $.each(loadTimes, function (index, value) {                 
                    var result = (value - beforeTimes[index]) / 1000; 
                        if (result < 0) { 
                            result = result * (-1);
                        }
                    $("#loadingtime" + [index]).html(result);                       
                    beforeLoad = value;             
                });
                } catch(ex) {}
        }).attr('src', array.shift()); 

</script> 
```

# c# - 如何返回动作 内部方法？

> ID：15477191
> 
> 赞同：1
> 
> 时间：2013-03-18T12:45:40.463
> 
> 标签：c#, callback, return, action

我的课堂上有以下代码：

```
private static void SetUserMeta(string pUserToken, string pMetaKey, string pMetaValue, Action<bool> callback)
{
    BuddyClient client = CreateBuddy();
    bool rValue = false;

    client.LoginAsync((user, state) =>
    {
        if (state.Exception != null)
        {
            rValue = false;
        }
        else
        {
           client.Metadata.SetAsync((result, resultState) =>
            {
                if (resultState.Exception != null)
                {
                    rValue = false;
                }
                else
                { 
                   rValue = true;
                } 
            }, key: pMetaKey, value: pMetaValue);
        }

        callback(rValue);
    }, token: pUserToken);
 } 
```

我想`rValue`从我的其他方法获取并返回它，如下所示

```
public static void SetBuddyData(string pUserToken, BuddyData pMetaValue, Action<bool> callback)
{
    //my problem is here and I don't know how to get and return data from SetUserMeta
    return SetUserMeta(pUserToken, "SavedGameData", pMetaValue.Serialize());
} 
```

而且我想从我的应用程序中调用这个返回值。这些代码在我的库中。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:52:34.960

只需将回调传递给`SetUserMeta`喜欢

```
public static void SetBuddyData(string pUserToken, BuddyData pMetaValue, Action<bool> callback)
{
    SetUserMeta(pUserToken, "SavedGameData", callback);
} 
```

`SetBuddyData`像这样打电话

```
SetBuddyData("my user token", myBundle, isLoggedIn => HandleUserLogin(isLoggedIn)); 
```

您将在哪里`HandleUserLogin`处理 bool 回调数据，`callback(rValue);`在`SetUserMeta`方法中返回。它的主体示例如下所示

```
public static void HandleUserLogin(bool isLogged)
{
   Console.WriteLine("user is {0} logged in", isLogged ? "" : "not");
} 
```

您还可以利用方法组语法和调用`SetBuddyData`方法，例如：

```
SetBuddyData("my user token", myBundle, HandleUserLogin); 
```

# svn - 文件类型检查 SVN 钩子

> ID：15477193
> 
> 赞同：1
> 
> 时间：2013-03-18T12:45:47.797
> 
> 标签：svn, build-process, build-automation

我搜索了两个小时的 SVN 钩子 shell 脚本，它可以做以下两件事，但我找不到。如果您有任何相关的模板或材料，请帮助我。

1.  需要检查文件类型(*.java, *.css, *.js...)
2.  提交文件时需要在文件顶部添加

    /* * 版权所有 (c) 1994、2010，Oracle 和/或其附属公司。版权所有。* ORACLE 专有/机密。使用受许可条款的约束。*作者：*文件版本：*文件路径名：*和任何其他可能有用的标签。*/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:53:05.027

1.  在脚本中用于[`svnlook`](http://svnbook.red-bean.com/en/1.7/svn.ref.svnlook.html)分析传入事务并实现拒绝或允许提交的逻辑。

2.  你不能这样做。见[SVNBook](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html#svn.reposadmin.create.hooks)：

    > 虽然钩子脚本几乎可以做任何事情，但钩子脚本作者应该在一个方面表现出克制：**不要使用钩子脚本修改提交事务**。虽然使用钩子脚本自动更正提交的文件中存在的错误、缺点或违反策略可能很诱人，但这样做可能会导致问题。Subversion 保留存储库数据的某些位的客户端缓存，如果您以这种方式更改提交事务，这些缓存将变得难以察觉的陈旧。这种不一致会导致令人惊讶和意外的行为。**而不是修改事务，您应该简单地在 pre-commit 钩子中验证事务，如果它不满足所需的要求，则拒绝提交**. 作为奖励，您的用户将了解谨慎、合规的工作习惯的价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:51:41.287

我找到了解决方案，但没有使用钩子脚本。我用 svn 令牌做了。

1.  需要使用一些 SVN 客户端将所需的令牌附加（激活）到 svn 中的特定项目或文件夹。

2.  需要写一个这样的模板。

    /* *

    *   版权所有 (c) 1992-2013 XXXX, Inc 和/或其附属公司。版权所有。
    *   XXXX 专有/机密。使用受许可条款约束
    *   最后修改者：$Author$
    *   修改时间：$Date$
    *   文件版本：$Revision$
    *   文件路径：$URL$ */
3.  第一次您必须将此模板添加到您的源代码中。并承诺，下次你不需要这样做。

4.  注意：模板需要更改基准一个文件时间。上面的.java文件模板，如果你想申请.xml或者其他根据特定技术的注释语法，你必须改变。

5.  只需提交.. 完成..

# javascript - 如何在 kendoui 中取消选择网格记录

> ID：15477201
> 
> 赞同：20
> 
> 时间：2013-03-18T12:46:15.107
> 
> 标签：javascript, jquery, kendo-ui, telerik, kendo-grid

我正在选择数据绑定事件的列表视图记录。我在数据绑定中编写了以下代码

```
 var grid = $("#grid").data("kendoGrid");
       grid.select(grid.tbody.find(">tr:first")); 
```

现在我想动态取消选择网格。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-18T13:34:49.620

使用[`clearSelection`](http://docs.kendoui.com/api/web/grid#methods-clearSelection)：

```
var grid = $("#grid").data("kendoGrid");
grid.clearSelection(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T12:53:49.010

kendo 网格有一个名为`selectable:true`..this 的属性，单击时会选择整行，而要取消选择行，只需按 ctrl+选中的行。

# html - 如何更改 HTML5 日期输入字段的模式？

> ID：15477209
> 
> 赞同：0
> 
> 时间：2013-03-18T12:46:47.593
> 
> 标签：html, date

HTML5 输入类型日期的模式在 Chrome 上为 mm/dd/yyyy。如何将其更改为 mm/dd/yy？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T23:07:19.377

你不能。Chrome 的实现反映了本地用户设置，但 Chrome 似乎总是使用四位数的年份。

# jsf - 从 ManagedBean 添加组件

> ID：15477214
> 
> 赞同：-2
> 
> 时间：2013-03-18T12:47:03.100
> 
> 标签：jsf, jsf-2, primefaces

我需要从支持 Bean 添加组件。我在托管 Bean 中有字符串，它将所有 jsf 组件作为字符串。在 UI 中我需要作为组件呈现。我的托管 bean 编码是

```
String htmlContent = "<h:inputText/>";

public String getHtmlContent()
{
   return this.htmlContent;
} 
```

XHTML 编码是

```
<h:outputText value="#{managedBean.htmlContent}" escape = "false"/> 
```

如果我在 htmlContent 中使用 Html 标签，例如

```
String htmlContent = "<input type='text'/>; 
```

我的逻辑可以正常工作。如果我在该字符串中使用 jsf 标签，JSF 组件将按原样呈现。它不会呈现为 Html。

我知道最后所有的 Jsf 标签都会被转换成 html 标签。除了 ui:composition 和 ui:include 之外，还有什么方法可以处理 jsf 标签的动态呈现？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:33:40.843

我认为您的解决方案是个坏主意。据我了解，您想在支持 bean 中生成您的视图。不要尝试将模型/控制器与视图混合。取而代之的是，只需将数据添加到您的视图中`<h:panelGroup/>`并添加`rendered`标签，这样您就可以控制它是否会被渲染。

我会这样做：

```
@ManagedBean
@ViewScoped
public class MyBackingBean {
    private boolean renderPieceOfView;
    // getter and setter for renderPieceOfView
} 
```

看法

```
<h:panelGroup rendered="#{myBackingBean.renderPieceOfView}">
    ... this will be rendered or not ...
</h:panelGroup> 
```

您还可以创建将放置在`... this will be rendered or not ...`

```
<h:panelGroup rendered="#{myBackingBean.renderPieceOfView}">
    <ui:include src="#{templateFactory.currentViewPath}" />
</h:panelGroup> 
```

# javascript - 确定网站根目录的正则表达式

> ID：15477223
> 
> 赞同：0
> 
> 时间：2013-03-18T12:47:37.420
> 
> 标签：javascript, regex

我有以下 url，所有这些 url 都被认为是网站的根目录，我如何使用 javascript location.pathname 使用正则表达式来确定下面的模式，因为你会注意到“网站”这个词在这个模式中重复..

```
 http://www.somehost.tv/sitedev/
 http://www.somehost.tv/sitetest/
 http://www.somehost.tv/site/

 http://www.somehost.tv/sitedev/index.html
 http://www.somehost.tv/sitetest/index.html
 http://www.somehost.tv/site/index.html 
```

我试图仅在用户位于网站根目录时才显示 jQuery 对话框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:05:18.447

只需使用 DOM 来解析它。无需调用正则表达式解析器。

```
var url = 'http://www.somesite.tv/foobar/host/site';
    urlLocation = document.createElement('a');

urlLocation.href = url;
alert(urlLocation.hostname);    // alerts 'www.somesite.tv' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:55:35.270

一个完整的模式，包括协议和域，可能是这样的：

```
/^http:\/\/www\.somehost\.tv\/site(test|dev)?\/(index\.html)?$/ 
```

但是，如果您要匹配，请`location.pathname`尝试

```
/^\/site(test|dev)?\/(index\.html)?$/.test(location.pathname) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:06:27.930

如果您不明确需要正则表达式

你也可以做例如

*   用您的网址填充数组
*   循环一个递减的子串
    *   最短的元素。
*   对比一下
    *   最长的元素。
*   直到他们匹配。

* * *

```
 var urls = ["http://www.somehost.tv/sitedev/",
 "http://www.somehost.tv/sitetest/",
 "http://www.somehost.tv/site/",
 "http://www.somehost.tv/sitedev/index.html",
 "http://www.somehost.tv/sitetest/index.html",
 "http://www.somehost.tv/site/index.html"]

     function getRepeatedSub(arr) {
         var srt = arr.concat().sort();
         var a = srt[0];
         var b = srt.pop();
         var s = a.length;
         while (!~b.indexOf(a.substr(0, s))) {
             s--
         };
         return a.substr(0, s);
     }
 console.log(getRepeatedSub(urls)); //http://www.somehost.tv/site 
```

[这是一个关于JSBin](http://jsbin.com/emuxeq/1/edit)的例子

# python - 在 Flask Admin 中用富文本编辑器替换 textarea

> ID：15477228
> 
> 赞同：7
> 
> 时间：2013-03-18T12:47:49.613
> 
> 标签：python, flask

我想知道在 Flask Admin 中用富文本编辑器替换标准 textarea 字段的最佳方法？那么kindeditor呢？以及如何制作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T19:06:47.240

这是你可以做到的：[https ://gist.github.com/mrjoes/5189850](https://gist.github.com/mrjoes/5189850)

尽管此示例显示了如何集成 CKEditor，但对于另一个 WYSIWYG 编辑器，过程不会有太大不同：

1.  创建 wtforms 小部件，它将为编辑器发出必要的 HTML。对于 CKEditor，它是 'ckeditor' 类；
2.  创建使用此小部件的 wtforms 字段
3.  创建包含编辑器 JS 文件的新模板
4.  告诉 Flask-Admin 使用新字段和模板。

# xcode - NSTableView 与 mainView 上的其他控件混淆

> ID：15477229
> 
> 赞同：0
> 
> 时间：2013-03-18T12:47:50.230
> 
> 标签：xcode, macos, cocoa, nstableview

我已经添加`NSTableView`了`mainWindow`，然后我想要添加 2 个按钮（向上箭头和向下箭头），`mainWindow`但它们会与 tableview 重叠。但是当`NSTableView`加载数据或滚动时，我的按钮会隐藏。

请帮助我如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:58:05.580

您需要利用大小调整和/或自动布局。

你一定没有设置那些按钮。检查按钮和表格视图。

当您绘制 tableview 时，您会看到蓝色辅助线，指导您正确使用。并绘制表格，我检查它应该符合顶部、左侧和右侧的蓝线。

对于按钮，将它们放在底部并检查它们下方和左侧的线。

![在此处输入图像描述](../Images/8e47a1b4c4166c63ef6791f33dd725cf.png)

# php - 如何在php中检查Url Image是否存在

> ID：15477232
> 
> 赞同：1
> 
> 时间：2013-03-18T12:48:07.983
> 
> 标签：php, imageurl

我正在解决从数据库中获取图像 URL 并在 php 中显示图像，如下所示

```
<?php    

$row['blog_url'] = "http://www.nasa.gov/images/content/711375main_grail20121205_4x3_946-710.jpg";

<img src="<?php echo $row['blog_url']; ?>"  height="200" width="200" alt="image"/>

?> 
```

但是如果图像没有从指定的 url 加载为 blog_url，我想显示 no_imgae.jpeg

如果有任何方法可以找出图像是否存在于 php 中

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:19:48.060

此功能将解决您的问题：

```
function checkRemoteFile($url)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$url);
    // don't download content
    curl_setopt($ch, CURLOPT_NOBODY, 1);
    curl_setopt($ch, CURLOPT_FAILONERROR, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    if(curl_exec($ch)!==FALSE)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

只需传入`image url`这个，如果图像存在`function`，它将返回`yes``false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T12:50:42.413

```
$file = "http://www.nasa.gov/images/content/711375main_grail20121205_4x3_946-710.jpg";
$file_headers = @get_headers($file);
if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
    $exists = false;
}
else {
    $exists = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T12:52:52.120

```
<?
$img = $row['blog_url'];
$headers = get_headers($img);
if(substr($headers[0], 9, 3) == '200') {
?>
<img src="<?php echo $img; ?>"/>
<?
} else {
?>
<img src="noimage.jpg"/>
<?
}
?> 
```

# c# - iTextSharp - 不包含“getInstance”的定义

> ID：15477235
> 
> 赞同：0
> 
> 时间：2013-03-18T12:48:14.723
> 
> 标签：c#, winforms, visual-studio-2008, itextsharp

我正在尝试使用 iTextSharp 从图像生成 pdf，但出现以下错误：**iTextSharp.Image 不包含“getInstance”的定义**和“iTextSharp.text.Document 不包含“添加”的定义和'iTextSharp.text.Document 不包含'newPage' 的定义和iTextSharp.text.Image 不包含'scalePercent' 的定义**

我已经添加了 iText 库（itextsharp、itextsharp.pdfa 和 itextshar.xtra）。这是我的代码：

```
 private void button3_Click_1(object sender, EventArgs e)
    {

        saveFileDialog1.FileName = "name.pdf";
        if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        {
            using (Bitmap bitmap = new Bitmap(panel1.ClientSize.Width,
                                                panel1.ClientSize.Height))
            {
                panel1.DrawToBitmap(bitmap, panel1.ClientRectangle);
                bitmap.Save("C:\\" + (nPaginasPDF + 1) + ".bmp", ImageFormat.Bmp);
            }

            Document doc = new Document();
            PdfWriter.GetInstance(doc, new FileOutputStream(yourOutFile));
            doc.Open();

            for (int iCnt = 0; iCnt < nPaginasPDF; iCnt++)
            {

                iTextSharp.text.Image image1 = iTextSharp.text.Image.GetInstance("C:\\" + (iCnt + 1) + ".bmp");
                image1.ScalePercent(23f);
                doc.NewPage();
                doc.Add(image1);
            }
            using (var Stream = saveFileDialog1.OpenFile())
            {
                doc.Save(Stream);
            }
            doc.Close();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:52:57.263

如果您使用 iText 文档或 Java 书籍，则需要针对 .NET 进行一些调整。在您的示例中，由于 .NET 隐式获取器和设置器用于属性，因此：

```
var instance = iTextSharp.Image.getInstance(); 
```

变成这样：

```
var instance = iTextSharp.Image.Instance; 
```

第二个问题：Java 中的方法名称是驼峰式大小写，而 .NET 是帕斯卡大小写，所以这个（驼峰式）：

```
image1.scalePercent(23f);
doc.newPage();
doc.add(image1); 
```

变成这个（PascalCase）：

```
image1.ScalePercent(23f);
doc.NewPage();
doc.Add(image1); 
```

等等。只需应用**.NET 代码命名约定**而不是 Java 的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T12:59:33.783

@Nenad 和 @MaxStoun 都是正确的，您只需要将 Java 约定适应 .Net。此外，您还需要将 Java 替换`FileOutputStream`为 .Net`System.IO.FileStream`对象。

**编辑**

你有一些我需要解决的“魔法变量”。例如，我不能 100% 确定你在用你的`for`循环做什么，所以我只是为这个示例删除了它。此外，我没有将`c:\`目录写入到桌面的权限。否则，此代码应该有望使您走上正确的道路。

```
 //I don't know what you're doing with this variable so I'm just setting it to something
  int nPaginasPDF = 10;

  //I can't write to my C: drive so I'm saving to the desktop
  string saveFolder = Environment.GetFolderPath(Environment.SpecialFolder.Desktop);

  //Set the default file name
  saveFileDialog1.FileName = "name.pdf";

  //If the user presses "OK"
  if (saveFileDialog1.ShowDialog() == DialogResult.OK) {
      //Create a bitmap and save it to disk
      using (Bitmap bitmap = new Bitmap(panel1.ClientSize.Width, panel1.ClientSize.Height)) {
          panel1.DrawToBitmap(bitmap, panel1.ClientRectangle);
          //Path.Combine is a safer way to build file pathes
          bitmap.Save(System.IO.Path.Combine(saveFolder, nPaginasPDF + ".bmp"), ImageFormat.Bmp);
      }

      //Create a new file stream instance with some locks for safety
      using (var fs = new System.IO.FileStream(saveFileDialog1.FileName, System.IO.FileMode.Create, System.IO.FileAccess.Write, System.IO.FileShare.None)) {
          //Create our iTextSharp document
          using (var doc = new Document()) {
              //Bind a PdfWriter to the Document and FileStream
              using (var writer = PdfWriter.GetInstance(doc, fs)) {
                  //Open the document for writing
                  doc.Open();
                  //Get an instance of our image
                  iTextSharp.text.Image image1 = iTextSharp.text.Image.GetInstance(System.IO.Path.Combine(saveFolder, nPaginasPDF + ".bmp"));
                  //Sacle it
                  image1.ScalePercent(23f);
                  //Add a new page
                  doc.NewPage();
                  //Add our image to the document
                  doc.Add(image1);

                  //Close our document for writing
                  doc.Close();
              }
          }
      }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T12:53:59.330

您将在方法名称中的首字母大写（我刚刚从 Nuget 下载）

```
Image.getInstance(); => Image.GetInstance();    
doc.add(image1); => doc.Add(image1); 
```

# c++ - 你能制作一个模板来接受 C++ 中的向量和数组吗？

> ID：15477238
> 
> 赞同：0
> 
> 时间：2013-03-18T12:48:22.280
> 
> 标签：c++, arrays, templates, vector

我知道你可以创建模板来让函数接受 int、double、float。但是你能“模板化”一个函数，使它可以同时接受数组和向量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:52:00.737

通常的答案是编写一个将一对迭代器作为参数的模板函数。因为指针也是迭代器，所以您可以使用指向数组的第一个元素和一个结束元素的指针来调用您的函数。

例如

```
template <class II>
void print_all(II first, II last)
{
  for (II i = first; i != last; ++i)
    cout << *i << ' ';
  cout << '\n';
}

vector<int> v;
int a[10];
...
print_all(v.begin(), v.end());
print_all(a, a + 10); 
```

# java - MigLayout JLabels 并修复它们的大小

> ID：15477239
> 
> 赞同：2
> 
> 时间：2013-03-18T12:48:23.687
> 
> 标签：java, swing, user-interface, jpanel, miglayout

所以我的程序创建了一个 MigLayout GUI，并有一堆 JLabel，它们在创建时给出了图像。在这里您可以看到现在的最终结果：

![http://i.imgur.com/evI0sYT.jpg](../Images/4fbc2ae9c2c1732f6bb0c529ee48934d.png)

图像太大，超出了它们所包含的 JPanel 的大小。它只是将其创建为原始图像的大小，然后显示它，但是，这显然是一个问题。有没有办法可以修复大小，以便尝试适合 GUI 中的每个组件？

对于初学者，我想确保蓝色部分不会像那样移动，我希望它保持设置为（高度的一半）的大小。我还希望图像在保持原始图像纵横比的情况下占据最大尺寸。

我已经尝试设置 JLabel 的大小和首选大小，当我告诉它添加 JLabel 时，我尝试了一些尝试使用 MigLayout 给它参数，但都没有为我工作。我正在考虑扩展 JLabel 并编写一些东西来修复它，但不完全确定如何去做。我知道我可以覆盖油漆，但不确定我实际上必须做什么。

我的 JPanel 设置如下：

```
JPanel jpCards = new JPanel(new MigLayout("insets 0, gapx 0, gapy 0, wrap 7", "grow")); 
```

我的卡片是在没有附加参数的情况下添加的，只是通过给它显示它们的大小的图片来创建。

澄清一下，我需要更改 JLabel 的实际大小，而不仅仅是其中包含的内容，因为它们稍后会有鼠标侦听器。如果只是图像发生了变化，我会遇到鼠标侦听器在 JLabel 中检测到自己的问题，它看起来不应该

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:11:58.740

我通过在制作 JLabel 之前更改图标的大小来解决这个问题。

我发现在 Java 中，当您创建一个给定某种图像的 JLabel 时，它将适合 JLabel 的大小，以成为您给它的图像的大小。因此，我没有在给定原始图像的情况下创建 JLabel，而是首先使用屏幕的尺寸对其进行缩放，然后从中创建一个 JLabel。

由于我希望用户能够调整屏幕大小并调整图像大小，因此还有一些工作要做。我将不得不花一些时间来弄清楚如何让它调整大小，但这不是一个主要问题。

# android - 谁能说出这个logcat在说什么？

> ID：15477241
> 
> 赞同：0
> 
> 时间：2013-03-18T12:48:35.740
> 
> 标签：android, web-services, listview

在这里，我正在尝试使用一项 Web 服务。我正在尝试将来自该 Web 服务的 json 数据显示到 android 的 listview 中？但我在我的 logcat 上遇到错误，如下所示

**日志猫**

```
03-18 18:11:51.830: I/System.out(296): Transparent  17170445
03-18 18:11:51.990: W/System.err(296): java.net.SocketException: Permission denied
03-18 18:11:52.000: W/System.err(296):  at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocketImpl(Native Method)
03-18 18:11:52.000: W/System.err(296):  at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocket(OSNetworkSystem.java:186)
03-18 18:11:52.000: W/System.err(296):  at org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:265)
03-18 18:11:52.000: W/System.err(296):  at java.net.Socket.checkClosedAndCreate(Socket.java:873)
03-18 18:11:52.010: W/System.err(296):  at java.net.Socket.connect(Socket.java:1020)
03-18 18:11:52.010: W/System.err(296):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:62)
03-18 18:11:52.010: W/System.err(296):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:88)
03-18 18:11:52.010: W/System.err(296):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHTTPConnection(HttpURLConnectionImpl.java:927)
03-18 18:11:52.010: W/System.err(296):  at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:909)
03-18 18:11:52.010: W/System.err(296):  at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:76)
03-18 18:11:52.010: W/System.err(296):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:146)
03-18 18:11:52.010: W/System.err(296):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
03-18 18:11:52.010: W/System.err(296):  at com.example.png.StationsListActivity.callService(StationsListActivity.java:97)
03-18 18:11:52.010: W/System.err(296):  at com.example.png.StationsListActivity$3.run(StationsListActivity.java:78)
03-18 18:11:52.429: D/AndroidRuntime(296): Shutting down VM
03-18 18:11:52.429: W/dalvikvm(296): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
03-18 18:11:52.449: E/AndroidRuntime(296): FATAL EXCEPTION: main
03-18 18:11:52.449: E/AndroidRuntime(296): java.lang.NullPointerException
03-18 18:11:52.449: E/AndroidRuntime(296):  at com.example.png.StationsListActivity$1.handleMessage(StationsListActivity.java:43)
03-18 18:11:52.449: E/AndroidRuntime(296):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 18:11:52.449: E/AndroidRuntime(296):  at android.os.Looper.loop(Looper.java:123)
03-18 18:11:52.449: E/AndroidRuntime(296):  at android.app.ActivityThread.main(ActivityThread.java:4627)
03-18 18:11:52.449: E/AndroidRuntime(296):  at java.lang.reflect.Method.invokeNative(Native Method)
3-18 18:11:52.449: E/AndroidRuntime(296):   at java.lang.reflect.Method.invoke(Method.java:521)
 03-18 18:11:52.449: E/AndroidRuntime(296):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-18 18:11:52.449: E/AndroidRuntime(296):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-18 18:11:52.449: E/AndroidRuntime(296):  at dalvik.system.NativeStart.main(Native Method) 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:50:47.903

您是否在您的 中添加了以下权限`manifest.xml`？

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:51:33.873

将 Internet 权限添加到您的清单：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:05:36.340

请将 Internet 权限添加到您的 manifest.xml 文件。

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# mysql - 嵌套 GROUP BY 优化

> ID：15477244
> 
> 赞同：1
> 
> 时间：2013-03-18T12:48:48.340
> 
> 标签：mysql, sql, sql-optimization

我有以下查询：

```
SELECT trip_id, MAX(cnt) FROM 
(
    SELECT trip_id, stop_id, COUNT(*) as cnt 
    FROM operation_ticket_part_stops 
    GROUP BY trip_id, stop_id
) AS t
GROUP BY trip_id 
```

结果是（这是我想要的结果）：

```
trip_id MAX(cnt)
10072 2
10583 1
**10607 11**
10608 8
10609 13
10612 5
11170 1
11239 1
11675 30
... 
```

子查询的结果是：

```
trip_id stop_id cnt
...
10607 11234 11
10607 11235 10
10607 11236 10
10607 11237 11
10607 11238 9
10607 11239 7
... 
```

有什么办法可以避免这里的子查询（也许可以优化？）。数据库：MySQL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:52:24.007

像这样的东西

```
SELECT trip_id, stop_id, COUNT(*) as cnt 
FROM operation_ticket_part_stops 
GROUP BY trip_id, stop_id
ORDER BY cnt DESC
LIMIT 1 
```

此查询对您的子查询进行排序并仅获取第一条记录（与 Max 保持相同的结果）

# postgresql - Postgis ST_Distance（最小距离计算）

> ID：15477245
> 
> 赞同：4
> 
> 时间：2013-03-18T12:48:49.953
> 
> 标签：postgresql, postgis

我有一个类型为 poly 的几何，我正在计算 POINT 的最小距离可能在多边形几何内部（由 360 个点组成的封闭几何）或使用 postgis 的 ST_Distance 方法在多边形几何外部，我得到准确的距离时POINT 在几何之外，但如果 POINT 在几何内部，则距离为 0，无论 POINT 是在几何内部还是几何外部，我都希望与多边形几何的最近点的距离最小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T00:21:14.033

看起来您想要到多边形壳或外环的距离。如果你有一个 POLYGON，试着找出到`ST_ExteriorRing(poly_geom)`. 对于 MULTIPOLYGON，请参阅[ST_ExteriorRing 的手册页](http://postgis.net/docs/manual-2.0/ST_ExteriorRing.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T11:59:52.360

如果您的点在多边形内，那么它与它的距离为零。听起来您想计算距多边形边缘的距离。

在这种情况下，您实际上想要创建一个几何图形，它是一条线，而不是多边形，它与多边形的边界相同。那么从您的点到那条线的 ST_Distance 将是您正在寻找的结果。

# python - 检索 Django REST 框架相关字段

> ID：15477249
> 
> 赞同：0
> 
> 时间：2013-03-18T12:49:08.733
> 
> 标签：python, django, django-rest-framework

使用[django-rest-framework](http://django-rest-framework.org/)可以从相关字段中检索内容。因此，例如，我想创建一个流派列表，其中包含其中的所有项目。这就是我所拥有的，但我不断收到错误：

> “流派”对象没有属性“project_set”

模型.py

```
class Genre(models.Model):
    name = models.CharField(max_length=100, db_index=True)

class Project(models.Model):
    title = models.CharField(max_length=100, unique=True)
    genres = models.ManyToManyField(Genre, related_name='genres') 
```

序列化程序.py

```
class GenreSerializer(serializers.ModelSerializer):    
    project_set = serializers.ManyRelatedField()

    class Meta:
        model = Genre
        fields = ('name', 'project_set') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:55:09.497

您在`Project`课堂上使用的相关名称命名错误。该相关名称是您访问与给定类型实例相关的项目集的方式。所以你应该使用类似`related_name='projects'`. （因为它是你搞错了。）

然后确保您的序列化程序类与您正在使用的相关名称匹配，因此在这两个地方`project_set`都应该改为`projects`.

（或者，您可以完全删除`related_name='genres'`，一切都会按您的预期工作，因为默认的 related_name 将是`'project_set'`。）

# opencv - 图像处理中的锚点

> ID：15477251
> 
> 赞同：4
> 
> 时间：2013-03-18T12:49:19.510
> 
> 标签：opencv, image-processing, intel-ipp

我想在英特尔 IPP 或 OpenCV 中使用过滤器功能。关于锚点的位置存在争论，我不知道它们是什么或如何使用它们。

什么是锚点，它的用途是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:11:56.953

假设您使用带有内核（或掩码大小或类似内容）的过滤器。锚点定义了内核相对于过滤操作期间当前处理的像素的定位方式。

锚点是一个`IppiPoint`，即具有成员`x`和的结构`y`。这是当前处理的像素在内核中的坐标。通常，它被设置为中心，即`kernelWidth/2`和`kernelHeight/2`。

*最初，我声称锚点是线性索引。对不起，那是错误的。*

# iphone - 当用户处于纵向视图时强制加载横向视图

> ID：15477257
> 
> 赞同：0
> 
> 时间：2013-03-18T12:49:41.937
> 
> 标签：iphone, objective-c, uinavigationcontroller, device-orientation

在我的应用程序中，我使用导航控制器来管理视图。我的登录页面支持纵向和横向视图。当用户登录时，我的第二个视图是主页，它只支持横向模式。我想要做的是当用户使用纵向视图登录到主页时，即使设备处于纵向，主页也应该出现在横向视图中。

所以我所做的就是在主页的`viewWillAppear`方法中将状态栏方向更改为横向，如下所示；

```
 -(void)viewWillAppear:(BOOL)animated{

        [super viewWillAppear:animated];
        [[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeRight animated:NO];
UIDeviceOrientation orien = [[UIDevice currentDevice] orientation];
    } 
```

我也覆盖了`shouldAutorotateToInterfaceOrientation`如下

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

return YES;

} 
```

我的问题是即使状态栏更改为横向我的`UIViewController`（家）仍然处于横向模式。当我调试时，我发现即使我将状态栏方向更改为横向，也会`[[UIDevice currentDevice] orientation]`返回纵向。我整天都在上网。并实施许多其他人提供的解决方案，但我的一整天都浪费了。有人可以指导我解决这些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:53:13.037

你只需要喜欢：-

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    if (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight) {

        return YES;
    }
    else
    {
        return NO;
    }
} 
```

对于您想要打开横向的特定课程

在 ios6 中：-

-

```
(BOOL)shouldAutorotate {
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskLandscape;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:56:16.713

你可以试试

```
- (NSUInteger)supportedInterfaceOrientations {
      return UIInterfaceOrientationMaskPortrait;
  } 
```

和

```
- (BOOL)shouldAutorotateToInterfaceOrientation:     (UIInterfaceOrientation)toInterfaceOrientation {
     return (toInterfaceOrientation == UIInterfaceOrientationPortrait);
 } 
```

或尝试将其呈现为模态，而不是推动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:05:32.307

Apple 不希望您强制设备的方向。不过有一个技巧。不幸的是，我无权访问我的代码。

```
1\. Your app in general supports all orientations. 
2\. All view controllers only return their supported interface orientation in their overwrites respectivly (in supportedInterfaceOrientations). 
3\. All view controllers return YES in shouldAutorotateToInterfaceOrientation only for their supported orientations. 
```

没事儿。但它仍然需要用户实际旋转设备。否则不会调用整个方向改变机制。现在，当您想强制改变方向时，请执行以下操作：

```
4\. Use setStatusBarOrientation to set the orientation before the next view controller is displayed. 
That alone would not do anything. Plus it would not take any effect if the next view controller is pushed. It would work fine only when the next view controller is presented modally. 
5a. So if you want to present the rotated view controller modally, then do it. 
5b. If you still need to push it then: 
5b1\. Create an empty UIViewController instance. alloc/init will do. 
5b2\. Present it modally
5b3\. Dismiss it modally 
Now, the new view controller was not even visible to the user but the device - here comes the magic - is rotated now.  
5c4\. Next push the view controller that you want to display roated. 
```

在你回来的路上反之亦然:)

当您使用标签栏时，上述所有内容都会变得更加复杂。你使用标签栏吗？我设法使用一个标签栏来实现它，我必须对其进行子类化以覆盖它的旋转方法。在一个没有标签栏的应用程序中，我将 UIApplication （！）子类化了，但不要记住这是真正需要的还是我出于方便而这样做（而不是将更改应用到 50 多个视图控制器）。但原则上，以上就是它的诀窍。

PS：您可以在此处找到更详细的答案以及代码示例： [Presenting Navigation Controller in Landscape mode is not working ios 6.0](https://stackoverflow.com/questions/15519486/presenting-navigation-controller-in-landscape-mode-is-not-working-ios-6-0/15528854#15528854)

# asp.net - 如何为现有的 Web 应用程序创建功能/UI 测试

> ID：15477259
> 
> 赞同：3
> 
> 时间：2013-03-18T12:49:45.977
> 
> 标签：asp.net, testing, selenium, automated-tests, jasmine

我有一项有趣的任务，即为从未进行过单元或集成测试的现有 Web 应用程序构建复杂的工作流测试（所有测试均由开发人员/用户进行，没有结构或指南）。

## 设置

目标是一个已构建多年的 ASP.NET（无 MVC）Web 应用程序。没有干净的 MVC 或任何其他模式，因此 HTML 输出非常糟糕（生成的 ID、没有太多 css 类、行 css 样式 --> 难以测试）。该应用程序是以数据为中心的，因此需要进行很多测试，并且数据库的状态对于测试非常重要。

我正在考虑以下工作流程： 1\. 重置数据库以测试开始数据 2\. 运行通过模拟用户交互**创建和测试数据的测试**

## 工具

我在玩 Selenium IDE，但感觉不够结构化。我梦想有一个工具集，我可以在其中用（文学）coffeescript / javascript编写测试，可以在浏览器中执行（不需要无头测试），但我能找到的所有工具都旨在测试javascript函数而不是用户互动。

我的测试步骤需要是：

1.  页面加载
2.  通过搜索文本 A 或计算 ul B 中的元素来测试页面是否已正确加载
3.  单击按钮 C，等待弹出窗口 D，在字段 E 中键入文本
4.  单击保存按钮并检查字段 E 中的文本是否显示在元素 F 中

**茉莉花**能够测试这些用户交互吗？我只能找到针对 javascript 函数或 HTML 元素存在的 jasmine 测试，而不是针对具有相互依赖的测试步骤的**复杂工作流程。**

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T12:56:44.687

Selenium IDE 不是解决这个问题的方法。

Selenium 建立在 WebDriver JSON Wire Protocol 之上。拥有这个“基础”意味着它可以很容易地插入到许多不同的语言中，所有语言都使用相同的 API。

其中之一是 JavaScript：

[https://code.google.com/p/selenium/wiki/WebDriverJs](https://code.google.com/p/selenium/wiki/WebDriverJs)

免责声明：JS 绑定是非常新的！

我不确定我是否理解你为什么必须用 JavaScript 来做，尤其是我可以看到这*严重*限制了你的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:10:19.527

我建议[IBM Rational Functional Tester](http://www-142.ibm.com/software/products/us/en/functional/)。它是基于java的，使其非常可扩展。它不是 Javascript，因此请注意测试是用 Java 代码编写的。大多数情况下都有一个记录器：您只需单击周围，它就会记录您的操作。

关于使用它的自动化测试，[这是我的意见](https://sqa.stackexchange.com/questions/4995/what-are-strong-points-of-rft-comparing-to-other-test-management-tools/5002#5002) 。

它是一种商业产品。我不隶属于 IBM，但我经常使用 RFT。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T12:48:53.200

您可能希望查看[RIATest](http://www.cogitek.com/riatest/features/technologies/htmljavscript.html)以对 Web 应用程序进行跨平台跨浏览器测试。它使用与 JavaScript 非常相似的基于 ECMAScript 的脚本语言。

它适用于 Windows 和 Mac，支持的浏览器是 Firefox、IE 和 Chrome。在一个平台/浏览器上编写的自动化测试脚本可以针对所有其他支持的平台/浏览器运行。

当然可以自动化您描述的步骤。动态生成的 ID 并不好，但您应该能够使用其他属性（例如文本、元素类型等）来识别您想要自动化和测试的 HTML 对象。

（免责声明：我是 RIATest 团队成员）。

# java - 如果我想要可克隆的类，为什么我必须覆盖克隆？

> ID：15477262
> 
> 赞同：7
> 
> 时间：2013-03-18T12:49:53.370
> 
> 标签：java, object, clone

如果我想要可克隆的类，为什么我必须覆盖克隆？所有类都扩展自`Object`，那么为什么我必须重写 Object 克隆方法？为什么我不能只调用原始的 Object 克隆方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T12:52:35.377

这是 JDK 中的众多“设计缺陷”之一。

`Clonable`应该是一个`clone()`方法的接口，但它是一个[标记接口](http://en.m.wikipedia.org/wiki/Marker_interface_pattern)，并且`Object`有一个“什么都不做”的`clone()`方法实现......你留下了你的问题。

如果您有兴趣，[此答案](https://stackoverflow.com/a/7284322/256196)列出了 java 中的其他一些“错误”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:01:03.670

见这里： [http ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Cloneable.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Cloneable.html)

在未实现 Cloneable 接口的实例上调用 Object 的 clone 方法会导致抛出异常 CloneNotSupportedException。

另外我想这个讨论会对你有所帮助： [Confusion about cloneable interface and object.clone() in java](https://stackoverflow.com/questions/1067383/confusion-about-cloneable-interface-and-object-clone-in-java)

# c# - 用户是通过 UI 改变了值，还是被依赖属性改变了？

> ID：15477272
> 
> 赞同：2
> 
> 时间：2013-03-18T12:50:29.490
> 
> 标签：c#, .net, wpf

我有一个滑块，它的**value**属性与依赖属性相关联。我需要知道用户是否通过 GUI 更改了值。不幸的是，此滑块的值通常通过代码更改，并且在发生这种情况时会触发“Value_Changed”事件。

我知道解决这个问题的两种方法：

1.  创建一个布尔值并在每次更改值之前在代码中将其更改为 true，之后将其更改为 false，然后在 Value_Changed 事件中检查此布尔值。
2.  将 keypress、click 和 dragstop 事件连接到滑块。

我只是想知道是否有更好的方法来了解用户是否通过 UI 更改了值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:09:48.637

我会这样做：

```
public bool PositionModifiedByUser
{ /* implement IPropertyChanged if need to bind to this property */ }

// use this property from code
public double Position
{
    get { return m_position ; }
    set { SetPropertyValue ("PositionUI", ref m_position, value) ;
          PositionModifiedByUser = false ; }
}

// bind to this property from the UI
public double PositionUI
{
    get { return m_position ; }
    set { if (SetPropertyValue ("PositionUI", ref m_position, value))
          PositionModifiedByUser = true ; }
} 
```

SetPropertyValue 是一个帮助器，它检查是否相等并在值实际更改时触发属性更改通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:54:52.807

可能重复的问题。快速回答：

```
<Slider Thumb.DragCompleted="MySlider_DragCompleted" /> 
```

另见[这篇文章](https://stackoverflow.com/questions/723502/wpf-slider-with-an-event-that-triggers-after-a-user-drags)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:03:45.890

但是安东的答案更好+1

```
[BindableAttribute(true)]
public double Slider1Value
{
    get { return slider1Value; }
    set
    {
        // only bind to the UI so any call to here came from the UI
        if (slider1Value == value) return;
        // do what you were going to do in value changed here
        slider1Value = value;
    }
}

private void clickHalf(object sender, RoutedEventArgs e)
{
    // manipulate the private varible so set is not called
    slider1Value = slider1Value / 2;
    NotifyPropertyChanged("Slider1Value");
} 
```

# slide - 邮箱点击滑块

> ID：15477280
> 
> 赞同：0
> 
> 时间：2013-03-18T12:51:02.523
> 
> 标签：slide

如果您看过 dropbox 刚刚购买的邮箱应用程序，您可能已经看到如何使用半张和全张幻灯片删除和存档邮件 ( [http://www.actualidadiphone.com/wp-content/uploads/2013/02/Mailbox- 2.jpg](http://www.actualidadiphone.com/wp-content/uploads/2013/02/Mailbox-2.jpg) )

我想将类似的东西合并到一个网站中，有人可以给我一些关于我将如何做到这一点的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T15:01:37.923

看看这个[例子](http://demo.mobiscroll.com/listview/listviewworkorders)。应该在移动网站上工作。实现它也应该很容易。这是配置步骤的问题：

```
stages: [
    { percent: 25, color: 'crimson', icon: 'checkmark', action: function (li) {
        //do action1
    } },
    { percent: -25, color: 'olive', icon: 'clock', action: function (li) {
        //do action2
    } }
] 
```

# matlab - ROC 曲线究竟能告诉我们什么或可以推断出什么？

> ID：15477282
> 
> 赞同：2
> 
> 时间：2013-03-18T12:51:19.590
> 
> 标签：matlab, roc

我写了一些代码来运行基于线性判别分析的分类：

```
%% Construct a LDA classifier with selected features and ground truth information
LDAClassifierObject                     = ClassificationDiscriminant.fit(featureSelcted, groundTruthGroup, 'DiscrimType', 'linear');
LDAClassifierResubError                 = resubLoss(LDAClassifierObject); 
```

因此，我可以得到

```
Resubstitution Error of LDA (Training Error): 1.7391e-01
Resubstitution Accuracy of LDA: 82.61%
Confusion Matrix of LDA:
    14     3
     1     5 
```

然后我对 LDA 分类器进行 ROC 分析：

```
% Predict resubstitution response of LDA classifier
[LDALabel, LDAScore]                    = resubPredict(LDAClassifierObject);

% Fit probabilities for scores (the groundTruthGroup contains lables either 'Good' or 'Bad')
[FPR, TPR, Thr, AUC, OPTROCPT]      = perfcurve(groundTruthGroup(:,1), LDAScore(:,1), 'Good'); 
```

我有：

```
OPTROCPT =

    0.1250    0.8667 
```

因此，我们可以得到：

```
Accuracy of LDA after ROC analysis: 86.91%
Confusion Matrix of LDA after ROC analysis:
    13     1
     2     7 
```

我的问题是：

1.  ROC分析后我们得到了更好的准确率，当我们报告分类器的准确率时，我们应该使用哪个值？ROC 曲线究竟能告诉我们什么或可以推断出什么？我们可以说在 ROC 分析之后我们发现 LDA 分类器的准确性更高吗？

2.  为什么 ROC 可以为分类器产生更好的准确率，而原始的 ClassificationDiscriminant.fit 不能？

3.  我还对 LDA 分类器进行了交叉验证，例如

    cvLDAClassifier = crossval(LDAClassifierObject, 'leaveout', 'on');

那么如何获得交叉验证的 ROC 分析呢？' `resubPredict`' 方法似乎只接受'判别对象'作为输入，那么我们如何获得分数呢？

4.. `classperf`Matlab 的功能非常方便收集分类器的所有信息，比如

```
%% Get the performance of the classifier
LDAClassifierPerformace                 = classperf(groundTruthGroup, resubPredict(LDAClassifierObject)); 
```

但是，任何人都知道如何为交叉验证结果收集这些信息，例如准确性、FPR 等？

非常感谢。我真的很期待看到对上述问题的答复。

一个。

# asp.net - 子目录中 MVC 应用程序的资源路径？

> ID：15477284
> 
> 赞同：0
> 
> 时间：2013-03-18T12:51:25.223
> 
> 标签：asp.net, asp.net-mvc, azure, url-rewriting

我在 azure 中部署了 ASP.NET MVC 4 应用程序，比如说 myapp.cloudapp.net。还有基于 PHP 的信息网站（比如说 www.sample.com）。MVC 应用程序应该可以通过 www.sample.com/myapp 访问——这是通过在负载均衡器上重写来实现的。现在，有一个问题 - MVC 应用程序的资源（css、图像、脚本）路径不正确 - 它们指向根目录 (www.sample.com)，当然，它们不存在。

如何以某种干净且受支持的方式解决此问题？我不想创建目录“myapp”并将资源移到那里，如果有一些帮助或任何方法可以轻松地制作一个..

谢谢！

# magento - 如何在 Magento 中创建多商店模块

> ID：15477285
> 
> 赞同：1
> 
> 时间：2013-03-18T12:51:25.923
> 
> 标签：magento

我想创建我的自定义模块多商店兼容。我想根据配置范围从我的自定义数据库表中获取值。在将值添加到数据库表时，我已经指定了 scope_id 和范围，就像 Magento 在 core_config_data 表中所做的那样。现在我如何根据前端选定的网站从表中获取那些插入的值。

我有以下数据库值片段。

ID 值 scope_id 范围

1 测试 0 默认
2 测试 1 4 商店
3 测试 12 5 网站

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:07:36.457

为自己的需要重用 Magento 的配置加载并不容易。

您想要的是从默认 -> 网站 -> 商店（如果没有在那里覆盖）继承您的值。

Magento 将数据库配置转换为内部 XML 表示，`Mage_Core_Model_Resource_Config::loadToXml`并在其中执行合并和继承逻辑。

继承逻辑都在`loadToXml()`函数中 - 因此，如果您想采用相同的方法并为每个商店范围构建您的值，您可以实现类似的东西。

如果您只需要获取特定范围的一个值，则只需读取该商店的数据库行，如果在该商店所在的网站上找不到，如果没有找到默认值。

# java - 如何设置新的 Jenkins slave

> ID：15477290
> 
> 赞同：23
> 
> 时间：2013-03-18T12:51:37.177
> 
> 标签：java, jenkins, continuous-integration, virtual-server

我最近继承了一个由 Jenkins 驱动的 Java 项目，该项目的主要开发人员刚刚升级并退出。他已将 Jenkins WAR 部署到虚拟服务器上的 Tomcat 实例上，这就是所谓的“构建服务器”。

该构建服务器配置了一个从属服务器，用于构建和部署到`myserver.example.com`另一个虚拟服务器。上周末，系统人员停用了`myserver.example.com`虚拟机所在的物理服务器，为配置为部署到该从站的任何 Jenkins 作业产生了以下异常：

![在此处输入图像描述](../Images/05190a4c9905f1a66e21c66d24651875.png)

当我单击“**查看日志以获取更多详细信息**”链接时，我看到以下控制台输出：

```
[03/18/13 08:13:31] [SSH] Opening SSH connection to myserver.example.com:22.
java.io.IOException: There was a problem while connecting to myserver.example.com:22
    at com.trilead.ssh2.Connection.connect(Connection.java:755)
    at com.trilead.ssh2.Connection.connect(Connection.java:546)
    at hudson.plugins.sshslaves.SSHLauncher.openConnection(SSHLauncher.java:650)
    at hudson.plugins.sshslaves.SSHLauncher.launch(SSHLauncher.java:283)
    at hudson.slaves.SlaveComputer$1.call(SlaveComputer.java:200)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.net.NoRouteToHostException: No route to host
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:351)
    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:213)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:200)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
    at java.net.Socket.connect(Socket.java:529)
    at com.trilead.ssh2.transport.TransportManager.establishConnection(TransportManager.java:342)
    at com.trilead.ssh2.transport.TransportManager.initialize(TransportManager.java:450)
    at com.trilead.ssh2.Connection.connect(Connection.java:699)
... 9 more
[03/18/13 08:13:34] [SSH] Connection closed. 
```

这是有道理的，因为从属（`myserver.example.com`虚拟）处于离线状态。但是，以前没有真正的 Jenkins 经验，我不确定配置 Jenkins 主服务器以将这些作业构建/部署到新从属设备的正确步骤，以及如何设置新从属设备。例如，我是否需要在新的从属设备上安装任何东西，或者进行任何类型的设置/配置？提前致谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-18T13:07:21.340

在 Jenkins 中添加一个 slave 非常简单。基本上，如果您使用的是 unix 从站，则需要通过 SSH 访问机器。您还需要安装*Jenkins SSH Slaves 插件*。完成后，转到*Master上的***Manage Jenkins**选项，然后选择**Manage Nodes**。

 ***那么步骤是：

1.  单击**新建节点**
2.  选择**Dumb Slave**并给它一个名字（象征性的，不需要是域名，后面会出现）
3.  点击确定，进入配置页面
4.  使用您要在该节点上运行的同时进程数填写**执行**器数（通常不超过分配的 CPU 内核数）
5.  使用您希望 Jenkins 存储其工作文件的位置的完整路径填写**Remote FS Root**
6.  如果您在系统中使用标签，则可以选择添加**标签**（在许多情况下不需要，但您的项目可能要求节点具有某些标签才能在特定作业的执行器池中）
7.  **在启动方法**下选择**通过 SSH 在 Unix 机器上启动从代理**（如果尚未选择）
***   将完全限定的域名放在*Launch Method*行下的**Host**字段中**

 ***关于安装在从站上的工具有一些假设。如果您有专门的工具，您可能需要单独安装它们（或查看在执行前立即处理移动工具的插件）。但是，如果您的节点是基于一个模板构建的，该模板上有您所有的构建工具（可能是 java、ant 等），那么这就是您需要做的所有事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-04T22:03:35.530

我遇到了同样的问题，就我而言，这是因为我没有在 Ubuntu 上安装 ssh 服务器。******

# c# - 我可以使用 DataTable.Select() 方法进行简单的分页吗？

> ID：15477296
> 
> 赞同：4
> 
> 时间：2013-03-18T12:52:08.867
> 
> 标签：c#, performance, select, datatable, paging

[我使用 datacolumn.expression](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx)快速查看了这篇 MSDN 文章，但一无所获。看起来“选择表达式”语法不支持分页...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T12:57:03.877

使用 LINQ 可以最简单地创建简单的分页。

```
dataTable.AsEnumerable().Skip(100).Take(25); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T13:07:02.803

分页是您如何`SELECT`处理数据的一种机制。考虑以下测试数据：

```
ID         Name                 Date
1          Bob                  1/1/2013
2          Bill                 1/3/2013
3          Andy                 2/1/2013
... 
```

如果我想分页该数据，并且我不在乎它是如何排序的，我可以这样做，`ID`所以我可以这样做：

```
var rows = table.Select().Take(10);
_id = (int)rows.Last()["ID"]; 
```

这会给我前十行（**即**一页）。注意我还将最后一个存储`ID`到一个名为`_id`. 您如何存储或稍后恢复，这`ID`完全取决于您的程序。现在，如果我需要下一页，我可以这样做：

```
var rows = table.Select("ID > " + _id).Take(10);
_id = (int)rows.Last()["ID"]; 
```

那会给我下一页。但是如果我想按这些数据排序`Name`呢？这会稍微改变游戏。考虑以下代码：

```
var rows = table.Select("", "Name").Take(10);
_name = rows.Last()["Name"] as string; 
```

这会给我第一页数据，按`Name`. 但请注意，我将 的值存储`Name`在假定的类变量`_name`中以备后用。现在，当我想要下一页时，我需要执行以下操作：

```
var rows = table.Select("Name > '" + _name + "'", "Name").Take(10);
_name = rows.Last()["Name"] as string; 
```

这将使我进入下一页，但仍按`Name`. **当涉及到分页时，排序非常重要。**

***注意：***代码并不像我提出的那么简单。你不能仅仅`Take(10)`因为可能没有`10`采取。此外，您可能无法仅**存储**最后一个`ID`或`Name`，您可能每次都必须从某个地方恢复它。最后，您可能需要支持多重排序，它按多列排序，因此在提供排序时也要记住这一点。

***最后注意：*****利用原始 SQL**进行分页比上述代码要好得多- 我只提供该代码是因为您询问`Select`了`DataTable`. 最好简单地构造正确的 SQL 语句，将其发送到服务器，然后只显示结果。

# asp.net - 如何自动调整 div 标签以环绕其中的控件？

> ID：15477298
> 
> 赞同：0
> 
> 时间：2013-03-18T12:52:19.220
> 
> 标签：asp.net, css

我有一个 div 标签，其中有其他控件。我通过css给了div一个边框。我希望 div 标签将自己包裹在控件周围并自动调整自己的大小。

```
 .divwrap
    {           
    width: 60%;
    height: 60%; 
    border: 1px solid #66CCFF; 
    vertical-align:middle; 
    margin-left:150px;
    margin-right:300px;
    } 
```

现在在上面的代码中我有固定的边距。因此，如果我对另一个页面上的 div 标签使用相同的样式，这将是一个问题，因为另一个页面上的控件（在 div 内）可能或多或少没有。我希望 div 标签像橡皮筋一样，当包裹在某些东西上时可以自动调整大小（在这种情况下，是一个带有控件的 html 表格）。这是可以实现的吗？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:04:43.887

如果你想做一个包装器，请记住这些事情

*   尽量不要给它一个静态维度。
*   不要给出任何宽度和高度，因为它会比应用它的内容大一点
*   给出百分比值边距和填充：

尝试这个：

```
.divwrap
{
  padding:3%;
  display:inline-block;
  margin:3%;
  border: 1px solid #66CCFF; 
  vertical-align:middle; 
  width:auto;
  position:relative;
  box-shadow: 10px 10px 5px #888888;
} 
```

看到这个[小提琴](http://jsfiddle.net/manishmishra256/y9ej7/2/)。

所以现在，无论子 div 的宽度和高度是多少，这个 div 将始终环绕它。

# php - CSS弹出登录表单和PHP登录脚本

> ID：15477300
> 
> 赞同：-1
> 
> 时间：2013-03-18T12:52:20.833
> 
> 标签：php, html, css

我有一个弹出登录表单的 CSS 弹出窗口。当我尝试登录时，它只是重新加载页面并再次出现弹出窗口。

这是打开弹出窗口的链接

```
<a href="#login_form" class="btn signInBtn">Sign In</a> 
```

这是我的弹出登录表单的 HTML。

```
<a href="#x" class="overlay" id="login_form"></a>    
    <div class="popup">
        <h2 class="modal-header">Sign In</h2>
        <div class="modal-body">
            <form class="signIn-form">
                <div class="errorMessage alert alert-error" id="errorMsg">
                    <h4>Whoops</h4>
                    <p>
                        <?php echo $errorMsg; ?>
                    </p>
                </div>
                <fieldset class="l-formMain">
                    <ul>
                        <li>
                            <label class="applyForm-label" for="email">Email</label>
                            <input class="applyForm-input required" type="email" id="login_email" placeholder="name@example.com" tabindex="1" />
                        </li>
                        <li>
                            <label class="applyForm-label" for="password">Password</label>
                            <input class="applyForm-input required" type="password" id="login_password" tabindex="2" />
                            <span class="forgotPassLi">
                                <a href="#forgotpass" class="v-secondary" style="position:relative; left:-150px;">Forgot your Password?</a>
                            </span>
                        </li>
                    </ul>
                </fieldset>
                <div class="modal-buttonHolder">
                    <input type="submit" class="btn btn-large" id="login" value="Sign In" tabindex="3" />
                </div>                    
            </form>
        </div> 
        <a href="#close" class="modal-closeBtn">×</a>       
    </div> 
```

这是我的PHP：

```
if(isset($_POST['login'])){
    $login_email = $_POST['login_email'];
    $login_password = $_POST['login_password'];

    // error handling conditional checks go here
    if ((!$login_email) || (!$login_password)) { 
    $errorMsg = 'Please fill in both fields';
    } else { // Error handling is complete so process the info if no errors
    include 'scripts/connect_to_mysql.php'; // Connect to the database
    $email = mysql_real_escape_string($login_email); // After we connect, we secure the string before adding to query       
    $pass = md5($login_password); // Add MD5 Hash to the password variable they supplied after filtering it     
    // Make the SQL query
    $sql = "SELECT * FROM members WHERE email='$email' AND password='$password' AND email_activated='1'";
           $result = mysql_query($sql); 
    if($result){
        $login_check = mysql_num_rows($result);
    }   
    // If login check number is greater than 0 (meaning they do exist and are activated)
    if($login_check > 0){ 
            while($row = mysql_fetch_array($result)){

                $id = $row["ID"];
                $_SESSION['ID'] = $id;
                // Create the idx session var
                $_SESSION['idx'] = base64_encode("xxxxxxxxxxxxxxxxxxx$id");
                // Create session var for their username
                $email = $row["email"];
                $_SESSION['email'] = $email;
                $_SESSION['userId'] = $row["ID"];

                mysql_query("UPDATE members SET last_log_date=now() WHERE ID='$id' LIMIT 1");

            } // close while
            // All good they are logged in, send them to homepage then exit script
            if (isset($_SESSION["email"]) || count($_SESSION["email"]) > 0) {  
                header("Location: http://localhost/dashboard.php");
            }               
    } else { // Run this code if login_check is equal to 0 meaning they do not exist
        $errorMsg = "Either the email or password (or both) are incorrect. Make sure that you've typed them correctly and try again";
    }
    }// Close else after error checks
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:55:33.907

您的表格没有发布到任何地方。所以默认情况下它会转到当前页面。

尝试向表单添加操作和方法属性：

```
<form method="post" action="http://url.of.PHP.page/containing/login/code"> 
```

# java - Android - JSONException 没有价值

> ID：15477304
> 
> 赞同：15
> 
> 时间：2013-03-18T12:52:27.893
> 
> 标签：java, android, json, login, jsonexception

我知道这里发布了几个具有相同主题和错误的问题，但没有一个表明与我的问题相同，所以我决定在这里发布我的问题，希望有人能帮助我指出原因。所以我正在尝试在我的应用程序中实现登录功能，代码如下：

```
if (tag.equalsIgnoreCase(login_tag)){
                // check for login response
                try {
                    if (json.getString(KEY_SUCCESS) != null) {
                        String res = json.getString(KEY_SUCCESS);
                        if(Integer.parseInt(res) == 1){
                            // user successfully logged in
                            // Store user details in SQLite Database
                            DatabaseHandler db = new DatabaseHandler(mContext);
                            JSONObject json_user = json.getJSONObject("user");

                            // Clear all previous data in database
                            logoutUser(mContext);
                            Toast.makeText(mContext, json.toString(3), Toast.LENGTH_LONG).show();
                            db.addUser(json_user.getString(KEY_EMAIL), json_user.getString(KEY_NAME), json.getString(KEY_UID), json.getString(KEY_AVA), json_user.getString(KEY_BDAY), json_user.getString(KEY_COUNTRY), json_user.getString(KEY_PREF), json_user.getString(KEY_SPEND));  

                            // Launch Dashboard Screen
                            Intent dashboard = new Intent(mContext, DashboardActivity.class);

                            // Close all views before launching Dashboard
                            dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                            mContext.startActivity(dashboard);

                            // Close Login Screen
                            ((Activity) mContext).finish();
                        }
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            } 
```

这是我登录时得到的 JSON 响应：

```
{
    "tag": "login",
    "success": 1,
    "error": 0,
    "uid": "5123",
    "user": {
        "email": "abcxyz@gmail.com",
        "name": "abc",
        "avatar": "avatars/img_hzsxda_2013-03-18-11-03-33.jpg",
        "bday": "1991-02-01",
        "country": "Australia",
        "preferences": "none",
        "spending": "none"
    }
} 
```

所以显然有一个值`avatar`，但我仍然在我的 logcat 中收到这个警告：

```
03-18 12:06:36.972: W/System.err(24574): org.json.JSONException: No value for avatar 
```

由于没有获得价值头像，我无法完成`addUser`，因此登录失败。请帮我找出错误以及如何解决它。谢谢你。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-18T12:55:28.923

您在`avatar`这里使用了错误的对象来获取价值`json.getString(KEY_AVA)`。应该是`json_user.getString(KEY_AVA)`。

此外，如果值不存在，您可以使用`optString`而不是`getString`只返回，而不是抛出异常。`null`

# javascript - 为什么使用onclick时我的div没有出现

> ID：15477308
> 
> 赞同：0
> 
> 时间：2013-03-18T12:52:38.233
> 
> 标签：javascript, html, css

当我点击一个按钮时，我试图让一个 div 出现。我希望出现的 div 是 .photo1。我只为小提琴使用了一个带有背景颜色的块，但实际上它将是一个在点击时可见的图像。目前，点击没有任何反应。

非常感谢您的帮助。

我的代码可以在[这里的 jsfiddle 找到](http://jsfiddle.net/jmcy9999/WFuRX/)

html是：

```
<body>
    <ul class="menu">
        <li>
            <a href="#" onclick="showStuff('photo1')";> show the block </a>
       </li>
    </menu>
    <span div id="photo1" style="display: none;">
        <brandinfobox class="photo1"> </brandinfobox>
    </span>
</body> 
```

javascript是：

```
function showStuff(id) {
    document.getElementById(id).style.display = 'block';
} 
```

CSS是：

```
.menu {
    position:absolute;
    background-color: orange;
    background-size: 40, 130px;
    font-size: 14px;
    left: 20px;
    text-align: center;
    line-height: 40px;
}
brandinfobox {
    position: absolute;
    height: 384px;
    width:620px;
}
.photo1 {
    position:absolute;
    top: 100px;
    left: 100px;;
    background-color:black;
    width:200px;
    height: 200px;
    background-size: contain;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:05:56.613

你的代码非常混乱，我建议你学习 HTML 标签、CSS 类和 ID——特别是你应该在哪里使用它们。

但是，它不起作用的原因是 JavaScript 函数在页面加载时被限定范围（只能访问）。将它放在 head 或 body 标记中（在 JSFiddle 中，通过左侧的菜单）将意味着浏览器可以找到该`showStuff`功能。

我试图在以下 JSFiddle 中整理您对类和标签的使用：http: [//jsfiddle.net/jaypeagi/WFuRX/2/](http://jsfiddle.net/jaypeagi/WFuRX/2/)

# javascript - jQuery 代码在 IE9 中工作但在 FireFox 中失败？

> ID：15477311
> 
> 赞同：3
> 
> 时间：2013-03-18T12:52:41.910
> 
> 标签：javascript, jquery, jquery-ui, firefox

我编写了一个在 IE9 中工作但在 FireFox 中失败的 jQuery 代码。

该代码使用 jQuery UI 创建一个 jQuery 对话框，其中包含由 PHP 页面生成的一组项目。用户将进行选择，并且应使用 JS 函数将所选项目添加到 div 容器中。

下面是我的代码：

```
$(function() {
        $("#add-item-dialog").dialog({
            autoOpen: false,
                height: 600,
                width: 800,
                modal: true,

            close: function() {
                $( this ).dialog( "close" )
                    return false;
            }

        });
        $("#add-item")
            .button()
            .click(function() {
            $( "#add-item-dialog" ).load('add_item.php').dialog('open');
            });

        });
        function addItem(message){
            alert(message);
            $('#item_list').append(message + '<br>');
            $("#add-item-dialog").dialog("close")
                    return false;
        } 
```

函数 addItem 的按钮是用 PHP 动态创建的，如下所示：

```
<input type="button" name="Add Item" value="'.$item_name.'" onClick="addItem(this.value)"> 
```

预期的输出是带有项目名称的警报...然后项目名称附加到`item_list`div 标签。

IE9 会将文本附加到 div，然而，FireFox 只会显示警报然后什么都不做。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:19:57.000

尝试卸载fire bug，这似乎是在做一些研究时出现的问题。

**已编辑**

尝试这个：

```
function addItem(message){
            var tmp_msg = message;
            alert(message);
            $('#item_list').append(tmp_msg + '<br>');
            $("#add-item-dialog").dialog("close")
                    return false;
        } 
```

也许它`.append()`调用的位置有问题，`this.value`而不仅仅是获取实际值。

正如您之前写的那样`alert()`确实有效，所以它是`.append()`不起作用的函数，我认为您需要从中获取实际值`this.value`，然后将其传递给`.append()`.

让我知道事情的后续。

# mysql - 从 VB.NET 查询 MySQL 表

> ID：15477312
> 
> 赞同：-3
> 
> 时间：2013-03-18T12:52:46.397
> 
> 标签：mysql, vb.net, ado.net

我在 vb.net 中制作了我的软件并将其与 MySQL 数据库连接，并使用 phpmyadmin 我创建了一个表更新和一个列版本。

在版本栏中，我插入了 version.txt 的链接

我希望我的更新库 updateVB 将从该表的数据库中获取 version.txt 的链接....

```
Updatevb1.checkforupdate("Text file where your version is stated (URL)", 
                         "Current Version", 
                         "URL of executable updater (SFX Archive), 
                         "Username for FTP", "Password for FTP", 
                          showUI As Boolean) 
```

我想获取所有这些信息，例如：文本文件版本 URL、当前版本、可执行更新的 URL 等。

如何才能做到这一点？

```
conn = New MySqlConnection(ServerString)
    Try
        conn.Open()
        Dim sqlquery As String = "SELECT FROM updater"
        Dim data As MySqlDataReader
        Dim adapter As New MySqlDataAdapter
        Dim command As New MySqlCommand
        command.CommandText = sqlquery
        command.Connection = conn
        adapter.SelectCommand = command
        data = command.ExecuteReader
        While data.Read()
            If data.HasRows() Then
                Dim vlink As String = data(1).ToString
                Dim dlink As String = data(2).ToString
                Dim ftpu As String = data(3).ToString
                Dim ftpp As String = data(4).ToString
            End If
        End While
        UpdateVB1.checkforupdate("vlink", "0.0.9", "dlink", "ftpu", "ftpp", showUI:=True)
        data.Close()
        conn.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:44:55.583

第一个问题是您的 SQL 语句没有指定任何列。

提供您要使用的列的列表。

```
Dim sqlquery As String = "SELECT vlink, dlink, ftpu, dtpp FROM updater" 
```

# google-maps - 向 google API 自动填充位置表单添加额外的输入元素

> ID：15477313
> 
> 赞同：1
> 
> 时间：2013-03-18T12:52:50.350
> 
> 标签：google-maps

我正在创建一个表单来接收有关事件的信息。我正在使用 google API 自动完成位置来接收用户输入的事件位置。我还想在同一张表格中包含以下信息：日期、时间、事件类型等。我无法将 google API 元素之外的所有元素的数据发布到我的 php 文件中。我是否可以这样做，或者我需要制作两个独立的表格并首先获取位置，然后是我的所有其他信息。我感谢您的帮助。

# python - 与 python 代码相比，库 itertools 的性能

> ID：15477314
> 
> 赞同：5
> 
> 时间：2013-03-18T12:52:51.247
> 
> 标签：python, performance, itertools, cprofile

作为对我的问题的回答[找到两个列表相同的基于 1 的位置，](https://stackoverflow.com/questions/15457784/find-the-1-based-position-to-which-two-lists-are-the-same)我得到了使用 C 库 itertools 来加快速度的提示。

为了验证我使用 cProfile 编写了以下测试：

```
from itertools import takewhile, izip

def match_iter(self, other):
    return sum(1 for x in takewhile(lambda x: x[0] == x[1],
                                        izip(self, other)))

def match_loop(self, other):
    element = -1
    for element in range(min(len(self), len(other))):
        if self[element] != other[element]:
            element -= 1
            break
    return element +1

def test():
    a = [0, 1, 2, 3, 4]
    b = [0, 1, 2, 3, 4, 0]

    print("match_loop a=%s, b=%s, result=%s" % (a, b, match_loop(a, b)))
    print("match_iter a=%s, b=%s, result=%s" % (a, b, match_iter(a, b)))

    i = 10000
    while i > 0:
        i -= 1
        match_loop(a, b)
        match_iter(a, b)

def profile_test():
    import cProfile
    cProfile.run('test()')

if __name__ == '__main__':
    profile_test() 
```

函数 match_iter() 正在使用 itertools，而函数 match_loop() 是我在使用普通 python 之前实现的。

函数 test() 定义了两个列表，打印带有两个函数结果的列表以验证它是否正常工作。两个结果都具有预期值 5，即列表的长度相等。然后它在这两个函数上循环 10,000 次。

最后，使用 profile_test() 分析整个事情。

我学到的是 izip 没有在 python3 的 itertools 中实现，至少在我使用的 debian wheezy whitch 中没有实现。所以我用python2.7运行了测试

结果如下：

```
python2.7 match_test.py
match_loop a=[0, 1, 2, 3, 4], b=[0, 1, 2, 3, 4, 0], result=5
match_iter a=[0, 1, 2, 3, 4], b=[0, 1, 2, 3, 4, 0], result=5
         180021 function calls in 0.636 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    0.636    0.636 <string>:1(<module>)
        1    0.039    0.039    0.636    0.636 match_test.py:15(test)
    10001    0.048    0.000    0.434    0.000 match_test.py:3(match_iter)
    60006    0.188    0.000    0.275    0.000 match_test.py:4(<genexpr>)
    50005    0.087    0.000    0.087    0.000 match_test.py:4(<lambda>)
    10001    0.099    0.000    0.162    0.000 match_test.py:7(match_loop)
    20002    0.028    0.000    0.028    0.000 {len}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
    10001    0.018    0.000    0.018    0.000 {min}
    10001    0.018    0.000    0.018    0.000 {range}
    10001    0.111    0.000    0.387    0.000 {sum} 
```

让我想知道的是，查看 cumtime 值，我的普通 python 版本对于 10,000 个循环的值为 0.162 秒，而 match_iter 版本需要 0.434 秒。

一方面，python 非常快，很棒，所以我不必担心。但这是否正确，C 库完成工作所需的时间是简单 python 代码的两倍多？还是我犯了一个致命的错误？

为了验证我也用 python2.6 运行了测试，这似乎更快，但循环和 itertools 之间的区别相同。

谁有经验并愿意提供帮助？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T13:03:48.673

*   首先，对实际计时的赞誉。
*   其次，可读性通常比编写快速代码更重要。如果您的代码运行速度提高了 3 倍，但您每 3 周花费 2 周来调试它，那么这不值得您花时间。
*   第三，您还可以使用`timeit`小段代码来计时。我发现这种方法比使用`profile`. （`profile`虽然有利于发现瓶颈）。

* * *

`itertools`一般来说，相当快。但是，特别是在这种情况下，您`takewhile`会减慢速度，因为 itertools 需要为沿途的每个元素调用一个函数。python 中的每个函数调用都有与之相关的合理数量的开销，因此可能会减慢您的速度（首先还有创建 lambda 函数的成本）。请注意，`sum`使用生成器表达式也会增加一些开销。但最终，在这种情况下，基本循环似乎总是获胜。

```
from itertools import takewhile, izip

def match_iter(self, other):
    return sum(1 for x in takewhile(lambda x: x[0] == x[1],
                                        izip(self, other)))

def match_loop(self, other):
    cmp = lambda x1,x2: x1 == x2

    for element in range(min(len(self), len(other))):
        if self[element] == other[element]:
            element += 1
        else:
            break

    return element

def match_loop_lambda(self, other):
    cmp = lambda x1,x2: x1 == x2

    for element in range(min(len(self), len(other))):
        if cmp(self[element],other[element]):
            element += 1
        else:
            break

    return element

def match_iter_nosum(self,other):
    element = 0
    for _ in takewhile(lambda x: x[0] == x[1],
                       izip(self, other)):
        element += 1
    return element

def match_iter_izip(self,other):
    element = 0
    for x1,x2 in izip(self,other):
        if x1 == x2:
            element += 1
        else:
            break
    return element

a = [0, 1, 2, 3, 4]
b = [0, 1, 2, 3, 4, 0]

import timeit

print timeit.timeit('match_iter(a,b)','from __main__ import a,b,match_iter')
print timeit.timeit('match_loop(a,b)','from __main__ import a,b,match_loop')
print timeit.timeit('match_loop_lambda(a,b)','from __main__ import a,b,match_loop_lambda')
print timeit.timeit('match_iter_nosum(a,b)','from __main__ import a,b,match_iter_nosum')
print timeit.timeit('match_iter_izip(a,b)','from __main__ import a,b,match_iter_izip') 
```

但是请注意，最快的版本是循环+itertools 的混合体。这个（显式）循环`izip`也恰好更容易阅读（在我看来）。因此，我们可以由此得出结论，这`takewhile`是缓慢的部分，不一定`itertools`是一般的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T13:00:21.193

我想这里的问题是您的测试列表很小 - 这意味着任何差异都可能很小，并且创建迭代器的成本超过了它们带来的收益。

在较大的测试中（性能可能更重要），使用的版本`sum()`可能会优于其他版本。

此外，还有样式问题 - 手动版本更长，并且依赖于按索引迭代，因此也不太灵活。

我认为最易读的解决方案是这样的：

```
def while_equal(seq, other):
    for this, that in zip(seq, other):
        if this != that:
            return
        yield this

def match(seq, other):
    return sum(1 for _ in while_equal(seq, other)) 
```

有趣的是，在我的系统上有一个稍微修改过的版本：

```
def while_equal(seq, other):
    for this, that in zip(seq, other):
        if this != that:
            return
        yield 1

def match(seq, other):
    return sum(while_equal(seq, other)) 
```

比纯循环版本执行得更好：

```
a = [0, 1, 2, 3, 4]
b = [0, 1, 2, 3, 4, 0]

import timeit

print(timeit.timeit('match_loop(a,b)', 'from __main__ import a, b, match_loop'))
print(timeit.timeit('match(a,b)', 'from __main__ import match, a, b')) 
```

给予：

```
1.3171300539979711
1.291257290984504 
```

也就是说，如果我们将纯循环版本改进为更加 Pythonic：

```
def match_loop(seq, other):
    count = 0
    for this, that in zip(seq, other):
        if this != that:
            return count
        count += 1
    return count 
```

这次（使用与上述相同的方法）`0.8548871780512854`对我来说，比任何其他方法都快得多，同时仍然可读。这可能是由于原始版本中的索引循环，这通常非常慢。然而，我会选择这篇文章的第一个版本，因为我觉得它是最易读的。

# android - 为精灵添加动态路径

> ID：15477317
> 
> 赞同：0
> 
> 时间：2013-03-18T12:52:54.813
> 
> 标签：android, andengine

我必须沿着绘制 onTouch 的路径移动精灵。为此，我正在使用 Path 和 PathModifier

```
case MotionEvent.ACTION_UP:

        int historySize = pSceneTouchEvent.getMotionEvent().getHistorySize();
        pointX = new float[historySize];
        pointY = new float[historySize];

        for (int i = 1; i < historySize; i++) {

            pointX[i] = pSceneTouchEvent.getMotionEvent().getHistoricalX(i);
            pointY[i] = pSceneTouchEvent.getMotionEvent().getHistoricalY(i);

        }
        path = new path(pointX,pointY);
        PathModifier pathModifier = new PathModifier(2.5f, path);
        pathModifier.setRemoveWhenFinished(true);
        sprite1.clearEntityModifiers();
        sprite1.registerEntityModifier(pathModifier);

        break; 
```

它给了我错误，因为路径至少需要 2 个路点。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:16:31.963

通常这不应该发生，因为运动事件通常不仅仅是一个坐标。也许您应该测试 是否`historySize`真的大于 2。此外，您可以添加精灵的起始坐标，否则精灵会“跳”向第一个接触点（但这不是您的问题）。

这实际上并没有什么不同——只是另一种可能性：

```
path= new Path(historySize);
for (int i = 0; i < historySize; i++) {
      float x = pSceneTouchEvent.getMotionEvent().getHistoricalX(i);
      float y = pSceneTouchEvent.getMotionEvent().getHistoricalY(i);
      path.to(x,y);
} 
```

另外我注意到你开始你的for循环，`int i=1`所以如果你`historySize`是2，循环只迭代一次！

**编辑**

**我找不到问题，但我找到了解决方案：**
不要使用，而是在发生时随时`motionEvent history`保存 的坐标：`toucheEvent``touchEvent`

```
ArrayList<Float> xCoordinates; // this is where you store all x coordinates of the touchEvents
ArrayList<Float> yCoordinates; // and here will be the y coordinates.

onSceneTouchEvent(TouchEvent sceneTouchEvent){
    switch(sceneTouchEvent.getAction()){
        case (TouchEvent.ACTION_DOWN):{  
            // init the list every time a new touchDown is registered
            xCoordinates = new ArrayList<Float>();   
            yCoordinates = new ArrayList<Float>();               
            break;
        }
        case (TouchEvent.ACTION_MOVE): {
            // while moving, store all touch points in the lists
            xCoordinates.add(sceneTouchEvent.getX());  
            yCoordinates.add(sceneTouchEvent.getY());
            break;
        }
        case (TouchEvent.ACTION_UP): {
            // when the event is finished, create the path and make the sprite move
            // instead of the history size use the size of your own lists

            Path path = new Path(xCoordinates.size());  
            for (int i = 0; i < xCoordinates.size(); i++) {
                path.to(xCoordinates.get(i), yCoordinates.get(i));  // add the coordinates to the path one by one
            }

            // do the rest and make the sprite move
            PathModifier pathModifier = new PathModifier(2.5f, path);
            pathModifier.setAutoUnregisterWhenFinished(true);
            sprite1.clearEntityModifiers();
            sprite1.registerEntityModifier(pathModifier);
            break;
        }
    } 
```

我在我的手机上测试了这个（它不在调试模式下运行），它工作正常。但是为了确保不会抛出异常，您应该始终测试 xCoordinates 列表是否大于 1。尽管它很可能是。

好吧，我希望它至少有助于*解决*您最初的问题。我注意到某些方法的名称不同（例如 setAutoUnregisterWhenFinished(true);） 我猜您使用的是 AndEngine **GLES1**？我使用**GLES2**，所以当一个方法在我的代码中有另一个名称时，不要担心，只需在**GLES1**中查找等效名称（我没有重命名它们，因为代码按原样工作）

*   克里斯托夫

# c++ - 如何初始化哪个类型的静态字段是私有嵌套类？

> ID：15477323
> 
> 赞同：4
> 
> 时间：2013-03-18T12:53:13.420
> 
> 标签：c++, static, initialization, private, friend

*外部.hpp*：

```
class Outer {
  class Inner {
    Inner() {}
  };
  static Inner inner;
} 
```

*Outer.cpp*（在顶层，例如不在函数体内）：

```
Outer::Inner Outer::inner; 
```

我收到以下错误：

```
error C2248: 'Outer::Inner::inner' : cannot access private member declared in class 'Outer::Inner' 
```

我没有使用完全符合 C++11 (Visual Studio 2010) 的编译器，因此无法在声明时定义该字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T12:53:13.420

诀窍是交`Outer`朋友`Inner`：

*外部.hpp*：

```
class Outer {
  class Inner {
    Inner() {}
    friend Outer;
  }
  static Inner inner;
} 
```

现在，即使在实现文件中`Outer`也可以看到`Inner`'s 的类型好像不是私有的，因此*Outer.cpp*中的初始化成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:52:26.290

不，你不需要加好友。馊主意。

**类 Inner**是**类 Outer**的私有成员。这没什么不好。

问题取决于您放置定义的位置。

```
Outer::Inner Outer::inner; // is fine in the global space.
int main()
{
    Outer::Inner Outer::inner; // Fails because it's used as a local variable to function main.
} 
```

# html - CSS3 动画和过渡 - 浏览器是否更擅长为图形背景或 DOM 元素设置动画？

> ID：15477326
> 
> 赞同：5
> 
> 时间：2013-03-18T12:53:23.343
> 
> 标签：html, css, css-transitions

我正在开发一个网络应用程序；它的设计要求之一是几个大型 CSS3 动画。

具体来说 - 它有一个大`<div>`的，将在屏幕上转换以响应用户输入。

由于应用程序的设计方式，其“内容”`<div>`可以实现为设置为`<div>`背景的大型静态图形（例如，.jpg 或 .png）。

或者，内容也可以使用标准 HTML 来实现。（内容布局本身“有点”棘手——它需要几个浮动或定位的嵌套 div 元素和跨度，但没有什么疯狂的。）

我的问题是 - 哪个选项可能会产生最好（最流畅）的动画？

（我显然可以自己测试，但通常很难判断动画的流畅度，尤其是在各种设备上的十几种不同浏览器中。我也意识到还有其他考虑因素 - 例如，维护。但在这种情况下，我完全专注于动画性能。）

我想知道浏览器是否通常更擅长动画/渲染具有图形背景的简单 DOM 元素***，***或者更复杂的 DOM 元素（有很多子元素）而***没有***图形元素？

另外 - 还有其他指导方针吗？例如，

*   浏览器是否比其他类型的图形元素更好地动画化某些类型的图形元素？（例如，.png 与 .jpg）
*   `position:absolute`当子元素有、子元素浮动或子元素的位置由常规文档流确定时，浏览器会更好地为元素设置动画吗？
*   嵌套元素上的不透明度、阴影或 3D 变换之类的东西是否会对父元素的动画产生不利影响？
*   动画性能是否会随着元素的复杂性而降低？例如，具有十几层嵌套 DOM 元素的元素的动画效果是否不如仅具有文本节点的简单元素流畅？

我对这些事情有一种直觉（深度嵌套的 DOM 元素的动画效果不如简单元素），但我的直觉常常是错误的。所以，我想知道是否有关于浏览器或多或少工作的“规则”。

当具有大量子元素的大型元素被动画化时，我还应该考虑什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:24:19.227

您的答案将取决于每个实现使用的特定渲染策略，但如果您可以使用 WebKit 的策略作为“通用”策略，那么您的所有答案都在本文档中：

[http://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome](http://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome)

![Webkit 树结构](../Images/d9466352cc5ee2d021f28ebcc691bbbc.png)

首先创建 DOM 树的“RenderObject”克隆

在此之后，遍历树并且每个 RenderObject 要么合并到其最近祖先的 RenderLayer 中，要么合并到新的 RenderLayer 中，如果其中一个关于 RenderObject 是真的：

*   它是页面的根对象
*   它具有明确的 CSS 位置属性（相对、绝对或变换）
*   它是透明的
*   有溢出、alpha 蒙版或反射
*   有一个 CSS 过滤器
*   对应于`<canvas>`具有 3D (WebGL) 上下文或加速 2D 上下文的元素
*   对应一个`<video>`元素

在此之后，遍历树，并且每个 RenderLayer 要么合并到其最近祖先的 GraphicsLayer 中，要么合并到新的 GraphicsLayer（如果其中一个关于 RenderLayer）：

*   图层具有 3D 或透视变换 CSS 属性
*   层由`<video>`使用加速视频解码的元素使用
*   层由`<canvas>`具有 3D 上下文或加速 2D 上下文的元素使用
*   层用于复合插件
*   图层的不透明度使用 CSS 动画或使用动画 webkit 变换
*   图层使用加速 CSS 过滤器
*   层有一个后代，它是一个合成层
*   图层有一个具有较低 z-index 的同级，该同级具有一个合成图层（换句话说，该图层呈现在合成图层的顶部）

因此，知道这通常是如何工作的并在这里进行预感，我不得不说首先最小化导致创建新 GraphicsLayer 的事物，然后最小化导致创建新 RenderLayer 的事物。只要额外的节点不会导致新的 RenderLayers 或 GraphicsLayers 的创建，您可能可以摆脱大量的 DOM 节点嵌套或您所说的任何内容。

还关于您关于发送 DOM 元素向量的位图图像而不是向量本身的想法。我真的怀疑它会更快。对我来说，PNG 或 JPEG 以某种方式比向量更有效地表示 DOM 节点，这对我来说没有任何意义。但是，嘿，我没有编写 Webkit 代码，所以我想真正知道的唯一方法是分析它。

# python - 如果一个字符串就在另一个字符串之前，则否定匹配

> ID：15477330
> 
> 赞同：0
> 
> 时间：2013-03-18T12:53:32.333
> 
> 标签：python, regex, regex-negation

我正在努力让一个正则表达式在它与某个模式匹配的地方工作，只要不是另一个人继续。例如，

```
Accessory for MyProduct01 <<< Should be classified as an accessory
MyProduct01 with accessory << Should be classified as a product 
```

所以我需要在我的“附件”正则表达式中添加一些东西，比如“匹配“附件”，只要前面的单词不是“与”。

我见过一些例子，人们使用否定前瞻来查找单词是否在字符串中的任何位置，但我想更具体地了解要否定的单词的位置。就像是：

```
(?!with\s)accessory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:11:10.993

只需在您的正则表达式中使用负面的后视：

```
(?<!with\s)accessory 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:00:26.743

由于 Python 不支持无限制的后视，我认为您将不得不使用类似于您当前使用的前瞻，但稍微更改原始模式。

```
^(?!\bwith\b.*\baccessory\b)(?=.*\b(accessory)\b) 
```

在这里，否定前瞻用于确保“附件”不会出现在“与”一词之后。然后，正向前瞻用于确保单词“accessory”出现在字符串中，如果出于某种原因需要捕获它，则使用组捕获。

根据我上面写的方式，你想使用`search`方法而不是`match`方法。为了使用`match`，它要求整个搜索字符串与模式匹配，您需要在模式中添加更多内容：

```
^(?!\bwith\b.*\baccessory\b)(?=.*\b(accessory)\b).*$ 
```

# sql-server-2008 - SQL Server 2008 中的内置表有哪些

> ID：15477335
> 
> 赞同：-4
> 
> 时间：2013-03-18T12:53:56.993
> 
> 标签：sql-server-2008

SQL Server 2008 中是否有任何内置表？如果是，请帮我列出 SQL Server 2008 中的内置表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:56:11.940

对您的数据库实例运行以下 SQL 脚本，您将看到它们 :)

```
SELECT * from sys.objects
WHERE type = 's' 
```

或者，如果你*太懒了*。这是我之前做的一个：

> sysrscols
> sysrowsets
> sysallocunits
> sysfiles1
> syspriorities
> sysfgfrag
> sysphfg
> sysprufiles
> sysftinds
> sysowners
> sysprivs
> sysschobjs
> syscolpars
> sysnsobjs
> syscerts
> sysxprops
> sysscalartypes
> systypedsubobjs
> sysidxstats
> sysiscols
> sysbinobjs
> sysaudacts
> sysobjvalues
> sysclsobjs
> sysrowsetrefs
> sysremsvcbinds
> sysxmitqueue
> sysrts
> sysconvgroup
> sysdesend
> sysdercv
> syssingleobjrefs
> sysmultiobjrefs
> sysguidrefs
> syscompfragments
> sysftstops
> sysqnames
> sysxmlcomponent
> sysxmlfacet
> sysxmlplacement
> sysobjkeycrypts
> sysasymkeys
> syssqlguides
> sysbinsubobjs
> syssoftobjrefs

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T12:57:51.237

要列出系统中所有数据库的所有表，请运行以下脚本

```
sp_msforeachdb 'select "?" AS db, * from [?].sys.tables' 
```

# java - 如何在 Spring data neo4j 中更新节点或节点实体？

> ID：15477341
> 
> 赞同：4
> 
> 时间：2013-03-18T12:54:27.433
> 
> 标签：java, neo4j, spring-data-neo4j

在 Spring data *neo44*中，我们刚刚`repository.save(entity)`，但例如当我的 UserEntity 的属性（电子邮件）发生变化时，我不知道如何更新它。

我也尝试使用*neo4j*模板，但使用现有节点 ID 保存实体导致以下回滚。

```
org.springframework.dao.InvalidDataAccessApiUsageException: New value must be a Set, was: class java.util.ArrayList; nested exception is java.lang.IllegalArgumentException: New value must be a Set, was: class java.util.ArrayList
    at org.springframework.data.neo4j.support.Neo4jExceptionTranslator.translateExceptionIfPossible(Neo4jExceptionTranslator.java:43)
    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:58)
    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:213)
    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:163)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204) 
```

我们如何更新节点或节点实体？

```
public void updateUserNode(UserEntity user) {  
    try{ 
    UserEntity updatedUser = this.getUserByUserId(user.getUserId());//finding node with user id///
    updatedUser.setEmail(user.getEmail());
    updatedUser.setImageId(user.getImageId());
    updatedUser.setFirstname(user.getFirstname());
    updatedUser.setLastname(user.getLastname());
    //System.out.println("Deleting ");
    //userRepository.delete(del);
    System.out.println("UPDATING ");     
    // with existing Id, you can not save it again/, or update
    updatedUser = userRepository.save(updatedUser);
    }catch(Exception e){
      e.printStackTrace();
    }
    //return 
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:22:14.830

您必须将 .save() 嵌入事务中。

举个例子：

```
final org.neo4j.graphdb.Transaction tx = this.neoTemplate.getGraphDatabaseService().beginTx();
try {
    updatedUser = userRepository.save(updatedUser);
    tx.success();
} finally {
    tx.finish();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T16:15:47.313

在您的`UserEntity`域对象中，您是否存储任何关系？确保将它们声明为`Set<T>`而不是声明为`Iterable<T>`：

> 来自：[http ://static.springsource.org/spring-data/data-graph/snapshot-site/reference/html/#reference:programming_model:relationships:relatedto](http://static.springsource.org/spring-data/data-graph/snapshot-site/reference/html/#reference:programming_model:relationships:relatedto)
> 
> “也可能有引用一组节点实体（1：N）的字段。这些字段有两种形式，可修改或只读。可修改字段是Set类型，只读字段是Iterable，其中 T 是 @NodeEntity 注释的类。”

我怀疑您的默认构造函数正在实例化一个 ArrayList ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-23T20:09:40.947

由于您使用的是 SDN，因此您永远不需要手动启动/提交任何事务。

假设你的`User`班级看起来像这样

```
@NodeEntity(label="User)
public class User extends DomainObject{
    @Property(name = "email")
    private String email;

    //getter and setter
} 
```

和你`UserRepository`的类似：

```
public interface UserRepository extends GraphRepository<User> {

    //maybe this is already right at hand by SDN and thus redundant?
    @Query("MATCH (u:User {email:{email}}")
    public User findByEmail(@Param("email") String email)
} 
```

然后你可以`@Transactional`在一个`UserService`类上使用 a ：

```
@Component
@Transactional
public class UserService {

    @Autowired
    private UserRepository userRepository;

    public void updateEmail(String email) {
        User user = userRepository.findByEmail(email);
        if (user == null) return; //or throw...
        user.setEmail(email);
        userRepository.save(user);
    }
} 
```

# android - 为什么 Android 网络请求不自动跟随重定向？

> ID：15477344
> 
> 赞同：0
> 
> 时间：2013-03-18T12:54:48.983
> 
> 标签：android, redirect, apache-httpclient-4.x

几周前，我在 WebView 中遇到了一个问题，它没有像普通浏览器那样遵循重定向。我使用了许多 SO 答案中给出的以下建议：

```
String newUrl = response.getFirstHeader("Location").getValue(); 
```

但它只提供了 1 步重定向，但没有更多，这是它需要的。我通过反复监听重定向并手动完成每个步骤来解决它。

现在我正在使用以下代码：

```
HttpClient httpClient = MyApp.getHttpClient();
HttpPost httpPost = new HttpPost(con.getString(R.string.platform_url_getBalances));

List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
nameValuePairs.add(new BasicNameValuePair("sid", String.valueOf(sessionKey)));
ResponseHandler<String> responseHandler = new BasicResponseHandler();

httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

String response = null;

// Execute HTTP Post Request. Response body returned as a string
response = httpClient.execute(httpPost, responseHandler); 
```

最近更改了端点，`R.string.platform_url_getBalances`但我们将 302 重定向到不同的 URL。它在浏览器和应用程序的 iPad 版本上运行良好，但对于 Android，我得到`org.apache.http.client.HttpResponseException: Not Found`.

我觉得很奇怪，Android 在重定向方面如此痛苦。为什么它会有这样的行为，是否有合理的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:28:54.097

实际上，[我在评论中链接到的答案](https://stackoverflow.com/a/5170468/115145)是针对 HttpClient 4.1，据我所知，Android 的版本较旧。

我的猜测是 Android 版本的 HttpClient 中的等效过程是：

*   根据您的应用创建`DefaultRedirectHandler`覆盖的子类`isRedirectRequested()`
*   创建一个子类`DefaultHttpClient`并覆盖`createRedirectHandler()`以返回您在上一步中创建的子类的实例
*   无论您在哪里创建该实例，都可以使用您的子类`DefaultHttpClient`作为其自身的替代品`DefaultHttpClient`

# gwt - GWT Ckeditor“i.contentWindow 为空”问题

> ID：15477349
> 
> 赞同：4
> 
> 时间：2013-03-18T12:54:56.537
> 
> 标签：gwt, ckeditor

我在我的应用程序中使用 GWT ckeditor，在两个或多个编辑器实例之间切换时，我收到错误“ ***i.contentWindow is null*** ”。我参考了更多解决方案，但对我没有任何作用。ckeditor 和 GWT ckeditor 有什么区别吗？或者我需要在 GWT 编辑器上使用什么特定的东西？

# vba - 使用 VBA 取消 Outlook 会议

> ID：15477351
> 
> 赞同：0
> 
> 时间：2013-03-18T12:55:04.513
> 
> 标签：vba, outlook, outlook-2010

在某些情况下，我们忘记取消我们安排的会议，可能是因为重要的人不在，或者可能是因为时间不够。但在许多情况下，我们忘记从 Outlook 取消会议。所以，我正在寻找一个 VBA 代码，它会询问会议的组织者会议是否可以进行，或者是否要取消，如果要取消，它将发送取消邮件。请帮我解决一下这个。提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T04:38:00.537

在使用来自@alina 的代码以及来自网络的其他一些宏之后，我想出了一个解决方案，我在这里分享。

```
Public WithEvents objReminders As Outlook.Reminders

Sub Initialize_handler()

   Set objReminders = Application.Reminders
End Sub

Private Sub objReminders_ReminderFire(ByVal ReminderObject As reminder)

 Dim oApp As Outlook.Application
 Dim oNameSpace As Outlook.NameSpace
 Dim oApptItem As Outlook.AppointmentItem
 Dim oFolder As Outlook.MAPIFolder
 Dim oMeetingoApptItem As Outlook.MeetingItem
 Dim oObject As Object
 Dim iUserReply As VbMsgBoxResult
 Dim sErrorMessage As String
 MsgBox (VBA.Time)
On Error Resume Next
 ' check if Outlook is running
 Set oApp = GetObject("Outlook.Application")
 If Err <> 0 Then
   'if not running, start it
   Set oApp = CreateObject("Outlook.Application")
 End If

 On Error GoTo Err_Handler
 Set oNameSpace = oApp.GetNamespace("MAPI")
 Set oFolder = oNameSpace.GetDefaultFolder(olFolderCalendar)

 For Each oObject In oFolder.Items
   If oObject.Class = olAppointment Then
     Set oApptItem = oObject
        If ReminderObject.Caption = oApptItem.Subject Then
        If oApptItem.Organizer = Outlook.Session.CurrentUser Then
        iUserReply = MsgBox("Meeting found:-" & vbCrLf & vbCrLf _
            & Space(4) & "Date/time (duration): " & Format(oApptItem.Start, "dd/mm/yyyy hh:nn") _
            & " (" & oApptItem.Duration & "mins)" & Space(10) & vbCrLf _
            & Space(4) & "Subject: " & oApptItem.Subject & Space(10) & vbCrLf _
            & Space(4) & "Location: " & oApptItem.Location & Space(10) & vbCrLf & vbCrLf _
            & "Do you want to continue with the meeting?", vbYesNo + vbQuestion + vbDefaultButton1, "Meeting confirmation")
       If iUserReply = vbNo Then
            oApptItem.MeetingStatus = olMeetingCanceled
            oApptItem.Save
            oApptItem.Send
            oApptItem.Delete
            End If
          End If
     End If
   End If

 Next oObject

 Set oApp = Nothing
 Set oNameSpace = Nothing
 Set oApptItem = Nothing
 Set oFolder = Nothing
 Set oObject = Nothing

 Exit Sub

Err_Handler:
 sErrorMessage = Err.Number & " " & Err.Description

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:03:39.450

我在[这里找到了这个](http://www.mrexcel.com/forum/excel-questions/564254-how-do-i-delete-outlook-appointment-item-visual-basic-applications.html)

```
Public Function DeleteAppointments(ByVal subjectStr As String)

    Dim oOL As New Outlook.Application
    Dim oNS As Outlook.NameSpace
    Dim oAppointments As Object
    Dim oAppointmentItem As Outlook.AppointmentItem
    Dim iReply As VbMsgBoxResult

    Set oNS = oOL.GetNamespace("MAPI")
    Set oAppointments = oNS.GetDefaultFolder(olFolderCalendar)
    Count = oAppointments.Items.Count 'for test purposes

    For Each oAppointmentItem In oAppointments.Items
        If InStr(oAppointmentItem.Subject, subjectStr) > 0 Then
        iReply = msgbox("Appointment found:" & vbCrLf & vbCrLf _
            & Space(4) & "Date/time: " & Format(oAppointmentItem.Start, "dd/mm/yyyy hh:nn") & vbCrLf _
            & Space(4) & "Subject: " & oAppointmentItem.Subject & Space(10) & vbCrLf & vbCrLf _
            & "Delete this appointment?", vbYesNo + vbQuestion + vbDefaultButton2, "Delete Appointment?")
        If iReply = vbYes Then oAppointmentItem.Delete
            oAppointmentItem.Delete
        End If
    Next

    Set oAppointmentItem = Nothing
    Set oAppointments = Nothing
    Set oNS = Nothing
    Set oOL = Nothing

End Function 
```

# php - PHP Imagemagick - 在尝试输出图像而不保存到本地文件夹时，passthru 不起作用

> ID：15477352
> 
> 赞同：2
> 
> 时间：2013-03-18T12:55:08.150
> 
> 标签：php, imagemagick, passthru

在下面的代码中，我试图通过 imagemagick 处理输出图像。在这里，我将边框半径应用于输入图像。当我使用以下代码将图像保存到输出文件夹时，我得到了输出。

```
<?php
$input = "input.png";
$s = 10;
$t = 10;
$size = getimagesize ( $input );
$output = $outputfolder . $outputname;
exec( "convert -size " . $size [0] . "x" . $size [1] . " xc:none -fill -transparent 
-draw \"roundRectangle 0,0 " . $size [0] . "," . $size [1] . " $s,$t\"  " . $input .
" -compose SrcIn -composite " . $output . " " );
?> 
```

我想要一个尚未保存到本地文件夹但想要显示带有标题内容类型的输出的输出。我正在使用 passthru 来执行此操作。但我没有得到输出。我正在尝试使用以下代码

```
 <?php
$input = "input.png";
header("Content-Type: image/png");
$size = getimagesize ( $input );
$s = 10;
$t = 10;
$cmd =  " - size " . $size [0] .
              "x" . $size [1] . " xc:none -fill -transparent  -draw
\"roundRectangle 0,0 " .
                $size [0] . "," . $size [1] . " $s,$t\"  " .
                 " -compose SrcIn -composite" .
                " -tile - $input";

passthru("convert $cmd PNG :-")

?> 
```

我认为我使用的命令有误。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T13:35:52.510

你能解释一下你现在想要保存文件的原因吗？转换图像的目的是什么？

在我得到额外的信息之前，我会冒昧地假设图像作为 CMS 的一部分上传并被调整以适应布局，然后显示给用户？

如果是个人情况，我会保存输出文件，然后执行类似显示它的操作。

```
header("Content-Type: image/png");
echo file_get_contents($pathToImage) 
```

您可以在运行 image magick 之前检查文件是否已经存在。这可能比每次显示时都重新处理图像更有效

# php - 在实时站点上获取会话错误

> ID：15477358
> 
> 赞同：0
> 
> 时间：2013-03-18T12:55:19.243
> 
> 标签：php, session

我已经在 config.php 文件中开始了我的会话，并且我在我网站的每个页面上都包含了该文件，我的网站在 localhost 中运行良好，

但是当我完成它时，它会显示这样的错误，

```
Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent 
```

有什么建议么...

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:59:31.960

在调用 session_start 之前检查您是否不发送内容。只需将 session_start 作为您在 PHP 文件中做的第一件事。

```
<?php session_start(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:09:21.950

如果您在代码末尾关闭后还有空间，`PHP Tags`那么`config.php`这些警告也会出现。

因此，请确保关闭后没有任何`PHP Tags` 空间`?>`

# jira - 为 Jira 插件创建自定义字段

> ID：15477361
> 
> 赞同：0
> 
> 时间：2013-03-18T12:55:34.780
> 
> 标签：jira, jira-plugin

我最近开始学习为 jira 开发插件。现在我需要创建自定义字段。我不知道如何命名这个对象。

我想做这样的事情：

![在此处输入图像描述](../Images/c06aec7482dddbe0c3667d19d06b6b35.png)

或这个：

![在此处输入图像描述](../Images/c3f7c3a807729fe81f19eb136f87105b.png)

我该怎么做呢？

我阅读了 Atlassian 网站上的常见问题解答，但没有找到这个实现。我不知道是否可以这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:31:36.813

对我来说听起来像是一个自定义字段。按钮和文本区域来自 Velocity 模板文件，用于在字段上查看和编辑操作。您还需要决定要在后端数据库中存储的内容。我的 O'Reilly 书“实用 JIRA 插件”对此有更多详细信息，或通过[https://developer.atlassian.com/display/JIRADEV/How+to+create+a+new+Custom+Field+上的示例进行操作类型](https://developer.atlassian.com/display/JIRADEV/How+to+create+a+new+Custom+Field+Type)

# python - xml.sax 解析器和行号等

> ID：15477363
> 
> 赞同：4
> 
> 时间：2013-03-18T12:55:45.360
> 
> 标签：python, xml-parsing, saxparser

任务是解析一个简单的 XML 文档，并按行号分析内容。

正确的 Python 包似乎是`xml.sax`. 但是我该如何使用它呢？

在对文档进行了一些挖掘之后，我发现：

*   `xmlreader.Locator`界面有信息：`getLineNumber()`。
*   `handler.ContentHandler`界面`setDocumentHandler()`有。

第一个想法是创建一个`Locator`，将其传递给`ContentHandler`，并在调用其`character()`方法等期间从 Locator 读取信息。

但是，`xmlreader.Locator`只是一个骨架接口，只能从它的任何方法返回-1。所以作为一个可怜的用户，我该怎么办，没有写一个完整的`Parser`和`Locator`我自己的？

我现在会回答我自己的问题。

* * *

（嗯，我会的，除了说我不能的任意、烦人的规则。）

* * *

我无法使用现有文档（或通过网络搜索）弄清楚这一点，并被迫阅读`xml.sax`（在我的系统上的 /usr/lib/python2.7/xml/sax/ 下）的源代码。

该`xml.sax`函数`make_parser()`默认创建一个 real `Parser`，但那是什么东西？
在源代码中发现它是一个`ExpatParser`，定义在 expatreader.py 中。并且...它有自己的`Locator`, 一个`ExpatLocator`. 但是，这个东西是无法访问的。在这和解决方案之间出现了很多令人头疼的问题。

1.  编写自己`ContentHandler`的 r，它知道`Locato`r，并用它来确定行号
2.  创建`ExpatParser`一个`xml.sax.make_parser()`
3.  创建一个`ExpatLocator`，将`ExpatParser`实例传递给它。
4.  做`ContentHandler`，给它这个`ExpatLocator`
5.  传递`ContentHandler`给解析器`setContentHandler()`
6.  呼吁。`parse()`_`Parser`

例如：

```
import sys
import xml.sax

class EltHandler( xml.sax.handler.ContentHandler ):
    def __init__( self, locator ):
        xml.sax.handler.ContentHandler.__init__( self )
        self.loc = locator
        self.setDocumentLocator( self.loc )

    def startElement( self, name, attrs ): pass

    def endElement( self, name ): pass

    def characters( self, data ):
        lineNo = self.loc.getLineNumber()
        print >> sys.stdout, "LINE", lineNo, data

def spit_lines( filepath ):
    try:
        parser = xml.sax.make_parser()
        locator = xml.sax.expatreader.ExpatLocator( parser )
        handler = EltHandler( locator )
        parser.setContentHandler( handler )
        parser.parse( filepath )
    except IOError as e:
        print >> sys.stderr, e

if len( sys.argv ) > 1:
    filepath = sys.argv[1]
    spit_lines( filepath )
else:
    print >> sys.stderr, "Try providing a path to an XML file." 
```

Martijn Pieters 在下面指出了另一种具有一些优势的方法。如果 的超类初始化程序`ContentHandler`被正确调用，那么结果`._locator` 是设置了一个看起来私有的、未记录的成员，它应该包含一个正确的`Locator`.

优点：您不必创建自己的`Locator`（或了解如何创建它）。缺点：它没有记录在案，并且使用未记录的私有变量是草率的。

谢谢马丁！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:16:40.363

sax 解析器*本身*应该为您的内容处理程序提供定位器。定位器必须实现某些方法，但它可以是任何对象，只要它具有正确的方法即可。该类是定位器预期实现[`xml.sax.xmlreader.Locator`的](http://docs.python.org/2/library/xml.sax.reader.html#locator-objects)*接口；*如果解析器向您的处理程序提供了一个定位器对象，那么您可以依靠定位器上存在的这 4 个方法。

仅*鼓励*解析器设置定位器，而不需要这样做。expat XML 解析器确实提供了它。

如果您是子类[`xml.sax.handler.ContentHandler()`](http://docs.python.org/2/library/xml.sax.handler.html#contenthandler-objects)，那么它将为您提供标准`setDocumentHandler()`方法，并且`.startDocument()`在调用处理程序时，您的内容处理程序实例将`self._locator`设置：

```
from xml.sax.handler import ContentHandler

class MyContentHandler(ContentHandler):
    def __init__(self):
        ContentHandler.__init__(self)
        # initialize your handler

    def startElement(self, name, attrs):
        loc = self._locator
        if loc is not None:
            line, col = loc.getLineNumber(), loc.getColumnNumber()
        else:
            line, col = 'unknown', 'unknown'
        print 'start of {} element at line {}, column {}'.format(name, line, col) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-01T12:23:47.797

这是一个老问题，但我认为有一个比给出的更好的答案，所以无论如何我都会添加另一个答案。

虽然在 ContentHandler 超类中可能确实有一个名为 _locator 的未记录私有数据成员，如 Martijn 上述回答中所述，但在我看来，使用此数据成员访问位置信息并不是定位设施的预期用途。

在我看来，Steve White 提出了一个很好的问题，即为什么这个成员没有被记录在案。我认为这些问题的答案是它可能不打算供公众使用。它似乎是 ContentHandler 超类的私有实现细节。由于它是一个未记录的私有实现细节，它可能会在 SAX 库的任何未来版本中消失而不会发出警告，因此依赖它可能是危险的。

在我看来，通过阅读 ContentHandler 类的文档，特别是 ContentHandler.setDocumentLocator 的文档，设计者打算让用户改用 ContentHandler.setDocumentLocator 函数，以便在解析器调用它时，用户的内容处理程序子类可以保存对传入的定位器对象（由 SAX 解析器创建）的引用，以后可以使用该保存的对象来获取位置信息。例如：

```
class MyContentHandler(ContentHandler):
    def __init__(self):
        super().__init__()
        self._mylocator = None
        # initialize your handler

    def setDocumentLocator(self, locator):
        self._mylocator = locator

    def startElement(self, name, attrs):
        loc = self._mylocator
        if loc is not None:
            line, col = loc.getLineNumber(), loc.getColumnNumber()
        else:
            line, col = 'unknown', 'unknown'
        print 'start of {} element at line {}, column {}'.format(name, line, col) 
```

使用这种方法，无需依赖未记录的字段。

# sql - VB.NET 操作数类型冲突：日期与 int 错误不兼容

> ID：15477364
> 
> 赞同：-1
> 
> 时间：2013-03-18T12:55:45.747
> 
> 标签：sql, vb.net, datetime, select, where

我正在尝试使用 where 子句从数据库中显示名为**staffpresentee**的表中的记录...

我正在使用视觉工作室 2010...

表格设计如下——

```
.......fieldname..................datatype........allownull
1......staff_id (fk).............numeric(18,0)......yes
2.......date........................date.............no
3......present.....................char(1)..........yes 
```

请注意，第二个字段的类型是日期而不是日期时间...

我想在“日期”字段中显示表中具有今天日期的所有记录...我当前的查询是-

```
cmd = New SqlClient.SqlCommand("select * from staffpresentee where date=" & Date.Now.Date, cn)
dr = cmd.ExecuteReader 
```

因为`dr = cmd.ExecuteReader`我得到了错误

> “操作数类型冲突：日期与 int 不兼容”

我尝试了`select * from staffpresentee`没有 where 子句的查询，它运行正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:20:26.427

尝试将日期值放在单引号中。

```
cmd = New SqlClient.SqlCommand("select * from staffpresentee where date='" & _
                                                      Date.Now.Date & "'", cn)
dr = cmd.ExecuteReader 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:31:21.123

尝试这个-

```
cmd = New SqlClient.SqlCommand("select * from staffpresentee where [date]=@dt", cn)
cmd.Parameters.AddWithValue("@dt", DateTime.Now.Date)
dr = cmd.ExecuteReader 
```

# c# - 如何在 OpenTK 中正确使用 GL.Ortho？

> ID：15477367
> 
> 赞同：0
> 
> 时间：2013-03-18T12:55:48.437
> 
> 标签：c#, .net, opengl, opentk

我在 Windows 窗体中使用 GLControl (OpenTK) 绘制了一些图形。但是，问题是我无法弄清楚如何使用 GL.Ortho() 方法。

这是我写的代码：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void GlControlPaint(object sender, PaintEventArgs e)
    {
        GlControl.MakeCurrent();
        GL.Clear(ClearBufferMask.ColorBufferBit | ClearBufferMask.DepthBufferBit);

        GL.Viewport(150, 150, 300, 300);
        //GL.Ortho(0, 1, 0, 1, -1, 1);
        GL.ClearColor(Color.White);

        PaintSquareOrBorder(BeginMode.Quads, Color.Cyan, 0.2, 0.2, 0.45, 0.2, 0.45, -0.2, 0.2, -0.2);
        PaintSquareOrBorder(BeginMode.Quads, Color.Cyan, 0.1, -0.1, 0.1, 0.1, 0.2, 0.2, 0.2, -0.2);
        PaintSquareOrBorder(BeginMode.Quads, Color.Cyan, -0.2, -0.2, -0.45, -0.2, -0.45, 0.2, -0.2, 0.2);
        PaintSquareOrBorder(BeginMode.Quads, Color.Cyan, -0.1, 0.1, -0.1, -0.1, -0.2, -0.2, -0.2, 0.2);
        PaintSquareOrBorder(BeginMode.Quads, Color.Cyan, -0.1, 0.1, -0.2, 0.2, 0.2, 0.2, 0.1, 0.1);
        PaintSquareOrBorder(BeginMode.Quads, Color.Cyan, 0.1, -0.1, 0.2, -0.2, -0.2, -0.2, -0.1, -0.1);
        PaintSquareOrBorder(BeginMode.Quads, Color.Cyan, -0.2, 0.2, -0.2, 0.45, 0.2, 0.45, 0.2, 0.2);
        PaintSquareOrBorder(BeginMode.Quads, Color.Cyan, 0.2, -0.2, 0.2, -0.45, -0.2, -0.45, -0.2, -0.2);
        PaintSquareOrBorder(BeginMode.LineLoop, Color.Black, -0.1, -0.1, 0.1, -0.1, 0.1, 0.1, -0.1, 0.1);

        PaintBordersForMainFigure();

        GlControl.SwapBuffers();
        GlControl.Refresh();

    }

    private void PaintBordersForMainFigure()
    {
        PaintLine(Color.Black, 0.2, 0.2, 0.45, 0.2);
        PaintLine(Color.Black, 0.45, 0.2, 0.45, -0.2);
        PaintLine(Color.Black, 0.45, -0.2, 0.2, -0.2);
        PaintLine(Color.Black, 0.2, -0.2, 0.2, -0.45);
        PaintLine(Color.Black, 0.2, -0.45, -0.2, -0.45);
        PaintLine(Color.Black, -0.2, -0.45, -0.2, -0.2);
        PaintLine(Color.Black, -0.2, -0.2, -0.45, -0.2);
        PaintLine(Color.Black, -0.45, -0.2, -0.45, 0.2);
        PaintLine(Color.Black, -0.45, 0.2, -0.2, 0.2);
        PaintLine(Color.Black, -0.2, 0.2, -0.2, 0.45);
        PaintLine(Color.Black, -0.2, 0.45, 0.2, 0.45);
        PaintLine(Color.Black, 0.2, 0.45, 0.2, 0.2);
    }

    private static void PaintLine(Color color, double x1, double y1, double x2, double y2)
    {
        GL.Color3(color);

        GL.Begin(BeginMode.Lines);

        GL.Vertex2(x1, y1);
        GL.Vertex2(x2, y2);

        GL.End();
    }

    private static void PaintSquareOrBorder(BeginMode beginMode, Color color, double x1, double y1, double x2, double y2, double x3, double y3, double x4, double y4)
    {
        GL.Color3(color);

        GL.Begin(beginMode);

        GL.Vertex2(x1, y1);
        GL.Vertex2(x2, y2);
        GL.Vertex2(x3, y3);
        GL.Vertex2(x4, y4);

        GL.End();
    }
} 
```

[这是我在没有 GL.Ortho 的情况下得到的结果：](http://13f.imghost.us/em/Result1.png)

[这是我想用 GL.Ortho 得到的结果](http://13f.imghost.us/1M/Result2.png)

[但是如果我取消注释 GL.Ortho 代码，我会得到：](http://13f.imghost.us/GL/Result3.png)

起初我想，因为我只使用 2d 对象，所以我应该使用 Ortho2D。但是，我发现 OpenTK 中不存在 Gl.Ortho2d。使用官方文档我发现，这两者之间没有太大区别，除了当使用 Ortho2d 时，near 和 far 参数分别隐式设置为 -1 和 1。

设置这些参数后，我得到一个白屏。我想知道，我做错了什么？

**免责声明：**我不需要确切的坐标来获得屏幕截图中的结果。我只是用它来让你看到我想要做什么。我想知道为什么当我使用 Gl.Ortho2d 时我的窗口是完全空白的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:18:41.260

问题是 GL.Ortho() 将当前矩阵与正交矩阵相乘。因此，对于每个渲染帧，您都会不断地将矩阵与新的正交矩阵相乘，并且您的视图会漂移到您看不到任何东西的地方。

把它改成这样，你会看到一个漂亮的动画：

```
GL.Ortho(-0.99, 1, -0.99, 1, -1, 1); 
```

在 GL.Ortho() 调用前面添加这两行，这样矩阵在与正交矩阵相乘之前是一个单位矩阵。

```
GL.MatrixMode(MatrixMode.Projection);
GL.LoadIdentity(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:03:41.693

这就是我在我的项目中所做的。希望有帮助。但我不记得为什么我这样做了。

```
GL.MatrixMode(MatrixMode.Projection);
Matrix4 ortho = Matrix4.CreateOrthographic(glControl1.Width, glControl1.Height, 10, 3000);
GL.LoadMatrix(ref ortho);
v = Matrix4.LookAt(0, 0, 100, 0, 0, 0, 0, 1, 0);
GL.MatrixMode(MatrixMode.Modelview);
GL.LoadMatrix(ref  v); 
```

我的视口是 GL.Viewport(0, 0, glControl1.Width, glControl1.Height);

# iphone - 当我尝试更改甲酸盐时，为什么日期会更改？

> ID：15477368
> 
> 赞同：0
> 
> 时间：2013-03-18T12:55:52.957
> 
> 标签：iphone, ios

这是我用来更改日期格式的代码

```
 NSLog(@"newBirthDates%@",_newwBirthDates);
    NSDateFormatter *Form = [[NSDateFormatter alloc] init];
    [Form setDateFormat:@"MM/dd"];
    NSDate *date1 =[NSDate date];
    NSString *string =[Form stringFromDate:date1];
     NSLog(@"string%@",string);
    NSDate *todaydate =[Form dateFromString:string];
     NSLog(@"todaydate%@",todaydate); 
```

这就是我得到的输出

```
 newBirthDates(
    "05/22",
    "07/11",
    "10/07",
    "02/20"
)
 newBirthDates(
    "05/22",
    "07/11",
    "10/07",
    "02/20"
)
 string03/18
 todaydate1970-03-17 18:30:00 +0000 
```

现在我的问题是为什么 3/18 变成 03/17？为什么一天会减少

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:10:55.590

答案很简单——时区。仔细看看`NSLog`打印出来的内容
`1970-03-17 18:30:00` **`+0000`**

默认情况下，a`NSDateFormatter`设置为您的本地时区。这意味着，如果您的时区`+5:30`给它一个日期“1970/18/3”，则结果为`1970-03-18 00:00:00` **`+0530`**. 但是，`NSLog`始终以 GMT（零）时区打印日期，加上/减去时区差异（5 小时 30 分钟）。

基本上，没有什么可修复的，`NSLog`如果你想用它来检查`NSDate`值，你只需要了解它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:06:19.373

您的日志按字符串值显示，消除了所有重要的时区差异。

日志`NSDate`显示您从 GMT 开始的时间。

并且这两个值都是正确的。

> NSDate 的唯一原始方法 timeIntervalSinceReferenceDate 为 NSDate 接口中的所有其他方法提供了基础。此方法返回一个相对于绝对参考日期的时间值——格林威治标准时间 2001 年 1 月 1 日的第一个瞬间。

您必须阅读[NSDate 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:10:08.530

为了获得正确的日期，您可以使用这个，

```
 NSDateFormatter *Form = [[NSDateFormatter alloc] init];
    [Form setDateFormat:@"MM/dd"];
    [Form setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
    NSDate *date1 =[NSDate date];
    NSString *string =[Form stringFromDate:date1];
    NSLog(@"string%@",string);
    NSDate *todaydate =[Form dateFromString:string];
    NSLog(@"todaydate%@",todaydate); 
```

上面的代码将给出正确的日期。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T13:11:12.097

主要的是**TimeZone**：`[Form setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];`

**这是正确的代码：**

```
NSDateFormatter *Form = [[NSDateFormatter alloc] init];
[Form setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
[Form setDateFormat:@"MM/dd"];
NSDate *date =[NSDate date];
NSString *string =[Form stringFromDate:date];
NSDate *todaydate = [Form dateFromString:string];
NSLog(@"todaydate %@",todaydate); 
```

# javascript - 在 angularjs 中对异步服务进行单元测试

> ID：15477370
> 
> 赞同：16
> 
> 时间：2013-03-18T12:55:56.110
> 
> 标签：javascript, unit-testing, asynchronous, angularjs

我正在尝试对具有异步方法但没有运气的服务进行单元测试。

我试图通过使用 angularjs 中的 $q 支持来实现承诺。

任何帮助，将不胜感激。

[http://jsfiddle.net/9pBze/37/](http://jsfiddle.net/9pBze/37/)

```
angular.module('myapp', ['myservice']);

angular.module('myservice', []).factory('myservice', function($q) {
  var ls = {};

  ls.DoIt = function() {
    var deferred = $q.defer();

    setTimeout(function(){
        deferred.resolve(5);
    },3000);

    return deferred.promise;
  }

  return ls;

});

describe('services', function () {

    beforeEach(module('myservice'));

    it("should equal 2",  inject(function(myservice) {
        myservice.DoIt().then(function(returned) {
            expect(returned).toEqual(2);
        });        
    }));
}); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-18T13:23:52.167

首先，`setTimeout`由于难以模拟，因此测试起来特别棘手。幸运的是，AngularJS 有一个包装器`$timeout`（

```
 ls.DoIt = function() {
    var deferred = $q.defer();

    $timeout(function(){
        deferred.resolve(5);
    },3000);

    return deferred.promise;
  } 
```

提供的模拟`$timeout`允许我们轻松模拟经过的时间（使用`$timeout.flush()`），这意味着我们的测试可以快速运行，而无需真正等待异步事件完成（请注意，生产代码仍在使用异步 API！）。

更改后的测试如下所示：

```
it("should equal 5",  inject(function(myservice, $timeout) {

    var valueToVerify;
    myservice.DoIt().then(function(returned) {
      valueToVerify = returned;  
    });  
    $timeout.flush();        
    expect(valueToVerify).toEqual(5);
})); 
```

最后是工作 jsFiddle：http: [//jsfiddle.net/v9L9G/1/](http://jsfiddle.net/v9L9G/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T13:31:17.193

它与 Angular 本身无关，但与[Jasmine 异步测试](http://jasmine.github.io/2.0/introduction.html#section-Asynchronous_Support)有关。

如果您需要`setTimeout`使用 Angular [`$timeout`](http://docs.angularjs.org/api/ng.$timeout)。如果您希望对 setTimeout/$timeout 执行进行精细控制，请使用[模拟 Clock](http://pivotal.github.com/jasmine/#section-Mocking_the_JavaScript_Clock)。

# iso - NodaTime 构造函数是否在 Hours 参数中接受 24

> ID：15477372
> 
> 赞同：2
> 
> 时间：2013-03-18T12:55:57.913
> 
> 标签：iso, nodatime

我希望在下载之前能快速回答一个关于 NodaTime 的问题。到目前为止，我正在阅读有关 NodaTime 及其 API 的内容，并且似乎经过深思熟虑。

我希望它可能有助于消除我在具有数据库后端、具有数据库提供程序的桌面客户端以及必须在主要浏览器上运行的 Web 客户端的应用程序中遇到的一些混乱。在各种数据库、数据库提供程序和 Web 平台上，对日期时间和时间的 ISO 8601 的支持差异很大。例如，Internet Explorer 遵循 ISO 8601，但 SQL Server 不遵循；Web UI 时间选择器没有，因为 Chrome 没有。

**问题：在 NodaTime 中，24:00 是有效的时间值吗？24 是其 Time 构造函数的 hours 参数的有效参数吗？**

背景：ISO 8601 允许午夜的两种表示形式：00:00 表示“今晨午夜”，24:00 表示“今晚午夜”。当 DateTime 对象*在*时间线上时，时间元素为 24:00 的日期与第二天的 00:00 重合。它们是具有两种不同表示的同一时间线瞬间，两种表示均根据 ISO 有效。

Time-only 值与时间线分离。00:00 的时间出现在分离的 24 小时一天的开始，而 24:00 的仅时间值是 00:00 之后的 24 小时。Time 类型应该接受 24 小时。当 24 是小时时，秒、毫秒和刻度的最大值为 0（除非涉及模算术并且时间翻转，因此 24:01 是 00:01——但 ISO 对此实现细节无话可说， IIRC）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:57:15.223

我们在解析 a 时接受 24:00 `LocalDateTime`，但*不*接受24:01。

这是[问题 153](https://code.google.com/p/noda-time/issues/detail?id=153)，在[修订版 f7ac0365d8ca](https://code.google.com/p/noda-time/source/detail?r=f7ac0365d8cae41a6a50e93a8965c0ce732298be&path=/src/NodaTime/Text/LocalDateTimePatternParser.cs)中实施。

不幸的是，这是在 1.0 发布之后，所以您要么需要获取当前代码，要么等待 1.1 发布（希望很快）。

我们*目前*在仅解析`LocalTime`. 如果你想要，请记录一个特性请求——我们可能会在 1.2 中查看它（它将有很多文本特性），尽管我不确定表示会是什么样子。（`LocalTime`本身不支持“一天结束的午夜”的想法。）

# asp.net - 如何从后面的代码更改 RadioButton 状态

> ID：15477378
> 
> 赞同：0
> 
> 时间：2013-03-18T12:56:24.367
> 
> 标签：asp.net, c#-4.0

我在页面中声明了 RadioButton，如下所示：

```
<asp:RadioButton  ID="RadioSalesManager" runat="server" GroupName="RadioSales"  />

 <asp:RadioButton ID="RadioSalesUser" runat="server"  GroupName="RadioSales"/> 
```

在代码后面基于下拉的值我想改变 RadioButton 的状态

```
protected void RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        strRole = ((RadioButtonList)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("RadioButtonList1")).SelectedValue;

        if (strRole.Contains("Administrator"))
        {
            ((DropDownList)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("DrpGrpList")).SelectedValue = strRole.Trim();
            ((DropDownList)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("DrpGrpList")).Enabled = false;
            ((System.Web.UI.HtmlControls.HtmlTableRow)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("trAccess")).Visible = false;

        }
        else
        {
               ((DropDownList)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("DrpGrpList")).Enabled = true;
                    ((System.Web.UI.HtmlControls.HtmlTableRow)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("trAccess")).Visible = true;
                    strGroupName = ((DropDownList)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("DrpGrpList")).SelectedValue;

                    if (strGroupName.Contains("Sales") && (strRole.Contains("Manager")))
                        ((System.Web.UI.WebControls.RadioButton)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("RadioSalesManager")).Checked = true;
                    else
                        if (strGroupName.Contains("Sales") && (strRole.Contains("User")))
                            ((System.Web.UI.WebControls.RadioButton)CreateUserWizard1.CreateUserStep.ContentTemplateContainer.FindControl("RadioSalesUser")).Checked = true;

        }
    } 
```

单选按钮状态不会随着代码后面的上述代码而改变。请帮我解决这个问题。

谢谢APPU

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:23:07.457

你在你的 aspx 页面中使用 UpdatePanel 吗？

```
<asp:UpdatePanel ID="update" runat="server" ChildrenAsTriggers="true" UpdateMode="Conditional"> 
```

这是在前端更新数据所需要的，在后面的代码中已更改

# git - 将两个 git repos 合并为一个而不重命名文件

> ID：15477379
> 
> 赞同：2
> 
> 时间：2013-03-18T12:56:27.313
> 
> 标签：git, merge

我想将两个 repos A 和 B 合并到一个公共 repo C 中。A 和 B 在根文件夹级别都有很多文件，所以我想在 repo C 的根文件夹中创建文件夹 A 和 B ，并将每个原始 repo 的内容放在其匹配的文件夹中。

有没有`git mv`在过程中不使用的情况下这样做？问题是我正在使用 Xcode，不幸的是它没有遵循重命名文件的历史记录，所以我想尽可能避免移动。实际上，我想将每个 repo 直接合并到它的子文件夹中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:15:44.170

有很多方法可以实现这一点，并且该问题的博客文章和 SO 答案的数量是其两倍。最简单的解决方案可能是使用[git-stitch-repo](http://search.cpan.org/~book/Git-FastExport-0.04/script/git-stitch-repo)工具。

另一种选择（我没有尝试过）是关注这篇[博文](http://bpeirce.me/moving-one-git-repository-into-another.html)。但它非常血腥，如果您有想要移动到子目录的点文件，则需要进行一些调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:52:03.240

*   [子树合并](http://git-scm.com/book/ch6-7.html)——一个简单的解决方案。只会合并一组文件，同时在不同的前缀（目录）下重新定位它们。不会对这些文件的过去历史做任何事情。
*   带有命令的[`git-subtree`](https://github.com/git/git/tree/master/contrib/subtree)脚本。`add`将创建合成历史，就好像原始代码始终位于指定目录中一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T07:43:40.527

通过建立在迈克尔建议的[博客文章](http://bpeirce.me/moving-one-git-repository-into-another.html)上，我已经能够进行合并。原始帖子只负责合并主分支 - 我已将其扩展为从合并的存储库中提取所有分支，因此不会丢失任何历史记录。

重申一下，我发现了许多其他建议的方法来进行这种合并，但没有一个既保存历史又不重命名路径（导致 Xcode 无法显示历史）。

```
# Init a git repo which will contain the merge of the two repos, each in its own subdirectory
cd ~/dev
mkdir Merged
cd Merged
git init

# Dummy initial commit to create a master branch
git commit --allow-empty -m "Initial commit"

# Clone first repo
cd ..
git clone <RepoA url>
cd RepoA

# Checkout all branches
for remote in `git branch -r | grep -v master `; do git checkout --track $remote ; done

# Prepend subdirectory to all committed files paths in all branches
git filter-branch -f --prune-empty --tree-filter ' mkdir -p .sub;
  find . -mindepth 1 -exec mv {} .sub;
  mv .sub RepoA
  ' -- --glob=refs/heads/*

# Garbage cleanup
git gc --aggressive

# Same steps for second repo
cd ..
git clone <RepoB URL>
cd RepoB

# Checkout all branches  
for remote in `git branch -r | grep -v master `; do git checkout --track $remote ; done

# Prepend subdirectory to all committed files paths in all branches
git filter-branch -f --prune-empty --tree-filter ' mkdir -p .sub;
  find . -mindepth 1 -exec mv {} .sub;
  mv .sub RepoB
  ' -- --glob=refs/heads/*

# Garbage cleanup
git gc --aggressive

# Merge modified repos into unified repo
cd ../Merged
git remote add RepoA ../RepoA
git remote add RepoB ../RepoB
git fetch --all
for remote in `git branch -r`; do git checkout -b $remote --track $remote ; done

# Merge wanted branches (usually master) from each original repo into the master branch of the unified repo
git checkout master
git merge RepoA/master
git merge RepoB/master

# Remove remotes
git remote rm RepoA
git remote rm RepoB

# Garbage cleanup
git gc --aggressive

# All done

# Optionally push into a new empty remote repository
git remote add RepoMerged <Merged Repo URL>
git push --all RepoMerged 
```

# php - 如何在 CSS 文件中包含 PHP url？

> ID：15477381
> 
> 赞同：0
> 
> 时间：2013-03-18T12:56:31.520
> 
> 标签：php, css

我在 php ( [codeigniter ) 中有一个扩展版本的](http://ellislab.com/codeigniter)[bootstrap](http://twitter.github.com/bootstrap/)的链接：

```
<link href="<?= base_url() . RESOURCE_PATH . 'css/extended_bootstrap.' ?>" rel="stylesheet" /> 
```

在我的 CSS 文件中，我有：

```
input[type="file"]
{
behavior: url(PIE.htc);
} 
```

但是[**PIE.htc**](http://css3pie.com/documentation/getting-started/)的 url必须相对于[root](https://stackoverflow.com/questions/12912587/twitter-bootstrap-cross-browser-rounded-corners-and-gradients)。如何格式化 url，使其相对于 root 而不是我的 bootstrap.css 扩展版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T12:59:46.827

用于`../`“向上”移动一个级别。您可以将它们捆绑在一起以移动多个级别。

例如...

```
ROOT --> CSS --> style.css
ROOT --> pie.htc 
```

要移回您将使用的级别`../pie.htc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:06:56.300

如果您的文件夹结构是：

```
YourAppFolder/
    application/
           public/
               css/
               img/
         system/ 
```

然后在您的视图中使用它：

```
<link rel="stylesheet" type="text/css" href="<?=base_url()?>public/css/style.css"/> 
```

并在 css 中将此用于图像：

```
background:#356aa0 url(../img/background.png) repeat-x; 
```

# api - 添加测试帐户时没有 API 凭据

> ID：15477382
> 
> 赞同：0
> 
> 时间：2013-03-18T12:56:37.363
> 
> 标签：api, paypal, credentials, missing-features

自从上周更改了开发人员站点和沙箱以来，麻烦不断。自从新平台推出以来，我没有设法对新平台进行一次工作调用。

我已经设法恢复了 100002 错误 - 这至少意味着事情正在发生，但我今天注意到，如果我创建测试帐户，API 凭据为空白/丢失：

![截图])( [http://qikr.co/files/pics/p/paypalnoap91044.jpg](http://qikr.co/files/pics/p/paypalnoap91044.jpg) )

有谁知道解决这个问题？我已经清除了浏览器缓存等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:49:12.497

某些帐户未显示凭据存在一些问题。目前您已登录开发者帐户。尝试登录到实际的沙盒卖家帐户，然后转到个人资料并请求凭据。您应该能够从 Sandbox 卖家账户中查看这些，如果尚未请求它们，您可以生成这些。

注销 Paypal 帐户
，清除浏览器缓存和 cookie（我使用 firefox）。
转到 developer.paypal.com 并使用真实的 paypal 帐户（不是沙盒帐户）登录
转到应用程序
单击沙盒帐户
（可选）在重定向到帐户页面后从您以前的沙盒帐户导入旧帐户
单击帐户您想登录
选择沙盒站点
使用您的测试业务帐户登录该站点
转到我的个人资料
在帐户信息中单击请求 API 凭据
选择满足您需求的选项
API 凭据已创建！（它们将出现在您的测试帐户资料中）

# c++ - 在死锁 futex 中调用 malloc 和程序时出现分段错误

> ID：15477385
> 
> 赞同：1
> 
> 时间：2013-03-18T12:56:54.820
> 
> 标签：c++, ubuntu, gdb, malloc, futex

我正在处理的代码有很多调用来创建新的字符串和东西。但是最近在将服务器升级到 12.10 Ubuntu 之后，我开始面临一些麻烦。一些子进程卡在`futex`. 于是我就去附上运行了很久`GDB`的运行进程，我做了一个，发现如下日志`futex``backtrace`

```
#0  0x00007f563afc69bb in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007f563af4a221 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x00007f563af47fa7 in malloc () from /lib/x86_64-linux-gnu/libc.so.6
#3  0x00007f563afcfbfa in backtrace_symbols () from /lib/x86_64-linux-gnu/libc.so.6
#4  0x0000000000446945 in sig_segv (signo=<optimized out>) at FILE THAT HAS THE HANDLER,SIGHANDLER
#5  <signal handler called>
#6  0x00007f563aefb425 in raise () from /lib/x86_64-linux-gnu/libc.so.6
#7  0x00007f563aefeb8b in abort () from /lib/x86_64-linux-gnu/libc.so.6
#8  0x00007f563af3939e in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#9  0x00007f563af43b96 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#10 0x00007f563af463e8 in ?? () from /lib/x86_64-linux-gnu/libc.so.6
#11 0x00007f563af47fb5 in malloc () from /lib/x86_64-linux-gnu/libc.so.6
#12 0x00007f563b7f660d in operator new(unsigned long) () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#13 0x00007f563b8533b9 in std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator<char> const&) ()
   from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#14 0x00007f563b854d95 in char* std::string::_S_construct<char const*>(char const*, char const*, std::allocator<char> const&, std::forward_iterator_tag) () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#15 0x00007f563b854e73 in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, std::allocator<char> const&) () from /usr/lib/x86_64-linux-gnu/libstdc++.so.6
#16 0x0000000000412362 in MyString (bs=0x4aabd6 "-", this=0x7fffe854f940) at CONSTRUCTOR FROM C-STRING MyString(const char* bs):std::string(bs) {};
#17 A FUNCTION THAT CALLS THE ABOVE LINE 
```

我很困惑。我检查了内存，PC 有将近 20GB 的可用 RAM 内存。那么函数崩溃的可能性有多大`malloc`？我明白为什么它卡在了`futex`，但为什么是 malloc？我真的很想得到一个解释。

崩溃发生在这样的调用之后：

```
 MyString(const char* bs):std::string(bs) {}; 
```

调用此行以将简单的 c 字符串转换为 c++ 类型的 std::string。但是这门课是我自己的。由于主要有两个原因，我无法在这里提供整个代码。1）代码归我公司所有。2）它该死的长。

真的对不起。我只需要解释为什么它会崩溃`malloc`并因此导致死锁，因为它`sighandler`也需要`malloc`并且它等待前一个锁释放，而这不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:03:38.180

看起来您可能正在`malloc()`（间接地，通过`backtrace_symbols()`）信号处理程序中调用，不要。

`malloc()`不是异步信号安全的*。*在有其他代码的情况下在信号处理程序中调用它`malloc()`可能会使您陷入僵局（就像这里所做的那样）。

改为使用[`backtrace_symbols_fd()`](http://man7.org/linux/man-pages/man3/backtrace_symbols_fd.3.html)，它不会调用`malloc()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:10:37.813

字符串指向的内存可能已损坏/释放等..

由于编译器/其他库的更改，此问题可能以前存在并现在表现出来。

使用 valgrind 运行代码，以调试内存损坏问题。

# java - 调用 CardLayout 的 show 方法后强制 JPanel 重新绘制

> ID：15477387
> 
> 赞同：0
> 
> 时间：2013-03-18T12:56:58.930
> 
> 标签：java, swing, repaint, cardlayout

我正在为一门课程写一个假期推荐系统。其中的 GUI 使用 CardLayout。在主类中创建一个用户对象，它的构造函数中定义了默认名称和访问级别。此对象从 main 传递到 UserCard 面板，该面板将其传递给 Login 并登录。如果用户成功登录，则卡片面板从 Login 转换为已登录，并且应该通过调用用户来显示登录用户的用户名.getUsername(); 方法。

我的问题是这样的。由于卡片布局的工作方式，已经在 UserCards 的构造函数中创建了带有用户名 display 的面板，并使用默认值从那时起首先创建了用户对象。在卡片布局对象上调用 show 方法后，我需要找到一种方法来强制此面板重新绘制。以下是有问题的 3 个类的代码。（我已将代码粘贴限制为相关方法）。

```
//the usercards panel

        public UserCards(User u)
    {
        CardLayout cl = new CardLayout();
        this.setLayout(cl);

        UserOptionsPanel options_card = new UserOptionsPanel(cl, this);
        RegisterPanel register_card = new RegisterPanel(cl, this);
        LoggedInPanel loggedin_card = new LoggedInPanel(cl, this, u);
        LoginPanel login_card = new LoginPanel(cl, this, u, loggedin_card);

        this.add(options_card, options);
        this.add(login_card, login);
        this.add(register_card, register);
        this.add(loggedin_card, loggedin);
    }

//the Loggin action listener user is passed in as a reference to the user object created in //main. the createUser(); method is a badly named method that simply calls setter methods on //the user object's fields

    @Override
    public void actionPerformed(ActionEvent e) 
    {
        String[] vals = packData();
        try
        {
            DBConnection d = new DBConnection();
            Connection conn = d.getConnection();
            Validation v = new Validation(vals, user);
            v.getActual(conn);
            if(v.validate())
            {
                user = v.createUser();
                System.out.println(user.getUserName());
                l.revalidate();
                cl.show(pane, "loggedin");
            }
            else
            {
                lbl_statusmsg.setText("Password Incorrect");
                lbl_statusmsg.repaint();
            }

        }
        catch(ClassNotFoundException | SQLException ex)
        {
            ex.printStackTrace();
        }
    }

//the loggedin constructor

public class LoggedInPanel extends JPanel
{
    private User user;
    private JLabel lbl_details;
    public LoggedInPanel(CardLayout cl, Container pane, User u)
    {
        super();
        user = u;
        this.setLayout(new BoxLayout(this, BoxLayout.Y_AXIS));

        lbl_details = new JLabel();
        lbl_details.setText("Welcome "+user.getUserName());

        this.add(lbl_details);
    }    
} 
```

抱歉，如果我没有说得太清楚，我不会寻求帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:06:07.813

你的意思是这样的吗？

```
CardLayout cl = new CardLayout() {
  @Override
  public void show(java.awt.Container parent, String name) {
    super.show(parent, name);
    // your code here

  }
}; 
```

# iphone - 为什么在 UIWebview 中不加载 Brightcove 播放器？

> ID：15477392
> 
> 赞同：0
> 
> 时间：2013-03-18T12:57:09.833
> 
> 标签：iphone, html, ios, url, uiwebview

我是 iPhone 开发的菜鸟，我无法将 Brightcove 播放器加载到`UIWebView`. 我很清楚iOS不能播放flash，但我不需要播放视频。我只希望播放器及其缩略图在 webView 中可见。当我通过 webview 中的 url 链接加载 Brightcove 播放器时，它工作正常，但是当我尝试嵌入播放器时，它不会加载。非常感谢任何解决此问题的帮助。

我的代码：

```
//Via Url Link
NSString * storyLink = @"http://link.brightcove.com/services/player/bcpid1683318714001?bckey=AQ~~,AAAAC59qSJk~,vyxcsD3OtBPHZ2UIrFX2-wdCLTYNyMNn&bclid=1644543007001&bctid=2228912951001"
NSURL *kitcoURL = [NSURL URLWithString:storyLink];
NSURLRequest *requestURL = [NSURLRequest requestWithURL:kitcoURL];
[videoScreen setUserInteractionEnabled:YES];
[videoScreen loadRequest:requestURL];

//Embedding Player
//Brightcove Player
NSString *htmlStr2 = [NSString stringWithFormat:@"<html><body><object id=\"flashObj\" width=\"320\" height=\"230\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" codebase=\"http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,47,0\"><param name=\"movie\" value=\"http://c.brightcove.com/services/viewer/federated_f9?isVid=1\" /><param name=\"bgcolor\" value=\"#FFFFFF\" /><param name=\"flashVars\" value=\"videoId=2228912951001&playerID=659636031001&playerKey=AQ~~,AAAAC59qSJk~,vyxcsD3OtBM6WfpHEsDft5laXH9ASJhF&domain=embed&dynamicStreaming=true\" /><param name=\"base\" value=\"http://admin.brightcove.com\" /><param name=\"seamlesstabbing\" value=\"false\" /><param name=\"allowFullScreen\" value=\"true\" /><param name=\"swLiveConnect\" value=\"true\" /><param name=\"allowScriptAccess\" value=\"always\" /><embed src=\"http://c.brightcove.com/services/viewer/federated_f9?isVid=1\" bgcolor=\"#FFFFFF\" flashVars=\"videoId=2228912951001&playerID=659636031001&playerKey=AQ~~,AAAAC59qSJk~,vyxcsD3OtBM6WfpHEsDft5laXH9ASJhF&domain=embed&dynamicStreaming=true\" base=\"http://admin.brightcove.com\" name=\"flashObj\" width=\"320\" height=\"230\" seamlesstabbing=\"false\" type=\"application/x-shockwave-flash\" allowFullScreen=\"true\" swLiveConnect=\"true\" allowScriptAccess=\"always\" pluginspage=\"http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash\"></embed></object></body></html>",];

//Load Brightcove Player
[videoScreen loadHTMLString:htmlStr2 baseURL:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T12:59:07.617

Brightcove Player 依赖于不在 iOS 上运行的 Adob​​e Flash。

# c++ - C 链接 C++ 静态函数

> ID：15477396
> 
> 赞同：2
> 
> 时间：2013-03-18T12:57:23.220
> 
> 标签：c++, c, extern

我的问题有点简单；

`extern "C"`是否可以在 C++ 静态类函数上进行 C 链接（ ）？- 不使用包装器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:05:55.920

不，您只能简单地编写一个包装函数。

```
class X
{
public:
    static void f();
};

extern "C" void call_X_f()
{
    X::f();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:07:18.717

正如我在评论中所说，你不能。但是你可以达到同样的净效果。

这就是我所说的：

```
class A;
extern "C" void foo(A*);

class A
{
    int i;
    friend void foo(A*);
};

extern "C" void foo (A* a)
{
    a->i = 10;
}

int main()
{
    A a;
    foo(&a);
    return 0;
} 
```

[在这里](http://ideone.com/IMont8)可以在 gcc 4.7.2 上编译

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:32:02.180

`extern "C"`不能应用于静态成员函数。但由于目标是从汇编程序调用函数，只需在汇编程序代码中使用错位名称即可。这里没有什么魔法；你需要的只是名字。

# php - 在 jQuery 移动应用程序中显示用户特定的课程和作业

> ID：15477397
> 
> 赞同：0
> 
> 时间：2013-03-18T12:57:26.310
> 
> 标签：php, jquery, session, jquery-mobile, global-variables

我目前正在使用 jQuery Mobile 和 MVC 框架开发移动应用程序。它用作任务/作业管理器，允许用户输入班级信息（姓名、讲师、描述等）和每个班级的作业信息（标题、注释、到期日期等）

我已经使用会话变量创建了一个登录页面，并且可以成功登录。登录后，我有一个默认操作 =“list_assignments”，它采用所有类名并将它们转换为列表视图的分隔符，其中包含每个类下的分配。

我的问题是，登录时我会看到所有用户的每个分配。

我在 MySQL 中有 3 个表，

*   作业（assign_id[PKey and AutoInc]、assign_title、note、dueDate、user_id、class_id）
*   类（class_id[Pkey & AI]、class_name、class_instructor、class_description、user_id）
*   用户（user_id[Pkey & AI]、用户名、密码）

assignment_tracker/index.php（控制器）

```
if ($action == 'list_assignments') {

    // Get the current user ID
   @ $user_id = $_SESSION['user_id'];
    if (!isset($user_id)) {
        $user_id = 1;
    }
    // Get the current class ID
   @ $class_id = $_GET['class_id'];
    if (!isset($class_id)) {
        $class_id = 1;
    }

    // Get assignment and class data
    $class_name = get_class_name($class_id);
    $classes = get_classes();

    // needs to be looped for each class within assignment_list.php
    $assignments = get_assignments_by_class($class_id);

    // Display the assignment list, or build "the view"
    include('view/assignment_list.php');

} 
```

assignment_tracker/view/assignment_list.php

```
 <?php include ('header.php'); ?>

    <?php print $_SESSION['user_id']; ?>

    <div data-role="content" id="assignment_list">
    <!-- create 2 foreach loops, 1 for classes to be listed and organized by id in list dividers and another for listing individual assignments within each class -->   
     <ul data-role="listview">

     <!--classes loop-->
     <?php foreach ($classes as $class) : ?>

    <li data-role="list-divider"><?php echo $class['class_name']; ?></li>

    <?php $assignments=get_assignments_by_class($class['class_id']); ?> 
    <?php foreach ($assignments as $assignment) : ?><!--assignments loop-->
    <?php print'<li><a href="index.php?action=show_assign_details&assign_id='.$assignment['assign_id'].'&class_id='.$assignment['class_id'].'">'.$assignment['assign_title'].'</a></li>';?>
    <?php endforeach; ?> <!--/assignments loop-->
    <?php endforeach; ?> <!--/classes loop-->

     </ul>      
    </div><!--/data-role="content"-->

    <?php include 'footer.php'; ?> 
```

assignment_tracker/model/class_db.php

```
 <?php
function get_classes() {
    global $db;
    $query = 'SELECT * FROM classes
              ORDER BY class_id';
    $result = $db->query($query);
    return $result;
}

function get_class_name($class_id) {
    global $db;
    $query = "SELECT * FROM classes
              WHERE class_id = $class_id";
    $class = $db->query($query);
    $class = $class->fetch();
    $class_name = $class['class_name'];
    return $class_name;
} 
```

assignment_tracker/model/assignment_db.php

```
<?php
function get_assignments() {
    global $db;
    $query = 'SELECT * FROM assignments
              ORDER BY assign_ID';
    $assignments = $db->query($query);
    return $assignments;
}

function get_assignments_by_class($class_id) {
    global $db;
    $query = "SELECT * FROM assignments
              WHERE assignments.class_id = '".$class_id."'
              ORDER BY assign_id";
    $assignments = $db->query($query);
    return $assignments;
} 
```

我尝试创建一个查询来根据用户的 id 查找分配，但是当我在 foreach 循环中实现解决方案时，我得到了 foreach 错误的无效参数，这意味着我的输入之一不是数组。我已经为此困扰了很多小时，所以我认为是时候使用我的资源并寻求帮助了。

如果您需要更多信息，请告诉我，我感谢所有提前提供帮助的人。

更新：

大家好，

我想出了如何通过将用户 ID 硬编码到我的查询中来获得结果。起初我认为由于某种原因它没有返回数组，但是在 phpMyAdmin 中进行测试后，当 user_id 被硬编码时，我的查询工作正常。

我在 class_db.php 中创建了一个新函数，只返回 user_id 匹配的类。我正在尝试使用`$_SESSION['user_id']`我在登录时在控制器中设置的变量。

```
function get_classes_by_user($user_id) {
global $db;
$query = 'SELECT * FROM classes
      WHERE user_id = 1
          ORDER BY class_id';
$result = $db->query($query);
return $result;
} 
```

索引.php

```
 if ($action == 'list_assignments') {

    // Get the current class ID
   @ $class_id = $_GET['class_id'];
    if (!isset($class_id)) {
        $class_id = 1;
    }
    // Get the current user ID
   @ $user_id = $_SESSION['user_id'];
    if (!isset($user_id)) {
        $user_id = 1;
    }

    // Get assignment and class data
    $class_name = get_class_name($class_id);
    $classes = get_classes();

    //new function being called with resultant array stored in $userclasses
    $userclasses = get_classes_by_user($user_id);

    // needs to be looped for each class within assignment_list.php
    $assignments = get_assignments_by_class($class_id);

    // Display the assignment list, or build "the view"
    include('view/assignment_list.php');

} 
```

assignment_list.php

```
<?php include ('header.php'); ?>
<?php print $_SESSION['user_id']; ?>
        <div data-role="content" id="assignment_list">
            <!-- create 2 foreach loops, 1 for classes to be listed and organized by id in list dividers and another for listing individual assignments within each class -->   
            <ul data-role="listview">

            <!--classes loop-->

            <?php foreach ($userclasses as $class) : ?>

                <li data-role="list-divider"><?php echo $class['class_name']; ?></li>

                <?php $assignments=get_assignments_by_class($class['class_id']); ?> 
                <?php foreach ($assignments as $assignment) : ?><!--assignments loop-->
                <?php print'<li><a href="index.php?action=show_assign_details&assign_id='.$assignment['assign_id'].'&class_id='.$assignment['class_id'].'">'.$assignment['assign_title'].'</a></li>';?>
                <?php endforeach; ?> <!--/assignments loop-->
            <?php endforeach; ?> <!--/classes loop-->

            </ul>       
        </div><!--/data-role="content"-->

<?php include 'footer.php'; ?> 
```

我将上面 foreach 循环中的 $classes 更改为 $userclasses 以匹配新函数。

有人有想法么？我知道我非常接近解决这个问题！再次感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:13:53.477

好的，所以在搞砸了我的应用程序一段时间后，我终于让它工作了。

在我的 index.php 文件中，我设置`$_SESSION['user_id']`为`$user_id`并添加了`get_classes_by_user($user_id)`函数并将结果返回给`$userclasses`

```
 if ($action == 'list_assignments') {

    // Get the current class ID
   @ $class_id = $_GET['class_id'];
    if (!isset($class_id)) {
        $class_id = 1;
    }

    // Get the current user ID
   @ $user_id = $_SESSION['user_id'];
    if (!isset($user_id)) {
        $user_id = 1;
    }

    // Get assignment and class data
    $class_name = get_class_name($class_id);
    $classes = get_classes();

    $userclasses = get_classes_by_user($user_id);

    // needs to be looped for each class within assignment_list.php
    $assignments = get_assignments_by_class($class_id);

    // Display the assignment list, or build "the view"
    include('view/assignment_list.php');
    } 
```

在 class_db.php 中，我注意到我的查询有问题。

带单引号的原文不起作用

```
function get_classes_by_user($user_id) {
    global $db;
    $query = 'SELECT * FROM classes
              WHERE user_id = $user_id
              ORDER BY class_id';
    $result = $db->query($query);
    return $result;
} 
```

用双引号更新并工作

```
function get_classes_by_user($user_id) {
    global $db;
    $query = "SELECT * FROM classes
              WHERE user_id = $user_id
              ORDER BY class_id";
    $result = $db->query($query);
    return $result;
} 
```

我查看了差异并确定如果查询中有变量，则应该用双引号括起来（不要引用我，大声笑）。我也看到了一个用花括号 {} 包裹的变量的查询，我自己尝试过，使用单引号没有区别，至少对我来说是这样。

# vim - 如何使用 ctags 跳转而不是在 macvim 中更改 PWD

> ID：15477399
> 
> 赞同：0
> 
> 时间：2013-03-18T12:57:29.913
> 
> 标签：vim, macvim, ctags

我在macvim中使用了ctags + vim-project，项目配置是这样的

```
src=/user/home/src CD = . filter="*.cpp *.h"{
   xxx.cpp
   xxx.h
} 
```

因此，当我打开 xxx.cpp 时，将 PWD 设置为 /user/home/src 的路径，并在 /user/home/src 的路径中使用 ctags 制作项目的标签文件，这样我就可以加载标签文件在项目的任何地方。但是在macvim中，当我用ctags跳转到另一个路径p1中的文件时，PWD变成了p1，我不能再跳转到ctags了！请问如何配置macvim，当我用 ctags 跳转到另一个文件时，密码没有改变？非常感谢！

# forms - ExtJS - 动态添加复选框到表单

> ID：15477400
> 
> 赞同：0
> 
> 时间：2013-03-18T12:57:34.733
> 
> 标签：forms, extjs, checkbox, extjs3, fieldset

我正在尝试将新的表单组件动态添加到表单内的字段集中，并且我正在努力使用复选框组件。

我在 firebug 上收到“TypeError：Ext.form.Checkbox 不是构造函数”错误。这是我的代码：

```
...
 Ext.getCmp('component1').add(new Ext.form.DisplayField({value: "aValue"}));
 Ext.getCmp('component1').doLayout();

 Ext.getCmp('component2').add(new Ext.form.Checkbox({fieldlabel:"aLabel",
                                     name: "aName"}));
 Ext.getCmp('component2').doLayout();
 ... 
```

两个组件 (component1,component")`xtype:fieldset`看起来完全一样。第一个组件`DysplayField`可以正常工作，但复选框不能。

你能帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T03:41:36.417

您可能需要检查 component2 的布局。或者比较component1和component2之间的布局。尝试将布局设置为相同。

# list - Haskell 按顺序向元组/列表添加元素

> ID：15477415
> 
> 赞同：0
> 
> 时间：2013-03-18T12:58:05.720
> 
> 标签：list, haskell

我已经定义了 (String, Int) 对的列表。

```
 type PatientList = [(String,Int)] 
```

我需要以 'name' 和 'number' 的形式将数据添加到此列表中，其中 number 将随着列表中的每个添加而增加，例如添加 3 个名称后的列表（或元组）将如下所示：

```
 [("bob", 1), ("ted", 2), ("harry", 3)] 
```

将使用以下代码捕获名称：

```
 do putStr "You are? "
  name <- getLine 
```

我目前的解决方案是创建一个名称列表，例如（bob、ted、harry），然后使用 zip，将这些列表组合如下：

```
 zip = [1...]["bob","ted","harry"] 
```

该解决方案不能满足我的要求，因为我希望在不同时间添加到列表中而不是组合在一起。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:28:43.587

以相反的顺序保持列表不是更好吗？

```
[("harry", 3), ("ted", 2), ("bob", 1)] 
```

比添加将在恒定时间内：

```
add :: PatientList -> String -> PatientList
add [] newName = [newName]
add ((oldName, x):xs) newName = (newName, x+1):(oldName, x):xs 
```

当您需要按顺序排列整个列表时，您只需 O(lenght yourList) 线性时间：

```
reverse patientList 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T13:23:24.123

您可以使用包中的[`IntMap`](http://hackage.haskell.org/packages/archive/containers/0.5.2.1/doc/html/Data-IntMap-Lazy.html), `containers`。

```
import Data.IntMap (IntMap)
import qualified Data.IntMap as IntMap

type PatientList = IntMap String

registerPatient :: PatientList -> String -> PatientList
registerPatient pList name
  | IntMap.null plist = IntMap.singleton 1 name  
  | otherwise         = let (n, _) = findMax pList 
                        in IntMap.insert (succ n) name plist 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T13:23:24.520

如前所述，如果速度不是问题，则使用长度

```
add :: String -> [(String, Int)] -> [(String, Int)]
add name xs = xs ++ [(name, length xs)] 
```

但是如果你删除一个元素，这会弄乱你的身份，所以也许

```
add name xs = xs ++ [(name, 1 + ( snd (last xs) ) )] 
```

我没有尝试运行任何这些，因为我不是带有 ghc 的计算机，但你应该明白这一点。

# internet-explorer - Excel VBA Internet Explorer - 来自表中 2 列的信息

> ID：15477417
> 
> 赞同：1
> 
> 时间：2013-03-18T12:58:09.533
> 
> 标签：internet-explorer, excel, html-parsing, vba

我正在尝试从网页获取信息。我需要的信息在一个表格中，我没有直接解决它。这是页面： [http ://www.idealo.de/preisvergleich/MainSearchProductCategory.html?q=matratze](http://www.idealo.de/preisvergleich/MainSearchProductCategory.html?q=matratze)

表ID是：plist我需要的每一行都有名称“js4offer”，而不是我需要表行中的第二个和第三个“tr”，但我不知道如何循环遍历这一行中的所有元素桌子。我尝试了数千个代码片段，但没有一个在做我想做的事；）

到目前为止，这是我的代码：

```
Sub website()

    Set sht = Sheets("Tabelle4")
    rCount = 1

    Set objIE = CreateObject("InternetExplorer.application")

    With objIE
        .Visible = True
        .Navigate "http://www.idealo.de/preisvergleich/MainSearchProductCategory.html?q=Matratze"

        Do While .Busy Or .ReadyState <> 4
            DoEvents
        Loop

        Set objHTML = objIE.Document
        readText = objHTML.body.outerHTML
        Cells(1, 1) = readText

        Set myElements = objHTML.getElementById("plist")

        For Each ele In myElements

            If ele.getElementsByName("js4offer") Then
                rCount = rCount + 1
                Cells("A", rCount) = ele.Item(1)
                Cells("B", rCount) = ele.Item(2)
            End If

        Next ele

    End With

    objIE.Quit
    Set objIE = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:11:29.570

试试下面的代码：

仅供参考：在表 plist 中，除了第一个之外，所有 tr 的名称都为“js4offer”。

```
Sub website()

' Set sht = Sheets("Tabelle4")
'  rCount = 1

    Dim objIE As Object, objTbl As Object, objTR As Object
    Set objIE = CreateObject("InternetExplorer.application")

    With objIE
        .Visible = True
        .Navigate "http://www.idealo.de/preisvergleich/MainSearchProductCategory.html?q=Matratze"

        Do While .Busy Or .ReadyState <> 4
            DoEvents
        Loop

        Set objTbl = objIE.Document.getElementById("plist")
        Set objTR = objTbl.getElementsbyTagName("tr")

        rCount = 1
        On Error Resume Next
        For Each td In objTR
            Cells(rCount, 1) = td.all(0).innerText
            Cells(rCount, 2) = td.all(1).innerText
            Cells(rCount, 3) = td.all(2).innerText
           ' Cells(rCount, 4) = td.all(3).innerText
            'Cells(rCount, 5) = td.all(4).innerText
            'Cells(rCount, 6) = td.all(5).innerText
            'Cells(rCount, 7) = td.all(6).innerText
            rCount = rCount + 1
        Next
        On Error GoTo 0

    End With

    objIE.Quit
    Set objIE = Nothing

End Sub 
```

# sql-server - 使用 SQL Server 的网站的外部连接器许可证

> ID：15477418
> 
> 赞同：5
> 
> 时间：2013-03-18T12:58:13.823
> 
> 标签：sql-server, windows-server

我刚刚在与 Microsoft 许可代表交谈时发现了一些非常奇怪的事情，我想通过社区来看看这是否是任何人都知道的变化。

我问了一个关于许可 SQL Server/Windows Server 的问题，这导致我被推荐为不使用 Windows 用户的网站使用外部连接器许可证。

我将其归结为以下基本情况：

**服务器 1：**

Windows Server 2008 R2，运行 IIS 7.5，使用自定义面向公众的网站，使用本地验证机制（即非本地 Windows 用户或 AD 用户），其中用户数量（是否经过验证）是不确定的。

**服务器 2：**

Windows Server 2008 R2，运行 SQL Server 2008 R2。

服务器 1 上的网站使用经过 SQL 身份验证的登录名连接到服务器 2 上的 SQL Server。

所需的许可是：服务器 1 的 Windows 服务器许可 服务器 2 的 Windows 服务器许可 SQL Server“每处理器”许可和服务器 2 的外部连接器许可。

这似乎很荒谬，因为它使 Server 2 的 Windows 许可证成本增加了三倍。此外，就 SQL Server 而言，没有多个客户端连接，只有 1 个“设备”，然后在顶部提供大量“增值”仅来自 SQL Server 的数据。

我的问题，以前有人遇到过这个吗？这似乎是错误的，我想，对于大多数创建网站的 .NET 软件公司来说，这是最常见的情况，而且，在为少数人工作过之后，我从未听说过这个！

我看过这个问题：

[https://stackoverflow.com/questions/3072044/external-connector-licensing-with-website-hosted-on-windows](https://stackoverflow.com/questions/3072044/external-connector-licensing-with-website-hosted-on-windows)

但是，它并没有真正获得关于场景等的足够信息，也没有引用任何适当的资源。

如果有人实际上可以指向信誉良好的站点中有关此内容的部分，而不仅仅是指向通用“客户许可证”页面的链接，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-04T13:53:08.770

只是对先前出色的答案的一些补充：

*   每个单独的许可证涵盖 2 个核心：这是错误的。正如您所料，每个核心许可证都涵盖一个核心。事实上，您可以购买的产品参考 SKU 是一包 2 个核心许可证。如果您在将许可证分配给服务器时需要，此包可分为 2 个单核许可证。作为旁注，我很高兴知道在微软创建这个 SKU 的“聪明”人的名字，因为它增加了很多混乱并为我的行业带来了更多的工作，即软件资产管理 (SAM) .

*   我会在这方面与微软合作，因为他们会进行软件审计：这也是错误的。Microsoft 从不自行进行软件审核。他们总是将此委托给第三方。因此，微软对许可规则的内幕知识通常非常贫乏，我强烈建议改为询问许可专业人士，例如 SAM 顾问。

*   关于 Martin 的评论，与我们打交道的 Microsoft 许可人员（LAR）的看法不同：LAR，或 LSP，因为它现在是他们的新名称，通常是纯粹的经销商，而且它的许可知识通常也很差。他们的目标是销售最多，而不是确保他们的客户是合规的，并且优化得更少。我并不惊讶他们的想法不同。再次，请询问 SAM 专业人士。

最好的问候，吉尔斯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-24T13:48:33.760

外部连接器许可证代替 Windows Server 用户/设备 CAL： http: [//www.microsoft.com/licensing/about-licensing/client-access-license.aspx](http://www.microsoft.com/licensing/about-licensing/client-access-license.aspx) [http://www.microsoft.com/licensing /about-licensing/product-licensing.aspx](http://www.microsoft.com/licensing/about-licensing/product-licensing.aspx)

外部连接器定义为：“外部连接器 (EC) 许可证是外部用户将访问的每台服务器的 CAL 的替代方案。外部用户是非员工或现场承包商的用户。分配给服务器的 EC 许可证允许访问任何数量的外部用户，只要该访问是为了被许可人的利益而不是外部用户的利益。外部用户访问的每台物理服务器只需要一个 EC 许可证，无论运行的实例数量如何。运行实例的权利服务器软件的许可是单独许可的；EC 和 CAL 一样，只允许访问。EC 许可和 CAL 一样，是特定于版本和功能的。它们必须与被访问的服务器软件版本相同或更高。是否为外部用户获取 CAL 或 EC 的决定主要是财务问题。”

服务器处理器/核心许可证允许无限连接 - 无论是内部连接还是外部连接（只要您覆盖机器中的所有核心）。对于 SQL Core 许可证（独立于服务器：Intel 的数字乘以 1，AMD 的某些型号乘以 0.75）： http: [//go.microsoft.com/fwlink/](http://go.microsoft.com/fwlink/?LinkId=230678) ?LinkId=230678 （第 7-9 页） .

服务器 1：如果它是工作负载网络服务器，则 IIS 不需要外部连接器的 CAL - IIS 除外 ( [http://microsoftlicensereview.com/category/external-connectors/](http://microsoftlicensereview.com/category/external-connectors/) )。Windows Server 确实需要员工或现场承包商的用户/设备服务器 CAL（如果以这种方式获得许可）。对于向服务器进行身份验证的非现场用户，不仅是网站相关信息，如果为这些用户购买外部连接器许可证而不是用户/设备 CAL 更有意义，那么您会想要这样做。

服务器 2：除了与上述服务器类似的许可证外，SQL Server 还需要： 每个核心许可证（每个单独的许可证涵盖 2 个核心，您需要与机器的核心因子一样多的许可证）；或 1 个 SQL Server 许可证 + 用户/设备校准，适用于连接到正在提取 SQL 数据的站点上的网站的所有用户。

这使您无法进行多路复用，如下所述：http: [//www.microsoft.com/licensing/about-licensing/briefs/multiplexing.aspx](http://www.microsoft.com/licensing/about-licensing/briefs/multiplexing.aspx) [http://go.microsoft.com/fwlink/?LinkId=230678](http://go.microsoft.com/fwlink/?LinkId=230678)（第 17 页）。

这是一篇进一步解释的文章（她提到了场外承包商，这与现场承包商不同 - 这需要用户/设备 CAL）： http: [//www.networkworld.com/community/blog/microsoft-cals-and -外部连接器许可证](http://www.networkworld.com/community/blog/microsoft-cals-and-external-connector-license)

因此，看起来由于用户通过服务器 1 上的 Web 应用程序连接到 SQL 服务器，而不是对服务器 2 进行身份验证（如果服务器 1 直接使用字符串而不是身份验证连接到 SQL），它看起来不像服务器 2 上不需要外部连接器许可证（但我会选择 Microsoft，因为他们会进行软件审核）。

希望有帮助。

# scala - 没有括号和显式所有者对象引用的单参数方法调用

> ID：15477419
> 
> 赞同：0
> 
> 时间：2013-03-18T12:58:14.467
> 
> 标签：scala

据我初学者对 Scala 的了解，没有任何方法可以达到最后一行。我希望我弄错了，我只是想确认一下。另外，我不明白为什么，因为编译器应该`f`从 import 语句中知道方法的所有者对象。

```
object A { def f(s: Any) = println(s) }
import A.f
A f 1 //Works
f 2 // Does not compile 
```

为了澄清，有两个问题：

1.  **应该如何调用没有**括号和显式所有者对象引用的单参数方法？（见主题。）
2.  编译器无法理解最后一条语句的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:57:23.897

```
object A { def f(s: Any) {println(s)} }
import A.f
A f 1 //works
f(2) // works 
```

[什么时候可以省略括号、点、大括号、=（函数）等的精确规则是什么？](https://stackoverflow.com/questions/1181533/what-are-the-precise-rules-for-when-you-can-omit-parenthesis-dots-braces-f)

# android - 如何在android的surfaceview中的特定位置绘制滚动条

> ID：15477421
> 
> 赞同：1
> 
> 时间：2013-03-18T12:58:20.390
> 
> 标签：android, canvas, scrollbar

我正在xml文件中获取surfaceview并绘制文本，通过覆盖ondraw（）方法在surfaceview上绘制矩形，并且我想在surfaceview上制作一些可滚动的部分。

供参考 [——https://www.youtube.com/watch?v=ycYp356qrno](https://www.youtube.com/watch?v=ycYp356qrno)

在这个应用程序中，所有任务都显示且进度状态可滚动的一页

请帮助...

# jquery - 打开时刷新浏览器缓存

> ID：15477423
> 
> 赞同：-2
> 
> 时间：2013-03-18T12:58:22.800
> 
> 标签：jquery, django, firefox, nginx

我有一个网页，它使用 jquery.ajax 来执行一些操作。当我调用 ajax 操作时，关闭浏览器然后打开它，我看不到 ajax 所做的更改。如何强制浏览器在打开时刷新页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:02:14.983

将此添加到`<head>`段中：

```
<meta http-equiv="cache-control" content="no-cache"> 
```

这应该会强制您的浏览器在每次加载页面时重新加载页面

这是防止ajax被缓存的东西：

```
$.ajax({
    url: "test.html",
    cache: false
}).done(function( html ) {
    $("#results").append(html);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:39:17.150

尝试加入提出的解决方案。`location.reload()`only 不起作用，因为浏览器将无限重新加载页面。

尝试在 document.ready() 上对 webserver 进行 ajax 调用，这将仅检查页面上的某些内容是否已更改。将其与当前页面内容进行对比，并在需要时刷新。您将需要`cache`在 ajax 调用中使用参数。没有它，调用将返回其先前的状态。

# django - 如何在以下环境中设置子域：nginx、supervisor、django、gunicorn？

> ID：15477425
> 
> 赞同：0
> 
> 时间：2013-03-18T12:58:27.657
> 
> 标签：django, nginx, ubuntu-12.04, gunicorn, supervisord

我有一个带有 nginx+gunicorn+supervisor 的 django 应用程序设置，并且工作正常。但我需要创建一个子域用于分期或开发，如“dev.domain.com”。我在 nginx.conf 中为我的子域添加了另一个服务器块。但是我的子域 url 总是指向主域站点。所以我按照其他帖子的建议更改了 proxy_pass 中的端口号。但由于 gunicorn 和 supervisord，我需要在“/etc/supervisord/conf.d/subdomain.conf”中为此子域添加另一个 conf 文件，但是当我重新加载 supervisord 时，它无法启动我的子域程序。下面是我的 nginx.conf、subdomain.conf、script.sh： **nginx.conf**

```
http {
include       mime.types;
default_type  application/octet-stream;

#log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
#                  '$status $body_bytes_sent "$http_referer" '
#                  '"$http_user_agent" "$http_x_forwarded_for"';

#access_log  logs/access.log  main;

sendfile        on;
#tcp_nopush     on;

#keepalive_timeout  0;
keepalive_timeout  65;

gzip  on;
gzip_static  on;
gzip_types application/x-javascript text/css text/html application/json text/css text/json;

server {
listen   80;
server_name domain_name
# no security problem here, since / is alway passed to upstream
root /home/path/to/project/base
# serve directly - analogous for static/staticfiles
location /static/ {
    # if asset versioning is used
    if ($query_string) {
        expires max;
    }
    autoindex off;
    root /home/path/to/static/;
}
location / {
    proxy_pass_header Server;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Scheme $scheme;
    proxy_connect_timeout 10;
    proxy_read_timeout 10;
proxy_pass http://localhost:8000/;
    proxy_set_header X-Forwarded-For $remote_addr;
}
}

server {
listen   80;
server_name subdomain_name
# no security problem here, since / is alway passed to upstream
root /home/path/to/subdomain_directory(which is different, you can say it is fully differnt project which i want to run as development project);
# serve directly - analogous for static/staticfiles

location / {
    proxy_pass_header Server;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Scheme $scheme;
    proxy_connect_timeout 10;
    proxy_read_timeout 10;
    proxy_pass http://localhost:9000/;
    proxy_set_header X-Forwarded-For $remote_addr;
}
}
} 
```

**脚本.sh**

```
set -e
NUM_WORKERS=4
# user/group to run as
USER=user_name
#GROUP=your_unix_group
cd /home/path/to/subdomain_base
source subdomain_virtualenv_activation
LOGFILE=log_file_path
LOGDIR=$(dirname $LOGFILE)
test -d $LOGDIR || mkdir -p $LOGDIR
exec virtualenvironment/bin/gunicorn_django -w $NUM_WORKERS \
--user=$USER --log-level=debug \
--log-file=$LOGFILE 2>>$LOGFILE 
```

**子域.conf**

```
[program:programname]
directory = /home/path/to/subdomainbase/
user = user_name
command = /home/path/to/script.sh
stdout_logfile = /home/path/to/log
stderr_logfile = /home/path/to/log 
```

我也有一个 procfile，如 gunicorn 中所建议的那样，它位于基本目录 **Procfile 中**

```
./manage.py runserver_plus 0.0.0.0:$PORT 
```

好的，这些是我的配置。请检查我在哪里做错了。我只想将我的开发服务器作为不同的项目运行，但在与子域相同的域下。毕竟，无论我在做什么更改，主域都可以在相同的过程中正常工作。如果您需要有关此错误的更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:11:08.973

**编辑**

我正在再次阅读您的帖子，并且...您不应该在您的 gunicorn 脚本中设置 ADDRESS 吗？gunicorn 默认使用端口 8000，也许您的子域正在尝试使用相同的端口？

**结束编辑**

我有两个使用 nginx、gunicorn 和 supervisor 运行的 Django 应用程序，就像你想做的那样（嗯，不一样，但非常相似，我有两个域和一个子域）。我看不出你的错误在哪里，我认为一定是在 nginx 配置中。也许是“根”行？

当您尝试使用“supervisorctl”命令启动它时，您是否看到 supervisord 是否返回错误？

我可以向您展示我的配置，您可以进行比较：

我有两个 .conf 文件用于**nginx**：

域1.conf：

```
server {
    listen  80;
    server_name  domain1.net;
    return 301 $scheme://www.domain1.net$request_uri;    
}

server {
    listen 80;
    server_name www.domain1.net;
    access_log /var/log/nginx/domain1.log;

    location /static {
        alias /var/www/domain1/media/;
        autoindex on;
        access_log off;
    }

    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Forwarded-For  $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;
        proxy_pass http://127.0.0.1:8000/;
    }

} 
```

和 domain2.conf：

```
server {
    listen 80;
    server_name subdomain.domain2.es;
    access_log /var/log/nginx/domain2.log;

    location /static {
        alias /var/www/dev/domain2/domain2/static/;
        autoindex on;
        access_log off;
    }

    location / {
        proxy_pass_header Server;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        proxy_set_header X-Forwarded-For  $remote_addr;
        proxy_set_header X-Scheme $scheme;
        proxy_connect_timeout 10;
        proxy_read_timeout 10;
        proxy_pass http://127.0.0.1:8005/;
    }

} 
```

我的两个**gunicor 脚本**是相同的，只是在其中一个中更改了路径和地址：

```
#!/bin/bash
set -e
LOGFILE=/var/log/gunicorn/domain1.log
LOGDIR=$(dirname $LOGFILE)
NUM_WORKERS=1
# user/group to run as
USER=user
GROUP=user
ADDRESS=127.0.0.1:8005
cd /var/www/dev/domain1
source /path/to/venv/domain1/bin/activate
test -d $LOGDIR || mkdir -p $LOGDIR
exec gunicorn_django -w $NUM_WORKERS --bind=$ADDRESS \
  --user=$USER --group=$GROUP --log-level=debug \
  --log-file=$LOGFILE 2>>$LOGFILE 
```

我的两个**主管**脚本也相同：

```
[program:domain1]
directory = /var/www/dev/domain1/
user = user
command = /path/to/bin/gunicorn_domain1.sh
stdout_logfile = /var/log/nginx/domain1.log
stderr_logfile = /var/log/nginx/domain1.log 
```

我希望你觉得这很有帮助。

# tcp - 为什么在机器收到 SYN/ACK 数据包后内核将 RST 发送到远程 TCP 服务器？

> ID：15477427
> 
> 赞同：0
> 
> 时间：2013-03-18T12:58:33.173
> 
> 标签：tcp, network-programming

我使用原始套接字构建一个 tcp 客户端程序并在机器 A 上运行它，我在机器 B 上运行一个常规的 tcp 服务器程序

基于原始套接字的客户端程序首先发送一个 SYN 数据包，然后它从远程 tcp 服务器接收一个 SYN/ACK 数据包，然后机器 A 的内核向远程 tcp 服务器发送一个 RST

序列号和确认序列号很好有什么潜在原因？
以及如何处理？谢谢！

顺便说一句：我使用 tcpdump 在远程机器 B 上捕获数据包，它显示来自客户端的 SYN 数据包的“TCP 端口号已重用”，实际上在客户端发送 SYN 之前，我使用

```
netstat -tnp 
```

检查正在进行的 tcp 会话，它什么也没显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:01:21.007

这是完全正常的。如果一台机器收到它不期望的 SYN/ACK 数据包，它应该以 RST 响应，让对方知道它不知道或对该连接不感兴趣。内核发送了一个 RST，因为这是它应该做的——它不知道你的程序在做什么。

如果您尝试在已经有 TCP 堆栈的机器上运行自己的 TCP 堆栈，则必须阻止常规 TCP 堆栈响应您的堆栈试图与之通信的机器——否则，它们将与两个不可能工作的 TCP 堆栈交谈。

# ruby - 命名类.new

> ID：15477432
> 
> 赞同：4
> 
> 时间：2013-03-18T12:58:56.223
> 
> 标签：ruby, class

为什么它为 Class.new 分配名称/常量会以这种方式表现？

```
c = Class.new #=> <Class:0xnnnnnnn>
puts c  #=> <Class:0xnnnnnnn>

b = c
puts b #=> <Class:0xnnnnnnn>

NewClass = c   #=> NewClass  <shouldn't it be same as above #=> <Class:0xnnnnnnn>
puts c  #=> NewClass  <and now c has a name although it was not the left operand above> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:02:45.173

因为这就是红宝石的工作原理。（*我今天的第二个答案是从这句话开始的：）*）

您可以创建动态匿名类并使用它们。但是在第一次分配给常量时，该类将常量的名称作为自己的名称。这是最后的，你现在不能改变名字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T13:02:27.030

后者相当于使用`kernel::const_set`

语义`class NewClass`上等价于

```
c = Class.new
Kernel::const_set :NewClass, c 
```

并分配给一个常量 ie`NewClass = c`在语义上等价于

```
Kernel::const_set :NewClass,c 
```

所以当你写

```
c = Class.new
NewClass = c 
```

它在语义上与写作相同

```
class NewClass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:06:59.760

NewClass 是对常量的引用。任何以大写字母开头的引用都是常量，并在执行期间保持不变。

如果您要对这些变量中的任何一个调用“.object_id”，它们将是相同的。

如果您调用“Module.constants”，您会在顶级常量列表中看到 NewClass。参考将从那里拉出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:24:16.283

这就是[`Module#name`](http://Ruby-Doc.Org/core-2.0/Module.html#method-i-name)和[`Module#inspect`](http://Ruby-Doc.Org/core-2.0/Module.html#method-i-inspect)/[`Module#to_s`](http://Ruby-Doc.Org/core-2.0/Module.html#method-i-to_s)的定义方式。

# php - mysql存储日期和时间的格式是什么？

> ID：15477433
> 
> 赞同：2
> 
> 时间：2013-03-18T12:58:57.027
> 
> 标签：php, mysql

在创建表时，我定义了一列`DATE`类型和一列`TIME`类型。当我使用`php script`like 插入值时：

```
date--> 2013-11-11
time--> 12:12:12 
```

当我查询 sql 浏览器时，我以完全相同的方式看到这些值。但我不知道它存储`date`和的格式`time`。喜欢`yyyy-mm-dd`或`yyyy-dd-mm`。

有什么办法可以改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:04:10.113

日期和时间以“YYYY-MM-DD”和“YYYY-MM-DD HH:MM:SS”格式存储在 MySQL 中，这不一定是您希望在网页或应用程序中显示的格式。有两种方法可以将日期和时间重新格式化为所需的格式。一种是在 MySQL 的 SQL 查询中调用 DATE_FORMAT() 函数，另一种是使用编程语言从 MySQL 数据库中检索数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:04:19.157

从[MySQL 5.1](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)开始：

> DATE 类型用于具有日期部分但没有时间部分的值。MySQL 以 'YYYY-MM-DD' 格式检索和显示 DATE 值。支持的范围是“1000-01-01”到“9999-12-31”。

对于第二个问题：您不能更改存储的默认 DATE 格式，另请参阅此[问题](https://stackoverflow.com/questions/3350465/how-to-change-default-date-format-when-creating-table-in-mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:01:22.417

日期时间为 Ymd H:i:s 格式，或年月日和时分秒。如果只使用一部分，格式保持不变。

如果你想改变格式，有很多方法。最简单的方法是做类似的事情`return date("Y-d-m H:i:s", strtotime($mysqldatetime));`（将其变成荷兰日期）；

请记住，您使用的是两个单独的列，一列用于时间，一列用于日期。如果您只使用一列，则缺失值将填充默认值（时间为`00:00:00`，日期为`1970-01-01`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:04:53.633

[http://dev.mysql.com/doc/refman/5.5/en/datetime.html](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)

> MySQL 以 'YYYY-MM-DD' 格式检索和显示 DATE 值

[http://dev.mysql.com/doc/refman/5.5/en/time.html](http://dev.mysql.com/doc/refman/5.5/en/time.html)

> MySQL 以 'HH:MM:SS' 格式检索和显示 TIME 值

我不相信这可以改变。但你不在乎。[`DATE_FORMAT()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)您可以使用和[`TIME_FORMAT()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_time-format)函数以您喜欢的格式提取日期和时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T13:06:21.423

如果您想知道 Date 列的内部存储，您可以查看[Date and Time Data Type Representation](http://dev.mysql.com/doc/internals/en/date-and-time-data-type-representation.html)，但我认为您想选择不同格式的日期；其他人已经回答了这个问题。

它以 3 个字节存储，并且始终为 YYYY-MM-DD。

# javafx-2 - ScalaFX TableView 中的整数列

> ID：15477449
> 
> 赞同：4
> 
> 时间：2013-03-18T12:59:44.487
> 
> 标签：javafx-2, scalafx

我是 ScalaFX 的新手。我正在尝试调整一个基本的 TableView 示例，以包含整数列。

到目前为止，我已经想出了以下代码：

```
class Person(firstName_ : String, age_ : Int) {
  val name = new StringProperty(this, "Name", firstName_)
  val age = new IntegerProperty(this, "Age", age_)
}

object model{
  val dataSource = new ObservableBuffer[Person]()
  dataSource += new Person("Moe",   45)
  dataSource += new Person("Larry", 43)
  dataSource += new Person("Curly", 41)
  dataSource += new Person("Shemp", 39)
  dataSource += new Person("Joe",   37)
}

object view{
  val nameCol = new TableColumn[Person, String]{
    text = "Name"
    cellValueFactory = {_.value.name}
  }

  val ageCol = new TableColumn[Person, Int]{
    text = "Age"
    cellValueFactory = {_.value.age}
  }
}

object TestTableView extends JFXApp {
  stage = new PrimaryStage {
    title = "ScalaFx Test"
    width = 800; height = 500
    scene = new Scene {      
      content = new TableView[Person](model.dataSource){
        columns += view.nameCol
        columns += view.ageCol
      }
    }
  }
} 
```

问题是，虽然`nameCol`效果很好，但`ageCol`它甚至无法编译。

在该行`cellValueFactory = {_.value.age}`中，我收到类型不匹配错误。它期待一个`ObservableValue[Int,Int]`但得到一个`IntegerProperty`。

我正在使用为 Scala 2.10 编译的 ScalaFX 1.0 M2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T03:14:16.293

更改`IntegerProperty`为 ScalaFX `ObjectProperty[Int]`，简单地说：

```
val age = ObjectProperty(this, "Age", age_) 
```

其余的可以保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:59:30.323

所以试试...

```
TableColumn<Person, String> firstNameCol = new TableColumn<>("First Name"); 
```

或表格动作

```
TableColumn<Person, Boolean> actionCol = new TableColumn<>("Action");
actionCol.setSortable(false);
actionCol.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<Person, Boolean>, ObservableValue<Boolean>>() {
  @Override public ObservableValue<Boolean> call(TableColumn.CellDataFeatures<Person, Boolean> features) {
    return new SimpleBooleanProperty(features.getValue() != null);
  }
}); 
```

# xml - 需要有关 XSLT 逻辑的帮助

> ID：15477451
> 
> 赞同：0
> 
> 时间：2013-03-18T12:59:56.003
> 
> 标签：xml, xslt

谁能帮我在此处获取 XSLT 逻辑。我已将要求解释为输出中的注释。请找到以下是输出和输入。

输入：

```
 <OutputParameters>

  <OUT_SHIPMENT_TBL>
    <OUT_SHIPMENT_TBL_ITEM>
    <SLevel1>1</SLevel1>
    <SLevel1>S</SLevel1>
      <DELIVERY_ID>2334356776</DELIVERY_ID>
      <ORDER_SHIP_CODE_EXT>3467</ORDER_SHIP_CODE_EXT>
      <CUSTOMER_NUMBER>4838</CUSTOMER_NUMBER>
      <OEH_POSTAL_CODE  xsi:nil="true"/>
      <OEH_COUNTRY  xsi:nil="true"/>

      <ORDER_TBL_TYPE>
        <ORDER_TBL_TYPE_ITEM>
        <OLevel1>2333</OLevel1>
        <OLevel2>344</OLevel2>
        <OLevel3>O</OLevel3>
          <PURCHASE_ORDER_NUMBER>95678</PURCHASE_ORDER_NUMBER>
          <TOTAL_ORDER_GROSSWEIGHT>345</TOTAL_ORDER_GROSSWEIGHT>
          <TOTAL_ORDER_SHIPQTY>32</TOTAL_ORDER_SHIPQTY>

          <ORDER_LINES_TBL_TYPE>
            <ORDER_LINES_TBL_TYPE_ITEM>
              <!-- unbounded -->

              <ILevel1>2333</ILevel1>
              <ILevel2>2333</ILevel2>
              <ILevel3>2333</ILevel3>
              <PALLET_NUMBER>4546</PALLET_NUMBER>
              <CARTON_NUMBER>344235</CARTON_NUMBER>
              <WEB_TRANSACTION_ID>346788</WEB_TRANSACTION_ID>
              <FREIGHT_TERMS_CODE_INT>243546</FREIGHT_TERMS_CODE_INT>
              <VENDOR_NUM>344677</VENDOR_NUM>
              <ITEM>50116</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>

            <ORDER_LINES_TBL_TYPE_ITEM>
            <ILevel1>2333</ILevel1>
              <ILevel2>2333</ILevel2>
              <ILevel3>2333</ILevel3>
              <PALLET_NUMBER>4546</PALLET_NUMBER>
              <CARTON_NUMBER>344235</CARTON_NUMBER>
              <WEB_TRANSACTION_ID>346788</WEB_TRANSACTION_ID>
              <FREIGHT_TERMS_CODE_INT>243546</FREIGHT_TERMS_CODE_INT>
              <VENDOR_NUM>344677</VENDOR_NUM>
              <ITEM>50116</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>

          </ORDER_LINES_TBL_TYPE>
        </ORDER_TBL_TYPE_ITEM>

        <!-- 2 nd Order -->

      </ORDER_TBL_TYPE>
    </OUT_SHIPMENT_TBL_ITEM>
  </OUT_SHIPMENT_TBL>
</OutputParameters> 
```

1）有多个`<ORDER_TBL_TYPE_ITEM>`。

2）内部`<ORDER_TBL_TYPE_ITEM>`多重`<ORDER_LINES_TBL_TYPE_ITEM>`存在。

3）对于每次迭代，我们需要为下面显示的元素分配一个数字序列，如果先前 = 当前忽略 level1、2、3 元素并直接传递 ITEM 值，则条件也存在。

输出：

```
 <OutputParameters>

  <OUT_SHIPMENT_TBL>
    <OUT_SHIPMENT_TBL_ITEM>
    <SLevel1>1</SLevel1>
    <SLevel1>S</SLevel1>
      <DELIVERY_ID>3335</DELIVERY_ID>
      <ORDER_SHIP_CODE_EXT>445</ORDER_SHIP_CODE_EXT>
      <CUSTOMER_NUMBER>4838</CUSTOMER_NUMBER>
      <OEH_POSTAL_CODE  xsi:nil="true"/>
      <OEH_COUNTRY  xsi:nil="true"/>

      <ORDER_TBL_TYPE>
        <ORDER_TBL_TYPE_ITEM>
          <!-- unbounded -->
          <OLevel1>2</OLevel1>
        <OLevel2>1</OLevel2>
        <OLevel3>O</OLevel3>
          <PURCHASE_ORDER_NUMBER>44342</PURCHASE_ORDER_NUMBER>
          <!-- assign sequnce number starts from 2 -->
          <DELIVERY_ID>133232</DELIVERY_ID>
          <!-- hard code value as 1 -->
          <TOTAL_ORDER_GROSSWEIGHT>42323C</TOTAL_ORDER_GROSSWEIGHT>
          <!-- hard code value as C -->
          <TOTAL_ORDER_SHIPQTY>32</TOTAL_ORDER_SHIPQTY>

          <ORDER_LINES_TBL_TYPE>

              <!-- unbounded -->

            <!-- The UniqueID is the temporary variable.PALLET_NUMBER is coming from input.

if PALLET_NUMBER!=NULL then

UniqueID=substring (PALLET_NUMBER, 10)

if PALLET_NUMBER =NULL then

UniqueID=substring (CARTON_NUMBER, 7) -->

<!-- Condition here If previous UniqueID != current UniqueID  and PALLET_NUMBER!=NULL  then-->IF TRUE
<ORDER_LINES_TBL_TYPE_ITEM>

              <ILevel1>3</ILevel1>
               <!-- assign sequnce number starts from 3 -->
              <ILevel2>2</ILevel2>
               <!-- assign sequnce number of <Olevel1> -->
              <ILevel3>T</ILevel3>
              <!-- hard code value as T-->
              <PALLET_NUMBER>45463456788899432445</PALLET_NUMBER>
              <CARTON_NUMBER>344235</CARTON_NUMBER>
              <WEB_TRANSACTION_ID>3y4</WEB_TRANSACTION_ID>

              <FREIGHT_TERMS_CODE_INT>442</FREIGHT_TERMS_CODE_INT>

              <VENDOR_NUM>C4466I</VENDOR_NUM>

              <ITEM>50116</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>

            <!-- Condition here If previous UniqueID != current UniqueID  and PALLET_NUMBER =NULL  then-->iF TRUE
            <ORDER_LINES_TBL_TYPE_ITEM>
            <ILevel1>4</ILevel1>
               <!-- assign sequnce number increment -->
              <ILevel2>2</ILevel2>
               <!-- assign sequnce number of <Olevel1> -->
              <ILevel3>P</ILevel3>
              <!-- hard code value as T-->
              <PALLET_NUMBER></PALLET_NUMBER>
              <CARTON_NUMBER>344235</CARTON_NUMBER>
              <WEB_TRANSACTION_ID>3y4</WEB_TRANSACTION_ID>

              <FREIGHT_TERMS_CODE_INT>442</FREIGHT_TERMS_CODE_INT>

              <VENDOR_NUM>C4466I</VENDOR_NUM>

              <ITEM>50116</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>

            <ORDER_LINES_TBL_TYPE_ITEM>
            <ILevel1>5</ILevel1>
               <!-- assign sequnce number increment -->
              <ILevel2>4</ILevel2>
               <!-- if T Level is true then <ILevel2> of T level 
               if P Level is true then <ILevel2> of P level 
               -->
              <ILevel3>I</ILevel3>
              <!-- hard code value as I-->
              <PALLET_NUMBER></PALLET_NUMBER>
              <CARTON_NUMBER>344235</CARTON_NUMBER>
              <WEB_TRANSACTION_ID>3y4</WEB_TRANSACTION_ID>

              <FREIGHT_TERMS_CODE_INT>442</FREIGHT_TERMS_CODE_INT>

              <VENDOR_NUM>C4466I</VENDOR_NUM>

              <ITEM>50116</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>

<!-- Condition here If previous UniqueID != current UniqueID  and PALLET_NUMBER!=NULL  then-->IF FALSE

            < NO LOOP HERE FOR T LEVEL>

            <!-- Condition here If previous UniqueID != current UniqueID  and PALLET_NUMBER =NULL  then-->iF TRUE
            <ORDER_LINES_TBL_TYPE_ITEM>
            <ILevel1>6</ILevel1>
              <ILevel2>2</ILevel2>
              <ILevel3>P</ILevel3>
              <WEB_TRANSACTION_ID>685858</WEB_TRANSACTION_ID>
              <FREIGHT_TERMS_CODE_INT>87899</FREIGHT_TERMS_CODE_INT>
              <VENDOR_NUM>457482</VENDOR_NUM>
              <ITEM>50119</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>

            <ORDER_LINES_TBL_TYPE_ITEM>
            <ILevel1>7</ILevel1>
              <ILevel2>6</ILevel2>
              <ILevel3>I</ILevel3>
              <WEB_TRANSACTION_ID>685858</WEB_TRANSACTION_ID>
              <FREIGHT_TERMS_CODE_INT>87899</FREIGHT_TERMS_CODE_INT>
              <VENDOR_NUM>457482</VENDOR_NUM>
              <ITEM>50119</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>

</ORDER_LINES_TBL_TYPE>

        </ORDER_TBL_TYPE_ITEM>

        <!-- 2 nd Order -->

      </ORDER_TBL_TYPE>
    </OUT_SHIPMENT_TBL_ITEM>
  </OUT_SHIPMENT_TB 
```

升>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:34:39.900

您正在寻找的条件逻辑类似于以下内容。我在这里假设上下文节点是一个`<colorItems>`元素。

```
<xsl:if test="color != preceding-sibling::colorItems[1]/color">
    ... process Level1, 2, 3 ...
</xsl:if>
<xsl:copy-of select="color" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:37:23.500

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:strip-space elements="*" />

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="OUT_SHIPMENT_TBL_ITEM | 
                       ORDER_TBL_TYPE_ITEM[1] | 
                       ORDER_LINES_TBL_TYPE_ITEM[1]">
    <xsl:param name="currentSequenceNo" select="0" />

    <xsl:apply-templates select="." mode="iterate">
      <xsl:with-param name="currentSequenceNo" select="$currentSequenceNo" />
      <xsl:with-param name="parentSequenceNo" select="$currentSequenceNo" />
    </xsl:apply-templates>
  </xsl:template>
  <xsl:template match="ORDER_TBL_TYPE_ITEM | ORDER_LINES_TBL_TYPE_ITEM" />

  <xsl:template match="*" mode="iterate">
    <xsl:param name="currentSequenceNo" />
    <xsl:param name="parentSequenceNo" />

    <xsl:variable name="differentFromPreviousStr">
      <xsl:apply-templates select="." mode="different" />
    </xsl:variable>
    <xsl:variable name="differentFromPrevious"
                  select="$differentFromPreviousStr = 'true'" />
    <xsl:variable name="thisSequenceNo"
                  select="$currentSequenceNo + $differentFromPrevious" />
    <xsl:copy>
      <xsl:apply-templates select="*[$differentFromPrevious or position() &gt; 3]">
        <xsl:with-param name="currentSequenceNo" select="$thisSequenceNo" />
        <xsl:with-param name="parentSequenceNo" select="$parentSequenceNo" />
        <xsl:with-param name="code">
          <xsl:apply-templates select="." mode="code" />
        </xsl:with-param>
      </xsl:apply-templates>
    </xsl:copy>

    <xsl:variable name="childSequenceCount">
      <xsl:apply-templates select="." mode="childSequence" />
    </xsl:variable>

    <xsl:apply-templates select="following-sibling::*[1]
                                     [name() = name(current())]"
                         mode="iterate">
      <xsl:with-param name="currentSequenceNo"
                      select="$thisSequenceNo + $childSequenceCount" />
      <xsl:with-param name="parentSequenceNo" select="$parentSequenceNo" />
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="*" mode="different">
    <xsl:text>true</xsl:text>
  </xsl:template>
  <xsl:template match="ORDER_LINES_TBL_TYPE_ITEM" mode="different">
    <xsl:value-of
         select="not(ITEM = preceding-sibling::ORDER_LINES_TBL_TYPE_ITEM[1]/ITEM)" />
  </xsl:template>

  <xsl:template match="*" mode="childSequence">
    <xsl:text>0</xsl:text>
  </xsl:template>
  <xsl:template match="ORDER_TBL_TYPE_ITEM" mode="childSequence">
    <xsl:value-of
       select="count(ORDER_LINES_TBL_TYPE/ORDER_LINES_TBL_TYPE_ITEM[not(
                              ITEM = 
                               preceding-sibling::ORDER_LINES_TBL_TYPE_ITEM[1]/ITEM
                                            )])" />
  </xsl:template>

  <xsl:template match="OUT_SHIPMENT_TBL_ITEM" mode="code">
    <xsl:text>E</xsl:text>
  </xsl:template>
  <xsl:template match="ORDER_TBL_TYPE_ITEM" mode="code">
    <xsl:text>C</xsl:text>
  </xsl:template>
  <xsl:template match="ORDER_LINES_TBL_TYPE_ITEM" mode="code">
    <xsl:text>CI</xsl:text>
  </xsl:template>

  <xsl:template match="OUT_SHIPMENT_TBL | ORDER_TBL_TYPE | ORDER_LINES_TBL_TYPE">
    <xsl:param name="currentSequenceNo" select="0" />
    <xsl:param name="parentSequenceNo" />

    <xsl:copy>
      <xsl:apply-templates>
        <xsl:with-param name ="currentSequenceNo" select="$currentSequenceNo" />
        <xsl:with-param name="parentSequenceNo" select="$parentSequenceNo" />
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="node()[self::OUT_SHIPMENT_TBL_ITEM or 
                              self::ORDER_TBL_TYPE_ITEM or
                              self::ORDER_LINES_TBL_TYPE_ITEM]/*[1]">
    <xsl:param name="currentSequenceNo" />
    <xsl:copy>
      <xsl:value-of select="$currentSequenceNo"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="node()[self::ORDER_TBL_TYPE_ITEM or
                              self::ORDER_LINES_TBL_TYPE_ITEM]/*[2]">
    <xsl:param name="parentSequenceNo" />
    <xsl:copy>
      <xsl:value-of select="$parentSequenceNo" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="OUT_SHIPMENT_TBL_ITEM/*[2] | 
                       node()[self::ORDER_TBL_TYPE_ITEM or
                              self::ORDER_LINES_TBL_TYPE_ITEM]/*[3]">
    <xsl:param name="code" />
    <xsl:copy>
      <xsl:value-of select="$code" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<OutputParameters xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <OUT_SHIPMENT_TBL>
    <OUT_SHIPMENT_TBL_ITEM>
      <DELIVERY_ID>1</DELIVERY_ID>
      <ORDER_SHIP_CODE_EXT>E</ORDER_SHIP_CODE_EXT>
      <CUSTOMER_NUMBER>4838</CUSTOMER_NUMBER>
      <OEH_POSTAL_CODE xsi:nil="true" />
      <OEH_COUNTRY xsi:nil="true" />
      <ORDER_TBL_TYPE>
        <ORDER_TBL_TYPE_ITEM>
          <PURCHASE_ORDER_NUMBER>2</PURCHASE_ORDER_NUMBER>
          <TOTAL_ORDER_GROSSWEIGHT>1</TOTAL_ORDER_GROSSWEIGHT>
          <TOTAL_ORDER_SHIPQTY>C</TOTAL_ORDER_SHIPQTY>
          <ORDER_LINES_TBL_TYPE>
            <ORDER_LINES_TBL_TYPE_ITEM>
              <WEB_TRANSACTION_ID>3</WEB_TRANSACTION_ID>
              <FREIGHT_TERMS_CODE_INT>2</FREIGHT_TERMS_CODE_INT>
              <VENDOR_NUM>CI</VENDOR_NUM>
              <ITEM>50116</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>
            <ORDER_LINES_TBL_TYPE_ITEM>
              <ITEM>50116</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>
            <ORDER_LINES_TBL_TYPE_ITEM>
              <WEB_TRANSACTION_ID>4</WEB_TRANSACTION_ID>
              <FREIGHT_TERMS_CODE_INT>2</FREIGHT_TERMS_CODE_INT>
              <VENDOR_NUM>CI</VENDOR_NUM>
              <ITEM>6435</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>
          </ORDER_LINES_TBL_TYPE>
        </ORDER_TBL_TYPE_ITEM>
        <ORDER_TBL_TYPE_ITEM>
          <PURCHASE_ORDER_NUMBER>5</PURCHASE_ORDER_NUMBER>
          <DELIVERY_ID>1</DELIVERY_ID>
          <TOTAL_ORDER_GROSSWEIGHT>C</TOTAL_ORDER_GROSSWEIGHT>
          <TOTAL_ORDER_SHIPQTY>32</TOTAL_ORDER_SHIPQTY>
          <ORDER_LINES_TBL_TYPE>
            <ORDER_LINES_TBL_TYPE_ITEM>
              <WEB_TRANSACTION_ID>6</WEB_TRANSACTION_ID>
              <FREIGHT_TERMS_CODE_INT>5</FREIGHT_TERMS_CODE_INT>
              <VENDOR_NUM>CI</VENDOR_NUM>
              <ITEM>50119</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>
            <ORDER_LINES_TBL_TYPE_ITEM>
              <WEB_TRANSACTION_ID>7</WEB_TRANSACTION_ID>
              <FREIGHT_TERMS_CODE_INT>5</FREIGHT_TERMS_CODE_INT>
              <VENDOR_NUM>CI</VENDOR_NUM>
              <ITEM>87554</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>
            <ORDER_LINES_TBL_TYPE_ITEM>
              <ITEM>87554</ITEM>
              <CROSS_REFERENCE_UPC>034138102008</CROSS_REFERENCE_UPC>
            </ORDER_LINES_TBL_TYPE_ITEM>
          </ORDER_LINES_TBL_TYPE>
        </ORDER_TBL_TYPE_ITEM>
        <!-- 2 nd Order -->
      </ORDER_TBL_TYPE>
    </OUT_SHIPMENT_TBL_ITEM>
  </OUT_SHIPMENT_TBL>
</OutputParameters> 
```

# c++ - 清理链接对象的动态内存

> ID：15477452
> 
> 赞同：1
> 
> 时间：2013-03-18T12:59:59.837
> 
> 标签：c++, linked-list, dynamic-memory-allocation

我需要清理链接对象的动态内存。我正在研究优化问题的分支定界算法。我有一个名为“节点”的类，它保存部分解决方案的数据。我使用“新”功能创建节点。所有创建的节点都相互链接，形成一个链，就像我创建了一个手动列表一样。每个节点都知道紧随其后的最佳节点的物理地址。这个链条是动态的。使用现有节点，我生成新节点并将它们相应地链接到链，直到找到最佳解决方案。对于一些问题，当节点数量约为 30 亿（30-40 GB）时，我找到了最佳解决方案。我将我的代码设置为通过解决下一个问题，当它完成解决一个问题时（我通过在处理过程中的多个文件流来做到这一点）。我需要在通过解决另一个问题之前释放内存。当我找到最佳且不再需要节点链时，我尝试使用“删除”功能。坏事是删除 30 亿个相互链接的节点对象需要几个小时。我正在终止程序，从目录中删除已解决的文件，等待 Windows 释放 RAM，然后再次重新启动以继续我的工作。有没有办法释放内存，同时传递给另一个问题来解决，比如终止进程所做的清理操作，或者我应该改变节点链的结构？从目录中删除已解决的文件，等待 Windows 释放 RAM，然后再次重新启动以继续我的工作。有没有办法释放内存，同时传递给另一个问题来解决，比如终止进程所做的清理操作，或者我应该改变节点链的结构？从目录中删除已解决的文件，等待 Windows 释放 RAM，然后再次重新启动以继续我的工作。有没有办法释放内存，同时传递给另一个问题来解决，比如终止进程所做的清理操作，或者我应该改变节点链的结构？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:14:23.647

听起来像是从您可以解除分配的池中分配的自定义新的工作。

```
class Node
{
    void* operator new(size_t bytes);
    void delete(void* ptr) {}
    ...
}; 
```

现在你的 operator new 可以做到这一点

```
char* big_block = new char[100000];
char* free_ptr = big_block;

void* Node::operator new(size_t bytes)
{
    char* ptr = free_ptr;
    free_ptr += bytes;
    return ptr;
} 
```

然后，当你完成后，你可以打电话`delete[] big_block;`并释放你所有的内存。反正是这样的。有一些细节要补充。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:14:37.277

如果你有 30 亿个对象，你需要释放 30 亿个对象。除非你作弊。

正如您已经正确指出的那样，一种作弊方法是终止进程。当然，这排除了之后做其他事情。

另一种方法是重载`operator new`以使用块分配器并且`operator delete`什么都不做（或完全忘记`operator delete`）。块分配器将分配一个巨大的块（或者根据需要分配几个块，这些块可能在链表中），从中提取您分配的对象。这可以以相对简单的方式实现（从数组中返回一个元素，并增加索引）。

然后，当您处理完 30 亿个对象后，在块分配器中调用一个函数，该函数一次简单地丢弃整个块（释放它们）。分配器不知道这 30 亿个对象，也不关心。它所做的只是一次（或者可能是 3-4 次）大型释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:02:17.797

使用析构函数来释放由构造函数分配的资源，或由 mutators 分配的额外资源。

# html - 如何使用省略号正确裁剪测试

> ID：15477455
> 
> 赞同：0
> 
> 时间：2013-03-18T13:00:16.597
> 
> 标签：html, ellipsis

我有一个如下的html：

```
<td>
                 <h6 style="width:80px;text-overflow:ellipsis;" title="${name}"><span class="badge badge-info">${name}</span></h6>

</td> 
```

如果文本的大小大于显示区域，如何将文本显示为虚线。?

![在此处输入图像描述](../Images/f17ec679b5c53cac01b28bb9ee8e3410.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:05:10.357

您必须添加`overflow: hidden`for`text-overflow:ellipsis`才能工作 - 否则内容只会从元素中流出而不会被切断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:05:10.467

为了`text-overflow:ellipsis;`工作，您还需要指定`overflow: hidden;`和`white-space: nowrap;`。

IE

```
... style="width:80px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;" ... 
```

顺便说一句，我建议您将该内联样式（和其他内联样式）移到 CSS 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:05:16.773

它应该是 ：-

```
<td>
<h6 style="width:80px;text-overflow:ellipsis;overflow:hidden" title="${name}"><span class="badge badge-info">${name}</span></h6>
</td> 
```

# javascript - Play2 和 Scala - 我的 JS 文件中的静态文件和 I18 消息

> ID：15477456
> 
> 赞同：1
> 
> 时间：2013-03-18T13:00:20.697
> 
> 标签：javascript, scala, internationalization, routes, playframework-2.1

在我的 Web 应用程序中发布表单时，我在 javascript 中执行了几次检查，然后在后端验证表单。js 验证依赖于 I18 消息和图像。如果这是一个 scala 模板，我当然会使用**@Messages**和**@routes.Assets.at**但我不想混合使用这两者（scala 模板和 .js 文件）。

例如，我在我的 js 文件中进行了此检查，其中当前图像路由是硬编码的：

```
$("form input[type=submit]").click(function (e) {

            e.preventDefault();
            var email = $("#username");
            var emailPattern = /^([0-9a-zA-Z]([-\.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$/;

            if (email.val() == "") {
                email.css("background-image", "url('/assets/images/general/input-row-red.jpg')");
                return e.preventDefault();
            } else {
                email.css("background-image", "url(/images/general/inputTextBg.png)");
            }
    }); 
```

我试图用他们需要的消息来准备 js 文件，如下所示：

**.js 文件：**

```
/* Prepare messages*/
var messages = "";

$.getJSON("/messages/source", {
        "keys": "sms.form.login.hide,sms.form.login"},
    function (data) {
        messages = data.messages;
    }); 
```

**消息源控制器：**

```
object MessageSource extends Controller {

  def getMessages(keys : String) = Action { request =>
     if(keys.isEmpty) {
       BadRequest(Json.obj("status" -> "KO", "message" -> "key plix!"))
     }
     else {
       var js = Map.empty[String, String]
       for (k <- keys.split(",")) {
         js = js + (k -> Messages(k))
       }
       Ok(Json.obj("status" -> "OK", "messages" -> js))
     }
  }
} 
```

但我不觉得这是最好的解决方案。我看过，`http://www.playframework.com/documentation/2.1.0/ScalaRouting`但我无法弄清楚。也许您对我有一些不错的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T14:22:42.037

也许这样？

**js文件：**

```
@scripts = {
        <script type="text/javascript" src="@routes.Application.javascriptRoutes"></script>
        <script type="text/javascript">
        jsRoutes.controllers.Application.messages("admin.venue.1,admin.venue.2,admin.venue.3" ).ajax({
            type: 'GET',
            success: function (data) {
                console.log(data.messages);

        },
            error: function () {
                console.log("error");
            }
        });
        </script>    
    } 
```

**控制器：**

```
object Application extends Controller {

  def javascriptRoutes = Action {
    implicit request =>
      import routes.javascript._
      Ok(
        Routes.javascriptRouter("jsRoutes")
          (
            routes.javascript.Application.messages
          )
      ).as("text/javascript")

  }

  def messages(keys : String) = Action {
    implicit request => {
      val messages = keys.split(",").map { key =>
        key -> Messages(key)
      }.toMap

      Ok(Json.obj("status" -> "OK", "messages" -> messages))
    }
  }

} 
```

**路线：**

```
# Javascript routes
GET         /javascriptRoutes                 controllers.Application.javascriptRoutes
GET         /messages                       controllers.Application.messages(keys: String) 
```

# google-app-engine - GAE memcache 生命周期非常低

> ID：15477460
> 
> 赞同：3
> 
> 时间：2013-03-18T13:00:28.833
> 
> 标签：google-app-engine, memcached, lifetime

根据文档，memcache 单元的最大生命周期为一个月，除非由于服务器内存容量问题而将其删除。

我的应用程序将 {'customer_id':'customer_name'} 存储在内存缓存（1600 多个项目）中，用于自动完成和客户索引需求。

继承人的代码：

```
memcache.add('keys', keys, time=86400) #if 'keys' is absent, then all memcache items are regenerated.
memcache.add_multi(names, time=86500, key_prefix='customer_id_') 
```

问题是我的大部分条目都会在一个小时左右过期，只剩下 10 或 11 项。文档还说，如果未设置时间，则 memcache 项的默认生命周期为一小时。

那么我是否错误地设置了memcache的生命周期（如果是这样，为什么它会留下10个项目）或者谷歌memcache对于11个以上的项目是否不可靠（在这种情况下我应该怎么做？以某种方式将这些数据存储在XML中？）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:57:12.487

我的安静应用的当前统计数据显示，它可以轻松容纳数百个项目几个小时：

```
Item count:         285 item(s)
Total cache size:   5462609 byte(s)
Oldest item age:    11 hour(s) 38 min(s) 29 second(s) 
```

如果您有 1600 项，并且一项（键+数据）大小小于 500 字节，我建议将它们全部存储在一个内存缓存条目中作为字典或其他东西。

# php - 函数中的参数和范围

> ID：15477463
> 
> 赞同：0
> 
> 时间：2013-03-18T13:00:34.960
> 
> 标签：php, scope

我在 PHP 中有一个与函数参数及其范围有关的问题。

我正在构建一个自己的小模板系统，目前我一直在使用：

```
try {
    $ret = include("file.php");
    if(!$ret) {
        throw new Exception();
    }
    // Go on here...
}
catch(Exception $e) {
    // error handling
} 
```

在 mainfile 中大约 3-4 次`index.php`。此代码首先包含所需的文件（由 URL 中的 GET 参数设置），尝试包含它，如果失败，它会处理所有错误。由于这在 index.php 中使用了 3-4 次，我想用它制作一个函数，这样我就可以轻松调用`$Template->LoadFile("filename.php");`，这个函数为我处理所有事情：包括执行代码和错误处理。

我想并不难，但是这样做时我会收到很多错误消息，因为包含的文件执行所需的变量仅在`index.php`（之前执行代码的位置）范围内可用，而不在`LoadFile()`功能。我现在能做什么？

*   恢复一切，然后愚蠢地重复使用上面的代码 3-4 次？
*   将所有需要的变量添加`LoadFile()`为参数，以便通过 using`$Template->LoadFile($file,$vars);` `$vars`可用于`LoadFile()`包含的文件？通过这样做，在某些情况下给定的参数会很大。例如，如果我添加一个自己的板，$vars 将包含每个板数据，仅此而已。这不会让模板系统变得很慢吗？
*   通过参数添加所需的变量作为参考？（与我的第二个建议相同，但发动机减速较少）。
*   使用全局变量？不！

还有哪些选择？非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:10:36.563

您可以使用 option2，但可以通过多种其他方式查看 codeigniter 和 kohana 如何呈现它们的视图。

你可以做类似的事情

`$Template->LoadFile($file, $vars)` $vars 是一个`array`类似的地方`array('thisIsVariableName' => 'thisIsVariableValue')`

或者

```
$Template->file($file)
->vars('thisIsVariableName', thisIsVariableValue)
->multi_var(array('thisIsVariableName2' => 'thisIsVariableValue2'))
->render(); 
```

在模板大小的情况下，您始终可以将模板拆分为子模板。

# c++ - boost中的load_construct_data：放置新的问题

> ID：15477464
> 
> 赞同：0
> 
> 时间：2013-03-18T13:00:35.380
> 
> 标签：c++, serialization, boost, boost-serialization, placement-new

我尝试在 boost 的帮助下使用非默认构造函数序列化派生指针类。

在编译过程中我得到一个错误：

```
Derived.h: In function ‘void boost::serialization::load_construct_data(Archive&, const A::Derived*, unsigned int)’:

in Derived.h: error: no matching function for call to ‘operator new(long unsigned int, const A::Derived*&) 
```

我包括`<new>`到`Derived.h`，但我有一种我忘记做某事的感觉。这是我对代码的粗略估计。

我有一个带有虚函数和非默认构造函数的基类（在 Base.h 中）

```
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
#include <boost/serialization/export.hpp>
namespace A{

    class Base

    {

    public:

             int getID(){return ID};

             //non default constructor
             Base(param1, param2, param3):ID(param1+param2), BaseFlag(param3) {};
             Base(param1, param3):ID(param1), BaseFlag(param3) {};

             //some virtual functions
             virtual void Foo1();
             virtual void Foo2();
             ...

    private:

             int ID;
             bool BaseFlag;
             ...

             //void serialize function
             friend class boost::serialization::access;
             template<class Archive>
             void serialize(Archive & ar, const unsigned int version)
             {

             }

    };

}
//end of namespace A
//implementation is in another file - exporting key
BOOST_CLASS_EXPORT_KEY(Base) 
```

有一个派生类（在 Derived.h 中）

```
#include <boost/serialization/base_object.hpp>
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>
#include <boost/serialization/export.hpp>
#include <new>
#include "Base.h"

namespace A{

    //derived class
    class Derived: public Base
    {
    public:
        //non default constructor
        Derived(param3):Base(param3, false);
        ...
   private:
        friend class boost::serialization::access;
        template<class Archive>

        // serialize base class information
        void serialize(Archive & ar, const unsigned int version)
        {
          ar & boost::serialization::base_object<Base>(*this);
        }

        //prototype of save_construct_data for non-default constructor
        template<class Archive> friend 
            void boost::serialization::save_construct_data(Archive & ar, 
                         const Derived * t, const unsigned int file_version);

        //prototype of load_construct_data for non-default constructor
        template<class Archive> friend 
            void boost::serialization::load_construct_data(Archive & ar, 
                         const Derived * t, const unsigned int file_version);
    };
}
//end of namespace A

//export derived class
BOOST_CLASS_EXPORT_KEY(Derived)

//describe save_construct_data
namespace boost {
    namespace serialization {
        template<class Archive>
        inline void save_construct_data(Archive & ar, const A::Derived * t, const unsigned int file_version)
        {
            // save data required to construct instance
            ar << t->ID;

        }

        template<class Archive>
        inline void load_construct_data(Archive & ar, const A::Derived * t, const unsigned int file_version)
        {
            int ID;
            // load data required to construct instance
            ar >> ID;
            ::new(t) A::Derived(ID);

        }

     }
 } 
```

在 main.cpp 的某个地方我想保存和加载派生类。所以，我一开始提到的编译错误阻止了我继续。

任何提示我缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:13:04.820

我相信编译器在抱怨，因为您试图在内存中构造一个 Derived 标记为`const`. 在此声明中：

```
template<class Archive> friend 
    void boost::serialization::load_construct_data(Archive & ar, 
                 const Derived * t, const unsigned int file_version); 
```

我想你想要`Derived *t`，不是`const Derived *t`。

[boost 文档](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/index.html)在`const`函数签名中也没有：

```
template<class Archive>
inline void load_construct_data(
    Archive & ar, my_class * t, const unsigned int file_version
){
    // retrieve data from archive required to construct new instance
    int attribute;
    ar >> attribute;
    // invoke inplace constructor to initialize instance of my_class
    ::new(t)my_class(attribute);
} 
```

# css - php 库中的 css 布局

> ID：15477469
> 
> 赞同：1
> 
> 时间：2013-03-18T13:01:05.600
> 
> 标签：css, html, layout, gallery

我一直在做一个用 php 制作的画廊。前段时间，我使用表格进行布局。结果超级好。现在，不建议使用表格进行布局，并且有点“弃用”（我不明白为什么，如果有人可以向我解释一下，谢谢）。因此，我正在尝试将布局从表格更改为 div，但遇到了很多问题（有人可以推荐一个很好的参考资料，了解如何使用 css 制作良好的布局吗？）。到目前为止，我管理了这个：http: [//jsfiddle.net/hochvater/4DbUU/](http://jsfiddle.net/hochvater/4DbUU/). 我的第一个问题是：如何使#panel_poze div 显示在容器 div 的顶部，并粘在 #panel_albume 上（就像现在一样）？我不明白为什么#panel_albume 与它所粘到的 div (#panel_albume) 所包含的第三个 div 对齐。我的第二个问题是：我不能把大表（你可以通过 div 的结构轻松想象它的外观）放入容器 div 并保持原样......这仍然是吗？被认为“已弃用”或不推荐？

CSS代码：

```
 body {
    background-color: black;
    color: white;
}
@font-face {
    font-family:"john_handy";
    src: url("john_handy.eot");
    src: local("¢"), url("john_handy.woff") format("woff"), url("john_handy.TTF") format("opentype"), url("john_handy.svg#john_handy") format("svg");
}
@font-face {
    font-family:"bradley_hand";
    src: url("bradley_hand.eot");
    src: local("¢"), url("bradley_hand.woff") format("woff"), url("bradley_hand.TTF") format("opentype"), url("bradley_hand.svg#bradley_hand") format("svg");
}
a:link {
    color:white;
}
/* unvisited link */
 a:visited {
    color:white;
}
/* visited link */
 a:hover {
    color:red;
}
/* mouse over link */
 a:active {
    color:blue;
}
/* selected link */
 .fonty {
    text-align:center;
    font: italic 30px john_handy, serif;
}
a.fonty {
    font-style: normal;
    font-size:20px;
}
#pp {
    margin: 15% auto;
    max-width:80%;
    min-width:850px;
    text-align: center;
    white-space:nowrap;
}
.sec {
    position: static;
    margin: 0% 4%;
    max-width: 20%;
    min-width: 200px;
    display: inline-block;
}
.imageOff {
    border: 3px solid transparent;
    margin: auto;
}
.imageOn {
    border: 3px solid red;
    opacity: 0.7;
    filter: alpha(opacity=70);
    margin: auto;
}
.selected {
    padding: 2px;
    border: 1px solid red;
}
.submit {
    /*margin: 0;*/
    border: none;
    /*padding: 0;*/
    background: black;
    font:normal 20px john_handy, serif;
    color:white;
}
.subsel {
    color:red;
}
.submit:hover {
    color:red;
}
.poze_albume {
    border: 1px solid red;
    height: 250px;
    width: 200px;
}
#panel_poze {
    border: 1px solid blue;
    width: 70%;
    min-width: 400px;
    display: inline-block;
    height: 100px;
}
#panel_albume {
    border: 1px solid yellow;
    display:inline-block;
}
#container {
    text-align: center;
    width: 100%;
    border: 1px solid white;
    min-width: 700px;
}
.album {
} 
```

画廊代码：

```
<?php session_start(); ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>

<head>
<link rel="stylesheet" type="text/css" href="./zastyle.css" />
</head>

<body><!-- oncontextmenu="return false;"> -->

<h1 class="fonty">Portofolio</h1>

<?php 
if (!isset($_POST['restart']))
{
?>

<div id="pp">
    <div class="sec ">
    <form action="./galerie.php" method="post" enctype="multipart/form-data">
        <input class="imageOff" onmouseover="this.className='imageOn'" onmouseout="this.className='imageOff'" type="image" src="./studio/photoshoot.JPG" title="Studio Photography" alt="Studio Photography" />
        <input type="hidden" name="album" value="studio" />
        <input type="hidden" name="restart" value="1"/>
        <br />
        <input type="submit" class="submit" value="Studio Photography" />
    </form>
    </div>
    <div class="sec ">
    <form action="./galerie.php" method="post" enctype="multipart/form-data">
        <input class="imageOff" onmouseover="this.className='imageOn'" onmouseout="this.className='imageOff'" type="image" src="./outdoor_lifestyle/lifestyle.jpg" title="Outdoor and Lifestyle Photography" alt="Outdoor and Lifestyle Photography" />
        <input type="hidden" name="album" value="outdoor" />
        <input type="hidden" name="restart" value="1"/>
        <br />
        <input type="submit" class="submit" value="Outdoor and Lifestyle" />
    </form>
    </div>
    <div class="sec " >
    <form action="./galerie.php" method="post" enctype="multipart/form-data">
        <input class="imageOff" onmouseover="this.className='imageOn'" onmouseout="this.className='imageOff'" type="image" src="./landscapes/landscapes.jpg" title="Landscapes" alt="Landscapes" class="album" />
        <input type="hidden" name="album" value="landscapes" />
        <input type="hidden" name="restart" value="1" />
        <br />
        <input type="submit" class="submit" value="Landscapes" />
    </form>
    </div>
    </form>
</div>

<?php //require("za_menu.php"); ?>

<?php
}
if (isset($_POST['restart'])&&$_POST['restart']==1){
?>

<div id="container">
    <div id="panel_albume">
        <div class="poze_albume">
        <form action="./galerie.php" method="post" enctype="multipart/form-data">
            <input class="imageOff <?php
            if($_POST['album']=='studio') echo 'selected';
            ?>" onmouseover="this.className='imageOn'" onmouseout="this.className='imageOff <?php
            if($_POST['album']=='studio') echo 'selected';
            ?>'" type="image" src="./studio/photoshoot.JPG" title="Studio Photography" alt="Studio Photography" />
            <input type="hidden" name="album" value="studio" />
            <input type="hidden" name="restart" value="1" />
            <br />
            <input type="submit" class="submit <?php
            if($_POST['album']=='studio') echo 'subsel';
            ?>" value="Studio Photography" />
        </form>
        </div>
        <div  class="poze_albume">
        <form action="./galerie.php" method="post" enctype="multipart/form-data">
            <input class="imageOff <?php
            if($_POST['album']=='outdoor') echo 'selected';
            ?>" onmouseover="this.className='imageOn'" onmouseout="this.className='imageOff <?php
            if($_POST['album']=='outdoor') echo 'selected';
            ?>'" type="image" src="./outdoor_lifestyle/lifestyle.jpg" title="Outdoor and Lifestyle Photography" alt="Outdoor and Lifestyle Photography" />
            <input type="hidden" name="album" value="outdoor" />
            <input type="hidden" name="restart" value="1" />
            <br />
            <input type="submit" class="submit <?php
            if($_POST['album']=='outdoor') echo 'subsel';
            ?>" value="Outdoor and Lifestyle" />
        </form>
        </div>
        <div  class="poze_albume">
        <form action="./galerie.php" method="post" enctype="multipart/form-data">
            <input class="imageOff <?php
            if($_POST['album']=='landscapes') echo 'selected';
            ?>" onmouseover="this.className='imageOn'" onmouseout="this.className='imageOff <?php
            if($_POST['album']=='landscapes') echo 'selected';
            ?>'" type="image" src="./landscapes/landscapes.jpg" title="Landscapes" alt="Landscapes" class="album"/>
            <input type="hidden" name="album" value="landscapes" />
            <input type="hidden" name="restart" value="1" />
            <br />
            <input type="submit" class="submit <?php
            if($_POST['album']=='landscapes') echo 'subsel';
            ?>" value="Landscapes" />
        </form>
        </div>
    </div>
    <div id="panel_poze"></div>
</div>

<?php }
session_destroy();
?>

</body>
</html> 
```

感谢您花时间阅读本文，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:05:05.923

从上面安德烈的回答中解脱出来。一个好的实践方法是简单地制作一个网站，它具有非常基本的 CSS 属性，但有多种不同格式的 div，这样您就可以了解盒子如何交互。

我以前做过的一个这样的项目是简单地制作一个带有标题、水平导航的网站，然后是几个全宽的内容块，50% - 50% 双列，25% - 50% - 25% 三重列，33% - 33% - 33% 三列和 25%-25%-25%-25% 四列，然后是页脚。

您绝对应该研究的是响应式布局，因此您可以使您的画廊移动友好。

**编辑：**

这就是你想要的样子吗？

[http://jsfiddle.net/4DbUU/1/](http://jsfiddle.net/4DbUU/1/)

我改变了这些规则：

```
#panel_poze {
border: 1px solid blue;
width: 70%;
min-width: 400px;
height: 100px;
float: left;
}

#panel_albume {
border: 1px solid yellow;
    float: left;
}

#container {
text-align: center;
width: 100%;
border: 1px solid white;
min-width: 700px;
clear: both;
overflow: hidden;
} 
```

我删除了你的`display: inline-block;`并添加`float: left;`到两个孩子。然后我告诉容器设置`overflow:hidden;`和到`clear:both;`（左右浮动）

**编辑2：**

为了清楚起见，OP 要求...

用跛脚的话来说，当使用`float:left`或`float:right`在一个元素上时，以某种方式从页面上拾取该元素并允许它“浮动”你告诉它的任何方向。它完全不考虑附近未浮动的元素来执行此浮动。然后附近的元素开始环绕浮动元素。这有时是可取的，例如向左或向右浮动图像并允许文本环绕图像。但是在某些情况下，您不希望其他元素环绕您浮动的元素。在这些情况下，您可以使用`clear`命令告诉下一个最接近的元素不要环绕浮动元素。看这两个例子：

[http://jsfiddle.net/GL4Pn/2/](http://jsfiddle.net/GL4Pn/2/)

在上面的例子中，没有明确的存在。请注意黄色`.footer`div 中的文本出现在两个浮动元素之间。

[http://jsfiddle.net/GL4Pn/3/](http://jsfiddle.net/GL4Pn/3/)

在此示例中，我已添加`clear: left;`到`.footer`（黄色 div）。请注意，它不再包裹在 div 之间的微小空间中，但它仍然包裹在右侧的元素周围。

[http://jsfiddle.net/GL4Pn/4/](http://jsfiddle.net/GL4Pn/4/)

在这里，我已将其切换到`clear: right;`注意到它不再包裹到左侧 div 或 div 之间的空间中。它整齐地嵌套在右 div 下方。这是因为右边的 div 是最长的 div。如果我要将左侧 div 的高度增加到比右侧 div 长...

...像这里：http: [//jsfiddle.net/GL4Pn/5/](http://jsfiddle.net/GL4Pn/5/)

请注意，现在 div 向右包裹，但不在 div 之间。现在..如果我将代码更改为`clear: both;`...

[http://jsfiddle.net/GL4Pn/6/](http://jsfiddle.net/GL4Pn/6/)

请注意，它回到`clear:right`了正确 div 最长时的状态。如果我将左侧 div 更改为比右侧更短并保持`clear:both`原位......

[http://jsfiddle.net/GL4Pn/7/](http://jsfiddle.net/GL4Pn/7/)

结果和之前一样。。。

重要的是要注意，元素只会在它们是代码中的下一个元素时包装浮点数。如果我没有明确的回到第一个示例，但在页脚下添加一个额外的 div，您会发现它并没有出现异常，因为 .footer div 已经占用了可用空间。

[http://jsfiddle.net/GL4Pn/8/](http://jsfiddle.net/GL4Pn/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:09:39.530

我建议你看看 CSS 网格系统，例如[Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html)或[960.gs](http://960.gs/)

回答您关于表格的问题：在 CSS 之前可以使用表格。CSS 将帮助您以更好、更灵活的方式组织您的内容。我建议您查看[CSS Tricks](http://css-tricks.com/)和[W3 CSS 教程](http://www.w3schools.com/css/)，以确保您了解其`<div>`工作原理以及如何将它们浮动。此外，HTML5 采用容器的语义含义，并允许您更好地表示您的站点的结构。如果您想了解更多信息，甚至想要使用初始模板，请查看[HTML5 Boilerplate 。](http://html5boilerplate.com/)

# ember.js - addepar ember-table：如何检索当前选定的模型数据

> ID：15477472
> 
> 赞同：3
> 
> 时间：2013-03-18T13:01:07.620
> 
> 标签：ember.js, ember-table

我已经将 ember-table 的内容与 ember-data 模型联系起来。我正在尝试获取当前选定行的模型对象。我试过使用 this.get('selection') 但无济于事。我的最终目标是，我在一个单独的视图中拥有一个关联的编辑详细信息视图，该视图位于表格旁边（又名列表视图），路由器（v2）处理创建新模型以插入表格和编辑当前模型之间的转换选择模型（或最终批量编辑表中的多个模型）。这是代码示例：

```
App.TableView = Ember.Table.TablesContainer
    .extend(Ember.Table.RowSelectionMixin).extend({
        selectionBinding: 'controller.selection'
    });

App.TableController = Ember.Table.TableController.extend({
       ...
       selection: null,
       selectionChanged: Ember.observer(function() {
              this.transitionToRoute('selectedModel.edit', this.get('selection'));
       }).observes('selection'),
       ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:50:54.100

我已经解决了这个问题。我没有意识到选择是一个可枚举的（我猜是在准备多项选择，这会很棒！）在控制器中：

```
 selection: null,
    selectionChanged: Ember.observer(function() {
        if(this.get('selection').length) {
            selection0 = this.get('selection')[0];
            this.transitionToRoute('selectedModel.edit', selection0);
        }
    }).observes('selection'), 
```

# regex - 需要 IP 地址掩码和 DNS 主机名正则表达式？

> ID：15477474
> 
> 赞同：0
> 
> 时间：2013-03-18T13:01:15.620
> 
> 标签：regex, dns

我需要允许来自文本框中的 IP/DNS 名称。我正在寻找适用于 IP 的 IP 正则表达式。

现在我使用一个正则表达式：

```
/\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/ 
```

这适用于 0-255 范围。但允许无效 IP，例如：121.21.05.234.01，它有 5 个部分。

我需要一个适用于所有场景的正则表达式，如下所示：

```
10.2.22.1        - true
123.123.123.123  - true
123.123.023.12   - true
12.23.12.0       - true
121.21.05.234.01 - false 
```

请也提供给我 DNS 表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:11:33.757

尝试使用and[锚定](http://www.regular-expressions.info/anchors.html)您的正则表达式，这将使其与整个字符串匹配。`^``$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:13:20.820

您是否正在寻找一种指定出现次数的方法？您可以使用大括号来实现这一点。一个例子[在这里](https://stackoverflow.com/questions/863125/regular-expression-to-count-number-of-in-string)。

在您的情况下，这将导致：

```
/\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}\b/ 
```

（我也添加了一个`\`来逃避点）

# android - 如何在 android 2.3.3 中获取录音机的周期会话 ID

> ID：15477482
> 
> 赞同：0
> 
> 时间：2013-03-18T13:01:30.817
> 
> 标签：android

我想获取音频 recoder.API 级别 16 的 sessionID 以获取会话 ID 很好..但是当到达 API 级别 10 时没有选项来获取会话 ID..如何获取 android Audio Recorder 的 SessionID？

**或者**

还有其他方法可以获取录音机会话 ID 吗？

任何人请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:04:34.920

您可以使用 getAudioSessionId 方法（该方法可以在任何状态下调用，并且调用它不会改变对象状态）

# wpf - 如何实现 WPF Docking 功能作为 Visual Studio Docking 功能

> ID：15477483
> 
> 赞同：0
> 
> 时间：2013-03-18T13:01:40.960
> 
> 标签：wpf

C# WPF 中是否有可用的停靠库，我可以调用并实现停靠窗口功能？或者我应该编写完整的代码来实现停靠窗口功能，我不知道该怎么做。我读到了我不想使用的第三方对接控件。我也听说过 AvalonDock，有人可以建议我应该如何使用 Avalon Dock 或任何其他库来实现对接功能？我是 C# 新手，没有太多经验，但努力学习此功能。任何方向都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:25:07.060

我对此做了一个教程。看看它[http://www.codeproject.com/Articles/439873/Simple-Visual-Studio-like-Pane-Resizing-Docking-an](http://www.codeproject.com/Articles/439873/Simple-Visual-Studio-like-Pane-Resizing-Docking-an)

# java - 从 Java 向 Groovy 对象添加属性

> ID：15477484
> 
> 赞同：3
> 
> 时间：2013-03-18T13:01:42.383
> 
> 标签：java, groovy, metaprogramming

我希望能够使用来自 Java 的 Groovy 元编程功能将属性添加到 String 对象的实例。

从 Groovy 执行此操作很简单：

```
class GroovyClass {
    def getDynamicString() {
        def myString = "hello"
        myString.metaClass.dynamicProperty = "there"
        return myString
    }
} 
```

这是我的 Spock 测试用例：

```
def "should add dynamic property"() {
    GroovyClass groovyClass = new GroovyClass()

    when:
    def theString = groovyClass.getDynamicString()
    then:
    theString == "hello"
    theString.dynamicProperty == "there"
} 
```

但是，我想从 Java 做同样的事情并通过相同的测试运行它。据我了解，Groovy 向 JDK 类（如 String）添加了额外的属性和方法（如 getMetaClass），但我不确定它是如何或何时这样做的。我发现以下解决方案有效，但初始化 GroovyShell 并将元编程代码编写为字符串似乎很麻烦。

```
public String getDynamicString()
{
    String myString = "hello";
    GroovyShell shell = new GroovyShell();
    shell.setVariable("myString", myString);
    shell.setVariable("theDynamicPropertyValue", "there");
    shell.evaluate("myString.metaClass.dynamicProperty = theDynamicPropertyValue");
    return myString;
} 
```

有没有办法在不使用 shell.evaluate 的情况下完成上述操作 - 即直接从 Java 调用 Groovy 库方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T13:36:40.657

因此，鉴于这个 groovy 脚本：

```
def a = 'A String'

Decorator.decorate( a, 'foo', 'bar' )

assert a       == 'A String'
assert a.class == String
assert a.foo   == 'bar' 
```

然后我们可以像这样编写我们的 java Decorator 类：

```
import org.codehaus.groovy.runtime.HandleMetaClass ;
import org.codehaus.groovy.runtime.InvokerHelper ;

public class Decorator {
  public static void decorate( Object o, String name, Object value ) {
    HandleMetaClass hmc = new HandleMetaClass( InvokerHelper.getMetaClass( o ), o ) ;
    hmc.setProperty( name, value ) ;
  }
} 
```

然后如果我们编译 java 类并运行 groovy 脚本，所有的断言都应该通过

# c# - C# 使用 GetFiles 返回完整路径

> ID：15477486
> 
> 赞同：8
> 
> 时间：2013-03-18T13:01:48.350
> 
> 标签：c#, getfiles

使用此代码搜索目录中的文件：

```
FileInfo[] files = null;
string path = some_path;
DirectoryInfo folder = new DirectoryInfo(path);
files = folder.GetFiles("*.*", SearchOption.AllDirectories); 
```

这仅返回文件名和扩展名 (text.exe)。如何返回文件的完整路径（C:\bla\bla\bla\text.exe）？

如果我使用`Directory.GetFiles("*.*")`，这将返回完整路径。但如果文件夹包含名称中的点（C:\bla\bla\test.0.1），则结果包含没有文件的文件夹路径：

*   0 C:\bla\bla\bla\text.exe
*   1 C:\bla\bla\test.0.1
*   2 C:\bla\text.exe

等等

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-18T13:04:00.933

`FileInfo`包含一个`FullName`属性，您可以使用它来检索文件的完整路径

```
var fullNames = files.Select(file => file.FullName).ToArray(); 
```

## 查看

我机器上的这段代码：

```
FileInfo[] files = null;
string path = @"C:\temp";
DirectoryInfo folder = new DirectoryInfo(path);
files = folder.GetFiles("*.*", SearchOption.AllDirectories);

//you need string from FileInfo to denote full path
IEnumerable<string> fullNames = files.Select(file => file.FullName);

Console.WriteLine ( string.Join(Environment.NewLine, fullNames ) ); 
```

印刷

```
C:\temp\1.dot 
C:\temp\1.jpg 
C:\temp\1.png 
C:\temp\1.txt 
C:\temp\2.png 
C:\temp\a.xml 
... 
```

## 完整的解决方案

您的问题的解决方案可能如下所示：

```
string path = @"C:\temp";
DirectoryInfo folder = new DirectoryInfo(path);
var directories = folder.GetDirectories("*.*", SearchOption.AllDirectories);

IEnumerable<string> directoriesWithDot = 
 directories.Where(dir => dir.Name.Contains("."))
            .Select(dir => dir.FullName);

IEnumerable<string> filesInDirectoriesWithoutDot = 
 directories.Where(dir => !dir.Name.Contains("."))
            .SelectMany(dir => dir.GetFiles("*.*", SearchOption.TopDirectoryOnly))
            .Select(file => file.FullName);

Console.WriteLine ( string.Join(Environment.NewLine, directoriesWithDot.Union(filesInDirectoriesWithoutDot) ) ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T13:04:36.010

每个[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)对象都有一个`FullName`属性。

* * *

> 但如果文件夹包含名称中的点 (C:\bla\bla\test.0.1)，则结果包含没有文件的文件夹路径

这是一个完全不同的问题，可能有不同的答案/解决方法。你可以说得更详细点吗？
我无法重现这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:05:49.497

你需要使用`FileInfo`.

```
Directory.GetFiles("", SearchOption.AllDirectories).Select(file => new FileInfo(file).FullName); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:06:24.663

```
public static IEnumerable<string> GetAllFilesRecursively(string inputFolder)
    {
        var queue = new Queue<string>();
        queue.Enqueue(inputFolder);
        while (queue.Count > 0)
        {
            inputFolder = queue.Dequeue();
            try
            {
                foreach (string subDir in Directory.GetDirectories(inputFolder))
                {
                    queue.Enqueue(subDir);
                }
            }
            catch (Exception ex)
            {
                Console.Error.WriteLine("GetAllFilesRecursively: " + ex);
            }
            string[] files = null;
            try
            {
                files = Directory.GetFiles(inputFolder);
            }
            catch (Exception ex)
            {
                Console.Error.WriteLine("GetAllFilesRecursively: " + ex);
            }
            if (files != null)
            {
                for (int i = 0; i < files.Length; i++)
                {
                    yield return files[i];
                }
            }
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T13:06:29.980

你可以试试这个：

```
void GetFiles()
    {
        DirectoryInfo d= new DirectoryInfo(strFolderPath);
       //file extension for pdf
        var files = d.GetFiles("*.pdf*");
        FileInfo[] subfileInfo = files.ToArray<FileInfo>();

        if (subfileInfo.Length > 0)
        {
            for (int j = 0; j < subfileInfo.Length; j++)
            {
                bool isHidden = ((File.GetAttributes(subfileInfo[j].FullName) & FileAttributes.Hidden) == FileAttributes.Hidden);
                if (!isHidden)
                {
                    string strExtention = th.GetExtension(subfileInfo[j].FullName);
                    if (strExtention.Contains("pdf"))
                    {                            
                        string path = subfileInfo[j].FullName;
                        string name = bfileInfo[j].Name;                           
                    }
                }
            }
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T13:06:38.473

你可以使用[`FileSystemInfo.FullName`](http://msdn.microsoft.com/en-us/library/system.io.filesysteminfo.fullname.aspx)属性。

> 获取目录或文件的完整路径。

# c# - 在 asp.net 中调度 Web 应用程序所需的工作想法

> ID：15477487
> 
> 赞同：3
> 
> 时间：2013-03-18T13:01:48.570
> 
> 标签：c#, asp.net, scheduled-tasks, console-application

我在 asp.net 中编写了一个 Web 应用程序。它有一些用户角色。有3个角色，即经理，会计和员工。员工在表格中写下他们的费用并将其发送给经理。经经理批准后，将其发送给会计师支付。我需要有一个想法，当经理在 48 小时内没有批准员工的费用时，它应该向经理的邮箱发送一封自动电子邮件。

**我认为我可以编写另一个小型控制台应用程序来通过每小时检查一次来处理它**。但这会浪费资源并降低性能。

我需要一个好主意来处理它。**我应该怎么做？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:04:10.423

有几种选择，但如果我是你，我会选择第一种或第二种选择。

**控制台应用程序和调度程序**

我会创建每次运行时为您执行检查的控制台应用程序。然后，如果您愿意，我将使用**Windows Scheduler**每天（00:05）或每小时运行它。这样，Windows 调度程序守护程序将每小时启动一次，其余时间您的应用程序未运行。

检查此[Microsoft 链接](http://windows.microsoft.com/en-us/windows7/schedule-a-task)以了解如何在 Windows 中创建计划任务。

**Restful Web 服务和调度程序**

正如@marapet 回答中所建议的那样，拥有一个允许您执行此操作而不是控制台应用程序的宁静 Web 服务将为您提供在您的 Web 应用程序中拥有所有代码的优势。

与前一个类似，您应该只调用 restful uri 来完成您的操作。作为可能的缺点，您必须确保最终用户无法访问该 uri。在通常的架构中（Web 服务器 --> 应用程序服务器 --> 数据库），这个安静的服务应该在应用程序服务器中，远离最终用户的访问。

**视窗服务**

另一种选择是创建一个始终运行的**Windows 服务**并检查时间本身，以便每小时执行一次工作（可能使用 Quartz 或类似的）。但这不符合您的性能要求。

**无论如何，性能损失都会很小**，因为您的服务应该每分钟检查一个小时是否已经过去并且是时候完成它的工作了..这项任务很容易。

**优点**是 Windows 服务比计划任务更容易控制和监视

**数据库作业**

还有另一种选择...如果您的应用程序使用 SQL Server，您可以拥有每天或每小时运行的 t-sql 作业。除非您确实遇到性能问题，否则我不会推荐此选项。

这样做的**问题**是您将拆分代码的逻辑和职责。未来的开发人员或管理员会发现很难维护您的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T13:15:15.567

如果为了简单起见，您希望**将逻辑保留在 Web 应用程序中**（取决于解决方案的总大小，这可能需要也可能不需要）：

*   对于给定的 URL，让 Web 应用程序检查适当的批准，并在需要时发送电子邮件。请务必跟踪发送的电子邮件，以防止多次发送相同的电子邮件。
*   定期调用此 URL。您可以使用**计划任务**或**第三方 url 监控服务**来执行此操作。

您可以使用简单的 VBScript（或[wget](http://gnuwin32.sourceforge.net/packages/wget.htm)、[curl](http://curl.haxx.se/download.html)、[powershell](http://dmitrysotnikov.wordpress.com/2008/05/29/monitor-web-site-availability/)或任何对您而言最快的方式）调用 URL，然后您可以使用任务调度程序自动执行此操作（[另请参阅](https://stackoverflow.com/questions/1987345/recommended-method-for-loading-a-url-via-a-scheduled-task-on-windows)）。

vbscript 中用于调用 URL的**示例脚本：**

```
Function LoadUrl(url)
    Dim objRequest
    Set objRequest = CreateObject("MSXML2.ServerXMLHTTP.6.0")
    objRequest.open "POST", url , false
    objRequest.Send
    LoadUrl = objRequest.responseText
    Set objRequest = Nothing
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:09:25.680

每小时检查一次不会影响性能。根据您的数据库，即使每分钟检查一次也可能没问题。最简单的选项是作为计划任务触发的控制台程序。您也可以尝试 Windows 服务，但它们有点棘手。

还要考虑一下如何计算 48 小时。如果员工在周末之前投入费用，那么每次可能都会过去 48 小时，而您最终会遇到经理在周一早上的收件箱中收到大量电子邮件。这可能会引起一些摩擦:)

# linq - 如何使用 LINQ 获取分层组织数据？

> ID：15477494
> 
> 赞同：1
> 
> 时间：2013-03-18T13:02:00.977
> 
> 标签：linq, entity-framework, linq-to-sql

我有一些组织表链接到 OrgUser 表。

组织用户 >- 组织 -< 组织链接 -<

OrgLink 有 2 个 1toMany 链接，其中一个是 ParentOrg，另一个是 ChildOrg。

因此，一个典型的例子是 Joe Bloggs，他在隶属于“业务部”的“小型业务部门”工作。

OrgLink 中有一条记录将“Business Department”指向其“Small Business Unit”的子组织，该子组织有一个名为“Joe BLoggs”的 OrgUser。

如果我以“Joe Bloggs”的身份登录，那么我想获得他链接到的所有直属和父母组织的列表，所以在这种情况下，我希望获得“Small Business Unit”和“Business Department” . 我可以得到直接的组织，但父位让我感到困惑。此外，如果没有父级，则应返回直接组织。基本上应该返回所有链接到直接组织的组织。

到目前为止我的 LINQ：

```
 from SOU in StdOrgUser
                    join SO in StdOrg on SOU.StdOrgId equals SO.Id 
                    where SOU.UserId.Equals(new Guid("42995B01-97C8-4148-8EA3-5CCC55535194"))   
                    select new { OrgName=SO.Name, Col2= SOU.UserId, c3=SO.StdOrgType.Name} 
```

提前谢谢了。

编辑/更新：

对此进行研究后，我发现我不需要 JOIN 或 INCLUDE，因为我的 EF 模型具有所需的关联，因此显示为导航属性。我最终使用了带有 2 个 LINQ 查询的 UNION，因此伪代码是：

```
var results1 = Get child organisation that UserId works for.
var results2 = Get parent organisation for child organisation if it exists.
var results3 = results1.Union(results2)

foreach org in results3
{
 console.writeline(org.Id);
 console.writeline(org.Name);
} 
```

我确信有一种更雄辩的方法，并且可以随意提出建议，但这种方法确实有效。也许当我对 LINQ 的了解变得更好时，我会自己找到它！

# mysql - MySQL - 如何取消十六进制字段而不是字符串？

> ID：15477496
> 
> 赞同：1
> 
> 时间：2013-03-18T13:02:10.490
> 
> 标签：mysql, hex

我有一个表，其中包含一个 varchar(1024) 字段，其中包含具有十六进制编码字符串的字符串。该表是自动填充的，我必须提供一个 SP 以允许用户下载它，因此，我需要将十六进制更改回人类可读的形式。

如果我手动运行此语句（从字段中获取十六进制数据），它工作得很好：

```
SELECT X'5468697320697320612074657374206D6573736167652031323334353637383930'; 
```

但是我找不到在调用字段/列名时让它工作的工作示例。我找到了一些示例，但这些示例只返回 null 或 0。

我试过 X 和 UnHex() 都没有给我结果。

我哪里错了？

谢谢

* * *

编辑：

好的，在进行了更多测试之后，看来它首先必须是写入数据库的方式。

这是一个调用创建数据库条目的 SP 的经典 ASP 页面。在这种方法中，对数据库的写入工作，我可以在字段中看到 HEX 内容。复制该字段的内容，并将其放入 Select X'123123' 中，即可得到我想要的 ASCII 值。

如果我将其作为 Select 进行尝试，则会失败，返回零或 Null。

```
SELECT Message_Body_Hex, UNHEX(Message_Body_Hex) FROM messages_inbound 
```

返回：

> Message_Body_Hex......unhex(Message_Body_Hex)
> 
> 417265612032........（空）

还是一头雾水！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:17:59.793

在 MySQL 5.5.29-1 上使用 UNHEX() 函数似乎可以正常工作：

```
mysql> create table t1 ( f1 varchar(1024) );
Query OK, 0 rows affected (0.03 sec)

mysql> insert into t1 values('5468697320697320612074657374206D6573736167652031323334353637383930');
Query OK, 1 row affected (0.02 sec)

mysql> select f1 from t1; 
+--------------------------------------------------------------------+
| f1                                                                 |   
+--------------------------------------------------------------------+
| 5468697320697320612074657374206D6573736167652031323334353637383930 |
+--------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> select unhex(f1) from t1; 
+-----------------------------------+
| unhex(f1)                         |   
+-----------------------------------+
| This is a test message 1234567890 |
+-----------------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-13T13:48:13.737

我意识到这是一个老问题，但我今天遇到了同样的问题并使用 HEX 和 CAST 的组合解决了它。使用您的示例，试试这个：
`SELECT HEX(CAST(X'5468697320697320612074657374206D6573736167652031323334353637383930' AS CHAR(33)))`

从表中提取时，您将替换字段名称：

`SELECT HEX(CAST(binary_field AS CHAR(33)))`

我已经看到其他建议使用 MAX 代替 33 的答案，但这似乎工作正常。以下是我使用的一些资源：
[SQL Server 将 varbinary 转换为字符串](https://stackoverflow.com/questions/12139073/sql-server-converting-varbinary-to-string)
以及
[如何在 mysql 中从 varbinary 转换为 char/varchar](https://stackoverflow.com/questions/1873085/how-to-convert-from-varbinary-to-char-varchar-in-mysql)

# iphone - 在 ARC 上显示 UIKeyboard 时出现内存泄漏

> ID：15477502
> 
> 赞同：4
> 
> 时间：2013-03-18T13:02:20.173
> 
> 标签：iphone, ios

当被调用时，内存被分配而不是被隐藏`UIKeyboard`时被释放。`UIKeyboard`如果是框架在缓存它，有什么办法可以清除它吗？这些代码是我用来创建`UITextField`和隐藏的`UIKeyboard`：

```
 #import <UIKit/UIKit.h>

    @interface SignInTextField : UITextField

    -(id)initWithIndexPath:(NSIndexPath*)indexPath;

    @end

    #import "SignInTextField.h"

    @implementation SignInTextField

    -(id)initWithIndexPath:(NSIndexPath*)indexPath{
        self = [super init];
        if (self) {
            if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
                // iPad
                self.frame = CGRectMake(110, 10, 600, 30);
            } else {
                self.frame = CGRectMake(110, 11, 150, 30);
            }

            self.tag = [indexPath row];
            self.returnKeyType = UIReturnKeyDone;
            self.autocapitalizationType = UITextAutocapitalizationTypeNone;
        }
        return self;
    }

    //SettingTextField
    SignInTextField *textField = [[SignInTextField alloc]initWithIndexPath:indexPath];
    textField.delegate = self;

    #pragma mark - Text Field CallBack
    -(void)textFieldDidBeginEditing:(UITextField *)textField{
        activeField = textField;
    }

    - (void)textFieldDidEndEditing:(UITextField *)textField {

        if(textField.tag == 0) temp_email = [NSString         stringWithFormat:@"%@",textField.text];
        if(textField.tag == 1) temp_password = [NSString stringWithFormat:@"%@",textField.text];
    }

    - (BOOL)textFieldShouldReturn:(UITextField *)textField {
        [textField resignFirstResponder];
        return YES;
   } 
```

![这是泄漏点。](../Images/ca6f7bb3dd3754bfcfce7801343bab45.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T13:36:25.713

当您第一次打开键盘时，它会被 iOS 原生框架缓存。它由 UIKit 框架处理。

它不是内存泄漏。下次需要显示键盘时，应用程序将使用缓存键盘。

如果内存要求很高，本机框架将在需要时释放缓存的视图。应用程序仍然需要内存，框架会为此生成内存警告。

# jquery-mobile - 在 JQuery 移动应用程序的默认主题中自定义标题

> ID：15477503
> 
> 赞同：2
> 
> 时间：2013-03-18T13:02:21.550
> 
> 标签：jquery-mobile

我正在开发一个 JQuery Mobile 应用程序。我需要放大用于标题文本的字体。每当我放大文本大小时，ui-header 栏的高度就会增加。我不希望它长大。相反，我希望 ui-header 保持与默认 ui-header 相同的大小。我只是想放大文字大小。目前，我有以下内容：

```
.t1 { color: blue; font-size:24pt; font-weight:normal; }
.t2 { color: white; font-size:24pt; font-weight:normal; }

<div data-role="header" data-position="fixed">
  <a href="#" data-icon="arrow-l" data-direction="reverse" data-iconpos="notext" class="ui-btn-left jqm-home dd-btn">Back</a>
  <h1><span class="t1">My</span><span class="t2">App</span></h1>
</div> 
```

如何在不增大标题的情况下更改字体大小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:08:27.887

您还必须修改`.ui-header .ui-title`更改顶部和底部边距值的规则。例如：

```
.ui-header .ui-title {
    margin: 0 30% 0;
} 
```

[http://jsfiddle.net/Pwqtm/1/](http://jsfiddle.net/Pwqtm/1/)

# wpf - 在 WPF 中显示来自火线连接的实时流？

> ID：15477504
> 
> 赞同：2
> 
> 时间：2013-03-18T13:02:23.823
> 
> 标签：wpf, directshow, video-capture, firewire

我有一个通过火线连接的高分辨率相机。SDK 让我可以将帧抓取到字节缓冲区中。例如：

```
unsigned char *buffer = new unsigned char[size];
GetFrameBuffer(cameraHandle, buffer); 
```

由于 API 的性质，需要连续抓取帧 (20+ fps) 以显示实时视图。现在，我想在我的 WPF UI 中显示它。我可以想到几种方法，但我需要帮助确定选择哪种方法！

## 想法

1.  通过互操作更新的属性`Source`不断更新[Image元素。](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)
2.  `HWND`在[HwndHost](http://msdn.microsoft.com/en-us/library/system.windows.interop.hwndhost.aspx)中托管基于自定义的控件。当消息泵空闲时，图像将被更新。
3.  在 DirectShow 中编写一个源过滤器，使用某种计时逻辑连续读取缓冲区 - 从而可以使用[MediaElement](http://msdn.microsoft.com/en-us/library/system.windows.controls.mediaelement.aspx)显示实时视图。

显然，我想最小化 CPU 负载。

问题归结为：

**在 WPF 中，我如何**使用原始 API显示来自火线连接的实时流`GetFrameBuffer`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:49:07.890

我认为最简单的方法是第一种。只需更新图像源。如果您只想显示它，则不需要为此使用 directshow 过滤器。但如果你也想捕捉它，DirectShow 过滤器是最好的方法！

更新图像源是一项简单的任务。一个很好的例子是[.net 的 Mjpeg 解码器](http://channel9.msdn.com/coding4fun/articles/MJPEG-Decoder)。您只需用您自己的抓取器逻辑替换 Mjpeg 阅读器/解析器。

# deployment - 由于缺少 ojdbc6.jar，服务器重新启动后 JBoss 部署失败

> ID：15477506
> 
> 赞同：0
> 
> 时间：2013-03-18T13:02:29.167
> 
> 标签：deployment, jboss

在我们的开发服务器上，有六个左右成功部署的应用程序。每个星期天晚上，服务器（不确定是 JBoss 还是实际服务器）都会重新启动。当 JBoss 尝试重新部署所有应用程序时，其中一个应用程序失败，然后全部回滚。

我*认为*正在发生的事情是一个应用程序依赖于 ojdb6.jar，它也被部署为一个应用程序，但是在 JBoss 尝试部署 oracle 驱动程序之前尝试部署该应用程序。

我按照这篇文章[http://middlewaremagic.com/jboss/?p=350](http://middlewaremagic.com/jboss/?p=350)安装驱动程序并按照“作为部署安装”

我应该让服务器人员作为模块的驱动程序吗？或者错误是否存在于我的应用程序如何依赖数据库驱动程序？

# asp.net - ASP.NET 无法在代码隐藏文件中访问用户控件的属性

> ID：15477513
> 
> 赞同：0
> 
> 时间：2013-03-18T13:02:50.777
> 
> 标签：asp.net, user-controls, code-behind

视觉工作室 2008、C#、ASP.NET

需要以编程方式制作 Web 用户控件的多个副本（或实例）。

我有 UserControlFile.ascx，其中包含一个带有 ID=" **vhLabel " 的****asp:Label**。在该文件中，我像往常一样通过公共字符串**vhText**变量设置标签的 Text 属性：

 ****```
public string vhText
{
    set
    {
        vhLabel.Text = value;
    }
} 
```

此文件中还有一些 div 和其他 html 数据无法在 C# 中以编程方式创建，因此我必须使用 ascx 文件。

现在，在代码隐藏文件中，我需要：

1.  多次克隆此用户控件；
2.  通过“vhText”变量为每个克隆的标签属性“Text”设置唯一值。

请分享您对这些问题的建议。如果你需要，我可以在这里展示我的代码。我一直在寻找答案很长时间，但仍然没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:09:13.700

您需要使用 LoadControl 方法：

```
MyUserControl control = (MyUserControl)Page.LoadControl("~/UserControlFile.ascx");
control.vhText = "first control";
Page.Controls.Add(control);

control = (MyUserControl)Page.LoadControl("~/UserControlFile.ascx");
control.vhText = "second control";
Page.Controls.Add(control);

control = (MyUserControl)Page.LoadControl("~/UserControlFile.ascx");
control.vhText = "third control";
Page.Controls.Add(control); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:26:32.653

您可以在此处找到如何以编程方式将用户控件添加到页面的演练：http: [//msdn.microsoft.com/en-us/library/c0az2h86 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/c0az2h86(v=vs.100).aspx)

在你的情况下，你需要在你的`UserControlFile.ascx`控制中这样的东西（`className`属性是重要的一点）：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="UserControlFile.ascx.cs" Inherits="UserControlFile" className="MyUserControl" %>
<asp:Label ID="vhLabel" runat="server"></asp:Label> 
```

然后，在包含控件的页面顶部（更改适合您的结构的文件路径）：

```
<%@ Reference Control="~/Controls/UserControlFile.ascx" %> 
```

最后，页面后面的代码将包含通过`LoadControl`方法和类型的使用以编程方式添加控件实例的代码 - 在上面 @Control 指令`MyUserControl`的属性中定义：`className`

```
protected void Page_Load(object sender, EventArgs e)
{
    var control = (ASP.MyUserControl)LoadControl("~/Controls/UserControlFile.ascx");
    control.vhText = "1";
    Page.Controls.Add(control);

    control = (ASP.MyUserControl)LoadControl("~/Controls/UserControlFile.ascx");
    control.vhText = "2";
    Page.Controls.Add(control);

    /* etc... */
} 
```

那应该为您指明正确的方向...****

# domain-driven-design - 域内的实体如何相互连接？

> ID：15477515
> 
> 赞同：0
> 
> 时间：2013-03-18T13:03:05.740
> 
> 标签：domain-driven-design

假设有两个域实体：

*   **带有方法**addNewImage** **()**、**removeImage** ( *$imageId* )、**getImages** ( *$from, $count* ) 的 UserImages。**
***   **带有字段**name**、**age**、**mainImageId**等的**UserProfile 。******

 ****域内需要以下功能：当应用层调用**UserImages** -> **addNewImage()**时，会自动设置**UserProfile** -> **mainImageId**以防它为空。

那么，实现域内超实体业务逻辑的最佳方式和最佳位置是什么？具有观察服务、引用实体的特殊服务或其他方式的领域事件？

我使用某种工厂创建所有实体，即

```
$userImages = Domain::userImages($userId); // getting an instance of UserImages
$newImageId = $userImages -> addNewImage();   // adding a new image 
```

我还应该提到，我的项目中将有很多如上所述的逻辑。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:58:53.583

用户听起来像我的聚合（没有上下文很难给你一个意见:)），但它可以解决你的问题。

如果 Profil 和 Images 是不同的有界上下文，可能你可以使用域事件（它有助于跨界上下文通信）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T20:02:08.590

首先，正如您在[其他问题](https://stackoverflow.com/questions/15472233/implementing-a-big-collection-entity-without-loading-data-into-memory)中所指定的那样，`UserImages`它本身并不是一个实体。相反，可能有一个实体称为`UserImage`，它指的是用户的图像，单数。然后， A`UserImageRepository`可以提供对与用户关联的所有图像的访问，在必要时使用分页。

现在，用例是：

> **添加**新用户图片时，**如果**未设置用户头像， 则将其**设置**为添加的图片。

术语**when**表示[域事件](http://www.udidahan.com/2009/06/14/domain-events-salvation/)。在这种情况下，事件是`UserImageAdded`。粗体**if**和后续**集合**表示响应事件所需的行为。

要实现此用例，必须在添加用户图像时发布事件，并且必须为实现所需行为的处理程序订阅此事件。这篇链接的域事件文章提供了 C# 中的示例实现，但是可以轻松地将这个概念移植到 PHP。总体而言，所需的组件是：

*   处理添加用户图像的**应用程序服务。**该服务将发布事件。
*   由应用程序服务调用并允许发布者与订阅者分离的领域**事件发布者。**
*   处理事件并调用所需行为的域**事件处理程序。**`UserImageAdded`****

# php - 使用 PHP 和 MySQL 使用预定义的值更新行记录

> ID：15477517
> 
> 赞同：0
> 
> 时间：2013-03-18T13:03:12.980
> 
> 标签：php, mysql

我正在尝试使用 PHP 和 MySQL 使用预定义的值更新一行中的特定记录。我不想使用“输入”，因为我的新值是在代码中定义的。

表学生

```
 id     name     grade   
 1      dave     b       Update< hyperlink to update.php
 2      mark     c       Update
 3      john     e       Update
 4      thomas   d       Update 
```

单击“更新”后，我希望特定行的等级值在每种情况下都更改为恒定值“a”。因此，假设我在 ID 为“1”和“2”的行中单击了更新。

期望的结果：

```
 id     name     grade   
 1      dave     a       Update
 2      mark     a       Update
 3      john     e       Update
 4      thomas   d       Update 
```

我确实知道如何使用我自己插入数据然后提交的输入字段来做到这一点。但是，我需要在单击更新时更改数据。

这就是我显示数据的方式：

```
 while ($row=mysql_fetch_array($result)){
    echo ("<tr><td>$row[id]</td>");
    echo ("<td>$row[name]</td>");
    echo ("<td>$row[grade]</td>");
    echo ("<td><center><a href=\"udapte.php?id=$row[id]\">Update</a></center></td></tr>"); 
```

更新.php

```
// Connect to server and select databse.

$order = "UPDATE students 
      SET grade='a' 
      WHERE id='id'";
mysql_query($order); 
```

我知道 mysql_* 不是最安全的方法。但是，一旦我一切正常，我将修改 php 以使用 PDO。谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:20:42.780

通过链接的 href 传递要更新的记录的 id。

1st，在page.php中用php创建那些链接。Rose 链接调用相同的页面，但在 url 中带有附加参数。
该代码假设您的所有记录都存储在数组 $rows...

```
foreach ($rows as $row) {

    $h = $row['name'] . ', grade: ' . $row['grade'];
    $h.= ' <a href="page.php?do=update&id=' . $row['id'] . '">change grade</a>';
    echo $h . '<br />';

} 
```

然后，在 page.php 的开头：

```
if (isset($_GET['do']) && $_GET['do'] == 'update'] && isset($_GET['id])) {

  // enter your update code here
  // pls use mysqli_ or PDO instead of deprecated mysql_!

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:18:32.313

如果要在单击更新后直接更改数据，则必须使用从 update.php 重定向回页面

```
header('location:currentpage.php'); 
```

或者您可以使用 Ajax。

如果您的代码与您在上面预先提供的代码完全一样：

```
$order = "UPDATE students 
  SET grade='a' 
  WHERE id='id'";
 mysql_query($order); 
```

问题是您错过了 id 变量附近的美元符号 ($)。它应该是

```
 ... id='$id'"; 
```

# java - 将 JSON 从一种格式转换为另一种格式？

> ID：15477519
> 
> 赞同：-3
> 
> 时间：2013-03-18T13:03:18.710
> 
> 标签：java, json

我有一个格式为 json 的流，我想将其转换为另一种格式，以便将其与另一个应用程序的输入相匹配。例如：

```
{
  "id": "133880733349264", 
  "feed": {
    "data": [
      {
        "message": "message", 
        "created_time": "2013-03-16T12:12:10+0000", 
        "id": "133880733349264_477856435618357",
        "comments": {
          "data": [
            {
              "message": "message", 
              "id": "133880733349", 

            }
      ]
  }
} 
```

需要是： {

```
 "feed": {

        "identifier": "133880733349264"   
        "message": "message", 
        "created_time": "2013-03-16T12:12:10+0000", 
        "id": "133880733349264_477856435618357",
       },
  "comments": {
             "message": "message", 
             "id": "133880733349", 
             "message_id":"133880733349264"
          }
} 
```

关于如何使用它的任何想法或模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:24:12.490

这几乎不是火箭科学。

1.  打开输入文件。
2.  使用 JSON 库从文件中读取/解析 JSON。
3.  将内存中的数据结构转换为新结构。
4.  打开输出文件
5.  使用 JSON 库将内存中的数据结构解析为文件。

转换的详细信息取决于您的应用程序以及您使用的 JSON 库（或绑定）的性质。如果您想查看可用的内容，请访问[http://www.json.org](http://www.json.org)。

* * *

另一种选择是使用 JSLT 引擎……或多或少是“用于 JSON 的 XSLT”。

我为此找到了一些谷歌点击...一旦我说服谷歌我*真的是指 JSLT*而不是 JSTL。但有趣的是，所有提到 JSLT 的 SO 问题似乎实际上都是 JSTL 的拼写错误。（这为我敲响了一些关于这种方法的警钟......）

# python - 限制仅访问拥有的内容 django

> ID：15477521
> 
> 赞同：4
> 
> 时间：2013-03-18T13:03:23.030
> 
> 标签：python, django, tastypie, django-guardian

我正在使用[django-tastypie](http://django-tastypie.readthedocs.org/en/latest/)编写 API 。我有两个自定义权限问题，希望[django-guardian](https://github.com/lukaszb/django-guardian)可以解决。

我有两个用户组临床医生和患者。临床医生应该能够访问仅属于他们的患者的对象，而患者应该只能访问他们自己创建的对象。

我的代码如下：

```
class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        resource_name = 'auth/user'
        excludes = ['email', 'password', 'is_superuser']

class BlogPostResource(ModelResource):
    author = fields.ToOneField(UserResource, 'author', full=True)

    class Meta:
        queryset = BlogPost.objects.all()
        resource_name = 'posts'
        allowed_methods = ["get", "post"]
        # Add it here.
        authentication = BasicAuthentication()
        authorization = DjangoAuthorization()
        filtering = {
            'author': ALL_WITH_RELATIONS,
        } 
```

我如何使用权限来限制对此的访问`BlogPostResource`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:13:44.000

[您可以使用自定义授权](http://django-tastypie.readthedocs.org/en/latest/authentication_authorization.html#implementing-your-own-authentication-authorization)类来实现这一点，例如：

```
class CustomAuthorization(Authorization):
    def apply_limits(self, request, object_list):     
        ...
        clin_group = Group.objects.get(name='YOUR GROUP')
        if request and hasattr(request, 'user'):
            if clin_group in request.user.groups.all(): 
                 object_list = object_list.filter(user__in=request.user.patients.all()) # or however you stop clinician>patient relation
            else:
                 object_list = object_list.filter(user=request.user)
        return object_list 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T16:27:48.577

我的最终解决方案基于@JamesO[的](https://stackoverflow.com/users/188955/jameso)[答案](https://stackoverflow.com/a/15477730/374052)。他的答案的问题是它是在 重写课程之前为旧版本的 django-tastypie 编写的。这是我的代码以供将来参考：`Authorization`

```
from tastypie.authorization import Authorization
from django.contrib.auth.models import Group
from extendedusers.models import ExtendedUser

class CustomAuthorization(Authorization):
    def read_list(self, object_list, bundle):
        clinician_group = Group.objects.get(name='clinician')
        if bundle.request and hasattr(bundle.request, 'user'):
            if clinician_group in bundle.request.user.groups.all():
                patients = ExtendedUser.objects.filter(clinician_id=bundle.request.user.id)
                object_list = object_list.filter(author__id__in=patients)
            else:
                object_list = object_list.filter(author=bundle.request.user)
            return object_list
        else:
            return object_list.none() 
```

# java - 如何实现 Jbutton 和事件侦听器来关闭应用程序？

> ID：15477523
> 
> 赞同：0
> 
> 时间：2013-03-18T13:03:29.187
> 
> 标签：java, swing, jbutton, event-listener

以下是我的代码... jButton 将添加到 Gui 方法中。我需要一个 jbutton 添加到容器和一个事件监听器以使应用程序在推送时关闭。

```
public class BeetsWk1 extends JFrame{

public BeetsWk1(){

     GuI();
}

public void GuI(){
      FlowLayout layout = new FlowLayout();

        layout.setAlignment(FlowLayout.CENTER);

    Container container;
    container = getContentPane();
    container.setBackground(new Color(052,062,138));
    container.setLayout(layout);

    JLabel label = new JLabel();
    label.setText ("Hello World" );
    label.setSize( 500, 400);
            label.setFont( new Font( "SanSerif", Font.PLAIN, 15) );
            label.setHorizontalAlignment( JLabel.CENTER );
    label.setForeground(Color.white);
    container.add( label );
}

    public static void main(String[] args) {
        // TODO code application logic here
            Dimension dimension = new Dimension(500, 500);
                        BeetsWk1 window = new BeetsWk1();
                       window.setVisible(true);
                        window.setSize(dimension);
                           window.setDefaultCloseOperation(window.EXIT_ON_CLOSE);
    }

    private Dimension Dimension(int i, int j) {
        throw new UnsupportedOperationException("Not yet implemented");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:08:06.550

是什么阻止你？

```
JButton button = new JButton();
button.setText("Some text");
getContentPane().add(button);

button.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent evt) {
           System.exit(0);
      }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:23:41.450

```
// 'this' represents the frame
// the 'button' is provided free
this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:40:23.900

如果你想关闭你的容器然后

```
button.addActionListener(new ActionListener() {
       @Override 
      public void actionPerformed(ActionEvent evt) {
          jframe.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);//jframe is your JFrame Object
      }
}); 
```

或者如果您想关闭整个应用程序，那么

```
system.exit(0); 
```

# jquery - 流一个字节 [] 以在 jquery 模态中加载为 PDF (MVC3)

> ID：15477525
> 
> 赞同：2
> 
> 时间：2013-03-18T13:03:33.413
> 
> 标签：jquery, asp.net-mvc-3, pdf, byte, modal-dialog

当使用 MVC3 单击某个链接时，我正在尝试流式传输一个字节 [] 以在 jquery 模式中加载。在我的控制器中，我有

```
public ActionResult GetTermsAndCondtion()
        {
            byte[] termsPdf = GetTermsAndConditions(DateTime.Now);              
            return new FileContentResult(termsPdf, "application/pdf");
        } 
```

在我的一种观点中，我有

```
@Html.ActionLink("Terms and Conditon","GetTermsAndCondtion","Customer", new{id="terms"}) 
```

这将在选项卡中打开 pdf 文件。但我想在模态中将 byte[] 作为 pdf 文件打开。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:01:51.220

iframe 可能是您的答案。

问题是ajax无法在浏览器中加载pdf，要显示pdf，您必须指定内容配置，浏览器在他里面显示pdf

指定内容配置添加标题

```
HttpContext.Response.AddHeader("content-disposition", "inline; filename=MyFile.pdf")
Return File(fileStream, "application/pdf") 
```

控制器

```
public ActionResult GetTermsAndCondtion()
        {
            byte[] termsPdf = GetTermsAndConditions(DateTime.Now);
            HttpContext.Response.AddHeader("content-disposition", "inline; filename=MyFile.pdf");

            return File(termsPdf, "application/pdf");
        } 
```

最后在你的模式中添加这个 iframe

```
<iframe src="@url("GetTermsAndCondtion","NameOfYourController")" width="400" height="500" scrolling="auto" frameborder="1">
</iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T12:27:45.777

这是[查看/打印/保存 PDF] 的解决方案，它通过 MVC-ajax 调用从 byte[] 生成 PDF 模式对话框。它是由其他地方的许多其他半相关帖子构建的。有两种选择：PrintDialog1 使用 object 标签，分别为 PrintDialog2 使用 iframe 标签。

控制器 >>

```
[Post]
public ActionResult DoSomethingThatResultsInCreatingAPdf(CreatePaymentViewModel model)
{
  byte[] pdf = DoSomethingThatResultsInCreatingAPdfByteArray();
  string strPdf = System.Convert.ToBase64String(pdf);
  var returnOjb = new { success = true, pdf = strPdf, errors = "" ...otherParams};
  return Json(returnOjb, JsonRequestBehavior.AllowGet);
} 
```

剃须刀页面>>

```
 <div id="PrintPopup"></div>

<script type="text/javascript">

  function DoSomethingThatResultsInCreatingAPdf(btn, event) { 
    event.preventDefault();
    var action = '/Controller/DoSomethingThatResultsInCreatingAPdf/';
    $.ajax({
      url: action, type: 'POST', data: some_input_data,
      success: function (result) {
        if (result.success) {
            PrintDialog-1or2(result.pdf);
        }else{ $('#errors').html(result.errors); }
      },
      error: function () {}
    });
    }//___________________________________

  function PrintDialog1(pdf) { //<object tag>
    var blob = b64StrtoBlob(pdf, 'application/pdf'); 
    var blobUrl = URL.createObjectURL(blob);
    var content = String.format("<object data='{0}' class='ObjViewer'></object>", blobUrl);
    $("#PrintPopup").empty();
    $("#PrintPopup").html(content);
    $("#PrintPopup").dialog({
      open: true, modal: true, draggable: true, resizable: true, width: 800, position: { my: 'top', at: 'top+200' }, title: "PDF View, Print or Save...",
      buttons    : {'Close': function () { $(this).dialog('close'); }}
    });
    return false;
  }//___________________________________

  function PrintDialog2(pdf) { //<iframe tag>
    var content = "<iframe src='data:application/pdf;base64," + pdf + "'></iframe>";
    $("#PrintPopup").empty();
    $("#PrintPopup").html(content);
    $("#PrintPopup").dialog({
      open: true, modal: true, draggable: true, resizable: true, width: 800, position: { my: 'top', at: 'top+200' }, title: "PDF View, Print or Save...",
      buttons    : {'Close': function () { $(this).dialog('close'); }}
    });
    return false;
  }//___________________________________

  String.format = function () {
    var s = arguments[0];
    for (var i = 0; i < arguments.length - 1; i++) {
      var reg = new RegExp("\\{" + i + "\\}", "gm");
      s = s.replace(reg, arguments[i + 1]);
    }
    return s;
  }//___________________________________

  function b64StrtoBlob(b64Data, contentType, sliceSize) {
    contentType = contentType || '';
    sliceSize = sliceSize || 512;
    var byteCharacters = atob(b64Data);
    var byteArrays = [];
    for (var offset = 0; offset < byteCharacters.length; offset += sliceSize) {
      var slice = byteCharacters.slice(offset, offset + sliceSize);
      var byteNumbers = new Array(slice.length);
      for (var i = 0; i < slice.length; i++) {
        byteNumbers[i] = slice.charCodeAt(i);
      }
      var byteArray = new Uint8Array(byteNumbers);
      byteArrays.push(byteArray);
    }
    var blob = new Blob(byteArrays, {type: contentType});
    return blob;
  }//___________________________________ 
```

# android - 用于 NFC 读取器/写入器的 Android 库/API

> ID：15477526
> 
> 赞同：3
> 
> 时间：2013-03-18T13:03:34.793
> 
> 标签：android, nfc, android-hardware

是否有任何现有的库允许没有 NFC 芯片的 Android 平板电脑（4.0.4）与外部 USB NFC 读/写器接口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:30:51.640

是的，ACR 122 U 可以通过 USB OTG 电缆连接。[ACR 在其驱动程序页面](http://www.acs.com.hk/index.php?pid=drivers&id=ACR122U)上有一个 Android 测试应用程序。您还需要类似[NFC Tools for Java](https://github.com/grundid/nfctools)之类的东西来与阅读器交互（发送命令等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:08:31.150

也许默认包会帮助你。否则，您可以查找任何第三方库

[http://developer.android.com/reference/android/nfc/package-summary.html](http://developer.android.com/reference/android/nfc/package-summary.html)

或者这可能会帮助你

[如何通过 API 启用 NFC 阅读器？](https://stackoverflow.com/questions/6509316/how-can-i-enable-nfc-reader-via-api)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T15:26:01.017

ACR 1222L 阅读器有它的安卓库。

[http://android.acs.com.hk/](http://android.acs.com.hk/)

这些库的文档可以在这里找到：

[http://www.acs.com.hk/download-driver-unified/5102/ACS-EVK-Android-112-A.zip](http://www.acs.com.hk/download-driver-unified/5102/ACS-EVK-Android-112-A.zip)

# html - 跨域ajax请求

> ID：15477527
> 
> 赞同：14
> 
> 时间：2013-03-18T13:03:35.670
> 
> 标签：html, ajax, jquery, asp.net-ajax

我想从跨域 URL 中获取 HTML 响应页面。

为此，我使用 ajax 请求，

```
 $.ajax({
            type: 'GET',
            url: "http://wcidevapps.com/salescentral/idisk/0001000383/iDisk",
            dataType: "json",
            success: function (response) {
                $(response).find('li a').each(function () {
                    listHref.push($(this).attr('href'));
                });

            }
        }); 
```

但是在请求之后它没有回复任何结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-03T07:10:20.440

```
<script src="Scripts/jquery-1.4.1.js" type="text/javascript"></script>
  <script type="text/javascript">
    function NameAFunctionName() {
        $.ajax({
          url: 'http://wcidevapps.com/salescentral/idisk/0001000383/iDisk',
          type: 'GET',
          dataType: 'json',
          headers: {
            //WRITE IF THEIR HAVE SOME HEADER REQUEST OR DATA
          },
          crossDomain: true,
          success: function (data, textStatus, xhr) {
            console.log(data);
          },
          error: function (xhr, textStatus, errorThrown) {
            console.log(errorThrown);
          }
        });
    }   
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T13:04:49.257

检查文档： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

> **crossDomain** *（默认：同域请求为 false，跨域请求为 true）*
> 
> 类型：布尔值
> 
> 如果您希望在同一域上强制执行跨域请求（例如 JSONP），请将 crossDomain 的值设置为 true。例如，这允许服务器端重定向到另一个域。（添加的版本：1.5）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-18T13:16:09.080

如果您使用的是 asp.net 网络服务，那么您需要将其添加到 webconfig 文件中；

```
<system.webServer>
    <directoryBrowse enabled="true"/>
<httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*" />
    <add name="Access-Control-Allow-Headers" value="Content-Type" />
  </customHeaders>
</httpProtocol>
</system.webServer> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T13:21:45.850

我怀疑您看到了这个问题，因为您请求的页面没有响应 json(p) 响应，而是响应重定向到：

```
http://wcidevapps.com/salescentral/idisk/0001000383/iDisk/ 
```

（注意尾部斜杠）

然后返回内容类型：

```
Content-Type:text/html;charset=ISO-8859-1 
```

**编辑：**如果您打算跨域检索上述站点的数据，以便您的脚本进一步解析，我建议您选择以下之一：

**假设 1**：*您*可以控制服务器“ [http://wcidevapps.com](http://wcidevapps.com) ”上的页面

在这种情况下，您有两个选择：将 CORS 标头“Access-Control-Allow-Origin: *”添加到响应中（并使用 dataType:"html" 配置客户端 ajax() 调用），或者创建一个特殊的 JSON( P) 提供与 JSON 相同数据的页面（带填充）（并像在 OP 中一样配置客户端 ajax() 调用，使用 dataType:"jsonp"）

**假设 2**：*您*无法**控制**服务器[http://wcidevapps.com上的页面](http://wcidevapps.com)

在这种情况下，我能想到的唯一选择是在您控制的站点上设置代理。[让该代理“代理”对“ http://wcidevapps.com](http://wcidevapps.com) ”的请求/响应，但将 CORS 标头“Access-Control-Allow-Origin: *”添加到响应中（并使用配置客户端 ajax() 调用数据类型：“html”）

# java - JAVA中的字符串数组类

> ID：15477545
> 
> 赞同：-2
> 
> 时间：2013-03-18T13:04:28.563
> 
> 标签：java, arrays, string

我需要有关此代码的帮助

问题

1.  编写一个具有全局可见性的 String 数组的 Java 类。
2.  添加一个将给定字符串添加到字符串数组的方法。
3.  添加一个在字符串数组中搜索给定字符串的方法。
4.  添加一个在字符串数组中搜索给定字符的方法。该方法应该计算并返回给定字符的出现次数。
5.  编写适当的 main 方法来测试这些类方法。

这就是代码。首先，我为方法创建了一个类，我为 TestString 数组创建了 scound 类

我的问题是我在 scound 课程中有错误，我尝试修复它，但它在第一堂课中不起作用：

```
 /*
     * To change this template, choose Tools | Templates
     * and open the template in the editor.
     */
    package ooplab3;

    public class StringArray {

        String[] sTA = null;
        int index = 0; //last added sring position in the string array

        public StringArray() {
        }

        public String[] getsTA() {
            return sTA;
        }

        public String getsTAindex(int i) {
            return sTA[i];
        }

        public int getcounter() {
            return index;
        }

        public void setCounter(int counter) {
            this.index = counter;
        }

        public void addStrinToArray(String st) {
            if (this.index < sTA.length) {
                sTA[this.index] = st;
                this.index++;
            }
        }

        public int searchStringInArray(String sT) {
            int n = 0;
            for (int i = 0; i < this.index; i++) {
                for (int j = 0; j < 10; j++) {
                    int indexOf = sTA[i].indexOf(sT);
                    n += searchStringInArray(sTA[i]);
                    return n;
                }
            }
            return n;
        }

        public int searchcharInArray(String sT) {
            int n = 0;
            int Startindex = 0;
            do {
                n += sT.indexOf(Startindex);
            } while (n > Startindex);
            return n;
        }

        public boolean containsChar(String s, char search) {
            if (s.length() == 0) {
                return false;
            } else {
                return s.charAt(0) == search || containsChar(s.substring(1), search);
            }
        }

        public void containsChar(Object object, String search) {
        }

    } 
```

声音类：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package ooplab3;

import java.io.FileNotFoundException;
import java.io.FileReader;
import java.util.Scanner;

public class testStringarray {

    public static void main(String[] args) throws FileNotFoundException {
        String[] testArray = new String[30];
        Scanner infile = new Scanner(new FileReader("input_txt"));

       // System.out.println("contents of testArray");

        int i = 0;
        while (infile.hasNext()) {
            String j = infile.next();
            addString(j, i);

            System.out.println(testArray[i] + "\n");

            i++;
        }
        }

    }

    the input file contain: hello this is my java program 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:10:14.213

据我所知，您有一个名为 的类`StringArray`，还有一个旨在测试`StringArray`. 但是第二类实际上根本没有*使用* `StringArray`。相反，它会创建自己的数组，并调用一个`addString()`与`StringArray`.

一个重要的问题`StringArray`是它永远不会创建一个实际的数组——它的数组成员变量仍然存在`null`。您需要一个 " `new`" 表达式来创建实际的数组。然后你的测试类应该做类似的事情

```
StringArray sa = new StringArray();
sa.addStringToArray("Hello, world");
String[] array = sa.getsTA();
for (String s: array)
    System.out.println(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:16:21.043

存在许多问题。这是其中之一：

在您的 StringArray.addStrinToArray() 方法中，您尝试将字符串分配给空数组的元素：

```
String[] sTA = null;
sTA[index] = st;  //this will throw NullPointerException 
```

您需要初始化数组：

```
String[] sTA = new String[initialSize]; 
```

其中 initialSize 是包含数组初始大小的整数。

# php - PHP CURL - 会话过期

> ID：15477546
> 
> 赞同：3
> 
> 时间：2013-03-18T13:04:32.280
> 
> 标签：php, session, curl

我正在尝试使用 PHP CURL 和 MEGAVOIP 进行 voip 通话。问题是我无法管理会话以访问受密码保护的页面。我查看了哪些变量发布到登录页面以使用 Curl 发布。但是我的代码不起作用。

按照 Colin Morelli 和 Waygood 的建议，我只是在两个命令中添加了这些行：

```
curl_setopt($ch, CURLOPT_COOKIESESSION, true);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookies_file);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookies_file); 
```

但它仍然是一样的：

Megavoip 回归：会话已过期

所以这是我的完整代码：

```
<?php
ini_set("display_errors", 1);  
$username="***"; 
$password="***"; 
$url="https://www.megavoip.com/login"; 
$url2="https://www.megavoip.com/phone_to_phone/";
$timeout = 10;
$cookies_file = 'cookies.txt';

// HERE I GET THE TOKEN

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_COOKIESESSION, true);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookies_file);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookies_file);
curl_setopt($ch, CURLOPT_TIMEOUT, $timeout);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
$content = curl_exec($ch);

preg_match_all('/<input[^>]+>/i',$content, $result); 
preg_match_all('/(id|value)=("[^"]*")/i',$result[0][5], $img);
$img1=str_replace('"', '', $img[0][0]);
$img2=str_replace('"', '', $img[0][1]);
$img1=substr($img1,3);
$img2=substr($img1,6);
$postdata = "login%5Busername%5D=".$username."&login%5Bpassword%5D=".$password."&page_referrer=login&".$img1."=".$img2; 

// HERE I SEND THE VARIABLES

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_COOKIESESSION, true);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookies_file);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookies_file);
curl_setopt($ch, CURLOPT_TIMEOUT, $timeout);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postdata);

$content = curl_exec($ch);

// IF LOGGED HERE I'LL MAKE THE CALL

curl_close($ch);

echo $content;
exit;
?> 
```

有什么想法可以帮助我吗？

这是一个测试帐户，所以如果您想查看并帮助我，请随时使用我的登录名和密码！

非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-12T16:19:31.027

好的，您需要在登录后转发 cookie/会话，

您需要在登录后首先从 Header 中提取 cookie，如下所示

```
// HERE I GET THE TOKEN

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_COOKIESESSION, true);    
.... .... 
.... ....
$content = curl_exec($ch);

preg_match('/^Set-Cookie:\s*([^;]*)/mi', $content, $m);
parse_str($m[1], $cookies);
$cookie = $cookies['NAMEOFCOOKIEUNEEDHERE']; 
```

之后需要像这样在 curl 选项中使用 $cookie 变量

```
// HERE I SEND THE VARIABLES

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_COOKIESESSION, true);
curl_setopt($ch, CURLOPT_COOKIE, 'NAMEOFCOOKIEUNEEDHERE='.$cookie); 
```

我希望你的问题能得到解决。

谢谢

莫因

# video - FFmpeg '-bframebias' 选项不见了？

> ID：15477550
> 
> 赞同：-1
> 
> 时间：2013-03-18T13:04:38.967
> 
> 标签：video, ffmpeg

最近我将ffmpeg更新到1.1版，当我运行一个包含 的命令时`bframebias`，它显示了一个错误：

```
Unrecognized option 'bframebias'.
Error splitting the argument list: Option not found 
```

该命令过去可以正常工作。那么该选项`bframebias`被删除还是被另一个选项取代？

```
C:\Users\Raymond\Downloads\ffmpeg-1.1-win32-static\bin>ffmpeg -i C:\Users\Raymon
d\Desktop\IntroductiontoITILREAD2.wmv -vcodec libx264 -r 25 -b:v 1500k -profile:
v main -level 41 -bf 3 -direct-pred auto -b_strategy 1 -weightb 1 -bidir_refine
1 -b-pyramid none -bframebias 0 -8x8dct 0 -partitions i8x8,i4x4,p8x8,p4x4,b8x8 -
maxrate 24000k -bufsize 24000k -bt 1.0 -qcomp 0.60 -me_range 16 -sc_threshold 40
 -me_method hex -subq 7 -cmp chroma -qmax 69 -qmin 10 -i_qfactor 0.71 -b_qfactor
 0.77 -trellis 0 -refs 2 -mixed-refs 0 -coder 1 -fast-pskip 1 -flags +loop -debl
ock 0:0 -rc-lookahead 40 -mbtree 1 -psy 1 -slices 0 -slice-max-size 0 -preset fa
st -acodec libvo_aacenc -profile:a aac_low -ar 48000 -ab 128000 -ac 2 -s 720x576
 -aspect 16:9 -f matroska C:\Users\Raymond\Desktop\OUTPUT.mkv

ffmpeg version 1.1 Copyright (c) 2000-2013 the FFmpeg developers
  built on Jan  8 2013 16:10:57 with gcc 4.7.2 (GCC)
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-av
isynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enab
le-libass --enable-libbluray --enable-libcaca --enable-libfreetype --enable-libg
sm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --e
nable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --e
nable-libtheora --enable-libtwolame --enable-libvo-aacenc --enable-libvo-amrwben
c --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxavs --enable-
libxvid --enable-zlib

  libavutil      52\. 13.100 / 52\. 13.100
  libavcodec     54\. 86.100 / 54\. 86.100
  libavformat    54\. 59.106 / 54\. 59.106
  libavdevice    54\.  3.102 / 54\.  3.102
  libavfilter     3\. 32.100 /  3\. 32.100
  libswscale      2\.  1.103 /  2\.  1.103
  libswresample   0\. 17.102 /  0\. 17.102
  libpostproc    52\.  2.100 / 52\.  2.100

Unrecognized option 'bframebias'.
Error splitting the argument list: Option not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:44:14.350

为什么要声明一大堆看似随机设置的 x264 选项，然后添加编码预设？建议简单地使用 x264 预设，而不是尝试调整每个选项。

### 为什么要使用预设？

预设：

*   由 x264 开发人员设计
*   与任何选项更改、删除和添加保持同步
*   更容易使用

你知道`-bframebias`（或者`--b-bias`如果直接使用 x264 cli）做什么吗？你知道这`0`是默认值吗？您是否知道libx264 私有选项`-bframebias`已贬值？`b-bias`

这正是您应该使用预设的原因。您将不必（尽可能多地）与选项更改作斗争，并且您不必知道每个选项的作用，因为预设会为您处理它。

### 更简单、更干净的命令

例如，您的命令可能可以简化为：

```
ffmpeg -i input -codec:v libx264 -b:v 1500k -profile:v main -level 41 -preset fast -codec:a libvo_aacenc -b:a 128k -ac 2 -vf scale=720:-1 output.mkv 
```

虽然我怀疑你需要`-profile:v main -level 41`，但我不确定你想要达到什么目的，我建议使用 of`-crf`而不是`-b:v`.

### 选择预设

For most purposes you want to use the slowest `-preset` you have patience for and the highest `-crf` value that still gives an acceptable quality. See the [FFmpeg and x264 Encoding Guide](https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide) for more information and examples.

### Changing the preset defaults

If you feel that you do need to tweak the options, then use the proper libx264 private AVOptions (as shown in `ffmpeg -h full` or `ffmpeg -h encoder=libx264`) or use the `-x264-params` option. See the example in [Overwriting default x264 preset settings](https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide#Overwritingdefaultpresetsettings).

# linux - 在 bash 中创建 zenity 菜单

> ID：15477552
> 
> 赞同：-1
> 
> 时间：2013-03-18T13:04:42.917
> 
> 标签：linux, bash, menu, options, zenity

我有这段代码，但我不知道如何在菜单中添加更多选项？我需要再添加两个选项。我该怎么做？为了使它起作用，它是否需要与我试图为其创建 GUI 的原始 bash 菜单位于同一个文件中？

```
# using zenity to create a menu
           temp=`mktemp -t temp.XXXXXX`
           temp2=`mktemp -t temp2.XXXXXX`
function diskspace {  
df -k > $temp  
zenity --text-info --title "Disk space" --filename=$temp  
--width 750 --height 10 }  
function whoseon { who > $temp  
zenity --text-info --title "Logged in users" --filename=$temp --width 500 --height 10  
}  
function memusage {  
cat /proc/meminfo > $temp  
zenity --text-info --title "Memory usage" --filename=$temp  
--width 300 --height 500 }  
while [ 1 ]  
do  
zenity --list --radiolist --title "Sys Admin Menu" --column "Select" --column "Menu     Item"    
FALSE "Display disk space" FALSE "Display users" FALSE "Display memory usage" FALSE   "Exit"   > $temp2  
if [ $? -eq 1 ]  
then  
break fi  
           selection=`cat $temp2`  
           case $selection in  
           "Display disk space") 
              diskspace ;;  
           "Display users")  
              whoseon ;;
           "Display memory usage")
              memusage ;;  
           Exit)  
break ;; *)  
zenity --info "Sorry, invalid selection" esac  
done $ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:09:43.147

首先，最好不要直接从 Linux 命令行和 Shell 脚本圣经中复制，如果你阅读了那本书中关于 zenity 和菜单的整个部分，你就会明白。

如果你把这部分脚本

```
function 'function1' { 'code for doing function1'  
zenity --text-info --title "Logged in users" --filename=$temp --width 500 --    height 10  
} 
```

将其插入到其他类似部分的下方，这声明了函数被调用的内容以及它将做什么

然后使用这样的东西：

```
 "Function1*") 
          function1 ;; 
```

带有星号的功能是菜单上将显示的内容，第二个是指上一段代码，以了解要执行的代码。

希望这是有道理的

# android - 阿普苏阿在哪里？

> ID：15477556
> 
> 赞同：1
> 
> 时间：2013-03-18T13:04:54.600
> 
> 标签：android, sip, pjsip

我正在尝试将 pjsip lib 用于 android，在阅读了一些谈论该主题的网站后，我仍然想知道如何使用它。许多示例建议在下载的包中开始构建 apjsua 文件夹，但我在 /pjproject-2.1.0/pjsip-apps/src/ 中找不到它

我有所有其他来源而不是 apjsua，这个文件夹自新版本以来是否有另一个名称？

感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T11:15:37.120

PJSIP 还没有发布 Android 版本，它仅用于测试目的。您可以在分支中找到适用于 android 的 PJSIP 项目。这是链接：<a href="http://svn.pjsip.org/repos/pjproject/branches/projects/android/" rel="nofollow">http://svn.pjsip.org/repos/ pjproject/分支机构/项目/android/

所以我建议你下载整个 pjproject。

您可以在 pjproject/branches/projects/android/pjsip-apps/src/apjsua 中找到 apjsua

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T13:35:29.903

在某些版本中，它的名称是 apjsua，而在其他版本中，它的名称是 pjsua。
来自以下链接的结帐代码：​<br> [http://svn.pjsip.org/repos/pjproject/trunk](http://svn.pjsip.org/repos/pjproject/trunk)

在 PJSIP 入门页面上使用给定命令签出并构建它后，您将在以下路径中找到它：

```
 PJSIP_DIR/pjsip_apps/src/pjsua/android/ 
```

如需确认，您可以通过以下链接浏览代码进行检查：

[http://trac.pjsip.org/repos/browser](http://trac.pjsip.org/repos/browser)

# oracle-apex - 按需流程响应的问题

> ID：15477568
> 
> 赞同：0
> 
> 时间：2013-03-18T13:05:18.673
> 
> 标签：oracle-apex

我正在使用 Oracle ApEx v4.1 和动态操作，它基本上调用一个 javascript 函数，该函数又调用一个按需进程将数据保存到数据库。

只是一点背景知识，当用户按下“保存”按钮或“下一步”按钮时，我使用 jQuery 扫描每个元素及其值，然后将这些元素与值传递到上面需求过程。

我的问题/问题是，有时该过程似乎缺少传入的数据，我不确定为什么，我认为也许在我的动态操作中我正在执行 ape.submit('SUBMIT') 以及对按需进程的 JavaScript 函数调用。

我是否需要延迟其中一个电话，因为目前，我不确定为什么它有时会起作用，而有时却不起作用。

关于如何布置代码的任何想法，即

```
apex.submit('SUBMIT');
saveTheData();    <-- calls my ondemand process to save data to database 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:53:54.310

首先，让我们回到[您之前的问题](https://stackoverflow.com/questions/15269246/how-to-store-user-responses-on-the-fly-temporarily-for-later-use)。你到底在做什么。这似乎非常不必要！

无论如何，当您提交页面时，有什么理由在 jQuery 中收集项目值并将它们提交到会话状态？当您使用下一个/上一个/应用按钮并且页面提交时，项目的值处于会话状态，您可以在进程中使用它们。

您正在使用 apex.submit 提交页面。这将提交页面，并将所有项目的值设置为会话状态。您执行 JavaScript 函数，该函数将调用按需流程，为流程提供值。这些值是页面项目值，因此您实际上只是在按需流程中设置会话状态。老实说，您似乎正在进行一个真正古怪的设计！

至于为什么它有时有效，有时无效：`apex.submit`将提交页面。就像，马上。如果您需要在处理页面之前执行代码，请在提交之前执行。请注意，如果您要换行，它可能仍然无法正常工作，这取决于您如何调用按需流程（异步或同步），以及您是否希望成功函数执行某些操作。如果调用是异步的，则可能是在提交完成之前未处理您的成功函数。

# c - 为什么我的程序在使用堆分配内存时会引发分段错误？

> ID：15477570
> 
> 赞同：-1
> 
> 时间：2013-03-18T13:05:24.977
> 
> 标签：c, memory-management, char-pointer

在编写了一个反转字符串的程序后，我无法理解为什么在尝试反转字符串时会出现段错误。我在下面列出了我的程序。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void reverse(char *);

int main() {
  char *str = calloc(1,'\0');
  strcpy(str,"mystring0123456789");
  reverse(str);
  printf("Reverse String is: %s\n",str);
  return 0;
}

void reverse(char *string) {
  char ch, *start, *end;
  int c=0;
  int length = strlen(string);
  start = string;
  end = string;

  while (c < length-1){
    end++;
    c++;
  }
  c=0;

  while(c < length/2){
    ch = *end;
    *end = *start;
    *start = ch;
    start++;
    end--;
    c++;
  }
} 
```

**第一个问题：**

即使我只为 char 指针 str ( `calloc(1,'\0')`) 分配了 1 个字节的内存，并且我将一个 18 字节的字符串复制`mystring0123456789`到其中，它也没有抛出任何错误，并且程序在没有任何 SEGFAULT 的情况下运行良好。

为什么我的程序没有抛出错误？理想情况下，它应该抛出一些错误，因为它没有任何内存来存储那个大字符串。有人可以解释一下吗？

该程序运行完美，并给了我输出`Reverse String is: 9876543210gnirtsym`。

**第二个问题：**

如果替换语句

```
strcpy(str,"mystring0123456789"); 
```

和

```
str="mystring0123456789\0"; 
```

即使我为 str ( `malloc(100)`) 分配了足够的内存，程序也会出现分段错误。

为什么程序抛出分段错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:09:04.757

> 即使我只为 char 指针 str(calloc(1,'\0')) 分配了 1 个字节的内存，并且我将一个 18 字节的字符串“mystring0123456789”复制到其中，它没有抛出任何错误并且程序运行良好，没有任何 SEGFAULT。

你的代码有一个错误——当然它不会像你期望的那样。修复错误，谜团就会消失。

> 如果替换语句
> strcpy(str,"mystring0123456789");
> 与
> str="mystring0123456789\0";
> 即使我为 str (malloc(100)) 分配了足够的内存，程序也会出现分段错误。

因为当你完成这个时，`str`指向一个常数。这会丢弃 的先前值`str`，一个指向您分配的内存的指针，并将其替换为指向该常量的指针。

您不能修改常量，这就是使其成为常量的原因。该`strcpy`函数将常量*复制*到一个变量中，然后您可以对其进行修改。

想象一下，如果你能做到这一点：

int* h = &2;

现在，如果您这样做了，`*h = 1;`您将尝试更改代码中的*常量*2，这当然是您无法做到的。

这实际上就是你正在做的事情`str="mystring0123456789\0";`。它`str`指出了源代码中的那个常量，当然，你不能修改它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:09:33.303

1.  不要求它引发分段错误。所发生的一切是您损坏的代码调用了未定义的行为。如果该行为没有明显的影响，那很好。如果它格式化硬盘驱动器并将屏幕涂成蓝色，那也很好。它是**未定义**的。
2.  您正在用字符串文字的地址覆盖指针值，这完全不使用分配的内存。然后您尝试反转只读内存中的字符串文字，这会导致分段错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:31:41.397

1.  你的程序没有抛出错误，因为即使你做错了事，也抓住了你（更多下文）。你写了你不应该写的数据，但是你很“幸运”并且没有因为这样做而破坏任何东西。

2.  `strcpy(str,"mystring0123456789");`将数据复制到指向的位置`str`。碰巧的是，在那个地方，您可以写入数据而不会引起陷阱（这次）。相反，`str="mystring0123456789\0";`变化`str`指向一个新的地方。它指向的地方`"mystring0123456789\0"`就是存储的地方。那个地方很可能是只读存储器，所以，当你尝试在`reverse`例程中写入它时，你会遇到一个陷阱。

更多关于1：

在`calloc`分配内存时，它只是安排有一些您**可以**使用的空间。**物理**上，还有其他内存存在。您**可以**写入其他内存，但不**应该**。这正是现实世界中事情的运作方式：如果你租了一个酒店房间，你**可以**使用那个酒店房间，但你使用其他房间是错误的，即使它们碰巧是开放的。

有时，当您在现实世界或程序中闯入不应该进入的地方时，没有人会看到，而您会侥幸逃脱。有时你会被抓住。您没有被抓住的事实并不意味着没关系。

关于`calloc`：您要求它为一件大小为零的事物分配空间（源代码的`'\0'`计算结果为零）。所以你要求零字节。各种标准（例如 C 和 Open Unix）可能对此有不同的说法，因此当您要求零字节时，可能`calloc`会给您一个字节。但是，它肯定不会像您使用`strcpy`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:51:06.440

听起来您正在编写来自动态语言或至少一种执行自动字符串处理的语言的 C 程序。由于缺乏更正式的定义，我发现 C 是一种非常接近机器架构的语言。也就是说，您做出了很多编程决策。你的很多程序问题是你的代码导致未定义行为的结果。你有一个 strcpy 的段错误，因为你将内存复制到一个受保护的位置；行为未定义。而分配固定字符串“mystring0123456789\0”只是将该指针分配给str。

当您在 C 中实现时，您决定是否要在编译时或运行时定义存储区域，或者决定从堆中分配存储（malloc/calloc）。在任何一种情况下，您都必须编写管理例程以确保不会超出您定义的存储空间。

将字符串分配给指针只是分配字符串在内存中的地址；它不会复制字符串，并且引号“test-string”内的固定字符串是只读的，您无法修改它。您的程序在完成该任务后可能工作得很好，即使它不被认为是良好的 C 编码实践。

以这种方式处理存储分配是有好处的，这就是 C 是一种流行语言的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-29T15:39:19.707

另一种情况是，当您正确使用内存并且堆变得如此之大以至于您的**物理**内存无法管理它时，您可能会遇到段错误（不与 stack|text|data|bss -> [link](http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory/)重叠）

证明：[链接](https://software.intel.com/en-us/articles/determining-root-cause-of-sigsegv-or-sigbus-errors)，可能原因#2部分

# c# - 我在这里使用什么数据结构？

> ID：15477574
> 
> 赞同：8
> 
> 时间：2013-03-18T13:05:34.820
> 
> 标签：c#, data-structures

我有很多实例两个类`Children`，`Animal`它们具有**多对多**实体关系。

我想要一个数据结构，这样给定一个`Children`我可以得到一个`Animal`映射到它的列表，反之亦然。对于任何给定`Animal`的，我都可以获得`Children`映射到它的列表。

我需要这个数据结构是并发的，这样任何线程都可以访问它。

所以给出一个示例映射：

```
Child1 -> Animal1
Child1 -> Animal2
Child1 -> Animal3
Child2 -> Animal2
Child2 -> Animal3
Child3 -> Animal3 
```

查询`Child1`我希望得到一个返回的列表：`[ Animal1, Animal2, Animal2 ]`。

查询`Animal2`我希望得到一个返回的列表：`[ Child2, Child3 ]`。

我能想到的唯一方法是为该字典中的每个项目（动物和儿童）使用字典和列表，但我还必须处理锁定列表的同步，这很麻烦。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T13:10:50.433

我认为您必须将数据结构分成三层。

```
Child <- ChildToAnimalRelation -> Animal 
```

所以`Child`两者`Animal`都有`ChildToAnimalRelation`

```
public class ChildToAnimalRelation 
{
    public Child Child { get; set; }
    public Animal Animal { get; set; }
} 
```

获得动物孩子将按如下方式完成：

```
var children = currentAnimal.ChildToAnimalRelations.Select(r => r.Child); 
```

反之亦然：

```
var animals = currentChild.ChildToAnimalRelations.Select(r => r.Animal); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:11:27.657

使用列表然后使用 Linq 进行查询怎么样？一种可能的实现：

```
List<Tuple<string, string>> allItems=new ...
allItems.Add(Tuple.Create("Child1", "Animal1");
...
var child1RelatedItems=allItems.Where(entry =>entry.Item1=="Child1");
var animal1RelatedItems=allItems.Where(entry =>entry.Item2=="Animal1");
... 
```

# sql - 如何将 IMS.db 数据迁移到 SQL Server 2008 R2

> ID：15477576
> 
> 赞同：0
> 
> 时间：2013-03-18T13:05:43.947
> 
> 标签：sql, sql-server-2008-r2

谁能指导我如何将 IMS.db 的数据导入 SQL Server 2008 R2？

我确实有以下文件

1.  IMS_C.db

2.  IMS.log

3.  IMS_Encrypt.txt

我无法确定将上述文件导入 SQL Server 2008 R2 需要什么。如果有人可以指导我，那将很有帮助。

提前致谢。

# c# - 使用 wcf 服务发送带有 html 正文真实图像的电子邮件

> ID：15477584
> 
> 赞同：1
> 
> 时间：2013-03-18T13:06:00.177
> 
> 标签：c#, wcf

我正在 MVC 4.0 dot net 中开发一个应用程序。当用户第一次访问该应用程序时，会向用户发送一封邮件。为了发送邮件，我正在使用我们公司实现的 WCF 邮件服务。

我创建了一个 .txt 文件，其中包含邮件格式的 HTML

**这是我用来发送邮件的代码**

```
public void SendWelcomeMail(string name, string email, string filePath)
        {
            try
            {
                string subject = ConfigurationManager.AppSettings["WelcomeMailSub"];
                string supportMail = ConfigurationManager.AppSettings["supportMail"];

                using (StreamReader reader = File.OpenText(filePath))
                {
                    string text = reader.ReadToEnd();
                    text = string.Format(text, name);

                    Mail mails = new Mail { MailTo = "suresh.negi89@gmail.com", Msg = text, Subject = subject, IsBodyHtml = true };

                    MailSenderServiceClient oClient = new MailSenderServiceClient();

                    oClient.SendMail(mails);
                }

            }
            catch (Exception ex)
            {
                throw new Exception(ex.Message);
            }
        } 
```

**这是具有 HTML 格式的文件：**

```
 <html> 
<body><
<div style="height:40px;width:675px;background:#000; text-align:center;color:red;">
<img src="~/Content/logo.png" alt="DTD" style="float:left">
<h1> {0} Congrates you  are registered as a prime user!! </h1>
</div>
<p style="font-family: arial,sans-serif;">
Hi, Welcome to you
</p>
</body>
</html> 
```

图像文件 logo.png 位于 Content 文件夹中。

发送邮件时不显示图像。我想知道我在哪里做错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:08:41.990

您希望`~/Content/logo.png`指向收件人机器上的哪个位置？

> *99% 的时间它不会指向任何地方，另外 1% 无论如何都不是你想要的文件。*

* * *

三种解决方案：

1.  在公共服务器上托管您的图像并使用完整的绝对 URL 引用它（它可能已经存在？）。这基本上是现在*事实上*的标准。

    ```
    <img src="http://www.example.com/logo.png" /> 
    ```

    如果此位置发生更改，您当然可以使用占位符并在运行时解析 URL，然后再发送电子邮件。

2.  将图像附加到电子邮件中。然后，您可以使用内联引用它`cid:`。

    ```
    <img src="cid:logo.png" /> 
    ```

3.  使用数据 URI 并内联数据：

    ```
    <img src="data:image/x-icon,%00%00%01%00%01%00%10%10%00%00%01%00%20%00h%04%00%00%16%00%00%00(%00%00%00%10%00%00%00%20%00%00%00%01%00%20%00%00%00%00%00%00%00%00%00%13%0B%00%00%13%0B%00%00%00%00%00%00%00%00%00%00%00%00%00%00llm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FF%00%00%00%00%00%00%00%00llm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FF%00%00%00%00%00%00%00%00llm%FFllm%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00llm%FFllm%FF%00%00%00%00%00%00%00%00llm%FFllm%FF%00%00%00%00llm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FF%00%00%00%00llm%FFllm%FF%00%00%00%00%00%00%00%00llm%FFllm%FF%00%00%00%00llm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FFllm%FF%00%00%00%00llm%FFllm%FF%00%00%00%00%00%00%00%00llm%FFllm%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00Tx%9B%14Ox%A0%3CJx%A4dDx%AA%91Lx%A2%19llm%FFllm%FF%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00Kx%A3%0F%3Cx%B1R%3Ex%B0%84%3Ex%B0%B9%3Ex%B0%DE%3Ex%B0%FF%3Fx%AF%FFAw%AD%FFBv%AB%FFDw%A9%3E%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%3Dx%B0*Ax%AD%FFAx%AD%FFAx%AD%FFBw%AB%ECEv%A9%C0Cw%AB%85%3B%7B%B3T*%83%C5R%15%8D%DCY%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%3Fx%AF%09Bx%ACsDv%AAQDv%AA%2B%3B%7B%B3%08%00%00%00%00%18%8C%D9%0C%09%93%E8r%03%97%EF%E2%02%97%EE%FF%00%99%F2%1B%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%09%93%E8%19%03%97%EE%82%03%96%EE%ED%05%95%EC%FF%04%97%EB%EC%09%91%EA%82%1Dx%E6N%20r%E9%02%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%0F%91%E1%02%02%97%EE%24%03%97%EE%86%05%96%EC%F3%06%95%EB%FF%06%95%EB%EB%04%98%EB%83%0D%8C%E9%10'm%E5L%2Fc%E4%FC.d%E4%81%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%04%96%ED%09%06%95%EB%D5%06%95%EB%FF%06%95%EB%E9%06%96%EB%7C%04%98%EB%17%00%00%00%00%2Bg%E46.d%E4%F8%2Cf%E4%F8%2Cf%E4D%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%06%95%EBl%06%95%EB~%05%96%EB%15%00%00%00%00%00%00%00%00-d%E4%22-e%E4%E5%2Cf%E4%FF%2Cf%E4X%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00.c%E4%0F%2Ce%E4%CB%2Cf%E4%FF%2Cf%E4%7B%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00.c%E4%02%2Cf%E4%AD%2Cf%E4%FF%2Cf%E4%A1%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00.d%E4%02%2Cf%E4%93%2Cf%E4%FF%2Cf%E4%C0%2Cf%E4%07%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%00%80%01%00%00%80%01%F0%BF%9F%F9%00%00%90%09%00%00%90%09%00%00%9F%01%00%00%E0%07%00%00%E0%07%00%00%E0%83%00%00%FE%01%00%00%F0%01%00%00%F0!%00%00%F8%C3%FF%FF%FF%87%FF%FF%FF%0F%00%00%FE%0F%00%00" /> 
    ```

    您可以使用[data: URI Kitchen](http://software.hixie.ch/utilities/cgi/data/data)来创建一个这样的，或者按照[规范](http://www.ietf.org/rfc/rfc2397.txt)只使用 base64 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:09:18.750

提供logo图片的绝对路径，如

```
 <img src="http://www.foobar.com/Content/logo.png" alt="DTD" style="float:left"> 
```

或将图像附加到电子邮件中。

# cocos2d-iphone - cocos2d。正确混合？

> ID：15477585
> 
> 赞同：5
> 
> 时间：2013-03-18T13:06:00.793
> 
> 标签：cocos2d-iphone, blend, blending, glblendfunc

我修改了标准示例“Hello World”：

```
 CCSprite *sprite = [CCSprite spriteWithFile:@"Untitled-1.png"];
        CGSize winSize = [CCDirector sharedDirector].winSize;
        sprite.position = ccp(winSize.width / 2, winSize.height / 2);
        [label setBlendFunc:(ccBlendFunc){GL_ZERO, GL_SRC_ALPHA}];
        [label setColor:ccBLACK];
        [sprite addChild:label];
        [self addChild:sprite]; 
```

我有：

[图片](http://imglink.ru/show-image.php?id=0de5d100aafc6588c1cbba637193c459) ![在此处输入图像描述](../Images/a391f97642eb088d8459238c13936b00.png)

如何删除/剪切“Hello World”标签周围的背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:06:36.217

我目前的解决方案是像这样初始化 CCLabelTTF：

```
CCLabelTTF *label = [CCLabelTTF labelWithString:@"Hello World" fontName:@"Marker Felt" fontSize:64 dimensions:size hAlignment:kCCTextAlignmentCenter vAlignment:kCCVerticalTextAlignmentCenter]; 
```

其中 size 是 [CCDirector sharedDirector].winSize 对于我的例子。

欢迎任何其他建议

# java - 在eclipse中编译带有调试信息的java源文件

> ID：15477586
> 
> 赞同：1
> 
> 时间：2013-03-18T13:06:02.133
> 
> 标签：java, eclipse, spring, maven, spring-mvc

我在eclipse中有一个使用maven的spring mvc项目。我想在调试信息模式下编译 java 源代码，以便在运行时获取方法参数名称。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:14:40.110

`Windows->Preferences->Installed JRE's`. 添加 JDK（是的，您必须添加 JDK），例如（C:\Program Files\Java\jdk1.6.0_34）。将其设置为默认值，以便您可以看到 java 源代码或

窗口 -> 首选项 -> Java -> 编译器

单击标题“类文件生成”下的所有复选框。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T13:38:21.203

在调试模式下运行服务器。在代码中添加断点。然后使用 F6 导航它

# c - sem_wait() 挂起

> ID：15477592
> 
> 赞同：1
> 
> 时间：2013-03-18T13:06:15.033
> 
> 标签：c, linux, multithreading, hardware, netfilter

我有一个多线程应用程序。这是主要功能的一部分：

```
/* ...some code before... */
for(i=0; i<THREADS_COUNT; i++){
    status = pthread_create(&threads[i], NULL, thread_main, NULL);
    if(status < 0){
        fprintf(stderr, "threads error\n");
        exit(2);
    }
}
status = sem_init(&sem, 0, 0);
if(status < 0){
        fprintf(stderr, "sem_init error\n");
        exit(4);
}
/* recv loop */
while (1) {
    rv = recv(fd, buf, BUFSIZE, 0);
    if(rv >= 0){
        current = malloc(sizeof(struct queue_msg_list));
        /* adding to our local queue */
        if(current != NULL){
            current->rv = rv;
            current->h = h;
            memcpy(&(current->buf), &buf, BUFSIZE);
            current->next = NULL;
            if(main_head == NULL){
                main_head = main_tail = current; 
            } 
            else {
                main_tail->next = current;
                main_tail = current;
            }
            count++;
        }
        /* if we can carry the local queue to the queue for threads then we are doing it */
        if(!pthread_mutex_trylock(&mlock)){
            if(thread_head == NULL){
                /* if the threads-queue is empty then replace queues */
                thread_head = main_head;
                thread_tail = main_tail;
            } else {
                /* if the threads-queue is not empty then add the local queue to the threads-queue */                   
                thread_tail->next = main_head;
                thread_tail = main_tail;
            }
            /* we increasing a semaphore of number of added elements */
            for(i=0; i<count; i++){
                sem_post(&sem);
                printf("sem_post \n");
            }
            count = 0;
            pthread_mutex_unlock(&mlock);
            main_head = NULL;
            main_tail = NULL;
        }
    }
}
/* ...some code after... */ 
```

这是线程的功能：

```
void *thread_main(void *arg)
{
    struct  queue_msg_list *current;
    char buf[BUFSIZE] __attribute__ ((aligned));
    struct nfq_handle *h;
    int rv;
    while(1){
        sem_wait(&sem);
        pthread_mutex_lock(&mlock);
        /* if no blocking then we are working with packet and removing it from list after */
        current = thread_head;
        rv = current->rv;
        h = current->h;
        memcpy(&buf, &(current->buf), BUFSIZE);
        thread_head = thread_head->next;
        pthread_mutex_unlock(&mlock);
        nfq_handle_packet(h, buf, rv);
        free(current);
    }
} 
```

此应用程序始终适用于 PC。我已将此应用程序放在某些路由器上（固件中的 linux 内核版本为 2.6.30）。它有时工作正常，但有时工作不正确。:)

线程有时会挂起调用`sem_wait(&sem);`，但信号量值高于零（1、2、3 等）。为什么？

PS 我试图检查它的返回值`sem_wait(&sem);`但没有得到它。

# lua - Lua 表.concat

> ID：15477596
> 
> 赞同：3
> 
> 时间：2013-03-18T13:06:26.863
> 
> 标签：lua, concatenation, lua-table

有没有办法使用 table.concat 的 arg 2 值来表示当前表索引？

例如：

```
 t = {}
 t[1] = "a"
 t[2] = "b"
 t[3] = "c"

 X = table.concat(t,"\n") 
```

表 concat (X) 的所需输出：

```
 "1 a\n2 b\n3 c\n" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T13:18:58.810

我不这么认为：例如，您如何告诉它键和值之间的分隔符应该是空格？

您可以编写一个通用映射函数来做您想做的事情：

```
function map2(t, func)
  local out = {}
  for k, v in pairs(t) do
    out[k] = func(k, v)
  end
  return out
end

function joinbyspace(k, v) 
  return k .. ' ' .. v 
end

X = table.concat(map2(t, joinbyspace), "\n") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-18T13:19:42.103

简单的回答：没有。

`table.concat`是非常基本的东西，而且非常快。

因此，无论如何您都应该循环执行。

如果你想避免过多的字符串连接，你可以这样做：

```
function concatIndexed(tab,template)
    template = template or '%d %s\n'
    local tt = {}
    for k,v in ipairs(tab) do
        tt[#tt+1]=template:format(k,v)
    end
    return table.concat(tt)
end
X = concatIndexed(t) -- and optionally specify a certain per item format
Y = concatIndexed(t,'custom format %3d %s\n') 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-18T13:15:43.917

不，但是有一个解决方法：

```
local n = 0
local function next_line_no()
   n = n + 1
   return n..' '
end

X = table.concat(t,'\0'):gsub('%f[%Z]',next_line_no):gsub('%z','\n') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-07T06:49:32.860

```
function Util_Concat(tab, seperator)
  if seperator == nil then return table.concat(tab) end
  local buffer = {}
  for i, v in ipairs(tab) do
    buffer[#buffer + 1] = v
    if i < #tab then
      buffer[#buffer + 1] = seperator
    end
  end
  return table.concat(buffer)
end 
```

用法`tab`是表输入所在的位置，分隔符是两者`nil`或字符串（如果它`nil`像普通的一样`table.concat`）

```
print(Util_Concat({"Hello", "World"}, "_"))
--Prints
--Hello_world 
```

# javascript - 在AngularJs中将参数传递给$apply

> ID：15477600
> 
> 赞同：1
> 
> 时间：2013-03-18T13:06:33.260
> 
> 标签：javascript, angularjs

是否可以从 AgularJs 中的 $apply 函数引用范围变量？

```
<div myAttr="getMe(param)">hoverMe</div>

$scope.getMe = function(myParam) {alert(myParam);};
$scope.param = 2;
$scope.$apply(attrs.myAttr) //undefined 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:22:50.823

是的。这和你提议的方式完全一样。

```
function Ctrl($scope) {
  $scope.value = 'This is the value';
  $scope.change = function(val) {
    $scope.result = val;
  }
} 
```

以编程方式，它只是一个`scope.$apply('change(value)')`.

[在这里](http://jsfiddle.net/CaioToOn/n7LK7/)工作小提琴。仔细检查你是否申请不同的`$scope`，比如`$rootScope`。

# android - Android Chronometer：设置计时器的格式

> ID：15477602
> 
> 赞同：-1
> 
> 时间：2013-03-18T13:06:42.400
> 
> 标签：android, android-widget

我有一个计时器格式（**hh:mm:ss**）。我喜欢有一种格式（**mm:ss**）（仅限分钟）。

例如：01:30:00 至 90:00。请帮我

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-19T12:07:49.043

考虑这段代码：

```
/**
 * Format of the time
 */
private final static String MINUTE_SECOND_FORMAT = "%02d:%02d";

///// code... 

final int minutes = (currentSeconds % 3600) / 60;
final int seconds = currentSeconds % 60;

String formatted = String.format(Locale.getDefault(), MINUTE_SECOND_FORMAT, minutes, seconds); 
```

有了这个，你会得到一个格式化的字符串，格式为分：秒。

# php - PHP 的 $_SESSION 被覆盖 - 仅在 Firefox (Mozilla)

> ID：15477611
> 
> 赞同：1
> 
> 时间：2013-03-18T13:07:10.750
> 
> 标签：php, session, firefox

在我的站点中，我使用变量**$location**来跟踪用户正在查看的页面。在 index.php 的末尾，变量被复制到**$_SESSION**数组中，这样在下一个请求时我就知道用户上次在哪里（我用它来生成“返回”链接）。所以*index.php*大致是这样的：

> $位置 = 获取位置（）；// 通过处理 $_POST 和 $_GET 获取用户位置
> if(!isset($_SESSION['last_location'])) $_SESSION['last_location'] = SomeMeaningfulLocation();
> .
> .
> 输出页（）；// 根据 $location 呈现页面
> 。
> .
> $_SESSION['last_location'] = $location;

所以在 OutputPage() 中，$_SESSION['last_location'] 变量可用于生成“返回”链接。问题是：**此代码与 MSIE、Chrome 和 Safari 完美配合**。但是，它不适用于 Firefox 或 SeaMonkey（我喜欢将其用于 Web 开发）。**在这些浏览器中，“后退”链接总是指向首页**。

其他可能有用的事实：

*   会话数据存储在文件中，服务器日期和时间设置正确
*   我已经尝试过使用缓存设置（*header('Cache-control: ...')*等）没有区别
*   我尝试在 Firefox/Seamonkey 配置中禁用*network.prefetch-next （没有区别）*
*   该`SomeMeaningfulLocation()`函数不返回首页位置 - 因此消除会话被“忘记”并在每个请求时重新初始化的可能性 - 这也被排除在...
*   ...其他会话变量工作得很好（但这个不同之处在于它的内容会在每次请求时自动更新）
*   在 apache 访问/错误日志中看不到任何错误（与其他浏览器相同）
*   当我在分配后检查 $_SESSION['last_location'] 值时（在*index.php*的最后），它具有正确的值。*当我在index.php*的开头检查它时，它已经被首页的位置覆盖（我重复一遍：仅在 Mozilla 中。在其他浏览器中，这些检查显示正确的预期值！）

在此先感谢，我没有想法:-)

# mysql - 仅当另一个字段满足确切要求时，如何在一个字段中批量编辑 mysql 表？

> ID：15477614
> 
> 赞同：1
> 
> 时间：2013-03-18T13:07:15.270
> 
> 标签：mysql, phpbb3

情况看起来像这样：我想在 MySQL 数据库中为 phpBB 3 进行**大规模编辑**。我已经在这里看到 MySQL 查询告诉我如何对（例如）post_text 进行这样的大规模编辑并更改所有链接。

我知道我可以这样做：

> 更新 phpbb_posts SET post_text='new_link.eu' 其中 post_text 是 'old_link.eu'。

而且我知道这会将所有指向 old_link.eu 的链接更改为 new_link.eu。

但我的情况不同。我只想对**符合确切要求的帖子进行编辑。**非常简单 - 我希望查询仅更改**具有特定 forum_id 字段的帖子**（它们属于正确的子论坛，我想在其中查看更改）。

我相信这可能对许多使用不同脚本的人有所帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:47:50.760

除非我们无法从这里看到您的要求有一些复杂性，否则您应该能够很容易地做到这一点。

```
 UPDATE phpbb_posts 
     SET post_text='new_link.eu' 
   WHERE post_text = 'old_link.eu'
     AND forum_id = <<whatever>> 
```

在执行此操作之前，您绝对应该备份您的表格内容。如果您在查询中粗略地查找某些内容，除非您有备份，否则将很难恢复。

你也可以试试

```
 SELECT *
    FROM phpbb_posts 
   WHERE post_text = 'old_link.eu'
     AND forum_id = <<whatever>> 
```

在运行更新以确保获得正确的行之前。

# mysql - SQL 语句数据库

> ID：15477622
> 
> 赞同：0
> 
> 时间：2013-03-18T13:07:37.577
> 
> 标签：mysql

我有一个 Mysql 表，其中包含已预订的日期（对于某些假日属性）。

例子...

表“listing_availability”

行...

availability_date（这显示日期格式 2013-04-20 等）

availability_bookable （可以是/否。“是” = 预订转换日，它是“可用”。“否”表示该酒店已在这些日期预订）

一年中的所有其他日期（“否”除外）都可以预订。这些日期不在数据库中，只有预订的日期。

我的问题是......我必须制作一个首先调用 Get Date 函数的 SQL 语句（不确定这是否是正确的术语）

然后从 "availability_date" WHERE "availability_bookable" = "No" 中删除日期

这将为我提供可用于预订的日期、年份和属性。

任何人都可以帮忙吗？

问候米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:40:38.080

好像您几乎已经编写了查询。

```
SELECT availability_date FROM listing_availability
WHERE availability_bookable <> 'NO'
AND availability_date >= CURDATE()
AND YEAR(CURDATE()) = YEAR(availability_date) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:56:32.603

我想我明白了，你显然会确认。您的“availability_booking”中有一些记录，但不是一年中的每一天，只有那些可能有一些东西，而不是全部都承诺的，有些可能有，有些没有。

因此，您想模拟给定日期范围内的所有日期...假设 4 月 1 日至 7 月 1 日，因为有人希望在该时间段内预订派对。您不能说 4 月 27 日是开放的并且可用的，而不是预先填写您的生产表……因为不存在这样的记录。

要模拟日期范围的日历，您可以使用 MySQL 变量并加入数据库中的“任何”表，前提是它有足够的记录来模拟您想要的日期范围......

```
select
      @myDate := DATE_ADD( @myDate, INTERVAL 1 DAY ) as DatesForAvailabilityCheck
   from
      ( select @myDate := '2013-03-31' ) as SQLVars,
      AnyTableThatHasEnoughRows
   limit
      120; 
```

这只会为您提供从 2013 年 4 月 1 日开始的日期列表（原始 @myDate 是开始日期前 1 天，因为字段选择会增加 1 天以到达 4 月 1 日，然后继续...限制120 天（或任何您正在寻找的基于范围的 - 30 天、60、90、22 等等）。“AnyTableThatHasEnoughRows”实际上可能是您的“availability_booking”表，但我们只是将它用作带有行的表，没有 join 或 where 条件，仅够获得... 120 条记录。

现在，我们可以使用它来加入您想要的任何表并应用您的条件。您刚刚创建了一个完整的日历来进行比较。您的最终查询可能会有所不同，但这应该可以为您解决大部分问题。

```
select 
      JustDates.DatesForAvailabilityCheck,
   from
      ( select
              @myDate := DATE_ADD( @myDate, INTERVAL 1 DAY ) as DatesForAvailabilityCheck
           from
              ( select @myDate := '2013-03-31' ) as SQLVars,
              listing_availability
           limit
              120 ) JustDates
         LEFT JOIN availability_bookable 
            on JustDates.DatesForAvailabilityCheck = availability_bookable.availability_date
   where
         availability_bookable.availability_date IS NULL
      OR availability_bookable.availability_bookable = "Yes" 
```

所以上面使用示例日历并查看可用性。如果不存在这样的匹配日期（通过 IS NULL），那么您想要它意味着没有冲突。但是，如果表中有记录，您只需要那些为“是”的记录，您可以预订它，文件中的条目可能不会被提交，并且可以在可用日期的结果查询中。

# javascript - Highcharts 支持数据分组吗？

> ID：15477623
> 
> 赞同：2
> 
> 时间：2013-03-18T13:07:42.723
> 
> 标签：javascript, highcharts

我尝试使用诸如将一组数据从几天到几个月的合并，但 Highcharts 没有对它们进行分组。该图表试图显示所有数据。我没有使用 Highstock。

Highcharts 支持数据分组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:50:48.810

Highcharts 本身不支持数据分组。你有两个选择：

1.  使用支持它的 highstock：http: [//api.highcharts.com/highstock/#plotOptions.series.dataGrouping](http://api.highcharts.com/highstock/#plotOptions.series.dataGrouping)
2.  自己分组数据。

如果要处理数据以对其进行分组，则需要遍历每日数据，将每个值添加到新的数据数组中，并按月编制索引。

# java - JavaHL Mac 10.8 没有 Xcode

> ID：15477625
> 
> 赞同：0
> 
> 时间：2013-03-18T13:07:49.090
> 
> 标签：java

我有 OS X 10.8，我的任务是在学期期间在 Eclipse 中为 Android 平台编程。Apple 不包含 Xcode（也不适用于 10.8.x），没有它我无法通过 MacPorts 安装 JavaHL。

我安装了 XQuartz 来处理任何基于 Xcode 的应用程序，但 macports 对此一无所知。

> 在 /opt/local/var/macports/sources/rsync.macports.org/release/tarballs/ports 中创建端口索引错误：错误：未找到 Xcode 安装。错误：请安装 Xcode 和/或运行 xcode-select 以指定其位置。错误：警告：xcodebuild 存在但未能执行添加端口 lang/rust

有没有人有这个问题的分步解决方案？

> 无法加载 JavaHL 库。这些是遇到的错误： java.library.path 中没有 libsvnjavahl-1 本机库 /opt/subversion/lib/libsvnjavahl-1.0.dylib 已经在另一个类加载器中加载 java.library.path 中没有 svnjavahl java.library.path = .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:59:14.127

您不一定需要`JavaHL`在 Eclipse 中使用 Subversion 存储库。Eclipse 提供[了几个连接器](http://www.eclipse.org/subversive/documentation/teamSupport/connectors_discovery.php)，其中的连接器是基于[`SVNKit`](http://svnkit.com/)纯 Java 编码的。这将允许您回避缺少`JavaHL`库的问题。

# asp.net - 什么是 asp.net/.net 的最佳绘图工具

> ID：15477626
> 
> 赞同：0
> 
> 时间：2013-03-18T13:07:52.787
> 
> 标签：asp.net, .net, drawing

我想在屏幕上绘制一棵树，其中边缘和节点都有标签，用户可以放大树并且用户可以更改对象的位置。在java中有一个名为“JHotDraw”的好工具。.net 或 /asp.net 有类似的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:12:55.803

您将需要使用 javascript 在浏览器上呈现。

看看图书馆[TheJit](http://philogb.github.com/jit/demos.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:16:45.490

ASP.NET 是一种服务器端技术。您可以使用`System.Drawing`命名空间 (GDI+) 从服务器端创建静态图形，但是……*您是否考虑过使用 SVG 或 Canvas？*

第一个 - SVG - 是一个客户端标记，用于在常规 HTML 页面中呈现实时矢量图形。

Canvas 是一种客户端的、基于 2D 像素的渲染，也适用于常规 HTML 页面。

根据您的需要，您可以选择 SVG 或 Canvas。

Mozilla 开发者网络 (MDN) 有很好的资源来了解更多关于这两个方面的信息：

*   [MDN 上的 SVG](https://developer.mozilla.org/en-US/docs/SVG)。
*   [MDN 上的画布](https://developer.mozilla.org/en-US/docs/HTML/Canvas)。

# java - 将推文分解为子字符串并在小部件中显示

> ID：15477627
> 
> 赞同：-3
> 
> 时间：2013-03-18T13:07:58.467
> 
> 标签：java, android, twitter, widget, string-split

这些天来，我正在尝试为学校的板球比赛制作记分牌小部件。我已经创建了一个从 twitter 获取消息的小部件。现在我需要将消息分成几部分并显示在小部件中。

例如-> 当小部件接收到的推文为

```
 Home scored 50 for 8 wickets and guest scored 60 for 5 wickets and batting. 
```

我希望我的小部件显示

```
 Home = 60 wickets= 8
          Guest = 50 wickets=5 (Batting) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:19:35.663

使用Java？看一眼

```
String.split() 
```

如果您的模式是固定的，您应该能够按位置拆分和访问碎片。如果模式更具动态性，则必须使用以下组合

```
String.subString() / String.indexOf() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:39:57.583

```
public static void main(String[] args) {
    String s = "Home scored 50 for 8 wickets and guest scored 60 for 5 wickets and batting.";
    String result = "";
    int homeScored = s.indexOf("scored");
    int guestScored = s.lastIndexOf("scored");
    int homeWicket = s.indexOf("for");
    int guestWicket = s.lastIndexOf("for");

    result = "home =" + s.substring(homeScored + 6, homeWicket)
            + "wicket ="
            + s.substring(homeWicket + 3, s.indexOf("wickets")) + "\n"
            + "guest = " + s.substring(guestScored + 6, guestWicket)
            + "wicket ="
            + s.substring(guestWicket + 3, s.lastIndexOf("wickets"))
            + "(batting)";
    System.out.println(result);
} 
```

输出：

```
home = 50 wicket = 8 
guest =  60 wicket = 5 (batting) 
```

# vb.net - Datagridview 行颜色基于单元格值（组号）

> ID：15477631
> 
> 赞同：0
> 
> 时间：2013-03-18T13:08:15.460
> 
> 标签：vb.net, datagridview, datatable, datarow

```
Dim db As New DataTable

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    db.Columns.Add("Name", GetType(System.String))
    db.Columns.Add("Grp", GetType(System.Int32))

    db.Rows.Add("Peter", "1")
    db.Rows.Add("Jack", "1")
    db.Rows.Add("Smith", "2")
    db.Rows.Add("Mechael", "2")
    db.Rows.Add("John", "3")
    db.Rows.Add("John", "3")
    db.Rows.Add("John", "3")
    db.Rows.Add("Kelly John", "4")
    db.Rows.Add("Kelly John", "4")

    DataGridView1.DataSource = db

End Sub

Private Sub DataGridView1_RowPrePaint(sender As Object, e As DataGridViewRowPrePaintEventArgs) Handles DataGridView1.RowPrePaint
    If DataGridView1.Rows(e.RowIndex).Cells("Grp").Value Mod 2 = 0 Then
        DataGridView1.Rows(e.RowIndex).DefaultCellStyle.BackColor = Color.Cyan
    End If
End Sub 
```

我已经使用 DataGridView1_RowPrePaint 事件来更改基于组号的行颜色，并且它可以正常工作，但是当我对名称列进行排序时，它的颜色不正确。

请看下面的视觉图...在此先感谢您的建议。

![在此处输入图像描述](../Images/eec101464b3fec33ad7a9b7a5208c07d.png)

# php - PHP：mysql_query 无需等待

> ID：15477635
> 
> 赞同：1
> 
> 时间：2013-03-18T13:08:29.807
> 
> 标签：php, mysql

首先，我故意使用已弃用的`mysql`函数（而不是`mysqli`），所以请不要告诉我我应该更改为`mysqli`.

我的问题是：如果我想执行 INSERT 或 UPDATE 并立即继续处理 PHP 脚本，而无需等待 MySQL 完成任务，我可以使用`mysql_unbuffered_query`（是这样做的吗？）或者如果不是，我该如何实现?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T13:16:25.287

很抱歉打断你:)

如果您使用 mysqli 和 mysqlnd 驱动程序，您可以将一个`MYSQLI_ASYNC`选项传递给[query()](http://php.net/manual/en/mysqli.query.php)方法。无缓冲查询在这里没有帮助。

稍后您可以使用[poll()](http://php.net/manual/en/mysqli.query.php)和[reap_async_query()](http://php.net/manual/en/mysqli.query.php)来获得结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T13:15:15.353

您可以使用[INSERT...DELAYED](http://dev.mysql.com/doc/refman/5.5/en/insert-delayed.html)进行异步插入 (1)。我不相信您可以在`UPDATE`不借助产生另一个进程的情况下执行异步 (2)。

(1) 但不适用于`InnoDB`表格

(2) 如果坚持旧`mysql`扩展是绝对要求

# jquery - jquery模态弹出框

> ID：15477639
> 
> 赞同：0
> 
> 时间：2013-03-18T13:08:34.507
> 
> 标签：jquery, css

我有一个现有的旧网站，将 jquery css 定制到非常详细的级别，但现在我想在表单上实现一个默认皮肤的 jquery 模态弹出框。

我做了一个快速测试，并通过对默认的简单模态弹出对话框进行操作，但是来自高度自定义的 css 的设置正在踩踏弹出模态对话框的渲染，使弹出窗口无法使用。

所以我的问题是......有没有办法从标准的jquery css文件中获取默认的模态弹出css'guts'，并将它们放置在它们不会覆盖整个页面的位置，而只是被使用在弹出窗口使用它们的部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:20:36.413

您可能想看看`!important`CSS 中的标记。当不同的样式表在同一元素上操作相同的样式属性时使用它。使用它，您可以指定哪个样式属性获得最高优先级。

看看这里，有关该主题的更多信息：

[http://css-tricks.com/when-using-important-is-the-right-choice/](http://css-tricks.com/when-using-important-is-the-right-choice/)

希望这可以帮助。祝你有美好的一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:15:02.320

从 jQuery 网站 abd 下载样式表文件，您可以识别主 div 或放置 jQuery 弹出窗口的元素，并使 jQuery 样式仅适用于该部分。我已经看到了 jQuery 的模态弹出窗口中的样式表文件，在每个样式之前添加你的 dov 类名似乎是一个相当长的过程，但我可以从头顶建议。

# c# - 在使用 c# 从 excel 中读取大于 12 位的数字时，数字被转换为零

> ID：15477640
> 
> 赞同：1
> 
> 时间：2013-03-18T13:08:38.333
> 
> 标签：c#, asp.net, excel

我正在尝试使用 c# 使用以下查询从 excel 文件中读取长度大于 12 位的数字

```
 "select Format([F1], 'Number') as Code"; 
```

但是我只正确得到了 12 位数字，其余数字都转换为零。为什么会这样？

示例： `787767786546347`当从 excel 文件中读取时，我得到的是`787767786546000`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:12:08.220

根据 MSDN：

> Excel 遵循关于如何存储和计算浮点数的 IEEE 754 规范。因此，Excel 仅在数字中存储 15 位有效数字，并将第 15 位之后的数字更改为零。
> 
> 若要解决此问题，请将单元格设置为文本格式。然后该单元格最多可显示 1,024 个字符。

[http://support.microsoft.com/kb/269370](http://support.microsoft.com/kb/269370)

# spring - 当脚本标签具有 src 属性时，JSPX 分页符

> ID：15477647
> 
> 赞同：0
> 
> 时间：2013-03-18T13:09:00.510
> 
> 标签：spring, jsp, jstl, jsp-tags, jspx

出于某种奇怪的原因，每当我在这个 JSPX 块末尾的脚本标记中添加一个 src 元素时，页面的前半部分就会拒绝加载。在线路输出之前剪切 HTML，并完全冲洗页面。我在这里尝试了几个不同的选项，包括 CDATA 块、使脚本内联以及将其从页面中完全删除。无论出于何种原因，在该脚本块中呈现的任何内容都会破坏页面。

```
<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:spring="urn:jsptld:/WEB-INF/tlds/spring.tld"
      xmlns:spring-form="urn:jsptld:/WEB-INF/tlds/spring-form.tld"
      xmlns:intela-coreg="urn:jsptld:/WEB-INF/tlds/intela-coreg.tld"
      xmlns:c="urn:jsptld:/WEB-INF/tlds/c.tld"
      xmlns:x="urn:jsptld:/WEB-INF/tlds/x.tld"
      xmlns:fmt="urn:jsptld:/WEB-INF/tlds/fmt.tld"
      xmlns:fn="urn:jsptld:/WEB-INF/tlds/fn.tld"
      xmlns:intela="urn:jsptagdir:/WEB-INF/tags/intela" version="2.0">
<jsp:directive.page pageEncoding="UTF-8" contentType="text/html; charset=UTF-8"/>
<c:set var = "myPath" value ="${sessionPath.regPath.pathName}" />
<c:set var = "pathParts" value="${fn:split(myPath, '_')}" />
<c:set var = "myPathPlacement" value = "${pathParts[0]}" />
<!-- Add the container code based on domain -->
<c:choose>
    <!-- Australia -->
    <c:when test ="${myPathPlacement == 'ap'}">
       <c:set var ="gCode" value ="GTM-FR7W" />
    </c:when>
    <c:when test ="${myPathPlacement == 'as'}">
       <c:set var ="gCode" value ="GTM-64GD" />
    </c:when>  
    <c:when test ="${myPathPlacement == 'xaph'}">
       <c:set var ="gCode" value ="GTM-TBNP" />
    </c:when>
    <!-- Canada -->
    <c:when test ="${myPathPlacement == 'cp'}">
       <c:set var ="gCode" value ="GTM-J578" />
    </c:when>
    <c:when test ="${myPathPlacement == 'xcph'}">
       <c:set var ="gCode" value ="GTM-6WG2" />
    </c:when> 
    <!-- Netherlands -->
    <c:when test ="${myPathPlacement == 'nl2'}">
        <c:choose>
            <c:when test = "${pathParts[1] == 'voucher'}" >
                <c:set var ="gCode" value ="GTM-6S7B" />
            </c:when>
            <c:when test = "${pathParts[1] == 'scooter'}">
                <c:set var ="gCode" value = "GTM-8W4R" />
            </c:when>
          </c:choose>
    </c:when>
    <!-- Spain -->
    <c:when test ="${myPathPlacement == 'es'}">
        <c:choose>
            <c:when test = "${fn:contains(pathParts[1], 'apple')}" >
                <c:set var ="gCode" value ="GTM-JVG5" />
            </c:when>
            <c:when test = "${pathParts[1] == 'elcorteingles'}">
                <c:set var ="gCode" value = "GTM-53L3" />
            </c:when>
          </c:choose>
    </c:when>
    <!-- France -->
    <c:when test ="${myPathPlacement == 'fr'}">
        <c:choose>
            <c:when test = "${fn:contains(pathParts[1], 'peage')}" >
                <c:set var ="gCode" value ="GTM-F5DR" />
            </c:when>
        </c:choose>
    </c:when>
    <c:when test ="${myPathPlacement == 'fr2'}">
       <c:set var ="gCode" value ="GTM-ZG2J" />
    </c:when>
    <!-- UK -->
    <c:when test ="${myPathPlacement == 'hp'}">
        <c:choose>
            <c:when test = "${pathParts[1] == 'uk'}" >
                <c:set var ="gCode" value ="GTM-4LX8" />
            </c:when>
        </c:choose>
    </c:when>
    <c:when test ="${myPathPlacement == 'p2w'}">
       <c:set var ="gCode" value ="GTM-S73N" />
    </c:when>
    <c:when test ="${myPathPlacement == 'pu'}">
       <c:set var ="gCode" value ="GTM-7BRV" />
    </c:when>
    <c:when test ="${myPathPlacement == 'xurt'}">
       <c:set var ="gCode" value ="GTM-TH5Q" />
    </c:when> 
    <c:when test ="${myPathPlacement == 'TechRewardsUK'}">
       <c:set var ="gCode" value ="GTM-Q3PL" />
    </c:when> 
    <!-- USA --> 
    <c:when test ="${myPathPlacement == 'cd'}">
       <c:set var ="gCode" value ="GTM-B4D5" />
    </c:when>
    <c:when test ="${myPathPlacement == 'uspr'}">
       <c:set var ="gCode" value ="GTM-PZTJ" />
    </c:when>
    <c:when test ="${myPathPlacement == 'usrt'}">
       <c:set var ="gCode" value ="GTM-QMZG" />
    </c:when> 
    <c:when test ="${myPathPlacement == 'ussr'}">
       <c:set var ="gCode" value ="GTM-GRJK" />
    </c:when>
    <c:when test ="${myPathPlacement == 'us'}">
       <c:set var ="gCode" value ="GTM-W285" />
    </c:when>                                                         
</c:choose>
<c:set var = "gCodeLength" value = "${fn:length(gCode)}" />
<!-- Test to see if this page needs the code or move along, these are not the droids we are looking for -->
<c:if test = "${gCodeLength > 0}" >
    <script src="/media/common/js/googleTagManager.js"><!-- test --></script>
</c:if> 
```

# java - GWT 项目和 Eclipse 链接资源

> ID：15477652
> 
> 赞同：1
> 
> 时间：2013-03-18T13:09:20.370
> 
> 标签：java, eclipse, gwt

我必须在我的 GWT 项目中使用 Javascript 文件。这个 Javascript 在一个公共库项目中，我使用 ANT 将它与我的 GWT 项目一起部署。

因此，我在生产环境中没有问题：但**我无法在开发阶段对其进行测试**。

我试图创建一个指向 Javascript 资源的 Eclipse 链接，但似乎 GWT“看不到它”。与其他类型资源（图像、css 等）的某些行为。

这是一个错误还是有其他方法可以做？

我正在使用 Eclipse Juno、GWT 2.5.0 和 Debian 7.0。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:11:18.243

您可以只在项目的 .html 文件中使用脚本标记吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:24:52.547

如果您使用某种源代码控制，它通常有一种方法可以链接到依赖项目或文件。只需将该链接包含在您的 GWT 项目中，并通过那里引用该文件。

如果您不能或不想通过源代码控制执行此操作，请通过您的操作系统执行此操作。由于您使用的是 Linux，因此只需使用符号链接到公共文件/文件夹`ln -s`（如果您使用的是 Windows，则需要从命令行运行`mklink`），然后以这种方式引用该文件。

在任何一种情况下——源代码控制或操作系统——当你在 Eclipse 中刷新你的项目时，你将能够看到这些文件，并且修改一个将在它自己的目录中修改另一个。

### 编辑 - 有关 CVS 中符号链接的信息

我已经有一段时间没有玩过 CVS，所以不能过多地谈论它的符号链接功能。一些谷歌搜索说它不受支持，尽管有解决方法。一种解决方法是添加在结帐期间运行的脚本文件。这听起来可能仍然很难让操作系统无关。我确实找到了一个提到使用模块别名来获得相同结果的[站点。](http://dbaspot.com/configuration-management/193626-cvs-symbolic-links.html)也许这会给你所需要的。该网站的摘录如下：

> 在 CVS 中处理此类情况的一种常见方法是在模块文件规则中为集合设置别名。-检查“CVSROOT”模块，你会发现“模块”文件；只需更改它并像其他任何东西一样将其签入，但当您签入 CVSROOT 文件时，它们会同时“激活”。下面的例子可能看起来有点笨拙，这是因为 AFAIK 你不能同时重新定义目录和别名，遗憾的是。我将使用典型的 Java 情况，因为它的包系统非常适合这种事情：
> 
> 真正的模块目录是“a”、“b”和“common”
> 
> 所有公共资源的目录别名 _common_src_all -d src/com/mycompany/common common/src/com/mycompany/common
> 
> 完整的“A”项目，包括 common a_all &a &_common_src_all
> 
> 完整的“B”项目，包括 common b_all &b &_common_src_all

# ruby-on-rails-3 - 选择、分配变量和链接到

> ID：15477653
> 
> 赞同：1
> 
> 时间：2013-03-18T13:09:20.907
> 
> 标签：ruby-on-rails-3

我有一个非常简单的语言选择：法语或英语。如果我想添加更多语言，那么我应该有一个选择，这样它就不会占用全屏宽度！

这是我目前拥有的：

```
<div id="language">
Language:
<%= link_to_unless_current "English", locale: "en"%> |
<%= link_to_unless_current "Français", locale: "fr"%>
</div> 
```

我找不到将其放置在选择框中的正确语法。任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:13:43.050

您可以使用`select_tag` [助手](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag)。

你还可以看看：

[options_for_select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_for_select) 和 [选择](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/select)

# c++ - 在模板类中使用 C++ 中的宏检查 null

> ID：15477661
> 
> 赞同：-1
> 
> 时间：2013-03-18T13:09:46.237
> 
> 标签：c++

我有以下代码，因为我们正在检查 controlPtr 类，所以我没有在 testFunc 中检查 null，而是我想返回。我正在寻找一些类似宏的东西，我可以在模板类中添加它，以便我可以使用它。（注意：我正在寻找没有例外的选项）。

```
void AssertErrorHandler(const char* file_name,  unsigned line_number, const char* message) {
    std::cout << message << " in file " << file_name << " #" << line_number << std::endl << std::flush; 
```

}

```
#define CONTROLASSERT(condition, msg)                 \
    if(!(condition)) {                              \
        std::ostringstream s;                       \
        s << msg;                                   \
        AssertErrorHandler(                    \
            __FILE__, __LINE__, s.str().c_str() );  \
    }

template <typename T>
class ControlPtr {
  public:

    explicit ControlPtr(T* p = NULL)
    : ptr_(p) {
    }

    T* Get() const {                        
        return ptr_;
    }

    ControlPtr<T>& operator=(T* p) {
        ptr_ = p;
        return *this;
    }

    T* operator->() const {                     
        CONTROLASSERT(ptr_ != NULL, "Attempt to use operator -> on NULL pointer.");
        return ptr_;
    }

    T& operator* () const { 
        CONTROLASSERT(ptr_ != NULL, "Attempt to use operator * on NULL pointer.");
        return *ptr_;
    }

private:
    T*  ptr_;
};

void testFunc() {

    int i = 10;
    ControlPtr<int> ptr(NULL); // Question: From here I should return. How can I modify controlPtr class above
                               // Do I use #define macro

    std::cout << *ptr << std::endl;

    return;

}

int main( void )
{
    testFunc();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:42:44.840

有三种方法`operator->`：返回非 NULL 值、抛出异常或`std::abort`. 由于您已经排除了前两个选项，`std::abort`所以它是。

# android - NoclassDefFoundError: com.itextpdf.text.Document 错误将打开一个新的 itext 文档

> ID：15477665
> 
> 赞同：0
> 
> 时间：2013-03-18T13:10:05.483
> 
> 标签：android, eclipse, itext, simulation

我在模拟器 Android 设备中使用 Eclipse，我有以下简单代码：

```
File file = new File(this.getFilesDir() + "/example.pdf");
if(!file.exists())
file.createNewFile();
FileOutputStream fop = new FileOutputStream(file);
Document document = new Document();
(…) 
```

因为我这样做了，`Document document = new Document();` 所以我得到了错误：

> Java.lang.NoClassDefFoundError：com.itextpdf.text.Document

我有这样的itext.jar：

```
<classpath>
<classpathentry kind="lib" path="assets/itext-pdfa-5.4.0.jar"/>
<classpathentry kind="lib" path="assets/itext-xtra-5.4.0.jar"/>
<classpathentry kind="lib" path="assets/itextpdf-5.4.0.jar"/>
<classpathentry kind="lib" path="assets/itext-pdfa-5.4.0-javadoc.jar"/>
<classpathentry kind="lib" path="assets/itext-pdfa-5.4.0-sources.jar"/>
<classpathentry kind="lib" path="assets/itext-xtra-5.4.0-javadoc.jar"/>
<classpathentry kind="lib" path="assets/itext-xtra-5.4.0-sources.jar"/>
<classpathentry kind="lib" path="assets/itextpdf-5.4.0-javadoc.jar"/>
<classpathentry kind="lib" path="assets/itextpdf-5.4.0-sources.jar"/>
</classpath> 
```

所有这些都在“资产”路径中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:21:16.583

如果您使用的是 Android，最好使用[Android 端口](http://itextsupport.com/download/android.html)。此端口用于我们所有的 Android 演示。与纯 Java iText 版本的区别是：

1.  不使用 AWT，nio，... 任何类，
2.  使用 SpongyCastle 而不是 BouncyCastle 来避免在 Android 上使用 BC 的已知问题，
3.  删除无论如何都不能在 Android 上运行的类。

请注意， a`NoClassDefFoundError`不仅在找不到类时发生。在你的情况下：类就在那里：只需检查 jar。当存在歧义时，也会抛出这样的错误。例如：因为您的 CLASSPATH 中有两个版本的 iText。如果我是你，我会删除所有对 iText 的引用，然后从 iText 的 Android 端口重新开始。我很确定您的 CLASSPATH 中有太多条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:13:27.670

根据您的错误：

`Java.lang.NoClassDefFoundError: com.itextpdf.text.Document`

看起来你导入了错误的`Document`类。

试试这个导入：

```
import org.w3c.dom.Document; 
```

# c++ - 为什么我不能在 STL 集中插入 600 万个元素？

> ID：15477672
> 
> 赞同：0
> 
> 时间：2013-03-18T13:10:35.013
> 
> 标签：c++, stl, set, max-size

我正在尝试在 stl 集中插入超过 650 万个元素（整数）。这是代码：

```
set<int> s;
cout << s.max_size() << endl;
for(int i = 0; i < T.MULT * T.MAXP; i++) {
    s.insert(a[i]);
} 
```

`T.MULT`是`10`；`T.MAXP`是`666013`。

`a`是一个数组 - 静态分配 - ( `int a[T.MULT * T.MAXP];`) 包含不同的元素。

在大约 460 万个元素`s.insert()`引发`bad_alloc`异常之后。Windows 7 上可用的资源监视器说我还有 3 GB 可用内存。我究竟做错了什么？为什么 STL set 不能分配内存？

编辑：这是完整的代码：http: [//ideone.com/rdrEnt](http://ideone.com/rdrEnt)

Edit2：显然插入的元素可能并不明显，但这应该不是问题。

Edit3：这是代码的简化版本：http: [//ideone.com/dTp0fZ](http://ideone.com/dTp0fZ)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:43:11.860

问题实际上在于您为数组 A 静态分配了超过 650 万个元素，这破坏了您的程序堆栈空间。如果您在堆上分配数组，它实际上可以工作。我根据您的描述做了一些代码更改，效果很好。

```
int *A = new int[T.MULT * T.MAXP];
for (int i= 0; i <  T.MULT * T.MAXP; ++i)
{
    A[i] = i; //for simplicity purpose, your array may have different elem. values
}

set<int> s;
for (int i = 0; i <  T.MULT * T.MAXP; ++i )
{
    s.insert(A[i]);
}

cout << s.size();

set<int>::iterator iter;
int count = 0;
for (iter = s.begin(); iter != s.end(); ++ iter)
{
    cout << *iter << " ";
    count ++;
    if (count == 100)
    {
        cout <<endl;
        count = 0;
    }
}

delete [] A;

return 0; 
```

它适用于矢量和集合。它可以在屏幕上打印所有这 660 万个元素。

正如其他帖子所示，如果您有兴趣，您可能还想尝试 STXXL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:24:10.613

您可能想看看[STXXL](http://stxxl.sourceforge.net/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:21:42.890

虽然我无法直接回答您的问题，但我认为将您的数据存储在 std::vector 中，对其进行排序，然后使用 std::binary_search 测试该项目的存在会更有效。与 std::vector 相比，std::set 中的存储相对昂贵。那是因为在存储每个元素时会有一些开销。

例如，您可以这样做。这对静态数组进行排序。

```
std::sort(a,a+(T.MULT*T.MAXP));
bool existence=std::binary_search(a,a+(T.MULT*T.MAXP),3); 
```

快速简单。

# asp.net-mvc - 同一页面中的多个视图 MVC ASP.NET

> ID：15477676
> 
> 赞同：8
> 
> 时间：2013-03-18T13:10:46.720
> 
> 标签：asp.net-mvc, html, view

我想在 ASP.NET MVC 技术的同一页面上显示不同的**视图。**怎么可能达到。

我有来自 2 个不同表的数据，为此我有 2 个不同的**视图**用于显示。如何在一个页面上显示这两个视图。

MVC 中的视图中是否有视图的概念**？**或者是否有一些规定可以制作可以封装多个视图的主视图。?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T13:14:47.080

这些链接将帮助您（首先获得部分视图的知识）

1.  [http://www.dotnet-tricks.com/Tutorial/mvc/2IKW160912-Partial-View-in-Asp.net-MVC3-Razor.html](http://www.dotnet-tricks.com/Tutorial/mvc/2IKW160912-Partial-View-in-Asp.net-MVC3-Razor.html)
2.  [http://www.codeproject.com/Articles/351867/Basics-of-ASP-NET-MVC3-Part-II](http://www.codeproject.com/Articles/351867/Basics-of-ASP-NET-MVC3-Part-II)
3.  [http://www.c-sharpcorner.com/UploadFile/aravindbenator/mvc-3-razor-and-partial-view/](http://www.c-sharpcorner.com/UploadFile/aravindbenator/mvc-3-razor-and-partial-view/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T13:15:12.830

ASP.NET MVC 支持定义**“部分视图”**模板的能力，该模板可用于封装页面子部分的视图呈现逻辑。“Partials”提供了一种有用的方式来定义视图呈现逻辑一次，然后在应用程序的多个地方重复使用它。

参考：

[使用母版页和部分重用 UI](http://www.asp.net/mvc/tutorials/older-versions/nerddinner/re-use-ui-using-master-pages-and-partials)

[创建局部视图](http://www.dotnetfunda.com/articles/article1831-how-to-create-partial-views-mvc-tutorial-number-10.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T18:27:24.030

是的，aspx webforms 有母版页，然后您使用用户控件 .ascx 文件。

使用 MVC，“母版页”默认位于

```
Views\Shared\_Layout.cshtml 
```

现在，您还可以最终使用美妙的 Twitter 引导程序，并真正开始使用易于使用的 css 等制作更美观的布局。

您的控制器可以返回

```
PartialViewResult 
```

正如其他人的其他答案所提到的，这些链接应该能让你上路。

# plot - 将带有误差线的点添加到 Matlab 散点图中

> ID：15477683
> 
> 赞同：3
> 
> 时间：2013-03-18T13:11:02.807
> 
> 标签：plot, matlab

我在matlab中进行了多维聚类分析。对于每个集群，我计算了均值和协方差（假设条件独立）。

我从原始数据中选择了两个或三个维度并将其绘制成散点图或 scatter3 图。现在我想将集群均值和相应的标准偏差添加到同一个图中。

换句话说，我想将一些带有误差线的数据点添加到散点图中。

[这个问题](https://stackoverflow.com/questions/15008705/how-to-create-a-shaded-error-bar-box-for-a-scatterplot-in-r-or-matlab)几乎是我想要的。但是我可以用条而不是盒子，我想知道在这种情况下是否有一种内置的方法可以更轻松地做到这一点。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T00:21:56.367

一旦您意识到线段可能足以满足您的目的（并且可能不如通常的带有胡须的误差线那么难看，具体取决于点数），您可以做一些非常简单的事情（这可能适用于任何绘图包，不仅仅是 MATLAB）。

只需绘制一个散点图，然后编写一个循环来绘制您想要对应于误差线的所有线段（或者按照我对误差线所做的相反顺序进行绘制，然后是散点图，具体取决于您想要点还是错误顶部的酒吧）。

这是简单的 MATLAB 代码，以及显示二维误差线的示例图（对于无聊的近线性感到抱歉）：

![在此处输入图像描述](../Images/c3360acdf2c33b83cff74f60cfc402c3.png)

如您所见，您可以为每个轴绘制不同颜色的误差线以帮助可视化。

```
function scatterError(x, y, xe, ye, varargin)
%Brandon Barker 01/20/2014

nD = length(x);

%Make these defaults later:
dotColor = [1 0.3 0.3]; % conservative pink
yeColor = [0, 0.4, 0.8]; % bright navy blue
xeColor = [0.35, 0.35, 0.35]; % not-too-dark grey
dotSize = 23;

figure();
set(gcf, 'Position', get(0,'Screensize')); % Maximize figure.
set(gca, 'FontSize', 23);
hold all;

for i = 1:nD
    plot([(x(i) - xe(i)) (x(i) + xe(i))], [y(i) y(i)], 'Color', xeColor);
    plot([x(i) x(i)], [(y(i) - ye(i)) (y(i) + ye(i))], 'Color', yeColor);
end

scatter(x, y, dotSize, repmat(dotColor, nD, 1));
set(gca, varargin{:});
axis square; 
```

通过一些额外的工作，如果你真的想要它们，在你的错误栏中添加胡须不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T13:14:11.360

如果您对图形的外观不太挑剔并且正在寻找性能，那么内置函数确实通常是一个不错的选择。

我的第一个想法是尝试使用[boxplot](http://www.mathworks.nl/help/stats/boxplot.html)，它有很多选项，所以它们的一个组合可能会给你你需要的结果。

旁注：乍一看，您提到的答案看起来效率并不低，因此在可实现的加速方面，您可能必须管理您的期望。

# knockout.js - 获取 HTTP 状态 415 向 Jersey RESTful 服务发送发布请求

> ID：15477696
> 
> 赞同：1
> 
> 时间：2013-03-18T13:11:52.147
> 
> 标签：knockout.js, jersey, http-post, amplifyjs, http-status-code-415

我正在发送一个“POST”请求，其中包含一个从我的[Knockout](http://knockoutjs.com/)可观察到的`ko.toJSON`方法转换为 JSON 的 JSON 对象。我使用[Amplify](http://amplifyjs.com/)发送它。

这是我的放大设置：

```
 amplify.request.define('addContract', 'ajax', {
                url: '/api/contractmanager/contracts/create',
                dataType: 'json',
                type: 'POST'
            }); 
```

这是我`dataservise`添加数据的方法：

```
addContract = function (callbacks, data) {
        return amplify.request({
            resourceId: 'addContract',
            data: data,
            success: callbacks.success,
            error: callbacks.error
        });
    }; 
```

这是我实际发送请求的方式：

```
contracts.addData = function (contractModel, callbacks) {

        var contractModelJson = ko.toJSON(contractModel);

        return $.Deferred(function (def) {
            dataservice.contract.addContract({
                success: function (dto) {
                    if (!dto) {
                        logger.error('Error saving!');
                        if (callbacks && callbacks.error) { callbacks.error(); }
                        def.reject();
                        return;
                    }
                                        },
                error: function (response) {
                    logger.error('Error saving!');
                    if (callbacks && callbacks.error) { callbacks.error(); }
                    def.reject(response);
                    return;
                }
            }, contractModelJson);
        }).promise();
    }; 
```

对于后端，我使用带有[Jersey](http://jersey.java.net/)的 RESTful Web 服务。

问题是，只要我发送请求，我就会收到“HTTP 状态 415 - 不支持的媒体类型”，而我的服务器 GlassFish 说：“服务器拒绝了这个请求，因为请求实体的格式不受请求的资源支持请求的方法（不支持的媒体类型）。”

我需要设置什么特别的东西才能让它工作吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:57:55.060

您需要确保发送的内容类型与`@Consumes`Jersey 资源上注释的内容类型相匹配。在您的特定情况下，泽西资源需要看起来像：

```
import javax.ws.rs.Consumes;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.core.MediaType;

...

@PATH("create")
@POST
@Consumes(MediaType.APPLICATION_JSON)
public Item create(final Item item) {
  // Create here
} 
```

并且您需要确保使用内容类型“application/json”发送您的数据。

# java - 应用程序已停止，第二次单击列表视图中的项目

> ID：15477699
> 
> 赞同：0
> 
> 时间：2013-03-18T13:12:00.613
> 
> 标签：java, android

logcat java.lang.IllegalStateException 中显示错误：适配器的内容已更改，但 ListView 未收到通知。确保适配器的内容不是从后台线程修改的，而只是从 UI 线程修改的。[在 ListView(2131165193, class android.widget.ListView) with Adapter(class com.example.recipestutors.ItemListBaseAdapter)] ItemListBaseAdapter.java

```
 public class ItemListBaseAdapter extends BaseAdapter {
    private static ArrayList<Recipedetails> itemDetailsrrayList;

    private Integer[] imgid = {
            R.drawable.vegeterian,
            R.drawable.nonveg,
            R.drawable.pickels,
            R.drawable.soup,
            R.drawable.sweets,
            R.drawable.cakes,
            R.drawable.icecreams,
            R.drawable.chinesevegdishes,
            R.drawable.chinesenonveg,
            R.drawable.chinesenoodles,
            R.drawable.chinesesoup,
            R.drawable.godhumaivegadai,
            R.drawable.soyamorekoozh,
            R.drawable.tomatokulambu,
            R.drawable.tomatoupma,
            R.drawable.vadanavratrispecial,
            R.drawable.eggkurma,
            R.drawable.milagu,
            R.drawable.rasam,
            R.drawable.vegetablekootu,
            R.drawable.avial,
            R.drawable.kothavarangaicurry,
            R.drawable.allepeyfishcurry,
            R.drawable.spicymadraschicken,
            R.drawable.prawns,
            R.drawable.keralachickenstew,
            R.drawable.nilgirichickenkorma,
            R.drawable.pepperchickencurry,
            R.drawable.chettiandchicken,
            R.drawable.prawnmasala,
            R.drawable.beeffry,
            R.drawable.crispyfish,
            R.drawable.amlapickle,
            R.drawable.avakaipickle,
            R.drawable.capsicumpickle,
            R.drawable.lemonpickle,
            R.drawable.onionpickle,
            R.drawable.mangopickle,
            R.drawable.tendermangopickle,
            R.drawable.tomatopickle,
            R.drawable.chillipickles,
            R.drawable.gingerpickle,
            R.drawable.garlicsoup,
            R.drawable.mixedvegsoup,
            R.drawable.chickenmanchowsoup,
            R.drawable.cleartomatosoup,
            R.drawable.sweetcornvegetablesoup,
            R.drawable.prawnandnoodlesoup,
            R.drawable.beetrootsoup,
            R.drawable.capsicumsoup,
            R.drawable.muttonsoup,
            R.drawable.spinachsoup,
            R.drawable.vegcurry,
            R.drawable.mushroommutter,
            R.drawable.alooparatha,
            R.drawable.daltadka,
            R.drawable.aloomethi,
            R.drawable.rajma,
            R.drawable.paneerbhujri,
            R.drawable.alooghobi,
            R.drawable.aloosabzi,
            R.drawable.kadhaipaneer,
            R.drawable.chickenwithbellpeppers,
            R.drawable.butterchicken,
            R.drawable.fishkorma,
            R.drawable.prawnfry,
            R.drawable.tandoorichicken,
            R.drawable.maccherjholfish,
            R.drawable.shamikabab,
            R.drawable.saagmeat,
            R.drawable.sindhichickenbiryani,
            R.drawable.punjabichickencurry,
            R.drawable.gulabjamun,
            R.drawable.basundi,
            R.drawable.peda,
            R.drawable.badhamhalwa,
            R.drawable.coconutburfi,
            R.drawable.kulfi,
            R.drawable.ladoo,
            R.drawable.mysorepak,
            R.drawable.ricekheer,
            R.drawable.badam,
            R.drawable.cauliflowersoup,
            R.drawable.cucumbersoup,
            R.drawable.tomatosoup,
            R.drawable.mulligatawnysoup,
            R.drawable.greenpeassoup,
            R.drawable.northindianmuttonsoup,
            R.drawable.chickennoodlesoup,
            R.drawable.spicybeansoup,
            R.drawable.eggdropsoup,
            R.drawable.springvegsoup,
            R.drawable.mushroomandseitan,
            R.drawable.tofuwith3spices,
            R.drawable.creamyvegpie,
            R.drawable.grilledvegmedley,
            R.drawable.bakedsquash,
            R.drawable.africanchickenstew,
            R.drawable.westafricanchicken,
            R.drawable.africanyamsoup,
            R.drawable.chickenchilliroast,
            R.drawable.chilliblackbeans,
            R.drawable.williecake,
            R.drawable.pumpkingingercupcakes,
            R.drawable.doublelayerpumpkincheesecake,
            R.drawable.carrotcake,
            R.drawable.sexcake,
            R.drawable.chocolatechipicecream,
            R.drawable.cookieicecream,
            R.drawable.cinnamonicecream,
            R.drawable.appleicecream,
            R.drawable.walnut,
            R.drawable.chineseaubergins,
            R.drawable.spicycucumber,
            R.drawable.chinesemushrooms,
            R.drawable.chinesegobi,
            R.drawable.spicytofu,
            R.drawable.chinesetilchicken,
            R.drawable.chickenmoongali,
            R.drawable.sweetsourchicken,
            R.drawable.cherrychicken,
            R.drawable.mymasalachicken,
            R.drawable.coldseasamenoodles,
            R.drawable.sobanoodles,
            R.drawable.noodleswithtofu,
            R.drawable.chinesevegandbeef,
            R.drawable.noodleswithpepper,
            R.drawable.jhingasoup,
            R.drawable.masalachickensoup,
            R.drawable.cabbagesoup,
            R.drawable.chinesepumpkinsoup,
            R.drawable.baconsoup,

            };

    private LayoutInflater l_Inflater;

    public ItemListBaseAdapter(Context context, ArrayList<Recipedetails> results) {
        itemDetailsrrayList = results;
        l_Inflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return itemDetailsrrayList.size();
    }

    public Object getItem(int position) {
        return itemDetailsrrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = l_Inflater.inflate(R.layout.item_details_view, null);
            holder = new ViewHolder();
            holder.txt_itemName = (TextView) convertView.findViewById(R.id.name);
            holder.txt_itemDescription = (TextView) convertView.findViewById(R.id.itemDescription);
            //holder.recipeLinkWiki = (TextView) convertView.findViewById(R.id.recipeLinkWiki);
            holder.itemImage = (ImageView) convertView.findViewById(R.id.photo);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.txt_itemName.setText(itemDetailsrrayList.get(position).getName());
        holder.txt_itemDescription.setText(itemDetailsrrayList.get(position).getItemDescription());
        //holder.recipeLinkWiki.setText(itemDetailsrrayList.get(position).getUrlWiki());
        holder.itemImage.setImageResource(imgid[itemDetailsrrayList.get(position).getImageNumber() - 1]);

        return convertView;
    }

    static class ViewHolder {
         //TextView recipeLinkWiki;
        TextView txt_itemName;
        TextView txt_itemDescription;
        //TextView txt_recipeLinkWiki;
        ImageView itemImage;
    }
} 
```

日志错误：

```
 03-18 12:59:18.592: E/AndroidRuntime(2010): FATAL EXCEPTION: main
 03-18 12:59:18.592: E/AndroidRuntime(2010): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(2131165193, class android.widget.ListView) with Adapter(class com.example.recipestutors.ItemListBaseAdapter)]
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.widget.ListView.layoutChildren(ListView.java:1544)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.widget.AbsListView.onTouchEvent(AbsListView.java:3403)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.View.dispatchTouchEvent(View.java:7239)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2168)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1903)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:2174)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1917)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1953)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1405)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.app.Activity.dispatchTouchEvent(Activity.java:2410)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1901)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.View.dispatchPointerEvent(View.java:7419)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:3220)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.ViewRootImpl.deliverInputEvent(ViewRootImpl.java:3165)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.ViewRootImpl.doProcessInputEvents(ViewRootImpl.java:4292)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.ViewRootImpl.enqueueInputEvent(ViewRootImpl.java:4271)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.ViewRootImpl$WindowInputEventReceiver.onInputEvent(ViewRootImpl.java:4363)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.view.InputEventReceiver.dispatchInputEvent(InputEventReceiver.java:179)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.os.MessageQueue.nativePollOnce(Native Method)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.os.MessageQueue.next(MessageQueue.java:125)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.os.Looper.loop(Looper.java:124)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at android.app.ActivityThread.main(ActivityThread.java:5039)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at java.lang.reflect.Method.invokeNative(Native Method)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at java.lang.reflect.Method.invoke(Method.java:511)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
 03-18 12:59:18.592: E/AndroidRuntime(2010):    at dalvik.system.NativeStart.main(Native Method)
 03-18 12:59:21.032: I/Process(2010): Sending signal. PID: 2010 SIG: 9
 03-18 12:59:21.672: E/Trace(2031): error opening trace file: No such file or directory (2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:55:37.747

*适配器的内容发生了变化，但 ListView 没有收到通知。*

此问题意味着您的 basicAdapter 尝试适应 listView 的数据已更改，显然意味着您`itemDetailsrrayList`的数据不包含相同的数据。

我想你正在你的活动中操纵这个列表。

这很正常，您应该做的是通过使用适配器调用`adapter.notifyDataSetChanged()`活动的 onResume 回调来通知适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:59:42.940

我认为这个问题是你正在更新你`Adapter`的 UI 线程，它导致了你的异常。

我想您需要确保仅从 UI Thread 使用 UI 元素进行操作。如果您使用的是 AsyncTask ，那么您需要调用

```
adapter.notifyDataSetChanged(); 
```

在`onProgressUpdate()`或`onPostExecute()`方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:39:17.587

这是我得到 ItemListAdapter.java 的正确代码

```
 public synchronized   void refreshAdapter(ArrayList<Recipedetails> items) {
    //itemDetailsrrayList.clear();
    itemDetailsrrayList = items;
   notifyDataSetChanged();
} 
```

在 mylistviewactivity.java 中

```
private void refreshYourAdapter(final ArrayList<Recipedetails> items) { 
```

//这就是我的意思。该错误清楚地表明您没有更新 UI 线程上的适配器 runOnUiThread(new Runnable() { public void run() { _itemListAdapter.refreshAdapter(items); } }); } 和

```
@Override 
```

protected void onResume() { super.onResume(); _itemListAdapter = new ItemListBaseAdapter(this, image_details); refreshYourAdapter(GetSearchResults()); lv1.setAdapter(_itemListAdapter);

} we have to add these things in your listview activity it will works very fine and remove static in idemlistadapter

# javascript - HTML / CSS / Javascript - 将鼠标悬停在不同的单元格上时更改一个表格单元格的值

> ID：15477705
> 
> 赞同：1
> 
> 时间：2013-03-18T13:12:14.003
> 
> 标签：javascript, html, css, html-table, hover

我实际上没有任何与此相关的代码，因为它完全是假设的，但我只是想知道这样做会有多简单。

例如，我有一个包含 4 个单元格的标准表格。

```
<html>
    <head></head>
    <body>
        <table>
            <tr>
                <td>Cell 1</td>
            </tr>
            <tr>
                <td>Cell 2</td>
            </tr>
            <tr>
                <td>Cell 3</td>
            </tr>
            <tr>
                <td>Cell 4</td>
            </tr>
        </table>
    </body>
</html> 
```

现在我想将鼠标悬停在单元格 2 上并在单元格 3 中显示图像......这可以使用 JavaScript 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:19:25.270

试试这个代码。请记住，这**完全**符合您的要求，不多也不少。如果您想要一个可维护的解决方案，您将希望使用类（而不是 ID）正确扩展此代码，但这超出了此问题的范围。

```
<html>
    <head></head>
    <body>
        <table>
            <tr>
                <td>Cell 1</td>
            </tr>
            <tr>
                <td id="hoverover">Cell 2</td>
            </tr>
            <tr>
                <td id="changeme">Cell 3</td>
            </tr>
            <tr>
                <td>Cell 4</td>
            </tr>
        </table>
        <script>
            var hoverEl = document.getElementById('hoverover'),
                changeEl = document.getElementById('changeme');

            hoverEl.addEventListener('mouseover', function() {
                changeEl.innerHTML = '<img src="/path/to/image" />';
            }, false);
            hoverEl.addEventListener('mouseout', function() {
                changeEl.innerHTML = 'Cell 3';
            }, false);
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:26:33.513

这是一个更通用的纯 JavaScript 示例。它会更改`td`所有`td`. 对于最后一个，它将改变第一个的背景。设置为背景图像就像更改 CSS 以使用`background-image`而不是`background-color`.

[jsFiddle](http://jsfiddle.net/Tyriar/rTuYG/)

**JavaScript**

```
var tds = document.querySelectorAll('td');
for (var i = 0; i < tds.length; i++) {
    tds[i].onmouseover = (function (i) {
        return function () {
            tds[(i + 1) % tds.length].className = 'hovered';
        }
    })(i);
    tds[i].onmouseout = (function (i) {
        return function () {
            tds[(i + 1) % tds.length].className = '';
        }
    })(i);
} 
```

**CSS**

```
.hovered {
    background-color:#F00;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:01:39.177

您可以尝试仅使用 css 来实现。至少有两个选择器可能会有所帮助。

第一个是`+`，第二个是`nth-child()`。因此，假设您总是希望在表格单元格 n+1 中显示图像，其中 n 是您悬停的单元格：

```
<table>
  <tr>
    <td>Cell 1</td>
  </tr>
  <tr>
    <td><img src="yoursource.jpg"></td>
  </tr>
  <tr>
    <td>Cell 3</td>
  </tr>
  <tr>
    <td><img src="yoursource2.jpg"></td>
  </tr>
</table> 
```

你可以这样尝试：

```
img { display: none; }
tr:hover + tr img { display: block; } 
```

或者您可以使用 css3 选择器创建规则：

```
img { display: none; }
tr:nth-child(n+1):hover + tr img { display: block; } 
```

我想只有使用 css 才能做到这一点，但当然，只有在代码中已经有图像时它才会起作用（如果你只想显示或加载它们，你并不精确）。

[工作示例](http://codepen.io/anon/pen/aguyH)

# sql - 带有缓冲时间的 SQL 联接

> ID：15477708
> 
> 赞同：0
> 
> 时间：2013-03-18T13:12:34.440
> 
> 标签：sql, sql-server, join

我有两张桌子，必须检查一张桌子中的时间是否在其他桌子的范围之间。

ProgStartTime 给出范围的开始时间，ProgEndTime 给出位于 MBA 表中的范围的结束时间。我正在检查 MAP 表中的 AdvTime 是否存在于 MBA 表的 ProgStartTime 和 ProgEndTime 之间。

对于小于一小时的时间范围，我必须提供 + 或 - 5 分钟的缓冲区。

即如果 ProgStarttTime 是 18:00 & progEndTime 是 19:00 & AdvTime 是 17:55/19:05 它应该匹配范围。

而如果 ProgStarttTime 是 18:00 而 progEndTime 是 20:00 而 AdvTime 是 17:55 它不应该匹配。

抱歉内容有点匆忙。

我使用下面的查询来加入没有缓冲时间

```
SELECT DISTINCT mb.Id AS mbaid,
                mp.id AS mapid,
                mp.Channel AS Channel,
                mp.Product,
                mp.ProgDate,
                mp.AdvTime,
                mb.Channel,
                mb.ProgStartTime,
                mb.ProgEndTime,
                convert(time, dateadd(MINUTE, datediff(MINUTE, mb.progStartTime, mb.progEndTime), 0)) AS timeDiff
FROM map22 AS mp
INNER JOIN mba22 AS mb ON ((mp.ProgDate = mp.ProgDate
                            AND mp.Channel=mb.Channel
                            AND mp.Product=mb.Product))
WHERE (mp.ProgDate = mb.ProgDate
       AND AdvTime >= ProgStartTime
       AND (AdvTime <= ProgEndTime
            OR ProgEndTime < ProgStartTime))
  OR (mp.ProgDate = Dateadd(DAY,1,mb.ProgDate)
      AND ProgEndTime < ProgStartTime
      AND AdvTime <= ProgEndTime)
ORDER BY mp.Id ASC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:53:21.647

您的示例查询有很多内容，所以我创建了一个简化的示例。

设置数据：

```
create table MBA (MBAID int, ProgStartTime datetime, ProgEndTime datetime)

insert into MBA select 1, '20130318 18:00:00', '20130318 19:00:00'
insert into MBA select 2, '20130318 18:00:00', '20130318 20:00:00'

create table Map (MapID int, AdvTime datetime)

insert into Map select 1, '20130318 17:55:00'
insert into Map select 2, '20130318 18:30:00'
insert into Map select 3, '20130318 19:05:00'
insert into Map select 4, '20130318 20:05:00' 
```

基于此，我们可以应用 CASE 语句在日期之间的差异为一小时或更短时为 AdvTime 提供更松散的匹配：

```
select *
from MBA
  inner join Map on
    MBA.ProgStartTime <=
      case when datediff(mi, MBA.ProgStartTime, MBA.ProgEndTime) <= 60
        then dateadd(mi, 5, Map.AdvTime)
        else Map.AdvTime
        end
    and MBA.ProgEndTime >=
      case when datediff(mi, MBA.ProgStartTime, MBA.ProgEndTime) <= 60
        then dateadd(mi, -5, Map.AdvTime)
        else Map.AdvTime
        end 
```

给出结果：

![在此处输入图像描述](../Images/3adf01f513930a3a838b4febcb204119.png)

我们可以看到，对于持续时间为一小时的 MBA 1，我们在前后稍微匹配 AdvTime 值，但对于 MBA 2，仅根据需要匹配时间段内的值。

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/1b330/1)。

**评论后编辑：**

为注释中的值添加了另一个示例，其中包含以下数据：

```
create table MBA (MBAID int, ProgStartTime datetime, ProgEndTime datetime)

insert into MBA select 1, '20130318 21:00:00', '20130318 22:00:00'

create table Map (MapID int, AdvTime datetime)

insert into Map select 1, '20130318 20:55:00'
insert into Map select 2, '20130318 22:05:00' 
```

原始查询按预期匹配上述两行。

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/75a00/1)。

**评论后编辑：**

用更多数据测试：

```
create table MBA (MBAID int, ProgStartTime datetime, ProgEndTime datetime)

insert into MBA select 1, '20130318 23:00:00', '20130319 02:00:00'

create table Map (MapID int, AdvTime datetime)

insert into Map select 1, '20130319 00:30:00' 
```

仍然符合预期。

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/2fd7f/1)。

**评论后的最终编辑？**

好的，现在我们对可以进行最终查询的架构有了更多了解。设置数据：

```
create table MBA (MBAID int, ProgStartTime datetime, ProgEndTime datetime)

insert into MBA select 1, '18:00:00', '19:00:00'
insert into MBA select 2, '18:00:00', '20:00:00'
insert into MBA select 3, '21:00:00', '22:00:00'
insert into MBA select 4, '23:30:00', '02:00:00'
insert into MBA select 5, '23:30:00', '00:30:00'

create table Map (MapID int, AdvTime datetime)

insert into Map select 1, '17:55:00'
insert into Map select 2, '18:30:00'
insert into Map select 3, '19:05:00'
insert into Map select 4, '20:05:00'
insert into Map select 5, '20:55:00'
insert into Map select 6, '22:05:00'
insert into Map select 7, '23:25:00'
insert into Map select 8, '23:30:00'
insert into Map select 9, '00:30:00'
insert into Map select 10, '00:35:00' 
```

使用以下查询：

```
select *
from MBA
  inner join Map on
    (MBA.ProgStartTime < MBA.ProgEndTime
      and MBA.ProgStartTime <=
        case when datediff(mi, MBA.ProgStartTime, MBA.ProgEndTime) <= 60
          then dateadd(mi, 5, Map.AdvTime)
          else Map.AdvTime
          end
      and MBA.ProgEndTime >=
        case when datediff(mi, MBA.ProgStartTime, MBA.ProgEndTime) <= 60
          then dateadd(mi, -5, Map.AdvTime)
          else Map.AdvTime
          end) or
    (MBA.ProgStartTime > MBA.ProgEndTime
      and (MBA.ProgStartTime <=
        case when 1440 - datediff(mi, MBA.ProgEndTime, MBA.ProgStartTime) <= 60
          then dateadd(mi, 5, Map.AdvTime)
          else Map.AdvTime
          end
      or MBA.ProgEndTime >=
        case when 1440 - datediff(mi, MBA.ProgEndTime, MBA.ProgStartTime) <= 60
          then dateadd(mi, -5, Map.AdvTime)
          else Map.AdvTime
          end)) 
```

我们希望匹配以下行：

```
MBA  Matched Maps
1    1,2,3
2    2,3
3    5,6
4    8,9,10
5    7,8,9,10 
```

结果：

![在此处输入图像描述](../Images/eb85fa167187a11499025fcd7734bb5e.png)

[SQL Fiddle 与演示](http://sqlfiddle.com/#!3/ec43c/1)。

# android - 如何使用android上的高速公路库在websocket中添加标头？

> ID：15477711
> 
> 赞同：1
> 
> 时间：2013-03-18T13:12:57.130
> 
> 标签：android, websocket, autobahn

我在 android 上使用[Autobahn](http://autobahn.ws/)库进行 websocket，我只想在连接时传递一些标头？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:14:29.493

我还没有找到从高速公路库发送标头的任何方法，所以我自己修改了高速公路库。这是该库的[链接](https://github.com/bhaumikshukla/AutobahnAndroid)。 [单击此处](https://github.com/bhaumikshukla/AutobahnAndroid/tree/master/Demo/SimplePubSub)获取使用此更新的库的 android pub-sub 示例应用程序实现。

# java - 不同版本使用android api

> ID：15477716
> 
> 赞同：0
> 
> 时间：2013-03-18T13:13:11.740
> 
> 标签：java, android

我是 android 新手，我正在获取 android 联系人。

现在我正在使用语句

```
// Deaclaring desired fileds
        final String[] projection = new String[] { RawContacts.ACCOUNT_NAME,
                RawContacts._ID, RawContacts.DELETED };

        // Derclaring desired cursor

        final Cursor rawContacts = managedQuery(RawContacts.CONTENT_URI, projection. null, null, null); 
```

所以它表明**managedQuery**在 android api 11 中已被弃用。所以它是否可以在 android api 级别 11 上工作而不是。

或者

如果我使用最新版本，它是否适用于旧的 api 版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:36:55.963

您的代码看起来几乎与 ContactManager for Android v4.2.2 (API 17) 中的示例代码相同，它与 v2.2 (API 10) 相同，并且可以追溯到 v2.1 (API 7) 中的第一个示例代码包）。所以，是的，这肯定会在更旧的版本中工作。考虑到他们仍然在 Samples 包中包含调用它的方法，不推荐使用的方法也应该有很长的保质期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:42:19.750

它将适用于 API 11。

关于旧版本，在编写代码时，如果代码无法在清单中建立的 Android API 版本中运行，您将收到错误/警告提示。

# asp.net - 将可编辑的 CheckBoxField 添加到 gridview

> ID：15477720
> 
> 赞同：1
> 
> 时间：2013-03-18T13:13:18.747
> 
> 标签：asp.net, vb.net, gridview, user-controls

我正在尝试以编程方式将复选框列添加到网格视图。这个网格视图有多个其他列，但我只希望复选框列是可编辑的。我见过的唯一示例要求我为每一行添加一个“编辑”链接。我希望复选框列默认可编辑，而不需要链接。该复选框还应支持自动回帖。有人有什么建议吗？以下是我到目前为止的内容：

```
 Dim gv As New GridView

    With gv
        .ID = "gridViewFoundUsers"
        .AutoGenerateColumns = False
        .DataKeyNames = New String() {"UserId"}
        .GridLines = GridLines.Both
        .AllowSorting = True
        .AllowPaging = True
        .PageSize = numRows
        .Width = tableWidth
        .BorderColor = Drawing.ColorTranslator.FromHtml("#808080")
        .AutoGenerateEditButton = True

        .HeaderStyle.CssClass = foundUserHeadStyle
        .RowStyle.CssClass = foundUserEvenRows
        .Columns.Clear()

        Dim UserIdTF As New BoundField
        With UserIdTF
            .DataField = "UserId"
            .HeaderText = "UserID"
            .SortExpression = "UserId"
            .ItemStyle.Wrap = True
            .ItemStyle.Width = 100
        End With

        Dim DomainTF As New BoundField
        With DomainTF
            .HeaderText = "Domain"
            .DataField = "Domain"
            .SortExpression = "Domain"
            .ItemStyle.Wrap = False
            .HeaderStyle.Font.Underline = False
        End With

        Dim SelectUserTF As New CheckBoxField
        With SelectUserTF
            .HeaderText = "Select User"
            .ItemStyle.Wrap = False
            .DataField = "isSelected"
        End With

        .Columns.Add(UserIdTF)
        .Columns.Add(DomainTF)            
        .Columns.Add(SelectUserTF)
     End With 
```

gridview 是复合服务器控件的一部分，因此没有客户端代码页。

谢谢！

# sql - SQL Server 2012，触发器，比较插入和删除的行

> ID：15477726
> 
> 赞同：0
> 
> 时间：2013-03-18T13:13:29.750
> 
> 标签：sql, sql-server, triggers

我有一个带代码的触发器：

```
BEGIN
    INSERT INTO schema.table(old_id, old_user, new_id, new_user) 
        SELECT OLD.id, OLD.user, NEW.id, NEW.user
        FROM INSERTED NEW, 
           DELETED OLD 
        WHERE  OLD.id = NEW.id; 
END 
```

当 id 列至少是唯一的时它可以工作，但是当表没有唯一的列时怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:15:36.700

> 但是当表没有唯一列时怎么办

非常简单：您添加一个唯一列或唯一列的组合，由主键约束强制执行。没有其他方法会起作用。曾经。

# visual-studio - 不同项目中的应用程序和 Web.api ajax URI 生成插入应用程序的端口号而不是 web.api

> ID：15477733
> 
> 赞同：0
> 
> 时间：2013-03-18T13:13:45.370
> 
> 标签：visual-studio, web

我在从 Application UI JQuery 一个 ASP.NET MVC 4 项目中解决我的 web.api 方法时遇到问题。

应用程序和 web.api 被分成不同的项目。这是一个架构约束，无法更改，因此请不要回答将两者放在一个项目中。

当我运行项目时，web.api 项目在一个端口上运行，应用程序在另一个端口上运行。

在对 web.api 操作方法的 ajax 调用中，ui 的端口被放置到 web.api 的 uri 中，因此永远不会调用 web.api 操作方法。

如何确保生成正确的 URI？

所以 UI 中的 JQuery 看起来像这样：

```
 $.ajax({
            "dataType": 'json',
            "type": "GET",
            "url": "api/products",
            "success": function (data) {
                $.each(data, function(i, item) {
                    var str = '<li>Product Id: ' + item.Id + ' Stock Code: ' + item.StockCode + '</li>';
                    $('#productId').append(str);
                });
            },
            "error": function (data) {
                $.each(data, function(i, item) {
                    var str = '<li>Product Id: ' + data[i].Id + ' Stock Code: ' + data[i].StockCode + '</li>';
                    $('#productId').append(str);
                });
            }
        }); 
```

请求的 URI 如下所示：

```
http://localhost:50481/api/products 
```

但 web.api 托管在另一个端口上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:37:56.697

答案似乎在跨域资源共享中。

[https://developers.google.com/api-client-library/javascript/features/cors](https://developers.google.com/api-client-library/javascript/features/cors)

# java - 是否可以在 JFormattedTextField 中添加 ActionListener？

> ID：15477734
> 
> 赞同：0
> 
> 时间：2013-03-18T13:13:48.070
> 
> 标签：java, swing, awt, actionlistener, jformattedtextfield

您好，我目前正在处理我的 java 文件。当我按下回车键时，我想在 JFormattedTextField 上添加一个事件。这是我的代码

```
 import javax.swing.*;
    import java.awt.*;
    import java.awt.event.*;
    import javax.swing.text.MaskFormatter;
    import java.awt.*;
    import java.text.ParseException;

    public class Test extends JFrame implements ActionListener
    {
        JFormattedTextField phoneField;
        Test()
        {
            setTitle("JFormatted Text");
    setLayout(null);
    MaskFormatter mask = null;
    try {
        mask = new MaskFormatter("##########");
    } catch (ParseException e) {
        e.printStackTrace();
    }

    phoneField = new JFormattedTextField(mask);
    phoneField.setBounds(20, 20, 150, 30);
    phoneField.addActionListener(this);
    setVisible(true);
    setSize(200, 200);
    getContentPane().add(phoneField);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
}

    public static void main(String[] args)
    {
        new Test();
    }
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource()== phoneField)
        {
            System.out.println("The numbers you enter are "+phoneField.getText());
        }
    }
    } 
```

它可以工作，但他们的用户需要输入 10 位数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:32:41.233

在字段中添加一个[`ActionListener`](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)。它比使用（低级别）更好，`KeyListener`并且符合操作系统接受的任何“入口结束”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:02:07.177

不要`KeyListener`改用[DocumentListener](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/DocumentListener.html)。

它具有以下方法来捕获`JTextField`

```
JTextField textField = new JTextField();
        textField.getDocument().addDocumentListener(new DocumentListener() {

            @Override
            public void removeUpdate(DocumentEvent arg0) {
                // Gives notification that a portion of the document has been removed.

            }

            @Override
            public void insertUpdate(DocumentEvent arg0) {
                // Gives notification that there was an insert into the document.

            }

            @Override
            public void changedUpdate(DocumentEvent arg0) {
            // Gives notification that an attribute or set of attributes changed.

            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:19:01.993

您可以改为添加一个 keyListener。

```
phonefield.addKeyListener(new KeyAdapter() {
    public void keyPressed(KeyEvent evt) {
    if(evt.getKeyCode() == evt.VK_ENTER){
        System.out.println("The numbers you enter are "+phoneField.getText());
    }
    }
}); 
```

如果这不是你的问题，你应该扩大一点并澄清。

编辑：正如评论和其他答案所指出的，你应该选择一个`ActionListener`。推理可以在下面找到。

# vb.net - 从变量值中删除部分字符串

> ID：15477735
> 
> 赞同：0
> 
> 时间：2013-03-18T13:13:48.840
> 
> 标签：vb.net, string, datetime

在我的数据库中，我有日期时间类型的数据。我从数据库中读取这些数据并转换为字符串并存储在字符串变量中。我想从值中删除时间部分。我该怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:30:25.143

`DateTime`从not 从 中删除时间部分`String`。因此，将其存储为`DateTime`，并将其转换为字符串作为最后一步（例如，使用`dt.ToShortDateString`）。

所以（假设`DOB`是您班级中的一个属性）：

```
Me.DOB = Reader.GetDateTime(Reader.GetOrdinal("EMP_DOB")) 
```

稍后（例如，如果您想设置`TextBox`文本）：

```
Me.TxtDOB.Text = DOB.ToShortDateString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:15:31.097

以下情况如何：

```
Dim dob As String = Reader("EMP_DOB").ToString()
Dim dateOnly As String = Convert.ToDateTime(dob).ToShortDateString(); 
```

这将为当前文化输出正确的格式字符串，而直接格式化为“dd/MM/yyyy”不会考虑文化特定格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:16:44.083

```
 String.Format("{0:dd/MM/yyyy}", Datetime.Parse(DatetimeString)) 
```

这将输出 18/03/2013

带操作码：

```
 Dim dob As String =  String.Format("{0:dd/MM/yyyy}",Reader("EMP_DOB")) 
```

# loops - ASP Do While 循环总计和小计

> ID：15477736
> 
> 赞同：0
> 
> 时间：2013-03-18T13:13:51.363
> 
> 标签：loops, asp-classic, do-while

我不声称自己是一个典型的 ASP 人，但有时你必须做你必须做的事情。我的问题是这是一个通过 ASP 自定义构建的报告，用户希望运行 SubTotals 并显示总计，老实说，我只是不知道如何去做。目前整个报告都是这样包装的，它的显示方式与问题无关。

```
<%do while (adoRsTrade.AbsolutePage = iPageCurrent) and (not adoRsTrade.EOF)
NewRep = adoRsTrade("calIncludedRep")

if CurRep <> NewRep or FirstTime="T" and (not adorsTrade.BOF) then %> 
```

添加该 CurRep 的值并将它们显示为“小计”

```
<%

FirstTime="F"
CurRep = adoRsTrade("calIncludedRep")
adoRsTrade.MoveNext
loop %> 
```

我能得到的任何帮助都将不胜感激，因为我提到我无论如何都不是 ASP 大师。谢谢你，尼克

更新小计的东西；总计已完成，因为我可以在循环外重新运行 do while 循环显示所有数据并将其总计，现在我遇到的是 .MoveNext 之前被击中让我能够检查 NewRep；这是小计的总计以及检查它是否是新代表，这意味着显示前代表的小计

```
<%do while (adoRsTrade.AbsolutePage = iPageCurrent) and (not adoRsTrade.EOF)
NewRep = adoRsTrade("calIncludedRep")

if CurRep = NewRep then
        curPrincipal = adoRsTrade("mPrincipal")
        totPrincipal = totPrincipal + curPrincipal
            curInterest = adoRsTrade("mInterest")
            totInterest = totInterest + curInterest
        curCommission = adoRsTrade("calCommission")
        totCommission = totCommission + curCommission
            curSECFee = adoRsTrade("mSECFee")
            totSECFee = totSECFee + curSECFee
        curSvcFee = adoRsTrade("mSvcCharge")
        totSvcFee = totSvcFee + curSvcFee
            curNet = adoRsTrade("mNetAmount")
            totNet = totNet + curNet
end if    
if CurRep <> NewRep or FirstTime="T" and (not adorsTrade.BOF) then
  If FirstTime <> "T" then%>
      <TR>
        <td>
            <table class='FontStandardMinus1' border=0 cellPadding=0 align='left' cellSpacing=0 width="100%" bgcolor='#ffffff'>
                 <TR>
                    <td width="59%" align="left"><b>SubTotals<!-- for <%Response.Write(CurRep) %>-->:</b></td>
                    <td width="10%" valign=top align=right><%=FormatNumber(totPrincipal,2)%></td>
                    <td width="7%" valign=top align=right><%=FormatNumber(totInterest,2)%></td>
                    <td width="7%" valign=top align=right><%=FormatNumber(totCommission,2)%></td>
                    <td width="5%" valign=top align=right><%=FormatNumber(totSECFee,2)%></td>
                    <td width="4%" valign=top align=right><%=FormatNumber(totSvcFee,2)%></td>
                    <td width="9%" valign=top align=right><%=FormatNumber(totNet,2)%></td>
                </TR>
            </table>
        </td>
    </TR>
<%end if      
curPrincipal = 0
totPrincipal = 0
curInterest = 0
totInterest = 0
curCommission = 0
totCommission = 0
curSECFee = 0
totSECFee = 0
curSvcFee = 0
totSvcFee = 0
curNet = 0
totNet = 0 %>
<TR>
<TD width="100%">
<table class='FontStandardMinus1' border=0 cellPadding=0 align='left' cellSpacing=0 width="100%" bgcolor='#ffffff'>
<tr>
<td width=100%><b><%=adoRsTrade("calIncludedRep")%></b></td>

</tr>
</table>
</TD>
</TR>
<%end if%>
<%

FirstTime="F"
'CalCom = CalCom + adoRsTrade("calCommission")
CurRep = adoRsTrade("calIncludedRep")
adoRsTrade.MoveNext

loop%> 
```

所以你可以看到我在表格中显示它们后尝试将值重置为 0，但该表格仅在命中 .MoveNext 后显示，这意味着即使我想显示记录 1-5 加起来，记录 6 已被 .MoveNext 击中，并且正在从值集中丢弃。很抱歉这个冗长，但我讨厌评论不能包含更新的代码。谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:10:30.723

假设您在循环之后输出变量 totPrincipal、totInterest、totCommission，我能想到的唯一问题是数据类型和 rs.MoveFirst。

顺便说一句：出于性能原因，请尝试在单个循环中执行此操作！

```
Dim subtotPrincipal: subtotPrincipal = 0
Dim totPrincipal: totPrincipal = 0
Dim CurRep: CurRep = 0
Dim NewRep: NewRep = 0

adoRsTrade.MoveFirst
Do 
    NewRep = adoRsTrade("calIncludedRep")       
    ...
    subtotPrincipal = subtotPrincipal + CLng(adoRsTrade("mPrincipal"))
    totPrincipal = totPrincipal + CLng(adoRsTrade("mPrincipal"))
    ...

    If (CurRep <> NewRep And Not adorsTrade.BOF) Or adoRsTrade.EOF Then
        Response.Write subtotPrincipal
        subtotPrincipal = 0
    End If

    CurRep = NewRep
    adorsTrade.MoveNext
Loop Until adoRsTrade.EOF

Response.Write totPrincipal 
```

# android - 单击按钮时清除微调器内容

> ID：15477737
> 
> 赞同：0
> 
> 时间：2013-03-18T13:13:55.930
> 
> 标签：android

我有一个动态加载数据的微调器，如下所示

```
final  String[] sku = CrownApplication.mDb.getAllSKUs(Qsearch);
                if((sku.length>=1)){ 
                ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(CrownTakeOrder.this,android.R.layout.simple_spinner_item, sku);
                dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                mSpner.setAdapter(dataAdapter);

                } 
```

这很好用，现在我有一个按钮，单击时获取值并将其他字段设置为空白，例如如下所示的 Edittext。唯一的问题是我无法清除微调器，因此一旦清除了其他所有内容，微调器仍然保留旧值

```
if (!mError) {
                mSKU = mSpner.getSelectedItem().toString();
                Qsearch =mQuery.getText().toString();
                quantity =mQuantity.getText().toString();
                String[] parts = mSKU.split(" - ");
                str1 = parts[0];  
                str2 = parts[1];   

                addBody(Qsearch,mSKU,quantity);

                mQuery.setText("");
                mTxtview.setText("");
                mQuantity.setText("");
                mSKU = "empty";

               //mSpner.setAdapter(null);

            } 
```

我试过用

```
 mSpner.setAdapter(null); 
```

但是我的应用程序崩溃了......如何清空微调器？我正在编码

```
android:minSdkVersion="11"
    android:targetSdkVersion="15" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:20:56.547

尝试这个

```
mSpner.setAdapter(new ArrayAdapter<String>(CrownTakeOrder.this, android.R.layout.simple_spinner_item, new String[])); 
```

# jquery - 单击链接jquery时如何显示下拉菜单

> ID：15477739
> 
> 赞同：-1
> 
> 时间：2013-03-18T13:13:59.487
> 
> 标签：jquery

我知道如何在任何链接上捕获点击事件。这是我的代码

```
<a id="piclink_1" class="picLinks">...</a>

$('a.picLinks').click(function() {
    //split at the '_' and take the second offset
    var picNumber = $(this).attr('id').split('_')[1]; 
    viewer.show(picNumber);
}); 
```

我想显示一个下拉菜单，当我单击链接时，它将在链接下方显示两个子菜单。而且，如果我单击下拉菜单的链接之外，则下拉菜单将隐藏。请指导我如何实现这一点。谢谢

## 我的标记看起来像

```
<a id="link">About</a>

<div id="submenu">
     <a href="#">About the company</a><br />
     <a href="#">Careers</a>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:24:08.050

尝试这个

```
 $('a.picLinks').click(function() {
    $('#submenu').show();    
 });

 var mouseIn = false;   

    $('a.picLinks').click(function() {

     $('#submenu').hover(function(){ 
        mouseIn =true; 
    }, function(){ 
        mouseIn =false; 
    });

    $("body").mouseup(function(){ 
        if( mouseIn == false)
         $('#submenu').hide();
    });

}); 
```

# ruby-on-rails-3 - nginx + Unicorn（Rails 3 应用程序）加载时出现网关错误

> ID：15477740
> 
> 赞同：8
> 
> 时间：2013-03-18T13:14:01.030
> 
> 标签：ruby-on-rails-3, nginx, unicorn

我有一个在云平台上运行在 nginx 和独角兽上的 Rails (3.2) 应用程序。“盒子”在 Ubuntu 12.04 上运行。

**当系统负载大约 70% 或更高时，nginx 突然**（并且看似随机）**开始抛出 502 Bad gateway errors**；当负载较少时，没有什么喜欢的。我已经尝试过不同数量的内核（4、6、10 - 我可以“更改硬件”，因为它在云平台上），情况总是一样的。（CPU 负载类似于系统负载，用户空间为 55%，其余为系统和被盗，有大量可用内存，没有交换。）

502 通常分批出现，但并非总是如此。

（我每个核心运行一个 unicorn worker，一个或两个 nginx worker。在 10 个核心上运行时，请参阅下面配置的相关部分。）

我真的不知道如何跟踪这些错误的原因。我怀疑这可能与独角兽工人无法（及时？）服务有关，但这看起来很奇怪，因为他们似乎没有使 CPU 饱和，我认为他们没有理由等待 IO（但我不也不知道如何确保这一点）。

**请您帮我解决如何寻找原因？**

* * *

独角兽配置（`unicorn.rb`）：

```
worker_processes 10
working_directory "/var/www/app/current"
listen "/var/www/app/current/tmp/sockets/unicorn.sock", :backlog => 64
listen 2007, :tcp_nopush => true
timeout 90
pid "/var/www/app/current/tmp/pids/unicorn.pid"
stderr_path "/var/www/app/shared/log/unicorn.stderr.log"
stdout_path "/var/www/app/shared/log/unicorn.stdout.log"
preload_app true
GC.respond_to?(:copy_on_write_friendly=) and
  GC.copy_on_write_friendly = true
check_client_connection false

before_fork do |server, worker|
  ... I believe the stuff here is irrelevant ...
end
after_fork do |server, worker|
  ... I believe the stuff here is irrelevant ...
end 
```

和 ngnix 配置：

`/etc/nginx/nginx.conf`：

```
worker_processes 2;
worker_rlimit_nofile 2048;
user www-data www-admin;
pid /var/run/nginx.pid;
error_log /var/log/nginx/nginx.error.log info;

events {
  worker_connections 2048;
  accept_mutex on; # "on" if nginx worker_processes > 1
  use epoll;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';
    access_log  /var/log/nginx/access.log  main;
    # optimialization efforts
    client_max_body_size        2m;
    client_body_buffer_size     128k;
    client_header_buffer_size   4k;
    large_client_header_buffers 10 4k;  # one for each core or one for each unicorn worker?
    client_body_temp_path       /tmp/nginx/client_body_temp;

    include /etc/nginx/conf.d/*.conf;
} 
```

`/etc/nginx/conf.d/app.conf`：

```
sendfile on;
tcp_nopush on;
tcp_nodelay off;
gzip on;
gzip_http_version 1.0;
gzip_proxied any;
gzip_min_length 500;
gzip_disable "MSIE [1-6]\.";
gzip_types text/plain text/css text/javascript application/x-javascript;

upstream app_server {
  # fail_timeout=0 means we always retry an upstream even if it failed
  # to return a good HTTP response (in case the Unicorn master nukes a
  # single worker for timing out).
  server unix:/var/www/app/current/tmp/sockets/unicorn.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  server_name _;
  client_max_body_size 1G;
  keepalive_timeout 5;
  root /var/www/app/current/public;

  location ~ "^/assets/.*" {
      ...
  }

  # Prefer to serve static files directly from nginx to avoid unnecessary
  # data copies from the application server.
  try_files $uri/index.html $uri.html $uri @app;

  location @app {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;

    proxy_pass http://app_server;

    proxy_connect_timeout      90;
    proxy_send_timeout         90;
    proxy_read_timeout         90;

    proxy_buffer_size          128k;
    proxy_buffers              10 256k;  # one per core or one per unicorn worker?
    proxy_busy_buffers_size    256k;
    proxy_temp_file_write_size 256k;
    proxy_max_temp_file_size   512k;
    proxy_temp_path            /mnt/data/tmp/nginx/proxy_temp;

    open_file_cache max=1000 inactive=20s; 
    open_file_cache_valid    30s; 
    open_file_cache_min_uses 2;
    open_file_cache_errors   on;
  }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-21T09:56:02.280

在谷歌搜索在 nginx 错误日志中找到的表达式后，它原来是一个与 nginx 无关的已知问题，与 unicorn 几乎没有关系，并且植根于操作系统（linux）设置。

问题的核心是socket backlog太短了。这应该是多少有各种考虑（您是想尽快检测集群成员故障还是让应用程序推动负载限制）。但无论如何，`listen` `:backlog`都需要调整。

我发现在我的情况下 a`listen ... :backlog => 2048`就足够了。（我没有做太多的实验，虽然如果你愿意的话有一个很好的技巧，通过有两个套接字在 nginx 和 unicorn 之间进行通信，具有不同的积压和更长的备份；然后在 nginx 日志中查看较短队列失败的频率.) 请注意，这不是科学计算和 YMMV 的结果。

但是请注意，许多操作系统（大多数 linux 发行版，包括 Ubuntu 12.04）对套接字积压大小的操作系统级别默认限制要低得多（低至 128）。

您可以按如下方式更改操作系统限制（作为 root）：

```
sysctl -w net.core.somaxconn=2048
sysctl -w net.core.netdev_max_backlog=2048 
```

添加这些以`/etc/sysctl.conf`使更改永久化。（`/etc/sysctl.conf`可以在不重新启动的情况下重新加载`sysctl -p`。）

有人提到您可能还必须增加进程可以打开的文件的最大数量（使用`ulimit -n`和`/etc/security/limits.conf`永久）。由于其他原因，我已经这样做了，所以我不知道它是否有所作为。

# http - HTTP HEAD 和 GET 不同的结果

> ID：15477742
> 
> 赞同：4
> 
> 时间：2013-03-18T13:14:09.120
> 
> 标签：http, http-headers

`HEAD`和方法应该`GET`返回相同的状态码吗？更具体地说，我们遇到了这样一种情况，`200`当我们执行 a 时，客户网站返回 a `HEAD`，但在执行 a`303`时返回 a `GET`。它与基于位置重定向到特定语言的页面有关，但不应该`HEAD`也要求您重定向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:20:13.227

> *但是 HEAD 不应该也要求您重定向吗？*

关键是这个词`SHOULD`。来自[HTTP 方法规范，RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.4)：

> ### 9.4 头部
> 
> HEAD 方法与 GET 相同，只是服务器`MUST NOT`在响应中返回消息体。响应 HEAD 请求的 HTTP 标头中包含的元`SHOULD`信息与响应 GET 请求而发送的信息相同。

这个词在[RFC2119](http://www.ietf.org/rfc/rfc2119.txt)`SHOULD`中有进一步的定义：

> **`SHOULD`**这个词，或形容词“推荐”，意味着在特定情况下可能存在忽略特定项目的正当理由，但在选择不同的课程之前，必须理解并仔细权衡全部含义。

因此，您描述的情况是合法的，但不推荐。您可能想向站点维护者询问此路径的原因。

# sql - SQLSERVER 中的 ListAGG

> ID：15477743
> 
> 赞同：92
> 
> 时间：2013-03-18T13:14:09.050
> 
> 标签：sql, sql-server, aggregate

我正在尝试在 SQLServer 中聚合一个“字符串”字段。我想在 Oracle 中找到相同的函数 LISTAGG 。

您知道如何执行相同的功能或另一种方法吗？

例如，

```
Field A | Field B
1       |  A
1       |  B
2       |  A 
```

我希望这个查询的结果是

```
1 | AB
2 | A 
```

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-10-13T18:27:29.617

## MySQL

```
SELECT FieldA
     , GROUP_CONCAT(FieldB ORDER BY FieldB SEPARATOR ',') AS FieldBs
  FROM TableName
 GROUP BY FieldA
 ORDER BY FieldA; 
```

## 甲骨文和 DB2

```
SELECT FieldA
     , LISTAGG(FieldB, ',') WITHIN GROUP (ORDER BY FieldB) AS FieldBs
  FROM TableName
 GROUP BY FieldA
 ORDER BY FieldA; 
```

## PostgreSQL

```
SELECT FieldA
     , STRING_AGG(FieldB, ',' ORDER BY FieldB) AS FieldBs
  FROM TableName
 GROUP BY FieldA
 ORDER BY FieldA; 
```

## SQL 服务器

**SQL Server ≥ 2017 & Azure SQL**

```
SELECT FieldA
     , STRING_AGG(FieldB, ',') WITHIN GROUP (ORDER BY FieldB) AS FieldBs
  FROM TableName
 GROUP BY FieldA
 ORDER BY FieldA; 
```

**SQL Server ≤ 2016（包括 CTE 以鼓励[DRY 原则](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself)）**

```
 WITH CTE_TableName AS (
       SELECT FieldA, FieldB
         FROM TableName)
SELECT t0.FieldA
     , STUFF((
       SELECT ',' + t1.FieldB
         FROM CTE_TableName t1
        WHERE t1.FieldA = t0.FieldA
        ORDER BY t1.FieldB
          FOR XML PATH('')), 1, LEN(','), '') AS FieldBs
  FROM CTE_TableName t0
 GROUP BY t0.FieldA
 ORDER BY FieldA; 
```

## SQLite

**排序需要 CTE 或子查询**

```
 WITH CTE_TableName AS (
       SELECT FieldA, FieldB
         FROM TableName
        ORDER BY FieldA, FieldB)
SELECT FieldA
     , GROUP_CONCAT(FieldB, ',') AS FieldBs
  FROM CTE_TableName
 GROUP BY FieldA
 ORDER BY FieldA; 
```

**无需订购**

```
SELECT FieldA
     , GROUP_CONCAT(FieldB, ',') AS FieldBs
  FROM TableName
 GROUP BY FieldA
 ORDER BY FieldA; 
```

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2013-03-18T13:18:54.880

从[SQL Server 2017](https://docs.microsoft.com/en-us/sql/t-sql/functions/string-agg-transact-sql?view=sql-server-ver15)开始，该`STRING_AGG`功能可用，大大简化了逻辑：

```
select FieldA, string_agg(FieldB, '') as data
from yourtable
group by FieldA 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!18/321a3/711/1)

在 SQL Server 中，您可以使用`FOR XML PATH`来获取结果：

```
select distinct t1.FieldA,
  STUFF((SELECT distinct '' + t2.FieldB
         from yourtable t2
         where t1.FieldA = t2.FieldA
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,0,'') data
from yourtable t1; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!18/321a3/711/0)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2017-01-05T15:30:42.507

在 SQL Server 2017中添加了[STRING_AGG](https://msdn.microsoft.com/en-us/library/mt790580.aspx)：

```
SELECT t.name,STRING_AGG (c.name, ',') AS csv
FROM sys.tables t
JOIN sys.columns c on t.object_id = c.object_id
GROUP BY t.name
ORDER BY 1 
```

此外，[STRING_SPLIT](https://msdn.microsoft.com/en-us/library/mt684588.aspx)对于相反的情况很有用，并且在 SQL Server 2016 中可用

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-31T01:21:21.890

这可能对某人也有用..

即用于数据分析师和数据分析类型的目的..（即不分组）..

在 SQL*Server 2017 String_agg 函数存在之前..

（即只返回一行..）

```
select distinct
SUBSTRING (
stuff(( select distinct ',' + [FieldB] from tablename order by 1 FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)') 
,1,0,'' ) 
,2,9999)
from 
    tablename 
```

例如返回逗号分隔值 A,B

# ruby-on-rails - HAML：tr[@user] 转换为类和 ID，但如何？

> ID：15477746
> 
> 赞同：2
> 
> 时间：2013-03-18T13:14:17.330
> 
> 标签：ruby-on-rails, haml

众所周知，HAML 翻译`tr[@user]`为 do `<tr class="user" id="user_123">...`。但它是如何做到这一点的呢？通过一些内在的魔法？或者使用`@user`对象的某些功能？

我想要实现的是以下。我有一个`Contact`带有 a`Company`和一个`Person`子类的模型。现在使用 时`tr[@company]`，我希望 HAML 执行以下操作：

```
<tr class="contact company" id="company_123"> 
```

...而不仅仅是：

```
<tr class="company" id="company_123"> 
```

有没有简单的方法来实现这一目标？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:45:29.333

您可以`haml_object_ref`在模型中实现一个方法来覆盖 Haml 用作`class`属性值的内容。

如果你只使用`Contact`像这样简单的东西的直接子类应该在你的`Contact`模型中工作：

```
def haml_object_ref
  "#{self.class.superclass.to_s.underscore} #{self.class.to_s.underscore}"
end 
```

（这使用 ActiveSupport`underscore`方法。）

如果您想`Contact`直接使用实例或 or 的子类`Person`，`Company`您可以执行以下操作：

```
def haml_object_ref
  classes = []
  klass = self.class
  while klass <= Contact
    classes << klass
    klass = klass.superclass
  end
  classes.map{|c| c.to_s.underscore}.join(' ')
end 
```

这将为`class="contact"`的实例`Contact`、`class="contact person'`的实例`Person`和`class="contact person employee"`的（假设的）`Employee`子类生成`Person`。

# mysql - 如何截断 MySQL 数据库中的所有数据？

> ID：15477747
> 
> 赞同：0
> 
> 时间：2013-03-18T13:14:18.197
> 
> 标签：mysql, shell, truncate

我在 Mac 10.7.5 上使用 MySql 5.5。从外壳（我正在使用 bash）中，我希望能够运行一个命令来截断所有表中的数据。另外，我想输入一个不会提示我输入密码的命令。我试过这个，我在另一个 SO 帖子上找到的，但没有骰子。我可以用来截断所有数据库表数据的 shell 命令是什么？

```
mysql -umyuser -p -e 'SET FOREIGN_KEY_CHECKS = 0; show tables' my_db | while read table; do mysql -e -umyuser -p "truncate table $table" my_db; done
Enter password: 

mysql  Ver 14.14 Distrib 5.5.25, for osx10.6 (i386) using readline 5.1
Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Usage: mysql [OPTIONS] [database]
  -?, --help          Display this help and exit.
  -I, --help          Synonym for -?
  --auto-rehash       Enable automatic rehashing. One doesn't need to use
                  'rehash' to get table and field completion, but startup
                  and reconnecting may take a longer time. Disable with
                  --disable-auto-rehash.
                  (Defaults to on; use --skip-auto-rehash to disable.)
  -A, --no-auto-rehash
                  No automatic rehashing. One has to use 'rehash' to get
                  table and field completion. This gives a quicker start of
                  mysql and disables rehashing on reconnect.
  --auto-vertical-output
                  Automatically switch to vertical output mode if the
                  result is wider than the terminal width.
  -B, --batch         Don't use history file. Disable interactive behavior.
                  (Enables --silent.)
  --character-sets-dir=name
                  Directory for character set files.
  --column-type-info  Display column type information.
  -c, --comments      Preserve comments. Send comments to the server. The
                  default is --skip-comments (discard comments), enable
                  with --comments.
  -C, --compress      Use compression in server/client protocol.
  -#, --debug[=#]     This is a non-debug version. Catch this and exit.
  --debug-check       Check memory and open file usage at exit.
  -T, --debug-info    Print some debug info at exit.
  -D, --database=name Database to use.
  --default-character-set=name
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:22:53.690

您可以转储没有数据的数据库：

```
mysqldump -u myuser -p --databases --add-drop-database --no-data my_db > my_db.sql 
```

然后恢复它

```
mysql -u myuser -p < my_db.sql 
```

# c++ - Mat元素批量修改：负数为0，正数为1

> ID：15477753
> 
> 赞同：5
> 
> 时间：2013-03-18T13:14:27.120
> 
> 标签：c++, opencv, matrix

我有一个负整数和正整数矩阵。我想将负元素设置为 0，将正元素设置为 1。我不想单独设置每个元素。

OpenCv 中是否有任何功能/功能组合可以执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:35:22.983

查看函数[threshhold](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=threshold#threshold)。此外，[本教程](http://docs.opencv.org/doc/tutorials/imgproc/threshold/threshold.html)还解释了如何通过对每个数组元素应用固定级别的阈值来获得二值图像。

```
cv::Mat source_array, binary_output;
cv::threshold(source_array, binary_output, 0, 1, cv::THRESH_BINARY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:54:31.180

您正在做的事情称为[thresholding](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html#threshold)。答案取决于您使用的语言。下面是几个例子。

# C++

```
cv::threshold(m, m, 0, 1, cv::THRESH_BINARY); 
```

# C

```
cvThreshold(m, m, 0, 1, THRESH_BINARY); 
```

# Python (numpy, cv2)

```
m = m > 0 
```

# 蟒蛇（简历）

```
cv.Threshold(m, m, 0, 1, cv.CV_THRESH_BINARY) 
```

# javascript - 防止 jQuery.ajax() 自动发送

> ID：15477754
> 
> 赞同：0
> 
> 时间：2013-03-18T13:14:28.313
> 
> 标签：javascript, jquery, ajax, jqxhr

在通过 jQuery 发送 AJAX 请求之前，我需要做一些（可能是异步的）事情。有没有办法手动唤起在 jqXHR 对象上发送请求？问题是我需要立即返回 jqXHR 对象（例如使用 $.Deferred() 接口）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:18:50.550

你可以`beforeSend`在 jQuery 中使用事件

```
 $.ajax({
      url: "url",
      beforeSend: function ( xhr ) {
      // you can do here 
      }
    }).done(function ( data ) {
     .............
    }); 
```

[看这里](http://api.jquery.com/jQuery.ajax/)

# c++ - C++ - WINAPI - 面向对象的关闭窗口的方法

> ID：15477756
> 
> 赞同：1
> 
> 时间：2013-03-18T13:14:29.723
> 
> 标签：c++, winapi, window

在尝试围绕 Win32 特定的 GUI 组件创建一个很好的包装器时，我最终遇到了一个问题。问题是我创建的窗口不再存在后我无法关闭应用程序。

我的 API 是这样工作的：

```
/// ----------------------------
/// @author     God
/// @project    Helixirr Widgets
/// ----------------------------
#include <helixirrwidgets/HelixirrWidgets.hpp>

int main(void){
    HelixirrWidgets::Window __windows[2] = {HelixirrWidgets::Window("Big Window"), HelixirrWidgets::Window()};

    __windows[0].position(200, 200);
    __windows[0].size(800, 600);
    __windows[0].visible(true);
    __windows[0].save_changes();

    __windows[1].name("Tiny Window");
    __windows[1].position(10, 100);
    __windows[1].size(400, 200);
    __windows[1].visible(true);
    __windows[1].save_changes();

    while(__windows[0].active() || __windows[1].active()){
        if(__windows[0].visible()){
            __windows[0].show();
        }
        if(__windows[1].visible()){
            __windows[1].show();
        }
    }
    return 0;
} 
```

在名为“active”的**HelixirrWidgets::Window**方法中，声明如下

```
inline bool active(void) const noexcept; 
```

我可以检查我的窗口是否处于活动状态。

此方法基本上返回对实例的布尔成员变量的 const 引用。这个成员变量是在同一个类的“show”方法中修改的。这是定义：

```
void Window::show(void){
    if(GetMessage(&_m_opHelper->message, _m_opHelper->handle_window, 0, 0)){
        if(_m_opHelper->message.message == WM_CLOSE){
            _m_bActive = false;
            return;
        }

        TranslateMessage(&_m_opHelper->message);
        DispatchMessage(&_m_opHelper->message);

        ShowWindow(_m_opHelper->handle_window, SW_SHOWDEFAULT);
        UpdateWindow(_m_opHelper->handle_window);

        _m_bActive = true;
        return;
    }
    _m_bActive = false;
} 
```

请注意我使用 pimpl-idiom 来隐藏特定于平台的结构（“_m_opHelper”是指向实现的指针）。

它可能看起来有效，但它没有，我不明白为什么。这一切都归结为一个简单的问题：*如何关闭使用 WINAPI 特定功能和结构实现的窗口，以便由我的应用程序用户适当关闭*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:42:54.630

我想问题的原因与事实有关，`WM_CLOSE`根本不是最后一条消息`HWND`。像这样的消息`WM_DESTROY`，`WM_NCDESTROY`可能更多（取决于特定窗口及其状态）将出现在 之后`WM_CLOSE`，导致分配`_m_bActive = TRUE`。

即窗口在很短的时间内变为非活动状态，并且（很可能）它们永远不会同时处于非活动状态，从而导致`main()`.

# jquery - 在表格中查找单元格，使用 jQuery 在字体类之后添加文本

> ID：15477763
> 
> 赞同：1
> 
> 时间：2013-03-18T13:14:50.710
> 
> 标签：jquery

我有这个代码...

```
<td valign="top">
    <a title="Test Title" class="class1 class2" href="http://www.test.com/product/test123.htm">
        Test Link Text
    </a>
    <img width="5" height="5" src="/images/clear1x1.gif">
    <br>
    <font class="text">Test Text</font>
</td> 
```

如何找到 test123.htm 独有的这个特定单元格，并在使用 jQuery 后添加文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:16:55.710

尝试这个：

```
$("td a[href$='test123.htm']").parent().append("your text"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:17:55.050

```
$('a.class1.class2[href$="test123.htm"]').closest('td').after("text"); 
```

演示：http: [//jsfiddle.net/RVwmF/1](http://jsfiddle.net/RVwmF/1)

# javascript - 当我执行 OnClientClick="function(); return false" 时，OnClick 不起作用

> ID：15477773
> 
> 赞同：1
> 
> 时间：2013-03-18T13:15:29.207
> 
> 标签：javascript, onclick, onclientclick, aspbutton

我有 5 个 asp：按钮，当我单击它们时我想更改它们的 css 类，以便它们被“标记”。我用javascript做这个，它工作正常。但我也想在 onClick 后面的代码中存储一个变量。

我的问题是，当我单击我的 asp:button 时，它会刷新页面。我在 OnClientClick 之后用 ;return false 解决了这个问题。但是当我返回 false 时，按钮 OnClick 不会触发。所以我需要帮助让这两件事同时工作：

*   按下asp：按钮时页面不刷新，与
*   OnClick 也需要触发。

html

```
<asp:Button ID="Button1" runat="server" Text="1" OnClick="button1_Click" OnClientClick="change_select(this); return false;" CssClass="button black"/> 
```

javascript

```
function change_select(objs) {

    $('.darkgray').removeClass('darkgray').addClass('black');
    objs.className = "button darkgray"; 
```

}

后面的代码

```
 int[] answerArray = new int[28];
    int answer = 0;
    int currentQ = 0;
 protected void button1_Click(object sender, EventArgs e)
    {         
            answer = 1;        
    }
protected void buttonNext_Click(object sender, EventArgs e)
    {
            answerArray[currentQ] = answer;
            currentQ++;  
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:33:34.180

如果您打算在使用 ASP.NET Webforms 的代码中存储值，则无法阻止刷新页面。请参阅此相关的 SO 问题[单击按钮时如何停止重新加载页面？](https://stackoverflow.com/questions/9012852/how-to-stop-to-reload-page-when-click-the-button)

# c# - 项目属性选项卡字符串值缺少空格

> ID：15477788
> 
> 赞同：0
> 
> 时间：2013-03-18T13:16:05.340
> 
> 标签：c#, visual-studio-2010

在我的项目设置中，我有以下字符串值：“跟踪服务”。字符串中的空格很重要，因为我使用它来访问 Windows 服务。当我在 PC 上安装应用程序后查看配置文件时，字符串值缺少空格。查看我的调试文件夹，字符串值也缺少 .config 文件中的空格。

有没有办法从我的项目属性中的“设置”选项卡中保留空白？我计划在多台 PC 上安装这个应用程序，我希望字符串保持它的实际值，然后必须进入并修改每个配置文件。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:19:06.360

您可以将其转换为您的设置。

分裂：

```
string [] VariableName.Split(new [] {'_'}); 
```

加入：

```
string remerged_Variable= string.Join(" ", splitParts); 
```

这对你的目的有用吗？

# java - 我想在 Spring 项目中使用 JSP 文件的开发版本。是否可以？

> ID：15477790
> 
> 赞同：1
> 
> 时间：2013-03-18T13:16:10.800
> 
> 标签：java, spring, jsp, servlets

在之前的问题[中，强制 JBoss AS 7 使用 Spring 项目中源（开发）目录中的静态文件，](https://stackoverflow.com/questions/15409465/forsing-jboss-as-7-to-use-static-files-from-source-development-directory-in-sp)我要求提供 JS/CSS 文件，经过 4 小时的文档阅读和试验，我自己解决了问题。

但是我不熟悉 Spring/Servlet 内部来强制 Spring**使用本地文件系统路径（开发文件）中的 JSP 文件**。我尝试：

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="file:/home/user/devel/app/src/main/webapp/WEB-INF/jsp/"/>
    <property name="suffix" value=".jsp"/>
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView" />
</bean> 
```

但是当我访问应用程序页面时出现错误：

```
HTTP Status 404 - /app/file:/home/user/devel/app/src/main/webapp/WEB-INF/jsp/index.jsp 
```

我认为不知何故来自[ServletContext.getRealPath](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29) ...

我的目标是缩短编辑-部署-测试周期。

请不要建议*JRebel*或*DCEVM*或其他解决方案。直接回答就好了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T09:45:01.950

切换到 Tomcat 7（从 Jboss AS 7）后，我配置上下文`/opt/apache-tomcat-7.0.40/conf/Catalina/localhost/CTXNAME.xml`：

```
<Context docBase="/home/user/devel/proj-dev/src/main/webapp"
         reloadable="true">
    <Resources className="org.apache.naming.resources.VirtualDirContext"
               extraResourcePaths="/WEB-INF/classes=/home/user/devel/proj-dev/target/classes,/WEB-INF/lib=/home/user/devel/proj-dev/target/proj/WEB-INF/lib"/>
    <Loader className="org.apache.catalina.loader.VirtualWebappLoader"
            virtualClasspath="/home/user/devel/proj-dev/target/classes;/home/user/devel/proj-dev/target/proj/WEB-INF/lib"/>
    <JarScanner scanAllDirectories="true"/>
</Context> 
```

根据：

*   [http://tomcat.apache.org/tomcat-7.0-doc/config/context.html](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)
*   [http://tomcat.apache.org/tomcat-7.0-doc/config/resources.html](http://tomcat.apache.org/tomcat-7.0-doc/config/resources.html)
*   [http://tomcat.apache.org/tomcat-7.0-doc/config/loader.html](http://tomcat.apache.org/tomcat-7.0-doc/config/loader.html)

现在 JS/CSS/JSP 文件`F5`在浏览器中更新。为了使用新的`.class`调用`mvn compile`。

引导调用`mvn package`. 上下文名称来自`.xml`文件名。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T17:06:35.347

```
<bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
              <property name="prefix"> 
                    <value>/WEB-INF/jsp/</value>
              </property>
              <property name="suffix">
                 <value>.jsp</value>
              </property>
</bean> 
```

在前缀中，您必须只给出以 /WEB-INF/ 开头的相对路径

# charts - OpenOffice Calc 图表未显示我的数据点？

> ID：15477795
> 
> 赞同：4
> 
> 时间：2013-03-18T13:16:19.550
> 
> 标签：charts, scatter, calc

好的，我已经为此寻找答案很久了，所以请不要给我减分:)

我想在 OpenOffice Calc 中制作一个简单的 XY 散点图，但是当我选择了 X 和 Y 列并选择了 XY 散点图时，图中没有显示任何数据点。

我的工作表有大约 400 行，其中 A 列 X 轴按顺序包含 1 到 400 之间的数字，B 列 Y 轴按顺序包含 -2 和 +2 之间的值。这真让我抓狂！

我已经确定了分钟。不是 0 而是 -5，所以不可能。

任何人都知道我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-07T12:27:28.213

I had this problem -- Check the data you're using for the chart.

If you've done a cut-and-paste, you may have brought in some non-numeric characters.

First look at the numbers. They should automatically line up on the right side of the cell, unless you've changed the alignment.

Next, click a cell and look at the value displayed in the formula bar. Remove spaces or other non-numeric characters and hit enter.

Repeat for all cells in the data series.

# cocoa-touch - 方法 removeAndReturnError: 不需要吗？

> ID：15477799
> 
> 赞同：2
> 
> 时间：2013-03-18T13:16:27.040
> 
> 标签：cocoa-touch, icloud, conflict, uidocument, nsfileversion

我刚刚阅读了有关在 iCloud 中使用 UIDocuments 解决冲突的文档： [解决文档版本冲突](https://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/ResolveVersionConflicts/ResolveVersionConflicts.html)

在“如何告诉 iOS 文档版本冲突已解决”一章的最后一点中写道：

> 删除文档的已解决版本。对于您不再需要的任何版本，调用 NSFileVersion 的 removeAndReturnError: 方法来回收文件的存储空间。文档修订保留在服务器上，直到您将其删除。

但在代码示例“清单 6-3”中，没有调用 removeAndReturnError: 方法。这种方法不是必需的还是我应该在哪里调用它？

谢谢你的帮助

利纳德

# .net - 移动布局中的基础按钮

> ID：15477804
> 
> 赞同：1
> 
> 时间：2013-03-18T13:16:42.290
> 
> 标签：.net, button, webforms, zurb-foundation

我有[这个 CRUD 应用程序](http://sqltkt.arielferro.com.ar/adm/)，用 .NET Web 表单和 Foundation Zurb 3 编写 如果您在台式电脑上查看完整尺寸的链接，您可以单击按钮并提交表单。但是，如果您减小 Chrome 浏览器的大小以获得移动布局，则该按钮根本不会执行任何操作。我删除了 JS 验证，在 JS 文件中进行了检查，但没有找到导致这种行为的原因。希望你能以某种方式帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:35:17.867

I solved this thing! It was an issue on my layout. I redesigned that part and Voila! It works now!

# java - 通过 sipdroid 进行视频通话

> ID：15477807
> 
> 赞同：3
> 
> 时间：2013-03-18T13:16:47.630
> 
> 标签：java, android, sip

我正在尝试通过 sipdroid 应用程序从一部 android 手机呼叫另一部 android。并且当我只进行音频通话时它工作正常，但是当我尝试进行视频通话时它不能正常工作并且我正在使用 Pbxes.com 服务器。我有自己的 wifi 服务器。当我们尝试与此服务器连接时，它连接良好，我可以进行音频通话...但是当我尝试进行视频通话时，它甚至在另一部手机上都没有打开..

所以请帮助我如何使用我自己的服务器进行视频通话。提前致谢

# php - 如何通过登录详细信息重定向到特定表

> ID：15477809
> 
> 赞同：0
> 
> 时间：2013-03-18T13:16:51.037
> 
> 标签：php, html

我正在创建一个登录页面，当医生登录时，他/她将根据登录凭据重定向到医生表，而当卫生专业人员登录时，他们将根据他们的凭据重定向到健康表。如何使用 sql 语句来做到这一点？这是我到目前为止适用于医生登录的内容：

```
<?php
    session_start();

    $username = $_POST['username'];
    $password = $_POST['password'];

    if ($username&&$password) {

        $connect = mysql_connect("localhost","root","") or die ("Could not connect");
        mysql_select_db("telestroke_database") or die ("Could not find database");

        $query = mysql_query("SELECT * FROM doctor_credential_table WHERE Doctor_Username ='$username'      AND Doctor_Password ='$password'") or die(mysql_error($connect));
        $numrows = mysql_num_rows($query);

        if ($numrows!=0) {
            while ($row = mysql_fetch_assoc($query)) {
                $dbusername = $row['Doctor_Username'];
                $dbpassword = $row['Doctor_Password'];
                $dbdoctorid= $row['Doctor_ID'];
            }

            $_SESSION['Doctor_Username']=$username;
            $_SESSION['Doctor_ID']=$dbdoctorid;
            header( 'Location: doctor_patients.php' );
        } else {
            echo "Incorrect Username and/or Password.<br/>
                    <br/><a href='Homepage.html'>Click here to return to Homepage</a>";
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:25:44.517

假设您的数据库中有某种标志，告诉检索的用户是医生或健康专家，那么它看起来像这样：

```
switch($row['professiontype']){
    case 'doc':
        header( 'Location: doctor_patients.php' );
        break;
    case 'hp':
        header( 'Location: healt_professional.php' );
        break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:31:32.150

如果医生和卫生专业人员都通过同一个表格登录，那么您*将不会*为每个表格设置单独的表格。您将有一个包含两种类型的中央用户表。

你可以有三张桌子。首先针对您的所有用户。二是针对不同的用户群体。第三个用于连接两者：

```
Users
id    username    password
1     John        -
2     Emma        -
3     Dave        -

Groups
id    name
1     Doctors
2     Health Professionals

UserGroups
userId    groupId
1         1
2         1
3         2 
```

然后，您将从 UserGroups 表中进行选择，以确定您的用户是什么类型。

```
select groupId from UserGroups where userId = $userId;

switch ($groupId)
    case 1:
        /* Do what is required for the Doctors group */
    case 2:
        /* Health professions group... */
    etc 
```

请注意，第三个表不是必需的，此信息可以简单地放在用户表中。

# gnuplot - GNUplot 在一个 xlabel 中连接 2 个宏

> ID：15477810
> 
> 赞同：0
> 
> 时间：2013-03-18T13:16:51.010
> 
> 标签：gnuplot

有没有办法将两个字符串宏连接成一个 xlabel，每个宏都有不同的字体？

```
xLabel1="Lorem ipsum dolor sit amet, consectetur adipiscing elit."
style1=" offset 0,2 font \"Gill Sans,12\""
xLabel2="\"A\" font \"Moon Phases,28\" offset 0,2"
label1="xLabel1 @style1"
label2="xLabel2"
bothLabels="@label1 @label2" 
```

label1 和 label2 在单独用于 xlabel 时都有效。
这是我无法弄清楚的最后一行；也许这做不到？
该字体中的“A”显示满月符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:57:55.847

在一个字符串中嵌套多个宏没有任何问题。

```
set macro
SET='set '
LABEL='label 1 @WHAT @WHERE'
WHAT="'bar' "
WHERE="at 0,1 front"
ALL=SET.LABEL
@ALL
show label 
```

但是，在这一点上，我也建议使用`eval`and `sprintf`。

# c++ - 将自定义大小的多维数组传递给函数

> ID：15477812
> 
> 赞同：1
> 
> 时间：2013-03-18T13:16:57.863
> 
> 标签：c++, arrays, multidimensional-array

我有已知`x`大小的数组（5），并且`y`取自变量，所以数组是这样的 -`array[5][y];`

现在我很困扰如何将它传递给函数，我不会编辑它，只是从中读取数据。

我想做这样的事情：

```
void someFunction(double **array) 
```

但我明白了

```
convert error: cannot convert `double (*)[((unsigned int)((int)n))]' to `double**' for argument `2' to `void findMax(int, double**, int)'| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:18:41.133

**对于数组 [5][x]**

不幸的是，您不能为像`double[5][]`. 您只能省略多维数组的第一个维度，而不是最后一个维度。

**对于数组 [x][5]**

你应该去`void someFunction(double array[][5], int size)`。然后你用 . 遍历元素`for (int i = 0; i < size; i++)`。

例子：

```
void someFunction(double array[][5], int size) {
    for (int k = 0; i < size; i++)
        for (int i = 0; i < 5; i++)
            std::cout << array[k][i] << std::endl;
}

double a[10][5];
// populate data
someFunction(a, 10); 
```

通常首选使用`std::`容器而不是原始 C 数组。

看看[`std::vector`](http://www.cplusplus.com/reference/vector/vector/)例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:42:41.323

如果你不使用 STL，你也可以这样做：

```
void someFunction(double **mat, const int Xsize, const int Ysize )
{
    for(unsigned int i = 0 ; i < Xsize ; ++i)
    {
        for(unsigned int j = 0 ; j < Ysize ; ++j)
        {
            std::cout << ((double *)mat + Ysize * i)[j] << "  " ;
        }
        std::cout << std::endl;
    }

    return ;
} 
```

并像这样调用函数：

```
int main(int argc, char** argv)
{
    double matrice[2][3] = {{1,2,3},{4,5,6}};
    someFunction( (double**)matrice, 2, 3 );
    return 1;
} 
```

# python - sqlalchemy 日期作为原始 sql 中的字符串

> ID：15477817
> 
> 赞同：2
> 
> 时间：2013-03-18T13:17:18.780
> 
> 标签：python, date, sqlalchemy

考虑下表：

```
class Employee(Base):
    __tablename__ = "t_employee"

    id = Column(Integer(20), Sequence('%s_id_seq' % __tablename__), primary_key=True)
    first_name = Column(String(30))
    last_name = Column(String(30))
    email = Column(String(50))
    start_date = Column(Date, default=datetime.now)
    end_date = Column(Date) 
```

如何在 sqlalchemy 的原始 sql 中选择使用字符串而不是日期？以下在 mysql 中有效，但在 Oracle 中无效：

```
session.query(Employee).\
    filter("end_date IS NULL OR end_date>='%s'" % datetime.now()).all() 
```

最好的情况是，如果我可以在处理 Date 或 DateTime 列时使用字符串或日期（可互换）（我尝试过 TypeDecorator 无济于事）

请注意，这个问题是指**原始**sql（我知道这可以使用谓词来完成）......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T13:24:08.580

不要使用字符串格式将值插入 SQL。在`datetime`对象的情况下，默认的字符串格式恰好适用于 MySQL，但这只是偶然和运气。

在这种情况下，不要使用原始 SQL 并让 SQLAlchemy 将 datetime 对象转换为后端数据库为您理解的内容：

```
from sqlalchemy import or_

session.query(Employee).filter(
    or_(Employee.end_date == None, Employee.end_date >= datetime.now())
).all() 
```

即使使用原始 SQL，我也会让 sqlalchemy 生成该 SQL 并使用绑定参数：

```
from sqlalchemy.sql.expression import bindparam, column
from sqlalchemy.types import DateTime
from sqlalchemy import or_

dtnow = bindparam('dtnow', datetime.now(), DateTime)
end_date = column('enddate', DateTime)

session.query(Employee).\
    filter(or_(end_date == None, end_date >= dtnow)).all() 
```

该过滤器表达式将转换为您的数据库后端的正确转义 SQL，无论后端可能是什么。当没有设置后端时，表达式变为：

```
>>> str(or_(end_date == None, end_date >= dtnow))
'enddate IS NULL OR enddate >= :dtnow' 
```

并且该`datetime.now()`值将在执行时作为 SQL 参数传递给后端数据库游标。

最后的手段是使用[`text()`type](http://docs.sqlalchemy.org/en/rel_0_7/core/expression_api.html#sqlalchemy.sql.expression.text)：

```
from sqlalchemy.sql.expression import bindparam, text

dtnow = bindparam('dtnow', datetime.now(), DateTime)
session.query(Employee).\
    filter(text('end_date is NULL or end_date >= :dtnow', bindparams=[dtnow])).all() 
```

否则我会避免完全混合原始 SQL 和 SQLAlchemy ORM。仅对数据库连接直接使用原始 SQL：

```
conn = session.connection()
conn.execute(text('SELECT * FROM t_employee WHERE end_date IS NULL OR end_date>=:dtnow'),
   dtnow=datetime.now()) 
```

# facebook - 如何让 Facebook 链接到我的网站而不是我的应用程序？

> ID：15477818
> 
> 赞同：0
> 
> 时间：2013-03-18T13:17:19.777
> 
> 标签：facebook, facebook-like

我已经在我的页面中实现了 Like 按钮 ( [https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/) ) 以及适当的元标记。Facebook 上的点赞文字现在是这样的：

```
[[User]] likes [[product_with_link]] on [[site]]. 
```

虽然 [[product_with_link]] 将我带到我喜欢的链接，但 [[site]] 将我带到 Facebook 应用程序，而不是网站的主 URL。单击此链接时，有没有办法让 Facebook 重定向到我的网站而不是我的 Facebook 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:48:11.650

这是使用社交插件时要求拥有应用程序的“限制”。当它们附加到应用程序 ID 时，它可以更容易地跟踪洞察力。

要启动并运行一个简单的解决方法，您所要做的就是在您的应用程序的主画布 URL 上添加一些与此类似的代码（示例在 PHP 中）。

```
echo "<script language='javascript'>";
echo "top.location.href = 'http://your.site.com/';";
echo "</script>"; 
```

现在，一旦用户登陆您的应用程序的画布，JavaScript 重定向就会将他们发送到您网站上的相应页面。

请注意，直接访问您的画布 URL 的用户也会发生此重定向。

# php - PHP如何编码（转义）@，以进行电子邮件验证？

> ID：15477824
> 
> 赞同：0
> 
> 时间：2013-03-18T13:17:48.397
> 
> 标签：php, escaping

我收到此错误：

> 错误号：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“@gmail.com”附近使用正确的语法

这是代码：

```
$email = $this->input->post('email');

                $checkEmail = $this->crud_model->retrieve_where('employee', 'email', 'email', $email); 
```

crud_model：

```
function retrieve_where($table, $table_id, $table_name, $value) {
        $table = $this->db->query('Select * FROM ' . $table . ' Where ' . $table_id . ' = ' . $value);
        $records = array();
        foreach ($table->result() as $row) {
            $records[] = $row->$table_name;
        }
        return $records;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:26:07.720

您尝试执行的查询是：

> SELECT * FROM Email WHERE Email = email@email.com

在这种情况下，电子邮件是一个字符串，并且需要引用一个字符串。

```
function retrieve_where($table, $table_id, $table_name, $value) {
    $table = $this->db->query("Select * FROM " . mysql_real_escape_string($table) . " Where " . mysql_real_escape_string($table_id) . " = '" . mysql_real_escape_string($value) ."'");
    $records = array();
    foreach ($table->result() as $row) {
        $records[] = $row->$table_name;
    }
    return $records;
} 
```

不要忘记使用`mysql_real_escape_string()`. 它将保护您免受注射。

# android-contentprovider - 如何在没有 CursorAdapter 的情况下获取光标更新通知？

> ID：15477830
> 
> 赞同：1
> 
> 时间：2013-03-18T13:18:11.120
> 
> 标签：android-contentprovider, android-cursor, contentobserver

我正在编写一个`Fragment`使用加载器来获取`Cursor`有关地图上各种事物位置的包含数据的代码。我继承了代码，按与设备或搜索位置的距离对这些位置进行排序；距离度量并不是在 SQL 中特别容易实现的东西，所以`CursorAdapter`我不是使用（和其他地方一样）从 中加载数据`Cursor`，然后再对其进行排序。

我只有一个问题：当 Web 服务返回一组新的位置时（例如，在第一次加载时），列表没有更新。我在`ContentObserver`上注册了一个，当我打电话给它时`Cursor`它*被*击中；只是我从原始负载中存储的计数仍然为零。`notifyChange(...)``ContentProvider``Cursor`

回调和`ContentObserver`看起来像这样：

```
private LoaderCallbacks<Cursor> mCallbacks = new LoaderCallbacks<Cursor>() {
    public void onLoaderReset(Loader<Cursor> loader) {  
        mLoaderCreated = false;
        mCursor.unregisterContentObserver(mObserver);
        mCursor = null;
    }
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        if(cursor!=mCursor) {
            if(mCursor!=null)
                mCursor.unregisterContentObserver(mObserver);
            cursor.registerContentObserver(mObserver);
            mCursor = cursor;
            if(cursor.isClosed()) {
                getLoaderManager().restartLoader(mFragmentId, null, mCallbacks);
                return;
            }

        }
        mDataModel.populate(cursor);
    }
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        mLoaderCreated = true;
        triggerServicesFeed();
        CursorLoader cursorLoader = null;
        if(id == mFragmentId) {
            cursorLoader = new CursorLoader(getActivity(),
                FerrariVertuContentProvider.SERVICES_URI,
                null, null, null,null);
        }
        return cursorLoader;
    }
};

private ContentObserver mObserver = new ContentObserver(null) {

    public void onChange(boolean selfChange, android.net.Uri uri) {
        onChange(selfChange);
    };

    public void onChange(boolean selfChange) {
        if(mCursor.isClosed()) {
            mCursor.unregisterContentObserver(this);
            mCursor = null;
        } else {
            getActivity().runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    //mCursor still reports zero on first run
                    mDataModel.populate(mCursor);
                }
            });
        }
    };
}; 
```

我只知道`CursorAdapter`更新时会`Cursor`更新，而且我会在我期望的时候收到更新事件，这让我认为流程的这个阶段至少是有效的。我如何才能`mCursor`给我新数据，或者获得`Cursor`代表新数据的新数据？

# jplayer - jPlayer - 如何连续播放曲目？

> ID：15477831
> 
> 赞同：-1
> 
> 时间：2013-03-18T13:18:15.290
> 
> 标签：jplayer

无法弄清楚 - 我只是希望它在歌曲完成后继续播放下一首曲目..自动播放设置为true..看不出这是什么？

[http://bavanandan.co.uk/press/](http://bavanandan.co.uk/press/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-19T17:41:03.177

（我知道，它很旧，但我自己只是在寻找解决方案，偶然发现了这个。）

怎么样

```
 var myPlaylist = new jPlayerPlaylist( {
                        jPlayer: "#jquery_jplayer_1",
                        cssSelectorAncestor: "#jp_container_1" },
                        [],
                        {
                            swfPath: "wolf-jplayer/assets/js/src",
                            wmode: "window",
                            ended: function() {
                                // continouos play
                                var i = i+1;
                                myPlaylist.play(i);
                            }
                        }); //jPlayerPlaylist 
```

# javascript - 如何在 jQuery 中为“更改”事件添加属性

> ID：15477834
> 
> 赞同：1
> 
> 时间：2013-03-18T13:18:20.197
> 
> 标签：javascript, jquery, events, javascript-events

我有一个`<select>`盒子：

```
<select id="myselect">
   <option value="1">one</option>
   <option value="2">two</option>
   <option value="3">three</option>
</select> 
```

我需要修改它的`change`事件，所以`val_after_change`无论事件是如何触发的，它都会有一个属性。

```
// THIS FUNCTION CANNOT BE MODIFIED
$('#myselect').change(function(e){
    // this should alert select value after change
    alert(e.val); 
}); 
```

我知道，在这里我可以`alert $(this).val()`，但我的真实示例更复杂且需要`e.val`。我知道这适用于[select2](http://ivaynberg.github.com/select2/)，但我无法理解他们的源代码。

如何修改事件？我需要做一个包装器还是什么？任何帮助都将不胜感激。

**编辑：**

我正在一个库上制作一个包装器，它`selects`使用`e.val`属性，所以我不能修改`change`事件本身。触发事件时，我需要该属性**已经存在。**像这样，但将其设为默认行为：

```
e = jQuery.Event('change', {val: 2});
$('#myselect').trigger(e); 
```

[提琴手](http://jsfiddle.net/yHfrb/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:36:44.433

我不知道我明白了，这是一个镜头：

```
(function ($){
   // keep a copy of the original "select2" function
   var lib_select2 = $.fn.select2;

   // wrap it into a call which 
   // first adds a listener to add the value as a property of the event,
   // then adds whatever extra stuff the library adds
   $.fn.select2 = function(){
        this.change(function(e){
            e.val = this.value;
        });

        lib_select2.apply(this, arguments);
   }
})(jQuery) 
```

# visual-studio-2010 - 工具=>选项中缺少的设置在哪里？

> ID：15477835
> 
> 赞同：1
> 
> 时间：2013-03-18T13:18:26.470
> 
> 标签：visual-studio-2010

我正在尝试将 Beyond Compare 与 VS.net 2010 Ultimate 集成，我发现了这篇[文章](https://stackoverflow.com/questions/4466238/how-to-configure-visual-studio-to-use-beyond-compare)，但我的 Tools =>Options 对话框中几乎没有任何内容。例如，没有“项目和解决方案”，也没有源代码控制节点。我假设我缺少一些基本的东西，那么其他选项节点在哪里？

这就是我所看到的：

![这是我的屏幕截图](../Images/edb9fa40aa6599eb28669903c54c0e02.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T11:18:38.353

单击“显示所有设置”复选框。它将解决问题。

# java - Java 7 中的集成测试文件系统相关代码

> ID：15477837
> 
> 赞同：1
> 
> 时间：2013-03-18T13:18:29.613
> 
> 标签：java, unit-testing, integration-testing

我有一种情况，我正在修改 Java 5 应用程序，我想添加额外的测试（与集成测试接壤的单元测试）以确保一切正常。我需要将应用程序与操作系统提供的实际文件系统完全分离，然后我想查看文件访问模式和新文件内容。我可以在完全受控的环境中在 Java 7 或任何其他版本中运行单元测试，我只需要最终的应用程序与 Java 5 兼容，即我需要像可以使用的代码一样`new File(...)`。

这是否可以在不使用黑魔法（字节码操纵模拟框架等）的情况下完成，例如通过重新配置 Java 7 或在幕后添加合适的提供程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-29T12:34:47.803

确保您可以使用`-Xbootclasspath`选项模拟您的 File 类。但是您必须考虑许可问题，并且恕我直言，它仍然不会让您进行所有必需的测试。

如果文件系统操作对您的应用程序很重要，您应该为文件系统访问创建一个专用的抽象层。它会以某种方式复制 java IO api，但允许您测试应用程序如何与 IO api 交互。

但是，如果您使用一些先进的技术或者您需要高便携性，那么这对您来说是不够的。正如 Joachim 所说，File 类非常依赖于操作系统和文件系统。当你遇到符号链接、acls、大写名称等时，它在 linux、windows 上的行为会有所不同。如果你想测试这种行为，事实上，你必须测试基础设施而不是应用程序。因此，您应该考虑在许多不同环境（可能使用虚拟机）上进行集成测试，而不是单元测试

# c# - #SNMP - 简单的 GET

> ID：15477839
> 
> 赞同：1
> 
> 时间：2013-03-18T13:18:33.460
> 
> 标签：c#, sharp-snmp

我一直在看#SNMP，它似乎是 C# 中最完整的 SNMP 库。但是，我发现文档非常缺乏，仅指向源代码，完全没有注释:-)

现在我不是专业开发人员，所以这可能来自我，而且专业开发人员肯定可以通过查看未注释的代码来理解复杂的 API。所以我正在寻找“获取指定 OID 的值”的简单实现。

任何人都能够提供使用该库来轮询设备所需的最少代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T11:17:40.000

似乎更合适的库是[SNMP Sharp Net](http://www.snmpsharpnet.com/ "SNMP 锐网")。与#SNMP 相比，它的完整示例和更多功能的记录要好得多。

# javascript - 使用 apache 对 css 和 javascript 文件进行版本控制

> ID：15477841
> 
> 赞同：2
> 
> 时间：2013-03-18T13:18:39.860
> 
> 标签：javascript, css, apache, version-control

每当我更新我的网站以包含新功能时，我显然需要修改现有的 css 和 js 文件。由于浏览器缓存 css 和 js 文件，该网站看起来很糟糕。我可以使用 .htaccess 文件在每个 css 和 js 文件的末尾附加一些值，以便每次我的网站更新时浏览器都被迫重新加载这些文件。

# php - 良好且安全的表单验证

> ID：15477846
> 
> 赞同：-1
> 
> 时间：2013-03-18T13:18:51.123
> 
> 标签：php, forms

使用 PHP 验证表单的最佳和最安全的方法是什么？例如：长度、电子邮件、空白、特殊字符等。

为此使用 filter_var 是否安全？或者我应该手动将它们全部定义在一个函数中。或者有没有其他方法。

抱歉，我只是想确定一下，因为我在构建表单时经常遇到这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:25:22.543

验证应该在客户端和服务器端都进行。客户端验证使您的服务器端脚本遇到更少（或可能没有）错误。这是可取的，因为通常您不喜欢在服务器端出现太多错误。

话虽如此，您可以通过多种方式使用 PHP 验证您的输入。这取决于上下文。例如，检查空性（就像你自己说的那样），或者某些输入是否是数字，检查给定值的长度（例如最小长度可能适用），或者电子邮件地址是否真的是电子邮件地址！filter_var() 可能并不总是足够的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:27:51.187

您可以在服务器端使用正则表达式。但我会考虑使用 javascript 来验证客户端的表单字段。您不想从服务器来回获取信息只是为了检查字段是否正常，这将消耗无用的服务器时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:28:02.927

我认为最好的验证过程是用正则表达式验证数据。您可以定义需要多少个字符（至少或最多），允许或不允许哪些字符，甚至可以定义数据的确切格式。

验证必须在双方进行。服务器端和客户端。您在客户端进行验证并简化服务器端的工作。即使您在客户端进行验证，心怀恶意的人也可以破解您的代码。服务器端也必须进行验证。

filter_var 函数也很有用。我用它来验证电子邮件地址。

# java - 为什么不是两个不同的 AsyncTask 一个执行两次？

> ID：15477849
> 
> 赞同：1
> 
> 时间：2013-03-18T13:18:59.437
> 
> 标签：java, android, android-asynctask

所以我有代码向服务器发送请求并获得响应。响应取决于我发送到服务器的参数集。但由于某种原因，我得到了相同的结果。这是一个代码：我调用`sendDashboardRequest`了两组不同的参数：

```
 LinkedHashMap<String, Object> serverParameters = new LinkedHashMap<String, Object>();
serverParameters.put("user_id", result.get("user_id"));
serverParameters.put("limit", Integer.valueOf(1000).toString());
serverParameters.put("type", Integer.valueOf(1).toString());
sendDashboardRequest(serverParameters);
 serverParameters.put("type", Integer.valueOf(2).toString());
sendDashboardRequest(serverParameters);//Executes only this AsyncTask twice! 
```

`sendDashboardRequest`这是启动新 AsyncTasks的方法的代码：

```
public void sendDashboardRequest(LinkedHashMap<String, Object> params) {

    new AsyncTask<LinkedHashMap<String, Object>, Void, LinkedHashMap<String, Object>>()
    {    
         NetworkOp lowLevelOps = new NetworkOp();
        @Override
        protected LinkedHashMap<String, Object> doInBackground (LinkedHashMap<String, Object>... params)    
       { 

        return  lowLevelOps.executeCommand(DASHBOARD_COMMAND, params[0]);
        }
        protected void onPostExecute(LinkedHashMap<String, Object> result)
        {   
                        //And here I gave the same result!But parameters which I send to the server are different!
        }
    }.execute(params);
} 
```

最有趣的是，当我创建两个具有相同主体的不同方法并为不同的参数集调用每个方法时，一切正常，两个不同的 AsyncTasks 启动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T13:22:18.760

`LinkedHashMap`您在两个请求中都发送相同的内容。由于请求是在后台线程中处理的，因此时间将不可预测，并且您不能保证第一个请求的后台线程将在您发出第二个请求之前执行。在这种情况下，偶然地，在第一个请求执行时，第二个请求中的修改值已经在映射中。

您应该为每个请求使用不同的映射，或者进行更改`sendDashboardRequest`以复制所需的数据，而不是依赖传入的映射保持不变。

# java - 从 Shell 脚本启动 Java 服务器

> ID：15477855
> 
> 赞同：0
> 
> 时间：2013-03-18T13:19:06.700
> 
> 标签：java, sockets, shell, shell-exec

我使用 Java 套接字开发了一个服务器/客户端应用程序。如此代码所示，我的服务器始终在运行。

```
while(SERVER_STATUT) //Server Statut is always true unless the client launches the stop script
    {
        try {

            Socket sockcli = sockserv.accept();

        } catch (IOException e) 
        {
            e.printStackTrace();
        }
    } 
```

客户端与服务器交互并向服务器发送消息。我的问题是我想要使用脚本外壳启动和停止服务器。当客户端想要停止服务器时，他调用停止脚本。当服务器停止时，他可以通过调用启动脚本再次启动它。

启动和停止脚本存储在 .sh 文件中。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:25:00.370

你需要2个接口。
一个接口用于客户端连接到您的服务器，例如在端口`8080`
另一个是从您的用户接收停止，例如在端口`8081`
所以您停止脚本只会向端口中的服务器发送请求以`8081`停止您的服务器（本质上是更新`SERVER_STATUT`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:31:41.633

我无法为您编写完整的工作代码，但我可以说出一些想法。

*   如果有帮助，您可能想看看现有的东西。`jboss/tomcat/apache...`启动/停止脚本

*   基本思想是，当你**第一次**`start.sh`执行时，脚本会创建一个 tmp 文件（例如）来存储 processId。如果此文件存在，则意味着您的服务器已经启动，如果用户多次启动，您可能会显示错误消息**`yourapp.pid``start.sh`**

***   同样使用该 pid 文件，您可以获取服务器的 processId，并从您的 this 中将其终止（不是停止服务器的优雅方式），`shutdown.sh`这可能是 a`shutdown.sh -f`或`killforce`. 更好的方法是，您的服务器侦听特定端口以处理关闭。例如存储一些临时文件，或者根据您的逻辑需要进行一些预先停止处理。

    *   实际上，您只需要一个脚本，例如`myConsle.sh`，在这个单个文件中实现我上面所说的内容，并使用“ `switch case`like”结构，这样您就可以：** 

 **`myConsole.sh start|restart|stop|forcekill|status`管理您的服务器。

希望能帮助到你**

# python - 平均值取决于相对于第二个变量的分箱

> ID：15477857
> 
> 赞同：5
> 
> 时间：2013-03-18T13:19:08.357
> 
> 标签：python, numpy

我正在使用 python / numpy。作为输入数据，我有大量的值对`(x,y)`。我基本上想绘制，即某个数据仓`<y>(x)`的平均值。目前我使用一个普通的循环来实现这一点，这非常慢。`y``x``for`

```
# create example data
x = numpy.random.rand(1000)
y = numpy.random.rand(1000)
# set resolution
xbins = 100
# find x bins
H, xedges, yedges = numpy.histogram2d(x, y, bins=(xbins,xbins) )
# calculate mean and std of y for each x bin
mean = numpy.zeros(xbins)
std = numpy.zeros(xbins)
for i in numpy.arange(xbins):
    mean[i] = numpy.mean(y[ numpy.logical_and( x>=xedges[i], x<xedges[i+1] ) ])
    std[i]  = numpy.std (y[ numpy.logical_and( x>=xedges[i], x<xedges[i+1] ) ]) 
```

是否有可能为它提供一种矢量化的写作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-18T13:33:37.277

你把事情不必要地复杂化了。您需要知道的是，对于 中的每个 bin `x`，什么是和`n`，该 bin 中的值的数量、这些值的总和以及它们的平方和。你可以得到这些：`sy``sy2``y``x``y`

```
>>> n, _ = np.histogram(x, bins=xbins)
>>> sy, _ = np.histogram(x, bins=xbins, weights=y)
>>> sy2, _ = np.histogram(x, bins=xbins, weights=y*y) 
```

从那些：

```
>>> mean = sy / n
>>> std = np.sqrt(sy2/n - mean*mean) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:50:36.527

如果你可以使用熊猫：

```
import pandas as pd
xedges = np.linspace(x.min(), x.max(), xbins+1)
xedges[0] -= 0.00001
xedges[-1] += 0.000001
c = pd.cut(x, xedges)
g = pd.groupby(pd.Series(y), c.labels)
mean2 = g.mean()
std2 = g.std(0) 
```

# android - 如何查询特定日期范围的 android 日历事件？

> ID：15477859
> 
> 赞同：8
> 
> 时间：2013-03-18T13:19:17.720
> 
> 标签：android, events, calendar, selection

我正在查询 android 中的事件表以获取事件。

```
String[] projection = new String[] { "calendar_id", "title", "description",
                    "dtstart", "dtend", "eventLocation" };

Cursor cursor = cr.query(Uri.parse("content://com.android.calendar/events"),
                    projection,
                    null,
                    null,
                    null); 
```

这将返回所有事件。但现在我只想要特定持续时间的事件，比如 2013 年 4 月 3 日到 2013 年 7 月 3 日。如何使用`selection`和`selectionArgs[]`？我试过这个

```
String selection = "((dtstart <= ?) AND (dtend >= ?))";
String[] selectionArgs = new String[] {startString, endString}; 
```

但它没有返回任何东西。我的疑问是 1\. where 子句会起作用吗？因为，startDate 和 endDate 先转换为 long（毫秒），然后转换为 String，然后存储在表中。那么如何比较字符串的长值。sqlite中没有`toNumber()`函数。2\. 如果我通过了，`selectionArgs`那么应该采用哪种格式？`startString``endString`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T14:02:24.270

`startString`&`endString`应该以毫秒为单位传递。尝试使用：

```
Calendar c_start= Calendar.getInstance();
c_start.set(2013,2,4,0,0); //Note that months start from 0 (January)   
Calendar c_end= Calendar.getInstance();
c_end.set(2013,2,7,0,0); //Note that months start from 0 (January) 
```

另外，我认为你的逻辑是相反的，日期范围应该是这样的：

```
String selection = "((dtstart >= "+c_start.getTimeInMillis()+") AND (dtend <= "+c_end.getTimeInMillis()+"))"; 
```

# jpa - JPA 多外键

> ID：15477860
> 
> 赞同：0
> 
> 时间：2013-03-18T13:19:19.910
> 
> 标签：jpa, ejb

我正在做一个 EJB/JPA 项目。

我有两张桌子： `BusinessOwner`和`Clients`。

这些表中的每一个都有一个超类，`Person`.

我有一张桌子，可以保存他们的所有交易，包括`BusinessOwner`和`Clients`。在 Transaction 表中，我有一个字段`UserID`，它指向`primary key`和`BusinessOwners`，`Clients`作为`foreign key`。

我如何将这些映射到我的实体类中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:34:41.163

您应该能够拥有从 Person 到 Transaction 的 OneToMany 和从 Transaction 到 Person 的 ManyToOne，但这取决于您如何映射继承？

# extjs - 如何在 ExtJS 4 中创建超链接？

> ID：15477861
> 
> 赞同：10
> 
> 时间：2013-03-18T13:19:21.327
> 
> 标签：extjs, extjs4, dom-events, extjs4.1, extjs-mvc

我在 ExtJS 4 中工作。我一直被困在必须在 ExtJS 4 中创建超链接的地步。我一直在搜索很多以在 ExtJS 4 中创建超链接，但我没有得到任何解决方案。实际上我必须创建一个超链接，单击该链接后，我将在 ExtJS 4 中显示另一个页面。实际上我也没有在 ExtJS 4 中获得该事件。如何在 ExtJS 4 中使用超链接。我正在使用这种方式.. .

```
{
      xtype: 'panel',
      html:'<a href="second.js">Second page</a>',
} 
```

请给我一些建议......

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-18T13:30:46.657

我会`autoEl`为此使用一个。

```
{
    xtype: 'component',
    autoEl: {
        tag: 'a',
        href: 'http://www.example.com/',
        html: 'Example.com'
    }
} 
```

这是一个[小提琴](http://jsfiddle.net/johanhaest/DfbKh/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-16T23:20:00.357

您还可以使用标签组件的 html 属性并从那里调用控制器函数。例子：

```
{xtype: 'label',
html: 'bla bla? <a href="#" onClick="javascript:appName.app.getController(\'myController\').showRegistration();">Register</a>'
} 
```

# lotus-notes - Java 代理：- 注释错误：JVM：尝试检索 Java 代理附件失败

> ID：15477864
> 
> 赞同：0
> 
> 时间：2013-03-18T13:19:29.347
> 
> 标签：lotus-notes, alfresco, javaagents

在 Notes 客户端中使用 Java 代理时遇到问题。我需要从 Notes 客户端备忘录表单中的特定路径上传文件。我正在使用 Java 代理。它使用 Alfresco 的 API 将文件上传到 alfresco 服务器。它在独立的 Java 应用程序中运行良好。它也是第一次在 Lotus Notes 中正常工作。但是，当我要第二次更新或运行任何第二次导入了 JAR 文件的 Java 代理时，它会引发以下错误：

`Notes Error : JVM : Attempt to retrieve java agent attachments failed.`

`jvm/lib/ext`我在服务器路径中添加了必要的 jar 文件。重新启动服务器后，它第一次工作，然后第二次失败。任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:41:43.513

第二次运行的“尝试检索 Java 代理附件失败”错误几乎可以肯定是由内存耗尽引起的。这意味着在第一次运行时，您的代理会占用大量内存并且无法释放它。

如果您的代码正在访问 lotus.domino.* 类中的大量对象并且未能调用它们的 recycle() 方法，则可能会发生这种情况。（每个这样的对象都会分配一些非 JVM 内存，这些内存不会被 JVM 的垃圾收集器释放。调用 recycle() 方法来释放内存是必不可少的。通常，该`finally`子句是这样做的好地方。）

我对 Alfresco API 一无所知，但如果使用不当，它也可能会泄漏内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T23:05:40.190

如果 Java 代理或 Java 脚本库包含 JAR 文件，则存在内存泄漏的[已知问题。](http://www-01.ibm.com/support/docview.wss?uid=swg1LO66223)越大，您的服务器/amgr 崩溃越快。自 Java 代理开始以来未修复 :-(。

常见的解决方法是将所有 JAR 放入 jvm/lib/ext 文件夹，正如@Simon O'Doherty 提到的那样。

现代方法是使用 XAgents 或 servlet。

# facebook - 如何在facebook c# sdk中调用friends.add方法

> ID：15477865
> 
> 赞同：0
> 
> 时间：2013-03-18T13:19:32.313
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

如何在facebook c# sdk中调用friends.add方法以下是我的代码，它不起作用

```
 var fb = new FacebookClient(accessToken);

        dynamic parameters = new ExpandoObject();

        parameters.appId = "888888888888";
        parameters.message = "sample Friend Request";
        parameters.friendID = "888888888888";
        parameters.method = "friends.add";

        dynamic id1 = fb.Post(parameters); 
```

# c - ld.exe 已停止工作

> ID：15477866
> 
> 赞同：0
> 
> 时间：2013-03-18T13:19:33.617
> 
> 标签：c, ld

我正在使用 Dev-C++ V(4.9.9.2) 并尝试构建一个解决方案来执行一些基于系统的编程，特别是调用**Windows Service Manager**。现在，每当我尝试构建我的应用程序时，它都会停止并显示一条消息 **ld.exe 已停止工作**并且应用程序停止。我不明白为什么当其他一切都到位时会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:24:03.230

不要使用 Dev-C++。它是古老的，它的编译器也是如此。

使用像[http://mingw-w64.sourceforge.net/](http://mingw-w64.sourceforge.net/)这样的现代编译器环境，或者使用更新的 MinGW(-w64) 编译器，如 Qt Creator、CodeBlocks 甚至[http://sourceforge 获取 IDE。 net/projects/orwelldevcpp/](http://sourceforge.net/projects/orwelldevcpp/)等...

# ldap - 有没有什么好方法可以将 OpenLDAP 或 ApacheDS 服务器与 JMS 集成以将 LDAP 数据库修改传播到另一个服务？

> ID：15477869
> 
> 赞同：2
> 
> 时间：2013-03-18T13:19:35.127
> 
> 标签：ldap, jms, message-queue

有没有什么好方法可以将 OpenLDAP 或 ApacheDS 服务器（或者可能是另一个开源 LDAP 服务器）与 JMS 集成以将 LDAP 数据库修改传播到另一个服务？

基本上我需要有 LDAP 服务器集群（几个具有主到主复制的实例）和另一个独立的 Java 应用程序，通过 JMS 服务器（例如 ActiveMQ）连接，以便：

1.  对 LDAP 数据结构的所有更改都会发送到 Java 应用程序。
2.  Java 应用程序。可以通过 JMS 服务器向 LDAP 数据库发送消息以更新 LDAP 数据

我发现有一种方法可以为 ApacheDS 设置 JMS 复制（[https://cwiki.apache.org/DIRxSRVx11/replication-requirements.html#ReplicationRequirements-GeneralRequirements](https://cwiki.apache.org/DIRxSRVx11/replication-requirements.html#ReplicationRequirements-GeneralRequirements)），但我怀疑它是否能以防万一我们有一个由几个 ApacheDS 主节点 + 一个 JMS 复制节点组成的集群，用于将所有修改发送到集群。

更新：描述 ApacheDS 的 JMS 复制的页面原来是 5 耳朵旧的，所以目前我知道的 ApacheDS 中唯一的复制方式是基于 LDAP 协议的复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:16:28.097

There IDM products that will perform what you are asking about. I know NetIQs IDM products works well with JMS.

OpenLDAP and ApacheDS have a changeLog that you could use to determine the changes made. You could then write some code to send the changes to JMS Queue.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T02:43:55.363

我不能说 ApacheDS，但 OpenLDAP 已经包含一个成熟的复制系统，大约有六种不同的配置方式；*换句话说，您可以在没有*Java 和 JMS的情况下做得很好，而且效率更高。

# java - 自定义 java 类中的默认 Get 方法

> ID：15477874
> 
> 赞同：2
> 
> 时间：2013-03-18T13:19:43.757
> 
> 标签：java, getter-setter

java n00b 在这里。

我有一个这样定义的自定义数据类型：

```
public class MyData{
    int value;
    int type;
    String name;

    public MyData(int newValue, int newType, string newName)
    {
        value = newValue;
        type  = newType;
        name  = newName;
    }
} 
```

当我调用此类的实例时，我希望它评估 value 属性，如下所示：

```
myData dataInstance = new myData(100,3,"customData");
System.out.println(dataInstance); // should print "100" 
```

这可以实现吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T13:21:58.960

当您使用`System.out.println`对象时，它将调用该`toString()`方法 - 所以您只需要覆盖它：

```
@Override public String toString() {
    return String.valueOf(value);
} 
```

另请注意，您应该更具体地使用您的术语。当你写道：

> 当我调用这个类的一个实例时

……这并不意味着什么。您不调用实例 - 您调用实例*上*的方法。在这种情况下，方法是`toString`。

# cordova - 以编程方式重新启动我的 Phonegap 应用程序

> ID：15477887
> 
> 赞同：36
> 
> 时间：2013-03-18T13:20:28.570
> 
> 标签：cordova, restart

如何以编程方式重新启动我的 phonegap 应用程序？我通过 navigator.app.exitApp() 轻松退出应用程序，但我希望它立即重新启动。

我需要这个的原因是，在用户从选择框菜单中选择他的用户语言后，我必须重新启动它。i18n 在用户更新他的语言选择后立即触发，除了一页上的 5 个按钮和另一页上的段落。这 5 个项目保留在以前的语言中（语言选择菜单布局也由于某种原因被完全破坏），但是当我重新启动应用程序时，它们都使用正确的语言。要么i18n进程有一个非常复杂的问题，要么我可以通过强制重启后门解决它。

泰，坚果

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-27T00:25:27.877

我使用以下内容：

```
location.reload(); 
```

对我来说是一种享受。

保罗

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-18T17:22:19.250

试试这个

```
navigator.app.loadUrl("file:///android_asset/www/index.html", {wait:2000, loadingDialog:"Wait,Loading App", loadUrlTimeoutValue: 60000}); 
```

巴克里

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-06-15T13:48:26.467

这适用于 iOS 和 Android（至少在 2016 平台版本中）。它也适用于 SPA 应用程序。

```
// keep startup url (in case your app is an SPA with html5 url routing)
var initialHref = window.location.href;

function restartApplication() {
  // Show splash screen (useful if your app takes time to load) 
  navigator.splashscreen.show();
  // Reload original app url (ie your index.html file)
  window.location = initialHref;
} 
```

# c# - 在 C# 中反序列化由 Java 中的 XStream 生成的 XML

> ID：15477888
> 
> 赞同：0
> 
> 时间：2013-03-18T13:20:30.703
> 
> 标签：c#, android, xml, serialization, xstream

我的应用程序有 2 个部分，一个 android 客户端和一个用 c# 编码的 windows 打印服务器。

我在 java 中使用 Xstream 将我的对象转换为 XML（在 android 中）。这是其中的一部分：

```
<ROOT>
  <id>1</id>
  <serial>92000</serial>
  <date>2013/2/15</date>

  <ITEMS>

    <ITEM>
      <name>/**SOMETHING**/</name>
      <idd>/**SOMETHING**/</idd>
      <pd>/**SOMETHING**/</pd>
      <ed>/**SOMETHING**/</ed>
    </ITEM>
    <ITEM>
      <name>/**SOMETHING**/</name>
      <idd>/**SOMETHING**/</idd>
      <pd>/**SOMETHING**/</pd>
      <ed>/**SOMETHING**/</ed>
    </ITEM>
    <ITEM>
      <name>/**SOMETHING**/</name>
      <idd>/**SOMETHING**/</idd>
      <pd>/**SOMETHING**/</pd>
      <ed>/**SOMETHING**/</ed>
    </ITEM>

  </ITEMS>

</ROOT> 
```

如您所见，我有 2 种对象类型，一种 ROOT 对象类型，以及名为 ITEMS 的第二种对象类型的嵌套列表。我可以读取 ROOT 对象的名称、序列号和日期，但对于 ITEMS 对象的嵌套列表，它总是返回 null。

c# 中 Root 类的类是：

```
[XmlRoot("ROOT")]
    public class ROOT_CLASS
    {

        [XmlElement("id")]
        public string idVar{ get; set; }

        [XmlElement("serial")]
        public string serialVar{ get; set; }

        [XmlElement("date")]
        public string dateVar{ get; set; }

        [XmlArray("ITEMS")]
        [XmlArrayItem("ITEM")]
    public List<NESTED_CLASS> oi { get; set; }

    } 
```

这是嵌套的对象类：

```
[XmlRoot("ITEM")]
    public class NESTED_CLASS
    {
        [XmlElement("name")]
        public string nameVV; { get; set; }
        [XmlElement("idd")]
        public string iddVV; { get; set; }
        [XmlElement("pd")]
        public string pdVV; { get; set; }
        [XmlElement("ed")]
        public string edVV; { get; set; }

    } 
```

好的，我怎样才能从这个 xml 中反序列化 NESTED_CLASS 列表？正如我所说，我总是从中得到一个空值。请帮我。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T13:36:08.723

使用 XmlArray 属性

```
[XmlRoot(ElementName = "ROOT")]
public class Root
{
    public int id { get; set; }
    public int serial { get; set; }
    public string date { get; set; }

    [XmlArray(ElementName = "ITEMS")]
    [XmlArrayItem("ITEM")]
    public List<RootItem> Items { get; set; }
}

public class RootItem
{
    public string name { get; set; }
    public string idd { get; set; }
    public string pd { get; set; }
    public string ed { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:01:53.503

您也可以使用 xsd.exe 生成 C# 类，而不是手动执行此操作。如果此 xml 随时间发生变化，这可能会更容易、更快；而且您不必担心现在遇到的问题。

有关如何执行此操作的示例，请参阅[从 XML 生成 C# 类。](https://stackoverflow.com/questions/4203540/generate-c-sharp-class-from-xml)

请注意，如果您正在处理非常大的 xml 文件，则此方法可能不是最好的方法，因为它将整个 xml 加载到内存中。如果是这种情况，您可能希望改用[这种](http://ludwigstuyck.wordpress.com/2013/02/26/parsing-large-xml-files/)方法。

# android - 将文件发送到电子邮件 ID？

> ID：15477893
> 
> 赞同：1
> 
> 时间：2013-03-18T13:20:49.950
> 
> 标签：android

我正在尝试从 sdcard“VCFFiles”中的特定文件夹发送文件。我做的一切都是正确的。当我运行这个应用程序时，它再次工作，它显示强制关闭。我在项目中所做的是我制作了 5 个单选按钮并将它们作为文件列在“VCFFiles”文件夹中的文本。当单击任何单选按钮时，相应的 vcf 文件将被发送到单击发送按钮时在编辑文本中输入的电子邮件中。以下是我的代码：

```
public class SendActivity extends Activity{
    private static final int PICK_IMAGE = 1;
    EditText email;
    TextView add_manage;
    Button send;
    RadioGroup vcfgroup;
    RadioButton vcfButton;
    String filepath="";
    static File filevcf;
    static Context mContext;
    RadioButton vcf1;
    RadioButton vcf2;
    RadioButton vcf3;
    RadioButton vcf4;
    RadioButton vcf5;
    ProgressDialog dialog;
    String success;
    String message;
    String response;
    String data;
    File f;
    String radio;
    ArrayList<String> array;
//  String state = Environment.getExternalStorageState();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.send);

        email = (EditText)findViewById(R.id.emailid);
        send = (Button)findViewById(R.id.send);
        add_manage = (TextView)findViewById(R.id.add_manage);
        vcfgroup = (RadioGroup)findViewById(R.id.vcfgroup);
        vcf1 = (RadioButton)findViewById(R.id.vcf1);
        vcf2 = (RadioButton)findViewById(R.id.vcf2);
        vcf3 = (RadioButton)findViewById(R.id.vcf3);
        vcf4 = (RadioButton)findViewById(R.id.vcf4);
        vcf5 = (RadioButton)findViewById(R.id.vcf5);
        send = (Button)findViewById(R.id.send);
        // get selected radio button from radioGroup

        radio = vcf1.getText().toString();

        //get file names and set it in radio buttons
        if(!isExternalStorageAvailable() || isExternalStorageReadOnly()){

        }else{
        new EventListTask2().execute(this);
        }
        //send vcf files to the server
        send.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                int selectedId = vcfgroup.getCheckedRadioButtonId();

                vcf1 =(RadioButton)findViewById(selectedId);
                try{
                    f = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/VCFFiles/"+vcf1.getText().toString());
                    filepath = f.getPath();

                if(email.getText().length()!=0){
                    dialog = ProgressDialog.show(SendActivity.this,
                            "Sending", "Please wait...", true);
                    new EventListTask1().execute();
                }else{
                    Toast.makeText(getApplicationContext(), "You may have not entered emailid or selected wrong file!!", Toast.LENGTH_LONG).show();
                }
                }catch(Exception e){

                }
            }
        });

        add_manage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent in = new Intent(SendActivity.this,AddContactActivity.class);
                startActivity(in);
            }
        });

    }

    public ArrayList<String> GetFiles() {
        ArrayList<String> MyFiles = new ArrayList<String>();
        File f = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/VCFFiles");

        f.mkdirs();
        File[] files = f.listFiles();
        if (files.length == 0)
            return null;
        else {
            for (int i=0; i<5; i++) 
                if(files[i].getPath().endsWith(".vcf")){
                MyFiles.add(files[i].getName());
                }
        }

        return MyFiles;
    } 
```

在 EventListTask2 类中，我使用 GetFiles() 函数从“VCFFIles”中获取文件，并将名称与每个单选按钮的名称相关联。里面的代码如下所示：

```
RadioButton radioset[] = {vcf1, vcf2, vcf3, vcf4, vcf5};
                if(GetFiles().size()!=0){
                array=GetFiles();
                for(int i=0;i<array.size();i++){
                    radioset[i].setText(array.get(i));
                }}else{
                    Toast.makeText(getApplicationContext(), "You have no vcf files saved", Toast.LENGTH_LONG).show();
                } 
```

以下是应用程序的日志：

```
03-18 18:41:17.410: E/AndroidRuntime(1598): FATAL EXCEPTION: main
03-18 18:41:17.410: E/AndroidRuntime(1598): java.lang.NullPointerException
03-18 18:41:17.410: E/AndroidRuntime(1598):     at com.example.mycontactdetails.SendActivity$EventListTask1.onPostExecute(SendActivity.java:321)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at com.example.mycontactdetails.SendActivity$EventListTask1.onPostExecute(SendActivity.java:1)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at android.os.AsyncTask.finish(AsyncTask.java:417)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at android.os.Looper.loop(Looper.java:123)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at android.app.ActivityThread.main(ActivityThread.java:4627)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at java.lang.reflect.Method.invokeNative(Native Method)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at java.lang.reflect.Method.invoke(Method.java:521)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-18 18:41:17.410: E/AndroidRuntime(1598):     at dalvik.system.NativeStart.main(Native Method)
03-18 18:53:12.560: E/IOException(1648): IO error: /mnt/sdcard/VCFFiles/Empty (Permission denied)
03-18 18:53:12.560: E/IOException(1648): java.io.FileNotFoundException: /mnt/sdcard/VCFFiles/Empty (Permission denied)
03-18 18:53:12.560: E/IOException(1648):    at org.apache.harmony.luni.platform.OSFileSystem.openImpl(Native Method)
03-18 18:53:12.560: E/IOException(1648):    at org.apache.harmony.luni.platform.OSFileSystem.open(OSFileSystem.java:152)
03-18 18:53:12.560: E/IOException(1648):    at java.io.FileInputStream.<init>(FileInputStream.java:82)
03-18 18:53:12.560: E/IOException(1648):    at com.example.mycontactdetails.SendActivity$Utils.PostDataToFavoriteUser(SendActivity.java:182)
03-18 18:53:12.560: E/IOException(1648):    at com.example.mycontactdetails.SendActivity$EventListTask1.doInBackground(SendActivity.java:310)
03-18 18:53:12.560: E/IOException(1648):    at com.example.mycontactdetails.SendActivity$EventListTask1.doInBackground(SendActivity.java:1)
03-18 18:53:12.560: E/IOException(1648):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-18 18:53:12.560: E/IOException(1648):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-18 18:53:12.560: E/IOException(1648):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-18 18:53:12.560: E/IOException(1648):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
03-18 18:53:12.560: E/IOException(1648):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
03-18 18:53:12.560: E/IOException(1648):    at java.lang.Thread.run(Thread.java:1096)
03-18 18:53:12.630: E/AndroidRuntime(1648): FATAL EXCEPTION: main
03-18 18:53:12.630: E/AndroidRuntime(1648): java.lang.NullPointerException
03-18 18:53:12.630: E/AndroidRuntime(1648):     at com.example.mycontactdetails.SendActivity$EventListTask1.onPostExecute(SendActivity.java:321)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at com.example.mycontactdetails.SendActivity$EventListTask1.onPostExecute(SendActivity.java:1)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at android.os.AsyncTask.finish(AsyncTask.java:417)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at android.os.Looper.loop(Looper.java:123)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at android.app.ActivityThread.main(ActivityThread.java:4627)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at java.lang.reflect.Method.invokeNative(Native Method)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at java.lang.reflect.Method.invoke(Method.java:521)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-18 18:53:12.630: E/AndroidRuntime(1648):     at dalvik.system.NativeStart.main(Native Method)
03-18 19:00:13.010: E/IOException(1676): IO error: /mnt/sdcard/VCFFiles/Empty (Permission denied)
03-18 19:00:13.010: E/IOException(1676): java.io.FileNotFoundException: /mnt/sdcard/VCFFiles/Empty (Permission denied)
03-18 19:00:13.010: E/IOException(1676):    at org.apache.harmony.luni.platform.OSFileSystem.openImpl(Native Method)
03-18 19:00:13.010: E/IOException(1676):    at org.apache.harmony.luni.platform.OSFileSystem.open(OSFileSystem.java:152)
03-18 19:00:13.010: E/IOException(1676):    at java.io.FileInputStream.<init>(FileInputStream.java:82)
03-18 19:00:13.010: E/IOException(1676):    at com.example.mycontactdetails.SendActivity$Utils.PostDataToFavoriteUser(SendActivity.java:183)
03-18 19:00:13.010: E/IOException(1676):    at com.example.mycontactdetails.SendActivity$EventListTask1.doInBackground(SendActivity.java:311)
03-18 19:00:13.010: E/IOException(1676):    at com.example.mycontactdetails.SendActivity$EventListTask1.doInBackground(SendActivity.java:1)
03-18 19:00:13.010: E/IOException(1676):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
03-18 19:00:13.010: E/IOException(1676):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-18 19:00:13.010: E/IOException(1676):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-18 19:00:13.010: E/IOException(1676):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
03-18 19:00:13.010: E/IOException(1676):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
03-18 19:00:13.010: E/IOException(1676):    at java.lang.Thread.run(Thread.java:1096)
03-18 19:00:13.090: E/AndroidRuntime(1676): FATAL EXCEPTION: main
03-18 19:00:13.090: E/AndroidRuntime(1676): java.lang.NullPointerException
03-18 19:00:13.090: E/AndroidRuntime(1676):     at com.example.mycontactdetails.SendActivity$EventListTask1.onPostExecute(SendActivity.java:322)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at com.example.mycontactdetails.SendActivity$EventListTask1.onPostExecute(SendActivity.java:1)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at android.os.AsyncTask.finish(AsyncTask.java:417)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at android.os.Looper.loop(Looper.java:123)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at android.app.ActivityThread.main(ActivityThread.java:4627)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at java.lang.reflect.Method.invokeNative(Native Method)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at java.lang.reflect.Method.invoke(Method.java:521)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
03-18 19:00:13.090: E/AndroidRuntime(1676):     at dalvik.system.NativeStart.main(Native Method) 
```

我不明白出了什么问题？任何帮助将不胜感激。

# python - 使用列数学在熊猫数据框对象中添加新列

> ID：15477894
> 
> 赞同：0
> 
> 时间：2013-03-18T13:20:51.243
> 
> 标签：python, pandas, dataframe

```
In [1]: from datetime import datetime

In [2]: import os

In [3]: import pandas as pd

In [4]: file_path = os.path.normpath('F:/EUR/data.csv')

In [5]: parse = lambda x: datetime.strptime(x, '%d.%m.%Y %H:%M:%S')

In [6]: df = pd.read_csv(file_path, parse_dates=[[0, 1]], date_parser=parse, ind
ex_col=[0], header=None)

In [7]: keys = ['Open', 'High', 'Low', 'Close']

In [8]: df.columns = [x for x in keys]

In [9]: grouped = df.groupby([df.index.year, df.index.day])
In [10]: df[:5]
Out[10]:
                           Open    High     Low   Close
0_1
2007-01-02 23:30:00  1.3198  1.3205  1.3197  1.3203
2007-01-02 00:00:00  1.3203  1.3206  1.3200  1.3205
2007-01-02 00:30:00  1.3205  1.3213  1.3205  1.3212
2007-01-02 01:00:00  1.3212  1.3217  1.3211  1.3214
2007-01-02 01:30:00  1.3214  1.3226  1.3213  1.3225 
```

1.我需要对**分组**对象进行简单的数学运算并将结果放入新列中，例如： 2.为什么我不能分组：`if df['Close']>df['Open']:
df['sum']=df['Close']-df['Open']`
`grouped = df.groupby([df.index.year, df.index.day,df['Close'>df['Open'])`

不要完全理解机制 groupby

3.如何将结果放入新列中，例如：
`for (k1, k2), group in grouped:
df['new_col']=group[group['Close']>group['Open']]['Close']-group[group['Close']>group['Open']]['Open']`

或者也许是更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T01:33:52.320

你试过这个吗？：

```
grouped = df.groupby([df.index.year,df.index.day])
df['sum'] = grouped.apply(lambda x: x.Open + x.Close) 
```

# android - 和引擎运动事件视图和相机

> ID：15477900
> 
> 赞同：0
> 
> 时间：2013-03-18T13:21:18.297
> 
> 标签：android, view, camera, andengine

我使用此代码显示两个视图 mRenderSurfaceView 和gestureOverlayView：

```
 relativeLayout = new RelativeLayout(this);
        final FrameLayout.LayoutParams relativeLayoutLayoutParams = new FrameLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT , RelativeLayout.LayoutParams.FILL_PARENT );

        gestureOverlayView = new GestureOverlayView(this);
        gestureOverlayView.setEnabled(true);

        this.mRenderSurfaceView = new RenderSurfaceView(this);
        this.mRenderSurfaceView.setRenderer(mEngine);
        surfaceViewLayoutParams = new RelativeLayout.LayoutParams(super.createSurfaceViewLayoutParams());          

        gestureOverlayView.addOnGesturePerformedListener(this);

        relativeLayout.addView(this.mRenderSurfaceView, surfaceViewLayoutParams);
        relativeLayout.addView(gestureOverlayView, 1248,1152);
        gestureOverlayView.setVisibility(View.GONE);
        this.setContentView(relativeLayout, relativeLayoutLayoutParams); 
```

我用这个画的：

```
@Override
    public boolean onTouch(View v, MotionEvent paramMotionEvent) {
    //TODO Auto-generated method stub   

if(paramMotionEvent.getAction() == MotionEvent.ACTION_DOWN) {
     isDrawing = true;

 }
//TouchEvent
 if(paramMotionEvent.getAction() == MotionEvent.ACTION_UP) {
    isDrawing = false;
    rec = new Rectangle[250];
    Arrays.fill( rec, null );
    irec=0; 
 }
 if (isDrawing = true) {

    if (rec[249]!=null){
     return false;
 }

    rec[irec] = new Rectangle(paramMotionEvent.getX(), paramMotionEvent.getY(), 1, 1);
    if (irec != 0) {
       Line l = new Line(rec[irec-1].getX(), rec[irec-1].getY(), rec[irec].getX(), rec[irec].getY());
       l.setColor(0.5f, 1f, 0.3f);
       mScene.attachChild(l);
    }
    irec++;
 }
 return true;
 } 
```

在 OnloadScene 我这个`gestureOverlayView.setOnTouchListener(this);`

我的场景是 1248*1152，问题是公共布尔 onTouch 工作正常，如果我在左上角但如果在场景中向下或向右移动，则绘制是移位。如何制作具有良好宽度和高度的视图（我想这是问题所在，这保持了相机比例）？

如果我使用 mScene.setOnSceneTouchListener 绘制没问题，但手势不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:03:36.737

Solved by velocityOnScreenControl.attachChild(l); of (private AnalogOnScreenControl velocityOnScreenControl;) Use AnalogOnScreenControl example.

# c++ - 如何让 C++ 程序监听系统命令

> ID：15477902
> 
> 赞同：6
> 
> 时间：2013-03-18T13:21:20.630
> 
> 标签：c++, windows, listen

最近有人问我如何/如果可能的话，可以做到这一点。我不确定这是否可能，我已经搜索了一段时间。

基本上让我们以`Windows`有一个系统命令来关闭计算机为例。比方说`shutdown -s -t 30 -c "Shutdown"`

有没有办法编写一个程序来监听`shutdown`命令，然后运行`shutdown -a`以响应中止该命令？

简而言之，你能让它监听计算机上的某些系统命令并执行系统命令作为响应吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:22:27.810

你可以这样：

1.  检查程序是否正在退出。
2.  如果是，则取消程序退出调用并执行`system("shutdown -a);`
3.  否则，做你想做的事。

好吧，可能有许多更复杂的方法可以做到这一点。我同意@VladLazarenko 的回答；像杀毒软件这样的程序一直在监听系统命令。但我想这需要对 API 有深入的了解。这只是一种简单的方法。如果您不是新手，那么您必须访问此链接，[http://www.codeproject.com/Articles/2082/API-hooking-revealed](http://www.codeproject.com/Articles/2082/API-hooking-revealed)（来自@RedX 的评论）。祝你好运！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:36:16.227

这确实是可能的。但是，您的示例可能不是描述一般问题的最佳示例。Windows 中有应用程序可以监听的会话事件，[关机就是其中之一](https://stackoverflow.com/questions/3173825/detecting-windows-shutdown-event)。毕竟，`shutdown.exe`不是唯一可以要求 Windows 关闭的应用程序。

然而，一般来说，“侦听”正在执行的命令的应用程序必须与操作系统紧密集成。您可以想象，防病毒软件正是这样做的，并且做得更多，以防止执行“坏”程序。我不熟悉 Windows 技术，但可以想象挂钩执行二进制文件的 Windows 系统调用是一种方法。当然，这将需要“管理”权限，甚至可能需要编写内核模块。

# asp.net-mvc - 默认模型绑定抛出“没有为此对象定义无参数构造函数”

> ID：15477905
> 
> 赞同：5
> 
> 时间：2013-03-18T13:21:25.220
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有一个表格，我们想为一个客户输入多个交易。表单的视图模型如下所示：

```
public class TradeSpendingEntryViewModel
{
    public TradeSpendingEntryViewModel()
    {
        Records = new List<TradeSpendingEntryViewModelRecord>();
    }

    public string CustomerNumber { get; set; }
    public DateTime Date { get; set; }
    public SelectList PlanningYears { get; set; }

    public List<TradeSpendingEntryViewModelRecord> Records { get; set; }
} 
```

我们希望能够使用 javascript 动态添加和删除记录条目行。集合中的每条记录是：

```
public class TradeSpendingEntryViewModelRecord
{
    public TradeSpendingEntryViewModelRecord()
    {
    }

    public string LOB { get; set; }
    public string ProductCode { get; set; }
    public SelectList AllowType { get; set; }
    public int Cases { get; set; }
    public bool EndCurrentDeal { get; set; }
    public Single DealRate { get; set; }
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public string Comments { get; set; }
} 
```

当我尝试将数据发布到我的控制器时，我收到一条错误消息，指出“没有为此对象定义无参数构造函数：

```
[HttpPost]
    public ActionResult Index(TradeSpendingEntryViewModel vm)
    {
        try
        {
            if (ModelState.IsValid)
            {
                return RedirectToAction("Index");
            }
            // TODO: Add insert logic here
            return View(vm);
        }
        catch
        {
            return View();
        }
    } 
```

堆栈跟踪表明它发生在模型绑定期间：

> [MissingMethodException: 没有为此对象定义无参数构造函数。] System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0 System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +113 System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache, StackCrawlMark& stackMark) +232 System.Activator.CreateInstance(Type type, Boolean nonPublic) +83 System.Activator.CreateInstance(Type type ) +6 System.Web.Mvc.DefaultModelBinder.CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType) +183

我的问题必须源于我如何设置我的视图，我基于这篇文章[http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx的标记](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

```
@using (Html.BeginForm())
{
<header class="clearfix">
        <img src="../../Content/images/logo.png" alt="Irving Consumer Products" />
        <h1>Enter Customer Deals</h1>
    </header>
    <hr />
    <fieldset>
        <legend>Customer details</legend>
        <table>
            <tr>
                <th>
                    Date:
                </th>
                <td>
                    <input type="date" disabled="disabled" value="@DateTime.Today.ToShortDateString()" />
            </tr>
            <tr>
                <th>
                    Customer Number:
                </th>
                <td>
                    @Html.TextBoxFor(m => m.CustomerNumber, new { id = "customer-number" })
                    <a href="#" id="change-customer-number">Change me</a>
                </td>
            </tr>
            <tr>
                <th>
                    Customer Name:
                </th>
                <td>
                    <input type="text" id="customer-name" disabled="disabled" />
                </td>
                <tr>
                    <th>
                        Planning Year:
                    </th>
                    <td>
                        @Html.DropDownList("PlanningYear", Model.PlanningYears)
                        <a href="#" id="change-planning-year">Change me</a>
                    </td>
                </tr>
        </table>
    </fieldset>
    <div class="buttonGroup">
        <input type="button" value="Add line" id="add-line">
        <input type="button" value="Copy line" id="copy-line">
        <input type="button" value="Delete line" id="delete-line">
    </div>
    <hr />
    <table id="tradeSpendingEntry">
        <thead>
            <tr>
                <th>
                </th>
                <th>
                    Line of business
                </th>
                <th>
                    Product Code
                </th>
                <th>
                    Product Description
                </th>
                <th>
                    Allowance
                    <br />
                    Type
                </th>
                <th>
                    Cases
                </th>
                <th>
                    End Current Deal
                </th>
                <th>
                    Start Date
                </th>
                <th>
                    End Date
                </th>
                <th>
                    Rate
                </th>
            </tr>
        </thead>
        @foreach (var r in Model.Records)
        {
            <tbody data-entry-index="0">
            <tr>
                <td>
                    <input type="checkbox" />
                </td>
                <td>
                    <input type="text" name="records[0].LOB" class="lobSelect" value="@r.LOB">
                </td>
                <td>
                    <!--<input type="hidden" name="records[0]ProductCodeSelected" value="@r.ProductCode" />-->
                    <input type="text" name="records[0].ProductCode" value="@r.ProductCode">
                </td>
                <td>
                    <input type="text" class="product-description" disabled="disabled" />
                </td>
                <td>
                    @Html.DropDownList("records[0].AllowType", r.AllowType)
                </td>
                <td>
                    <input name="records[0].Cases" type="number" />
                </td>
                <td>
                    <select name="records[0].EndCurrentDeal">
                        <option value="true" selected="selected">Yes</option>
                        <option value="false">No</option>
                    </select>
                </td>
                <td>
                    <input type="date" name="records[0].StartDate" />
                </td>
                <td>
                    <input type="date" name="records[0].EndDate" />
                </td>
                <td>
                    <input type="text" name="records[0].DealRate" />
                </td>
                </tr>
            <tr>
                <td></td>
                <td>
                    Comments:
                </td>
                <td colspan="8">
                    <input type="text" class="comment" name="records[0].Comments" />
                </td>
                </tr>
        </tbody>
        }
    </table>

    <footer>
        <div class="buttonGroup">
        <input type="submit" value="Submit Changes">
        <input type="button" value="Main Menu">
        <input type="button" value="View Customer Deals">
    </div>
    </footer>
    } 
```

因此，我希望第一个字段集中的字段能够映射到 TradeSpendingEntryViewModel 对象的直接属性（CustomerName、Date、PlanningYears）。然后，对于每个表示 TradeSpendingEntryViewModelRecord 的内容，将绑定为 TradeSpendingEntryViewModel.Records 集合中的一个项目。相反，我只是得到一个神秘的“未定义无参数构造函数”异常，尽管 ViewModel 和记录对象都具有无参数构造函数。

我的问题是，我可以使用上述文章中指出的约定来使用默认模型绑定器，还是需要为此目的构建自定义模型绑定器？

为了完整起见，以下是用户通过 javascript 向表单动态添加一行后生成的表单标记：

```
<form method="post" action="/TradeSpendingEntry/Index">
<header class="clearfix">
<img alt="Irving Consumer Products" src="../../Content/images/logo.png">
<h1>Enter Customer Deals</h1>
</header>
<hr>
<fieldset>
<legend>Customer details</legend>
<table>
<tbody>
<tr>
<th> Date: </th>
<td>
<input id="dp1363608756704" class="hasDatepicker" type="date" value="18/03/2013" disabled="disabled" style="background-color: rgb(238, 238, 238);">
</td>
</tr>
<tr>
<th> Customer Number: </th>
<td>
<input id="customer-number" type="text" value="" name="CustomerNumber">
<a id="change-customer-number" href="#">Change me</a>
</td>
</tr>
<tr>
<th> Customer Name: </th>
<td>
<input id="customer-name" type="text" disabled="disabled" style="background-color: rgb(238, 238, 238);">
</td>
</tr>
<tr>
<th> Planning Year: </th>
<td>
<select id="PlanningYears" name="PlanningYears">
<option value="2011">2011</option>
<option value="2012">2012</option>
<option value="2013">2013</option>
<option value="2014">2014</option>
</select>
<a id="change-planning-year" href="#">Change me</a>
</td>
</tr>
</tbody>
</table>
</fieldset>
<div class="buttonGroup">
<input id="add-line" type="button" value="Add line">
<input id="copy-line" type="button" value="Copy line">
<input id="delete-line" type="button" value="Delete line">
</div>
<hr>
<table id="tradeSpendingEntry">
<thead>
<tr>
<th> </th>
<th> Line of business </th>
<th> Product Code </th>
<th> Product Description </th>
<th>
Allowance
<br>
Type
</th>
<th> Cases </th>
<th> End Current Deal </th>
<th> Start Date </th>
<th> End Date </th>
<th> Rate </th>
</tr>
</thead>
<tbody data-entry-index="0">
<tr>
<td>
<input type="checkbox">
</td>
<td>
<input class="lobSelect" type="text" name="records[0].LOB">
</td>
<td>
<input type="text" name="records[0].ProductCode">
</td>
<td>
<input class="product-description" type="text" disabled="disabled" style="background-color: rgb(238, 238, 238);">
</td>
<td>
<select id="records_0__AllowType" name="records[0].AllowType">
<option selected="selected">BillBack$</option>
<option>Billback%</option>
<option>O&A%</option>
<option>Coop%</option>
<option>VR%</option>
<option>Lump - O&A$</option>
<option>Lump - CP$</option>
<option>Lump - VR$</option>
<option>Lump - BB$</option>
</select>
</td>
<td>
<input type="number" name="records[0].Cases">
</td>
<td>
<select name="records[0].EndCurrentDeal">
<option selected="selected" value="true">Yes</option>
<option value="false">No</option>
</select>
</td>
<td>
<input id="dp1363608756707" class="hasDatepicker" type="date" name="records[0].StartDate">
</td>
<td>
<input id="dp1363608756708" class="hasDatepicker" type="date" name="records[0].EndDate">
</td>
<td>
<input type="text" name="records[0].DealRate">
</td>
</tr>
<tr>
<td></td>
<td> Comments: </td>
<td colspan="8">
<input class="comment" type="text" name="records[0].Comments">
</td>
</tr>
</tbody>
<tbody data-entry-index="1">
<tr>
<td>
<input type="checkbox">
</td>
<td>
<input class="lobSelect" type="text" name="records[1].LOB">
</td>
<td>
<input type="text" name="records[1].ProductCode">
</td>
<td>
<input class="product-description" type="text" disabled="disabled" style="background-color: rgb(238, 238, 238);">
</td>
<td>
<select id="records_0__AllowType" name="records[1].AllowType">
<option selected="selected">BillBack$</option>
<option>Billback%</option>
<option>O&A%</option>
<option>Coop%</option>
<option>VR%</option>
<option>Lump - O&A$</option>
<option>Lump - CP$</option>
<option>Lump - VR$</option>
<option>Lump - BB$</option>
</select>
</td>
<td>
<input type="number" name="records[1].Cases">
</td>
<td>
<select name="records[1].EndCurrentDeal">
<option selected="selected" value="true">Yes</option>
<option value="false">No</option>
</select>
</td>
<td>
<input id="dp1363608756709" class="hasDatepicker" type="date" name="records[1].StartDate">
</td>
<td>
<input id="dp1363608756710" class="hasDatepicker" type="date" name="records[1].EndDate">
</td>
<td>
<input type="text" name="records[1].DealRate">
</td>
</tr>
<tr>
<td></td>
<td> Comments: </td>
<td colspan="8">
<input class="comment" type="text" name="records[1].Comments">
</td>
</tr>
</tbody>
</table>
<footer>
<div class="buttonGroup">
<input type="submit" value="Submit Changes">
<input type="button" value="Main Menu">
<input type="button" value="View Customer Deals">
</div>
</footer>
</form> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-18T14:04:31.580

毫无疑问是`SelectList`. 我昨天也遇到了同样的问题。

如果您查看 SelectList，它的所有构造函数都需要一个参数。[http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist(v=vs.108).aspx)

问题是当你`Action`被调用时`public ActionResult Index(TradeSpendingEntryViewModel vm)`

控制器尝试将发送回的数据绑定`POST`到`TradeSpendingEntryViewModel`它需要`PlanningYears`通过创建一个新的值来设置它要执行的值`SelectList`

要解决此问题，您需要将 SelectList 设为私有变量，也就是支持字段，然后默认将其设置为空列表。这为其提供了所需的参数化构造函数：

```
 //select list
    private SelectList planningYears = new SelectList(new List<YourObject>());

    public SelectList PlanningYears 
    {
        get
        {
            return planningYears;
        }
        set
        {
            locations = planningYears;
        }
    } 
```

或者将 PlanningYears 更改为 List<> 并将其转换为视图上的选择列表。

```
@Html.DropDownListFor(m => m.PlanningYears , new SelectList(Model.PlanningYears ), "choose", null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-23T14:24:04.720

这将解决您的选择列表问题。创建具有名称的新类并从下面的示例中`SelectListNew`继承它。`SelectList`现在而不是`SelectList`使用`SelectListNew`

```
public class SelectListNew : SelectList
{
    public SelectListNew() : base(string.Empty) { }
    public SelectListNew(IEnumerable items) : base(items) { }
    public SelectListNew(IEnumerable items, object selectedValue) : base(items, selectedValue) { }
    public SelectListNew(IEnumerable items, object selectedValue, IEnumerable disabledValues) : base(items, selectedValue, disabledValues) { }
    public SelectListNew(IEnumerable items, string dataValueField, string dataTextField) : base(items, dataValueField, dataTextField) { }
    public SelectListNew(IEnumerable items, string dataValueField, string dataTextField, object selectedValue) : base(items, dataValueField, dataTextField, selectedValue) { }
    public SelectListNew(IEnumerable items, string dataValueField, string dataTextField, string dataGroupField, object selectedValue) : base(items, dataValueField, dataTextField, dataGroupField, selectedValue) { }
    public SelectListNew(IEnumerable items, string dataValueField, string dataTextField, object selectedValue, IEnumerable disabledValues) : base(items, dataValueField, dataTextField, selectedValue, disabledValues) { }
    public SelectListNew(IEnumerable items, string dataValueField, string dataTextField, string dataGroupField, object selectedValue, IEnumerable disabledValues) : base(items, dataValueField, dataTextField, dataGroupField, selectedValue, disabledValues) { }
    public SelectListNew(IEnumerable items, string dataValueField, string dataTextField, string dataGroupField, object selectedValue, IEnumerable disabledValues, IEnumerable disabledGroups) : base(items, dataValueField, dataTextField, dataGroupField, selectedValue, disabledValues, disabledGroups) { }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-15T12:54:04.337

我有一个更好的主意！简单地将您的属性（selectList）声明为方法：

请执行下列操作

```
//fill it if whatever you want from db
private List<YourList> happyList = new List<YourList>(); 

//that way mvc will never try to instantiate selectList on Action execution
public SelectList PlanningYears() 
    {
        return new SelectList(happyList,"happyID","happyDesc","");
    } 
```

很多时间在 c# 中做属性让我忘记了它是多么简单......

# c# - 这个 C# 按位或的结果是什么？

> ID：15477908
> 
> 赞同：2
> 
> 时间：2013-03-18T13:21:40.150
> 
> 标签：c#, sharepoint-2010, enums, bitwise-or

我正在尝试在 c# 中检查 SharePoint 用户的权限，并且遇到了以下似乎有效的代码：

```
isGranted = spweb.DoesUserHavePermissions(userlogin, SPBasePermissions.EmptyMask | SPBasePermissions.ViewPages); 
```

第一个参数是要检查权限的用户。第二个参数是检查用户是否有权限。

我的问题是，按位或 emptymask 和 viewpages 权限之间的结果是什么？这实际上是在检查什么权限？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T13:25:37.023

由于`EmptyMask` [被定义为零](http://hristopavlov.wordpress.com/2008/09/18/implementing-custom-security-rights-in-sharepoint/)`SPBasePermissions.ViewPages`，结果与不传递 相同`EmptyMask`：

```
[Flags]
public enum SPBasePermissions
{
    EmptyMask =                 0×0000000000000000,
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:25:22.167

它正在检查这两个权限。权限是按位标志。

我不知道实际值，但说 Empty Mask 是：01000000，而 ViewPage 是 00100000 - 然后 OR'ing 它们将是 01100000 - 所以你把它们放在一起。

因此，如果您想检查用户是否具有 ViewPage 权限，您可以取 OR'ed 值，并将其与 ViewPage 的值相比较，如果它 > 0，那么您知道您有权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T13:26:42.320

枚举具有`Flag`属性，表明您可以使用按位运算符组合值。

实际上，将`EmptyMask`（0）与另一个值组合起来是没有意义的，因为`0 | X`它总是等于`X`。只需使用其他值。

# javascript - 我可以使用 ScratchPad/Greasemonkey 临时修改现有的远程网站吗？

> ID：15477912
> 
> 赞同：3
> 
> 时间：2013-03-18T13:21:51.617
> 
> 标签：javascript, firefox, variables, scripting, greasemonkey

我不拥有的网站添加了以下带有`<script>`标签的代码。我是否可以使用 Firefox 的 ScratchPad 或 Greasemonkey更改 中的`url`变量？`a.ajax`

如果是这样，怎么做？
如果不是，为什么？是否至少可以修改`c`变量，如果可以，如何修改？

```
validateUsername: function ()
{
    clearTimeout(b.signUp.usernameValidationTimer);
    b.signUp.usernameValidationTimer = null;
    var c = a("#register-username").val();
    if(3 > c.length)
        b.signUp.hideValidationError("#register-username"), a("#register-username").removeClass("validate_ok");
    else
    {
        if(b.signUp.usernameValidation == c) return !1;
        b.signUp.hideValidationError("#register-username");
        b.signUp.usernameValidation = c;
        a("#register-username").addClass("ajax-load");
        a.ajax(
        {
            type: "POST",
            dataType: "json",
            url: "/" + b.signUp.getMarket() + "/xhr/json/validate-email.php",
            xhrFields:{ withCredentials: !0 },
            data:{ username: c },
            success: function (c)
            {
                a("#register-username").removeClass("ajax-load");
                "object" == typeof c ? "1" == c.status ? b.signUp.hideValidationError("#register-username", !0)  :b.signUp.showValidationError("#register-username", c.message) :
                b.signUp.showValidationError("#register-username")
            }
        })
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T00:37:40.273

您可以`c`使用 Firefox 相对简单地修改相关代码中的变量（也不需要插件）。

我创建了一个简单的测试页面，显示加载时的日期/时间：

```
var now = new Date();
var year = now.getFullYear();
var month = now.getMonth() + 1;
var day = now.getDate();
var hour = now.getHours();
var minutes = now.getMinutes();
var seconds = now.getSeconds();
var ampm = (hour < 12 ? "am" : "pm");

if (hour == 0) {
    hour = 24;
}

document.write(
    year.toString() + '-' +
    (month < 10 ? '0' + month.toString() : month.toString()) + '-' +
    (day < 10 ? '0' + day.toString() : day.toString()) + ' ' +
    (hour < 10 ? '0' + hour.toString() : hour > 12 ? (hour - 12).toString() : hour.toString()) + ':' +
    (minutes < 10 ? '0' + minutes.toString() : minutes.toString()) + ':' +
    (seconds < 10 ? '0' + seconds.toString() : seconds.toString()) + ' ' +
    ampm
); 
```

**结果：**

![打印日期/时间结果](../Images/436c425099e4b5193200e509744fa06e.png)

* * *

# Firefox 调试指南

1.  **启用 Firefox 调试器：**

    ![启用 Firefox 调试器](../Images/d47ef8c0cb8786576adf529359d43cfb.png)

2.  **找到有问题的脚本，并在分配变量*后*在代码中设置断点（重要！→） ：**

    *注意 - 您可以设置多个断点。*

    ![查找脚本，设置断点](../Images/acb63d960f6ce72b8e21217f27667cdb.png)

3.  **导致脚本执行：**

    无论是通过刷新页面还是单击按钮。

4.  **Firefox 将从第 2 步开始暂停执行：**

    [![达到断点](../Images/7bbd19ffe2ad3a48c6b59a2a3e84409f.png)](https://i.stack.imgur.com/AX0FJ.png)

5.  **在右侧寻找所需的变量；单击其值，然后对其进行修改。`Enter`完成后按：**

    ![修改值](../Images/2e8117272af7b9c0da42418729956d04.png)

    **修改后的变量/值将闪烁黄色：**

    ![修改后黄闪](../Images/d3da58fd53e8f688278c656d124b8f3c.png)

6.  **恢复脚本执行：**

    ![恢复脚本执行](../Images/c19a8664d435835f037f4ba3c81389fc.png)

7.  **结果！：**

    *注意日期差异（从**24**到**20**）*

    ![修改后的结果](../Images/369c65028c632b15aeacceb23ac1289d.png)

# layout - iOS6 App Store 列表的促销“卡片”大小是多少？

> ID：15477918
> 
> 赞同：1
> 
> 时间：2013-03-18T13:22:04.190
> 
> 标签：layout, ios6, interface, app-store

我试图弄清楚如何在 iOS6 App Store 中预览我的应用程序的外观。包括我正在谈论的“卡片”的一个例子。

虽然我可以观察组件的大小，但我正在寻找更准确的东西。

*   用于显示应用程序的白色**圆角矩形卡片**的精确像素大小是多少？（好像是312x336，但我可能错了）
*   hte卡的**圆角半径**是多少
*   与卡片一起显示的屏幕截图的**大小是多少？**（我计算为 180 高）
*   图标大小是多少？

其余的看起来很简单——标签长达两行，在末尾被截断，并且开发者名称似乎使用了新的 iOS6 约束，位于应用程序名称下方。

**有什么地方可以让我了解这张卡使用的所有这些尺寸是什么？**

谢谢！

![在此处输入图像描述](../Images/8203433f5abd17262b901e5815e8432c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T12:10:49.367

搜索结果和 iPhone 5 上的“促销卡”： -Icon 126x126px -Screenshot is 314x558px

# c# - 访问动态加载的用户控件方法

> ID：15477920
> 
> 赞同：2
> 
> 时间：2013-03-18T13:22:12.400
> 
> 标签：c#, user-controls

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:36:07.570

Create an interface containing all your controls methods

```
public interface IMyControl
{
 public void clear();
 public string getastringvalue();
 etc......
} 
```

Get all your controls to inherit from this interface:

```
public class MyControl : UserControl, IMyControl 
```

Cast all your controls to the interface:

```
private void button1_Click(object sender, EventArgs e)
{
    IMyControl typedControl = hActiveUsrCtrl as IMyControl;
    typedControl.Clear();
    etc...
} 
```

On a side not **Reflection is inefficient** and should be avoided where possible!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:32:58.020

UserControls are implemented as classes, so you can have that class implement an interface, and just call the GetData method that way.

```
public interface IGetData {
  string GetData(parameters ...);
}

public class MyUserControl : UserControl, IGetData {
  ...
} 
```

If all the User Controls can have the same signature for the GetData method, you don't even have to figure out which type it is, just cast it to IGetData.

```
IGetData getable = activeCtrl as IGetData;
if (getable != null) {
  var data = getable.GetData(...);
  // do stuff with data
} else {
  throw new ApplicationException("activeCtrl was null or didn't implement IGetData");
} 
```

**Update:**

If I understand, it looks like you need an intermediate variable.

```
// newUc implements IGetData, not hActiveUsrCtrl
IGetData newUc = hActiveUsrCtrl.GetActiveUsrCtrl(pare‌​nt.appInfo.catalogId, parent);
pUserControlContainer.Controls.Add((Control)newUc);

var data = newUc.GetData(parameters ...); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T13:33:38.520

If all control have the same public methods etc., why do you not use an interface?

You may implement a control factroy class ControlFactory.GetUserSelectionControl() . This method creates at runtime the best control matching the selection of the user. You can pass in an input of a kind to identify the best control. And all controls implement in your case the same interface. Then you can directly call the methods without reflection. But in the meantime you got already an example on how to implement the interfaces.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T13:39:06.587

If all the user control have the same methods, declare an interface, inherit from it, and cast to the interface.

something along the lines of :

ascx.cs file :

```
public partial class AleaPoisson : UserControl, ISymboleAlea {
public void SomeFunction();
...
} 
```

aspx.cs file :

( conteneur should be a PlaceHolder control and it should be loaded on Page_Init, rather than Page_Load if possible )

```
var ctl = conteneur.Page.LoadControl( path );
conteneur.Controls.Add( ctl );
((ISymboleAlea)ctl).SomeFunction(); 
```

# dotnetnuke - Dotnetnuke 内容分段更新计数随时间不断增长

> ID：15477921
> 
> 赞同：0
> 
> 时间：2013-03-18T13:22:14.600
> 
> 标签：dotnetnuke

在使用实时站点的精确副本设置内容登台后，我将模块更改为站点范围内的工作流设置。现在，可用的模块更新数量在过去 12 小时内不断增长。有什么不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T12:50:03.477

只需确认您的模块工作流程设置将更新模块设置更新时间戳，即，您的工作流程设置是否像模块设置更新一样，而不是内容分段视为模块更新。

# c - 是否可以从多个线程写入同一文件的不同部分？

> ID：15477925
> 
> 赞同：10
> 
> 时间：2013-03-18T13:22:19.387
> 
> 标签：c, io, disk-io

我可以从多个线程（在典型的 PC 上）同时写入同一文件的不同部分吗？我的意思是只有一个磁头，所以写入只能以某种顺序执行，即不能并行，对吧？

**编辑：**

我正在编写一个对大型二进制文件进行排序的程序，但大部分时间仍然花在磁盘 I/O 上，所以我只是想知道通过并行执行 I/O 是否会获得额外的速度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T13:28:09.133

没有什么可以阻止您让多个线程写入同一文件的不同部分。

> 我有一个对大型二进制文件进行排序的程序，但大部分时间仍然花在磁盘 I/O 上，所以我只是想知道通过并行执行 I/O 是否会获得额外的速度。

如果程序是磁盘绑定的，使其成为多线程（并且仍然将相同数量的数据写入同一个磁盘）不会加快它的速度。

如果我们谈论的是传统硬盘驱动器，顺序 I/O 通常比涉及来回移动磁盘磁头的 I/O 更快。考虑到这一点，跨线程拆分 I/O 甚至可能适得其反。

就加快速度而言，有几种途径可供探索：

1.  减少 I/O 的数量（例如，通过使用需要更少 I/O 的排序算法，或者通过在内存中做更多的工作）；
2.  提高 I/O 吞吐量，例如通过使用更快的驱动器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T13:26:10.013

至少在 unix(-like) 操作系统上是可能的，大概在 Windows 上也是可能的，尽管文件处理有些不同，可能需要特定的文件模式允许这样做（编辑：有关详细信息，请参阅[bizzehdee](https://stackoverflow.com/a/15478007/1717300)的答案）。

在正在运行的操作系统上，“文件”实际上是一个逻辑实体，它的某些状态在任何给定时间都存储到磁盘中，但也有一些变化仍然只存在于内核缓冲区中。因此，在某种程度上，写入文件与写入共享内存块没有什么不同，只是 API 不同（即使使用`mmap`.

但简而言之，只需查找和写入，文件中的旧字节就会被覆盖。如果两个进程在相同的字节上重叠写入，我认为最终结果是未定义的，无论如何，这在正常运行的系统中永远不应该发生，并且任何这样做的程序都应该有一些机制来防止重叠写入。

* * *

关于加速：真的取决于你做什么。如果您只执行原始写入，传统旋转硬盘的速度可能会变慢，或者文件可能更容易碎片化。在 SSD 上，可能没有减速，但也没有加速。

另一方面，如果您的操作是 CPU 密集型的，并且您有多个内核，并且并行处理将使您获得更高的总 CPU 使用率，那么并行处理同一输出文件的不同部分可以加快速度，甚至与写入文件的字节相比，如果有很多处理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T13:27:27.613

您需要查看`CreateFileEx`并`WriteFileEx`使用`lpOverlapped`. 这允许在多个线程中同时异步读取和/或写入同一文件。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365748(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365748(v=vs.85).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T13:31:58.317

是的，这是可能的，但正如其他人所说，在一般情况下它*最*不可能提高性能。

但是，您的其中一个陈述并不正确。

> 只有一个磁头

首先，通常每个表面都有一个，因此即使是单盘 HDD 也会有两个磁头。当然，多盘的有更多。

一些具有多个盘片的驱动器还能够同时读取或写入所有盘片。80 年代的一些[Fujitsu Eagle 驱动器](http://museum.ipsj.or.jp/en/computer/device/magnetic_disk/0013.html)做到了这一点，并被用于第一批能够记录未压缩数字视频信号的系统。当然，这不是“随机访问”，因为所有头都一起移动。我不确定现代驱动器是否使用这种技术。

# c++ - 通过 main 传递争论 - 检查是否有有效的输入

> ID：15477928
> 
> 赞同：-2
> 
> 时间：2013-03-18T13:22:27.020
> 
> 标签：c++, g++, command-line-arguments, argument-passing

我试图通过 main 传递参数，它工作正常，然后我检查传入的参数是否包含正确的格式/值。但是，即使我通过了正确的格式它仍然显示有问题，这里是代码：

```
int main(int argc, char* argv[]) {

/* Check if arguments are being passed through */ 

if(argc == 1){
    cout << endl << "--- ERROR ---" << endl;
    exit(0);
}

/* Check if the first argument contains the correct data */
string file_name = argv[1];

/* Handle operation */

string operation = argv[2];

if(operation != "-t" || operation != "-r")
{
    cout << "Something is not right";
}

} 
```

如果我这样做：`cout << operation;`那么结果将是：`-t`当我运行应用程序时通过 -t。

谁能建议我哪里出错了？

更新：

我将传递这些论点：

`./main something.wav -t`

我期待if语句：

```
if(operation != "-t" || operation != "-r")
{
    cout << "Something is not right";
} 
```

返回负数，因为我输入的值是 -t

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:24:59.167

```
if(operation != "-t" || operation != "-r")
{
    cout << "Something is not right";
} 
```

无论操作是什么，它必须要么不等于“-t”，要么不等于“-r”，所以这*总是*会打印“Something is not right”。

> 我期待 if 语句：
> 返回负数，因为我输入的值是 -t

OR 的后半部分为真。如果前半部分或后半部分为真，则 OR 为真。你想要`((operation != "-t") && (operation != "-r"))`。这样，只有当输入不是 -t*并且*也不是 -r`if`时才会触发。

# ruby - ruby 将十六进制值分配给字符串

> ID：15477929
> 
> 赞同：1
> 
> 时间：2013-03-18T13:22:37.607
> 
> 标签：ruby

此代码适用于旧版本 1.8.X

```
 @buff1 = "12"
 @buff1[0] = 0x0b                                   
 @buff1[1] = 0x0e 
```

我更新了一小部分代码。请再看看。因为在`1.8.6`我得到`"\016\v"` 输出并`1.9.3`显示错误`TypeError: can't convert Fixnum into String`

请提供 1.9.3 的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:07:19.457

它适用于**`Ruby 1.9.3`**

```
p RUBY_VERSION
b = "12"
@buff1 = []
@buff1[0] = 0x0b                                   
@buff1[1] = 0x0e
p @buff1 
```

*输出：*

```
"1.9.3"
[11, 14] 
```

可能您尝试过：

```
p RUBY_VERSION
b = "12" # you missed the statement @buff1 = []
@buff1[0] = 0x0b                                   
@buff1[1] = 0x0e
p @buff1 
```

你得到了以下输出：

```
"1.9.3"
C:/Documents and Settings/rakshiar/My Documents/userdata/Ruby/Scripts/test.rb:11
9:in `<main>': undefined method `[]=' for nil:NilClass (NoMethodError) 
```

希望这段代码对您有所帮助。

**更新**

```
p RUBY_VERSION
@buff1 = "12"
@buff1[0] = 0x0b.to_s  
p @buff1                               
@buff1[1] = 0x0e.to_s
p @buff1 
```

*输出：*

```
"1.9.3"
"112"
"1142" 
```

# mongodb - 将 mongodb 与 neo4j 集成，是否有任何 API 可以链接它们？

> ID：15477934
> 
> 赞同：3
> 
> 时间：2013-03-18T13:23:01.847
> 
> 标签：mongodb, neo4j, graph-databases, cypher, spring-data-neo4j

我正在研究推荐引擎。收集用户数据（他们的友谊、位置、喜欢、教育......）并且已经存储在 mongodb 中。我需要向这些用户推荐相关产品。出于显而易见的原因（节点之间的轻松遍历、路径信息……），我计划将 neo4j 用于推荐引擎。问题是我必须首先将 mongodb 数据转换为 neo4j 节点/关系，处理数据并将结果发送回 mongodb 数据库。主要问题是我们最终会维护两个数据库，这让开发团队很不高兴。我已经查看了类似的帖子[mongodb-neo4j](https://stackoverflow.com/questions/15114997/using-mongodb-and-neo4j-together)和[spring data](https://stackoverflow.com/questions/12643609/spring-data-using-neo4j-and-mongodb)但不确定如何解决这个问题。这些是我的问题
1- 仅仅为了推荐引擎（我们正在处理一个大型网络）而添加另一个数据库是否值得，尽管 neo4j 非常适合此类任务。
2-我使用密码进行查询，对java、rest API和spring数据了解不多。我应该使用哪种 API 进行 mongodb-neo4j 通信？我目前的解决方案是使用 R 并将其用作连接 mongodb 和 neo4j 的平台。
3-其他图形数据库怎么样，有没有适合与Mongo集成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T20:15:50.603

我找到了两种集成 mongodb 和 Neo4j 的方法。第一个是[ryan1234](https://stackoverflow.com/users/1108902/ryan1234)使用 Gremlin 和 Gmongo 提出的。[根据这篇优秀的博客](http://thinkaurelius.com/2013/02/04/polyglot-persistence-and-query-with-gremlin/)，步骤如下
1- 下载[Gmongo](http://mvnrepository.com/artifact/com.gmongo/gmongo)和[Java mongo 驱动程序](http://mvnrepository.com/artifact/org.mongodb/mongo-java-driver/2.9.0)
2- 复制 neo4j/lib 目录下的两个 jar 文件
3- 这是一个示例。假设我们在 mongodb 中有这个集合（称为跟随）

```
{ "_id" : ObjectId("4ff74c4ae4b01be7d54cb2d3"), "followed" : "1", "followedBy" : "3", "createdAt" : ISODate("2013-01-01T20:36:26.804Z") }
{ "_id" : ObjectId("4ff74c58e4b01be7d54cb2d4"), "followed" : "2", "followedBy" : "3", "createdAt" : ISODate("2013-01-15T20:36:40.211Z") }
{ "_id" : ObjectId("4ff74d13e4b01be7d54cb2dd"), "followed" : "1", "followedBy" : "2", "createdAt" : ISODate("2013-01-07T20:39:47.283Z") } 
```

从 Neo4j 中的 Gremlin shell 运行以下命令。

```
import com.gmongo.GMongo
mongo = new GMongo() 
db = mongo.getDB("local")
db.follows.findOne().followed
x=[] as Set; db.follows.find().each{x.add(it.followed); x.add(it.followedBy)}
x.each{g.addVertex(it)}
db.follows.find().each{g.addEdge(g.v(it.followedBy),g.v(it.followed),'follows',[followsTime:it.createdAt.getTime()])} 
```

那就是我们在neo4j中创建了等效图

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T19:15:02.307

[https://github.com/tinkerpop/gremlin/wiki](https://github.com/tinkerpop/gremlin/wiki)

小鬼！

专门设计用于 Neo4j/graph 数据库。您也可以轻松下载 GMongo 并连接到 Mongo。

查看这篇描述如何在 Gremlin 中与多语言数据交互的文章：

[http://thinkaurelius.com/2013/02/04/polyglot-persistence-and-query-with-gremlin/](http://thinkaurelius.com/2013/02/04/polyglot-persistence-and-query-with-gremlin/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-29T23:27:02.763

为了同时使用 MongoDB 和 Neo4j，现在有[Neo4j Doc Manager](http://neo4j.com/developer/mongodb/#_neo4j_doc_manager)项目，它将自动将数据从 MongoDB 同步到 Neo4j，将文档转换为属性图结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T20:25:37.460

如果我们想使用 R，还有另一种解决方案。下面的 R 代码，将从 mongodb 获取数据

```
library(RMongo)
library('bitops')
library('RCurl')
library('RJSONIO')
mg <- mongoDbConnect("local", "127.0.0.1", 27017)
mongoData <- dbGetQuery(mg, 'follows',"{}") 
```

结果如下

```
 followed followedBy                    createdAt
1        1          3 Tue Jan 01 15:36:26 EST 2013
2        2          3 Tue Jan 15 15:36:40 EST 2013
3        1          2 Mon Jan 07 15:39:47 EST 2013 
```

以下 R 代码将连接到 Neo4j 并创建图形。它效率不高，但有效

```
query <- function(querystring) {
  h = basicTextGatherer()
  curlPerform(url="http://localhost:7474/db/data/ext/CypherPlugin/graphdb/execute_query",
    postfields=paste('query',curlEscape(querystring), sep='='),
    writefunction = h$update,
    verbose = TRUE
  )

  result <- fromJSON(h$value())
  data <- data.frame(t(sapply(result$data, unlist)))
  names(data) <- result$columns
   data

}

nodes<-unique(c(mongoData$followed,mongoData$followedBy))
nodes=paste("_",nodes,sep="")
nodes<-paste(paste("(",nodes,collapse="),"),")")

edges<-apply(mongoData[,3:2],1,function(x) paste("_",x,sep="",collapse="-[:follows]->"))
edges<-paste(edges,collapse=",")    

cmd<-paste(nodes,edges,sep=",")
cmd=paste("create",cmd)
query(cmd) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-17T11:54:27.453

你看过**Reco4j**吗？它使用 neo4j 作为底层图形数据库。作为项目的一部分，他们实施了一些算法。这是链接[reco4j](http://www.reco4j.org/)。该链接目前不可用，但我在访问该站点时发现这些功能很好。

# javascript - 尝试单击下拉列表中的链接，该链接只能通过将鼠标悬停在元素上来访问

> ID：15477939
> 
> 赞同：1
> 
> 时间：2013-03-18T13:23:09.823
> 
> 标签：javascript, ruby, watir-webdriver

我正在尝试单击下拉列表中的元素（链接），该下拉列表仅在将鼠标悬停在元素上时才会出现。不幸的是，我无法提供指向发生问题的站点的链接，因为我们的 Live 站点上还没有可用的功能。有关此问题所涉及的 HTML 代码，请参见下文：

```
<li class="sub-menu">
  <span class="label">Signed in as</span>
  <span class="val">Xkeek Javed Wezacur</span>
  <a href="#user-actions">Menu</a>
  <ul id="user-actions">
    <li>
    <li>
    <li>
      <a href="/sign_out">Sign out</a>
    </li>
  </ul>
</li> 
```

现在我正在尝试访问并单击代码：

```
<a>href="/sign_out">Sign out</a> 
```

我尝试了各种解决方案，但每次都会出错。请参阅下面的内容，了解我的尝试和收到的错误：

```
@browser.li(:class, 'sub-menu').ul(:id, 'user-actions').link(:text, 'Sign out').click 
```

元素无法滚动到视图中：[https](https://xxxuat.com/sign_out) ://xxxuat.com/sign_out (Selenium::WebDriver::Error::MoveTargetOutOfBoundsError)

```
@browser.ul(:id, 'user-actions').link(:text, 'Sign out').click 
```

元素无法滚动到视图中：[https](https://xxxuat.com/sign_out) ://xxxuat.com/sign_out (Selenium::WebDriver::Error::MoveTargetOutOfBoundsError)

```
@browser.link(:text, 'Menu').link(:text, 'Sign out').click 
```

无法定位元素，使用 {:text=>"Sign out", :tag_name=>"a"} (Watir::Exception::UnknownObjectException)

```
@browser.link(:text, 'Sign out').click 
```

元素无法滚动到视图中：[https](https://xxxuat.com/sign_out) ://xxxuat.com/sign_out (Selenium::WebDriver::Error::MoveTargetOutOfBoundsError)

我曾尝试使用 stackoverflow 和 Google 群组找到一些答案，如果我能指出正确的方向，我将不胜感激。谢谢你们。

环境：Mac OSX 10.7.5、Firefox 19.0.2、Ruby 1.9.3p194、watir-webdriver 0.6.2

我刚试过：

```
@browser.link(:text, 'Menu').fire_event('onmouseover'),      
@browser.li(:class, 'sub-menu', :text, 'Sign out').link.click 
```

我得到的错误是：
expected Hash or (:how, 'what'), got [:class, "sub-menu", :text, "Sign out"] (ArgumentError)。
现在我很困惑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:30:55.113

Watir 只会点击可见的元素。由于退出链接只有在显示子菜单时才可见，因此您需要先显示子菜单。

以下操作可展开菜单，然后单击退出链接：

```
#Expand submenu
browser.ul(:id => 'account-menu').link(:text => 'Menu').click

#Click sign out
browser.link(:text => 'Sign out').click 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-19T10:33:46.330

呜呼！！！最后我让它工作了:)。我不得不操纵 javascript 来显示下拉菜单，因为其他所有方法都失败了，这是我的代码：

```
@browser.execute_script("$('#user-actions').css('left',0);")
@browser.link(:text => 'Sign out').when_present.click 
```

感谢贾斯汀和巴拉为我指明了正确的方向。

# crystal-reports - 如何对水晶报表中的列求和

> ID：15477946
> 
> 赞同：-1
> 
> 时间：2013-03-18T13:23:46.287
> 
> 标签：crystal-reports

如何计算水晶报表中一列的总和？

例如：

```
[No] [Name] [value]
 1    a      2
 1    a      3
 1    a      5
 1    a      4
 2    b      1
 2    b      2
 3    c      10 
```

我想这样显示：

```
[No] [Name] [Value]
 1    a      14
 2    b      3
 3    c      10 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:03:34.013

看起来您必须这样做（假设 value 列是数字）：

*   将所有 3 列添加到您的报告中
*   为 [no] 和 [name] 添加分组
*   单击 [value] 字段（在报告上），然后单击摘要按钮
    *   为“计算此摘要”选择总和
    *   为方便起见，请勾选“添加到所有组级别”
*   将页眉 #1 和页眉 #2 中自动创建的列复制或拖动到页脚 #2
*   抑制节组标题#1、标题#2、细节和页脚#2

这应该给你你正在寻找的东西。让我们知道你是怎么做出来的。

# security - RFID芯片上的UID可以被覆盖吗？

> ID：15477952
> 
> 赞同：1
> 
> 时间：2013-03-18T13:24:10.363
> 
> 标签：security, overriding, nfc, uuid, rfid

我正在做一个项目，我使用 RFID 芯片来识别不同的单元，使用芯片上的 UID。但是想到了一个安全问题。是否有可能覆盖或欺骗 RFID 芯片的 UID？以及 UID 是如何存储在 RFID 芯片上的？它是硬连线（ROM）还是一般读/写内存存储的一部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:15:32.420

根据您使用的 RFID 芯片，芯片的 ID 可能是：

1.  非唯一：32 位 UID 集几乎用尽。制造商开始重复使用旧的唯一 ID。剩余的 32 位 ID 范围在 ISO 14443 标准中被指定为非唯一的，不能被认为是唯一的。
2.  随机生成：每次访问芯片都会不同
3.  可覆盖：某些产品具有可配置的 ID
4.  欺骗：某些设备可以模拟某些 RFID 芯片，包括 ID。

一般来说，我会说，不要仅仅依靠芯片的 ID 来保证系统的安全性，这是一种很好的安全做法。根据您的安全需求，您可能希望使用提供适当身份验证功能的 RFID 芯片。

# codeigniter - codeigniter txt文件上传

> ID：15477957
> 
> 赞同：2
> 
> 时间：2013-03-18T13:24:18.923
> 
> 标签：codeigniter, file-upload

我正在使用 codeigniter，当我尝试上传一些文本文件时发现了一个奇怪的情况。

使用指示（[CI doc](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)）的方法文档一切正常，但是如果我尝试上传包含字符串'//'（不带引号）的文件，我得到的结果是“不允许您尝试上传的文件类型。”

任何想法？

使用的代码：（控制器）

```
function do_upload() {
    $config['upload_path'] = APPPATH.'uploads/';
    $config['allowed_types'] = 'txt|csv';
    $config['max_size'] = '1024';
    $config['max_width']  = '0';
    $config['max_height']  = '0';
    $this->load->library('upload', $config);
    @var_dump($_FILES['userfile']);   // debug
    if (!$this->upload->do_upload()) {
        $error = array('error' => $this->upload->display_errors());
        $this->load->view('upload_form', $error);
    } else 
        echo "<br>upload ok";
} 
```

upload_form.php（查看）：

```
<?php 
    if (isset($error)) echo $error;
    echo form_open_multipart('supervisor/do_upload'); 
    echo form_label('File', 'userfile');
    echo form_upload('userfile');
    echo form_submit('submit', 'Upload');
    echo form_close() 
?> 
```

例如：（.txt 用于上传）

```
[file1.txt]:
THIS IS A TEXT FILE     # work fine

[file2.txt]:
THIS IS A // TEXT FILE    # fail!  note: {blank}//{blank} 
```

输出（上传file1.txt）

```
array(5) { ["name"]=> string(9) "file1.txt" ["type"]=> string(10) "text/plain" ["tmp_name"]=> string(14) "/tmp/phpLVaMGs" ["error"]=> int(0) ["size"]=> int(19) }
upload ok 
```

输出（上传file2.txt）

```
array(5) { ["name"]=> string(9) "file2.txt" ["type"]=> string(10) "text/plain" ["tmp_name"]=> string(14) "/tmp/phpFu4znR" ["error"]=> int(0) ["size"]=> int(22) }

The filetype you are attempting to upload is not allowed.
... 
```

Firebug POST：（上传file2.txt）

```
userfile    THIS IS A // TEXT FILE
submit  Upload
Fuente
-----------------------------15028408581691128039842883428 
Content-Disposition: form-data; name="userfile"; filename="file2.txt" 
Content-Type: text/plain 
THIS IS A // TEXT FILE 
-----------------------------15028408581691128039842883428 
Content-Disposition: form-data; name="submit" 
Upload 
-----------------------------15028408581691128039842883428-- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:56:32.307

我多次遇到这个问题，我总是在使用新的系统文件夹时进行以下修复。这是一个 CI 错误。请让我知道它是否有效？

**转到系统/库/Uploads.php——第 1059 行**

```
@exec('file --brief --mime-type ' . escapeshellarg($file['tmp_path']), $output, $return_code); 
```

**变成：**

```
@exec('file --brief --mime-type ' . escapeshellarg($file['tmp_name']), $output, $return_code); 
```

**现在看看第 1044-1045 行**。它应该看起来像：

```
$this->file_type = @mime_content_type($file['tmp_name']);
return; 
```

**更改返回语句：**

```
$this->file_type = @mime_content_type($file['tmp_name']);
if(strlen($this->file_type) > 0) return; 
```

# c# - 如何显式更改 ADO.Net DataRow 的 RowState？

> ID：15477962
> 
> 赞同：14
> 
> 时间：2013-03-18T13:24:28.693
> 
> 标签：c#, ado.net

给定 ADO.Net `DataRow`，我如何将行的 RowState 从更改`Added`为`Modified`or `Deleted`？

我尝试直接设置属性：

```
myDataSet.Tables[0].Rows[0].RowState = DataViewRowState.ModifiedOriginal; 
```

导致来自编译器的以下错误消息：

```
error CS0200: Property or indexer 'DataRow.RowState' cannot be assigned to -- it is read only 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-18T13:40:58.397

尽管有一些方法可以`RowState`显式设置属性，例如`SetAdded`和`SetModified`，`Delete`但我认为最好了解自动发生的具体情况。

如果您需要将 设置`RowState`为不变，则调用`AcceptChanges`该行并从那里开始。如果您需要它处于修改状态，而当前不是，则很有可能您应该调用逻辑中`AcceptChanges`的`DataRow`or`DataTable`其他地方 - 这样，当您通过以下代码对行进行修改时：

```
row["field"] = "New Value"; 
```

它将更改为`RowState`，`Modified`但现在它也有一个基线，即`Original`行状态，因为您之前已经接受了更改。

我的观点是，是的，您可以`RowState`使用其中的一些方法显式设置，但我觉得您可能只需要更像预期的那样使用 ADO.NET 接口。

# ruby - 为什么使用 OSX 系统 Ruby 而不是 RVM 默认值（SilverStripe-Compass 模块）

> ID：15477963
> 
> 赞同：0
> 
> 时间：2013-03-18T13:24:34.663
> 
> 标签：ruby, macos, rvm, silverstripe, compass-geolocation

我最近使用 Composer 将我的开发服务器上的 SilverStripe 更新到 v3.0.5，它恰好引入了 silverstripe-compass 模块。我碰巧在外部使用指南针（不是 SilverStripe 模块）。

在尝试重建站点时`/dev/build?flush=all`，我收到以下错误：

```
[User Error] Compass Error:LoadError on line 36 of /Library/Ruby/Site/1.8/rubygems/custom_require.rb: no such file to load -- bundler/setupRun with --trace to see the full backtrace 
```

当 SilverStripe 尝试执行指南针构建时，似乎正在使用旧的 OSX Ruby，并且忽略了 RVM 管理的默认 Ruby。

默认的 RVM ruby​​（来自 bash）：

```
$ which ruby
  /Users/myosx/.rvm/rubies/ruby-1.9.3-p392/bin/ruby 
```

有什么想法可以防止这种情况发生吗？如何防止使用 OSX Ruby？

# c++ - 基于事件的 shell 脚本

> ID：15477964
> 
> 赞同：0
> 
> 时间：2013-03-18T13:24:47.873
> 
> 标签：c++, linux, shell, compilation

我有两个必须编译的文件。我想编写类似基于事件的 shell 脚本，它先编译第一个文件，然后再编译第二个文件。是否可以编写基于事件的 shell 脚本来在操作 1 完成时执行操作 2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:28:10.417

那个东西被称为[`make`](http://www.gnu.org/software/make)，它允许你定义目标、依赖关系和规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T13:26:35.550

是的，就像这样：

```
#!/bin/sh
action1
action2 
```

# python - 使用原始 SQL 时数据库没有变化

> ID：15477973
> 
> 赞同：0
> 
> 时间：2013-03-18T13:25:04.210
> 
> 标签：python, sql, django

我需要向数据库写入许多简单的记录，并且使用 orm 方法非常慢，所以我决定尝试原始 SQL。我写了代码，这里是：

```
for row in rows:
    name = row.split('\t')[0].lower()
    print name
    try:
        cursor.execute("INSERT INTO domain_browser_domain (name) VALUES (%s)", [name])
    except django.db.utils.IntegrityError:
        continue 
```

问题是......它实际上没有向数据库写入任何内容。字段`name`被定义为唯一的，因此当`execute`方法不在`try`块中时，它会返回`IntegrityError`，因为数据库中已经有一些记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:04:20.890

我认为您需要在`name`变量中的每个值之后添加逗号。由于您的查询现在已构建，它最终将如下所示：

`INSERT INTO domain_browser_domain (name) VALUES (one two three)`没有逗号。

您需要在执行查询之前对其进行格式化。

print 语句的输出是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:36:53.263

你似乎已经回答了你自己的问题。您无法将新行插入到数据库中，因为它违反*了数据库本身*的完整性约束。这不是 Django 阻止你做某事的实例。相反，Django 正在解释从数据库返回的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:28:35.533

`transaction.commit_unless_managed()`后使用`cursor.execute()`。一切正常，但它的性能仍然很糟糕。我在某处读到这是因为 SQLite 每次执行代码时都会打开文件，并且在它刚刚关闭文件之后立即打开文件。因此，如果您确实需要加快操作执行 - 只需使用`bulk_create()`方法，它在[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#bulk-create)中进行了描述。

# editor - 如何禁用 Komodo Edit 的更新建议？

> ID：15477981
> 
> 赞同：1
> 
> 时间：2013-03-18T13:25:41.583
> 
> 标签：editor, text-editor, komodoedit

每次来的更新画面真的很烦人。我应该如何停止进一步的建议？

我在跑步`Komodo Edit, version 7.1.2, build 10678, platform linux-x86_64. Built on Fri Aug 17 19:51:14 2012`。

![在此处输入图像描述](../Images/87dd490e27bfc2ae0085dacbab2b9076.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:18:12.290

请看一下 - [http://community.activestate.com/faq/disable-or-modify-komodo-auto-update-feature](http://community.activestate.com/faq/disable-or-modify-komodo-auto-update-feature)

不过得问一下——你为什么不想更新到 7.1.3 呢？或者 8.0 就这一点而言，它是不久前发布的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:33:38.843

确切的标签可能不同（因为我目前在 OS X 上使用 8.0），但这些设置的一般位置在版本和平台之间应该是相似的：

如果您指的是“起始页”，请尝试转到“首选项>外观”并取消选中“启动时显示 Komodo Komodo 起始页”选项。

如果您指的是直接来自 ActiveState 的通知，请确保未选中“Preferences>Projects and Workspace>ActiveState Notification Message”下标记为“Enable notification messages from ActiveState”的设置。

# java - 将二维字符串数组转换为二维双精度

> ID：15477983
> 
> 赞同：0
> 
> 时间：2013-03-18T13:25:44.240
> 
> 标签：java, arrays, nullpointerexception

我现在有点困惑。我制作了这个函数来将我的二维字符串数组重写为二维双精度数组。但它正在投射空指针异常。d2 中的数据格式为：String[i][0/1] 其中 0 和 1 是格式为“0.3343434”的数字。

```
 public void StringToDouble () {
     unsorted = new double[d2.length][2];

     for(int i = 0; i < d2.length; i++)
    {
        unsorted[i][0] = Double.parseDouble(d2[i][0]);    
        unsorted[i][1] = Double.parseDouble(d2[i][1]);
    }

} 
```

当我打印 unsorted[0][0] 和 [1][1] 时出现错误。

这是整个代码。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.nio.MappedByteBuffer;
import java.nio.channels.FileChannel;
import java.nio.charset.Charset;
import java.util.ArrayList;
import java.util.Scanner;

public class LoadAndSort {

String raw;
double [][] data;
String [] datastring;

// 2D CONVERT

String [] d1;
String [][] d2;
double[][] unsorted;
double [][] sorted;
String path = "src/data.dat";

 public LoadAndSort () throws IOException {

    // # Reads file from disk and stores to variable.
    datas = readFile(path);
    // # Splits the content, and sorts it into a huge string with relevant variables.

    // # Splits on newline to order the lines.
    d1 = datas.split("\\r?\\n");
    // # Splits on comma to convert to 2D Array. 
    Convert2D();
    // # Mirrors the 2D array because Mikal is gay.
    //MirrorArray();
    //StringToDouble();

    System.out.println(unsorted[0][0]);
    System.out.println(unsorted[0][1]);

}

private static String readFile(String path) throws IOException {
    FileInputStream stream = new FileInputStream(new File(path));
    try {
        FileChannel fc = stream.getChannel();
        MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
        /* Instead of using default, pass in a decoder. */

        return Charset.defaultCharset().decode(bb).toString();
    }
    finally {
        stream.close();
    }
}

public void Convert2D () {

    d2 = new String[d1.length][]; 
    int r = 0;
    for (String row : d1) {
        d2[r++] = row.split(",");
    }
}

public void StringToDouble () {

    unsorted = new double[d2.length][2];

    for(int i = 0; i < d2.length; i++)
    {
        unsorted[i][0] = Double.parseDouble(d2[i][0]);
        System.out.println(d2[i][0]);

        unsorted[i][1] = Double.parseDouble(d2[i][1]);
    }

}

} 
```

来自控制台的错误：

```
 0.00965821033009
 Exception in thread "main" java.lang.NullPointerException
at LoadAndSort.<init>(LoadAndSort.java:48)
at Runner.main(Runner.java:13) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:02:20.757

您`unsorted`在`StringToDouble`(with `unsorted = new double[d2.length][2];`) 中进行了初始化，但构造函数中的函数调用当前已被注释掉，因此`unsorted`永远不会被初始化。

因此它将是`null`并且`NullPointerException`将在这里抛出：

```
System.out.println(unsorted[0][0]); 
```

不确定这是否是唯一的问题，但首先要解决的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-20T15:53:46.877

您还可以使用 Java 8 中的 Streams API

```
Double[][] c = Arrays.stream(stringArray).map(
                a -> Arrays.stream(a).map(
                        b -> Double.valueOf(b)
                        ).toArray(Double[]::new)
                ).toArray(Double[][]::new); 
```

# centos - 如何从 Centos 中删除损坏的菜单链接

> ID：15477990
> 
> 赞同：1
> 
> 时间：2013-03-18T13:26:26.980
> 
> 标签：centos, gnome

[http://imtp.me/50k001tmy](http://imtp.me/50k001tmy)

请检查此链接，我正在尝试从 Centos 中删除损坏的链接。我也删除了 netbeans7.3.desktop 文件，但我认为我遗漏了一些东西。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T13:30:11.680

您可以使用包轻松编辑 GNOME 菜单`alacarte`。大多数情况下，它已经安装在您的系统上。这是一个操作方法：[http ://www.techotopia.com/index.php/Configuring_the_CentOS_6_Desktop_Menu_System](http://www.techotopia.com/index.php/Configuring_the_CentOS_6_Desktop_Menu_System)

[从操作方法](http://www.techotopia.com/index.php/Configuring_the_CentOS_6_Desktop_Menu_System#Adding_and_Deleting_a_Menu_Item)：

> 菜单项可能会被完全隐藏或删除。只需关闭菜单配置对话框中项目旁边的切换按钮即可隐藏菜单项。通过在菜单配置对话框中右键单击项目并从弹出菜单中选择删除来删除项目。

# dynamics-ax-2009 - 动态 ax 2009 中部分用户的公司限制

> ID：15477993
> 
> 赞同：1
> 
> 时间：2013-03-18T13:26:34.310
> 
> 标签：dynamics-ax-2009, microsoft-dynamics

我试图限制用户只能访问 2 或 3 家公司。我添加了代码以过滤 SysDataAreaSelect 表单中的公司，但它仅适用于状态栏中存在的链接。它不适用于面包屑栏中显示的公司列表。我可以隐藏面包屑栏，但如果我这样做，状态栏中的链接也会隐藏。

有没有办法用新表单或上述问题的任何解决方案覆盖 SysDataAreaSelect 表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:37:38.747

我相信您正在寻找的是用户安全领域。域只是公司组；当用户在域内被分配权限时，他们可以访问该域内所有公司的特定权限。如果用户在公司内没有任何权限，他们将不会在下拉列表中看到该公司。

您可以在此处阅读有关域的更多信息： [http ://technet.microsoft.com/en-us/library/aa834373(v=ax.50).aspx](http://technet.microsoft.com/en-us/library/aa834373%28v=ax.50%29.aspx)

# c# - 从 linqpad 或控制台应用程序运行 asp.net mvc 应用程序

> ID：15477996
> 
> 赞同：3
> 
> 时间：2013-03-18T13:26:38.950
> 
> 标签：c#, asp.net-mvc, linqpad

如何从我的 mvc 应用程序的某些操作中启动并获取 ActionResult，仅使用 Linqpad 或控制台应用程序？

我知道我可以创建 MvcApplication 类实例：

```
var mvcApplication = new Web.MvcApplication(); 
```

然后创建控制器：

```
var homeController = new Web.Controllers.HomeController(); 
```

甚至运行控制器的动作

```
homeController.Index() 
```

但它什么也不返回。mvc 应用程序的生命周期是什么？我应该调用哪些方法来模拟来自用户的 Web 请求？

编辑

* * *

这里有一些关于 ASP.NET MVC 生命周期的好帖子，但不幸的是我还不能解决我的问题

[http://stephenwalther.com/archive/2008/03/18/asp-net-mvc-in-depth-the-life-of-an-asp-net-mvc-request.aspx](http://stephenwalther.com/archive/2008/03/18/asp-net-mvc-in-depth-the-life-of-an-asp-net-mvc-request.aspx)

[http://blog.stevensanderson.com/2007/11/20/aspnet-mvc-pipeline-lifecycle/](http://blog.stevensanderson.com/2007/11/20/aspnet-mvc-pipeline-lifecycle/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-26T15:14:36.947

我知道这是一个老问题，可能会在其他地方得到回答，但在我正在处理的一个项目中，我们可以使用 Linqpad 调试控制器操作并获取返回值。

简而言之，你需要告诉 Linqpad 返回一些东西：

```
var result = homeController.Index();
result.Dump(); 
```

您可能还需要模拟您的上下文并将 Visual Studio 附加为调试器。

完整的代码片段：

```
void Main()
{       
    using(var svc = new  CrmOrganizationServiceContext(new CrmConnection("Xrm"))) 
    {
        DummyIdentity User = new DummyIdentity();

        using (var context = new XrmDataContext(svc)) 
        {
            // Attach the Visual Studio debugger
            System.Diagnostics.Debugger.Launch();
            // Instantiate the Controller to be tested
            var controller = new HomeController(svc);
            // Instantiate the Context, this is needed for IPrincipal User
            var controllerContext = new ControllerContext(); 

            controllerContext.HttpContext = new DummyHttpContext();
            controller.ControllerContext = controllerContext; 

            // Test the action
            var result = controller.Index();
            result.Dump();
        }
    }             
}

// Below is the Mocking classes used to sub in Context, User, etc.
public class DummyHttpContext:HttpContextBase {
    public override IPrincipal User {get {return new  DummyPrincipal();}}
}

public class DummyPrincipal : IPrincipal 
{
    public bool IsInRole(string role) {return role == "User";} 
    public IIdentity Identity {get {return new DummyIdentity();}}
}

public class DummyIdentity : IIdentity 
{
    public string AuthenticationType { get {return "?";} }
    public bool IsAuthenticated { get {return true;}}
    public string Name { get {return "sampleuser@email.com";} }
} 
```

系统会提示您选择调试器，选择构建应用的 Visual Studio 实例。

我们有一个针对 MVC-CRM 的特定设置，所以这可能不适用于所有人，但希望这会帮助其他人。

# php - PHP XMLReader，获取版本和编码

> ID：15477999
> 
> 赞同：3
> 
> 时间：2013-03-18T13:27:01.240
> 
> 标签：php, xml, xmlreader

我目前正在重写一个 PHP 类，该类试图将 XML 文件拆分为更小的块，以使用 XMLReader 和 XMLWriter 而不是当前的基本文件系统和正则表达式方法。

但是，我不知道如何从 XML 序言中获取版本、编码和独立标志。

我的测试 XML 文件的开头如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE fakedoctype SYSTEM "fake_doc_type.dtd">

 <!--
 This is a comment, it's here to try and get the parser to break in some way
 --> 

<root attribute="value" otherattribute="othervalue"> 
```

我可以用阅读器打开它并使用 read()、next() 等浏览文档，但我似乎无法得到`<?xml ... ?>`. 我能够访问的第一件事是伪造的 DOCTYPE。

我的测试代码如下：

```
$a = new XMLReader ();
var_dump ($a -> open ('/path/to/test/file.xml')) // true
var_dump ($a -> nodeType); // 0
var_dump ($a -> name); // ""
var_dump ($a -> readOuterXML ()); // ''
var_dump ($a -> read ()); // true
var_dump ($a -> nodeType); // 10
var_dump ($a -> readOuterXML ()); // <!DOCTYPE fakedoctype SYSTEM "fake_doc_type.dtd"> 
```

当然，我总是可以假设 XML 1.0，编码 UTF8 和独立 = 是的，但为了正确起见，我真的希望能够获取源提要中的值并在生成拆分文件时使用它们。

XMLReader 和 XMLwriter 上的文档似乎很差，所以我很可能错过了文档中的某些内容。有谁知道在这种情况下该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T09:14:47.287

我所知道的`XMLReader`即使它有 常数，我在 属性中`XMLReader::XML_DECLARATION`遍历文档时也从未体验过它。`XMLReader::read()``XMLReader::$nodeType`

看起来它被跳过了，我也想知道为什么会这样，我还没有找到任何标志或选项来改变这种行为。

对于输出，`XMLReader`始终返回 UTF-8 编码的字符串。这与 PHP 中其他基于 libxml 的部分相同。所以从那一边，一切都清楚了。但我认为这不是您感兴趣的部分，而是您使用打开的文件中的具体字符串输入`XMLReader::open()`。

不是专门因为`XMLReader`我曾经创建[了一个我命名的实用程序类`XMLRecoder`](https://gist.github.com/hakre/5194634)，它能够基于 XML 声明和 BOM 检测 XML 字符串的编码。我认为你应该两者都做。这是我认为你仍然需要使用正则表达式的一部分，但由于 XML 声明必须是第一件事，而且它是一个处理指令 (PI)，它的[*定义非常好和严格*](http://www.w3.org/TR/REC-xml/#sec-prolog-dtd)，你应该能够在那里窥视。

这是`XMLRecoder`代码中的一些相关部分：

```
### excerpt from https://gist.github.com/hakre/5194634 

/**
 * pcre pattern to access EncodingDecl, see <http://www.w3.org/TR/REC-xml/#sec-prolog-dtd>
 */
const DECL_PATTERN = '(^<\?xml\s+version\s*=\s*(["\'])(1\.\d+)\1\s+encoding\s*=\s*(["\'])(((?!\3).)*)\3)';
const DECL_ENC_GROUP = 4;
const ENC_PATTERN = '(^[A-Za-z][A-Za-z0-9._-]*$)';

...

($result = preg_match(self::DECL_PATTERN, $buffer, $matches, PREG_OFFSET_CAPTURE))
    && $result = $matches[self::DECL_ENC_GROUP]; 
```

正如这表明它一直到编码，所以它不完整。但是，对于提取编码的需要（以及您需要的版本），它应该可以完成这项工作。我已经针对大量（数千）随机 XML 文档进行了测试以进行测试。

另一部分是BOM检测：

```
### excerpt from https://gist.github.com/hakre/5194634 

const BOM_UTF_8 = "\xEF\xBB\xBF";
const BOM_UTF_32LE = "\xFF\xFE\x00\x00";
const BOM_UTF_16LE = "\xFF\xFE";
const BOM_UTF_32BE = "\x00\x00\xFE\xFF";
const BOM_UTF_16BE = "\xFE\xFF";

...

/**
 * @param string $string string (recommended length 4 characters/octets)
 * @param string $default (optional) if none detected what to return
 * @return string Encoding, if it can not be detected defaults $default (NULL)
 * @throws InvalidArgumentException
 */
public function detectEncodingViaBom($string, $default = NULL)
{
    $len = strlen($string);

    if ($len > 4) {
        $string = substr($string, 0, 4);
    } elseif ($len < 4) {
        throw new InvalidArgumentException(sprintf("Need at least four characters, %d given.", $len));
    }

    switch (true) {
        case $string === self::BOM_UTF_16BE . $string[2] . $string[3]:
            return "UTF-16BE";

        case $string === self::BOM_UTF_8 . $string[3]:
            return "UTF-8";

        case $string === self::BOM_UTF_32LE:
            return "UTF-32LE";

        case $string === self::BOM_UTF_16LE . $string[2] . $string[3]:
            return "UTF-16LE";

        case $string === self::BOM_UTF_32BE:
            return "UTF-32BE";
    }

    return $default;
} 
```

通过 BOM 检测，我也确实针对同一组 XML 文档运行了此操作，但是，使用 BOM 的并不多。如您所见，检测顺序针对更常见的场景进行了优化，同时处理了不同 BOM 之间的重复二进制模式。我遇到的大多数文档都没有 BOM，您主要需要它来确定文档是否是 UTF-32 编码的。

希望这至少能提供一些见解。