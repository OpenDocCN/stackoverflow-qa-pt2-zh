# StackOverflow 问答 14123000-14123999

# java - 将 2 个集合中的 MongoDB 查询结果加入 1 个 JSON

> ID：14123004
> 
> 赞同：0
> 
> 时间：2013-01-02T13:30:55.540
> 
> 标签：java, json, mongodb

在这里遇到一个问题。

我有 2 个或更多需要搜索的 mongodb 集合，搜索结果应放入 JSON 字符串。

```
// First collection
BasicDBObject dbo = new BasicDBObject();
dbo.append("transport", "car");
DBCursor cur = collectionOne.find(dbo);

// Second collection
BasicDBObject dbo = new BasicDBObject();
dbo.append("transport", "car");
DBCursor cur = collectionTwo.find(dbo); 
```

集合的结构不尽相同，但它们确实有一些共同的字段，例如'transport'，'title'，'id'，这些都是需要进入json的字段。

因此，将两个搜索的结果组合成一个 JSON 响应。

我该怎么做？

感谢您的任何帮助或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:37:33.180

鉴于查询条件在集合中是唯一的，并且 MongoDB 是一个无模式、无 SQL 的数据库，实际上您可以对所有数据集使用一个集合，根本不需要合并不同的集合。就像：

```
BasicDBObject query = new BasicDBObject();
query.append("transport", "car");
BasicDBObject fields = new BasicDBObject();
fields.append("transport", "1");
fields.append("title", "1");          //get the fields
DBCursor cur = collection.find(query, fields); 
```

# java - 大 o 符号和递归函数

> ID：14123008
> 
> 赞同：3
> 
> 时间：2013-01-02T13:31:01.320
> 
> 标签：java, recursion, big-o, time-complexity

我正在尝试学习 Big-O 表示法，但在计算递归函数的时间复杂度时遇到了困难。

您能帮我理解以下示例的时间复杂度吗？

```
public int recursiveFunction(int n) {
    if (n == 0) {
        return 0;
    }

    return Math.max(recursiveFunction(rand(n)) + 2,recursiveFunction(n - 1));
}

public int rand(int n) {
    return new Random().nextInt(n - 1);
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:18:11.010

时间将取决于`rand(n)`返回的内容，但如果您采取最坏的情况，这将是`n-2`. 所以代码简化为：

```
public int recursiveFunction(int n) {
    if (n == 0) {
        return 0;
    }

    return Math.max(recursiveFunction(n - 2) + 2,recursiveFunction(n - 1));
} 
```

它的渐近上界等于：

```
public int recursiveFunction(int n) {
    if (n == 0) {
        return 0;
    }

    recursiveFunction(n-1);
    recursiveFunction(n-1);

    return 0;
} 
```

这是一个深度为`n`且分支因子为 的递归`2`，因此 O(2^n) 时间复杂度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T14:14:53.890

递归函数不是开始学习复杂性的好地方。即使是相对简单的递归函数也可能需要相当复杂的计算来确定复杂性。

For `recursiveFunction(n)`, you call `recursiveFunction(n-1)`and `recursiveFunction(a)`where `a < n-1`，所以最坏的情况是`recursiveFunction(n-1)`一次`recursiveFunction(n-2)`又一次。这与斐波那契数列具有相同的复杂性，[它的复杂性是 O(2^n)](https://stackoverflow.com/a/360773/1711796)。您会注意到链接中的算法看起来与您的非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:20:48.440

您不了解代码的问题。因为您的代码会创建随机值，所以无法确定其运行时复杂度。由于您的“+2”和“-1”，程序也有可能永远不会结束。然而，这不太可能但可能，因此只能说它是 O(infinite)。

bigO 表示法的常见情况：

**你只有一个循环：**

```
for(int k=0;k<n;++k) {} 
```

这是 O(n)，因为你有 n 次迭代

**依次循环两个或多个循环：**

```
for(int k=0;k<n;++k) {}
for(int l=0;l<n;++l) {} 
```

来到 O(2*n)，但常数在 bigO 上无关紧要，所以它是 O(n)

**纠缠循环：**

```
for(int k=0;k<n;++k) {
    for(int l=0;l<n;++l) {
    }
} 
```

是 O(n²),

```
for(int k=0;k<n;++k) {
    for(int l=0;l<n;++l) {
        for(int m=0;m<n;++m) {
        }
    }
} 
```

是 O(n³) 等等

对于搜索/比较算法，您**将遇到的最常见的复杂性是**

```
for(int k=0;k<n;++k) {
    for(int l=k;l<n;++l) {// note here: l=k instead of l=0
    }
} 
```

是 O(n*log(n))

有关更多详细信息，请使用谷歌。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-23T09:10:39.243

你在这里选择了一个相当棘手的问题。Math.Max 的计算并不重要，重要的是两个递归调用。

当 n == 1 时出现问题，因为您调用 rand (1)，它调用未定义的 Random().nextInt (0) - 它应该返回 >= 0 且 < 0 的随机整数不可能。让我们希望它返回 0 - 如果不是，我们就有麻烦了。

recursiveFunction (n) 调用 recursiveFunction (n - 1)，并使用随机 i 再次调用 recursiveFunction (i)，0 <= i <= n - 2。让我们制作一个最大调用次数表，计数1 用于初始调用（假设 rand (1) 返回 0，并且每隔一个调用返回 n - 2）：

```
n = 0: 1 calls
n = 1: 1 + 1 + 1 = 3 calls
n = 2: 1 + 1 + 3 = 5 calls
n = 3: 1 + 3 + 5 = 9 calls
n = 4: 1 + 5 + 9 = 15 calls
n = 5: 1 + 9 + 15 = 25 calls
n = 6: 1 + 15 + 25 = 41 calls
n = 7: 1 + 25 + 41 = 67 calls
n = 8: 1 + 41 + 67 = 109 calls
n = 9: 1 + 67 + 109 = 177 calls
n = 10: 1 + 109 + 177 = 287 calls 
```

调用的数量增长很快，但不如 2^n 快。我会说它是 O (c^n)，c = sqrt (1.25) + 0.5。这是最坏的情况；平均要少很多。

# css - iOS5 CSS在方向改变时缩放

> ID：14123011
> 
> 赞同：0
> 
> 时间：2013-01-02T13:31:03.780
> 
> 标签：css, mobile

在 (iOS5) iPad 上查看此站点：http: [//viewpoint.ca/mobilemap](http://viewpoint.ca/mobilemap)

我最近一定做了一些事情，但是在撤消了一堆我改变的事情之后，我似乎找不到问题所在。

如果您更改方向，页面会缩放而不是重新调整大小，并导致一些非常奇怪的拉伸。

一旦您专注于表单元素，它就会恢复正常......有人知道这是什么吗？

非常感谢任何建议/帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:51:00.127

我的赌注是第二个视口元标记——也许也可以尝试在其中放置：width=device-width。

另外，我会更改第二个的 id，因为您应该使用具有相同 id 的元素。

最后 - 我不记得曾经见过带有媒体属性的元标记。我不确定它是否能如您所愿。您可能可以安全地摆脱其中一个声明...

# java - 无法通过 jni 在 java 类中找到构造函数

> ID：14123014
> 
> 赞同：2
> 
> 时间：2013-01-02T13:31:05.643
> 
> 标签：java, android, android-ndk, java-native-interface, android-source

我正在为我目前正在构建的自定义 rom 开发系统应用程序级别的服务。该服务执行一些 JNI 调用，我的 c++ 代码应该返回一个自定义结果类的对象。当它在普通设备（例如nexus 7）上作为普通应用程序运行时，一切正常，完全没有问题。

但现在出现了奇怪的部分：当我将服务放在我的 rom 目录中并编译所有内容时，它确实找到了我的结果对象的类，但它没有通过 GetMethodID 或该类的任何其他方法找到构造函数。

以下是我的一些代码片段：

1.  被调用以将结果对象返回到我的 java 代码的方法。

    ```
     ```
    static jobject wrapResult(jint rc, jint errCode,
                jstring errString) {
        JNIEnv *env = GetJniEnv();
        jclass lresultClass = env->FindClass(
                    "pathtoclass/Result");
        if (!lresultClass)
            LOGW(TAG, "!resultclass");

           jmethodID constructor = GetJniEnv()->GetMethodID(lresultClass, "<init>",
                    "(IILjava/lang/String;)V"); 
           if (!constructor)
                LOGW(TAG, "!constructor");
       jobject obj = env->NewObject(resultClass, constructor, rc, errCode,
       errString);
       return obj; 
    ```

    }

    JNIEnv* GetJniEnv() {
        JNIEnv* pEnv = NULL;
        pJVM->GetEnv((void**) &pEnv, JNI_VERSION_1_4);
        pJVM->AttachCurrentThread(&pEnv, NULL);
        return pEnv;
    } 
    ```

我的java结果类中的构造函数：

```
public Result(int result, int errType, String errMsg) {
    this.result = result;
    this.errType = errType;
    this.errMsg = errMsg;
} 
```

我正在为galaxy nexus maguro 构建，当它尝试获取构造函数的methodID 时代码失败。我不知道为什么它会找到类但没有方法。

# java - 我不断收到“无法从静态上下文引用非静态方法”

> ID：14123015
> 
> 赞同：0
> 
> 时间：2013-01-02T13:31:07.827
> 
> 标签：java

该方法应该接受 3 个参数 - String、double 和 String。然后它将返回一个要在 main 方法中打印的值。我该怎么做呢？这就是我所做的

```
 import javax.swing.JOptionPane;
    import javax.swing.JTextArea;

    public class coordinates
    {
        public static void main(String args[])
        {   
            double angle=0, az = 0;
            JOptionPane.showMessageDialog(null, "Hello, this is the 'Bearing to Azimuth' converter.\nFirst, you must input whether the angle is from the North or from the South, input the angle, and then input whether it is East or West.", "Bearing to Azimuth converter", JOptionPane.PLAIN_MESSAGE);
            String ns = JOptionPane.showInputDialog("Input n for North and s for South:");
            String inputangle = JOptionPane.showInputDialog("Input the angle in decimal format:");
            angle = Double.parseDouble(inputangle);
            String ew = JOptionPane.showInputDialog("Input e for East and w for West:");

            convertToSouthAzimuth(ns, angle, ew);

            JOptionPane.showMessageDialog(null, "The converted azimuth is " + az, "Bearing to Azimuth converter", JOptionPane.PLAIN_MESSAGE);
    } //end main method

        public double convertToSouthAzimuth(String ns, double angle, String ew)
        {
            double az = 0;
            if (ns.equals("n")||ns.equals("N")) {
                if (ew.equals("e")||ew.equals("E")) {az= 180+angle;}
                if(ew.equals("w")|| ew.equals("W")){az= 180-angle;}
            }
            if (ns.equals("s")||ns.equals("S")) {
                if (ew.equals("e")||ew.equals("E")) {az= 360-angle;}
                if (ew.equals("w")||ew.equals("W")) {az= angle;}
            }
            return az;
        } //end convertToSouthAzimuth method
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T13:34:21.590

该`convertToSouthAzimuth`方法尚未声明为`static`，因此编译器希望在该类的实例上调用它。但是，您的`main`方法**是**静态的，因此没有该类的实例可用。

如果`convertToSouthAzimuth`仅适用于传递的参数，并且与当前实例无关，那么您可以将其更改为静态方法：

```
public static double convertToSouthAzimuth(...) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:34:16.017

改变这个：

```
public double convertToSouthAzimuth(...) { } 
```

至

```
public static double convertToSouthAzimuth(...) {} 
```

因为 main 是一个静态方法，你不能在其中调用任何非静态方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T13:34:39.770

您需要将`static`关键字添加到您的方法`convertToSouthAzimuth()`中，因为您是从您的`main()`-method 中引用它的，它本身就是一个静态方法。

如果您不想将其称为静态，则可以通过将其包含在新类中来避免这种**情况**。

我故意遗漏了新类的构造函数。

像这样的东西：

```
public class AzimuthConverter {

   public double convertToSouthAzimuth(String s, Double d, String s){
       return someValue;
   }
} 
```

然后做

`AzimuthConverter myConverter = new AzimuthConverter()`

并跟进

`double myResult = myConverter.convertToSouthAzimuth(value);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T13:35:03.150

静态方法属于*类*，而非静态方法属于类*实例*。

因此你需要做类似的事情

```
...
new coordinates().convertToSouthAzimuth(ns, angle, ew);
... 
```

或者只是将`convertToSouthAzimuth(...)`方法设为静态，这在这种特殊情况下可能是一个更好的选择，因为它对类没有任何影响（双关语）`coordinates`（它甚至可以移动到辅助类，正如@limelights 在另一个回答）。

干杯，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T13:57:52.637

由于其他人已经回答了您的错误，我想指出您的代码中的另一个增强功能。你可以使用[String.equalIgonreCase(String)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)而不是

```
 if (ns.equals("n")||ns.equals("N")) { 
```

可

```
 if (ns.equalIgonreCase("n")) { 
```

# vba - Excel/VBA 中的禁用/启用按钮

> ID：14123017
> 
> 赞同：9
> 
> 时间：2013-01-02T13:31:16.837
> 
> 标签：vba, excel

我正在 VBA/Excel 中尝试以下功能：

```
Sub function_name()
  button.enabled=false
  Call Long_Function       ' duration: 10sec
  button.enabled=true
End Sub 
```

出于某种原因，此按钮禁用不起作用（它在 excel 工作表中保持启用状态）我尝试尝试使用 DoEvents 和延迟，但没有运气。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-02T15:01:41.467

以下对我有用（Excel 2010）

```
Dim b1 As Button

Set b1 = ActiveSheet.Buttons("Button 1")

b1.Font.ColorIndex = 15
b1.Enabled = False
Application.Cursor = xlWait
Call aLongAction
b1.Enabled = True
b1.Font.ColorIndex = 1
Application.Cursor = xlDefault 
```

> 请注意，`.enabled = False`不会使按钮变灰。

必须明确设置字体颜色才能使其变灰。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T13:37:01.500

...我不知道您是否使用了 activex 按钮，但是当我在 Excel 中的 sheet1 中插入一个名为 CommandButton1 的 activex 按钮时，以下代码可以正常工作：

```
Sub test()

   Sheets(1).CommandButton1.Enabled = False

End Sub 
```

希望这可以帮助...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-22T07:14:53.883

太好了 ！！！它正在工作并轻松解决了我一天前的问题

```
Dim b1 As Button

Set b1 = ActiveSheet.Buttons("Button 1")

b1.Enabled = False 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-08-08T17:44:53.870

其他人说设置`button.enabled = false`不会阻止按钮触发是正确的。但是，我发现设置`button.visible = false`确实有效。`visible`该按钮会消失，并且在您再次设置为之前无法单击`true`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-21T22:08:46.813

这对我有用（Excel 2016）有一个新的 ActiveX 按钮，为你的按钮分配一个控件，你就准备好了。

```
Sub deactivate_buttons()

     ActiveSheet.Shapes.Item("CommandButton1").ControlFormat.Enabled = False

End Sub 
```

它将 ActiveX 按钮属性框中的“启用”属性更改为 False，并且该按钮变为非活动状态并显示为灰色。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-03T19:47:58.260

我正在使用 excel 2010 及以下的 VBA 代码，它适用于表单按钮。它从按钮中删除分配的宏并在下一个命令中分配。

要禁用：

```
ActiveSheet.Shapes("Button Name").OnAction = Empty
ActiveSheet.Shapes("Button Name").DrawingObject.Font.ColorIndex = 16 
```

启用：

```
ActiveSheet.Shapes("Button Name").OnAction = ActiveWorkbook.Name & "!Macro function Name with _Click"
ActiveSheet.Shapes("Button Name").DrawingObject.Font.ColorIndex = 1 
```

请注意“ActiveWorkbook.Name”保持原样。不要插入工作簿名称而不是“名称”。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-02T13:38:24.680

这就是 iDevelop 想说的[Enabled Property](http://msdn.microsoft.com/en-us/library/office/aa195862%28v=office.11%29.aspx)

所以你实际上一直在使用`enabled`，因为你最初的帖子是`enable`..

您可以尝试以下方法：

```
Sub disenable()
  sheets(1).button1.enabled=false
  DoEvents
  Application.ScreenUpdating = True

  For i = 1 To 10
    Application.Wait (Now + TimeValue("0:00:1"))
  Next i

  sheets(1).button1.enabled = False
End Sub 
```

# cakephp - CakePHP 2.1 使用包含条件查找

> ID：14123018
> 
> 赞同：4
> 
> 时间：2013-01-02T13:31:23.037
> 
> 标签：cakephp, find, cakephp-2.1, contains

我有以下型号。

1.  行业（id，名称）
2.  Movie(id, name, industry_id) [行业有很多电影]
3.  Trailer(id, name, movie_id) [电影有很多预告片]

我需要为每个.找到 6 个最新的预告片`Industry`。每部电影不需要有预告片或可以有多个[0-n]。

结果必须包含具有至少一个预告片的电影数组。

```
$this->Industry->find('all', array(
    'contain' => array(
        'Movie' => array(
            'Trailer' => array(
                'limit' => 1
            ),
            'order' => 'Movie.release DESC',
            'limit' => 6
        )
    ),
    'order' => 'Industry.name ASC'
)); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T14:19:51.007

**选项 1（最佳选项 IMO）：**

您走在正确的轨道上——您现在只需要添加使用[CakePHP 的 CuterCache 即可](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#countercache-cache-your-count)。

基本上，您`'counterCache' => true`在您的`$belongsTo`协会中设置，并添加一个字段：（`singularModel_count`在您的情况下，它将是表`trailer_count`中的字段`movies`）。然后，您可以针对该字段设置条件（请参阅下面的更改代码）。

CakePHP 的 CounterCache 通过在任何时候通过 CakePHP 方法添加/删除某些内容时，自动跟踪它有多少项目。

```
$this->Industry->find('all', array(
    'contain' => array(
        'Movie' => array(
            'conditions' => array(
                'Movie.trailer_count >' => 0  // <-- Notice this addition
            ),
            'order' => 'Movie.release DESC',
            'limit' => 6,
            'Trailer' => array(
                'limit' => 1
            ),
        )
    ),
    'order' => 'Industry.name ASC'
)); 
```

**选项 2：**

另一种选择是使用 JOIN（请参阅[CakePHP JOIN](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)）。当 CakePHP 查询由 "contain()" 调用的每个模型时，它实际上会执行单独的查询，然后在返回给您之前连接数据。因此，您不能根据子模型的条件限制父模型，因为它们实际上是单独的查询，并且 MySQL 不会知道您要在条件中引用哪个表。

选项 2 的缺点是它会使返回多个预告片之类的事情变得困难，因为您将在 Movie 和 Trailer 之间进行 INNER JOIN（可能）。

# iphone - ABAddressBookCopyArrayOfAllPeopleInSource 返回“0”对象？

> ID：14123028
> 
> 赞同：2
> 
> 时间：2013-01-02T13:31:58.787
> 
> 标签：iphone, objective-c, ios5, abaddressbook, abaddressbooksource

我正在尝试获取特定 Source 的联系人，但它返回给我 0 对象。

**像你一样，看看源是否有组，它将被添加到数组中，但如果没有组，我只需要知道这个源中的联系人数量“例如谷歌，Facebook，..”**

```
for (CFIndex i = 0; i < CFArrayGetCount(allSources); i++)
    {
        ABRecordRef aSource = CFArrayGetValueAtIndex(allSources,i);

        // Fetch all groups included in the current source
        CFArrayRef result = ABAddressBookCopyArrayOfAllGroupsInSource (myAddressBook, aSource);

        // The app displays a source if and only if it contains groups
        if (CFArrayGetCount(result) > 0)
        {
            NSMutableArray *groups = [[NSMutableArray alloc] initWithArray:(NSArray *)result];

            // Fetch the source name
            NSString *sourceName = [self nameForSource:aSource];
            //Create a MySource object that contains the source name and all its groups
            MySource *source = [[MySource alloc] initWithAllGroups:groups name:sourceName];

            // Save the source object into the array
            [list addObject:source];
            [source release];
            [groups release];
        }
        else
        {

            CFArrayRef result= ABAddressBookCopyArrayOfAllPeopleInSource(myAddressBook, aSource);

        }

        CFRelease(result);
    } 
```

# asp.net-mvc-3 - 会话没有被破坏 MVC3

> ID：14123029
> 
> 赞同：0
> 
> 时间：2013-01-02T13:32:08.137
> 
> 标签：asp.net-mvc-3, session-timeout

我正在尝试使用此 jquery 函数每 5 秒检查一次会话是否仍然存在

```
setTimeout(IsSessionAlive, 5000);

 function IsSessionAlive()
 {
    $.getJSON('@Url.Action("IsSessionAlive", "Account")', function (isAlive) {
       if (!isAlive)
         alert(isAlive);
         setTimeout(IsSessionAlive, 5000);
     });
 } 
```

这就是我试图从服务器获取会话状态的方式

```
public JsonResult IsSessionAlive()
{
   var isA = Request.IsAuthenticated;
   return Json(Session["LoggedIn"] != null, JsonRequestBehavior.AllowGet);
} 
```

只是为了测试我在 LogOn 上执行此操作的代码

```
Session["LoggedIn"] = true;
Session.Timeout = 1; 
```

我希望它应该在 1 分钟不活动后销毁会话，当我的 jquery 检查会话时，它会发现它为空，并向用户显示您必须再次输入密码的弹出窗口。但我从来没有发现会话无效！任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:43:43.977

[您可以使用jQuery idleTimer 插件](http://paulirish.com/2009/jquery-idletimer-plugin/)检测空闲超时并在超时发生时显示弹出窗口。

**示例代码：**

```
// idleTimer() takes an optional argument that defines the idle timeout
// timeout is in milliseconds; defaults to 30000
$.idleTimer(10000);

$(document).bind("idle.idleTimer", function(){
 // function you want to fire when the user goes idle
});

$(document).bind("active.idleTimer", function(){
 // function you want to fire when the user becomes active again
});

// pass the string 'destroy' to stop the timer
$.idleTimer('destroy'); 
```

# php - 保留一个对象与重新初始化它

> ID：14123030
> 
> 赞同：1
> 
> 时间：2013-01-02T13:32:22.190
> 
> 标签：php

好吧，我想这不是一个正常的如何做这个或那个 stackoverflow 问题，但也许有人可以启发我解决这个问题的更好方法。

我创建了一个接口，它可以根据一个值继承不同的“引擎”，并为所有引擎返回相同的对象。这是一个短期公寓租赁应用程序，它与其他州的其他应用程序有一些集成，显然每个都有一个 API，所以我必须知道如何在我的应用程序中以不同的方式发送和接收每个应用程序才能拥有相同的所有 API 的对象。我所做的就是初始化这样的东西。

`$flat = new API(array('engine' => 'some_api')); // the array has some more information inside but it is unimportant for the question`

现在我有一个 ID 列表，每个 ID 用于不同的 API。就像是

`$list = array(1 => 'api_1', 2 => 'api_2'); // and more ...`

**现在的问题！**

在迭代`$list`您认为更好的方法*时*，保留 API 对象内的所有可能引擎以及每个 ID 我已经在 API 对象内初始化了“引擎”（可能更好的速度/性能，因为所有内容都已分配）**或**应该foreach ID 创建一个新的 API 对象，仅初始化正确的“引擎”。（速度/性能较低，但内存管理应该更好）。

API 对象在迭代范围之外没有任何意义，因此无需进一步保留它，但如果我只启动一个对象而不是说 2 或 4，那么总的垃圾收集开销可能会更少对于我拥有的 ID 数量。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T13:37:23.837

创建/释放对象不会占用太多内存或时间。除非您拥有数千个 API，否则您不必担心它。

如果涉及到任何外部 IO，例如连接到服务器、初始化数据库连接、查询元信息或读取文件，那么尽可能少且仅在需要时这样做会更有效率，但对象的数量本身不会显着影响性能。

建议：以对您来说最易读和可维护的方式构建代码。如果你这样做，它可能足够有效。只有当你真的发现瓶颈时才开始重组。

# c# - CoverFlow控件的数据绑定选定项属性？

> ID：14123032
> 
> 赞同：0
> 
> 时间：2013-01-02T13:32:25.997
> 
> 标签：c#, xaml, windows-8, windows-runtime, coverflow

我[在 Windows 8 C# XAML App 中使用 Coverflow 控件](http://channel9.msdn.com/coding4fun/blog/Jeff-takes-off-the-cover-of-his-CoverFlow-Control-for-Windows-8--Windows-RT)。

我正在尝试将此控件的选定 Item 属性绑定到一个属性，但这没有任何效果。以下是我正在使用的代码，让我知道我在做什么错误？

```
 <controls:CoverFlow
     Height="85"
     Margin="0,40,0,0"
     HorizontalAlignment="Stretch"
     VerticalAlignment="Stretch"
     SpaceBetweenItems="35"
     SelectedItem="{Binding DiarySelectedItem.DiarySmileyId}"
     SpaceBetweenSelectedItemAndItems="40"
     ItemClick="ItemView_ItemClick"
     ItemTemplate="{StaticResource 50ItemTemplate}"
     ItemsSource="{Binding DiarySmileyIdOC}" 
     SelectedItemChanged="CoverFlow_SelectedItemChanged" /> 
```

```
/// <summary>
///     Sets and gets the DiarySelectedItem property.
///     Changes to that property's value raise the PropertyChanged event.
/// </summary>
public DiaryItemDetail DiarySelectedItem
{
    get { return _diarySelectedItem; }

    set
    {
        if (_diarySelectedItem == value)
        {
            return;
        }

        _diarySelectedItem = value;
        RaisePropertyChanged(DiarySelectedItemPropertyName);
    }
}

/// <summary>
///     Gets or sets the Diary Smiley Id Observable Collection.
/// </summary>
/// <value>
///     The Diary Smiley Id Observable Collection.
/// </value>
public ObservableCollection<int> DiarySmileyIdOC
{
    get { return _diarySmileyIdOC; }

    set
    {
        if (_diarySmileyIdOC == value)
        {
            return;
        }

        _diarySmileyIdOC = value;

        // Update bindings, no broadcast
        RaisePropertyChanged(DiarySmileyIdOCPropertyName);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T05:56:23.293

由于您绑定`ObservableCollection<int>`到`ItemsSource`,`SelectedItem`也是`int`如此。`DiarySelectedItem.DiarySmileyId`您已经通过绑定到而不是直接绑定到来考虑到这一点`DiarySelecteditem`。

这有一个副作用，尽管您实际上并没有改变`DiarySelectedItem`，而只是试图改变其`DiarySmileyId`属性的值。这可能不是您想要的，原因如下：

*   如果`DiarySelectedItem`是，则由于分配给时`null`的无声，什么都不会发生。`NullReferenceException``DiarySelectedItem.DiarySmileyId`
*   如果`DiarySelectedItem`不是`null`并且`DiaryItemDetail.DiarySmileyId`具有公共设置器，则`DiarySmileyId`分配给的实例中的属性值`DiarySelectedItem`将更改，而其他属性将保持不变。
*   如果`DiarySelectedItem`不是`null`并且`DiaryItemDetail.DiarySmileyId`没有公共设置器，则不会发生任何事情，因为`DiarySmileyId`无法分配给。

您应该有一个单独的`DiarySelectedItemId`属性来实现所需的行为：

```
public DiaryItemDetail DiarySelectedItemId
{
    get { return _diarySelectedItem.DiarySmileyId; }

    set
    {
        if (_diarySelectedItem.DiarySmileyId == value)
        {
            return;
        }

        DiarySelectedItem = GetDairyItemDetail(value); // retrieve instance from repository
        RaisePropertyChanged(DiarySelectedItemIdPropertyName);
    }
}

public DiaryItemDetail DiarySelectedItem
{
    get { return _diarySelectedItem; }

    set
    {
        if (_diarySelectedItem == value)
        {
            return;
        }

        _diarySelectedItem = value;
        RaisePropertyChanged(DiarySelectedItemPropertyName);
        // notification to change the selected item in Coverflow if selected item is changed in code
        RaisePropertyChanged(DiarySelectedItemIdPropertyName);
    }
} 
```

你怎么不设置`ObservableCollection<DiaryItemDetail>`，`ItemsSource`所以你可以直接绑定`SelectedItem`到`SelectedItem`？

# iphone - iPhone/iPad 上的悬停问题

> ID：14123035
> 
> 赞同：0
> 
> 时间：2013-01-02T13:32:31.513
> 
> 标签：iphone, css, hover

我刚刚更改了网站的布局，但遇到了一些问题 - 我有一个 iPhone 样式表，我正在选择以下内容：

```
<link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="scripts/page-phone.css" /> 
```

我在访问 iPhone 上的某些链接时遇到问题 - 我认为这是由于一些流氓 CSS 造成的，但我在追踪它时遇到了一些问题 - 在普通 CSS 中，我有以下代码：

```
.griditem {
    position: relative;
    display:inline-block;
    margin-right: 17px;
    margin-bottom: 17px;
    background-color: #777;
    -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    border-radius: 2px;
    width: 480px;
    height: 271px;
    text-align: left;
}

.titles {
    padding: 0px;
    bottom: 0px;
    position: absolute;
    left: -1px;
    right: -1px;
    top: -1px;
    -moz-border-radius: 1px 1px 0 0;
    border-radius: 1px 1px 0 0;
    text-align: center;
    display: none;
    background: rgba(0, 0, 0, 0.5);
    -moz-border-radius: 1px 1px 0 0;
    border-radius: 1px 1px 0 0;
    vertical-align: middle;
}

.griditem:hover .titles {
    display:  block;
    text-decoration: none;
}

.titles a:link {
    text-decoration: none;
}​ 
```

在我的“电话”CSS中-

```
.griditem {
    position: relative;
    display:inline-block;
    margin-right: 17px;
    margin-bottom: 17px;
    background-color: #777;
    -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
    box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
    border-radius: 2px;
    width: 480px;
    height: 271px;
    text-align: left;
}

.titles {
    padding: 5px;
    position: absolute;
    bottom: 0px;
    left: -1px;
    right: -1px;
    background: transparent url(../images/layout/white80.png) top left;
    -moz-border-radius: 1px 1px 0 0;
    border-radius: 1px 1px 0 0;
    text-align: left;
}

.titles a:link {
    text-decoration: none;
} 
```

HTML如下：

```
<a class="griditem" href="video.php" style="background-image:url(image.jpg); background-size:100% 100%;">
    <img src="spacer.png" width="100%" href="video.php" alt="Title" />
    <div class="titles">
        <div class="gridholder">
            <h5>Title</h5>
            <h6>Subtitle<BR>+</h6>
        </div>
    </div>
</a> 
```

出于某种原因，尽管在电话上链接不起作用（！）-我一直在研究这个我看不到明显的问题-查看代码有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:54:36.823

所以我通过改变布局来解决这个问题——而不是在翻转时覆盖表格的“.titles”，iphone版本总是作为“.griditem”的页脚出现——本身不是修复，更多的是一种解决方法但它有效并且看起来仍然不错，所以现在我会接受它！

这是 iPhone CSS 中“.titles”的新 CSS：

```
.titles {
    padding: 5px;
    position: absolute;
    display: block;
    bottom: 0px;
    top: 75%;
    left: -1px;
    right: -1px;
    background: rgba(0, 0, 0, 0.5);
    -moz-border-radius: 1px 1px 0 0;
    border-radius: 1px 1px 0 0;
    text-align: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:50:52.900

是否有任何使用的具体原因：尝试摆脱这一行，因为您已经在标签中
`<img src="spacer.png" width="100%" href="video.php" alt="Title" />`
指定了 HREF 。为元素 添加样式。`<a>`
`display:block``<a>`

谢谢，帕夫

# android - 获取 JSONarray 时获取 json 及其空指针异常

> ID：14123036
> 
> 赞同：0
> 
> 时间：2013-01-02T13:32:33.193
> 
> 标签：android, json, parsing, nullpointerexception

我正在使用相同的代码/示例在 android 中学习 JSON 及其解析
[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

但是在实现和运行时给出空指针异常

在开启 JSON 时 `contacts = json.getJSONArray(TAG_CONTACTS);`

```
 JSONArray contacts = null;
 private static String url = "http://api.androidhive.info/contacts/";

 public void initParsing()
 {
    ListView listView = (ListView) findViewById(R.id.listView_song);
     ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
     JSONParser jParser = new JSONParser();
     JSONObject json = jParser.getJSONFromUrl(url);
     try {
            // Getting Array of Contacts
            System.out.println("---getJSON");
            contacts = json.getJSONArray(TAG_CONTACTS);

            // looping through All Contacts
            for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);
                 System.out.println("---times");
                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);
                String email = c.getString(TAG_EMAIL);
                String address = c.getString(TAG_ADDRESS);
                String gender = c.getString(TAG_GENDER);

                // Phone number is agin JSON Object
                JSONObject phone = c.getJSONObject(TAG_PHONE);
                String mobile = phone.getString(TAG_PHONE_MOBILE);
                String home = phone.getString(TAG_PHONE_HOME);
                String office = phone.getString(TAG_PHONE_OFFICE);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_NAME, name);
                map.put(TAG_EMAIL, email);
                map.put(TAG_PHONE_MOBILE, mobile);

                // adding HashList to ArrayList
                contactList.add(map);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

//       ListAdapter adapter = new SimpleAdapter(this, contactList,
//                  R.layout.list_item,
//                  new String[] { TAG_NAME, TAG_EMAIL, TAG_PHONE_MOBILE }, new int[] {
//                          R.id.name, R.id.email, R.id.mobile });

       // setListAdapter(adapter);
    //  listView.setAdapter(new CustomArrayAdapter(this, TAG_NAME)); // setting the adapter

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:42:13.720

```
public void initParsing()
 {
    ListView listView = (ListView) findViewById(R.id.listView_song);
     ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
     JSONParser jParser = new JSONParser();
     JSONObject json = jParser.getJSONFromUrl(url);
     try {
            // Getting Array of Contacts
            System.out.println("---getJSON");
           if(json != null && json.has("contacts")){
            contacts = json.getJSONArray("contacts");

            // looping through All Contacts
            for(int i = 0; i < contacts.length(); i++){
                JSONObject c = contacts.getJSONObject(i);
                 System.out.println("---times");
                // Storing each json item in variable
                String id = c.getString(TAG_ID);
                String name = c.getString(TAG_NAME);
                String email = c.getString(TAG_EMAIL);
                String address = c.getString(TAG_ADDRESS);
                String gender = c.getString(TAG_GENDER);

                // Phone number is agin JSON Object
                JSONObject phone = c.getJSONObject(TAG_PHONE);
                String mobile = phone.getString(TAG_PHONE_MOBILE);
                String home = phone.getString(TAG_PHONE_HOME);
                String office = phone.getString(TAG_PHONE_OFFICE);

                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();

                // adding each child node to HashMap key => value
                map.put(TAG_ID, id);
                map.put(TAG_NAME, name);
                map.put(TAG_EMAIL, email);
                map.put(TAG_PHONE_MOBILE, mobile);

                // adding HashList to ArrayList
                contactList.add(map);
            }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

//       ListAdapter adapter = new SimpleAdapter(this, contactList,
//                  R.layout.list_item,
//                  new String[] { TAG_NAME, TAG_EMAIL, TAG_PHONE_MOBILE }, new int[] {
//                          R.id.name, R.id.email, R.id.mobile });

       // setListAdapter(adapter);
    //  listView.setAdapter(new CustomArrayAdapter(this, TAG_NAME)); // setting the adapter

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:37:08.143

确保 json 数组名称是正确的..尝试使用

```
contacts = json.getJSONArray("contacts"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:40:19.677

你必须使用这个：

```
contacts = json.optJSONArray("array name"); 
```

如果您的响应有一个数组，这将返回一个数组，否则它将返回`null`。

# c# - 如何获取 C# 中另一个节点值指定的节点值

> ID：14123037
> 
> 赞同：2
> 
> 时间：2013-01-02T13:32:32.540
> 
> 标签：c#, xml

我想获取节点 id 值取决于 C# 中的另一个节点值，例如：从以下 xml 文件中，我想在节点`<name>`时获取节点值`<id> = 10`

```
<studymonth2>
  <id>11</id>
  <name>November</name>
</studymonth2>

<studymonth2>
  <id>12</id>
  <name>December</name>
</studymonth2> 
```

* * *

感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:40:41.587

您可以使用以下 XPath：

```
studymonth2[id='10']/name/text() 
```

简而言之，这告诉解析器返回具有值为 10 的`name`子项`studymonth2`的`id`子项的值。

**编辑**

在 C# 中，您可以使用`XmlDocument`或`XDocument`通过 xpath 访问节点：

例如给定 xml 文件：

```
<xml>
    <studymonth2>
        <id>11</id>
        <name>November</name>
    </studymonth2>

    <studymonth2>
        <id>12</id>
        <name>December</name>
    </studymonth2>
</xml> 
```

与`XmlDocument`：

```
using System.Xml;
....
XmlDocument doc = new XmlDocument();
doc.Load(@"c:\temp\myxml.xml");

string name = doc.SelectSingleNode("//studymonth2[id='11']/name")
                 .InnerText; 
```

使用 Linq 2 Xml：

```
using System.Xml.Linq;
using System.Xml.XPath;
....
XDocument doc = XDocument.Load(@"c:\temp\myxml.xml");
string name = doc.XPathSelectElement("//studymonth2[id='11']/name").Value; 
```

# php - 表单和 FPDF - 使用 $_SESSION 初始化变量 -> 为什么 $_SESSION 为空时会被覆盖？

> ID：14123045
> 
> 赞同：0
> 
> 时间：2013-01-02T13:32:57.497
> 
> 标签：php, variables, null, initialization, session-variables

我已经构建了非常简单的 php 表单，它发布到 $_SESSION 中，然后从 $_SESSION 数据生成 pdf。我正在使用 fpdf 来生成 pdf。在通过 fpdf 输出任何内容之前，我想检查上传的文件 $_SESSION 是否为空（因为我想更改输出）

一切都按预期工作，但我真的很困惑为什么如果会话为空，为什么 $_SESSION 数据会被覆盖：

```
if(isset($_SESSION['attachments']) && !empty($_SESSION['attachments'])) {
    $attachments = $_SESSION['attachments'];
}
else {
    $attachments = "No attachments";
} 
```

现在， $_SESSION['attachments'] 包含附件的序列化路径，但如果没有上传附件，则为 null。为什么这个 if 子句初始化并覆盖 SESSION 如下：

```
var_dump($_SESSION['attachments']); 
```

输出：

```
string 'No attachments' (length=14) 
```

剥离 fpdf 脚本来演示我在做什么：

```
<?php
require('fpdf.php');

if(!isset($_SESSION)){
    session_start();
}

//Lot of other checking

if(isset($_SESSION['attachments']) && !empty($_SESSION['attachments'])) {
    $attachments = $_SESSION['attachments'];
}
else {
    $attachments = "No attachments";
}

//a lot of fpdf functions. AddMultiRow is my own function

$pdf = new PDF();
$pdf->AddPage();
$pdf->AddMultiRow(utf8_decode("Required attachments:"), $attachments, 1);
$pdf->Output(//output comes here);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:26:32.920

会话变量被 register_globals 功能注册为全局变量（指向 $_SESSION 中条目的引用）。

您需要在 PHP.ini 中禁用 register_globals。

[http://php.net/manual/en/ini.core.php#ini.register-globals](http://php.net/manual/en/ini.core.php#ini.register-globals)
[http://php.net/manual/en/security.globals.php](http://php.net/manual/en/security.globals.php)

# jsf-2 - 自定义 JSF1 组件在 JSF2 中不起作用

> ID：14123048
> 
> 赞同：1
> 
> 时间：2013-01-02T13:33:06.480
> 
> 标签：jsf-2, custom-component

我用 JSF1 编写了一个简单的自定义组件，它工作正常。但是当我在 JSF2 中使用它时，它不起作用。这是我的使用方法：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:d="http://jsftutorials.com/"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
    <h:body>
        <f:view>
          <d:ticker>Hello World!</d:ticker>
        </f:view>
    </h:body>
</html> 
```

下面是为 JSF1 创建组件的方式：

`faces-config.xml`

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
    <component>
        <component-type>ticker</component-type>
        <component-class>ticker.UITicker</component-class>
    </component>
</faces-config> 
```

`ticker.tld`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE taglib PUBLIC "-//Sun Microsystems, Inc.//DTD JSP Tag Library 1.2//EN"
                          "http://java.sun.com/dtd/web-jsptaglibrary_1_2.dtd">
<taglib>
    <tlib-version>1.0</tlib-version>
    <jsp-version>1.2</jsp-version>
    <short-name>d</short-name>
    <uri>http://jsftutorials.com/</uri>
    <tag>
        <name>ticker</name>
        <tag-class>ticker.TickerTag</tag-class>
        <body-content>JSP</body-content>
    </tag>
</taglib> 
```

`TickerTag.java`

```
package ticker;

import javax.faces.component.UIComponent;
import javax.faces.webapp.UIComponentTag;

@SuppressWarnings("deprecation")
public class TickerTag extends UIComponentTag {

    public void release() {
        super.release();
    }

    protected void setProperties(UIComponent component) {
        super.setProperties(component);

    }

    public String getComponentType() {
        return "ticker";
    }

    public String getRendererType() {
        return null;
    }
} 
```

`UITicker.java`

```
package ticker;

import java.io.IOException;

import javax.faces.component.UIOutput;
import javax.faces.context.FacesContext;
import javax.faces.context.ResponseWriter;

public class UITicker extends UIOutput {

    public void encodeBegin(FacesContext context) throws IOException {
        ResponseWriter writer = context.getResponseWriter();
        writer.startElement("div", this);
    }

    public void encodeEnd(FacesContext context) throws IOException {
        ResponseWriter writer = context.getResponseWriter();
        writer.endElement("div");
    }
} 
```

`web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
    <display-name></display-name>

    <welcome-file-list>
        <welcome-file>index.xhtml</welcome-file>
    </welcome-file-list>

    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>server</param-value>
    </context-param>

    <context-param>
        <param-name>javax.faces.CONFIG_FILES</param-name>
        <param-value>/WEB-INF/faces-config.xml</param-value>
    </context-param>

    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
</web-app> 
```

我应该改变什么才能让它在 JSF2 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:19:23.290

那是一个JSP 标记。JSP 在 JSF 2.0 中已被弃用，后来被 Facelets (XHTML) 取代。您确实在使用 Facelets 而不是 JSP。只有当您将 JSF2 与旧版 JSP 而不是 Facelets 一起使用时，您的组件才能工作。您需要将旧的 JSP 标记更改为 Facelets 标记。

以下是您需要进行的更改：

*   `faces-config.xml`: 完全删除`<component>`。

*   `ticker.tld`：将其重命名`ticker.taglib.xml`并替换为：

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <facelet-taglib 
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facelettaglibrary_2_0.xsd"
        version="2.0">
        <namespace>http://jsftutorials.com</namespace>
        <tag>
            <tag-name>ticker</tag-name>
            <component>
                <component-type>ticker</component-type>
            </component>
        </tag>
    </facelet-taglib> 
    ```

*   `TickerTag.java`: 完全删除。Facelets 不需要它。

*   `UITicker.java`：在类上添加以下注释（这将替换 中的`<component>`条目`faces-config.xml`）

    ```
    @FacesComponent("ticker")
    public class UITicker extends UIOutput { 
    ```

    *（注意：注解值必须`<component-type>`在 taglib XML 文件中匹配，而不是`<tag-name>`）*

    正如`UIOutput`默认情况下不允许文本子级一样，表示`<div>`组件基本上是错误的选择。你最好延长`UIPanel`。

    ```
    @FacesComponent("ticker")
    public class UITicker extends UIPanel { 
    ```

    *（请注意，标准`<h:panelGroup layout="block">`组件已经呈现了`<div>`类似的内容；我知道您只是在学习 JSF，但只是为了确保您确实在寻找呈现 div 的 JSF 组件）*

*   `web.xml`：添加以下上下文参数：

    ```
    <context-param>
        <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
        <param-value>/WEB-INF/ticker.taglib.xml</param-value>
    </context-param> 
    ```

    *（注意：当您将 taglib 作为 JAR 文件提供`/WEB-INF/lib`并在 JAR 中包含`.taglib.xml`文件时，这是不必要`/META-INF`的）*

在阅读/学习有关 JSF 的内容时，请确保您正在阅读针对 JSF2 而不是针对 JSF1 的正确教程/资源。很多很多事情都是以不同的方式完成的。

### 也可以看看：

*   [从 JSF 1.2 迁移到 JSF 2.0](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)

# python - Python中用于偏差校正的直方图匹配

> ID：14123049
> 
> 赞同：2
> 
> 时间：2013-01-02T13:33:08.470
> 
> 标签：python, interpolation, cdf

我试图找到观测数据的伽马函数的逆 CDF，以便找到传递函数。整个目标是通过 CDF 匹配 **CDFobs(y) = CDFsim(x)**来纠正模拟数据中的偏差。我尝试使用以下抛出和错误的方法来做到这一点。

下图显示了 CDF 和 plot(c) 中的传递函数。我正在尝试复制相同的内容。请帮助我实现情节。

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.interpolate import interp1d
import scipy.stats as st

sim = st.gamma(1,loc=0,scale=0.8) # Simulated
obs = st.gamma(2,loc=0,scale=0.7) # Observed
x = np.linspace(0,4,1000)
simpdf = sim.pdf(x)
obspdf = obs.pdf(x)
plt.plot(x,simpdf,label='Simulated')
plt.plot(x,obspdf,'r--',label='Observed')
plt.title('PDF of Observed and Simulated Precipitation')
plt.legend(loc='best')
plt.show()

plt.figure(1)
simcdf = sim.cdf(x)
obscdf = obs.cdf(x)
plt.plot(x,simcdf,label='Simulated')
plt.plot(x,obscdf,'r--',label='Observed')
plt.title('CDF of Observed and Simulated Precipitation')
plt.legend(loc='best')
plt.show()

# Inverse CDF
invcdf = interp1d(obscdf,x)
transfer_func = invcdf(simcdf)

plt.figure(2)
plt.plot(transfer_func,x,'g-')
plt.show() 
```

**回溯（最近一次通话最后）：文件“/home/bias_correction.py”，第 54 行，在 transfer_func = invcdf(simcdf)**

**文件“/usr/lib/python2.7/dist-packages/scipy/interpolate/interpolate.py”，第 357 行，在 _ *call* _ out_of_bounds = self._check_bounds(x_new)**

**_check_bounds 中的文件“/usr/lib/python2.7/dist-packages/scipy/interpolate/interpolate.py”，第 415 行引发 ValueError（“x_new 中的值高于插值” ValueError：x_new 中的值高于插值范围。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:54:10.790

我认为 interp1d 的论点是相反的。它应该是

```
invcdf = interp1d(x, obscdf) 
```

# windows - 在脚本编辑器中显示行号

> ID：14123051
> 
> 赞同：5
> 
> 时间：2013-01-02T13:33:18.453
> 
> 标签：windows, r, ide, editor, rgui

**在标准 R 环境中**有什么方法可以在 R的脚本编辑器中显示光标位置（至少是行号）？我试图查看选项但没有成功。

我正在使用 R for Windows（XP、7、..）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T13:36:19.717

根据 Ben Bolkers 的评论，在当前版本的 R 中这是不可能的（除非有人破解它）。

试试[R 工作室](http://www.rstudio.com/)。它是 R 开发的完美 IDE，我认为它具有这样的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T14:47:17.057

我认为有一点 - 如果你是认真的 - 你需要考虑比文本编辑器更强大的东西。一旦你得出这个结论，你需要考虑的第二件事是你是否将平台**仅**用于 R 或其他语言。

如果你只在 RI 中编码，认为 RStudio 很有意义，你当然应该尝试一下。对我来说，它不太“适合”我的工作方式，除了 RI，还使用 ​​Perl 和一些 Python，所以我想要可以处理多种语言的东西。我最终决定现在将[Emacs](http://www.gnu.org/software/emacs/)与[ESS](http://ess.r-project.org/)一起使用。这不像 RStudio 那样具有明显的吸引力和现代性，但它功能强大、灵活并且几乎可以在任何机器上运行。

[Vincent Goulet 的](http://vgoulet.act.ulaval.ca/en/emacs/)Emacs 和 ESS for Windows 包是一个很好的入门方法。最初我喜欢[KomodoIDE](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CD4QFjAA&url=http://www.activestate.com/komodo-ide&ei=W0fkUKziBIbvlAXDkIHIAQ&usg=AFQjCNHggx-vfbPeQ2rRa_Qx6rvXuU_NfQ&sig2=-jtwel30GBPtU3GsAvJgLw&bvm=bv.1355325884,d.dGI)，但 ActiveState 没有明确支持 R，而且我无法使用第三方实用程序使其与 R 一起使用，所以最后我选择了 ESS。ESS对我来说是个不错的选择。

# scala - 如何最好地解决 sbt 中的“可能不兼容的依赖版本”

> ID：14123055
> 
> 赞同：14
> 
> 时间：2013-01-02T13:33:48.190
> 
> 标签：scala, sbt, scala-2.9

我的项目给出以下警告：

```
[warn] Potentially incompatible versions of dependencies of {file:/some/path/}default-5bae4a:
[warn]    org.scala-lang: 2.9.2, 2.9.1 
```

我有以下依赖项：

```
libraryDependencies ++= Seq(
  "io.spray"            %   "spray-can"     % "1.0-M3",
  "io.spray"            %   "spray-routing" % "1.0-M3",
  "io.spray"            %   "spray-testkit" % "1.0-M3",
  "io.spray"            %%  "spray-json"    % "1.2.3" cross CrossVersion.full,
  "com.typesafe.akka"   %   "akka-actor"    % "2.0.3",
  "org.mongodb"         %% "casbah"         % "2.4.1",
  "com.novus"           %% "salat"          % "1.9.1",
  "org.specs2"          %%  "specs2"        % "1.12.2" % "test",
  "org.mockito"         % "mockito-all"     % "1.9.0" % "test"
) 
```

我试图弄清楚我们如何摆脱 org.scala-lang 2.9.1 依赖，但这并不像我想象的那么容易。我错过了什么技巧？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T13:46:56.673

首先，您需要通过逐个禁用它们来找出导致此问题的依赖项。然后，您可以使用针对 2.9.2 编译的该库的版本，或者如果没有这样的版本，您可以排除依赖项。

找出导致问题的依赖关系的一个很好的工具是[sbt-dependency-graph](https://github.com/jrudolph/sbt-dependency-graph)。

要排除传递依赖，可以使用 exclude 方法：

```
libraryDependencies +=
    "com.novus" %% "salat" % "1.9.1" exclude("org.scala-lang", "scalap"), 
```

请参阅“排除传递依赖项”下的[此处。](http://www.scala-sbt.org/release/docs/Library-Management.html)

# android - PowerButton中断无法使屏幕空闲

> ID：14123058
> 
> 赞同：0
> 
> 时间：2013-01-02T13:34:13.970
> 
> 标签：android, andengine

我正在使用andengine 开发安卓游戏。我面临的唯一一个问题是电源中断后我的游戏会暂停（这是正确的），但我的屏幕不会进入空闲状态。如何解决这个问题？

提前致谢

```
 getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD);
  getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
  getWindow().addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED);
  getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
          WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:21:44.123

在清单文件中将 android:configChanges="orientation|keyboard|keyboardHidden" 添加到我的活动中解决了我的问题。

# maven - Maven 3安装：安装文件不起作用

> ID：14123066
> 
> 赞同：7
> 
> 时间：2013-01-02T13:34:26.043
> 
> 标签：maven

我想使用**maven 3.0.4**将 jar 文件安装到本地存储库。

我用了：

```
./mvn install:install-file -Dfile=~/Downloads/daozero-0.5.jar -DgroupId=daozero-DartifactId=daozero -Dversion=0.5 -Dpackaging=jar 
```

它报告成功。

但是在我的项目中，daozero依赖仍然存在错误。

我检查了文件位置`/Users/someuser/.m2/repository/daozero/daozero/0.5/`，发现没有文件：`daozero-0.5.jar`

```
<dependency>
    <groupId>daozero</groupId>
    <artifactId>daozero</artifactId>
    <version>0.5</version>
    <scope>compile</scope>
</dependency> 
```

谁能帮我理解发生了什么？它以前在**maven 2.x**中工作过。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T16:46:01.097

我有一个类似的问题，文件没有从相对路径复制。

尝试使用 jar 文件的完全限定路径而不是 ~。

例如：

```
./mvn install:install-file -Dfile=/home/user1942964/Downloads/daozero-0.5.jar -DgroupId=daozero -DartifactId=daozero -Dversion=0.5 -Dpackaging=jar 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-04T00:30:59.500

我知道这是一个老问题，只是将我的经验分享给其他人，

我遇到了同样的问题，然后我意识到我在我所指的 jar 中输入了错误的名称。

Maven 没有抱怨并完成成功消息，但没有复制 jar :)

问候 Lyju

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:06:32.127

不知道这是否是问题，但您忘记了一个命令行参数之间的空格：

```
./mvn install:install-file -Dfile=~/Downloads/daozero-0.5.jar -DgroupId=daozero -DartifactId=daozero -Dversion=0.5 -Dpackaging=jar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-01T20:58:01.380

我使用 mvn install:install-file 在本地安装了一个 jar，但 Netbeans 不允许我将 jar 添加为依赖项。原来问题出在Netbeans上。

我去了服务-> Maven 存储库-> 本地（右键单击）然后做了“更新索引”。然后我回到我的项目 -> 添加依赖项并能够看到它。

完成“更新索引”后，不要费心查看树，新的 jar 可能不会显示在“服务”中。只需返回项目并尝试添加它。祝你好运！

# yii - yii 两个模型合二为一

> ID：14123070
> 
> 赞同：1
> 
> 时间：2013-01-02T13:34:42.833
> 
> 标签：yii, model

我有两个类，A 和 B，每个类都映射我数据库中的一个表。A 和 B 在第二个表中的主键列和另一列之间具有关系。我想在一个函数中插入/更新两个表，但我不确定最好的方法是什么。

我在 Google 上找到了一些解决方案，但我不确定这是最好的方法。我应该怎么办？我的想法是有一个方法`save()`，它调用 A 和 B 的保存方法。如果这是最好的选择，我应该扩展什么，CFormModel 或 CActiveRecord？如果我尝试通过遵循文档扩展 CFormModel，那么拥有诸如`save()`or`insert()`或之类的方法是不正确的`update()`。文档说 CFormModel 仅用于存储不会保存的数据。如果我扩展 CActiveRecord，我将可以访问 save() 方法，但我不会映射任何内容。文档说 CActiveRecord 必须映射数据库中的表。

那么，最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:19:16.160

If you have the default folder structure for yii generated from the gii generation tool, in you components folder you may use the controller file and add your save method there and access any CActiveRecords you'd like. Then, you can call your save method from within any controller you'd like.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T11:48:58.623

我认为这是最好的[答案](http://www.yiiframework.com/wiki/19/how-to-use-a-single-form-to-collect-data-for-two-or-more-models)。更好地控制数据流总是更好的。

@DCoder 我认为在大规模应用程序中这将是至关重要的。如果您将使用 aftersave() 或覆盖 save() 并忘记工作流程，那么您将遇到很多问题。您可以在数据库中找到行，但您可能不知道它们来自哪里，因为您本能地调用了 save()。另一种方法更好，有一个调用 save() 的自定义函数。但是你必须知道这个自定义方法是存在的。

# apache - 多个 if/or 规则的 htaccess 规则，包括用户代理、cookie、uri 和文件名

> ID：14123072
> 
> 赞同：0
> 
> 时间：2013-01-02T13:34:47.423
> 
> 标签：apache, .htaccess, mod-rewrite

我有以下 .htaccess 规则。我需要在这个块中添加一些规则。我不想失去我的旧人。

```
<FilesMatch "\.(htaccess|htpasswd|ini|phps|fla|psd|log|sh)$">
Order allow,Deny
Deny from all
</FilesMatch>

<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
    RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

我的规则是这样的：

```
- if HTTP_USER_AGENT includes BotOne
- or HTTP_USER_AGENT includes OtherBot
- or HTTP_COOKIE user_id != 1

    - if REQUEST_URI is "/" main directory
    - or REQUEST_FILENAME includes "utm_source"
    - or REQUEST_FILENAME includes "utm_medium"
    - or REQUEST_FILENAME includes "utm_campaign" and "utm_content"

        - if REQUEST_FILENAME doesn't include "/blog/"
        - or REQUEST_FILENAME doesn't include "gif"
        - or REQUEST_FILENAME doesn't include "jpg"

            - then RewriteRule all files to index.html 
```

我试过这个。但没有帮助。我该如何编写这些规则？

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
    RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]

    RewriteCond %{HTTP_USER_AGENT} "BotOne|OtherBot" [NC,OR]
    RewriteCond %{HTTP_COOKIE} !^.*user_id=1   [NC]
    #
    RewriteCond %{REQUEST_URI} \/  [NC,OR]
    RewriteCond %{REQUEST_FILENAME} ^utm_source.*  [NC,OR]
    RewriteCond %{REQUEST_FILENAME} ^utm_medium.*  [NC,OR]
    RewriteCond %{REQUEST_FILENAME} ^utm_campaign.*  [NC,OR]
    RewriteCond %{REQUEST_FILENAME} ^utm_content.*  [NC]
    #
    RewriteCond %{REQUEST_FILENAME} !\/blog\/.*  [NC,OR]
    RewriteCond %{REQUEST_FILENAME} !gif.*  [NC,OR]
    RewriteCond %{REQUEST_FILENAME} !jpg.*  [NC]
    RewriteRule ^.*? index.html [R=301,L]
</IfModule> 
```

我要重定向的主要 URL 如下所示：
* [http://example.com](http://example.com) => [http://example.com/index.html](http://example.com/index.html)
* [http://example.com/](http://example.com/) => [http://example。 com/index.html](http://example.com/index.html)
* [http://example.com/?utm_source=michael](http://example.com/?utm_source=michael) => [http://example.com/index.html](http://example.com/index.html)
* [http://example.com/?utm_medium=twitter](http://example.com/?utm_medium=twitter) => [http:// example.com/index.html](http://example.com/index.html)
* [http://example.com/?utm_campaign=camp2&utm_content=somewhere](http://example.com/?utm_campaign=camp2&utm_content=somewhere) => [http://example.com/index.html](http://example.com/index.html)
* [http://example.com/blog/](http://example.com/blog/) * => 否重定向
* [http://example.com/myfile.jpg](http://example.com/myfile.jpg)=> 无重定向
* [http://example.com/myfile.gif](http://example.com/myfile.gif) => 无重定向

如果（用户代理是“BotOne”）或（用户代理是“OtherBot”）或（他/她的 Cookie 用户 ID 不是 1），将触发此重定向。

任何查询参数都将被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T04:01:40.930

在 .htaccess 中处理规则的方式，根本没有办法用某种构造或解析来表达这一点，就像你在编程语言中所做的那样。过去我也有类似的问题，而且很难得到一个完整的答案，所以当我终于找到答案时，我自己写了下来，以便将来再次找到它。这是我给自己写的：

```
## After quite a bit of puzzlement and seemingly maddeningly
##  vague documentation, I finally figured out exactly how mod_rewrite's
##  [OR] flag really works: In mod_rewrite there's not really any
##  "precendence"; RewriteCond's are simply processed sequentially.
##  Without any modification, the default is to AND _everything_.
##  Including the [OR] modifier on some RewriteCond's creates a
##  two-level expression with only ANDs at the outer/upper level and
##  only ORs at the inner/lower level. Thus
##  RewriteCond a [OR]
##  RewriteCond b
##  RewriteCond c [OR]
##  RewriteCond d
##  RewriteCond e [OR]
##  RewriteCond f [OR]
##  RewriteCond g
##  is equivalent to the boolean expression
##  ((a OR b) AND (c OR d) AND (e OR f OR g))
## There's _no_ way to have ANDs at the _lower/inner_ level and ORs
##  at the _upper/outer_ level; such constructs can only be implemented with
##  either multiple rulesets (and unavoidable duplication), or the
##  introduction of intermediate environment variables.
## Thus the only advantages of [OR] over a | in an RE are increased
##  clarity/maintainability, and the possibility of checking against
##  unrelated variables. REs with lots of |, on the other hand, are
##  assumed to be much faster. 
```

如果我正确理解您的需求，则可以将整个事情视为一个巨大的条件，其中块不是通过附属的“if”子句而是通过 AND 连接的，如下所示：

```
IF

((- HTTP_USER_AGENT includes BotOne
- or HTTP_USER_AGENT includes OtherBot
- or HTTP_COOKIE user_id != 1)
AND
(- REQUEST_URI is "/" main directory
- or REQUEST_FILENAME includes "utm_source"
- or REQUEST_FILENAME includes "utm_medium"
- or REQUEST_FILENAME includes "utm_campaign" and "utm_content")
AND
(- REQUEST_FILENAME doesn't include "/blog/"
- or REQUEST_FILENAME doesn't include "gif"
- or REQUEST_FILENAME doesn't include "jpg"))

THEN

- RewriteRule all files to index.html 
```

我看到的最大复杂性是关于“utm_campaign”和“utm_content”的规则，因为据我所知，正则表达式（即使是像.htaccess 中的那些复杂的 PERL 样式）根本不能很好地处理未指定的顺序. 如果您知道字符串实际上总是以相同的顺序排列，您可以编写一个类似于“utm_campaign.*utm_content”的 RE。如果订单确实未指定，要完全满足您的规范，您将需要**两个**规则条件，一个用于每个可能的订单，如下所示：

```
RewriteCond "utm_campaign.*utm_content" [OR]
RewriteCond "utm_content.*utm_campaign" 
```

在我看来，您的某些 RE 与您的伪规则实际上所说的内容并不完全相同。例如：

```
REQUEST_FILENAME includes "utm_source" 
```

应该成为

```
RewriteCond ${REQUEST_FILENAME} utm_source 
```

因为

```
RewriteCond ${REQUEST_FILENAME} ^utm_source 
```

实际实现

```
REQUEST_FILENAME **startswith** utm_source 
```

另外，我允许奇怪的浏览器根本不发送根目录，如下所示（另请注意，'/' 没有单独的大写和小写版本，因此 [NC] 只会给您带来轻微的性能影响没有充分的理由）。请注意，您需要字符串锚点的开头 ('^') 和结尾 ('$')，否则您也会匹配诸如“/xxx/yyy/zzz”之类的内容，因为它们包含斜杠：

```
RewriteCond ${REQUEST_URI} ^/?$ [OR] 
```

最后，只匹配你关心的字符串部分；无需匹配字符串的其余部分（实际上，尝试匹配字符串的其余部分通常会导致奇怪的不必要的错误）。换句话说，.htaccess RE 中“.*”的存在通常表示某种不必要的怪异，充其量会影响性能，最坏的情况是掩盖一些错误。与其说“utm_source.*”，不如说“utm_source”。

乍一看，您的具有多个条件的逻辑对我来说是正确的（幸运的是，有很多方法可以使这些复杂的条件变得混乱）。因此，如果它不起作用，我会怀疑规则（尤其是正则表达式）存在其他问题，而不是逻辑/优先级错误。（另外，我的猜测是问题有几个不同的原因，而不仅仅是一个共同的根本原因，所以解决一个问题不太可能解决所有其他问题。）

你能给我们举**一个**输入字符串的具体例子吗？你期望发生什么，以及实际发生了什么？

# mysql - 从 MySQL SELECT 中删除数字

> ID：14123075
> 
> 赞同：0
> 
> 时间：2013-01-02T13:35:08.220
> 
> 标签：mysql, string, select

我需要从 SELECT 查询中的名称字段中删除数字。这些数字可能位于字符串的末尾。示例如下：

```
Some Name
Namewithnospace
NamewithInt 100   <--- I want to remove this int from the string 
```

我不能保证字符串的第一部分不包含空格，尽管我可以相当确定该数字将是字符串的最后一部分。此外，大多数数据不会有空格。

我可以看到必须有一个解决方案`REVERSE()`，`SUBSTRING()`但无法弄清楚如何不破坏没有空格或有空格但没有整数的数据。

编辑：下面是 Ollie 向我指出的 MySQL C 函数的定义，我对正则表达式进行了更改（在函数的输出中包含空格和标点符号）：

```
DELIMITER !

DROP FUNCTION IF EXISTS alphas! 

CREATE FUNCTION alphas ( str VARCHAR(255) ) 
               RETURNS VARCHAR(255) 
               DETERMINISTIC
BEGIN 
  DECLARE i, len SMALLINT DEFAULT 1; 
  DECLARE ret VARCHAR(255) DEFAULT ''; 
  DECLARE c VARCHAR(1); 
  SET len = CHAR_LENGTH( str ); 
  REPEAT 
    BEGIN 
      SET c = MID( str, i, 1 ); 
      IF c REGEXP '[[:alpha:]]' OR c REGEXP '[[:space:]]' THEN 
        SET ret=CONCAT(ret,c); 
      END IF; 
      SET i = i + 1; 
    END; 
  UNTIL i > len END REPEAT; 
  RETURN ret; 
END !
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:13:05.057

让自己这个存储的函数称为`alphas`. 它一一检查其输入文本字符串的字符并删除所有数字。

```
DELIMITER !

DROP FUNCTION IF EXISTS alphas! 

CREATE FUNCTION alphas ( str VARCHAR(255) ) 
                   RETURNS VARCHAR(255) 
                   DETERMINISTIC
BEGIN 
  DECLARE i, len SMALLINT DEFAULT 1; 
  DECLARE ret VARCHAR(255) DEFAULT ''; 
  DECLARE c VARCHAR(1);   /* NOT CHAR!  NOT CHAR! NOT CHAR! */ 
  SET len = CHAR_LENGTH( str ); 
  REPEAT 
    BEGIN 
      SET c = MID( str, i, 1 ); 
      IF NOT c REGEXP '[[:digit:]]' THEN 
        SET ret=CONCAT(ret,c); 
      END IF; 
      SET i = i + 1; 
    END; 
  UNTIL i > len END REPEAT; 
  RETURN ret; 
END !
DELIMITER ; 
```

然后这样做。

```
 SELECT alphas(column) AS alphacolumn 
```

这是一个有用的资源，我从中抄袭了这个功能。 [http://www.artfulsoftware.com/infotree/qrytip.php?id=815](http://www.artfulsoftware.com/infotree/qrytip.php?id=815)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:43:38.103

如果您可以选择使用[UDF](http://dev.mysql.com/doc/refman/5.6/en/adding-functions.html)，则可以使用[REGEXP_REPLACE](https://launchpad.net/mysql-udf-regexp)。您可以将其与模式一起使用`'[0-9]+$'`以删除数字。

# javascript - GEPlugin 不会从 JSON 加载所有数据

> ID：14123084
> 
> 赞同：1
> 
> 时间：2013-01-02T13:35:54.980
> 
> 标签：javascript, json, google-earth-plugin

我有一个谷歌地球插件实现，它从文本文件中读取一个 JSON 对象，然后显示位置。JSON 对象包含纬度和经度，但这里有一个限制......如果 JSON 对象变得更大（记录数），那么地球不会选择这些记录。JSON 对象可以包含超过 50,000 条记录，但globe 只能选择一定数量的记录。如何增加全球读取的记录数？

JSON 对象是这样的。

```
{
    "latitude": 32.08546754111066,
    "longitude": -102.88606376716982
},
{
    "latitude": 38.09459585284452,
    "longitude": -106.99208418710695
} 
```

我像这样打开 JSON 文件。

```
xmlHttp.open("GET", jsonfile, true); 
```

我得到 JSON 对象并加载位置

```
if (xmlHttp.status == 200 || xmlHttp.status == 0) {
  var result = xmlHttp.responseText;
  json = eval("(" + result + ")");
}       

loadMarkers(); 
```

目前我在文本文件中有 69,000 条记录（纬度和经度），但插件似乎只占用 15,000 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:23:06.193

我想这与您如何从解析的数据创建标记有关。你没有展示你是如何做到这一点的——这个`loadMarkers`功能是什么样的？

猜测该方法存在瓶颈，它可能会大量调用 Google Earth Api 来创建所有标记……如果是这样，那么这很可能是您遇到问题的原因.

如果是这种情况，那么我想使用[google.earth.executeBatch](https://developers.google.com/earth/documentation/reference/google_earth_namespace#ab26414915202d39cad12bcd5bd99e739)方法来执行你的 `loadMarkers`函数体可以帮助你很多。（也就是说，如果您还没有完全这样做！）

在一个附带问题上，您真的不应该使用`eval`这样的方式解析 JSON。Eval 将解析并执行*任何*javascript。您应该使用[JSON.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/parse)来限制 eval 产生的安全风险。

# jquery - Prettyphoto灯箱高度，内联html内容的宽度设置？

> ID：14123085
> 
> 赞同：0
> 
> 时间：2013-01-02T13:35:58.647
> 
> 标签：jquery, html

我在弹出框中显示带有图像和其他内容的内联 html，并排显示，就像 facebook 图像查看器一样，但是，我得到了弹出框的有线大小，它不会根据内容重新调整大小。

我试过了

```
$(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto({
default_width: 800,
default_height: 520,
});
}); 
```

但这无济于事，有什么建议可以解决这个问题吗？

# activeadmin - ActiveAdmin - 如何自定义编辑操作？

> ID：14123095
> 
> 赞同：4
> 
> 时间：2013-01-02T13:36:42.887
> 
> 标签：activeadmin

我有代码：

ActiveAdmin.register MyTable 做控制器做

```
def edit
  #---This code doesn't work
  render :template=>"myEditTemplate.html",:layout =>"active_admin"
end

def new
  #--code in this section works fine
  render :template=>"myNewTemplate.html",:layout =>"active_admin"
end 
```

结尾

我想在 url 下看到我的编辑模板代码，如下所示： http:// *** /admin/mytable/1/edit 但 activeadmin 看不到我的代码/它显示的代码带有自己的模板而不是我的为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-03T21:39:32.493

您应该可以`form`通过 ActiveAdmin 提供的 DSL 方法来执行此操作。更多详细信息在[ActiveAdmin](http://activeadmin.info/docs/5-forms.html)和 Formtastic 的文档中。

不幸的是，我不相信 ActiveAdmin 可以很好地让您为`new`和呈现完全不同的表单`edit`。使用文档中的部分呈现方法，尽管您可以有条件地更改基于`@object.persisted?`.

```
# app/admin/post.rb
ActiveAdmin.register Post do
  form :partial => "form"
end

# app/views/admin/post/_form.html.erb
<%= semantic_form_for [:admin, @post] do |f| %>
  <% if @post.persisted? %>
    Edit Form (Maybe rendered via a partial)
    <%= f.inputs :title, :body %>
    <%= f.buttons :commit %>
  <% else %>
    New Form
  <% end %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-09T10:50:01.483

如果您提供渲染方法的完整路径，您可以渲染任何您喜欢的视图。像这样的东西：

```
# app/admin/post.rb 
ActiveAdmin.register Post do  
    controller do
        def edit 
            render 'admin/posts/myEditTemplate', :layout =>"active_admin"
        end
        def new
            render 'admin/posts/myNewTemplate', :layout =>"active_admin"
        end
    end
end 

# app/views/admin/posts/myEditTemplate.html.erb
    # Your erb view for edit here
# app/views/admin/posts/myNewTemplate.html.erb
    # Your erb view for new here 
```

# codeigniter - 在具有 JQUERY UI 功能的 Codeigniter 日历功能中使用 AJAX 发布数据

> ID：14123100
> 
> 赞同：1
> 
> 时间：2013-01-02T13:37:10.780
> 
> 标签：codeigniter, jquery

[下面的代码是来自这里](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-the-calendar-library)的 Codeigniter 事件日历功能。

日历是可点击的，您可以通过“提示”框在日期字段中输入数据。然后数据将显示在日历日期字段中。

但是，我正在尝试使用带有“微调器”的 JQUERY“对话框”框作为输入字段，而不是“提示”框。

当我尝试使用 AJAX 发布数据时，下面的所有代码都可以完全接受 JQUERY 部分。Codeigniter 无法从对话框中检测到 POST 数据。

有人可以帮忙吗？

```
 //CONTROLLER

    class Mycal extends CI_Controller {

    public function index() {
       $this->display();
    }

    function display($year = null, $month = null){

    if (!$year) {
        $year = date('Y');
    }
    if (!$month) {
        $month = date('m');
    }

    $this->load->model('Mycal_model');

    if($day = $this->input->post('day')){
        $this->Mycal_model->add_calendar_data(
            "$year-$month-$day",
            $this->input->post('data')
        );
    }

    $data['calendar'] = $this->Mycal_model->generate($year, $month);

    $this->load->view('mycal_view', $data); 
}

}

    //MODEL

    class Mycal_model extends CI_Model{

    function get_calendar_data($year, $month){

    $query = $this->db->select('date, data')->from('calendar')
        ->like('date', "$year-$month", 'after')->get();

    $cal_data = array();

    foreach ($query->result() as $row){
        $cal_data[substr($row->date,8,2)] = $row->data;
    }

    return $cal_data;
}

function add_calendar_data($date, $data){

    if($this->db->select('date')->from('calendar')
        ->where('date', $date)->count_all_results()) {

        $this->db->where('date', $date)->update('calendar', array(
            'date'=>$date,
            'data'=>$data
        ));

    }else{

        $this->db->insert('calendar', array(
            'date'=>$date,
            'data'=>$data
        ));
    }
}

function generate ($year, $month){

    $this->load->library('calendar', $this->conf);
    $cal_data = $this->get_calendar_data($year, $month);    
    return $this->calendar->generate($year, $month, $cal_data)      
}

    //VIEW

    <?php echo $calendar; ?>

    <div id="dialog-form" title="Select number of items">

    <p>
        <label for="spinner">Number of items:</label>
        <input id="spinner" name="spinner" value="0" />
    </p>

    </div>

    //JQUERY

    <script type="text/javascript">

$(document).ready(function() {

    $(function() {
        $( "#spinner" ).spinner({
            min: 0,
            max: 10,
            step: 1,
        });
    });

    $('.calendar .day').click(function() {
        $('#dialog-form').dialog("open");
    }); 

    $(function() {  
        $('#dialog-form')
            .attr('title', 'Number of items')
            .dialog({ 
                autoOpen: false,
                buttons: { 
                    'Ok': function() {
                        day_num = $(this).find('.day_num').html();
                        day_data = $("#spinner").val();

                            $.ajax({
                                url: window.location,
                                type: 'POST',
                                data: {
                                    day: day_num,
                                    data: day_data
                                },
                                success: function(msg){
                                    location.reload();
                                }
                            })      
                    },

                },

            });

    });
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T04:56:19.117

我感谢您帮助我找到了解决问题的方法。这是我的代码。

```
//JQUERY

    <script type="text/javascript">

$(document).ready(function() {
    $('.calendar .day').click(function() {
      $('#dialog-form').dialog("open");

      day_num = $(this).find('.day_num').html();
      day_data = $("#spinner").val();
    });

    $(function() {
        $( "#spinner" ).spinner({
            min: 0,
            max: 10,
            step: 1,
        });
    });

    $(function() {  
        $('#dialog-form')
            .attr('title', 'Number of items')
            .dialog({ 
                autoOpen: false,
                buttons: { 
                    'Ok': function() {

                            $.ajax({
                                url: window.location,
                                type: 'POST',
                                data: {
                                    day: day_num,
                                    data: day_data
                                },
                                success: function(msg){
                                    location.reload();
                                }
                            })      
                    },

                },

            });

    });
}); 
</script> 
```

# c#-4.0 - 如何在silverlight中从datagrid中获取所有值

> ID：14123102
> 
> 赞同：0
> 
> 时间：2013-01-02T13:37:17.503
> 
> 标签：c#-4.0, silverlight-5.0

我有一个 silverlight5 应用程序，它使用 msaccess2010 作为数据库。我创建了一个带有空行的数据网格，以便用户输入值。我需要获取用户填充的所有行的值，以便将这些值传递给数据库使用WCF 服务。任何人都可以帮我做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:13:50.840

您可以将任何 IEnumerable 绑定到 gridview。您可以将 WCF 中的合同类用作项目类型，并且可以使用该类型创建 ObservableCollection。

假设您的类型是`Book`. 您可以创建您的列表，例如；

```
var list=new ObservableCollection<Book>(); 
```

然后，您可以将 gridView 的 itemsSource 属性设置为该列表引用。

```
this.mygridView.ItemsSource=list; 
```

之后，网格将反映从它所做的所有更改（添加、删除、值更改等）到此源列表。

NOT：您的模型合同类您实现 INotifyPropertyChanged 接口以捕获每个属性的值更新。 [http://jesseliberty.com/2012/06/28/c-5making-inotifypropertychanged-easier/](http://jesseliberty.com/2012/06/28/c-5making-inotifypropertychanged-easier/)

您可以随时从同一列表引用中获取最新值，并且可以将其发送到 WCF 以保存等操作。

这就是 SL 通知系统（INotifyPropertyChanged 和 INotifyCollectionChanged 接口）的强大之处。

# php - 给动态创建的元素一个事件

> ID：14123106
> 
> 赞同：1
> 
> 时间：2013-01-02T13:37:49.203
> 
> 标签：php, jquery, html, dom

我正在使用 jQuery 从 CSV 文件中填充数据。

我需要给动态创建的元素一个事件。

现在事件没有得到动态创建的数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T13:40:07.247

您可以为此使用 jQuery`.on()`功能。

```
$(document).on('click', 'div.my_new_dom', function() {
    // do magical things
}); 
```

这将在将新 DOM 添加到文档时自动将其绑定到 jquery。
查看此链接以获取详细说明。 [http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:39:04.803

用于[`.on`](http://api.jquery.com/on/)将事件绑定到动态添加的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:45:50.160

您可以通过以下两种方式之一执行此操作：

您可以将事件添加到正在创建的每个元素（首选）。

或者

您可以将事件绑定到父元素或文档，并针对新创建的元素类型或类对其进行过滤，以便它也适用于动态创建的元素（正如@phpisuber01 所展示的那样）。

我认为首选第一个选项的原因是，使用第二个选项，您将单击事件绑定到整个文档。因此，每次您在页面上的任何位置单击（或执行您的事件正在执行的任何操作）时，都必须进行检查以查看单击的元素是否应该触发事件。我不确定它在性能上的差异有多大，但这是需要考虑的事情。

# ios - 在 for 循环中显示 MBProgressHUD

> ID：14123108
> 
> 赞同：0
> 
> 时间：2013-01-02T13:37:59.313
> 
> 标签：ios, mbprogresshud

我有一个这样的案例：我的应用程序需要将图像上传到服务器，并且我想向用户显示上传状态。例如，我选择了 4 张图片，当应用上传图片 1 时，hud 文本标签应该在上传图片 2 时显示“上传图片 1/4”，显示“上传图片 2/4”等。我不想将上传过程放在后端，假设上传过程在主线程中执行。因此，上传图片时主线程将被阻塞。所以hud的东西不会立即起作用。如何解决这个问题，有人可以帮忙吗？我的代码是这样的：

```
 MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
        hud.dimBackground = YES;
        hud.labelText = @"";
        //show the hud
        for (int i = 0;i<[self.images count];i++) {
            hud.labelText = self.maskTitle;//change hud lable text
            [self uploadImage:i];//upload image, this would take long, will block main thread
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:56:37.527

您永远不应该在主线程上执行繁重的操作，但如果您真的想要，您可以执行类似的操作

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
hud.dimBackground = YES;
hud.labelText = @"";
//show the hud
for (int i = 0;i<[self.images count];i++) {
    hud.labelText = self.maskTitle;//change hud lable text
    [self performSelector:@selector(uploadImage:) withObject:@i afterDelay:0.001];        
} 
```

插入延迟将允许`NSRunLoop`在您开始上传图像之前完成其周期，以便更新 UI。这是因为 UIKit 在`NSRunLoop`.

例如，另一种方法是`NSRunLoop`手动运行

```
MBProgressHUD *hud = [MBProgressHUD showHUDAddedTo:self.view animated:YES];
hud.dimBackground = YES;
hud.labelText = @"";
//show the hud
for (int i = 0;i<[self.images count];i++) {
    hud.labelText = self.maskTitle;//change hud lable text
    [[NSRunLoop currentRunLoop] runUntilDate:[NSDate distantPast]];
    [self performSelector:@selector(uploadImage:) withObject:@i afterDelay:0];        
} 
```

请注意，在这两个示例中，您的`uploadImage:`方法现在都需要接受 a`NSNumber`而不是`int`.

# algorithm - 完美二叉树：DSW 和 RB 平衡树

> ID：14123116
> 
> 赞同：1
> 
> 时间：2013-01-02T13:38:40.623
> 
> 标签：algorithm, binary-tree, time-complexity, red-black-tree

我知道我们可以使用 DSW 算法或红黑平衡树对任何二叉搜索树进行预处理并将其变成完美的二叉树。

这两种方法在时间复杂度方面有何不同？

您能否为每个提供一些示例/应用程序，以显示使用一种方法而不是另一种方法的好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:49:06.790

DSW 是静态算法——你使用它一次，你希望树永远不会改变。使树完全平衡需要 O(N) 时间，然后您可以使用它，但不要修改它。你仍然可以这样做，但会失去完美平衡的属性。您执行的修改操作越多，树的性能就越差。

红黑树是一种动态数据结构。它在 O(log(N)) 中执行其基本操作，但当然不会像完美平衡的树那样执行。最重要的是红黑树可以随时修改，并且仍然需要 O(log(N)) 进行操作。

因此，这两种方法在用例上有所不同。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:46:56.150

当您想要创建整个 BST（不平衡）然后执行大量查找（在后平衡 BST 上）时，DSW 很有用。当您将添加/删除/查找都交织在一起时，RB 树很有用。

RB 树主要是平衡的，但 DSW 是完整的二叉树（可能除了最后一层）。

*两者都提供 O(log n) 但 DSW 是可以*摊销的一次性操作。

# macos - 在 OS X 上更新期间将 SQLite 数据库放在哪里以防止它被覆盖？

> ID：14123126
> 
> 赞同：2
> 
> 时间：2013-01-02T13:39:05.677
> 
> 标签：macos, sqlite, qt, osx-lion, osx-mountain-lion

我正在开发我的第一个 OS X 应用程序，它将通过 Mac App Store 分发。

该应用程序使用了一个 sqlite 数据库，我目前将其保存在与其他应用程序文件依赖项相同的位置。

我正在使用 Qt Framework 来开发应用程序。

保持在 App Store 规则的范围内；

*   在哪里可以找到数据库文件以使其在应用程序更新期间不会被覆盖？

*   我应该如何构建 .app 文件夹和所有依赖项？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:41:44.567

您的问题暗示您正在写入 sqlite 数据库，这是一个坏主意，因为应用程序将存储在`/Applications`用户可能没有写入权限的位置 () 中。

您应该做的是`Documents`在第一次使用时（或者当您检测到它不存在时）将数据库复制/创建到用户可写区域（应用程序容器的文件夹将执行）并从那里使用它。

**编辑**：为了获取 Documents 目录，请使用以下代码：

```
NSString *documentDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]; 
```

这将为您提供应用程序容器`Documents`目录的位置，而不是应用程序被沙盒化时用户的 Documents 目录：

```
~/Library/Containers/com.yourdomain.yourapp/Data/Documents 
```

# hadoop - Hadoop DistributedCache 导致 IOException

> ID：14123129
> 
> 赞同：0
> 
> 时间：2013-01-02T13:39:14.227
> 
> 标签：hadoop, distributed-cache

我已经编写了一些代码来使用 Hadoop 执行自连接任务。为此，我使用 DistributedCache 类。当我在 Netbeans 中本地运行代码时，作业已正确完成，但是当我在 hdfs 中上传数据后尝试在单节点集群中运行它时，我得到以下异常：

```
Error initializing attempt_201301021509_0002_m_000002_0:
java.io.IOException: Distributed cache entry arrays have different lengths: 1, 2, 1, 1
    at org.apache.hadoop.mapred.JobLocalizer.downloadPrivateCacheObjects(JobLocalizer.java:316)
    at org.apache.hadoop.mapred.JobLocalizer.downloadPrivateCache(JobLocalizer.java:343)
    at org.apache.hadoop.mapred.JobLocalizer.localizeJobFiles(JobLocalizer.java:388)
    at org.apache.hadoop.mapred.JobLocalizer.localizeJobFiles(JobLocalizer.java:367)
    at org.apache.hadoop.mapred.DefaultTaskController.initializeJob(DefaultTaskController.java:202)
    at org.apache.hadoop.mapred.TaskTracker$4.run(TaskTracker.java:1228)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:416)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
    at org.apache.hadoop.mapred.TaskTracker.initializeJob(TaskTracker.java:1203)
    at org.apache.hadoop.mapred.TaskTracker.localizeJob(TaskTracker.java:1118)
    at org.apache.hadoop.mapred.TaskTracker$5.run(TaskTracker.java:2430)
    at java.lang.Thread.run(Thread.java:679) 
```

我知道问题出在 JobLocalizer.java 并且`DistributedCache.getLocalCacheFiles(conf)`返回 2 但我不知道发生这种情况的原因。谁能告诉我我没有得到什么？

PS：我忘了说我用的是Hadoop-1.0.4

PS2：问题是`DistributedCache.getLocalCacheFiles(conf)`看到了真正的输入文件，还有一个与输入文件相同的临时文件，临时存储在 /tmp 文件夹中。当我在本地运行它时会发生这种情况（不会引发任何异常）。我猜当我从 hdfs 运行它时会发生类似的事情，但随后它会引发异常。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:40:34.380

当您提供文件的本地路径而不是将文件移动到 HDFS 然后提供 HDFS 路径时，可能会发生这种情况。此外，我相信您正在本地尝试并以伪分布式模式运行 hadoop。

为了将文件移动到 hdfs，您可以执行以下操作：

```
$ hadoop fs -put <your-file-path> <someHDFSfoldername/filename> 
```

然后添加`someHDFSfoldername/filename`您的分布式缓存。

编辑：查看[此处](https://svn.apache.org/repos/asf/hadoop/common/branches/branch-1.0/src/mapred/org/apache/hadoop/mapred/JobLocalizer.java)的代码，当源文件和目标文件的数量不匹配时会发生这种情况。[以下来自JobLocalizer.java](https://svn.apache.org/repos/asf/hadoop/common/branches/branch-1.0/src/mapred/org/apache/hadoop/mapred/JobLocalizer.java)的代码段让您收到错误：

```
if (sources.length != dests.length ||
        sources.length != times.length ||
        sources.length != isPublic.length) {
      throw new IOException("Distributed cache entry arrays have different " +
                            "lengths: " + sources.length + ", " + dests.length +
                            ", " + times.length + ", " + isPublic.length);
    } 
```

如果您向我们提供有关如何添加缓存文件以及如何访问它们的更多信息，这将有所帮助。

# android - Android - 从外部存储播放许多视频 - 仅音频和黑屏

> ID：14123135
> 
> 赞同：0
> 
> 时间：2013-01-02T13:39:39.450
> 
> 标签：android, media-player, screen, external, android-videoview

在我的应用程序中，我有许多短片（1-2 秒）存储在外部存储上。一项活动显示这些视频。问题是，当我创建活动时，一切都很好。但是当我重放电影或更换电影时，有时会出现黑屏（视频开始时。但当视频为 1-2 秒时，这是不可接受的）只有音频。

一些帖子建议使用 AsyncTask 播放视频。不幸的是，它没有帮助。

由于视频播放始终适用于活动创建，因此当用户想要重播或更改视频时，我对重新加载整个活动进行了一些实验。在快速视频（活动）上显示更改“无法播放视频”消息。

也许它与android外部内存管理有关？有谁知道我做错了什么？

我正在使用的代码：

```
//on button click
public void navigateToNext(View view) {
    setNextVideo();
    refreshPlayer();
}

public void play(View view) {
    refreshPlayer();
}

public void refreshPlayer(){
    if(playingTask != null && !playingTask.isCancelled()){
        playingTask.cancel(false);
    }
    initPlayingTask();
}

private void initPlayingTask() {
    playingTask = new AsyncTask(){
        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            String videoPath = getActualVideoPath();

            videoView.setVideoPath(videoPath);
            videoView.requestFocus();
            videoView.setOnPreparedListener(new OnPreparedListener() {

                @Override
                public void onPrepared(MediaPlayer mp) {
                    mp.start();
                }
            });
        }

        @Override
        protected Object doInBackground(Object... params) {
            while(!this.isCancelled() && videoView.isPlaying());
            return null;
        }

        @Override
        protected void onPostExecute(Object result) {
            super.onPostExecute(result);
        }

    };

    playingTask.execute();
} 
```

我尝试使用媒体播放器和表面。试图缓存其他媒体播放器（为下一个视频准备媒体播放器，所以当我不想播放时，我只是更换了播放器）。似乎没有任何帮助。

视频是mp4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:59:00.327

### 只需替换您的 mp.start() --> videoView.start(); 在您的 onPrepared 中，或者您也可以尝试不实施 onPreparedListener

```
 videoView.setVideoPath(videoPath);
        videoView.requestFocus(); 
```

## 利用：：

```
 videoView.start(); // As you are using mediaplayer to start that's why it's only playing sound with black screen

            OR

        videoView.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared() {
                videoView.start(); // As you are using mediaplayer to start that's why it's only playing sound with black screen
            }
        }); 
```

希望这对你有用！！

# windows - 升级后如何删除以前的应用程序？

> ID：14123150
> 
> 赞同：2
> 
> 时间：2013-01-02T13:40:37.767
> 
> 标签：windows, wix, windows-installer, wix3.5, wix-extension

我进行了 Web 应用程序升级，完美地升级了应用程序以及注册表和 IIS 条目。但在注册表升级后，它正在替换以前的版本（也在 IIS 中）。但在“程序和功能”部分，它显示了两个应用程序版本。这里发生了什么？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:09:54.297

也许那里的注册表项只是被覆盖。请检查升级是否成功。安装日志将清除这一点。

# android - 安卓返回键

> ID：14123155
> 
> 赞同：0
> 
> 时间：2013-01-02T13:40:50.557
> 
> 标签：android, android-activity, android-lifecycle

![主屏幕](../Images/2729bdf191ed3d40ea7ad127e4a7d7e5.png)

逻辑继续为`Home Screen`-> `Screen1`-> `Screen2`-> `Screen3`-> `HomeScreen`。

1.在按下它的**主页按钮**将`Screen3`返回`Home Screen`。再次按下它的**Enter 按钮**将`Home Screen`转到`Screen1`然后。`Screen2``Screen3`

2.现在我又来了`Home Screen`。**如果我按后退按钮，它必须转到手机的主屏幕**。相反，它在按返回键时以相反的顺序进行。我不想`finish()`在每个屏幕上调用活动。

给我一个解决方案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T13:42:41.677

在屏幕 3 中，使用 覆盖`onBackPressed()`并启动 HomeScreen 的 Activity `Clear Top Flag`。

这是示例

```
@Override
protected void onBackPressed()
{
   Intent i = new Intent(Screen3.this,HomeScreen.class);
   i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
   startActivity(i);
} 
```

# c++ - SDL 错误。OpenGL 激活，使用 SDL_GL_SwapBuffers()

> ID：14123159
> 
> 赞同：1
> 
> 时间：2013-01-02T13:41:04.223
> 
> 标签：c++, visual-studio-2010, opengl, sdl

我正在使用 SDL 和 C++ 创建游戏，但是每当我尝试渲染位图时，我都会在运行时收到错误消息“OpenGL 处于活动状态，请使用 SDL_GL_SwapBuffers()。” 但问题是，我正在使用 SDL_GL_SwapBuffers()。这是代码：

绘图功能：

```
bool d2Sprite::Draw(SDL_Surface *dest, SDL_Surface *src, int x, int y)
{
if(dest == NULL || src == NULL)
{
    cout << "Unable draw sprite! " << SDL_GetError() << endl;
    return false;
}

SDL_Rect destR;
destR.x = x;
destR.y = y;

SDL_BlitSurface(src, NULL, dest, &destR);

return true;
} 
```

游戏循环： void d2Main::GameLoop() { cout << "游戏循环运行！" <<endl;

```
d2Main::Load();
while(d2Main::gameRunning)
{
    while(SDL_PollEvent(&event))
    {
        d2Main::HandleEvents(&event);
    }

    d2Main::Update();

    glClear(GL_COLOR_BUFFER_BIT);
    glPushMatrix();

    d2Main::Render();
    SDL_UpdateRect(screen, 0, 0, 0, 0);
    glPopMatrix();
    SDL_GL_SwapBuffers(); // <-- I AM USING IT
    SDL_Delay(0.8);
}

SDL_Quit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:17:13.420

在 SDL 源中搜索错误消息：

[http://svn.libsdl.org/tags/SDL/release-1.2.10/src/video/SDL_video.c](http://svn.libsdl.org/tags/SDL/release-1.2.10/src/video/SDL_video.c)

它发生在这里：

```
void SDL_UpdateRects (SDL_Surface *screen, int numrects, SDL_Rect *rects)
{
    int i;
    SDL_VideoDevice *video = current_video;
    SDL_VideoDevice *this = current_video;

    if ( (screen->flags & (SDL_OPENGL | SDL_OPENGLBLIT)) == SDL_OPENGL ) {
        SDL_SetError("OpenGL active, use SDL_GL_SwapBuffers()");
        return;
    }

    //... 
```

因此，您可能需要摆脱您的调用`SDL_UpdateRects`- 当您使用 OpenGL 时不支持它，除非您使用`SDL_OPENGLBLIT`标志。因此，作为替代方案，您可以设置标志。但是，请注意，AFAIK (a) 速度较慢，并且 (b) 不再受到官方支持。

# c# - 为什么我在循环中添加控件的代码会失败？

> ID：14123161
> 
> 赞同：0
> 
> 时间：2013-01-02T13:41:11.450
> 
> 标签：c#, .net, loops, windows-phone, unhandled-exception

```
public MainPage()
{
    InitializeComponent();
    CheckBox c = new CheckBox();
    for (int i = 0; i < 2; i++)
    {
       c.Content = " Value ";
       lbox.Items.Add(c);
    }
} 
```

`lbox`是 UI 中的一个空列表框，上面的代码抛出一个未处理的异常，该异常被`App.xaml.cs`. 如果我删除 for 循环，代码可以正常工作。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:42:17.243

您`CheckBox`在循环外初始化一次，然后添加两次。将其移动到 for 循环内。

```
 for (int i = 0; i < 2; i++)
    {
        CheckBox c = new CheckBox();
        c.Content = " Value " ;
        lbox.Items.Add(c);
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T13:43:26.340

在循环中创建一个新的复选框实例

```
public MainPage()
{
    InitializeComponent();

    for (int i = 0; i < 2; i++)
    {
        CheckBox c = new CheckBox();
        c.Content = " Value " ;
        lbox.Items.Add(c);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T13:44:04.990

尝试将复选框放入循环中

```
public MainPage()
{
    InitializeComponent();

    for (int i = 0; i < 2; i++)
    {
        CheckBox c = new CheckBox();
        c.Content = " Value " ;
        lbox.Items.Add(c);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T14:05:12.017

波纹管代码没关系：

在 Form1.Designer.cs 中，您必须定义：

```
partial class From1
{   
    private.System.Windows.Forms.ListBox lbos;
    private.System.Windows.Forms.CheckBox c;
} 
```

在 Form1.cs 中你必须写：

```
public MainPage()
{
    InitializeComponent();

    for (int i = 0; i < 2; i++)
    {
        this.c.Text = " Value " ;
        this.lbox.Items.Add(c);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T13:44:52.533

```
public MainPage()
{
    InitializeComponent();
    for (int i = 0; i < 2; i++)
    {
        lbox.Items.Add(new CheckBox{Content =" Value "});
    }
} 
```

# git - 添加后git无法推送

> ID：14123170
> 
> 赞同：11
> 
> 时间：2013-01-02T13:42:07.700
> 
> 标签：git, ubuntu, github

好的，我有一个问题，一周以来我都无法解决。我使用 git（在 github 上）来存储我的项目。最近我在其中添加了一些新文件没有问题，但是当我使用“git push”时出现超时错误。

我使用 Ubuntu 12.04，带有 ssh（默认）和 https。

因此，我决定制作 depo（git clone）的新副本。在此之后，我修改了现有文件，提交并推送它......成功！

所以，我添加了其他人（在新副本中），提交并推送它们。问题又来了：无法推送这是控制台输出：

```
time git push
Counting objects: 13, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (11/11), done.
Writing objects: 100% (11/11), 16.61 KiB, done.
Total 11 (delta 2), reused 0 (delta 0)
^C

real    7m59.383s
user    0m0.008s
sys 0m0.004s 
```

我真的不明白我在这里做错了什么。我在其他depo，同样的问题，但我的合作者没有任何麻烦。

我删除了 git，然后重新安装它，没有任何变化。

如果你有任何想法来解决这个问题。

## 编辑 1

```
git remote -v

origin  git@github.com:Krozark/projet_compilation.git (fetch)
origin  git@github.com:Krozark/projet_compilation.git (push) 
```

# 编辑：解决方案

```
sudo ifconfig [wlan0] mtu 1460 (lower than 1500) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T13:49:27.907

我看到一个同事遇到的这个完全相同的问题，它与 SSH 相关的网络，我们当时使用的是 VPN 连接，结果是网络 MTU 设置太高（如果我没记错的话是 1492），我们修改了较小的值，直到它开始工作。所以似乎与网络数据包拆分有关。

不确定这是否适合您，尽管尝试将您的网络 MTU 更改为较低的值以查看它是否有效并没有什么坏处。

当然，如果这是 Github 方面的问题，这不会是一个因素（你可以创建一个新的 repo 并向上推这一事实让我相信它与 MTU 无关）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T06:28:45.340

正如您所建议的那样，固定您的 MTU 可以有效地缓解问题，我建议您使用更有针对性的解决方案。

```
iptables -t mangle -I OUTPUT 1 -o wlan0 -d 207.97.227.239 \
    -p tcp --dport 22 --tcp-flags SYN,RST SYN -j TCPMSS --set-mss 1420 
```

这劫持了与服务器的初始 TCP 协商（仅适用于 github.com 的 IP 上的 SSH），并强制 MSS 为 1420。这实际上与设置 MTU 相同，但更具选择性。在某些情况下，您无法轻松保存 MTU 更改，并且每次关闭/启动界面时都需要重新应用它，这很好。

MSS 需要比 MTU 小 40 以允许 40 字节的 TCP 标头 + 数据段（MSS 是最大段大小）。

需要执行此类操作（即，将 MTU 降至 1500 以下）的最常见原因是 VPN 和隧道。PMTU 旨在解决这个问题，但它在太多情况下都失败了，让您需要手动调整某些路径的 MTU。使用 iptables 规则允许您针对不同的问题路径以不同的方式定制流量，而不是强制您将 MTU 设置为所有路径的最低公分母。这样做的问题在于，您会通过增加标头与数据的比率来慢慢减少有效带宽。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T13:45:00.037

如果本地很好（即您的 git 和 ssh 工作正常），那么它应该是远程端的问题：

检查[GitHub 状态](https://status.github.com/messages)。

### 今天

> 3:22 UTC 我们正在调查我们的一个文件服务器的问题，少数存储库不可用。

您可能会受到 GitHub 上提到的当前经常性访问问题的影响。

* * *

或者是连接问题（例如[缺少 VPN 路由](https://stackoverflow.com/a/757462/6309)）

# html - 使用 XPath 按父项过滤子项

> ID：14123178
> 
> 赞同：1
> 
> 时间：2013-01-02T13:42:46.287
> 
> 标签：html, xml, xpath, scrapy

我有与此类似的 HTML：

```
<div>
    <h4><a href="#">Don't Match Me</a></h4>
    <a href="#">Match Me</a>
    <a href="#">Match Me</a>
    <a href="#">Match Me</a>
</div> 
```

我将如何选择`a`不在 a 内的所有元素`h4`？我试过`a[not(ancestor::h4)]`了，但老实说我不知道​​我在做什么。

另外，作为一个小问题，是否有一个实现 PyQuery 或 BeautifulSoup 的 Scrapy 选择器类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:51:50.650

这是您应该使用的 Scrapy 选择器：

```
hxs.select('//a[not(ancestor::h4)]/text()').extract() 
```

# jquery - 在 jquery 中寻求帮助以查找 imagebutton id 并返回到 ASP.NET

> ID：14123180
> 
> 赞同：-1
> 
> 时间：2013-01-02T13:42:52.750
> 
> 标签：jquery, asp.net

我正在 div 标签内创建动态表。在每个单元格内部，添加了一个标签和图像按钮。单元格被添加到行和行到表。我想知道如何找到使用 jquery 单击了 5*8 表中的哪个图像按钮。动态表代码添加在asp.net

```
public void DisplaySeatLayout()
{
        //fetching data from database     
        _seatBUS = new SeatBUS();
        DataTable dt = _seatBUS.GetAllSeatByBusRouter(_listBus);

        //Layout generation code    
        ImageButton img ;
        HtmlTable table = new HtmlTable();
        table.Attributes.Add("runat", "server");
        table.Attributes.Add("id", "LayoutTable");

        HtmlTableRow [] tr = new HtmlTableRow[] { new HtmlTableRow(), new HtmlTableRow(), new HtmlTableRow(),new HtmlTableRow(),new HtmlTableRow()};
        HtmlTableCell tc = null;
        int SeatNo=0;
        //Getting Total no of seats.
        int MaxSeatNo = dt.Rows.Count;
        //Iterating datatable

            //Displaying labels for displaying column names in the table
            for (int columnCounter = 0; columnCounter < 8; columnCounter++){
                for (int rowCounter = 0; rowCounter < 5; rowCounter++){
                    if (SeatNo < MaxSeatNo){
                            if (rowCounter == 2 && columnCounter < 7){
                                //adding label in each cell.
                                tc = new HtmlTableCell();
                                Label lbl = new Label();
                                lbl.Text = "";
                                lbl.ID = "lbl " + rowCounter.ToString() + columnCounter.ToString();
                                  tc.Controls.Add(lbl);
                                tr[rowCounter].Controls.Add(tc);
                            }
                            else{
                                //adding label in each cell.
                                tc = new HtmlTableCell();
                                Label lbl = new Label();
                                lbl.Text = dt.Rows[SeatNo]["NumberSeat"].ToString();
                                lbl.ID = "lbl " + rowCounter.ToString() + columnCounter.ToString();
                                lbl.Attributes.Add("runat", "server");
                                tc.Controls.Add(lbl);
                                //adding imagebutton in each cell . 
                                img = new ImageButton();
                                img.Attributes.Add("runat", "server");
                                img.Attributes.Add("type", "image");

                                img.Attributes.Add("id", dt.Rows[SeatNo]["NumberSeat"].ToString());
                                img.CssClass = "seatRightMostRow1";
                                img.ImageUrl = "../Images/available_seat_img.png";
                                img.ID = dt.Rows[SeatNo]["NumberSeat"].ToString();

                                img.Click += new ImageClickEventHandler(Imagebutton_Click);
                                tc.Controls.Add(img);
                                tr[rowCounter].Controls.Add(tc);
                                SeatNo++;
                            }
                    }//SeatNo < MaxSeatNo
                  table.Controls.Add(tr[rowCounter]);
                }
                seatArranngement.Controls.Add(table);
            }

} 
```

HTML 页面中的 DOM 内容。

```
 <div id="ctl00_ContentPlaceHolder1_seatArranngement">        

                     <table runat="server" id="LayoutTable">
<tr>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 00" runat="server">1</span><input type="image" name="ctl00$ContentPlaceHolder1$1" id="ctl00_ContentPlaceHolder1_1" class="seatRightMostRow1" runat="server" type="image" id="1" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$1&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 01" runat="server">5</span><input type="image" name="ctl00$ContentPlaceHolder1$5" id="ctl00_ContentPlaceHolder1_5" class="seatRightMostRow1" runat="server" type="image" id="5" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$5&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 02" runat="server">9</span><input type="image" name="ctl00$ContentPlaceHolder1$9" id="ctl00_ContentPlaceHolder1_9" class="seatRightMostRow1" runat="server" type="image" id="9" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$9&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 03" runat="server">13</span><input type="image" name="ctl00$ContentPlaceHolder1$13" id="ctl00_ContentPlaceHolder1_13" class="seatRightMostRow1" runat="server" type="image" id="13" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$13&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 04" runat="server">17</span><input type="image" name="ctl00$ContentPlaceHolder1$17" id="ctl00_ContentPlaceHolder1_17" class="seatRightMostRow1" runat="server" type="image" id="17" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$17&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 05" runat="server">21</span><input type="image" name="ctl00$ContentPlaceHolder1$21" id="ctl00_ContentPlaceHolder1_21" class="seatRightMostRow1" runat="server" type="image" id="21" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$21&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 06" runat="server">25</span><input type="image" name="ctl00$ContentPlaceHolder1$25" id="ctl00_ContentPlaceHolder1_25" class="seatRightMostRow1" runat="server" type="image" id="25" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$25&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 07" runat="server">29</span><input type="image" name="ctl00$ContentPlaceHolder1$29" id="ctl00_ContentPlaceHolder1_29" class="seatRightMostRow1" runat="server" type="image" id="29" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$29&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
</tr>
<tr>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 10" runat="server">2</span><input type="image" name="ctl00$ContentPlaceHolder1$2" id="ctl00_ContentPlaceHolder1_2" class="seatRightMostRow1" runat="server" type="image" id="2" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$2&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 11" runat="server">6</span><input type="image" name="ctl00$ContentPlaceHolder1$6" id="ctl00_ContentPlaceHolder1_6" class="seatRightMostRow1" runat="server" type="image" id="6" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$6&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 12" runat="server">10</span><input type="image" name="ctl00$ContentPlaceHolder1$10" id="ctl00_ContentPlaceHolder1_10" class="seatRightMostRow1" runat="server" type="image" id="10" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$10&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 13" runat="server">14</span><input type="image" name="ctl00$ContentPlaceHolder1$14" id="ctl00_ContentPlaceHolder1_14" class="seatRightMostRow1" runat="server" type="image" id="14" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$14&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 14" runat="server">18</span><input type="image" name="ctl00$ContentPlaceHolder1$18" id="ctl00_ContentPlaceHolder1_18" class="seatRightMostRow1" runat="server" type="image" id="18" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$18&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 15" runat="server">22</span><input type="image" name="ctl00$ContentPlaceHolder1$22" id="ctl00_ContentPlaceHolder1_22" class="seatRightMostRow1" runat="server" type="image" id="22" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$22&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 16" runat="server">26</span><input type="image" name="ctl00$ContentPlaceHolder1$26" id="ctl00_ContentPlaceHolder1_26" class="seatRightMostRow1" runat="server" type="image" id="26" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$26&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 17" runat="server">30</span><input type="image" name="ctl00$ContentPlaceHolder1$30" id="ctl00_ContentPlaceHolder1_30" class="seatRightMostRow1" runat="server" type="image" id="30" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$30&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
</tr>
<tr>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 20"></span></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 21"></span></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 22"></span></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 23"></span></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 24"></span></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 25"></span></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 26"></span></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 27" runat="server">31</span><input type="image" name="ctl00$ContentPlaceHolder1$31" id="ctl00_ContentPlaceHolder1_31" class="seatRightMostRow1" runat="server" type="image" id="31" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$31&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
</tr>
<tr>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 30" runat="server">3</span><input type="image" name="ctl00$ContentPlaceHolder1$3" id="ctl00_ContentPlaceHolder1_3" class="seatRightMostRow1" runat="server" type="image" id="3" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$3&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 31" runat="server">7</span><input type="image" name="ctl00$ContentPlaceHolder1$7" id="ctl00_ContentPlaceHolder1_7" class="seatRightMostRow1" runat="server" type="image" id="7" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$7&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 32" runat="server">11</span><input type="image" name="ctl00$ContentPlaceHolder1$11" id="ctl00_ContentPlaceHolder1_11" class="seatRightMostRow1" runat="server" type="image" id="11" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$11&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 33" runat="server">15</span><input type="image" name="ctl00$ContentPlaceHolder1$15" id="ctl00_ContentPlaceHolder1_15" class="seatRightMostRow1" runat="server" type="image" id="15" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$15&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 34" runat="server">19</span><input type="image" name="ctl00$ContentPlaceHolder1$19" id="ctl00_ContentPlaceHolder1_19" class="seatRightMostRow1" runat="server" type="image" id="19" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$19&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 35" runat="server">23</span><input type="image" name="ctl00$ContentPlaceHolder1$23" id="ctl00_ContentPlaceHolder1_23" class="seatRightMostRow1" runat="server" type="image" id="23" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$23&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 36" runat="server">27</span><input type="image" name="ctl00$ContentPlaceHolder1$27" id="ctl00_ContentPlaceHolder1_27" class="seatRightMostRow1" runat="server" type="image" id="27" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$27&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 37" runat="server">32</span><input type="image" name="ctl00$ContentPlaceHolder1$32" id="ctl00_ContentPlaceHolder1_32" class="seatRightMostRow1" runat="server" type="image" id="32" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$32&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
</tr>
<tr>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 40" runat="server">4</span><input type="image" name="ctl00$ContentPlaceHolder1$4" id="ctl00_ContentPlaceHolder1_4" class="seatRightMostRow1" runat="server" type="image" id="4" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$4&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 41" runat="server">8</span><input type="image" name="ctl00$ContentPlaceHolder1$8" id="ctl00_ContentPlaceHolder1_8" class="seatRightMostRow1" runat="server" type="image" id="8" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$8&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 42" runat="server">12</span><input type="image" name="ctl00$ContentPlaceHolder1$12" id="ctl00_ContentPlaceHolder1_12" class="seatRightMostRow1" runat="server" type="image" id="12" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$12&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 43" runat="server">16</span><input type="image" name="ctl00$ContentPlaceHolder1$16" id="ctl00_ContentPlaceHolder1_16" class="seatRightMostRow1" runat="server" type="image" id="16" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$16&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 44" runat="server">20</span><input type="image" name="ctl00$ContentPlaceHolder1$20" id="ctl00_ContentPlaceHolder1_20" class="seatRightMostRow1" runat="server" type="image" id="20" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$20&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 45" runat="server">24</span><input type="image" name="ctl00$ContentPlaceHolder1$24" id="ctl00_ContentPlaceHolder1_24" class="seatRightMostRow1" runat="server" type="image" id="24" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$24&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 46" runat="server">28</span><input type="image" name="ctl00$ContentPlaceHolder1$28" id="ctl00_ContentPlaceHolder1_28" class="seatRightMostRow1" runat="server" type="image" id="28" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$28&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
    <td><span id="ctl00_ContentPlaceHolder1_lbl 47" runat="server">33</span><input type="image" name="ctl00$ContentPlaceHolder1$33" id="ctl00_ContentPlaceHolder1_33" class="seatRightMostRow1" runat="server" type="image" id="33" src="../Images/available_seat_img.png" onclick="javascript:WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$ContentPlaceHolder1$33&quot;, &quot;&quot;, true, &quot;&quot;, &quot;&quot;, false, false))" style="border-width:0px;" /></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:51:40.587

您可以使用以下方法附加到表中的所有按钮：

```
$("#<%= LayoutTable.ClientID %>").find("input[type='image']").click(function(e) {
   //Do something here
}); 
```

# webfonts - Windows 上的 Ubuntu 网络字体

> ID：14123183
> 
> 赞同：0
> 
> 时间：2013-01-02T13:43:07.920
> 
> 标签：webfonts, google-webfonts

我在我的网站上使用 Ubuntu Web Font，字体在 Linux 和 Mac OS X 上看起来不错，但在 Windows 上它们呈现不同。Windows 上字体的主要问题是字母“g”和“q”。很难区分这两者。这是我的样式表中字体定义的样子

```
@font-face {
 font-family: 'UbuntuRegular';
 src: url('assets/Ubuntu-Regular-webfont.eot');
 src: url('assets/Ubuntu-Regular-webfont.eot?#iefix') format('embedded-opentype'),  url('assets/Ubuntu-Regular-webfont.woff') format('woff'),  url('assets/Ubuntu-Regular-webfont.ttf') format('truetype'),  url('assets/Ubuntu-Regular-webfont.svg#UbuntuRegular') format('svg');
 font-weight: normal;
 font-style: normal;
} 
```

这是身体的样式定义

```
body {
    background:#1a1a1a;
    font-family:'UbuntuRegular', Arial, sans-serif;
    font-size:13px;
    margin:0;
    padding:0;
    height: 100%;
} 
```

# c - Winsock2 error 10014 on split TCP stream

> ID：14123184
> 
> 赞同：2
> 
> 时间：2013-01-02T13:43:16.597
> 
> 标签：c, tcp, winsock2

code first

```
DWORD WINAPI tcp_t(LPVOID lpParam)
{
    SOCKET tcp_client_s = (SOCKET)lpParam;
    struct sockaddr_in tcp_client;
    int tcp_client_len = sizeof(tcp_client), length;
    char req[4096], resp[4096];

    getpeername(tcp_client_s, (struct sockaddr *)&tcp_client, &tcp_client_len);

    cli_log(PROTO_TCP, LOG_SYS, "(%s:%d) TCP thread spawned\n", inet_ntoa(tcp_client.sin_addr), ntohs(tcp_client.sin_port));

    length = get_req_tcp(tcp_client_s, req, tcp_client);

    if(strci(req, "GET /syachi2ds/web/", 0))
    {
        while(!strstr(req, "Connection: close\r\n\r\n"))
            length += get_req_tcp(tcp_client_s, req + length, tcp_client);

        length = check_req(req, resp);

        if(length > 0)
            send_resp_tcp(tcp_client_s, resp, length, tcp_client);
    }

    closesocket(tcp_client_s);
    cli_log(PROTO_TCP, LOG_SYS, "(%s:%d) socket closed, closing thread\n", inet_ntoa(tcp_client.sin_addr), ntohs(tcp_client.sin_port));
    ExitThread(0);
}

int get_req_tcp(SOCKET in_s, char *buf, struct sockaddr_in in)
{
    int retval;

    cli_log(PROTO_TCP, LOG_COMM, "(%s:%d) waiting for incoming request...\n", inet_ntoa(in.sin_addr), ntohs(in.sin_port));
    if ( (retval = recv(in_s, buf, 4096, 0)) == SOCKET_ERROR)
        cli_log(PROTO_TCP, LOG_ERROR, "(%d) recv() failed\n", WSAGetLastError());
    cli_log(PROTO_TCP, LOG_COMM, "(%s:%d) data received\n", inet_ntoa(in.sin_addr), ntohs(in.sin_port));
    return retval;
} 
```

This is part of a larger program I'm writing that does some kind of server emulation. It works good with TCP streams thar are not split into multiple packets, otherwise it gives winsock error 10014 on the first subsequent `recv()` invoked in the while loop.

PS: `strci()` is a custom case-insensitive `strstr()`

PS2: i know there's no check for buffer overflows on req array.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T20:29:51.837

10014 is `WSAEFAULT`, which means `recv()` is detecting that "the buf parameter is not completely contained in a valid part of the user address space.". That makes sense because you have a buffer overflow error in your code. You have allocated 4096 bytes on the call stack for your `req` buffer. Each time you call `get_req_tcp()`, you are telling it to read 4096 bytes, even if `req` does not actually have 4096 bytes available to read into.

Each time your loop runs, you are telling `recv()` to read bytes into a new start position within the buffer, but you are not telling `recv()` how many bytes are remaining after that position, so the loop overflows the buffer and will eventually access a memory address that is not on the call stack, causing the `WSAEFAULT` error.

You need to add an extra parameter to `get_req_tcp()` that tells it how many bytes to read.

Try this:

```
DWORD WINAPI tcp_t(LPVOID lpParam)
{
    SOCKET tcp_client_s = (SOCKET)lpParam;
    struct sockaddr_in tcp_client;
    int tcp_client_len = sizeof(tcp_client), length;
    char req[4096], resp[4096];

    getpeername(tcp_client_s, (struct sockaddr *)&tcp_client, &tcp_client_len);

    cli_log(PROTO_TCP, LOG_SYS, "(%s:%d) TCP thread spawned\n", inet_ntoa(tcp_client.sin_addr), ntohs(tcp_client.sin_port));

    length = get_req_tcp(tcp_client_s, req, sizeof(req), tcp_client);
    if (length > 0)
    {
        while (!strstr(req, "\r\n\r\n"))
        {
            retval = get_req_tcp(tcp_client_s, req + length, sizeof(req) - length, tcp_client);
            if (retval < 1)
            {
                length = 0;
                break;
            }
            length += retval;
        }

        if ((length > 0) && (strci(req, "GET /syachi2ds/web/", 0)))
        {
            length = check_req(req, resp);
            if (length > 0)
                send_resp_tcp(tcp_client_s, resp, length, tcp_client);
        }
    }

    closesocket(tcp_client_s);
    cli_log(PROTO_TCP, LOG_SYS, "(%s:%d) socket closed, closing thread\n", inet_ntoa(tcp_client.sin_addr), ntohs(tcp_client.sin_port));

    return 0;
}

int get_req_tcp(SOCKET in_s, char *buf, int buflen, struct sockaddr_in in)
{
    cli_log(PROTO_TCP, LOG_COMM, "(%s:%d) waiting for incoming request...\n", inet_ntoa(in.sin_addr), ntohs(in.sin_port));

    if ((!buf) || (buflen < 1))
    {
        cli_log(PROTO_TCP, LOG_ERROR, "invalid buffer passed for recv()\n");
        return -1;
    }

    int retval = recv(in_s, buf, buflen, 0);

    if (retval == SOCKET_ERROR)
    {
        cli_log(PROTO_TCP, LOG_ERROR, "(%d) recv() failed\n", WSAGetLastError());
        return -1;
    }

    if (retval == 0)
    {
        cli_log(PROTO_TCP, LOG_ERROR, "client disconnected\n");
        return 0;
    }

    cli_log(PROTO_TCP, LOG_COMM, "(%s:%d) %d bytes received\n", retval, inet_ntoa(in.sin_addr), ntohs(in.sin_port));

    return retval;
} 
```

# ruby - OAuth2 gem：第三方实现 - 访问 seek.com 中的其他帐户数据

> ID：14123185
> 
> 赞同：0
> 
> 时间：2013-01-02T13:43:18.290
> 
> 标签：ruby, oauth

我正在连接到使用 OAuth2 进行身份验证的 API (seek.com.au)。我在 OAuth2 gem 上苦苦挣扎了一段时间，最后我写了如下的普通请求。虽然这是可行的，但我仍然想了解我最初的 OAuth2 实施有什么问题。

这是我当前的工作代码，**第三方*与我使用可以访问其他帐户的帐户访问 API 的事实有关。这个逻辑主要在`scope`方法中实现（在这个片段的底部）。

以下包含一些额外的逻辑，但`get_grant`and`post_for_token`方法应该包含所有内容。

```
module Seek::Base

  CONFIG       = YAML.load_file "#{Rails.root}/config/seek.yml"

  HOST         = 'http://test.api.seek.com.au/v1/'

  REQUEST_URIS = {

    get_grant:        HOST + 'OAuth/auth',

    post_for_token:   HOST + 'OAuth/token',

    get_applications: HOST + 'advertiser/applications'

  }

  def uri_for(request, params = {})

    uri  = REQUEST_URIS[request]

    uri += '?' + params.to_param if params.any?

    URI.parse uri

  end

end

class Seek::OAuth2 # TODO? is instance needed?

  include Seek::Base

  # by account_id

  @@tokens = {}

  def initialize(account_id)

    @account_id = account_id 

  end

  def self.authenticate!(account_id)

    new(account_id).authenticate!

  end

  # eg: when a request responded that the token is expired

  def self.expire_token(account_id)

    @@tokens.delete account_id

  end

  ###########################################################################

  ############################### begin #####################################

  # authentication

  # see: http://developer.seek.com.au/docs/partner-api/api-methods/oauth-2.0

  def authenticate!

    @@tokens[@account_id] ||= begin

      grant = get_grant

      raise Exception.new(@error) if @error

      Rails.logger.info "Retrive token for #{@account_id}"

      post_for_token

    end

  end

private

  # part of t he authentication process

  # as we have one account for many entities, we use third party variation

  # see: http://developer.seek.com.au/docs/partner-api/api-methods/oauth2/auth

  def get_grant

    uri         = uri_for :get_grant, {response_type: :code, client_id: username, scope: scope}

    response    = Net::HTTP.get_response uri

    params      = response['location'].split('?').second

    @error      = params.split('error=').second

    @grant_code = params.split('code=').second

  end

  # part of the authentication process

  # see: http://developer.seek.com.au/docs/partner-api/api-methods/oauth2/token

  def post_for_token

    uri = uri_for :post_for_token

    request = Net::HTTP::Post.new uri.path, {'Content-Type' => 'application/x-www-form-urlencoded;charset=UTF-8'}

    request.set_form grant_type: :authorization_code, code: @grant_code, redirect_uri: ''

    request.basic_auth username, password

    response = Net::HTTP.new(uri.host, uri.port).request request

    JSON(response.body)['access_token']

   end    

  ########################## end ############################################

  ###########################################################################

  def username

    CONFIG['credentials']['username']

  end

  def password

    CONFIG['credentials']['password']

  end

  ############## the scope method

  ############## I think I need to insert this in the OAuth request

  def scope

    "urn:seek:thirdparty:username:#{username},urn:seek:advertiser:identity:#{@account_id}"

  end

end 
```

这里有几行（替换`authenticate!`方法）是为了做同样的事情，但遗憾的是，OAuth 返回`invalid_client`.

```
client = OAuth2::Client.new(username, password, :site => 'http://test.api.seek.com.au/v1')

client.auth_code.authorize_url redirect_uri: ''

token = client.auth_code.get_token 'authorization_code_value',

          headers: {'Authorization' => %^Basic #{Base64.encode64 "#{username}:#{password}"}^ } 
```

我认为问题`scope`在于 OAuth 创建的方法（见第一个片段的底部），但我不确定，无论如何我找不到修改它的方法。

我还在[GitHub 中打开了一个问题](https://github.com/intridea/oauth2/issues/125)，但我认为这已经涵盖，只是没有记录（或者我找不到）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:52:11.900

## Ruby (Rails) 实现

这个实现没有使用任何包装器，我尝试了 gem OAuth2 但我无法获得授权代码，我想是因为第三方实现需要自定义`scope`我无法使用 gem 设置的。

```
module Api::Base

  CONFIG       = YAML.load_file "#{Rails.root}/config/api.yml"
  HOST         = 'https://api.com.au/v1/'
  REQUEST_URIS = {
    get_grant:        HOST + 'OAuth/auth',
    post_for_token:   HOST + 'OAuth/token',
    get_applications: HOST + 'advertiser/applications'
  }

  def uri_for(request, params = {})
    uri  = REQUEST_URIS[request]
    uri += '?' + params.to_param if params.any?
    URI.parse uri
  end

end

class Api::OAuth2
  include Api::Base

  # by account_id
  @@tokens = {}

  def initialize(account_id)
    @account_id = account_id
  end

  def self.authenticate!(account_id)
    new(account_id).authenticate!
  end

  # eg: when a request responded that the token is expired
  def self.expire_token(account_id)
    @@tokens.delete account_id
  end

  # authentication
  def authenticate!
    @@tokens[@account_id] ||= begin
      grant = get_grant
      raise StandardError.new(@error) if @error

      puts "Retrive token for #{@account_id}"
      post_for_token
    end
  end

private

  # part of t he authentication process
  # as we have one account for many entities, we use third party variation
  def get_grant
    uri          = uri_for :get_grant, {response_type: :code, client_id: username, scope: scope}
    http         = Net::HTTP.new uri.host, uri.port
    http.use_ssl = uri.port == 443
    puts "SSL not set for uri #{uri}" unless http.use_ssl?
    response     = http.get uri.to_s
    raise Exception.new(response.message) unless response.is_a? Net::HTTPFound

    params      = response['location'].split('?').second
    @error      = params.split('error=').second
    @grant_code = params.split('code=').second
  end

  # part of the authentication process
  def post_for_token
    uri      = uri_for :post_for_token
    request  = Net::HTTP::Post.new uri.path, {'Content-Type' => 'application/x-www-form-urlencoded;charset=UTF-8'}
    request.set_form grant_type: 'authorization_code', code: @grant_code, redirect_uri: ''
    request.basic_auth username, password
    http = Net::HTTP.new uri.host, uri.port
    http.use_ssl = uri.port == 443
    response = http.start {|http| http.request request}

    JSON(response.body)['access_token']
   end
  end

  def username
    CONFIG['credentials']['username']
  end

  def password
    CONFIG['credentials']['password']
  end

  def scope
    "urn:api:thirdparty:username:#{username},urn:api:advertiser:identity:#{@account_id}"
  end

end 
```

我仍然计划使用 OAuth 2，[如果有的话我会在这里发布我的更新](http://netengine.com.au/blog/OAuth2-third-party-implementation/)

# javascript - 更新 javascript cookie 值，而不删除以前的值

> ID：14123186
> 
> 赞同：0
> 
> 时间：2013-01-02T13:43:18.257
> 
> 标签：javascript, cookies

JavaScript Cookies 有点麻烦。我正在制作一个持续到午夜的待办事项清单。我已经将我的 cookie 设置为过期，当我添加要执行的项目时，它们都会被存储到 cookie 值中，一切都很好。

如果我重新加载页面，它们的价值仍然很高。**但是**，如果我在重新加载页面后去添加另一个项目，它会获取先前项目的 rd 并重新开始。

我基本上是在寻找一种将新项目添加到 cookie 值末尾的方法，而不是删除已经存在的内容并重新开始。

该应用程序可以在[todo.lukeseager.com上找到](http://todo.lukeseager.com)

cookie函数如下：

```
function midnightCookie(name,value,path) {
    var expires = "";
    var date = new Date();
    var midnight = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 23, 59, 59);
    expires = "; expires=" + midnight.toGMTString();
    if (!path) {
        path = "/";
    }
    document.cookie = name + "=" + value + expires + "; path=" + path;
} 
```

为了存储放入待办事项列表中的信息，我使用以下命令：

```
var todoUserList = window.todoTable.innerHTML = window.todoTable.innerHTML +
    "<tr class='list-row'><td class='small-column'>"+todoStatus+"</td>"+
    "<td>"+todoTitle+"<br><span class='description'>"+todoDescription+"</span></td>"+
    "<td class='small-column'>"+todoUrgent+"</td></tr>";

    window.midnightCookie("todo",todoUserList); 
```

如果还有其他需要，请告诉我 :) 如果这对您来说更容易的话，所有文件都可以通过开发工具访问 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:04:51.687

尝试这个：

```
document.cookie += ";" + name + "=" + value + expires + "; path=" + path; 
```

# tcl - 检查一个值是否是 tk tcl 的有效颜色

> ID：14123190
> 
> 赞同：4
> 
> 时间：2013-01-02T13:43:46.557
> 
> 标签：tcl, tk

我有一个带有一个变量的类，该变量应该保存一种颜色，该颜色稍后将用作[tcl 中的颜色](http://www.tcl.tk/man/tcl8.5/TkLib/GetColor.htm)，并且由于它的值没有作为字符串显示给用户，因此它可以保存单词或 Hex RGB 数字（例如#FF00FF 或“洋红色”）。

当我创建一个对象时，我想检查颜色是否有效。有没有办法检查某个值是否是 tcl 和 tk 的有效颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T13:47:55.567

您可以运行`winfo rgb .`将尝试将字符串转换为 RGB 值的命令。如果字符串无效，该命令将引发您可以捕获的错误。

# php - 解析错误：语法错误，行中出现意外的 T_STRING

> ID：14123194
> 
> 赞同：-3
> 
> 时间：2013-01-02T13:44:10.843
> 
> 标签：php, parse-error

当我尝试使用 cron 作业运行文件时，我得到以下信息

`Parse error: syntax error, unexpected T_STRING in /home/joshand2/public_html/application/models/model_posting.php on line 1787`

1787 中的行是`goto endofloop;`我不知道这行中是否存在任何与语法相关的问题，但`endofloop`引用。

**循环结束：**

```
if (file_exists("cookies/".$this->job_id."_job_".$this->site_id."_site.txt")) {
    echo "The file cookies/".$this->job_id."_job_".$this->site_id."_site.txt exists"; 
    unlink("cookies/".$this->job_id."_job_".$this->site_id."_site.txt");
} 
```

有人可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:55:20.990

您可能需要重构代码以避免使用`goto`跳转标签。

因为：

1.  听起来好像您的 PHP 版本可能还不支持它（DaveRandom 建议的版本 <5.3）
2.  可能有一种方法可以避免跳转标签并仍然实现相同的行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:22:11.950

不要使用 goto。至少定义一个函数。您的代码示例如下：

```
function endOfLoop($job_id, $site_id) {
    $file = 'cookies/' . $job_id . '_job_' . $site_id . '_site.txt';
    if (file_exists($file)) {
        echo 'The file ' . $file . ' exists'; 
        unlink($file);
    }
} 
```

然后在你使用 goto 的地方，只需调用你的函数：

```
endOfLoop($this->job_id, $this->site_id); 
```

您将某些东西标记为“endofloop”这一事实肯定表明您需要重新考虑您的代码。

# c# - 关注 Listview 最后添加的项目

> ID：14123196
> 
> 赞同：1
> 
> 时间：2013-01-02T13:44:44.487
> 
> 标签：c#, .net, windows-store-apps

我正在开发 Windows 商店应用程序，我正在使用`ListView`控件动态添加数据。这些项目被添加到列表的末尾。`Scrollbar`添加更多数据时出现。我想用底部的滚动条以编程方式突出显示最后添加的项目。我不想手动滚动滚动条来查看最后添加的项目。我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:18:36.460

```
 listView1.EnsureVisible(listView1.Items.Count - 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T07:26:28.033

用这个：

```
yourListView.ScrollIntoView(yourListView.Items[yourListView.Items.Count - 1]); 
```

# php - 如何使用 yii-booster 实现多个可编辑列？

> ID：14123203
> 
> 赞同：2
> 
> 时间：2013-01-02T13:45:12.900
> 
> 标签：php, yii, yii-extensions

我正在做一个 Yii 员工时间安排项目，卡在可编辑凝乳员工时间模块上。我想`StaffHours`使用 Editable [Yii Booster Extension](http://vitalets.github.com/x-editable/index.html)将员工安排时间存储在表中。

我的`staffhours`表数据库结构为：

`id(pk) user_id(fk) staff_id(int) monday(text) tuesday(text) wednesday(text) thursday(text) friday(text) saturday(text) sunday(text)`

用于以关联数组格式存储序列化时间的所有日期文本字段：

```
array(
 '12:00 AM' => 'open',
 '12:30 AM' => 'close',
 '01:00 AM' => 'close',
 '01:30 AM' => 'open',
 '02:00 AM' => 'open',
 .
 .
 .
 '11:00 PM' => 'close'
 '11:30 PM' => 'close'
); 
```

我已经使用[Yii Booster Extension](http://vitalets.github.com/x-editable/index.html)实现了 Editable UI ，请看下面的快照：

**问题**是我无法识别如何在数据库中存储/更新员工工时数据。

![在此处输入图像描述](../Images/d98d876568412cf09901e7803f265d56.png)

**我做过**的一些代码****

 ****---- 在视图中 ----**

```
<?php
$this->breadcrumbs=array(
    'Settings'=>array('settings/settings'),
    'Staff Hours',
);  
        $user_id = Yii::app()->user->getId();
        $condition = "user_id = '$user_id'";
        $data = StaffHours::model()->findAll();
        $Monday = unserialize($data[0]['monday']);
        $Tuesday = unserialize($data[0]['tuesday']);
        $Wednesday = unserialize($data[0]['wednesday']);
        $Thursday = unserialize($data[0]['thursday']);
        $Friday = unserialize($data[0]['friday']);
        $Saturday = unserialize($data[0]['saturday']);
        $Sunday = unserialize($data[0]['sunday']);
        foreach($data as $data)
        {
?>

    <div id="settinghead">StaffS Hours </div>
        <div id="leftmenu"> <?php $this->widget('application.components.widgets.SettingsMenu.settingsmenuWidget'); ?></div>
        <div id="rightcontent">
            <div id="pageheding">Staff Hours Detail </div>
                <table class="items table table-bordered">
                <thead> 
                <tr><th scope="col">Time</th>   <th scope="col">Monday</th> <th scope="col">Tuesday</th><th scope="col">Wednesday</th>
                <th scope="col">Thursday</th><th scope="col">Friday</th><th scope="col">Saturday</th><th scope="col">Sunday</th> </tr>
                 </thead>
                 <?php 
                $start = strtotime('12:00am');
                $end = strtotime('11:59pm');
                for( $i = $start; $i <= $end; $i += 900) 
                {   
                    $time = date('h:i A', $i);
                ?>
                  <tr>
                    <th scope="row"><?php echo $time; ?></th>
                    <td id="mon<?php echo $time; ?>">
                    <?php  
                    $this->widget('bootstrap.widgets.TbEditableField', array(
                        'type' => 'select',
                        'model' => $data,
                        'emptytext' => $Monday[$time],
                        'attribute' => 'monday',
                        'url' => $this->createUrl('staffhours/updatetime&time='.$time), //url for submit data
                        'source' => array('Open', 'Close', 'Away'),
                        'value' => $time,
                        'enabled' => true
                    )); 
                    ?>
                    </td>
                    <td id="tue<?php echo date('g:i A', $i); ?>"><?php echo $Tuesday[$time]; ?></td>
                    <td id="wed<?php echo date('g:i A', $i); ?>"><?php echo $Wednesday[$time]; ?></td>
                    <td id="thu<?php echo date('g:i A', $i); ?>"><?php echo $Thursday[$time]; ?></td>
                    <td id="fri<?php echo date('g:i A', $i); ?>"><?php echo $Friday[$time]; ?></td>
                    <td id="sat<?php echo date('g:i A', $i); ?>"><?php echo $Saturday[$time]; ?></td>
                    <td id="sun<?php echo date('g:i A', $i); ?>"><?php echo $Sunday[$time]; ?></td>
                  </tr>
                <?php
                }
            }
                ?>
                </table>
        </div> 
```

**---- 在 StaffHoursController 控制器中----**

```
/**
 * Update time.
 */
public function actionUpdatetime($time)
{
    $user_id = Yii::app()->user->getId();
    $pk = $_POST['pk'];
    $day = $_POST['name'];
    $status = $_POST['value'];
    $GetData = StaffHours::model()->findByPk($pk);
    $DayTimes = unserialize($GetData->monday);
    if(array_key_exists($time, $DayTimes))
    {
        unset($DayTimes[$time]);
        //merge new value
        $DayTimes[$time] = $status;
        array_push($DayTimes, $DayTimes[$time]);
        $attributes = array($day => serialize($DayTimes));
        $condition = "id = '$pk' AND user_id = '$user_id'";
        StaffHours::model()->updateByPk($pk, $attributes, $condition);
    }
} 
```

如果出现错误或使用 Editable-UI 为员工工作时间提供的其他简单方法。

然后请建议使用 Editable-UI 存储员工时间的更好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:38:32.147

我认为将数组数据存储到 MySql 文本列中是非常不切实际的，因为您将失去性能、实施适当搜索技术的能力等。更好的数据库设计可以是：每个员工有很多小时，并且每个小时可以分配给很多员工，一个简单的 MANY_MANY 关系。优点是您可以通过非常简单、简单、单一的查询或 ActiveRecord 搜索任何日期、任何时间、任何员工：![在此处输入图像描述](../Images/faac82c9dd1e9829dc60e6fc87c624f2.png)**

# html - 如何使 DIV 包含两个内部部分？

> ID：14123204
> 
> 赞同：0
> 
> 时间：2013-01-02T13:45:11.733
> 
> 标签：html, css

我有以下 HTML 代码：

```
 <section id="content" class="grid_9">
      <div class="block-content grey-bg">
        <div class="container_12">
            <section class="grid_6 aa">
                ... lots of content ...
            </section>
            <section class="grid_6 aa">
                ... some content ...
            </section>
        </div>
      </div>
    </section> 
```

当我在浏览器中查看时，由于我的 gray-bg 类而出现灰色背景，但它没有包含两个 grid_6 部分。实际上它的行为就像里面什么都没有。teo grid_6 部分的区域在灰色背景下方溢出。有人可以告诉我我做错了什么。对不起，我忘了提及我使用的是 960 网格系统。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T13:58:34.040

您需要确保您`<div class="block-content grey-bg">`包含所有的浮动。960.gs 通过在其`container_#`类上应用“clearfix”来做到这一点。如果您需要其他元素具有相同的行为，您可以手动将 960.gs 的`clearfix`类应用于该元素：

```
<div class="block-content grey-bg clearfix"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T13:51:23.037

尝试`clear: both`为 block-content 或 gray-bg 类添加 css。

例如：

```
div.block-content {
    clear: both;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:01:37.490

您在哪个浏览器上查看它。由于您使用的是 HTML5 标签，因此除非您声明它，否则它不会在 IE 上正确呈现。

干杯，

# java - 用于在本地机器上打开文件但保存在云驱动器中的小程序

> ID：14123207
> 
> 赞同：0
> 
> 时间：2013-01-02T13:45:29.570
> 
> 标签：java, applet, cloud, drive

我见过一个小程序，它允许您单击云驱动器上的文件（即在网页上），然后使用相关应用程序在本地打开文件，当您单击保存时，文件将保存到云盘。

我试过搜索类似的小程序，但什么也找不到。谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:58:00.247

这听起来像 WebDAV 功能。也许像“DAV Explorer” [https://www.ics.uci.edu/~webdav/installation.html](https://www.ics.uci.edu/~webdav/installation.html)这样的东西就是你想要的。

如果没有，请尝试搜索其他 WebDAV 小程序。

# java - jOOQ 将字符串转换为布尔值

> ID：14123209
> 
> 赞同：2
> 
> 时间：2013-01-02T13:45:47.600
> 
> 标签：java, mysql, jooq

我在 MySQL 中有一个表，其中一些列（MD5、FLAGCONFIRMED、FLAGCHANGEPASSWORD）定义为“char(1)”，其中唯一可能的值是 0 和 1。我希望 jOOQ 在代码生成中将它们转换为布尔值。

我创建了一个转换器：

```
public class BooleanConverter implements org.jooq.Converter<String, Boolean>{

   private static final long serialVersionUID = -4785961538634851898L;

   @Override
   public Boolean from(String arg0) {
      if (arg0 == null) {
         return null;
      }
      return arg0.equals("1");
   }

   @Override
   public Class<String> fromType() {
      return String.class;
   }

   @Override
   public String to(Boolean arg0) {
      if (arg0 == null) {
         return null;
      }
      return arg0.booleanValue() ? "1" : "0";
   }

   @Override
   public Class<Boolean> toType() {
      return Boolean.class;
   }

} 
```

然后我在我的 pom 中配置了转换器（我使用 maven 来生成源）。

```
<customTypes>
  <customType>
    <name>java.lang.Boolean</name>
    <converter>org.test.converter.BooleanConverter</converter>
  </customType>
</customTypes>

<forcedTypes>
  <forcedType>
    <name>java.lang.Boolean</name>
    <expressions>.*\.FLAGCHANGEPASSWORD,.*\.FLAGCONFIRMED,.*\.MD5.*</expressions>
  </forcedType>
</forcedTypes> 
```

代码已成功生成，但类型未转换，它们的类型仍然是 String。

```
/**
 * The table column <code>mmw.enduser.MD5</code>
 */
public final org.jooq.TableField<de.kybeidos.mmw.data.tables.records.EnduserRecord, java.lang.String> MD5 = createField("MD5", org.jooq.impl.SQLDataType.CHAR, this); 
```

我如何使它工作？

**编辑**：我正在使用 jOOQ 2.6.1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:23:57.493

这似乎是 jOOQ-codegen 中的一个错误。虽然文档明确指出可以提供几个正则表达式......

```
<forcedTypes>
  <forcedType>
    <!-- Specify again he fully-qualified class name of your custom type -->
    <name>java.util.GregorianCalendar</name>

    <!-- Add a list of comma-separated regular expressions matching columns -->
    <expressions>.*\.DATE_OF_.*</expressions>
  </forcedType>
</forcedTypes> 
```

取自
[http://www.jooq.org/doc/2.6/manual/code-generation/custom-data-types/](http://www.jooq.org/doc/2.6/manual/code-generation/custom-data-types/)

...源代码实际上将`<expressions/>`内容解释为单个正则表达式。请尝试以下操作，用管道替换逗号：

```
<expressions>.*\.FLAGCHANGEPASSWORD|.*\.FLAGCONFIRMED|.*\.MD5.*</expressions> 
```

事实上，逗号不应该用于分隔正则表达式，因为逗号可以具有正则表达式语义`{a, b}`或用户输入语义。我已提交[#2076](https://github.com/jOOQ/jOOQ/issues/2076)以在 jOOQ 2.7、3.0 中修复该问题

请注意，您不必为布尔值编写自定义转换器。`BOOLEAN`您可以像这样将 JDBC 类型强制到列上：

```
<forcedTypes>
  <forcedType>
    <name>BOOLEAN</name>
    <expressions>.*\.FLAGCHANGEPASSWORD|.*\.FLAGCONFIRMED|.*\.MD5.*</expressions>
  </forcedType>
</forcedTypes> 
```

# entity-framework - 首先在实体框架 5 代码中以编程方式构建迁移

> ID：14123211
> 
> 赞同：2
> 
> 时间：2013-01-02T13:45:49.290
> 
> 标签：entity-framework

我正在开发一个系统，该系统使用`ToolingFacade`. 该系统在实体框架 4.3.1 中运行良好。升级到 5.0 后，我看到启动工具时加载了正确的实体框架版本，但是当我调用脚手架方法时，我得到以下异常：

```
Could not load type 'System.Data.Entity.Migrations.Design.ToolingFacade+ScaffoldRunner'
from assembly 'EntityFramework, Version=4.1.0.0, Culture=neutral, 
PublicKeyToken=b77a5c561934e089'. 
```

有谁知道为什么在实体框架 5.0 中调用方法需要旧版本的 dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T16:01:23.430

我最近在使用 EF6 时遇到了这个问题。Visual Studio 要求我通过 Package Manage 控制台重新安装 EntityFramework 以使一切恢复正常。请注意，当我这样做时，控制台输出表明它不知道之前安装了 EF；不知何故，这种关联已经消失了。也许这就是没有加载工具组件或组件的原因。

无论如何，通过控制台重新安装包（并重新启动 Visual Studio）为我解决了这个问题。

# php - 如何在 fetchAll() 查询中排序

> ID：14123219
> 
> 赞同：0
> 
> 时间：2013-01-02T13:46:12.203
> 
> 标签：php, database, doctrine-orm, zend-framework2

我正在我的存储库中执行以下标准查询（有效）：

```
$objects = $this->findAll(); 
```

我需要按它们的名称属性对这些对象进行排序。我没有幸运地在谷歌上搜索这个问题......有没有简单的方法或者我需要进行自定义查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:57:51.803

```
$this->findBy(array("where_column", ""), array("order_column" => "desc/asc")); 
```

# java - 将objective-c面向块的api转换为android

> ID：14123220
> 
> 赞同：2
> 
> 时间：2013-01-02T13:46:20.683
> 
> 标签：java, android, ios, objective-c-blocks

我的任务是将我们在 iOS 中的 web 服务层（完全用块编写）转换为与 Android 类似的东西。由于 Java 还没有闭包，那么合理的方法是什么？

示例 api 调用：

```
if (![data.locationsAPI cityNamesForCity:self.searchBox.text
                              onSuccess:^(JSONRef * ref)
     {
         locations = [[ref valueForKey:@"cities"]arrayCopy];
         [self.searchTable reloadData];
         [self.hotelTable reloadData];

     } onFailure:^(IOError * error)
     {
         locations = nil;
         [self.searchTable reloadData];
     }])
{
    [self notReachableAlert];
} 
```

成功/失败块在主线程上调用，而内部的 api 调用在后台线程中。

我可以对匿名类做类似的事情，该类将传递原始类，然后可以分派给某个方法来处理结果。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-10T09:06:42.120

您可以使用**模式委托** [http://en.wikipedia.org/wiki/Delegation_pattern](http://en.wikipedia.org/wiki/Delegation_pattern)。传递采用某些方法的委托对象。在得到一些结果后，用结果值调用这个方法。

# javascript - Textarea 每行字符数限制

> ID：14123221
> 
> 赞同：0
> 
> 时间：2013-01-02T13:46:22.097
> 
> 标签：javascript, jquery, html, textarea

我想用 132 个字符限制我的 TextArea 的行。但是我也想看到一个水平滚动条。我查看了很多帖子，其中大多数都推荐`wrap="hard"`财产。但在我的情况下，它不会创建滚动条。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:01:53.140

你需要像这个例子一样 使用`overflow-y:scroll`样式和属性：http: [//jsfiddle.net/eKBRt/1/](http://jsfiddle.net/eKBRt/1/)`wrap=auto`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T13:53:54.143

您可以简单地设置`wrap=off`然后使用 css 设置`overflow-x`为`scroll`. 看看这个工作的[JSFiddle](http://jsfiddle.net/eKBRt/)

# python - python INT /日期格式

> ID：14123223
> 
> 赞同：0
> 
> 时间：2013-01-02T13:46:30.123
> 
> 标签：python, date, formatting

我正在尝试使用 datetime 模块。我需要这个月作为 INT 回来，前面是零。以 01 表示 JAN，02 表示 FEB 等形式。我可以通过使用获得 1，

```
 today = date.today()
 m = today.month 
```

我可以通过这种方式获得正确的格式，但不能作为 INT。

```
 today.strftime("%m") 
```

有没有一种简单的方法来获得我需要的所需格式。我查看了参考资料，我确定我错过了它，但有人可以帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T13:50:24.287

```
'{:%m}'.format(datetime.datetime.now()) 
```

似乎工作。

当然，您可以采取不那么直接的方法：

```
'{:02d}'.format(datetime.datetime.now().month) 
```

或者您可以使用旧式字符串插值：

```
'%02d' % (datetime.datetime.now().month) 
```

但我喜欢第一个，因为我觉得它很酷......

* * *

最后，我看不出有什么问题`.strftime`......即使你说你试过了，它对我来说效果很好：

```
datetime.datetime.now().strftime('%m') 
```

* * *

您正在寻找的是一个特殊的子类，`int`它知道在打印时如何“表示”自己：

```
 class MyInt(int):
     def __str__(self):
         return '%02d' % self

 a = MyInt(3)
 print (a) 
```

但是，我绝对不建议使用这种方法，相反，当您需要将整数表示为字符串时，我会建议使用字符串格式化或字符串插值，就像我在上面对整数对象所做的那样。

# arduino - 从 char 到 'uint8_t' 的无效转换

> ID：14123224
> 
> 赞同：1
> 
> 时间：2013-01-02T13:46:31.540
> 
> 标签：arduino

我正在使用 shift out 语句来驱动几个 7 段显示器（最后），但我遇到了问题。

我使用`#include <avr/pgmspace.h>`libary 来节省处理空间。最后，我需要 shiftOut 一个二进制数，然后输入一个 reg，然后输入 BCD，然后输入我的显示器：

```
strcpy_P(buffer, (char*)pgm_read_word(&(Times[big])));

shiftOut(dataPin, clockPin, MSBFIRST, buffer); 
```

在缓冲区的地方会去选择的值（例如 B00100011 应该显示 23），我的代码给了我

```
Invalid conversion from char to 'uint8_t' 
```

突出显示 shiftOut 行

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:58:01.573

这里的问题是[`shiftOut`](http://arduino.cc/en/Reference/shiftOut)需要一个字节 ( `uint8_t`) 作为它的第四个参数 ( `value`)。传递的值是一个`char*`（大概声明为一个`prog_char`数组）。

为了解决这个问题，值的声明需要使用`prog_uchar`，如下所示：

```
prog_uchar values[] PROGMEM = { (prog_uchar) B00100011, ... };

...

int valueIndex = ...; // Index of value in the values array
shiftOut(dataPin, clockPin, MSBFIRST, pgm_read_byte(&(values[valueIndex]))); 
```

# java - Eclipse - Swing WindowBuilder 在 JList 上给出错误 代码解析

> ID：14123227
> 
> 赞同：5
> 
> 时间：2013-01-02T13:46:47.757
> 
> 标签：java, eclipse, windowbuilder

我正在使用此代码创建一个`JList`：

```
JList list = new JList<String>(new String[] {"Hello", "World"}); 
```

该程序也可以在 Eclipse Juno 上编译和运行，但是当我尝试使用 WindowBuilder 打开它时，会出现以下错误：

```
new JList<String>(new String[] {"Hello", "World"}) is not valid source for component creation, it references not existing constructor. 
```

现在，由于我使用的是 Java 7（JDK 和 JRE），这应该不是错误。

注意：程序的其余部分是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:05:09.317

在 Linux 下，我没有收到任何有关“Java(TM) SE 运行时环境（内部版本 1.7.0_10-b18）”的警告。这运行得很好：

```
 final JList list = new JList<String>(new String[] { "Hello", "World" });
    list.setSelectionInterval(0, 1);
    for (final Object o : list.getSelectedValuesList()) {
        System.out.println(o);
    } 
```

但是，您应该使用“final JList list = ...”来提供正确的通用参数。这通常会导致问题。

提示：激活编译器警告，它们通常会给你有用的提示。

[编辑：]因为我的代码有效，我猜问题确实存在于其他地方，而不是你上面提到的部分。

# f# - 错误消息“定义一个类型，一个或多个......”

> ID：14123231
> 
> 赞同：0
> 
> 时间：2013-01-02T13:47:01.450
> 
> 标签：f#

我正在学习 F#，我从另一个人那里得到了一些代码。但是当我尝试编译代码时，出现了错误。完整的代码如下：

```
module touchdev_ast
open FParsec
type Name = string
type Operator =
| Plus | Minus | Slash | Asterisk
| LessOrEqual | Less | Equal | Unequal | GreaterOrEqual | Greater
| Assignment // :=
| And | Or | Not
| Arrow // −&gt;
| Concat // ||

type Parameter = Name (*param name*) * Name (*type qualifier*) 
```

这里（下一行）出现错误！！

```
type Expression =
public
| Nothing
| Float of float
| Boolean of bool
| Variable of string
| String of string
| BinaryOperation of Operator * Expression * Expression
| FunctionCall of Name (*fun name*) * Expression list (*arguments*)

and Statement =
public
| Block of Statement list
| Expression of Expression
| Assignment of Expression list (*multiple assignment*) * Expression
| If of Expression * Statement (*then*) * Statement option (*else*)
| ForI of Name (*loop variant*) * Expression (*upper bound*) * Statement
| ForEach of Name (*iterator*) * Expression (*collection*) * Expression option (*condition*) * Statement
| While of Expression * Statement
| MetaStatement of Name

and public FunctionType =
Name (*fun name*) * Parameter list option (*input values*)* Parameter list option (*return values*) * Statement

and TopLevel =
public
| MetaDeclaration of Name (*type*) * string (*value*)
| Action of FunctionType
| Event of FunctionType
| Global of Parameter * Statement (*options*)

type CodeEntry =
public
| Namespace of string (* name *) * bool (* singleton *) * CodeEntry list option (* properties *) * string option (* help *)
| Property of string (* name *) * bool (* public *) * Parameter list option (* input *) * Parameter list option (* return values *) * string option (* help *)
| Variable of string (* name *) * bool (* assignable *) * bool (* initialized *) * string (* type *) * string option (* help *)
| BinaryOperator of string (* name *) * string (* type left *) * string (* type right *) * string (* type return *) * string option (* help *)
| Meta of string (* name *) * string (* value *) 
```

请帮我修复错误！:D 提前谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T13:52:34.740

缩进在 F# 中很重要——因此您需要为您声明的每个联合类型缩进 case 声明。此外，您不需要`public`修饰符，因为默认情况下这些案例将是公开的（但这与您的错误无关）。

```
module touchdev_ast
open FParsec
type Name = string
type Operator =
    | Plus | Minus | Slash | Asterisk
    | LessOrEqual | Less | Equal | Unequal | GreaterOrEqual | Greater
    | Assignment // :=
    | And | Or | Not
    | Arrow // −&gt;
    | Concat // ||

type Parameter = Name (*param name*) * Name (*type qualifier*)

type Expression =
    | Nothing
    | Float of float
    | Boolean of bool
    | Variable of string
    | String of string
    | BinaryOperation of Operator * Expression * Expression
    | FunctionCall of Name (*fun name*) * Expression list (*arguments*)

and Statement =
    | Block of Statement list
    | Expression of Expression
    | Assignment of Expression list (*multiple assignment*) * Expression
    | If of Expression * Statement (*then*) * Statement option (*else*)
    | ForI of Name (*loop variant*) * Expression (*upper bound*) * Statement
    | ForEach of Name (*iterator*) * Expression (*collection*) * Expression option (*condition*) * Statement
    | While of Expression * Statement
    | MetaStatement of Name

and public FunctionType =
    Name (*fun name*) * Parameter list option (*input values*)* Parameter list option (*return values*) * Statement

and TopLevel =
    | MetaDeclaration of Name (*type*) * string (*value*)
    | Action of FunctionType
    | Event of FunctionType
    | Global of Parameter * Statement (*options*)

type CodeEntry =
    | Namespace of string (* name *) * bool (* singleton *) * CodeEntry list option (* properties *) * string option (* help *)
    | Property of string (* name *) * bool (* public *) * Parameter list option (* input *) * Parameter list option (* return values *) * string option (* help *)
    | Variable of string (* name *) * bool (* assignable *) * bool (* initialized *) * string (* type *) * string option (* help *)
    | BinaryOperator of string (* name *) * string (* type left *) * string (* type right *) * string (* type return *) * string option (* help *)
    | Meta of string (* name *) * string (* value *) 
```

# c# - 在运行时将控件移动一圈？

> ID：14123238
> 
> 赞同：0
> 
> 时间：2013-01-02T13:47:21.117
> 
> 标签：c#, winforms, animation, picturebox

我知道您可以在运行时更改控件的 x/y 位置，我可以使用计时器将其向上/向下/向左/向右/对角移动，但如何以编程方式将其移动一圈？

例如，如果我在主窗体的 12 点钟位置有一个 PictureBox 控件，我可以在单击按钮时将那个图片框移动一个圆圈，在它的起始位置完成吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T13:51:58.170

使用正弦和余弦函数。

看看[那个](https://stackoverflow.com/a/13499952/290343)例子。

[此处](http://www.softwareandfinance.com/CSharp/Draw_Circle_Pixel.html)有一个具体的 C# 示例。如果有一天链接不存在，这里是在表单上绘制 25 个半径递增的圆的源代码：

```
void PutPixel(Graphics g, int x, int y, Color c)
{
      Bitmap bm = new Bitmap(1, 1);
      bm.SetPixel(0, 0, Color.Red);
      g.DrawImageUnscaled(bm, x, y);
}

private void Form1_Paint(object sender, PaintEventArgs e)
{  
      Graphics myGraphics = e.Graphics;

      myGraphics.Clear(Color.White);
      double radius = 5;
      for (int j = 1; j <= 25; j++)
      {
            radius = (j + 1) * 5;
            for (double i = 0.0; i < 360.0; i += 0.1)
            {
                double angle = i * System.Math.PI / 180;
                int x = (int)(150 + radius * System.Math.Cos(angle));
                int y = (int)(150 + radius * System.Math.Sin(angle));

                PutPixel(myGraphics, x, y, Color.Red);
            }
      }
      myGraphics.Dispose();
} 
```

**结果：**

![在此处输入图像描述](../Images/78ed737816b55b3bc199d3e89a50740f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:05:33.263

我写了一个小类，`PictureBox`从中可以让你很容易地达到你的结果。每次调用`RotateStep`它的位置都会相应改变。角度和速度以弧度表示，距离以像素表示。

```
class RotatingPictureBox : PictureBox
{
    public double Angle { get; set; }
    public double Speed { get; set; }
    public double Distance { get; set; }

    public void RotateStep()
    {
        var oldX = Math.Cos(Angle)*Distance;
        var oldY = Math.Sin(Angle)*Distance;
        Angle += Speed;
        var x = Math.Cos(Angle)*Distance - oldX;
        var y = Math.Sin(Angle)*Distance - oldY;
        Location += new Size((int) x, (int) y);
    }
} 
```

示例用法：

```
public Form1()
{
    InitializeComponent();
    var pictureBox = new RotatingPictureBox
    {
        Angle = Math.PI,
        Speed = Math.PI/20,
        Distance = 50,
        BackColor = Color.Black,
        Width = 10,
        Height = 10,
        Location = new Point(100, 50)
    };
    Controls.Add(pictureBox);
    var timer = new Timer {Interval = 10};
    timer.Tick += (sender, args) => pictureBox.RotateStep();
    timer.Start();
} 
```

# javascript - 在本地存储信息？

> ID：14123240
> 
> 赞同：1
> 
> 时间：2013-01-02T13:47:33.793
> 
> 标签：javascript, google-chrome, google-chrome-extension

> **可能重复：**
> [谷歌浏览器扩展：本地存储](https://stackoverflow.com/questions/3033829/google-chrome-extension-local-storage)

如何在本地存储我的 Chrome 扩展程序的信息..

我尝试过使用[localStorage](http://www.html5rocks.com/en/features/storage)，并且我也尝试过制作一个 txt 文档，我的 javascript 应该在其中写入信息。

但一切都没有运气。

希望有人可以帮助我弄清楚如何在本地为我的 Chrome 扩展程序保存信息。

以及如何访问信息并检查是否设置了特殊信息？

先谢谢了。

# android - Google Maps Android API v2 - 交互式信息窗口（就像在原始的 android google maps 中一样）

> ID：14123243
> 
> 赞同：194
> 
> 时间：2013-01-02T13:47:42.787
> 
> 标签：android, google-maps, infowindow, google-maps-android-api-2

`InfoWindow`在使用新的 Google Maps API v2 单击标记后，我正在尝试进行自定义。我希望它看起来像谷歌的原始地图应用程序。像这样：

![示例图像](../Images/5499b13be3efba8bedf82b2ce9699931.png)

当我在`ImageButton`里面时，它不起作用-整个`InfoWindow`都被选中了，而不仅仅是`ImageButton`. 我读到这是因为没有`View`本身，而是快照，因此无法将各个项目彼此区分开来。

**编辑：** 在[文档](https://developers.google.com/maps/documentation/android-api/infowindows#info_window_events)中（感谢[Disco S2](https://stackoverflow.com/a/13857787/956975)）：

> 如前面关于信息窗口的部分所述，信息窗口不是实时视图，而是将视图呈现为地图上的图像。因此，您在视图上设置的任何侦听器都将被忽略，并且您无法区分视图各个部分的点击事件。建议您不要在自定义信息窗口中放置交互式组件（例如按钮、复选框或文本输入）。

但如果谷歌使用它，必须有某种方法来制造它。有人有什么主意吗？

* * *

## 回答 #1

> 赞同：341
> 
> 时间：2013-02-23T12:55:14.403

我自己一直在寻找解决这个问题的方法，但没有运气，所以我不得不自己动手，我想在这里与大家分享。（请原谅我的英语不好）（用英语回答另一个捷克人有点疯狂:-)）

我尝试的第一件事是使用一个好的旧的`PopupWindow`. 这很容易 - 只需听`OnMarkerClickListener`然后`PopupWindow`在标记上方显示自定义。StackOverflow 上的其他一些人建议了这个解决方案，乍一看它实际上看起来相当不错。但是，当您开始四处移动地图时，就会出现此解决方案的问题。你必须以`PopupWindow`某种方式自己移动，这是可能的（通过听一些 onTouch 事件），但恕我直言，你不能让它看起来足够好，尤其是在一些慢速设备上。如果您以简单的方式进行操作，它会从一个位置“跳”到另一个位置。您也可以使用一些动画来修饰这些跳跃，但这样`PopupWindow`一来，它应该在我不喜欢的地图上总是“落后一步”。

在这一点上，我正在考虑其他一些解决方案。我意识到我实际上并不需要那么大的自由——展示我的自定义视图以及随之而来的所有可能性（如动画进度条等）。我认为即使是谷歌工程师也不在谷歌地图应用程序中这样做是有充分理由的。我只需要 InfoWindow 上的一个或两个按钮，它会显示按下状态并在单击时触发一些操作。所以我想出了另一个解决方案，它分为两部分：

**第一部分：**
第一部分是能够捕捉到按钮的点击以触发一些动作。我的想法如下：

1.  保留对在 InfoWindowAdapter 中创建的自定义 infoWindow 的引用。
2.  将`MapFragment`（或`MapView`）包裹在自定义 ViewGroup 中（我的称为 MapWrapperLayout）
3.  覆盖`MapWrapperLayout`的 dispatchTouchEvent 和（如果 InfoWindow 当前显示）首先将 MotionEvents 路由到先前创建的 InfoWindow。如果它不消耗 MotionEvents（比如因为您没有点击 InfoWindow 等内的任何可点击区域），那么（并且只有这样）让事件下降到 MapWrapperLayout 的超类，以便最终将其传递到地图。

这是 MapWrapperLayout 的源代码：

```
package com.circlegate.tt.cg.an.lib.map;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.model.Marker;

import android.content.Context;
import android.graphics.Point;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;
import android.widget.RelativeLayout;

public class MapWrapperLayout extends RelativeLayout {
    /**
     * Reference to a GoogleMap object 
     */
    private GoogleMap map;

    /**
     * Vertical offset in pixels between the bottom edge of our InfoWindow 
     * and the marker position (by default it's bottom edge too).
     * It's a good idea to use custom markers and also the InfoWindow frame, 
     * because we probably can't rely on the sizes of the default marker and frame. 
     */
    private int bottomOffsetPixels;

    /**
     * A currently selected marker 
     */
    private Marker marker;

    /**
     * Our custom view which is returned from either the InfoWindowAdapter.getInfoContents 
     * or InfoWindowAdapter.getInfoWindow
     */
    private View infoWindow;    

    public MapWrapperLayout(Context context) {
        super(context);
    }

    public MapWrapperLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public MapWrapperLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    /**
     * Must be called before we can route the touch events
     */
    public void init(GoogleMap map, int bottomOffsetPixels) {
        this.map = map;
        this.bottomOffsetPixels = bottomOffsetPixels;
    }

    /**
     * Best to be called from either the InfoWindowAdapter.getInfoContents 
     * or InfoWindowAdapter.getInfoWindow. 
     */
    public void setMarkerWithInfoWindow(Marker marker, View infoWindow) {
        this.marker = marker;
        this.infoWindow = infoWindow;
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        boolean ret = false;
        // Make sure that the infoWindow is shown and we have all the needed references
        if (marker != null && marker.isInfoWindowShown() && map != null && infoWindow != null) {
            // Get a marker position on the screen
            Point point = map.getProjection().toScreenLocation(marker.getPosition());

            // Make a copy of the MotionEvent and adjust it's location
            // so it is relative to the infoWindow left top corner
            MotionEvent copyEv = MotionEvent.obtain(ev);
            copyEv.offsetLocation(
                -point.x + (infoWindow.getWidth() / 2), 
                -point.y + infoWindow.getHeight() + bottomOffsetPixels);

            // Dispatch the adjusted MotionEvent to the infoWindow
            ret = infoWindow.dispatchTouchEvent(copyEv);
        }
        // If the infoWindow consumed the touch event, then just return true.
        // Otherwise pass this event to the super class and return it's result
        return ret || super.dispatchTouchEvent(ev);
    }
} 
```

所有这一切将使 InfoView 中的视图再次“活动” - OnClickListeners 将开始触发等。

**第二部分：** 剩下的问题是，很明显，您在屏幕上看不到 InfoWindow 的任何 UI 更改。为此，您必须手动调用 Marker.showInfoWindow。现在，如果您在 InfoWindow 中执行一些永久性更改（例如将按钮的标签更改为其他内容），这就足够了。

但是显示按钮按下状态或类似性质的东西要复杂得多。第一个问题是，（至少）我无法让 InfoWindow 显示正常按钮的按下状态。即使我长时间按下按钮，它仍然在屏幕上保持未按下状态。我相信这是由地图框架本身处理的东西，它可能确保不在信息窗口中显示任何瞬态状态。但我可能是错的，我没有试图找出这一点。

我所做的是另一个令人讨厌的 hack - 我将一个按钮附加`OnTouchListener`到按钮并在按钮被按下或释放到两个自定义可绘制对象时手动切换它的背景 - 一个按钮处于正常状态，另一个按钮处于按下状态。这不是很好，但它有效:)。现在我能够看到屏幕上的按钮在正常状态和按下状态之间切换。

还有最后一个故障——如果你点击按钮太快，它不会显示按下状态——它只是保持正常状态（尽管点击本身被触发，所以按钮“工作”）。至少这是它在我的 Galaxy Nexus 上的显示方式。所以我做的最后一件事是我稍微延迟了按钮处于按下状态。这也很丑陋，我不确定它如何在一些较旧、速度较慢的设备上工作，但我怀疑即使是地图框架本身也会做这样的事情。你可以自己试试——当你点击整个信息窗口时，它会保持按下状态的时间长一点，然后是普通按钮（再次——至少在我的手机上）。这实际上就是它在原始谷歌地图应用程序上的工作方式。

无论如何，我给自己写了一个自定义类来处理按钮状态的变化和我提到的所有其他事情，所以这里是代码：

```
package com.circlegate.tt.cg.an.lib.map;

import android.graphics.drawable.Drawable;
import android.os.Handler;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;

import com.google.android.gms.maps.model.Marker;

public abstract class OnInfoWindowElemTouchListener implements OnTouchListener {
    private final View view;
    private final Drawable bgDrawableNormal;
    private final Drawable bgDrawablePressed;
    private final Handler handler = new Handler();

    private Marker marker;
    private boolean pressed = false;

    public OnInfoWindowElemTouchListener(View view, Drawable bgDrawableNormal, Drawable bgDrawablePressed) {
        this.view = view;
        this.bgDrawableNormal = bgDrawableNormal;
        this.bgDrawablePressed = bgDrawablePressed;
    }

    public void setMarker(Marker marker) {
        this.marker = marker;
    }

    @Override
    public boolean onTouch(View vv, MotionEvent event) {
        if (0 <= event.getX() && event.getX() <= view.getWidth() &&
            0 <= event.getY() && event.getY() <= view.getHeight())
        {
            switch (event.getActionMasked()) {
            case MotionEvent.ACTION_DOWN: startPress(); break;

            // We need to delay releasing of the view a little so it shows the pressed state on the screen
            case MotionEvent.ACTION_UP: handler.postDelayed(confirmClickRunnable, 150); break;

            case MotionEvent.ACTION_CANCEL: endPress(); break;
            default: break;
            }
        }
        else {
            // If the touch goes outside of the view's area
            // (like when moving finger out of the pressed button)
            // just release the press
            endPress();
        }
        return false;
    }

    private void startPress() {
        if (!pressed) {
            pressed = true;
            handler.removeCallbacks(confirmClickRunnable);
            view.setBackground(bgDrawablePressed);
            if (marker != null) 
                marker.showInfoWindow();
        }
    }

    private boolean endPress() {
        if (pressed) {
            this.pressed = false;
            handler.removeCallbacks(confirmClickRunnable);
            view.setBackground(bgDrawableNormal);
            if (marker != null) 
                marker.showInfoWindow();
            return true;
        }
        else
            return false;
    }

    private final Runnable confirmClickRunnable = new Runnable() {
        public void run() {
            if (endPress()) {
                onClickConfirmed(view, marker);
            }
        }
    };

    /**
     * This is called after a successful click 
     */
    protected abstract void onClickConfirmed(View v, Marker marker);
} 
```

这是我使用的自定义 InfoWindow 布局文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_marginRight="10dp" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="18sp"
            android:text="Title" />

        <TextView
            android:id="@+id/snippet"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="snippet" />

    </LinearLayout>

    <Button
        android:id="@+id/button" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

测试活动布局文件（`MapFragment`在里面`MapWrapperLayout`）：

```
<com.circlegate.tt.cg.an.lib.map.MapWrapperLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/map_relative_layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.MapFragment" />

</com.circlegate.tt.cg.an.lib.map.MapWrapperLayout> 
```

最后是测试活动的源代码，它将所有这些粘合在一起：

```
package com.circlegate.testapp;

import com.circlegate.tt.cg.an.lib.map.MapWrapperLayout;
import com.circlegate.tt.cg.an.lib.map.OnInfoWindowElemTouchListener;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.InfoWindowAdapter;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {    
    private ViewGroup infoWindow;
    private TextView infoTitle;
    private TextView infoSnippet;
    private Button infoButton;
    private OnInfoWindowElemTouchListener infoButtonListener;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final MapFragment mapFragment = (MapFragment)getFragmentManager().findFragmentById(R.id.map);
        final MapWrapperLayout mapWrapperLayout = (MapWrapperLayout)findViewById(R.id.map_relative_layout);
        final GoogleMap map = mapFragment.getMap();

        // MapWrapperLayout initialization
        // 39 - default marker height
        // 20 - offset between the default InfoWindow bottom edge and it's content bottom edge 
        mapWrapperLayout.init(map, getPixelsFromDp(this, 39 + 20)); 

        // We want to reuse the info window for all the markers, 
        // so let's create only one class member instance
        this.infoWindow = (ViewGroup)getLayoutInflater().inflate(R.layout.info_window, null);
        this.infoTitle = (TextView)infoWindow.findViewById(R.id.title);
        this.infoSnippet = (TextView)infoWindow.findViewById(R.id.snippet);
        this.infoButton = (Button)infoWindow.findViewById(R.id.button);

        // Setting custom OnTouchListener which deals with the pressed state
        // so it shows up 
        this.infoButtonListener = new OnInfoWindowElemTouchListener(infoButton,
                getResources().getDrawable(R.drawable.btn_default_normal_holo_light),
                getResources().getDrawable(R.drawable.btn_default_pressed_holo_light)) 
        {
            @Override
            protected void onClickConfirmed(View v, Marker marker) {
                // Here we can perform some action triggered after clicking the button
                Toast.makeText(MainActivity.this, marker.getTitle() + "'s button clicked!", Toast.LENGTH_SHORT).show();
            }
        }; 
        this.infoButton.setOnTouchListener(infoButtonListener);

        map.setInfoWindowAdapter(new InfoWindowAdapter() {
            @Override
            public View getInfoWindow(Marker marker) {
                return null;
            }

            @Override
            public View getInfoContents(Marker marker) {
                // Setting up the infoWindow with current's marker info
                infoTitle.setText(marker.getTitle());
                infoSnippet.setText(marker.getSnippet());
                infoButtonListener.setMarker(marker);

                // We must call this to set the current marker and infoWindow references
                // to the MapWrapperLayout
                mapWrapperLayout.setMarkerWithInfoWindow(marker, infoWindow);
                return infoWindow;
            }
        });

        // Let's add a couple of markers
        map.addMarker(new MarkerOptions()
            .title("Prague")
            .snippet("Czech Republic")
            .position(new LatLng(50.08, 14.43)));

        map.addMarker(new MarkerOptions()
            .title("Paris")
            .snippet("France")
            .position(new LatLng(48.86,2.33)));

        map.addMarker(new MarkerOptions()
            .title("London")
            .snippet("United Kingdom")
            .position(new LatLng(51.51,-0.1)));
    }

    public static int getPixelsFromDp(Context context, float dp) {
        final float scale = context.getResources().getDisplayMetrics().density;
        return (int)(dp * scale + 0.5f);
    }
} 
```

而已。到目前为止，我只在我的 Galaxy Nexus (4.2.1) 和 Nexus 7 (也是 4.2.1) 上进行了测试，如果有机会，我会在 Gingerbread 手机上进行测试。到目前为止，我发现的一个限制是您无法从屏幕上的按钮所在的位置拖动地图并四处移动地图。它可能会以某种方式被克服，但现在，我可以忍受。

我知道这是一个丑陋的黑客，但我只是没有找到更好的东西，我非常需要这种设计模式，以至于这真的是回到 map v1 框架的理由（顺便说一句。我真的很想避免对于带有片段等的新应用程序）。我只是不明白为什么 Google 不为开发人员提供一些在 InfoWindows 上设置按钮的官方方式。这是一种常见的设计模式，而且这种模式甚至在官方的谷歌地图应用程序中也有使用:)。我理解他们不能让您的视图在 InfoWindows 中“活”的原因 - 这可能会在移动和滚动地图时降低性能。但是应该有一些方法可以在不使用视图的情况下实现这种效果。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-09-28T11:44:35.080

我看到这个问题已经很老了，但仍然......

我们在公司创建了一个 sipmle 库，以实现所需的功能 - 一个包含视图和所有内容的交互式信息窗口。你可以[在 github 上](https://github.com/Appolica/InteractiveInfoWindowAndroid)查看。

我希望它有帮助:)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-13T20:08:18.177

这是我对这个问题的看法。我创建`AbsoluteLayout`了包含信息窗口的叠加层（具有所有交互性和绘图功能的常规视图）。然后我开始`Handler`每 16 毫秒将信息窗口的位置与地图上点的位置同步。听起来很疯狂，但确实有效。

演示视频：[https](https://www.youtube.com/watch?v=bT9RpH4p9mU) ://www.youtube.com/watch?v=bT9RpH4p9mU （考虑到模拟器和视频录制同时运行会降低性能）。

演示代码：[https ://github.com/deville/info-window-demo](https://github.com/deville/info-window-demo)

提供详细信息的文章（俄语）：[http ://habrahabr.ru/post/213415/](http://habrahabr.ru/post/213415/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-24T14:18:10.890

**对于那些`choose007's`无法回答并运行的人**

如果`clickListener`在解决方案中始终无法正常工作`chose007's`，请尝试实施`View.onTouchListener`而不是`clickListener`. 使用任何操作 `ACTION_UP`或`ACTION_DOWN`. 出于某种原因，map`infoWindow`在调度到`clickListeners`.

```
infoWindow.findViewById(R.id.my_view).setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
          int action = MotionEventCompat.getActionMasked(event);
          switch (action){
                case MotionEvent.ACTION_UP:
                    Log.d(TAG,"a view in info window clicked" );
                    break;
                }
                return true;
          } 
```

**编辑：这就是我一步一步做的**

首先在您的活动/片段中的某处膨胀您自己的信息窗口（全局变量）。我的在碎片内。还要确保你的信息窗口布局中的根视图是线性布局（由于某种原因，相对布局在信息窗口中占据了整个屏幕宽度）

```
infoWindow = (ViewGroup) getActivity().getLayoutInflater().inflate(R.layout.info_window, null);
/* Other global variables used in below code*/
private HashMap<Marker,YourData> mMarkerYourDataHashMap = new HashMap<>();
private GoogleMap mMap;
private MapWrapperLayout mapWrapperLayout; 
```

然后在 google maps android api 的 onMapReady 回调中（如果您不知道 onMapReady 是什么，请按照此操作[Maps > Documentation - Getting Started](https://developers.google.com/maps/documentation/android-api/start)）

```
 @Override
    public void onMapReady(GoogleMap googleMap) {
       /*mMap is global GoogleMap variable in activity/fragment*/
        mMap = googleMap;
       /*Some function to set map UI settings*/ 
        setYourMapSettings(); 
```

`MapWrapperLayout`初始化 [http://stackoverflow.com/questions/14123243/google-maps-android-api-v2-interactive-infowindow-like-in-original-android-go/15040761#15040761](http://stackoverflow.com/questions/14123243/google-maps-android-api-v2-) 39 - 默认标记高度 20 - 之间的偏移默认信息窗口底边和它的内容底边 */

```
 mapWrapperLayout.init(mMap, Utils.getPixelsFromDp(mContext, 39 + 20));

        /*handle marker clicks separately - not necessary*/
       mMap.setOnMarkerClickListener(this);

       mMap.setInfoWindowAdapter(new GoogleMap.InfoWindowAdapter() {
                @Override
                public View getInfoWindow(Marker marker) {
                    return null;
                }

            @Override
            public View getInfoContents(Marker marker) {
                YourData data = mMarkerYourDataHashMap.get(marker);
                setInfoWindow(marker,data);
                mapWrapperLayout.setMarkerWithInfoWindow(marker, infoWindow);
                return infoWindow;
            }
        });
    } 
```

**SetInfoWindow 方法**

```
private void setInfoWindow (final Marker marker, YourData data)
            throws NullPointerException{
        if (data.getVehicleNumber()!=null) {
            ((TextView) infoWindow.findViewById(R.id.VehicelNo))
                    .setText(data.getDeviceId().toString());
        }
        if (data.getSpeed()!=null) {
            ((TextView) infoWindow.findViewById(R.id.txtSpeed))
                    .setText(data.getSpeed());
        }

        //handle dispatched touch event for view click
        infoWindow.findViewById(R.id.any_view).setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                int action = MotionEventCompat.getActionMasked(event);
                switch (action) {
                    case MotionEvent.ACTION_UP:
                        Log.d(TAG,"any_view clicked" );
                        break;
                }
                return true;
            }
        }); 
```

**单独处理标记单击**

```
 @Override
    public boolean onMarkerClick(Marker marker) {
        Log.d(TAG,"on Marker Click called");
        marker.showInfoWindow();
        CameraPosition cameraPosition = new CameraPosition.Builder()
                .target(marker.getPosition())      // Sets the center of the map to Mountain View
                .zoom(10)
                .build();
        mMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition),1000,null);
        return true;
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-07-24T08:29:31.183

只是一个猜测，我没有足够的经验来尝试它......）-：

由于 GoogleMap 是一个片段，因此应该可以捕获标记 onClick 事件并显示自定义**片段**视图。地图片段仍将在背景上可见。有人试过吗？它不能工作的任何原因？

缺点是地图片段将被冻结在背景上，直到自定义信息片段将控制权返回给它。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2016-09-30T11:57:25.203

我已经为这个问题构建了一个示例 android studio 项目。

**输出屏幕截图： -**

[![在此处输入图像描述](../Images/c04d24b56057313ebd0b5a4a6ad3a9e3.png)](https://i.stack.imgur.com/GTpqU.png)

[![在此处输入图像描述](../Images/6e065a09685da80224b85c857497bc58.png)](https://i.stack.imgur.com/3p84l.png)

[![在此处输入图像描述](../Images/7fc977cf03a73bab36eae93f5d8dc6b4.png)](https://i.stack.imgur.com/SULJg.png)

**下载完整的项目源代码点击** **[这里](https://www.dropbox.com/sh/ku97ajose03bpvt/AADGMLxT0n_kTp5rMK1b8SdSa?dl=0)**

**请注意：**您必须在 Androidmanifest.xml 中添加您的 API 密钥

* * *

## 回答 #7

> 赞同：-8
> 
> 时间：2013-02-28T10:45:42.270

这真的很简单。

```
googleMap.setInfoWindowAdapter(new InfoWindowAdapter() {

            // Use default InfoWindow frame
            @Override
            public View getInfoWindow(Marker marker) {              
                return null;
            }           

            // Defines the contents of the InfoWindow
            @Override
            public View getInfoContents(Marker marker) {

                // Getting view from the layout file info_window_layout
                View v = getLayoutInflater().inflate(R.layout.info_window_layout, null);

                // Getting reference to the TextView to set title
                TextView note = (TextView) v.findViewById(R.id.note);

                note.setText(marker.getTitle() );

                // Returning the view containing InfoWindow contents
                return v;

            }

        }); 
```

只需在您使用 GoogleMap 的类中添加上述代码即可。R.layout.info_window_layout 是我们的自定义布局，它显示将代替 infowindow 的视图。我刚刚在这里添加了文本视图。您可以在此处添加附加视图，使其类似于示例快照。我的 info_window_layout 是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"    
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:orientation="vertical" 
    >

        <TextView 
        android:id="@+id/note"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

我希望它会有所帮助。[我们可以在http://wptrafficanalyzer.in/blog/customizing-infowindow-contents-in-google-map-android-api-v2-using-infowindowadapter/#comment-39731](http://wptrafficanalyzer.in/blog/customizing-infowindow-contents-in-google-map-android-api-v2-using-infowindowadapter/#comment-39731)找到自定义信息窗口的工作示例

已编辑：此代码显示了我们如何在 infoWindow 上添加自定义视图。此代码未处理对自定义视图项目的点击。所以它接近答案但不完全是答案，这就是为什么它不被接受为答案。

# objective-c - 如何根据条件显示或不显示 NIB 创建的视图

> ID：14123248
> 
> 赞同：1
> 
> 时间：2013-01-02T13:48:13.790
> 
> 标签：objective-c, macos, cocoa, nsview, nib

目前，我有以下情况：我有一个打开菜单的 nib 文件，并且有一个独特的主窗口。当这个 NIB 创建的视图完成启动时，窗口已经初始化并显示。

除了以正常方式启动应用程序外，我还想以显示窗口和菜单的特定方式启动它。

换句话说，我需要能够在我的应用程序启动时定义一个条件，并且基于该条件，我想使用普通视图/笔尖打开/初始化/显示应用程序，或者我不想显示它们（但是我可能需要创建/初始化视图）。

有什么想法我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:15:14.227

在 IB 中，进入检查器并**关闭主窗口的“启动时可见”。**
然后在您的 AppDelegate 中，检查要做什么：显示主窗口或让它保持不可见并显示特殊窗口！

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification{
    if (myCondition == TRUE) {
       //do something else...
    } else {
        [[NSApp mainWindow] makeKeyAndOrderFront:nil];
    }
} 
```

# zend-framework - Zend 框架中与 Firebird 适配器的数据库连接

> ID：14123251
> 
> 赞同：5
> 
> 时间：2013-01-02T13:48:36.287
> 
> 标签：zend-framework, database-connection, firebird, interbase

我刚开始了解 ZF 和 Firebird，因为我被分配到一个项目。几天来我一直试图在两者之间建立联系，但我还没有成功。我用 PDO_Mysql 尝试了 ZF，它工作得很好，就像它与 PHP 的 Firebird 连接（在 ZF 之外）一样，但是当我尝试与 ZF 中的 Firebird 适配器建立连接时，它一直显示各种错误。

所以，只是为了检查。要在 ZF 中与 Firebird 建立连接，应该使用我在 application.ini 中配置的适配器 (Firebird.php) 来完成？我在 application.ini 中有这样的东西：

```
**resources.db.adapter = "Firebird"
resources.db.params.host = "localhost"
resources.db.params.dbname =  "C:/wamp/www/WebTH/application/data/THDATA.gdb"
resources.db.params.username = "sysdba"
resources.db.params.password = "masterkey"** 
```

结果错误：`...Firebird.php): failed to open stream: No such file or directory in ...\Loader.php`

我还看到需要在 Bootstrap.php 中添加一个函数。如果我像这样在 bootstrap.php 中添加函数 initDb：

```
 **protected function _initDb()
{
    $this->bootstrap('config');
    $config = $this->getResource('config');
    $db = Zend_Db::factory('Firebird', array(
        'host' => $config->Database->Server,
        'username' => $config->Database->Username,
        'password' => $config->Database->Password,
        'dbname' => $config->Database->DBName,
        'adapterNamespace' => 'ZendX_Db_Adapter'
    ));
    return $db;
}** 
```

我得到错误：`...Uncaught exception 'Zend_Application_Bootstrap_Exception' with message 'Resource matching "config" not found' in ...\BootstrapAbstract.php`

我想知道我真正需要做什么才能使连接正常工作。抱歉，如果这太明显了，但我无法找到特定于 Zend Framework 和 Firebird 的基本连接案例，因此我不确定我应该做什么以及应该去哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:58:56.437

[披露：我从未使用过[Firebird](http://www.firebirdsql.org/)数据库。]

您可能知道，Firebird 适配器不作为核心 ZF1 包的一部分提供。看起来你可以从前缀下拉`extras`它`ZendX`：

[http://framework.zend.com/svn/framework/extras/trunk/library/ZendX/Db/Adapter/](http://framework.zend.com/svn/framework/extras/trunk/library/ZendX/Db/Adapter/)

将`Firebird.php`和`Firebird/`文件放到一个目录`library/ZendX/Db/Adapter/`中。

如果您`application.ini`使用密钥，那么您的类中`resources.db.*`不需要`_initDb()`方法。`Bootstrap`只需确保您也将`adapterNamespace`密钥包含在其中：

`resources.db.params.adapterNamespace = "ZendX_Db_Adapter_"`

您可能还需要将`ZendX`前缀添加到自动加载器命名空间：

`autoloaderNamespaces[] = "ZendX_"`

未经测试，但这样的事情应该可以工作。

# layout - 如何在 GraphViz 等级布局中强制执行从左到右的节点排序？

> ID：14123259
> 
> 赞同：22
> 
> 时间：2013-01-02T13:49:14.783
> 
> 标签：layout, graphviz, graph-visualization

我正在使用 GraphViz 可视化一系列流程。每个进程由程序顺序的一些读或写操作组成。自然地，希望针对每个处理以*从左到右的顺序排列操作。*

使用 GraphViz（2.28 版），我的代码如下所示：

```
digraph G 
{
ranksep = 1.0; size = "10,10";
{ 
    node [shape = plaintext, fontsize = 20];
    0 -> 1 -> 2 -> 3 -> 4;
}
node [shape = box];
{rank = same;0;wy1;rf1;rc1;rz1;ry1;ra1;rb1;rx2;}
{rank = same;1;wf1;}
{rank = same;2;wx2;wc1;}
{rank = same;3;wf2;wz2;wx3;wa1;}
{rank = same;4;wz1;wy2;wx5;wb1;}
wy1 -> rf1;
rf1 -> rc1;
rc1 -> rz1;
rz1 -> ry1;
ry1 -> ra1;
ra1 -> rb1;
rb1 -> rx2;
wx2 -> wc1;
wf2 -> wz2;
wz2 -> wx3;
wx3 -> wa1;
wz1 -> wy2;
wy2 -> wx5;
wx5 -> wb1;
wf1 -> rf1[color = blue];
wc1 -> rc1[color = blue];
wz1 -> rz1[color = blue];
wy1 -> ry1[color = blue];
wa1 -> ra1[color = blue];
wb1 -> rb1[color = blue];
wx2 -> rx2[color = blue];

// W'WR Order:
wx3 -> wx2[style = dashed, color = red];

// W'WR Order:
wx5 -> wx2[style = dashed, color = red];
} 
```

*很抱歉，我不允许发布声誉太低的输出图片。*如果你可以运行代码，你会看到结果不是那么令人满意，因为 pid = 3 的过程中出现了乱序。具体来说，GraphViz 布局算法重新排列了（理想的）顺序“wf2-> wz2 -> wa1 -> wx3”到“wx3，wf2，wz2，wa1”。因此，我的问题是：

> **我的问题**：如何在排名环境中强制执行*从左到右的节点排序？*

通过在这个网站上的探索，我发现了一些类似的问题和潜在的解决方案。**但是，它们在我的具体示例中不起作用：**

*   [Graphviz .dot 节点排序](https://stackoverflow.com/q/7627904/1833118)：*约束 = false*选项使我的 PDF 图片更糟。我检查了[点用户手册](https://stackoverflow.com/q/12746224/1833118)，上面写着：

    > 在等级分配期间，边缘的头节点被限制在比尾节点更高的等级上。但是，如果边缘的约束=false，则不强制执行此要求。

    基于以上陈述，（我猜）*约束=假*选项在不同等级之间而不是在同一等级之间生效。

*   [Graphviz---随机节点顺序和通过标签的边](https://stackoverflow.com/q/12746224/1833118)：令人惊讶的是，*constraint = false选项**在同一等级中*帮助了“有限状态机”很多。同样，它并没有使我免于麻烦。

*   [graphviz：循环布局，同时保留节点顺序](https://stackoverflow.com/q/4242949/1833118)：过程图在节点和边数上都是动态的。因此，使用节点的绝对位置可能没有吸引力（导致许​​多边缘交叉？）。

    感谢您的任何建议。可执行代码将不胜感激。

![点文件](../Images/2730e9a42298689c79ba50d233c49849.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T15:30:15.613

```
 digraph G 
{
ranksep = 1.0; size = "10,10";
{ 
    node [shape = plaintext, fontsize = 20];
    0 -> 1 -> 2 -> 3 -> 4;
}
node [shape = box];
{
rank = same;
0->wy1->rf1->rc1->rz1->ry1->ra1->rb1->rx2 [color=white];
rankdir=LR;
}
{
rank = same;
1->wf1[color=white];
rankdir=LR
}
{
rank = same;
2->wx2->wc1[color=white];
rankdir=LR;
}
{
rank = same;
3->wf2->wz2->wx3->wa1[color=white];
rankdir=LR;
}
{
rank = same;
4->wz1->wy2->wx5->wb1[color=white];
rankdir=LR;
}
wy1 -> rf1;
rf1 -> rc1;
rc1 -> rz1;
rz1 -> ry1;
ry1 -> ra1;
ra1 -> rb1;
rb1 -> rx2;
wx2 -> wc1;
wf2 -> wz2;
wz2 -> wx3;
wx3 -> wa1;
wz1 -> wy2;
wy2 -> wx5;
wx5 -> wb1;
wf1 -> rf1[color = blue];
wc1 -> rc1[color = blue];
wz1 -> rz1[color = blue];
wy1 -> ry1[color = blue];
wa1 -> ra1[color = blue];
wb1 -> rb1[color = blue];
wx2 -> rx2[color = blue];

// W'WR Order:
wx3 -> wx2[style = dashed, color = red];

// W'WR Order:
wx5 -> wx2[style = dashed, color = red];
} 
```

我不太确定我是否正确地解决了您的问题，但请尝试使用它并评论是否是您想要的。我为节点的正确排名添加了不可见的边缘，并使用 rankdir 来使用左右布局。

# javascript - 为什么这个验证不起作用？？？使用玉 angularjs jquery 和 twitter 引导程序

> ID：14123260
> 
> 赞同：0
> 
> 时间：2013-01-02T13:49:15.940
> 
> 标签：javascript, node.js, angularjs, pug, express

我制作了一个表格，我想在跳转到下一步之前进行验证，这是我想要尝试做的一个重要示例。在此[示例](http://jsfiddle.net/asgoth/YXKMU/)中，如果电子邮件无效，则该步骤不起作用

所以我试着把它放在我的表格上，但没有用

这是玉文件

```
link(rel='stylesheet',href='/stylesheets/index/publicacion/alquiler/departamento.css')
script(type='text/javascript',src='/javascripts/assets/angular.min.js')

#alquiler_departamento.row-fluid(ng-controller="RegisterCtrl")
    form(name='myForm',id="alquiler_departamento_formulario", onselectstart="return false", ondragstart="return false",action='/publicar',method='post',enctype="multipart/form-data")
        input(type='hidden',name='tipo-operacion',value='Alquiler' ,tipo-operacion)
        input(type='hidden',name='categoria',value='Departamento' ,categoria)

        ul.nav.nav-tabs
            li(ng-repeat='step in steps', ng-class='{active: $index==getCurrentStepIndex()}')
                a(href='javascript:void(0)', ng-click='goToStep($index)') {{step}}

        #seleccion(ng-switch on="selection")
            #paso_uno(ng-switch-when="Step 1: Team Info")
                #datos_titulo.span8
                    legend Titulo de la Publicacion
                    .control-group
                        .controls
                            input.input-block-level(type='text',placeholder="Ingrese un titulo para la publicacion",id='titulo_publicacion',name='titulo_publicacion',class='caja_texto')
                    .alert.alert-info
                        tt *- Coloque el titulo de la publicacion que aparecera en la cabecera de la misma.

                #datos_ubicacion.span8
                    input(type='hidden',id='latitud',name='lat')
                    input(type='hidden',id='longitud',name='lng')

                    legend Ubicacion
                    #datos_ubicacion_selects.span12
                        .control-group.play-blok
                            label.control-label(for='select_provincias') Provincia
                            .controls
                                select(id='select_provincias',name='cod_provincia')
                                    option(value='') -Seleccione Provincia-
                                    option(value="5") Cordoba
                        .control-group.play-blok
                            label.control-label(for='select_ciudades') Localidad
                            .controls
                                select(id='select_ciudades',name='cod_localidad')
                                    option(value='') -Seleccione Localidad-
                                    option(value='0') -Otra Localidad-
                        .control-group.play-blok
                            label.control-label(for='select_barrios') Barrio
                            .controls
                                select(id='select_barrios',name='cod_barrio')
                                    option(value='') -Seleccione Barrio-
                                    option(value='0') -Otro Barrio-
                    #datos_ubicacion_mapa.span12
                        include ../../../partials/gmaps/gmaps_publicacion   
                    #datos_ubicacion_direccion.span12
                        .control-group.play-blok
                            label.control-label(for='direccion') Calle
                            .controls
                                input(type='text',placeholder="Calle o Direccion exacta",class='direccion',id='direccion',name='calle')
                        .control-group.play-blok
                            label.control-label(for='numero') Altura
                            .controls
                                input(type='text',placeholder="Altura de Calle",class='numero',id='numero',name='numero')
                #datos_verticales.span4
                    legend Departamento
                    .control-group.play-blok
                        label.control-label(for='piso') Piso
                        .controls
                            input.input-small(type='text',name='piso',class='piso',id='piso',placeholder='1-99 o A-Z')
                    .control-group.play-blok
                        label.control-label(for='departamento') Departamento
                        .controls
                            input.input-small(type='text',name='departamento',class='departamento',id='departamento',placeholder='1-99 o A-Z')
                    .control-group.margen-ten
                        label.control-label(for='disponibilidad') Disponibilidad
                        .controls
                            select.input-medium(name='disponibilidad',id='disponibilidad')
                                option(value="Inmediata") Inmediata
                                option(value='') A partir de
                            input(id="fecha",name='fecha',type="date")

            #paso_dos(ng-switch-when="Step 2: Campaign Info")
                h2 hola paso dos

            #paso_tres(ng-switch-when="Step 3: Campaign Media")
                h2 hola paso tres

        .clearfix
        ul.pager.pull-left
            li(ng-class='{disabled: !hasPreviousStep()}')
                a(href='javascript:void(0);', ng-click='decrementStep()') ← Previous Step
            li(ng-class='{disabled: myForm.$invalid}')
                a(href='javascript:void(0);', ng-click='incrementStep(myForm)') Next Step →
        .pull-right
            button.btn.btn-success(style='margin: 20px 0;') Confirm and Register
        .clearfix

script(type='text/javascript',src='/javascripts/index/publicacion/alquiler/alquiler_departamento_angular_config.js')
script(type='text/javascript',src='javascripts/index/publicacion/alquiler/publicar_alquiler_select_funciones.js') 
```

这是包含角度配置的js

```
// Declare app level module which depends on filters, and services
var app = angular.module('myApp', []);

app.directive('tituloPublicacion', function() {
        return {
            require: 'ngModel',
            restrict: 'A',
            link: function(scope, elm, attrs, ctrl) {
                ctrl.$parsers.unshift(function(viewValue) {
                    if(viewValue && viewValue.match(/[a-z0-9\-_]+@[a-z0-9\-_]+\.[a-z0-9\-_]{2,}/)) {
                        // it is valid
                        ctrl.$setValidity('titulo_publicacion', true);
                        return viewValue;
                    } else {
                        // it is invalid, return undefined (no model update)
                        ctrl.$setValidity('titulo_publicacion', false);
                        return undefined;
                    }
                });
            }
        };
    });

function RegisterCtrl($scope, $location) {

  $scope.steps = [
    'Step 1: Team Info',
    'Step 2: Campaign Info',
    'Step 3: Campaign Media'
  ];
  $scope.selection = $scope.steps[0];

  $scope.getCurrentStepIndex = function(){
    // Get the index of the current step given selection
    return _.indexOf($scope.steps, $scope.selection);
  };

  // Go to a defined step index
  $scope.goToStep = function(index) {
    if ( !_.isUndefined($scope.steps[index]) )
    {
      $scope.selection = $scope.steps[index];
    }
  };

  $scope.hasNextStep = function(){
    var stepIndex = $scope.getCurrentStepIndex();
    var nextStep = stepIndex + 1;
    // Return true if there is a next step, false if not
    return !_.isUndefined($scope.steps[nextStep]);
  };

  $scope.hasPreviousStep = function(){
    var stepIndex = $scope.getCurrentStepIndex();
    var previousStep = stepIndex - 1;
    // Return true if there is a next step, false if not
    return !_.isUndefined($scope.steps[previousStep]);
  };

  $scope.incrementStep = function(form) {
    if (form.$invalid) return;

    if ( $scope.hasNextStep() )
    {
      var stepIndex = $scope.getCurrentStepIndex();
      var nextStep = stepIndex + 1;
      $scope.selection = $scope.steps[nextStep];
    }
  };

  $scope.decrementStep = function() {
    if ( $scope.hasPreviousStep() )
    {
      var stepIndex = $scope.getCurrentStepIndex();
      var previousStep = stepIndex - 1;
      $scope.selection = $scope.steps[previousStep];
    }
  };
} 
```

为什么不工作的titulo_publicacion 验证？？？天呐！

编辑 2

这是表单[图像](http://tinypic.com/r/3090fev/6) 的结果标签不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:53:05.417

将您的指令注册为`tituloPublicacion`，**而不是** `titulo_publicacion`。在您的 html/jade 中，使用`titulo-publicacion`.

您还需要将其添加到您的输入字段中：

```
input(type='hidden',name='tipo_operacion',value='Alquiler', tipo-operacion) 
```

在您的指令中使用`restrict: 'A'`.

我没有在您的代码段中看到它，但是您需要让角度[引导](http://docs.angularjs.org/guide/bootstrap)自身：

```
html(ng-app='myApp') 
```

您没有[正确注入服务](http://docs.angularjs.org/guide/di)。现在尝试使用非缩小的角度版本。

您必须创建控制器，例如：

```
app.controller('RegisterCtrl', ['$scope', 'location', function($scope, $location) {
  $scope.steps = [
   'Step 1: Team Info',
   'Step 2: Campaign Info',
   'Step 3: Campaign Media'
  ];
  ...
}]); 
```

# java - 如何在容器内正确布局旋转节点？

> ID：14123269
> 
> 赞同：4
> 
> 时间：2013-01-02T13:49:32.547
> 
> 标签：java, javafx-2

我想在`Hyperlink`我的 JavaFX 2 应用程序中添加一个。此链接应垂直位于我的应用程序的最左侧或右侧，就像您在许多应用程序中看到它具有最小化和停靠模块一样 - 例如 IntelliJ IDEA。

事实证明，即使在 SceneBuilder 中放置节点也很困难，因为`Hyperlink`当我想要旋转它时，容器会增长或改变坐标。

所以我的问题是：如何将一个或多个旋转 90 度或 270 度的节点放置在固定大小的容器（最好是`VBox`或`AnchorPane`）内？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T18:17:52.090

将旋转后的节点放在[Group](http://docs.oracle.com/javafx/2/api/javafx/scene/Group.html)中- 这样 Group 的[layoutBounds](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#layoutBoundsProperty)将匹配旋转后的[boundsInParent](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#boundsInParentProperty%28%29)`Node`。这可能是您想要的，因为这意味着节点的视觉边界现在用于布局目的。这适用于自动重定位节点的布局管理器（例如`VBox`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:51:22.440

您可能希望在代码中执行此操作，而不是在 SceneBuilder 中。您可以将节点添加到父节点（VBox 或其他）并对其应用旋转变换。请记住，JavaFX 中的所有 UI 元素都只是场景图中的节点，可以随意转换。

[另请参阅 Node 的 javadoc，关于转换的段落。](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)

# javascript - 单击一个时隐藏具有相同类名的其他元素

> ID：14123270
> 
> 赞同：2
> 
> 时间：2013-01-02T13:49:34.120
> 
> 标签：javascript, html, ember.js

我有 10 个具有相同类名“dp-check”的 html div，我将其用作组件并在同一页面中多次使用。现在我的问题是，当我单击其中一个时，最初所有 div 都被隐藏，然后它的“显示”设置为“内联”（仅限该实例）并且所有其他 div 都被隐藏，我想在任何其他具有相同类名的 div 时关闭显示或单击页面上的其他位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:58:15.580

试试这个：

```
function clickHandler(e){
    e = e || window.event;
    var elements = document.getElementsByClassName('dp-check');
    for(var i = 0; i < elements.length; i++){
        elements[i].style.display = 'none'; // Hide all elements.
    }
    e.target.style.display = 'inline'; // Show the clicked element.
} 
```

您必须将 分配给`clickHandler`元素上的点击事件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T13:55:25.253

`dp-check`当使用 jQuery 单击页面上的其他位置时，您可以隐藏所有div：

```
$('body').click(function (event) {
  var $target = $(event.target);
  if(!$target.hasClass("dp-check") ) {
    $("dp-check").css('display','none');
  }
} 
```

# cocoa - replaceSubview:with 和 ARC 正在发布旧视图

> ID：14123274
> 
> 赞同：0
> 
> 时间：2013-01-02T13:49:49.280
> 
> 标签：cocoa, nsview

使用[NSView](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html)的`replaceSubview:with:`方法换出不同的视图时出现问题。调用方法时释放旧视图，文档状态，

> 该方法导致 oldView 被释放；如果您打算重用它，请务必在发送此消息之前保留它，并在将其添加为另一个 NSView 的子视图时酌情释放它。

但是，当使用自动引用计数 (ARC) 时，无法发送保留消息。文档是否需要更新，如何在 ARC 中使用此方法？

我正在交换的视图都存在于同一个 nib 中，并且我没有不同的视图控制器。交换视图并将它们存储以备后用的首选方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:43:47.040

首先将旧视图存储在一个强变量中供以后使用，然后将其换出以防止它被释放。

# javascript - 如何使用 Chrome 开发工具调试基于 v8 的远程应用程序

> ID：14123285
> 
> 赞同：4
> 
> 时间：2013-01-02T13:50:59.997
> 
> 标签：javascript, google-chrome, remote-debugging, v8

v8 有自己的基于 JSON 的远程调试协议和两个 UI 调试器：控制台应用程序 D8 和 eclipse 插件（托管在[http://code.google.com/p/chromedevtools](http://code.google.com/p/chromedevtools)）

Chrome 使用 WebKit 远程调试协议，包括 Console、DOM Debugger、...、**Debugger**

> “WebKit 远程调试协议”是 Google Chrome/Chromium 调试协议。您可以在[http://developers.google.com/chrome-developer-tools/docs/remote-debugging找到它的描述](http://developers.google.com/chrome-developer-tools/docs/remote-debugging)

那么是否可以使用 Chrome 附带的 Chrome 开发工具来调试基于 v8 的远程应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:11:14.157

尝试NodeJS 版本 >= 0.6 的[Node Webkit 代理](https://github.com/c4milo/node-webkit-agent)节点检查器适用于 NodeJS 版本 0.4

需要在您的节点服务器中设置设置，并根据您的节点版本访问库提供的 URL。您不能直接在 Chrome 中使用开发者工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:22:32.020

[node-inspector](https://github.com/dannycoates/node-inspector)旨在完全按照您的要求进行操作。

它似乎与[Node Webkit Agent](https://github.com/c4milo/node-webkit-agent)竞争。我还没有尝试过 webkit 代理，因为它看起来更新，并且在没有一些干预的情况下无法安装。node-inspector 为我工作，而且相当不错，尽管从运行语句到将输出编组到 Chrome 的调试器中存在一些延迟。总的来说，它是一个非常有用的工具。

# javascript - 使用数组 onclick 中的图像更改节点图像

> ID：14123286
> 
> 赞同：1
> 
> 时间：2013-01-02T13:51:12.087
> 
> 标签：javascript, arrays, image, onclick

我正在显示数组中的图像。我希望用户能够从数组中选择一个图像，并让它替换表中的当前图像 img.src。当单击单元格时，我设法向用户显示图像选择，但不确定从这里去哪里。我在数组图像上尝试了一个点击处理程序，但警报仅在单击数组中的最后一个图像时显示。使困惑。所有帮助表示赞赏。

```
 function addImage (col) {
var img = new Image();  // Note that a new img variable will be declared each time this function is called
img.src = "../www/images/TEST.png";
col.appendChild(img); 
img.onclick = function () {
    var myImages = new Array();
    myImages[0] = "../www/images/TEST3.png";
    myImages[1] = "../www/images/TEST2.png";
    myImages[2] = "../www/images/TEST4.png";

    for (var i = 0; i < myImages.length; i++) {
        var allImages = new Image();
        allImages.src=myImages[i];

        var newList = document.createElement("ul");
        var newContent = allImages;
        newList.appendChild(newContent); 
        my_div = document.getElementById("showPics");
        document.body.insertBefore(newList, my_div);
        };

        allImages.onclick = function(){

        alert("the click is working");//it is but only for the last image...grrrrr
        };
        //this.src = ????;
       };
      };

     for (r = 0; r < howOften; r++) {
     row = table.insertRow(-1);
    for (c = 0; c < numDays; c++) {
    col = row.insertCell(-1);
    addImage(col);
     };
    };
     document.getElementById('holdTable').appendChild(table);
    }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:05:42.423

对于初学者，您需要在循环中移动您的点击分配：

```
function addImage(col) {
    var img = new Image(); // Note that a new img variable will be declared each time this function is called
    img.src = "../www/images/TEST.png";
    col.appendChild(img);
    img.onclick = function() {
        var myImages = new Array();
        myImages[0] = "../www/images/TEST3.png";
        myImages[1] = "../www/images/TEST2.png";
        myImages[2] = "../www/images/TEST4.png";

        for (var i = 0; i < myImages.length; i++) {
            var allImages = new Image();
            allImages.src = myImages[i];

            var newList = document.createElement("ul");
            var newContent = allImages;
            newList.appendChild(newContent);
            my_div = document.getElementById("showPics");
            document.body.insertBefore(newList, my_div);
            allImages.onclick = function(e) {
                img.src = e.target.src;
            };

        };

        //this.src = ????;
    };
};

for (r = 0; r < howOften; r++) {
    row = table.insertRow(-1);
    for (c = 0; c < numDays; c++) {
        col = row.insertCell(-1);
        addImage(col);
    };
};
document.getElementById('holdTable').appendChild(table);
}; 
```

...但是您拥有的代码将在每次单击图像时重新分配您的单击处理程序，并重新创建您的 DOM (HTML) 元素。您可能要考虑改为仅`my_div`在后续点击时隐藏/显示。

# php - php上传的问题

> ID：14123289
> 
> 赞同：0
> 
> 时间：2013-01-02T13:51:30.050
> 
> 标签：php, image, file-upload

当它显示图像代码时我有一个小问题，但在浏览器中感觉正确，而不是出现在图像中，图像显示为绘图，这将是问题。

```
<?php
$conn = @mysql_connect("localhost", "root", "") or die ("Problemas na conexão.");
$db = @mysql_select_db("manutencao", $conn) or die ("Problemas na conexão");
$sql = mysql_query("SELECT * FROM clientes");
while ($usuario = mysql_fetch_object($sql)) {
    // Exibimos a foto
    echo "<img src='C:xampp/htdocs/IMAGENS_SALVAS/".$usuario->foto."' alt='Foto de exibição' /><br />";

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:57:34.190

尝试更改以下行：

```
echo "<img src='C:xampp/htdocs/IMAGENS_SALVAS/".$usuario->foto."' alt='Foto de exibição' /><br />"; 
```

对此：

```
echo "<img src='/IMAGENS_SALVAS/".$usuario->foto."' alt='Foto de exibição' /><br />"; 
```

# php - 从 twitter 流 api 接收的 PHP 对象中提取数据

> ID：14123290
> 
> 赞同：3
> 
> 时间：2013-01-02T13:51:32.977
> 
> 标签：php, twitter, twitter-streaming-api

我正在使用[tmhOAuth](https://github.com/themattharris/tmhOAuth-examples/blob/master/streaming.php)库来解析 php 中的 twitter 流。

`$data`它用[***这个对象***](http://jsfiddle.net/MUdCb/)返回了我的变量[](http://jsfiddle.net/MUdCb/)

 *stackoverflow 的对象示例

```
{
   "created_at":"Wed Jan 02 13:37:54 +0000 2013",
   "id":286466350610776064,
   "id_str":"286466350610776064",
   ...
} 
```

看起来像一个简单的对象，但是如何从这个对象中提取一些数据呢？

`$data->created_at`不工作，它打破了我的头，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T13:56:23.833

是不是因为您可能没有看到这是一个包含[Json](http://json.org/)的字符串，您需要先对其进行解码，否则它只是一个字符串变量而不是对象？

请参阅[`json_decode`^(*文档*)](http://php.net/json_decode)：

```
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';

var_dump(json_decode($json));

object(stdClass)#1 (5) {
    ["a"] => int(1)
    ["b"] => int(2)
    ["c"] => int(3)
    ["d"] => int(4)
    ["e"] => int(5)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T13:56:37.610

这是 JSON 响应。试试[json_decode](http://php.net/manual/en/function.json-decode.php)*

# backbone.js - 将子视图的 HTML 重新渲染和附加到 DOM 似乎不会重新应用子视图的事件

> ID：14123291
> 
> 赞同：0
> 
> 时间：2013-01-02T13:51:35.047
> 
> 标签：backbone.js, marionette

在[Marionette 文档中`CompositeView`](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.compositeview.md#compositeviews-appendhtml)，它描述`appendHTML`了`itemView`使用 jQuery 的[`append`](http://api.jquery.com/append/).

使用类似的思路，如果我有两个`ItemView`对象， a`Parent`和 a `Child`，并且`Parent`'s 模板有一个空目标`<div class="target"></div>`，我想在`Child`其中注入 's 模板。[`html`](http://api.jquery.com/html/)我可以使用带有`onRender`in的 jQuery`Parent`来执行此操作。

在 的整个`Parent`生命过程中，我都想将 的内容清除或替换为其他内容`.target`。如果我稍后想重新渲染*（因为它可能会根据第一次渲染后的用户交互以不同方式渲染它的模板）*`Child`，我可以使用相同的逻辑：`.target`

 *1.  渲染`Child`模板
2.  使用 jQuery将`.target`'s 的内容设置为`Child`'s`el`[`html`](http://api.jquery.com/html/)

问题是，一旦`Child`发生第二次渲染，视图中的任何事件`Child`似乎都丢失了。

这是我所描述的具体示例：

**的HTML**

```
<script type="template" id="parent">
  <p><a class="re-render" href="javascript://">Re-Render</a></p>

  <div class="target"></div>
</script>

<script type="template" id="child">
    <p><a href="javascript://">The Link</a></p>    
</script>

<div id="main"></div> 
```

**Javascript**

```
var Views = {};

Views.Child = Backbone.Marionette.ItemView.extend({
    template: '#child',

    events: {
      'click a': 'changeBg'
    },

    changeBg: function() {
       this.$el.css('background-color', '#'+Math.floor(Math.random()*16777215).toString(16)); 
    }
});

Views.Parent = Backbone.Marionette.ItemView.extend({
    template: '#parent',

    childView: undefined,

    ui: {
      target: '.target'
    },

    events: {
      'click .re-render': 'onRender'
    },

    initialize: function() {
      this.childView = new Views.Child();  
    },

    onRender: function() {
      this.childView.render();
      this.ui.target.html(this.childView.el);
      this.childView.$el.css('background-color', 'transparent');
    }
});

var App = new Backbone.Marionette.Application();
App.addRegions({
  mainRegion: "#main"
})

App.mainRegion.show(new Views.Parent()); 
```

一开始点击**链接**`Child`效果很好。一旦在 中单击**Re-Render**`Parent`，则`Child`单击事件永远不会重新应用于`Child`的模板的新呈现版本。**如何确保`Child`每次`Child`呈现模板的事件时都会重新应用？**

**[你可以在这里](http://jsfiddle.net/deefour/Hpmsw/)**找到一个 jsFiddle 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:24:17.823

您应该`.delegateEvents()`在重新渲染后调用子视图：

```
onRender: function() {
  this.childView.render();
  this.ui.target.html(this.childView.el);
  this.childView.delegateEvents();
  this.childView.$el.css('background-color', 'transparent');
} 
```

这就是在原版 Backbone 中解决它的方法。我不知道 Backbone.Marionette 是否有另一种处理问题的方法，但在 Marionette 术语中，您可以将`delegateEvents`调用添加到子视图的`onRender`方法以封装可重新渲染性。

```
Views.Child = Backbone.Marionette.ItemView.extend({
    //...
    onRender: function() {
        this.delegateEvents();
    }
}); 
```*

# oracle - 如何确保触发器中生成的随机密钥符合唯一约束

> ID：14123293
> 
> 赞同：0
> 
> 时间：2013-01-02T13:51:45.660
> 
> 标签：oracle, random, plsql, unique

新年快乐！:)

`random_key`我有一个表，在插入时我使用触发器用随机字符串填充列。该列有唯一性约束，但理论上有可能触发器生成的随机字符串不唯一，记录不会被插入。

有没有办法在触发器中避免这种情况？还是我必须创建一个插入程序？

**编辑：（**从评论中复制并详细说明）

我在这个表中有一个普通的 id，但对于外部使用（互联网），我需要一个完全随机的 id，这样就无法猜到表中下一行的 id。

用 id + 常量加盐可能会起作用。我会考虑的。

从到目前为止的答案来看，似乎没有简单的解决方案可以避免触发器中的重复。这也是一个答案。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:09:34.370

您可以使用[SYS_GUID](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions168.htm)函数。这将返回一个唯一的字符串。

```
SQL> select sys_guid() from dual;

SYS_GUID()
--------------------------------
D24FC8257402951BE0401AA2C9997E18 
```

# asp.net-mvc - .NET Web 应用程序 - 如何查找登录用户的数据库记录？

> ID：14123295
> 
> 赞同：1
> 
> 时间：2013-01-02T13:51:49.747
> 
> 标签：asp.net-mvc, database

在我的 .NET CRUD Web 应用程序中，我实现了 MembershipProvider 类。

现在我有列出数据库记录的功能（这个控制器需要经过身份验证的用户）。我需要过滤掉与此登录用户相关的这些记录。

```
 //
        // GET: /Library/
        public ViewResult Index(String orderBy = "")
        {
            var books = db.Books.Include(b => b.Category).Include(b => b.Writer).Include(b => b.User);

            return View(books.ToList());

        } 
```

我需要知道如何登录用户的 UserId 并在 Where 条件下使用它（我发现的每个教程都谈到了获取用户名，但我需要 UserId）。先感谢您。

我存储在`*.mdf`数据文件中的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:54:55.247

我认为你需要的是：

```
Membership.GetUser().ProviderUserKey 
```

this 的类型是 object，但如果您使用的是开箱即​​用的成员资格，它应该是一个 guid。然后可以使用它来相应地过滤您的选择。

* * *

成员资格是内置成员资格提供程序的一部分，具有许多静态方法。

在不知道您的数据库结构/ORM 的情况下，我不能确切地说，但它会是这样的：

```
Guid userId = (Guid)Membership.GetUser().ProviderUserKey;

var books = db.Books.Where(b => b.UserId == userId); 
```

# php - bash sed 导致序列化数组出错

> ID：14123299
> 
> 赞同：0
> 
> 时间：2013-01-02T13:52:07.233
> 
> 标签：php, bash, ssh, sed

我刚刚从 .co.uk 切换了 .com，直到今天一切顺利。我运行 SQL 来替换所有相关表中的域，并且`sed`在使用 cp 将文件移动到 .com 文件夹后，我曾经在服务器上的所有相关 php 文件中执行相同操作。

一切都很好，除了一点点。我使用的文件之一`sed`是一个序列化的 php 数组，现在`Notice: unserialize(): Error at offset 326 of 1551099 bytes in reallylongfilename.php on line`当我尝试反序列化它时 php 会抛出。

我刚刚在 sed 之前测试了旧服务器上的文件，它反序列化没问题，但后来我运行了 sed，它失败了。我正在使用的 sed 命令是：

```
sudo find /var/www/vhosts/spotthedog.com/httpdocs/wp-content/feedgenerator -name 'propdetails.php' -type f -exec sed -i 's/spotthedog.co.uk/spotthedog.com/g' {} \; 
```

我对在命令行上工作还很陌生，所以在我考虑编写一个 php 脚本来做同样的工作时，我很感激收到任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T13:59:52.103

**序列化数据看起来像字符串，因为我们可以读取它。但它根本不是字符串。** 存储字符串类型数据`serialize()` **的字符串长度。**

```
php > echo serialize("spotthedog.com");
s:14:"spotthedog.com";
php > echo serialize("spotthedog.co.uk");
s:16:"spotthedog.co.uk";
php > 
```

您正在替换字符串，但不是长度。因此错误。您不应该对非字符串数据执行字符串操作（例如替换）。

你最好先反序列化它们。然后使用[`var_export`](http://php.net/var_export)/[`json_encode`](http://php.net/json_encode)导出它们。并运行`sed`它。

另一个 hacky 选项将[`array_map_recursive`](http://bd1.php.net/manual/en/function.array-map.php#107808)在未序列化的文件中使用。调用它来替换所有的域名

```
function array_map_recursive($fn, $arr) {
    $rarr = array();
    foreach ($arr as $k => $v) {
        $rarr[$k] = is_array($v)
            ? array_map_recursive($fn, $v)
            : $fn($v); // or call_user_func($fn, $v)
    }
    return $rarr;
}

$arr = array_walk_recursive(function($val){
    return is_string($val)? 
            str_replace("spotthedog.com", "spotthedog.co.uk", $val): $val;
}, $arr); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T13:54:46.137

将您的序列化文件恢复到备份版本，取消序列化，手动更改域并重新序列化。

或者，自己修改序列化变量。要做到这一点，您所要做的就是找到提到 .com 的地方，并将该字符串前面的 s: **SOME_NUMBER** :" 降低 2（因此，如果它是 16，它应该是 14，等等）作为 .co。 uk 比 .com 长 2 个字符

# filesystems - FAT32：分别设置长文件名和8.3文件名

> ID：14123302
> 
> 赞同：0
> 
> 时间：2013-01-02T13:52:34.033
> 
> 标签：filesystems, filenames, fat32, long-filenames, short-filenames

我需要构建一个 SDHC 卡（FAT32），其中包含一个我独立选择短文件名和长文件名的目录。例如短文件名`MYDIR`但长名称`i am a cool name. yeah. check out the awesomeness.`根据维基百科，这两个名称之间没有强制关联，所以我的目标应该是可能的：

> 从 LFN 创建 8.3 名称没有强制算法
> 
> -- [http://en.wikipedia.org/wiki/8.3_filename#Overview](http://en.wikipedia.org/wiki/8.3_filename#Overview)

我可以使用任何必要的系统来执行此操作（windows、mac、linux、十六进制编辑器），但越简单越好。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:01:48.267

短文件名是使用您提到的算法从 LFN 自动和强制构造的。（在 FAT32[规范](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463080.aspx)中也有详细说明）。这是由文件系统驱动程序完成的（至少在 Windows 和 Linux 上）。你真的无法改变它，除非你修改了不建议的驱动程序。如果您只想为一个目录执行此操作，那么您可以通过在十六进制编辑器中修改磁盘映像来实现此目的，但要小心不要创建具有相同名称的重复条目。

这是我在 Linux 上尝试过的：

```
#dd if=/dev/zero of=fatImage bs=1048576 count=256
#mkfs.vfat -F 32 fatImage
#mount -o loop fatImage  /mnt
#cd /mnt
#mkdir ThisIsALongDirectoryName 
```

fat 驱动程序为目录生成一个短名称：**THISIS~1**。您可以使用这两个名称来访问它。

```
#cd /mnt/ThisIsALongDirectoryName
#cd /mnt/THISIS~1 
```

然后在卸载分区后，我在十六进制编辑器（KDE 上的 Okteta）中打开图像，搜索 SFN 条目**THISIS~1**，并将其替换为**MYNEWDIR**。此外，每个 32 字节的 LFN 子条目在偏移量 13 处存储 SFN 的校验和。所以我必须[计算](https://gist.github.com/4440535)并用 MYNEWDIR 的校验和（即 0x6A）替换所有 THISIS~1（即 0xA6）的校验和。 LFN 子条目。保存修改后，我重新安装了映像，并且能够使用旧的 LFN 和新的 SFN 访问目录。

```
#cd /mnt/ThisIsALongDirectoryName
#cd /mnt/MYNEWDIR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:05:33.460

我不会依赖维基百科作为技术参考。最好查阅微软的文档。阅读此内容，我认为这两个文件之间可能存在关系，因此我不建议摆弄这些文件。使用短名称可能会更好。

# asp.net - 未显示 aspx 和 ascx 文件中的更改

> ID：14123305
> 
> 赞同：0
> 
> 时间：2013-01-02T13:52:37.327
> 
> 标签：asp.net, .net, caching, iis

我在本地主机（Windows 7）上的一个 Web 应用程序中缓存 aspx 和 ascx 文件时遇到问题。如果我对这些类型的文件之一进行更改，例如更改硬编码文本，则没有浏览器会接受此更改。我试过ctrl+f5，清除浏览器缓存。重新编译也无济于事，因为没有进行任何代码更改。唯一有帮助的是重置 IIS。

我在同一个 IIS 实例上运行了另一个 Web 应用程序，但我没有遇到这种行为。但是，我无法弄清楚这两个应用程序之间的区别是什么。我不发布任何文件，IIS 站点直接指向我在 Visual Studio 中编辑的文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:41:46.250

出于某种原因，当我们本周从 Subversion 转到 TFS 时，它自行修复了。

# unit-testing - 在测试控制器时在角度 js 中得到了未知的提供者

> ID：14123306
> 
> 赞同：12
> 
> 时间：2013-01-02T13:52:43.300
> 
> 标签：unit-testing, angularjs, karma-runner

我有以下**控制器**：

```
angular.module('samples.controllers',[])
  .controller('MainCtrl', ['$scope', 'Samples', function($scope, Samples){
  //Controller code
} 
```

这取决于以下**服务**：

```
angular.module('samples.services', []).
    factory('Samples', function($http){
    // Service code
} 
```

尝试使用以下代码**测试控制器：**

```
describe('Main Controller', function() {
  var service, controller, $httpBackend;

  beforeEach(module('samples.controllers'));
  beforeEach(module('samples.services'));
  beforeEach(inject(function(MainCtrl, Samples, _$httpBackend_) {

  }));

    it('Should fight evil', function() {

    });
}); 
```

**但出现以下错误：**

```
Error: Unknown provider: MainCtrlProvider <- MainCtrl. 
```

Ps 试过下面[的帖子](https://stackoverflow.com/questions/12339272/angular-js-unknown-provider)，似乎没有帮助

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-02T14:16:00.273

测试控制器的正确方法是使用 $controller ：

```
ctrl = $controller('MainCtrl', {$scope: scope, Samples: service}); 
```

详细示例：

```
describe('Main Controller', function() {
  var ctrl, scope, service;

  beforeEach(module('samples'));

  beforeEach(inject(function($controller, $rootScope, Samples) {
    scope = $rootScope.$new();
    service = Samples;

    //Create the controller with the new scope
    ctrl = $controller('MainCtrl', {
      $scope: scope,
      Samples: service
    });
  }));

  it('Should call get samples on initialization', function() {

  });
}); 
```

# twitter-bootstrap - ng-repeat 中的 angular.js 条件标记

> ID：14123307
> 
> 赞同：13
> 
> 时间：2013-01-02T13:52:43.687
> 
> 标签：twitter-bootstrap, angularjs, angular-ui

我正在使用 angular.js 和（为了论证）引导程序。现在我需要迭代“事物”并将它们显示在 ''rows'' 中：

```
<div class="row">
  <div class="span4">...</div>
  <div class="span4">...</div>
  <div class="span4">...</div>
</div>
<div class="row">
  etc... 
```

现在，我怎样才能在每三件事上用角度关闭我的`.row`div？我从 angular-ui 尝试了 ui-if ，但即使这样也没有成功。

如果我要使用服务器端渲染，我会做这样的事情（这里是 JSP 语法，但没关系）：

```
<div class="row>
  <c:forEach items="${things}" var="thing" varStatus="i">
    <div class="span4">
        ..
    </div>
  <%-- Here is the trick:--%>
  <c:if test="${i.index % 3 == 2}">
          </div><div class="row">
  </c:if>
  </c:forEach>
</div> 
```

请注意，我需要在此处实际更改 DOM，而不仅仅是 css 隐藏元素。我尝试在`.row`和`.span4`div 上重复，但无济于事。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-02T14:00:00.787

## 编辑 2013 年 11 月 12 日

似乎不仅角度在 1.2 中发生了一些变化，而且还有更好的方法。我创建了两个过滤器。我试图将它们合二为一，但出现了摘要错误。这是两个过滤器：

```
.filter("mySecondFilter", function(){
    return function(input, row, numColumns){
        var returnArray = [];
        for(var x = row * numColumns; x < row * numColumns + numColumns; x++){
            if(x < input.length){
                returnArray.push(input[x]);                    
            }
            else{
                returnArray.push(""); //this is used for the empty cells
            }
        }
        return returnArray;   
    }
})
.filter("myFilter", function(){
    return function(input, numColumns){
        var filtered = [];
        for(var x = 0; x < input.length; x++){
            if(x % numColumns === 0){
                filtered.push(filtered.length);
            }
        }
        return filtered;
    }
}); 
```

现在 html 将如下所示：

```
<table border="1">
     <tr data-ng-repeat="rows in (objects | myFilter:numColumns)">
          <td data-ng-repeat="column in (objects | mySecondFilter:rows:numColumns)">{{ column.entry }}</td>
     </tr>  
</table> 
```

**jsfiddle**：http: [//jsfiddle.net/W39Q2/](http://jsfiddle.net/W39Q2/)

* * *

**编辑 2013 年 9 月 20 日**

在处理大量需要动态列的数据时，我想出了一个更好的方法。

HTML：

```
<table border="1">
    <tr data-ng-repeat="object in (objects | myFilter:numColumns.length)">
        <td data-ng-repeat="column in numColumns">{{ objects[$parent.$index * numColumns.length + $index].entry }}</td>
    </tr>  
</table> 
```

Javascript：

```
$scope.objects = [ ];
for(var x = 65; x < 91; x++){
    $scope.objects.push({
        entry: String.fromCharCode(x)
    });
}

$scope.numColumns = [];
$scope.numColumns.length = 3; 
```

新过滤器：

```
.filter("myFilter", function(){
    return function(input, columns){
        var filtered = [];
        for(var x = 0; x < input.length; x+= columns){
             filtered.push(input[x]);   
        }
        return filtered;
    }
}); 
```

这允许它是动态的。要更改列，只需更改 numColumns.length。在 js 小提琴中，您可以看到我已将其连接到下拉列表。

**jsFiddle**：http: [//jsfiddle.net/j4MPK/](http://jsfiddle.net/j4MPK/)

* * *

您的 html 标记将如下所示：

```
<div data-ng-repeat="row in rows">
    <div data-ng-repeat="col in row.col">{{col}}</div>
</div> 
```

然后你可以像这样在你的控制器中创建一个变量：

```
$scope.rows = [
    {col: [ 1,2,3,4 ]},
    {col: [ 5,6,7 ]},
    {col: [ 9,10,11,12 ]}
]; 
```

这样，您可以拥有任意数量的列。

**jsfiddle** [http://jsfiddle.net/rtCP3/39/](http://jsfiddle.net/rtCP3/39/)

* * *

**编辑**我已经修改了小提琴，现在支持拥有一个平面对象数组：

**jsfiddle：http:** [//jsfiddle.net/rtCP3/41/](http://jsfiddle.net/rtCP3/41/)

html 现在看起来像这样：

```
<div class="row" data-ng-repeat="row in rows">
    <div class="col" data-ng-repeat="col in cols">
        {{objects[$parent.$index * numColumns + $index].entry}}
    </div>
</div> 
```

然后在控制器中我有：

```
$scope.objects = [
    {entry: 'a'},
    {entry: 'b'},
    {entry: 'c'},
    {entry: 'd'},
    {entry: 'e'},
    {entry: 'f'},
    {entry: 'g'},
    {entry: 'h'}    
];

$scope.numColumns = 3;
$scope.rows = [];
$scope.rows.length = Math.ceil($scope.objects.length / $scope.numColumns);
$scope.cols = [];
$scope.cols.length = $scope.numColumns; 
```

$scope.numColumns 变量用于指定每行需要多少列。

* * *

要处理动态数组大小更改，请注意数组的长度（不是整个数组，这将是多余的）

```
$scope.numColumns = 3;  
$scope.rows = [];    
$scope.cols = [];    
$scope.$watch("objects.length", function(){
    $scope.rows.length = Math.ceil($scope.objects.length / $scope.numColumns);
    $scope.cols.length = $scope.numColumns;        
}); 
```

**jsfiddle**：http: [//jsfiddle.net/rtCP3/45/](http://jsfiddle.net/rtCP3/45/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-05-25T17:19:56.737

为什么不使用像这样简单的东西？ [http://jsfiddle.net/everdimension/ECCL7/3/](http://jsfiddle.net/everdimension/ECCL7/3/)

```
<div ng-controller="MyCtrl as ctr">
    <div class="row" ng-repeat="project in ctr.projects" ng-if="$index % 3 == 0">
         <h4 class="col-sm-4" ng-repeat="project in ctr.projects.slice($index, $index+3)">
            {{project}}
        </h4>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T03:43:47.807

我推荐一个指令有几个原因：

*   它可以在 HTML 中重用和参数化（即，“每 3 件事”可以是指令属性）
*   它不需要任何控制器代码/$scope 属性，因此如果“things”数组的大小发生变化，它不需要重新计算控制器 $scope 属性

这是一个建议的元素指令：

```
<row-generator row-data=objects col-count=3></row-generator> 
```

在实现中，我使用了类似于您的服务器端示例的代码：

```
myApp.directive('rowGenerator', function() {
    var rowTemplate = '<div class="row">',
        colTemplate = '<div class="span4">';
    return {
        restrict: 'E',
        // use '=' for colCount instead of '@' so that we don't
        // have to use attr.$observe() in the link function
        scope: { rowData: '=', colCount: '='},
        link: function(scope, element) {
            // To save CPU time, we'll just watch the overall
            // length of the rowData array for changes.  You
            // may need to watch more.
            scope.$watch('rowData.length', function(value) {
                var html = rowTemplate;
                for(var i=0; i < scope.rowData.length; i++) {
                    html += colTemplate + scope.rowData[i].key + '</div>';
                    if (i % scope.colCount == scope.colCount - 1) {
                        html += '</div>' + rowTemplate;
                    }
                }
                html += '</div>';
                // don't use replaceWith() as the $watch 
                // above will not work -- use html() instead
                element.html(html);
            })
        }
    }
}); 
```

数据：

```
$scope.things = [
    {key: 'one'},
    {key: 'two'},
    {key: 3},
    {key: 4},
    {key: 'five'},
    {key: 'six'},
    {key: 77},
    {key: 8}    
]; 
```

[小提琴](http://jsfiddle.net/mrajcok/K6uFx/)

为了提高效率，所示指令仅查找对 rowData（即，事物）数组长度的更改。如果你想让指令在数组元素之一的值发生变化时更新视图，你需要一个更昂贵的 $watch：

```
scope.$watch('rowData', function(value){ ... }, true) 
```

最后`true`做“浅”脏检查（“比较对象是否相等而不是参考） - 请参阅[文档](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24watch)。

我不喜欢该指令的一件事——它需要知道 rowData 条目有一个带有 name 的属性`key`：

```
html += colTemplate + scope.rowData[i].key + '</div>'; 
```

# git - 您将如何使用 Gitolite 仅在某些目录中授权推送？

> ID：14123308
> 
> 赞同：-1
> 
> 时间：2013-01-02T13:52:48.687
> 
> 标签：git, chmod, gitolite

我有一个 symfony 项目的工作配置：

```
@admin = admin ku
@developer = sarhan dima_syrv sarhandom a_bobkov
@testers = novikov_d 

repo    dev
    - master = @admin @developer @testers
    RW+      =   @admin @developer
    RW+     =   jenkins ku
    RW      =   @testers 
```

我想让测试人员组只能写入文件夹测试。我正在做这个配置：@admin = admin ku @developer = sarhan dima_syrv sarhandom a_bobkov @testers = novikov_d

```
repo    dev
    - master = @admin @developer @testers
    RW      =   @admin @developer
    RW+     =   jenkins
    RW      =   @testers
    RW NAME/ =  @admin
    RW NAME/src =   @admin @developer
    RW NAME/src/.*/.*/Tests   =   @testers 
```

我有一个 symfony 项目的工作配置我想让测试人员组只能写入文件夹测试我正在做这个配置它只给了我解决方案的一部分，测试人员只能在测试文件夹中写入，但没有人可以推送新的分支只能记录在旧的分支中。如何让每个人都创建一个新的分支，而测试人员只能写入文件夹 Tests？请帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:30:37.357

看一下**`VREF NAME`**，一个更新钩子，如果你的提交影响了你的仓库中的错误目录或文件，它将拒绝你的推送。

请参阅“[**通过目录/文件名限制推送**](http://sitaramc.github.com/gitolite/vref.html#NAME)”（使用 gitolite 版本 3 或“g3”）。

> 允许您通过**`"NAME" VREF`**更改的目录和文件的名称来限制推送。
> （旁注：`NAME VREF`是唯一直接在更新挂钩中实现的，因此您不会在`VREF`目录中找到它）。
> 
> 这是一个例子。假设您不希望初级开发人员将更改推送到`Makefile`，因为它非常复杂：

```
repo foo
    RW+                             =   @senior_devs
    RW                              =   @junior_devs

    -   VREF/NAME/Makefile          =   @junior_devs 
```

> 当高级开发人员推送时，`VREF`根本不会调用。但是当初级开发人员推送时，`VREF`会调用 ，并返回一个更改为 refs 的文件列表，如下所示：

```
VREF/NAME/file-1
VREF/NAME/dir-2/file-3
...etc... 
```

> 这些 ref 中的每一个都与访问规则匹配。
> 如果其中一个恰好是`Makefile`，则返回的 ref ( `VREF/NAME/Makefile`) 将匹配拒绝规则并终止推送。

* * *

因此，您需要进行一些试验以查看该挂钩是否支持您的确切方案，但这是 Gitolite 限制通过文件或目录名推送的官方方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:24:08.283

简短的回答：你不能这样做。一个 git 存储库是全部内容。

唯一的解决方案是将您的测试源放在*另一个*存储库中（并使用子模块）。

# database - 处理主键 - 外键表插入？

> ID：14123309
> 
> 赞同：0
> 
> 时间：2013-01-02T13:52:54.823
> 
> 标签：database, foreign-keys, relational-database, primary-key

假设我有两个表（主键 -> 外键），其中主键表中的一条记录对应于外键中的许多记录，所以如果我想为主键表和外键表，如何获取主键值将其插入外键表？（通常我取了最大（PK），但我很想找到更好的解决方案）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:04:58.507

我假设您使用的是 SQL Server，因为您提到了 ASP.NET 的使用。在多用户系统中使用 Max(PK) 不是一个好主意，因为最终您会得到一个不正确的主键值。还有资源问题需要考虑。一般来说，应该避免这种方法。

有几种方法可以完成你想做的事情。一种方法是通过存储过程进行插入。用于创建主键行的存储过程将返回新行的 Id 值，然后可用于插入外键行。但不要使用 Max(PK Value)。使用[SCOPE_IDENTITY()](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)值。这假设您为 PK 值使用身份类型。您没有说明您实际使用的是什么。

# jsp-tags - 在合金 UI 中限制图像文件大小

> ID：14123315
> 
> 赞同：0
> 
> 时间：2013-01-02T13:53:13.927
> 
> 标签：jsp-tags, liferay-6, alloy-ui

我正在使用 Alloy UI 制作一个简单的表单。它有一个图像上传字段。我想将图像文件大小限制为小于 10MB。

我已经尝试过`<aui:validator name="min">`并且`<aui:validator name="max">`在我的`view.jsp`.

但是，这是行不通的。

这里应该使用什么来限制图像文件的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T16:09:52.137

看来您想在客户端验证文件大小，即使用 Alloy UI javascript，所以很抱歉提醒您，由于某些安全原因，这在 HTML5 之前的浏览器中是不可能的，但对于浏览器来说，这是可能的支持 HTML5 中的[File-API](http://www.w3.org/TR/FileAPI/)。这是一个[很好的文件 API 演示站点](http://html5demos.com/file-api)。

所以现在我建议你将这个服务器端作为一种后备机制，并且有不同的插件可以帮助你使用 Ajax 来帮助你做到这一点，或者只是使用简单的服务器端验证。

您还可以尝试使用带有alloy-ui 的flash 来检查文件大小，就像liferay 在其文档和媒体portlet 中所做的那样。这种方法的缺点是它需要在浏览器中安装 Flash。

这是一个[SO 答案](https://stackoverflow.com/a/3717847/468763)，它可以帮助您提供有关客户端验证的更多信息以及演示。

希望这会给你一些线索。

# doxygen - 是否可以将 doxygen HTML 输出中的参数保留在一行中？

> ID：14123316
> 
> 赞同：5
> 
> 时间：2013-01-02T13:53:17.717
> 
> 标签：doxygen

在 doxygen 生成的 HTML 输出中，如果有多个参数，则方法的参数将放在额外的行中，因此如下所示：

```
Functions

void function0 ()
void function1 (int para1)
void function2 (int para1, int para2)
void function3 (int para1, int para2, int para3)

Function Documentation

void function0 ( )

void function1 ( int para1 )

void function2 ( int para1,
                 int para2 
               )

void function3 ( int para1,
                 int para2,
                 int para3 
                ) 
```

是否可以进行配置/CSS/whatever 以使文档部分看起来像函数列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-01-04T18:20:08.783

我刚刚设法在`Doxygen 1.8.10`. 解决方案是创建一个新的 CSS 文件（例如`inline_params.css`）并包含以下非常短的片段：

```
table.memname tr {
    float: left;
} 
```

把它放在合乎逻辑的地方（在你的项目旁边`Doxyfile`），在`Expert`Doxywizard 的表格下，你应该选择“HTML”并找到`HTML_EXTRA_STYLESHEET`设置。浏览到您的`css`，将其添加到列表中并保存您的设置。当你运行 Doxygen 时，你的输出应该是这样的：

[![在此处输入图像描述](../Images/564fd25d0550585cf7baf2d44a5b2bbc.png)](https://i.stack.imgur.com/GM8oc.png)

编辑：顺便说一句，我有一个很小的[​​github 项目](https://github.com/Diom/doxy-flat)，其中包含这个 CSS 文件，所以如果你真的想要，你可以在那里获取它！

# android - Android / Ant 的自动化单元测试

> ID：14123317
> 
> 赞同：4
> 
> 时间：2013-01-02T13:53:19.780
> 
> 标签：android, testing, ant, junit

我的代码中有一个 Android 项目和 JUnit 测试。

我想知道是否有运行一些测试的**ant 任务。**

事实上，我有几个使用 JUnit 运行的经典测试来测试几种方法，以及一些需要 android 模拟器或至少需要在 android 设备上运行的测试。

由于我没有找到任何文档，我想知道是否可以做那种事情。

喜欢

> junit-android 目录=“。”...

非常感谢您的帮助和时间。

只是为了清楚，因为我在网上搜索并没有找到很多东西，所以希望你能提供帮助。

我有一个不包含任何活动的 Android 项目。

实际**的 build.xml**文件：

1.  我编译java源代码
2.  它为我生成了一个 .jar 文件。
3.  我需要使用之前生成的库来运行我的*project/tests/文件夹中定义的一些测试。*这些测试需要使用 ANT 构建文件在模拟器设备上运行，而不依赖于 Eclipse。

项目：

> *   src（java源代码）
> *   创
> *   垃圾桶
> *   资源
> *   测试（Android 测试项目）
> *   AndroidManifest.xml
> *   构建.xml
> *   ...

*生成的测试项目包含使用android update 命令*自动生成的 build.xml 。可悲的是，没有任务“运行测试”。以及如何指定我想将我的库用于这些测试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T15:17:24.750

从命令行创建和运行 android 测试项目所需的一切，由 Google 自己提供；-) [http://developer.android.com/tools/testing/testing_otheride.html](http://developer.android.com/tools/testing/testing_otheride.html)

您需要的[命令行](http://developer.android.com/tools/testing/testing_otheride.html#AMSyntax)类似于：

```
adb shell am instrument -w <test_package_name>/<runner_class> 
```

要从 Ant 调用它，请使用此处`<run-tests/>`描述的任务[。](http://developer.android.com/tools/testing/testing_otheride.html#RunTestsAnt)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:12:35.067

像这样在你的 build.xml 中创建一个目标

```
<target name="run-tests">
    <test-junit includedTests="pathToPackageContainingTests}/*.class" />
</target> 
```

然后你可以简单地做到这一点

```
ant clean release run-tests 
```

# drupal - 数据表和图表 Drupal 视图

> ID：14123318
> 
> 赞同：1
> 
> 时间：2013-01-02T13:53:30.010
> 
> 标签：drupal

![在此处输入图像描述](../Images/8cff8045278728370cc5e2b4351515ac.png)我决定将 Drupal 用于一个项目。我遇到了一些困难，所以请帮助我。

1.  我想生成一个包含不同计算的表。
2.  我想使用表格中的数据生成图表。如果可能的话。
3.  我以前尝试过视图聚合，但到目前为止没有运气
4.  我不能使用谷歌图表。机器无法访问互联网。

请参阅附图以获取信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-23T18:25:07.073

将[Charts](https://www.drupal.org/project/charts)与[Highcharts](http://www.highcharts.com/demo)结合使用肯定是一个不需要互联网连接的选项。但是，您必须查看许可条款以查看您是否有资格获得免费许可（免费）。有关分步说明，请参阅[使用视图 UI 创建图表的步骤。](https://www.drupal.org/node/2426929)

还有一些其他可用的模块，它们也有助于创建图表，并且可能被认为是图表模块的可能替代方案。查看我创建[的图表模块的比较，](https://www.drupal.org/node/2363985)了解有关它们的更多详细信息。

# android - 获取 Viewpager 页码

> ID：14123319
> 
> 赞同：0
> 
> 时间：2013-01-02T13:53:42.587
> 
> 标签：android, imageview

我有一个带有片段的视图寻呼机，带有带有图像视图的网格视图。我下载图像并将它们放在网格视图上。我可以从我的图像适配器访问视图寻呼机位置吗？

`ViewPager`：

```
pager = (ViewPager)super.findViewById(R.id.viewpager_menu);
FragmentManager fm = getSupportFragmentManager();   
Log.d(TAG, "ViewPager adapter created");
this.mPagerAdapter  = new MyPagerAdapter(fm);
mPagerAdapter.testText = "TITS";
pager.setAdapter(mPagerAdapter); 
```

`ViewPager`适配器`getItem`方法：

```
@Override
public Fragment getItem(int position) {
    fragmentPosition = position;
    Log.e("PageAdapter", "Creating fragment at: " + position);
    DefinedValues.thumbnailInfo.put("activity", DefinedValues.images);
    DefinedValues.thumbnailInfo.put("type", "info");
    DefinedValues.thumbnailInfo.put("page", position+ 1 + "");

    String request = Json.stringToJson(DefinedValues.thumbnailInfo);
    DefinedValues.thumbnailInfo.clear();

    StringAsyncRetriever net = new StringAsyncRetriever();
    net.setListener(MyPagerAdapter.this);
    net.execute(request, DefinedValues.GET_DATA);
    fragment1 myFragment = new fragment1();
    return myFragment;
} 
```

在以下位置设置适配器`fragment1`：

```
 View view =  inflater.inflate(R.layout.menu1_fragment, container, false);
    gridView = (GridView)view.findViewById(R.id.gridview1);
    gridView.setAdapter(adapter); 
```

`StringAsyncRetriever`创建片段后下载有关六个缩略图的信息。完成后，它会创建六个图像，将它们添加到全局容器中，并在为 设置适配器时`imageView`，相应地下载图像并进行设置。我需要的是访问页码`imageAdapter`以设置正确的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:01:03.387

> vp 是 viewPager ，
> 
> 静态 int 当前页；
> 
> pageListener = new PageListener();
> 
> vp.setOnPageChangeListener(pageListener);
> 
> 您必须为您的 viewPager 放置一个页面更改侦听器。viewPager 上没有获取当前页面的方法。
> 
> 私有 int 当前页面；
> 
> ```
> private static class PageListener extends SimpleOnPageChangeListener{
>         public void onPageSelected(int position) {
>             Log.i(TAG, "page selected " + position);
>                currentPage = position;
>     }
> } 
> ```
> 
> 或者在最新的包中你也可以使用
> 
> vp.getCurrentItem()

您可以将 currentPage 声明为静态，然后您可以从适配器使用

**活动名称.当前页面；**

# c# - Mysql 和 C# 问题和正则表达式

> ID：14123322
> 
> 赞同：0
> 
> 时间：2013-01-02T13:53:53.913
> 
> 标签：c#, mysql, regex

我在mysql中的命令有一些问题。我试图找到所有查询的名称与我输入的内容接近。

当我搜索文件时，经过很多小时的谷歌和stackoverflow和youtube后，我发现并制作了这个命令

```
Regex.IsMatch(lista3, cautClienti, RegexOptions.Singleline | RegexOptions.IgnoreCase) 
```

其中 ->lista3 是在文件中搜索，CautClienti 搜索什么，这向我展示了所有内容 -> 例如 -> 如果我搜索 Mircea -> 它会给我 Mircea Mihai、Mircea George、Mircea Emil、Mircea，等等。

好吧，我的问题是，当我尝试使用 mysql 命令时，事情开始变得有点奇怪

```
MySqlCommand comanda = new MySqlCommand("SELECT * FROM legitimatii2 WHERE Nume_Abonat ='" + textCautare.ToString() + "' ");
        comanda.Connection = conectare; // sa faca conectarea prin nebunia aia mica

        try
        {
            conectare.Open();

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);

        }

        MySqlDataReader citim = comanda.ExecuteReader();
        while (citim.Read())
        {
            ListViewItem Cautam = new ListViewItem(citim["logid"].ToString());
            Cautam.SubItems.Add(citim["Nume_Abonat"].ToString());
            Cautam.SubItems.Add(citim["Data_Start"].ToString());
            Cautam.SubItems.Add(citim["Data_End"].ToString());
            Cautam.SubItems.Add(citim["aid"].ToString());
            Cautam.SubItems.Add(citim["Nume_Abonat"].ToString()); //aici vine promotia!!!!!! DACA E
            Cautam.SubItems.Add(citim["Pret"].ToString());
            listView1.Items.Add(Cautam);
        }
        conectare.Close();
        comanda.Connection.Close();
        comanda.Dispose(); 
```

我必须在 mysql 命令中更改什么才能获取所有类型的变量？我看到了一些带有正则表达式的东西，但它有点不同的是 "REGEXP" 。

我的第二个问题是有没有办法在单个 mysql 命令中选择更多的表和值？

希望你能给我一些线索，和一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:03:56.407

在 sql 命令中使用 like 和 % 获取所有以输入字母开头的变量

```
MySqlCommand comanda = new MySqlCommand("SELECT * FROM legitimatii2 WHERE Nume_Abonat like '" + textCautare.ToString() + "' 
    %"); 
```

并为获取多个表编写一个存储过程。

# java - OpenGL 中未绑定的纹理 (LWJGL/Slick-util)

> ID：14123323
> 
> 赞同：1
> 
> 时间：2013-01-02T13:53:54.800
> 
> 标签：java, opengl, lwjgl, slick2d

我对似乎将纹理绑定到形状的东西有疑问。当我这样做时，我得到一个正确尺寸的白色形状，它的颜色由`Color.white.bind()`.

`GraphicsManager.java`

```
package com.jackwilsdon.spectrun;

import java.io.IOException;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;
import org.lwjgl.util.vector.Vector2f;
import org.newdawn.slick.Color;
import org.newdawn.slick.opengl.Texture;
import org.newdawn.slick.opengl.TextureLoader;
import org.newdawn.slick.util.ResourceLoader;

public class GraphicsManager {

    final static int WIDTH = 800;
    final static int HEIGHT = 600;

    private static Texture cloudTexture = null;

    public static void initDisplay() throws LWJGLException
    {
        Display.setDisplayMode(new DisplayMode(WIDTH, HEIGHT));
        Display.create();
    }

    public static void initOpenGL()
    {     
        GL11.glMatrixMode(GL11.GL_PROJECTION);
        GL11.glLoadIdentity();
        GL11.glOrtho(0, WIDTH, 0, HEIGHT, 1, -1);
        GL11.glMatrixMode(GL11.GL_MODELVIEW);
    }

    public static void loadTextures()
    {
        Texture currentObject = null;
        try {
            currentObject = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream("./resources/cloud.png"));
        } catch (IOException e) {
            e.printStackTrace();
        }

        System.out.println("Texture loaded: "+currentObject);
        System.out.println(">> Image width: "+currentObject.getImageWidth());
        System.out.println(">> Image height: "+currentObject.getImageHeight());
        System.out.println(">> Texture width: "+currentObject.getTextureWidth());
        System.out.println(">> Texture height: "+currentObject.getTextureHeight());
        System.out.println(">> Texture ID: "+currentObject.getTextureID());
        cloudTexture = currentObject;
    }

    public static void DrawRectangle(int x, int y, int width, int height)
    {
        GL11.glBegin(GL11.GL_QUADS);
            GL11.glVertex2f(x,y);
            GL11.glVertex2f(x+width,y);
            GL11.glVertex2f(x+width,y+height);
            GL11.glVertex2f(x,y+height);
        GL11.glEnd();
    }

    public static void DrawRectangle(int x, int y, int width, int height, int red, int green, int blue)
    {
        GL11.glColor3ub((byte)red, (byte)green, (byte)blue);
        DrawRectangle(x, y, width, height);
    }

    public static Vector2f DrawCloud(int x, int y)
    {
        cloudTexture.bind();
        int width = cloudTexture.getImageWidth();
        int height = cloudTexture.getImageHeight();
        GL11.glBegin(GL11.GL_QUADS);
            GL11.glVertex2f(x,y);
            GL11.glVertex2f(x+width,y);
            GL11.glVertex2f(x+width,y+height);
            GL11.glVertex2f(x,y+height);
        GL11.glEnd();
        return new Vector2f(cloudTexture.getImageWidth(), cloudTexture.getImageHeight());
    }
} 
```

我怀疑这与我的`initOpenGL()`方法有关，就像我看过的一个例子（http://ninjacave.com/slickutil1）一样，他们的方法非常不同。只是将他们的复制到我的中会产生意想不到的结果（黑屏）。`initOpenGL()`我的方法有什么遗漏吗？

编辑：该`loadTextures()`方法输出正确的图像尺寸，但纹理的尺寸不同，这是什么意思？

编辑 2：PNG 不是问题，我尝试了另外 2 个来找到相同的结果。

* * *

通过设置纹理坐标修复我的代码后出现了一个新问题。我现在得到一个奇怪的效果，像这样；i.imgur.com/5lr79.png。图像不再是全尺寸，并且在其左下方有一个黑框。

`GraphicsManager.java`

```
package com.jackwilsdon.spectrun;

import java.io.IOException;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;
import org.lwjgl.util.vector.Vector2f;
import org.newdawn.slick.Color;
import org.newdawn.slick.opengl.Texture;
import org.newdawn.slick.opengl.TextureLoader;
import org.newdawn.slick.util.ResourceLoader;

public class GraphicsManager {

    final static int WIDTH = 800;
    final static int HEIGHT = 600;

    private static Texture cloudTexture = null;

    public static void initDisplay() throws LWJGLException
    {
        Display.setDisplayMode(new DisplayMode(WIDTH, HEIGHT));
        Display.create();
    }

    public static void initOpenGL()
    {    
        GL11.glEnable(GL11.GL_TEXTURE);  
        GL11.glMatrixMode(GL11.GL_PROJECTION);
        GL11.glLoadIdentity();
        GL11.glOrtho(0, WIDTH, 0, HEIGHT, 1, -1);
        GL11.glMatrixMode(GL11.GL_MODELVIEW);
    }

    public static void loadTextures()
    {
        Texture currentObject = null;
        try {
            currentObject = TextureLoader.getTexture("PNG", ResourceLoader.getResourceAsStream("./resources/cloud.png"));
        } catch (IOException e) {
            e.printStackTrace();
        }

        System.out.println("Texture loaded: "+currentObject);
        System.out.println(">> Image width: "+currentObject.getImageWidth());
        System.out.println(">> Image height: "+currentObject.getImageHeight());
        System.out.println(">> Texture width: "+currentObject.getTextureWidth());
        System.out.println(">> Texture height: "+currentObject.getTextureHeight());
        System.out.println(">> Texture ID: "+currentObject.getTextureID());
        cloudTexture = currentObject;
    }

    public static void DrawRectangle(int x, int y, int width, int height)
    {
        GL11.glBegin(GL11.GL_QUADS);
            GL11.glVertex2f(x,y);
            GL11.glVertex2f(x+width,y);
            GL11.glVertex2f(x+width,y+height);
            GL11.glVertex2f(x,y+height);
        GL11.glEnd();
    }

    public static void DrawRectangle(int x, int y, int width, int height, int red, int green, int blue)
    {
        GL11.glColor3ub((byte)red, (byte)green, (byte)blue);
        DrawRectangle(x, y, width, height);
    }

    public static Vector2f DrawCloud(int x, int y)
    {
        cloudTexture.bind();
        int width = cloudTexture.getImageWidth();
        int height = cloudTexture.getImageHeight();
        GL11.glBegin(GL11.GL_QUADS);
            GL11.glTexCoord2f(1,1);
            GL11.glVertex2f(x,y);
            GL11.glTexCoord2f(0,1);
            GL11.glVertex2f(x+width,y);
            GL11.glTexCoord2f(0,0);
            GL11.glVertex2f(x+width,y+height);
            GL11.glTexCoord2f(1,0);
            GL11.glVertex2f(x,y+height);
        GL11.glEnd();
        return new Vector2f(cloudTexture.getImageWidth(), cloudTexture.getImageHeight());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:11:14.330

您没有调用 GL11.glEnable( GL11.GL_TEXTURE ) 并且您也没有设置任何纹理坐标也无济于事。

这两者都会破坏你在四边形上看到纹理的能力......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:40:21.990

您首先没有启用 gl_TEXTURE_2D 。其次，您需要在 glBegin() 和 glEnd() 中调用 .bind()。第三，您需要纹理坐标。因此，对于左上边缘，它将是“glTexCoord(0, 0)”，下一个是“(1, 0)”，然后是“(1, 1)”，最后是“(0, 1)”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:04:48.717

我确实相信对 bind() 的调用需要在您的 glBegin() 和 glEnd() 调用之间才能使其生效。尺寸问题有点奇怪——也许你的纹理尺寸不是 2 的幂，它是由驱动程序翻译的？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T21:13:48.263

不要忘记在需要时调用 TextureImpl.unbind。

# agile - 迭代计划之前或期间的用户故事

> ID：14123330
> 
> 赞同：2
> 
> 时间：2013-01-02T13:54:42.913
> 
> 标签：agile, scrum, user-stories

我们才刚刚开始从瀑布式转向敏捷。关于我们的新流程的少数抱怨之一是我们的迭代计划会议花费的时间太长，主要是因为我们在会议本身中编写故事卡，这就是向我描述流程的方式。

一个建议是，我们在会议之前编写故事卡，并要求每个人在参加会议之前对其进行审查，以节省潜在的时间。

在会议期间讲故事，而不是提前写故事卡片并要求人们提前回顾它们，有可能为每个人节省一些时间吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:36:44.243

这可能不是一个理想的问题，因为没有真正确定的答案。反应可能是主观的。

根据我自己的经验，我们的团队倾向于让利益相关者和产品负责人在我们的冲刺期间以临时方式将用户故事添加到项目产品待办事项中（我们在 Web 应用程序上工作，并且在功能方面是用户驱动的 - 我们确实有路线图，但我们也适应反馈等）。

这样，当需要进行迭代计划时，我们会与利益相关者、产品负责人和项目负责人举行一次简短的产品计划会议，讨论优先级并调整我们产品待办事项上的用户故事。

完成后，项目团队将进行后续的 Sprint 计划会议，这些会议将挑选用户故事以在 sprint 中工作（挑选出足够多的用户故事，根据我们既定的速度衡量，我们认为可以实际实现）。

我相信其他人的做法不同，关键是找到适合你和你的团队的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T15:38:59.803

> 这就是向我描述的过程

你在你的过程中发现了一个问题（计划会议太长）并找出了它的根本原因（写故事卡）。最明智和最敏捷的做法可能是不要固守“过程是如何描述的”，而是相应地进行调整，这意味着提前创建卡片。

也就是说，根据我的个人经验，产品负责人越早向团队介绍用户故事越好。冲刺计划可能会在对故事估计进行细化并处理一些细节时进行，但如果团队至少提前进行了一些探索和估计并且不要完全无知地到达会议，那通常会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-09T12:32:05.567

用户故事最重要的目的之一是充当开发人员和利益相关者之间的对话开始者。根据我的经验，让一两个人审查所有现有的需求或请求并将它们转化为用户故事可以节省大量时间。

但讨论故事卡至关重要，这*需要*相当长的时间。尽管看起来很多时间可以更好地用于开发，但现实情况是，如果不进行讨论，开发很容易走错方向。要求人们在会议前回顾卡片通常是行不通的——如果他们不想在会议期间花时间讨论卡片，他们可能不会在自己的时间里回顾卡片。

我的建议：请两个人在会议之前一起编写用户故事，但要利用会议来审查和讨论每张卡片。

# ios - 使用核心音频获取当前音高的幅度

> ID：14123334
> 
> 赞同：3
> 
> 时间：2013-01-02T13:54:56.767
> 
> 标签：ios, xcode, core-audio, fft, volume

我使用[本教程](http://demetrimiller.com/2011/01/25/pitch-detection-in-ios-4-x/)创建了一个小音高检测应用程序，但是我希望它能够识别最响亮的而不是最高音高（在某个频率范围内）。因此，我需要获取当前音高的幅度来创建一个新的 bin 滤波器......关于我如何实现这一点的任何想法？由于这已经在使用基于核心音频（remoteIO）的样本，因此使用经常建议的 AVAudioPlayer 似乎是不合理的......

很感谢任何形式的帮助！感谢你们！！

# java - Configure XStream to dynamically map to different objects

> ID：14123339
> 
> 赞同：1
> 
> 时间：2013-01-02T13:55:21.993
> 
> 标签：java, json, jackson, xstream, oxm

I am hitting a RESTful 3rd party API that always sends JSON in the following format:

```
{
    "response": {
        ...
    }
} 
```

Where `...` is the response object that needs to be mapped back to a Java POJO. For instance, sometimes the JSON will contain data that should be mapped back to a `Fruit` POJO:

```
{
    "response": {
        "type": "orange",
        "shape": "round"
    }
} 
```

...and sometimes the JSON will contain data that should be mapped back to an `Employee` POJO:

```
{
    "response": {
        "name": "John Smith",
        "employee_ID": "12345",
        "isSupervisor": "true",
        "jobTitle": "Chief Burninator"
    }
} 
```

So depending on the RESTful API call, we need these two JSON results mapped back to one of the two:

```
public class Fruit {
    private String type;
    private String shape;

    // Getters & setters for all properties
}

public class Employee {
    private String name;
    private Integer employeeId;
    private Boolean isSupervisor;
    private String jobTitle;

    // Getters & setters for all properties
} 
```

Unfortunately, I cannot change the fact that this 3rd party REST service always sends back a `{ "response": { ... } }` JSON result. But I still need a way to configure a mapper to dynamically map such a `response` back to either a `Fruit` or an `Employee`.

First, I tried [Jackson](http://jackson.codehaus.org/) with limited success, but it wasn't as configurable as I wanted it to be. So now I am trying to use [XStream](http://xstream.codehaus.org/) with its `JettisonMappedXmlDriver` for mapping JSON back to POJOs. Here's the prototype code I have:

```
public static void main(String[] args) {
    XStream xs = new XStream(new JettisonMappedXmlDriver());

    xs.alias("response", Fruit.class);
    xs.alias("response", Employee.class);

    // When XStream sees "employee_ID" in the JSON, replace it with
    // "employeeID" to match the field on the POJO.
    xs.aliasField("employeeID", Employee.class, "employee_ID");

    // Hits 3rd party RESTful API and returns the "*fruit version*" of the JSON.
    String json = externalService.getFruit();

    Fruit fruit = (Fruit)xs.fromXML(json);
} 
```

Unfortunately when I run this I get an exception, because I have `xs.alias("response", ...)` mapping `response` to 2 different Java objects:

```
Caused by: com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$UnknownFieldException: No such field me.myorg.myapp.domain.Employee.type
---- Debugging information ----
field               : type
class               : me.myorg.myapp.domain.Employee
required-type       : me.myorg.myapp.domain.Employee
converter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
path                : /response/type
line number         : -1
version             : null
------------------------------- 
```

So I ask: **what can I do to circumvent the fact that the API will always send back the same "wrapper" `response` JSON object?** The only thing I can think of is first doing a String-replace like so:

```
String json = externalService.getFruit();
json = json.replaceAll("response", "fruit");
... 
```

But this seems like an ugly hack. Does XStream (or another mapping framework) provide anything that would help me out in this particular case? Thansk in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:07:19.023

There are two ways with Jackson:

*   test manually that the wanted keys are there (`JsonNode` has the necessary methods);
*   use JSON Schema; there is one API in Java: [json-schema-validator](https://github.com/fge/json-schema-validator) (yes, that is mine), which uses Jackson.

Write a schema matching your first object type:

```
{
    "type": "object",
    "properties": {
        "type": {
            "type": "string",
            "required": true
        },
        "shape": {
            "type": "string",
            "required": true
        }
    },
    "additionalProperties": false
} 
```

Load this as a schema, validate your input against it: if it validates, you know you need to deserialize against your fruit class. Otherwise, make the schema for the second item type, validate against it as a security measure, and deserialize using the other class.

There are [code examples for the API](http://fge.github.com/json-schema-validator/stable/index.html?org/eel/kitchen/jsonschema/examples/package-summary.html), too (version 1.4.x)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T18:52:31.560

If you do know the actual type, it should be relatively straight-forward with Jackson. You need to use a generic wrapper type like:

```
public class Wrapper<T> {
  public T response;
} 
```

and then the only trick is to construct type object to let Jackson know what `T` there is. If it is statically available, you just do:

```
Wrapper<Fruit> wrapped = mapper.readValue(input, new TypeReference<Wrapper<Fruit>>() { });
Fruit fruit = wrapped.response; 
```

but if it is more dynamically generated, something like:

```
Class<?> rawType = ... ; // determined using whatever logic is needed
JavaType actualType = mapper.getTypeFactory().constructGenericType(Wrapper.class, rawType);
Wrapper<?> wrapper = mapper.readValue(input, actualType);
Object value = wrapper.response; 
```

but either way it "should just work". Note that in latter case you may be able to use base types ("? extends MyBaseType"), but in general dynamic type can't be specified.

# linq - 如何在 Linq 中加入两个表并进行分组

> ID：14123343
> 
> 赞同：0
> 
> 时间：2013-01-02T13:55:33.783
> 
> 标签：linq

我对 Linq 选择语句有疑问。我是 Linq 的新手，所以任何帮助都会非常有帮助。我做了很多研究，但我仍然没有设法写下正确的 Linq 语句。

我有这两个表和属性：

```
Table Titles(title_id(PK), title) and
Table Sales(title_id(PK), qty) 
```

其中是`title_id`和标题字符串值，而 qty 是代表某个数量的数字。

我需要编写一个选择，它将从这两个表中选出五个最畅销的标题。
所以，我需要从 qty 中求和（我们可以有更多具有相同`Sales.title_id`属性的记录）并按降序进行分组`title_id`和排序`sum(qty)`，然后返回属性 title 和`title_id`.

我怎样才能为我的问题制定合适的解决方案？

问候， 达哈卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:24:28.117

您可以按以下方式对表格进行分组连接`title_id`（每个组`g`将代表已连接标题的所有销售）。然后选择该标题的标题描述和总销售额。按总计排序结果，选择标题并获取所需数量的顶级销售标题：

```
var query = (from t in db.Titles
             join s in db.Sales on t.title_id equals s.title_id into g
             select new { Title = t.title, Total = g.Sum(x => x.qty) } into ts
             orderby ts.Total descending
             select ts.Title).Take(5); 
```

生成的 SQL 将如下所示：

```
SELECT TOP (5) [t2].[title] AS [Title], [t2].[value] AS [Total]
FROM (
    SELECT [t0].[title_id], (
        SELECT SUM([t1].[qty])
        FROM [Sales] AS [t1]
        WHERE [t0].[title_id] = [t1].[title_id]
        ) AS [value]
    FROM [Titles] AS [t0]
    ) AS [t2]
ORDER BY [t2].[value] DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:14:07.063

以下是方法语法中的 linq 查询

```
 sales.GroupBy(s=>s.title_id)
    .Select ( x =>  
       new {
           Title_id = x.Key, 
            Sales= x.Sum (x=> x.qty)
        })
    .OrderByDescending(x=>x.Sales).Take(5)
        .Join( titles, 
            sale=>sale.Title_id,
            title=> title.title_id, 
            (sale, title)=> new 
                {
                  Title = title.Title, 
                  TotalSales=sale.Sales
                }
            ); 
```

# c++ - __func__ 外部函数定义

> ID：14123347
> 
> 赞同：22
> 
> 时间：2013-01-02T13:55:51.853
> 
> 标签：c++, c, c++11, c99, c11

如果我们`__func__`在 C (C99 / C11) 和 C++ 中的函数之外使用预定义变量会发生什么？

```
#include <stdio.h>

const char* str = __func__;

int main(void)
{
   printf("%s", str);
   return 0;
} 
```

gcc 4.7.2 只给出警告（`-Wall -W -pedantic`启用）并且什么也不打印。

标准没有明确说明：

**ISO/IEC 14882:2011**

8.4.1 一般 [dcl.fct.def.general]

> **8**函数局部预定义变量`__func__`被定义为好像`static const char __func__[] = "function-name";` 已经提供了表单的定义，其中函数名称是实现定义的字符串。未指定此类变量是否具有与程序中任何其他对象不同的地址。

**ISO/IEC 9899:2011**

6.4.2.2 预定义标识符

> **1**标识符`__func__`应由翻译器隐式声明，就好像紧跟在每个函数定义的左大括号之后`static const char __func__[] = "function-name";` 出现声明一样，其中 function-name 是词法封闭函数的名称。

UB？错误？或者是其他东西？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-02T14:03:06.710

> 标准没有明确说明

这意味着未定义的行为。

来自 C 标准（强调我的）：

> (C99, 4.p2) “如果违反了出现在约束之外的‘应该’或‘不应’要求，则行为未定义。未定义的行为在本国际标准中以“ '未定义的行为''**或省略任何明确的行为定义。**这三者之间在强调方面没有区别；它们都描述了“未定义的行为”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T14:30:17.837

（从之前的评论中提升）

`__func__`位于保留的命名空间中，因此允许实现在命名空间范围内出于任何目的使用它，即不需要实现来诊断`__func__`函数外部的（错误）使用，因为标准中没有任何内容禁止实现定义`__func__`为一个命名空间范围的数组，`char`如果这就是实现者想要做的。

它可能是未定义的，或者它可能被定义为一个字符串，或者其他任何东西，并且该实现仍然符合要求。

因此，尝试在函数之外使用它是未定义的行为，因为它可能已定义或未定义，并且可能或可能不是可用的正确类型。

对于问题中的代码在与符合标准的实现一起使用时如何具有未定义行为的具体示例，我相信实现可以将其定义为`nullptr`（因此示例会崩溃`printf`），甚至可以将其定义为扩展为取消引用的宏一个空指针，然后`#undef`它在每个函数的入口处和`#define`它在每个函数之后（所以这个例子会在`main`开始之前崩溃！）

# junit - gradle junit 运行：如何从 jar 文件中选择测试

> ID：14123350
> 
> 赞同：4
> 
> 时间：2013-01-02T13:56:34.597
> 
> 标签：junit, gradle

我们可以[使用从 jar 文件中挑选的测试来运行 j unit batchtest。](https://stackoverflow.com/questions/6619540/ant-junit-batchtest-from-a-jar)

```
<zipfileset src="tests-only.jar" includes="**/*Test.class"/> 
```

这会运行从 test-only.jar 中挑选的所有匹配测试

如何用 gradle 做类似的事情。[testClassesDir](http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.testing.Test.html#org.gradle.api.tasks.testing.Test:testClassesDir)只接受实际目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:03:10.367

请参阅 Gradle 用户手册的第[23.12.2](http://gradle.org/docs/current/userguide/userguide_single.html#N12450)节。注意这个信息是从[这个问题中找到的](https://stackoverflow.com/questions/5516154/selecting-specific-tests-to-run-in-gradle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:37:44.090

Gradle 没有用于运行 Jar 文件中包含的测试类的内置功能。[（请随时在http://forums.gradle.org](http://forums.gradle.org)提交功能请求。）应该做的是解压缩 Jar（作为单独的任务），然后进行`testClassesDir`相应的设置。请注意，测试类也需要出现在测试任务中`classpath`（但为此使用 Jar 可能就足够了）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-19T05:20:36.443

通过将 jar 文件视为 zip 文件并结合自定义 gradle 测试任务，这是可能的。

让我们假设 jar 文件位于您的项目主 runtimeClasspath 上，并命名为“tests-only.jar”。

以下代码片段允许 gradle 在 jar-File 中查找类，而无需实际提取它们：

```
task testOnlyTests(type: Test) {
  useJUnit()

  // the project runtimeClasspath should include all dependencies of the tests-only.jar file
  classpath = project.sourceSets.main.runtimeClasspath

  testClassesDirs = project.sourceSets.main.output

  // find file tests-only.jar in dependencies or adjust the snippet to find it by other means
  File testJar = classpath.files.find { it.toString().contains("tests-only.jar") }
  testClassesDirs += zipTree(testJar)

  include("**/*Test.class")
} 
```

同样也应该直接适用于您项目的“测试”配置。

# python - 单击按钮后交换标签

> ID：14123351
> 
> 赞同：1
> 
> 时间：2013-01-02T13:56:35.867
> 
> 标签：python, python-3.x, tkinter

我目前正在开发一个将华氏温度转换为摄氏度并以不同方式显示的 GUI。如果摄氏度最终为正 (+3)，则窗口将变为红色。如果温度为负 (-58)，窗口将变为紫色。我设法用一个可以正确转换的按钮对基本窗口进行编码，但我无法让窗口更改标签。

它应该从绿色主窗口转到显示“转换后的温度：”的窗口并显示结果。

也许你可以帮助我如何做到这一点。现在发布代码。

```
#GUI for the fahrenheit calculator.

import tkinter

class MyConverterGUI:
    def __init__(self):
        self.main_window = tkinter.Tk()

        self.top_frame = tkinter.Frame()    
        #self.mid_frame = tkinter.Frame()
        self.bottom_frame = tkinter.Frame()

        self.main_window.title("Konverterare")
        self.main_window.geometry("350x350") 

        self.label1 = tkinter.Label(self.top_frame, text= 'Fahrenheit till Celcius-konverterare' '\n' 'Skriv in ett tal och tryck på Omvandla' , \
                                  width = 90, height = 20, bg = "green")

        self.label1.pack()

        self.prompt_label = tkinter.Label(self.bottom_frame, text= "Skriv in en temperatur(f) här ---->")
        self.fhentry = tkinter.Entry(self.bottom_frame, width = 10)

        self.prompt_label.pack(side="left")
        self.fhentry.pack(side="left")

        self.value = tkinter.StringVar()
        self.c_label = tkinter.Label(self.top_frame, textvariable = self.value)
        self.value.set("Graderna omvandlade: ")

        self.c_label.pack()

        self.calc_button = tkinter.Button(self.bottom_frame, text ="Omvandla", bg ="purple", command=self.convert, \
                                          height = 2, width = 17)
        self.calc_button.pack(side="right")

        self.top_frame.pack()
        #self.mid_frame.pack()
        self.bottom_frame.pack()

        tkinter.mainloop()

    def ersattEtikett(self):
        self.nyText=convert()
        self.bytText.set(nytext)

    def importera(self):
        self.fahrenheit = float(self.fhentry.get())

        return self.fahrenheit

    def convert(self):
        self.fahrenheit = self.importera()
        self.Celcius = float(self.fahrenheit - 32)*(5/9)
        self.Celcius = round(self.Celcius, 2)
        print ("Detta funkade fint", self.Celcius)

        return self.Celcius

my_converter = MyConverterGUI() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:10:48.623

首先，我根本不知道转换是如何工作的：

```
def ersattEtikett(self):
    self.nyText = self.convert()  #Shouldn't it be `self.convert()`???
    self.bytText.set(nytext) 
```

现在，至于设置改变标签的背景，你需要做的就是使用`config`方法：

```
self.whatever_label_here.config(bg='red') 
```

使用`.config`，您可以更改可以在构造函数中设置的属性。例如：

```
self.label1.config(text="This is the new label text",bg="green") 
```

最后，作为风格说明：

```
self.calc_button = tkinter.Button(self.bottom_frame, text ="Omvandla", bg ="purple", command=self.convert, \
                                  height = 2, width = 17) 
```

在上一行中，反斜杠 ( `\`) 是完全没有必要的。Python 将自动继续任何类型的括号未关闭的行——

```
mylist = [ 1,
           2,
           3 ] 
```

是完全有效的（尽管我并不是说你应该这样写所有的列表！）。原样：

```
mydict = { 'foo': 'bar',
           'bar': 'baz',
           'baz': 'qux' } 
```

原样：

```
mycallable(foo,
           bar,
           baz,
           qux="A cat in a hat") 
```

* * *

*旁白——快速介绍一下`self`*

您可以通过“调用”一个类来创建一个类的实例：

```
foo = MyClass() 
```

现在你可以通过调用一个方法`foo`来调用它：

```
bar = foo.method() 
```

请注意，要访问该方法，您需要知道`foo`. `bar = method()`行不通（你也不希望它）。那么，如果您想从内部`foo`的另一个方法调用内部的方法，这将如何工作`foo`？这就是`self`进来的地方：考虑以下类定义：

```
class MyClass(object):
    def __init__(self):
        self.bar =  'baz'

    def method(self):
        print( "ID of self:", id(self) )
        return self.method2()

    def method2(self):
        self.bar = 'qux'
        return self.bar

foo = MyClass()
print ( "ID of foo:", id(foo) )
foo.method() 
```

请注意， 的 ID 与`foo`的 ID 相同`self`。换句话说，`foo`作为第一个参数传递给它的方法（我们将其命名`self`为约定）。另一种看待它的方式：

```
foo.method() 
```

基本上相当于：

```
MyClass.method(foo) 
```

# android - 仅显示 sql 数据库中选定行的问题（android。）

> ID：14123355
> 
> 赞同：1
> 
> 时间：2013-01-02T13:56:44.370
> 
> 标签：android, sql, database, android-asynctask

我只想显示日期等于 getdate(string data) 函数中我的字符串的那些行，所以我尝试更改工作函数，该函数使用 SELECT from ... 命令在 Listview 中显示数据库中的所有条目，但它没有不工作。如何从我的日历中获取这些事件？

[我的整个数据库代码](http://pastebin.com/vGcPF1z8)

正确工作功能：

```
public Cursor getAllContacts() 
{
    return database.query("calendar_events", new String[] {"_id", "event"}, 
     null, null, null, null, "date");
} 
```

我想将其更改为：

```
public Cursor getdate(String data){
    return database.rawQuery("SELECT event FROM calendar_events WHERE date = '" + data + "'", new String[] { "event"});
} 
```

我更改的函数片段：getAllContacts（代码正常工作并在列表视图中显示日历中的事件，单击它后我可以输入此数据库条目中的所有数据）到getdate（“2012-12-30”） ：

```
 private class GetContacts extends AsyncTask<Object, Object, Cursor> 
{
   DatabaseConnector dbConnector = new DatabaseConnector(DayPlan.this);

   @Override
   protected Cursor doInBackground(Object... params)
   {
      dbConnector.open();
      return dbConnector.getdate("2012-12-30"); 
   } 

   @Override
   protected void onPostExecute(Cursor result)
   {
      conAdapter.changeCursor(result); // set the adapter's Cursor
      dbConnector.close();
   } 
} 
```

[这个类的整个代码：](http://pastebin.com/Q1P8UYqV)

我遇到的错误：

```
01-02 14:32:13.828: E/AndroidRuntime(809): FATAL EXCEPTION: AsyncTask #1
01-02 14:32:13.828: E/AndroidRuntime(809): java.lang.RuntimeException: An error occured while executing doInBackground()
01-02 14:32:13.828: E/AndroidRuntime(809):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-02 14:32:13.828: E/AndroidRuntime(809):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-02 14:32:13.828: E/AndroidRuntime(809):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-02 14:32:13.828: E/AndroidRuntime(809):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-02 14:32:13.828: E/AndroidRuntime(809):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-02 14:32:13.828: E/AndroidRuntime(809):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-02 14:32:13.828: E/AndroidRuntime(809):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-02 14:32:13.828: E/AndroidRuntime(809):  at java.lang.Thread.run(Thread.java:856)
01-02 14:32:13.828: E/AndroidRuntime(809): Caused by: java.lang.IllegalArgumentException: Cannot bind argument at index 2 because the index is out of range.  The statement has 0 parameters.
01-02 14:32:13.828: E/AndroidRuntime(809):  at android.database.sqlite.SQLiteProgram.bind(SQLiteProgram.java:212)
01-02 14:32:13.828: E/AndroidRuntime(809):  at android.database.sqlite.SQLiteProgram.bindString(SQLiteProgram.java:166)
01-02 14:32:13.828: E/AndroidRuntime(809):  at android.database.sqlite.SQLiteProgram.bindAllArgsAsStrings(SQLiteProgram.java:200)
01-02 14:32:13.828: E/AndroidRuntime(809):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
01-02 14:32:13.828: E/AndroidRuntime(809):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
01-02 14:32:13.828: E/AndroidRuntime(809):  at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
01-02 14:32:13.828: E/AndroidRuntime(809):  at com.examples.android.calendar.DatabaseConnector.getdate(DatabaseConnector.java:87)
01-02 14:32:13.828: E/AndroidRuntime(809):  at com.examples.android.calendar.DayPlan$GetContacts.doInBackground(DayPlan.java:70)
01-02 14:32:13.828: E/AndroidRuntime(809):  at com.examples.android.calendar.DayPlan$GetContacts.doInBackground(DayPlan.java:1)
01-02 14:32:13.828: E/AndroidRuntime(809):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-02 14:32:13.828: E/AndroidRuntime(809):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-02 14:32:13.828: E/AndroidRuntime(809):  ... 4 more 
```

如何仅显示日期为 2012-12-30 的事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:24:06.450

`rawQuery`是仅用于非常特殊的查询，并且仅在您不能这样做的情况下使用。

您的查询相当简单，应该这样表达：

```
return database.query("calendar_events", new String[] {"_id", "event"}, 
             "date = ?", new String[] { data }, null, null, "date"); 
```

参数是：

1.  表名
2.  投影（你想要的列）。_id 非常重要，因为 CursorAdapter 使用它在您的数据中找到自己的方式。event 是您感兴趣的栏目
3.  where 子句。那是你的查询。? 替换为 args
4.  哪里Args。用来代替你的？。请注意，转义和引号完全由 sqlite 处理。
5.  通过...分组
6.  有
7.  订购

# sharepoint - SPUtility.CreateNewDiscussionReply 创建一个讨论项

> ID：14123357
> 
> 赞同：1
> 
> 时间：2013-01-02T13:57:04.660
> 
> 标签：sharepoint, sharepoint-2010

我有一个非常奇怪的错误，在我的一个**SharePoint**场中，当我调用 时`SPUtility.CreateNewDiscussionReply()`，它会创建一个新项目，其中填充了回复的值，但具有讨论内容类型。但是，如果我从网络回复，它会正确创建一个讨论回复项目。

**更新：**

更深入地调试我发现 SPUtility.CreateNewDiscussionReply() 将项目内容类型设置为“消息”而不是 ContentTypeId。添加项目时，SharePoint 在查找消息内容类型时遇到问题，并使用列表中找到的第一个内容类型进行解决。

这是我用来测试这个问题的代码：

```
SPList list = web.Lists["Discussions"];
SPListItem discussion = list.GetItemById(11);

SPListItem reply = SPUtility.CreateNewDiscussionReply(discussion);
// At this point:
//   reply["ContentType"] = "Message"
//   reply["ContentTypeId"] = ""

reply["Body"] = "This is a test reply";

reply.Update();
// At this point:
//   reply["ContentType"] = "Message"
//   reply["ContentTypeId"] = "0x012002...." (Discussion content type) 
```

**解决方法：** 我发现如果我在更新项目之前手动设置回复的内容类型 ID，则一切正常：

```
reply["ContentTypeId"] = list.ContentTypes.BestMatch(SPBuiltInContentTypes.Message); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T04:20:21.060

讨论内容类型被视为文件夹（继承文件夹内容类型），因此您必须将回复添加到帖子文件夹。

# c# - ASP.NET MVC - EF Code First 不想在我的数据库中创建一行

> ID：14123362
> 
> 赞同：1
> 
> 时间：2013-01-02T13:57:28.530
> 
> 标签：c#, .net, asp.net-mvc, entity-framework

我有这段代码：

```
var data = context.Accounts.Where(a => a.UserName == User.Identity.Name).Select(a => a.UserAddons).SingleOrDefault();
if (data == null)
   data = new UserAddons();
{setting up properties of data}
context.SaveChanges(); 
```

我希望它创建一个新的 UserAddons 行。但它不想。我是否需要选择整个帐户实体才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:04:41.657

您可能忘记将新实体添加到上下文中。试试这个（未测试）：

```
bool isNew = false;
var data = context.Accounts.Where(a => a.UserName == User.Identity.Name).Select(a => a.UserAddons).SingleOrDefault();

if (data == null)
{
   data = new UserAddons();
   isNew = true;
}  

// setting up properties of data

if(isNew)
    context.Add(data);

context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:20:46.940

如果我正确理解您的模型，您应该将新的添加`UserAddons`到`Account`

```
var account = context.Accounts.Where(a => a.UserName == User.Identity.Name).Single();

if (account.Addons == null)
   account.UserAddons = new UserAddons();

{setting up properties of account.Addons}

context.SaveChanges(); 
```

# performance - 提高大型阵列的 WCF 性能

> ID：14123365
> 
> 赞同：1
> 
> 时间：2013-01-02T13:57:35.427
> 
> 标签：performance, wcf, protobuf-net

我们正在使用 WCF 将数据从服务器应用程序传输到多个客户端。实际上，对于大部分流量，客户端和服务器都在同一台机器上运行，所以我希望传输非常快。

但是，在传输大型数组（16 位灰度图像）时，传输数据需要几秒钟的时间。对于 16 MB 的图像，大约需要 3-5 秒！

最初，我们使用`ushort`数组，因为它是最适合存储 16 位灰度图像数据的数据类型。但是，这非常慢：16 MB 大约需要 20-25 秒。当我们在使用 序列化之前将数据复制到`byte`数组`Buffer.BlockCopy`时，由于某种原因，它会减少到 3-5 秒。但是，将 16 MB 从一个应用程序传输到在同一台机器上运行的另一个应用程序需要 3-5 秒，这对我来说仍然太长了！

因此，我的问题是：**我们如何才能提高这种场景的性能？**

我已经从 Marc Gravell 调查了 protobuf-net，但我不确定它在这种情况下是否会有所帮助......有什么经验或其他建议吗？

这是我们的数据类之一（包含图像数据）的源代码：

```
[DataContract(IsReference = true)]
public class ImageData
{
    private ushort[] m_pixelData;

    public ushort[] PixelData
    {
        get
        {
            return m_pixelData;
        }
        set
        {
            m_pixelData = value;
            OnPropertyChanged("PixelData");
        }
    }

    [DataMember]
    public override byte[] FileData
    {
        get
        {
            if (this.PixelData == null)
            {
                return null;
            }

            return ListHelper.ConvertToByteArray(this.PixelData);
        }
        set
        {
            if (value == null)
            {
                this.PixelData = null;
                return;
            }

            this.PixelData = ListHelper.ConvertToUshortArray(value);
        }
    }

} 
```

注意只有`FileData`属性被标记为`[DataMember]`，所以`PixelData`属性没有被序列化！

以下是服务器的相关部分`app.config`：

```
<system.serviceModel>
    <services>
        <service name="Services.ImageDataService" behaviorConfiguration="ServicesBehavior">
            <host>
                <baseAddresses>
                    <add baseAddress="net.tcp://localhost:8008/ImageDataService" />
                </baseAddresses>
            </host>
            <endpoint address="" binding="netTcpBinding" bindingConfiguration="NetTcpBindingLargeFileTransfer" contract="Services.IImageDataService" />
            <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration="" contract="IMetadataExchange" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="ServicesBehavior">
                <serviceMetadata httpGetEnabled="false" />
                <serviceDebug includeExceptionDetailInFaults="false" />
                <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <bindings>
        <netTcpBinding>
            <binding
                name="NetTcpBindingLargeFileTransfer"
                openTimeout="00:01:00" closeTimeout="00:01:00" receiveTimeout="infinite" sendTimeout="infinite"
                transactionFlow="false" transactionProtocol="OleTransactions"
                transferMode="Buffered" hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                maxBufferPoolSize="2097152" maxBufferSize="1073741824" maxConnections="10" maxReceivedMessageSize="1073741824">
                <readerQuotas
                    maxDepth="2147483647" maxStringContentLength="2147483647"
                    maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                <reliableSession ordered="true" inactivityTimeout="infinite" enabled="false" />
                <security mode="None">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                    <message clientCredentialType="Windows" />
                </security>
            </binding>
        </netTcpBinding>
    </bindings>
</system.serviceModel> 
```

和客户的`app.config`：

```
<system.serviceModel>
    <bindings>
        <netTcpBinding>
            <binding
                name="NetTcpBindingLargeFileTransfer"
                openTimeout="00:01:00" closeTimeout="00:01:00" receiveTimeout="infinite" sendTimeout="00:10:00"
                transactionFlow="false" transactionProtocol="OleTransactions"
                transferMode="Buffered" hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                maxBufferPoolSize="2097152" maxBufferSize="1073741824" maxConnections="10" maxReceivedMessageSize="1073741824">
                <readerQuotas
                    maxDepth="2147483647" maxStringContentLength="2147483647"
                    maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                <reliableSession ordered="true" inactivityTimeout="infinite" enabled="false" />
                <security mode="None">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                    <message clientCredentialType="Windows" />
                </security>
            </binding>
        </netTcpBinding>
    </bindings>
    <client>
        <endpoint
            address="net.tcp://localhost:8008/ImageDataService"
            binding="netTcpBinding"
            bindingConfiguration="NetTcpBindingLargeFileTransfer"
            contract="Services.IImageDataService"
            name="Services.IImageDataService"
            behaviorConfiguration="ServicesBehavior" />
    </client>
    <behaviors>
        <endpointBehaviors>
            <behavior name="ServicesBehavior">
                <dataContractSerializer maxItemsInObjectGraph="2147483647"></dataContractSerializer>
            </behavior>
        </endpointBehaviors>
    </behaviors>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:02:30.277

在同一台机器上尝试命名管道。

[选择交通工具](http://msdn.microsoft.com/en-us/library/ms733769%28v=VS.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:02:57.113

尝试使用命名管道传输进行流式传输。有关详细信息，请参阅这篇文章[大数据和流式传输](http://msdn.microsoft.com/en-us/library/ms733742.aspx)

在将数据发送到服务器/客户端之前缓冲数据可能是个问题。流式传输将分块发送您的数据。

# android - 当我打开锁时，Phonegap 应用程序没有响应

> ID：14123371
> 
> 赞同：2
> 
> 时间：2013-01-02T13:58:02.913
> 
> 标签：android, cordova

我有一个工作正常的应用程序，如果手机被锁定并在几分钟后打开锁，它工作正常.. 但如果我长时间保持锁定（超过 5 分钟并打开），那么应用程序没有响应。有人可以告诉我解决方案。

# php - 允许会员每天给予一次代表积分

> ID：14123374
> 
> 赞同：-1
> 
> 时间：2013-01-02T13:58:24.800
> 
> 标签：php

我是 PHP 新手，没有太多知识，所以这就是我在这里问的原因。我的问题是下面的代码允许我的站点成员给其他成员积分，但它只允许一次，所以我希望它每天给积分一次。我需要做些什么才能使它成为可能？
这是代码：

```
// users can not give 2 x points
$repeat = mysql_query("SELECT userid FROM {$TABLE_PREFIX}reputation WHERE userid ='$id' AND whoadded=".$CURUSER["uid"]);
if( mysql_num_rows( $repeat) > 0 )
{
    stderr("Hold On","You already gave reputation points to this user!");
    stdfoot();
    exit;
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:17:40.300

你可以做什么你应该为 TimeVoted 创建一个字段，然后将数据类型设置为 datetime 然后使用 TIMESTAMPDIFF 函数，它需要三个参数，但首先在你的 mysql 查询窗口中使用它，然后在你的脚本中应用它，你会明白它是如何工作的，您将能够解决您的问题

# php - PHP file_get_contents / CURL 不返回整页

> ID：14123378
> 
> 赞同：4
> 
> 时间：2013-01-02T13:58:42.323
> 
> 标签：php, curl, file-get-contents

我在尝试使用 CURL 或 file_get_contents 提取第 3 方文件内容时遇到了一些奇怪的行为，读取了页面的部分内容，但它停在了随机位置……虽然没有错误（超时等）。

如果我给出完整的例子，可能最容易看到！：

使用以下非常基本的脚本来读取完整的 URL 并返回内容工作得很好，页面的全部内容（少一些外部 css 等）在一两秒内：

```
<?php    
set_time_limit(180);
$page = file_get_contents('http://www.fantasyleague.com/Classic/Stats/playerlist.aspx?dpt=3');
echo $page;
?> 
```

但是，如果我们更改为

```
<?php    
set_time_limit(180);
$page = file_get_contents('http://www.fantasyleague.com/Classic/Stats/playerlist.aspx?dpt=4');
echo $page;
?> 
```

它需要很长时间才能运行，并最终返回页面的一部分，但不是全部。它并不一致，但通常以“A Westwood AV 3.6 12”或“show”结尾，在页面稍远一点的地方。

如果您查看这两个 URL，您会发现它们基本相同。而且这种行为刚刚开始发生，直到一两天前，两者都运行良好。

有任何想法吗？我可以提供我错过的任何进一步信息！

编辑：

文件完成位置的示例...原始文件包含：

```
<div class="right">
    <a id="Playerlist_help_button" class="button left" href="#"><div>Show help</div></a>
    <a id="Playerlist_filters_button" class="button left" href="#"><div>Show filters</div></a>
    <a class="button left" href="PlayerListPrintable.aspx" target="_blank"><div>Printable Version</div></a>
    <br class="clear" />
</div> 
```

但检索到的数据停在：

```
<div class="right">
    <a id="Playerlist_help_button" class="button left" href="#"><div>Show help</div></a>
    <a id="Playerlist_filters_button" class="button left" href="#"><div>Show 
```

或者它经常失败的另一个地方是：

```
 <td><div class="chilli normal" /></td>

        <td>12</td>

        <td>0</td> 
```

变成：

```
 <td><div class="chilli normal" /></td>

        <td>12</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:09:26.200

通过 file_get_contents 或 curl 一次只能获取 html 源代码，但不能获取所有组件

# android - 通过 /dev/uinput 在 Android 中注入多点触控手势

> ID：14123379
> 
> 赞同：1
> 
> 时间：2013-01-02T13:58:56.413
> 
> 标签：android, linux, root, multi-touch

我正在寻找一种将多点触控手势注入 Android 的方法。到目前为止，我打开 /dev/uinput 并写入文件描述符。此解决方案适用于“单”触摸。如何注入多点触控输入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-11T21:38:18.487

根据我的经验，`/dev/uinput`触摸手势会很困难。我实现了单点触控，它只适用于某些设备。在其他人身上，它只会产生“悬停”的效果。

然后我使用了 android 的触摸设备`/dev/input/eventX`（如果你有 root 访问权限，你可以使用它）。查看触摸输入如何工作的最佳方法是`getevent /dev/input/eventX`在设备本身上使用二进制文件。[linux 多点触控协议](https://www.kernel.org/doc/Documentation/input/multi-touch-protocol.txt)输入很好地描述了多点触控功能和行为，并为您`getevent`在破译十六进制代码（并将它们翻译成更有意义的东西，例如`ABS_MT_POSITION_X`）后将看到的内容提供了很好的背景。

简而言之：

1.  找出哪些`/dev/input/eventX`设备是触摸输入设备。它是一个注册了 ABS_MT_* 事件的设备。您可以使用`getevent -il`命令查看此内容（在 中运行`adb shell`）
2.  假设支持此类事件的输入设备是`/dev/input/event2`.
3.  从屏幕发出`getevent /dev/input/event2`命令`adb shell`并触摸屏幕。
4.  您将在屏幕上获得一些输出，其中包含三列：
    1.  事件类别（对于`EV_ABS`，这是`0003`）
    2.  事件代码（因为`ABS_MT_SLOT`这是`0x002f`
    3.  事件值（即槽号、坐标、压力或事件定义的任何内容）
5.  查看事件的外观并重播它们。您将能够以这种方式注入多点触控事件和手势。

对于实例，`getevent /dev/input/event2`双击的注释输出：

```
0003 002f 00000001 // slot 1 (finger 1)
0003 0039 000019fe // tracking id for slot 1
0003 0035 00000146 // position x
0003 0036 00000117 // position y
0003 0030 00000033 // touch area
0000 0000 00000000 // sync
0003 002f 00000000 // slot 0 (finger 0)
0003 0039 000019ff // tracking id for slot 0
0003 0035 000000cb // position x
0003 0036 00000164 // position y
0003 0030 00000028 // touch area
0000 0000 00000000 // sync
0003 0039 ffffffff // relese finger 0
0000 0000 00000000 // sync
0003 002f 00000001 // slot 1
0003 0039 ffffffff // release finger 1
0000 0000 00000000 // sync 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T00:42:53.860

不确定这是否可行，但是（我假设您是从应用程序中执行此操作）您可以同时运行一系列 AsyncTask（并写入 /dev/uinput）以模拟同时触摸

# php - 无法生成 .csv 文件：PHP

> ID：14123390
> 
> 赞同：3
> 
> 时间：2013-01-02T14:00:06.073
> 
> 标签：php, csv

实际上我不知道如何生成 .csv 文件。我浏览了各种电子笔记，但仍然没有得到。

**我想做的事？**

我已经编写了一段代码来回显“ **partner_name** ”和“ **link** ”，但这些需要放入**formDetails.csv**文件中。

```
$result = mysql_query(
    "SELECT form_id, partner_name 
     FROM `ef_kabaadkhana`.`ef_form_master_v1` 
     WHERE active = 1 AND listed = 1;"
);

while ($formDetails = mysql_fetch_assoc($result)) {
    $partner_name       = $formDetails['partner_name'];
    $formId             = $formDetails['form_id'];
    $slugifyPartnername = slugify($partner_name);
    $partner_link       = "http://myforms.com/form/{$formId}/{$slugifyPartnername}";
    echo $partner_name . '=>' . $partner_link, "\n";
}

function slugify($text) {
    $text = preg_replace('~[^\\pL\d]+~u', '-', $text);
    $text = trim($text, '-');
    if (function_exists('iconv'))
        $text = iconv('utf-8', 'us-ascii//TRANSLIT', $text);
    $text = strtolower($text);
    $text = preg_replace('~[^-\w]+~', '', $text);
    if (empty($text))
        return 'n-a';
    return $text;
} 
```

**它能做什么？**

它只是从`ef_form_master_v1`表中获取 form_id 和 partner_name。和被相应地定义和显示`$partnerName`。`$partnerlink`

但我不想回显`$partnerName`and `$partnerlink`，而是想将这些参数**数组**放在一个名为 .csv 的 CSV 文件中`formDetails.csv`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T14:06:11.203

[文档`fputcsv`](http://php.net/fputcsv)很清楚，但是我将在下面提供一个示例：

```
$handle = fopen('/path/to/formDetails.csv', 'w');

while(<your query loop>) {
    $write = array($partner_name, $partner_link);
    fputcsv($handle, $write);
}

fclose($handle); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T14:07:17.290

```
$fp = fopen('formDetails.csv', 'w');
while ($formDetails = mysql_fetch_assoc($rs)) 
{
    $partner_name=$formDetails['partner_name'];
    $formId=$formDetails['form_id'];
    $slugifyPartnername=slugify($partner_name);
    $partner_link="http://myforms.com/form/{$formId}/{$slugifyPartnername}";
    echo $partner_name.'=>'.$partner_link;
    fputcsv($fp, array($partner_name, $partner_link));
}
fclose($fp); 
```

确保 formDetails.csv 存在于您指定的当前目录或路径中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T14:20:33.657

首先，您需要创建文件，我建议以 a 的形式[`SplFileObject`](http://php.net/SplFileObject)：

```
$csvFile = new SplFileObject('formDetails.csv', 'w+'); 
```

您可能还想创建包含列标签的第一行，这通过使用每个列的条目和[`SplFileObject::fputcsv`](http://php.net/SplFileObject-fputcsv)方法的数组来工作：

```
$cvsFile->fputcsv(array('Partner', 'Link')); 
```

然后稍后，而不是（或旁边用于调试目的）：

```
echo $partner_name . '=>' . $partner_link, "\n"; 
```

您将其输出到该文件中：

```
$csvFile->fputcsv(array($partner_name, $partner_link)); 
```

就是这样。从上面的观点：

```
$result = mysql_query(
    "SELECT form_id, partner_name 
     FROM `ef_kabaadkhana`.`ef_form_master_v1` 
     WHERE active = 1 AND listed = 1;"
);

### Create CSV File ###
$csvFile = new SplFileObject('formDetails.csv', 'w+');
$cvsFile->fputcsv(array('Partner', 'Link'));

while ($formDetails = mysql_fetch_assoc($result)) {
    $partner_name       = $formDetails['partner_name'];
    $formId             = $formDetails['form_id'];
    $slugifyPartnername = slugify($partner_name);
    $partner_link       = "http://myforms.com/form/{$formId}/{$slugifyPartnername}";
    echo $partner_name . '=>' . $partner_link, "\n";

    ### Output each row to CSV File ###
    $csvFile->fputcsv(array($partner_name, $partner_link));    
}

function slugify($text) {

    ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T14:10:44.313

希望我的示例会有所帮助（客户需要 csv 文件以实现 Excel 兼容性）：

```
$data = $this->_getParam('data'); // getting array of some values
$text = $data[0] . ";";
$text .= $data[1] . ";";
$text .= "\"" . $data[2] . " (N:" . $data[3] . ")" . "\";";
$text .= $data[3];

$ext = '.csv';
$filename = date("Y-m-d") . $ext;
$way = "files/{$filename}";

$fp = fopen($way, "a");
fwrite($fp, $text . PHP_EOL);
fclose($fp); 
```

如果没有这样的 csv 文件，它将创建一个。

# php - Nivo：给每张幻灯片标题一个不同的类名？

> ID：14123394
> 
> 赞同：0
> 
> 时间：2013-01-02T14:00:24.153
> 
> 标签：php, javascript, nivo-slider, caption

我正在使用插件[Nivo Slider Light](http://wordpress.org/extend/plugins/nivo-slider-light/)，我想为每张幻灯片的标题背景着色不同的颜色。

它只使用一个名为 nivo-caption 的 div，如何稍微调整它以将每个 div 命名为不同的名称，以便我可以通过 CSS 定位它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:16:56.193

我对 Nivo 滑块不太熟悉，但我看到了[这篇文章](http://www.soslignes-ecrivain-public.fr/Nivo-Slider-change-caption-position-for-each-slide.html)，它展示了如何以不同的方式定位标题。

据我了解，您可以使用相同的方法来应用不同的颜色，并为每个添加样式`nivo-captionX p`：

```
.nivo-caption1 p {
  background: #7ea5b3;
}

.nivo-caption2 p {
  background: #587580;
}

.nivo-caption3 p {
  background: #557101;
} 
```

**更新：** [这篇关于样式标题的文章](http://www.soslignes-ecrivain-public.fr/Nivo-Slider-5-new-tips-to-change-its-look.html)也可能会有所帮助。

# c# - 逗号分隔列表，用“and”代替最后一个逗号

> ID：14123396
> 
> 赞同：20
> 
> 时间：2013-01-02T14:00:33.440
> 
> 标签：c#, string, linq, list

我想在 C# 中创建一个逗号分隔的列表，并将“and”作为最后一个分隔符。

```
string.Join(", ", someStringArray) 
```

会产生这样的字符串

```
Apple, Banana, Pear 
```

但我希望它看起来像这样：

```
Apple, Banana and Pear 
```

有没有一种简单的方法可以使用 Linq**而不**使用循环来实现它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-02T14:03:28.363

您可以对除最后一项以外的所有项目进行联接，然后手动添加最后一项：

```
using System;
using System.Linq;

namespace Stackoverflow
{
    class Program
    {
        static void Main(string[] args)
        {
            DumpResult(new string[] { });
            DumpResult(new string[] { "Apple" });
            DumpResult(new string[] { "Apple", "Banana" });
            DumpResult(new string[] { "Apple", "Banana", "Pear" });
        }

        private static void DumpResult(string[] someStringArray)
        {
            string result = string.Join(", ", someStringArray.Take(someStringArray.Length - 1)) + (someStringArray.Length <= 1 ? "" : " and ") + someStringArray.LastOrDefault();
            Console.WriteLine(result);
        }
    }
} 
```

如您所见，检查项目的数量并决定是否需要添加“和”部分。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-02T14:07:17.480

一种可能的解决方案：

```
var items = someStringArray; // someStringArray.ToList() if not a ICollection<>
var s = string.Join(", ", items.Take(items.Count() - 1)) +
        (items.Count() > 1 ? " and " : "") + items.LastOrDefault(); 
```

请注意，如果该语句没有实现（列表和数组实现它） ，则该语句可以迭代`someStringArray`多次。`ICollection<string>`如果是这样，请使用您的集合创建一个列表并对其执行查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T16:47:27.530

> 有没有一种简单的方法可以使用 Linq 而不使用循环来实现它？

没有循环是不可能的。For 循环效果最好。LINQ 查询将使用多个循环。

```
 string Combine (IEnumerable<string> list)
    {
        bool start = true;
        var last = string.Empty;
        String str = string.Empty;

        foreach(var item in list)
        {
            if ( !start)
            {
                str = str + " , " + item; 
                last = item;

            }
            else
            {
                str = item;
                start = false;
            } 

        }

        if (!string.IsNullOrWhiteSpace(last))
        {
            str = str.Replace( " , " + last, " and " + last);
        }

        return str;
    } 
```

# jsf-2 - 带有方法的 JSF 连接字符串

> ID：14123397
> 
> 赞同：0
> 
> 时间：2013-01-02T14:00:41.730
> 
> 标签：jsf-2, el

如何在方法表达式的结果上连接字符串？以下不起作用。

```
<h:commandButton action="/product.xhtml?product=#{productBean.product} ">  </h:commandButton> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:10:08.060

这确实不是一个有效的方法表达式。如果您打算调用某些业务操作，则需要包含`/product.xhtml?product=`在返回值中。

```
<h:commandButton value="View" action="#{productBean.view}" /> 
```

和

```
public String view() {
    // ...

    return "/product.xhtml?faces-redirect=true&product=" + product;
} 
```

*（这`faces-redirect=true`将使它成为一个重定向，这很可能是您在这里尝试完成的）*

或者，如果您根本不需要调用业务操作，请`<h:button>`改用。

```
<h:button value="View" outcome="/product.xhtml?product=#{productBean.product}" /> 
```

或者，如果它是一个因此需要进行 URLEncoded 的非数字字符串，请将其嵌套为`<f:param>`

```
<h:button value="View" outcome="/product.xhtml">
    <f:param name="product" value="#{productBean.product}" />
</h:button> 
```

### 也可以看看：

*   [h:button 和 h:commandButton 之间的区别](https://stackoverflow.com/questions/13070537/difference-between-hbutton-and-hcommandbutton)

# javascript - 为什么 twitter 的分享按钮会在我的 body 标签中添加 data-twttr-rendered="true"？

> ID：14123399
> 
> 赞同：15
> 
> 时间：2013-01-02T14:00:45.507
> 
> 标签：javascript, twitter

只是好奇。为什么它需要访问 DOM 的*那*部分，而不仅仅是它正在操作的部分？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-18T12:00:45.140

似乎 twitter 按钮的渲染回调需要知道整个页面是否已被渲染（尤其是如果页面上有多个），并且 body 标记是通过属性存储该信息的明显位置。 ..

推文按钮文档：[https ://dev.twitter.com/docs/tweet-button](https://dev.twitter.com/docs/tweet-button)

也查一下`twttr.TweetButton`及其方法`render()`

为了确认，请浏览此代码： http: [//platform.twitter.com/widgets.js](http://platform.twitter.com/widgets.js) （搜索`data-twttr-rendered`以查看它的使用情况——不幸的是它被缩小了！）

# java - 在jsp中上传图像文件时访问被拒绝错误

> ID：14123400
> 
> 赞同：-1
> 
> 时间：2013-01-02T14:00:46.197
> 
> 标签：java, ajax, jsp, servlets

我正在尝试在 jsp 中上传图像文件，因此其具有路径 c:\ 的本地 Windows 机器工作正常，但在我的基于 Cpanel 的托管的网络托管共享服务器中，为我提供了访问拒绝消息和错误，下面也提到了它和目录我上传的图片有权限 - 托管服务器上的 755

```
Erorr occured in uploading. java.io.FileNotFoundException: /home/pasasin/public_html/e6f618f06876640c3de368bcba6f2053c.jpg (Permission denied) 
```

而且 e.stacktrace 是

```
type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: Exception in JSP: /upload.jsp:31

28: int endPos = ((file.substring(0, boundaryLocation)).getBytes()).length;
29: saveFile="/home/pasasin/public_html/"+saveFile;
30: File ff = new File(saveFile);
31: FileOutputStream fileOut = new FileOutputStream(ff);
32: fileOut.write(dataBytes, startPos, (endPos - startPos));
33: fileOut.flush();
34: fileOut.close(); 
```

这里我也提到了代码

```
page.jsp

<HTML>
<HEAD><TITLE>Display file upload form to the user</TITLE></HEAD> 
<BODY> <FORM ENCTYPE="multipart/form-data" ACTION="upload.jsp" METHOD=POST>
<br><br><br>
<center>
<table border="0" bgcolor=#ccFDDEE>
<tr><center><td colspan="2" align="center"><B>UPLOAD THE FILE</B><center></td></tr>
<tr><td colspan="2" align="center"> </td></tr>
<tr><td><b>Choose the file To Upload:</b></td><td><INPUT NAME="file" TYPE="file">    </td></tr>
<tr><td colspan="2" align="center"> </td></tr>
<tr><td colspan="2" align="center"><input type="submit" value="Send File"> </td></tr>
<table>
</center> 
</FORM>
</BODY>
</HTML>

upload.jsp

<%@ page import="java.io.*,java.sql.*" %>
<%
String saveFile="";
String contentType = request.getContentType();
if ((contentType != null) && (contentType.indexOf("multipart/form-data") >= 0)) {
DataInputStream in = new DataInputStream(request.getInputStream());
int formDataLength = request.getContentLength();
byte dataBytes[] = new byte[formDataLength];
int byteRead = 0;
int totalBytesRead = 0;
while (totalBytesRead < formDataLength) {
byteRead = in.read(dataBytes, totalBytesRead,formDataLength);
totalBytesRead += byteRead;
}
String file = new String(dataBytes);
saveFile = file.substring(file.indexOf("filename=\"") + 10);
saveFile = saveFile.substring(0, saveFile.indexOf("\n"));
saveFile = saveFile.substring(saveFile.lastIndexOf("\\") + 1,saveFile.indexOf("\""));
int lastIndex = contentType.lastIndexOf("=");
String boundary = contentType.substring(lastIndex + 1,contentType.length());
int pos;
pos = file.indexOf("filename=\"");
pos = file.indexOf("\n", pos) + 1;
pos = file.indexOf("\n", pos) + 1;
pos = file.indexOf("\n", pos) + 1;
int boundaryLocation = file.indexOf(boundary, pos) - 4;
int startPos = ((file.substring(0, pos)).getBytes()).length;
int endPos = ((file.substring(0, boundaryLocation)).getBytes()).length;
saveFile="/home/pasasin/public_html/"+saveFile;
File ff = new File(saveFile);
FileOutputStream fileOut = new FileOutputStream(ff);
fileOut.write(dataBytes, startPos, (endPos - startPos));
fileOut.flush();
fileOut.close();
%><Br><table border="2"><tr><td><b>You have successfully upload the file by the name     of:</b>
<% out.println(saveFile);%></td></tr></table>
<%

Connection connection = null;
String connectionURL = "jdbc:mysql://localhost:3306/test";
ResultSet rs = null;
PreparedStatement psmnt = null;
FileInputStream fis;
try {
Class.forName("com.mysql.jdbc.Driver").newInstance();
connection = DriverManager.getConnection(connectionURL, "root", "root");
File f = new File(saveFile);
psmnt = connection.prepareStatement("insert into file(file_data) values(?)");
fis = new FileInputStream(f);
psmnt.setBinaryStream(1, (InputStream)fis, (int)(f.length()));
int s = psmnt.executeUpdate();
if(s>0) {
System.out.println("Uploaded successfully !");
}
else{
System.out.println("unsucessfull to upload file.");
}
}
catch(Exception e){e.printStackTrace();}
}
%> 
```

[我从这个链接引用的这段代码](http://www.roseindia.net/answers/viewqa/JSP-Interview-Questions/13176-File-upload-in-JSP.html)

```
please some buddy help ....i have to upload image file one or more may be in jsp but what problem is on web hosting server is mentioned

or if other way is possible so i will refer that...

Thank you... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:06:46.350

查看[JavaDoc 的`FileOutputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.io.File%29). 它声明 a`FileNotFoundException`被抛出“如果文件......无法创建”。

你肯定有权限问题。猜测是目录的所有者是`pasasin`，而写入文件的进程是`apache`/`tomcat`或其他。你明白了：不是你！试试看`chmod 777 /home/pasasin/public_html`它是否有效。

755 模式意味着只能读取目录，因此除非 serlvet 容器在与您的所有者相同的 uid 下运行，否则`group`将无法写入该目录。`other``./public_html`

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:06:56.787

它的明确指示是您尝试上传的文件，您没有权限。请从服务提供商处检查您的访问权限。

# html - 使用 h264/mp 4 视频作为网站背景

> ID：14123401
> 
> 赞同：0
> 
> 时间：2013-01-02T14:00:48.940
> 
> 标签：html, video, content-management-system, html5-video

我的一个客户想要一个 mp4 视频作为整个网站的视频背景。确保它在我们的 CMS 中正常工作已经成为一个皮塔饼，因为他们不希望视频在转到其他页面时重新加载。

他们发给我的文件是 1080p 和大约。100MB 大，时长 2 分钟。

有什么方法可以调整/重新缩放视频并将其用作 html5 网站中的视频背景？

我应该告诉客户它不会对用户友好，会占用带宽并且肯定会增加开发成本。

作为一般规则，我们不会在我们的代理机构建立 Flash 网站，因此这不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:08:04.460

您可以使用 html5`<video>`标记来播放该视频并通过 AJAX 完成其余的导航。

但是您需要为不支持 h264 的浏览器（如 Opera）提供不同的视频格式。我推荐 webm 作为替代方案。

您将需要缩小视频的大小，我想无论是质量还是分辨率。

对于 pre-html5 时代的浏览器，我建议使用静态图像；）

*总而言之：* 跨浏览器兼容的解决方案将是 PITA。现代浏览器具有允许这种解决方案的技术。我想这是可能的，但你必须为大约 5% 的浏览器不兼容或 CPU 太慢的用户提供备用方案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:08:23.060

为了实现浏览器兼容性，您还必须将视频转换为 Ogg Theora（这将减小它的大小，但它只能在 WebKit/Mozilla 下播放）。HTML5 视频支持缓冲，但在不同的浏览器下以不同的方式。例如，WebKit 尝试预缓冲整个视频，IE 一次预缓冲一个固定大小的块，等等。所以这在不同的浏览器中会有不同的表现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T18:56:50.587

一个网站的全屏视频：查看www.gossdekort.com的源代码 你甚至可以在视频上方添加一个菜单

# activemq - 使用 CMS 的 ActiveMQ 多主题

> ID：14123402
> 
> 赞同：1
> 
> 时间：2013-01-02T14:00:49.123
> 
> 标签：activemq, activemq-cpp

我试图通过为每个主题创建单独的会话来在同一连接中创建多个主题。主题和第一个耐用消费者都已成功创建，但在创建第二个消费者时出现错误。代码与单个主题完美配合，但我需要在同一连接中的运行时创建多个主题

以下是代码

```
 activemq::library::ActiveMQCPP::initializeLibrary();

    // create connection factory    
    auto_ptr<ConnectionFactory> connectionFactory(ConnectionFactory::createCMSConnectionFactory(brokerURI));

    // create a connection
    connection = connectionFactory->createConnection(uname,pwd,applicationId);  

    connection->setExceptionListener(this);
    // adding transport listener
    ActiveMQConnection* amqConnection = dynamic_cast<ActiveMQConnection*>( connection );
    amqConnection->addTransportListener( this );

    // create a session
    session[0] = connection->createSession( Session::AUTO_ACKNOWLEDGE );
    session[1] = connection->createSession( Session::AUTO_ACKNOWLEDGE );

    destination[0] = session[0]->createTopic(serviceTopic);
    topic[0] = session[0]->createTopic(serviceTopic);

    destination[1] = session[1]->createTopic(serviceTopic2);
    topic[1] = session[1]->createTopic(serviceTopic2);

    producer[0] = session[0]->createProducer(destination[0]);
    producer[1] = session[1]->createProducer(destination[1]);

    consumerDurable[1] = session[1]->createDurableConsumer(topic[1], applicationId, getSelector(0), false);
    consumerDurable[1]->setMessageListener(this);

    consumerDurable[0] = session[0]->createDurableConsumer(topic[0], applicationId, getSelector(1), false);
    consumerDurable[0]->setMessageListener(this); 
```

------------ 变量值 --------------

applicationId = "Test123"

getSelector(0) = "CID NOT LIKE 'Test123' AND Durability LIKE '0'"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:34:19.967

看看[这个](http://activemq.apache.org/how-do-durable-queues-and-topics-work.html)关于 ActiveMQ 的帮助页面。它解释了持久订阅如何针对某个主题起作用。特别是这个：

> JMS 规范规定 S 的标识是通过 clientID 和持久订户名称的组合来完成的。这样一来，S 使用的 JMS 连接可以在不同主题上或在具有不同选择器的同一主题上拥有许多不同的持久订阅——但 JMS 提供者可以知道要为哪个订阅保留哪个消息。

您需要为不同的消费者使用不同的 ID。

# android - 我的 tts 应用程序无法在真正的 android 设备上运行

> ID：14123410
> 
> 赞同：1
> 
> 时间：2013-01-02T14:01:14.943
> 
> 标签：android, text-to-speech

我现在正在继续使用 android 中的 tts 应用程序。它只是一个从我的收件箱中读取短信的应用程序。该应用程序在模拟器中运行顺畅，当涉及到真实设备时，它会收到消息但不会产生语音。我也应该在我的设备中下载并安装引擎吗？我不这么认为。如果有人知道答案，请提出建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T15:06:01.597

使用 USB 数据线连接您的设备，转到设置 -> 应用程序 -> 开发 -> 启用调试，使用调试器并输入日志来检查您的应用程序，然后您将收到错误消息。

# php - 奇怪的 if() 条件与 Wordpress 做相反的需要解释

> ID：14123411
> 
> 赞同：0
> 
> 时间：2013-01-02T14:01:25.170
> 
> 标签：php, wordpress, if-statement

好吧，当我在我的项目中工作时，我决定从`if ( is(home) )`WordPress 中获得一些帮助，我需要清理我的 WordPress（仅限索引）首页的页脚/页眉/正文，所以我从 wp[dot]org 获得了 Conditional /Function_Reference/is_home

```
<?php if ( is_home() ) {
    // This is a homepage
} else {
    // This is not a homepage
        get_footer();
} 
```

它没有用，我能够在首页索引页面中看到页脚，尽管它应该可以工作，因为现在一切正常，所以我将其更改为：

```
<?php if ( is_home() ) {
    // This is a homepage
        get_footer();
} else {
    // This is not a homepage
} 
```

有了这个改变，我就看不到它了，它工作得很好，那是怎么回事？

出了点问题我想我会离开它，因为它工作了，但我需要知道它是如何工作的，以及它是否会对其他页面产生影响？

PS：我检查了其他页面，是的，我可以看到页脚区域但我没有检查它们，我担心我的客户将来会遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:06:25.060

所以让你自己的几行代码来做同样的事情。

在 get_header 之前的 index.php 中...

`<?php $myvar = 'home';?>`

然后在 header.php

```
<?php if($myvar == 'home') { ?>
some code
<?php } else { ?>
some other code
<?php } ?> 
```

非常基本的例子，但很容易做到......

这假设您有其他模板文件来处理其他页面，例如类别等...

如果您只使用索引文件，仍然有可能，只需要更多的工作......

# unity3d - 如何在 Unity3d 中以编程方式在相机视图上显示图像

> ID：14123412
> 
> 赞同：0
> 
> 时间：2013-01-02T14:01:30.597
> 
> 标签：unity3d, textures

我在应用程序中工作，使用 Vuforia 库，我在其中使用相机（设备相机）。我想在相机上渲染 2d 纹理（任何 .png 或 .jpg）定义了它的坐标和大小。我试过了，但我的应用程序总是崩溃。我不知道我在做什么错。请帮助我这对我来说很棒。

`string tempPath = "/Assets/Images/119642-samsung-galaxy-note-2-picture-large.jpg";`

```
Texture2D tex = new Texture2D(400,350);
Resources.LoadAssetAtPath(tempPath, typeof(Texture2D));
renderer.material.mainTexture = tex as Texture2D; 
```

以上是我正在做的事情。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T00:50:42.117

据我所知，没有必要使用`Resources.LoadAssetAtPath`. 根据文档：

> 返回资产路径中的资源（仅限编辑器）。
> 
> 此函数在独立播放器或网络播放器中始终返回 null。这对于快速访问仅在编辑器中使用的资产很有用。

假设`renderer`您要在其上显示的 GameObject 是正确的渲染器，则此代码*应该可以*工作，假设您`tempPath`是正确的：

```
WWW www = new WWW("file://" + path);
yield www;
Texture2d texture = www.texture;
texture.Resize(400, 350);
renderer.material.mainTexture = texture; 
```

您必须使用 a`WWW`来获取实际文件，然后将其分配给实际的 Texture2d。然后您可以将其调整为您喜欢的任何宽度/高度，然后将其分配给 mainTexture。

如果这有效，请升级并接受！否则告诉我它有什么不正确的！

# string - 字符串操作，通过一组规则进行常见文件名转换（给出的示例。）

> ID：14123414
> 
> 赞同：0
> 
> 时间：2013-01-02T14:01:40.207
> 
> 标签：string, text, language-agnostic

# 语言不可知论者。

提供任何语言的解决方案，首选常用脚本语言。

处理字符串...我们将在数组中使用这 4 个作为示例。

```
examples = ["The quick brown fox jumps over the lazy dog.(JSON-CAT5).tar.gz",
            "The quick brown fox jumps over the lazy dog.(JSON-CAT5).txt",
            "The quick & swift mule, kicks the lazy dev.txt",
            "Now we-come,to.the_payoff.txt"] 
```

根据以下规则对其进行转换。

1.  无论任何其他规则如何，首字母总是大写。
2.  每个单词都大写，除非它被规则 3 或 4 覆盖。
3.  出现在白名单中的子字符串会保留大小写。在我们的例子中`["the", "JSON"]`
4.  从字符串中清除出现在黑名单中的子字符串。在我们的例子中`["-CAT5","(",")"]`
5.  匹配正则表达式的子字符串`/(\.tar)?\.[^.]*$/i`始终为小写。
6.  标点符号列表例如`[" ", "_", ",", "-"]`被转换为 ["."]
7.  多个`"."`即。`"..."`替换为单个`"."`（即挤压。）
8.  分隔符“.”、黑名单、白名单都应该可以轻松互换，只需将它们作为 vars / arrays 提供在顶部是完全可以接受的。

在这种情况下，我们最终会得到：

1.  `The.Quick.Brown.Fox.Jumps.Over.the.Lazy.Dog.JSON.txt`
2.  `The.Quick.Brown.Fox.Jumps.Over.the.Lazy.Dog.JSON.tar.gz`

下面提供了答案，希望看到其他语言的替代方案。

# 更新

向测试用例添加了更多示例字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:01:40.207

# 红宝石示例

```
#!/usr/bin/env ruby

examples = ["The quick brown fox jumps over the lazy dog.(JSON-CAT5).tar.gz",
            "The quick brown fox jumps over the lazy dog.(JSON-CAT5).txt",
            "The quick & swift mule, kicks the lazy dev.txt",
            "Now we-come,to.the_payoff.txt"]

result = []

whitelist = ["we", "to", "the", "of", "if", "a", "is", "JSON", "HTTP", "HTTPS", "HTML"] # you get the idea.
blacklist = ["-CAT5", "(", ")"]
separators = ["-", "_", ",", " "]
separator = "."

examples.each do |eg|

  extension = eg.match(/(\.tar)?\.[^.]*$/i)[0]
  eg.sub!(extension, "")
  blacklist.each{ |b| eg.gsub!(b, "") }
  separators.each{ |s| eg.gsub!(s, separator) }
  words = eg.split(".")
  words.each {|w|
    w.capitalize! if words.first == w
    unless whitelist.include? w
      w.capitalize!
    end
  }
  n = "#{words.join('.')}#{extension}".squeeze(".")
  result << n
end

puts result 
```

给我们...

```
The.Quick.Brown.Fox.Jumps.Over.the.Lazy.Dog.JSON.tar.gz
The.Quick.Brown.Fox.Jumps.Over.the.Lazy.Dog.JSON.txt
The.Quick.&.Swift.Mule.Kicks.the.Lazy.Dev.txt
Now.we.Come.to.the.Payoff.txt 
```

可能的缺点，白名单和黑名单区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:16:18.653

```
ArrayList final = new ArrayList();

String[] arr = input.split("[\\W]");

final.add(arr[0].charAt(0).toUpper() + arr[0].substring(1));

for(int i=1; i<length; i++)
{
    if(whitelist.contains(arr[i]))
    {
        final.add(arr[i]);
        continue;
    }

    if(blacklist.contains(arr[i]))
    {
        continue;
    }

    arr[i] = arr[i].charAt(0).toUpper() + arr[i].substring(1);

}

String output = "";

int i=0;
for(i=0; i<finalList.size()-1;i++)
    output += finalList.get(i) + ".";

output += finalList.get(i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T20:22:07.790

我是初学者 Perl 程序员，在这里我尝试使用 Perl 完成您的任务：

## Perl 示例：

```
#!/usr/bin/env perl

use strict;
use warnings;
use 5.010;

my @examples = (
  qq(The quick brown fox jumps over the lazy dog.(JSON-CAT5).tar.gz),
  qq(The quick brown fox jumps over the lazy dog.(JSON-CAT5).txt),
  qq(The quick & swift mule, kicks the lazy dev.txt),
  qq(Now we-come,to.the_payoff.txt)
);

my @result;

my @whitelist = ( 'we', 'to', 'the', 'of', 'if', 'a', 'is', 'JSON' );
my @blacklist = ( '-CAT5', '(',')' );
my @separators = ( '-', '_', ' ', ',' );
my $separator = '.';

foreach my $eg (@examples) {
  $eg =~ s/(\.tar)?\.[^.]*$//pi;

  my $ext = ${^MATCH};

  my $blist = join('|', map { qr/\Q$_/i } @blacklist );
  my $slist = join('|', map { qr/\Q$_/i } @separators );

  $eg =~ s/$blist//gi;
  $eg =~ s/$slist/$separator/gi;

  my @vals = split /\./, $eg;
  push my @words, ucfirst shift @vals;
  foreach my $w (@vals) {
    $w = ucfirst $w unless $w ~~ @whitelist;
    push @words, $w;
  }

  $eg = join $separator, @words;
  $eg .= $ext;
  $eg =~ s/\.\.+/\./g; # squeeze
  push @result, $eg;
}

say for @result; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T13:51:23.760

没有什么比玩 python 更好的事情了……

## Python 示例

```
import re

examples = (
  "The quick brown fox jumps over the lazy dog.(JSON-CAT5).tar.gz",
  "The quick brown fox jumps over the lazy dog.(JSON-CAT5).txt",
  "The quick & swift mule, kicks the lazy dev.txt",
  "Now we-come,to.the_payoff.txt"
)

result = []

whitelist = ( 'we', 'to', 'the', 'of', 'if', 'a', 'is', 'JSON' )
blacklist = ( '-CAT5', '(', ')' )
separators = ( '-', '_', ' ', ',' )
separator = '.'

for eg in examples:
    ext = re.search(r'(\.tar)?\.[^.]*$', eg).group(0)
    eg = eg.replace(ext, '')

    for ignore in blacklist:
        eg = eg.replace(ignore, '')

    for sep in separators:
        eg = eg.replace(sep, separator)

    vals = enumerate(eg.split('.'))

    words = [w.capitalize() if i == 0 or not w in whitelist else w for i,w in vals]
    words.append(ext)

    eg = separator.join(words)
    eg = re.sub(r'\.\.+', '.', eg) # squeeze

    result.append(eg)

for r in result:
    print r 
```

# matlab - 对所有矩阵元素应用函数

> ID：14123421
> 
> 赞同：4
> 
> 时间：2013-01-02T14:01:55.347
> 
> 标签：matlab, matrix

我想对矩阵中的每个元素应用一个函数。我编写了以下代码：

```
function p = an(x)
    p= x + 1;
end 
```

矩阵例如：

```
B = [1 2 3; 3 4 5; 6 7 8] 
```

当我尝试这样做时：

```
arrayfun(@an , B(1, :) , B(2, :), B(3, :)) 
```

我收到此错误：

> `??? Error using ==> arrayfun
> Undefined function or method 'an' for input arguments of type 'double'.`

我不明白为什么。我该如何解决？有更简单的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T14:42:21.360

### 主要问题

> `Undefined function or method 'an' for input arguments of type 'double'.`

这意味着 MATLAB 无法识别您的函数`an`。确保它`an`在一个名为 的单独 m 文件中实现`an.m`，并且它位于您当前的工作目录中。

### 附加问题

我可以看到您的`arrayfun`语法有缺陷。一旦你解决了你当前的问题，我预测你会遇到另一个错误信息：

> `??? Error using ==> an
> Too many input arguments.`

问题是该函数`an`只接受一个输入参数，但您在`arrayfun`. 相反，要么只传递一个参数，例如：

```
arrayfun(@an, B); 
```

或修改`an`以接受三个参数，例如：

```
function p = an(x, y, z)
    p = x + y + z 
```

我不确定你想要达到什么目标，所以由你来选择。

# database - 如何确定功能依赖关系

> ID：14123427
> 
> 赞同：13
> 
> 时间：2013-01-02T14:02:24.693
> 
> 标签：database, database-design, functional-dependencies

我目前正在为一个大学项目工作，现在我对功能依赖部分有点困惑。对于这个项目，我必须根据我自己的项目规范创建一个逻辑数据模型，并确定功能依赖关系。

例如，我为“用户”表提供了以下属性。
**R（user_id，用户名，regDate，类型，订阅）**

**主键：** user_id
**唯一键：**用户名
**外键：**订阅

示例数据集可能类似于：

> 1, JohnS, 01-01-2012, 管理员, NULL
> 2, PeterB, 02-01-2012, 版主, 电影
> 3, PeterA, 02-01-2012, 用户, 电影
> 4, Gary, 03-01-2012, 用户, 书籍
> 5, 艾琳, 03-01-2012, 用户, 电影
> 6, 斯坦, 03-01-2012, 用户, 电影
> 7, 艾萨克, 04-01-2012, 用户, 书籍

我不明白的部分是我如何确定功能依赖关系。我最初的感觉是有两个函数依赖，它们是：
**user_id -> username, regDate, type, subscription**
**username -> user_id, regDate, type, subscription**

但是，查看讲座幻灯片中的其他示例，我怀疑这是否正确。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T14:38:31.127

如果“用户名”既是唯一的又是必需的（唯一的而不是空的），那么它就是一个候选键。在关系建模中，一个候选键和另一个键之间没有理论上的区别。更具体地说，在关系建模中，没有理论上的理由选择一个候选键并将其标记为“主键”。一把钥匙就是一把钥匙。

所以你是对的。这里有两个函数依赖。（或 8，如果您将右侧分解为单独的列。`user_id -> username`，，`user_id -> regDate`等）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T14:41:06.623

功能依赖从理论角度定义如下（[维基百科](http://en.wikipedia.org/wiki/Functional_dependency)）：

> 给定一个关系 R，当且仅当每个 X 值都与一个 Y 值相关联时，R 中的一组属性 X 被称为在功能上确定另一组属性 Y，也在 R 中，（写作 X → Y）；则称 R 满足函数依赖 X → Y。

从技术角度来看，您正在尝试找到唯一标识其他属性的属性。作为捷径，**确定您的候选键**和依赖于它们的属性。您的示例是正确的，因为 a `username, regDate, type, and subscription`all 取决于 的值`user_id`。如果`username`是唯一的*且不*为空，则它是候选键并且还标识属性集。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-03T10:11:55.703

除了其他人所说的，如果一个属性（或一组属性）是候选键，那么*所有*属性都必须在功能上依赖它。

*   “功能依赖” A->B 仅仅意味着 B 的两个不同值永远不会与同一个 A 相关。[维基百科](http://en.wikipedia.org/wiki/Functional_dependency)上给出了稍微更正式的定义，但本质上就是这样。
*   由于键必须是唯一的，即使两个元组包含某些属性的相同值，键值也必须不同。因此，不同的值永远不会与相同的键值相关。

由于所有属性在功能上都依赖于键，因此如果存在任何*其他*功能依赖，您将自动具有[传递依赖](http://en.wikipedia.org/wiki/Transitive_dependency)并违反 3NF。因此，“非关键”依赖可以作为发现规范化错误的危险信号。

* * *

您也可以从相反的方向考虑：首先找出哪些功能依赖项在您的域中有意义，然后使用它们来确定哪些属性可以充当键。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-26T05:01:46.010

我假设您使用的是 MySQL，但如果没有，您可以在任何其他 RDBMS 中实现您的想法。

运行以下命令以获取所有表：

```
show tables; 
```

然后迭代所有表并为每个表运行以下命令：

```
show columns; 
```

FD可以描述如下：

```
Determinant -> Dependent,
Determinant = {A1, ..., Am},
Dependent = {B1, ..., Bn} 
```

其中`Ai`和`Bj`是列。您需要为`Determinant`和生成所有可能的场景`Dependent`。对于每种情况，您都需要查看是否存在至少两条单独的记录，其中行列式匹配且至少有一个依赖列不匹配。如果是，那么场景不是 FD，否则就是 FD。示例：假设 m = 3 且 n = 2：

```
select count(*) from mytable t1, mytable t2 where ((t1.A1 = t2.A1) and (t1.A2 = t2.A2) and (t1.A3 = t2.A3)) and ((t1.B1 <> t2.B1) or (t1.B2 <> t2.B2)) 
```

将返回违反 FD 规则的记录数。如果值为 0，则场景为 FD。

当然，在您的特定情况下，您可以省略几个步骤，并且您有列而不是`Ai`and `Bj`，但您希望能够理解这个想法。

# c++ - COM 自动化 Excel 2010 冻结

> ID：14123438
> 
> 赞同：0
> 
> 时间：2013-01-02T14:03:08.550
> 
> 标签：c++, visual-c++, com, ms-office

我正在以编程方式启动 Excel 应用程序。当我不使用事件侦听器（事件接收器）时，一切正常。我的问题是，当我通过连接点注册接收器时，Excel UI 冻结。更准确地说，当我在工作表上再次单击时，Excel 会冻结。如果没有注册的事件接收器，则不会发生此问题。这是接收器的代码。要将 Sink 注册到连接点，请调用 AttachToSource() 方法。我的代码是用 C++ 编写的，不使用 ATL 或 MFC。任何帮助表示赞赏！

**编辑：** Word 2010 中也出现同样的问题。那里显示了等待圈。我从“Ocidl.h”中得到 COM 定义。

```
#include "AppEventListener.h"

#include <iostream>

using namespace std;

//Constructor.
CAppEventListener::CAppEventListener() :
m_pConnectionPoint(NULL),
m_dwConnection(0)
{
   m_refCount = 0;
}

//Destructor.
CAppEventListener::~CAppEventListener()
{}

/******************************************************************************
*   IUnknown Interfaces -- All COM objects must implement, either 
*  directly or indirectly, the IUnknown interface.
******************************************************************************/ 

/******************************************************************************
*  QueryInterface -- Determines if this component supports the 
*  requested interface, places a pointer to that interface in ppvObj if it is 
*  available, and returns S_OK.  If not, sets ppvObj to NULL and returns 
*  E_NOINTERFACE.
******************************************************************************/ 
STDMETHODIMP CAppEventListener::QueryInterface(REFIID riid, void ** ppvObj)
{
   if (riid == IID_IUnknown){
      *ppvObj = static_cast<IUnknown*>(this);
   }

   else if (riid == IID_IDispatch){
      *ppvObj = static_cast<IDispatch*>(this);
   }

   else if (riid == IID_ApplicationEvents){
      *ppvObj = static_cast<IDispatch*>(this);
   }

   else{
      *ppvObj = NULL;
      return E_NOINTERFACE;
   }

   static_cast<IUnknown*>(*ppvObj)->AddRef();
   return S_OK;
}

/******************************************************************************
*  AddRef() -- In order to allow an object to delete itself when 
*  it is no longer needed, it is necessary to maintain a count of all 
*  references to this object. When a new reference is created, this function 
*  increments the count.
******************************************************************************/ 
STDMETHODIMP_(ULONG) CAppEventListener::AddRef()
{
   return ++m_refCount;
}

/******************************************************************************
*  Release() -- When a reference to this object is removed, this 
*  function decrements the reference count. If the reference count is 0, then 
*  this function deletes this object and returns 0.
******************************************************************************/ 
STDMETHODIMP_(ULONG) CAppEventListener::Release()
{
   m_refCount--;

   if (m_refCount == 0)
   {
      delete this;
      return 0;
   }
   return m_refCount;
}

/******************************************************************************
*   IDispatch Interface -- This interface allows this class to be used as an
*   automation server, allowing its functions to be called by other COM
*   objects.
******************************************************************************/ 

/******************************************************************************
*   GetTypeInfoCount -- This function determines if the class supports type 
*   information interfaces or not. It places 1 in iTInfo if the class supports
*   type information and 0 if it does not.
******************************************************************************/ 
STDMETHODIMP CAppEventListener::GetTypeInfoCount(UINT *iTInfo)
{
   *iTInfo = 0;
   return S_OK;
}

/******************************************************************************
*   GetTypeInfo -- Returns the type information for the class. For classes 
*   that do not support type information, this function returns E_NOTIMPL;
******************************************************************************/ 
STDMETHODIMP CAppEventListener::GetTypeInfo(UINT iTInfo, LCID lcid, 
                                       ITypeInfo **ppTInfo)
{
   return E_NOTIMPL;
}

/******************************************************************************
*   GetIDsOfNames -- Takes an array of strings and returns an array of DISPIDs
*   that correspond to the methods or properties indicated. If the name is not 
*   recognized, returns DISP_E_UNKNOWNNAME.
******************************************************************************/ 
STDMETHODIMP CAppEventListener::GetIDsOfNames(REFIID riid,  
                                         OLECHAR **rgszNames, 
                                         UINT cNames,  LCID lcid,
                                         DISPID *rgDispId)
{
   return E_NOTIMPL;
}

/******************************************************************************
*   Invoke -- Takes a dispid and uses it to call another of this class's 
*   methods. Returns S_OK if the call was successful.
******************************************************************************/ 
STDMETHODIMP CAppEventListener::Invoke(DISPID dispIdMember, REFIID riid, LCID lcid,
                                  WORD wFlags, DISPPARAMS* pDispParams,
                                  VARIANT* pVarResult, EXCEPINFO* pExcepInfo,
                                  UINT* puArgErr)
{
switch(dispIdMember){
   case 0x00622:
      if(pDispParams->cArgs !=2)
         return E_INVALIDARG;
      else
      {
         if(pDispParams->rgvarg[1].vt & VT_BYREF)
         {
            HandleBeforeWorkbookClose( // Call the function.
               *(pDispParams->rgvarg[1].ppdispVal),
               pDispParams->rgvarg[0].pboolVal);
         }
         else
         {
            HandleBeforeWorkbookClose(  // Call the function.
               (pDispParams->rgvarg[1].pdispVal),
               pDispParams->rgvarg[0].pboolVal);
         }
      }

   case 0x0061c:
      {
         if(pDispParams->rgvarg[1].vt & VT_BYREF)
         {
            HandleSheetChange( // Call the function.
               *(pDispParams->rgvarg[1].ppdispVal),
               *(pDispParams->rgvarg[0].ppdispVal));
         }
         else
         {
            HandleSheetChange(  // Call the function.
               pDispParams->rgvarg[1].pdispVal,
               pDispParams->rgvarg[0].pdispVal);
         }
      }
      break;
   }
   return S_OK;
}

/******************************************************************************
*  HandleBeforeWorkbookClose -- This method processes the BeforeWorkbookClose
*  event for the application attached to this event handler.
******************************************************************************/ 
STDMETHODIMP CAppEventListener::HandleBeforeWorkbookClose( IDispatch* xlBook, 
                                                  VARIANT_BOOL* fCancel )
{
  cout << "HandleBeforeWorkbookClose\n" << endl;
   HRESULT hr = S_OK;
   return hr;
}

/******************************************************************************
*  HandleSheetChange -- This method processes the SheetChange event for the 
*  application attached to this event handler.
******************************************************************************/ 
STDMETHODIMP CAppEventListener::HandleSheetChange( IDispatch* xlSheet, 
                                                  IDispatch* xlRange)
{
   cout << "HandleSheetChange\n" << endl;
   HRESULT hr = S_OK;
   return hr;
}

/******************************************************************************
*  AttachToSource -- This method attaches to an event source.
******************************************************************************/ 
STDMETHODIMP CAppEventListener::AttachToSource( IUnknown* pEventSource )
{
   HRESULT hr = S_OK;

   IConnectionPointContainer* pCPC = NULL;
   hr = pEventSource->QueryInterface( IID_IConnectionPointContainer, 
      (void**)&pCPC );
   if (SUCCEEDED(hr)){

      hr = pCPC->FindConnectionPoint( IID_ApplicationEvents, 
         &m_pConnectionPoint );
      if (SUCCEEDED(hr)){

         hr = m_pConnectionPoint->Advise( this, &m_dwConnection );
      }
      pCPC->Release();
   }

   return hr;
}

/******************************************************************************
*  DetachFromSource -- This method detaches from an event source.
******************************************************************************/ 
STDMETHODIMP CAppEventListener::DetachFromSource()
{
   HRESULT hr = S_OK;
   if (m_pConnectionPoint != NULL){
      m_pConnectionPoint->Unadvise( m_dwConnection );
      m_pConnectionPoint = NULL;
   }
   return hr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:14:57.853

使用**CoInitializeEx(NULL, COINIT_MULTITHREADED)**并添加**_WIN32_DCOM**作为预处理器指令解决了这个问题。

# ios - iOS：下载大文件并在例如解密。接收数据

> ID：14123444
> 
> 赞同：1
> 
> 时间：2013-01-02T14:03:29.437
> 
> 标签：ios, encryption, asihttprequest, afnetworking

我的任务是提高文档共享应用程序的安全性。服务器上的文件需要加密，当应用程序下载文件时，如果解密确实与例如文件下载同时发生，那将是可取的。`didReceiveData`. 一些客户的视频文件略低于 500 MB 的系统限制。

现在文件是用旧的[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)下载的，因为它内置了对恢复下载的支持 ( `setAllowResumeForFileDownloads`)。

我发现了这个出色的框架[RNCryptor](https://github.com/rnapier/RNCryptor)，它支持异步解密。这是使用 pure 的示例`NSURLConnection`：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse (NSURLResponse*)response {
    self.decryptor = [[RNOpenSSLDecryptor alloc] initWithSettings:kRNCryptorAES256Settings password:password handler:^(RNCryptor *cryptor, NSData *data) {
        [self writeData:data];

        if (cryptor.isFinished){
            [self finishAndPlayVideo];
        }
    }];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.decryptor addData:data];
} 
```

问题是`RNCryptor`它`NSMutableData *inData`附加了所有数据，但这会产生巨大的内存问题。数据需要像[RNOpenSSLCryptor.m](https://github.com/rnapier/RNCryptor/blob/RNCryptor-1.1/RNCryptor/RNOpenSSLCryptor.m#L185)的旧版本 1.1 一样流过流。

有没有人有解决方案来操纵`RNCryptor`，`ASIHTTPRequest`（或`AFNetworking`）代码来同时下载和解密大文件？

# 更新1：

正如@warrenm 指出的那样， [NSMutableData](https://github.com/rnapier/RNCryptor/blob/master/RNCryptor/RNCryptor.m#L35)`RNCryptor`上的类别应该有助于内存使用。我不知道这是否是罪魁祸首。

# 更新 2：

我找到了罪魁祸首。我正在准备我的测试项目以使其适合其他人运行。我确实将下载网址从快速的企业服务器更改为保管箱，突然间内存使用量下降了。这意味着应用程序的下载速度比它解密数据的速度要快，从而建立了一个缓冲区。我从不认为这是一个问题。感谢@warrenm 引领潮流。

# 测试项目

[https://dl.dropbox.com/u/195602/stackoverflow/OnlineDecryptTest.zip](https://dl.dropbox.com/u/195602/stackoverflow/OnlineDecryptTest.zip) 切换常量`kUseFastServer`并查看不同`kUseEncryption`的`ViewController.m`内存使用情况。

# 解决方案

解决方案是使下载和解密 2 步过程或使用`NSInputStream`/做一些魔术`NSOutputStream`。我更喜欢后者，但我不知道该怎么做。

# android - Textview 内容来自 Webservice 的一个 Textview 中的不同字体

> ID：14123445
> 
> 赞同：0
> 
> 时间：2013-01-02T14:03:44.277
> 
> 标签：android

我的应用程序是一个马拉雅拉姆语新闻门户网站，在我使用的那个应用程序中，`MLW-Panini.ttf`它是马拉雅拉姆语字体。
问题是在一个文本视图本身中，我必须同时显示马拉雅拉姆语和英文文本。

如果我使用该字体，英文内容将无法正确显示。
如果内容仅在马拉雅拉姆语中，它可以正常工作。考虑到附图，红线内的内容应该是英文的，但那是马拉雅拉姆语。

绿线内的内容是马拉雅拉姆语，这很好。请求帮助...

```
TextView tv = new TextView(NewsDetail.this);
Typeface font1  = Typeface.createFromAsset(getAssets(),"fonts/MLW-Panini.ttf");
tv.setTypeface(font2);
tv.setText(Html.fromHtml(arrList.get(i).get("news")));` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T08:31:44.490

你可以这样做。

```
TextView tv = new TextView(NewsDetail.this);
Typeface font1  = Typeface.createFromAsset(getAssets(),"fonts/MLW-Panini.ttf");
tv.setTypeface(font1);

String text = "malayalam_text english_text";
Spannable s  = new SpannableString(text);
s.setSpan(new TypefaceSpan("sans"), "malayalam_text ".length(), "malayalam_text english_text".length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
tv.setText(s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:13:38.327

正如@njzk2 所说，您可以尝试同时支持这两种语言，

至于为文本视图设置字体，请查看[这个](https://stackoverflow.com/a/2888708/1080954)StackOverFlow 问题。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T07:11:15.173

使用以下代码：

对于您的第一个文本视图：

```
TextView tv = new TextView(NewsDetail.this);
Typeface font1  = Typeface.createFromAsset(getAssets(),"fonts/MLW-Panini.ttf");
tv.setTypeface(font1);
tv.setText(Html.fromHtml(arrList.get(i).get("news"))); 
```

对于您的第二个文本视图：

```
TextView tv1 = new TextView(NewsDetail.this);
Typeface font2  = Typeface.createFromAsset(getAssets(),"fonts/secondfont.ttf");
tv.setTypeface(font2);
tv.setText(Html.fromHtml(arrList.get(i).get("news"))); 
```

您可以使用在实用程序类中返回 Typeface 的定义静态方法，而不是一次又一次地创建字体。通过这种方式，您可以减少 Typeface 对象的数量，并且可以始终保持唯一的字体。

# python - django中的代码优化

> ID：14123447
> 
> 赞同：0
> 
> 时间：2013-01-02T14:03:54.637
> 
> 标签：python, django

在 views.py 我有 2 个视图，它们都有两个功能：

```
def A():
    some code..
    def my_def:
        some code

def B():
     some code..
     def my_def:
        some code 
```

我试图将 my_def 定义为 A 或 B：

```
def my_def():
    some code

def A():
    some code
    var = my_def()

def B():
    some code
    var = my_def() 
```

但它不起作用。如何解决这个问题？谢谢

# jquery - JQuery 切换内容

> ID：14123451
> 
> 赞同：1
> 
> 时间：2013-01-02T14:04:10.727
> 
> 标签：jquery, toggle, slidedown, slideup

我正在尝试制作一个简单的 slideUp slideDown 内容

到目前为止，我有以下代码：

```
<style type="text/css">
    ul {
        list-style: none;
        margin: 0;
        padding: 0;
    }
    li {
        padding-left: 20px;
    }

    a {
        color: #000000;
        cursor: pointer;
        text-decoration: none;
    }
    a:hover {
        cursor:pointer;
    }
    .first {
        font-family: Georgia, "Times New Roman", Times, serif;
        font-size: 16px;
        font-weight: bold;
        color: #C00;
    }
    .text {
        font-family: Georgia, "Times New Roman", Times, serif;
        font-size: 14px;
        font-style: italic;
        font-weight: lighter;
        color: #666;
    }
    .subhead {
        font-family: Georgia, "Times New Roman", Times, serif;
        font-size: 14px;
        font-weight: bold;
        color: #F90;
    }
    </style>
    <script  language="JavaScript" type="text/JavaScript" src="js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
    $(function() {

        $('li > ul').each(function(i) {
            // Find this list's parent list item.
            var parent_li = $(this).parent('li');
            var siblings_li = $(this).parent('li').siblings();

            var sub_ul = $(this).remove();
            parent_li.wrapInner('<a/>').find('a').click(function() {
                // Make the anchor toggle the leaf display.
               if (sub_ul.is(':hidden')){
                //siblings_li.slideUp('200');
                sub_ul.slideDown('200');}
                else {
                    sub_ul.slideUp('200');}
            });
            parent_li.append(sub_ul);
        });

        // Hide all lists except the outermost.
        $('ul ul').hide();
    });
    </script>
    </head>

    <body>
    <ul>
      <li><span class="first">College Programs
        </span>
        <ul>
            <li class="text">We have a variety of programs. more more more more more more more more more more more</li>
        </ul>
      </li>
      <li><span class="first">Programs
        </span>
        <ul>
            <li class="text">Each of our Colleges have various ..... COE shown below.</li>
          <li><span class="subhead">Computer Science
            </span>
            <ul>
              <li>Computer engineers analyze, design, operate and manage complex digital hardware, computer networks and large-scale software systems.</li>
            </ul>
          </li>
          <li><span class="subhead">Electrical Engineering
          </span>
            <ul>
              <li>Electrical engineers influence various sectors of society by analyzing, designing and implementing a wide range of systems.</li>
            </ul>
          </li>

        </ul>
      </li>
      <li class="first">More Info</li>
    </ul> 
```

一切正常，但是我希望这样当我单击一个标题时，其他标题就会崩溃。即，一次只能看到一个内容。默认情况下，它们都应该被最小化（隐藏）。我的问题是如何制作它，以便在显示其中一个内容时最小化所有其他内容。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:08:13.000

你为什么不使用[jQuery Accordion](http://jqueryui.com/accordion/)来解决你的问题。它有很多方便的配置参数（例如`animate`动画更改面板）。

[该库](http://jqueryui.com/accordion/)已被数千人使用了相当长的一段时间，因此您可以确信它经过了良好的测试并且应该可以正常工作。

**编辑**

您可以添加`accordion`到顶级元素以及子元素。以你为例：

如果`id="topaccordion"`向根`<ul>`元素 ( `<ul id="topaccordion">`)添加一个`id="subaccordion"`，`<li id="subaccordion"><span class="subhead">Computer Science</span>`然后您的 JavaScript 函数可能如下所示：

```
$('#subaccordion').accordion();
$('#topaccordion').accordion();​ 
```

我已经测试过了，它工作正常。您可能需要对 CSS 进行一些处理（例如，在将鼠标悬停在“可点击”元素上时更改鼠标光标等），但从功能的角度来看`accordion`可以完成这项工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:16:36.237

只需在显示所选项目之前隐藏所有项目。

```
<script>
$(function() {

    // Cache commonly used selectors
    var uls = $('ul ul');

    $('li > ul').each(function(i) {

        // Find this list's parent list item.
        var parent_li = $(this).parent('li');
        var siblings_li = $(this).parent('li').siblings();

        var sub_ul = $(this).remove();
        parent_li.wrapInner('<a/>').find('a').click(function() {

            // Hide all items first
            uls.slideUp('200');

            // Make the anchor toggle the leaf display.
            if (sub_ul.is(':hidden')) {
                //siblings_li.slideUp('200');
                sub_ul.slideDown('200');
            }
            else {
                sub_ul.slideUp('200');
            }
        });
        parent_li.append(sub_ul);
    });

    // Hide all lists except the outermost.
    uls.hide();
});​
</script> 
```

演示：http: [//jsfiddle.net/MmG7a/](http://jsfiddle.net/MmG7a/)

# nlp - 文档分类的最佳特征选择算法

> ID：14123453
> 
> 赞同：0
> 
> 时间：2013-01-02T14:04:21.070
> 
> 标签：nlp, information-retrieval, text-mining, tf-idf, feature-selection

我正在做一个文档分类项目。我正在使用 tf-idf 和质心算法。但我需要一本字典，用于使用该算法。我曾尝试获取信息以获取字典，但我认为它还不够满意。你有什么比信息增益更好的特征选择算法的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:53:28.503

以我的经验，没有最好的特征选择方法。适用于一个数据集的算法可能对其他数据集表现不佳，因此这主要是一个实验性问题。尝试一些，看看哪些适合您的问题设置。[George Forman](http://www.hpl.hp.com/personal/George_Forman/Publications.html)已经发表了几篇关于这个主题的文章，有空的时候值得一读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:39:03.943

还值得指出的是，在许多情况下，特征选择不是必需的。只需使用所有单词，以及对大型特征空间具有鲁棒性的分类器（例如线性 SVM/L1 正则化逻辑回归）。要解决的问题少了一个，而且它是您需要明确证明不使用的基线。

# asp.net - 将数据库项目导出为 SQL 脚本

> ID：14123459
> 
> 赞同：5
> 
> 时间：2013-01-02T14:05:01.027
> 
> 标签：asp.net, visual-studio-2010, tsql, database-schema

有人向我发送了一个网络应用程序，看看我是否可以帮助他们重新托管它。我没有在 Visual Studio 中使用过数据库项目，看起来这个应用程序使用 Visual Studio 中的数据库项目，我正在研究如何将其导出为 SQL 脚本，以便我可以在 SQL Server Management Studio 中添加创建它。我已经读到我可以通过转到数据库项目的属性并单击“部署”选项卡来做到这一点，但是我似乎没有部署选项卡！我猜它归结为 Visual Studio 的版本。我使用的是 2010。如何将项目导出为 SQL 脚本文件？

![在此处输入图像描述](../Images/a65ea4f01e5c2f3f12d314ed43346ee1.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T17:05:43.903

以下步骤可能会有所帮助：

您可以尝试设置选项卡。环境取决于数据库项目类型。在我的一个项目中，我有一个名为 Project Setting 的选项卡，它让我可以选择创建 SQL 脚本（见下图）![在此处输入图像描述](../Images/8ea8c6a32bb6ead14c59ee01a5d58ce1.png)

或在其他版本的 Visual Studios 中
1\. 打开项目/解决方案并右键单击项目并选择属性或双击属性文件夹
2\. 在您的环境中出现一个新窗口，显示所有项目属性。现在单击部署选项卡
3\. 在部署操作下，从下拉列表中选择“创建部署脚本 (.sql)”
4\. 点击保存按钮并关闭此窗口
5\. 从构建菜单中选择构建解决方案，然后选择“部署 [解决方案名称]"
6\. 部署脚本后，它应该在 SQL-debug 文件夹下可用，
例如：[path to my project]\sql\debug\script.sql

# algorithm - 用于估计分数的分类算法

> ID：14123463
> 
> 赞同：1
> 
> 时间：2013-01-02T14:05:12.547
> 
> 标签：algorithm, machine-learning, classification

我想检测文本文章的某种情感方向。这个问题似乎与分类问题有关，但不是检测每个类别的概率（负、正、中性），我想知道一些总体评分，`0.76`然后将我的文章分类到涵盖预定义范围的类别。（*例如 [0.75...1) 是正数*）。

哪些机器学习算法适合此类问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:32:38.647

据我所知，您可以使用以下两种方法之一来做到这一点：

1.  使用分类算法，对于它给你的二进制分类器 `(p,1-p)`- 二进制分类器给它的“机会”在哪里`p`是“真实的”。
2.  使用线性回归（或其他数值 ML 算法），并给出它返回给您的分数。在训练算法时，您将“pos”标记为 1，将“neg”标记为 0。

就个人而言，我会选择[SVM](http://en.wikipedia.org/wiki/Support_vector_machine)的第一种方法，因为我知道它可以很好地处理大型特征空间 - 文本问题很可能就是这种情况。

# batch-file - 如何批量划分可能的大数字？

> ID：14123466
> 
> 赞同：3
> 
> 时间：2013-01-02T14:05:17.710
> 
> 标签：batch-file, progress, division

我的问题与我正在编写的脚本有关，该脚本用于使用批处理文件自动备份多个文件夹和子文件夹。
现在我正在尝试以可读格式实现某种进度指示器，最好是百分比。
首先，它使用以下命令读取要复制的总大小：

```
FOR /R "C:\Users\XXX" %%F IN (*.*) DO (
set /a overall=!overall!+%%~zF
) 
```

对于我的测试批次中的特定文件夹，这将返回 266,173,879 字节的大小。
但是，如果我尝试在 for 循环之后将此数字除以 1024（对于千字节）

```
set /a overall=%overall%/1024 
```

Batch 返回的内容类似于“/1024 不能在语法上在这里使用”（您可能知道正确的翻译，我的是德语）。
我尝试添加/删除括号和空格，但我不断收到相同的错误。

我的语法有什么问题，我蒙着眼睛看不到吗？
如果不是，您如何调用 C++ .exe 提供 %overall% 的值以分配给 C++ 变量？（C++ 是我对基本知识知之甚少的唯一其他编程语言，PowerShell 不是一个选项，它必须是常规的 Windows Batch）

完整的相关代码：

```
FOR /R "C:\Users\XXX" %%F IN (*.*) DO (
set /a overall=!overall!+%%~zF
)

set /a overall=%overall%/1024

FOR /R "C:\Users\XXX" %%F IN (*.*) DO (
xcopy "%%F" "E:%%~pF" %parameter%>nul
cls
echo Copying... Progress: !size! of !overall! KB copied.
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:04:39.480

这是一些关于批处理文件及其数学限制的好信息。该页面还包含一些关于如何最好地处理这些限制的信息。

> 批处理数学有一个严重的限制：它只能处理 32 位整数。 **[`http://www.robvanderwoude.com/battech_math.php`](http://www.robvanderwoude.com/battech_math.php)**

其中未签名为**4,294,967,295**，签名为**-2,147,483,648**到**2,147,483,647**。

* * *

**[`robocopy`](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)**为简单起见，如果您使用的是 Windows 2003/XP 或更新版本，您可能只想研究一下。请注意，您必须安装**[Windows 资源包](http://www.microsoft.com/en-us/download/details.aspx?id=17657)**（适用于 XP）才能添加 robocopy 工具。有关所有功能和日志记录选项，请参阅 robocopy 链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:14:28.793

我不知道批处理如何处理数字，但我认为使用 C++ 会是更好的选择，因为您可以使用 an`int`等`long`来处理您需要的任何数字。

您可以使用将您的号码传递给您的 C++ 应用程序

```
yourcpp.exe !overall! 1024 
```

并使用`main`'s 参数将它们取出并将它们分开（我的 C++ 不是很好，但应该这样做）

```
int main(int argc, char* argv[]) {
double n = (double)argv[0]/(double)argv[1];
return 0;
} 
```

然后你可以按照你的意愿存储它，也许[输出到一个文本文件](http://www.cplusplus.com/doc/tutorial/files/)，你可以使用批处理文件读取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:15:40.980

该错误表明表达式存在语法错误。您尝试设备的数字是 2.6 亿，这在批处理可以处理的 32 位数字的最大精度范围内是安全的。

我认为问题在于该值实际上是`266,173,879`，包括逗号。根据您的本地化设置，分区可能会故障转移这些字符。

如果我尝试`266,173,879/1024`，它总是返回`0`，这不好。如果我尝试`266.173.879/1024`，它会显示“缺少操作员”，这也不对。

另一种可能性是`%overall%`第一次没有得到值。这使得表达式看起来像

```
set /a overall=/1024 
```

那当然是 invalid 并返回 error `missing operand`，这与上面提到的略有不同`missing operator`。

如果认为最安全的事情是首先确保 %overall% 有一个值，然后尝试从字符串中删除逗号。

之后它应该工作：

```
C:\>set /a overall=266173879/1024
259935 
```

请注意，当您的目录大于 2 GB 时，您会遇到麻烦。

# php - 如果字段的值高于指定的值，则更新 sql 表字段

> ID：14123468
> 
> 赞同：2
> 
> 时间：2013-01-02T14:05:24.997
> 
> 标签：php, mysql

`rank`我有一个包含一列的表
`rank
1
2
3
4
5
6
7
8`

当我删除数字 5 时，我希望 5 以上的数字减少 1 个数字。所以 6=5 7=6 8=7

`$start_rank = singleSelectQuery('SELECT rank FROM menu WHERE menuID='.$menuID.'');
$update_rank = Query("UPDATE menu SET rank='rank - 1' WHERE partnerID=". $partnerID ." AND rank>".$start_rank['rank']);`

这段代码不更新数字，我不知道我做错了什么：）
哦，我没有收到任何错误......
我做错了什么？

**编辑**
当我回显 update_rank 我得到：
`UPDATE menu SET rank='rank - 1' WHERE partnerID=1 AND rank>5)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:08:07.853

您的语法错误：`rank='rank - 1'`

应该

`rank=rank - 1`.

领导`.")"`也不应该在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:07:33.657

你可以试试这个-

```
update menu set rank=(rank - 1) where rank > 5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:08:06.707

假设排名是一个整数字段，你不应该引用你的计算`rank-1`

```
 UPDATE menu SET rank= rank - 1 WHERE .... 
```

# java - struts 2中的分页

> ID：14123470
> 
> 赞同：1
> 
> 时间：2013-01-02T14:05:30.517
> 
> 标签：java, hibernate, struts2

我需要实现一个分页解决方案，使用**Struts2**进行客户端显示并使用**休眠**作为持久层。由于我的数据库有很多记录，我只需要在给定时间加载特定数量的记录（每页 6 条记录）并在结果表下显示用户分页数。当用户单击特定数字时，我需要从数据库中获取特定数据并在 struts UI 中更新它。[我可以看到许多](http://www.roseindia.net/struts/struts/struts2.2.1/paginationinstruts.html) 需要整个数据列表来创建显示 UI 的示例。无论如何，我可以使用这种方法实现我的要求吗？如果没有，谁能告诉我一个实现这一点的示例方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:26:51.517

该问题可以通过在 displaytag 表中添加以下属性来解决。 `partialList="true"` `size="resultSize"`. 这里的**resultSize**是你在动作类中分配结果的总行数的变量。[更多信息可以在这里找到](http://www.displaytag.org/1.2/tut_externalSortAndPage.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T15:36:22.133

如果您一次只想获取 6 个结果，请使用：

```
Query query = session.createQuery("from EntityName");
query.setMaxResults(6); 
```

此外，对于 UI，您可以使用[displaytag](http://displaytag.sourceforge.net/11/tut_externalSortAndPage.html)。它具有内置的分页功能。此外，如果您设置 pagesize="6" 并设置 partialList="true"，它一次只会获取 6 个结果。我想，也没有必要使用 setMaxResults() 方法。

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:10:22.513

使用 Hibernate，您可以指定类似

```
if (offset >= 0) 
{
    query.setFirstResult(offset);
}
if (size > 0) 
{
    query.setMaxResults(size);
} 
```

因此，根据页码单击，您可以从数据库中获取那么多记录。

# asp.net-mvc - System.Web.Razor - 奇怪的问题

> ID：14123471
> 
> 赞同：0
> 
> 时间：2013-01-02T14:05:30.440
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在开发一个 MVC 4 应用程序（即 System.Web.Razor 版本 2.0.0.0）。

我已经从这个应用程序中引用了外部程序集（它引用了 System.Web.Razor 版本 1.0.0.0）。

我从该程序集的 NuGet 包中收到了 System.Web.Razor v 1.0.0.0，因此在我的 MVC 应用程序的根目录中添加了一个文件夹名称“\Dependency”，并在 web.config 的部分中添加了以下内容。

```
<dependentAssembly>
    <assemblyIdentity name="System.Web.Razor" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <codeBase version="1.0.0.0" href="/Dependency/System.Web.Razor.dll"/>
  </dependentAssembly> 
```

这在我的开发环境中正常工作。

但是在生产环境中，它给了我一个错误

```
"Could not load file or assembly 'System.Web.Razor, Version 1.0.0.0". 
The system could not find the file specified. 
```

我检查了生产环境，可以在 Dependency 文件夹中看到“System.Web.Razor”版本 1.0.0.0，而且生产服务器上的 web.config 包含我上面显示的绑定。

我记得，我早些时候解决了这个问题，但它现在正在发生，我想永久地摆脱它。

知道如何处理这个问题吗？

谢谢

尼尔曼

PS 几点补充——

1.  引用 System.Web.Razor 版本 1.0.0.0 的外部程序集是 RazorEngine 版本 3.0.8

2.  构建是通过 MS Build 生成的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T03:24:17.460

您不应尝试在项目中同时引用 System.Web.Razor.dll 的版本 1 和版本 2；它们有许多重复的类和命名空间名称，不能以这种方式一起使用。

但是，您看到的错误没有用或不准确。我将调查为什么会显示此错误并为此提交错误。

同时，您是否联系过引用版本 1 的软件包的所有者？如果存在硬编码的版本依赖关系，则意味着您或其他正在创建 Razor v2 应用程序的用户无法使用该包。

# javascript - removeItem 和 delete 的区别

> ID：14123482
> 
> 赞同：5
> 
> 时间：2013-01-02T14:06:16.293
> 
> 标签：javascript, local-storage

> **可能重复：**
> [从 localStorage 中删除：我应该使用 delete 还是 .removeItem？](https://stackoverflow.com/questions/6906494/deleting-from-localstorage-should-i-use-delete-or-removeitem)

和有什么区别

```
localStorage.removeItem("my_variable_in_storage") 
```

和

```
delete(localStorage.my_variable_in_storage) 
```

除此之外，第一个返回“未定义”和第二个真正的布尔值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:02:40.043

你应该使用`localStorage.removeItem()`. 虽然删除可能有效，但它不是规范的一部分，它现在对您有效可能只是一个幸运的巧合。

# sql - 在 SQL 中，HAVING 是在 SELECT 之前还是之后处理的？

> ID：14123485
> 
> 赞同：4
> 
> 时间：2013-01-02T14:06:24.593
> 
> 标签：sql, sas

我惊讶地发现以下工作：

```
 SELECT name, height * weight as inchpounds
    FROM sashelp.class 
    HAVING inchpounds > 5000; 
```

因为我认为 HAVING 子句是在 SELECT 子句之前严格处理的。这实际上是我的错误假设吗？或者这是 SAS 的 SQL 实现所特有的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:20:48.240

严格来说，如果我没记错的话，SQL 标准的define`HAVING`子句要在`SELECT`子句之前处理。因此，在 SELECT 中定义的别名不能在`HAVING`子句中使用。

请参阅我在相关问题中的回答：**[在 where 子句中使用“case expression column”来](https://stackoverflow.com/questions/6545664/using-case-expression-column-in-where-clause/6545685#6545685)**获取处理语句的顺序`SELECT`，即：

```
FROM -> WHERE -> GROUP BY -> HAVING -> SELECT -> ORDER BY 
```

因此，在大多数 SQL 实例中，该查询将产生错误。MySQL 是我知道的一个例外，它允许偏离标准（并且在子句中`SELECT`也允许使用别名）。`GROUP BY`

正如评论中提到的@a_horse_with_no_name，查询在大多数 SQL 产品中也会因为另一个原因而失败：`HAVING`没有意味着所有行都存在聚合，因此在 the和子句`GROUP BY`中只允许聚合函数。`HAVING``SELECT`

* * *

查看[SAS SQL 文档和示例](http://support.sas.com/documentation/onlinedoc/91pdf/sasdoc_91/base_sqlproc_6992.pdf)后，您在上面发布的查询似乎在 SAS SQL 中有效，并按以下方式执行（在标准 SQL 中）：

```
SELECT name, height * weight AS inchpounds
FROM sashelp.class 
WHERE height * weight > 5000; 
```

如果我理解正确，您也可以将聚合函数与非聚合列混合，如下所示：

```
SELECT name, height, 
       MAX(height) AS max_height
FROM sashelp.class ; 
```

这将被评估为（在标准 SQL 中）：

```
SELECT name, height, 
       MAX(height) OVER () AS max_height
FROM sashelp.class ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:19:34.913

SQL 标准指定解释子句的顺序，而不是它们的执行顺序。实际上，这意味着`having`子句在 之后进行解析`select`，因此它们可以使用`select`语句中定义的变量。SAS SQL 与其他方言不同。您可以在子句中使用`select`变量。`where`

SQL 引擎可以根据自己的喜好自由地实际运行查询。但是，您的问题不是关于运行查询，而是关于解析它。

使用`having`不带 a 的子句`group by`通常是值得怀疑的。但是，我相信它应该适用于任何方言。唯一的问题是返回 0 行还是 1 个摘要行。

您的特别查询有效是令人惊讶的。在大多数 SQL 方言中，您会收到错误消息，因为该`having`子句将暗示聚合，而 中的值`select`不在聚合函数中。唯一可行的其他方言是 MySQL，因为它有一个（错误）功能，称为隐藏列。与其他方言相比，SAS SQL 与标准 SQL 有点远。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T15:05:10.803

我不能说 SQL“标准”，但就 SAS 实现而言，`WHERE`和`HAVING`子句之间的唯一区别是“何时”应用它们。 `WHERE`子句适用于创建中间结果（构建包含语句中列出的列的临时表`SELECT`），`HAVING`子句控制将哪些行写入最终表。

或者，可以在语句中使用`CALCULATED`关键字：`WHERE`

```
SELECT name, height * weight as inchpounds
FROM sashelp.class 
WHERE CALCULATED inchpounds > 5000; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T14:08:55.247

> 这实际上是我的错误假设吗？

它可能是假的。查询计划器将根据数据库拥有的数据和统计信息来决定如何运行查询。

考虑以特定顺序运行的不同子句有助于编写和推理查询，但这并不是大多数 SQL 数据库的实际工作方式。

# android - Android上的多屏设计

> ID：14123488
> 
> 赞同：0
> 
> 时间：2013-01-02T14:06:40.330
> 
> 标签：android, android-layout, android-screen-support, android-screen, multiscreen

我想为多个屏幕分辨率设计一些 android 布局。例如我想为按钮设置位置。它必须设置在每个屏幕尺寸的布局底部。我该如何设计它？感谢关注。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/arayuz" >

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="50dp" />

    <Spinner
        android:id="@+id/spinner2"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/spinner1"
        android:layout_below="@+id/spinner1"
        android:layout_marginTop="25dp" />

    <Spinner
        android:id="@+id/spinner3"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/spinner2"
        android:layout_below="@+id/spinner2"
        android:layout_marginTop="25dp" />

    <Spinner
        android:id="@+id/spinner4"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/spinner3"
        android:layout_below="@+id/spinner3"
        android:layout_marginTop="25dp" />

    <Button
        android:id="@+id/button1"
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_below="@+id/spinner4"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="25dp"
        android:background="@drawable/custom_button"
        android:text="@string/ara"
        android:textColor="#efefef"
        android:textSize="18dp" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:13:08.373

只需使用 android:layout_alignParentBottom 和 android:layout_centerHorizo​​ntal 作为按钮，它将在屏幕底部居中显示

```
 <Button
        android:id="@+id/button1"
        android:layout_width="100dp"
        android:layout_height="40dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="25dp"
        android:text="asdad"
        android:textColor="#efefef"
        android:textSize="18dp" /> 
```

# gcc - 在 ubuntu 上安装 gcc 4.1.0

> ID：14123489
> 
> 赞同：2
> 
> 时间：2013-01-02T14:06:42.063
> 
> 标签：gcc, ubuntu

我有最新版本的`ubuntu`，但版本`gcc`比我想要的要高。我如何在此构建`gcc 4.1.0`或安装`gcc 4.1.0`。我没有找到构建步骤`gcc 4.1.0`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:22:24.943

以下是构建 gcc 的步骤：

[http://gcc.gnu.org/install/](http://gcc.gnu.org/install/)

请注意，虽然“它指的是当前的开发源，但源中包含特定发布版本的说明”。

这是一个典型的*配置、制作、制作安装过程。最重要的配置标志可能是`--enable-languages`. 当然`--prefix`。`--program-suffix=-4.1`也会导致生成的可执行文件被称为 gcc-4.1 而不是 gcc 。先决条件列表可能看起来很吓人，但其中大部分是可选的，尤其是仅针对 C/C++ 构建时。

[*] 好的，不是那么典型：JonathanWakely 在下面的评论中指出的另一个警告是你不应该在源目录中构建 gcc，因为它不受支持，所以：

（获得所有先决条件后）

```
[gcc-src-dir] $ cd ../my-build-dir
[my-build-dir] $ ../gcc-src-dir/configure $CONFIG_FLAGS
[my-build-dir] $ make
[my-build-dir] $ make install 
```

他指着他写的一个维基页面，它将引导您完成整个过程。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-19T11:33:21.830

我在 ubuntu 上安装 gcc 4.1.2 时遇到了一些问题（在我的情况下是 12.04）。这个脚本为我排序：

```
#!/bin/tcsh

if ($#argv != 1) then
    echo "Synopsis: $argv[0] <install_dir>"
    exit(-1)
endif

setenv GCCINSTALL $argv[1]
setenv LIBRARY_PATH /usr/lib/x86_64-linux-gnu
setenv SRC ~/gccSrc

mkdir -p $SRC
cd $SRC
wget http://gcc.cybermirror.org/releases/gcc-4.1.2/gcc-4.1.2.tar.gz
tar xvf gcc-4.1.2.tar.gz
cd gcc-4.1.2
mkdir build
cd build
../configure --prefix=${GCCINSTALL} --disable-multilib
grep 4.1.2/missing Makefile
sed -i "s#${SRC}/gcc-4.1.2/missing##" Makefile
grep 4.1.2/missing Makefile
make bootstrap
make install 
```

# python - 通过自定义管理器计算对给定内容类型的评论

> ID：14123491
> 
> 赞同：0
> 
> 时间：2013-01-02T14:06:47.020
> 
> 标签：python, django

我试图将评论计数注释到模型的查询集。

我可以这样做，并且它可以工作：

entry_type 是一个内容类型对象。

```
popular_posts = Post.objects.all().annotate(\
        comment_count=Sum("id")).extra(select={
            'comment_count': """SELECT COUNT(*) FROM django_comments
                WHERE django_comments.object_pk = Blogger_post.id
                AND django_comments.content_type_id = %s"""
        }, select_params=(entry_type.id,)).order_by('-comment_count') 
```

但是，当我尝试

```
popular_posts = Post.custom_manager.all()

#custom_manager
class PostManager(models.Manager):
    def get_query_set(self):
    return super(PostManager,self).get_query_set().all().annotate(\
            comment_count=Sum("id")).extra(select={
                'comment_count': """SELECT COUNT(*) FROM django_comments
                    WHERE django_comments.object_pk = Blogger_post.id
                    AND django_comments.content_type_id = %s"""
            }, select_params=(entry_type.id,)).order_by('-comment_count') 
```

有一个comment_count，但它不是预期值。

我究竟做错了什么？

编辑：我仍然不知道这是什么问题，但这有效

```
class PostManager(models.Manager):
    def get_query_set(self):
    return super(PostManager,self).get_query_set().all().extra(select={
                'comment_count': """SELECT COUNT(*) FROM django_comments
                    WHERE django_comments.object_pk = Blogger_post.id
                    AND django_comments.content_type_id = %s"""
            }, select_params=(entry_type.id,)).order_by('-comment_count') 
```

# h2 - 更改 H2 中的跟踪文件

> ID：14123493
> 
> 赞同：6
> 
> 时间：2013-01-02T14:06:53.920
> 
> 标签：h2

我的应用程序使用 H2 但已经有一个日志文件（例如：abc.log）

现在，我正在尝试让 H2 将日志/错误写入该文件（abc.log），所以如果出现问题，用户只有 1 个文件要发送给我（不是 abc.log 和 abc.db.trace文件）

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T06:00:34.793

您可以[将 H2 配置为使用 SL4FJ](http://h2database.com/html/features.html#other_logging)，如下所示：

```
jdbc:h2:~/test;TRACE_LEVEL_FILE=4 
```

记录器名称是`h2database`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T09:50:38.387

好的，解决方案对我来说很简单，但我唯一要做的就是添加

```
slf4j-api-1.7.2.jar 
```

和

```
slf4j-jdk14-1.7.2.jar 
```

在我的应用程序的类路径中。

由于 SLF4J 将（首先搜索然后）自己发现要使用的底层日志框架，它只是放置正确实现的问题。

一个警告，似乎 SLF4J 一次不能使用多个框架，所以这个解决方案**只有**在你有一个现有的框架时才有效。

# groovy - 在 Jenkins 中以编程方式更新 DependencyGraph

> ID：14123495
> 
> 赞同：1
> 
> 时间：2013-01-02T14:07:16.887
> 
> 标签：groovy, jenkins

我想更新 Jenkins 中的 DependencyGraph。

部分代码：

```
 def pl = z.getPublishersList()
            for(w in pl){
                       def bt = w.grep(hudson.tasks.BuildTrigger.class) 

          println(bt )
          for(aa in bt){
            println("BT " + aa.getChildProjectsValue())

                 pl.add( new hudson.tasks.BuildTrigger("TestTop2", false)) 
}
} 
```

我尝试使用

```
 def newtop =  hi.getItem("TestTop2")
def  graph3 = Hudson.getInstance().getDependencyGraph()
newtop.buildDependencyGraph(graph2) 
```

但这不起作用。重建 DependencyGraph 的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:36:13.243

这将从脚本控制台重建 DependencyGraph

```
def hi = hudson.model.Hudson.instance
hi.rebuildDependencyGraph() 
```

# objective-c - 带有 iPad 视网膜显示屏的模拟器

> ID：14123499
> 
> 赞同：1
> 
> 时间：2013-01-02T14:07:24.387
> 
> 标签：objective-c, ios, cocos2d-iphone, ios-simulator

我的模拟器有问题，我尝试使用空间管理器制作应用程序，并且在我的委托中。我有这个源。我尝试为每个设备设置代码，并在那里写//这是问题，我尝试为带有视网膜显示器的 ipad 设置代码，当我启动模拟器时，一切正常，但是带有视网膜显示器的 ipad 无法加载，只有在我设置时才会加载 [director enableRetinaDisplay:NO]; 然后它在没有视网膜的情况下运行。那么有谁知道，如何设置它以允许视网膜显示以另一种方式工作？谢谢。

```
 if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone )
{
    CGSize result = [[UIScreen mainScreen] bounds].size;

    if(result.height == 480 && [director enableRetinaDisplay:YES] == YES)
    {
        NSLog(@"iphone 4");
         [[CCDirector sharedDirector] replaceScene:[GameLayer node]];
    }

    if(result.height == 480 && [director enableRetinaDisplay:YES] == NO)
    {
        NSLog(@"iphone 3");
        [[CCDirector sharedDirector] replaceScene:[GameLayer node]];
    }

    if(result.height == 568)
    {
        NSLog(@"iphone 5");
        [[CCDirector sharedDirector] replaceScene:[Menu node]];
    }

}

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    CGSize result = [[UIScreen mainScreen] bounds].size;

    if(result.height == 1024 && [director enableRetinaDisplay:YES] == NO)
    {
        NSLog(@"iPad");
        [[CCDirector sharedDirector] replaceScene:[GameLayer node]];
    }

    if([director enableRetinaDisplay:YES] == YES)
    {
        NSLog(@"iPad retina");

        //HERE IS THE PROBLEM
        //HERE IS THE PROBLEM
        //[director enableRetinaDisplay:NO];

        [[CCDirector sharedDirector] replaceScene:[GameLayer node]];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:57:20.850

这是早期 Cocos2D 构建中的一个已知错误，但可以通过对 CCDirectorIOS 类的小改动来轻松修复。您需要将第 212/213 行替换为以下行：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad &&
[[UIScreen mainScreen] scale] > 1.0 )
{gluPerspective(60, (GLfloat)size.width/size.height, zeye-size.height/2, zeye+size.height/2 );
} else {
gluPerspective(60, (GLfloat)size.width/size.height, 0.5f, 1500);
} 
```

注意：这不是我的解决方法，我只是在遇到同样的问题后才发现它。完整的解释可以在这里找到：[http](http://swainya.blogspot.no/2012/03/black-screen-on-simulator-for-ipad.html) ://swainya.blogspot.no/2012/03/black-screen-on-simulator-for-ipad.html归功于 Spencer Ho...

# iphone - 关于 UITableView 组件

> ID：14123520
> 
> 赞同：0
> 
> 时间：2013-01-02T14:08:36.510
> 
> 标签：iphone, ios6, xcode4.5

我是为 iphone 开发应用程序的新手，我一个人学习。我正在尝试使视图等于以下链接：

[https://docs.google.com/open?id=0B26lA9znN3CUY3BBeW00NGo0RDA](https://docs.google.com/open?id=0B26lA9znN3CUY3BBeW00NGo0RDA)

我真的会用开关按钮制作这样的视图，UITableView 的单元格之间的标签。这个例子用的不止一个UITableView？还是几个分开的？我找不到任何这样的例子。如果有类似的例子会发布它供下载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:34:13.820

要复制此视图，请为表创建一个具有“分组”样式的表视图控制器 - 只有一个表。该表使用标准的 iOS 视图和样式（例如，部分、页脚、附件视图）。

第一节：

*   单元格一：自定义单元格样式，带有 UILabel @left 和 UISwitch @right
*   单元格二：右侧细节单元格样式（UILabel@左右）和披露指示器附件
*   部分页脚：通过实现表视图委托方法“tableView:viewForFooterInSection”，返回带有第一部分文本的 UILabel。

第二节：

*   单元格一：基本单元格样式（UILabel@left）和披露指示器附件

第三节：

*   单元格一：右侧细节单元格样式（UILabel@左右）

除了第一节页脚之外，所有这些都可以在故事板中轻松实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:27:09.823

您看到的视图不是普通的 UITableView，它是 Skype 的设置页面。

因此，您必须查看 Settings.bundle。[这](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)是描述它的 Apples 网站的链接。[这](http://useyourloaf.com/blog/2010/05/18/adding-a-settings-bundle-to-an-iphone-app.html)是一个很好的教程，描述了如何设置设置页面。

**更新**：有一个可用的开源项目，可让您根据需要直接在应用程序中包含设置页面：

[http://www.cocoacontrols.com/platforms/ios/controls/inappsettingskit](http://www.cocoacontrols.com/platforms/ios/controls/inappsettingskit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T03:11:50.083

我相信免费的 Sensible TableView 框架使您能够使用很少的行数来实现这一点。

# linux - 在命令中设置带引号和双引号的别名

> ID：14123522
> 
> 赞同：10
> 
> 时间：2013-01-02T14:08:38.567
> 
> 标签：linux, bash, shell, alias

我想为命令设置别名：

```
expect -c 'spawn ssh usr@ip -p 57022 ; expect password ; send "pass\n" ; interact' 
```

但是来自和来自命令的引号`alias alias_name=""`彼此不喜欢。

我尝试了与`'`,`"`和 ` 的组合，但所有这些都失败了。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-02T14:16:13.153

一个简单的解决方案是创建一个函数，而不是别名：

```
function function_name() {

    expect -c 'spawn ssh usr@ip -p 57022 ; \
        expect password ; send "pass\n" ; interact'

} 
```

所以你可以调用`function_name`，它会像使用别名一样正常工作。

如果您仍想使用别名，只需转义内部`"`的：

```
alias alias_name="expect -c 'spawn ssh usr@ip -p 57022 ; expect password ; send \"pass\n\" ; interact'" 
```

它应该可以工作。

# android - 列表视图中的一半项目未调用 OnItemLongClickListener

> ID：14123523
> 
> 赞同：1
> 
> 时间：2013-01-02T14:08:39.930
> 
> 标签：android, android-listview

我有一个带有自定义适配器的列表视图，

```
public class ClueArrayAdapter extends ArrayAdapter<String> {

---
----

@Override
  public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View rowView = inflater.inflate(R.layout.rowlayout, parent, false);
---
---
return rowView;
} 
```

行布局

* * *

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <TextView 
        android:id="@+id/clue"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        />

     <com.mydomain.MyView 
        android:id="@+id/myView"    // MyView is custom view and overrides onTouchEvent
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        />

</LinearLayout> 
```

## 我有一个 onItemLongClickListener

```
listView.setOnItemLongClickListener(new OnItemLongClickListener() {

            public boolean onItemLongClick(AdapterView<?> parent, View view,
                int position, long id) {
 ---
view.setSelected(true);
} 
```

当长按 TextView 但未响应长按 myView 时，将调用此侦听器。

我是否需要在 rowlayout 中设置 myView 的一些 xml 属性，以便在长按 myView 时选择一行？

## 触摸 myView

```
 @Override
        public boolean onTouchEvent(MotionEvent ev) {

            final int action = ev.getAction();
            switch (action & MotionEvent.ACTION_MASK) {
                case MotionEvent.ACTION_DOWN: {
                    final float x = ev.getX();
                    final float y = ev.getY();
                    markedCell = getCellAt(x,y);
                    break;       
                }

            }
            return true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:48:10.140

从您的 onTouchEvent 返回 false。返回 true 意味着您处理了该事件，并且不应将其传递给下一个处理程序（在本例中为您的长触摸事件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:48:18.927

您可以在 getView 方法中设置点击侦听器。

```
 rowView.setOnClickListener(new View.onClickListener)
          {
            public void onclick()
             { //your code
             }
          }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:49:56.640

试试这个：

```
public class ClueArrayAdapter extends ArrayAdapter<String> {
---
----

@Override
  public View getView(int position, View convertView, ViewGroup parent) {
  LayoutInflater inflater = (LayoutInflater) context
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  View rowView = inflater.inflate(R.layout.rowlayout, parent, false);
  rowView.setOnItemLongClickListener(new OnItemLongClickListener() {
        public boolean onItemLongClick(AdapterView<?> parent, View view,
            int position, long id) {
         ---
  rowView.setSelected(true);
}

 ---
 ---
return rowView; 
```

}

# javascript - nivoslider 与花式盒子冲突

> ID：14123536
> 
> 赞同：2
> 
> 时间：2013-01-02T14:09:33.250
> 
> 标签：javascript, jquery, fancybox

我最近在我的网站上安装了最新的 Nivo Slider。[www.desireandpleasure.co.uk/shop](http://www.desireandpleasure.co.uk/shop)但是，现在我的幻想框弹出警告不显示。

我假设它的 javascript 冲突，我不知道从哪里开始。任何人都有任何想法或有同样的问题，因为我已经看到了其他问题，但没有比这更具体的了。

干杯。

这是花式框代码：

```
 <style type="text/css">
<!--
.style3 {
    font-family: Arial, Helvetica, sans-serif;
    font-weight: bold;
}
.style4 {font-size: 12px}
.style5 {color: #6600FF}
.style9 {color: #6600FF; font-size: 16px; }
-->
</style>
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "fbe78afe-9290-4572-880f-7dfb2e0b0ec3"});</script>
<script type="text/javascript">
    var    image_loading      = '<?php echo $tmpl['img']['cart_loading']; ?>';
    var    image_width        = '<?php echo $tmpl['img']['cart_width']; ?>';
    var    image_height       = '<?php echo $tmpl['img']['cart_height']; ?>';
    var    text_cart_quantity = '<?php echo $tmpl['txt']['cart_qty']; ?>';
    var    text_cart_subtotal = '<?php echo $tmpl['txt']['cart_subtotal']; ?>';
    var    text_cart_empty    = '<?php echo $tmpl['txt']['cart_empty']; ?>';
    var    cart_text          = '<?php echo $tmpl['txt']['cart_text']; ?>';
    var    cart_link          = '<?php echo $tmpl['url']['cart']; ?>';
    var    session_id         = '<?php echo $tmpl['session_param']; ?>';
    var    fetch_url          = '<?php echo $tmpl['url']['cart_fetch']; ?>';

    function createCookie(name,value,days) {
      if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
      }
      else var expires = "";
      document.cookie = name+"="+value+expires+"; path=/";
    }

    function readCookie(name) {
      var nameEQ = name + "=";
      var ca = document.cookie.split(';');
      for(var i=0;i < ca.length;i++) {
              var c = ca[i];
              while (c.charAt(0)==' ') c = c.substring(1,c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
      }
      return null;
    }

    function eraseCookie(name) {
      createCookie(name,"",-1);
    }
</script>
<script type="text/javascript" src="<?= TMPL_JS ?>jquery.js"></script>
<script type="text/javascript" src="<?= TMPL_JS ?>animebox.js"></script>                                                                                          
<script type="text/javascript" src="http://www.desireandpleasure.co.uk/shop/templates/OS04A00404/az_template/fancybox/jquery.fancybox-1.2.6.pack.js"></script>
<link rel="stylesheet" type="text/css" href="http://www.desireandpleasure.co.uk/shop/templates/OS04A00404/az_template/fancybox/jquery.fancybox-1.2.6.css" media="screen" />
<style type="text/css">
  #fancy_outer { top: 50px!important; }
</style>
<script type="text/javascript">
jQuery(document).ready(function() {
  jQuery("a#popupcontroller").fancybox({
    'showCloseButton'    : false,
    'hideOnOverlayClick' : false,
    'hideOnContentClick' : false,      
    'frameHeight'        : 480,
    'frameWidth'         : 705, 
    'overlayOpacity'     : 0.9,
    'overlayColor'       : '#101',    
    'autoDimensions'     : false,
    'centerOnScroll'     : false,
    'onComplete': function() { 
      jQuery("#fancy_outer").css({ 
       'top': '50px!important' 
       }); 
      }                      
  });

  var cookie = readCookie('over18');                

  if (cookie != 'true'){                        
    if (window.location.pathname == '/shop/' || window.location.pathname == '/shop/index.html'){
      jQuery("a#popupcontroller").click();  
    }                                       
  } 
  eraseCookie('over18');      
});

</script> 
```

这是我的 Nivo 代码：

```
<div id="wrapper">

        <div class="slider-wrapper theme-default">
            <div id="slider" class="nivoSlider">
                <img src="sliderfront.png" data-thumb="sliderfront.png" alt="" width="725px"/>
                <img src="image002.jpg" data-thumb="image002.jpg" alt="" width="725px"/></a>
                <img src="image003.jpg" data-thumb="image003.jpg" alt="" data-transition="slideInLeft" width="725px"/>
            </div>
        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:41:18.260

当您将定义 nivoslider 或 fancybox 时，请尝试使用[此功能。](http://api.jquery.com/jQuery.noConflict/)我认为它可以帮助你。

```
jQuery.noConflict();
jQuery(document).ready(function() {
  jQuery("a#popupcontroller").fancybox({
    'showCloseButton'    : false,
    'hideOnOverlayClick' : false,
    'hideOnContentClick' : false,      
    'frameHeight'        : 480,
    'frameWidth'         : 705, 
    'overlayOpacity'     : 0.9,
    'overlayColor'       : '#101',    
    'autoDimensions'     : false,
    'centerOnScroll'     : false,
    'onComplete': function() { 
      jQuery("#fancy_outer").css({ 
       'top': '50px!important' 
       }); 
      }                      
  }); 
```

但请确保在 noConflict 中使用 use for jQuery。在另一种情况下，您应该使用“$”

# jquery - jquery树遍历把错误信息放到正确的地方

> ID：14123543
> 
> 赞同：1
> 
> 时间：2013-01-02T14:10:13.797
> 
> 标签：jquery, css, dom

我正在使用此处找到的时间输入小部件和此处找到[的](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)[默认](http://keith-wood.name/timeEntry.html)jquery 表单验证库。我已经设置了我的表单验证器以将错误消息放置在表单元素之后的自定义跨度中。例如：

```
<input type="text" id="event_title" name="event_title" class="required" size="50" maxlength="150" />
<span class="error_ctr"></span> 
```

除了创建小部件时看起来像这样的时间条目小部件外，这可以正常工作。

```
<span class="timeEntry_wrap">
   <input type="text" class="required hasTimeEntry" size="11" value="" name="start_time" id="start_time">
   </span><span class="error_ctr">
</span> 
```

原因是时间条目小部件将输入元素包装在一个跨度中，并且 jquery 验证尝试在输入元素之后找到具有 error_ctr 类的第一个跨度。这是我用来告诉验证插件在哪里放置错误消息的代码：

```
$(".request_form").validate({
    errorElement: "div",
    errorPlacement: function(error, element) {          
                       error.appendTo( element.nextAll(".error_ctr:first") );
                    }
}); 
```

如何告诉 jquery 将错误消息放在正确的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:38:13.043

这应该这样做：

```
error.appendTo( element.closest(".timeEntry_wrap").andSelf().next(".error_ctr") ); 
```

注意：在@pimvdb 的反馈后更新

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:44:16.123

怎么样的东西：

```
...
errorPlacement: function (error, element) {
    if (element.id == "start_time") {
        $("+ .error_ctr", element.parent()).html(error);
    } else {
        error.appendTo( element.nextAll(".error_ctr:first") );
    }
}
... 
```

# iphone - 无法识别的选择器 NSInvalidArgumentException：对于 IBAction？

> ID：14123545
> 
> 赞同：0
> 
> 时间：2013-01-02T14:10:20.930
> 
> 标签：iphone, ios, ipad, ios5

我在 iOS iPad 应用程序中遇到了一个奇怪的问题。当我将 a 映射`UIButton`到`IBAction`带有修饰的内部事件时，我的应用程序崩溃了。我在控制台中遇到的错误就像 `Unrecognized selector NSInvalidArgumentException`.

顺便说一下，我项目中的所有视图控制器都有同样的问题。视图控制器映射到标签栏控制器。

我通过从另一个项目中拖放所有文件来创建这个项目。拖动的文件正确放置在当前项目中，没有问题。这会导致问题吗？

我无法弄清楚出了什么问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:23:12.493

只需右键单击 xib 中的按钮并检查您的按钮是否只有一个连接，如果您有多个连接，请删除不需要的连接。

![在此处输入图像描述](../Images/1889ce56642d678a3c52714ffcca1d72.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:24:16.363

`UIViewController`您是否在界面生成器中设置了自定义子类的类？

![在此处输入图像描述](../Images/fac7e32516be55166a94e330cfc12f93.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:33:23.597

如果在应用**Gabriele Petronella**和**Rajneesh071**的解决方案后问题仍然存在，那么可能会出现一个小错误：

如果您正在使用：

```
[btn addTarget:self action:@selector(buttonTouched:)  forControlEvents:UIControlEventTouchUpInside]; 
```

那么`buttonTouched`方法必须是`(IBAction)`.

如果`buttonTouched`方法是类型，`(void)`那么只需**`:`**从您的方法调用中删除它。

我知道这是一件简单的事情，但它可能会导致崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T14:28:47.700

我会检查以确保您有 UIButton 引用的无法识别的方法：

1) .h 中列出的方法签名是否与 .m 文件中列出的方法签名一致？2) 调用方法时是否传递了任何预期的参数？3) 该方法在您的 .h 和 .m 文件中是否始终列为类 (+) 或实例 (-) 方法？

我知道您说您复制了文件，但是您是否进行了测试以确保您复制的应用程序也可以正常工作？其他应用程序是否将方法连接到按钮？复制后你有没有改变任何东西？

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-03T14:05:51.007

感谢您的回答。我已经解决了这个问题。

**实际问题：**

1.  我的项目是使用 ARC。
2.  实际上，我通过单击以下按钮将其添加为子视图，从而从一个视图导航到另一个视图`IBAction`，

    ```
    -(IBAction)signInAndGoToFrameworkView :(id)sender{  

    MyViewController myViewController  = [[MyViewController alloc] initWithNibName:@"MyViewController " bundle:nil];
    [self.view addSubview:myViewController.view];

    } 
    ```

3\. 由于该项目使用 ARC，因此对象 myViewController 被释放，因为这是一个局部变量。所以当我按下后退按钮时

```
 [self.view removeFromSuperview]; 
```

该应用程序崩溃了。

**解决方案：**

所以当我刚刚`MyViewController myViewController`在 .h 文件中声明并且还给出了`@property`and `@synthesize`. 然后换了`IBAction`with，

```
 -(IBAction)signInAndGoToFrameworkView :(id)sender{  

    myViewController  = [[MyViewController alloc] initWithNibName:@"MyViewController " bundle:nil];
    [self.view addSubview:myViewController.view];

    } 
```

现在问题解决了。

谢谢。

# java - Eclipse：警告：[选项] 引导类路径未与 -source 1.6 一起设置

> ID：14123550
> 
> 赞同：2
> 
> 时间：2013-01-02T14:10:40.243
> 
> 标签：java, eclipse

您好，我所有的工作笔记本电脑都崩溃了，我不得不在借来的设备上安装程序。

我在跑步

*日食朱诺

*JRE7

*jdk1.7.0_10

当我尝试编译应用程序时..我得到

警告：[选项] 引导类路径未与 -source 1.6 一起设置

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:08:50.440

复制自[oracle 博客关于使用导致此警告的旧资源](https://blogs.oracle.com/darcy/entry/bootclasspath_older_source)

> 要使用 JDK N 中的 javac 交叉编译到旧平台版本，正确的做法是：
> 
> *使用较旧的 -source 设置。*
> 
> *将引导类路径设置为针对旧平台的 rt.jar（或等效文件）进行编译。*
> 
> 如果不采取第二步，javac 将尽职尽责地使用旧语言规则与新库相结合，这可能导致类文件在旧平台上不起作用，因为可能包含对不存在的方法的引用。
> 
> 感谢 Jon Gibbons 的工作，在 JDK 7 build 121 及更高版本中 javac 检测并警告这种可疑情况；例如：
> 
> *$ javac -source 6 HelloWorld.java*
> 
> *警告：[选项] 引导类路径未与 -source 1.6 一起设置*
> 
> 解决警告的一种方法是设置引导类路径。如果这不合适，可以使用 -Xlint 系列中的新子选项 -Xlint:-options 禁用警告。
> 
> 通过此更改，编译器可以诊断出可能导致细微构建错误的 javac 选项的可能有问题的组合，并且可以通过新的 -Xlint 子选项直接解决或记录为构建过程的一部分。

# android - Android 按下 Home 键时停止背景音乐

> ID：14123552
> 
> 赞同：4
> 
> 时间：2013-01-02T14:10:45.110
> 
> 标签：android, android-activity, media-player

我正在开发一个有多个活动的应用程序。用户可以导航到任何活动。我从第一个主要活动开始背景音乐，它在整个应用程序中一直播放。现在我希望每当用户按下 HOME 键时，媒体播放器应该暂停播放，当用户返回应用程序时，它会再次开始播放。首先，我将媒体播放器设为静态，并在 onPause() 中暂停音乐并在 onResume() 中播放，但在活动之间切换时会产生混蛋。我希望你明白我的意思。知道如何在按下 HOME 键时暂停播放并在用户回来时再次播放吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:27:42.617

看看[Activity.onUserLeaveHint()](http://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint%28%29) [http://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint](http://developer.android.com/reference/android/app/Activity.html#onUserLeaveHint) ()

> 当活动由于用户选择而即将进入后台时，作为活动生命周期的一部分调用。例如，当用户按下 Home 键时，会调用 onUserLeaveHint()，但是当有来电导致通话中的 Activity 自动被带到前台时，被中断的 Activity 不会调用 onUserLeaveHint() . 在调用它的情况下，此方法会在活动的 onPause() 回调之前调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:19:41.803

我遇到了同样的问题并以一种丑陋的方式解决了它：有一个全局静态播放器。在活动的 onPause 中，它调用播放器停止（但实际上并没有停止），并在 onResume 调用中开始。在播放器 onStart 中，我将音乐标记为正在播放。在 onStop 中，我将音乐标记为已停止，但实际上并未停止。我在 stop 被调用 1 秒后醒来，如果最后一秒没有“startPlaying”，我会停止音乐。

我希望有更好的方法。

# c# - XML反序列化和XPath？

> ID：14123554
> 
> 赞同：5
> 
> 时间：2013-01-02T14:10:49.257
> 
> 标签：c#, xml, serialization

我有这样的 XML

```
 <pda:Party>
                 ...Snip....
                <pda:CitizenName>
                    <pda:CitizenNameTitle>MR</pda:CitizenNameTitle>
                    <pda:CitizenNameForename>John</pda:CitizenNameForename>
                    <pda:CitizenNameSurname>Wayne</pda:CitizenNameSurname>
                </pda:CitizenName>
              .....Snip...
           </pda:Party> 
```

其中 Citizen Name 是 Party Node 中的一个复杂类型。（这是从我正在为其创建适配器的第 3 方集成收到的 xml）

我对在我的课堂上尝试反序列化为我宁愿拥有的子类型不感兴趣。

```
public class Party
{
    public string  FirstName { get; set; }
    public string LastName {get;set;}

} 
```

因此，与其将我的类定义作为 XML 所代表内容的具体定义，不如我可以使用 XPath 之类的东西来装饰属性，例如。

```
 [XmlElement("\CitizenName\CitizenNameForeName")]
 public string FirstName {get;set;} 
```

要将 xml 中的信息挑选到包含我感兴趣的数据的类中？

从第 3 方收到的 xml 非常冗长，我只对特定方面感兴趣。一种选择是只创建一个 XMLDocument 并使用 XPath 和转换方法手动映射到我的类，但我想我会问是否有中间解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:29:54.567

一种选择是使用 XSLT 转换将传入的 XML 解析为与您的类匹配的 s 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T08:45:33.160

最后，我设置了自己的属性来做我想做的事情。因此，采用 XPath 路径的自定义属性...

```
[System.AttributeUsage(System.AttributeTargets.Property)]
public class PathToXmlNode : System.Attribute
{
    public string Path { get; set; }

    public PathToXmlNode(string path)
    {
        this.Path = path;
    }
} 
```

后跟一个装饰属性..（为简单起见省略了命名空间）

```
 [PathToXmlNode("Party[1]/CitizenName/CitizenNameForename")]
         public string FirstName { get; set; } 
```

然后，当我想填充类时，我调用了以下方法。

```
 var type = typeof(T);
        foreach (var property in type.GetProperties())
        {
            var attributes = property.GetCustomAttributes(typeof(PathToXmlNode), true);

            if (attributes != null && attributes.Length > 0)
            {
                //this property has this attribute assigned.
                //get the value to assign
                var xmlAttribute = (PathToXmlNode)attributes[0];
                var node = doc.SelectSingleNode(xmlAttribute.Path, nmgr);

                if (node != null && !string.IsNullOrWhiteSpace(node.InnerText))
                {
                    dynamic castedValue;

                    if (property.PropertyType == typeof(bool))
                    {
                        castedValue = Convert.ToBoolean(node.InnerText);
                    }
                    ...Snip all the casts....
                    else
                    {
                        castedValue = node.InnerText;
                    }

                    //we now have the node and it's value, now set it to the property.
                    property.SetValue(obj, castedValue, System.Reflection.BindingFlags.SetProperty, null, null, System.Globalization.CultureInfo.CurrentCulture);
                }

            }
        } 
```

这是一个很好的起点，但是如果其他人认为这是一个可行的中间解决方案，您需要注意它需要适应非简单数据类型。这就是我现在要做的！

# javascript - 如何检测 JavaScript 中方法链的结束？

> ID：14123557
> 
> 赞同：11
> 
> 时间：2013-01-02T14:11:20.533
> 
> 标签：javascript, jquery, jquery-plugins

首先也是最重要的是，我试图检测方法链的结束调用。我还想设计一种方法来检测我在方法链中的方法调用中有多少方法“进入”或“向下”对象链。

例如，在我正在编写的插件中：

```
var result = $("#someDiv").myPlugin.foo().bar()._foo()._bar(); 
```

假设该方法当前正在 .bar() 中执行，我想知道我是整个链中的 2 个方法。

我需要以某种方式抽象这些信息的原因是，当我到达链中的最后一个方法时，我可以返回结果而不是插件对象，从而在该点打破链，以便访问我们的数据“结果”变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T15:54:42.753

这是从[您的项目](https://github.com/Xaxis/jqueryphp)中提取的示例：

```
var strLenA = parseInt( P.strlen('some string').data );
var strLenB = parseInt( P.strlen('another string').data );
var totalStrLen = strLenA + strLenB;
console.log(strLenA, strLenB, totalStrLen); 
```

从这里我可以看出为什么我们的答案并不充分——以及为什么你想摆脱`.data`. 令人高兴的`.data`是，无论如何，您总是返回一个字符串。因此，您可以使用神秘的`.toString`覆盖让您的方法仍然返回父方法的副本 - 但也允许将它们视为字符串。

这是一个例子：[用[小提琴](http://jsfiddle.net/vwDD9/)]

```
var stringMagic = function() {
    var chain = "",
        self = this;
    self.toString = function () { return chain; }; // Where the real magic happens.
    self.add = function(str) {
        chain += str + " ";
        return self;
    };
};

var magi = new stringMagic();
alert(magi.add("hello").add("world")); // Alerts, "hello world"
magi.add("and").add("thanks").add("for").add("all").add("the").add("fish");
alert(magi); // Alerts, "hello world and thanks for all the fish" 
```

在您的情况下，您可能需要做的就是更改`.data`为并将`P`其`.toString`包装在一个函数中。

将来当您添加对其他数据类型（例如数字和布尔值）的支持时，您可以`valueOf`像使用`toString`. 事实上，`toString`当返回值不是字符串时，您还应该继续包含当他们将该数字视为字符串时 - 就像在`console.log`or中一样`$.fn.text`。这是上面的示例，但带有数字：http: [//jsfiddle.net/emqVe/1/](http://jsfiddle.net/emqVe/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T12:30:05.313

为了完整起见。另一种选择是传递一个对象，该对象将随着链的进展而更新。这将让您在适合您的时候访问结果值（而不必在链的末尾添加它）。

而不是这样的语法：

```
var result = chainableFunction.doThis().doThat().result; 
```

然后，您将拥有：

```
chainableFunction.update(variableToUpdate).doThis().doThat();
var result = variableToUpdate.result; 
```

逻辑与其他人提出的解决方案非常相似。使用哪一个可能取决于您的用例。必须用 .result 结束链的一个可能问题是没有什么可以阻止您以这种方式使用它：

```
var chainedUp = chainableFunction.doThis().doThat();
doSomething(chainedUp.result);
... 
chainedUp.doOneMoreThing()
... 
doSomething(chainedUp.result);  // oups, .result changed! 
```

使用 variableToUpdate 选项，结果值不受未来函数调用的影响。同样，这在某些情况下可能是可取的，而在其他情况下则不然。

下面的完整示例

```
#!/usr/bin/env node

var ChainUp = {};
(function(Class) {

  // Pure functions have no access to state and no side effects
  var Pure = {};
  Pure.isFunction = function(fn) {
     return fn && {}.toString.call(fn) === '[object Function]';
  };

  Class.instance = function() {
    var instance = {};
    var result;
    var updateRef;

    function callBack(fn) {
      // returning a clone, not a reference.
      if(updateRef) { updateRef.r = (result || []).slice(0); } 
      if(Pure.isFunction(fn)) { fn(result); }
    }

    instance.update = function(obj) {
      updateRef = obj;
      return instance;
    };

    instance.one = function(cb) {
        result = (result || []); result.push("one");
        callBack(cb);
        return instance;
      };
      instance.two = function(cb) {
        result = (result || []); result.push("two");
        callBack(cb);
        return instance;
      };
      instance.three = function(cb) {
        result = (result || []); result.push("three");
        callBack(cb);
        return instance;
      };
      instance.result = function() {
        return result;
      };
    return instance;
  };

}(ChainUp));

var result1 = {};
var chain = ChainUp.instance().update(result1);
var one = chain.one(console.log); // [ 'one' ]
console.log(one.result());        // [ 'one' ]
console.log(result1.r);           // [ 'one' ]

var oneTwo = chain.two(); 
console.log(oneTwo.result());  // [ 'one', 'two' ]
console.log(result1.r);        // [ 'one', 'two' ]

var result2 = {};
var oneTwoThree = chain.update(result2).three();
console.log(oneTwoThree.result()); // [ 'one', 'two', 'three' ]
console.log(result2.r);            // [ 'one', 'two', 'three' ]

console.log(result1.r);             // [ 'one', 'two' ] 
```

笔记。类和实例关键字可能不熟悉。这是我在使用闭包而不是原型继承从原型构造实例时使用的约定。您可以用 self 替换实例（并且 self = this 而不是 instance = {}）..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:29:40.860

没有（合法的或简单的或好的）方法可以在方法*内部找出结果**在外部*发生了什么，然后返回。您应该使用“链结束标记”方法。

再想一想，您是在寻找应用于对象的*最后一种方法*，还是想检测更明确的东西？也许您失去了将方法应用于决策的可能性（使用虚假的愚蠢方法名称）：

```
obj.turnLeft().pushUp().makeBig().makeSilent;
if (colorSupport) {
  obj.paintRed();
} else {
  obj.paintStripes();
}
obj.makeShine().lastMethodCallSoObjectIsNowInFinalState(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T14:30:22.020

*在确定返回值时*，无法确定调用是否是链中的最后一个实例，原因如下：

```
var result = $("#someDiv").myPlugin.foo().bar()._foo()._bar(); 
```

`foo`返回`myPlugin`哪个`bar`被调用哪个返回`myPlugin`哪个`_foo`被调用哪个返回`myPlugin`哪个`_bar`被调用。

如此有效地，当`_foo`返回它的值 ( `myPlugin`) 时，它是在该值被使用之前。除非`_foo`是通灵者，否则它无法知道接下来会发生什么。

正如您在评论中指出的那样，您最好的选择是使用一些“结束”方法，例如`results()`.

另一个建议是将处理程序传递给`myPlugin`被调用的处理程序以使用`setTimeout(..., 0)`. 在`myPlugin`foo、bar、_foo 和 _bar 中设置一个值。让我们称之为`returnValue`。修改 myPlugin 以接受一个方法作为它的唯一参数。让我们称之为`handler`。此方法的第一个参数将包含该值。在 myPlugin 内部，在你的 之前`return`，做：

```
window.setTimeout(function () {
    handler(returnValue);
}, 0); 
```

由于 setTimeout 的函数参数在执行完成之前不会被调用，因此它将包含最后设置`returnValue`的值 - 实际上是链中最后一次调用设置的值。我认为这是与您尝试实现的目标最接近的选择，因为开发人员不必担心最后调用他的哪个方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-13T13:04:00.097

没有本地方法，但是，您可以根据需要向要链接的方法添加参数。并通过将其设置为 来确定当前呼叫是否是最新的`true`，如下所示：

```
var AlertText = {
  text: "",
  chainEntry: function(textToAdd, isTheLastOne) {
    this.text += textToAdd;
    // Perform only if this is told to be the last call in the chain:
    if (isTheLastOne) {
      alert(this.text);
      this.text = "";
    }
    //
    return this;
  }
};

AlertText
  .chainEntry("Hi, ")
  .chainEntry("how ")
  .chainEntry("are ")
  .chainEntry("you?", true); // alert("Hi, how are you?"); 
```

# sql - IMAP 到 ODBC 转换器（即 IMAP 到 SQL）

> ID：14123558
> 
> 赞同：0
> 
> 时间：2013-01-02T14:11:29.983
> 
> 标签：sql, imap, converter

如果这个问题是直接问的，请原谅。

我正在寻找从我们的邮件服务器（我们使用 Kerio Connect，因此可以使用 IMAP 或 POP）获取邮件到数据库服务器（MYSQL 或 MSSQL）的最简单和最可靠的方法。

该解决方案将位于虚拟服务器中，Ubuntu 或 Windows（2003 或 2008）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T09:36:31.250

最后，我们使用了一个非常简单的解决方案：运行 Outlook 并带有一些 VBA 编码的 Windows Xp VM。效果很好。

# nginx - nginx禁止和坏网关错误

> ID：14123562
> 
> 赞同：0
> 
> 时间：2013-01-02T14:11:43.520
> 
> 标签：nginx, amazon-ec2, php

我将 nginx 配置为从我们的服务器为两个虚拟主机提供服务：一个主主机和一个子域主机。主要主机是一个 Rails 应用程序，与乘客一起服务。它按预期工作。

子域主机是一个小的 PHP 应用程序。对此子域进行浏览器请求，它会返回 403（禁止）错误。当对特定文件进行浏览器请求时，它会返回 502（错误网关）错误。

这是 nginx.conf 文件：

```
#user  nobody;
worker_processes  3;

events {
  worker_connections  19000;
}

worker_rlimit_nofile  20000;

http {
  include       mime.types;
  default_type  application/octet-stream;

  passenger_root /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.18;
  passenger_ruby /usr/local/bin/ruby;

  sendfile        on;

  gzip  on;
  gzip_http_version   1.1;
  gzip_disable        "msie6";
  gzip_vary           on;
  gzip_comp_level     9;
  gzip_static         on;

  passenger_max_pool_size 6;
  passenger_min_instances 1;
  passenger_pool_idle_time 10;

  # Rails app
  server {
    listen       80;
    server_name  .domain.com;
    passenger_enabled on;

    root /home/ubuntu/rails_app/public;

    location ~ ^/assets/ {
      expires           max;
      add_header        Cache-Control public;
      #add_header        Last-Modified "";
      #add_header        ETag "";
      open_file_cache          max=1000 inactive=500s;
      open_file_cache_valid    600s;
      open_file_cache_errors   on;
      break;
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
      root   html;
    }
  }

  # PHP app
  server {
      listen       80;
      server_name  sub.domain.com;

      root   /home/ubuntu/rails_app/sendy;
      index  index.html index.htm index.php;

      if (!-d $uri) { 
          set $rule_0 1$rule_0;
      }

      if (!-f $uri) {
          set $rule_0 2$rule_0;
      }

      if ($rule_0 = "21") {
          rewrite ^/([a-zA-Z0-9-]+)$ /$1.php last;
      }

      location / {
          try_files $uri $uri/ /index.php;
      }

      location ~ \.php$ {
          #root           html;
          fastcgi_pass   unix:/var/run/php-fpm/php-fpm.sock;
          #fastcgi_index  index.php;
          fastcgi_param  SCRIPT_NAME        $fastcgi_script_name;
          fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
          include        fastcgi_params;
      }

      location /l {
          rewrite ^/l/([a-zA-Z0-9/]+)$ /l.php?i=$1 last;
      }

      location /t {
          rewrite ^/t/([a-zA-Z0-9/]+)$ /t.php?i=$1 last;
      }

      location /w {
          rewrite ^/w/([a-zA-Z0-9/]+)$ /w.php?i=$1 last;
      }

      location /unsubscribe {
          rewrite ^/unsubscribe/(.*)$ /unsubscribe.php?i=$1 last;
      }

      location /subscribe {
          rewrite ^/subscribe/(.*)$ /subscribe.php?i=$1 break;
      }

      location ~ /\.ht {
          deny  all;
      }
  }
} 
```

我认为这是一个权限问题，但我将它们更改为 744、755 甚至 777，但仍然出现相同的错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:51:24.257

您的 nginx 配置在第一个视图中看起来不错。我有点担心 php-fpm 进程。您应该有一个主进程和至少一个子进程，通常不止一个。

您是否配置了 php-fpm 池？

这就是我的流程的样子

```
# ps aux | grep "php"
root      1081  0.0  0.3 387316  5404 ?        Ss   14:49   0:00 php-fpm: master process (/etc/php-fpm.conf)
nobody    1082  0.0  0.6 390376 10316 ?        S    14:49   0:03 php-fpm: pool poolname.com
nobody    1083  0.0  0.6 390388 10360 ?        S    14:49   0:03 php-fpm: pool poolname.com
nobody    1084  0.0  0.6 390392 10324 ?        S    14:49   0:02 php-fpm: pool poolname.com 
```

你`/etc/php-fpm.conf`应该至少包含这个：

```
include=/etc/php-fpm.d/*.conf

[global]
pid = /var/run/php-fpm/php-fpm.pid
error_log = /var/log/php-fpm.log
daemonize = yes 
```

然后你需要创建一个池定义`/etc/php-fpm.d/`

例如`mydomain.com.conf`

```
[mydomain.com]
; The address on which to accept FastCGI requests.
; Valid syntaxes are:
;   'ip.add.re.ss:port'    - to listen on a TCP socket to a specific address on
;                            a specific port;
;   'port'                 - to listen on a TCP socket to all addresses on a
;                            specific port;
;   '/path/to/unix/socket' - to listen on a unix socket.
; Note: This value is mandatory.

listen        = /var/run/php-fpm/php-fpm.sock

; Set permissions for unix socket, if one is used. In Linux, read/write
; permissions must be set in order to allow connections from a web server. Many
; BSD-derived systems allow connections regardless of permissions..
; Default Values: user and group are set as the running user
; mode is set to 0666

listen.owner  = nginx
listen.group  = nginx
listen.mode   = 0666

; Unix user/group of processes
; Note: The user is mandatory. If the group is not set, the default user's group
; will be used.

user          = nobody
group         = nobody

; Choose how the process manager will control the number of child processes.
; Possible Values:
;   static  - a fixed number (pm.max_children) of child processes;
;   dynamic - the number of child processes are set dynamically based on the
;             following directives:
;             pm.max_children      - the maximum number of children that can
;                                    be alive at the same time.
;             pm.start_servers     - the number of children created on startup.
;             pm.min_spare_servers - the minimum number of children in 'idle'
;                                    state (waiting to process). If the number
;                                    of 'idle' processes is less than this
;                                    number then some children will be created.
;             pm.max_spare_servers - the maximum number of children in 'idle'
;                                    state (waiting to process). If the number
;                                    of 'idle' processes is greater than this
;                                    number then some children will be killed.
; Note: This value is mandatory.

pm = dynamic

; The number of child processes to be created when pm is set to 'static' and the
; maximum number of child processes to be created when pm is set to 'dynamic'.
; This value sets the limit on the number of simultaneous requests that will be
; served. Equivalent to the ApacheMaxClients directive with mpm_prefork.
; Equivalent to the PHP_FCGI_CHILDREN environment variable in the original PHP
; CGI.
; Note: Used when pm is set to either 'static' or 'dynamic'
; Note: This value is mandatory.

pm.max_children = 100

; The number of child processes created on startup.
; Note: Used only when pm is set to 'dynamic'
; Default Value: min_spare_servers + (max_spare_servers - min_spare_servers) / 2

pm.start_servers = 20

; The desired minimum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Note: Mandatory when pm is set to 'dynamic'

pm.min_spare_servers = 5

; The desired maximum number of idle server processes.
; Note: Used only when pm is set to 'dynamic'
; Note: Mandatory when pm is set to 'dynamic'

pm.max_spare_servers = 100

; The number of requests each child process should execute before respawning.
; This can be useful to work around memory leaks in 3rd party libraries. For
; endless request processing specify '0'. Equivalent to PHP_FCGI_MAX_REQUESTS.
; Default Value: 0

pm.max_requests = 250 
```

如果配置设置为您完全满意重新启动 php-fpm

```
/etc/init.d/php-fpm restart 
```

您现在应该看到更多进程

```
ps aux | grep "php" 
```

确保套接字文件存在并且归正确的用户所有（应该是运行 nginx 的用户）

```
# ls -l /var/run/php-fpm/php-fpm.sock
srw-rw-rw- 1 nginx nginx 0 Jan  2 14:49 /var/run/php-fpm/php-fpm.sock 
```

现在重新启动你的 nginx 以确保它读取新的套接字文件

```
/etc/init.d/nginx restart 
```

希望这可以帮助。如果不是，还有其他问题，我们需要继续调试

# asp.net-mvc - Ninject 导致“找不到方法：System.Reflection.MethodInfo.CreateDelegate”

> ID：14123563
> 
> 赞同：0
> 
> 时间：2013-01-02T14:11:48.980
> 
> 标签：asp.net-mvc, dependency-injection, ninject, system.reflection

我正在尝试部署一个使用 Ninject for DI 的网站，该网站在我的开发机器上本地运行良好。部署到 GoDaddy 主机时，我收到以下错误：

> 找不到方法：'System.Delegate System.Reflection.MethodInfo.CreateDelegate(System.Type)'。

我正在使用 MVC3（4.0 框架）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T20:48:19.197

如果您在安装了 4.0 的计算机上部署 .NET Framework 4.5 版本，通常会发生此错误，反之亦然。

# java - PMD 的 StringInstantiation 规则背后的“为什么”

> ID：14123565
> 
> 赞同：2
> 
> 时间：2013-01-02T14:11:56.263
> 
> 标签：java, code-analysis, pmd

根据现有线程，[PMD 规则背后的“原因”](https://stackoverflow.com/questions/2509856/the-why-behind-pmds-rules)，我试图找出一个特定 PMD 规则的含义：**String 和 StringBuffer Rules.StringInstantiation**。

此规则规定您不应显式实例化 String 对象。根据他们的手册页：

> 避免实例化 String 对象；这通常是不必要的，因为它们是不可变的并且可以安全地共享。
> 
> 此规则由以下 Java 类定义：net.sourceforge.pmd.lang.java.rule.strings.StringInstantiationRule
> 
> 例子）：
> 
> 私有字符串 bar = new String("bar"); // 只做一个字符串 bar = "bar";

[http://pmd.sourceforge.net/pmd-5.0.1/rules/java/strings.html](http://pmd.sourceforge.net/pmd-5.0.1/rules/java/strings.html)

除了毫无意义之外，我看不出这种语法有什么问题。它会影响整体性能吗？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:16:08.427

在`String foo = "foo"`PermGen 空间中将会有一个“foo”的实例（这被称为*字符串实习*）。如果您稍后键入`String bar = "foo"`，PermGen 空间中仍然只有一个“foo”。

写入`String foo = new String( "foo" )`还将创建一个`String`对象来计数堆。

因此，规则是为了防止浪费内存。

干杯，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T14:16:47.070

它通常不应该以任何可衡量的方式影响性能，但是：

```
private String bar = new String("bar"); // just do a String bar = "bar"; 
```

如果你执行这一行一百万次，你将创建一百万个对象

```
private String bar = "bar"; // just do a String bar = "bar"; 
```

如果您执行这一行一百万次，您将创建一个对象。

在某些情况下，这实际上会有所作为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T14:16:56.750

> 它会影响整体性能吗？

嗯，性能和维护。做一些毫无意义的事情会让读者想知道*为什么*代码首先存在。当那个毫无意义的操作*还*涉及创建新对象（在这种情况下是两个 - 一个 new`char[]`和一个 new `String`）时，这是避免它的另一个原因......

过去，如果现有字符串最初是作为较长字符串的小子字符串获得的，或者其他方式获得由大字符数组支持的字符串，*则*有理由调用。`new String(existingString)`我相信最近的 Java 实现并非如此，但显然您仍然可以使用旧的实现。无论如何，这对于*常量*字符串应该不是问题，请注意。

（您*可能会*争辩说，创建一个新对象允许您对其进行同步。不过，我会避免从字符串开始同步。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T14:16:32.203

一个区别是内存占用：

```
String a = "abc"; //one object
String b = "abc"; //same object (i.e. a == b) => still one object in memory
String c = new String("abc"); // This is a new object - now 2 objects in memory 
```

老实说，我能想到的唯一原因，为什么要使用 String 构造函数是与 substring 结合使用，这是对原始字符串的一种看法。在这种情况下使用 String 构造函数有助于摆脱不再需要的原始字符串。

但是，从 java 7u6 开始，情况不再如此，所以我看不出有任何理由再使用它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-02T14:37:17.770

它可能很有用，因为它创建了一个新的身份，有时对象身份对应用程序很重要/至关重要。例如，它可以用作内部哨兵值。还有其他有效的用例，例如避免常量表达式。

如果初学者编写这样的代码，那很可能是一个错误。但这是一个非常短的学习期。任何有中等经验的 Java 程序员都不太可能错误地编写它。它必须用于特定目的。将其归档在“它看起来像一个愚蠢的错误，但它需要努力，所以它可能是故意的”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T14:22:40.857

这是

*   无意义
*   令人困惑
*   稍慢

你应该尽量写出最简单、最清晰的代码。添加无意义的代码是不好的。

# php - 获取满足条件的所有行，然后对每一行执行一些操作

> ID：14123566
> 
> 赞同：0
> 
> 时间：2013-01-02T14:12:07.080
> 
> 标签：php, mysql, distance, resultset, geocode

我有一个 php 网页，它可以找到作为输入提供的 1 公里纬度和经度半径内的所有用户。lat 和 long 作为数据库的输入，它生成一个包含 10 个用户的列表作为输出。我想在检索到他们的设备 ID 后向这个生成列表的每个用户发送一条消息。但我不能这样做。请帮忙

```
$sql = "SELECT number, userID, 
( 6371 * acos( cos( radians(19.143) ) 
               * cos( radians( latitude ) ) 
               * cos( radians( longitude ) 
                   - radians(72.831) ) 
               + sin( radians(19.143) ) 
               * sin( radians( latitude ) ) 
             )
) AS distance 
FROM users
WHERE device = 'android' 
HAVING distance < 2 
ORDER BY distance;";

$result = mysql_query($sql,$link);

if (mysql_num_rows($result) != 0) 
{
    while($row = mysql_fetch_assoc($result))
    {
                //send notification code
    }
} 
```

当我执行此代码时，出现错误

> mysql_fetch_assoc() 期望参数 1 是资源，字符串在..

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:30:25.283

请试试这个

```
mysql_fetch_array($result,**MYSQL_ASSOC**) 
```

其中：

```
mysql_fetch_assoc() 
```

它可能会解决您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:50:29.430

首先检查存在或结果

```
if (!$result) {
    echo mysql_error();
    exit;
} 
```

如果它退出然后调试您的查询。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T14:17:14.250

首先想到：`ORDER BY distance;";`会给出错误，尝试：`ORDER BY distance ASC";` 所以我认为您的结果中有字符串-错误消息-您可以尝试`mysql_error()`在获取结果之前检查是否为空。

以上假设 - 连接有效且 $link 设置

第二个想法：根据： http: [//php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

```
**The query string should not end with a semicolon. 
```

查询中的数据应正确转义。**

# javascript - 这个叫什么名字？

> ID：14123571
> 
> 赞同：6
> 
> 时间：2013-01-02T14:12:52.770
> 
> 标签：javascript

> **可能重复：**
> [解释 JavaScript 封装的匿名函数语法](https://stackoverflow.com/questions/1634268/explain-javascripts-encapsulated-anonymous-function-syntax)

我不完全明白这是做什么的，所以我想在谷歌中查找它，但我没有找到任何东西并意识到我不知道它的名字；所以我的问题是：这个结构的名称是什么（？）：

```
( function ( ... ) {} )( jQuery, window, document ); 
```

提前谢谢各位。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T14:13:41.267

[正如其他人也回答](https://stackoverflow.com/a/14123589/1583)的那样，它是一个[自执行匿名函数](http://markdalgleish.com/2011/03/self-executing-anonymous-functions/)，或[立即调用函数表达式](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)(IIFE) 。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T14:13:44.983

它被称为自执行匿名函数。

目的是控制范围，这样您就不会引用全局变量或污染全局命名空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T14:13:41.493

这是一个[自我执行的匿名函数。](http://markdalgleish.com/2011/03/self-executing-anonymous-functions/)

您可以使用这些来防止污染或使用`window`new 访问全局 ( ) 命名空间`var`。

# teamcity - 在 Teamcity 构建配置名称中使用变量

> ID：14123574
> 
> 赞同：2
> 
> 时间：2013-01-02T14:12:58.313
> 
> 标签：teamcity, teamcity-7.0

我想在 TeamCity 配置名称中包含一个变量值。

例如，如果我的配置被调用`[Patch release 4.3] - quick build`，我希望从变量中获取“4.3”，例如`%release.number%`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:08:17.043

至少目前不支持名称中的引用（TeamCity 7.x）。请参阅/投票以获取相应的[功能请求](http://youtrack.jetbrains.com/issue/TW-22608)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T20:26:33.160

我目前的解决方法是使用 powershell 脚本通过 REST 接口更新名称

```
$wc = new-object System.Net.WebClient
$wc.Credentials = new-object System.Net.NetworkCredential("user", "pass", "domain")
$wc.UploadString("http://myserver/httpAuth/app/rest/buildTypes/id:<build_id>/name","Put","%branch_name%") 
```

[请参阅http://confluence.jetbrains.com/display/TW/REST+API+Plugin](http://confluence.jetbrains.com/display/TW/REST+API+Plugin)上的“项目设置”

# android - Android Facebook api 3.0 错误：无法使用空调用包调用 LoginActivity

> ID：14123580
> 
> 赞同：20
> 
> 时间：2013-01-02T14:13:25.487
> 
> 标签：android, facebook, facebook-android-sdk, tabactivity

我正在尝试将 android 应用程序与新的 facebook 3.0 api 集成，但我得到了这个例外：

> java.lang.RuntimeException：无法恢复活动 {dk.imu.konnekt/com.facebook.LoginActivity}：com.facebook.FacebookException：无法使用 null 调用包调用 LoginActivity。如果调用者的launchMode 是singleInstance，就会发生这种情况。

我已经搜索过这个错误，但似乎没有其他人对此有任何问题。我想这是因为我为每个选项卡使用了 TabHost 和 TabsGroupActivities。但我不知道如何解决它。

我在这里添加了相关代码：

```
public class MainTabActivity extends TabActivity {    
    public void onCreate(Bundle savedInstanteState){
        super.onCreate(savedInstanteState);
        setContentView(R.layout.tab_layout);
        TabHost tabHost = getTabHost();

        View shareTab = getLayoutInflater().inflate(R.layout.share_tab, null);
        tabHost.addTab(tabHost.newTabSpec("Share").setIndicator(shareTab)
        .setContent(new Intent(MainTabActivity.this, ShareGroupActivity.class)));

        ...
    }
} 
```

-

```
public class ShareGroupActivity extends TabsGroupActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        startChildActivity("ShareActivity", new Intent(this, ShareActivity.class));
    }
} 
```

-

```
public class ShareActivity extends BaseActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.share);

        testFacebookConnection();
    }

    public void testFacebookConnection(){
        Session session = new Session(this);
        Session.setActiveSession(session);
        SessionState state = session.getState();

        Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

        Session.StatusCallback statusCallback = 
            new Session.StatusCallback() {
            @Override
            public void call(Session session, SessionState state, Exception exception) {
                Toast.makeText(ShareActivity.this, "Facebook session status changed", Toast.LENGTH_SHORT).show(); 
            }
        };

        if (!session.isOpened() && !session.isClosed() && session.getState() != SessionState.OPENING) {
            OpenRequest open = new OpenRequest(this).setCallback(statusCallback);
            List<String> permission = new ArrayList<String>();
            permission.add("publish_actions");
            open.setPermissions(permission);
            session.openForPublish(open);
        } else {
            Session.openActiveSession(this, true, statusCallback);
        }
    }   

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
    }
} 
```

关于如何解决它的任何线索？

**更新 1 堆栈跟踪：**

> 致命异常：主要 java.lang.RuntimeException：无法恢复活动 {dk.imu.konnekt/com.facebook.LoginActivity}：com.facebook.FacebookException：无法使用空调用包调用 LoginActivity。如果调用者的launchMode 是singleInstance，就会发生这种情况。在 android.app.ActivityThread.performResumeActivity(ActivityThread.java:2812) 在 android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2851) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2234) 在 android.app。 ActivityThread.access$600(ActivityThread.java:139) at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261) at android.os.Handler.dispatchMessage(Handler.java:99) android.os.Looper.loop (Looper.java:154) 在 android.app.ActivityThread.main(ActivityThread.java:4945) 在 java.lang.reflect.Method。在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 在 com.android.internal 的 java.lang.reflect.Method.invoke(Method.java:511) 的 invokeNative(Native Method)。 dalvik.system.NativeStart.main(Native Method) 处的 os.ZygoteInit.main(ZygoteInit.java:551) 原因：com.facebook.FacebookException：无法使用空调用包调用 LoginActivity。如果调用者的launchMode 是singleInstance，就会发生这种情况。在 com.facebook.LoginActivity.onResume(LoginActivity.java:110) 在 android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1236) 在 android.app.Activity.performResume(Activity.java:4613) 在 android.app。 ActivityThread.performResumeActivity(ActivityThread.java:2796) ... 12 更多 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) at dalvik.system.NativeStart.main(Native Method) 原因：com. facebook.FacebookException：无法使用空调用包调用 LoginActivity。如果调用者的launchMode 是singleInstance，就会发生这种情况。在 com.facebook.LoginActivity.onResume(LoginActivity.java:110) 在 android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1236) 在 android.app.Activity.performResume(Activity.java:4613) 在 android.app。 ActivityThread.performResumeActivity(ActivityThread.java:2796) ... 12 更多 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) at dalvik.system.NativeStart.main(Native Method) 原因：com. facebook.FacebookException：无法使用空调用包调用 LoginActivity。如果调用者的launchMode 是singleInstance，就会发生这种情况。在 com.facebook.LoginActivity.onResume(LoginActivity.java:110) 在 android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1236) 在 android.app.Activity.performResume(Activity.java:4613) 在 android.app。 ActivityThread.performResumeActivity(ActivityThread.java:2796) ... 12 更多 FacebookException：无法使用空调用包调用 LoginActivity。如果调用者的launchMode 是singleInstance，就会发生这种情况。在 com.facebook.LoginActivity.onResume(LoginActivity.java:110) 在 android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1236) 在 android.app.Activity.performResume(Activity.java:4613) 在 android.app。 ActivityThread.performResumeActivity(ActivityThread.java:2796) ... 12 更多 FacebookException：无法使用空调用包调用 LoginActivity。如果调用者的launchMode 是singleInstance，就会发生这种情况。在 com.facebook.LoginActivity.onResume(LoginActivity.java:110) 在 android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1236) 在 android.app.Activity.performResume(Activity.java:4613) 在 android.app。 ActivityThread.performResumeActivity(ActivityThread.java:2796) ... 12 更多

**更新2：** 我查看了代码，找到了startChildActivity的实现：

```
public void startChildActivity(String Id, Intent intent) {     
   Window window = getLocalActivityManager().startActivity(Id,intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
   if (window != null) {
       mIdList.add(Id);
       setContentView(window.getDecorView()); 
   }    
} 
```

它使用标志 FLAG_ACTIVITY_CLEAR_TOP。我试图删除它，但结果没有改变。

**更新 3：**

[https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/LoginActivity.java](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/LoginActivity.java)

Facebook 代码使用

```
callingPackage = getCallingPackage(); 
```

和

```
if (callingPackage == null) {
       throw new FacebookException(NULL_CALLING_PKG_ERROR_MSG);
} 
```

[http://developer.android.com/reference/android/app/Activity.html#getCallingPackage()](http://developer.android.com/reference/android/app/Activity.html#getCallingPackage%28%29)

这个方法有个说明：

> 如果调用活动不期望结果（即它没有使用包含请求代码的 startActivityForResult(Intent, int) 形式），那么调用包将为空。

在 startChildActivity 方法中，我在扩展 ActivityGroup 的 TabsGroupActivity 中使用 getLocalActivityManager().startActivity 来处理选项卡活动。 [http://developer.android.com/reference/android/app/LocalActivityManager.html#startActivity(java.lang.String, android.content.Intent)](http://developer.android.com/reference/android/app/LocalActivityManager.html#startActivity%28java.lang.String,%20android.content.Intent%29)

此方法与注释中所说的不同。它不期望结果并且不使用 startActivityForResult 方法。该方法还确保类似于单实例启动模式。我应该如何更改此方法的实现，以便它可以与 facebook 一起使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T15:55:33.473

我设法找到了我的问题。虽然我没有设置

android:launchMode="singleTask"

我的 LoginActivity 有

机器人：noHistory =“真”

这导致了该异常。我将 noHistory 设为 true 是因为我不希望用户在登录后的第一个活动上按下返回按钮并返回登录屏幕。现在我需要找到另一个解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T08:48:17.690

经过大量搜索后，我发现似乎没有办法使用选项卡中使用的 LocalActivityManager 来 startActivityForResult 。

所以我最终接受了它需要一个充满整个屏幕的活动。该活动仅在网络连接良好的情况下显示一秒钟左右 - 我还通过重新发布错误选项来实现它..

开始发布活动：

```
Intent intent = new Intent(this, FacebookShareActivity.class);
intent.putExtra(Constants.FACEBOOK_MESSAGE, shareMessage.getMessage());
startActivityForResult(intent, 1); 
```

Facebook 分享活动代码 - 发布到用户墙：

```
public class FacebookShareActivity extends Activity {
    String message;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.facebook_publishing);

        message = getIntent().getExtras().getString(Constants.FACEBOOK_MESSAGE);
        createFacebookConnection();
    }

    public void republishButton_Click(View view){
        setVisibilityForRepublishButton(false);
        createFacebookConnection();
    }

    public void createFacebookConnection() {
        Session session = new Session(this);
        Session.setActiveSession(session);

        Settings.addLoggingBehavior(LoggingBehavior.INCLUDE_ACCESS_TOKENS);

        Session.StatusCallback statusCallback = new Session.StatusCallback() {
            @Override
            public void call(Session session, SessionState state, Exception exception) {
                String message = "Facebook session status changed - " + session.getState() + " - Exception: " + exception;
                //Toast.makeText(FacebookShareActivity.this, message, Toast.LENGTH_SHORT).show();
                Log.w("Facebook test", message);

                if (session.isOpened() || session.getPermissions().contains("publish_actions")) {
                    publishToWall();
                } else if (session.isOpened()) {
                    OpenRequest open = new OpenRequest(FacebookShareActivity.this).setCallback(this);
                    List<String> permission = new ArrayList<String>();
                    permission.add("publish_actions");
                    open.setPermissions(permission);
                    Log.w("Facebook test", "Open for publish");
                    session.openForPublish(open);
                }
            }
        };

        if (!session.isOpened() && !session.isClosed() && session.getState() != SessionState.OPENING) {
            session.openForRead(new Session.OpenRequest(this).setCallback(statusCallback));
        } else {
            Log.w("Facebook test", "Open active session");
            Session.openActiveSession(this, true, statusCallback);
        }
    }

    private void setVisibilityForRepublishButton(Boolean visible) {
        ((Button) findViewById(R.id.republishButton)).setVisibility(visible ? View.VISIBLE : View.GONE);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
        //Toast.makeText(FacebookShareActivity.this, "onActivityResult", Toast.LENGTH_SHORT).show();
    }

    void publishToWall() {
        Session session = Session.getActiveSession();

        Bundle postParams = new Bundle();
        postParams.putString("message", message);

        final Context context = this;
        Request.Callback callback = new Request.Callback() {
            public void onCompleted(Response response) {
                FacebookRequestError error = response.getError();
                if (error != null) {
                    setVisibilityForRepublishButton(true);
                    Toast.makeText(context, error.getErrorMessage(), Toast.LENGTH_SHORT).show();
                } else {
                    JSONObject graphResponse = response.getGraphObject().getInnerJSONObject();
                    String postId = null;
                    try {
                        postId = graphResponse.getString("id");
                    } catch (JSONException e) {
                        setVisibilityForRepublishButton(true);
                        Log.i("Facebook error", "JSON error " + e.getMessage());
                    }
                    //Toast.makeText(context, postId, Toast.LENGTH_LONG).show();
                    finish();
                }
            }
        };

        Request request = new Request(Session.getActiveSession(), "me/feed", postParams, HttpMethod.POST, callback);

        RequestAsyncTask task = new RequestAsyncTask(request);
        task.execute();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-14T14:08:22.870

我遇到了同样的问题：尝试使用 SDK 内部提供的对话框登录 facebook，但来自一个选项卡组内的活动；就像上面的 ShareActivity。

我所做的基本上是在 ShareActivity 的父活动（即 ShareGroupActivity）上调用 startActivityForResult，而不是在 ShareActivity 上调用它。

所以 1，在 ShareGroupActivity 中添加这个：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    System.out.println("facebook status called");
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
} 
```

2 你需要修改 Session 类，在 FacebookSDK 项目中，在 src com.facebook 下

2.1 添加一个布尔成员

```
public boolean insideTabGroup; 
```

2.2 修改StartActivityDelegate，即session用来打开登录；添加布尔值作为参数

```
interface StartActivityDelegate {
    public void startActivityForResult(Intent intent, int requestCode, boolean insideTabGroup);

    public Activity getActivityContext();
} 
```

2.3 在内部类AuthorizationRequest里面，修改这个delegate的实现：

```
 AuthorizationRequest(final Activity activity) {
        startActivityDelegate = new StartActivityDelegate() {
            @Override
            public void startActivityForResult(Intent intent, int requestCode, boolean insideTabGroup) {
                if(insideTabGroup) {
                    ActivityGroup parentActivity = (ActivityGroup) activity.getParent();
                    parentActivity.startActivityForResult(intent,requestCode);

                } else {
                    activity.startActivityForResult(intent, requestCode);
                }
            }

            @Override
            public Activity getActivityContext() {
                return activity;
            }
        };
    } 
```

2.4 此外，修改 AuthorizationRequest 的其他构造函数，只需添加布尔参数即可。因为我不使用活动以外的其他地方登录 facebook，所以没关系。

2.5 修改Session类的tryLoginActivity方法，使用布尔成员作为参数：

```
private boolean tryLoginActivity(AuthorizationRequest request) {
    Intent intent = getLoginActivityIntent(request);

    if (!resolveIntent(intent)) {
        return false;
    }

    try {
        request.getStartActivityDelegate().startActivityForResult(intent, request.getRequestCode(),this.insideTabGroup);

    } catch (ActivityNotFoundException e) {
        return false;
    }

    return true;
} 
```

3 在会话中设置布尔成员：

```
Session session = Session.getActiveSession();
session.insideTabGroup = true; 
```

这应该够了吧。

镉

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-22T17:00:01.037

我在 Parse.com Facebook SDK 集成中遇到了同样的错误，我错过了[文档](https://www.parse.com/docs/android_guide#fbusers)`ParseFacebookUtils.finishAuthentication`中提到的调用。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);
  ParseFacebookUtils.finishAuthentication(requestCode, resultCode, data);
} 
```

# iphone - 倒数计时器期间的事件处理与 UIProgressView

> ID：14123585
> 
> 赞同：1
> 
> 时间：2013-01-02T14:13:40.893
> 
> 标签：iphone, objective-c, ios, xcode

我希望这不是一个愚蠢的问题，因为我已经用谷歌搜索并阅读了很多其他类似的问题，但我已经在这个问题上搞砸了好几天。

我已经使用 NSTimer 和 UIProgressView 实现了一个倒数计时器，但是我想用这个时间做更多事情，即当计时器到达最后 10 秒时播放警报声音。

这是我所做的：

```
-(void) updateTimer
{
    if (time <= 0.0f)
    {

     //Invalidate timer when time reaches 0
         [timer invalidate];
         [[AudioManager sharedManager] muteGameClock1Sound];    
         [self showGameOverViewController];
     }
     else
     {
         time -= 0.1;
         [timeProgressView setProgress:time/totalTime animated:YES];

         if (time < 10 && pauseView)
         {
            [[AudioManager sharedManager] playGameClock1Sound];
         }
     }

} 
```

并在`viewDidLoad`：

```
timeProgressView.progress = 1;
time = [ConfigFileManager sharedManager].timePerQuestion.intValue * [DatabaseManager sharedManager].numberOfQuestions;
totalTime = [ConfigFileManager sharedManager].timePerQuestion.intValue * [DatabaseManager sharedManager].numberOfQuestions;
timer = [NSTimer scheduledTimerWithTimeInterval: 0.1f target: self             selector: @selector(updateTimer) userInfo: nil repeats: YES]; 
```

和`pauseGame`方法：

```
-(IBAction)pauseGame:(id)sender
{
    self.view.backgroundColor = [UIColor colorWithWhite: 0.0 alpha: 0.4];   
    pauseView = [[UIView alloc] initWithFrame: CGRectMake(0, 0, 250, 150)];
    pauseView.backgroundColor = [UIColor colorWithWhite: 0.0 alpha: 0.4];
    pauseView.center = CGPointMake(self.view.bounds.size.width/2, self.view.bounds.size.height/2);
    pauseView.clipsToBounds = YES;
    if ([pauseView.layer respondsToSelector: @selector(setCornerRadius:)])
        [(id) pauseView.layer setCornerRadius: 10];

    resumeButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 40, 40)];
    resumeButton.center = CGPointMake(pauseView.bounds.size.width/4, pauseView.bounds.size.height/2);
    [resumeButton setBackgroundImage:[UIImage imageNamed:[ConfigFileManager sharedManager].buttonBackground] forState:UIControlStateNormal];
    [resumeButton setBackgroundImage:[UIImage imageNamed:[ConfigFileManager sharedManager].buttonBackgroundSelected] forState:UIControlStateSelected];
    [resumeButton setImage:[UIImage imageNamed:[ConfigFileManager sharedManager].messageResumeButton] forState:UIControlStateNormal];
    [resumeButton addTarget:self action:@selector(resumeTheGame) forControlEvents:UIControlEventTouchUpInside];

    restartButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 40, 40)];
    restartButton.center = CGPointMake(pauseView.bounds.size.width/2, pauseView.bounds.size.height/2);
    [restartButton setBackgroundImage:[UIImage imageNamed:[ConfigFileManager sharedManager].buttonBackground] forState:UIControlStateNormal];
    [restartButton setBackgroundImage:[UIImage imageNamed:[ConfigFileManager sharedManager].buttonBackgroundSelected] forState:UIControlStateSelected];
    [restartButton setImage:[UIImage imageNamed:[ConfigFileManager sharedManager].messageReplayButton] forState:UIControlStateNormal];

    [restartButton addTarget:self action:@selector(restartTheGame) forControlEvents:UIControlEventTouchUpInside];

    quitButton = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, 40, 40)];
    quitButton.center = CGPointMake(pauseView.bounds.size.width*3/4, pauseView.bounds.size.height/2);
    [quitButton setBackgroundImage:[UIImage imageNamed:[ConfigFileManager sharedManager].buttonBackground] forState:UIControlStateNormal];
    [quitButton setBackgroundImage:[UIImage imageNamed:[ConfigFileManager sharedManager].buttonBackgroundSelected] forState:UIControlStateSelected];
    [quitButton setImage:[UIImage imageNamed:[ConfigFileManager sharedManager].messageQuitButton] forState:UIControlStateNormal];

    [quitButton addTarget:self action:@selector(showGameOverViewController) forControlEvents:UIControlEventTouchUpInside];

    [pauseView addSubview:resumeButton];
    [pauseView addSubview:restartButton];
    [pauseView addSubview:quitButton];
    [self.view addSubview: pauseView];
    choice1Button.userInteractionEnabled = NO;
    choice2Button.userInteractionEnabled = NO;
    choice3Button.userInteractionEnabled = NO;
    choice4Button.userInteractionEnabled = NO;
    choice5Button.userInteractionEnabled = NO;
    pauseButton.userInteractionEnabled = NO;

} 
```

问题是该`playGameClock1Sound`方法不是以这种方式调用的，但是当我说：`if (!pauseView && time > 10)`这不是合理的，然后在这种情况下，当按下 pauseButton 并因此`pauseView`is时，再次调用`TRUE`该方法。`playGameClock1Sound`

如果有人帮助我解决这个愚蠢的问题，我将非常感激，如果您也告诉我如何处理暂停/恢复，我将更加感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:22:10.340

你能展示一下 pauseView 是如何设置的吗？如果你尝试这样的事情可能会更简单......

您所做的一切似乎都很好，所以我认为问题在于您如何设置 pauseView 布尔值。

另外，您正在播放的音频文件是否短于或等于计时器延迟时间？如果不是，它将在完成之前再次播放。

```
-(void) updateTimer
{
    //stop counting if the view is paused
    if(pauseView)
    {
        return;
    }

    //done
    if (time <= 0.0f)
    {
        //Invalidate timer when time reaches 0
        [timer invalidate];
        [[AudioManager sharedManager] muteGameClock1Sound]; 
        [self showGameOverViewController];
    }
    else
    {
        time -= 0.1;
        [timeProgressView setProgress:time/totalTime animated:YES]; 
        if (time < 10)
        {
            NSLog("Play some audio");
            [[AudioManager sharedManager] playGameClock1Sound];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:45:51.957

行。实际上，这是我在按下恢复按钮时获得计时器恢复所缺少的：

```
pauseView = nil; 
```

将其添加到`resumeTheGame`方法中，问题就解决了。

# python - 在睡眠循环上实现信号处理

> ID：14123592
> 
> 赞同：0
> 
> 时间：2013-01-02T14:14:05.287
> 
> 标签：python, unix, signals, sleep, busy-waiting

我正在开发的应用程序中的一个模块旨在用作 Linux 上的长时间运行进程，我希望它能够优雅地处理 SIGTERM、SIGHUP 和可能的其他信号。程序的核心部分实际上是一个循环，它周期性地运行一个函数（这反过来又唤醒另一个线程，但这并不重要）。它或多或少看起来像这样：

```
while True: 
    try:
        do_something()
        sleep(60)
    except KeyboardInterrupt:
        break

cleanup_and_exit() 
```

我现在要添加的是捕获 SIGTERM 并退出循环，就像`KeyboardInterrupt`异常一样。

我的一个想法是添加一个标志，该标志将由信号处理函数设置为 True ，并用 sleep(0.1) 或其他什么替换 sleep(60) ，并用一个计数秒的计数器：

```
_exit_flag = False
while not _exit_flag: 
    try:
        for _ in xrange(600): 
            if _exit_flag: break
            do_something()
            sleep(0.1)

    except KeyboardInterrupt:
        break

cleanup_and_exit() 
```

和其他地方：

```
def signal_handler(sig, frame): 
    _exit_flag = True 
```

但我不确定这是最好/最有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:36:13.000

与其在主循环中使用哨兵，因此不得不比您真正想要检查的更频繁地唤醒，为什么不将清理推送到处理程序中呢？就像是：

```
class BlockingAction(object):

    def __new__(cls, action):

        if isinstance(action, BlockingAction):
           return action
        else:
           new_action = super(BlockingAction, cls).__new__(cls)
           new_action.action = action
           new_action.active = False
           return new_action

    def __call__(self, *args, **kwargs):

        self.active = True
        result = self.action(*args, **kwargs)
        self.active = False
        return result

class SignalHandler(object):

    def __new__(cls, sig, action):

        if isinstance(action, SignalHandler):
            handler = action
        else:
            handler = super(SignalHandler, cls).__new__(cls)
            handler.action = action
            handler.blocking_actions = []
        signal.signal(sig, handler)
        return handler

    def __call__(self, signum, frame):

        while any(a.active for a in self.blocking_actions):
            time.sleep(.01)
        return self.action()

    def blocks_on(self, action):

        blocking_action = BlockingAction(action)
        self.blocking_actions.append(blocking_action)
        return blocking_action

def handles(signal):

    def get_handler(action):

        return SignalHandler(signal, action)

    return get_handler

@handles(signal.SIGTERM)
@handles(signal.SIGHUP)
@handles(signal.SIGINT)
def cleanup_and_exit():
    # Note that this assumes that this method actually exits the program explicitly
    # If it does not, you'll need some form of sentinel for the while loop
    pass

@cleanup_and_exit.blocks_on
def do_something():
    pass

while True:
    do_something()
    time.sleep(60) 
```

# python - TA-Lib 安装错误：必须使用启用了 unicode 的 python

> ID：14123593
> 
> 赞同：1
> 
> 时间：2013-01-02T14:14:05.067
> 
> 标签：python, windows, module, installation, cython

当我尝试使用 Python 和 Cython 的包装器为 Python 安装 ta-lib（最初用 C 编码的技术分析库）时，我收到一条错误消息，提示“必须使用启用了 unicode 的 python”。我已经尝试谷歌搜索无济于事。

这是完整的错误消息：

```
 C:\Python27\Lib\site-packages\ta-lib-master>python setup.py install
    running install
    running build
    running build_ext
    skipping 'talib.c' Cython extension (up-to-date)
    building 'talib' extension
    C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.exe /c /nologo /Ox
    /MD /W3 /GS- /DNDEBUG -IC:\Python27\lib\site-packages\numpy\core\include -Ic:\ms
    ys\1.0\local\include -IC:\Python27\include -IC:\Python27\PC /Tctalib.c /Fobuild\
    temp.win32-2.7\Release\talib.obj
    talib.c
    c:\python27\lib\site-packages\numpy\core\include\numpy\npy_common.h(85) : fatal
    error C1189: #error :  Must use Python with unicode enabled.
    error: command '"C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\BIN\cl.ex
    e"' failed with exit status 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:22:17.940

您的 Python 二进制文件是在禁用 Unicode 的情况下编译的 ( `configure --enable_unicode=no`)。NumPy*需要*启用 Unicode 支持的 Python 构建。

您必须安装一个启用它的软件（默认）。

如果你发现你的 Python 已经启用了 Unicode（运行`python`，输入`print u''`并且你没有收到任何错误），那么构建系统将无法从中获取 Python C 头文件`C:\Python27\include`。具体来说，该`pyconfig.h`文件可能会丢失：

```
$ grep -i unicode /usr/include/python2.6/pyconfig.h
   Include/unicodeobject.h). */
/* Define as the integral type used for Unicode representation. */
#define PY_UNICODE_TYPE unsigned long
/* Define as the size of the unicode type. */
#define Py_UNICODE_SIZE 4
/* Define if you want to have a Unicode type. */
#define Py_USING_UNICODE 1
   supplied by Python itself. (see Include/unicodectype.h). */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T17:57:30.860

我不确定您对代码有多少控制权——但尝试使用 numpy/ndarrayobject.h 构建我自己的代码，解决方案是在包含 ndarrayobject 标头之前 #include "Python.h"。

# algorithm - 整数列表的子集计算

> ID：14123595
> 
> 赞同：2
> 
> 时间：2013-01-02T14:14:15.697
> 
> 标签：algorithm, sorting, set, bloom-filter

我目前正在实施一种算法，其中一个特定步骤要求我以下列方式计算子集。

想象一下，我有一组（可能是数百万个）整数。每个集合可能包含大约 1000 个元素：

```
Set1: [1, 3, 7]
Set2: [1, 5, 8, 10]
Set3: [1, 3, 11, 14, 15]
...,
Set1000000: [1, 7, 10, 19] 
```

想象一个特定的输入集：

```
InputSet: [1, 7] 
```

我现在想快速计算这个 InputSet 是哪个子集。在这种特殊情况下，它应该返回 Set1 和 Set1000000。

现在，暴力破解它需要太多时间。我也可以通过 Map/Reduce 进行并行化，但我正在寻找更智能的解决方案。此外，在一定程度上，它应该是内存高效的。我已经通过使用 BloomFilters 来优化计算，以快速消除输入集永远不可能是子集的集。

我错过了什么聪明的技术？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:21:09.893

嗯 - 似乎瓶颈是集合的数量，所以不是通过迭代所有集合来找到一个集合，您可以通过从元素映射到包含它们的所有集合来提高性能，并返回包含您搜索的所有元素的集合为了。

[这与在信息检索](http://en.wikipedia.org/wiki/Information_retrieval)领域搜索[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)时的AND查询非常相似。

在您的示例中，您将拥有：

```
1 -> [set1, set2, set3, ..., set1000000]
3 -> [set1, set3]
5 -> [set2]
7 -> [set1, set7]
8 -> [set2]
... 
```

**编辑：**
在 IR 的倒排索引中，为了节省空间，我们有时会使用*d-gaps* - 这意味着我们存储文档之间的偏移量而不是实际数字。例如，`[2,5,10]`将成为`[2,3,5]`. 这样做并使用[增量编码](http://en.wikipedia.org/wiki/Delta_encoding)来表示数字在空间方面往往有很大帮助。
（当然也有一个缺点：您需要阅读整个列表才能找到其中是否有特定的集合/文档，并且不能使用二进制搜索，但有时值得，特别是如果它是拟合之间的差异是否索引到 RAM 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:21:33.577

如何存储包含每个数字的集合列表？

```
1 -- 1, 2, 3, 1000000
3 -- 1, 3
5 -- 2
etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:32:09.303

1.  从输入集的最大数 (7) 开始搜索并消除其他子集（将返回 Set1 和 Set1000000）。

2.  在剩余集合中搜索其他输入元素 (1)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T15:34:48.903

扩展 amit 的解决方案，而不是存储实际数字，您可以只存储间隔及其相关集。

例如使用 5 的间隔大小：

```
 (1-5): [1,2,3,1000000]
 (6-10): [2,1000000]
 (11-15): [3]
 (16-20): [1000000] 
```

在 (1,7) 的情况下，您应该考虑区间 (1-5) 和 (5-10)（这可以通过知道区间的大小简单地确定）。与这些范围相交会得到 [2,1000000]。集合的二分搜索表明，确实，(1,7) 存在于两个集合中。

尽管您需要检查每个集合的最小值和最大值，以更好地了解间隔大小应该是多少。例如，如果最小值和最大值从 1 变为一百万，则 5 可能是一个糟糕的选择。

您可能应该保留它，以便可以使用二进制搜索来检查值，因此子集范围应该类似于 (min + max)/N，其中 2N 是需要二进制搜索的最大值数每组。例如，“集合 3 是否包含从 5 到 10 的任何值？” 这是通过找到最接近 5 (3) 和 10 (11) 的值来完成的，在这种情况下，不，它没有。您必须遍历每个集合并对可能在集合内的间隔值进行二进制搜索。这意味着确保当集合仅达到 10 时，您不会去搜索 100。

您也可以只存储范围（最小值和最大值）。但是，问题是我怀疑您的数字会被聚集在一起，因此没有太多用处。尽管如前所述，它可能对确定如何设置间隔很有用。

选择使用什么范围还是很麻烦的，太大了，构建数据结构需要很长时间（1000 *million * log(N)）。太小了，你会开始遇到空间问题。范围的理想大小可能是这样的：它确保与每个范围相关的集合的数量大致相等，同时还确保范围的总数不会太高。

编辑：一个好处是您实际上不需要存储所有间隔，只需要存储您需要的间隔。虽然，如果您有太多未使用的间隔，明智的做法可能是增加间隔并拆分当前间隔以确保搜索速度快。如果游行时间不是主要问题，则尤其如此。

# module - 在 opencart 中创建自定义提要

> ID：14123596
> 
> 赞同：0
> 
> 时间：2013-01-02T14:14:16.197
> 
> 标签：module, feed, opencart, cron-task

我想在 opencart 中创建产品提要。但是我有问题，我不明白如何在 3 小时内定期更新该提要。

**是否有任何示例或教程如何创建自动流程？**

因为我正在考虑的解决方案是`create controller witch updates feed upon execution -> create unix or winx cron-job`，但是当我浏览互联网时，这些提要扩展不使用那些......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:17:51.697

可以通过两种一般方式创建 XML 提要：

1.  在特定 URL 下有一项服务，当点击该服务时，将动态创建最新的 XML
2.  有一个在特定时间手动运行的服务，该服务创建一个静态 XML 提要，然后访问和读取该提要

我猜您在混合第一种情况时询问第二种情况。

要回答您的问题 - 您需要使用第二种情况，因此需要一个控制器来创建保存在服务器某处的静态 XML 提要文件。然后将通过 crontab 调用该控制器的操作以更新 XML 文件（或者只是丢弃旧文件并创建一个新文件）。

我在这里没有看到任何问题......你呢？

# c# - 删除 .NET 项目中的程序集文件版本依赖性或“dll 与旧版本的向后兼容性”

> ID：14123600
> 
> 赞同：0
> 
> 时间：2013-01-02T14:14:40.340
> 
> 标签：c#, .net, manifest, assemblyversions, publisher-policy

我的项目遇到了装配兼容性问题。

1) 我有一个 .NET 项目，我在其中指定了一个程序集版本。“主要部分。次要部分。构建部分。修订部分”。2) 对于下一个构建，程序集版本递增。3）有许多文件（dll）没有任何变化，但它们的程序集版本已更新。4) 较新的“dll”文件与旧版本的相同 dll 文件不兼容。

我试图获取更多信息以在线解决此问题。

1）有一个发布者政策的概念，我可以在其中指定旧版本号。2) 为所有类添加到项目中的清单文件，并提供在当前版本不可用时可以使用的可能版本范围。

我不确定，如果我做得对。发布者策略方法和清单文件方法有什么区别。

是否可以对“dll”进行向后兼容。

# tcl - 什么方法来收缩一个对象更有效？

> ID：14123601
> 
> 赞同：1
> 
> 时间：2013-01-02T14:14:42.347
> 
> 标签：tcl, itcl

我有一个有几个内部值的类：

```
private variable layer_type
private variable color
private variable name
private variable thickness
private variable conductivity
private variable permittivity
private variable loss_tangent 
```

我想用用户提供给构造函数的值来启动它们，但是由于它们中有 7 个，为了减少混乱和代码大小，我在一个循环中完成了它：

```
constructor {in_layer_type in_color in_conductivity in_loss_tangent in_name in_permittivity in_thikness f_row frame} {
    foreach var [list layer_type color conductivity loss_tangent name permittivity thikness] {
        set $var [set in_$var]
    } 
```

在编写所有命令时，这种方法是否有任何区别（性能方面）`set`？

```
set layer_type $in_layer_type
set color $in_color
#...
set thickness $in_thickness 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T23:13:24.393

在严格的效率方面，把它全部写出来是最有效的方法。我建议你不要这样做！问题是它很难维护和使用（我不了解你，但我讨厌在*所有*语言中都有很多强制性位置参数的调用！）相反，尝试这样的事情：

```
constructor {f_row frame args} {
    foreach {var value} $args {
        if {[string match -* $var]} {
            set [string range $var 1 end] $value
        }
    }
    # ...
} 
```

是的，你需要写一些不同的东西来使用它：

```
TheClass theObjToMake $theFRow $theFrame -layer_type 12345 ... 
```

如果您这样做，还建议您使用 Itcl 的工具来设置默认值。选择一些明智的东西，这一切都会突然显得*很*自然。

# animation - 加载图像从 0 宽度到 100px 宽度与缓动

> ID：14123615
> 
> 赞同：0
> 
> 时间：2013-01-02T14:15:41.437
> 
> 标签：animation, jquery-easing

我需要在 div 中“滑入”（背景）图像。

当我加载页面时，一些带有 bg 图像或内部图像（并且溢出？）的 div 需要从 invisible/width=0 变为 100px 宽度。这需要缓解。

任何人都可以帮我解决js吗？

```
<div style="overflow:hidden; width:100px; height:40px;">
    <img src="someimg.png" height="40" width="100" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:41:17.200

这在文档就绪时使用 jquery。对于缓动可以使用标准 jquery 'linear'，但我包含了 jquery.easing 插件，您可以在其中使用不同的缓动选项。

[http://jsfiddle.net/DyW7M/1/](http://jsfiddle.net/DyW7M/1/)

```
$(document).ready(function () {
  $('#makeitlong').animate({ width: '400'}, 2000, 'linear');
});​ 
```

# python - PyQT中的光标消失了

> ID：14123617
> 
> 赞同：0
> 
> 时间：2013-01-02T14:15:46.790
> 
> 标签：python, pyqt4, onfocus

我有一个包含多个`QRowWidget`s 的窗口，它们是我定义的自定义小部件。这些`QRowWidget`s 包含`QLineEdit`s 和其他标准小部件。为了显示或隐藏 a 的某些部分`QRowWidget`，我超定义了`focusInEvent()`其中所有小部件的方法。它工作得很好，当我点击 时`QRowWidget`，隐藏的元素就会出现。

奇怪的是，闪烁的光标线没有出现在`QLineEdit`自定义小部件的 s 中。我可以通过单击鼠标或使用 Tab 来选择它们，并且发光效果表明`QLineEdit`在其中选择了，我可以在其中选择文本，或者在我单击的任何位置开始输入，但光标永远不会出现，它是很烦人。

我的第一个想法是它是 Mac 上的一个错误，但我在 SuSe Linux 上也有同样的经历。

我正在使用 python 2.7 和 PyQt4。

这是`__init__()`在`QRowWidget`：

```
 for i in self.findChildren(QWidget):
        i.focusInEvent = self.focusInEvent 
```

然后这是自己的`focusInEvent()`：

```
def focusInEvent(self, event):
    if self.pself.focusedLine:
        self.pself.focusedLine.setStyleSheet("color: #666;")
        self.pself.focusedLine.desc.hide()
        self.pself.focusedLine.closebutton.hide()
    self.setStyleSheet("color: #000;")
    self.desc.show()
    self.closebutton.show()
    self.pself.focusedLine = self 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:29:24.107

`focusInEvent()`我怀疑您在覆盖原始文件时没有调用它。您的函数应类似于：

```
 def focusInEvent(self,...):
     QParent.focusInEvent(self,...)
     # the rest of your code 
```

`QParent`您的小部件最近的基类在哪里。

要么，要么确保你调用`focusInEvent()`你的`QLineEdit`小部件作为你的函数的一部分。

鉴于评论，听起来您正在动态地重新分配`focusInEvent`自定义小部件中实例化的功能。我会为您使用的每个小部件创建一个派生类，这些小部件只是`focusInEvent`如上所述覆盖，或者包括一行

```
type(self).focusInEvent(self,..) 
```

在你的功能。

# cgi - 如何使用 Rebol 3 编写“Hello, World”CGI？

> ID：14123618
> 
> 赞同：8
> 
> 时间：2013-01-02T14:15:52.567
> 
> 标签：cgi, rebol, rebol3

让我们从一些简单的事情开始：一个带有被回显的字段的表单。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-06T17:16:44.377

在撰写本文时（2013-01），Rebol 3 仍然缺少与 Rebol 2 捆绑在一起的少数 CGI 支持功能。但是，如果您可以自己破解缺少的 CGI 支持，您仍然可以继续前进离开。

在我们开始之前，您需要将 R3 二进制文件存储在要运行 CGI 的机器上，并且您需要知道存储它的完整路径（为简单起见）。下面的例子假设一台 Unix 风格的机器在`/usr/local/bin/rebol3`.

**让我们从比您要求的更简单的事情开始**：一个只发送“Hello, World!”的 CGI。页：

```
#!/usr/local/bin/rebol3 -cs
REBOL []
prin [
    "Content-type: text/html" crlf
    crlf
    <!doctype html>
    <title> "Rebol 3 CGI Sample: Hello" </title>
    "Hello, World!"
] 
```

这与您在 R2 中编写的内容相同。

**继续进行一些更有趣的事情**：按照您的要求阅读和解析 HTML 表单提交。

为此，我们需要了解关于 CGI 的两件事：提交的数据作为标准输入传递给 CGI；其他 CGI 特定信息通过环境变量从网络服务器传递。我们可以通过端口访问R3中的输入数据，`system/ports/input`使用`get-env`native读取环境变量。

让我们将 HTML 表单本身嵌入到 CGI 中，并在 CGI 中进行模式切换：如果没有提交数据，则显示 HTML 表单；如果提交了数据，则对其进行处理并显示适当的响应。我们可以通过编写一个通过 HTTP 方法 POST 提交数据的表单来做到这一点，然后在 CGI 中检查它是通过 HTTP 方法 GET（无数据）还是 POST（表单数据）调用的。调用 CGI 脚本的方法可通过`REQUEST_METHOD`环境变量获得。

说了这么多，下面是完整的脚本，不用多说：

```
#!/usr/local/bin/rebol3 -cs
REBOL []

handle-get: function [] [
    prin [
        "Content-type: text/html" crlf
        crlf
        <!doctype html>
        <title> "Rebol 3 CGI Sample: Form" </title>
        <form method="POST">
            "Your name:"
            <input type="text" name="field">
            <input type="submit">
        </form>
    ]   
]

handle-post: function [] [
    data: to string! read system/ports/input
    fields: parse data "&="
    value: dehex select fields "field"
    prin [
        "Content-type: text/html" crlf
        crlf
        <!doctype html>
        <title> "Rebol 3 CGI Sample: Response" </title>
        "Hello," (join value "!")
    ]
]

main: does [
    switch get-env "REQUEST_METHOD" [
        "GET" [handle-get]
        "POST" [handle-post]
    ]
]

main 
```

理解这个脚本的最后一点是如何实际解析发送到 CGI 的 HTML 表单数据。Rebol 2 对此有一个`decode-cgi`辅助函数，而 Rebol 3 目前缺少该函数。

然而，对于基本形式，只要知道 CGI 数据是以一种编码方式发送的，该编码用 ; 分隔字段，`&`字段的名称和值用`=`;分隔。一切都是 URL 编码的。因此，如果我们提交上面嵌入的值为“Charlie”的表单，CGI 将接收`field=Charlie`作为输入。提交“Foo Bar”会发送“field=Foo%20Bar”。所以，再说一遍：对于基本表单，如上所示`parse ... "&="`（用于拆分字段和字段名称和值）和（用于解码 URL 编码）的组合就足够了。`dehex`

# c# - SQL Where 子句条件

> ID：14123624
> 
> 赞同：3
> 
> 时间：2013-01-02T14:16:12.553
> 
> 标签：c#, sql, where, where-clause

在 sql where 子句中；如果`pv.SalePrice`是`null`，我想用`pv.Price`。我怎样才能做到这一点？

```
WHERE    
    @FilterRangePriceValueMin < pv.SalePrice OR pv.SalePrice is null
     AND (@FilterRangePriceValueMax > pv.SalePrice OR pv.SalePrice is null) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T14:18:10.057

您可以使用该[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)函数按顺序尝试项目`NULL`，然后将第一个非空的项目进行比较。您还可以使用`BETWEEN`来避免两次写出调用：

```
WHERE
    COALESCE(pv.SalePrice, pv.Price)
    BETWEEN @FilterRangePriceValueMin AND @FilterRangePriceValueMax 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T14:19:08.203

您可以使用[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)which 在其参数中返回第一个非空表达式。

```
WHERE    
   @FilterRangePriceValueMin < COALESCE(pv.SalePrice, pv.Price) 
   AND @FilterRangePriceValueMax > COALESCE(pv.SalePrice, pv.Price) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:21:29.533

使用[`CASE`](http://msdn.microsoft.com/en-us/library/ms181765.aspx)声明

```
@FilterRangePriceValueMin < (CASE WHEN pv.SalePrice IS NULL THEN pv.Price ELSE pv.SalePrice END) OR pv.SalePrice is null
AND (@FilterRangePriceValueMax > (CASE WHEN pv.SalePrice IS NULL THEN pv.Price ELSE pv.SalePrice END) OR pv.SalePrice is null) 
```

或者你可以使用[`COALESCE`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)

> 返回其参数中的第一个非空表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T14:25:36.673

这可能有点牵强，因为价格通常没有指数化，通常不是很好的指数候选者。但是，如果您在 pv.SalePrice 上有一个很好的可用索引，并且在 pv.Price 上有另一个很好的可用索引，并且您的表很大，那么 a **`UNION`**on this 将比 COALESCE 运行得快得多：

```
SELECT
   ...
   FROM ...
   WHERE pv.SalePrice>=@FilterRangePriceValueMin 
     AND pv.SalePrice<=@FilterRangePriceValueMax
UNION
SELECT
   ...
   FROM ...
   WHERE pv.Price>=@FilterRangePriceValueMin
     AND pv.Price<=@FilterRangePriceValueMax 
```

这个想法是两个索引查询将比完整的表扫描更快。此外，如果可能的话最好使用`UNION ALL`，但我无法判断（从有限的信息中）你是否会得到重复。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T14:25:29.440

我建议使用 case 子句。

```
CASE WHEN pv.SalePrice IS NULL THEN pv.SalePrice ELSE ' ' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T14:31:35.547

如果我理解你，我不会尝试，但它可能对你有用。

```
(pv.SalePrice is not null and  (@FilterRangePriceValueMin < pv.SalePrice   AND @FilterRangePriceValueMax > pv.SalePrice ))
or 
(pv.SalePrice is null and  (@FilterRangePriceValueMin < pv.Price AND (@FilterRangePriceValueMax > pv.Price ) ) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-02T14:59:22.790

另一种方法使用`IFNULL`--------->`MYSQL`

```
WHERE
    IFNULL(pv.SalePrice, pv.Price)
    BETWEEN @FilterRangePriceValueMin AND @FilterRangePriceValueMax 
```

`NVL`--------------------------->`ORACLE`

```
WHERE
    NVL(pv.SalePrice, pv.Price)
    BETWEEN @FilterRangePriceValueMin AND @FilterRangePriceValueMax 
```

`ISNULL`--------------------------->`SQL SERVER`

```
WHERE
    ISNULL(pv.SalePrice, pv.Price)
    BETWEEN @FilterRangePriceValueMin AND @FilterRangePriceValueMax 
```

# mongodb - 使用 Doctrine MongoDB ODM 的 geonear 方法中的错误距离

> ID：14123627
> 
> 赞同：0
> 
> 时间：2013-01-02T14:16:13.970
> 
> 标签：mongodb, symfony, doctrine-odm

我正在将 DoctrineMongoDBBundle 与 Symfony2 一起使用，并且地理坐标有问题。这可以正常工作，但是当经度例如：0.635467 时，代码不起作用。我有更多的地理坐标，只有当它以 0 开头时才会失败。并且距离字段为 NULL。

这是我的代码：

```
$locations = $dm->createQueryBuilder('MyBundle:Location')
                    ->field('id')->in($arrayIds)
                    ->field('geocoordinates')
                    ->geoNear($geocodes['lat'],$geocodes['lon'])
                    ->getQuery()->execute()->toArray(); 
```

我正在关注这个链接：[http](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/geospatial-queries.html) : //docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/geospatial-queries.html 但使用geonear 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T16:39:38.237

查询构建器`geoNear()`方法不适用于字段。`near()`是跟随`field()`焦点的构建器方法。您可以在教义/mongodb 项目的[Builder.php](https://github.com/doctrine/mongodb/blob/master/lib/Doctrine/MongoDB/Query/Builder.php)中查看这两种构建器方法的作用。请注意，`geoNear()`更改查询类型（类似于什么`update()`）。然后在[Query.php](https://github.com/doctrine/mongodb/blob/master/lib/Doctrine/MongoDB/Query/Query.php)中检查查询类型（遵循 switch 语句）并确定我们如何对集合发出查询。有些是实际的查询操作，但像 map/reduce 和 geoNear 这样的东西是命令。

看看下面的代码是否有效：

```
$dm->createQueryBuilder('MyBundle:Location')
    ->geoNear($geocodes['lat'],$geocodes['lon'])
    ->field('id')->in($arrayIds)
    ->getQuery()->execute()->toArray(); 
```

如果没有，请调试 Query.php 传递给`Collection::near()`方法的值。`Query::getQuery()`或者，您可以使用该方法调试构建器生成的整个查询数组。

# drupal - Drupal：强制区域始终渲染？

> ID：14123628
> 
> 赞同：1
> 
> 时间：2013-01-02T14:16:17.920
> 
> 标签：drupal

我想始终渲染所有区域。即使它们不包含任何块。

我这样渲染我的区域（在`page.tpl.php`）：

```
<?php print render($page['region_name']); ?> 
```

这是我正在使用的代码，但这没有效果。

```
function theme_name_page_alter(&$page) {
    $regions = system_region_list($GLOBALS['theme'], REGIONS_ALL);
    foreach ($regions as $region => $name) {
        if(empty($page[$region])) {
            $page[$region] = array();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-09T11:57:51.940

您可以确保 Drupal 使用以下代码（在自定义模块中）呈现每个区域：

```
function hook_page_alter(&$page) {
    foreach($page as $region => $blocks) {
        if(is_array($blocks) && in_array($region, array('region_1', 'region_2', 'region_3'))) {
            if(count($blocks)==1) {
                $page[$region]['phantom_content']['#markup'] = ' ';
            }
        }
    }
} 
```

您需要将 region_1、region_2、region_3 替换为您要确保始终呈现的区域名称。

稍微解释一下代码，如果 blocks 数组的计数为 1，则表示它为空，因为它将始终包含 #sorted 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T18:57:36.507

这不仅仅是因为您没有为该区域分配任何块，而且几乎可以肯定是因为渲染数组是空的。请记住渲染函数的作用——它在渲染数组中的任何/所有元素和子元素上调用 drupal_render，将它们转换为 html 字符串以进行输出。如果没有可渲染元素，则​​不会返回任何 html。

渲染这些区域的正确（编程）方式是为每个区域定义一个渲染数组，将#markup 元素设置为您希望 Drupal 在那里输出的任何 html。这必须在您的自定义模块中完成。

如果您只需要从 gui 执行此操作，除了定义幻像块外，我看不到任何其他方法。在这种情况下，您可能应该重新考虑您要完成的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:43:13.417

我认为答案在于[region.tpl.php](http://api.drupal.org/api/drupal/modules!system!region.tpl.php/7)文件和相关[`template_preprocess_region()`](http://api.drupal.org/api/drupal/includes%21theme.inc/function/template_preprocess_region/7)函数。

模板文件检查是否有一个名为`$content`available 的有效变量，该变量是从预处理函数加载的。如果该`$content`数组为空，则条件将失败并且不会呈现任何标记（如果该区域不包含块，则会发生这种情况）。

尝试将 region.tpl.php 的副本添加到您的主题中，删除`if ($content):`条件，然后刷新 Drupal 的缓存。

# javascript - 发送 ajax 请求并通过prototype.js 得到响应

> ID：14123630
> 
> 赞同：1
> 
> 时间：2013-01-02T14:16:18.293
> 
> 标签：javascript, ajax, request, prototypejs, response

我尝试使用prototype.js 发送到[httpbin](http://httpbin.org/)请求

我的代码：

```
function loadTest() 
{ 
     new Ajax.Request('http://httpbin.org/get', { method:'get',
        // success request
        onSuccess: 
            function(transport) {
                alert("Success! \n\n" + transport.status);
        },
        // fail request
        onFailure: 
            function() { 
                alert('Something went wrong...'); 
            }
     });
} 
```

执行后我得到：`Success!`和`transport.status = 0`

为什么？如何正确发送请求并使用prototype.js 获得响应？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:45:49.123

你的代码没有错，除了一件事，你不能跨域`XMLHttpRequest`。

您应该使用启用[CORS](http://enable-cors.org/)的代理。

另一种选择是[JSONP](http://json-p.org/)请求。

正如我所见，它们都不适用于[httpbin](http://httpbin.org/)。

# asp.net-mvc - 以编程方式部署 MVC 4 应用程序

> ID：14123639
> 
> 赞同：0
> 
> 时间：2013-01-02T14:16:54.610
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我正在考虑以下场景：我有一个带有 Web 应用程序（包含一些 REST Web 服务）和一个控制台应用程序的解决方案，该应用程序负责监视主机服务器的资源（CPU、RAM 等）。我想实现以下功能：例如，当控制台应用程序看到我得到一个大于给定阈值的值（假设 CPU 使用率超过 70%）时，自动部署在新机器上（在同一网络上）。这可能与 Azure 环境类似，但我不确定，因为我从未使用过它（只是看了一些视频）。有没有人实现过类似的东西？这可以在我的机器上本地完成吗？非常感谢任何提示和答案。

谢谢，亚历克斯

# mysql - MySQL：快速 DISTINCT 查询的索引？

> ID：14123643
> 
> 赞同：4
> 
> 时间：2013-01-02T14:16:58.437
> 
> 标签：mysql, query-optimization

我需要设置哪些索引才能尽可能快地为某个列上的 DISTINCT 查询获得结果？

示例表列：

```
id        INTEGER
name      VARCHAR(32)
groupname VARCHAR(16) 
```

每隔一段时间，我需要获取所有组的列表，

```
SELECT DISTINCT groupname FROM data ORDER BY groupname 
```

该表可以有 > 200k 个条目，但只有大约十几个组。我不想为组名使用单独的表，因为数据通常是从 CSV 文件中导入的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:18:37.787

在这种情况下，索引`groupname`应该可以为您带来最好的结果。

如果这还不够好，可以考虑更多选项 - 首先，您可以缓存该查询的结果，以便仅在绝对必要时运行它。其次，您可以创建一个单独的表来存储`groupname`值并通过插入触发器填充它（这将避免更改您的 CSV 导入过程）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:45:35.973

对 groupname 进行索引将解决您的问题。如果您在插入/更新时非常担心查询的性能，那么请尝试“**列前缀索引**”而不是索引整个列。

仅在 varchar 上添加索引可能会减慢您的插入/更新速度，因为它需要为每次写入更新索引查找。有关更多信息，请阅读 BTree 索引算法

# android - Android Facebook SDK 响应语言

> ID：14123648
> 
> 赞同：0
> 
> 时间：2013-01-02T14:17:29.757
> 
> 标签：android, facebook, sdk, response

我正在开发一个使用新的 Facebook 3 SDK 的 Android 应用程序。我通过 FQL 向数据库发出请求，以获取例如未读的 Facebook 通知。这很好用，但只有响应的语言是错误的。
如果我从德国网络和智能手机发出请求，我会收到英文回复。为什么会这样？
我试图通过打开会话来设置语言，但没有办法。

谢谢和问候朱利安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T01:19:07.037

我相信您可以将 locale=de_DE 作为参数添加到您的 FQL 请求中。

# javascript - 设置多个数据表？

> ID：14123652
> 
> 赞同：0
> 
> 时间：2013-01-02T14:17:43.117
> 
> 标签：javascript, jquery, datatable

我有以下 jquery 来设置我的 dataTable 但是我遇到的问题是，当同一页面上存在两个具有相同表 id 的数据表时，在第一个加载后似乎无法正确加载。我正在使用循环来显示多个表，这就是为什么我在同一个屏幕上有多个表的原因。有没有办法使这项工作？也许以某种方式在每个名称循环时添加 ++1 ？我会在做+1时通过php代码循环JQ吗？

```
<script defer>
    $(window).load(function() {
        $('#backup-list').dataTable({
        "aaSorting": [[ 4, "desc" ]]
        } );
        $(window).resize();
    });

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:22:41.697

在 HTML 中，`id`每页只能使用一次。它们必须是独一无二的。

尝试为您的表指定不同的 ID：

```
$("#table1, #table2").dataTable(...); 
```

或者你可以给你的表一个类，它可以在一个页面上多次使用：

```
$(".your-tables").dataTable(...); 
```

# iphone - Instruments 内存泄漏与 ARC 混淆

> ID：14123653
> 
> 赞同：2
> 
> 时间：2013-01-02T14:17:45.317
> 
> 标签：iphone, objective-c, memory-leaks, automatic-ref-counting, instruments

早上好，

我正在对我一直在研究的这个应用程序进行一些微调，只是为了确保一切运行顺利并且没有发生内存泄漏。所以我使用 Instruments 运行我的应用程序，并选择了分配和泄漏工具。

我的应用程序运行得非常好，直到 Insturments 检测到恰好是 UIImage 的泄漏对象。让我感到困惑的是我使用的是 ARC，所以我的理解是所有的保留/释放/自动释放调用都在为我处理。

让我感到困惑的另一件事是，当我看到泄漏的扩展详细信息时，它显示责任框架是 [UIImage imageWithCGImage:scale:orientation] 并且我从未在整个应用程序中调用过该方法，我什至搜索了它在我的工作区中并没有得到任何结果。

当我双击泄漏的对象以在 Xcode 中为我打开它时，它只是打开了一个框架并显示“不可用”。截图如下：

![仪器截图](../Images/cbdc0c31adacfdba569ee5249ac91d63.png)

并且单击它右侧的 Xcode 徽标也没有任何帮助。我一直在尝试调试这可能是什么，这让我很难过。我确保 NSZombieEnabled 设置为 YES 以防我尝试使用已释放的对象，但我无法找到解决方案。为什么会发生这种情况（在 ARC 下），我该如何解决？

谢谢，

**编辑：这是我对泄漏的最新快照** ![这是我对泄漏的最新快照](../Images/0177aa0876d5768e7646ca16dd00da84.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:34:58.450

那么，泄漏可能来自框架内部的某个地方（UIKit 或更深）。如果是这样，那么您无能为力。要么是应用程序内部的某种“副作用”，后来在 UIKit 内部深处出现（[UIImage imageWithCGImage:scale:orientation]），要么是 UIKit 本身的问题。但最终很难确定！

使用 ARC 仍然不能保证 100% 无内存泄漏的代码！;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:41:13.430

**更新**：

在花了我一天的时间调试代码并希望尽管应用程序只泄漏大约 400 字节的情况下让它不泄漏，我让它无泄漏。非常感谢@Nenad M 的帮助。事实证明，我的泄漏的一个非常奇怪的来源是将我的 UITabBar 的 selectedImageTintColor 设置为 [UIColor blueColor]。就像你说的那样，这一定是导致 CoreGraphics 和/或 UIKit 内部的某些东西在某处触发 [UIImage imageWithCGImage:scale:orientation] 调用而不被 ARC 释放。

尽管这是一个非常小的泄漏，但我鼓励所有人免费发布您的应用程序！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T14:33:25.767

我遇到了同样的问题，然后我将代码更改为使用如下所示的外观选择器，然后问题就消失了

```
 [[UITabBar appearance] setTintColor:[UIColor redColor]];
    [[UITabBar appearance] setSelectedImageTintColor:[UIColor brownColor]]; 
```

# design-patterns - 应用程序启动时使用什么设计模式异步加载各种东西

> ID：14123655
> 
> 赞同：1
> 
> 时间：2013-01-02T14:18:02.700
> 
> 标签：design-patterns, pseudocode

在我的应用程序启动过程中，我有几个任务要执行，直到应用程序可以完全运行。

首先它开始加载一些 config-XML，进行几个 web 服务调用并加载一些库。所有这些都是异步完成的以节省时间。当其中一些任务完成后，我必须做更多等等。因此，在启动完成之前，它是一个非常复杂的流程图。

我已经在纸上勾勒出这张图表，以便清楚地了解正在发生的事情。

目前这是通过大量布尔变量和许多 if 语句实现的。我认为这显然不是最好的方法，所以我的问题是：

这种任务通常使用什么设计模式？我考虑过状态机，但是由于有很多可能的状态取决于哪些任务首先完成，所以状态机的状态太多了。

# iphone - 使用积分系统创建测验 - iPhone？

> ID：14123656
> 
> 赞同：0
> 
> 时间：2013-01-02T14:18:04.653
> 
> 标签：iphone, points

在这里寻找一些基本信息 -

我想创建一个小测验（大约 10 个问题），每个问题有四个可能的答案。而不是有一个正确或错误的答案，我希望为每个答案获得分数，并在测验结束时加起来总分。从技术上讲，因为没有正确或错误的答案，它并不是真正的测验……我基本上会在一系列问题中询问一个人的偏好。

我非常感谢任何可以通过告诉我可以从哪里开始来帮助我的人，我是否最好使用 sqlite 来存储答案，然后基于此获得结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:07:03.333

我将`sqlite`用于存储问题和答案，并且根据您的项目要求，您也可以将结果存储在`sqlite`表格或`.plist`简单的显示结果中，并且不存储任何与结果相关的数据。

您可以使用[FMDB 教程](http://www.highoncoding.com/Articles/836_Persisting_iOS_Application_Data_in_SQLite_Database_Using_FMDB.aspx)在 IOS 上创建 sqlite 数据库，我将创建一个名为, , `Questions`fields`q_id`的表。`questions(varchar)``question kind (varchar)`

并创建一个`Answers`带有`a_id`, `q_id(foreign Key)` , `answer(varchar)`,`point`字段的表。如果您不熟悉外键，这里是外键[教程。](http://www.w3schools.com/sql/sql_foreignkey.asp)

准备好问题和答案后，只需使用简单的表格视图来显示您的问题和答案。

要显示您的结果，您有多种选择，具体取决于您的要求，您可以简单地在标签中显示您的结果。如果您只想显示结果，请使用`Singleton`整数来保留分数结果，那么当您完成测验时，只需调用该`Singleton`整数并显示它。

如果你想存储你的结果，要么在数据库中创建另一个表，要么创建一个 .plist

# php - http Accept 标头如何工作？

> ID：14123658
> 
> 赞同：3
> 
> 时间：2013-01-02T14:18:07.133
> 
> 标签：php, http-headers

这是我的代码；

```
<?php $url = @$_POST["ekleme"];
if (filter_var($url,FILTER_VALIDATE_URL) === FALSE) {
    die("Geçersiz link!");
}

$cparams = array('http'=>array('method'=>"GET",'Accept'=>'image/jpg,image/gif,image/png'));
$context = stream_context_create($cparams);
$fp = @fopen($url, 'rb', false, $context);
if (!$fp) die("Problem with url");
$meta = stream_get_meta_data($fp);
var_dump($meta); 
```

我给它一个 pdf 文件的 url。我希望它会给出某种http错误。但这就是我得到的；

```
array(10) {
  ["wrapper_data"]=>
  array(9) {
    [0]=>
    string(15) "HTTP/1.1 200 OK"
    [1]=>
    string(35) "Date: Wed, 02 Jan 2013 14:16:02 GMT"
    [2]=>
    string(14) "Server: Apache"
    [3]=>
    string(44) "Last-Modified: Wed, 19 Dec 2012 13:53:09 GMT"
    [4]=>
    string(34) "ETag: "1c80e53-f5a7-4d134ef3b7b40""
    [5]=>
    string(20) "Accept-Ranges: bytes"
    [6]=>
    string(21) "Content-Length: 62887"
    [7]=>
    string(29) "Content-Type: application/pdf"
    [8]=>
    string(17) "Connection: close"
  } 
```

它继续显示其他不相关的东西。我是否知道 Accept 标头的工作原理是错误的，还是我做错了什么？有没有办法让服务器只在内容类型特殊时才发送数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:04:19.520

Accept 标头让客户端告诉服务器它可以处理哪些类型的数据。

服务器可能会完全忽略它（如果资源仅以一种格式存在，这是正常的）或者它可能会使用它来选择最适合客户端的格式（如果它没有 406 Not Acceptable 错误，它可能会响应适当格式的数据）。

您正在经历前一种行为。URL 指向一个 PDF 文件。服务器未设置为在 PDF 和其他格式之间做出决定，因此它不注意 Accept 标头并返回 PDF。

> 有没有办法让服务器只在内容类型特殊时才发送数据？

接受标头尽可能接近。

如果您想避免下载可能无法处理的大文件，请在发出 GET 请求之前发出 HEAD 请求并检查响应的 Content-Type。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:53:18.800

接收文件时，您有责任检查内容类型。接受标头仅用于告诉服务器您*喜欢*哪种内容类型，而不是您*需要*哪种内容类型。

这是一个关于如何检查返回的内容类型的示例。

```
$meta = stream_get_meta_data($fp);
$allowed = array("image/jpg", "image/gif", "image/png");
foreach($meta['wrapper_data'] as $header) {
  if(preg_match('/content-type: (.*)/i', $header, $matches)) {
    if(!in_array(strtolower($matches[1], $allowed)) {
      die("Invalid content type");
    }
  }
} 
```

# objective-c - 如何在到期后使用 OAuth 2.0 以及 iOS 应用程序中的 Youtube API 获取新的访问令牌

> ID：14123663
> 
> 赞同：0
> 
> 时间：2013-01-02T14:18:28.737
> 
> 标签：objective-c, youtube-api, oauth-2.0, xcode4.5, access-token

我在我的 iPad 应用程序中使用 Youtube Api。我设法使用 OAuth 2.0 进行身份验证并获取访问令牌。我的问题是令牌在一小时后过期，我不知道如何使用刷新令牌获取新令牌，而无需再次通过身份验证过程。我正在使用 XCode 4.5 和 iOS 5.1 & 6

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:33:06.517

根据[文档](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Refreshing_a_Token)

> 如果您的应用程序在授权过程中获得了刷新令牌，那么您将需要定期使用该令牌来获取新的有效访问令牌。服务器端 Web 应用程序、已安装的应用程序和设备都获得刷新令牌。

因此，如果您已经拥有刷新令牌，则只需执行`POST`如下配置的请求

```
POST /o/oauth2/token HTTP/1.1
Host: accounts.google.com
Content-Type: application/x-www-form-urlencoded

client_id=21302922996.apps.googleusercontent.com&
client_secret=<YOUR CLIENT SECRET>
refresh_token=<YOUR REFRESH TOKEN>
grant_type=refresh_token 
```

你会得到一个回复​​，比如

```
{
  "access_token":<A NEW ACCESS TOKEN>,
  "expires_in":<AN EXPIRING TIME>,
  "token_type":"Bearer"
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-22T22:33:32.070

以下是使用 AFNetworking 刷新 accessToken 以发出请求的完整代码：

```
NSString *refreshToken = <YOUR_REFRESH_TOKEN>;

NSString *post = [NSString stringWithFormat:@"client_secret=%@&grant_type=refresh_token&refresh_token=%@&client_id=%@",kYouTubeClientSecret,refreshToken,kYouTubeClientID];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

NSURL *url = [NSURL URLWithString:@"https://accounts.google.com/o/oauth2/token"];

AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

AFHTTPRequestOperation *httpRequest = [httpClient HTTPRequestOperationWithRequest:request
                                                                          success:^(AFHTTPRequestOperation *operation, id responseObject) {
                                                                              NSDictionary *json = [NSJSONSerialization JSONObjectWithData:responseObject options:kNilOptions error:nil];
                                                                              NSString *newAccessToken = json[@"access_token"];
                                                                              NSLog(@"received new accessToken = %@",newAccessToken);

                                                                              // store accessToken here

                                                                          } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
                                                                              NSLog(@"error refreshing token: %@",[error localizedDescription]);

                                                                          }];
[httpClient enqueueHTTPRequestOperation:httpRequest]; 
```

# php - Modx 革命自定义页面标题

> ID：14123666
> 
> 赞同：1
> 
> 时间：2013-01-02T14:18:37.397
> 
> 标签：php, modx, modx-revolution

我正在尝试构建一个片段，它将显示我的投资组合的自定义页面标题。我遇到的问题是我的代码只返回“else”，但是当我在 MySql 中运行查询时，我得到`name`.

我究竟做错了什么？

```
<?php
// Show All Errors
error_reporting(E_ALL);
ini_set('display_errors', '1');

$getID = $modx->quote($getID);

$ret = '';
$qry = "SELECT `name` FROM `modx_gallery_items` WHERE REPLACE(LOWER(`name`), ' ', '-') = $getID;";

$result = $modx->query($qry);
if ($result) {
    $row = $result->fetch(PDO::FETCH_ASSOC);
    if($row){
        $ret = 'o7th Web Design &raquo; Portfolio &raquo; ' . $row['name'];
    }else{ //It's showing this one on the page, yet the same query in MySQL returns `name`
        $ret = 'o7th Web Design &raquo; Portfolio &raquo; Our Portfolio' . $qry;
    }
    unset($row);        
}else{
    $ret = 'o7th Web Design &raquo; Portfolio &raquo; Our Portfolio' . $qry;
}

// Return everything
echo $ret;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:45:55.963

发现问题。

`$row = $result->fetch(PDO::FETCH_ASSOC);`

需要改为：

`$row = $result->fetchAll(PDO::FETCH_ASSOC);`

然后我可以循环返回的数组，或者按索引返回项目：`$row[0]['name']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:52:33.887

你绝对不知道如何在 modx 革命中进行查询。请阅读[http://bobsguides.com/revolution-objects.html](http://bobsguides.com/revolution-objects.html)。此代码的正确示例如下所示 -

```
// add class to work with gallery extra
$gallery = $modx->getService('gallery','Gallery',$modx->getOption('gallery.core_path',null,$modx->getOption('core_path').'components/gallery/').'model/gallery/',$scriptProperties);
if (!($gallery instanceof Gallery)) return '';

// get id of album
$getID = (int) $modx->getOption('getID',$scriptProperties,false);
if (empty($getID)) return 'no id';

// make query
$c = $modx->newQuery('galAlbum')
$c->where(array(
    'id' => $getID,
));
$item = $modx->getObject('galAlbum',$c);

// get result
if (!empty($item)) {
    $output = 'o7th Web Design &raquo; Portfolio &raquo; ' . $item->get('name');
}
else {
    $output = 'o7th Web Design &raquo; Portfolio &raquo; Our Portfolio' . ' empty';
}

return $output; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T14:44:48.337

这是问题吗？

```
$qry = "SELECT `name` FROM `modx_gallery_items` WHERE REPLACE(LOWER(`name`), ' ', '-') = $getID;"; 
```

应该：

```
$qry = "SELECT `name` FROM `modx_gallery_items` WHERE REPLACE(LOWER(`name`), ' ', '-') = ".$getID.";"; 
```

看起来您的查询将搜索 '$getID' 而不是它的实际值

# php - 将 CodeIgniter 与普通 PHP 会话一起使用，在哪里添加 session_start();

> ID：14123668
> 
> 赞同：3
> 
> 时间：2013-01-02T14:18:50.793
> 
> 标签：php, codeigniter

我在使用 CodeIgniters 实现的会话在重定向后被删除时遇到了一些问题，因此我正在恢复到正常的 PHP 会话。

`session_start();`假设我希望在每个页面上调用它而不将它添加到每个控制器构造函数中，那么最好的地方在哪里？

我猜想把它放在主 index.php 的顶部会很好，只是想确保这样做不会破坏任何东西，或者是否有更好/标准的地方来放置它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T15:49:21.340

这就是为什么我总是使用包含应用程序范围代码的扩展控制器。

要扩展 codeigniter 控制器，请将此代码放在名为 MY_Controller.php 的文件中并将其保存到 core 文件夹。

```
class MY_Controller extends CI_Controller
{
    public function __construct()
    {
        parent::__construct();
        session_start();
    }
} 
```

如果您决定使用此解决方案，您的所有控制器都需要扩展 MY_Controller。

[创建核心系统类](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T15:01:06.957

您可以轻松地将它们放入`index.php`. 这是您的 codeigniter 应用程序的入口点，在每个请求上都会被调用。

虽然通常不建议这样做，因为当您升级您的 codeigniter 版本时，您需要记住将您的自定义复制到 index.php。

而不是 index.php，您可以使用预请求[挂钩](http://ellislab.com/codeigniter/user-guide/general/hooks.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T12:22:38.403

您**不能**`session_start();`直接在 codeigniter 中使用。相反，您必须使用：

```
$this->library->load('session');
$this->session->set_userdata(array('name' => 'name','age' =>
 'age','etc' => 'etc'); 
```

# git - 无法在 Heroku 项目中创建新的 git 分支

> ID：14123672
> 
> 赞同：0
> 
> 时间：2013-01-02T14:19:17.843
> 
> 标签：git, heroku, branch

我从 Heroku 中提取了一个项目，现在当我尝试在本地主机上的这个项目中创建一个新分支时，我总是收到以下错误消息：

```
git checkout new_branch
error: pathspec 'new_branch' did not match any file(s) known to git. 
```

当我跑步时`git branch -a`，我得到

```
* master
  remotes/heroku/HEAD -> heroku/master
  remotes/heroku/master 
```

是什么导致了这个错误？而且，我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T14:22:38.063

你需要说`git checkout -b new_branch`创建分支。请参阅此处的结帐文档：

[http://www.kernel.org/pub/software/scm/git/docs/git-checkout.html](http://www.kernel.org/pub/software/scm/git/docs/git-checkout.html)

# c# - 从时间跨度计算总夜间时间

> ID：14123679
> 
> 赞同：2
> 
> 时间：2013-01-02T14:19:38.943
> 
> 标签：c#, .net, winforms, datetime, timespan

假设夜间时间设置为 20.30h 到 6.15h(AM)。这 2 个参数是用户范围的变量。假设您有一个到达日期和一个离开日期，可能从几分钟到一整天不等。你如何计算夜间的总小时数？

```
public static double CalculateTotalNightTimeHours(DateTime arrival, 
                                                  DateTime departure,
                                                  int nightTimeStartHour, 
                                                  int nightTimeStartMinute, 
                                                  int nightTimeEndHour, 
                                                  int nightTimeEndMinute)
{ 
    //??
} 
```

编辑：我知道这可能不是直截了当的是/否答案，但也许有人对这个问题有一个优雅的解决方案。回答评论：我确实想计算用户可编辑的夜间开始和结束时间之间的总小时数（或分钟数）。我正在计算访问时间，第一个日期确实是到达参数。

到目前为止我的代码：

```
DateTime nightStart = new DateTime( departure.Year, departure.Month, departure.Day,
                                    nightTimeStartHour, nightTimeStartMinute, 0);
DateTime nightEnd = new DateTime( arrival.Year, arrival.Month, arrival.Day,
                                  nightTimeEndHour, nightTimeEndMinute, 0);
if (arrival < nightEnd)
{
    decimal totalHoursNight = (decimal)nightEnd.Subtract(arrival).TotalHours;
}
//... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T15:21:13.787

仅仅因为我准备好迎接挑战，您应该能够成功使用以下功能。请注意，这可能不是最有效的方法，但我这样做是为了说明逻辑。我可能会决定对其进行编辑以改进它，但它应该可以正常工作。

在这里注意几个假设也很重要：

1.  'end' 参数总是大于 'start' 参数（尽管我们还是先检查一下）
2.  夜间结束参数早于夜间开始参数（即夜间时间在第二天结束，但绝不会晚于 24 小时）
3.  夏令时不存在！（这是一个棘手的问题，需要解决的一个重要问题是：如果您的开始时间或结束时间是时钟回退当天的 01:30，您如何知道时间是在回滚之前还是之后记录的？即时钟是第一次还是第二次到达 01:30？）

考虑到这一点...

```
public static double Calc(DateTime start, DateTime end, int startHour, int startMin, int endHour, int endMin)
{
    if (start > end)
        throw new Exception();//or whatever you want to do

    //create timespans for night hours
    TimeSpan nightStart = new TimeSpan(startHour, startMin, 0);
    TimeSpan nightEnd = new TimeSpan(endHour, endMin, 0);

    //check to see if any overlapping actually happens
    if (start.Date == end.Date && start.TimeOfDay >= nightEnd && end.TimeOfDay <= nightStart)
    {
        //no overlapping occurs so return 0
        return 0;
    }

    //check if same day as will process this differently
    if (start.Date == end.Date)
    {
        if (start.TimeOfDay > nightStart || end.TimeOfDay < nightEnd)
        {
            return (end - start).TotalHours;
        }

        double total = 0;
        if (start.TimeOfDay < nightEnd)
        {
            total += (nightEnd - start.TimeOfDay).TotalHours;
        }
        if(end.TimeOfDay > nightStart)
        {
            total += (end.TimeOfDay - nightStart).TotalHours;
        }
        return total;
    }
    else//spans multiple days
    {
        double total = 0;

        //add up first day
        if (start.TimeOfDay < nightEnd)
        {
            total += (nightEnd - start.TimeOfDay).TotalHours;
        }
        if (start.TimeOfDay < nightStart)
        {
            total += ((new TimeSpan(24, 0, 0)) - nightStart).TotalHours;
        }
        else
        {
            total += ((new TimeSpan(24, 0, 0)) - start.TimeOfDay).TotalHours;
        }

        //add up the last day
        if (end.TimeOfDay > nightStart)
        {
            total += (end.TimeOfDay - nightStart).TotalHours;
        }
        if (end.TimeOfDay > nightEnd)
        {
            total += nightEnd.TotalHours;
        }
        else
        {
            total += end.TimeOfDay.TotalHours;
        }

        //add up any full days
        int numberOfFullDays = (end - start).Days;
        if (end.TimeOfDay > start.TimeOfDay)
        {
            numberOfFullDays--;
        }
        if (numberOfFullDays > 0)
        {
            double hoursInFullDay = ((new TimeSpan(24, 0, 0)) - nightStart).TotalHours + nightEnd.TotalHours;
            total += hoursInFullDay * numberOfFullDays;
        }

        return total;
    }
} 
```

然后你可以这样称呼它：

```
double result = Calc(startDateTime, endDateTime, 20, 30, 6, 15); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:23:46.043

基本上，您需要计算夜晚的开始和结束时间。然后将它们与到达和离开日期进行比较，看看您是在夜晚开始之后到达还是在夜晚结束之前离开，以获得您需要减去以确定总夜间时间的值。然后你需要继续计算每一天，直到晚上的开始时间超过出发日期。这是我的解决方案。

```
public static double CalculateTotalNightTimeHours(
    DateTime arrival,
    DateTime departure,
    int nightTimeStartHour,
    int nightTimeStartMinute,
    int nightTimeEndHour,
    int nightTimeEndMinute)
{
    if (arrival >= departure)
        return 0;

    var nightStart = arrival.Date.AddHours(nightTimeStartHour).AddMinutes(nightTimeStartMinute);
    var nightEnd = nightStart.Date.AddDays(1).AddHours(nightTimeEndHour).AddMinutes(nightTimeEndMinute);

    double nightHours = 0;
    while (departure > nightStart)
    {
        if (nightStart < arrival)
            nightStart = arrival;
        if (departure < nightEnd)
            nightEnd = departure;
        nightHours += (nightEnd - nightStart).TotalHours;
        nightStart = nightStart.Date.AddDays(1).AddHours(nightTimeStartHour).AddMinutes(nightTimeStartMinute);
        nightEnd = nightStart.Date.AddDays(1).AddHours(nightTimeEndHour).AddMinutes(nightTimeEndMinute);
    }

    return nightHours;
} 
```

您可能还想添加检查以确保开始和结束时间在范围内。这也假设夜晚从一天开始，在第二天结束，所以如果你想让夜晚在午夜之前结束，你就必须做其他事情。

# c# - 两个数据网格列值之间的差异并将结果显示在新列中

> ID：14123684
> 
> 赞同：4
> 
> 时间：2013-01-02T14:20:01.130
> 
> 标签：c#, wpf, wpfdatagrid

我有一个数据网格，它显示来自数据库的表，如下所示：

![在此处输入图像描述](../Images/cb827fd5fca0f79ea1cac28d926928d2.png)

我必须添加一个名为“”的新列，它应该显示列值和列值`Difference`之间的差异。`Scores1``Scores2`

（PS：差异没有负值）

如何在 WPF 中实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:27:29.923

为它做一个查询/查看/存储过程

例如类似的东西

选择 Scores1, Scores2, case When Scores1 - Scores2 > 0 then Scores1 - scores2 else 0 end as Difference From SomeTable

您可以在数据网格中添加一列并填充它，但这更麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:39:46.960

我不熟悉 WPF，但是，是`wpfdatagrid`has`TemplateField`还是任何其他相关结构？

如果是这样，您可以这样做；

```
<ItemTemplate>
   <asp:Literal 
       ID="Literal4" 
       runat="server" 
       Text='<%# (Decimal.Parse(Eval("Score1")) - Decimal.Parse(Eval("Score2")) %>'>
    </asp:Literal>
  </ItemTemplate> 
```

**注意**：此代码用于`Gridview`. 它不起作用，`wpfdatagrid`但它可以给你一个想法。

# asp.net - 要在 iis7 中进行哪些更改/更新以托管 ASP.NET signalR 应用程序？

> ID：14123692
> 
> 赞同：0
> 
> 时间：2013-01-02T14:20:37.870
> 
> 标签：asp.net, signalr

要在 iis7 中进行哪些更改/更新以托管 ASP.NET signalR 应用程序？

我的应用程序在 VS2012 中运行良好。当我尝试在我的生产服务器（iis7）中托管它时，它在浏览器控制台中显示以下错误

加载资源失败：服务器响应状态为 404（未找到）[http://www.mydomain.com/signalr/hubs](http://www.mydomain.com/signalr/hubs) Uncaught TypeError: Cannot read property 'client' of undefined

我尝试了堆栈溢出中发现的所有解决方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T11:08:27.687

请参阅此论坛以获取最新问题：

[https://github.com/SignalR/SignalR/issues/2242](https://github.com/SignalR/SignalR/issues/2242)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T08:35:52.630

如果您正在使用网络表单，请执行以下步骤

1.  在网络配置中：

    ```
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true"/> 
    ```

2.  在页面中添加对集线器的引用

    ```
    <script src="/signalr/signalr/hubs"></script> 
    ```

    代替

    ```
    <script src="/signalr/hubs"></script> 
    ```

# jasper-reports - 当关联查询没有记录时，在 iReport 中打印空表

> ID：14123706
> 
> 赞同：2
> 
> 时间：2013-01-02T14:21:40.250
> 
> 标签：jasper-reports, ireport, xmltable

我正在使用 iReports 3.7.6 版。我通过使用数据集将其与查询相关联来动态生成表。

当查询返回记录时，我会打印一个包含所有记录的表。

但是，当查询返回零记录时，我需要显示一个空表。但我得到的只是一条水平线。

以下是 jasper XML 文件的一部分：

```
<componentElement>
    <reportElement x="131" y="11" width="424" height="24"/>
    <jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
        <datasetRun subDataset="pmDataSet">
            <parametersMapExpression><![CDATA[$P{REPORT_PARAMETERS_MAP}]]></parametersMapExpression>
            <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
        </datasetRun>
        <jr:listContents height="24" width="424">
            <textField>
                <reportElement x="0" y="0" width="134" height="22"/>
                <box>
                    <topPen lineWidth="0.5"/>
                    <rightPen lineWidth="0.5"/>
                </box>
                <textElement/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{COLUMN_1}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="134" y="0" width="120" height="22"/>
                <box>
                    <topPen lineWidth="0.5"/>
                    <rightPen lineWidth="0.5"/>
                </box>
                <textElement/>
                <textFieldExpression class="java.lang.String"><![CDATA[($F{COLUMN_2}) ? $F{COLUMN_2} : "(Blank)"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="254" y="0" width="170" height="22"/>
                <box>
                    <topPen lineWidth="0.5"/>
                    <rightPen lineWidth="0.5"/>
                </box>
                <textElement/>
                <textFieldExpression class="java.lang.String"><![CDATA[$F{COLUMN_3}]]></textFieldExpression>
            </textField>
        </jr:listContents>
    </jr:list>
</componentElement> 
```

在这里，我使用了“列表”元素 (jr:list) 并将其与数据集相关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T07:01:21.123

据我所知，这不能用一张桌子来实现。但是，仍然有解决方法。

使用 a**`Subreport`**而不是表格。使用表格完成的所有事情也可以使用子报表完成。您唯一需要照顾的就是这处房产。

***`When No Data`***

将其设置为

*   `All Sections No Detail`: 只显示头信息
*   `No Data Section`：以便可以在`No Data`乐队中显示自定义消息。

希望这可以帮助。

# java - 需要使用 maven 从多个 .java 文件生成一个 WSDL 文件

> ID：14123708
> 
> 赞同：2
> 
> 时间：2013-01-02T14:21:59.050
> 
> 标签：java, maven, wsdl

我坚持从我有许多 .java 文件的 java 应用程序生成 WSDL 文件。我可以从一个 java 类文件生成一个 WSDL，但我只需要为 java 应用程序生成一个 WSDL 文件。我们使用 Weblogic 作为我们的部署服务器。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T07:26:27.203

这行不通。如果您查看[Java2WS 插件的文档，](http://cxf.apache.org/docs/java-to-ws.html)很明显它们只支持从 1 个 Java 文件生成 1 个 WSDL：

> java2ws - 使用 Web 服务端点的实现 (SEI) 类和关联的类型类来生成 WSDL 文件

# html - 在 CSS 中定位链接

> ID：14123712
> 
> 赞同：1
> 
> 时间：2013-01-02T14:22:11.853
> 
> 标签：html, css, positioning, hyperlink

编辑：这是一个 jsFiddle：http: [//jsfiddle.net/7hSny/](http://jsfiddle.net/7hSny/)

我正在尝试在 CSS 中定位带有图像的链接。这是我喜欢如何拥有它的预览：

[预览 http://piclair.com/data/odjkf.jpg](http://piclair.com/data/odjkf.jpg)

Words Home、Campagne 等需要在菜单栏中居中。HTML 现在可能很难看，我尝试了很多东西，但我无法正确定位它。

这是我的 HTML：

```
<div id="navigation">
<ul id="nav">
<li><div id="current_page"><p class="navlink"><a href="home.html"><img src="img/Menu_Home_Selected.png"></a></p></div></li>
</ul>

<!-- end of navigation -->
</div> 
```

这是CSS：

```
#navigation{
background-image: url(img/Navbar.png);
background-repeat: no-repeat;
width:955px;
color: #FFF;
float: left;
border:1px solid blue;
}

#current_page {
margin: -22 0 0 0px; 
width:164px;
min-height: 124px;
background-image: url(img/Selected.png);
background-repeat: no-repeat;
}

#nav {
min-height: 28px;
margin: 5 0 0 -14px;
}

#nav ul, li {
list-style: none;
}

#nav li {
width:164px;
}

.navlink p (
display: block;
margin: 35 35 35 35px;
} 
```

现在它看起来像这样： [预览 http://piclair.com/data/mdc5z.jpg](http://piclair.com/data/mdc5z.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:52:57.363

关于您的标记有几件事可以优化（正如您提到的，“丑陋”）。不要在可以使用网络颜色的地方使用图像。对于图像文本，将图像表示的实际文本放入 html 并`background-image`用于 css 中的实际 jpg。垂直居中并不像应有的那么容易（除非您使用表格单元格），但在很多情况下您可以使用顶部/底部填充或行高。

[这是一个更新了一些东西的小提琴](http://jsfiddle.net/scrimothy/kNd4V/1/)。希望这可以帮助。

另外，请查看这篇[博客文章](http://www.vanseodesign.com/css/vertical-centering/)，了解各种垂直对齐方法。如果我的不行，其中之一应该对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:50:40.823

我希望这能解决它。一旦我知道这是否是你想要的，我会更新其余的细节。

[http://jsfiddle.net/7hSny/7/](http://jsfiddle.net/7hSny/7/)

不过我更正了html。

```
 <div id="navigation">
<ul id="nav">
<li><div id="current_page"><p class="navlink"><a href="home.html"><img src="http://i45.tinypic.com/30ihnkk.png"></a></p></div></li>
</ul>

<!-- end of navigation -->
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:24:42.410

[我建议您使用与gettyimages](http://www.gettyimages.com/)（[及其 css spritesheet](http://www.gettyimages.com/images/globalnav/sp-gnav_fr-06.png) ）相同的技术并运行一个简单的 css spritesheet。这样，您将更好地利用语义和样式。

考虑一个带有列表的导航：

```
<ul class='nav'>
  <li class='home'><a href='#'>Home</a></li>
  <li class='campagne'><a href='#'>Campagne</a></li>
  ...
</ul> 
```

然后，您使用简单的 CSS 对其进行样式化：

```
ul.nav
{
   display: block;
   height: 50px;
   margin: 0;
   padding: 0;
   list-style: none;
}

ul.nav li
{
   float:left;
   display: block;
}

ul.nav li a
{
   display: block;
   height: 100%;
   background: url(img/nav.jpg) no-repeat 0px 0px;
   text-indent: -9999px;
} 
```

然后使用一个简单的精灵表来“绘制”你的按钮（[精灵表教程](http://css-tricks.com/css-sprites/)）：

```
ul.nav li.home a
{
   width: 50px;
   background-position: 0px 0px;
}

ul.nav li.home a:hover { background-position: 0px -50px; }

ul.nav li.campagne a
{
   width: 80px;
   background-position: 50px 0px;
}

ul.nav li.campagne a:hover { background-position: 50px -50px; } 
```

# c - 函数将长度为 8 的数组作为参数

> ID：14123717
> 
> 赞同：1
> 
> 时间：2013-01-02T14:22:25.520
> 
> 标签：c, arrays, function, args

我不明白我的错误信息

```
triangle_test.c: In function ‘defineLines’:
triangle_test.c:89:1: error: argument ‘args’ doesn’t match prototype
triangle_test.c:25:5: error: prototype declaration 
```

我不知道我是否应该通过&TriHolder, 8？我以前从未在 C 中做过数组，在这方面需要一点帮助。

```
int defineLines(float TriHolder[], int args);

int main(int argc, char* argv[])
{
  initialize_TriHolder(1,1,2,2,3,3,4,4);
  getInputTriVerts();
  getInputInteriorPoint();
  defineLines(&TriHolder[0],8); //this is the array I want to pass
}  

defineLines(args, length)
{
  lineAB[0]=TriHolder[0]; //Ax
  lineAB[1]=TriHolder[1]; //Ay
  lineAB[2]=TriHolder[2]; //Bx
  lineAB[3]=TriHolder[3]; //By
  slopeAB = (lineAB[3]-lineAB[1])/(lineAB[2]/lineAB[0]);
  interceptAB = slopeAB * -lineAB[0] + lineAB[1]; //b: y - y1 = m( x - x1 ), x = 0
  ///////////////////////////
  lineBC[0]=TriHolder[2];//Bx
  lineBC[1]=TriHolder[3];//By
  lineBC[2]=TriHolder[4];//Cx
  lineBC[3]=TriHolder[5];//Cy 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:25:24.417

不要对函数参数使用 pre-ANSI 格式。以下应编译：

```
int defineLines(float TriHolder[], int args);

int main(void)
{
  /* ... */
}

int defineLines(float triHolder[], int args)
{
  /* .. */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T14:27:14.913

你的函数头：

```
defineLines(args, length){ 
```

需要匹配您的原型：

```
int defineLines(float TriHolder[], int args); 
```

注意缺少的关键字（float、int 等）。所以更像是：

```
int defineLines(float args[], int length){ 
```

是你要找的。您缺少 and 的定义`TriHolder`，`lineAB`但从您的代码中推测它们是一些全局浮点数组。（请确认）。

此外，您可以将数组传递为：

```
fineLines(TriHolder,8);}  //this is the array I want to pass 
```

但是，如果我之前的假设是正确的并且`TriHolder`是全球性的，为什么还要费心通过它呢？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:27:32.170

您的原型`defineLines`是正确的，但是您需要这样称呼它：

```
defineLines(TriHolder,8); 
```

该名称`TriHolder`本身实际上是指向第 0 个数组索引的指针，它相当于`TriHolder[0]`.

# android - 如何仅从上到下移动 SurfaceView 中的图像

> ID：14123723
> 
> 赞同：-4
> 
> 时间：2013-01-02T14:22:38.000
> 
> 标签：android, image, bitmap, surfaceview

我想知道有人帮助我如何实现 bug Smasher 简单功能，我想将图像从上到下移动并想在有人单击图像时更改图像，就像 Bug Smasher 游戏一样。我知道 SurfaceView n 能够在 SurfaceView 上绘制图像。

代码，示例？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:30:52.413

请提供更多信息和代码如何移动图像。也许我的一个项目的这个小例子会对你有所帮助。

```
float x = 0,y = -1;
public void onDrawFrame(GL10 gl) 
{
   float delta = 0;
   long currentFrameStart = System.nanoTime();
   if(lastFrame!=0)
      delta = (currentFrameStart-lastFrame) / 1000000000.0f;
   lastFrame = currentFrameStart; 

   antTexture.bind();

   gl.glPushMatrix();

   y += delta*0.1f;
   gl.glTranslatef(x, y, 0 ); 
   //gl.glRotatef(angle, 0, 0, 1);

   antMesh.render(PrimitiveType.TriangleFan, 0, 4);

   gl.glPopMatrix(); 
} 
```

我在我的游戏 Orc Genocide 中实现了 Ant Smasher 的迷你游戏版本

![在此处输入图像描述](../Images/c33533a61a998d07375a2bc1c204fd6f.png)

# sql - 减小删除查询的大小是避免 ORA-01628 的正确方法吗？

> ID：14123726
> 
> 赞同：0
> 
> 时间：2013-01-02T14:23:01.100
> 
> 标签：sql, oracle

我有一个删除查询，例如：

```
delete from table1 where dataA between Date1 and Date2 
```

我收到一个错误：

```
Caused by: java.sql.SQLException: ORA-01628: max # extents (10100) reached 
for rollback segment. 
```

我想通过添加来修复删除语句

```
AND ROWNUM < 200 
```

这是解决问题的正确方法吗（表包含 blob 列 - 因此我认为回滚段很小）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:53:05.353

我在 Oracle 中进行数据仓库批量处理，您的方法非常好。我想告诉 dba 说，嘿，添加大量的回滚/tmp 空间，所以我们永远不会遇到这种情况……但与许多客户一样……资源很多时候超出了我们的控制范围。

我在您只想分块删除的任何重复删除操作中所做的如下（Oracle Pl/sql 示例，但将移植到任何语言）请记住，此解决方案仅适用于没有条件 where 表达式的删除（您的示例）...如果您有where条件，我建议首先将rowid/keys批量提取到数组中，然后循环删除块...

```
//psuedo code
Create procedure (iCommit In Integer) 
   Loop
      Delete From Table where rownum < iCommit + 1;
      if SQL%ROWCOUNT < iCommit then
         exit loop;
      end if
      // incremental commit
      commit;
   End Loop;
   // final commit
   commit;
) 
```

# java - 在 Eclipse 视图中向表中添加组合

> ID：14123732
> 
> 赞同：0
> 
> 时间：2013-01-02T14:23:33.940
> 
> 标签：java, eclipse-plugin, swt, jface

当用户选择表格项目时，我希望在表格项目下方的表格中添加复合材料。这可能吗。基本上它将是有关该项目的更多详细信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T14:31:19.007

尝试查看[Nebula CompositeTable 小部件](http://www.eclipse.org/nebula/widgets/compositetable/compositetable.php)

> CompositeTable 是一个自定义 SWT 网格控件，它：
> 
> *   让您控制行的布局
> *   使用任何 SWT 控件自动就地编辑
> *   简单、自动地管理 CRUD 操作
> *   使用虚拟表 API 仅请求可见数据，以获得最大的可扩展性和性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:32:02.207

SWT/JFace 不支持这个开箱即用。一些建议：

*   实施主从视图。您的表是主视图。添加第二个详细视图，它监听表视图的选择。许多 Eclipse IDE 视图都是这样工作的，即属性视图。提供松散耦合的类并开放添加。推荐“日食方式”。谷歌选择服务和主细节视图。
*   将双击侦听器或上下文菜单添加到表中以打开其他详细信息弹出窗口。
*   将详细信息添加到悬停工具提示。

# sql-server - 从 SQL Server 上的 XML 获取表

> ID：14123733
> 
> 赞同：0
> 
> 时间：2013-01-02T14:23:46.267
> 
> 标签：sql-server, xml

```
declare @prueba xml 
set @prueba = '<obligaciones> 
            <obligacion> <Id>51</Id> </obligacion>
            <obligacion>  <Id>52</Id> </obligacion>
            <obligacion>  <Id>53</Id> </obligacion> 
           </obligaciones>' 
```

我想从 XML 中获取下表

```
select Id from @prueba....

51
52
53 
```

有人可以帮忙查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:32:20.913

看看[xml 数据类型方法](http://msdn.microsoft.com/en-us/library/ms190798.aspx)

```
select T.N.value('(text())[1]', 'int') as Id
from @prueba.nodes('/obligaciones/obligacion/Id') as T(N) 
```

**更新：**

在`obligaciones`节点中有多个值，您可以这样做：

```
declare @prueba xml set @prueba = '
<obligaciones>
  <obligacion>
    <id>51</id>
    <TipoCancelacionId>1</TipoCancelacionId>
  </obligacion>
  <obligacion>
    <id>52</id>
    <TipoCancelacionId>1</TipoCancelacionId>
  </obligacion>
  <obligacion>
    <id>53</id>
    <TipoCancelacionId>1</TipoCancelacionId>
  </obligacion>
</obligaciones>'

select T.N.value('(id/text())[1]', 'int') as Id,
       T.N.value('(TipoCancelacionId/text())[1]', 'int') as TipoCancelacionId
from @prueba.nodes('/obligaciones/obligacion') as T(N) 
```

结果：

```
Id          TipoCancelacionId
----------- -----------------
51          1
52          1
53          1 
```

# jquery - 设置选择元素值导致错误

> ID：14123734
> 
> 赞同：0
> 
> 时间：2013-01-02T14:23:52.023
> 
> 标签：jquery

在使用 2 行简单代码将 SELECT 值设置为变量后出现此错误：

> 不推荐使用属性的指定属性。它总是返回真

代码：

```
var strMe = $("#o_productCategory").val();
alert(strMe); 
```

我使用时没有出现错误消息，`o_productCategory.value;`但不知何故它在不同的浏览器中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:28:18.657

尝试 ：

```
$('#o_productCategory :selected').text(); 
```

注意：仅当值和文本相同时才有效...

# c++ - 致命错误：iostream.h：没有这样的文件或目录

> ID：14123743
> 
> 赞同：0
> 
> 时间：2013-01-02T14:24:40.170
> 
> 标签：c++

我正在使用 GCC 4.6.3：

```
gourab@gourab-RV509:~$ g++ --version
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 
```

我的程序导致以下编译错误：

```
gourab@gourab-RV509:~$ g++ ArrayInput.cpp
ArrayInput.cpp:1:21: fatal error: iostream.h: No such file or directory 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T14:30:13.570

`iostream.h`自从 1998 年该语言标准化之前的一段时间以来，C++ 中就已经不存在了。

那是十五年前的事了。

请执行下列操作：

*   扔掉你的阅读材料
*   买一本[像样的](http://jcatki.no-ip.org/fncpp/Resources) [书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)
*   `#include <iostream>`—*没有`.h`*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T14:28:24.723

你想包括`iostream`. `iostream.h`出现在 Stroustrup 的 C++ 中：

> 最初的 iostream 库是为了挑战简洁、类型安全的 I/O 系统需要特殊语言支持的说法。[1](http://members.gamedev.net/sicrane/articles/iostream.html)它由 Bjarne Stroustrup 在贝尔实验室开发，并与原始 C++ 编译器 CFront 一起提供，并在 Stroustrup 的 C++ 编程语言的第一版中进行了描述。此版本的 iostream 库位于 iostream.h、fstream.h 等头文件中。

标准 C++ 的标头没有 .h，因此您想要：

```
#include <iostream> 
```

这是[一篇](http://members.gamedev.net/sicrane/articles/iostream.html)讨论这个问题的文章。

# c++ - 如何在 C++ 中分析位图文件？

> ID：14123744
> 
> 赞同：1
> 
> 时间：2013-01-02T14:24:50.670
> 
> 标签：c++

我现在需要如何分析 BMP，这是最简单的方法。这只是一个更大计划的一小部分，我真的没有太多时间来做这件事。基本上我现在只需要黑色像素和白色像素的“坐标”。我做了一些研究，发现以下站点很有趣： [站点 I](http://www.experts-exchange.com/Programming/Languages/CPP/Q_20855407.html)，[站点 II](http://www.programuj.com/forum/viewtopic.php?t=6568&sid=8dcb4da79304d64144bbe0413715eb1e)
第二个是波兰语，但那里发布的代码是可以理解的。第一个似乎要复杂得多（并且只在 Windows 上工作，这对我来说没问题，但我尽量避免它），第二个是使用 vcl.h 这是一个 Borland 特定的头文件（我使用 VisualStudio）。如果有任何帮助、建议或涉及该主题的网站链接，我将不胜感激。

PS：这是我的第一篇文章，如果您不喜欢我提出问题的方式，请告诉我如何做得更好。如果您想了解更多信息，请询问。

这是代码感谢您的帮助。

```
// read_and_send_bmp.cpp
#include <iostream><\code>
#include <string>
#include "bitmap_image.hpp"

using std::string;
using std::cin;
using std::cout;
using std::endl;

char * check(string name_of_bitmap);

int main()
{
    string name_of_bitmap;
    cout << "Name of file: ";
    cin >> name_of_bitmap;
    char * toPrint = check(name_of_bitmap);
    cout << endl << "this is the value of 'toPrint': "<< toPrint;
    /* send
    ...
    */
    system("PAUSE");
    return 0;
}

char * check(string name_of_bitmap)
{
    bitmap_image myBitMapImage(name_of_bitmap);
    int size = myBitMapImage.pixel_count();
    char * toReturn = new char[size+1];
        for(int i = 0; i < myBitMapImage.pixel_count(); i++)
        toReturn[i] = 'f';
     int h = 1;
     for(int j = 0, jlen = myBitMapImage.height(); j < jlen; j++)
    {
        for(int i = 0, ilen = myBitMapImage.width(); i < ilen; i++, h++)
            {
            if(myBitMapImage.red_channel(i, j) == 0 && myBitMapImage.green_channel(i, j) == 0 && myBitMapImage.blue_channel(i, j) == 0)
            {
            toReturn[(j)*myBitMapImage.width()+i] = 'b';
            cout << "pixel nr." << (j)*myBitMapImage.width()+i << " = b" << endl;
            }
            else
            {
            toReturn[(j)*myBitMapImage.width()+i] = 'w';
            cout << "pixel nr." << (j)*myBitMapImage.width()+i << " = w" << endl;
            }
        }
    }
    toReturn[size]='\0';
    return toReturn;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:40:45.923

看看这个：[http](http://www.kalytta.com/bitmap.h) ://www.kalytta.com/bitmap.h 。

使用 CBitmap::Load 加载文件，然后使用 CBitmap::GetBits 获取指向大小为 4 x 宽 x 高的 RGBA 缓冲区的指针。

白色像素有 R = G = B = 255，黑色像素有 R = G = B = 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:47:42.453

恕我直言，分析 BMP（位图）的最简单方法是将其转换为每个通道（例如红色、蓝色、绿色、alpha 等）具有一维的多维矩阵。

进入矩阵后，您可以使用矩阵代数应用变换。

有用于将 BMP 转换为矩阵的库。在网上搜索“库 c++ bmp”。

# oauth-2.0 - 是否需要每用户 API 发现（Google Drive SDK）？

> ID：14123745
> 
> 赞同：2
> 
> 时间：2013-01-02T14:24:53.453
> 
> 标签：oauth-2.0, google-drive-api

我在 Appengine 上有一个应用程序，它基于来自 Google Drive SDK 示例的 Python 版本的 DrEdit。**

虽然我实际上还没有进行任何分析，但我注意到它似乎正在为处理的每个请求从头开始构建 Drive 服务和 User Info 服务。这似乎非常浪费，因为它涉及发出一个 http 请求，然后以相对复杂的方式解析返回的 JSON。

我检查了[python 谷歌客户端库](https://developers.google.com/api-client-library/python/start/get_started)中的一般示例，看看它是否更有效地完成，但它看起来一样......

```
http = httplib2.Http()
http = credentials.authorize(http)
service = build('calendar', 'v3', http=http) 
```

这样做是因为 API 发现是特定于用户的（我在任何地方都没有看到过这种情况），还是只是一种将授权的 http 对象放入服务对象的懒惰方式？我是 python 和 GAE 的新手，所以我可能忽略了正在发生的某种巧妙的缓存，无论是 http 请求还是生成的对象，尽管我认为两者都不太可能。

**问题：** 我认为这是浪费是正确的吗？如果是这样，有谁知道在 F1 级 GAE 服务器上每个请求可能会浪费多少毫秒？有谁知道修改后的 discovery.py 模块，它允许跨用户重用服务。

**我对示例进行了合理数量的更改，包括切换到 python 2.7 并使用仅存储在 memcache 中的凭据的在线 OAuth2。

**编辑：** 我刚刚安装了 appstats （这并不像我担心的那么复杂！）。似乎有问题的 http 请求大约需要 60-75 毫秒。因此，如果您想执行两项操作——一项用于 Drive，一项用于 UserInfo（它们是同步的）——每个请求浪费了大约 120-150 毫秒。似乎值得节省的金额。

以及如何在服务上[异步](https://developers.google.com/appengine/docs/python/urlfetch/asynchronousrequests)使用 execute() 命令，这将允许驱动请求、userinfo 和 memcache/datastore 同时完成。（从逻辑上讲，至少在我的应用程序中是可能的）。这是否需要（另一个）重新编写 discovery.py 或者是否有更简单的方法让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:37:47.423

是的，这是浪费。尝试打开缓存，这应该会显着减少网络 I/O：

[https://developers.google.com/api-client-library/python/guide/performance#cache](https://developers.google.com/api-client-library/python/guide/performance#cache)

我的猜测是，这会将 60-75 毫秒的时间缩短 4 或 5 倍。

# google-maps-api-3 - 如何获取提交谷歌电子表格表单的位置

> ID：14123748
> 
> 赞同：0
> 
> 时间：2013-01-02T14:25:02.170
> 
> 标签：google-maps-api-3, google-apps-script, google-sheets, google-spreadsheet-api

谷歌应用程序脚本中是否有任何方法可以从用户提交谷歌电子表格表单的位置检索用户的位置？

我正在尝试为新用户订阅创建一个表单，并希望获取提交的位置。

请指教。

提前致谢。

# scala - 如何在 sbt 中检测 JavaFX 运行时 jar

> ID：14123749
> 
> 赞同：3
> 
> 时间：2013-01-02T14:25:05.053
> 
> 标签：scala, javafx-2, sbt

我想做的是`javaHome`在开始时定义，无论是从环境变量还是从固定字符串作为默认值。然后，稍后，我将使用该字符串。

这是我尝试过的：

```
javaHome := Some(file("/Library/Java/JavaVirtualMachines/jdk1.7.0_10.jdk/Contents/Home")) 
```

然后

```
unmanagedJars in Compile <+= (javaHome) { fn => Attributed.blank( fn + "/jre/lib/jfxrt.jar") } 
```

我试图阅读 [reference][1] 但它确实比 Scala 本身更复杂。请帮忙。

我可以通过在构建文件中间有一个固定的字符串来绕过这个，但通常我不喜欢这样。

平台是 OS X、sbt 0.12.1、JDK 7u10、Scala 2.9.2

***编辑：** 由于我找到了解决方案，我已经删除了错误消息和另外两次（不成功的）尝试，因为它们只会混淆。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T12:26:13.500

终于搞定了。问题似乎部分在于理解 sbt 值模型（以及它纯粹过度使用自定义运算符！），部分在于了解 sbt 中使用的类型。

我将相应地编辑问题，但这是我的发现（和解决方案）。

1.  sbt 价值观是预先设定好的。它们不是我无法设置的变量`myOwn`。这`javaHome`是 sbt 的一个已知值（或者实际上是一个任务？）。

2.  话虽如此，我想知道为什么 sbt 不能很好地为我找到合适的 JDK。那好吧。

提示：使用`val xxx: Nothing = expression`是查找各种事物类型的**好工具。**不能有一个类型的实例，`Nothing`因此总是失败，并带有一个很好的错误消息，通知`expression`.

这是我的`javaHome`检测代码（来自`build.sbt`）：

```
//---
// Note: Wouldn't 'sbt' be able to provide us a nice default for this (the following logic
//      would deserve to be automatic, not in a project build script). AK 4-Jan-2013
//
javaHome := {
  var s = System.getenv("JAVA_HOME")
  if (s==null) {
    // tbd. try to detect JDK location on multiple platforms
    //
    // OS X: "/Library/Java/JavaVirtualMachines/jdk1.xxx.jdk/Contents/Home" with greatest id (i.e. "7.0_10")
    //
    s= "/Library/Java/JavaVirtualMachines/jdk1.7.0_10.jdk/Contents/Home"
  }
  //
  val dir = new File(s)
  if (!dir.exists) {
    throw new RuntimeException( "No JDK found - try setting 'JAVA_HOME'." )
  }
  //
  Some(dir)  // 'sbt' 'javaHome' value is ': Option[java.io.File]'
} 
```

这是使用它的片段（稍后在同一个文件中），确保我们可以访问`jfxrt.jar`（JavaFX 2.x 运行时）。无论如何，Oracle（或 sbt）应该让它在类路径上，所以所有这些都可以幸免。

```
//---
// JavaFX
//
// Note: We shouldn't even need to say this at all. Part of Java 7 RT (since 7u06) and should come from there (right)
//      The downside is that now this also gets into the 'one-jar' .jar package (where it would not need to be,
//      and takes 15MB of space - of the 17MB package!) AKa 1-Nov-2012
//
unmanagedJars in Compile <+= javaHome map { jh /*: Option[File]*/ =>
  val dir: File = jh.getOrElse(null)    // unSome
  //
  val jfxJar = new File(dir, "/jre/lib/jfxrt.jar")
  if (!jfxJar.exists) {
    throw new RuntimeException( "JavaFX not detected (needs Java runtime 7u06 or later): "+ jfxJar.getPath )  // '.getPath' = full filename
  }
  Attributed.blank(jfxJar)
} 
```

请注意，sbt 不允许条目中有空行。为了避免这种情况，我`//`在需要一些空白的地方使用了缩进线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:40:32.497

`<+=`确实是用于附加到“集合”设置，我认为字符串连接不支持它。另外，在您的第二次尝试中，您既尝试通过赋值运算符 ( `<+=`)**进行**连接，又尝试使用运算符手动连接`+`，这当然不是您想要的。只需替换`<+=`为`<<=`，它应该让 sbt 高兴。

```
unmanagedJars in Compile <<= javaHome map { jh => jh + "/jre/lib/jfxrt.jar" } 
```

**更新**：原来我误读了你的帖子，完全错了。您使用`<+=`附加到 unamanagedJar 是正确的，而使用`+`只是为了创建一个绝对文件路径。对于那个很抱歉。这次我真的尝试用手头的 sbt 修复它，并设法让它编译。不过，我实际上并没有针对实际项目对其进行测试，我会让您尝试并报告它是否按预期工作。

```
unmanagedJars in Compile <+= javaHome map { jh => Attributed.blank( new File( jh.getOrElse(sys.error("Error, could not get java home")),"jre/lib/jfxrt.jar" ) ) } 
```

不过，这显然不是很好，可能会有一些帮手使它更具可读性。

# php - 选择表单类型的数组到字符串转换错误

> ID：14123750
> 
> 赞同：6
> 
> 时间：2013-01-02T14:25:09.580
> 
> 标签：php, symfony, doctrine

## 我正在尝试做的事情：

我有一个带有“teams”表和“weekday”属性的数据库。我生成了我的学说实体，现在我正在构建一个 Symfony2 表单。

我想将一个包含工作日的数组保存到我的 team 表中的 weekdays 属性中。weekdays 属性是一个 VARCHAR(255) 所以它应该能够包含一个字符串数组。我使用了选择类型，**但是在提交表单时出现数组到字符串的转换错误**。

## 我在做什么：

我使用了 Symfony2 选择表单类型（带有多个选项），因为团队可以选择几个可用的工作日。我首先检索了我的团队对象数据。然后我制作这样的表格：

```
$builder = $this->createFormBuilder($team);
$form = $builder->add('weekday', 'choice', array(
        'choices' => array(
            'mon'    => 'Monday',
            'tue'    => 'Tuesday',
            'wed'    => 'Wednesday',
            'thu'    => 'Thursday',
            'fri'    => 'Friday',
            'sat'    => 'Saturday',
            'sun'    => 'Sunday',
            ),
        'multiple' => true,
        'expanded' => true,
        'label' => 'Day of the week',
        'label_attr' => array('class' => 'control-label'),
        'attr' => array('placeholder' => 'Day of the week', 'size' => '7')
        ))->getForm(); 
```

提交表单后，我使用实体管理器将更改保存到数据库：

```
if ($request->isMethod('POST')) {
    $form->bind($request);

    if ($form->isValid()) {

        // Save changes to db
        $em = $this->getDoctrine()->getManager();
        $em->persist($team);
        $em->flush();

        // Redirect to new canonical url
        return $this->redirect($this->generateUrl('team_edit', array('nameCanonical' => $team->getNameCanonical(), 'code' => $team->getCode())));
    } 
```

## 错误：

在我看来，这一切都是 100% 有效的代码。我已经在 symfony2 中像这样制作了其他形式。但是当我在表单中选择一个或多个工作日，然后提交时，我收到此错误：

> 执行 'UPDATE teams SET weekday = ? 哪里 id = ？带参数 {"1":["mon","tue","wed"],"2":6}：
> 
> 注意：/Users/username/Dropbox/www/projectname/www/vendor/doctrine/dbal/lib/Doctrine/DBAL/Connection.php 第 1211 行中的数组到字符串转换

（[完整的错误页面在这里](http://i.imgur.com/5J8zv.png)）

我想不出办法来解决这个问题。帮助表示赞赏！我的完整代码可以[在这个 gist 上](https://gist.github.com/4434897)查看。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T21:23:51.457

您需要做的是将您的属性类型设置为`array`，Doctrine 会为您处理（反）序列化。

```
class Team
{
    /**
     * @ORM\Column(type="array")
     */
    protected $weekdays;

    /* Some more code */
} 
```

所有可能类型的列表可以在官方[文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/basic-mapping.html#doctrine-mapping-types)中找到。

# c# - 任何想法为什么这个静态类没有初始化？

> ID：14123757
> 
> 赞同：0
> 
> 时间：2013-01-02T14:25:42.857
> 
> 标签：c#, static, records

我目前正在为一个涉及构建“电子宠物”程序的 uni 项目开发一个程序，但是我很早就遇到了一个与我用于存储与每个宠物相关的值的类构造相关的错误记录的一部分。但是，当我跟踪程序时，变量似乎没有初始化，`NullReferenceException`一旦程序第一次调用变量，它就会抛出一个。关于为什么的任何想法？

```
static class GlobalVars     // Static class used to store pet values as 'global' variables.
{
    public static TTamagotchiPet Pet1 { get; set; }
    public static TTamagotchiPet Pet2 { get; set; }
    public static TTamagotchiPet Pet3 { get; set; }
    public static TTamagotchiPet Pet4 { get; set; }
}

public void frmTamagotchi_Load(object sender, EventArgs e)      // On Load event; initialises Pet 1.
{
    tmrUpdate.Enabled = true;
    GlobalVars.Pet1.Active = true;
    //GlobalVars.Pet1.Dead = false;
    //GlobalVars.Pet1.FunValue = 0;
    //GlobalVars.Pet1.FoodValue = 0;
    //GlobalVars.Pet1.HealthValue = 0;
    //GlobalVars.Pet1.ExertionValue = 0;
    //GlobalVars.Pet2.Active = false;
    //GlobalVars.Pet3.Active = false;
    //GlobalVars.Pet4.Active = false;
}

private void tmrUpdate_Tick(object sender, EventArgs e)     // Update timer. Each tick reduces pet attributes and checks to see if a pet has died, and controls pet states for the animation timer.
{
// First section updates pet attributes and checks to see if health reaches the 100 limit - at which point the pet dies.
    if (GlobalVars.Pet1.Active == true)  //code crashes here
    {
        if (GlobalVars.Pet1.Dead == false)
        { 
```

`frmTamagotchi_load`即使这些行未注释，代码也会跳过其余的初始化（我已经在方法中注释掉了许多行）；这可能与问题有关吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T14:28:08.070

您永远不会为宠物本身设置值。

您需要将以下内容放入您的 Load 方法或构造函数中：

```
GlobalVars.Pet1 = new TTamagotchi();
GlobalVars.Pet2 = new TTamagotchi();
GlobalVars.Pet3 = new TTamagotchi();
GlobalVars.Pet4 = new TTamagotchi(); 
```

在您的程序开始时，这些 Pet1...Pet​​4 值为 null，除非您明确实例化它们，否则这些值将保持为 null，如上面的代码中所示。

如果将此代码放在构造函数中，请确保它是`static`一个，就像`GlobalVars`一个`static`类一样。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T14:28:37.797

您需要以某种方式初始化属性。由于它们没有被设置为任何东西，它们将默认为`null`，这意味着任何访问成员的尝试都将导致`NullReferenceException`.

静态[构造函数](http://msdn.microsoft.com/en-us/library/k9x6w0hc.aspx)可以解决问题：

```
static class GlobalVars     // Static class used to store pet values as 'global' variables.
{
    static GlobalVars
    {
      Pet1 = new TTamagotchi();
      Pet2 = new TTamagotchi();
      Pet3 = new TTamagotchi();
      Pet4 = new TTamagotchi();
    }

    public static TTamagotchiPet Pet1 { get; set; }
    public static TTamagotchiPet Pet2 { get; set; }
    public static TTamagotchiPet Pet3 { get; set; }
    public static TTamagotchiPet Pet4 { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T14:26:40.183

为什么？因为你没有初始化它。您可以创建一个静态 ctor 并初始化您要使用的所有属性：

```
static GlobalVars     
{
    // ...
    static GlobalVars()
    {
        Pet1 = new TTamagotchiPet();
        // ...
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T14:30:22.090

您已经**声明**了许多引用类型的类变量。

当您声明一个类变量（无论是静态变量还是实例变量）时，它们被分配到变量的类型在`default(T)`哪里。`T`在引用类型（例如`class T`）的情况下，这是`null`.

如果您希望将它们初始化为一个值，而不是`default(T)`您应该在声明点执行赋值：

```
static class ProbablyNotWhatYouReallyNeed
{
    // assigned something other than the default at declaration
    private static TTomagachiPet _pet1 = new TTomagachiPet();

    // You probably don't want to change the *instance*, but rather you want
    // Access to the instance
    public static TTomagachiPet Pet1 { get { return _pet1; } } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T14:28:44.293

你需要类似的东西：

```
static class GlobalVars
{
    public static TTamagotchiPet Pet1 { get; set; }
    static GlobalVars() 
    {
        Pet1 = new TTamagotchiPet();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T14:29:52.490

问题是您从未真正初始化`Pet1`对象。尝试将此调用添加到您的`Load`方法中：

```
tmrUpdate.Enabled = true;
GlobalVars.Pet1 = new TTamagotchiPet();
GlobalVars.Pet1.Active = true; 
```

您不应该遇到`NullReferenceException`对`Pet1`. 显然，您还需要初始化其他 Pet 对象。

# r - 递归列表

> ID：14123761
> 
> 赞同：5
> 
> 时间：2013-01-02T14:26:14.493
> 
> 标签：r

考虑以下代码：

```
b <- list(u=5,v=12)
c <- list(w=13)
a <- list(b,c) 
```

所以 a 实际上是一个列表列表。当我调用`a$b`, 或`a$c`时，为什么会`NULL`返回？同样，如果我调用`a$u`,`a$v`或`a$w`,`NULL`则返回。

以下之间也有区别：

```
c(list(a=1,b=2,c=list(d=5,e=9))) 
```

和

```
c(list(a=1,b=2,c=list(d=5,e=9)), recursive=T) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T14:29:00.790

`$`索引运算符按*名称*索引列表。如果要从未命名列表中获取第一个元素，则`a`需要`a[[1]]`.

您可以创建一个函数，如果未指定名称，则自动添加名称，类似于工作方式`data.frame`（此版本是全有或全无 - 如果命名*了某些*参数，它将不会命名剩余的未命名的参数）。

```
nlist <- function(...) {
    L <- list(...)
    if (!is.null(names(L))) return(L)
    n <- lapply(match.call(),deparse)[-1]
    setNames(L,n)
}

b <- c <- d <- 1

nlist(b,c,d)
nlist(d=b,b=c,c=d) 
```

对于第二个问题，答案是“是”；你试过了吗？？？

```
L <- list(a=1,b=2,c=list(d=5,e=9))
str(c(L)) 
## List of 3
##  $ a: num 1
##  $ b: num 2
##  $ c:List of 2
##   ..$ d: num 5
##   ..$ e: num 9
str(c(L,recursive=TRUE))
##  Named num [1:4] 1 2 5 9
##  - attr(*, "names")= chr [1:4] "a" "b" "c.d" "c.e" 
```

第一个是一个包含两个数值和一个列表的列表，第二个已被展平为一个命名的数字向量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T14:50:07.057

对于问题的第一部分，[我们在 R 语言定义文档中](http://www.r-project.org/)

> 使用 $ 的形式适用于递归对象，例如列表和对列表。它只允许文字字符串或符号作为索引。也就是说，索引是不可计算的：对于需要计算表达式以找到索引的情况，请使用 x[[expr]]。

所以你可以改变你的 a`a <- list(b,c)`从`a <- list(b=b,c=c)`

```
 a$b =  a[['b']]   ## expression 
$u
[1] 5

$v
[1] 12 
```

对于问题的第二部分，您可以尝试例如应用`$`运算符，以查看差异。

```
> kk <- c(list(a=1,b=2,c=list(d=5,e=9)))              ## recursive objects
> hh <- c(list(a=1,b=2,c=list(d=5,e=9)), recursive=T) ## atomic objects
> kk$a
[1] 1
> hh$a
Error in hh$a : $ operator is invalid for atomic vectors 
```

因为我们从 ?c 得到一个向量，对于 hh

> 如果 recursive = TRUE，则函数递归地通过列表（和对列表）将它们的所有元素组合成一个向量。

# python - 如何使用 python / sqlalchemy 在同一个表上加入两个查询？

> ID：14123763
> 
> 赞同：5
> 
> 时间：2013-01-02T14:26:14.120
> 
> 标签：python, join, sqlalchemy

在 SQLAlchemy 中连接同一表数据的两个查询的正确方法是什么？

即我有一个数据类定义是这样的：

```
class DataMeasurement(Base):
    __tablename__ = 'DataMeasurement'
    id = Column(Integer, Sequence('data_measurement_id_seq'), primary_key=True)
    data_source = Column(String)
    timestamp = Column(DateTime)
    sensor_output = Column(Float) 
```

...并且我想加入以下两个有匹配时间戳的查询：

```
q1 = self.session.query(DataMeasurement).filter_by(data_source='Sensor1').order_by(DataMeasurement.timestamp)
q2 = self.session.query(DataMeasurement).filter_by(data_source='Sensor2').order_by(DataMeasurement.timestamp)
# ...and now what? 
```

有没有办法简单地做到这一点？...或者我是否以一种根本有缺陷的方式来解决这个问题（我对 SQLAlchemy 很陌生）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-03T15:09:28.030

使用子查询：

```
subq = self.session.query(DataMeasurement).\
    filter_by(data_source='Sensor1').subquery()
q = self.session.query(
    DataMeasurement.timestamp,
    # Use labels to distinguish between identically named columns.
    # This is optional.
    subq.c.sensor_output.label('output1'),
    DataMeasurement.sensor_output.label('output2')
).filter(
    (DataMeasurement.data_source == 'Sensor2') &
    (DataMeasurement.timestamp == subq.c.timestamp)
)

# Simply get a list of named tuples.
print q.all()
# Or access each column using properties.
for row in q:
    print row.timestamp, row.output1, row.output2 
```

您还可以将结果作为`DataMeasurement`对象获取：

```
subq = self.session.query(DataMeasurement).\
    filter_by(data_source='Sensor1').subquery()
# Use alias to associate mapped class to a subquery.
dmalias = aliased(DataMeasurement, subq)
q = self.session.query(dmalias, DataMeasurement).filter(
    (DataMeasurement.data_source == 'Sensor2') &
    (DataMeasurement.timestamp == dmalias.timestamp)
)

# For each row you get a tuple containing two DataMeasurement objects.
for dm1, dm2 in q:
    print dm1.timestamp, dm1.sensor_output, dm2.sensor_output 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-03T03:54:54.500

您可以使用[别名](http://docs.sqlalchemy.org/en/rel_0_8/orm/tutorial.html#using-aliases)来建立相同表之间的关系。

您的查询可能类似于

```
adalias1 = aliased(DataMeasurement)
adalias2 = aliased(DataMeasurement)
q1 = self.session.query(DataMeasurement).\
        filter(
               and_(
                    adalias1.data_source in ('Sensor1', 'Sensor2'), 
                    adalias1.timestamp == adalias2.timestamp
                   )
              ) 
```

# c++ - 指针的C++向量、向量声明和指针的删除

> ID：14123768
> 
> 赞同：0
> 
> 时间：2013-01-02T14:26:38.533
> 
> 标签：c++, pointers, memory-management, memory-leaks, singleton

假设我有一个单例类：

```
class Singleton {
public:
    static Singleton* getInstance();
    void doit();
    std::vector<Object*>& getVector();

private:
    std::vector<Object*> _vector;
    static Singleton *instance;
    Singleton();
    ~Singleton();
    Singleton(const Singleton&);
};

class Delegator {
public:
        void main();
} 
```

*   在方法中，我用指向对象`doit`的指针填充。`_vector`
*   在课堂`main()`上`Delegator`，我调用`getVector()`并显示结果。

鉴于这种抽象，我有以下问题：

1.  `main()`我可以删除from中的所有指向 Object 实例的指针`Delegator`（显示结果后）。如果是，是否建议这样做？
2.  单身人士会被摧毁吗？换句话说，返回的引用是否`getVector()`总是有效的？
3.  我返回对向量的引用，而不是在`getVector()`. 鉴于向量只包含指向对象的指针，不会修改`Singleton`类外的向量内容，返回引用是否有效率？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T14:38:54.760

典型的单例模式看起来像这样（其他变体也是可能的，例如使用引用而不是实例的指针）。

单例.h：

```
class Singleton {
public:
    static Singleton* getInstance();
    ...

private:
    static Singleton *instance;
    Singleton();                 //permit construction of instances
    ~Singleton();                //permit deletion of instances
    Singleton(const Singleton&); //don't provide an implementation for copy-ctr.
}; 
```

单例.cpp：

```
Singleton *Singleton::instance = 0;

Singleton::Singleton() {
    // init your stuff
}

Singleton::~Singleton() {
}

Singleton *Singleton::getInstance() {
    if(!instance) instance = new Singleton();
    return instance;
} 
```

在您的情况下，您返回一个单例实例的副本，这违反了单例模式。

回答你的 2\. 问题：永远不应该删除单例。但是，我们定义了一个析构函数，以便我们可以将其设为私有，否则调用者可以`delete Singleton::getInstance()`，这不是一个好主意。

话虽如此，单例在大多数情况下被认为是一种**反模式**。在大多数情况下，实用程序类更适合。实用程序类是一个非常相似的概念，但它们实现了所有静态而不是使用实例。当您需要初始化代码时，请使用`init()`方法执行此操作（因为不涉及构造函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T15:09:48.543

我对你没有问的问题的第一个答案是：

**不要使用单例**。这是一种反模式。它使它接触到的代码变得更糟。它会扼杀可测试性，并使将来修改程序变得更加困难。

这篇非常棒的文章非常详细地讨论了[为什么 Singleton 是一个坏主意](http://www.object-oriented-security.org/lets-argue/singletons)。

要回答您提出的问题...

1.  是的你可以。当然，这些指针仍将在向量中，因此向量现在将包含大量悬空指针。所以你也应该清除向量。
2.  使用您拥有的代码，它将永远不会被破坏。通过一些定义，使您的 Singleton 成为内存泄漏。所以是的，参考将始终有效。
3.  是的，返回引用有巨大的性能改进。复制向量意味着复制向量中的所有元素。请注意，这意味着将复制所有指针，而不是`Object`它们指向的 s。此外，如果您返回一个副本并让`main`函数删除所有指针，那么您绝对可以保证有一个向量在其中，其中包含大量悬空指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T14:49:16.900

1.  这完全取决于您的要求和设计。从这个角度来看，您提供的代码是中立的。

2.  同样，这取决于您的设计和实施。`singleton pattern`本身并不意味着寿命。如果您需要在`singleton`某个生命周期内有效，则需要通过其他方式确保它（例如，定义它的全局实例）。

3.  是的，有性能提升。实例`vector`并不简单`array`，除了实际存储的信息外，还包含大量数据。如果按值返回，所有数据都将被复制（抛开本次讨论的优化）。此外，正如另一个答案中正确指出的那样，按值返回实际上破坏了`singleton pattern`.

# iphone - 带有 UITableViewController 的应用程序变得非常无响应

> ID：14123771
> 
> 赞同：0
> 
> 时间：2013-01-02T14:26:49.237
> 
> 标签：iphone, objective-c, ios

我注意到我的整个应用程序在使用一段时间后变得非常无响应。我打开了仪器并决定做一些测试，主要是关于内存和 CPU 使用情况。我将我的应用程序与 Twitter 应用程序进行了比较，因为它`UITableView`在 tableView 中同时使用 a 和图像，就像我的应用程序一样。我对仪器完全陌生，所以必须使用我对 iPhone 工作原理的非常基本的了解来弄清楚所有内容。

看来我的内存使用情况很好，因为这两个应用程序惊人地相似。我的应用经过大量使用，在这个阶段非常滞后：真实内存：55.63，虚拟：152.03。推特：真实：58.42，虚拟：192.89。Twitter 应用程序，尽管使用了更多内存，但仍然非常响应（我不会说超级响应，仍然有一些跳跃的时刻）。关闭后，我转向 CPU。

现在这就是奇怪的地方。Twitter 应用程序使用非常少量的 CPU（尽管它比我的应用程序稍微密集一些）。当什么都没有发生时，CPU 使用率下降到 ~0%。它跳了几次，这恰逢该应用程序变得有点滞后的时候。然而，我的应用程序是一个巨大的 CPU 猪！当什么都没有发生时，我的应用程序使用了 100% 的已用 CPU，大约是 80%-100%。换句话说，当读取 Activity Monitor Instrument 上的条时，系统负载在`UITableView`空闲时并没有减少，这就是 Twitter 应用程序正在做的事情。

因此，我决定这就是该应用程序变得无响应/滞后的原因。问题是，我不知道如何解决这个问题。

这就是我能想到的：
- 我做了一大堆异步网络请求。然而，这并不能解释为什么 CPU 使用率保持不变，因为请求通常在一秒钟内完成，并且很快就会下载并解析 JSON。
- 在完成每个单独的网络请求后，我重新加载 TableView。但是，如上所述，这是在下载最后一个 JSON 的同时完成的，因此没有理由会导致 CPU 使用率飙升。
- 在我的单元格配置中完成了大量计算。但是，与前两个相同，它并没有太多解释。

即使我切换到`UIViewController`高负载仍然存在。是`UIViewController`启动视图控制器，当应用程序第一次启动时，它的负载为 0%，并且无限期地保持在 0%。负载只有在负载时才跳起来`UITableViewController`，然后它仍然如上所述。因此，这个巨大的 CPU 使用率必须来自`UITableViewController`.

有没有人有任何想法？对不起，大量的文字墙。如果您需要我发布任何代码，请询问，我会做的。

感谢您的帮助，
问候，
迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:54:48.387

在调试器中运行您的应用程序，并在它运行缓慢时随机停止它。然后检查所有不同的线程在做什么。你可能很快就会发现一些你意想不到的东西，并且可能是罪魁祸首。

只需点击调试器中的暂停按钮，然后展开所有线程以显示调用堆栈。如果一个线程的调用栈只显示iOS的函数和方法，你可以忽略它。但是如果它显示了你的应用程序的一些方法，那么你想点击这些方法并调查它：为什么该方法当前正在运行？为什么它卡在这条特定的线上？

这有点像穷人的性能调试方法。高级方法是使用 Instruments。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:32:34.207

> 我做了一大堆异步网络请求。然而，这并不能解释为什么 CPU 使用率保持不变，因为请求通常在一秒钟内完成，并且很快就会下载并解析 JSON。

通常他们使用相反的方法：像 Twitter 这样做得好的应用程序使用一个服务器，当有更新时，它会向应用程序发送通知。

看看[这篇文章](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)。

# security - 如何仅为我的 Silverlight 应用设置 AllowElevatedTrustAppsInBrowser？

> ID：14123772
> 
> 赞同：3
> 
> 时间：2013-01-02T14:26:51.400
> 
> 标签：security, silverlight-5.0

我正在使用 Silverlight 5 创建 Silverlight 应用程序，其中“在浏览器中运行时需要提升的信任”设置为 true。我想让用户选择一个文件夹，然后应用程序从所选文件夹上传所有文件。此行为要求应用程序具有提升的权限，并且必须在注册表中具有值为“1”的“AllowElevatedTrustAppsInBrowser”条目。

现在将此注册表项设置为 true 将影响每个 Silverlight 应用程序。我是否可以在注册表中设置这样的条目，以便只有我的应用程序才能享受此设置，而其他 Silverlight 应用程序必须自己设置此权限？

抱歉描述不好，但我想要的是访问文件系统，我不想要的是为每个受信任的 Silverlight 应用程序打开权限通道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T12:35:58.420

我也认为答案是（目前） - 不。但我也认为答案（在未来）应该是——是的。一个完全受信任的“命名”Silverlight 应用程序在浏览器中运行是有意义的，前提是用户同意这样做（即，他们可以在弹出窗口中选择）

# c# - 在 .cshtml 页面中传递 GET 参数 mvc 4

> ID：14123773
> 
> 赞同：0
> 
> 时间：2013-01-02T14:27:05.057
> 
> 标签：c#, asp.net-mvc-4, get

我对 mvc 很陌生，我正在为我的网站做一些分页。我想知道如何从我的 url 访问 GET 参数，所以我可以执行以下操作：

```
@html.Actionlink("next page", "index", "someController", null, ?searchvalue1=GETPARAM1&searchvalue2=GETPARAM2&page=GETPARAM3 + 1) 
```

网址将类似于

> [http://www.something.com/controller?searchvalue1=foo&searchvalue2=bar&page=1](http://www.something.com/controller?searchvalue1=foo&searchvalue2=bar&page=1)

这是可能的还是有解决方法？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-28T13:00:48.037

使用 QueryString ，例如：

```
@{
    string searchvalue1= Request.QueryString["searchvalue1"];
    string searchvalue2= Request.QueryString["searchvalue2"];
    string page= Request.QueryString["page"];
} 
```

来源： [在 .cshtml 页面中发送和接收数据](https://stackoverflow.com/questions/13920362/send-and-receive-data-in-cshtml-page)

它对我有用，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T14:29:25.267

你想要的是这样的：

```
@html.Actionlink("next page", "index", "someController", new { 
  searchvalue1=Request["searchvalue1"],
  searchvalue2=Request["searchvalue2"],
  page=Convert.ToInt32(Request["page"]) + 1
}) 
```

作为最后一个参数传递的匿名对象中的属性是 GET 变量的名称，它们的值是 URL 中传递的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:14:57.367

要*访问*控制器中的值，您需要向控制器操作添加相应的参数。这是我之前使用过的分页操作方法：

```
public ActionResult Index(int page = 1, string sort = Schools.DefaultSort, string sortDir = SortConstants.Ascending)
{
    // action code goes here
} 
```

希望这会有所帮助，如果您需要更多，请告诉我。

# android - Eclipse清空Android项目中的所有文件内容，如何解决？

> ID：14123778
> 
> 赞同：0
> 
> 时间：2013-01-02T14:27:13.823
> 
> 标签：android, eclipse

我有一个正确工作（编译和执行）的现有 Android 项目。我已经完成了这个项目，所以我从 Eclipse 项目资源管理器中删除了它。我保存了这个项目的备份副本。几天后，我将其导入。我发现 eclipse 清空了所有 *.java 和 *.xml 文件。由于我有备份，我尝试导入这个项目几次。它一直在发生。

我厌倦了用其他电脑检查同一个项目。它工作得很好。所以我确信项目配置没有问题。eclipse一定有什么问题。

实际上，它发生在其他项目的早期。我上次忽略了。

如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T09:16:19.063

将您的android项目复制到另一个文件夹中作为另一个副本，如果它显示所有文件为空，则在eclipse中打开旧项目。！然后转到您的项目所在的文件夹，并通过从新复制的项目中复制粘贴再次替换所有内容，然后转到 Eclipse 并刷新项目。

# php - 为php转换一个unixtime stamp

> ID：14123784
> 
> 赞同：-3
> 
> 时间：2013-01-02T14:27:40.003
> 
> 标签：php, datetime, unix-timestamp

我需要知道如何将 unix 时间戳转换为从现在到该时间戳的剩余时间。如果剩下的时间是 1 天，它必须显示 1 天，或者如果是 15 分钟，则显示 %dMin 以此类推，持续一周、几小时、几年、几个月。

目前我使用

```
$realtime = strftime("%B %d %Y %r",1295058844); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:02:57.770

[您可以通过使用 PHP 的DateTime](http://www.php.net/datetime)类非常轻松地做到这一点：-

```
$futureDate = new DateTime('3rd April 2014'); 
```

或者

```
$futureDate = new DateTime();
$futureDate->setTimestamp(1295058844); 
```

你明白了。

```
$now = new DateTime();
$diff = $futureDate->diff($now); 
```

这将为您提供一个[DateInterval](http://www.php.net/dateinterval)对象：-

```
var_dump($diff);

object(DateInterval)[3]
  public 'y' => int 1
  public 'm' => int 3
  public 'd' => int 0
  public 'h' => int 9
  public 'i' => int 8
  public 's' => int 58
  public 'invert' => int 1
  public 'days' => int 455 
```

然后你可以做这样的事情： -

```
echo "Time left = {$diff->y} years, {$diff->m} months, {$diff->d} days, {$diff->h} hours, {$diff->i} minutes, {$diff->s} seconds"; 
```

给出：-

> 剩余时间 = 1 年 3 个月 0 天 9 小时 8 分钟 58 秒

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:36:02.920

首先获取当前时间戳之间的差异（由 time() 返回）：

```
$timestamp = 1295058844;

$diff = time() - $timestamp; 
```

然后编写一个函数，将结果格式化为天/小时/分钟等。例如，您可以通过将 $diff 除以 1 天的秒数来获得天数：

```
$days = floor($diff / (60 * 60 * 24)); 
```

60 秒 * 60 分钟 * 24 小时。由于这个数字永远不会改变，你可以写：

```
$days = floor($diff / 86400); 
```

获取剩余秒数并计算小时数、分钟数等。

# facebook - windows phone 8中nuget包的facebook参考

> ID：14123785
> 
> 赞同：0
> 
> 时间：2013-01-02T14:27:40.143
> 
> 标签：facebook, reference, nuget

我正在尝试在我的 windows phone 8 应用程序中添加来自 nuget 包的 facebook 引用，但出现此错误：

无法安装包“Facebook 6.1.4”。您正在尝试将此包安装到以“WindowsPhone,Version=v8.0”为目标的项目中，但该包不包含与该框架兼容的任何程序集引用。有关详细信息，请联系包作者。

我该如何解决这个问题？

谢谢，汉娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:41:06.320

将 Nuget 从 2.0 版更新到 2.1 或 2.2。由于 Windows Phone 8 支持 2.1 及更高版本。然后在 Library 包管理器中使用 Install-Package Facebook insatll

[http://docs.nuget.org/docs/release-notes/nuget-2.1#Targeting_Windows_8_and_Windows_Phone_8_Projects](http://docs.nuget.org/docs/release-notes/nuget-2.1#Targeting_Windows_8_and_Windows_Phone_8_Projects)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T22:13:38.630

您只能将包添加到 Windows Phone 8 项目，该项目以 Windows Phone SDK 附带的专用框架为目标。Facebook 软件包，您尝试添加目标良好的旧 .net 框架。

请参阅以下链接，其中提供了有关 nuget 上的 Windows Phone 包的更多信息：

[面向 Windows 8 和 Windows Phone 8 项目](http://docs.nuget.org/docs/release-notes/nuget-2.1#Targeting_Windows_8_and_Windows_Phone_8_Projects)

# iphone - 谷歌地图没有显示想要的位置

> ID：14123788
> 
> 赞同：0
> 
> 时间：2013-01-02T14:28:10.950
> 
> 标签：iphone, objective-c

我在我的 iPhone 应用程序中实现了谷歌地图。当我使用文本字段搜索特定城市时，谷歌地图会动画到该城市片刻，然后移回我当前的位置。我不知道为什么会这样，所以请告诉我需要做什么才能获得所需的位置。

这是我已经实现的代码

```
-(IBAction)changeMapType:(id)sender{
    seg = (UISegmentedControl*)sender;
    if (seg.selectedSegmentIndex == 0) {
        mMapView.mapType = MKMapTypeStandard;
    }
    else if (seg.selectedSegmentIndex == 1) {
        mMapView.mapType = MKMapTypeSatellite;
    }

}

#pragma mark annotation callbacks

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation{
    NSLog(@"This is called");
    MKPinAnnotationView *annView=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"customloc"];
    [annView setPinColor:MKPinAnnotationColorPurple];
    return annView;
}

#pragma mark location callbacks
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
    NSLog(@"location found... updating region");
    [self addPins:newLocation.coordinate.latitude lon:newLocation.coordinate.longitude];
}

- (void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error{
    NSLog(@"location not available");
}

#pragma mark geo functions

-(void)addPins:(float)lat lon:(float)lon{

    CLLocationCoordinate2D location;
    location.latitude = lat;
    location.longitude = lon;

    // forcus around you
    MKCoordinateRegion region;
    region.center=location;
    MKCoordinateSpan span;
    span.latitudeDelta=0.5f;
    span.longitudeDelta=0.5f;
    region.span=span;
    [mMapView setRegion:region animated:TRUE];

    float westLon = region.center.longitude - region.span.longitudeDelta;

    float southLat = region.center.latitude - region.span.latitudeDelta;

        // random fill the screen -> this should convert to database driven coordinates
        location.latitude=southLat + (region.span.latitudeDelta/50.0f)*(arc4random()%100);
        location.longitude=westLon + (region.span.longitudeDelta/50.0f)*(arc4random()%100);

        // add custom place mark
        CustomPlaceMark *placemark=[[CustomPlaceMark alloc] initWithCoordinate:location];
        placemark.title = @"Title Here";
        placemark.subtitle = @"Subtitle Here";
        [mMapView addAnnotation:placemark];
        [placemark release];

 }

    -(CLLocationCoordinate2D) getLocationFromAddress:(NSString*) address {
        // in case of error use api key like
        // http://maps.google.com/maps/geo?q=%@&output=csv&key=YourGoogleMapsAPIKey
        NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv",[address stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
        NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString]];
        NSArray *listItems = [locationString componentsSeparatedByString:@","];
        double latitude = 0.0;
        double longitude = 0.0;

        if([listItems count] >= 4 && [[listItems objectAtIndex:0] isEqualToString:@"200"]) {
            latitude = [[listItems objectAtIndex:2] doubleValue];
            longitude = [[listItems objectAtIndex:3] doubleValue];
        }
        else {
            //Show error
            NSLog(@"error:address not found");
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"ERROR" message:@"Address not found"
                                                           delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alert show];
            [alert release];
        }

        CLLocationCoordinate2D location;
        location.latitude = latitude;
        location.longitude = longitude;

        return location;
    }

    #pragma mark search delegate
    - (IBAction)buttonclick:(id)sender
    {

        CLLocationCoordinate2D location2d = [self getLocationFromAddress:textfield.text];
        [self addPins:location2d.latitude lon:location2d.longitude];
        NSLog(@"location latitude  = %f",location2d.latitude);
        NSLog(@"location latitude  = %f",location2d.longitude);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:40:12.640

在 CLLocationManager 委托中

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation{
NSLog(@"location found... updating region");
//[self addPins:newLocation.coordinate.latitude lon:newLocation.coordinate.longitude];
} 
```

注释行**[self addPins:newLocation.coordinate.latitude lon:newLocation.coordinate.longitude];** 因为它正在缩放到您当前的位置。

或在您的**-(void)addPins:(float)lat lon:(float)lon**函数中，在 Bool 的帮助下仅执行一次以下行

```
if(!executeOnce) // executeOnce is a BOOL
{

MKCoordinateRegion region;
region.center=location;
MKCoordinateSpan span;
span.latitudeDelta=0.5f;
span.longitudeDelta=0.5f;
region.span=span;
[mMapView setRegion:region animated:TRUE];

executeOnce = YES;
} 
```

# r - drop = TRUE 不会在 data.frame 中删除因子级别，而在 vector 中会删除

> ID：14123792
> 
> 赞同：8
> 
> 时间：2013-01-02T14:28:28.053
> 
> 标签：r, dataframe, r-factor

data.frame 过滤中有一个有趣的选项`drop = TRUE`，请参见以下内容的摘录`help('[.data.frame')`：

> ### 用法
> 
> 类“data.frame”的 S3 方法
> 
> ```
> x[i, j, drop = ] 
> ```

但是当我在data.frame上尝试它时，它不起作用！

```
> df = data.frame(a = c("europe", "asia", "oceania"), b = c(1, 2, 3))
>
> df[1:2,, drop = TRUE]$a
[1] europe asia  
Levels: asia europe oceania     <--- oceania shouldn't be here!!
> 
```

我知道还有其他方法，例如

```
df2 <- droplevels(df[1:2,]) 
```

**但是文档承诺以更优雅的方式来做到这一点，那么为什么它不起作用呢？**它是一个错误吗？因为我不明白这怎么可能是一个功能......

**编辑**`drop = TRUE`：我对降低向量的因子水平感到困惑，正如[您在此处看到的](http://quantitative-ecology.blogspot.cz/2008/02/drop-unused-factor-levels.html)那样。`[i, drop = TRUE]`降低因子水平并`[i, j, drop = TRUE]`没有，这不是很直观！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T14:35:16.783

该文件明确指出：

> 下降：合乎逻辑。如果为 TRUE，则结果被强制转换为可能的最低维度。如果只剩下一列，默认是删除，但如果只剩下一行，则不删除。

这意味着如果`drop = TRUE`过滤`data.frame`后的结果在单个列或行中，则结果将被强制转换为向量/列表，而不是返回单列/单行`data.frame`。

因此，这个论点与水平下降无关，因此消除超水平的正确方法是您提到的方法（即使用`droplevels`函数）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T14:34:08.257

这对许多人来说是一个绊脚石，因为正如 Peter Dalgaard 在[http://www.mail-archive.com/r-help@stat.math.ethz.ch/msg22459.html](http://www.mail-archive.com/r-help@stat.math.ethz.ch/msg22459.html) 和digEmAll 下面。

如果你想要你想要使用的东西：

```
d2[] <- lapply(d2, function(x) if (is.factor(x)) factor(x) else x) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-02T14:39:16.787

文件说的是

> 如果为 TRUE，则结果被强制转换为可能的最低**维度**。

所以它与维度有关，而不是与因子水平有关：

```
df[, 1]
# [1] europe  asia    oceania
# Levels: asia europe oceania
df[, 1, drop = FALSE]
#         a
# 1  europe
# 2    asia
# 3 oceania 
```

降低因子水平是一个不同的问题。这是一个案例 ( `?'[.factor'`)，其中`drop`为此目的出现了参数：

```
ff <- factor(c('AA', 'BA', 'CA'))
ff[1:2, drop = TRUE]
# [1] AA BA
# Levels: AA BA 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-02T20:22:43.220

> df[1:2,]$a[,drop=TRUE]

[1] 欧洲亚洲
等级：亚洲欧洲

哟人，所以当你尝试用你的方法时会发生什么，它会在原始数据帧上应用丢弃，所以你想要的结果不会好

所以你需要做的是在返回的子集上应用 drop .....

如果有任何疑问，请随时 ping 我....

# java - 如何在 JLabels 中应用换行符？

> ID：14123799
> 
> 赞同：2
> 
> 时间：2013-01-02T14:28:47.087
> 
> 标签：java, swing, user-interface, jlabel

请看下面的代码

```
 JLabel menuItemTitle =  new JLabel("How to Find Waist");
     JLabel  menuItemDescription = new JLabel("Take the Neck measurement with your shoulders down and relaxed.\n Looking straight ahead rap the tape around the smallest point, below the Larynx, and sloping down slightly toward the front.\nTry a few spots to get the lowest number, and where it feels the most natural.");

        JPanel northPanel = new JPanel();
        northPanel.setLayout(new FlowLayout(FlowLayout.CENTER));
        northPanel.add(menuItemTitle);

        JPanel centerPanel = new JPanel();
        centerPanel.setLayout(new FlowLayout());
        centerPanel.add(menuItemDescription);

        JDialog dialog = new JDialog();
        dialog.setLayout(new BorderLayout());
        dialog.add(northPanel,"North");
        dialog.add(centerPanel,"Center");

                dialog.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                dialog.setLocationRelativeTo(null);
                dialog.pack();
                dialog.setVisible(true); 
```

我已经添加了所需的转义字符，但它并没有打破界限。如何在 JLabels 中添加 LineBreaks？我也尝试过使用 HTML 进行上述操作。但这也失败了。请帮忙。

**更新**

html版本

```
menuItemDescription = new JLabel("<html>Take the Neck measurement with your shoulders down and relaxed.</br> Looking straight ahead rap the tape around the smallest point, below the Larynx, and sloping down slightly toward the front.</br>Try a few spots to get the lowest number, and where it feels the most natural.</html>"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:36:20.307

您可以通过这种方式在 JLabel 中使用 HTML 代码

```
JLabel label = new JLabel("<html>Welcome to<br>Stackoverflow</html>"); 
```

# mongodb - 如何创建 mongo 索引以确保字段永远不会为空/不存在/为空？

> ID：14123804
> 
> 赞同：10
> 
> 时间：2013-01-02T14:29:02.980
> 
> 标签：mongodb

我在实体中有一个字段，它必须存在，但不一定是唯一的。有没有办法在 Mongo 中强制执行这个约束？

我知道 mongo 集合是无模式的，集合可以拥有的唯一模式是索引模式。但我没有看到是否有一个索引选项来确保字段值不为空，其中一个空字段值满足以下 javascript 表达式：

```
!value && value !== 0 && value !== false 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T14:52:52.203

只有在 UNIQUE 索引上，您才能模拟它。您可以创建一个包含缺少字段/值的条目的文档，它将在索引中创建具有 NULL 值的文档，并且不会允许进一步的缺失值。

由于您的要求是 NON UNIQUE 键，因此我认为您此时在 MONGODB (v2.2) 中没有选项来确保值必须出现在索引列上。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T17:56:23.027

在 mongodb 中，只有`_id`字段才能满足您的要求。对于这个问题，索引似乎不是一个好主意（既不可行）。

我认为您必须在应用程序的插入和更新操作中强制执行此规则，而不是要求 mongodb 为您监视它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-10T15:45:42.880

这可能是您想要的答案（在 Java/Kotlin 中）：

```
 col.createIndex(Document("note", 2), IndexOptions()
            .partialFilterExpression(Filters.and(
                    Filters.gt("note", ""),
                    Filters.exists("note"))) 
```

# excel - 提取 PDF 文档的特定部分

> ID：14123805
> 
> 赞同：3
> 
> 时间：2013-01-02T14:29:05.453
> 
> 标签：excel, pdf, converter

我有多个 (30) 个 PDF 文件，每个包含 48-96 页。所有页面的布局都是相同的，只有其他内容（数字、图表）。

背景：这些页面是光纤电缆测量的 PDF 报告，我必须按照电缆的衰减对它们进行分类。由于机密问题，我很遗憾无法提供示例文件。

为了验证这些报告，我们正在做一些控制样本，这就是为什么我需要对报告进行排序。现在的问题是：如何仅将所有 pdf 文件中所有页面的特定部分导出为我可以排序的某种格式？

如前所述，值在页面上的位置非常具体。它也已经是“解析”的内容，因此可以在 PDF 文件中“作为文本”使用，因此不会被扫描，也不需要 OCR。

任何帮助表示赞赏。我目前不知道如何解决这个问题，它可能是一些做类似事情的工具，或者是解决这个问题的编程方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:47:11.687

正如您在对原始问题的评论中指出的那样，您已准备好编写解决方案。我建议使用 Java 和[iText](http://itextpdf.com/) PDF 库。只要文本实际上是可提取的，它就可以让您从文档中提取文本（您实际上可以将字形放入 PDF 中，但删除从字形到字符的映射）。

您可以在[iText in Action — 第 2 版](http://itextpdf.com/book/)[的第 15 章的 ExtractPageContent* 示例](http://itextpdf.com/book/chapter.php?id=15)中找到使用 iText 提取 PDF 文本的示例代码。特别是[ExtractPageContentArea](http://itextpdf.com/examples/iia.php?id=279)对您的情况感兴趣。

本质上，您只需要获取该样本并对其进行概括，也可以从页面上的多个区域提取文本。

# windows-phone-7 - 如何从绝对 url 为 ApplicationBarIconButton 设置图标 uri？

> ID：14123807
> 
> 赞同：0
> 
> 时间：2013-01-02T14:29:22.943
> 
> 标签：windows-phone-7, windows-phone-8

我对 .NET 非常熟悉，并且已经开始为 wp 8 进行开发。我应该在运行应用程序时动态创建应用程序栏，但我不知道应该如何从绝对 url 为 ApplicationBarIconButton 设置图标？我尝试了下面的代码，但在添加函数中出现异常。它完美地适用于相对路径，但不是动态的。

ApplicationBarIconButton btnCar = new ApplicationBarIconButton(new Uri("http://www.test.com/files/test.png", UriKind.Absolute));

btnCar.Text = "汽车"; ApplicationBar.Buttons.Add(btnCar);

谁能帮我。提前 Tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:36:06.063

阅读[http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.applicationbariconbutton.iconuri(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.shell.applicationbariconbutton.iconuri(v=vs.105).aspx)了解更多信息

图标必须是本地的。“URI 必须指向应用程序目录中的文件。使用 Windows Phone SDK 将图像文件添加到项目时，必须将 Build Action 属性设置为“Content”。使用默认值“Resource”将不允许图像被访问或显示。”

看看[http://coding4fun.codeplex.com/](http://coding4fun.codeplex.com/)工具包中的圆形按钮。它看起来像 appbar 按钮，但它是一个普通按钮。所以你应该能够使用基于绝对uri的图像。

# android - 旋转相机意图捕获的图像的代码在Android中不起作用

> ID：14123809
> 
> 赞同：2
> 
> 时间：2013-01-02T14:29:35.283
> 
> 标签：android, image, rotation, image-rotation, android-camera-intent

我有一个问题，我使用相机意图捕获的图像被旋转，我在[为什么使用相机意图捕获的图像在 Android 上的某些设备上被旋转？](https://stackoverflow.com/questions/14066038/why-image-captured-using-camera-intent-gets-rotated-on-some-devices-in-android)

因此，根据那里的建议答案，我现在正在尝试旋转使用相机获得的图像（我使用了相机意图）。我的代码是，

```
public class SimpleCameraActivity extends Activity {
private static final int TAKE_PICTURE = 1888;
private Uri imageUri;
ImageView imageView;
Bitmap bitmap;
Button btnOK, btnDiscard;
RelativeLayout rLButtons;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_camera);
    imageView = (ImageView) findViewById(R.id.image_view_sc);
    captureImage();
}

public void captureImage() {
    Intent intentCamera = new Intent("android.media.action.IMAGE_CAPTURE");
    File filePhoto = new File(Environment.getExternalStorageDirectory(), "Pic.jpg");
    imageUri = Uri.fromFile(filePhoto);
    MyApplicationGlobal.imageUri = imageUri.getPath();
    intentCamera.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
    startActivityForResult(intentCamera, TAKE_PICTURE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent intentFromCamera) {
    super.onActivityResult(requestCode, resultCode, intentFromCamera);
    if (resultCode == RESULT_OK && requestCode == TAKE_PICTURE) {
        if (intentFromCamera != null) {
            Bundle extras = intentFromCamera.getExtras();
            if (extras.containsKey("data")) {
                bitmap = (Bitmap) extras.get("data");
            } else {
                bitmap = getBitmapFromUri();
            }
        } else {
            bitmap = getBitmapFromUri();
        }
        checkForRotation();
        //rotateImage();
        //rotateImage1();
        rotateImage3();
        //imageView.setImageBitmap(bitmap);
        // imageView.setImageURI(imageUri);
    } else {
        finish();
    }
}

public void rotateImage() {
    Bitmap targetBitmap = Bitmap.createBitmap(100, 80, bitmap.getConfig());
    Canvas canvas = new Canvas(targetBitmap);
    Matrix matrix = new Matrix();
    matrix.setRotate(180, bitmap.getWidth() / 2, bitmap.getHeight() / 2);
    matrix.setRotate(90);
    canvas.drawBitmap(bitmap, matrix, new Paint());
    imageView.setImageBitmap(bitmap);
}

public void rotateImage1() {
    Matrix matrix = new Matrix();
    matrix.setRotate(90, bitmap.getWidth() / 2, bitmap.getHeight() / 2);
    RectF rectF = new RectF(0, 0, bitmap.getWidth(), bitmap.getHeight());
    matrix.mapRect(rectF);
    Bitmap targetBitmap = Bitmap.createBitmap((int) rectF.width(), (int) rectF.height(), bitmap.getConfig());
    Canvas canvas = new Canvas(targetBitmap);
    canvas.drawBitmap(bitmap, matrix, new Paint());
    imageView.setImageBitmap(bitmap);
}

public void rotateImage2() {
    Matrix mtx = new Matrix();
    mtx.reset();
    mtx.preTranslate(20, 30);
    mtx.setRotate((float) 90, 25, 35);
    mtx.postTranslate(30, 40);
    Bitmap rotatedBMP = Bitmap.createBitmap(bitmap, 0, 0, 100, 100, mtx, true);
    this.bitmap = rotatedBMP;
    imageView.setImageBitmap(bitmap);
}

public void rotateImage3() {
    Bitmap bmpOriginal = bitmap;
    Bitmap targetBitmap = Bitmap.createBitmap((bmpOriginal.getWidth()), (bmpOriginal.getHeight()), Bitmap.Config.ARGB_8888);
    Paint p = new Paint();
    p.setAntiAlias(true);

    Matrix matrix = new Matrix();
    matrix.setRotate((float) 90, (float) (bmpOriginal.getWidth() / 2), (float) (bmpOriginal.getHeight() / 2));

    RectF rectF = new RectF(0, 0, bmpOriginal.getWidth(), bmpOriginal.getHeight());
    matrix.mapRect(rectF);

    targetBitmap = Bitmap.createBitmap((int) rectF.width(), (int) rectF.height(), Bitmap.Config.ALPHA_8);

    Canvas tempCanvas = new Canvas(targetBitmap);
    tempCanvas.drawBitmap(bmpOriginal, matrix, p);
    imageView.setImageBitmap(bmpOriginal);
}

public Bitmap getBitmapFromUri() {
    getContentResolver().notifyChange(imageUri, null);
    ContentResolver cr = getContentResolver();
    Bitmap bitmap;
    try {
        bitmap = android.provider.MediaStore.Images.Media.getBitmap(cr, imageUri);
        return bitmap;
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
}
} 
```

我尝试了不同的代码 rotateImage、1、2、3 等。但没有代码有效。rotateImage2() 正在工作，但它严重影响质量，所以不能使用它。

我从[Android 获得了这些代码：How to rotate a bitmap on a center point](https://stackoverflow.com/questions/4166917/android-how-to-rotate-a-bitmap-on-a-center-point)并且用户说它可以工作，但不适用于我。所以我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T15:57:46.440

坚持使用*rotateImage2()*并使用较少的转换。这段代码对我有用：

```
private Bitmap rotateImage(String pathToImage) {

    // 1\. figure out the amount of degrees
    int rotation = getImageRotation();

    // 2\. rotate matrix by postconcatination
    Matrix matrix = new Matrix();
    matrix.postRotate(rotation);

    // 3\. create Bitmap from rotated matrix
    Bitmap sourceBitmap = BitmapFactory.decodeFile(pathToImage);
    return Bitmap.createBitmap(sourceBitmap, 0, 0, sourceBitmap.getWidth(), sourceBitmap.getHeight(), matrix, true);        
} 
```

要获得图像旋转[，请查看您的其他帖子](https://stackoverflow.com/questions/14066038/why-image-captured-using-camera-intent-gets-rotated-on-some-devices-in-android)。有关矩阵运算及其差异的更多信息，例如 setRotate 和 postRotate，[请查看这篇文章](https://stackoverflow.com/questions/3855578/android-matrix-what-is-the-different-between-preconcat-and-postconcat)。

# html - 带有表格的边框颜色在电子邮件中是否跨客户端友好？

> ID：14123812
> 
> 赞同：6
> 
> 时间：2013-01-02T14:29:46.743
> 
> 标签：html, html-table, border, html-email

我想将我的 HTML 电子邮件中表格的边框颜色更改为另一种颜色，但是当我通过 HTML 验证运行我的代码时，它似乎不喜欢 (bordercolor="#9cbdcc")

我在下面添加了一张图片，这样你就可以看到我得到的错误。

我问这个的主要原因是我现在正在向很多人发送大量 HTML 电子邮件，并且通常会进行 100% 验证，以确保所有电子邮件客户端的问题都很少，因此很容易知道这是一个否否或是否可以。

提前感谢您的任何回复。

![在此处输入图像描述](../Images/8276f10a849ab0ef2ee40b9a1b02a26d.png)

决定给我们下面的方法，勾选的答案也可以：

HTML

```
 <table cellspacing="2" cellpadding="0" border="0" bgcolor="#000000">
 <tr>
 <td width="200" height="30" bgcolor="#FF0000">
     TEST
     </td>
     <td width="200" height="30" bgcolor="#FF0000">
     TEST
     </td>
 </tr>
 </table> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T14:33:43.450

使用内联样式或样式表怎么样？

```
<table style="border-color:#9cbdcc;"> 
```

或者

```
<table style="border: 1px solid #9cbdcc;"> 
```

他们在所有客户的电子邮件中都能完美地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-18T17:11:37.687

@hudds 接受的答案是要走的路，如果您希望为所有单元格均匀地添加边框，那么您可以像这样向表格添加边框属性`<table border="10" bordercolor="black">`这应该为表格单元格添加边框

# android - 是否可以在 Phonegap 中实现 Tesseract？

> ID：14123820
> 
> 赞同：2
> 
> 时间：2013-01-02T14:30:14.427
> 
> 标签：android, cordova, ocr, tesseract

我开发了一个使用免费 OCR Tesseract 和 Android NDK 的 Android 应用程序。

现在我想在 Phonegap 应用程序中使用 Tesseract。

我已经搜索并找到了 OCRApiService 但不是免费的。我想使用像 Tesseract 这样免费的东西。

是否可以在 Phonegap 中实现 Tesseract？我怎样才能做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:55:51.060

好吧，如果您已经让 Tesseract 在一个 Android 项目中工作，那么您就已经成功了。您只需要编写一个插件来包装 Tesseract 功能，以便可以从 JavaScript 调用它。

[http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T20:09:30.553

[在这里](https://github.com/rmtheis/tess-two/)，您有适用于 android 的 tesseract，我认为从该代码创建插件应该不难

# java - JUnit 基础测试自动设置

> ID：14123831
> 
> 赞同：6
> 
> 时间：2013-01-02T14:31:35.503
> 
> 标签：java, unit-testing, junit

我想编写一个`BaseTest`简单地为所有扩展子类提供“通用`setUp()`方法”的类：

```
public class BaseTest {
    @Before
    public void setUp() {
        System.out.println("setUp() was called!");

        // Doesn't really matter what this is doing...
        EnvironmentConfigurator.configureEnvForTesting();
    }
} 
```

然后：

```
public class WidgetTest extends BaseTest {
    @Test
    public void test1() {
        fail();
    }

    @Test
    public void test2() {
        fail();
    }
} 
```

所以理想情况下，每次`@Test`执行注解的子类方法时，JUnit 都会首先调用该`BaseTest#setUp()`方法，该方法执行任何操作（并不重要）。也许它将一些模拟状态重置为初始值，以便每个测试都可以从“干净的石板”开始，等等。同样，这并不重要。

不幸的是，当我运行这段代码时，我只看到`setUp() was called!`打印到屏幕**一次**，所以显然`BaseTest`没有按照我想要的方式“包装”我`@Test`的方法。有什么办法可以做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-02T14:38:28.637

我刚刚运行了这个，两个测试方法都被调用了，两次 setUp 都被调用了。

如果您`@Before`在派生类中也有带注释的方法，那么您需要将基类设置方法命名为不同的名称，例如 setUpBase() 因为如果方法名称相同，则只`@Before`调用派生类中的带注释的方法将覆盖基类中的方法。

# eclipse - 自动制作项目使 IntelliJ IDEA 非常慢。任何解决方法？

> ID：14123832
> 
> 赞同：1
> 
> 时间：2013-01-02T14:31:35.243
> 
> 标签：eclipse, performance, ide, intellij-idea, usability

我尝试使用“Eclipse 模式”*在后台进行构建*，以便在重构时识别编译错误：

![在此处输入图像描述](../Images/c52a554aa108cbab54d2ee5285435056.png)

但是IDEA变得如此缓慢！

任何解决方法？

我已经尝试过 IDEA 的编译方式，但它不适合我：多年来我第一次打破了构建......（我需要在命令行使用 mvn-compile 仔细检查到 git-push）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:00:03.813

已知 Eclipse Mode 插件会导致性能问题，请将其卸载。`Make project automatically`不应影响 IDE 性能。如果速度很慢，[请提供 CPU 快照](http://devnet.jetbrains.net/docs/DOC-192)。

# c# - 如何加入字典 并删除重复记录

> ID：14123833
> 
> 赞同：3
> 
> 时间：2013-01-02T14:31:44.253
> 
> 标签：c#

我有一个`Dictionary<int, List<someclass>> = new Dictionary<int, List<someClass>>();`

类可以是这样的

```
public class someclass
{ 
    public string CompanyName { get; set; }
    public string address { get; set; }
    public string Alternativeaddress { get; set; }
    public string CompanyNumber { get; set; }
} 
```

例如

字典中的列表包含 2 行，如下所示：

```
Output
CompanyName           address            Alternativeaddress      CompanyNumber
AAAA                  11 Mainden Street  NULL                    3243-A
AAAA                  NULL               12 Maiden Street        3243-A 
```

无论如何，通过使用 LINQ 或任何方法将连接记录 1 和 2 作为字典中的 1 记录？它将删除重复或加入的记录

```
Output
CompanyName           address            Alternativeaddress      CompanyNumber
AAAA                  11 Mainden Street  12 Maiden Street        3243-A 
```

具有这两个地址的公司将保留，关键是自动递增编号，这使得每一行都是唯一的。

我想使用的比较器是 CompanyNumber 和 CompanyName，因为我发现这 2 值不会为空。这也是识别它们相同的唯一方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:53:07.670

这应该可以使用[`GroupBy`](http://msdn.microsoft.com/en-us/library/bb534501.aspx),[`Aggregate`](http://msdn.microsoft.com/en-us/library/bb548651.aspx?cs-save-lang=1&cs-lang=csharp)和[`null coalesce operator`](http://msdn.microsoft.com/en-us/library/ms173224.aspx).

* * *

`someclass`为了方便起见，我为您添加了一个演员：

```
public class someclass
{ 
    public string CompanyName { get; set; }
    public string address { get; set; }
    public string Alternativeaddress { get; set; }
    public string CompanyNumber { get; set; }
    public someclass(string name, string address, string address2, string number)
    {
        this.CompanyName=name;
        this.address=address;
        this.Alternativeaddress=address2;
        this.CompanyNumber=number;
    }
} 
```

* * *

因此，给定一个列表`someclass`，如下所示：

```
var a = new someclass("AAAA", "11 Mainden Street", null, "3243-A");
var b = new someclass("AAAA", null, "11 Mainden Street", "3243-A");

var c = new someclass("BBBB", null, null, "hooray");
var d = new someclass("BBBB", "something", null, "hooray");
var e = new someclass("BBBB", null, "foobar", "hooray");

var list = new List<someclass>() {a, b, c, d, e}; 
```

你可以使用这样的方法：

```
public IEnumerable<someclass> MergeList(IEnumerable<someclass> list)
{
    // use 'GroupBy' for grouping, obv.
    foreach(var g in list.GroupBy(l => Tuple.Create(l.CompanyName, l.CompanyNumber)))
    {
        // use 'Select', 'Aggregate' and '??' to find the first non-empty string for each property
        var adress = g.Select(x => x.address).Aggregate((x, y) => x ?? y);
        var alternative = g.Select(x => x.Alternativeaddress).Aggregate((x, y) => x ?? y);
        // return a new 'someclass'
        yield return new someclass(g.Key.Item1, adress, alternative, g.Key.Item2);  
    }
} 
```

`someclass`为每组`CompanyName`/构造一个新的`CompanyNumber`：

```
var merged = MergeList(list); 
```

* * *

结果：

```
 CompanyName | address            | Alternativeaddress | CompanyNumber   
-------------+--------------------+--------------------|----------------  
 AAAA        | 11 Mainden Street  | 11 Mainden Street  | 3243-A   
 BBBB        | something          | foobar             | hooray 
```

* * *

请注意，这会创建一个新集合，而不是`List`就地更改原始集合，但您会明白的。

# c# - 如何使用 webdriver 读取 html 表的记录/行/单元格

> ID：14123835
> 
> 赞同：0
> 
> 时间：2013-01-02T14:31:46.720
> 
> 标签：c#, selenium, webdriver

我在网页上显示了一个搜索结果，由表格格式的一条记录表示。它背后的代码：

```
</table>
<table id="highVolumeSearchResults_group" class="highVolumeSearchResults">
  <thead>
  <tbody>
     <tr>
       <td class="title letter" rowspan="1">W</td>
       <td>
          <a id="group-name-244" href="/Portal/Workgroup/Details?id=244">WorkGroup_Cats</a>
       </td>
       <td>0</td>
       <td>12/28/2012 4:14:01 PM</td>
       <td>
          <select id="244" onchange="CommitAction(244, this.options[this.selectedIndex].value, this)">
             <option value="">------</option>
             <option value="edit">Edit Users</option>
             <option value="rename">Rename</option>
             <option value="delete">Delete</option>
          </select>
       </td>
    </tr>
</tbody>
</table> 
```

我正在尝试自动化（在 C# 中）“重命名”和/或“删除”选项，因此基本上是在寻找一种方法来选择/单击“244”单元格下拉列表中的“重命名”或“删除”选项。该 id 的问题在于它是动态生成的，一旦我删除该行并创建一个新行 - 一个新的 id 被分配给新创建的记录。我的下拉列表位于已识别记录（行）的第 5 列。

这就是我开始实施的方式：

```
ICollection<IWebElement> table = driver.FindElements(By.Id("highVolumeSearchResults_group")); 
List<IWebElement> elements = table.ToList();

string test = elements[1].FindElement(By.XPath("//tbody/tr/td[4]")).Text; 
test.FindElement(By. 
```

它似乎对我不起作用（此时 Selenium IDE 仅使用 Id 标识元素）。有人可以帮忙吗，我迷路了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T08:01:52.517

尝试这个

```
ICollection<IWebElement> table = driver.FindElements(By.XPath("//table[@id='highVolumeSearchResults_group']//tr/td")); 
List<IWebElement> elements = table.ToList(); 
```

现在迭代该列表以获取每个 td 内容。（td内的文字）

要从该下拉列表中获取所有选项，请使用此（它是 java selenium 绑定中的实现）

```
new Select(driver.findElement(By.xpath("//table[@id='highVolumeSearchResults_group']//tr/td/select")).getOptions(); 
```

在 C# 中可能是这样的

```
new SelectElement(driver.FindElement(By.XPath("//table[@id='highVolumeSearchResults_group']//tr/td/select")).Options; 
```

PS：我不太了解硒的 C# 实现。

# java - Eclipse WindowBuilder 错误

> ID：14123838
> 
> 赞同：2
> 
> 时间：2013-01-02T14:31:57.707
> 
> 标签：java, eclipse, swing, windowbuilder

当我尝试在 Eclipse 中使用 WindowBuilder 创建 Swing 应用程序窗口时，出现以下错误：

> 这不是 GUI 类，不能以图形方式编辑
> 
> 解析器解析了编译单元，但无法识别任何 GUI 工具包。
> 
> 可能的原因：
> 
> 您打开一个没有任何 GUI 的编译单元，例如一个空类、数据 bean 等。项目的类路径无效，不包括所有必需的工具包库。您尝试打开工具包的 UI，WindowBuilder 中未安装对工具包的支持。使用按钮 Show UI Toolkits 安装新的工具包。

我使用了 New>Other>WindowBuilder>Swing Designer>Application Window

这是它生成的代码，不是很多：

```
package com.sydcul.malucraft;

public class LoginForm {

} 
```

提前致谢。

# symfony - 实体有“公共”变量

> ID：14123845
> 
> 赞同：2
> 
> 时间：2013-01-02T14:32:30.697
> 
> 标签：symfony, doctrine

我现在正在学习 Symfony2，在我阅读的每个教程中，都有一些`protected`变量，比如：

```
/**
 * @ORM\Column(type="decimal", scale=2)
 */
protected $price;

/**
  * @ORM\Column(type="text")
  */
protected $description; 
```

我从命令行生成器得到的是：

```
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id;

/**
 * @var integer
 *
 * @ORM\Column(name="game", type="integer")
 */
private $game; 
```

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T15:00:08.593

保护不公开！

`private scope`当您希望您的变量仅在其自己的类中可见时。

`protected scope`当您想让您的变量在所有**扩展**当前类（包括父类）的类中可见时。

这个例子没有太大的区别。SF 文档中的代码对继承更开放，仅此而已。两者都在工作。

（来源：[public、private 和 protected 有什么区别？](https://stackoverflow.com/questions/4361553/php-public-private-protected)）

# python - 在 Python 中内联输出制表符

> ID：14123847
> 
> 赞同：2
> 
> 时间：2013-01-02T14:32:34.070
> 
> 标签：python, tabs, ubuntu-12.04

我有一个 Python 程序，可以在 Ubuntu 中创建指标通知。如何确定需要添加多少标签才能确保输出始终垂直内联？

我尝试计算使用的字符并插入空格而不是制表符，但这不起作用，因为使用了非单色字体。

输出如图所示：

![在此处输入图像描述](../Images/77bfd01dd3e5d4ea9c84c9427dae7d3c.png)

输出行的代码：

```
for processName in processStatuses:
    if processName in cachedProcessStatuses:
        if processStatuses[processName] != cachedProcessStatuses[processName]:
            output += processName
            output += " : \t"
            output += processStatuses[processName]
            output += "\n"
    else:
        output += processName
        output += " : \t"
        output += processStatuses[processName]
        output += "\n" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:34:07.230

*…因为使用了非单色字体。*

在这种情况下，您需要知道字体几何形状（这不是一项简单的任务）。

字符串“ **iiii** ”比“ **MMMM** ”占用更少的空间，但是在不知道字体几何形状（单个字符的确切宽度以及它们的相对水平位置）的情况下，您无法知道特定字符串是否比制表符宽。

# facebook - Graph api - 来自非朋友的公开状态

> ID：14123850
> 
> 赞同：0
> 
> 时间：2013-01-02T14:32:45.860
> 
> 标签：facebook, facebook-graph-api

使用 Graph API，是否可以从非朋友那里检索状态，假设他们是公开的？

我曾尝试使用 Facebook C# SDK 通过发出带有参数“/user id/statuses”的 GET 请求来检索公共状态，但即使我知道某些状态是公开可用的，但我得到的结果为空。

**更新：**今天看来，我可以通过阅读`/posts`（有时甚至是`/statuses`）用户来查看非朋友的公开状态。有人知道 Facebook 已解决的错误吗？

**更新：**今天不再工作了。它适用于 Graph API Explorer，但不适用于从我的测试应用程序请求的令牌

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:39:55.550

**您可以像这样通过Feed**获取帖子：

```
$facebook->api("/USER_ID/feed"); 
```

如果他不是您的朋友，这将获取用户的所有公开帖子。

# components - 使用 Tridion ID 发布 Tridion 多媒体组件

> ID：14123854
> 
> 赞同：5
> 
> 时间：2013-01-02T14:33:08.060
> 
> 标签：components, tridion, publishing

有没有一种方法可以在 Tridion 中定义以使用其自己的 TCM ID 作为文件名发布二进制文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T14:48:46.183

从 Tridion 5.3 中引入模块化模板开始，默认是发布*没有*唯一标识符的二进制文件（这在当时解决了一大堆其他问题，比如在发布之前知道文件名，当你的 CSS 在外部生成时非常有用例如房子）。

我很确定仍然有一个 AddBinary 重载（请参见[此处](http://yatb.mitza.net/2012/03/which-addbinary-not-to-use.html)）将发布一个文件名，将 _tcm-12-35 附加到文件名，就像在 PublishBinary 时代一样，但遗憾的是现在无法对其进行测试。

如果您的二进制发布由默认完成操作处理，则必须在此 TBB 执行*后*修改文件名，如 Chris[在此处](http://www.urbancherry.net/blogengine/post/2010/02/09/Unique-binary-filenames-for-SDL-Tridion-Multimedia-Components.aspx)记录的那样。

# private-messaging - 使用 Yammer Rest API 向多个用户发布私人消息

> ID：14123862
> 
> 赞同：0
> 
> 时间：2013-01-02T14:33:40.747
> 
> 标签：private-messaging, yammer

我可以一次发布一条私人消息。因此 yammer 仅显示该对话的两个参与者。如何在发布消息时添加多个用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T20:17:30.777

必须一次发布一条私人消息，因为这就是 PM 的用途。您可能会更好地查看[活动故事](https://developer.yammer.com/opengraph/)而不是 PM。您可以一次性将这些内容发送给多个用户，并且用户收到这些自动发布的帖子也不会那么烦人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-03T12:42:35.607

这是您要查找的内容 [https://developer.yammer.com/docs/messages-json-post](https://developer.yammer.com/docs/messages-json-post)

> direct_to_user_ids：整数数组
> 
> 向 ID 指定的一个或多个用户发送私人消息。

# c# - 循环遍历特定的项目集

> ID：14123864
> 
> 赞同：-1
> 
> 时间：2013-01-02T14:33:45.993
> 
> 标签：c#, c#-4.0

我必须根据这个条件动态创建一个 HTML 表。列数应该是动态生成的，在我们的例子中我们假设为 2。所以我有一个项目列表，我必须用填写的项目填写这个表列生成时。代码行为不正确，也不包括最后一项。有人可以指导我一个简单的方法。

```
List<NItem> item = new List<NItem>();   

StringBuilder build = new StringBuilder();
    build.Append("<table>");

    for (int q = 0; q < item.Count; q++)
    {
        build.Append("<tr>");
        for (int i = 0; i < columns; i++)
        {               

            build.Append("<td>");
            build.Append(string.Format("<a title= \"{0}\" href=\"{1}\" target=\"_blank\">{2}</a> ", item[i].ToolTip, item[i].Link, item[i].LinkDescription));
            build.Append("</td>");

        }
        build.Append("</tr>");
    }
    build.Append("</table>"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:30:41.783

这可能不是实现目标的理想方式，但我相信这会修复您的代码。第二个循环只是一遍又一遍地添加第一个和第二个项目。

```
List<NItem> item = new List<NItem>();   

StringBuilder build = new StringBuilder();
build.Append("<table>");

// Increment the counter by the number of columns
for (int q = 0; q < item.Count; q += columns)
{
    build.Append("<tr>");

    for (int i = 0; i < columns; i++)
    {               
        build.Append("<td>");

        if (q + i < item.Count)
        {
            // Grab the item for this column by adding the column index to the item index that we started with
            var currentItem = item[q + i];
            build.Append(string.Format("<a title= \"{0}\" href=\"{1}\" target=\"_blank\">{2}</a> ", currentItem.ToolTip, currentItem.Link, currentItem.LinkDescription));
        }

        build.Append("</td>");
    }
    build.Append("</tr>");
}

build.Append("</table>"); 
```

# android - 如何配置我的 proguard-project.txt 文件以仅删除日志

> ID：14123866
> 
> 赞同：12
> 
> 时间：2013-01-02T14:33:48.587
> 
> 标签：android, proguard

这是我现在在 proguard-project.txt 中使用的代码

```
# This is a configuration file for ProGuard.
# http://proguard.sourceforge.net/index.html#manual/usage.html

-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-verbose

# Optimization is turned off by default. Dex does not like code run
# through the ProGuard optimize and preverify steps (and performs some
# of these optimizations on its own).
-dontoptimize
-dontpreverify
# Note that if you want to enable optimization, you cannot just
# include optimization flags in your own project configuration file;
# instead you will need to point to the
# "proguard-android-optimize.txt" file instead of this one from your
# project.properties file.

-keepattributes *Annotation*

-keep public class com.google.vending.licensing.ILicensingService{*;}
-keep public class com.android.vending.licensing.ILicensingService{*;}
-keep public class * extends android.app.Application{*;}
-keep public class * extends android.app.Activity{*;}
-keep public class * extends android.app.MapActivity{*;}
-keep public class * extends android.app.PreferenceActivity{*;}
-keep public class * extends android.view.View{*;}
-keep public class * extends android.widget.BaseAdapter{*;}
-keep public class * extends android.app.Service{*;}
-keep public class * extends android.content.BroadcastReceiver{*;}
-keep public class * implements android.view.View.OnTouchListener{*;}
-keep public class * implements android.view.View.OnClickListener{*;}
-keep public class * extends com.readystatesoftware.mapviewballoons.BalloonItemizedOverlay<OverlayItem>{*;}

-keep class android.support.v4.app.** { *; }
-keep interface android.support.v4.app.** { *; }
-keep class com.actionbarsherlock.** { *; }
-keep interface com.actionbarsherlock.** { *; }

-libraryjars libs/android-support-v4.jar
-libraryjars libs/apache-mime4j-0.6.jar
-libraryjars libs/httpmime-4.0.1.jar
-libraryjars libs/libGoogleAnalyticsV2.jar

-assumenosideeffects class android.util.Log {*;}

# For native methods, see http://proguard.sourceforge.net/manual/examples.html#native
-keepclasseswithmembers class * {
    native <methods>;
}

# keep setters in Views so that animations can still work.
# see http://proguard.sourceforge.net/manual/examples.html#beans
-keepclassmembers public class * extends android.view.View {
   void set*(***);
   *** get*();
}

# We want to keep methods in Activity that could be used in the XML attribute onClick
-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

# For enumeration classes, see http://proguard.sourceforge.net/manual/examples.html#enumerations
-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

# The support library contains references to newer platform versions.
# Don't warn about those in case this app is linking against an older
# platform version.  We know about them, and they are safe.
-dontwarn android.support.**
-dontwarn org.apache.** 
```

但是日志仍然出现在 logcat 中。

所以，我只想知道代码必须是什么，以便只删除日志。不需要其他优化。

谢谢你

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-03T13:39:27.260

ProGuard 配置文件分为几个部分（从 Android SDK r20 开始），在 project.properties 中指定：

```
 proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

如果未禁用优化，则只能删除日志记录，这需要不同的全局配置文件：

```
 proguard.config=${sdk.dir}/tools/proguard/proguard-android-optimize.txt:proguard-project.txt 
```

文件 proguard-project.txt 只需要包含项目特定的配置。您的文件似乎包含太多内容，但这些是删除日志记录的设置：

```
-assumenosideeffects class android.util.Log {
    public static boolean isLoggable(java.lang.String, int);
    public static int v(...);
    public static int i(...);
    public static int w(...);
    public static int d(...);
    public static int e(...);
} 
```

类似的问题和答案：

*   [使用 proguard 删除日志调用](https://stackoverflow.com/questions/13218772/removing-log-call-using-proguard)
*   [在 ProGuard 优化期间删除未使用的字符串](https://stackoverflow.com/questions/6009078/removing-unused-strings-during-proguard-optimisation)
*   [使用 ProGuard 删除日志不会删除正在记录的字符串](https://stackoverflow.com/questions/7086920/removing-logging-with-proguard-doesnt-remove-the-strings-being-logged)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-18T11:55:26.240

如果您在 Android Studio 上遇到此问题，则必须将 Eric 的解决方案应用于您的 build.grade 文件（在应用程序级别）。代替：

```
proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' 
```

和：

```
proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro' 
```

# c# - c#多线程for循环

> ID：14123868
> 
> 赞同：0
> 
> 时间：2013-01-02T14:34:00.090
> 
> 标签：c#, multithreading, for-loop

我对线程编程很陌生。我实际上正在开发某种元搜索引擎，我需要一个每秒解析网页的应用程序。

在我的应用程序中，我有一个函数可以解析想要的网页，即：go_parse("http://www.google.com/page/1);

我想要做的是当函数完成解析第 1 页时，它会解析第 2 页等。但我对如何执行此操作有点困惑。

我必须创建一个循环来启动 go_parse 函数至少 50 次（第 1 页到第 50 页）。

希望有人可以帮助我。

提前致谢。

编辑：

使用 TASK 功能，我可以让它工作：

```
public void ProcessNextPage(int page)
    {
        Task t = Task.Factory.StartNew(() =>
        {
            go_parse("http://www.google.com" + searchForm.Text + "/"+page+"/");
        });
        t.ContinueWith(task =>
        {
            if (label2.Text != "Stopped")
            {
                page++;
                SetTextBoxText(page.ToString(), textBoxPage, false);
                ProcessNextPage(page);
            }
        });
    }

    private void button5_Click(object sender, EventArgs e)
    {
        label2.Text = "Started";
        ProcessNextPage(int.Parse(textBoxPage.Text));
    } 
```

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T14:39:53.287

如果您使用的是 C# 4.0，则可以使用[Task](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)、它的[ContinueWith](http://msdn.microsoft.com/en-us/library/dd270696.aspx)方法和`List<T>`or `Queue<T>`， or`Stack<T>`的页面来处理。

我在这里使用，说`Stack<T>`。

所以我们有`stack`所有页面要处理的地方

```
public void ProcessNextPage() {

   if(stack.Count == 0) //INFINIT LOOP BREAK CONDITION
        return;

   var pageToProcess = stack.Pop();
   Task.StartNew(t=> {
       /*DO SOMETHING WITH pageToProcess*/
   }).ContinueWith(a=>processNextPage()); //ON COMPLETE, CALL MYSELF (RECURSION)
} 
```

这只是一个基本想法，您自然应该以更适合您需求的方式对其进行更改和构建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:45:42.897

我已经有一段时间没有做这样的事情了。简而言之，我创建了一个带有 que 的类，其中包含要处理的项目列表。然后我用一个处理类启动了一个新线程，该线程通过队列并通过循环一个一个地处理这些。

如果队列中没有项目，则处理器再次等待，否则从队列中获取下一个项目。

以这种方式，创建要处理的新项目的应用程序保持单独运行，并且不会干扰处理。

从我的记忆中有点像这样：

```
private CustomQueClass queClass = new CustomQueClass();

Thread backgroundThread = new Thread(
  new ThreadStart(() =>
  {
      CustomProcessClass processClass = new CustomProcessClass(queClass);
  }
));
backgroundThread.Start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T15:28:46.043

你所拥有的是一种生产者-消费者关系。该`BlockingCollection`课程*非常*适合这些情况。默认情况下，它将使用 a `ConcurrentQueue`，这是您想要的。只需创建队列，创建任意数量的工作线程，每个工作线程都可以`GetConsumingEnumerable`用来获取项目直到完成，然后一个或多个生产者将项目添加到队列中。

# cocoa - 改变 SCNRenderer 的 PointOfView

> ID：14123874
> 
> 赞同：1
> 
> 时间：2013-01-02T14:34:18.733
> 
> 标签：cocoa, 3d, scenekit

我正在从具有特定角度的场景创建 SCNRenderer。我正在使用 SCNView 使我的观点可见，并且当对象场景看起来像我想要它时，我在离线 openGLContext 中渲染它以从中制作图像。这是相关的代码：

```
SCNRenderer *lRenderer = [SCNRenderer rendererWithContext:openGLContext.CGLContextObj options: nil];
lRenderer.scene = self.sceneView.scene;
lRenderer.pointOfView = [self.sceneView.pointOfView clone];
[ lRenderer render ]; 
```

我发现视点的克隆使渲染器以与 SCNView 完全相同的方式渲染场景。完美，到目前为止。

现在我想调整观点。例如，我想将旋转设置为独立于场景视图的值，假设为 0。所以，我这样做：

```
lRenderer.pointOfView.rotation = SCNVector4Make(1,1,1,M_PI_2); 
```

在打电话之前`[lRenderer render]`，这不会改变任何事情。

我在 lRenderer.pointOfView 上更改的任何属性似乎都无关紧要。但是，如果我省略了`lRenderer.pointOfView = [self.sceneView.pointOfView clone]`渲染器从默认角度而不是 self.sceneView 的角度渲染的线，那么在克隆的 SCNNode 中必须有一些我可以在 lRenderer.pointOfView 上更改的东西会产生影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:22:23.597

这里唯一看起来可疑的是你的“克隆”观点不是场景的一部分。所以我会尝试：

```
SCNNode *anotherPointOfView = [self.sceneView.pointOfView clone]; //clone
[[self.sceneView.pointOfView parentNode] addChildNode:anotherPointOfView]; //add to the scene (here at the same hierarchy level as the original point of view)

lRenderer.pointOfView = anotherPointOfView; //set the new point of view as the pov of the offscreen renderer 
```

# php - 为什么 PHP 变量不适用于 blueimp jquery 文件上传

> ID：14123875
> 
> 赞同：0
> 
> 时间：2013-01-02T14:34:28.070
> 
> 标签：php, jquery, cookies, blueimp

我最近开始使用 blueimp jquery 文件上传，但是我偶然发现了一个问题。

我想为图像应该上传到的路径分配一个 php 变量。

这是代码

```
 $haha = $_COOKIE['nameofcookie'];

 function __construct($options = null, $initialize = true) {
    $this->options = array(
        'script_url' => $this->get_full_url().'/',
        'upload_dir' => '../../../mem/$haha/',
        'upload_url' => 'http://www.mydomain.co.uk/mem/$haha/',
        'user_dirs' => false,
        'mkdir_mode' => 0755,
        'param_name' => 'files',
        // Set the following option to 'POST', if your server does not support
        // DELETE requests. This is a parameter sent to the client:
        'delete_type' => 'DELETE',
        'access_control_allow_origin' => '*',
        'access_control_allow_credentials' => false,
        'access_control_allow_methods' => array(
            'OPTIONS',
            'HEAD',
            'GET',
            'POST',
            'PUT',
            'PATCH',
            'DELETE'
        ), 
```

$haha 是我分配给我放置在用户身上的 cookie 的 PHP 变量。

但是，当我执行代码时，它会创建一个名为 $haha 的目录 - 而不是用户的 ID。

我曾尝试使用 "$haha" 或 ' 。$哈哈。' 但这些都不起作用。

任何人都可以帮忙吗？如果可以的话，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:13:30.970

查看构造函数，它允许您传递必须是数组的 $options。$options 将与 $this->options 合并。

```
 if ($options) {
        $this->options = array_merge($this->options, $options);
    } 
```

上面的语句显示了它是如何工作的。

现在我解释如何将路径传递给构造函数： 1\. 首先为类声明一个对象：

```
 $options=array('upload_url'=>'your/path','upload_dir'=>'your/path');
 $uploadHandler=  new UploadHandler($options); 
```

这样做是它会根据需要设置upload_url 和upload_path。

注意：如果 $options 中的键与构造函数中定义的键匹配，则这些值将覆盖构造函数中为该键存储的值，当键不匹配时，将添加键值对。

$haha = $_COOKIE['nameofcookie']; 这个变量似乎是类变量。您还需要牢牢把握 OOP 概念。在类方法中访问类变量时，应该使用 $this->haha。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:38:52.350

你必须使用 "$this->" 因为它在一个类中。然后您必须使用双引号或连接运算符（看起来像一个句点）：

```
'upload_dir' => '../../../mem/'.$this->haha.'/',
'upload_url' => 'http://www.mydomain.co.uk/mem/'.$this->haha.'/', 
```

在你的班级中，$haha 必须用“var”定义：

```
var $haha = $_COOKIE['nameofcookie']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:38:59.277

请用

```
'http://www.mydomain.co.uk/mem/"'.$haha.'"/', 
```

代替：

```
'http://www.mydomain.co.uk/mem/$haha/', 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T14:37:23.767

你有几个选择...

我最喜欢[`sprintf`](http://php.net/sprintf)使用 %d 表示整数或 %s 表示字符串：

```
'upload_dir' => sprintf("../../../mem/%d/", $haha),
'upload_url' => sprintf("http://www.mydomain.co.uk/mem/%d/", $haha), 
```

或使用双引号：

```
'upload_dir' => "../../../mem/{$haha}/",
'upload_url' => "http://www.mydomain.co.uk/mem/{$haha}/", 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T14:38:24.893

试试这一行：

```
'upload_dir' => '../../../mem/'.$haha.'/',
'upload_url' => 'http://www.mydomain.co.uk/mem/'.$haha.'/', 
```

希望它可以帮助你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T14:36:02.813

使用双引号而不是单引号（并[阅读一些关于字符串的文档](http://php.net/manual/en/language.types.string.php)）

`"http://www.mydomain.co.uk/mem/$haha/",`

# java - 在角色上没有可行的替代方案' ' 在我的语法中

> ID：14123878
> 
> 赞同：1
> 
> 时间：2013-01-02T14:34:45.217
> 
> 标签：java, parsing, antlr, antlr3

我正在尝试为 SRT 格式创建语法：

以下是 srt 文件的示例：

```
1
00:00:02,218 --> 00:00:04,209
[SHELDON SPEAKING IN MANDARIN]

2
00:00:04,721 --> 00:00:05,745
No, it's:

3
00:00:05,922 --> 00:00:07,913
[SPEAKING IN MANDARIN]

4
00:00:09,392 --> 00:00:11,383
[SPEAKING IN MANDARIN]

5
00:00:13,430 --> 00:00:15,193
What's this?

6
00:00:16,266 --> 00:00:18,029
That's what you did.

7
00:00:18,201 --> 00:00:22,467
I assumed, as in a number of languages,
that the gesture was part of the phrase.

8
00:00:22,639 --> 00:00:25,233
- Well, it's not.
- Why am I supposed to know that?

9
00:00:25,408 --> 00:00:28,900
As teacher, it's your obligation
to separate your personal idiosyncrasies...

10
00:00:29,079 --> 00:00:30,512
...from the subject matter.

11
00:00:31,081 --> 00:00:33,845
- I'm glad you decided to learn Mandarin.
- Why?

326
00:18:56,818 --> 00:19:00,720
Actually, I've heard
far too much about Schrödinger's cat.

327
00:19:01,623 --> 00:19:03,022
Good.

328
00:19:09,131 --> 00:19:11,895
All right, the cat's alive.
Let's go to dinner.

329
00:19:12,000 --> 00:19:15,072
Download Movie Subtitles Searcher from www.OpenSubtitles.org 
```

这是我的 antlr 语法（v. 3.4）。

```
grammar Exp;

parse
    :  (SUBTITLE)+
    ;

SUBTITLE
    : i=ID NL 
      t1=Timestamp SPACE ARROW SPACE t2=Timestamp NL 
      txt1 = TEXT

        {
            System.out.println("id="+$i); 
            System.out.println("t1= "+$t1); 
            System.out.println("t2= "+$t2);
            System.out.println("txt1= "+$txt1);

        }
    ;

TEXT 
    : ((TextLine NL NL)|(TextLine NL TextLine NL NL))
    ;

ID
    : DIG+
    ;

ARROW
    : '-->'
    ;

Timestamp
    : DIG DIG ':' DIG DIG ':' DIG DIG ',' DIG DIG DIG
    ;

TextLine
  :  ~('\r' | '\n')*
  ;

NL
  :  '\r'? '\n'
  |  '\r'
  ;

fragment
DIG 
    : '0'..'9'
    ;

fragment
SPACE
    :   ' ' | '\t'
    ; 
```

我的简单代码：

```
String input = IOUtils.toString(Test.class.getResourceAsStream("/subtitles.srt"));
ExpLexer lexer = new ExpLexer(new ANTLRStringStream(input));
CommonTokenStream stream = new CommonTokenStream(lexer);
ExpParser parser = new ExpParser(stream);
parser.parse(); 
```

如果在文件末尾我有两条新行，几乎所有东西都可以完美运行。如果没有，我收到此错误：

```
line 1484:0 no viable alternative at character '<EOF>' 
```

有什么建议可以让我的语法更灵活吗？接受最后将是一个新行，两个新行或更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:46:00.140

原因是`TEXT`最后需要 2 个新行。

您可以尝试从中删除一个尾随 NL `TEXT`，而是将其作为`SUBTITLE`.

就像是：

```
parse
    :  SUBTITLE (NL SUBTITLE)*
    ; 
```

顺便说一句，TEXT 是否只能有一两行？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T19:07:09.267

您使用了太多的词法分析器规则。

尝试这样的事情：

```
grammar T;

options {
  output=AST;
}

tokens {
  BLOCKS;
  BLOCK;
  TIME_RANGE;
  LINES;
  LINE;
  WORD;
}

parse
 : LineBreak* blocks LineBreak* EOF -> blocks
 ;

blocks
 : block (LineBreak LineBreak+ block)* -> ^(BLOCKS block+)
 ;

block 
 : Number Spaces? LineBreak time_range LineBreak text_lines -> ^(BLOCK Number time_range text_lines)
 ;

time_range
 : Time Spaces? Arrow Spaces? Time Spaces? -> ^(TIME_RANGE Time Time)
 ;

text_lines
 : line (LineBreak line)* -> ^(LINES line+)
 ;

line
 : Spaces? word (Spaces word)* Spaces? -> ^(LINE word+)
 ;

word
 : (Other | Number | Dashes | Arrow)+ -> WORD[$text]
 ;

Time      : Number ':' Number ':' Number ',' Number;
Arrow     : '-->';
Dashes    : '-'+;
Number    : '0'..'9'+;
LineBreak : '\r'? '\n' | '\r';
Spaces    : (' ' | '\t')+;
Other     : . ; 
```

它将解析输入：

```
1
00:00:02,218 --> 00:00:04,209
[ABC]

2
00:00:04,721 --> 00:00:05,745
-- 第一行
-- 第 2 行

3
00:00:05,922 --> 00:00:07,913
亩 --> 亩
```

进入以下AST：

[![在此处输入图像描述](../Images/9a7119bffdf7803d64cbdf3ec39069f5.png)](https://i.imgur.com/nNrc8.png)

*（点击图片查看大图）*

## 编辑

> 当文本是数字和冒号时，我遇到了一些问题。“第 1 季第 15 集：”或“我会在 11:00 给你打电话。维多利亚。” ' 试图修改你的例子但没有成功。

未经测试，但我认为这应该可行：只需将规则中第一个冒号*之后*`Time`的所有内容设为可选。在规则的最后，检查最后一个`Number`是否`Time`匹配。如果不是，请将令牌的类型更改为`Other`.

```
Time      
 : Number ':' (Number (':' (Number (',' last=Number?)?)?)?)?
   {
     if($last.text == null) $type = Other;
   }
 ; 
```

# ios - 如何解析pdf页面并获取该页面中的所有图像？

> ID：14123879
> 
> 赞同：2
> 
> 时间：2013-01-02T14:34:56.063
> 
> 标签：ios, image, pdf

我想解析一个包含一些图像的 pdf 页面！而 Ios 提供 Quartz 2D 来完成这项工作！但是当我去它的文档参考时，只有一些基本的介绍，教如何创建 PDF 文档，查看它，并进行一些转换！另外，虽然在“PDF文档解析”参考中有一些示例代码，但是我没有找到符合我需求的代码sinppets！在“CGPDFDictionaryGetStream”函数中，我找不到关于“key”的描述参数！是不是其他人也有同样的问题，怎么解决！谢谢 ！！！

# c++ - 如何防止用户在 wxGrid 单元格中输入无效值？

> ID：14123880
> 
> 赞同：0
> 
> 时间：2013-01-02T14:35:02.797
> 
> 标签：c++, events, wxwidgets

我想创建 wxGrid，用户可以在其中编辑一些单元格，但禁止输入不正确的值。例如，只能在此处输入长度为 4 的字符串。因此，如果用户输入另一个长度的字符串，我想显示一条错误消息并返回到单元格编辑器。怎么做？

例如，如果我处理单元格更改事件 EVT_GRID_CELL_CHANGE

```
void Frame::OnGridCellChange(wxGridEvent& event)
{
    int r = event.GetRow(); // get changed cell
    int c = event.GetCol(); // get changed cell

    if (Grid->GetCellValue(r, c).length() != 4)
       {Error E (this);
          /* Create the Error message */
        E.ShowModal();
          // The error message shown, uses clicks OK

        // So, what to do here? 

} 
```

`Grid->ShowCellEditControl();`不是解决方案，因为如果用户不编辑任何内容，则不会生成单元格更改，而只需单击另一个单元格 - 网格中会出现不正确的值。

处理`EVT_GRID_EDITOR_HIDDEN`似乎不合适，因为它出现在新值实际保存到单元格之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:47:42.897

您需要使用自己的单元格编辑器专业化。

[http://docs.wxwidgets.org/trunk/classwx_grid_cell_editor.html](http://docs.wxwidgets.org/trunk/classwx_grid_cell_editor.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:15:20.037

也许使用类型的事件`wxEVT_GRID_CELL_CHANGING`对你有用？如果在事件上调用[GetString()](http://docs.wxwidgets.org/trunk/classwx_command_event.html#a24323d78936e5f6cd7f4780371f373e0)返回的字符串不是四个字符长，那么您可以否决该事件，例如：

```
void Frame::OnGridCellChanging(wxGridEvent& event)
{
    if (event.GetString().length() != 4)
    {
        //Veto the event so the change is not stored
        event.Veto();

        Error E (this);
        E.ShowModal();
} 
```

然而，这似乎需要 wxWidgets 2.9.x 版本。

# class - 如何为as2中的方法定义默认参数值？

> ID：14123883
> 
> 赞同：-1
> 
> 时间：2013-01-02T14:35:23.060
> 
> 标签：class, function, actionscript, actionscript-2

看看这段代码：

```
function a2j(trusted:Boolean=true):String
    {
... 
} 
```

编译器不会在 flash actionscript 2 中接受此代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:40:01.837

看起来 AS2 并不强制您提供函数声明的所有参数。在此[帮助页面](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000147.html)的底部，他们声明您未提供的参数是`undefined`......并且您提供的任何额外参数都将被忽略。

此外，此[问题](https://stackoverflow.com/questions/972973/procedurally-accessing-a-functions-parameter-list-in-actionscript-2-0)的答案表明您可以使用`arguments`关键字（数组）来处理传递给函数的参数。

因此，对于默认值，如上面的示例所示，您可以执行以下操作：

```
function methodThatHasADefault(value:Boolean):void
{
    if (arguments.length == 0)
        value = true;

    // do something
} 
```

# ruby-on-rails - Rails button_to - 将 CSS 类应用于按钮

> ID：14123884
> 
> 赞同：35
> 
> 时间：2013-01-02T14:35:23.363
> 
> 标签：ruby-on-rails, forms, erb, button-to

这很愚蠢，但我只是不知道如何设置 Rails 创建的输入元素的样式`button_to`——是的，我一遍又一遍地阅读文档并尝试了示例。

这是我的 ERB 代码：

```
 <%= button_to "Claim", action: "claim", idea_id: idea.id, remote: true, class: 'btn btn-small'  %> 
```

这会产生以下 HTML：

```
<form action="/ideas/claim?class=btn+btn-small&amp;idea_id=4&amp;remote=true" class="button_to" method="post">
  <div>
    <input data-remote="true" type="submit" value="Claim">
    <input name="authenticity_token" type="hidden" value="pU3umgqrDx3WbalfNK10c9H5B5N4OzPpohs4bWW8mow=">
  </div>
</form> 
```

而我想要的只是`input`拥有`class = "btn btn-small"`。

帮助？谢谢！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-02T14:40:05.347

该方法的签名[`button_to`](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)是

```
button_to(name = nil, options = nil, html_options = nil, &block) 
```

所以`{}`用来区分`options`和`html_options`

```
<%= button_to "Claim", {action: "claim", idea_id: idea.id, remote: true}, {class: 'btn btn-small'} %> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-03-11T02:17:27.093

`<%= button_to "Claim", {action: "claim", idea_id: idea.id, remote: true}, {form_class: 'form', class: 'btn btn-small'} %>`

form_class：表单的类

class : 表单中按钮的类

# mysql - 我可以在加入 2 个表后添加 AND 吗？

> ID：14123885
> 
> 赞同：-3
> 
> 时间：2013-01-02T14:35:25.230
> 
> 标签：mysql, join

这是一个合法的 MySql 查询吗？（更准确地说，是我加入 2 个表并添加 AND 条件的部分。）

```
LEFT JOIN release_artwork ON release_artwork.album_id = album.album_id AND release_artwork.position = 1 
```

这是完整的查询：

```
SELECT album.album_id, album.title, country.country_id, artwork.thumb_filename, artwork.thumb_width, artwork.thumb_height
FROM song
JOIN album ON song.published_album = album.album_id
LEFT JOIN country ON album.country_id = country.country_id
LEFT JOIN release_artwork ON release_artwork.release_id = album.album_id AND release_artwork.position = 1
LEFT JOIN artwork ON artwork.artwork_id = release_artwork.artwork_id
WHERE song.song_id = 1 
```

我可以`AND`在加入 2 个表后立即添加吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:42:27.273

这是完全合法的。我不认为它会抛出任何错误

# java - 将 *.jar 导入 Maven 项目时遇到问题

> ID：14123886
> 
> 赞同：3
> 
> 时间：2013-01-02T14:35:33.083
> 
> 标签：java, eclipse, maven, import, jar

我需要知道是否有一个 Maven 项目，我可以在不生成 Maven 依赖项 (POM) 的情况下导入外部 (*.jar)，只需将它们导入项目构建路径。

当项目向我询问我无法在网络中找到的其他依赖项时，我在尝试运行该项目时遇到了麻烦，并且我检查了这些依赖项是否没有必要，因为我检查了我的代码和 (*.jar ）在一个不使用 Maven 的项目中并且它可以工作（无需导入该库）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:39:40.290

您可以像往常一样将 jar 导入本地存储库并在 POM 中引用它。但是，每个开发人员都需要在他/她的机器上进行导入（一次）。

见：http: [//jeff.langcode.com/archives/27](http://jeff.langcode.com/archives/27)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T14:50:37.137

您需要在[maven-install-plugin](http://maven.apache.org/plugins/maven-install-plugin/usage.html)`install-file`上使用目标：

```
mvn install:install-file -Dfile=your-artifact-1.0.jar \
                     [-DpomFile=your-pom.xml] \
                     [-Dsources=src.jar] \
                     [-Djavadoc=apidocs.jar] \
                     [-DgroupId=org.some.group] \
                     [-DartifactId=your-artifact] \
                     [-Dversion=1.0] \
                     [-Dpackaging=jar] \
                     [-Dclassifier=sources] \
                     [-DgeneratePom=true] \
                     [-DcreateChecksum=true] 
```

如果您使用的是[Nexus ，您可以](http://www.sonatype.org/nexus/)[手动](http://www.sonatype.com/books/nexus-book/reference/repoman-sect-reasons.html#_deploy_3rd_party_artifacts)上传 jar 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:40:06.273

您可以提供[System Dependency](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T15:15:59.413

免责声明：以下内容仅适用于在多人共享同一个项目的环境中工作。如果您是一个人，那么所有建议都很好。

我不喜欢系统依赖或本地导入；在这两种情况下，您仍在管理每台机器的依赖关系，这是 Maven 应该从您身上带走的负担。

如果您确实有一个在任何在线 Maven 存储库中都找不到的依赖项，我宁愿采取艰难但更可靠的路线，那就是安装一个本地 Nexus 服务器，然后您还可以将其设置为 Maven 中央和JBoss Nexus，因此客户不必继续从 Internet 下载依赖项。这样一来，您就拥有了一台维护所有 Maven 依赖项的机器，这使它变得很好且可控。此外，您的 Nexus 更容易获得；如果您的 Internet 连接中断，外部 Maven 源可能会关闭或不可用。

然后，您可以在 Nexus 中安装您的 jars（在一个名为“第三方”的本地存储库中，这是我迄今为止在我工作过的公司中看到的一种常见策略）和您的 Maven 客户端，如果正确告知您的 Nexus 服务器是一个镜像，可以引用第三方 Maven 依赖项，就好像它们来自在线依赖项一样。

# c# - 在 vs 2010 中为图表添加更多价值

> ID：14123887
> 
> 赞同：1
> 
> 时间：2013-01-02T14:35:35.070
> 
> 标签：c#, asp.net, visual-studio-2010, charts

我在 mysql 中有一些销售数据，经过一些查询，结果将是这样的：

```
year  |sales   |
2008  |100000  |
2009  |120040  |
2010  |239000  |
2011  |300900  |
2012  |200900  | 
```

这个数据将显示在图表上，现在我想从明年的一些数据预测中添加一个值，并将其显示在图表上

我试过这段代码：

```
 myChart.Series[0].Points[0].XValue = (year + 1);
    myChart.Series[0].Points[0].YValues = dataForecasting; 
```

但什么也没发生，我怎样才能在图表上添加一个值？我想要一个连续的折线图，所以从 2008 年到 2013 年只有一个系列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:50:20.273

```
 chart1.Series.Clear();

    List<string> years = new List<string> { "1994", "1995", "1996", "1997" };
    List<double> yearSales = new List<double> { 10000.23, 98000, 95876, 78097 };

    Series yearSeries = chart1.Series.Add("sales");
    yearSeries.Points.DataBindXY(years, yearSales);
    yearSeries.ChartType = SeriesChartType.Line;

    // do stuff....

    // add one more value

    years.Add("1998");
    yearSales.Add(12345.67);
    yearSeries.Points.DataBindXY(years, yearSales); 
```

# asp.net - 编辑 aspx 页面导致会话丢失

> ID：14123889
> 
> 赞同：2
> 
> 时间：2013-01-02T14:35:42.453
> 
> 标签：asp.net, visual-studio-2010, web-applications, visual-studio-2012

我正在使用 VS2012 进行开发，也与 VS2010 相同。我从事 Web 应用程序项目。我在 IIS 上添加了一个虚拟应用程序，并将我的项目根文件夹设置为`localhost/MyWebApp`.

它经常发生，当我进行简单的页面编辑（在 .aspx 文件上）时，我的网站会丢失会话。我确信没有更改服务器端代码或没有`runat=server`影响标签。

我怎样才能摆脱这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:55:21.273

详细阐述大卫的评论：

> **文件更改通知**
> 
> ASP.NET 2.0 依赖于文件更改通知 (FCN) 来查看应用程序是否已更新，并且根据更改的大小，应用程序池将循环使用。如果您或您的应用程序正在向应用程序文件夹添加和删除目录，那么您每次都将重新启动应用程序池。
> 
> 更改以下文件还会导致应用程序池立即重新启动：
> 
> ```
> web.config
> machine.config
> global.asax
> Any file in the /bin directory or subfolders 
> ```
> 
> 更新 .aspx 文件等导致重新编译最终也会触发应用程序池的重新启动。system.web 下的编译元素有一个名为 numRecompilesBeforeAppRestart 的属性。默认值为 20，表示重新编译 20 次后应用程序池将被回收。

摘自：[Losing ASP.NET Sessions - Why Application Pools recycle](http://petesbloggerama.blogspot.co.uk/2007/10/losing-aspnet-sessions-why-application.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T14:55:32.503

汉斯五世的回答：

> 当使用默认的 SessionState 模式“InProc”时，应用程序池回收时您的会话将丢失。发生这种情况的原因有很多，而且当您更改 aspx 文件时：
> 
> ASP.NET 依赖文件更改通知 (FCN) 来查看应用程序是否已更新。根据更改，应用程序池将回收。如果您或您的应用程序正在向应用程序文件夹添加和删除目录，您将每次都重新启动应用程序池，因此请小心这些临时文件。更改以下文件还将触发应用程序池的立即重新启动：
> 
> *   网络配置
> *   机器配置
> *   全球.asax
> *   bin 目录或其子目录中的任何内容
> 
> 更新 .aspx 文件等导致重新编译最终也会触发应用程序池的重新启动。system.web 下的编译元素有一个名为 numRecompilesBeforeAppRestart 的属性。默认值为 20。这意味着在 20 次重新编译后应用程序池将被回收。

[答案参考](http://forums.asp.net/t/1806022.aspx/1?Session%20resets%20on%20ASPX%20and%20CSS%20file%20changes%20with%20WebForms)

# android - 在 AppEngine 查询中使用两个不等式

> ID：14123894
> 
> 赞同：1
> 
> 时间：2013-01-02T14:36:11.337
> 
> 标签：android, google-app-engine

> **可能重复：**
> [Google App Engine Geohashing](https://stackoverflow.com/questions/2060219/google-app-engine-geohashing)

我正在尝试使用 AppEngine 存储具有纬度和经度参数的模型。一切似乎都很好，除非我尝试检索两个位置之间的所有用户。我这样做：

```
 String query = "select from " + TUser.class.getName();
 query += " WHERE ( iLatitude >= " + lat_min + " && iLatitude <= " + lat_max + ")";
 query += " && ( iLongitude >= " + lon_min + " && iLongitude <= " + lon_max + ")";
 List<TUser> obj = (List<TUser>)pm.newQuery(query).execute(); 
```

但是，正如 AppEngine 文档中所说，这会引发：

```
 java.lang.IllegalArgumentException: Only one inequality filter per query is supported.  Encountered both latitude and longitude 
```

我正在尝试为此找到解决方法，但没有运气。使用坐标总是需要至少两个不等式。那怎么解决呢？有什么解决办法吗？或者有谁知道什么时候会在 AppEngine 中实现？

由于数据库有数十万用户，我无法仅按纬度过滤查询，然后使用 FOR 迭代结果以获得具有正确经度的结果。数据太多。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T14:42:33.113

您需要查看将图块编码为单个字符串的[geohash 。](http://en.wikipedia.org/wiki/Geohash)
查看[此博客](http://hitching.net/2009/11/10/scalable-fast-accurate-geo-apps-using-google-app-engine-geohash-faultline-correction/)以了解如何使用它。

# ubuntu-12.04 - Ubuntu 12.04 下 HD Graphics 4000 上的 OpenGL 和 GLSL 3.3

> ID：14123895
> 
> 赞同：18
> 
> 时间：2013-01-02T14:36:15.580
> 
> 标签：ubuntu-12.04, opengl-3

我正在运行该配置：

*   Ubuntu 12.04
*   英特尔核芯显卡 4000

`glxinfo`给我那个参数：

```
OpenGL renderer string: Mesa X11
OpenGL version string: 2.1 Mesa 8.0.4
OpenGL shading language version string: 1.20
OpenGL extensions: 
```

我的目标是运行 OpenGL 3.3（以及 GLSL 3.3）。如果我很容易解决开发问题，我会迷失在硬件和驱动程序中，那么有人知道用我的配置实现这一目标的方法吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-12-15T00:04:41.307

好消息！！！

*Mesa 10*已经发布，这意味着支持`Opengl 3.3`和`GLSL 3.3`！

这是在我的带有 HD 4400 图形芯片组的第四代酷睿 i5 移动处理器上进行测试的。

`OpenGL`现在可以在 linux 中的集成英特尔芯片组上进行现代开发！这是向前迈出的一大步。 `Note that ubuntu 15.04 ship with Mesa 10.5`

**这是我使用 GLSL 3.3 着色器渲染三角形 :)**

![glsl 3.3 着色器](../Images/85e956596257ea81314d0c8c1ed5e98c.png)

好的，为了让实验性驱动程序在 Ubuntu 13.10 上运行，你需要做一些事情：

```
# Note this will take awhile!
1.) Add the PPA Repository
  $ sudo add-apt-repository ppa:oibaf/graphics-drivers
2.) Update sources
  $ sudo apt-get update
3.) Dist-upgrade (rebuilds many packages)
  $ sudo apt-get dist-upgrade
4.) Reboot!

In your code make sure you request a Opengl 3.3 context! 
```

**运行这个命令** `glxinfo | grep OpenGL` *你应该得到类似...*

```
OpenGL vendor string: Intel Open Source Technology Center
OpenGL renderer string: Mesa DRI Intel(R) Haswell Mobile 
OpenGL core profile version string: 3.3 (Core Profile) Mesa 10.1.0-devel (git-f9cfe5c     saucy-oibaf-ppa)
OpenGL core profile shading language version string: 3.30
OpenGL core profile context flags: (none)
OpenGL core profile profile mask: core profile 
```

*来源文章*

[http://www.phoronix.com/scan.php?page=news_item&px=MTQ5OTk](http://www.phoronix.com/scan.php?page=news_item&px=MTQ5OTk)

[https://launchpad.net/~oibaf/+archive/graphics-drivers/](https://launchpad.net/~oibaf/+archive/graphics-drivers/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-02T11:30:13.037

所以我看到了很多关于这个的线程，我认为这里是一个回应的好地方。我用英特尔 ivybridge 运行 Ubuntu 15.04。使用“Linux 的英特尔图形安装程序”应用程序后，glxinfo 提供了有关 openGl 的以下信息：

```
OpenGL core profile version string: 3.3 (Core Profile) Mesa 10.6.0
OpenGL core profile shading language version string: 3.30
OpenGL version string: 3.0 Mesa 10.6.0
OpenGL shading language version string: 1.30 
```

现在从这里您可以看到**核心**配置文件和 glsl 版本是 3.3，但兼容的 openGl 只有 3.0，因此如果您希望代码使用 3.3 运行，您需要同时**指定 opengl 核心配置文件和 glsl 核心配置文件**。如果您使用的是 freeglut 和 glew，以下步骤应该有效：

*   glsl #version 应该指定您想要核心配置文件：

`#version 330 core`

*   指定你想要opengl 3.3：

`glutInitContextVersion (3, 3);`

*   最后在 glewInit() 之前将 glewExperimental 设置为 true：

`glewExperimental = GL_TRUE;`

***编辑：***

我忘记提到的似乎与大多数使用 freeglut 的 *nix 用户相关的东西是关于深度测试的，即从特定角度应该绘制（以及不应该绘制）网格的内容：

要在 Linux 上使用深度测试，您不仅需要通过以下方式启用深度测试

`(glEnable(GL_DEPTH_TEST);`

但是您还需要创建 glut 上下文以具有深度缓冲区（默认情况下，Windows 似乎通常具有深度缓冲区，而 Linux 则没有）。

使用 freeglut 这意味着您需要包含`GLUT_DEPTH`在[glutInitDisplayMode](https://www.opengl.org/resources/libraries/glut/spec3/node12.html)中，以便它创建上下文以具有深度缓冲区，例如

`glutInitDisplayMode(GLUT_DOUBLE|GLUT_RGB|GLUT_DEPTH);`

**ps**我一直在使用 freeglut，因为我使用的大学模块为我们提供了使用它运行的演示代码。从那时起，我肯定会建议改用[glfw](http://www.glfw.org/)。我的答案的第一部分仍然非常适用，只是使用 glfw 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T07:40:24.657

不幸的是，目前看来这是不可能的，因为英特尔提供的开源驱动程序是唯一可用的。有一个比您的版本更新的版本（Mesa 9.0.1），但它仍然支持 OpenGL 3.0 和 GLSL 1.30，您可以在[英特尔开源网站](https://01.org/linuxgraphics/downloads/2012/2012q4-intel-graphics-stack-release)的发行说明中阅读。

问题是开源驱动程序被 Mesa 卡住了，目前它只支持 GLSL 1.40，你可以在这里看到：[http ://www.mesa3d.org/shading.html#support](http://www.mesa3d.org/shading.html#support)

恐怕如果您需要使用 OpenGL 3.3 环境，您将需要获得具有可用二进制驱动程序（nvidia 或 ati 卡）的专用 GPU。

# php - 在 symfony 1.x 中设置路由规则的条件

> ID：14123905
> 
> 赞同：0
> 
> 时间：2013-01-02T14:37:06.957
> 
> 标签：php, symfony-1.4

对于 symfony 1.4，我使用这个规则：

```
asasds:
  url:    /users/:order
  param:  { module: users, action: index } 
```

我想实现这一点：`www.mysite.com/users/aNumericValueAsOrder`到目前为止看起来还不错，但是如果我有一个`www.mysite.com/users/createOrder`作为 FORM POST 动作的动作怎么办。`createOrder()`是一种方法，而不是数字 id。

如何区分？如何告诉路由系统“请检查是否是一个动作”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:43:10.057

试试这个：

```
asasds:
  url:    /users/:order
  param:  { module: users, action: index }
  requirements: { order: \d+ } 
```

当然，那是数值；需求子参数是正则表达式，因此非常灵活。

# actionscript - 在 ActionScript 中使用 Timer 函数

> ID：14123906
> 
> 赞同：0
> 
> 时间：2013-01-02T14:37:12.737
> 
> 标签：actionscript, timer

动作脚本

我在使用计时器功能时遇到问题。

我想做跟随程序。第一：生成随机数并放置数组。第二：通过存储的数组以3秒的间隔执行功能。

但是在使用定时器功能时，我不能使用应该执行间隔 3 秒的功能参数。

错误消息： RangeError：错误 #1125：索引 7 超出范围 4。在 views::twoHomeView/onTimer()[C:\Users\Kinect\Adobe Flash Builder 4.6\yattah\src\views\twoHomeView.mxml: 26] 在 flash.utils::Timer/_timerDispatch()

## 在 flash.utils::Timer/tick()

```
 <?xml version="1.0" encoding="utf-8"?> 
```

```
<fx:Script>
    <![CDATA[

        import flash.display.Sprite;
        import flash.events.TimerEvent;
        import flash.utils.Timer;

        private var timer:Timer;

        public function Main()
        {
            timer = new Timer(1000, 3);
            timer.addEventListener(TimerEvent.TIMER, onTimer);
            timer.start();
        }
        var kaisu:int =0; 
        private function onTimer(event:TimerEvent):void
        {
        for(var i:int;i<n.length;i++){
            kaisu += 1;
            display(n[kaisu]);
        }
        }

        public  var n:Vector.<int> = new Vector.<int>(4);   

        public var a:int　=0;
        public var s:int　=0;

            function display(q:int):void{//show the picture(ue,migi,shita,hidari)　0=↑1=→2＝↓３＝←
            if(q ==0)
            {
                ue.visible= true;
                migi.visible= false;
                shita.visible= false;
                hidari.visible= false;
            }
            else if(q ==1)
            {

                ue.visible= false;
                migi.visible= true;
                shita.visible= false;
                hidari.visible= false;
            }
            else if(q ==2)
            {
                ue.visible= false;
                migi.visible= false;
                shita.visible= true;
                hidari.visible= false;
            }
            else
            {
                ue.visible= false;
                migi.visible= false;
                shita.visible= false;
                hidari.visible= true;
            }
                }
        protected function button1_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub

            display(0);
        }

        protected function button2_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub

            display(0);

        }

        protected function right_clickHandler(event:MouseEvent):void
        {
            // TODO Auto-generated method stub
            display(1);
        }

        function wait(time:int, handler:Function):void

        {

            var timeri:Timer = new Timer(time, 1);

                timeri.addEventListener(TimerEvent.TIMER_COMPLETE, timerHandler);

                timeri.start();

            function timerHandler(event:TimerEvent):void

            {

                    handler();

                    timeri.removeEventListener(TimerEvent.TIMER_COMPLETE, timerHandler);

            }

        }   
        function lv1():void{
    }

        function showMC():void//put random number in array
        {

            for(var i:int;i<n.length;i++)
            {   var r:int = Math.floor(Math.random() * 4);
                n[i]=r;
            }   
            point.text = n[0]+""+" "+n[1]+" "+n[2]+" "+n[3];
        }

    ]]>
</fx:Script>

<fx:Declarations>
</fx:Declarations>

<s:Image x="-31" y="-40" width="383" height="486" source="assets/yattah.jpg"/>
<s:Button id="left" x="13" y="304" width="50" height="50" label="←"
          click="button1_clickHandler(event)"/>
<s:Label id ="point" x="19" y="7" text="点"/>
<s:Button id="up" x="60" y="257" width="50" height="50" label="↑"
          click="button2_clickHandler(event)"/>
<s:Button id="right" x="107" y="304" width="50" height="50" label="→"
          click="right_clickHandler(event)"/>
<s:Button id="down" x="59" y="352" width="50" height="50" label="↓"
        />
<s:Button x="260" y="309" width="50" height="50" label="A" click="Main()"/>
<s:Button x="207" y="359" width="50" label="B" click="showMC()"/>
<s:Image id="ue" x="75" y="33" visible="false" smooth="true" source="assets/ue.png"/>
<s:Image id="shita" x="80" y="49" smooth="true" source="assets/shita.png"/>
<s:Image id="hidari" x="75" y="55" smooth="true" source="assets/hidari.png"/>
<s:Image id="migi" x="80" y="49" smooth="true" source="assets/migi.png"/>
<s:Image id="good" x="-21" y="84" width="363" height="103" visible="false" source="assets/good.png"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:08:58.767

好吧，您正在创建一个`Vector`包含 4 个元素的元素：

```
public  var n:Vector.<int> = new Vector.<int>(4) 
```

然后在您的计时器事件处理程序中，您从 0 迭代到 5 ...所以您得到了越界错误：

```
for(var i:int;i<5;i++) {
            kaisu += kaisu+1;
            display(n[kaisu]);
        } 
```

`kaisu`这会因您以有趣的方式递增的成员变量而变得更加复杂。我相信这会导致在到达 for 循环结束之前发生错误。您可能应该将此变量设为局部变量（在`onTimer()`函数中声明它，而不是在函数外部声明）......并像这样递增它：

```
kaisu += 1; // or kaisu++; 
```

最后，如果您查看您的`wait()`方法，您正在声明一个本地`Timer`对象。当`wait()`函数完成时，该计时器可能会被垃圾收集，并且您可能永远不会从该计时器对象中获得任何事件。要解决这个问题，只需将声明移到函数`timeri`外部`wait()`（使其成为成员变量）。这与错误无关，但以后可能会成为问题。

# .htaccess - URL 重定向和附加#Hashtag

> ID：14123907
> 
> 赞同：-1
> 
> 时间：2013-01-02T14:37:14.157
> 
> 标签：.htaccess, drupal, redirect, http-status-code-301, dreamhost

我的客户进行了品牌重塑并更改了他们的主要 URL。我需要重定向所有访问旧 URL 的流量，并将它们发送到新 URL 上的同一页面，并最好附加一个#hashtag ...主题标签将触发解释重定向的覆盖。两个站点都在同一个 Drupal 代码库上，因此使用同一个 .htaccess 文件。

所以如果有人访问： http: [//oldsite.com/abc/def](http://oldsite.com/abc/def)

他们应该被重定向到： http: [//newsite.com/abc/def/#hashtag](http://newsite.com/abc/def/#hashtag)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:07:58.433

像这样的东西？虽然我不是 htaccess 技巧方面的专家。

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.newdomain\.com
RewriteRule (.*) http://www.newdomain.com/$1/#hashtag [R=301,L] 
```

# c# - 触发方法时要填充的动态表格单元格

> ID：14123912
> 
> 赞同：0
> 
> 时间：2013-01-02T14:37:26.980
> 
> 标签：c#, dynamic-tables

我正在使用 ASP.NET 和 C# 我有一个动态表，我希望一个单元格有一个初始值，然后我想将此值用作方法中的参数，并用另一个值填充同一个单元格......

这是我的代码片段

```
 for (int index = 0; index < size; index++) { 

     List<Hotel> h = listHotelList[index];

    Hotel myHotel = new Hotel();

    mytable = new Table();
    mytable.ID = "HotelTable"+index;

    Page.Form.Controls.Add(mytable);
    mytable.CellSpacing = 20;
    mytable.CellPadding = 10;

    for (int g = 0; g < h.Count; g++)
    {
        myHotel = h[g];
        TableRow row = new TableRow();

        for (int i = 0; i < 2; i++)
        {

            TableCell cell = new TableCell();

            if (i == 0)
            {

               // I want to leave this with only the value of the hotelId
               // and I want my method to fill this cell with an image by retrieving 
               // the value of the hotelId 
            }

            if (i == 1)
            {

                Label tb = new Label();
                tb.ID = "label1_" + g + "Col" + i;
                tb.Text = "<h4>" + myHotel.hotelName + "</h4><br />";
                cell.Controls.Add(tb);

            }

            row.Cells.Add(cell);

        }

        mytable.Rows.Add(row);
    }

    } 
```

对于我的情况，当用户单击按钮时，我从单元格中获取酒店 ID，然后它触发一个方法，该方法将获取单元格“酒店 ID”中的值并检索该特定酒店的图像并用单元格填充图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:09:16.237

是看不到表的问题吗？

如果是这样，请将表格添加到您的页面

```
 Page.Controls.Add(mytable); 
```

如果定位不好，那就在你的页面上放一个占位符，并在那里添加控件。

```
 Placeholder.Controls.Add(mytable); 
```

# android - 在 Android 中使用 AChartEngine 绘制动态折线图时面临的问题

> ID：14123913
> 
> 赞同：2
> 
> 时间：2013-01-02T14:37:35.470
> 
> 标签：android, dynamic, charts, achartengine, linegraph

1.  如何停止沿 y 轴滚动 AChartEngine 动态折线图？

2.  当我动态绘制值时，我希望显示最近绘制的值。怎么做？

3.  我希望绘制 20 到 200 范围内的 y 轴值，并且只想显示 5 个值，所以我使用了 mRenderer.setYLabels(5); 但是，当我这样做时，只会为这些值显示网格线。并且用户将无法知道确切的 y 轴坐标。如何显示每个值的网格线并仅显示某些值的标签？

4.  如果我手动向右或向左水平滚动图形，x 轴标签会发生变化。我使用 setXLables(2) 将范围设置为 0-10；但它变为0,5,10......如何控制这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:30:20.870

这些应该是 4 个单独的问题，而不是编号的问题。所以，我只会回答其中的第一个：

您可以设置最小和最大显示值：

```
renderer.setXAxisMin(minValue);
renderer.setXAxisMax(maxValue); 
```

如果通过滚动你的意思是平移，那么这就是这样做的方法：

```
renderer.setPanEnabled(false, false);
renderer.setZoomEnabled(false, false); 
```

# html - @font-face：我必须在使用自定义字体时包含粗体变体吗？

> ID：14123915
> 
> 赞同：0
> 
> 时间：2013-01-02T14:37:40.747
> 
> 标签：html, css, font-face

我正在通过“@font-face”规则导入/使用自定义字体。在我的 Mac 上，字体似乎显示得非常好，有无权重：“粗体”。

尽管在 Windows 机器上，当使用粗体（用于字体）时，要么找不到字体，要么出现其他问题。

看看顶部的附件。你会注意到不同之处。

使用字体：Futura

我还必须包括字体的变体/权重吗？还是有另一种方式，我应该处理自定义字体。

谢谢。

![好坏](../Images/896a084bb76d94cf07f9c474f6ff95b1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:43:59.930

如果您的本地计算机上有字体，则无需导入字体。当您导入字体并将其设为粗体时（通过字体粗细：粗体），它可能会很糟糕（在网站上看起来很糟糕）。我更喜欢将各种字体导入 css——然后当我想使用粗体时，我设置 font-family: 'myfontBold' 和 font-weight: normal。您可以在此处使用 css 生成字体：[http ://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:41:08.493

包括粗体字体取决于您。个人觉得没必要。

无论哪种方式，请确保如果您使用粗体字体，则不要将其设置为粗体，否则您将使用双粗体字体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:28:07.207

如果在定义可下载字体时不包含粗体字体`@font-face`，但使用会导致加粗的 HTML 或 CSS，则会强制浏览器使用“合成粗体”，这通常会产生糟糕的结果。但是，结果因浏览器而异。

所以答案是“是的，如果你对该字体的文本使用粗体”。

顺便说一句，我认为您不能合法地将 Futura 用作可下载字体。

# sql - 无法访问数据库 [dbName]。（对象浏览器）

> ID：14123917
> 
> 赞同：15
> 
> 时间：2013-01-02T14:37:46.563
> 
> 标签：sql, sql-server, sql-server-2008

我有一个关于使用 SQL Server 2008 R2 的问题。

我最近遇到了我的计算机问题，因此我不得不重新启动 Windows，并且必须将一个用户的权限授予另一个用户（使用属性中的安全功能）。但是，最初授予权限时，它会通过“拒绝访问”消息。

经过大量研究，它停止产生此错误（我需要授予权限的用户也不可用），然后导致另一个问题发生，但这次是在 SQL Server 中。它产生这个消息；

> 无法访问数据库 [dbName]。（对象浏览器）

当我尝试选择下拉选项以查看 SQL Server 中数据库的表和存储过程的列表时，会发生此错误。我在以下链接中找到了对此的解释；

[http://www.microsoft.com/products/ee/transform.aspx?ProdName=Microsoft+SQL+Server&ProdVer=10.50.1617&EvtSrc=MSSQLServer&EvtID=916](http://www.microsoft.com/products/ee/transform.aspx?ProdName=Microsoft+SQL+Server&ProdVer=10.50.1617&EvtSrc=MSSQLServer&EvtID=916)

然后我尝试像这样实现；

```
 USE msdb;
 GO
 GRANT CONNECT TO [DBName\MyName] ;

 CREATE DATABASE [DBNAME] ON PRIMARY 
```

使用我创建的脚本（幸运的是在这个问题发生之前）它通过大量消息;

> *消息 15151，级别 16，状态 1，第 1 行
> 找不到用户“DBName\MyName”，因为它不存在或您没有权限。
> 消息 262，级别 14，状态 1，第 2 行
> 创建数据库权限在数据库“主”中被拒绝。
> 消息 5011，级别 14，状态 9，第 1 行
> 用户无权更改数据库“DBName”，数据库不存在，或数据库未处于允许访问检查的状态。
> 消息 5069，第 16 级，状态 1，第 1 行...*

在这一系列错误之后，我已经陷入困境，因此如果有人能给我一些关于我可以做些什么来解决这个问题的反馈，我将不胜感激。干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-01-03T08:34:15.887

使用 sa 登录并展开 Security > Login，右键单击用户名，然后单击属性，单击用户映射并选择您希望用户访问的数据库，然后确定

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T14:47:10.917

通常，直接向登录授予权限是一个坏主意。您应该在数据库中创建角色对象，并且应该将数据库中的所有权限分配给角色。

然后，当将数据库移动到另一台计算机（或重新安装）时，您唯一需要修改的是服务器登录名和角色分配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:59:35.287

One possible problem is that you have two instances of the database, so you have to deactivate one instance, if you have your database opened and accessible in your server explorer in `Visual studio` close connexion then go to windows services and stop and restart `SQL server service (MSSQL)` then go to `Management studio` and open your database, it should be opened and you can explore tables from Management studio.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T18:33:55.157

似乎您尝试访问的数据库没有管理员权限。关闭 SSMS 并以管理员身份运行打开它。

# hibernate - JPA -> Hibernate 不生成自动 id

> ID：14123921
> 
> 赞同：0
> 
> 时间：2013-01-02T14:38:15.557
> 
> 标签：hibernate, jpa

我有一个辅助的独立应用程序来从某些表中加载实体的值，并且它正在下降，因为 Hibernate 试图在没有指定键值的情况下创建记录（即使它被指定为`@GeneratedValue(strategy=GenerationType.AUTO)`）。

豆是：

```
@Entity
public class Location implements Serializable {

  private static final long serialVersionUID = 1L;

  // startRegion attributes
  @Id
  @GeneratedValue(strategy=GenerationType.AUTO)
  private int id = 0;

  @ManyToOne(fetch = FetchType.LAZY)
  private Location parent = null;

  @Column(nullable=false)
  private boolean active = false;

  @OneToMany(mappedBy="parent", cascade=CascadeType.ALL, fetch=FetchType.LAZY)
  private Set<Location> divisions = null;

  @OneToMany(mappedBy="location", fetch=FetchType.EAGER, cascade=CascadeType.ALL)
  @MapKey(name="localeId")
  private Map<String, Location_i18n> descriptions = new HashMap<String, Location_i18n>();

  @Column(nullable=true, length=150)
  private String path = null;

  @Column(nullable=true, length=20)
  private String prismaCode = null;

  @Column(nullable=true, length=5)
  private String shortCode = null;
} 
```

Hibernate 日志中显示的 SQL 缺少该`id`字段：

```
insert into Location (active, parent_id, path, prismaCode, shortCode) values (?, ?, ?, ?, ?) 
```

这显然会导致约束违反异常。

相关属性来自`persistence.xml`：

```
 <property name="hibernate.dialect" value="org.hibernate.dialect.SQLServer2008Dialect"/>
  <property name="hibernate.show_sql" value="true"/>
  <property name="hibernate.hbm2ddl.auto" value="validate"/>
  <property name="hibernate.connection.driver_class" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/> 
```

为了增加我的挫败感，我在之前的过程中做了一个有点相似的过程，但我找不到导致问题的任何差异。

我已经尝试过针对 MS SQL 2008 Express 的 Hibernate 3.6.10 和 4.1.8。

有任何想法吗？预先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:46:15.963

它不起作用，因为对于您的数据库，AUTO 策略在于依赖数据库来生成 ID。表的 ID 列应该是自增列，或者你应该改变 ID 生成策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-26T09:12:42.867

您已经通过输入选择查询手动创建了表，因此休眠不知道生成的顺序按名称创建序列`hibernate_sequence`

```
CREATE SEQUENCE hibernate_sequence
start with 1
increment by 1
minvalue your_min_value
maxvalue your_max_value
cycle; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-02T15:18:36.330

如果您使用 MsSQL，您应该将所有注释放在 getter 方法之上......有时休眠会忽略上面定义的变量（主要是 MsSQL）的注释......

# ruby-on-rails - 如何创建多个复选框并将它们附加到编辑或删除等控制器操作？

> ID：14123922
> 
> 赞同：1
> 
> 时间：2013-01-02T14:38:21.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我创建了一个脚手架 Phone 并且 index.html.erb 显示了一个简单的表格，其中包含电话列表和编辑/删除选项。现在我想添加 jquery 复选框，以便进行批量删除或移动操作。[在此处](http://i.imgur.com/UP0vw.png)查看附件图片

有人可以给我关于如何做的任何想法/指示吗？

编辑 - 这是 index.html.erb 文件

```
<% @phones.each do |phone| %>
  <tr> 
    <td><%= phone.model %></td -->
    <td><%= phone.type %></td>
  </tr>
<% end %> 
```

这里没有表格，所以我不确定我可以使用 form_tag 助手还是我混淆了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:51:44.927

这将是一个起点，一个带有复选框的表单。

```
<%= form_tag(:controller => "phone", :action => "bulk_update", :method => "PUT") %>
 <%= check_box_tag(:blackberry) %>
 <%= label_tag(:pet_dog, "Blackberry") %>
 <%= check_box_tag(:Nokia) %>
 <%= label_tag(:pet_cat, "Nokia") %>
 <%= submit_tag("Update") %>
<% end %> 
```

然后是一个名为 bulk_update 的控制器操作，您可以根据已提交的内容删除/更新记录。

编辑：您还需要为此在 routes.rb 中创建一条路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:03:11.137

将表格包裹在表单助手中。

```
<%= form_tag foo_path do %>
  # ...
  <% @phones.each do |phone| %>
    <tr>
      <td><%= check_box_tag "selected[]", phone.id %></td>
      <td><%= phone.model %></td>
      <td><%= phone.type %></td>
    </tr>
  <% end %>
  # ...

  <%= button_tag "Do something" %>
<% end %> 
```

这将创建一个表单，表格的每一行都有一个复选框。替换`foo_path`为您要使用的路由助手。所选复选框的值将传递给数组中的控制器操作`params[:selected]`，您可以在其中随意使用它们。每个复选框的值将是`id`对应`phone`对象的值。

# java - JQuery EasyUI TreeGrid 动态数据加载

> ID：14123923
> 
> 赞同：0
> 
> 时间：2013-01-02T14:38:24.677
> 
> 标签：java, jquery, json, jquery-easyui

我是 jQuery 新手，不太确定如何执行以下操作：

我正在使用 EasyUI TreeGrid 并希望显示动态数据，而不是提供来自 .json 文件的静态数据。目前，我使用的代码如下：

```
$(function(){
        $('#test').treegrid({
              url:'treegrid_data.json', 
```

等等。相反，有什么方法可以直接传递 ArrayList 或 bean 对象或其他东西吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T11:54:17.100

而不是获取静态 json 文件.. 将 url 指向您获得动态值的页面.. 说 dynamic.php

```
 url:'dynamic.php',
 .... 
```

做你的东西，比如mysql connect..或者在dynamic.php中获取动态数据并将其作为json返回......

**动态的.php**

```
//do your stuff like getting dynamic datas in array..

$dynamicarray= $yourDynamicDataArray..
echo json_encode($dynamicarray); 
```

这应该做...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T07:02:25.080

想通了...而不是指向静态json文件，将url指定为`url: 'dynamic.jsp'`或`url: 'dynamic.java'`分别指向jsp或servlet（因为我们正在开发Web应用程序）。在该页面中，只需将 json 字符串作为属性获取并使用`out.println(jsonString)`. 不要包含任何 HTML 标签，否则您将无法获得所需的输出。

# ios - viewWillAppear 中长时间运行的任务的合适 GCD 模式是什么？

> ID：14123926
> 
> 赞同：0
> 
> 时间：2013-01-02T14:38:27.770
> 
> 标签：ios, grand-central-dispatch, ui-thread

我有一些长时间运行的任务（IE 从数据库中检索复杂数据），我需要在我的视图出现时运行这些任务。我知道出于性能原因，我想将长时间运行的任务从主线程中移除。我也知道我必须回到主线程来做任何与 UI 相关的事情。我正在尝试找出正确的 GCD 模式来实现这一点。从我在 GCD 文档中看到的内容来看，这似乎是做事的“正确”方式，但我很好奇人们是否发现另一种模式更有用：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

     // Add long running code for off the UI thread here.  

     dispatch_async(dispatch_get_main_queue(), ^{

          // Add UI updating code here back on the UI thread.

     });
}); 
```

我基本上是说异步（IE不阻塞UI线程）去一个单独的线程，做一些事情，然后回到主线程并更新UI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:46:22.000

你的方法很好。我能看到的唯一缺点是您无法取消长时间运行的操作。这可能导致内存和其他资源拥塞。

# c++ - 修改后的 Bessel 函数的精确计算 - 在 CUDA 中使用 netlib Fortran 例程？

> ID：14123929
> 
> 赞同：4
> 
> 时间：2013-01-02T14:38:36.220
> 
> 标签：c++, cuda, fortran

我正在处理在 CUDA 中准确计算零阶 I0 的修正贝塞尔函数的问题。

很长一段时间以来，我一直根据论文使用有理切比雪夫近似

JM Blair，“修正贝塞尔函数 I_0(x) 和 I_1(x) 的有理切比雪夫近似”，数学。计算机，卷。28，名词。126，第 581-583 页，1974 年 4 月。

与 Matlab 提供的结果相比，它给出了 1e-29 量级的平均误差。不幸的是，对于我正在开发的新应用程序来说，这种看似高的准确性已经不够了。

Matlab 使用 DE Amos 开发的 Fortran 例程

Amos, DE，“复杂参数和非负阶贝塞尔函数的子程序包”，桑迪亚国家实验室报告，SAND85-1018，1985 年 5 月。

Amos，DE，“用于复杂参数和非负阶贝塞尔函数的便携式软件包”，反式。数学。软件，1986 年。

可从[netlib/amos](http://www.netlib.org/amos/)网站下载。

有一些方法可以在 C/C++ 代码中使用这些 Fortran 例程，方法是将它们编译到库文件中，然后使用 C/C++ 包装器（例如参见[netlib_wrapping](http://difdop.polytechnique.fr/wiki/index.php/How_to_Bessel_Functions_in_C)）。我想知道是否有任何方法可以从这些 Fortran 例程中生成设备功能，然后由 CUDA 内核调用）。

**有关问题的更多详细信息**

我有两个代码，一个是用 Matlab 编写的，一个是用 CUDA 编写的。两者都通过三个步骤进行操作：

1)*通过修改后的贝塞尔函数 I0 和数据的零填充进行缩放*；

2）*快速傅里叶变换*；

3）*插值*。

我将两者与“精确”结果进行比较：作为步骤 3) 的输出，Matlab 给出的相对均方根误差为 1e-10%，而 CUDA 为 1e-2%，所以我开始调查原因。

两个代码的第一步之间的均方根差，即`100*sqrt(sum(abs(U_Matlab_step_1-U_CUDA_step_1).^2))/sqrt(sum(abs(U_Matlab_step_1).^2))`，是`0%`（`mean(mean(abs(U_Matlab-U_CUDA)))=6e-29`而不是）所以我会说它很好。不幸的是，当我转到第 2 步时，错误上升到`2e-4%`. 最后，如果我将 CUDA 的步骤 2) 与 Matlab 的步骤 1) 的输出一起输入，那么步骤 2) 的 rms 误差变为`1e-14%`，这让我认为不准确的来源是由于第一步，即计算修正的贝塞尔函数。

**对于本次讨论的有趣发展**

查看[NVIDIA 开发者专区论坛](https://devtalk.nvidia.com/default/topic/526734/cuda-programming-and-performance/accurate-computation-of-modified-bessel-functions-using-netlib-fortran-routines-in-cuda-/2/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T21:30:32.527

我想知道这是否可以归因于浮点运算之间的精度差异。

有几件事要检查

1.  Cuda 5 添加了一些新的三角函数，它们可能更好地匹配您的计算格式。此外，我认为自第 4 版以来的 CUDA 数学库具有一些贝塞尔函数，尽管我不确定这是否属实或它们与您的问题有多大关系。
2.  能写个串口CPU版本来测试吗？这将告诉您您的精度问题是否是由于优化导致的，例如使用 64 位与 80 位表示的数字。关闭优化后，您的计算机将主要处理 80 位表示（也许 matlab 会这样做），而打开数学优化后，您的编译器可能会处理不太准确的 64 位表示。这与 x87 和 SSE 之间的差异有关。
3.  不同的计算能力硬件的精度略有不同。例如，compute 2.0 执行的 FMA 更准确，更接近优化的 x86。
4.  是否有物理理由认为 Matlab 是正确的？可能是您的算法在 Matlab 过冲时低于结果。如果 CUDA 对操作进行分组，而 Matlab 没有，则可能会发生这种情况。
5.  如果必须，必须重新创建 Matlab 结果，您可以尝试通过将输出与不同的舍入技巧匹配来调整代码的每个步骤。见表。

圆桌会议

```
addition       | x + y        | __dadd_[rn|rz|ru|rd](x, y)
multiplication | x * y        | __dmul_[rn|rz|ru|rd](x, y)
Fused-Mult-Add | fma(x, y, z) | __fma_[rn|rz|ru|rd](x, y, z)
reciprocal     | 1.0 / x      | __drcp_[rn|rz|ru|rd](x)
division       | x / y        | __ddiv_[rn|rz|ru|rd](x, y)
square root    | sqrt(x)      | __dsqrt_[rn|rz|ru|rd](x)

mode | interpretation
rn   | round to nearest, ties to even
rz   | round towards zero
ru   | round towards +∞
rd   | round towards -∞ 
```

来自[http://developer.download.nvidia.com/assets/cuda/files/NVIDIA-CUDA-Floating-Point.pdf](http://developer.download.nvidia.com/assets/cuda/files/NVIDIA-CUDA-Floating-Point.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:19:03.523

我找到了一个介绍性的技术演讲来回答你的问题。这是[PDF](http://www.nvidia.com/content/PDF/sc_2010/CUDA_Tutorial/SC10_Porting_Large_Fortran_Codebases_to_GPUs.pdf)的链接。所以是的，这是可能的，但是我无法使用上述脚本将旧版 fortran 代码转换为 CUDA C，也许可以直接联系开发人员。

# php - gTLD 的 PHP 正则表达式

> ID：14123930
> 
> 赞同：0
> 
> 时间：2013-01-02T14:38:46.250
> 
> 标签：php, regex, email-validation

> **可能重复：**
> [在 php 中验证电子邮件](https://stackoverflow.com/questions/3499192/validate-email-in-php)
> [如何在 PHP 中验证电子邮件地址](https://stackoverflow.com/questions/12026842/how-to-validate-an-email-address-in-php)

到目前为止我一直在使用

```
preg_match("^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$^",$email) 
```

但是随着新[通用顶级域](http://newgtlds.icann.org/en/)扩展的引入。域扩展部分最多可包含 64 个字符。

同样在新 gTLD 的[国际化域名 (IDN)](http://en.wikipedia.org/wiki/Internationalized_domain_name)的介绍中，您如何使用 PHP 验证电子邮件。

# firefox-addon - 如何在 Mozilla 中更改面板大小，如 chrome 扩展

> ID：14123936
> 
> 赞同：1
> 
> 时间：2013-01-02T14:39:15.947
> 
> 标签：firefox-addon, firefox-addon-sdk

**面板尺寸在基于 SDK 的插件中是固定的**

[我想像这里](https://chrome.google.com/webstore/detail/dictionarycom-extension/epkhgmlgiomobdlofllfmoejgjdojknn?utm_source=chrome-ntp-icon)的chrome字典扩展一样自动更改面板的大小

如果您将在面板中搜索，它将显示内容需求等大小数据。在 Mozilla 面板中，我们只能修复 1 种类型的尺寸，例如`width:400px`等等`height:400px`，但我希望面板尺寸应该基于数据大小，比如 chrome 扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:35:28.850

您可以在 Add-on SDK 中使用一些额外的代码来实现这一点。

在 main.js 中：

```
var panel = require("panel").Panel({
  contentURL: "https://bugzilla.mozilla.org/enter_bug.cgi?product=Add-on%20SDK",
  onShow: function() {
        let worker = tabs.activeTab.attach({
            contentScriptFile: [
                data.url('windowsize.js')
            ]
        });

        worker.port.on('winsize', function(data) {
            panel.resize((data.width-120), (data.height-120));
        });
        worker.port.emit('fetchwinsize');
  }
}); 
```

在内容脚本中：

```
self.port.on('fetchwinsize', function() {
    self.port.emit("winsize", {height: window.innerHeight, width: window.innerWidth});
}); 
```

这是一个工作示例：

[https://builder.addons.mozilla.org/package/150225/latest/](https://builder.addons.mozilla.org/package/150225/latest/)

# dropbox - 私有文件服务器

> ID：14123938
> 
> 赞同：0
> 
> 时间：2013-01-02T14:39:20.103
> 
> 标签：dropbox

对于我们公司，我想在我们自己的服务器上设置文件共享服务，例如 Dropbox，以获取我们的公司信息。

它必须仅适用于我们公司的员工。

请推荐我的软件包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:42:02.267

我建议你试试[http://owncloud.org/](http://owncloud.org/)。

这就是我们在我公司使用的，同步我们的工作文件（类似于 Dropbox 所做的）以及共享文件非常方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T20:37:14.493

看看 arXshare ( [http://www.arxshare.com](http://www.arxshare.com) )。您可以使用 PHP 将它安装在任何服务器上，它易于设置，并且不需要任何数据库并且非常轻量级。此外，它还进行端到端加密，因此如果没有密码，您在服务器上的共享文件将毫无用处。

# android - 为照片添加水印

> ID：14123939
> 
> 赞同：1
> 
> 时间：2013-01-02T14:39:25.830
> 
> 标签：android

哦，我的第一个问题~
这是我的问题。我正在制作一个应用程序来拍照并添加水印。
第一步，当应用程序启动时，我拍了一张（使用最大的分辨率，如2592*1952（5M））。拍照后，我按确定返回我的应用程序视图，应用程序崩溃。
但是，如果我在应用程序启动时以不太大的分辨率（如 3M、2M、1M）拍摄照片，它可以正常工作。然后，第二张照片，分辨率为 5M，无论哪种方式都很有趣。我很困惑。有人能帮帮我吗？这是一些关于解码图像文件的代码。

```
 public void onClick(View v){
                Bitmap bitmap1 =mcreateBitmap(bitmaptmp, "watermark");
//              bitmaptmp=null;
                /* Associate the Bitmap to the ImageView */
                if (bitmap1 != null) {
                    mImageView.setImageBitmap(bitmap1);                 
                }
                mImageView.setVisibility(View.VISIBLE);
//              try {
//                  String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
//                  String imageFileName = JPEG_FILE_PREFIX + timeStamp;
//                  saveMyBitmap(imageFileName,bitmap1);
//                  bitmap1=null;
//              } catch (IOException e) {
//                  e.printStackTrace();
//              }   
            } 
```

公共位图 mcreateBitmap（位图 src，字符串 str）{

```
 Time t = new Time();
    t.setToNow();       
    int w = src.getWidth();
    int h = src.getHeight();

    String mstrTitle = "11："+t.hour + ":" + t.minute + ":" + t.second;
    String xx="34："+x;
    String yy="44："+y;      
    Bitmap bmpTemp = Bitmap.createBitmap(w, h, Config.ARGB_8888);

    Canvas canvas = new Canvas(bmpTemp);
    Paint photoPaint = new Paint(); 
    photoPaint.setDither(true);   
    photoPaint.setFilterBitmap(true);
    Rect s = new Rect(0, 0, src.getWidth(), src.getHeight());
    Rect d = new Rect(0, 0, w, h);
    canvas.drawBitmap(src, s, d, photoPaint);

    String familyName = "new";
    Typeface font = Typeface.create(familyName, Typeface.BOLD);
    photoPaint.setColor(Color.BLUE);
    photoPaint.setTypeface(font);
    photoPaint.setTextSize(18); 
    canvas.drawText(mstrTitle,40, 20, photoPaint);
    canvas.drawText(xx,40, 40, photoPaint);
    canvas.drawText(yy,40, 60, photoPaint);
    canvas.save(Canvas.ALL_SAVE_FLAG);
    canvas.restore();

    return bmpTemp;
} 
```

这是logCat：
01-05 11:25:25.791: E/dalvikvm-heap(11147): 20238336 字节的外部分配对于这个进程来说太大了。01-05 11:25:25.791：E/dalvikvm(11147)：内存不足：堆大小=2923KB，分配=2460KB，位图大小=1235KB，限制=13756KB 01-05 11:25:25.791：E/dalvikvm( 11147）：修剪信息：占用空间=2883KB，允许占用空间=3267KB，修剪=344KB 01-05 11:25:25.791：E/GraphicsJNI（11147）：VM 不允许我们分配 20238336 字节 01-05 11:25： 25.801: D/AndroidRuntime(11147): 关闭 VM 01-05 11:25:25.801: W/dalvikvm(11147): threadid=1: 线程退出未捕获异常 (group=0x40028a00) 01-05 11:25:25.801 : E/AndroidRuntime(11147): 致命异常: main 01-05 11:25:25.801: E/AndroidRuntime(11147): java.lang.OutOfMemoryError: 位图大小超过 VM 预算 01-05 11:25:25.801: E/ AndroidRuntime(11147)：在 android.graphics.Bitmap。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T13:17:44.870

对于解码文件，您应该使用以下方法。您的问题是由于内存问题而发生的。因此，使用以下方法解码您从相机设备捕获的图像（位图）。

```
 package com.example.stackoverflow;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.math.BigInteger;
import java.security.SecureRandom;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.view.View;
import android.widget.Button;
import android.widget.GridView;
import android.widget.ImageView;

public class MyCameraActivity extends Activity {
    private static final int CAMERA_REQUEST = 1888; 

    static String str_Camera_Photo_ImagePath = "";
    private static File f;
    private static int Take_Photo = 2;
    private static String str_randomnumber = "";
    static String str_Camera_Photo_ImageName = "";
    public static String str_SaveFolderName;
    private static File wallpaperDirectory;
    Bitmap bitmap;
    int storeposition = 0;
    public static GridView gridview;
    public static ImageView imageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ccccc);
        this.imageView = (ImageView)this.findViewById(R.id.imageView1);
        Button photoButton = (Button) this.findViewById(R.id.button1);
        photoButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                str_SaveFolderName = Environment
                        .getExternalStorageDirectory()
                        .getAbsolutePath()
                        + "/rajeshsample";
                str_randomnumber = String.valueOf(nextSessionId());
                wallpaperDirectory = new File(str_SaveFolderName);
                if (!wallpaperDirectory.exists())
                    wallpaperDirectory.mkdirs();
                str_Camera_Photo_ImageName = str_randomnumber
                        + ".jpg";
                str_Camera_Photo_ImagePath = str_SaveFolderName
                        + "/" + str_randomnumber + ".jpg";
                System.err.println(" str_Camera_Photo_ImagePath  "
                        + str_Camera_Photo_ImagePath);
                f = new File(str_Camera_Photo_ImagePath);
                startActivityForResult(new Intent(
                        MediaStore.ACTION_IMAGE_CAPTURE).putExtra(
                        MediaStore.EXTRA_OUTPUT, Uri.fromFile(f)),
                        Take_Photo);
                System.err.println("f  " + f);
            }
        });
    }

    // used to create randon numbers
    public String nextSessionId() {
        SecureRandom random = new SecureRandom();
        return new BigInteger(130, random).toString(32);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == Take_Photo) {
            String filePath = null;

            filePath = str_Camera_Photo_ImagePath;
            if (filePath != null) {
                Bitmap faceView = ( new_decode(new File(
                                filePath))); // ========================> good
                                                // lines

                imageView.setImageBitmap(faceView);

            } else {
                bitmap = null;
            }
        }
    } 

    public static Bitmap new_decode(File f) {

        // decode image size

        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        o.inDither = false; // Disable Dithering mode

        o.inPurgeable = true; // Tell to gc that whether it needs free memory,
                                // the Bitmap can be cleared

        o.inInputShareable = true; // Which kind of reference will be used to
                                    // recover the Bitmap data after being
                                    // clear, when it will be used in the future
        try {
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 300;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 1.5 < REQUIRED_SIZE && height_tmp / 1.5 < REQUIRED_SIZE)
                break;
            width_tmp /= 1.5;
            height_tmp /= 1.5;
            scale *= 1.5;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        // o2.inSampleSize=scale;
        o.inDither = false; // Disable Dithering mode

        o.inPurgeable = true; // Tell to gc that whether it needs free memory,
                                // the Bitmap can be cleared

        o.inInputShareable = true; // Which kind of reference will be used to
                                    // recover the Bitmap data after being
                                    // clear, when it will be used in the future
        // return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        try {

//          return BitmapFactory.decodeStream(new FileInputStream(f), null,
//                  null);
            Bitmap bitmap= BitmapFactory.decodeStream(new FileInputStream(f), null, null);
            System.out.println(" IW " + width_tmp);
            System.out.println("IHH " + height_tmp);           
               int iW = width_tmp;
                int iH = height_tmp;

               return Bitmap.createScaledBitmap(bitmap, iW, iH, true);

        } catch (OutOfMemoryError e) {
            // TODO: handle exception
            e.printStackTrace();
            // clearCache();

            // System.out.println("bitmap creating success");
            System.gc();
            return null;
            // System.runFinalization();
            // Runtime.getRuntime().gc();
            // System.gc();
            // decodeFile(f);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return null;
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T05:08:12.937

旧代码：

```
 if ((targetW > 0) || (targetH > 0)) {
        scaleFactor = Math.min(photoW/targetW, photoH/targetH); 
```

新代码：

```
if (photoH > IMAGE_MAX_SIZE || photoW> IMAGE_MAX_SIZE) {
        scaleFactor = (int)Math.pow(2, (int) Math.round(Math.log(IMAGE_MAX_SIZE / (double) Math.max(photoH, photoW)) / Math.log(0.5))); 
```

然后，一切正常。

# ios - 在 coreplot 中启用 x 轴（水平）滚动

> ID：14123949
> 
> 赞同：1
> 
> 时间：2013-01-02T14:40:05.290
> 
> 标签：ios, ios5, ios6, core-plot, bar-chart

我正在使用[此链接](http://github.com/gilthonweapps/CorePlotBarChartExample)中的代码。目前，如果我有 50 个条形列或 150 个条形列，则下面的标签被压缩，我希望在 x 轴上水平滚动而不是压缩 x 轴。

我试过这个：

```
plotSpace.xRange = CPTPlotRangeplotRangeWithLocation:CPTDecimalFromInt(-1)length:CPTDecimalFromInt(50)]; 
```

附加文件中的代码：

```
#import "GraphView.h"

@implementation GraphView

- (void)generateData
{
    NSMutableDictionary *dataTemp = [[NSMutableDictionary alloc] init];

    //Array containing all the dates that will be displayed on the X axis
    dates = [NSArray arrayWithObjects:@"2012-05-01", @"2012-05-02", @"2012-05-03", 
             @"2012-05-04", @"2012-05-05", @"2012-05-06", @"2012-05-07", nil];

    //Dictionary containing the name of the two sets and their associated color
    //used for the demo
    sets = [NSDictionary dictionaryWithObjectsAndKeys:[UIColor blueColor], @"Plot 1",
            [UIColor redColor], @"Plot 2",
            [UIColor greenColor], @"Plot 3", nil];

    //Generate random data for each set of data that will be displayed for each day
    //Numbers between 1 and 10
    for (NSString *date in dates) {
        NSMutableDictionary *dict = [NSMutableDictionary dictionary];
        for (NSString *set in sets) {
            NSNumber *num = [NSNumber numberWithInt:arc4random_uniform(10)+1];
            [dict setObject:num forKey:set];
        }
        [dataTemp setObject:dict forKey:date];
    }

    data = [dataTemp copy];
    [dataTemp release];

    NSLog(@"%@", data);
}

- (void)generateLayout
{
    //Create graph from theme
    graph                               = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
    [graph applyTheme:[CPTTheme themeNamed:kCPTStocksTheme]];
    self.hostedGraph                    = graph;
    graph.plotAreaFrame.masksToBorder   = NO;
    graph.paddingLeft                   = 0.0f;
    graph.paddingTop                    = 0.0f;
    graph.paddingRight                  = 0.0f;
    graph.paddingBottom                 = 0.0f;

    CPTMutableLineStyle *borderLineStyle    = [CPTMutableLineStyle lineStyle];
    borderLineStyle.lineColor               = [CPTColor whiteColor];
    borderLineStyle.lineWidth               = 2.0f;
    graph.plotAreaFrame.borderLineStyle     = borderLineStyle;
    graph.plotAreaFrame.paddingTop          = 10.0;
    graph.plotAreaFrame.paddingRight        = 10.0;
    graph.plotAreaFrame.paddingBottom       = 80.0;
    graph.plotAreaFrame.paddingLeft         = 70.0;

    //Add plot space
    CPTXYPlotSpace *plotSpace       = (CPTXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.delegate              = self;
    plotSpace.yRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(0) 
                                                                   length:CPTDecimalFromInt(10 * sets.count)];
    plotSpace.xRange                = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(-1) 
                                                                   length:CPTDecimalFromInt(8)];

    //Grid line styles
    CPTMutableLineStyle *majorGridLineStyle = [CPTMutableLineStyle lineStyle];
    majorGridLineStyle.lineWidth            = 0.75;
    majorGridLineStyle.lineColor            = [[CPTColor whiteColor] colorWithAlphaComponent:0.1];
    CPTMutableLineStyle *minorGridLineStyle = [CPTMutableLineStyle lineStyle];
    minorGridLineStyle.lineWidth            = 0.25;
    minorGridLineStyle.lineColor            = [[CPTColor whiteColor] colorWithAlphaComponent:0.1];

    //Axes
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;

    //X axis
    CPTXYAxis *x                    = axisSet.xAxis;
    x.orthogonalCoordinateDecimal   = CPTDecimalFromInt(0);
    x.majorIntervalLength           = CPTDecimalFromInt(1);
    x.minorTicksPerInterval         = 0;
    x.labelingPolicy                = CPTAxisLabelingPolicyNone;
    x.majorGridLineStyle            = majorGridLineStyle;
    x.axisConstraints               = [CPTConstraints constraintWithLowerOffset:0.0];

    //X labels
    int labelLocations = 0;
    NSMutableArray *customXLabels = [NSMutableArray array];
    for (NSString *day in dates) {
        CPTAxisLabel *newLabel = [[CPTAxisLabel alloc] initWithText:day textStyle:x.labelTextStyle];
        newLabel.tickLocation   = [[NSNumber numberWithInt:labelLocations] decimalValue];
        newLabel.offset         = x.labelOffset + x.majorTickLength;
        newLabel.rotation       = M_PI / 4;
        [customXLabels addObject:newLabel];
        labelLocations++;
        [newLabel release];
    }
    x.axisLabels                    = [NSSet setWithArray:customXLabels];

    //Y axis
    CPTXYAxis *y            = axisSet.yAxis;
    y.title                 = @"Value";
    y.titleOffset           = 50.0f;
    y.labelingPolicy        = CPTAxisLabelingPolicyAutomatic;
    y.majorGridLineStyle    = majorGridLineStyle;
    y.minorGridLineStyle    = minorGridLineStyle;
    y.axisConstraints       = [CPTConstraints constraintWithLowerOffset:0.0]; 

    //Create a bar line style
    CPTMutableLineStyle *barLineStyle   = [[[CPTMutableLineStyle alloc] init] autorelease];
    barLineStyle.lineWidth              = 1.0;
    barLineStyle.lineColor              = [CPTColor whiteColor];
    CPTMutableTextStyle *whiteTextStyle = [CPTMutableTextStyle textStyle];
    whiteTextStyle.color                = [CPTColor whiteColor];

    //Plot
    BOOL firstPlot = YES;
    for (NSString *set in [[sets allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]) {
        CPTBarPlot *plot        = [CPTBarPlot tubularBarPlotWithColor:[CPTColor blueColor] horizontalBars:NO];
        plot.lineStyle          = barLineStyle;
        CGColorRef color        = ((UIColor *)[sets objectForKey:set]).CGColor;
        plot.fill               = [CPTFill fillWithColor:[CPTColor colorWithCGColor:color]];
        if (firstPlot) {
            plot.barBasesVary   = NO;
            firstPlot           = NO;
        } else {
            plot.barBasesVary   = YES;
        }
        plot.barWidth           = CPTDecimalFromFloat(0.8f);
        plot.barsAreHorizontal  = NO;
        plot.dataSource         = self;
        plot.identifier         = set;
        [graph addPlot:plot toPlotSpace:plotSpace];
    }

    //Add legend
    CPTLegend *theLegend      = [CPTLegend legendWithGraph:graph];
    theLegend.numberOfRows    = sets.count;
    theLegend.fill            = [CPTFill fillWithColor:[CPTColor colorWithGenericGray:0.15]];
    theLegend.borderLineStyle = barLineStyle;
    theLegend.cornerRadius    = 10.0;
    theLegend.swatchSize      = CGSizeMake(15.0, 15.0);
    whiteTextStyle.fontSize   = 13.0;
    theLegend.textStyle       = whiteTextStyle;
    theLegend.rowMargin       = 5.0;
    theLegend.paddingLeft     = 10.0;
    theLegend.paddingTop      = 10.0;
    theLegend.paddingRight    = 10.0;
    theLegend.paddingBottom   = 10.0;
    graph.legend              = theLegend;
    graph.legendAnchor        = CPTRectAnchorTopLeft;
    graph.legendDisplacement  = CGPointMake(80.0, -10.0);
}

- (void)createGraph
{
    //Generate data
    [self generateData];

    //Generate layout
    [self generateLayout];
}

- (void)dealloc
{
    [data release];
    [super dealloc];
}

#pragma mark - CPTPlotDataSource methods

- (NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
    return dates.count;
}

- (double)doubleForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    double num = NAN;

    //X Value
    if (fieldEnum == 0) {
        num = index;
    }

    else {
        double offset = 0;
        if (((CPTBarPlot *)plot).barBasesVary) {
            for (NSString *set in [[sets allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]) {
                if ([plot.identifier isEqual:set]) {
                    break;
                }
                offset += [[[data objectForKey:[dates objectAtIndex:index]] objectForKey:set] doubleValue];
            }
        }

        //Y Value
        if (fieldEnum == 1) {
            num = [[[data objectForKey:[dates objectAtIndex:index]] objectForKey:plot.identifier] doubleValue] + offset;
        }

        //Offset for stacked bar
        else {
            num = offset;
        }
    }

    //NSLog(@"%@ - %d - %d - %f", plot.identifier, index, fieldEnum, num);

    return num;
}

#pragma mark - CPTBarPlotDelegate methods
-(void)barPlot:(CPTBarPlot *)plot barWasSelectedAtRecordIndex:(NSUInteger)index {

    NSLog(@"barWasSelectedAtRecordIndex %d", index);
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T22:20:26.803

要滚动，您需要将绘图空间上的 globalXRange 设置为整个范围，并将 xRange 设置为可见区域。

例如 0-150 的 globalXRange 和 0-50 的 xRange。然后您可以向上滚动查看 51-150 范围。

# php - EAV 表上的学说 ORM

> ID：14123953
> 
> 赞同：9
> 
> 时间：2013-01-02T14:40:06.487
> 
> 标签：php, orm, doctrine, entity-attribute-value

我正计划创建我的应用程序并为模型使用 ORM，但问题是，数据库的一部分使用实体-属性-值表。

我非常喜欢 Doctrine ORM，但我不知道是否有可能创建看起来像任何普通学说实体的类，而实际上连接到的表是 EAV 样式。

是否可以在这方面使用 Doctrine，如果可以，如何使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:19:20.923

绝对有可能：

有这样的关系：对象（一对多）-> AttributeValue -> 多对一-> AttributeType

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-21T21:46:06.477

鉴于[EAV](https://de.wikipedia.org/w/index.php?title=Entity-Attribute-Value&action=edit&redlink=1)`entity` ，如何建立和`attribute`使用学说之间的关系似乎是显而易见的。在最复杂的情​​况下，我们处理[多对多](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#many-to-many-unidirectional)关系。

所以假设我们想将一个属性映射`Name`到一个实体`User`。假设一个用户只有一个名字并且每个名字都属于一个用户，这个链接可以使用[一对一](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-one-unidirectional)关系存档

`attribute`但是如何建模和之间的关系`value`？问题是值可以是不同的类型，甚至需要不同数量的字段来保存它们的信息。

考虑属性`name`和`phone_number`。虽然名称可能由字符串表示，但电话号码可能需要一个整数。或者甚至需要在单独的字段中不仅有号码而且还需要区号。

因为 EAV 需要非常灵活的值表示，所以不可能将它们全部存储在数据库表的同一字段中（忽略 blob、数据序列化等）。因此，大多数 EAV 实现使用不同的表来表示不同的值类型。

为了达到这种灵活性，学说特征[继承映射](http://doctrine-orm.readthedocs.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#)。它基本上允许您扩展学说实体。这样做你`discriminator`为你的实体的每个子类型指定一个：

```
/**
  * @Entity
  * @InheritanceType("JOINED")
  * @DiscriminatorColumn(name="value_type", type="string")
  * @DiscriminatorMap({"name" = "Name", "phone" = "PhoneNumber"})
*/
class Value
{
// ...
}

/** @Entity */
class Name extends Value
{
// ...
}

/** @Entity */
class PhoneNumber extends Value
{
// ...
} 
```

该类`Value`为所有值提供通用实现，即 id。每个子类（即`Name`和`PhoneNumber`）通过它们的特定值扩展这些公共值，例如附加字段。

*   `@DiscriminatorColumn`定义了父关系中存储值类型的列。
*   教义使用将`@DiscriminatorMap`类型从 映射`@DiscriminatorColumn`到这些类之一。

`attribute`和之间的关系`value`可以指定给父类。[然后从属性调用值将获取所有类型的值，这些值可以在运行时使用例如instanceof](http://php.net/manual/en/language.operators.type.php)进行过滤（和处理）。

# c++ - 具有不同参数的同名宏

> ID：14123954
> 
> 赞同：13
> 
> 时间：2013-01-02T14:40:11.783
> 
> 标签：c++, visual-c++, macros

是否可以有 2 个同名但参数不同的宏？像这样的东西：

```
#define FI(value) do {l<<value;  Doit(l); } while(0)
#define FI(value, level) do {l<<value ; Doit(l,level); } while(0) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T14:42:08.030

这不可能。
不能重新定义符号名称。与函数不同，宏不能重载。逻辑上认为宏是用于纯文本替换的，那么如何为同一个实体替换两个不同的东西呢？

**另一种更好的解决方案：**
您可以编写一个*[内联函数](http://www.parashift.com/c++-faq/inline-functions.html)*来实现相同的结果。它为您提供了*类型*检查的额外优势，并使您免于宏的模糊副作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-16T20:37:27.970

这会奏效。

```
#define FI(value, ...) FI_(value, ##__VA_ARGS__, 2, 1)
#define FI_(value, level, n, ...) FI##n(value, level)
#define FI1(value, ...) do {l << value; Doit(l);} while (0)
#define FI2(value, level) do {l << value; Doit(l, level);} while (0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T14:47:42.397

实际上这是可能的。但是，它会导致*编译器*关于重新定义的警告。

有关更多详细信息，请参见：http: [//efesx.com/2010/08/31/overloading-macros/](http://efesx.com/2010/08/31/overloading-macros/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T14:59:29.553

在这种情况下，您确实应该使用内联函数。对您正在使用的类型一无所知，可能的实现可能如下所示：

```
template<typename T>
inline void fi(T & l, const T & value) {
   l << value;
   Doit(l);
}

template<typename T>
inline void fi(T & l, const T & value, const T & level) {
   l << value;
   Doit(l, level);
} 
```

如果您遇到必须坚持使用宏的情况，您将不得不解决这个限制，即它们不能被重载，至少不是按照标准。为了“重载”它们，我们只需在宏名称上写上参数的数量，这是一种常见的做法（事实上，即使是 OpenGL 库也使用这种方法来“重载”C 函数）。

```
#define FI1(value) do {l<<value;  Doit(l); } while(0)
#define FI2(value, level) do {l<<value ; Doit(l,level); } while(0) 
```

# actionscript-3 - Flex Mobile：滑动和切换手势混淆

> ID：14123956
> 
> 赞同：0
> 
> 时间：2013-01-02T14:40:12.710
> 
> 标签：actionscript-3, apache-flex, swipe, gestures, flex4.6

我正在尝试在我的移动应用程序中使用滑动手势在视图之间移动，并按照此处的教程进行操作：

[http://www.flex-blog.com/using-swipe-gestures-in-mobile-flex-application-air-for-android/](http://www.flex-blog.com/using-swipe-gestures-in-mobile-flex-application-air-for-android/)

它可以工作，但是：我的视图中有许多 ToggleSwitch 组件，iOS 将 Toggle Switch 按钮滑动与滑动混淆：每次我移动开关时，它都会将我带到上一个/下一个视图。

我曾尝试将gestureSwipe="donothing()" 添加到toggleswitch 和toggleswitch 容器中，但这并没有什么不同。

我正在使用 FB 4.6 并在 iOS 5.0.1 上进行测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T20:34:56.833

使用这样的东西：

```
if (event.target is ToggleSwitch) {
    //do nothing
} 
else 
{
    if (event.offsetX == 1) {
        navigator.popView();
    } else {
        navigator.pushView();
    }
} 
```

基本上，您需要检查并查看哪个“目标”（即事件源自的组件）不是 ToggleSwitch 或任何其他组件。

**编辑：它可能是 currentTarget 而不是 target，但我很确定它是 target。**

# service - jax-ws 改变肥皂响应

> ID：14123957
> 
> 赞同：0
> 
> 时间：2013-01-02T14:40:13.783
> 
> 标签：service, web, jax-ws

> **可能重复：**
> [使用 JAX-WS 修改 Web 服务的响应](https://stackoverflow.com/questions/14140583/modify-response-of-web-service-with-jax-ws)

我正在使用 jax-ws 实现 Web 服务，我想自定义肥皂响应

```
response now : 
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <S:Body>
      <ns2:GetAmountResponse xmlns:ns2="http://ws.dsi.otn.com/dab">
         <etat>0</etat>
         <montant>500.0</montant>
      </ns2:GetAmountResponse>
   </S:Body>
</S:Envelope> 
```

自定义此响应：

```
<soap:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <GetAmountResponse xmlns="http://ws.dsi.otn.com/dab">
         <etat>0</etat>
         <montant>500.0</montant>
      </GetAmountResponse>
   </soap:Body>
</soap:Envelope> 
```

# php - PHP 和 str_replace 与正则表达式（删除多个连续的空白）

> ID：14123959
> 
> 赞同：1
> 
> 时间：2013-01-02T14:40:22.270
> 
> 标签：php, regex

> **可能重复：**
> [php regex：删除超过双倍的空间](https://stackoverflow.com/questions/2277053/php-regex-removing-more-than-double-space)

我有一个这样的字符串：

```
$a = "aaa    bbb"; 
```

而且我想删除任何连续的空格（如果某处有多个空格，则应将其删除）。

因此，$a 将变为

```
 "aaa bbb". 
```

我尝试过：

```
$a = preg_replace("/\s{2,}/g","",$a); 
```

并且

```
$a = preg_replace("\s{2,}","",$a); 
```

但我总是得到一个空值。

有什么想法，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T14:41:21.833

```
$a = preg_replace('/\s{2,}/',' ',$a); 
```

`g`不是[有效的修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)。这是暗示的。您还想用一个空格替换多个空格。

**注意：**这不会替换单个*空白*字符。考虑将其用于制表符或新行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:43:57.487

干得好：

```
$a = preg_replace("/\s{2,}/"," ",$a); 
```

将每个空格替换为一个以上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:43:08.013

请试试这个看看

```
$a = preg_replace('/\s\s+/', ' ', $a); 
```

希望它可以帮助你我已经测试过它和它的工作

# xml - AS3 无法加载 XML 文件

> ID：14123967
> 
> 赞同：1
> 
> 时间：2013-01-02T14:41:00.180
> 
> 标签：xml, actionscript-3

我正在使用 AS3 在 flash builder 上制作一个测验应用程序。

我想加载一个 XML 文件来获取我的问题。但我想我无法加载我的 XML 文件。我google了很多。我搜索了论坛。但没有任何效果。我只是在这里看不到我的错误。

当我单击我想在舞台上查看的按钮时，我的 XML 文件是否已加载。但在这种情况下，我的舞台没有任何价值。

测验.as

```
package
{   
    [SWF('width'= 800, 'height' = 600, 'frameRate'=40)]
    public class Quiz extends Sprite
    {
                // gloabal container 
        public static var container:Sprite = new Sprite();
        // button object 
        public var btnMulti:MyButton = new MyButton();

        public function Quiz()
        {
            init();
        }

        private function init():void {
            addChild(container);
            makeMenu();
        }

        private function makeMenu():void {
            btnMulti.buttonText = "multipleChoice";
            btnMulti.x = 50;
            btnMulti.y = 20;
            btnMulti.addEventListener(MouseEvent.CLICK, multiHandler);
                        // add button to the stage
            container.addChild(btnMulti);
        }

        private function multiHandler(e:MouseEvent):void {
            // if button clicked make a Question object
            var q:Question = new Question();

            // get the value
            var questionText:String = q.getter;

            // print the value in a textfield on the stage
            var tField:TextField = new TextField();
            tField.text = questionText;
            container.addChild(tField);
        }

    }
} 
```

问题.as

```
public class Question extends Sprite
    {
        private var test:String;    

        public function Question()
        {
            // xml
            var urlReq:URLRequest = new URLRequest("./files/multiplechoice.xml"); 
            var urlLoad:URLLoader = new URLLoader();
            urlLoad.addEventListener(Event.COMPLETE, textLoaded);
            urlLoad.load(urlReq); 
        }

        private function textLoaded(e:Event):void {
            XML.ignoreWhitespace = true;
            var xml:XML = new XML(e.target.data);

            // check if loaded
            test = "xml loaded";
        }

        // getter
        public function get getter():String {
            return test.questionText;
        }
    } 
```

多项选择.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<multipleChoice>
    <questionSet>
        <question>Question 1</question>
        <answer correct="yes">Answer 1</answer>
        <answer>Answer 2</answer>
        <answer>Answer 3</answer>
        <answer>Answer 4</answer>
    </questionSet>

    <questionSet>
        <question>Question 2</question>
        <answer correct="yes">Answer 1</answer>
        <answer>Answer 2</answer>
        <answer>Answer 3</answer>
        <answer>Answer 4</answer>
    </questionSet>

    <questionSet>
        <question>Question 3</question>
        <answer correct="yes">Answer 1</answer>
        <answer>Answer 2</answer>
        <answer>Answer 3</answer>
        <answer>Answer 4</answer>
    </questionSet>
</multipleChoice> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:59:08.010

问题是你有一个 textLoaded 的回调，但在你调用 getter() 之前你没有等待它加载。先试试这个：

```
public function get getter():String {
    if(test) {
        return test.questionText;
    } else {
        return "Data not available";
    } 
```

但您也可以将函数引用传递给 Question 类，以便在加载时将值传回。您可能需要考虑在任何情况下预加载问题。

```
public class Question extends Sprite
{
    private var test:String;
    private var callback:Function; 

    public function Question(_callback:Function)
    {
        this.callback = _callback;
        // xml
        var urlReq:URLRequest = new URLRequest("./files/multiplechoice.xml"); 
        var urlLoad:URLLoader = new URLLoader();
        urlLoad.addEventListener(Event.COMPLETE, textLoaded);
        urlLoad.load(urlReq); 
    }

    private function textLoaded(e:Event):void {
        urlLoad.removeEventListener(Event.COMPLETE, textLoaded);

        XML.ignoreWhitespace = true;
        var xml:XML = new XML(e.target.data);

        // check if loaded
        this.callback(xml);
    }
}

// in the main class
    private function multiHandler(e:MouseEvent):void {
        // if button clicked make a Question object
        var q:Question = new Question(this.questionCallback);

    }

    public function questionCallback(xml:XML):void
        // get the value from the xml

        var tField:TextField = new TextField();
        tField.text = <<parsed xml....>>;
        container.addChild(tField);
    } 
```

您可能希望创建文本字段和问题类属性，而不是将范围保持在函数的本地，以便您也可以访问它们。

# php - fgetcsv 不适用于雅虎股票 csv？

> ID：14123983
> 
> 赞同：1
> 
> 时间：2013-01-02T14:42:18.843
> 
> 标签：php, csv, yahoo-finance

![在此处输入图像描述](../Images/e3f99608a6e20e3978fecdb511105a6e.png)我想阅读我从雅虎加载的 csv 文件，其中包含一些股票数据。在我使用此代码前 2 天：

```
$ticker_url="";
for($i=0;$i<200;$i++){
    if($i==199){
            // $ticker=array with all 200 stock ticker....
        $ticker_url=$ticker_url.$ticker[$i];
    }else{
        $ticker_url=$ticker_url.$ticker[$i]."+";
    }
}

$url="http://finance.yahoo.com/d/quotes.csv?s='$ticker_url'&f=snxab2l1va2p2opm3m4ghd1t1=.csv";
$filehandle=fopen($url,"r");
while(!feof($filehandle)){

    $line=fgetcsv($filehandle,1024);
    echo $line[0]."<br/>";

}
fclose($filehandle); 
```

但现在它不再起作用了。$url 工作正常没有问题。但是用 fgetcsv hust 循环读取行 6 次并且其中没有任何元素......

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:49:44.080

```
$ticker = array('GOOG', 'ACE', 'FDX'); // test tickers

$ticker_url = '';

$count = count($ticker);
for ($i = 0; $i < $count; $i++)
{
    $ticker_url .= (0 === $i)
        ? $ticker[$i]
        : '+' . $ticker[$i];
}

$url = 'http://finance.yahoo.com/d/quotes.csv?s=' . $ticker_url . '&f=snxab2l1va2p2opm3m4ghd1t1=.csv';

ini_set('auto_detect_line_endings', TRUE);
if (($handle = fopen($url, 'r')) !== FALSE) 
{
    while (($data = fgetcsv($handle, 1024, ',', '"')) !== FALSE) 
    {
        print_r($data);
    }
    fclose($handle);
} 
```

输出：

```
Array
(
    [0] => GOOG
    [1] => Google Inc.
    [2] => NasdaqNM
    [3] => 719.55
    [4] => 719.55
    [5] => 719.49
    [6] => 912426
    [7] => 2583440
    [8] => +1.71%
    [9] => 720.03
    [10] => 707.38
    [11] => 688.697
    [12] => 669.546
    [13] => 718.00
    [14] => 727.00
    [15] => 1/2/2013
    [16] => 10:27am
    [17] => GOOG
    [18] => GOOG
    [19] => +12.11 - +1.71%
    [20] => GOOG
    [21] => 912426
)
Array
(
    [0] => ACE
    [1] => Ace Limited Commo
    [2] => NYSE
    [3] => N/A
    [4] => 80.91
    [5] => 80.91
    [6] => 279438
    [7] => 1476060
    [8] => +1.39%
    [9] => 81.20
    [10] => 79.80
    [11] => 79.4015
    [12] => 76.014
    [13] => 80.56
    [14] => 81.58
    [15] => 1/2/2013
    [16] => 10:28am
    [17] => ACE
    [18] => ACE
    [19] => +1.11 - +1.39%
    [20] => ACE
    [21] => 279438
)
Array
(
    [0] => FDX
    [1] => FedEx Corporation
    [2] => NYSE
    [3] => N/A
    [4] => 94.59
    [5] => 94.59
    [6] => 594530
    [7] => 2092040
    [8] => +3.13%
    [9] => 93.46
    [10] => 91.72
    [11] => 89.7738
    [12] => 89.4001
    [13] => 93.37
    [14] => 95.19
    [15] => 1/2/2013
    [16] => 10:28am
    [17] => FDX
    [18] => FDX
    [19] => +2.87 - +3.13%
    [20] => FDX
    [21] => 594530
) 
```

* * *

上述替代方法似乎不适用于您的服务器：

```
$ticker_url = '';

$count = count($ticker);
for ($i = 0; $i < $count; $i++)
{
    $ticker_url .= (0 === $i)
        ? $ticker[$i]
        : '+' . $ticker[$i];
}

$url = 'http://finance.yahoo.com/d/quotes.csv?s=' . $ticker_url . '&f=snxab2l1va2p2opm3m4ghd1t1=.csv';
$csv = explode("\n", file_get_contents($url));
unset($csv[count($csv) - 1]); // remove empty row

foreach ($csv as $line)
{
    $data = str_getcsv($line);
    print_r($data);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T14:45:44.403

添加一个`echo $url;`，查看输出，然后...查看 fgetcsv 的其他参数：http://php.net/manual/en/function.fgetcsv.php [（](http://php.net/manual/en/function.fgetcsv.php)分隔符和附件）。

# php - 如何在不使用变量的情况下通过 URL 发送数据？

> ID：14123986
> 
> 赞同：1
> 
> 时间：2013-01-02T14:42:24.280
> 
> 标签：php, hyperlink

我们通常使用 URL 中的变量将数据发送到另一个页面。一个例子是`http://www.somelink.com?var1=data1&var2=data2`。`$_GET['var1']`我们使用和接收数据`$_GET['var2']`。

如何使用标准斜杠格式实现这一点。我需要的类似于`http://www.somelink.com/var1-data1-var2-data2`

看到这个链接我就有了这个想法：`http://freelivebox.eu/matchid-130102021307-link-5-watch-Youzhny---Davydenko-(ATP-Doha).html`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T14:56:09.980

您可以使用 .htaccess 文件来完成，如下所示

```
RewriteRule ^var1-([a-zA-Z0-9-]+)$-var2-([a-zA-Z0-9-]+)$  youpage.php?var1=$1&var2=$2; 
```

或者您可以将其拆分为正则表达式-

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T14:45:31.380

我能想到的最好方法是使用某种正则表达式匹配，所有这些都通过单个 PHP 路由文件进行路由。

或者通过使用 Apache 的重写功能。

# java - Java WS 不会启动应用程序，直到其他正在运行的 javaws 死实例被杀死

> ID：14123989
> 
> 赞同：3
> 
> 时间：2013-01-02T14:42:34.217
> 
> 标签：java, jnlp, java-web-start

我正在使用 Java 开发应用程序并使用 Java Web Start 部署它们。我正在使用 Mac OS 进行开发，并在 Windows XP 和 7 下进行测试。
我遇到了一个奇怪的问题，似乎只是在 7 上。

该`javaws.exe`过程以某种方式失败，我无法再次启动应用程序。每次我单击 JNLP 创建的桌面图标时，它都会生成另一个`javaws.exe`进程，但没有任何反应，我的代码不会运行，甚至`public static void main`程序入口点的第一行也不会运行。

我尝试从命令行启动它，但没有收到任何日志或任何可以帮助我解决此问题的错误消息。
我试图启动[另一个 JNLP](http://docs.oracle.com/javase/tutorial/deployment/webstart/deploying.html)，它就像一个魅力！

杀死所有`javaws.exe`正在运行的实例可以解决问题，但我不能指望我的客户这样做。

所以这意味着不知何故我的应用程序出现了问题，导致 java 失败。
我刚刚遇到这个：应用程序启动了，我点击了红叉关闭它，然后再次打开它（我更改了服务器端的 jars 和 jnlp 文件）。它没有打开，在我杀死所有`javaws.exe`实例之前我无法再次打开它。

这里有一些细节：

*   在 Mac OS X.7 下开发
*   在 Windows 7 下测试
*   使用 Java 7 运行
*   应用程序是用 Eclipse 开发的，有一个 SWT UI 和其他几个第三方库
*   [我从Java 控制面板项](http://www.robonekp.com/2007/02/how-do-i-enable-java-tracing-on-client.html)打开了所有日志记录

这是我运行上述 JNLP 时弹出的 Java 控制台内容：

```
Java Web Start 10.9.2.05
Using JRE version 1.7.0_09-b05 Java HotSpot(TM) Client VM
User home directory = C:\Users\Bicou
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
m:   print memory usage
o:   trigger logging
p:   reload proxy configuration
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
0-5: set trace level to <n>
----------------------------------------------------
    Match: beginTraversal
Match: digest selected JREDesc: JREDesc[version 1.6+, heap=-1--1, args=null, href=http://java.sun.com/products/autodl/j2se, sel=false, null, null], JREInfo: JREInfo for index 0:
    platform is: 1.7
    product is: 1.7.0_09
    location is: http://java.sun.com/products/autodl/j2se
    path is: C:\Program Files (x86)\Java\jre7\bin\javaw.exe
    args is: null
    native platform is: Windows, x86 [ x86, 32bit ]
    JavaFX runtime is: JavaFX 2.2.3 found at C:\Program Files (x86)\Java\jre7\
    enabled is: true
    registered is: true
    system is: true

    Match: ignoring maxHeap: -1
    Match: ignoring InitHeap: -1
    Match: digesting vmargs: null
    Match: digested vmargs: [JVMParameters: isSecure: true, args: ]
    Match: JVM args after accumulation: [JVMParameters: isSecure: true, args: ]
    Match: digest LaunchDesc: http://docs.oracle.com/javase/tutorialJWS/deployment/webstart/ex6/webstart_ComponentArch_DynamicTreeDemo/dynamictree-webstart.jnlp
    Match: digest properties: []
    Match: JVM args: [JVMParameters: isSecure: true, args: ]
    Match: endTraversal ..
    Match: JVM args final: 
    Match: Running JREInfo Version    match: 1.7.0.09 == 1.7.0.09
     Match: Running JVM args match: have:<>  satisfy want:<> 
```

我的 JNLP：

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0+"
    codebase="http://my.url/"
    href="UpCab.jnlp">
    <information>
        <title>UpCab</title>
        <vendor>Benoit Duffez</vendor>
        <homepage href="http://my.url/" />
        <description>Logiciel de gestion de cabinet</description>
        <icon href="icon.png" kind="shortcut" />
        <icon href="splash.png" kind="splash" />
        <offline-allowed />
        <shortcut online="true" install="true">
            <desktop />
        </shortcut>
    </information>

    <security>
        <all-permissions />
    </security>

    <resources>
        <jar href="opencsv-2.3.jar" />
        <jar href="iText-2.1.7.jar" />
        <jar href="iTextRTF.jar" />
        <jar href="sqlite-jdbc-3.7.2.jar" />
        <jar href="commons-logging-1.1.1.jar" />
        <jar href="httpclient-4.2.jar" />
        <jar href="upcab.jar" />
        <jar href="httpcore-4.2.jar" />
        <jar href="jna.jar" />
        <jar href="platform.jar" />
    </resources>

    <resources os="Windows" arch="x86">
        <j2se version="1.6+" />
        <jar href="swt-win32-x86.jar" />
    </resources>

    <resources os="Windows" arch="x86_64">
        <j2se version="1.6+" />
        <jar href="swt-win32-x86_64.jar" />
    </resources>

    <resources os="Windows" arch="amd64">
        <j2se version="1.6+" />
        <jar href="swt-win32-x86_64.jar" />
    </resources>

    <resources os="Mac" arch="x86_64">
        <j2se version="1.6+" java-vm-args="-XstartOnFirstThread" />
        <nativelib href="swt-mac-x86_64.jar" />
    </resources>

    <application-desc main-class="my.full.pkg.Main" />
</jnlp> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:08:37.417

已启动[SingleInstanceService](http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/jnlp/javax/jnlp/SingleInstanceService.html)的崩溃 JavaWebStart 应用程序可能会使 SingleInstanceService 继续运行，这将继续尝试再次启动同一应用程序。建议向侦听器添加日志消息。请注意，日志消息将显示在第一个应用程序的控制台中，而不是刚刚启动的那个。

```
private class SingleInstance implements SingleInstanceListener {
    @Override
    public void newActivation(final String[] params) {
        logger.info("newActivation params=" + params);

        ... activation code here ...

    }
} 
```

如果应用程序崩溃，请确保停止所有正在运行的线程并删除已注册的 SingleInstanceListeners。

```
SingleInstanceService sis = (SingleInstanceService) ServiceManager.lookup("javax.jnlp.SingleInstanceService");
sis.removeSingleInstanceListener(mySingleInstanceListener); 
```

# smalltalk - 如何在我的后备箱图像中显示新的 Squeak 背景？

> ID：14123990
> 
> 赞同：1
> 
> 时间：2013-01-02T14:42:34.257
> 
> 标签：smalltalk, squeak, morphic

我有一个 Squeak 4.3 图像，我使用更新流更新到 4.4 ，它从[这里](http://source.squeak.org/trunk)`trunk`的蒙蒂塞洛存储库中拉下源代码更新

如何获得新的 4.4 桌面？特别是，如何用新的灰色 Ulam Spiral 背景替换棕色古色古香的纸背景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:01:45.313

[您可以在此处](https://github.com/frankshearar/squeak-ci/blob/master/resources/wallpaper.png)下载壁纸本身。（此 URL 指向当前 Squeak 版本的壁纸，但从今天起您应该至少有 6 个月的时间才能更改 :) ）

手中的墙纸，并假设图像在您的当前目录中，您只需要评估`Form openAsBackground: (FileDirectory default / 'wallpaper.png') pathName`.

[（我应该补充一点，背景图像故意不是更新流的一部分：它会使图像膨胀，并改变人们现有的背景。因此，它在发布过程中被](https://github.com/frankshearar/squeak-ci/blob/master/release.st)应用（以及一些其他调整）“侧面” 。 )

# javascript - 将鼠标悬停在 Kendo UI 条形图中的条形上时如何将光标切换为指针光标

> ID：14123992
> 
> 赞同：2
> 
> 时间：2013-01-02T14:43:03.957
> 
> 标签：javascript, jquery, css, svg, kendo-ui

我有一个 Kendo UI Datavis 条形图，我希望在将鼠标悬停在图表中的条形和这些条形的标签上时显示指针（手）光标。当移出图表中的条形时，光标应返回到标准箭头指针。

我注意到当悬停在轴标签（左、右和底部）和图例上时，光标变成了文本光标。因此，除了上述内容之外，我希望光标在悬停在轴标签和图例上时保持标准光标（箭头）（因为您无法编辑这些）。当悬停在 x 轴（底部）标签上时，我还希望光标切换到指针光标。

将鼠标悬停在图表上的任何位置时，我可以轻松地为整个图表显示指针光标，但这是不希望的。

我使用 seriesHover 事件尝试了各种策略，但到目前为止没有任何效果。

我如何实现上述目标？

托马斯你的回答几乎让我在那里。但是，我还需要一条额外的信息：

我将如何在 CSS 文件中使用您在下面的答案中显示的技术。我有几个 Kendo UI 图表，其中一些我需要这种行为，而另一些我不需要。我有与包含剑道 UI 图表的 div 相关联的 id 和类（每个图表一个 div）。实际图表是在加载时使用 JavaScript 代码创建的。我尝试将以下内容添加到 CSS 文件中的 CSS 中，但这没有效果：

```
#barChart {
    /*cursor: pointer;*/
    (svg > path):last-child {cusror: pointer;}
} 
```

其中 #barChart 是 HTML 中包含 KendoUI 图表的 div 的 ID

```
<div id="barChart" class="bargraph"></div> 
```

对于在预定义的 div 中加载时创建的图表，有没有办法执行您在下面显示的操作？这是否必须通过挂钩图表悬停事件来完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:53:20.920

刚刚尝试使用 CSS 设置[Kendo UI 条形图演示](http://demos.kendoui.com/dataviz/bar-charts/index.html)的样式；将光标变为手形并将其保留为文本上的默认光标[都可以很好地工作](http://jsfiddle.net/YK2VU/)。我只需要添加两行 CSS（并更改脚本/CSS URL）：

```
<html>
<head>
    <title></title>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://cdn.kendostatic.com/2012.3.1114/js/kendo.all.min.js"></script>
    <link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.common.min.css" rel="stylesheet" />
    <link href="http://cdn.kendostatic.com/2012.3.1114/styles/kendo.default.min.css" rel="stylesheet" />
    <style type="text/css">
      /* When hovering over a bar, Kendo dynamically adds
         a bar as the last child of the SVG element that 
         works as an overlay. So, effectively, we're
         hovering over the last (dynamically added) child */   
      svg > path:last-child {cursor:pointer;}
      svg {cursor:default}
    </style>
</head>
<body>

        <div id="example" class="k-content">
            <div class="chart-wrapper">
                <div id="chart" style="background: center no-repeat url('../../content/shared/styles/world-map.png');"></div>
            </div>
            <script>
                function createChart() {
                    $("#chart").kendoChart({
                        theme: $(document).data("kendoSkin") || "default",
                        title: {
                            text: "Internet Users"
                        },
                        legend: {
                            position: "bottom"
                        },
                        chartArea: {
                            background: ""
                        },
                        seriesDefaults: {
                            type: "bar"
                        },
                        series: [{
                            name: "World",
                            data: [15.7, 16.7, 20, 23.5, 26.6]
                        }, {
                            name: "United States",
                            data: [67.96, 68.93, 75, 74, 78]
                        }],
                        valueAxis: {
                            labels: {
                                format: "{0}%"
                            }
                        },
                        categoryAxis: {
                            categories: [2005, 2006, 2007, 2008, 2009]
                        },
                        tooltip: {
                            visible: true,
                            format: "{0}%"
                        }
                    });
                }

                $(document).ready(function() {
                    setTimeout(function() {
                        // Initialize the chart with a delay to make sure
                        // the initial animation is visible
                        createChart();

                        $("#example").bind("kendo:skinChange", function(e) {
                            createChart();
                        });
                    }, 400);
                });
            </script>
        </div>
    <script type="text/javascript">
        console.log("hi")
        document.addEventListener("click",function(e){document.write(e.target)},false)
    </script>

</body>
</html>​ 
```

如果您有多个图表并且只希望某些图表具有此行为，我建议使用类，例如

```
<div id="barChart" class="bargraph cursorPointer"></div> 
```

并更改CSS

```
.cursorPointer svg > path:last-child {cursor:pointer;}
.cursorPointer svg {cursor:default} 
```

（如果您希望箭头光标位于所有图形的文本上，请省略`.cursorPointer`第二行的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T20:55:46.870

如果您只想在定义了axisLabelClick 事件的标签中更改光标。你可以这样做：

```
var chart = $("#chart").data("kendoChart"); 
```

就我而言，我只处理第一个标签，所以我只想要指针光标：

```
var idLabel = chart._plotArea.axisY.children[0].options.id; 
$('#' + idLabel).css('cursor', 'pointer'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-13T13:55:53.553

有趣的是，这对我来说非常有效（仅限 Bar Chart Kendo 2016）：

```
 svg > g g g g g g {cursor:pointer;}
  svg {cursor:default} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-05T16:13:22.570

由于这还不是 Kendo 中的设置，正如@ThomasW 所写，您需要找到一种方法来定位当您将鼠标悬停在图形元素上时显示**的覆盖路径。**

就我而言，我注意到所有这些叠加层都有`fill-opacity="0.2"`，这起到了作用：

```
.kendo-chart-wrapper [fill-opacity="0.2"] {
  cursor: pointer;
} 
```

# vb.net - 从 Windows 窗体、LineShape 和 ShapeContainer 数组中删除 LineShape

> ID：14123996
> 
> 赞同：2
> 
> 时间：2013-01-02T14:43:13.940
> 
> 标签：vb.net, visual-studio-2010, line

我正在使用下面的代码将多个 LineShape 控件添加到 Windows 窗体。请注意全局声明`mLineShapes()`和`mShapeContainter()`数组（在代码底部），它们在创建每个新 LineShape 对象后存储它。

目前，我无法从表单中删除给定的 LineShape 控件（即使我知道它的数组索引），并且也无法删除数组元素而不导致已删除元素的 Nothing。显然，一旦我从这些数组中删除了元素，就需要将所有具有更大索引的剩余元素复制到更低的值以填充 Nothing voided 元素。鉴于这些情况，可以使用列表来代替`mLineShapes()`和`mShapeContainer()`数组吗？

```
 enter code here' create new ShapeContainer
        Dim sSCTemp As New ShapeContainer

        ' add ShapeContainer to Form
        sSCTemp.Parent = Me

        ' create new LineShape
        Dim sLSTemp As New LineShape
        sLSTemp.BorderColor = Color.Black
        sLSTemp.BorderWidth = 2
        sLSTemp.Cursor = Cursors.Cross
        ' add LineShape to ShapeContainer
        sLSTemp.Parent = sSCTemp

        ' set starting and ending coordinates for the line
        sLSTemp.StartPoint = New System.Drawing.Point(siSCCount * 20, 60 + siSCCount * 60)
        sLSTemp.EndPoint = New System.Drawing.Point(100 + siSCCount * 20, 110 + siSCCount * 60)

        ' set new LineShape to top of z-order
        sLSTemp.BringToFront()
        sSCTemp.BringToFront()

        ' connect ContextMenuStrip to LineShape
        sLSTemp.ContextMenuStrip = mLsCtm1

        ' add new LineShape to arrays
        ReDim Preserve mLineShapes(siSCCount)
        ReDim Preserve mShapeContainer(siSCCount)

        mLineShapes(siSCCount) = sLSTemp
        mLineShapes(siSCCount).Name = "LineShape" & siSCCount
        mShapeContainer(siSCCount) = sSCTemp
        mShapeContainer(siSCCount).Name = "ShapeContainer" & siSCCount 
```

除了上述之外，每个 LineShape 的端点都是从数组中选择的，以便它们可以移动。下面是一个例子：

```
 Dim siSCId As Integer
        Dim myShapeContainer As ShapeContainer
        myShapeContainer = CType(sender, ShapeContainer)
        Dim myLineShape As LineShape
        ' get index of the actual ShapeContainer in ShapeContainer array
        siSCId = Array.IndexOf(mShapeContainer, sender)

        If siSCId > -1 Then
            myLineShape = mLineShapes(siSCId)
            If MouseIsNearBy(myLineShape.EndPoint) Then
                myLineShape.BorderColor = Color.Red
                NearLineEndPoint = True
            End If
            If MouseIsNearBy(myLineShape.EndPoint) = False Then
                myLineShape.BorderColor = Color.Black
                NearLineEndPoint = False
            End If
            If (dragStartPoint) Then
                myLineShape.StartPoint = New Point(oldStartPoint.X + e.X - oldMouseX, oldStartPoint.Y + e.Y - oldMouseY)
            End If
        End If 
```

因此，如果我只是简单地将新的 LineShape 添加到表单控件而不使用 mLineShapes() 和 mShapeControl() 数组，我该如何修改上面的代码（在存储数组中找到 LineShape）以便可以修改线？我认为如果我单击 LineShape，我可以使用 .sourcecontrol 或 .parent 来获取它的名称？

**2019 年 5 月 9 日更新**

右键单击 Form1 上的控件并从 ContextMenuStrip 中选择“链接”命令后，将触发以下方法 (ctmsconnect) 以绘制新的 LineShape 控件，然后用户将其拖放到工作流中的下一个控件上。问题是，不需要 LineShapes（“线条”）列表吗？

（在 Form1 类声明中）：

```
 Dim SC As New ShapeContainer
  Dim Lines As New List(Of LineShape)

  Private Sub ctmsconnect_Click(sender As System.Object, e As System.EventArgs) Handles ctmsconnect.Click
        mLineWidth = 1
        Dim myItem As ToolStripMenuItem = CType(sender, ToolStripMenuItem)
        Dim cms As ContextMenuStrip = CType(myItem.Owner, ContextMenuStrip)
        Dim x As Integer = cms.SourceControl.Right - 2
        Dim y As Integer = cms.SourceControl.Top + (cms.SourceControl.Height / 2 - 12)
        Dim LS As New LineShape
        NumLineShapes += 1
        LS.Name = "LineShape" & NumLineShapes
        LS.BorderColor = Color.Black
        LS.BorderWidth = 2

        'Set starting and ending coordinates for the line
        LS.StartPoint = New Point(x, y)
        LS.EndPoint = New Point(x + 80, y - 5)

        'Set new LineShape to top of z-order
        LS.BringToFront()

        Dim nxgContextMenuStrip As New ContextMenuStrip
        LS.ContextMenuStrip = nxgContextMenuStrip
        LS.Tag = "LineShape" & NumLineShapes & "_Delete"

        'Attach an event handler for the ContextMenuStrip control's Opening event. 
        AddHandler nxgContextMenuStrip.Opening, AddressOf cms_Opening
        numconnectedlineendpoints += 1
        Dim myValues As New List(Of String)
        myValues.Add(cms.SourceControl.Name)
        DropLineOriginalObjectName = cms.SourceControl.Name
        OrigDropControl = cms.SourceControl
        myValues.Add(LS.Name)
        myValues.Add("linestart")
        dicGUIControls.Add(numconnectedlineendpoints, myValues)
        Lines.Add(LS)
        SC.Shapes.Add(LS)
        Me.Refresh()

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T14:50:57.907

您不需要数组，只需使用控件集合。您应该将它们添加到集合中，而不是设置控件的父级：

```
'sSCTemp.Parent = Me
Me.Controls.Add(sSCTemp) 
```

要删除它们，您可以通过 name 属性引用它们：

```
If Me.Controls.ContainsKey("ShapeContainer1") Then
  Me.Controls.RemoveByKey("ShapeContainer1")
End If 
```

ShapeContainer 内的形状控件必须通过 Shape 集合访问：

```
If Me.Controls.ContainsKey("ShapeContainer1") Then
  Dim sc As ShapeContainer = DirectCast(Me.Controls("ShapeContainer1"), ShapeContainer)
  If sc.Shapes.ContainsKey("LineShape2") Then
    sc.Shapes.RemoveAt(sc.Shapes.IndexOfKey("LineShape2"))
  End If
End If 
```

读取 StartPoint 和 EndPoint 属性的示例：

```
Dim sb As New StringBuilder
For Each ls As LineShape In Me.ShapeContainer1.Shapes
  sb.AppendLine(ls.StartPoint.ToString & " - " & ls.EndPoint.ToString)
Next
MessageBox.Show(sb.ToString) 
```

注意：[ShapeContainer 类](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.powerpacks.shapecontainer.aspx)特别注意：

> 注意不要为每个表单或容器创建多个 ShapeContainer；这样做可能会引入意外行为。如果您在编写代码以编程方式创建后将设计时线条或形状控件添加到窗体或容器，则应修改该代码以使用设计器创建的 ShapeContainer。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T17:53:11.617

```
Public Class Form1

    Dim canvas As New Microsoft.VisualBasic.PowerPacks.ShapeContainer
    ' Set the form as the parent of the ShapeContainer.

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        canvas.Parent = Me
        ' Set the ShapeContainer as the parent of the LineShape.
    End Sub

    Private Sub Form1_MouseClick(sender As Object, e As MouseEventArgs) Handles Me.MouseClick
        If RadioButton1.Checked = True Then
            Dim line1 As New Microsoft.VisualBasic.PowerPacks.LineShape
            line1.Parent = canvas
            ' Set the starting and ending coordinates for the line.
            line1.StartPoint = New System.Drawing.Point(Me.Width / 2, 0)
            line1.EndPoint = New System.Drawing.Point(e.X, e.Y)
            TextBox1.Text = canvas.Shapes.Count.ToString
            line1.Name = "MyShape"
            canvas.Shapes.Add(line1)
            AddHandler line1.Click, AddressOf LineClick
        End If
    End Sub

    Private Sub LineClick(sender As Object, e As EventArgs)
        ' Here is where we take the object that is sender from the arguments and cast it to its specific control
        If RadioButton2.Checked = True Then
            ' I could just as easily use
            CType(sender, PowerPacks.LineShape).Dispose()
            TextBox1.Text = canvas.Shapes.Count
        End If
    End Sub

End Class 
```

# c# - 如何定义相互依赖的属性

> ID：14123998
> 
> 赞同：3
> 
> 时间：2013-01-02T14:43:33.453
> 
> 标签：c#, .net, validation, properties, dependencies

假设我有一个具有两个字符串类型属性的类

1.  道具1
2.  道具2

并且有以下限制

1.  如果 Prop2 值为“Test2”，则 Prop1 不能等于“Test1”
2.  如果 Prop1 值为“Test11”，则 Prop2 不能等于“Test22”
3.  如果 Prop2="Test222" 则设置 Prop1="Test111"

定义其值相互依赖的属性的最佳方法是什么，并且在一个属性中所做的更改应该触发另一个属性的 setter ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T14:47:02.953

您需要在属性设置器中添加验证。

```
 string prop1;
   string prop2;

   string Prop1 
   {
      get { return prop1;}
      set 
      {
         if (!( Prop2 == "Test2" && value == "Test1"))
         {
             Prop1 = value;
          }
         ... Add other condition here
      }
   }

   string Prop2
   {
      get { return prop1;}
      set 
      {
         // set Prop2 based on Prop1
       }
   } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T14:51:30.040

您在这里有很多选择：

*   将这两个属性设为只读，并添加一个同时设置它们的方法。
*   将这两个属性设为可读写，让它们在设置不一致时抛出异常，并添加一个同时设置它们的方法。
*   将这两个属性都设为可读写，并添加一个可让您暂时关闭验证的方法。制作一个“守卫”，在销毁时重新打开验证，并在`using`声明中使用守卫。
*   为您的对象添加事务语义：注意环境事务，当事务“进行中”时将待处理集存储在队列中，并在事务提交时立即应用所有更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:46:14.233

您负责在属性设置器中编写您可能需要的“逻辑”（一种验证）

我会使用规范模式来提取验证逻辑并使其也可测试

[http://devlicio.us/blogs/jeff_perrin/archive/2006/12/13/the-specification-pattern.aspx](http://devlicio.us/blogs/jeff_perrin/archive/2006/12/13/the-specification-pattern.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T14:47:27.420

您可以在每个属性的设置器中实现此逻辑，但我会质疑这样做的智慧。

最好是`Validate`在对象上有一个方法来检查这些属性的状态，或者让另一个对象负责执行验证并返回错误或根据需要对对象进行更改。

# html - 将 DIV 水平和垂直居中

> ID：14123999
> 
> 赞同：162
> 
> 时间：2013-01-02T14:43:40.063
> 
> 标签：html, css, center

有没有办法使**DIV 垂直和水平居中，**但重要的是，**当窗口小于内容时，内容不会被剪切** **div 必须具有背景颜色以及宽度和高度。**

我总是以绝对定位和负边距居中 div，就像提供的示例一样。但它有一个问题，它会削减顶部的内容。有没有一种方法可以使 div .content 居中而不出现这个问题？

我这里有例子可以玩：http: [//jsbin.com/iquviq/1/edit](http://jsbin.com/iquviq/1/edit)

CSS：

```
body { margin: 0px; }

.background {
    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;
    background-color: yellow;
}

/* 
is there a better way than the absolute positioning and negative margin to center the div .content: div with background color a width and a hight?: 
*/ 

.content {
    width: 200px;
    height: 600px;
    background-color: blue;

    position:absolute;
    top:50%;
    left:50%;
    margin-left:-100px;/* half width*/
    margin-top:-300px;/* half height*/
} 
```

HTML：

```
<div class="background">
    <div class="content"> some text </div>
</div> 
```

我的问题与“如何使元素水平和垂直居中？” 1-我的问题之前被问过。（只需检查日期）。2-我的问题问得很清楚，而且是黑色的：“当窗口小于内容时，内容不会被剪切”

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2014-05-16T20:00:31.293

## 对于*现代浏览器*

当你拥有那种奢侈时。还有 flexbox，但在撰写本文时还没有得到广泛支持。

HTML：

```
<div class="content">This works with any content</div> 
```

CSS：

```
.content {
  position: absolute;
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
} 
```

[在Codepen](http://codepen.io/storypixel/pen/Dbdiq)或[JSBin](http://jsbin.com/zureq/1)上进一步修改它

对于较旧的浏览器支持，请查看此线程中的其他位置。

* * *

## 回答 #2

> 赞同：181
> 
> 时间：2013-02-11T16:49:59.670

在尝试了很多事情之后，我找到了一种可行的方法。如果对任何人有用，我在这里分享。你可以在这里看到它的工作：http: [//jsbin.com/iquviq/30/edit](http://jsbin.com/iquviq/30/edit)

```
.content {
        width: 200px;
        height: 600px;
        background-color: blue;
        position: absolute; /*Can also be `fixed`*/
        left: 0;
        right: 0;
        top: 0;
        bottom: 0;
        margin: auto;
        /*Solves a problem in which the content is being cut when the div is smaller than its' wrapper:*/
        max-width: 100%;
        max-height: 100%;
        overflow: auto;
} 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2013-01-02T14:53:39.947

这是一个演示： [http ://www.w3.org/Style/Examples/007/center-example](http://www.w3.org/Style/Examples/007/center-example)

**一种方法**（[JSFiddle 示例](http://jsfiddle.net/pqDQB/)）

CSS：

```
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    display: table
}
#content {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
} 
```

HTML：

```
<div id="content">
    Content goes here
</div> 
```

**另一种方法** （[JSFiddle 示例](http://jsfiddle.net/SWJuR/)）

CSS

```
body, html, #wrapper {
    width: 100%;
    height: 100%
}
#wrapper {
    display: table
}
#main {
    display: table-cell;
    vertical-align: middle;
    text-align:center
} 
```

HTML

```
<div id="wrapper">
<div id="main">
    Content goes here
</div>
</div> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-11-12T06:00:19.347

无论浏览器大小的 div 大小如何，这样做的合法方法是：

```
 div{
    margin:auto;
    height: 200px;
    width: 200px;
    position:fixed;
    top:0;
    bottom:0;
    left:0;
    right:0;
    background:red;
   } 
```

[实时代码](http://jsfiddle.net/d1psa677/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T14:54:45.583

您可以在此页面上很好地比较不同的方法：http: [//blog.themeforest.net/tutorials/vertical-centering-with-css/](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)

他们推荐的方法是在您无法居中的内容之前添加一个空的浮动元素，然后将其清除。它没有你提到的缺点。

我分叉了你的 JSBin 来应用它：http: [//jsbin.com/iquviq/7/edit](http://jsbin.com/iquviq/7/edit)

**HTML**

```
<div id="floater">
</div>

<div id="content">
  Content here
</div> 
```

**CSS**

```
#floater {
  float: left; 
  height: 50%; 
  margin-bottom: -300px;
}

#content {
  clear: both; 
  width: 200px;
  height: 600px;
  position: relative; 
  margin: auto;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-02T16:01:45.423

我不相信有办法严格使用 CSS 来做到这一点。原因是您对问题的**“重要”**限定词：强制父元素使用其子元素的内容进行扩展。

我的猜测是你将不得不使用一些 JavaScript 来找到孩子的身高，并进行调整。

因此，使用此 HTML：

```
<div class="parentElement">  
  <div class="childElement">  
    ...Some Contents...  
  </div>  
</div> 
```

这个CSS：

```
.parentElement {  
  位置：相对；
  宽度：960 像素；
}
.childElement {
  位置：绝对；
  最高：50%；
  左：50%；
}

```

这个 jQuery 可能有用：

```
$('.childElement').each(function(){
  // determine the real dimensions of the element: http://api.jquery.com/outerWidth/
  var x = $(this).outerWidth();
  var y = $(this).outerHeight();
  // adjust parent dimensions to fit child
  if($(this).parent().height() < y) {
    $(this).parent().css({height: y + 'px'});
  }
  // offset the child element using negative margins to "center" in both axes
  $(this).css({marginTop: 0-(y/2)+'px', marginLeft: 0-(x/2)+'px'});
}); 
```

请记住正确加载 jQ，无论是在受影响元素下方的主体中，还是在`$(document).ready(...)`.

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2013-01-02T14:46:50.240

你想设置风格

```
margin: auto; 
```

并删除定位样式（顶部、左侧、位置）

我知道这会以horrizontaly为中心，但我不确定垂直！