# StackOverflow 问答 15031000-15031999

# c++ - 代码包括 不编译

> ID：15031000
> 
> 赞同：0
> 
> 时间：2013-02-22T18:40:31.110
> 
> 标签：c++, fstream

我在这里找到了以下代码，并试图编译它以学习一些编程：

```
#include <fstream>
#include <cerrno>
#include <stdexcept>
#include <cstring>
#include <vector>

int main() {
    // Which disk?
    char diskName[] = "/dev/sda";
    std::string diskError = std::string() + diskName + ": ";

    // Open device file
    std::ifstream disk(diskName, std::ios_base::binary);

    if(!disk)
        throw(std::runtime_error(diskError + std::strerror(errno)));

    // Seek to 54321'th sector
    disk.seekg(512 * 54321);
    if(!disk)
        throw(std::runtime_error(diskError + std::strerror(errno)));

    // Read in one sector
    std::vector<char> buffer(512);
    disk.read(&buffer[0], 512);
    if(!disk)
        throw(std::runtime_error(diskError + std::strerror(errno)));
} 
```

编译器在以下行抱怨：

```
#include <fstream> 
```

错误信息是：

找不到“fstream”文件

我需要下载一些库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:50:34.640

您使用`gcc`（C 前端）而不是`g++`（C++ 前端）编译它。

`<fstream>`在 C 中不存在。

哎呀！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:04:01.007

我想到了。对于选择 main.c 时 Xcode 窗口右侧的文件类型，我将其更改为 C++ 源代码，它通过了错误。

# java - 如何在 java 应用程序和 adobe air 应用程序之间传递消息？

> ID：15031002
> 
> 赞同：1
> 
> 时间：2013-02-22T18:40:49.267
> 
> 标签：java, android, actionscript-3, air

如何在Android中将字符串从java应用程序传递给swf（即内部空气应用程序）.​​.....有可能吗？我正在尝试进行验证.. 使用 md5（IMEI + AndroidVersion + 总磁盘空间 + 很多东西）之类的东西安装在 Android 中的 Java 应用程序（完成）该应用程序会将这个哈希发送到 swf ...所以 swf 会询问 php关于这个设备..如果它被允许将收到游戏的其余部分..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:03:16.933

这是可能的，并且需要您创建您的 adobe air 代码可以调用的本机扩展 (ANE)。

## 参考

[http://help.adobe.com/en_US/air/build/WS597e5dadb9cc1e0253f7d2fc1311b491071-8000.html](http://help.adobe.com/en_US/air/build/WS597e5dadb9cc1e0253f7d2fc1311b491071-8000.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:07:31.513

使用 UDP Socket 接口。在两侧或一侧运行 UDP 服务器套接字并放置/获取消息。

# php - 信用卡信息，必须采取哪些安全预防措施？

> ID：15031004
> 
> 赞同：4
> 
> 时间：2013-02-22T18:40:59.150
> 
> 标签：php, security, encryption

我们不存储任何信用卡信息。它通过 HTML 表单收集，然后由 PHP 脚本处理，该脚本使用 Intuit 的 API 向信用卡收费。调用API充值后，信用卡信息全部处理完毕。

以下是我关于信用卡信息安全性的问题：

*   我认为 SSL 是必须的。它是否正确？
*   我应该从共享主机切换到专用服务器吗？
*   我假设在 HTML 表单和 PHP 脚本之间不会发生不容易不可逆的加密，是否需要对我正在尝试做的事情使用任何加密？

如果还有什么你能想到的，请分享。谢谢大家的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:18:17.627

> 我认为 SSL 是必须的。它是否正确？

是，对的。

> 我应该从共享主机切换到专用服务器吗？

至少一个 VPS 是一个非常好的主意。您可能无法在共享主机上成功符合 PCI，您只是没有足够的控制权来按照 PCI 的要求锁定您的服务器。

> 我假设在 HTML 表单和 PHP 脚本之间不会发生不容易不可逆的加密，是否需要对我正在尝试做的事情使用任何加密？

您的 API 应该处理好这一点。确保 API 也通过 SSL/安全连接。

请阅读 PCI 要求。您正在传输持卡人数据，因此您需要符合 PCI 标准。您将处于合规性的“最低级别”（我认为是 C 或 D）。您还需要对您的服务器 IP 运行季度扫描以证明合规性。作为仅供参考，我为此使用 McAffee Secure。

您不受 PCI 规则约束的唯一方法是持卡人的数据输入到其他人的服务器上（想想：贝宝）。每当您通过贝宝付款时，您都会被转移到贝宝的服务器，然后再转回。在该方案中，您不需要遵守。

现在，很多 PCI 要求都谈到了一些不适用于问卷的内容（即您的服务器是否存储在安全的地方，您的建筑物的物理安全程度等......） - 好消息是您的服务器/托管公司应该处理。

在您的网络扫描之后，它会列出一个让您不合规的事情的列表。它们几乎总是与服务器相关的问题。您可以自己修复它们，或者请您的房东帮助您 - 如果您将列表发送给他们，大多数房东都会这样做。您将无法在共享主机上修复其中的很多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:46:35.170

您的要点按顺序处理

*   是的，即使连接到 API，这应该是唯一的选择
*   这是一个好主意，减少安全风险。受感染的租户破坏您的站点的可能性会降低。
*   只要您不以任何形式存储或缓存数据并使用 SSL 进行传输，您就不必在应用程序上实施加密。

PCI 要求可能适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T18:56:27.053

1）我会通过HTTPS服务整个页面，以避免用户收到“某些资源不受保护”的警报消息

2) 取决于集成，如果 Intuit 为您提供了要使用的 iframe 或表单操作，那么敏感数据永远不会到达您的服务器。用户可以键入和/或直接将其提交给直觉，您的页面仅作为容器。

如果上述情况属实：

3) 您不必通过 PCI 合规性。Intuit 已经做到了。敏感数据永远不会到达您的服务器，因此无需处理任何东西。

4）共享或专用主机并不重要，因为您没有传输或存储任何敏感信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T19:58:27.250

1.  **SSL：**是的，当然。在您的服务器和客户端之间，*以及*您和 API 之间。
2.  **专用主机：**理想情况下，是的。使用共享主机有两个问题：

    1.  存储在会话中的任何内容都可能被服务器上的其他人检索。
    2.  甚至不属于您的站点中的安全漏洞可能会导致您的站点出现漏洞。

    这些主要是主机安全策略的域，并且不容易被 PCI 扫描识别。

# android - 在 Eclipse 中作为 android 应用程序运行 - 没有任何反应

> ID：15031005
> 
> 赞同：0
> 
> 时间：2013-02-22T18:41:00.610
> 
> 标签：android, eclipse, emulation

我有一个简单的应用程序。

让 textView 带有“Hello World！”。运行一次，它工作。

现在我将文本值更改为“Hello ME！”，并且我无法“重新编译”也就是使用“Run as android app”运行，.. 只是没有发生任何事情。

如果我单击“绿色播放按钮”启动应用程序，它只会运行带有文本“Hello World！”的先前应用程序。这意味着我无法“重新编译”。来自 C# 水域，这就是我说重新编译的原因。

有什么建议么？

一次得到这个错误：

> [2013-02-22 19:32:35 - ddmlib] 已建立的连接被主机中的软件中止 java.io.IOException：已建立的连接被主机中的软件中止

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-11T05:41:42.490

当你在你的android加载后立即运行你的应用程序时总是会发生这种情况，你必须等到你的应用程序被android加载，不要自己运行它（比如打开菜单并运行你的应用程序），请耐心等待，但如果它不运行，而不是您需要重新启动应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T20:30:34.113

我多次遇到这个问题。当它发生时，我会这样做 1.打开你的模拟器 2\. 转到设置>应用程序>你的应用程序 3.卸载你的应用程序 重新编译它适用于我，只要没有出现这个问题！然后删除你的模拟器并创建一个新的重启eclipse！:) 它会工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T21:58:44.713

这件事有效： http: [//lesleyharrison.wordpress.com/2011/01/15/solution-for-android-emulator-starts-but-app-doesnt-run/](http://lesleyharrison.wordpress.com/2011/01/15/solution-for-android-emulator-starts-but-app-doesnt-run/)

对我来说略有不同的是，我检查了“每次都询问要使用哪个 avd”。所以现在我运行运行配置器->在我进行更改时始终运行，然后选择我的 avd。

# javascript - 我应该使用三元运算符还是 || JavaScript 中的运算符？

> ID：15031008
> 
> 赞同：1
> 
> 时间：2013-02-22T18:41:12.207
> 
> 标签：javascript

我找到了两种编码条件赋值的方法，但都给出了相同的结果：

```
function onClickEvent(e){ 
    e = win.event || e,  //These are
    var ev=e.target || e.srcElement;  // good?
    alert(ev.innerHTML);
} 
```

或者

```
function onClickEvent(e){
    e = (win.event) ? win.event : e;  //or
    var ev = (e.target) ? e.target : e.srcElement; // these are?
    alert(ev.innerHTML);
} 
```

一种方法优于另一种方法吗？如果是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:44:11.493

尽可能使用最短、最具交流性的代码。

IMO 第一个是用于可选参数分配的规范 JS，并且是首选。

第二个虽然等效，但需要更多的努力才能理解，*除非*您精通 JavaScript。如果您选择后者，*请*使用更多空格并删除括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:43:44.080

我会说第二个，因为它更具可读性和常识性。

# c# - SendGrid Parse API 和 SaaS 应用程序

> ID：15031010
> 
> 赞同：2
> 
> 时间：2013-02-22T18:41:13.767
> 
> 标签：c#, saas, sendgrid

我想为用户添加向一个地址发送电子邮件的功能，该地址自动将附件保存为文档并将电子邮件保存为 html 等。

我想我了解如何编写函数，但我不确定如何确保安全性。我的应用程序设计为单一代码，但每个客户都有自己的数据库和子域。该应用程序查看子域并确定用于身份验证等的数据库。（没有主数据库。）

首先，我认为 sendgrid 会为您提供一个自定义电子邮件地址，例如 a897a88s8@sendgrid.net，您可以转发到该地址以进行测试或实际使用，但我在任何地方都看不到。我可能会设置一个单独的域

如何确保用户从 companyA 发送的电子邮件保存在他们的数据库中？我想过：

*   将公司名称放在用户发送到“addpart-companyA@mysaasapp.com”的电子邮件地址中

*   具有公司范围内唯一键“addpart-3515645@mysaasapp.com”的自定义电子邮件地址

该代码可以找到正确的数据库，查看“发件人”电子邮件地址以查看它是否与现有用户匹配，然后执行所需的功能。但是，这似乎不太安全。我还想要几个不同的电子邮件地址，用户可以使用它们来执行不同的功能（'添加到现有部分，添加到新部分，不添加文档等）

我正在寻找一个更好的设置，最好允许使用不难看的电子邮件地址。别人做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:47:27.400

听起来您已经为每家公司都有子域。这些现在是否完全用于电子邮件，或者您可以更改子域的 MX 记录吗？如果您可以以编程方式更改您的 DNS，那么在创建每个子域时添加 SendGrid 解析 MX 记录将非常容易。然后你可以使用`addpart@company.mysaasapp.com`.

为了安全起见，我认为您在检查数据库中的用户方面处于正确的轨道上。假设您的客户正确配置了他们的电子邮件，如果您担心欺骗，可以通过 Authentication-Results 标头检查 SPF。

# c++ - 为什么没有正确创建一对 - C++

> ID：15031015
> 
> 赞同：0
> 
> 时间：2013-02-22T18:41:19.227
> 
> 标签：c++, map

我有以下声明`Key.h`

```
typedef uint64_t KeyHash; 
```

在我的`Finder`课堂上，我有一个`C++`声明如下的地图：

```
std::map<std::pair<uint64_t, KeyHash>, Foo> table; 
```

因此，我正在尝试创建一个新的对。该`Foo`对象有两个字段，`startKeyHash`和`foo_id`，都是类型`uint64_t`：

```
std::pair<uint64_t, KeyHash> key (foo.foo_id,
                                  foo.start_key_hash());
table[key] = tablet; 
```

函数`uint64_t Foo:start_key_hash()`返回`startKeyHash`. 但是，当我编译代码时，出现以下错误：

```
error: no matching function for call to ‘std::pair<long unsigned int, long unsigned int>::pair(<unresolved overloaded function type>, google::protobuf::uint64)’
/usr/lib/gcc/x86_64-redhat-`linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_pair.h:111: note:
 candidates are: std::pair<_T1, _T2>::pair(_U1&&, _Arg0&&, _Args&& ...) [with _U1 =
 google::protobuf::uint64, _Args = , _T1 = long unsigned int, _T2 = long unsigned int]` 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:43:16.060

看起来您从 Google 引入的代码定义了一个`uint64`类型，并且您在某个地方不小心使用了它而不是`uint64_t`. 注意`_t`缺少。

# c# - 为什么我的 JavaScript 数组不能转换为适当的类型？

> ID：15031022
> 
> 赞同：1
> 
> 时间：2013-02-22T18:41:34.500
> 
> 标签：c#, javascript, .net, silverlight, htmlbridge

我在通过 HTMLBridge 将 JavaScript 数组和字典类型对象传递给我的托管代码中的方法时遇到了一些问题。Microsoft[文章中详细介绍此主题](http://msdn.microsoft.com/en-us/library/cc645079%28v=vs.95%29.aspx)和网络的信息让我无处可去。

使用链接文章中的以下信息：

> NET Framework 属性或类型为对象的输入参数在按值封送至目标 .NET Framework 属性或输入参数时使用以下启发式方法进行转换：
> 
> **JavaScript 数组**转换为`object[]`.
> 
> **JavaScript 字典**被转换为`Dictionary<string,object>`.

...我尝试以多种方式将数组和字典对象传递给我的托管代码，但没有成功：

**Javascript：**

```
var array = [{key: 1}, {key: 2}, {key: 3}];
silverlight_domElement.content.testObject.testMethod(array); 
```

**C#（尝试#1）：**

```
[ScriptableMember]

//THROWS CONVERSION EXCEPTION HERE
public void testMethod(Dictionary<string,object>[] arrayParam) 
{
    //...
} 
```

**C#（尝试#2）：**

```
[ScriptableMember]
public void testMethod(object arrayParam) 
{
    //THROWS CONVERSION EXCEPTION HERE
    Dictionary<string, object>[] arr = (Dictionary<string, object>[])arrayParam; 
} 
```

**C#（尝试#3）：**

```
[ScriptableMember]
public void testMethod(ScriptObject arrayParam)
{
    //THROWS CONVERSION EXCEPTION HERE
    Dictionary<string, object>[] arr = 
      arrayParam.ConvertTo<Dictionary<string, object>[]>();

} 
```

**例外的形式是**（其中“TARGET TYPE”是由显式或隐式强制转换（包括`Object[]`）产生的对象的预期类型：

> SCRIPT16389：System.ArgumentException：无法将此对象转换为指定类型**TARGET TYPE**。参数名称：targetType
> 
> 在 System.Windows.Browser.ScriptObject.ConvertTo（类型 targetType，布尔 allowSerialization）
> 
> 在 System.Windows.Hosting.ScriptingInterface.GetScriptParamValueForType（ScriptParam scriptParam，键入所需类型）
> 
> 在 System.Windows.Hosting.ScriptingInterface.ConvertFromScriptParams（ParameterInfo[] 参数，ScriptParam[] args）
> 
> 在 System.Windows.Browser.ManagedObjectInfo.ScriptMethod.Invoke（ManagedObject obj，InvokeType invokeType，ScriptParam[] args）
> 
> 在 System.Windows.Browser.ManagedObjectInfo.Invoke（ManagedObject obj，InvokeType invokeType，String memberName，ScriptParam [] args）
> 
> 在 System.Windows.Hosting.ManagedHost.InvokeScriptableMember（IntPtr pHandle，Int32 nMemberID，Int32 nInvokeType，Int32 nArgCount，ScriptParam [] pArgs，ScriptParam & pResult，ExceptionInfo & pExcepInfo）

（类似的尝试将字典对象作为 传递给 C# `Dictionary<string, object>`）。

这些尝试是否是对上述文章及其他文章中信息的误解的结果？还是我的实现根本不正确？

**附录：**

*我知道用[ScriptObject](http://msdn.microsoft.com/en-us/library/system.windows.browser.scriptobject%28v=vs.95%29.aspx)`.getProperty()`完成我想要的方法，但如果可能的话，我想处理具体的、精确的类型。更不用说如果键值不能像前两者一样拆箱，它会返回本机类型、String 或 ScriptObject。我讨厌被简化为在任意嵌套的对象上反复调用它，直到我到达一个本机类型。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:50:58.283

再看一下链接的文章后，我相信引用的文本是指在托管对象上由`createObject`or创建后发生的编组操作`createManagedObject`。

所以像这样的类：

```
[ScriptableType]
public class TestClass
{
    public object arrayObj;
    public object dicObj;
    public TestClass sibling;

    public TestClass(){}
    public void testMethod(TestClass testClassObj)
    {
                               //Assuming argument came from Javascript
                               //& arrayObj and dicObj were assigned an 
                               //Array and dictionary-obj respectively

         testClassObj.arrayObj; //Formal type: Object. Actual type: object[]
         testClassObj.dicObj;   //Formal type: Object. Actual type: 
                                //                     Dictionary<string, object>
    }
} 
```

Silverlight 应用程序使用如下：

```
private void Application_Startup(object sender, StartupEventArgs e)
{
    this.RootVisual = new MainPage();
    HtmlPage.RegisterCreatableType("TestClass", typeof(TestClass));
    HtmlPage.RegisterScriptableObject("scripTestClassObj", new TestClass());
} 
```

可以在客户端这样使用：

```
var testClassObj = silverlight_domElement.content
                    .services.CreateObject("TestClass");
testClassObj.arrayObj = [1,2,3];  
testClassObj.dicObj = {key: 1};  

silverlight_domElement.content.scripTestClassObj.testMethod(testClassObj);

//"sibling"'s arrayObj and dicObj types will have actual types
//of object[] and Dictionary<string, object> respectively
silverlight_domElement.content.scripTestClassObj.sibling = testClassObj; 
```

换句话说，它与讨论的功能无关。

在我的问题的上下文中，这意味着将非原始 Javascript 值传递给托管代码需要遵守以下准则之一：

1.  目标属性或方法参数的类型必须是`ScriptObject`（或`Object`，因为这是它派生的类）。
2.  目标属性或方法参数的类型必须显式或隐式注册到 HtmlPage.RegisterCreatableType，并且传递的值必须是使用注册别名 ( ) 或类型 ( ) 的`createObject`or调用产生的对象。`createManagedObject``createObject``createManagedObject`

如果我所做的任何陈述不正确，请随时纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:53:25.297

好像是这样

```
[{key: 1}, {key: 2}, {key: 3}] 
```

实际上是类型

```
object [] 
```

而不是字典类型。

您的代码试图将数组转换为字典，这将永远无法工作。

澄清一下，因为您的顶级对象是一个数组，因此是对象 []，JSON 解析器不够聪明，无法知道数组中每个元素的各个类型。

恐怕你将不得不将它投射到

```
object[] 
```

然后像处理它

```
Dictionary<string,object> cur;
foreach(object o in objArray)
{
   cur = (Dictionary<string,object>) o;

} 
```

# javascript - 防止多个滑块超过最大值-Jquery Mobile Multipage 模板

> ID：15031024
> 
> 赞同：6
> 
> 时间：2013-02-22T18:41:43.677
> 
> 标签：javascript, jquery, jquery-mobile

我只是设法构建了一些 javascript 代码以确保多个滑块不超过最大值 24。

问题是，当我尝试在 jquery mobile 的多页模板中使用它时，它仅适用于第一页并且无法检查通过多页模板加载的第二页。

这是我的jsFiddle，可以更好地了解情况

[JsFiddle 示例]( [http://jsfiddle.net/WEewU/20/](http://jsfiddle.net/WEewU/20/)

第一页有效，第二页无效。

我试图确保页面上任何数量的滑块不超过 24 小时。然后在 jquery mobile 中的所有多页模板中使用此代码。

完整代码

```
 <!DOCTYPE html> 
```

```
<head>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.css"
    />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0-alpha.1/jquery.mobile-1.2.0-alpha.1.min.js"></script>
</head>

<body>
    <form>
        <!-- Home Page-->
        <div data-role="page" id="home">
            <div data-role="header" data-position="fixed" data-id="myheader">
                 <h1>test</h1>

            </div>
            <!-- /header -->
            <div data-role="content">

                <ul id="sliders1">
                    <li>
                        <input type="range" id="slider" class="value" name="slider1" value="0"
                        min="0" max="24" data-highlight="true" />
                    </li>
                    <li>
                        <input type="range" class="value" id="slider" name="slider2" value="0"
                        min="0" max="24" data-highlight="true" />
                    </li>
                    <li>
                        <input type="range" class="value" id="slider" name="slider3" value="0"
                        min="0" max="24" data-highlight="true" />
                    </li>
                </ul> <a href="#home2">Link to 2nd page</a> 
            </div>
        </div>
        <div data-role="page" id="home2">
            <div data-role="header" data-position="fixed" data-id="myheader">
                 <h1>test</h1>

            </div>
            <!-- /header -->
            <div data-role="content">
                <ul id="sliders">
                    <li>
                        <input type="range" id="slider" class="value" name="slider4" value="0"
                        min="0" max="24" data-highlight="true" />
                    </li>
                    <li>
                        <input type="range" class="value" id="slider" name="slider5" value="0"
                        min="0" max="24" data-highlight="true" />
                    </li>
                    <li>
                        <input type="range" class="value" id="slider" name="slider6" value="0"
                        min="0" max="24" data-highlight="true" />
                    </li>
                </ul> <a href="#home">Link to Home</a> 
            </div>
        </div>
    </form>
</body> 
```

Javascript

```
 var sliders = $("#sliders1 .slider");

                    sliders.each(function() {
                        var max = 24;
                        var value = Number($(this).text(), 10),
                            availableTotal = max;
                    });

                    $(".value").change(function() {
                        var thisAmount = Number($(this).prop("value"));
                        var totalMax = 24;
                        var indMin = Number($(this).attr("min"));
                        var indMax = Number($(this).attr("max"));
                        var total = 0;

                        //Get the values of all other text boxes
                        $('.value').not(this).each(function() {
                            total += Number($(this).prop("value"));
                        });

                        //Find the remaining from our total sliders max
                        var remaining = totalMax - total;

                        if (remaining < 0) {
                            remaining = 0;
                        }
                        //if we are under our minimums, go for it! Otherwise, reduce the number.
                        if (thisAmount >= indMin && thisAmount < indMax && thisAmount < totalMax && thisAmount < remaining) {
                            $(this).siblings(".slider").slider("option", "value", thisAmount);
                            //total += thisAmount;
                        } else {
                            //var setMax = ((indMax + totalMax) - Math.abs(indMax - totalMax)) / 2;
                            var setMax = Math.min(indMax, totalMax, remaining);
                            $(this).siblings(".slider").slider("option", "value", setMax);
                            $(this).prop("value", setMax);
                            //total += (thisAmount - setMax);
                        }

                        //above was getting buggy, so lets just reset total and get it again
                        total = 0;
                        //Get the values of all text boxes
                        $('.value').each(function() {
                            total += Number($(this).prop("value"));
                        });
                        //Find our new remaining number after updating total for this value
                        remaining = totalMax - total;
                        if (remaining < 0) {
                            remaining = 0;
                        }
                        //Set each slider to the current point and update their max values.
                        $('.value').each(function() {
                            var sliderVal = Number($(this).prop("value"));
                            var sliderMin = Number($(this).attr("min"));
                            var sliderMax = Number($(this).attr("max"));
                            var setNewMax = (((sliderMax + totalMax) - Math.abs(sliderMax - totalMax)) / 2);
                            var newMax = sliderVal + remaining;

                            if (newMax < setNewMax) {
                                $(this).siblings('.slider').slider("option", "max", newMax);
                            } else {
                                $(this).siblings('.slider').slider("option", "max", setNewMax);
                            }
                            $(this).prop("max", setNewMax);
                        });
                    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:51:33.917

**`jQuery Mobile`**有一个美丽的东西叫做页面事件。它们将在特定页面或多个页面上执行，并且它们仅与它们一起工作，**`jQuery Mobile`**因此将它们视为特定事件。要了解更多信息，请查看这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**，为了更加透明，这是我的个人博客。或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

这是您的代码的一个工作示例：http: [//jsfiddle.net/Gajotres/e8xZ2/](http://jsfiddle.net/Gajotres/e8xZ2/)

让我们来看看变化：

1.  在左上角 jQuery 1.8.3 被选中并更改为 * `*onDomReady`**
2.  jQuery 代码初始化为：

    ```
    $(document).on('pagebeforeshow', '#home, #home2', function(){ 
    ```

    它将确保此代码在 id 为**home**和**homn2**的页面上执行。

3.  滑块和输入框通过**`$.mobile.activePage`**. 基本上这是一个活动页面**`jQuery Mobile`**选择器。

    ```
    $.mobile.activePage.find("#sliders1 .slider"); 
    ```

    和

    ```
    $.mobile.activePage.find('.value').not(this).each(function() { 
    ```

4.  您的**`jQuery Mobile`**框架升级到稳定的 1.2 版本

# assembly - 什么霓虹汇编代码将两个向量组合成长向量？

> ID：15031030
> 
> 赞同：2
> 
> 时间：2013-02-22T18:42:11.740
> 
> 标签：assembly, arm, neon

ARM Neon 内在 vcombine_s16 将两个向量组合成一个长向量。它的汇编代码是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:52:50.290

```
int16x8_t vcombine_s16 (int16x4_t, int16x4_t) 
```

没有直接匹配的指令，这是一种将两个双寄存器视为四寄存器并在 C 中提供类型安全的方法。您可以通过在需要时调用双寄存器或四寄存器来隐式地在汇编中执行此操作。有关 NEON 寄存器组的可能用途，请参见下图。

可以查看内部函数`gcc`的[文档](http://gcc.gnu.org/onlinedocs/gcc/ARM-NEON-Intrinsics.html)。

对于如何在汇编中实现，您仍然可以使用 gcc

```
#include "arm_neon.h"

int16x8_t c(int16x4_t a, int16x4_t b) {
  return vcombine_s16(b, a);
} 
```

变成

```
c(__simd64_int16_t, __simd64_int16_t):
    vswp    d1, d0
    bx  lr 
```

我实际上已经在[网上](http://gcc.godbolt.org/#%7B%22version%22%3A3%2C%22filterAsm%22%3A%7B%22labels%22%3Atrue%2C%22directives%22%3Atrue%2C%22commentOnly%22%3Atrue%7D%2C%22compilers%22%3A%5B%7B%22source%22%3A%22%23include%20%5C%22arm_neon.h%5C%22%5Cn%5Cnint16x8_t%20c(int16x4_t%20a%2C%20int16x4_t%20b)%20%7B%5Cn%20%20return%20vcombine_s16(b%2C%20a)%3B%5Cn%7D%22%2C%22compiler%22%3A%22%2Fusr%2Fbin%2Farm-linux-gnueabi-g%2B%2B-4.6%22%2C%22options%22%3A%22%20-mfpu%3Dneon%20-O2%20-mfloat-abi%3Dhard%22%7D%5D%7D)生成了这个。

所以最后我认为这归结为如果寄存器是相邻的，那么它们已经组合了，如果不是，你可以使用`vmov`or `vswp`。

有关寄存器如何放置和引用的信息，请参阅此[arm 文档。](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dht0002a/ch01s03s02.html)`neon`

![在此处输入图像描述](../Images/6935758e30b7e146cd6f73788fb75fd5.png)

# networking - 使用 dnsmasq 将 .dev 域从它所连接的所有本地网络指向一台计算机

> ID：15031033
> 
> 赞同：1
> 
> 时间：2013-02-22T18:42:32.403
> 
> 标签：networking, dns, localhost, dnsmasq

我在我的 Mac 上运行 Apache 等（实际上是 MAMP，但很快就会被单独的 Apache、PHP、MySQL 取代……），用于在本地/离线测试我的网站。

我希望能够`*.dev`从以下任何和所有内容测试我的所有本地站点（域），*而*无需更新`hots`每个设备上的文件（其中一些，例如无根电话，甚至不允许编辑主机文件）：

1.  显然，我的 Mac 本身...
2.  我的 Mac 连接到的任何本地网络上的任何设备（我的 Mac 不一定总是具有相同的 IP 地址）
3.  在我的 Mac 上运行的任何虚拟机（在 Parallels 中）——主要是各种版本的 Windows（我的 Mac 在 Parallels 共享网络上总是具有相同的 IP 地址）

现在，我读到 dnsmasq 可能会提供帮助，并已使用 Homebrew 将其安装在我的 Mac 上。我将其设置为在启动时启动，我的`dnsmasq.conf`内容如下：

```
address=/.dev/127.0.0.1 
```

这具有允许任何域在我的 Mac 上运行的效果`*.dev`，*这*是一个开始。

接下来，我尝试通过将 DNS 服务器设置为我的 Mac 的本地 IP 地址，使其在 Parallels VM 中工作。但是，这不起作用——因为 dnsmasq`127.0.0.1`作为任何查找的 IP返回`*.dev`，但这当然会使 VM 在 VM 本身上查找站点，而不是在我的 Mac 上……这显然不起作用。

所以我有点难过。谁能给我任何提示？有没有办法设置 dnsmasq 来做我想做的事，或者我应该看看另一种方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:51:49.173

我对 Parallels 没有任何经验，但使用 Virtualbox，您可以设置桥接网络连接。我认为 Parallels 也有类似的东西。这将建立一个内部网络（例如在 192.168.1.* 上），您可能可以为其分配固定的 IP 地址。像这样，您可以为 Mac 提供一个固定 IP 地址，您也可以在 dnsmasq 配置中使用该地址 - 但您可能希望为此设置两个 TLD，以便 .dev 可以继续指向 127.0.0.1 而 .devel 指向 192.168.1 .xx。

# java - 如何解决这个 Eclipse 启动错误？

> ID：15031035
> 
> 赞同：4
> 
> 时间：2013-02-22T18:42:37.023
> 
> 标签：java, eclipse, eclipse-plugin

我尝试了几个答案来修复 Eclipse 启动问题。

我试过了

```
eclipse.exe -clean didn't work. 
eclipse.exe -clean -data C:\prectice\java\ didn't work
eclipse.exe -clean --lanuncher.ini elipse.ini didn't work. 
```

这是错误：-

```
An error has occurred. See the log file
C:\app\eclipse\configuration\1361558300022.log. 
```

我不知道如何启动 Eclipse。请只是我如何解决它。提前感谢！

日志文件内容：

```
!SESSION 2013-02-22 20:39:37.176 -----------------------------------------------
eclipse.buildId=v21.1.0-569685
java.version=1.7.0_15
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product com.android.ide.eclipse.adt.package.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product com.android.ide.eclipse.adt.package.product

!ENTRY org.eclipse.osgi 4 0 2013-02-22 20:39:39.898
!MESSAGE Application error
!STACK 1
java.lang.NoClassDefFoundError: com/mercury/javashared/agentloader/AgentBootstrap
    at org.eclipse.swt.widgets.Display.<init>(Display.java:480)
    at org.eclipse.ui.internal.Workbench.createDisplay(Workbench.java:716)
    at org.eclipse.ui.PlatformUI.createDisplay(PlatformUI.java:161)
    at org.eclipse.ui.internal.ide.application.IDEApplication.createDisplay(IDEApplication.java:154)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:96)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
Caused by: java.lang.ClassNotFoundException: com.mercury.javashared.agentloader.AgentBootstrap
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:501)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:421)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:412)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 17 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-03-30T13:15:00.307

清除这些环境变量；QTP 为他们带来：

`JAVA_OPTIONS`：

```
-Xrunjvmhook -Xbootclasspath/a:C:\PROGRA~2\HP\QUICKT~1\bin\JAVA_S~1\classes;C:\PROGRA~2\HP\QUICKT~1\bin\JAVA_S~1\classes\jasmine.jar 
```

`IBM_JAVA_OPTIONS`：

```
-Xrunjvmhook -Xbootclasspath/a:C:\PROGRA~2\HP\QUICKT~1\bin\JAVA_S~1\classes;C:\PROGRA~2\HP\QUICKT~1\bin\JAVA_S~1\classes\jasmine.jar 
```

`JAVA_TOOL_OPTIONS`：

```
-agentlib:jvmhook 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-01T23:24:30.093

这也可以通过在启动应用程序之前创建一个 bat 文件并清除环境变量来解决，请参阅解决方案链接。

来源：[https ://stackoverflow.com/a/24685843/6345724](https://stackoverflow.com/a/24685843/6345724)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T08:30:40.130

非常感谢阿迪。你给我关于QTP的线索。其实我有QTP。和QTP一起没问题。但是当我尝试卸载qtp时，它没有成功并留下一些文件。所以我找到了qtp自带的所有文件，然后手动删除。删除所有文件后，eclipse正常启动。

# c# - 获取在 IIS 中禁用 Windows 授权的 Windows 用户凭据

> ID：15031038
> 
> 赞同：3
> 
> 时间：2013-02-22T18:43:05.030
> 
> 标签：c#, asp.net, iis

是否可以在没有在 IIS 中启用 Windows 身份验证的情况下获取用户的 Windows 凭据（即用户名）？禁用 Windows 身份验证后，以下代码将返回 NT AUTHORITY 或 IIS APPPOOL\ASP.NET v4.0，具体取决于是否启用了模拟和匿名身份验证。

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name.ToString(); 
```

我正在将使用表单身份验证的 asp.net Web 应用程序转换为自定义身份验证。基本上，如果用户从网络外部连接，我会强制进行凭据检查，而如果他们从网络内部连接，我希望能够获取他们的 Windows 用户名。当我打开 Windows 身份验证时，内部部分可以工作，但在网络外部进行测试时会弹出登录框。我要么需要为非本地连接禁用 windows 身份验证，要么弄清楚如何在禁用 windows 身份验证的情况下获取 windows 用户名。有什么建议么？（我想到的另一种选择是将应用程序一分为二，并为每个应用程序设置单独的身份验证模式，但我想避免这种情况）。

- 我也试过：

```
System.Web.HttpContext.Current.User.Identity.ToString();
System.Threading.Thread.CurrentPrincipal.ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:53:22.957

简单的答案是否定的。

最好的解决方案是创建 2 个站点。一种用于用户 windows 身份验证的内部用户，一种用于用户形成身份验证但针对 AD 进行身份验证的外部用户。您可以让用户始终默认访问外部站点，然后根据他们的 IP 进行重定向。也就是将内网用户重定向到内部用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:04:59.623

使用 Active Directory 联合服务，这样的事情实际上（有点）是可能*的*。如果是来自网络内部的 Windows 用户，他们可以配置为使用他们的帐户详细信息。对于外部用户，他们可以被重定向到需要他们登录的页面。

然而。这是非常繁重的任务，并且实施起来非常痛苦，并且实际上仅适用于有资源使用这种解决方案的企业解决方案。否则，我会说采用 2 站点方法。

# asp.net - 两个独立条件的客户端验证

> ID：15031042
> 
> 赞同：0
> 
> 时间：2013-02-22T18:43:14.500
> 
> 标签：asp.net

有没有办法使用内置验证器来验证 asp.net 文本框的输入以用于两个不同的条件？文本框与日期选择器一起使用，目前我有这样的 RegularExpressionValidator 来验证：

```
<asp:TextBox ID="tbStartDate" runat="server" Width="100" CssClass="TextCompact">yyyy</asp:TextBox>
<asp:HyperLink ID="hlStartDate" runat="server" ImageUrl="~/Images/iconCalendar.gif"></asp:HyperLink><br />
<asp:RegularExpressionValidator ID="revStartDate" ControlToValidate="tbStartDate"
     CssClass="TextCompact" runat="server" ErrorMessage="* Invalid Date" ValidationExpression="^(\d{4})$" /> 
```

每次输入无效日期时都会触发 - 您可以使用日期选择器，也可以输入日期字符串。

所以问题是我只想验证文本框中是否有数据。如果文本框为空，我希望它无需验证即可通过。

这是可能的还是需要自定义客户端验证？

谢谢，里修。

更新：

我决定编写自己的从 BaseValidator 类派生的验证器类并将其连接起来，但出现编译器错误。

```
namespace Abcdefg1234
{
    public class Custom_Validator : BaseValidator
    {
        public Custom_Validator()
        {

        }

        protected override bool EvaluateIsValid()
        {
            String value = this.GetControlValidationValue(this.ControlToValidate);
            return ValidateControls(value.Trim());
        }

        public static bool ValidateControls(string value)
        {

            if(Regex.IsMatch(value, @"^(\d{4})$") == true)
                return true;
            else if(value == "")
                return true;
            else
                return false;
        }
    }
} 
```

然后我包含了页面指令标签：

```
<%@ Register TagPrefix="Cv" Namespace="Abcdefg1234" TagName="CustomValidaitonX" %> 
```

和实际标签：

```
Cv:Custom_Validator ID="cvtbStartDate" ControlToValidate="tbStartDate"                        runat="server" ErrorMessage="* Invalid Date" /> 
```

我得到一个未知的服务器标签。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:27:09.723

在空文本框上触发的唯一内置验证器是`RequiredFieldValidator`. 如果文本框为空，则与其关联的其他验证器不会在表单提交时触发。

换句话说，您应该没问题，`RegularExpressionValidator`如果您在文本框仍然为空的情况下提交，则不会触发。您是否遇到不同的行为？

ETA：您需要在注册页面指令中指定程序集名称`Custom_Validator`才能被识别。我不相信自定义控件需要标签名称。

# c# - C# 控件大小不覆盖整个控件

> ID：15031043
> 
> 赞同：0
> 
> 时间：2013-02-22T18:43:16.287
> 
> 标签：c#, controls

我有一个 RowHeaderVisible 属性设置为 false 的 DataGridView；

我将边距和填充设置为 0；

那么大小等于加在一起的标题宽度......

为什么还需要额外的空间来显示完全控制？（有一个可见的水平滚动条）这是什么属性，或者您将如何准确测量控件的确切（实际）大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:51:52.853

我有一段时间没用过，但如果它像一个列表视图，标题应该小于宽度，以便为垂直滚动条留出空间——假设你有一个。尝试减小其中一个标题的宽度，或增加控件宽度

# spring - 在 Spring 中使用 setAllowedFields() 方法

> ID：15031049
> 
> 赞同：2
> 
> 时间：2013-02-22T18:43:22.080
> 
> 标签：spring, spring-mvc, spring-3, databinder, propertyeditor

我正在使用 Spring 3.2.0。我已经为一些基本需求注册了一些自定义属性编辑器，如下所示。

```
import editors.DateTimeEditor;
import editors.StrictNumberFormatEditor;
import java.math.RoundingMode;
import java.net.URL;
import java.text.DecimalFormat;
import java.text.NumberFormat;
import org.joda.time.DateTime;
import org.springframework.beans.propertyeditors.StringTrimmerEditor;
import org.springframework.beans.propertyeditors.URLEditor;
import org.springframework.web.bind.WebDataBinder;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.bind.annotation.InitBinder;
import org.springframework.web.context.request.WebRequest;

@ControllerAdvice
public final class GlobalDataBinder 
{
    @InitBinder
    public void initBinder(WebDataBinder binder, WebRequest request)
    {
        binder.setIgnoreInvalidFields(true);
        binder.setIgnoreUnknownFields(true);
        //binder.setAllowedFields(someArray);
        NumberFormat numberFormat=DecimalFormat.getInstance();
        numberFormat.setGroupingUsed(false);
        numberFormat.setMaximumFractionDigits(2);
        numberFormat.setRoundingMode(RoundingMode.HALF_UP);

        binder.registerCustomEditor(DateTime.class, new DateTimeEditor("MM/dd/yyyy HH:mm:ss", true));
        binder.registerCustomEditor(Double.class, new StrictNumberFormatEditor(Double.class, numberFormat, true));
        binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));
        binder.registerCustomEditor(URL.class, new URLEditor());
    } 
} 
```

到目前为止，我已经注册了这么多编辑。`DateTimeEditor`其中两个`StrictNumberFormatEditor`已通过覆盖各自的方法进行自定义，以满足数字格式和[Joda-Time](http://joda-time.sourceforge.net/)的自定义需求。

由于我使用的是 Spring 3.2.0，因此我可以利用[`@ControllerAdvice`](http://static.springsource.org/spring-framework/docs/3.2.0.M2/api/org/springframework/web/bind/annotation/ControllerAdvice.html).

Spring 建议使用该方法列出一组允许的字段，[`setAllowedFields()`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/validation/DataBinder.html#setAllowedFields%28java.lang.String...%29)以便恶意用户无法将值注入绑定对象。

从[关于](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/validation/DataBinder.html)_`DataBinder`

> 允许在目标对象上设置属性值的绑定器，包括对验证和绑定结果分析的支持。可以通过指定允许字段、必填字段、自定义编辑器等来自定义绑定过程。
> 
> 请注意，未能设置允许的字段数组可能会带来安全隐患。例如，在 HTTP 表单 POST 数据的情况下，恶意客户端可以尝试通过提供表单上不存在的字段或属性的值来破坏应用程序。在某些情况下，这可能会导致在命令对象或其嵌套对象上设置非法数据。因此，**强烈建议[`allowedFields`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/validation/DataBinder.html#setAllowedFields%28java.lang.String...%29)**在 DataBinder 上指定**属性。**

* * *

我有一个很大的应用程序，显然有数千个领域。用 指定和列出所有这些[`setAllowedFields()`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/validation/DataBinder.html#setAllowedFields%28java.lang.String...%29)是一项乏味的工作。此外，不知何故我需要记住它们。

根据需要更改网页以删除某些字段或添加其他字段需要修改[`setAllowedFields()`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/validation/DataBinder.html#setAllowedFields%28java.lang.String...%29)方法的参数值以反映这些更改。

有没有其他选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T13:15:48.313

`setAllowedFields()`您可以使用黑名单，而不是使用白`setDisallowedFields()`名单。例如，来自 petclinic 示例应用程序：

```
@InitBinder
public void setAllowedFields(WebDataBinder dataBinder) {
    dataBinder.setDisallowedFields("id");
} 
```

从纯粹的安全角度来看，白名单比黑名单更受欢迎，但它可能有助于减轻一些负担。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T14:15:25.687

setAllowedFields() 在 web 层直接使用实体对象时非常方便。或者，可以使用专用数据传输对象 (DTO)，在服务层中从中构造实体对象。不仅可以重用工厂，还可以在 Web 上下文之外使用，例如用于异步消息。此外，DTO 继承不必遵循实体继承，因此您可以根据用例的需要自由设计 DTO 层次结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T17:45:42.877

来自[http://static.springsource.org/spring-webflow/docs/2.0.x/reference/htmlsingle/spring-webflow-reference.html#view-model](http://static.springsource.org/spring-webflow/docs/2.0.x/reference/htmlsingle/spring-webflow-reference.html#view-model)

4.9\. 明确指定绑定

使用 binder 元素来配置视图可用的确切模型绑定集。这在 Spring MVC 环境中对于限制每个视图的“允许字段”集特别有用。

```
<view-state id="enterBookingDetails" model="booking">
    <binder>
        <binding property="creditCard" />
        <binding property="creditCardName" />
        <binding property="creditCardExpiryMonth" />
        <binding property="creditCardExpiryYear" />
    </binder>
    <transition on="proceed" to="reviewBooking" />
    <transition on="cancel" to="cancel" bind="false" />
</view-state> 
```

如果未指定 binder 元素，则模型的所有公共属性都可以被视图绑定。指定 binder 元素后，仅允许显式配置的绑定。

每个绑定还可以应用转换器来格式化模型属性值，以便以自定义方式显示。如果未指定转换器，则将使用模型属性类型的默认转换器。

```
<view-state id="enterBookingDetails" model="booking">
    <binder>
        <binding property="checkinDate" converter="shortDate" />
        <binding property="checkoutDate" converter="shortDate" />    
        <binding property="creditCard" />
        <binding property="creditCardName" />
        <binding property="creditCardExpiryMonth" />
        <binding property="creditCardExpiryYear" />
    </binder>
    <transition on="proceed" to="reviewBooking" />
    <transition on="cancel" to="cancel" bind="false" />
</view-state> 
```

在上面的示例中，shortDate 转换器绑定到 checkinDate 和 checkoutDate 属性。自定义转换器可以注册到应用程序的 ConversionService。

每个绑定还可以应用必要的检查，如果用户提供的值在表单回发时为空，则会生成验证错误：

```
<view-state id="enterBookingDetails" model="booking">
    <binder>
        <binding property="checkinDate" converter="shortDate" required="true" />
        <binding property="checkoutDate" converter="shortDate" required="true" />
        <binding property="creditCard" required="true" />
        <binding property="creditCardName" required="true" />
        <binding property="creditCardExpiryMonth" required="true" />
        <binding property="creditCardExpiryYear" required="true" />
    </binder>
    <transition on="proceed" to="reviewBooking">
    <transition on="cancel" to="bookingCancelled" bind="false" />
</view-state> 
```

在上面的示例中，所有绑定都是必需的。如果绑定了一个或多个空白输入值，则会生成验证错误，并且视图将重新呈现这些错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-08T22:09:38.953

在大多数表单输入值应转换为 null（如果为空）的情况下使用带有 DTO（例如公司数据）的活页夹的解决方案，但需要添加一些异常（setDisallowedFields 对我不起作用）。

```
@InitBinder()
public void initBinder(WebDataBinder binder) {
    binder.registerCustomEditor(String.class, new StringTrimmerEditor(true));
}

@InitBinder
protected void initBinder(HttpServletRequest request, ServletRequestDataBinder binder) {
    binder.registerCustomEditor(String.class, "companydata.companyName", new StringTrimmerEditor(false));
    binder.registerCustomEditor(String.class, "companydata.companyNumber", new StringTrimmerEditor(false));
} 
```

# php - nginx：通过 https 提供远程图像

> ID：15031051
> 
> 赞同：1
> 
> 时间：2013-02-22T18:43:29.900
> 
> 标签：php, nginx

有没有办法让 nginx 通过 HTTPS 提供**远程**HTTP 图像？我基本上是在寻找以下 PHP 的仅 nginx 替代方案：

```
<?php
echo file_get_contents($_GET['url']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T02:27:05.150

您可以将`proxy_pass`指令与变量一起使用（`$arg_*`代表 GET 参数）：

```
location / {
    proxy_pass $arg_url;
    resolver 8.8.8.8;
} 
```

*   [http://nginx.org/r/proxy_pass](http://nginx.org/r/proxy_pass)
*   [http://nginx.org/r/resolver](http://nginx.org/r/resolver)
*   [http://nginx.org/en/docs/http/ngx_http_core_module.html#variables](http://nginx.org/en/docs/http/ngx_http_core_module.html#variables)

请注意，此配置有效地从您的服务器进行开放中继。因此，我不建议将其用于任何生产用途。

# powershell - 如何允许 Windows 服务从 Powershell 访问 SQL 数据库的防火墙设置？

> ID：15031052
> 
> 赞同：0
> 
> 时间：2013-02-22T18:43:30.673
> 
> 标签：powershell, azure, firewall

我正在尝试使用 powershell 脚本将服务部署到 Azure。他们将需要访问同样以编程方式创建的 SQL 数据库。

对于外部请求，您可以使用以下方式指定防火墙规则：

`New-AzureSqlDatabaseServerFirewallRule -ServerName $serverName -StartIpAddress $startIP -EndIpAddress $endIP -RuleName $ruleName`

在门户中，您可以使用从网络内部指定访问权限

“允许的服务：WINDOWS AZURE SERVICES”[是/否]（默认为否）

如何从powershell将最后一个设置为“是”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T12:56:00.337

如果您使用此命令，它会完成相同的任务。我建议使用它，以防 Azure 更改引用 Azure 流量的 ip 范围。

```
New-AzureSqlDatabaseServerFirewallRule -ServerName $AzureSqlServer.ServerName.ToString() -AllowAllAzureServices 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:43:30.673

如果`New-AzureSqlDatabaseServerFirewallRule`在 StartIpAddress 和 EndIpAddress 设置为 0.0.0.0 的情况下使用该命令，门户将将此解释为“允许 Windows azure 服务访问此 SQL 数据库”。

# entity-framework - 如何将 IDbContext 传递给 DbMigrationsConfiguration

> ID：15031055
> 
> 赞同：2
> 
> 时间：2013-02-22T18:43:37.277
> 
> 标签：entity-framework, entity-framework-5, code-first, dbcontext

一直在从许多资源中使用 EF5 Code First 实现通用存储库、工作单元模式，并提出了以下程序集。

接口、上下文、模型、存储库、工作单元

在上下文程序集中，我有我的迁移文件夹，其中包含 Configuration.cs

```
internal sealed class Configuration : DbMigrationsConfiguration<Context.SportsContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
    }

    protected override void Seed(Context.SportsContext context)
    {
        //  This method will be called after migrating to the latest version.

        //  You can use the DbSet<T>.AddOrUpdate() helper extension method 
        //  to avoid creating duplicate seed data. E.g.
        //
        //    context.People.AddOrUpdate(
        //      p => p.FullName,
        //      new Person { FullName = "Andrew Peters" },
        //      new Person { FullName = "Brice Lambson" },
        //      new Person { FullName = "Rowan Miller" }
        //    );
        //
    }
} 
```

正如您所看到的，这个 DbMigrationsConfiguration 接受了我的 SportsContext，它也在上下文程序集中（Contexts 文件夹）中定义

```
 public class SportsContext : IDbContext
{
    private readonly DbContext _context;

    public SportsContext()
    {
        _context = new DbContext("SportsContext");

    }

    public void Dispose()
    {
        _context.Dispose();
    }

    public IDbSet<T> GetEntitySet<T>() where T : class
    {
        return _context.Set<T>();
    }

    public void ChangeState<T>(T entity, EntityState state) where T : class
    {
        _context.Entry(entity).State = state;
    }

    public void SaveChanges()
    {
        _context.SaveChanges();
    }
} 
```

这实现了在 Interfaces 程序集中定义的 IDbContext

```
public interface IDbContext : IDisposable
{
    IDbSet<T> GetEntitySet<T>() where T : class;
    void ChangeState<T>(T entity, EntityState state) where T : class;
    void SaveChanges();
} 
```

在我的 UnitsOfWork 程序集中，我有以下课程

```
public class SportUnitOfWork : IUnitofWork
{
    private readonly IDbContext _context;

    public SportUnitOfWork()
    {
        _context = new SportsContext();
    }

    private GenericRepository<Team> _teamRepository;
    private GenericRepository<Fixture> _fixtureRepository;

    public GenericRepository<Team> TeamRepository
    {
        get { return _teamRepository ?? (_teamRepository = new GenericRepository<Team>(_context)); }
    }

    public GenericRepository<Fixture> FixtureRepository
    {
        get { return _fixtureRepository ?? (_fixtureRepository = new GenericRepository<Fixture>(_context)); }
    }

    public void Save()
    {
        _context.SaveChanges();
    }

    public IDbContext Context
    {
        get { return _context; }
    }

    private bool _disposed;

    protected virtual void Dispose(bool disposing)
    {
        if (!_disposed)
        {
            if (disposing)
            {
                _context.Dispose();
            }
        }
        _disposed = true;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

} 
```

例如，我在 Repositories 程序集中添加了 GenericRepository 类

```
public class GenericRepository<T> : IGenericRepository<T> where T : class
{
    private IDbContext _context;

    public GenericRepository(IDbContext context)
    {
        _context = context;
    }

    public GenericRepository(IUnitofWork uow)
    {
        _context = uow.Context;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!disposing) return;

        if (_context == null) return;
        _context.Dispose();
        _context = null;
    }

    public void Add(T entity)
    {
        _context.GetEntitySet<T>().Add(entity);
    }

    public void Update(T entity)
    {
        _context.ChangeState(entity, EntityState.Modified);
    }

    public void Remove(T entity)
    {
        _context.ChangeState(entity, EntityState.Deleted);
    }

    public T FindSingle(Expression<Func<T, bool>> predicate = null, params Expression<Func<T, object>>[] includes)
    {
        var set = FindIncluding(includes);
        return (predicate == null) ? set.FirstOrDefault() : set.FirstOrDefault(predicate);
    }

    public IQueryable<T> Find(Expression<Func<T, bool>> predicate = null, params Expression<Func<T, object>>[] includes)
    {
        var set = FindIncluding(includes);
        return (predicate == null) ? set : set.Where(predicate);
    }

    public IQueryable<T> FindIncluding(params Expression<Func<T, object>>[] includeProperties)
    {
        var set = _context.GetEntitySet<T>();

        if (includeProperties != null)
        {
            foreach (var include in includeProperties)
            {
                set.Include(include);
            }
        }

        return set.AsQueryable();
    }

    public int Count(Expression<Func<T, bool>> predicate = null)
    {
        var set = _context.GetEntitySet<T>();
        return (predicate == null) ? set.Count() : set.Count(predicate);
    }

    public bool Exist(Expression<Func<T, bool>> predicate = null)
    {
        var set = _context.GetEntitySet<T>();
        return (predicate == null) ? set.Any() : set.Any(predicate);
    }
} 
```

我遇到的问题是从 DbMigrationsConfiguration 继承的 Configuration 类需要一个 DbContext 参数。

错误是错误 1 ​​类型“Contexts.Context.SportsContext”不能用作泛型类型或方法“System.Data.Entity.Migrations.DbMigrationsConfiguration”中的类型参数“TContext”。没有从“Contexts.Context.SportsContext”到“System.Data.Entity.DbContext”的隐式引用转换。

我可以将 SportsContext 更改为也从 DbContext 继承，但随后我需要在 UnitsOfWork 程序集中添加对 EntityFramework 5 的引用，因为我们希望在不引用底层模型的情况下更改或取出每一层，这就是我采用这种模式的原因.

由于我们正在考虑在未来添加更多的上下文和模型，因此希望建立一个架构，我们可以只添加上下文、模型，然后在需要时实现相关接口。

如果我正确理解了模式，WebAPI Restful Web 服务将通过 SportUnitOfWork 与我们的数据进行交互。

如果有人对我如何做到这一点或任何我做错的事情有任何想法，请告诉我

提前谢谢马克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:52:18.897

通过执行以下操作解决了这个问题

将我的 SportsContext 类更改为抽象的 BaseContext

```
public abstract class BaseContext : IDbContext
{
    protected DbContext Context;

    public void Dispose()
    {
        Context.Dispose();
    }

    public IDbSet<T> GetEntitySet<T>() where T : class
    {
        return Context.Set<T>();
    }

    public void Add<T>(T entity) where T : class
    {
        DbEntityEntry dbEntityEntry = GetDbEntityEntrySafely(entity);
        dbEntityEntry.State = EntityState.Added;
    }

    public void Update<T>(T entity) where T : class
    {
        DbEntityEntry dbEntityEntry = GetDbEntityEntrySafely(entity);
        dbEntityEntry.State = EntityState.Modified;
    }

    public void Delete<T>(T entity) where T : class
    {
        DbEntityEntry dbEntityEntry = GetDbEntityEntrySafely(entity);
        dbEntityEntry.State = EntityState.Deleted;
    }

    public void SaveChanges()
    {
        // At the moment we are conforming to server wins when handling concurrency issues
        // http://msdn.microsoft.com/en-us/data/jj592904

        try
        {
            Context.SaveChanges();
        }
        catch (DbUpdateConcurrencyException e)
        {
            //Refresh using ServerWins
            var objcontext = ((IObjectContextAdapter) Context).ObjectContext;
            var entry = e.Entries;

            objcontext.Refresh(RefreshMode.StoreWins, entry);

            SaveChanges();
        }
    }

    private DbEntityEntry GetDbEntityEntrySafely<T>(T entity) where T : class
    {
        DbEntityEntry dbEntityEntry = Context.Entry(entity);

        if (dbEntityEntry.State == EntityState.Detached)
        {
            // Set Entity Key
            var objcontext = ((IObjectContextAdapter) Context).ObjectContext;

            if (objcontext.TryGetObjectByKey(dbEntityEntry.Entity))

            Context.Set<T>().Attach(entity);
        }

        return dbEntityEntry;
    }
} 
```

在 Context 文件夹中创建了一个名为 FootballContext 的新类，它继承自 BaseContext。

```
public class FootballContext : BaseContext
{
    public FootballContext(string connectionstringName)
    {
        Context = new BaseFootballContext(connectionstringName);

    }
} 
```

创建了一个名为 DbContexts 的新文件夹

在这里创建了以下类，

```
public class BaseFootballContext : DbContext
{
    public BaseFootballContext(string nameOrConnectionString) : base(nameOrConnectionString)
    {
    }

    public IDbSet<Fixture> Fixtures { get; set; }
    public IDbSet<Team> Teams { get; set; }  
}

public class MigrationsContextFactory : IDbContextFactory<BaseFootballContext>
{
    public BaseFootballContext Create()
    {
        return new BaseFootballContext("FootballContext");
    }
} 
```

现在我的配置类可以接受 BaseFootballContext，因为这是一个 DbContext。

我的 UnitOfWork 类现在可以将上下文设置为 FootballContext，因此不必引用 EntityFramework。

这也适用于迁移。

我现在唯一的问题是弄清楚如何让它在断开连接的环境中工作，因为我在重新附加实体和应用更新时遇到问题。

# prolog - Prolog - 将成功表示转换为十进制

> ID：15031057
> 
> 赞同：1
> 
> 时间：2013-02-22T18:43:48.417
> 
> 标签：prolog, successor-arithmetics

这是我的代码：

```
numeral(0).
numeral(succ(X)) :- numeral(X).

convertToD(A,0).  
convertToD(succ(S), Y) :- numeral(S), Y1 is Y-1, convertToD(S, Y1). 
```

为什么这会给我这样的输出？

```
convertTo(succ(succ(0)), N).
N = 0 ;
ERROR: convertTo/2: Arguments are not sufficiently instantiated 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:07:39.067

好吧，因为这个，你得到的答案不止一个：

```
convertToD(A,0). 
```

您在这里的意思是`convertToD(0, 0)`，因为否则当您的意思是“convertToD 对于 0 是 0”时，您会说“convertToD 在*任何东西和 0 之间都是真的”。*这也是 Prolog 认为你有多个结果的原因。

经过一番思考并注意到[一个问题，这个问题是 的副本](https://stackoverflow.com/questions/8954435/convert-peano-number-sn-to-integer-in-prolog)，我明白你试图用第二个子句来完成什么。您要做的是在普通 Prolog 中模拟 clpfd 解决方案。使用 clpfd：

```
convertToD(succ(S), Y) :- numeral(S), Y0 #= Y-1, convertToD(S, Y0). 
```

将其直接复制到 vanilla Prolog 中即可将您的代码带到此处，但不会发生的是 clpfd 带来的所有魔力。如果没有 clpfd，就很难做出适用于任何实例化组合并且从不循环的谓词。有帮助的一件事是将算术移到最后：

```
convertToD(succ(S), Y) :- numeral(S), convertToD(S, Y1), succ(Y1, Y). 
```

这为我们提供了一个具有所有所需属性的谓词，除了它在此处循环：

```
?- convertToD(X, 3).
X = s(s(s(0))) ;
^CAction (h for help) ? abort 
```

我已经把这个`when/2`和`var/1`/搞砸了，并且`nonvar/1`无法解决那个小问题。

# c# - 是否可以在 EntityCollection 上实现 RemoveAll() ?

> ID：15031059
> 
> 赞同：4
> 
> 时间：2013-02-22T18:44:05.980
> 
> 标签：c#, .net, linq, entity-framework

我有一个与[此类](https://stackoverflow.com/questions/207038/best-way-to-remove-items-from-a-collection)似的问题，但与`EntityCollection<>`.

`EntityCollection`implements `Remove()`，允许您一次从列表中删除*单个项目。*但是，我想实现一个可以一次删除多个项目的扩展方法，类似于`IList<T>`'s`RemoveAll(Predicate<T> match)`方法。

一种想法是遍历列表并删除项目。就像是：

```
public static void RemoveAll<T>(this EntityCollection<T> collection, Predicate<T> match) where T : EntityObject
{
   foreach (T o in collection)
   {
      if (match(o))
         collection.Remove(o);
   }
} 
```

但是，这将引发异常，因为您无法修改正在迭代的集合。

另一个想法是构建要删除的项目的临时列表，然后遍历*该*列表并从集合中删除每个项目。但是，这对我来说似乎效率低下。有更好的实现吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T18:55:56.983

正如我在评论中所说，迭代二级列表可能是这里唯一安全的选择。

您可以通过以下方式实现它：

```
public static void RemoveAll<T>(this EntityCollection<T> collection,
    Predicate<T> match) where T : EntityObject
{
    if (match == null) {
        throw new ArgumentNullException("match");
    }

    collection.Where(entity => match(entity))
              .ToList().ForEach(entity => collection.Remove(entity));
} 
```

# c - _Alignas 用于使用 clang 和 C11 的结构成员

> ID：15031061
> 
> 赞同：6
> 
> 时间：2013-02-22T18:44:19.880
> 
> 标签：c, compiler-construction, struct, c11

我在使用 C11 和结构的 -Wpadded 时遇到了一些问题。

我已经阅读了[Structure member alignment with _Alignas](https://stackoverflow.com/questions/10676827/structure-member-alignment-with-alignas)，我查看了 clang 文档，发现它现在受支持。

另外，我正在使用我最近从主干构建的一个非常新版本的 clang。

```
$ clang --version
clang version 3.3 (trunk 175473)
Target: x86_64-unknown-linux-gnu
Thread model: posix 
```

我遇到的问题是：

```
#include <stdlib.h>
#include <stdalign.h>

struct foo{
   void* a;
   int b;
};

int main() {
   struct foo instance;

   instance.a = NULL;
   instance.b = 2;

   return 0;
} 
```

这给了我这个警告：

```
$ clang -Weverything -std=c11 t.c 
t.c:4:8: warning: padding size of 'struct foo' with 4 bytes to alignment boundary [-Wpadded]
struct foo{
       ^
1 warning generated. 
```

现在这不是`_Alignas`为了什么吗？我尝试将它放在 int 成员声明之前，如下所示：

```
struct foo{
   void* a;
   _Alignas(void*) int b;
}; 
```

但同样的警告仍然存在。我还尝试将 _Alignas 放在各个地方，但无济于事。我在这里想念什么？

我知道我可以忽略这个特定的警告，并且我理解为什么填充很重要，所以我对解决方法或关于什么是填充的解释不感兴趣。我想知道如何以一种可移植的、符合标准的方式更改我的 C，以便不再发出警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:51:20.727

`-Weverything`打印 C 需要的所有诊断消息以及 C 不需要的一些诊断。此处打印的诊断不是 C 需要的：它的目的是提供信息，并且您的程序已经严格符合。C 表示，只要没有翻译程序失败，实现就可以自由地产生额外的诊断消息。

# c# - 在asp日历中隐藏年份文本

> ID：15031062
> 
> 赞同：0
> 
> 时间：2013-02-22T18:44:20.303
> 
> 标签：c#, asp.net

我找不到任何东西可以从 asp 日历中删除年份文本。有没有办法在没有自定义渲染的情况下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:08:08.610

您是否尝试过 TitleFormat 属性？

```
<asp:Calendar ID="Calendar1" runat="server" TitleFormat="Month"></asp:Calendar> 
```

# design-patterns - 选择 MapReduce 设计模式

> ID：15031066
> 
> 赞同：1
> 
> 时间：2013-02-22T18:44:34.217
> 
> 标签：design-patterns, hadoop, mapreduce

对于我的荣誉项目，我正在研究处理由大学生命科学系内的质谱仪 (MS) 产生的大量数据的方法。

我一直在阅读 MapReduce Design Patterns & Hadoop: The Definitive Guide，我正在尝试将我拥有的数据连接到特定的 map & reduce 模式。

第一步是找到每条曲线的***加权峰值***。执行计算以将 6 或 7 个点（行）减少为单个点，其中包含最大/最小、平均值等信息。

*   数据位于 ~8GB CSV 文件中，如下所示：

    ```
    100312_EXP229_GFPIP_5,1,0.00056783449000000002,0,402.0745297608135,1135.039794921875,1,0,0,0,0,0 
    ```

*   每行本质上是图表上的一个点，具有 X 和 Y 坐标。

*   这些点由其中一列组成曲线。所以我知道每条记录，它属于哪条曲线。

*   每条曲线的点数各不相同，通常在 4 - 8 个点左右。

我的问题是大多数示例似乎是逐行处理问题，例如字数。我需要一次处理 N 行，尽管我不确定这是否是解决这个问题的正确方法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:30:57.513

在您的情况下，逐行处理文件以及`<curve, point>`映射器中的每一行输出就足够了。减速器将接收属于一条曲线的所有点：`<curve, {point1, point2, ... }>`作为输入。因此，您可以根据减速器中的曲线点计算 max/min/avg 并`<curve, max/min/avg>`作为最终结果输出。

PS。要在每个映射器中准确处理`N`输入文件的行，您可以使用[NLineInputFormat](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/mapred/lib/NLineInputFormat.html)。

# knockout.js - 如何使用 data-bind="with" 标签刷新 div

> ID：15031067
> 
> 赞同：0
> 
> 时间：2013-02-22T18:44:37.813
> 
> 标签：knockout.js, sammy.js

我有一个项目集合，我只是想引用已经选择的项目！

```
<ul data-bind="foreach: items">
    <li><a data-bind="click: $root.select"><span data-bind="text: name"></span></a></li>
</ul>
<div data-bind="with: selectedItem">
    <h1 data-bind="text: name"></h1>
</div>

self.items = ko.observableArray([
            { name: "Bungle", type: "Bear" },
            { name: "George", type: "Hippo" },
            { name: "Zippy", type: "Unknown" }
        ]);

        self.select = function (item) {

            location.hash = "Action/" + item.name;
        }

        self.selectedItem = ko.observable(); 
```

对于我的申请人，我只需要做一些事情来告诉 div 具有 selectedItem 来刷新自己。

我试过 valueHasMutated(); 但不起作用。

* * *

示例代码：[https ://skydrive.live.com/redir?resid=33048714B5BF3B4B!913](https://skydrive.live.com/redir?resid=33048714B5BF3B4B!913)

## 重现步骤：

1.  在列出的任何项目下选择“子项目”（项目 1、项目 2、项目 3）
2.  选择任何带有标签的子项（子项 1、子项 2）
3.  部分视图将显示为带有“下一个视图”链接的“子项目 {x}”
4.  单击“下一个视图”链接。
5.  将显示“下一个局部视图”。
6.  按下返回按钮。

我想做的是加载 SubItems 并选择“Sub Item 1”视图。

# javascript - 检查日期验证是否大于今天的日期以及js中的日期格式

> ID：15031070
> 
> 赞同：1
> 
> 时间：2013-02-22T18:44:46.303
> 
> 标签：javascript, validation, date

如何以 'dd-mm-yyyy H:i:s ' 格式验证日期，并且该日期应大于系统的日期和时间。此验证应在 javascript 中。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:48:09.983

例如，您可以这样做（现场小提琴：http: [//jsfiddle.net/7jrQZ/](http://jsfiddle.net/7jrQZ/)）：

```
function parseDate(str)
{
    var s = str.split(" "),
        d = str[0].split("-"),
        t = str[1].replace(/:/g, "");
    return d[2] + d[1] + d[0] + t;
}

if( parseDate("17-05-1989 12:15:00") > parseDate("15-05-1989 14:00:00") )
{
    alert("larger")
}
else
{
   alert("smaller")   
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-21T09:28:21.147

Niels 的逻辑是对的，但他写的函数是不正确的。
`parseDate`没有返回正确的值。您可以在此处检查这两个值。**[尼尔的小提琴更新](http://jsfiddle.net/7jrQZ/75/)**

这是正确的功能：**[正确的小提琴](http://jsfiddle.net/7jrQZ/76/)**

```
function parseDate(str)
{
    var s = str.split(" "),
        d = s[0].split("-"),
        t = s[1].replace(/:/g, "");
    return d[2] + d[1] + d[0] + t;
}

if( parseDate("17-05-1989 12:15:00") > parseDate("15-05-1989 14:00:00") )
{
    alert("larger");
}
else
{
   alert("smaller");  
} 
```

# makefile - cygwin make: execvp: g++: 错误的文件号

> ID：15031071
> 
> 赞同：0
> 
> 时间：2013-02-22T18:44:52.830
> 
> 标签：makefile, cygwin

我正在尝试`glui`在 cygwin 中编译源代码。当我运行时，`make`我得到以下输出

```
g++ -I./ -I./include -I/usr/X11R6/include -c glui_add_controls.cpp
make: execvp: g++: Bad file number
make: *** [glui_add_controls.o] Error 127 
```

但是如果我只是编译这个文件，它就可以完美地工作

```
g++ -I./ -I./include -I/usr/X11R6/include -c glui_add_controls.cpp 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:49:01.513

我有同样的问题。

运行 Cygwin 的 setup.exe 并搜索“make”。安装。

# linux - linux启动时无法启动程序

> ID：15031076
> 
> 赞同：-1
> 
> 时间：2013-02-22T18:45:11.237
> 
> 标签：linux

我无法在设备启动时正常启动程序。我创建了一个脚本并将该脚本放入`/etc/init.d/S77Hello.sh` 在此脚本中，我启动了该程序，该程序用作其他程序的看门狗。但是在启动完成后，只有看门狗程序不会运行其他应该由看门狗程序启动的程序。

有趣的是，当我使用以下命令启动程序时： `/etc/init.d/S77Hello.sh start` 它以正常方式启动所有其他程序。

S77你好.sh

```
#!/bin/sh
/usr/local/bin/mywatchdog 
```

解决问题的任何帮助都会有所帮助。

谢谢，尤维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:43:18.457

`/etc/init.d`启动时不会自动调用其中的脚本；您必须先告诉您的 init 系统这样做。如果您的发行版有`/etc/init.d`可能通过`update-rc.d`. 具体来说：

```
update-rc.d S77Hello.sh defaults 
```

查看相关的手册页。如果您更喜欢 GUI，请`rcconf`提供更加用户友好的界面，尽管您可能需要先安装它。

但是，在您这样做之前，请修复您的初始化脚本；它缺乏重要的信息。如果你还没有读过[这篇](http://wiki.debian.org/LSBInitScripts)文章，你可能会想读。

至少，它需要看起来像这样：

```
#/bin/sh
### BEGIN INIT INFO
# Provides:          mywatchdog
# Required-Start:    $local_fs
# Required-Stop:     $local_fs
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start watchdog at boot time
# Description:       Something something something
### END INIT INFO

case "$1" in
    start)
        /usr/local/bin/mywatchdog
        echo $! >/var/run/mywatchdog.pid
            echo "watchdog started."
        ;;
    stop)
        if kill "$(cat /var/run/mywatchdog.pid)"; then
            rm /var/run/mywatchdog.pid
            echo "watchdog stopped."
        else
            exit 1
        fi
        ;;
    *)
        echo "Usage: $0 {start|stop}"
        exit 1
        ;;
esac 
```

这在某种程度上假设了一个类似 Debian 的系统，但是由于您在 ARM 上使用带有 sysvinit 的发行版，我猜您在 Raspberry Pi 上使用 Raspian。如果没有，请查看现有 init 脚本在您的发行版中的工作方式。

# c++ - 我可以在这里避免多重继承吗？

> ID：15031083
> 
> 赞同：1
> 
> 时间：2013-02-22T18:45:29.800
> 
> 标签：c++, multiple-inheritance

我处于一种我要进行多重继承的情况（以及一种可怕的钻石）。我想避免这种情况，所以希望有人有想法以另一种方式做到这一点。

我想制作一个处理网络连接的库。我有一个抽象工厂，它具有创建 tcpServer、tcpClient、udp 的方法，以及从目录创建条目的最后一个方法（将配置文件提供给工厂的 init 方法）。所以我为这种连接创建了类（实际上是接口）。入口是基本接口。为简化起见，假设它具有设置数据和状态回调的方法。所有其他类（tcpClient ...）都继承自这一类。

我想用 boost 来实现这个工厂，所以我必须实现所有的类（tcpServer，...）。问题是所有类的实现都需要一个共同的基础。这是我要做的，但我不确定这是正确的方法：

这是摘要部分：

```
// The abstract factory:
class Factory
{
    virtual IO::TcpServer* createTcpServer() = 0;
    virtual IO::TcpClient* createTcpClient() = 0;

    virtual IO::Entry* createFromConf() = 0;
};  

// The Entry interface: 
class Entry {
    virtual bool isChild() const = 0;
    // ...

    virtual void setDataCbk() = 0;
    virtual void setStateCbk() = 0;
};

// TcpClient interface
class TcpClient : public IO::Entry {
    /* Nothing yet but stuff will come */
}; 
```

这是 boost 实现（类名相同但在不同的命名空间中；我没有显示工厂实现）：

```
// Entry first step of implementation (still abstract)
class Entry : public IO::Entry
{
    virtual void setDataCbk();
    virtual void setStateCbk();
};

// Flat entry : entry that can't have child (like tcp client, udp ...)
class FlatEntry : public IO::Boost::Entry
{
    virtual bool isChild() const; // Will always return false
    // ...
};

// The final TcpClient implementation
class TcpClient : public IO::TcpClient
            , public IO::Boost::FlatEntry
{
    // ...
}; 
```

所以我很担心这个多重继承的事情。另一方面，超类是一个纯接口（没有数据，只有纯虚方法）。有任何想法吗？

# assembly - 评论装配 mips

> ID：15031086
> 
> 赞同：0
> 
> 时间：2013-02-22T18:45:44.323
> 
> 标签：assembly, mips

我试图对此发表评论以弄清楚它的作用

"$a0 是一个整数参数，而 $a1 是一个指向大型数组的指针（即：地址）。$a0 中的值可以是任何整数，并且 $a1 指向的数组的大小足够大（如只要您不在 $a1 之前取消引用内存，您就不会访问不属于您的内存）以使代码正常工作。”

最初只是将 31 添加到 t1 和 t0 然后循环开始，您正在执行一些操作，但后来我迷路了

有人可以帮帮我吗？

```
addi $t1 $zero 31
addi $t0 $zero 31
loop:srlv $t3 $a0 $t1
andi $t3 $t3 1
addi $t3 $t3 48
sub $t4 $t0 $t1
add $t2 $a1 $t4
sb $t3 0($t2)
beq $t1 $zero done
subi $t1 $t1 1
j loop
done:sb $zero 1($t2)
jr $ra 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:46:16.230

在我看来，它正在创建`$a0`一个二进制值的字符串表示形式，并将其存储在`$a1`. 例如，如果`$a0`有值`0x56`(binary `01010110`)，你会得到字符串`"01010110"`（`$a1`你实际上会得到所有 32 位，但为了简单起见，我在示例中省略了前 24 位）。

下面是代码在 C 中的样子：

```
for (t1 = 31; ; t1--) {
    a2 = &a1[31 - t1];
    *a2 = ((a0 >> t1) & 1) + '0':  // '0' == 48
    if (t1 == 0) break;
}
a2[1] = 0;  // NULL-terminator 
```

# c# - 尝试将文本文件读入类然后循环

> ID：15031087
> 
> 赞同：0
> 
> 时间：2013-02-22T18:45:49.347
> 
> 标签：c#, io

嗨，当涉及到 c# 时，我是一个相当新手，我一直在尝试读出一个文本文件，然后将其拆分为带有类的部分，但是在声明它们的位置以及如何循环浏览记录方面遇到了麻烦。这是我的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.IO;
using System.Collections;
using System.Windows.Forms;

namespace Assignment_3
{
     public partial class Form1 : Form
    {
        string s;
        string ss;
        int i = 1;
        string infilename;
        int num;
        SortedList sList = new SortedList();
        int x = 0;

        public Form1()
        {
            InitializeComponent();
            student myself = new student();
            infilename = "text.txt";
            StreamReader sr1 = new StreamReader(infilename);
            sList.Clear();
            while ((s = sr1.ReadLine()) != null)
            {
                string[] strs = s.Split(',');

                myself.firstname = strs[0];
                myself.middlename = strs[1];
                myself.surname = strs[2];
                myself.dob = DateTime.Parse(strs[3]);
                myself.dob.ToString(strs[3]);
                myself.sex = strs[4];
                ss = myself.dob.ToString("u");
                sList.Add(myself.firstname, myself);

            }
             sr1.Close();
             num = sList.Count;
             student[] pArray = new student[num];
             string[] keys = new string[num];

             foreach (DictionaryEntry d in sList)
             {
                 keys[x] = (string)d.Key;
                 pArray[x] = (student)d.Value;
                 x++;
             }
             if (i == 0)
             {lblmessage.Text = "Already at the first record."; i = 1; }
             if (i == num)
             {lblmessage.Text = "Already at the last record.";i = num-1; }

             lbllastname.Text = pArray[i].surname;
             lblfirstname.Text = pArray[i].firstname;
             lblsecondname.Text = pArray[i].middlename;
             lbldob.Text = pArray[i].dob.ToString();
             lblsex.Text = pArray[i].sex;

        }

        private void btnlast_Click(object sender, EventArgs e)
        {
            i = num;

        }
        private void btnfirst_Click(object sender, EventArgs e)
        {
            i = 0;
        }

        private void btnnext_Click(object sender, EventArgs e)
        {
            i++;

        }

        private void btnprev_Click(object sender, EventArgs e)
        {
            i--;
        }

    }
} 
```

和我的班级文件

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Assignment_3
{
    class student
    {
        public string firstname;
        public string middlename;
        public string surname;
        public DateTime dob;
        public string sex;
    }
} 
```

有人知道哪里出错了吗？我没有错误，但发现文本字段没有用新记录更新，然后当单步通过数组类保存正确数量的记录和字段时，我觉得这将是一件非常明显的事情，我不能把它放在上面.

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:24:09.677

您应该创建`student`内部`for`循环的新实例。因为目前您只有一个学生类实例，并且其中的所有项目`SortedList`都指向同一个对象。

# python - 在 Python 中从字符串中删除一个字符

> ID：15031088
> 
> 赞同：0
> 
> 时间：2013-02-22T18:45:51.597
> 
> 标签：python, string, replace, char

我正在尝试从 python 中不需要的字符串中删除一些字符，但据我所知，replace 函数应该可以正常工作，但不是:(

顺便说一句（这只是一个简单的字数统计功能）

**代码**

```
fileName = "simple.txt"
inputFile = open(fileName, "rb")

wordCount = {}

for line in inputFile:
    splitted = line.split(" ")
    for word in splitted:
        word.replace('\n','') #It's not removing this chars from words
        word.replace('?','')  #Nor this ones

        if word in wordCount:
            wordCount[word] = wordCount[word] + 1
        else:
            wordCount[word] = 1

print wordCount 
```

**输入**

> 一个人必须走多少路才能称他为男人？一只白鸽在沙中入睡之前必须航行多少海？是的，炮弹必须飞多少次才能被永远禁止？我朋友的答案随风飘扬 答案随风飘扬。
> 
> 是的，一座山能存在多少年才会被冲入大海？是的，有些人在被允许自由之前可以存在多少年？是的，一个人可以多少次转头假装他只是没看到？我朋友的答案随风飘扬 答案随风飘扬。
> 
> 是的，一个人必须仰望多少次才能真正看到天空？是的，一个人必须有多少只耳朵才能听到人们的哭声？是的，他要死多少人才能知道死了太多人？我朋友的答案随风飘扬 答案随风飘扬。

**输出**

> {'ears': 1, 'Yes,': 7, 'allowed': 1, 'knows\n': 1, 'sleeps': 1, 'people': 3, 'seas': 1, 'is': 6, '\n': 2, 'some': 1, 'it': 1, 'walk': 1, 'How': 2, 'see': 1, "blowin'": 6, 'have': 1, 'in': 7, 'roads': 1, 'up\n': 1, 'free?\n': 1, 'cry?\n': 1, 'really': 1, 'one': 1，'山'：1，'他'：4，'just'：1，'to'：2，'it's'：1，'deaths'：1，'washed'：1，'head\n'： 1, 'how': 7, 'down\n': 1, 'call': 1, 'take': 1, 'Pretending': 1, 'answer': 6, 'have\n': 1, 'white '：1，'必须'：5，'不'：1，'朋友'：3, 'can': 5, 'be': 1, 'sail\n': 1, 'his': 1, 'wind\n': 3, 'sea?\n': 1, 'cannon': 1 , 'till': 1, 'see?\n': 1, 'wind.\n': 3, 'man?\n': 1, 'you': 1, 'banned?\n': 1, ' hear': 1, 'too': 1, 'sky?\n': 1, 'The': 6, 'sand?\n': 1, 'dove': 1, 'him': 1, 'man' : 4, 'a': 6, "他们是": 2, 'forever': 1, 'balls': 1, 'look': 1, 'fly\n': 1, 'many': 10, '存在\n': 2, 'times': 3, 'will': 1, 'turn': 1, 'died?\n': 1, 'she': 1, 'the': 10, 'years': 2，“我的”：3，“那个”：1，“之前”：7}his': 1, '风\n': 3, '海?\n': 1, 'cannon': 1, 'till': 1, 'see?\n': 1, '风.\n': 3, 'man?\n': 1, 'you': 1, 'banned?\n': 1, 'hear': 1, 'too': 1, 'sky?\n': 1, 'The' : 6, 'sand?\n': 1, 'dove': 1, 'him': 1, 'man': 4, 'a': 6, "they're": 2, 'forever': 1, 'balls': 1, 'look': 1, 'fly\n': 1, 'many': 10, 'exist\n': 2, 'times': 3, 'will': 1, 'turn': 1, '死了?\n': 1, 'she': 1, 'the': 10, 'years': 2, 'my': 3, 'that': 1, 'Before': 7}his': 1, '风\n': 3, '海?\n': 1, 'cannon': 1, 'till': 1, 'see?\n': 1, '风.\n': 3, 'man?\n': 1, 'you': 1, 'banned?\n': 1, 'hear': 1, 'too': 1, 'sky?\n': 1, 'The' : 6, 'sand?\n': 1, 'dove': 1, 'him': 1, 'man': 4, 'a': 6, "they're": 2, 'forever': 1, 'balls': 1, 'look': 1, 'fly\n': 1, 'many': 10, 'exist\n': 2, 'times': 3, 'will': 1, 'turn': 1, '死了?\n': 1, 'she': 1, 'the': 10, 'years': 2, 'my': 3, 'that': 1, 'Before': 7}3, 'man?\n': 1, 'you': 1, 'banned?\n': 1, 'hear': 1, 'too': 1, 'sky?\n': 1, 'The' : 6, 'sand?\n': 1, 'dove': 1, 'him': 1, 'man': 4, 'a': 6, "they're": 2, 'forever': 1, 'balls': 1, 'look': 1, 'fly\n': 1, 'many': 10, 'exist\n': 2, 'times': 3, 'will': 1, 'turn': 1, '死了?\n': 1, 'she': 1, 'the': 10, 'years': 2, 'my': 3, 'that': 1, 'Before': 7}3, 'man?\n': 1, 'you': 1, 'banned?\n': 1, 'hear': 1, 'too': 1, 'sky?\n': 1, 'The' : 6, 'sand?\n': 1, 'dove': 1, 'him': 1, 'man': 4, 'a': 6, "they're": 2, 'forever': 1, 'balls': 1, 'look': 1, 'fly\n': 1, 'many': 10, 'exist\n': 2, 'times': 3, 'will': 1, 'turn': 1, '死了?\n': 1, 'she': 1, 'the': 10, 'years': 2, 'my': 3, 'that': 1, 'Before': 7}'forever': 1, 'balls': 1, 'look': 1, 'fly\n': 1, 'many': 10, 'exist\n': 2, 'times': 3, 'will': 1, '转': 1, '死了?\n': 1, 'she': 1, 'the': 10, 'years': 2, 'my': 3, 'that': 1, 'Before' : 7}'forever': 1, 'balls': 1, 'look': 1, 'fly\n': 1, 'many': 10, 'exist\n': 2, 'times': 3, 'will': 1, '转': 1, '死了?\n': 1, 'she': 1, 'the': 10, 'years': 2, 'my': 3, 'that': 1, 'Before' : 7}

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T18:47:17.993

`.replace()` *返回*更改后的字符串。存储该返回值：

```
word = word.replace('\n','') 
```

您可以链接替换调用：

```
word = word.replace('\n','').replace('?','') 
```

字符串是不可变的，它们不能就地更改。

最后但并非最不重要的一点：用于[`collections.Counter()`](http://docs.python.org/2/library/collections.html#counter-objects)计数单词，它提供了许多额外的功能，使使用频率计数更容易：

```
from collections import Counter

with open(fileName, "rb") as inputFile:
    wordCount = Counter(w.replace('?', '')
        for line in inputFile for w in line.split()) 
```

`wordCount`它用一行创建你的结构。请注意，这`.split()`将有效地为您去除额外的空格和换行符。

请注意，如果您要从单词的开头或结尾删除标点符号，您应该真正使用该[`.strip()`方法](http://docs.python.org/2/library/stdtypes.html#str.strip)：

```
wordCount = Counter(w.strip('.,:?')
    for line in inputFile for w in line.split()) 
```

其中`.strip('.,:?')`将删除参数中列出的开头或结尾处的所有字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:47:12.890

`string.replace`不是就地操作，它返回一个值（新字符串）。因此，您需要这样做：

```
word = word.replace('\n', '') 
```

还有一件事：

`string.split()`没有任何参数的情况下会自动拆分*所有*空格，因此如果您删除`" "`，您一开始就不必这样做`.replace('\n', '')`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:50:21.910

python中的字符串是不可变的。这意味着您不会使用其方法修改字符串，而是使用诸如替换之类的方法返回新的字符串值，然后您必须将其存储在变量中。

更具体地说，这意味着给定一个字符串 s：

```
s = 'Some string' 
```

然后

```
s.replace('string','hello') 
```

简单地返回字符串'Some hello'，但该值被简单地丢弃并且s仍然是'Some string'。要修改 s，您必须将返回的变量显式存储回 s 中，如下所示：

```
s = s.replace('string','hello') 
```

现在 s 是“你好”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T18:03:23.020

如我所见，一种温和的方法是编写一个函数：

```
def remove_words (word, *to_replace):
for replace_word in to_replace:
    word = word.replace(replace_word, '')
return word 
```

# c# - 数据网格读取 XML

> ID：15031091
> 
> 赞同：1
> 
> 时间：2013-02-22T18:45:53.713
> 
> 标签：c#, datagrid

myi 正在尝试从 xml 中读取并将其显示在 Datagrid 中。这是我的数据网格中的代码。

> string filePath = "xml 路径";
> 
> dsAuthors.ReadXml(filePath);

```
 dataGrid1.DataSource = dsAuthors;
        dataGrid1.DataMember = "authors";
        dataGrid1.CaptionText = dataGrid1.DataMember; 
```

它工作正常但是..

> dataGrid1.CaptionText = dataGrid1.DataMember;

说它不存在？我可以请一些建议谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:18:50.063

CaptionText 属性已被微软删除，因为过去没有人使用它。因此，要回答您的问题，该属性不存在。而已。

另见：[http ://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/15fabc1f-51d9-4814-84b0-69c0a055c512/](http://social.msdn.microsoft.com/forums/en-US/winformsdatacontrols/thread/15fabc1f-51d9-4814-84b0-69c0a055c512/)

# c# - 如何使用 c# 在 unity3d 中从 fps 控制器绘制箭头

> ID：15031094
> 
> 赞同：0
> 
> 时间：2013-02-22T18:46:06.583
> 
> 标签：c#, unity3d

我想知道如何附加箭头以显示 fps 控制器所面向的方向。我正在使用下面的方法来获得我将用来扔石头的力量。

```
 void OnGUI() {
        hSbarValue = GUI.HorizontalScrollbar(new Rect(25, 25, 100, 30), Mathf.PingPong(Time.time*5.0f, 19), 1.0F, 0.0F, 19.0F);
    } 
```

我还希望箭头根据关闭该方法的电源来更改其大小。

我不知道如何做到这一点，所以任何帮助将不胜感激。

感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T20:28:56.850

3D箭头？创建一个箭头游戏对象（您必须自己创建模型），然后使用**LookAt**指向您的目标：

```
void Update(){
    arrowObject.transform.LookAt(target);
} 
```

您可以缩放的尺寸：

```
void Update(){
    arrowObject.transform.LookAt(target);
    arrowObject.transform.localScale = new Vector3(scale,scale,1.0f);
} 
```

对于我的示例，我的箭头对象朝下 Z 轴，这就是为什么我只缩放 X/Y 以使箭头变细/变胖但不加长箭头。同样的假设是为什么**transform.LookAt**有效，我的箭头已经指向游戏对象的前向向量。

# cucumber - Cucumber 场景的清理步骤

> ID：15031096
> 
> 赞同：16
> 
> 时间：2013-02-22T18:46:23.763
> 
> 标签：cucumber

有没有办法为 Cucumber 中的某个功能定义所有场景的清理步骤？我知道这`Background`是用来定义它后面的每个场景的设置步骤，但是有没有办法定义在每个场景结束时发生的类似事情？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-27T15:30:55.340

还应该注意“之前”和“之后”是全局挂钩，即这些挂钩针对功能文件中的每个场景运行

如果您希望只为几个测试用例（按标签分组）运行设置和拆卸，那么您需要使用 taggedHooks，其中语法为

```
Before('@cucumis, @sativus') do
# This will only run before scenarios tagged
# with @cucumis OR @sativus.
end

AfterStep('@cucumis', '@sativus') do
# This will only run after steps within scenarios tagged
# with @cucumis AND @sativus.
end 
```

欲了解更多信息：[https ://github.com/cucumber/cucumber/wiki/Hooks](https://github.com/cucumber/cucumber/wiki/Hooks)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-22T19:14:51.057

您可以使用在每个场景之后运行的 After[挂钩](https://github.com/cucumber/cucumber/wiki/Hooks)：

```
After do
  ## teardown code
end 
```

还有一个 Before 挂钩，可让您在场景之前设置状态和/或测试数据：

```
Before do
  ## setup code
end 
```

Before 和 After 钩子提供`setup`和`teardown`from的功能`Test::Unit`，它们通常位于目录中`hooks.rb`。`features/support`

# windows-phone-7 - 如何绑定多边形点的 Y 值

> ID：15031097
> 
> 赞同：0
> 
> 时间：2013-02-22T18:46:24.170
> 
> 标签：windows-phone-7, silverlight-4.0, windows-phone-8

对于 WP8 应用程序，我想将多边形点的 Y 值绑定到属性。但这似乎不可能，因为我在绑定行收到错误消息“XamlParseException”

这是 Xaml 代码：

```
 <Polygon Grid.Row="0" Fill="#66323232">
            <Polygon.Points>
                <Point X="0" Y="0"/>
                    <Point X="0" Y="{Binding HauteurPopUp}"/>
                    <Point X="1" Y="{Binding HauteurPopUp}"/>
                <Point X="1" Y="0"/>
                <Point X="0" Y="0"/>
            </Polygon.Points>
   </Polygon> 
```

这是财产

```
 public Int32 HauteurPopUp
    {
        get
        {
            return 300;
        }
    } 
```

任何想法 ？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:17:55.610

`as I get the error message "XamlParseException"`

那不是消息，那是异常*Type*。

该消息可能`Y`不是 DependencyProperty，因此您无法绑定到它。这种绑定永远不会起作用。

即使绑定是可能的，一旦你更新了 Y 的值，就没有这个*变化的通知*，所以`Polygon`不会知道它的任何点已经改变了。

您需要做的是绑定到`Polygon.Points`DependencyProperty*类型*的[PointCollection](http://msdn.microsoft.com/en-us/library/system.windows.media.pointcollection.aspx)。不幸的是，`PointCollection`它没有实现任何可观察的接口，所以你不能只改变一个实例；每次更改一个点时，您必须`PointCollection`手动`Polygon`或通过设置绑定到`Polygon.Points`.

我不会为你编写代码，但算法是这样的

1.  加载时，创建一个`PointCollection`，用它应该包含的初始`Point`s 填充它，并设置`Polygon.Points`为等于这个集合（直接或通过绑定）
2.  等待`Point`集合中任何个人的更改（？？？）
3.  ~~利润~~创建一个新的`PointCollection`，用（你可以重复使用相同的）填充它，`Points`在需要的地方应用更新，并设置`Polygon.Points`为等于这个实例
4.  转到第 2 步。

# ruby-on-rails - 在没有弹出栏的情况下邀请 facebook 朋友加入应用程序

> ID：15031102
> 
> 赞同：0
> 
> 时间：2013-02-22T18:46:38.627
> 
> 标签：ruby-on-rails, facebook

我正在制作一个简单的应用程序来练习学习 Rails 和 Web 开发。

我想做的是列出 facebook 朋友，这样我就可以邀请那些没有应用程序的人来和我一起使用它。

目前我正在关注一个教程，它会在 facebook 上弹出我可以将应用程序发送到的朋友。但是，我想删除弹出选项并简单地在页面上显示 facebook 好友邀请列表（即复选框、名称、图片）。我该怎么做呢？

这是我的 Home.html.erb 代码。如果您有任何建议，请告诉我。谢谢！

```
<div id="friends">

#instead of the below link which creates the pop up, I'd like the page to 
#simply display the facebook friends to invite

<p><%= link_to "Invite your Facebook Friends","#",:id=>"invite_fb_friends"%></p>

<div id="fb-root"></div>
<script src ="http://connect.facebook.net/en_US/all.js"></script>
<script>
$(function(){
    $("a#invite_fb_friends").click(function(){
        FB.init({
            appId:'1234567890', #<--fake appid, my code includes the my actual app id
            cookie:false,
            status:true
        });

        FB.ui({method:'apprequests',message:'<%=current_user.name%> would like to invite you to try out our app!'});
    });
});
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:53:07.803

您可以通过以下方式获取用户的好友信息（前提是您具有访问令牌中的权限）：

```
https://graph.facebook.com/:facebook_user_id/friends?access_token=token 
```

您将收到用户朋友的 json 响应。简单解析 JSON 代码，并从他们的视图中创建好友列表。使用复选框或其他东西，编译他们选择的每个 ID，并创建一个[请求](https://developers.facebook.com/docs/concepts/requests/)

要查看数据的样子，请转到：[https ://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)

并放入`/me/friends`

# android - 无效视图翻转添加视图

> ID：15031104
> 
> 赞同：0
> 
> 时间：2013-02-22T18:46:48.910
> 
> 标签：android, android-view, textview, viewflipper

我在我的应用程序中使用了一个视图翻转器，并在其中添加了一些视图。哪些是完美添加的，现在我想设置添加视图的文本视图的文本。

我膨胀了 textview 和 settext 并使鳍状肢无效，但文本不会反映在屏幕上。

```
LayoutInflater inflate = getLayoutInflater();

View view = (View) inflate.inflate(R.layout.activity_ask_ques_image,
        null);

TextView txtQuesName = (TextView) view.findViewById(R.id.txtQuestion);
System.out.println(txtQuesName.getText());
txtQuesName.setText("Type ID " + i + " ");
flipper.invalidate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:38:38.187

您似乎没有将视图添加到视图翻转器。

本质上，每次调用 LayoutInflater.inflate 时，您都在构建视图层次结构的全新实例，因此它不会访问您在屏幕上获得的前一个实例。

您希望在现有视图（不是新膨胀的视图）上执行 findViewById 以访问正确的 textview 实例，或者希望在将 textview 添加到翻转器时保留对它的引用（假设它是通过编程方式添加的）。

# c# - 为什么我不能 ExecuteNonQuery()？

> ID：15031107
> 
> 赞同：1
> 
> 时间：2013-02-22T18:46:58.193
> 
> 标签：c#, sql-server, winforms, combobox

这是我的代码：

```
 private void loadlist()
   {
      comboBox1.Items.Clear();
      cn.Open();
      cmd.CommandText = "Select * from info";
      dr = cmd.ExecuteNonQuery();
      if (dr.HasRows)
      {
         while (dr.Read())
         {
            comboBox1.Items.Add(dr[0].ToString());
         }
         cn.Close();
      }
    } 
```

错误发生在这一行：

```
dr = cmd.ExecuteNonQuery(); 
```

我在用`System.Data.SqlClient;`

和：

```
SqlConnection cn = new SqlConnection(@"//HERE IS MY STRING CONNECTION");
SqlCommand cmd = new SqlCommand();
SqlDataReader dr; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T18:48:56.843

这是 a 的正确代码`SqlDataReader`：

```
dr = cmd.ExecuteReader(); 
```

`ExecuteNonQuery()`仅用于（惊喜，惊喜）**不是**查询的事情，即不返回数据的 SQL 命令（如 UPDATE 和 DELETE）。

您还需要将连接分配给命令。

```
cmd.Connection = cn;
cn.Open(); 
```

您还应该记住在完成后关闭阅读器和连接。或者使用`using`块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:51:15.083

ExecuteNonQuery 针对连接执行 Transact-SQL 语句并返回受影响的行数，例如 UPDATE、INSERT 或 DELETE 请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)

您可以使用

```
ExecuteReader(); 
```

[MSDN](http://msdn.microsoft.com/en-us/library/9kcbe65k.aspx)上的更多文档

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:54:37.187

您应该使用`SqlDataReader`and`ExecuteReader`方法从 select 语句中读取数据行。例子：

```
private static void ReadOrderData(string connectionString)
{
    string queryString =
        "SELECT OrderID, CustomerID FROM dbo.Orders;";

    using (SqlConnection connection =
               new SqlConnection(connectionString))
    {
        SqlCommand command =
            new SqlCommand(queryString, connection);
        connection.Open();

        SqlDataReader reader = command.ExecuteReader();

        // Call Read before accessing data.
        while (reader.Read())
        {
            Console.WriteLine(String.Format("{0}, {1}",
                reader[0], reader[1]));
        }

        // Call Close when done reading.
        reader.Close();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T10:04:52.450

***执行非查询***

ExecuteNonQuery 方法将返回受 INSERT、DELETE 或 UPDATE 操作影响的行数。此 ExecuteNonQuery 方法将仅用于插入、更新和删除、创建和 SET 语句。

***执行标量***

执行标量将在使用命令对象执行 SQL 查询或存储过程时返回单行单列值，即单值。从数据库中检索单个值非常快。

***执行阅读器***

执行阅读器将用于在使用命令对象执行 SQL 查询或存储过程时返回行集。这是只向前检索记录，它用于从头到尾读取表值。

在你的情况下`dr = cmd.ExecuteNonQuery();`

`dr`是`IdataReader(DataReader)`所以你不能使用`ExecuteNonQuery`.....而不是这个使用`ExecuteReader`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T18:59:43.287

使用`cmd.ExecuteReader()`而不是`cmd.ExecuteNonQuery()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-23T00:00:02.067

试试这段代码，一切都会好起来的。

```
private void loadlist()
{
  comboBox1.Items.Clear();
  cn.Open();
  cmd.CommandText = "Select * from info";
  dr = cmd.ExecuteReader()

     while (dr.Read())
     {
        comboBox1.Items.Add(dr.GetString(0));
     }
  cn.Close();

} 
```

# php - php 和 mysql_fetch 数组

> ID：15031108
> 
> 赞同：-2
> 
> 时间：2013-02-22T18:47:03.667
> 
> 标签：php, mysql, arrays, associative

我在使用这个脚本时遇到了问题，我将不胜感激：

```
<? php

//ini_set('display_errors', '1');

//MQSQL connection
require_once('../../include/init.phph');

function transportQueue(){
//siteinfoDbCon();
siteinfoDbConNoLag();

$query = "SELECT 
        a.transport_id, a.site_id, b.site_name, c.name as 'From DC', 
        d.name as 'To DC', a.cutover, a.working, a.error 
        FROM transport_queue a 
        INNER JOIN sites b ON(a.site_id=b.site_id) 
        INNER JOIN datacenters c ON(a.from_dc_id=c.datacenter_id) 
        INNER JOIN datacenters d ON(a.to_dc_id=d.datacenter_id) 
        WHERE 
        a.cutover BETWEEN NOW() AND ADDDATE(NOW(), INTERVAL 7 day) 
        ORDER BY a.cutover";

//Pull results
$results=mysql_query($query);

//Return into an array $transports
while($row=mysql_fetch_array($results,MYSQL_BOTH)){
  $transports[]=$row;
  print_r($transports[0]["site_id"]);
}

//Free up the results 
mysql_free_result($results);

//Close the db connection
siteinfoDbClose();

}
transportQueue();
?> 
```

我可以确认查询有效并且数据库连接有效……我不知所措。

我正在尝试将结果返回到关联数组中。我确实查看了以下问题/答案： [Dump mysql_fetch_array results into a multidimensional array](https://stackoverflow.com/questions/8611207/dump-mysql-fetch-array-results-into-a-multidimensional-array)

尝试去

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:53:37.207

这个

```
while($row=mysql_fetch_array($results,MYSQL_BOTH)){
  $transports[]=$row;
  print_r($transports[0]["site_id"]);
} 
```

替换这个

```
$transport = array();
while($row=mysql_fetch_assoc($results))
  $transports[]=$row;

print_r($transports); 
```

是时候迁移到 MySQLi [http://www.php.net/manual/en/book.mysqli.php](http://www.php.net/manual/en/book.mysqli.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:58:20.853

这一行：

```
print_r($transports[0]["site_id"]); 
```

...总是在第一行传输中查看单个值 ['siteid']，而不是数组。将其拉出，然后在循环结束后运行：

```
print_r($transports); 
```

...你应该得到你所追求的结果。

# actionscript-3 - AS3 #1067 将 flash.utils.timer 类型的值隐式强制转换为不相关的类型函数

> ID：15031109
> 
> 赞同：0
> 
> 时间：2013-02-22T18:47:05.027
> 
> 标签：actionscript-3, flash, timer, flashdevelop

我一直收到这个错误，我不知道如何修复它，它在另一个类中工作，所以它应该在这里工作，对吧？（我把它从那个类移到这个类）唯一的区别是这个类扩展了“Game”而另一个类扩展了“MovieClip”

```
1067: Implicit coercion of a value of type flash.utils:Timer to an unrelated type Function.

public static var timeLeft;

public function GamePlay() {
    // Start timer
    var timeCounter:Timer = new Timer(1000, timeLeft)
    timeCounter.addEventListener(TimerEvent.TIMER, timeCounter);
    timeCounter.start();
}

// Handle time counter
public function timeCounter(e:TimerEvent):void {
    timeLeft--;
    trace(timeLeft);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:07:11.950

您需要为 Timer 对象和侦听器函数指定不同的名称：

```
public static var timeLeft:int;

var timer:Timer = new Timer(1000, timeLeft)
timer.addEventListener(TimerEvent.TIMER, timeCounter);
timer.start();

public function timeCounter(e:TimerEvent):void {
    timeLeft--;
    trace(timeLeft);
} 
```

我假设 timeLeft 设置在其他地方？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:07:56.037

您的函数和您的函数`Timer`都被调用`timeCounter`，因此它认为您正在尝试将`Timer`函数作为函数传递（因此出现错误）。您应该重命名两者之一，这里我重命名了函数：

```
public static var timeLeft;

// Start timer
var timeCounter:Timer = new Timer(1000, timeLeft)
timeCounter.addEventListener(TimerEvent.TIMER, timeCountHandler);
timeCounter.start();

// Handle time counter
public function timeCountHandler(e:TimerEvent):void {
    timeLeft--;
    trace(timeLeft);
} 
```

# java - 找不到适合 jdbc 的驱动程序：mysql://localhost/db

> ID：15031115
> 
> 赞同：1
> 
> 时间：2013-02-22T18:47:25.687
> 
> 标签：java, sql, jsp, jdbc

我是一个 java 初学者并试图在 db 中插入一行。这是我第一次在 java 中执行插入操作。大约 2 小时，我在谷歌上搜索并感到沮丧，无法解决我的错误。我打电话给我的朋友，他在团队查看器中为我提供了实时支持，并且只在我的程序中添加了一行代码。

```
Class.forName("com.mysql.jdbc.Driver") 
```

谁能解释一下为什么我们需要在连接字符串之前将其包含在我的代码中。是否有必要每次都将我的代码放在那里。请详细解释我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:27:59.060

这是一些非常简化的代码，说明了驱动程序初始化的工作原理。有 3 个类，请将每个类放在一个适当命名的文件中。

```
import java.util.HashMap;
import java.util.Map;

public class DriverMgr {
    private static final Map<String, Class<?>> DRIVER_MAP = new HashMap<String, Class<?>>();

    public static void registerDriver(final String name, final Class<?> cls) {
        DRIVER_MAP.put(name, cls);
    }

    public static Object getDriver(final String name) {
        final Class<?> cls = DRIVER_MAP.get(name);
        if (cls == null) {
            throw new RuntimeException("Driver for " + name + " not found");
        }
        try {
            return cls.newInstance();
        } catch (Exception e) {
            throw new RuntimeException("Driver instantiation failed", e);
        }
    }
}

public class MysqlDriver {
    static {
        // hello, I am a static initializer
        DriverMgr.registerDriver("mysql", MysqlDriver.class);
    }

    @Override
    public String toString() {
        return "I am the mysql driver";
    }
}

public class TestProg {
    public static void main(final String... args) {
        try {
            Class.forName("MysqlDriver"); // try with or without this
        } catch (Exception e) {
            throw new RuntimeException("Oops, failed to initialize the driver");
        }
        System.out.println(DriverMgr.getDriver("mysql"));
    }
} 
```

当您调用 Class.forName 时，将加载驱动程序类并执行静态初始化程序。这反过来将驱动程序类注册到驱动程序管理器，以便管理器现在知道它。显然，这只需要执行一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:12:30.747

基本思想是这个动作强制驱动类在 JDBC 的驱动管理器中注册。

方法 Class.forName("fully qualified class name) 用于初始化类的静态字段并将 JDBC 驱动程序类（在您的情况下为 MySQL 驱动程序）加载到您的应用程序。当它被实例化时，它被注册到 DriverManager . 通过后者创建连接，使用 Connection connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/databasename","login","password");，稍后您将使用它来查询数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:02:09.133

是的，每次都必须包括在内。但您可以使用不重复代码的方法。

例如

```
public void connectToMYSQL(){
try{
Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/yourdatabase","username",""password);
}catch(Exception ex)
{
System.out.println(ex.getMessage());
} 
```

}

在编写任何sql语句之前，只需调用例如方法

```
public void insert(String sql)
{
connectToMYSQL();
//.. then do your stuffs 

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T19:06:36.777

Class.forName("com.mysql.jdbc.Driver")

必须要求加载您正在使用的数据库的驱动程序。此行中的forNmae() 方法加载mysql 数据库的驱动程序。

# knockout.js - 带有 HTML5 属性的淘汰赛验证

> ID：15031119
> 
> 赞同：2
> 
> 时间：2013-02-22T18:47:29.780
> 
> 标签：knockout.js, knockout-validation, html5-validation

我可以将 HTML5 属性添加到我的元素以进行连线验证吗？

如果是这样，它似乎对我不起作用。我需要做一些额外的事情吗？

[http://jsfiddle.net/FcM2A/1/](http://jsfiddle.net/FcM2A/1/)

```
vm required<input data-bind="value: num1, valueUpdate: 'afterkeydown'"/><br/>
HTML5 required<input required="true" data-bind="value: num2, valueUpdate: 'afterkeydown'" /><br/>
num1 isValid: <span data-bind="text: num1.isValid()"></span><br/>
num2 isValid: <span data-bind="text: num2.isValid()"></span>
<p data-bind="text:ko.toJSON($root)"></p>

ko.validation.init( {parseInputAttributes: true, writeInputAttributes: true} ); //enable HTML5 validation, write HTML5 validation attributes to the controls

var viewModel = {
    num1: ko.observable("1").extend({ required: true }),
    num2: ko.observable("2")
};
ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-24T21:47:11.407

在这里试试：http: [//jsfiddle.net/FcM2A/29/](http://jsfiddle.net/FcM2A/29/)

您缺少： ko.validatedObservable(viewModel);

```
vm required<input data-bind="value: num1, valueUpdate: 'afterkeydown'"/><br/>
HTML5 required<input required="true" data-bind="value: num2, valueUpdate: 'afterkeydown'" /><br/>
num1 isValid: <span data-bind="text: num1.isValid()"></span><br/>
num2 isValid: <span data-bind="text: num2.isValid()"></span>
<p data-bind="text:ko.toJSON($root)"></p>

ko.validation.init( {parseInputAttributes: true, writeInputAttributes: true} ); //enable HTML5 validation, write HTML5 validation attributes to the controls

var viewModel = {
    num1: ko.observable("1").extend({ required: true }),
    num2: ko.observable("2")
};
ko.validatedObservable(viewModel);
ko.applyBindings(viewModel); 
```

# python - 使用 pySerial 发送的 ASCII 文本附加在终端设备上

> ID：15031121
> 
> 赞同：1
> 
> 时间：2013-02-22T18:47:40.097
> 
> 标签：python, serial-port, pyserial, plc

我正在尝试向设备发送两行 ASCII 文本，但设备将这两行读取为附加的一行。是延迟问题还是结束字符错误？我似乎真的看不出问题。

```
import serial
ser = serial.Serial('/dev/cu.usbserial-FTVFV0X7', 19200, timeout=10)
ser.write("x0")
ser.flush()
ser.write("11")
ser.flush() 
```

终端设备接收它`x011`而不是`x0`和`11`。

从普通终端程序测试时，分别接收这两行是没有问题的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:20:00.753

许多硬件串行设备使用回车来表示行或指令的结束。在不知道您尝试与之通信的设备（或它期望的协议）的情况下，我可能会建议尝试

```
ser.write("x0\r")
ser.flush()
ser.write("11\r") 
```

如[文档](http://pyserial.sourceforge.net/shortintro.html#eol)中所述，pySerial 不再支持 EOL 参数，`readline()`因此如果设备正在向您返回回复（并且正在使用`\r`终止行），那么您应该按照建议进行操作，并使用`io.TextIOWrapper`适当的超时来解析传入的数据.

# regex - 分隔符替换不包括字符串列内的字符

> ID：15031122
> 
> 赞同：0
> 
> 时间：2013-02-22T18:47:41.100
> 
> 标签：regex, shell, unix, awk

我有一个这种格式的 3Gb 文件：

```
...
201211 001093223359 "PLANO ESPECIAL" "PLANO NOVO"
201211 001199175239 "PLANO ESPECIAL" "PLANO NOVO"
201211 001292676219 "PLANO ESPECIAL" "PLANO NOVO"
... 
```

我需要将其格式更改为如下所示：

```
...
201211;001093223359;"PLANO ESPECIAL";"PLANO NOVO"
201211;001199175239;"PLANO ESPECIAL";"PLANO NOVO"
201211;001292676219;"PLANO ESPECIAL";"PLANO NOVO"
... 
```

前 5 行与输入文件中的完全相同：

```
"Mes_Referencia" "Num_Telefone" "Dsc_Plano_Tarifario" "Grupo Plano"
201211 2183223350 "INFINITY PR?" "PLANO INFINITY"
201211 2169175232 "INFINITY PR?" "PLANO INFINITY"
201211 2182676211 "INFINITY PR?" "PLANO INFINITY"
201211 2281699337 "INFINITY PR?" "PLANO INFINITY"
201211 2179173096 "INFINITY PR?" "PLANO INFINITY" 
```

**评论： ? 在“无限公关？” 是因为它是“É”（它是葡萄牙语 - 巴西）。**

如何将分隔符“”（空格）更改为“;” 不改变最后两列字符串中的空格？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:39:46.407

无论文件中有多少行，这都会起作用，因为它一次只处理一行：

```
awk 'BEGIN{FS=OFS="\""} {for (i=1;i<NF;i+=2) gsub(/ /,";",$i)} 1' file 
```

例如：

```
$ cat file
"Mes_Referencia" "Num_Telefone" "Dsc_Plano_Tarifario" "Grupo Plano"
201211 2183223350 "INFINITY PR?" "PLANO INFINITY"
201211 2169175232 "INFINITY PR?" "PLANO INFINITY"
201211 2182676211 "INFINITY PR?" "PLANO INFINITY"
201211 2281699337 "INFINITY PR?" "PLANO INFINITY"
201211 2179173096 "INFINITY PR?" "PLANO INFINITY"
$
$ awk 'BEGIN{FS=OFS="\""} {for (i=1;i<NF;i+=2) gsub(/ /,";",$i)} 1' file
"Mes_Referencia";"Num_Telefone";"Dsc_Plano_Tarifario";"Grupo Plano"
201211;2183223350;"INFINITY PR?";"PLANO INFINITY"
201211;2169175232;"INFINITY PR?";"PLANO INFINITY"
201211;2182676211;"INFINITY PR?";"PLANO INFINITY"
201211;2281699337;"INFINITY PR?";"PLANO INFINITY"
201211;2179173096;"INFINITY PR?";"PLANO INFINITY" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:59:27.063

通过以下命令过滤您的文件：

```
sed -E -e 's/ ([^ "]*|"[^"]*")/;\1/g' 
```

此命令假定第一列没有被引用。如果可以，正则表达式会稍微复杂一些。

样本输入：

```
201211 2183223350 "INFINITY PRE" "PLANO INFINITY"
201211 2182067250 "ASS. PLANO NOSSO MODO-G11" "OUTROS"
201211 8199712912 "TIM LIBERTY CONTROLE" "PLANO LIBERTY" 
```

样本输出：

```
201211;2183223350;"INFINITY PRE";"PLANO INFINITY"
201211;2182067250;"ASS. PLANO NOSSO MODO-G11";"OUTROS"
201211;8199712912;"TIM LIBERTY CONTROLE";"PLANO LIBERTY" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T20:04:57.437

如何用`;`和每个`" "`替换前 2 个空格`";"`

```
$ sed 's/ /;/;s/ /;/;s/" "/";"/g' file
201211;001093223359;"PLANO ESPECIAL";"PLANO NOVO"
201211;001199175239;"PLANO ESPECIAL";"PLANO NOVO"
201211;001292676219;"PLANO ESPECIAL";"PLANO NOVO" 
```

使用`-i`开关进行内联更改。

使用具有 30000003 行的文件的一些时间：

```
$ time sed 's/ /;/;s/ /;/;s/" "/";"/g' f1 > /dev/null

real    1m58.305s
user    1m54.811s
sys 0m1.488s

$ time awk 'BEGIN{FS=OFS="\""} {for (i=1;i<NF;i+=2) gsub(/ /,",",$i)} 1' f1 > /dev/null

real    1m46.916s
user    1m45.831s
sys 0m0.852s

$ time sed -E -e 's/ ([^ "]*|"[^"]*")/;\1/g' f1 > /dev/null

real    20m52.172s
user    20m47.430s
sys 0m2.536s 
```

即**贪婪**的运算符和反向引用的巨大惩罚！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T20:46:52.127

尝试：

```
awk 'NR%2{gsub(/[ \t]+/,";")}1' RS=\" ORS=\" file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T18:50:17.040

`awk`应该做的伎俩。

`awk -v OFS=";" '{print $1,$2,$3" "$4,$5" "$6}'`

# c# - 阅读 edmx，基础知识

> ID：15031131
> 
> 赞同：0
> 
> 时间：2013-02-22T18:48:09.777
> 
> 标签：c#, uml

关于阅读 edmx 文件的一个简单问题：如果我有以下图表

```
Account 1 ----- * Invitations 
```

这意味着一对多。

问题是，从这个图中怎么知道有`reversing relationship from Invitations to Account?`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:02:09.070

关系要么存在，要么不存在——这两个表要么相关，要么不相关。因此，它们之间不存在所谓的“反向关系”。

但是，我认为您要的是从一个到另一个的**导航属性的存在。**您可以通过查看每个表格框的“导航属性”部分来判断。有关图片的示例，请参阅[此链接。](http://thedatafarm.com/blog/data-access/designer-support-for-one-way-navigations-in-entity-framework-4/)

# c - 用户输入的字符串在 c 中运行特定的函数

> ID：15031132
> 
> 赞同：1
> 
> 时间：2013-02-22T18:48:10.300
> 
> 标签：c, pointers, function-pointers

伙计们，所以我正在处理 Web 服务分配，我让服务器发出随机的东西并读取 uri，但现在我想让服务器根据它在 uri 中读取的内容运行不同的功能。我知道我们可以使用函数指针来做到这一点，但我不确定如何读取 char* 并将其分配给函数指针并让它调用该函数。我正在尝试做的示例：http: [//pastebin.com/FadCVH0h](http://pastebin.com/FadCVH0h)

我可以使用我相信的 switch 语句，但想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:56:23.113

对于这样的事情，您将需要一个将`char *`字符串映射到函数指针的表。当您将函数指针分配给字符串时，程序会出现段错误，因为从技术上讲，函数指针不是字符串。

注意：以下程序仅用于演示目的。不涉及边界检查，它包含硬编码值和幻数

现在：

```
void print1()
{
   printf("here");
}

void print2() 
{
   printf("Hello world");
}
struct Table {
  char ptr[100];
  void (*funcptr)(void)
}table[100] = {
{"here", print1},
{"hw", helloWorld}
};

int main(int argc, char *argv[])
{
   int i = 0;
   for(i = 0; i < 2; i++){
      if(!strcmp(argv[1],table[i].ptr) { table[i].funcptr(); return 0;}
   }
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:08:06.633

我会给你一个非常简单的例子，我认为它有助于理解 C 中的函数指针有多好。（例如，如果你想制作一个 shell）

例如，如果您有这样的结构：

```
typedef struct s_function_pointer
{
    char*      cmp_string;
    int        (*function)(char* line);
}              t_function_pointer; 
```

然后，您可以设置要浏览的 t_function_pointer 数组：

```
int     ls_function(char* line)
{
      // do whatever you want with your ls function to parse line
      return 0;
}

int     echo_function(char* line)
{
      // do whatever you want with your echo function to parse line
      return 0;
}

void    treat_input(t_function_pointer* functions, char* line)
{
       int    counter;
       int    builtin_size;

       builtin_size = 0;
       counter = 0;
       while (functions[counter].cmp_string != NULL)
       {
             builtin_size = strlen(functions[counter].cmp_string);
             if (strncmp(functions[counter].cmp_string, line, builtin_size) == 0)
             {
                   if (functions[counter].function(line + builtin_size) < 0)
                          printf("An error has occured\n");
             }
             counter = counter + 1;
       }
}

int     main(void)
{
     t_function_pointer      functions[] = {{"ls", &ls_function},
                                            {"echo", &echo_function},
                                            {NULL, NULL}};
     // Of course i'm not gonna do the input treatment part, but just guess it was here, and you'd call treat_input with each line you receive.
     treat_input(functions, "ls -laR");
     treat_input(functions, "echo helloworld");
     return 0;
} 
```

希望这可以帮助 ！

# python - 在matplotlib中绘制具有许多补丁的多个图像的有效方法？

> ID：15031136
> 
> 赞同：5
> 
> 时间：2013-02-22T18:48:23.363
> 
> 标签：python, performance, matplotlib

我正在编写显示图像之间特征匹配的代码。目前代码运行速度相当慢。我对如何加快速度有一些想法，但我对 matplotlib 或它在幕后的工作方式还不是 100% 满意。

代码的基本结构是：（我省略了一些内容以使其更具可读性）

```
from matplotlib.patches import Rectangle, Circle, Ellipse
import matplotlib.gridspec as gridspec
from matplotlib.transforms import Affine2D
from scipy.linalg import inv, sqrtm
import matplotlib.pyplot as plt
import numpy as np 
```

*   添加列表图像。每个图像都有自己的轴：ax，并记住 ax.transData

    ```
    gs = gridspec.GridSpec( nr, nc )
    for i in range(num_images):
         dm.ax_list[i] = plt.subplot(gs[i])
         dm.ax_list[i].imshow( img_list[i])
         transData_list[i] = dm.ax_list[i].transData 
    ```

*   将特征表示可视化为椭圆

    ```
    for i in range(num_chips):
         axi =  chips[i].axi 
         ax  =  dm.ax_list[axi]
         transData = dm.transData_list[axi]
         chip_feats = chips[i].features
         for feat in chip_feats:
             (x,y,a,c,d) = feat
             A = numpy.array( [ ( a, 0, 0 ) ,
                                      ( c, d, 0 ) ,
                                      ( 0, 0, 1 ) ] , dtype=np.float64)
             EllShape = Affine2D( numpy.array(sqrtm( inv(A) ), dtype=np.float64) )
             transEll  = EllShape.translate(x,y)
             unitCirc = Circle((0,0),1,transform=transEll+transData)
             ax.add_patch(unitCirc) 
    ```

我已经使用 RunSnakeRun 来分析代码，我从中真正收集到的是绘制所有内容需要很长时间。当我了解 matplotlib 中的转换时，我的基本想法是在自己的坐标中绘制每个图像，然后保持几个转换，以便以后可以用它们做一些很酷的事情，但我怀疑它不会很好地缩放。

抽奖的实际输出如下所示：

![](../Images/7289f35e99f77d0e6b37ef24de20ff84.png)

当我调整它的大小时，这个图需要大约 4 秒才能重绘，我会想要平移/缩放。

我为每个特征添加了两个补丁，大约（每个图像 300 个特征），所以我可以看到轮廓和一些透明度。所以，这显然是有开销的。但即使没有任何省略号，它也相对较慢。

我还需要编写一些代码来在匹配特征之间添加线条，但现在我不太确定使用多个轴是否是一个好主意，尤其是当这是一个相对较小的数据集时。

因此，对于更具体的问题：

*   绘制椭圆与变换圆会更有效吗？使用 matplotlib 转换的开销是多少？
*   有没有办法组合一组补丁，以便它们一起转换或更有效？
*   将所有内容打包到单个轴中会更有效吗？如果我这样做，仍然可以使用转换的范例吗？还是转换是这里的罪魁祸首？
*   有没有一种快速的方法可以在矩阵 A 列表上执行 sqrtm( inv( A ) )？或者我把它们放在一个 for 循环中也一样吗？
*   我应该切换到 pyqtgraph 之类的东西吗？我不打算让它们成为平移和缩放之外的任何动画。（也许将来我想将这些嵌入到交互式图表中）

* * *

编辑：

我已经能够通过手动计算平方根倒矩阵的形式来提高绘图效率。它的速度也相当大。

在上面的代码中：

```
 A = numpy.array( [ ( a, 0, 0 ) ,
                          ( c, d, 0 ) ,
                          ( 0, 0, 1 ) ] , dtype=np.float64)
 EllShape = Affine2D( numpy.array(sqrtm( inv(A) ), dtype=np.float64) ) 
```

被替换为

```
 EllShape = Affine2D([\
 ( 1/sqrt(a),         0, 0),\
 ((c/sqrt(a) - c/sqrt(d))/(a - d), 1/sqrt(d), 0),\
 (         0,         0, 1)]) 
```

我也发现了一些有趣的计时结果：

```
 num_to_run = 100000
  all_setup  = ''' import numpy as np ; from scipy.linalg import sqrtm ; from numpy.linalg import inv ; from numpy import sqrt
  a=.1 ; c=43.2 ; d=32.343'''

  timeit( \
  'sqrtm(inv(np.array([ ( a, 0, 0 ) , ( c, d, 0 ) , ( 0, 0, 1 ) ])))',\
  setup=all_setup, number=num_to_run)
   >> 22.2588094075 #(Matlab reports 8 seconds for this run) 

  timeit(\
  '[ (1/sqrt(a), 0, 0), ((c/sqrt(a) - c/sqrt(d))/(a - d), 1/sqrt(d), 0), (0, 0, 1) ]',\
  setup=all_setup,  number=num_to_run)
  >> 1.10265190941 #(Matlab reports .1 seconds for this run) 
```

* * *

编辑 2

我已经使用 PatchCollection 和一些手动计算非常快速地计算和绘制了椭圆（大约一秒钟，我没有分析它）。唯一的缺点是我似乎无法将椭圆的填充设置为假

```
 from matplotlib.collections import PatchCollection
 ell_list = []
 for i in range(num_chips):
     axi =  chips[i].axi 
     ax  =  dm.ax_list[axi]
     transData = dm.transData_list[axi]
     chip_feats = chips[i].features
     for feat in chip_feats:
         (x,y,a,c,d) = feat
         EllShape = Affine2D([\
            ( 1/sqrt(a),         0, x),\
            ((c/sqrt(a) - c/sqrt(d))/(a - d), 1/sqrt(d), y),\
            (         0,         0, 1)])
         unitCirc = Circle((0,0),1,transform=EllShape)
         ell_list = [unitCirc] + ell_list
    ellipses = PatchCollection(ell_list)
    ellipses.set_color([1,1,1])
    ellipses.face_color('none') #'none' gives no fill, while None will default to [0,0,1]
    ellipses.set_alpha(.05)
    ellipses.set_transformation(transData)
    ax.add_collection(ellipses) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T15:38:26.687

我已经能够通过手动计算平方根倒矩阵的形式来提高绘图效率。它的速度也相当大。

在上面的代码中：

```
 A = numpy.array( [ ( a, 0, 0 ) ,
                          ( c, d, 0 ) ,
                          ( 0, 0, 1 ) ] , dtype=np.float64)
 EllShape = Affine2D( numpy.array(sqrtm( inv(A) ), dtype=np.float64) ) 
```

被替换为

```
 EllShape = Affine2D([\
 ( 1/sqrt(a),         0, 0),\
 ((c/sqrt(a) - c/sqrt(d))/(a - d), 1/sqrt(d), 0),\
 (         0,         0, 1)]) 
```

我也发现了一些有趣的计时结果：

```
 num_to_run = 100000
  all_setup  = ''' import numpy as np ; from scipy.linalg import sqrtm ; from numpy.linalg import inv ; from numpy import sqrt
  a=.1 ; c=43.2 ; d=32.343'''

  timeit( \
  'sqrtm(inv(np.array([ ( a, 0, 0 ) , ( c, d, 0 ) , ( 0, 0, 1 ) ])))',\
  setup=all_setup, number=num_to_run)
   >> 22.2588094075 #(Matlab reports 8 seconds for this run) 

  timeit(\
  '[ (1/sqrt(a), 0, 0), ((c/sqrt(a) - c/sqrt(d))/(a - d), 1/sqrt(d), 0), (0, 0, 1) ]',\
  setup=all_setup,  number=num_to_run)
  >> 1.10265190941 #(Matlab reports .1 seconds for this run) 
```

* * *

编辑 2

我已经使用 PatchCollection 和一些手动计算非常快速地计算和绘制了椭圆（大约一秒钟，我没有分析它）。唯一的缺点是我似乎无法将椭圆的填充设置为假

```
 from matplotlib.collections import PatchCollection
 ell_list = []
 for i in range(num_chips):
     axi =  chips[i].axi 
     ax  =  dm.ax_list[axi]
     transData = dm.transData_list[axi]
     chip_feats = chips[i].features
     for feat in chip_feats:
         (x,y,a,c,d) = feat
         EllShape = Affine2D([\
            ( 1/sqrt(a),         0, x),\
            ((c/sqrt(a) - c/sqrt(d))/(a - d), 1/sqrt(d), y),\
            (         0,         0, 1)])
         unitCirc = Circle((0,0),1,transform=EllShape)
         ell_list = [unitCirc] + ell_list
    ellipses = PatchCollection(ell_list)
    ellipses.set_color([1,1,1])
    ellipses.face_color('none') #'none' gives no fill, while None will default to [0,0,1]
    ellipses.set_alpha(.05)
    ellipses.set_transformation(transData)
    ax.add_collection(ellipses) 
```

# python - 用户的完整 unix 用户名

> ID：15031137
> 
> 赞同：2
> 
> 时间：2013-02-22T18:48:27.243
> 
> 标签：python, unix

想知道您是否知道是否有一种巧妙的方法可以从 shell 获取完整的用户名？

> 示例：如果我的 unix 用户名是 froyo，那么在这种情况下，我想在系统中注册我的全名 [froyo === Abhishek Pratap]

finger 命令会执行此操作，但同时针对所有登录用户..因此需要进行一些解析才能获得正确的值。有什么更光滑的吗？

python内部的任何东西也很棒。

谢谢！-阿比

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T18:52:56.633

实现此目的的一种方法是使用`pwd.getpwuid`and `os.getuid`：

```
>>> import os
>>> import pwd
>>> pwd.getpwuid(os.getuid())[4] 
```

这是传统的 Unix 方式（基于标准 C 库调用）。

# java - Java 模块运算符

> ID：15031138
> 
> 赞同：0
> 
> 时间：2013-02-22T18:48:35.523
> 
> 标签：java, floating-point, modulo

为什么此代码打印**2.4099999999999997**，而不仅仅是 2.41

```
public class Main
{
    public static void main(String args[])
    {
        double d = 5.55%3.14;
        System.out.println(d);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:00:24.037

问题不在于模运算符，而在于浮点数的性质。双精度数不能保持 5.55、3.14 或 2.41 的精确值，因此您得到一个近似值。

为了更好地理解这一点，当你在纸上只有有限的空间来写它时，试着把 1/3 的值写成小数。您最终会得到类似 的东西`0.33333`，这是实际值的近似值。当您以二进制形式编写 5.55 时，也会发生同样的情况 - 它变成了`101.10001100110011001100110011...`在某处被切断以适应双精度空间的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T18:54:28.333

```
import java.text.DecimalFormat;

double d = 5.55%3.14;       
DecimalFormat df = new DecimalFormat("#.##");
System.out.println( df.format( d )); 
```

添加十进制格式

编辑：

你也可以

```
 double d = 5.55%3.14;
    System.out.printf("%1$.2f", d); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T18:49:57.293

Java double 可能存在精度问题。

你为什么不试试`BigDecimal`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T19:04:48.040

原因是java不像我们那样做数学。java使用二进制数（来自Horstmann's big java book的第4章）所以对于计算机，435 = 4 * 10^2 + 3 * 10^1 + 5 * 10^0

它这样做是因为二进制数（1 或 0）更容易操作，因为计算机中的开关要么打开要么关闭（1 或 0）。

这会导致偶尔的舍入问题。如果你想强制它舍入，然后使用十进制格式，或者如果你只需要舍入显示的值，你可以使用 String.format 或 printf

# c - 用户字符串输入以彩色显示

> ID：15031141
> 
> 赞同：0
> 
> 时间：2013-02-22T18:48:50.790
> 
> 标签：c

我在工程课程中使用 Solaris 服务器。通过 SecureCRT 和 gcc 编译器运行代码。我们的任务是让用户输入一个字符串，然后让程序反转它。输入字符串需要显示为红色，我不知道是什么代码将颜色操作到屏幕上。

输入/输出见图像 ![输入/输出样式的图像](../Images/7aed99647092c9dcf0bb473ddc84c960.png)

我尝试从下面的第一个链接运行代码，它没有以任何颜色输出。它仍然以标准的黑白显示所有单词

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:54:20.683

查看[**ncurses**](http://www.gnu.org/software/ncurses/)。这是一个为处理此类事情而构建的库，以及其他格式。

[**start_color()**](http://man.he.net/man3/start_color) in`curses`可能是一个好的开始。

# jquery - 如何获取 jquery 插件中使用的属性？

> ID：15031146
> 
> 赞同：1
> 
> 时间：2013-02-22T18:49:08.807
> 
> 标签：jquery, jquery-plugins

是否有可能取回我作为参数传递给 jQuery 插件的属性。

样本：

```
$("selector").pluginFunction({ prop1: "test"}); 
```

然后我想进一步取回这个属性值。

就像是

```
var x = $("selector").pluginFunction().giveMyValueBack().prop1; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T18:52:48.753

因为我不知道这个插件做什么，你可以将该值作为数据附加到元素本身。

写：

```
$('selector').data('prop1', 'test'); 
```

读：

```
$('selector').data('prop1'); 
```

最终这是开销。但是在不知道插件如何以及是否存储该值的情况下，回答起来并不容易。

假设您使用 jquery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T18:54:14.670

尝试将插件属性创建为单独的对象，然后将该对象传递给 pluginFunction。例如。

```
var pluginData = { prop1: "test"};
$("selector").pluginFunction(pluginData); 
```

然后你总是可以只引用 pluginData 对象。

```
var prop1 = pluginData.prop1; 
```

# facebook - 尝试抓取时只有新页面返回 404 - 旧页面抓取就好了

> ID：15031150
> 
> 赞同：3
> 
> 时间：2013-02-22T18:49:30.163
> 
> 标签：facebook, debugging, object, http-status-code-404

尝试让 Facebook 抓取我的新网址时出现 404 错误。我有几天前的页面由于某种原因不断返回这个 404 错误请求代码。

**一个多星期前的旧页面加载得很好。**

示例 - 旧页面 URL mattlambert.info/blog/pride-is-rust-on-metal/ 结果 - 响应代码：200（我放弃了 http:// 因为显然我只能在这里发布一个链接。）

示例 - 较新的页面 URL [http://mattlambert.info/blog/the-pharisee-in-me/](http://mattlambert.info/blog/the-pharisee-in-me/) 结果 - 响应代码：404

任何一个页面的标题中都没有 404 响应代码。然而，只有旧的可以被刮掉。

重现步骤：转到对象调试器

在“输入 URL、访问令牌或打开图形操作 ID”字段中输入两个 URL

示例 - 旧页面 URL 结果 - 响应代码：200

示例 - 较新的页面 URL 结果 - 响应代码：404

预期行为：两个页面都应返回响应代码：200。您可以访问两个 url 并查看它们都在工作。查看每个页面的来源，很明显标题中没有任何内容会导致这种情况。实际行为：问题仅存在于我在过去几天创建的新博客文章中。Linter 工具说没有数据。

有任何想法吗？

# javascript - 过滤 CSV 行以返回图表

> ID：15031154
> 
> 赞同：0
> 
> 时间：2013-02-22T18:49:48.670
> 
> 标签：javascript, d3.js, data-visualization

我正在努力让这段代码正常工作

```
var theBeeyatch = d3.csv("data/SalesDUMP.csv", function(csv) {

    csv = csv.filter(function(row) {
        return row['Year'] == '2012' || row['Month'] == '1';
    })
});

var Chart = d3.select("body")
    .append("svg")
    .attr("width", 400)
    .attr("height", 200)

    .selectAll("rect")
    .data(theBeeyatch)
    .enter().append("rect")
    .attr("x", function (d, i) {return i * 20 + 20;})
    .attr("y", 100)
    .attr("width", 20)
    .attr("height", function (d) {return d.Year;}); 
```

CSV 文件如下所示

```
Year,Month,ProductClass,Sales
2011,1,BA  ,28840
2011,1,BH  ,2800
2011,1,MB  ,1103200
2012,1,BA  ,70680
2012,1,MB  ,1596000
2012,1,_OTH,1530
2013,1,BA  ,120513.6
2013,1,BH  ,17640
2013,1,MB  ,1852761.6 
```

我也尝试将其过滤为字符串。我也尝试将其解析为整数。

控制台中没有错误，但屏幕上没有出现任何内容。我到处搜索，但没有发现任何对我有帮助的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:03:30.510

我不太了解 d3 库，但看起来`d3.csv`调用是异步的。当函数返回时，您的`theBeeyatch`变量将没有任何有意义的数据。也许这会起作用：

```
var theBeeyatch = d3.csv("data/SalesDUMP.csv", function(csv) {
    csv = csv.filter(function(row) {
        return row['Year'] == '2012' || row['Month'] == '1';
    });

    var Chart = d3.select("body")
        // ...
        .selectAll("rect")
        .data(csv)
        // ...
}); 
```

当然你现在不需要这个`theBeeyatch`变量，但也许你在其他地方需要它......

# gradle - 非 jar 配置文件上的 Gradle 依赖目标

> ID：15031158
> 
> 赞同：3
> 
> 时间：2013-02-22T18:49:58.413
> 
> 标签：gradle

我可以创建对 jar 文件以外的其他内容的依赖项，如下所示：

```
dependencies {
    compile files("../other-project/config.txt")
} 
```

以上工作正常，除了 config.txt 最终在我的战争文件的 WEB-INF/lib 文件夹中。相反，我需要它位于 war 文件的 WEB-INF/classes 中，以及 jettyRun 的 src/main/resources 中。

我如何控制依赖关系的结束位置？还是我以错误的方式解决这个问题？

我也可以通过复制任务来解决这个问题，但这确实是一个依赖项，因为除非文件发生更改，否则我不需要更新文件。无条件复制会起作用，但我宁愿以正确的方式这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T00:48:36.960

假设您已经配置了具有以下目录和文件结构的多项目构建：

```
/combined-war
    /main-project
        /src
            /webapp
                /WEB-INF
                    web.xml
        build.gradle
    /other-project
        /resources
            /WEB-INF
                /classes
                    config.txt
        build.gradle
    build.gradle 
```

为了允许`jettyRun`将目录的内容与`webapp`目录的内容相结合，您需要为您的目录添加一种解决方法`main-project`（`resources`我已经改编了用户[siasia 在 gist 上](https://gist.github.com/siasia/1618850)发布的解决方法）。`other-project``build.gradle``main-project`

将相同的目录内容添加到 war 文件非常简单，并在[Gradle 用户指南](http://www.gradle.org/docs/current/userguide/war_plugin.html)和[DSL 参考](http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.bundling.War.html)中进行了说明。

```
apply plugin: 'java'
apply plugin: 'war'
apply plugin: 'jetty'

import org.gradle.api.plugins.jetty.internal.JettyPluginWebAppContext

def newResourceCollection(File... resources) {
    def script = '''
        import org.mortbay.resource.ResourceCollection
        new ResourceCollection(resources)
    '''

    def shell = new GroovyShell(JettyPluginWebAppContext.class.classLoader)
    shell.setProperty("resources", resources as String[])
    return shell.evaluate(script)
}

jettyRun.doFirst {
    jettyRun.webAppConfig = new JettyPluginWebAppContext()
    jettyRun.webAppConfig.baseResource = newResourceCollection(
        // list the folders that should be combined
        file(webAppDirName),
        file("${project(':other-project').projectDir}/resources")
    )
}

war {
    from("${project(':other-project').projectDir}/resources")
} 
```

每当您执行时，都会创建一个结合给定目录`gradle jettyRun`的新目录。`ResourceCollection`默认情况下，Jetty 会锁定（至少在 Windows 上）它所服务的所有文件。因此，如果您想在 Jetty 运行时编辑这些文件，请查看[以下解决方案](https://www.assembla.com/spaces/liftweb/wiki/Fix_file_locking_problem_with_jettyrun)。

**更新**

由于`other-project`在这种情况下不是另一个 Gradle 项目，因此其中的两个任务`build.gradle`应该如下所示：

```
jettyRun.doFirst {
    jettyRun.webAppConfig = new JettyPluginWebAppContext()
    jettyRun.webAppConfig.baseResource = newResourceCollection(
        file(webAppDirName),
        file("$projectDir/../other-project/resources")
    )
}

war {
    from("$projectDir/../other-project/resources")
} 
```

我不知道有任何解决方案只添加一个文件（例如`config.txt`）。您总是需要添加一个完整的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T01:31:36.120

该`war`任务（由`war`插件配置）将依赖项放入`WEB-INF/lib`，将 Web 项目自己的代码/资源放入`WEB-INF/classes`，并将 Web 应用程序内容（默认放入`src/main/webapp`）放入`WEB-INF`. 可以通过显式配置`war`任务来添加其他内容。例如：

```
war {
    into("WEB-INF/classes") {
        from "../other-project/config.txt"
    }
} 
```

使用嵌入式 Jetty 进行这项工作的一种方法（尽管在开发过程中可能不是最方便的）是使用`jettyRunWar`而不是`jettyRun`. 想到的另一个解决方案，特别是如果要添加的内容位于其自己的目录中，则将该目录声明为 Web 项目的附加资源目录 ( `sourceSets.main.resources.srcDir "../other-project/someResourceDir"`)。这实际上是配置`war`任务的替代方法。如果 Web 项目已经依赖于另一个项目，则可以改为为该项目配置一个额外的资源目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T17:11:48.437

正如我上面提到的，做一个解决问题的无条件复制很简单。同样，不是我最初提出的问题。但这是我的解决方案，适用于 war 和 jettyRun 任务：

```
processResources.doFirst {
    copy {
        from '../other-project/config.txt'
        into 'src/main/resources'
    }
} 
```

# d3.js - d3.js 基于 csv 文件数据的颜色编码网格

> ID：15031163
> 
> 赞同：1
> 
> 时间：2013-02-22T18:50:43.167
> 
> 标签：d3.js

[我根据http://bl.ocks.org/bunkat/2605010](http://bl.ocks.org/bunkat/2605010)中给出的示例构建了一个正方形网格。现在我正在尝试根据 csv 文件中的数据对网格中的每个单元格进行颜色编码。例如，我有一个 csv 文件，其数据为

单元格，col1

1,2

2,3

3,2

4,1

单元格根据 col1 中的数据着色。就像细胞 1 用蓝色着色，细胞 2 用绿色着色，细胞 3 再次用蓝色着色，细胞 4 用红色着色。

我一直在尝试这样的事情，但它不起作用。请帮忙？

```
d3.text("frame.csv", function(datasetText) {

var parsedCSV = d3.csv.parseRows(datasetText);    
    var col = row.selectAll(".cell")    
                 .data(function (d) { return d; })    
                .enter().append("svg:rect")    
                 .attr("class", "cell")    
                 .attr("x", function(d) { return d.x; })    
                 .attr("y", function(d) { return d.y; })    
                 .attr("width", function(d) { return d.width; })    
                 .attr("height", function(d) { return d.height; })    
         .style("fill", function(d) { return color(parsedCSV[d].col1); })    
         .style("fill", '#FFF')    
                 .style("stroke", '#555');    

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T02:09:58.920

我发现了我的错误。我不得不使用 d3.csv.parse(string) 而不是 d3.csv.parseRows(string[, accessor]) 函数，因为我的 csv 文件包含列名。谢谢您的帮助。欣赏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:55:36.150

有一个“填充”属性可用于设置项目的填充颜色。与其他 d3 函数一样，您可以将值或返回值的函数传递给它。听起来您想使用一个函数来确定您想要的颜色，然后返回该值。请注意，您必须将其作为“#660066”或“rgb(166,0,166)”的字符串（因此用引号括起来）返回。如果你愿意，你也可以使用 rgba。

在此之后，只需编写函数以返回正确的颜色，我无法真正帮助您，因为我不知道您想要什么。

这也可能是[d3js 填充颜色](https://stackoverflow.com/questions/13006712/d3js-fill-color)的副本。

# android - GCM中服务器端的多个应用程序ID

> ID：15031167
> 
> 赞同：1
> 
> 时间：2013-02-22T18:51:07.157
> 
> 标签：android

在服务器端，我发现一台设备有多个注册 ID，这显然给我带来了很多问题。喜欢多次收到的消息。

我怎么能得到旧的注册 ID 的红色，或者如果有一个有效的注册 ID，则确保不会发生注册。

当我编写我的应用程序时，我按照 Android doc 上的示例教程如下：

```
 checkNotNull(SERVER_URL, "SERVER_URL");
            checkNotNull(SENDER_ID, "SENDER_ID");
            // Make sure the device has the proper dependencies.
            GCMRegistrar.checkDevice(this);
            // Make sure the manifest was properly set - comment out this line
            // while developing the app, then uncomment it when it's ready.
            // NOT required any more GCMRegistrar.checkManifest(this);

            /**
             * this code to register reciver moved to message actvity
             */
            //registerReceiver(mHandleMessageReceiver, new IntentFilter(
            //      DISPLAY_MESSAGE_ACTION));

            /* final String */regId = GCMRegistrar.getRegistrationId(this);

            /**
             * save regId in pref to be used by Location update service
             */
            SavePreferences("regId", regId);

            if (regId.equals("")) {
                // Automatically registers application on startup.
                GCMRegistrar.register(this, SENDER_ID);
            } else {
                // Device is already registered on GCM, check server.
                if (GCMRegistrar.isRegisteredOnServer(this)) {
                    ;;
                    // Skips registration.
                    // -- mDisplay.append(getString(R.string.already_registered) +
                    // "\n");
                //  System.out.println(getString(R.string.already_registered)
                    //      + "\n");

                } else {
                    // Try to register again, but not in the UI thread.
                    // It's also necessary to cancel the thread onDestroy(),
                    // hence the use of AsyncTask instead of a raw thread.
                    final Context context = this;
                    mRegisterTask = new AsyncTask<Void, Void, Void>() {

                        @Override
                        protected Void doInBackground(Void... params) {
                            boolean registered = ServerUtilities.register(context,
                                    regId);
                            // At this point all attempts to register with the app
                            // server failed, so we need to unregister the device
                            // from GCM - the app will try to register again when
                            // it is restarted. Note that GCM will send an
                            // unregistered callback upon completion, but
                            // GCMIntentService.onUnregistered() will ignore it.
                            if (!registered) {
                                GCMRegistrar.unregister(context);
                            }
                            return null;
                        }

                        @Override
                        protected void onPostExecute(Void result) {
                            mRegisterTask = null;
                        }

                    };
                    mRegisterTask.execute(null, null, null);
                }
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:08:19.363

```
Please refer link: http://stackoverflow.com/questions/15030233/gcm-multiple-application-id-in-server-side/15030465#comment21123039_15030465

Also check canonical registration ids concept :http://developer.android.com/google/gcm/adv.html

or 

when a new id is generated you will try to register it GCM registrar. when this new registration id successfully register your onRegister() method of service will be called . 

here you can add code to replace previous one with new one.but for this along with registration id you need to send some unique reference to server,so for next time you can check this unique reference and replace existing registration id with new one 

checked following code:

@Override 

protected void onRegistered(Context context, String registrationId) { 

ServiceUtilities.register(context, registrationId);
//call service and replace id 
} 
```

# knockout.js - 将敲除模板存储在数据库中

> ID：15031169
> 
> 赞同：0
> 
> 时间：2013-02-22T18:51:14.440
> 
> 标签：knockout.js

我正在为一个项目构建一个相当复杂的通知系统，我想找出在数据库中存储各种类型通知模板的最佳方法。

我发现了一些类似的帖子[Using a variable to store a knockout template](https://stackoverflow.com/questions/14611936/using-a-variable-to-store-a-knockout-template)建议在绑定视图模型之前将所有可能的模板加载到 DOM 中。该解决方案可行，但似乎不能很好地扩展。淘汰赛是否提供了一种基于 ajax 调用加载模板的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:49:33.983

Knockout 具有允许您添加自己的模板引擎或[自定义模板源](http://www.knockmeout.net/2011/10/ko-13-preview-part-3-template-sources.html)的扩展点。

我有几个项目使用此功能创建一个模板引擎，该引擎默认首先在 JavaScript 对象中查找模板字符串。有很多方法可以做到这一点。这是我实现我的方式：[https](https://github.com/rniemeyer/SamplePresentation/blob/master/js/stringTemplateEngine.js) ://github.com/rniemeyer/SamplePresentation/blob/master/js/stringTemplateEngine.js 。

从服务器加载模板后，您只需执行以下操作：

```
ko.templates[templateName] = response; 
```

您可以随时轻松地从此对象中删除模板。

这是一个工作示例：http: [//jsfiddle.net/rniemeyer/erytN/](http://jsfiddle.net/rniemeyer/erytN/)

# asp.net-mvc-3 - MVC Web 应用程序中的静态内容页面

> ID：15031170
> 
> 赞同：0
> 
> 时间：2013-02-22T18:51:14.830
> 
> 标签：asp.net-mvc-3

我刚刚创建了我的第一个 MVC 3 项目，首先使用 EF db 进行数据库搜索，但搜索只是大型网站的一部分，大多数页面只包含一些文本和图像。

我的问题基本上是关于网站上的这些页面`.aspx`，而后面的代码将一无所有。

他们使用母版页和一些用户控件——我猜这就是我们的前端人员将它们设为 aspx 而不是 html 的原因。

我需要将她的页面转换/包含到我的项目中（我不想在使用 EF 和 Linq 后返回存储过程和列表视图，而且我没有时间）。

我知道一种可能的方法：为每个主菜单项创建一个控制器，然后添加为每个返回的子菜单项命名的 ActionResult `View()`，然后创建各自的视图。

```
 public class LearnAboutStandardsController : Controller
    {

        public ActionResult Index()
        {
            return View();
        }
        public ActionResult ITSStandardsBackground()
        {
            return View();
        }
        public ActionResult ResearchInitiatives()
        {
            return View();
        } 
```

所以我的静态内容页面将成为视图。

它正在工作，我只想对其余页面执行此操作并修改这些页面文本中的链接。

有没有其他方法来处理这些页面？

这些页面背后没有逻辑。

我知道对于具有如此多静态内容的 MVC 模式来说，这不是一个完美的项目，但我有我的理由。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T05:20:46.503

我用“StaticContent”控制器处理这个问题：

静态内容控制器.cs

```
public class StaticContentController : Controller
{
    public ActionResult About()
    {
        return View();
    }

    public ActionResult Services()
    {
        return View();
    }

    public ActionResult Portfolio()
    {
        return View();
    }
} 
```

在您的路由配置下方添加代码以处理静态路由：

```
routes.MapRoute(
    "StaticContent",
    "{action}",
    new { controller = "StaticContent" },
    new { action = "About|Services|Portfolio" } // Add more here
); 
```

你准备好了。

如果您需要更多页面，只需在 StaticController 中添加操作并调整您的 StaticContent MapRoute。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:01:46.410

就个人而言，我会拥有只呈现视图的简单操作的控制器。这样，如果您稍后添加更多功能，您就已经设置好了。如果您想添加安全性或缓存，它会更容易且更一致。

对于“静态”页面，您仍然可以使用 WebForms（如果您想要“漂亮”的 URL，可以使用新[的友好 URL功能）。](http://aspnetfriendlyurls.codeplex.com/)或者，您可以使用带有 Razor 的网页并为静态内容创建 CSHTML 文件。

# ios - UIToolbarPosition 在调整大小时设置为底部

> ID：15031173
> 
> 赞同：0
> 
> 时间：2013-02-22T18:51:22.323
> 
> 标签：ios, uitoolbar, uitoolbarposition

我`UIToolBar`的一个视图顶部有一个，并且阴影显示在工具栏的底部，正如我所期望的那样。我知道`UIToolbarPosition`内部设置为`UIToolbarPositionTop`.

当我旋转我的设备（iPad）时，工具栏会变大（在 IB 中使用自动调整大小），并且将阴影翻转到工具栏顶部的`UIToolbarPosition`更改。`UIToolbarPositionBottom`如果我没有调整栏的大小，它仍然是正确的，但当然不会拉伸以匹配屏幕宽度。

那么，什么给了？什么会导致`UIToolbarPosition`我翻转？这始终位于 0,0，并且仅根据旋转改变宽度。

**额外**：我考虑过使用`UINavigationBar`. `UIAppearance`可能是不行的，因为我在底部也有一个工具栏，我确实希望我的“顶部”不同于我的“底部”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-11T16:29:26.847

我最终使用`UIBarPositioning`协议解决了这个问题`UIToolBar`并设置了`barPosition = UIBarPositionTop`

# java - 用冒号分割字符串并从 xml 换行显示

> ID：15031174
> 
> 赞同：0
> 
> 时间：2013-02-22T18:51:26.807
> 
> 标签：java, android, string, split

我在 xml 标签中有一个这样的字符串：

```
He is what do you need to study: <Enter>
(i) Study chapter by chapter.
(ii) Work out the revision question. 
```

但它的显示是这样的

```
He is what do you need to study:(i) Study chapter by chapter.(ii) Work out the revision question. 
```

那么我怎样才能像在 xml 中一样显示它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T18:57:26.320

假设您使用的是 HTML：

```
Here is what do you need to study:
    <ul type="upper-roman">
       <li>Study chapter by chapter.</li>
       <li>Work out the revision question.</li>

    </ul> 
```

你的意思是这样吗？

```
<div>
    Here is what do you need to study:
    <ul type="upper-roman">
       <li style="padding-left:20pt" >Study chapter by chapter.</li>
       <li style="padding-left:20pt" >Work out the revision question.</li>
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:58:45.530

```
<?xml version="1.0"?>
<a>
<![CDATA[
He is what do you need to study: <Enter>
(i) Study chapter by chapter.
(ii) Work out the revision question.
]]>
</a> 
```

# python - 拆分带有异常的字符串

> ID：15031176
> 
> 赞同：-2
> 
> 时间：2013-02-22T18:51:29.483
> 
> 标签：python, csv, split

我有这个字符串`'id,obj1,"string, etc",obj2'`，现在我需要把它拆分成这样的字典：

```
{
  1 = 'id',
  2 = 'obj1',
  3 = 'string, etc',
  4 = 'obj2'
} 
```

我一直在玩正则表达式，试图分割字符串但没有成功。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T18:54:12.677

以下内容可能适用于您的用例：

```
>>> s = 'id,obj1,"string, etc",obj2'
>>> import csv
>>> dict(enumerate(next(csv.reader([s])),start=1))
{1: 'id', 2: 'obj1', 3: 'string, etc', 4: 'obj2'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:00:31.790

您可以`/([^"]*)(?:"([^"]*)")?/`对输入重复应用正则表达式。在每个匹配中，第一个子组匹配包含可以直接用逗号分隔的任何元素，第二个子组匹配（如果有的话）包含一个带引号的条目。

# php - 如何获取正在使用我的 facebook 应用程序的人员列表？

> ID：15031177
> 
> 赞同：0
> 
> 时间：2013-02-22T18:51:32.930
> 
> 标签：php, facebook

```
$FQLFriends = "SELECT uid, name, pic_square,  subscriber_count  FROM user WHERE is_app_user  AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me())
    ";

    $resultadoFriends = $facebook->api(array(
                            'method' => 'fql.query',
                            'query' => $FQLFriends,
                        ));

    print '<br>';
    print "<img src='".$resultadoFriends[0]['pic_square']."' />".' '.$resultadoFriends[0]['name'];
    print '<br>';

    print "<img src='".$resultadoFriends[1]['pic_square']."' />".' '.$resultadoFriends[1]['name'];
    print '<br>'; 
```

这种方式正确吗？还是有其他的？而且我无法为列出所有人创建一个计数器，这种方式 [0] [1] 用于列出，很无聊：/

# string - MS Access 超链接——根据进入模式而有所不同？

> ID：15031180
> 
> 赞同：0
> 
> 时间：2013-02-22T18:51:45.423
> 
> 标签：string, ms-access, hyperlink

我有几个带有超链接的表格。有时需要更新这些超链接（例如，当超链接中的文件被移动时）。有时需要将更新的超链接转换为字符串以在其他应用程序中使用。在这两种情况下发生的不方便的事情是，如果手动输入或更新链接，则生成的字符串是链接重复两次，重复之间带有奇怪的字符 (../..)。这在许多应用中都是有问题的。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:14:57.040

我一直建议人们避免在表格中使用超链接。如果您必须复制它们，它们的格式为：

```
display text#hyperlink# 
```

您可以创建查询以提取地址：

```
 SELECT Table1.AHyperlink, 
        Mid([ahyperlink],InStr([ahyperlink],"#")+1) AS HAdr
 FROM Table1; 
```

以上只是一个粗略的建议，最后会有#。

# c - 使用 ffmpeg 或 OpenCV 处理 .Raw 图像

> ID：15031183
> 
> 赞同：2
> 
> 时间：2013-02-22T18:52:03.613
> 
> 标签：c, opencv, image-processing, ffmpeg, v4l2

在阅读原始图像格式的[维基百科页面](http://en.wikipedia.org/wiki/Raw_image_format)后，这是任何图像的数字负片。

> 要查看或打印，必须对来自相机图像传感器的输出进行处理，即转换为场景的摄影渲染，然后以标准光栅图形格式（例如 JPEG）存储。这种处理，无论是在相机内完成还是稍后在原始文件转换器中完成，都涉及许多操作，通常包括

我使用[v4l2 示例](http://linuxtv.org/downloads/v4l-dvb-apis/capture-example.html)从我的 Logitech c920 中抓取了一些 .raw 文件，但是当我显示图像时，它看起来像这样： ![原始帧文件](../Images/00683881568c666a70880848e854291c.png)一个原始图像，在其他帧中我可以看到我的影子

有谁知道如何处理这些文件以查看完整的框架？

[这是原始 .raw 文件的链接](https://docs.google.com/file/d/0B-IBanqetxwNNzJYMVk0bEk1Nms/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-23T04:19:53.430

```
ffmpeg -f rawvideo -s 640x480 -pix_fmt yuyv422 -i frame-1.raw frame-1.jpg 
```

选项是根据`v4l2`链接的代码设置的，生成的图像是您期望获得的图像。

# python - 多处理和缓存重复

> ID：15031187
> 
> 赞同：2
> 
> 时间：2013-02-22T18:52:22.243
> 
> 标签：python, django, caching, memcached, multiprocessing

我有一个在多处理中运行的 Django 站点。我已经通过 Python-memchached 启用了 Memcahced。我知道每个进程都有自己的内存。

我有一个自定义缓存，可以有效地将整个数据库表 T 及其相关字段加载到内存中，然后将整个数据重新创建为不同的格式并将其保存在对象 F 中。每次用户尝试添加/删除/更新 T 表通过 Django，站点将首先将这些更改应用到 F。如果更改通过了某些条件，它将保存在 Django 对象和数据库中。如果更改不符合条件，它会回滚 F 而不会触及 Django 对象或数据库。

我已将 F 放在原始表的自定义管理器中。

**目标：一个为所有人服务的F**

**问题：每个过程都有自己的F。它们彼此不一致。初始化 F 很繁重，我希望它只在 Django 应用程序初始化时发生一次。然后修改 F 是便宜的。**

**问题：我应该把F放在哪里？Memcahced 是否有一份来自数据库的数据副本？在那种情况下，我可以将 F（它是一个 python 对象）放在 memcached 中并直接在那里处理吗？我如何在某个地方定义它 F 只会被初始化一次并且所有进程都可以访问它？**

如果有帮助，这里有更多详细信息：F 是 NetworkX 图。姜戈：1.4.3 独角兽：0.17.0

非常感谢！

时代

# ruby-on-rails-3 - ActiveRecord::Relation - 查询执行了吗？

> ID：15031188
> 
> 赞同：0
> 
> 时间：2013-02-22T18:52:24.670
> 
> 标签：ruby-on-rails-3, activerecord

假设我有以下模型：

```
class Foo < ActiveRecord::Base
  has_many :bars
end

class Bar < ActiveRecord::Base
  belongs_to :foo
  scope :blue, where(color: 'blue')
end 
```

如果我有一个 的实例`Foo`，有几种方法可以检索`Bar`与其关联的所有蓝色模型。我的问题涉及确定`bars`给定的关系是否`foo`已经加载。

这将执行数据库查询，而不管柱的完整集合是否已加载到内存中：

`foo.bars.blue.all`

如果`bars`加载`foo`. 如果它们没有被加载，它将加载所有的`bars`然后枚举。

`foo.bars.select { |b| b.color == 'blue' }`

如何确定是否已加载关系而不导致它执行查询？

`foo.bars.some_method_to_determine_whether_or_not_they_are_in_memory_thanks`

有任何想法吗？

编辑：

澄清一下，这是我希望达到的结果：

```
class Foo < ActiveRecord::Base
  has_many :bars

  def blue_bars
    if bars_already_loaded?
      # enumerate
    else
      # use the scope
    end
  end

  def red_bars
    ...
  end

  ...
end 
```

# haskell - 表示 0 到 1 范围内的浮点数的最佳方式是什么？

> ID：15031190
> 
> 赞同：7
> 
> 时间：2013-02-22T18:52:28.683
> 
> 标签：haskell, types, floating-point, numbers

我正在寻找一种能够表示值的数字类型`0.213123`or `0.0`， or `1.0`，但拒绝超出范围的值，例如`-0.2123`and `1.2312`。是否存在适合该目的的特定类型，将数字限制在特定范围内的最佳通用方法是什么？

当然，想到的第一个答案是：只使用`Double`，但被 Haskell 的类型系统宠坏了，我已经习惯于在类型级别上最大限度地保护程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T21:07:05.503

**一个严肃的建议**

您可以在适当位大小的单词周围使用新类型包装器（和智能构造函数）：

```
newtype SmallFrac = SF Word64

-- Example conversion (You'd actually want to make
-- instances of common classes, I assume)
sfToDouble :: SmallFrac -> Double
sfToDouble (SF x) = fromIntegral x / fromIntegral (maxBound `asTypeOf` x)

instance Show SmallFrac where
    show = show . sfToDouble 
```

实现乘法和除法的成本可能比您想要的要高，但至少加法很容易（模防止上溢/下溢）并且您声称不需要任何更好的操作。

**一个不太有用的建议**

如果您只需要一个表示值介于 1 和 0 之间的符号，那么请采用 dave4420 的建议，只需一个单位类型：

```
newtype SmallFrac = SF () 
```

这种类型没有任何操作，甚至没有转换为其他类型的兴趣，例如`Double`，但这符合所述的要求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T19:06:14.343

不标准。你必须做一个——我建议一个[聪明的构造函数](http://www.haskell.org/haskellwiki/Smart_constructors)。请记住，尽管这样的类型支持很少的数字操作——你不能添加它们并将它们保留在集合中，也不能否定它们，所以我建议不要使用`Num`实例。`Monoid`关于乘法的 A是合理的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T21:14:11.063

## 基于Double的表示

```
newtype Rep1 = Rep1 Double

checkRange :: Double -> Maybe Double
checkRange x
  | 0 < x && x < 1 = Just x
  | otherwise = Nothing

toRep1 :: Double -> Maybe Rep1
toRep1 x = Rep1 . (\x -> tan $ (x-0.5) * pi) <$> checkRange x

fromRep1 :: Rep1 -> Double
fromRep1 (Rep1 x) = atan x / pi + 0.5 
```

## 基于整数的表示

```
data Rep2 = Rep2 Integer Integer

fromRep2 :: Rep2 -> Double
fromRep2 (Rep2 a b) = fromIntegral (abs a) / fromIntegral (abs a + abs b + 1)

toRep2 :: Double -> Maybe Rep2
toRep2 = error "left to the reader" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-22T23:33:15.540

智能构造器模式的一种变体。

这可能是矫枉过正。

```
{-# LANGUAGE TemplateHaskell #-}
module Foo (Foo(), doubleFromFoo,
            maybeFooFromDouble, unsafeFooFromDouble, thFooFromDouble)
where
import Language.Haskell.TH 
```

总之，标准`newtype`...

```
newtype Foo = Foo Double 
```

出去`Double`很容易...

```
doubleFromFoo :: Foo -> Double
doubleFromFoo (Foo x) = x 
```

在运行时放入a`Double`会导致运行时检查，无法绕过...

```
maybeFooFromDouble :: Double -> Maybe Foo
maybeFooFromDouble x
        | 0 <= x && x <= 1 = Just (Foo x)
        | otherwise        = Nothing 
```

...除非您很高兴不安全（并且有一些社会手段来强制执行所有使用`unsafeFooFromDouble`实际上都是安全的）...

```
unsafeFooFromDouble :: Double -> Foo
unsafeFooFromDouble = Foo 
```

但如果它是编译时常量，您可以在编译时进行检查，而无需运行时开销：

```
thFooFromDouble :: (Real a, Show a) => a -> Q Exp
thFooFromDouble x
        | 0 <= x && x <= 1 = return $ AppE (VarE 'unsafeFooFromDouble)
                                           (LitE (RationalL (toRational x)))
        | otherwise        = fail $ show x ++ " is not between 0 and 1" 
```

这就是您使用最后一个功能的方式：

```
$(thFooFromDouble 0.3) 
```

`$`记住不要在和`(`!之间放置任何空格。

# jquery - 如何使用 getJSONfoursquare 场地 API 获取街道地址？

> ID：15031191
> 
> 赞同：0
> 
> 时间：2013-02-22T18:52:31.637
> 
> 标签：jquery, json, api, foursquare

以下是场地通常的 API json 响应的样子 [https://developer.foursquare.com/docs/explore#req=venues/search%3FproviderId%3Dnymag%26linkedId%3D59455](https://developer.foursquare.com/docs/explore#req=venues/search%3FproviderId%3Dnymag%26linkedId%3D59455)

这是我到目前为止的代码

```
$.getJSON('https://api.foursquare.com/v2/venues/search?ll=32.7153,-117.1564&limit=14&radius=1000&client_id=PKAHBB1OAX0B000CG5UUYO4BXV0LWQWKFB51EK3XVNFJ2ULS&client_secret=RDPX01C01RHCYASZIKVH5XXMPVFIPLFHFP1D53UR4GUWQD50&v=20120101',
function(data) {
console.log(data); 
    $.each(data.response.venues, function(i,venues){
        content = '<p>' + venues.name + '</p>';
        $(content).appendTo("#venues");

   }); 
```

});

但这只是抓住场地名称。我如何在位置部分下获取地址和纬度、经度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:46:06.310

地址和纬度/经度实际上暴露在您从 Foursquare 获得的响应中。尝试：

```
$.getJSON('https://api.foursquare.com/v2/venues/search?ll=32.7153,-117.1564&limit=14&radius=1000&client_id=PKAHBB1OAX0B000CG5UUYO4BXV0LWQWKFB51EK3XVNFJ2ULS&client_secret=RDPX01C01RHCYASZIKVH5XXMPVFIPLFHFP1D53UR4GUWQD50&v=20120101',
function(data) {
console.log(data); 
    $.each(data.response.venues, function(i,venues){
        content = '<p>Name: ' + venues.name + 
            ' Address: ' + venues.location.address + 
            ' Lat/long: ' + venues.location.lat + ', ' + venues.location.lng + '</p>';
        $(content).appendTo("#venues");

   });
}); 
```

# svg - 数据 URI ASCII、UTF-8 或 base64

> ID：15031192
> 
> 赞同：3
> 
> 时间：2013-02-22T18:52:33.133
> 
> 标签：svg, base64, data-uri, data-url, data-uri-scheme

在 HTML 页面中包含数据 URI 时，最好使用 ASCII、UTF-8 还是 base64？

我将它用于可以表示为任何这些的 SVG 文件。

UTF-8（一旦 URI 编码）在未压缩时仍然比 base64 小一点，但是使用 base64 还有其他好处（比如 CPU 性能）吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T06:25:53.460

我正在做一些与此相关的测试。关于前端，我认为除了 base64 需要在渲染之前进行解码之外，差别很小。服务器端文件越小，要处理的数据越少，使用的cpu就越少。有了这个，我怀疑 UTF-8 将是 CPU 密集度最低的服务器端。

一些半相关的注释：

就文件大小而言，当服务器 gzip 压缩时，svg 胜过 png。

我读过由于打开服务器端 gzip 压缩导致 cpu 受到很小的影响。但是，必须处理更少的数据输出而获得的 CPU 收益比必须 gzip 压缩每个文件更重要。

SVG 的渲染比 png、jpg、gif、bmp 等处理器更密集。可以只渲染位图。SVG 需要计算、光栅化，然后渲染。为许多或复杂的 svg 设置动画时要注意的事项。

我发现的一些统计数据

*   徽标 png = 9.2kb -> gzip = 9.2kb
*   徽标 svg = 10.5kb -> gzip = 4.4kb
*   使用 python scour 优化后的 logo svg svg = 9.4kb -> gzip = 3.9kb
*   logo svg url 编码 = 10.9kb -> gzip 4kb
*   logo svg base64 编码 = 12.4 -> gzip 5.5kb

# javascript - 脚本仅在刷新后有效

> ID：15031193
> 
> 赞同：1
> 
> 时间：2013-02-22T18:52:34.407
> 
> 标签：javascript, html, jquery-mobile

在第一页我有一个带有链接的图像，您可以单击它：

```
<div style="width: 97px; height: 130px;">
<a href="objects_lost.html?obj=images/dog.png">
<div>
<img src="images/dog.png" alt="" style="width: 100%; height: 100%;">
<p style="color: black; margin-top: 0px;">DOG</p>
</div>
</a>
</div> 
```

当您单击它时，会打开一个显示您单击的图像的新页面。但它只在一次刷新后有效。

```
 <img src="" id="image"/>        
    <script type="text/javascript">
        function whatImg() {
            var str = getUrlVars()["obj"];
            document.getElementById('image').src = str;
        }

        function getUrlVars() {
            var vars = [], hash;
            var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
            for(var i = 0; i < hashes.length; i++)
                {
                hash = hashes[i].split('=');
                vars.push(hash[0]);
                vars[hash[0]] = hash[1];
                }
            return vars;
            }
        whatImg();
    </script> 
```

有什么帮助吗？我使用 JQuery 移动

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:56:17.763

如果哈希更改，脚本将不会再次触发。您需要添加一个事件侦听器，例如：

```
$(window).on("hashchange",function() {
  whatImg();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:10:25.520

问题是您的 JavaScript 在您的页面完成加载之前正在运行。刷新时，页面从本地缓存加载（即更快），并且您的图像元素在脚本运行之前准备就绪。如果您从本地服务器运行代码，您可能会注意到由于 HTML 的快速加载，它在第一次尝试时就可以工作。

正确的解决方法是让您的代码在加载后运行。在 jQuery 中，你会这样做：

```
$( function() {
    whatImg();
}); 
```

这或多或少是一个标准的 jQuery 快捷方式：

```
$(window).load( function () {
    whatImg();
}); 
```

应该注意的是，建议使用的答案是`hashchange`因为`hashchange`在第一页加载时触发。您的 URL 中实际上没有哈希。正确的解决方案是让您的脚本在加载后运行。

# windows-runtime - Winrt GridView 虚拟化

> ID：15031196
> 
> 赞同：5
> 
> 时间：2013-02-22T18:52:39.407
> 
> 标签：windows-runtime, virtualization

我在尝试以不同的布局显示`GridViewItems`时遇到了多个问题。`GridView`基本上一切都会扼杀虚拟化。如果我们使用`VariableSizedWrapGrid`virutalizaiton 就没有了，如果我们使用内置的分组功能virutalizaiton 也没有了。到目前为止唯一的解决方案：

[唯一的解决方案](http://architects.dzone.com/articles/solving-winrt-xaml-gridview)

但这并没有真正削减它，因为它改变了设计。`GridView`正如我所说，基本问题是您对中断虚拟化所做的几乎任何小的布局更改。是否有人在更改 a 时找到了避免此问题的好方法，`GridView`或者每个人都必须坚持`GridView`默认的外观？

哦，另一件事。不幸的是，WinRT 不允许我们创建自定义的虚拟化面板，因为`VirtualizingStackPanel`构造函数是`protected`（或者`private`，记错了）。如果您可以提供一些有关此的信息，那也很棒=）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T09:21:03.377

每当您将面板更改为 VariableSizedWrapGrid 或在 gridview 上使用 Grouping 时，虚拟化就消失了。我在 Uservoice 中发布了关于此的内容，以便使用 VariableSizedWrapGrid 支持虚拟化

[http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/4333881-make-variablesizedwrapgrid-virtualizing-](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/4333881-make-variablesizedwrapgrid-virtualizing-)

# responsive-design - 内联块缩小图像

> ID：15031197
> 
> 赞同：0
> 
> 时间：2013-02-22T18:52:41.690
> 
> 标签：responsive-design, css

我试图让我的内联块缩小而不是包装。图像排列如下：

> AAA BBB
> 
> 中国交建

当窗口变成 CI 的宽度时，希望所有图像一起缩小。现在我得到的是 C 缩小，B 在 A 下换行。如果我在父 DIV A 和 B 中设置 whitespace:nowrap 不换行，但也不缩小。这是我的代码：

```
<div id="container">
<div class="small_pic"><img a></div>
<div class="small_pic"><img b></div>
<div class="large_pic"><img c></div>
</div>

#container {
margin-left:auto;
margin-right:auto;
width: 486px;
max-width:100%;
}
.small_pic {
width:220px;
max-width:100%;
display:inline-block;
height:auto;
}
.large_pic {

width:480px;
max-width:100%;
display:inline-block;
height:auto;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:42:25.493

我正在浏览你的代码。您错过的一件事是元素的宽度应该在 em 或 % 中而不是 px 中。顺便说一句，我正在试验你的代码

```
<div id="container">
<div class="small_pic">
  <img src="My_Bad_by_PhunkyVenom.jpg" class="firstImg">
  <img src="My_Bad_by_PhunkyVenom.jpg" class="secondImg">
</div>
<div class="large_pic"><img src="My_Bad_by_PhunkyVenom.jpg"></div>
</div>

#container {
margin-left:auto;
margin-right:auto;
width: 50%;
/*max-width:100%;
*/}
.small_pic {
/*width:220px;*/        // You've used pixels
max-width:100%;
display:inline-block;
height:auto;
clear:both;
}
.firstImg,.secondImg{width:50%;float:left;}
.large_pic img{
/*width:480px;*/        //You've used pixels.
width:100%;
display:inline-block;
min-height:100px;
height: 30%;
} 
```

您可以使用 em（例如：300px ~ 18.75px）。您不必使用空白，只需使用浮动清除。希望你能明白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:26:08.003

使用 .small_pic 的相对宽度而不是绝对宽度 - 将 220px 更改为 45%，你应该会很好。

# c++ - 模板、可变参数函数、通用引用和函数指针：爆炸性鸡尾酒

> ID：15031198
> 
> 赞同：2
> 
> 时间：2013-02-22T18:52:44.287
> 
> 标签：c++, templates, c++11, function-pointers, variadic-templates

考虑以下代码和`apply`函数：

```
// Include
#include <iostream>
#include <array>
#include <type_traits>
#include <sstream>
#include <string>
#include <cmath>
#include <algorithm>

// Just a small class to illustrate my question
template <typename Type, unsigned int Size>
class Array
{
    // Class body (forget that, this is just for the example)
    public:
        template <class... Args> Array(const Args&... args) : _data({{args...}}) {;}
        inline Type& operator[](unsigned int i) {return _data[i];}
        inline const Type& operator[](unsigned int i) const {return _data[i];}
        inline std::string str() 
        { 
            std::ostringstream oss; 
            for (unsigned int i = 0; i < Size; ++i) 
                oss<<((*this)[i])<<" "; 
            return oss.str();
        }
    protected:
        std::array<Type, Size> _data;
    // Apply declaration
    public:
        template <typename Return, 
                  typename SameType, 
                  class... Args, 
                  class = typename std::enable_if<std::is_same<typename std::decay<SameType>::type, Type>::value>::type> 
        inline Array<Return, Size> apply(Return (*f)(SameType&&, Args&&...), const Array<Args, Size>&... args) const;
}; 

// Apply definition
template <typename Type, unsigned int Size>
template <typename Return, typename SameType, class... Args, class> 
inline Array<Return, Size> Array<Type, Size>::
apply(Return (*f)(SameType&&, Args&&...), const Array<Args, Size>&... args) const
{
    Array<Return, Size> result; 
    for (unsigned int i = 0; i < Size; ++i) {
        result[i] = f((*this)[i], args[i]...);
    }
    return result;
}

// Example
int main(int argc, char *argv[])
{
    Array<int, 3> x(1, 2, 3);
    std::cout<<x.str()<<std::endl;
    std::cout<<x.apply(std::sin).str()<<std::endl;
    return 0;
} 
```

编译失败：

```
universalref.cpp: In function ‘int main(int, char**)’:
universalref.cpp:45:32: erreur: no matching function for call to ‘Array<int, 3u>::apply(<unresolved overloaded function type>)’
universalref.cpp:45:32: note: candidate is:
universalref.cpp:24:200: note: template<class Return, class SameType, class ... Args, class> Array<Return, Size> Array::apply(Return (*)(SameType&&, Args&& ...), const Array<Args, Size>& ...) const [with Return = Return; SameType = SameType; Args = {Args ...}; <template-parameter-2-4> = <template-parameter-1-4>; Type = int; unsigned int Size = 3u]
universalref.cpp:24:200: note:   template argument deduction/substitution failed:
universalref.cpp:45:32: note:   mismatched types ‘SameType&&’ and ‘long double’
universalref.cpp:45:32: note:   mismatched types ‘SameType&&’ and ‘float’
universalref.cpp:45:32: note:   mismatched types ‘SameType&&’ and ‘double’
universalref.cpp:45:32: note:   couldn't deduce template parameter ‘Return’ 
```

我不太确定它为什么会失败。在该代码中，我想：

*   保持通用引用具有最通用的功能
*   能够使用语法`apply(std::sin)`

那么我必须改变什么才能使其编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:56:20.107

function[存在多个重载](http://en.cppreference.com/w/cpp/numeric/math/sin)`std::sin`，并且您的函数模板无法推导出一个会产生**完全匹配**的重载（在大多数情况下，推导模板参数时不考虑任何转换）。

首先，这些overlads 中没有一个人接受对他们的第一个（也是唯一一个）论点的*引用。*编译器告诉你这一点，所以`Return`不能`SameType`从参数的类型中推断出来`f`：

```
universalref.cpp:24:200: note:   template argument deduction/substitution failed:
universalref.cpp:45:32: note:   mismatched types ‘SameType&&’ and ‘long double’
universalref.cpp:45:32: note:   mismatched types ‘SameType&&’ and ‘float’
universalref.cpp:45:32: note:   mismatched types ‘SameType&&’ and ‘double’ 
```

因此，第一步包括更改`apply()`函数模板的签名：

```
[...] apply(Return (*f)(SameType, Args&&...), [...]
                        ^^^^^^^^
                        No URef! 
```

此外，SFINAE 正在消除您的函数模板的所有实例，其中`Return`没有被推断为`int`（您正在调用`apply()`的实例`Array<int, 3>`）：不幸的是，现有的重载都`std::sin`没有`int`作为返回类型。

您可以尝试将您的实例化更改为`Array<double, 3>`，但不幸的是，仅此一项无济于事，因为 C++11 标准的第 14.8.2/5 段规定：

> 未**推断的上下文**是：
> 
> — 使用限定 ID 指定的类型的嵌套名称说明符。
> 
> — 非类型模板参数或绑定的数组，其中子表达式引用模板参数。
> 
> — 用于函数形参的形参类型中的模板形参，该形参有一个默认实参，该实参在进行实参推导的调用中使用。
> 
> —由于关联的函数**参数是一个函数或一****组重载函数**(13.4)，因此无法对其进行参数推导的函数参数，并且适用以下一个或多个：
> 
> > — 多个函数与函数参数类型匹配（导致推理不明确），或
> > 
> > — 没有函数与函数参数类型匹配，或者
> > 
> > —**作为参数提供的一组函数包含一个或多个函数模板**。

由于需要支持*整数*类型的重载（这是 C+11 中的新功能，请参阅 26.8/11），您的库实现很可能*确实*为`std::sin`. 这就是 stdlibc++ 的定义：

```
template<typename _Tp>
inline _GLIBCXX_CONSTEXPR
typename __gnu_cxx::__enable_if<__is_integer<_Tp>::__value, 
                                double>::__type
sin(_Tp __x)
{ return __builtin_sin(__x); } 
```

有办法离开这里，但你可能不喜欢它们。除了上述必要（但不足）的更改之外，您还需要显式`std::sin`转换为所需的类型。我还将在这里删除 SFINAE 条件，因为它除了强制`SameType`等于`Type`：

```
// Declaration in the `Array` class
template <typename Return, class... Args>
inline Array<Return, Size> apply(
    Return (*f)(Type, Args&&...), 
    const Array<Args, Size>&... args
    ) const;

[...]

// Example
int main(int argc, char *argv[])
{
    Array<double, 3> x(1, 2, 3);
    //    ^^^^^^
    //    NOTICE
    //     THIS

    std::cout<<x.str()<<std::endl;

    std::cout<<x.apply((double(*)(double))std::sin).str()<<std::endl; // OK
    //                 ^^^^^^^^^^^^^^^^^^^
    //                     NOTICE THIS

    return 0;
} 
```

# ruby-on-rails - 使用 Net::HTTP 时 HTTP 请求路径为空

> ID：15031202
> 
> 赞同：2
> 
> 时间：2013-02-22T18:52:51.567
> 
> 标签：ruby-on-rails, ruby, net-http

所以我刚刚创建了一个这样的控制器：

```
require 'net/http'
class HowdyController < ApplicationController
  def show
    url = URI.parse("http://google.com")
    req = Net::HTTP::Get.new(url.path)
    @resp = Net::HTTP.new(url.host, url.port).start {|http| http.request(req)}
  end
end 
```

我的路线是这样的：

```
get "howdy/show" 
```

我的观点是这样的：

```
<h1>Howdy#show</h1>
<%= "The call to example.com returned this: #{@resp}" %> 
```

但是当我去`http://localhost:3000/howdy/show`我得到这个错误

> HTTP 请求路径为空

我对 Net::HTTP 完全陌生，只是想创造一些简单的东西！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T18:59:05.777

您可以使用`get_response`并传递 URL 作为第一个参数，并使用斜杠作为第二个参数来创建路径：

```
@resp = Net::HTTP.get_response("www.google.com", "/") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T19:00:11.910

`net/http`使用do发送请求：

```
 uri = URI.parse("http://www.google.com")
        http = Net::HTTP.new(uri.host, uri.port)
        request = Net::HTTP::Get.new(uri.request_uri)
        #This makes the request
        resp = http.request(request) 
```

# prolog - -> 在 swi-prolog 中的含义

> ID：15031203
> 
> 赞同：3
> 
> 时间：2013-02-22T18:52:55.233
> 
> 标签：prolog

我在 swi-prolog 中有一个程序，并且有一个 operator(?) **->**，这是我第一次遇到，我不知道它在做什么。有一段代码，我不明白：

```
swf([PP->Q|F], [PP|L], X):- swf(F, L, X), axioms(X, PP->Q, F). 
```

我发现当我们有

```
X -> Y ; Z 
```

然后如果 X 为真，则执行 Y，否则执行 Z。但我看不出在上面显示的情况下它是如何工作的。

提前致谢。

编辑：

老实说，这是阿罗定理的计算机辅助证明的一部分（更准确地说是基本情况），这是完整的代码（来自 PROLOG，Kenryo Indo 的证明阿罗定理）：

```
p(Q) :- permutation(Q, [a, b, c]).

p((X, Y), Q) :- p(Q), append(_, [X|B], Q), member(Y, B).

pp((Q1,Q2)) :- p(Q1), p(Q2).

all_pp(L) :- findall(QQ, pp(QQ), L).

axioms(arrow, V, F) :- p(Q), V=(PP->Q), pareto(V), iia(V, F).

swf([], [], _).
swf([PP->Q|F], [PP|L], X):- swf(F, L, X), axioms(X, PP->Q, F).
swf(F, X) :- all_pp(L), swf(F, L, X).

pp(XY, agree, (Q1,Q2)) :- p(XY, Q1), p(XY, Q2).
pp((X, Y), opposite, (Q1, Q2)) :- p((X, Y), Q1), p((Y, X), Q2).

pareto(PP->R) :- \+ (pp(XY, agree, PP), \+ p(XY, R)).

dictator(J, F) :- member(J:PP, [1:(P, _), 2:(_, P)]),
\+ (member(PP->R, F), pp(_, opposite, (P, R))).

agree(+, XY, QQ) :- pp(XY, agree, QQ).
agree(-,(X,Y), QQ) :- pp((Y, X), agree, QQ).

iia(PP->R, F) :- \+ (F \= [], pp(XY, A, PP), member(QQ->S, F),
pp(XY, A, QQ), \+ agree(_, XY, (R, S))). 
```

不过，我不知道如何治疗->。X->Y 有一系列用法：swf - axioms - pareto 和 swf - iia - member。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:43:17.403

在 Prolog 中，运算符只是嵌套术语的语法糖。

也就是说，`is(X, +(1,2))`我们可以写而不是写`X is 1+2`，因为( [is](http://www.swi-prolog.org/pldoc/doc_for?object=op/3) [)](http://www.swi-prolog.org/pldoc/doc_for?object=%28is%29/2) /2 和`+`. 另一个故事是与这些术语相关的解释。*按照我的例子，在某处*会有一个像`is(X, V) :- eval_expression(V, X).`

现在确实 ( [->](http://www.swi-prolog.org/pldoc/man?predicate=send_arrow/2) )/2 它是一个 if/then/else 运算符（或者更好的 if/then，else 由析取运算符 (;)/2 引入），当用作*目标*时，但在您展示的代码*可能*用作模式选择器。即，如果还有其他子句 swf/3，那么 axioms/3 就有可能被该表达式调用，我猜这意味着*implicit*。

高温高压

*编辑*这里是放置在 SWI-Prolog IDE 中的代码图片。语法颜色显示两个问题：

*   公理中的 PP（箭头，V，F）未使用
*   swf(F, X) 从未被调用（参数丢失？）

![在此处输入图像描述](../Images/46df0d9caddc363051586288044488b7.png)

似乎 dictator/2 是入口条款。我不知道这个定理（我无法访问文档），但我希望有一个关于社会实体的断言。

第一个问题不存在，因为 PP 将在 pareto/1 中使用。真正的问题应该是缺少 swf 的参数，应该读起来像`swf(F, L, X) :- ...`，但这会导致循环。

# reporting-services - SSRS LocalReport 模式需要很长时间才能在 PDF 中呈现

> ID：15031212
> 
> 赞同：1
> 
> 时间：2013-02-22T18:53:24.460
> 
> 标签：reporting-services

我有一个需要以 PDF 格式显示大量报告的 Web 应用程序。它是一个 asp.net 应用程序，我正在使用 SSRS LocalReport 对象以 PDF 格式呈现，然后写入页面。我必须使用本地模式（而不是远程模式），因为我在发送到报告进行渲染之前对 C# 中的数据进行了大量处理。

我发现这些报告需要很长时间才能呈现 - 有些超过几分钟。这是不可接受的，因为我在 2000 年使用 Crystal Reports V8 编写的之前的应用程序在几秒钟内呈现这些报表。

我正在使用 VS 2012 和 Report Viewer 2012，我很惊讶技术在 12 年内倒退了这么多。

我注意到 SSRS 通常在页面渲染方面存在巨大问题，我认为这是因为 SSRS 的结构是基于控制的，而不是真正基于页面的 Crystal Reports。因此，Crystal 在页面大小、页眉、页脚和页码方面并没有那么纠结。

任何有类似问题和任何建议的人都会非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T02:03:58.800

我做了很多研究和实验，能够显着加快报告速度。我想分享一些我实施的改进。

1.) 不要使用全局总页数，因为它会强制对报告进行两次处理。

2.) 将数据分配给字段时避免使用表达式。我发现这是造成延误的主要原因。我使用的一些表达方式...

```
 = Format(myDate, "dd-MMM-yy")
                  = ": " + myfield.value 
```

我在代码中进行了所有格式化，并将格式化的数据提供给报表，并且没有让报表进行任何表达式处理。

3.) 文档地图应该只是一个字段，不要使用任何表达式。

4.) 尽可能将 Textboxes CanGrow 属性设置为 false。

5.) 避免在报告中使用代码部分。

我希望这对将来的其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T00:31:19.147

Reporting Services 有一个名为“InteractiveSize”的报表级别属性。这可以设置为 0,0，这基本上意味着整个报表都呈现在屏幕上。将此设置为适当的 A4 (21cm,29.7cm) 或其他标准页面尺寸，例如 US Letter (21.6cm,27.9cm) 将导致报表呈现器按需呈现页面，与 Crystal 的做法相同。

# vb.net - 获得 RichTextBox VB.NET 的底线

> ID：15031214
> 
> 赞同：1
> 
> 时间：2013-02-22T18:53:25.910
> 
> 标签：vb.net

我正在用 VB 编写一个程序，它需要文本框的最后一行。有没有办法可以将最后一行作为字符串？一个例子：

RichTextBox 内容：

一些
随机
文本

该程序将返回字符串“text”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:02:02.003

是的你可以。

```
Dim lines As String() = myRichTextbox.Text.Split(New Char() {"\n"c})

String lastLine = lines(UBound(lines)) 
```

所以`Split()`返回一个字符串数组，其中每个字符串都是 TextBox 中的一行。并`UBound()`返回该数组的最后一个索引，以获取文本框的最后一行。

或者，因为我只是红色，您可以使用`myRichTextBox.Lines`而不是`` myRichTextbox.Text.Split(...)`：

```
String lastLine = myRichTextBox.Lines(UBound(myRichTextBox.Lines)) 
```

# charts - 如何使用flot js绘制按类别分组的多个条形图

> ID：15031217
> 
> 赞同：2
> 
> 时间：2013-02-22T18:53:34.017
> 
> 标签：charts, flot, bar-chart

我正在使用 flot 库来显示条形图，我需要以这种方式按特定值分组：

```
|
|          +----+        +----+    
|          |    |        |    |    
|          |    |        |    |    
|          |    |        |    |    
| +----+   |    |        |    |    
| |    |   |    |        |    |    
| |    |   |    |        |    |    
| |    |   |    |        |    |    
|-+----+---+----+--------+----+----
   val 1    val2          val3
    category #1        category #2 
```

感谢 Sergey G. 的 Ascii :)

我有变量 d1, d2, d3 分别对应条 1、2 和 3 的值（按类别排序）。问题是：如何在刻度下方添加类别？对不起，我的“谷歌翻译”英语不好，非常感谢！

代码：

```
$.plot(
    $("#placeholder"),
    [

            {
        label: labelChart,
        data: d1,
        color: '#92d5ea',
        bars: {
            show: true,
            barWidth: 0.5,
            align: "center",
            order:2
        },   

       multiplebars:true  
    },
    {
        label: labelChart,
        data: d2,
        color: '#92d5ea',
        bars: {
            show: true,
            barWidth: 0.5,
            align: "center",
            order:3
        },   

       multiplebars:true  
    },
    {
        label: labelChart,
        data: d3,
        color: '#92d5ea',
        bars: {
            show: true,
            barWidth: 0.5,
            align: "center",
            order:3
        },   

       multiplebars:true  
    }

    ],
    {
        xaxis: {
            ticks: ticksData
        }, 

        yaxis: { 
            min:0
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-02-22T19:22:13.240

使用分类插件，如[本例所示](http://www.flotcharts.org/flot/examples/categories/index.html)。

# node.js - 使用 nodejs + appjs + node-serial 访问 dom

> ID：15031221
> 
> 赞同：1
> 
> 时间：2013-02-22T18:53:39.087
> 
> 标签：node.js, appjs, node-serialport

我有一个运行良好的 appjs 应用程序。我试图基本上要么从事件的加载页面中调用现有的javascript函数。或访问事件的页面元素。我正在使用带有霍尼韦尔条形码扫描仪的节点串行库。我可以很好地访问串行端口，我可以很好地获取扫描数据：

```
serialPort.on('data', function(data) { ... }); 
```

如上所述，我想要做的是在页面上调用一个javascript函数，即

```
window.document.body.scan(data); 
```

或者至少访问数据并能够使用节点调用/发出http请求，我也可以做得很好。当我在

```
window.on('ready', function(){ ... }); 
```

我可以很好地访问页面上的元素。IE

```
var $ = window.$;
$("#message").html('Something...'); 
```

但是，如果我尝试在 serialPort.on 数据函数中运行完全相同的代码，我会收到类似的错误

```
 $('#message').html('Please wait...');
        ^
TypeError: object is not a function... 
```

甚至 $("#message").html 那个“html”不是一个函数。但是，如果我在 window.on 就绪功能上运行它，它就可以工作。我很迷茫，因为 appjs 的文档很少。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:09:45.543

serialPort.on('data',function(){ ... }); 代码正在 AppJS 中运行，因此要访问您需要使用 Window 变量的窗口，请尝试将代码更改为：

```
window.$('#message').html('Please wait...'); 
```

为了能够调用自定义函数（称为扫描），请在 window.on('ready', function(){ ... }); 中执行以下操作

```
window.scan = function() {
    //code to connect to the scanner here.
    console.log("scan run");
} 
```

然后在 html 页面上的某个地方，比如一个按钮，然后您可以调用该函数：

```
 <body>
 <button onclick="window.scan();">Scan Now!</button>
 </body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T14:33:36.980

您是否尝试过从 JS 文件顶部访问它？似乎 Window 是未定义的，而不是 $ 实例。

我在最近的一个项目中这样做了，以在我编写的节点模块中使用 jQuery 访问 DOM 节点。将此添加到您的**app.js**文件中，它使用[Node 全局变量](http://nodejs.org/api/globals.html#globals_global_objects)

```
// Under your window definition
global.$ = window.$; 
```

这将允许您在所有节点文件/模块中使用没有窗口前缀的 $。

# iphone - iOS 应用程序中的 Facebook oauth 未重定向到服务器。返回垃圾 html

> ID：15031223
> 
> 赞同：1
> 
> 时间：2013-02-22T18:53:42.070
> 
> 标签：iphone, ios, facebook, redirect, oauth

从 iOS 应用程序调用下面的 facebook oauth url 时，会返回一堆 html，并且永远不会启动到我们的 Web 服务器的重定向。

**网址：** https ://www.facebook.com/dialog/oauth?client_id=[OUR_ID]&redirect_uri=[OUR_URL]&state=%28null%29%2C200%2Cfalse%2C%3CUIDevice%3A+0x983dfb0%3E%2C5.1 %2CFB_DEV

**预期行为：** url 的 redirect_uri 部分应重定向到我们的 Web 服务器并验证用户。

**实际行为：** 我们的网络服务器永远不会被调用。而是在请求响应数据中返回垃圾 html。

这工作了几个月，并在 2013 年 2 月 20 日开始失败。我们不知道是什么原因造成的。

在解决此问题之前，我们的应用程序已无法使用，因此我们非常感谢您提供任何帮助！

# mysql - 试图调用 ShellExecute 来运行 Mysql 和一个 sql 脚本

> ID：15031225
> 
> 赞同：1
> 
> 时间：2013-02-22T18:53:55.363
> 
> 标签：mysql, delphi, shellexecute

我一直在尝试在 Delphi 应用程序中使用 ShellExecute 来打开 Mysql 并运行脚本。

```
ShellExecute(Handle, 'open', PWideChar(InpCommandProgram.text),
    PWideChar(commandline), nil, SW_SHOWNORMAL);

InpCommandProgram.text = 'MYSQL'
commandline = '--user=root --password=password < C:/directory/filename.sql ' 
```

filename.sql 已被精简为“创建数据库名称”。

命令窗口会短暂打开并滚动一些消息 - 阅读速度太快。如果我打开一个命令窗口并输入相同的程序和命令行，它就可以工作。失败时我看不到错误消息。

我在 Windows 7 桌面上本地运行。我尝试将输出定向到日志文件，但我什至没有批量获取该文件。当它以交互方式成功时，我会得到一个日志。我已经尝试了所有我能想到的调整。

任何关于如何进行的想法将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:13:09.860

当您说完全相同的命令在命令提示符下工作时，您自己说过。不同之处在于命令解释器的存在，`cmd.exe`. 这对您所做的是创建将输入文件通过管道传输到 MySQL 进程的管道。

您有两个明显的解决方案：

1.  用于`CreateProcess`启动流程并自行设置管道。这有点低级，涉及相当多的 Win32 样板。如果您需要这样做，它确实使在该过程完成之前阻塞变得更简单一些。
2.  调用并要求`ShellExecute`运行MySQL 并整理管道。`cmd.exe``cmd.exe`

选项 2 更简单。它看起来像这样：

```
ShellExecute(
    0, 
    nil, 
    'cmd.exe', 
    '/c mysql --user=root --password=password < C:/directory/filename.sql',
    nil,
    SW_SHOW
); 
```

`/c`切换到告诉执行命令然后`cmd.exe`终止——这正是你想要的。

如果您需要在 MySQL 进程完成之前阻止您的进程，那么您可以切换到`ShellExecuteEx`. 这将返回一个您可以等待的进程句柄。同样，操作起来有点困难，但可能比`CreateProcess`这迫使您管理管道更容易。

# facebook - 使用 Facebook Graph API 编辑用户的“网站”

> ID：15031227
> 
> 赞同：0
> 
> 时间：2013-02-22T18:54:06.920
> 
> 标签：facebook, facebook-graph-api, post, web, publish

如何使用 Graph API 在其“关于我”页面上编辑用户的网站列表？

我已经将 API 用于用户的网站、他们朋友的网站，并发布到用户的个人资料提要，但我不知道如何使用它来将网站添加到列表中？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:34:42.997

虽然`user_website`or`friends_website`权限将允许您访问 Facebook 用户的网站字段，但目前没有允许以编程方式编辑此字段的 Graph API 调用。

[关于用户](https://developers.facebook.com/docs/reference/api/user/)的 Graph API 文档包含“字段”和“连接”。虽然可以通过发送 POST 请求来修改连接，但字段大多是只读的。由于用户的网站是后者之一，因此无法对其进行编辑。

# c# - 外键和实体框架关系设计

> ID：15031236
> 
> 赞同：1
> 
> 时间：2013-02-22T18:54:23.633
> 
> 标签：c#, sql, entity-framework, foreign-keys

我的 SQL 数据库中有两个表目前存在问题。第一个，`MasterPartsList`只是我们系统中所有零件编号的入口点，由属性给出`pn`。第二个表包含 MasterPartsList 中*组件*`MasterPartsLists`的父子（物料清单）信息，由属性给出：

 *`parentAssyPn` 和`pn`，这是来自 的外键`MasterPartNumbers`。

两个表看起来像：

```
 MasterPartNumbers (parent) one -> many     MasterPartsLists (children)
 (PK) pn                                    (fk) pn
      desc                                       parentAssemblyPn  (could also be a fk)
                                                 qty
                                                 price 
```

这使我想到问题1：

Q1：对于顶级装配零件号`MasterPartsList`，我应该

一种。保留`parentAssyPn` `NULL`, 并仅填充`pn`有问题的装配零件号，并且表中没有主键

湾。设置`parentAssyPn`=`pn`并创建一个`partial key`使用`parentAssyPn `and`pn`？`

 `Q2：在这两种情况下，这将如何影响我如何将我的 Entity Framework 实体数据从我公开来自`ObservableCollection`s 的数据的应用程序适当地保存回数据库（保存到两个表）？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:23:11.533

是否允许更改数据模型？

如果 MasterPartsLists 中的一个部件可以出现多个 MasterPartNumbers 的子部件，则为多对多关系。

我建议以下表格：

> **部分**
> 
> 零件号 (PK)
> 
> 描述
> 
> 价格

和

> **集会**
> 
> Parent_pn (PK)(FK)
> 
> 零件号 (PK)
> 
> 数量

您的完整零件库存存储在零件表中。您不会在装配表中存储任何顶级装配。

对于表组装，将其读作：要组装零件 {Parent_pn}，我需要 {PartNumber} 的 {qty} 个项目。（根据需要重复以完成组装 Parent_pn。）

编辑：让我们尝试一个简单的例子，其中一支笔由彩色墨水、一个桶和一个帽子组成。

您的零件表如下所示：

> 1、红笔
> 
> 2、蓝笔
> 
> 3、红墨水
> 
> 4、蓝色墨水
> 
> 5、桶
> 
> 6、盖帽

集会：

> 1, 3, 1 -- 红笔需要红墨水
> 
> 1, 5, 1 -- 红笔需要一桶
> 
> 1, 6, 1 -- 红笔需要一个笔帽
> 
> 2, 4, 1 -- 蓝笔需要蓝墨水
> 
> 2, 5, 1 -- 蓝笔需要一桶
> 
> 2, 6, 1 -- 蓝笔需要一个笔帽

使用这个例子，我们可以看到这是一个多对多的关系： - 一个主部件（例如红笔）由许多组件组成。- 一个组件（例如帽）可用于组成许多主零件。

这是否适用于您的场景？`*

# android - Google Api 和 android Oauth INVALID_AUDIENCE 错误

> ID：15031238
> 
> 赞同：16
> 
> 时间：2013-02-22T18:54:31.893
> 
> 标签：android, google-app-engine, google-api, google-oauth

我得到一个`GoogleAuthException: Unknown error`，同时做一个`GoogleAuthUtil.getToken`。

就在我看到的异常之前

```
GLSUser: GLS error: INVALID_AUDIENCE <email> audience:server:client_id:xxx.apps.googleusercontent.com 
```

我已将 SHA1 从我的发布密钥（包名称）设置为 google api 项目。（顺便说一句，它已成功用于 GCM。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T20:22:48.977

看起来应该可以；这是我的应用程序中的 scope-in​​it 代码，它确实有效。

```
private static final String SCOPE = "audience:server:client_id:" + SERVER_CLIENT_ID; 
```

所以我觉得客户端ID有问题。请记住

1.  您必须有一个具有两个客户端 ID 的项目
2.  一个是用于您的 android 应用程序的，带有 SHA 和包等
3.  另一个用于您要将令牌发送到的服务器端

来自 #3 的客户端 ID 在 ...:client_id: 之后

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-25T20:27:12.557

为了记录我的问题，

我通过 AWS Mobile Hub 生成的示例应用程序从 Google 登录返回了相同的 INVALID_AUDIENCE 错误。有几件事要检查，

就像 Tim Bray 上面提到的那样，让您的客户端 ID 成为有效的 Web 客户端 ID（不是 Android）。但也有一个 android 客户端 ID，它具有正确的 SHA-1 指纹（在 debug.keystore 中找到，当您单击运行时，Android Studio 使用它来签署调试版本）和包名称。

注意：AndroidManifest.xml 中列出的包名称并不总是实际的包名称。要找到最终的包名称，请转到 build.gradle 文件并查看 applicationId 字段。配置 Android Client Id 时，请务必在 Developers Console 中输入正确的包名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T11:36:20.583

发生在我的团队中，尽管它在我的设备上运行良好。原来是因为`debug.keystore`我们的 Eclipse 安装不同。

为了解决这个问题，我们将公司的`debug.keystore`文件复制到`~/.android/` （这是 mac 上的目录，在 linux 和 windows 上是不同的）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-19T21:35:24.307

此外，您还必须在 Google API 控制台中设置 oAuth 授权屏幕。

这就是我收到此错误的原因

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-17T15:14:30.167

通过删除在 .android 文件夹中找到的 debug.keystore 来解决此问题，然后再次运行新项目以生成新的 debug.keystore 文件。然后最终为 Google API 生成一个新的 SHA-1 签名证书。

# php - 以微时间存储出价

> ID：15031245
> 
> 赞同：-3
> 
> 时间：2013-02-22T18:54:54.170
> 
> 标签：php, codeigniter

您将如何根据服务器的本地时间在 php codeigniter 中存储出价？所以每次用户输入出价时，php都会使用microtime函数来存储它吗？

函数创建（$user_bid）{

```
 $this->db->set('bid', $user_bid);
    $this->db->set('microtime'=>microtime(TRUE)));
    $this->db->insert('products',array('microtime'=>microtime(true)));

    $query= $this->db->insert('products');

    $this->load->view('bidding'); 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:06:40.667

假设一个 MySQL 数据库，为什么不在数据库上简单地有一个 TIMESTAMP 列：http: [//dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html](http://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html)并让 MySQL 为您填充它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T18:56:42.847

关于什么

```
 $bidTime = microtime(true);
 $sql->prepare("INSERT INTO `bids` SET `microtime` = ?, [...]")
 ->execute(array( $bidTime, [...])); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T19:01:44.997

这是 CodeIgniter 插入的语法

```
$this->db->insert('bids',array('microtime'=>microtime(true))); 
```

# sql - 在 SQL Server 存储过程中声明变量列表

> ID：15031247
> 
> 赞同：3
> 
> 时间：2013-02-22T18:55:17.643
> 
> 标签：sql, sql-server-2012

对于每个删除语句，我想从具有相同条件（where 子句）的多个表中删除数据。

```
delete from tblA where id in (select x.id from tblX x where name like N'%test%')
delete from tblB where id in (select x.id from tblX x where name like N'%test%')
delete from tblC where id in (select x.id from tblX x where name like N'%test%')
delete from tblD where id in (select x.id from tblX x where name like N'%test%') 
```

有没有办法声明一个存储来自上面 select 语句的 id 的列表？

我试过了：

```
declare @ids int
set @ids = select x.id from tblX x where name like N'%test%' 
```

但它抱怨说

> *子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。*

请指教，谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T18:59:35.333

无论如何你都需要一张桌子，但至少你可以通过每次都做类似的事情来避免大​​量的处理：

```
-- create a table variable
declare @ids table
(
  id int not null
)

-- insert the id into the table variable
insert into @ids
select id from table1 where column1 like '%something%'

-- delete
delete from tablen where id in (select * from @ids) 
```

您也可以使用临时表，它看起来是一样的，但是您需要#ids 而不是@ids，并且您需要在工作完成后删除临时表。

要在临时表（物理表）或表变量（内存表）之间进行选择，您确实需要进行一些测试，但根据定义，复杂数据在临时表中效果更好。如果您只需要在短时间内保存少量 id，我非常确定表变量会更好。

[SQL Server 中的临时表和表变量有什么区别？](https://stackoverflow.com/questions/27894/whats-the-difference-between-a-temp-table-and-table-variable-in-sql-server)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:00:52.660

您可以声明一个临时表，然后在该表中选择您将要删除的 id。

```
CREATE TABLE #IDS_from_tblA (id int)
INSERT INTO #IDS_from_tblA(id)
    SELECT x.id FROM tblA WHERE x.id in (select x.id from tblX x where name like N'%test%')
delete from tblA where id in (select x.id from tblX x where name like N'%test%')

(Do whatever you want to do with the ids)

DROP TABLE #IDS_from_tblA 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T19:01:16.023

在 sql server 2008+

```
declare @IdList table (Id int primary key)

insert into @IDList (Id)
select x.id from tblX x where name like N'%test%'

delete from tblA where id in (select x.id from @IDList x) 
```

如果您有超过数百条记录，则可以使用临时表而不是表变量。

# mysql - 如何将部分xml导入mysql表？

> ID：15031249
> 
> 赞同：0
> 
> 时间：2013-02-22T18:55:31.080
> 
> 标签：mysql, xml, data-migration

我想将大型 xml 文件中的一些项目导入 mysql 表。假设 xml 包含数千个项目，例如：

```
<CD>
<TITLE>Empire Burlesque</TITLE>
<ARTIST>Bob Dylan</ARTIST>
<COUNTRY>USA</COUNTRY>
<COMPANY>Columbia</COMPANY>
<PRICE>10.90</PRICE>
<YEAR>1985</YEAR>
</CD> 
```

但我只需要将每张 CD 的“TITLE”和“YEAR”导入 mysql 的 cd 表。

我知道有一个'LOAD XML' mysql 5.+ 可以将数据从 xml 获取到 mysql，但显然它映射了整个 xml，这不是我需要的。所以我很感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T18:57:56.237

使用[SimpleXML](http://www.php.net/manual/en/book.simplexml.php)加载 XML，然后循环遍历这些值。我的示例使用`simplexml_load_string()`您可以轻松使用[`simple_load_file()`](http://www.php.net/manual/en/function.simplexml-load-file.php)

**例子**

```
$string = <<<XML
<?xml version='1.0'?> 
<CDS>
<CD>
<TITLE>Empire Burlesque</TITLE>
<ARTIST>Bob Dylan</ARTIST>
<COUNTRY>USA</COUNTRY>
<COMPANY>Columbia</COMPANY>
<PRICE>10.90</PRICE>
<YEAR>1985</YEAR>
</CD>
<CD>
<TITLE>Empire Burlesque2</TITLE>
<ARTIST>Bob Dylan</ARTIST>
<COUNTRY>USA</COUNTRY>
<COMPANY>Columbia</COMPANY>
<PRICE>10.90</PRICE>
<YEAR>1986</YEAR>
</CD>
</CDS>
XML;

$xml = simplexml_load_string($string);

foreach ($xml as $cd) 
{
    // Your mysql functions for inserting goes here
    echo $cd->TITLE . "<br>";
    echo $cd->YEAR . "<br>";
} 
```

[看到它在行动](http://codepad.viper-7.com/ZC0E3i)

希望这可以为您指明正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:08:37.173

所以你可以用这种方法来完成工作：

*   使用 XSLT 转换将包含所有元素的大型 XML 文件转换为仅包含所需元素的较小 XML 文件
*   比使用 XML 解析器如 SAXON、DOM 或其他解析新的小 XML 文件
*   使用一些编程语言来为您完成解析和数据库转储部分。
    例如，如果您打算使用 java，则可以使用称为 JAXB 的概念将 XML 解组为 java 对象，然后将它们填充到数据库中。

如果您可以分享有关您的原始 XML 的更多信息以及您希望从中获得哪些元素，我可以为您在 JAVA 中发布解决方案。

希望这会帮助你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T02:18:15.810

感谢abase omment，我刚刚发现将必要字段从xml导入mysql表的最简单方法是使用mysql内置的Load XML功能，例如：

```
 LOAD XML LOCAL INFILE '/path/to/file.xml' INTO TABLE  cds ROWS IDENTIFIED BY '<CD>'; 
```

您之前通过 file.xml 中需要的列创建 cds 表的位置。

请注意，在 mysql 5.5+ 中，您需要在输入 mysql 命令行时添加“--local-infile”标志，否则会收到 ERROR 1148。

# sencha-touch-2 - 视觉主题原型

> ID：15031250
> 
> 赞同：2
> 
> 时间：2013-02-22T18:55:33.017
> 
> 标签：sencha-touch-2, sencha-architect

我在制作主题原型时遇到了很多困难。那里的所有东西都需要某种css值然后编译它，是否有一个工具或sencha有什么东西可以让我看到我在做什么？

在创建他们的 sencha touch 2 应用程序时，每个人都如何制作他们的主题？使用 sass 是否是推荐的方法，即使它如此反复试验/看起来更好？Sencha Architect 允许我这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T04:32:02.187

要在不真正更改和编译项目样式的情况下试用 SASS，您可以使用此在线工具来可视化它的外观：

[http://developerextensions.com/index.php/sencha-touch-2-1-themes-builder-demo](http://developerextensions.com/index.php/sencha-touch-2-1-themes-builder-demo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T04:51:41.073

我建议您使用它，`SASS`因为它不仅是设置您自己的 Sencha Touch 主题样式的正确方法，而且还为您提供了一些强大的[全局 CSS 变量和 mixin](http://docs.sencha.com/touch/2-0/#!/api/Global_CSS)，这是您无法通过普通 css 轻松实现的。

通过使用 SASS，您需要安装`SASS`和`Compass`. 按照这个有用的教程进行操作：

[http://www.netmagazine.com/tutorials/styling-user-interface-sencha-touch-application](http://www.netmagazine.com/tutorials/styling-user-interface-sencha-touch-application)

# regex - 正则表达式捕获分隔符之间的字符串

> ID：15031253
> 
> 赞同：5
> 
> 时间：2013-02-22T18:55:44.343
> 
> 标签：regex

在[这个](https://stackoverflow.com/questions/1454913/regular-expression-to-find-a-string-included-between-two-characters-while-exclu/1454936#comment21122977_1454936)问题中，提供了一个用于捕获分隔符之间的字符串的正则表达式：

**测试：** `This is a test string [more or less]`

**正则表达式：** `(?<=\[)(.*?)(?=\])`

**回报：** `more or less`

如果要捕获的字符串也包含分隔符怎么办？

**测试1：** `This is a test string [more [or] less]`

**返回1：** `more [or] less`

**测试 2：** `This is a test string [more [or [and] or] less]`

**返回2：** `more [or [and] or] less`

和多个括号？

**测试 3：** `This is a test string [more [or [and] or] less] and [less [or [and] or] more]`

**返回 3:** `more [or [and] or] less` ,`less [or [and] or] more`

哪个正则表达式会这样做？或者哪个小的 ruby​​/python 脚本可以做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T19:05:44.577

在 JavaScript 中

```
var str = 'This is a test string [more [or [and] or] less]';    
str = str.match( /\[(.+)\]/ )[1];
// "more [or [and] or] less" 
```

如果省略`?`，`.+`将贪婪地匹配到最后一个`]`。

在蟒蛇

```
str = "This is a test string [more [or [and] or] less]"
re.search( "(?<=\[).+(?=\])", str ).group()
// "more [or [and] or] less" 
```

**更新**多个嵌套括号

在 JavaScript 中

```
var matches = [],
    str = 'This is a test string [more [or [and] or] less] and [less [or [and] or] more] and [more]';

str.replace( /\[([^\]]*\[?[^\]]*\]?[^[]*)\]/g, function ( $0, $1 ) {
    $1 && matches.push( $1 );
});

console.log( matches );
// [ "more [or [and] or] less", "less [or [and] or] more", "more" ] 
```

在蟒蛇

```
import re
str = 'This is a test string [more [or [and] or] less] and [less [or [and] or] more] and [more]'

matches = re.findall( r'\[([^\]]*\[?[^\]]*\]?[^[]*)\]', str )

print matches
# [ 'more [or [and] or] less', 'less [or [and] or] more', 'more' ] 
```

# java - 为什么这段代码返回一个长度为零的“BufferedReader”？

> ID：15031258
> 
> 赞同：0
> 
> 时间：2013-02-22T18:56:03.427
> 
> 标签：java

此代码是从教程网站粘贴的，在我的机器（win7-amd64）中不起作用！顺便说一句，我想运行这段代码来获取公共文件的创建日期/时间。

```
Runtime rt = Runtime.getRuntime();
Process proc = rt.exec("cmd /c dir c:\\logfile.log /tc");
BufferedReader br =
   new BufferedReader(new InputStreamReader(proc.getInputStream()));
String data = "";
for (int i = 0; i < 6; i++) {
   data = br.readLine();
}
System.out.println("Extracted value : " + data);
//split by space
StringTokenizer st = new StringTokenizer(data);
String date = st.nextToken();//Get date
String time = st.nextToken();//Get time
System.out.println("Creation Date  : " + date);
System.out.println("Creation Time  : " + time); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:12:44.973

问题是命令：

```
dir c:\\logfile.log /tc 
```

返回比您想要的行更多的行！尝试自己打开一个 CMD 并执行该命令。你会看到类似的东西：

```
 Volume in drive C has no label.
 Volume Serial Number is XXXX-XXXX

 Directory of C:\

22/02/2013  12:00              XXXX logfile.log
               1 File(s)          XXXX bytes
               0 Dir(s)  XXX.XXX.XXX.XXX bytes free 
```

所以你需要忽略第一行。我建议你做的是使用一个阅读器，你将能够使用 readLine() 方法和过滤器，只使用包含文件名的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:09:07.823

该文件`logfile.log`不存在，并且`BufferedReader`恰好读取了 4 行。第 5 次尝试它返回 null。`data`空也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:13:19.547

> 我想运行此代码来获取公共文件的创建日期/时间。

如果您可以使用 Java 7，则创建日期可通过[`Files.readAttributes`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#readAttributes%28java.nio.file.Path,%20java.lang.Class,%20java.nio.file.LinkOption...%29)和[`BasicFileAttributes.creationTime`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/attribute/BasicFileAttributes.html#creationTime%28%29)

# multithreading - 当 UIActivityViewController 呈现时，如何确保 UIActivityItemProvider 的项目准备就绪？

> ID：15031262
> 
> 赞同：0
> 
> 时间：2013-02-22T18:56:16.413
> 
> 标签：multithreading, ios6, nsoperation, uiactivityviewcontroller, uiactivity

根据文档`[UIActivityItemProvider item]`在辅助线程上运行。这对于不锁定 UI 非常有用，但我发现它并不总是在`item`显示时完成，例如在邮件撰写屏幕中。

我正在生成一个 UIImage 并将其保存到磁盘，以返回一个 NSURL。在运行时间较长的图像生成任务上，它在呈现给用户时是不完整的。我曾尝试将其强制到主线程上，但它仍然会发生。

如何确保`item`完整？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T02:51:12.223

这可以通过使用布尔值来保存项目的返回，直到文件的构建完成。如果您想在主视图上显示进度或显示活动指示器，您可以通过从主线程调用它来实现。这是一个实际的代码片段：

使用此功能在您的提供程序中设置活动视图控制器以加载进度视图。

```
self.parentViewController = parentVc; 
```

这是具有阻塞和反馈视图加载的项目功能。

```
self.wait = true;

[self prepareFile:^(){
    [self performSelectorOnMainThread:@selector(dismissProgressView) 
                                  withObject:nil waitUntilDone:NO];
}];

[self performSelectorOnMainThread:@selector(loadProgressView) 
                                  withObject:nil waitUntilDone:NO];

while (self.wait) {
    [self performSelectorOnMainThread:@selector(updateProgressView) 
                                         withObject:nil waitUntilDone:NO];
}

return self.completedUrl; 
```

然后，您可以创建在主线程上调用的三个函数以显示进度视图，在等待文件完成时更新进度视图。在dismissProgressView 函数的实现中，请确保dismissViewController 完成时将wait boolean 设置为false。

# debugging - 使用 Windbg 进入 MFC 源代码

> ID：15031271
> 
> 赞同：5
> 
> 时间：2013-02-22T18:56:50.260
> 
> 标签：debugging, mfc, windbg

我需要在 Windbg 中设置哪些设置才能像使用 Visual Studio 一样进入/通过 MFC 源代码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T18:56:50.260

进入 MFC 源代码需要两件事：加载正确的 MFC 符号，并设置正确的源路径。

### MFC 符号

在 Windbg 中设置符号路径的常见建议是使用`.symfix`，它将公共 Microsoft 符号服务器添加到您的符号路径中。这将允许 Windbg 为许多 Windows DLL（包括 MFC DLL）从 Microsoft 下载 PDB。但是，这些 PDB 不包含源单步执行所需的私有符号。

相反，您需要告诉 Windbg 首先查找与 Visual Studio 一起安装的私有符号 PDB，然后再查找符号服务器：

```
.sympath c:\windows\symbols\dll
.symfix+ c:\symbols 
```

或者，如果您想复制并粘贴到**File > Symbol File Path...**对话框中，请使用以下命令：

```
c:\windows\symbols\dll;srv*c:\symbols*http://msdl.microsoft.com/download/symbols 
```

给出的`c:\symbols`路径`.symfix+`告诉 Windbg 将它从服务器下载的任何 PDB 的缓存副本存储在哪里。

`windbg app.exe`您可以通过使用 Windbg ( ) 启动 MFC 应用程序、强制加载 MFC 符号并检查输出（这是 Windbg 命令会话的日志）来检查是否找到了正确的 PDB ：

```
0:000> $$ setup the correct sympath
0:000> .sympath c:\windows\symbols\dll;srv*c:\symbols*http://msdl.microsoft.com/download/symbols
Symbol search path is: c:\windows\symbols\dll;srv*c:\symbols*http://msdl.microsoft.com/download/symbols
Expanded Symbol search path is: c:\windows\symbols\dll;srv*c:\symbols*http://msdl.microsoft.com/download/symbols

0:000> $$ find the MFC DLL's full path
0:000> lm fm mfc*
start    end        module name
528e0000 52fa2000   mfc100d  C:\Windows\SysWOW64\mfc100d.dll
72390000 7239d000   MFC100ENU C:\Windows\SysWOW64\MFC100ENU.DLL

0:000> $$ force the symbols to load
0:000> .reload /f C:\Windows\SysWOW64\mfc100d.dll

0:000> $$ check for "private pdb symbols"
0:000> lm m mfc*
start    end        module name
528e0000 52fa2000   mfc100d    (private pdb symbols)  c:\windows\symbols\dll\mfc100d.i386.pdb
72390000 7239d000   MFC100ENU   (deferred) 
```

注意 mfc100d 行包含**私有 pdb 符号**。如果最后一条命令显示，没有**private**`mfc100d (pdb symbols)`一词，则您没有加载正确的 PDB，并且您将无法进入 MFC 源代码。试着再看看你的同情心。您还可以尝试打开并运行命令以查看有关尝试加载 PDB 的更多诊断信息。**`!sym noisy``.reload /f mfcdllpath`**

 **### MFC 源路径

如果您已完成默认的 Visual Studio 安装，您的 MFC（和 C 运行时）源将位于：

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\atl
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\mfc
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\mfcm
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\crt\src 
```

对于 VS2010。过去的版本具有类似的目录布局。您可以使用以下方法进行设置：

```
.sympath C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\atl;C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\mfc;C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\atlmfc\src\mfcm;C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\crt\src; 
```

或者将上面的行（不带`.sympath`）复制并粘贴到**File > Source File Path...**对话框中。

如果这些目录不存在，您可以查看 Visual Studio 认为 MFC 源代码的位置。

VS2010（可能是 2012 年）：

*   启动 Visual Studio
*   打开一个项目
*   在项目菜单中，选择属性
*   在左窗格中，展开配置属性并选择 VC++ 目录
*   在右侧窗格中，查看 Source Directories 的值

VS2008 及更早版本

*   启动 Visual Studio
*   在工具菜单中，选择选项
*   在左侧窗格中，展开 Projects and Solutions 并选择 VC++ Directories
*   在右侧窗格中，查看 Source Directories 的值**

# html - 当父宽度不是偶数时，Chrome 会阻止我的表格占满 100% 的宽度

> ID：15031275
> 
> 赞同：2
> 
> 时间：2013-02-22T18:57:14.760
> 
> 标签：html, css

这是我的问题：[JSFiddle](http://jsfiddle.net/bGAB6/)

我有一个`table`within a `div`，`div`是 50% 宽。表格应填充 100% 的宽度`div`。

```
<div>
   <table>
       <tr>
           <td>Resize and see Pixel to the right -></td>
       </tr>
   </table>
</div> 
```

CSS：

```
div {
   width: 50%;
   background: red;
}
table {
   width: 100%;
   background: rgb(255,255,255);
} 
```

它基本上可以工作，但是当您调整浏览器大小时，有时可以看到`div`. 这是因为`div`' 宽度不会被四舍五入，但`table`' 宽度会。

例如：如果 div 是 315.5px 宽（因为是 50% 的宽度），那么表格只继承了 315px 的宽度作为它的宽度。然后浏览器将 div 向上舍入为 316px，并使 div 比表格宽 1px。这个错误只发生在我的**Chrome**中。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:01:46.447

这是我在其他设计设置中遇到的问题，很难克服，我还没有解决。正在发生的事情是 Mac 和 PC 渲染字体的方式大约有 1px+ 的不同。

[http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/](http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/)

更新：

鉴于下面的对话，我整理了一个 JS 文件以在需要时调整 div 的大小。我无法复制这个问题，所以我不知道它是否会起作用，但它就是这样。当我在我的 Mac 上回家并看到错误时，我很想试试这个。

```
function fixDiv() {
    var myDiv = document.getElementById("myDiv");
    var currentWidth = myDiv.offsetWidth;

    if (currentWidth % 2 != 0) {
        var newWidth = parseInt(currentWidth) + 1;
        myDiv.setAttribute("style", "width: " + newWidth + "px");
    }
}

window.onresize = function (event) {
    fixDiv();
}

fixDiv(); 
```

# android - Android：是否可以从 C++ (libjpeg/lodepng) 加载图像？

> ID：15031276
> 
> 赞同：0
> 
> 时间：2013-02-22T18:57:20.167
> 
> 标签：android, image, android-ndk

我有一个本地 C++ 模块，它使用 libjpeg 和 lodepng 加载图像文件。在 iOS 中一切正常，我可以参考这样的图像： ...myAppBundleSrc/myImages/myImage.png

我正在将我的代码移植到android。我成功地用 ndk 构建了我的模块。问题是我不知道应该将什么文件路径传递给 C++ 中的图像加载库。我尝试了“file:///android_asset/myImages/myImage.png”但没有成功。

我在 C++ 中的导入代码

```
#ifdef _ANDROID
#include <sys/types.h>
#include <android/asset_manager.h>
#include <android/asset_manager_jni.h>
#endif 
```

我的安卓.mk

```
LOCAL_LDLIBS := -llog -landroid -lGLESv2 -L$(LOCAL_PATH)/libraries 
```

# youtube-api - 关于 YouTube API 开发密钥的困惑

> ID：15031278
> 
> 赞同：0
> 
> 时间：2013-02-22T18:57:22.630
> 
> 标签：youtube-api

我目前正在开发一个使用 YouTube API v2.0 的应用程序。我正在关注此处概述的文档。 [https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading](https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading)

我选择了 OAuth 2.0 方法来获取访问令牌，如此处所述。 [https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Server_Side_Web_Applications_Flow](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Server_Side_Web_Applications_Flow)

在 OAuth 2.0 文档中，他们让您在 API 控制台中注册应用程序。但是，在 v2.0 文档的直接上传中，他们告诉您需要包含一个带有开发人员密钥的标题，您可以通过在产品仪表板中注册产品来获得该密钥。

我没有看到产品仪表板中的注册产品如何连接到 API 控制台中的注册应用程序，使用 API 控制台中提供的客户端 ID 似乎更有意义。文档是过时的还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:38:23.573

有人可能比我能更好地解释它，但 AFAIK 你需要两者都做。需要 OAuth2 客户端 ID，以便您可以允许用户授权您的应用程序，并允许您使用您打开的任何 API 执行 oAuth2 请求……它是允许您根据需要获取访问令牌的关键。这些访问令牌然后在标头中传递。它不一定是 Youtube 特定的，尽管您可以根据不同应用程序的需求生成不同的客户端 ID，这些 ID 可以在不同的 API 上执行 oAuth2 请求。

开发者密钥是与产品仪表板分开的密钥，它向 Youtube（而不是 oAuth 服务）唯一地标识您的应用程序。它是 Youtube 特定的。

所以本质上，这两个键不一定是连接的，因为它们有两个不同的功能，但是当你发出上传请求时它们会一起工作。

不过，我很高兴得到纠正。

# java - 如何在 Struts ValueStack 中设置 EL 变量

> ID：15031288
> 
> 赞同：1
> 
> 时间：2013-02-22T18:57:59.843
> 
> 标签：java, jsp, struts2, tiles, ognl

我正在使用 Tiles 在我的页面上包含一个 JSP，并且我正在向它传递变量，但是我无法访问我在 Struts 标记中传递的值。

我能想到的唯一方法是将 EL 值添加到 struts 值堆栈中。关于如何做到这一点的任何想法？

我将 JSP 插入到的页面：

```
<tiles:insertTemplate template="manage_requests_tab.jsp">
    <tiles:putAttribute name="page" value="p1" />
    <tiles:putAttribute name="pageSize" value="ps1" />
</tiles:insertTemplate> 
```

我包括的页面：

```
<tiles:importAttribute name="page" />
<tiles:importAttribute name="pageSize" />

<s:select name="page" id="pageSize" list="myList" listKey="value" listValue="label" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:17:44.243

使用`<s:set var="yourString2">${yourString}</set>`. 之后，您可以`#yourString2`在 struts 标签中引用。如果您需要添加`%{#yourString2}`.

# sql-server - SQL Server：语法不正确

> ID：15031292
> 
> 赞同：1
> 
> 时间：2013-02-22T18:58:09.940
> 
> 标签：sql-server

我对这个 T-SQL 代码有疑问：

```
SELECT 
  DQ.Code as DQ_Code, II.OrdNumber AS Cislo, II.Id As ID,
  convert(varchar(10), cast(II.DocDate$DATE as datetime), 104) as DatumPlneni,
  convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) as DatumSplatnosti,
  F.Name as Firma, F.ID as FIRMID,
(II.LocalAmount - II.LocalCreditAmount) as LocalAmount,
(II.LocalPaidAmount) as LocalPaidAmount,
(II.LocalAmount - II.LocalCreditAmount - II.LocalPaidAmount + II.LocalPaidCreditAmount) as LocalNotPaidAmount,
 case
   when 
    ((case 
        when len(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) )=10 
          then convert(varchar(10), cast(II.DueDate$DATE as datetime), 104)
        when ((len(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) )=9) and (substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 7 for 1) ='-'))
          then substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 1 for 5)||'0'||substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 6 for 10)  
        when ((len(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) )=9) and (substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 7 for 1)<>'-'))  
          then substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 1 for 8)||'0'||substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 9 for 10)  
        when len(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) )=8 
          then substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 1 for 5)||'0'||substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 6 for 2) ||'0'||substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 8 for 2) 
      end) < cast(current_date as varchar(10)) 
     )
    then II.LocalAmount - II.LocalCreditAmount - II.LocalPaidAmount + II.LocalPaidCreditAmount
   when 
    ((case 
        when len(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) )=10 
          then convert(varchar(10), cast(II.DueDate$DATE as datetime), 104)
        when ((len(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) )=9) and (substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 7 for 1) ='-'))
          then substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 1 for 5)||'0'||substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 6 for 10)  
        when ((len(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) )=9) and (substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 7 for 1)<>'-'))  
          then substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 1 for 8)||'0'||substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 9 for 10)  
        when len(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) )=8 
          then substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 1 for 5)||'0'||substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 6 for 2) ||'0'||substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 8 for 2) 
      end) > cast(current_date as varchar(10)) 
     )
    then 0
    end as NotPaidAfterDueD
FROM 
  IssuedInvoices II
LEFT JOIN DocQueues DQ ON DQ.ID=II.Docqueue_ID
LEFT JOIN Firms F ON F.ID=II.Firm_ID
WHERE 
  (II.LocalAmount - II.LocalCreditAmount - II.LocalPaidAmount + II.LocalPaidCreditAmount)>0 
```

当我尝试在 DBeaver 中运行它时，我收到此错误：

> *SQL 错误 [156] [S1000]：关键字 'from' 附近的语法不正确。
> 关键字“from”附近的语法不正确。*

我的问题很可能出现在 CASE 部分，但我无法解决具体在哪里。你能帮我吗？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T19:08:05.720

你有几个问题。

首先，在您的`CASE`语句中，您使用的语法`substring`类似于：

```
substring(convert(varchar(10), cast(II.DueDate$DATE as datetime), 104) from 7 for 1) ='-') 
```

[`substring()`](http://msdn.microsoft.com/en-us/library/ms187748.aspx)语法是：

```
SUBSTRING ( expression ,start , length ) 
```

你会注意到没有`from`使用。所以你的代码会是这样的：

```
substring(convert(varchar(10), cast(II.[DueDate$DATE] as datetime), 104), 7, 1) ='-' 
```

其次，您在 SQL Server 中使用管道`||`将数据连接在一起，您需要使用加号`+`。所以替换：

```
...5)||'0'||substring... 
```

和：

```
...5)+'0'+substring... 
```

第三，将 替换`current_date`为`getdate()`。`current_date`替换为时您必须解决的另一件事`getdate()`是：

```
cast(getdate() as varchar(10)) 
```

这将以您不想使用的格式返回当前日期的值。我建议您查看以下网站，以确定您比较的最佳格式：

[如何在 Sql Server 2005 中格式化日期时间和日期](http://anubhavg.wordpress.com/2009/06/11/how-to-format-datetime-date-in-sql-server-2005/)

通常，您会想要使用类似的东西：

```
convert(varchar(8), getdate(), 112) – yyyymmdd 
```

最后，任何包含特殊字符的列都`DueDate$DATE`需要用方括号括起来。所以它们看起来像：

```
...cast(II.[DueDate$DATE]... 
```

# sql - Entity Framework 5.0 L2S Contains, StartsWith, EndsWith 由 于额外的引号而无法工作

> ID：15031293
> 
> 赞同：0
> 
> 时间：2013-02-22T18:58:12.523
> 
> 标签：sql, entity-framework, sql-like, contains, startswith

我有一个简单的请求，它过滤数据、排序它和来自嵌入在 Kendo Grid 工具栏中的 jQuery AutoComplete 的页面。这是进行调用的代码。

```
Service.Get(s=> s.Name.Contains("Alcurt QI, In"), o => o.Name, 1, 15) 
```

如果我从网上输入，则生成的 SQL 是正确的，但是它嵌入了附加单引号。SQL 是使用 SQL Profiler 捕获的。以下是结果的片段：

```
WHERE [Extent1].[Name] LIKE @p__linq__0 ESCAPE N''~''
)  AS [Project1]
)  AS [Project1]
WHERE [Project1].[row_number] > 0
ORDER BY [Project1].[Name] ASC',N'@p__linq__0 nvarchar(4000)',@p__linq__0=N'%''Alcurt QI, In''%' 
```

名称列是 nvarchar。

您会看到它正在使用 LIKE 但是，请注意额外的引号

```
@p__linq__0=N'%''Alcurt QI, In''%' 
```

如果我删除额外的引号，查询工作正常。我在 SQL Manager 中对其进行了测试。

然后我编写了一个模拟 HttpContext 的单元测试并调用了相同的控制器操作，并且 SQL 工作正常。这是其中的 SQL，而不是缺少的引号。

```
WHERE [Extent1].[Name] LIKE @p__linq__0 ESCAPE ''~''
)  AS [Project1]
)  AS [Project1]
WHERE [Project1].[row_number] > 0
ORDER BY [Project1].[Name] ASC',N'@p__linq__0 varchar(8000)',@p__linq__0='%Alcurt QI, In%' 
```

*   操作系统是 Windows 7
*   视觉工作室 2012
*   Nuget 的实体框架，5.0，dBContext
*   系统是 MVC 4 ntier
*   工具栏中带有自动完成功能的请求者剑道网格。

我已经验证了 EntityFramework 版本等。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:34:25.757

在查看结果后，我简直不敢相信我所看到的。所以我退后一步，从头开始重新审视，因为引用旁边有一个引用。因此，该系统按设计运行。

# ios - Updating the UITableView background in IOS6 for a standard style view

> ID：15031294
> 
> 赞同：0
> 
> 时间：2013-02-22T18:58:15.283
> 
> 标签：ios, uiview, uitableview, ios6.1

I have setup a UITableView as follows:

```
// Create sub view for fields
fieldView = [[UITableView alloc] initWithFrame:CGRectMake(0, logoView.bounds.size.height, 320, 160) style:UITableViewStyleGrouped];
fieldView.delegate = self;
fieldView.dataSource = self;
fieldView.scrollEnabled = NO;
[fieldView setBackgroundColor:[UIColor whiteColor]];
fieldView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleTopMargin; 
```

Pretty simple view here, I put two fields into the cells. Before anyone asks... **I am using a table view out of personal choice and best appearance.**

The issue I have is that I want to use the

> style:UITableViewStyleGrouped

because I feel it looks the best layout. The issue is that if I setBackground as a color on the table view in ios6 it is not updated. In ios5 simulator I see the change, not in ios6\. What I am looking for is the grouped style within the tableview but have control over the background color for that section of the view. Does this mean by only option would be to use a view for the tableview instead and if so does anyone know how to easily replicate the tableview style in a view **programatically**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:06:36.490

The `UITableViewStyleGrouped` makes use of `backgroundView`. So if you don't want the default background set it to nil:

```
fieldView.backgroundView = nil; 
```

Then it will use the `backgroundColor` you set.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:06:24.353

I have not tried this with a grouped style in particular, so this is just something to try: Instead of calling `setBackgroundColor`, what happens if you set the table view's `backgroundView`? You could set it to any UIView whose background color you have previously set.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T19:11:37.073

Use -tableView:willDisplayCell:forRowAtIndexPath: to intercept the cell and color as needed.

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row % 3)
        cell.backgroundColor = [UIColor redColor];
} 
```

This works with grouped tableviews, in storyboards, whatever.

# php - 单击时具有淡入淡出效果的隐藏/返回发送按钮

> ID：15031300
> 
> 赞同：0
> 
> 时间：2013-02-22T18:58:38.747
> 
> 标签：php, javascript, jquery, forms, submit

我想让我的按钮通过淡出消失 2 秒，然后在 2 秒后通过淡入重新出现。

有谁知道如何用 javascript 和 CSS 制作它？我不是一个JS的好专家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:04:28.070

这会做你想做的，但不要指望它解决任何垃圾邮件问题：

```
<input type='submit' onclick='$(this).fadeOut().delay(2000).fadeIn()'/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:10:19.433

要执行 onclick 功能并将其全部保存在 javascript 代码中：

```
<input id='button' value='Button Text'>
<script language='javascript'>
$(function() {
  $('#button').click(function(){
    $(this).fadeOut('slow',function() {
      setTimeout('$(this).fadeIn("slow");',2000);
    });
  });
});
</script> 
```

编辑：您可能应该禁用按钮而不是简单的淡入/淡出 - 在我工作的公司，我们只是将文本更改为“处理”，并且用户无法重新单击按钮期间（它不会回来）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:06:16.463

这将使按钮慢慢淡出，然后当它淡出完成后，它将等待 2 秒钟，然后再次淡入。请注意，这不是防止垃圾邮件的有效方法。尽管按钮“隐藏”了 2 秒，但它并没有真正停用表单。如果垃圾邮件发送者使用自动化程序填写并提交表单，则将按钮设置为隐藏不会阻止这种情况。但作为证明，请随意使用下面的代码。

```
<input id="submitBtn" type="submit" value="Submit my form!"/>
<script type="text/javascript">
    $("#submitBtn").fadeOut('slow',function(){
        setTimeout('$("#submitBtn").fadeIn("slow");',2000);
    });
</script> 
```

# javascript - 使用 jquery 的 javascript 模块在 jquery 之前加载

> ID：15031304
> 
> 赞同：0
> 
> 时间：2013-02-22T18:58:46.483
> 
> 标签：javascript, jquery

我有 javascript 模块，只有在加载 jquery 后才能解释

例子

```
<script src=myApp.js></script>
<script src=jQuery.js></script> 
```

*   myApp.js 正在使用 jQuery。
*   脚本包含序列必须与之前提供的一样

这该怎么做？因为我不能翻转它们并做

```
<script src=jQuery.js></script>
<script src=myApp.js></script> 
```

这样做的原因是我有一个 layout.html 有一些使用 jquery 的脚本，但是继承 layout.html （等 index.html）的每个其他视图都使用不同版本的 jquery，所以我希望 jquery 是唯一的每页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:00:37.993

翻转它们：

```
<script src=jQuery.js></script>
<script src=myApp.js></script> 
```

javascript 是按顺序加载的，记住 jquery 是一个 javascript 库，所以你需要在使用它之前加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:08:12.933

在您的应用程序中，您可以在计时器上检查 jQuery 的存在，然后执行主循环...

```
var sanity = 1000 // will only run 1000 times
function checkJquery(){
    if(typeof jQuery == 'undefined' && sanity--){
        setTimeout(checkJquery,100) // check again after 1/10th of a second
    } else { // jQuery has loaded!
        main() // run the main script
    }
}
setTimeout(checkJquery,100)

function main(){
    // your module code
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-22T19:00:51.740

你为什么不把 jQuery 作为第一个包含？因为它不依赖于其他东西？

尝试做

```
<script src=jQuery.js></script>
<script src=myApp.js></script> 
```

# jquery - 两组复选框，如果任一组中至少有一个复选框未选中，如何抛出验证错误

> ID：15031307
> 
> 赞同：0
> 
> 时间：2013-02-22T18:59:14.393
> 
> 标签：jquery, unobtrusive-validation

总 jQuery n00b。我有以下（简化的）表单，其中包含两个类别/组复选框（省略所有其他输入）：

```
<form id="myForm" method="post">
    Category 1:
    <input type="checkbox" name="check1" id="check1" value="1" />
    <input type="checkbox" name="check2" id="check2" value="2" />
    ...
    Category 2:
    <input type="checkbox" name="check3" id="check3" value="3" />
    <input type="checkbox" name="check4" id="check4" value="4" />
    <input type="submit" />
</form> 
```

如果在提交后未选中类别 1 中的复选框或未选中类别 2 中的复选框，我将尝试引发客户端验证错误。

同样，作为一个 jQuery n00b，我已经看到了一些将错误抛出到弹出框的示例。`<div>`但是，我想要的是在使用 jquery.unobtrusive.validation 设置的验证错误中引发错误（不记得确切的名称）。此外，名称都是不同的，这使我无法使用一些更简单的示例。

在我的模型中，复选框实际上是布尔值（在这种情况下不能使用复选框列表），使用 ASP.net MVC。因此，在我看来，我实际上会拥有代码：`@Html.Checkbox(m => m.Model.Check1)`等等。`.cshtml`我不认为这是相关的。但我可能是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:05:27.617

最简单的方法：

```
if ($('#check1,#check2').filter(':checked').length <= 0 || 
         $('#check3,#check4').filter(':checked').length <= 0) {
   // error message
} 
```

您必须自己解决其余的问题，因为您没有发布有关您如何验证此表单的有用详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:15:37.717

一种方法是将一个类分配给第一组复选框，例如`category1`，将另一个类分配给第二组，例如`category2`。然后你会做类似的事情

```
$("#myForm").submit(function() {
    if ($(".category1:checked").length == 0 || $(".category2:checked").length == 0) {
        $("#errormessage").append("<p>You must check at least one checkbox in each category!</p>"); // Or however you want the validation error to be displayed
        return false;
    }
}); 
```

但重复性较低的是`div`在每个组中的复选框周围放置一个或其他容器元素，然后为每个 div 赋予其自己的类或 ID（因此您有一个`.category1`div 包含类别 1 中的所有复选框，一个`.category2`div 包含所有复选框在第 2 类）。然后你会使用 $(".category1 :checked") 和 $(".category2 :checked") 作为选择器。

# html - 对齐浮动文本的底部

> ID：15031310
> 
> 赞同：0
> 
> 时间：2013-02-22T18:59:28.870
> 
> 标签：html, css

我正在尝试设计一个无表输入表单。我正在逐渐通过它来学习有关 CSS 的新东西。但我不知道如何让较小的验证文本与字段标签文本的底部对齐。

```
<div style="width:275px">
    <div style="width:175px">
        <label style="float:left;">Label</label>
        <span style="float:right; font-size:x-small; color:#FF0000;">Required</span>
        <input type="text" style="display:block; clear:both; width:100%" />
    </div>
</div> 
```

这会在文本框的左上角显示“标签”，在右上角显示“必需”。但是包含“必需”的跨度字体较小，并且似乎锚定在右上角，因此文本的对齐方式高于“标签”文本的底部。如何使底部对齐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:32:50.883

有几种不同的方法，但我发现这个是最有效的

```
<div style="width:275px">
    <div style="width:175px">
        <div style="position:relative; height: 2em;">
            <label style="position:absolute; left: 0; bottom: 0;">Label</label>
            <span style="position:absolute; right: 0; bottom: 0; font-size:x-small; color:#FF0000;">Required</span>
        </div>
        <input type="text" style="display:block; clear:both; width:100%" />
    </div>
</div> 
```

这也将使您无需清除所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:19:25.307

您可以添加`margin-top:5`到“必需”

# c# - .NET Linq MD5（来自列）

> ID：15031311
> 
> 赞同：0
> 
> 时间：2013-02-22T18:59:29.773
> 
> 标签：c#, asp.net, .net, linq, edmx

我如何转换这个 SQL：

```
SELECT * FROM Test Where md5(field) = 'my_hash' 
```

到 LINQ？

注意：我不能在 linq 表达式（抛出）中使用方法（外部），然后我不能在字段中应用 md5 方法。

注2：我已经有了md5方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:02:18.337

我没有看到您的完整方案，但在大多数情况下，最好存储散列字段值本身（可能在另一列中）而不是在 SQL 运行时计算它。它具有更好的性能，这样您就可以简单地创建相应的 LINQ 查询。

# python - 使用什么模块来并行调用用户定义的函数

> ID：15031315
> 
> 赞同：0
> 
> 时间：2013-02-22T18:59:40.693
> 
> 标签：python, multithreading, parallel-processing, multiprocessing

我编写了一个 irc 机器人，它在被告知时运行一些命令，这些命令是预定义的 python 函数，将在运行机器人的服务器上调用。

我必须在不知道它们会做什么的情况下调用这些函数（更多的 I/O 或计算成本高的东西，因为我在接受它们时会查看它们，所以没有什么害处），但我需要获取它们的返回值才能给出答复回到irc频道。

您推荐使用哪个模块来并行运行这些回调中的几个，为什么？

`threading`or模块，还有`multiprocessing`别的吗？

我听说过 twisted，但我不知道它如何适合我当前的实现，因为我对此一无所知，而且从协议的角度来看，该机器人功能齐全。

还要求命令异步执行操作不是一种选择，因为我希望机器人易于扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:11:48.587

您的问题没有明确的答案：这实际上取决于函数的作用、调用频率以及您需要的并行度。

`threading`和模块以完全不同的`multiprocessing`方式工作。

`threading`在 Python 解释器中实现本机线程：创建起来相当便宜，但由于 Python 的全局解释器锁 (GIL)，并行性受到限制。线程共享相同的地址空间，因此可能会相互干扰（例如，如果一个线程导致解释器崩溃，所有线程，包括您的应用程序，都会死掉），但线程间通信因此既便宜又快速。

`multiprocessing`使用不同的进程实现并行：设置比线程昂贵得多（需要创建一个新进程），但每个进程都运行自己的解释器副本（因此没有与 GIL 相关的锁定问题）并在不同的地址空间中运行（隔离你的主应用程序）。子进程通过 IPC 通道与父进程通信，并且需要对 Python 对象进行腌制/取消腌制——同样，这比线程更昂贵。

您需要弄清楚哪种权衡最适合您的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T20:36:26.490

首先，tl;博士：

[`concurrent.futures`](http://docs.python.org/3/library/concurrent.futures.html)如果您使用的是 3.2+，请使用，或者如果您使用的是 2.x，则使用 PyPI 上向后移植相同内容的模块[`futures`](https://pypi.python.org/pypi/futures)。

您可以使用 a 编写代码并将其[`ThreadPoolExecutor`](http://docs.python.org/3/library/concurrent.futures.html#threadpoolexecutor-example)切换为 a[`ProcessPoolExecutor`](http://docs.python.org/3/library/concurrent.futures.html#processpoolexecutor)作为单行更改。而且 API 是如此的小而简单，没有什么可混淆的。

* * *

> 还要求命令异步执行操作不是一种选择，因为我希望机器人易于扩展。

我不明白这是怎么回事。异步代码并没有降低其可扩展性。当然，您必须知道如何编写异步代码才能对其进行扩展，但是成千上万的 JS 新手程序员每天都在做几乎可以完成的工作，而 Python 使它变得容易得多（请参阅[`monocle`](https://github.com/saucelabs/monocle)、[`inlineCallbacks`](http://twistedmatrix.com/documents/8.1.0/api/twisted.internet.defer.html#inlineCallbacks)in `twisted`、`tulip`等） .)。此外，您在描述中明确将这些东西称为“回调”这一事实意味着您已经在考虑这些术语……</p>

如果您确信这实际上是一项要求，那么`twisted`是不可接受的。但是[`gevent`](http://gevent.org/intro.html)（和`eventlet`，等等）可能是——你可以编写看起来完全同步的代码，并且它是异步运行的。

下一个：

> 您推荐使用哪个模块来并行运行这些回调中的几个，为什么？

你真的需要并行运行它们吗（你可以利用多个内核同时运行多个 CPU 密集型作业），同时运行（长时间运行的作业不会阻塞其他作业），或者两者都不需要（只要随着工作的完成，它们是并行化、交错式还是序列化都无关紧要）？

如果需要并行性，则需要`multiprocessing`. 真的没有办法解决这个问题。GIL 将阻止您在单个进程中使用多个内核。

如果只需要并发，可以使用`threading`或`multiprocessing`。进程可能意味着在 Windows 和 Unix 之间（甚至有时在 Unix 之间）有更多的开销和/或更多的可移植性问题，并且它有时会迫使您考虑如何传递数据——或者，如果必须的话，共享它。另一方面，通过*不*强迫您考虑传递或共享数据，线程可以更容易地意外创建竞争和其他错误。（有关权衡的更多信息，请参见isedev 的最佳答案。）

如果您都不需要，您可以使用`gevent`（或类似的东西）`threading`、、或`multiprocessing`。您可以像创建数百个线程或进程一样轻松地创建和切换 10000 个绿色线程，而且开销要少得多。但是，一个长时间运行的受 CPU 限制的命令可能会使您的整个系统停止运行。

* * *

无论您使用哪一个，您很可能都希望使用一组greenlet、线程或进程，将命令从队列中拉出（而不是为每个命令派生一个新命令，或者构建更复杂的东西）。

虽然`multiprocessing`内置了这样的东西，`threading`但没有。（实际上，有*一个*基于`threading`- 的线程池——但它在 中`multiprocessing`，而不是`threading`。而且它不是公共 API 的一部分。）

中有很多非常酷的东西`multiprocessing`，如果你需要，一定要使用它。（还有一些第三方库，其中包含更酷的东西，可以使复杂的用例变得更容易，或者做一些`multiprocessing`不能做的事情。）但如果没有，那就`futures`简单多了，而且能力用单行更改（甚至在运行时简单地进行）测试具有线程和进程的同一系统非常好。

# jquery - 他们如何将页脚固定在底部，页面在顶部滚动？

> ID：15031317
> 
> 赞同：-1
> 
> 时间：2013-02-22T18:59:42.350
> 
> 标签：jquery, css, scroll, footer

我发现了一个非常酷的网站，它有一个固定的页脚并且页面在顶部滚动。我想不通他们是怎么做到的？看看他们的网站： [http ://sidigital.co/](http://sidigital.co/)

这是脚本还是 CSS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:05:43.420

它的 CSS。重要的部分在这里。请注意，body 有一个 padding-bottom，它是页脚的高度。这样，页脚不会与正文内容重叠。然后，页脚的高度是明确的，并且位于页面底部。一个很好的教程在这里[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

```
body {
padding-bottom: 453px;
overflow-x: hidden;
}

.footer {
height: 475px;
position: relative;
display: block;
position: fixed;
bottom: 0px;
z-index: 0;
} 
```

# sql - 在 Postgres 视图中折叠联合的结果

> ID：15031321
> 
> 赞同：2
> 
> 时间：2013-02-22T18:59:52.957
> 
> 标签：sql, postgresql, view, union, greatest-n-per-group

## 基本问题

Postgres 9.2 中是否有一种方法可以创建一个视图来聚合来自两个表的数据，并涉及一些逻辑？

我们需要的逻辑是：

1.  一个表中的数据优先于另一个表
2.  具有相同`key`（多个字段的组合）的后续行会覆盖以前的行。
3.  状态为`D`删除给定“键”的任何先前行的行。

## 更多细节和示例

我在 Postgres 数据库中有 2 个模式。它们每个都有相同的表和列，但数据不同。一份用于官方数据，一份用于提议的更改。

注意：我确信有更好的方法，但这是旧设置，无法更改。这是一个非常简化的虚构示例，但显示了我需要的情况和结果。

所以我们有一个特征表，描述了一个小部件。官方数据中每种类型的数据只有一种（小部件将具有一种尺寸、一种颜色等）。

提议的更改，一旦获得批准，更改官方数据。对于给定类型的数据，可能有多个待定更改。

### `official`图式

```
CREATE TABLE characteristics (
    widget_id      integer NOT NULL,
    variation_id   integer NOT NULL,
    value          varchar(10),
    action_date    date,
    status         char(1)
); 
```

样本数据`official.characteristics`：

```
1,1,GI Joe,12/25/2012,C
1,2,Green,12/25/2012,C
1,3,M,12/25/2012,C
1,4,Plastic,12/25/2012,C
2,1,GI Joe,12/25/2012,C
2,2,Green,12/25/2012,C
2,3,L,12/25/2012,C
2,4,Plastic,12/25/2012,C 
```

所以我们有 2 个小部件，一个是中号、绿色和塑料的。一个是大的、绿色的和塑料的。

### `proposed`图式

```
CREATE TABLE characteristics (
    widget_id      integer NOT NULL,
    variation_id   integer NOT NULL,
    value          varchar(10),
    action_date    date,
    status         char(1)
); 
```

样本数据`proposed.characteristics`：

```
1,2,Blue,2/22/2013,C
1,4,Plastic,2/22/2013,D
2,2,Purple,2/10/2013,C
2,2,Green,2/22/2013,D
2,3,XL,2/22/2013,C 
```

如果我们想查看所有提议的更改的结果是什么，我们可以查询这两个表，用新数据替换旧数据，或者 D 行删除任何以前的数据。

```
SELECT
  'o' as src,
  lpad(widget_id::text,4,'0'::text) || '_' || lpad(variation_id::text,4,'0'::text) as key,
  *
FROM
  proposed.characteristics
ORDER BY
  key ASC,
  action_date::date ASC 
```

第二个查询是相同的，但在另一个表上，并以 'p' 作为 src。

`key`使用PHP，我可以查询每个表，首先是官方的，其次是提议的更改，然后将数据放入以（`widget_id || '_' || variation_id`）为键的数组中。任何新行都会覆盖旧行。如果`status`是`D`（用于删除），则删除带有键的行（尽管随后提议的更改可能会重新添加它）。

所以对于上面的数据，我们最终会得到：

```
o,0001_0001,1,1,GI Joe,12/25/2012,C
p,0001_0002,1,2,Blue,2/22/2013,C
o,0001_0003,1,3,M,12/25/2012,C
o,0002_0001,1,1,GI Joe,12/25/2012,C
p,0002_0003,2,3,XL,2/22/2013,C
o,0002_0004,2,4,Plastic,12/25/2012,C 
```

### 概括

有没有办法可以创建一个可以直接查询上面结果的视图？
并且仍然有`D`删除工作，并且更新的更改会覆盖以前的更改或官方数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:32:59.477

^(由于缺少信息，假设当前版本为 PostgreSQL 9.2。)

一种方法是使用两个表中的一个CTE [，](http://www.postgresql.org/docs/current/interactive/queries-with.html)`UNION ALL`并为每个带有[`NOT EXISTS`](http://www.postgresql.org/docs/current/interactive/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)反半连接的小部件获取最后一个有效版本：

```
CREATE VIEW my_viw AS
WITH x AS (
   SELECT 'o' as src, * FROM official.characteristics
   UNION ALL
   SELECT 'p' as src, * FROM proposed.characteristics
   )
SELECT lpad(widget_id::text, 4, '0')
       || '_' || lpad(variation_id::text, 4, '0') AS key, * -- pick columns
FROM   x
WHERE  NOT EXISTS (
   SELECT 1 FROM x y
   WHERE  y.widget_id = x.widget_id
   AND    y.variation_id = x.variation_id
   AND    y.action_date > x.action_date
   )
AND   (status <> 'D' OR status IS NULL)
ORDER  BY widget_id, variation_id 
```

返回您概述的结果，除了我在评论中指出的错误。

[**-> sqlfiddle**](http://www.sqlfiddle.com/#!12/17151/2)

### 一步步

1.  `UNION ALL`在 CTE 中简单快速地从两个表中获取所有行
2.  排除行，其中存在相同（widget_id，variation_id）的后续行`NOT EXISTS`
3.  用 排除行`status = 'D'`。
4.  ORDER BY 并从中合成密钥`widget_id, variation_id`。

### 要点

*   使用原始列进行操作很可能更快，`widget_id, variation_id`并且只`key`在最终的`SELECT`. 更少的代码，更容易索引。

*   使用 CTE，因为有两个地方需要结果。

*   `status`应该定义列`NOT NULL`，这将使 WHERE 条件更简单。

*   两个表上的如下多列索引可能有助于提高性能。不知道以后能不能用`UNION ALL`。测试`EXPLAIN ANALYZE`一下看看。

    ```
    CREATE INDEX characteristics_mult_idx
    ON official.characteristics (widget_id, variation_id, action_date DESC) 
    ```

# debugging - 在 Excel VBA - Locals Window Alternative中检查公共变量的值

> ID：15031323
> 
> 赞同：12
> 
> 时间：2013-02-22T19:00:03.847
> 
> 标签：debugging, excel, global-variables, variable-assignment, vba

我一直在使用 Locals 窗口来检查过程级变量的分配。

我最近更新了我的代码以创建一组公共级别的变量，这些变量从工作表中读取某些输入，这些输入不会因项目而异。

当试图检查这些变量时，我在 Locals 窗口中看不到它们，这无疑是因为它们不是本地定义的变量！

公共变量的局部变量窗口是否有替代方法？如果没有，我应该如何检查公共变量分配？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-22T19:57:54.633

除了立即窗口（如另一个答案中所述）之外，监视窗口在这些情况下非常有用。*您可以在View* menu -> *Watch window*中激活它： ![在此处输入图像描述](../Images/a4e97fcb872a8bad26097d474e218d03.png)

在这里您可以定义：

*   任何变量（例如您的公共变量）
*   一个完整的术语，例如`ActiveWorkbook.UsedRange.Address`
*   每只手表的范围
*   即使是值更改或导致的断点`True`- 这在调试时非常方便，因为它允许您在不添加额外代码的情况下快速设置条件断点，例如，如果您将监视设置为`myVar=0`并激活*Break When Value Is True*，代码将自动停止潜在错误“启动”的那一刻

您可以在“添加监视”对话框中添加所有这些选项，您可以通过右键单击代码模块中的任何变量（或其他代码）来获得该对话框 - 或者通过右键单击监视窗口：

![在此处输入图像描述](../Images/4b30a9c8d3b5b3ab9b2da2f337215b56.png)

此外，您可以通过双击简单地编辑列表中的任何手表项目。

非常方便的调试工具，尤其是。结合*本地*和*即时*窗口。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-22T19:16:28.807

使用立即窗口。在您的编码环境中按 Ctrl + G 转到即时窗口。它允许在调试模式下获取和设置变量的值。你需要前缀？检查变量的值。例子

```
 ?variableName   press enter to get the value
 variableName ="test" press enter to set the value 
```

# bash - 带有状态的命令行工具/bash 脚本

> ID：15031325
> 
> 赞同：1
> 
> 时间：2013-02-22T19:00:05.427
> 
> 标签：bash, shell, environment-variables

我正在尝试编写一个简单的单文件 shell 脚本，该脚本应该进行 google 搜索并输出前五个结果的标题：

```
> lookup search "Stack Overflow"
100 results

1\. Stack overflow
www.stackoverflow.com
(description)

2\. ... 
```

然后用户应该能够输入：

```
> lookup go 1 
```

它将打开用户选择的命令行浏览器以显示第一个结果。

但是，这需要脚本“记住”最后一个命令的结果。

做这个的最好方式是什么？我应该将结果保存为环境变量吗？（如果是这样，这将涉及获取脚本而不是在其自己的子外壳中调用它，这可能违反安全约定/不安全？我真的不知道）我应该将结果保存在临时文本文件中吗？

[geeknote](http://geeknote.me "极客笔记")中存在类似的功能，但它是在 python 中实现的，我可能不得不最终挖掘它以找出它在哪里执行此操作；但是，我什至不完全确定该解决方案是否适用于我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:28:49.420

您可以使用点文件来保存信息，就像您的 shell 可以在登录时将 cmds 保存在 .history 文件中一样。

如果您愿意在将数据写入文件之前确保数据是干净/安全的，那么您可以对其进行设置，以便可以轻松地在脚本中获取这些值。如果您将它们保存在 t.var 中，您可能需要 ~/.yourprogram 或类似的

```
$ cat t.var 
A=yahoo.com
B=google.com 
```

然后，您可以通过 dot: 阅读它们。

```
$ cat ./s.sh
#!/bin/bash
. t.var
echo ${A} 
```

瞧：

```
$ bash ./s.sh 
yahoo.com 
```

您只需要将名称映射到职位。

```
#!/bin/bash
. t.var
case "$1" in
 1 )
   echo $A;;
 2 )
   echo $B;;
esac 
```

解析数据与恢复数据的易用性似乎需要权衡取舍。以上只是一种方式。

# html - XPath 语句在其中选择一个字符串

> ID：15031327
> 
> 赞同：0
> 
> 时间：2013-02-22T19:00:11.073
> 
> 标签：html, xml, xpath, scrapy

我正在使用 Scrapy 解析和 html 页面并从页面中提取某些值。我似乎被困在代码的最后和最后一部分，我试图在其中提取商品价格的价值。我正在查看的特定页面是[http://www.rogerssportinggoods.com/decoys-duck-decoys-c-16_71.html](http://www.rogerssportinggoods.com/decoys-duck-decoys-c-16_71.html)。这是我正在使用的部分，其中包括 119.99 美元的价格。

```
<td align="center" class="productListing-data" width="25%">&nbsp;
<a href="http://www.rogerssportinggoods.com/dakota-decoys-dakota-decoy-full-body
-mallard-decoys-6pack-p-3036.html"><img src="images/DAK-12160-125.png" border="0"
alt="Dakota Decoy Full Body Mallard Decoys, 6-Pack" title=" Dakota Decoy Full 
Body Mallard Decoys, 6-Pack "></a>&nbsp;<br>&nbsp;<a href="http://www.rogerssport
inggoods.com/dakota-decoys-dakota-decoy-full-body-mallard-decoys-6pack-p-3036.html
">Dakota Decoy Full Body Mallard Decoys, 6-Pack</a>&nbsp;<br>&nbsp;DAK-12160&nbsp;
<br>&nbsp;<a href="http://www.rogerssportinggoods.com/dakota-decoys-m-200.html">
Dakota Decoys</a>&nbsp;<br>&nbsp;$119.99&nbsp;<br>&nbsp;
<a href="http://www.rogerssportinggoods.com/-s-.html"></a>&nbsp;</td> 
```

以下是我目前用于该项目的代码：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.selector import HtmlXPathSelector
from test_scraper.items import TestScraperItem

class MySpider(CrawlSpider):
    name = "test"
    allowed_domains = ["rogerssportinggoods.com"]
    start_urls = ["http://www.rogerssportinggoods.com/decoys-duck-decoys-c-16_71.html"]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)

        titles = hxs.select("//html/body/div/div/table/tr/td/table/tr/td/table/tr/td")
        for titles in titles:
            title = titles.select("a/text()").extract()
            link = titles.select("a/@href").extract()
            price = titles.select("/a[text()='${nbsp}']").extract()
            print title, link, price 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:31:45.673

试试这个：

```
from scrapy.contrib.spiders import CrawlSpider
from scrapy.selector import HtmlXPathSelector

class MySpider(CrawlSpider):
    name = "rogers"
    allowed_domains = ["rogerssportinggoods.com"]
    start_urls = ["http://www.rogerssportinggoods.com/decoys-duck-decoys-c-16_71.html"]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)

        for box in hxs.select('descendant::table[@class="productListing"]//td'):
            title = box.select("a[2]/text()").extract()
            link = box.select("a[3]/@href").extract()
            price = [p.strip() for p in box.select("a[3]/following-sibling::node()").extract() if '$' in p]
            print title, link, price 
```

产量：

```
[u'Dakota Decoy Full Body Mallard Decoys, 6-Pack']
[u'http://www.rogerssportinggoods.com/dakota-decoys-m-200.html']
[u'$119.99'] 
```

# python-3.x - 在 tkinter.text 小部件中隐藏键入的字符

> ID：15031335
> 
> 赞同：3
> 
> 时间：2013-02-22T19:00:38.237
> 
> 标签：python-3.x, tkinter

我正在尝试编写类似于超级终端的小应用程序：在文本小部件中键入的每个字符都在串行端口上发送，而在串行端口上接收的每个字符都显示在文本小部件中。问题是连接到串行端口的设备返回它接收到的字符的回显。所以我在文本小部件中得到 2 个字符（输入和回显）

我试图删除每个键入的字符，但我正在寻找更好的解决方案。

```
def clavier(event):
    global sp
    edit.delete("insert-1c") # delete typed character
    try:
        sp.write(event.char.encode('Latin-1'))
    except:
        edit.insert(INSERT,'\nPort fermé, choisissez un port\n', 'rouge')

edit = Text(cadre, width=50,height=20,yscrollcommand = Vscroll.set)
edit.bind("<KeyRelease>", clavier) 
```

有没有办法隐藏输入的字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T14:13:23.307

我不完全确定您如何将`Text`小部件与串行端口一起使用，但似乎您想在按下键时覆盖默认操作。您可以通过`"break"`在处理函数中返回字符串来完成它：

```
edit.bind("<KeyPress>", lambda e: "break") 
```

我已经在 Python 2.7（使用 Tkinter 8.1）上尝试过它，我想它也应该适用于您的版本，但如果不能，请告诉我。

# r - 下标越界 - 一般定义和解决方案？

> ID：15031338
> 
> 赞同：74
> 
> 时间：2013-02-22T19:00:48.557
> 
> 标签：r, matrix, sna

使用 RI 时经常收到错误消息“下标越界”。[例如](http://sna.stanford.edu/sna_R_labs/lab_2.R)：

```
# Load necessary libraries and data
library(igraph)
library(NetData)
data(kracknets, package = "NetData")

# Reduce dataset to nonzero edges
krack_full_nonzero_edges <- subset(krack_full_data_frame, (advice_tie > 0 | friendship_tie > 0 | reports_to_tie > 0))

# convert to graph data farme 
krack_full <- graph.data.frame(krack_full_nonzero_edges) 

# Set vertex attributes
for (i in V(krack_full)) {
    for (j in names(attributes)) {
        krack_full <- set.vertex.attribute(krack_full, j, index=i, attributes[i+1,j])
    }
}

# Calculate reachability for each vertix
reachability <- function(g, m) {
    reach_mat = matrix(nrow = vcount(g), 
                       ncol = vcount(g))
    for (i in 1:vcount(g)) {
        reach_mat[i,] = 0
        this_node_reach <- subcomponent(g, (i - 1), mode = m)

        for (j in 1:(length(this_node_reach))) {
            alter = this_node_reach[j] + 1
            reach_mat[i, alter] = 1
        }
    }
    return(reach_mat)
}

reach_full_in <- reachability(krack_full, 'in')
reach_full_in 
```

这会产生以下错误`Error in reach_mat[i, alter] = 1 : subscript out of bounds`。

但是，我的问题不是关于这段特定的代码（即使它也有助于解决这个问题），但我的问题更笼统：

*   下标越界错误的定义是什么？是什么原因造成的？
*   有没有解决这种错误的通用方法？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-02-22T19:16:08.347

这是因为您尝试访问超出其边界的数组。

我将向您展示如何调试此类错误。

1.  我设置`options(error=recover)`
2.  我跑`reach_full_in <- reachability(krack_full, 'in')` 我得到：

    ```
    reach_full_in <- reachability(krack_full, 'in')
    Error in reach_mat[i, alter] = 1 : subscript out of bounds
    Enter a frame number, or 0 to exit   
    1: reachability(krack_full, "in") 
    ```

3.  我输入 1 我得到

    ```
     Called from: top level 
    ```

4.  我键入`ls()`以查看我当前的变量

    ```
     1] "*tmp*"           "alter"           "g"               
         "i"               "j"                     "m"              
        "reach_mat"       "this_node_reach" 
    ```

现在，我将看到变量的维度：

```
Browse[1]> i
[1] 1
Browse[1]> j
[1] 21
Browse[1]> alter
[1] 22
Browse[1]> dim(reach_mat)
[1] 21 21 
```

您会看到 alter 超出范围。22 > 21 。在行中：

```
 reach_mat[i, alter] = 1 
```

为避免此类错误，我个人这样做：

*   尝试使用`applyxx`函数。他们比`for`
*   我使用`seq_along`而不是`1:n`(1:0)
*   如果可以避免`mat[i,j]`索引访问，请尝试考虑向量化解决方案。

**编辑矢量化解决方案**

例如，在这里我看到您没有使用`set.vertex.attribute`矢量化的事实。

您可以更换：

```
# Set vertex attributes
for (i in V(krack_full)) {
    for (j in names(attributes)) {
        krack_full <- set.vertex.attribute(krack_full, j, index=i, attributes[i+1,j])
    }
} 
```

这样：

```
##  set.vertex.attribute is vectorized!
##  no need to loop over vertex!
for (attr in names(attributes))
      krack_full <<- set.vertex.attribute(krack_full, 
                                             attr, value = attributes[,attr]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-22T20:31:53.057

仅对上述响应的补充：在这种情况下，您可能正在调用一个对象，由于某种原因，该对象对您的查询不可用。例如，您可以按行名或列名进行子集化，当您请求的行或列不再是数据矩阵或数据框的一部分时，您将收到此错误消息。解决方案：作为上述响应的简短版本：您需要找到最后一个工作行名或列名，并且下一个调用的对象应该是找不到的对象。如果您运行像“foreach”这样的并行代码，那么您需要将代码转换为 for 循环以便能够对其进行故障排除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-23T19:03:20.597

如果这对任何人都有帮助，我在使用 purr::map() 和我编写的函数时遇到了这个问题，它是这样的：

```
find_nearby_shops <- function(base_account) {
   states_table %>% 
        filter(state == base_account$state) %>% 
        left_join(target_locations, by = c('border_states' = 'state')) %>% 
        mutate(x_latitude = base_account$latitude,
               x_longitude = base_account$longitude) %>% 
        mutate(dist_miles = geosphere::distHaversine(p1 = cbind(longitude, latitude), 
                                                     p2 = cbind(x_longitude, x_latitude))/1609.344)
}

nearby_shop_numbers <- base_locations %>% 
    split(f = base_locations$id) %>% 
    purrr::map_df(find_nearby_shops) 
```

有时我会在样品中遇到此错误，但大多数时候我不会。问题的根源是 base_locations 表 (PR) 中的某些状态在 states_table 中不存在，所以基本上我已经过滤掉了所有内容，并传递了一个空表来进行变异。 **这个故事的寓意是您可能遇到数据问题而不是（只是）代码问题（因此您可能需要清理数据。）**

感谢以上 agstudy 和 zx8754 对调试的帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-22T19:07:00.867

它只是意味着`alter > ncol( reach_mat )`or `i > nrow( reach_mat )`，换句话说，您的索引超出了数组边界（i 大于行数，或者 alter 大于列数）。

只需运行上述测试即可查看发生了什么以及何时发生。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-22T19:19:50.843

我有时会遇到同样的问题。我只能回答你的第二个问题，因为我在 R 方面不像其他语言那样专家。我发现标准`for`循环有一些意想不到的结果。说`x = 0`

```
for (i in 1:x) {
  print(i)
} 
```

输出是

```
[1] 1
[1] 0 
```

而对于 python，例如

```
for i in range(x):
  print i 
```

什么也没做。没有进入循环。

我预计如果`x = 0`在 R 中，将不会进入循环。但是，`1:0`是一个有效的数字范围。`if`除了有一个包装`for`循环的语句外，我还没有找到一个好的解决方法

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T14:23:32.167

这来自斯坦福的 sna 免费教程，它指出......

`# Reachability can only be computed on one vertex at a time. To` `# get graph-wide statistics, change the value of "vertex"` `# manually or write a for loop. (Remember that, unlike R objects,` `# igraph objects are numbered from 0.)`

好的，所以当使用 igraph 时，第一个滚动/列是 0 而不是 1，但矩阵从 1 开始，因此对于 igraph 下的任何计算，您都需要 x-1，如图所示

`this_node_reach <- subcomponent(g, (i - 1), mode = m)`

但是对于alter计算，这里有一个错字

`alter = this_node_reach[j] + 1`

删除+1，它会正常工作

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-03-11T07:59:53.190

它对我的作用是回到代码中并检查错误或不确定的变化，并专注于需要拥有而不是美好拥有。

# cakephp-2.1 - CakePHP 树行为和 parent_id 字段为 varchar

> ID：15031345
> 
> 赞同：0
> 
> 时间：2013-02-22T19:01:03.097
> 
> 标签：cakephp-2.1

使用 CakePHP 中的树行为，parent_id 字段可以是 varchar 吗？我有一些现有记录，但它们的 id (employee_id) 是 varchar。parent_id 字段将代表 supervisor_id 字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T13:20:48.953

理论上它应该不是问题，但它会比大连接或 SELECTS 上的整数键慢得多。这将极大地影响您的应用程序的性能。不过，您可以尝试在那里设置约束。

您还应该检查 Tree 行为的代码，以确保没有任何东西阻止它工作。

或者，如果这些 varchar 字段都是数字，请检查是否可以将它们转换为 int。

# c# - 一个 .cs 文件中的两个类

> ID：15031349
> 
> 赞同：0
> 
> 时间：2013-02-22T19:01:25.693
> 
> 标签：c#, asp.net, entity-framework, class

我对此很陌生，也许我做错了什么。我有 .cs 文件名 PayrollDetails.cs 。在其中我创建了两个类（1）获取 GrossPay 和（2）PayrollDetails。我在 GrossPay 类中有一些 getter 和 setter 方法，我想使用它们。为什么我没有得到它。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;

namespace SSPModel
{
public class getGrossPay {
       public List<BasicPay> BPList;
       private List<Allowance> AlGradeList;
       private List<Allowance> AlPostList;
       private List<AdditionalEarnings> AdEarnList;
       private List<Benefits> BenList;

       public void setBPList(List<BasicPay> a)
       {
           BPList = a;

       }
       public List<BasicPay> GetBPList() {

           return BPList;
       }

       public List<Allowance> GetAlGradeList()
       {
           return AlGradeList;
       }

       public void setAlGradeList(List<Allowance> a)
       {
           AlGradeList = a;
       }

       public List<Allowance> GetAlPostList()
       {
           return AlPostList;
       }

       public void setAlPostList(List<Allowance> a)
       {
           AlPostList = a;
       }
       public List<AdditionalEarnings> GetAdEarnList()
       {
           return AdEarnList;
       }

       public void setAdEarnList(List<AdditionalEarnings> a)
       {
           AdEarnList = a;
       }

       public List<Benefits> GetBenList()
       {
           return BenList;
       }

       public void setBenList(List<Benefits> a)
       {
           BenList = a;
       }
       public void ssss(getGrossPay inst)
       {
        List<BasicPay> a =   inst.GetBPList();
        for (int i = 0; i < a.Count(); i++)
        {
            Debug.WriteLine(a.ElementAtOrDefault(i));

        }

       }
       }
      }

    public class PayrollDetails
    {

        public static void doSomething()
        {
             // i am not getting to call any method from the class getGrossPay.
    }
} 
```

另外，关于一个不相关的问题，我需要一些关于最佳实践的建议。我有其他 .cs 文件（例如 BasicPay.cs、Allowance.cs）在其中计算值。然后我会在 GrossPay 类中调用 setter 方法（这工作得很好），但我想在另一个位置（或 .cs 文件）使用 get 方法。我基本上想将它设置在一个地方，然后在不同的位置使用 getter。如果我创建了一个新实例以在另一个 .cs 或位置使用 getter 方法，则会导致 null。关于如何解决这个问题的任何想法？我基本上有一长串我想做的函数，当我完成一个函数时，我使用setter等等，当ALL完成时，调用已经设置的ALL的getter方法，然后进行我的计算。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:03:46.560

在 1 个文件中包含 2 个类并没有什么不合法的。事实上，您可以在 1 个文件中制作整个程序。

这都是关于可读性的。每个类有一个文件很方便，文件名通常是类名。

随着项目变得越来越大，您可以使用命名空间将所有代码拆分为模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:08:38.570

`doSomething`是 中的静态方法`PayrollDetails`。其中的方法和成员`getGrossPay`不是静态的，它们是实例方法和成员。您必须先实例化一个新的 getGrossPay，然后才能对其调用方法。

```
public static void doSomething()
{
  var grossPay = new getGrossPay();
  var earnList = grossPay.GetAdEarnList();
  //etc.
} 
```

# java - 在 Servlet 3.0 / Tomcat 7.0 上运行 Jersey 的简单 REST 服务未运行但 http 状态为 500

> ID：15031351
> 
> 赞同：1
> 
> 时间：2013-02-22T19:01:33.567
> 
> 标签：java, rest, tomcat, jersey

我正在测试一个非常简单的 REST 服务器，它在 Tomcat 7.0 上使用 Jersey 和 Servlet 3.0 实现。我编写了一个简单的 PoJo：

```
package toplevel;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

@Path("/pojo")
public class PoJo {

    @GET
    @Produces("text/plain") 
    public String hello() {

        return "Hello, World"; 
    }
} 
```

我已将以下内容放入 WEB-INF/web.xml 文件（在 Servlet 3.0 上运行）：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<display-name>RestTest</display-name>    

  <servlet> 
    <servlet-name>toplevel.PoJo</servlet-name>
  </servlet>

  <servlet-mapping>
    <servlet-name>toplevel.PoJo</servlet-name>
    <url-pattern>/pojo</url-pattern>
  </servlet-mapping>

</web-app> 
```

部署时，我收到 HTTP 状态 500 响应。在我看来，网络服务器正在识别应该从 /pojo 提供某些内容，但是找不到相应的类 PoJo。球衣特定 jars（1.17 版）位于 WEB-INF/lib 目录中：

```
activation-1.1.1.jar   jersey-client-1.17.jar  junit-4.9.jar
asm-3.3.1.jar          jersey-core-1.17.jar    persistence-api-1.0.2.jar
jaxb-api-2.2.4.jar     jersey-server-1.17.jar  stax-api-1.0-2.jar
jaxb-impl-2.2.4-1.jar  jsr311-api-1.1.1.jar 
```

有人认识这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:20:52.133

您需要告诉 Jersey 在哪里可以找到您的 REST 资源。您的 web.xml 应如下所示：

```
<servlet>
  <servlet-name>Service</servlet-name>
  <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
  <init-param>
    <param-name>com.sun.jersey.config.property.packages</param-name>
    <param-value>toplevel</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>Service</servlet-name>
  <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T15:53:13.600

添加 jersey-servlet:1.17.jar 为我解决了这个问题。

# c++ - 如何使用 boost::thread::timed_join 并在 boost::date_time 中启用纳秒？

> ID：15031356
> 
> 赞同：2
> 
> 时间：2013-02-22T19:01:50.823
> 
> 标签：c++, boost-thread, boost-date-time

这是一些 C++ 代码，用一个最小的例子说明了我的问题：

```
// uncomment the next line, to make it hang up:
//#define BOOST_DATE_TIME_POSIX_TIME_STD_CONFIG //needed for nanosecond support of boost
#include <boost/thread.hpp>
void foo()
{
    while(true);
}
int main(int noParameters, char **parameterArray)
{
    boost::thread MyThread(&foo);
    if ( MyThread.timed_join( boost::posix_time::seconds(1) ) )
    {
        std::cout<<"\nDone!\n";
    }
    else
    {
        std::cerr<<"\nTimed out!\n";
    }
} 
```

只要我不打开纳秒支持，一切都会按预期工作，但是一旦我取消注释 boost::posix_time 中纳秒支持所需的#define ，程序就不会再通过 if 语句了，就好像我调用了 join() 而不是 timed_join()。

现在我已经发现，这是因为 BOOST_DATE_TIME_POSIX_TIME_STD_CONFIG 将时间戳的实际数据表示从单个 64 位整数更改为 64+32 位。在头文件中完全实现了很多提升的东西，但线程方法没有，因此它们无法适应新的数据格式，除非使用适当的选项再次编译它们。由于代码旨在在外部服务器上运行，因此编译我自己的 boost 版本不是一种选择，也不是关闭纳秒支持。

因此我的问题如下：有没有办法在不使用不兼容的 96 位 posix_time 方法并且不修改标准 boost 包的情况下将值（以秒为单位）传递给 timed_join()？

我在带有 boost 1.46.1 的 Ubuntu 12.04 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:50:05.783

不幸的是，我不认为您的问题可以按照书面方式彻底解决。由于您要链接的库是在没有纳秒支持的情况下编译的，根据定义，如果您碰巧为已编译到库二进制文件中的任何片段启用纳秒支持，则您违反了单一定义规则。在这种情况下，您将在对`timed_join`.

显而易见的解决方案是决定放弃哪个更痛苦：建立自己的提升，或消除纳秒级。

不太明显的“黑客”可能会或可能不会完全起作用，是编写自己的`timed_join`包装器，它接受一个线程对象和一个`int`代表秒或毫秒或其他的东西。然后这个函数在一个源文件中实现，没有其他任何东西，并且为了调用已编译的 boost 二进制文件的特定目的，它不会启用纳秒时间。我想再次强调，如果您在任何时候未能完全隔离此类用法，您将违反单一定义规则并遇到未定义的行为。

# android - Android webview失去焦点

> ID：15031362
> 
> 赞同：2
> 
> 时间：2013-02-22T19:02:13.427
> 
> 标签：android, android-webview

情况：我有一个带有 html 输入字段的 webview，用于输入位置，下面有一个 webview 来显示建议。该输入字段上有一个 keyup 处理程序和一个 onchange 处理程序。在 keyup 上有一条消息发出来调用 api 来填充建议 webview。

问题：输入一个字符后，输入字段失去焦点。在 android 2.3 上，键盘保持打开状态，但继续打字什么也没做。在 android 4.1 上，onchange 处理程序被触发（就好像用户已经按回车键提交他们输入的内容而不是选择建议）并且键盘和 webviews 被带走。

我考虑过的事情：外部 loadURL 调用可能会导致这种情况（如“javascript：var ...”），在其他视图上调用“requestFocus”或“bringToFront”也可能导致这种情况。在视图树侦听器上设置事件处理程序可能有助于清除问题。

不幸的是，据我所知，没有发生 url 更改，似乎没有其他视图请求焦点或被带到前面。将处理程序放在视图树侦听器上没有帮助——它是在输入字段失去焦点后触发的。

我没有想法试图找到这种焦点变化的原因。

我能做些什么来进一步调查并解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T02:49:22.713

loadUrl 是否被调用（在第一次之后）？原来 loadUrl 会自动关闭键盘。如果您使用*的是*loadUrl，我找到了解决方法！试试[https://stackoverflow.com/a/18776064/513038](https://stackoverflow.com/a/18776064/513038)。

# javascript - 带有骨干网的外部私有 API 身份验证

> ID：15031363
> 
> 赞同：1
> 
> 时间：2013-02-22T19:02:15.753
> 
> 标签：javascript, api, authentication, backbone.js, oauth

我正在构建一个 API，并且在使用 Backbone.js 等前端框架时对处理身份验证有疑问。

我有一个 API 服务器，负责根据 RESTful Web 请求返回和修改数据。

我有另一个应用服务器，它是一个主干应用程序。我希望此应用程序直接与我的 API 服务器连接，因此设置整个项目，以便此应用程序服务器可以向 API 服务器发出跨域 AJAX 请求。

我不希望未经授权的各方访问某些 API 路由。例如，我有一个路径 /users 列出了我的应用程序的所有用户。稍后我需要此路径用于管理功能，但我不希望它公开提供给我的应用服务器。

使用什么好的身份验证方案？OAuth 不起作用，因为秘密令牌将在前端公开。在那之后，我有点坚持我的选择。有人对前进有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-23T09:33:32.077

在这种情况下，我会使用多种技术。

**-- 良好的基于​​ ole Cookie 的身份验证**

由于主干应用程序将始终在浏览器中使用并且浏览器具有内置的 cookie 支持，我建议您应该在服务器端接受基于 cookie 的会话。所有与身份验证相关的东西都将由浏览器处理，您不必担心存储密钥等。在许多库（如 iPhone 中的 NSURL）和框架（如 PhoneGap/Trigger）上都支持 cookie，所以你可以支持各种工作很少的客户。

**-- 普通 API 密钥**

对于第三方，我使用基于 api-key 的身份验证。你提供`username`，`password`我提供钥匙。对于所有后续请求，您每次都在 HTTP 标头中向我发送该密钥。我使用密钥来识别您，然后相应地允许/禁止操作。

我假设一旦您可以对用户进行身份验证（等等..您是谁？），那么您就可以设置授权（您说`Micheal`？...好的，您可以访问`/users`）

*还可以查看我的[骨干解析插件](https://github.com/neebz/backbone-parse)，了解如何针对外部 API 服务对用户进行身份验证#shamelessplug*

# c# - 如何在 C#/XAML Windows Store (Metro UI) 应用程序中混合 Light 和 Dark 主题？

> ID：15031365
> 
> 赞同：4
> 
> 时间：2013-02-22T19:02:26.697
> 
> 标签：c#, xaml, windows-8, windows-runtime, windows-store-apps

根据 MSDN，设置应用程序主题的标准方法是设置`RequestedTheme="Dark"`或`RequestedTheme="Light"`在顶层`Application`实例上。

这适用于简单的应用程序，但很多时候我发现自己想要更改单个页面甚至单个控件的主题（例如，在同一个应用程序中，浅色主题的文本编辑页面与深色主题的图像查看器）。

XAML 控件具有 10 或 100 种视觉状态和颜色定义，并且手动设置它们中的每一个都是乏味的，而且很难 100% 正确！

有没有一种简单的方法可以在单个控件上设置深色或浅色主题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T20:18:26.757

对于 XAML Windows 商店应用程序，控件的默认外观定义在`Common/StandardStyles.xaml`. 如果您曾经查看过该文件，您会注意到大量的参考资料，例如`{StaticResource ApplicationForegroundThemeBrush}`. 看起来很有希望...

不幸的是，这些“主题画笔”并未在您的应用程序的任何地方定义，并且没有简单的方法可以为各个控件设置浅色或深色覆盖。然而，有一个答案。

幸运的是， Joe White 有一篇关于默认主题颜色[的出色博客文章，](http://metro.excastle.com/xaml-system-brushes)[我已将其转换为资源字典，您可以在此处找到](https://www.dropbox.com/s/7pkxwgmgekh2v2q/ThemeColors.xml)。Dropbox 仅进行 xml 预览，因此您必须重命名文件。

但是，将这些资源复制到您的应用程序本身并没有帮助。要使用它们，您需要通过手术覆盖默认控件样式才能使用它们！

一种方法是创建一个新的资源字典，例如 at `Common/CustomStyles.xaml`，并将其合并到应用程序的资源中，如下所示：

```
<Application
    x:Class="My.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    RequestedTheme="Light">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>

                <!-- 
                    Styles that define common aspects of the platform look and feel
                    Required by Visual Studio project and item templates
                 -->
                <ResourceDictionary Source="Common/ThemeColors.xaml"/>
                <ResourceDictionary Source="Common/StandardStyles.xaml"/>
                <ResourceDictionary Source="Common/CustomStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

请注意，我们的默认主题是`Light`. 如果我们想制作一个`Dark`-themed `TextBlock`，让我们复制视觉样式`StandardStyles.xaml`并将其添加到我们的`CustomStyles.xaml`并进行一些更改。

```
<Style x:Key="BasicRichTextStyleDark" TargetType="RichTextBlock">
    <Setter Property="Foreground" Value="{StaticResource ApplicationForegroundThemeBrushDark}"/>
    <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}"/>
    <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}"/>
    <Setter Property="TextTrimming" Value="WordEllipsis"/>
    <Setter Property="TextWrapping" Value="Wrap"/>
    <Setter Property="Typography.StylisticSet20" Value="True"/>
    <Setter Property="Typography.DiscretionaryLigatures" Value="True"/>
    <Setter Property="Typography.CaseSensitiveForms" Value="True"/>
</Style> 
```

**请注意，我们已附加`Dark`到样式名称和主题画笔定义！**您可以通过在 CustomStyles.xaml 文件中查找和替换`"ThemeBrush}"`=>来执行此操作。`"ThemeBrushDark}"`

现在您可以像这样创建一个深色主题的文本块：

```
<TextBlock Style="{StaticResource BasicRichTextStyleDark}"/> 
```

当然，您也可以将此技术用于任何其他类型的控制。有点乏味，但结果是正确的，而且还没有尝试手动定义每种颜色那么糟糕！

**这里没有魔法。**我们只是定义了一些颜色并用我们复制粘贴和修改以使用我们的颜色的一种覆盖默认样式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-19T21:45:32.363

一个似乎没有被提及的解决方案就是在单个控件元素上使用**RequestedTheme="Dark"**或**RequestedTheme="Light" 。**

我为一个需要将一些 appbarbuttons 设置为深色设置（即白色前景）的应用程序这样做 - 因为 Foreground 属性没有将圆圈和字形本身都设置为白色：

```
<AppBarButton Label="Reload all articles" RequestedTheme="Dark" > 
```

这样，我只是强制控件使用我决定的主题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T20:08:20.730

在 Common 文件夹中，您有一个 StandardStyles.xaml 文件。

在这里，您可以找到 Metro 应用程序的所有默认标准样式。您需要取消注释要使用的样式并将其作为静态资源添加到控件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T10:38:14.267

在设计我的应用程序“通讯录”时，我也遇到了同样的问题，因为我也想要在 Dark & Light 主题之间进行更改。对于您的问题：“**如何在 C#/XAML Windows 应用商店（Metro UI）应用程序中混合浅色和深色主题？** ”，我有一个**极好的解决方案。**

*   我制作了两个具有相同代码和相同内容的页面。我将这两个页面一个接一个地添加，然后我在这两种主题 Light & Dark 之间进行了动态更改。我为用户提供了一个选项，无论他们想要深色布局还是浅色布局，并且根据用户的选择，我已经应用了主题。在这种情况下，我成功了。

**第二种解决方案：**

*   如果您想要应用程序的动态外观，那么您必须创建自己的静态布局类型，然后您可以将该静态资源绑定到您想要应用这种样式的页面。

如果您在此处找不到答案，请原谅，但我认为它可能会帮助您在 win 8 Metro 应用程序中**动态更改“暗”和“亮”主题**设置。

# c# - 计算操作中的溢出次数

> ID：15031369
> 
> 赞同：2
> 
> 时间：2013-02-22T19:02:48.377
> 
> 标签：c#, checked

从关于这个主题的大量问题中，我知道如何检测溢出：

```
try {
    checked(doSomething());
} catch(OverflowException e) {
    //Handle overflow
} 
```

但是，有没有一种方法不仅可以检测是否至少有一次溢出，还可以实际计算有多少溢出？

编辑：为了消除误解，我不想只计算有多少操作导致音调或更多溢出，而是计算*某个操作导致多少溢出*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:09:55.300

假设这是针对整数的，请为 Int32 编写一个包装类，在其中重载所有运算符并将溢出求和到一个静态变量中。在这些运算符中执行溢出检测，最简单（也是最慢）的方法是使用检查/尝试捕获路线，但如果您需要性能，还有更智能的选择（即比较符号）。

然后在任何地方用你的包装类替换 int 。

基本代码结构：

```
struct CheckedInt {
     static int s_numOverflows = 0;
     int m_value;

     public CheckedInt(int value) { m_value = value; }
     public static CheckedInt operator +(CheckedInt x, CheckedInt y) {
         try { 
             return new CheckedInt(checked(x.m_value + y.m_value)); 
         }
         catch(OverflowException) { 
             ++s_numOverflows; 
             return new CheckedInt(unchecked(x.m_value + y.m_value)); 
         }
     }
     // ... etc for all operators, you'll also need to implement casts, IComparable(T), IEquatable(T), etc.
} 
```

# c++ - 从指针索引数组

> ID：15031371
> 
> 赞同：0
> 
> 时间：2013-02-22T19:02:50.430
> 
> 标签：c++, pointers, multidimensional-array

考虑这段代码：

```
static char a[2][2] = {
    { 1, 2 },
    { 3, 4 },
};

int main()
{
    char **p = (char**)a; // needs cast, or compiler complains (which makes sense)

    printf("%p\n", p);

    printf("%p\n", &a[1][0]);
    printf("%d\n",  a[1][0]);
    printf("%p\n", &p[1][0]); // why null?  why doesn't compiler complain about this?
    printf("%d\n",  p[1][0]); // segfault, of course

    return 0;
} 
```

这产生了这个输出：

```
0x804a018
0x804a01a
3
(nil)
Segmentation fault 
```

我知道数组可以衰减为指针。我不明白为什么编译器（g++）会让我尝试做相反的事情。如果 p 是一个 char**，为什么它让我使用 p[x][x] 而没有太多警告？它显然甚至没有接近工作，因为结果指针为空。

顺便说一句，我问的是来自第 3 方的代码，这显然对他们有用。（在 Windows 中编译，而不是使用 g++）。所以，我不是在寻找有关如何修复此代码的建议，我已经知道如何做到这一点。我只是想了解为什么编译器不抱怨，为什么结果是空指针。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T19:08:16.787

您根本无法开始处理`char`像`char**`. 在内存中，数组看起来像这样：

```
| 1 | 2 | 3 | 4 | 
```

每个元素都跟在前一个元素之后。数组名称将隐式转换为指向其第一个元素的指针：

```
| 1 | 2 | 3 | 4 |
  ^
  | 
```

现在，如果您将此指针转换为 a `char**`，您是在说“如果您取消引用此指针，您会发现 a `char*`”，这是一个彻头彻尾的谎言。如果您取消引用指针，您将得到一个`char`with value `1`，而不是指针。

然后，当您这样做时`p[1][0]`，您将 at 的值`p[1]`（实质上将指针`p`移动`sizeof(char*)`）视为指针并尝试取消引用它。当然，这会直接导致您出现未定义的行为。

编译器不允许你做那个演员，因为这是一个愚蠢的演员。不要这样做。仅仅因为 C 风格的演员表允许你这样做，这并不意味着它是一个好的操作。如果没有其他演员可以工作， C 风格的演员将回退到一个`reinterpret_cast`，在这种情况下，你几乎肯定会遇到未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:11:22.500

实际给出一个答案：`a`是一个数组。对于像这样的语句`char* p = a;`，`a`会自动衰减到指向第一个元素的指针`{ 1, 2 }`，并且由于这是一个数组，因此也会衰减到*它的*第一个元素`1`。*然而*,仍然衰减到 that `char**p = a`，然后你将整个数组转换为: （它解释为），这根本没有意义。它是指向数组的指针，而不是指向指针的指针。 *这*就是你需要演员阵容的原因，因为它没有意义。 `a``array of array of char``an array of pointers to chars``{0x01020304, 0x????????}`

 *Second, when you type `p[1]`, it treats that data (and a few bytes after it) as if they were an array of `char` pointers, `{0x01020304, 0x00000000}`, and returns the second element. (We can see it's all zeros in this particular case, because that's what printed on the screen later), Then the `[0]` dereferences *that* second mystery unknown pointer that happens to be NULL, giving you a segfault.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:07:15.813

当你这样说时：

```
char a[2][2];
char **p = (char**)a; 
```

这是一个错误。 `a`不是指向字符的指针数组。它是一个存储块数组，每个块都是一个字符数组。*

# java - 列出覆盖对象java

> ID：15031373
> 
> 赞同：0
> 
> 时间：2013-02-22T19:02:58.070
> 
> 标签：java, oop, list, arraylist

嗨，我的 java 代码有问题...

问题在我列表的 add(e) 中，如下所示：

```
List<Sms> listSms = new ArrayList<Sms>();
   for(int i = 0; i < grupo.size(); i++){
        Grupo group = new GrupoDao().carregaById(grupo.get(i),usuario.logado);
        for(int j = 0; j < group.getContatos().size(); j++){
            sms.setNumber(group.getContatos().get(j).getNumber());
            listSms.add(sms);//Here he override all the list sms.number to last one added
        }
    } 
```

有谁能够帮助我 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-22T19:04:18.480

您添加到列表中的不是实例，而是对实例的引用。因此，最后， 中的所有引用`list`都指向同一个实例。这意味着，您使用任何引用对实例所做的更改将反映在您之前添加到列表中的所有引用上。

`Sms`解决方案是每次在列表中添加对它的引用时创建一个新实例。您必须在`for`循环中执行此操作。

```
for(int j = 0; j < group.getContatos().size(); j++){
    Sms sms = new Sms();
    sms.setNumber(group.getContatos().get(j).getNumber());
    listSms.add(sms);//Here he override all the list sms.number to last one added
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:06:46.820

您一次又一次地添加相同的对象/实例。您需要向列表中添加一个新实例，如下所示：

```
Sms x=new Sms();
x.setNumber......
listSms.add(x); 
```

# javascript - 从我的路线目录中的文件导出时，为什么不返回我的视图？

> ID：15031374
> 
> 赞同：0
> 
> 时间：2013-02-22T19:03:06.200
> 
> 标签：javascript, node.js, express, url-routing

我只是在 ExpressJS 中试验基本路由，到目前为止我有两条路由：

```
app.get('/', function(req,res) {
  res.render('index');
});

app.get('/pics', function(req,res) {
  res.render('pics');
}); 
```

当像这样定义时，在我的 app.js 中，一切正常，但是当从我的子目录中的单个文件导出如下时`routes`，我收到错误消息，指出需要回调函数，但返回了未定义的对象。

**index.js：**

```
exports.index = function(req,res) {
  res.render('index');
}); 
```

**图片.js**

```
exports.pics = function(req, res) {
  res.render('pics');
}; 
```

**应用程序.js**

```
var routes = require('./routes');

app.get('/', routes.index);
app.get('/pics', routes.pics); 
```

在后一个例子中我做错了什么来破坏一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:13:21.043

`require('./routes')`只加载`./routes/index.js`，不加载`./routes/pics.js`。所以`routes.pics`将是未定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:14:46.160

index 路由正在运行，但您的 pics 路由不是因为您尝试从 index.js 导入它。

路由目录有 index.js，这意味着如果你这样做，`require('./route')`你实际上是在做`require('./route/index')`. 发生这种情况是因为 index.js 在 Node.js 中具有特殊含义。

因此，要使图片正常工作，您需要执行以下操作：

```
app.get('/pics', require('./routes/pics').pics); 
```

这可能真的很令人困惑，并且是 IRC 频道上经常被问到的一个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:10:09.987

**require()**将尝试加载 index.js。

这是一个小的咖啡脚本片段，您可以将其粘贴（将其转换为 js）到 index.js 中。它将自动加载当前目录中的所有文件（路由）：

**index.coffee**

```
module.exports = (app) =>
  require("fs").readdirSync(__dirname).forEach (file) ->
    i = file.lastIndexOf('.')
    ext = if (i < 0) then '' else file.substr(i)
    if (ext == ".js" or ext == ".coffee") and file != "index"+ext
      require("./" + file)(app) 
```

**应用程序.js**

```
require("./routes")(app) 
```

**someRoutes.js**

```
app.get('/', function(req,res) {
  res.render('index');
}); 
```

# php - 组合多个 MySQL JOIN 查询

> ID：15031375
> 
> 赞同：0
> 
> 时间：2013-02-22T19:03:06.940
> 
> 标签：php, mysql, sql, join, left-join

我有这个查询，它与用户注册的课程的作业 ID 相呼应。

```
$sql = $db->prepare("SELECT assignments.*, enrollments.course_id, enrollments.student_id
                        FROM assignments
                        LEFT JOIN enrollments
                        ON assignments.course_id = enrollments.course_id
                        LEFT JOIN completed
                        ON assignments.id != completed.assignment_id
                        WHERE enrollments.student_id = ?
                        ORDER BY assignments.id DESC LIMIT 10
                        ");

$sql->execute(array($login_id));

while($row = $sql->fetch())
        {
                echo $row['id'];
        } 
```

在我查看作业是否已标记为已完成的情况下进行另一次检查的最佳方法是什么？

这意味着它还需要检查“已完成”表，并确保对于任何选定的分配，没有 $login_id 和 assignment.id 一起出现的行。

这是我现在要查找已登录用户的已完成分配 ID 的查询。

```
$sqlcomplete = $db->prepare("SELECT * FROM completed
INNER JOIN students ON completed.student_id = students.id
WHERE completed.student_id = ?
");

$sqlcomplete->execute(array($login_id));

while($row = $sqlcomplete->fetch(PDO::FETCH_ASSOC))
{
echo "<li>You have completed assignment with ID ".$row['assignment_id']."</li>";
} 
```

我试图做一个更复杂的`JOIN`，但我似乎无法弄清楚。我还考虑过简单地创建一个用户通过单独查询该数据库完成的分配的 ID 数组，并将该 ID 放入 while 检查中，但我觉得这不是最好或最有效的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:06:08.683

您可以使用`LEFT JOIN`and when `completed.assignment_id IS NULL`then 这意味着已完成的表没有返回匹配项。

```
SELECT assignments.*, enrollments.course_id, enrollments.student_id
FROM assignments
 LEFT JOIN enrollments ON assignments.course_id = enrollments.course_id
 LEFT JOIN completed ON assignments.id = completed.assignment_id
WHERE enrollments.student_id = ?
AND completed.assignment_id IS NULL
ORDER BY assignments.id DESC LIMIT 10 
```

# javascript - Chrome / Firefox 缓存图像问题

> ID：15031376
> 
> 赞同：0
> 
> 时间：2013-02-22T19:03:10.060
> 
> 标签：javascript, html, google-chrome, firefox

我在预加载图像和动态创建元素时遇到问题。该脚本加载图像 URL 列表、创建画布元素等。

问题在于，在随后的“软”刷新或提交相同的 URL 时，不会启动预加载循环，因此不会创建画布元素等。我很确定这与资源缓存有关 - 但是 - 为什么脚本没有按预期迭代图像 URL 列表并构建 DOM 我不确定......[这是一个例子](http://encycolorpedia.com/color-palette-generator?URL=http://bit.ly/159sN71&limit=16&colorspace=CIELab)

页面上的 JavaScript 是优化输出，但预加载循环如下所示：

```
// Images array
var images = [];

for (var i = 0; i < l.length; ++i) {
    // Create canvas element
    var canvas = document.createElement('canvas');
    // Canvas element properties
    canvas.width = l[i].w;
    canvas.height = l[i].h;
    canvas.style.display = 'none';
    // Image element + mouse over event
    images[i] = document.getElementById('i' + i).getElementsByTagName('img')[0];
    images[i].addEventListener('mouseover', function() {
        handleCanvas(this);
    }, false);
    // Push canvas into DOM
    images[i].parentNode.insertBefore(canvas, images[i]);
    // Preload item from processed images list
    var image = new Image;
    image.src = l[i].i;
} 
```

如果可能的话，我不想求助于标题或“URL？random=37436464”类型的修复。在 Ubuntu 12.10 上的夜间版本的 Chrome 和 Firefox 上进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T16:06:14.900

经过进一步调查（在 IE9 中测试），问题似乎是由 JavaScript 的异步加载和滞后变量启动引起的。

# matlab - 避免点积循环，matlab

> ID：15031377
> 
> 赞同：0
> 
> 时间：2013-02-22T19:03:12.550
> 
> 标签：matlab

我有两个向量，我想在没有 for 循环的情况下获得他们的 dor 产品。这会节省很多时间。

这是示例代码。

```
p=1;
C=zeros(100,1);
    r_a_= rand(1,3);    
    r_b= rand(100,3);    
    for it=1:size(r_b,1)
        C(p,1) = dot(r_a_,r_b(it,:)) ;
     p=p+1
    end 
```

为了避免for循环并只调用一次点函数，我是这样想的

```
r_a=repmat(r_a_,100,1);
C = dot(r_a,r_b) %%%%%%%% But obviously it gives wrong answer 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:06:55.213

您可以使用矩阵乘法来做到这一点，如下所示：

```
r_a_ = rand(1,3);
r_b = rand(100,3); 
C = r_a_ * r_b.' 
```

# f# - 即使有多个不同的递归调用，是否可以针对尾递归优化函数？

> ID：15031382
> 
> 赞同：6
> 
> 时间：2013-02-22T19:03:23.373
> 
> 标签：f#, tail-recursion

正如我在[最近的 SO question](https://stackoverflow.com/questions/15008364/f-assuming-int-when-actually-dealing-with-int64)中提到的，我正在通过[Project Euler](http://projecteuler.net/)问题学习 F#。

我现在对[问题 3](http://projecteuler.net/problem=3)有一个有效的答案，如下所示：

```
let rec findLargestPrimeFactor p n = 
    if n = 1L then p
    else
        if n % p = 0L then findLargestPrimeFactor p (n/p)
        else findLargestPrimeFactor (p + 2L) n

let result = findLargestPrimeFactor 3L 600851475143L 
```

但是，由于有 2 个执行路径可能导致对 的不同调用`findLargestPrimeFactor`，我不确定它是否可以针对尾递归进行优化。所以我想出了这个：

```
let rec findLargestPrimeFactor p n = 
    if n = 1L then p
    else
        let (p', n') = if n % p = 0L then (p, (n/p)) else (p + 2L, n)
        findLargestPrimeFactor p' n'

let result = findLargestPrimeFactor 3L 600851475143L 
```

由于只有一条路径导致对 的尾调用`findLargestPrimeFactor`，我认为它确实会针对尾递归进行优化。

所以我的问题：

1.  即使有两个不同的递归调用，第一个实现是否可以针对尾递归进行优化？
2.  如果两个版本都可以针对尾递归进行优化，那么是否有一个比另一个更好（更“功能”、更快等）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T19:16:55.553

您的第一个`findLargestPrimeFactor`函数是尾递归 - 如果所有递归调用都发生在尾部位置，即使有多个函数，也可以使函数成为尾递归。

这是编译函数的IL：

```
.method public static int64  findLargestPrimeFactor(int64 p,
                                                    int64 n) cil managed
{
  .custom instance void [FSharp.Core]Microsoft.FSharp.Core.CompilationArgumentCountsAttribute::.ctor(int32[]) = ( 01 00 02 00 00 00 01 00 00 00 01 00 00 00 00 00 ) 
  // Code size       56 (0x38)
  .maxstack  8
  IL_0000:  nop
  IL_0001:  ldarg.1
  IL_0002:  ldc.i8     0x1
  IL_000b:  bne.un.s   IL_000f
  IL_000d:  br.s       IL_0011
  IL_000f:  br.s       IL_0013
  IL_0011:  ldarg.0
  IL_0012:  ret
  IL_0013:  ldarg.1
  IL_0014:  ldarg.0
  IL_0015:  rem
  IL_0016:  brtrue.s   IL_001a
  IL_0018:  br.s       IL_001c
  IL_001a:  br.s       IL_0026
  IL_001c:  ldarg.0
  IL_001d:  ldarg.1
  IL_001e:  ldarg.0
  IL_001f:  div
  IL_0020:  starg.s    n
  IL_0022:  starg.s    p
  IL_0024:  br.s       IL_0000
  IL_0026:  ldarg.0
  IL_0027:  ldc.i8     0x2
  IL_0030:  add
  IL_0031:  ldarg.1
  IL_0032:  starg.s    n
  IL_0034:  starg.s    p
  IL_0036:  br.s       IL_0000
} // end of method LinkedList::findLargestPrimeFactor 
```

子句中的第一个分支`else`（即 if `n % p = 0L`）从 IL_0013 开始，一直持续到 IL_0024，在那里它无条件地分支回到函数的入口点。

else 子句中的第二个分支从 IL_0026 开始，一直持续到函数结束时，它再次无条件地分支回到函数的开头。F# 编译器已将递归函数转换为包含递归调用的 else 子句的两种情况的循环。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-22T19:24:14.997

> 即使有两个不同的递归调用，第一个实现是否可以针对尾递归进行优化？

递归分支的数量与尾递归正交。您的第一个函数是尾递归的，因为`findLargestPrimeFactor`它是两个分支上的最后一个操作。如果有疑问，可以尝试在`Release`mode 下运行函数（默认开启尾调用优化选项）并观察结果。

> 如果两个版本都可以针对尾递归进行优化，那么是否有一个比另一个更好（更“功能”、更快等）？

两个版本之间只有细微的差别。第二个版本创建了一个额外的元组，但它不会减慢计算速度。我认为第一个函数更具可读性和直截了当。

为了吹毛求疵，第一个变体使用`elif`关键字更短：

```
let rec findLargestPrimeFactor p n = 
    if n = 1L then p
    elif n % p = 0L then findLargestPrimeFactor p (n/p)
    else findLargestPrimeFactor (p + 2L) n 
```

另一个版本是使用模式匹配：

```
let rec findLargestPrimeFactor p = function
    | 1L -> p
    | n when n % p = 0L -> findLargestPrimeFactor p (n/p)
    | n -> findLargestPrimeFactor (p + 2L) n 
```

由于底层算法相同，因此也不会更快。

# android - 如何禁用 proguard 来构建我的 Android 应用程序？

> ID：15031386
> 
> 赞同：26
> 
> 时间：2013-02-22T19:03:51.673
> 
> 标签：android

以前是proguard是由project.properties控制的，现在已经不是这样了，Android文档也没有更新。project.properties 文件现在清楚地表明它是由 Android 工具生成的，并且更改将被删除。我试过注释掉 proguard.config 行，但是当我编译时，它会重写 project.properties，并继续使用 proguard。当前禁用proguard的方法是什么？谢谢！

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must be checked in Version Control Systems.
#
# To customize properties used by the Ant build system edit
# "ant.properties", and override values to adapt the script to your
# project structure.
#
# To enable ProGuard to shrink and obfuscate your code, uncomment this (available properties: sdk.dir, user.home):
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt:proguard-google-api-client.txt

# Project target.
target=android-17
android.library.reference.1=../../../../android-sdk-linux/extras/google/google_play_services/libproject/google-play-services_lib 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2016-08-20T06:44:19.850

设置这个

```
minifyEnabled false 
```

在您的应用中`build.gradle`

像这样：

```
 buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
        debug {
            minifyEnabled false 
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }

    } 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-12-27T09:55:04.540

放

```
 useProguard false 
```

在您的应用程序 build.gradle

喜欢

```
 buildTypes {
    release {
        minifyEnabled false
        useProguard false
        proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-22T20:24:14.630

您是否尝试将下一行添加到您的 proguard 配置文件（到文件的开头）：

```
-dontobfuscate 
```

?

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-02-22T19:29:34.570

尝试删除项目中的 proguard 目录。所以proguard会忘记它的映射。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-30T11:33:37.670

根据[React-Native Docs](https://facebook.github.io/react-native/docs/signed-apk-android.html)，要禁用 Proguard，请在 android/app/build.gradle 中将 def enableProguardInReleaseBuilds 设置为 false **：**

```
/**
* Run Proguard to shrink the Java bytecode in release builds.
*/
def enableProguardInReleaseBuilds = false // Instead of true 
```

# jquery - 除非启用跟踪，否则 jQuery UI 1.10.1 工具提示不会显示

> ID：15031403
> 
> 赞同：0
> 
> 时间：2013-02-22T19:04:42.983
> 
> 标签：jquery, jquery-ui, tooltip

我一直试图让 jQuery 工具提示出现。它们仅在启用跟踪时显示。

```
$('.tooltip[title]').tooltip({track:true}); 
```

这工作得很好，工具提示似乎随着鼠标光标移动。

```
$('.tooltip[title]').tooltip(); 
```

不能按预期工作。

使用`tooltip`类检查元素时。我可以看到 jQuery 正在创建工具提示，因为该属性`aria-describedby`被添加到元素中，并在光标离开元素时被删除。因此，似乎正在创建工具提示元素，但我在屏幕上的任何地方都看不到它。

我尝试将以下内容添加到我的 CSS 文件中。

```
.ui-tooltip {
     position: absolute !important;
     z-order: 999999 !important;
} 
```

但这并没有什么不同，启用跟踪时工具提示显示得很好，所以我怀疑这是我的 CSS。

我还尝试了不同`position`设置的多种组合，并尝试了所有`position/collision`设置，但没有任何效果。

# android - 将 Nexus 上的 Android 升级到 4.2.2 后，Eclipse 显示设备的目标未知？

> ID：15031411
> 
> 赞同：21
> 
> 时间：2013-02-22T19:05:13.157
> 
> 标签：android, eclipse

我刚刚将手机升级到 4.2.2，但现在我不能在 eclipse 中使用它了。

![在此处输入图像描述](../Images/3ee1815aa7334d633ff6325f1e3eea30.png)

我尝试重新启动设备，重置我的调试设置，但我无法让它工作了。

我看到它已经是一个注册[问题](http://code.google.com/p/android/issues/detail?id=50627 "问题")。有一些新的安全增强，所以应该有一个对话框（见底部） [，](http://android-developers.blogspot.de/2013/02/security-enhancements-in-jelly-bean.html "这里")但这个对话框没有出现。我在电话上没有几个帐户，问题中指出了这一点。

有人有什么建议吗？

**编辑：**看看下面接受的答案，这应该涵盖所有情况。就我而言，缺少一些包，这些包没有显示在 Android SDK 管理器中。我刚刚在**Android SDK 管理器中找到了****Packages -> Reload** ...我认为这会自动发生

 *** * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-22T19:19:26.860

您需要三件事才能确保此更新顺利进行：

1.  确保您的设备实际运行的是 4.2.2 并且问题不是其他问题
2.  您的 SDK 已更新为最新工具。`adb`除最新版本外，所有二进制文件均不支持 4.2.2 安全增强功能。
3.  如果有多个用户帐户，您将使用设备的主帐户。

将您的设备连接到您的计算机并执行`adb devices`（确保启用了 USB 调试）。您应该看到如下内容：

```
3tiu52839ry082j3 offline 
```

现在，您的设备上应该有一个对话框，如下所示：

![在此处输入图像描述](../Images/d55e25a4a83eb661d5ba9028ee9df67f.png)

`Always allow from this computer`如果需要，请选中该框，然后单击`OK`。

就是这样。

其他一些需要检查的事情：

*   确保您的 USB 电缆没有损坏。有时，较小的电缆会在主电缆内部断裂，您的设备可能会充电但没有数据连接。尝试使用不同的电缆，或尝试通过 USB 访问设备上的文件（如果您的电缆没问题，这会很好）
*   确保您使用的是最新版本的`adb`. 即使在我更新了我的 SDK 工具之后，我在使用`adb`. 我最终发现 NDK 和 SDK 工具的 Nvidia 安装已更新我的`PATH`变量以使用该`adb`安装中的变量，这不是最新的更新。通过`adb`在我新更新的安装中使用，我能够让它全部工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-27T22:30:00.930

对我来说，它是通过将 Nexus 7 平板电脑更改为“相机（PTP）”模式来解决的。查看[此博客文章](http://zacktutorials.blogspot.ca/2012/08/nexus7-android-development.html)，了解如何操作。在 Nexus 7 的 USB 连接并在 Nexus 7 上确认摘要后，也可以通过 TCP/IP 与 ADB 连接。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T18:45:22.337

奇怪的是，取消选中并重新选中“允许 USB 调试”选项弹出窗口并选择“确定”解决了我的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-22T13:19:03.190

如果这些解决方案都不适合您，请重置 ADB。转到设备---单击最右边的向下箭头----从列表中选择重置 ADB。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T23:15:38.427

我已经尝试了这里建议的所有内容，并在我可以在 google 中找到的每个日志/博客中提出了建议，但仍然没有成功。众所周知，USB 电缆是好的。ADB 版本为 1.0.31（如 所示，在 Nexus 7 平板电脑中启用了 USB 调试，SDK 已更新为 2013 年 3 月 1 日可用的最新工具，适用于 4.2.2/API 17。我都试过了USB的媒体和相机模式，重新启动的窗口，一遍又一遍地重新启动设备，重新安装最新的谷歌USB驱动程序等，但ADB设备仍然没有显示*任何内容*。

我硬重置了 Nexus 7 平板电脑，认为可能允许 USB 调试的屏幕出现了，但被取消了。但这也没有用。

最终奏效的是：

1.  进入windows控制面板| 装置经理，
2.  在便携式设备下选择 NEXUS，
3.  然后在驱动程序选项卡中单击更新并手动选择 Google USB 驱动程序（检查功能说它是最新的）。以前，显示的日期是 2006 年，之后是 2012 年的日期（但稍后会详细介绍）。

但这并没有解决任何问题。

然后我将 USB 从 MEDIA 设备切换到 Camera 设备 - 然后它想安装驱动程序软件，所以我让它这样做。之后，我注意到 Nexus 的驱动程序回到了 2006 版本，但 ADB 设备最终显示离线！！！！哈利路亚和 Nexus 正在显示对话框以允许 USB 调试，现在一切正常。

我不确定是哪一步真正解决了这个问题。我认为没有必要硬重置平板电脑，但摆弄设备驱动程序也不是一个非常令人信服的解决方案 - 我不认为驱动程序已损坏 - 但也许必须更改它才能获得作为相机设备连接时与平板电脑关联的正确驱动程序。无论如何，必须将平板电脑连接为相机设备才能使 ADB 工作...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-10T08:25:45.373

重新启动设备或启用 USB 调试并没有解决我的问题。但是，我将 USB PC 连接更改为“相机（PTP）”模式，并且 adb 设备显示了手机的设备 ID。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-24T14:04:26.593

在阅读了很多关于这个特定问题的帖子后，我实际上通过重置用户对文件（由 root 拥有）的权限来解决它：${HOME}/.android/adbkey 和 ${HOME}/.android/adbkey.pub

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-08T17:03:55.410

转到设备管理器并卸载您的设备并从 USB 中删除您已打开 CMD 并确保您至少在 ADB 帮助中。将设备连接到 USB 并继续执行 Raghav Sood 提供的步骤 - 我前面的答案很少。

为我工作得很好

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-13T09:22:08.177

我尝试了这个自定义版本，它对我有用。现在我可以再次在 Eclipse 中看到我的 logcat。

[https://github.com/khaledev/ADT/releases](https://github.com/khaledev/ADT/releases)

下载 zip 文件，然后在 Eclipse 菜单帮助 > 安装新软件... > 添加 > 存档... 只需选择下载的 zip 文件，然后执行其余的安装过程。**

# ruby-on-rails - 在 Rails 的嵌套哈希中搜索键

> ID：15031412
> 
> 赞同：1
> 
> 时间：2013-02-22T19:05:14.673
> 
> 标签：ruby-on-rails, hash

我在一个名为的对象中捕获了以下嵌套哈希（来自 Ominauth-Facebook）`myAuth`

```
<Ominauth::AuthHash credentials 
                     extra=#<Hashie:: Mash 
                     raw_info=#<Hashie::Mash email="myemail@gmail.com">>> 
```

我想提取电子邮件，所以我使用：

```
myAuth['extra']['raw_info']['email'] 
```

但是，我想在`email`不知道确切哈希结构的情况下搜索整个哈希并获取键的值。我应该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:30:50.160

不知道这是否是最好的解决方案，但我会这样做：

```
h = {seal: 5, test: 3, answer: { nested: "damn", something: { email: "yay!" } } }

def search_hash(h, search)
  return h[search] if h.fetch(search, false)

  h.keys.each do |k|
    answer = search_hash(h[k], search) if h[k].is_a? Hash
    return answer if answer
  end

  false
end

puts search_hash(h, :email) 
```

如果键存在或为假，这将返回值。

# c# - 如果在其中启动了新线程，则方法何时返回

> ID：15031413
> 
> 赞同：0
> 
> 时间：2013-02-22T19:05:17.547
> 
> 标签：c#

假设我有一些看起来像这样的代码：

```
public SomeMethod() {

   foreach (x...)
   {
     if (SomeCondition)
     {
        var SomeVariable = x;
        Task.Factory.StartNew(() => SomeOtherMethod(SomeVariable));
     }
   }

   return SomeValue;
} 
```

如果`SomeOtherMethod`在一个新线程中被调用并启动，是否 a)`SomeMethod`等到该线程完成运行后再返回，或者 b) 方法返回，然后线程在返回`SomeOtherMethod`后仍自行继续`SomeMethod`？

我问的原因是我需要等到全部`SomeOtherMethods`完成后再退出 SomeMethod。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T19:13:53.490

收集一个集合中的所有任务，然后调用[`Task.WaitAll`](http://msdn.microsoft.com/en-us/library/dd235659.aspx)它：

```
List<Task> tasks = new List<Task>();
foreach (x...)
{
    if (SomeCondition)
    {
        var someVariable = x;
        tasks.Add(Task.Factory.StartNew(() => SomeOtherMethod(someVariable));
     }
}
Task.WaitAll(tasks.ToArray()); 
```

请注意，在 .NET 4.5 中编写异步方法时，您将使用：

```
await Task.WhenAll(tasks); 
```

因为`Task.WhenAll`它本身不会阻塞，而是返回一个任务，该任务在所有其他任务完成时完成。（注意这里的**When** All和**Wait** All之间的区别-非常不同的方法！）

（此外，您可以使用 .NET 4.5[`Task.Run`](http://msdn.microsoft.com/en-gb/library/system.threading.tasks.task.run.aspx)代替`Task.Factory.StartNew`，只是为了方便。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:13:23.763

[Task.WaitAll](http://msdn.microsoft.com/en-us/library/dd270695.aspx)可用于跟踪并等待所有任务完成。StartNew 返回一个任务。跟踪数组中的所有返回值并将其传递给 WaitAll。

例如

```
 List<Task> tasks = new List<Task>();
        while (condition)
        {
            if (true)
            {                    
                Task temp = Task.Factory.StartNew(() => 0);
                tasks.Add(temp);
            }
            //...
        }

        Task.WaitAll(tasks.ToArray()); 
```

# javascript - Knockout.js 观察预先存在的 API 对象的成员

> ID：15031414
> 
> 赞同：1
> 
> 时间：2013-02-22T19:05:17.973
> 
> 标签：javascript, web-applications, mvvm, knockout.js, viewmodel

我已经编写了一个大数据 API，在我们的 Web 应用程序之外的几个位置使用，我想将敲除集成到应用程序中。似乎通过淘汰赛，您可以创建一个带有可观察对象的模型。我想不通的是一种在我们的 API 中观察预先存在的值的方法。这甚至可能吗，还是我需要一个中间模型来来回推送数据？这似乎非常不方便且效率低下。我错过了一些明显的东西吗？

在下面的代码中，我想观察 name 属性。我喜欢这里最好的方法的建议吗？

**编辑：**首选的方法是将观察者附加到已经存在的属性，而不是围绕敲除编写我的 API 或在 API 之上编写一个额外的包装器。这个 API 与一些非浏览器应用程序共享，我认为这消除了使用敲除编写整个 API 而不增加额外复杂性的可能性。我愿意考虑其他可以满足我需要的框架。

```
myAPI.user = {
    ...
    get name() {
        return myAPI.user.object.name;
    },
    set name(x) {
       myAPI.user.setProperty('name', x);
    }
    ...
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:07:54.400

您可以编写自定义`computed`.

```
var VM = function() {
   this.apiUserName = ko.computed({
       read: function() { return myAPI.user.object.name; },
       write: function(value) { return myAPI.user.setProperty('name', value); },
       owner: this
   });
} 
```

现在，如果`myAPI.user.object.name`发生变化并且您有一个事件，请致电`valueHasMutated`.

```
// inside your event
vm.apiUserName.valueHasMutated(); 
```

# java - Jenkins：如何在两台服务器上构建和部署单个作业

> ID：15031415
> 
> 赞同：6
> 
> 时间：2013-02-22T19:05:21.110
> 
> 标签：java, jenkins, jenkins-plugins, javabuilders

我在存储库中有代码。现在我想创建一个作业，它将从存储库构建代码并将其部署在两台服务器上。

现在我创建了两个具有完全相同配置的作业。唯一的变化是它需要部署的服务器。

是否可以通过单一工作做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:19:50.220

我可以建议使用这个 Maven 插件吗？您可以配置可以附加到正常 maven 作业的批处理任务（maven 目标或脚本）。

[https://wiki.jenkins-ci.org/display/JENKINS/Batch+Task+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Batch+Task+Plugin)

首先，您有一份 Jenkins 工作，可以正常构建您的工作。

然后，使用此插件，您可以在同一个 Jenkins 作业上配置两个额外的任务，例如“Deploy-server-1”和“Deploy-server-2”。

构建作业后，单击“任务”按钮，您可以轻松运行部署任务。

所以过程是：

```
-> build
     -> deploy server 1
     -> deploy server 2 
```

如果您查看我为 Batch Tash 插件添加的链接，他们有一个名为“发布”的任务。想象一下，你可以在它下面有更多的任务，做任何你想做的事情。

您可能需要 Jenkins 服务器上的管理员权限才能安装此插件，如果它还没有...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-04T22:45:19.643

[您可以使用节点和标签参数插件](https://wiki.jenkins-ci.org/display/JENKINS/NodeLabel+Parameter+Plugin)部署到多个服务器。

添加要使用 Jenkins 节点部署代码的服务器：*管理 Jenkins* >*管理节点*>*新节点*。

请务必为每个节点添加一个标签，以便您可以将它们组合在一起并部署到该组。

创建一个新的*自由式项目*并选中*This project is parameterized*选项。添加一个参数并选择*Label*，然后添加您刚刚为您的服务器（节点）创建的标签。

从这里开始，每个构建步骤都将在每个标记节点中复制自身，因此您可以使用 SCM 插件、GitHub、GitLab 等或直接从您的服务器获取存储库代码，这取决于您，代码将被部署在每个节点上。

请注意，如果您的代码需要编译，它将在远程服务器上编译。此外，每次将此构建部署到节点时，都会在您的构建队列中创建一个额外的构建。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-27T12:49:52.363

我解决了这个添加灵活发布插件的问题，并作为条件操作，使用 Run:'Always'。现在可以像在灵活发布条件操作中一样添加尽可能多的操作，所有这些操作都可以是“将 WAR/EAR 部署到容器”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-23T08:43:11.403

您可以使用[Copy Artifact Plugin](http://wiki.hudson-ci.org//display/HUDSON/Copy+Artifact+Plugin)，您可以在其中将构建工件从一个项目复制到另一个项目。因此，您只需在工作中构建您需要的内容，并且可以在其他工作中共享。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-17T09:23:21.513

我遇到了同样的问题，我将使用多个 curl 语句来解决它。看我的帖子[http://martin.podval.eu/2013/10/tomcat-7-remote-deployment.html](http://martin.podval.eu/2013/10/tomcat-7-remote-deployment.html) 嗯，jenkins 不允许我添加多个命令行执行任务，所以需要在里面使用三个 curl 语句一。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-17T11:44:07.797

我用 ant 任务解决了类似的问题 - 从 build.properties 文件中获取服务器 url 作为输入参数。就我而言，有几个环境可以支持相同的脚本，每个环境有 1-2 个服务器。

```
<target name="deploy.application">
  <groovy>
    if (properties['app.server'] &amp;&amp; properties["app.server"] != "") {
      ant.project.executeTarget('deploy.server1')
    }
    if (properties['app.server2'] &amp;&amp; properties["app.server2"] != "") {
      ant.project.executeTarget('deploy.server2')
    }
  </groovy>
</target> 
```

# ios - iOS 中的 XML 解析

> ID：15031416
> 
> 赞同：0
> 
> 时间：2013-02-22T19:05:21.780
> 
> 标签：ios, objective-c, xml-parsing, nsxmlparser

我正在尝试解析一个看起来像这样的 XML。

```
<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
    <WM_Login_MobileAppResponse xmlns="A.MobileAppService">
        <WM_Login_MobileAppResult>
            <Login xmlns="">
                <Customer_Type>5</Customer_Type>
                <Token>token</Token>
            </Login>
        </WM_Login_MobileAppResult>
    </WM_Login_MobileAppResponse>
</soap:Body> 
```

我试过 NSXMLParsesr 来解析文档。我正在使用的代码是：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{

if ([elementName isEqualToString:@"WM_Login_MobileAppResult"]) {
    _resultDict = [[NSMutableDictionary alloc] init];
}
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{

[_resultDict setObject:_currentString forKey:elementName];
if ([elementName isEqualToString:@"WM_Login_MobileAppResult"]) {
    [_array addObject:_resultDict];
    _resultDict = nil;
}
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
_currentString = [[NSString alloc] initWithString:string];
} 
```

这是我得到的结果：

```
(
    {
    "Customer_Type" = 4;
    Login = "token";
    Token = "token";
    "WM_Login_MobileAppResult" = "token";
}
) 
```

有人可以帮我得到正确的回应吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T11:48:07.630

我认为您应该将“WM_Login_MobileAppResult”更改为“登录”

# mysql - MySQL 内部连接帮助 - 想要包含不匹配的行

> ID：15031421
> 
> 赞同：0
> 
> 时间：2013-02-22T19:05:38.210
> 
> 标签：mysql, inner-join

我有几张表要加入查找。

（宠物）

```
| id | owner_id |  pet_name   | size |
--------------------------------------
| 1  |    1     |   Sparky    |  L   |
| 2  |    1     |    Spot     |  L   |
| 3  |    3     |   FooFoo    |  M   |
| 4  |    3     |    Barky    |  L   |
| 5  |    3     |    Jeb      |  S   | 
```

（所有者）

```
| id |  owner_name  |
--------------------
| 1  |    Jeff      |
| 2  |   (Kathy)    |
| 3  |    Tom       | 
```

当我像这样进行内部连接时：

```
SELECT 

OWNER.id, OWNER.owner_name, PET.pet_name, PET.size

FROM OWNER

INNER JOIN PET ON PET.owner_id = OWNER.id 
```

我得到这样的结果：

```
| id |  owner_name  |  pet_name   | size |
------------------------------------------
| 1  |     Jeff     |   Sparky    |  L   |
| 1  |     Jeff     |    Spot     |  L   |
| 3  |     Tom      |   FooFoo    |  M   |
| 3  |     Tom      |    Barky    |  L   |
| 3  |     Tom      |    Jeb      |  S   | 
```

**凯西**不在结果中。我明白为什么。但我希望凯西出现在结果中。我希望所有所有者都出现，无论他们是否有宠物 - 以及那些确实与此加入合并的所有者。

如何让所有 OWNER 表显示与 PET 表连接的所有所有者 - 无论他们是否在 PET 表中有宠物？

感谢大家 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T19:06:54.610

使用 LEFT JOIN 而不是 INNER

```
SELECT
  OWNER.id,
  OWNER.owner_name,
  PET.pet_name,
  PET.size
FROM OWNER
  LEFT JOIN PET
    ON PET.owner_id = OWNER.id 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T19:07:23.390

您需要使您的联接成为 LEFT OUTER JOIN 而不是 INNER JOIN。

```
SELECT OWNER.id, OWNER.owner_name, PET.pet_name, PET.size
  FROM OWNER
  LEFT OUTER JOIN PET 
    ON PET.owner_id = OWNER.id 
```

请记住，即使在连接的“右”侧没有匹配的记录，左**外部**也会返回连接“左”侧的所有记录，并为这些字段返回“空”值。如您所见，“内部”连接*只*返回左右两边都匹配的记录。

希望这能让你朝着正确的方向前进！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:07:24.273

使用外部联接

```
SELECT 

OWNER.id, OWNER.owner_name, PET.pet_name, PET.size

FROM OWNER

Outer JOIN PET ON PET.owner_id = OWNER.id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T19:08:55.787

您以错误的顺序识别表格。从您想要所有结果的那个开始，然后将另一个表连接到它。这样你就看到了主人和他们的狗，而不是狗和他们的主人。

```
FROM OWNER
LEFT JOIN PET
ON PET.owner_id = OWNER.id 
```

# javascript - Knockout JS - 如何检测触发模糊的元素？

> ID：15031426
> 
> 赞同：2
> 
> 时间：2013-02-22T19:05:55.997
> 
> 标签：javascript, knockout.js, jquery-events

我正在尝试在 Knockout 中更新条件模糊的输入值 - 基本上我希望元素在特定元素触发模糊时不触发值更新。我知道我可以查看`mousedown`文档上的每个元素并确定最后点击的内容，但似乎有点过分。任何人都可以想到的任何其他工作？

```
<input class="edit" data-bind="value: title, valueUpdate: 'afterkeydown', enterKey:     $root.stopEditing, selected: editing, event: { blur: $root.checkEditing }"> 
```

我试图实现这一目标的代码不适用于`document.activeElement`.

```
self.checkEditing = function( item, event ) {
        if (document.activeElement == $('a.cancel')) {

            // revert to previous title, aka cancel the editing
            item.title(item.previousTitle);
            item.editing( false );

        } else {
                            // this will update value with whatever was typed right before the blur
            item.editing( false );

            if ( !item.title().trim() ) {
                self.remove( item );
            }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T02:44:01.737

看起来要适当地捕获触发模糊的元素，必须使用 setTimeout。处理完模糊后， setTimeout 确保获得焦点的元素可用。

例如：

输入：

```
<input class="edit" data-bind="value: title, valueUpdate: 'afterkeydown', selected: editing, event: { blur: $root.checkEditing, click: $root.editItem }"> 
```

模糊后检查活动元素的方法：

```
 self.checkEditing = function( item, event ) {

        setTimeout(function(){

            console.log("The active element is: " + document.activeElement)

            // check if the user selected cancel
            if ($(document.activeElement).is("a.cancel")) {

                // revert to previous title
                item.title(item.previousTitle);
            }
        });

        item.editing( false );

        if ( !item.title().trim() ) {
            self.remove( item );
        }

    }; 
```

完整的小提琴演示在这里：http: [//jsfiddle.net/hUA9v/5/](http://jsfiddle.net/hUA9v/5/)

# python - Django csv 导出

> ID：15031435
> 
> 赞同：1
> 
> 时间：2013-02-22T19:06:31.043
> 
> 标签：python, django

我有以下 csv 导出功能来导出 csv 文件中的模型信息。但我试图弄清楚如何显示模型中函数的输出。因此 csv 导出函数显示模型中的所有字段（表中的字段），但不显示模型中函数的输出。

因此，如果我有以下内容：

```
def avg_tag(self, obj):
    bids = Bid.objects.active(user=obj.user.id)
    return bids.aggregate(average_price=Avg('list_price'))['average_price'] 
```

在模型中

它没有从该函数获得输出。

这是 csv 导出功能操作：

```
def export_select_fields_csv_action(description="Export selected objects",
                     fields=None, exclude=None, header=True):
def export_as_csv(modeladmin, request, queryset):
    """
    Generic csv export admin action.
    based on http://djangosnippets.org/snippets/1697/
    """
    opts = modeladmin.model._meta
    field_names = [field.name for field in opts.fields]
    labels = []
    if exclude:
        field_names = [v for v in field_names if v not in exclude]
    elif fields:
        field_names = [k for k, v in fields if k in field_names]
        labels = [v for k, v in fields if k in field_names]

    response = HttpResponse(mimetype='text/csv')
    response['Content-Disposition'] = ('attachment; filename=%s.csv'
        % unicode(opts).replace('.', '_'))

    writer = csv.writer(response)
    if header:
        if labels:
            writer.writerow(labels)
        else:
            writer.writerow(field_names)
    for obj in queryset:
        writer.writerow([unicode(getattr(obj, field)).encode('utf-8')
            for field in field_names])
    return response
export_as_csv.short_description = description
return export_as_csv 
```

如何更改上述函数，以便将模型中函数的输出输出到 csv 中？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:27:50.373

我想编辑你遍历查询集的地方，然后在最后添加它 -

```
for obj in queryset:
    writer.writerow([unicode(getattr(obj, field)).encode('utf-8')
        for field in field_names] + "," + obj.avg_tag()) 
```

你可以做类似的事情来添加你想要的标题 -

```
if header:
    if labels:
        writer.writerow(labels + "," + "Average Tag")
    else:
        writer.writerow(field_names + "," + "Average Tag")) 
```

更新

获取字段和方法会有点困难，因为您会发现模型上有很多您没有定义的方法（而且您可能不希望在您的 csv 中）。没有简单的方法可以区分您想要哪些和不想要哪些。

玩一下以下内容，看看里面有什么 -

```
import inspect
obj = modeladmin.model()
methods = [a for a in dir(modeladmin.model) if inspect.ismethod(getattr(obj, a))]
for method in methods:
    print str(method) 
```

我当然看不到这样做的优雅方式（或者实际上无论如何） - 我认为您将不得不实际指定每种方法。

# java - 重定向到同一个 jsp 时丢失的值（没有 Ajax）

> ID：15031436
> 
> 赞同：0
> 
> 时间：2013-02-22T19:06:34.527
> 
> 标签：java, jsp, servlets

我创建了一个注册页面 ( `r.jsp`)，我们可以在其中输入用户详细信息。单击提交按钮后，servlet 将被击中，它将执行业务逻辑。如果成功，它会重定向到，`x.jsp`否则如果失败，它会重定向到`r.jsp`.

我遇到的问题是当出现故障并重定向到`r.jsp`时，用户输入的数据会丢失。我想保留它。

下面是我在 servlet 中执行的代码：

```
if (appResponse.getMessageStatus().equalsIgnoreCase(AppConstants.SUCCESS)) {
    request.setAttribute("message", appResponse.getMessage());
    url = "/x.jsp";
} else {
    request.setAttribute("message", appResponse.getMessage());
    url = "/r.jsp";
}
RequestDispatcher dispatcher = request.getRequestDispatcher(url);
dispatcher.forward(request, response); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:15:27.283

只需在输入元素中重新显示请求参数映射中提交的值。请求参数映射在 JSP/EL 中可用`${param}`。

```
<input name="foo" value="${fn:escapeXml(param.foo)}" />
<input name="bar" value="${fn:escapeXml(param.bar)}" />
<input name="baz" value="${fn:escapeXml(param.baz)}" /> 
```

请注意，[JSTL](https://stackoverflow.com/tags/jstl/info) [`fn:escapeXml()`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/fn/escapeXml.fn.html)是防止 XSS 攻击所必需的。你可以省略它，但是你有一个[XSS 洞](http://en.wikipedia.org/wiki/Cross-site_scripting)。

```
<input name="foo" value="${param.foo}" />
<input name="bar" value="${param.bar}" />
<input name="baz" value="${param.baz}" /> 
```

### 也可以看看：

*   [将表单提交到 Servlet 后，如何在 JSP 中保留 HTML 表单字段值？](https://stackoverflow.com/questions/3937624/how-can-i-keep-jsp-form-fields-values-in-the-form-after-submitting-the-form/3937783#3937783)
*   [JSP/Servlet Web 应用程序中的 XSS 预防](https://stackoverflow.com/questions/2658922/xss-prevention-in-java/2658941#2658941)

* * *

**与具体问题无关**，您根本没有重定向。你只是转发。但是，您实际上应该在提交成功的情况下进行重定向，以避免在按 F5 时重复提交（根据[PRG 模式](http://en.wikipedia.org/wiki/Post/Redirect/Get)）。

### 也可以看看：

*   [RequestDispatcher.forward() 与 HttpServletResponse.sendRedirect()](https://stackoverflow.com/questions/2047122/requestdispatcher-interface-vs-sendredirect/2048640#2048640)

# regex - 需要比较正则表达式的帮助

> ID：15031440
> 
> 赞同：0
> 
> 时间：2013-02-22T19:06:42.997
> 
> 标签：regex, tcl

我有一个关于 tcl 正则表达式的小问题，

我的样本是这样的

“rollno”是一个变量，它是一个列表`10211 17311 15111 16111 10111`

`$rollno`一次取一个值。例如`rollno = 10211`

```
student_1_class_A_Teacher = 10211
student_1_class_B_Teacher = 17311
student_1_class_c_Teacher = 15111
student_2_class_A_Teacher = 16111
student_2_class_B_Teacher = 10111 
```

我需要一个正则表达式来替换正则表达式中的变量“$rollno”，并且应该返回classID = A

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:53:33.283

所以，如果你有值 '15111' 和一个输入文件：

```
student_1_class_A_Teacher = 10211
student_1_class_B_Teacher = 17311
student_1_class_c_Teacher = 15111
student_2_class_A_Teacher = 16111
student_2_class_B_Teacher = 10111 
```

你想返回'c'吗？

你可以尝试这样的事情：

```
class_\w(?=_Teacher = 15111) 
```

这将返回“class_c”，然后您可以提取最后一个字符以获得“c”。

# c# - 等到异步获得价值 Windows Phone 7

> ID：15031447
> 
> 赞同：0
> 
> 时间：2013-02-22T19:06:56.647
> 
> 标签：c#, windows-phone-7.1, wcf-data-services

我在 WP7 中的日志记录操作有问题。当我单击 LogInButton 时，它没有在代理中提示 = e.Result 的值。我该怎么做才能等到异步调用结束？我虽然关于线程。睡眠，但我想它在 WP 7 中无法做到。

```
namespace WP7App
{
 public partial class MainPage : PhoneApplicationPage
{
    bool prompt;
    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }
    // login operation
    private void Log(string username, string passwd)
    {
        Service1Client proxy = new Service1Client();
        proxy.LogInCompleted += new
        EventHandler<LogInCompletedEventArgs>(proxy_LogInCompleted);
        proxy.LogInAsync(username, passwd);

    }
    public void proxy_LogInCompleted(object sender, LogInCompletedEventArgs e)
    {
        prompt = e.Result;              
    }
    //button action
    void LogInButton_Click(object sender, RoutedEventArgs e)
    {
        if (LoginBox.Text == null) { MessageBox.Show("please fill login box"); }
        if (PasswdBox.Password == null) { MessageBox.Show("enter your password"); }
        string login = LoginBox.Text;
        string passwd = PasswdBox.Password;            
        Log(login, passwd);
        if (prompt == true)
        {
            NavigationService.Navigate(new Uri("/Pages/MainLogged.xaml", UriKind.Relative));
        }
        else
        {
            MessageBox.Show("logging failed");
        }
    }                            
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:09:23.377

您唯一应该做的就是提供用户信息，一些操作仍在运行。

如果你真的需要（应用程序需要操作结果），它可以以某种方式完成，阻止用户进行其他操作（比如一个全屏面板，应该在开始异步操作之前显示并在完成时关闭）。

# c# - 使用 Pinvoke 启用显示设备并设置分辨率

> ID：15031452
> 
> 赞同：2
> 
> 时间：2013-02-22T19:07:06.730
> 
> 标签：c#, .net, pinvoke, monitor

我能够成功更改通过 EnumDisplayDevices 获得的设备的分辨率，这些设备处于活动状态，但哪些设备未处于活动状态，我无法设置它们的分辨率。有没有办法以编程方式激活/启用禁用的显示设备，就像我可以通过单击检测按钮（[图像](http://i.stack.imgur.com/L7pSK.png)）在 GUI 中执行此操作一样。请注意，我使用 C# .Net 来实现这一点，并使用 ChangeDisplaySettingsEx 更改屏幕分辨率。

# python - Python中的类变量检索

> ID：15031453
> 
> 赞同：0
> 
> 时间：2013-02-22T19:07:08.043
> 
> 标签：python, class, textbox, tkinter, ttk

这是我一直在为我已经工作的脚本编写的 GUI。我在这里苦苦挣扎的是检索文本框中的信息。

根据定义`generate`，我可以弹出一个名称，`listx`但我无法`entry`从类的任何实例中获取局部变量`new_title_box`。

```
from Tkinter import *
import ttk
boxvar=""
folder=""
listx=[]
count = 1
myrow = 1

class new_title_box:
    def __init__(self,name):
        global myrow, count, listx
        self.entry = StringVar()
        self.name = name
        self.name = ttk.Entry(mainframe,width=45,textvariable=self.entry)
        self.name.grid(column=1,row=myrow+1,sticky=(N,W))
        listx.append(name)
        print(listx) ## For debugging to insure that it is working correctly, if it gives output it, this part works
        myrow = myrow + 1
        count=count+1

def make_new(*args):
    new_title_box('box'+str(count))

def generate(*args):
    global listx, boxvar
    while len(listx) > 0:
        boxvar=listx.pop(0)
        print(boxvar) ## For debugging to insure that it is working correctly, if it gives output it, this part works
        folder = boxvar.entry.get() ## Not working here
        print(folder) ## For debugging to insure that it is working correctly, if it gives output it, this part works

root = Tk()
root.title("File Maker")

mainframe = ttk.Frame(root, padding = "50 50 50 50")
mainframe.grid(column = 0,row = 0,sticky = (N, W, E, S))
mainframe.columnconfigure(0,weight=1)
mainframe.columnconfigure(0,weight=1)

add_entry = ttk.Button(mainframe,width=20, text = "add entry", command=make_new)
add_entry.grid(column=2,row=2,sticky=(N,W))
add_entry = ttk.Button(mainframe,width=20, text = "make files", command=generate)
add_entry.grid(column=2,row=3,sticky=(N,W))

root.mainloop() 
```

这是我得到的回溯：

```
Exception in Tkinter callback 
Traceback (most recent call last): 
  File "C:\Python33\lib\tkinter_init_.py", line 1442, in call 
    return self.func(*args) 
  File "C:\python\SampAqTkinter.py", line 28, in generate 
    folder = boxvar.entry ## Not working here 
AttributeError: 'str' object has no attribute 'entry' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:57:45.533

要解决您描述的问题，需要更改*两件事：*

1.  在方法`new_title_box.__init__()`改变：
      `listx.append(name)`
      `listx.append(self.name)`

2.  在`generate()`函数中，将：更改
      `folder = boxvar.entry.get()`为
      `folder = boxvar.get()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:18:24.070

您正在将一个字符串附加到 listx，使用`self.name`而不是本地字符串`name`

# sql - SQL重复记录中的关系查询

> ID：15031455
> 
> 赞同：0
> 
> 时间：2013-02-22T19:07:12.987
> 
> 标签：sql, vb6

我试图在 SQL 中链接两个表，但它没有做我想要的。我有一个 table1 有两个字段 id、Total 和其他 Table2 包含 20 个字段，我只想提取 5 个 ID、名称、地址、城市、省。我的查询如下：

```
SELECT Table1.id, Table2.name, Table2.address, Table2.city, Table2.province, Table1.Total
  FROM Table1 INNER JOIN Table2 ON
 WHERE Table2.id Table1.Total Table1.id => = "& CLng (number1.Text ) &
  "AND Table1.Total <=" & CLng (number2.Text) &
"ORDER BY ASC Table2.name" 
```

目的是关联这两个表，但问题是生成的查询具有重复的结果。我认为原因是，例如，我有一些 id 相同但名称不同的数据，它试图将不同的数据放在不同的行中，尽管它们具有相同的 id。

我花了很多时间寻找解决方案，但找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:12:49.333

您没有`ON`正确指定您的条款。尝试删除该词`WHERE`，以便您实际上将连接限制在相关行，而不是进行完全连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:11:19.957

使用左外连接代替 INNNER JOIN

检查sql。可能是您期望的如下。

```
SELECT Table1.id, Table2.name, Table2.address, Table2.city, Table2.province, Table1.Total 
FROM    Table1 
LEFT OUTER JOIN Table2 
        ON Table2.id =Table1.id 

WHERE Table1.Total = '' AND Table1.Total <= ''
ORDER   BY  Table2.name ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T00:53:48.413

您可以使用“DISTINCT”语句仅返回不同的（不同的）值。重复的行只返回一次。

您的 sql 查询语法错误。也许它会因为那样返回重复的行。但如果修复后仍然返回重复行，则 Table2 必须有多个具有相同 id 的行。在这种情况下，您可以使用 DISTINCT 语句。

正确的 SQL 查询是：

```
SELECT DISTINCT Table1.id, Table2.name, Table2.address, Table2.city, Table2.province, Table1.Total
FROM Table1 INNER JOIN Table2 ON  Table1.id = Table2.id 
     AND Table1.total BETWEEN minValue AND maxValue 
ORDER BY ASC Table2.name 
```

（minValue 和 maxValue 是数字）

在 VB 语法中

```
" SELECT Table1.id, Table2.name, Table2.address, Table2.city, Table2.province, Table1.Total " _
" FROM Table1 INNER JOIN Table2 ON  Table1.id = Table2.id " & _
"      AND Table1.total BETWEEN " & CLng (number1.Text ) &  "AND " & CLng (number2.Text) & _ 
"ORDER BY ASC Table2.name " 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T19:22:03.030

尝试这个

```
SELECT Table1.id, Table2.name, Table2.address, Table2.city, Table2.province, Table1.Total
FROM Table1 INNER JOIN Table2 ON
Table2.id = Table1.id  WHERE Table1.Total >=  CLng(number1.Text) AND Table1.Total <= CLng(number2.Text)  
GROUP BY Table2.name 
ORDER BY ASC Table2.name" 
```

# debugging - ZF2调试自定义视图助手

> ID：15031473
> 
> 赞同：0
> 
> 时间：2013-02-22T19:08:10.047
> 
> 标签：debugging, zend-framework2, view-helpers

我使用的 Zend Framework 2 自定义视图助手：

```
$uri = $this->view->vars()->mainMenu->findById('h'); 
```

mainMenu 属性是一个 Zend\Navigation\Navigation 对象。

结果是我的视图脚本的渲染在执行视图助手时停止，没有任何错误消息。因此，出于所有实际目的：死亡的白屏。

在这个视图助手行中：

```
$uri = $this->view->vars()->mainMenu; 
```

确实有效，所以显然问题出在 findById() 方法上。

但是如果我直接在我的视图脚本中使用第一行，我会得到预期的结果，一个包含我主页 url 的字符串：'/'。

我的问题是：

我的视图助手中的 findById() 方法有什么问题？

和/或（更重要的是）：

如何在视图助手环境中调试这个（以及其他，这是一个反复出现的问题）问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:32:23.537

问题是那`findById()`不存在。检查扩展[`Zend\Navigation\AbstractActionContainer`](https://github.com/zendframework/zf2/blob/master/library/Zend/Navigation/AbstractContainer.php)的。[`Zend\Navigation\Navigation`](https://github.com/zendframework/zf2/blob/master/library/Zend/Navigation/Navigation.php)

正确的方法（我猜）是[`findBy()`](https://github.com/zendframework/zf2/blob/master/library/Zend/Navigation/AbstractContainer.php#L321)，[`findAllBy()`](https://github.com/zendframework/zf2/blob/master/library/Zend/Navigation/AbstractContainer.php#L293)或[`findOneBy()`](https://github.com/zendframework/zf2/blob/master/library/Zend/Navigation/AbstractContainer.php#L272)

```
$this->view->vars()->mainMenu->findOneBy('id', 'my-id-to-find'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T21:31:51.910

通过首先解决我的问题的第二部分，通过安装 XDEBUG（在 Zend Server CE 上）找到了问题，最终给出了一些错误输出（在非对象上调用方法）。

在我专注于布局视图脚本的地方，相同的视图助手也存在于我的（最终）视图脚本中，其中导航对象在我使用的参考下不可用。

在视图和布局脚本中起作用的是：

```
$uri = $this->view->layout()->getVariables()->mainNav->findById('h'); 
```

我在这里找到了我的解决方案：

[http://akrabat.com/zend-framework-2/access-view-variables-in-another-view-model/](http://akrabat.com/zend-framework-2/access-view-variables-in-another-view-model/)

# objective-c - CGRect 在排列 UI 元素之前没有完全形成

> ID：15031475
> 
> 赞同：0
> 
> 时间：2013-02-22T19:08:12.843
> 
> 标签：objective-c, cgrect

我有以下代码

```
- (void) setTargetGoalFrameToLeftOfWindow: (UIView*) goalView orientation: (UIInterfaceOrientation) orientation {
    [goalView setTransform:CGAffineTransformMakeRotation(-M_PI_2)];

    CGRect goalFrame = goalView.frame;
    CGRect windowFrame = [self getWindowFrame];

    CGFloat topMargin;
    if (UIInterfaceOrientationIsLandscape(orientation)) {
        topMargin = (windowFrame.size.width - goalFrame.size.height) / 2.0;
    } else {
        topMargin = (windowFrame.size.height - goalFrame.size.height) / 2.0;
    }

    goalView.frame = CGRectMake(GOAL_MARGIN, topMargin, goalFrame.size.width,     goalFrame.size.height);
} 
```

我正在使用 CGRect 创建框架，我正在使用它来显示我的 UI 元素，如标签、按钮等。我正在根据窗口大小计算位置，以便它们在不同方向处于适当的位置。当我的应用程序运行时，我单击主页按钮。当我再次打开应用程序时，我的 UI 元素被弄乱了。他们不在适当的位置。每次更改方向并打开应用程序时，都会调用我上面提到的方法。所以，当我重新打开应用程序时，它会被调用。但问题是，即使在框架完全形成之前，它也会获取该特定点的宽度和高度并计算我的 UI 元素的位置。这导致混乱的用户界面。有没有什么办法可以限制它只有在框架完全形成后才采用宽度和高度？谢谢！

# ios - 访问 Flurry 用户 ID

> ID：15031478
> 
> 赞同：2
> 
> 时间：2013-02-22T19:08:31.347
> 
> 标签：ios, flurry

我知道 Flurry 中有一个 setUserID 方法，但是如何获取 Flurry 默认为设备设置的用户 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T08:58:09.657

Flurry 使用适用于 iOS 的 SHA1 Mac 和适用于 Android 应用的 Android ID 作为设备标识符。这些仅用于内部识别目的，不会向开发人员披露。您需要使用 setUserID 方法为您的应用程序中的用户分配唯一的用户 ID。请务必不要使用此方法传递有关用户的任何私人或机密信息。

（全面披露：我在 Flurry 工作）

# r - 如何根据另一个二进制文件中的类计算一个二进制文件中变量的平均值？

> ID：15031482
> 
> 赞同：2
> 
> 时间：2013-02-22T19:08:42.330
> 
> 标签：r, binary, raster

我有两个具有相同维度的二进制文件（栅格）：第一个表示 2 个数据之间的相关性，第二个表示具有 10 个类的土地覆盖图。我想根据土地覆盖类取我的相关性的平均值。所以最后我们将得到一张与土地覆盖图相同的地图，但具有相关性的平均值而不是类数。

这是两个文件：

```
 1- to read the first file correlation map:

   conne <- file("C:\\corr.bin","rb")
  corr<- readBin(conne, numeric(), size=4,  n=1440*720, signed=TRUE)
  y<-t(matrix((data=corr), ncol=720, nrow=1440))
    r = raster(y) 
```

2-读取第二个文件土地覆盖图：

```
 conne <- file("C:\\land cover.bin","rb")
  over<- readBin(conne, integer(), size=1,  n=1440*720, signed=F)
  y1<-t(matrix((data=over), ncol=720, nrow=1440))
  r1 = raster(y1) 
```

3-写结果：

```
 to.write = file(paste("/orcomplete.bin",sep=""),"wb")
     writeBin(as.double(results), to.write, size = 4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:22:26.790

这不就是这样的吗：

```
 tapply(y, y1, mean, na.rm=TRUE) 
```

如果您希望类均值与输入矩阵的排列相同，请执行以下操作：

```
outmat <- matrix( ave( y, y1, FUN=mean, na.rm=TRUE), nrow(y), ncol(y) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T20:57:06.293

如果土地覆盖栅格具有您想要保留的地理参考特征（例如，投影信息），您可以使用栅格工具箱中的区域工具：

```
corr_raster <- raster('correlation raster filename')
land_raster <- raster('landcover raster filename')
zv <- zonal(corr_raster , land_raster, fun=mean) 
```

然后您所要做的就是将结果表中的平均值分配给土地覆盖像素。raster 包有很多替代方法可以做到这一点（例如重新分类函数）。

# ios - 使用 Apple ID 登录

> ID：15031488
> 
> 赞同：2
> 
> 时间：2013-02-22T19:09:10.343
> 
> 标签：ios, iphone, authentication

我正在开发一个应用程序，我希望用户使用他/她的 Apple ID 登录。

这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-06-18T10:58:10.520

Apple在其全球开发者大会 WWDC 2019 上推出了[Sign In with Apple 。](https://developer.apple.com/sign-in-with-apple/)

苹果是这样描述它的：

> Sign In with Apple 让用户可以使用他们的 Apple ID 轻松登录您的 app 和网站。他们无需填写表格、验证电子邮件地址和选择新密码，而是可以使用 Sign In with Apple 来设置帐户并立即开始使用您的应用程序。所有帐户都受到双重身份验证的保护，以实现卓越的安全性，Apple 不会跟踪用户在您的应用程序或网站中的活动。

使用 Apple 登录需要 iOS 13 或更高版本、iPadOS 13 或更高版本、watchOS 6 或更高版本、macOS Catalina 10.15 或更高版本以及 tvOS 13 或更高版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:12:56.300

不，有一个标准的 API。您*可以*使用 a`UIWebView`让用户登录到 apple.com 上某处的现有登录表单，然后检查随后的成功或失败 URL，但这可能既脆弱又被 App Store 批准流程拒绝。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T19:14:36.470

目前是不可能的。最好的办法是在[https://bugreport.apple.com/提交功能请求](https://bugreport.apple.com/)

如果您想在不设置自己的注册系统的情况下对用户进行身份验证，您可以采用 Facebook Connect。很多人显然已经在使用 Facebook，而且你根本不需要维护注册/忘记密码/安全性的东西。

如果你不喜欢 Facebook，谷歌也提供了类似的系统。（见[https://developers.google.com/accounts/docs/MobileApps](https://developers.google.com/accounts/docs/MobileApps)）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T20:52:08.660

Apple 可能永远不会允许您使用用户的 Apple ID 登录。

您或许可以允许您的用户登录 Game Center。用户的 Game Center 帐户与 AppleID 绑定，因此您的应用可以通过这种方式识别用户。但这是假设您实际上是在构建游戏。

苹果的游戏中心文档在这里：[https ://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/15_GameCenter/GameCenter.html#//apple_ref/doc/uid/TP40011225-CH7-SW1](https://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/15_GameCenter/GameCenter.html#//apple_ref/doc/uid/TP40011225-CH7-SW1)

[App Store Review 指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)禁止在您的应用程序中使用来自 Apple 服务的任何信息，这就是为什么他们会允许您使用 Apple ID 登录的原因令人怀疑：

```
12\. Scraping and aggregation

12.1
Applications that scrape any information from Apple sites (for example from apple.com, iTunes Store, App Store, iTunes Connect, Apple Developer Programs, etc) or create rankings using content from Apple sites and services will be rejected 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T21:28:15.287

如果您想要实现的是用户不同 iOS 设备之间的无缝用户体验，而无需用户为您的服务选择用户名和密码，您可以使用 iCloud。但这当然取决于您要构建的内容。Apple 提供了一些介绍不同 iCloud API 的视频：[https ://developer.apple.com/icloud/documentation/](https://developer.apple.com/icloud/documentation/)

# php - PHP 字符串和刻度线

> ID：15031491
> 
> 赞同：0
> 
> 时间：2013-02-22T19:09:22.447
> 
> 标签：php, html, string, concatenation

尝试[将此](http://dev.jtsage.com/jQM-DateBox2/)查询移动日期选择器添加到我的页面。我正在使用 PHP 来创建每个页面的表单，所以我做了很多字符串连接。此日期选择器的格式如下所示：

```
<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode": "calbox"}'> 
```

所以我有一条看起来像这样的线：

```
$form .= '<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode": "calbox"}'>'; 
```

大括号周围的刻度线引起了问题。我尝试用额外的刻度来逃避它们，例如：

```
data-options='''{"mode".....}''' 
```

并通过以下方式伪造它：

```
data-options=&#39;{"mode"....}&#39; 
```

不能让它工作，非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:11:06.353

用 \ 转义引号，如下所示：

```
$form .= '<input name="mydate" id="mydate" type="date" data-role="datebox" data-options=\'{"mode": "calbox"}\'>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:12:25.107

用这个 ：

```
$form .= '<input name="mydate" id="mydate" type="date" data-role="datebox" data-options=\'{"mode": "calbox"}\'>'; 
```

这将正常工作。

# time - x 分钟后终止 vbscript

> ID：15031502
> 
> 赞同：3
> 
> 时间：2013-02-22T19:10:01.623
> 
> 标签：time, vbscript

我正在使用 vbscript 编写脚本，我希望它在 x 分钟后自行终止。

我在想一些事情，比如抓住脚本开始的时间，然后让整个事情循环起来，直到时间是开始时间后的 x 分钟，但我需要它继续在后台检查，而不是等到一个循环完成。

我想要一条消息或通知用户他们花了太长时间的东西，我可以自己做。

有什么方法可以在后台跟踪时间，或者确定它会是一个漫长的过程吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-23T21:01:52.993

[按照Ekkehard.Horner](https://stackoverflow.com/a/15031657/1630171)`//T:xx`的建议重新启动脚本可能是您最好的选择。另一种略有不同的方法可能如下所示：

```
Const Timeout = 4 'minutes

timedOut = False

If WScript.Arguments.Named.Exists("relaunch") Then
  'your code here
Else
  limit = DateAdd("n", Timeout, Now)
  cmd = "wscript.exe """ & WScript.ScriptFullName & """ /relaunch"
  Set p = CreateObject("WScript.Shell").Exec(cmd)
  Do While p.Status = 0
    If Now < limit Then
      WScript.Sleep 100
    Else
      On Error Resume Next  'to ignore "invalid window handle" errors
      p.Terminate
      On Error Goto 0
      timedOut = True
    End If
  Loop
End If

If timedOut Then WScript.Echo "Script timed out." 
```

您仍然会重新启动脚本，但在这种情况下，您的脚本会杀死子进程，而不是脚本解释器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-16T13:30:08.640

这是另一个简短而优雅的解决方案，它允许终止脚本和异步运行的外部可执行文件，通过`WScript.Timeout`

```
Option Explicit

Dim oSmallWrapperWshExec

WScript.Timeout = 7
Set oSmallWrapperWshExec = New cSmallWrapperWshExec
' Some code here
MsgBox "Waiting timeout" & vbCrLf & vbCrLf & "You may close notepad manually and/or press OK to finish script immediately"

Class cSmallWrapperWshExec

    Private oWshShell
    Private oWshExec

    Private Sub Class_Initialize()

        Set oWshShell = CreateObject("WSCript.Shell")
        With oWshShell
            Set oWshExec = .Exec("notepad")
            .PopUp "Launched executable", 2, , 64
        End With

    End Sub

    Private Sub Class_Terminate()

        On Error Resume Next
        With oWshShell
            If oWshExec.Status <> 0 Then
                .PopUp "Executable has been already terminated", 2, , 64
            Else
                oWshExec.Terminate
                .PopUp "Terminated executable", 2, , 64
            End If
        End With

    End Sub

End Class 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T03:26:34.527

我很欣赏这里的所有答案，但它们比我想要的要复杂得多。

我很惊讶地发现有一种方法可以在`WScript`.

```
WScript.Timeout = x_seconds 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T19:19:11.610

```
cscript
Usage: CScript scriptname.extension [option...] [arguments...]

Options:
 //B         Batch mode: Suppresses script errors and prompts from displaying
 //D         Enable Active Debugging
 //E:engine  Use engine for executing script
 //H:CScript Changes the default script host to CScript.exe
 //H:WScript Changes the default script host to WScript.exe (default)
 //I         Interactive mode (default, opposite of //B)
 //Job:xxxx  Execute a WSF job
 //Logo      Display logo (default)
 //Nologo    Prevent logo display: No banner will be shown at execution time
 //S         Save current command line options for this user
 **//T:nn      Time out in seconds:  Maximum time a script is permitted to run**
 //X         Execute script in debugger
 //U         Use Unicode for redirected I/O from the console 
```

**更新：**

为了帮助那些对 cscript.exe 的使用信息（这怎么可能是错的？）的简单（并且直截了当）引用的人通过@PanayotKarabakalov 的烟幕看到光明：

索赔：

> 使用 //T 开关不保证实时精度
> 
> 执行所有 5 个 Echo 命令，即使它们之间的睡眠时间为 1.5 秒且 //T 设置为 4

证据：

该脚本通过以下方式重新启动：

```
CreateObject("WScript.Shell").Run "WScript " & _
    Chr(34) & WScript.ScriptFullName & _
    Chr(34) & " /T:4", 0, False 
```

它不**包含**特定于主机的`//T`（相对于特定于脚本的`/T`）开关。

（反）论点：

无论您以何种方式启动脚本的第一个实例（`//T`或否`//T`），第二个/重新启动的实例永远不会超时，并且总是会运行到最后。

如果您仍有疑问，请将 P. 脚本中的调用更改为

```
 CreateObject("WScript.Shell").Run "WScript //T:4 " & _ 
```

并尝试一下。

# 3d-secure - Paymill：至少有一家银行的 3D 安全漏洞？

> ID：15031505
> 
> 赞同：2
> 
> 时间：2013-02-22T19:10:11.813
> 
> 标签：3d-secure, paymill

我使用 Paymill API 使用 3D 安全付款：

```
paymill.createToken(params, paymillResponseHandler, tdsInit, tdsCleanup); 
```

文档中的这一部分完全不起作用：

```
var tdsInit = function(iframeUrl, cancelFn) {
  var body   = document.body || document.getElementsByTagName('body')[0];
  var iframe = document.createElement('iframe');

  iframe.id               = 'tdsIframe';
  iframe.src              = iframeUrl;
  iframe.width            = 600;
  iframe.height           = 500;
  iframe.style.zIndex     = 0xffffffff;
  iframe.style.background = '#fff';
  iframe.style.position   = 'absolute';

  body.insertBefore(iframe, body.firstChild);
}; 
```

所以我这样做：

```
function tdsInit(iframeUrl, cancelFn) {
    var body   = document.body;
    var div3D  = document.createElement("div");
    div3D.id = "div3Dsecure";
    body.insertBefore(div3D, body.firstChild);
    var pareq = decodeURIComponent(iframeUrl.params.PaReq.replace(/\+/g,  " "));
    var termurl = decodeURIComponent(iframeUrl.params.TermUrl.replace(/\+/g,  " "));
    div3D.innerHTML='.$dot.'<form id="3Dsecureform" action="'.$dot.'+iframeUrl.url+'.$dot.'" method="POST"><textarea name="PaReq" style="display:none">'.$dot.'+pareq+'.$dot.'</textarea><input type="hidden" name="TermUrl" value='.$dot.'+termurl+'.$dot.'><input type="hidden" name="MD" value='.$dot.'+iframeUrl.params.MD+'.$dot.'></form>'.$dot.';
    var iframe = document.createElement("iframe");
    iframe.id               = "tdsIframe";
    iframe.src              = "";
    iframe.width            = 600;
    iframe.height           = 500;
    iframe.style.zIndex     = 0xffffffff;
    iframe.style.background = "#fff";
    iframe.style.position   = "absolute";
    iframe.scrolling        = "no";
    body.insertBefore(iframe, body.firstChild);
    document.forms[0].target = "tdsIframe";
    document.forms[0].submit();
}; 
```

付款正常，但是当客户使用 Sberbank 的卡付款时，我们遇到了问题：iframe 而不是显示来自 ACS 的 3D 安全页面，只对成功验证此付款做出响应。

```
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Return to Merchant's site</title>
<SCRIPT>
            function onLoadHandler() {
                document["PAResForm"].submit();
            }
        </SCRIPT>
</head>
<body onLoad="onLoadHandler();">
<BR>
<BR>Processing...
        <FORM NAME="PAResForm" METHOD="post" ACTION="https://ctpe.net/payment/threedsecure?ndcid=8BE948ADB647AF64A9C2640B81DC4B82.lon-vm-fe05&jsessionid=.lon-vm-ps02">
<INPUT NAME="PaRes" TYPE="hidden" VALUE="eJxVkLFuAjEMhl/Fyt7kOAnRwRcGKBtT6YyinI+LlMSVExCP30OEVpW82L/9/bZxe08RbiQlcB7USncKKHseQ74M6ut0eHtXW4unWYj2n+SvQhaPVIq7EIRxUPcprc+bc69XXdd3G2XxQ4TFYmPaBal7NK8U6SHveCS7RvOXPOuNbA8syVXgCTgTsEBiIaBIiXItEJbINxfDCM57lse2UBnqTFC+yYcpeFcXO90sXtyny56qC9EeSfzsctVXia2vKWjaEeZ30Px7wQ9uC2z4"><INPUT NAME="MD" TYPE="hidden" VALUE="8a8394823cd8c78d013cf365e77a3ac5">
</FORM>
</body>
</html> 
```

首先，我认为 Sberbank 存在一些错误，但客户使用另一个 PSP 进行了另一笔付款，并拥有来自 Sberbank 的 3D 安全窗口：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<SCRIPT LANGUAGE="JavaScript" SRC="/sberbank/common/global.js"></SCRIPT>
<LINK href="/sberbank/common/va_style.css" rel=STYLESHEET type="text/css">
<title>Verified by VISA - Пароль безопасности</title>
<SCRIPT type="text/javascript">
strBeforeUnload = "Ваша транзакция не завершена!\
Для продолжения, нажмите кнопку 'Отмена' и введите пароль на странице проверки безопасности.";
<!-- page for OTP_SMS -->
var PAMs = new Array();
PAMs[0] = new Array("0","None"); 
```

我不明白我在哪里做错了。也许有人可以帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-21T11:29:12.663

抱歉，文档中似乎有一个过时的代码示例。请查看以下 tdsInit() 回调示例（这是 Bridge.js 默认实现的简化版本，以说明该过程）：

```
var tdsInit = function tdsInit(redirect, cancelCallback) {
    var url = redirect.url, params = redirect.params;
    var body = document.body || document.getElementsByTagName('body')[0];

    var iframe = document.createElement('iframe');
    body.insertBefore(iframe, body.firstChild);

    var iframeDoc = iframe.contentWindow || iframe.contentDocument;
    if (iframeDoc.document) iframeDoc = iframeDoc.document;

    var form = iframeDoc.createElement('form');
    form.method = 'post';
    form.action = url;

    for (var k in params) {
        var input = iframeDoc.createElement('input');
        input.type = 'hidden';
        input.name = k;
        input.value = decodeURIComponent(params[k]);
        form.appendChild(input);
    }

    if (iframeDoc.body) iframeDoc.body.appendChild(form);
    else iframeDoc.appendChild(form);

    form.submit();
}; 
```

但是请注意，tdsInit 和 tdsEnd 都是可选参数。如果你想自定义 iframe 的外观和感觉，你只需要这些。

# javascript - .hide() 隐藏在容器 div 点击而不是仅仅处理？

> ID：15031508
> 
> 赞同：0
> 
> 时间：2013-02-22T19:10:16.570
> 
> 标签：javascript, jquery

```
$(function () {
    $("#test").draggable({
        handle: "#testheader",
        containment: 'window'
    });
});

$('p#exit').click(function () {
    $('#test').hide();
});
});

<div id="test"><div id="testheader"><p id="exit">Exit</p></div></div> 
```

当我单击 p 元素时，它不会退出，而是在我单击容器 div 时退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:27:43.227

试这个...

```
$(function () {
    $("#test").draggable({
        handle: "#testheader",
        containment: 'window'
    });

    $('#exit').click(function () {
        $('#test').hide();
    });
}); 
```

抹去`});`过去`$('#exit')`

看看这个[jSfiddle 例子](http://jsfiddle.net/3SZNh/)

# doctrine-orm - 如何验证字符串长度？

> ID：15031509
> 
> 赞同：1
> 
> 时间：2013-02-22T19:10:16.650
> 
> 标签：doctrine-orm

我正在尝试在 Doctrine 中实现验证。Doctrine 默认插入任何大小的字符串。如果它太大，那么它将前 N 个字符插入到数据库中。

如果最大列长度为 7，则会发生这种情况：
插入：'www.google.com'
结果：'www.goo'

我如何让 Doctrine 异常返回？我不想在我的验证器中硬编码最大长度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T22:35:07.443

Doctrine 不会验证字符串长度，请参阅[http://docs.doctrine-project.org/en/latest/reference/annotations-reference.html#column](http://docs.doctrine-project.org/en/latest/reference/annotations-reference.html#column)。在将所有输入值传递给 Doctrine 实体之前，您应该使用验证器自己验证所有输入值。在验证器中定义最大长度有什么问题？

# jquery - Jquery 帮助在 textarea 上强制执行 maxlength？

> ID：15031513
> 
> 赞同：12
> 
> 时间：2013-02-22T19:10:39.687
> 
> 标签：jquery, validation, textarea

当您添加属性“maxlength”时，这是 Jquery 为 textarea 强制执行 maxlength。IE 不支持 Maxlength。如何调整我的代码以处理页面上的多个文本区域？目前，如果我将文本添加到任何文本区域，它们都会以相同的值倒计时。

查询：

```
$(document).ready( function () {

maxLength = $("textarea").attr("maxlength");
    $("textarea").after("<div><span id='remainingLengthTempId'>" 
              + maxLength + "</span> remaining</div>");

    $("textarea").bind("keyup change", function(){checkMaxLength(this.id,  maxLength); } )

});

function checkMaxLength(textareaID, maxLength){

    currentLengthInTextarea = $("#"+textareaID).val().length;
    $(remainingLengthTempId).text(parseInt(maxLength) - parseInt(currentLengthInTextarea));

    if (currentLengthInTextarea > (maxLength)) { 

        // Trim the field current length over the maxlength.
        $("textarea").val($("textarea").val().slice(0, maxLength));
        $(remainingLengthTempId).text(0);

    }
} 
```

html:

```
Skills:
<textarea id="1" maxlength="200" rows="10" cols="60" ></textarea>

Postions:
<textarea id="2" maxlength="200" rows="10" cols="60" ></textarea>

Comments
<textarea id="3" maxlength="100" rows="10" cols="60" ></textarea> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-09-13T15:37:35.623

这是最好的解决方案！将其放入 HTML 代码中的脚本标记中

```
$("textarea[maxlength]").on("propertychange input", function() {
    if (this.value.length > this.maxlength) {
        this.value = this.value.substring(0, this.maxlength);
    }  
}); 
```

现在`<textarea maxlength="{your limit}"></textarea>`用于`{your limit}`字符限制。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-25T20:52:47.123

解决方案在这里：

[http://web.enavu.com/daily-tip/maxlength-for-textarea-with-jquery/](http://web.enavu.com/daily-tip/maxlength-for-textarea-with-jquery/)

```
$(document).ready(function() {

    $('textarea[maxlength]').keyup(function(){
        //get the limit from maxlength attribute
        var limit = parseInt($(this).attr('maxlength'));
        //get the current text inside the textarea
        var text = $(this).val();
        //count the number of characters in the text
        var chars = text.length;

        //check if there are more characters then allowed
        if(chars > limit){
            //and if there are use substr to get the text before the limit
            var new_text = text.substr(0, limit);

            //and change the current text with the new text
            $(this).val(new_text);
        }
    });

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-04T06:13:45.417

你不能用这个：

```
 class="validate[required,maxSize[50]] " 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-05T02:55:22.097

此解决方案用作原生 HTML text-area ， MAX-Length 属性

```
Var MaxLength=100; 
$('#Selector').keydown(function (e) {
            var text = $(this).val();
            var chars = text.length;
            if (chars > MaxLength) {
                if (e.keyCode == 46 || e.keyCode == 8 || e.keyCode == 37 || e.keyCode == 38 || e.keyCode == 39 || e.keyCode == 40) {
                    return true;
                }
                return false;
            }
            return true;
        }); 
```

> 不要在服务器端控件 (asp:TextBox) 中设置 Maxlength 属性，因为服务器在返回浏览器时不会将 maxLength 属性转换为 HTML 标记。

# php - 我可以像这样使用 try-catch-finally 吗？

> ID：15031515
> 
> 赞同：15
> 
> 时间：2013-02-22T19:10:43.303
> 
> 标签：php, try-catch-finally

我用`try-catch`了很多年，但我从来没有学会如何以及何时使用`finally`，因为我从来不明白`finally`（我读过坏书）的意义何在？

我想问你关于`finally`我的情况的使用。

我的代码示例应该解释一切：

```
$s = "";

$c = MyClassForFileHandling::getInstance();

try
{
    $s = $c->get_file_content($path);
}

catch FileNotFoundExeption
{
    $c->create_file($path, "text for new file");
}

finally
{
    $s = $c->get_file_content($path);
} 
```

这是finally的正确使用吗？

更精确的问题：

我应该使用`finally`（在未来的 PHP 版本或其他语言中）来处理“如果不存在就创建”操作吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-22T19:32:34.543

finally 将始终被执行，因此在这种情况下，这不是它的预期目的，因为正常执行会再次重新打开文件。如果您这样做，您打算做的事情将以相同（更清洁）的方式实现

```
$s = "";

$c = MyClassForFileHandling::getInstance();

try
{
    $s = $c->get_file_content($path);
}
catch(FileNotFoundExeption $e)
{
    $c->create_file($path, "text for new file");
    $s = $c->get_file_content($path);
} 
```

然后手册说：

> 对于之前没有遇到 finally 块的人来说，它们与 try/catch 块之后的普通代码之间的主要区别在于，即使 try/catch 块会将控制权返回给调用函数，它们也会被执行。
> 
> 如果出现以下情况，它可能会这样做：
> 
> *   如果您的 try 块包含您未捕获的异常类型，则代码
> *   你在你的 catch 块中抛出另一个异常
> *   您的 try 或 catch 块调用返回

finally 在这种情况下很有用：

```
function my_get_file_content($path)
{
    try
    {
        return $c->get_file_content($path);
    }
    catch(FileNotFoundExeption $e)
    {
        $c->create_file($path, "text for new file");
        return $c->get_file_content($path);
    }
    finally
    {
        $c->close_file_handler();
    }
} 
```

=> 如果您需要确保在这种情况下关闭文件处理程序，或者一般情况下关闭某些资源。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T19:11:58.697

`finally`直到 5.5 版才被引入 PHP，该版本还没有发布，所以你还没有看到任何例子。因此，除非您正在运行 PHP 5.5 的 alpha 版本，否则您还不能使用`finally`。

**来自手册（[例外](http://php.net/manual/en/language.exceptions.php)）**

> 在 PHP 5.5 及更高版本中，也可以在 catch 块之后指定 finally 块。finally 块中的代码将始终在 try 和 catch 块之后执行，无论是否引发了异常，并且在正常执行恢复之前。

**使用手册中的示例`finally`**

```
<?php
function inverse($x) {
    if (!$x) {
        throw new Exception('Division by zero.');
    }
    else return 1/$x;
}

try {
    echo inverse(5) . "\n";
} catch (Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
} finally {
    echo "First finally.\n";
}

try {
    echo inverse(0) . "\n";
} catch (Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
} finally {
    echo "Second finally.\n";
}

// Continue execution
echo 'Hello World';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:13:26.563

finally 表示你最后想要做什么。

```
try
{
    $s = $c->get_file_content($path);
}

catch FileNotFoundExeption
{
    $c->create_file($path, "text for new file");
}

finally
{
    //Create a pdf with my file
    //or, Rename my file
    //or, store my file into Database
} 
```

无论在 try 或 catch 中发生什么（无论是否引发了异常），“最终代码”都会执行。所以，没有必要在“try”和“finally”上使用相同的代码。这是否简单地回答了您的问题？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-30T17:17:44.313

我只想指定，如果块中发生异常，`try`即使存在块，异常也会正确引发`finally`。块的用处`finally`是干净和免费的资源。我认为最好的用途是，例如，当您上传文件但随后发生错误时：

```
$tmp_name = null;
try {
    $tmp_name = tempnam(UPLOAD_DIR, 'prefix');
    move_uploaded_file($file['tmp_name'], $tmp_name);
    ImageManager::resize($tmp_name, $real_path, $width, $height); // this will rise some exception
}
finally {
    if($tmp_name)
        unlink($tmp_name); // this will ensure the temp file is ALWAYS deleted
} 
```

如您所见，这样无论发生什么情况，临时文件都会被正确删除。
如果我们要`finally`在旧版本的 PHP 中模拟该子句，我们应该这样写：

```
// start finally
catch(Exception $ex) {
}
if($tmp_name)
    unlink($tmp_name);
if( isset($ex) )
    throw $ex;
// end finally 
```

`catch`请注意，如果块捕获了某些东西，则会重新抛出异常。它与版本不清楚`finally`，但工作方式相同。

# google-analytics - Google Analytics 与 Google Maps iOS v 1.1.0 不兼容

> ID：15031516
> 
> 赞同：0
> 
> 时间：2013-02-22T19:10:52.560
> 
> 标签：google-analytics, google-maps-sdk-ios

我正在尝试为 iOS 实现新版本的 GM，但它们不适用于 iOS 的 GA 库，有人知道如何解决这个冲突吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:28:15.310

您似乎收到与此问题相同的错误消息：

[在我的 iOS 应用程序中集成 Google Analytics SDK (GoogleAnalyticsiOS_2.0beta4) 时出错](https://stackoverflow.com/questions/14544891/error-while-integrating-google-analytics-sdk-googleanalyticsios-2-0beta4-in-my)

我认为这与谷歌地图无关。

# sql-server - 清除具有较低 SeqNo 的项目的数据库结果集

> ID：15031519
> 
> 赞同：0
> 
> 时间：2013-02-22T19:11:01.207
> 
> 标签：sql-server

我有一个查询，它返回如下内容：

```
ID    FieldName    Value        SeqNo
--    ---------    -----        -----
45    {AAA}        Something    1 
12    {BBB}        Something2   2
34    {CCC}        Something3   3 
23    {BBB}        Something4   4 
```

我需要清除结果集中已经存在但具有更高序列号的 FieldNames 的所有记录。所以在上面的例子中，我的结果集不应该返回 ID=12。

**更新：** 我知道我可以将此查询加入到按 FieldName/SeqNo 分组的自身副本中，但这是一个非常密集的查询，并且在优化方面再调用一次可能成本太高

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:52:04.713

使用 'row_number()' 和 'cte'

```
;with cte as (
select id, fieldname, value, seqnum, row_number() over (partition by fieldname order by seqnum desc) rn
from table
)
Select id, fieldname, value, seqnum
From cte
Where rn=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:15:28.347

```
select ID, FieldName, Value, SeqNo
from tablename
group by FieldName, Value, SeqNo, ID
having max(SeqNo) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:45:39.963

```
Select  ID, FieldName, Value, SeqNo
From    [tableExample] t
Where   Not Exists (Select  1
                    From    [tableExample] t2
                    Where   t.fieldName = t2.fieldName
                    And     t.SeqNo < t2.SeqNo 
```

# jquery - 如何使用表中表单元素的值更新某些数据库记录

> ID：15031522
> 
> 赞同：0
> 
> 时间：2013-02-22T19:11:19.020
> 
> 标签：jquery, ajax, html-table

我使用下面的代码片段来生成一些表单输入。

```
<tr id='$ticket->id' class='ticket-row'>
    <td>$ticket->ticket_no</td>
    <td><input type='text' name='c_name[]' /></td>
    <td><input type='text' name='next_of_kin[]' /></td>
    <td><input type='text' name='address[]' value='$ticket->address' /></td>
    <td><input type='text' name='seat_no[]' /></td>
    <td><input type='text' name='fare[]' value='$ticket->fare' /></td>
</tr> 
```

一些表单元素包含来自数据库的输入值。每个`tr`标签都包含该`id`行的记录。我的挑战是如何最好地在一行中检索表单值以及记录`id`，并在编辑值后更新单个记录（可能使用循环）。

我尝试使用`ajax`，但我卡在某个地方。以下是我尝试过的片段的一部分：

```
var tickets = $('.ticket-row');
    $.each(tickets, function(i, val) {
        // Retrieve the form elements in this row and send to the server
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:25:48.923

要更新完整表：

**编辑：**将[JSON-js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)添加到您的页面

**HTML**

```
<table>
    <tr id='$ticket->id' class='ticket-row'>
        <td><span id="no">$ticket->ticket_no</span></td>
        <td><input type='text' id='c_name' /></td>
        <td><input type='text' id='next_of_kin' /></td>
        <td><input type='text' id='address' value='$ticket->address' /></td>
        <td><input type='text' id='seat_no' /></td>
        <td><input type='text' id='fare' value='$ticket->fare' /></td>
    </tr>
</table> 
```

**JS**

```
var tickets = [];

$('.ticket-row').each(function() {
    tickets.push({ id : $(this).attr('id'),
                  no : $(this).find('#no').text(),
                  c_name : $(this).find('#c_name').val(),
                  next_of_kin: $(this).find('#next_of_kin').val(),
                  address : $(this).find('#address').val(),
                  seat_no : $(this).find('#seat_no').val(),
                  fare : $(this).find('#fare').val() });
});

$.ajax({
    type : 'POST',
    url : '**URL_HERE**',
    data : JSON.stringify(tickets),
    dataType : 'json'
})
.success(function() {
    // TODO
})
.fail(function() {
    // TODO
}); 
```

# c# - 如果发生错误，则捕获错误

> ID：15031524
> 
> 赞同：1
> 
> 时间：2013-02-22T19:11:21.220
> 
> 标签：c#, asp.net-mvc-4, actionmailer, actionmailer.net

如果有任何错误（任何人）来捕获此错误并写入日志，该怎么做..

最近一个客户更改了密码 webmaster（用于验证发送消息的电子邮件）这意味着系统不再能够发送电子邮件。问题是几天后没有发现错误。

您想要一种方法来捕获此错误并保存消息（电子邮件）和日志错误，如何？

**在控制器中**

```
new MailController(_subsidiaryService).PedidoOrcamentoEmail(model).DeliverAsync(); 
```

**在邮件控制器中**

```
public EmailResult PedidoOrcamentoEmail(BudgetViewModel model)
{
    From = string.Format("{0} <{1}>", model.Name, model.Email);
    To.Add("Site <" + ConfigurationManager.AppSettings["toEmail"] + ">");

    var subInfo = (from s in _subsidiaryService.Repository.Query()
                   where s.ID == model.SubsidiaryID
                   select new
                              {
                                  s.Title,
                                  s.District
                              }).SingleOrDefault();
    ViewData["SubsidiaryTitle"] = subInfo.Title;
    ViewData["SubsidiaryDistrict"] = subInfo.District;

    Subject = "[Pedido de Orçamento] " + model.Name;
    return Email("PedidoOrcamentoEmail", model);
}
    protected override void OnException(System.Web.Mvc.ExceptionContext filterContext)
            {
// This is not executed             
base.OnException(filterContext);
            } 
```

**作为测试，我输入了一个无效的密码电子邮件网站管理员（用于运输）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T12:25:30.577

创建一个继承自默认 MailSender 的自定义 MailSender，并将对基本方法的调用包装在 try..catch 块中。然后你可以在异常发生时做任何事情。

```
public class CustomMailSender : SmtpMailSender
{
    private readonly ILog _log = LogManager.GetCurrentClassLogger();
    public CustomMailSender() { }
    public CustomMailSender(SmtpClient client) : base(client) { }

    public new void Send(MailMessage mail)
    {
        try
        {
            base.Send(mail);
            //Do some logging if you like
            _log.Info(....)

        }
        catch (SmtpException e)
        {
            //Do some logging 
            var message = mail.RawMessageString();
            _log.Error(message, e);
            // rethrow if you want...
        }
    }

    public new void SendAsync(MailMessage mail, Action<MailMessage> callback)
    {
        ... similar ...
    }
} 
```

在您的 MailController 中，CustomMailSender 的使用方式如下：

```
public MailController() {
    MailSender = new MyCustomMailSender();
} 
```

# c# - 检索网站内容并在 ASP.NET MVC 4 中返回

> ID：15031526
> 
> 赞同：1
> 
> 时间：2013-02-22T19:11:25.457
> 
> 标签：c#, .net, asp.net-mvc, proxy

我有两台服务器。一个是私有服务器，我不希望用户直接访问它，另一个是公共可以访问的服务器。我可以通过 URL 访问我的私人服务器，例如：http: [//xxx.xx.xxx.xxx/](http://xxx.xx.xxx.xxx/)

我想做的是创建某种“代理”，仅用于我的私人服务器。我的想法是去： http: [//www.domain.com/server/path/here/something](http://www.domain.com/server/path/here/something) 这个页面应该显示[http://xxx.xx.xxx.xxx/path/here/something的内容](http://xxx.xx.xxx.xxx/path/here/something)

我有这个工作，但我能让它工作的唯一方法是将内容作为字符串返回，然后浏览器将解释 HTML。这适用于返回 HTML 内容的页面，但如果我想直接访问 .gif 或任何类型的文件，它（当然）不起作用。

这是我目前拥有的代码：

```
 public string Index(string url)
    {
        string uri = "http://xxx.xx.xxx.xxx/" + url;

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        request.Method = "GET";
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        StreamReader responseStream = new StreamReader(response.GetResponseStream());

        string resultado = responseStream.ReadToEnd();

        return resultado;
    } 
```

如何更改我的代码以使其适用于任何文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:20:14.100

您可以检查响应内容类型并据此执行您需要的操作。您需要更改您的操作以返回`ActionResult`而不是字符串。

```
if(response.ContentType.Equals("text/html"))
{
 //show html stuff
 return Content(resultado);

}
else if(response.ContentType.Contains("image/"))
{

   var ms = new MemoryStream();
    responseStream.BaseStream.CopyTo(ms);

    var imageBytes = ms.ToArray();
  return File(imageBytes, response.ContentType);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T11:49:44.870

您必须编写一个系统，从 resultado 读取您的 html 或图像，并根据该 PLUS 执行某些操作，您还需要控制您的 Url。

# javascript - 从 javascript 确认框调用 VB.net 按钮单击事件

> ID：15031529
> 
> 赞同：0
> 
> 时间：2013-02-22T19:11:39.203
> 
> 标签：javascript

当用户单击确定时，是否有任何方法可以从 java 脚本确认框中的单击事件调用 vb.net 按钮。

```
 Dim sb As New System.Text.StringBuilder()
                    sb.Append("<script type = 'text/javascript'>")
                    sb.Append("window.onload=function(){")
                    sb.Append("if (confirm('")
                    sb.Append(message)

                    sb.Append("')){ ") //btn Click event

                    sb.Append("}")
                    sb.Append("else{")
                    sb.Append("window.location = 'SA.aspx?PID=" & Request("PID") & "';")
                    sb.Append("}};</script>")
                    ClientScript.RegisterClientScriptBlock(Me.GetType(), "confirm", sb.ToString()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:18:04.723

试试这个

```
sb.AppendFormat("__doPostBack('{0}','');", yourButton.ClientID); 
```

这将导致在服务器上调用单击处理程序。如果您没有任何按钮处理程序，答案会更简单：您只需要提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:18:29.983

是的你可以。其中 ctl 是 vb.net 控件的名称

使用 jQuery $('<%= ctl.ClientID %>').click();

或者

或常规 Javascript document.getElementById('<%= ctl.ClientID %>').click();

# php - 从 Doctrine 获取实体的数组/列表

> ID：15031534
> 
> 赞同：10
> 
> 时间：2013-02-22T19:11:50.030
> 
> 标签：php, database, doctrine, entities

这可能很简单，但我找不到这样做的方法。

有没有办法获取 Doctrine 管理的实体的类名列表？就像是：

```
$entities = $doctrine->em->getEntities(); 
```

在哪里`$entities`有类似等的数组`array('User', 'Address', 'PhoneNumber')`...

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-04-02T14:08:15.263

我知道这个问题很老，但如果有人仍然需要这样做（在 Doctrine 2.4.0 中测试）：

```
$classes = array();
$metas = $entityManager->getMetadataFactory()->getAllMetadata();
foreach ($metas as $meta) {
    $classes[] = $meta->getName();
}
var_dump($classes); 
```

[来源](http://www.abendstille.at/blog/?p=163)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-01-09T08:16:35.090

获取所有实体（带有命名空间）的类名的另一种方法是：

```
$entitiesClassNames = $entityManager->getConfiguration()->getMetadataDriverImpl()->getAllClassNames(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:17:09.560

不幸的是，你的类应该组织在文件结构中。示例：我正在处理的一个项目现在在 init/classes 文件夹中包含其所有学说类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-03T19:32:52.590

没有内置函数。但是您可以使用[标记/标记器接口](http://en.wikipedia.org/wiki/Marker_interface_pattern)来标记属于您的应用程序的实体类。然后您可以使用函数“get_declared_classes”和“is_subclass_of”查找实体类列表。

例如：

```
/**
 * Provides a marker interface to identify entity classes related to the application
 */
interface MyApplicationEntity {}

/**
 * @Entity
 */
class User implements MyApplicationEntity {
   // Your entity class definition goes here.
}

/**
 * Finds the list of entity classes. Please note that only entity classes
 * that are currently loaded will be detected by this method.
 * For ex: require_once('User.php'); or use User; must have been called somewhere
 * within the current execution.
 * @return array of entity classes.
 */
function getApplicationEntities() {
    $classes = array();
    foreach(get_declared_classes() as $class) {
        if (is_subclass_of($class, "MyApplicationEntity")) {
            $classes[] = $class;
        }
    }

    return $classes;
} 
```

请注意，为了简单起见，我上面的代码示例没有使用命名空间。您必须在您的应用程序中相应地调整它。

也就是说，您没有解释为什么需要查找实体类列表。也许，对于您要解决的问题，有更好的解决方案。

# vb.net - 是否可以使用 OLEDB 插入公式？

> ID：15031541
> 
> 赞同：3
> 
> 时间：2013-02-22T19:12:33.920
> 
> 标签：vb.net, excel, oledb, excel-formula

我已经使用 OLEDB 成功创建了一个 Excel 文件（在第一次创建表格/工作表之后）。我想插入一个对成本（货币）单元格求和的公式，但找不到任何这样做的技术。

我尝试将公式插入到 Cost 字段中，如下所示，但收到无效数据类型错误，这是可以理解的：

```
cmd.Parameters.Add("P0", OleDbType.PropVariant).Value = "=SUM(K2:K5)"
cmd.CommandText = "INSERT INTO  [" & ExcelTableName & "] (Cost) VALUES(P0);"
cmd.ExecuteNonQuery() 
```

有什么方法可以使用 OLEDB 做到这一点，还是我需要使用自动化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T12:42:13.270

您可以使用在列中包含公式的 SQL 查询，并在 Excel 中使用 ADO DB 记录集来执行查询。

然后，您将使用*范围对象上的***CopyFromRecordset**方法将结果集转储到包含公式的 Excel 中。

 *例如：

```
sQry="Select fields, '=IF(A:A>=B:B, ''''Good'''', ''''Bad'''') from table where criteria'
xlApp.Range("A1").CopyFromRecordset oRs 
```

这也可以从 .NET 完成，只是不同......

请参阅[MSDN 库：使用 ADO.NET 将数据传输到工作表](http://support.microsoft.com/kb/306022)*

# ajax - 按钮标签作为没有名称的参数添加到表单数据中

> ID：15031543
> 
> 赞同：0
> 
> 时间：2013-02-22T19:12:38.370
> 
> 标签：ajax, jsp, struts, yui

我有一个 jsp 页面，上面有两个 ajaxy 按钮：快速保存和运行。两个按钮都调用一个 JavaScript 方法，该方法本质上是：

```
function submitForm(url) {
    document.<formname>.action = url;
    // call method that makes ajax call via YAHOO.util.Connect.asyncRequest
    submitAjaxRequest(document.<formname>); 
} 
```

然后按钮执行`return false;`此操作，页面无法导航。

问题：点击“快速保存”后，一切正常。但是，现在当我点击“运行”时，提交的表单数据包含“：快速保存”，这导致tomcat抛出警告“参数：无效块被忽略”。

如果我反过来尝试（即单击运行，然后单击快速保存），我看不到任何此类问题。知道为什么要在表单数据中添加按钮标签吗？YUI 问题？支柱问题？

这是动作的struts定义：

```
 <action path="/edit" type="com.llc.MyActionClass" parameter="edit"
            name="formName" validate="false" scope="request">
        <set-property property="permission" value="ModifyData"/>
        <forward name="success"         path="def.tile.edit" />
        <forward name="error"           path="/list.do" />
    </action>

    <action path="/save" type="com.llc.MyActionClass" parameter="save"
            name="formName" validate="true" scope="request"  input="/edit.do?validation_error=true">
        <set-property property="cancellable" value="true"/>
        <set-property property="permission" value="ModifyData"/>
        <forward name="success"         path="/list.do" redirect="false"/>
        <forward name="quicksave"       path="/edit.do" redirect="false"/>
        <forward name="cancel"          path="/list.do" redirect="true"/>
        <forward name="error"           path="/edit.do" />
    </action>

    <action path="/run" type="com.llc.MyActionClass" parameter="find"
            name="formName" validate="true" scope="request"  input="/edit.do?validation_error=true">
        <set-property property="permission" value="ModifyData"/>
        <forward name="success" path="def.tile.result" redirect="true"/>
        <forward name="error"   path="/edit.do" />
    </action> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:56:02.550

它是由以下原因引起的：

```
<input type="submit"/> 
```

将类型属性更改为“按钮”会导致按钮标签未添加到表单数据中。

# ruby - 从文件中提取快速傅里叶变换数据

> ID：15031544
> 
> 赞同：11
> 
> 时间：2013-02-22T19:12:42.417
> 
> 标签：ruby, audio, mp3, fft, wav

我正在构建一个应该在服务器上运行并分析声音文件的工具。我想用 Ruby 来做这件事，因为我所有的其他工具也是用 Ruby 编写的。但我很难找到实现这一目标的好方法。

我发现的很多例子都是在做可视化和图形化的东西。我只需要 FFT 数据，仅此而已。我需要同时获取音频数据，并对其进行 FFT。我的最终目标是计算一些东西，比如所有频率（加权幅度）的平均值/中值/模式、第 25 个百分位和第 75 个百分位、BPM，也许还有其他一些好的特性，以便以后能够将相似的声音聚集在一起.

首先，我尝试使用**ruby** ​​-audio和**fftw3**，但我从来没有让这两者真正一起工作。文档也不好，所以我真的不知道什么数据被打乱了。接下来，我尝试使用**bplay** / **brec**并将我的 Ruby 脚本限制为仅使用 STDIN 并对其执行 FFT（仍然使用 fftw3）。但是我无法让 bplay/brec 工作，因为服务器没有声卡，而且我没有设法将音频直接发送到 STDOUT 而无需先访问音频设备。

这是我得到的最接近的：

```
# extracting audio from wav with ruby-audio
buf = RubyAudio::Buffer.float(1024)
RubyAudio::Sound.open(fname) do |snd|
    while snd.read(buf) != 0
        # ???
    end
end

# performing FFT on audio
def get_fft(input, window_size)
    data = input.read(window_size).unpack("s*")
    na = NArray.to_na(data)
    fft = FFTW3.fft(na).to_a[0, window_size/2]
    return fft
end 
```

所以现在我被困住了，在谷歌上找不到更多好的结果。所以也许你们可以帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-25T06:39:03.433

这是我试图实现的最终解决方案，非常感谢 Randall Cook 的有用建议。在 Ruby 中提取 wav 文件的声波和 FFT 的代码：

```
require "ruby-audio"
require "fftw3"

fname = ARGV[0]
window_size = 1024
wave = Array.new
fft = Array.new(window_size/2,[])

begin
    buf = RubyAudio::Buffer.float(window_size)
    RubyAudio::Sound.open(fname) do |snd|
        while snd.read(buf) != 0
            wave.concat(buf.to_a)
            na = NArray.to_na(buf.to_a)
            fft_slice = FFTW3.fft(na).to_a[0, window_size/2]
            j=0
            fft_slice.each { |x| fft[j] << x; j+=1 }
        end
    end

rescue => err
    log.error "error reading audio file: " + err
    exit
end

# now I can work on analyzing the "fft" and "wave" arrays... 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-22T23:53:55.983

我认为这里有两个问题。一个是获取样本，另一个是执行 FFT。

要获取样本，有两个主要步骤：解码和缩混。要解码 wav 文件，您只需要解析标题，这样您就可以知道如何解释样本。对于 mp3 文件，您需要进行完整解码。解码音频后，如果您对单独处理立体声通道不感兴趣，则可能需要将其缩混为单声道，因为 FFT 需要单个通道作为输入。如果您不介意在 Ruby 之外冒险，那么[sox 工具](http://sox.sourceforge.net)可以让这一切变得简单。例如`sox song.mp3 -b 16 song.raw channels 1`应该将 mp3 转换为纯 PCM 样本的单声道文件（即 16 位整数）。顺便说一句，快速搜索发现了[ruby​​/audio](http://hans.fugal.net/src/ruby-audio/doc/)库（也许它是您帖子中提到的那个）。它看起来很不错，尤其是因为它包装了 libsndfile。

要执行 FFT，我看到了三个选项。一种是使用执行 FFT 的这段代码[。](http://blog.mro.name/2011/04/simple-ruby-fast-fourier-transform/)我不是 Ruby 专家，但看起来可能没问题。第二种选择是使用[NArray](http://narray.rubyforge.org)。它有大量的数学方法，包括 FFTW，在一个单独的模块中可用，一个 tarball 链接在 NArray 页面的中间。第三种选择是编写自己的 FFT 代码。这不是一个特别复杂的算法，并且可以为您提供在 Ruby 中进行数值处理的丰富经验（如果您需要）。

您可能知道这一点，但 FFT 需要复杂的输入并生成复杂的输出。当然，音频信号是真实的，因此输入的虚部应始终为零 ( `a + 0*i`)。由于您的输入是真实的，因此输出将关于输出数组的中点对称。您可以放心地忽略上半部分。如果您想要特定频率箱中的能量（它们线性间隔最多为采样率的一半），您需要计算复数值 ( `sqrt(real*real + imag*imag)`) 的大小。

还有一件事：因为频率零（信号的直流偏移）和奈奎斯特频率（采样率的一半）没有相位分量，一些 FFT 实现将它们放在同一个复数 bin 中（一个在实部，一个在虚部，通常是第一个 bin）。您可以创建一些简单的信号（所有 1 仅表示 DC 信号，交替 +1、-1 表示 Nyquist 信号）并查看 FFT 输出的样子。

# javascript - 在 Jade 中使用外部变量

> ID：15031546
> 
> 赞同：3
> 
> 时间：2013-02-22T19:12:49.240
> 
> 标签：javascript, variables, pug

我有一个变量，`test`， in `script.js`。我`script.js`在我的文件的开头引用`index.jade`这样的：`script(type="text/javascript")(src="scripts/script.js")`.

在我的`index.jade`文件中，我需要使用该`test`变量，但是当我尝试使用时，几乎在所有情况下我都会收到错误消息`'test' is not defined`。

我发现类似`body(onload="alert(test);")`的东西可以访问`test`变量，但类似`p #{test}`或`p= test`不能访问它，这确实是我需要工作的。

那么我怎样才能将一个变量从`script.js`into传递给`index.jade`Jade 来识别它呢？提前感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T20:19:10.563

这是服务器端的 JavaScript：

```
- var colors = ['red', 'green', 'blue'] 
```

这是客户端：

```
body(onload="alert(colors);") 
```

因为客户端的颜色是未定义的。你可以这样做：

```
body(onload="alert(#{colors});") 
```

编辑：

如果颜色是客户端 javascript 变量，那么你应该这样做：

```
ul#myul

script
    window.addEventListener('load', function(){
        var ul = document.getElementById('myul');
        for(var i = 0; i < colors.length; i++){
            var li = document.createElement('li');
            li.innerHTML = colors[i];
            ul.appendChild(li);
        }
    }) 
```

编辑：

test 是客户端变量，不能用作服务器端 js 变量。要将它与玉一起使用，您应该首先在 nodejs 中像这样从服务器传递它：

```
res.render('myviewpath', { test: test }); 
```

# html - 将 css 文件缩小到大小

> ID：15031555
> 
> 赞同：1
> 
> 时间：2013-02-22T19:13:21.243
> 
> 标签：html, css

我的 html 页面正在使用从模板中借用的 css 文件，我想缩小该模板的大小以仅保留网页中实际使用的样式。

我的目的是让我可以找到围绕 css 样式的方法，并在需要时对其进行修改。css 文件相当大，并且经过优化，没有空格，很难阅读。它来自一个比我的实现复杂得多的模板，因此包含很多我没有使用的东西。我猜我只需要大约 5% 的内容。现在我很难找到背景颜色，因为 css 定义了很多不同的背景。

我已经制作了我的 html 中出现的 -id- 和 -class- 的手动列表（每个大约 20 个），所以基本上我想从原始 css 中提取每个 id="X" 的相关样式和我列出的每个 class="Y"。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:22:04.483

查看 CSS Trashman [http://www.csstrashman.com/](http://www.csstrashman.com/)。它应该从您的样式表中删除所有不必要的 CSS。

# plot - 如何限制 QwtPlot 可以缩小到的最大范围？

> ID：15031558
> 
> 赞同：2
> 
> 时间：2013-02-22T19:13:25.057
> 
> 标签：plot, zooming, qwt

我有一个带有 QwtPlotZoomer 的 QwtPlot，它将其缩放基础设置为任意大小。然后如何防止用户缩小到该窗口之外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T12:38:16.950

我不知道这是否可以使用 API。`QwtPlotZoomer`然而，在 Qwt 中，通过继承来扩展是相当容易的。查看原始代码如何处理缩放并在覆盖的方法中实现您自己的约束。

# c - C 和 malloc 中的数组

> ID：15031566
> 
> 赞同：3
> 
> 时间：2013-02-22T19:13:54.723
> 
> 标签：c, malloc

1.两个维度在内存中是如何存储的，它们是连续的吗？（我的意思是int[M][N]，不是动态分配，我认为int[M][N]发生在栈区，所以是连续的，不是吗？）

2.malloc分配的区域一定是连续的吗？

3.如果不需要动态分配内存空间，应该在哪里使用？堆栈或堆。例如，我想要一个 char 数组来存储 10000 个字符，所以我应该使用：

```
char a[10000]; 
```

或者

```
char *a = calloc(sizeof(char),10000); 
```

“函数调用栈”和变量栈是在同一个区域吗？在同一个栈还是不同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:20:16.327

在`int numbers[m][n]`n 中是内存中的连续整数，例如`numbers[0][0]`后跟`numbers[0][1]`.

另一方面，假设 n=10，然后`numbers[m][9]`是`numbers[m+1][0]`。

`malloc`返回连续的内存。你决定如何使用它。

堆栈上的 10000 字节数组没有问题，除非该函数是递归的，并且（如 Carey 所指出的）除非您在小型堆栈环境中进行开发，即。嵌入。

是的，调用堆栈和局部变量是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:19:03.117

### 当你分配某事[a][b] 时它是连续的吗？

是的

当我制作平铺地图的游戏时，我什至会在渲染中使用指针访问平铺。

即：如果地图是 10x10，我将使用`arrayName[14]`例如渲染图块 [1][3]。

还要记住使用这个事实，在某些地方，[b] 而不是 [a] 将完全在内存中，如果您依赖来自 FORTRAN（如 CBLAS）或一些特定的设备和情况（比如一些带有一些特定驱动程序的 GPU）。

### 使用malloc的时候，一定是连续的吗？

是的，如果连续内存不可用，它将失败。这是一个非常常见的错误，因为存在总可用内存，而没有考虑内存碎片，所以期望程序可以运行。

我曾经做过一个游戏，因为它有 30mb 的内存但无法加载 16mb 的图像而无法运行……当时我没有意识到我的代码导致的内存碎片导致没有 16mb 的块可用。

### 如果不需要动态分配，我应该使用堆栈还是堆？

在 C 中，动态分配通常意味着堆分配，早期的 C 书籍甚至明确指出`malloc`和类似的函数系列（`calloc`包括）仅在堆上运行。而自动分配尝试使用堆栈。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T19:16:59.980

1.  内存是连续的。一个维度中的所有项目将是连续的，然后是下一个维度。

2.  是的。一次调用分配的所有内存`malloc()`都是连续的。

3.  如果您需要大量内存，我建议动态分配它。对于更少的内存，您可以静态分配。`malloc()` *确实*使用堆。我不推荐堆栈，除非只有非常少量的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T19:31:30.633

C 不支持二维数组。它支持数组数组和数组指针数组，两者都可以像二维数组一样使用，但它们根本不一样，它们都不是真正的二维数组。

数组占用连续的内存位置。所以当你有一个数组数组时，每个子数组都是单独连续的，这些数组一个接一个地布置在内存中，使整个事情是连续的。

当您有一个指向数组的指针数组时，每个子数组都是单独连续的，但子数组不需要彼此连续——它们可能分布在整个内存中。顶级数组是连续的，但它只包含指向子数组的指针，而不包含子数组本身。

在任何一种情况下，您都可以从“二维”数组中获取单个（行）子数组，但是没有简单的方法来获取列数组——您需要创建一个单独的数组并从每个单独的行数组中复制值如果你想要那种形式。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-22T19:20:19.347

1）老实说，我不知道。

2) 是的，malloc 分配的区域*在虚拟地址空间中*是连续的。这可以通过简单的思维练习来推断；给定一个指针，如果你遍历整个空间，你总是将指针加一并且仍然得到有效数据。请注意，可能会返回不连续的物理映射，尽管这一切都在低于您的级别进行处理（即在操作系统和处理器的 TLB 中）。

3) 通常，使用堆。它通常是一个较大的段，*特别是*如果您使用线程（即我刚刚运行的测试显示 pthreads 的默认堆栈大小为 8MB）。

至于3)的第二部分，函数调用栈和变量栈一样。当您静态创建变量时（即不通过`malloc`），它存在于包含函数的堆栈框架中，当然它驻留在堆栈中。有关这方面的更多信息，请查看 .

# wordpress - WordPress 网站底部出现额外空间

> ID：15031574
> 
> 赞同：1
> 
> 时间：2013-02-22T19:14:16.877
> 
> 标签：wordpress, markup, woothemes

我是这个网站的新海报。多年来，我一直将其用作研究资源，但这是我第一次被难住到需要接触整个社区的地步。

我目前正在为客户完成重新设计网站的过程。它使用高度定制的 WooThemes Canvas 版本作为框架，位于[http://dev.victorybeer.com](http://dev.victorybeer.com)。我在 footer.php 文件中添加了一些额外的标记项，以便在底部显示一些动态数据以及标准页脚票价。您可以看到的问题是页脚下方显示的额外空间（可以看到蓝色背景）。该站点应该以红色的“footercontainer”DIV 结束。

我已经对我的标记和 css（使用 FireBug）进行了双重和三重检查，以确保一切都是有效的，并且内部元素没有应用边距或填充，可能会将底部向下推，但我什么也没看到这表明它会创建这个。缺少一些奇怪的 PHP 问题，我无法理解为什么会发生这种情况。当我删除底部导航和 footercontainer DIV 时，该站点正确终止（就在“欧洲传统...”标语下方）。

我向 WooThemes 提交了 HelpDesk 票，我得到的答案是将 300px 的高度硬编码到 footercontainer DIV 以便将其向下推以覆盖空间。作为一个响应站点，这对我来说并不好，而且似乎更多的是覆盖症状而不是治疗原因。当我重新打开票证并指出解决方法还不够时，响应让我感到困惑：

> 它造成间隙的原因是因为页脚也没有一直到达底部，而页脚的高度固定了它。我还在移动视图上测试了该解决方案并且它有效。
> 
> 如您所知，页面上的所有元素都相互影响，底部的间隙就是由此产生的结果。我在我的网站上工作过，其中元素不能完全按照我的需要呈现，并添加了这样的 css 来修复它。
> 
> 更多的我真的不知道。

嗯？我想知道的是*为什么*页脚没有一直到达底部，而不是如何掩盖它没有到达底部的事实。

有人可以帮忙吗？我将不胜感激。该网站计划于 3/3 上线，因此感谢您的集体协助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:02:41.883

我以前也遇到过这个问题。我已经修复了几种方法，尽管它可能不是最好的方法。

当没有足够的“高度”内容时，修复它的一种简单方法是在您的 custom.css 上固定一个高度（第 460 行）。

我已经尝试过了，它似乎可以填补那个额外的空间。

```
#footercontainer {
background-image: url("images/vbc_bkg_wfh.png"), url("images/vbc_bkg_footer.png");
background-position: 80% 70px, left top;
background-repeat: no-repeat, repeat;
border-top: 1px solid #270101;
height: 280px; 
```

我已将高度更改为 280 像素，它似乎总是有效，因为您的页面都缺少相同的间隙高度。如果您正在寻找更深入的内容，我认为您必须为此检查所有 html 和 CSS。这个修复在过去对我有用。

# git - 如何防止 git 认为我重命名了

> ID：15031576
> 
> 赞同：86
> 
> 时间：2013-02-22T19:14:26.223
> 
> 标签：git

我有两个文件`index.html`和`template.html`. 我将大部分内容`index.html`移入`template.html`，现在 git 认为我在添加两个文件时进行了重命名。在特定情况下是否可以防止这种情况发生？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-02-22T19:28:36.400

## 为什么 Git 认为你的文件是副本

Git 跟踪*内容*，而不是文件名。结果，如果两个文件具有基本相似的内容，git 会认为您复制或重命名了该文件。如果你阅读 git-log(1)，你会学到：

> 相似性指数是不变行的百分比，不相似性指数是变化行的百分比。它是一个向下舍入的整数，后跟一个百分号。因此，100% 的相似性索引值是为两个相同的文件保留的，而 100% 的不相似性意味着旧文件中没有一行进入新文件。

所以，假设你的相似度指数是 100%，git 会认为那是一个副本。最好的办法是添加一个合理的日志消息或注释（有关更多信息，请参阅 git-notes(1)）来解释如果您认为 git 做的事情不正确，会发生什么。

## 调整相似度指数

您也可以尝试调整 git 用于考虑复制或重命名的值。git-log(1) 的手册说：

```
-M[<n>], --find-renames[=<n>]

If generating diffs, detect and report renames for each commit. For
following files across renames while traversing history, see --follow. If
n is specified, it is a threshold on the similarity index (i.e. amount
of addition/deletions compared to the file’s size). For example, -M90%
means git should consider a delete/add pair to be a rename if more than
90% of the file hasn’t changed.

-C[<n>], --find-copies[=<n>]    

Detect copies as well as renames. See also --find-copies-harder.
If n is specified, it has the same meaning as for -M<n>. 
```

同样，如果文件大多相似，这对您没有帮助，但您当然可以使用这些值来调整它们需要*多*相似才能被视为副本或重命名。你的旅费可能会改变。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-10-18T09:53:57.393

有一个“已接受”的答案，但它没有给出任何关于如何回答问题的提示。

来自 git-log(1) 和 git-diff(1) 的正确答案是：

```
 --no-renames
       Turn off rename detection, even when the configuration
       file gives the default to do so. 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-12-26T12:08:22.233

如果您在提交之前的某个时刻并且“您觉得 git 疯了”，那么只需撤消 git 认为您重命名的模糊文件的添加，执行提交，然后再次添加模糊文件并提交：

```
git reset ambiguous_file_git_thought_you_renamed
git commit
git add ambiguous_file_git_thought_you_renamed
git commit 
```

这对我有用。

仔细检查没有重命名：

```
git diff --name-status -C HEAD^^ HEAD
M       ambiguous_file_git_thought_you_renamed
M       original_file 
```

开头的“M”表示修改，“R”表示重命名。注意这里不存在重命名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-28T05:55:29.053

如果您修改了文件A、B和C；并删除文件 D、E 和 F；git 有可能认为 D 被重命名为 A，或类似的东西。

最简单的解决方案是将文件修改和删除分成两个提交。

# java - 如何修复 hadoop 中的“非法分区”错误？

> ID：15031579
> 
> 赞同：8
> 
> 时间：2013-02-22T19:14:48.043
> 
> 标签：java, hadoop, mapreduce

我写了一个自定义分区器。当我的减少任务数量大于 1 时，作业失败。这是我得到的例外：

```
 java.io.IOException: Illegal partition for weburl_compositeKey@804746b1 (-1)
 at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:930)
 at org.apache.hadoop.mapred.MapTask$OldOutputCollector.collect(MapTask.java:499) 
```

我写的代码是

```
public int getPartition(weburl_compositeKey key, Text value, int numPartitions)
{
    return (key.hashCode()) % numPartitions;
} 
```

这个值的`key.hashCode()`等于`-719988079`和模正在返回`-1`。

感谢您对此的帮助。谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-22T19:38:39.680

您的自定义计算的分区号`Partitioner`必须为非负数。尝试：

```
public int getPartition(weburl_compositeKey key, Text value, int numPartitions)
{
    return (key.hashCode() & Integer.MAX_VALUE) % numPartitions;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-15T19:56:27.823

关于使用的警告：

```
public int getPartition(weburl_compositeKey key, Text value, int numPartitions)
{
    return Math.abs(key.hashCode()) % numPartitions;
} 
```

如果你遇到`key.hashCode()`等于的情况，`Integer.MIN_VALUE`你仍然会得到一个负的分区值。这是 Java 的一个奇怪之处，但会`Math.abs(Integer.MIN_VALUE)`返回`Integer.MIN_VALUE`（如 -2147483648）。取模数的绝对值会更安全，如下所示：

```
public int getPartition(weburl_compositeKey key, Text value, int numPartitions)
{
    return Math.abs(key.hashCode() % numPartitions);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-22T09:25:36.470

或者你可以使用

```
public int getPartition(weburl_compositeKey key, Text value, int numPartitions)
{
    return (key.hashCode() & Integer.MAX_VALUE) % numPartitions;
} 
```

# java - XStream 使用 getter 进行序列化

> ID：15031580
> 
> 赞同：4
> 
> 时间：2013-02-22T19:14:49.340
> 
> 标签：java, xml, spring, xstream

我的 Web 服务使用 Spring MVC 以 xml 和 json 格式返回数据。对于 json，spring 对 XML 使用 Jackson 和 XStream。但是，XStream 使用字段进行序列化，而 Jackson 使用方法（setter/getter）。

我想在 xml 序列化中包含所有/一些吸气剂。这如何通过自定义转换器或注释来完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T01:00:17.070

您需要注册一个自定义 JavaBeanConverter，看看这里的单元测试：[https ://fisheye.codehaus.org/browse/xstream/tags/XSTREAM_1_1_3/xstream/src/test/com/thoughtworks/xstream/converters/javabean /JavaBeanConverterTest.java?r=554](https://fisheye.codehaus.org/browse/xstream/tags/XSTREAM_1_1_3/xstream/src/test/com/thoughtworks/xstream/converters/javabean/JavaBeanConverterTest.java?r=554)

```
XStream xstream = new XStream();
xstream.registerConverter(new JavaBeanConverter(xstream.getClassMapper(), "class"), -20); 
```

归功于原始线程：http: [//xstream.10960.n7.nabble.com/How-to-use-public-accessor-instead-of-field-td1193.html](http://xstream.10960.n7.nabble.com/How-to-use-public-accessor-instead-of-field-td1193.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:19:59.947

如果您公开这些字段，Jackson 可以使用它们而不是 getter/setter 方法。还有一个注释 @JsonProperty 会导致这种情况。

```
public class KeyValuePair {

    @JsonProperty
    private int value;
    @JsonProperty
    private String key;
} 
```

或者看这里[如何指定杰克逊只使用字段 - 最好](https://stackoverflow.com/questions/7105745/how-to-specify-jackson-to-only-use-fields-preferably-globally)是全局理解：

```
 @JsonAutoDetect(fieldVisibility = Visibility.ANY, getterVisibility = Visibility.NONE, setterVisibility = Visibility.NONE) 
```

# php - 如何保存带边框的图像（不使用 CSS 添加）？

> ID：15031583
> 
> 赞同：1
> 
> 时间：2013-02-22T19:14:52.747
> 
> 标签：php, image, image-conversion

图像应以特定格式存储，剩余空间应填充黑色。我的问题是，图片没有显示在 html 页面中，它应该只是以所描述的方式转换和存储。PHP有什么简单的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:23:07.617

你可以使用[Imagick](http://www.php.net/manual/en/book.imagick.php)。Imagick 是一个用于创建和修改图像的原生 php 扩展。它有一个名为[Imagick::borderImage](http://php.net/manual/en/imagick.borderimage.php)的特定功能。

像这样的东西可以完成这项工作：

```
$image = new Imagick('your_image.jpg');
$color=new ImagickPixel();
$color->setColor("rgb(100,200,50)");
$image->borderImage($color,1,1);
$image->writeImage('your_bordered_image.jpg'); 
```

您可能需要稍微调整这些代码行，我只是将它们放在一起。

# c - 评估赋值语句的返回值

> ID：15031589
> 
> 赞同：2
> 
> 时间：2013-02-22T19:15:09.990
> 
> 标签：c

我的理解是，在 C 中评估赋值语句时，分配的值也会返回。
但是，当我运行下面的代码时，情况似乎并非如此。当 source_next_level（一个 GLib 队列）为空时，g_queue_pop_head() 函数返回 NULL，然后将其分配给 current_q_node。
然而，while 循环条件检查中的 != NULL 比较似乎并未评估此比较，因为即使 current_q_node 为 NULL 也会进入 while 循环。

为什么 g_queue_pop_head 返回 NULL 时进入 while 循环？

```
while((current_q_node = g_queue_pop_head(source_next_level)) != NULL);
{
  if(current_q_node == NULL) puts("It doesn't seem this should ever be printed but it is");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T19:16:09.187

```
while((current_q_node = g_queue_pop_head(source_next_level)) != NULL);
                                                                    ^^^ 
```

你有一个额外的`;`上面。

# android - SQLite 访问表内容

> ID：15031597
> 
> 赞同：0
> 
> 时间：2013-02-22T19:15:56.373
> 
> 标签：android

我已经使用以下类成功地将数据插入到表中，但我不知道如何访问这些数据。另外，我想将数据表及其列内容放在数组列表中，例如

> ```
> column1--->array1
> column1--->array2
> column1--->array3
> column1--->array4 
> ```

```
public class SQLiteAdapter {

 public static final String MYDATABASE_NAME = "MY_DATABASE";
 public static final String MYDATABASE_TABLE = "MY_TABLE";
 public static final int MYDATABASE_VERSION = 1;
 public static final String KEY_ID = "_id";
 public static final String KEY_CONTENT1 = "Content1";
 public static final String KEY_CONTENT2 = "Content2";
 public static final String KEY_CONTENT3 = "Content3";
 public static final String KEY_CONTENT4 = "Content4";

 //create table MY_DATABASE (ID integer primary key, Content text not null);
 private static final String SCRIPT_CREATE_DATABASE =
  "create table " + MYDATABASE_TABLE + " ("
  + KEY_ID + " integer primary key autoincrement, "
  + KEY_CONTENT1 + " text not null, "
  + KEY_CONTENT2 + " text not null, "
  + KEY_CONTENT3 + " text not null, "
  + KEY_CONTENT4 + " text not null);";

 private SQLiteHelper sqLiteHelper;
 private SQLiteDatabase sqLiteDatabase;

 private Context context;

 public SQLiteAdapter(Context c){

     this.context=c;
 }

 public SQLiteAdapter openToRead() throws android.database.SQLException {
  sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
  sqLiteDatabase = sqLiteHelper.getReadableDatabase();
  return this; 
 }

 public SQLiteAdapter openToWrite() throws android.database.SQLException {
  sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
  sqLiteDatabase = sqLiteHelper.getWritableDatabase();
  return this; 
 }

 public void close(){
  sqLiteHelper.close();
 }

 public long insert(String content1, String content2, String content3, String content4){

  ContentValues contentValues = new ContentValues();
  contentValues.put(KEY_CONTENT1, content1);
  contentValues.put(KEY_CONTENT2, content2);
  contentValues.put(KEY_CONTENT3, content3);
  contentValues.put(KEY_CONTENT4, content4);

  return sqLiteDatabase.insert(MYDATABASE_TABLE, null, contentValues);
 }

 public int deleteAll(){
  return sqLiteDatabase.delete(MYDATABASE_TABLE, null, null);
 }

 public Cursor queueAll(){
  String[] columns = new String[]{KEY_ID, KEY_CONTENT1, KEY_CONTENT2, KEY_CONTENT3, KEY_CONTENT4};
  Cursor cursor = sqLiteDatabase.query(MYDATABASE_TABLE, columns,
    null, null, null, null, null);

  return cursor;
 }

 public class SQLiteHelper extends SQLiteOpenHelper {

  public SQLiteHelper(Context context, String name,
    CursorFactory factory, int version) {
   super(context, name, factory, version);
  }

  @Override
  public void onCreate(SQLiteDatabase db) {
   // TODO Auto-generated method stub
   db.execSQL(SCRIPT_CREATE_DATABASE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
   // TODO Auto-generated method stub
  }
 } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T20:14:18.477

要访问数据库，请尝试此操作。

首先，您必须拥有一个扩展 SQLiteOpenHelper 的类。[创建一个扩展SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)的新类，并在主数据库打开类中调用它们。

在这里，您可以添加这两个块并在您的`onCreate`方法中调用它们

```
public Cursor getShow()
{
    SQLiteDatabase db = obj.getReadableDatabase();
    Cursor c = db.rawQuery("select * from emp", null);
    startManagingCursor(c);
    return c;
}

public Cursor getEvent(Cursor c)
{
    StringBuilder sb= new StringBuilder("Data Base:-");
    while(c.moveToNext())
    {
        long id = c.getLong(0);
        String un = c.getString(1);
        String pw = c.getString(2);
        String ut = c.getString(3);
        sb.append("\n"+"id:-"+id+
            "\n"+"Username:-"+un+
            "\n"+"Password:-"+pw+"\n"+
            "\n"+"UserType:-"+ut+"\n"
        );
    }
    tvTools.setText(sb);
    return c;
} 
```

这会获取我之前创建的三列并将它们显示在`TextView`. 现在调用这些方法`onCreate()`。

```
Cursor c = getShow();
getEvent(c); 
```

它每次都对我有用。

# sql - 根据 count(value) = 1 返回行

> ID：15031599
> 
> 赞同：0
> 
> 时间：2013-02-22T19:15:56.943
> 
> 标签：sql, db2

我有一个类似的查询：

```
select
    clm.CLM_ID,
    csv.CSV_PRC_CD
FROM
    CLM_CLAIM clm inner join CSV_CLM_SRV csv on clm.CLM_iD = csv.CSV_CLM_ID
GROUP BY
    clm.CLM_ID,
    csv.CSV_PRC_CD 
```

我的结果看起来像这样：

```
CLM_ID      CSV_PRC_CD     
----------- ---------------
       5087 0270           
       5087 0305           
       5087 0351           
       5087 0637           
       5087 0730           
     365294 99221          
     406116 0250           
     406116 0300           
     406116 0450           
     523504 99202          
     602677 73080          
     602677 73100          
     901343 97002          
     901343 97014          
    1040368 00190          
    1250851 93306 
```

我想要完成的是只返回只有一个 CSV_PRC_CD 与 CLM_ID 关联的行。所以我的结果应该是这样的：

CLM_ID CSV_PRC_CD

* * *

```
 365294 99221          
 523504 99202          
1040368 00190          
1250851 93306 
```

任何与它相关的`CLM_ID`超过 1`CSV_PRC_CD`的东西都应该从我的结果中省略。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:23:27.727

我认为最简单的查询是：

```
select clm.CLM_ID, MIN(csv.CSV_PRC_CD) as CSV_PRC_CD
FROM CLM_CLAIM clm inner join CSV_CLM_SRV csv on clm.CLM_iD = csv.CSV_CLM_ID
GROUP BY clm.CLM_ID
having COUNT(distinct csv.CSV_PRC_CD) = 1 
```

这可以通过使用以下`having`子句来稍微提高效率：

```
having min(csv.CSV_PRC_CD) = max(csv.CSV_PRC_CD) 
```

`count(distinct)`通常比`min()`和更占用资源`max()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:19:02.347

一种方法是使用以下方法加入自身`COUNT(*) = 1`：

```
SELECT
    clm.CLM_ID,
    csv.CSV_PRC_CD
FROM
    CLM_CLAIM clm 
        INNER JOIN CSV_CLM_SRV csv on clm.CLM_iD = csv.CSV_CLM_ID
        INNER JOIN (
               SELECT CSV_CLM_ID
               FROM CSV_CLM_SRV 
               GROUP BY CSV_CLM_ID 
               HAVING COUNT(*) = 1 ) T
          ON T.CSV_CLM_ID = csv.CSV_CLM_ID 
```

我认为您不再需要保留 GROUP BY，但是如果您的 Claim 表中有多个记录，那么您可以将其添加回来。

# .htaccess - 使用 htaccess 重写 URL

> ID：15031601
> 
> 赞同：-1
> 
> 时间：2013-02-22T19:16:01.100
> 
> 标签：.htaccess

我想使用 htaccess 文件
[http://www.doamin.com/pages/add/](http://www.doamin.com/pages/add/)
将我的 url 重定向 到
[http://www.doamin.com/req/](http://www.doamin.com/req/)

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:20:21.233

```
RewriteEngine on
RewriteRule ^/pages/add/(.*) http://www.doamin.com/req/$1 [R] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:18:51.210

在这里试试这个：

```
RewriteEngine On
RewriteRule ^/packages/add/$ /req/ [L,R] 
```

另见[官方文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。

# python - 如何找到 python 模块的 debian 包名称

> ID：15031602
> 
> 赞同：0
> 
> 时间：2013-02-22T19:16:06.583
> 
> 标签：python, apt

我学习 python，我一直在寻找我想玩但默认没有安装的新模块。由于我使用的是 Ubuntu，我知道我需要做的就是使用正确的包名称运行 apt-get。

问题是我如何找出特定模块的 apt 包名称是什么？有没有一种简单的方法来查找它？

现在我正在寻找“ipaddress”模块的包。

```
ImportError: No module name ipaddress 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:19:26.900

```
apt-cache search ipaddress | grep python 
```

是一个很好的起点。许多模块被称为“name-python”

# objective-c - 如何确保 NSOperationQueue 真的是空的

> ID：15031605
> 
> 赞同：2
> 
> 时间：2013-02-22T19:16:16.943
> 
> 标签：objective-c, macos, cocoa, nsoperation, nsoperationqueue

在我的应用程序中，我通过循环我想要对其执行一些操作的文件数组来向我的 NSOperationQeueu 添加并发操作。我想知道队列何时为空并且所有操作都已完成，因此我使用（缩短版）：

```
- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{

        if (object == myLocalModeController.myFileobjectsQueue && [keyPath isEqualToString:@"operations"]) {

        if ([myLocalModeController.myFileobjectsQueue.operations count] == 0) {
            NSLog(@"Local: Fileobject creation has completed");  
          }
        }
     } 
```

我的问题是，有时这些操作非常轻量级，以至于它们在队列仍在添加时立即完成。这导致队列中的项目数为零但操作尚未完成的频繁发生。但是，根据我当前的设置，程序认为操作自“[myLocalModeController.myFileobjectsQueue.operations count] == 0”以来已经完成。有关如何确保队列确实完成并且所有操作都已结束的任何建议？谢谢。干杯，特隆德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:36:50.577

您可能希望在使用 setSuspended 添加操作时阻止所有操作：

```
- (void)setSuspended:(BOOL)suspend; 
```

因此，在添加所有操作之前将其设置为“是”，完成后将其设置为“否”。

# php - 如何在 SetaPDF Merger Api 中更改当前用户名

> ID：15031606
> 
> 赞同：0
> 
> 时间：2013-02-22T19:16:19.597
> 
> 标签：php, pdf

我正在使用 SetaPDF Merger API - 我需要找到一种方法来更改文件链接中的当前用户名。

例如：

在下面的“$filename =”链接中，我需要为每个新用户更改为当前用户名。这样每个用户只能查看他们唯一的文档。

谁能告诉我该怎么做？

$filename = '/home/drssem5/public_html/modassistance.info/wp-content/uploads/user_uploads//f4506t.pdf';

```
// Add the filename
$merger->addFile($filename); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T00:36:35.790

我发现这个解决方案在 Wordpress 中有效：

```
if ( is_user_logged_in() ) {
 global $current_user;
get_currentuserinfo();
$subscriber = $current_user->display_name;
$username = $subscriber;
 } 

 //Add $username to your link
 $filename = '/home/drssem5/public_html/modassistance.info/wp-           
 content/uploads/user_uploads/' .$username. '/f4506t.pdf'; 
```

玩得开心，Cbfreeman

# haskell - Yesod、WebSockets 和持久化

> ID：15031607
> 
> 赞同：8
> 
> 时间：2013-02-22T19:16:21.860
> 
> 标签：haskell, websocket, yesod

我正在尝试在 Haskell 中为基于回合的游戏实现服务器。我的选择是将 Yesod 用于管理和元信息（例如，用户参与的游戏等）。

我想使用网络套接字来保持游戏中的数据开销很小。

查看 ws-chat 示例，我不确定如何访问 Handler Monad 并使用它 Persistent。

最好有一些用于连接的簿记代码围绕一个“普通”处理程序，该处理程序本身会更新数据库并通知相关用户。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T17:02:03.910

这就是我认为它应该看起来的样子。

```
{-# LANGUAGE QuasiQuotes, TypeFamilies, GeneralizedNewtypeDeriving, TemplateHaskell, OverloadedStrings, GADTs, FlexibleContexts #-}
module Main where
import Control.Monad.IO.Class (liftIO)
import Data.String (fromString)
import Database.Persist
import Database.Persist.TH
import Database.Persist.Sqlite
import Network.Wai.Application.Static (staticApp, defaultWebAppSettings, defaultFileServerSettings)
import Network.Wai.Handler.Warp (runSettings, defaultSettings, settingsIntercept, settingsPort)
import Network.Wai.Handler.WebSockets (intercept)
import qualified Network.WebSockets as WS

share [mkPersist sqlSettings, mkMigrate "migrateAll"] [persistUpperCase|
Person
    name String
    age Int
    deriving Show
|]

ws :: WS.Request -> WS.WebSockets WS.Hybi10 ()
ws r = do
    WS.acceptRequest r
    liftIO $ runSqlite ":memory:" $ do
        runMigration migrateAll
        michaelId <- insert $ Person "Michael" 26
        michael <- get michaelId
        liftIO $ print michael

main :: IO ()
main = runSettings defaultSettings
    { settingsPort = 9160
    , settingsIntercept = intercept $ ws
    } $ staticApp (defaultFileServerSettings $ fromString ".") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T03:09:32.320

如果你想`Handler`自己运行一个 monad，你可以使用[runFakeHandler](http://haddocks.fpcomplete.com/fp/7.4.2/20130212-31/yesod-core/Yesod-Core.html#v%3arunFakeHandler)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-16T16:33:00.030

我正在使用[Yesod.WebSockets](http://hackage.haskell.org/package/yesod-websockets-0.3.0.2)库，并且能够在 Web 套接字应用程序中访问数据库，如下所示：

```
voteApp :: WebSocketsT Handler ()
voteApp = do
  uuid <- liftIO nextRandom
  master <- getYesod
  runSqlPool (insert (Session uuid)) $ appConnPool master
  -- rest of the handler 
```

# javascript - 更改 div 中单个列表项的边距

> ID：15031612
> 
> 赞同：1
> 
> 时间：2013-02-22T19:16:33.097
> 
> 标签：javascript, jquery

我有一个包含在 div 标签内的项目列表

```
<div id="contentleft">
<ul>
<li><a href="http://www.google.com">Google<a/></li> //1
<li><a href="http://www.cnn.com">CNN<a/></li> //2
<li><a href="http://www.ign.com">IGN<a/></li> //3
<li><a href="http://www.bing.com">Bing<a/></li> //4
</ul> 
```

我需要定位#2: 并使用, 和.`<li>`将其左边距更改为 30px 。我该怎么做？我想要一个解释，所以我会知道我在做什么，而不仅仅是得到一个答案。`:eq()` `filter``css()`

这是我尝试过的：

```
$("#contentleft ul").eq(0).filter("li").css("margin-left:30"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T19:38:45.940

你非常接近，有几个问题：

1）我不知道这是否是复制粘贴问题，但您的锚标签不正确：

```
<a href="http://www.google.com">Google<a/> 
```

应该

```
<a href="http://www.google.com">Google</a>  // <-- slash before the "a" 
```

2)`.eq()`需要继续您要索引的元素，在这种情况下是`li`. `eq()`也是从 0 开始的，所以第二个元素是`eq(1)`. `.eq()`可与`:eq()`内部选择器互换：

`$("#contentleft ul li:eq(1)")`或者`$("#contentleft ul li").eq(1)`

3)`.css()`采用 2 个参数、样式/值或一个对象：

```
$("#contentleft ul li:eq(1)").css("margin-left", "30px"); 
```

或者

```
$("#contentleft ul li:eq(1)").css({
    "margin-left": "30px",
    "background-color": "purple"
}); 
```

演示：http: [//jsfiddle.net/gLKMj/](http://jsfiddle.net/gLKMj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:28:58.400

首先，您几乎可以在 jquery .eq() 页面上找到答案：http: [//api.jquery.com/eq/](http://api.jquery.com/eq/)

但如果您无法访问互联网：

```
// select the 2nd li element (zero based array so 1 is 2nd)
// change the margin-left to 30px
$('li').eq(1).css('margin-left', '30px'); 
```

# mysql - 用于更改值的 SQL 查询

> ID：15031613
> 
> 赞同：0
> 
> 时间：2013-02-22T19:16:46.530
> 
> 标签：mysql, sql

我已尝试使用以下查询将 wp_usermeta 表中任何行的值更改为 meta_value `a:1:{s:10:"subscriber";s:1:"1";}`，`a:1:{s:3:"user";b:1;}`但似乎没有任何反应。

```
UPDATE wp_usermeta
SET meta_value = 'a:1:{s:3:"user";b:1;}'
WHERE meta_value = 'a:1:{s:10:"subscriber";s:1:"1";}'; 
```

我在某个地方犯了错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:53:10.670

如果 MySQL 在 中[**`safe_update`**](http://dev.mysql.com/doc/refman/5.0/en/mysql-command-options.html#option_mysql_safe-updates)，则需要在 WHERE 子句中指定主键约束。

## 从文档：

> 仅允许使用键值指定要修改哪些行的**UPDATE**和**DELETE语句。**如果您在选项文件中设置了此选项，则可以通过在命令行上使用 --safe-updates 来覆盖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:19:30.083

我要做的第一件事是查看 WHERE 子句是否返回任何内容。

将其更改为像这样的选择查询，看看是否返回任何行。

```
SELECT * 
FROM wp_usermeta
WHERE meta_value = 'a:1:{s:10:"subscriber";s:1:"1";}' 
```

# javascript - Javascript提升奇怪行为

> ID：15031618
> 
> 赞同：0
> 
> 时间：2013-02-22T19:17:02.480
> 
> 标签：javascript

提升如何解释这种行为？

```
for(var i = 0; i < 4; i++) {
    setTimeout(function() {
        alert("i is: " + i);
    }, i * 200);
} 
```

其输出为 4、4、4、4。

这在文献中经常被用作一个危险的起重例子。后面的输出可能是 4 是有道理的，因为 i 变量绑定到函数范围，因此在所有调用之间共享，并且在它们执行时 i 将是 4 完成 for 循环。但是，初始调用指定了 0 * 200 或 0 的超时，因此我觉得这应该在 i 仍然小于 4 时立即执行。是什么导致该函数的所有输出都是 4？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:22:06.547

这不是因为它与吊装无关。

即使你`0`作为延迟传递，浏览器中的最小延迟也是 10 毫秒左右。无论您通过什么延迟，该函数都不会立即执行。

从[MDN 文档](https://developer.mozilla.org/en/docs/DOM/window.setTimeout#Notes)：

> `setTimeout()`请务必注意，如果在调用的线程终止之前无法执行函数或代码片段。

因此，在调用任何回调之前，`for`循环已经终止。

相关问题：

*   [循环内的 JavaScript 闭包——简单实用的示例](https://stackoverflow.com/questions/750486/javascript-closure-inside-loops-simple-practical-example)
*   [为什么 setTimeout(fn, 0) 有时有用？](https://stackoverflow.com/questions/779379/why-is-settimeoutfn-0-sometimes-useful/779785)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:22:14.573

> *“但是，初始调用指定了 0 * 200 或 0 的超时，因此我觉得这应该立即执行......”*

这可能发生在可以利用多线程的环境中，但在单线程环境中，当前的同步执行流程将继续不受限制，直到完成。

这意味着循环在第一次`setTimeout`回调发生之前继续并完成。

即使您的循环需要*10,000 毫秒*才能完成，在第一个回调触发之前，循环也将被允许继续。

* * *

试试这个演示：

```
var start = Date.now();

for(var i = 0; i < 4; i++) {

     // set up the first timeout
    setTimeout(function() {
        alert("i is: " + i);
    }, i * 200);

    while (Date.now() - start < 1000) ; // block for 1000 ms
} 
```

第一个`setTimeout`设置完成后，我们阻塞 1000 毫秒。调用的结果`alert()`还是一样的。这是因为无论计划运行的任何异步代码如何，同步流程都会继续进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:25:35.497

在第一个计时器到期之前，对 setTimeout的四次*调用*在循环内触发（并且匿名方法调用触发）。结果，当它触发时，结果始终为 4。 setTimeout 计时器延迟永远无法保证。

# c# - 从视图模型中缩短查询字符串名称

> ID：15031619
> 
> 赞同：8
> 
> 时间：2013-02-22T19:17:04.680
> 
> 标签：c#, asp.net-mvc, viewmodel, data-annotations

我正在我的视图模型中寻找一种方法来缩短搜索表单的查询字符串中的属性名称。例如，详细的属性名称可能是查询，但您在查询字符串中看到 q。

目前，我正在做以下事情来实现这一目标。

```
public string Query { get; set; }
public string q
{
  get
  {
    return Query;
  }
  set
  {
    Query = value;
  }
} 
```

我认为如果有数据注释来帮助解决这个问题可能会更容易。

```
[Querystring(Name="q")]
public string Query { get; set; } 
```

有没有更好的方法来做到这一点，我没有想到，或者是否可以像这样编写我自己的数据注释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T21:57:28.053

您需要创建自己的`ModelBinder`.

看一下：

1.  [将模型属性绑定到不同的命名查询字符串字段](http://ole.michelsen.dk/blog/bind-a-model-property-to-a-different-named-query-string-field/)

2.  [Asp.Net MVC 2 - 将模型的属性绑定到不同的命名值](https://stackoverflow.com/questions/4316301/asp-net-mvc-2-bind-a-models-property-to-a-different-named-value)

# java - 插件依赖有一个包，我得到一个“类型 无法解决”错误

> ID：15031623
> 
> 赞同：0
> 
> 时间：2013-02-22T19:17:34.883
> 
> 标签：java, eclipse, eclipse-plugin

我不知道我做了什么，但曾经有效的方法不再有效。

我正在调用一个返回特定类的实例的函数，称之为 MyClass。MyClass 依赖于包中定义的另一个类 MyOtherClass。这个包（称为 com.myotherpackage）包含在插件清单的依赖项部分中列出的插件（称为 com.myotherplugin）中。当我调用该函数时，我收到错误“无法解析类型 com.myotherpackage.MyOtherClass。它是从所需的 .class 文件中间接引用的。”

我可以做些什么来导致这个错误出现在以前不存在错误并且我的代码运行得很好的地方？

我已经寻找解决方案。他们似乎都专注于非插件环境。一个这样的解决方案有一些我可以映射到插件的东西。它建议我配置我的构建路径（右键单击项目-> 构建路径-> 配置构建路径）。在这个对话框中，我选择了 Libraries 选项卡，点击 Plug-in Dependencies 旁边的箭头，然后点击 com.myotherplugin 旁边的箭头，然后点击 Access rules 旁边的箭头，发现旁边有一个选中的复选框单词“可访问：com/myotherpackage/*”。因此，该包似乎可用，尽管我从该视图中没有任何信息表明 MyOtherClass 包含在该包中。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:42:41.697

您必须`com.myotherpackage`在清单中导出`com.myotherplugin`. [您可以在运行时页面](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Fguide%2Ftools%2Feditors%2Fmanifest_editor%2Fruntime.htm)上的插件清单编辑器中执行此操作。

此外，Eclipse 通常会为这些类型的错误提供[快速修复](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/concepts/concept-quickfix-assist.htm)，从而在清单文件中进行所需的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T20:28:37.963

我不喜欢这个答案，但是重新安装 IDE 可以解决问题（即从源代码解压缩）。请注意，我的 IDE 实例带有 com.myotherplugin。

我不知道我弄坏了什么。

# android - 如何更改android中的数字选择器样式？

> ID：15031624
> 
> 赞同：18
> 
> 时间：2013-02-22T19:17:41.237
> 
> 标签：android, android-widget, android-holo-everywhere

我想使用 NumberPicker 组件小部件，但在默认的 Holo 主题中，我需要用橙色替换蓝色，因为这是我样式中的默认颜色。如何替换蓝色和数字颜色，并保留组件的所有功能？ ![Holo 中的默认数字选择器](../Images/81d265809dfb44235365ac3d82be8398.png) 谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-22T20:48:05.130

不幸的是，你不能设计它。公共 API 中不存在的样式和样式属性`NumberPicker`，因此您无法设置它们并更改默认外观。您只能在浅色和深色主题之间进行选择。

作为解决方案，我建议改用[android-numberpicker](https://github.com/SimonVT/android-numberpicker)库。该库基本上是从 Android 源代码中提取的 NumberPicker 的一个端口。但它比这更好，它还向后移植`NumberPicker`到 Android 2.x。该库可以轻松设置样式。

要设置分隔线的样式，请调整样式`NPWidget.Holo.NumberPicker`及其属性。 为文本设置样式调整样式。`selectionDivider``selectionDividerHeight`
`NPWidget.Holo.EditText.NumberPickerInputText`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-03-01T05:11:16.570

自定义号码选择器预览：

[![在此处输入图像描述](../Images/51325ec6f668e7485469d9ead9a6723b.png)](https://i.stack.imgur.com/MenSV.png)

```
<NumberPicker
  android:id="@+id/np"
  android:layout_width="40dp"
  android:layout_height="40dp"
  android:layout_centerHorizontal="true"
  android:background="@drawable/drawablenp"
  android:layout_centerVertical="true"/> 
```

在名为“drawablenp.xml”的drawable文件夹中创建背景xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <gradient
        android:startColor="#707070"
        android:centerColor="#f8f8f8"
        android:endColor="#707070"
        android:angle="270"/>

</shape> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T11:01:35.800

复制 library/res/drawable-*/numberpicker_selection_divider.9.png 并命名，例如 custom_np_sd.9.png。

通过活动主题覆盖默认的 NumberPicker 样式：

```
<style name="AppTheme" parent="@style/Holo.Theme">
  <item name="numberPickerStyle">@style/CustomNPStyle</item>
</style>
<style name="CustomNPStyle" parent="@style/Holo.NumberPicker">
  <item name="selectionDivider">@drawable/custom_np_sd</item>
</style> 
```

并将@style/AppTheme 应用为活动主题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-26T09:58:47.680

我也遇到了这个问题。我真的很想拥有漂亮的`NumberPicker`用户界面。这个问题的所有答案都有效，但非常有限。我几乎创造了我自己的`RecylerView`来创造`NumberPicker`我想要的。显然我找到了非常强大的整洁库。这是链接[https://github.com/Carbs0126/NumberPickerView](https://github.com/Carbs0126/NumberPickerView)

不想在这里回答这个问题。只是想帮助和我有同样问题的人。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-08T09:13:29.650

我也面临这个问题，我用反射来改变风格

```
public class MyNumberPicker extends NumberPicker {
    public MyNumberPicker(Context context) {
        super(context);

        setNumberPickerDivider();
    }

    public MyNumberPicker(Context context, AttributeSet attrs) {
        super(context, attrs);

        setNumberPickerDivider();
    }

    public MyNumberPicker(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);

        setNumberPickerDivider();
    }

    @RequiresApi(api = Build.VERSION_CODES.LOLLIPOP)
    public MyNumberPicker(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) {
        super(context, attrs, defStyleAttr, defStyleRes);

        setNumberPickerDivider();
    }

    @Override
    public void addView(View child) {
        super.addView(child);
        updateView(child);
    }

    @Override
    public void addView(View child, int index, android.view.ViewGroup.LayoutParams params) {
        super.addView(child, index, params);
        updateView(child);
    }

    @Override
    public void addView(View child, android.view.ViewGroup.LayoutParams params) {
        super.addView(child, params);
        updateView(child);
    }

    public void updateView(View view) {
        if (view instanceof EditText) {
            EditText et = (EditText) view;
            et.setTextColor(ContextCompat.getColor(getContext(), R.color.font_content));
            et.setTextSize(16);
        }
    }

    private void setNumberPickerDivider() {

        try {
            {
                Field field = NumberPicker.class.getDeclaredField("mSelectionDivider");
                field.setAccessible(true);
                field.set(this, ContextCompat.getDrawable(getContext(), R.drawable.horizontal_divider));
            }

            {
                Field field = NumberPicker.class.getDeclaredField("mSelectionDividerHeight");
                field.setAccessible(true);
                field.set(this, 1);
            }
        } catch (NoSuchFieldException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        }
    }
} 
```

# node.js - 我可以快速扫描我的本地网络以查找特定的开放端口吗？

> ID：15031625
> 
> 赞同：12
> 
> 时间：2013-02-22T19:17:41.890
> 
> 标签：node.js, networking

我想知道是否有办法通过我的本地网络的 IP 范围扫描特定数量的开放端口。

本质上，我正在寻找在`nodejs`不知道其 IP 地址的情况下找到特定类型的客户端。在这种情况下，RFID 阅读器在端口 14150 上进行侦听。

我希望此扫描快速，因此我不希望每个 IP 地址之间的超时时间过长。它们都应该很快发生，对于多达 255 个客户端的整个本地 IP 范围（不包括我自己的 IP），最多*可能在几秒钟内发生。*

我编写的代码可以满足我的要求，但速度非常慢……我想看看如何通过快速连接并在 20 毫秒内无法与给定 IP 建立连接时退出来加快速度。我想捕获一个数组中的实际连接，然后我可以将其用于其他目的。

```
var net = require('net'); // Required to create socket connections

var ip = 254; //IP address to start with on a C class network

function checkConnect () {
  ip--;
  var thisIP = '192.168.1.' + ip; //concatenate to a real IP address

  var S = new net.Socket();
  S.connect(80, thisIP);

  if(ip > 0) { checkConnect(); }

  S.on('connect', function () { console.log('port 80 found on ' + thisIP); });
  S.on('error', function () { console.log('no such port on ' + thisIP); });
  S.end();
}

checkConnect(); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-12T11:10:50.567

我已经为你做了[https://github.com/eviltik/evilscan](https://github.com/eviltik/evilscan)。（今天刚刚发布v0.0.3）

**安装**：

```
npm install -g evilscan 
```

**用法**（端口列表+端口范围）：

```
root@debian:~# evilscan --target=192.168.0.0/24 --port=21-446,5900 --concurrency=100 --progress
192.168.0.3:5900|open
192.168.0.26:53|open
192.168.0.26:111|open
192.168.0.26:81|open
192.168.0.26:23|open
Scanned 192.168.0.253:446 (100%) 
```

**提示**：

对于非常快速的扫描，您可以使用“并发”参数，超过 1000，但您必须先更新 linux 的 ulimit 参数：

```
ulimit -u unlimited 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-06T14:59:51.990

以前的答案都没有真正满足我的需要。我找到了一个重量更轻的替代品。有了这个解决方案，我很快就得到了我的解决方案。我的下一个升级将是根据当前子网指定一系列主机。我想我会想把它限制在前 254 个客户端，这样就不会矫枉过正。这是代码：

```
//LLRP DEVICE SCANNER
var net    = require('net'), Socket = net.Socket;

var checkPort = function(port, host, callback) {
    var socket = new Socket(), status = null;

    // Socket connection established, port is open
    socket.on('connect', function() {status = 'open';socket.end();});
    socket.setTimeout(1500);// If no response, assume port is not listening
    socket.on('timeout', function() {status = 'closed';socket.destroy();});
    socket.on('error', function(exception) {status = 'closed';});
    socket.on('close', function(exception) {callback(null, status,host,port);});

    socket.connect(port, host);
}

var LAN = '192.168.1'; //Local area network to scan (this is rough)
var LLRP = 5084; //globally recognized LLRP port for RFID readers

//scan over a range of IP addresses and execute a function each time the LLRP port is shown to be open.
for(var i=1; i <=255; i++){
    checkPort(LLRP, LAN+'.'+i, function(error, status, host, port){
        if(status == "open"){
            console.log("Reader found: ", host, port, status);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-18T01:21:02.640

您可以使用 arp 命令获取首先处于活动状态的设备列表。跳出框框思考 ;) 您不必盲目地扫描所有设备。

```
var child = require("child_process"); 
var async = require("async"); 
var net = require("net"); 
var os = require("os"); 

function scan(port, cb){
    var hosts = {}; 
    var result = []; 
    async.series([
        function scan(next, c){
            if(c == 1){
                next(); return; 
            }
            // scan twice because arp sometimes does not list all hosts on first time
            child.exec("arp -n | awk '{print $1}' | tail -n+2", function(err, res){
                if(err) cb(err); 
                else {
                    var list = res.split("\n").filter(function(x){return x !== "";}); 
                    list.map(function(x){
                        hosts[x] = x; 
                    }); 
                }
                scan(next, 1); 
            }); 
        },
        function(next){
            // if you want to scan local addresses as well 
            var ifs = os.networkInterfaces(); 
            Object.keys(ifs).map(function(x){
                hosts[((ifs[x][0])||{}).address] = true; 
            }); 
            // do the scan
            async.each(Object.keys(hosts), function(x, next){
                var s = new net.Socket(); 
                s.setTimeout(1500, function(){s.destroy(); next();}); 
                s.on("error", function(){
                    s.destroy(); 
                    next(); 
                }); 
                s.connect(port, x, function(){
                    result.push(x); 
                    s.destroy(); 
                    next(); 
                }); 
            }, function(){
                next();
            });
        }
    ], function(){
        cb(null, result); 
    }); 
} 

scan(80, function(err, hosts){
    if(err){
        console.error(err); 
    } else {
        console.log("Found hosts: "+hosts);
    } 
}); 
```

您也可以使用 arp-scan 实用程序，它更可靠。但是 arp-scan 需要 root 权限才能工作，所以最好只使用 arp。它几乎可以在每个 linux 机器上使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T21:24:01.113

而不是仅仅发布链接（链接可能会在某一时刻失效），我将从网站发布教程代码：

```
var net = require('net');

// the machine to scan
var host = 'localhost';
// starting from port number
var start = 1;
// to port number
var end = 10000;
// sockets should timeout asap to ensure no resources are wasted
// but too low a timeout value increases the likelyhood of missing open sockets, so be careful
var timeout = 2000;

// the port scanning loop 
while (start <= end) {

    // it is always good to give meaningful names to your variables
    // since the context is changing, we use `port` to refer to current port to scan 
    var port = start;

    // we create an anonynous function, pass the current port, and operate on it
    // the reason we encapsulate the socket creation process is because we want to preseve the value of `port` for the callbacks 
    (function(port) {
        // console.log('CHECK: ' + port);
        var s = new net.Socket();

        s.setTimeout(timeout, function() { s.destroy(); });
        s.connect(port, host, function() {
            console.log('OPEN: ' + port);
            // we don't destroy the socket cos we want to listen to data event
            // the socket will self-destruct in 2 secs cos of the timeout we set, so no worries
        });

        // if any data is written to the client on connection, show it
        s.on('data', function(data) {
            console.log(port +': '+ data);
            s.destroy();
        });

        s.on('error', function(e) {
            // silently catch all errors - assume the port is closed
            s.destroy();
        });
    })(port);

    start++;
} 
```

# grails - 如何在 Tomcat 上访问 grails 应用程序

> ID：15031631
> 
> 赞同：0
> 
> 时间：2013-02-22T19:18:00.220
> 
> 标签：grails, tomcat7

我正在尝试在我的测试服务器tomcat 上部署一个简单的grails 应用程序。我已经用`grails war`命令构建了 WAR，所以我有一个名为的战争文件：`simplgrailsapp-0.1.war`

当我将它部署到 tomcat 时，我遇到了很多错误，我将一一解决。`mytestserver:8080/manager`但是来自 tomcat 管理器 ( )的应用程序的 URL`http://mytestserver:8080/simplegrailsapp-0.1/`似乎不正确。因为当我在本地运行应用程序时，网址是：`localhost:8080/simplegrailsapp`

我也尝试通过访问该应用程序，`http://mytestserver:8080/simplegrailsapp`但这也不起作用。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:22:23.357

默认情况下，当您将 WAR 部署到 tomcat 时，它将属于 WAR 文件名称的上下文。因此，在您的情况下，上下文变为 simplegrailsapp-0.1。你可以：

*   在部署之前将您的战争文件重命名为您想要的上下文
*   在 Tomcat 中为应用程序定义一个[上下文](http://tomcat.apache.org/tomcat-5.5-doc/config/context.html)

如果您要定义上下文，则可以通过在项目的 web-app 文件夹中创建 META-INF 文件夹并在那里创建 context.xml 文件来将其添加到 WAR 文件中。

# jquery-mobile - jQuery Mobile：.animate({scrollTop}) 在修复页面转换后不起作用

> ID：15031636
> 
> 赞同：3
> 
> 时间：2013-02-22T19:18:19.650
> 
> 标签：jquery-mobile, cordova, scroll, jquery-animate, scrolltop

*jsFiddle 链接位于底部。*

我有一个使用 jQuery Mobile 创建的 Phonegap 应用程序。[在我找到这个解决方案](http://outof.me/fixing-flickers-jumps-of-jquery-mobile-transitions-in-phonegap-apps/)之前，本机 iOS 应用程序中的页面转换非常不稳定且不一致。它使我的滚动不太好，所以我根据[这篇后续文章](http://outof.me/native-scrolling-in-jquery-mobilephonegap-applications/)进行了一些更改。

在第一个解决方案之后以及在我实施第二个解决方案之后，以下代码在我的应用程序中停止为我工作：

```
$('html, body').animate({scrollTop: $('#specificID').offset().top}, 2500); 
```

上面的代码在 2.5 秒内将用户向下滚动到 ID 为 的 DIV `specificID`。

我尝试了多种方法，但似乎没有任何效果：

```
$('#container').animate({scrollTop: $('#specificID').offset().top}, 2500);
$('html, body, #container').animate({scrollTop: $('#specificID').offset().top}, 2500);
$('.scrollable').animate({scrollTop: $('#specificID').offset().top}, 2500);
$(".scrollable").animate({ scrollTop: $("#specificID").scrollTop() }, 2500); 
```

因此，这是我调整我的 jquery 移动代码以修复页面转换的方法：

**1.我用DIV包裹`[data-role="page"]`了`container`DIV**

```
<body>
  <div id="container">
    <div data-role="page"> 
```

**2.我添加了以下Javascript**

```
$(document).one('mobileinit', function () {  
  // Setting #container div as a jqm pageContainer
  $.mobile.pageContainer = $('#container');

  // Setting default page transition to slide
  $.mobile.defaultPageTransition = 'slide';
}); 
```

**3.我添加了以下CSS**

```
body {
    margin: 0;
}
div#container {
    position: absolute;
    width: 100%;
    top: 0;
    bottom: 0;
}
div[data-role="header"] {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}
div[data-role="content"] {
    position: absolute;
    top: 41px;
    bottom: 0;
    left: 0;
    right: 0;
}
.scrollable {
    overflow-y: scroll;
    -webkit-overflow-scrolling: touch;
}
/* iOS specific fix, don't use it on Android devices */
 .scrollable > * {
    -webkit-transform: translateZ(0px);
} 
```

**我设置了三个 jsFiddles 来展示这一点：**

1.  普通的 jQuery - scrollTop 工作：http: [//jsfiddle.net/pxJcD/1/](http://jsfiddle.net/pxJcD/1/)

2.  过渡修复 - scrollTop 不工作：http: [//jsfiddle.net/ytqke/3/](http://jsfiddle.net/ytqke/3/)

3.  带有本机滚动的转换修复 - scrollTop 不工作：http: [//jsfiddle.net/nrxMj/2/](http://jsfiddle.net/nrxMj/2/)

最后一个 jsFiddle 是我正在使用的解决方案，也是我需要工作的解决方案。我提供了第二个，以表明该`scrollTop`功能在我进行任何本机滚动更改之前停止。**关于我可以做些什么来使用javascript向下滚动页面有什么想法吗？**

我正在使用 jQuery 1.8.2、jQuery Mobile 1.2.0 和 Phonegap 2.2.0（通过 Build）。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:47:10.270

在您的 CSS 中，您已将容器的位置属性设置为绝对。删除你的`div#container` 它应该可以工作。

[http://jsfiddle.net/nrxMj/16/](http://jsfiddle.net/nrxMj/16/)

# winapi - 如何理解 IUpdateHistoryEntry 的 Date 属性的值？

> ID：15031639
> 
> 赞同：1
> 
> 时间：2013-02-22T19:18:25.520
> 
> 标签：winapi

我正在使用 WUA（Windows 更新代理 API）来检查我的计算机上安装的更新。我发现有趣的是 Date 属性值（[http://msdn.microsoft.com/en-us/library/windows/desktop/aa386400(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa386400(v=vs.85).aspx)) 与实际安装时间（即本地时间）有很大不同。例如，对于一个补丁“Microsoft .NET Framework 3.5.1 on Windows 7 and Windows Server 2008 R2 SP1 for x64-based Systems (KB2789645) 的安全更新”，使用 WUA API，我看到日期值 = '2/21 /2013 11:04:30 PM'，在我的计算机上，我在 EventLog 中发现它被记录为“2/21/2013 4:51:58 PM”。我最初认为 WUA API 使用的是 UTC 时间，但如果我将 UTC 时间更改为本地时间（我在太平洋时区），那么 '2/21/2013 11:04:30 PM' (UTC) 将等于到“2/21/2013 3:04:30 PM”（本地），距离事件日志的“2/21/2013 4:51:58 PM”仍然很远。

有谁知道 IUpdateHistoryEntry 的 Date 属性的真正含义是什么？根据上述msdn链接中的MS，Date属性是

属性 AccessType 描述 Date 只读 获取应用更新的日期和时间。

在此先感谢您的帮助。我对这种差异感到困惑。

亲切的问候，

姚瑶

# javascript - Javascript TDD/BDD 用户界面。如何测试表格

> ID：15031642
> 
> 赞同：0
> 
> 时间：2013-02-22T19:18:37.710
> 
> 标签：javascript, ruby-on-rails, forms, tdd, bdd

我正在努力寻找一种测试 javascript 用户界面的方法。这是一种奇特的形式，有几个字段根据复选框的点击而被锁定，还有 ajax 的选择群等等。所有这些 + jQuery.uniform 使实现更加困难。

我需要一些方向，但我找不到一个可以作为基础的例子。有人做这种测试吗？如何？

我对使用 rspec（ruby on rails）的 tdd/bdd 非常满意。事实上，我正在处理的项目经过了很好的测试，除了视图和 javascript。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:38:05.950

看看[Selenium WebDriver](http://docs.seleniumhq.org/projects/webdriver/)。我们将它与[SpecFlow](http://www.specflow.org/specflownew/)结合使用来测试一些 UI 内容。

要使用 Java Script，请查看[JavascriptExecutor](http://onlineseleniumtraining.com/how-to-work-with-javascriptexecutor-using-selenium-webdriver/)。

# html - div 内容居中显示：用于底部对齐的表格单元格

> ID：15031643
> 
> 赞同：0
> 
> 时间：2013-02-22T19:18:38.147
> 
> 标签：html, css, vertical-alignment

我正在尝试创建一个居中的 div，该 div 的内容（一些图像）底部对齐。底部对齐内容已经是我已经解决的一个棘手问题（[在 DIV 容器中使用 HTML 图像底部对齐](https://stackoverflow.com/questions/6520940/image-bottom-alignment-inside-div-container)）。但是，该解决方案删除了​​ div 的居中。

我居中的方式是`display: inline-block;`
在底部对齐内容之前使用 Original：http:
[//jsfiddle.net/5NuBD/](http://jsfiddle.net/5NuBD/)

底部对齐的修复是添加 `display: table-cell;vertical-align: bottom;`
新的，底部对齐的内容，不再居中：http:
[//jsfiddle.net/KurpZ/](http://jsfiddle.net/KurpZ/)

我正在寻找一个也底部对齐的居中 div。这两种解决方案似乎不兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:31:17.233

如果 div 可以是固定宽度：

```
#wrapper {
    text-align:center;
    margin: 0 auto;
    width: 230px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T20:54:51.973

正如克里斯所建议的那样，我最终将 css 设置为固定宽度。然后我使用 jquery 对每个图像的宽度求和，并[`.width()`](http://api.jquery.com/width/)在页面加载后手动设置。这行得通。

# git - 我所在的文件夹在git中有什么意义吗？

> ID：15031646
> 
> 赞同：3
> 
> 时间：2013-02-22T19:18:45.057
> 
> 标签：git, directory, branch, git-checkout

我是 git 新手。边做边学。我有[这个](https://stackoverflow.com/questions/15030975/git-separate-folder-for-each-branch-setting-it-up "用于分支的单独文件夹")设置。现在假设我在`branch1`文件夹（git bash）上，喜欢`c:\branch1\`并执行`checkout master`. 它切换到`master`分支，但不更改文件夹。所以我所在的文件夹不是`master's`文件夹，也就是说`c:\master\`。它`branch1`的 s 文件夹。

我是否需要切换到`master's`文件夹才能对`master`分支文件进行任何处理？或者只是结帐就足够了。

可能是一个愚蠢的问题。:-) 但我试图理解这一点。所以想弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T04:59:55.100

如前所述，分支与文件夹**无关。**带有 git 的分支是表示“代码版本”的几种方式之一

例如当你

```
git checkout master 
```

你在告诉 git

> 告诉我`master`代码的版本

同样地

```
git checkout branch1 
```

正在告诉

> 告诉我`branch1`代码的版本

当您`git checkout`将适当的文件和文件夹转储到您的工作目录时，即包含该文件夹的`.git`文件夹。根据您的系统，该`.git`文件夹可能会被隐藏，但请注意这一点。

# titanium - 无法将光标移动到 Titanium.UI.TextArea 中的位置 0

> ID：15031658
> 
> 赞同：0
> 
> 时间：2013-02-22T19:19:15.030
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

*   我在模态窗口中有一个 TextArea。当显示模态窗口时，我希望将焦点设置到这个 TextArea。我还希望 TextArea 在显示时具有默认文本，并且光标位于该文本的开头。
*   当显示模态窗口时，我在 TextArea 上调用 focus() 并在 focus() 处理程序中，设置我想要的文本并调用 setSelection(0, 0) 将光标移动到位置 0。
*   这似乎不起作用，因为光标仍位于设置文本的末尾。
*   我正在使用最新版本的 SDK。
*   如果有人可以帮助我解决这个问题，那就太好了。谢谢！

Titanium SDK：3.0.2 目标平台：仅限 IOS

这是代码：

```
// 'statusUpdateArea' is my TextArea

$.tabbedBarNav.addEventListener('click',function(e) 
{
   statusUpdateArea.focus();
}

statusUpdateArea.addEventListener('focus',function() 
{
   statusUpdateArea.setValue(" -  I am here'");

   //API to set cursor at beginning doesn't work!!!!!! [or I don'tknow how to use it :(   ]
   statusUpdateArea.setSelection(0, 0);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T05:39:22.977

不要集中注意力。setSelection 将为您聚焦文本区域。聚焦会阻止正确设置选择。取消注释 .focus 调用以查看它不起作用。

试试下面的。它适用于我在 iOS 上使用 Titanium SDK 3.x。

```
var win = Ti.UI.createWindow({
    backgroundColor: '#fff'
});
var textArea = Ti.UI.createTextArea({
    value: 'Some text.'
});
win.add(textArea);
win.addEventListener('open', function(evt) {
    // textArea.focus();
    textArea.setSelection(0, 0);
});
win.open(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T06:02:10.503

默认使用hintText..你不能这样设置文本..实际的setSelection不适用于光标移动。它用于选择文本字段中的一部分值...所以您不能使用该方法...使用提示文本并让用户输入..稍后您可以将默认文本添加到文本字段的值中有用。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T21:39:47.287

我在 Appcelerator 开发论坛上得到了答案。IOS上的实现似乎有一个错误：

[Appcelerator 开发论坛](http://developer.appcelerator.com/question/148692/unable-to-move-cursor-to-position-0-in-titaniumuitextarea#answer-257392)

# javascript - 明确 ECMAScript/JavaScript 中“LexicalEnvironment”和“VariableEnvironment”之间的区别

> ID：15031667
> 
> 赞同：6
> 
> 时间：2013-02-22T19:19:38.477
> 
> 标签：javascript, ecmascript-5, ecma262

有人可以澄清这两者之间的区别是什么，因为它们存在于执行上下文中？我很难阅读[ECMA 262 v 5](http://www.ecma-international.org/ecma-262/5.1/#sec-10.3)规范并清楚地看到差异。

谢谢你，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-24T17:19:58.790

两者都是执行上下文的组件（相同类型），但它们用于不同的目的（[来自规范](http://www.ecma-international.org/ecma-262/5.1/#sec-10.3)）：

**词汇环境**

> 标识`Lexical Environment`用于解析此执行上下文中的代码所做的标识符引用。

**可变环境**

> 标识`Lexical Environment`其环境记录保存由此执行上下文中的 VariableStatements 和 FunctionDeclarations 创建的绑定。

下一段解释了为什么它们需要不同：

> 创建执行上下文时，它的 LexicalEnvironment 和 VariableEnvironment 组件*最初具有相同的值*。VariableEnvironment 组件的值*永远不会改变*，而 LexicalEnvironment 组件的值**可能会**在执行上下文中的代码执行期间发生变化。

这种情况并不经常发生，通常两者都指相同的`Lexical Environment`. [问题Why do catch clauses have their own lexical environment?](https://stackoverflow.com/q/15034864/1048572)中给出了改变 LexicalEnvironment 的一个很好的例子。- 见[第 12.14 节](http://www.ecma-international.org/ecma-262/5.1/#sec-12.14)。我可以在规范中找到发生这种情况的另一个地方是`With Statements`（[§12.10](http://www.ecma-international.org/ecma-262/5.1/#sec-12.10)），其中 an[`Object Environment Record`](http://www.ecma-international.org/ecma-262/5.1/#sec-10.2.1.2)动态用于标识符解析 - 但变量/函数声明是静态的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-24T17:06:27.523

据我了解，这些只是用于指代同一类型实体（词法环境）的不同名称。由于用途不同，它们有不同的名称。

`LexicalEnvironment`用于解析标识符，而`VariableEnvironment`用于声明变量和函数。

它们都引用了为每个执行上下文创建的词法环境（= 环境记录 + 可选的外部词法环境；又名作用域链）。

> 执行上下文的 LexicalEnvironment 和 VariableEnvironment 组件始终是 Lexical Environments。创建执行上下文时，它的 LexicalEnvironment 和 VariableEnvironment 组件最初具有相同的值。VariableEnvironment 组件的值永远不会改变，而 LexicalEnvironment 组件的值可能会在执行上下文中的代码执行期间发生变化

伪代码示例：

```
// VariableEnvironment (global) = { __outer__: null }
// LexicalEnvironment = VariableEnvironment (global)

(function foo() {

  // VariableEnvironment (A) = { x: undefined, __outer__: global }
  // LexicalEnvironment = VariableEnvironment (A)

  var x;

  (function bar(){

    // VariableEnvironment (B) = { y: undefined, __outer__: A }
    // LexicalEnvironment = VariableEnvironment (B)

    var y;

    x = 2;

    // VariableEnvironment (A) = { x: 2, __outer__: global }
    // LexicalEnvironment is still the same as VariableEnvironment (B)

  })();

})(); 
```

# java - Java Applets - 在不使用“画布”的情况下创建交互式交通灯？

> ID：15031669
> 
> 赞同：0
> 
> 时间：2013-02-22T19:19:40.953
> 
> 标签：java, applet

简而言之，我想设计一个显示带有三个相邻按钮的红绿灯的 Java 小程序。一个说红灯，一个说黄灯，一个说绿灯。

* * *

我的问题是：我不知道如何将每个按钮与正确的椭圆链接起来。所有的椭圆都属于同一个图形变量 g。如果我改变颜色，所有三个都会改变。

有一个名为 canvas 的超类，它可以帮助我将自己实体中的每个对象与我的知识分开，但我知道有一种更简单的方法。

我怎样才能做到这一点？

```
import java.awt.*;
import java.awt.event.*;
import java.applet.*;
import java.applet.Applet;

public class Traffic extends Applet
    implements ActionListener
{

    int colourNum; //global variable which is responible for changing the light

    Button bttn1 = new Button ("Stop Traffic");
    Button bttn2 = new Button ("Caution");
    Button bttn3 = new Button ("Proceed");

    public void init ()
    {
        setBackground (Color.lightGray);

        bttn1.addActionListener (this); // stop light
        bttn2.addActionListener (this); // yellow light
        bttn3.addActionListener (this); // green light

        add (bttn1);
        add (bttn2);
        add (bttn3);
    }

    public void paint (Graphics g)  // responsible for graphics "within" the window
    {
        g.setColor (Color.black);

        switch (colourNum)
        {
            case 1:
                g.setColor (Color.red);
                break;
        }
        g.fillOval (30, 40, 20, 20); // red light
        g.fillOval (30, 70, 20, 20); // yello light
        g.fillOval (30, 100, 20, 20); // green light
    }

    public void actionPerformed (ActionEvent evt)
    {
        if (evt.getSource () == bttn1)
            colourNum = 1;
        else if (evt.getSource () == bttn2)
            colourNum = 2;
        else
            colourNum = 3;

        repaint ();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:28:22.000

```
public void paint (Graphics g)  // responsible for graphics "within" the window
{
    g.setColor (Color.black);

    g.setColor(colourNum == 1? Color.red : Color.red.darker().darker());
    g.fillOval (30, 40, 20, 20); // red light
    g.setColor(colourNum == 2? Color.yellow : Color.yellow.darker().darker());
    g.fillOval (30, 70, 20, 20); // yello light
    g.setColor(colourNum == 3? Color.green : Color.green.darker().darker());
    g.fillOval (30, 100, 20, 20); // green light
} 
```

# c++ - 检测音频输出+语音合成库的建议

> ID：15031671
> 
> 赞同：0
> 
> 时间：2013-02-22T19:19:44.870
> 
> 标签：c++, windows, audio, speech-synthesis

我想检测我的电脑是否正在播放任何类型的音频（音乐/电影）。
我写了一个应用程序来通知我我的推特更新。现在我想为其添加语音合成，但我只想在没有音乐或电影播放的情况下播放消息。

虽然我使用的是 C#，但我不介意使用 C++ 进行检测然后集成它。

所以问题是：

1）如何检测音频输出？
2) 什么是 Windows 最好的免费语音合成库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T23:24:34.957

在浏览了 MSDN 一段时间后，我找到了解决方案。

使用环回录音，您可以收听输出到音频输出设备的内容。

[http://msdn.microsoft.com/en-gb/library/windows/desktop/dd316551(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd316551(v=vs.85).aspx)

此链接还引用了如何捕获流的示例：

[http://msdn.microsoft.com/en-gb/library/windows/desktop/dd370800(v=vs.85).aspx](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd370800(v=vs.85).aspx)

在这里，您可以通过调用获取缓冲区数据，如示例所示：

pCaptureClient->GetBuffer(...)

你所要做的就是检查这些字节的值。如果它们都是 0，那么就没有什么可玩的了。

对于语音合成，我使用了 SpeechSynthesizer .NET 类

[http://msdn.microsoft.com/en-us/library/system.speech.synthesis.speechsynthesizer.aspx](http://msdn.microsoft.com/en-us/library/system.speech.synthesis.speechsynthesizer.aspx)

# ios - UITextField 属性占位符没有效果

> ID：15031678
> 
> 赞同：14
> 
> 时间：2013-02-22T19:20:06.153
> 
> 标签：ios, uitextfield, nsattributedstring

我正在尝试使我的文本字段中的占位符斜体，并且由于我的应用程序针对的是 iOS 6.0 或更高版本，因此决定使用`attributedPlaceholder`属性而不是滚动更多自定义的东西。代码如下：

```
NSString *plString = @"optional";
NSAttributedString *placeholder = [[NSAttributedString alloc] initWithString:plString
        attributes:@{NSFontAttributeName : [UIFont fontWithName:@"HelveticaNeue-LightItalic" size:15]}];
for (UITextField *t in myTextfields){
    t.placeholder = plString;
    t.attributedPlaceholder = placeholder;
} 
```

然而占位符的样式仍然不是斜体，而是与常规文本相同，只是变暗了。我缺少什么来完成这项`NSAttributedString`工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-23T00:29:36.563

正如沃伦所指出的，目前无法按照您尝试的方式完成造型。一个好的解决方法是按照您希望占位符的外观设置文本字段的字体属性，然后在用户开始输入时更改文本字段的字体。看起来占位符和文本是不同的字体。

您可以通过创建文本字段的委托并使用 shouldChangeCharactersinRange 来做到这一点，如下所示：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{    
    // If there is text in the text field
    if (textField.text.length + (string.length - range.length) > 0) {
        // Set textfield font
        textField.font = [UIFont fontWithName:@"Font" size:14];
    } else {
        // Set textfield placeholder font (or so it appears)
        textField.font = [UIFont fontWithName:@"PlaceholderFont" size:14];
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-22T20:01:05.900

这几乎可以肯定是一个错误。该[属性的](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/occ/instp/UITextField/attributedPlaceholder)[文档`attributedPlaceholder`](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextField_Class/Reference/UITextField.html#//apple_ref/occ/instp/UITextField/attributedPlaceholder)声称无论前景色属性如何，都将使用灰色绘制字符串，但事实并非如此：您可以同时设置前景色和背景色。不幸的是，字体属性似乎被剥离并恢复为系统字体。

作为一种解决方法，我建议您`drawPlaceholderInRect:`自己覆盖并绘制占位符。此外，您应该为此提交一份 Radar，并包含一个演示该错误的最小示例项目。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-19T04:35:25.390

我自己偶然发现了这个问题。显然，占位符将采用分配给文本字段的任何字体。只需设置文本字段的字体就可以了。

For everything else, like the colour of the placeholder, I'd still go back to `attributedPlaceholder`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-23T17:03:12.413

iOS8/9/Swift 2.0 - working example

```
func colorPlaceholderText(){
    var multipleAttributes = [String : NSObject]()
    multipleAttributes[NSForegroundColorAttributeName] = UIColor.appColorCYAN()
    //OK - comment in if you want background color
    //multipleAttributes[NSBackgroundColorAttributeName] = UIColor.yellowColor()
    //OK - Adds underline
    //multipleAttributes[NSUnderlineStyleAttributeName] = NSUnderlineStyle.StyleDouble.rawValue

    let titleString = "Search port/country/vessel..."
    let titleAttributedString = NSAttributedString(string: titleString,
        attributes: multipleAttributes)

    self.textFieldAddSearch.attributedPlaceholder = titleAttributedString
} 
```

# c# - nunit 如何成功等待 async void 方法完成？

> ID：15031681
> 
> 赞同：35
> 
> 时间：2013-02-22T19:20:17.437
> 
> 标签：c#, .net, nunit, async-await

在 C# 中使用`async/await`时，一般规则是避免`async void`，因为这几乎是一劳永逸，`Task`如果没有从方法发送返回值，则应该使用 a。说得通。奇怪的是，本周早些时候我正在为我编写的一些`async`方法编写一些单元测试，并注意到 NUnit 建议将`async`测试标记为要么`void`或返回`Task`。然后我试了一下，果然成功了。这看起来很奇怪，因为 nunit 框架如何能够运行该方法并等待所有异步操作完成？如果它返回Task，它可以只是等待任务，然后做它需要做的事情，但是如果它返回void，它怎么能把它拉下来呢？

所以我破解了源代码并找到了它。我可以在一个小样本中重现它，但我根本无法理解他们在做什么。我想我对 SynchronizationContext 及其工作原理知之甚少。这是代码：

```
class Program
{
    static void Main(string[] args)
    {
        RunVoidAsyncAndWait();

        Console.WriteLine("Press any key to continue. . .");
        Console.ReadKey(true);
    }

    private static void RunVoidAsyncAndWait()
    {
        var previousContext = SynchronizationContext.Current;
        var currentContext = new AsyncSynchronizationContext();
        SynchronizationContext.SetSynchronizationContext(currentContext);

        try
        {
            var myClass = new MyClass();
            var method = myClass.GetType().GetMethod("AsyncMethod");
            var result = method.Invoke(myClass, null);
            currentContext.WaitForPendingOperationsToComplete();
        }
        finally
        {
            SynchronizationContext.SetSynchronizationContext(previousContext);
        }
    }
}

public class MyClass
{
    public async void AsyncMethod()
    {
        var t = Task.Factory.StartNew(() =>
        {
            Thread.Sleep(1000);
            Console.WriteLine("Done sleeping!");
        });

        await t;
        Console.WriteLine("Done awaiting");
    }
}

public class AsyncSynchronizationContext : SynchronizationContext
{
    private int _operationCount;
    private readonly AsyncOperationQueue _operations = new AsyncOperationQueue();

    public override void Post(SendOrPostCallback d, object state)
    {
        _operations.Enqueue(new AsyncOperation(d, state));
    }

    public override void OperationStarted()
    {
        Interlocked.Increment(ref _operationCount);
        base.OperationStarted();
    }

    public override void OperationCompleted()
    {
        if (Interlocked.Decrement(ref _operationCount) == 0)
            _operations.MarkAsComplete();

        base.OperationCompleted();
    }

    public void WaitForPendingOperationsToComplete()
    {
        _operations.InvokeAll();
    }

    private class AsyncOperationQueue
    {
        private bool _run = true;
        private readonly Queue _operations = Queue.Synchronized(new Queue());
        private readonly AutoResetEvent _operationsAvailable = new AutoResetEvent(false);

        public void Enqueue(AsyncOperation asyncOperation)
        {
            _operations.Enqueue(asyncOperation);
            _operationsAvailable.Set();
        }

        public void MarkAsComplete()
        {
            _run = false;
            _operationsAvailable.Set();
        }

        public void InvokeAll()
        {
            while (_run)
            {
                InvokePendingOperations();
                _operationsAvailable.WaitOne();
            }

            InvokePendingOperations();
        }

        private void InvokePendingOperations()
        {
            while (_operations.Count > 0)
            {
                AsyncOperation operation = (AsyncOperation)_operations.Dequeue();
                operation.Invoke();
            }
        }
    }

    private class AsyncOperation
    {
        private readonly SendOrPostCallback _action;
        private readonly object _state;

        public AsyncOperation(SendOrPostCallback action, object state)
        {
            _action = action;
            _state = state;
        }

        public void Invoke()
        {
            _action(_state);
        }
    }
} 
```

运行上述代码时，您会注意到 Done Sleeping 和 Done awaiting 消息显示*在*Press any key to continue 消息之前，这意味着异步方法正在等待。

我的问题是，有人可以解释一下这里发生了什么吗？究竟是什么`SynchronizationContext`（我知道它用于将工作从一个线程发布到另一个线程）但我仍然对我们如何等待所有工作完成感到困惑。提前致谢！！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-22T19:56:48.123

A`SynchronizationContext`允许将工作发布到由另一个线程（或线程池）处理的队列——通常 UI 框架的消息循环用于此目的。`async`/`await`功能在您等待的任务完成后在内部使用当前同步上下文返回到正确的线程。

该类`AsyncSynchronizationContext`实现了自己的消息循环。发布到此上下文的工作将添加到队列中。当您的程序调用`WaitForPendingOperationsToComplete();`时，该方法通过从队列中获取工作并执行它来运行消息循环。如果在 上设置断点`Console.WriteLine("Done awaiting");`，您将看到它在`WaitForPendingOperationsToComplete()`方法内的主线程上运行。

此外，`async`/`await`功能调用`OperationStarted()`/`OperationCompleted()`方法来通知方法`SynchronizationContext`何时`async void`开始或完成执行。

使用这些通知来记录正在运行但尚未完成`AsyncSynchronizationContext`的方法的数量。`async`当此计数达到零时，该`WaitForPendingOperationsToComplete()`方法停止运行消息循环，并且控制流返回给调用者。

要在调试器中查看此过程，请在同步上下文的`Post`、`OperationStarted`和方法中设置断点。`OperationCompleted`然后逐步`AsyncMethod`调用：

*   当`AsyncMethod`被调用时，.NET 首先调用`OperationStarted()`
    *   这会将 设置`_operationCount`为 1。
*   然后主体`AsyncMethod`开始运行（并启动后台任务）
*   在`await`语句中，`AsyncMethod`由于任务尚未完成，让出控制权
*   `currentContext.WaitForPendingOperationsToComplete();`被调用
*   队列中还没有可用的操作，所以主线程在`_operationsAvailable.WaitOne();`
*   在后台线程上：
    *   在某个时候任务完成睡眠
    *   输出：`Done sleeping!`
    *   委托完成执行，任务被标记为完成
    *   该`Post()`方法被调用，将表示剩余部分的延续加入队列`AsyncMethod`
*   主线程被唤醒，因为队列不再为空
*   消息循环运行延续，从而恢复执行`AsyncMethod`
*   输出：`Done awaiting`
*   `AsyncMethod`完成执行，导致 .NET 调用`OperationComplete()`
    *   the`_operationCount`减为 0，这将消息循环标记为完成
*   控制返回到消息循环
*   消息循环结束，因为它被标记为完成，并`WaitForPendingOperationsToComplete`返回给调用者
*   输出：`Press any key to continue. . .`

# php - 从 Laravel 访问 session.upload_progress

> ID：15031685
> 
> 赞同：0
> 
> 时间：2013-02-22T19:20:28.663
> 
> 标签：php, laravel

标题说明了一切。由于 laravel 的会话抽象层，我不知道如何在 php 5.4 中检索 session.upload_progress

当我尝试打印 $_SESSION 它返回一个空数组

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:51:52.560

好吧，我回答了我自己的问题，意识到我颠倒了 Form::hidden 方法的“值和名称”值。

但我仍然必须设置 PHP 会话 ID

session_id($_COOKIE["PHPSESSID"]);

session_start();

在我能够获得会话内容之前......必须有更好的方法吗？

# javascript - 具有 localhost 或 LAN 服务器名称的 IE8 / IE9 上的 localStorage 不起作用

> ID：15031686
> 
> 赞同：4
> 
> 时间：2013-02-22T19:20:38.320
> 
> 标签：javascript, html, local-storage

我正在使用[https://github.com/jarednova/jquery-total-storage](https://github.com/jarednova/jquery-total-storage)来访问 localStorage。在 IE8 和 IE9 中，我遇到了一个奇怪的问题，即使我只是使用普通的旧 javascript，它似乎也会发生。

如果我去`http://foo`并使用 $.totalStorage，它会在该会话中持续存在，但当我关闭并打开 IE 时它就消失了。

如果我去`http://foo.mydomain.com`使用 $.totalStorage，当我关闭和打开 IE 时它仍然存在。

当我从 Visual Studio 启动（本地主机）调试时，它甚至会发生！

在 Firefox / Chrome 中，无论我是 go foo 还是 foo.mydomain.com，它都会在会话之间持续存在

这是一个已知的问题？有解决方法吗？

**更新：**要重现这一点，只需将此脚本块添加到您的页面，然后从`http://localhost`or提供它`http://yourpcname`：

```
<script>
    var storage = window.localStorage;
    alert (storage.foo);
    storage.foo = 'bar!';
</script> 
```

第一次在本地主机上运行它时，你会得到“未定义”。然后，如果您刷新，您将获得“bar！”。然后，如果您关闭 IE 并再次进入，您将得到“未定义”而不是“栏！”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:27:07.473

听起来就像您在每次启动调试器时创建一个快速 IIS 或“Visual Studio 开发服务器”。

如果您托管您的 Web 应用程序而没有在每次调试时创建一个 express 实例，并且通过 IIS 设置一个永久应用程序，那么这不应该发生。

# windows - 如何以编程方式更改第三个监视器

> ID：15031687
> 
> 赞同：4
> 
> 时间：2013-02-22T19:20:51.673
> 
> 标签：windows, automation, multiple-monitors, video-card

当我使用笔记本电脑时，我使用 3 个显示器：

1.  笔记本电脑显示器
2.  第二台显示器（通过 VGA 连接）
3.  电视（通过 HDMI 连接）

我的显卡不支持3台显示器，所以我经常从2台切换到3台：当我在电脑上时，我使用第二台显示器，当我想看一些电影等时，我使用第三台。

我目前必须转到*屏幕分辨率*，选择未使用的显示器，然后选择*将桌面扩展到此显示器*。

**有没有办法可以自动化它？**

是否有任何命令行工具或任何允许这样做的 Windows API？

**编辑：**
[Display Changer](http://12noon.com/)似乎可以满足我的需要，但问题是它只检测到工作监视器。未检测到第三台显示器（当前未使用），因此我无法连接它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-13T02:27:39.837

DisplaySwitch.exe 上的一点 RE 表明它调用

```
SetDisplayConfig(0, NULL, NULL, NULL, 0x888) 
```

在我的计算机上将其设置为扩展。

从那里，一点点挖掘显然让我看到了[SetDisplayConfig](http://msdn.microsoft.com/en-us/library/ff569533%28v=vs.85%29.aspx "设置显示配置")文档，还有[这个 SO 页面](https://stackoverflow.com/questions/6590939/how-to-set-display-settings-to-extend-mode-in-windows-7-using-c)，其中包含一些示例代码，可以查询您当前的显示状态并添加实际标志以更改它们（如果您想这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:27:33.997

我回答了一个[类似的问题](https://stackoverflow.com/questions/12547329/execute-automatic-change-connected-displays-in-windows-8/13212539#13212539)，建议尝试[UltraMon](http://www.realtimesoft.com/ultramon/tour/display_profiles.asp)或使用他们的 SDK，但您也可以直接使用[`ChangeDisplaySettingsEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183413%28v=vs.85%29.aspx). 另一位用户[Sai](https://stackoverflow.com/users/822170/sai)引用了一个[显示该函数使用的示例](http://www.codeproject.com/Articles/178027/How-to-create-a-display-switcher-for-Windows-XP)。

# python - 使用 pip 将 Python 包从本地文件系统文件夹安装到 virtualenv

> ID：15031694
> 
> 赞同：442
> 
> 时间：2013-02-22T19:21:34.090
> 
> 标签：python, pip

是否可以使用本地文件系统中的 pip 安装软件包？

我已经`python setup.py sdist`为我的包运行了，它创建了适当的 tar.gz 文件。该文件存储在我的系统上`/srv/pkg/mypackage/mypackage-0.1.0.tar.gz`。

现在在虚拟环境中，我想安装来自 pypi 或来自特定本地位置的软件包`/srv/pkg`。

这可能吗？

**PS** 我知道我可以指定`pip install /srv/pkg/mypackage/mypackage-0.1.0.tar.gz`。这将起作用，但我正在谈论使用该`/srv/pkg`位置作为 pip 搜索的另一个地方，如果我键入`pip install mypackage`.

* * *

## 回答 #1

> 赞同：528
> 
> 时间：2013-11-18T09:10:41.790

关于什么：：

```
pip install --help
...
  -e, --editable <path/url>   Install a project in editable mode (i.e. setuptools
                              "develop mode") from a local project path or a VCS url. 
```

例如，`pip install -e /srv/pkg`

其中 /srv/pkg 是可以找到“setup.py”的顶级目录。

* * *

## 回答 #2

> 赞同：191
> 
> 时间：2013-02-22T19:32:09.880

我很确定您正在寻找的东西称为`--find-links`选项。

你可以做

```
pip install mypackage --no-index --find-links file:///srv/pkg/mypackage 
```

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2015-09-01T11:38:43.623

我正在安装`pyfuzzy`，但不在 PyPI 中；它返回消息：`No matching distribution found for pyfuzzy`。

我尝试了接受的答案

```
pip install  --no-index --find-links=file:///Users/victor/Downloads/pyfuzzy-0.1.0 pyfuzzy 
```

但它也不起作用并返回以下错误：

> 忽略索引：[https](https://pypi.python.org/simple) : //pypi.python.org/simple 收集 pyfuzzy 找不到满足 pyfuzzy 要求的版本（来自版本：）没有找到 pyfuzzy 的匹配分布

最后，我在那里找到了一个简单的好方法： [https ://pip.pypa.io/en/latest/reference/pip_install.html](https://pip.pypa.io/en/latest/reference/pip_install.html)

```
Install a particular source archive file.
$ pip install ./downloads/SomePackage-1.0.4.tar.gz
$ pip install http://my.package.repo/SomePackage-1.0.4.zip 
```

所以以下命令对我有用：

```
pip install ../pyfuzzy-0.1.0.tar.gz. 
```

希望它可以帮助你。

* * *

## 回答 #4

> 赞同：55
> 
> 时间：2019-08-28T18:24:25.530

从[安装包页面](https://packaging.python.org/tutorials/installing-packages/#installing-from-a-local-src-tree)，您可以简单地运行：

> pip install /srv/pkg/mypackage

其中*/srv/pkg/mypackage*是包含*setup.py*的目录。

* * *

另外¹，您可以从存档文件安装它：

> pip install ./mypackage-1.0.4.tar.gz

¹ 虽然在问题中注明，但由于其受欢迎程度，也包括在内。

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2014-10-15T23:17:08.780

这是我最终使用的解决方案：

```
import pip

def install(package):
    # Debugging
    # pip.main(["install", "--pre", "--upgrade", "--no-index",
    #         "--find-links=.", package, "--log-file", "log.txt", "-vv"])
    pip.main(["install", "--upgrade", "--no-index", "--find-links=.", package])

if __name__ == "__main__":
    install("mypackagename")
    raw_input("Press Enter to Exit...\n") 
```

[我从pip install examples](http://pip.readthedocs.org/en/latest/reference/pip_install.html#pip-install-examples)以及[Rikard's answer](https://stackoverflow.com/a/15950647/1267255) on [another question](https://stackoverflow.com/questions/12332975/installing-python-module-within-code)拼凑起来。“--pre”参数允许您安装非生产版本。“--no-index”参数避免搜索 PyPI 索引。“--find-links=.” 参数在本地文件夹中搜索（这可以是相对的或绝对的）。我使用“--log-file”、“log.txt”和“-vv”参数进行调试。“--upgrade”参数允许您安装较旧版本的较新版本。

我还找到了卸载它们的好方法。当您有多个不同的 Python 环境时，这很有用。这是相同的基本格式，只是使用“卸载”而不是“安装”，并采取了安全措施来防止意外卸载：

```
import pip

def uninstall(package):
    response = raw_input("Uninstall '%s'? [y/n]:\n" % package)
    if "y" in response.lower():
        # Debugging
        # pip.main(["uninstall", package, "-vv"])
        pip.main(["uninstall", package])
    pass

if __name__ == "__main__":
    uninstall("mypackagename")
    raw_input("Press Enter to Exit...\n") 
```

本地文件夹包含以下文件：install.py、uninstall.py、mypackagename-1.0.zip

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2017-07-11T10:55:47.523

一个选项[--find-links](https://pip.readthedocs.io/en/latest/reference/pip_install/#pip-install-examples)可以完成这项工作，它可以从`requirements.txt`文件中工作！

您可以将包档案放在某个文件夹中，并在不更改需求文件的情况下获取最新的档案，例如`requirements`：

```
.
└───requirements.txt
└───requirements
    ├───foo_bar-0.1.5-py2.py3-none-any.whl
    ├───foo_bar-0.1.6-py2.py3-none-any.whl
    ├───wiz_bang-0.7-py2.py3-none-any.whl
    ├───wiz_bang-0.8-py2.py3-none-any.whl
    ├───base.txt
    ├───local.txt
    └───production.txt 
```

现在`requirements/base.txt`说：

```
--find-links=requirements
foo_bar
wiz_bang>=0.8 
```

一种更新专有软件包的巧妙方法，只需将新软件包放入文件夹中

通过这种方式，您可以使用相同的单个调用从`local folder`AND安装软件包：`pypi``pip install -r requirements/production.txt`

PS。请参阅我[的 cookiecutter-djangopackage](https://github.com/wooyek/cookiecutter-django-app/tree/develop/%7B%7Bcookiecutter.project_slug%7D%7D/requirements) fork 以了解如何拆分需求和使用基于文件夹的需求组织。

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-12-31T00:59:11.500

假设你有 virtualenv 和一个`requirements.txt`文件，那么你可以在这个文件中定义获取包的位置：

```
# Published pypi packages 
PyJWT==1.6.4
email_validator==1.0.3
# Remote GIT repo package, this will install as django-bootstrap-themes
git+https://github.com/marquicus/django-bootstrap-themes#egg=django-bootstrap-themes
# Local GIT repo package, this will install as django-knowledge
git+file:///soft/SANDBOX/python/django/forks/django-knowledge#egg=django-knowledge 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2020-01-10T14:36:17.260

要仅从本地安装，您需要 2 个选项：

*   `--find-links`: 在哪里查找依赖项。不需要`file://`别人提到的前缀。
*   `--no-index`：不要在 pypi 索引中查找缺少的依赖项（依赖项未安装且不在`--find-links`路径中）。

因此，您可以从以下任何文件夹运行：

```
pip install --no-index --find-links /srv/pkg /path/to/mypackage-0.1.0.tar.gz 
```

如果您的 mypackage 设置正确，它将列出其所有依赖项，并且如果您使用 pip download 下载级联依赖项（即依赖项的依赖项等），一切都会正常工作。

如果您想在可访问的情况下使用 pypi 索引，但如果不能访问则回退到本地车轮，您可以删除`--no-index`并添加`--retries 0`. 当它尝试检查 pypi 是否缺少依赖项（未安装的依赖项）时，您会看到 pip 暂停一段时间，当它发现无法访问它时，将回退到本地。似乎没有办法告诉 pip “先查找本地的，然后查找索引”。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2018-11-05T19:48:23.193

在目录中有需求`requirements.txt`并`egg_dir`作为目录

您可以构建本地缓存：

`$ pip download -r requirements.txt -d eggs_dir`

然后，使用该“缓存”很简单，例如：

`$ pip install -r requirements.txt --find-links=eggs_dir`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-08T12:29:03.487

我一直在努力实现一些非常简单的事情，但惨遭失败，可能我很愚蠢。

无论如何，如果你有一个脚本/`Dockerfile`下载一个 python 包 zip 文件（例如从 GitHub），然后你想安装它，你可以使用`file:///`前缀来安装它，如下*例*所示：

```
$ wget https://example.com/mypackage.zip
$ echo "${MYPACKAGE_MD5}  mypackage.zip" | md5sum --check -
$ pip install file:///.mypackage.zip 
```

**注意**：我知道您可以使用直接安装软件包，但在我的情况下，我想验证校验和（从不偏执），并且在尝试使用 pip 提供的各种选项/片段`pip install https://example.com/mypackage.zip`时失败了。`#md5`

直接用`pip`. 我只是想通过校验和并在安装*之前*`pip`验证 zip 是否匹配。

 *我可能做了一些非常愚蠢的事情，但最后我放弃了，选择了这个。我希望它可以帮助其他尝试做类似事情的人。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-09T20:31:18.563

就我而言，这是因为这个库依赖于另一个我尚未安装的本地库。使用 pip 安装依赖项，然后安装依赖库，解决了这个问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-24T03:30:31.740

您需要的是`--find-links`pip install。

> -f, --find-links 如果是 html 文件的 url 或路径，则解析指向档案的链接。如果本地路径或 file:// url 是目录，则在目录列表中查找存档。

在我的情况下，在目录中生成`python -m build`tar.gz 包（和`whl`文件）之后`./dist`。

```
pip install --no-index -f ./dist YOUR_PACKAGE_NAME 
```

里面的任何tar.gz python包`./dist`都可以通过这种方式安装。

但是如果你的包有依赖，这个命令会提示错误。要解决这个问题，您可以`pip install`从官方 pypi 源中获取这些部门，然后`--no-deps`像这样添加

```
pip install --no-index --no-deps -f ./dist YOUR_PACKAGE_NAME 
```

或将您的 deps 包复制到 ./dist 目录。*

# jboss - ClassNotFoundException on com.sun.jersey.spi.container.servlet.ServletContainer

> ID：15031697
> 
> 赞同：4
> 
> 时间：2013-02-22T19:21:46.883
> 
> 标签：jboss, jboss7.x, jboss-eap-6

I am migrating project from jBoss-eap-5.1 to jboss-eap-6.0\. I have defined jersey jars in the modules directory of jboss as follows:

```
com
|_jersey
  |_jersey-core
  |_jersey-client
  |_jersey-server
  |_jersey-servlet 
```

In my project .pom file i defined the jars as follows:

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-servlet</artifactId>
    <version>1.10</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-core</artifactId>
    <version>${jersey-version}</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-client</artifactId>
    <version>${jersey-version}</version>
    <scope>test</scope>
</dependency> 
```

However, when I try to deploy, I get the following error on ServletContainer class:

```
13:03:29,908 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC000001: Failed to start service jboss.deployment.subunit."ApiEar-2.0.0-SNAPSHOT.ear"."ApiService-2.
0.0-SNAPSHOT.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.subunit."ApiEar-2.0.0-SNAPSHOT.ear"."ApiService-2.0.0-SNAPSHOT.war".POST_MODULE
: JBAS018733: Failed to process phase POST_MODULE of subdeployment "ApiService-2.0.0-SNAPSHOT.war" of deployment "ApiEar-2.0.0-SNAPSHOT.ear"
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:123) [jboss-as-server-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]

        at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
        at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA-redhat-1.jar:1.0.2.GA-redhat-1]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_32-ea]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_32-ea]
        at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_32-ea]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: java.lang.ClassNotFoundException: com.sun.jersey.spi.container.servlet.ServletContainer from [Modu
le "deployment.ApiEar-2.0.0-SNAPSHOT.ear.ApiService-2.0.0-SNAPSHOT.war:main" from Service Module Loader]
        at org.jboss.as.jaxrs.deployment.JaxrsScanningProcessor.checkDeclaredApplicationClassAsServlet(JaxrsScanningProcessor.java:295)
        at org.jboss.as.jaxrs.deployment.JaxrsScanningProcessor.scanWebDeployment(JaxrsScanningProcessor.java:160)
        at org.jboss.as.jaxrs.deployment.JaxrsScanningProcessor.deploy(JaxrsScanningProcessor.java:109)
        at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:116) [jboss-as-server-7.1.2.Final-redhat-1.jar:7.1.2.Final-redhat-1]

        ... 5 more 
```

Initially, I was getting this error when I did not define jersey-servlet, but I did some searching, and presumably, jersey-servlet.jar is the one that contains that class. However, that did solve the error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:18:15.690

I have solved the issue by adding this dependencies into my manifest.mf file. In my .pom file I added the build plugin:

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-ear-plugin</artifactId>
    <configuration>
         <archive>
             <manifestEntries>
                  <Dependencies>com.jersey.jersey-server,com.jersey.jersey-client,com.jersey.jersey-json</Dependencies>
             </manifestEntries>
         </archive>
    </configuration>
</plugin> 
```

that added references to the needed .jar files in my manifest file

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T21:24:38.723

Not an answer, but I believe this was implemented in jersey in version 10\. That is when big overhaul of library happened

# version - Nuget 安装错误的包版本

> ID：15031703
> 
> 赞同：3
> 
> 时间：2013-02-22T19:22:07.460
> 
> 标签：version, nuget, signalr

SignalR 1.0.0 版本已经出，但我想安装旧版本 1.0.0-rc1。

我使用[了这个命令](http://nuget.org/packages/Microsoft.AspNet.SignalR.Client/1.0.0-rc1)，但 NuGet 似乎忽略了版本标志并安装了 1.0.0。

```
PM> Install-Package Microsoft.AspNet.SignalR -Version 1.0.0-rc1 -Pre
Attempting to resolve dependency 'Microsoft.AspNet.SignalR.JS (≥ 1.0.0-rc1)'.
Attempting to resolve dependency 'jQuery (≥ 1.6.4)'.
Attempting to resolve dependency 'Microsoft.AspNet.SignalR.SystemWeb (≥ 1.0.0-rc1)'.
Attempting to resolve dependency 'Microsoft.AspNet.SignalR.Owin (≥ 1.0.0)'.
Attempting to resolve dependency 'Microsoft.AspNet.SignalR.Core (≥ 1.0.0)'.
Attempting to resolve dependency 'Newtonsoft.Json (≥ 4.5.11)'.
Attempting to resolve dependency 'Owin (≥ 1.0)'.
Attempting to resolve dependency 'Microsoft.Owin.Host.SystemWeb (≥ 1.0.0)'.
Attempting to resolve dependency 'Microsoft.Web.Infrastructure (≥ 1.0.0.0)'.
'Microsoft.AspNet.SignalR 1.0.0-rc1' already installed.
Successfully added 'Microsoft.AspNet.SignalR 1.0.0-rc1' to GeoMVC. 
```

最后一行声称 1.0.0-rc1 已成功安装，但显然 NuGet 正在解析 1.0.0 而不是 1.0.0-rc1 的依赖关系。当我查看项目中的引用时，它们是 1.0.0 版。

我尝试使用卸载软件包`uninstall-package Microsoft.AspNet.SignalR -force`然后重新安装它。和上面一样。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T20:37:32.800

发生这种情况的原因是因为 SignalR 1.0.0-rc2 上的依赖项都是 >= 1.0.0-rc2 所以当它自动解析包时，它会将它们解析为 rtw 版本。

没有神奇或简单的方法可以解决此问题，但解决方法是从基础安装软件包。例如，首先安装核心组件，然后按照自己的方式向上工作。

```
Install-Package Microsoft.AspNet.SignalR.JS -Version 1.0.0-rc2 -Pre  
Install-Package Microsoft.Owin.Host.SystemWeb -Version 1.0.0-rc2 -Pre  
Install-Package Microsoft.AspNet.SignalR.Core -Version 1.0.0-rc2 -Pre  
Install-Package Microsoft.AspNet.SignalR.Owin -Version 1.0.0-rc2 -Pre  
Install-Package Microsoft.AspNet.SignalR.SystemWeb -Version 1.0.0-rc2 -Pre  
Install-Package Microsoft.AspNet.SignalR-Version 1.0.0-rc2 -Pre 
```

我相信这一切都是正确的。如果我忘记了什么，请告诉我。

希望这可以帮助！

# delphi - 如何解决 Delphi 无法准确处理日期时间操作的问题？

> ID：15031706
> 
> 赞同：12
> 
> 时间：2013-02-22T19:22:19.570
> 
> 标签：delphi, time, delphi-2010

我是 Delphi 的新手（现在已经在其中编程了大约 6 个月）。到目前为止，这是一次非常令人沮丧的经历，其中大部分来自 Delphi 在处理日期和时间方面的糟糕程度。也许我认为这很糟糕，因为我不知道如何正确使用 TDate 和 TTime，我不知道。这是我现在发生的事情：

```
// This shows 570, as expected
ShowMessage(IntToStr(MinutesBetween(StrToTime('8:00'), StrToTime('17:30'))));

// Here I would expect 630, but instead 629 is displayed. WTF!?
ShowMessage(IntToStr(MinutesBetween(StrToTime('7:00'), StrToTime('17:30')))); 
```

这不是我使用的确切代码，所有内容都在变量中并在另一个上下文中使用，但我认为您可以看到问题所在。为什么这个计算是错误的？我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-22T19:28:58.547

给定

```
a := StrToTime('7:00');
b := StrToTime('17:30');

ShowMessage(FloatToStr(a));
ShowMessage(FloatToStr(b)); 
```

你的代码，使用`MinutesBetween`，有效地做到了这一点：

```
ShowMessage(IntToStr(trunc(MinuteSpan(a, b)))); // Gives 629 
```

但是，四舍五入可能会更好：

```
ShowMessage(IntToStr(round(MinuteSpan(a, b)))); // Gives 630 
```

浮点值实际上是什么？

```
ShowMessage(FloatToStr(MinuteSpan(a, b))); // Gives 630 
```

所以你显然在这里遇到了传统的浮点问题。

**更新：**

的主要好处`Round`是，如果分钟跨度非常接近整数，则舍入值将保证为该整数，而截断值很可能是前一个整数。

这样做的主要好处`Trunc`是你可能真的想要这种逻辑：事实上，如果你在五天内就满 18 岁，在法律上你仍然不能申请瑞典驾照。

所以你如果你想使用`Round`而不是`Trunc`，你可以添加

```
function MinutesBetween(const ANow, AThen: TDateTime): Int64;
begin
  Result := Round(MinuteSpan(ANow, AThen));
end; 
```

到你的单位。然后标识符`MinutesBetween`将引用同一单元中的这个，而不是`DateUtils`. 一般规则是编译器将使用它最近找到的函数。所以，例如，如果你把这个函数放在你自己的 unit`DateUtilsFix`中，那么

```
implementation

uses DateUtils, DateUtilsFix 
```

将使用新的`MinutesBetween`，因为`DateUtilsFix`出现在 的右侧`DateUtils`。

**更新 2：**

另一种可行的方法可能是

```
function MinutesBetween(const ANow, AThen: TDateTime): Int64;
var
  spn: double;
begin
  spn := MinuteSpan(ANow, AThen);
  if SameValue(spn, round(spn)) then
    result := round(spn)
  else
    result := trunc(spn);
end; 
```

这将返回`round(spn)`跨度是否在整数的模糊范围内，`trunc(spn)`否则返回。

例如，使用这种方法

```
07:00:00 and 07:00:58 
```

将产生 0 分钟，就像`trunc`基于原始的版本一样，就像瑞典的 Trafikverket 一样。但它不会受到引发 OP 问题的问题的影响。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-22T19:36:11.533

这是在最新版本的 Delphi 中解决的问题。因此，您可以升级，也可以直接使用 Delphi 2010 中的新代码。例如，该程序会产生您期望的输出：

```
{$APPTYPE CONSOLE}
uses
  SysUtils, DateUtils;

function DateTimeToMilliseconds(const ADateTime: TDateTime): Int64;
var
  LTimeStamp: TTimeStamp;
begin
  LTimeStamp := DateTimeToTimeStamp(ADateTime);
  Result := LTimeStamp.Date;
  Result := (Result * MSecsPerDay) + LTimeStamp.Time;
end;

function MinutesBetween(const ANow, AThen: TDateTime): Int64;
begin
  Result := Abs(DateTimeToMilliseconds(ANow) - DateTimeToMilliseconds(AThen))
    div (MSecsPerSec * SecsPerMin);
end;

begin
  Writeln(IntToStr(MinutesBetween(StrToTime('7:00'), StrToTime('17:30'))));
  Readln;
end. 
```

* * *

Delphi 2010 代码`MinutesBetween`如下所示：

```
function SpanOfNowAndThen(const ANow, AThen: TDateTime): TDateTime;
begin
  if ANow < AThen then
    Result := AThen - ANow
  else
    Result := ANow - AThen;
end;

function MinuteSpan(const ANow, AThen: TDateTime): Double;
begin
  Result := MinsPerDay * SpanOfNowAndThen(ANow, AThen);
end;

function MinutesBetween(const ANow, AThen: TDateTime): Int64;
begin
  Result := Trunc(MinuteSpan(ANow, AThen));
end; 
```

因此，`MinutesBetween`有效地归结为两个日期/时间值的浮点减法。由于浮点运算固有的不精确性，这种减法可以产生一个略高于或低于真实值的值。当它低于真实值时，使用`Trunc`将带你一路下降到前一分钟。只需替换`Trunc`为即可`Round`解决问题。

* * *

碰巧最新的 Delphi 版本，彻底检查日期/时间计算。有重大变化`DateUtils`。分析起来有点困难，但新版本依赖于`DateTimeToTimeStamp`. 这会将值的时间部分转换为自午夜以来的毫秒数。它是这样的：

```
function DateTimeToTimeStamp(DateTime: TDateTime): TTimeStamp;
var
  LTemp, LTemp2: Int64;
begin
  LTemp := Round(DateTime * FMSecsPerDay);
  LTemp2 := (LTemp div IMSecsPerDay);
  Result.Date := DateDelta + LTemp2;
  Result.Time := Abs(LTemp) mod IMSecsPerDay;
end; 
```

注意使用`Round`. 使用`Round`而不是最新的 Delphi 代码以健壮的方式`Trunc`处理的原因。`MinutesBetween`

* * *

假设您现在无法升级，我将处理这样的问题：

1.  保持您的代码不变。继续打电话`MinutesBetween`等。
2.  当您进行升级时，您的调用`MinutesBetween`etc. 的代码现在可以工作了。
3.  [同时用代码钩子](https://stackoverflow.com/questions/8978177/patch-routine-call-in-delphi#answer-8978266)修复`MinutesBetween`等。当您确实要升级时，您只需卸下挂钩即可。

# batch-file - Bat按第n个字符或单词将文件排序到名为“n”的文件夹中？

> ID：15031711
> 
> 赞同：1
> 
> 时间：2013-02-22T19:22:58.910
> 
> 标签：batch-file, file-organization

我正在尝试制作一个 .bat 将大量标记为“（日期）（客户）-（文档标题）.pdf”的文件排序，例如“12-21-11 Thompson - Case Management.pdf”到标题为的文件夹中客户。到目前为止，我已经得到：

```
for /f "tokens=2* delims= " %%b in ('dir /b *.pdf') do (
    md %%b 
```

因此 %%b 是客户端名称，例如“Thompson”，并且创建了相应的文件夹，但我不确定如何`move`使它只考虑 %%b。“-”之后的标题对于每个文件都不一致，所以类似的东西`move "%%a %%b %%c %%d"`并不总是有效。有没有办法做到这一点？

或者，如果更容易，有没有办法在排序文件时只考虑第 10 个字符？所以“12-21-11 Thompson - Case Management”可以分类到一个名为“T”的文件夹中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:47:24.337

未测试：

```
 for /f "tokens=2* delims= " %%b in ('dir /b *.pdf') do (
        md %%b > nul 2>&1
        for /f %%F in ('dir /b /a:-d *%%b*.pdf') do (
           move %%F %%b
        )

    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T15:06:14.470

使用简单的 FOR 循环列出文件，并使用内部 FOR /F 循环解析出客户端名称。

```
for %%F in (*.pdf) do for /f "tokens=2" %%A in ("%%F") do (
  if not exist "%%A\" md "%%A"
  move "%%F" "%%A"
) 
```

# javascript - 没有提交表单的引导html单击按钮

> ID：15031712
> 
> 赞同：7
> 
> 时间：2013-02-22T19:23:02.390
> 
> 标签：javascript, html, forms, button, twitter-bootstrap

这是我的代码

```
 <form class="form-horizontal">

          <div class="control-group">
            <div class="controls">
              <button onclick="javascript:add_user_group(2);" class="btn">add</button>
            </div>
          </div>

        <table id="users-table" class="table table-striped" >
          <thead>
            <tr>
              <th>User Name</th>
              <th>Delete</th>            
            </tr>
          </thead>
          <tbody>

          </tbody>
        </table>

      </form> 
```

我只想在单击添加按钮时向表中添加新行，但似乎单击添加按钮会触发表单提交。

不只是一个按钮

```
 type=submit 
```

提交表格。或者表单中的任何按钮都会触发表单提交？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2014-09-24T12:42:25.240

无需使用 Javascript。只需设置`type="button"`为覆盖隐式`type="submit"`. 这也可以在此处提到的 HTML5 规范中找到：[https ://stackoverflow.com/a/9643866/2175370](https://stackoverflow.com/a/9643866/2175370)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-22T19:37:04.993

在`false`调用的函数中返回`onclick`将阻止表单提交。:)

```
onclick="javascript:add_user_group(2);return false;" 
```

# php - 如何使用多维数组回显复选框组

> ID：15031716
> 
> 赞同：-1
> 
> 时间：2013-02-22T19:23:10.417
> 
> 标签：php, checkbox

我需要帮助才能从带有多维数组选项的复选框组中获取数据，以反映在我的帖子页面（single.php 代码）中。单选类型运行良好，但复选框组类型却不行。我在底部添加了在我的 single.php 中找到的用于无线电类型的示例代码，该无线电类型将数据查询到我的帖子页面以供您参考。

这是我的 metabox.php 代码中的数组：

```
<?php
// array
$prefix = 'wtf_';
$meta_box = array( 'id' => 'site',
               'title' => 'Program Details',
               'page' => 'post',
               'context' => 'normal',
               'priority' => 'high',
               'fields' => array(
                        array('name' => 'Principal Return',
                                'desc' => 'Principal Return After Expiry or Not',
                                'id' => $prefix . 'principal',
                                'type' => 'radio',
                                'options' => array(
                                        array('name' => '  Yes    ', 'value' => 'Yes-after expiry'),
                                        array('name' => '  No    ', 'value' => 'No-included on the interest')
                                    )
                                ),
                        array(
                        'name' => 'Compounding',
                        'desc' => 'Choose if compounding is allowed or not',
                        'id' => $prefix . 'compounding',
                        'type' => 'radio',
                        'options' => array(
                             array('name' => '  Yes    ', 'value' => 'Allowed'),
                             array('name' => '  No    ', 'value' => 'Not Allowed'),
                             array('name' => '  Re-purchase', 'value' => 'Yes thru re-purchase')
                    )
                                ),
                             array ('name' => 'Payment Processors',  
                                    'desc'  => 'Payment Processsor Accepted',  
                                    'id'    => $prefix.'processors',  
                                    'type'  => 'checkbox_group',  
                                    'options' => array(
                                                    array('label' => ' Liberty Reserve ', 'value' =>'LR'),
                                                    array('label' => ' SolidTrustPay ', 'value' =>'STP'),
                                                    array('label' => ' EgoPay ', 'value' =>'EgoPay'),
                                                    array('label' => ' Perfect Money ', 'value' =>'PM'),
                                                    array('label' => ' Payza ', 'value' =>'Payza'),
                                                    array('label' => ' PayPal ', 'value' =>'PayPal'),
                                                    array('label' => ' Bankwire ', 'value' =>'Bankwire')
                                      ))))

// Callback function to show fields in meta box
function mytheme_show_box() {
global $meta_box, $post;

// Use nonce for verification
echo '<input type="hidden" name="mytheme_meta_box_nonce" value="',    wp_create_nonce(basename(__FILE__)), '" />';

echo '<table class="form-table">';

foreach ($meta_box['fields'] as $field) {
    // get current post meta data
    $meta = get_post_meta($post->ID, $field['id'], true);

    echo '<tr>',
            '<th style="width:20%"><label for="', $field['id'], '">', $field['name'], '</label></th>',
            '<td>';
    switch ($field['type']) {
    case 'text':
                echo $statetemt;
            break;
        case 'textarea':
                echo $statetemt;
            break;
        case 'select':
                echo $statetemt;
            break;
        case 'radio':
            foreach ($field['options'] as $option) {
                echo $statetemt; }
            break;
        case 'checkbox':
            foreach ($field['options'] as $option) {
                echo $statetemt;}
            break;
        case 'checkbox_group':  
             foreach ($field['options'] as $option) {  
                echo '<input type="checkbox" value="'.$option['value'].'" name="'.$field['id'].'[]" id="'.$option['value'].'"',$meta && in_array($option['value'], $meta) ? ' checked="checked"' : '',' />',$option['label']; }  
                echo '<br /><span class="description">'.$field['desc'].'</span>';  
            break;
    }

//From my single.php code  <<<<=================

<div class="sdinfo"><strong>Principal Return</strong>:<span><?php $principal = get_post_meta(get_the_ID(), 'wtf_principal', true); 
      if (isset($principal[0])) { 
        echo $principal ; 
} else if (isset($principal[1])) {
        $principal = get_post_meta(get_the_ID(), 'wtf_principal', true);
        echo $principal; 
       } else {_e('Not Available');} ?></span></div>
<div class="sdinfo"><strong>Program Started</strong>:<span> <?php $started = get_post_meta(get_the_ID(), 'wtf_started', true); if (isset($started[0])) { echo $started; 
                } else {_e('Not Available');} ?></span></div>
<div class="sdinfo"><strong>Compounding</strong>:<span>
<?php $compounding = get_post_meta(get_the_ID(), 'wtf_compounding', true); 
      if (isset($compounding[0])) { 
        echo $compounding ; 
                } else if (isset($compounding[1])) {
        $compounding = get_post_meta(get_the_ID(), 'wtf_compounding', true);
        echo $compounding; 
      } else if (isset($compounding[2])) {
        $compounding = get_post_meta(get_the_ID(), 'wtf_compounding', true);
        echo $compounding; 
      } else {_e('Not Available');} ?></span></div>
?> 
```

这给了我来自 post meta 的输出，如下所示： [admin screenshot](http://i46.tinypic.com/nlvt60.jpg)

这是我的帖子页面的输出。: [发帖页面截图](http://i47.tinypic.com/10pde34.jpg)

请帮忙！..我不是程序员，希望你能详细分享我的答案。提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:40:24.347

您所需要的只是指向一个数组，`var_dump($array)`以检查您需要从数组字段中的位置和数据。

其次，您需要获得`foreach()`功能。例如，您想要获取一组数据：

`'priority' => 'high',`应该作为例子：

`echo $meta_box["priority"]`这将导致数组的值：`high`

如果您不确定并且不熟悉数组，请使用以下简单方法：

```
foreach ($meta_box as $arr)
{
    var_dump($arr);

    #then play and manipulate how to grab a fields a data:
    foreach ($arr["fields"][""] as $fa)
    {
        var_dump($fa["name"]);
        var_dump($fa["desc"]);
        var_dump($fa["desc"]);
    }

    #...
} 
```

`var_dump()`如果您不确定数据数组，请了解如何抓取。

支付处理器 LR STP EgoP

```
echo $meta_box["fields"][""]["name"]; 
```

比您需要获取数组的数据：

```
foreach ($meta_box["fields"][""]["options"] as $options)
{
    foreach ($options as $options_key)
    {
        foreach ($options_key as $opt_val)
        {
            $result .= ' '.$opt_val;
        }
    }

} 
```

# java - Java 等价于 javascript 中的返回函数

> ID：15031720
> 
> 赞同：2
> 
> 时间：2013-02-22T19:23:21.393
> 
> 标签：java, javascript, reflection, three.js

我正在将three.js 移植到java，并进行了一些我自己的更改和添加。但是，我无法决定如何处理反射。

我需要在three.js中实现一些返回函数的方法，例如THREE.Line3.closestPointToPointParameter。在 java 中实现这个想法的最佳方法是什么，或者只是重写方法来做一个更自定义的行为是一个好主意？我对想法和技术持开放态度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:24:48.740

函数不是 Java 中的一等公民，您不能返回它们或将它们分配给变量。Java 方式是创建匿名内部类。例如：

```
interface FunctionInterface {
  float bar(int x);
}

FunctionInterface foo() {
  return new FunctionInterface() {

    @Override
    public float bar(int x) {
      return x;
    }

  };
} 
```

请注意，Java 8 将引入闭包，这将使这一切变得不那么冗长。

# ruby - Ruby 类返回值

> ID：15031723
> 
> 赞同：1
> 
> 时间：2013-02-22T19:23:32.780
> 
> 标签：ruby

我正在学习 Ruby 并开设了一个课程来帮助：

```
class WhatImDoing
    def initialize
        puts "not doing anything"
    end
end 
```

输出：

```
not doing anything
#<WhatImDoing:0xb74b14e8> 
```

我很好奇，第二行是什么？它是我创建的 WhatImDoing 对象的参考位置吗？我可以通过这个位置访问对象（如指针或其他东西）吗？等等......只是想更好地理解Ruby，一般来说。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T19:31:19.393

第二行是 的输出`irb`，显示最后一条语句的返回值。

如果您设置的值等于该值：

```
> class WhatImDoing
    def initialize
      puts "not doing anything"
    end

    def ohai
      puts "Ohai"
    end
  end
> tmp = WhatImDoing.new
=> #<WhatImDoing:0x5cd5a2a9> 
```

你可以使用它：

```
> tmp.ohai
Ohai 
```

如果您有自定义`to_s`，它将显示：

```
> class WhatImDoing
    def to_s
      "#{super} kthxbai"
    end
  endt
> tmp = WhatImDoing.new
=> #<WhatImDoing:0x3e389405> kthxbai 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T19:31:00.167

我假设那是 irb 的输出。Irb 试图打印您的对象，即将它转换为字符串。由于您没有提供自定义 to_s ("to string") 方法，因此您的对象继承了这个：

[http://ruby-doc.org/core-1.9.3/Object.html#method-i-to_s](http://ruby-doc.org/core-1.9.3/Object.html#method-i-to_s)

> 返回一个表示 obj 的字符串。默认的 to_s 打印对象的类和对象 id 的编码。作为一种特殊情况，作为 Ruby 程序初始执行上下文的顶级对象返回“main”。</p>

进一步挖掘源代码可以发现，十六进制数实际上是该对象实例占用的内存地址。在 Ruby 中，您无法用这些信息做任何花哨的事情。这只是为对象实例生成唯一标识符的一种便捷方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T19:27:57.083

是的，它是对您正在创建的对象的引用。是的，您可以访问该对象。

# excel - 是否可以为 Excel 2007 编写 dset 函数

> ID：15031727
> 
> 赞同：0
> 
> 时间：2013-02-22T19:23:39.833
> 
> 标签：excel, excel-2007, vba

我正在开发一个可以从 dset 函数或 Visual Basic 脚本中受益的 excel 项目。我设想的是一个类似于 excel 的[dget](http://www.techonthenet.com/excel/formulas/dget.php)数据库函数的函数，但它不是从满足条件的数据库/表中获取数据，而是将数据设置/插入到满足条件的交叉点的表中​​。我有一个相当大的数据集，因此该功能需要高效。

我的表将具有类似于此的结构：![在此处输入图像描述](../Images/7163c2c7cb53c5ae305979a0fb9f1d9f.png)

我希望有能力做类似的事情：

```
dset(NetSales,Actual,FY10,Jan,Jan_Fcst_Amt,1000) 
```

其中 1000 是我设置的值。

我的目标是能够提取预测场景，将其输入到表格中，然后用作数据透视表的数据源。

有没有人做过这样的事情。什么是最好的方法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:04:10.633

这是一种可能的方法：

创建一个隐藏列，它连接用于选择行的列（不要忘记字段分隔符），例如`=A2 & "|" & B2 & "|" & C2 & "|" & D2`

在 VBA 函数`Application.WorksheetFunction.Match()`中，用于查找复合列中行搜索字段连接的偏移量。

然后用于`Application.WorksheetFunction.Match()`查找列搜索字段的偏移量。

可以`ActiveSheet.Cells(x,y).Formula=z`用来设置所需的单元格。

这种方法最大限度地利用了 Excel 的内置函数，这些函数应该比你用 VBA 编写的任何东西都要快。

# svn - SVN 从提交的代码创建补丁？

> ID：15031729
> 
> 赞同：74
> 
> 时间：2013-02-22T19:23:59.520
> 
> 标签：svn, diff

是否可以为提交后提交期间受影响的所有文件创建补丁（差异文件）？这些文件将具有相同的版本号，我需要每个文件与其先前版本的差异。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-02-22T19:27:18.723

如果您知道提交号，请使用

```
svn diff -c N path 
```

`N`提交号在哪里，并且`path`是您的工作副本的路径。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2015-07-06T09:37:17.343

或者，当使用 windows + tortoiseSVN 时：转到您的源代码目录，右键单击该目录（打开 tortoise 上下文菜单）并选择“显示日志”，选择两个修订版（ctrl-click），然后右键单击并选择“从上下文菜单中将差异显示为统一差异”。将弹出一个窗口显示差异，然后您可以将其保存为补丁。

更新：按住 Shift 键，单击“将差异显示为统一差异”时会弹出一个对话框，您可以在其中选择差异选项（忽略 eol 更改、忽略空格更改、忽略所有空格）。如果版本之间的行尾发生了变化，这很有用（否则整个文件将显示为“已更改”）

* * *

## 回答 #3

> 赞同：47
> 
> 时间：2014-08-13T09:57:14.610

如果您知道修订号（例如 123 和 124），您可以使用：

```
svn diff -r123:124 path/to/my_project_folder > ~/my_project_changes_123_124.patch 
```

另请参阅[https://stackoverflow.com/a/25283101/1127583](https://stackoverflow.com/a/25283101/1127583)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-14T18:46:42.880

虽然已经回答了简单的版本如下，

```
1, Source Code Location > Tortoize SVN > show log 
2, Select the revision which has your commit
3, Right Click > select > Show changes as unified diff
4, Pop up with differences of all files in that commit come
5, Copy the entire content and create a new file with the extension of .patch 
```

我从以下链接引用[https://groups.google.com/forum/#!topic/tortoisesvn/xV-hemaFdFU](https://groups.google.com/forum/#!topic/tortoisesvn/xV-hemaFdFU)

# twitter-bootstrap - Is it possible to adjust control-label width in Bootstrap?

> ID：15031735
> 
> 赞同：2
> 
> 时间：2013-02-22T19:24:27.570
> 
> 标签：twitter-bootstrap

The output of this code (I tried to post this on jsFiddle but it doesn't seem to be working right now) looks reasonable, but, there is a lot of space 'wasted' to the left of the labels. It's important that the fields themselves be as wide as they are here.

![enter image description here](../Images/660d345bd0ca162c5ac2d8b4d0f48ab4.png)

This is a problem in the actual situation where there are many more fields and limited space. I want to be able to control the label width independent of the total control group width, I want it to remain right-aligned to the field, and (most importantly) I want a shorter label to result in the field moving left as well (which doesn't happen if you just mangle the control-label width).

I am not keen on delving into LESS, is that my only option? Any advice appreciated.

```
 <div class="container-narrow" style="width:700px">
        <div class="content">
            <div class="row-fluid">
                <div class="span5">
                    <form class="form-horizontal" id="applies-Step1-form" action="/" method="post">
                        <div class="control-group">
                            <label class="control-label required" for="Step1_email">Email:</label>
                            <div class="controls">
                                <input class="span12" size="50" maxlength="255" name="Step1[email]" id="Step1_email" type="text" />
                            </div>
                        </div>
                    </form>
                </div>
                <div class="span7">
                    <form class="form-horizontal" id="applies-Step1-form" action="/" method="post">
                        <div class="control-group">
                            <label class="control-label required" for="Step1_email">Thing1</label>
                            <div class="controls">
                                <input class="span12" size="60" maxlength="255" name="Step1[email]" id="Step1_email" type="text" />
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:37:16.433

One option is a to use .form-inline on the form to allow form elements on the same line.

Something like this:

```
<form class="form-inline">
    <label>Email:
        <input type="text" class="span1" name="email" />
    </label>
    <label>Thing1
        <input type="text" class="span3" name="thing1" />
    </label>
</form> 
```

If you want more spacing before the second label, you'll need custom CSS.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-21T21:46:40.423

<label class="control-label required" **style="width:100px; padding-left:60px;"** for="Step1_email">Email:</label>

keep (width + padding-left) == 160

# cakephp - CakePHP - 如何执行单位转换？

> ID：15031736
> 
> 赞同：0
> 
> 时间：2013-02-22T19:24:37.053
> 
> 标签：cakephp

如何使用 CakePHP 以一种很好的方式执行单位转换？我将所有测量值保存在数据库中的“mm”中，如果用户有另一个首选的测量系统，那么“度量”我需要转换并显示该系统中的测量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T16:32:29.870

在您放置基本转换内容的 /Lib 中创建一个 lib 类。然后，您可以直接在应用程序（模型等）的任何位置将其用作 Lib，也可以将其扩展为视图级别的助手。

看看核心是如何使用 CakeNumber 和 NumberHelper、CakeTime 和 TimeHelper 以及 String 和 TextHelper 的。类似地，您应该对测量转换进行编码。

# asp.net-mvc - 为 ASP.NET MVC 中的 ValidationError 自定义 HTML

> ID：15031738
> 
> 赞同：0
> 
> 时间：2013-02-22T19:24:39.770
> 
> 标签：asp.net-mvc, jquery-validate, unobtrusive-validation

我有一个案例，我的客户希望在每个字段上都有一个更自定义的 html 验证错误。我认为这将非常简单，所以这是我的第一个方法

```
 public static MvcHtmlString MyValidationMessage(this HtmlHelper helper, string modelName, object htmlAttributes)
    {
        if (!helper.ViewData.ModelState.ContainsKey(modelName))
        {
            return new MvcHtmlString("");
        }

        TagBuilder builder = new TagBuilder("div");
        builder.AddCssClass("my-validation-message");
        builder.MergeAttributes(HtmlHelper.AnonymousObjectToHtmlAttributes(htmlAttributes));
        builder.InnerHtml += "<b>Custom</b>";
        builder.InnerHtml += helper.ValidationMessage(modelName);

        return new MvcHtmlString(builder.ToString());
    } 
```

这真的没有用，因为它没有将自身与 JQuery 验证集成。我决定更多地使用客户端 jquery 验证框架，所以我尝试了这个......

```
$.validator.setDefaults({
    errorPlacement: function(error, element) {
        debugger;
    }
}); 
```

甚至无法让调试器命中。

我正在使用 MVC4

**注意：**我知道这可能与另一个问题重复，但答案并不令人满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:19:50.240

我能想到的唯一其他解决方案是实际从 .NET 框架复制源代码并使其适应我的需要，我真的没有看到任何其他方式。

# asp.net - 与 WebForms 并行运行时，有没有办法关闭 MVC 模块？

> ID：15031742
> 
> 赞同：0
> 
> 时间：2013-02-22T19:24:57.850
> 
> 标签：asp.net, asp.net-mvc, telerik

我们目前正在并行运行 WebForms 和 MVC 应用程序（在同一个项目中）并且遇到了一些问题。WebForms 应用程序使用 Telerik 的 RadCompression 模块，它现在给我们带来了 MVC 问题（即，修改响应的状态代码最终会出现“内容编码：gzip，gzip”，但这是一个不同的问题，我将不得不写关于）。

我的问题是，是否可以为 MVC 应用程序处理的请求关闭 RadCompression 模块，并且只为 WebForms 保留它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T03:41:20.197

作为记录，[RadCompression 不支持与 ASP.NET MVC 一起使用](http://www.telerik.com/community/forums/aspnet-ajax/compression/radcompression-issues-when-an-mvc-action-attribute-returns-statuscode-500.aspx#2506341)。

话虽如此，您始终可以对`RadCompression`模块进行子类化并更新您的 web.config 条目以使用扩展模块。然后，您可以添加任何逻辑以从模块本身内部启用/禁用压缩。

[或者，文档中描述了](http://www.telerik.com/help/aspnet-ajax/compression.html)几种关闭压缩的方法。您可以尝试`excludeHandlers`配置部分或扩展默认的 MVC HttpHandler`MvcHandler`并使用属性装饰它`RadCompressionSettings`（尽管我没有尝试过这两种方法）。

```
[Telerik.Web.UI.RadCompressionSettings(HttpCompression = Telerik.Web.UI.CompressionType.None)]  
public class MyMvcHandler : System.Web.Mvc.MvcHandler
{
    ...
} 
```

# javascript - Highcharts 数字格式

> ID：15031749
> 
> 赞同：4
> 
> 时间：2013-02-22T19:25:42.910
> 
> 标签：javascript, highcharts

```
name: 'Name',
data: [1.57,1.57,1.51,1.44,1.44,1.37,1.35,1.33,1.33,1.27,1.27,1.24,1.22,0.98],
    color: '#A61E22',
    dataLabels: {
        enabled: true,
        rotation: -90,
        color: '#000000',
        align: 'right',
        x: 4,
        y: -35,
        style: {
            fontSize: '10px',
            fontFamily: 'Verdana, sans-serif'
        }
    }                                       
}] 
```

我有以下代码。有没有办法在整个系列中使用功能编号格式？我需要用逗号替换点。我需要这样的数字格式：

```
number_format (series_values, 2, ',', '.'); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T19:35:16.803

```
Highcharts.setOptions({
    lang: {
        decimalPoint: ',',
        thousandsSep: '.'
    },

    tooltip: {
        yDecimals: 2 // If you want to add 2 decimals
    }
}); 
```

[**演示**](http://jsfiddle.net/8dmhd/)

*参考*

*   [http://api.highcharts.com/highcharts#lang.decimalPoint](http://api.highcharts.com/highcharts#lang.decimalPoint)
*   [http://api.highcharts.com/highcharts#lang.thousandsSep](http://api.highcharts.com/highcharts#lang.thousandsSep)
*   [http://api.highcharts.com/highstock#tooltip.yDecimals](http://api.highcharts.com/highstock#tooltip.yDecimals)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-30T16:30:38.243

不确定 yDecimals 现在是否正常工作。现在似乎是 tooltip.valueDecimals 。

这是我正在使用的：

```
Highcharts.setOptions({
    lang: {
        decimalPoint: ',',
        thousandsSep: '.'
    }
}); 
```

在图表中：

```
tooltip: {
    valueDecimals: 2 
}, 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T09:08:28.680

您还可以将格式化程序用于工具提示/标签

[http://api.highcharts.com/highcharts#tooltip.formatter](http://api.highcharts.com/highcharts#tooltip.formatter) [http://api.highcharts.com/highcharts#xAxis.labels.formatter](http://api.highcharts.com/highcharts#xAxis.labels.formatter)

然后使用 numberFormat： [https ://api.highcharts.com/class-reference/Highcharts#.numberFormat](https://api.highcharts.com/class-reference/Highcharts#.numberFormat)

# json - 使用 Jackson Mapper 将 JSON 映射到 Java POJO 类

> ID：15031752
> 
> 赞同：0
> 
> 时间：2013-02-22T19:25:52.137
> 
> 标签：json, jackson, deserialization

尝试使用 Jackson Mapper 将 JSON 数据（参见下面的 data.json）映射到 Java POJO 类。在反序列化过程中出现以下错误。我不确定这意味着什么。请指教。

```
org.springframework.http.converter.HttpMessageNotReadableException: Could not read JSON: Can not deserialize instance of org.springframework.social.test.api.impl.AccountList out of START_OBJECT token
 at [Source: java.io.BufferedInputStream@c3020c; line: 2, column: 3]; nested exception is org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of org.springframework.social.test.api.impl.AccountList out of START_OBJECT token
 at [Source: java.io.BufferedInputStream@c3020c; line: 2, column: 3]
    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readJavaType(MappingJacksonHttpMessageConverter.java:169)
    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.read(MappingJacksonHttpMessageConverter.java:161)
    at org.springframework.web.client.HttpMessageConverterExtractor.extractData(HttpMessageConverterExtractor.java:94)
    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:491)
    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:460)
    at org.springframework.web.client.RestTemplate.getForObject(RestTemplate.java:228)
    at org.springframework.social.test.api.impl.AccountTemplate.getAccounts(AccountTemplate.java:44)
    at org.springframework.social.test.api.impl.AccountTemplateTest.getAccounts_current_user(AccountTemplateTest.java:24)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of org.springframework.social.test.api.impl.AccountList out of START_OBJECT token
 at [Source: java.io.BufferedInputStream@c3020c; line: 2, column: 3]
    at org.codehaus.jackson.map.JsonMappingException.from(JsonMappingException.java:163)
    at org.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:219)
    at org.codehaus.jackson.map.deser.StdDeserializationContext.mappingException(StdDeserializationContext.java:212)
    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.handleNonArray(CollectionDeserializer.java:246)
    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:204)
    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:194)
    at org.codehaus.jackson.map.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:30)
    at org.codehaus.jackson.map.ObjectMapper._unwrapAndDeserialize(ObjectMapper.java:2802)
    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2730)
    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1923)
    at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readJavaType(MappingJacksonHttpMessageConverter.java:166)
    ... 31 more

JUnit Test Class

@Test
    public void getAccounts() {
        mockServer.expect(requestTo("api"))
        .andExpect(method(GET))
        .andExpect(header("Authorization", "Bearer someAccessToken"))
        .andRespond(withSuccess(jsonResource("data.json"), MediaType.APPLICATION_JSON));

        List<Account> accounts = tester.operations().getAccounts();
        assertEquals(4, accounts.size());

        Account account = accounts.get(0);

        assertEquals(new Long(9880), account.getId());
        assertEquals("My Account", account.getAlias());
        assertEquals("FULL", account.getPermissions());
        assertEquals("USER", account.getType());
        assertEquals(new Character('U'),account.getStatus());

        Account account1 = accounts.get(1);
        assertEquals(new Long(9887),account1.getId());
        assertEquals("Account",account1.getAlias());
        assertEquals("FULL",account1.getPermissions());
        assertEquals("USER",account1.getType());
        assertEquals(new Character('U'),account1.getStatus());

        Account account2 = accounts.get(2);
        assertEquals(new Long(00008),account2.getId());
        assertEquals("Mom's Account",account2.getAlias());
        assertEquals("FULL",account2.getPermissions());
        assertEquals("USER",account2.getType());
        assertEquals(new Character('U'),account2.getStatus());

        Account account3 = accounts.get(3);
        assertEquals(new Long(00009),account3.getId());
        assertEquals("Steph's Account",account3.getAlias());
        assertEquals("FULL",account3.getPermissions());
        assertEquals("USER",account3.getType());
        assertEquals(new Character('U'),account3.getStatus());

//The method used to configure ObjectMapper

    @Override
    protected MappingJacksonHttpMessageConverter getJsonMessageConverter() {
            MappingJacksonHttpMessageConverter converter = super.getJsonMessageConverter();
            objectMapper = new ObjectMapper();
            //UnComment if root element is not required
            objectMapper.enable(DeserializationConfig.Feature.UNWRAP_ROOT_VALUE);
            objectMapper.registerModule(new TestModule());
            converter.setObjectMapper(objectMapper);
            return converter;
    } 
```

上述错误消失，如果从 data.json 中删除以下 3 行，则它可以工作

```
The lines causing problem.

{
  "accounts": {
    "account":

Entire data json File

{
  "accounts": {
    "account": [
      {
        "id": "9880,
        "alias": "My Account",
        "permissions": "FULL",
        "type": "USER",
        "status": "U"
      },
      {
        "id": "9887",
        "alias": "Account",
        "permissions": "FULL",
        "type": "USER",
        "status": "U"
      },
      {
        "id": "00008",
        "alias": "Mom's Account",
        "permissions": "FULL",
        "type": "USER",
        "status": "U"
      },
      {
        "id": "00009",
        "alias": "Steph's Account",
        "permissions": "FULL",
        "type": "USER",
        "status": "U"
      }
    ]
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:40:48.907

Jackson 正在尝试将 JSON 反序列化为 AccountList 类型。我猜这种类型映射到 JSON 中的一个数组，所以 Jackson 期待流中的下一个“[”，但是您的 JSON 以“{”开头（又名 START_OBJECT 令牌）。

基本上，您的 JSON 与您尝试反序列化的类型不匹配。为了匹配，我希望目标类型类似于：

```
class SomeClassName {
    AccountList accounts;
    [...]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T11:06:34.847

解决方案是：

```
@JsonRootName(value="accounts")
public class AccountList implements Serializable{

    private static final long serialVersionUID = 1L;
private ArrayList<Account> account;

public AccountList(ArrayList<Account> account){
    this.account = account;
}
public ArrayList<Account> getAccount() {
    return account;
}

public void setAccount(ArrayList<Account> account) {
    this.account = account;
} 
```

# android - 限制 FrameLayout 内的图像，使其无法在 Android 中拖出

> ID：15031755
> 
> 赞同：1
> 
> 时间：2013-02-22T19:26:09.490
> 
> 标签：android, android-imageview

我正在使用`FrameLayout`在布局内有阴影。在上面`FrameLayout`，我添加`ImageView`了可在屏幕上拖动和调整大小的内容。

我已经给出了`FrameLayout`: `android:layout_width`&`android:layout_height`来`fill_parent`消耗屏幕区域。有必要满足应用程序的要求。

## 问题

我怎样才能限制`Image`不能被拖到外面`FrameLayout`？

图 1 和图 2：

![图 1](../Images/fed84a52d55da1ada5964509abc7a739.png) ![图 3](../Images/d6c907dd5fca666eead73b9d69cf8fbb.png)

图 3：

![图 2](../Images/70f09227ed5db18b4234c5d17f8db895.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:43:32.430

参考其大小和接触点对可拖动视图添加限制解决了我的问题。

所以我需要做的只是让***接触点将***它与`framelayout`边界进行比较，这取决于场景将限制设置为可拖动视图。

代码就像这些对我来说非常有效::

```
public boolean onTouch(View paramView, MotionEvent event)
    {
      ImageView view = (ImageView)paramView;
      switch (event.getAction() & MotionEvent.ACTION_MASK)

case MotionEvent.ACTION_MOVE:

          if (mode == DRAG) {
/*
* Restricting Image not to be draggable outside of FrameLayout
*/
              matrix.set(savedMatrix); //Top
              if(event.getY()==0)
              {
                  matrix.postTranslate(event.getX()+15-start.x, 0+15);
                  Log.d("Top", "Top...");
              }
              else if(event.getX()==0) //Left
              {
                  matrix.postTranslate(0+15, event.getY()-start.y+15);
                  Log.d("LEFT", "Left...");
              }
              else if((event.getY()-ImageHeight)>fm.getHeight()) //Bottom
              {
                  matrix.postTranslate(event.getX()-start.x+15, fm.getHeight()-ImageHeight+15);
                  Log.d("BOTTOM", "Bottom...");
              }
              else if((event.getX()-ImageWidth)>fm.getWidth()) //Right
              {
                  matrix.postTranslate(fm.getWidth()-ImageWidth+15, event.getY()-start.y+15);
                  Log.d("RIGHT", "Right....");
              }
              else if(event.getY()==0 && (event.getX()-ImageWidth)>fm.getWidth()) //Top -Right
              {
                  matrix.postTranslate(fm.getWidth()-ImageWidth-15, 15);
              }
              else if(event.getY()==0 &&event.getX()==0) //Top-Left
              {
                  matrix.postTranslate(15, 15);
              }
              else if((event.getY()-ImageHeight)>fm.getHeight() && event.getX()==0) //Bottom-Left
              {
                  matrix.postTranslate(15, fm.getHeight()-ImageHeight-15);
              }
              else if((event.getX()-ImageWidth)>fm.getWidth() && (event.getY()-ImageHeight)>fm.getHeight())
              {
                  matrix.postTranslate(fm.getWidth()-ImageWidth-15, fm.getHeight()-ImageHeight-15);
              }
              else
              {
                  matrix.postTranslate(event.getX() - start.x, event.getY() - start.y);  
                  Log.d("ACTION_MOVE", "Starting Point::"+start.x+","+start.y+" Ending Point::"+event.getX()+","+event.getY());
                  Log.d("ACTION_DOWN", "FrameLayout::"+fm.getWidth()+" ,"+fm.getHeight()+" ImageView:: "+view.getWidth()+", "+view.getHeight());

              }
          }
          else if (mode == ZOOM) {

              float newDist = spacing(event);
              Log.d(TAG, "newDist=" + newDist);
              if (newDist > 10f) {

                  matrix.set(savedMatrix);
                  float scale = newDist / oldDist;
                  matrix.postScale(scale, scale, mid.x, mid.y);
              }
          }
          break;
           }  
      view.setImageMatrix(matrix);
      return true;       
    } 
```

# c# - 将数据传递到另一个视图

> ID：15031757
> 
> 赞同：0
> 
> 时间：2013-02-22T19:26:16.433
> 
> 标签：c#, asp.net-mvc

如果用户登录有效，我会将视图重定向到另一个视图，如下所示。以下方法位于 Controller 类中。

```
 if (loginSuccess(email,pwd))
 {                   
    FormsAuthentication.SetAuthCookie(email, false);
    return RedirectToAction("Index", "SuccessPage");   

} 
```

现在我想在重定向视图（即`/SuccessPage/Index`）上显示用户名。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:30:27.097

您可以在重定向中传递参数。

```
if (loginSuccess(email,pwd))
 {                        
    string name = User.Identity.Name;
    return RedirectToAction("Index", "SuccessPage"), new {username = name };   
} 
```

（*显然，控制器动作需要访问用户名属性才能传递值*）

**注意**：上面的示例有助于理解如何在重定向中传递附加参数，但在这种情况下，它是多余的，因为`User.Identity.Name`一旦用户经过身份验证，它就可以在会话中使用，并且您可以从任何控制器或视图访问它，因此无需通过（见[乔希的回应](https://stackoverflow.com/a/15031930/2040555)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:37:47.990

用户通过身份验证后，您可以使用`HttpContext`获取基本用户信息。例如，您可以使用以下内容获取用户名：

```
string userName = HttpContext.User.Identity.Name; 
```

您无需担心在控制器之间传递信息。只要用户通过身份验证，该信息就可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T19:39:47.110

在 SuccessPage.Index 操作中，获取用户名并通过模型将其传递到视图中。

要获取用户名，可以从保存的 Session 变量中获取，也可以使用 controller.HttpContext.User.Identity.Name。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T19:41:43.457

如果我们只是在讨论传递数据，您有 4 个选项。（如果我们只讨论用户名，那么您需要[Josh 的回复](https://stackoverflow.com/a/15031930/1143)）

在重定向中传递参数（[正如杰克建议](https://stackoverflow.com/a/15031812/1143)的那样）

```
return RedirectToAction("Index", "SuccessPage"), new {username = name }; 
```

将其存储在临时数据中（仅适用于 1 个请求）

```
TempData[Key] = name;
return RedirectToAction("Index", "SuccessPage"); 
```

将其存储在会话中（只要会话持续）

```
Session[Key] = name;
return RedirectToAction("Index", "SuccessPage"); 
```

将其存储在数据库中并通过其会话 ID 链接该数据。

```
/* databasey code here */ 
return RedirectToAction("Index", "SuccessPage"); 
```

这是您从最简单到最复杂的全套选项。我建议在您的情况下，您只需在系统扩展和增长时传递 URL（第一个）中的值，您可能需要考虑尝试其他选项。

值得注意的是，TempData 不会持续整个页面刷新。

# ios - 从命令行运行 UI 自动化时出错

> ID：15031758
> 
> 赞同：3
> 
> 时间：2013-02-22T19:26:21.097
> 
> 标签：ios, ui-automation, ios-ui-automation

我认为这是第一次 - 我收到一个错误，当我在 Google 上搜索它时，我返回的异常常量什么也没返回。

基本上我正在尝试从 CLI 在我的 iOS 应用程序上运行 UI 自动化，并收到以下错误消息：

> 2013-02-22 13:12:17.820 ScriptAgent [16626:2e07] + [UIAXElement 初始化]：UIAutomation 从未收到 kAXAccessibilityLoaded。等了 20.02 秒。
> 
> 2013-02-22 13:12:17.826 ScriptAgent [16626:2e07] -[UIAXElement_0xad343c 初始化]、/SourceCache/UIAutomation_Sim/UIAutomation-271/Framework/UIAXElement.m 第 165 行、kAXErrorServerNotFound 中的意外错误
> 
> 2013-02-22 13:12:17.828 ScriptAgent [16626:2e07] 由于未捕获的异常“kUIAExeceptionAccessibilityError”而终止应用程序，原因：“-[UIAXElement_0xad343c 初始化]、/SourceCache/UIAutomation_Sim/UIAutomation-271/Framework/UIAXElement 中出现意外错误.m 第 165 行，kAXErrorServerNotFound'
> 
> 第一次抛出调用堆栈：（0x491012 0x1b78e7e 0x490deb 0xa8a55b 0x1b797cf 0x1b80a0d 0x1b77aeb 0x1b77e22 0x1b8a0e1 0xaa2605 0xa847 0x5d8d 0x86++6d 0x2925）
> 
> 2013-02-22 13:12:18.264 仪器 [16585:2227] 自动化仪器在尝试运行脚本时遇到异常。UIAScriptAgentSignaledException
> 
> 2013-02-22 19:12:18 +0000 失败：尝试运行脚本时出错。仪器跟踪完成（持续时间：41.326542s；输出：/Users/newmanp/Work/iOS/CMAiPad/CMA.Mobile/UIScripts/instrumentscli3.trace）

我在 kAXAccessibilityLoaded 或 kAXErrorServerNotFound 上搜索并没有得到任何结果。这是我的命令行调用的样子：

> Instruments -t ~/Work/iOS/Platforms/iPhoneOS.platform//Developer/Library/Instruments/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate /Users/newmanp/Library/Application\ Support/iPhone\ Simulator/ 6.0/Applications/B60B9BD7-357D-49AA-9E6F-986929C5D151/CMA.app -e UIASCRIPT ./cmaAutomationTests.js -e UIARESULTSPATH "."

任何关于我可能做错的建议都非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-11-22T21:11:30.560

当“设置”应用程序的“开发人员”部分中未打开“启用 UI 自动化”时，我们看到了此错误。打开设置解决了错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:43:08.003

我也有类似的，试试

```
sudo rm /tmp/instruments_sock 
```

你可以在这里看到它[https://github.com/appium/appium/issues/172](https://github.com/appium/appium/issues/172)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T05:52:49.237

我的 UIAScriptAgentSignaledException 通过启用 iPhone/Settings/Developer/UI 自动化部分中的“启用 UI 自动化”选项来解决。

# c++ - 如何创建一个返回对该类对象的引用的静态方法？

> ID：15031759
> 
> 赞同：4
> 
> 时间：2013-02-22T19:26:26.990
> 
> 标签：c++, object, reference, declaration, static-methods

我正在从事涉及使用静态变量/方法的编程作业。这是要求之一，我不确定在标头中声明它并在类文件中定义它的正确语法：

“声明一个类的静态方法，其返回类型为对该类对象的引用；将此方法命名为“实例”。”

这是我的猜测声明：

```
static &Singleton instance(); 
```

这是我对定义的猜测：

```
static &Singleton::Singleton instance(){
    static myObj;
    return myObj;
} 
```

我不认为那是正确的..有人可以确认/纠正我吗？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T19:28:45.793

你几乎是对的。

宣言：

```
static Singleton& instance(); 
```

定义：

```
Singleton& Singleton::instance() {
  static Singleton myObj;
  return myObj;
} 
```

# python - 如何在python中找到正确的编码？

> ID：15031763
> 
> 赞同：2
> 
> 时间：2013-02-22T19:26:54.997
> 
> 标签：python, unicode, encoding

我正在尝试摆脱文本文件中的变音符号。我使用不是我自己制作的工具将 pdf 转换为文本。我无法理解他们使用哪种编码。文本是用[Nahuatl](http://en.wikipedia.org/wiki/Nahuatl)写的，正字法上熟悉西班牙语。

我将文本转换为字符串列表。不，我正在尝试执行以下操作：

```
# check whether there is a not-ascii character in the item
def is_ascii(word):
    check = string.ascii_letters + "."
    if word not in check:
        return False
    return True

# if there is a not ascii-character encode the string 
def to_ascii(word):
    if is_ascii(word) == False:
        newWord = word.encode("utf8")
        return newWord
    return word 
```

我想要得到的是我的字符串的 unicode 版本。到目前为止它不起作用，我尝试了几种编码，如 latin1、cp1252、iso-8859-1。我得到的是谁能告诉我我做错了什么？

我怎样才能找到正确的编码？

谢谢！

**编辑**：我写信给开发转换器（pdf-txt）的人，他们说他们已经在使用 unicode。所以 John Machin 在他的回答中是正确的 (1)。正如我在一些我不清楚的评论中所写的那样，因为在 Eclipse 调试器中，列表本身在 unicode 中显示了一些标志，而其他则没有。如果我分别查看这些项目，它们都以某种方式被解码，所以我实际上看到了 unicode。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:34:35.890

如果您已经读取了一些字节并想将它们解释为`unicode`字符串，那么您必须使用`.decode()`而不是`encode()`.

就像@delnan 在评论中所说，我希望你知道编码。如果没有，一旦你修复了所使用的功能，猜测应该很容易。

顺便说一句，即使那个单词中只有 ASCII 字符，为什么也不`.decode()`呢？您将在`unicode`任何地方都有相同的数据类型 ( )，这将使您的程序更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T22:54:39.763

*编辑您的问题以显示您正在使用的 Python 版本。无法从您的代码中猜测版本。无论您使用的是 Python 3.X 还是 2.X，都非常重要。*以下评论假设 Python 2.x。

您似乎已经确定您拥有 UTF-8 编码的文本。试试`the_text.decode('utf8')`。注意解码，而不是编码。

如果使用 UTF-8 解码没有提高`UnicodeDecodeError`并且您的文本不是很短，那么非常接近确定 UTF-8 是正确的编码。

如果上述方法不起作用，请向我们展示`print repr(the_text)`.

请注意，尝试检查文件是否以 ASCII 编码会适得其反——ASCII 是 UTF-8 的子集。在 Python 2.x 中将一些数据保留为`str`对象，而`unicode`将其他数据保留为混乱，并且在 Python 3.X 中不起作用

无论如何，您的第一个功能并没有按照您的想法执行；它返回`False`长度为 2 或更大的任何输入字符串。请在编写单元测试函数时考虑它们；它使以后的调试速度更快。

注意`latin1`和`iso-8859-1`是相同的编码。由于`latin1`以相同的顺序对 Unicode 中的前 256 个代码点进行编码，因此不可能`UnicodeDecodeError`得到`text.decode('latin1')`. “无错误”是这种情况下的诊断值正好为零。

**更新**以响应 OP 的此评论：

> 我使用 Python 2.7。如果我使用 text.decode("utf8") 它会引发以下错误：UnicodeEncodeError: 'latin-1' codec can't encode character u'\u2014' in position 0: ordinal not in range(256).

这可以通过两种方式发生：

(1) 在单个语句中，如`foo = text.decode('utf8')`,已经`text`是**一个 unicode 对象**，因此 Python 2.X 尝试使用默认编码 (latin-1 ???) 对其进行编码。

(2) 可能在两个不同的语句中，首先`foo = text.decode('utf8')`where`text`是一个`str`以 UTF-8 编码的对象，并且该语句不会引发错误，然后是类似的`print foo`内容，并且您的 sys.stdout.encoding 是`latin-1`(???)。

我无法想象你为什么“勾选”我的答案是正确的。还没有人知道问题是什么！

请**编辑您的问题**以显示您的代码（`print repr(text)`在该行之前插入`text.decode("utf8")`）以及运行它的结果。显示 repr() 结果和完整的回溯（以便我们可以确定是哪一行导致了错误）。

我再问一次：你能把你的文件提供给分析吗？

顺便说一句，`u'\u2014'`是一个“EM DASH”并且是一个有效的字符`cp1252`（但不是 in `latin-1`，正如您从错误消息中看到的那样）。您使用的是什么版本的操作系统？

并且要回答您的最后一个问题，不，您不得尝试使用已知宇宙中的每个编解码器来解码您的文本。您已经获得了合理的 Unicode；某些东西（你的代码？）正在以某种方式解码某些东西——存在 `u'\u2014'`就足以证明这一点。只需向我们展示您的代码及其结果。

# c# - 如何阻止（InputScope = Number）文本框在获得焦点时消失？

> ID：15031764
> 
> 赞同：0
> 
> 时间：2013-02-22T19:27:05.227
> 
> 标签：c#, windows-phone

我已经搜索了其他答案，但没有一个足够清楚。

我有一个问题，每当我单击将 InputScope 设置为“数字”的文本框时，数字键盘就会出现，但我输入的框消失了。

这是屏幕截图和我的代码。（我也覆盖了 Windows Phone 上的浅色/深色主题来做到这一点）

```
 <TextBox InputScope="Number" Height="72" HorizontalAlignment="Left"    

   Margin="159,190,0,0" Name="aTextBox" VerticalAlignment="Top" Width="227"     

   TextChanged="aTextBox_TextChanged" Foreground="Black" BorderThickness="0" 

   Background="White" /> 
```

![在此处输入图像描述](../Images/398aa39b3f9c65579cb9313d41284dc9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T15:56:15.003

您的问题似乎是当 TextBox 具有输入焦点时存在不同的视觉状态，这与您尝试覆盖的手机主题相匹配。如果要与系统主题作斗争，则需要重新模板 TextBox。

在 Blend 中，在*Objects and Timeline*窗口中，右键单击**TextBox**并选择**Edit Template | 编辑副本...**

在出现的对话框中，命名您的新样式/模板以及您希望在 XAML 中创建它的位置。单击**确定**。

您现在处于模板编辑模式。（如果要退出此模式，请单击“*对象和时间轴*”窗口顶部的“**返回范围”按钮）**

 *![在此处输入图像描述](../Images/3e1ca2815f37ebee1593e4abcb585375.png)

单击“状态”**选项**卡（如果不可见，请转到“**窗口”|** “状态”），您可以看到 TextBox 的每种模式（聚焦、未聚焦等）的所有不同视觉状态。当您单击每一个时，您会看到设计器中的 TextBox 发生了变化。选择每个状态并将颜色更改为您想要的颜色。

具体来说，请注意在**Focused**状态下，TextBox 背景是如何默认变为透明的。这是你的问题。将其更改为您想要的样子。

最后，我想建议您*不要*尝试覆盖 Windows Phone 上的 Light/Dark 主题，除非您将其完全替换为您自己的品牌/配色方案。这是一项繁重的工作，可能会让习惯于看到他们选择的主题的用户感到烦恼和困惑。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:52:08.247

试试这样：

```
<TextBox Text="NumericTextBox">
<TextBox.InputScope>
    <InputScope>
        <InputScopeName  NameValue="Number" />
    </InputScope>
</TextBox.InputScope> 
```*

# maven - 缺少工件 com.sun:tools:jar:1.5.0 maven

> ID：15031766
> 
> 赞同：16
> 
> 时间：2013-02-22T19:27:08.380
> 
> 标签：maven, artifact

我在我的 web 项目中使用 maven 这就是我的 pom.xml 的外观我使用 eclipse juno，使用 apache tomcat 7，我正在运行 windows xp OS，"C:\Program Files\Java\jdk1.6.0_23\lib" 是我的工具 jar 在哪里。我尝试在 pom.xml 中对其进行硬编码，但它告诉无法硬编码。使用配置文件尝试了以下仍然相同的错误“缺少工件 com.sun:tools:jar:1.5.0”请帮助我自谷歌搜索 1 周以来受够了

```
 </dependencies>
<profiles>
    <profile>
      <id>default-tools.jar</id>
      <activation>
        <property>
          <name>java.vendor</name>
          <value>Sun Microsystems Inc.</value>
        </property>
      </activation>
      <dependencies>
        <dependency>
          <groupId>com.sun</groupId>
          <artifactId>tools</artifactId>
          <version>1.5.0</version>
          <scope>system</scope>
          <systemPath>${java.home}/../lib/tools.jar</systemPath>
        </dependency>
      </dependencies>
    </profile>
  </profiles>

</project>

 I:\eclipse-jee-juno-RC3-win32\workspace\MYProject>mvn clean install
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building MYProject 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.594s
[INFO] Finished at: Sat Feb 23 20:49:53 GMT+05:30 2013
[INFO] Final Memory: 3M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal on project MYProject: Could not resolve dependencies for project MYProject:MYProject:war:0.0.1-SNAPSHOT: Failure to find com.sun:tools:jar:1
.5.0 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException
'cmd' is not recognized as an internal or external command,
operable program or batch file.
I:\eclipse-jee-juno-RC3-win32\workspace\MYProject> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-01-20T15:10:31.770

它与maven或pom无关。您正在尝试从 eclipse 运行 maven，因此您需要确保在 eclipse 中正确配置 JDK。我认为eclipse中提到的JDK版本不是安装的。因此，在 eclipse 中进行更改并将 JRE 系统库指向您安装的 JDK 路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T19:52:57.397

如果您在 Mac OS X 上开发，这是一个已知问题。根据[Mac 开发人员库](https://developer.apple.com/library/mac/documentation/java/conceptual/java14development/02-javadevtools/javadevtools.html)，

> tools.jar 不存在。通常位于此处的类被包含在 classes.jar 中。

这适用于我在 Mac 上：

```
<dependency>
    <groupId>com.sun</groupId>
    <artifactId>tools</artifactId>
    <version>${java.version}</version>
    <scope>system</scope>
    <systemPath>${java.home}/../Classes/classes.jar</systemPath>
</dependency> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-11T05:11:52.583

当我使用mac编译将使用tools.jar下的一些类的项目时，我遇到了同样的错误，但在linux上，一切正常。所以我明确添加了 Maven 依赖项，它可以工作。我认为关键是检查 systemPath 是否正确。ps：我的jdk版本是1.7，

```
 <dependency>
        <groupId>com.sun</groupId>
        <artifactId>tools</artifactId>
        <version>${java.version}</version>
        <scope>system</scope>
        <systemPath>${java.home}/../lib/tools.jar</systemPath>
    </dependency> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-20T22:40:02.497

检查您是否安装了 Java JDK 6 而不是 JRE 6。然后检查您是否在 Eclipse 中正确配置并检查了您的 Java 运行时（首选项 -> Java -> 已安装的 JRE）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-19T07:02:36.390

**如果在mac**上出现此问题，**请删除依赖项**。并尝试。默认情况下，tools.jar 将包含在运行时。您必须仅为 windows 和 linux 机器添加此依赖项。

```
 <dependency>
                        <groupId>com.sun</groupId>
                        <artifactId>tools</artifactId>
                        <version>1.5.0</version>
                        <scope>system</scope>
                        <systemPath>${java.home}/lib/tools.jar</systemPath>
                    </dependency> 
```

参考：[行家参考](http://maven.apache.org/general.html#tools-jar-dependency)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T17:16:12.333

你能试一下吗

```
 <dependency>
      <groupId>com.sun</groupId>
      <artifactId>tools</artifactId>
      <version>1.5.0</version>
    </dependency> 
```

或者尝试使用以下信息添加新依赖项

群号：com.sun

工件 ID：工具

版本：1.5.0

这对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-06T07:13:37.560

我也有类似的问题，并通过以下方式修复。

在命令提示符下转到 JDK 安装路径的 lib 目录。执行以下命令安装以安装tools.jar。$mvn install:install-file -DgroupId=sun.jdk -DartifactId=tools -Dpackaging=jar -Dversion=1.6 -Dfile=tools.jar

* * *

[http://parameshk.blogspot.in](http://parameshk.blogspot.in)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-24T03:26:21.870

执行以下操作：

手动在 pom.xml 中添加 tools.jar 依赖项。也可以参考：[http ://maven.apache.org/general.html#tools-jar-dependency](http://maven.apache.org/general.html#tools-jar-dependency)

```
<profiles>  
  <profile>  
    <id>default-tools.jar</id>  
    <activation>  
      <property>  
        <name>java.vendor</name>  
        <value>Sun Microsystems Inc.</value>  
      </property>  
    </activation>  
    <dependencies>  
      <dependency>  
        <groupId>com.sun</groupId>  
        <artifactId>tools</artifactId>  
        <version>1.6</version>  
        <scope>system</scope>  
        <systemPath>${java.home}/../lib/tools.jar</systemPath>  
      </dependency>  
    </dependencies>  
  </profile>  
</profiles> 
```

应该是你的jdk版本，好像只有1.6。

# windows-store-apps - 应用程序验证程序 6.2 (x64) AVRF：未能创建验证程序日志文件状态 C0000022

> ID：15031767
> 
> 赞同：2
> 
> 时间：2013-02-22T19:27:15.927
> 
> 标签：windows-store-apps, application-verifier

我的 Windows 应用商店应用程序不断被认证测试拒绝，并且在运行 appverif 的 LuaPriv-check 时，我设法重现了随之而来的崩溃。我得到了这个输出：

**AVRF：无法创建验证程序日志文件 \??\C:\Users\xx\AppVerifierLogs\yy.exe.0.dat（状态 C0000022）**

进程监视器告诉我 yy.exe 在此文件夹中的 CreateFile 操作上被拒绝访问。我已经为所有用户设置了完全访问权限（日志中报告的用户与文件夹的所有者相同）。我以管理员身份运行 Visual Studio 和应用程序验证程序，但这似乎并不适用。在win8上让用户xx完全访问这个文件夹的正确方法是什么？我尝试使用不同的日志文件夹进行 appverify，但没有成功。还有其他人可以将此工具与商店应用程序一起使用吗？

[这篇文章](http://social.technet.microsoft.com/Forums/en-US/whatforum/thread/5ed560c0-76af-401d-8150-8cd1e69d0b8a)描述了类似的问题。尝试按照建议的解决方法运行 AppVerif –sppath C:\MyLogsLocation 会给出 AVRF：错误：图像名称不正确：< 运行 appverif -enable 处理锁也是如此 -for myapp.exe -sppath c:\MyLogsLocation

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T11:38:50.803

这可能是应用程序验证程序中的错误。看看这些链接：

*   [http://social.technet.microsoft.com/Forums/en-US/5ed560c0-76af-401d-8150-8cd1e69d0b8a/why-app-verifier-can-not-create-log-file?forum=windowssdk](http://social.technet.microsoft.com/Forums/en-US/5ed560c0-76af-401d-8150-8cd1e69d0b8a/why-app-verifier-can-not-create-log-file?forum=windowssdk)
*   [http://blogs.msdn.com/b/dougste/archive/2010/01/11/generating-application-verifier-logs-for-web-applications.aspx](http://blogs.msdn.com/b/dougste/archive/2010/01/11/generating-application-verifier-logs-for-web-applications.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-08T16:07:04.673

0xc000022 是 STATUS_ACCESS_DENIED。该进程实际上没有写权限，即使它看起来应该。此[MSDN 博客](https://web.archive.org/web/20140414060832/http://blogs.msdn.com/b/dougste/archive/2010/01/11/generating-application-verifier-logs-for-web-applications.aspx)解释了 App Verifier 中存在一个错误，因此即使您指定`-sppath`该值也不会被兑现，除非您首先删除该`%WINDIR%\system32\config\AppVerifierLogs\`文件夹。

# php - 访问 XML 属性数据

> ID：15031772
> 
> 赞同：1
> 
> 时间：2013-02-22T19:27:36.677
> 
> 标签：php, xml, xml-parsing

我有两行 XML 数据，它们是属性，但内部也包含数据，它们是重复字段。它们存储在 SimpleXML 变量中。

```
<inputField Type="Name">John Doe</inputField>
<inputField Type="DateOfHire">Tomorrow</inputField> 
```

（显然这不是真实数据，但语法实际上在我的数据中，我只是在其中使用字符串数据）

我所看到的一切都说要访问这样的数据，我已经尝试过并且效果很好。但是我的数据是动态的，所以数据并不总是在同一个地方，所以它不符合我的需求。

```
$xmlFile->inputField[0];
$xmlFile->inputField[1]; 
```

这工作正常，直到其中一条线丢失，我可以有 0 到 5 条线。所以我想知道有没有什么方法可以通过属性名访问数据？所以可能是这样的。

```
$xmlFile->inputField['Name']; 
```

或者

```
$xmlFile->inputField->Name; 
```

我严格使用这些作为示例来说明我正在尝试做的事情，我知道上述代码行在语法上都不正确。

请注意，此信息是在外部生成的，因此我无法更改格式。

如果有人需要澄清，请随时让我知道，并很乐意详细说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:47:47.253

也许像这样？

```
echo $xmlFile->inputField->attributest()->Name; 
```

你在用什么？DOMDocument 还是 simplexml？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:48:29.387

你没有说，但我假设你正在使用`SimpleXMLElement`?

如果您想访问每个项目，只需迭代：

```
foreach ($xmlFile->inputField as $inputField) { ... } 
```

如果要访问属性，请使用数组表示法：

```
$inputField['Type'] 
```

如果您只想访问一个特定元素，请使用 xpath：

```
$xmlFile->xpath('inputField[@Type="Name"]'); 
```

也许您应该通读[SimpleXMLElement 文档中的基本用法示例](http://www.php.net/manual/en/simplexml.examples-basic.php)？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:51:07.317

例如，您可以抓取数据：

```
$xmlFile = simplexml_load_file($file);

foreach($xmlFile->inputField as $res) {

    echo $res["Name"];

} 
```

# dart - dart:intl 坏了吗？/DateFormat 来复杂

> ID：15031786
> 
> 赞同：1
> 
> 时间：2013-02-22T19:28:35.597
> 
> 标签：dart, dart-pub

我使用 Dart Editor 0.3.7_r18717（意味着编辑器是最新的（2013 年 2 月）

```
import 'dart:intl'; 
```

显示错误“找不到引用的源”

如果我通过 pub 导入包

```
import 'package:intl/intl.dart'; 
```

然后编译到 JS dart2js 失败并出现一些奇怪的错误......

我想要的只是这样的：

```
final String time = new DateFormat("HH:mm:ss","de").format(new DateTime.now()); 
```

根本不清楚为什么在这种情况下需要语言环境......

谢谢

[**更新**]
好的-我知道“奇怪的错误”没有任何意义-所以这是我导入以下两个包时的输出：

```
import 'package:intl/date_symbol_data_local.dart';
import 'package:intl/intl.dart';

String getTime() {
    final String time = new DateFormat("HH:mm:ss","en_US").format(new DateTime.now());
    //final String time = "20:05:00";
return time;
} 
```

*输出*：

```
运行 dart2js...
使用快照 /Developer/dart/dart-sdk/lib/_internal/compiler/implementation/dart2js.dart.snapshot
写了 /Users/mikemitterer/dart/WebSockets.SAMPLE/web/out/jrelaisui.html_bootstrap.dart.js [410.0kb 在 5.3 秒内写入]
build.dart --machine --changed=web/jrelaisui.dart
文件：/Users/mikemitterer/dart/WebSockets.SAMPLE/build.dart
build.dart 返回错误代码 255

未捕获的错误：NoSuchMethodError：找不到方法：'_addFromInteger@0x36924d72'
接收方：空
论据：[80]
堆栈跟踪：
    #0 Object.noSuchMethod (dart:core-patch:1737:25)
    #1 int.+ (dart:core-patch:1324:33)
    #2 Parser.translateCharacter (包:analyzer_experimental/src/generated/parser.dart:4380:167)
    #3 Parser.computeStringValue (package:analyzer_experimental/src/generated/parser.dart:376:33)
    #4 Parser.parseStringLiteral (package:analyzer_experimental/src/generated/parser.dart:3451:76)
    #5 Parser.parsePrimaryExpression (package:analyzer_experimental/src/generated/parser.dart:3163:32)
    #6 Parser.parseAssignableExpression (package:analyzer_experimental/src/generated/parser.dart:837:51)
    #7 Parser.parsePostfixExpression (package:analyzer_experimental/src/generated/parser.dart:3061:51)

```

...

*输出 - 清理源：*

```
build.dart --machine --clean
文件：/Users/mikemitterer/dart/HelloWebComponent/build.dart
build.dart 返回错误代码 255

'package:html5lib/src/encoding_parser.dart'：错误：第 65 行 pos 14：类 'EncodingBytes' 用不兼容的参数覆盖超类 'Iterable' 的函数 'skip'
  字符串跳过（[CharPreciate skipChars]）{
             ^

build.dart --machine --clean
文件：/用户/mikemitterer/dart/todomvc/build.dart
build.dart 返回错误代码 255

'package:html5lib/src/encoding_parser.dart'：错误：第 65 行 pos 14：类 'EncodingBytes' 用不兼容的参数覆盖超类 'Iterable' 的函数 'skip'
  字符串跳过（[CharPreciate skipChars]）{

```

...

这就是我所说的“奇怪”:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T21:48:36.533

包语法是正确的，这应该有效：

```
import 'package:intl/date_symbol_data_local.dart';
import 'package:intl/intl.dart';

main() {
  print(new DateFormat.yMd().format(new DateTime.now()));
} 
```

你在说什么“奇怪的错误”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:26:14.857

进口“飞镖：国际”；导入它不起作用，因为它不是“核心”飞镖库之一，它必须作为一个包导入。您在 dart2js 中列出的错误看起来不像来自国际化代码，而是来自 web_ui 和analyzer_experimental 包。如果注释掉使用国际化的行并使用 dart2js 编译会发生什么？

# ios - UIViewAnimation 翻转不起作用

> ID：15031793
> 
> 赞同：0
> 
> 时间：2013-02-22T19:28:54.983
> 
> 标签：ios, uiview, uiviewanimation

在 UIView 子类中，我有这个：

```
self.frontImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"front"]];
self.backImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"back"]];
[self addSubview:self.backImageView];

[UIView animateWithDuration:0.5
                          delay:0.0
                        options:UIViewAnimationOptionTransitionFlipFromLeft
                     animations:^{
                         [self.backImageView removeFromSuperview];
                         [self addSubview:self.frontImageView];}

                     completion:^(BOOL finished){
                         //nothing
                     }]; 
```

但我没有得到翻转动画。正面图像视图立即出现。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:07:56.080

你犯了一个愚蠢的错误

```
animateWithDuration:delay:options:animations:completion: 
```

代替

```
transitionFromView:toView:duration:options:completion: 
```

您的代码应该是：

```
[UIView transitionFromView:backImageView
                    toView:frontImageView
                  duration:0.5
                   options:UIViewAnimationOptionTransitionFlipFromLeft
                completion:^(BOOL finished) {
                    // animation completed
                }]; 
```

# php - PHP：如何让 spl_autoload 在全局范围内的类中工作？

> ID：15031796
> 
> 赞同：1
> 
> 时间：2013-02-22T19:29:02.080
> 
> 标签：php, class, autoload

我正在使用 spl_autoload 进行依赖注入。

```
spl_autoload_register(function ($class)
{
    $cFilePath = _CLASSLIB_ . "/class.$class.php";

    if(file_exists($cFilePath))
    {
        include($cFilePath);
    }
    else
    {
        die("Unable to include the $class class.");
    }
}); 
```

这工作正常。但是，假设这些是我的课程：

```
class Test 
{ 
   public function foo() 
   { 
      echo "Here."; 
   } 
} 
```

和

```
class OtherTest 
{ 
   public function bar() 
   { 
      global $Test; 

      $Test->foo(); 
   } 
} 
```

所以，在我的执行代码中：

```
<?php
$OT = new OtherTest(); //Dependency Injection works and loads the file.
$OT->bar();
?> 
```

我会收到一个错误，因为 bar() 尝试在测试类中全局化（没有实例化，因此从未自动加载）。

除了在每个方法中尝试使用 $Test 全局变量之前检查它是否是一个对象之外，实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:34:41.397

尽可能避免使用全局变量。您在评论中提到了依赖注入：您可以使用 DI 来解决此问题。

如果 OtherTest 依赖于 Test 的一个实例，则该 Test 实例应在构造时提供给 OtherTest，例如

```
$T = new OtherTest($Test); 
```

您显然需要修改您的 OtherTest 类以将 Test 的实例作为属性，以及将 Test 作为参数的构造函数，例如：

```
class OtherTest 
{

    protected $test = null;

    public function __construct(Test $test)
    {
        $this->test = $test;
    }

    public function bar()
    {
        return $this->test->foo();
    }

} 
```

然后，您可以执行以下操作：

```
$test = new Test();
$otherTest = new OtherTest($test);
$otherTest->bar(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:36:19.803

我认为您对依赖注入的含义感到困惑。类自动加载不是依赖注入。依赖注入是您实际将对象可能具有的依赖注入到对象中以便它可以使用它的地方。因此，接收依赖关系的对象完全不需要创建它的依赖关系。

在这种情况下，实现依赖注入的最佳方法是实际将 Test 类的依赖注入到 OtherTest 实例化的 OtherTest 中。所以 Othertest 可能看起来像这样：

```
class OtherTest 
{ 
   protected $test_object = NULL;

   public function __construct($test_obj) {
      if ($test_obj instanceof Test === false) {
          throw new Exception('I need a Test object');
      } 
      $this->test_obj = $test_obj;
   }

   public function bar() 
   { 
      $this->$test_obj->foo(); 
   } 
} 
```

实例化的代码可能如下所示：

```
$OT = new OtherTest(new Test()); // both OtherTest and Test would be autoloaded here if not previously loaded. 
```

请注意，引用未声明的变量（`$Test`在您的示例中）不会自动加载类，因为变量名本身没有类的上下文。您最终会因为尝试在非对象上调用方法而出错。

# javascript - 如何在亚马逊 s3 中保存的 html 页面上引用外部 javascript 库？

> ID：15031799
> 
> 赞同：0
> 
> 时间：2013-02-22T19:29:19.983
> 
> 标签：javascript, amazon-web-services, amazon-s3

我有一个 web 应用程序，其中在 amazon s3 存储桶中创建了 html 页面。这些 html 页面引用了带有 . 我应该把javascript源文件放在哪里才能用javascript正确呈现？我应该把它们放在那个亚马逊 s3 账户的同一个桶里吗？如果源文件位于我的 Web 应用程序的静态资产文件夹中，html 页面的渲染速度会更快吗？如果我将它们放在 amazon s3 存储桶中，我应该如何引用它们；通过相对于存储桶的路径还是亚马逊给出的绝对完整域路径？

编辑：我得到它使用以下javascript ex：

测试.html：

```
<html>
<head>
<script src="display.js">
</script>
</head>
<body>
<input type="button" onclick="popup()" value="Click Me!">
</body>
</html> 
```

显示.js：

```
function popup() {
alert("Hello World")
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:46:03.323

使用相对路径将更有效地解析本地到服务器的 javascript 资源链接。使用 Amazon 生成的公共 URL 将需要 DNS 查找和解析，这需要时间。

# c++ - C++ 无效指针错误

> ID：15031803
> 
> 赞同：2
> 
> 时间：2013-02-22T19:29:38.083
> 
> 标签：c++, pointers

我从下面的代码中收到无效点错误，我不明白为什么。我要做的就是从向量中删除堆上的一些字符串：

```
void func() {
    vector<string>* vec = new vector<string>;
    vec->push_back(*(new string("1")));
    vec->push_back(*(new string("2")));

    for(vector<string>::iterator itr = vec->begin(); itr != vec->end(); ++itr)
    {
        string* ptr = &(*itr);
        delete(ptr);
    }
} 
```

**编辑**：是因为 push_back 创建了字符串的副本吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T19:33:32.917

您的错误是因为该*元素*不是动态分配的；*向量*是。您尝试做的将需要：

```
void func() 
{
    vector<string*> vec;
    vec.push_back(new string("1"));
    vec.push_back(new string("2"));

    for(vector<string*>::iterator itr = vec.begin(); itr != vec.end(); ++itr)
    {
        string* ptr = *itr;
        delete(ptr);
    }
} 
```

但老实说，我认为没有理由这样做。编写代码时，不仅会尝试删除它从未实际分配的内存，还会泄露它*所做*的分配。

有理由*将*指向对象的指针存储在像这样的向量中（例如对象实际上来自其他地方的另一个容器，并且您需要一个临时列表来进行自定义排序操作​​而不干扰原始内容），但有些事情告诉我你离有这样的需求还有一段距离。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-22T19:34:46.373

首先，线

```
vec->push_back(*(new string("1"))); 
```

导致内存泄漏。返回的值`new string("1")`是一个指向新分配的字符串对象的指针。但是，当您取消引用并将其插入向量中时，会创建并插入堆分配对象的*副本*。但是，您最初在堆上分配的实际字符串对象已泄漏。

本质上，您的向量是按值存储字符串对象，而不是指向字符串对象的指针。插入向量中的字符串对象的副本不是堆分配的对象（不是用 分配的对象`new`）。当然，你不能`delete`使用没有分配的东西`new`。所以当你打电话时，`delete(ptr)`你会导致未定义的行为。

您似乎想要的是：

`vector<string*>* vec = new vector<string*>;`

但是，总的来说，我看不出有任何令人信服的理由为什么要在堆上分配所有内容。在 C++ 中，只要可行，最好使用堆栈分配和具有值语义的容器，除非您有某些原因需要堆分配（例如，多态对象的容器，在这种情况下，无论如何您都应该使用智能指针）。通常，当新的 C++ 程序员到处使用堆分配对象和`new`关键字时，这表明他们无法很好地音译从 Java 或 C# 等托管语言导入的编程风格。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T19:33:10.870

不，您不是-您的向量存储`string`对象，而不是指向`string`对象的指针。这就是为什么你`*`在你的`push_back`电话中有 - 你正在取消引用返回的指针。

您正在添加您创建的动态字符串的*副本*`new`，并且该动态字符串丢失了，因为您从不存储`new`返回的指针。

# ruby-on-rails - 晒干我的看法

> ID：15031806
> 
> 赞同：1
> 
> 时间：2013-02-22T19:29:47.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个代码片段，它进行 API 调用，目前在 3 个不同的视图文件（都属于不同的控制器）中使用。

我的代码：

```
<%  url_raw = URI.parse("url-tem_id=#{rec.id}") %>
<%  url = Net::HTTP.get_response(url_raw).body %>
<%  if url.empty? %>
    <%  @title          = "Product Unavailable via API" %>
    <%  @url            = "url" %>
    <%  @cover_img      = "180X180.jpg" %>
    <%  @price          = "Product Unavailable via API" %>
<% else %>
<%  begin %>
<%  @response1  = JSON.parse(url) %>
<%  @title          = @response1["ProductName"]%>
<%  @url            = "{@response1["ProductUrl"]}"%>
<%  @cover_img      = @response1["ImagePath"].gsub("75X75.gif", "500X500.jpg")%>
<%  @price          = @response1["currentItemPrice"]%>
<%  rescue %>
<%  end %>
<%  end %> 
```

我真的很困惑是否应该将其移至部分、帮助程序或应用程序控制器？另外，一旦移动它，我如何在我的视图中调用它并传递`rec.id`变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T12:42:46.003

我认为这应该都是模型逻辑......这一切似乎都与设置模型的属性有关。

我假设“rec”是某种描述的模型，在这种情况下：

```
# all psuedo-code... written off the top of my head and cut/pasting your example... ie: untested!
class Rec < AR::Base
  attr_reader :title, :url, :cover_img, :price

  def call_api!
    url_raw = URI.parse("url-tem_id=#{self.id}")
    url = Net::HTTP.get_response(url_raw).body
    if url.empty?
      @title          = "Product Unavailable via API"
      @url            = "url" 
      @cover_img      = "180X180.jpg" 
      @price          = "Product Unavailable via API" 
    else 
      begin 
        response = JSON.parse(url)
        @title          = response["ProductName"]
        @url            = response["ProductUrl"]
        @cover_img      = response["ImagePath"].gsub("75X75.gif", "500X500.jpg")
        @price          = response["currentItemPrice"]
      rescue 
    end 

  end
end 
```

然后在您的控制器中，您可以调用“rec.call_uri！”，并且视图可以访问“rec.price”等（个人而言，我会稍有不同，但这显示了您拥有的代码的第一阶段重构）。

如果您在多个模型中需要它，请将其提取到一个模块中并包含它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T19:47:21.100

这是控制器逻辑，应该移动到一个模块中，然后控制器可以共享该模块。

您可以创建一个可供您的视图访问的新实例变量。

`@rec_id = rec.id`

# java - 使用事务加载测试但使用 JUnit

> ID：15031807
> 
> 赞同：1
> 
> 时间：2013-02-22T19:29:49.753
> 
> 标签：java, transactions, junit4, ejb-3.0, contiperf

我想在 JUnit 中加载测试。场景如下：我想用它们的事务、EntityManager 和一个内存数据库来测试 EJB3。对于负载测试，我使用的是 ContiPerf 2。我用谷歌搜索了它，我看到了不同的方法。在某些情况下，他们使用嵌入式 EJBContainer，在另一些情况下，他们只是初始化 EntityManager 并从 EntityTransaction 开始事务。

对于简单的单元测试，使用 EntityManager 和 EntityTransaction 就足够了，但是当我想做负载测试时，我发现了几个问题，但最大的问题是概念性的。

我的第一种方法是：

```
@Test
@PerfTest(invocations = 1000, threads = 5)
@Required(max = 1000, average = 250)
public void testTransaction() {
    et.begin();
    MyEntity myEntity = new MyEntity();
    service.performAction(myEntity);
    thenMyEntityIsOk(myEntity);
    et.rollback();
} 
```

但是在这个测试中，由于回滚，我在进行负载测试时遇到了问题（如果我使用提交而不是回滚，问题是一样的）。

在此之后，我认为问题可能出在事务上，然后我开始使用嵌入式 EJBContainer，但我在依赖项和执行方面遇到了很多问题。

您对如何在 JUnit 中进行负载测试有什么建议吗？

# asp.net - 如果我将框架 2.0 升级到 4.0，那么框架 2.0 项目应该可以工作或不工作

> ID：15031808
> 
> 赞同：1
> 
> 时间：2013-02-22T19:29:58.967
> 
> 标签：asp.net, .net, frameworks

目前我正在开发框架 2.0 Web 应用程序，如果我将框架 2.0 升级到 4.0，那么框架 2.0 Web 应用程序应该可以工作或不工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:51:49.203

如果从 .net 2.0 升级到 4.0，应用程序将正常工作。请注意，在重建项目时，某些方法可能会被标记为已弃用或已过时，并且会建议使用该方法的较新版本和指向它的指针。考虑更改那些标记的方法。

# c++ - 错误是什么意思：'ev->QMouseEvent::pos' 没有类类型

> ID：15031809
> 
> 赞同：2
> 
> 时间：2013-02-22T19:30:06.970
> 
> 标签：c++

我在 Qt 中编程，在一个事件处理程序之间我写了这个：

```
void PaintedTextBrowser::mouseMoveEvent(QMouseEvent *ev)
{
    ...
    QPoint *point = new QPoint(0, ev->pos.y());
    ...
} 
```

我在编译时收到错误：

> 错误：'ev->QMouseEvent::pos' 没有类类型

但是当我将代码修改为：

```
void PaintedTextBrowser::mouseMoveEvent(QMouseEvent *ev)
{
    ...
    QPoint pos = ev->pos();
    QPoint *point = new QPoint(0, pos.y());
    ...
} 
```

它工作正常。我在这里缺少什么概念？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T19:40:03.763

错误很清楚，实际上 -`QMouseEvent::pos`不是一个类，[它是一个](http://harmattan-dev.nokia.com/docs/library/html/qt4/qmouseevent.html#pos)返回对 的引用的函数`QPoint`，所以你不能在它上面使用点运算符。

我猜你想写：

```
QPoint *point = new QPoint(0, ev->pos().y());
//                                   ^^
//                     note the parentheses 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T19:39:54.583

看来您缺少括号：

```
void PaintedTextBrowser::mouseMoveEvent(QMouseEvent *ev)
{
    ...
    QPoint *point = new QPoint(0, ev->pos().y());
    //                                   ^^
    ...
} 
```

# php - 根据 url 变量从数据库中获取数据行（例如 template.php?id=1）

> ID：15031811
> 
> 赞同：0
> 
> 时间：2013-02-22T19:30:14.813
> 
> 标签：php

例如，我正在尝试创建一个模板，该模板根据 url 变量 ?id=1 从数据库中获取一行数据。当[访问 http://www.example.com/template.php?id=1](http://www.example.com/template.php?id=1)时，我想显示该特定行中的所有信息，例如标题。

目前，我通过查看 php.net 并对其进行了一些处理。我对如何解决这个问题一无所知，因为我是 PHP 新手并且没有太多经验：S。

```
$result = mysql_query("SELECT id,title FROM table WHERE id = urldecode( $_GET['id']        ) ");
if (!$result) {
echo 'Could not run query: ' . mysql_error();
exit;
}
$row = mysql_fetch_row($result);

echo $row[0];
echo $row[1]; 
```

希望这不是太宽泛。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:50:42.087

首先，不要运行简单的字符串查询，而是运行安全的数据库层，例如[pdo](http://php.net/manual/en/book.pdo.php)。其次，您的代码或多或少还可以。我会这样做：

```
$id = $_GET['id'];
$query = mysql_query("SELECT id,title FROM table WHERE id = $id"); 
```

如果你把一个变量放在“$id”字符串里面，它的值就会放在里面。如果你把它放在 '$id' 字符串中，它不会。这是你想要的吗？

编辑：顺便说一句，没有基于 URL 的东西，有[查询字符串](http://en.wikipedia.org/wiki/Query_string)。您`id`从查询字符串中获取变量。

# javascript - 列出对象中的所有变量名

> ID：15031814
> 
> 赞同：3
> 
> 时间：2013-02-22T19:30:36.097
> 
> 标签：javascript, arrays

我有这个对象：

```
var sub = {
    0:  [""],
    21: ["Look, here, are three little stuff,","ready to sing for this crowd"],
    28: ["Listen up, 'cause here's our story","I'm gonna sing it very LOUUU..."],
    36: [""],
    45: ["VERY LOUUU..."],
    48: [""],
    61: ["When you're a younger stuff","and your stuff is very bare"],
    68: ["Feels like the sun will never come","when your stuff's not there"],
    74: ["So the three of us will fight the fight","there is nothing that we fear"],
    80: ["We'll have to figure out what we'll do next","till our stuff is here!"],
    87: ["We are the guys","on a quest to find out who we are"],
    94: ["And we will never stop the journey","not until we have our stuff"],
    101:[""],
    106:["(stuff...)"],
}
//I like stuff. 
```

我想将所有变量名放入一个数组中，如下所示：

```
variables == [0, 21, 28, 36, 45, 48, 61, 68, 74, 80, 87, 94, 101, 106, 109]; 
```

是否有内置函数，或者是否可以迭代 JSON 对象变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-22T20:01:56.693

大多数浏览器都在 Object 原型中内置了这种方法。

您可以使用

```
var variables = Object.keys(sub); //returns an array with all the object keys 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:31:27.900

```
var variables = [];
for (var i in sub) {
 if (sub.hasOwnProperty(i)){
  variables.push(+i);
 }
} 
```

这是手动解决方案。我建议您使用 Underscore.js 来解决此类问题。Underscore中有一个很好的`_.keys`方法。

# iphone - 如何在旋转时调整 UINavigationBar 的大小

> ID：15031822
> 
> 赞同：0
> 
> 时间：2013-02-22T19:30:57.373
> 
> 标签：iphone, uinavigationcontroller

如果我在 AppDelegate 中将 a 设置`UINavigationController`为我`self.window.rootViewController`的，当我旋转设备时，`UINavigationBar`调整大小会稍微小一些。

当使用选项卡控制器作为我的根视图时，如何模仿这种行为？我尝试`AutoresizingMask`在标签栏子导航控制器视图上正确设置，但无济于事。视图正确旋转，但`UINavigationBar`保持相同的 44pt 高度。

我在我的`layoutSubviews`方法中尝试过改变框架：`self.navigationController.navigationBar.frame.size.height = 32.0`这有点工作但有问题并且感觉不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:21:00.677

不知何故，我在早些时候研究时错过了[这个答案。](https://stackoverflow.com/questions/3538111/uinavigationbar-autoresizing/3600768#3600768)看起来它可以解决问题。

# java - 将摆动组件绘制到图形

> ID：15031824
> 
> 赞同：3
> 
> 时间：2013-02-22T19:31:02.833
> 
> 标签：java, swing, graphics, jpanel, paint

如何将组件（如 JPanel）绘制到我选择的图形中，就好像它是屏幕一样？

在谷歌上没有运气。

我试过的：

```
JPanel p = new JPanel();
p.setSize(32, 32);
p.setLocation(8, 8);

p.add(new JLabel(...));
p.add(new JLabel(...));
p.add(new ImageIcon(...));

Graphics g = getSomeGraphics();
p.paint(g); 
```

然而，这最后一条指令导致

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at javax.swing.RepaintManager.getVolatileOffscreenBuffer(Unknown Source)
    at javax.swing.RepaintManager$PaintManager.paint(Unknown Source)
    at javax.swing.BufferStrategyPaintManager.paint(Unknown Source)
    at javax.swing.RepaintManager.paint(Unknown Source)
    at javax.swing.JComponent.paint(Unknown Source)
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:47:59.247

此[示例](https://stackoverflow.com/a/7028497/230513)说明了`panel.paint(g2d)`如何在. 然后将图像缩放并显示在面板下方以供参考。`JPanel``JLabel``BufferedImage`

![图片](../Images/dd784af531fbce94367baf59ac514ffa.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T00:44:04.680

> 你可以假设我正在绘制一个 BufferedImage，事实上我有时会这样做。

请参阅[Screen Image](http://tips4java.wordpress.com/2008/10/13/screen-image/)，它也可以创建组件图像。

# android - 在 FragmentActivity 中读取 Fragment 中的 SharedPreferences 数据

> ID：15031825
> 
> 赞同：3
> 
> 时间：2013-02-22T19:31:13.913
> 
> 标签：android, sharedpreferences, android-fragmentactivity

我正在尝试将用户在下面的登录屏幕上输入的名称保存`Settings.java`到 a`sharedPreference`中，该名称将由`TestFragment2.java`从另一个 FragmentActivity 调用的 读取，`SampleTabsDefault.java`

![登录屏幕](../Images/245ce549e62215cd30a1bf4fd7569f08.png) **设置.java**

```
 private void savePrefs(String key, boolean value) {
        SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
        Editor edit = sp.edit();
        edit.putBoolean(key, value);
        edit.commit();
    }

    private void savePrefs(String key, String value) {
        SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
        Editor edit = sp.edit();
        edit.putString(key, value);
        edit.commit();
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        savePrefs("CHECKBOX", cb.isChecked());
        if (cb.isChecked())
            savePrefs("NAME", et.getText().toString());
        Intent myIntent = new Intent("com.test.SAMPLETABSDEFAULT");
        startActivity(myIntent);

        finish();
    }

} 
```

`Intent myIntent = new Intent("com.test.SAMPLETABSDEFAULT");startActivity(myIntent);` 加载`SampleTabsDefault.java`就好了，它调用的所有片段也是如此。

```
 class NavTabs extends FragmentPagerAdapter {
    public NavTabs(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        switch(position)
        {
                case 0:
                     TestFragment fragment = new TestFragment();  
                     return fragment;

                 case 1:
                     TestFragment2 fragment2 = new TestFragment2();  
                     return fragment2;

          }

                     TestFragment3 fragment3 = new TestFragment3();  
                     return fragment3;

    } 
```

我可以左右滚动并进入下面看到的片段 TestFragment2.java....但是它没有读取，或者我正在应用`sharedPreferences`内部`TestFragment2.java` ![SampleTabsDefault.java 和 TestFragment2.java](../Images/1fcb1d6c3ec149481fc9515fe6cae2d9.png) **TestFragment2.java做出非常愚蠢的举动**

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View myView = inflater.inflate(R.layout.fragment_2, container, false);
     text = (TextView)myView.findViewById(R.id.textView1);
     et = (TextView)myView.findViewById(R.id.textView3);
     cb = (CheckBox) myView.findViewById(R.id.checkBox1);

    loadPrefs();
    return myView;

}

private void loadPrefs() {
    SharedPreferences sp = getActivity().getSharedPreferences("CHECKBOX", 0);
    boolean cbValue = sp.getBoolean("CHECKBOX", false);
    String name = sp.getString("NAME", "YourName");
    if(cbValue){
        cb.setChecked(true);
    }else{
        cb.setChecked(false);
    }
    et.setText(name);
} 
```

在`TestFragment2.java`我试图`textView`通过 'setText();'阅读和申请 sharedPreferences 与我在`Settings.java`. 中的代码`Settings.java`确实有效，`String name = sp.getString("NAME", "YourName");`它加载`sharedPreference`并显示用户上次运行应用程序时输入的名称，但在 `TestFragmnet2.java`同一代码块中返回 YourName from`String name = sp.getString("NAME", "YourName");`

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-22T20:06:06.740

我想你在打电话

```
SharedPreferences sp = getActivity().getSharedPreferences("CHECKBOX", 0); 
```

在 TestFragment2 的`loadPrefs()`, 方法中不正确

从[文档](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29) 中，第一个参数（名称）是：

> 所需的首选项文件。如果此名称的首选项文件不存在，它将在您检索编辑器 (SharedPreferences.edit()) 并提交更改 (Editor.commit()) 时创建。

所以看起来您正在TestFragment2 中创建一个名为“CHECKBOX”的新首选项文件。

可能会更改`loadPrefs()`为在 Settings.java 中找到的相同用法，以便您可以调用之前使用的相同首选项，如下所示：

```
private void loadPrefs() {
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(getActivity())
    boolean cbValue = sp.getBoolean("CHECKBOX", false);
    String name = sp.getString("NAME", "YourName");
    if(cbValue){
        cb.setChecked(true);
    }else{
        cb.setChecked(false);
    }
    et.setText(name); 
```

}

# ruby-on-rails-3 - rails3 minitest bundle update 给我 register_spec_type 未定义的方法

> ID：15031826
> 
> 赞同：0
> 
> 时间：2013-02-22T19:31:15.683
> 
> 标签：ruby-on-rails-3, minitest

我只是想测试一个尝试过的 minitest。在 Railscast 之后，我终于得到了一些工作模式，但测试运行了两次。看到一些说要进行捆绑更新的东西。这导致了我已经清除的几个问题，除了：

```
/Users/me/.rvm/gems/ruby-1.9.3-p327/gems/minitest-rails-0.5.2/lib/minitest/rails.rb:34:in `<class:TestCase>': undefined method `register_spec_type' for ActionController::TestCase:Class (NoMethodError)
from /Users/salex/.rvm/gems/ruby-1.9.3-p327/gems/minitest-rails-0.5.2/lib/minitest/rails.rb:32:in `<top (required)>'
from /Users/salex/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
from /Users/salex/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `block in require'
from /Users/salex/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
from /Users/salex/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in `require'
from /Users/salex/work/aidtdbr/test/minitest_helper.rb:5:in `<top (required)>'
... 
```

它指向`require "minitest/rails"`我的 minitest 助手中的行

我的捆绑

```
Using minitest (4.6.1) 
Using minitest-matchers (1.2.0) 
Using minitest-capybara (0.1.0) 
Using rails (3.2.11) 
Using minitest-rails (0.5.2) 
Using minitest-rails-capybara (0.5.1) 
```

我重新安装了 minitest 助手，只是取消了一些注释

```
ENV["RAILS_ENV"] = "development"
require File.expand_path('../../config/environment', __FILE__)

require "minitest/autorun"
require "minitest/rails" 
require "minitest/rails/capybara"

class ActiveSupport::TestCase
  # Setup all fixtures in test/fixtures/*.(yml|csv) for all tests in alphabetical order.
  fixtures :all

  # Add more helper methods to be used by all tests here...
end 
```

这并没有作为一个新的应用程序开始，所以我不知道 minitest 之前的任何东西是否是什么搞砸了，但它确实工作了一段时间。我认为我的两次跑步是使用`rake test`而不是`rake minitest`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:13:44.343

默认的 test_unit 和 mini_test railties 在您的应用程序中存在争用。为确保您的应用程序始终配置为使用 minitest-rails，请将以下内容添加到`config/application.rb`文件中：

```
config.generators do |g|
  g.test_framework :mini_test
end 
```

或者，您可以替换文件顶部的这一行`config/application.rb`：

```
require "rails/all" 
```

有了这个：

```
# Pick the frameworks you want:
require "active_record/railtie"
require "action_controller/railtie"
require "action_mailer/railtie"
require "active_resource/railtie"
require "sprockets/railtie"
# require "rails/test_unit/railtie"
require "minitest/rails/railtie" 
```

# python - 如何以类似 PHP 的方式显示 Python Web 应用程序异常

> ID：15031828
> 
> 赞同：0
> 
> 时间：2013-02-22T19:31:18.200
> 
> 标签：python, exception-handling, cgi

在这个项目中，我必须将 Python 用于网站，我正在寻找错误以进入我的浏览器，而不是获得 500 页。任何提示？
**另外**
，我只是使用普通的 CGI 没什么特别的，我按照[这里](http://webpython.codepoint.net/cgi_debugging)的解释尝试了这个，但它不起作用

```
#!/usr/bin/env python
print "Content-Type: text/plain"
print
import sys
sys.stderr = sys.stdout
f = open('non-existent-file.txt', 'r') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:37:38.670

这取决于您的 Python Web 框架设置。

例如，Pyramid 框架有各种设置用于在 Web 浏览器中启用回溯并启动交互式调试会话：

[http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/introduction.html#debugging-settings](http://docs.pylonsproject.org/projects/pyramid/en/1.3-branch/narr/introduction.html#debugging-settings)

这完全取决于您的 Python Web 应用程序是如何连接的以及它使用什么架构等等。请在问题中包含完整的上下文信息以获得进一步的帮助。

有关使用 Python 和 WSGI 调试 Web 应用程序的更多信息：

[http://code.google.com/p/modwsgi/wiki/DebuggingTechniques](http://code.google.com/p/modwsgi/wiki/DebuggingTechniques)

如果您不使用任何框架，则需要将所有内容放在主级别 try...except 块中，因为 Python 标准库不提供将异常转换为 HTML 的工具。

```
 import traceback

  try:
       ...
  except Exception as e:
       # Set content type as text/plain (don't know how)
       traceback.print_exc(e)  # Print out exception as plain text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:52:32.547

我最终创建了一个脚本来读取 error.log 中的错误。因此，您不必在同一个选项卡中获取错误，而是为它们提供另一个选项卡。但是不要忘记删除脚本以避免提供有关您的系统的信息。

```
#! /opt/python3/bin/python3
#Error Log Viewer

import subprocess

p = subprocess.Popen('cat /var/log/apache2/error.log | tail -5', shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)

print ('Content-type: text/html\n\n') 
print (''' 
<!DOCTYPE html >
<html> <head></head> <body>''')
for line in p.stdout.readlines():
    print (line,'<br>')
print('''</html></body>''') 
```

# jquery - 选中/取消选中 jquery mobile 中的所有复选框失败

> ID：15031831
> 
> 赞同：1
> 
> 时间：2013-02-22T19:31:20.227
> 
> 标签：jquery, jquery-mobile

我有一个带有两个按钮的 jquerymobile 页面。一两个选中所有复选框，一个取消选中所有复选框。**我第一次点击`check all`它有效，但取消选中后它不再有效。**

这是我的代码：

```
<div data-role="page" id="selecttest">

    <div data-role="header">
        <a href="#sc" data-icon="home">SSC</a>
        <h1>...</h1>
    </div><!-- /header -->

    <div data-role="content">
        <fieldset class="ui-grid-a">
            <div class="ui-block-a"><button onclick="$('#selecttest input[type=checkbox]').attr('checked','checked').checkboxradio('refresh');" data-theme="b">check all</button></div>
            <div class="ui-block-b"><button onclick="$('#selecttest input[type=checkbox]').removeAttr('checked').checkboxradio('refresh');" data-theme="b">uncheck all</button></div>
        </fieldset>
        <fieldset data-role="controlgroup">
            <input type="checkbox" name="checkbox-v-2a" id="checkbox-v-2a">
            <label for="checkbox-v-2a">One</label>
            <input type="checkbox" name="checkbox-v-2b" id="checkbox-v-2b">
            <label for="checkbox-v-2b">Two</label>
            <input type="checkbox" name="checkbox-v-2c" id="checkbox-v-2c">
            <label for="checkbox-v-2c">Three</label>
        </fieldset>
    </div>
</div><!-- /page --> 
```

我将 jQuery 1.9.1 与 jQuerymobile 1.3 一起使用

我已经查看了[如何在 JQuery Mobile 中选择或取消选择所有复选框？](https://stackoverflow.com/questions/11331812/how-to-select-or-unselect-all-checkboxes-in-jquery-mobile)但这对我没有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T19:51:07.523

jQuery 1.9 恢复了 1.6 中对 .attr 所做的更改，并在 1.6.1 中删除了这些更改。这意味着`.attr`vs`.prop`现在又恢复了严格。如果您需要操作属性，请使用`.prop`，否则，请使用`.attr`。您实际上想要使用该属性是非常罕见的。

对于复选框的选中状态，您应该使用`.prop("checked",true)`或`.prop("checked",false)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T23:36:04.470

```
$('h3 :checkbox').change(function(e) {
    e.preventDefault();

var tasiyici = "form1";

		if($(this).prop("checked")== true)
		{
		tumunuSec(tasiyici,true);
		}else{
		tumunuSec(tasiyici,false);	
		}

});

$('#form1 input[type=checkbox]').change(function(e) {
    e.preventDefault();
	var truesayisi = $("#form1 input[type=checkbox]:checked").size();
	var checksayisi = $("#form1 input[type=checkbox]").size();
		if(truesayisi == checksayisi)
		{
			$('h3 :checkbox').prop("checked",true);
		}	
		if(truesayisi < checksayisi)
		{
			$('h3 :checkbox').prop("checked",false);
		}
});

function tumunuSec(FormAdi, cvalue){
		var truesayisi = 0;
    $.each($("#"+FormAdi+" input[type=checkbox]"), function(){
        $(this).prop("checked",cvalue).checkboxradio("refresh");
		truesayisi++;

    });		

}
```

```
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css">
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link href="//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css" rel="stylesheet"/>
<script src="//ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>

<div class="cont-a" style="min-width:280px !important; width:90% !important; max-width:380px !important;">
	<h3  style="padding:8px; margin:0px !important; background:#222; border-radius:4px; text-align:center;">
	<input type="checkbox" name="secici" id="secici" style="margin:0px;" class="tipso" title="Select All"><p>TOPLU İŞLEM</p></h3>
	<form action="kontrol.php" method="post" data-ajax="false" style="padding:0px; margin:0px;">
		<fieldset class="ui-field-contain" data-role="controlgroup" id="form1" data-filter="true" STYLE="width:100%; border:0px solid #ffcc00">
			<input type="checkbox" name="menuler[]" value="1" id="1">
			<label for="1">Menü 1</label>
			<input type="checkbox" name="menuler[]" value="2" id="2">
			<label for="2">Menü 2</label>
			<input type="checkbox" name="menuler[]" value="3" id="3">
			<label for="3">Menü 3</label>

		</fieldset>
				<div class="no-results" >Kayıt bulunamadı.</div>	
		<input type="submit" value="yolla" />
	</form>
</div>
```

# javascript - 使用 JavaScript 添加到内部 html 的元素不持久？

> ID：15031833
> 
> 赞同：0
> 
> 时间：2013-02-22T19:31:30.370
> 
> 标签：javascript, html

我正在尝试使用重复多次的特定字符填充 div，这是一个非常基本的任务，或者我认为，为此我编写了以下 JS 方法：

```
<script>
            function populateTarget()
                {
                    var target = document.getElementById("div_target");
                    var nrSteps = parseInt(document.getElementById("nr").value);

                    for (var i=0;i<nrSteps;i++)
                        {
                            target.innerHTML+=("x");
                        }
                }
</script> 
```

问题是“x”的出现，但只出现了几分之一秒，我只有在打开萤火虫时才能注意到。

该功能由以下形式的按钮触发：

```
 <form>
                    Nr de caractere: <input type="text" value="1" id="nr"/>
                    <br/>
                    Caracterul dorit:
                    <select id="chr">
                      <option value="c">c</option>
                      <option value="b">b</option>
                      <option value="g">g</option>
                      <option value="o">o</option>
                    </select>
                    <br/>
                    <button onclick="populateTarget()"> Genereaza</button>
                </form> 
```

这是div：

```
 <style >
    body
    {
        color: white;
        background-color: blue;
    }

    #div_target,#div_form
    {
        height: 300px;
        width: 300px;
        border:5px solid white;
    }

    #div_target
    {
        float: left;
        overflow: scroll;
    }
</style>

 <div id="div_target">
 </div> 
```

在此之后没有其他函数与 div 的内部 html 混淆，虽然我知道直接添加到 innerHTML 是一种非常不雅的方法，但我只是想检查我是否可以在编写更高级的内容之前添加字符。

我的代码的代码[笔](http://cdpn.io/cfvrJ)。

有没有人知道我做错了什么，也许是一个最好的解决方案，我只使用纯 JS，没有库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:38:30.553

当您触发运行您的`populateTarget`函数的事件时，您是否可能重新加载页面？例如，它是否在具有诸如“.”之类的动作的表单中，由按钮触发？

这可以解释你所看到的行为。

如果函数以 结尾`return false;`，如果我的猜测是正确的，它可能会阻止这种情况。

# linux - SQLPLUS 声明块中的错误

> ID：15031835
> 
> 赞同：0
> 
> 时间：2013-02-22T19:31:32.300
> 
> 标签：linux, oracle, bash, sqlplus

我在声明块中遇到错误。我已将其粘贴在代码下方。

```
function XYZ
{
        sqlplus -s $DB_USR/$DB_USR$pwd_suffix@$SID
        set timing off
        set serveroutput on size 10000
        set feedback off
        spool logname_$sid.out

        variable ex_code number
        whenever sqlerror exit 1
        begin
                :ex_code :=0;
        end;
        /

        declare

         l_cnt number := 0;
         l_sql varchar2(4000) := '';
         l_tmp_name varchar2(100) := '';
    some more code...

} 
```

> ./XYZ.sh：第 26 行：意外标记 `(' 附近的语法错误
> ./XYZ.sh：第 26 行：` l_sql varchar2(4000) := '';'
> -bash-3.2$

有人可以告诉我是什么导致了问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:27:07.243

我想你想要一个here-document，假设`sqlplus`是从标准输入读取：

```
function XYZ
{
        sqlplus -s $DB_USR/$DB_USR$pwd_suffix@$SID <<-EOF
        set timing off
        set serveroutput on size 10000
        set feedback off
        spool logname_$sid.out

        variable ex_code number
        whenever sqlerror exit 1
        begin
                :ex_code :=0;
        end;
        /

        declare

         l_cnt number := 0;
         l_sql varchar2(4000) := '';
         l_tmp_name varchar2(100) := '';
        some more code...
        EOF
} 
```

# msbuild - MSBuild 获取所有项目引用/使用项目

> ID：15031836
> 
> 赞同：0
> 
> 时间：2013-02-22T19:31:35.027
> 
> 标签：msbuild, build-process, build-automation

我们想设置一个构建过程来防止对我们的分支进行破坏性更改。我们有一个公共库/项目被多个项目引用。因此，当对该公共库进行更改时，使用它的所有其他项目也可以构建并检查重大更改。到目前为止，使用 MSBuild，我们已经能够反其道而行之。从一个项目中，我们可以收集它的所有依赖项。但是我怎样才能获得所有引用/使用带有 msbuild 的公共库的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:43:03.090

如果您想做一些“推送”通知，那将是一些工作。

便宜的技巧是（作为构建过程的最后一步）CommonLibrary 将在每个相关项目中进行源代码更新。就像一个虚拟文件。

```
.\MySolution1.sln
.\MyBuildTriggerFile1.txt 
```

接着

```
.\MySolution2.sln
.\MyBuildTriggerFile2.txt 
```

（等等等等）。

并让 CommonLibrary 构建过程进行一些快速更新和签入相关项目。

这里的好处是，这相对容易实现。糟糕的是，您必须手动更新 CommonBuild 项目中的列表。另一个好处是……您实际上并没有进行构建，您只是发送了一条小消息，说“发生了一些事情”。所以 CommonBuild 库不会陷入困境。

然后，您的依赖项目可以设置为“建立在变化之上”，然后您很快就会知道。

……

如果您希望它“全部自动”和“全部动态”，您将不得不使用自定义 MSBuild 任务做一些工作。

您必须开始提取 csproj 文件，解析它们，然后将它们链接回 CommonLibrary。

[XPath 和 *.csproj](https://stackoverflow.com/questions/3745029/xpath-and-csproj/12848854#12848854)

你。这是很多工作。

…………

我会采取中间立场。

使用“触发文件”系统......（上面建议）......并让代码构建一个晚上或“每次签到”......

反正。有个主意。但我不知道任何开箱即用的东西。

…………

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T06:00:57.347

最好的选择是在构建时将此公共库拖放到分支下的公共文件夹中，并从那里在其他项目中引用它。

否则，我不确定 msbuild 是否支持识别引用二进制文件的位置。如果可能的话，这将是一个耗时的过程，具体取决于您的分支的大小，并且它会给您的公共库构建增加不必要的开销，并且一旦它开始多次使用这个公共库，它将严重影响您的分支构建过程的可维护性其他地方。

# delphi - CancelUpdates 中的密钥冲突

> ID：15031837
> 
> 赞同：0
> 
> 时间：2013-02-22T19:31:35.353
> 
> 标签：delphi, key, constraints

我在主/详细模式下的数据集有问题。

我正在使用**带有更新 1、DBExpress 和 Firebird 2.5.2 的 Delphi XE** 我在两个表 (CDS) 之间有一个主/从关系，它使用主源/主域属性定义。

我的问题是，当我删除详细数据集中的所有记录并编辑主 ClientDataset 后，当我在 Detail ClientDataSet 中调用 CancelUpdates 方法时，我收到**“密钥违规”**异常。

此问题仅发生在详细数据集为空的情况下。

任何人都知道可能是什么问题？

**编辑：** 人们，我在我的框架中解决了“密钥违规”的问题。不确定是什么导致了问题，所以我暂时隔离了异常。

在同样的结构中，还有另一个问题，在这种情况下似乎是一个 Bug 的 DBExpress。

在下面的链接中，我创建了一个示例来模拟问题。

[http://www.4shared.com/zip/gmT7GVPf/MestreDetalheBug.html](http://www.4shared.com/zip/gmT7GVPf/MestreDetalheBug.html)

如何模拟问题：

**1) 选择一个主记录；
2）在网格详细信息中，删除所有记录，但不保存。仅由 DbNavegador 删除。
3）继续网格主并更改主记录的任何值。您将看到记录详细信息网格重新出现详细信息。
仅当 DataSet Detail 为空时才会出现此问题。**

我有一个框架，可以维护对缓存在工作台上的记录的所有更改，并且仅在用户单击“保存”按钮时才有效。找了一阵子的解决方法，就是在删除的时候在明细记录里面，已经在数据库里生效了。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-08-10T06:37:29.523

我在 Delphi 2009 中遇到了同样的问题。我只是关闭并重新打开 DataSet Detail 而不是使用 CancelUpdates 来清除更改。但我希望有一些更好的解决方案。

谢谢。

# jquery - Jquery 元素检测到值已在另一个子视图上被清空

> ID：15031838
> 
> 赞同：0
> 
> 时间：2013-02-22T19:31:37.983
> 
> 标签：jquery

此代码存在于孩子身上并且是一个选项卡。我需要知道该值是否在另一个子视图中被清空，然后当焦点更改到此选项卡时，会检测到更改并隐藏复制按钮。希望这是有道理的。

该值在此处被清空：

```
$("#NewPrimaryVoicePreview").empty(); 
```

然后，当用户将焦点切换到此选项卡时，会检测到 NewPrimaryVoicePreview 元素中的更改，并隐藏 divCopyTTStoRSS 按钮。

```
if ( $("#NewPrimaryTTSMessageBox").length > 0 
    && $("#NewPrimaryTTSMessageBox").val().length > 0 ){

    $("#divCopyTTStoRSS").show();
} else {
    $("#divCopyTTStoRSS").hide;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:48:18.313

```
$('#textBoxId').keyup(function () {
     if($(this).val()=='')
     {//do your work}
}); 
```

# ckeditor - ckeditor - 基于 div 的编辑器

> ID：15031840
> 
> 赞同：4
> 
> 时间：2013-02-22T19:32:00.587
> 
> 标签：ckeditor

我想使用 ckeditor 为我的网站创建一个可编辑区域。这个可编辑区域必须像 ckeditor 一样显示 html 格式的元素，而且我希望字体和颜色与我网站的样式相匹配。

解决方案似乎很简单，我可以使用内联编辑编写如下内容：

```
<script type="text/javascript" src="ckeditor.js"></script>
<div contenteditable="true">my content...</div> 
```

它可以工作，但有一些我不需要：如果 div 元素具有焦点，编辑器会出现和消失。但是，*我想每时每刻都给编辑看！*

这似乎只能替换文本区域（阅读所有其他论坛），但文本区域与我的网站样式表不匹配！

经过一番搜索，我在 ckeditor 的网站上看到了这个例子：http: [//ckeditor.com/demo#div](http://ckeditor.com/demo#div)

这正是我需要的！！！永远不会消失的内联编辑器！

问题是：

我对代码不太了解，我不明白制作这样的编辑器的基本代码是什么！你能帮我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T14:53:48.913

我在[这里](https://github.com/sstur/ckeditor-ui/blob/master/samples/divarea.html)用谷歌搜索过！

您需要`divarea`CKEditor 的插件：[下载页面](http://ckeditor.com/addon/divarea)。

安装此插件后，您应该使用它启动编辑器，如下所示：

```
<script>CKEDITOR.replace('my_text_area', { extraPlugins : 'divarea' });</script> 
```

或者您可以在 CKEditor 中添加插件`config.js`：

```
CKEDITOR.editorConfig = function( config ) {
    config.extraPlugins = 'divarea'
}; 
```

希望它有帮助（它应该！）

# mysql - MySQL 在 wp_postmeta 中的多行中插入规范化数据

> ID：15031841
> 
> 赞同：1
> 
> 时间：2013-02-22T19:32:02.210
> 
> 标签：mysql, wordpress

我正在尝试将多行插入 wp_postmeta。我无法找出正确的 SQL 查询来实现它。我面临的问题是我当前的数据如下所示：

```
Col 1  | Col 2  | Col 3  | Col 4  | Col5
----------------------------------------
A      | B      | C      | D      | E
F      | G      | H      | I      | J 
```

我需要像这样将它插入到 wp_postmeta 中：

```
Col 1  | Col 2  | Col 3  
-----------------------
A      | txt    | B
A      | txt    | C
A      | txt    | D
A      | txt    | E
F      | txt    | G
F      | txt    | H
F      | txt    | I
F      | txt    | J 
```

“txt”数据不是问题，我只是想找出一种方法来“非规范化”源数据中的每一行并将其存储在另一个表的四个不同行中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:34:22.520

您可以使用从列中获取数据并将其转换为行的查询来*反透视数据：*`UNION ALL`

```
select `col 1`, `col 2` as val
from yourtable
union all
select `col 1`, `col 3` as val
from yourtable
union all
select `col 1`, `col 4` as val
from yourtable
union all
select `col 1`, `col5` as val
from yourtable
order by 1 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/72ab8/3)。

将数据转换为这种格式后，您就可以`INSERT`将其放入另一个表中。

# php - PHP数组从中获取值

> ID：15031844
> 
> 赞同：4
> 
> 时间：2013-02-22T19:32:10.947
> 
> 标签：php, dns

# PHP 域可用性检查脚本

### 问题：

有 70 多个域扩展需要检查。

### 我正在寻找的解决方案

我只需要检查客户端在 index.php `<option>`+ **.com/.com.br/.net/.org**中选择的扩展名，即使客户端选择了特定选项，这 4 个扩展名也将始终得到验证。

***工作示例：*** [http ://redehost.com.br/registro-de-dominio](http://redehost.com.br/registro-de-dominio)

我正在寻找与此非常相似的东西 /\

索引.php

```
<html>

<head>
<title>99points.info : ajax domain name check</title>

<link href="main.css" rel="stylesheet" />
        <script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>

<script language="javascript">
$(document).ready(function() {

    var loading;
    var results;

    form = document.getElementById('form');
    loading = document.getElementById('loading');
    results = document.getElementById('results');

    $('#Submit').click( function() {

        if($('#Search').val() == "")
        {alert('please enter your domain');return false;}

        results.style.display = 'none';
        $('#results').html('');
        loading.style.display = 'inline';

        $.post('process.php?domain=' + escape($('#Search').val()),{
        }, function(response){

            results.style.display = 'block';
            $('#results').html(unescape(response)); 
            loading.style.display = 'none';
        });

        return false;
    });

});
</script>
</head>
<body>

<center>

    <form method="post" action="./" id="form"> 
            <div id="registro_box_bg">
            <div id="registro_box">
            <div id="www">www. </div>
                <input type="text" autocomplete="off" id="Search" name="domain">

                    <div id="select" style="background-color: rgb(229, 229, 229);">
                    <select id="extensao" name="Extensao"><option value="com">.com</option>
                        <option value="com.br">.com.br</option>
                        <option value="net">.net</option>
                        <option value="org">.org</option>
                        <option value="info">.info</option>
                        <option value="biz">.biz</option>
                        <option value="tv">.tv</option>
                        <option value="name">.name</option>
                        <option value="ws">.ws</option>
                        <option value="cc">.cc</option>
                        <option value="blog.br">.blog.br</option>
                        <option value="flog.br">.flog.br</option>
                        <option value="vlog.br">.vlog.br</option>
                        <option value="wiki.br">.wiki.br</option>
                        <option value="adm.br">.adm.br</option>
                        <option value="adv.br">.adv.br</option>
                        <option value="agr.br">.agr.br</option>
                        <option value="am.br">.am.br</option>
                        <option value="arq.br">.arq.br</option>
                        <option value="art.br">.art.br</option>
                        <option value="ato.br">.ato.br</option>
                        <option value="bio.br">.bio.br</option>
                        <option value="bmd.br">.bmd.br</option>
                        <option value="cim.br">.cim.br</option>
                        <option value="cng.br">.cng.br</option>
                        <option value="cnt.br">.cnt.br</option>
                        <option value="coop.br">.coop.br</option>
                        <option value="ecn.br">.ecn.br</option>
                        <option value="edu.br">.edu.br</option>
                        <option value="eng.br">.eng.br</option>
                        <option value="esp.br">.esp.br</option>
                        <option value="etc.br">.etc.br</option>
                        <option value="eti.br">.eti.br</option>
                        <option value="far.br">.far.br</option>
                        <option value="fm.br">.fm.br</option>
                        <option value="fnd.br">.fnd.br</option>
                        <option value="fot.br">.fot.br</option>
                        <option value="fst.br">.fst.br</option>
                        <option value="g12.br">.g12.br</option>
                        <option value="ggf.br">.ggf.br</option>
                        <option value="gov.br">.gov.br</option>
                        <option value="imb.br">.imb.br</option>
                        <option value="ind.br">.ind.br</option>
                        <option value="inf.br">.inf.br</option>
                        <option value="jor.br">.jor.br</option>
                        <option value="lel.br">.lel.br</option>
                        <option value="mat.br">.mat.br</option>
                        <option value="med.br">.med.br</option>
                        <option value="mil.br">.mil.br</option>
                        <option value="mus.br">.mus.br</option>
                        <option value="net.br">.net.br</option>
                        <option value="nom.br">.nom.br</option>
                        <option value="not.br">.not.br</option>
                        <option value="ntr.br">.ntr.br</option>
                        <option value="odo.br">.odo.br</option>
                        <option value="org.br">.org.br</option>
                        <option value="ppg.br">.ppg.br</option>
                        <option value="pro.br">.pro.br</option>
                        <option value="psc.br">.psc.br</option>
                        <option value="psi.br">.psi.br</option>
                        <option value="qsl.br">.qsl.br</option>
                        <option value="rec.br">.rec.br</option>
                        <option value="slg.br">.slg.br</option>
                        <option value="srv.br">.srv.br</option>
                        <option value="tmp.br">.tmp.br</option>
                        <option value="trd.br">.trd.br</option>
                        <option value="tur.br">.tur.br</option>
                        <option value="tv.br">.tv.br</option>
                        <option value="vet.br">.vet.br</option>
                        <option value="zlg.br">.zlg.br</option>
                        </select>
                            </div>
        <input type="submit" id="Submit" value="Submit">
                <!-- falta add 

                                            <option value="biz">.biz</option>
                        <option value="tv">.tv</option>
                        <option value="name">.name</option>
                        <option value="ws">.ws</option>
                        <option value="cc">.cc</option> -->

    </form>

    <div id="loading">Please wait...<img src="load.gif"></img></div>

     <div id="results" style="width:420px; height:600px;" align="left">

     </div> 
</div>
        </div>

 </center>
 </body>
 </html> 
```

进程.php

```
<?php
set_time_limit(0);
ob_start();

########### Extensions to be checked
$extensions = array(
        '.com'      => array('whois.crsnic.net','No match for'),
        '.com.br'   => array('whois.registro.br','No match'),
        '.net'      => array('whois.crsnic.net','No match for'),
        '.org'  => array('whois.pir.org','NOT FOUND'),
    '.info'     => array('whois.afilias.net','NOT FOUND'),
        '.br'   => array('whois.registro.br','No match'),
            '.blog.br'  => array('whois.registro.br','No match'),
            '.flog.br'  => array('whois.registro.br','No match'),
            '.vlog.br'  => array('whois.registro.br','No match'),
            '.wiki.br'  => array('whois.registro.br','No match'),
            '.adm.br'   => array('whois.registro.br','No match'),
            '.adv.br'   => array('whois.registro.br','No match'),
            '.agr.br'   => array('whois.registro.br','No match'),
            '.am.br'    => array('whois.registro.br','No match'),
            '.arq.br'   => array('whois.registro.br','No match'),
            '.ato.br'   => array('whois.registro.br','No match'),
            '.bio.br'   => array('whois.registro.br','No match'),
            '.bmd.br'   => array('whois.registro.br','No match'),
            '.cim.br'   => array('whois.registro.br','No match'),
            '.cng.br'   => array('whois.registro.br','No match'),
            '.cnt.br'   => array('whois.registro.br','No match'),
            '.coop.br'  => array('whois.registro.br','No match'),
            '.ecn.br'   => array('whois.registro.br','No match'),
            '.edu.br'   => array('whois.registro.br','No match'),
            '.eng.br'   => array('whois.registro.br','No match'),
            '.esp.br'   => array('whois.registro.br','No match'),
            '.etc.br'   => array('whois.registro.br','No match'),
            '.eti.br'   => array('whois.registro.br','No match'),
            '.far.br'   => array('whois.registro.br','No match'),
            '.fm.br'    => array('whois.registro.br','No match'),
            '.fnd.br'   => array('whois.registro.br','No match'),
            '.fot.br'   => array('whois.registro.br','No match'),
            '.fst.br'   => array('whois.registro.br','No match'),
            '.g12.br'   => array('whois.registro.br','No match'),
            '.ggf.br'   => array('whois.registro.br','No match'),
        '.gov.br'   => array('whois.registro.br','No match'),
        '.imb.br'   => array('whois.registro.br','No match'),
        '.ind.br'   => array('whois.registro.br','No match'),
        '.inf.br'   => array('whois.registro.br','No match'),
        '.jor.br'   => array('whois.registro.br','No match'),
        '.lel.br'   => array('whois.registro.br','No match'),
        '.mat.br'   => array('whois.registro.br','No match'),
        '.med.br'   => array('whois.registro.br','No match'),
        '.mil.br'   => array('whois.registro.br','No match'),
        '.mus.br'   => array('whois.registro.br','No match'),
        '.net.br'   => array('whois.registro.br','No match'),
        '.nom.br'   => array('whois.registro.br','No match'),
        '.not.br'   => array('whois.registro.br','No match'),
        '.ntr.br'   => array('whois.registro.br','No match'),
        '.odo.br'   => array('whois.registro.br','No match'),
        '.org.br'   => array('whois.registro.br','No match'),
        '.ppg.br'   => array('whois.registro.br','No match'),
        '.pro.br'   => array('whois.registro.br','No match'),
        '.psc.br'   => array('whois.registro.br','No match'),
        '.psi.br'   => array('whois.registro.br','No match'),
        '.qsl.br'   => array('whois.registro.br','No match'),
        '.rec.br'   => array('whois.registro.br','No match'),
        '.slg.br'   => array('whois.registro.br','No match'),
        '.srv.br'   => array('whois.registro.br','No match'),
        '.tmp.br'   => array('whois.registro.br','No match'),
        '.trd.br'   => array('whois.registro.br','No match'),
        '.trd.br'   => array('whois.registro.br','No match'),
        '.tur.br'   => array('whois.registro.br','No match'),
        '.tv.br'    => array('whois.registro.br','No match'),
        '.vet.br'   => array('whois.registro.br','No match'),
        '.zlg.br'   => array('whois.registro.br','No match'),

);
###########

if(isset($_GET['domain']))
{
    $domain = str_replace(array('www.', 'http://'), NULL, $_GET['domain']);

    if(strlen($domain) > 0)
    {
        foreach($extensions as $extension => $who)
        {
            $buffer = NULL;

            $sock = fsockopen($who[0], 43) or die('Error Connecting To Server:' . $server);
            fputs($sock, $domain.$extension . "\r\n");

                while( !feof($sock) )
                {
                    $buffer .= fgets($sock,128);
                }

            fclose($sock);

            if(eregi($who[1], $buffer))
            {
                echo '<h4 class="available"><span>Available</span>' . $domain. '<b>' . $extension .'</b> is Available</h4>';
            }
            else
            {
                echo '<h4 class="taken"><span>Taken</span>' . $domain . '<b>' .$extension .'</b> is Taken</h4>';
            }
            echo '<br />';  

            ob_flush();
            flush();
            sleep(0.3);

        }
    }
    else
    {
        echo 'Please enter the domain name';
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:32:09.520

您不会将选定的扩展发布到您的数据服务 ( `process.php`)。

```
$.post('process.php?domain=' + escape($('#Search').val()) 
```

应该

```
$.post('process.php', { domain: escape($('#Search').val()), extension: $('#extensao').val() }) 
```

此外，您必须定义要签入的`process.php`扩展名并跳过不在此列表中的扩展名。

```
// Add all extensions we need to check to an array
$extensionsToCheck = array('.com', '.com.br', '.net', '.org');
if (isset($_POST['extension']) && !empty($_POST['extension']))
{
    $extensionsToCheck[] = $_POST['extension'];
}   

if(isset($_POST['domain']))
{
    $domain = str_replace(array('www.', 'http://'), NULL, $_POST['domain']);

    if(strlen($domain) > 0)
    {
        foreach($extensions as $extension => $who)
        {
            // Check if we need to check this extensions. Skip if not
            if (!in_array($extension, $extensionsToCheck))
            {
                continue;
            } 
```

这样的事情应该做。未经测试

# html - 左键单击并在页面上拖动时的空白区域

> ID：15031853
> 
> 赞同：0
> 
> 时间：2013-02-22T19:32:50.710
> 
> 标签：html, css

我的网站上有一个奇怪的问题。我的网站在加载时看起来不错。当我在页面上的某个区域上单击并向右拖动时，所有页面都向左移动，并且右侧有一个空白区域。

截屏：

![在此处输入图像描述](../Images/6c88a6124d9c40d7b0e96b949c964437.png)

CSS：

```
body {
    background-color: #fff;
    margin: 0;
    padding: 0;
    font-family: 'Source Sans Pro', Verdana, Tahoma, Arial;
    height: 100%;
    overflow-x: hidden;
}

#wrap {
    width: 1050px;
    margin: 0 auto;
    position: relative;
    z-index: 1000;
    text-align: left;
}

#header {
    width: 190px;
    position: absolute;
    top: 7px;
}

#main {
    position: absolute;
    top: 12px;
    left: 100px;
}

#scrollable {
 position: absolute;
 left: 0px;
 width: 100%;
 z-index: 0;
}

.scrollableArea {
    position: relative;
 } 
```

HTML 骨架：

```
 <body> 
 <div id="wrap">
        <div id="page">
         <div id="header"></header>
         <div id="main"></div>
        </div>
 </div>
 <div id="scrollable" class="holder">
   <div id="scrollableWrapper" ></div>
   <div id="scrollableArea" ></div>
 </div>
</body> 
```

希望我已经提供了所有需要的信息。只是似乎无法解决这个问题。我认为这与可滚动的 div 有关。ScrollableArea 可以比视口大得多并超出屏幕限制，但它是不可见的并且不会显示滚动。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:47:43.817

消除：`body { overflow-x: hidden; }`

# javascript - 在 Python 中将 postgresql 时间戳转换为 JavaScript 时间戳

> ID：15031856
> 
> 赞同：7
> 
> 时间：2013-02-22T19:33:00.947
> 
> 标签：javascript, python, postgresql, flot

我有一个带有时间戳列的 postgre 数据库，并且我有一个 Python 中的 REST 服务，它在数据库中执行查询并将数据返回到 JavaScript 前端以使用`flot`.

现在我遇到的问题是`flot`可以使用 JavaScript 的 TIMESTAMP 自动处理日期，但我不知道如何将 Postgre 时间戳转换为 JavaScript TIMESTAMP（是时间戳，如果您不知道答案，则不是日期停止编辑）在 Python 中。我不知道这是否是最好的方法（也许转换可以在 JavaScript 中完成？）。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-22T19:57:36.523

在 postgres 中使用[date_part](http://www.postgresql.org/docs/9.0/static/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT)或 extract 来返回时间戳。

```
select date_part('epoch',mydatefield)*1000 from table; 
```

然后你可以直接发送它，注意这`epoch`是自 1970 年 1 月 1 日以来的*秒数*，而 JS需要*毫秒*，因此`*1000`. 如果您需要它实际上是一个日期，一旦您在 Javascript 中收到它，您可以通过调用将其转换为日期`new Date(timestamp_from_pg)`。

请注意，flot 可以将时间戳用作数字，而无需实际创建`Date`对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T19:48:01.207

您不能通过 JSON 发送 Python 或 Javascript“日期时间”对象。JSON 只接受更基本的数据类型，如字符串、整数和浮点数。

我通常这样做的方式是将其作为文本发送，使用 Python`datetime.isoformat()`然后在 Javascript 端解析它。

# java - 获取冒号后的数据并分行显示

> ID：15031861
> 
> 赞同：1
> 
> 时间：2013-02-22T19:33:12.000
> 
> 标签：java, string, split

我有一个这样的字符串：

```
"I have 2 friends: (i) ABC (ii) XYZ" 
```

现在如何显示如下：

```
I have 2 friends:

(i) ABC
(ii) XYZ 
```

我正在动态显示数据，所以我必须检查字符串是否包含：（冒号）。

我尝试过这样，`string.contains(":")`但我不知道如何进一步进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:37:33.367

```
String s = "I have 2 friends: (i) ABC (ii) XYZ";
s = s.replace(':',':\n');
s = s.replace('(','\n('); 
```

（不是一个通用的解决方案，但假设您的“朋友列表”格式是恒定的并且冒号表示列表的存在......您可以包装在 if(s.contains(':')){ ... } 块如果需要的话）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:37:10.990

```
String s = "I have 2 friends: (i) ABC (ii) XYZ";
String [] parts = s.split (":");
System.out.println (parts [0]);
System.out.println ();
Matcher m = Pattern.compile ("\\([^)]+\\)[^(]*").matcher (parts [1]);
while (m.find ()) System.out.println (m.group ()); 
```

输出是：

```
I have 2 friends

(i) ABC 
(ii) XYZ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T19:48:28.200

您可以使用 String 类的 indexOf 和 substring 方法来实现这一点。

```
System.out.println(str.substring(0, str.indexOf('(', 0)));
System.out.println();
System.out.println(str.substring(str.indexOf('(', 0), str.indexOf('(', str.indexOf('(', 0) + 1)));
System.out.println(str.substring(str.indexOf('(', str.indexOf('(', 0) + 1))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T19:47:48.623

以下将解决您的具体问题：

```
String str = "I have 2 friends: (i) ABC (ii) XYZ";

int indexOfColon = str.indexOf(":");
int lastIndexOfOpenParenthesis = str.lastIndexOf("(");

String upToColon = str.substring(0, indexOfColon);
String firstListItem = str.substring(indexOfColon + 1, lastIndexOfOpenParenthesis);
String secondListItem = str.substring(lastIndexOfOpenParenthesis);

String resultingStr = upToColon + "\n\n" + firstListItem + "\n" + secondListItem; 
```

查看[java.lang.String 文档](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html)，了解您的所有字符串操作需求！（在 Java 中）

# javascript - 画布游戏 ipad 性能低 iphone 好

> ID：15031864
> 
> 赞同：1
> 
> 时间：2013-02-22T19:33:36.307
> 
> 标签：javascript, xcode, ipad, cordova, canvas

（法国人指责我的英语；））

在 chrome firefox safari 和最近在移动设备上使用 phonegap 或钛开发 6 个月后，我使用 html5 完整画布完成了一个 javascript 太空射击游戏，该游戏在 iphone 模拟器和 iphone 4,4s 上具有良好的 fps。我选择不使用drawimage，不使用渐变等，并且我已经阅读了我的代码数千次以使其尽可能完美，我可以使用性能工具来分析任何浏览器上的每个功能......

游戏在iphone上运行正常，但我想在ipad上运行。如果我使用 xcode 在 iphone 上编译游戏并在 ipad 上玩它，使用 ipad 的选项 X2 游戏没问题，但我想要一个全屏游戏。所以，我在 1024 中制作了一个画布来代替 480。我所有的 vars 都经过调整，以使游戏以新的尺寸运行，这没关系。但是对于这种大小（代码和所有 lineto、arc 等都相同只是更大），游戏的 fps 很低。游戏更简单，因为游戏速度比iphone慢。

例如，在 iphone 上画一条弧线是可以的，但在 1024 宽度尺寸上，一条简单的弧线是要求更多 CPU 内存的功能之一。

我该怎么办，是否无法使用大尺寸的画布运行游戏？

我使用 ipad 3 1go ram...似乎绘制弧线和贝塞尔表格正在杀死我的 1024 尺寸设备。

我知道将来使用 arc() 不会有问题，但今天使用现代设备是个问题。我从未在 ipad 的 appstore 上看到过使用画布的游戏，你听说过吗？

非常感谢您的帮助或实验

# java - JDBC：只有在调用 commit() 方法不成功时，调用 rollback() 方法才有效？

> ID：15031866
> 
> 赞同：10
> 
> 时间：2013-02-22T19:33:44.640
> 
> 标签：java, jdbc, commit, rollback

我是 Java JDBC 新手，开发了一个小型数据库应用程序。我正在学习*O'Reilly - Database Programming with JDBC and Java 2nd Edition。*

`con.rollback()`只有`con.commit`不成功 才有效果？

我预计`con.rollback()`即使`con.commit()`成功，调用也会产生效果。换句话说，将其用作**“撤消”**操作。

`con.rollback()`成功后我尝试调用`con.commit()`，但它没有按预期工作。可以/预期吗？

这个例子来自我上面提到的书：

调用`con.rollback()`被注释掉。之前已经接近尾声了`con.close()`。我尝试取消注释并运行它。但是，成功`con.rollback()`后不会回滚`con.commit()`。

```
import java.sql.*;
import java.util.logging.Level;
import java.util.logging.Logger;

public class UpdateLogic
{

    public static void main(String args[])
    {
        Connection con = null;

        try
        {
            String driver = "com.mysql.jdbc.Driver";
            Class.forName(driver).newInstance();
            String url = "jdbc:mysql://localhost:3306/Company";
            Statement s;
            con = DriverManager.getConnection(url, "root", "");
            con.setAutoCommit(false); // make sure auto commit is off!
            s = con.createStatement();// create the first statement
            s.executeUpdate("INSERT INTO employee VALUES ('1', 'employee 1', '22','00-1234' )");

            s.close(); // close the first statement
            s = con.createStatement(); // create the second statement
            s.executeUpdate("INSERT INTO employee VALUES ('2', 'employee 2', '21','00_4321' )");

            con.commit(); // commit the two statements
            System.out.println("Insert succeeded.");
            s.close(); // close the second statement
        } catch (ClassNotFoundException | InstantiationException | IllegalAccessException ex)
        {
            Logger.getLogger(UpdateLogic.class.getName()).log(Level.SEVERE, null, ex);
        } catch (SQLException e)
        {
            if (con != null)
            {
                try
                {
                    con.rollback();
                } // rollback on error
                catch (SQLException i)
                {
                }
            }
            e.printStackTrace();
        } finally
        {
            if (con != null)
            {
                try
                {
                  //con.rollback();
                    con.close();
                } catch (SQLException e)
                {
                    e.printStackTrace();
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T19:46:12.190

当您调用 时`commit()`，您完成/关闭当前事务。因此，由于[`rollback()`](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#rollback%28%29)撤消了当前事务中的任何更改（根据 javadoc），它实际上什么都不做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T19:47:58.140

> con.rollback() 只有在 con.commit 不成功的情况下才有效吗？

**YES**而且如果你之前调用它也有效果`con.commit`。前提条件是连接的自动提交模式应该为 false 使用使用带有**[con.setAutoCommit(false)](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Connection.html#setAutoCommit%28boolean%29)**的JDBC`con.setAutoCommit(false)`
使用 SQL 查询在数据库中进行的任何事务在被调用之前都不会提交到数据库。您在数据库中创建的最新提交事务充当该连接的**[保存点](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Savepoint.html)**。当您调用**[con.rollback()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Connection.html#rollback%28%29)**时，您在此之后完成的所有事务都将被撤消。**[此外，如果在调用con.commit()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Connection.html#commit%28%29)**时发生一些异常，则表示事务未保存在数据库中。在语句中调用 if是一个好习惯`DML``con.commit()``savepoint``con.rollback()``catch``con.commit()`失败。

# java - 无法通过代理对象调用接口方法

> ID：15031868
> 
> 赞同：0
> 
> 时间：2013-02-22T19:33:48.813
> 
> 标签：java

```
import java.lang.reflect.*;
import java.util.*;
public class proxy {
    public static void main(String[] args) {
        String s ="Happy";
        InvocationHandler handler = new Handler(s);
        Class[] interfaces = s.getClass().getInterfaces();
        Object myproxy = Proxy.newProxyInstance(null,interfaces,handler);
        System.out.println(myproxy.compareTo("hoppu"));
    }
}

class Handler implements InvocationHandler {
    public Handler(Object t) {
        target = t;
    }
    public Object invoke(Object proxy,Method m,Object[] args) throws Throwable {
        System.out.println(m.getName());
        return m.invoke(target,args);
    }
    private Object target;
} 
```

代理对象可以在实现接口时调用接口。编译此代码时出现此错误。

```
proxy.java:19: cannot find symbol
symbol  : method compareTo(java.lang.String)
location: class java.lang.Object
    System.out.println(proxy.compareTo("hoppu"));
                            ^
1 error 
```

我也尝试过 Integer ...同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:37:18.850

您创建了代理对象，但`Comparable`在调用`compareTo`. 作为一个`Object`，Java 编译器不知道它`proxy`只是一个`Object`.

根据 Proxy 的[javadocs，](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)返回的代理必须转换为对象支持的接口，而不是原始对象的实际类。

```
Comparable c = (Comparable) Proxy.newProxyInstance(null,interfaces,handler);
System.out.println(c.compareTo("hoppu")); 
```

此外，正如其他人所指出的，调用您的类`proxy`和变量`proxy`可能会令人困惑。按照惯例，类名是大写的，例如“Proxy”，或者更好的是“MyProxy”，以避免与内置 Java`Proxy`类发生名称冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T19:37:40.243

您需要将返回的内容`proxy`转换为`String`，因为`Object`实际上并没有`compareTo(String)`.

**编辑**

我忘记了，您只能将创建的代理转换为接口。您可以使用@rgettman 解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:38:26.470

您的代理对象没有`compareTo`方法。即使它确实从 动态实现了该接口`String`，如果不将其转换为适当的接口（在本例中为 ），您也无法调用该方法`Comparable`。

# sql - SQL 子连接语法

> ID：15031869
> 
> 赞同：0
> 
> 时间：2013-02-22T19:34:15.610
> 
> 标签：sql, join, scope, alias

使用子连接时，我注意到产生相同结果的两种不同方式。在子连接中，使用“选择”连接两个表，然后给它一个别名，该别名将在后续行中引用。另一个只是“匿名”连接两个表，后续行使用 Sub-Join 的表别名。我有下面的示例代码。我的问题是：

1.  这些是等价的吗？一个只是节省击键？

2.  使用“选择”的人是否创建了一个临时表，而另一个人没有？

3.  两者之间会有性能差异吗？我认为不会有基于执行分析器的，但我想我会问。

4.  是否有一个或其他“子连接样式”的“名称”（例如，别名子连接与匿名子连接？）

5.  就表名和列名别名的范围规则而言，是否有任何好的文档可以有人指出我可以解释这样的情况？我已经搜索并找不到任何匹配的内容（尽管我不确定我是否“正确”搜索）？

这是两个查询：

```
SELECT bp1.*, b1.* 
from Bugs b1 
JOIN BugsProducts bp1 ON b1.bug_id = bp1.bug_id
LEFT OUTER JOIN (select b2.*, bp2.product_id 
                from Bugs b2 
                JOIN BugsProducts bp2 ON b2.bug_id = bp2.bug_id) AS sub1
ON (bp1.product_id = sub1.product_id AND (b1.date_reported < sub1.date_reported))
WHERE sub1.bug_id IS NULL;

SELECT bp1.*, b1.* 
from Bugs b1 
JOIN BugsProducts bp1 ON b1.bug_id = bp1.bug_id
LEFT OUTER JOIN (Bugs b2 JOIN BugsProducts bp2 ON b2.bug_id = bp2.bug_id)
ON (bp1.product_id = bp2.product_id AND (b1.date_reported < b2.date_reported))
WHERE b2.bug_id IS NULL; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:39:52.033

我进一步研究了这个主题，并找到了我正在寻找的答案。我希望这对将来的其他人有所帮助。

在“子查询”上执行 JOIN 时，与第一种情况一样，您必须为子查询提供别名，因此在引用来自该子查询的数据时必须使用该别名。加入子查询可以让您更详细地控制将返回的字段以及它们的格式等，因此在某些情况下，当您需要“自定义”数据时，这可能是更可取的。从这样的子查询返回的数据可以称为“虚拟表”或“派生表”等。

我的示例中的第二种情况只是“Mutli-Join”。它本身并没有什么特别之处。它涉及更少的输入，并且在不需要自定义返回字段时可能更可取。

这两个查询在我的环境中产生相同的执行路径。YMMV。

这是一篇很好的文章，它解释了子查询和连接（以及其他子查询主题）以获得更完整的描述： [https ://www.simple-talk.com/sql/sql-training/subqueries-in-sql-server/](https://www.simple-talk.com/sql/sql-training/subqueries-in-sql-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T21:43:41.807

你能用这个吗？：

```
SELECT bp1.*, b1.* 
FROM bugs b1, bugsproducts bp1 
WHERE b1.bug_id = bp1.bug_id AND b1.bug_is IS NULL 
```

因为别名对我来说似乎更容易，而且代码更简洁更短

什么应该

```
(b1.date_reported < b2.date_reported) 
```

返回，不是 b1 = Bugs 和 b2 = Bugs，因此是同一张表

# php - 尝试针对数据库验证电子邮件字段以防止联系表单中的重复

> ID：15031873
> 
> 赞同：0
> 
> 时间：2013-02-22T19:34:21.757
> 
> 标签：php, mysql, database, stored-procedures, contact-form

我的网站上有一个联系表，我想防止使用同一电子邮件的用户多次联系。

在存储数据的 mySQL 数据库上，我创建了存储过程

```
DELIMITER //
CREATE PROCEDURE find_email(emailaddr VARCHAR(60))
BEGIN

DECLARE form_email VARCHAR(60);
SET form_email=emailaddr;

SELECT count(*)
FROM wordpress.cf7dbplugin_submits
WHERE form_name='Register'
AND field_name LIKE '%email%'
AND field_value=form_email;
END // 
```

这样我就可以从一个电子邮件地址在数据库中出现的次数中得到一个数字。

在我的 PHP 文件中，我这样做了

```
Global $res;
$res = $mydb->query("CALL find_email");
if($res>0)
{
echo "<script>alert('This email address is already in use!')</script>";
}
else
{
$tableName = $this->getSubmitsTableName();
            $parametrizedQuery = "INSERT INTO `$tableName` (`submit_time`, `form_name`, `field_name`, `field_value`, `field_order`) VALUES (%s, %s, %s, %s, %s)";
            $parametrizedFileQuery = "INSERT INTO `$tableName` (`submit_time`, `form_name`, `field_name`, `field_value`, `field_order`, `file`) VALUES (%s, %s, %s, %s, %s, %s)";
            $order = 0;
            $noSaveFields = $this->getNoSaveFields();
            $foundUploadFiles = array();
            global $mydb;
 } 
```

如果我更改我的代码并手动将 $res 设置为 0，则表单会像预期的那样工作。否则，当我单击提交按钮时，什么也不会发生。

希望我提供了足够的细节，提前感谢任何有解决方案的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:23:55.770

你把所有这些东西都复杂化了太多。首先，如果你真的不需要，不要在 MySQL 中使用存储过程。相反，使用纯：

```
SELECT count(*) FROM table WHERE email LIKE '%value%' 
```

第二。您应该提供表单的 HTML，以便我知道您的 $_POST 变量是什么。例如，如果您的表单如下所示：

```
<form ...>
  <input type="text" id="mail" name="mail" />
</form> 
```

然后，您将使用 .php 访问 PHP 脚本中的电子邮件`$_POST['mail']`。

第三。这取决于一个 PHP 脚本/框架控制器是否同时处理显示原始表单（获取）和提交（发布），或者它们是不同的 PHP 脚本/控制器。如果您使用一个文件，它应该如下所示：

```
if (isset($_POST['email'])) {
  // process - check SQL and eventually display javascript alert
} else  { // get
  // display the form
} 
```

希望有帮助。我建议你阅读一些教程，因为如果你不明白你在问什么，提问可能并不总是有帮助。

# ios - 如何从我的应用程序内部发送 APNS

> ID：15031875
> 
> 赞同：0
> 
> 时间：2013-02-22T19:34:23.993
> 
> 标签：ios, xcode, push-notification, apple-push-notifications

我不想让远程服务器发送 APNS 有效负载，而是希望我的应用程序发送，因为它们只是基于单个计时器的 APNS 有效负载。这可能吗？我真的不想为了这么简单的事情而创建一个完整的 Web 服务器。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:35:35.460

搜索本地推送通知，应该有足够的资源可用，是的，您不需要网络服务器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T14:21:40.310

[这个](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)Apple 文档页面会有所帮助。

# javascript - 为什么缩小的代码不等同于原始代码？

> ID：15031876
> 
> 赞同：7
> 
> 时间：2013-02-22T19:34:26.750
> 
> 标签：javascript, minify, slickgrid

当我在发布模式下运行我的 MVC 4 项目时，使用[SlickGrid](https://github.com/mleibman/SlickGrid)的一个页面没有正确显示（网格非常非常高，并且缺少网格单元格）。

但是，我认为这不是 SlickGrid 的问题，而是捆绑器（`System.Web.Optimization`集成到 MVC 4 中）如何缩小代码的问题。

我抓住了缩小的 JavaScript，并开始一次在一个区域反转缩小，直到问题得到解决。我发现改变（并原谅滚动，我想保持缩小版本完全不变）

```
function SlickFilter(n,t){var i=n.option,r=t.searchString;return n.pctSortKey.key<t.percentCompleteThreshold||r!=""&&i.indexOf(r)==-1&&i!="Unweighted Response"&&i!="Median"&&i!="Average"?!1:!0} 
```

对原来的

```
function SlickFilter(item, args) {
    if (item.pctSortKey.key < args.percentCompleteThreshold) {
        return false;
    }

    if (args.searchString != "" && item.option.indexOf(args.searchString) == -1 && item.option != "Unweighted Response" && item.option != "Median" && item.option != "Average") {
        return false;
    }

    return true;
} 
```

如果缩小文件的所有其他元素未更改，则解决问题。

该函数的使用如下：

```
dataView.setFilter(SlickFilter); 
```

为 SlickGrid 提供回调函数以过滤掉某些结果。

原始函数和缩小函数如何不等价？

**更新**

SlickGrid 正在“编译”我提供的过滤器功能。该编译步骤在缩小版本中失败。编译后的缩小代码如下所示：

```
function anonymous(_items,_args) {
var _retval = [], _idx = 0; var n,  t = _args; _coreloop: for (var _i = 0, _il = _items.length; _i < _il; _i++) { n = _items[_i]; 
    //debugger;
    var i = n.option,
        r = t.searchString;

    return 
    n.pctSortKey.key < t.percentCompleteThreshold 
    || 
    r !="" 
        && i.indexOf(r)==-1 
        && i != "Unweighted Response" 
        && i != "Median"
        && i != "Average"
? !1
: !0
; } return _retval; 
} 
```

注意多个*return*语句。

有了这个额外的见解，我能够识别出一个相关的 SlickGrid 错误：

[https://github.com/mleibman/SlickGrid/issues/301](https://github.com/mleibman/SlickGrid/issues/301)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T20:13:31.520

我看到的一个区别是 item.option 和 args.searchString 正在被评估，即使第一个条件为真，而它们不会出现在原始代码中。

您是否尝试过进入代码以查看值是什么以及它如何作用于它们？

这是未修改的缩小代码，以保存其他人做同样的事情，或者如果您想尝试并进入它。

```
function SlickFilter(n,t) {
var i = n.option,
    r = t.searchString;

return 
        n.pctSortKey.key < t.percentCompleteThreshold 
        || 
        r !="" 
            && i.indexOf(r)==-1 
            && i != "Unweighted Response" 
            && i != "Median"
            && i != "Average"
    ? !1
    : !0
} 
```

**编辑**（由 OP）

这让我走上了正确的道路，但事实证明 SlickGrid 正在“编译”过滤器功能。有一个已知问题是编译器有时会失败。实际上，编译是可选的，在这种情况下不是必需的，因为压缩器已经生成了优化的代码。

[https://github.com/mleibman/SlickGrid/issues/301](https://github.com/mleibman/SlickGrid/issues/301)

# performance - 提高将扁平 LINQ2SQL 结果转换为 3 级分层对象的性能

> ID：15031878
> 
> 赞同：0
> 
> 时间：2013-02-22T19:34:36.507
> 
> 标签：performance, linq-to-sql, lambda, hierarchy

我从我们的 MSSQL 2008 DB 中通过存储过程调用检索了一个大型数据集。数据集是 300,000 多行扁平的分层数据（Events>InventorySpaces>ScheduledInventorySpaces）或（Parent>Child>GrandChild）

出于处理原因，我需要将其转换为分层对象模型并对其进行分析。

我在创建分层对象时遇到了处理延迟，并希望获得社区对如何加快这一进程的意见。普林克？Lambda 加入？ETC？

类定义如下：

```
 public class Evt
{
    public int NetCodeID { get; set; }
    public int EventID { get; set; }
    public int SiteID { get; set; }
    public bool HomeGame { get; set; }
    public string Days { get; set; }
    public int DayBit { get; set; }
    public int EventIDRC { get; set; }
    public List<InvSpace> InvSpaces { get; set; }

    public Evt()
    {
    }

    public Evt(int netcodeid, int eventid, int siteid, bool homegame, string days, int daybit, int eventidrc)
    {
        this.NetCodeID = netcodeid;
        this.EventID = eventid;
        this.SiteID = siteid;
        this.HomeGame = homegame;
        this.Days = days;
        this.DayBit = daybit;
        this.EventIDRC = eventidrc;
        this.InvSpaces = new List<InvSpace>();
    }

    public Evt(int netcodeid, int eventid, int siteid, bool homegame, string days, int daybit, int eventidrc, List<InvSpace> invspaces)
    {
        this.NetCodeID = netcodeid;
        this.EventID = eventid;
        this.SiteID = siteid;
        this.HomeGame = homegame;
        this.Days = days;
        this.DayBit = daybit;
        this.EventIDRC = eventidrc;
        this.InvSpaces = invspaces;
    }

}

class EvtResultEqualityComparer : IEqualityComparer<USP_GetAvailableScheduledInventorySpacesResult>
{
    public bool Equals(USP_GetAvailableScheduledInventorySpacesResult x, USP_GetAvailableScheduledInventorySpacesResult y)
    {
        return Equals(x.EventID, y.EventID);
    }

    public int GetHashCode(USP_GetAvailableScheduledInventorySpacesResult x)
    {
        return x.EventID.GetHashCode();
    }
}

    public class InvSpace
{
    public int InventorySpaceID { get; set; }
    public string InventoryName { get; set; }
    public int OrderNumber { get; set; }
    public int InventoryClearanceTypeBit { get; set; }
    public int InventoryClearanceTypeID { get; set; }
    public int InventoryProductTypeID { get; set; }
    public int InventoryTypeID { get; set; }
    public int AvailableLength { get; set; }
    public List<string> InventoryGroupAdvertiserCategories { get; set; }
    public List<string> AdvertiserCategories { get; set; }
    public int? Positions { get; set; }
    public List<ScheduledInvSpace> ScheduledInvSpaces { get; set; }

    public InvSpace()
    {
    }

    public InvSpace(int inventoryspaceid, string inventoryname, int ordernumber, int inventoryclearancetypebit, int inventoryclearancetypeid, int inventoryproducttypeid, int inventorytypeid)
    {
        this.InventorySpaceID = inventoryspaceid;
        this.InventoryName = inventoryname;
        this.OrderNumber = ordernumber;
        this.InventoryClearanceTypeBit = inventoryclearancetypebit;
        this.InventoryClearanceTypeID = inventoryclearancetypeid;
        this.InventoryProductTypeID = inventoryproducttypeid;
        this.InventoryTypeID = inventorytypeid;
        this.InventoryGroupAdvertiserCategories = new List<string>();
        this.AdvertiserCategories = new List<string>();
        this.ScheduledInvSpaces = new List<ScheduledInvSpace>();
        this.AvailableLength = ScheduledInvSpaces.Count*5;
    }

    public InvSpace(int inventoryspaceid, string inventoryname, int ordernumber, int inventoryclearancetypebit, int inventoryclearancetypeid, int inventoryproducttypeid, int inventorytypeid, string inventorygroupadvertisercategories, string advertisercategories, int positions)
    {
        this.InventorySpaceID = inventoryspaceid;
        this.InventoryName = inventoryname;
        this.OrderNumber = ordernumber;
        this.InventoryClearanceTypeBit = inventoryclearancetypebit;
        this.InventoryClearanceTypeID = inventoryclearancetypeid;
        this.InventoryProductTypeID = inventoryproducttypeid;
        this.InventoryTypeID = inventorytypeid;
        this.InventoryGroupAdvertiserCategories = inventorygroupadvertisercategories != null
                                                    ? inventorygroupadvertisercategories.Split('|').ToList()
                                                    : new List<string>();
        this.AdvertiserCategories = advertisercategories != null
                                        ? advertisercategories.Split('|').ToList()
                                        : new List<string>();
        this.Positions = positions;
        this.ScheduledInvSpaces = new List<ScheduledInvSpace>();
        this.AvailableLength = ScheduledInvSpaces.Count * 5;
    }

    public InvSpace(int inventoryspaceid, string inventoryname, int ordernumber, int inventoryclearancetypebit, int inventoryclearancetypeid, int inventoryproducttypeid, int inventorytypeid, string inventorygroupadvertisercategories, string advertisercategories, int positions, List<ScheduledInvSpace> scheduledinvspaces)
    {
        this.InventorySpaceID = inventoryspaceid;
        this.InventoryName = inventoryname;
        this.OrderNumber = ordernumber;
        this.InventoryClearanceTypeBit = inventoryclearancetypebit;
        this.InventoryClearanceTypeID = inventoryclearancetypeid;
        this.InventoryProductTypeID = inventoryproducttypeid;
        this.InventoryTypeID = inventorytypeid;
        this.InventoryGroupAdvertiserCategories = inventorygroupadvertisercategories != null
                                                    ? inventorygroupadvertisercategories.Split('|').ToList()
                                                    : new List<string>();
        this.AdvertiserCategories = advertisercategories != null
                                        ? advertisercategories.Split('|').ToList()
                                        : new List<string>();
        this.Positions = positions;
        this.ScheduledInvSpaces = scheduledinvspaces;
        this.AvailableLength = ScheduledInvSpaces.Count * 5;
    }
}

class InvSpaceResultEqualityComparer : IEqualityComparer<USP_GetAvailableScheduledInventorySpacesResult>
{
    public bool Equals(USP_GetAvailableScheduledInventorySpacesResult x, USP_GetAvailableScheduledInventorySpacesResult y)
    {
        return Equals(x.InventorySpaceID, y.InventorySpaceID) && Equals(x.EventID, y.EventID);
    }

    public int GetHashCode(USP_GetAvailableScheduledInventorySpacesResult x)
    {
        return x.InventorySpaceID.GetHashCode();
    }
}

    public class ScheduledInvSpace
{
    public int ScheduledInventorySpaceID { get; set; }
    public int SlotID { get; set; }
    public int Length { get; set; }
    public int? ContractOrderID { get; set; }
    public int? RotationID { get; set; }
    public int InventorySequence { get; set; }
    public string InventoryGroupAdvertiserCategoryRule { get; set; }
    public string AdvertiserCategoryRule { get; set; }
    public int? PositionRule { get; set; }
    public string BumpRule { get; set; }
    public string ClearanceRule { get; set; }
    public bool? Bonus { get; set; }

    public ScheduledInvSpace()
    {
    }

    public ScheduledInvSpace(int scheduledinventoryspaceid, int slotid, int length, int inventorysequence, string inventorygroupadvertisercategoryrule, string advertisercategoryrule, int? positionrule, string bumprule, string clearancerule, bool? bonus)
    {
        this.ScheduledInventorySpaceID = scheduledinventoryspaceid;
        this.SlotID = slotid;
        this.Length = length;
        this.ContractOrderID = null;
        this.RotationID = null;
        this.InventorySequence = inventorysequence;
        this.InventoryGroupAdvertiserCategoryRule = inventorygroupadvertisercategoryrule;
        this.AdvertiserCategoryRule = advertisercategoryrule;
        this.PositionRule = positionrule;
        this.BumpRule = bumprule;
        this.ClearanceRule = clearancerule;
        this.Bonus = bonus;
    }

    public ScheduledInvSpace(int scheduledinventoryspaceid, int slotid, int length, int? contractorderid, int? rotationid, int inventorysequence, string inventorygroupadvertisercategoryrule, string advertisercategoryrule, int? positionrule, string bumprule, string clearancerule, bool? bonus)
    {
        this.ScheduledInventorySpaceID = scheduledinventoryspaceid;
        this.SlotID = slotid;
        this.Length = length;
        this.ContractOrderID = contractorderid;
        this.RotationID = rotationid;
        this.InventorySequence = inventorysequence;
        this.InventoryGroupAdvertiserCategoryRule = inventorygroupadvertisercategoryrule;
        this.AdvertiserCategoryRule = advertisercategoryrule;
        this.PositionRule = positionrule;
        this.BumpRule = bumprule;
        this.ClearanceRule = clearancerule;
        this.Bonus = bonus;
    }
}

class SheduledInvSpaceResultEqualityComparer : IEqualityComparer<USP_GetAvailableScheduledInventorySpacesResult>
{
    public bool Equals(USP_GetAvailableScheduledInventorySpacesResult x, USP_GetAvailableScheduledInventorySpacesResult y)
    {
        return Equals(x.ScheduledInventorySpaceID, y.ScheduledInventorySpaceID);
    }

    public int GetHashCode(USP_GetAvailableScheduledInventorySpacesResult x)
    {
        return x.ScheduledInventorySpaceID.GetHashCode();
    }
} 
```

我正在使用以下代码填充此层次结构：

```
List<Evt>games = results
                            .Distinct(new EvtResultEqualityComparer())
                            .Select(e => 
                                new Evt(e.NetCodeID.Value, e.EventID.Value, e.SiteID.Value, e.HomeGame.Value, e.Days, e.DayBit.Value, e.EventIDRC.Value, results
                                    .Distinct(new InvSpaceResultEqualityComparer())
                                    .Where(i => i.EventID.Value == e.EventID.Value && i.InventoryProductTypeID.Value == (ProductTypes[i.EventIDRC.Value % ProductTypes.Count]))
                                    .Select(i => 
                                        new InvSpace(i.InventorySpaceID.Value, i.InventoryName, i.OrderNumber.Value, i.InventoryClearanceTypeBit.Value, i.InventoryClearanceTypeID.Value, i.InventoryProductTypeID.Value, i.InventoryTypeID.Value, i.InventoryGroupAdvertiserCategoryRule, i.AdvertiserCategoryRule, i.PositionRule.GetValueOrDefault(0), results
                                            .Distinct(new SheduledInvSpaceResultEqualityComparer())
                                            .Where(s => s.EventID.Value == e.EventID.Value && s.InventorySpaceID.Value == i.InventorySpaceID.Value)
                                            .Select(s => 
                                                new ScheduledInvSpace(s.ScheduledInventorySpaceID.Value, s.SlotID.Value, s.Length.Value, s.ContractOrderID, s.RotationID, s.InventorySequence.Value, s.InventoryGroupAdvertiserCategoryRule, s.AdvertiserCategoryRule, s.PositionRule.GetValueOrDefault(0), s.BumpRule, s.ClearanceRule, s.Bonus)).ToList()
                                                )).Where(i => i.AvailableLength >= length).ToList())).ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T21:01:27.030

解决方案是使用 LINQ group by。如果您避免使用 Lambda 表达式 group by 并坚持使用 select from group by，则更容易阅读。

# web-services - 与SOAP Web服务的JQuery Ajax通信需要身份验证

> ID：15031883
> 
> 赞同：0
> 
> 时间：2013-02-22T19:34:47.737
> 
> 标签：web-services, jquery, authentication, soap

要访问 Web 服务，请求需要使用用户名和密码进行身份验证，如何将它们添加到我的代码中：

```
function sendReq()
{    var wsUrl = "*******";
    var soapRequest ='<?xml version="1.0" encoding="utf-8"?>'+
        '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">'+
  '<soap:Body>'+
    '<UpdateImage xmlns="*******">'+
      '<urlSite>*********</urlSite>'+
      '<iListName>{*****}</iListName>'+
      '<iUpdateMode>****</iUpdateMode>'+
      '<iMetaData><Fields><Field Name="Title" >'+my_var1+'</Field></Fields></iMetaData>'+
      '<iAttachments><Attachments><Attachment Name="Nom du fichier 1">'+my_var2+'</Attachment></Attachments></iAttachments>'+
      '<iOverWrite>*****</iOverWrite>'+
    '</UpdateImage>'+
  '</soap:Body>'+
'</soap:Envelope>';
   $.ajax({
                    type: "POST",
                    url: wsUrl,
                    contentType: "text/xml; charset=utf-8",
                    dataType: "xml",
                    data: soapRequest,
                    beforeSend: function (xhr){ 
        xhr.setRequestHeader("SOAPAction", "****/UpdateImage");
    },                
    contentType: "text/xml; charset=utf-8",
            success: processSuccess,
            error: processError
        }); 
```

返回假；

# jpa - JPA 实体延迟加载功能是否会导致不可重复读取？

> ID：15031887
> 
> 赞同：2
> 
> 时间：2013-02-22T19:35:12.027
> 
> 标签：jpa, locking, lazy-loading, consistency

JPA实体延迟加载功能会导致不可重复读取现象吗？它会导致给定实体和延迟加载的相关实体（例如@OneToMany）之间的不一致吗？

让我用一个（相当复杂的）例子来说明这些问题。取两个 JPA 实体，Department (1) <--> (N) Employee。我们要计算公司的工资总额：

```
@Stateless
public class EmployeeManagerImpl implements EmployeeManager {

  public long calculateDepartmentTotals() {
    long total = 0;

    for (Department dept : findAllDepartments()) {  // SELECT all departments
      for (Employee emp : dept.getEmployees()) {    // Lazy-loading of employees
        total += emp.getSalary();
      }
    }
    return total;
  }
} 
```

首先，我们从数据库中选择所有部门（在 t0）。然后，我们迭代这个集合，并在 t1, t2, t3...tn 时间点为每个部门惰性地 getEmployees()。现在，如果其他交易在 t0 和 tn 之间将员工从一个部门转移到另一个部门，则员工工资可能会加起来两次（或没有）。所以我猜工资总额可能计算不正确。

此外，如果我们在网页中显示每个部门的员工列表，那么我们也会将该员工列出两次（或没有）。

我的猜测正确吗？

PS：当然，上述问题可以通过使用 LEFT JOIN FETCH 或将员工锁定在 Optimistic Read 模式来解决，但我想知道延迟加载（如果有的话）可能出现的潜在一致性问题。我在互联网上搜索并没有找到任何参考。

# php - 比较两个数组并删除 - PHP ARRAY

> ID：15031891
> 
> 赞同：-1
> 
> 时间：2013-02-22T19:35:33.330
> 
> 标签：php, arrays

请看下面的数组，我想在数组while循环中隐藏6和7，因为它们在第一个数组中，基本上是它的时间。第一个数组包含约会，第二个数组包含时间。如果用户当时已经固定在某个地方，我想省略计时（第二个数组）。所以基本上时间比较与 strtotime 整数..需要你的帮助....

```
Array
(
    [3] => Array
        (
            [id] => 100
            [start] => 1364558400
            [end] => 1364565600
            [starttime] => 2013-03-29 17:30:00
            [endtime] => 2013-03-29 19:30:00
        )

    [4] => Array
        (
            [id] => 100
            [start] => 1364542200
            [end] => 1364549400
            [starttime] => 2013-03-29 13:00:00
            [endtime] => 2013-03-29 15:00:00
        )

)
Array
(
    [6] => Array
        (
            [id] => 37
            [start] => 1364542200
            [end] => 1364549400
            [starttime] => 2013-03-29 13:00:00
            [endtime] => 2013-03-29 15:00:00
        )

    [7] => Array
        (
            [id] => 38
            [start] => 1364549400
            [end] => 1364556600
            [starttime] => 2013-03-29 15:00:00
            [endtime] => 2013-03-29 17:00:00
        )

    [8] => Array
        (
            [id] => 39
            [start] => 1364558400
            [end] => 1364565600
            [starttime] => 2013-03-29 17:30:00
            [endtime] => 2013-03-29 19:30:00
        )

    [9] => Array
        (
            [id] => 40
            [start] => 1364565600
            [end] => 1364571000
            [starttime] => 2013-03-29 19:30:00
            [endtime] => 2013-03-29 21:00:00
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:39:45.127

据我了解您的问题，您应该取消设置第二个数组的元素。假设您的数组是：

```
$appointments = array(...);
$timings = array(...); 
```

你应该做

```
if (condition_is_met($appointments)) {
    unset($timings[$id]);
} 
```

那是你需要的吗？

编辑：我猜你正在寻找这样的东西：

```
foreach($timings as $timing) { // check if this timing is already busy
  $id = null;
  foreach ($appointments as $id => $appointment) {
    if ($appointment['start'] == $timing['start'] &&
      $appointment['end'] == $timing['end'] ) {
      $found = $id;
      break;
    }
  }
  if ($id) unset($appointments[$id]);
} 
```

这取决于处理时间的条件是什么 - 两个元素的开始和结束应该相同，或者从同一时期起至少有一秒钟。您可以更改 if 语句并将任何您想要的内容放在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:41:41.710

据我了解，如果它们出现在第一个数组中，您正在尝试删除第二个数组中的元素。请参见：

```
foreach($array2 as $i)
{
  if (in_array($i, $array1))
  {
    unset($i);
  }
} 
```

参考。 [http://php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

或者，您可以创建如下函数：

```
function checkItemExists($arr1, $arr2)
{
  $index1 = 0;
  $index2 = 0;
  foreach ($arr1 as $i)
  {
    foreach ($i as $j)
    {
      if ($j == $arr2[$index1][$index2])
      {
        unset($arr2[$index1][$index2]);
      }
     index2++;
    }
   $index1++;
   $index2 = 0;
  }
} 
```

# entity-framework - 如何保护 EF 连接字符串？

> ID：15031893
> 
> 赞同：0
> 
> 时间：2013-02-22T19:35:36.793
> 
> 标签：entity-framework, security

我在独立的 WPF 客户端中使用 Entity Framework 5。如何配置实体框架，以使连接字符串中的数据库密码不在内存中的纯文本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:53:15.640

处理数据库的连接字符串安全性有两种主要方法。

正如@MUG4N 和@BNicoll 正确指出的那样，您可以加密app.config（或web.config）中的连接字符串，这将避免轻松读取设置。但是，在这种情况下，实际的用户名和密码仍然存储在机器上，这意味着您可以通过一些工作来检索明文密码。

在我看来，更好的解决方案是使用运行应用程序的帐户直接使用 SQL 进行身份验证。这意味着用户名/密码永远不会在身份验证周期中使用，而是使用基于 NTLM 或 kerberos 令牌的身份验证，这更加安全并且不需要存储可解密的密码。

要使用此方法，您需要确保您在域中，并授予运行应用程序的用户帐户访问数据库的权限。然后，您需要将连接字符串中的用户名/密码替换为`Integrated Security=SSPI;`

不幸的是，这种方法要求您在 Windows 域中运行，这可能不适合您的情况。

查看有关[连接字符串安全性的MS 白皮书](http://msdn.microsoft.com/en-us/library/89211k9b%28v=vs.80%29.aspx)

# sql - SQL Server 相当于 Oracle CONNECT BY 和 LEVEL 伪列

> ID：15031897
> 
> 赞同：7
> 
> 时间：2013-02-22T19:35:49.100
> 
> 标签：sql, sql-server, oracle

请帮助将 Oracle 查询转换为等效的 SQL Server：

```
SELECT (LEVEL+1-1) AS lvl 
  FROM dual
CONNECT BY LEVEL <= 10
/ 
```

输出是从 1 到 10 的数字：

```
LVL
----
1
2
3
...
10 
```

我知道 SQL Server 中有层次结构方法和内置方法`GetLevel`等等。这可以用来获得相同的结果吗？

如果需要（不确定）创建双表 - 从这里复制：http: [//blog.sqlauthority.com/2010/07/20/sql-server-select-from-dual-dual-equivalent/](http://blog.sqlauthority.com/2010/07/20/sql-server-select-from-dual-dual-equivalent/)

```
CREATE TABLE DUAL
(
DUMMY VARCHAR(1)
)
GO
INSERT INTO DUAL (DUMMY)
VALUES ('X')
GO 
```

专门寻找可以让使用 smth 的示例。就像查询中的 LEVEL 一样。例如：表格中只有一个开始日期 - 2013 年 4 月 22 日。但是使用 LEVEL 我可以按如下方式增加它：

```
SELECT start_date, start_date+LEVEL-1 AS start_date_btwn
  FROM my_tab
 WHERE id = 1
CONNECT BY LEVEL<=10
/

START_DATE    START_DATE_BTWN
------------------------------
4/22/2013    4/22/2013
4/22/2013    4/23/2013
4/22/2013    4/24/2013
4/22/2013    4/25/2013
......
4/22/2013    4/30/2013 
```

非常感谢大家提前。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-22T19:45:33.057

我过去做过的一种方法是这样查询`spt_values`：

```
SELECT number
FROM master..spt_values
WHERE 
    type = 'P'
    AND number <= 255 
```

但是，它没有完整的数字列表。另一种选择是创建一个递归 CTE，如下所示：

```
WITH CTE AS (
  SELECT 1 as Number
  UNION ALL
  SELECT Number+1
  FROM CTE 
  WHERE Number < 100 
)
SELECT * FROM CTE 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/d41d8/9385)

# xna - 移除焦点时 XNA 运行缓慢

> ID：15031898
> 
> 赞同：3
> 
> 时间：2013-02-22T19:35:51.373
> 
> 标签：xna, lostfocus

我只是想知道，在制作游戏时，我注意到 IsRunningSlowly 的 GameTime 值在我的游戏有焦点时返回 false（应该如此），但是当我更改应用程序时，它变为 true。我什至做了一个空游戏，即使它失去焦点，IsRunningSlowly 的 GameTime 值也会返回 true。我想知道为什么它会这样做？只是我的电脑，还是 XNA 的创造者是这样设计的？帧速率看起来不错，但值是真实的。没什么大不了的，我只是真的很好奇！

[空游戏]

```
 public class Game1 : Microsoft.Xna.Framework.Game
{
    #region Constuctors

    public Game1()
    {
        this.GraphicsManager = new Microsoft.Xna.Framework.GraphicsDeviceManager(this);
        this.Content.RootDirectory = "Content";
    }

    #endregion
    #region Overrides

    protected override void LoadContent()
    {
        this.SpriteBatch = new Microsoft.Xna.Framework.Graphics.SpriteBatch(this.GraphicsDevice);
        base.LoadContent();
    }
    protected override void Update(Microsoft.Xna.Framework.GameTime GameTime)
    {
        System.Console.WriteLine(GameTime.IsRunningSlowly);
        Microsoft.Xna.Framework.Input.KeyboardState Keyboard = Microsoft.Xna.Framework.Input.Keyboard.GetState();
        if (Keyboard.IsKeyDown(Microsoft.Xna.Framework.Input.Keys.Escape)) this.Exit();
        base.Update(GameTime);
    }
    protected override void Draw(Microsoft.Xna.Framework.GameTime gameTime)
    {
        GraphicsDevice.Clear(Microsoft.Xna.Framework.Color.CornflowerBlue);
        base.Draw(gameTime);
    }

    #endregion
    #region Variables

    private Microsoft.Xna.Framework.GraphicsDeviceManager GraphicsManager { get; set; }
    private Microsoft.Xna.Framework.Graphics.SpriteBatch SpriteBatch { get; set; }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-15T19:51:01.237

我会尝试回答这个问题，而不是发布“这就是它的样子”。XNA 线程在失去焦点时休眠。它是在 XNA 的游戏类中配置的。

```
InactiveSleepTime = new TimeSpan(0); 
```

默认设置为 20ms，设置为 0 将使 XNA 在失去焦点时全速运行。

IsRunningSlowly 设置为 true，因为帧速率低于 60（这是设置 IsFixedTimeStep 时的默认值）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-22T20:06:26.783

这是设计使然。游戏是目前最消耗资源的应用程序之一，因此 XNA 框架开发人员自然认为，在游戏不聚焦时丢弃一些帧以节省一些 CPU 用于您可能想要执行的其他操作可能是个好主意而游戏在后台。

`Draw`XNA 游戏在其主窗口最小化时也不进行调用。我相信`Update`电话永远不会掉线（尽管我可能错了）。

# eclipse - Eclipse项目（或项目中的Java包）显示错误，但没有一个孩子有错误

> ID：15031899
> 
> 赞同：0
> 
> 时间：2013-02-22T19:35:51.833
> 
> 标签：eclipse

![错误未反映在孩子之间](../Images/40094cd0f0c288101546e023d0b86dd9.png)

在 Eclipse 中，我有多个发生这种行为的地方。如上面的示例所示，项目可以显示错误，但其子项都没有错误。我无法弄清楚我需要修复的错误在哪里。此外，如下所示，在 Java 项目中，包上可能存在错误，当展开时，其子项中没有错误。

![未在子项中反映的包错误](../Images/bf6361c9eb0df8c8f7cad66bc7c24058.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T22:58:47.947

我要做的就是做一个**Project > Clean**。不要清理所有项目，选择**下面选中的清理项目**并选择您的项目。

如果这不起作用，请单击屏幕底部的**标记选项卡。**
[标记选项卡](https://www.dropbox.com/s/l0e082g0db7la3d/2-24-2013%2000-50-44.png)

如果您的标记选项卡已关闭。您可以使用**Window > Show View > Markers**

标记选项卡将始终显示问题。有时，它会是一个缺失的资源，有时它甚至可能是一个配置文件，如 persistence.xml 或 faces-config.xml。

# mysql - mysql where number in set

> ID：15031900
> 
> 赞同：0
> 
> 时间：2013-02-22T19:35:56.187
> 
> 标签：mysql

我正在寻找一个选择语句来检查一个数字是否在一个特定的集合中。例如：

4000,5000,5500-5560,7244

是否可以将其构建到 mysql 查询中，还是我必须手动构建查询：

```
 Select * from table where x=4000 or x=5000 or x between 5500 and 5560 or x=7244 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:41:53.403

是的，它可以构建这个查询，但你需要一些`()`

试试这个

```
 Select * from table where x in (4000,5000,7244 ) or x between 5500 and 5560 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:49:43.627

看起来这将是最好的查询：

```
SELECT * FROM table WHERE x IN (4000, 5000, 7244) OR (x >= 5500 AND x <= 5560); 
```

# java - 有没有办法从多图中的值中获取所有键？

> ID：15031903
> 
> 赞同：9
> 
> 时间：2013-02-22T19:36:06.723
> 
> 标签：java, guava, multimap

假设我有一个番石榴 Multimap。我有一个值“Foo”，它可能属于一个或多个键。有什么办法可以找出哪些键包含条目“Foo”？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-22T19:42:53.927

您可以反转 Multimap。为此，您可以使用方法[`Multimaps.invertFrom`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimaps.html#invertFrom%28com.google.common.collect.Multimap,%20M%29)。

例如，如果您的 Multimap 是`Multimap<String, String>`

```
Multimap<String, String> invertedMultimap = Multimaps.invertFrom(myMultimap, ArrayListMultimap.<String, String>create()); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-23T18:01:14.487

如果您有一个`ImmutableMultimap`，只要有可能，这是一个好主意，您可以调用`.inverse().get(v)`它。

# ios - 在 iOS 应用程序中使用 webviews 伪造位置？

> ID：15031905
> 
> 赞同：0
> 
> 时间：2013-02-22T19:36:10.920
> 
> 标签：ios, objective-c, uiwebview, core-location

可以在 iOS UIWebViews 中伪造位置。在模拟器或设备中。

因此，当 webview 访问需要位置的站点（如 maps.google.com）时，可以将虚假的位置数据（和路线）提供给 webview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T20:38:52.533

您可以运行 XCode 中提供的一些位置文件。运行“iPhone Simulator”时，您可以通过导航到菜单栏中的 Debug->Locations 来运行文件。这些是 plist 的，它们包含 CLLocation 对象的存档对象。

它们可以在以下目录中找到：

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk/System/Library/Frameworks/CoreLocation.framework/Support/SimulationScenarios

只需将 6.1 更改为您正在使用的模拟器

# c++ - 如何返回一个变量，以便可以在 C++ 的另一个函数中使用它？

> ID：15031907
> 
> 赞同：-3
> 
> 时间：2013-02-22T19:36:12.450
> 
> 标签：c++

这是一个愚蠢的问题，但老实说，我无法让它在我的程序中工作。我刚开始使用 C++，但我一直在做错事。我让用户输入'pile'的值，然后我想转到我的第二个函数并将pile除以2。我的教授说我不允许使用全局变量。这是我的代码：

```
int playerTurn();
int main() //first function
{
    int pile = 0;
    while ( pile < 10 || pile > 100 ) {
        cout << "How many marbles would you like there to be?" << endl;
        cout << "Please choose between 10 and 100: ";
        cin >> pile;
    }
    return pile; //the variable I'm trying to return is pile
    playerTurn();
}

int playerTurn(pile) //second function
{
    int limit = pile / 2; //says pile is an undeclared identifier
} 
```

我似乎无法将“堆”转移到我的其他功能 playerTurn

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:38:40.653

该`return`语句退出一个函数并返回一个值到它被调用的地方。

因此，您的代码所做的就是退出`main()`并将堆放回操作系统。

你需要调用 playerTurn，使用 pile 作为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T19:38:55.480

该`return`语句*立即*从当前函数返回。因此，当您在`main`函数中使用它时，它会从函数中返回`main`。

要将变量传递给另一个函数，请将其作为*参数*传递：

```
playerTurn(pile); 
```

此外，当你声明一个带参数的函数时，你必须完全指定参数，就像你做其他变量一样：

```
void playerTurn(int pile)
{
    // ... your implementation here...
} 
```

如果您无法理解传递参数或返回值，那么您应该继续阅读基础知识，直到您理解为止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:44:04.823

检查评论以获取描述

```
int playerTurn(); // Function declaration

int main() //first function
{
    int pile; // Define variable before usage
    do  // Google do-while loops.
    {        
        cout << "How many marbles would you like there to be?" << endl;
        cout << "Please choose between 10 and 100: ";
        cin >> pile;
    }while ( pile < 10 || pile > 100 );

    // Calling the secondary function and passing it a parameter 
    // and then getting the result and storing it in pile again.
    pile = playerTurn(pile) 
}

// Not really sure what you are trying to do here but 
// assuming that you want to pass pile to this function 
// and then get the return type in main

int playerTurn(int pile) 
{
    int limit = pile / 2; //Processing.
    return limit;         // Return from inside the function, this value goes to pile in main()
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T19:40:34.390

*   您的前向定义与`playerTurn`实现不匹配。您需要将其更改为`int playerTurn(int pile)`.

*   您的实现`playerTurn`没有指定参数类型（即`int`）。

*   据我所知，您正试图`pile`从`main`. 这实际上将退出您的程序。相反，您似乎想将其作为参数传递。为此，只需将其放在括号内（当然，去掉该`return xyz;`行）。

# jquery - jquery点击“这个”

> ID：15031912
> 
> 赞同：0
> 
> 时间：2013-02-22T19:36:37.220
> 
> 标签：jquery, html

如果这样做

```
$this.find('div').click(customFunc); // inside customFunc , $(this) is a div 
```

如果这样做

```
$this.find('div').keypress(
    function(e) {  
       customFunc();
    }
 );   // inside customFunc , $(this) is a window 
```

我想要在调用 keypress 时，在里面`customFuc()`， `$(this)`是`div`。

如何做到这一点并保持使用`function(e)`按键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:38:12.513

直接使用 customFunc。

```
$this.find('div').keypress(customFunc); 
```

否则，您可以使用 .call 或 .apply 对其应用上下文

```
$this.find('div').keypress(function(e){
    customFunc.call(this);
}); 
```

# php - 替换 PHP 的浮点数据类型

> ID：15031913
> 
> 赞同：1
> 
> 时间：2013-02-22T19:36:43.417
> 
> 标签：php, floating-point

想象一下由于浮点不准确而充满错误的代码库。我们假设重构或重写代码不是一种选择。

当然，PHP 提供[GMP](http://www.php.net/manual/en/ref.gmp.php)和/或[BC](http://www.php.net/manual/en/ref.bc.php)以获得更高的精度。但是，考虑到上述限制，实施它们将被证明是一项不可能完成的任务。

有没有办法（可能通过 PHP 模块或核心补丁）将 PHP 浮点类型完全替换为更精确的类型？当然会有性能损失，但要考虑到这一点。

它存在吗？如果没有，我写一个想法有多糟糕？;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:54:51.943

您实际上可能会考虑使用[SPL 类型](http://www.php.net/manual/en/book.spl-types.php)，它提供了一个围绕 PHP 标量数据类型的 OO 包装器。然后，您可以扩展 SplFloat 以用您想要的任何内容替换内部表示。

当然，您仍然需要修改代码中的每个浮点分配以使用 SplFloat 而不是本机标量浮点

# java - 将 int 与 Java 中的字符常量进行比较

> ID：15031914
> 
> 赞同：7
> 
> 时间：2013-02-22T19:36:44.267
> 
> 标签：java, comparison, binary-data

我有一个二进制文件，它使用 4 个字符集来形成具有“意义”的整数。例如 4 个字节`'0005'`，它等于整数形式的 808464437。

我宁愿在我的 Java 代码中将这些表示为808464437，`'0005'`而不是 808464437。我也不想设置像`final int V0005 = 808464437`.

在 C++ 中，我可以执行以下操作：

```
fileStream->read((byte*) &version, 4); //Get the next bytes and stuff them into the uint32 version

switch (version) {
    case '0005':
        //do something
    case '0006':
        //do something
    case '0007':
        //do something
} 
```

在 Java 中，我的问题不是读取 4 个字节并将它们放入某种数据类型。我的问题是将某些数据类型与 const char array 进行比较`'0005'`。

如何将 int 或任何形式与`'0005'`Java 中的 const 字符数组进行比较？**我需要尽可能有效地做到这一点！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-22T19:47:09.057

感谢您解释您的答案。

以下是将 4 个字节转换为 int 的方法，然后您可以将其与相关 int 进行比较：

```
 int v0005 = ByteBuffer.wrap("0005".getBytes()).asIntBuffer().get(); 
```

不幸的是，这是我能看到的唯一方法......可能没有你想要的那么高效，但也许它仍然是你需要的。

我建议在您的一个类中将其中一些设置为“常量”，如下所示：

```
public static final int V0005 = ByteBuffer.wrap("0005".getBytes()).asIntBuffer().get();
public static final int V0006 = ByteBuffer.wrap("0006".getBytes()).asIntBuffer().get();
public static final int V0007 = ByteBuffer.wrap("0007".getBytes()).asIntBuffer().get();
public static final int V0008 = ByteBuffer.wrap("0008".getBytes()).asIntBuffer().get(); 
```

然后打开 V0005 等，因为打开原始类型 (int) 是有效的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T19:44:36.097

java中的char数组只不过是`String`java中的a。您可以在 Java7 的 switch-case 中使用字符串，但我不知道比较的效率。

因为只有你 char 数组的最后一个元素似乎有意义，所以你可以用它做一个 switch case。就像是

```
private static final int VERSION_INDEX = 3;

...
    char[] version = // get it somehow

    switch (version[VERSION_INDEX]) {
         case '5': 
            break;
         // etc
    }
... 
```

**编辑** 更多面向对象的版本。

```
 public interface Command {
       void execute();
  }

  public class Version {
       private final Integer versionRepresentation;

       private Version (Integer versionRep) {
            this.versionRepresentation = versionRep;
       }

       public static Version get(char[] version) {
            return new Version(Integer.valueOf(new String(version, "US-ASCII")));
       }

       @Override
       public int hashCode() {
            return this.versionRepresentation.hashCode();
       }
       @Override
       public boolean equals(Object obj) {
            if (obj instanceof Version) {
                Version that = (Version) obj;

                return that.versionRepresentation.equals(this.versionRepresentation);
            }
            return false;
       }
  }

  public class VersionOrientedCommandSet {
       private final Command EMPTY_COMMAND = new Command() { public void execute() {}};
       private final Map<Version, Command> versionOrientedCommands;

       private class VersionOrientedCommandSet() {
           this.versionOrientedCommands = new HashMap<Version, Command>();
       }

       public void add(Version version, Command  command) {
           this.versionOrientedCommands.put(version, command);
       }

       public void execute(Version version) throw CommandNotFoundException {
           Command command = this.versionOrientedCommands.get(version);

           if (command != null)  {
               command.execute();
           } else {
               throw new CommandNotFoundException("No command registered for version " + version);
           }

       }
  }

  // register you commands to VersionOrientedCommandSet
  char[] versionChar = // got it from somewhere
  Version version = Version.get(versionChar);
  versionOrientedCommandSet.execute(version); 
```

大量的代码 呵呵 你会有一点热身成本，但如果你的程序被执行多次，你将获得地图的效率：P

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-23T00:02:33.110

从其他一些答案（@marvo 和@vikingsteve）中得到一点，我得出了这个结论：

```
public enum Version {

  V0005 {

    @Override
    public void doStuff() {
      // do something
    }
  },
  V0006 {
  @Override
    public void doStuff() {
    // do something else
    }

  };

private final int value;
private static final Map<Integer, Version> versions = new HashMap<>();

private Version() {
    final byte[] bytes = name().substring(1).getBytes(); //remove the initial 'V'
    this.value = ByteBuffer.wrap(bytes).asIntBuffer().get();
}

static {
    for (Version v : values()) {
        versions.put(v.value, v);
    }
}

public abstract void doStuff();

public Version valueOf(int i){
    return versions.get(i);
}
} 
```

这提供了一种很好的面向对象的方法，因为动作是用数据表示封装的。每个常量决定当 doStuff 被调用时要做什么，避免了客户端代码的切换。用法是：

```
int code = readFromSomewhere();
Version.valueOf(i).doStuff(); 
```

该`valueOf`方法`Version`在加载类时填充的地图中找到 。我不知道这是否像你需要的那样有效，因为它`int`被装箱了，`Integer`但**你只会在你 profile 时发现**，其他一切都是纯粹的猜测。另请注意，整数值是在构造函数中为您计算的，因此您只需`enums`使用正确的名称定义 ，它将自动完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T19:56:46.720

最有效的方法是使用整数 - 像 final int V0005 = 0x30303035 （这里看到的几个不同想法的组合）这样的东西是可以管理的。Java 只是没有您正在寻找的那种整数文字。

如果您真的想使用字符串，则需要先读取字节数组中的字符，然后将其转换为字符串（默认字符集通常可以工作，因为它是 ASCII 的超集）。但是，它的效率会更低。

您可以编写一个函数来从简单的数字（如 5）中计算常数值以获得更好的可读性，但这可能是矫枉过正。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T19:43:56.350

你在寻找类似的东西`value1.intValue() == value2.intValue()`吗？或者你可以只输入 cast 。

```
char myChar = 'A';
int myInt = (int) myChar; 
```

同一根拐杖反其道而行之。

```
int myInt = 6;
char myChar = (char) myInt; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-22T19:49:08.060

唯一的方法是非常低效的 byte[] 到 String 的转换。

```
switch (new String(version, "US-ASCII")) {
case "0005":
    break;
...
} 
```

改用 (Hash-)Map 会使它再次变得更快。

但我认为你不会对这个解决方案感到满意。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-22T20:44:21.880

鉴于这似乎是数据包中的版本字符串或其他东西，那么值的数量是有限的并且是合理的数量。所以它们可以封装在一个枚举中。枚举可以封装高效的代码，用于将输入数据中的四个字节转换为代表枚举。（我执行该转换的代码不一定是最有效的。也许，给定少量版本，一个很好的内部数组或整数到枚举的映射会起作用。）

```
class enum Version {

    UNKNOWN(0),
    V0005(0x30303035),  // whatever the int value is
    V0006(0x30303036);

    private int id;
    private Version(int value) {
        id = value;
    }

    public static Version valueOf(int id) {
        for (Version version : values()) {
            if (version.getId() == id) {
                return version;
            }
        }
        return UNKNOWN;
    }

    public static Version valueOf(String sId) {
        return valueOf(computeId(sId));
    }

    public static int computeId(String sId) {
        // efficiently convert from your string to its int value
    }
} 
```

然后在我的开关中：

```
String s = methodThatReadsFourChars(...);
switch (Version.valueOf(s)) {
case V0005 : doV0005Stuff(); break;
case V0006 : doV0006Stuff(); break;
default :
    throw new UnknownVersionException(); 
```

# java - Spring MVC 中的 bean 数量限制

> ID：15031917
> 
> 赞同：0
> 
> 时间：2013-02-22T19:37:08.213
> 
> 标签：java, spring-mvc

我正在使用 Spring MVC 开发一个 Web 应用程序。我想知道应用程序上下文中的 bean 数量是否有限制。如果我有太多 bean，加载应用程序时会出现问题吗？会不会是性能问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T19:48:42.147

不，没有。我建议在不同的应用程序上下文中拆分 bean 并仅加载您需要的那些。对于我的项目，我将所有与上下文相关的骆驼配置和所有 bean 放在彼此中注入数据库类。

使用包含所有 bean 的单个文件，请记住，如果不应该那么容易维护。

尝试看一下[Splitting applicationContext to multiple files](https://stackoverflow.com/questions/600095/splitting-applicationcontext-to-multiple-files)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:43:37.950

不，在应用程序上下文中声明 bean 没有任何限制。您可能需要注意的唯一一件事是不同 bean 之间的依赖注入。

它是一种根据功能区分 bean 并在不同的上下文 xml 文件中声明它的通用方法。例如，您可能希望在 jms.xml 文件中声明与 JMS 相关的 bean，这样您就可以模块化上下文相关文件并省去在一个文件中注入许多 bean 的麻烦。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T18:15:08.557

doGetBean 中的 Bean 创建块有多个同步块来锁定 bean 创建。这意味着如果您创建大量原型或请求范围 bean，您将遭受线程争用。请记住，仅当它是大容量应用程序时才可能出现此限制。但是，如果它是一个大容量应用程序，这将使系统崩溃。

# mysql - Liferay 6 没有更新在 MySQL 中创建的自定义表

> ID：15031923
> 
> 赞同：0
> 
> 时间：2013-02-22T19:37:30.810
> 
> 标签：mysql, liferay-6

我正在使用 Liferay 6.1

我在 mysql 中创建了一个表，如图所示

```
create table Book (
    bookId bigint(10) not null primary key,
    companyId bigint(10) null ,
        userId bigint(10) null ,
    userName VARCHAR(75)
); 
```

这是我的 service.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE service-builder PUBLIC "-//Liferay//DTD Service Builder 6.1.0//EN" "http://www.liferay.com/dtd/liferay-service-builder_6_1_0.dtd">
<service-builder package-path="com.test">
    <author>sai</author>
    <namespace>Library</namespace>
    <entity name="Book" local-service="true" remote-service="false">
        <column name="bookId" type="long" primary="true" />
        <column name="companyId" type="long" />
        <column name="userId" type="long" />
        <column name="userName" type="String" />
    </entity>
</service-builder> 
```

这是我的 BookLocalServiceImpl 类

```
public class BookLocalServiceImpl extends BookLocalServiceBaseImpl {
    public Book addBook(long userId, String userName) throws PortalException,
            SystemException {
        long bookId = CounterLocalServiceUtil.increment(Book.class.getName());
        Book book = bookPersistence.create(bookId);
        book.setCompanyId(1126);
        book.setUserId(1126);
        book.setUserName(title);
        book = bookPersistence.update(book, false);
        return book;
    }

} 
```

在 processAction 类中，我添加了这种方式

```
BookLocalServiceUtil.addBook(userId, userName); 
```

但问题是，Liferay 框架创建了一个名为 library_book 的新表并更新了该表。

```
 mysql> select * from library_book;
+--------+-----------+--------+----------+
| bookId | companyId | userId | userName |
+--------+-----------+--------+----------+
|      1 |      1126 |   1126 | saibaba  |
+--------+-----------+--------+----------+
1 row in set (0.00 sec) 
```

我的表书是空的

```
mysql> select * from Book;
Empty set (0.00 sec) 
```

请让我知道如何使表格 Book 得到更新，但不是 library_book

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T18:47:23.177

```
Have you created book table in mysql? if yes then mentioned it in service.xml file.
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE service-builder PUBLIC "-//Liferay//DTD Service Builder 6.1.0//EN" "http://www.liferay.com/dtd/liferay-service-builder_6_1_0.dtd">
<service-builder package-path="com.test">
    <author>sai</author>
    <namespace>Library</namespace>
    <entity name="Book" local-service="true" remote-service="false" table="book">
        <column name="bookId" type="long" primary="true" />
        <column name="companyId" type="long" />
        <column name="userId" type="long" />
        <column name="userName" type="String" />
    </entity>
</service-builder> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:18:36.063

在实际数据库中创建的实体被命名为 [namespace]_[entityName]。由于你的命名空间是“图书馆”，实体是“书”，结果表是“图书馆书”，所以你得到的是很正常的

但是，您不需要也不应该使用 mysql 命令进行搜索。在大多数情况下，您应该使用服务构建器提供的“查找器”功能，我建议您在[ServiceBulder](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/service-build-5)上学习完整的入门教程，您不能错过

# php - 我正在尝试将 json_encode 从 PHP 传递到 JavaScript

> ID：15031934
> 
> 赞同：-1
> 
> 时间：2013-02-22T19:38:11.893
> 
> 标签：php, javascript

我正在尝试使用 json_encode 将数组从 PHP 传递到 javascript

但是当我提醒这些值时，我只看到“对象对象等”

当我 var_dump 它时，我看到了实际的数组，但它没有在警报中显示它们

任何帮助，将不胜感激

问候

这是 var_dump

```
array(1) {
  [0]=>
  array(2) {
    ["id"]=>
    string(19) "3.0268"
    ["postcode"]=>
    string(137) "hello"
  }
}

array(2) {
  [0]=>
  array(2) {
    ["id"]=>
    string(19) "3.0268070455319E+17"
    ["postcode"]=>
    string(137) "ECMWF continues its flip-flopping, still a temp drop next week & #snow risk but then no rise, http://t.co/tBlg9Ihs #ukweather #uksnow" 
```

} 代码

```
<?php

 $con =  mysql_connect('localhost', 'root', '');
    mysql_select_db('test');

   $result = mysql_query("SELECT * FROM address");

$arr = array();
while($row = mysql_fetch_assoc($result)) {
    $arr[] = $row; 

}

?>

<script>

var test = <?php echo json_encode($arr); ?>;
alert(test);

</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T19:39:36.260

`alert`将调用`toString()`传递给它的内容。你可能想要`console.log`. `test`是一个对象，这是`alert`默认情况下打印的对象。

例子：

```
alert({a:1,b:2}) // => [object Object]
({a:1,b:2}).toString() // => "[object Object]" 
```

# messagebroker - 配置 Message Broker 以使用代理

> ID：15031937
> 
> 赞同：0
> 
> 时间：2013-02-22T19:38:13.453
> 
> 标签：messagebroker, broker

我的组织最近实施了一个新的代理/防火墙设备，现在我发现我的开发代理实例（WMB 版本 8.0.0.1）无法调用外部 Web 服务。

有没有人有配置代理使用代理的经验？

如果我试图调用的 Web 服务是通过 HTTP 提供的，我怀疑通过 Toolkit 中的 TCP/IP 监视器路由流量可以解决问题（因为 Toolkit 支持代理），但我需要在时刻正在通过 HTTPS 提供服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:37:20.300

这取决于您使用的是哪种代理。

基本上有两种可能的设置，在第一种情况下，您将与代理建立 ssl 连接，代理将代表客户端（代理）与远程服务器建立 ssl 连接。

在第二种情况下，您将与代理建立不安全的 tcp/ip 连接，并将其用作隧道以建立从客户端（代理）到远程服务器的 ssl 连接。要使用此选项，您需要在请求节点属性中填写“HTTP(S) 代理位置”。

# ios - UIView四面长短不一

> ID：15031938
> 
> 赞同：0
> 
> 时间：2013-02-22T19:38:14.803
> 
> 标签：ios, objective-c, uiview

是否可以制作一个侧面长度不同的 UIView？我是否必须重写 drawRect 才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:43:49.680

所有`UIView`对象都有一个矩形框架。但是视图可以以任何形状出现，具体取决于它的实现方式。实现`drawRect:`绘制所需形状的方法当然是一种选择。

如果您只希望事件在视图的外观形状内注册，您可能还必须处理触摸事件。

# android - Android 的导出 Apk 文件使用 Facebook Sdk 作为链接库

> ID：15031943
> 
> 赞同：0
> 
> 时间：2013-02-22T19:38:30.977
> 
> 标签：android, facebook, sdk

我使用 facebook sdk 作为我自己的 android 项目中的链接库，当我将它部署在模拟器上或通过 eclipse 从 USB 部署到 android 设备时，一切正常。但我想将它导出为 .apk 文件，我想直接部署设备，但结果是**应用程序未安装**是因为缺少库吗？我该如何解决？谢谢你的回答...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:42:15.350

```
 the result is Application not installed is it because of missing library? 
```

不，缺少库不应导致应用无法安装。

最有可能发生的事情是您的设备上仍然有调试签名的应用程序。

当您在 Eclipse 中单击运行按钮时，它会使用特殊的“调试”键对 APK 进行签名。当您将其导出为真实时，它会使用您的实际发布密钥进行签名。

就 Android 系统而言，您的 2 个 apk 不是“同一个应用程序”，因为它们使用不同的密钥签名，这就是它不允许一个替换另一个的原因。

解决方法是在安装新导出的之前从您的设备中卸载以前的 apk。

您可以通过“设置”->“管理应用程序”找到您的应用程序并将其卸载，或者通过 adb 使用以下命令完成购买：

```
adb uninstall the.package.name.for.your.application 
```

让这也作为一种学习体验，如果您丢失了发布密钥，那么您的用户将无法安装您的应用程序的新版本，除非先卸载以前的版本。备份您的发布密钥 =)

# vb.net - 根据 appsetting 值检查 TimeofDay

> ID：15031949
> 
> 赞同：0
> 
> 时间：2013-02-22T19:38:51.493
> 
> 标签：vb.net, parsing, app-config

我正在编写一个 VB 控制台程序，它将在一天中的某个时间运行一个函数。这就是我到目前为止所拥有的。

```
Sub Main()
    Do
    Dim backupTime As String

    backupTime = My.Settings.backupTime

    While TimeOfDay = backupTime
        Threading.Thread.Sleep(2000)
    End While

    backup()
  loop
End Sub 
```

所引用的“backupTime”存储在 App.Config 文件中

```
<userSettings>
    <ZipAJob_Timed.My.MySettings>
        <setting name="backupTime" serializeAs="String">
            <value>#01:59:00 PM#</value>
        </setting>
    </ZipAJob_Timed.My.MySettings>
</userSettings> 
```

问题是“Do While”循环每 2 秒检查一次“TimeofDay”是否匹配“backupTime”。但这可能导致程序无法运行，因为它错过了 2 秒的比赛。所以要么我需要让它忽略秒数，要么只让 TimeofDay.minutes/hours 和 backupTime.minutes/hours 匹配。

我已经研究过 Parsing ..但不完全确定我应该从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T19:45:16.240

你为什么不简单地使用`<`而不是`=`？

```
While TimeOfDay < backupTime
    Threading.Thread.Sleep(2000)
End While 
```

但是我不会使用循环，而是使用在给定时间启动的计时器或 Windows 任务。

# windows - 我应该在哪里存储配置文件？

> ID：15031951
> 
> 赞同：3
> 
> 时间：2013-02-22T19:38:55.317
> 
> 标签：windows, delphi

我需要通过Win8在WinXP中读写一个配置文件到windows磁盘。他们在哪里做这件事的最佳地点？ProgramData 文件夹似乎不允许

```
procedure TfrmMain.FormCreate(Sender: TObject);
var
  path: array[0..MAX_PATH] of char;
begin
   SHGetFolderPath(0, CSIDL_COMMON_APPDATA, 0, SHGFP_TYPE_CURRENT, @path);
  AppPath:= Path;
  AppPath:= AppPath + '\Customer\';
  if not DirectoryExists(AppPath) then
   CreateDir(AppPath);
 if FileExists(AppPath + 'Customers.cst') then
 LoadFromFile(AppPath + 'Customers.cst');
end;

procedure TfrmMain.FormCloseQuery(Sender: TObject; var CanClose: Boolean);
begin
 if ListModified  then
 begin
  if MessageDlg('Save Changes?', mtWarning, [mbYes, mbNo], 0) = mrYes  then
   SaveToFile(AppPath + 'Customers.cst');
  canClose:= True;
 end
 else 
canClose:= False;
end; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T20:47:34.630

`CSIDL_COMMON_APPDATA`被[描述为](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb762494.aspx#CSIDL_COMMON_APPDATA)：

> 包含所有用户的应用程序数据的文件系统目录。

因为它在计算机上的所有用户之间共享，所以您需要具有管理员权限才能写入该位置。如果您希望所有用户共享您的配置，那么`CSIDL_COMMON_APPDATA`它就是合适的地方。但是，当您来那里写作时，您需要确保您有足够的权利。

如果您确实需要写入应用程序，`CSIDL_COMMON_APPDATA`那么通常的方法是在安装期间为您的应用程序创建一个目录。因为您的安装程序将运行提升它可以做到这一点。它还必须向新目录添加一个许可 ACL，以便您的应用程序以后可以在以标准用户身份运行时写入该文件夹。

如果您想要一个存储在用户配置文件中的配置，那么您应该在 下选择一个位置`CSIDL_APPDATA`，[描述为](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb762494.aspx#CSIDL_APPDATA)：

> 用作特定于应用程序数据的公共存储库的文件系统目录。

因为这是在用户配置文件中，所以机器上的每个用户都将拥有一个单独的配置文件副本。

# php - CodeIgniter 2.1.3 数据库问题

> ID：15031955
> 
> 赞同：1
> 
> 时间：2013-02-22T19:39:17.110
> 
> 标签：php, database, codeigniter

我正在使用 CodeIgniter v2.1.3 在工作环境中实现 MVC。使用这些数据库配置：

```
$active_group = 'default';
$active_record = TRUE;

$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'ctejada';
$db['default']['password'] = 'XXXX';
$db['default']['database'] = 'here_goes_database_name';
$db['default']['dbdriver'] = 'mysqli';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = FALSE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

*一旦我将主机名更改为与localhost*不同的任何内容，它就会显示：

```
A Database Error Occurred
Unable to connect to your database server using the provided settings.
Filename: core/Loader.php
Line Number: 346 
```

即使它只是*127.0.0.1*

我已经被困在这里将近2天了，没有答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:40:11.557

`$db[‘default’][‘db_debug’] = false`，正如在[ellislab 论坛上](http://ellislab.com/forums/viewthread/207916/)讨论的那样，但我仍然不确定为什么这种更改可以解决问题，它似乎与托管服务器的操作系统有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T16:51:44.277

如果有人在 Linux Box 上试验这个困难；检查 SE Linux 不拒绝与外部数据库 httpd 的任何连接。如果是，则命令：

```
setsebool -P httpd_can_network_connect_db 1 
```

可以帮助您修复它。

# php - 基于屏幕分辨率的最大结果

> ID：15031963
> 
> 赞同：0
> 
> 时间：2013-02-22T19:39:50.543
> 
> 标签：php, javascript, mysql, responsive-design

我有一个网站，通过大众投票列出了最好的书籍。书籍存储在数据库中。有没有办法将 $maxresults 设置为显示器的宽度？在较大的显示器上，这会在整个底行留下一两本书。无论分辨率如何，我都希望填写每一行。也许是一个 if 语句？我的代码：

```
 $maxresults = 21;
  if($_GET['page'])
  $page = $_GET['page'];
  else
  $page = 0;
  $currentpage = $page;
  $page = $page*$maxresults;
  $numpages = QuickQuery("SELECT COUNT(id) FROM movies WHERE visible=1");
  $numpages = mysql_result($numpages, 0);
  $numpages = $numpages/$maxresults-1;
  $result = GetBooksByRangeID($page, $maxresults);//Show <maxresults> pages at a time
  DisplayResults($result); 
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:03:04.650

你可以用javascript来做到这一点。不要害怕，这并不难。

首先，检查屏幕分辨率： http: [//www.pageresource.com/jscript/jscreen.htm](http://www.pageresource.com/jscript/jscreen.htm)

其次，将更多元素传递给客户端并动态隐藏它们 - 设置 display="none" 或类似的东西（例如，您可以使用[http://datatables.net/](http://datatables.net/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T20:19:59.320

如果您正在寻找基于窗口大小而不是监视器大小的工作（即，如果窗口小于屏幕，它应该填充浏览器窗口但不会在屏幕外运行），请查看 jQuery`.width()`函数（[http: //api.jquery.com/width/](http://api.jquery.com/width/) )

如果每本书的显示都包含在一个 div 中，您只需将 div 的样式设置为`float: left`. 然后他们这组将填满屏幕，直到他们用完空间，然后换行。

# php - 如何将查询结果分页？

> ID：15031964
> 
> 赞同：0
> 
> 时间：2013-02-22T19:39:50.953
> 
> 标签：php, mysql, pagination, grouping

我想实现一个“页面”系统，以便在第一页显示 10 个结果（1-10），在第二页显示其他 10 个（11-20）结果。等等

结果应该以不同的方式排序，例如`ORDER BY count DESC;` 是否有针对此的纯 MySQL 解决方案，例如

```
$results_per_page = 10;
$page_number = $_GET['page'];

mysql_query( "SELECT * FROM mytable ORDER BY count DESC 
LIMIT $results_per_page*$page , $results_per_page*($page+1) // Of course, I made up this line
;"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:56:49.823

```
make a function passing four parameters
function getresult($index,$order,$start,$no_rows)
 {

    $sql="SELECT * FROM mytable order by $index $orders limit $start,$no_rows";
 } 
```

在哪里，

$index=你想要做的排序

$order=asc/desc

$start=from on yow 将开始获取记录

$no_$rows=你想得到行数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T19:48:20.817

我找到了问题的答案，我应该像这样选择它们

```
SELECT * FROM mytable ORDER BY whatever DESC LIMIT 10 OFFSET 10; 
```

第 2 页。

所以随着变量它变成

```
SELECT * FROM mytable ORDER BY whatever DESC LIMIT $results_per_page OFFSET $page_number-1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T19:49:07.640

清理 $page 变量后，出于安全原因，您永远不应该直接接受用户的输入，您应该这样做：

```
<?php
$first = $results_per_page * ($page-1); // on page 1 you want to start at row 0
$querystring = "SELECT * FROM mytable ORDER BY count DESC 
LIMIT $first, $results_per_page";
?> 
```

# java - AudioSource.VOICE_RECOGNITION 中使用的过滤器

> ID：15031968
> 
> 赞同：2
> 
> 时间：2013-02-22T19:39:57.810
> 
> 标签：java, android, audio-recording, voice-recognition

android音频源设置为时使用的过滤器是`AudioSource.VOICE_RECOGNITION`什么？

# javascript - $.fn setInverval 在具有不同计算值的多个元素上

> ID：15031970
> 
> 赞同：2
> 
> 时间：2013-02-22T19:40:00.960
> 
> 标签：javascript, jquery, animation, setinterval, infinite

我可以设法以不同的速度对多个元素进行无限动画，但我正在使用多个`setInterval`功能。我的目标是使用一个功能来做到这一点，当我尝试使用它们时，`$.fn`它们都以相同的速度进行动画处理。我哪里做错了？

[这里不是准确的 jsFiddle](http://jsfiddle.net/TajwZ/59/)，[这里是有针对性的示例](http://jsfiddle.net/TajwZ/60/)。

**jQuery：**

```
var eleHeight = $('.drop_leds').height();
var windowH = $(window).height();
var count = 0;
var counter;
var limit = windowH + eleHeight;

$.fn.goDown = function(x) {
    var _this = this;
    return counter = window.setInterval(function() {
        if( count >= 0 && count < limit ) {
            count += x;
            _this.css({'top':count +'px'});
        }
        else if( count >= limit ) { 
            count=0; _this.css({'top':'-'+ eleHeight +'px'});
        }

    },1);
};

$('#l_0,#l_6').goDown(1);
$('#l_1,#l_4').goDown(3);
$('#l_2,#l_7').goDown(4);
$('#l_3,#l_5').goDown(2); 
```

**html/css：**

```
<div id="l_0" class="drop_leds"></div>
<div id="l_1" class="drop_leds"></div>
<div id="l_2" class="drop_leds"></div>
<div id="l_3" class="drop_leds"></div>
<div id="l_4" class="drop_leds"></div>
<div id="l_5" class="drop_leds"></div>
<div id="l_6" class="drop_leds"></div>
<div id="l_7" class="drop_leds"></div>

.drop_leds {position:absolute; width:10px; height:60px; background:black; top:0;}
#l_0 { left:40px; }#l_1 { left:70px; }#l_2 { left:110px; }#l_3 { left:140px; }
#l_4 { left:180px; }#l_5 { left:210px; }#l_6 { left:220px; }#l_7 { left:240px; } 
```

[资源。](https://stackoverflow.com/questions/14582507/move-multiple-divs-like-matrix-style-background-with-one-function/14584297#14584297)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:48:14.893

`count`每次被调用时都会覆盖`$.fn.goDown`，因此所有计时器最终都使用相同的`count`值。将其移动到插件的内部范围内以解决问题：

```
$.fn.goDown = function(x) {
    var count = 0;
    var counter;
    var _this = this;
    return counter = window.setInterval(function() {
        if( count >= 0 && count < limit ) {
            count += x;
            _this.css({'top':count +'px'});
        }
        else if( count >= limit ) { 
            count=0; _this.css({'top':'-'+ eleHeight +'px'});
        }

    },1);
}; 
```

[**小提琴**](http://jsfiddle.net/TajwZ/61/)

这样，每个间隔`counter`都会有一个对应的`count`变量，只能在创建间隔的执行上下文中访问。`_this`与您确定插件范围内部的方式完全相同。

# php - foreach() 作为 $varialble 的空结果

> ID：15031971
> 
> 赞同：0
> 
> 时间：2013-02-22T19:40:03.237
> 
> 标签：php, sql

我使用 sql 查询得到一个空结果

```
$sql = "SELECT * FROM $tbl_name ORDER BY performanta_cpu DESC LIMIT";

<select name="intern_memorie" id="intern_memorie"/>
<?php
    foreach ($dbh->query($sql) as $linie)
        {

    print '<option value="'.$linie["performanta_cpu"].'">'.$linie["performanta_cpu"].'</option>'; } 
```

几天前相同的代码工作！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T19:41:32.817

你忘了设置`LIMIT`

所以你的正确查询是`$sql = "SELECT * FROM $tbl_name ORDER BY performanta_cpu DESC LIMIT 10";`或不是 10 任何数字。

# ms-access - 处理大小超过 1 GB 并通过网络访问的 Access 数据库

> ID：15031974
> 
> 赞同：2
> 
> 时间：2013-02-22T19:40:18.330
> 
> 标签：ms-access

我的一个客户报告说，他们的一台计算机在加载数据库时出现故障。这个数据库是这个 24/7 非营利机构的应用程序。由于其他所有内容都在计算机上检查，我查看了数据库文件。Is 是存储在网络共享上的 Access 2000；1个文件；仅小于 1 GB 的阴影。难怪这台电脑加载需要这么长时间（它是最老的电脑，只有一个 10Mbps 的网卡）。

这个数据库很复杂，可能充满了宏和代码以使其正常工作，但我不确定它是如何组合在一起的，如果我尝试过，我不确定是否可以重新创建它。我不是数据库专家，但可以做一些简单的事情。

那就是说：我可以做一件简单的事情来使这个数据库更好地工作吗？用户主要是社会工作者，他们需要“单击此按钮，一切都将与以前一样”类型的解决方案。也就是说，如果该按钮打开 Internet Explorer 而不是 Access，他们会同意的。

他们有一台 Windows 2008 服务器。我是该机构的合同技术人员，可以向服务器添加任何服务以使其正常工作——当然需要预算批准。数据库正在成为一个问题，一个简单的解决方案可能比聘请数据库专家从头开始重建它要便宜得多。

尽管 Access 数据库是 2000 格式，但工作站都运行 Access 2007，因此可以选择在执行其他任何操作之前升级到 2007。当然，我会在尝试任何事情之前进行备份。

打电话给写它的人是不可能的。现在这里没有人知道最初是谁做的。

**编辑添加：任何时候最多可以有 6 或 7 人使用数据库。不是所有活动，但它会在他们的工作站上打开并最小化**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T03:04:26.680

为了进一步提出关于这是一个数据库系统的建议，工作和修改 Access 数据库所需的学习曲线与基于 vb.net 或 SQL 服务器的应用程序没有任何不同。如果您要对 Oracle 系统进行性能调整，您将需要具有高于一般 Oracle 技能的人。这种想法也适用于 Access 或 vb.net 应用程序。

在很多方面，我发现 Access FAR 的学习曲线比使用 VS 和 .net 更陡峭。尤其是在需要额外性能的情况下。

Access 需要多种技能组合，从编码到数据库设计技能，以调整性能。不要在这里被愚弄，因为这是 Access。更糟糕的是，您正在谈论性能转变，所以现在您在这里谈论更高端的技能。

你最好找一个真正的 Access 专业人士，因为那个人可以在几个小时内完成需要你几周才能学会的事情。

如果有一个简单的灵丹妙药解决方案，它可能已经完成了。

在大多数情况下，当应用程序有价值时，这意味着它很可能是由至少具有一定能力水平的人创建的。所以这表明这个应用程序可能有一些很好的价值和设计。

但是，您可以查看所有 Access 开发人员都习惯的一些基本清单。第一个当然是拆分数据库（注意这往往不会加快应用程序的速度，但会增加稳定性和可靠性）。如果应用程序没有拆分，那么这通常表明构建器不是最佳的。

现在应用程序已拆分，接下来是一些基本的其他提示：

始终向用户部署程序的编译版本。

如果有多个用户 – 检查 + 确保与后端保持持久连接。

关闭曲目名称自动更正。

上述步骤以及要检查的事项列表如下：

[http://www.granite.ab.ca/access/performancefaq.htm](http://www.granite.ab.ca/access/performancefaq.htm)

以上是无需以任何实际材料方式修改应用程序即可检查的最终清单。

但是，归根结底，您最好的选择是让具有出色访问技能的人加入。如果他们没有这方面的预算，那么也许你会找到愿意花时间做志愿者的人。（毕竟，这就是我们在这里所做的）。

正如我所指出的，如果您有一个 .net 或基于 oracle 的解决方案，Access 通常会更加谨慎，并且在很多方面都不太宽容。

虽然我提供了一个指向建议方法列表的链接，但您确实需要谨慎地四处寻找和弄乱复杂的应用程序 - 此类应用程序需要更加小心，因为它更容易破坏或损坏某些东西。

但是，一定要仔细看看上面列出的要尝试的事情——这是一个非常棒的清单。

如果你使用 10baseT，那么跳到 100BaseT 会有很大帮助。事实上，我已经多年没有看到 10baseT 连接了？（你确定吗？）。

我的意思是，他们有 2008 年的服务器（那是昂贵的），他们有 Access 2007，同样是最近的，但他们到底是如何使用 10baseT 网卡的？我的意思是，一张 100baseT 网卡需要 10 美元多少钱？我肯定会摆脱那个瓶颈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:07:01.797

多谢你们。压缩数据库后，加载数据库的性能要好得多。虽然我自己不会重做数据库，但至少我的客户可以停止（有理由）抱怨它在工作站上加载的速度有多快，甚至是 10BaseT 恐龙（网卡是我在那里之前的替换卡，他们的旧显然，这个家伙使用了一堆用过的零件）。

我们稍后会考虑拆分数据库，但他们知道这是一项“安全”功能，而不是性能。

感谢您对此提供的所有帮助。

# xslt - XSLT 用子节点重复父节点

> ID：15031975
> 
> 赞同：0
> 
> 时间：2013-02-22T19:40:21.103
> 
> 标签：xslt

我试图在与子节点相同的行中重复父节点。我有用于创建报告的数据、当前样式表以及我希望输出的样子。我一直无法找到解决方案。如果您需要更多信息，请告诉我。感谢您的帮助，非常感谢。

数据

```
 <SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
      <SOAP-ENV:Body>
        <Result>
          <Item type="Part">
            <description>AML test</description>
            <id keyed_name="E008643" type="Part">57022FEA23B54493B691386368F5DFBB</id>
            <major_rev>1</major_rev>
            <name>9.6 Parts</name>
            <item_number>E008643</item_number>
            <Relationships>
              <Item type="Part AML">
                <related_id type="Manufacturer Part">
                  <Item type="Manufacturer Part">
                    <item_number>1804</item_number>
                  </Item>
                </related_id>
                <state>Preliminary</state>
              </Item>
              <Item type="Part AML">
                <related_id>
                  <Item type="Manufacturer Part">
                    <item_number>JNED</item_number>
                  </Item>
                </related_id>
                <state>Preliminary</state>
              </Item>
              <Item type="Part BOM">
                <quantity>1</quantity>
                <related_id keyed_name="E000371" type="Part">
                  <Item type="Part">
                    <description>Part 1</description>
                    <name>0</name>
                    <item_number>E000371</item_number>
                    <Relationships>
                      <Item type="Part AML">
                        <related_id type="Manufacturer Part">
                          <Item type="Manufacturer Part">
                            <manufacturer keyed_name="Speer" type="Manufacturer"></manufacturer>
                            <item_number>RK7D</item_number>
                          </Item>
                        </related_id>
                        <state>Preliminary</state>
                      </Item>
                      <Item type="Part AML">
                        <related_id type="Manufacturer Part">
                          <Item type="Manufacturer Part">
                            <manufacturer keyed_name="Ven" type="Manufacturer"></manufacturer>
                            <item_number>CR00T</item_number>
                          </Item>
                        </related_id>
                        <state>Preliminary</state>
                      </Item>
                      <Item type="Part AML">
                        <related_id type="Manufacturer Part">
                          <Item type="Manufacturer Part">
                            <manufacturer keyed_name="Sonic" type="Manufacturer"></manufacturer>
                            <item_number>ERJ</item_number>
                          </Item>
                        </related_id>
                        <state>Preliminary</state>
                      </Item>
                      <Item type="Part AML">
                        <related_id type="Manufacturer Part">
                          <Item type="Manufacturer Part">
                            <manufacturer keyed_name="Comp" type="Manufacturer"></manufacturer>
                            <item_number>NRCF</item_number>
                          </Item>
                        </related_id>
                        <state>Preliminary</state>
                      </Item>
                      <Item type="Part AML">
                        <related_id type="Manufacturer Part">
                          <Item type="Manufacturer Part">
                            <manufacturer keyed_name="Ya" type="Manufacturer"></manufacturer>
                            <item_number>RC0L</item_number>
                          </Item>
                        </related_id>
                        <state>Preliminary</state>
                      </Item>
                    </Relationships>
                  </Item>
                </related_id>
                <sort_order>128</sort_order>
              </Item>
              <Item type="Part BOM">
                <quantity>30</quantity>
                <related_id keyed_name="E001163" type="Part">
                  <Item type="Part">
                    <description>Part 2</description>
                    <name>82</name>
                    <item_number>E001163</item_number>
                    <Relationships>
                      <Item type="Part AML">
                        <related_id keyed_name="ECH-U1C822GX5" type="Manufacturer Part">
                          <Item type="Manufacturer Part">
                            <manufacturer keyed_name="Sonic" type="Manufacturer"></manufacturer>
                            <item_number>E2GX5</item_number>
                          </Item>
                        </related_id>
                        <state>Preliminary</state>
                      </Item>
                      <Item type="Part AML">
                        <related_id type="Manufacturer Part">
                          <Item type="Manufacturer Part">
                            <manufacturer keyed_name="Sonic" type="Manufacturer"></manufacturer>
                            <item_number>EGX5</item_number>
                          </Item>
                        </related_id>
                        <source_id keyed_name="E001163" type="Part"></source_id>
                        <state>Preliminary</state>
                      </Item>
                    </Relationships>
                  </Item>
                </related_id>
                <sort_order>256</sort_order>
              </Item>
             </Relationships>
          </Item>
        </Result>
      </SOAP-ENV:Body>
    </SOAP-ENV:Envelope> 
```

当前样式表

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:aras="http://www.aras-corp.com">
      <xsl:output method="html" omit-xml-declaration="yes" standalone="yes" indent="yes"></xsl:output>
      <xsl:template match="/">
        <html>
          <head>
       </head>
          <style type="text/css" userData="Global">
    .cellSolid {text-align:center;border-top:1px #000000 solid;border-right:1px #000000 solid;border-bottom:1px #000000 solid;border-left:1px #000000 solid;}
    .cellSolidTopRight {border-top:1px #000000 solid;border-right:1px #000000 solid;}
    .cellSolidTopLeft {border-top:1px #000000 solid;border-left:1px #000000 solid;}
    .cellSolidRightBottom {border-right:1px #000000 solid;border-bottom:1px #000000 solid;font-family:helvetica;font-size:8pt;}
    .cellSolidBottomLeft {border-bottom:1px #000000 solid;border-left:1px #000000 solid;}
    .cellSolidTop {border-top:1px #000000 solid;}
    .cellSolidRight {border-right:1px #000000 solid;}
    .cellSolidBottom {border-bottom:1px #000000 solid;}
    .cellSolidLeft {border-left:1px #000000 solid;}
    .cellDashed {border-top:1px #666666 dashed;border-right:1px #666666 dashed;border-bottom:1px #666666 dashed;border-left:1px #666666 dashed;}
    .cellDashedTopRight {border-top:1px #666666 dashed;border-right:1px #666666 dashed;}
    .cellDashedTopLeft {border-top:1px #666666 dashed;border-left:1px #666666 dashed;}
    .cellDashedBottomRight {border-bottom:1px #666666 dashed;border-right:1px #666666 dashed;}
    .cellDashedBottomLeft {border-bottom:1px #666666 dashed;border-left:1px #666666 dashed;}
    .cellDashedTop {border-top:1px #666666 dashed;}
    .cellDashedRight {border-right:1px #666666 dashed;}
    .cellDashedBottom {border-bottom:1px #666666 dashed;}
    .cellDashedLeft {border-left:1px #666666 dashed;}
    .cellHeader {background-color:#CCCCCC;border-top:1px #000000 solid;border-right:1px #000000 solid;border-bottom:1px #000000 solid;padding:2px;text-align:center;text-transform:capitalize;text-align:center;font-family:helvetica;font-weight:bold;font-size:8pt;}
    .cellTitle {border-top:1px #000000 solid;border-right:1px #000000 solid;border-left:1px #000000 solid;padding:2px;text-align:center;text-transform:capitalize;text-align:center;font-family:helvetica;font-weight:bold;font-size:8pt;}
    table  {empty-cells:show; border-collapse:collapse;}
    td.noBorder {font-family:helvetica; font-size:8pt;  padding:2px; border-width:0;}
       </style>
          <body topmargin="50" leftmargin="50">
            <table border="0" cellspacing="0" cellpadding="0" width="100%">
              <tr>
                <td width="150" uniqueID="ms__id11"></td>
                <td width="250" uniqueID="ms__id12"></td>
                <td width="200" uniqueID="ms__id13"></td>
         </tr>
              <tr valign="top">
                <td align="left" uniqueID="ms__id14" colspan="3">
                  <img src="../images/Logos/CooperPowerSystems.gif" height="60"></img>
          </td>
         </tr>
              <tr valign="bottom">
                <td class="noBorder" colspan="13" style="font-family:helvetica;font-size:15pt;color:#DA1943;padding:2px;" align="left" uniqueID="ms__id15">AML Quantity Report -              <xsl:value-of select="//Item/name"></xsl:value-of> Rev              <xsl:value-of select="//Item/major_rev"></xsl:value-of>
                </td>
                <td class="noBorder" colspan="4" style="font-family:helvetica;font-size:10pt;padding:2px;" align="right" uniqueID="ms__id16">Generated on:              <script>function m00(r, n){r += ""; if (!n) n = 2; while(r.length &lt; n){r = "0" + r;} return r;} var dt = new Date(); var a = top.opener.top.aras; if (a){var s = m00(dt.getUTCFullYear(),4)+"-"+m00((dt.getUTCMonth()+1))+"-"+m00(dt.getUTCDate())+"T"+m00(dt.getUTCHours())+":"+m00(dt.getUTCMinutes())+":"+m00(dt.getUTCSeconds())+"+0000"; s = a.convertToNeutral(s, "date", "yyyy-MM-ddTHH:mm:sszzz"); s = a.convertFromNeutral(s, "date", "short_date"); document.write(s);}</script>
                </td>
         </tr>
              <tr>
                <td class="cellHeader" style="border-left:1px #666666 solid;" uniqueID="ms__id17">Part Number</td>
                <td class="cellHeader" uniqueID="ms__id18">Name</td>
                <td class="cellHeader" uniqueID="ms__id32">Description</td>
                <td class="cellHeader" uniqueID="ms__id19">Calculated Quantity</td>
                <td class="cellHeader" uniqueID="ms__id20">AML Status</td>
                <td class="cellHeader" uniqueID="ms__id21">Manufacturer</td>
                <td class="cellHeader" uniqueID="ms__id22">Manufacturer Part</td>
         </tr>
              <xsl:call-template name="main"></xsl:call-template>
        </table>
       </body>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
          <script src="../../javascript/PopupMenu.js"></script>
        </html>
     </xsl:template>
      <xsl:template name="main">
        <xsl:variable name="products"><!-- generate appropriate product for every item-->
          <xsl:call-template name="Unique"></xsl:call-template>
      </xsl:variable>
        <xsl:for-each select="//Item//Item[@type='Part']">
          <xsl:variable name="id" select="@id"></xsl:variable>
          <xsl:variable name="part_number">
            <xsl:value-of select="item_number"></xsl:value-of>
            <xsl:if test="item_number='' or not(item_number)">
              <xsl:text> </xsl:text>
        </xsl:if>
       </xsl:variable>
          <xsl:variable name="part_name">
            <xsl:value-of select="name"></xsl:value-of>
            <xsl:if test="name='' or not(name)">
              <xsl:text> </xsl:text>
        </xsl:if>
       </xsl:variable>
          <xsl:variable name="part_description">
            <xsl:value-of select="description"></xsl:value-of>
            <xsl:if test="description='' or not(description)">
              <xsl:text> </xsl:text>
        </xsl:if>
       </xsl:variable>
          <xsl:variable name="is_first" select="count(ancestor::Item[@type='Part' and @id=string($id)] | preceding::Item[@type='Part' and @id=string($id)])"></xsl:variable>
          <xsl:if test="$is_first = 0">
            <xsl:variable name="sum_of_products" select="sum(msxsl:node-set($products)/product_for_item[item_id = $id]/product)"></xsl:variable>
            <xsl:call-template name="draw_row_for_item">
              <xsl:with-param name="id" select="$id"></xsl:with-param>
              <xsl:with-param name="sum_of_products" select="$sum_of_products"></xsl:with-param>
              <xsl:with-param name="part_number" select="$part_number"></xsl:with-param>
              <xsl:with-param name="part_name" select="$part_name"></xsl:with-param>
              <xsl:with-param name="part_description" select="$part_description"></xsl:with-param>
            </xsl:call-template>
       </xsl:if>
       </xsl:for-each>
     </xsl:template>
     <!-- Draw rows of table-->
      <xsl:template name="draw_row_for_item">
        <xsl:param name="id"></xsl:param>
        <xsl:param name="sum_of_products"></xsl:param>
        <xsl:param name="part_number"></xsl:param>
        <xsl:param name="part_name"></xsl:param>
        <xsl:param name="part_description"></xsl:param>
        <tr>
          <xsl:variable name="rowCount">
            <xsl:choose>
              <xsl:when test="count(Relationships/Item[@type='Part AML'])=0">1</xsl:when>          <xsl:otherwise>
                <xsl:value-of select="count(Relationships/Item[@type='Part AML'])"></xsl:value-of>
            </xsl:otherwise>
       </xsl:choose>
      </xsl:variable>
          <td rowspan="{$rowCount}" class="cellSolidRightBottom" width="12%" style="border-left:1px #666666 solid;" align="center" uniqueID="ms__id23">
            <xsl:value-of select="$part_number"></xsl:value-of>
       </td>
          <td rowspan="{$rowCount}" class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">
            <xsl:value-of select="$part_name"></xsl:value-of>
       </td>
          <td rowspan="{$rowCount}" class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">
            <xsl:value-of select="$part_description"></xsl:value-of>
       </td>
          <td rowspan="{$rowCount}" class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id25">
            <xsl:value-of select="$sum_of_products"></xsl:value-of>
       </td>
          <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id26">
            <xsl:value-of select="Relationships/Item[@type='Part AML'][1]/state"></xsl:value-of>
       </td>
          <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id27">
            <xsl:value-of select="Relationships/Item[@type='Part AML'][1]/related_id/Item/manufacturer/@keyed_name"></xsl:value-of>
       </td>
          <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id28">
            <xsl:value-of select="Relationships/Item[@type='Part AML'][1]/related_id/Item/item_number"></xsl:value-of>
       </td>
      </tr>
        <xsl:apply-templates select="Relationships/Item[@type='Part AML'][position()!=1]"></xsl:apply-templates>
      </xsl:template>
     <!--use unique id and calculate quantity for item in current chain-->
      <xsl:template name="Unique">
        <xsl:for-each select="//Item[@type='Part']">
          <xsl:variable name="cur_id" select="@id"></xsl:variable>
          <xsl:if test="not(count(descendant::Item[@type='Part' and @id=string($cur_id)]))">
            <product_for_item>
              <item_id>
                <xsl:value-of select="$cur_id"></xsl:value-of>
              </item_id>
              <product>
                <xsl:variable name="quantity" select="../../quantity"></xsl:variable>
                <xsl:choose>
                  <xsl:when test="string($quantity) = ''">0</xsl:when>
                  <xsl:otherwise>
                    <xsl:apply-templates mode="product_of_quantity" select="../..">
                      <xsl:with-param name="product_of_chain" select="$quantity"></xsl:with-param>
                    </xsl:apply-templates>
                  </xsl:otherwise>
                </xsl:choose>
             </product>
            </product_for_item>
          </xsl:if>
        </xsl:for-each>
      </xsl:template>
     <!--calculate product of quantities for item in its chain -->
      <xsl:template mode="product_of_quantity" match="Item[@type='Part BOM']">
        <xsl:param name="product_of_chain"></xsl:param>
        <xsl:choose><!-- If current Part BOM at the top of the current chain -->
          <xsl:when test="not(count(ancestor::Item[@type='Part BOM']))">
            <xsl:value-of select="number($product_of_chain)"></xsl:value-of>
          </xsl:when>
          <xsl:otherwise><!-- Get the quantity of the next relationship Part BOM and apply recursion again for it-->
            <xsl:variable name="quantity" select="../../../../quantity"></xsl:variable>
            <xsl:apply-templates mode="product_of_quantity" select="../../../..">
              <xsl:with-param name="product_of_chain" select="number($quantity)*number($product_of_chain)"></xsl:with-param>
        </xsl:apply-templates>
       </xsl:otherwise>
      </xsl:choose>
     </xsl:template>
      <xsl:template match="Item[@type='Part AML']">
        <tr>
          <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id29">
            <xsl:value-of select="state"></xsl:value-of>
          </td>
          <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id30">
            <xsl:value-of select="related_id/Item/manufacturer/@keyed_name"></xsl:value-of>
          </td>
          <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id31">
            <xsl:value-of select="related_id/Item/item_number"></xsl:value-of>
          </td>
        </tr>
      </xsl:template>

    </xsl:stylesheet> 
```

首选输出

```
 <html xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:aras="http://www.aras-corp.com">
      <head>
        <META http-equiv="Content-Type" content="text/html; charset=utf-16">
      </head>
      <style type="text/css" userData="Global">
    .cellSolid {text-align:center;border-top:1px #000000 solid;border-right:1px #000000 solid;border-bottom:1px #000000 solid;border-left:1px #000000 solid;}
    .cellSolidTopRight {border-top:1px #000000 solid;border-right:1px #000000 solid;}
    .cellSolidTopLeft {border-top:1px #000000 solid;border-left:1px #000000 solid;}
    .cellSolidRightBottom {border-right:1px #000000 solid;border-bottom:1px #000000 solid;font-family:helvetica;font-size:8pt;}
    .cellSolidBottomLeft {border-bottom:1px #000000 solid;border-left:1px #000000 solid;}
    .cellSolidTop {border-top:1px #000000 solid;}
    .cellSolidRight {border-right:1px #000000 solid;}
    .cellSolidBottom {border-bottom:1px #000000 solid;}
    .cellSolidLeft {border-left:1px #000000 solid;}
    .cellDashed {border-top:1px #666666 dashed;border-right:1px #666666 dashed;border-bottom:1px #666666 dashed;border-left:1px #666666 dashed;}
    .cellDashedTopRight {border-top:1px #666666 dashed;border-right:1px #666666 dashed;}
    .cellDashedTopLeft {border-top:1px #666666 dashed;border-left:1px #666666 dashed;}
    .cellDashedBottomRight {border-bottom:1px #666666 dashed;border-right:1px #666666 dashed;}
    .cellDashedBottomLeft {border-bottom:1px #666666 dashed;border-left:1px #666666 dashed;}
    .cellDashedTop {border-top:1px #666666 dashed;}
    .cellDashedRight {border-right:1px #666666 dashed;}
    .cellDashedBottom {border-bottom:1px #666666 dashed;}
    .cellDashedLeft {border-left:1px #666666 dashed;}
    .cellHeader {background-color:#CCCCCC;border-top:1px #000000 solid;border-right:1px #000000 solid;border-bottom:1px #000000 solid;padding:2px;text-align:center;text-transform:capitalize;text-align:center;font-family:helvetica;font-weight:bold;font-size:8pt;}
    .cellTitle {border-top:1px #000000 solid;border-right:1px #000000 solid;border-left:1px #000000 solid;padding:2px;text-align:center;text-transform:capitalize;text-align:center;font-family:helvetica;font-weight:bold;font-size:8pt;}
    table  {empty-cells:show; border-collapse:collapse;}
    td.noBorder {font-family:helvetica; font-size:8pt;  padding:2px; border-width:0;}
       </style>
      <body topmargin="50" leftmargin="50">
        <table border="0" cellspacing="0" cellpadding="0" width="100%">
          <tr>
            <td width="150" uniqueID="ms__id11"></td>
            <td width="250" uniqueID="ms__id12"></td>
            <td width="200" uniqueID="ms__id13"></td>
          </tr>
          <tr valign="top">
            <td align="left" uniqueID="ms__id14" colspan="3"><img src="../images/Logos/CooperPowerSystems.gif" height="60"></td>
          </tr>
          <tr valign="bottom">
            <td class="noBorder" colspan="13" style="font-family:helvetica;font-size:15pt;color:#DA1943;padding:2px;" align="left" uniqueID="ms__id15">AML Quantity Report -              9.6 Parts Rev              1</td>
            <td class="noBorder" colspan="4" style="font-family:helvetica;font-size:10pt;padding:2px;" align="right" uniqueID="ms__id16">Generated on:              <script>function m00(r, n){r += ""; if (!n) n = 2; while(r.length < n){r = "0" + r;} return r;} var dt = new Date(); var a = top.opener.top.aras; if (a){var s = m00(dt.getUTCFullYear(),4)+"-"+m00((dt.getUTCMonth()+1))+"-"+m00(dt.getUTCDate())+"T"+m00(dt.getUTCHours())+":"+m00(dt.getUTCMinutes())+":"+m00(dt.getUTCSeconds())+"+0000"; s = a.convertToNeutral(s, "date", "yyyy-MM-ddTHH:mm:sszzz"); s = a.convertFromNeutral(s, "date", "short_date"); document.write(s);}</script></td>
          </tr>
          <tr>
            <td class="cellHeader" style="border-left:1px #666666 solid;" uniqueID="ms__id17">Part Number</td>
            <td class="cellHeader" uniqueID="ms__id18">Name</td>
            <td class="cellHeader" uniqueID="ms__id32">Description</td>
            <td class="cellHeader" uniqueID="ms__id19">Calculated Quantity</td>
            <td class="cellHeader" uniqueID="ms__id20">AML Status</td>
            <td class="cellHeader" uniqueID="ms__id21">Manufacturer</td>
            <td class="cellHeader" uniqueID="ms__id22">Manufacturer Part</td>
          </tr>
          <tr>
            <td class="cellSolidRightBottom" width="12%" style="border-left:1px #666666 solid;" align="center" uniqueID="ms__id23">E000371</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">0</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">Part 1</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id25">0</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id26">Preliminary</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id27">Speer</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id28">RK7D</td>
          </tr>
          <tr>
            <td class="cellSolidRightBottom" width="12%" style="border-left:1px #666666 solid;" align="center" uniqueID="ms__id23">E000371</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">0</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">Part 1</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id25">0</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id29">Preliminary</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id30">Ven</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id31">CR00T</td>
          </tr>
          <tr>
            <td class="cellSolidRightBottom" width="12%" style="border-left:1px #666666 solid;" align="center" uniqueID="ms__id23">E000371</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">0</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">Part 1</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id25">0</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id29">Preliminary</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id30">Sonic</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id31">ERJ</td>
          </tr>
          <tr>
            <td class="cellSolidRightBottom" width="12%" style="border-left:1px #666666 solid;" align="center" uniqueID="ms__id23">E000371</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">0</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">Part 1</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id25">0</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id29">Preliminary</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id30">Comp</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id31">NRCF</td>
          </tr>
          <tr>
            <td class="cellSolidRightBottom" width="12%" style="border-left:1px #666666 solid;" align="center" uniqueID="ms__id23">E000371</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">0</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">Part 1</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id25">0</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id29">Preliminary</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id30">Ya</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id31">RC0L</td>
          </tr>
          <tr>
            <td class="cellSolidRightBottom" width="12%" style="border-left:1px #666666 solid;" align="center" uniqueID="ms__id23">E001163</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">82</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">Part 2</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id25">0</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id26">Preliminary</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id27">Sonic</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id28">E2GX5</td>
          </tr>
          <tr>
            <td class="cellSolidRightBottom" width="12%" style="border-left:1px #666666 solid;" align="center" uniqueID="ms__id23">E001163</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">82</td>
            <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">Part 2</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id25">0</td>
            <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id29">Preliminary</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id30">Sonic</td>
            <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id31">EGX5</td>
          </tr>
        </table>
      </body><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script><script src="../../javascript/PopupMenu.js"></script></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T06:18:31.897

我认为您的 XSLT 可以使用大量清理，但要实现您想要的输出，您可以替换它：

```
<xsl:call-template name="draw_row_for_item">
  <xsl:with-param name="id" select="$id"></xsl:with-param>
  <xsl:with-param name="sum_of_products" select="$sum_of_products"></xsl:with-param>
  <xsl:with-param name="part_number" select="$part_number"></xsl:with-param>
  <xsl:with-param name="part_name" select="$part_name"></xsl:with-param>
  <xsl:with-param name="part_description" select="$part_description"></xsl:with-param>
</xsl:call-template> 
```

有了这个：

```
<xsl:apply-templates select="Relationships/Item[@type='Part AML']">
  <xsl:with-param name="sum_of_products" select="$sum_of_products"></xsl:with-param>
  <xsl:with-param name="part_number" select="$part_number"></xsl:with-param>
  <xsl:with-param name="part_name" select="$part_name"></xsl:with-param>
  <xsl:with-param name="part_description" select="$part_description"></xsl:with-param>
</xsl:apply-templates> 
```

将 XSLT 中的最后一个模板修改为如下所示：

```
 <xsl:template match="Item[@type='Part AML']">
    <xsl:param name="sum_of_products"></xsl:param>
    <xsl:param name="part_number"></xsl:param>
    <xsl:param name="part_name"></xsl:param>
    <xsl:param name="part_description"></xsl:param>
    <xsl:variable name="nonFirstShift" select="3 * (position() != 1)" />
    <tr>
      <td class="cellSolidRightBottom" width="12%" style="border-left:1px #666666 solid;" align="center" uniqueID="ms__id23">
        <xsl:value-of select="$part_number"></xsl:value-of>
      </td>
      <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">
        <xsl:value-of select="$part_name"></xsl:value-of>
      </td>
      <td class="cellSolidRightBottom" width="24%" align="center" uniqueID="ms__id24">
        <xsl:value-of select="$part_description"></xsl:value-of>
      </td>
      <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id25">
        <xsl:value-of select="$sum_of_products"></xsl:value-of>
      </td>
      <td class="cellSolidRightBottom" width="12%" align="center" uniqueID="ms__id{26 + $nonFirstShift}">
        <xsl:value-of select="state"></xsl:value-of>
      </td>
      <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id{27 + $nonFirstShift}">
        <xsl:value-of select="related_id/Item/manufacturer/@keyed_name"></xsl:value-of>
      </td>
      <td class="cellSolidRightBottom" width="20%" align="center" uniqueID="ms__id{28 + $nonFirstShift}">
        <xsl:value-of select="related_id/Item/item_number"></xsl:value-of>
      </td>
    </tr>
  </xsl:template> 
```

然后你可以删除`draw_row_for_item`模板。

# extjs - 将 HTML 附加到 Sencha Touch 容器/面板

> ID：15031980
> 
> 赞同：1
> 
> 时间：2013-02-22T19:41:02.110
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我想创建一个应用程序内控制台，以便我们的应用程序可以有一个单独的选项卡，我们可以在测试时输出（并轻松读取）调试信息。

我是 Sencha Touch 的新手，但在 jQuery 中，执行以下操作很简单：

```
window.log = function(msg) {
    $("#Console").append('<div>' + msg + '</div>');
} 
```

我的 Main.js 视图包括以下内容：

```
{
    title: 'Console',
    iconCls: 'info',
    scrollable: true,

    items: [
        {
            docked: 'top',
            xtype: 'titlebar',
            title: 'Console'
        },
        {
            xtype: 'container',
            id: 'console'
        }
    ]
} 
```

这是我能想到的最好的方法，但是由于它要获取容器的整个 HTML，然后重新设置它，这似乎非常浪费，而且很糟糕：

```
 Ext.log = function (msg) {
        var console = Ext.get('console');
        var html = console.getHtml();
        console.setHtml(html + '<div>' + msg + '</div>');
    }; 
```

必须有更好的方法……对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:10:51.340

您可以每次创建一个面板并将其添加到您的容器中。

```
var myPanel = Ext.create('Ext.Panel', {
    html: 'This will be added to a Container'
});

Ext.getCmp('console').add([myPanel]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T21:05:44.443

如果您只需要短时间的消息，您可以添加：

```
var actionSheet = Ext.create('Ext.ActionSheet', {
    items: [
        {
            xtype: 'container',
            html  : 'My Message',
            style: 'color: white;'
        }
    ],
    itemId: 'debugMessage',
    listeners: {
        show: function () {
            Ext.defer(function(){
                Ext.Viewport.down('.container[itemId=debugMessage]').hide();
                Ext.defer(function(){
                    Ext.Viewport.down('.container[itemId=debugMessage]').destroy();
                },250);
            },1400);
        }
    }
});
Ext.Viewport.add(actionSheet);
actionSheet.show(); 
```

# c++ - 没有 openCV（LINUX）的 C++ 中的 USB 网络摄像头图像捕获

> ID：15031983
> 
> 赞同：14
> 
> 时间：2013-02-22T19:41:25.843
> 
> 标签：c++, webcam

如何使用 C++ 使用网络摄像头捕获图像并将其保存到磁盘？由于硬件问题，我无法使用 OPENCV。USB 网络摄像头可以与其他程序一起使用，例如 mplayer、cheese、gpicview、ffmpeg 等。

我听说 V4L 可以做到这一点，但它有任何 C++ 库吗？任何人都可以向我展示如何执行此操作的 C++ 示例吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-22T20:09:48.563

这很容易，您可以在视频设备`read`上完成，在您激活一些 ioctl 以控制摄像头之后。

您可以使用 v4l2 来完成这项工作。您在这些步骤中执行此操作：

1.  打开摄像头的设备文件（通常是“/dev/video0”）
2.  告诉 v4l2 你想知道设备的某些功能
3.  告诉 v4l2 从设备读取
4.  告诉 v4l2 你想使用哪种格式

这是我用于这项工作的一个实现。它将设置相机以捕捉 320x240 像素的视频，但您可以读取分辨率，相机能够从`v4l2_capability`结构中读取。

此外，我还没有在与我的 PS2 EyeToy 不同的相机上测试代码，但它主要取自名为 qv4l2 的示例程序（你可以从[这里](http://v4l-utils.sourcearchive.com/documentation/0.7.91/qv4l2-qt4_2qv4l2_8cpp-source.html "这里")获取）。该程序应该可以解决您通常在那里看到的所有其他问题。

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>
#include <fcntl.h>              /* low-level i/o */
#include <errno.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <sys/time.h>
#include <sys/ioctl.h>

#include <linux/videodev2.h>

static int xioctl(int fh, int request, void *arg)
{
    int r;
    do {
        r = ioctl(fh, request, arg);
    } while (-1 == r && EINTR == errno);
    return r;
}

int allocCamera(const char* file) 
{
    struct v4l2_capability cap;
    struct v4l2_crop crop;
    struct v4l2_format fmt;

    int camera_fd = open(file, O_RDONLY);

    if (-1 == xioctl (camera_fd, VIDIOC_QUERYCAP, &cap)) {
        if (EINVAL == errno) {
            fprintf (stderr, "%s is no V4L2 device\n", file);
            exit (EXIT_FAILURE);
        } else {
            printf("\nError in ioctl VIDIOC_QUERYCAP\n\n");
            exit(0);
        }
    }

    if (!(cap.capabilities & V4L2_CAP_VIDEO_CAPTURE)) {
        fprintf (stderr, "%s is no video capture device\n", file);
        exit (EXIT_FAILURE);
    }

    if (!(cap.capabilities & V4L2_CAP_READWRITE)) {
        fprintf (stderr, "%s does not support read i/o\n", file);
        exit (EXIT_FAILURE);
    }

    memset(&fmt, 0, sizeof(fmt));
    fmt.type    = V4L2_BUF_TYPE_VIDEO_CAPTURE;
    fmt.fmt.pix.width       = 320; 
    fmt.fmt.pix.height      = 240;
    fmt.fmt.pix.pixelformat = V4L2_PIX_FMT_YUYV;
    fmt.fmt.pix.field       = V4L2_FIELD_INTERLACED;
    if (-1 == xioctl(camera_fd, VIDIOC_S_FMT, &fmt)) {
        printf("VIDIOC_S_FMT");
    }
    return camera_fd;
} 
```

# visual-studio-2012 - 从 Visual Studio 2012 在服务器上安装 Web api

> ID：15031984
> 
> 赞同：1
> 
> 时间：2013-02-22T19:41:26.597
> 
> 标签：visual-studio-2012, asp.net-web-api, windows-2003-webserver

我是 Web 开发领域的新手，最后，我从本地 PC 上使用 Visual Studio 2012 开发了一个 Web api，它运行良好。

现在我需要将它部署在服务器上，我不知道从什么时候开始。有人可以指导我（或至少给我一个关于如何做到这一点的链接）。我在网上找到的所有资源都是为具有 Web 开发经验和/或服务器知识的人准备的。

据我了解，我会在服务器上做一个远程桌面并安装它，但我不知道会做什么......

另外，我知道服务器运行 Windows 2003，而且我知道 VS2012 仅在 Windows 7 和 8 上运行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:43:31.797

使用 Visual Studio 的发布向导发布您的站点。

这将创建一个 DDL 部署包和站点使用的任何静态文件，并通过 FTP 或文件系统复制它。

# c# - 如果点击其他任何地方，Windows Phone 关闭弹出窗口

> ID：15031991
> 
> 赞同：1
> 
> 时间：2013-02-22T19:41:52.867
> 
> 标签：c#, popup, windows-phone

我有一个我目前正在开发的 Windows Phone 应用程序，我的共享按钮使用以下代码打开一个带有多个选项的小弹出窗口：

```
 private void share_Click(object sender, System.EventArgs e) 
    {

        Popup share= new Popup();
        share.Child = new sharePopup();
        share.IsOpen = true;
        share.VerticalOffset = 30;
        share.HorizontalOffset = 0;
    } 
```

现在，这个弹出窗口有一个“关闭”按钮，但如果我不点击它，而是点击前一个仍然可见的页面上的另一个按钮，即使移动到新页面，弹出窗口也会保持原位。我必须单击“关闭”才能使弹出窗口消失。

如果我点击弹出窗口本身之外的任何位置，我正在寻找一种关闭弹出窗口的方法。是否有预定义的方法来执行此操作？如果没有，我可以采取什么方法？

提前致谢

编辑：这是弹出窗口的 c# 代码

```
 public partial class sharePopup : UserControl
{
    public sharePopup()
    {
        InitializeComponent();
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {            
        Popup mensaje = this.Parent as Popup;
        mensaje.IsOpen = false;
    }
      private void UserControl_Loaded(object sender, RoutedEventArgs e)
    {
        this.Focus();
    }

    private void UserControl_LostFocus(object sender, RoutedEventArgs e)
    {
        Popup mensaje = this.Parent as Popup;
        mensaje.IsOpen = false;
    }
} 
```

}

弹出窗口的 XAML 仅包含大小、颜色和按钮定义：

```
<UserControl x:Class="MSPinTrainingApp.sharePopup"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
d:DesignHeight="480" d:DesignWidth="480"
Width="480" Height="200" >

<Grid x:Name="LayoutRoot" LostFocus="LayoutRoot_LostFocus">
    <Grid.RowDefinitions>
        <RowDefinition Height="auto"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="auto"/>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid.Background>
        <SolidColorBrush Color="{StaticResource PhoneChromeColor}"/>
    </Grid.Background>
    <TextBlock HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
               Margin="3" x:Name="txtMensaje" Text="Compartir:" LostFocus="txtMensaje_LostFocus" />
    <Image Margin="70,60,335,62" Source="appbar.email.hardedge.png" Stretch="Fill" Tap="Image_Tap_1"/>
    <Image Margin="200,60,200,62" Source="appbar.facebook.png" Stretch="Fill" Tap="Image_Tap_2"/>
    <Image Margin="335,60,70,62" Source="appbar.twitter.bird.png" Stretch="Fill" Tap="Image_Tap_3"/>
    <Image Margin="430,-12,11,134" Source="/appbar.close.png" Width="50" Tap="Image_Tap_4"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-26T04:42:24.317

`IsLightDismissEnabled="True"`当你声明你的`Popup`控制 权时，我发现刚刚设置很有帮助。[MSDN 说明](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.popup.islightdismissenabled)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-03T14:22:53.630

而不是玩“失去焦点”，这在所有情况下都不起作用（例如，如果您在弹出窗口中有文本框或其他可聚焦控件）。我建议通过检测根视觉中的点击来消除弹出窗口：

```
 Application.Current.RootVisual.Tap += (s, e) =>
            {
                popup.IsOpen = false;
            }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-22T19:44:44.080

您可以尝试处理 UIElement 的[LostFocus](http://msdn.microsoft.com/en-us/library/system.windows.uielement.lostfocus%28v=vs.95%29.aspx)事件。在弹出窗口中调用 OnLostFocus 处理程序时，关闭弹出窗口（关闭自身）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-23T20:38:35.810

经过多次失败的实验并环顾网络后，我发现了 Coding4Fun 工具包，并且能够使用它的 MessagePrompt 制作一个有效的弹出窗口。该工具包可在[http://coding4fun.codeplex.com/ 获得](http://coding4fun.codeplex.com/)

# jquery - JQuery Mobile - 获取 SelectMenu 的值

> ID：15031993
> 
> 赞同：4
> 
> 时间：2013-02-22T19:42:03.610
> 
> 标签：jquery, css, jquery-mobile, select-menu

当我尝试从我的选择菜单中获取值时，我得到一个空值。

我知道我这样做的原因是 jquery 移动标记导致两个项目具有“mySelect”类 - 所以选择器 $(".selectMenu") 是一个包装集。

我想知道是否有一种方法可以通过插件获取值——比如 $(".mySelect").selectmenu("value") 或类似的东西。

```
<section data-role="page">
<section data-role="content">
    <input type="button" value="what is the value" id="myButton"/>
    <select class="mySelect">
        <option value="1">one</option>
        <option value="2">two</option>
        <option value="3">three</option>
    </select>
 </section>
</section>

$("#myButton").click(function(){
    var val = $(".mySelect").val();
    alert(val);
}); 
```

[http://jsfiddle.net/9HG9t/](http://jsfiddle.net/9HG9t/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-22T20:55:54.163

你可以这样做来获得价值。

```
$(".mySelect option:selected").val() 
```

示例：http: [//jsfiddle.net/9HG9t/1/](http://jsfiddle.net/9HG9t/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T20:35:29.580

只需使用经典的 jQuery 方式：

```
$("#myButton").click(function(){
    var val = $(".mySelect").find(":selected").text();
    alert(val);
}); 
```

现场示例：http: [//jsfiddle.net/Gajotres/ANVQb/](http://jsfiddle.net/Gajotres/ANVQb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T21:12:20.283

您的代码在一个`<script>`块中包装的 Visual Studio 项目中工作。

# oracle - 将两个表中的列合并为一个

> ID：15031994
> 
> 赞同：0
> 
> 时间：2013-02-22T19:42:04.120
> 
> 标签：oracle, plsql, plsqldeveloper

我有 2 个表，EMPLOYEEAPP 和 EMPLOYEEINFO。

当 SECURITYGROUP 列是某个值时，我想在 EMPLOYEEAPP 表中搜索 EMPLOYID。

然后，我想从 EMPLOYEEAPP 表中获取 EMPLOYID，并使用 EMPLOYEEINFO 表中的 EMPLID 列搜索它们对应的名字和姓氏。

```
SELECT EMPLOYEEAPP.EMPLOYID, EMPLOYEEINFO.FIRST_NAME, EMPLOYEEINFO.LAST_NAME
FROM EMPLOYEEAPP
WHERE EMPLOYEEAPP.SECURITYGROUP = 'ANALYST'
INNER JOIN EMPLOYEEINFO
ON EMPLOYEEAPP.EMPLOYID=EMPLOYEEINFO.EMPLID 
```

我不断收到错误“ORA-00933：SQL 命令未正确结束”。

任何帮助或见解将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T19:44:08.013

你把`WHERE`子句放错地方了。查询应该是：

```
SELECT EMPLOYEEAPP.EMPLOYID, 
  EMPLOYEEINFO.FIRST_NAME, 
  EMPLOYEEINFO.LAST_NAME
FROM EMPLOYEEAPP
INNER JOIN EMPLOYEEINFO
   ON EMPLOYEEAPP.EMPLOYID=EMPLOYEEINFO.EMPLID
WHERE EMPLOYEEAPP.SECURITYGROUP = 'ANALYST' 
```

查询的顺序是：

```
SELECT
FROM
JOIN
WHERE 
GROUP BY 
HAVING
ORDER BY 
```