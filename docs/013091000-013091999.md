# StackOverflow 问答 13091000-13091999

# sql - SQLite 比较日期

> ID：13091000
> 
> 赞同：14
> 
> 时间：2012-10-26T16:41:13.033
> 
> 标签：sql, sqlite, date

我有这个 SQL 语句：

```
SELECT Geburtsdatum FROM Kunde
WHERE Geburtsdatum BETWEEN '1993-01-01' AND '2000-01-01' 
```

但我得到了一些奇怪的结果，例如：2.02.1990

'Geburtsdatum' 是一个日期

有什么建议或解决方案吗？

我的表结构：

```
CREATE TABLE Kunde (
  Kunde_ID INTEGER NOT NULL ,
  Card INTEGER ,
  Vorname VARCHAR(255) NOT NULL ,
  Nachname VARCHAR(255) NOT NULL ,
  Ort VARCHAR(255) NOT NULL ,
  Strasse VARCHAR(255) NOT NULL ,
  Postleitzahl VARCHAR(10) NOT NULL ,
  Mail VARCHAR(255) ,
  Telefonnummer VARCHAR(255) ,
  Geburtsdatum DATE NOT NULL ,
  Beitrittsdatum DATE NOT NULL ,
  Geschlecht INTEGER NOT NULL ,
  Land VARCHAR(255) NOT NULL DEFAULT 'Österreich' ,
  Bankname VARCHAR(255) ,
  Bankleitzahl VARCHAR(255) ,
  Kontonummer VARCHAR(255) ,
  GroupID INTEGER NOT NULL ,
  Besucher INTEGER ,
  Access BOOLEAN ,
  image BLOB NULL ,
  writeDate DATE ,
  drinkAbo BOOLEAN ,
  PRIMARY KEY (Kunde_ID) ) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-26T16:51:48.793

从文档中：

> SQLite 没有为存储日期和/或时间预留存储类。

因此，您的列并未完全存储为日期。进一步阅读，我们了解到指定为`DATE`的列实际上是`NUMERIC`使用关联规则 5 存储的。

回到第 1.2 节：

> REAL 作为儒略日数字，根据预测的公历，自公元前 4714 年 11 月 24 日格林威治中午以来的天数。

好的。所以让我们试试：

```
SELECT Geburtsdatum FROM Kunde
WHERE Geburtsdatum 
    BETWEEN julianday('1993-01-01') AND julianday('2000-01-01'); 
```

* * *

奇怪的是，[SQL Fiddle](http://sqlfiddle.com/)似乎将`DATE`s 存储为字符串，而上述方法不起作用。在这种情况下，应该：

```
SELECT Geburtsdatum FROM Kunde
WHERE date(Geburtsdatum)
    BETWEEN date('1993-01-01') AND date('2000-01-01'); 
```

此外，在您的情况下，您似乎返回了一些奇怪的（阅读：本地化）格式。我想知道在你的情况下它是否真的是一个字符串，只是格式不同。你可以试试：

```
SELECT Geburtsdatum FROM Kunde
WHERE strftime('%d.%m.%Y', Geburtsdatum)
    BETWEEN date('1993-01-01') AND date('2000-01-01'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T16:44:48.180

有人遇到了同样的问题并解决了。（比较前使用 datetime 函数）

请参阅[SQLite 日期时间比较](https://stackoverflow.com/questions/1975737/sqlite-datetime-comparison)

**摘录：** 遵循 datetime 函数并具有字符串格式为 YYYY-MM-DD HH:mm:ss 我取得了如下的良好结果

```
select * 
  from table_1 
  where mydate >= Datetime('2009-11-13 00:00:00') 
  and mydate <= Datetime('2009-11-15 00:00:00') 
```

- 编辑 -

您基本上是在比较字符串。这就是意外行为的原因。在比较之前使用该函数转换为日期时间，它应该可以工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T18:27:03.903

为了能够比较日期，您必须将它们存储为[SQLite 支持的日期格式](http://www.sqlite.org/lang_datefunc.html)之一，例如`JJJJ-MM-TT`字符串。您的日期以 SQLite 无法识别的本地化日期格式存储为字符串。

如果最重要的字段不在字符串的开头，则字符串比较不适用于日期。
使用表中当前的值，您将无法进行任何比较。

# python - 调用函数时Python警告“'str'不可调用”

> ID：13091001
> 
> 赞同：1
> 
> 时间：2012-10-26T16:41:17.587
> 
> 标签：python, python-3.x, pycharm

我在下面的行中收到一条警告，指出：'str' object is not callable。

我能做些什么来让警告消失吗？

谢谢

```
Action.action() 
```

这是代码块：

```
Action = DefineAction()
Action.action()

class DefineAction:
    def action(self):
        self.action = listAction[generateRandomNumber(0,4)]
        return self.action 
```

这是listAction：

```
listAction =['walks','runs','jaunts','ambles','dashes','sprints'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T16:46:43.850

这实际上比我最初想象的要复杂，因为你有一个名为的函数`self.action` **和**一个名为的变量`self.action`，所以你的代码很混乱。第一次调用时`DefineAction.action()`，会用字符串覆盖函数，所以第二次调用时，会出现此错误。

只需给您的函数和变量起不同的名称，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:49:10.080

在函数`action`中，您设置`self.action`为一个字符串。这意味着当您`Action.action()`第一次调用时，它会将属性`Action.action`设置为字符串，因此下次调用时`Action.action()`您将看到此错误。

只需为您的属性选择一个不同的名称，确保它与方法的名称不匹配。您`DefineAction.action(Action)`仍然可以使用调用原始`action()`方法，但这是不好的做法。

# .net - 从同一主机上的子域访问时未找到 WCF 错误

> ID：13091005
> 
> 赞同：2
> 
> 时间：2012-10-26T16:41:46.143
> 
> 标签：.net, wcf, silverlight

当我从本地机器访问服务时，一切正常。但是，当我在子域站点上托管 silverlight 应用程序时，我没有得到任何响应。Silverlight 应用程序是在同一个子域上还是在不同的子域上都没有关系。什么都没发生。

这是我的服务的 web.config 文件：

```
 <?xml version="1.0"?>
    <configuration>

     <system.web>
      <compilation debug="true" targetFramework="4.0" />
     </system.web>
     <system.serviceModel>

    <services>
      <service behaviorConfiguration="Metadata" name="IVA_SL5_WCFservice.Service1">
        <endpoint address="http://subdomain.website.com/INA-inv_s/Service1.svc" binding="basicHttpBinding"
          bindingConfiguration="BasicHttpBinding_Service1" contract="IVA_SL5_WCFservice.Service1" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <timeouts closeTimeout="00:10:00" openTimeout="00:10:00" />
        </host>
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_Service1" closeTimeout="00:25:00"           openTimeout="00:01:00" sendTimeout="00:10:00" maxBufferPoolSize="2147483647"
          maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Metadata">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
   <!-- <serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> -->
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
  <!--
  <system.diagnostics>
    <sources> 
```

这是 silverlight 应用程序中的 ClientConfig 文件：

```
<configuration>
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_Service1" closeTimeout="00:25:00"
                openTimeout="00:25:00" sendTimeout="00:25:00" maxBufferSize="2147483647"
                maxReceivedMessageSize="2147483647">
                <security mode="None" />
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://subdomain.website.com/IVA-inv_s/Service1.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_Service1"
            contract="IVA_Service.Service1" name="BasicHttpBinding_Service1" />
    </client>
</system.serviceModel>
</configuration> 
```

我像这样在silverlight应用程序上调用服务......

```
Service1Client client;
client = new IVA_Service.Service1Client("BasicHttpBinding_Service1");//"BasicHttpBinding_Service1"); 
```

我已经搞砸了好几天了......请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:51:28.707

声明服务时尝试添加绝对 URI

```
new IVA_Service.Service1Client("BasicHttpBinding_Service1",
                            (new Uri(Application.Current.Host.Source,"../Service1.svc")).AbsoluteUri); 
```

# ruby-on-rails - 如何让 ActiveAdmin 使用强参数？

> ID：13091011
> 
> 赞同：42
> 
> 时间：2012-10-26T16:42:21.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, activeadmin, strong-parameters

*更新：这个问题是在 ActiveAdmin 中已经有解决方案之前提出的。正如 Joseph 所说，ActiveAdmin 文档现在包含此信息，但这里的答案是为那些使用旧版本 ActiveAdmin 的人提供的。*

当 strong_parameters 0.1.4 与 Rails 3.2.8 中的 ActiveAdmin 0.5.0 一起使用时，如果您使用的模型正在使用 StrongParameters，请包括：

```
include ::ActiveModel::ForbiddenAttributesProtection 
```

如果您尝试创建/编辑记录，则会在日志中收到以下错误：

```
ActiveModel::ForbiddenAttributes (ActiveModel::ForbiddenAttributes) 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-27T07:18:34.790

更新到最新的 inherit_resources gem 并在您的控制器块中执行此操作：

```
ActiveAdmin.register Blog do
  #...
  controller do
    #...
    def permitted_params
      params.permit(:blog => [:name, :description])
      # params.permit! # allow all parameters
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-11-29T11:50:27.227

该文档现在清楚地说明了如何在 Rails 4 中设置强参数。请参阅：

[https://github.com/gregbell/active_admin/blob/master/docs/2-resource-customization.md#setting-up-strong-parameters](https://github.com/gregbell/active_admin/blob/master/docs/2-resource-customization.md#setting-up-strong-parameters)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-01-24T21:46:57.003

接受的答案对我在引擎中定义的资源不起作用，所以我在hereded_resources/lib/inherited_resources/base_helpers.rb 中追踪了原始resource_params 并提出了这个更接近于模仿该代码并且适用于引擎的解决方案：

在`config/initializers/active_admin.rb`：

```
ActiveAdmin::ResourceController.class_eval do
  # Allow ActiveAdmin admins to freely mass-assign when using strong_parameters
  def resource_params
    [(params[resource_request_name] || params[resource_instance_name]).try(:permit!) || {}]
  end
end 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-08-07T18:12:07.367

在你的 config/initializers/active_admin.rb

```
config.before_filter do
  params.permit!
end 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-10-26T16:42:21.360

*更新：请参阅@Brendon-Muir 的回答以了解最新的方法。以下信息之前是正确的，因此我将其保留在此处，以防它对使用旧版本 ActiveAdmin 的其他人有所帮助。*

谷歌群组线程中提出了一个补丁： [https ://groups.google.com/forum/?fromgroups=#!topic/activeadmin/XD3W9QNbB8I](https://groups.google.com/forum/?fromgroups=#!topic/activeadmin/XD3W9QNbB8I)

然后被放在一起： [https ://github.com/gregbell/active_admin/issues/1731](https://github.com/gregbell/active_admin/issues/1731)

但就目前而言，在应用程序中为 ActiveAdmin 添加强参数支持的侵入性最小的方法是在控制器块中重新定义 resource_params，或者通过“允许所有参数”方法，这种方法不太安全：

```
controller do
  def resource_params
    return [] if request.get?
    [ params[active_admin_config.resource_class.name.underscore.to_sym].permit! ]
  end
end 
```

或更安全的显式方式：

```
controller do
  def resource_params
    return [] if request.get?
    [ params.require(:name_of_model).permit(:each,:param,:goes,:here,:if,:you,:want) ]
  end
end 
```

请参阅有关修改控制器的 Active Admin 文档：http:
[//activeadmin.info/docs/8-custom-actions.html#modify_the_controller](http://activeadmin.info/docs/8-custom-actions.html#modify_the_controller)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-04-27T11:20:42.680

您也可以`permit_params`按如下方式使用：

```
ActiveAdmin.register Resource do

  permit_params do
    %i(first_name last_name)
  end

  index pagination_total: false do
    column :id
    column :first_name
    column :last_name
    actions
  end
end 
```

# pytest - 我在哪里可以找到通过 py.test 测试捕获的标准输出？

> ID：13091015
> 
> 赞同：4
> 
> 时间：2012-10-26T16:42:41.457
> 
> 标签：pytest

我正在使用 py.test 报告挂钩（pytest_runtest_makereport() 和 pytest_report_teststatus()）。

当 py.test 测试失败时，我可以在报告挂钩（在 report.sections[]）中找到捕获的标准输出数据。

当 py.test 测试通过时，report.sections[] 列表为空。

我在哪里可以找到通过测试的捕获标准输出？

谢谢。

**编辑：** 从源代码（_pytest/capture.py）看来，只有在测试未通过时才可用：

```
def pytest_runtest_makereport(self, __multicall__, item, call):
    ...
    if not rep.passed:
        addouterr(rep, outerr) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T20:25:06.143

事实证明，该信息在 item.outerr 中可用，它是两个 Unicode 字符串的元组；第一个是标准输出，第二个是标准错误。

请注意，py.test 在设置、调用和拆卸报告中指定了这些字符串，其中一些可能是空字符串。所以为了保存输出，而不用空字符串覆盖它，逻辑需要是：

```
stdout = item.outerr[0]
if stdout and len(stdout):
    whatever.stdout = stdout

stderr = item.outerr[1]
if stderr and len(stderr):
    whatever.stderr = stderr 
```

# ruby-on-rails - 在 Ruby 类中干燥条件验证

> ID：13091019
> 
> 赞同：4
> 
> 时间：2012-10-26T16:43:05.193
> 
> 标签：ruby-on-rails, ruby, dry

我怎样才能干掉我的验证码？我有一个`Discussion`具有 aa`category`和`status`字段的模型。状态值取决于类别值。`category == 'question'`例如，只能在 中具有状态的讨论`STATUSES[:question]`。

```
 STATUSES   = {
    question:   %w[answered],
    suggestion: %w[pending planned started completed declined],
    problem:    %w[started solved]
  }
  validates :status, allow_blank: true, inclusion: { in: STATUSES[:question] },   if: lambda { self.category == 'question' }
  validates :status, allow_blank: true, inclusion: { in: STATUSES[:suggestion] }, if: lambda { self.category == 'suggestion' }
  validates :status, allow_blank: true, inclusion: { in: STATUSES[:problem] },    if: lambda { self.category == 'problem' } 
```

我正在使用 Rails 3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:54:28.610

`:inclusion :in`接受一个 lambda 本身：

```
validates :status, inclusion: { in: lambda { |o| STATUSES[o.category.to_sym] } } 
```

文档：[http ://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_inclusion_of](http://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_inclusion_of)

# c - 用C读取二进制文件的奇怪之处

> ID：13091021
> 
> 赞同：0
> 
> 时间：2012-10-26T16:43:13.203
> 
> 标签：c, pointers, file-io, binaryfiles, file-pointer

我在 C 中定义了一个像这样的二进制文件

```
FILE *gfp;
gfp = fopen(gridfiles, "wb"); 
```

变量 gridfiles 存储文件的名称，并且之前已定义。现在我将两个变量写到文件中。

```
for(yy = 0; yy < nfiley; yy++) {
   for(xx = 0; xx < nfilex; xx++) {
      filebx = beguv + xx*1E3;
      fileby = enduv - yy*1E3;
      fwrite(&filebx, sizeof(filebx), 1, gfp);
      fwrite(&fileby, sizeof(fileby), 1, gfp);
   }
} 
```

如果*在*这段代码之后我

```
fseek(gfp, 0, SEEK_SET);
fread(&filebx, sizeof(filebx), 1, gfp);
fread(&fileby, sizeof(fileby), 1, gfp);
fprintf(stderr, "%f %f", filebx, fileby); 
```

我的输出是

```
1000 15000 
```

对于前两个，这是预期的。

但是如果在一些其他代码（根本不涉及这些文件）之后我重复 fseek() 等，我的输出是

```
14000 14000 
```

不管我做什么。我一直在努力解决这个问题......有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:54:39.210

从已以写入模式打开的流中读取是[未定义的行为。](http://en.wikipedia.org/wiki/Undefined_behavior)你应该做到：

```
gfp = fopen(gridfiles, "wb+"); 
```

如果您打算同时阅读和写作。

此外，正如@Kyle Jones 在上面的评论中所指出的，您应该养成在执行文件 I/O 时检查 / 的返回状态的习惯`fread`——`fwrite`这会更早地发现您的问题。

# c# - 从对象更新 EF

> ID：13091029
> 
> 赞同：1
> 
> 时间：2012-10-26T16:43:38.710
> 
> 标签：c#, .net, entity-framework

我知道要更新 EF 中的对象，我可以执行类似...

```
var hotel = context.Hotels.SingleOrDefault(u => u.HotelID == editedHotel.HotelID);
    hotel.Name= editedHotel.Name;
    hotel.Address = editedHotel.Address;
    hotel.RoomCount = editedHotel.RoomCount;
context.SaveChanges(); 
```

但是如果很多字段需要更新，这会变得很长。

有没有办法我可以做类似...

```
 var hotel = context.Hotels.SingleOrDefault(u => u.HotelID == editedHotel.HotelID);
hotel = editedHotel;
context.SaveChanges(); 
```

...所以所有字段都可以一次性更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:47:15.007

我想你可能想研究一下 AutoMapper 之类的东西。

但是，如果您覆盖对 的引用`hotel`，您实际上会丢失 EF 为您执行的跟踪。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T16:51:20.110

怎么样...

```
var cachedHotel = context.Hotels.Local
    .FirstOrDefault(h => h.id = editedHotel.id);
if (cachedHotel != null)
{
  context.Hotels.Detach(cachedHotel);
}
context.Hotels.Attach(editedHotel);
context.Entry(editedHotel).State = System.Data.EntityState.Modified;
context.SaveChanges(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T16:47:58.750

您可以使用/编写一个克隆方法，该方法使用反射将值从一个对象应用到另一个对象。

或者，您可以向 Hotel 类添加一个方法，该方法采用酒店对象并应用值，例如：

```
public void Apply(Hotel h)
{
    this.Name = h.Name;
    this.Address = h.Address;
    this.RoomCount = h.RoomCount;
} 
```

然后你的代码变成：

```
var hotel = context.Hotels.SingleOrDefault(u => u.HotelID == editedHotel.HotelID);
    hotel.Apply(editedHotel);
context.SaveChanges(); 
```

# android - 共享图像，但没有文件扩展名

> ID：13091030
> 
> 赞同：7
> 
> 时间：2012-10-26T16:43:53.387
> 
> 标签：android, image, share

我想共享我自己的应用程序中的图像，我使用以下代码执行此操作：

```
Intent shareIntent =  new Intent(android.content.Intent.ACTION_SEND);
shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://"package"/drawable/" + card_name));
shareIntent.setType("image/jpg");
startActivity(Intent.createChooser(shareIntent, getString(R.string.share_app_via))); 
```

远没有问题，但是如果我将图像发送到电子邮件并下载它，图像没有扩展名.jpg，因此无法打开。

如何将 jpg 扩展名添加到图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:54:09.290

您是否尝试将 .jpg 放在 card_name 的末尾

```
shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://"package"/drawable/" + card_name + ".jpg")); 
```

# android - ADB 接收广播 BOOT_COMPLETE

> ID：13091035
> 
> 赞同：5
> 
> 时间：2012-10-26T16:44:42.403
> 
> 标签：android, adb, boot

我想等到android手机启动并且MediaScanner完成。

之后我想使用 adb 执行一个操作。

adb wait-for-device 将在手机启动序列完成之前完成。

如何通过 ADB 捕获例如 BOOT_COMPLETE 广播？类似于：等待启动完成。我不知道这是否可能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T22:58:20.237

You can keep polling for `sys.boot_completed` or `dev.bootcomplete` system properties.

As for the code, I do not know what environment and/or scripting language you are using. It's pretty straightforward. First you need to find which property is being set to "1" up on boot completion by your phone's software. Let's say it is `dev.bootcomplete`. Then the following command would return control back to your script after the phone is booted up

```
adb wait-for-device shell 'while [[ -z $(getprop dev.bootcomplete) ]] ; do sleep 1; done' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-07T00:54:52.053

对于那些在 Windows 环境中工作的人来说，这个批处理脚本对我有用。

它一直等到 ADB 守护程序运行，然后开始轮询`sys.boot_completed`属性并等待值 1。

它不像单行那么优雅，但我的 PATH 环境变量中列出了脚本，因此可以直接调用它。

```
adb wait-for-device

:CheckAgain
set value=
for /f "delims=" %%a in ('adb shell getprop sys.boot_completed') do @set value=%%a

IF NOT "%value%" == "1" (
    timeout /t 2 /nobreak >NUL
    goto CheckAgain
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T19:01:40.043

如果您的设备没有安装busybox（请参阅[android 中的shell 脚本给出[: not found](https://stackoverflow.com/questions/12056625/shell-script-in-android-gives-not-found)），您可以尝试在您的计算机中进行迭代。像这样的东西会起作用：

```
while [ `adb shell getprop dev.bootcomplete` -nq "1" ] ; do sleep 1; done 
```

如果您的设备安装了busybox，您可以按照Alex P. 的评论继续：

```
adb shell 'while [ ""`getprop dev.bootcomplete` != "1" ] ; do sleep 1; done' 
```

当然，语法取决于您的机器（POSIX 等）。

# node.js - Node.js 堆快照和 Google Chrome 快照查看器

> ID：13091037
> 
> 赞同：5
> 
> 时间：2012-10-26T16:44:42.547
> 
> 标签：node.js, google-chrome, heap-memory, snapshot, profiler

有没有办法从正在运行的 Node.js 进程中获取堆快照，然后将其加载到 Google Chrome 配置文件查看器中？如果能够使用真正有用的 Chrome 配置文件选项卡来查看 Node.js 快照，那将是非常棒的。

如果可以，有人可以提供如何在 Node.js 中生成快照然后将其加载到 Chrome 中的分步说明吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T18:20:49.947

有一个 NPM 模块可以做到这一点。

[https://github.com/bnoordhuis/node-heapdump](https://github.com/bnoordhuis/node-heapdump)

只是`require()`模块，然后您可以将 kill -USR2 发送到节点进程。它创建了一个可以在 Chrome 中查看的 V8 堆转储。

# xml - 如何在指定位置验证 XSD 字符串

> ID：13091042
> 
> 赞同：1
> 
> 时间：2012-10-26T16:44:56.317
> 
> 标签：xml, validation, xsd

我想知道是否可以对字符串的第一个字符执行 XSD 验证？我有一种感觉，我找不到这个问题的任何相关搜索结果。

我有一个网关服务，它接受几个 XML 数据字符串，这些字符串都与我的 XSD 文件匹配。在这种情况下，我有一个特定的数据字符串，其中第一个字符只能包含字符“S”和“N”，其中字符串的其余部分可以是字母数字。

目前我只是将它定义为一个字符串，限制为 46 个字符：

```
<xs:element name="navcode">
    <xs:simpleType>
      <xs:restriction base="xs:string">
        <xs:maxLength value="46"/>
      </xs:restriction>
    </xs:simpleType>
</xs:element> 
```

有谁知道这是否可能？感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:02:34.053

用模式方面替换您的 maxLength 方面：

```
 <xs:pattern value="[NS].{0,45}"/> 
```

它应该满足您的需要。这 。表示除新行之外的任何内容。有关 XSD 规范支持的正则表达式的更多信息，请查看[此处](http://www.w3.org/TR/xmlschema-2/#regexs)。

# javascript - 链接到 Rally 自定义应用程序中的详细信息页面

> ID：13091046
> 
> 赞同：1
> 
> 时间：2012-10-26T16:45:16.180
> 
> 标签：javascript, sdk, rally

我一直在使用以下代码将超链接的 FormattedID 插入到我的网格中。我无法使用标准格式模板，因为我的网格既有用户故事又有功能。当我单击其中一个链接时，它会将我带到一个空白页面（使用 Rally 包装器）。如果我将 URL 复制并粘贴到导航栏中，一切正常，所以我知道链接还不错。页面抛出的错误是“TypeError：mainWindow.Rally.alm 未定义”。

```
var idLink = i.get('FormattedID');
if (idLink.match('US')) idLink = '<a href="https://rally1.rallydev.com/#/detail/userstory/' + i.get('ObjectID') + '" target="_blank">' + idLink + '</a>';
else if (idLink.match('F')) idLink = '<a href ="https://rally1.rallydev.com/#/detail/portfolioitem/feature/' + i.get('ObjectID') + '" target="_blank">' + idLink + '</a>'; 
```

此外，如果我去掉“target='_blank'”选项，详细信息页面加载正常。但我宁愿把它留在里面，因为我的应用程序在 iframe 中运行。在另一个 Rally 页面中加载一个 Rally 页面（包装器和所有）看起来有点傻。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:08:00.633

我们目前知道这是我们公共 API 中的一个很大的漏洞。SDK 未发布的头部版本更好地支持在应用程序中渲染链接 (Rally.util.DetailLink)。

在 SDK 和/或 GA 的下一个预览版中查找它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:56:32.613

不幸的是，这不是一个受支持的用例详细页面，尽管我当然可以看到这将是一个有用的页面呈现选项。

我建议将此作为创意发布在[Rally Ideas](http://ideas.rallydev.com)上，以便其他 Rally 客户可以对其进行投票，并作为产品中的功能请求获得可见性和吸引力。

# apache - 如何让 apache 只在响应中设置 P3P 标头？

> ID：13091047
> 
> 赞同：2
> 
> 时间：2012-10-26T16:45:21.780
> 
> 标签：apache, http-headers, p3p

因此，我们有一个外国网站从我们的国内网站中提取 cookie 和登录小部件。由于国外站点是 .de，而我们的国内站点是 .com，它会将我们的登录小部件请求视为第三方 cookie。为了解决这个问题，我们在 apache 2.2 中使用了 mod_header，它可以工作，但它是在每个请求上设置的。我们希望找到一种仅在设置 cookie 的响应上设置它的方法。以下是我们目前拥有的。有没有办法缩小范围？

```
Header set P3P 'CP="This is not a P3P policy! See our privacy statement here http://www.example.com/example/cms/lang/en/site/products/home/privacy-statement" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T10:39:11.373

我认为您实际上需要在外部 iframe 上的每个资源上设置此标头，请看[这里](https://stackoverflow.com/a/3552272/523899)。这也解决了我在 P3P 上遇到的问题

# python - 无缝动态插件加载

> ID：13091050
> 
> 赞同：1
> 
> 时间：2012-10-26T16:45:27.017
> 
> 标签：python, plugins, dynamic, module, namespaces

我正在为一个框架开发一个可扩展的插件子系统，但我一直坚持如何让系统从插件本身动态和无缝地加载插件。我已经知道如何添加插件（可能会使用入口点）。举个例子：

插件.py

```
from framework.plug_lib import plugin

@plugin
def foo():
    return 2

@plugin
def bar():
    return foo() 
```

插件.py

```
from framework.plug_lib import plugin

@plugin
def foo():
    return 3 
```

framework.plug_lib.py

```
loaded_plugins = {}

class Plugin(object):
    def __init__(self, plug): #note plug could be class, function, method, etc
        self.plug = plug
    def plug_load(self):
        loaded_plugins[self.plug.__name__] = self.plug
    def plug_get_loaded_version(self):
        try:
            return loaded_plugins[self.plug.__name__]
        except KeyError:
            raise RuntimeError('No plugin %s loaded.' % self.plug.__name__)

def plugin(plug):
    return Plugin(plug)

def load(plugin_path):
    # get plugin by searching entry-points, other basic logic
    plugin.plug_load() 
```

使用示例：

```
from framework.plug_lib import load, loaded_plugins

load('pluga.foo')
load('pluga.bar')
loaded_plugins['bar']() # 2 
```

.

```
from framework.plug_lib import load, loaded_plugins

load('plugb.foo')
load('pluga.bar')
loaded_plugins['bar']() # 3 
```

这被简化以试图简明扼要地说明问题。在真实的框架中，有多种不同类型的插件，它们都有不同的`loaded_plugin`类比。如果插件的容器是一个类，我可能会想办法将它硬塞到描述符或其他东西中，但其中的一部分目的是重构一些当前包装插件的样板代码。我可以自定义模块本身检查它自己的命名空间并检索它的成员的方式，插件模块本身没有或最多只有一个简单的行吗？我基本上需要`__getattribute__`与模块本身等效的东西，这样我就可以`Plugins`表现得像穷人的描述符，并`self.plug_get_loaded_version()`在尝试访问它们以外的任何东西时返回`plug_load()`方法，我想，但我不知道该怎么做。也许是包时代码（setup.py 中的东西），但我认为如果不每次都重新构建，您将无法在开发模式下处理已安装的包。有什么想法吗？

# php - 下拉菜单和数据库

> ID：13091056
> 
> 赞同：0
> 
> 时间：2012-10-26T16:45:56.333
> 
> 标签：php, mysql, database

我正在努力寻找实现这一目标的最佳策略，因此，如果有人有首选方法，如果您能解释它的工作原理并将其作为最佳选择卖给我，我将不胜感激。基本上我想要实现的是一个下拉选项，用于在线提取报告。它们可以在下拉列表中购买，例如 1 份报告为 $x，10 份报告为 $x 等……但是当他们拉报告时，这个数字需要下降。为了澄清客户 A 是否注册了 10 个报告，那么他的帐户将在数据库中显示他注册了 10 个报告，然后当他拉出一份报告时，数据库中的数字会减少 1。你们（和女孩）会怎么做呢？

除此之外，下拉列表是静态的，每个帐户剩余的报告数量本质上会更加动态，但报告的起始数量会根据他们注册的批量包而改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:08:22.267

建立一些类似的表：

```
customer
--------
customer_id
name
other_stuff

report
----------
report_id
url_to_report_on_disk
other_stuff

customer_report
---------------
customer_id
report_id

customer_options
----------------
customer_id
number_reports_purchased
purchase_date 
```

然后您可以根据 customer_report 表中的条目计算已交付的报告数量

# javascript - 在 Javascript 中进行严格（非类型转换）<、>、<=、>= 比较的最佳和/或最短方法

> ID：13091058
> 
> 赞同：27
> 
> 时间：2012-10-26T16:46:03.687
> 
> 标签：javascript

在 Javascript 中，`==`比较有一个严格的（非类型转换）版本：`===`. 同样，`!=`有严格的形式`!==`。这些可以保护您免受以下疯狂行为的侵害：

```
var s1 = "1",
    i1 = 1,
    i2 = 2;

(s1 == i1)   // true, type conversion
(s1 != i1)   // false, type conversion

(s1 === i1)  // false, no type conversion
(s1 !== i1)  // true, no type conversion 
```

但是，其他比较运算符没有等效的严格模式：

```
(s1 < i2)   // true, type conversion
(s1 <= i2)  // true, type conversion
([] < i2)   // true, wait ... wat!? 
```

显而易见的解决方案似乎非常冗长：

```
((typeof s1 === typeof i2) && (s1 < i2))  // false 
```

在 Javascript 中是否有更惯用（或不那么冗长）的方式来做到这一点？

参考：MDN[比较运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T17:00:42.977

没有您想要的内置运算符，但您始终可以创建自己的函数。例如，对于`<`：

```
function lt(o1, o2) {
    return ((typeof o1 === typeof o2) && (o1 < o2));
}
lt("10", 11); // false 
```

如果您只处理字符串和数字，另一种选择是扩展`String.prototype`and `Number.prototype`：

```
function lt(o) {
    return ((typeof this.valueOf() === typeof o) && (this < o));
}
String.prototype.lt = lt;
Number.prototype.lt = lt;
"10".lt(11);   // false
(11).lt("12"); // false 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-26T17:03:27.263

如何创建一个对象并使用它

```
var strictComparison = {
    "<" : function(a,b) { return ((typeof a === typeof b) && (a < b)) },
    "<=" : function(a,b) { return ((typeof a === typeof b) && (a <= b)) },
    ">" : function(a,b) { return ((typeof a === typeof b) && (a > b)) },
    ">=" : function(a,b) { return ((typeof a === typeof b) && (a >= b)) }
};

console.log(strictComparison["<"](5,"6")) ;  
console.log(strictComparison[">"](5,6)) ; 
```

# php - 获取实例属性的实例和父级之间的差异

> ID：13091059
> 
> 赞同：1
> 
> 时间：2012-10-26T16:46:11.763
> 
> 标签：php, reflection

```
abstract class foo
{
    public $blah;
}

class bar extends foo
{
    public $baz;
} 
```

鉴于我有一个`foo`从抽象类继承的类，我将如何获得仅存在于但不存在于（即在级别上定义的属性）`bar`的实例变量数组？在上面的示例中，我想要但不是.`bar``foo``bar``baz``blah`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T16:55:05.523

正如 hakre 所说，使用[`Reflection`](http://php.net/reflectionclass). 获取该类的父类，并对属性进行比较，如下所示：

```
function get_parent_properties_diff( $obj) {
    $ref = new ReflectionClass( $obj);
    $parent = $ref->getParentClass();
    return array_diff( $ref->getProperties(), $parent->getProperties());
} 
```

你会这样称呼它：

```
$diff = get_parent_properties_diff( new bar());
foreach( $diff as $d) {
    echo $d->{'name'} . ' is in class ' . $d->{'class'} . ' and not the parent class.' . "\n";
} 
```

[在这个演示](http://viper-7.com/b7N8Sh)中看到它的工作，它输出：

```
baz is in class bar and not the parent class. 
```

# regex - 希望正则表达式可以做到这一点。修复损坏的 XML

> ID：13091060
> 
> 赞同：2
> 
> 时间：2012-10-26T16:46:19.147
> 
> 标签：regex, notepad++

我现在要解析一个大型 XML 文件。XML 从根本上被破坏了，并且有超过 2000 行，我试图避免手动修复；）

我可以在 Notepad++ 中使用正则表达式替换来做到这一点吗？

```
<Sensor ID="21.1.1_L"/> 
```

至

```
<Sensor ID="21.1.1_L"> 
```

丢失所有“传感器”标签中的标签斜线（请记住，我不能简单地将 /> 替换为 > 并且 ID 是可变的，包括它的长度，可能有也可能没有尾随下划线和 alpha）。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:48:42.893

这应该有效：搜索

```
(<Sensor [^<>]*)/> 
```

并将所有替换为

```
\1> 
```

`[^<>]*`将匹配除尖括号外的任意数量的字符（这是为了确保我们永远无法匹配标签的边界）。然后，`/>`仅当当前标签以斜杠结尾时才匹配。

当然，您需要在 Notepad++ 中打开正则表达式匹配。

# html - 在 CSS 水平下拉菜单中悬停时将border-bottom: 1px solid #FF 添加到子菜单

> ID：13091063
> 
> 赞同：0
> 
> 时间：2012-10-26T16:46:21.293
> 
> 标签：html, css

我似乎不知道如何在悬停时向所有子菜单项添加边框底部：1px 实心#FFF？

```
#menu{
   padding:0;
   margin:0;
   position: fixed;
   top: 30px;
   left: 0px;
   font-size: 8pt;
}
#menu ul{
   padding:0;
   margin:0;
}
#menu li{
   position: relative;
   float: left;
   list-style: none;
   margin: 0;
   padding:0;
} 

#menu li a{
   width:120px;
   height: 20px;
   display: block;
   text-decoration:none;
   line-height: 20px;
   background-color: #A9BBD3;
   color: #FFF;
} 

#menu li a:hover{
   background-color: #446087;
} 

#menu ul ul{
   position: absolute;
   top: 20px;
   visibility: hidden;
}
#menu ul ul li a {
    width: 115px;
    padding-left: 5px;
}
#menu ul li:hover ul{
   visibility:visible;
}
#menu > ul > li > a{
    text-align:center;
}

<div id="menu">
   <ul>
      <li><a href="#nogo">File</a>
        <ul>
          <li><a href="#nogo">Save</a></li>
          <li><a href="#nogo">Link 1-2</a></li>
          <li><a href="#nogo">Link 1-3</a></li>
        </ul>
      </li>
      <li><a href="#nogo">Edit</a>
        <ul>
      <li><a href="#nogo">Add</a></li>
          <li><a href="#nogo">Delete</a></li>
        </ul>
      </li>
      <li><a href="#nogo">Reports</a>
        <ul>
          <li><a href="#nogo">Link 3-1</a></li>
          <li><a href="#nogo">Link 3-2</a></li>
          <li><a href="#nogo">Link 3-3</a></li>
       </ul>
      </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:51:44.210

将此添加到您的 CSS 中，看看是否有帮助：

​ #menu ul li > ul a:hover {border-bottom:1px solid #fff; } ​</p>

# sql - SQL：clob 是否包含数字

> ID：13091064
> 
> 赞同：1
> 
> 时间：2012-10-26T16:46:21.843
> 
> 标签：sql, oracle, clob

在 Oracle 数据库中，在表 A 中，有一个名为“ID_CLOB”的 clob 字段，存储了另一个表 B 中的一些 id。

例子：

```
|              ID_CLOB               |
,15,16,17,18,19,21,23,24,25,30,32,33, 
```

这是我的问题，我如何从 SQL 语句中知道某个数字（例如 15）是否在“ID_CLOB”字段中？

提前感谢。

### 情况：

我实际上正在开发带有此数据库模式的第三方应用程序。想象一下场景：在表 B 中，每行都有人员信息，而表 A，假设它是一个部门表，每一行是一个部门，并且 clob 字段用于存储该部门的人员信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:42:08.110

如果保证该字段中的数据格式在每个值之前和之后都有逗号分隔符且没有空格，则[`POSITION`](http://docs.oracle.com/html/A95915_01/sqfunc.htm#i1006520)标量会找到它：

```
SELECT * FROM A
      WHERE POSITION( ',15,', in id_clob ) > 0; 
```

但是，这不是很有效，而且很脆弱。如果值和逗号之间有空格，或者第一个值前面没有逗号，或者最后一个值后面没有逗号，它将失败。

正如其他人所指出的，最好（如果可以的话）更改数据库设计。然而，在现实世界中，这并不总是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:00:14.310

我会建议建立一个新表 -

```
person_department
-----------------
person_id
department_id 
```

并努力一次性解析格式错误的数据并将其放入此结构中。

然后您可以轻松查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:48:19.267

与其考虑对您的问题进行查询，不如重新设计您的数据库。您的结构违反了数据库设计的[第一种规范化形式](http://en.wikipedia.org/wiki/Database_normalization#Normal_forms)。

# sql - 如何在 SQL 中找到计算百分比列的总和

> ID：13091072
> 
> 赞同：0
> 
> 时间：2012-10-26T16:46:42.200
> 
> 标签：sql, sql-server, sql-server-2008

我有一个计算百分比的列，像这样

```
Convert(decimal(5,2),(PatCount*100)/@PatientCount) as Per 
```

现在我想要上述计算百分比的总和。所以我试着这样做，

```
,SUM(Convert(decimal(5,2),(PatCount*100)/@PatientCount)) as pa 
```

但我没有得到期望的结果。例如

```
Per %    Total %
6.00     6.00
7.00     7.00
85.00    85.00 
```

我希望总 Col 打印为 98%。请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:08:43.490

尝试这个

[**SQL FIDDLE 示例**](http://sqlfiddle.com/#!3/ad966/6)

```
select
    cast(PatCount * 100 / @PatientCount as decimal(5,2)) as Per,
    sum(cast(PatCount * 100 / @PatientCount as decimal(5,2))) over() as Total
from Patients as P 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:55:22.577

要使总和起作用，您将需要一个 GROUPBY，然后总和超过该组。

最简单的是在单独的查询中执行此操作。可能有一种方法可以通过子查询来执行此操作，或者您可以查看累积和：[在 MySQL 中创建累积和列](https://stackoverflow.com/questions/2563918/create-a-cumulative-sum-column-in-mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:09:03.387

您有一些选择，但使用 a`CROSS APPLY`应该具有非常好的性能特征。

```
;WITH q AS (
  SELECT SUM(CONVERT(decimal(5,2),(PatCount*100)/@PatientCount)) as Per
  FROM   YourTable
)
SELECT CONVERT(decimal(5,2),(PatCount*100)/@PatientCount) as Per
       , q.Per
FROM   YourTable
       CROSS APPLY q 
```

或者甚至更好（阅读）

```
;WITH q AS (
  SELECT CONVERT(decimal(5,2),(PatCount*100)/@PatientCount) as Per
  FROM   YourTable
)
SELECT q.Per, qtot.PerTot
FROM   q CROSS APPLY (SELECT SUM(Per) as PerTot FROM q) qtot 
```

# asp.net - 需要一个 Web 表单的示例，它可以编辑带有子对象的父实体对象

> ID：13091075
> 
> 赞同：5
> 
> 时间：2012-10-26T16:46:58.290
> 
> 标签：asp.net, entity-framework, webforms, poco

我正在为一个对象创建一个“编辑”页面。在这个页面上，我想要一个像 DetailsView 这样的东西，它允许编辑对象的属性以及一个带有子项的 GridView 并允许简单地添加/编辑/删除子项。在单击“保存”按钮之前，不应将对父对象或子对象的更新保存到数据库中。我是 asp.net 网络表单和实体框架

举个简单的例子，想象一个带有资源集合的 Project 对象。我正在构建一个页面，该页面允许用户更改项目属性，例如 DetailsView 中的 ProjectName 以及在下面的 Gridview 中添加/编辑/删除资源。底部的一个保存按钮可以保存所有内容。

我在 MVC 中找到了这样的示例，但是在查找 Web 表单示例时遇到了麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T18:44:59.677

我无法为您编写应用程序，但我已经使用相同模式的两种变体之一完成了这项工作。

为您的孩子创建一个可序列化的记录对象，并将其保存在基于 ViewState 的列表中。如果数据非常大，请考虑在 Session 中维护它，并为您的 Session 对象使用唯一键（例如在 Page_Load 分配的 GUID）并将该键存储在 ViewState 中。

当您使用完成编辑父/子时，您必须将更改为基于 ViewState / Session 的对象解析为存储在磁盘上的对象。

# sharepoint - 来自查找的 SharePoint 唯一值

> ID：13091076
> 
> 赞同：2
> 
> 时间：2012-10-26T16:46:59.797
> 
> 标签：sharepoint, sharepoint-2010

我有一个带有查找列的列表，该列从另一个列表中获取“创建”日期，但我只想要唯一的日期值。有没有办法获取这些数据或创建具有唯一值的计算列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T00:51:56.883

查找字段实际上链接到单个项目，显示值更多的是链接到项目 ID 值的“人类可读”值。

您还可以从普通文本甚至日期字段中获取一些信息，并在编辑和新表单上使用 jQuery 和[SPServices](http://spservices.codeplex.com/)，以便为用户提供对表单的更改。这避免了对[自定义字段](http://msdn.microsoft.com/en-us/library/gg132914.aspx)需要的站点进行代码级自定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T14:42:15.037

不是开箱即用，我不认为。我最好的选择是创建一个自定义字段类型，使用您所追求的功能扩展查找。

# algorithm - 以最低成本对排列进行排序

> ID：13091077
> 
> 赞同：11
> 
> 时间：2012-10-26T16:47:01.543
> 
> 标签：algorithm

我得到了元素的排列，`{1, 2, 3, ..., N}`我必须使用交换操作对其进行排序。交换元素 x, y 的操作的成本为 min(x,y)。

我需要找出排序排列的最低成本。我坚持使用交换操作`N`将`1`每个元素放在它的位置上，但这不是一个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:30:56.293

这将是最佳的：

```
Find element 2
If it is not at correct place already

    Find element at position 2
    If swapping that with 2 puts both to right place

        Swap them
        Cost = Cost + min(2, other swapped element)

repeat

   Find element 1
   If element 1 is at position 1

      Find first element that is in wrong place
      If no element found

          set sorted true

      else

         Swap found element with element 1
         Cost = Cost + 1

   else

      Find element that should go to the position where 1 is
      Swap found element with element 1
      Cost = Cost + 1

until sorted is true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:52:58.997

如果查找是微不足道的，那么最小交换次数将由周期数决定。它将遵循类似于[Cuckoo Hashing](http://en.wikipedia.org/wiki/Cuckoo_hashing)的原则。您取排列中的第一个值，然后查看原始索引处的值的索引处的值。如果这些匹配，则交换单个操作。

[ **3** 2 1] ：值 3 在索引 1 处，因此查看索引 3 处的值。
[3 2 **1** ] ：值 1 在索引 3 处，因此存在两个索引循环。交换这些值。

如果不是，则将第一个索引压入堆栈并在该索引中查找第二个索引的值。最终会有一个循环。此时，通过从堆栈中弹出值开始交换。这将采用等于 n-1 的交换次数，其中 n 是循环的长度。

[ **3** 1 2] ：值 3 在索引 1 处，因此查看索引 3 处的值。
[3 1 **2** ] ：值 2 在索引 3 处，因此将 3 添加到堆栈并查找索引 2。同时存储 3作为循环的起始值。
[3 **1** 2] ：值 1 在索引 2 处，因此将 2 添加到堆栈并查找索引 1。
[ **3** 1 2] ：值 3 是循环的开始，因此将弹出 2 交换出堆栈并交换值1 和 2。
[1 3 2] ：将 3 从堆栈中弹出并交换 2 和 3，从而得到一个包含 2 个交换的排序列表。
[1 2 3]

使用此算法，交换的最大数量将为 N-1，其中 N 是值的总数。当存在 N 个长度的循环时会发生这种情况。

**编辑：**这个算法给出了最小的交换次数，但不一定是使用 min(x, y) 函数的最小值。我没有计算过，但我相信只有一次不应该使用 swap(x, y) = {swap(1, x), swap(1, y), swap(1, x)}是当 x 在 {2,3} 和 n < 2 时；应该很容易把它写成一个特例。可能最好明确检查并放置 2 和 3，然后按照评论中提到的算法在两个操作中实现排序。

**编辑2：**很确定这将涵盖所有情况。

```
while ( unsorted ) {
    while ( 1 != index(1) )
        swap (1 , index (1) )

    if (index(2) == value@(2))
        swap (2, value@(2) )

    else
        swap (1 , highest value out of place)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T16:50:26.983

如果您有数字 1, 2, ..., *N的***排列**，那么*排序*后的集合将恰好是 1, 2, ..., *N*。所以你知道复杂度为 O(0) 的答案（即你根本不需要算法）。

 **** * *

如果你真的想通过重复交换对范围进行排序，你可以重复“前进和循环”：在已经排序的范围（where ）上前进`a[i] == i`，然后交换直到完成循环。重复直到你到达终点。这最多需要*N*  - 1 次交换，并且它基本上执行置换的循环分解。`a[i]``a[a[i]]`

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T16:55:36.290

唔。一个有趣的问题。我想到的一个快速算法是使用元素作为索引。我们首先找到一个值为 1 的元素的索引，并将其与该数字的元素交换。最终这将导致 1 出现在第一个位置，这意味着您必须将 1 与一些尚未在该位置的元素交换，然后继续。最高为 2*N-2，下限为 N-1，用于排列 (2,3,...,N,1)，但具体成本会有所不同。

好的，鉴于上面的算法和示例，我认为最好的方法是用任何东西交换 1 直到它首先达到第一名，然后如果它还没有到位，则用第二名交换 2，然后继续用任何东西交换 1 还没有到位，直到排序。

```
set sorted=false
while (!sorted) {
    if (element 1 is in place) {
        if (element 2 is in place) {
            find any element NOT in place
            if (no element found) sorted=true 
            else {
                swap 1 with element found
                cost++
            }
        } else {
            swap 2 with element at second place
            cost+=2
        }
    } else {
        find element with number equals to position of element 1
        swap 1 with element found
        cost++
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-26T16:57:33.590

使用桶大小为 1
的桶排序。成本为零，因为没有交换发生。现在通过存储桶数组，并将每个值交换回原始数组中的相应位置。
那是N次交换。
N 的总和为 N(N+1)/2，为您提供准确的固定成本。

一种不同的解释是，您只需从存储桶数组中存储，回到原始数组中。那是没有掉期，因此成本为零，这是一个合理的最小值。****

# extjs - IE7 中的 ExtJS 工具栏高度不正确

> ID：13091090
> 
> 赞同：2
> 
> 时间：2012-10-26T16:48:30.080
> 
> 标签：extjs

我正在创建一个工具栏，然后将其添加到 ExtJS 中的面板中。它看起来很棒，除了在 IE7 中它的高度比其他浏览器大得多。ExtJS 以内联 CSS 样式对高度进行硬编码。一些菜单是在工具栏之前创建的...

```
var menu = Ext.create('Ext.menu.Menu', {
     id: 'mainMenu',
     style: {
        overflow: 'visible'
},
items: [
    {
        text: 'choice1'
   },{
        text: 'choice2'
   },{
        text: 'choice3'
}]
});
var tb = Ext.create('Ext.toolbar.Toolbar');
tb.suspendLayouts();
tb.add({
    text:'Choice 1',
    iconCls: 'bmenu',  
    menu: menu  
},{
    xtype: 'tbfill'
},{
    xtype: 'tbtext',
    text: 'Last name'
});
menu.add(' ');
tb.add('-', {
iconCls: 'icon-help',
clickEvent: 'mousedown'
});
tb.resumeLayouts(true);
    var viewport = new Ext.Viewport({
    layout: 'border', 
    renderTo: Ext.getBody(),
    items: [{
        region: 'north',
        id: 'North', 
        items: [{
            region: 'center',
            style: {
                overflow: 'visible'   
            },
        }, tb]
    },{
        region: 'west',
        id: 'West', 
        xtype: 'panel',
        layout: 'vbox', 
        collapsible: true,
        split: true,
        width: 200,
        items: [{
            xtype: 'panel',
            id: 'upperWest',
            width: 200, 
            flex: 1,
            html: myAlerts
        },{
            xtype: 'panel',
            id: 'lowerWest',
            width: 200,
            flex: 3, 
            html: quickView        
        }
      ]
]
    },{
        region: 'center',
        id: 'center',
        height: '100%', 
        minheight: 200,
        minwidth: 200, 
        layout: 'border',
        border: false, 
        autoScroll:true, 
        tbar: [
            {xtype: 'tbfill'},
               {
                xtype: 'combo',
                height: 20,
                editable: false,
                store: [
                    'choice1',
                    'choice2',
                    'choice3',
                ],
                value: 'choice1'
            },
            {xtype: 'tbfill'}
        ],
        items: [{
            region: 'east',
            id: 'center-east', 
            height: '100%',
            minheight: 200,
            width: 200, 
            items: barChartPanel
        },{
            region: 'center',
            id: 'center-center',
            layout: 'fit', 
            baseCls:'x-plain',
            items: columnChartPanel
        }]
    },{
        region: 'east',
        id: 'moreOptions',
        xtype: 'panel',
        title: 'More Options',
        collapsible: true,
        split: true,
        width: 200,
        items: [
            {xtype: 'panel',
            id: 'rightPanel1',
            collapsible: true,
            collapsed: true, 
            }
        ]
    },{
        region: 'south',
        xtype: 'container',
    }]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:57:19.590

找到了解决方案。HTML 5 Boilerplate 包含一个 CSS 属性，它为某些元素添加底部填充。这导致 ExtJS 也将顶部填充添加到工具栏。我删除了 CSS 元素，问题就消失了

# android - android中的延迟加载仅适用于模拟器？

> ID：13091093
> 
> 赞同：0
> 
> 时间：2012-10-26T16:48:32.953
> 
> 标签：android, listview, lazy-loading

我一直在尝试在 Android 中实现图像的延迟加载。我在这里遵循了这个优秀的教程： [http ://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

问题是它在模拟器中运行良好。在模拟器中，图像会加载，但在真实设备上，它们只显示默认图像。

我已经在 6 台 android 设备上测试了它，但没有成功，但它们在 Emulator 上完美加载。

关于我哪里出错的任何想法？

提前谢谢各位！

编辑：我已经修改了代码以使用 JSON Parsing 而不是 XML Parsing，如果这很重要的话。

我的懒惰适配器类：

```
public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
   // Toast.makeText(a, "here too", 500).show();
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.list_row, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    // Setting all values in listview
    title.setText(song.get("msg"));

    imageLoader.DisplayImage(song.get("thumb"), thumb_image);
    return vi;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:13:39.487

将此行放入您的代码中并尝试...

```
thumb_image.setTag(song.get("thumb"));
imageLoader.DisplayImage(song.get("thumb"), thumb_image); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T07:57:57.610

如果您使用此解决方案

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

你需要添加

android.permission.WRITE_EXTERNAL_STORAGE

在android清单中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T09:19:04.243

我能给你的最好答案是：“使用其他更好的延迟加载实现”，例如[fedorvlasov 的延迟列表适配器](https://github.com/thest1/LazyList)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T18:39:41.763

这将是一个迟到的答案，但有些人可以受益。您引用的教程在模拟器和手机上运行良好。

我认为这里的问题是权限问题。

如果您不将以下行添加到清单文件中，则它适用于模拟器，但不适用于手机。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# file - 如何根据另一个文件的内容对一个文件的内容进行排序

> ID：13091094
> 
> 赞同：0
> 
> 时间：2012-10-26T16:48:33.343
> 
> 标签：file, bash, sorting, debian

我有两个文件，一个内容类似于以下内容：

```
1.something344343
2.something2dsdsf
4.somethingdsddfsd
5.something920j329 
```

第二个文件将是：

```
1.somethingwoimewoiew
3.something9jwe90jew
7.something90kjwe90ewk 
```

本质上，第一个文件比第二个文件有更多编号的行，第一个文件最多达到 39,000 行，而第二个文件最多只有 23,000 行。话虽如此，有人知道我如何将第一个文件分成文件 2 中包含的行号（冒号前面的数字）和文件 2 中未包含的行（这将在 bash 环境中）。最终结果将是这样的：

```
lines included in second file:
1.something344343

lines not included in second file:
2.something2dsdsf
4.somethingdsddfsd
5.something920j329 
```

我已经考虑过可以用来执行此操作的不同方法，但不幸的是还没有提出任何有效的解决方案，如果有人可以帮助解决这个问题，我将非常感激，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T17:00:00.243

第二个文件中包含的行：

```
$ join -t"." -o 0,1.2 f1 f2
1.something344343 
```

第二个文件中不包含的行：

```
$ join -t"." -v1 f1 f2
2.something2dsdsf
4.somethingdsddfsd
5.something920j329 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:02:03.317

只显示行号，不显示行内容：

```
$ diff --unchanged-group-format=$'Lines included in second file:\n%=' \
       --old-group-format=$'Lines not included in second file:\n%<' \
       --new-group-format='' \
       <(awk -F. '{print $1}' file1) <(awk -F. '{print $1}' file2)
Lines included in second file:
1
Lines not included in second file:
2
4
5 
```

# crystal-reports - 水晶报表 - 链接子报表参数

> ID：13091100
> 
> 赞同：4
> 
> 时间：2012-10-26T16:48:55.317
> 
> 标签：crystal-reports

我正在尝试添加一个子报表并将参数从我的主报表传递到子报表。当我将所有内容链接起来时，子报告会遍历数千条记录，以查找有关我的测试对象的保险信息，但没有记录。

如果我使用查询工具并使用我希望在 Crystal 报表查询中添加的 WHERE 子句运行查询，则需要几毫秒才能返回任何行。

当我在 Crystal 报表中运行预览时，需要几分钟才能浏览所有记录。为什么查询不返回应有的记录？或者只是我正在寻找的一个特定的，如果有记录的话？我不希望所有 10,000 多条记录都返回给水晶，只是我应该根据我从主报告传递的参数得到的一个或零！

感谢您的指导，莱斯利

编辑：我对需要 PatID 和 Episode_Number 的主报告进行了查询。我对我的子报告有一个查询，我想根据 SAME PatID 和 Episode_Number 进行过滤。子报表查询为：

`select b.patid, b.episode_number, b.guarantor_name, Trim(b.guar_address_line1|| ' ' || ifNull(b.guar_address_line2, '')) address, b.guar_address_city || ', ' || b.guar_address_state || ' ' || b.guar_address_zip location, b.guar_phone_number from billing_guar_data b`

我没有在这个命令中添加任何“额外”参数。我有通过此链接添加的这些参数： `Pm-Command.PATID and Pm-Command.Episode_Number`

我在创建子报告时从链接页面中选择的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T08:46:51.317

我以前做过。我花了一段时间才弄清楚如何将参数输入到子报表中的 SQL 命令中。确实，您拥有的 SQL 将获取所有记录，因为没有**where**子句。如果您传递参数以在**Select Expert**中获取它，则您在检索 10,000 多条记录后进行过滤。从主报表中，参数必须进入子报表的 SQL 命令才能检索特定记录。这是如何做到的。

您可以从主报告传递原始参数或字段（如果可用）。由于您编写了“Pm-Command.PATID 和 Pm-Command.Episode_Number”，因此您正在传递该字段。首先，在 SQL 命令中添加**where子句**

```
select 
   b.patid, b.episode_number, b.guarantor_name, Trim(b.guar_address_line1|| ' ' || ifNull(b.guar_address_line2, '')) address, b.guar_address_city || ', ' || b.guar_address_state || ' ' || b.guar_address_zip location, b.guar_phone_number 
from
   billing_guar_data b
where
   b.patid = {?Pm-Command.PATID}
   and b.episode_number = {?Pm-Command.Episode_Number} 
```

接下来，在侧面参数列表的同一窗口中，创建 2 个参数

*   Pm-Command.PATID
*   Pm-Command.Episode_Number

然后在主报告中显示更改子报告链接...您发送的 2 个参数应该仍然存在。确保在两个参数上都未选中“根据字段选择子报表中的数据”。如果选中此项，它会将参数发送到**Select Expert**。因为它将在 SQL 命令中，所以应该取消选中它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:00:07.583

Crystal 可能没有对您认为的子报表使用 WHERE 子句。这可能是因为您在子报表的记录选择公式中使用了 Crystal 语法或 Crystal 函数，它无法转换为 SQL。发生这种情况时，它将从数据库中获取所有记录并在本地执行记录选择，这听起来就像您的情况一样。

要检查子报表的查询，首先预览整个报表，然后在 Crystal 中自己的选项卡中打开子报表（这将像在 Crystal 中自己的报表一样打开它），然后转到“数据库”->“显示 SQL 查询”。

如果您发布选择标准，那也会有所帮助。

# java - 如何设置 OSGi 和非 OSGi WAR 以使用外部属性文件

> ID：13091103
> 
> 赞同：1
> 
> 时间：2012-10-26T16:48:58.867
> 
> 标签：java, spring, configuration, osgi, war

我有一个使用 Spring 的项目，它可以在 OSGi 容器（即 Karaf）中作为 .war 运行，或者在非 OSGi 容器（如 Jetty）中作为 .war 运行。.wars 由单独的 Maven 项目创建。

`PropertyPlaceholderConfigurer`目前，我的项目有一个位于 .war 内的属性文件，并使用Spring 中的 bean从 .war 的类路径中获取。我们想将该属性文件外部化。为两个 .wars 设置外部属性文件的最佳/最简单方法是什么？

我知道 OSGi .war 可以设置我们的`PropertyPlaceholderConfigurer`bean 以使用 .war 引用属性文件`osgix:cm-properties`，但我不相信这也适用于非 OSGi .war。（或者会吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:39:43.937

我想说您只需要确保每种组合都有不同的 spring xml 文件。例如，您将 spring-app.xml 文件作为中央弹簧配置文件。现在通过 spring manifest 条目使用 spring 扩展器时将它与 spring-osgi-properties.xml 结合起来，当在 std 中使用时将它与 spring-std-properties.xml 结合起来。码头集装箱。

# tridion - SDL Tridion UI 2012 引发错误“GetSiteEditItemConfiguration”无法激活

> ID：13091109
> 
> 赞同：3
> 
> 时间：2012-10-26T16:49:18.553
> 
> 标签：tridion, tridion-2011

我们已经安装了 SDL Tridion UI 2012 并在左上方获得了 SDL Tridion 按钮。单击按钮时，SiteEdit UI 界面将正确使用禁用选项，并且在消息中心抛出以下错误 -

> 无法激活请求的服务“http://localhost/WebUI/Models/SiteEdit/Services/Services.svc/GetSiteEditItemConfiguration”。有关详细信息，请参阅服务器的诊断跟踪日志。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-29T07:00:51.833

通过卸载并再次安装设置可以解决问题。问题可能是由于在设置会话预览 Content Delivery Web 服务之前安装了设置。感谢所有帮助我的人，即使在周末也能帮助我。

# r-markdown - 在 Rmarkdown/knit 中隐藏 R 代码并仅显示结果

> ID：13091112
> 
> 赞同：85
> 
> 时间：2012-10-26T16:49:35.280
> 
> 标签：r-markdown, knitr

在我的 R Markdown 文档中，有时我只想生成一个报告而不显示实际代码（特别是当我将它发送给我的老板时）。如何隐藏 R 代码并仅显示图形和结果？

例如：

```
---
output: html_document
---

```{r fig.width=16, fig.height=6}
plot(cars)
``` 
```

这显示了命令和情节。如何从我的 HTML 报告中删除命令？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-10-26T16:54:05.077

当然，只要做

```
```{r someVar, echo=FALSE}
someVariable
``` 
```

显示一些（先前计算的）变量`someVariable`。或运行打印等 pp 的代码。

所以对于绘图，我有例如

```
### Impact of choice of ....
```{r somePlot, echo=FALSE}
plotResults(Res, Grid, "some text", "some more text")
``` 
```

其中绘图功能`plotResults`来自本地包。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-12-14T23:27:45.530

知道您可以使用以下内容可能也很有趣：

```
{r echo=FALSE, results='hide',message=FALSE}
a<-as.numeric(rnorm(100))
hist(a, breaks=24) 
```

排除您给出的所有命令、它吐出的所有结果以及 R 吐出的所有消息信息（例如，在 library(ggplot) 或其他东西之后）

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2018-10-01T10:25:43.837

只是汇总答案并扩展基础知识。这里有三个选项：

## 1）隐藏代码（单个块）

我们可以`echo=FALSE`在块头中包含：

```
```{r echo=FALSE}
plot(cars)
``` 
```

## 2）隐藏块（全局）。

我们可以使用该函数更改**knitr**的默认行为。`knitr::opts_chunk$set`我们在文档的开头调用它并包含`include=FALSE`在块头中以抑制任何输出：

```
---
output: html_document
---

```{r include = FALSE}
knitr::opts_chunk$set(echo=FALSE)
```

```{r}
plot(cars)
``` 
```

## 3) 折叠的代码块

对于 HTML 输出，我们可以使用代码折叠来隐藏输出文件中的代码。它仍将包含代码，但只有在用户单击此代码后才能看到。[您可以在此处](https://bookdown.org/yihui/rmarkdown/html-document.html#code-folding)进一步了解这一点。

```
---
output:
  html_document:
    code_folding: "hide"
---

```{r}
plot(cars)
``` 
```

[![在此处输入图像描述](../Images/d989de86a6517d5f08234677d1b1d00b.png)](https://i.stack.imgur.com/seau5.gif)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-14T12:42:32.440

或者，您还可以通过[**markdownreports 包**](https://markdownreports.github.io/)**动态解析标准的降价文档（***本身*没有代码块） 。[](https://markdownreports.github.io/)

# ruby - 查找二叉树的最深节点

> ID：13091114
> 
> 赞同：3
> 
> 时间：2012-10-26T16:49:42.337
> 
> 标签：ruby

我有一个高度方法，能够找到二叉树的高度，但不确定如何返回二叉树的最深节点（如果深度相同，则为多个节点）。

```
BinaryNode.new(1,BinaryNode.new(2,leaf,leaf),BinaryNode.new(3,leaf,leaf)) 
```

其中叶子代表空

这棵树的高度是 2，最深的节点是 2,3（相同的深度）

```
class BinaryNode 
  include Enumerable
  def initialize(element,lchild,rchild)
    @element, @lchild, @rchild = element, lchild, rchild
  end
  def deepestNode
    if self.nil?
      0
    else
      height1=@lchild.height+1
      height2=@lchild.height+1
    end
      height=[height1,height2].max
      height
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:51:14.883

假设：

*   二叉树实际上是根节点
*   child_nodes 以数组形式返回子节点的集合

* * *

```
class BinaryNode
  attr_reader :element

  def initialize(element,lchild,rchild)
    @element, @lchild, @rchild = element, lchild, rchild
  end

  def height
    if @lchild.nil? && @rchild.nil?
      return 0
    else
     [@lchild, @rchild].collect {|n| n.nil ? 0 : n.height + 1 }.max      
    end
  end

  def deepest_nodes
    return [self] if self.height == 1

    [@lchild, @rchild].select {|n| !n.nil? && (n.height == self.height - 1)}.collect {|n| n.deepest_nodes}.flatten
  end
end 
```

* * *

重构：

```
class BinaryNode
  attr_reader :element

  def initialize(element,lchild,rchild)
    @element, @lchild, @rchild = element, lchild, rchild
  end

  def child_nodes
    [@lchild, @rchild].compact
  end

  def height
    if self.child_nodes.empty?
      return 0
    else
      self.child_nodes.collect {|n| n.height + 1 }.max      
    end
  end

  def deepest_nodes
    return [self] if self.depth == 1

    self.child_nodes.select {|n| n.height == self.height - 1}.collect {|n| n.deepest_nodes}.flatten
  end
end 
```

* * *

获取元素：

```
BinaryNode.new(1,BinaryNode.new(2,leaf,leaf),BinaryNode.new(3,leaf,leaf)).deepest_nodes.collect {|n| n.element } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T14:22:12.730

```
struct node //structure type
{
    int data;
    struct node *left,*right;
};

from main()
{
    Deepestnode= MaxDepth(root);
}

//return type// function name//
struct node*    MaxDepth (struct node* temp, int depth)
{  
    if(temp->next!=NULL && temp->right!=NULL)
    {
        MaxDepth(temp->left ,depth+1);
        MaxDepth(temp->right,depth+1);
    }
    else if(temp->left==NULL && temp->right!=NULL)
        MaxDepth(temp->right,depth+1);
    else if(temp->left!=NULL && temp->right==NULL)
        MaxDepth(temp->left,depth+1);

    else // temp->left==NULL &&temp->right==NULL   
    {
        if(max<depth)
        {
           max=depth;
           Deepestnode=temp;
        }
        return(Deepestnode);
     }
} 
```

# javascript - 仅 CSS 垂直时间线

> ID：13091116
> 
> 赞同：6
> 
> 时间：2012-10-26T16:50:21.877
> 
> 标签：javascript, jquery, html, css

我正在使用 css 制作垂直时间线，任何人都可以提供帮助。左侧部分变得拥挤。左边部分的指针圈与对面的部分重叠。尝试仅使用 css 制作它。我们可以添加任何 java 脚本来使其工作。

[http://jsfiddle.net/cdtHx/](http://jsfiddle.net/cdtHx/)

代码：

```
 <!DOCTYPE HTML>
<html>
    <head>
    <meta charset="utf-8">
    <title>Untitled Document</title>
    <style type='text/css'>
.line {
    width:930px;
    margin:0 auto;
}
.line div {
    width: 408px;
    background-color:#ffffff;
    border:solid 1px #B4BBCD;
    min-height:35px;
    text-align:justify;
    word-wrap:break-word;
    list-style:none;
}
.ci {
    position:relative;
    float:right;
}
.cl {
    position: relative;
    text-align:right;
}
.ci, .cl span {
    padding:10px;
}
.line:before {
    content: "";
    position: absolute;
    top: 0;
    left: 50%;
}
.ci:before, .cl:after, .ci span:before, .cl span:after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
}
.line:before {
    width: 3px;
    top: -20px;
    bottom: -20px;
    background:#000;
}
.ci:before {
    width: 5px;
    height: 5px;
    border: 3px solid #CCC;
    border-radius: 100px;
    margin: 10px 0 0 -38px;
    box-shadow: 0 1px 1px rgba(0,0,0,0.2), inset 0 1px 1px rgba(0,0,0,0.1);
    background: #000;
}
.ci:hover:before {
    background: #090;
}
.ci span:before {
    top: 12px;
    left: -6px;
    width: 9px;
    height: 9px;
    border-width: 0 0 1px 1px;
    border-style: solid;
    border-color: #e5e5e5;
    background: #fff;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -o-transform: rotate(45deg);
}
/*gggggg*/
    .cl:after {
    width: 5px;
    height: 5px;
    border: 3px solid #CCC;
    border-radius: 100px;
    margin: 10px 0 0 445px;
    background: #000;
}
.cl:hover:after {
    background: #090;
}
.cl span:after {
    top: 12px;
    left: 404px;
    width: 9px;
    height: 9px;
    border-width: 1px 1px 0 0;
    border-style: solid;
    border-color: #e5e5e5;
    background: #fff;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -o-transform: rotate(45deg);
}
​
</style>
    </head>

    <body style="overflow:hidden;">
    <div class="line">
      <div class="ci"><span>one</span></div>
      <div class="cl"><span>two</span></div>
      <div class="ci"><span>one</span></div>
      <div class="cl"><span>two</span></div>
      <div class="ci"><span>one</span></div>
      <div class="cl"><span>two</span></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-15T11:52:42.620

查看我在 Github 上的示例[https://gist.github.com/OzzyCzech/6240202](https://gist.github.com/OzzyCzech/6240202)

它的垂直时间线元素位于两侧（左侧和右侧）

![在此处输入图像描述](../Images/0d788b3c24b865274cc3d8798aa88829.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T02:42:58.250

重新定义`.ci`并`.cl`：

```
.ci {
    position: relative;
    float: right;
    clear: right;/*added*/
}

.cl {
    position: relative;
    /*text-align: right;*//*removed*/
    float: left;/*added*/
    clear: left;/*added*/
} 
```

更改`line div`为`.cl span:after`：

```
.line div {
    width: 396px;/*changed from 408px*/
    background-color: #ffffff;
    border: solid 1px #B4BBCD;
    min-height: 35px;
    text-align: justify;
    word-wrap: break-word;
    list-style: none;
}

.line:before {
    width: 2px;/*changed from 3px*/
    top: -20px;
    bottom: -20px;
    background: #000;
}

.cl span:after {
    top: 12px;
    left: 392px;/*changed from 404px*/
    width: 9px;
    height: 9px;
    border-width: 1px 1px 0 0;
    border-style: solid;
    border-color: #e5e5e5;
    background: #fff;
    -webkit-transform: rotate(45deg);
    -moz-transform: rotate(45deg);
    -ms-transform: rotate(45deg);
    -o-transform: rotate(45deg);
}​ 
```

更新小提琴：http: [//jsfiddle.net/cdtHx/1/](http://jsfiddle.net/cdtHx/1/)

那是你要找的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-28T16:53:39.493

```
.wrapper{
  max-width: 200px;
  border-right: 1px solid green;
  padding-right: 10px;
}
.wrapper .element{
  position: relative;
  width: 80%;
  margin-top: -30px;
  padding: 20px;
  border: 1px solid blue;
}

.wrapper .element:before{
  position: absolute;
  content:'';
  width: 20px;
  top: 10px;
  right: -15px;
  border-top: 1px solid red;
}
.wrapper .element:first-child{
  margin-top: 0;
}
.wrapper .element:nth-child(2n){
  margin-left: 110%;
}
.wrapper .element:nth-child(2n):before{
  right: auto;
  left: -15px;
}
```

```
<div class="wrapper">
  <div class="element">text text<p>text</p>texttext</div>
  <div class="element">text text<p>text</p>texttext</div>
  <div class="element">text text<p>text</p>texttext</div>
  <div class="element">text text<p>text</p>texttext</div>
  <div class="element">text text<p>text</p>texttext</div>
  <div class="element">text text<p>text</p>texttext</div>
</div>
```

# jquery - MarkerWithLabel 谷歌地图自定义标记

> ID：13091121
> 
> 赞同：1
> 
> 时间：2012-10-26T16:50:48.717
> 
> 标签：jquery, maps

我将 MarkerWithLabel 与 Google Maps v3 Javascript API 一起使用。

我目前创建自定义标记，并使用 MarkerWithLabel 的 labelContent 属性来显示我的图标。我这样做是为了可以根据标题动态旋转图标。这完美无瑕。

现在，我也想为图标添加一个标签。

我的代码：

```
var iconLabel = document.createElement("img");
iconLabel.src = icn+"f.png";
iconLabel.setAttribute("id","img"+$i);

var marker = new MarkerWithLabel({
    position: point,
    icon: boatIcons["blank"],
    shadow: boatIcons["blank"],
    draggable: false,
    map: theMap.map,
    flat: true,
    optimized: false,
    visible: true,
    labelContent: iconLabel, 
    labelAnchor: new google.maps.Point(16,16), 
    labelClass: "labels", 
    labelVisible: true,
    labelStyle: {opacity: 0.75},
    labelInBackground: false
}); 
```

这将创建 IMG 罚款。但是我如何创建一个 DIV，向其中添加一些文本，然后添加上面的 IMG，然后将其添加到我的标记中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:38:56.523

看看我的代码中的以下片段：-

```
var marker5 = new MarkerWithLabel({position: latlngE, 
    draggable: false,
    raiseOnDrag: false, 
    labelContent: "Pnt: 5",
    labelAnchor: new google.maps.Point(20, 0),
    labelClass: "labels",         // the CSS class for the label
    labelStyle: {opacity: 0.75},
    icon: {url: './images/arrows/Dot.png',
    size: new google.maps.Size(20, 20),
    origin: new google.maps.Point(0, 0)},
    marker: MarkerWithLabel}); 
```

关键在于指定选项：marker: MarkerWithLabel

看看[http://code.google.com/p/jquery-ui-map/wiki/jquery_ui_map_v_3_tutorial](http://code.google.com/p/jquery-ui-map/wiki/jquery_ui_map_v_3_tutorial)

# php - 为了使用应用程序版本，PHP 中是否有编译器指令的替代方法？

> ID：13091122
> 
> 赞同：1
> 
> 时间：2012-10-26T16:50:55.053
> 
> 标签：php, version

事情是这样的，我有一个正在运行的应用程序，我的客户一直要求我随着时间的推移添加功能。现在他还没有实现我开发的所有功能，但他想实现最近开发的一个功能。问题是我制作的应用程序版本之间可能存在一些不兼容问题。

我想知道是否可以在 php 中的类的方法中添加某种版本指令，并以某种方式执行与 Web 应用程序版本匹配的指令？

我将不胜感激您能给我的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:11:24.800

您可以从版本常量 PHP_VERSION 获取 PHP 当前运行的版本并使用 version_compare，这可能会帮助您解决您正在尝试做的事情：http: [//php.net/manual/en/function.version-compare.php](http://php.net/manual/en/function.version-compare.php)

您可以设置自己的版本，然后像这样声明适当的类（您的代码需要知道该类的哪个副本正在运行：

```
define("APPLICATION_VERSION", "1.23");
define("APPLICATION_VERSION_MAJOR", "1.");
define("APPLICATION_VERSION_MINOR", "23");
if (APPLICATION_VERSION_MAJOR == "1") {
    //version 1 class declaration here
    class hello {}
} else {
    //not version 1 class declaration here
    class hello {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:57:41.970

创建一个 settings.php 文件并向其中添加常量。

**设置.php**

```
// Valid constant names
define("VERSION",     "1"); 
```

**类.php**

```
include('settings.php')

if (defined('VERSION') && VERSION == "1") {
    //run code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-21T18:21:24.527

PHP 不是编译语言；就像它的客户端兄弟（HTML 等）一样，每次必须生成页面时，每个文件都会单独评估。因此，在文件的其余部分之前处理文件中的某些内容的概念迅速失去了它的价值。

也就是说，可以在此过程之前设置一些变量并在整个过程中保持不变，这些变量位于**[php.ini](https://secure.php.net/manual/en/ini.list.php)**中。根据字面定义，这些是预处理器指令。但是，我知道它们不是您想要的。

# python - Numpy 数组 - 根据上一个元素的更改更改下一个元素

> ID：13091126
> 
> 赞同：3
> 
> 时间：2012-10-26T16:51:03.933
> 
> 标签：python, numpy

假设我有两个 numpy 数组：

```
import numpy as np
a = np.ones(5)
b = np.array([1.0, 1.1, 1.05, 1.2, 1.25]) 
```

我想要那个元素`a[1]=a[0]*b[1]`，我们称它为`a[1]`a `new_a`，然后`a[2]=new_a*b[2]`。这可以在不使用 numpy 循环的情况下完成吗？使用循环代码如下所示：

```
for i in range(len(a)-1):
    a[i+1] = a[i]*b[i+1]
print (a) 
```

印刷：

```
[ 1\.      1.1     1.155   1.386   1.7325] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:54:17.307

这被称为“累积产品”。为此已经有一个[内置函数`cumprod`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.cumprod.html)。

```
>>> numpy.cumprod([1.0, 1.1, 1.05, 1.2, 1.25])
array([ 1\.    ,  1.1   ,  1.155 ,  1.386 ,  1.7325]) 
```

# java - 按名称休眠组结果，然后获取最新日期

> ID：13091127
> 
> 赞同：0
> 
> 时间：2012-10-26T16:51:08.080
> 
> 标签：java, mysql, hibernate

我正在使用以下查询来检索以下结果。

```
List<TranslationStyleSheet> results = this.session.createCriteria(TranslationStyleSheet.class).list();

File_Name     Create_Date TimeStamp

PDF Version | 10/1/2012
PDF Version | 10/2/2012
PDF Version | 10/10/2012
TXT Version | 9/2/2012
DOC Version | 9/31/2012
DOC Version | 10/5/2012 
```

从那里我只需要返回最新的文件名，不包括旧的结果。

例子

```
File_Name     Create_Date TimeStamp

PDF Version | 10/10/2012
TXT Version | 9/2/2012
DOC Version | 10/5/2012 
```

我尝试了以下代码但没有成功。

```
List<TranslationStyleSheet> results = this.session.createCriteria(TranslationStyleSheet.class)
            .setProjection(Projections.projectionList()
            .add(Projections.groupProperty("fileName"))
            .add(Projections.max("createDate")))
            .list(); 
```

有谁知道如何做到这一点？我首先得到一个异常，上面写着 [Ljava.lang.Object; 不能转换为 org.mycompany.test.entities.TranslationStyleSheet

当我迭代结果时，我只得到一个作为回报。

**更新**

我能够使用以下查询使过滤正常工作，但是我不确定如何返回 TranslationStyleSheet obj 而不仅仅是它的一部分。

询问

```
List results = this.session.createCriteria(TranslationStyleSheet.class)
            .setProjection(Projections.projectionList()
            .add(Projections.groupProperty("fileName"))
            .add(Projections.max("createDate")))
            .list();

    List<Object[]> objs = results;

    for (Object[] obj : objs ) {
        System.out.println(obj[0] + " " + obj[1]);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:57:13.423

不会下订单解决您的问题吗？

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-ordering](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-ordering)

```
addOrder(Order.desc("date")) 
```

# ruby - 清理传入字符串的标准方法？

> ID：13091130
> 
> 赞同：2
> 
> 时间：2012-10-26T16:51:20.963
> 
> 标签：ruby, character-encoding

我与几个外部服务集成，我通过 http 下载文件。我发现在我的系统中使用它们之前，我必须转换/清理文件的名称。所以我在代码的不同部分有这样的事情：

```
name = name.encode('UTF-8', 'ASCII-8BIT', invalid: :replace, undef: :replace, replace: '')
name = name.encode('UTF-8', 'ISO-8859-1', invalid: :replace, undef: :replace, replace: '') 
```

在每种情况下，我都必须询问服务我应该期待什么编码。

这是解决此问题的唯一方法，还是有某种更标准和通用的方法来清理传入的字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T04:59:11.483

在 Ruby 1.9.x 中有一个外部编码和一个内部编码，它们都默认为全局编码。外部文件被认为是配置的外部编码，并自动转换为内部编码。`Encoding.default_external`您可以通过和全局设置这些编码`Encoding.default_internal`。您可以在每个文件的基础上将它们指定为`open`方法的参数，如下例所示：

```
File.open('/path/to/some/file', 'r', external_encoding: 'US-ASCII', internal_encoding: 'UTF-8') 
```

请注意，您也可以单独指定每一项。

有关其他信息，请参阅[此博客文章](http://blog.grayproductions.net/articles/ruby_19s_three_default_encodings)。

# javascript - jQuery中的解读效果，同时保持格式

> ID：13091134
> 
> 赞同：2
> 
> 时间：2012-10-26T16:51:31.993
> 
> 标签：javascript, jquery, animation, jquery-plugins, text

我正在使用[Jason Frame 的 Grab Bag](http://onehackoranother.com/projects/jquery/jquery-grab-bag/text-effects.html)中的 unscramble 插件。

但它似乎只适用于没有格式的文本。我希望文本格式保持不变。

示例：http: [//jsfiddle.net/G6BdX/](http://jsfiddle.net/G6BdX/)

解读插件：

```
 $.fn.unscramble = function() {
        this.each(function() {
            var $ele = $(this), str = $ele.text(), replace = /[^\s]/,
                state = [], choose = [], reveal = 25, random = randomAlphaNum;

            for (var i = 0; i < str.length; i++) {
                if (str[i].match(replace)) {
                    state.push(random());
                    choose.push(i);
                } else {
                    state.push(str[i]);
                }
            }

            shuffle(choose);
            $ele.text(state.join(''));

            var timer = setInterval(function() {
                var i, r = reveal;
                while (r-- && choose.length) {
                    i = choose.pop();
                    state[i] = str[i];
                }
                for (i = 0; i < choose.length; i++) state[choose[i]] = random();
                $ele.text(state.join(''));
                if (choose.length == 0) clearInterval(timer);
            }, 100);
        });
        return this;
    }; 
```

正如您所看到的，当按下“Unscramble me”时，文本格式和*<br>*标签被删除。

由于本人制作jQuery插件的技术欠缺，不知道是什么问题。*我认为替换/[^\s]/*时会出错，但我不确定。

有人有答案吗？

提前致谢。

# php - 不明变量

> ID：13091139
> 
> 赞同：0
> 
> 时间：2012-10-26T16:51:41.330
> 
> 标签：php, variables

有人会向我解释为什么我收到一个错误，说 $new_cid 身份不明吗？仅当我使用 .= 将值附加到现有变量时才会发生这种情况。

```
 $dereg_course_student= mysql_query("SELECT * FROM course_student");
$new_cid;
while($row=mysql_fetch_assoc($dereg_course_student)){
        $cid=explode(".",$row['cid']);
        foreach($cid as $cids){
            if($cids==$_GET['cid']){
                unset($cids);}
            if(isset($cids)){
                $new_cid=$new_cid.".{$cids}";}
            } mysql_query("UPDATE course_student SET cid={$new_cid} WHERE sno={row['sno']}");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T16:55:39.223

因为您`$new_cid;`在开始时使用并且没有指定它应该是什么类型的变量。在 php 中，您不必声明可以`$new_cid` 在没有预定义值的循环中使用的变量。

```
 $dereg_course_student= mysql_query("SELECT * FROM course_student");
 $new_cid='';
while($row=mysql_fetch_assoc($dereg_course_student)){
        $cid=explode(".",$row['cid']);
        foreach($cid as $cids){
            if($cids==$_GET['cid']){
                unset($cids);}
            if(isset($cids)){
                $new_cid.=$cids;}
            } mysql_query("UPDATE course_student SET cid=$new_cid WHERE sno=row['sno']");
    } 
```

像这样试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:05:00.320

我不知道它实际上会导致问题，但我会尝试将 $new_cid 设置为空字符串，然后再尝试与它进行连接。像这样：

```
$new_cid = ""; 
```

把它放在你有“$new_cid;”的地方 现在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-30T17:45:11.787

它应该在 php $new_cid = "";

# c# - ScintillaNet 和 RoutedCommands

> ID：13091144
> 
> 赞同：2
> 
> 时间：2012-10-26T16:51:53.833
> 
> 标签：c#, wpf, command, scintilla

我在我的 C# WPF 应用程序中使用了 ScintillaNet 编辑控件。在我的主窗口中，我设置了一些 RoutedCommands。ScintillaNet 控件托管在 WindowsFormsHost 中。当 ScintillaNet 控件具有焦点时，RoutedCommands 不起作用。

我尝试捕获击键并手动执行 RoutedCommands 但 CanExecute 总是失败：

```
WindowsFormsHost wfh = new WindowsFormsHost();
Scintilla editor = new Scintilla();
wfh.Child = editor;
wfh.Child.PreviewKeyDown += new System.Windows.Forms.PreviewKeyDownEventHandler(Child_PreviewKeyDown);

....

void Child_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
{
    if (e.KeyData == Keys.F5)
        // Window1 is the main window class
        // handle is a reference to the main window
        if (Window1.CmdRun.CanExecute(wfh, handle)) {
            Window1.CmdRun.Execute(wfh, handle);
        }
        else {
            Console.WriteLine("CANT EXECUTE");
        }
    }
} 
```

谁能告诉我如何正确地做到这一点？

谢谢

# symfony - 在 symfony2 中验证数组集合

> ID：13091146
> 
> 赞同：2
> 
> 时间：2012-10-26T16:52:11.170
> 
> 标签：symfony, doctrine, arraycollection, validates-uniqueness-of

我是 Symfony2 + Doctrine 的新手，我正在寻找一种方法来验证 Arraycollection 中的唯一性。可能它已经回答了问题，但我不知道如何解决它。我有一个带有**回调的****Relevamientosserviciosprestador**类：

 **```
namespace Prestadores\PrincipalBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Doctrine\Common\Collections\ArrayCollection;
use Symfony\Component\Validator\ExecutionContext;
/**
 * Prestadores\PrincipalBundle\Entity\Relevamientosserviciosprestador
 *
 * @ORM\Table(name="relevServiciosPrestador")
 * @ORM\Entity(repositoryClass="Prestadores\PrincipalBundle\Repository\RelevamientosserviciosprestadorRepository")*
 * @Assert\Callback(methods={"sonUnicosLosTiposDeReclamoq"})  
 */
class Relevamientosserviciosprestador
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;
    ....
    ....
    /**
     * @ORM\OneToMany(targetEntity="Atencionusuarioreclamo", mappedBy="relevamiento_id", cascade={"persist"})
     * @Assert\Valid 
     */
    private $reclamos;         
    ....
    ....
    public function __construct()
    {
        $this->personal = new ArrayCollection();
        $this->reclamos = new ArrayCollection();        
    }
    ....
    ....
     /*Acá intentaremos validar si los tipos de reclamo que se están cargando son únicos para ese relevamiento*/
    public function sonUnicosLosTiposDeReclamoq(ExecutionContext $context)
    {
        foreach ($this->reclamos as $reclamo){
            /*Here, I get all entities, not only those related to a Relevamientosserviciosprestador*/
            var_dump($reclamo->gettiporeclamo()->getnombre());
        }
    }

} 
```

和**Atecionusuarioreclamo**实体：

```
namespace Prestadores\PrincipalBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Prestadores\PrincipalBundle\Entity\Atencionusuarioreclamo
 *
 * @ORM\Table(name="atencionUsuarioReclamo")
 * @ORM\Entity
 */
class Atencionusuarioreclamo
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $id;

    /**
     * @var Atencionusuariosede
     *
     * @ORM\ManyToOne(targetEntity="Atencionusuariosede")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="nroSede", referencedColumnName="id")
     * })
     */
    private $nrosede;

    /**
     * @var relevamiento_id
     *
     * @ORM\ManyToOne(targetEntity="Relevamientosserviciosprestador")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="relevamiento_id", referencedColumnName="id")
     * })
     */
    private $relevamiento_id;

    /**
     * @var Prmreclamotipo
     *
     * @ORM\ManyToOne(targetEntity="Prmreclamotipo")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="tipoReclamo", referencedColumnName="id")
     * })
     * @Assert\NotBlank()     
     */
    private $tiporeclamo;
    ....
    ....
    ....
    ....

} 
```

我想在给定的**sede**和**relevamiento_id中检查****tiporeclamo的唯一性**

 ******我使用具有“Atencionusuarioreclamo”**实体的子表单集合的表单创建或编辑**Relevamientosserviciosprestador 。**提交时，**Relevamientosserviciosprestador**的回调会执行，但**$this->reclamos**已**保存所有实体**，而不仅仅是那些与我正在编辑的**Relevamientosserviciosprestador**相关的实体 。这是预期的行为还是我错过了什么？我还测试了[如何在 symfony2 中验证实体集合中的唯一实体中](https://stackoverflow.com/questions/11782056/how-to-validate-unique-entities-in-an-entity-collection-in-symfony2)提到的方法 ，但它再次检查所有实体。

 ******我也读过[Doctrine2 ArrayCollection](https://stackoverflow.com/questions/4839982/doctrine2-arraycollection)但我不明白它是否能解决问题。
拜托，你能告诉我在坚持之前如何管理 ArrayCollection 中的唯一性吗？
我很抱歉我的英语不好
提前
谢谢伊万

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:14:40.590

php的`array array_unique ( array $array [, int $sort_flags = SORT_STRING ] )`

结合`ArrayCollection->toArray()`和`ArrayCollection->__construct()`

在你的情况下：

```
$Atencionusuarioreclamo = 
    new ArrayCollection(array_unique($Atencionusuarioreclamo->toArray()); 
```************

# c++ - 设计具有自己的内存分配的类

> ID：13091147
> 
> 赞同：1
> 
> 时间：2012-10-26T16:52:18.773
> 
> 标签：c++, allocation

我在设计将使用自己的内存分配的适当类时遇到了一些麻烦。考虑一下：

```
class IAbstract { ... };
class CConcrete : public IAbstract { ... }; 
```

我想做这样的事情：

```
IAbstract *ptr = new CConcrete();
delete ptr; 
```

问题是，我希望 CConcrete 的“新”使用内存分配器。另外，我希望“删除”使用适当的释放器。但是，new 和 delete 是静态函数，因此上面示例中的 delete 不会调用 CConcrete 的 delete（如果 delete 是虚拟的，它应该这样做）。

解决这个问题的一种方法是做这样的事情：

```
class IAbstract {
public:
   virtual Delete(void* ptr)=0;
   void operator delete(void* ptr) {

      ((IAbstract*)(ptr))->Delete(ptr);
   }
}; 
```

并在派生类中覆盖删除。但是这个解决方案非常难看，尤其是将 ptr 转换为 IAbstract*。

有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:00:48.623

你试过这个吗？[放置新/删除](http://en.wikipedia.org/wiki/Placement_new)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:03:16.110

很难准确地知道您的代码出了什么问题，因为您已经省略了很多代码。我能做的最好的就是向您展示一个工作程序。

考虑这个程序：

```
#include <iostream>
#define X() (std::cout << __PRETTY_FUNCTION__ << "\n")

class IAbstract {
public:
  virtual ~IAbstract() { X(); }
};
class CConcrete : public IAbstract {
public:
  void* operator new(size_t sz) {
    X();
    return ::operator new(sz); // or however you allocate memory
  }
  void operator delete(void* p) {
    X();
    ::operator delete(p); // or however you de-allocate memory
  }
  ~CConcrete() { X(); }
};

int main () {
  IAbstract *ptr = new CConcrete();
  delete ptr;
} 
```

我电脑上的输出是这样的：

```
static void* CConcrete::operator new(size_t)
virtual CConcrete::~CConcrete()
virtual IAbstract::~IAbstract()
static void CConcrete::operator delete(void*) 
```

请注意，当`delete ptr`执行时，`delete`正确调用了虚拟析构函数**和**正确的`operator delete()`.

^(注意：这需要 g++ 由于使用`__PRETTY_FUNCTION__`)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:07:35.227

第一个有趣的事情是你不能转换你的 void 指针来调用任何成员函数。从技术上讲，它可以编译，但是在对象（或对象层次结构）被销毁（通过调用析构函数）**之后调用运算符 delete。**换句话说——你正在做的是UB，因为你试图访问一个被破坏的类的vtable。

另一件事是，只要您的析构函数是虚拟的，就会在类上调用适当的删除运算符。因此，无需在其之上使用额外的 vtable 资源重新发明自己的机制。我认为您正在寻找以下方法：

```
#include <new>
#include <cstdio>
#include <cstdlib>

class Base {
  public:
    Base() { }
    virtual ~Base() { printf("Base::~Base()\n"); }
};

class Derived : public Base {
    char data[256];

  public:
    Derived() {}
    virtual ~Derived() { printf("Derived::~Derived()\n"); }

    void *operator new(size_t size)
    {
        void *p = malloc(size);
        printf("Allocated %lu bytes @ %p\n", size, p);
        return p;
    }

    void operator delete(void *ptr)
    {
        printf("Freeing %p\n", ptr);
        free(ptr);
    }
};

int main()
{
    Base *b = new Base();
    delete b;
    b = new Derived();
    delete b;
} 
```

但是不要忘记，一旦你删除了一个虚拟析构函数，你的重载运算符 delete 就不会被调用。

# regex - MATLAB 2012 正则表达式

> ID：13091151
> 
> 赞同：3
> 
> 时间：2012-10-26T16:52:43.237
> 
> 标签：regex, matlab, string-parsing

我有一组要在 MATLAB 2012 中解析的字符串，它们都具有以下格式：

```
string-int-int-int-int-string 
```

我想取出第三个整数（其余的都是“不关心”），但我已经很久没有使用 MATLAB 了，需要刷新正则表达式。我尝试使用正则表达式`'(.*)-(.*)-(.*)-\d-(.*)'`但没有骰子。我确实查看了[MATLAB regexp page](http://www.mathworks.com/help/matlab/matlab_prog/regular-expressions.html#bqxft72-1)，但无法弄清楚如何将这些信息应用于这种情况。

任何人都知道我怎样才能得到想要的结果？如果是这样，您能否解释一下您正在使用什么表达来获得该结果，以便其他人可以将答案应用于他们的独特情况？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T16:54:45.450

```
^.*?-.*?-.*?-(\d+)-.*?-.*?$ 
```

**或者**

```
^(?:[^-]*?-){3}(\d+)(?:.*?)$ 
```

Group1 现在包含您所需的数据

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T17:43:06.823

```
str = 'XyzStr-1-2-1000-56789-ILoveStackExchange.txt';

[tok] = regexp(str, '^.+?-.+?-.+?-(\d+?)-.+?-.+?', 'tokens');

tok{:}
ans = 
    '1000' 
```

**更新**

解释，根据要求。

*   `^`- “锚”，或匹配字符串的开头。
*   `.+?`- 通配符匹配，一个或多个，非贪婪。
*   `-`- 文字破折号/连字符。
*   `(\d+?)`- 数字匹配，一个或多个，非贪婪，捕获到一个令牌中。

# python - python 表查找：元组列表与数据库

> ID：13091152
> 
> 赞同：1
> 
> 时间：2012-10-26T16:52:51.380
> 
> 标签：python, database

在 python 中，我正在从事一个项目，该项目经常涉及计算有多少具有某些给定属性的对象与某些条件匹配。我可以看到如何使用元组或对象列表或数据库来执行此操作，但我想知道以这种方式过滤对象列表是否是“明显的 pythonic”方式。

我想到的选项如下所示：

```
list_of_all = [object_type(property0, property1, ...), ...]
number_of_matches = len(filter(object_type.property2_test(property2),
    filter(object_type.property1_getter, list_of_all)

list_of_all = [object_type(property0, property1, ...), ...]
number_of_matches = len([0 for candidate in list_of_all
    if candidate.property1 and candidate.property2 == property2])

list_of_all = [(property0, property1, ...), ...]
number_of_matches = len([0 for candidate in list_of_all
    if candidate[1] and candidate[2] == property2])

db_cursor.execute("""CREATE TABLE table_of_all
    (property0 INTEGER, property1 INTEGER, ...)""")
number_of_matches = len(db_cursor.execute("""SELECT 1 FROM table_of_all
    WHERE property1 = 1 AND property2 = ?""", (property2,)).fetchall()) 
```

在我的代码上下文中使用最后两个，timeit 告诉我存在如此显着的差异。

```
$ python -m timeit -n 100 'import with_db' | tail -n1
100 loops, best of 3: 0.751 usec per loop
$ python -m timeit -n 100 'import with_list' | tail -n1
100 loops, best of 3: 0.761 usec per loop 
```

这两个值每次都在 0.751 和 0.811 之间。

一般来说，我的用例由几百个（用于测试目的）到至少 40000 个对象组成。它们用于模拟循环（无需等待 I/O）。每次循环迭代都包含大约 50 个这样的查找，可能会找到一个属性的最大值，以及两个对象的更新，但如果还有其他用例存在最佳解决方案，那也会很有趣。

对于此类任务是否有明显更好的解决方案，或者是否存在选择这些解决方案中的任何一个会产生影响的不同类型的任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T17:04:28.650

您可以让数据库进行计数：

```
SELECT COUNT(*) FROM table_of_all
    WHERE property1 = 1 AND property2 = ? 
```

`sum`在 Python 中，您可以通过使用和生成器表达式来避免创建中间列表：

```
sum(1 for candidate in list_of_all
    if candidate.property1 and candidate.property2 == property2) 
```

# mysql - mysql服务器关闭时如何使rails不失败？

> ID：13091153
> 
> 赞同：0
> 
> 时间：2012-10-26T16:53:14.230
> 
> 标签：mysql, ruby-on-rails

我想开发一个“健康检查”页面来显示数据库/redis/queue 是否正常工作。但是，如果 mysql 关闭，rails 似乎会以 500 错误导致请求失败。

```
Mysql2::Error (Can't connect to MySQL server on '127.0.0.1' (61)):
  mysql2 (0.3.11) lib/mysql2/client.rb:44:in `connect'
  mysql2 (0.3.11) lib/mysql2/client.rb:44:in `initialize'
  activerecord (3.2.8) lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
  activerecord (3.2.8) lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:309:in `new_connection'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:319:in `checkout_new_connection'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:241:in `block (2 levels) in checkout'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `loop'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:236:in `block in checkout'
  /Users/moshebergman/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:233:in `checkout'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:96:in `block in connection'
  /Users/moshebergman/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:404:in `retrieve_connection'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_specification.rb:170:in `retrieve_connection'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_specification.rb:144:in `connection'
  activerecord (3.2.8) lib/active_record/query_cache.rb:67:in `rescue in call'
  activerecord (3.2.8) lib/active_record/query_cache.rb:61:in `call'
  activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__4605244939803304128__call__1430909676671874052__callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call' 
```

在这种情况下，有没有办法让铁轨不会完全失效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T22:49:36.257

我通过猴子为某些 url 修补 QueryCache 找到了答案：

```
module ActiveRecord
  # = Active Record Query Cache
  class QueryCache
    def call(env)
      unless env['REQUEST_PATH'].starts_with?('/health_check')
        begin
          old = ActiveRecord::Base.connection.query_cache_enabled
          ActiveRecord::Base.connection.enable_query_cache!

          status, headers, body = @app.call(env)
          [status, headers, BodyProxy.new(old, body, ActiveRecord::Base.connection_id)]
        rescue Exception => e
          ActiveRecord::Base.connection.clear_query_cache
          unless old
            ActiveRecord::Base.connection.disable_query_cache!
          end
          raise e
        end
      else
        status, headers, body = @app.call(env)
      end
    end
  end
end 
```

如果有人有更好的答案，请告诉我。

# c# - 报表查看器中的页眉在导出为 pdf 时动态文本不呈现完整文本

> ID：13091154
> 
> 赞同：2
> 
> 时间：2012-10-26T16:53:25.450
> 
> 标签：c#, reporting-services

我有一个非常简单的报告，其中包含页眉、正文和页脚。在页眉中有一个文本字段，用于从 Windows 表单中的用户输入中获取文本。文本框中的文本会根据用户输入的内容而变化。我遇到的问题是，在报表查看器中，每件事都正常工作，即当用户输入大文本时，文本框会根据需要展开，每件事看起来都很好。但是，当我将相同的报告导出到 pdf 时，它并没有正确呈现文本框的高度，换句话说，页眉没有相应地改变，因此正文与页眉中的文本重叠。

由于这是我的第一篇文章，我无法发布任何图像来显示问题。

有关如何解决此问题的任何建议。

# html - :Active HTML/CSS 不工作

> ID：13091157
> 
> 赞同：-2
> 
> 时间：2012-10-26T16:53:37.930
> 
> 标签：html, css

:active 有问题，如果有人能找到问题，将不胜感激。

html代码： http: [//pastebin.com/4wCi3L2Z](http://pastebin.com/4wCi3L2Z)

CSS 代码： http: [//pastebin.com/jZvgdDaA](http://pastebin.com/jZvgdDaA)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:56:53.750

您的 html 有 a`class="active"`但您的 css 使用的是 :active 选择器，它与类不同。您可能只想使用 :active 选择器，或者`.active`在 CSS 中使用类选择器。我想你可能会混淆这两者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:07:01.780

: **active**选择器位于 main 之前（定义默认样式）。

权利将是这样的（按此顺序）：

```
#nav li a {... }
#nav li a:hover {...}
#nav li a:active {...} 
```

我也建议使用**:focus**：

```
#nav li a {... }
#nav li a:hover {...}
#nav li a:active, #nav li a:focus {...} 
```

现在，如果您想在将焦点更改为另一个对象后保持焦点，则必须使用**javascript**（**Jquery**、**Mootools**或**Dojo.js**应该可以解决您的问题）。

我建议使用 javascript 和 className。

**关于CSS**的另一件事，永远不要这样做：

```
#myID p em{...} 
#myID em.myClass{...} 
```

正确的程序如下：

```
#myID p em{...} 
#myID p em.myClass{...} 
```

# java - org.xml.sax.SAXParseException：3 字节 UTF-8 序列的字节 2 无效

> ID：13091158
> 
> 赞同：5
> 
> 时间：2012-10-26T16:53:42.837
> 
> 标签：java, xml-parsing, saxparser, webmethods

我在生产环境中遇到上述错误，而在 UAT 中该过程运行良好。

我想知道这个错误是否与 jar 文件加载有关。我们正在使用 webmethods 并且 java 服务发生了上述错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T17:17:32.093

最可能的情况是该文件采用 ISO-8859-1 编码并包含扩展的 ASCII（包括 0x80 和 0xff 之间的字符）。解析器需要 UTF-8，并且扩展字符之一被解释为 3 字节序列的开始，但后面没有在该位置有效的字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:59:06.877

你加载的xml文件编码不正确：看看生产环境文件，至少有一个不是UTF-8的。

# azure - Windows Azure 中的 Windows 服务

> ID：13091159
> 
> 赞同：0
> 
> 时间：2012-10-26T16:54:01.247
> 
> 标签：azure

Windows Azure 是否支持 Windows 服务？，...

我开发了一个应用程序，它的组件中有一个 Windows 服务，每小时都会发送一封包含信息的电子邮件。

这在 Windows Azure 中是否支持？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T06:15:08.557

您可能会发现工作者角色更适合每小时运行一个进程。如果您有 WIndows 服务的代码，那么在工作者角色中实现它应该不难。

但是，您必须使用第 3 方服务来发送电子邮件，因为 Azure 不支持此功能。

问候，

艾伦

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:10:37.590

是的，您可以这样做*。为了在 PaaS 辅助角色（或 Web 角色）中安装 Windows 服务，您需要创建一个启动脚本，在启动时安装该服务（并检查是否已在后续启动时安装）。

如果您使用的是 IaaS 虚拟机，那么安装很简单——就像现在一样。

*Windows Azure 网站是共享模型，因此不支持安装服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T07:54:34.733

结合艾伦史密斯和邓里的答案，两者都是正确的 -

您可以使用启动脚本（网站除外）在 PaaS 角色上安装 Windows 服务。如果您使用的是虚拟机，则只需在 VM 上安装服务

但是 Alan 是完全正确的，在大多数情况下，最好的前进路线是将代码迁移到工人角色，这通常是非常直接的，会工作得最好并且更容易维护。

说了这么多——从 Azure 内部发送电子邮件不一定是一个好主意，因为许多邮件服务器将 ips 列入黑名单（事实证明 Azure 是垃圾邮件发送者的绝佳平台）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T19:25:41.870

我想对 Alan 和 Yossi 的回答做一个额外的补充。知道原因很重要，因为简单地安装 Windows 服务应该不是问题。

但如果你这样做，你会错过一些非常重要的事情。如果您在实际的 Worker Role 进程中运行所有代码，您将免费获得监控。这意味着，如果您的进程因任何原因崩溃，Windows Azure 将重新启动实例以确保进程重新联机。

现在，如果您只是通过启动脚本安装 Windows 服务，您将无法利用此自动监控。您需要确保您有某种恢复（这可能是 Windows 服务上的设置或不同的进程）。但这对于您可以免费获得的东西来说实在是太多了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-29T09:48:07.813

I would suggest using a Extra-Small VM using a windows template that is already offered. It's the same cost as the worker role and will let you provision your service without any issues. You would install your service the same as you would on any on premises server.

If you don't need to have the same sort of failover scenario that your web roles do then this s a good option.

# c# - 如何忽略 REG_EXPAND_SZ 中的环境变量？

> ID：13091160
> 
> 赞同：1
> 
> 时间：2012-10-26T16:54:02.160
> 
> 标签：c#, .net, windows, registry

我正在编写一个小的 C# 程序来更改 Windows 注册表中的一些硬编码路径。我的问题是包含环境变量的 REG_EXPAND_SZ 值。例子：

```
%APPDATA%\Microsoft\Installer\

```

如果我使用[GetValue()](http://msdn.microsoft.com/en-us/library/microsoft.win32.registry.getvalue%28v=vs.80%29.aspx)查询这个值，我会得到 %APPDATA% 的路径。但我不希望它查找环境变量。

我不能排除这些值，因为它们可能包含重要的硬编码路径。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T18:15:12.490

调用时使用该[`RegistryValueOptions.DoNotExpandEnvironmentNames`](http://msdn.microsoft.com/en-us/library/microsoft.win32.registryvalueoptions.aspx)选项[`GetValue`](http://msdn.microsoft.com/en-us/library/xzxd58z1.aspx)。

# objective-c - 在由 NSDictionary 对象组成的 NSArray 中查找最大整数值

> ID：13091164
> 
> 赞同：1
> 
> 时间：2012-10-26T16:54:10.940
> 
> 标签：objective-c, nsarray, nsdictionary, max

有没有快速有效的方法来找到由对象组成的`int`最大值？我的意思是，我可以实现循环，但我正在寻找一些已经调整到最大速度的 API 函数，因为它正在处理相当大量的数据。`NSArray``NSDictionary``for`

`[(int, string, string), (int, string, string), (int, string, string)]`

我尝试过使用，`valueForKeyPath`但到目前为止这对我没有帮助，因为它适用于“普通” NSArray 对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:31:58.387

出于好奇，我对`valueForKeyPath:`与简单迭代进行了一些比较。在我运行 OS X 10.8.2 的 iMac core i7 上，对于 10M 个元素的数组，简单迭代的速度大约是两倍。

这是我制作的测试程序：

```
#import <Foundation/Foundation.h>
#undef NDEBUG
#import <assert.h>
#import <limits.h>
#import <stdio.h>
#import <stdlib.h>

#define ELEMENTS_IN_ARRAY 10000000

NSArray *newArrayWithDictionaryElementCount(int count) {
    NSMutableArray *arr = [[NSMutableArray alloc] initWithCapacity:count];
    for (int i = 0; i < count; ++i) {
        [arr addObject:[NSDictionary dictionaryWithObjectsAndKeys:
                        [NSString stringWithFormat:@"value%d", i], @"string",
                        [NSNumber numberWithInt:rand()], @"int",
                        nil]];
    }
    return arr;
}

int maxIntValueByKeyPathInArray(NSArray *arr) {
    return [(NSNumber *)[arr valueForKeyPath:@"@max.int"] intValue];
}

int maxIntValueByIterationInArray(NSArray *arr) {
    int max = INT_MIN;
    for (NSDictionary *dict in arr) {
        int val = [(NSNumber *)[dict valueForKey:@"int"] intValue];
        if (val > max) {
            max = val;
        }
    }
    return max;
}

NSTimeInterval timeExecutionOf(void(^blockToTime)(void)) {
    NSDate *start = [NSDate date];
    blockToTime();
    return -[start timeIntervalSinceNow];
}

int main (int argc, const char *argv[]) {
    srand(time(NULL));
    @autoreleasepool {
        NSArray *arr = newArrayWithDictionaryElementCount(ELEMENTS_IN_ARRAY);
        assert(maxIntValueByIterationInArray(arr) == maxIntValueByKeyPathInArray(arr));
        (void) printf("Time by key path: %f s\n", timeExecutionOf(^{ maxIntValueByKeyPathInArray(arr); }));
        (void) printf("Time by iteration: %f s\n", timeExecutionOf(^{ maxIntValueByIterationInArray(arr); }));
    }
    return 0;
} 
```

我机器上的结果：

```
$ clang -fobjc-arc -framework Foundation -O4 -march=corei7 -o arraytest arraytest.m
$ ./arraytest
Time by key path: 1.809646 s
Time by iteration: 0.886023 s 
```

我的假设是，对于这些数据结构，迭代解决方案的速度已经差不多了。不必为每个数组元素进行字典查找。此外，这种定制的迭代解决方案受益于知道所有`NSNumber`对象都有`int`值；用于`isGreaterThan:`比较会稍微减慢速度（但它仍然比 快`valueForKeyPath:`）。任何通用库方法几乎肯定会在内部产生这种惩罚……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:29:15.390

我现在不知道这是不是很快，但您可以使用内置`@max`运算符`valueForKeyPath:`：

```
NSArray *array = @[
    @{ @"value" : @5, @"name" : @"foo"},
    @{ @"value" : @7, @"name" : @"bar"},
    @{ @"value" : @3, @"name" : @"abc"}
];

NSNumber *maximum = [array valueForKeyPath:@"@max.value"];
NSLog(@"%@", maximum);
// Output: 7 
```

在这个例子中，`value`是字典的键，值是一个`NSNumber`对象，因为你不能`int`在字典中存储一个。

（请参阅“键值编码编程指南”中的[集合运算符。）](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html#//apple_ref/doc/uid/20002176-SW10)

**更新：**这绝对不是最快的解决方案，正如 Arkku 在他的回答中所表明的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:29:58.283

是的，有一种更好的方法来对包含`NSDictionary`. 在给定的代码片段中，它包含位置字典。每个字典对象都由 Name 和 Distance 键组成。

该数组将如下所示：

```
(   
     {      name = "Electronics Store";
           distance = 9;
     },{      name = "Caffeteria Store";
          distance = 29;
    }    
) 
```

这里的排序是根据字典的“键距离”进行的。请确保键距离必须是 int 值。

例如 ：

```
[detail_dict setValue:[NSNumber numberWithInt:[distance intValue]] forKey:@"distance"]; 
```

注意：它将距离作为一个 int 值进行排序。

之后只需对以下默认方法进行排序`NSMutableArray`：代码：

```
 [arr_details sortUsingDescriptors:[NSArray arrayWithObject:[[NSSortDescriptor alloc] initWithKey:@"distance" ascending:YES]]] 
```

# javascript - 如何将 EX4 与包含破折号的属性一起使用？

> ID：13091168
> 
> 赞同：0
> 
> 时间：2012-10-26T16:54:17.087
> 
> 标签：javascript, xml, apache-flex, actionscript, e4x

有这个代码

```
var images:XML = 
    <elements>
        <el data-custom="abc"/>
        <el data-custom="def"/>
        <el data-custom="ghi"/>
    </elements> 
```

如何使用 e4x 表达式获取属性值？请注意属性名称中的破折号“-”字符。我在 Flex 中使用它，但它可能是 E4X 标准的一般问题。

你显然不能使用：

```
 trace(elements.el.@data-custom) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T16:18:41.653

在许多情况下，我更喜欢使用 XML/XMLList 的[attribute()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XMLList.html#attribute%28%29)方法而不是 (@) 标识符。它也适用于属性名称，这些属性名称也是保留的 Actionscript 单词，如“class”、“package”、“return”等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T16:54:17.087

经过一些不太容易的搜索后，我找到了后代的答案

```
elements.el.@['data-custom']; 
```

# c++ - 结构的 C++ 向量与结构中的向量导致异常

> ID：13091171
> 
> 赞同：2
> 
> 时间：2012-10-26T16:54:36.277
> 
> 标签：c++, stl, vector, struct

我遇到了以下代码的问题，几个小时以来我都无法解决......我很高兴有任何建议。

类型定义如下：

```
typedef std::vector< cv::RotatedRect > ds_t;

typedef struct id_ {
std::string path;
std::string fileName;
} id_t;

typedef struct dd_ {
    cv::RotatedRect bB;
} dd_t;

typedef std::pair<id_t, std::vector<dd_t> > ts_t;

typedef std::vector<ts_t> tss_t; 
```

然后我尝试用数据填充类型：

```
tss_t samples
while (readdir(pDir) != NULL) {
     ts_t sample;
     sample.first.path = _path;
     sample.first.fileName = _name;
     ds_t detections;
     getDetections(_path, detections); //this only filles the detecions byref
     for(size_t i=0; i<detections.size(); i++) {
         dd_t data;
         data.bB = detections[i];
         sample.second.push_back(data); //TODO FIXME
     }
     samples.push_back(sample);
 } 
```

cv::RotatedRect 是一个非常基础的类。

```
class RotatedRect{
   public:
   RotatedRect();
   RotatedRect(const Point2f& _center, const Size2f& _size, float _angle);
   void points(Point2f pts[]) const;

   Point2f center;
   Size2f size;
   float angle; 
};

bool getDetections(const std::string &imagePath, ds_t &detections)
{
  //some processing
  for(size_t i=0;i<5;i++)
    detections.push_back(RotatedRect(cv::Point2f(110.,110.), cv::Size2f(10.,10.), 90.0f));

  return true;
} 
```

希望我复制了整个代码，我知道，我不需要大多数类型定义......

我已经尝试保留空间sample.second.reserve(detections.size())，但这只会将错误推迟到samples.push_back。

错误行由 FIXME 指示，导致“在抛出 'std::bad_alloc' 的实例后调用终止”

感谢您提前提供任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:32:07.400

`std::bad_alloc`通常意味着你的内存已经用完了——可能是因为泄漏，或者只是因为你分配了太多。它也可能（很少）由于堆损坏（在分配的数组末尾运行或在删除后取消引用指针）或程序中某个较早点的其他未定义行为而发生。

您的程序一次尝试使用多少内存？[您可以尝试使用像valgrind](http://valgrind.org)这样的检漏仪来查看是否有需要清理的东西。

**编辑**

告诉你很多——它告诉你有人用虚假的`-1 to __builtin_new`大小打电话给新人。那可能是试图调整大小的 std::vector 的成员（您可以检查来自 valgrind 的堆栈跟踪或使用调试器来确定），这表明向量已损坏。由于`sample.second`是一个本地（堆栈上）变量，它告诉您您调用的前一个函数（可能`getDetections`）超出了堆栈缓冲区或某种类型的数组并被破坏`sample.second`。所以仔细看看那个函数在做什么——你注释掉的代码是`//some processing`. 您还可以尝试使用调试器在`sample`创建后设置断点，然后在所使用的内存上设置观察点`sample.second`那正在被破坏。然后继续程序，它应该停止在崩溃的地方`sample.second`

阅读编译器的头文件以了解它如何实现 std::vector 可能会有所帮助——那里可能有几个`size_t`字段和一个指针字段。

# .htaccess - htaccess 重定向到网站根目录保留标签

> ID：13091174
> 
> 赞同：0
> 
> 时间：2012-10-26T16:54:42.890
> 
> 标签：.htaccess, redirect, root, hashtag

一直在尝试完成以下工作

重定向自

[http://www.mydomain.com/submissions/#22.322.1](http://www.mydomain.com/submissions/#22.322.1)

到

[http://www.mydomain.com/#22.322.1](http://www.mydomain.com/#22.322.1)

到目前为止完全不成功，（除了使服务器崩溃）。

帮助表示赞赏，彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:02:35.033

试试这个：

```
RewriteEngine On
RewriteRule ^(.*)?$ http://%{HTTP_HOST}/$1 [R=301,QSA,L] 
```

将此保存到 /submission/ 子文件夹中的 .htaccess 文件中...

# magento - 如何在 Magento 1.7 中添加/创建新商店

> ID：13091175
> 
> 赞同：1
> 
> 时间：2012-10-26T16:54:42.143
> 
> 标签：magento, magento-1.7

我已经阅读了很多教程，但我找不到任何关于如何在 Magento 1.7 中创建新商店的正确（经过测试）信息

我想在新的 /folder/ 中添加我的新商店，例如 www.mymage.com/newstore/

我需要复制 index.php 和 .htaccess 吗？

你能给我正确的文件之间的修改吗？

添加分类系统>管理商店等

参考： http: [//www.magentocommerce.com/blog/comments/video-creating-multiple-online-storefronts-part1/](http://www.magentocommerce.com/blog/comments/video-creating-multiple-online-storefronts-part1/)

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T09:12:17.443

给它

[http://magento-rohan.blogspot.in/2012/10/magento-managing-multiple-website-stores.html](http://magento-rohan.blogspot.in/2012/10/magento-managing-multiple-website-stores.html)

您也可以使用上面的链接轻松完成此操作

www.magentocommerce.com/magento-on-the-fly/multiple-sites/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T07:43:24.923

我目前正在使用 Magento（新手）。在 Magento 中创建新的商店或网站 1\. 在 eagento 目录下创建文件夹“mystore/website”

```
2\. Copy & paste files: index.php and .htaccess form main directory and change the following in index.php (.htaccess remains unchanged)
    Line 51: 
        $mageFilename = MAGENTO_ROOT . '/../app/Mage.php';
    Line 81: 
        /* Store or website code */
        $mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : 'mystore/website';
    Line 84:
        /* Run store or run website */
        $mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'website/store'; 
```

然后我们必须在后端工作。- 创建网站 - 为该网站创建某个商店 - 创建 roo 类别并添加产品 - 创建商店视图（您的商店代码） - 创建 CMS 页面 这只是我们在创建新网站时需要遵循的方式，根据您的要求有某些其他需要修改的文件。希望我能以某种方式帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:53:37.777

您必须复制（和修改）index.php 和 .htaccess。您还需要创建一堆符号链接。本[教程](http://docs.nexcess.net/multiplestorefronts)涵盖了所有内容。

# javascript - javaScript 中 if(x>y) { x=y} 的简写

> ID：13091180
> 
> 赞同：4
> 
> 时间：2012-10-26T16:55:08.350
> 
> 标签：javascript, if-statement, comparison

试图比较 2 个整数的值，X 和 Y。如果 X 大于 Y，我想在 Y 处限制 X，就像这样 -

```
if(x>y) {
    x=y;
} 
```

有没有一种速记方法来做到这一点（在纯 JavaScript 或 jQuery 中）？我正在考虑使用自定义函数，但想看看是否已经存在某些东西。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T16:57:14.447

您可以使用[Math.min()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/min)：

```
x = Math.min(x, y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T16:56:35.587

我唯一能想到的：

```
x>y && (x=y); 
```

在 Chrome 22 中最快（认为`if(...)`会更快）：http: [//jsperf.com/if-min](http://jsperf.com/if-min)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T16:57:22.967

是的，

```
x = Math.min(x,y); 
```

不客气！

# jquery - Jquery 属性选择器不跨浏览器？

> ID：13091184
> 
> 赞同：2
> 
> 时间：2012-10-26T16:55:21.550
> 
> 标签：jquery, google-chrome, cross-browser

我得到了以下脚本：

```
$('.jcarousel li .views-field-title').each(function(index) {
    //alert(index+1 + ': ' + $(this).text());
    var idx=index+1;
    $('.jcarousel-navigation li[jcarousel-page='+idx+'] a').html($(this).text());
}); 
```

这在 FF、IE7/8/9 中就像一个魅力，但在 Chrome 和 Safari 上却没有。

我知道这是因为属性选择器。

有人知道如何使这个脚本跨浏览器兼容吗？这看起来像是唯一要做我需要做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T16:57:50.953

尝试将实际值括在引号中，如下所示：

```
$('.jcarousel-navigation li[jcarousel-page="'+idx+'"] a') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T16:57:31.797

尝试加上`idx`引号：

```
$('.jcarousel-navigation li[jcarousel-page="'+idx+'"] a') 
```

[http://api.jquery.com/attribute-equals-selector/](http://api.jquery.com/attribute-equals-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:29:31.917

你能确认 .each 方法正在触发吗？

你试过去掉 li 和 .view-fields-title 之间的空间吗？

IE

```
$('.jcarousel li.views-field-title').each(function(index) {
//alert(index+1 + ': ' + $(this).text());
var idx=index+1;
$('.jcarousel-navigation li[jcarousel-page='+idx+'] a').html($(this).text()); 
```

});

# ruby-on-rails - Rails 应用程序的下一步

> ID：13091187
> 
> 赞同：1
> 
> 时间：2012-10-26T16:55:22.453
> 
> 标签：ruby-on-rails, ruby, railstutorial.org

我正在构建一个 Rails 应用程序，完成后将允许用户注册、创建房产，然后将租户和租金分配给该房产。

到目前为止，我已经完成了属性部分，这意味着我可以以新用户身份登录并创建属性。我的下一步是允许用户将租户添加到他们的房产中，我想知道将重复租金分配给每个租户的最佳方式是什么？

我是否向每个创建的新租户添加“starts_at”和“ends_at”字段？我认为这是我必须走的路，因为我希望每个月都能重新支付租金。因此，如果用户创建的租户的租约从 2012 年 10 月 26 日开始，到 2013 年 10 月 26 日结束，则将有 12 个月的重复月租。

我正在考虑创建一个租户脚手架，然后创建一个租用脚手架并将两者连接起来：

租户 - has_one :rent

租金 - has_many :tenants

这听起来像我在正确的道路上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:49:04.920

看起来你的关系是落后的：

```
class Tenant < AR::Base
    has_many :rents
end

class Rent < AR::Base
    belongs_to :tenant
end 
```

由于rent包含日期，并且每个租户一年会有12个租金，所以关系就是`Tenant`会有_many`Rents`这个写法有点别扭，所以你可能要重命名`Rent`为`Payment`

为了处理经常性的租金/付款，我会看一个像 ice_cube 这样的宝石。以下是重复事件的 gem 列表，包括 ice_cube：[https](https://www.ruby-toolbox.com/categories/recurring_events) ://www.ruby-toolbox.com/categories/recurring_events 处理重复日期会很快变得非常难看！

# matlab - 如何在 Matlab 中选择子矩阵（不是任何特定模式）

> ID：13091193
> 
> 赞同：17
> 
> 时间：2012-10-26T16:55:42.140
> 
> 标签：matlab, matrix, matrix-indexing

如何在 Matlab 中选择子矩阵（不是任何模式）？例如，对于一个大小为 10×10 的矩阵，如何选择由第 1 行第 2 行和第 9 行以及第 4 列和第 6 列的交集组成的子矩阵？

感谢您提供任何有用的答案！

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-26T19:31:43.427

## TLDR：简答

至于您的问题，假设您有一个任意的 10×10 矩阵`A`。提取所需子矩阵的最简单方法是使用索引向量：

```
B = A([1 2 9], [4 6]); 
```

## MATLAB 中的索引

官方文档中有一篇[有趣的文章](http://www.mathworks.com/help/matlab/math/matrix-indexing.html)全面解释了 MATLAB 中的索引。基本上，有几种方法可以提取值的子集，我将为您总结它们：

### 1\. 索引向量

索引向量表示要提取的元素的索引。它们可以包含一个或多个索引，如下所示：

```
A = [10 20 30 40 50 60 70 80 90]

%# Extracts the third and the ninth element
B = A([3 9])  %# B = [30 90] 
```

可以为每个维度分别指定索引向量，例如：

```
A = [10 20 30; 40 50 60; 70 80 90];

%# Extract the first and third rows, and the first and second columns
B = A([1 3], [1 2])  %# B = [10 30; 40 60] 
```

还有两个特殊`end`的下标：和冒号（`:`）：

*   `end`只是表示该维度中的最后一个索引。
*   冒号只是“1:end”的简写符号。

例如`A([1 2 3], [2 3])`，你可以写而不是写`A(:, 2:end)`。这对于大型矩阵特别有用。

### 2\. 线性索引

线性索引通过将列连接成一个列向量并分别为元素分配索引来将任何矩阵视为列向量。例如，我们有：

```
A = [10 20 30; 40 50 60; 70 80 90]; 
```

我们要计算`b = A(2)`. 等效的列向量是：

```
A = [10;
     40;
     70;
     20;
     50;
     80;
     30;
     60;
     90] 
```

因此`b`等于 40。

当然，特殊的冒号和`end`下标也是允许的。因此，`A(:)`将任何矩阵`A`转换为列向量。

**使用矩阵下标进行线性索引**：也可以使用另一个矩阵进行线性索引。下标矩阵被简单地转换为列向量，并用于线性索引。然而，生成的矩阵总是与下标矩阵具有相同的维度。
例如， if `I = [1 3; 1 2]`, then`A(I)`与 write 相同`reshape(A(I(:)), size(I))`。

**从矩阵下标转换为线性索引，反之亦然**：为此，您分别拥有[`sub2ind`](http://www.mathworks.com/help/matlab/ref/sub2ind.html)和[`ind2sub`](http://www.mathworks.com/help/matlab/ref/ind2sub.html)。例如，如果要将`[1, 3]`矩阵中的下标`A`（对应元素30）转换为线性索引，则可以编写`sub2ind(size(A), 1, 3)`（这种情况下的结果当然应该是7）。

### 3\. 逻辑索引

在逻辑索引中，下标是二进制的，其中逻辑`1`表示选择了相应的元素，`0`表示未选择。下标向量必须是与原始矩阵相同的维度或具有相同元素数的向量。例如，如果我们有：

```
A = [10 20 30; 40 50 60; 70 80 90]; 
```

并且我们想`A([1 3], [1 2])`使用逻辑索引进行提取，我们可以这样做：

```
Ir = logical([1 1 0]);
Ic = logical([1 0 1]);
B = A(Ir, Ic) 
```

或这个：

```
I = logical([1 0 1; 1 0 1; 0 0 0]);
B = A(I) 
```

或这个：

```
I = logical([1 1 0 0 0 0 1 1 0]);
B = A(I) 
```

[`reshape`](http://www.mathworks.com/help/matlab/ref/reshape.html)请注意，在后两种情况下是一维向量，如有必要（例如，使用），应将其重新整形为矩阵。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-26T17:21:22.063

让我用一个例子来解释：

让我们定义一个 6x6 矩阵

```
A = magic(6)

A = 
35     1     6    26    19    24
 3    32     7    21    23    25
31     9     2    22    27    20
 8    28    33    17    10    15
30     5    34    12    14    16
 4    36    29    13    18    11 
```

从此矩阵中，您需要第 1、2 和 5 行以及第 4 和 6 列中的元素

```
B = A([1 2 5],[4 6])

B = 

26    24
21    25
12    16 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-04T22:20:04.070

```
function f = sub(A,i,j)
[m,n] = size(A);

row = 1:m;
col = 1:n;

x = row;
x(i) = [];

y=col;
y(j) = [];

f= A(x,y); 
```

返回矩阵 A，删除*第**i*行和第 j列。

# java - 如何从 ICompilationUnit 获取文件路径信息？

> ID：13091194
> 
> 赞同：1
> 
> 时间：2012-10-26T16:55:59.677
> 
> 标签：java, eclipse, eclipse-plugin, filepath

我可以使用以下代码获取一组 ICompilationUnit，但我需要从 ICompilationUnit 或 IWorkspaceRoot 获取物理文件路径。

我怎样才能做到这一点？

```
private static Set<ICompilationUnit> getFiles(String projname)   
throws CoreException {
    IWorkspaceRoot ws = ResourcesPlugin.getWorkspace().getRoot();
    IProject proj = ws.getProject(projname);
    IJavaProject javaProject = JavaCore.create(proj);
    Set<ICompilationUnit> files = new HashSet<ICompilationUnit>();
    javaProject.open(new NullProgressMonitor());
    for (IPackageFragment packFrag : javaProject.getPackageFragments()) {
        for (ICompilationUnit icu : packFrag.getCompilationUnits()) {
            files.add(icu);
        }
    }
    javaProject.close();
    return files;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:08:22.530

向 ICompilationUnit 发送 getUnderlyingResource() 方法。它返回一个 IResource，它可以告诉您它是否是一个文件，如果是，它的文件名和路径的各种形式是什么。

请注意，也可以返回 null，因此请注意这一点。

像这样的东西：

```
 // resource is an IResource returned by sending 
   // an iCompilationUnit the getUnderlyingResource() method

if (resource.getType() == IResource.FILE) {

    IFile ifile = (IFile) resource;

    String path = ifile.getRawLocation().toString();

} 
```

# wcf - 访问wsdl文件并在c#中显示方法和参数

> ID：13091195
> 
> 赞同：1
> 
> 时间：2012-10-26T16:56:06.580
> 
> 标签：wcf, wcf-client, svcutil.exe

您好，我对 WCF 服务非常陌生，请原谅我的术语错误。I need to display all the methods in a list and when the method is selected I need to show the parameters so the user can enter the parameter value like id and name so that we can invoke the service and compare the result with expected and actual result .

注意：用户将只提供 WSDL URL，从那里我可以生成一个动态代理，因为我们的服务通常使用 (http://blogs.msdn.com/b/vipulmodi/archive/2006/11/16/dynamic -programming-with-wcf.aspx）。

如何获取操作和参数类型，以便我们可以生成客户端并使用参数调用服务。只想显示方法从用户获取参数值并在 C# windows 应用程序中调用服务。

# asp.net-mvc-3 - 如何在我的实体上设置可序列化属性？

> ID：13091197
> 
> 赞同：-1
> 
> 时间：2012-10-26T16:56:13.483
> 
> 标签：asp.net-mvc-3

我的网站在一个网络农场上，为此我在 mode="StateServer" 中使用了我的会话，在这种模式下，对象必须具有可序列化的属性，我使用了 ado.net 实体数据模型，它工作正常，我对这些没有任何问题。

我将我的项目更新到 vs 2012，但我的 ef 保持在 4.1，因为我的主机不支持更高版本的 ef，当我删除我的实体并再次创建它时，它的结构发生了变化，你可以查看[我的帖子](https://stackoverflow.com/questions/13029667/why-ado-net-entity-data-model-changed-in-vs-2012)，但在新模型中可以序列化属性不可用并且不是由 ef 自动创建的，我查看代码并自己添加它，但是如果我重新创建我的模型，所有这些都将被删除我该如何处理这个问题？

多谢你们

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-26T17:00:39.190

您的实体框架模型是[部分类](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.110%29.aspx)，因此您可以简单地创建另一个具有该属性的文件（每个对象或包含所有对象）。只要两个类之间的名称空间相同，它们就会与实体框架类组合。

```
[Serializable]
public partial class MyEntity
{
} 
```

# html - html5 中的真正圆形（或任何非矩形）元素？

> ID：13091199
> 
> 赞同：1
> 
> 时间：2012-10-26T16:56:26.540
> 
> 标签：html, css, element, geometry

我还没有看到任何关于它们的文档，所以它们可能不存在，但检查一下总是好的。

我正在寻找一个真正的圆形（或矩形以外的任何类型的多边形）元素。我可以在画布上画一个圆圈，但画布仍然是一个矩形。我可以使用边框半径画一个圆，但它仍然是一个带有漂亮圆角的方形元素。

我正在寻找一种（简单的）方法来制作在可点击区域上非常精确的复杂形状按钮。

我目前的方法是使用 JavaScript，听点击和测量位置。如果这在 html5/css3 中处理会更理想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:05:32.097

好吧，所有元素都以一种或另一种形状的块、正方形或矩形开始。除此之外，您还可以通过 CSS 操作该块，使其显示为一个圆圈。但不言而喻，并非所有浏览器都完全支持这一点，但本质上你必须担心的主要是较旧的浏览器。

如果您正在寻找 100% 兼容新旧的东西，那么您可以在[http://pixlr.com](http://pixlr.com)那里画一个并使用图像标签。但即便如此，图像仍然是方形/矩形。无论你走哪条路，都无法逃避这个概念。

总而言之..

```
<div class="full-circle"></div>

.full-circle {
 background-color: #c06;
 border: 3px solid #333;
 height: 150px;
 border-radius:75px;
 -moz-border-radius:75px;
 -webkit-border-radius: 75px;
 width: 150px;
} 
```

就您当前的方法而言，这是大多数情况下唯一合理的逻辑，在“规范”之外做事通常需要更多的工作，然后是一行或三行代码来为您完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T16:27:13.700

Border-radius 只是使元素看起来是圆形的（据报道，在 Firefox 中除外）。

地图是一种工作，但我想避免强制使用图像。

SVG 可以工作，但它仍然不是纯 html/css，因为链接需要 javascript 才能工作。SVG 元素仍然是方形的，尽管里面的形状是对 javascript 事件响应良好的元素。所以它不是 100% 完美的，但它是可行的。

如果我们能够控制页面上元素的形状而不是在画布内绘图，那肯定会更酷。也许我会尝试在画布内构建整个网站......

感谢您的建议！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:09:08.040

没有真正的圆形元素，但请尝试使用常规框元素并使用 CSS3 规范`border-radius`。例如：

```
border-radius: 50px;
height: 50px;
width: 50px;
overflow: hidden; 
```

这将创建一个实际上是圆形的元素，并且当将鼠标悬停在元素上时，Firebug 会尊重弯曲的形式。

# c# - 将面板附加到 TreeView 控件

> ID：13091200
> 
> 赞同：0
> 
> 时间：2012-10-26T16:56:30.570
> 
> 标签：c#, winforms, treeview, panel

我是 C# 的初学者。在我的项目中，我在 TreeView 控件中填充了一个 xml 文件。如果 xml 文件很大，则`TreeView`控件显示带有滚动条的数据。除此之外，每当用户双击一个节点时，我都会在所选节点旁边显示一个面板，如下所示..

![在此处输入图像描述](../Images/eaee516cbcf29168f4c3d4cfd050783b.png)

*当我滚动 TreeView 控件时*：

![在此处输入图像描述](../Images/a8ebeda79977c98ce175c43cd14b2361.png)

我的问题是如何使`panel`附加到`treeView`控件，以便即使用户滚动`TreeView`控件，面板也应该与所选节点一起移动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:29:03.303

好吧，因为 TreeView 没有 Scroll 事件，所以很难做到。无论如何它都不可靠，因为节点可以展开和折叠，从而改变节点的位置和可见性。备份计划是使用计时器。这很好用：

```
 private void timer1_Tick(object sender, EventArgs e) {
        var node = treeView1.SelectedNode;
        if (node == null || !node.IsVisible) panel1.Visible = false;
        else {
            panel1.Visible = true;
            var nodepos = treeView1.PointToScreen(node.Bounds.Location);
            var panelpos = panel1.Parent.PointToClient(nodepos);
            panel1.Top = panelpos.Y;
        }
    } 
```

# javascript - 如何在指令范围内仅隔离单个值？

> ID：13091204
> 
> 赞同：3
> 
> 时间：2012-10-26T16:56:53.667
> 
> 标签：javascript, angularjs

我有一个具有非隔离范围的 AngularJS 指令。但是，我确实有一个变量，我希望仅与指令隔离（它是一个“isOpen”标志）。例如：

```
app.directive('myDir', function() {
    return {
        restrict: 'A',
        scope: {},
        link: function(scope, element, attrs) {
            scope.isOpen = false;
        }
    }
}); 
```

...给了我一个孤立的范围。我需要能够在 myDir 之前的某个位置分配一个控制器，并让该控制器的范围在 myDir 中可用，同时隔离 scope.isOpen 以便我可以在一个页面上拥有该指令的多个实例。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T17:40:43.840

父控制器的范围在您的指令中可用，即使您已通过`$parent`指令范围上的属性隔离了范围。

```
app.directive('myDir', function() {
    return {
        restrict: 'A',
        scope: {},
        link: function(scope, element, attrs) {
            scope.isOpen = false;
            scope.$parent.whatever; //this came from your containing controller.
        }
    }
}); 
```

不过要小心……以这种方式紧密耦合指令和控制器变得非常容易。在大多数情况下，最好将作用域的属性与标记中的作用域声明和属性链接起来，如下所示：

指令：

```
app.directive('myDir', function() {
    return {
        restrict: 'A',
        scope: {
           propFromParent: '=prop',
           funcFromParent: '&func'
        },
        link: function(scope, element, attrs) {
            scope.isOpen = false;
            scope.$parent.whatever; //this came from your containing controller.
        }
    }
}); 
```

标记：

```
<my-dir prop="foo" func="bar()"></my-dir> 
```

你的控制器：

```
app.controller('SomeCtrl', function($scope) {
    $scope.foo = 'test';
    $scope.bar = function() {
       $scope.foo += '!';
    };
}); 
```

# python - 使用 self.__init__(...) 重新初始化对象

> ID：13091221
> 
> 赞同：30
> 
> 时间：2012-10-26T16:58:32.087
> 
> 标签：python

**任何人都可以通过调用“ self.init** (”来解释重新初始化对象是否安全。如以下简化示例所示？

我问的原因是我在几本python书籍和互联网上都找不到这种方法。有人建议列出所有属性，并一一设置为初始值。基本上我想在完成一些任务后将我的对象设置为初始状态。

```
class Book(object):
    def __init__(self,name,author):
        self.name = name
        self.author = author
        self.copies = 5

    def reset(self):
        self.__init__(self.name,self.author)

    def incrementCopy(self):
        self.copies += 1

Kite = Book('kite runner','khaled hosseini')

print 'initial number of copies:', Kite.copies
Kite.incrementCopy()
Kite.incrementCopy()
Kite.incrementCopy()
print '3 copies are added:', Kite.copies
Kite.reset()
print 'number of copies are reinitialized', Kite.copies

initial number of copies: 5
3 copies are added: 8
number of copies are reinitialized 5 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-26T17:09:44.243

唯一特别`__init__`的是它在创建实例时自动调用。除此之外，它是一种普通方法，使用它将对象设置回其初始状态是安全的。

话虽如此，仅仅因为它是安全的并不意味着它是一个好主意。其他查看您的代码的人可能会对此感到困惑，并且在`reset`方法（`__init__`甚至可以调用）中执行所有操作以更明确地了解该方法的使用方式并不难。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-26T17:05:22.300

我认为这是一种非常糟糕的做法 - 你不应该`__init__`手动（除非调用`__init__`父类）。此外，将对象的数据传回`__init__`也有些奇怪。

为什么不这样：

```
class Book(object):
    def __init__(self,name,author):
        self.name = name
        self.author = author
        self.reset()

    def reset(self):
        self.copies = 5 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-09-16T01:34:13.737

我认为不是不安全的，我已经使用它并且内存中没有发生任何奇怪的事情，但考虑到其他方法中定义的属性不会被重置。考虑例如：

```
class Dummy:
    def __init__(self):
        self.x = 4
    def plus_one(self):
        self.x += 1
    def define_other_variables(self):
        self.y = 3
    def reset(self):
        self.__init__()
D = Dummy()
print(D.x) # 4
# print(D.y) will raise an AttributeError
D.plus_one()
D.plus_one()
# D.y do not exist
D.define_other_variables()
# D.y exist
print(D.x) # 6
D.reset()
print(D.x) # 4
print(D.y) # 3, still exist!! 
```

然后，只需记住在**init**函数中定义每个对象。出于这个原因，您可以考虑不好的做法，但我仍然认为它很优雅。

# python - 更改 tkinter 列表框中的项目顺序

> ID：13091222
> 
> 赞同：4
> 
> 时间：2012-10-26T16:58:42.657
> 
> 标签：python, user-interface, listbox, widget, tkinter

有没有比删除特定键的值，然后重新输入新信息更简单的方法来更改 tkinter 列表框中的项目顺序？

例如，我希望能够重新排列列表框中的项目。如果我想交换两个位置，这就是我所做的。它有效，但我只想看看是否有更快的方法来做到这一点。

```
def moveup(self,selection):
    value1 = int(selection[0]) - 1 #value to be moved down one position
    value2 = selection #value to be moved up one position
    nameAbove = self.fileListSorted.get(value1) #name to be moved down
    nameBelow = self.fileListSorted.get(value2) #name to be moved up

    self.fileListSorted.delete(value1,value1)
    self.fileListSorted.insert(value1,nameBelow)
    self.fileListSorted.delete(value2,value2)
    self.fileListSorted.insert(value2,nameAbove) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T07:41:42.797

> 有没有比删除特定键的值，然后重新输入新信息更简单的方法来更改 tkinter 列表框中的项目顺序？

不行。删除并重新插入是唯一的方法。但是，如果您只想将单个项目向上移动一个，则只需一次删除和插入即可。

```
def move_up(self, pos):
    """ Moves the item at position pos up by one """

    if pos == 0:
        return

    text = self.fileListSorted.get(pos)
    self.fileListSorted.delete(pos)
    self.fileListSorted.insert(pos-1, text) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T01:52:20.587

为了扩展蒂姆的答案，如果您`currentselection()`使用`tkinter.listbox`.

```
l = self.lstListBox
posList = l.curselection()

# exit if the list is empty
if not posList:
    return

for pos in posList:

    # skip if item is at the top
    if pos == 0:
        continue

    text = l.get(pos)
    l.delete(pos)
    l.insert(pos-1, text) 
```

这会将所有选定的项目向上移动`1`。它也可以很容易地适应向下移动项目。您必须检查该项目是否位于列表的末尾而不是顶部，然后添加`1`到索引而不是减去。您还希望反转循环的列表，以便不断变化的索引不会弄乱集合中的未来移动。

# asp.net-mvc - T4MVC 将当前页面控制器添加到操作链接

> ID：13091223
> 
> 赞同：0
> 
> 时间：2012-10-26T16:58:42.997
> 
> 标签：asp.net-mvc, t4mvc

我有以下 ActionLink 位于注册控制器的主页中（Index.cshtml）

```
@Html.ActionLink("terms of service", Url.Action(MVC.Home.Terms()), 
                 null, new  { target="_blank" }) 
```

生成以下 URL。为什么要添加“注册”？就好像注册页面中拥有自己的控制器的链接正在将注册控制器预先附加到该视图中的任何链接？

```
http://localhost/register/terms-of-service

    routes.MapRoute(
        "Terms",
        "terms-of-service",
        new { controller = "Home", action = "Terms" }
    );

public partial class HomeController : SiteController
{
    public virtual ActionResult Terms()
    {
        return View(new SiteViewModel());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T07:15:56.317

您可以尝试使用标准 MVC 而不是 T4MVC 生成相同的链接，以检查行为是否特定于 T4MVC？带有路由的 MVC 行为通常令人费解，因此在将其作为 T4MVC 事物进行调查之前先隔离它总是好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T22:54:07.017

这对我有用...从没有重定向的 .cshtml 文件下载等...花了一段时间才得到有效的东西

```
<a href="@Url.Action("ExportAsCSV", "Download", new { target = "_blank" })" >Download2</a> 
```

# c++ - C++ 将二进制（P5）图像转换为 ascii（P2）图像（.pgm）

> ID：13091224
> 
> 赞同：0
> 
> 时间：2012-10-26T16:58:46.210
> 
> 标签：c++, image, image-processing, binary, ifstream

我正在编写一个简单的程序来将灰度二进制 (P5) 转换为灰度 ascii (P2)，但是在读取二进制并将其转换为 int 时遇到问题。

```
#include <iostream>
#include <fstream>
#include <sstream>
using namespace::std;

int usage(char* arg) {
// exit program
    cout << arg << ": Error" << endl;
    return -1;
}

int main(int argc, char* argv[]) {
    int rows, cols, size, greylevels;
    string filetype;

    // open stream in binary mode
    ifstream istr(argv[1], ios::in | ios::binary);
    if(istr.fail()) return usage(argv[1]);

    // parse header
    istr >> filetype >> rows >> cols >> greylevels;
    size = rows * cols;

    // check data
    cout << "filetype: " << filetype << endl;
    cout << "rows: " << rows << endl;
    cout << "cols: " << cols << endl;
    cout << "greylevels: " << greylevels << endl;
    cout << "size: " << size << endl;

    // parse data values
    int* data = new int[size];
    int fail_tracker = 0; // find which pixel failing on
    for(int* ptr = data; ptr < data+size; ptr++) {
        char t_ch;
        // read in binary char
        istr.read(&t_ch, sizeof(char));
        // convert to integer
        int t_data = static_cast<int>(t_ch);
        // check if legal pixel
        if(t_data < 0 || t_data > greylevels) { 
            cout << "Failed on pixel: " << fail_tracker << endl;
            cout << "Pixel value: " << t_data << endl;
            return usage(argv[1]);
        }
        // if passes add value to data array
        *ptr = t_data;
        fail_tracker++;
    }
    // close the stream
    istr.close();

    // write a new P2 binary ascii image
    ofstream ostr("greyscale_ascii_version.pgm");
    // write header
    ostr << "P2 " << rows << cols << greylevels << endl;
    // write data
    int line_ctr = 0;
    for(int* ptr = data; ptr < data+size; ptr++) {
        // print pixel value
        ostr << *ptr << " ";
        // endl every ~20 pixels for some readability
        if(++line_ctr % 20 == 0) ostr << endl;
    }
    ostr.close();

    // clean up
    delete [] data;
    return 0;
} 
```

[示例图片](https://docs.google.com/leaf?id=0B1jK9RMcqhcvNmQyNjk5MGItMjcyNS00MmY1LWJiZjEtYjE5NjNkY2E0MDlk&hl=en_US)- 从旧帖子中提取。删除了图像文件中的注释，因为我现在不担心这个功能。

当用 g++ 编译时，我得到输出：

```
$> ./a.out a.pgm
filetype: P5
rows: 1024
cols: 768
greylevels: 255
size: 786432
Failed on pixel: 1
Pixel value: -110
a.pgm: Error 
```

图像是一只小鸭子，像素值不可能是-110 ......我哪里出错了？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:12:35.350

> 灰度：255

-110 是 146 作为无符号字符。看来您在 char 是有符号类型的平台上，请尝试使用 unsigned char。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:01:27.613

如果您不能有负值，请使用 an`unsigned int *`而不是`int*`您的像素指针。这样您就不会将值读取为有符号值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T14:32:13.650

您需要更正输出：

```
ostr << "P2\n" << rows << " "<< cols << " "<<  greylevels << endl; 
```

# javascript - 使用数组的对象的目标属性 - Javascript

> ID：13091225
> 
> 赞同：0
> 
> 时间：2012-10-26T16:58:52.237
> 
> 标签：javascript, arrays, object, properties, target

我遇到了这个问题。

```
//Targeting a property of an object using an array

myArray = ["property0","property1","property2","property3"];

myObject = {};

myObject[myArray[0]] = "value0";
//accepts this line as myObject.property0 = "value0";  

alert(myObject.myArray[0]);  // <-- how can I target this using my Array?
//this fails

// alert(myObject.property0); 
//this works 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:01:04.563

与您设置它的方式相同：

```
alert(myObject[myArray[0]]) 
```

# vbscript - VBscript删除子文件夹

> ID：13091228
> 
> 赞同：2
> 
> 时间：2012-10-26T16:59:12.623
> 
> 标签：vbscript

我对 vb 脚本非常陌生，我需要一个脚本来根据起始名称 _SA 和 2 天前删除几个第三级子文件夹

例子

C:\abc\user1\temp\ _SA123 c:\abc\user2\temp_SA2345 c:\abc\user3\temp_SA4567

我想删除以 _SA 开头的超过 2 天的文件夹，并且我有 50 多个用户文件夹。请帮忙

谢谢，辣椒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:51:39.000

根据示例数据，尽管我认为这是第 4 级，但这应该可以工作：

编辑：因为您问得很好，所以我更新了它以在变量中构建一个日志，该变量将列出已删除文件夹的路径、创建日期以及删除日期。此信息显示在 msgbox 中，但您可以轻松修改以将数据打印到文件中。

```
Dim rootFolder
Dim fld
Dim subFld
Dim subsubFld
Dim Log
Set fso = CreateObject("Scripting.FileSystemObject")
Set rootFolder = fso.GetFolder("C:\abc\")
For Each fld In rootFolder.SubFolders
    For Each subFld In fld.SubFolders
        For Each subsubFld In subFld.SubFolders
            If Len(subsubFld.Name) >= 3 Then
                If Left(subsubFld.Name, 3) = "_SA" And subsubFld.DateCreated < Now() - 2 Then
                    Log = subsubFld.Path & ", Created " & subsubFld.DateCreated & ",Deleted" & Now & vbNewLine
                    subsubFld.Delete
                End If
            End If
        Next
    Next
Next
MsgBox Log
'Or you could print the log to a file. 
```

它没有错误捕获，（除了确保文件夹名称至少有 3 个字符长）并且如果您没有权限，将被拒绝权限。

注意：我发布的代码有缩进，只是由于某种原因不显示。如果您想查看缩进的代码，请点击编辑按钮。

# php - Mongo：从多个查询中查找

> ID：13091231
> 
> 赞同：0
> 
> 时间：2012-10-26T16:59:28.137
> 
> 标签：php, mongodb

Mongo 的新手。我正在使用 PHP 库并试图找出如何从多个查询中找到集合。我可以通过使用不同的查询重复查询来做到这一点，但我想知道是否可以一次性完成。

IE

```
$idsToLookFor = array(2124,4241,5553);
$query = $db->thisCollection->find(array('id' => $idsToLookFor)); 
```

这就是我想做的。但是它不起作用。我想要做的是一次为所有 id 找到一组结果。

可能还是只是用 foreach/for 在每个上做一个 findOne？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:02:11.663

采用`$in Operator`

```
$idsToLookFor = array(2124,4241,5553);
$query = $db->thisCollection->find(array(
    'id' => array('$in' => $idsToLookFor)
)); 
```

# java - 流程的建议/推荐引擎

> ID：13091236
> 
> 赞同：0
> 
> 时间：2012-10-26T16:59:53.510
> 
> 标签：java, algorithm, oracle, autosuggest, recommendation-engine

我有一些包含多个作业、依赖项和经过时间的表。该引擎的目的是，当您插入作业名称时，它会为您提供有关检查哪些流程以使其更快的建议。

例如，给定下表：

```
 jobs
    +----+-------------------------+------------+-----+
    | id | job_name                | parent_job |type |
    +----+-------------------------+------------+-----+
    | 1  | delete_everything_box   |            |b    |
    | 2  | delete_everything       | 2          |j    |
    | 3  | another_job             |            |j    |
    | 4  | dependant_box           |            |b    |
    | 5  | dependant_job_1         | 4          |j    |
    | 6  | dependant_job_2         | 4          |j    |
    +----+-------------------------+------------+-----+ 

```

Jobdependant_box 可能有一个依赖——甚至几个——，在另一个表中描述：

```
 dependencies
    +--------+-------------------------+------+
    | job_id | condition_job           | type |
    +--------+-------------------------+------+
    | 4      | delete_everything_box   | b    |
    +--------+-------------------------+------+ 

```

然后，您有一个表，其中存储了每个经过的时间 (A)：

```
 timings
    +--------+----------------------+---------------------+----------+-----------------+
    | job_id | start_time           | end_time            | status   | elapsed_time    |
    +--------+----------------------+---------------------+----------+-----------------+
    | 1      | 2012/09/19 02:57:35  | 2012/09/20 02:59:38 | success  | 86523           |
    | 2      | 2012/09/19 02:57:36  | 2012/09/20 02:59:37 | success  | 86521           |
    | 3      | 2012/09/19 02:57:36  | 2012/09/19 02:59:37 | success  | 121             |
    | 4      | 2012/09/20 02:59:39  | 2012/09/20 03:05:02 | success  | 323             |
    | 5      | 2012/09/20 02:59:40  | 2012/09/20 03:01:01 | success  | 81              |
    | 6      | 2012/09/20 02:59:40  | 2012/09/20 03:05:01 | success  | 321             |
    +--------+----------------------+---------------------+----------+-----------------+ 

```

因此，假设您输入了一个作业名称，在本例中为“delete_everything_box”。从 A 中，您可以推断 *delete_everything* 是罪魁祸首。但还有另一种情况（B）：

```
 timings

    +--------+----------------------+---------------------+----------+-----------------+
    | job_id | start_time           | end_time            | status   | elapsed_time    |
    +--------+----------------------+---------------------+----------+-----------------+
    | 1      | 2012/09/19 02:57:35  | 2012/09/20 02:59:38 | success  | 86523           |
    | 2      | 2012/09/19 02:57:36  | 2012/09/20 02:59:37 | success  | 86521           |
    | 3      | 2012/09/19 02:57:36  | 2012/09/19 02:59:37 | success  | 121             |
    | 4      | 2012/09/19 02:57:35  | 2012/09/20 03:05:02 | success  | 86847           |
    | 5      | 2012/09/20 02:59:39  | 2012/09/20 03:01:01 | success  | 82              |
    | 6      | 2012/09/20 02:59:39  | 2012/09/20 03:05:01 | success  | 322             |
    +--------+----------------------+---------------------+----------+-----------------+ 

```

在 B 中，如果您输入名称dependant_box，它会告诉您*delete_everything* 是罪魁祸首。这是因为由于它有依赖关系，它会等到所有依赖关系都满足才开始运行。也可能发生多个作业被链接起来，因此您必须检查所有作业，或者至少检查经过时间较长的 5 个作业。

因此，有了给定的信息，它应该显示 10 个要优化的候选者，这些候选者将被输入到引擎中。也可能发生某些作业无法修复，因此不应显示它们。此外，有些工作可能需要更长的时间或被链接，但权重是基于经过的时间。

表存储在oracle中，语言应该是java。

你有什么建议？我们正在讨论为团队开发一种自动化工具来检查耗时较长的工作。如果您能指出我的算法、库等，将不胜感激。

我忘了提它：**b**表示包含 1 个或多个工作 (j) 的框。**j**是单个作业条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:44:11.393

有一些很棒的开源工具可用于 Java，具有您提到的功能；看看这两个：

1.  [流口水规划师](http://www.jboss.org/drools/drools-planner)
2.  [石英调度器](http://quartz-scheduler.org/overview/features)

# objective-c - 在钟形曲线上分布数字

> ID：13091249
> 
> 赞同：3
> 
> 时间：2012-10-26T17:00:49.340
> 
> 标签：objective-c, algorithm, math

我正在寻找一个产生类似于钟形曲线的数学函数（想想）。我在这里非常不了解。我认为高斯函数可能是我需要的，但我不知道如何为我的目的正确应用它。

我将使用该函数对一系列对象进行动画处理：

![在此处输入图像描述](../Images/1b462c9be9b87f6da5b3e4c80e907c09.png)

我想通过将每个对象偏移到前一个对象来模拟此动画的加速和减速的外观，直到中间点，之后偏移量增加回原始值：

![在此处输入图像描述](../Images/959f2872adf7bac1495038c54ed072ba.png)

一旦实现，我希望该函数接受我在 x 轴上的起点和终点，以及需要容纳的对象数量。然后它应该返回一系列值，这些值将成为每个对象的 x 原点。

例如：

开始：0 结束：100 对象：20

平面分布：0、5、10、15、20、25、30、35、40、45、50、55、60、65、70、75、80、85、90、95

所需结果：0、10、19、27、34、40、44、45、46、47、48、49、50、51、55、60、66、73、81、90

对曲线轮廓进行一些控制也会很好 - 例如，我上面的估计值是一个相当“平坦”的钟形（项目 7-14 具有相同的偏移量）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:39:35.193

考虑以下三次多项式：

```
f(x,a) = 4ax^3 - 6ax^2 + 2ax + x 
```

`x in [0:1]`在保持常数的域上进行评估，`a`并从区间“[0:1]”中选择。

这将生成从零开始到一结束的绘图。如果`a==0`，你得到一条直线。如果`a==1`，你会得到一个很深的曲线。对于`a`介于两者之间的某个地方，你会得到介于两者之间的东西。

一旦为 选择了一个好的值`a`，您只需在 0 到 1 之间的任意多个点进行评估。然后您缩放这些值以适合您想要的范围。

* * *

此电子表格的屏幕截图提供了两个示例。列 A 和 F 保存值`a`，列 B 和 G 保存值`x`（如果您想使用平面分布中的确切值，您可以更改`x`to的每个用法`x/100`）。C 列和 H 列保存 的结果`f(x,a)`。D 列和我持有`f(x,a)*100`.

![电子表格屏幕截图](../Images/fc391c62c182dd50a468f92de6e87a1c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:28:26.577

这是用于生成正常偏差的 Java 实现：

```
/** generation of a Gaussian deviates (variants) by the ratio of uniform method */
final public static double generateNormalDeviate( final double mean, final double std_deviation ){
    double u, v, x, y, q;
    do {
        u = random.nextDouble();
        v = 1.7156 * ( random.nextDouble() - 0.5 );
        x = u - 0.449871;
        y = (v < 0 ? v * -1 : v) + 0.386595;
        q = x*x + y * (0.19600 * y - 0.25472 * x);
    } while( q > 0.27597 &&
            (q > 0.27846 || v*v > -4d * Math.log(u) * u*u));
    return mean + std_deviation * v / u;
} 
```

有关更多信息和 C 版本，请参阅 Press Numeric Recipes。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:02:33.333

IIRC [-1..1] 中 N 个独立随机数的总和很好地近似于中心为 0 的高斯曲线，我不记得色散是什么。

编辑：不明白这个问题。您似乎需要实现[这个](http://en.wikipedia.org/wiki/Function_of_Laplace)的东西，确切地说是“逆误差函数”，您可能希望在代码中实现它的近似值，因为函数本身是一个整数，不能在基本函数中进行评估。一旦你得到函数为钟形曲线点提供正确的近似值，你就可以清楚地将 0-1 数字作为基数（这将定义钟形曲线的平坦度），将其命名为 B，然后将你的 N 个数字均匀分布在 (-1+ B）和（1-B），然后将该函数的输出作为钟形曲线位置，然后对其进行归一化，使最左边的位置在开始，最右边的位置在结束。

# python - Python：将参数映射到数组中的函数

> ID：13091251
> 
> 赞同：0
> 
> 时间：2012-10-26T17:01:04.940
> 
> 标签：python, numpy

我有一个函数实例数组，以及几个应用于这些实例的参数数组。函数实例数组可以是任意大小。定义如下（是的，每个函数都采用相同的参数）：

```
fcn1(a, b, c)
fcn2(a, b, c) 
```

每个函数参数都是一个浮点数组，例如：

```
a = numpy.array([1., 2., 3.])
b = numpy.array([1., 2., 3.])
c = numpy.array([1., 2., 3.]) 
```

函数实例数组如下所示：

```
[<function fcn1 at 0x030A44F0> <function fcn2 at 0x030A4530>] 
```

我正在尝试将函数参数映射到每个数组实例。

到目前为止，我尝试了一些简单的方法，例如：

```
for f in fcn:
    print f(a, b, c) 
```

但是函数的构造方式，它们返回 X 个数组，其中 X 是 、 和 中的每个元素`a`的`b`数量`c`。例如，如果我简单地调用：

```
fcn1(a, b, c) 
```

它将返回（注意每个输入参数中的三个元素，返回三个数组）：

```
[array([0.2343, 0.4943, ..., 0.8943, 0.7115]), array([0.2343, 0.4853, ..., 0.8555, 0.1915]), array([0.7773, 0.1343, ..., 0.8045, 0.9994])] 
```

所以当我运行我的简单循环时会发生两个数组数组：

```
[array([0.2343, 0.4943, ..., 0.8943, 0.7115]), array([0.2343, 0.4853, ..., 0.8555, 0.1915]), array([0.7773, 0.1343, ..., 0.8045, 0.9994])]
[array([0.2343, 0.4943, ..., 0.8943, 0.7115]), array([0.2343, 0.4853, ..., 0.8555, 0.1915]), array([0.7773, 0.1343, ..., 0.8045, 0.9994])] 
```

关于如何优雅地将参数应用于函数实例的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:14:59.963

如果我没看错，您最终希望得到一个包含函数结果列表列表的数据结构。

```
function_result_set = [func(*argument_list) for func in function_list] 
```

只要每个函数都能够使用`len(argument_list)`参数，这将适用于任意长度的函数序列（或者实际上是可调用的，例如类）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:06:10.117

不知道我是否正确理解你，但你只是想要：

```
for f in fcn:
    for ix in range(len(a)):
      print f(a[ix], b[ix], c[ix]) 
```

# php - 重定向 HTTP 表单帖子

> ID：13091257
> 
> 赞同：8
> 
> 时间：2012-10-26T17:01:36.367
> 
> 标签：php, html, apache, iis, curl

**一点背景知识：**我在一个公共网站上有一个表单，需要将数据发布到防火墙后面的 Apache 服务器。我不想提供从 Internet 直接访问此虚拟主机的权限。

**目前这就是我正在做的事情：**我的 DMZ 中有一个 IIS 服务器。此 IIS 服务器是唯一允许通过防火墙访问 Apache 服务器的 IP。作为一个临时解决方案，我使用“应用程序请求路由”设置 IIS，以通过 IIS 将 Apache 框呈现到 Internet。

**我想做的事：**有一些方法来捕获然后转发表单，而不必将 Apache 盒子展示到互联网上。这里的诀窍是 POST 将来自 Internet 上的任何地方，被 IIS 服务器抓取，然后从 IIS 服务器中继到 apache 盒子。我已经研究过用 PHP/cURL 来做这件事，但不确定使用这样的东西是否可以解决问题：

```
<?php

$todo = "";

while (list($name, $value) = each($HTTP_POST_VARS)) {
$todo.=$name."=".$value."&";
}

$ch = curl_init('http://mylanserver/capture.php');
curl_setopt ($ch, CURLOPT_POST, 1);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $todo);
curl_exec ($ch);
curl_close ($ch);
?> 
```

有人可以指出我正确的方向吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T18:51:41.333

我包含的第一条语句工作正常，但没有传递在我的表单上有多个选择选项的值。它只是在字段中填充“数组”。我通过这样做纠正了这一点：

```
$postParams = file_get_contents("php://input"); 

$ch = curl_init('http://mysite/capture.php');
curl_setopt ($ch, CURLOPT_POST, 1);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $postParams);
curl_exec ($ch);
curl_close ($ch); 
```

然后我需要将客户端重定向到“谢谢”页面，我的后端程序正在发送这些数据，但我无法让 cURL 使用它，我通过刷新标题并将值设置为来解决这个问题1\. 像这样：

```
header("refresh:1;url=http://mythankyoupage"); 
```

谢谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:45:59.213

如果我对您的理解正确，您想发送帖子数据吗？

尝试这个：

```
$url = 'http://server.com/path';
$data = array('key1' => 'value1', 'key2' => 'value2')

// use key 'http' even if you send the request to https://...
$options = array('http' => array(
    'method'  => 'POST',
    'content' => http_build_query($data)
));
$context  = stream_context_create($options);
$result = file_get_contents($url, false, $context); 
```

您不必自己构建 $data 数组，只需传递 $_POST 数组即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T12:16:03.920

使用史努比。它会帮助你很多。或者将数据保存在一些临时数据库中，创建一个小型机器人（您可以再次使用 snoopy）并允许它与 Web 服务器通信并按照您的喜好使用数据。在 cron 选项卡中将此机器人安排为 cron。

# database - 使 Blast 搜索花费更长的时间

> ID：13091263
> 
> 赞同：0
> 
> 时间：2012-10-26T17:02:06.897
> 
> 标签：database, search, cloud, blast

我指的是这个链接：[http](http://www.ncbi.nlm.nih.gov/books/NBK52637/) ://www.ncbi.nlm.nih.gov/books/NBK52637/ ，尝试在单机上进行爆炸搜索。我从 NCBI 网站下载了 blast 应用程序和 refseq_rna blast 数据库。爆炸搜索只需几秒钟即可获得结果。我想问是否有任何方法可以使爆炸搜索花费更多时间来搜索爆炸数据库上的匹配序列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T21:01:57.000

BLAST 是一种启发式算法，它的设计速度非常快。NCBI 接口上的一些结果也是预先计算的。为什么您希望此过程花费更长的时间我无法想象，但是您可以尝试运行 Smith-Waterman 对齐算法，这将找到真正的最佳匹配，并且比大型数据库上的 BLAST 花费的时间要长得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-10T13:29:39.227

也许你可以告诉我们你为什么要放慢速度！？

但是为了它的价值，使用 -W 选项减小字长。

# php - 无法在 cakephp 中上传文件，表单结果是字符串

> ID：13091271
> 
> 赞同：0
> 
> 时间：2012-10-26T17:02:43.910
> 
> 标签：php, cakephp

我正在使用 cakephp 2.0 并尝试进行基本文件上传，但我无法将文件从表单获取到我的控制器应用程序。我已经和数据库谈过了，他向我保证所有权限都设置正确。以下是我认为的代码：

```
<?php echo $this->Form->create('FileUpload', array('type' => 'file', 
    'action' => 'batchupload')); ?>
    <fieldset>
        <?php echo $this->Form->input('manufacturer_id'); ?>
        <?php echo $this->Form->file('userfile', array('type' => 'file')); ?>
    </fieldset>
<?php echo $this->Form->end(__('Upload'), true); ?> 
```

我遇到的问题是 gettype($this->request->data['FileUpload']['userfile']) 返回字符串。在这件事上的任何帮助都会很棒。

编辑：这是查看页面的 HTML 源代码

```
 <form action="/cca/admin/FileUpload/batchupload" id="FileUploadBatchuploadForm" enctype="multipart/form-data" method="post" accept-charset="utf-8"><div style="display:none;"><input type="hidden" name="_method" value="POST"/></div>    <fieldset>
  <div class="input select required"><label for="FileUploadManufacturerId">Manufacturer</label><select name="data[FileUpload][manufacturer_id]" id="FileUploadManufacturerId">
    <option value="1">man1</option>
    <option value="4" selected="selected">man2</option>
  </select></div>       

  <input type="file" name="data[FileUpload][userfile]"  type="file" value="test.csv" id="FileUploadUserfile"/>  </fieldset>
  <div class="submit"><input  type="submit" value="Upload"/></div></form>          </div><!--end scrollArea div --> 
```

php设置：

```
asp_tags: off  
file_uploads: On  
max_execution_time: 30  
max_input_time: 60  
memory_limit: 32M  
register_globals: Off  
safe_mode: Off  
session.save_path: /tmp  
upload_max_filesize: 2M  

edit: php_info()
System  Linux host.com 2.6.32-220.7.1.el6.x86_64 #1 SMP Wed Mar 7 00:52:02 GMT 2012 x86_64  
Build Date  Jun 20 2012 12:07:38  
Configure Command    './configure' '--disable-fileinfo' '--enable-bcmath' '--enable-calendar' '--enable-ftp' '--enable-libxml' '--enable-magic-quotes' '--enable-mbstring' '--enable-pdo=shared' '--enable-sockets' '--prefix=/usr' '--with-curl=/opt/curlssl/' '--with-gd' '--with-imap=/opt/php_with_imap_client/' '--with-imap-ssl=/usr' '--with-jpeg-dir=/usr' '--with-kerberos' '--with-libdir=lib64' '--with-libxml-dir=/opt/xml2/' '--with-mcrypt=/opt/libmcrypt/' '--with-mysql=/usr' '--with-mysql-sock=/var/lib/mysql/mysql.sock' '--with-openssl=/usr' '--with-openssl-dir=/usr' '--with-pcre-regex=/opt/pcre' '--with-pdo-mysql=shared' '--with-pdo-sqlite=shared' '--with-pic' '--with-png-dir=/usr' '--with-sqlite=shared' '--with-xpm-dir=/usr' '--with-zlib' '--with-zlib-dir=/usr'  
Server API  CGI/FastCGI  
Virtual Directory Support   disabled  
Configuration File (php.ini) Path   /usr/lib  
Loaded Configuration File   /usr/local/lib/php.ini  
Scan this dir for additional .ini files (none)  
Additional .ini files parsed    (none)  
PHP API 20090626  
PHP Extension   20090626  
Zend Extension  220090626  
Zend Extension Build    API220090626,NTS  
PHP Extension Build API20090626,NTS  
Debug Build no  
Thread Safety   disabled  
Zend Memory Manager enabled  
Zend Multibyte Support  disabled  
IPv6 Support    enabled  
Registered PHP Streams  https, ftps, compress.zlib, php, file, glob, data, http, ftp, phar  
Registered Stream Socket Transports tcp, udp, unix, udg, ssl, sslv3, sslv2, tls  
Registered Stream Filters   zlib.*, convert.iconv.*, mcrypt.*, mdecrypt.*, string.rot13, string.toupper, string.tolower, string.strip_tags, convert.*, consumed, dechunk  

This program makes use of the Zend Scripting Language Engine:  
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies  
    with the ionCube PHP Loader v4.0.12, Copyright (c) 2002-2011, by ionCube Ltd.  

PHP Credits  
Configuration  
bcmath  
BCMath support  enabled  

Directive   Local Value Master Value  
bcmath.scale    0   0  

calendar  
Calendar support    enabled  

cgi-fcgi  
Directive   Local Value Master Value  
cgi.check_shebang_line  1   1  
cgi.discard_path    0   0  
cgi.fix_pathinfo    1   1  
cgi.force_redirect  1   1  
cgi.nph 0   0  
cgi.redirect_status_env no value    no value  
cgi.rfc2616_headers 0   0  
fastcgi.logging 1   1  

Core  
PHP Version 5.3.10  

Directive   Local Value Master Value  
allow_call_time_pass_reference  On  On  
allow_url_fopen On  On  
allow_url_include   Off Off  
always_populate_raw_post_data   Off Off  
arg_separator.input &   &  
arg_separator.output    &   &  
asp_tags    Off Off  
auto_append_file    no value    no value  
auto_globals_jit    On  On  
auto_prepend_file   no value    no value  
browscap    no value    no value  
default_charset no value    no value  
default_mimetype    text/html   text/html  
define_syslog_variables Off Off  
disable_classes no value    no value  
disable_functions   no value    no value  
display_errors  On  On  
display_startup_errors  Off Off  
doc_root    no value    no value  
docref_ext  no value    no value  
docref_root no value    no value  
enable_dl   On  On  
error_append_string no value    no value  
error_log   no value    no value  
error_prepend_string    no value    no value  
error_reporting 22527   22519  
exit_on_timeout Off Off  
expose_php  On  On  
extension_dir   /usr/local/lib/php/extensions/no-debug-non-zts-20090626 /usr/local/lib/php/extensions/no-debug-non-zts-20090626  
file_uploads    On  On  
highlight.bg    #FFFFFF #FFFFFF  
highlight.comment   #FF8000 #FF8000  
highlight.default   #0000BB #0000BB  
highlight.html  #000000 #000000  
highlight.keyword   #007700 #007700  
highlight.string    #DD0000 #DD0000  
html_errors On  On  
ignore_repeated_errors  Off Off  
ignore_repeated_source  Off Off  
ignore_user_abort   Off Off  
implicit_flush  Off Off  
include_path    /home/testroot/public_html/test/cca/lib:.:/usr/lib/php:/usr/local/lib/php   .:/usr/lib/php:/usr/local/lib/php  
log_errors  Off Off  
log_errors_max_len  1024    1024  
magic_quotes_gpc    On  On  
magic_quotes_runtime    Off Off  
magic_quotes_sybase Off Off  
mail.add_x_header   Off Off  
mail.force_extra_parameters no value    no value  
mail.log    no value    no value  
max_execution_time  30  30  
max_file_uploads    20  20  
max_input_nesting_level 64  64  
max_input_time  60  60  
max_input_vars  1000    1000  
memory_limit    32M 32M  
open_basedir    no value    no value  
output_buffering    no value    no value  
output_handler  no value    no value  
post_max_size   8M  8M  
precision   12  12  
realpath_cache_size 16K 16K  
realpath_cache_ttl  120 120  
register_argc_argv  On  On  
register_globals    Off Off  
register_long_arrays    On  On  
report_memleaks On  On  
report_zend_debug   On  On  
request_order   no value    no value  
safe_mode   Off Off  
safe_mode_exec_dir  /usr/local/php/bin  /usr/local/php/bin  
safe_mode_gid   Off Off  
safe_mode_include_dir   no value    no value  
sendmail_from   no value    no value  
sendmail_path   /usr/sbin/sendmail -t -i    /usr/sbin/sendmail -t -i   
serialize_precision 100 100  
short_open_tag  On  On  
SMTP    localhost   localhost  
smtp_port   25  25  
sql.safe_mode   Off Off  
track_errors    Off Off  
unserialize_callback_func   no value    no value  
upload_max_filesize 2M  2M  
upload_tmp_dir  no value    no value  
user_dir    no value    no value  
user_ini.cache_ttl  300 300  
user_ini.filename   .user.ini   .user.ini  
variables_order EGPCS   EGPCS  
xmlrpc_error_number 0   0  
xmlrpc_errors   Off Off  
y2k_compliance  On  On  
zend.enable_gc  On  On  

ctype  
ctype functions enabled  

curl  
cURL support    enabled  
cURL Information    7.24.0  
Age 3  
Features  
AsynchDNS   No  
Debug   No  
GSS-Negotiate   No  
IDN Yes  
IPv6    Yes  
Largefile   Yes  
NTLM    Yes  
SPNEGO  No  
SSL Yes  
SSPI    No  
krb4    No  
libz    Yes  
CharConv    No  
Protocols   dict, file, ftp, ftps, gopher, http, https, imap, imaps, pop3, pop3s, rtsp, smtp, smtps, telnet, tftp  
Host    x86_64-unknown-linux-gnu  
SSL Version OpenSSL/1.0.0  
ZLib Version    1.2.3  

date  
date/time support   enabled  
"Olson" Timezone Database Version   2012.3  
Timezone Database   external  
Default timezone    America/New_York  

Directive   Local Value Master Value  
date.default_latitude   31.7667 31.7667  
date.default_longitude  35.2333 35.2333  
date.sunrise_zenith 90.583333   90.583333  
date.sunset_zenith  90.583333   90.583333  
date.timezone   America/New_York    America/New_York  

dom  
DOM/XML enabled  
DOM/XML API Version 20031129  
libxml Version  2.7.8  
HTML Support    enabled  
XPath Support   enabled  
XPointer Support    enabled  
Schema Support  enabled  
RelaxNG Support enabled  

ereg  
Regex Library   Bundled library enabled  

filter  
Input Validation and Filtering  enabled  
Revision    $Revision: 321634 $  

Directive   Local Value Master Value  
filter.default  unsafe_raw  unsafe_raw  
filter.default_flags    no value    no value  

ftp  
FTP support enabled  

gd  
GD Support  enabled  
GD Version  bundled (2.0.34 compatible)  
GIF Read Support    enabled  
GIF Create Support  enabled  
JPEG Support    enabled  
libJPEG Version 6b  
PNG Support enabled  
libPNG Version  1.2.49  
WBMP Support    enabled  
XPM Support enabled  
XBM Support enabled  

Directive   Local Value Master Value  
gd.jpeg_ignore_warning  0   0  

hash  
hash support    enabled  
Hashing Engines md2 md4 md5 sha1 sha224 sha256 sha384 sha512 ripemd128 ripemd160 ripemd256 ripemd320 whirlpool tiger128,3 tiger160,3 tiger192,3 tiger128,4 tiger160,4 tiger192,4 snefru snefru256 gost adler32 crc32 crc32b salsa10 salsa20 haval128,3 haval160,3 haval192,3 haval224,3 haval256,3 haval128,4 haval160,4 haval192,4 haval224,4 haval256,4 haval128,5 haval160,5 haval192,5 haval224,5 haval256,5  

iconv  
iconv support   enabled  
iconv implementation    glibc  
iconv library version   2.12  

Directive   Local Value Master Value  
iconv.input_encoding    ISO-8859-1  ISO-8859-1  
iconv.internal_encoding ISO-8859-1  ISO-8859-1  
iconv.output_encoding   ISO-8859-1  ISO-8859-1  

imap  
IMAP c-Client Version   2007f  
SSL Support enabled  
Kerberos Support    enabled  

json  
json support    enabled  
json version    1.2.1  

libxml  
libXML support  active  
libXML Compiled Version 2.7.8  
libXML Loaded Version   20708  
libXML streams  enabled  

mbstring  
Multibyte Support   enabled  
Multibyte string engine libmbfl  
HTTP input encoding translation disabled  

mbstring extension makes use of "streamable kanji code filter and converter", which is distributed under the GNU Lesser General Public License version 2.1\.  

Multibyte (japanese) regex support  enabled  
Multibyte regex (oniguruma) backtrack check On  
Multibyte regex (oniguruma) version 4.7.1  

Directive   Local Value Master Value  
mbstring.detect_order   no value    no value  
mbstring.encoding_translation   Off Off  
mbstring.func_overload  0   0  
mbstring.http_input pass    pass  
mbstring.http_output    pass    pass  
mbstring.http_output_conv_mimetypes ^(text/|application/xhtml\+xml) ^(text/|application/xhtml\+xml)  
mbstring.internal_encoding  no value    no value  
mbstring.language   neutral neutral  
mbstring.strict_detection   Off Off  
mbstring.substitute_character   no value    no value  

mcrypt  
mcrypt support  enabled  
mcrypt_filter support   enabled  
Version 2.5.8  
Api No  20021217  
Supported ciphers   cast-128 gost rijndael-128 twofish arcfour cast-256 loki97 rijndael-192 saferplus wake blowfish-compat des rijndael-256 serpent xtea blowfish enigma rc2 tripledes  
Supported modes cbc cfb ctr ecb ncfb nofb ofb stream  

Directive   Local Value Master Value  
mcrypt.algorithms_dir   no value    no value  
mcrypt.modes_dir    no value    no value  

mysql  
MySQL Support   enabled  
Active Persistent Links 0  
Active Links    0  
Client API version  5.0.96  
MYSQL_MODULE_TYPE   external  
MYSQL_SOCKET    /var/lib/mysql/mysql.sock  
MYSQL_INCLUDE   -I/usr/include/mysql  
MYSQL_LIBS  -L/usr/lib64 -lmysqlclient  

Directive   Local Value Master Value  
mysql.allow_local_infile    On  On  
mysql.allow_persistent  On  On  
mysql.connect_timeout   60  60  
mysql.default_host  no value    no value  
mysql.default_password  no value    no value  
mysql.default_port  no value    no value  
mysql.default_socket    /var/lib/mysql/mysql.sock   /var/lib/mysql/mysql.sock  
mysql.default_user  no value    no value  
mysql.max_links Unlimited   Unlimited  
mysql.max_persistent    Unlimited   Unlimited  
mysql.trace_mode    Off Off  

openssl  
OpenSSL support enabled  
OpenSSL Library Version OpenSSL 1.0.0-fips 29 Mar 2010  
OpenSSL Header Version  OpenSSL 1.0.0-fips 29 Mar 2010  

pcre  
PCRE (Perl Compatible Regular Expressions) Support  enabled  
PCRE Library Version    8.21 2011-12-12  

Directive   Local Value Master Value  
pcre.backtrack_limit    1000000 1000000  
pcre.recursion_limit    100000  100000  

PDO  
PDO support enabled  
PDO drivers sqlite, sqlite2, mysql  

pdo_mysql  
PDO Driver for MySQL    enabled  
Client API version  5.0.96  

Directive   Local Value Master Value  
pdo_mysql.default_socket    /var/lib/mysql/mysql.sock   /var/lib/mysql/mysql.sock  

pdo_sqlite  
PDO Driver for SQLite 3.x   enabled  
SQLite Library  3.7.7.1  

Phar  
Phar: PHP Archive support   enabled  
Phar EXT version    2.0.1  
Phar API version    1.1.1  
SVN revision    $Revision: 321634 $  
Phar-based phar archives    enabled  
Tar-based phar archives enabled  
ZIP-based phar archives enabled  
gzip compression    enabled  
bzip2 compression   disabled (install pecl/bz2)  
OpenSSL support enabled  

Phar based on pear/PHP_Archive, original concept by Davey Shafik.  
Phar fully realized by Gregory Beaver and Marcus Boerger.  
Portions of tar implementation Copyright (c) 2003-2009 Tim Kientzle.  

Directive   Local Value Master Value  
phar.cache_list no value    no value  
phar.readonly   On  On  
phar.require_hash   On  On  

posix  
Revision    $Revision: 321634 $  

Reflection  
Reflection  enabled  
Version $Revision: 321634 $  

session  
Session Support enabled  
Registered save handlers    files user sqlite  
Registered serializer handlers  php php_binary  

Directive   Local Value Master Value  
session.auto_start  Off Off  
session.bug_compat_42   On  On  
session.bug_compat_warn On  On  
session.cache_expire    180 180  
session.cache_limiter   must-revalidate nocache  
session.cookie_domain   no value    no value  
session.cookie_httponly On  Off  
session.cookie_lifetime 14400   0  
session.cookie_path /   /  
session.cookie_secure   Off Off  
session.entropy_file    no value    no value  
session.entropy_length  0   0  
session.gc_divisor  100 100  
session.gc_maxlifetime  14400   1440  
session.gc_probability  1   1  
session.hash_bits_per_character 4   4  
session.hash_function   0   0  
session.name    CAKEPHP PHPSESSID  
session.referer_check   no value    no value  
session.save_handler    files   files  
session.save_path   /tmp    /tmp  
session.serialize_handler   php php  
session.use_cookies On  On  
session.use_only_cookies    On  On  
session.use_trans_sid   0   0  

SimpleXML  
Simplexml support   enabled  
Revision    $Revision: 321634 $  
Schema support  enabled  

sockets  
Sockets Support enabled  

SPL  
SPL support enabled  
Interfaces  Countable, OuterIterator, RecursiveIterator, SeekableIterator, SplObserver, SplSubject  
Classes AppendIterator, ArrayIterator, ArrayObject, BadFunctionCallException, BadMethodCallException, CachingIterator, DirectoryIterator, DomainException, EmptyIterator, FilesystemIterator, FilterIterator, GlobIterator, InfiniteIterator, InvalidArgumentException, IteratorIterator, LengthException, LimitIterator, LogicException, MultipleIterator, NoRewindIterator, OutOfBoundsException, OutOfRangeException, OverflowException, ParentIterator, RangeException, RecursiveArrayIterator, RecursiveCachingIterator, RecursiveDirectoryIterator, RecursiveFilterIterator, RecursiveIteratorIterator, RecursiveRegexIterator, RecursiveTreeIterator, RegexIterator, RuntimeException, SplDoublyLinkedList, SplFileInfo, SplFileObject, SplFixedArray, SplHeap, SplMinHeap, SplMaxHeap, SplObjectStorage, SplPriorityQueue, SplQueue, SplStack, SplTempFileObject, UnderflowException, UnexpectedValueException  

SQLite  
SQLite support  enabled  
PECL Module version 2.0-dev $Id: sqlite.c 321634 2012-01-01 13:15:04Z felipe $  
SQLite Library  2.8.17  
SQLite Encoding iso8859  

Directive   Local Value Master Value  
sqlite.assoc_case   0   0  

sqlite3  
SQLite3 support enabled  
SQLite3 module version  0.7-dev  
SQLite Library  3.7.7.1  

Directive   Local Value Master Value  
sqlite3.extension_dir   no value    no value  

standard  
Dynamic Library Support enabled  
Path to sendmail    /usr/sbin/sendmail -t -i  

Directive   Local Value Master Value  
assert.active   1   1  
assert.bail 0   0  
assert.callback no value    no value  
assert.quiet_eval   0   0  
assert.warning  1   1  
auto_detect_line_endings    1   0  
default_socket_timeout  60  60  
from    no value    no value  
safe_mode_allowed_env_vars  PHP_    PHP_  
safe_mode_protected_env_vars    LD_LIBRARY_PATH LD_LIBRARY_PATH  
url_rewriter.tags   a=href,area=href,frame=src,input=src,form=,fieldset=    a=href,area=href,frame=src,input=src,form=,fieldset=  
user_agent  no value    no value  

timezonedb  
Alternative Timezone Database   enabled  
Timezone Database Version   2012.3  

tokenizer  
Tokenizer Support   enabled  

XCache  
XCache Support  enabled  
Version 1.3.2  
Modules Built   cacher  
Readonly Protection N/A  
Cache Init Time 1969-12-31 19:00:00  
Cache Instance Id   0  
Opcode Cache    disabled  
Variable Cache  disabled  
Shared Memory Schemes   mmap  

Directive   Local Value Master Value  
xcache.admin.enable_auth    On  On  
xcache.cacher   On  On  
xcache.coredump_directory   no value    no value  
xcache.count    1   1  
xcache.gc_interval  0   0  
xcache.mmap_path    /dev/zero   /dev/zero  
xcache.readonly_protection  Off Off  
xcache.shm_scheme   mmap    mmap  
xcache.size 0   0  
xcache.slots    8K  8K  
xcache.stat On  On  
xcache.test Off Off  
xcache.ttl  0   0  
xcache.var_count    1   1  
xcache.var_gc_interval  300 300  
xcache.var_maxttl   0   0  
xcache.var_size 0   0  
xcache.var_slots    8K  8K  
xcache.var_ttl  0   0  

xml  
XML Support active  
XML Namespace Support   active  
libxml2 Version 2.7.8  

xmlreader  
XMLReader   enabled  

xmlwriter  
XMLWriter   enabled  

zlib  
ZLib Support    enabled  
Stream Wrapper support  compress.zlib://  
Stream Filter support   zlib.inflate, zlib.deflate  
Compiled Version    1.2.3  
Linked Version  1.2.3  

Directive   Local Value Master Value  
zlib.output_compression Off Off  
zlib.output_compression_level   -1  -1  
zlib.output_handler no value    no value  

Additional Modules  
Module Name  
ionCube Loader  

Environment  
Variable    Value  
CONTENT_LENGTH  143  
CONTENT_TYPE    application/x-www-form-urlencoded  
DOCUMENT_ROOT   /home/testroot/public_html/test  
GATEWAY_INTERFACE   CGI/1.1  
HTTP_ACCEPT text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8  
HTTP_ACCEPT_CHARSET ISO-8859-1,utf-8;q=0.7,*;q=0.3  
HTTP_ACCEPT_ENCODING    gzip,deflate,sdch  
HTTP_ACCEPT_LANGUAGE    en-US,en;q=0.8  
HTTP_CACHE_CONTROL  max-age=0  
HTTP_CONNECTION keep-alive  
HTTP_COOKIE CAKEPHP=5020f56a61a93df0ceb04d77a4b3128a  
HTTP_HOST   test.com  
HTTP_ORIGIN http://test.com  
HTTP_REFERER    http://test.com/cca/admin/fileupload/batchupload  
HTTP_USER_AGENT Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4  
PATH    /bin:/usr/bin  
QUERY_STRING    no value  
REDIRECT_REDIRECT_STATUS    200  
REDIRECT_REDIRECT_UNIQUE_ID UIrSAzIcP7sAAGUegKQAAAAJ  
REDIRECT_STATUS 200  
REDIRECT_UNIQUE_ID  UIrSAzIcP7sAAGUegKQAAAAJ  
REDIRECT_URL    /cca/app/webroot/admin/fileupload/batchupload  
REMOTE_ADDR 12.231.219.14  
REMOTE_PORT 3274  
REQUEST_METHOD  POST  
REQUEST_URI /cca/admin/fileupload/batchupload  
SCRIPT_FILENAME /home/testroot/public_html/test/cca/app/webroot/index.php  
SCRIPT_NAME /cca/app/webroot/index.php  
SERVER_ADDR 50.28.63.187  
SERVER_ADMIN    webmaster@test.com  
SERVER_NAME test.com  
SERVER_PORT 80  
SERVER_PROTOCOL HTTP/1.1  
SERVER_SIGNATURE    <address>Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/1.0.0-fips mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635 Server at test.com Port 80</address>  
SERVER_SOFTWARE Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/1.0.0-fips mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635  
UNIQUE_ID   UIrSAzIcP7sAAGUegKQAAAAJ  

PHP Variables  
Variable    Value  
_REQUEST["_method"] POST  
_REQUEST["data"]      
Array  
(  
    [FileUpload] => Array  
        (  
            [querystring] =>   
            [manufacturer_id] => 1  
            [userfile] => test.csv  
        )  

)  
_REQUEST["CAKEPHP"] 5020f56a61a93df0ceb04d77a4b3128a  
_POST["_method"]    POST  
_POST["data"]     
Array  
(  
    [FileUpload] => Array  
        (  
            [querystring] =>   
            [manufacturer_id] => 1  
            [userfile] => test.csv  
        )  

)  
_COOKIE["CAKEPHP"]  5020f56a61a93df0ceb04d77a4b3128a  
_SERVER["CONTENT_LENGTH"]   143  
_SERVER["CONTENT_TYPE"] application/x-www-form-urlencoded  
_SERVER["DOCUMENT_ROOT"]    /home/testroot/public_html/test  
_SERVER["GATEWAY_INTERFACE"]    CGI/1.1  
_SERVER["HTTP_ACCEPT"]  text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8  
_SERVER["HTTP_ACCEPT_CHARSET"]  ISO-8859-1,utf-8;q=0.7,*;q=0.3  
_SERVER["HTTP_ACCEPT_ENCODING"] gzip,deflate,sdch  
_SERVER["HTTP_ACCEPT_LANGUAGE"] en-US,en;q=0.8  
_SERVER["HTTP_CACHE_CONTROL"]   max-age=0  
_SERVER["HTTP_CONNECTION"]  keep-alive  
_SERVER["HTTP_COOKIE"]  CAKEPHP=5020f56a61a93df0ceb04d77a4b3128a  
_SERVER["HTTP_HOST"]    test.com  
_SERVER["HTTP_ORIGIN"]  http://test.com  
_SERVER["HTTP_REFERER"] http://test.com/cca/admin/fileupload/batchupload  
_SERVER["HTTP_USER_AGENT"]  Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4  
_SERVER["PATH"] /bin:/usr/bin  
_SERVER["QUERY_STRING"] no value  
_SERVER["REDIRECT_REDIRECT_STATUS"] 200  
_SERVER["REDIRECT_REDIRECT_UNIQUE_ID"]  UIrSAzIcP7sAAGUegKQAAAAJ  
_SERVER["REDIRECT_STATUS"]  200  
_SERVER["REDIRECT_UNIQUE_ID"]   UIrSAzIcP7sAAGUegKQAAAAJ  
_SERVER["REDIRECT_URL"] /cca/app/webroot/admin/fileupload/batchupload  
_SERVER["REMOTE_ADDR"]  12.231.219.14  
_SERVER["REMOTE_PORT"]  3274  
_SERVER["REQUEST_METHOD"]   POST  
_SERVER["REQUEST_URI"]  /cca/admin/fileupload/batchupload  
_SERVER["SCRIPT_FILENAME"]  /home/testroot/public_html/test/cca/app/webroot/index.php  
_SERVER["SCRIPT_NAME"]  /cca/app/webroot/index.php  
_SERVER["SERVER_ADDR"]  50.28.63.187  
_SERVER["SERVER_ADMIN"] webmaster@test.com  
_SERVER["SERVER_NAME"]  test.com  
_SERVER["SERVER_PORT"]  80  
_SERVER["SERVER_PROTOCOL"]  HTTP/1.1  
_SERVER["SERVER_SIGNATURE"] <address>Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/1.0.0-fips mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635 Server at test.com Port 80</address>  
_SERVER["SERVER_SOFTWARE"]  Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/1.0.0-fips mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635  
_SERVER["UNIQUE_ID"]    UIrSAzIcP7sAAGUegKQAAAAJ  
_SERVER["PHP_SELF"] /cca/app/webroot/index.php  
_SERVER["REQUEST_TIME"] 1351275011  
_SERVER["argv"]   
Array  
(  
)  
_SERVER["argc"] 0  
_ENV["CONTENT_LENGTH"]  143  
_ENV["CONTENT_TYPE"]    application/x-www-form-urlencoded  
_ENV["DOCUMENT_ROOT"]   /home/testroot/public_html/test  
_ENV["GATEWAY_INTERFACE"]   CGI/1.1  
_ENV["HTTP_ACCEPT"] text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8  
_ENV["HTTP_ACCEPT_CHARSET"] ISO-8859-1,utf-8;q=0.7,*;q=0.3  
_ENV["HTTP_ACCEPT_ENCODING"]    gzip,deflate,sdch  
_ENV["HTTP_ACCEPT_LANGUAGE"]    en-US,en;q=0.8  
_ENV["HTTP_CACHE_CONTROL"]  max-age=0  
_ENV["HTTP_CONNECTION"] keep-alive  
_ENV["HTTP_COOKIE"] CAKEPHP=5020f56a61a93df0ceb04d77a4b3128a  
_ENV["HTTP_HOST"]   test.com  
_ENV["HTTP_ORIGIN"] http://test.com  
_ENV["HTTP_REFERER"]    http://test.com/cca/admin/fileupload/batchupload  
_ENV["HTTP_USER_AGENT"] Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4  
_ENV["PATH"]    /bin:/usr/bin  
_ENV["QUERY_STRING"]    no value  
_ENV["REDIRECT_REDIRECT_STATUS"]    200  
_ENV["REDIRECT_REDIRECT_UNIQUE_ID"] UIrSAzIcP7sAAGUegKQAAAAJ  
_ENV["REDIRECT_STATUS"] 200  
_ENV["REDIRECT_UNIQUE_ID"]  UIrSAzIcP7sAAGUegKQAAAAJ  
_ENV["REDIRECT_URL"]    /cca/app/webroot/admin/fileupload/batchupload  
_ENV["REMOTE_ADDR"] 12.231.219.14  
_ENV["REMOTE_PORT"] 3274  
_ENV["REQUEST_METHOD"]  POST  
_ENV["REQUEST_URI"] /cca/admin/fileupload/batchupload  
_ENV["SCRIPT_FILENAME"] /home/testroot/public_html/test/cca/app/webroot/index.php  
_ENV["SCRIPT_NAME"] /cca/app/webroot/index.php  
_ENV["SERVER_ADDR"] 50.28.63.187  
_ENV["SERVER_ADMIN"]    webmaster@test.com  
_ENV["SERVER_NAME"] test.com  
_ENV["SERVER_PORT"] 80  
_ENV["SERVER_PROTOCOL"] HTTP/1.1  
_ENV["SERVER_SIGNATURE"]    <address>Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/1.0.0-fips mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635 Server at test.com Port 80</address>  
_ENV["SERVER_SOFTWARE"] Apache/2.2.22 (Unix) mod_ssl/2.2.22 OpenSSL/1.0.0-fips mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635  
_ENV["UNIQUE_ID"]   UIrSAzIcP7sAAGUegKQAAAAJ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:18:51.623

你有没有看过詹姆斯在这里是怎么做到的？我知道它的早期版本，但可能会提供一些见解。[http://www.jamesfairhurst.co.uk/posts/view/uploading_files_and_images_with_cakephp](http://www.jamesfairhurst.co.uk/posts/view/uploading_files_and_images_with_cakephp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T20:10:28.910

通常在通过表单上传文件时（这不仅仅与 cakephp 有关），我会检查以下内容：

*   确保您在表单标签中指定了“enctype=multipart/form-data”，否则文件将无法通过
*   接下来我会做一个 print_r($_FILES)，它应该包含有关上传文件的信息
*   如果以上两点都正确，但文件没有开始保存，请确保检查您保存到的文件夹是否具有读/写权限（您可以使用FTP客户端更改文件夹的权限）

在您的情况下，我相信使用 var_dump($this->request->data['FileUpload']['userfile']) 会更好地检查类型。gettype 有一个很大的警告不要用它来检查类型（它显示在我的翻译版本上 - [http://php.net/manual/ro/function.gettype.php](http://php.net/manual/ro/function.gettype.php)，但不在英文版本上 - [http://php .net/manual/en/function.gettype.php](http://php.net/manual/en/function.gettype.php)）。

使用 cakephp 上传文件时，我使用类似这样的方法为新闻模块上传图片：

```
if (!empty($this->data['News']['image_file'])) {
$image_filename = $this->FileManager->uploadFiles('news/images/', array($this->data['News']['image_file']), array('jpg','jpeg','gif','png'));
} 
```

然后我有这样的东西作为 FileManager 组件：

```
<?php 

class FileManagerComponent extends Object {

    /**
     * Function used for renaming files
     *
     * @param string $path
     * @return string
     */
    public function getOptimizedURL($filename) {

        $output = ereg_replace("[^[:alnum:]]", "-", strtolower($filename));
        $output = ereg_replace("[-]+", "-", $output);

        return $output;

    } // end of getOptimizedURL() method

    /**
     * Upload files to the server
     *
     * @param $folder     = the folder to upload the files e.g. 'img/files' 
     * @param $formdata   = the array containing the form files 
     * @return : false or name of the uploaded file
     */
    public function uploadFiles($folder, $formdata, $extensions = array()) {

        $error = true;

        // setup dir names absolute and relative
        $folder_url = DIR_RESOURCES.$folder;
        $rel_url = $folder;

        // create the folder if it does not exist
        if(!is_dir($folder_url)) {
            mkdir($folder_url);
            chmod($folder_url,0777);
        }

        // loop through and deal with the files
        foreach ($formdata as $file) {

            // create unique file name
            $arrFilename = explode(".", $file['name']);
            $filename = $this->getOptimizedURL($arrFilename[0].'-'.time()).'.'.end($arrFilename);

            // -------------------------------------------- //

            // check file extension
            if (empty($extensions) || in_array(end($arrFilename), $extensions)) {

                // switch based on error code
                if ($file['error'] == 0) {

                    // create full filename
                    $full_url = $folder_url.'/'.$filename;
                    $url = $rel_url.'/'.$filename;

                    // upload the file
                    $success = move_uploaded_file($file['tmp_name'], $full_url);
                    $error = false;
                }
            }

            // -------------------------------------------- //
        }

        if (!$error)
            return $filename;
        else 
            return false;

    } // end of uploadFiles() method

} 
```

FileManager 组件还应该：

*   检查错误

*   确保文件名唯一，以免文件被覆盖

*   如果文件夹不存在，则创建该文件夹并设置其权限

它是为 cake1.3 编写的，但是文件上传应该可以工作。

# java - Java 从 XML X509Data 创建 x509certificate

> ID：13091272
> 
> 赞同：3
> 
> 时间：2012-10-26T17:02:43.817
> 
> 标签：java, x509certificate

我从 xml 文件中提取了 x509certificate 数据

```
 <X509Data>
            <X509Certificate>
      MIIB7DCCAVmgAwIBAgIQPjHcBTL63bBLuJZ88RcrCjAJBgUrDgMCHQUAMBExDzANBgNVBAMT
      BnJvbWVvazAgFw0xMDAzMTUwMjI1MjZaGA8yMTEwMDIxOTAyMjUyNlowETEPMA0GA1UEAxMG
      cm9tZW9rMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDAu/sBh13A27rR7gJpZsI6zCee
      TXNohQWlq2z6Zg8Oxzsy5JoVV....==
            </X509Certificate>
        </X509Data> 
```

如何从这些数据中创建 Java X509Certificate？

我已经试过了

```
 CertificateFactory cf = CertificateFactory.getInstance(X_509);
    ByteArrayInputStream bais = new ByteArrayInputStream(certBytes);
    X509Certificate x509cert = (X509Certificate) cf.generateCertificate(bais);
    bais.close(); 
```

但是出现错误

```
java.security.cert.CertificateParsingException: invalid DER-encoded certificate data. 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T00:54:22.783

这些字节是 PEM。Java可以处理它，但如果将它包含在“-----BEGIN CERTIFICATE-----”和“-----END CERTIFICATE-----”之间

# android - jquery mobile + phonegap 中的 Youtube iframe 构建

> ID：13091273
> 
> 赞同：3
> 
> 时间：2012-10-26T17:02:50.493
> 
> 标签：android, cordova, jquery-mobile, iframe, youtube-api

我正在使用 iframe 将 youtube 视频嵌入到使用 jQuery 移动和 phonegap 构建开发的 android/iOS 应用程序中。

在我的浏览器上测试它工作正常。

在我的设备 (android) 上，我看到了视频缩略图，但是当我点击它时，屏幕变黑，我看到了控件（播放、前进和后退）并且视频没有开始。在其他一些视频上，我看到加载“圆圈”，然后是 YT 相关视频。

我正在检查视频是否可用于移动设备

```
http://gdata.youtube.com/feeds/videos?alt=json&format=1,6&fields=entry[link/@rel='http://gdata.youtube.com/schemas/2007%23mobile']&max-result =10&category=音乐&q="+mySong
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:09:40.867

本教程似乎有效：

[http://eisabainyo.net/weblog/2012/01/24/embed-a-youtube-video-iframe-in-phonegap-app/](http://eisabainyo.net/weblog/2012/01/24/embed-a-youtube-video-iframe-in-phonegap-app/)

注意这一步：

在应用程序的 PhoneGap.plist 文件中更改/添加以下值。

```
MediaPlaybackRequiresUserAction: NO
AllowInlineMediaPlayback: YES
OpenAllWhitelistURLsInWebView: YES
ExternalHosts
          *.youtube.com
          *.ytimg.com 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T11:49:09.490

该问题似乎与 android 版本有关：在 4.0 上，iframe/html5 版本运行良好。问题出在android 2.3上。

我在 2.3 中使用了 jqm 插件作为解决方法

# r - 阅读汉语（GB2312）资料

> ID：13091279
> 
> 赞同：1
> 
> 时间：2012-10-26T17:03:32.247
> 
> 标签：r

我正在尝试读取包含中文文本的 csv 文件。该文件应如下所示：

```
userid,jobid,Title,companyid,industryids1
82497,1160,互联网产品经理,12
96429,658,企划经理（商业公司）,24
14471,95,产品运营经理,25,6
14471,1708,产品营销高级经理,727,2
14471,1558,产品总监,611,4
14471,1777,产品总监,743,1
14471,1697,产品经理,725,234
14471,1716,度假产品总监 ,730,234
14471,1717,产品经理,730,5 
```

但是当我在使用中读取数据时，`read.csv()`它在 R 控制台中看起来像这样：

```
 userid jobid                Title companyid industryids1
1  82497  1160       »¥ÁªÍø²úÆ·¾­Àí        12           NA
2  96429   658 Æó»®¾­Àí£¨ÉÌÒµ¹«Ë¾£©        24           NA
3  14471    95         ²úÆ·ÔËÓª¾­Àí        25            6
4  14471  1708     ²úÆ·ÓªÏú¸ß¼¶¾­Àí       727            2
5  14471  1558             ²úÆ·×Ü¼à       611            4
6  14471  1777             ²úÆ·×Ü¼à       743            1
7  14471  1697             ²úÆ·¾­Àí       725          234
8  14471  1716        ¶È¼Ù²úÆ·×Ü¼à        730          234
9  14471  1717             ²úÆ·¾­Àí       730            5 
```

我怎样才能正确阅读这个？

会话信息：

```
R version 2.14.1 (2011-12-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)
locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    
attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     
loaded via a namespace (and not attached):
[1] tools_2.14.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:40:43.040

这些字符甚至可以在[Windows-1252 编码](http://en.wikipedia.org/wiki/Windows-1252)中表示吗？我对此表示怀疑。由于 R 在该 LOCALE 中运行，您需要将其更改为那些字符编码确实有意义的一种，例如 UTF-8。

您在 Linux 上的合适语言环境中为我工作（使用 UTF-8）：

```
> df <- read.csv(text = "userid,jobid,Title,companyid,industryids1
+ 82497,1160,互联网产品经理,12
+ 96429,658,企划经理（商业公司）,24
+ 14471,95,产品运营经理,25,6
+ 14471,1708,产品营销高级经理,727,2
+ 14471,1558,产品总监,611,4
+ 14471,1777,产品总监,743,1
+ 14471,1697,产品经理,725,234
+ 14471,1716,度假产品总监 ,730,234
+ 14471,1717,产品经理,730,5", header = TRUE)
> df
  userid jobid                Title companyid industryids1
1  82497  1160       互联网产品经理        12           NA
2  96429   658 企划经理（商业公司）        24           NA
3  14471    95         产品运营经理        25            6
4  14471  1708     产品营销高级经理       727            2
5  14471  1558             产品总监       611            4
6  14471  1777             产品总监       743            1
7  14471  1697             产品经理       725          234
8  14471  1716        度假产品总监        730          234
9  14471  1717             产品经理       730            5 
```

我`sessionInfo()`的是：

```
> sessionInfo()
R version 2.15.2 RC (2012-10-22 r60997)
Platform: x86_64-unknown-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_GB.utf8       LC_NUMERIC=C             
 [3] LC_TIME=en_GB.utf8        LC_COLLATE=en_GB.utf8    
 [5] LC_MONETARY=en_GB.utf8    LC_MESSAGES=en_GB.utf8   
 [7] LC_PAPER=C                LC_NAME=C                
 [9] LC_ADDRESS=C              LC_TELEPHONE=C           
[11] LC_MEASUREMENT=en_GB.utf8 LC_IDENTIFICATION=C      

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods  
[7] base     

loaded via a namespace (and not attached):
[1] tools_2.15.2 
```

因此，您似乎需要告诉 R 使用不同的编码/语言环境，或者 R Windows 常见问题解答建议您尝试为 R GUI 控制台使用一种字体，其中包含对所需编码的处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T06:25:10.590

我正在使用 WIN7（64 位）下的 RStudio（版本 3.1.2）。我在中文文本挖掘时所做的是将系统语言设置为中文（简体，PRC）。

1.  控制面板 -> 地区和语言 -> 格式 -> 中文（简体，PRC）
2.  控制面板 -> 区域和语言 -> 管理 -> 更改系统区域设置... -> 中文（简体，PRC）

然后我可以检查系统信息：

```
> sessionInfo()
R version 3.1.2 (2014-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=Chinese (Simplified)_People's Republic of China.936 
[2] LC_CTYPE=Chinese (Simplified)_People's Republic of China.936   
[3] LC_MONETARY=Chinese (Simplified)_People's Republic of China.936
[4] LC_NUMERIC=C                                                   
[5] LC_TIME=Chinese (Simplified)_People's Republic of China.936    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] lubridate_1.3.3 tmcn_0.1-3     

loaded via a namespace (and not attached):
 [1] bitops_1.0-6   digest_0.6.8   httr_0.6.1     memoise_0.2.1 
 [5] plyr_1.8.1     Rcpp_0.11.3    RCurl_1.95-4.5 Rwordseg_0.2-1
 [9] stringr_0.6.2  swirl_2.2.21   testthat_0.9.1 tools_3.1.2   
[13] yaml_2.1.13 
```

同样，将 RStudio 中有关编码的所有内容设置为 UTF-8

1.  文件 -> 使用编码重新打开 -> UTF-8
2.  文件 -> 使用编码保存 -> UTF-8
3.  工具 -> 全局 -> 常规 -> 默认文本编码 -> UTF-8

那么读取/保存带有汉字的脚本并在控制台上打印应该没有问题。但我不得不说，使用如上设置的语言环境，中文字符也会出现警告和错误消息......

```
> library(dfsaf)
Error in library(dfsaf) : 不存在叫‘dfsaf’这个名字的程辑包 
```

祝你好运

# android - 如何将您的应用添加到联系人共享菜单？

> ID：13091280
> 
> 赞同：0
> 
> 时间：2012-10-26T17:03:37.117
> 
> 标签：android, contacts

我希望将我的应用程序添加到当您选择从电话联系人应用程序共享联系人时出现的弹出菜单中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:14:23.343

```
<intent-filter>
    <action android:name="android.intent.action.SEND"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <data android:mimeType="text/x-vCard"/>
    <data android:mimeType="text/x-vcard"/>
</intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:11:45.870

您需要在我们的清单中注册一个意图过滤器。

[http://developer.android.com/guide/topics/intents/intents-filters.html](http://developer.android.com/guide/topics/intents/intents-filters.html)

试试这个：

```
 <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="vnd.android.cursor.item/contact" android:host="com.android.contacts"/>
    </intent-filter> 
```

# function - Matlab：调用用户定义的函数

> ID：13091283
> 
> 赞同：3
> 
> 时间：2012-10-26T17:03:40.850
> 
> 标签：function, matlab

我正在以这种方式创建用户定义的函数

```
 function y=add(a)

   y=a*a; 
```

现在，此函数位于单独的 .m 文件中。

我想使用这个功能，但我不知道如何调用它

我需要另一个 .m 文件来调用它吗？和#include 上面的.m 文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T17:12:57.610

**首先**，您需要命名文件`add.m`（即与您的函数具有完全相同的**名称**），您可以将它放在当前 matlab 路径中的任何位置（您当前的工作目录很好）。

**其次**`y=add(5)`，您应该从命令行或另一个 matlab 脚本/函数调用您的函数（例如） 。

在这些脚本中，不需要更多类似的`#include`东西，再次提供，`add.m`在您的工作路径中。

# python - Python列表的选择性展平

> ID：13091284
> 
> 赞同：2
> 
> 时间：2012-10-26T17:03:48.590
> 
> 标签：python, list, list-comprehension, flatten

假设我有一个包含（除其他外）不同类型的子列表的列表：

```
[1, 2, [3, 4], {5, 6}] 
```

我想以有选择的方式展平，具体取决于其元素的类型（即我只想展平`sets`，其余的不展平）：

```
[1, 2, [3, 4], 5, 6] 
```

我目前的解决方案是一个函数，但只是为了我的求知欲，我想知道是否可以用一个列表理解来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T17:08:37.507

列表推导不是为展平而设计的（因为它们无法组合与多个输入项对应的值）。

虽然您*可以*使用嵌套列表推导来解决这个问题，但这需要顶级列表中的每个元素都是可迭代的。

老实说，只需为此使用一个函数。这是最干净的方式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T17:15:37.460

Amber 可能是正确的，因为这样的功能更可取。另一方面，总是有一些变化的空间。我假设嵌套的深度永远不会超过一层——如果它的深度超过一层，那么你*绝对*应该更喜欢这个函数。但如果不是，这是一种潜在可行的方法。

```
>>> from itertools import chain
>>> from collections import Set
>>> list(chain.from_iterable(x if isinstance(x, Set) else (x,) for x in l))
[1, 2, [3, 4], 5, 6] 
```

执行此操作的非 itertools 方法将涉及嵌套列表推导。最好把它分成两行：

```
>>> packaged = (x if isinstance(x, collections.Set) else (x,) for x in l)
>>> [x for y in packaged for x in y]
[1, 2, [3, 4], 5, 6] 
```

对于这些中的任何一个是否会比简单的函数更快或更慢，我没有强烈的直觉。这些创建了很多单例元组——这有点浪费——但它们也以 LC 速度发生，这通常非常好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-04T15:40:02.677

您可以使用来自[funcy](https://github.com/Suor/funcy)库的[flatten函数：](http://funcy.readthedocs.org/en/latest/seqs.html#flatten)

```
from funcy import flatten, isa

flat_list = flatten(your_list, follow=isa(set)) 
```

你也可以看看[它的实现](https://github.com/Suor/funcy/blob/1.0.0/funcy/seqs.py#L147)。

# rest - HATEOAS - 发现和 URI 模板

> ID：13091285
> 
> 赞同：3
> 
> 时间：2012-10-26T17:03:53.940
> 
> 标签：rest, discovery, hateoas

我正在为我公司的内部数据设计一个 HATEOAS API，但在发现链接时遇到了麻烦。考虑以下一组步骤，让某人在此系统中检索有关特定员工的信息：

1.  用户发送 GET 以`http://coredata/`获取所有可用资源，返回多个链接，包括一个标记为 rel = " `http://coredata/rels/employees`"
2.  用户在第一个请求的 rel 上遵循 HREF，在（例如）执行 GET`http://coredata/employees`

最后一次通话返回的数据是我的难题，也是我听到不同建议的情况。这里是其中的一些：

1.  该 GET 将返回所有员工（可能带有截断的数据），并且客户端将负责从该列表中选择所需的员工。
2.  该 GET 将返回许多 URI 模板链接，描述如何查询/获取一名员工/获取所有员工。就像是：

    > ```
    > "_links": {
    >     "http://coredata/rels/employees#RetrieveOne": {
    >         "href": "http://coredata/employees/{id}"
    >     },
    >     "http://coredata/rels/employees#Query": {
    >         "href": "http://coredata/employees{?login,firstName,lastName}"
    >     },
    >     "http://coredata/rels/employees#All": {
    >         "href": "http://coredata/employees/all"
    >     }
    > } 
    > ```

我有点卡在这里最接近 HATEOAS 的东西。对于选项 1，我**真的**不想让我的客户每次都为了导航而检索所有员工，但我可以看到在示例 2 中使用 URI 模板如何引入一些带外知识。

我的另一个想法是使用 RetrieveOne、Query 和 All 操作作为我的酷 URL，但这似乎违反了您应该能够从一个基本 URI 导航到所需资源的概念。

有没有其他人设法想出一个很好的方法来处理这个问题？一旦您检索到一个资源或一组资源，导航就变得非常简单，但它似乎很难用于发现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T12:16:50.467

选项 2 还不错，因为您使用[RFC 6570](https://www.rfc-editor.org/rfc/rfc6570)来描述 URI 模式；虽然 HATEOAS 通常表示不让客户端合成 URI，但如果服务器准备对 URI 模板做出保证并以标准格式明确告诉客户端，这是可以接受的。（我很想让“列出所有员工”的 URL 不带`all`后缀，以便将其与具有该 ID 的员工区分开来；原则上，客户不应该知道员工 ID 的样子。）

事实上，主要问题实际上是客户端必须了解这些标记 URI 的含义；没有真正的方法可以猜测“<code>http://coredata/rels/employees#All”的意思是“列出所有员工”。这就是您在客户端、语义标签等中嵌入知识的地方，而 HATEOAS 并没有真正解决这些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-21T13:24:29.377

**TL;DR：使用 OPTIONS 方法以编程方式返回可使用的文档并始终实现分页。**

我们在我的工作中创建了许多内部 REST 服务。我们已经标准化了使用 OPTIONS 方法返回资源的元数据。我们返回的元数据充当该资源的可解析文档。它指示 url 模板、各种选项，如 PAGE、PAGESIZE 以及资源支持的不同方法。我们还返回 rel 链接，因此可以使用 OPTIONS 进行顶级资源发现，而无需拉取实际数据。

我们还专门实施了分页，以防止不必要地返回大量数据的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T11:02:18.430

我的 HATEOAS API 返回 HTML 以及[HAL+JSON](https://datatracker.ietf.org/doc/html/draft-kelly-json-hal)，正如您使用的那样，它们都使用相同的 URI，所以我的 JSON 响应只是返回人类网络用户会看到的内容（减去所有漂亮的颜色）。例如

```
GET /

{"_links": {
    "http://coredata/companies": { "href": "/companies?page=1" }
    ...
}}

GET /companies?page=1

{"_links": {
    "next": { "href": "?page=2" }
    ...
}} 
```

# c++ - FindResource() 的问题

> ID：13091293
> 
> 赞同：0
> 
> 时间：2012-10-26T17:04:44.473
> 
> 标签：c++, resources

我正在研究一段与资源（可执行文件）交互的代码，但是我目前遇到了一些问题。

**问题 1** 在资源头文件 (resource1.h) 中，ID_EXEC 被定义为一个数字，但是当我使用函数“MAKEINTRESOURCE()”并使用 ID_EXEC 作为参数时，ID_EXEC 显然是一个未声明的标识符，我该如何解决这个问题？

**问题 2** FindResource() 中的第一个参数需要 HMODULE，但是我不知道如何获取可执行文件的 HMODULE（存储在 EXE 中），如何获取 HMODULE？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:17:34.480

1) 你肯定忘了`#include "resource1.h"`

2) 它是传递给 WinMain() 的第一个参数的值，转换为 HMODULE。如果您只有一个 main() 或无法访问该变量，那么您可以使用 GetModuleHandle(NULL)。

# linux - Bash 从文件列表中获取时间戳并将其与文件名进行比较

> ID：13091295
> 
> 赞同：1
> 
> 时间：2012-10-26T17:04:57.503
> 
> 标签：linux, bash

为一个项目实现 GIT 存储库，我们通过在部署的提交后挂钩上生成转储来包含数据库结构。

我想要的是一个简单的文件版本控制系统，它基于对表结构的最后更改的时间戳。

在找到[这篇](http://daryl.learnhouston.com/2006/11/30/when-did-i-change-my-mysql-database-structure/)建议检查 MySQL 数据目录中 *.frm 文件日期的帖子后，我认为解决方案是根据最后一个日期作为生成文件的一部分来实现它。这是：

1.  通过 ls 命令（ls -la *.frm 类型）找出数据库文件（即 /var/lib/mysql/databaseX/）的最新日期时间

2.  将该值（最后更改的文件）与某个文件（即 /project/dump_2012102620001.sql）中的一个值进行比较，其中数字对应于最后生成的转储。

3.  如果文件时间戳在该日期之后生成 mysqldump 命令，否则忽略，因此不会生成转储并将其作为对 GIT 的更改提交

不幸的是，我的 Linux 控制台/bash 概念还远远不够，还没有找到任何类似的脚本可以使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:30:29.993

您可以使用`[[ file1 -ot file2 ]]`来测试 file1 是否早于 file2。

```
last=$(ls -tr /path/to/db/files/*.frm | tail -n1)
if [[ dump -ot $last ]] ; then
    create_new_dump
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:34:31.993

您可以通过每次使用适当的`mysqldump`命令转储表结构来为自己省去很多麻烦，因为这是相对轻量级的，因为它不包含表内容。去掉最上面的可变时间戳信息，和之前的文件比较。存储不同。

# assembly - Linux perf profiler 给出的时间度量的含义

> ID：13091301
> 
> 赞同：3
> 
> 时间：2012-10-26T17:05:29.073
> 
> 标签：assembly, profiling

以下是 perf Linux 分析器对 gcc 生成的 C++ 代码的输出。我在一个循环中计算 (a[i]+b[i])^c[i]，从 i=n 向下直到循环存在于 i=-1。这是迄今为止我的程序中最热的循环，可以运行数小时或数天。

如果我正确理解了这个输出，那么 perf 会告诉我这个函数中 57% 的时间都花在了从 rdx 寄存器中减去 8 上。这似乎不太可能，因为从上面三行的 rcx 寄存器中减去 1 只需要 0.99% 的时间。我想我一定错过了什么。这些数字的解释是什么？前面指令的时间是否以某种方式不公平地被计入减法？

```
 3.64 :          484388:       mov    0x0(%rbp,%rdx,1),%rax
    0.64 :          48438d:       add    (%rbx,%rdx,1),%rax
    0.99 :          484391:       sub    $0x1,%rcx
    3.60 :          484395:       xor    (%rdi,%rdx,1),%rax
   57.13 :          484399:       sub    $0x8,%rdx
    0.22 :          48439d:       or     %rax,%rsi
    4.23 :          4843a0:       cmp    $0xffffffffffffffff,%rcx
    0.00 :          4843a4:       jne    484388 
```

我通过执行“perf record ./myprogram”得到这些数字，然后在同一目录中执行“perf report”，然后我浏览到这个程序集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:20:05.197

我在[perf wiki](https://perf.wiki.kernel.org/index.php/Tutorial#Sampling_with_perf_record)上找到了这个：

> 基于中断的采样在现代处理器上引入了滑动。这意味着存储在每个样本中的指令指针指定了程序被中断以处理PMU中断的位置，而不是计数器实际溢出的位置，即采样周期结束时的位置。在某些情况下，如果有分支，这两个点之间的距离可能是几十条指令或更多。当程序无法取得进展时，这两个位置确实是相同的。因此，在解释配置文件时必须小心。

这可能是解释。不幸的是，wiki 没有说明如何确定这是否确实是问题或如何纠正此问题。

# c++ - 父类和子类的 std::vector

> ID：13091302
> 
> 赞同：2
> 
> 时间：2012-10-26T17:05:32.130
> 
> 标签：c++, stdvector

我需要创建一个可以包含我的父类和子类数据的向量。

这就是我所做的..

**车辆是父类**

**汽车是儿童班**

关于 Car.cpp ，它得到以下内容

```
struct Point
{
    int x,y
};

class Car : public Vehicle
{
private:
    Point wheelPoint[4];
    double area;

public:
    void setPoint();
};

void Car::setPoint()
{
    int xData,yData;

    cout << "Please enter X:";
    cin >> xData;

    cout << "Please enter Y:";
    cin >> yData;

    wheelPoint[i].x = xData;
    wheelPoint[i].y = yData;
} 
```

然后在我的 main.cpp

在我的 main.cpp

```
vector<VehicleTwoD> list;
VehicleTwoD *vehicle;
Car *car = new Car;
string vehicleName;

cout << "Please input name of vehicle";
cin >> vehicleName;

vehicle = new Car;
car->setPoint();

list.push_back( Vehicle() );
list.back().setName(vehicleName); 
```

这里的问题..我如何将我的轮点汽车也放入这个向量中。

我想要实现的是一个可以包含的向量

```
Vehicle Name: Vehicle Name (private variable at Vehicle - Parent Class)
Wheel Point[0]: Point (X,Y) ( private var at Car - Child Class)
Wheel Point[1]: Point (X,Y) ( private var at Car - Child Class)
Wheel Point[2]: Point (X,Y) ( private var at Car - Child Class)
Wheel Point[3]: Point (X,Y) ( private var at Car - Child Class) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T17:08:51.267

对象容器受到对象切片的影响。您需要一个指针向量（最好是智能的）：

```
vector<std::unique_ptr<Vechicle>> vehicleVector; 
```

你可以这样做：

```
vehicleVector.push_back(new Vehicle);
vehicleVector.push_back(new Car); 
```

拥有一个对象向量将切断所有超出的类型信息`Vechicle`- 因此， a`Car`将变成 a `Vehicle`，丢失所有附加信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-27T15:13:31.943

我遇到了同样的问题，我先使用然后使用 c++14 进行编译来修复它。11 也可以，但我想使用 14 的一些新功能，所以我这样做了。我希望这有帮助！

```
#include <memory>

std::vector<std::unique_ptr<sf::Shape>> _shapes; 
```

# wpf - WPF仅为第一级设置控件模板

> ID：13091307
> 
> 赞同：0
> 
> 时间：2012-10-26T17:05:54.763
> 
> 标签：wpf, tabcontrol, controltemplate

我有 tabcontrol 的样式：

```
<Style TargetType="{x:Type TabControl}" x:Key="CloseableTabControl">
    <Style.Resources>
        <Style TargetType="{x:Type TabItem}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TabItem}"> 
```

这对包含在 tabcontrol 中的所有 tabitem 都有效，包括子 tabcontrol 的项。

我希望只有第一级的 tabitems 应用了这种风格。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T12:44:52.423

由于您尚未`x:Key`为 TabItem 样式设置值，因此它会应用于 Visual Tree 中找到的所有 TabItems。如果您希望样式仅应用于特定的 TabItem，您需要设置 x:Key 值 -

```
<Style TargetType="{x:Type TabItem}"
       x:Key="TabItemStyle"> 
```

并且无论您希望在何处应用样式，都必须使用`StaticResource`-

```
<TabItem Style="{StaticResource TabItemStyle}"/> 
```

# c++ - 以下代码的复杂性是多少？

> ID：13091308
> 
> 赞同：-4
> 
> 时间：2012-10-26T17:06:04.337
> 
> 标签：c++

下面这段代码的复杂度是多少？

```
for (int i = 1; i * i <= n; i++)
{
   if (n%i == 0)
     //do anything
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T17:15:14.097

循环运行√n*次*，每次满足条件是`i`一个因素`n`——后者是一个不平凡的条件，需要仔细分析。它取决于 的素数分解`n`。例如，如果`n`是素数，则条件只为真一次，对于`i == 1`，并且永远不会再为真。

# integration - 如何解决 ESB 中的批处理问题？

> ID：13091314
> 
> 赞同：0
> 
> 时间：2012-10-26T17:06:32.790
> 
> 标签：integration, esb, integration-patterns

我们有一个遗留系统，它生成的文件每个都包含数百条消息（金融交易）。我们需要将这些消息转换为另一种格式并（单独）将它们提交到目标系统。问题是：ESB 是否应该直接接受这些文件进行处理，或者是否应该在遗留系统和 ESB 之间存在一个适配器应用程序，它将接收到的文件拆分为单独的消息并让 ESB 单独处理消息（而不是处理整个文件)?

在第一个解决方案中，我们期望两个 ESB 流。第一个将文件转换为新格式，将其拆分为消息，并将这些消息存储到临时位置。转换需要将文件作为一个整体进行处理，因为该文件包含转换单个消息所需的一些公共部分。第二个流程将获取单独的转换消息（每个都在一个单独的 DB 事务中），将它们传递给目标系统，并等待它的答案（同步或异步）。

第二种解决方案将用一个外部应用程序替换第一个流，该应用程序将转换文件，将其拆分为单独的转换消息，并将它们存储在临时位置（本地文件系统）。第二个流将保留在 ESB 中。

在我们看来，第一种解决方案的缺点在于 ESB 必须处理大文件（在第一个流程中），这通常被认为是一种反模式。另一方面，ESB 会直接适应遗留系统的接口，这是 ESB 的目的之一。

在第二种解决方案中，适配器应用程序将包含转换逻辑，这应该是 ESB 的另一个目的和职责。

对于这种情况（模式），通常建议的解决方案是什么？您能否提供一些比我找到的这两个链接更具描述性的参考资料？

[http://publib.boulder.ibm.com/infocenter/esbsoa/wesbv7r5/index.jsp?topic=%2Fcom.ibm.websphere.wesb.programming.doc%2Ftopics%2Fesbprog_patterns.html](http://publib.boulder.ibm.com/infocenter/esbsoa/wesbv7r5/index.jsp?topic=%2Fcom.ibm.websphere.wesb.programming.doc%2Ftopics%2Fesbprog_patterns.html)

[https://www.ibm.com/developerworks/wikis/display/esbpatterns/File+Processing](https://www.ibm.com/developerworks/wikis/display/esbpatterns/File+Processing)

**编辑** 另一个参考： [http ://www.ibm.com/developerworks/webservices/library/ws-largemessaging/](http://www.ibm.com/developerworks/webservices/library/ws-largemessaging/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:35:38.910

请记住，SOA 中有 3 种消息类型：命令、事件、文档

该“文档”位用于数据块。它可能更适合“订单”或“发票”等“真实”文档类型，但没有什么能阻止您使用“TransactionBatch”。

话虽如此，它是一种相当未使用的消息类型，因为实际上并没有多少服务总线围绕它实现任何东西，因为：

*   你真的不需要它
*   许多消息队列技术对消息大小有限制（低至 4kb），因此难以传输任何大消息（需要分块发送）

所以我在你的场景中要做的是有一个处理文件的端点。因此，类似于`ProcessTransactionFileCommand`发送到处理端点的内容，在其中您只有对实际文件的引用（存储在文件系统中的某处，甚至是要从中下载的 url）。该处理端点可以处理文件并将单个消息（全部在事务中）发送到将消息发送到外部系统的集成端点。你可以`SendTransactionCommand`这样做。

通过这种方式，您的系统非常灵活，因为集成端点可以从解决方案的*某些*部分接收单独的集成命令，而处理端点可以处理批处理并将它们拆分为单独的集成命令。

如果您在 .NET 领域，您可能想查看我的 FOSS 服务总线项目：[http ://shuttle.codeplex.com/](http://shuttle.codeplex.com/)

但是任何服务总线都可以解决问题（MassTransit、NServiceBus 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T17:59:33.180

对于第一种情况，您可以使用 ESB，我认为这不是反模式。ESB 的目的还在于将遗留应用程序与其他应用程序集成，这些应用程序在您的用例中创建文件作为输出。

你可以试试骡 ESB。它将允许您使用流式传输（通过文件传输）使用文件，使用称为 DataMapper 的 GUI 将文件的内容映射到所需的输出，最后将这些消息放入 VM 队列中，该队列可以是 ESB 中的持久队列. 此队列是事务性的，因此您可以保证从一个文件创建的所有消息都放在 VM 队列上，或者一个都不放在。然后，您可以从另一个流（实际上在 ESB 中处理的流称为 mule 中的流）读取这些消息中的每一个并处理它们。

HTH，巴勃罗。

# javascript - 拒绝/拒绝后再次询问 HTML5 地理位置

> ID：13091316
> 
> 赞同：8
> 
> 时间：2012-10-26T17:06:36.817
> 
> 标签：javascript, html, geolocation

如果用户拒绝对其位置的 HTML5 地理定位请求，有没有办法再次询问他们/再次触发权限请求？

我认为这可能只是清除特定 cookie 的情况，但看起来这是一个您必须专门进入并从浏览器首选项中删除的设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-15T23:21:33.913

您必须从另一个域请求位置，或者提供有关如何进入其浏览器并更改其设置的说明。就像在 iPhone 上，如果您不小心拒绝了权限，您必须如何进入设置。

这是因为权限请求实际上是在每个浏览器的基础上实现的。你可以想象，如果地理定位在 IE6 天左右，IE6 会自动始终接受。您的解决方案必须根据某人正在使用的浏览器执行。

# php - PHP：如何清理离开 UTF-8（俄语、土耳其语、英语）的用户输入？

> ID：13091317
> 
> 赞同：1
> 
> 时间：2012-10-26T17:06:38.383
> 
> 标签：php, regex, user-input, input-sanitization

干净的用户提交了意外或故意垃圾的输入。我写了以下内容来做到这一点，并且有兴趣看到针对同一问题的更有效或更好的解决方案。 *注意：我在 mysql 方面使用了**mysqli 准备好的语句。***

**第一种情况：** 用户应该能够输入UTF-8（*只需要俄语、土耳其语、英语*）字符和'_'，*（这是为了清除用户输入的'用户名'）*。

输入：

```
$lang1 = " \  $:;/<ŞĞğş43\24234şğ_Ğüğsdç<a> #$#@!@^%*&^( <b></b>";
$lang2 = "еукд $ :;363 леВАЛДЖЫу-_жлаывф<em>вфы34234</em>вфывф#@!@^%*&^(&*)(()&^@#!~";
$lang3 = "dasda$RWERs636  da<b>asd_45646asd<em>"; 
```

为了清理这些我写了这个简单的函数

```
function clean($s = '')
{
  $c = mb_strtolower((trim($s)), 'UTF-8');
  $c = preg_replace ( '/[^0-9\p{Cyrillic}\p{Ll}\w]/u', '', $c); 
  $c = htmlentities(strip_tags($c), ENT_QUOTES, 'UTF-8');
  return $c;
} 
```

它返回我需要的东西；

```
şğğş4334şğ_ğüğsdçabb
еукд363левалджыу_жлаывфemвфы34234emвфывф
dasdadabasd_45646asdem 
```

**第二种情况：**只允许使用英文字符，应删除无效字符和其他 UTF-8 字符。（这是为了清理用户输入的“电子邮件”）

输入：

```
$email1 = "dasda @:;/<ŞĞğ  ВАЛДЖЫуda<b>asd_45646asd<em>.com";
$email2 = "^%(#*$#)$&(237469879şşşdsasadsdasd/||\><? ВАЛДЖЫуda<b>asd_45646asd<em> .com";
$email3 = "t est i @coЬm.tr";
$email4 = "&/(/&^+'!+!^+<em>test@com.kz()(  РЛОкуц <em> ";
$email5 = "++ ?ЕНГКУ   teЛОДКУst@mail.уцкru...";
$email6 = " ?ЕНГКУ   teЛОДКУst@.уцкua";
$email7 = " ++ fake.some--one+tag@gmail.com++"; 
```

由于这部分是用于电子邮件的，并且应该只接受英文字符，所以我编写了以下函数来清理和验证；

```
function clean_email($s = '')
{
  $c = mb_strtolower((trim($s)), 'UTF-8');
  $c = filter_var(strip_tags($c), FILTER_SANITIZE_EMAIL);
  $c = preg_replace ('/(?i)[^a-z\.@_\-\+\d]|[.@]{2,}/u', '', $c);
  $c = preg_replace ( '/^[+.-@]{1,}|[+.-@]{1,}$/u', '', $c);
  return $c;
}       

function valid ($v = '') 
{      
  if (filter_var($v, FILTER_VALIDATE_EMAIL) == TRUE) {return 'valid';} else {return 'false';}
} 
```

通过以下方式调用时：

```
echo clean_email($email1).' : '.valid(clean_email($email1)).'<br/>'; 
```

返回我需要的东西

```
dasda : false
dsasadsdasd : false
testi@com.tr : valid
test@com.kz : valid
test@mail.ru : valid
testua : false
fake.some--one+tag@gmail.com : valid 
```

ps

- 我不需要在此电子邮件输入字段中完全符合 UTF-8 / RFC，也不需要包含所有可能包含在电子邮件中的特殊字符。我更喜欢限制更多，并在最初的问题中说明需要什么以及函数的作用。这里的想法更多的是摆脱错误输入的字符而不是验证电子邮件，在一个在线站点中，我宁愿不更正任何东西，而只是抛出一个错误。

- 更新了干净电子邮件功能中的正则表达式以包含 + 和 - 字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:38:17.590

[https://code.google.com/p/owasp-esapi-php/](https://code.google.com/p/owasp-esapi-php/)

> 不要编写自己的安全控制！在为每个 Web 应用程序或 Web 服务开发安全控制时重新发明轮子会导致时间浪费和大量安全漏洞。OWASP 企业安全 API (ESAPI) 工具包可帮助软件开发人员防范与安全相关的设计和实施缺陷。

```
$email1 = 'fake.someone+tag@gmail.com'; // this is perfectly valid email
echo clean_email($email1).' : '.valid(clean_email($email1));
// outputs: fake.someonetag@gmail.com : valid
// and you'll be emailing the wrong person. 
```

# mysql - mysql , codeigniter 中线程安全保留 ID 的最佳实践

> ID：13091318
> 
> 赞同：0
> 
> 时间：2012-10-26T17:06:42.887
> 
> 标签：mysql, codeigniter

我正在用模态窗口形式制作一个杂物。这个窗口是标签的。每个选项卡都是与第一个选项卡 X 呈 1-n 关系的相关表。

我需要保留 X 选项卡的 id 来用 FK 填充这些 1-n 表，在我完成这些表的填充后，我确认 X 选项卡上的记录。

我担心有一些安全问题：

1）当用户A在选项卡X中创建新行时，正在填写表格，用户B可以查看X选项卡，B用户可以看到并删除一个空行。我想我必须隐藏“空”行。

2）用户A填写表格，同时停电，f5，崩溃，互联网关闭。我不想要horpans。我对此有一些丑陋的想法，例如夜间删除或时间戳。

我怎样才能避免这些？这些问题有什么最佳实践吗？

将 mysql 与 autoincrement + codeigniter 一起使用。

# iphone - iAd 警告信息

> ID：13091320
> 
> 赞同：0
> 
> 时间：2012-10-26T17:06:44.697
> 
> 标签：iphone, objective-c

我已经实现了以下代码

```
-(void)initializeiAd
    {

        ADBannerView *bannerView = [[ADBannerView alloc] init];
        bannerView.delegate = self;
        bannerView.frame = CGRectMake(0, 0, bannerView.frame.size.width, bannerView.frame.size.height);
        [self addSubview:bannerView];

    } 
```

我很好地看到了横幅，但我收到错误消息警告横幅视图 (0x8560e20) 有广告但可能被遮挡。此消息仅在每个横幅视图中打印一次。

我想知道为什么。有任何想法吗？我在这里看了一些知识库，但没有人解释，我的视图是另一个视图的子视图，我看到屏幕上的广告横幅，测试运行正常。我应该忽略这样的消息吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:23:28.160

广告横幅具有您应该使用的预定尺寸限制。试试这个：

```
bannerView.currentContentSizeIdentifier = ADBannerContentSizeIdentifier320x50;    

bannerView.frame = CGRectOffset(bannerView.frame, 0, 0); 
```

# jquery - 使用 .not() 和 .click() 来忽略类

> ID：13091321
> 
> 赞同：1
> 
> 时间：2012-10-26T17:06:48.420
> 
> 标签：jquery

我有一个表格，每行都有一个复选框。我想做一个 .click 函数，当我单击 tr 上除复选框之外的任何位置时会发生该函数。

行有 class="message"，包含复选框的 td 有 class="ignore_checkbox"。

这是我的 jquery/js：

```
$('.message').not('.ignore_checkbox').click(respondToMessage); 
```

但是当我单击复选框时，它仍然会调用 respondToMessage 函数。有任何想法吗？

```
<?php foreach ($accountMessages as $accountMessage): ?>
<tr class="message overview">
    <td class="ignore_checkbox" ><?php echo $this->Form->checkbox(
        'AccountMessages.'.$accountMessage['AccountMessage']['id'], 
        array('value' => $accountMessage['AccountMessage']['id'],
        'hiddenField' => false,
        'multiple' => true)); ?>
    </td>
    <td>
        <strong><?php echo h($accountMessage['Account']['email']);?></strong><br/>
        <span class="message_time"><?php echo $this->Time-                      TimeAgoInWords($accountMessage['AccountMessage']['created'], array('format' => 'F jS, Y', 'end' => '+1 year') )?></span>
        <?php echo h($accountMessage['AccountMessage']['title']); ?><br/>
        <?php echo h($accountMessage['AccountMessage']['message']); ?>

    </td>
</tr>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:12:29.427

只需将其添加`td`到您现有的规则中，例如：

```
$('.message td').not('.ignore_checkbox').click(respondToMessage); 
```

您使用的想法`.not()`有效，但它仅适用于匹配元素。由于您的规则从表格 row 开始`<tr>`，因此`.not()`不匹配任何内容。通过在表格单元格上进行匹配，`<td>`它可以正常工作。

这是一个快速的**[jsFiddle 示例](http://jsfiddle.net/j08691/MrT48/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:09:19.257

您应该`e.stopPropagation`在包含 td 的复选框上执行一个操作，因为单击 td 会将事件冒泡到`TR`

```
$('.ignore_checkbox').click (function (e) {
   e.stopPropagation();
}); 
```

或者您可以`.message`像在其他答案中一样在处理程序中处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:09:17.163

试试这个

$('.message').on('点击', function(e) {

```
if( e.target.className.indexOf('ignore_checkbox') > -1 
     || e.target.type == 'checkbox'){
       // do Nothing
 }
else{
     alert('Not checkbox');
} 
```

});​</p>

**[检查小提琴](http://jsfiddle.net/sushanth009/7QwHm/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T17:10:51.487

```
$('.message').click(function(event) {

    if ( ! $(event.target).hasClass('ignore_checkbox') )
    {
        respondToMessage();
    }
}); 
```

与往常一样，我建议只对元素使用一个事件侦听器，该事件侦听器将能够侦听它包含的每一行的点击事件。通过这种方式，您可以节省资源并且只需要一个事件侦听器即可完成所有操作。

[在这里检查小提琴。](http://jsfiddle.net/u7Juu/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T17:11:48.147

尝试使用事件冒泡。

```
$('.message').on('click', ':not(.ignore_checkbox)', function(event) {
// enter code here
}); 
```

# c# - 删除图像问题

> ID：13091322
> 
> 赞同：0
> 
> 时间：2012-10-26T17:06:50.440
> 
> 标签：c#, .net, wpf

> **可能重复：**
> [创建 BitmapImage 后 C# 4.0 解锁图像](https://stackoverflow.com/questions/5116260/c-sharp-4-0-unlock-image-after-creating-bitmapimage)

我有这段代码可以在 WPF 中创建一个图像文件。

```
var newimage = new System.Windows.Controls.Image
{
    Stretch = Stretch.Fill,
    StretchDirection = StretchDirection.Both,
    Width = Width,
    Height = Height
};

var logo2 = new BitmapImage();
logo2.BeginInit();
logo2.UriSource = uri;
logo2.EndInit();
newimage.Source = logo2; 
```

在此之后，某些进程必须删除 ol 文件并创建一个新文件，但我遇到了错误

> “无法删除文件，因为它正被另一个进程使用”

我应该怎么做才能解决这个问题？

谢谢！

* * *

**附言**

我使用这个删除文件：

```
try
{
    if (File.Exists(fileName))
    {
        File.Delete(fileName);
        Debug.WriteLine("FILE MANAGER: File " + fileName + " has been deleted.");
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:29:25.133

您将需要使用：

```
var logo2 = new BitmapImage();
logo2.BeginInit();
logo2.CacheOption = BitmapCacheOption.OnLoad;
logo2.UriSource = uri;
logo2.EndInit(); 
```

# c++ - 如何对对象使用自由函数

> ID：13091327
> 
> 赞同：1
> 
> 时间：2012-10-26T17:07:14.207
> 
> 标签：c++

我试图找出/了解您如何使用免费函数访问对象的数据。

所以我的免费功能看起来像这样（无论如何标题）：

```
#ifndef CDSUPPORTFUN_H
#define CDSUPPORTFUN_H

void DisplayCDS(CDX *pCD1, CDX *pCD2, CDX *pCD3);
void ShowCosts(CDX &CD1, CDX &CD2, CDX &CD3);
void MemoryReturn(CDX *pCD1, CDX *pCD2,CDX *pCD3);
#endif 
```

然后我有每个人的实现。我的问题是，我究竟应该在 Main.cpp 中输入什么来访问这些功能？当我调用它们时，我必须在 Main.cpp 中传递哪些信息？

例如，当我使用：

```
DisplayCDS(pCD1, pCD2, pCD3); 
```

我的数据按预期显示。但是，这仍然通过指针传递吗？如果我通过我的参考，它应该是什么样子？

--

编辑：由于 ShowCosts 是通过引用传递的，因此检索它的适当语法是：

```
CD1.ReturnCosts(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:11:27.317

如果`pCD1`etc 是指针，`ShowCosts(*pCD1, *pCD2, *pCD3);`则将传递引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:15:10.527

> 我的问题是，我究竟应该在 Main.cpp 中输入什么来访问这些功能？当我调用它们时，我必须在 Main.cpp 中传递哪些信息？

首先，您必须包含声明它们的标题：（`#include "cdssupportfun.h"`或类似的）。其次，您需要传递函数签名中指定的参数：`CDX*`是指向 a 的指针，`CDX`这`CDX&`意味着它需要一个可以通过非`const`引用传递的对象 - 所以基本上是一个非临时的非`const` `CDX`对象。

```
DisplayCDS(pCD1, pCD2, pCD3); 
```

有作为参数的指针`pCD1`。要通过引用传递，您可以例如调用：

```
ShowCosts(*pCD1, *pCD2, *pCD3); 
```

它取消引用指针，并通过引用传递它们指向的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:49:39.977

为了清楚起见，有两种方法可以通过引用传递。您可以传递指向对象实例的指针。或者您将实际对象传递给函数，并让函数创建对这些对象的引用。使用指针通过引用（您拥有它的方式）：

将您的功能定义为：

```
void DisplayCDS(CDX *pCD1); 
```

在您的 Main 中，将其称为：

```
CDX* pCD1;
*pCD1 = something;
DisplayCDS(pCD1); 
```

或者，如果您不喜欢指针，您可以定义您的函数以获取引用并将实际对象而不是指针传递给它。去做这个：

将您的功能定义为：

```
void DisplayCDS(CDX& CD1); 
```

在您的 Main 中，将其称为：

```
CDX CD1;
CD1 = something;
DisplayCDS(CD1); 
```

这两种语法完成了同样的事情。您已经传递了对您的函数的引用并且没有复制该对象。请注意，您现在在函数中使用 pCD1 或 CD1 的方式会有所不同。如果使用指针，则必须将 pCD1 用作：

```
pCD1->CD1MemberVar = blah; 
```

或者

```
*pCD1.CD1MemberVar = blah; 
```

如果您使用第二种语法，您将能够像往常一样在函数中使用该对象：

```
CD1.CD1MemberVar = blah; 
```

只是为了进一步演示指针的工作原理，您还可以使用这种方法，它是前两种方法的组合，并且不必要地令人困惑。

将您的功能定义为

```
DisplayCDS(CDX& CD1); 
```

在主要：

```
CDX* CD1;
*CD1 = something;
DisplayCDS(*CD1); 
```

所有这些示例都应该有效...我更喜欢使用 CDX& 语法来避免到处使用 *。和->的。

编辑：正如评论中指出的那样，传递指针在技术上并不是“通过引用传递”。它正在传递一个指向内存中对象的对象（指针）。

# c++ - 使用野指针时在给定位置执行失败的原因，而不是更早？

> ID：13091329
> 
> 赞同：1
> 
> 时间：2012-10-26T17:07:18.867
> 
> 标签：c++, pointers

> **可能重复：**
> [何时在空实例上调用成员函数会导致未定义的行为？](https://stackoverflow.com/questions/2474018/when-does-invoking-a-member-function-on-a-null-instance-result-in-undefined-beha)

[这个问题](https://stackoverflow.com/questions/13090894/c-struct-on-class#13091086)中的人未能使用“new”创建指向对象的指针，然后使用这个野指针调用对象上的成员函数。

访问成员变量时程序失败 (at `myPoint[i].x = xData;`)。

为什么它在那个位置失败而不是更早？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:09:28.617

`this`有问题的行是引用的第一个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:54:55.593

那么为何不？标准说这个程序有未定义的行为，但在 C++ 中，我们在一个类中有 3 种函数：

```
// 1) static functions
class test {
public:
    static void foo( int n );
}; 
```

在这个例子`foo`中就像一个具有相同签名的全局函数，但是 C++ 有不同的访问检查规则和它的名称。

```
// 2) normal member functions
class test {
public:
    void foo( int n );
}; 
```

在几乎所有编译器中，此函数与带有签名的自由函数相同，除非您在函数中访问在这种情况下函数可能会产生分段错误或更糟糕的是，更改一些意外点，否则`void foo(foo* this, int n)`使用无效调用此函数并不是错误你的记忆。`this``this`

```
// 3) virtual functions
class test {
public:
    virtual void foo( int n );
}; 
```

在这种情况下`class test`，包含一个额外的不可见成员，该成员通常被调用`vtable`并包含一个指向`virtual`类的每个函数的实现的指针，并且使用这种技术 C++ 可以在运行时进行后期绑定，所以在这种情况下，当你调用`foo`编译器时，编写类似

```
this->vtable[foo_index]( this, n ); 
```

所以在这种情况下，无效`this`会立即显示出来，并且可能会产生诸如分段错误或无效指令之类的错误，因为您`this`是在调用点访问的。因此，正如您在几乎所有实现中看到的那样，您可以拥有一个通过无效`this`指针调用的成员函数并且永远不会产生任何错误（如果您从未`this`在函数中访问），但它不能是`virtual`.

**但是请记住上面解释的内容完全取决于您的编译器，但几乎所有编译器都像上面那样实现它**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T18:19:21.720

您应该阅读有关[未定义行为](http://blog.llvm.org/2011/05/what-every-c-programmer-should-know_14.html)的更多信息并以示例为基础：

```
struct A { A(int i): _i(i) {} void print() const { printf("%d", _i); } int _i; };

void function(A* a) {
    if (a == 0) { printf("%s", "A is null!"); }
    a->print();
} 
```

你期待`function(0);`什么？

好吧，您似乎期望它`A is null!`会被打印出来，然后程序会崩溃，对吗？也许……也许不是。

编译器实际上可能会这样进行：

*   `a->print();`:`a`不能在`null`这里，否则这个语句没有意义
*   `a == 0`因此总是`false`
*   该函数可以重写为`void function(A* a) { a->print(); }`

然后，在一个普通的 Linux 平台上，你会得到你的崩溃（SEGFAULT），但没有任何消息......根本！

这就是未定义行为对优化的影响：您的程序运行得更快，但在最轻微的错误中以深不可测的方式死亡。

# html - 在 CSS 水平下拉菜单中悬停时添加边框底部：1px 实线 #FFF 到索引（仅限顶部菜单）

> ID：13091332
> 
> 赞同：1
> 
> 时间：2012-10-26T17:07:27.133
> 
> 标签：html, css

我似乎不知道如何在悬停时向所有顶部菜单（索引）项添加边框底部：1px 实心#FFF？

```
#menu{
    padding:0;
    margin:0;
    position: fixed;
    top: 30px;
    left: 0px;
    font-size: 8pt;
}
#menu ul{
    padding:0;
    margin:0;
}
#menu li{
    position: relative;
    float: left;
    list-style: none;
    margin: 0;
    padding:0;
} 

#menu li a{
    width:120px;
    height: 20px;
    display: block;
    text-decoration:none;
    line-height: 20px;
    background-color: #A9BBD3;
    color: #FFF;
} 

#menu li a:hover{
    background-color: #446087;
} 
#menu ul ul{
    position: absolute;
    top: 20px;
    visibility: hidden;
}
#menu ul ul li a {
    width: 115px;
    padding-left: 5px;
}
#menu ul li:hover ul{
    visibility:visible;
}
#menu > ul > li > a {
    text-align:center;
}
<div id="menu">
<ul>
<li><a href="#nogo">File</a>
<ul>
<li><a href="#nogo">Save</a></li>
<li><a href="#nogo">Link 1-2</a></li>
<li><a href="#nogo">Link 1-3</a></li>
</ul>
</li>
<li><a href="#nogo">Edit</a>
<ul>
<li><a href="#nogo">Add</a></li>
<li><a href="#nogo">Delete</a></li>
</ul>
</li>
<li><a href="#nogo">Reports</a>
<ul>
<li><a href="#nogo">Link 3-1</a></li>
<li><a href="#nogo">Link 3-2</a></li>
<li><a href="#nogo">Link 3-3</a></li>
</ul>
</li>
</ul>
<ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:21:08.860

使用 css[子选择器](http://www.w3.org/TR/CSS2/selector.html#child-selectors)仅获取第一个：

```
/* NEW: This is the new style rule. */
#menu > ul > li > a:hover {
    border-bottom: 1px solid #FFF;
} 
#menu ul ul {
    position: absolute;
    top: 21px; /* <------ Had to add a pixel */
    visibility: hidden;
} 
```

演示： http: [//jsbin.com/aciceg/1/](http://jsbin.com/aciceg/1/)
来源：http: [//jsbin.com/aciceg/1/edit](http://jsbin.com/aciceg/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:19:56.160

```
#menu ul ul{
    position: absolute;
    top: 21px;
    visibility: hidden;
} 
```

将此顶部更改为 21 像素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T17:22:33.747

要将边框*仅*放在顶级元素上，请使用直接后代选择器来制定此规则：

`#menu > ul > li > a:hover { border-bottom: 1px solid #fff; }`

然后，为了使您的新边框可见，并且不被子菜单覆盖，请将子菜单向下移动一个像素：更改`top: 20px`为`top: 21px`in `#menu ul ul`。

# javascript - console.log 是常规对象吗？

> ID：13091335
> 
> 赞同：4
> 
> 时间：2012-10-26T17:07:44.563
> 
> 标签：javascript, console.log

> **可能重复：**
> [如果 Javascript 具有一流的功能，为什么这不起作用？](https://stackoverflow.com/questions/8773579/if-javascript-has-first-class-functions-why-doesnt-this-work)

在 Chrome 中，以下会产生*Uncaught TypeError: Illegal invocation*：

```
g = console.log;
g(1); 
```

为什么会发生这种情况，为什么我不能`console.log`像对待普通对象一样对待？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T17:09:47.523

发生这种情况是因为您丢失了对`console`. 你只是`log`直接打电话，没有上下文。您可以在 的上下文中调用该函数`console`以使其工作：

```
g.call(console, 1); 
```

或者，为了避免每次都这样做，您可以将函数绑定回`console`对象：

```
var g = console.log.bind(console); 
```

**参考资料**：

*   [`Function.prototype.call`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)
*   [`Function.prototype.apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)（此处未使用，但仍然感兴趣）
*   [`Function.prototype.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

# ios - CoreText 和右对齐

> ID：13091336
> 
> 赞同：1
> 
> 时间：2012-10-26T17:07:44.513
> 
> 标签：ios, core-text

我正在编写一个生成 PDF 的类，我将在完成时发布！

我无法使用 CTParagraphStyle 将文本向右对齐，文本始终在左侧。怎么可能？我错了什么？

```
- (void)addText:(NSString *)text color:(UIColor *)color fontSize:(CGFloat)size floating:(BOOL)floating {
CGContextSaveGState(pdfContext);

// Prepare font
CTFontRef font = CTFontCreateWithName(CFSTR("Verdana"), size, NULL);

// Font color
CGColorRef fontColor = [color CGColor];

// Paragraph
CTTextAlignment alignment = kCTRightTextAlignment;

CTParagraphStyleSetting settings[] = {
    {kCTParagraphStyleSpecifierAlignment, sizeof(alignment), &alignment}
};

CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(settings, sizeof(settings) / sizeof(settings[0]));

// Create an attributed string
CFStringRef keys[] = { kCTFontAttributeName , kCTParagraphStyleAttributeName, kCTForegroundColorAttributeName};
CFTypeRef values[] = { font, paragraphStyle, fontColor};
CFDictionaryRef attr = CFDictionaryCreate(NULL, (const void **)&keys, (const void **)&values,
                                          sizeof(keys) / sizeof(keys[0]), &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);
CFAttributedStringRef attrString = CFAttributedStringCreate(NULL, (CFStringRef)text, attr);

CFRelease(paragraphStyle);
CFRelease(attr);

// Draw the string
CTLineRef line = CTLineCreateWithAttributedString(attrString);

CGContextSetTextPosition(pdfContext, xPadding, [self relativeHeight:currentHeight+size]);

CTLineDraw(line, pdfContext);

// Clean up
CFRelease(line);
CFRelease(attrString);
CFRelease(font);

CGContextRestoreGState(pdfContext);

if(floating == NO) {
    currentHeight += size;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:32:13.537

删除`CTLineDraw()`及其相关代码并使用`CTFrameDraw()`.

尝试这个：

```
// Create the Core Text framesetter using the attributed string.
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((CFAttributedStringRef)attrString);

// Create the Core Text frame using our current view rect bounds.
UIBezierPath *path = [UIBezierPath bezierPathWithRect:self.bounds];
CTFrameRef frame =  CTFramesetterCreateFrame(framesetter, CFRangeMake(0, 0), [path CGPath], NULL);
CTFrameDraw(frame, pdfContext); 
```

# facebook - 应用详细信息提交被拒绝“...删除此集成作为开发应用中列出的平台。”

> ID：13091337
> 
> 赞同：0
> 
> 时间：2012-10-26T17:07:51.397
> 
> 标签：facebook

我在 Facebook 上提交了我的应用程序详细信息，并收到了以下通知：

> 您的应用程序的主要功能不在画布上。请选择在画布上托管您的应用程序或将此集成删除为开发应用程序中列出的平台。

这是指什么集成平台？是`App on Facebook`我在基本应用详细信息页面上检查的集成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:55:11.787

要检查您的设置，请访问[http://developers.facebook.com](http://developers.facebook.com)，单击顶部蓝色菜单中的“应用程序”，在左侧导航中单击您的应用程序，然后单击“设置”部分中的“编辑设置”。向下滚动到“选择您的应用如何与 Facebook 集成”部分。

如果您选择了画布，“Facebook 上的应用”旁边会出现一个绿色复选框。除非您实际构建 Canvas 应用程序，否则请确保未选择“Facebook 上的应用程序”。

什么是画布应用程序？有关更多信息，请参阅有关 Canvas 应用程序的 Facebook 文档：[https ://developers.facebook.com/docs/guides/canvas/](https://developers.facebook.com/docs/guides/canvas/)

# c# - Automapper 将多个 dto 映射到同一个模型

> ID：13091338
> 
> 赞同：2
> 
> 时间：2012-10-26T17:07:55.387
> 
> 标签：c#, automapper, dto

我有一个模型，它是我的基础模型，其中包含许多字段。然后我有 4 个 DTO，它们是该模型的一部分。我想最终将它们全部映射到模型，但每次映射它都会覆盖以前的映射。

例如

```
_model = new GenericModel();
_model.ExampleNotInDTO = "This Gets Overwritten being set previously";

//First Mapping below overwrites the property I set above and 
// sets only the fields in the business dto.
Mapper.CreateMap<BusinessDto, GenericModel>();
_model = Mapper.Map<BusinessDto, GenericModel>(searchResultsQuery.BusinessDto);

//Now doing another mapping just below it nulls out all the previous 
// stuff and only fills in the events dto.
Mapper.CreateMap<EventsDto, GenericModel>();
_model = Mapper.Map<EventsDto, GenericModel>(searchResultsQuery.EventsDto); 
```

将我的所有 4 个 dto（例如上面只有 2 个）放入同一个 _model 对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:32:56.993

每次调用时，您都要求 AutoMapper 创建一个新对象`Map`。您可以手动创建对象并使用`Map<TSource, TDestination>(TSource source, TDestination destination)`它来做您想做的事情。例如：

```
Mapper.Map<BusinessDto, GenericModel>(searchResultsQuery.BusinessDto, _model); 
```

或者

```
Mapper.Map(searchResultsQuery.BusinessDto, _model); 
```

# c# - 要分配图片的类？

> ID：13091342
> 
> 赞同：0
> 
> 时间：2012-10-26T17:08:05.130
> 
> 标签：c#, class, user-interface, picturebox

所以现在我有一个我昨晚正在工作的 GUI 程序，它几乎完成了，尽管会进行一些图形更改。但我想知道是否可以显示基于类的图片。喜欢，

```
Employee John = New Employee("John", "Doe") 
```

我将如何使它与 John Doe 的脸一起显示？我使用图片框还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:12:10.000

当然，有很多方法可以做到这一点，但您可能决定存储一些对您要使用的图像的引用。也许你会在你的 Employee 类中通过保持它的路径来做到这一点，如下所示：

```
public class Employee
{
   public string Picture { get; set; }
   // ..
} 
```

然后你可以加载它，假设它是一条路径

```
pictureBox1.Load(employee.Picture); 
```

另一种方法是将实际图像保存在 Employee 对象本身中，如下所示：

```
public class Employee
{
   public Image Picture { get; set; }
   // ..
} 
```

并提前加载它们。取决于您的员工集合中有多少。

假设它们已经作为`Image`对象加载到员工中，您只是在调用

```
pictureBox1.Image = employee.Picture; 
```

# php - 检查用户是否登录的替代方法

> ID：13091343
> 
> 赞同：1
> 
> 时间：2012-10-26T17:08:08.447
> 
> 标签：php, html, logging, login, timestamp

我正在使用 mysql 检查用户是否登录，但我收到了来自托管公司的电子邮件，说我已经超出了 mysql 查询限制，将 mysql 查询限制升级到每小时 150000 的成本是 240 美元/年.

现在，我需要另一种方法来检查用户是否登录，例如将用户的时间戳写入文件，但我不知道最好的方法......而且我什至不知道哪些标签我把这个帖子...

那么，你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T17:09:00.767

使用`$_SESSION`. 它的效率提高了 1000 倍，专为此目的而设计。[在这里阅读](http://php.net/manual/en/book.session.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:10:52.647

升级（或从成本角度降级）到根服务器和/或使用更好的机制来存储会话。即memcache、couchdb 或mongodb。

在任何情况下，如果您离开 PHP 的会话处理程序，您都必须手动处理信号量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:15:45.360

您的主机有 mysql 查询限制，这很奇怪，但回到您的问题；

我猜你不只是想查看用户是否在本地登录，而是让另一个帐户看到用户已登录，这需要数据库调用，而不是 $_SESSION （维护以每个用户为基础）。

但是，如果我们假设您希望在数据库之外执行此操作，您可以在用户登录或注销时生成最终的 HTML 结果。在数据库中保留一个包含用户状态的表，但是每当用户登录或退出时，对该表进行一次查询，并生成例如您的登录用户的 HTML 列表。将输出保存到文件中，当您需要呈现页面时，包含该文件而不是进行数据库调用。

它并没有完全删除 MySQL 数据库，但它相当可靠，并且应该会显着减少数据库查询的数量。

# php - POST 未发送 base64 编码图像

> ID：13091355
> 
> 赞同：0
> 
> 时间：2012-10-26T17:08:46.637
> 
> 标签：php, javascript, base64

我有几个用`html5`. 当图像被解析并转换为数据（并在 中编码`base64`）时，我抓取该数据并通过 post 发送到 php 文件。

在 localhost 上，该`base64`字符串在 php 文件中被完美接收。但是，当我移动到服务器时，图像预处理和`base64`发送到服务器都工作（我读取了标题），但是当在 php 文件中时，该`base64`字符串不再存在。有什么我想念的吗？

一些额外的信息：

*   我不对字符串进行 url 编码，因为如果不这样做，它会在本地工作，并且这样做服务器仍然无法获取`base64`数据。
*   我还没有超过`post_max_size`（`8M`在我的情况下，`base64`字符串加上其他数据权重`50kb`）

### 爆炸新闻

我试图上传 600kb 的数据。现在服务器提示：

```
<html><head>
<title>413 Request Entity Too Large</title>
</head><body>
<h1>Request Entity Too Large</h1>
The requested resource<br />/altmail/admin/calls/ajax.previewnewsletter.php<br />
does not allow request data with POST requests, or the amount of data provided in
the request exceeds the capacity limit.
</body></html> 
```

再次，`post_max_size`足够大。

### 突发新闻 2

上传相反的，一张 38x38，220bytes 的图片后，它上传正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T18:27:26.953

检查 Apache 请求大小限制：

[http://httpd.apache.org/docs/2.2/mod/core.html#LimitRequestFieldSize](http://httpd.apache.org/docs/2.2/mod/core.html#LimitRequestFieldSize)

涉及到 HTTP 的所有内容的大小都有限制，因此，如果某些东西在这里而不是那里有效，请增加那里的大小。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:15:11.700

您要将**base64**数据保存到文件中吗？如果是这样，可能该文件夹未标记为**"WRITE"**，请检查。

您正在使用`$_POST`或正在使用本地主机中的全局变量。如果您使用**全局**更改为`$_POST`.

如果您使用的是 RAW，请使用如下变量： `$_GLOBALS['HTTP_RAW_POST_DATA']`

# python - Python 全局/局部变量

> ID：13091357
> 
> 赞同：10
> 
> 时间：2012-10-26T17:08:49.067
> 
> 标签：python, global-variables, local-variables

为什么此代码有效：

```
var = 0

def func(num):
    print num
    var = 1
    if num != 0:
        func(num-1)

func(10) 
```

但是这个给出了一个“赋值前引用的局部变量'var'”错误：

```
var = 0

def func(num):
    print num
    var = var
    if num != 0:
        func(num-1)

func(10) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T17:10:55.583

因为在第一个代码中，您创建了一个局部变量`var`并使用了它的值，而在第二个代码中，您使用的是局部变量`var`，但没有定义它。

所以，如果你想让你的第二个函数工作，你需要声明： -

```
global var 
```

在使用之前的函数中`var`。

```
def func(num):
    print num
    var = 1  <--  # You create a local variable
    if num != 0:
        func(num-1) 
```

而在这段代码中：

```
def func(num):
    print num
    var = var <--- # You are using the local variable on RHS without defining it
    if num != 0:
        func(num-1) 
```

**更新**： -

但是，根据@Tim 的评论，您不应该`global`在函数中使用变量。而是在使用它之前定义您的变量，以便在`local scope`. 一般来说，你应该尝试将`limit`你的变量的作用域`local`，甚至在`local`命名空间`limit`中的局部变量的作用域，因为这样你的代码会更容易理解。

您增加变量的范围越多，外部源使用它的机会就越大，不需要使用它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T17:11:21.497

如果您`var = ...`在函数中有任何位置，则名称“var”将被视为整个函数的局部变量，无论该赋值发生在何处。这意味着`var`您的函数中所有出现的 都将在本地范围内解决，因此右侧`var = var`导致引用之前的赋值错误，因为`var`尚未在函数的范围内初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:36:26.017

您可以在不声明全局的情况下读取全局。但是要编写一个全局变量，您需要将其声明为全局变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-25T06:32:32.783

在您的第二段代码中，您在 RHS 中创建了一个局部变量，并且没有定义它，而是将其分配给`var`全局的 LHS 变量（在函数外部定义的变量被认为是显式全局变量）。

如果您的意图是在函数内部创建一个局部变量并将其分配给全局变量的值，则可以这样做：

```
var = 0

def func(num):
    print num
    func.var = var # func.var is referring the local
                   # variable var inside the function func
    if num != 0:
        func(num-1)

func(10) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-01-06T19:26:21.543

```
def runscan(self):
    p = os.popen('LD_PRELOAD=/usr/libv4l/v4l1compat.so zbarcam
                /dev/video0','r')

def input(self):
    self.entryc.insert(END, code) 
```

这个怎么样？我想在下一个函数中使用本地“代码”将条形码的结果插入到我的 Tkinter entryBox 中。谢谢

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-10-26T17:11:06.230

每个功能块都是一个本地范围。如果要分配给全局变量，则需要明确地这样做：

```
var = 0

def func(num):
    print num
    global var
    var = 1
    if num != 0:
        func(num-1)

print var # 0
func(2)
print var # 1 
```

# c# - 将长数字相加作为学习练习

> ID：13091359
> 
> 赞同：1
> 
> 时间：2012-10-26T17:08:54.867
> 
> 标签：c#, math, numbers

我正在尝试为任意大小的数字创建一个类。我想重新定义课堂上的所有操作。如何创建一个`sum(params string[] numbers);`函数来对数字求和？

或者你能给我提供关于这个主题的网站或教程吗？

**我希望我的班级对数字进行运算，例如 50-100 位的数字（实际上，非常大的数字）**

我想过一个函数来对每个字符求和并将总和作为 a 返回`string`，但我不知道如何实现它......

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T17:14:17.160

[`BigInteger`结构](http://msdn.microsoft.com/en-US/library/system.numerics.biginteger%28v=vs.100%29.aspx)呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:15:21.540

使用已经测试过的东西，比如 IntX

[http://intx.codeplex.com/](http://intx.codeplex.com/)

不客气！

# apache-flex - 如何设置弹窗的开合效果动画？

> ID：13091369
> 
> 赞同：0
> 
> 时间：2012-10-26T17:09:35.783
> 
> 标签：apache-flex, flex4, flex-spark

有没有办法使用 PopUpManager 设置弹出窗口的效果（默认效果）？

例如，假设我创建了一个 MXML 组件，并且我希望该组件放大（一半大小）并在 x、y 或 z 轴上旋转 360 度。当我调用 PopUpManager.addPopUp() 或 createPopUp() 时，如何分配此效果来播放？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T05:41:53.703

您必须在弹出和关闭时将效果应用于窗口。

```
private var win:TitleWindow;

private function addWindow():void{  
    win = new TitleWindow();
    win.addEventListener(CloseEvent.CLOSE, onClose);
    PopUpManager.addPopUp(win, this);
    PopUpManager.centerPopUp(win);
    var scale:Scale = new Scale(win);
    ... set scale properties for cool zoom in
    scale.addEventListener(EffectEvent.EFFECT_END, onZoomInComplete);
    scale.play();
}

private function onClose(event:CloseEvent):void{
    var scale:Scale = new Scale(win);
    ... set scale properties for cool zoom out
    scale.addEventListener(EffectEvent.EFFECT_END, onZoomOutComplete);
    scale.play();
}

private function onZoomInComplete(event:EffectEvent):void{
    //Depending on what effects you apply, you may need to re-center the popup 
    //after the zoom in effect is over.. may not need this though
    PopUpManager.centerPopUp(win);
}

private function onZoomOutComplete(event:EffectEvent):void{
    PopUpManager.removePopUp(win);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T10:54:27.220

您还可以创建一个带有动画的弹出窗口，然后扩展它：

动画面板窗口.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Panel xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 

               creationCompleteEffect="{addedEffect}"
               removedEffect="{removedEffect}"

               >

    <fx:Declarations>

        <s:Parallel id="removedEffect" target="{this}" suspendBackgroundProcessing="false">
            <s:Scale3D scaleYTo="0" duration="500" startDelay="0" disableLayout="false"
                       autoCenterProjection="true" autoCenterTransform="true" applyChangesPostLayout="true"/>
            <s:Fade alphaFrom="1" alphaTo="0" duration="250" startDelay="50"/>
        </s:Parallel>

        <s:Parallel id="addedEffect" target="{this}" suspendBackgroundProcessing="false">
            <s:Scale3D scaleYFrom="0" scaleYTo="1" duration="250" disableLayout="false"
                       autoCenterProjection="true" autoCenterTransform="true" applyChangesPostLayout="true"/>
            <s:Fade alphaFrom="0" alphaTo="1" duration="200"/>
        </s:Parallel>

        <s:Move id="moveEffect" target="{this}" effectUpdate="trace('moving')"/>

    </fx:Declarations>

</s:Panel> 
```

然后扩展它：

```
<?xml version="1.0" encoding="utf-8"?>
<c:AnimatedPanelWindow xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               xmlns:c="views.*"

</c:AnimatedPanelWindow> 
```

# mysql - 查询执行但没有结果

> ID：13091375
> 
> 赞同：0
> 
> 时间：2012-10-26T17:10:05.683
> 
> 标签：mysql, phpmyadmin

我正在尝试通过 phpmyadmin 中的“在数据库上运行 SQL 查询/查询”页面执行以下查询：

```
CREATE TABLE IF NOT EXISTS `bindings` (
  `binding_id` int(10) unsigned NOT NULL auto_increment,
  `game_id` smallint(5) unsigned NOT NULL,
  `layout_id` tinyint(3) unsigned NOT NULL,
  `key_number` tinyint(3) unsigned NOT NULL,
  `normal_action` varchar(128) default NULL,
  `normal_group` tinyint(2) unsigned default NULL,
  `shift_action` varchar(64) default NULL,
  `shift_group` tinyint(2) unsigned default NULL,
  `ctrl_action` varchar(64) default NULL,
  `ctrl_group` tinyint(2) unsigned default NULL,
  `alt_action` varchar(64) default NULL,
  `alt_group` tinyint(2) unsigned default NULL,
  `altgr_action` varchar(64) default NULL,
  `altgr_group` tinyint(2) unsigned default NULL,
  `extra_action` varchar(64) default NULL,
  `extra_group` tinyint(2) unsigned default NULL,
  `image_file` varchar(256) default NULL,
  PRIMARY KEY  (`binding_id`),
  KEY `fk_layout_id` (`layout_id`),
  KEY `fk_game_id` (`game_id`),
  KEY `idx_combined_bindings` (`game_id`,`layout_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=11150 ; 
```

结果是一个绿色框和复选标记，表示查询已成功执行。但是 phpmyadmin 仍然报告“在数据库中找不到表”。查询或数据库有什么问题？谢谢！

注意：上面的查询是我要导入数据库的更大转储的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:21:09.817

没关系。我删除了数据库并从一个空白数据库重新开始，现在一切都运行良好。当我的网络主机从 mySQL 5.0.92 升级到 mySQL 5.1.63 时，不知何故，事情变得一团糟。对不起！

# c# - 我有 httpwebrequest 对象，想分段上传

> ID：13091384
> 
> 赞同：0
> 
> 时间：2012-10-26T17:10:44.017
> 
> 标签：c#, http, httpwebresponse

我在第三方函数中有以下代码，它将文件发布到网络服务器。我想分部分发布数据，我应该在代码中做些什么更改。下面的代码正在运行，“请求”对象包含所有内容。

```
private static HttpWebResponse GetRawResponse(HttpWebRequest request)
{
return (HttpWebResponse)request.GetResponse();
} 
```

还有一种方法可以让我找出将从 httpwebrequest 对象上传的文件的全名（带路径）是什么。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:17:57.270

`HttpWebRequest`不会产生多个 HTTP 请求。除非您实际创建多个 HttpWebRequest，否则您无法分块上传文件。除非您有服务器端进程将它们缝合在一起，否则我认为这不会有用。

如果您仍然想要真正的分块上传，您可能需要查看原始 TCP 或其他一些机制。

希望有帮助。也可以看看[这个帖子](https://stackoverflow.com/questions/10188054/httpwebrequest-sending-file-by-chunks-and-tracking-progress)。

# ruby-on-rails - 我如何将其写为货币单位但转发د.إ

> ID：13091404
> 
> 赞同：0
> 
> 时间：2012-10-26T17:11:50.650
> 
> 标签：ruby-on-rails, internationalization, i18n-gem, bidi

我正在为使用此符号的阿联酋设置国际化：د.إ

但是当我将它插入我的 en-UAE.rb 时：

```
 :currency => {
    :format => {
      :unit => 'د.إ',
      :precision => 2,
      :format => '%u%n'
    }
  } 
```

它产生：

```
100.00د.إ 
```

我想要的地方：

```
( i actually can't get the symbol to appear before the number here either.. ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T08:36:14.253

您的符号*IS*出现在数字之前！

但是“之前”在 LTR（从左到右）上下文中表示“向左”，在 RTL（从右到左）上下文中表示“向右”。

数字始终显示为 LTR，但它们不会改变它们之后的上下文（因此，整个数字块可以被视为单个“中性”事物）。

因此，只有一行 2 个元素：一个阿拉伯字符串和一个“中性”数字。数字是“中性的”，它将表现得“好像”它在相同类型的相邻元素中（这里成对的嵌套有时会产生令人惊讶的结果）。在我们的例子中，邻居是前面的 RTL 元素，所以这个数字表现得好像它是 RTL 中的一个块；两个 RTL 元素，第一个显示在第二个的右侧（之前的意思是向右）。

将“之前”显示为“向左”仅在 LTR 上下文中有效；但恕我直言，在使用阿拉伯字母符号时推送 LTR 上下文是错误的。如果您在 LTR 上下文中，最好使用中性符号（例如 $ € 等。里亚尔有一个单字符的 unicode 符号，这应该是您想要的），或者使用拉丁字母（例如：“rial”或“AER”）。

但是对于数字之前的一串阿拉伯字母，正确的行为是数字出现在文本的左侧（在 RTL 中之后是左侧）

您应该搜索“bidi”并了解它的工作原理；只有这样，您才能正确处理这些复杂的问题。

一些网站（还有更多）：

*   [http://www.iamcal.com/understanding-bidirectional-text/](http://www.iamcal.com/understanding-bidirectional-text/)
*   [http://www.user.uni-hannover.de/nhtcapri/bidirectional-text.html](http://www.user.uni-hannover.de/nhtcapri/bidirectional-text.html)

# php - MailChimp 模板对 PHP 毫无价值

> ID：13091407
> 
> 赞同：0
> 
> 时间：2012-10-26T17:11:55.673
> 
> 标签：php, email, templates, send, mailchimp

我刚刚从[MailChimp](http://mailchimp.com/resources/html-email-templates/)下载了邮件模板。但是当我用 PHP 发送它们时，当我在 Gmail 中查看邮件时，html 标记、标题和所有 css 样式都会被删除，并且邮件是无用的。

据我所知，我需要使 css 内联而不是在标题中。

但这仍然让我感到困惑，为什么 MailChimp 提供了这样不起作用的模板？

**解决方案：** 我刚刚发现 MailChimp 提供[CSS 内联工具](http://beaker.mailchimp.com/inline-css)。好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:15:21.250

当您通过 MailChimp API 将 PHP 生成的电子邮件发送到 MailChimp 时，有一个参数表示您希望 MailChimp 自动内联您的 CSS。否则标题会被剪掉。

# html - 没有特定 ID 的类的 CSS 选择器

> ID：13091410
> 
> 赞同：1
> 
> 时间：2012-10-26T17:12:20.203
> 
> 标签：html, css

我有一系列带有类的元素`.tab-pane`。他们每个人都有自己唯一的 ID。我正在尝试选择每个`.tab-pane`没有 id 的`#home`。我试过`.tab-pane:not#home{...}`了，但没有用。有什么建议么？

示例 HTML

```
<div id="home"    class="tab-pane">...</div>
<div id="myself"  class="tab-pane">...</div>
<div id="contact" class="tab-pane">...</div>
<div id="resume"  class="tab-pane">...</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:13:52.773

请尝试：

```
.tab-pane:not(#home) {
    color: red;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/wzVJ8/)。

您未选择的内容出现在`:not()`选择器的括号内，而不是显示为“链式”伪选择器。

在这种特定情况下，由于您希望未设置样式的元素是第*一个*元素，因此您还可以使用通用兄弟组合`~`器以不同方式设置后续兄弟的样式：

```
#home ~ .tab-pane {
    color: red;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/wzVJ8/1/)。

但这*只有*在不同样式（或无样式）元素是*first*时才有效，因为 CSS 只能选择在 DOM 中较晚出现的元素，作为较早元素的后续兄弟或后代。

参考：

*   [选择器级别 3，否定`:not()`伪类](http://www.w3.org/TR/selectors/#negation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:13:37.983

也许你打算这样做：

```
.tab-pane:not(#home) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:16:34.153

你也可以试试这个（*这就像正则表达式*）

```
.tab-pane:not([id^='home'])
 {/*your code*/} 
```

如果您不想包含以字母“h”开头的 id，请尝试以下方法：

```
.tab-pane:not([id^='h'])
{/*your code*/} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T17:17:06.780

您可以使用`.tab-pane:eq(noOfClass)`选择器访问每个单独的类

[在此处](http://sillythingsthatmatter.com/jQuery/jQuery_selectors.php)查看示例

或者您也可以使用 :not 选择器`.tab-pane:not(#home)`

# validation - URL 在 W3C HTML/XHTML 验证中失败

> ID：13091412
> 
> 赞同：2
> 
> 时间：2012-10-26T17:12:27.143
> 
> 标签：validation, url, xhtml, w3c

我在我的网页中的**href**标记中使用了下面的 URL，不幸的是，整个链接在 W3C HTML/XHTML 验证中失败。

我该如何解决这个问题？

```
http://maps.google.co.uk/maps?q=N+Z&hl=en&hnear=ABC+N4+1,+Jamaica&t=m&z=16 
```

*我的页面包括：*

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
.
.
. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-27T13:34:53.633

您必须`&`使用`&amp;`.

因此，您的 URL 应如下所示：

`http://maps.google.co.uk/maps?q=N+Z&amp;hl=en&amp;hnear=ABC+N4+1,+Jamaica&amp;t=m&amp;z=1`

例如，参见[HTML 4.01](http://www.w3.org/TR/html401/appendix/notes.html#ampersands-in-uris)中的信息。还有一个网络工具可以检查不明确的 & 符号： http: [//mothereff.in/ampersands](http://mothereff.in/ampersands)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:23:57.437

您应该对 URL 进行转义/编码。

# probability - 超时概率

> ID：13091415
> 
> 赞同：1
> 
> 时间：2012-10-26T17:12:44.697
> 
> 标签：probability

我正在尝试为正在编写的实时模拟器计算适当的超时时间：

对于 p = 成功概率，成功请求的时间 = m，失败尝试的时间 = f。5 次成功请求的平均时间是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:23:48.910

我们称总尝试次数为 x。

```
x = 5p + (x-5)(1-p)
x = 5 / p 
```

总时间将是

```
t = 5m + (x-5)f 
```

或者

```
t = 5m + (5 / p - 5)f 
```

如果 m=1、f=2 和 p=0.1，则答案应该是 5 * 1 + 45 * 2 = 95。这检查出来了。

这里可能有错误，但我尽力了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T10:29:15.817

顺便说一句，这在统计数据交换中可能更合适，但这是答案：

如果您想要平均时间，您需要对获得五次成功所需的可能试验总数进行平均。这可能是从 5 到无限的任何地方（它需要至少 5 次试验才能获得 5 次成功，理论上你可以有无限长的失败序列）。我建议您可以愉快地在合理的时间点将其切断，以获得除了 p 的病理值之外的任何内容的精确到小数位的答案。设 n 为试验次数，我们希望从中观察 x=5 成功。n 次试验中 5 次成功的概率由[二项分布](http://en.wikipedia.org/wiki/Binomial_distribution)给出，参数化为 x、n 和 p。设`Bin(x; n,p)`为二项式概率，则与此相关的时间为：

```
5m + (n-5)f 
```

要获得此数量的期望（平均值），您需要总和：

```
Bin(5; n,p) * 5m + (n-5)f 
```

对于 n=5 到 n=inf。根据您的 p 值，您应该能够在 n=20 到 30 时停止，并且仍然可以获得相当准确的答案。请注意，如果您使用的是二项式概率的简单实现，则涉及 n! 项的二项式系数的计算可能会因 n 较大而失败，因此您可能需要考虑二项式的正态逼近。

# ruby-on-rails - 为 content_for 方法传入选项参数

> ID：13091416
> 
> 赞同：3
> 
> 时间：2012-10-26T17:12:48.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我发现您可以`content_for`查看 Rails 源代码。[https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/capture_helper.rb](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/capture_helper.rb)

**导轨来源：**

```
def content_for(name, content = nil, options = {}, &block)
  if content || block_given?
    if block_given?
      options = content if content
      content = capture(&block)
    end
    if content
      options[:flush] ? @view_flow.set(name, content) : @view_flow.append(name, content)
    end
    nil
  else
    @view_flow.get(name)
  end
end 
```

我正在尝试设置`options[:flush] = true`，但遇到了一些麻烦。在我下面`options[:flush]`的代码中没有评估为真。

**我的代码**：

```
content_for(affiliate_link_pos.to_sym, {:flush=>true}) do
  render page
end 
```

**编辑**：我也尝试过传递第三个参数（内容），但我得到了`wrong number of argument error (3 for 2)`.

```
content_for(affiliate_link_pos.to_sym, "true",  {:flush=>true}) do 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-28T02:25:04.267

尝试这个：

```
content_for(affiliate_link_pos.to_sym, null, :flush=>true) do
  render page
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T01:11:48.890

看起来 OP 问题中引用的来源实际上来自 Rails 4。 [即使在 Rails 3.2.14 中，content_for 也不接受任何选项。](http://api.rubyonrails.org/v3.2.14/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for)

> ## **content_for** (name, content = nil, &block)
> 
> 调用 #content_for 将标记块存储在标识符中以供以后使用。您可以通过将标识符作为参数传递给 content_for 来对其他模板、帮助模块或布局中的存储内容进行后续调用。

# mysql - 更改了mysql密码，现在它无法启动

> ID：13091419
> 
> 赞同：2
> 
> 时间：2012-10-26T17:13:13.657
> 
> 标签：mysql, linux, passwords, debian

我正在使用 Debian 6，我想重置/恢复我的 mysql 密码，

我犯了一个错误并使用命令更改了我的mysql用户密码

```
$ passwd mysql 
```

但是它确实使mysql服务不再启动，当我执行`/etc/init.d/mysql start`它失败时，你们能帮帮我吗？mysql.err 和 mysql.log 什么都不做，谢谢！

编辑：

我找到了解决方案：一个 apt-get instal --reinstall mysql-server 解决了这个问题，谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:46:19.317

mysql 用户不应是登录帐户，因此不应有密码。我不知道为什么这会导致服务无法启动，但您始终可以尝试使用`vipw -s`删除 mysql 用户的密码哈希。

如果您可以提供您遇到的错误，我们可能会更深入地了解这里实际发生的情况。

# python - 如何修复此 pywin32 CompatableDC 错误？

> ID：13091421
> 
> 赞同：1
> 
> 时间：2012-10-26T17:13:16.963
> 
> 标签：python, memory, pywin32

好的，所以当我使用此函数时出现此错误（错误：CreateCompatibleDC failed）：

```
import win32api, win32ui, win32gui, win32con
def grab():
    global hwin, width, height, left, top
    hwindc = win32gui.GetWindowDC(hwin)
    srcdc = win32ui.CreateDCFromHandle(hwindc)
    memdc = srcdc.CreateCompatibleDC()
    bmp = win32ui.CreateBitmap()
    bmp.CreateCompatibleBitmap(srcdc, width, height)
    memdc.SelectObject(bmp)
    memdc.BitBlt((0, 0), (width, height), srcdc, (left, top), win32con.SRCCOPY)
    #bmp.SaveBitmapFile(memdc, 'screenshot.bmp')
    return BMP(bmp, memdc)
hwin = win32gui.GetDesktopWindow()
width = win32api.GetSystemMetrics(win32con.SM_CXVIRTUALSCREEN)
height = win32api.GetSystemMetrics(win32con.SM_CYVIRTUALSCREEN)
left = win32api.GetSystemMetrics(win32con.SM_XVIRTUALSCREEN)
top = win32api.GetSystemMetrics(win32con.SM_YVIRTUALSCREEN) 
```

它是这样说的：

```
Traceback (most recent call last):
  File "<pyshell#98>", line 1, in <module>
    grab()
  File "<pyshell#43>", line 9, in grab
    bmp.CreateCompatibleBitmap(srcdc, width, height)
error: CreateCompatibleDC failed 
```

我认为这是因为我有太多的 DC，但是当我删除 DC 时，它并没有解决任何问题。请帮忙！谢谢！

# java - 使用反射的基于动作的控制器

> ID：13091427
> 
> 赞同：0
> 
> 时间：2012-10-26T17:13:52.907
> 
> 标签：java, model-view-controller, reflection

我正在建模基于控制器反射。我想知道您是否同意我的实施以及可以改进的地方。

我从反思开始，我想知道我是否使用了良好的做法。

示例：www.sample.com/Main?mvc=user/edit/5

看见：

```
public class StartController extends HttpServlet {

    @Override
    public void service(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException
    {
        String vars = req.getParameter("mvc");
            ApplicationContext context = WebApplicationContextUtils.getWebApplicationContext(getServletContext());

        MainController main = new MainController();
        main.RESTProcess(req, resp, context, vars);
    }
}

public class MainController extends Controller {

    public void RESTProcess(HttpServletRequest req, HttpServletResponse resp, ApplicationContext context, String vars)
            throws IOException, ServletException
    {
        String[] url;
        int nvars;

        String controller = null;
        String action = null;;
        String[] params = null;
        int i;
        int n;

        String controllerName;
        String actionName;

        if(vars == null || "".equals(vars.trim()))
        {
            this.redirect(resp,"home");
        }
        else
        {       
            url = vars.split("/");
            nvars = url.length;

            if(nvars > 0)
            {
                controller = url[0].trim(); //users
                if(nvars > 1)
                {
                    action = url[1].trim(); //edit
                    if(nvars > 2)
                    {
                        n = 0;
                        params = new String[nvars - 2]; //array[0] = 5 (iduser)
                        for(i = 2; i < nvars; i++)
                        {
                            params[n] = url[i];
                            n++;
                        }
                    }
                }

                controllerName = this.getFirstUpper(controller) + "Controller"; //HomeController, UserController pattern
                if(!controllerName.equals("Controller"))
                {
                    actionName = "action" + this.getFirstUpper(action); //actionIndex, actionEdit pattern
                    if(!action.equals("action"))
                    {
                        try
                        {
                            Class classe = Class.forName("com.sample.controller." + controllerName);
                            try
                            {
                                Constructor c = classe.getConstructor(HttpServletRequest.class, HttpServletResponse.class, String[].class);
                                try
                                {
                                    Object obj = c.newInstance(req, resp, context, params);

                                    Method m = classe.getMethod(actionName, null);
                                    m.invoke(obj, null);

                                    System.out.println(obj.toString());
                                }
                                catch (Exception e)
                                {
                                    e.printStackTrace();
                                }
                            }
                            catch (Exception e)
                            {
                                e.printStackTrace();
                            }
                        }
                        catch (Exception e)
                        {
                            e.printStackTrace();
                        }
                    }
                }
            }
            else
            {
                this.redirect(resp,"home");
            }
        }
    }

    public String getFirstUpper(String str)
    {
        Integer x = str.length();
        str = str.substring(0,1).toUpperCase().concat(str.substring(1, x));

        return str;
    }
}

public class UserController extends Controller {

    private HttpServletRequest req;
    private HttpServletResponse resp;
    private ApplicationContext context;
    private String[] params;

    public UserController(HttpServletRequest req, HttpServletResponse resp, ApplicationContext context, String[] params)
    {
        this.req = req;
        this.resp = resp;
        this.context = context;
        this.params = params;
    }

    public void actionEdit()
    {
        Long id = Long.valueOf(this.params[0]);
        System.out.println("/home/edit");
    }
} 
```

# php - PHP Swift 邮件程序设置

> ID：13091428
> 
> 赞同：1
> 
> 时间：2012-10-26T17:14:07.190
> 
> 标签：php, html, email, smtp, swiftmailer

我正在尝试在我的网站中实施 swift mailer，以便我可以向注册用户发送密码恢复电子邮件。我正在使用 Dreamweaver。我做了什么：

```
1) Downloaded Swift-4.2.2.tar
2) Extracted it
3) Uploaded to my host in /Domain/classes/lib
4) Included it in Recovery.php 
```

这是我的文件结构

```
Main Folder
     |classes
          |Swift
     |Private
          |Recovery.php 
```

这是代码`Recovery.php`：

```
require_once '../classes/lib/swift_required.php';
// Create the Transport
$email_to = $_POST["email"];
$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 465)
  ->setUsername('Username')
  ->setPassword('Password')
  ;

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create a message
$message = Swift_Message::newInstance()

  // Give the message a subject
  ->setSubject('Password Recovery')

  // Set the From address with an associative array
  ->setFrom(array('Username@domain.com' => 'Username'))

  // Set the To addresses with an associative array
  ->setTo($email_to)

  // Give it a body
  ->setBody('Below is your temporary password. Please make sure to login in immediately and change it to a password of your choice.\n'.$password);

// Send the message
$result = $mailer->send($message); 
```

但这不包括库，因为如果我这样做`Swift_SmtpTransport::`了，dreamweaver 应该弹出一个智能感知事物，它为我提供方法或变量的选项，这意味着它可以看到类及其所有成员项。但由于它没有弹出选项，我觉得它看不到 swift 类是什么。当我尝试运行它时，控制台网络选项卡说它在返回之前等待了一段时间`500 Internal Server Error`。所以它没有正确包含库。知道我做错了什么吗？

编辑：错误报告输出：

```
Warning: require(/*/*/*/Main Folder/classes/lib/classes/Swift.php): failed to open stream: No such file or directory in /*/*/*/Main Folder/classes/lib/swift_required.php on line 22 
Fatal error: require(): Failed opening required '/*/*/*/Main Folder/classes/lib/classes/Swift.php' (include_path='.:/usr/local/lib/php') in /*/*/*/Main Folder/classes/lib/swift_required.php on line 22 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:50:54.630

打开 swift_required.php 文件。第 22 行有一个 require()。调整它的路径以匹配 lib/classes/Swift.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:48:56.790

当您检查 swift_required.php 中的路径时，可能会有所帮助，从调用文件的角度来看，它们必须是正确的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T12:30:59.307

尝试使用绝对路径而不是相对路径

例如在linux中

```
require_once '/var/www/project/mailer/lib/swift_required.php' ; 
```

或者尝试将上面的行替换为

```
require_once '/path/to/mailer/lib/swift_init.php'; 
```

swift mailer 使用它自己的类自动加载器，你已经有其他的自动加载器了吗？

# html - 在父 div 中居中子 div

> ID：13091433
> 
> 赞同：36
> 
> 时间：2012-10-26T17:14:22.070
> 
> 标签：html, css

我有一个必须保持 100% 的父 div，里面有 3 个子 div。我需要将 3 个子 div 居中，但不知道如何。

```
.parent {
    width: 100%;    
    border: 1px solid blue;
}

.child {
    float: left;    
    border: 1px solid red;
    margin: 2px;
}
```

```
<div class="parent">
    <div class="child">child1</div>
    <div class="child">child2 - center us child divs! :)</div>
    <div class="child">child3</div>
    <div style="clear: both"></div>
</div>
```

这是一个 JSFIddle：

[http://jsfiddle.net/qdHH3/2/](http://jsfiddle.net/qdHH3/2/)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-26T17:16:35.547

尝试使用`display: inline-block`和`text-align: center`

```
.parent {
    width: 100%;
    border: 1px solid blue;
    text-align: center;
}

.child {
    display: inline-block;  
    border: 1px solid red;
    margin: 2px;
} 
```

jsFiddle：http: [//jsfiddle.net/qdHH3/3/](http://jsfiddle.net/qdHH3/3/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2019-03-02T17:32:07.227

**Flex**解​​决方案：[设置`justify-content: center;`](https://developer.mozilla.org/en-US/docs/Web/CSS/justify-content)**为父**元素：

```
.parent {
  display: flex;
  justify-content: center;
  /* align-items: center; /* To align vertically, if needed */
}

.parent, .child { border: 1px solid #000; }
```

```
<div class="parent">
    <div class="child">child1</div>
    <div class="child">child2 - center us child divs! :)</div>
    <div class="child">child3</div>
</div>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-06T15:37:48.650

```
.child {

    $box-size: 100%;

    width: $box-size;
    height: $box-size;

    display: flex;  
    justify-content: center;
    align-items: center;
} 
```

# python - 如何以纯数据格式获取 Python Sphinx 文档？

> ID：13091434
> 
> 赞同：4
> 
> 时间：2012-10-26T17:14:33.257
> 
> 标签：python, python-sphinx, restructuredtext

我正在开发一个非常大的代码库，它使用 sphinx-apidoc 从 Python 源代码中的文档字符串自动生成 HTML 文档。文档字符串使用以下格式：

:param message: 要显示的
消息 :type message: string
:returns: 格式化字符串
:rtype: string

用组织/呈现方式不同的东西替换 Sphinx HTML 文档已成为一项要求——但我们仍然希望从源代码中的文档字符串自动生成。有没有办法用 Sphinx 生成中间（如 xml）格式的文档？我发现没有办法做到这一点。有谁知道我可以做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T20:09:21.497

您可以使用“json”构建器而不是 HTML 构建器，它会生成可解析的 JSON 输出。或者，您可以编写自己的构建器来创建您想要的格式（有关当前构建器列表，请参见[https://www.sphinx-doc.org/en/master/usage/builders/index.html](https://www.sphinx-doc.org/en/master/usage/builders/index.html)）。

# iphone - 语义问题 - Xcode 实现不完整

> ID：13091440
> 
> 赞同：3
> 
> 时间：2012-10-26T17:15:00.183
> 
> 标签：iphone, xcode, macos, ios6

我在网上搜索过我的代码，但我无法弄清楚我的问题出在哪里。如果有人可以帮助我，我将不胜感激。

SecondViewController.h

```
#import <UIKit/UIKit.h>
#import <MessageUI/MessageUI.h>

@interface SecondViewController : UIViewController <MFMailComposeViewControllerDelegate>
{}

-(IBAction)twitter:(id)sender;
-(IBAction)facebook:(id)sender;
-(IBAction)Contact:(id)sender;

@end 
```

第二视图控制器.m

```
#import "SecondViewController.h"

@interface SecondViewController ()

@end

@implementation SecondViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(IBAction)Contact {
    MFMailComposeViewController *mailcontroller = [[MFMailComposeViewController alloc] init];
    [mailcontroller setMailComposeDelegate:self];
    NSString *email =@"Warce@actionsportsinc.com";
    NSArray *emailArray = [[NSArray alloc] initWithObjects:email, nil];
    [mailcontroller setToRecipients:emailArray];
    [mailcontroller setSubject:@"Enter Subject Here"];
    [self presentViewController:mailcontroller animated:YES completion:nil]; }

-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{ [self dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

我对 iPhone 编程相当陌生。所以，请原谅我没有完全理解这个问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-26T17:39:33.663

Xcode 会告诉你你缺少什么。选取“视图”>“导航器”>“显示问题导航器”，然后调低所有显示三角形：

![实施不完整](../Images/9965aabf68e99f9ea8cf11b76210a665.png)

请注意，您声明了一个名为 的方法`Contact:`，但您实现了一个名为 的方法`Contact`。冒号是方法名称的一部分。你不能省略它。

# java - Selenium WebDriver By.xpath 始终无法正常工作

> ID：13091442
> 
> 赞同：3
> 
> 时间：2012-10-26T17:15:07.653
> 
> 标签：java, xpath, selenium, webdriver

**信息：**

我`fieldXpath`从一个配置文件中得到，它是 `"//input[@id='signin_password']"`

**HTML：**

```
<li><input type="password" name="signin[password]" id="signin_password" /></li> 
```

**作品**：（**但并非总是如此）**

陷入困境...

```
public void doAction(WebDriver driver) throws TestException {
        try {
             WebElement el = driver.findElement(By.xpath(fieldXpath));
             el.clear();
             el.sendKeys(fieldValue);
         } catch (Exception e) {
            throw new TestException(this.getClass().getSimpleName() + ": problem while doing action : " + toString());
         }
    } 
```

使此代码与 XPath 一起使用的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:38:19.293

我发现了问题......：**selenium WebDriver StaleElementReferenceException**

```
*This may be caused because the page isn't loaded completely when the code starts or changes when the code is executed. You can either try to wait a little longer for the element or catch the StaleReferenceException and try again finding the div and the span.* 
```

**我的代码：（在每个字段之前调用这些函数）**

```
/**
 * Handle StaleElementReferenceException
 * @param elementXpath
 * @param timeToWaitInSec
 */
public void staleElementHandleByXpath(String elementXpath, int timeToWaitInSec) {
    int count = 0;
    while (count < 10) {
        try {
            WebElement slipperyElement = driver.findElement(By.xpath(elementXpath));
            if (slipperyElement.isDisplayed()) {
                slipperyElement.click(); // may throw StaleElementReferenceException
            }
            count = count + 10;
         } catch (StaleElementReferenceException e) {
            count = count + 1; // try again
         } catch (ElementNotVisibleException e) {
             count = count + 10; // get out
         } catch (Exception e) {
             count = count + 10; // get out
         } finally {
            // wait X sec before doing the action
            driver.manage().timeouts().implicitlyWait(timeToWaitInSec, TimeUnit.SECONDS);
        }
    }
}

/**
 * Wait till the document is really ready
 * @param js
 * @param timeToWaitInSec
 */
public void waiTillDocumentReadyStateComplete(JavascriptExecutor js, int timeToWaitInSec) {
    Boolean ready = false;
    int count = 0;
    while (!ready && count < 10) {
        ready =  (Boolean) js.executeScript("return document.readyState == 'complete';");
        // wait X sec before doing the action
        driver.manage().timeouts().implicitlyWait(timeToWaitInSec, TimeUnit.SECONDS);
        count = count + 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:24:01.077

使用单 `'`引号而不是`"`. 所以

```
String fieldXpath = "//input[@id='signin_password']"; 
```

# performance - 系统/操作系统缓存与应用程序缓存

> ID：13091453
> 
> 赞同：8
> 
> 时间：2012-10-26T17:15:46.983
> 
> 标签：performance, caching, memory-management, operating-system

在开发使用压缩磁盘索引或磁盘文件的应用程序时，其中部分索引或文件被重复访问（为了论证，让我们说类似于 Zipfian 发行版），我想知道什么时候足够/更好地依赖操作系统级别的缓存（例如，Debian 系统上的内存映射），什么时候在应用程序层上实现某些东西更好（例如，像[FileChannel](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/channels/FileChannel.html)缓冲或 Memcached 或 Java 代码中的自定义 LRU 缓存）。

例如，[一篇文章](http://juanggrande.wordpress.com/2011/01/05/os-cache-do-matter/)（参考 Solr）主张为操作系统缓存留出可用内存：

> 操作系统的缓存非常有用，它显着减少了回答查询所需的时间（即使在完全重新启动服务器之后！），因此请始终记住为操作系统保留一些可用内存。

这让我想知道我的应用程序级缓存是否用 LRU Java 对象的弱映射填充内存是弊大于利，尤其是。由于Java在内存开销方面是如此贪婪......而不是使用该内存来缓存一些最终结果对象，操作系统会更好地使用该空间来缓存大量原始压缩数据吗？另一方面，应用层缓存对于平台独立性会更好，无论代码运行在什么操作系统上都允许缓存。

所以我意识到除了运行几个特定的​​基准测试之外，我不知道如何以有原则的方式回答这个问题。这让我问...

**对于是否为应用程序级缓存分配可用内存，或者将该内存用于操作系统级缓存，存在哪些一般准则？**

特别是，我希望能够更好地识别编写应用程序级缓存何时是浪费时间，甚至对性能有害。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T18:37:55.923

最终的答案总是先**测量**、分析，然后优化。在有和没有缓存的分析器下运行你的应用程序，看看有什么区别。直接观察是无可替代的。

话虽如此，有一种原则性的方法可以考虑您的问题。想想缓存可以为您做什么：

*   用时间换记忆。所涉及的时间可能是 I/O 时间，也可能是 CPU 时间。
*   用工作集记忆的峰值换取工作记忆的更小、更长期的增加。

因此，针对您的具体情况，您需要提出以下问题。

*   如果没有缓存，您的应用程序 I/O 是否受限？如果您将 98% 的时间用于处理数据，而仅 2% 的时间用于查找数据，那么无论缓存效率如何，缓存都对您没有多大帮助。（在这种情况下，一个非常有效的缓存只会将您的性能提高大约 2%。）
*   缓存命中避免了多少工作？如果缓存命中避免了一次`fread()`调用，那么缓存可能对您没有多大作用。但是，如果缓存命中避免随机遍历几个非常大的文件的几百个块，那么它可能会为您节省大量时间。它还可以在操作系统的磁盘缓存中为您节省大量空间，使该内存可用于其他操作系统操作。
*   缓存命中率是多少？
*   你需要多大的缓存才能获得良好的命中率（通常高于 75%）？如果答案是数百兆字节，那么您不妨让操作系统的磁盘缓存为您完成工作。

使您的应用程序的这些方面可配置（是否使用缓存，为缓存留出多少内存等）通常非常有帮助，并使用这些设置来查看最适合给定的设置设想。

如今，最有趣的发展之一是固态驱动器的可用性。这些驱动器的吞吐量不如更好的主轴快，但随机访问通常非常出色。这肯定会改变一些事情。

同样，没有什么可以替代分析您的代码。

# c - 在while循环中使用malloc

> ID：13091456
> 
> 赞同：0
> 
> 时间：2012-10-26T17:16:03.060
> 
> 标签：c, unix, malloc

在下面的代码中，我在 while 循环中放置了一个 malloc 调用

```
int main()
{
    int *ptr;
    while(1) { 
        ptr=malloc(1000);
        if (ptr == NULL) break;
    }
    return (0);
} 
```

会`while loop`一直运行直到堆中有剩余空间，还是会继续永远运行，除非它被杀死，因为我们没有在分配的内存中写入任何数据？当然存在内存泄漏，以便可以回答上述问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:19:12.747

经过一定的迭代`malloc`就会失败。由于您不检查 malloc 的返回值，因此没有什么可以打破循环。

所以它会无限循环。

* * *

随着你的休息，它最终会在 malloc 返回 NULL 时跳出循环。正如您已经提到的，存在内存泄漏。通常，一旦程序退出，操作系统将要求所有内存。虽然，这是一个很好的做法`free`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:38:09.000

进程最终会达到一个限制（进程限制、用户限制、磁盘限制）然后优雅地死掉。它可能会破坏您的硬盘，并且系统的其余部分将在相当长的一段时间内停止运行。

如果您使用内存，操作系统不会给出无花果。

它最终会恢复。但是为什么要做这么愚蠢的事情呢？

# mysql - GROUP BY 中的 ORDER BY 和 LIMIT

> ID：13091457
> 
> 赞同：4
> 
> 时间：2012-10-26T17:16:05.953
> 
> 标签：mysql, sql, group-by, limit, greatest-n-per-group

我试图在 GROUP BY 中获取记录的子集，我已经看到了很多疯狂的解决方案，但它们似乎太复杂了，有没有更有效的方法来做到这一点。

```
SELECT user_id, GROUP_CONCAT(item_id ORDER BY `timestamp`) AS items 
FROM wb_user_book_current_item GROUP BY user_id 
```

因此，这将为我返回所有用户的所有当前项目，到目前为止还可以。但我只想要最近的十个项目。添加`ORDER BY`到`GROUP_CONCAT`帮助中，但它仍然没有给我最后十条记录。

**编辑**

如果我做这样的事情并硬编码，`user_id`那么我可以获得我想要的那个用户的结果，问题是组合它，这样我就不需要硬编码`user_id`，例如可以让**所有**用户最后十个项目

```
SELECT GROUP_CONCAT(cp2.item_id) AS items 
FROM (SELECT cp.user_id, cp.item_id 
      FROM wb_user_book_current_item cp 
      WHERE cp.user_id=1 ORDER BY cp.`timestamp` 
      LIMIT 10) AS cp2 
GROUP BY cp2.user_id 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T17:19:51.003

这是一个难题，但是如何：

```
SELECT user_id, GROUP_CONCAT(item_id ORDER BY `timestamp`) AS items
FROM wb_user_book_current_item T
WHERE NOT EXISTS
(
    SELECT 1
    FROM wb_user_book_current_item T2
    WHERE T2.user_id = T.user_id
    ORDER BY T2.`timestamp` DESC
    LIMIT 10,1
) 
OR T.`timestamp` > (
    SELECT T2.`timestamp`
    FROM wb_user_book_current_item T2
    WHERE T2.user_id = T.user_id
    ORDER BY T2.`timestamp` DESC
    LIMIT 10,1
)
GROUP BY user_id 
```

这当然假设您不会`timestamp`为同一用户提供两行相同的行。

如果您的时间戳字段始终为正整数，您还可以将 替换`NOT EXISTS...OR`为`COALESCE`：

```
SELECT user_id, GROUP_CONCAT(item_id ORDER BY `timestamp`) AS items
FROM wb_user_book_current_item T
WHERE T.`timestamp` > COALESCE((
    SELECT T2.`timestamp`
    FROM wb_user_book_current_item T2
    WHERE T2.user_id = T.user_id
    ORDER BY T2.`timestamp` DESC
    LIMIT 10,1
), 0)
GROUP BY user_id 
```

* * *

原始答案，但显然 MySQL 不明白如何正确执行此操作并抱怨子选择返回多行。当然我们想要多行；这是一个`GROUP_CONCAT`。Grr。

不幸的是，我认为使用子查询没有真正的方法：

```
SELECT T.user_id, 
    GROUP_CONCAT((SELECT T2.item_id 
                  FROM wb_user_book_current_item T2 
                  WHERE T2.user_id = T.user_id 
                  ORDER BY T2.`timestamp` 
                  LIMIT 10)) AS items 
FROM wb_user_book_current_item T
GROUP BY user_id 
```

否则，`LIMIT`在其他任何地方添加将限制组的数量，或者限制表（而不是组）上的总记录集 - 这两者都不是您想要实现的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T21:53:47.310

所以在这里遇到了一个很好的解决方案。

[http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

就像这样放在一起：

```
SET @num := 0, @user_id := '';

SELECT cp2.user_id, CONCAT(cp2.item_id) AS items
FROM (
   SELECT cp.user_id, cp.item_id,
   @num := IF(@user_id = cp.user_id, @num + 1, 1) AS row_number,
   @user_id := cp.user_id AS dummy
   FROM wb_user_curent_item AS cp
   ORDER BY cp.user_id ASC, cp.`timestamp` DESC
) AS cp2 WHERE cp2.row_number <= 10
GROUP BY cp2.user_id 
```

所以基本上它只是使用`num`增量来限制记录而不是使用`LIMIT`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T22:34:16.663

```
SELECT 
    i.user_id,
    GROUP_CONCAT(i.item_id ORDER BY i.timestamp) AS items 
FROM 
    ( SELECT DISTINCT user_id
      FROM wb_user_book_current_item 
    ) AS du
  JOIN
    wb_user_book_current_item AS i
      ON  i.user_id = du.user_id
      AND i.timestamp <= COALESCE(
          ( SELECT i2.item_id 
            FROM wb_user_book_current_item AS i2
            WHERE i2.user_id = du.user_id
            ORDER BY i2.timestamp ASC 
              LIMIT 1 OFFSET 9
          )
          , '2038-01-19 03:14:07')
GROUP BY
    i.user_id ; 
```

上的索引`(user_id, timestamp, item_id)`将有助于提高效率。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-26T17:20:15.697

试试这个：

```
SELECT 
  user_id, 
  GROUP_CONCAT(item_id ORDER BY `timestamp`) AS items 
FROM wb_user_book_current_item 
GROUP BY user_id
LIMIT 0, 10 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-26T17:18:09.280

更新：我没有注意到 GROUP_CONCAT 因此您必须将子查询与 LIMIT 结合使用

使用限制

```
SELECT column_name(s)
FROM table_name
LIMIT number 
```

# c - 在c中完全关闭一个文件

> ID：13091458
> 
> 赞同：-1
> 
> 时间：2012-10-26T17:16:08.957
> 
> 标签：c, file, edit

我需要阅读，然后写入文件。我不想使用“r+”，因为无论如何我都会完全覆盖它。但我无法完全关闭文件。如果我第二次尝试打开文件，应用程序会崩溃（无法打开）。有谁知道如何完全关闭文件。

这不是实际的代码，只是我想要做的总结：

```
FILE* f;
fopen_s(&f, "test.txt", "r");
// read file and edit data
fclose(f);
f = 0;
fopen_s(&f, "test.txt", "w");
fprintf(f, "%c", data);
fclose(f); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:22:19.723

`fclose()`关闭文件。它没有半关闭它。“完全关闭”文件的概念不存在。文件要么打开要么关闭。中间没有。

尽管在您的代码中您`fopen_s()`用于打开文件。我不知道那个功能是什么。我假设它的工作方式类似于`fopen()`，但它不是返回一个`FILE`指针，而是将它存储在它的参数中。

因此，您的问题的答案是：要“完全”关闭文件，请使用`fclose()`. 正如你已经做的那样。这意味着您遇到的问题在其他地方。

# android - android EditText提示不出现

> ID：13091460
> 
> 赞同：10
> 
> 时间：2012-10-26T17:16:25.913
> 
> 标签：android, android-edittext

这似乎是我遇到过的最奇怪的事情。

这是一个布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<EditText        
    android:id="@+id/GuessAppEditText"
    android:lines="1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:gravity="center_horizontal"        
    android:inputType="textCapWords"
    android:hint="@string/Hint" />

</RelativeLayout> 
```

`hint`of未`EditText`显示。

如果我删除`android:gravity="center_horizontal"`or `android:inputType="textCapWords"`，则提示变得可见。

我完全不知道`gravity`与. 是另一个 Android 错误还是我做错了什么？在前一种情况下，解决方法是什么？我希望我的文本居中对齐并大写并显示提示。或者我想从糟糕的安卓那里得到太多？`textCapWords``hint`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-26T17:28:32.680

只需添加一行就可以了，即`android:ellipsize="start"`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <EditText
        android:id="@+id/GuessAppEditText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:ellipsize="start"
        android:gravity="center_horizontal"
        android:hint="hint"
        android:inputType="textCapWords"
        android:lines="1" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-01T17:55:30.230

可能原始接受答案对于最新的android版本不再有效，通过设置提示颜色将使提示显示：

```
android:textColorHint="@android:color/darker_gray" 
```

希望这对其他人有帮助，已使用 Android 5+ 进行测试

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-23T19:54:17.000

现在是 2021 年，这似乎仍然是一个问题，因此对于尝试使用 EditText 并且在设计器中没有看到提示的任何人，您可以`tools:background="@android:color/transparent"`为背景添加或分配任何颜色，提示就会出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T17:27:52.477

[如此处所述，这](http://code.google.com/p/android/issues/detail?id=7252)似乎是一个错误。似乎该线程中的一些人已经发布了您可以尝试的解决方法或解决方案。您是否尝试过删除提示并以编程方式设置它，看看这是否是一种解决方法？

在此之前声明`onCreate()`

```
EditText guessAppEt; 
```

而这在`onCreate()`

```
guessAppEt = (EditText)findViewById(R.id.GuessAppEditText);
guessAppEt.setHint("Your hint here"); 
```

# php - 使用 zend 实现搜索

> ID：13091465
> 
> 赞同：2
> 
> 时间：2012-10-26T17:16:51.413
> 
> 标签：php, zend-framework, zend-db, zend-studio, zend-search-lucene

我有一个使用完全在 zend 上开发的 CMS 管理的网站。现在我也必须实现一个搜索功能。我没有做任何与zend搜索相关的事情。我收到的一些建议是实施蜘蛛。该站点将有很多链接（并且会不断添加）。我完全困惑，我不知道从哪里开始。zend_search_lucene 会成功吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:33:20.917

您可能不会为此找到完全交钥匙的东西。如果您的内容都是公开的，并且只使用爬虫就可以了，那么最容易实现的可能是 Google Site Search。

[http://www.google.com/enterprise/search/products_gss.html](http://www.google.com/enterprise/search/products_gss.html)

如果您需要从搜索中获得它不提供的不同功能，您可能会在编写一些代码时遇到困难。Alvar 发布的 Zend Lucene 链接很好。如果我没记错的话，关于 Zend_Lucene 的一个丑陋的事情是它依赖于基于文本的 lucene 索引而没有任何 Java。只是管理起来更慢更麻烦。

Solr 是一种更强大的基于 Lucene 的方法。它是基于 Java 的，并通过 API 在自己的服务上运行。它可以很好地扩展，现在有一个 PHP Pecl 可以帮助您与它进行通信。

见[http://php.net/manual/en/book.solr.php](http://php.net/manual/en/book.solr.php)

另一种选择是狮身人面像。这个搜索引擎直接连接到您的数据库，因此索引可能更直观一些。

[http://sphinxsearch.com/](http://sphinxsearch.com/)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:26:34.413

Lucene 很奇怪，我从来没有让它正常工作并开发了我自己的搜索逻辑，但也许这有帮助：

[http://devzone.zend.com/397/roll-your-own-search-engine-with-zend_search_lucene/](http://devzone.zend.com/397/roll-your-own-search-engine-with-zend_search_lucene/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T14:27:54.443

因为您使用的是本土产品，所以至少在开始时，让事情尽可能简单，您可能会得到更好的服务。此外，因为您的产品是本土开发的，您应该对数据结构有一个很好的处理。

构建一个简单的基于查询的搜索可能适合初学者。

我从一个简单的搜索表单开始：

```
<?php

    class Application_Form_Search extends Zend_Form
    {

        public function init() {

            $this->setMethod('POST');
            $this->setDecorators(array(
                array('ViewScript', array(
                        'viewScript' => '_searchForm.phtml'
                ))
            ));

            // create new element
            $query = $this->createElement('text', 'query');
            // element options
            $query->setLabel('Search Keywords');
            $query->setAttribs(array('placeholder' => 'Title',
                'size' => 27,
            ));
            // add the element to the form
            $this->addElement($query);

            $submit = $this->createElement('submit', 'search');
            $submit->setLabel('Search Site');
            $submit->setDecorators(array('ViewHelper'));
            $this->addElement($submit);
        }
    } 
```

然后我构建了一个简单的动作助手来显示和路由表单：

```
<?php

class Library_Controller_Action_Helper_Search extends Zend_Controller_Action_Helper_Abstract
{

    public function direct($action, $label = null, $placeHolder = null)
    {
        $form = new Application_Form_Search();
        $form->setAction($action);
        $form->search->setLabel($label);
        $form->query->setAttribs(array('placeholder' => $placeHolder,
            'size' => 27,
        ));

        return $form;
    }
} 
```

然后我在 layout.phtml 中为搜索表单添加了一个占位符

```
<?php echo $this->layout()->search ?> 
```

然后在需要使用搜索功能的控制器中，我将助手添加到 predispatch()：

```
public function preDispatch()
    {
        //assign search action helper to view placeholder
        $this->_helper->layout()->search = $this->_helper->search(
                'url_for_action', 'Submit button label', 'placeholder text'
        );
    } 
```

然后我使用一个简单的映射器方法来执行适当的查询，我通常返回一个分页器适配器：

```
 public function fetchPagedMoviesByTitle($title)
    {

        $select = $this->getGateway()->select();
        $select->where(new Zend_Db_Expr("title LIKE '%$title%'"));
        $select->order('title', 'ASC');

        //create a new instance of the paginator adapter and return it
        $adapter = new Video_Model_Paginator_Video($select);

        return $adapter;
    } 
```

这是实现搜索功能的简单方法，适用于大多数类型的查询。我发现一个 switch 语句和几个简单的数据库查询以及我需要的几乎所有信息都是可用的。

祝你好运。

# javascript - 未捕获的错误：无法识别以下数据类型：Edm.Self.Address

> ID：13091476
> 
> 赞同：1
> 
> 时间：2012-10-26T17:17:46.360
> 
> 标签：javascript, entity-framework, breeze

尝试使用breathjs时出现错误，该类型是实体框架中的复杂类型（代码优先）。

未捕获的错误：无法识别以下数据类型：Edm.Self.Address

是否有任何解决方法可以将复杂类型与breathjs一起使用？从我的实体框架模型：

```
public class Address
{
    public string Id { get; set; }
    public string Street { get; set; }
    public string City { get; set; }
    public string ZipCode { get; set; }
    public string Contry { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T20:57:43.763

Breeze 尚不支持实体框架复杂类型。它在我们的路线图上，但我们还没有。请在 Breeze 网站 (www.breezejs.com) 上投票支持此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:25:18.370

试试[JayData](http://jaydata.codeplex.com)，它支持查询或 crud 的复杂类型。一旦您在地址 http://{yourdomain}/{yourapi} 有一个有效的 OData 端点，您就可以直接使用它了：

```
<script src="http://include.jaydata.org/datajs-1.0.3.js"></script>
<script src="http://include.jaydata.org/jaydata.js"></script>
<script src="http://include.jaydata.org/jaydataproviders/oDataProvider.js"></script>
<script>
  $data.service("http://{yourdomain}/{yourapi}", function(contextFactory) {
  var context = contextFactory();
  context
   .myEntitySet
   .filter(function(item) { return item.ComplexProp.Field == 42 || item.Title =="Tea"})
   .forEach(function(item) { 
       console.log(item.Title);
    });
  });
</script> 
```

请注意，使用 JayData，您可以将 TypeScript 用于任何 OData 端点。使用 TypeScript 为您提供

*   强类型客户体验

*   关于功能的奇妙提示

*   lambda 谓词：filter(item => item.ComplexType.Field == 42)

在这里阅读[更多](http://jaystack.com/blog/typescript-meets-odata-with-the-help-of-jaydata-and-jaysvcutil)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T07:06:35.813

从 v 0.80.1 开始，Breeze 现在支持复杂类型。希望这可以帮助。

# django - 表单无效时视图未返回 HttpResponse 对象错误：django

> ID：13091481
> 
> 赞同：2
> 
> 时间：2012-10-26T17:18:05.670
> 
> 标签：django, django-forms, django-templates, django-views

我用过 Django 表单。我有这个功能`views.py`：

```
def func(request):
    if request.method == "POST":
        form = MyForm(request.POST)
        if form.is_valid():
            //do processing            
            return HttpResponseRedirect('/')
    else:
        form = MyForm()
        return render_to_response("checkbox.html", RequestContext(request, {'form':form})) 
```

但是当表单无效时，它会向我显示错误：`The view didn't return an HttpResponse object.`我已经搜索并实现了每个视图功能都是这样的，但我不知道为什么我的有错误。它似乎不知道该怎么办，而表格无效！为什么它不显示页面并向用户显示表单错误？你能帮我么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:22:26.117

当表单无效时，视图只会返回，因为`else`if 语句的一部分仅在 is 时才被评估`request.method == "POST"`，`False`它不是...

为了解决这个问题，以下是制作表单视图的常用模式：

```
def func(request):
    if request.method == "POST":
        form = MyForm(request.POST)
        if form.is_valid():
            //do processing            
            return HttpResponseRedirect('/')
    else:
        form = MyForm()

    # outside of the else clause
    # if the form is invalid, then it will also show the error messages to the user
    return render_to_response("checkbox.html", RequestContext(request, {'form':form})) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T17:26:22.853

你已经在@miki725 帖子上得到了答案。只是一个建议，您可能希望将其视为`GET`避免这些行为的默认行为`if .. else`：

```
def func(request):
    # GET is the default behaviour
    form = MyForm()

    if request.method == "POST":
        form = MyForm(request.POST)
        if form.is_valid():
            //do processing            
            return HttpResponseRedirect('/')

    return render_to_response("checkbox.html", RequestContext(request, {'form':form})) 
```

# ios - SQLite 保存和加载图像 iOS

> ID：13091483
> 
> 赞同：0
> 
> 时间：2012-10-26T17:18:22.553
> 
> 标签：ios, image, sqlite

我正在尝试保存图像并将其加载到 tableView 中，以便保存在我的 SQLite 文件中，我这样做：

```
-(void)InsertRecords:(NSData *)pic{
..... // Open my SQLite file
NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO myMovies (movieImage) VALUES (\"%@\")", pic];
...
const char *insert_stmt = [insertSQL UTF8String];
...
sqlite3_bind_blob(statement, 1, [pic bytes], [pic length], NULL);
... 
```

哪张照片是 NSData，我得到了它的 NSLog。并给了我密码。同样为了加载我使用了这个代码：

```
int length = sqlite3_column_bytes(sqlStatement, 1);
MyMovie.image = [NSData dataWithBytes:sqlite3_column_blob(sqlStatement, 1) length:length]; 
```

和 NSLoged 来自它，它具有与 NSData 相似的结构，但具有不同的数据！它完全改变了！难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:21:24.810

`sqlite3_bind_blob`绑定到参数，但您的插入语句实际上没有参数。（您应该检查它的返回值是否有错误。）

您插入的语句所具有的是格式化为字符串的图片，它将中断任何非 ASCII 字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T20:01:21.020

```
const char *insert_stmt = [@"INSERT INTO myMovies (movieImage) VALUES (?)" UTF8String];
...
sqlite3_bind_blob(statement, 1, [pic bytes], [pic length], SQLITE_TRANSIENT); 
```

# ruby-on-rails - Rails 教程 6.3.4 验证错误

> ID：13091484
> 
> 赞同：0
> 
> 时间：2012-10-26T17:18:32.207
> 
> 标签：ruby-on-rails, ruby, authentication

我正在做 ruby​​ on rails 教程书，但我遇到了一个错误。我检查了他写的所有内容，但我仍然得到错误。它告诉我身份验证是 nil:NILclass 的未定义方法。我不知道该怎么办。

用户.rb：

```
class User < ActiveRecord::Base
attr_accessible :email, :name, :password, :password_confirmation
attr_accessor :password, :password_confirmation
has_secure password

before_save { |user| user.email = email.downcase }
validates :name, presence: true, length: { maximum: 50 }
VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
validates :email, presence: true, format: { with: VALID_EMAIL_REGEX}, uniqueness:  {case_sensitive: false}
validates :password, presence: true, length:{ minimum: 6 }
validates :password_confirmation, presence: true
end 
```

和（一些）我的 user_spec.rb

```
before do
  @user = User.new(name: "Example User", email: "User@example", password: "foobar", password_confirmation:"foobar")
end

    subject { @user }

it { should respond_to(:password_digest) }
it { should respond_to(:password) }
it { should respond_to(:password_confirmation) }
it { should respond_to(:authenticate) }

it { should be_valid }

       #    USER.PASSWORD

describe "when password is not present" do
  before { @user.password = @user.password_confirmation = " "}
  it {should_not be_valid}
end

describe "when password is not present" do
  before { @user.password_confirmation = "mismatch" }
  it { should_not be_valid }

describe "when password is nil" do
  before { @user.password_confirmation = nil }
  it {should_not be_valid}
end  

describe "with a password that's too short" do
  before { @user.password = @user.password_confirmation = "a" * 5 }
  it { should be_valid }
end

describe "return value of authenticate method" do
  before { @user.save }
  let(:found_user) { User.find_by_email(@user.email) }

  describe "with valid password" do
    it { should == found_user.authenticate(@user.password) }
    end

  describe "with invalid password" do
    let(:user_for_invalid_password) { found_user.authenticate("invalid") }

    it {should_not == user_for_invalid_password}
    specify { user_for_invalid_password.should be_false}
  end
end
end 
```

非常感谢您提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:58:25.730

我是 ruby​​ on rails 的新手。我刚刚通过了这个教程。当我这样做时，我发现与您相同的错误。

希望我的解决方法可以帮到你。

**在您的 user.rb**
删除行中： attr_accessor 并将 has_secure 密码编辑为 has_secure_password （添加下划线）

```
class User < ActiveRecord::Base 
attr_accessible :email, :name, :password, :password_confirmation
has_secure_password
enter code here
  before_save { |user| user.email = email.downcase }
  validates :name, presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX}, 
  uniqueness:  {case_sensitive: false}
  validates :password, presence: true, length:{ minimum: 6 }
  validates :password_confirmation, presence: true
end 
```

**在你的 user.spec.rb**

1）你错过了“结束”标签`describe "when password is not present"`

2）将测试`describe 'with a password that's too short'` 从更改`it { should be_valid}`为`it { should be_invalid }` 我认为如果密码小于5应该是无效的。

3）最后，如果您想测试通过身份验证，您应该使用 .com 或任何与 user.rb 中的 VALID_EMAIL_REGEX 匹配的电子邮件结尾，例如：

```
before do
@user = User.new(name: "Example User", email: "User@example.com", 
password: "foobar", password_confirmation:"foobar")
end 
```

我希望这对你有帮助。

对不起，我的英语不好。

# angularjs - Angular.js 使用 ng-init 向模型数组添加值

> ID：13091486
> 
> 赞同：0
> 
> 时间：2012-10-26T17:18:36.310
> 
> 标签：angularjs

我是 Angular 的新手，还在学习。我读了很多关于使用 CMS 生成静态 HTML 的文章，然后将其转换为 Angular 模型/范围，然后进一步处理它。

现在我正在尝试将值添加到 ng-init 指令中的模型数组，如下所示：

```
<div ng-init="art[0].anzahl=3">...</div>
<div ng-init="art[1].anzahl=2">...</div>
<div ng-init="art[2].anzahl=9">...</div> 
```

但这不起作用，有没有人能看到我的愚蠢错误，或者我对如何使用 ng-init 完全错误？

这是完整示例的链接：http: [//jsfiddle.net/Preexo/xVUty/](http://jsfiddle.net/Preexo/xVUty/)

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:29:57.237

在尝试`art`使用`ngInit`. 以[这个小提琴](http://jsfiddle.net/xVUty/2/)为例。

```
$scope.art = [
    {'anzahl': 0},
    {'anzahl': 0},
    {'anzahl': 0}        
];

$scope.addOne = function(artIndex) {
    $scope.art[artIndex].anzahl += 1;
} 
```

**更新：这里有一些其他选项**

1）如果这对您的理解有帮助，您可以`ng-repeat`在控制器代码中使用并声明默认值，`anzahl`就像在[这个小提琴](http://jsfiddle.net/fzDjr/)中一样。这将减少标记中的代码，并将模型的声明移动到控制器中，这取决于您的目标。

2）如果您仍然想使用`ngInit`，您可以将每个项目推入`art`标记中的数组中，就像在[这个小提琴](http://jsfiddle.net/HAj3q/)中一样。

# php - 如何使用 Graph API explorer 或 FQL 查看来自特定人的所有墙贴？

> ID：13091487
> 
> 赞同：0
> 
> 时间：2012-10-26T17:18:47.947
> 
> 标签：php, facebook, facebook-graph-api

所以这就是故事，我的女孩在我的墙上写了我，我收到了通知，但即使在 3 天后，也没有迹象表明实际阅读了那个墙上的帖子。我对此很着迷，因为她是在医院写的，而且她不会很快再写，所以我必须阅读她写的内容。该通知有一些与它们相关联的 id，以查看是否有帮助。请帮我弄清楚。想出在此表单中使用上下文 ID，但显示为空白。看起来帖子仍然存在，因为已删除的帖子显示出明显的错误。`https://www.facebook.com/ali.gajani/posts/content_id`

编辑：看起来上下文 ID 原来是我的个人资料 ID。这真让我抓狂！我想不惜一切代价看到那个墙帖，我确信这是一个 Fb 问题，因为墙帖还没有被删除！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:34:39.103

由于您不打算制作一个完整的应用程序，因此如果您有帖子的 ID，您可能可以使用[Graph Explorer](https://developers.facebook.com/tools/explorer)获取您正在寻找 的信息，这可能相对简单。如果不是，它可能会更困难。问题在于为什么你在墙上看不到它。

如果她更改了帖子的权限，或将其删除，您将无法看到它。即使她没有删除它，如果它没有适用的权限，您也将无法阅读它。简而言之，如果您现在看不到它，您可能无法以编程方式进行。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:40:46.990

在图形资源管理器中获得`read_stream`权限，您应该可以提交此 fql 查询：

```
SELECT post_id, message FROM stream WHERE source_id = '<user id>' 
```

这应该显示来自指定来源的流中出现的流故事（您可以在那里使用页面/组/用户 ID）。获得 post_id 后，您可以将其复制粘贴到图形 api 部分，然后查看 facebook 可以告知该对象的信息。

对于用户 ID，您可能需要查看与资源管理器部分的`/me/friends`关系。`[graph api]`

# jenkins - 如何有条件地构建其他项目？

> ID：13091488
> 
> 赞同：54
> 
> 时间：2012-10-26T17:18:57.277
> 
> 标签：jenkins

我有一个相当复杂的 Jenkins 工作，它构建、单元测试和打包一个 Web 应用程序。根据情况，一旦这项工作完成，我想做不同的事情。我还没有找到一种可重用/可维护的方法来做到这一点。真的是这样还​​是我错过了什么？

完成复杂的工作后，我希望拥有的选项：

1.  没做什么

2.  开始我的低风险更改构建管道：

    *   将我的 WAR 文件复制到我的工件存储库
    *   部署到生产
3.  启动我的高风险更改构建管道：

    *   将我的 WAR 文件复制到我的工件存储库
    *   部署到测试
    *   运行验收测试
    *   部署到生产

我还没有找到一个简单的方法来做到这一点。最简单但不易维护的方法是制作三个独立的作业，每个作业都会启动下游构建。这种方法让我害怕有几个原因，包括必须在三个地方而不是一个地方进行更改。此外，许多下游工作也几乎相同。唯一的区别是他们调用了哪些下游作业。工作的激增似乎会导致无法维护的混乱。

我已经研究过使用几种方法将其保留为一项工作，但到目前为止还没有一种方法有效：

1.  使这项工作成为一个多配置项目（[https://wiki.jenkins-ci.org/display/JENKINS/Building+a+matrix+project](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+matrix+project)）。这提供了一种使用参数注入作业的方法。我还没有找到使“构建其他项目”步骤响应参数的方法。

2.  使用 Parameterized-Trigger 插件 ( [https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin) )。该插件允许您根据某些触发器触发下游作业。不过，触发器似乎过于严格。它们都基于构建的状态，而不是任意变量。我没有看到此处提供的任何适用于我的用例的选项。

3.  使用灵活发布插件 ( [https://wiki.jenkins-ci.org/display/JENKINS/Flexible+Publish+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Flexible+Publish+Plugin) )。这个插件与参数化触发器插件有相反的问题。它有许多可以检查的有用条件，但看起来它不能开始构建另一个项目。它的行动仅限于发布类型的活动。

4.  使用灵活发布 + 任何构建步骤插件 ( [https://wiki.jenkins-ci.org/display/JENKINS/Any+Build+Step+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Any+Build+Step+Plugin) )。Any Build Step 插件允许对 Flexible Publish 插件进行任何构建操作。虽然激活此插件后提供了更多操作，但这些操作不包括“构建其他项目”。

真的没有简单的方法来做到这一点吗？我很惊讶我没有找到它，更惊讶的是我还没有真正看到其他人试图这样做？我在做一些不寻常的事情吗？我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-05T16:25:23.027

如果我理解正确，您应该可以按照以下步骤执行此操作：

1.  第一个构建步骤：
    1.  做正常的工作。在您的情况下：Web 应用程序的构建、单元测试和打包
    2.  根据结果​​，让它创建一个具有特定名称的文件。
    3.  这意味着如果您希望之后运行低风险更改，请创建一个文件 low-risk.prop
2.  第二构建步骤：
    1.  在其他项目上创建*触发器/调用构建*从 Parameterized-Trigger 插件步骤。
    2.  *在Projects to build*字段中输入您的低风险工作的名称
    3.  点击：*添加参数*
    4.  选择：*属性文件中的参数*
    5.  在“*使用来自文件的属性*”字段中输入*low-risk.prop*
    **   启用*如果缺少任何文件则不触发**
**   第三构建步骤：
    1.  检查是否存在 low-risk.prop 文件
    2.  删除文件*

 *对高风险工作做同样的事情

**现在您应该具有以下设置：**

*   如果在第一个构建步骤中出现名为 low-risk.prop 的文件，则将启动低风险作业
*   如果在第一个构建步骤中出现名为 high-risk.prop 的文件，则将启动高风险作业
*   如果没有 .prop 文件，则没有任何反应

这就是您想要实现的目标。不是吗？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-31T18:50:27.320

你看过条件构建插件吗？( [https://wiki.jenkins.io/display/JENKINS/Conditional+BuildStep+Plugin](https://wiki.jenkins.io/display/JENKINS/Conditional+BuildStep+Plugin) )

我认为它可以做你正在寻找的东西。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-03T15:10:31.097

如果你想要一个有条件的后期构建步骤，有一个插件：
[https ://wiki.jenkins-ci.org/display/JENKINS/Post+build+task](https://wiki.jenkins-ci.org/display/JENKINS/Post+build+task)

它将在控制台日志中搜索您指定的 RegEx，如果找到，将执行自定义脚本。您可以配置相当复杂的标准，并且您可以配置多组标准，每组标准执行不同的后期构建任务。

它没有为您提供通常的“构建步骤”操作，因此您必须在那里编写自己的脚本。您可以使用 jenkins 支持的标准方式（例如使用 curl）触发具有不同参数的相同作业或具有某些参数的另一个作业的执行

另一种选择是 Jenkins 文本查找器插件：
[https ://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)

这是一个构建后步骤，如果在控制台文本（甚至工作区中的某些文件）中找到 RegEx，则允许强制将构建标记为“不稳定”。因此，在您的构建步骤中，根据您的条件，将唯一行回显到控制台日志中，然后对该行执行 RegEx。然后，您可以使用“触发参数化 buids”并将条件设置为“不稳定”。这有一个额外的好处，可以在视觉上标记不同的构建（用黄色球），但是这种方法只有 1 个条件选项，并且从您的 OP 看来，您需要 2 个。

尝试结合使用以下 2 种方法：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T17:24:39.827

您使用 Ant 进行构建吗？

如果是这样，可以通过一组环境变量在 ant 中进行条件构建，您的构建脚本可以使用这些环境变量来有条件地构建。在 Jenkins 中，您的构建将构建所有项目，但您的实际构建将决定它是构建还是短路。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-18T02:17:10.573

我认为做到这一点的方法是添加一个中间作业，您将其放入构建后步骤并将下游作业可能需要的所有参数传递给它，然后在该作业中为真正的下游作业放置条件构建。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-24T07:52:32.537

我发现的最简单的方法是远程触发其他作业，以便您可以使用[Conditional Build Plugin](https://wiki.jenkins.io/display/JENKINS/Conditional+BuildStep+Plugin))或任何其他插件有条件地构建其他作业。*

# ruby-on-rails - 有没有办法在 RABL 提要中创建自定义根节点？

> ID：13091491
> 
> 赞同：0
> 
> 时间：2012-10-26T17:19:09.020
> 
> 标签：ruby-on-rails, json, rabl

我正在处理 RABL JSON 提要，我想制作一个自定义根节点，我可以在其中链接到特定对象。

我有这样声明的对象：

```
object @event 
```

这是输出的开头：

```
{
  - event: {
      id: 131, 
```

我想拥有它，以便我可以使用 event_path(event) 链接到特定对象，其中显示“- event”。有没有办法在 RABL 中制作自定义根节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T05:13:43.427

我想这篇[文章](http://engineering.gomiso.com/2011/06/27/building-a-platform-api-on-rails/)可能会回答你的问题。下面的代码取自博文。

```
# app/views/users/show.rabl
object @user

# Declare the properties to include
attributes :first_name, :last_name

# Alias 'age' to 'years_old'
attributes :age => :years_old

# Include a custom node with full_name for user
node :full_name do |user|
  [user.first_name, user.last_name].join(" ")
end

# Include a custom node related to if the user can drink
node :can_drink do |user|
  user.age >= 21
end 
```

# c# - BulletSharp 在应用程序退出时崩溃

> ID：13091501
> 
> 赞同：1
> 
> 时间：2012-10-26T17:20:12.360
> 
> 标签：c#, crash, bulletphysics

使用以下启动：

```
 BulletSharp.DefaultCollisionConstructionInfo collisionConstructionInfo =
            new BulletSharp.DefaultCollisionConstructionInfo();
        BulletSharp.DefaultCollisionConfiguration collisionConfiguration =
            new BulletSharp.DefaultCollisionConfiguration(
                collisionConstructionInfo );
        BulletSharp.Dispatcher collisionDispatcher =
            new BulletSharp.CollisionDispatcher(
                collisionConfiguration );
        BulletSharp.BroadphaseInterface broadPhaseCollisionInterface =
            new BulletSharp.SimpleBroadphase( );
        BulletSharp.CollisionWorld bulletCollisionWorld =
            new BulletSharp.CollisionWorld(
                collisionDispatcher,
                broadPhaseCollisionInterface,
                collisionConfiguration );

        BulletSharp.ConstraintSolver constraintSolver =
            new BulletSharp.SequentialImpulseConstraintSolver();
        BulletSharp.DynamicsWorld bulletDynamicsWorld =
            new BulletSharp.DiscreteDynamicsWorld(
                collisionDispatcher,
                broadPhaseCollisionInterface,
                constraintSolver,
                collisionConfiguration ); 
```

每秒运行 60 次：

```
bulletDynamicsWorld.StepSimulation( (float)deltaTime, 9, 1.0F / 40.0F ); 
```

然后在退出某个任意点时调用它们：

```
 Utility.SafeDispose( bulletDynamicsWorld );
        Utility.SafeDispose( constraintSolver );
        Utility.SafeDispose( broadPhaseCollisionInterface );
        Utility.SafeDispose( collisionDispatcher );
        Utility.SafeDispose( collisionConfiguration );
        Utility.SafeDispose( bulletCollisionWorld ); <<< The error happens here >>> 
```

执行突出显示的行时出现以下错误：

“运行时遇到致命错误。错误地址位于线程 0x1378 上的 0x6b1c9704。错误代码为 0xc0000005。此错误可能是 CLR 中的错​​误，也可能是用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM-interop 或 PInvoke 的用户编组错误，这可能会损坏堆栈。”

笔记：

1）这就是所有的项目符号代码。未添加任何碰撞对象或动态对象。

2) Utility.SafeDispose() 采用 IDiposable，检查空值，如果有效则调用 .Dispose()。

3）语言是C#，说清楚。

4) Utility.SafeDispose( CollisionWorld ) 在 .SafeDispose 语句列表中的位置似乎没有效果。

为什么会崩溃，我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:20:44.870

在处理 bulletCollisionWorld 时，它将访问 broadPhaseCollisionInterface 以清除世界创建的任何碰撞对。由于您在处置世界之前显式处置了冲突接口，因此世界将访问无效指针。

所以解决方案是先处理两个世界，然后处理碰撞接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:27:13.590

DiscreteDynamicsWorld 是一个碰撞世界。移除额外的碰撞世界不会导致错误；因此，问题可能在于有两个碰撞世界。似乎确实有一些全局变量。

# python - python数据分析，难懂cookbook代码

> ID：13091504
> 
> 赞同：2
> 
> 时间：2012-10-26T17:20:39.490
> 
> 标签：python, numpy, matplotlib, scipy

我正在学习使用 python 进行数据分析等，我对[scipy cookbook](http://www.scipy.org/Cookbook/LoktaVolterraTutorial)中的这段代码中发生的事情有点困惑。

当食谱通过 matplotlib 描述集成和绘图过程时，它首先具有：

```
t = linspace(0, 15, 1000)
X0 = array([10,5])
X = scipy.integrate.odeint(dX_dt, X0, t)
rabbits, foxes = X.T 
```

这段代码有什么作用？

```
rabbits, foxes = X.T 
```

具体来说，XT是做什么的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T17:23:23.793

`X.T`是 的转置`X`。因此，在那一行中，`X`必须是一个具有 shape 的数组`(N,2)`。`(2,N)`当你转置它时，你会得到一个可以解包的形状数组。

考虑：

```
>>> import numpy as np
>>> a = np.arange(10).reshape((5,2))
>>> a
array([[0, 1],
       [2, 3],
       [4, 5],
       [6, 7],
       [8, 9]])
>>> B,C = a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: too many values to unpack
>>> B,C = a.T
>>> B
array([0, 2, 4, 6, 8])
>>> C
array([1, 3, 5, 7, 9]) 
```

另请注意，*只要有可能*，转置将返回一个新视图（不会复制数据），因此这是一个非常有效的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:26:49.607

T 代表转置。所以 X 是对齐的，兔子被分配到第一个元素，狐狸被分配到第二个元素。这些是数组（相当于线性代数中的矩阵）而不是列表，因此对齐确实很重要。

# sql-server - SQL Server - 在聚合函数中按名称引用列

> ID：13091505
> 
> 赞同：2
> 
> 时间：2012-10-26T17:20:43.543
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2

我们的应用程序使用一系列表，其中包含许多 varchar(1000) 列。在系统开发过程中，这被认为是足够用户输入文本的空间。但是，现在我们遇到了文本被截断的问题，因此似乎有些用户正在输入更多可以容纳的文本。但是，我相信这些字段的滥用非常猖獗，我想看看正在使用哪些列。

从这里回答的另一个问题中，我提出了以下查询来提取表中 varchar 列的名称：

```
select
   syscolumns.name as [Column],
   syscolumns.length as [MaxLength]
from 
   sysobjects, syscolumns 
where sysobjects.id = syscolumns.id
and   sysobjects.xtype = 'u'
and   sysobjects.name = 'TableWithTooManyVarcharColumns'
and syscolumns.xusertype = 167 
```

但现在我想在新查询中使用这些列的名称，并计算

```
SELECT 
[Column] as [Name],
[MaxLength],
MAX(LEN([Column])) as [MaxUsedLength],
AVG(LEN([Column])) as [AvgUsedLength],
STDEV(LEN([Column])) as [StdDev]
FROM TableWithTooManyVarcharColumns
INNER JOIN **{{ reference to table from query above }}** 
```

当然，第一个查询返回列的名称，而第二个查询需要对列的引用，所以我不确定如何正确组合它们。任何 SQL Server 专家都可以提供帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:33:31.283

要么连接两个派生表，要么使用 CTE。顺便说一句，您在架构引用中使用了一些过时的术语

```
select 
      DefinedName = sysdef.name,
      Columnname = tbl.name,
      DefinedLength = sysdef.max_length, 
      etc ...
from (
        select c.name, c.max_length
            from sys.columns c 
        join sys.tables t 
            on c.object_id = t.object_id
            where t.name = 'TableWithTooManyVarcharColumns'
) sysdef
join (
        SELECT 
                [Column] as [Name],
                [MaxLength],
                MAX(LEN([Column])) as [MaxUsedLength],
                AVG(LEN([Column])) as [AvgUsedLength],
                STDEV(LEN([Column])) as [StdDev]
        FROM TableWithTooManyVarcharColumns
) tbl
on sysdef.name = tbl.name 
```

**或者**

```
;WITH sysdef AS (
        select c.name, c.max_length
                from sys.columns c 
            join sys.tables t 
                on c.object_id = t.object_id
                where t.name = 'TableWithTooManyVarcharColumns'
),
tbl AS (
        SELECT 
                [Column] as [Name],
                [MaxLength],
                MAX(LEN([Column])) as [MaxUsedLength],
                AVG(LEN([Column])) as [AvgUsedLength],
                STDEV(LEN([Column])) as [StdDev]
        FROM TableWithTooManyVarcharColumns
)
select
      DefinedName = sysdef.name,
      Columnname = tbl.name,
      DefinedLength = sysdef.max_length, 
      etc ...
from tbl t 
join sysdef d
on tbl.name = d.name 
```

**编辑**

```
declare @sql nvarchar(4000)
declare @colname nvarchar(100)
declare @max_length nvarchar(15)
declare c cursor for 
    select c.name, c.max_length
    from sys.columns c 
        join sys.tables t
            on c.object_id = t.object_id
    where t.name = 'TableWithTooManyVarcharColumns'

open c 
fetch next from c into 
    @colname, @max_length

    while @@FETCH_STATUS = 0
        begin
            set @sql = 'SELECT ''' + QUOTENAME(@colname) + ''', ' + @max_length + ' [MaxLength],' +                     
                    'MAX(LEN('+QUOTENAME(@colname)+')) as [MaxUsedLength],
                    AVG(LEN('+QUOTENAME(@colname)+')) as [AvgUsedLength],
                    STDEV(LEN('+QUOTENAME(@colname)+')) as [StdDev]
                    FROM TableWithTooManyVarcharColumns'
            exec(@sql)
            fetch next from c 
                into @colname, @max_length
        end
    close c 
    deallocate c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T21:32:17.560

为了完整起见，我将添加原来是我的解决方案的内容。它以 swasheck 的解决方案为原型，因此他的回答得到了充分肯定，这个解决方案有点混乱，但它应该作为任何其他可能遇到此问题的人的基础：

```
DECLARE @TableName nvarchar(100) = 'TableToAnalyze' -- Change to your table name

declare @SQLStat nvarchar(4000)
declare @ColName nvarchar(100)
declare @MaxLength integer
declare @MaxUsedLength integer
declare @AvgUsedLength float
declare @StdDev float
declare @parm1IN nvarchar(100)
declare @parm2IN integer
declare @parm3IN integer
declare @parm4IN float
declare @parm5IN float
declare @parm1O integer
declare @parm2O float
declare @parm3O float

CREATE TABLE #Details (
    ColumnName nvarchar(100) NULL,
    MaxLength integer null,
    MaxUsedLength integer null,
    AvgUsedLength float null,
    StdDev float null
)

declare c cursor for 
    select c.name, c.max_length
    from sys.columns c 
        join sys.tables t
            on c.object_id = t.object_id
    where t.name = @TableName
    and c.user_type_id = 167

DECLARE @ParmDefinition1 NVARCHAR(500)

SET @ParmDefinition1 = N'@parm1IN nvarchar(100), 
                         @parm1O int OUTPUT, 
                         @parm2O float OUTPUT, 
                         @parm3O float OUTPUT'

DECLARE @ParmDefinition2 NVARCHAR(500)

SET @ParmDefinition2 = N'@parm1IN nvarchar(100), 
                         @parm2IN int, 
                         @parm3IN int, 
                         @parm4IN float, 
                         @parm5IN float'

open c 
fetch next from c into 
    @ColName, @MaxLength

    while @@FETCH_STATUS = 0
        begin
            set @SQLStat = N'SELECT @parm1O = MAX(LEN('+ QUOTENAME(@ColName) + ')),
                    @parm2O = AVG(LEN('+ QUOTENAME(@ColName) + ')),
                    @parm3O = STDEV(LEN('+ QUOTENAME(@ColName) + '))
                    FROM ' + QUOTENAME(@TableName)

            EXECUTE sp_executesql @SQLStat, @ParmDefinition1, 
            @parm1IN = @ColName,
            @parm1O = @MaxUsedLength OUTPUT,    
            @parm2O = @AvgUsedLength OUTPUT,
          @parm3O = @StdDev OUTPUT

            set @SQLStat = 'INSERT INTO #Details (  ColumnName, MaxLength, MaxUsedLength, AvgUsedLength, StdDev)'
            + ' VALUES(@parm1IN, @parm2IN, @parm3IN, @parm4IN, @parm5IN)'

            EXECUTE sp_executesql @SQLStat, @ParmDefinition2,
            @parm1IN = @ColName,
            @parm2IN = @MaxLength,
            @parm3IN = @MaxUsedLength,  
            @parm4IN = @AvgUsedLength,
          @parm5IN = @StdDev

            fetch next from c 
                into @ColName, @MaxLength
        end
    close c 
    deallocate c

SELECT * FROM #Details

DROP TABLE #Details 
```

# csv - 使用 d3.js 从 csv 文件中绘制 voronoi 图

> ID：13091506
> 
> 赞同：5
> 
> 时间：2012-10-26T17:20:51.353
> 
> 标签：csv, d3.js, voronoi

我想使用[http://mbostock.github.com/d3/ex/voronoi.html](http://mbostock.github.com/d3/ex/voronoi.html)从 csv 文件中的一组点绘制 voronoi 图。

我修改了代码：

```
var w = 1200,
h = 800;

d3.text("ReMeRi_4_2_2_0.csv", function(datasetText) {

var vertices = d3.csv.parseRows(datasetText);

var svg = d3.select("#chart")
  .append("svg")
    .attr("width", w)
    .attr("height", h)
    .attr("class", "BuPu");

svg.selectAll("path")
    .data(d3.geom.voronoi(vertices))
  .enter().append("path")
    .attr("class", function(d, i) { return i ? "q" + (i % 9) + "-9" : null; })
    .attr("d", function(d) { return "M" + d.join("L") + "Z"; })

svg.selectAll("circle")
    .data(vertices.slice(1))
  .enter().append("circle")
    .attr("transform", function(d) { return "translate(" + d + ")"; })
    .attr("r", 2)

 text1 = svg.append("svg:text")
    .text("control")
    .attr("x", 150)
    .attr("y", 200)
    .style("stroke", "orange")
    .style("stroke-width", 0)
    .style("font-size", "80%")
    .style("fill", "orange");

}); 
```

点绘制正确，但镶嵌的多边形不正确。

我试图添加标题行和 csv.parse() 函数但没有成功。一开始我在想解决方案是遍历数组以解析为浮动，但我做不到。如果这是正确绘制点的原因吗？

csv 文件如下所示：

```
0.0,0.0
116.78032769067718,0.0
193.02842412648215,78.92418723196411
323.01058809711515,54.15210221124609
378.8576448450217,202.5192012545716
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:19:08.070

正如您所建议的，我认为这是将数字解析为字符串而不是数字的问题。即使这不是破坏它的原因，修复它也会很好。这是一种方法（可能是一种更惯用的方法，不知道）：

```
var vertices = d3.csv.parseRows(
  datasetText,
  function(pt) { return [parseFloat(pt[0]), parseFloat(pt[1])]; })
); 
```

这可能会解决你的问题。

# java - 如何根据名称、大小和最后修改时间对目录列表进行排序？

> ID：13091517
> 
> 赞同：0
> 
> 时间：2012-10-26T17:22:00.437
> 
> 标签：java, file, sorting, directory, directory-listing

我只是想弄清楚如何根据名称、上次修改时间和大小对目录列表进行排序。我知道您可以使用 File 方法访问文件的名称、大小、最后修改，但我不知道如何对它进行排序。如果有人能指出我正确的方向，那就太好了。

```
public void printDirectoryContents(String path, PrintWriter writer)
{
    File[] list = root.listFiles();
    Arrays.sort(list);

    for ( File f : list )
    {           
        String name = f.getName();
        long lastmod = f.lastModified();
        SimpleDateFormat simple = new SimpleDateFormat("dd-MMM-yyyy HH:mm");
        String formatted = simple.format(new Date(lastmod));
        long length = f.length();

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:26:31.220

您应该实现一个[Comparator](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)以根据您提到的属性对文件进行排序，并将其作为参数传递给[Arrays.sort](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28T%5b%5d,%20java.util.Comparator)方法。

```
 Arrays.sort(list, new Comparator<File>()
    {
        public int compare(File file1, File file2)
        {
            int result = ...
            .... comparison logic
            return result;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:27:06.657

`Comparator`为每个排序需要创建一个。然后使用`Comparator`它对特定的文件对象进行排序`Collection`。

[http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

您可以在此处查看更多示例：

[http://www.javadeveloper.co.in/java-example/java-comparator-example.html](http://www.javadeveloper.co.in/java-example/java-comparator-example.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:32:33.367

您可以编写自己的比较器

```
public class FileComparator implements Comparator<File> {

    //This should sort first by name then last-modified and then size
    public int compare(File f1, File f2) {
        int nameComparisonResult = o1.getName().compareTo(o2.getName());
        if(nameComparisonResult != 0) return nameComparisonResult;
        int lModCompResult = Long.valueOf(o1.lastModified()).compareTo(Long.valueOf(o2.lastModified()));
        if(lModCompResult != 0) return lModCompResult;      
        return Long.valueOf(o1.getTotalSpace()).compareTo(Long.valueOf(o2.getTotalSpace()));
    }
} 
```

并使用它对数组进行排序`Arrays.sort(list, new FileComparator());`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T17:29:14.987

而不是`Arrays.sort(list);`考虑使用这样的东西：

```
 Arrays.sort(list, new Comparator<File>() {
        @Override
        public int compare(File file1, File file2) {
            //your comparison logic
            return <your_return_value>;
        }

    }); 
```

`compare(...)`然后，您可以继续在方法中根据文件名、日期和大小编写比较逻辑

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T17:41:39.120

看看[Apache Commons IO](http://commons.apache.org/io/)。

您可以找到满足您所有要求的比较器。

有关用法，请参见：[http ://commons.apache.org/io/api-release/org/apache/commons/io/comparator/package-summary.html#package_description](http://commons.apache.org/io/api-release/org/apache/commons/io/comparator/package-summary.html#package_description)

```
Sorting
 All the compartors include convenience utility sort(File...) and sort(List) methods. 

 For example, to sort the files in a directory by name: 
 File[] files = dir.listFiles();
 NameFileComparator.NAME_COMPARATOR.sort(files);

 ...alternatively you can do this in one line: 
 File[] files = NameFileComparator.NAME_COMPARATOR.sort(dir.listFiles());

Composite Comparator
 The CompositeFileComparator can be used to compare (and sort lists or arrays of files) by combining a number other comparators. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-26T17:53:23.100

此类将向您展示 Comparable 接口的实现，并使用 Collections.sort 方法根据文件名对列表进行排序。

```
package com.roka.tgpl.sms;

  import java.util.ArrayList;
  import java.util.Calendar;
  import java.util.Collections;

  import java.util.Date;
  import java.util.List;

  public class MyFile implements Comparable<MyFile> {

     private String name;
     private Date lastModified;
     private int size;

     MyFile(String name,Date lastModified,int size){
         this.name = name;
         this.lastModified =lastModified;
         this.size = size;
     }
     /**
    * @return the name
    */
    public String getName() {
       return name;
   }

   /**
    * @param name the name to set
    */
   public void setName(String name) {
       this.name = name;
   }

   /**
    * @return the lastModified
    */
   public Date getLastModified() {
    return lastModified;
   }

   /**
    * @param lastModified the lastModified to set
    */
   public void setLastModified(Date lastModified) {
       this.lastModified = lastModified;
   }

    /**
     * @return the size
    */
   public int getSize() {
        return size;
   }

   /**
    * @param size the size to set
    */
   public void setSize(int size) {
    this.size = size;
   }

   public int compareTo(MyFile o) {

         int compare = this.name.compareTo(o.getName());

       return compare;
    }

    public static void main(String arg []) {

       List<MyFile> fileList = new ArrayList<MyFile>();
       fileList.add(new MyFile("DCB", Calendar.getInstance().getTime(), 5));
       fileList.add(new MyFile("ABC", Calendar.getInstance().getTime(), 15));
        Collections.sort(fileList);

       for(MyFile file : fileList){
            System.out.println(file.getName());
           }

      }

    } 
```

# python - /bin/env: python: 没有这样的文件或目录（Windows 通过 Git Bash 尝试安装新的 Parse Cloud Code）

> ID：13091522
> 
> 赞同：25
> 
> 时间：2012-10-26T17:22:26.907
> 
> 标签：python, windows, msysgit, git-bash

尝试从[此处的链接](http://www.python.org/download/)安装 python似乎无法访问`python`Msysgit 中的命令...按照[此处的说明](https://stackoverflow.com/questions/12436475/how-to-install-parse-com-cloud-code-on-windows)，实际上并没有说明如何`python`根据需要开始工作。

运行时的当前错误`parse new project_name`是：

> /bin/env: python: 没有这样的文件或目录

我相信这可能是因为它安装在`C:\Python`......有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-10-29T10:08:37.040

这个错误意味着 Git Bash 不知道你的 python.exe 在哪里。它搜索您的正常 Windows 搜索路径，即`PATH`环境变量。您可能已经在“确保 Python 在 Git Bash 中工作”的说明的第 4 步失败了：

```
$ python --version
sh.exe: python: command not found 
```

要解决此问题，请将`C:\Python`（或安装 python 的任何位置）附加到`PATH`windows 中的环境变量[（此处的说明）](http://www.computerhope.com/issues/ch000549.htm)。您需要在此之后重新启动 bash 才能使更改生效。这也将允许您从 Windows 命令提示符运行 python。

```
C:\> python --version
Python 2.7.2 
```

* * *

如果你不想改变你的 windows`PATH`变量或者让 python 只对 git bash 可用，你可以`.bashrc`在你的目录中创建一个文件`%USERPROFILE%`并在那里设置变量：

```
C:\>notepad %USERPROFILE%\.bashrc 
```

并添加

> 导出 PATH=/c/Python:$PATH

到文件。每次启动 git bash 时都会执行该脚本，并将其`C:\Python`添加到 git bash 的`PATH`变量中，从而保持系统范围的 PATH 变量不变。

现在您知道必须做什么，您可以在 bash 上使用此快捷方式（将导出命令附加到您的 .bashrc）

```
$ echo export PATH=/c/Python:\$PATH >> ~/.bashrc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:33:01.087

嗯。如果您按照说明使用 Python 2.7，则可以尝试使用“C:/Python27/python.exe”代替“python”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T13:34:05.927

我认为您可以在 PATH 环境变量中添加 python.exe 的位置。请按照以下步骤操作：转到我的电脑->右键单击->属性->高级系统设置->单击环境变量。现在单击 PATH，然后单击 EDIT。在变量值字段中，转到末尾并附加“;” （不带引号），然后添加要通过 Git-Bash 运行的 .exe 文件的绝对路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-29T11:57:01.283

不知道这是否是您的问题，但它总是值得一试。检查你的python路径设置正确吗？计算机->属性->高级系统设置->环境变量->系统变量->PYTHONPATH, value = C:\PYTHON20;C:\PYTHON20\DLLS;C:\PYTHON20\LIB;C:\PY THON20\LIB\ LIB-TK

# javascript - Internet Explorer 中的 Javascript 无效日期错误

> ID：13091523
> 
> 赞同：46
> 
> 时间：2012-10-26T17:22:31.060
> 
> 标签：javascript, internet-explorer, date

这里相对简单的 javascript，不知道为什么 IE 讨厌我（我想如何对待别人你想被对待）。

```
var newDate = new Date("2012, 11, 2 19:30:00:000");
alert(newDate); 
```

这适用于 Chrome 和 FF，但 IE 输出“无效日期”

**摆弄我这个**：http: [//jsfiddle.net/k6yD6/](http://jsfiddle.net/k6yD6/)

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-26T17:26:25.907

给日期构造函数的字符串[应该是 RFC2822 或 ISO 8601 格式的日期](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)。在你的例子中它不是。尝试以下操作：

```
new Date("2012-11-02T19:30:00.000Z"); 
```

或使用[替代构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)：

```
new Date(2012, 11, 2, 19, 30, 0) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-26T17:31:40.373

IE 似乎不支持数字字符串中的毫秒和月。尝试这个：

```
new Date("November 2, 2012 19:30:00"); 
```

或者

```
new Date(year, month, day, hours, minutes, seconds, milliseconds) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-06T14:25:04.617

利用

```
var newDate = moment("2012, 11, 2 19:30:00:000").toDate();
alert(newDate); 
```

这也适用于 IE。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-16T07:14:57.373

我在使用 Internet Explorer 时遇到了同样的问题。这就是我最初格式化日期和时间的方式，

```
function formatDateTime(date, formatString = 'MM/DD/YYYY hh:mm A') {
  return moment(new Date(date)).format(formatString);
} 
```

问题出在`new Date()`. 我刚刚删除它，因为它已经是一个`UTC`日期。所以只是，

```
return moment(date).format(formatString); 
```

这在包括**IE**在内的所有浏览器中都适用于我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-30T07:01:08.940

要在 中工作`IE`，日期应采用正确的格式。我使用以下格式解决了同样的问题：

```
var tDate = new Date('2011'+"-"+'01'+"-"+'01'); //Year-Month-day 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-01T08:02:38.290

```
var time = new Date("2021-12-01 17:02:12");
if(isNaN(time))
{
    time= new Date(date.replace(/ /g,'T')+'.000Z');
} 
```

# android - ActionbarSherlock 在滑动时更新数据

> ID：13091527
> 
> 赞同：0
> 
> 时间：2012-10-26T17:22:56.333
> 
> 标签：android, android-actionbar, actionbarsherlock

我似乎无法为下一个人们认为简单的任务找到顺利的解决方案：

我正在为我的应用程序使用带有 2 个标签栏的 ActionbarSherlock。在第一个标签栏上我有简单的输入表单，第二个我想在 ListView 中显示输入的数据。

小部件和视图在这里没有问题..我唯一的问题是下一个：

**我希望在用户滚动进入时更新我的​​列表视图。**

我怎样才能做到这一点？到目前为止，我一直在使用 TextSwitcher 和执行 ListView 刷新的静态变量。

谢谢

# c# - 如果检查则反转

> ID：13091535
> 
> 赞同：3
> 
> 时间：2012-10-26T17:23:33.323
> 
> 标签：c#, if-statement

我有一个庞大的检查列表，例如检查整数是 4 还是 10，如果是 4，它会将这个 int 更改为 10，反之亦然，所以我的 if 检查将是这样的：

```
int i = getval();
if (i == 4)
{
    i = 10;
}
else if (i == 10)
{
    i = 4;
} 
```

我的问题是有另一种方法可以做到这一点，而无需检查每个条件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T17:24:19.720

您正在寻找**[switch](http://msdn.microsoft.com/en-us/library/06tc147t%28v=vs.71%29.aspx)**语句。

```
int i = getval();
switch(i)       
      {         
         case 4:   
            i = 10;
            break;                  
         case 10:            
            i = 4;
            break;                 
         default:            
            Console.WriteLine("Invalid selection. Please select 4 or 10.");            
            break;      
       } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-26T17:38:30.187

如果您有一个巨大的列表，您可能会考虑一些列表结构。

```
static Dictionary<int, int> exchange = new Dictionary<int, int>();

static Constructor()
{
    AddExchangePair(4, 10);
    AddExchangePair(3, 12);
    ...
}

static void AddExchangePair(int a, int b)
{
    exchange.Add(a,b);
    exchange.Add(b,a);
}

public staic bool Exchange(ref int value)
{
    int newValue = 0;
    bool exchanged = exchange.TryGetValue(value, out newValue);
    if (exchanged) value = newValue;
    return exchanged;
} 
```

这适用于大量的交换对列表。

如果您使用重复号码（例如 (7,14) 和 (14, 16)）调用 AddExchangePair，您将收到异常。您可能需要考虑在这种情况下该怎么做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T17:52:29.840

鉴于您有“大量支票”，我不同意使用开关。我会让检查成为由字典支持的自己的类。这将有助于最小化 switch 语句的大小，并强制将检查与其余代码分开：

```
class Cases
{
    private  static readonly Dictionary<int, int>
        List = new Dictionary<int, int>
        {
            {9, 5},
            {3, 2},
            {7, 12},
            {4, 10}
        }; 
    public static int GetCaseValue (int v)
    {
        int result = 0;
        return List.TryGetValue(v, out result) ? result : v;
    }
}
class Program
{
    public static void Main()
    { 
        var test = Cases.GetCaseValue(4);
        test = Cases.GetCaseValue(12);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T17:25:26.940

```
switch(i)
{
case 4 : i=10; break;
case 10: i=4; break;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-26T17:25:49.420

你不会绕过某种 if / switch 语句，因为从 4 到 10 并返回没有简单的方法。如果它是 0 和 X 你之间交换，你可以去`variable = X - variable;`交换它就好了，但是对于 4 和 10，上面的代码很好。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-26T17:25:56.410

试试这个：

```
int i = getval() == 4 ? 10 : 4; 
```

那应该检查是否`getval()`为 4，然后在 4 和 10 之间切换。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-26T17:26:19.530

这就是你想要的。

```
int i = getval();
switch (i)
{
    case 4:
    i=10;
    break;
    case 10:
    i=4;
    break;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-26T17:50:24.173

有人打败了我（并且写得更好），但是因为我写了代码，所以我还是发布了它。

我还要指出，`ref`这里的使用可能在我们的两个答案中只是为了保持对您的问题的遵守，而实际上这样的事情可能会使用一种功能方法，所以如果不是调用`Swap(ref i)`它，而是调用它，`i = Swap(i)`并且 Swap 会返回它的输入，如果它没有找到匹配项。当然，您可能需要使用一个原因`ref`- 我只是想不出一个明显的原因。

```
void Main()
{   
    int i;

    i = 1; 
    Swap(ref i); // no swap
    Console.WriteLine (i);

    i = 10; 
    Swap(ref i); // swap with 4
    Console.WriteLine (i);

    i = 4;
    Swap(ref i); // swap with 10
    Console.WriteLine (i);
}

void Swap(ref int i)
{
    if(swaps == null)
    {
        swaps = new List<Tuple<int, int>>();
        swaps.Add(Tuple.Create(4, 10));
    }

    int compareTo = i;
    var swap1 = from c in swaps where c.Item1 == compareTo select c.Item2;
    var swap2 = from c in swaps where c.Item2 == compareTo select c.Item1;

    if(swap1.Any())
        i = swap1.Single();
    else if(swap2.Any())
        i = swap2.Single();
}

List<Tuple<int, int>> swaps; 
```

输出：

```
1
4
10 
```

# javascript - JavaScript 全局变量声明语法

> ID：13091538
> 
> 赞同：3
> 
> 时间：2012-10-26T17:23:53.260
> 
> 标签：javascript, global-variables, minify, google-closure-compiler

我正在编写一个 Javascript 库，我希望能够使用 Closure Compiler 的 ADVANCED_OPTIMIZATIONS 选项来缩小它。该库可能有两打全局变量，它们设置范围的下限和上限、字符串文字等。

为了使这些变量可以从其他源文件访问并避免删除死代码，我必须“导出”它们。请参阅[高级编译和外部](https://developers.google.com/closure/compiler/docs/api-tutorial3#export)。

因此，不要使用这种语法声明变量：

```
var fooMinValue = 10; 
```

我打算使用这种语法：

```
 window['fooMinValue'] = 10; 
```

我已经对此进行了测试，它似乎工作正常。我的问题是，使用这种语法有什么缺点吗？自 IE 6 以来发布的所有浏览器都支持它吗？（或者我应该完全使用一种完全不同的技术？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:33:32.927

虽然两者都是全局对象的属性，但还是有区别的：当你用 声明变量时`var`，它的[`[[Configurable]]`内部属性](http://es5.github.com/#x8.6.1)被设置为`false`。[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)因此，不能用（除了）来改变它的属性`[[Value]]`。最显着的效果是此类变量不能为[`delete`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)d：

```
​var foo = 'bar';
window['bar'] = 'baz';
console.log(foo); // 'bar'
console.log(bar); // 'baz'
delete foo;       // doesn't work, you can't delete vars
delete bar;       // works, bar is an object property
console.log(foo); // 'bar'
console.log(bar); // ReferenceError 
```

此外，将变量分配给属性时，您会复制该值而不是引用该变量。这意味着对属性的外部更改不会影响变量的值。

```
(function() {
  var foo = 'bar';
  window['foo2'] = foo; //export foo
  console.log(foo);  // will output 'bar'
  setTimeout(function() { console.log(foo) }, 1000); //will output 'bar'
})();
window['foo2'] = 'baz';
console.log(window['foo2']); // will output 'baz' 
```

上面的代码将产生以下输出：

```
'bar'
'baz'
'bar' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:28:56.187

除了如果您的脚本未在浏览器上运行，则该窗口很可能未定义。

不客气！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:29:39.813

它会起作用；这是完全有效的语法；它在 IE6 及更高版本中受支持。

演示： http://ie6test.it/?url=http: [//jsbin.com/usafeg/2](http://ie6test.it/?url=http://jsbin.com/usafeg/2)

# jquery - 为什么MVC中的视图没有显示？

> ID：13091545
> 
> 赞同：0
> 
> 时间：2012-10-26T17:24:16.710
> 
> 标签：jquery, asp.net-mvc

我进行了调试，它实际上进入了视图（调查），但视图没有返回页面。任何帮助将不胜感激！

//#edit是一个提交按钮，下面是脚本。

```
 $('#edit').click(function () {

    var sid = $('input[type=radio]:checked').val();
    var srid = sid.replace(/[^0-9]/g, '');
    var id = parseInt(srid);
    //alert(id);

    $.ajax({
        type: 'POST',
        url: '@Url.Action("Edit","MainPage")',
        data: { "id": id },
        success: function (result) {

        }

    });

}); 
```

//控制器

```
[HttpPost]
     public ActionResult Edit(int id = 0)
    {
         survey survey = db.surveys.Single(s => s.SurveyId == id);
         if (survey == null)
         {
             return HttpNotFound();
         }
        return View(survey);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:26:44.730

您需要对`result`回调中的变量进行一些处理，该变量将包含 HTML 源代码。

# android - Android - Eclipse 突然停止询问我要使用什么模拟器，并且在模拟器中不显示新内容

> ID：13091548
> 
> 赞同：0
> 
> 时间：2012-10-26T17:24:27.863
> 
> 标签：android, android-emulator

我有一个奇怪的问题，每当我尝试对模拟器运行新构建时，系统不再询问我要使用什么模拟器，而只是构建旧版本的代码，无论当前的更改是什么.

有谁知道为什么会这样？我已经重新启动了两次，并清理了项目，但无法在模拟器上获取最新的代码。

建议赞赏:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:36:04.517

转到运行 --> 运行配置... --> 目标并确保标记了“始终提示选择设备”

# android - 如何将 adb shell 命令结果添加到变量并在 if 语句中使用它

> ID：13091550
> 
> 赞同：1
> 
> 时间：2012-10-26T17:24:30.873
> 
> 标签：android, shell, batch-file, adb

我在 Windows 批处理中使用以下行

```
SET MOBILE_PATH=/mnt/sdcard/koinoxrista
SET FILE_BILL="adb shell ls %MOBILE_PATH% ^| find /c "Bill.txt" " 
```

这条线`adb shell ls %MOBILE_PATH% | find /c "Bill.txt"`给了我 1

我想编写一个 If 语句，如果 FILE_BILL 等于 1，则执行某些操作，如果等于 0，则执行其他操作。我该怎么做？

```
if %FILE_BILL% == 1 (
    echo the file exists
) else (
    echo the file does not exist
) 
```

我总是收到消息`file does not exist`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:44:25.183

您的问题表明 Bill.txt 在给定位置存在（或不存在）仅重要，而不是`find /c "Bill.txt"`给出`1`. 如果这是真的，那么当“Bill.txt”在 adb 命令的输出中时，您可以简单地使用`%ERRORLEVEL%`：

```
SET MOBILE_PATH=/mnt/sdcard/koinoxrista
adb shell ls %MOBILE_PATH% | 查找 /c "Bill.txt" >NUL
如果 %ERRORLEVEL% == 0 (
    回显文件存在
） 别的 （
    回显文件不存在
)

```

您可以将 %ERRORLEVEL% 保存到其他变量以供以后使用。

# ruby - 如何遍历整数的数字？

> ID：13091558
> 
> 赞同：22
> 
> 时间：2012-10-26T17:25:16.550
> 
> 标签：ruby, integer, loops

> **可能重复：**
> [将长固定数字转换为数组 Ruby](https://stackoverflow.com/questions/12908008/turning-long-fixed-number-to-array-ruby)

好吧，我必须在 Ruby 中遍历整数的数字。现在我只是把它分成一个数组，然后迭代它。但是我想知道是否有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-26T17:37:35.873

最短的解决方案可能是：

```
1234.to_s.chars.map(&:to_i)
#=> [1, 2, 3, 4] 
```

更正统的数学方法：

```
class Integer
  def digits(base: 10)
    quotient, remainder = divmod(base)
    quotient == 0 ? [remainder] : [*quotient.digits(base: base), remainder]
  end
end

0.digits #=> [0]
1234.digits #=> [1, 2, 3, 4]
0x3f.digits(base: 16) #=> [3, 15] 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-26T17:29:18.620

您可以使用模数/除以 10 的旧技巧，但这不会明显更快，除非您有*大量*数字，并且它会将数字向后提供：

```
i = 12345

while i > 0 
  digit = i % 10
  i /= 10
  puts digit
end 
```

输出：

```
5
4
3
2
1 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-26T18:23:17.927

```
split=->(x, y=[]) {x < 10 ? y.unshift(x) : split.(x/10, y.unshift(x%10))}

split.(1000) #=> [1,0,0,0]
split.(1234) #=> [1,2,3,4] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-26T19:17:59.697

Ruby has ，[`divmod`](http://www.ruby-doc.org/core-1.9.3/Numeric.html#method-i-divmod)它将一次性计算两者：`x%10``x/10`

```
class Integer
  def split_digits
    return [0] if zero?
    res = []
    quotient = self.abs #take care of negative integers
    until quotient.zero? do
      quotient, modulus = quotient.divmod(10) #one go!
      res.unshift(modulus) #put the new value on the first place, shifting all other values
    end
    res # done
  end
end

p 135.split_digits #=>[1, 3, 5] 
```

对于像 Project Euler 这样速度很重要的东西，这很不错。在 Integer 上定义它会导致它在 Bignum 上也可用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-27T11:31:40.713

我喜欢枚举器的优点。我为我的一个项目编写了这段代码：

```
class Integer
  def digits
    Enumerator.new do |x|
      to_s.chars.map{|c| x << c.to_i }
    end
  end
end 
```

这使您可以访问所有好的 Enumerator 东西：

```
num = 1234567890

# use each to iterate over the digits
num.digits.each do |digit|
  p digit
end

# make them into an array
p num.digits.to_a     # => [1, 2, 3, 4, 5, 6, 7, 8, 9, 0]

# or take only some digits
p num.digits.take(5)  # => [1, 2, 3, 4, 5]

# you can also use next and rewind
digits = num.digits
p digits.next         # => 1
p digits.next         # => 2
p digits.next         # => 3
digits.rewind
p digits.next         # => 1 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-26T17:28:03.693

尝试除以 10（给你最后一位），然后除以 10（给你剩下的数字），重复这个直到你得到最后一位。当然，如果要从左到右遍历数字，则必须颠倒顺序。

# c++ - 如何防止使用尚未构建的类成员？

> ID：13091561
> 
> 赞同：4
> 
> 时间：2012-10-26T17:25:25.243
> 
> 标签：c++, constructor

我有以下课程：

```
class A
{
public:
    A() { x = 0; std::cout<<"A default ctor()\n"; }
    A(int x_) { x = x_; std::cout<<"A normal ctor()\n"; }
    int x;
};

class B
{
public:
    B() { std::cout<<"B ctor()\n"; }
private:
std::string str;
}; 
```

和一个创建对象 B 的函数，以对象 A 作为参数：

```
B
createB(const A& a) {
    std::cout<<"a int: "<<a.x<<"\n";
    return B();
} 
```

如果我设计一个 C 类，它具有类型 A 和 B 的成员，并在构造 A 对象之前构造 B 对象，**但使用 A 对象这样做**，这将在没有警告的情况下编译，但它会默默地输入一个错误：

```
class C
{
public:
    C(): b(createB(a)), a(10) {}
private:
    B b;
    A a;
};

int main()
{
    C c;
    return 0;
} 
```

当然，上面的例子是一个微不足道的例子，但我在现实世界中看到过它，代码要复杂得多（现在是星期五，晚上 8:30，我刚刚修复了这个导致段错误的错误）。

我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:05:50.103

I would agree with what others have suggested, namely that the onus is on the designer to ensure that objects are initialized before use. I see two ways of doing that in your case:

First (and easiest), reverse the order of `a` and `b` in the class definition:

```
class C
{
public:
    C(): b(createB(a)), a(10) {}
private:
    A a;
    B b;
}; 
```

Second, you could move `a` to a base class if you want to **really** emphasize that it's initialization occurs before that of other members:

```
class CBase
{
protected:
    CBase(): a(10) {}
protected:
    A a;
};

class C : private CBase
{
public:
    C(): b(createB(a)) {}
private:
    B b;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:35:42.187

我看到了三种可能的选择：

# 要求`A`在建造之前建造`C`：

```
class C
{
public:
   C(const A& a) : a_(a), b_(a) {}
private:
   A a_;
   B b_;
}; 
```

# 在构造`A`“B”之前构造：

延迟构建`B`直到`A`完成。这会阻止未定义的行为发生，但不会通过接口强制执行正确的行为（如选项 1 和 3*所做*的那样）

```
class C
{
public:
   C() : a_(/* construct as appropriate */)
   {
      b_.reset(new B(a_));
   }

private:
   A a_;
   std::unique_ptr<B> b_;
}; 
```

# 如果设计允许，请`B`包含（并暴露）`A`。

从一个简单的例子来看，这似乎是可能的，但在现实生活中可能不是：

```
class B
{
public:
   const A& my_a() {return a_;}
private:
   // construct as appropriate (?)
   A a_;
};

class C
{
private:
   B b_;
}; 
```

# silverlight - Silverlight 5 中的矢量打印：它是否适用于商业应用？

> ID：13091562
> 
> 赞同：2
> 
> 时间：2012-10-26T17:25:26.457
> 
> 标签：silverlight, printing, silverlight-5.0, postscript

我们一直在研究 Silverlight 5 中的客户端打印，并试图确定它是否适用于我们的应用程序。问号是 PostScript 兼容性。我知道如果目标打印机（或其驱动程序）不支持 PS，那么 Silverlight 将回退到位图打印，但我也知道位图打印很慢。所以我们是否使用它的问题很大程度上取决于 PostScript 普遍性的问题。

我的问题是：PS 和 PS 兼容的驱动程序有多常见？它们是无所不在、无处不在，还是我们应该预见到许多客户不得不退回到较慢的位图打印方法？如果许多/大多数客户不得不回退到位图打印，那么矢量打印在 SL5 中是否真的可以用于商业用途？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:20:20.180

所以，我要继续回答我自己的问题，因为我发现了。

我们尝试打印包含一个图像、两条水平线和一大堆文本的两页文档。首先它是使用与 PostScript 兼容的打印机驱动程序打印的，它在正常打印时间内完美地打印了两页（即，不会过长或任何其他时间）。

然后，我们尝试使用不兼容 PostScript 的打印机驱动程序进行打印（从而强制 Silverlight 使用位图打印进行打印。花了 4 分钟，生成了一个 360mb 的假脱机文件，并打印出两个完全空白的页面。

现在我们完全有可能在打印机驱动程序中目睹了一个怪异的错误。然而，我们得出的结论是，这不是我们准备抓住的机会，因此我们认为 Silverlight 5 Vector Printing 不可用。

# ravendb - RavenDB 集群模式有什么用

> ID：13091564
> 
> 赞同：0
> 
> 时间：2012-10-26T17:25:28.343
> 
> 标签：ravendb, clustered-index

在 Windows 环境下，我想知道 RavenDB 集群模式是否存在只是为了进行故障转移还是也提高了读取性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:07:25.427

它通常用于故障转移场景。

# haskell - 为什么这个树记忆的 Haskell 函数不比未记忆的版本快？

> ID：13091567
> 
> 赞同：1
> 
> 时间：2012-10-26T17:25:55.257
> 
> 标签：haskell, tree, memoization

我试图了解如何在 Haskell 中通过各种数据类型的参数来记忆函数。[我已经为 Ralf Hinze 的文章“ Memo functions, polytypically！](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&cad=rja&ved=0CDgQFjAC&url=http%3A%2F%2Fwww.staff.science.uu.nl%2F~jeuri101%2FMeetings%2Fwgp2000%2FHinzeMemo.ps&ei=k8WKUJupKMav0AGmkIG4Ag&usg=AFQjCNEJm4mCv-_GGDTtnCY9kvdmIN4p3A&sig2=llb_ImtVIzdRUUJYkWQJww) ”中的 Tree 类型实现了制表和应用函数。

我的实现如下。我的测试函数计算深度为 d 的树中子树的数量。如果我记住递归调用，这个函数应该更快吗？不是：在我的系统上计时两个版本给出：

```
helmholtz:LearningHaskell edechter$ time ./Memo 1 23
Not memoized: # of subtrees for tree of depth 23 is: 25165822

real    0m1.898s
user    0m1.886s
sys 0m0.011s
helmholtz:LearningHaskell edechter$ time ./Memo 0 23
Memoized: # of subtrees for tree of depth 23 is: 25165822

real    0m5.129s
user    0m5.013s
sys 0m0.115s 
```

我的代码很简单：

```
-- Memo.hs
import System.Environment

data Tree = Leaf | Fork Tree Tree deriving Show
data TTree v = NTree v (TTree (TTree v)) deriving Show

applyTree :: TTree v -> (Tree -> v)
applyTree (NTree tl tf) Leaf = tl
applyTree (NTree tl tf) (Fork l r) = applyTree (applyTree tf l) r

tabulateTree :: (Tree -> v) -> TTree v
tabulateTree f = NTree (f Leaf) (tabulateTree $ \l
                                     -> tabulateTree $ \r -> f (Fork l r))

numSubTrees :: Tree -> Int
numSubTrees Leaf = 1
numSubTrees (Fork l r ) = 2 + numSubTrees l + numSubTrees r

memo = applyTree . tabulateTree

mkTree d | d == 0 = Leaf
         | otherwise = Fork (mkTree $ d-1) (mkTree $ d-1)

main = do
  args <- getArgs
  let version = read $ head args
      d = read $ args !! 1
      (version_name, out) = if version == 0
                              then ("Memoized", (memo numSubTrees) (mkTree d))
                              else ("Not memoized", numSubTrees (mkTree d))
  putStrLn $ version_name ++ ": # of subtrees for tree of depth "
               ++ show d ++ " is: " ++ show out 
```

**更新**

我明白为什么我的函数不会利用记忆，但我仍然不明白如何构建一个确实利用这一点的函数。基于[此处](http://www.haskell.org/haskellwiki/Memoization)的斐波那契记忆示例，我的尝试如下所示：

```
memofunc :: Tree -> Int
memofunc  = memo f
    where f (Fork l r) = memofunc l + memofunc r
          f (Leaf) = 1

func :: Tree -> Int
func (Leaf) = 1
func (Fork l r) = func l + func r 
```

但这仍然没有做正确的事情：

```
helmholtz:LearningHaskell edechter$ time ./Memo 0 23
Memoized: # of subtrees for tree of depth 23 is: 8388608

real    0m10.436s
user    0m9.895s
sys 0m0.532s
helmholtz:LearningHaskell edechter$ time ./Memo 1 23
Not memoized: # of subtrees for tree of depth 23 is: 8388608

real    0m1.666s
user    0m1.654s
sys 0m0.011s 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T19:42:56.823

`numSubTrees`是一个递归函数，你`memo`无法窥视递归：这意味着`memo numSubTrees`只查找第一次调用，而递归调用仍在使用未记忆的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:11:44.690

两位回答者都是正确的，但这里有一个更完整的回答。

我的原始代码中有两个错误。第一个，我在更新中更正了，我原来的记忆函数只在第一次调用中使用了备忘录表。递归调用只是普通的 unmemoized 函数调用。

但是，即使修复此错误也不会导致速度提高。这不是因为该函数未能调用备忘录表，而是因为没有足够的递归调用来证明对表的索引是正确的。但是如果我们让函数在相同的子树上执行更多的调用，我们会看到记忆化会带来改进。

```
-- Memo.hs                                                                                                                                                                                                  

import System.Environment                                                                                                                                                                                   

data Tree = Leaf | Fork Tree Tree deriving Show                                                                                                                                                             
data TTree v = NTree v (TTree (TTree v)) deriving Show                                                                                                                                                      

applyTree :: TTree v -> (Tree -> v)                                                                                                                                                                         
applyTree (NTree tl tf) Leaf = tl                                                                                                                                                                           
applyTree (NTree tl tf) (Fork l r) = applyTree (applyTree tf l) r                                                                                                                                           

tabulateTree :: (Tree -> v) -> TTree v                                                                                                                                                                      
tabulateTree f = NTree (f Leaf) (tabulateTree $ \l                                                                                                                                                          
                                     -> tabulateTree $ \r -> f (Fork l r))                                                                                                                                  

memofunc :: Tree -> Int                                                                                                                                                                                     
memofunc t  = (memo func) t                                                                                                                                                                                 
    where func :: Tree -> Int                                                                                                                                                                               
          func (Leaf) = 1                                                                                                                                                                                   
          func (Fork Leaf Leaf) = 1                                                                                                                                                                         
          func (Fork l@(Fork a b) r) = memofunc l + memofunc a + memofunc b                                                                                                                                 
                                       + memofunc r                                                                                                                                                         

func :: Tree -> Int                                                                                                                                                                                         
func (Leaf) = 1                                                                                                                                                                                             
func (Fork Leaf Leaf) = 1                                                                                                                                                                                   
func (Fork l@(Fork a b) r) = func l + func a + func b + func r                                                                                                                                              

memo = applyTree . tabulateTree                                                                                                                                                                             

mkTree d | d == 0 = Leaf                                                                                                                                                                                    
         | otherwise = Fork (mkTree $ d-1) (mkTree $ d-1)                                                                                                                                                   

main = do                                                                                                                                                                                                   
  args <- getArgs                                                                                                                                                                                           
  let version = read $ head args                                                                                                                                                                            
      d = read $ args !! 1                                                                                                                                                                                  
      (version_name, out) = if version == 0                                                                                                                                                                 
                            then ("Memoized", (memofunc) (mkTree d))                                                                                                                                        
                            else ("Not memoized", func (mkTree d))                                                                                                                                          
  putStrLn $ version_name ++ ": function apply to tree of depth "                                                                                                                                           
               ++ show d ++ " is: " ++ show out 
```

导致记忆和未记忆的运行时间（在深度 23 的平衡树上）：

```
helmholtz:LearningHaskell edechter$ time ./Memo 0 21
Memoized: function apply to tree of depth 21 is: 733219840

real    0m2.954s
user    0m2.781s
sys 0m0.162s
helmholtz:LearningHaskell edechter$ time ./Memo 1 21
Not memoized: function apply to tree of depth 21 is: 733219840

real    0m6.334s
user    0m6.304s
sys 0m0.025s 
```

# xslt - 整个文档中的元素位置

> ID：13091579
> 
> 赞同：1
> 
> 时间：2012-10-26T17:26:34.960
> 
> 标签：xslt

我有以下 xml 示例，我想为 n=1 到 5 的每本书输出“book #n name is xxx”。 position() 的计算结果为 1,2,1,2,3，所以我不能使用它功能。谢谢。

```
<books>
  <cat>
    <book>a</book>
    <book>b</book>
  </cat>
  <cat>
    <book>c</book>
    <book>d</book>
    <book>e</book>
  </cat>
</books>
...
...
<xsl:template match="book">
<!-- I need expression to evaluate as:
book a = 1
book b = 2
book c = 3
book d = 4
book e = 5
-->
    <xls:variable name="idx" select="postition()"/>
    name of book #<xsl:value-of select="$idx"/> is <xsl:value-of select"."/>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:39:04.680

**使用**：

```
 count(preceding::book) +1 
```

但是请注意，如果可能有嵌套`book`元素，那么要使用的正确表达式变为：

```
 count(ancestor::book | preceding::book) +1 
```

**或者可以使用**：**[`<xsl:number>`](http://www.w3.org/TR/1999/REC-xslt-19991116#element-number)**

**完整代码**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="book">
   <xsl:value-of select=
   "concat('book ', ., ' = ', count(preceding::book) +1, '&#xA;')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<books>
  <cat>
    <book>a</book>
    <book>b</book>
  </cat>
  <cat>
    <book>c</book>
    <book>d</book>
    <book>e</book>
  </cat>
</books> 
```

**产生了想要的正确结果**：

```
book a = 1
book b = 2
book c = 3
book d = 4
book e = 5 
```

* * *

**二、使用[`<xsl:number>`](http://www.w3.org/TR/1999/REC-xslt-19991116#element-number)：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="book">
   <xsl:value-of select="concat('&#xA;book ', ., ' = ')"/>
   <xsl:number level="any" count="book"/>
 </xsl:template>
</xsl:stylesheet> 
```

* * *

**三、使用`position()`适当的[`<xsl:apply-templates>`](http://www.w3.org/TR/1999/REC-xslt-19991116#element-apply-templates)**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
  <xsl:apply-templates select="/*/*/book"/>
 </xsl:template>

 <xsl:template match="book">
   <xsl:value-of select="concat('&#xA;book ', ., ' = ', position())"/>
 </xsl:template>
</xsl:stylesheet> 
```

**说明**：

的值`position()`是当前节点在产生的节点列表中的位置，`<xsl:apply-templates>`它导致选择此模板进行执行。如果我们使用正确的，`<xsl:apply-templates>`那么使用`position()` *就*可以了。

# asp.net-mvc - 验证表单时 MVC4 Windows Azure ACS 500 内部服务器错误

> ID：13091589
> 
> 赞同：1
> 
> 时间：2012-10-26T17:27:33.257
> 
> 标签：asp.net-mvc, windows, forms, azure, acs

我正在关注本教程：http://robbincremers.me/2012/02/22/using-windows-azure-access-control-service-to-provide-a-single-sign-on-experience-with-popular -身份提供者/#comment-469

使用本指南或其他指南，当取消注释 Web 配置中的身份验证表单以使用从 Windows azure 访问控制门户下载的自定义 html 登录表单时，我收到 500 内部服务器错误。有什么问题？

它只是添加身份验证表单

```
<location path="FederationMetadata">
    <system.web>
      <customErrors mode="Off"/>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <system.web>
    <httpRuntime requestValidationMode="2.0"/>
   <!-- <authorization>
      <deny users="?" />
    </authorization>-->
    <authentication mode="None" />
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>
    <!--Commented out by FedUtil-->
    <authentication mode="Forms"><forms loginUrl="~/Federation/Login.html" timeout="2880" /></authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
    <httpModules>
      <add name="WSFederationAuthenticationModule" type="Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      <add name="SessionAuthenticationModule" type="Microsoft.IdentityModel.Web.SessionAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </httpModules>
  </system.web> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T22:05:38.127

这是因为身份验证元素被定义了两次。web.config 中只能存在一个。在第 14 行，你有这个：

```
<authentication mode="None" /> 
```

在第 21 行，你有这个：

```
<authentication mode="Forms"><forms loginUrl="~/Federation/Login.html" timeout="2880" /></authentication> 
```

删除或注释掉这些行之一以解决问题。

# java - Restful Web服务调用中的Spring错误

> ID：13091593
> 
> 赞同：4
> 
> 时间：2012-10-26T17:28:17.123
> 
> 标签：java, web-services, spring

当我尝试使用 restful webservice 访问 rezgo 示例 api 时，我遇到了异常。我想在示例对象中转换此响应

```
package com.mycompany.hr.client;

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.apache.log4j.Logger;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.client.RestOperations;
import org.springframework.web.client.RestTemplate;
import org.springframework.ws.client.core.WebServiceTemplate;
public class Main {

    public static void main(String[] args) throws Exception {

        List<MediaType> acceptableMediaTypes = new ArrayList<MediaType>();
          acceptableMediaTypes.add(MediaType.APPLICATION_XML);
          HttpHeaders headers = new HttpHeaders();
          headers.setAccept(acceptableMediaTypes);
          //ResponseEntity<String> result = restTemplate.exchange("http://localhost:8080/spring-rest-provider/krams/person/{id}", HttpMethod.PUT, entity, String.class, id);
          Map<String,String> urlParam=new HashMap<String,String>();
          urlParam.put("key","2D8-F3V0-X7C0-C6I");
          urlParam.put("transcode", "p103");
          urlParam.put("i", "p103");
          urlParam.put("t", "tag");
          urlParam.put("q", "nature");

          RestTemplate wsTemplate = new RestTemplate();
         ResponseEntity<TourList> tl=( wsTemplate).getForEntity("http://xml.rezgo.com/xml?key=2D8-F3V0-X7C0-C6I&transcode=p103&i=search_items&t=tag&q=nature",TourList.class,Collections.singleton(urlParam));

    }

} 
```

这是我得到以下异常的代码。

```
Exception in thread "main" java.lang.NoSuchMethodError: org.springframework.util.CollectionUtils.unmodifiableMultiValueMap(Lorg/springframework/util/MultiValueMap;)Lorg/springframework/util/MultiValueMap;
    at org.springframework.web.util.UriComponents.<init>(UriComponents.java:100)
    at org.springframework.web.util.UriComponentsBuilder.build(UriComponentsBuilder.java:222)
    at org.springframework.web.util.UriComponentsBuilder.build(UriComponentsBuilder.java:212)
    at org.springframework.web.util.UriTemplate.<init>(UriTemplate.java:70)
    at org.springframework.web.client.RestTemplate$HttpUrlTemplate.<init>(RestTemplate.java:653)
    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:407)
    at org.springframework.web.client.RestTemplate.getForEntity(RestTemplate.java:229)
    at com.mycompany.hr.client.Main.main(Main.java:52) 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T17:37:37.730

`CollectionUtils.unmodifiableMultiValueMap`在 Spring 3.1 中添加，但未出现在早期版本中。听起来您正在使用 spring-core 3.1 构建应用程序，但您的运行时环境使用的是早期版本。

也许您最近升级了 Spring 并且在某处有一个陈旧的 lib 目录，其中包含多个版本的 spring-core？以我的经验，Java 似乎总是选择错误的（较旧的），我会遇到这样的错误。确保您的环境中没有 spring-core 3.0 或更早版本。

# vhdl - 状态机的 VHDL 代码

> ID：13091596
> 
> 赞同：0
> 
> 时间：2012-10-26T17:28:30.637
> 
> 标签：vhdl, adc

我正在尝试用 VHDL 为 ADC 编写一个逐次逼近寄存器。我正在把它变成一个状态机。我只是有点不确定我在最终状态块（current_state = S_LSB）中的代码。此代码有效吗？在返回状态一之前，有没有更好的方法来重置 DigitalOutTemp 和 OutTemp？

**注意**Comparator 的值取决于通过数模转换器后的 DigitalOutTemp 输出。

```
LIBRARY ieee;
USE     ieee.std_logic_1164.all;

ENTITY SARegister IS
PORT (
    Comparator, Clock                     : IN std_logic;
    DigitalOutFinal, DigitalOutTemp   : OUT std_logic_vector (13 downto 0)
);
END;

ARCHITECTURE Behavioural OF SARegister IS

CONSTANT S_MSB      : STD_LOGIC_VECTOR(3 downto 0) := "0000";
CONSTANT S_TWELVE   : STD_LOGIC_VECTOR(3 downto 0) := "0001";
CONSTANT S_ELEVEN   : STD_LOGIC_VECTOR(3 downto 0) := "0010";
CONSTANT S_TEN      : STD_LOGIC_VECTOR(3 downto 0) := "0011";
CONSTANT S_NINE     : STD_LOGIC_VECTOR(3 downto 0) := "0100";
CONSTANT S_EIGHT    : STD_LOGIC_VECTOR(3 downto 0) := "0101";
CONSTANT S_SEVEN    : STD_LOGIC_VECTOR(3 downto 0) := "0110";
CONSTANT S_SIX      : STD_LOGIC_VECTOR(3 downto 0) := "0111";
CONSTANT S_FIVE     : STD_LOGIC_VECTOR(3 downto 0) := "1000";
CONSTANT S_FOUR     : STD_LOGIC_VECTOR(3 downto 0) := "1001";
CONSTANT S_THREE    : STD_LOGIC_VECTOR(3 downto 0) := "1010";
CONSTANT S_TWO      : STD_LOGIC_VECTOR(3 downto 0) := "1011";
CONSTANT S_ONE      : STD_LOGIC_VECTOR(3 downto 0) := "1100";
CONSTANT S_LSB      : STD_LOGIC_VECTOR(3 downto 0) := "1101";

SIGNAL Next_state       : STD_LOGIC_VECTOR(3 DOWNTO 0);
SIGNAL Current_state    : STD_LOGIC_VECTOR(3 DOWNTO 0);
SIGNAL OutTemp          : STD_LOGIC_VECTOR(13 DOWNTO 0);    

BEGIN

PROCESS (Clock)
BEGIN

    IF (rising_edge (Clock)) THEN       
        Current_state <= Next_state;
    END IF;

END PROCESS;

PROCESS (Current_state, Comparator)
BEGIN
    Next_state <= Current_state;
    DigitalOutTemp <= "10000000000000";
    OutTemp <= "10000000000000";
    DigitalOutFinal <= "00000000000000";

    IF (Current_state = S_MSB) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(13) <= '0';
            OutTemp(13) <= '0';
        END IF;
        DigitalOutTemp(12) <='1';
        OutTemp(12) <= '1';
        Next_state <= S_TWELVE;

    ELSIF (Current_state = S_TWELVE) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(12) <= '0';
            OutTemp(12) <= '0';
        END IF;
        DigitalOutTemp(11) <='1';
        OutTemp(11) <= '1';
        Next_state <= S_ELEVEN;

    ELSIF (Current_state = S_ELEVEN) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(11) <= '0';
            OutTemp(11) <= '0';
        END IF;
        DigitalOutTemp(10) <='1';
        OutTemp(10) <= '1';         
        Next_state <= S_TEN;

    ELSIF (Current_state = S_TEN) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(10) <= '0';
            OutTemp(10) <= '0';
        END IF;
        DigitalOutTemp(9) <='1';
        OutTemp(9) <= '1';          
        Next_state <= S_NINE;

    ELSIF (Current_state = S_NINE) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(9) <= '0';
            OutTemp(9) <= '0';
        END IF;
        DigitalOutTemp(8) <='1';
        OutTemp(8) <= '1';          
        Next_state <= S_EIGHT;

    ELSIF (Current_state = S_EIGHT) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(8) <= '0';
            OutTemp(8) <= '0';
        END IF;
        DigitalOutTemp(7) <='1';
        OutTemp(7) <= '1';          
        Next_state <= S_SEVEN;

    ELSIF (Current_state = S_SEVEN) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(7) <= '0';
            OutTemp(7) <= '0';
        END IF;
        DigitalOutTemp(6) <='1';
        OutTemp(6) <= '1';          
        Next_state <= S_SIX;

    ELSIF (Current_state = S_SIX) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(6) <= '0';
            OutTemp(6) <= '0';
        END IF;
        DigitalOutTemp(5) <='1';
        OutTemp(5) <= '1';          
        Next_state <= S_FIVE;

    ELSIF (Current_state = S_FIVE) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(5) <= '0';
            OutTemp(5) <= '0';
        END IF;
        DigitalOutTemp(4) <='1';
        OutTemp(4) <= '1';          
        Next_state <= S_FOUR;

    ELSIF (Current_state = S_FOUR) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(4) <= '0';
            OutTemp(4) <= '0';
        END IF;
        DigitalOutTemp(3) <='1';
        OutTemp(3) <= '1';          
        Next_state <= S_THREE;

    ELSIF (Current_state = S_THREE) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(3) <= '0';
            OutTemp(3) <= '0';
        END IF;
        DigitalOutTemp(2) <='1';
        OutTemp(2) <= '1';          
        Next_state <= S_TWO;

    ELSIF (Current_state = S_TWO) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(2) <= '0';
            OutTemp(2) <= '0';
        END IF;
        DigitalOutTemp(1) <='1';    
        OutTemp(1) <= '1';      
        Next_state <= S_ONE;

    ELSIF (Current_state = S_ONE) THEN
        IF (Comparator = '0') THEN 
            DigitalOutTemp(1) <= '0';
            OutTemp(1) <= '0';
        END IF;
        DigitalOutTemp(0) <='1';
        OutTemp(0) <= '1';          
        Next_state <= S_LSB;

    ELSIF (Current_state = S_LSB) THEN
        IF (Comparator = '0') THEN
            DigitalOutTemp(0) <= '0';
            OutTemp(0) <= '0';
        END IF;

        DigitalOutFinal <= OutTemp;

        DigitalOutTemp <= "10000000000000";
        OutTemp <= "10000000000000";

        Next_state <= S_MSB;

    END IF;
END PROCESS;
END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:30:41.927

很难说出你的代码试图完成什么，所以我想我会做一些一般性的观察，可能会对你有所帮助。

您的代码中有很多不必要的重复，您可以通过使用计数器来索引您的位而不是在每个状态中使用硬编码索引来修复，例如使用`idx`从 MSB 计数到 LSB 的计数器，您可以这样做：

```
...

elsif (current_state = COMPARE) then

  OutTemp(idx)     <= comparator;

  if idx > 0 then
    OutTemp(idx-1) <= '1';
    idx            <= idx - 1;
    next_state     <= current_state;
  else
    idx            <= MSB;
    next_state     <= idle;
  end if;
end if; 
```

这假设您想设置`OutTemp(idx-1)`在以前的状态，这让我觉得有点毫无意义，但可能是您的外部硬件需要它......

您还`OutTemp`通过分配信号和端口来复制您的，我将删除您对端口的所有分配`DigitalOutTemp`，而是将以下内容添加到您的时钟进程中：

```
process (clock)
begin

  if rising_edge(clock) then      
    Current_state <= Next_state;
    DigitalOutTemp <= OutTemp;
  end if;
end process; 
```

这将`DigitalOutTemp`同步设置，如果您不希望这样做，您可以在时钟进程之外设置它，但我建议您同步设置它以避免故障。

要回答您的问题，最终状态：

```
 ELSIF (Current_state = S_LSB) THEN
      IF (Comparator = '0') THEN
          DigitalOutTemp(0) <= '0';
          OutTemp(0) <= '0';
      END IF;

      DigitalOutFinal <= OutTemp;

      DigitalOutTemp <= "10000000000000";
      OutTemp <= "10000000000000";

      Next_state <= S_MSB;

    END IF; 
```

.. 将设置`DigitalOutTemp`为 "`10000000000000"`以及之前状态中的`DigitalOutFinal`任何内容`OutTemp`。看来您希望`OutTemp`已通过分配更新以`OutTemp(0)`进一步提高，但情况并非如此。分配`OutTemp(0)`到*计划*在过程；它不是立即可见的。

`OutTemp(0)`IF 语句和IF 语句中的分配`DigitalOutTemp(0)`将不会执行任何操作，因为它们的预定写入会被您对它们的分配进一步取消。

因此，要回答您的问题，它看起来像是有效的代码，因为它可能会编译和合成，但它不会表现出您似乎期望的行为。

希望这可以帮助。

# c# - 如何使按钮在单击时显示列表框？

> ID：13091598
> 
> 赞同：0
> 
> 时间：2012-10-26T17:28:33.450
> 
> 标签：c#, buttonclick

我正在制作一个表单，如果单击按钮，它将转到我的列表框并运行我在其中的功能，尽管我对如何在单击按钮时实现它以及列表框工作感到有点困惑. 这是我的代码>_>

```
private void button1_Click(object sender, EventArgs e)
{
}

public void ListBox_SelectedIndexChanged(object sender, EventArgs e)
{
    Ping.PlayConsole();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:43:34.567

您只需要：

```
private void button1_Click(object sender, EventArgs e)
{
    Ping.PlayConsole();
} 
```

在不同的处理程序下调用相同的函数是可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:07:12.067

两个事件处理程序共享相同的签名`void (object , EventArgs)`，因此它们是调用兼容的。

*如果您使用表单设计器直观地连接事件：*

转到 Property Inspector 的 Events 窗格，而不是双击它来创建事件处理程序存根，而是`button1.Click`单击右侧出现的下拉框图标。Visual Studio 将显示表单中存在的所有具有兼容签名的事件处理程序，您应该可以选择`ListBox_SelectIndexChanged`处理`button1.Click`程序。他们将共享同一个处理程序。

*如果您通过代码连接处理程序，那么这也应该有效：*

```
ListBox1.SelectIndexChanged += new System.EventHandler(ListBox_SelectedIndexChanged);
button1.Click += new System.EventHandler(ListBox_SelectedIndexChanged); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:35:47.380

尝试这个 ：

```
private void button1_Click(object sender, EventArgs e)
{
   ListBox_SelectedIndexChanged(sender,e);
} 
```

祝你好运 ！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T17:47:51.943

```
private void button1_Click(object sender, EventArgs e)
{
    ListBox.Focus();
    Ping.PlayConsole();
} 
```

# php - 时间跟踪 - JavaScript (inc jQuery) 或 PHP

> ID：13091599
> 
> 赞同：-1
> 
> 时间：2012-10-26T17:28:34.440
> 
> 标签：php, javascript, jquery, html

有没有办法跟踪时间？

我希望可能拥有可以跟踪时间的用户帐户（只是一个开始和停止按钮），但如果您可以关闭选项卡/浏览器并稍后再回来并且计时器仍在运行，那就太酷了。

如果这不容易构建，我想要一种启动和停止时钟的方法。会使用 PHP、JavaScript（包括 jQuery）来完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:31:32.253

如果您不希望它持久存在，那么是的，您可以使用 javascript。我不会向您展示如何 - 您的问题没有什么独特或特别之处，Google 将返回 18,500,000 个结果，所以我相信您知道如何使用它。

如果你想让它持久，我可以想象这样的事情：

1.  将开始时间存储在与用户关联的数据库中（或用户浏览器中的 cookie）
2.  根据该开始时间启动一个 JS 计时器
3.  重新打开窗口时，从数据库或 cookie 中检索开始时间
4.  根据该开始时间启动一个 JS 计时器

# java - 为sdk版本编写一个应用程序：4-15

> ID：13091602
> 
> 赞同：0
> 
> 时间：2012-10-26T17:28:42.707
> 
> 标签：java, android

我正在编写简单的应用程序。我想在许多 android 设备上运行这个应用程序（从 1.6 开始做最新）。我在清单中有 minSdk 版本：4 和目标 15。

一切都很好，直到我将目标版本更改为 1.6。然后我在这条线上有错误

```
<style name="AppTheme" parent="android:Theme.Holo.Light.DarkActionBar" /> 
```

如何编写一次并在多个 android 版本上运行？

**编辑：** 错误：错误检索项目的父项：找不到给定名称的资源：Theme.Holo.Light.DarkActionBar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:41:16.647

您的目标项目应始终设置为 SDK 级别 15。

如果您的最低目标为 4，即使您设置为 15 级，您的应用程序也将在 1.6 设备上运行。降低目标 SDK 级别会遇到问题，因为您使用的是 15 的功能。Eclipse 中的 Android 构建工具将告诉您是否尝试使用 API 级别 4 之前不存在的 API 功能。

确保您遵循“Holo Everywhere”博客文章中的说明：[http](http://android-developers.blogspot.ca/2012/01/holo-everywhere.html) ://android-developers.blogspot.ca/2012/01/holo-everywhere.html （“在支持 Android 2.x 的同时使用 Holo”）

这将确保您在 3.x+ 上使用 Holo 主题，在 1.x 和 2.x 上使用经典的 Android 主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:41:21.897

您收到此错误是因为 Theme.Holo 已在 sdk > 10 中引入

# image - 查找不同大小的重复图像

> ID：13091603
> 
> 赞同：9
> 
> 时间：2012-10-26T17:28:48.870
> 
> 标签：image, image-processing

我想知道是否有一个预先存在的算法/库/框架来比较两个图像，看看一个是不是另一个的调整大小的版本？在这个阶段，编程语言并不重要。

如果那里没有任何东西，我需要写一些东西。到目前为止我的想法是：

*   （昂贵）将较大的尺寸调整为较小的尺寸并逐像素比较。

*   更好的是，只需调整图片上一些随机“区域”的大小并进行比较。如果它们匹配，则转换更多，等等......

*   将图像分成许多行和列，并对颜色值进行某种奇偶校验数学。

我特别看到前两个想法的问题是，首先有不同的方法可以重新调整图片的大小，因此数学计算结果可能根本不一样。一些重新调整大小会增加模糊等....

如果有人能指点我一些关于这个主题的好文献，那就太好了。我的谷歌搜索主要是共享软件应用程序，这不是我想要的。

目标是让它在网络服务器的后面运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:56:03.687

最佳方法取决于您要比较的图像的特征，图像相同的概率百分比，以及当它们不同时，它们通常会相差很多还是可能像单个像素一样微小区别？

如果上面的答案是您需要比较的图像将是完全随机的，那么使用昂贵的解决方案，或者一些可用的软件包可能是最好的选择。

如果您知道图像经常不同，并且图像通常差异很大，并且您真的想要手动推出解决方案，您可以实施一些初始“快速比较”步骤，这些步骤会更少价格昂贵，并且可以快速识别出许多图像不同的情况。

例如，您可以调整较大图像的大小，然后逐像素比较（或计算像素值的哈希）仅图像的“对角线”（左上角像素到右下角像素）并通过这样做排除不同的图像，并且只对通过此测试的图像进行更昂贵的比较。

或者根据图像的类型在“良好分布”的任何地方取一个预设数量的点，并且只对通过此测试的那些进行更昂贵的比较。

如果您对要比较的图像有很多了解，它们具有已知的特征，并且它们的不同之处多于相同，那么按照上述思路实施廉价的“快速消除比较”可能是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T17:45:54.447

您需要为此研究 dHash 算法。

就在这几天前，我写了一个纯 Java 库。您可以使用目录路径（包括子目录）来提供它，它会列出列表中的重复图像以及您要删除的绝对路径。或者，您也可以使用它来查找目录中的所有唯一图像。

它在内部使用了 awt api，因此不能用于 Android。由于 imageIO 在读取很多新类型的图像时遇到问题，我正在使用内部使用的 12 个猴子 jar。

[https://github.com/srch07/Duplicate-Image-Finder-API](https://github.com/srch07/Duplicate-Image-Finder-API)

可以从[https://github.com/srch07/Duplicate-Image-Finder-API/blob/master/archives/duplicate_image_finder_1.0.jar下载内部捆绑了依赖项的 Jar](https://github.com/srch07/Duplicate-Image-Finder-API/blob/master/archives/duplicate_image_finder_1.0.jar)

该 api 也可以在不同大小的图像中找到重复项。

# c# - 通过 Internet 进行安全文件传输

> ID：13091606
> 
> 赞同：0
> 
> 时间：2012-10-26T17:29:06.207
> 
> 标签：c#, .net, wcf, security, data-transfer

通过 Internet 传输文件（安全数据）的最佳方式是什么？我正在考虑 WCF REST 服务。文件大小小于 10MB。我们公司不允许 FTP 传输。您能否建议是否有任何文章或第三方工具？我很感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:31:54.650

我假设你在 Windows 上。从命令行您可以使用[pscp ，即 PuTTY Secure Copy，](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)[这里](http://the.earth.li/~sgtatham/putty/0.60/htmldoc/Chapter5.html)有一个不错的教程，但基本思想是：

`pscp myfile.txt hostname:/home/user/`

另一个更全面和用户友好 (GUI) 的应用程序是[winSCP](http://winscp.net/eng/index.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:14:52.377

当您包含 C# 标记时，您是否将其合并到程序中？

如果是这样，请查看 SharpSSH 库 - [http://www.tamirgal.com/blog/page/SharpSSH.aspx](http://www.tamirgal.com/blog/page/SharpSSH.aspx)

功能列表 以下列表总结了 SharpSSH 当前支持的功能：

```
SharpSSH is pure .NET, but it depends on Mentalis.org Crypto Library for encryption and integrity functions.
SSH2 protocol support
SSH File Transfer Protocol (SFTP)
Secure Copy (SCP)
Key exchange: diffie-hellman-group-exchange-sha1, diffie-hellman-group1-sha1
Cipher: 3des-cbc, aes128-cbc
MAC: hmac-md5
Host key type: ssh-rsa, ssh-dss
Userauth: password, publickey (RSA, DSA)
Port Forwarding
Stream Forwarding
Remote Exec
Generating DSA and RSA key pairs
Changing the passphrase for a private key 
```

# jruby - 使用带有 jruby 1.7.0 的 ruby -debug 时获取“[INFO] Unable to bind key for unsupported operation:backward-delete-word”

> ID：13091617
> 
> 赞同：0
> 
> 时间：2012-10-26T17:29:30.960
> 
> 标签：jruby, ruby-debug

升级到 jruby 1.7.0 并使用 ruby​​-debug 后，我得到以下输出：

```
[INFO] Unable to bind key for unsupported operation: backward-delete-word
[INFO] Unable to bind key for unsupported operation: backward-delete-word
[INFO] Unable to bind key for unsupported operation: down-history
[INFO] Unable to bind key for unsupported operation: up-history
[INFO] Unable to bind key for unsupported operation: up-history
[INFO] Unable to bind key for unsupported operation: down-history
[INFO] Unable to bind key for unsupported operation: up-history
[INFO] Unable to bind key for unsupported operation: down-history
[INFO] Unable to bind key for unsupported operation: up-history
[INFO] Unable to bind key for unsupported operation: down-history
[INFO] Unable to bind key for unsupported operation: up-history
[INFO] Unable to bind key for unsupported operation: down-history
(rdb:1) 
```

并且调试器没有响应，我只能执行 <CTRL>-Z 来退出并终止进程。目前谷歌搜索这些行中的任何一个目前都出现零结果，所以完全不确定在哪里看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T09:20:09.323

我有同样的问题，偶然发现了一个解决方法。它也可能对你有用。

当您收到提示时，按“v”并输入，您将处于调试器模式！

# python - 如果测试失败，让参数的默认值优先

> ID：13091619
> 
> 赞同：1
> 
> 时间：2012-10-26T17:29:43.740
> 
> 标签：python, python-2.7

这只是一个“好的”pythonic方式的好奇问题。

我有一个带有可选参数的函数，即。

```
def foo( a, b, c='en' ):
    print c 
```

有一个包含一堆信息的字典，如果字典中有特定的键，我想将它传递给 foo 以覆盖 c 的默认值，但如果键不在字典中，我只想使用c的默认值。

显然这会起作用......

```
if "SomeKey" in mydict:
    foo( val1, val2, mydict[ "SomeKey" ]
else:
    foo( val1, val2 ) 
```

另一种选择是做类似的事情

```
params = [ val1, val2 ]
if "SomeKey" in mydict:
    params.append( mydict[ "SomeKey" ] )
foo( *params ) 
```

但是必须有一种巧妙的，更蟒蛇的方式来做到这一点？IE。

```
foo( val1, val2, mydict[ "SomeKey" ] if "SomeKey" in mydict else < use default > ) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:34:06.097

如果您知道默认值，则可以使用[`dict.get`](http://docs.python.org/library/stdtypes.html#dict.get)：

```
foo(val1, val2, mydict.get('SomeKey', 'en')) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T17:34:48.067

不要为此使用“真实”默认值 - 而是使用占位符值：

```
def foo( a, b, c=None ):
    if c is None:
        c = 'en'
    print c 
```

然后打电话给...

```
foo( val1, val2, mydict.get("SomeKey") ) 
```

（默认情况下，如果键不在字典中，则`.get()`返回）`None`

* * *

如果你不能修改`foo()`，那么你可以做更复杂的可变参数路径：

```
maybe_c = {'c': mydict["SomeKey"]} if "SomeKey" in mydict else {}
foo( val1, val2, **maybe_c ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T17:33:49.517

你能惹`foo`吗？

```
def foo(a,b,c='en',**kwargs):
    ... 
```

然后用你的字典调用它：

```
foo('bar','baz',**mydict) 
```

* * *

一种丑陋的方法（不会与 foo 混淆）是：

```
foo( val1,val2,mydict[ "SomeKey" ]) if "SomeKey" in mydict else foo(val1,val2) 
```

虽然真的，我的首选方法 - 假设`foo` **不能引发 KeyError**将是：（特别是如果`'SomeKey'`经常出现在 dict 中）：

```
try:
    foo(val1,val2,c=mydict['SomeKey'])
except KeyError:
    foo(val1,val2) 
```

这避免了重复的键查找，并明确表明您正在使用默认参数调用函数。

* * *

或phihag 提到的 plus `inspect`：`dict.get`

```
foo(val1,val2,mydict.get('SomeKey',inspect.getargspec(foo).defaults[0])) 
```

请注意，如果您使用这个，并且`foo`将被反复检查，您可能希望将结果保存在您可以访问它的地方。

# mysql - 如果值存在，如何检查另一行？

> ID：13091620
> 
> 赞同：0
> 
> 时间：2012-10-26T17:29:43.893
> 
> 标签：mysql, sql

这让我发疯了。我已经使用 imdbpy 转储了 imdb db。我正在尝试查找通过电影的第一个字母提供演员数据的美国电影。

下面是一个查询示例，它在没有 acto 数据的情况下获取电影。这运行得非常快：

```
SELECT DISTINCT title.id,title.title,title.production_year
FROM  title

INNER JOIN movie_info ON
(movie_info.movie_id =  title.id
AND
movie_info.info_type_id = 8
AND
movie_info.info =  'USA') 

WHERE  title LIKE  'a%'
AND  title.kind_id =  1
LIMIT 75 
```

演员表数据存储在一个名为`cast_info`并包含大约 2200 万条记录的单独表中。该`nr_order`列包含电影中演员的演职员表顺序。例如，汤姆汉克在《阿甘正传》中是 1。每个 . 通常有几十行`movie_id`。

因此，要检查参与者数据是否可用，应该至少有一行对于该特定的`movie_id`. 如果 a 中的所有值都`nr_order`为`movie_id`空，则它不包含我需要的数据。

要尝试获取此信息，请使用以下查询：

```
SELECT DISTINCT title.id,title.title,title.production_year
FROM  title

INNER JOIN movie_info ON
(movie_info.movie_id =  title.id
AND
movie_info.info_type_id = 8
AND
movie_info.info =  'USA') 

INNER JOIN cast_info ON 
(cast_info.movie_id = title.id
AND
cast_info.nr_order = 1)

WHERE  title LIKE  'a%'
AND  title.kind_id =  1
LIMIT 75 
```

由于某种原因，查询变得非常慢。第一个查询需要 0.3-.7 秒，第二个查询大约需要 6-10 秒。我在`cast_info`. `nr_order`但这没有帮助。

解释输出：

```
+----+-------------+-----------+-------+--------------------------------------------------+-------------------+---------+--------------+-------+-----------------------------+
| id | select_type | table     | type  | possible_keys                                    | key               | key_len | ref          | rows  | Extra                       |
+----+-------------+-----------+-------+--------------------------------------------------+-------------------+---------+--------------+-------+-----------------------------+
|  1 | SIMPLE      | title     | range | PRIMARY,title_idx_title,fk_kind_type_id_4        |  title_idx_title  | 257     | NULL         | 132801| Using where; Using temporary|
|  1 | SIMPLE      | movie_info| ref   | ovie_info_idx_mid,info_type_id movie_info_idx_mid| movie_info_idx_mid| 4       | imdb.title.id| 4     | Using where; Distinct       |
|  1 | SIMPLE      | table1    | ref   | cast_info_idx_mid,nr_order                       | cast_info_idx_mid | 4       | imdb.title.id| 12    | Using where; Distinct       |
+----+-------------+-----------+-------+--------------------------------------------------+-------------------+---------+--------------+-------+-----------------------------+ 
```

任何想法都会非常有帮助！

编辑：从第一个查询中解释

```
+----+-------------+-----------+-------+--------------------------------------------------+-------------------+---------+--------------+-------+-----------------------------+
| id | select_type | table     | type  | possible_keys                                    | key               | key_len | ref          | rows  | Extra                       |
+----+-------------+-----------+-------+--------------------------------------------------+-------------------+---------+--------------+-------+-----------------------------+
|  1 | SIMPLE      | title     | range | PRIMARY,title_idx_title,fk_kind_type_id_4        |  title_idx_title  | 257     | NULL         | 132801| Using where; Using temporary|
|  1 | SIMPLE      | movie_info| ref   | ovie_info_idx_mid,info_type_id movie_info_idx_mid| movie_info_idx_mid| 4       | imdb.title.id| 4     | Using where; Distinct       |
+----+-------------+-----------+-------+--------------------------------------------------+-------------------+---------+--------------+-------+-----------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:39:05.817

由于您只关心是否有*可用**的*演员表信息，您可以尝试使用`EXISTS`：

```
SELECT DISTINCT title.id,title.title,title.production_year
FROM  title

INNER JOIN movie_info ON
(movie_info.movie_id =  title.id
AND
movie_info.info_type_id = 8
AND
movie_info.info =  'USA') 

WHERE  title LIKE  'a%'
AND  title.kind_id =  1
AND EXISTS(SELECT 1 FROM cast_info WHERE cast_info.movie_id = title.id AND cast_info.nr_order IS NOT NULL)
LIMIT 75 
```

我不确定您的行为的确切解释，但`DISTINCT`可能会在连接上有很多行 - 或者连接产品上至少有很多行 - 做一些有趣的事情 - （注意 Distinct 被应用于 cast_info 表中解释）。

# xml - 通过 XSL Plist 到 JUnit XML

> ID：13091621
> 
> 赞同：0
> 
> 时间：2012-10-26T17:29:46.873
> 
> 标签：xml, xslt, plist

我正在尝试将 Apples plist 文件转换为 JUnit XML 格式，以便 Hudson/Jenkins 可以读取结果。

我有一个类似这样的 plist 文件输出：

```
<plist><dict><array>
        <dict>
            <key>LogType</key>
            <string>Pass</string>
            <key>Message</key>
            <string>Test 1</string>
            <key>Timestamp</key>
            <date>2012-10-26T09:42:41Z</date>
            <key>Type</key>
            <integer>4</integer>
         </dict>
         <dict>.....</dict>
         .
         .
         .
         <dict>
            <key>LogType</key>
            <string>Pass</string>
            <key>Message</key>
            <string>Test 1</string>
            <key>Timestamp</key>
            <date>2012-10-26T09:43:27Z</date>
            <key>Type</key>
            <integer>5</integer>
         </dict>
         <dict>
            <key>LogType</key>
            <string>Fail</string>
            <key>Message</key>
            <string>Inserting content to a group</string>
            <key>Timestamp</key>
            <date>2012-10-26T09:49:13Z</date>
            <key>Type</key>
            <integer>4</integer>
        </dict>
        <dict>.....</dict>
        .
        .
        .
        <dict>
            <key>LogType</key>
            <string>Error</string>
            <key>Message</key>
            <string>VerboseError: target.frontMostApp().mainWindow().buttons()[3] could not be tapped</string>
            <key>Screenshot</key>
            <string></string>
            <key>Timestamp</key>
            <date>2012-10-26T09:50:12Z</date>
            <key>Type</key>
            <integer>3</integer>
        </dict>
        <dict>
            <key>LogType</key>
            <string>Fail</string>
            <key>Message</key>
            <string>Inserting content to a group</string>
            <key>Screenshot</key>
            <string></string>
            <key>Timestamp</key>
            <date>2012-10-26T09:50:13Z</date>
            <key>Type</key>
            <integer>7</integer>
        </dict>
</array></dict>
</plist> 
```

我需要将其转换为 JUnit XML。这是我期望上面 plist 字段的输出：

```
<?xml version="1.0"?>
<testsuites>
    <testsuite>
        <testcase classname="Test 1" name="Test 1"/>
        <testcase classname="Inserting content to a group" name="Inserting content to a group">
            <failure>Inserting content to a group - VerboseError: target.frontMostApp().mainWindow().buttons()[3] could not be tapped< </failure>
        </testcase>
    </testsuite>
</testsuites> 
```

目前我有这个 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
        <testsuites>
            <testsuite>
                <xsl:for-each select="plist/dict/array/dict">
                    <xsl:if test="integer = 4">
                        <testcase>
                            <xsl:attribute name="classname"><xsl:value-of select="string[2]" /></xsl:attribute>
                            <xsl:attribute name="name"><xsl:value-of select="string[2]"/></xsl:attribute>
                            <xsl:if test="string[1] = 'Fail'">
                                <failure>
                                    <xsl:attribute name="type"><xsl:value-of select="integer" /></xsl:attribute><xsl:value-of select="string[2]" />                                           
                                </failure>
                            </xsl:if>
                        </testcase>
                    </xsl:if>
                </xsl:for-each>
            </testsuite>
        </testsuites>
    </xsl:template>
</xsl:stylesheet> 
```

如何编辑上面的 XSL 以查找两个 dict/string[2] = 'Test A' 之间的任何错误消息并将消息插入到 的值中`<failure>`？我不确定如何执行此操作，因为错误消息包含在另一个`<dict>`节点中。

**编辑：**

好的，我已将其分解为伪 ish 代码：

1.  计算整数 = 4 的所有节点。

2.  找出整数 = 4 的每个节点的位置并存储在变量中

3.  遍历整数 = 4 的每个节点，并在整数 = 4 的下一个节点之前找到任何字符串 [1] = 'Fail'。

    1.  如果有任何字符串 [1] = 'Fail'，则在整数 = 4 的下一个节点之前和整数 = 4 的上一个节点之后找到字符串 [1] = 'Error'。

        1.  如果任何 string[1] = 'Error'，`failure`则从当前节点输出 string[2]，从前一个节点输出 string[2]，整数 = 4。
    2.  `failure`其他带有 string[2] 的输出，来自前一个节点，整数 = 4。

节点引用 plist/dict/array/dict

这对 XSL 可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T23:56:21.877

你的规则有点混乱，但我相信我有一个解决方案。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/*">
    <testsuites>
      <testsuite>
        <xsl:apply-templates select="/*/*/*/dict[integer = '4']" />
      </testsuite>
    </testsuites>
  </xsl:template>

  <xsl:template match="dict[string[1] = 'Fail']">
    <testcase classname="{string[2]}" name="{string[2]}">
      <failure>
        <xsl:value-of select="string[2]" />
        <xsl:if test="following-sibling::dict[1]/string[1] = 'Error'">    
          <xsl:value-of select="concat( ' - ', following-sibling::dict[string[1] = 'Error'][1]/string[2])" />
        </xsl:if>
      </failure>
    </testcase>
  </xsl:template>

  <xsl:template match="dict[not(string[1] = 'Fail')]">
    <testcase classname="{string[2]}" name="{string[2]}" />
  </xsl:template>
</xsl:stylesheet> 
```

**..应用于提供的 XML：**

```
<?xml version="1.0" encoding="utf-8"?>
<plist>
  <dict>
    <array>
      <dict>
        <key>LogType</key>
        <string>Pass</string>
        <key>Message</key>
        <string>Test 1</string>
        <key>Timestamp</key>
        <date>2012-10-26T09:42:41Z</date>
        <key>Type</key>
        <integer>4</integer>
      </dict>
      <dict>
        <key>LogType</key>
        <string>Pass</string>
        <key>Message</key>
        <string>Test 1</string>
        <key>Timestamp</key>
        <date>2012-10-26T09:43:27Z</date>
        <key>Type</key>
        <integer>5</integer>
      </dict>
      <dict>
        <key>LogType</key>
        <string>Fail</string>
        <key>Message</key>
        <string>Inserting content to a group</string>
        <key>Timestamp</key>
        <date>2012-10-26T09:49:13Z</date>
        <key>Type</key>
        <integer>4</integer>
      </dict>
      <dict>
        <key>LogType</key>
        <string>Error</string>
        <key>Message</key>
        <string>VerboseError:
        target.frontMostApp().mainWindow().buttons()[3] could not
        be tapped</string>
        <key>Screenshot</key>
        <string />
        <key>Timestamp</key>
        <date>2012-10-26T09:50:12Z</date>
        <key>Type</key>
        <integer>3</integer>
      </dict>
      <dict>
        <key>LogType</key>
        <string>Fail</string>
        <key>Message</key>
        <string>Inserting content to a group</string>
        <key>Screenshot</key>
        <string />
        <key>Timestamp</key>
        <date>2012-10-26T09:50:13Z</date>
        <key>Type</key>
        <integer>7</integer>
      </dict>
    </array>
  </dict>
</plist> 
```

**...产生了预期的结果：**

```
<?xml version="1.0"?>
<testsuites>
  <testsuite>
    <testcase classname="Test 1" name="Test 1" />
    <testcase classname="Inserting content to a group"
    name="Inserting content to a group">
      <failure>Inserting content to a group - VerboseError:
      target.frontMostApp().mainWindow().buttons()[3] could not be
      tapped</failure>
    </testcase>
  </testsuite>
</testsuites> 
```

**解释：**

*   第一个模板创建新的`<testsuites>`和`<testsuite>`元素。然后指示 XSLT 处理器处理其子节点值为 4 的所有`<dict>`后代。`<integer>`
*   第二个模板匹配`<dict>`第一`<string>`个子元素值为“Fail”的所有元素。在这种情况下，将创建一个新的`<testcase>`和`<failure>`元素对，并赋予一个符合您提供的规则的值。
*   最终模板匹配`<dict>`其第一`<string>`个子元素的值不是“Fail”的所有元素。在这种情况下，将创建一个新`<testcase>`元素并根据您的规则给定值。

# c# - listitem 中的值不准确

> ID：13091625
> 
> 赞同：0
> 
> 时间：2012-10-26T17:30:01.693
> 
> 标签：c#

我有以下代码应该从来自服务器的字符串生成列表项。代码如下：

```
foreach (String str in years)
            {

                if (string.IsNullOrEmpty(str) || str.Equals(" "))
                {
                    System.Diagnostics.Debug.WriteLine("empty");
                }
                else
                {
                    System.Diagnostics.Debug.WriteLine(str);
                    yearLi.Value = str;
                    yearList.Add(yearLi);
                    count = yearList.Count;
                }
                System.Diagnostics.Debug.WriteLine("count-->" + count);

            } 
```

现在我的问题是，如果字符串数组“years”有 {2011,2012}，则列表应该是 2011 和 2012。但它有 2012,2012。我无法在此代码中找到错误。请指教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T17:32:09.833

`yearLi`您在循环的每个循环中都重复使用相同的对象。当你这样做时：

```
yearList.Add(yearLi); 
```

您每次都添加相同的对象。当您下次通过循环更改它时，您将在列表的每个单元格中更改它（因为它都是对同一对象的引用）。

您需要`yearLi`在循环中实例化一个新的（应该是什么类）。

# c# - 如何使用 AT 命令从服务中心接收短信发送确认

> ID：13091626
> 
> 赞同：0
> 
> 时间：2012-10-26T17:30:03.010
> 
> 标签：c#, at-command

我目前正在使用以下代码使用 AT 命令发送短信

```
using (var sp = new SerialPort(CBComPort.Text))
{
    sp.Open();
    sp.WriteLine("AT" + Environment.NewLine);
    sp.WriteLine("AT+CMGF=1" + Environment.NewLine);
    sp.WriteLine("AT+CMGS=\"" + TBPhoneNo.Text + Environment.NewLine);
    sp.WriteLine(TBSMS.Text + (char)26);
} 
```

我的问题是：无论是否发送短信，我是否可以从服务中心收到确认信息

# collections - 获取主干集合中的项目

> ID：13091627
> 
> 赞同：1
> 
> 时间：2012-10-26T17:30:13.333
> 
> 标签：collections, backbone.js

首先 - 我是 Backbone 的新手，所以请忍受这个问题可能很愚蠢。我有一个模型：

```
var AppModel = Backbone.Model.extend({

    defaults: {
        mynumber: null
    }

}); 
```

我可以成功地将项目动态添加到集合中（`console.log`表明它们运行良好），但我只是不确定如何将它们拉出来，这就是我正在尝试的：

```
printCollection: function(){
    this.collection.each(function(item){
        console.log(item.mynumber);
    });
} 
```

其中显示了项目的数量和`undefined`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:33:13.307

您需要使用属性访问器，而不是值。

```
item.get('mynumber'); 
```

# perl - 证明正在使用精确的 perl 路径位置生成

> ID：13091632
> 
> 赞同：-1
> 
> 时间：2012-10-26T17:30:44.317
> 
> 标签：perl, perlbrew

我正在使用 perlbrew 来安装 Perl。在我们的构建脚本中，我们正在复制目标文件夹中的所有依赖项并创建 tar 球。这个目标文件夹也有安装证明的 bin 文件夹。但这证明了 perl 的确切路径位置。

我复制这个 tar 球并将其解压到另一个盒子中。另一个使用此目标文件夹 bin 的构建脚本是路径和执行证明。由于证明具有确切的路径位置，并且此路径在此框中不可用，因此会引发异常。

```
#!/var/local/maria/hudson/workspace/pigeon-environment/perlbrew/perls/perl-5.14.2/bin/perl
eval 'exec /var/local/maria/hudson/workspace/pigeon-environment/perlbrew/perls/perl-5.14.2/bin/perl -S $0 ${1+"$@"}' 
```

但这条路径应该是：

```
#!$PWD/target/bin/perl 
```

有人可以用相对路径创建证明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:12:39.653

使用 -e 标志，您可以提供您想要使用的解释器的路径：

```
prove -e /path/to/perl t/my-test.t 
```

有关其他标志等，请参见“证明 --help”。

# ruby-on-rails - 如何覆盖 rail_admin gem 中的枚举数据

> ID：13091638
> 
> 赞同：0
> 
> 时间：2012-10-26T17:31:01.730
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-admin

在我的模型中，BookHeader 有很多 Category 所以，当编辑或创建新的 BookHeader 时，表单显示像这样 [Enum 修复？](http://nr7.upanh.com/b3.s32.d2/89392864d0eb4a6e3988ab7b137ff7fa_50339337.catetgoryfix.png)

我想通过定义 category_enum 方法将“类别#{id}”更改为类别名称，但它仍然不起作用。请帮忙！

BookHeader 模型的代码

```
class BookHeader < ActiveRecord::Base
  attr_accessible :autho, :category_id, :description, :title, :book_type, :year,:publisher_id,:detail
  has_many :books
  belongs_to :category
  belongs_to :publisher
  TYPE = {:ebook=>"Ebook",:paper_book=> "PaperBook",:magazine=> "Magazine",:media=> "Media"}
  DEFAULT_TAB = :paper_book
  BOOKS_PER_PAGE = 1 # books to show in a pages (pagination)
  extend FriendlyId
  def book_type_enum #it worked here
    TYPE.map{|key, val| [val]}
  end
  def category_enum #but dont' work here
    ["a","b"]
  end 
```

编辑表单代码

```
edit do
        field :title
        field :description, :text do
          ckeditor do true end
        end
        field :autho
        field :book_type
        field :category
      end 
```

[请参阅此链接](http://rails-admin-tb.herokuapp.com/admin/team/73/edit)中的 Division 属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T17:13:15.187

```
alias_attribute :name, :you_field_you_want_to_display 
```

我认为这是更灵活的方式，无需重命名，一切都会正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T04:02:11.427

是的，我刚刚找到答案，将模型中的一列重命名为“名称”，看起来很神奇，但它确实有效！

# mysql - 视图控制器不在视图层次结构中？

> ID：13091643
> 
> 赞同：0
> 
> 时间：2012-10-26T17:31:16.213
> 
> 标签：mysql, ios, xcode, json

所以我试图以编程方式从一个视图控制器转换到另一个视图控制器，以便我只能在用户需要登录时对其进行初始化。但是，xcode 不断给我一个错误，即它不在视图层次结构中并拒绝加载它。

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@end 
```

视图控制器.m

```
#import "ViewController.h"
#import "API.h"

@interface ViewController ()

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    if (![[API sharedInstance] isAuthorized]) {
        [self performSegueWithIdentifier:@"ShowLogin" sender:nil];
    }// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

LoginScreen.h（不在层次结构中的控制器）

```
#import <UIKit/UIKit.h>

@interface LoginScreen : UIViewController
{
    //the login form fields
    IBOutlet UITextField *fldUsername;
    IBOutlet UITextField *fldPassword;
}

//action for when either button is pressed
-(IBAction)btnLoginRegisterTapped:(id)sender;

@end 
```

LoginScreen.m（控制器显然不在层次结构中）

```
#import "LoginScreen.h"
#import "UIAlertView+error.h"
#import "API.h"
#include <CommonCrypto/CommonDigest.h>

#define kSalt @"(protected value)"

@implementation LoginScreen

-(void)viewDidLoad {
    [super viewDidLoad];

}

#pragma mark - View lifecycle

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(IBAction)btnLoginRegisterTapped:(UIButton*)sender {
    //form fields validation
    if (fldUsername.text.length < 4 || fldPassword.text.length < 4) {
        [UIAlertView error:@"Enter username and password over 4 chars each."];
        return;
    }
    //salt the password
    NSString* saltedPassword = [NSString stringWithFormat:@"%@%@", fldPassword.text, kSalt];
    //prepare the hashed storage
    NSString* hashedPassword = nil;
    unsigned char hashedPasswordData[CC_SHA1_DIGEST_LENGTH];
    //hash the pass
    NSData *data = [saltedPassword dataUsingEncoding: NSUTF8StringEncoding];
    if (CC_SHA1([data bytes], [data length], hashedPasswordData)) {
        hashedPassword = [[NSString alloc] initWithBytes:hashedPasswordData length:sizeof(hashedPasswordData) encoding:NSASCIIStringEncoding];
    } else {
        [UIAlertView error:@"Password can't be sent"];
        return;
    }
    //check whether it's a login or register
    NSString* command = (sender.tag==1)?@"register":@"login";
    NSMutableDictionary* params =[NSMutableDictionary dictionaryWithObjectsAndKeys:command, @"command", fldUsername.text, @"username", hashedPassword, @"password", nil];
    //make the call to the web API
    [[API sharedInstance] commandWithParams:params onCompletion:^(NSDictionary *json) {
        //result returned
        NSDictionary* res = [[json objectForKey:@"result"] objectAtIndex:0];
        if ([json objectForKey:@"error"]==nil && [[res objectForKey:@"IdUser"] intValue]>0) {
            [[API sharedInstance] setUser: res];
            [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];
            //show message to the user
            [[[UIAlertView alloc] initWithTitle:@"Logged in" message:[NSString stringWithFormat:@"Welcome %@",[res objectForKey:@"username"]] delegate:nil cancelButtonTitle:@"Close" otherButtonTitles: nil] show];
        } else {
            //error
            [UIAlertView error:[json objectForKey:@"error"]];
        }
    }];

}

@end 
```

API.h（调用我的网络服务）

```
#import "AFHTTPClient.h"
#import "AFNetworking.h"

typedef void (^JSONResponseBlock)(NSDictionary* json);

@interface API : AFHTTPClient

@property (strong, nonatomic) NSDictionary* user;

+(API*)sharedInstance;
//check whether there's an authorized user
-(BOOL)isAuthorized;
//send an API command to the server
-(void)commandWithParams:(NSMutableDictionary*)params onCompletion:(JSONResponseBlock)completionBlock;
-(NSURL*)urlForImageWithId:(NSNumber*)IdPhoto isThumb:(BOOL)isThumb;

@end 
```

API.m（调用我的网络服务）

```
#import "API.h"

//the web location of the service
#define kAPIHost @"(protected web address)"
#define kAPIPath @""

@implementation API

@synthesize user;

#pragma mark - Singleton methods
/**
 * Singleton methods
 */
+(API*)sharedInstance {
    static API *sharedInstance = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        sharedInstance = [[self alloc] initWithBaseURL:[NSURL URLWithString:kAPIHost]];
    });

    return sharedInstance;
}

#pragma mark - init
//intialize the API class with the deistination host name

-(API*)init {
    //call super init
    self = [super init];
    if (self != nil) {
        //initialize the object
        user = nil;
        [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
        // Accept HTTP Header; see http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1
        [self setDefaultHeader:@"Accept" value:@"application/json"];
    }
    return self;
}

-(BOOL)isAuthorized {
    return [[user objectForKey:@"IdUser"] intValue]>0;
}

-(void)commandWithParams:(NSMutableDictionary*)params onCompletion:(JSONResponseBlock)completionBlock {
    NSData* uploadFile = nil;
    if ([params objectForKey:@"file"]) {
        uploadFile = (NSData*)[params objectForKey:@"file"];
        [params removeObjectForKey:@"file"];
    }

    NSMutableURLRequest *apiRequest = [self multipartFormRequestWithMethod:@"POST" path:kAPIPath parameters:params constructingBodyWithBlock: ^(id <AFMultipartFormData>formData) {
        if (uploadFile) {
            [formData appendPartWithFileData:uploadFile name:@"file" fileName:@"photo.jpg" mimeType:@"image/jpeg"];
        }
    }];
    AFJSONRequestOperation* operation = [[AFJSONRequestOperation alloc] initWithRequest: apiRequest];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        //success!
        completionBlock(responseObject);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        //failure :(
        completionBlock([NSDictionary dictionaryWithObject:[error localizedDescription] forKey:@"error"]);
    }];
    [operation start];
}

-(NSURL*)urlForImageWithId:(NSNumber*)IdPhoto isThumb:(BOOL)isThumb {
    NSString* urlString = [NSString stringWithFormat:@"%@/%@upload/%@%@.jpg", kAPIHost, kAPIPath, IdPhoto, (isThumb)?@"-thumb":@""];
    return [NSURL URLWithString:urlString];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:03:07.963

问题是在调用 viewDidLoad 时，您的初始视图控制器的视图尚未添加到窗口中。

将该呼叫移至`viewDidAppear:`

```
-(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    if (![[API sharedInstance] isAuthorized]) {
        [self performSegueWithIdentifier:@"ShowLogin" sender:self];
    }
} 
```

# jquery - jQuery change() 上的页面跳转；

> ID：13091644
> 
> 赞同：0
> 
> 时间：2012-10-26T17:31:21.930
> 
> 标签：jquery, page-jump

我正在使用几个按钮来切换 div。每当我单击按钮时，页面就会跳转。

有任何想法吗？

这是我的标记：

```
 <label class='radio btn'>
    <input checked='checked' id='donation_payment_type_eft' name='donation[payment_type]' type='radio' value='eft'>
    <span class='payment-type-echeck' style='background-position: -413px 0;'>ECheck</span>
  </label>
  <label class='radio btn'>
    <input id='donation_payment_type_cc' name='donation[payment_type]' type='radio' value='cc'>
    <ul class='card_logos'>
      <li class='card_visa'>Visa</li>
      <li class='card_mastercard'>Mastercard</li>
      <li class='card_amex'>American Express</li>
      <li class='card_discover'>Discover</li>
    </ul>
  </label> 
```

和我的 jQuery：

```
$('#donation_payment_type_eft, #donation_payment_type_cc').change(function(e) {    
 $('.eft_donation').toggle();
 $('.cc_donation').toggle();
 e.preventDefault();
 return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:08:11.817

尝试执行以下步骤：

1.  删除 div 中具有 cc_donation 类的 display:none
2.  计算最大高度值并为 div 指定计算值，如下所示：

_

```
$(function(){
            var eft_height = $(".eft_donation").height();
            var cc_height = $(".cc_donation").height();
            var max = Math.max(eft_height, cc_height);
            $(".eft_donation, .cc_donation").height(max);
            $(".cc_donation").hide();
        }); 
```

# python - matplotlib 中每个绘图的唯一绘图标记

> ID：13091649
> 
> 赞同：46
> 
> 时间：2012-10-26T17:31:55.187
> 
> 标签：python, matplotlib

我有一个循环，在其中创建了一些图，并且每个图都需要唯一的标记。我考虑创建返回随机符号的函数，并以这种方式在我的程序中使用它：

```
for i in xrange(len(y)):
    plt.plot(x, y [i], randomMarker()) 
```

但我认为这种方式并不好。我需要这个只是为了区分图例上的图，因为图不能与线连接，它们必须只是点集。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-10-26T18:31:59.527

`itertools.cycle`将无限期地遍历列表或元组。这比为您随机选择标记的功能更可取。

# Python 2.x

```
import itertools
marker = itertools.cycle((',', '+', '.', 'o', '*')) 
for n in y:
    plt.plot(x,n, marker = marker.next(), linestyle='') 
```

# Python 3.x

```
import itertools
marker = itertools.cycle((',', '+', '.', 'o', '*')) 
for n in y:
    plt.plot(x,n, marker = next(marker), linestyle='') 
```

您可以使用它来生成这样的图（Python 2.x）：

```
import numpy as np
import matplotlib.pyplot as plt
import itertools

x = np.linspace(0,2,10)
y = np.sin(x)

marker = itertools.cycle((',', '+', '.', 'o', '*')) 

fig = plt.figure()
ax = fig.add_subplot(111)

for q,p in zip(x,y):
    ax.plot(q,p, linestyle = '', marker=marker.next())

plt.show() 
```

![示例图](../Images/442092f1bf51b62d973c71fd59cd4a92.png)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-01-16T10:06:44.470

似乎还没有人提到用于循环属性的内置 pyplot 方法。所以这里是：

```
import numpy as np
import matplotlib.pyplot as plt
from cycler import cycler

x = np.linspace(0,3,20)
y = np.sin(x)

fig = plt.figure()
plt.gca().set_prop_cycle(marker=['o', '+', 'x', '*', '.', 'X']) # gca()=current axis

for q,p in zip(x,y):
    plt.plot(q,p, linestyle = '')

plt.show() 
```

[![仅标记循环](../Images/5fd1133a4744bc96e6e46c3b50f9decb.png)](https://i.stack.imgur.com/A2146.png)

但是，这种方式会丢失颜色循环。您可以通过将颜色`cycler`和标记`cycler`对象相乘或相加来添加背景颜色，如下所示：

```
fig = plt.figure()

markercycle = cycler(marker=['o', '+', 'x', '*', '.', 'X'])
colorcycle = cycler(color=['blue', 'orange', 'green', 'magenta'])
# Or use the default color cycle:
# colorcycle = cycler(color=plt.rcParams['axes.prop_cycle'].by_key()['color'])

plt.gca().set_prop_cycle(colorcycle * markercycle) # gca()=current axis

for q,p in zip(x,y):
    plt.plot(q,p, linestyle = '')

plt.show() 
```

[![标记和颜色循环通过乘法组合](../Images/4bd31378bee026636c9a59acb7afd60d.png)](https://i.stack.imgur.com/MxBZr.png)

添加循环时，它们需要具有相同的长度，因此`markercycle`在这种情况下我们只使用前四个元素：

```
plt.gca().set_prop_cycle(colorcycle + markercycle[:4]) # gca()=current axis 
```

[![通过加法组合标记和颜色循环](../Images/7d428c4a26c0b0fc4afd501f7626a1af.png)](https://i.stack.imgur.com/DaXW7m.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-12-08T08:44:10.383

您还可以通过元组使用标记生成，例如

```
import matplotlib.pyplot as plt
markers = [(i,j,0) for i in range(2,10) for j in range(1, 3)]
[plt.plot(i, 0, marker = markers[i], ms=10) for i in range(16)] 
```

有关详细信息，请参阅[Matplotlib 标记文档站点](http://matplotlib.org/api/markers_api.html)。

另外，这个可以结合上面提到的itertools.cycle循环

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T17:39:18.233

只需手动创建一个包含标记字符的数组并使用它，例如：

```
 markers=[',', '+', '-', '.', 'o', '*'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-23T01:30:30.650

```
import matplotlib.pyplot as plt
fig = plt.figure()
markers=['^', 's', 'p', 'h', '8']
for i in range(5):
    plt.plot(x[i], y[i], c='green', marker=markers[i])
    plt.xlabel('X Label')
    plt.ylabel('Y Label') 
plt.show() 
```

# wordpress - 在 WordPress 插件中获取当前子文件夹名称

> ID：13091650
> 
> 赞同：0
> 
> 时间：2012-10-26T17:31:57.623
> 
> 标签：wordpress

我正在编写一个 wordpress 插件，`sub folder`如果 wordpress 安装在子文件夹下，我想获取名称，例如

例如

```
http://blog.example.com/user1/archives/123 => user1
http://www.example.com/blogs/user1/archives/123 => blogs/user1 
```

是否有任何现有的 wordpress 功能我可以添加`sub folder`名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:47:32.280

```
<?php echo parse_url(get_bloginfo('siteurl'),PHP_URL_PATH);?> 
```

# php - 将图表/数据从 Web 应用程序导出到 powerpoint 和 excel

> ID：13091651
> 
> 赞同：0
> 
> 时间：2012-10-26T17:32:02.923
> 
> 标签：php, javascript, web-applications, export-to-excel

图表和表格在网页上显示来自数据库的数据。有没有办法将显示的数据和图表导出到 Excel 和 Powerpoint 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:22:12.870

可以使用[PHPExcel](https://github.com/PHPOffice/PHPExcel)和[PHPPowerPoint](https://github.com/PHPOffice/PHPPowerPoint)之类的库，如果您有任何具体问题，为什么不看看这些库，然后再回来

# ruby-on-rails - 创建 belongs_to 模型的实例未显示在其关联对象列表中

> ID：13091654
> 
> 赞同：0
> 
> 时间：2012-10-26T17:32:14.400
> 
> 标签：ruby-on-rails, has-many, polymorphic-associations, belongs-to

我创建了两个具有以下关联的模型

```
class User < ActiveRecord::Base
  has_many :roles, :dependent => :destroy
end

class Role < ActiveRecord::Base
  belongs_to :user
end

class Student < Role
end

class Tutor < Role
end 
```

但是，当我创建一个新的子角色时，我假设它会与它所属的模型相关联。

如：

```
Tutor.create(:user_id => user_id) 
```

我希望：

```
#some user @user
@user.roles 
```

拥有一个包含 Tutor 的数组。但是，它似乎不起作用。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:20:50.183

一旦你开始使用单表继承，你创建的导师就不是一个角色，就活动记录而言，这种类型的查询。

```
class User < ActiveRecord::Base
  has_many :roles
  has_many :tutors
end

@user = User.first
@user.roles
=> []

@user.tutors
=> [#<Tutor id: 1, user_id: 1, type: "Tutor", created_at: "2012-10-26 18:15:16", updated_at: "2012-10-26 18:15:16">] 
```

如果您想获取用户可能拥有的所有角色的列表：

```
Role.where(user_id: @user.id).all 
```

`[#<Tutor id: 1, user_id: 1, type: "Tutor", created_at: "2012-10-26 18:15:16", updated_at: "2012-10-26 18:15:16">, #<Student id: 2, user_id: 1, type: "Student", created_at: "2012-10-26 18:18:32", updated_at: "2012-10-26 18:18:32">]`

# javascript - 为什么 jQuery 的动画扩展 "jQuery Color" 的闭包函数的第二个参数是一个未定义的值？

> ID：13091655
> 
> 赞同：4
> 
> 时间：2012-10-26T17:32:19.620
> 
> 标签：javascript, jquery

> **可能重复：**
> [带有“未定义”参数的 JavaScript 函数](https://stackoverflow.com/questions/4650442/javascript-function-with-undefined-parameter)

我在这里查看 jQuery Color 源代码

[http://code.jquery.com/color/jquery.color-2.1.0.js](http://code.jquery.com/color/jquery.color-2.1.0.js)

我发现闭包函数的第二个参数是一个未定义的值。见下文：

```
(function( jQuery, undefined ) {

    var stepHooks = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",

    // plusequals test for += 100 -= 100
    rplusequals = /^([\-+])=\s*(\d+\.?\d*)/,
    // a set of RE's that can match strings and generate color tuples. 
```

或者你可以在源代码中看到它。看第二个参数。

我想知道的是为什么第二个参数是未定义的？

我认为这是一种严格设置函数只接收一个参数的方法。

我说的对吗？或者任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T17:35:25.567

这是在代码的其他部分为名称分配一些值的情况下`undefined`。闭包实际上只用一个参数调用，如：

```
(function(jQuery, undefined) {
    // ...
})(jQuery); 
```

这确保了`undefined`它实际上是绑定`undefined`在闭包内的。

# c++ - C++子类使用父类函数

> ID：13091656
> 
> 赞同：0
> 
> 时间：2012-10-26T17:32:31.337
> 
> 标签：c++

我这里有点问题。

*   车辆是父类
*   汽车和摩托车是儿童班

这是我的主要 cpp 文件

```
int main() {
    // assuming max size is up to 100
    VehicleTwoD *vehicletwod[100];
    int vehicleCounter = 0;

    Car *car = new Car();
    Motorcycle *motor = new Motorcycle();

    cout << " Please enter name of vehicle ";
    cin >> vehicleName;

    if (vehicleName == "Car") {
        vehicletwod[vehicleCounter] = car;

        //issue here
        vehicletwod[vehicleCounter].setName(vehicleName);
        //issue end

    }

    return 0;
} 
```

这是我的车.cpp

```
struct Point {
    int x, y;
};

class Car: public Vehicle {
private:
    Point wPoint[4];
    double area;
    double perimter;
public:
    void setType(string);
    void setPoint();
    string getType();
    string getPoint();
} 
```

这里的问题是 setName 是 Vehicle 的函数，而不是 Car 的函数。但我做了应该继承该功能的继承。但似乎不起作用。

它说...在 vehicletwod[vehicleCounter]' 中请求 setName，它是非类类型 VehicleTwoD*

**以上问题已修复**

附加问题：

好的，我通过更改修复了上一个问题。到->

这里是另一个问题。

就像代码一样。在这部分

```
 if (vehicleName == "Car") {
            vehicletwod[vehicleCounter] = car;

            vehicletwod[vehicleCounter]->setName(vehicleName);

           //now i want to setPoint which is a function of child class
           vehicletwod[vehicleCounter]->setPoint();
           //issue here
        } 
```

我尝试设置子类 Car 的函数 setPoint

但是它说..车辆没有名为“setPoint”的成员

**在做了约翰提到的事情之后..上述问题也得到了解决..**

但最困难的部分是如何检索设置的内容，因为它是一个车辆对象而不是汽车对象。

假设在 setPoint 之后，我想 getPoint()

我试着这样做

vehicletwod[0]->getPoint();

我收到一条错误消息，说 getPoint 属于非类类型“vehicletwod”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:34:29.550

好的，仍然不知道是什么`VehicleTwoD`，但如果你写的话，你会更接近正确

```
vehicletwod[vehicleCounter]->setName(vehicleName); 
```

代替

```
vehicletwod[vehicleCounter].setName(vehicleName); 
```

你有一个指针数组，所以你需要使用`->`.

另一个问题是它`setPoint`只是 , 的成员`Car`，因此在将它添加到数组**之前**`not Vehicle`，您必须在汽车上调用它。

 **像这样的东西

```
if (vehicleName == "Car") {
    car->setPoint();
    vehicletwod[vehicleCounter] = car;
    vehicletwod[vehicleCounter]->setName(vehicleName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:36:02.840

您必须以不同的方式实例化 Car 和 Motorcycle：

```
VehicleTwoD *car = new Car();
VehicleTwoD *motor = new Motorcycle(); 
```

然后将要在子类中使用的方法声明为受保护。

不客气！

PD：汽车不是 VehicleTwoD，分类很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:43:04.203

vehicletwod[vehicleCounter] 是一个指针，因此您需要取消引用它。试试 vehicletwod[vehicleCounter]->setName(vehicleName)。

您可能想阅读指针。谷歌“c++ 类指针基础”或结帐[http://www.codeproject.com/Articles/627/A-Beginner-s-Guide-to-Pointers](http://www.codeproject.com/Articles/627/A-Beginner-s-Guide-to-Pointers)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T17:44:37.947

似乎`VehicleTwoD`没有这样的方法：

```
protected:
virtual void setPoint(); 
```

由于数组的定义，您需要它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-26T17:49:12.963

VehicleTwoD 没有 setPoint()，所以必须将 VehicleTwoD * 动态转换为 Car*，但必须确保 vehicletwod[vehicleCounter] 确实指向 Car 的对象，否则会出现运行时错误！

```
dynamic_cast<Car*>(vehicletwod[vehicleCounter])->setPoint(); 
```

最好的方法是将 setPoint() 设为 VehicleTwoD 的纯虚函数；

```
class VehicleTwoD {
public:
    virtual void setPoint() = 0;
    /***/
}; 
```

在派生类中实现 setPoint()。**

# iphone - uiwebview 中的自定义字体，但应用程序包中没有

> ID：13091659
> 
> 赞同：0
> 
> 时间：2012-10-26T17:32:56.717
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我们有一个网络应用程序，它基本上是一个文本编辑器，通过@font-face 提供 100 种字体。

我们正在创建一个与之同步的 iOS 应用程序（Android 应用程序没有问题）。

iOS 应用程序有一个菜单和加载本地存储数据的 UIWebviews。我们希望 webview 可以使用与 @font-face 相同的 css，但它不需要对应用程序的其余部分可用。

将字体添加到 info.plist 的问题在于，当您超过 50-60 ttfs 时，应用程序会崩溃。

有没有办法只使用 html/css/js 而不必涉及应用程序包？

（这需要在应用程序本身内离线工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:53:10.913

我认为您可以将字体捆绑为普通文件而不将它们注册到属性列表中，然后它们将在本地可用于同一捆绑包中的 html/css/js 文件，或直接通过 url。[有关其他类型的 Web 文件的示例，](https://stackoverflow.com/a/8436281/204883)请参阅此问题。

# ios - Xcode Interface Builder 分离 ViewController 来控制一个子视图

> ID：13091664
> 
> 赞同：2
> 
> 时间：2012-10-26T17:33:18.230
> 
> 标签：ios, xcode, interface-builder, viewcontroller

我有一个由 WorkController 控制的视图（从 UIViewController 派生）在视图上我有一个 UICollectionView 类型的子视图 myCollection

由于处理集合的复杂性，我创建了一个单独的控制器 MyCollectionController。

我如何（在 Interface Builder，XCode 4.5 中）将我的子视图的控制器设置为 MyCollectionController ？我还需要设置委托和来源。

我没有找到在 Interface Builder 中执行此操作的方法，所以现在我只是以编程方式执行此操作。

在`viewDidLoad`WorkController 上，我创建了一个 MyController 实例并设置它与 myCollectionView 之间的所有连接。

但是如何用 IB 来做呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:02:48.983

我会考虑离开`WorkController`作为子视图的视图控制器，以便您可以在 IB 中轻松创建连接并获得对子视图的 IBOutlet 引用。然后，当视图加载时，您可以`WorkController`创建一个单独的对象（NSObject 子类），作为`UICollectionView`.

这样做的好处是您的视图控制器管理整个显示，正如 Apple 建议的那样，同时采用可重用对象来卸载一些视图管理。

# javascript - 如何用javascript写这个

> ID：13091666
> 
> 赞同：-2
> 
> 时间：2012-10-26T17:33:23.210
> 
> 标签：javascript, jquery, scroll

我在将动态 id 插入到 JavaScript 代码中时遇到问题：

```
$('#scroll-up1, #scroll-down1').bind({ .............. 
```

在这个例子中，我需要函数来获取我通过函数发送的 id 值

```
$('#scroll-up+id, #scroll-down+id').bind({ .............. 
```

问题是引号作为“或'对我不起作用，我不能使用正确的函数工作正常，这个脚本让我可以滚动文本但唯一的问题是因为不允许我直接从函数的 id 发送值.

为我编辑以放置所有代码：.....

```
PHP AND HTML CODE

<?php

$fil_comments=file("comments.txt");

for ($i=0;$i<sizeof($fil_comments);$i++)
{

$line=explode("~",$fil_comments[$i]);

if ($i%2==0)
{
$back=1;
}
else
{
$back=2;
}

?>

<li>
<div id="web_comment_<?php echo $back?>">

<div id="web_comment_name"><?php echo $line[0];?></div>
<div class="web_comment_texto" id="scroll<?php echo $i;?>"><?php echo $line[1];?></div>
<div class="web_comment_arrow" style="margin-left:260px;" id="scroll-down<?php echo $i;?>"><img src="imagenes/comments/arrow_up.png"></div>
<div class="web_comment_arrow" style="margin-left:288px;" id="scroll-up<?php echo $i;?>"><img src="imagenes/comments/arrow_down.png"></div>

</div>
</li>

<script>
scroll_diver(<?php echo $i;?>);
</script>

<?
}

?> 
```

JAVASCRIPT代码的功能

```
<script type="text/javascript">

function scroll_diver(id)
{

$(function() {

    var ele   = $('#scroll'+id);
    var speed = 30, scroll = 5, scrolling;

    $('#scroll-up'+id).mouseenter(function() {
        // Scroll the element up
        scrolling = window.setInterval(function() {
            ele.scrollTop( ele.scrollTop() - scroll );
        }, speed);
    });

    $('#scroll-down'+id).mouseenter(function() {
        // Scroll the element down
        scrolling = window.setInterval(function() {
            ele.scrollTop( ele.scrollTop() + scroll );
        }, speed);
    });

    //var a='#scroll-up'+id;
    //var b='#scroll-down'+id;

    var a='#scroll-up'+id;
    var b='#scroll-down'+id;

    //$('a,b').bind({
    //$('#scroll-up1, #scroll-down1').bind({
    //$('#scroll-up'+id+',#scroll-down'+id) 
```

/// 这里的问题！！！

```
 $('#scroll-up'+id+', #scroll-down '+id).bind({

        click: function(e) {
            // Prevent the default click action
            e.preventDefault();
        },
        mouseleave: function() {
            if (scrolling) {
                window.clearInterval(scrolling);
                scrolling = false;
            }
        }
    });
});

}
</script> 
```

基本上问题出在用于发送 id 的 JavaScript 函数行中，如果您看到 PHP 代码，我使用 bucle 来创建带有信息的滚动提示，并且每个我都可以滚动他的内容，为此我将函数调用到 bucle和：

```
<script>
    scroll_diver(<?php echo $i;?>);
    </script> 
```

但是在这一行中，没有发送正确的工作信息，如果我将 bucle 用于一个特定的 id，工作正常，这个工作正常，但上下滚动非常快，并且控件没有正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:35:02.567

然后你需要看看这样的东西：

```
$('#scroll-up' + id + ', #scroll-down' + id).bind({ .............. 
```

正如评论员所提到的，jQuery 选择器只是字符串。你可以把它们放在你认为合适的地方。在这种情况下，我将 id（对于最简单的示例，我假设它是一个数字或其他唯一标识符）连接到 #scroll-up 选择器，所以如果你的 id 是“1”，你最终会得到一个字符串，实际上，看起来像：

```
'#scroll-up1, #scroll-down1' 
```

在字符串连接发生之后。

此外，可能值得注意的是，如果您简单地为两个对象提供相同的类，然后在绑定函数中计算出调用哪个项目并适当地执行滚动，那么您可能会获得更好的收益。

所以，如果你有：

```
<div class="container">
    <div id="scroll-up1" class="scroller"><!-- and code --></div>
    <div id="scroll-down1" class="scroller"><!-- and code --></div>
</div> 
```

那么你的javascript可能看起来像这样，避免了连接的需要：

```
$('.container').on("mouseover",'.scroller', function(){
    var thisId = $(this).attr("id");

    if(thisId == "scroll-up1"){
        // do your up-scroll
    } else if(thisId == "scroll-down1") {
        // do your down-scroll
    }
}); 
```

请注意，它使用 .on()，它比 .bind() 更受欢迎，但其想法是基于一个公共类来处理它，而不是每次为那些绑定事件处理程序时都必须修改选择器项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:39:09.827

推荐的解决方案：使用 CLASS NAMES for COMMON FEATURES

`$('.scroll-up, .scroll-down').bind({`

甚至：

`$('.scroll').bind({`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-26T17:35:03.083

```
var id = 38;
$('#scroll-up' + id + ', #scroll-down' + id).bind({ .............. 
```

# cmake - autotool 和 cmake 有什么区别？

> ID：13091671
> 
> 赞同：2
> 
> 时间：2012-10-26T17:33:37.077
> 
> 标签：cmake, autotools

我见过许多愿意从 autotool 切换到 cmake 的项目。我也可以引用[VCMI](http://forum.vcmi.eu/portal.php)、Apache [QPID](https://stevehuston.wordpress.com/2009/05/14/why-apache-qpids-c-build-is-switching-to-cmake/)和[韦诺之战](http://www.mail-archive.com/wesnoth-dev@gna.org/msg03115.html)。

我在论坛上阅读的两个主要原因是：

*   cmake 颜色输出更漂亮。
*   当`configure.ac`包含错误时，构建不起作用。

但我不相信这两种论点。由于我有几个要分发的项目，因此在选择两者中的一个时，我希望有一些可以遵循的指导方针。那么，它们之间有什么区别呢？有没有我可以用一个做而我不能用另一个做的事情？

**编辑**： automake 的一些参数（我还没有验证它们）：

*   当cmake不支持时，它支持“make uninstall”
*   无需安装任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T20:10:36.893

出于某种原因，人们似乎认为 autotools*只是*一个“构建系统”。不过，它真的不止于此。自动工具真正适合帮助项目遵守 GPL 和相关许可下的分发软件（特别是收集“相应的源代码”）和 GNU 项目类型文档（Changelog、README、NEWS 等）。这并不是说您*不能*使用另一个构建系统来执行此操作，但您可能需要采取额外的步骤才能这样做。我不太了解 cmake 或其他构建工具，不知道是否有办法生成 tarball 或类似于 autotools 的东西，`make dist`或者这样做时包含的内容。

# oracle - 自动化脚本

> ID：13091672
> 
> 赞同：0
> 
> 时间：2012-10-26T17:33:40.650
> 
> 标签：oracle, scripting, plsql

我有一堆 SQL 语句，我想把它们放在一个脚本中并一起运行它们并生成一个 EXCEL (*.xls) 文件；我怎么能在蟾蜍中做到这一点？

脚本示例

```
SELECT SUM(CASE 
             WHEN dvdn.ACDCALLS = (dvdn.ABNCALLS + dvdn.ABNCALLS1) 
             THEN dvdn.ABNCALLS    
             ELSE dvdn.ACDCALLS + dvdn.ABNCALLS - dvdn.ABNCALLS1 
           END) AS InboundCalls 
  from ccrdba.CMS_DVDN dvdn , ccrdba.VDN_DIM dim
 where DIM.DW_VDN_ID = DVDN.DW_VDN_ID (+)
   And DETAIL_GROUP like 'HD%'
   and vdn_name not like '%ASM%'
   And DIM.AGENT_GROUP <>'Smart Specialist'
   And row_date BETWEEN TO_DATE('2012-SEP-01', 'YYYY-MON-DD')AND TO_DATE('2012-SEP-30', 'YYYY-MON-DD') 
```

第二个声明

```
select count(*)
  from xx_new.xx_online_registrations@appsread.prd.com oreg
 where oreg.client_party_id = 141043767
   and oreg.cti_id IS NOT NULL
   and oreg.created_by = 'IVR-INTERACTIONS'
   and TRUNC(CREATION_DATE) between '01-SEP-2012' and '30-SEP-2012'
   and status = 'POSTED'
   and last_updated_by = 'IVR-INTERACTIONS' 
```

像上面一样，大约有 10 个 SQL 语句。如何在 ORACLE 中将它们组合在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:55:55.600

您可以尝试“联合所有”，

```
 select col1 from table1
        union all
        select col1 from table2
        union all
        ... 
```

# clojure - Clojure 如何解析名称？

> ID：13091677
> 
> 赞同：2
> 
> 时间：2012-10-26T17:34:02.553
> 
> 标签：clojure

当我在 Clojure 中编写这样的函数调用 (my-function [abc]) 时。Clojure 如何找到我的函数？它是否从全局/每个命名空间符号表中执行查找？

我假设符号表被实现为一个哈希表，它为查找提供 O(1) 时间复杂度。它还需要将函数名称作为字符串与表中的符号进行比较，这应该花费 O(n) 时间（n 是符号的长度）。这意味着符号越长，名称解析就越慢。这是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:02:43.320

> Clojure is a compiled language - it compiles directly to JVM bytecode, yet remains completely dynamic.

-From the front page of [http://clojure.org/](http://clojure.org/)

Compiling means that the Symbols are already prehashed therefor your second statement regarding function name length is only true at compile-time. Also if you are concerned about every CPU cycle a JVM/CLR language will not be your friend for various reasons.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T18:47:18.963

符号使用内部字符串，因此它们与 比较`==`，而不是与`.equals`。所以即使你说的部分是O（n）也是O（1）。然而，这并不重要，因为所有这些查找 (a) 无论如何都非常快，并且 (b) 发生在编译时，而不是运行时。运行程序后，所有函数调用都已解析为指针取消引用或其类似物。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T18:01:51.987

namespaces indeed behave as maps and you can look at them directly with the `ns-map` function:

```
autotestbed.core> (pprint (take 5 (ns-map *ns*)))
nil
([sorted-map                                                                                               
  #<Var@6899a7ce:                                                                                          
    #<core$sorted_map clojure.core$sorted_map@5875c014>>]                                                  
 [read-line                                                                                                
  #<Var@1de9e86e: #<core$read_line clojure.core$read_line@57c00972>>]                                      
 [re-pattern                                                                                               
  #<Var@74064c7b:                                                                                          
    #<core$re_pattern clojure.core$re_pattern@37d02427>>]                                                  
 [keyword?                                                                                                 
  #<Var@4798088a:                                                                                          
    #<core$keyword_QMARK_ clojure.core$keyword_QMARK_@630b813f>>]                                          
 [hta-deploy-cmd                                                                                           
  #<Var@7a7bce95:                                                                                          
    #<core$hta_deploy_cmd autotestbed.core$hta_deploy_cmd@6a6a782d>>]) 
```

more specifically they map vars to objects.

if you really do want a function to be looked up in it's var so changes propagate through your program instantly you can call the var instead of the function that was contained in the var at compile time, which results in a lookup on every call:

```
(#'foo 4) looks the function up in the var every time
(foo 4) looks it up in the map once when it's compiled. 
```

# iphone - 为 UITableView 的第一个和最后一个单元格制作圆角

> ID：13091682
> 
> 赞同：2
> 
> 时间：2012-10-26T17:34:23.793
> 
> 标签：iphone, ios, uitableview

我想为 UITableView 的第一个和最后一个单元格制作圆角。我从这篇文章[自定义圆角](https://stackoverflow.com/questions/12492200/custom-rounded-corners-for-first-and-last-cell-in-a-grouped-uitableview)中看到，您可以在 xib 文件中使用自定义单元格，设置它们的唯一标识符，如：@“beginCell”、@“middleCell”、@“endCell”。我不想使用自定义单元格。有没有其他方法可以做到这一点？

例如：

```
if (cell.count == 0 or cell.count == last)
{
   cell.layer.cornerRadius = 10;
} 
```

像这样的东西。但是没有称为计数的属性。有没有其他财产？

**编辑：**

视图控制器.m

```
#import "ViewController.h"
#import <QuartzCore/QuartzCore.h>
#import "SecondViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize tableItems,images;
- (void)viewDidLoad
{
    [super viewDidLoad];
    tableItems = [[NSArray alloc] initWithObjects:@"Item1",@"Item2",@"Item3",nil];
    images = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"clock.png"],[UIImage imageNamed:@"eye.png"],[UIImage imageNamed:@"target.png"],nil];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
#pragma mark - Required Methods
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return tableItems.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    //Step 1:Check whether if we can reuse a cell
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

    //If there are no new cells to reuse,create a new one
    if(cell ==  nil)
    { 
        cell = [[UITableViewCell alloc] initWithStyle:(UITableViewCellStyleDefault) reuseIdentifier:@"cell"];
        UIView *v = [[UIView alloc] init];
        v.backgroundColor = [UIColor redColor];
        cell.selectedBackgroundView = v;
        //changing the radius of the corners
        //cell.layer.cornerRadius = 10;

    }

    //Set the image in the row
    cell.imageView.image = [images objectAtIndex:indexPath.row];

    //Step 3: Set the cell text content
    cell.textLabel.text = [tableItems objectAtIndex:indexPath.row];

    //Step 4: Return the row
    return cell;

}
#pragma mark - Optional Methods
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
    cell.backgroundColor = [ UIColor greenColor];
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

    SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

    NSString *selectedRow = [tableItems objectAtIndex:indexPath.row];

    secondViewController.selectedRow = selectedRow;

    //[self.navigationController pushViewController:secondViewController animated:YES];
    [self presentViewController:secondViewController animated:YES completion:nil];

    [secondViewController printRowNumber:indexPath.row];
}
- (id)initWithFrame:(CGRect)frame style:(UITableViewStyle)style{
    self = [super initWithFrame:frame style:style];
    return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:50:10.357

只需`UITableView`像这样将初始化样式更改为 Grouped：

```
yourTableViewController = [[UITableViewController alloc] initWithStyle:UITableViewStyleGrouped]; 
```

这将使您的第一个单元格从顶部变圆，最后一个单元格从底部变圆。

**在不使用 UITableViewController 初始化程序的情况下进行编辑：**

```
@interface YourViewController

@property (strong, nonatomic) UITableView *tableView;

@end

@implementation YourViewController

- (id)initWithFrame:(CGRect)frame
{
    if (self = [super init])
    {
        ...
        tableView = [[UITableView alloc] initWithFrame:frame style:UITableViewStyleGrouped];
        ...
        [self.view addSubview:tableView];
    }
    return self;
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:39:15.893

假设您将此代码放入`tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`，您可以这样做：

```
if (indexPath.row == 0 || indexPath.row == ([indexPath length]-1))
{
   cell.layer.cornerRadius = 10;
} 
```

# audio - openFrameworks：声音重复太快，这是一个小故障——如何放慢速度？

> ID：13091683
> 
> 赞同：0
> 
> 时间：2012-10-26T17:34:26.010
> 
> 标签：audio, openframeworks

我正在尝试使用 OF 创建一个简单的乐器。基本上，它是一堆不同的球在屏幕上弹跳。每个球代表一个音符。如果任意两个球离得足够近，则（这些球的）两个音符将被演奏。

我已经设法播放声音。但是他们重复自己的速度太快了，这听起来更像是一个小故障。当球分开时，就是正确播放声音的时候。

我想知道是否有办法减慢重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T11:47:05.320

这完全有意义，因为您每秒多次检查球之间的距离，当距离超过阈值时，您会以相同的速率（每秒多次）触发声音。

你可能想要这样的东西：

```
in update loop:
for each ball
  if distance to other ball < threshold distance
    if the collision sound isn't already playing/hasn't finished
       play collision sound 
```

基本上，当检测到碰撞时，您希望触发一次声音，而不是多次。

# windows - 伪造 USB 设备的存在以测试 Windows 上的驱动程序安装

> ID：13091690
> 
> 赞同：3
> 
> 时间：2012-10-26T17:34:48.510
> 
> 标签：windows, wix, usb, windows-installer, drivers

我被要求帮助解决公司在使用 Windows 安装程序时遇到的一些问题，其中包括为他们制造的某些硬件安装一些自定义驱动程序。

我可以访问源代码来构建软件和安装程序（这是一个 WIX/MSI 安装程序），但无法访问硬件，因此实际上无法正确测试它。

是否有可能（使用工具包或不使用工具包）欺骗 Windows 认为特定设备 USB 设备已连接到计算机以触发 Windows 尝试安装驱动程序？. 我可以访问所有供应商 ID、设备 ID 等信息。

谢谢汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T08:12:35.943

这应该是可能的。查看**WDK USBSamp**和**NDIS 虚拟微型端口（或虚拟串行驱动程序）**示例。第一个是 USB 驱动程序示例，第二个演示如何构建虚拟驱动程序。您应该能够将两者结合起来创建一个虚拟 USB 驱动程序。

# sql - SQL 选择 WHERE 在一列 x 和列 y 中重复！= z

> ID：13091693
> 
> 赞同：0
> 
> 时间：2012-10-26T17:35:10.423
> 
> 标签：sql, duplicate-removal

所以我们在我们的服务器上运行了一个重复的 SQL 脚本，直到最近才意识到这一点。本质上，我有很多行，其中有 2 个条目具有相同的列 x (crn)。

最初也使用相同的 y 列（状态）输入。我们的应用程序让用户更新列 y（状态）。但是，现在我们有 2 行，其中一行的状态为“S”，另一行的状态不是“S”。我的目标：

从表中删除所有内容，其中存在重复的 CRN，状态为 S。除非存在重复，否则我不想删除行，但如果存在，我只想删除状态为“S”的行. 另外，如果两个记录的状态都是 S，我宁愿不删除这两个记录，但如果我这样做了，那也没什么大不了的，因为我会在下次下载时再次获得这些课程。

我已经开始制作一个 select 语句来查询我想要的行，但不知道如何执行 ONLY SELECT IF DUPLICATE EXISTS 部分。我觉得我需要 UNION 或 LEFT JOIN 或仅在存在重复项时才获取记录。

```
SELECT * FROM 
cas_usuECourses 
WHERE 
crn IN (SELECT crn FROM cas_usuECourses GROUP BY crn having count(1) > 1)
AND status = 'S'
AND termCode = 201320 
```

编辑：有没有办法说...上面，但如果两个 dup 都有'S'只删除其中一个？

编辑：我“认为”这对我来说看起来不错。有什么想法吗？

```
SELECT id FROM (
    SELECT id, Row_Number() Over (Partition By crn ORDER BY id DESC) as ranking
    FROM cas_usuECourses
    WHERE status = 'S'
    AND termCode = 201320
) as ranking 
```

WHERE 排名 = 1

我认为这会给我所有状态为“S”的ID，如果有两个带有“S”的ID，这会给我第二个创建的ID。我发现我们的 termCode 中的每个条目都有重复项，所以......不必担心检查重复项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:10:23.233

如果您可以在表中添加一列并用不同的值填充它，那将是微不足道的 - 您可以定位每一行。

否则，在您的初始步骤之后，我通常会在您的子选择上打开一个带有状态 S 的光标，以仅选择两个状态均为“S”的 crn，并在每次循环迭代中使用适当的 crn 删除前 1 条记录。这样你就可以摆脱重复的 crn/status 对。

# sql - SQL 连接而不是嵌套查询

> ID：13091697
> 
> 赞同：2
> 
> 时间：2012-10-26T17:35:19.110
> 
> 标签：sql

```
select baseurl from tmp_page_tbl 
where baseurl NOT IN ( select baseurl from page_lookup ) 
```

如何使用联接而不是嵌套来编写此查询。

这个想法是从 tmp tbl 获取在 page_lookup 表中不存在的 baseurl

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:36:36.857

```
 select baseurl
 from tmp_page_tbl t 
 left outer join page_lookup p on t.baseurl = p.baseurl 
 where p.baseurl IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:37:46.140

您可以使用如下连接重写：

```
SELECT baseurl from tmp_page_tbl as t
LEFT JOIN page_lookup as pl
ON t.baseurl=pl.baseurl
where pl.baseurl IS NULL 
```

我不确定我会不会，除非你有令人信服的理由。以下是一些值得一看的链接：

*   [http://explainextended.com/2009/09/15/not-in-vs-not-exists-vs-left-join-is-null-sql-server/](http://explainextended.com/2009/09/15/not-in-vs-not-exists-vs-left-join-is-null-sql-server/)
*   [http://sqlinthewild.co.za/index.php/2010/03/23/left-outer-join-vs-not-exists/](http://sqlinthewild.co.za/index.php/2010/03/23/left-outer-join-vs-not-exists/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:51:05.177

如果您没有选择大部分表格并且您在 page_lookup.baseUrl 上建立了索引，那么 not exists 应该是最有效的。

```
select baseurl from tmp_page_tbl tmp
where not exists ( select 1 from page_lookup WHERE baseurl = tmp.baseurl ); 
```

在某些 RDBMS（Oracle DB 和 Postgres）上，您可以使用 MINUS（或 Postgres 中的 EXCEPT）。这在某些情况下非常有效。

# bash - 为什么我的数组在退出循环后消失了？

> ID：13091700
> 
> 赞同：4
> 
> 时间：2012-10-26T17:35:34.413
> 
> 标签：bash

> **可能重复：**
> [Bash：无法在管道右侧构建数组](https://stackoverflow.com/questions/11656013/bash-cant-build-array-in-right-side-of-pipe)

我需要从文件创建一个数组。我必须计算一个索引来存储数据。当我离开我的读取循环时，我的数组似乎消失了。为什么？？？

下面的脚本说明了这个问题。

```
#!/bin/bash

echo -e "15\n21\n33" | while read i ; do
    ar[$i]="set"
    echo ${!ar[@]}
    echo ${ar[@]}
  done

echo
echo outside loop:  
echo ${!ar[@]} 
echo ${ar[@]} 
```

正如您在输出中看到的，打印数组索引和内容不再在循环之外工作。

```
15
set
15 21
set set
15 21 33
set set set

outside loop: 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T20:45:06.520

@ormaaj 在他的评论中有答案：不要将循环放在管道中。我假设这些数字不是恒定的，所以从进程替换重定向：

```
while read i ; do
    ar[$i]="set"
    echo ${!ar[@]}
    echo ${ar[@]}
done < <(process to generate indices) 
```

另一种选择是将最终的 echo 语句放在与循环相同的子 shell 中：

```
process to generate indices | {
    while read i ; do
        ar[$i]="set"
        echo ${!ar[@]}
        echo ${ar[@]}
    done

    echo
    echo outside loop:  
    echo ${!ar[@]} 
    echo ${ar[@]} 
} 
```

# ios - 从应用程序使用 iPhone USB 网络共享连接

> ID：13091703
> 
> 赞同：0
> 
> 时间：2012-10-26T17:35:45.740
> 
> 标签：ios, usb, tethering

我的应用程序需要在 PC/Mac 之间传输数据，但不使用无线或 3G。是否可以使用 USB 电缆在 PC/Mac 可访问的设备上运行服务器？

从程序通过 USB 访问应用程序的文档目录也可以。

最好的方法是什么？我需要一个解决方案，可以在普通设备上运行，不允许越狱。如果它在 PC/Mac 上无需特殊驱动程序即可工作，那也是一个好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:51:38.390

您应该启用`UIFileShareEnabled`. 更多信息请点击这里：

[我的应用程序中的 iTunes 文档目录](https://stackoverflow.com/questions/3818213/itunes-documents-directory-in-my-app)

# c - flushall() 和 _flushall() 之间的差异

> ID：13091707
> 
> 赞同：2
> 
> 时间：2012-10-26T17:36:01.390
> 
> 标签：c

当我键入时，编译器 (Visual C++) 总是纠正我`flushall();`

> 警告 C4996：“flushall”：不推荐使用此项目的 POSIX 名称。而是使用符合 ISO C++ 的名称：_flushall。

他们都为我工作，有什么区别吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T17:43:18.873

这个警告是荒谬的；`flushall`不是 POSIX，据我所知，从来都不是。刷新所有打开的 stdio 流的正确 ISO C 方法是`fflush(NULL);`.

为了更清楚地说明这个问题，我相信这是 Visual C 用于不属于 C 标准的函数的通用警告消息，但它们的标准库具有某种最低程度的兼容性。这些函数中的大多数类似于`open`and `read`，并且以某种模糊的方式对应于同名的 POSIX 函数，并且可以被认为是 stdio 等底层的低级原语。有些，比如`flushall`，实际上不是来自 POSIX，但只是基于从各种旧版 unice 复制的古怪函数。

由于这些函数实际上不是 C（或 C++）标准的一部分，并且 C 标准（也可能还有 C++ 标准......？）为未在标准中明确定义或保留的应用程序标识符保留，它不是-conformant 以在标准标题名称中公开，例如`open`或`flushall`. POSIX 通过使用*功能测试宏来解决这个问题*应用程序可以通过它从实现中显式地保证它想要的命名空间，但 Microsoft 采取了一种方法，即弃用类似 POSIX 的名称并提供一组替代函数，前缀为下划线，这使它们成为保留的命名空间的一部分实施。警告建议您使用这些 Microsoft 特定的名称，以便在您打开选项（可能由编译器开关的宏控制）以在标头中实现严格的命名空间一致性时，您的代码仍然可以编译。

不幸的是，使用带下划线前缀的名称以 Microsoft 推荐的方式编写代码会使您的代码完全不可移植。由于这些名称位于**为实现保留**的命名空间中，因此其他平台可能碰巧将相同的名称用于执行完全不同的事情的函数，并且由于它们是保留的，因此您将不允许替换或`#define`围绕它们重新映射它们到其他功能。

简而言之：我会找到生成此警告的警告标志，然后将其关闭。连同那个喷出 FUD 的那个，这样那样的标准函数是“不安全的”，你应该改用 _s 后缀的函数。但是，如果您需要的唯一功能是`fflushall()`，只需将其替换`fflush(NULL);`为即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T23:28:07.870

这可以追溯到 1988 年末，当时 Dave Cutler 的团队开始在 Windows NT 上进行开发。设计目标是创建一个具有三个不同 api 层的操作系统，Winapi、OS/2 和 POSIX。POSIX 那时非常新，第一个版本也在 1988 年发布。它被包括在内是因为它被列为美国政府标准 FIPS 151-2 中的一项要求。

那时 Unix 战争开始变得严肃起来。相当恶毒，在竞争的实现中故意存在差异。主要的战斗者是开放软件基金会，一个担心 Sun 日益增长的主导地位的行业组织和 Unix International，一个围绕 AT&T 的组织。直到 1993 年，COSE 联盟（即现在的 Open Group）成立，尘埃落定。

这使得 flushall() 的确切起源很难追查，当时它是非常狂野的西部。微软也从事 C 编译器业务，因此他们当然发布了构建在 POSIX 层上运行的程序的工具，包括声明函数的标头。所以可以肯定的是，flushall 是在他们的工具集中出现的。我没有副本要检查了，被漏水的屋顶摧毁了。

NT Posix 和 OS/2 api 层从未获得太大的吸引力，被 Win32 的巨大成功所掩盖。它们在 2001 年随 XP 版本完全删除。我认为，这也是他们开始弃用原始 Posix 函数名称的时候。显然，当操作系统不再支持这些声明时，保留这些声明已经没有多大意义了。Posix 名称相当笨拙，全局命名空间中的短小写名称会导致许多意外。

然而，它们从未被完全移除，至今仍被记录在案。这就是您收到警告的原因。与其选择，不如选择标准 C 库名称 fflush()。

# jquery - jQuery 游戏按钮生成器

> ID：13091709
> 
> 赞同：-1
> 
> 时间：2012-10-26T17:36:03.167
> 
> 标签：jquery, button, random, numbers, coordinates

我一直在寻找我拥有的游戏创意。我刚刚开始使用 JQuery，我想知道如何制作一个游戏，您单击一个按钮然后它会在不同的位置重生。

我所知道的是，我也会制作一个画布，然后在画布中生成 2 个数字，然后将其移动到那个位置。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:45:48.943

这可以通过操纵应用于按钮的 CSS 来非常简单地完成。这是一个例子：

**JavaScript：**

```
$(document).ready(function(){
    $("#button").on("click", function(){
        var widthMax = $(window).width() - $("#button").width();
        var heightMax = $(window).height() - $("#button").height();

        var randomLeft = Math.random() * (widthMax);
        var randomTop = Math.random() * (heightMax);

        $("#button").css("left", randomLeft).css("top", randomTop);
    });
}); 
```

**HTML：**

```
<input type="button" style="position: absolute;" id="button" value="Click Me" /> 
```

# asp.net-mvc-3 - HTTP POST，在 MVC 中获取？

> ID：13091716
> 
> 赞同：0
> 
> 时间：2012-10-26T17:36:40.063
> 
> 标签：asp.net-mvc-3

在 MVC3 中，我创建了一个注册表单。我创建了一个模型、控制器和视图。这是我的代码：

```
 [HttpGet]
    public ActionResult Insert()
    {
        Models.Employees objEmpl = new Models.Employees();
        return View(objEmpl);
    }

    [HttpPost]
    [AcceptVerbs("Post")]
    public ActionResult Insert(Models.Employees objs)
    {
        var v = new Models.test().InsertDl(objs);
        return View();
    }
  The above is my controller

   @model MvcVideo.Models.Employees
 @{
   ViewBag.Title = "Insert";
    Layout = "~/Views/Shared/VideoLayout.cshtml";
  }
<h2>Insert</h2>
 @using(Html.BeginForm("Insert","Home",FormMethod.Post ))
 {
  <table>
 <tr>
   <td>
      Employee Name
   </td>
   <td>
     @Html.TextBox("Ename",@Model.Enames)
   </td>
 </tr>
 <tr>
   <td>
     Department Id
   </td>
   <td>
     @Html.TextBox("Departmentid",@Model.DepartId )
   </td>
 </tr>
 <tr>
   <td>
      Email Id
   </td>
   <td>
      @Html.TextBox("Emailid",@Model.EmailIds) 
   </td>
 </tr>
  <tr>
    <td>
      Address
    </td>
    <td>
       @Html.TextBox("Address",@Model.Adress)
    </td>
  </tr>
  <tr>
    <td colspan="2" style="text-align:center;" >          
    <button  title ="Ok"   value="OK"></button>   
    </td>
  </tr>
</table> 
```

}

但是action 方法参数`objs`处的对象`public actionresult Insert(models.Empoyees objs)`显示空值。意思是`Ename=Null`,和`Department=0``Emailid=Null``Address=null`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:47:21.267

它不起作用，因为您在 Html 帮助程序中提供的名称与模型上的属性名称不匹配，因此当值被回发时，默认模型绑定器无法解析它们。

使用 Html.TextBoxFor 而不是 Html.TextBox 将为您提供针对您的模型的强类型，并且是更安全的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:40:13.257

替换这个

```
@Html.TextBox("Ename",@Model.Enames) 
```

和

```
@Html.TextBoxFor(model => model.Enames) 
```

这将解决您的问题。

# python - 没有命名空间的 Python XpathEvaluator

> ID：13091717
> 
> 赞同：3
> 
> 时间：2012-10-26T17:36:40.870
> 
> 标签：python, xpath, lxml, elementtree

我需要编写一个动态函数来查找 ATOM xml 文档的子树上的元素。

为此，我写了这样的东西：

```
 tree = etree.parse(xmlFileUrl)
    e = etree.XPathEvaluator(tree, namespaces={'def':'http://www.w3.org/2005/Atom'})
    entries = e('//def:entry')
    for entry in entries:
        mypath = tree.getpath(entry) + "/category"
        category = e(mypath) 
```

上面的代码找不到类别。

原因是 getpath 返回一个没有命名空间的 XPath，而 XPathEvaluator e() 需要命名空间。

有没有办法让 getpath 在路径中返回命名空间，或者允许 XPathEvaluator 接受路径而不指定命名空间（或者，更确切地说，以其他方式指定它）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:12:05.270

**使用**：

```
*[local-name() = 'category'] 
```

`Or, if you want to be more precise`：

```
*[local-name() = 'category' and namespace-uri() = 'http://www.w3.org/2005/Atom'] 
```

**或者简单地说**：

```
def:category 
```

# powershell - 将 LastLogon 转换为 DateTime 格式

> ID：13091719
> 
> 赞同：27
> 
> 时间：2012-10-26T17:37:04.817
> 
> 标签：powershell, active-directory

我的目标是从我的域中获取包含以下信息的用户列表：

-显示名称 -国家 -经理姓名 -上次登录日期

我正在运行以下脚本，除了 LastLogon 之外，一切看起来都不错。它将时间输出为一堆随机数，如“129948127853609000”。如何将其转换为 DateTime 格式？

```
Search-ADAccount -UsersOnly -SearchBase "OU=International,DC=mycompany,DC=com" -AccountDisabled:$false | Get-ADUser -Properties Name, manager, LastLogon | Select Name, manager, LastLogon | export-csv C:\Australia.csv -NoTypeInformation 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-10-26T17:43:53.783

`DateTime.FromFileTime`应该做的伎俩：

```
PS C:\> [datetime]::FromFileTime(129948127853609000)

Monday, October 15, 2012 3:13:05 PM 
```

然后根据您要如何格式化它，检查[标准](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)和[自定义](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)日期时间格式字符串。

```
PS C:\> [datetime]::FromFileTime(129948127853609000).ToString('d MMMM')
15 October
PS C:\> [datetime]::FromFileTime(129948127853609000).ToString('g')
10/15/2012 3:13 PM 
```

如果您想将其集成到您的单行中，请将您的`select`声明更改为：

```
... | Select Name, manager, @{N='LastLogon'; E={[DateTime]::FromFileTime($_.LastLogon)}} | ... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-26T18:19:45.717

```
Get-ADUser -Filter {Enabled -eq $true} -Properties Name,Manager,LastLogon | 
Select-Object Name,Manager,@{n='LastLogon';e={[DateTime]::FromFileTime($_.LastLogon)}} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-17T18:50:32.790

LastLogon 是用户最后一次登录到您在运行 GET-ADUser cmdlet 时碰巧负载平衡到的任何域控制器，并且**不会跨域复制**。如果您想要最后一个用户登录到您域中任何域控制器的时间，您真的应该使用 LastLogonTimestamp。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-29T05:35:57.640

使用**LastLogonDate**属性，您不必转换日期/时间。 **转换时lastLogonTimestamp**应等于**LastLogonDate**。这样，您将获得整个域的最后登录日期和时间，而无需转换结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-10T19:39:19.070

重要的是要知道 LastLogonDate 不会被复制。LastLogonTimestamp 非常重要，因此在大型域上使用时间戳很重要

# php - BoxArray 中未定义的偏移量

> ID：13091722
> 
> 赞同：0
> 
> 时间：2012-10-26T17:37:11.453
> 
> 标签：php, arrays, multidimensional-array

我正在尝试计算每个盒子的体积，但我不断遇到错误，我不知道如何修复它。一切似乎都是正确的，我遵循了书中的例子。

这是它在这段代码中给我的错误：

“注意：未定义的偏移量：第 16 行 C:\wamp\www\BoxArray.php 中的 0”

```
<?php
$BoxMeasurements = array("sBox" => array("length" => 12, "width" => 10, "depth" => 2.5),
                         "mBox" => array("length" => 30, "width" => 20, "depth" => 4),
                         "lBox" => array("length" => 60, "width" => 40, "depth" => 11.5));

                        $BoxMeasurements = array_slice($BoxMeasurements, 0, 3);
                        echo "The box sizes are:";
                        for($i = 0; $i < count($BoxMeasurements); ++$i)
                        {
                            echo "$BoxMeasurements[$i]";
                        }
?> 
```

当我尝试以另一种方式执行此操作时，出现此错误：

“解析错误：语法错误，意外 '='，在第 8 行的 C:\wamp\www\BoxArray.php 中期待 ')'”

```
<?php
$sBox = array("length" => 12, "width" => 10, "depth" = 2.5);
$mBox = array("length" => 30, "width" => 20, "depth" = 4);
$lBox = array("length" => 60, "width" => 40, "depth" => 11.5);
$dimension = array($sBox, $mBox, $lBox);

echo "$dimension[0][0]";
?> 
```

有没有一种特殊的方法来调用变量/数组名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:44:54.450

`$BoxMeasurements`被声明为关联数组，这意味着您应该使用您在声明中定义的键访问它的值`"sBox"`：`"mBox"`和`"lBox"`.

为了迭代这种数组，您可以使用以下`foreach`形式：

```
<?php
$BoxMeasurements = array("sBox" => array("length" => 12, "width" => 10, "depth" => 2.5),
                         "mBox" => array("length" => 30, "width" => 20, "depth" => 4),
                         "lBox" => array("length" => 60, "width" => 40, "depth" => 11.5));

echo "<pre>";
echo "The box sizes are:\n";
foreach($BoxMeasurements as $name => $size)
{
    $volume = $size['length'] * $size['width'] * $size['depth'];
    echo " - $name: $volume\n";
}
echo "</pre>";
?> 
```

输出

```
The box sizes are:
 - sBox: 300
 - mBox: 2400
 - lBox: 27600 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:41:39.760

您似乎不了解**变量名称**和**变量内容**之间的区别，如使用`"`周围**名称**所示。这是毫无意义。它应该是

```
echo $BoxMeasurements[$i]; 
```

分配数组时，正确的语法是：

```
key => value 
```

而您的某些“行”仅分配了“键=值”，这会引发语法错误。

您还尝试通过数字索引访问数组，而您的数组不使用它们。使用 foreach 迭代数组：

```
foreach( $BoxMeasurements as $key=>$val ) {
  echo $val;
} 
```

最后，您应该在循环中进行**post increment ，而不是****pre increment**。`for`

 **我强烈建议您花一些时间阅读一些教程，因为您犯了太多基本错误。**

# ruby-on-rails - Rails 查找条件从字段中删除前 2 个符号

> ID：13091725
> 
> 赞同：0
> 
> 时间：2012-10-26T17:37:22.870
> 
> 标签：ruby-on-rails, ruby, activerecord

我有这样的 AR 代码：

```
@types = Type.find(:all, 
             :conditions => { :TYP_MOD_ID => params[:models],
                              :TYP_PCON_START => params[:year] }, 
             :order => "TYP_HP_FROM") 
```

`TYP_PCON_START`但是如果没有前两个符号并进行比较，我该怎么做呢？例如`:TYP_PCON_START.to_s[4...6]`

我也需要比较不是=，而是>=>条件。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:52:57.083

使用`where`而不是`find`. 我也不明白你的意思`how can i do that i see TYP_PCON_START without first 2 symbols and compare?`。

```
@types = Type.where("TYP_MOD_ID = ? AND substring(TYP_PCON_START FROM 4 to 6) >= ?", 
  params[:models], params[:year]).order("TYP_HP_FROM") 
```

# javascript - console.log 不会在 facebook 上的 firebug 中显示

> ID：13091728
> 
> 赞同：0
> 
> 时间：2012-10-26T17:37:30.057
> 
> 标签：javascript, facebook, firebug, facebook-javascript-sdk, facebook-page

在 Facebook 页面选项卡中，console.log('test'); 输出不会显示在 firefox 上的 firebug 中。在 chrome 上尝试过，它们也没有出现在 firebug 中，但它们确实出现在 chrome 上的 javascript 控制台上。但我更喜欢使用 firefox 和 firebug。

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T11:41:57.840

几天前发生在我身上，我不得不使用 window 对象调用 console.log

```
window.console.log('whatever'); 
```

希望对你有帮助

# symfony-1.4 - Symfony 1.4 嵌入式表单值在生产服务器上保存时丢失

> ID：13091734
> 
> 赞同：0
> 
> 时间：2012-10-26T17:38:04.380
> 
> 标签：symfony-1.4

我在生产服务器上的 Symfony 1.4 项目上有一个奇怪的错误，而在本地服务器上一切正常。一个表单有多个嵌入式表单，保存它们可以在本地服务器（Windows 机器）上完美运行。在生产服务器（linux）上，如果嵌入的表单超过 30 个，则嵌入表单的值会在保存时丢失。如果嵌入的表单少于 30 个，它也可以正常工作。它不是嵌入式表单错误，因为它在本地服务器上运行良好。本地和生产服务器都使用 symfony 1.4.19。我无法弄清楚是什么导致了生产服务器上的错误。

使用 var_dump($this->getValues) 进行调试，某些嵌入表单的值 ['bookPrice']['price'] 为空，而发布的值不为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T04:07:10.963

只是为了澄清。发布的值不正确。Post_max_size 是一样的。我发现数据被截断了。suhosin.request.max_vars 设置为 100。这会导致问题。在 php.ini 上设置 suhosin.request.max_vars = 1000 可以解决问题。

# c++ - 使用 std::accumulate 计算部分向量的总和

> ID：13091740
> 
> 赞同：6
> 
> 时间：2012-10-26T17:38:27.497
> 
> 标签：c++, vector, accumulate

有这个向量

```
vector<int> v{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}; 
```

如何使用[累积函数计算](http://en.cppreference.com/w/cpp/algorithm/accumulate)**前半部分**的总和（即 15）？

我可以使用仅带有迭代器（而不是数字索引）的 for 循环来执行此操作吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-26T17:42:51.730

你可以

```
accumulate(v.begin(), v.begin()+int(v.size()/2), 0) 
```

如果`v`是你的向量。

你也可以写一个循环：

```
int sum = 0;
for (vector<int>::iterator it = v.begin(); it != v.begin+int(v.size()/2); ++it) {
    sum += *it;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T17:53:40.213

要仅使用前半部分，您必须获得仅涵盖该范围的迭代器。通常人们想要使用整个容器，所以他们使用 begin 和 end 函数，但这不是唯一的方法：

```
auto begin = std::begin(v);
auto middle = std::begin(v) + v.size()/2; // works for random access iterators

auto middle = begin;
std::advance(middle, v.size()/2); 
```

Advance 适用于输入迭代器或更好，但对于不是其他类型之一的输入迭代器，高级传递的项目将不再可访问。

```
auto middle = std::next(begin, v.size()/2); // C++11\. works for forward iterators 
```

这些只是您可以在不同类型的迭代器上执行的一些可用操作。

* * *

因此，现在您可以创建指定所需范围的迭代器，您可以在 std::accumulate 或手动 for 循环中使用它们：

```
std::accumulate(std::begin(v), std::next(std::begin(v), v.size()/2), 0);

for (auto begin(std::begin(v)), end(begin+v.size()/2); begin!=end; ++begin) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:41:25.093

```
accumulate<int>(v.cbegin(), v.cbegin() + v.size()/2, 0); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-26T17:42:04.657

int sum = std::accumulate(v.begin(), v.begin() + v.size() / 2, 0);

# ajax - 如何通过 p:ajax 使用 OmniFaces Ajax.updateColumn() 或 Ajax.updateRow()

> ID：13091742
> 
> 赞同：2
> 
> 时间：2012-10-26T17:38:43.943
> 
> 标签：ajax, jsf, primefaces, omnifaces

我正在尝试使用 OmniFaces 1.3 (SNAPSHOT) Ajax 实用程序的 Ajax.updateColumn() 方法。更具体地说，我想用 Ajax.updateColumn(table, 1) 替换使用 p:ajax update=":pageContentPanel"，它是一个包含以下 xhtml 的 h:panelGroup（或 p:outputPanel）。

```
<h:dataTable id="dt_tripDates" style="width: 200px !important;"
             var="tripDate" value="#{pf_ordersController.tripDates}">

    <p:column style="text-align: right !important;">
        <h:outputText id="rowNumber" value="#{tripDate.rowNumber}" />
    </p:column>

    <p:column style="text-align: center !important;">
        <p:calendar id="tripDate" value="#{tripDate.tripDate}"
                    size="16" label="Trip Date"
                    pattern="MM/dd/yyyy" navigator="true"
                    onchange="changeOthersOnDateChange(this);">
            <p:ajax partialSubmit="false" event="dateSelect"
                    listener="#{pf_ordersController.tripDateSelectedOnAddUsingTemplate}"
                    update=":pageContentPanel"/>
            <f:convertDateTime pattern="MM/dd/yyyy" />
        </p:calendar>
    </p:column>

</h:dataTable> 
```

在 bean 中，我有以下内容，由 p:ajax listener="..." 引用：

```
public void tripDateSelectedOnAddUsingTemplate(DateSelectEvent event) {
    DateTime dt, today = DateTime.now(),
             tripDateTime = new DateTime(event.getDate());
    String clientId = event.getComponent().getClientId();
    Integer pos = clientId.indexOf(":tripDate") - 1,
            rowNumber = Integer.valueOf(clientId.substring(clientId.lastIndexOf(":", pos) + 1, pos + 1));
    /*
     * clientId = orderAddUsingTemplateForm:dt_tripDates:0:tripDate
     * id = tripDate
     */
    /*
     * if tripDates in the list, that follow the argument tripDate in the list,
     * have today's Date, then set them to the argument
     */
    for (int i = rowNumber; i < nbrOfTripDates; i++) {
        tripDates.get(i).setTripDate(tripDateTime.toDate());
    }
    // OmniFaces Ajax utility to update UIData columns
    Ajax.updateColumn(tripDatesDataTable, 1);
} 
```

在尝试使用 Ajax.updateColumn() 时，我将“HtmlDataTable tripDatesDataTable”作为属性添加到 bean。

该 bean 是 JSF @SessionScoped 托管 bean。请让我知道在执行 p:ajax（属于上述 xhtml 中的 p:calendar）时如何调用 Ajax.updateColumn()。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:57:17.433

关键是您必须以[`UIData`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIData.html)某种方式拥有组件的句柄，以便您可以将其传递给`Ajax#updateColumn()`. 在您的特定情况下，最简单的方法是`event.getComponent()`在[`Components#getClosestParent()`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/util/Components.html#getClosestParent%28javax.faces.component.UIComponent,%20java.lang.Class%29).

```
UIData tripDatesDataTable = Components.getClosestParent(event.getComponent(), UIData.class);
// ...
Ajax.updateColumn(tripDatesDataTable, 1); 
```

请注意，您也可以通过这种方式获取行号，而无需分解客户端 ID。

```
int rowNumber = tripDatesDataTable.getRowIndex(); 
```

# android - SharedPreferences 和三星 S3

> ID：13091745
> 
> 赞同：1
> 
> 时间：2012-10-26T17:38:51.083
> 
> 标签：android, sharedpreferences

我一直试图通过 Eclipse 和 Astro 文件管理器找到我的 SharedPreferences，但没有任何运气。

我查看了以下位置，但仍然无法找到它们。

```
/data/data/YOUR_PACKAGE_NAME/shared_prefs/ 
```

如果我使用我的 DroidX，它们位于此目录中。

这就是我保存它们的方式

```
SharedPreferences prefs = Login.this.getSharedPreferences("mysharedprefs", Activity.MODE_PRIVATE);
Editor editor = prefs.edit();
editor.putString("username", username.getText().toString());
editor.putString("password", password.getText().toString());
editor.commit(); 
```

三星允许访问与例如摩托罗拉 DroidX 不同的文件系统的方式有什么不同吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T20:10:23.720

在三星设备上，您可以在`/dbdata/databases/package.name/shared_prefs/package.name_preferences.xml`

# header - ELF 中 Clang 编译器的签名是什么？

> ID：13091747
> 
> 赞同：2
> 
> 时间：2012-10-26T17:39:02.810
> 
> 标签：header, clang, signature, elf, clang++

我有几个`gcc/g++`用`clang/clang++`.

到目前为止，我已经尝试过：

```
strings -a ./myBinary | grep -i clang
objdump -s --section .comment ./myBinary
readelf -p .comment ./myBinary 
```

并且该命令中的每一个都无法识别生成的二进制文件`clang`，并且 Clang 生成的每个文件都被识别为生成的，`gcc`并且基本上我所有的二进制文件都是由同一编译器根据此工具生成的。

Clang 是否放置与 GCC 相同的签名？我如何获得有关哪些编译器生成了该二进制文件的信息？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-04-23T19:27:57.643

[我猜它是stackoverflow.com/questions/43523698/clang-appears-to-use-gcc](https://stackoverflow.com/questions/43523698/clang-appears-to-use-gcc)的副本

似乎如果您链接到由 GCC 构建的 glibc，则后者会获得功劳。

# html - 无法将 CSS 应用于 HTML 文档的正文

> ID：13091754
> 
> 赞同：2
> 
> 时间：2012-10-26T17:39:16.893
> 
> 标签：html, css

我无法使用 CSS 中的以下代码在我的 HTML 文档中应用背景图像：

```
body
    {
        text-align:center;
        background-image:url('C:\wamp\www\marks display\WI71.jpg');
    } 
```

我也搜了一下，发现上面的声明是真的但是无法执行。为什么会这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T17:42:15.780

那不是 URL，那是文件路径。

如果您网站的根目录是`marks display`，您可能想要这样：

```
background-image:url('/WI71.jpg'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:42:13.953

在网络上发布时，路径不应映射到驱动器（文件路径），它应该是一个 URL。

它应该像 `background-image:url('http://domainname/71.jpg');`-- Complete Url of Image

或`background-image:url('WI71.jpg')`；-- 相对网址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T19:12:23.703

该字符串`C:\wamp\www\marks display\WI71.jpg`不符合 URL 语法。首先，`\`URL 中不允许使用这样的字符；它应该由斜线替换`/`。空格字符应 % 编码为`%20`. 最后，要使用路径名引用本地系统中的文件，请使用`file:`URL：

```
background-image:url('file:///C:/wamp/www/marks%20display/WI71.jpg'); 
```

但是，IE 在这里有非常宽松的错误恢复，因此如果文件存在于指定名称所指示的位置，那么您的格式错误的代码实际上可以在 IE 上运行。其他浏览器需要正确的代码（大部分）。

此类 URL 的用处非常有限。它们大多只在本地测试中工作，即使在本地测试中，最好使用相对于 HTML 文档位置的 URL。这样，您可以在本地测试和 Web 服务器上使用相同的代码，前提是您复制文件夹结构的相关部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T17:47:27.413

buddy html css 实际上是服务器上的东西，所以下面是正确的代码：

```
background-image: url('c:/xyz/xyz/sample.jpg'); 
```

但是，如果您在真正的网络服务器上上传您的网站，请不要提供这样的路径，只需像下面这样

```
background-image: url('foldername_if required/imagename'); 
```

# entity-framework - 使用实体框架的数据安全

> ID：13091760
> 
> 赞同：2
> 
> 时间：2012-10-26T17:39:35.313
> 
> 标签：entity-framework, security, breeze

使用实体框架保护数据有哪些选项/解决方案？

我在这里不讨论表单登录等，只是假设用户是否经过身份验证。

为了说明，我附上了我的一个 web api 控制器，我想知道这是否是这样做的方法。我问的原因是我想知道是否有比将所有这些逻辑写入要在所有控制器中公开的数据更简单的方法。

此外，当研究像这样的系统时，我可以将 $expand=TrafficImages 添加到我的查询中，我不希望用户能够获得我的洞数据库。

总而言之，有什么方法可以保护暴露的数据，使用户无法下载敏感数据。

```
[AllowAnonymous]
public object GetTheoryTests()
{
    var identity = ((ClaimsIdentity)((ClaimsPrincipal)HttpContext.Current.User).Identity);
    //if (HttpContext.Current.User.Identity.IsAuthenticated)

   if (!identity.IsAuthenticated)
     return db.TheoryTests.Include(t=>t.TrafficImages).Where(t=>t.PublicAvalible)
            .Select(t => new { Id = t.Id, Title = t.Title, Images = t.TrafficImages }).AsEnumerable();

   if (User.IsInRole("WebAdmins"))
       return db.TheoryTests.AsEnumerable();

    var key = identity.GetProvider();

    var member = db.Members.Include(m=>m.PayedTheoryTests).SingleOrDefault(m=>m.Identities.Any(
        i=>i.identityprovider == key.provider &&
        i.nameidentifier == key.id));
        if(member!=null)
            return db.TheoryTests.Include(t => t.TrafficImages).Where(t => t.PublicAvalible).Select(t => new { Id = t.Id, Title = t.Title, Images = t.TrafficImages }).AsEnumerable();
        else
            return db.TheoryTests.Include(t => t.TrafficImages).Where(t => t.PublicAvalible)
                .Union(member.PayedTheoryTests).Select(t => new { Id = t.Id, Title = t.Title, Images = t.TrafficImages }).AsEnumerable();

} 
```

考虑到它，我想念的是我的数据库中的视图模型，具体取决于用户的状态。在同一个数据库上创建两个实体框架，一个用于有限的数据显示，一个用于更高级的操作，是否是一种解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T15:26:37.363

同时，在 QueryInterceptors 到达之前，您应该采取其他步骤。首先，您应该研究保护 Web API 控制器或方法的技术，这个主题超出了本答案的范围。

其次，w/r/t $expand，你对这个特性保持警惕是完全正确的。您可能想要检查某些控制器方法请求哪些扩展和/或完全禁止其他方法。

幸运的是，这相对容易做到。您可以访问请求查询字符串。如果您想允许某些扩展并禁止其他扩展，您可以检测该字符串中是否存在“$expand”并对其进行分析。

Breeze 将来会为此添加助手。在此之前，您必须处理字符串。

如果您愿意，您可能希望为此创建自己的操作过滤器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T21:01:33.540

好问题！我们目前正在开发一种称为 QueryInterceptors 的东西，它允许您检查并可能更改或拒绝提交给服务器的查询。“主体”将是每个 QueryInterceptor 方法中的可用上下文对象。请在 www.breezejs.com 上的“Breeze”网站上投票支持此功能。

# xml - Jsp的网址映射

> ID：13091762
> 
> 赞同：4
> 
> 时间：2012-10-26T17:39:53.627
> 
> 标签：xml, jsp, web-applications, url-mapping

我想为我的网页做一个映射。我在 web.XML 中完成的一种类似 Servlet Mapping 的映射，不一定是相同的代码或程序，而是相同的结果。换句话说，我的目标是隐藏我的网页的部署。可能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-26T21:45:37.440

您可以按照与 servlet 相同的方式进行操作。唯一的区别是您必须使用`jsp-file`而不是`servlet-class`声明您的 servlet：

```
<servlet>
    <servlet-name>Hello</servlet-name>
    <jsp-file>hello.jsp</jsp-file>
</servlet>

<servlet-mapping>
    <servlet-name>Hello</servlet-name>
    <url-pattern>/hi</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-11-05T12:54:44.527

```
<servlet>
        <servlet-name>home page</servlet-name>
        <jsp-file>/ui/newhtml.html</jsp-file>
</servlet>
<servlet-mapping>
        <servlet-name>home page</servlet-name>
        <url-pattern>/home</url-pattern>
</servlet-mapping> 
```

ui 是“网页”中的一个文件夹，其中包含 newhtml.html 文件。在编写它时，我们需要给出它的路径，所以我把它作为 /ui/newhtml.html 给出。这解决了我的问题

# actionscript-3 - Flex Spark 表单，水平对齐表单项

> ID：13091763
> 
> 赞同：1
> 
> 时间：2012-10-26T17:39:55.967
> 
> 标签：actionscript-3, flex4

这是场景：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <s:HGroup>
        <s:Form>
            <s:FormItem label="label1">
                <s:TextInput/>
            </s:FormItem>
            <s:FormItem label="label2">
                <s:TextInput/>
            </s:FormItem>
            <s:FormItem label="label3">
                <s:TextInput/>
            </s:FormItem>
        </s:Form>
        <s:Form>
            <s:FormItem label="label1">
                <s:Label text="soemthing"/>
            </s:FormItem>
            <s:FormItem label="label2">
                <s:Label text="soemthing"/>
            </s:FormItem>
            <s:FormItem label="label3">
                <s:Label text="soemthing"/>
            </s:FormItem>
        </s:Form>
    </s:HGroup>
</s:Application> 
```

问题是，将左侧表单的每个 formItem 与右侧表单中的每个 formItem 对齐的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:12:53.827

用于`TileLayout`您的表格：

> ![平铺布局](../Images/1eb06894a10f61c2e259ef4685a004ec.png)

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx">

    <s:Form>
        <s:layout>
            <s:TileLayout requestedColumnCount="2"
                          verticalAlign="middle" />
        </s:layout>

        <s:FormItem label="label1">
            <s:TextInput />
        </s:FormItem>
        <s:FormItem label="label1">
            <s:Label text="something" />
        </s:FormItem>

        <s:FormItem label="label2">
            <s:TextInput />
        </s:FormItem>
        <s:FormItem label="label2">
            <s:Label text="something" />
        </s:FormItem>

        <s:FormItem label="label3">
            <s:TextInput />
        </s:FormItem>
        <s:FormItem label="label3">
            <s:Label text="something" />
        </s:FormItem>

    </s:Form>

</s:Application> 
```

# javascript - javascript对象属性的绑定

> ID：13091768
> 
> 赞同：0
> 
> 时间：2012-10-26T17:40:16.470
> 
> 标签：javascript, oop, binding

> **可能重复：**
> [为什么 javascript 对象在 Chrome、Firefox、Safari 的控制台中显示不同的值？](https://stackoverflow.com/questions/8249136/why-does-javascript-object-show-different-values-in-console-in-chrome-firefox)

我对使用 javascript 的 OOP 概念还是很陌生。我试图了解 javascript 属性的绑定。javascript 是否按顺序执行以下代码？

```
 // main.js
 function NameClass(){
   this.name = "John"
   this.age = 25
 }

 NameClass.prototype.change_my_name = function(new_name){
   this.name = new_name
 }

 NameClass.prototype.change_my_age = function(new_age){
   this.age = new_age
 }

 // main.html
  <html>
    <head>
      <title>Javascript tutorial</title>
        <script src="main.js"></script>
        <script>
          var nc = new NameClass()

          console.log("nc before modification")
          console.log(nc) // Prints Doe

          nc.change_my_name("Doe")

          console.log("nc after modification")
          console.log(nc) // Prints Doe
        </script>
      </head>
    <body></body>
  </html> 
```

现在，这里有什么技巧？

1.  为什么我两次都看到“Doe”显示？
2.  为了第一次显示“John”而第二次显示“Doe”，我必须在这里使用什么机制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:43:42.057

`console.log()`不一定会记录变量在您尝试记录它时的值。

# struts2 - 全局拦截器 - 在每个动作之前运行

> ID：13091769
> 
> 赞同：4
> 
> 时间：2012-10-26T17:40:18.660
> 
> 标签：struts2, interceptor

如何创建一个拦截器，它将在我的应用程序中的每个操作之前运行，而无需分别为每个操作指定它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T17:42:28.120

来自[http://struts.apache.org/2.3.4.1/docs/how-do-we-configure-an-interceptor-to-be-used-with-every-action.html](http://struts.apache.org/2.3.4.1/docs/how-do-we-configure-an-interceptor-to-be-used-with-every-action.html)：

创建您自己的命名堆栈并为包声明一个新的默认拦截器堆栈

```
<package name="default" extends="struts-default" >
  <interceptors>
       <interceptor-stack name="myStack">
          <interceptor-ref name="timer"/>
          <interceptor-ref name="logger"/>
        <interceptor-ref name="default-stack"/>
       </interceptor-stack>
  </interceptors>

 <default-interceptor-ref name="myStack"/>

 <action name="login"  class="tutorial.Login">
        <result name="input">login.jsp</result>
        <result type="redirect-action">/secure/home</result>
  </action>

</package> 
```

# android - 优秀的安卓 UI 构建器

> ID：13091771
> 
> 赞同：5
> 
> 时间：2012-10-26T17:40:33.767
> 
> 标签：android, xml, eclipse, user-interface

我正在为我的大学项目开发​​一个安卓应用程序。我已经在 Eclipse 中使用内置 XML 编辑器开发了 UI，但它看起来并不好看。我见过很多具有良好且简单的 UI 集成的应用程序，但我不知道他们是如何做到的。我进行了互联网搜索，发现 HTML 用于开发 UI，但没有找到任何好的教程。如果你能告诉我一个很好的 UI 生成器和教程来学习，那就太好了。我是android的学习者，所以我很感激你的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:49:42.890

Dimal，设计好的用户界面没有捷径可走。这就是为什么有些人称编程为“艺术”。Eclipse 插件还不错。一个独立的工具是 DroidDraw 但我怀疑你是否会喜欢它。我的建议是浏览示例目录和 APIDemos 中的所有应用程序。选择您喜欢的部分并使用代码。您还可以通过扩展 View 类并覆盖 Draw 方法来制作自己的自定义视图。基本上，在 Android 上制作 GUI 是没有限制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:02:17.893

The best native android user interfaces are rarely built with the UI builder tool. In order to have good control of everything, you'll want to edit the XML by yourself.

It's really not all that scary, and the eclipse tools do a good job with autocomplete, and pointing you towards problems.

# c++ - Uncrustify for c++ 在逗号模板化参数后添加右括号

> ID：13091776
> 
> 赞同：2
> 
> 时间：2012-10-26T17:40:55.033
> 
> 标签：c++, uncrustify

我有以下功能：

```
template<typename Gender, typename Age> bool checkSomething( param1, param2, param3)
{...} 
```

当我通过 Uncrustify 调用以下函数时：

```
if( somethingChanged == checkSomething<Female, OverThirty>( param1, param2, param3)) 
{...} 
```

它将其更改为

```
if( somethingChanged == checkSomething<Female) , OverThirty>( param1, param2, param3)) 
{...} 
```

注意女性之后的额外右括号

这显然破坏了我的代码。我将不胜感激有关如何将其关闭的任何想法。

# java - 实现快速排序

> ID：13091779
> 
> 赞同：0
> 
> 时间：2012-10-26T17:41:08.780
> 
> 标签：java, quicksort

我正在尝试实施快速排序，但我没有得到正确的结果。这是我的代码：

```
public static void quickSort(Comparable[] a, int start, int stop) {
    if (start < stop) {
        int pivot = partition(a, start ,stop);
        System.out.print("Pivot: "+a[pivot]+" Array: ");
        printArray(a);
        quickSort(a,start,pivot-1);
        quickSort(a,pivot+1, stop);
    }       
}

public static int partition(Comparable[] a, int start, int stop) {
    Comparable pivot = a[stop];
    int i = start;
    int j = stop-1;

     while (i < j) {
            while( (isLess(a[i], pivot)|| isEqual(a[i], pivot)))
                i++;
            while((isGreater(a[j], pivot)|| isEqual(a[j], pivot)))
                j--;
            if(i < j)
                swap(a, i,j);
        } 

    swap(a,i, stop);

    return i;

} 
```

输入：{51,17,82,10,97,6,23,45,6,73}，我得到结果：6 6 10 17 23 45 51 73 97 82 输入：{12,9,4, 99,120,1,3,10}，我得到一个索引越界错误。希望能在我出错的地方提供一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T18:18:38.727

你的两个问题不相关。

问题`{51,17,82,10,97,6,23,45,6,73}`是——当 时会发生什么`stop == start + 1`？然后`i == start == stop - 1 == j`，所以你永远不会进入`while`-loop，所以你无条件地-`swap(a, i, stop)`即使`a[i]`已经*小于*。`a[stop]`

问题`{12,9,4,99,120,1,3,10}`似乎是您没有阅读堆栈跟踪。;-) 假设你有一个不错的 Java 编译器和 JVM，它应该给你确切的行号和有问题的索引，所以你会看到问题出在这一行：

```
 while((isGreater(a[j], pivot)|| isEqual(a[j], pivot))) 
```

一旦`j`到达`-1`。（如果`pivot`是感兴趣范围内的最小值，就会发生这种情况。）您只需要为此添加一个检查：

```
 while(j > start && (isGreater(a[j], pivot)|| isEqual(a[j], pivot))) 
```

（并且，就此而言，对于相应的情况`i`：

```
 while(i < stop && (isLess(a[i], pivot)|| isEqual(a[i], pivot))) 
```

)

. . . 你需要学习如何调试你的代码。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:18:48.040

我向你推荐[算法：设计和分析](https://www.coursera.org/course/algo)，斯坦福非常好的网络课程。完成本课程后，您将更轻松地编写此类代码。这是一个有点增强的版本，枢轴被选为三的中位数。请注意，您不必编写自己的`printArray()`函数。在 Java 中，您可以使用`System.out.println(Arrays.toString(numbers))`. 您还可以观察如何`quickSort()`使用方法重载以更优雅的方式调用，只有一个参数。

```
public class QuickSort
{

public static void main(String[] args)
{
    int numbers[] =
    { 51, 17, 82, 10, 97, 6, 23, 45, 6, 73 };
    quickSort(numbers);
    System.out.println(Arrays.toString(numbers));
}

public static void quickSort(int[] array)
{
    quickSort(array, 0, array.length - 1);
}

private static void quickSort(int[] array, int left, int right)
{
    if (left >= right)
    {
        return;
    }
    int pivot = choosePivot(array, left, right);
    pivot = partition(array, pivot, left, right);
    quickSort(array, left, pivot - 1);
    quickSort(array, pivot + 1, right);
}

private static int partition(int[] array, int pivot, int left, int right)
{
    swap(array, pivot, left);
    pivot = left;
    int i = left + 1;
    for (int j = left + 1; j <= right; j++)
    {
        if (array[j] < array[pivot])
        {
            swap(array, j, i);
            i++;
        }
    }
    swap(array, pivot, i - 1);
    return i - 1;
}

private static void swap(int[] array, int j, int i)
{
    int temp = array[j];
    array[j] = array[i];
    array[i] = temp;
}

private static int choosePivot(int[] array, int left, int right)
{
    return medianOfThree(array, left, (left + right) / 2, right);
    // return right;
}

private static int medianOfThree(int[] array, int aIndex, int bIndex, int cIndex)
{
    int a = array[aIndex];
    int b = array[bIndex];
    int c = array[cIndex];
    int largeIndex, smallIndex;
    if (a > b)
    {
        largeIndex = aIndex;
        smallIndex = bIndex;
    }
    else
    {
        largeIndex = bIndex;
        smallIndex = aIndex;
    }
    if (c > array[largeIndex])
    {
        return largeIndex;
    }
    else
    {
        if (c < array[smallIndex])
        {
            return smallIndex;
        }
        else
        {
            return cIndex;
        }
    }
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-29T11:44:39.837

好吧，这是实现快速排序的代码，

```
public class QuickSort 
{
   int partition(int arrNum[], int low, int high)
   {
      int pivot = arrNum[high]; 
      int a = (low - 1); // smaller element index
      for(int b = low; b < high; b++)
      {
         // condition to check current element is smaller than or equal to pivot
         if(arrNum[b] <= pivot)
         {
            a++;
            // swapping arrNum[a] and arrNum[b]
            int temp = arrNum[a];
            arrNum[a] = arrNum[b];
            arrNum[b] = temp;
         }
      }

      // swapping arrNum[a + 1] and arrNum[high]
      int temp = arrNum[a + 1];
      arrNum[a + 1] = arrNum[high];
      arrNum[high] = temp;

      return a + 1;
   }

   void sortNumber(int arr[], int low, int high)
   {
      if(low < high)
      { 
         int part = partition(arr, low, high);
         // Recursive function sort elements before partition and after partition
         sortNumber(arr, low, part - 1);
         sortNumber(arr, part + 1, high);
      }
   }

   // printing utility function
   static void printingArray(int arr[])
   {
      int num = arr.length;
      for(int a = 0; a < num; ++a)
         System.out.print(arr[a] + " ");
      System.out.println();
   }

   public static void main(String[] args) 
   {
      int arr[] = {33, 36, 63, 34, 45, 78};
      int n = arr.length;

      QuickSort qs = new QuickSort();
      qs.sortNumber(arr, 0, n - 1);

      System.out.println("Quicksort sorted array : ");
      printingArray(arr);
   }
} 
```

# jquery - 如何在多次 Backbone 保存后发出一个 AJAX 请求

> ID：13091783
> 
> 赞同：4
> 
> 时间：2012-10-26T17:41:28.293
> 
> 标签：jquery, ajax, backbone.js

我有一种情况，我需要保存一个 Backbone 模型，然后在它成功时遍历一个集合并保存它们，然后在每个成功时遍历另一个集合并保存它们，然后在所有这些都完成后执行一个 AJAX 请求。这就是我所拥有的：

```
backboneModel.save(
    {},
    {
         wait: true,
         success: function (model1, response1)
         {
              $.each(backboneCollection1.models, function () {
                    this.save(
                        {},
                        {
                             wait: true,
                             success: function (model2, response2)
                             {
                                  $.each(backboneCollection2.models, function () {
                                       this.save(
                                           {},
                                           {
                                                wait: true,
                                                success: function (model2, response2)
                                                {
                                                     //If i put the AJAX request here it will happen for every iteration which is not desired
                                                }
                                           });
                                  });
                              }
                         });
               });
               //If i put the AJAX request here it will fire after one iteration of the first each even with async set to false on the AJAX request
         }
   }); 
```

是否有人对在何处执行此 AJAX 请求有任何建议，以便在所有主干模型保存到服务器后仅触发一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T19:09:38.410

看看我创建的这个[jsfiddle 。](http://jsfiddle.net/dCu2s/24/)它取代了您的成功回调并使用承诺来保存您的模型，然后是集合 1，然后是集合 2。一旦所有这些都完成了，您就可以在 done() 中进行 ajax 调用。

大部分更改是用这个替换你上面的内容。

```
var saveEverything = backboneModel.save()
.pipe(function() { return saveCollection(backboneCollection1); })
.pipe(function() { return saveCollection(backboneCollection2); });
saveEverything.done(function() { console.log('done with everything, ajax time') });//make your ajax call in the done 
```

如果您不知道 jQuery 承诺是什么，[这](http://terlson.blogspot.com/)是一篇非常棒的解释承诺的博文。如果我的例子根本没有任何意义，或者只是问，我可以尝试解释正在发生的事情和正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:49:34.490

在遍历模型时进行计数，当计数 = 模型长度时，调用 AJAX

# javascript - three.js：定义我的自制几何图形时出现“TypeError：v 未定义”

> ID：13091788
> 
> 赞同：1
> 
> 时间：2012-10-26T17:41:44.163
> 
> 标签：javascript, firebug, three.js

我正在尝试构建自己的 three.js 几何。但是，当我尝试定义它时，如下所示：

```
geometry = new THREE.FreeWallGeometry( 3, 5 ); 
```

`addSelf`我从three.js 中第714 行的函数中收到错误“TypeError：v 未定义” 。

如何找出触发此错误的原因？

这是我自制几何的当前代码：

```
define(
    [   "libs/three.js/build/three",
    ],
    function (
        three
        ) {

        console.log("setting up makeControls. regards, makeControls");

        //THREE.FreeWallGeometry = function ( length, height, depth, segmentsWidth, segmentsHeight, segmentsDepth, materials, sides ) {

        // X = length, Y = height, Z = depth,
        THREE.FreeWallGeometry = function ( noOfSegments, segmentLength ) {

            THREE.Geometry.call( this );

            var t1, t2,
            normal = new THREE.Vector3( 0, 0, 1);
            freePlane;

            var freePlane = function ( self, parametricPlane_X, parametricPlane_Y, parametricPlane_Z, equidistantSampler_T1, equidistantSampler_T2 ) {

                for ( t2 = 0; t2 < noOfSegments; t2 ++ ) {

                    for ( t1 = 0; t1 < noOfSegments; t1 ++ ) {

                        console.log("free: t1, t2 ", t1, t2);
                        //var x = t1 * segmentT1_length - length_half;
                        //var y = t2 * segmentT2_length - height_half;
                        var x = parametricPlane_X ( t1, t2 );
                        var y = parametricPlane_Y ( t1, t2 );
                        var z = parametricPlane_Z ( t1, t2 );

                        console.log("free: x, y z ", x, y, z);

                        self.vertices.push( new THREE.Vector3( x, - y, z ) );

                    }

                }

                for ( t2 = 0; t2 < noOfSegments; t2 ++ ) {

                    for ( t1 = 0; t1 < noOfSegments; t1 ++ ) {

                        var a = t1 + noOfSegments * t2;
                        var b = t1 + noOfSegments * ( t2 + 1 );
                        var c = ( t1 + 1 ) + noOfSegments * ( t2 + 1 );
                        var d = ( t1 + 1 ) + noOfSegments * t2;

                        //console.log ("free: a, b, c, d ", a, b, c, d);

                        var face = new THREE.Face4( a, b, c, d );

                        if (!self.vertices[face.a]) {
                            console.log("this face.a can't index vertices: ", face.a);
                        }

                        if (!self.vertices[face.b]) {
                            console.log("this face.b can't index vertices: ", face.b);
                        }

                        if (!self.vertices[face.c]) {
                            console.log("this face.c can't index vertices: ", face.c);
                        }

                        if (!self.vertices[face.d]) {
                            console.log("this face.d can't index vertices: ", face.d);
                        }

                        face.normal.copy( normal );
                        face.vertexNormals.push( normal.clone(), normal.clone(), normal.clone(), normal.clone() );

                        self.faces.push( face );
                        self.faceVertexUvs[ 0 ].push( [
                            new THREE.UV( t1 / noOfSegments, 1 - t2 / noOfSegments ),
                            new THREE.UV( t1 / noOfSegments, 1 - ( t2 + 1 ) / noOfSegments ),
                            new THREE.UV( ( t1 + 1 ) / noOfSegments, 1 - ( t2 + 1 ) / noOfSegments ),
                            new THREE.UV( ( t1 + 1 ) / noOfSegments, 1 - t2 / noOfSegments )
                        ] );

                    }

                }

            }

            var parametricPlane_X = function ( t1, t2 ) {
                x = t1;
                return x;
            };

            var parametricPlane_Y = function ( t1, t2 ) {
                y = t1;
                return y;
            };

            var parametricPlane_Z = function ( t1, t2 ) {
                z = t1 * t2;
                return z;
            };

            var equidistantSampler_T1 = function ( t1 ) {
                t1 = Math.sqrt(t1);
                return t1;
            };

            var equidistantSampler_T2 = function ( t2 ) {
                t2 = t2;
                return t2;
            };

            freePlane(this, parametricPlane_X, parametricPlane_Y, parametricPlane_Z, equidistantSampler_T1, equidistantSampler_T2);

            this.computeCentroids();

        };

        THREE.FreeWallGeometry.prototype = Object.create( THREE.Geometry.prototype );

    }
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:41:44.163

您可以使用 Firebugs`console.trace()`查看在崩溃站点之前进行了哪些调用。

我不知道这是否通常是这种情况，但在您的情况下，`console.trace()`会告诉您在调用 之前的最后一个函数调用是对在第 4939 行周围定义`addSelf`的函数的调用。`computeCentroids``three.js`

在此函数中， -array（自定义几何图形的定义在定义时`vertices`用顶点填充）由`face.a`、`face.b`和索引。`face.c``face.d`

这些索引取自几何体的`faces`数组（您也在自定义几何体定义中自己填写），这里可能会出现问题：

面由顶点组成，如果您生成的顶点与您生成的面的顶点索引不匹配，则您的某些面顶点索引可能超出顶点数组的范围。因此`vertices[face.outOfBoundVerticeIndex]`将返回 null 而不是顶点，从而使您很难找到错误。

PS。您可能希望以未定义为`console.trace`条件进行调用`v`，以避免跟踪调用淹没 Firefox。这有使 Firefox 屈服的趋势。

# .net - .NET 4,0 监听器改变

> ID：13091790
> 
> 赞同：0
> 
> 时间：2012-10-26T17:41:45.220
> 
> 标签：.net, config

我将一些旧版控制台应用程序从 .NET 2.0 升级到了 .NET 4.0。我在 Main() 的第一行收到“类型不是可识别的属性”的运行时错误。它源自以下部分中的 .exe.config 文件：

```
 <listeners>
            <add name="RHIOListener" type="System.Diagnostics.TextWriterTraceListener" initializeData="c:\Htp\RHIOListener.log"/>
            <remove type="System.Diagnostics.DefaultTraceListener"/>
        </listeners> 
```

问题在于“删除类型”行。看起来属性应该是“名称”。我不知道该怎么办。似乎没有明确创建的“命名”DefaultTraceListener。这条线甚至是必要的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:43:39.510

你不能删除`type`，你必须这样做`name`。

错误消息是因为，[根据 .config 架构](http://msdn.microsoft.com/en-us/library/w11c2b46.aspx)`remove`，节点允许的唯一属性是`name`. 尝试以下方法之一：

```
<listeners>
    <add name="RHIOListener" type="System.Diagnostics.TextWriterTraceListener" initializeData="c:\Htp\RHIOListener.log"/>
    <remove name="Default"/>
</listeners> 
```

或者：

```
<listeners>
    <clear/>
    <add name="RHIOListener" type="System.Diagnostics.TextWriterTraceListener" initializeData="c:\Htp\RHIOListener.log"/>
</listeners> 
```

# domain-driven-design - 在分布式系统中为消息提供共享和专用的程序集或库是常见的做法吗？

> ID：13091793
> 
> 赞同：0
> 
> 时间：2012-10-26T17:42:00.990
> 
> 标签：domain-driven-design, .net-assembly, cqrs, distributed-system, masstransit

我正在讨论分布式域驱动设计背后的一些概念，并且正在构建概念验证。我有三个 C# 解决方案，它们在整个系统中具有特定的职责。

我的解决方案是：

*   写入模型（从客户端接收命令并创建和发送事件）
*   读取模型（从写入模型接收事件，创建数据库并向客户端公开 DTO 服务，可能是 2 个单独的解决方案）
*   客户端（调用服务以获取所需数据并向写入模型发送命令）

所有三种解决方案都通过服务总线使用消息传递（命令、事件）。（在我的情况下是大众运输）。

**我的主要问题是：**创建带有消息的程序集并让每个解决方案都引用该程序集是常见的做法吗？

**额外的功劳：**在这个 POC 中，我正在做的事情有什么奇怪或有问题的吗？在创建此类系统时我应该注意的任何其他信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:31:26.313

> 使用消息创建程序集并让每个解决方案引用该程序集是常见的做法吗？

是的。这通常是消息传递系统的常见做法。例如，许多 NServiceBus 示例都采用这种方法。将此程序集视为代表您的合同。在建立在不同平台上的系统中，这种表示将以 XSD 模式或其他一些模式定义机制的形式出现。

> 在这个 POC 中，我正在做的事情有什么奇怪或有问题的吗？在创建此类系统时我应该注意的任何其他信息？

到目前为止，一切似乎都非常适合 CQRS。公平地说，我应该提一下，将 CQRS 作为灵丹妙药并围绕它构建系统很容易被冲昏头脑。一起放弃 CQRS 通常是一个明智的决定。继续关注业务领域，并使用 CQRS 作为一种架构风格来实现您的系统，而不是指导它的模型。

# c# - 滚动条在 WPF 中初始化 DragMove()

> ID：13091802
> 
> 赞同：0
> 
> 时间：2012-10-26T17:42:47.267
> 
> 标签：c#, wpf, drag-and-drop, wsdl, scrollbar

我构建了一个天气应用程序，可以获取世界主要城市的天气信息。我使用 wsdl 以 xml 格式下载天气数据，然后使用 XmlDocument 类从元素中获取所需的数据。我在文本框中显示此信息。我将文本框的 Horizo​​ntalScrollBarVisibility 和 VerticalScrollBarVisibility 设置为自动，以便在文本太长时显示滚动条。我还实现了一个 _MouseLeftButtonDown 监听器，因为我已经从我的应用程序中删除了标题栏。但是每次显示滚动条并单击它时，都会调用 DragMove() 方法，因此我无法滚动文本。

我怎样才能防止这种情况发生？

这是我的代码，它仅适用于我从 wsdl 转换的 GlobalWeather 和 Country 类。如果您愿意，我可以发布代码，或者您可以下载这些类的 wsdl 并将其转换为 .cs ...

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System.Xml;

namespace WeatherApp
{
    /// <summary>
    /// Interaktionslogik für Window1.xaml
    /// </summary>
    public partial class Window1 : Window
    {
        // http://www.webservicex.net/globalweather.asmx?WSDL
        private static GlobalWeather wetterObjekt;
        //http://www.webservicex.net/ws/WSDetails.aspx?WSID=17&CATID=7
        Country country;
        private static string wetter;
        private static string wetterAktuell;
        private static List<string> countryList;
        private static List<string> cityList;

        public Window1 ()
        {            
            InitializeComponent ();            
            wetterAktuell = "";
            wetter = "";
            wetterObjekt = new GlobalWeather ();   
            country = new Country ();
            countryList = new List<string> ();
            cityList = new List<string> ();
            getCountries ();
            string firstStr = "(keins ausgewählt)";
            object firstItem = firstStr;
            txtStadt.Items.Add(firstItem);
            txtStadt.SelectedIndex = 0;
            txtLand.SelectedIndex = 0;
            txtWetter.IsEnabled = false;
            txtLand.SelectionChanged += new SelectionChangedEventHandler ( txtLand_SelectionChanged );
        }

        private void txtLand_SelectionChanged ( object sender, SelectionChangedEventArgs e )
        {
            Console.WriteLine(cityList.Count);
            if (cityList.Count > 0)
            {
                txtStadt.Items.Clear();
                cityList.Clear();
                string firstStr = "(keins ausgewählt)";
                object firstItem = firstStr;
                txtStadt.Items.Add(firstItem);
                txtStadt.SelectedIndex = 0;                
            }
            if ((string)(txtLand.SelectedValue) == "(keins ausgewählt)")
            {
                return;
            }
            else
            {                
                string land = "";
                land = txtLand.SelectedValue.ToString();
                getStadt(land);

                //Console.WriteLine(wetterObjekt.GetCitiesByCountry(land));
                //Console.WriteLine(land);
            }
        }

        private void getStadt (string land)
        {
            XmlDocument document = new XmlDocument();
            document.LoadXml(wetterObjekt.GetCitiesByCountry(land));
            XmlNodeList nl = document.GetElementsByTagName("NewDataSet");
            for (int x = 0; x < nl[0].ChildNodes.Count; x++)
            {
                for (int y = 1; y < nl[0].ChildNodes[x].ChildNodes.Count; y += 2)
                {
                    cityList.Add(nl[0].ChildNodes[x].ChildNodes[y].InnerText);
                }
            }

            cityList.Sort();

            for (int x = 0; x < cityList.Count; x++)
            {
                txtStadt.Items.Add(cityList[x]);

            }
        }

        private void getCountries()
        {
            string countries = country.GetCountries ();
            XmlDocument document = new XmlDocument ();
            document.LoadXml ( countries );
            XmlNodeList nl = document.GetElementsByTagName ( "NewDataSet" );
            string firstStr = "(keins ausgewählt)";
            object firstItem = firstStr;
            txtLand.Items.Add(firstItem);
            for ( int x = 0; x < nl [0].ChildNodes.Count; x++ )
            {
                for ( int y = 0; y < nl [0].ChildNodes [x].ChildNodes.Count; y++ )
                {                    
                    countryList.Add ( nl [0].ChildNodes [x].ChildNodes [y].InnerText );
                }
            }
            for ( int i = 0; i < countryList.Count; i++ )
            {
                txtLand.Items.Add ( countryList [i] );                
            }
        }

        private void getWeather ( string stadt, string land )
        {
            try
            {
                wetter = wetterObjekt.GetWeather(stadt, land);
                xmlParsen(wetter);
                txtWetter.Text = wetterAktuell;
            }
            catch (System.Xml.XmlException e)
            {
                clearWetterTextBox();
                txtWetter.Text = "Keine Wetterdaten gefunden!";
                //Console.WriteLine("Keine Wetterdaten gefunden!");
            }
        }

        private void btnSchliessen_Click ( object sender, RoutedEventArgs e )
        {
            this.Close ();
        }

        private void xmlParsen (string wetter)
        {
            XmlDocument document = new XmlDocument ();
            try
            {
                document.LoadXml(wetter);
                XmlNodeList nl = document.GetElementsByTagName("CurrentWeather");
                for (int i = 0; i < nl[0].ChildNodes.Count; i++)
                {
                    wetterAktuell = wetterAktuell + (nl[0].ChildNodes[i].Name + ": " + nl[0].ChildNodes[i].InnerText) + "\n";
                }
            }
            catch (System.Xml.XmlException e)
            {
                throw new System.Xml.XmlException();
            }            
        }

        private void btnGetWetter_Click ( object sender, RoutedEventArgs e )
        {            
            clearWetterTextBox ();
            getWeather (txtStadt.Text, txtLand.Text);
        }

        private void clearWetterTextBox ()
        {
            wetterAktuell = "";
            this.txtWetter.Clear ();
        }

        private void Window_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {            
            DragMove();
        }
    }
} 
```

# c++ - 在 C++11 中使用什么更好，零或 NULL？

> ID：13091804
> 
> 赞同：17
> 
> 时间：2012-10-26T17:42:57.183
> 
> 标签：c++, pointers, c++11

如今，使用 C++11，推荐使用什么，`Zero`或者`NULL`？如果是第二个中的第一个？

```
int * p = getPointer();

if( 0 == p ){
    // something
}

if( NULL == p ){
    // something
} 
```

**更新：**我忘记了新的

```
if( nullptr == p ){
    // something
} 
```

**更新2：**示例是显示写入空指针的选项，我知道写起来更愉快`if( !p )`。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-26T17:43:52.440

也不是，是`nullptr`。

不过，在你的情况下，我会选择

```
if ( !p ){
   //something
} 
```

### 2.14.7 指针文字 [lex.nullptr]

> 1 指针文字是关键字`nullptr`。它是类型的prvalue `std::nullptr_t`。[注意：`std::nullptr_t` 是一种独特的类型，既不是指针类型也不是指向成员类型的指针；相反，这种类型的纯右值是一个空指针常量，可以转换为空指针值或空成员指针值。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-26T18:08:23.070

其他答案都是对的。但我想多说一点**为什么** `nullptr`更好。

在 C++11 中，“完美转发”非常重要。它无处不在。明显的地方是`bind`和`function`。但它也被用于许多其他地方。但是“完美转发”并不完美。它失败的地方之一是空指针常量。

```
template <class T>
void display(T)
{
    std::cout << type_name<T>() << '\n';
}

template <class T>
void
f(T&& t)
{
    display(std::forward<T>(t));  // "perfectly forward" T
}

int main()
{
    f(0);
    f(NULL);
    f(nullptr);
} 
```

使用适当的定义`type_name<T>()`，在我的系统上会打印出：

```
int
long
std::nullptr_t 
```

这很容易区分工作代码和错误。运气好的话，您的错误将在编译时出现（带有可怕的错误消息）。但在某些情况下，您也可能会遇到运行时错误。

**积极禁止在代码中使用 0 和 NULL。**

即使您在代码中没有完美的转发，您调用的代码（例如 std::lib）也很可能在幕后使用它。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-26T17:46:04.083

C++11 有一个新的文字关键字`nullptr`。它比这样的事情更好`0`，`NULL`因为它不可能被用作`int`重载决议。

```
if ( nullptr == p ) 
```

或者当然你可以在 bool 上下文中使用指针：

```
if ( !p ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-24T08:28:10.433

如果您在 2019 年遇到同样的问题，您正在为未分配的指针使用较旧的初始化样式。2014 年 8 月 14 日之后，C++ 11 发布。您使用的编译器可能遵循 C++11 标准。

> 你可以替换`0/NULL`为`nullptr`

现代 C++ 提供`nullptr`通用空指针。您应该使用它，而不是`0 || NULL`因为有些晦涩的机器具有带符号指针之类的东西，其中空指针实际上是 -1 而不是 0。

# localization - 本地化 Wix 捆绑引导程序

> ID：13091808
> 
> 赞同：2
> 
> 时间：2012-10-26T17:43:12.127
> 
> 标签：localization, wix, burn

我本地化了文件`hyperlinkthemt.wxl`（pl-pl）。但是我的引导程序只是出现，然后在一秒钟内消失，没有更多的事情发生。我试图解决这个问题，发现我不能在`hyperlinktheme.wxl`. 有什么办法可以改变它。我试图做一些事情`HyperLinkTheme.wxl`：

```
<WixLocalization Culture="pl-pl" Language="1045" xmlns="http://schemas.microsoft.com/wix/2006/localization"> 
```

但它没有帮助。您可能知道捆绑项目无法更改本地化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:29:33.653

您的 %TEMP% 文件夹中将有一个日志文件，该文件应该更详细地显示问题所在。可能是 .wxl 文件未以 UTF8 格式保存且无法加载。

# javascript - JavaScript / jQuery 访问新加载的 ajax 数据

> ID：13091809
> 
> 赞同：0
> 
> 时间：2012-10-26T17:43:13.813
> 
> 标签：javascript, ajax, json

我有一个像facebook这样的网站。它每 10 秒检查一次帖子以查看是否应加载任何新评论。代码看起来像这样：

```
<div id="profile_entry_1">
  <div id="posttext_id1">Woot woot!</div>
  <div id="comment_id15" class="checkForNewComments">This is the 15th comment in the database</comment>
  <div id="more_wall_comments_div_1"></div>
</div>
<div id="profile_entry_2">
  <div id="posttext_id2">Woot woot!</div>
  <div id="comment_id16">This is the 16th comment in the database</comment>
  <div id="comment_id17">This is the 17th comment in the database</comment>
  <div id="comment_id18" class="checkForNewComments">This is the 18th comment in the database</comment>
  <div id="more_wall_comments_div_2"></div>
</div> 
```

所以上面有两个帖子，前两个在数据库中，每个都有评论。当页面第一次加载时，PHP 将查找最后一条评论并为其分配一个特定的类。

它被分配了一个“checkForNewComments”类，所以我的 JavaScript 可以获取它的 comment_id ID。

它将该 ID 发送到一个新页面，以查找对该帖子具有更大价值的评论，并将通过 jSon 格式的 Ajax 调用加载它们。我解析它，并将 .append() 它添加到“newComments”部分。

因此，如果代码找到新评论，它将删除帖子的“checkForNewComments”类

```
<div id="profile_entry_2">
  <div id="posttext_id2">Woot woot!</div>
  <div id="comment_id16">This is the 16th comment in the database</comment>
  <div id="comment_id17">This is the 17th comment in the database</comment>
  <div id="comment_id18">This is the 18th comment in the database</comment>
  <div id="more_wall_comments_div_2"></div>
</div> 
```

它加载的帖子，例如，comment_id19 现在将具有“checkForNewComments”类，因此在 10 秒内，当它查找新评论时，它将查找大于 19 的评论。

麻烦来了，JavaScript 无法访问新加载的 DIV 和 CLASS 信息。

我该怎么做？

* * *

## 这是我的 JavaScript

```
<script type="text/javascript">
var loadedComments = true;
function loadComRefresh(timeoutPeriod){ setTimeout("loadNewComs();",timeoutPeriod); }
function loadNewComs(){
  if (loadedComments == true){
    loadedComments = false;
    var loadComString = "";
    $('.loadNewComs').each(function() {
    comLoad = this.id.substr(14);
    testD = $("#more_wall_comments_div_" + comLoad).find(".commentDivID").attr("id");
    if (testD != undefined){
      addSub = ":"+ testD +"";
    } else { addSub = ""; }
    loadComString = loadComString + comLoad + addSub + ",";
  });
  $.ajax({
    url: '../members/more_wall_comments_json.php',
    data: "loadComString=" + loadComString,
    dataType: "json",
    cache: false,
    success: function(data) { 
      loadedComments = true; 
      if (data != null){
        for(var i=0; i<data.loadComs.length;i++) {
          $("#postnewcomment" + data.loadComs[i].id).html(data.loadComs[i].script);
        }
      }
    }
  });
  loadComRefresh(10000);
}
</script>
<body onLoad="loadComRefresh(10000);"> 
```

* * *

## 这是我的文档的 PHP/HTML

```
<?php
echo '
<div id="profile_entry_'. $recent_id .'" class="loadNewComs" '. $delete_mouse_over .'>
  <table style="width:'. $table_width .'">
    <tr>
      <td style="width:50px;height:50px;padding:5px;vertical-align:top;">
        <a href="'. $extralink .'viewmember.php?id='. $to_id .'"><img src="'. getMemberThumbnail($to_id) .'" style="width:50px;height:50px;display:block;" alt="" /></a>
      </td>
      <td style="padding:5px 5px 5px 0;vertical-align:top;width:100%;">
        <a href="'. $extralink .'viewmember.php?id='. $to_id .'">'. getName($to_id) .'</a>
        <div style="margin:2px 0 0 0;">'. getEmoticon(tagUserLinks(breakUp($change))) .'</div>'
        <div id="more_wall_comments_div_'. $recent_id .'">';

$array = array();
$q = mysql_query("SELECT t1.id_id,t1.to_id,t1.from_id,t1.message_id,t1.like_id,t1.date_id,t1.mobile_id,t1.mobiletype_id,t2.user_id,t2.avatar FROM status_comments AS t1 LEFT JOIN users AS t2 ON t1.from_id = t2.id_id WHERE recent_id='$recent_id'") or die ('here!');
$q_count = mysql_num_rows($q);
while ($r = mysql_fetch_array($q)){ 
  $that_count = $that_count + 1;
  $comment_id = $r['id_id'];
  $to_id = $r['to_id'];
  $from_id2 = $r['from_id'];
  $message_id = $r['message_id'];
  $like = $r['like_id'];
  $date = $r['date_id'];
  $mobile = $r['mobile_id'];
  $mobiletype = $r['mobiletype_id'];
  $fromname_id = $r['user_id'];
  $thumbnail = '../media/members/thumbs/'. $r['avatar'];
  $array[$comment_id]  = array($comment_id,$to_id,$from_id2,$message_id,$like,$date,$mobile,$mobiletype,$fromname_id,$thumbnail);
}

krsort($array);
$array = array_slice($array, 0, 3, true);
ksort($array);

if ($q_count > 0) {
  foreach($array as $key => $value) {  
    $that_count = $that_count + 1;
    $comment_id = $value[0];
    $to_id = $value[1];
    $from_id2 = $value[2];
    $message_id = $value[3];
    $like = $value[4];
    $roughdate = $value[5];
    $mobile = $value[6];
    $mobiletype = $value[7];
    $fromname_id = $value[8];
    $thumbnail = $value[9];

    if ($that_count == 1 AND $recentlikecount == 0 AND $recentdislikecount == 0 AND $comments_topped != 'true') {
      echo '
          <div id="'. $comment_id .'" class="commentDivID" style="width:'. $commentsize .';" '. $delete_mouse_over_comment .'>
            <div style="width:'. $commentsize .';height:11px;background-image:url(../lib/images/comment_top.gif);"></div>
            <table style="width:'. $commentsize .';background-color:#'. $_SESSION['BGCOLOR'] .';border-bottom:1px solid #ccd4d8;">
              <tr>
                <td style="width:35px;height:35px;padding:5px;vertical-align:top;">
                  <a href="'. $extralink .'viewmember.php?id='. $from_id2 .'"><img src="'. $thumbnail .'" style="width:35px;height:35px;display:block;" /></a>
                </td>
                <td style="padding:5px 5px 5px 0;vertical-align:top;">
                  <a href="'. $extralink .'viewmember.php?id='. $from_id2 .'">'. $fromname_id .'</a> '. getEmoticon(tagUserLinks(breakUp($message_id))) .'<br /> 
                  '. $mobile .' <span id="time'. $comment_id .'" name="'. $roughdate .'" class="loadTime">'. roughDate($roughdate) .'</span></span> '. $like_link .'
                </td>
              </tr>
            </table>
          </div>';
  }
}
echo '  </div>'; 
```

现在我没有把代码放在这里，但是最后一条评论被分配了 class="commentDivID" ，而不是每条评论。

当 javascript 调用并找到要加载的新评论时，它将剥离 class="commentDivID" 的最后一条评论并将其放在加载的新评论中，但 javascript 无法访问新加载的项目，因此它不再能够找到 class="commentDivID"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:51:29.970

尝试将最新评论设置为全局 javascript 变量（在函数调用之前）。一旦您的 ajax 调用完成更新最新评论，请更新计数器以获取最新评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T19:32:19.823

完成此操作后：

```
$("#postnewcomment" + data.loadComs[i].id).html(data.loadComs[i].script); 
```

您应该能够在添加的 HTML 中选择以您使用的 id 开头的任何内容，例如：

```
$("#postnewcomment" + data.loadComs[i].id + " div") 
```

在新添加的内容中选择 div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T22:18:10.453

我想通了——这很愚蠢。

我将数据附加到一个新的 DIV，而不是我正在寻找特定类选择器的那个，所以如果 javascript 找不到 div - 它不应该在它应该在的地方。

感谢大家的帮助！

# android - 根据 SDK API 级别使用不同的资源文件（使用 Eclipse）？

> ID：13091811
> 
> 赞同：3
> 
> 时间：2012-10-26T17:43:19.760
> 
> 标签：android, eclipse

我正在编写一个针对 API 级别 8 到 14 的 Android 应用程序。我想将 Theme.Holo.Light 主题用于 API 级别 11 及更高级别，并将 Theme.Light 主题用于较低 API 级别。

res/values/style.xml 的内容是：

```
<resources>
    <style name="AppTheme" parent="android:Theme.Light" />
</resources> 
```

res/values-v11/style.xml 的内容是：

```
<resources>
    <style name="AppTheme" parent="android:Theme.Holo.Light" />
</resources> 
```

这对于 API 级别 14 编译得很好，但是当我的目标 API 级别设置为 8 时，它会给出以下错误：“**错误检索项目的父项：找不到与给定名称匹配的资源 'android:Theme.Holo'** ”在**res/ values-v11/style.xml**和“ **Android AAPT 问题**”。

如果我删除文件**res/values-v11/style.xml**，应用程序将正确编译 API 级别 8 目标。

现在，我的理解是，在为 API 级别 8 编译时，构建系统应该忽略资源文件夹中名称以“-v11”结尾的任何内容。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T17:44:54.107

这是因为 API 8 不知道 Theme.Holo.Light 是什么，因为它是在 API11 中引入的。您必须针对您使用的元素的**最高**API 版本进行编译。

而且您理解资源选择器是错误的。它不用于有条件地构建应用程序。它用于**在运行时**获取正确的资源。

见[这篇文章](http://developer.android.com/reference/android/content/res/Resources.html)。

# java - POST 变量到 ADF 应用程序

> ID：13091813
> 
> 赞同：0
> 
> 时间：2012-10-26T17:43:22.083
> 
> 标签：java, jsf, servlets, oracle-adf

我有一个外部应用程序需要将 POST 数据发送到 ADF Faces jspx 页面，然后 ADF 应用程序内部的逻辑将接管。

每次我尝试访问请求范围内的 POST 变量时，它们都是空的。同时 GET 变量仍然可以访问，但出于安全原因，我无法通过 GET 变量发送数据。

有什么办法可以做到这一点？

谢谢，

加文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:14:56.030

两种选择：

1）我最推荐这个： [https ://blogs.oracle.com/shay/entry/passing_parameters_to_adf_appl](https://blogs.oracle.com/shay/entry/passing_parameters_to_adf_appl)

2）创建一个扩展HttpServlet的java类，这样你就可以轻松地捕捉你的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:27:57.210

我认为使用线程本地将传入请求存储为侦听器的一部分是安全的。

```
package my.pkg.http.listener;

import javax.servlet.ServletRequest;
import javax.servlet.ServletRequestEvent;
import javax.servlet.ServletRequestListener;
import javax.servlet.http.HttpServletRequest;

public class Request implements ServletRequestListener {
  private static final ThreadLocal<ServletRequest> requests = new ThreadLocal<ServletRequest>();

  public void requestInitialized( ServletRequestEvent event ) {
    requests.set( event.getServletRequest() );
  }

  public void requestDestroyed( ServletRequestEvent event ) {
    requests.remove();
  }

  public static HttpServletRequest currentRequest() {
    return ( HttpServletRequest ) requests.get();
  }
} 
```

您需要更改 web.xml 以包含侦听器，如下所示：

```
<listener>
  <listener-class>my.pkg.http.listener.Request</listener-class>
</listener> 
```

然后理论上你可以简单地使用`Request.currentRequest()`. 如果请求仍然完好无损，则 post 变量应该可用。

希望这可以帮助！

# asp.net-mvc-3 - 如何使用剃刀访问 mvc3 母版页中的 PartialView 结果

> ID：13091817
> 
> 赞同：1
> 
> 时间：2012-10-26T17:43:36.420
> 
> 标签：asp.net-mvc-3, razor

我在控制器中有这样的方法

```
public PartialViewResult CabinSearch()
{
    return PartialView();
} 
```

我已经创建了这个方法的视图。

我需要将此部分视图访问到母版页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:53:18.437

在 Razor 中，`@Html.Partial(viewName)`助手将在视图中内联渲染命名的局部视图。如果需要，还有其他调用将模型对象传递给局部视图。

如果您需要调用控制器方法来执行某些计算或数据库访问（如您所暗示的那样），您可以改用它`@Html.Action(actionName, controllerName)`或它的一些变体 - 其中 CabinSearch 是您的情况下的操作名称。这将调用控制器，该控制器将执行它所做的任何事情（模型准备），然后渲染部分视图，然后将其内联到页面中。

# sql - 插入新值而不覆盖以前的值sql

> ID：13091822
> 
> 赞同：-1
> 
> 时间：2012-10-26T17:44:04.890
> 
> 标签：sql, tsql, sql-server-2005

我有一个表，我需要为 450 行添加信息，我可以用唯一的订单号识别每一行，并且只需要为每个订单号更新表中的 4 行。

```
update ordercontacts
set firstname = 'joe', lastname = 'smith', email = 'joesmith@smith.com', contacttypeid = 13
where orderid = 1284480 
```

这只是取代了我的价值观，所以我必须解决这个问题

我也试过这个

```
insert into ordercontacts
(firstname, lastname, email, contacttypeid)
values
('joe', 'smith', 'jowsmith@smith.com', 13)
where orderid in (1284480) 
```

但语法不正确，我不确定正确的语法是什么

我曾认为这样的事情会奏效，但显然没有。谁能帮我吗？每个订单号已经附有不同的联系人，我基本上希望最终结果是这样的：

```
order     firstname   lastname        email               contacttypeid
1284480   joe        smith      joesmith@smith.com         13
1284480   steve      andrews      steve@steve.com         11 
```

我希望在每个订单号已经存在的联系人之上添加一个新联系人。我拥有的更新语法只是替换已经存在的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:52:59.337

> 我希望在每个订单号已经存在的联系人之上添加一个新联系人。

更新语句不能插入新行。您不能通过您发布的更新声明“添加新联系人”。

你需要一份`insert`声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:54:36.723

```
insert into ordercontacts
(orderid, firstname, lastname, email, contacttypeid)
values
(1284480,'joe', 'smith', 'jowsmith@smith.com', 13) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:55:20.557

```
insert into table_name (order, firstname, lastname, email, contacttypeid) 
values (1284480, 'joe'...); 
```

您想要插入值而不是更新。更新将覆盖现有的值，本质上它是“替换 id = y 行中的 x”。插入实际上会创建一个新行。

# command-line - Windows 命令行 > 编辑文本文件中的特定字符串（包含等号）

> ID：13091825
> 
> 赞同：0
> 
> 时间：2012-10-26T17:44:17.680
> 
> 标签：command-line, windows-xp, replace

我花了一些时间在stackoverflow和网络上寻找一个很好描述的答案来解决这个问题。

我有一个可以自行安装并读取 .ini 文件的软件。此 .ini 具有可变大小和可变行号。每行的样式如下所示：

```
setting1=contents
setting2=more,contents
setting3=different type of contents
setting4=youget/theidea 
```

我需要在这个文本文件中搜索一些特定的行，假设它是以下内容：

```
Username=Tommy
Servername=HAL2000 
```

然后替换等号后的值（即把Tommy 改成Timmy）。我的问题是，我找到并尝试合并的所有脚本要么将上面的值视为变量（即用户名变成值为“Tommy”的变量），要么当我用 timmy 替换 Tommy 时，.ini 文件最终用 Username=Tommy 替换文件中的每一行。

我已经删除了这两个脚本并继续前进，但我想得越多，我就越想回去做这个脚本。

唯一的规则是必须在 Windows 命令行中使用 XP 原生的命令。没有第三方程序，没有 python，没有 perl，只有可以从 .bat 文件运行的 Windows 命令行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T12:55:36.703

a_horse_with_no_name 解决方案非常适合您的要求。通过消除 CALL，它可以变得不那么笨拙和更有效。MOVE 命令用于用新数据覆盖原始文件。

```
@echo off
>"test.ini.new" (
  for /f "usebackq tokens=1* delims==" %%A in ("test.ini") do (
    if %%A==Username (
      echo %%A=Timmy
    ) else if %%A==Servername (
      echo %%A=HAL2001
    ) else echo %%A=%%B
  )
)
move /y "test.ini.new" "test.new" 
```

以上假设文件中的每一行都符合您规定的格式。但通常 .INI 文件也有不符合应保留格式的注释行。FOR 循环解决方案可以扩展以支持它，但它变得更加复杂，速度也更慢。

您从未明确说明行的顺序很重要——通常 .INI 文件中的行顺序并不重要。这是一个非常简单的解决方案，它使用 FINDSTR 去除现有的 Username 和 Servername 行，然后将新值附加到末尾。无论格式如何，所有未更改的行都将被保留。更改的行始终出现在末尾。

```
@echo off
>"test.ini.new" (
  findstr /v "^Username= ^Servername=" "test.ini"
  echo Username=Timmy
  echo Servername=HAL2001
)
move /y "test.ini.new" "test.new" 
```

Batch 确实是处理文本文件的糟糕平台。它通常很慢而且过于复杂。看起来你的文件很小，你的要求也比较简单。但是许多看似简单的请求是纯批处理的野兽。

JScript 更适合处理文本，它是 XP 及更高版本的本机。它具有完整的正则表达式支持。我编写了一个混合批处理/JScript 实用程序脚本，可用于对文本文件的内容执行搜索和替换操作。它非常快速、强大且易于使用。您的问题的解决方案实现为：

```
@echo off
type "test.ini" | repl "^Username=.*$" "Username=Timmy" | repl "^Servername=.*$" "Servername=HAL2001" >"test.ini.new"
move /y "test.ini.new" "test.new" 
```

或者更简洁一点：

```
@echo off
type "test.ini" | repl "^(Username=).*$" "$1Timmy" | repl "^(Servername=).*$" "$1=HAL2001" >"test.ini.new"
move /y "test.ini.new" "test.new" 
```

下面是 REPL.BAT 实用程序脚本。完整的文档嵌入在脚本中。也可以通过键入从命令提示符访问该文档`REPL /?`。该脚本应该在您的当前目录中，或者在您的 PATH 中的某个位置。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            E - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:01:01.497

这会很笨拙，但是如果要替换的密钥数量有限，那么以下内容可能对您来说就足够了：

```
@echo off

set infile=foo.ini
set outfile=newfile.ini

rem create an empty output file
echo. > %outfile%

rem iterate over all properties
for /f " usebackq eol=# tokens=1,2 delims== " %%i in ("%infile%") do (
  call :replace %%i %%j
)

rem terminate batch file
goto :eof

rem sub-program to do the replacing
:replace

  if "%1"=="Username" (
    echo Username=Timmy>>%outfile%
    goto :eof
  )

  if "%1"=="Servername" (
    echo Servername=HAL2001>>%outfile%
    goto :eof
  )
  echo %1=%2>>%outfile%

  rem terminate sub-program
  goto :eof 
```

# gstreamer - Gstreamer 改变状态函数

> ID：13091829
> 
> 赞同：1
> 
> 时间：2012-10-26T17:44:33.300
> 
> 标签：gstreamer

我是 Gstreamer 的新手。我对插件的 change_state 函数有疑问。正如我在本指南中所读到的：http: [//gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/chapter-statemanage-states.html#section-statemanage-filters](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/chapter-statemanage-states.html#section-statemanage-filters)

```
static GstStateChangeReturn
gst_my_filter_change_state (GstElement *element, GstStateChange transition)
{
  GstStateChangeReturn ret = GST_STATE_CHANGE_SUCCESS;
  GstMyFilter *filter = GST_MY_FILTER (element);

  switch (transition) {
    **//Downwards state change;**

  ret = GST_ELEMENT_CLASS (parent_class)->change_state (element, transition);
  if (ret == GST_STATE_CHANGE_FAILURE)
    return ret;

     **//upward state change**
  }

  return ret;
} 
```

我真的不知道我们如何使用**parent_class**并调用**parent_class->change_state** 因为在这个元素的 init 函数中：

```
gst_my_filter_class_init (GstMyFilterClass *klass)
{
  GstElementClass *element_class = GST_ELEMENT_CLASS (klass);

  element_class->change_state = gst_my_filter_change_state;**strong text**
} 
```

**element_class->change_state**被分配给**gst_my_filter_change_state**。为什么当 element_class->change_state 分配给另一个函数时，我们仍然可以 在**gst_my_filter_change_state中调用****element_class->change_state 。**谢谢！

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T09:47:40.717

更改`gst_my_filter_class_init (GstMyFilterClass *klass)`为这样的内容：

```
gst_my_filter_class_init (GstMyFilterClass *klass)
{
  GstElementClass *element_class = GST_ELEMENT_CLASS (klass);
  parent_class = (GstXyzClass *) g_type_class_peek_parent (klass);
  element_class->change_state = gst_my_filter_change_state;**strong text**
} 
```

并在插件顶部附近的某处添加一个`static`全局变量。`GstXyzClass *parent_class;`Just`GstXyzClass`将是您从中继承的元素的类型，例如`GstElementClass`. 只需查看其他插件源以获取示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T12:59:57.203

Thanks for your answer. Actually,this code I quoted from that guide can run normally.But the thing I can not understand is in header file we declare: `GstMyFilterClass {GstElementClass parent_class;}` It means GstElementClass is the father class of GstMyFilterClass but why can we use **parent_class** in source file of this plugin(.c file)? Sorry for my lacking of knowledge in Gobject , but as I know **GstMyFilterClass** is a struct and(not class like C++) and the attribute **parent_class** can not be used in function of plugin(in C++ we can easily use attribute in method of class). And in the **gst_my_filter_class_init** :

```
gst_my_filter_class_init (GstMyFilterClass *klass)
{
  GstElementClass *element_class = GST_ELEMENT_CLASS (klass);

  element_class->change_state = gst_my_filter_change_state;//assign to function pointer  state change
} 
```

Does The statement:**GstElementClass *element_class = GST_ELEMENT_CLASS (klass);** mean we cast GST_ELEMENT_CLASS (klass) to get its parent class(**GstElementClass parent_class**)? If it is true,so the **change_state** function pointer of **parent_class** is not Null. So In

```
gst_my_filter_change_state (GstElement *element, GstStateChange transition)
{
  GstStateChangeReturn ret = GST_STATE_CHANGE_SUCCESS;
  GstMyFilter *filter = GST_MY_FILTER (element);

  switch (transition) {
    **//Downwards state change;**

  ret = GST_ELEMENT_CLASS (parent_class)->change_state (element, transition);
  if (ret == GST_STATE_CHANGE_FAILURE)
    return ret;

     **//upward state change**
  }

  return ret;
} 
```

what is **GST_ELEMENT_CLASS (parent_class)->change_state (element, transition)**? As I know every GstElementClass has a default function **change_state** but in this situation function **change_state** has assigned to another pointer function(**gst_my_filter_class_init** do this assignment) Is it right? Hope to receive your answer soon. Thank you very much**

# android - 消除android中服务中变量的值

> ID：13091830
> 
> 赞同：0
> 
> 时间：2012-10-26T17:44:33.290
> 
> 标签：android

我的程序是一个活动，用于在通过按下按钮识别用户时识别用户，将字符串发送到扩展至服务的另一个类（alarmChecker）。该服务每 30 秒检查一次数据库的值是否已更改，以及您是否注意到更改启动。

在主类（MainActivity）中发送字符串我这样做：

```
 / / Class MainActivity

  Intent intent = new Intent (MainActivity.this, alarmChecker.class);

  Bundle data = new Bundle ();
  data.putString ("user", user);
  intent.putExtras (data);
  pendingIntent = PendingIntent.getService (MainActivity.this, 0, intent, 0); 
```

然后类“alarmChecker”接收参数如下：

```
 / / class alarmChecker

     @Override
public int onStartCommand(Intent intent, int flags, int startId){
    super.onStartCommand(intent, flags, startId);
// Toast.makeText(this, "MyAlarmService.onStart()", Toast.LENGTH_LONG).show();

 Bundle data = intent.getExtras();

 user = data.getString("user");

 Toast.makeText(getApplicationContext(), "user: "+user, Toast.LENGTH_LONG).show();
} 
```

而我想做的是如果用户按下返回按钮或退出应用程序并返回到主屏幕（MainActivity）并与另一个不同的用户进行识别，alarmChecker 类会采用新值​​，但问题是抓取。始终具有您第一次输入的值。

如何解决？

感谢您的回答和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:08:41.940

对于您的直接问题，如果您在服务中实现[`onStartCommand()`](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)，则可以使用新值更新您的服务 - 每次服务收到启动意图时都会调用它，无论它是否已经启动..

与问题无关，从长远来看，您可能会考虑重新考虑您的设计，因为通过[`ContentObserver`API](http://developer.android.com/reference/android/database/ContentObserver.html)观察数据库对您来说是一个已解决的问题，它从数据库中执行此类事件听起来就像您正在寻找的那样。

# c# - string.replace Gridview 中的数据绑定列

> ID：13091832
> 
> 赞同：0
> 
> 时间：2012-10-26T17:44:38.977
> 
> 标签：c#, gridview, boundfield

我目前将一个字符串注释从数据库中拉到一个网格视图中以显示给用户。在整个字符串中，我将`<br/>`s 放置在我想要换行符的位置，但我想知道如何`<br/>`用“Environment.Newline”s 替换 s。该列只是一个边界域。

```
 <Columns>  
            <asp:BoundField HeaderText="Comment" DataField="UAComment" />
  </Columns> 
```

并使用适配器和 Fill() 填充表格：

```
 adapter = new SqlDataAdapter(queryString, connection);
            connection.Open();
            adapter.SelectCommand = command;
            recordsFound = adapter.Fill(table);
            results.Text = recordsFound + " records matching query";
            connection.Close(); 
```

感谢您提供任何信息。

ps：还尝试使用换行符构建字符串/将字符串提交到数据库，但似乎无法以正确的格式将其从数据库中拉出。

```
public void Group(String message)
    {
        log.Append(": Group :");
        log.AppendFormat(message);
        log.Append("<br/>");
    }

    public String GetLog()
    {
        log.Replace("<br/>", Environment.NewLine);
        return log.ToString();
    } 
```

还将“Environment.Newline”替换为@“\n”、“\n”、@“\r”、“\r”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:55:54.343

最简单的解决方案是使用模板字段而不是绑定字段，并在模板字段中添加与当前列值绑定的文字。使用它，它将以 html 格式呈现所有内容，并且换行符会自动出现。

**例子 ：**

```
<asp:TemplateField>
    <HeaderTemplate>
        Comment
    </HeaderTemplate>
    <ItemTemplate>
        <asp:Literal runat="server" ID="Literal1" Text='<%# Eval("UAComment") %>' />
    </ItemTemplate>
</asp:TemplateField> 
```

希望这能解决你的问题

# autocomplete - Outlook 自动将别名解析为主地址，需要禁用

> ID：13091837
> 
> 赞同：2
> 
> 时间：2012-10-26T17:45:11.673
> 
> 标签：autocomplete, outlook, exchange-server

展望 2007...

在我的 PC 上，当我向名为 testemail@test.com 的地址发送电子邮件时，我们的 exhcange 服务器将此作为收件箱的别名，称为 mainbox@test.com。发送电子邮件时，我的 Outlook 会将 TO 字段保留为 testmail@test.com，这是我需要它做的。但是，在另一个员工的 PC 上，Outlook 会在选择另一个字段（主题/正文/等）时自动将 testemail@test.com 解析为 mainbox@test.com，并将其直接发送到 mainbox@test.com 而不是 testmail@test.com。我认为它正在使用我们的“全球通讯录”来解决......我只是无法弄清楚设置。

我已经编写了一个软件套件来提取收件人地址以确定文件夹位置以保存发送到特定别名地址的电子邮件，以便发送到该特定别名的电子邮件将正确归档为别名。我们有几个不同的“客户”，它们有一个唯一的别名来联系我们，但我们需要让交换服务器将它们解析为 1 个地址邮箱（以便在软件套件上更容易）......我唯一的问题遇到的是我们的内部 Outlook 客户端在发送到交换之前自动解析地址。

我该如何关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-20T16:51:43.283

在 Outlook 2016 中，转到选项 > 邮件 > 发送消息（大约一半）> 取消选中“自动名称检查”。

在其他版本中，它可能被称为“自动解析名称”。

# date - 在 NSUserDefaults xCode 中保存日期

> ID：13091840
> 
> 赞同：-1
> 
> 时间：2012-10-26T17:45:39.960
> 
> 标签：date, plist, nsuserdefaults, save

我试图在 NSUserDefaults 中保存一些日期（每天用户输入日期，例如重量并保存它）。我不知道该怎么做。很长一段时间以来，我一直在寻找解决方案。我应该尝试 plists 吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:48:51.997

> 我不知道该怎么做。

这意味着你没有读过[这篇](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)文章，这是一种*罪过。*

```
[[NSUserDefaults standardUserDefaults] setObject:[NSDate date] forKey:@"CurrentDate"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:07:46.503

如果您将拥有大量数据，最好使用 nsuserdefaults 以外的其他内容。在这种情况下，文件可能没问题，例如 plist。如果您确实想使用 nsuserdefaults，这里是一个简单的示例。

```
- (void) viewDidAppear:(BOOL)animated {
//check if nsuserdefaults has the member value set and if not show them the "login" screen
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *member = [defaults stringForKey:@"member"];

if (![member isEqualToString:@"ValidMember"]) {
    ...do some stuff
} 
```

写入 nsuserdefaults 使用这个

```
 if ([trimMemberLastName caseInsensitiveCompare:[_memberList objectForKey:memberNumber]] == NSOrderedSame){
    //set a value in nsuserdefaults so we never have to check this
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:@"ValidMember" forKey:@"member"];
    [defaults synchronize];

    return YES;
} 
```

这里也是 plist 文件的示例：

```
- (NSString *) getFilePath {
//get filepath
NSArray *pathArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
return [[pathArray objectAtIndex:0] stringByAppendingPathComponent:@"saved.plist"]; 
```

}

*   (void) saveData { //保存数据 NSArray *value = [[NSArray alloc] initWithObjects:[myTextField text],[myDatePicker date], nil]; if ([value writeToFile:[self getFilePath] atomically:YES]) { NSLog(@"它写了文件"); } NSLog(@"value = %@", value.description);

}

*   (void) loadData { //加载数据 NSString *myPath = [self getFilePath]; NSLog(@"myPath = %@", myPath.description); BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath]; if (fileExists) { NSArray *values = [[NSArray alloc] initWithContentsOfFile:myPath]; myTextField.text = [值 objectAtIndex:0]; NSLog(@"myTextField = %@", [values objectAtIndex:0]); myDatePicker.date = [值 objectAtIndex:1]; NSLog(@"myDatePkcer = %@", [values objectAtIndex:1]); } }

# jsf-2 - 链接的 ViewScoped bean 导致内存泄漏

> ID：13091843
> 
> 赞同：9
> 
> 时间：2012-10-26T17:45:56.187
> 
> 标签：jsf-2, out-of-memory, view-scope

在 JBoss 7.1.1 上的 JavaEE6 项目（EJB3、JSF2）中，@ViewScoped bean 似乎存在内存泄漏。上树的日子我花时间研究这个问题。所以我创建了一个带有两个页面的简单项目，以保证在离开@ViewScoped bean 的第一页之后将被释放。

```
<context-param>  //web.xml
   <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
   <param-value>server</param-value>
</context-param>
<context-param>
   <param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
   <param-value>false</param-value>
</context-param> 
```

树豆.java

```
@ManagedBean
@ViewScoped
public class TreeBean implements Serializable {
 private TreeNode root;  
 public static AtomicInteger count = new AtomicInteger(0);

@Override
protected void finalize() throws Throwable {
    System.out.println("TreeBean beans count: " + count.decrementAndGet() + " (FINALISATION)");
}

public TreeBean() {  
    super();
    System.out.println("TreeBean beans count: " + count.incrementAndGet() + " (INITIALISATION)");
} 
```

第一个.xhtml

```
 ....
  <h:form id="frm">
        <p:tree
            value="#{treeBean.root}"
            var="node"
            id="tree">
    ....
   <p:commandLink
            action="second.xhtml?faces-redirect=true"
            value="toSecond" />
    .... 
```

第二个.xhtml

```
 ....
  <h:form id="frm">
    ....
   <p:commandLink
            action="first.xhtml?faces-redirect=true"
            value="toFirst" />
    .... 
```

系统输出：

```
 INFO  [stdout] (http--0.0.0.0-8080-4) TreeBean beans count: 1 (INITIALISATION)
  INFO  [stdout] (http--0.0.0.0-8080-4) TreeBean beans count: 2 (INITIALISATION)
  INFO  [stdout] (http--0.0.0.0-8080-4) TreeBean beans count: 3 (INITIALISATION)
  ......
  INFO  [stdout] (Finalizer) TreeBean beans count: 2 (FINALISATION)
  INFO  [stdout] (Finalizer) TreeBean beans count: 1 (FINALISATION)
  INFO  [stdout] (Finalizer) TreeBean beans count: 0 (FINALISATION) 
```

在我向其他 @ViewScoped bean 添加依赖项之前，所有的想法都很好

树豆.java

```
@ManagedBean
@ViewScoped
public class TreeBean implements Serializable {
 private TreeNode root;  

@ManagedProperty(value = "#{treeNodeBean}")
private TreeNodeBean treeNodeBean;

 public static AtomicInteger count = new AtomicInteger(0);

@Override
protected void finalize() throws Throwable {
    System.out.println("TreeBean beans count: " + count.decrementAndGet() + " (FINALISATION)");
}

public TreeBean() {  
    super();
    System.out.println("TreeBean beans count: " + count.incrementAndGet() + " (INITIALISATION)");
} 
```

树节点Bean.java

```
@ManagedBean
@ViewScoped
public class TreeNodeBean implements Serializable {

     private String treeNodeItem="TreeNodeItem";

} 
```

在那之后，没有一颗豆子被释放出来。有人知道如何处理吗？这是一个错误还是可能在某处配置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-27T04:19:22.707

[不幸的是，您是对的，您将在此处](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-905)和[此处](http://java.net/jira/browse/JAVASERVERFACES-1839)看到内存管理存在已知问题`@ViewScoped`（并且不关心仅链接视图）。另请查看[这个问题](https://stackoverflow.com/q/6368840/1530938)您可以尝试的是在当前会话中获取对象并根据某些事件进行调用。你也可以试试[这个](https://stackoverflow.com/a/13085978/1530938)`UIViewRoot``getViewMap().remove("myView")`

与此无关，您为什么要链接视图范围的 bean？它们旨在按名称使用，用于视图。你是否被限制使用`SessionScoped`？

# java - 将 HttpClient 4.1 请求绑定到本地地址

> ID：13091844
> 
> 赞同：0
> 
> 时间：2012-10-26T17:46:00.873
> 
> 标签：java, sockets, httpclient

通过特定的 localAddress 绑定 HttpClient 请求时出错

这是代码

```
 HttpParams httpsParams = new BasicHttpParams();
    ConnRouteParams.setLocalAddress(httpsParams, InetAddress.getByAddress(new byte[]{ (byte)192, (byte)168, (byte)43, (byte)98 }));

    DefaultHttpClient httpClient = new DefaultHttpClient(httpsParams);

    URL url = new URL("http://what-is-my-ip.net/?json");

    HttpGet method = new HttpGet(url.toURI());

    HttpResponse response = httpClient.execute(method);
    InputStream is = response.getEntity().getContent();

    ByteArrayOutputStream bos = new ByteArrayOutputStream();

    byte[] buffer = new byte[1024];
    int nbRead;
    while ((nbRead = is.read(buffer)) != -1) {
        bos.write(buffer, 0, nbRead);
    }

    is.close();

    System.out.println(new String(bos.toByteArray())); 
```

这就是错误

```
Oct 26, 2012 10:48:57 PM org.apache.http.impl.client.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the target host: Network is unreachable: connect
Oct 26, 2012 10:48:57 PM org.apache.http.impl.client.DefaultRequestDirector tryConnect
INFO: Retrying connect
Oct 26, 2012 10:48:57 PM org.apache.http.impl.client.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the target host: Network is unreachable: connect
Oct 26, 2012 10:48:57 PM org.apache.http.impl.client.DefaultRequestDirector tryConnect
INFO: Retrying connect
Oct 26, 2012 10:48:57 PM org.apache.http.impl.client.DefaultRequestDirector tryConnect
INFO: I/O exception (java.net.SocketException) caught when connecting to the target host: Network is unreachable: connect
Oct 26, 2012 10:48:57 PM org.apache.http.impl.client.DefaultRequestDirector tryConnect
INFO: Retrying connect
Exception in thread "main" java.net.SocketException: Network is unreachable: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:123)
    at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:148)
    at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:149)
    at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:121)
    at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:573)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:425)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:820)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:754)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:732)
    at utils.NewClass.main(NewClass.java:49) 
```

难道我做错了什么 ？请帮忙，我用谷歌搜索了很多，但在这方面找不到任何东西。

这是与操作系统相关的问题吗，我在 win7 上？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:11:46.427

对不起，但无法评论问题，所以我会尝试回答：192.168.43.98 接口中的问题的可能性为 99%，检查它是否工作正常

PS：你可以通过 curl 进行测试： curl --interface "192.168.43.98" [http://what-is-my-ip.net/?json](http://what-is-my-ip.net/?json)

# c++ - Qt C++ 中的锚点等价物是什么？

> ID：13091848
> 
> 赞同：1
> 
> 时间：2012-10-26T17:46:11.780
> 
> 标签：c++, qt, qt-creator, qt-designer

当主窗口调整大小时，我需要调整元素的大小，我认为锚点是我在 Visual Basic .NET 中使用的，但我在 Qt Designer 中没有找到它，我应该使用什么？

详细信息：要调整大小的元素：标签主窗体命名为：窗体

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T18:02:55.723

在 Qt 中，您为此使用布局。基类是 QLayout。在设计器中，您首先将布局分配给主窗口，然后将标签插入到布局中。有几种类型的布局，它们有几个属性来定义其托管小部件的大小行为。

# sql - 如何在加入前对数据进行排序

> ID：13091850
> 
> 赞同：0
> 
> 时间：2012-10-26T17:46:33.903
> 
> 标签：sql, sql-server

尝试对具有相同数据布局的 2 个表进行比较，并且在同一行上有不匹配的记录

```
Table1                   Table2
------                   ------

CUSTOMER PART            CUSTOMER  PART

CUSTID1  PART1           CUSTID1  PART1
CUSTID1  PART2           CUSTID1  PART2
CUSTID1  PART3           CUSTID1  PART3
CUSTUD1  PART4

SELECT T1.CUSTID, T1.PART, T2.CUSTID, T2.PART FROM TABLE1 AS T1
LEFT JOIN TABLE2 AS T2 ON T1.CUSTID = T2.CUSTID
WHERE  T1.PART <>  T2.PaRT
ORDER BY T1.CUSTID 
```

有时输出如下所示 - 当没有时显示不匹配。我可以在连接之前订购表格以使数据对齐吗？

谢谢

```
CUSTID1  PART1           CUSTID1  PART3
CUSTID1  PART2           CUSTID1  PART1
CUSTID1  PART3           CUSTID1  PART2
CUSTUD1  PART4           NULL     NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:55:35.647

您需要执行以下操作：

```
SELECT T1.CUSTID, T1.PART, T2.CUSTID, T2.PART 
FROM TABLE1 AS T1 
     INNER JOIN TABLE2 AS T2 ON T1.CUSTID = T2.CUSTID 
WHERE T1.PART <> T2.PaRT 
```

没有必要使用左外连接。order by 子句对 join 的结果没有任何影响；它只是命令结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:05:36.350

您当前的查询，即使是样本数据，也应该为您提供大量数据：

```
SELECT T1.CUSTID, T1.PART, T2.CUSTID, T2.PART FROM TABLE1 AS T1
LEFT JOIN TABLE2 AS T2 ON T1.CUSTID = T2.CUSTID
WHERE  T1.PART <>  T2.PaRT
ORDER BY T1.CUSTID 
```

预期结果：

```
CUSTID1    PART1    CUSTID1    PART2
CUSTID1    PART1    CUSTID1    PART3
CUSTID1    PART2    CUSTID1    PART1
CUSTID1    PART2    CUSTID1    PART3
CUSTID1    PART3    CUSTID1    PART1
CUSTID1    PART3    CUSTID1    PART2
CUSTID1    PART4    CUSTID1    PART1
CUSTID1    PART4    CUSTID1    PART2
CUSTID1    PART4    CUSTID1    PART3 
```

您可能想要一个 FULL OUTER JOIN 条件`ON T1.CustID = T2.CustID AND T1.Part = T2.Part`。如果你不能做 FULL，请使用 LEFT 和 RIGHT 连接的 UNION。或者，如果您不担心 Table2 中的行在 Table1 中没有对应的行，那么您现有的带有增强 ON 子句的 LEFT JOIN 就可以了。

如果你想要所有匹配的行和所有不匹配的行，那么你使用

```
SELECT T1.CustID, T1.Part, T2.CustID, T2.Part
  FROM Table1 AS T1
  FULL OUTER JOIN Table2 AS T2
       ON T1.CustID = T2.CUSTID AND T1.Part = T2.Part 
```

如果您只想查看不匹配的行，请编写：

```
SELECT T1.CustID, T1.Part, T2.CustID, T2.Part
  FROM Table1 AS T1
  FULL OUTER JOIN Table2 AS T2
       ON T1.CustID = T2.CUSTID AND T1.Part = T2.Part
 WHERE T1.Part IS NULL OR T2.Part IS NULL 
```

LEFT-UNION-RIGHT 查询（针对所有行）可能是：

```
SELECT T1.CustID, T1.Part, T2.CustID, T2.Part
  FROM Table1 AS T1
  LEFT OUTER JOIN Table2 AS T2
       ON T1.CustID = T2.CUSTID AND T1.Part = T2.Part
UNION
SELECT T1.CustID, T1.Part, T2.CustID, T2.Part
  FROM Table1 AS T1
 RIGHT OUTER JOIN Table2 AS T2
       ON T1.CustID = T2.CUSTID AND T1.Part = T2.Part 
```

并且对所有行的 LEFT 唯一查询可能是：

```
SELECT T1.CustID, T1.Part, T2.CustID, T2.Part
  FROM Table1 AS T1
  LEFT OUTER JOIN Table2 AS T2
       ON T1.CustID = T2.CUSTID AND T1.Part = T2.Part 
```

如果您只想查看不匹配的行，则可以添加适当的 WHERE 过滤条件。（显然，如果您只想查看匹配的行，则使用常规的 INNER JOIN 或仅 JOIN。）

*告诫 Emptor*：没有 DBMS 验证过这个 SQL。

# ssl - Netty SSL 模式奇怪的行为

> ID：13091851
> 
> 赞同：2
> 
> 时间：2012-10-26T17:46:41.267
> 
> 标签：ssl, netty

我试图理解，为什么 Netty SSL 模式以奇怪的方式工作？此外，问题如下，当任何 SSL 客户端（https 浏览器、使用 ssl 的 java 客户端，以及任何 ssl 客户端应用程序）连接到 Netty 服务器时，我都会开始完整的消息，在那里我可以正确识别所使用的协议，但只要频道保持连接，任何后续消息都有奇怪的结构，非 ssl 模式不会发生同样的事情。作为 https 浏览器连接到我的服务器时 messageReceived 方法的示例：

我已经使用 PortUnificationServerHandler 来切换协议..（不使用 nettys http 处理程序，这只是示例，因为我自己的协议也使用 ssl 模式）

> 1.  第一条消息没问题，我得到以 GET 或 POST 开头的完整标题
> 2.  比我发送响应...
> 3.  第二条消息只有一个字节长，只包含“G”或“P”。
> 4.  第三条消息比其余的以 ET 或 OST 开头，其余的 http 标头和正文..
> 5.  这里再次遵循我的回应......
> 6.  第四条消息又是一个字节长，又只包含一个字节..
> 7.  第五条消息，其余的……这样游戏就更进一步了……

在这里，使用哪个子协议（http 或其他任何协议）并不重要，在第一条消息之后我首先得到一个字节，在第二条消息中得到其余的请求..

我想构建一些代理艺术，获取 ssl 数据并将其发送到其他侦听器上，但是当我直接这样做而不等待完整的数据请求时，目标侦听器（例如 http 服务器）无法处理此类数据，如果目标仅获得一个字节作为第一个（即使下一条消息包含其余部分），通道立即关闭并放弃请求。好吧，首先虽然要做以下操作，暂时缓存第一个字节并等待下一条消息比加入这些消息，而且只有响应，工作正常，但有时这不是正确的方法，因为一个字节有时真的是最后一个消息字节，如果我缓存它并错误地等待下一条消息，我可以永远等待，因为 https 浏览器此时期望一些响应并且不再发送任何数据..

现在的问题是，是否可以使用 SSL 解决此问题？可能有特殊设置会影响这种行为吗？我希望立即完全加入消息，而不是第一个字节，而不是其他字节。请确认，对于较新的 Netty 版本，您使用 PortUnificationServerHandler 具有相同的行为（但没有 netty http 处理程序，请尝试一些自己的处理程序。）这种行为好吗，我不相信，预计它会起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:39:47.857

您遇到的情况很可能是[针对 BEAST 攻击的对策](https://stackoverflow.com/a/15225921/372643)所致。

这不是问题。问题似乎是您假设您打算根据消息/数据包读取数据。情况并非如此：TCP（和 TLS/SSL）旨在用作连续数据流。您应该在数据可用时继续读取数据。将传入数据拆分到有意义的位置由应用程序协议指导。对于 HTTP，指示是标头后面的空行和`Content-Length`实体的或分块传输编码。

如果您定义自己的协议，则无论您使用纯 HTTP 还是 SSL/TLS，都需要类似的机制。假设你不需要它只是偶然的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T09:02:59.227

我遇到过这个问题，发现它是使用 JDK1.7 引起的。回到 JDK1.6 解决了它。我没有时间进一步调查，但现在假设 SSLEngine 实现在 JDK 中发生了变化。时间允许时我会进一步调查。

# python - 保存 django mongoengine 模型实例时无效的 EmbeddedDocumentField 项（在 save() 上失败）

> ID：13091852
> 
> 赞同：2
> 
> 时间：2012-10-26T17:46:47.370
> 
> 标签：python, django, mongodb, model, mongoengine

我正在尝试保存模型的实例，但我得到了

```
Invalid EmbeddedDocumentField item (1) 
```

`1`项目的 ID在哪里（我认为）。

模型定义为

```
class Graph(Document):
    user = StringField(max_length=50, required=True)
    title = StringField(max_length=500)
    description = StringField(max_length=1000)
    # field in error
    graph_nodes = ListField(EmbeddedDocumentField(Graph_Node))
    procedure = ListField(DictField())
    created_on = DateTimeField(default=datetime.datetime.now)

    def __unicode__(self):
        return self.title

    meta = {
        'ordering': ['-created_on'],
        'allow_inheritance': False,
    }

class Graph_Node(EmbeddedDocument):
    id = StringField(required=True, max_length=30)
    button = StringField(max_length=40, required=True)
    parameter = StringField(max_length=50, required=False)
    values = ListField(StringField(max_length=30, required=False))
    wires_out = ListField(StringField(max_length=30, required=False))
    wires_in = ListField(StringField(max_length=30, required=False))

    def __unicode__(self):
        return self.id

    meta = {
        'allow_inheritance': False
    }

    def fill(self, args):
        for k in args.keys():
            if k in self.__dict__['_data'].keys():
                self.__dict__['_data'][k] = args[k] 
```

调用`save()`方法如下：

```
Graph(user=request.user.username, title=title, 
      description=description, procedure=procedura, 
      graph_nodes=gnlist).save() 
```

并且在 Graph 创建时抛出异常`save`，而不是在创建图形时。

`gnlist`是（从`pydev debugger`）

```
list: [<Graph_Node: start>, <Graph_Node: 1>, <Graph_Node: end>] 
```

并且`gnlist[1]`似乎格式正确（如果需要，我会发布更多详细信息）

我试图跟踪查询，`mongodb`但它似乎没有被分析，但是输出如下（以防帮助我从不相关的日志中清除它）：

```
{ "ts" : ISODate("2012-10-26T18:25:07.492Z"), "op" : "query", "ns" : "analysis.system.indexes", "query" : { "expireAfterSeconds" : { "$exists" : true } }, "ntoreturn" : 0, "ntoskip" : 0, "nscanned" : 0, "keyUpdates" : 0, "numYield" : 0, "lockStats" : { "timeLockedMicros" : { "r" : NumberLong(248), "w" : NumberLong(0) }, "timeAcquiringMicros" : { "r" : NumberLong(2), "w" : NumberLong(4) } }, "nreturned" : 0, "responseLength" : 20, "millis" : 0, "client" : "0.0.0.0", "user" : "" }
{ "ts" : ISODate("2012-10-26T18:26:07.505Z"), "op" : "query", "ns" : "analysis.system.indexes", "query" : { "expireAfterSeconds" : { "$exists" : true } }, "ntoreturn" : 0, "ntoskip" : 0, "nscanned" : 0, "keyUpdates" : 0, "numYield" : 0, "lockStats" : { "timeLockedMicros" : { "r" : NumberLong(680), "w" : NumberLong(0) }, "timeAcquiringMicros" : { "r" : NumberLong(4), "w" : NumberLong(7) } }, "nreturned" : 0, "responseLength" : 20, "millis" : 0, "client" : "0.0.0.0", "user" : "" }
{ "ts" : ISODate("2012-10-26T18:26:25.803Z"), "op" : "query", "ns" : "analysis.system.profile", "query" : { }, "ntoreturn" : 0, "ntoskip" : 0, "nscanned" : 2, "keyUpdates" : 0, "numYield" : 0, "lockStats" : { "timeLockedMicros" : { "r" : NumberLong(62), "w" : NumberLong(0) }, "timeAcquiringMicros" : { "r" : NumberLong(7), "w" : NumberLong(3) } }, "nreturned" : 2, "responseLength" : 758, "millis" : 0, "client" : "127.0.0.1", "user" : "" }
{ "ts" : ISODate("2012-10-26T18:27:07.506Z"), "op" : "query", "ns" : "analysis.system.indexes", "query" : { "expireAfterSeconds" : { "$exists" : true } }, "ntoreturn" : 0, "ntoskip" : 0, "nscanned" : 0, "keyUpdates" : 0, "numYield" : 0, "lockStats" : { "timeLockedMicros" : { "r" : NumberLong(698), "w" : NumberLong(0) }, "timeAcquiringMicros" : { "r" : NumberLong(6), "w" : NumberLong(7) } }, "nreturned" : 0, "responseLength" : 20, "millis" : 0, "client" : "0.0.0.0", "user" : "" }
{ "ts" : ISODate("2012-10-26T18:27:18.817Z"), "op" : "query", "ns" : "analysis.system.profile", "query" : { }, "ntoreturn" : 0, "ntoskip" : 0, "nscanned" : 4, "keyUpdates" : 0, "numYield" : 0, "lockStats" : { "timeLockedMicros" : { "r" : NumberLong(121), "w" : NumberLong(0) }, "timeAcquiringMicros" : { "r" : NumberLong(11), "w" : NumberLong(8) } }, "nreturned" : 4, "responseLength" : 1463, "millis" : 0, "client" : "127.0.0.1", "user" : "" }
{ "ts" : ISODate("2012-10-26T18:28:02.570Z"), "op" : "query", "ns" : "analysis.system.profile", "query" : { }, "ntoreturn" : 0, "ntoskip" : 0, "nscanned" : 5, "keyUpdates" : 0, "numYield" : 0, "lockStats" : { "timeLockedMicros" : { "r" : NumberLong(112), "w" : NumberLong(0) }, "timeAcquiringMicros" : { "r" : NumberLong(13), "w" : NumberLong(7) } }, "nreturned" : 5, "responseLength" : 1799, "millis" : 0, "client" : "127.0.0.1", "user" : "" }
{ "ts" : ISODate("2012-10-26T18:28:07.507Z"), "op" : "query", "ns" : "analysis.system.indexes", "query" : { "expireAfterSeconds" : { "$exists" : true } }, "ntoreturn" : 0, "ntoskip" : 0, "nscanned" : 0, "keyUpdates" : 0, "numYield" : 0, "lockStats" : { "timeLockedMicros" : { "r" : NumberLong(680), "w" : NumberLong(0) }, "timeAcquiringMicros" : { "r" : NumberLong(5), "w" : NumberLong(7) } }, "nreturned" : 0, "responseLength" : 20, "millis" : 0, "client" : "0.0.0.0", "user" : "" }
{ "ts" : ISODate("2012-10-26T18:28:11.608Z"), "op" : "query", "ns" : "analysis.system.profile", "query" : { }, "ntoreturn" : 0, "ntoskip" : 0, "nscanned" : 7, "keyUpdates" : 0, "numYield" : 0, "lockStats" : { "timeLockedMicros" : { "r" : NumberLong(117), "w" : NumberLong(0) }, "timeAcquiringMicros" : { "r" : NumberLong(10), "w" : NumberLong(7) } }, "nreturned" : 7, "responseLength" : 2504, "millis" : 0, "client" : "127.0.0.1", "user" : "" }
{ "ts" : ISODate("2012-10-26T18:28:51.589Z"), "op" : "command", "ns" : "analysis.$cmd", "command" : { "profile" : 0 }, "ntoreturn" : 1, "keyUpdates" : 0, "numYield" : 0, "lockStats" : { "timeLockedMicros" : { "r" : NumberLong(0), "w" : NumberLong(24) }, "timeAcquiringMicros" : { "r" : NumberLong(0), "w" : NumberLong(11) } }, "responseLength" : 58, "millis" : 0, "client" : "127.0.0.1", "user" : "" } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T19:28:51.250

好像解决了：

我发现[了这个问题](https://github.com/hmarr/mongoengine/issues/328)。

我安装了新的稳定版本`mongoengine`：0.6.2

重启后`mongoengine`告诉我问题出在哪里：

`values`属性太短，无法保存文件路径，所以我更改了

```
values = ListField(StringField(max_length=30, required=False)) 
```

到

```
values = ListField(StringField(max_length=100, required=False)) 
```

谢谢大家

# c++ - C++：使用 boost unordered_map 错误：没有匹配的函数调用

> ID：13091853
> 
> 赞同：0
> 
> 时间：2012-10-26T17:47:03.683
> 
> 标签：c++, boost, initialization, unordered-map

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:59:11.470

The call

```
lut["a"] = x; 
```

will first create an empty entry in `themap` (cfr. [operator[]](http://www.boost.org/doc/libs/1_38_0/doc/html/boost/unordered_map.html#id3723627-bb): "Effects: If the container does not already contain an elements with a key equivalent to k, inserts the value `std::pair<key_type const, mapped_type>(k, mapped_type())`"). To construct `mapped_type()` it needs a default constructor.

If you want to avoid that, use the [`insert`](http://www.boost.org/doc/libs/1_38_0/doc/html/boost/unordered_map.html#id3724474-bb) function:

```
bool inserted=lut.insert( std::make_pair("a",x) ).second;
assert(inserted); // unless it's ok to not overwrite already inserted keys 
```

But this way, you'll need a copy constructor (or a [move-constructor](http://msdn.microsoft.com/en-us/library/dd293665.aspx)), since the newly created `pair` will be copied into the map.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T18:06:48.837

When you use `lut["a"]` in your main function, map should return a reference to an initialized value of type `STFRandomTreeFunctor` and as you see, it have no parameter to create and initialize that instance, so it use default constructor of your class and your class have no default constructor. so you should either, write a default constructor for your class or use:

```
lut.insert( std::make_pair("a", STFRandomTreeFunctor(cache, a, "a")) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:54:33.637

Put your struct definitions on top, basically it's trying to construct the `unordered_map<string, STFRandomTreeFunctor> lut;` but can't find the definition for your struct :)

```
struct STFRandomTreeFunction
{
    typedef double (*function_ptr)(const STFDataPoint& data, boost::unordered_map<std::string, cv::Mat>& preloaded_images);
};

struct STFRandomTreeFunctor
{
private:
    boost::unordered_map<std::string, cv::Mat> *image_cache;
    STFRandomTreeFunction::function_ptr function;
    std::string function_id;

public:
    STFRandomTreeFunctor(boost::unordered_map<std::string, cv::Mat>& cache, STFRandomTreeFunction::function_ptr function, std::string function_id)
    :image_cache(&cache), function(function), function_id(function_id){}

    std::string get_function_id(){
        return function_id;
    }

    double operator()(const TrainingDataPoint& data_point){
        return function(data_point, *image_cache);
    }
};

unordered_map<string, STFRandomTreeFunctor> lut;

double a(const STFDataPoint& b, unordered_map<string, Mat>& c){
    return 5;
}

int main(int argc, char* argv[]) {

    unordered_map<string, Mat> cache;
    lut["a"] = STFRandomTreeFunctor(cache, a, "a");
} 
```

# python - 从两个字典打印

> ID：13091855
> 
> 赞同：0
> 
> 时间：2012-10-26T17:47:14.903
> 
> 标签：python, python-3.x, python-3.1

```
states = {state, abbr}
cities = {abbr, capital} 
```

我想打印出`state, abbr, capital`3 个值或其他顺序。我尝试在以下状态下反转键值对：

```
inv_states = {state: abbr for abbr, state in states.items()}
for abbr, capital in sorted(inv_states.items()):
         print(abbr, ':', capital) 
```

现在我有：

```
states = {abbr, state}
cities = {abbr, capital} 
```

然后尝试使用（我不完全理解下面的代码）创建一个新的字典：

```
newDict = defaultdict(dict)
for abbr in (inv_states, cities):
         for elem in abbr:
                 newDict[elem['index']].update(elem)
fullDict = newDict.values()
print(fullDict) 
```

但我遇到了一个`string indices must be intergers`错误。

请帮忙。还是我完全走错了路？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:50:06.980

假设您的数据在字典中（不在您的示例代码中）。打印出您要查找的数据应该非常简单

```
for state, abbr in states.items():
   print('{0}, {1}, {2}'.format(state, abbr, cities[abbr])) 
```

# css - 使用 CSS 滑动门居中标题

> ID：13091859
> 
> 赞同：-1
> 
> 时间：2012-10-26T17:47:26.787
> 
> 标签：css, css-float, sliding-doors

我对[这里](http://nl.italiethuis.com/products-page/wine/vendemmia-tardiva-2/)的推拉门技术有疑问。由于推拉门技术，描述之后的标题向右浮动，但我想要的只是在产品上方的中心独立存在。

你能帮我理解怎么做吗？

这是我用于标题的 CSS：

```
h3.offer-title, h3#comments, h3#reply-title  {
background:url(images/offer-title-bg.png) no-repeat right bottom;
color:#434343;
display:block;
float:left;
font-size: 14px;
margin-right: 6px;
padding-right:6px;
text-decoration:none;
height: 43px;
line-height: 0;
position: relative; }

h3.offer-title span, h3#comments span, h3#reply-title span {
background:url(images/offer-title-bg.png) no-repeat;
display:block;
padding-left: 20px;
height: 43px;
line-height: 43px;
padding-right: 16px;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:54:55.677

它是浮动的，因为您`float: left`在第一个 CSS 代码块中进行了设置。要摆脱这种行为，您需要摆脱浮动。

浮动消失后，如果您希望标题的背景像以前一样很好地适合文本，则元素需要具有`display: inline-block`.

但是`display: inline-block`在标题上没有设置宽度（您可以添加一个宽度，但是如果您想更改文本或字体大小，它可能会中断），它没有居中。为了让它居中，你需要一个围绕它的包装元素，它有`text-align: center`.

所以：

1.  添加此块：

    ```
    h3.offer-title {
        display: inline-block; /* this makes the bg fit the text */
        float: none; /* this overrides float:left */
    } 
    ```

2.  `offer-title`将元素包装在另一个 div 中。

3.  样式包装器

    ```
     .offer-title-wrapper {
        text-align: center;
    } 
    ```

# c# - 以编程方式，需要做什么才能在调用 SAP 时使用 X.509 客户端证书？

> ID：13091861
> 
> 赞同：4
> 
> 时间：2012-10-26T17:47:34.463
> 
> 标签：c#, iis, sap, x509certificate

我目前正在使用用户 ID/密码基本身份验证。为了开始使用 X.509 数字证书，我需要做什么？

我的 Web 应用程序是用 C# 编写的，并且在 IIS 之上运行。

**附加信息：**我将使用 Rafael My SAP Proxy Visual Studio 插件生成的代码调用 BAPI/zBAPI：[http](http://tools.rafaelc.net/default.aspx?id=72) ://tools.rafaelc.net/default.aspx?id=72 。它会自动生成代理代码。

我想知道是否可以将生成的代码更改为使用客户端证书，在这种情况下，我需要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-12-17T15:10:06.443

我假设您想使用客户端证书。

在 AS-ABAP-Serverside：首先，您需要将 CA 上传到 transaction strust（目录 SSL-Server-Standard）。其次查看 VUSREXTID 需要维护（参见[https://wiki.scn.sap.com/wiki/display/Basis/How+to+configure+client+certificate+logon+to+AS+ABAP](https://wiki.scn.sap.com/wiki/display/Basis/How+to+configure+client+certificate+logon+to+AS+ABAP)）。我建议上传客户端证书，以便使用证书的正确 DN 和颁发者证书维护视图。最后一步是将服务节点（事务 sicf）的身份验证过程更改为“SSL 证书必需”： [![SLL 客户端认证服务](../Images/98c6a91665c517262a5ff2a5ce7bb533.png)](https://i.stack.imgur.com/9MDoJ.png)

# json - 更改 JSON.NET 序列化属性名称的方式

> ID：13091862
> 
> 赞同：2
> 
> 时间：2012-10-26T17:47:36.630
> 
> 标签：json, serialization, properties, json.net

如何更改 Newtonsoft JSON.NET 序列化对象属性名称的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T17:57:56.427

几种方法：

1.  `JsonTextWriter`您可以使用该类 手动控制它的序列化方式：
    *   [http://james.newtonking.com/projects/json/help/index.html?topic=html/ReadingWritingJSON.htm](http://james.newtonking.com/projects/json/help/index.html?topic=html/ReadingWritingJSON.htm)
2.  您可以实现一个自定义`JsonConverter`，做你想做的事：
    *   [http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_JsonConverter.htm](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_JsonConverter.htm)
    *   示例：[JSON.NET 自定义序列化以排除属性名称](https://stackoverflow.com/questions/12127749/json-net-customizing-the-serialization-to-exclude-a-property-name)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:59:40.920

您可以使用属性名称创建模型。并通过创建一些私有变量来更改它们，这些变量将用作属性的返回值。这将指示反序列化器重置属性的名称。

```
 private int _privateId;

    public int NameThatExistAlreadyInTheJson 
    {

        set { _privateId = value; }

    }
    public int NameYouWantItToBeDisplayInstead 
    {
        get { return _privateId; }
    } 
```

# android - Tinymce 无法在 Android 平板电脑 3.1 上运行

> ID：13091864
> 
> 赞同：1
> 
> 时间：2012-10-26T17:47:47.333
> 
> 标签：android, jquery, cordova, jquery-plugins, tinymce

我正在使用 phonegap 在 android 平板电脑中开发一个应用程序。除了 tinymce 插件外，一切正常。Tinymce ui 将显示良好。但无法在富文本编辑器区域输入文本。而且我不知道这个插件是否支持安卓平板电脑。我是 phonegap 和应用程序开发的新手。我无法在网络中找到解决方案。请帮我解决这个问题。

请建议我任何其他插件，如 tinymce 在 android 平板电脑中运行良好。

# memcached - 使用错误的 API 版本为 MAMP 安装 memcache

> ID：13091865
> 
> 赞同：4
> 
> 时间：2012-10-26T17:47:49.300
> 
> 标签：memcached, mamp

我正在尝试为 MAMP 安装内存缓存。似乎配置/制作/安装很好，但我收到一条错误消息，指出 API 版本错误：

```
[26-Oct-2012 17:40:51 UTC] PHP Warning:  PHP Startup: memcache: Unable to initialize module
Module compiled with module API=20090626
PHP    compiled with module API=20100525
These options need to match
 in Unknown on line 0 
```

我在 OS X Mountain Lion 上使用 MAMP 2.1.1。

我正在使用这个内存缓存构建： http: [//pecl.php.net/package/memcache/2.2.7](http://pecl.php.net/package/memcache/2.2.7)

我将存档解压缩到此目录：/Applications/MAMP/bin/php/php5.4.4/include/memcache-2.2.7

然后从提取的目录中运行这些命令：

```
/Applications/MAMP/bin/php/php5.4.4/bin/phpize 
./configure
make
sudo make install 
```

除了我在上面提到的错误之外没有错误，我在：/Applications/MAMP/logs/php_error.log

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:25:26.067

好的，经过几个小时的尝试解决这个问题，我能够找到问题并解决它。当谈到所有这些东西时，我几乎是一个大菜鸟，但这是我能解释的最好的东西：

所以，当我第一次在模块上运行 phpize 时，它​​被配置为我系统默认安装的 php。我必须在我的 .bash_profile 中将 php 和 phpize 指向我的 PATH

```
export PATH=/Applications/MAMP/Library/bin:/Applications/MAMP/bin/php/php5.4.3/bin:/usr/local/bin:$PATH:/opt/local/bin 
```

确保将 php 版本更改为您正在运行的版本。

将此添加到您的路径后，运行`phpize -v`应返回：

```
PHP Api Version:         20100412
Zend Module Api No:      20100525
Zend Extension Api No:   220100525 
```

并且运行`which phpize`应该返回：`/Applications/MAMP/bin/php/php5.4.3/bin/phpize`

因此，只需删除第一次安装的所有文件，然后再次运行安装过程。我将下载的文件 cd 解压缩到解压缩的文件夹中并运行：/Applications/MAMP/bin/php/php5.4.3/bin/phpize ./configure make cp modules/memcache.so /Applications/MAMP/bin/php/php5。 4.3/lib/php/extensions/no-debug-non-zts-20100525/

并且繁荣完成。有用！

这篇文章帮助了我很多，即使它与内存缓存无关：http: [//drupal.org/node/1464236](http://drupal.org/node/1464236)

# java - Raytracer，计算观察光线（Java）

> ID：13091871
> 
> 赞同：3
> 
> 时间：2012-10-26T17:48:25.007
> 
> 标签：java

对于学校，我最近开始创建自己的光线追踪器。但是，我在计算观察光线或检查三角形和光线之间的交点时遇到了障碍。据我所知，计算似乎执行正确，因为我将相机放在原点并让它面向 -z 轴朝向它前面的对象，从而允许手动进行简单的矢量数学运算。一切似乎都检查出来了，但屏幕上什么也没有画出来。

我将发布我正在使用计算观察光线的代码。

```
public Ray generateRay(float nX, float nY , Point2f coordinates)
{
    // Compute l, r, b and t.
    Vector3f temp = VectorHelper.multiply(u, nX/2.0f);
    float r = temp.x + Position.x;
    temp = VectorHelper.multiply(u, -nX/2.0f);
    float l = temp.x + Position.x;
    temp = VectorHelper.multiply(v, nY/2.0f);
    float t = temp.y + Position.y;
    temp = VectorHelper.multiply(v, -nY/2.0f);
    float b = temp.y + Position.y;

    // Compute the u and v coordinates.
    float uCo = (l + (r - l) * (coordinates.x + 0.5f)/nX);
    float vCo = (b + (t - b) * (coordinates.y + 0.5f)/nY);

    // Compute the ray's direction.
    Vector3f rayDirection = VectorHelper.multiply(w, -FocalLength);
    temp = VectorHelper.add(VectorHelper.multiply(u, uCo), VectorHelper.multiply(v, vCo));
    rayDirection = VectorHelper.add(rayDirection, temp);
    rayDirection = VectorHelper.add(rayDirection, Position);
    rayDirection = VectorHelper.normalize(VectorHelper.add(rayDirection, temp));

    // Create and return the ray.
    return new Ray(Position, rayDirection);
} 
```

以下代码是我用来计算交点的代码。它使用克莱默法则来求解矩阵方程。

```
public static Point3f rayTriangleIntersection(
        Ray ray, Point3f vertexA, Point3f vertexB, Point3f vertexC)
{
    // Solve the linear system formed by the ray and the parametric surface
    // formed by the points of the triangle.
    // | a d g |   | B |   | j |
    // | b e h | * | Y | = | k |
    // | c f i | * | t | = | l |
    // The following uses Cramer's rule to that effect.
    float a = vertexA.x - vertexB.x; float d = vertexA.x - vertexC.x; float g = ray.getDirection().x;
    float b = vertexA.y - vertexB.y; float e = vertexA.y - vertexC.y; float h = ray.getDirection().y;
    float c = vertexA.z - vertexB.z; float f = vertexA.z - vertexC.z; float i = ray.getDirection().z;

    float j = vertexA.x - ray.getOrigin().x;
    float k = vertexA.y - ray.getOrigin().y;
    float l = vertexA.z - ray.getOrigin().z;

    // Compute some subterms in advance.
    float eihf = (e * i) - (h * f);
    float gfdi = (g * f) - (d * i);
    float dheg = (d * h) - (e * g);
    float akjb = (a * k) - (j * b);
    float jcal = (j * c) - (a * l);
    float blkc = (b * l) - (k * c);
    // Compute common division number.
    float m = (a * eihf) + (b * gfdi) + (c * dheg);

    // Compute unknown t and check whether the point is within the given
    // depth interval.
    float t = -((f * akjb) + (e * jcal) + (d * blkc)) / m;
    if (t < 0)
        return null;

    // Compute unknown gamma and check whether the point intersects the
    // triangle.
    float gamma = ((i * akjb) + (h * jcal) + (g * blkc)) / m;
    if (gamma < 0 || gamma > 1)
        return null;

    // Compute unknown beta and check whether the point intersects the
    // triangle.
    float beta = ((j * eihf) + (k * gfdi) + (l * dheg)) / m;
    if (beta < 0 || beta > (1 - gamma))
        return null;

    // Else, compute the intersection point and return it.
    Point3f result = new Point3f();
    result.x = ray.getOrigin().x + t * ray.getDirection().x;
    result.y = ray.getOrigin().y + t * ray.getDirection().y;
    result.z = ray.getOrigin().z + t * ray.getDirection().z;
    return result;
} 
```

我的问题很简单。我究竟做错了什么？我已经查看并调试了这段代码，但无法找出错误，谷歌提供的只是我正在使用的书中已有的理论。此外，代码仍然相当粗糙，因为我只是专注于在清理它之前让它工作。

提前致谢，

凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T17:57:18.173

很难准确地说出了什么问题。特别是因为您没有使用描述性变量名称（什么是 nX、nY 等？？）

以下是一些提示：

*   首先确保它不是您的显示代码中的错误。伪造一个交点来证明当你击中某物时你会得到可见的输出，例如让屏幕右下角的所有光线都击中一个轴对齐的平面或类似的东西，这样你就可以轻松地验证坐标
*   首先尝试射线/球体相交。它比射线/三角形相交更容易。
*   考虑使用向量/矩阵运算，而不是手动计算所有组件。在许多乱七八糟的字母中很容易出错。
*   如果您遇到比例问题（例如对象太小），请仔细检查您在世界坐标和屏幕坐标之间的转换。世界坐标将在小的双数范围内（例如 0.2 ....5.0），而屏幕坐标应该是根据您的视图大小的像素位置（例如 0 .. 1024）。您应该在世界坐标中进行大部分数学运算，仅在渲染代码的开头和结尾转换屏幕坐标。
*   在调试器中逐步执行顶级光线跟踪代码，并确保您为每个屏幕坐标（尤其是屏幕的角落）在合理的方向上产生光线
*   检查您的相机方向是否指向目标对象。让它看起来完全相反的方向是一个很容易的错误！

应该工作的示例设置：

*   相机位置 [0 0 4]
*   对象位置 [0 0 0]
*   Camera DIRECTION [0 0 -1]（如果你想让它看向原点，请注意减号！）
*   上向量 [0 0.75 0]
*   右向量 [+/-1 0 0]

那么你的光线方向应该是这样的（对于一个像素 [screenX, screenY]）：

> 射线 = 方向 + (2*(screenX / screenWidth)-1)*RIGHT + (1-2*(screenY/screenHeight))*UP
> 
> 射线 = 归一化（射线）

# sql-server-2008 - 从选择更新脚本

> ID：13091875
> 
> 赞同：0
> 
> 时间：2012-10-26T17:49:02.093
> 
> 标签：sql-server-2008

我需要您的支持。我想将其更改为更新语句，我想使用 PersonDeatl 的 Birthage 更新 E.Age 的所有空值。下面的脚本只是选择 .Table Employee 和 PersonDeatl 没有加入它们的键也不是 EmpRet.Thanks 伙计们

```
select distinct * from ((Select     
           E.EmployeeId,E.Address,E.City,E.Zip,E.State,E.Age
         from Employee E join
          EmpRet R
            on E.EmployeeId=R.EmployeeId
        where R.Dscription='Age not Qualify'  and E.Age is null)Ag inner join
       (select address,city,zip,state,BirthAge from PersonDeatl)Pd

          on ag.Address=Pd.Address and ag.City=Pd.City and ag.zip=Pd.Zip) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:03:56.143

You can try this.

```
With  EmpCTE ( Age, BirthAge ) as (
   SELECT E.Age, P.BirthAge
   FROM Employee  E  
   JOIN PersonDeatl P
   ON E.Address = P.Address
   AND E.City=P.City 
   AND E.Zip=P.Zip
   Where E.Age IS NULL
)

UPDATE EmpCTE 
SET Age = BirthAge 
```

# jquery - Jquery 锚链接事件

> ID：13091880
> 
> 赞同：0
> 
> 时间：2012-10-26T17:49:30.547
> 
> 标签：jquery

我有一个这样的 html

```
<a href="link.php" onClick="return false;">Click me</a>

$('a').click(function() {
var linked = "#"+$(this) .attr(href);
window.location=linked;
}) 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:53:41.883

改变

```
var linked = "#"+$(this) .attr(href); 
```

经过

```
var linked = "#"+$(this).attr("href"); 
```

**编辑**

试试这个

```
$('a').click(function(e) {
    e.preventDefault();
    var linked = "#"+$(this).prop("href");
    window.location.hash = linked;
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:51:12.243

如果我了解您要做什么，那么您根本不需要 JavaScript。只需更改`href`：

```
<a href="#link.php">Click me</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:51:57.157

我会先摆脱这`onClick="return false;"`部分，看看会发生什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T17:56:24.983

```
$('a').click( function( event ) {
    location.href = '#' + $(this).attr( 'href' );
    event.preventDefault();
    event.stopPropagation(); // sometimes useful
    return false; // sometimes useful
} ); 
```

你应该抑制触发的事件

# f# - F# 测量单位建模公制前缀（微、毫、纳米）

> ID：13091883
> 
> 赞同：7
> 
> 时间：2012-10-26T17:49:36.380
> 
> 标签：f#, units-of-measurement

根据这个问题：[F#](https://stackoverflow.com/questions/11333135/fractional-power-of-units-of-measures-in-f)中度量单位的分数幂，F# 中的度量单位不支持分数幂。

在我的应用程序中，有时考虑带有度量前缀的数据是有益的，例如在处理秒数时。有时我需要以毫秒为单位的结果，有时以秒为单位。

我目前正在考虑使用的替代方法是

```
[<Measure>] type milli
[<Measure>] type second

let a = 10.0<second>;
let b = 10.0<milli*second> 
```

这给了我：

```
val a : float<second> = 10.0
val b : float<milli second> = 10.0 
```

现在我想允许使用这两个操作进行计算。所以我可以做

```
let milliSecondsPerSecond = 1000.0<(milli*second)/second>

let a = 10.0<second>;
let b = 10.0<milli*second>

(a*milliSecondsPerSecond) + b 
```

这正是我想要的

```
val it : float<milli second> = 10010.0 
```

现在，这一切都很好而且很闪亮，但是当您想要支持多个单位和多个前缀时，它会很快失去控制。所以我认为要么有必要将其烘焙成一个更通用的解决方案，但不知道从哪里开始。我试过

```
let milliPer<'a> = 1000.0<(milli * 'a) / 'a> 
```

但这不起作用，因为 f# 抱怨并告诉我“非零常量不能有通用单位”......

由于我认为单位前缀是一个常见问题，我想以前有人已经解决了这个问题。有没有更惯用的方法在 F# 中做单位前缀？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T18:05:12.087

您将常数写`1000.0<(milli second)/second>`为每秒 1000 毫秒，但实际上（您可以将其作为代数简化）“milli”只是意味着您需要将任何单位乘以 1000 以获得没有“milli”前缀的单位。

因此，您可以简化`milliPer`(and `milliSecondsPerSecond`) 的定义，只需说：

```
let milli = 1000.0<milli> 
```

然后可以将它与其他类型的措施一起使用：

```
(10.0<second> * milli) + 10.0<milli second>   
(10.0<meter> * milli) + 10.0<milli meter> 
```

我认为这不应该在代码中的任何地方导致任何复杂性 - 在使用单位时这是一个非常好的模式（我见过人们使用`percent`类似的单位，但转换为 0.01）

# javascript - kickstarter 仪表板中使用了哪个图表库？

> ID：13091886
> 
> 赞同：0
> 
> 时间：2012-10-26T17:49:41.433
> 
> 标签：javascript, charts

我正在尝试查找 kickstarter 仪表板中使用的图表库：

[![在此处输入图像描述](../Images/a91d5ab9027615f490260ddbe3792f32.png)](https://i.stack.imgur.com/s8gEH.png)
[（来源：[alexgpr.com](http://www.alexgpr.com/wp-content/uploads/2012/08/Screen-Shot-2012-08-10-at-11.04.52-AM.png)）]

为什么？因为我需要一些我发现的许多库中没有的功能。

*   一边是钱，另一边是百分比。
*   一条平行于轴的水平线（如图像中的绿色线）
*   看起来漂亮又专业

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T18:13:42.503

我不能说他们使用哪个库，但它看起来可能是 raphael.js 或类似的。您还可以使用[http://raphaeljs.com/](http://raphaeljs.com/)制作一些很棒的动画它创建 SVG 图形并且在包括 IE6 在内的所有浏览器上都很棒

另外对于图表，请查看[http://g.raphaeljs.com/](http://g.raphaeljs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T13:54:04.677

它使用的库看起来像[http://www.chartjs.org/](http://www.chartjs.org/)

# .net - 修复 Gpg4Win PGP 加密二进制文件因使用 VB .NET 上传到 CoreFTP 服务器而损坏

> ID：13091888
> 
> 赞同：2
> 
> 时间：2012-10-26T17:49:47.053
> 
> 标签：.net, ftp, pgp, openpgp

这篇文章与之前关于使用 C# 将这些文件传输到 FTP 服务器时防止 PGP 二进制文件损坏的文章类似 (http://stackoverflow.com/questions/7353993/ftp-sharing-pgp-file-during-transfer -in-c-sharp），虽然我问的是不同的问题。

概括：

我已通过对所有 PGP 加密文件进行文本保护来修复 PGP 文件损坏的根源；但是，我有一堆 PGP 二进制文件，这些文件在实施此修复之前已加密并上传到我的 FTP 服务器。了解了用于将文件上传到 FTP 服务器的代码和用于管理 FTP 服务器的软件，是否可以修复损坏的 PGP 二进制文件以便可以解密和恢复它们？

详细信息：1）我有使用 Gpg4Win 加密的 PGP 加密文件，这些文件不是文本铠装（它们是二进制文件），这些文件是使用 VB .NET 代码（包括在下面）从 IIS 6.0 Web 服务器上传到 CoreFTP 服务器的。

2) 我没有这些文件的未加密副本。在上传到 CoreFTP 服务器之前，它们在网络服务器的内存中被加密。因此，我需要解密二进制 PGP 文件，否则文件中的数据将会丢失。

3) PGP 文件中的二进制文件已损坏，即使我有正确的 PGP 私钥，我也无法解密 Gpg4Win 中的文件。Gpg4Win 无法找到/读取加密二进制文件中的 PGP 数据。

4) 在上传到 CoreFTP 服务器之前，我能够成功解密更多最近的 PGP 加密文件，这些文件是文本保护的（二进制数据以 base64 表示法存储）。因此，解密问题很可能是由于文件损坏而不是 Gpg4Win 或我的 PGP 私钥/公钥对的任何问题。

5) 我尝试在 PGP 二进制文件上使用的几个二进制文件恢复程序说它们找不到文件数据并且无法修复二进制文件损坏。或者，它们不会对 PGP 二进制文件中包含的二进制数据进行任何更改。

用于上传 PGP 二进制文件的 VB .net 代码：

```
Public Function UploadFile(ByVal localFileName As String, ByVal FTPFilename As String, ByVal UseBinary As Boolean, ByVal uniqueName As Boolean, ByRef StatusDescription As String) As FtpStatusCode
    Dim request As FtpWebRequest = CType(FtpWebRequest.Create(FTPFilename), FtpWebRequest)
    request.Credentials = New NetworkCredential(Username, Password)

    If uniqueName Then
        request.Method = WebRequestMethods.Ftp.UploadFileWithUniqueName
    Else
        request.Method = WebRequestMethods.Ftp.UploadFile
    End If
    request.UseBinary = UseBinary

    Dim ff As New FileInfo(localFileName)

    Dim fileContents(Convert.ToInt32(ff.Length)) As Byte

    Using fr As FileStream = ff.OpenRead
        fr.Read(fileContents, 0, fileContents.Length)
    End Using

    Using writer As Stream = request.GetRequestStream
        writer.Write(fileContents, 0, fileContents.Length)
    End Using
    Dim response As FtpWebResponse = CType(request.GetResponse, FtpWebResponse)
    StatusDescription = response.StatusDescription

    Return response.StatusCode
End Function 
```

对于我的 FTP 服务器，我使用的是适用于 Windows 的最新版本的 CoreFTP。

响应 FTP LIST 命令时，CoreFTP 以 Unix 格式（而不是 MS-DOS 格式）返回文件信息，所以我想知道二进制损坏是否是从使用 MS 的 Windows 服务器传输二进制文件的结果-DOS 格式化二进制文件到使用 Unix 格式的 FTP 服务器。但是，我在打开/读取从我的网络服务器上传到 CoreFTP 服务器的非 PGP 二进制文件时没有遇到任何问题。

谢谢！艾萨克

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T14:51:42.880

看起来您的二进制文件是以文本模式传输的，它翻译了行尾和可能的其他非 ascii 字符。而且，腐败很可能是不可逆的。

# linux - 在编译 C 时使用旧版本的共享 linux 库

> ID：13091893
> 
> 赞同：0
> 
> 时间：2012-10-26T17:50:12.937
> 
> 标签：linux, ubuntu, shared-libraries, dynamic-linking, fann

我正在尝试使用 libfann 2.0.1 版而不是最新的 2.2.0 版，但不知道该怎么做。关于如何做到这一点的任何想法？

通常可以完美运行：

```
gcc fann_calculator.c -o run_fann_calculator -lfann -lm 
```

其中 fann_calculator.c 包含一个调用神经网络的程序。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T17:58:16.100

这取决于两个库所在的位置。如果它们安装在同一目录中（例如都安装在 中`/usr/lib/`），您可能会得到最年轻的。

我建议仔细阅读[ld.so(8)](http://www.kernel.org/doc/man-pages/online/pages/man8/ld-linux.so.8.html)和[ldd(1)](http://www.kernel.org/doc/man-pages/online/pages/man1/ldd.1.html)手册页。您当然可以跟踪加载了哪些库（例如使用`LD_DEBUG`环境变量）。不要忘记在库安装后适当地重新运行[ldconfig 。](http://www.kernel.org/doc/man-pages/online/pages/man8/ldconfig.8.html)

你也可以玩一些`LD_LIBRARY_PATH`把戏；例如，将其设置为并在您想要的精确库`$HOME/lib:/usr/lib`中安装适当的符号链接。`$HOME/lib/`例如，您可能会这样做

```
 ln -s /usr/lib/libfann.so.2.0.1 $HOME/lib/libfann.so.2
  export LD_LIBRARY_PATH=$HOME/lib:/usr/lib:/lib 
```

然后检查`ldd run_fann_calculator`您是否获得了预期的 [version of the]`libfann`库。

不要忘记阅读[程序库 Howto](http://www.tldp.org/HOWTO/Program-Library-HOWTO/)。您可能希望将适当的标志传递给[ld](http://sourceware.org/binutils/docs/ld/)，例如`-rpath`. 您可能需要使用 传递它们`gcc`，也许使用[Gcc 链接选项](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)，例如 `-Wl`

# java - jquery datatables - 一个数据表中的最大列数

> ID：13091898
> 
> 赞同：6
> 
> 时间：2012-10-26T17:50:55.283
> 
> 标签：java, jquery, jsp, jquery-plugins, datatables

您好我正在尝试使用 jquery datatbles 插件为具有大约 40 列/字段的 oracle 表开发 UI。我最多可以显示 18 列，但在那之后它就不起作用了。以前有没有其他人遇到过同样的问题？请在这方面给我建议，我对 jquery 很陌生。

```
`Sorry for that... 
```

当我尝试为我的 oracle 表创建 UI 时，当我将其配置为 18 列（任何 18 列）时，我可以看到我的 UI 运行良好。但是，如果我再添加一列并更新配置，我的 UI 将不会加载。

```
<script type="text/javascript">
     $(document).ready(function () {
       $("#reports").dataTable({
            "bServerSide": true,
            "sAjaxSource": "/databaseInterface/DataSource",
            "bProcessing": true,
            "sPaginationType": "full_numbers",
            "bJQueryUI": true,
            "aoColumns": [
                          {  "sName": "ID",
                             "bSearchable": false,
                             "bSortable": false,
                             "bVisible": false
                                 },
                  { "sName": "name" },
                  { "sName": "sname" },
                  { "sName": "address" },
                  { "sName": "city" },
                  { "sName": "post code" },
                  { "sName": "age" },
                  { "sName": "major" },
                  { "sName": "grade" },
                  { "sName": "Elect1" },
                  { "sName": "Elect2" },
                  { "sName": "Elect3" },
                  { "sName": "Elect4" },
                  { "sName": "Elect5" },
                  { "sName": "Assig1" },
                  { "sName": "Assig2" },
                  { "sName": "Assig3" },
                  { "sName": "Assig4" },
                  { "sName": "Assig5" }
                 ]
     }).makeEditable({
            "aoColumns": [
                          {},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{},{}
                      ]
                      });
    });
    </script> 
```

这是我的示例代码，它工作正常，我是否在最后添加 { "sName": "Status" }，并使用相应的值更新我的数据源，它没有在我的 UI 中显示任何内容。`

jquery 1.8、java 5 以及 jquery 可编辑数据插件

[我正在尝试像我正在使用的本网站数据表参考中](http://datatables.net/release-datatables/examples/basic_init/flexible_width.html)显示的数据表一样显示我的 oracle 表

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T18:42:31.267

问题很可能是您的服务器拒绝了具有超过一定数量字符的 GET 请求。默认情况下，DataTables 以 GET 形式发送服务器端处理请求。要更改为 POST，请使用 sServerMethod 选项 - [http://datatables.net/ref#sServerMethod](http://datatables.net/ref#sServerMethod)。

# restkit - RKClient 为零

> ID：13091899
> 
> 赞同：0
> 
> 时间：2012-10-26T17:51:02.680
> 
> 标签：restkit

这行代码：

```
 RKClient *client = [RKClient sharedClient]; 
```

为 .返回 nil `client`。

```
 RKLogConfigureByName("RestKit", RKLogLevelTrace); 
```

给出：

```
I restkit:RKLog.m:33 RestKit initialized... 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T01:31:58.580

您可能想要考虑使用 RKObjectManager，而不是。RKObjectManager 创建一个 RKClient，是序列化/反序列化对象的主要机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T19:44:20.353

好的，这是因为该方法只是交付共享客户端。在你使用这样的东西之前，这是零：

```
RKClient *client = [RKClient clientWithBaseURL:url]; 
```

==== 更新

正如@Dan 建议的那样，使用 RKObjectManager 是更好的方法。

# eclipse - Birt now showing up tables in create data set form

> ID：13091904
> 
> 赞同：0
> 
> 时间：2012-10-26T17:51:12.633
> 
> 标签：eclipse, birt

I am trying to create a data set (BIRT) in eclipse. I tested connection with the data source. It is successful. But while trying to create data set, data set form does not show up tables in data base.

I even tried firing query anyways, but eclipse freezes then.

Please suggest, if anyone has encountered similar problem.

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T07:18:54.307

I found the solution to the problem. BIRT needs Informix Jdbc driver to be installed in a particular way. So even though java code was able to read and write from Informix, BIRT was getting stuck.

I thought driver can not be a problem as java classes were working fine with the same drivers.

Hope this helps.

# jsf - JSF：无法在 ui:repeat 中的 h:inputText 中设置空值

> ID：13091910
> 
> 赞同：1
> 
> 时间：2012-10-26T17:51:46.170
> 
> 标签：jsf

Mojarra 2.1.6 / Glassfish 3.1.2

我有这样的东西

```
<ui:repeat var="item" value="#{bean.items}">
  <h:inputText value="#{item.longProperty}"/>
</ui:repeat> 
```

其中 Item 是具有 Long 属性的对象

```
public class Item { 
  private Long longProperty; // + getters/setters
} 
```

只要我将 longProperty 设置为非空/非空，它就可以正常工作。
当我这样做时，将忽略空输入并恢复旧值。

日期的类似结果。

如果我从 ui:repeat 中消除对 var/status 的引用，这没有什么区别。即使明确引用 #{bean.items[0].longProperty} 也会以同样的方式失败。

完全相同的 h:inputText 在 ui:repeat 之外可以正常工作，而 null/empty 值也可以正常工作。

此外，*在*ui:repeat 中，如果属性是字符串而不是需要转换的对象，则空字符串可以正常工作。

更奇怪的是：如果我在输入上放置一个 valueChangeEvent，我确实看到它`event.getNewValue()`在我期望的时候返回 null - 但是我的 setter 是用旧值调用的。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T15:13:48.057

原来它是一个带有 ui:repeat 的 Mojarra / JSF 实现错误

[http://java.net/jira/browse/JAVASERVERFACES-1721](http://java.net/jira/browse/JAVASERVERFACES-1721)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:03:53.883

现在复制，在这里（由罗杰基坦）：

[http://java.net/jira/browse/JAVASERVERFACES-2717](http://java.net/jira/browse/JAVASERVERFACES-2717)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T17:38:41.337

更改`<ui:repeat>`为`<a4j:repeat>`。

```
<a4j:repeat var="item" value="#{bean.items}">
  <h:inputText value="#{item.longProperty}"/>
</a4j:repeat> 
```

更多信息：[Richfaces a4j:repeat](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_repeat.html)。

[请参阅Problem with ui:repeat and NULL values in JSF 2.x 中](http://blog.oio.de/2013/01/29/problem-with-uirepeat-and-null-values-in-jsf-2-x/)有关该`<ui:repeat>`错误的更多信息。

# c# - 如何传递参数来声明泛型类型列表？

> ID：13091911
> 
> 赞同：3
> 
> 时间：2012-10-26T17:51:47.687
> 
> 标签：c#, list, generics, types

```
private void listHelper (int listSize, ref Object taker, Object giver, Type type)
    {
        if (listSize == 0)
        {
            taker = null;
        }
        else
        {
            taker = new List<type>(listSize);
            giverType tempGiver;
            for (int i = 0; i < listSize; i++)
            {
                type= new type();
                tempGiver.value = giver[i];
                taker.Add(tempGiver);
            }
        }
    } 
```

这是我的代码。我试图将类型参数传递给私有方法来声明泛型类型列表......但我不知道该怎么做。

参数接受器是一个列表。在这种情况下，接受者正在存储一个通用类型的对象。参数类型是泛型的类型。

我已经在互联网上搜索了一段时间。我仍然不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-26T17:54:56.887

尝试制作一个通用方法：

```
private void listHelper<T> (int listSize, out List<T> taker, IList<T> giver)
{
    if (listSize == 0)
    {
        taker = null;
    }
    else
    {
        taker = new List<T>(listSize);
        for (int i = 0; i < listSize; i++)
        {
            taker.Add(giver[i]);
        }
    }
} 
```

另外我建议使用`out`而不是`ref`（就像我所做的那样），因为您总是`taker`在返回之前分配一个值。这允许调用代码在调用您的方法之前不必分配一个虚拟值。

或者更好的是，您应该只*返回 List*！

```
private List<T> listHelper<T> (int listSize, IList<T> giver)
{
    List<T> taker;
    ...
    return taker;
} 
```

* * *

请注意，如果您所做的所有方法都是将所有元素从`giver`to复制`taker`（也就是说，指定`listSize`实际上只是编码 C 的一种保留习惯，并且始终等于 中的元素数量`giver`），您可以替换`giver.Count`或只是这样做：

```
private List<T> listHelper<T> (IList<T> giver)
{
    return giver.Any() ? giver.ToList() : null;
} 
```

当然，如果`listSize`真的是“要返回的元素个数，从前面开始`giver`”，你可以这样做：

```
private List<T> listHelper<T> (IList<T> giver, int numElements)
{
    return giver.Any() ? giver.Take(numElements).ToList() : null;
} 
```

* * *

实际上，进一步阅读您的问题，您似乎想要实例化某种类型的新对象并将*其`value`属性设置为`giver`*. 那么这个怎么样（当然我假设很多关于你的`taker`对象并且你有一个`ITaker<U>`指定字段/属性的接口`public U value`）：

```
private List<T<U>> listHelper<T, U> (IList<U> giver) where T : ITaker<U>, new()
{
    return giver.Any() ? giver.Select(g => new T<U>() {value = g}).ToList() : null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:55:50.053

我猜它是这样的：

```
private void ListHelper<T>(int listSize, ref object taker, object giver)
{
    ...
    List<T> list = new List<T>();
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T17:54:52.090

您应该创建一个通用方法。泛型在 C# 中充当模板。该方法在声明时被绑定。

```
public void ListHelper<T>//...

    List<T>  my list//... 
```

# meteor - Meteor：如何访问嵌套模板中的父属性？

> ID：13091914
> 
> 赞同：12
> 
> 时间：2012-10-26T17:52:10.843
> 
> 标签：meteor

我开始使用 Meteor，并调整[todo 示例](http://meteor.com/examples/todos)以包含嵌套标记组。我有以下 HTML，它输出每个标签组的每个名称，以及每个组中的标签列表：

```
 <template name="tag_filter">
    {{#each tag_types }}
      {{ tag_name }}
      {{#each values }}
        <div data-taggroup="{{ ../tag_name }}">
        {{ name }} ({{ count }})
        </div>
      {{/each}} 
    {{/each}}
</template> 
```

我的问题是：如何调整事件处理程序以点击标签以访问父组的值`tag_name`？（即来自外部每个循环的数据）。

目前我有下面的代码，但`this`object 只允许我访问`name`and `count`。

```
Template.tag_filter.events({
  'mousedown .tag': function () {
    console.log('tag mousedown', this);
    // How do I get the value of tag_name?
  }
}); 
```

如您所见，我使用[Handlebars 父路径](http://handlebarsjs.com/#paths)来添加`data-taggroup`包含名称的属性，但我不确定如何从事件处理程序中访问它。

我认为[这个问题](https://stackoverflow.com/questions/10654255/nested-templates-finding-parent)是相关的，但我不理解 OP 的解决方案（部分原因是我没有使用 Coffeescript）。还有一个相关的[封闭流星问题](https://github.com/meteor/meteor/issues/147)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T04:34:19.993

我找到了访问父数据的解决方案：

```
Template.nestedTemplate.events({
    'click a.class':function(event,template){
        var parentID = template.data._id;
        console.log(parentID);
    }
}); 
```

.events 处理程序函数接收两个参数：event，一个包含事件信息的对象，以及 template，一个模板实例，用于定义处理程序的模板。我花了很长时间才弄清楚这一点。不要使用车把解决方案，它会显示您的数据！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T21:33:15.327

我不确定您是否可以获得父模板数据，但在您的事件处理程序中您可以访问 DOM 元素：*event.currentTarget*将获得单击的元素。然后只需使用 jQuery 来访问属性。如果需要，*event.currentTarget.parentNode*将获取 DOM 中的父元素。

例如：我不知道你把标签类放在哪里，但假设它是你的 div 的类，其中定义了 data-taggroup。然后您可以使用以下方法获取标签名称：

```
$(event.currentTarget).attr('data-taggroup') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T10:23:57.007

```
"click selected":function(e){
    // this._id
   var doc_id = $(e.currentTarget).parent().parent().attr("uid")
   console.log(doc_id) 
},
//specify the each id in the div above the nearest #each
//this will work in events but not in helpers` 
```

# java - JBoss热部署时出错

> ID：13091915
> 
> 赞同：2
> 
> 时间：2012-10-26T17:52:15.083
> 
> 标签：java, jboss, hotdeploy

我正在使用 JBoss 作为应用程序服务器的 Java/J2EE 项目。

我们使用 Jenkins 构建我们的战争并在服务器中进行热部署。有时，我们在 JBoss 中遇到一些内存不足的错误。

我想知道热部署是否对此负责。另外，想知道热部署是否比正常的手动启停部署有任何陷阱。

有人可以提供一些有价值的意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T19:04:02.887

我同意有关调整堆 / permgen 空间的答案，尽管如果没有关于允许多少内存、您正在使用的内容等的更多信息，很难具体说明。

> 另外，想知道热部署是否比正常的手动启停部署有任何陷阱。

当您在部署之间手动启动和停止服务时，您可能会有点草率地清理您的 Web 应用程序 - 没有人会知道。

当您进行热部署时，您的 servlet 上下文的前一个实例将被销毁。为了减少 OutOfMemory 异常的频率，您要确保在发生这种情况时，您自己进行清理。尽管对于类加载器 PermGen 内存问题您无能为力，但您不希望通过引入额外的内存泄漏来使问题复杂化。

例如 - 如果您的 war 文件启动了任何工作线程，则需要停止这些工作线程。如果在 JNDI 中绑定对象，则该对象应该是未绑定的。如果有任何打开的文件、数据库连接等，这些应该被关闭。

如果您使用的是像 Spring 这样的 Web 框架 - 其中大部分已经处理好了。Spring 注册了一个 ServletContextListener，它会在 servlet 上下文被销毁时自动停止容器。但是，您仍然需要确保`init`在`destroy`.

如果您正在做一个手工制作的 servlet，那么您可能希望在您的 web.xml 文件中注册一个 ServletContextListener 的实现，并在该实现中`contextDestroyed`清理所有资源。

顺便说一句 - 您应该在答案中包含确切的 OutOfMemory 异常。如果它说类似`java.lang.OutOfMemoryError: PermGen space`，那么它可能是类实例的问题，您无能为力。如果是，`java.lang.OutOfMemoryError: Java heap space`那么可能是您的应用程序中的内存没有被清理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:12:27.447

您应该特别增加堆空间 Perm Space

```
-Xms<size>        set initial Java heap size
-Xmx<size>        set maximum Java heap size
-XX:MaxPermSize   set maximum Permanent generation size 
```

你可以`JAVA_OPTS`在你的 jboss中设置它`run.sh`或者`run.bat`像：

`-Xms256m -Xmx1024m -XX:MaxPermSize=512m`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T17:57:23.430

热部署不会清除 Perm Gen 中先前加载的 Class 实例。它会重新加载 Class 实例。一个小小的谷歌让我回到 SO[是什么让热部署成为一个“难题”？](https://stackoverflow.com/questions/660437/what-makes-hot-deployment-a-hard-problem)

# javascript - 获取特定数据表页面上的行数？

> ID：13091916
> 
> 赞同：3
> 
> 时间：2012-10-26T17:52:19.393
> 
> 标签：javascript, jquery, datatables

我正在尝试获取当前 dataTables 页面上的行数。如果我这样做：

```
alert($('.tableViewer tbody tr').length) 
```

它给了我一个不准确的行数（我认为它添加了当前页面和最后一个页面？）。

无论如何，我只是想在我实际所在的页面上获得行数。有谁知道如何做到这一点？

这是我的删除按钮：

```
function fnDelete(elem){
    if (selected.length>0) {
        var c;
        c = confirm('Are you sure you want to delete the selected ${displayTableName}?');
        if (c) {
            // Create delete url from editor url...
            var deleteURL = (urlstr.substring(0, urlstr.lastIndexOf('/') + 1)) + "delete.do";
            alert($('.tableViewer tbody tr').length)
            deleteRecord(deleteURL,selected[0]);

            alert($('.tableViewer tbody tr').length)
            if ( $('.tableViewer tbody tr').length === 1) {
                setTimeout(function() { oTable.fnPageChange('last'); }, 100);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-26T17:59:05.483

`tr`元素可能在页面上，但不可见。试试这个！

```
$('.tableViewer tbody tr:visible').length 
```

# safari - 可访问背景页面的 Safari 扩展选项页面

> ID：13091917
> 
> 赞同：2
> 
> 时间：2012-10-26T17:52:24.057
> 
> 标签：safari, cross-platform, safari-extension

我正在开发一个跨平台的浏览器扩展，并且我所有的代码都基于 Chrome 的方式来做这件事。我指望背景页面可以从选项页面访问，这在 Safari 扩展中是不可能的（因为没有选项页面之类的东西）。您*只能*`safari.extension.globalPage.contentWindow`从扩展弹出窗口和后台页面本身访问。

现在，我有一个选项页面，它是扩展包中的一个 html 页面，到目前为止，我还没有找到 Safari 赋予它扩展“权限”的方法。我最接近的是添加仅在选项页面上添加的内容脚本。这似乎有点傻，因为 html 页面本身在扩展包中？！

其他人建议使用异步乒乓式`message`事件处理程序，甚至是`canLoad`-机制（“仅”能够在-事件中运行`beforeload`）。我已经能够`canLoad`通过伪造来破解同步消息传递的机制`BeforeLoadEvent`：

```
// Content script (run from anywhere)
var result = safari.self.tab.canLoad(new BeforeLoadEvent, "data")
-> "return value"

// Background page
safari.application.addEventListener('message', function(e) {
    if ( e.name === "canLoad" )
        e.message = "return value";
}, true); 
```

这是一个黑客，但它的工作原理。但是，我被消息传输序列化所困扰，因为我需要能够从后台页面访问对象上的方法和数据。有没有办法解决？

可能可行但我不知道是否可行的可能方法：

*   从背景页面访问 options-page `window`-object。那可能吗？
*   消息传递，需要绕过消息序列化
*   我可以将对象附加到选项页面并从选项页面获取的任何共享/全局对象？
*   让 Safari 从内容脚本沙箱外部运行 options.html 页面？它适用于 Chrome，因为它们都在扩展包中。safari 也不这样做，这很烦人。
*   从弹出窗口中运行选项页面。这是有希望的，但它会使 safari 崩溃（这是非常有希望的！）。然而，从它的外观来看，它只是与我的 options.html 页面中的 CSS 动画有关。最大的问题是它必须能够打开 OAuth2 弹出窗口，但由于能够以编程方式打开弹出窗口，这可能不是问题。但是，此选项是最现实的，但我宁愿在新选项卡中打开它。

任何建议和骇人听闻的解决方法都会有帮助。

# java - Facelets 中 ui:composition 和 ui:decorate 的区别

> ID：13091927
> 
> 赞同：15
> 
> 时间：2012-10-26T17:53:07.973
> 
> 标签：java, jsf, jakarta-ee, jsf-2, facelets

Facelets之间`ui:composition`有什么区别？`ui:decorate`两者似乎都支持`ui:define`作为子标签。在什么情况下你会使用这些？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T19:02:40.173

标签之外的任何内容`<ui:composition>`都将被忽略。对于 ，这不是真的`<ui:decorate>`，因此作为“模板中的模板”是有益的。

通过查看以下答案中的一些真实示例，可能会更好地理解其意义：

*   [ui:decorate 和 ui:include 之间真正的概念区别是什么？](https://stackoverflow.com/questions/10778068/what-is-the-real-conceptual-difference-between-uidecorate-and-uiinclude)
*   [是否可以在 JSF 2 中使用带有复合组件的模板？](https://stackoverflow.com/questions/9817851/is-it-possible-to-use-template-with-composite-component-in-jsf-2)
*   [有没有办法在不构建整个项目的情况下运行 JSF 页面？](https://stackoverflow.com/questions/10504190/is-there-a-way-to-run-a-jsf-page-without-building-the-whole-project/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T13:31:01.257

正如文档所说：[http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/ui/decorate.html](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/ui/decorate.html)装饰器标签与组合物相同，唯一的区别就是 ui:decorate 不会忽略标签之外的所有内容，这在您想要制作页面区域或部分的模板时很有用。

例如，当您想要制作应用程序总体外观的模板时，ui:composition 很有用。由于它删除了标记之外的内容，因此模板属性真正定义了应用程序区域的总体外观。

使用装饰标签，由于标签外的内容不会被删除，您可以制作内容区域内的部分的模板。

一个示例可以是使用组合模板来定义页眉、菜单、页脚和内容部分。

然后在内容部分中，您可以在制作表单时使用装饰器标签，然后使所有表单具有相同的外观（例如标题、组件区域和按钮区域）。

# git - Git 删除历史提交

> ID：13091928
> 
> 赞同：6
> 
> 时间：2012-10-26T17:53:16.860
> 
> 标签：git

我有一个 3 年多的大型存储库 git，我想删除一年多前的更改历史记录。这可能吗？可以使用 git rebase 但如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:10:11.970

[调查这篇文章](http://git-scm.com/2010/03/17/replace.html)中提到的黑魔法[`git replace`](http://www.kernel.org/pub/software/scm/git/docs/git-replace.html)，来自[*Pro Git*](http://git-scm.com/2010/03/17/replace.html)[书中](http://git-scm.com/2010/03/17/replace.html)，它以你的确切情况为例。基本上，如果您可以在历史记录中找到要充当新根的点，则可以将其替换为没有父级的提交，就好像它是凭空创建的一样。您甚至可以将原始树存储在一台机器上，以便在您再次需要时轻松恢复历史记录。[](http://git-scm.com/2010/03/17/replace.html)

 *请注意`git rebase`（和`git replace`，就此而言）的一个问题是您想要重写整个树，包括分支，因此它们都指向不同的提交。这也会导致团队中的其他人难以合并他们的更改，因为所有父级的 SHA 都与以前不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:02:34.583

Deleting history probably won't fix your problem. Chances are, at some point in time, a large file was committed to the repository and subsequently removed.

I would take a look at [Find files in git repo over x megabytes, that don't exist in HEAD](https://stackoverflow.com/questions/298314/find-files-in-git-repo-over-x-megabytes-that-dont-exist-in-head).*

# git - Github - 我切换了帐户，现在我无法推送，因为我的用户名错误

> ID：13091931
> 
> 赞同：4
> 
> 时间：2012-10-26T17:53:32.877
> 
> 标签：git, github, account

所以我现在是 github 上的“jononomo”。然而，一年前，我是“zononomo”。我暂时退出软件并在此期间购买了一台新笔记本电脑。然后我回来并在 Github 上以“jononomo”的句柄创建了一个新帐户，现在我正在尝试在我的两台笔记本电脑之间同步我的 dotfiles。在我的新笔记本电脑上，我创建了一个 git 存储库并将其推送到 github，可以在“jononomo”帐户下查看它。然后我去了我的旧笔记本电脑并克隆了这个存储库。一切都按预期工作。

然后我对旧笔记本电脑上的点文件进行了一些更改，现在我想将这些更改推送到 github，以便我可以将它们拉到我的新笔记本电脑上。问题是当我运行命令时：

```
git push origin master 
```

我收到错误消息：

```
ERROR: Permission to jononomo/.dotfiles.git denied to zononomo. 
```

我做的第一件事就是把旧的 SSH 密钥`~/.ssh/id_rsa`和`~/.ssh/id_rsa.pub`. 然后我生成了新的 SSH 密钥并将我的新公钥添加到我的 jononomo github 帐户中。但这并没有解决问题。如果我运行命令：

```
ssh -T git@github.com 
```

我得到回应：

```
Hi zononomo! You've successfully authenticated, but GitHub does not provide shell access. 
```

接下来，我按照这里给出的解决方案：[https](https://stackoverflow.com/a/8152291/1701170) ://stackoverflow.com/a/8152291/1701170 这个人建议我创建一个`~/.ssh/config`包含以下内容的文件：

```
Host github-jononomo
    User git
    Hostname github.com
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/id_dsa.pub 
```

然后他建议我运行命令：

```
git remote set-url origin git@github-jononomo:jononomo/.dotfiles.git 
```

我试过了，但它并没有解决我的问题。我仍然收到消息：

```
ERROR: Permission to jononomo/.dotfiles.git denied to zononomo. 
```

顺便说一下，my`.gitconfig`有以下内容：

```
[user]
    name = Jon Crowell
    email = me@myemail.com
[github]
    user = jononomo
    token = 2a18a7235746324aefec34b234aa343a
    email = me@myemail.com
[credential]
    helper = osxkeychain 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T19:26:37.237

我通过以下步骤使其工作：

首先我的`~/.ssh/config`文件如下：

```
Host github-jononomo
    HostName github.com
    User git
    IdentityFile  ~/.ssh/id_rsa
    IdentitiesOnly yes 
```

其次，我运行了命令`git remote set-url origin git@github-jononomo:jononomo/.dotfiles.git`

三、我跑了命令`ssh -T git@github.com`，得到了结果`Hi jononomo! You've successfully authenticated, but GitHub does not provide shell access.`

第四，我登录了我的旧 github 帐户，删除了 SSH 密钥并彻底删除了该帐户。

非常感谢 VonC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T18:31:49.397

zononomo？GitHub 不应该再将您识别为 zononomo。
也许您有一个 ssh 代理来提供您的旧密钥？

按照“[在终端上切换 Github 帐户时遇到问题](https://stackoverflow.com/questions/7548158/having-trouble-switching-github-accounts-on-terminal)”中的建议，添加以下行：

```
 IdentitiesOnly yes 
```

到你的配置文件，看看 GitHub 是否还在使用那个旧的 id。

> 但是我仍然得到

```
 ssh: Could not resolve hostname github: nodename nor servname provided, or not known error 
```

要解析的“ `hostname`”必须与`Host`配置文件的条目匹配。

如果该`Host`条目是 github-jononomo，那么您也必须在 ssh 地址中使用它：

```
git remote set-url origin github-jononomo:jononomo/.dotfiles.git 
```

# iphone - 自定义 uibarbuttonitem 图像与背景混合

> ID：13091954
> 
> 赞同：1
> 
> 时间：2012-10-26T17:55:11.957
> 
> 标签：iphone, ios, xcode, ipad

我正在为导航栏制作自定义 UI，并且我有一个与这篇文章中提出的问题完全相同的问题

[UIBarButtonItem 上的自定义背景/透明背景？](https://stackoverflow.com/questions/3081203/custom-background-transparent-background-on-uibarbuttonitem)

在 StoryBoard 中，我尝试了各种组合以使我的 UIbarbuttonitem 着色为透明或清晰的颜色，但我仍然看到这个丑陋的黑色按钮（请参阅 + 符号）。如何实现透明效果，让按钮看起来与背景融为一体？

我的截图

![在此处输入图像描述](../Images/1cd809b2157562a43e7f31245c521255.png)

其他一些应用截图。看看这看起来多漂亮？！

![在此处输入图像描述](../Images/7d5ce8493628ffb8af678a95dfa4d212.png)

请注意，+ 图像是我自己的自定义 png img，大小为 20 x 20 像素，具有透明/空白背景。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-26T18:07:48.323

您可以使用 iOS 5 中引入的新外观 API 来实现这一目标以及更多功能。

基本上，您只需为 UI 设置一次外观，它就会反映在整个程序中。

这是一个示例`UIBarButtonItem`：

```
// You can also use stretchable images
UIImage *image = [[UIImage imageNamed:@"myCoolBarButton.png"]  resizableImageWithCapInsets:UIEdgeInsetsMake(0, 5, 0, 5)];
[[UIBarButtonItem appearance] setBackgroundImage:image forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

如果您不能使用 iOS 5，那么您必须像这样以编程方式构建它们：

```
// Create a custom button with an image
UIImage *image = [UIImage imageNamed:@"myCoolBarButton.png"];
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:image forState:UIControlStateNormal];
button.frame = CGRectMake(0.0, 0.0, image.size.width, image.size.height);

// Create a custom UIBarButtonItem with the button
UIBarButtonItem aBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:aButton]; 
```

无论如何，这里有一些关于外观主题的好教程的链接

[iOS 5 中的用户界面自定义](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

[如何使用新的 iOS 5 外观 API 让您的应用脱颖而出](http://mobileorchard.com/how-to-make-your-app-stand-out-with-the-new-ios-5-appearance-api/)

编辑：为了澄清起见，使用自定义图像比使用颜色、渐变和透明度要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:04:19.480

你不能用色调来做到这一点。您必须同时设置导航栏的 backgroundImage 和栏按钮项的 backgroundImage，以便它们根据需要进行协调。

绘制条形按钮项目的背景图像时，您可能必须绘制*整个*按钮，包括圆角矩形轮廓和圆角矩形轮廓的阴影，但这并不难，一旦你完成了它就可以重用永远的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:06:38.247

我认为您带有 + 符号的 png 图像不包含 alpha 通道。我有透明的图像，它对我来说非常好。

# git - Idea to mirror an svn to git

> ID：13091955
> 
> 赞同：2
> 
> 时间：2012-10-26T17:55:15.780
> 
> 标签：git, svn, git-svn, subgit

Today, at my work we host our source code at a public svn repository that we don't admin access. Now, we want to use git (github) to host our source. For some internal reasons, the svn repository we use must mirror the git one.

Apparently, Subgit is the best tool to do this work, because the svn <-> git is very smooth and stress-free (what it really seems to be according to my tests). So, the layout I've been thing is this one:

svn-repo <- subgit-repo <- github <-> local git-repo from each developer.

The svn-repo will be read-only, i.e., it'll be only possible to commit using git.

Reading the Subgit blog I saw this [post](http://blog.subgit.com/readonly-subversiongit-mirror-with-subgit-and-svnsync/). In this post, the svnsync is used to synchronize the subgit-repo with the svn-repo, but the synchronization is one-way only, from svn-repo to subgit-repo :(

So, I've discovered svnadmin dump and load and I can use them to keep svn-repo synchronized with the subgit-repo. For example:

svnadmin dump --incremental subgit-repo | svnadmin load svn-repo

My question is: Is it a good idea to use svnadmin dump and load to keep my repositories synchronized?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T20:35:21.390

Let's split the problem as follows:

*   Remote synchronization of Subversion repositories;
*   Synchronization of Git repositories, when one of them is hosted on GitHub.

## Remote synchronization of Subversion repositories.

1.  Using svnsync.

    > So, I've discovered svnadmin dump and load and I can use them to keep svn-repo synchronized with the subgit-repo.
    > 
    > svnadmin dump --incremental subgit-repo | svnadmin load svn-repo

    Unfortunately you cannot run `svnadmin load svn-repo` unless you have admin access to svn-repo. But you can try to use svnsync instead:

    ```
    $ svnsync init svn-repo subgit-svn-repo
    $ svnsync sync svn-repo 
    ```

    This way you sync changes from subgit-svn-repo to svn-repo *remotely*. Please notice that in your question you've pointed out the way to sync from svn-repo to subgit-svn-repo, but in my example I've shown this works in opposite direction as well.

    There's one issue with that approach though: there should be a `pre-revprop-change` hook in svn-repo. That means you still have to access svn-repo locally to enable the hook. Fortunately, that's a common case when administrators enable such hooks. Hope that holds for you, too.

    You may find the detailed HOW-TO in [this blog post](http://blog.subgit.com/git-mirror-of-remote-svn-repo/).

2.  Using [SubGit 2.0](http://subgit.com).

    Right now we have a working prototype of SubGit 2.0 that enables read-write mirror of Subversion and Git repositories located on different hosts. One has to have admin access to Git repository *only*, so no need to modify Subversion repository anyhow.

    Currently it works like this:

    ```
    $ git init --bare git-repo
    $ subgit configure --svn-url svn-repo git-repo
    $ subgit install git-repo 
    ```

    At this moment SubGit installs `pre-receive` and `post-receive` hooks into git-repo that automatically synchronize incoming changes with remote svn-repo.

    We're very close to publishing the very first EAP build with this functionality. And we encourage you to test the build as soon as it is ready. Until that moment there's only `svnsync` option, as far as I know.

## Git synchronization with GitHub

From your question it's still no clear how are you going to synchronize changes of subgit-git-repo with github-repo.

I'd like to notice that one has to *push* changes into subgit-git-repo in order to synchronize them with subgit-svn-repo.

Basically your team may work with github repository only, and someone will manually push all the changes to SubGit-controlled Git repository:

```
$ git remote add github github-repo
$ git remote add subgit subgit-git-repo
$ git pull github
$ git push subgit 
```

Or one can setup a cron job to periodically push changes to SubGit.

# modal-dialog - 如何在 iOS6 中关闭模态视图控制器

> ID：13091956
> 
> 赞同：0
> 
> 时间：2012-10-26T17:55:18.640
> 
> 标签：modal-dialog, viewcontroller

> **可能重复：**
> [dismissModalViewControllerAnimated 已弃用](https://stackoverflow.com/questions/12445190/dismissmodalviewcontrolleranimated-deprecated)

我有 2 个视图控制器，一个是游戏，第二个只是“关于”屏幕。当有人进入关于屏幕 - 作为模式视图控制器呈现时 - 我如何让他们关闭视图控制器以返回第一个屏幕？

我可以通过 push segue 来做到这一点，但这会导致我的游戏“重新加载”。

以下代码似乎可以工作，但 XCode 警告它已被弃用。

```
[self dismissModalViewControllerAnimated:YES]; 
```

这样做的新方法是什么？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:59:15.723

尝试这个

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

# exception - WinJS/IE 10 IndexedDB 使用版本 0 打开时抛出不正确的异常

> ID：13091959
> 
> 赞同：2
> 
> 时间：2012-10-26T17:55:24.863
> 
> 标签：exception, w3c, winjs, indexeddb, internet-explorer-10

根据[indexedDB 的 w3 规范](http://www.w3.org/TR/IndexedDB/#database-api)`indexedDB.open`的最新版本，版本为 < 1的调用例如`window.indexedDB.open('somename', 0)`应该具有以下行为：

> DOMException TypeError version 的值为 0（零）或负数。

但是，我注意到 WinJS 似乎抛出了 type 的错误异常`InvalidStateError`。

我是否误解了 w3 规范，或者这是（我假设它是 IE10 引擎）实现中的缺陷？

我之所以这么说，是因为我花了一段时间才`InvalidState`使用无效版本号将我看到的错误 () 与我的代码联系起来——希望其他人能够避免我的错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T05:40:05.507

您无法打开版本为 0 的数据库。它至少需要为 1 或更高版本。规范说：

> 首次创建数据库时，其版本为 0。

因此，当您尝试打开尚不存在的数据库时，将创建它并获取版本 0。创建数据库后，将调用 onupgradeneeded 方法，以便您可以定义结构。在这里，您将看到旧版本为 0，新版本为提供的版本或 1（如果您没有提供版本。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T19:02:25.823

我对 IE10 也有同样的问题。我所做的是使用前缀“msIndexedDB”并且...... open 函数将 DB 名称作为 ONLY 参数。因此，他们已恢复使用已弃用的 open 版本。我不知道为什么这对他们来说有很好的软件工程意义，因为它对我来说几乎没有。

# android - 按后退按钮我想拒绝 android 呼叫

> ID：13091962
> 
> 赞同：2
> 
> 时间：2012-10-26T17:55:43.050
> 
> 标签：android, broadcast

我有一个 BroadcastReceiver，我知道如何拒绝来电。但是当我按下后退按钮时，我需要帮助拒绝来电，因为我的代码中有某种错误......

```
public class CallReceiveD extends BroadcastReceiver {
    private ITelephony telephonyService;
    public String phoneNumber;
    public Bundle extras;
    public TelephonyManager tm; 
    public Intent i;

    @Override
    public void onReceive(Context context, Intent intent) {
        i=intent;
        extras = intent.getExtras();
        if (extras != null) 
        {
            String state = extras.getString(TelephonyManager.EXTRA_STATE);

            if (state.equals(TelephonyManager.EXTRA_STATE_RINGING))
            {
                phoneNumber = extras.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);
                Toast toast= Toast.makeText(context,phoneNumber, Toast.LENGTH_LONG);toast.show();
                tm = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE); 
                try { 
                    Class c = Class.forName(tm.getClass().getName()); 
                    Method m = c.getDeclaredMethod("getITelephony"); 
                    m.setAccessible(true);

                    telephonyService = (ITelephony) m.invoke(tm);
                    // telephonyService.endCall(); 
                } catch (Exception e) { 
                    e.printStackTrace(); 
                }
            }
        }
    }

    //@Override
    public void onBackPressed() {
        telephonyService.endCall(); 
        return;
    }   
} 
```

我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="denza12Des.call"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="14" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".Call2BackActivity" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".CallReceiveD">
            <intent-filter android:priority="99999">
                 <action android:name="android.intent.action.PHONE_STATE"/>
            </intent-filter>
        </receiver>
      </application>
    <uses-permission android:name="android.permission.READ_CONTACTS"/>
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.CALL_PHONE"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.MODIFY_PHONE_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:07:15.540

据我所知，您不能使用您用来拒绝呼叫的后退按钮 onreceive 事件，但是后退按钮按下功能我可以，如果您在广播接收 onReceive 之外使用它，它应该可以工作

# java - ReentrantReadWriteLock 中的读写锁是否有某种关联？

> ID：13091967
> 
> 赞同：6
> 
> 时间：2012-10-26T17:55:56.630
> 
> 标签：java, java.util.concurrent, reentrantreadwritelock

请向我解释一下合同。我无法弄清楚是否包含在`ReentrantReadWriteLock`某种相关的两个锁？或者这些只是两个普通锁的捆绑？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T11:35:18.603

它允许多个线程同时读取资源，但需要线程等待排他锁才能写入资源。

规则是：

*   多个读者可以同时共享资源。如果你有一个读锁，你可以安全地获得另一个读锁。共享锁的最大计数为 1111 1111 1111 1111
*   如果你有读锁，你就不能获得写锁
*   如果您有写锁，则无法在任何其他线程中获取读锁。
*   当任何其他线程中没有作者处于活动状态时，读者可以访问该资源。
*   如果你有一个写锁，你可以在同一个线程中获取另一个写锁。一个线程可以拥有的排他锁的最大数量是 1111 1111 1111 1111
*   当没有其他读取器或写入器（来自不同线程）处于活动状态时，写入器可以访问资源。
*   喜欢作家胜过读者。也就是说，如果写入者正在等待锁，则不允许来自其他线程的新读取者访问该资源。现有读者可以继续使用该资源，直到他们释放锁。这可以防止所谓的“作家饥饿”。
*   允许从写锁降级为读锁，方法是获取写锁，然后是读锁，然后释放写锁。但是，无法从读锁升级到写锁。

在内部，锁定状态 (c) 由一个 int 值维护。在这种情况下，由于我们有读锁和写锁，所以逻辑上分为两个缩写：较低的表示独占（写入器）锁持有计数，较高的表示共享（读取器）持有计数。

假设当前锁的状态是 c= xxxx xxxx xxxx xxxx yyyy yyyy yyyy yyyy 那么读锁的数量是高位 xxxx xxxx xxxx xxxx

写入器锁的数量是低位 yyyy yyyy yyyy yyyy

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:59:02.550

如果线程正在等待读锁，则它是共享的，但是当线程想要获取写锁时，仅允许该线程进行与互斥相同的访问。

所以任一个操作都是允许的。`if lock is held by readers and thread request write lock no more readers are allowed to acquire read lock until thread which has acquired write lock release it`.

# ios - 本地推送通知徽章编号

> ID：13091968
> 
> 赞同：0
> 
> 时间：2012-10-26T17:55:58.680
> 
> 标签：ios, uilocalnotification

我有一个应用程序，用户可以在其中查看各种事件。如果他们签到活动，将在活动开始前 24 小时设置本地通知以提醒用户。我的问题是，我有`setApplicationIconBadgeNumber`应用程序，我将它设置为当时的徽章编号，加一。问题是说有两个事件同时发生，徽章编号应该是 2 而不是 1，我如何告诉 iOS 适当地设置徽章编号？由于这都是本地通知并且发生在特定时间，因此很难在代码中跟踪......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T01:29:12.673

我同意很难在您的代码中跟踪，特别是因为使用本地通知，当这一切发生时，您的代码可能没有机会实际执行。似乎 API 中的疏忽可以通过特殊的“增加徽章编号”事件来修复。

一种解决方案是：每次创建新`UILocalNotification`通知时，查看所有现有通知的列表，并找出每个通知应具有的正确徽章编号（例如，基于每个通知的 fireDate）。

因此，使用`UIApplication`'s`scheduledLocalNotifications`来获取现有应用程序的数组。根据需要对它们进行排序以找出每个对象的正确徽章编号，然后使用正确的徽章编号更新每个对象。将（修改的）数组设置回`scheduledLocalNotifications`属性以注册更新的值。

每当一些不相关的外部事件改变徽章计数器时，做同样的事情，我认为 - 虽然它不漂亮 - 你应该有一个可靠的黑客。

# parsing - 来自我的应用程序的 SOLR 查询与我从 SOLR 管理控制台执行的解析不同

> ID：13091973
> 
> 赞同：0
> 
> 时间：2012-10-26T17:56:16.200
> 
> 标签：parsing, solr, lucene

我对 Solr/Lucene 相当陌生，不是开发人员。我正在对使用 AND/NOT 的查询未按预期返回结果的问题进行故障排除。当我使用它们运行搜索时，它似乎只处理 AND/NOT 之前的第一个单词。我想我知道为什么。见下文

我尝试了几种方法都无济于事。

当我从我们的 .net 应用程序运行时，Catalina 日志显示以下内容

```
INFO: [] webapp=/solr path=/select params={spellcheck=true&start=0&q=content_en:"GINGER+NOT+BRAD"&?=&rows=1000} hits=0 status=0 QTime=0 
```

它似乎只是将我的查询放在一个 q=content_en: 中，不包括

当我从 solr admin 运行时，Catalina 日志显示以下内容

```
INFO: [] webapp=/solr path=/select/ params={start=0&version=2.2&q=content_en:ginger++NOT+content_en:brad&indent=on&rows=10} hits=1 status=0 QTime=1 
```

它通过隔离它们来正确处理每个标准。

我已经从我的应用程序前端尝试了每一个组合，但仍然没有成功。

我相信你们大师会看到这个并告诉我出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T21:45:36.237

能否请您发布您正在使用的 .net 代码，以便我们了解您在使用该代码做什么以及为什么它不同。

就我而言，我使用 SolrNet，但除非我使用 API 将查询视为不同，否则我看不到任何区别。

# cloud-foundry - CloudFoundry Micro 版本 1.2 上的 Node.js 0.8.2

> ID：13091984
> 
> 赞同：0
> 
> 时间：2012-10-26T17:57:53.447
> 
> 标签：cloud-foundry

CloudFoundry 的文档表明支持 Node.js 版本 0.8.2。但是，当我针对本地微型版本运行“vmc 运行时”时，它只列出了 node 和 node06（而不是 node08）

我在我的机器上本地运行 0.8.2 - 如何升级 Micro 版以便它也安装了 0.8.2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T18:03:49.343

Micro Cloud Foundry 1.2 was released before Node.js 0.8.2 support was added. MCF currently cannot be upgraded to support it. However, a new MCF version is planned for the very near future which will bring parity to all the feature on CloudFoundry.com. We also plan a faster release cadence of MCF so it doesn't fall behind on features.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T10:15:24.843

Micro Cloud Foundry 刚刚更新为与 github 上的代码库同步，因此它现在支持 Node.js 0.8.2。在此处阅读公告：http: [//blog.cloudfoundry.com/2012/11/08/new-release-of-micro-cloud-foundry/](http://blog.cloudfoundry.com/2012/11/08/new-release-of-micro-cloud-foundry/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T17:02:58.180

修补 MCF 1.2 以添加节点 0.8 并不是一件容易的事，您需要安装相关软件包并将信息添加到 Cloud Foundry 清单文件以使其能够宣传 node08 运行时。

但是，下一个 Micro Cloud Foundry 版本应该很快就会发布，所以如果你能再坚持一会儿，我们应该给你一些好消息 :-)

出于兴趣，您希望构建/运行需要 0.8.x 的应用程序？

# macos - x64 nasm：将内存地址推入堆栈并调用函数

> ID：13091987
> 
> 赞同：6
> 
> 时间：2012-10-26T17:58:03.693
> 
> 标签：macos, gcc, assembly, x86-64, nasm

我对 Mac 上的 x64-assembly 还很陌生，所以我对在 64 位中移植一些 32 位代码感到困惑。程序应该通过C 标准库中
的函数简单地打印出一条消息。 我从这段代码开始：`printf`

```
section .data
    msg db 'This is a test', 10, 0    ; something stupid here

section .text
    global _main
    extern _printf

_main:
    push    rbp
    mov     rbp, rsp       

    push    msg
    call    _printf

    mov     rsp, rbp
    pop     rbp
    ret 
```

以这种方式用 nasm 编译它：

```
$ nasm -f macho64 main.s 
```

返回以下错误：

```
main.s:12: error: Mach-O 64-bit format does not support 32-bit absolute addresses 
```

我试图解决这个问题，将代码更改为：

```
section .data
    msg db 'This is a test', 10, 0    ; something stupid here

section .text
    global _main
    extern _printf

_main:
    push    rbp
    mov     rbp, rsp       

    mov     rax, msg    ; shouldn't rax now contain the address of msg?
    push    rax         ; push the address
    call    _printf

    mov     rsp, rbp
    pop     rbp
    ret 
```

它使用上面的命令编译得很好，`nasm`但现在在将目标文件编译`gcc`为实际程序时出现警告：

```
$ gcc main.o
ld: warning: PIE disabled. Absolute addressing (perhaps -mdynamic-no-pic) not
allowed in code signed PIE, but used in _main from main.o. To fix this warning,
don't compile with -mdynamic-no-pic or link with -Wl,-no_pie 
```

由于这是警告而不是错误，因此我执行了该`a.out`文件：

```
$ ./a.out
Segmentation fault: 11 
```

希望有人知道我做错了什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T18:51:48.097

64 位 OS X ABI 完全符合[System V ABI-AMD64 Architecture Processor Supplement](http://www.x86-64.org/documentation/abi.pdf)。*它的代码模型与小位置无关代码模型 (PIC)*非常相似，但[此处](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/MachOTopics/1-Articles/x86_64_code.html)解释了不同之处。在该代码模型中，所有本地和小数据都使用 RIP 相对寻址直接访问。正如 Z boson 在评论中指出的那样，64 位 Mach-O 可执行文件的映像库超出了虚拟地址空间的前 4 GiB，因此`push msg`不仅将地址放入`msg`堆栈是一种无效的方式，而且它也是不可能的，因为`PUSH`不支持 64 位立即数。代码应该看起来类似于：

```
 ; this is what you *would* do for later args on the stack
lea   rax, [rel msg]  ; RIP-relative addressing
push  rax 
```

* * *

但在这种特殊情况下，根本不需要将值压入堆栈。**64 位调用约定要求前 6 个整数/指针参数** 完全按照该顺序在寄存器`RDI`、`RSI`、`RDX`、`RCX`、`R8`和中传递。`R9`前 8 个浮点或向量参数进入`XMM0`, `XMM1`, ..., `XMM7`。只有在使用了所有可用的寄存器或存在不适合任何这些寄存器的参数（例如 80 位`long double`值）后，才会使用堆栈。64 位立即推送是使用`MOV`(`QWORD`变体) 而不是`PUSH`. 简单的返回值在`RAX`登记。调用者还必须为被调用者提供堆栈空间以保存一些寄存器。

`printf`是一个特殊的函数，因为它接受可变数量的参数。调用此类函数时`AL`（RAX 的低字节）应设置为浮点参数的数量，并在向量寄存器中传递。另请注意，`RIP`对于位于代码 2 GiB 内的数据，首选相对寻址。

以下是如何在 OS X 上`gcc`转换为程序集：`printf("This is a test\n");`

```
 xorl    %eax, %eax             # (1)
    leaq    L_.str(%rip), %rdi     # (2)
    callq   _printf                # (3)

L_.str:
    .asciz   "This is a test\n" 
```

（这是 AT&T 风格的程序集，左边是源，右边是目的地，寄存器名称以 为前缀`%`，数据宽度编码为指令名称的后缀）

由于没有传递浮点参数，因此将`(1)`置零（通过将整个 RAX 归零以避免部分寄存器延迟）。`AL`在`(2)`字符串的地址被加载`RDI`。请注意，该值实际上是与 的当前值的偏移量`RIP`。由于汇编器不知道这个值是什么，它会在目标文件中放置一个重定位请求。然后链接器会看到重定位并在链接时放置正确的值。

我不是 NASM 大师，但我认为下面的代码应该做到这一点：

```
default rel             ; make [rel msg] the default for [msg]
section .data
    msg:  db 'This is a test', 10, 0    ; something stupid here

section .text
    global _main
    extern _printf

_main:
    push    rbp                 ; re-aligns the stack by 16 before call
    mov     rbp, rsp       

    xor     eax, eax            ; al = 0 FP args in XMM regs
    lea     rdi, [rel msg]
    call    _printf

    mov     rsp, rbp
    pop     rbp
    ret 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-16T14:56:04.727

尚无答案解释为什么 NASM 报告

```
Mach-O 64-bit format does not support 32-bit absolute addresses 
```

NASM 不这样做的原因在[Agner Fog 的 Optimizing Assembly](http://agner.org/optimize/optimizing_assembly.pdf)手册中的第*3.3 节寻址模式*下的标题为*64 位模式下的 32 位绝对寻址*小节下进行了解释，他写道

> Mac OS X 中不能使用 32 位绝对地址，默认情况下地址大于 2^32。

这在 Linux 或 Windows 上不是问题。事实上，我已经在[static-linkage-with-glibc-without-calling-main](https://stackoverflow.com/questions/26358119/static-linkage-with-glibc-without-calling-main)展示了这个作品。hello world 代码使用带有 elf64 的 32 位绝对寻址并且运行良好。

@HristoIliev 建议使用 rip 相对寻址，但没有解释 Linux 中的 32 位绝对寻址也可以。实际上，如果您更改`lea rdi, [rel msg]`为`lea rdi, [msg]`它，它会组装并运行良好，`nasm -efl64`但会失败`nasm -macho64`

像这样：

```
section .data
    msg db 'This is a test', 10, 0    ; something stupid here

section .text
    global _main
    extern _printf

_main:
    push    rbp
    mov     rbp, rsp       

    xor     al, al
    lea     rdi, [msg]
    call    _printf

    mov     rsp, rbp
    pop     rbp
    ret 
```

您可以检查这是一个绝对的 32 位地址，而不是相对于`objdump`. 但是，重要的是要指出，首选方法仍然是翻录相对寻址。Agner 在同一手册中写道：

> 绝对没有理由对简单的内存操作数使用绝对地址。相对地址使指令更短，它们消除了在加载时重新定位的需要，并且它们在所有系统中都可以安全使用。

那么什么时候在 64 位模式下使用 32 位绝对地址呢？静态数组是一个不错的选择。请参阅以下小节*以 64 位模式寻址静态数组*。简单的情况是例如：

```
mov eax, [A+rcx*4] 
```

其中 A 是静态数组的绝对 32 位地址。这在 Linux 上工作得很好，但在 Mac OS X 上你又不能这样做，因为默认情况下图像基数大于 2^32。要在 Mac OS X 上执行此操作，请参阅 Agner 手册中的示例 3.11c 和 3.11d。在示例 3.11c 中，您可以执行

```
mov eax, [(imagerel A) + rbx + rcx*4] 
```

在哪里使用 Mach O 的外部参考`__mh_execute_header`来获取图像库。在示例 3.11c 中，您使用 rip 相对寻址并像这样加载地址

```
lea rbx, [rel A]; rel tells nasm to do [rip + A]
mov eax, [rbx + 4*rcx] ; A[i] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T18:11:11.410

根据 x86 64bit 指令集的文档[http://download.intel.com/products/processor/manual/325383.pdf](http://download.intel.com/products/processor/manual/325383.pdf)

PUSH 仅接受 8、16 和 32 位立即数（但允许使用 64 位寄存器和寄存器寻址的内存块）。

```
PUSH msg 
```

其中 msg 是 64 位立即地址不会像您发现的那样编译。

* * *

_printf 在您的 64 位库中定义的调用约定是什么？

它是期望堆栈上的参数还是使用寄存器中的参数的快速调用约定？因为 x86-64 使更多通用寄存器可用，所以更频繁地使用快速调用约定。

# gcc - CUDA 5.0 on a Slackware64 current with gcc 4.7

> ID：13091989
> 
> 赞同：1
> 
> 时间：2012-10-26T17:58:23.610
> 
> 标签：gcc, cuda, slackware

当我尝试直接安装二进制 (700mb) cuda_5.0.35_linux_64_fedora16-1.run 时，我只安装了驱动程序，并且安装程序检测到我有不受支持的 gcc 4.7 版。我的路径上有 nvcc 和 gcc-4.5.2。

因此，我将 gcc 4.5.2 配置并安装到另一个目录（/opt/gcc）并通过安装脚本指向它：

./cudatoolkit* --compiler-bindir /opt/gcc-4.5.2/usr/bin

我只让 deviceQuery 工作，但对于示例中的其他代码，我有这个；

gcc：尝试执行“cc1plus”时出错：execvp：没有这样的文件或目录

因此问题简化为 ;

CUDA 5.0 产品。release 最多支持 gcc 4.5，默认情况下我有 4.7 的库存。将辅助 gcc 安装到不同位置并从 cudatoolkit install package 指向它的正确（事实上）方法是什么？目标是（显然）在最新的 CUDA 版本中无缝编译示例文件夹。

旧版本运行良好，但我想让这项工作。欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T09:45:32.460

用于完成这项工作的步骤是：

1.  将 gcc-4.4.7 安装到其他位置
2.  将 CUDA 5.0 安装到它的默认位置
3.  将 Samples 和 SDK 安装到您的主目录
4.  将 gcc-4.4.7 添加到您的路径（覆盖 gcc-4.7.1）
5.  将 LD_LIBRARY_PATH 添加到您的路径
6.  将 nvcc (/usr/local/cuda-5.0/bin) 添加到您的路径
7.  编译（制作）样本

# java - 画布/JPanel 未显示在 JFrame 上？

> ID：13091991
> 
> 赞同：1
> 
> 时间：2012-10-26T17:58:32.377
> 
> 标签：java, swing, jframe, jpanel

我有一个`MyFrame`扩展类`JFrame`。我使用 NET BEANS 中的设计选项向此框架添加了组件（控件，即按钮）。我有一个`MyCanvas`类扩展`JPanel`了一个重写的`paintComponent()`方法。我正在尝试将此组件添加到`MyFrame`类中。但是当我添加它并使其可见时，canvas( `JPanel`) 不会在`JFrame`. （首先我试图添加`Mycanvas`扩展的类`Canvas`。但后来我在这里阅读了一个线程来尝试将其更改为`JPanel`。我也没有工作。对于画布我显然不使用绘画`paintcomponent()`）我的代码在下面

**MyCanvas 类**

```
 public class MyCanvas extends javax.swing.JPanel{

 MyCanvas()
 {
      super();
 }

 @Override
 public void paintComponent(Graphics g) {
    super.paintComponent(g);

    Graphics2D graphics2D=(Graphics2D)g;

    graphics2D.drawRect(10, 10, 10, 10);

    graphics2D.drawOval(0, 0, 100, 100);
}

} 
```

**我的框架**

```
public class Myframe extends javax.swing.JFrame {

public Myframe() {

    initComponents();
  @SuppressWarnings("unchecked")
  +generatedcode by the designer

 private void RectangleActionPerformed(java.awt.event.ActionEvent evt) {
}

private void SquareActionPerformed(java.awt.event.ActionEvent evt) {
}

private void CircleActionPerformed(java.awt.event.ActionEvent evt) {
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
 java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new Myframe().setVisible(true);
        }
    });
}
public void run() {
        new Myframe().setVisible(true);
    }
// Variables declaration - do not modify
private javax.swing.JButton Circle;
private javax.swing.JButton Rectangle;
private javax.swing.JButton Square;
// End of variables declaration
} 
```

**我的主程序**

```
public static void main(String[] args) {

    MyCanvas c = new MyCanvas();
    Myframe f= new Myframe();//Works if used JFrame instead of MyFrame

    f.add(c);
    f.setVisible(true);
} 
```

基本上，我想创建一个 GUI，其中我想要可以触发事件并更改在画布上绘制的内容的按钮。我用一个空的jframe试了一下。将画布/面板添加到 JFrame 。有效。我也改变了我的面板/画布并刷新了框架。那也很好用。但我不能这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T18:23:02.680

那是您将创建`JFrame`与 IDE 混合并创建`JPanel`自己，请记住 IDE 将所有组件添加到`JFrame`其中`initComponents()`理想的位置是您想要`Canvas`添加的位置。

要么自己创建`JFrame`and `JPanel`（不使用 Netbeans GUI Builder）

或者

您可以使用Netbeans的*调色板管理器*`Component`将您添加到调色板中，然后您可以像使用任何其他类一样在 GUI 构建器中使用它：

*   [如何使用 Swing 组件的自定义子类？](http://wiki.netbeans.org/FaqFormUsingCustomComponent)

（只需将`Canvas`类从*项目树*拖到`JFrame`GUI 设计器中）

确保您的自定义`Canvas`功能：

*   覆盖`getPrefferedSize(..)`并返回适合的尺寸

**参考：**

*   [如何在 NetBeans GUI Builder 中包含自定义面板？](https://stackoverflow.com/questions/816286/how-to-include-custom-panel-with-netbeans-gui-builder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:05:08.480

尝试将其更改为：

```
public static void main(String[] args) {

    MyCanvas c = new MyCanvas();
    Myframe f= new Myframe();//Works if used JFrame instead of MyFrame

    f.add(c);
    c.setVisible(true);
    f.setVisible(true);
} 
```

另外，您`MyFrame`班级中的代码：

```
/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /* Set the Nimbus look and feel */
 java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new Myframe().setVisible(true);
        }
    });
} 
```

`MyFrame`除非您正在运行而不是您的程序 main，否则不会执行。

还要检查您的构造函数中是否有`super()`调用。`MyFrame`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T18:11:46.980

```
@Override
public void paintComponent(Graphics g) {
    super.paintComponent(g);

    g.setColor(Color.BLACK);

    Graphics2D graphics2D=(Graphics2D)g;

    graphics2D.drawRect(10, 10, 10, 10);

    graphics2D.drawOval(0, 0, 100, 100);
} 
```

# android - 如何使用 phonegap 在 android 上获取 facebook 新闻提要？

> ID：13091993
> 
> 赞同：0
> 
> 时间：2012-10-26T17:58:44.780
> 
> 标签：android, facebook, facebook-graph-api, cordova, phonegap-plugins

我一直在玩 phonegap 的 android facebook 插件。hackbook 示例没有指定如何从 facebook 获取用户的新闻提要。是否有用于执行此操作的 API？我在 stackoverflow 中进行了广泛的搜索，但没有得到任何答案。 [https://github.com/davejohnson/phonegap-plugin-facebook-connect](https://github.com/davejohnson/phonegap-plugin-facebook-connect)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:17:42.993

用户新闻提要的 API 端点是`me/home`. 确保您拥有扩展权限`read_stream`。

[https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fhome](https://developers.facebook.com/tools/explorer/?method=GET&path=me%2Fhome)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:06:18.970

您可以使用插件进行身份验证，然后使用普通的[Facebook JavaScript SDK](http://developers.facebook.com/docs/reference/javascript/)来处理您的请求吗？