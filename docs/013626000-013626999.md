# StackOverflow 问答 13626000-13626999

# performance - Excel VBA：将数组写入单元格非常慢

> ID：13626001
> 
> 赞同：1
> 
> 时间：2012-11-29T12:37:31.920
> 
> 标签：performance, vba, excel

我正在使用 Excel 中的 VBA 从 Reuters 3000 数据库中检索一些信息。我检索的数据是一个二维数组，其中一列保存日期，另一列保存数值。

在我检索信息后，这个过程不超过 2 秒，我想将此数据写入工作表。在工作表中，我有一列包含日期，而其他几列包含数值，每一列都包含同一类别的值。我遍历数组的行以获取日期和数值并将它们保存在变量中，然后在工作表的日期列上搜索日期，并在找到日期后写入值。这是我的代码：

```
Private Sub writeRetrievedData(retrievedData As Variant, dateColumnRange As String, columnOffset As Integer)

Dim element As Long: Dim startElement As Long: Dim endElement As Long
Dim instrumentDate As Variant: Dim instrumentValue As Variant
Dim c As Variant: Dim dateCellAddress As Variant

Application.ScreenUpdating = False    
Sheets("Data").Activate
startElement = LBound(retrievedData, 1): endElement = UBound(retrievedData, 1)
Application.DisplayStatusBar = True
Application.StatusBar = "Busy writing data to worksheet"

For element = startElement To endElement
    instrumentDate = retrievedData(element, 1): instrumentValue = retrievedData(element, 2)
    Range(dateColumnRange).Select
    Set c = Selection.Find(What:=instrumentDate, After:=ActiveCell, LookIn:=xlValues, _
            LookAt:=xlWhole, SearchOrder:=xlByColumns, SearchDirection:=xlNext, _
            MatchCase:=False, SearchFormat:=False)
    If Not c Is Nothing Then
        c.offset(0, columnOffset).Value = instrumentValue            
    End If
Next element

Application.DisplayStatusBar = False

End Sub 
```

我的问题是这个过程很慢，即使数组中只有 5 行，完成任务也需要大约 15 秒。由于我想多次重复这个过程（我从数据库中检索的每组数据一次），我想尽可能地减少执行时间。

如您所见，我正在禁用屏幕更新，这是提高性能的最常见操作之一。有人对我如何进一步减少执行时间有建议吗？

PS。我知道数据检索过程并不需要太多，因为我已经测试了该部分（检索数据后立即在 MsgBox 上显示值）

先谢谢了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T16:11:13.967

这是我为提高性能所做的：

*   避免在要写入值时选择单元格。这是蒂姆·威廉姆斯的建议。
*   我将属性 Application.Calculation 设置为 xlCalculationManual
*   我没有使用 Find() 函数来搜索日期，而是将工作表中的所有日期加载到一个数组中并遍历该数组以获取行号。事实证明这比 Find() 函数更快。

    ```
    Private Function loadDateArray() As Variant

        Dim Date_Arr() As Variant

        Sheets("Data").Activate
        Date_Arr = Range(Cells(3, 106), Cells(3, 106).End(xlDown))
        loadDateArray = Date_Arr

    End Function

    Private Function getDateRow(dateArray As Variant, dateToLook As Variant)

        Dim i As Double: Dim dateRow As Double

        For i = LBound(dateArray, 1) To UBound(dateArray, 1)
            If dateArray(i, 1) = dateToLook Then
                dateRow = i
                Exit For
            End If
        Next i

        getDateRow = dateRow

    End Function 
    ```

谢谢大家的帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T20:37:09.830

通过不选择工作表，您可以增加一点速度。代替

```
Sheets("Data").Activate
Date_Arr = Range(Cells(3, 106), Cells(3, 106).End(xlDown))
loadDateArray = Date_Arr 
```

尝试

```
With Sheets("Data")
Date_Arr = .Range(Cells(3, 106), Cells(3, 106).End(xlDown))
End With 
```

# antlr - 简单的数学表达式解析器

> ID：13626003
> 
> 赞同：0
> 
> 时间：2012-11-29T12:37:41.343
> 
> 标签：antlr

我有一个简单的数学表达式解析器，我想自己构建 AST（意味着没有 ast 解析器）。但是每个节点只能保存两个操作数。所以 2+3+4 会产生这样的树：

```
 +
       / \
      2   +
         / \
        3   4 
```

问题是，我无法让我的语法师进行递归，这里只是“添加”部分：

```
add returns [Expression e]
  : op1=multiply { $e = $op1.e; Print.ln($op1.text); } 
    ( '+' op2=multiply   { $e = new AddOperator($op1.e, $op2.e); Print.ln($op1.e.getClass(), $op1.text, "+", $op2.e.getClass(), $op2.text); }
    | '-' op2=multiply   { $e = null; } // new MinusOperator    
    )*
  ; 
```

但在一天结束时，这将产生一棵树，如：

```
 +
    / \
   2   4 
```

我知道问题出在哪里，这是因为“添加”可能永远不会或无限地发生（*），但我不知道如何解决这个问题。我想到了类似的东西：

“添加”部分：

```
add returns [Expression e]
  : op1=multiply { $e = $op1.e; Print.ln($op1.text); } 
    ( '+' op2=(multiply|add)   { $e = new AddOperator($op1.e, $op2.e); Print.ln($op1.e.getClass(), $op1.text, "+", $op2.e.getClass(), $op2.text); }
    | '-' op2=multiply   { $e = null; } // new MinusOperator    
    )?
  ; 
```

但这会给我一个递归错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:57:43.073

我没有完整的语法来测试这个解决方案，但考虑替换它（来自`add`问题中的第一条规则）：

```
$e = new AddOperator($op1.e, $op2.e); 
```

有了这个：

```
$e = new AddOperator($e, $op2.e);  //$e instead of $op1.e 
```

This way each iteration over `('+' multiply)*` extends `e` rather than replaces it.

It may require a little playing around to get it right, or you may need a temporary `Expression` in the rule to keep things managed. Just make sure that the last expression created by the loop is somewhere on the right-hand side of the `=` operator, as in `$e = new XYZ($e, $rhs.e);`.

# java - java ssl套接字服务器握手中止

> ID：13626004
> 
> 赞同：0
> 
> 时间：2012-11-29T12:37:47.497
> 
> 标签：java, android, ssl, serversocket

我有一个 android 应用程序，它正在侦听套接字连接并且可以读取 httpheaders（由浏览器发送（一切正常！））。现在我不会切换到 SSL 套接字，但我无法完成它。

**我开始工作的事情：**

*   密钥库
*   服务器套接字工厂

**我没有工作的事情（以及我需要帮助的地方）：**

*   客户接受部分

**代码：**

```
public void run() {

try {           

KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());

keyStore.load(service.getBaseContext().getResources().openRawResource(R.raw.keystore),"password".toCharArray());

    ServerSocketFactory socketFactory = SSLServerSocketFactory
                .getDefault();
    SSLServerSocket mServerSocket = (SSLServerSocket) socketFactory
                .createServerSocket(8080);
    while (!mServerSocket.isClosed()) {
            mServerSocket.setEnabledCipherSuites(mServerSocket.getSupportedCipherSuites());
            mServerSocket.setEnabledProtocols(mServerSocket.getSupportedProtocols());

            System.out.println("waiting");
            SSLSocket client = (SSLSocket) mServerSocket.accept(); 

            client.addHandshakeCompletedListener(new HandshakeCompletedListener(){

                public void handshakeCompleted(HandshakeCompletedEvent arg0) {
                    System.out.println("handshakeCompleted");

                }

            });
            client.startHandshake(); //MultiThreadWebServer.java:136

            client.getOutputStream().flush();

            client.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

**例外：**

```
11-29 11:15:01.046: W/System.err(29941): javax.net.ssl.SSLHandshakeException: javax.net.ssl.SSLProtocolException: SSL handshake aborted: ssl=0x4fec3da8: Failure in SSL library, usually a protocol error
11-29 11:15:01.046: W/System.err(29941): error:1408A0C1:SSL routines:SSL3_GET_CLIENT_HELLO:no shared cipher (external/openssl/ssl/s3_srvr.c:1365 0x41b1e7f8:0x00000000)
11-29 11:15:01.046: W/System.err(29941):    at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:436)
11-29 11:15:01.046: W/System.err(29941):    at at.aichinger.mario.aws.MultiThreadWebServer.run(MultiThreadWebServer.java:136) 
```

要连接到服务器，我使用 google cheome 并访问“https://192.168.0.25:8080”，如果我这样做，则会抛出异常。

**MultiThreadWebServer.java:136 中的代码：**

```
client.startHandshake(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:33:12.420

首先，这两行没有任何意义。如果您想限制支持的密码套件和协议，请专门定义它们。但是您必须小心，并非所有密码套件都受浏览器支持。

```
mServerSocket.setEnabledCipherSuites(mServerSocket.getSupportedCipherSuites());
mServerSocket.setEnabledProtocols(mServerSocket.getSupportedProtocols()); 
```

您的代码中的问题是您没有使用您的密钥库。尝试这个：

```
public void run() {
    try {
        KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
        keyStore.load(service.getBaseContext().getResources().openRawResource(R.raw.keystore),
                "password".toCharArray());

        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
        keyManagerFactory.init(keyStore, "password".toCharArray());

        SSLContext sslContext = SSLContext.getInstance("SSL");
        sslContext.init(keyManagerFactory.getKeyManagers(), null, null);

        ServerSocketFactory socketFactory = sslContext.getServerSocketFactory();
        SSLServerSocket mServerSocket = (SSLServerSocket) socketFactory.createServerSocket(8080);
        while (!mServerSocket.isClosed()) {

            System.out.println("waiting");
            SSLSocket client = (SSLSocket) mServerSocket.accept();

            client.addHandshakeCompletedListener(new HandshakeCompletedListener() {

                public void handshakeCompleted(HandshakeCompletedEvent arg0) {
                    System.out.println("handshakeCompleted");

                }

            });
            client.startHandshake(); // MultiThreadWebServer.java:136

            client.getOutputStream().flush();

            client.close();
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-04T09:23:23.707

不要使用密钥库作为默认类型，而是始终定义您将在应用程序中使用的密钥库类型。否则，服务器和客户端之间可能会发生密钥库不匹配的情况。

# multithreading - 具有两个线程的良性数据竞争条件

> ID：13626005
> 
> 赞同：0
> 
> 时间：2012-11-29T12:37:48.213
> 
> 标签：multithreading, race-condition

这是比赛条件吗？

```
class A {
   int x; 

   update() {
      x = 5; 
   }

   retrieve() {
      y = x; 
   }
} 
```

如果 update() 和 retrieve() 由两个不同的线程调用而没有持有任何锁，假设在共享变量的两次访问中至少有一次写入，这可以归类为竞争条件。但这真的是运行时的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:58:43.343

没有锁，可能会发生三件事：

1.  `y`得到`x`(5) 的新值。
2.  `y`获取旧值`x`（很可能为 0）。
3.  如果写入`int`不是原子的，则`y`可以获得任何其他值。

在 Java 中，对 an 的读取`int`是原子的，因此第三个选项不会发生。不保证其他语言的原子性。

使用锁定，前两个选项也可以发生。

但是，取决于内存模型，还有一个额外的挑战。在 Java 中，如果写入没有同步，则可以任意延迟到下一个同步点（`synchronized`块结束或对`volatile`字段的访问）。`synchronized`类似地，可以从前一个同步点（块的开始或对`volatile`字段的访问）任意缓存读取。这很容易导致陈旧缓存引起的问题。最终结果是，即使第一个选项应该发生，第二个选项也可能发生。

在 Java 中，始终使用`volatile`可从其他线程访问的字段，否则您将面临因内存访问重新排序而导致的难以调试的竞争条件。同样的警告也适用于使用类似于 Java 中的内存模型的其他语言 - 您可能需要告诉编译器不要进行这些优化。

# php - MySQL 子字符串/数组中的性能

> ID：13626011
> 
> 赞同：1
> 
> 时间：2012-11-29T12:38:01.103
> 
> 标签：php, mysql, performance, substring

我正在从 MySQL 表中选择行，如下所示：

```
SELECT id, name, code FROM table 
```

我现在要做的是选择代码以数组中指定的字符序列开头的行。什么是最佳实践 - a) 更改 MySQL 查询并使用 SUBSTRING 和 IN，或 b) 稍后使用 PHP 过滤行？

一种）

```
$qsql = mysql_query("SELECT id, name, code FROM table WHERE SUBSTRING(code, 1, 2) IN ('AB', 'BA', 'ZK', ...)");
while($sql = mysql_fetch_assoc($qsql)) {
    // Do something
} 
```

或 b)

```
$codes = array('AB', 'BA', 'ZK', ...);
$qsql = mysql_query("SELECT id, name, code FROM table");
while($sql = mysql_fetch_assoc($qsql)) {
    if(!in_array($sql['code'], $codes))
        continue;
    // Do something
} 
```

代码数组可能有大约 30 个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:41:27.027

A) 尽可能让 SQL 做它的事情。它几乎总是比稍后处理数据更快。SQL 非常擅长管理/过滤数据，因此在可能的情况下，使用 SQL 处理数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:30:42.557

动态生成 LIKE 列表。

```
$codes = array('AB', 'BA', 'ZK', ...);
$qsql = mysql_query("SELECT id, name, code FROM table WHERE code LIKE ('".implode("%','", $codes)."%')");
while($sql = mysql_fetch_assoc($qsql)) {
    // Do something
} 
```

假设代码已清理

# database - 是否可以审核对 oracle 模式的更改？

> ID：13626014
> 
> 赞同：1
> 
> 时间：2012-11-29T12:38:05.147
> 
> 标签：database, oracle

我正在开发一个使用 Oracle 数据库 (11g) 的产品。该产品很可能必须为每个客户定制——这可能涉及稍微更改 PLSQL 函数或修改视图。我的问题是：有没有办法自动记录这样的结构变化，并可能将其保存到表中以供将来参考？或者它必须是一个更加手动的过程，例如只记得在日志表中插入一行来描述已进行的任何更改？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:33:58.183

如果您正在谈论 DDL 命令，则可以使用 DDL 触发器跟踪这些命令。创建插入到某个审计表的 DDL 触发器。

更多信息：

[http://psoug.org/reference/ddl_trigger.html](http://psoug.org/reference/ddl_trigger.html)

[http://www.dba-oracle.com/t_ddl_triggers.htm](http://www.dba-oracle.com/t_ddl_triggers.htm)

# sorting - 添加 sType 时数据表分页中断

> ID：13626021
> 
> 赞同：1
> 
> 时间：2012-11-29T12:38:21.973
> 
> 标签：sorting, pagination, datatables, jquery-datatables

我使用 date-euro 插件对日期列进行正确排序。排序工作正常，但是当我添加 sType 参数时，分页会在初始化时中断。当我单击 numberofelement 下拉菜单或下一个按钮时，分页工作。prettydaterender 函数将日期从 2012-10-24 14:00 转换为 24/10/2012 14:00 你能帮我吗？

```
$.extend( $.fn.dataTableExt.oSort, {
    "date-euro-pre": function ( a ) {
        if ($.trim(a) != '') {
            var frDatea = $.trim(a).split(' ');
            var frTimea = frDatea[1].split(':');
            var frDatea2 = frDatea[0].split('/');
            var x = (frDatea2[2] + frDatea2[1] + frDatea2[0] + frTimea[0] + frTimea[1] + frTimea[2]) * 1;
        } else {
            var x = 10000000000000; // = l'an 1000 ...
        }

        return x;
    },

    "date-euro-asc": function ( a, b ) {
        return a - b;
    },

    "date-euro-desc": function ( a, b ) {
        return b - a;
    }
} );
table.dataTable({
    "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
    'aaSorting': [[3, 'desc']],
    'aoColumns': [null,null,null,{
        // 14:43 24/10/2012
        'fnRender': prettyDateRender,
        'sType': 'date-euro-desc'
    }]
}); 
```

# oracle - Oracle ODBC：SQL_HANDLE_ENV 上的驱动程序 SQLAllocHandle 失败

> ID：13626024
> 
> 赞同：2
> 
> 时间：2012-11-29T12:38:45.020
> 
> 标签：oracle, excel-2007, oracle9i, citrix

我有消息 Oracle ODBC : Driver's SQLAllocHandle on SQL_HANDLE_ENV failed 当尝试在 excel 中打开 oracle 连接时。我正在通过 citrix 在虚拟机中工作。您能否给出提示为什么会出现以及如何避免问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-22T16:13:33.483

该问题似乎是安装 Oracle 9i 和 10G 期间的权限问题。

如果您浏览 Oracle 主目录，您会发现该目录与树的根目录具有不同的权限。在 10G 的情况下，路径是 C:Oracleproduct10.1.0Client_1。打开 Client_X 目录的属性，您将看到“Authenticated Users”应该具有读取和执行、列出文件夹内容和读取。要解决此问题，请执行以下操作.... -选择经过身份验证的用户 -取消选中读取并执行 -按应用 -检查读取并执行 -按应用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T16:29:59.113

可能导致此错误的一项是您的 Windows 操作系统路径中没有 ORACLE_HOME bin 目录。打开命令提示符并键入 PATH 或 SET 以查看是否包含该目录。根据需要进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-17T08:37:36.920

执行以下操作来解决问题：

1.  选择管理工具、本地安全设置和本地策略。
2.  然后选择“用户权限分配”
3.  双击“创建全局对象”
4.  选择添加用户或组。
5.  确保选中对象类型组框。
6.  选择位置并突出显示您正在使用的服务器的名称（不是域）。
7.  在对象名称框中输入“远程桌面用户”或“所有人”（不带引号）。
8.  选择确定。
9.  将相同的用户添加到“高级用户”组。
10.  如果这不起作用，则在第 8 步之后可能需要重新启动。

# mysql - 将数据从一个表插入到另一个表？

> ID：13626028
> 
> 赞同：0
> 
> 时间：2012-11-29T12:38:58.637
> 
> 标签：mysql, sql, magento

我有两个表，我试图将数据从一个表插入另一个表，我已经能够找到一些如何在网络上完成此操作的示例，问题是这些示例主要依赖于相同的表结构在两者之间......你看我正在尝试将*一些*数据从一个表插入到另一个具有完全不同结构的表中。

我正在尝试将名为“catalog_product_entity_media_gallery”的表中的数据插入名为“catalog_product_entity_varchar”的表中。下面简单介绍一下它们的结构

'catalog_product_entity_varchar' 如下所示：

```
value_id  |   entity_type_id  |  attribute_id  |  store_id     |  entity_id  |   value
     PK              INT              INT            INT              INT       VARCHAR 
```

'catalog_product_entity_media_gallery' 表如下所示：

```
value_id   |   attribute_id    |    entity_id    |    value
    PK               INT                INT          VARCHAR 
```

我需要将catalog_product_entity_media_gallery 中的实体和值列插入catalog_product_entity_varchar。但是，正如您所看到的，结构完全不同。

我尝试使用的查询如下

```
USE magento_db;
INSERT INTO catalog_product_entity_varchar(entity_type_id, attribute_id, store_id, entity_id, value)

SELECT
 4,
 74,
 0,
 catalog_product_entity_media_gallery.entity_id,
 catalog_product_entity_media_gallery.value

FROM catalog_product_entity_media_gallery; 
```

我只需要 media_gallery 中的 entity_id 和值，其他值始终相同，我尝试使用上述方法执行此操作，但这只是挂在 MySQL 中（没有错误）

我认为这是因为我试图从 catalog_product_entity_media_gallery 中选择 4、74 和 0，但我不是 100% 确定（抱歉，我对 MySQL 有点陌生）

谁能指出我正确的方向？有什么方法可以在为某些列插入静态值的同时从媒体表中插入一些数据？（我希望这一切都有意义）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:00:37.963

查询语法没问题。

但是，表中的唯一键和外键可能存在问题，`catalog_product_entity_varchar`不允许您插入数据。此外，查询可能正在等待其他查询完成（如果您的查询只是更大场景的一部分），因此这是锁定问题。最有可能的是第一种情况。

目前，这个问题缺乏重要的细节：

*   您用来执行查询的 MySQL 客户端/编程代码。所以我们无法完整地看到这个案例并正确地重现它
*   您执行的场景。即，您是否在 Web 请求期间在某个模块的 Magento 应用程序中执行此操作。或者您的脚本中是否有其他查询、一些打开的事务、其他人访问数据库服务器等。

基于最可能的假设，您只是没有看到唯一/外键的实际错误，您可以尝试以下查询。

1）唯一索引失败。试试这个：

```
USE magento_db;
INSERT INTO catalog_product_entity_varchar(entity_type_id, attribute_id, store_id, entity_id, value)

SELECT
    4 as etid,
    74 as aid,
    0 as sid,
    catalog_product_entity_media_gallery.entity_id as eid,
    catalog_product_entity_media_gallery.value as val
FROM 
    catalog_product_entity_media_gallery
GROUP BY 
    eid, aid, sid; 
```

您插入非唯一条目的可能性很大，因为`catalog_product_entity_media_gallery`可以为同一产品保存多个条目，而`catalog_product_entity_varchar`不能。如果上面的查询成功完成，那么问题确实是唯一键。在这种情况下，您必须重新验证您想要实现的目标，因为最初的目标（而不是查询本身）是错误的。

2）外键错误（不存在属性74）

试试这个（用您需要的值替换 ATTRIBUTE_CODE 和 ATTRIBUTE_ENTITY_TYPE_ID，例如 'firstname' 和 6）：

```
USE magento_db;
INSERT INTO catalog_product_entity_varchar(entity_type_id, attribute_id, store_id, entity_id, value)
SELECT
    4 as etid,
    eav_attribute.attribute_id as aid,
    0 as sid,
    gallery.entity_id as eid,
    gallery.value as val
FROM 
    catalog_product_entity_media_gallery AS gallery
INNER JOIN
    eav_attribute
    ON
        eav_attribute.attribute_code = '<ATTRIBUTE_CODE>'
        AND eav_attribute.entity_type_id = <ATTRIBUTE_ENTITY_TYPE_ID>
GROUP BY 
    eid, aid, sid; 
```

如果它执行成功并且

*   一些行被添加到`catalog_product_entity_varchar`- 然后看起来，74 被选为您需要的属性的错误 ID，因此外键`catalog_product_entity_varchar`不允许您插入记录。

*   没有行被添加到`catalog_product_entity_varchar`- 然后看起来，您在属性 ID、属性代码和实体类型方面有误。重新检查，您输入的内容为 ATTRIBUTE_CODE 和 ATTRIBUTE_ENTITY_TYPE_ID。

如果两个查询仍然挂起 - 那么您的 MySQL 客户端或服务器或执行方案存在问题。

**注意**：您的初始查询在您的特定情况下可能有意义，但有些问题表明您的方法可能有问题，因为：

1.  您正在使用直接数字作为 ID。但是不同的安装和 Magento 版本的 id 是不同的。预计会使用更稳定的值，例如第二个查询中的属性代码，您应该通过它来提取实际的属性 id。
2.  `catalog_product_entity_media_gallery`您将数据从可以存储同一产品的多个条目的 storage 复制`catalog_product_entity_varchar`到只能存储该产品的一个条目的 storage 。这意味着，您不能以这种方式复制所有数据。您的查询可能无法反映您想要实现的目标。
3.  插入到的实体类型 id`catalog_product_entity_varchar`与属性 id 无关。在 Magento 中，这些是紧密相连的事物。将错误的实体类型 ID 放入表中会使 Magento 行为不正确，或者根本不会注意到您的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:52:15.757

试试这个

```
 INSERT INTO catalog_product_entity_varchar( entity_id, value)
  VALUES (
          SELECT  entity_id, value
          FROM catalog_product_entity_media_gallery

           WHERE value_id = here the row id of value_id which have those values 4,74,0 ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:57:46.300

假设表中的 是`valued_id`，你能不做以下事情吗？`catalog_product_entity_varchar``autoincrement`

```
USE magento_db;
INSERT INTO catalog_product_entity_varchar(entity_type_id, store_id, entity_id, value)

SELECT
 4,
 74,
 catalog_product_entity_media_gallery.entity_id,
 catalog_product_entity_media_gallery.value

FROM catalog_product_entity_media_gallery; 
```

请注意，您的表中没有`attribute_id`列`catalog_product_entity_varchar`。

# javascript - 在脚本执行完成之前阻止下一个 keydown 事件

> ID：13626036
> 
> 赞同：0
> 
> 时间：2012-11-29T12:39:12.317
> 
> 标签：javascript, jquery

我想禁用 keydown 事件发生，直到 keydown 事件中的脚本完成执行。

```
 $(document).keydown(function(e){
        if (e.keyCode == 40){
           down(); //Assume down has some animate function executes for 1sec
        }
   }); 
```

目前，当我按下键并保持不释放时，keydown 事件会反复触发，我想禁用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:41:01.693

一旦 keydown 事件发生，您可以取消绑定事件：

```
 $(document).keydown(function(e){
        if (e.keyCode == 40){
           down(); //Assume down has some animate function executes for 1sec
           $(document).unbind('keydown');
        }
   }); 
```

然后在动画完成后重新绑定`down`函数（可能作为回调）。

如果您对绑定/重新绑定不感兴趣，并且不喜欢 icky 全局变量，您可以使用一个类来指示动画是否正在进行中：

```
 $(document).keydown(function(e){
        if (e.keyCode == 40 && $('body').is(':not(.animating)')){
           down(); //Assume down has some animate function executes for 1sec
           $('body').addClass('animating');
        }
   }); 
```

然后在动画完成后在函数中将其删除，`down`方式大致相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:42:13.627

保留一些变量并检查它

```
var isAnimating = false;
$(document).keydown(function(e){
    if (!isAnimating && e.keyCode == 40){
        isAnimating = true;
        down(); //Assume down has some animate function executes for 1sec
        isAnimating = false;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:43:02.220

绑定和重新绑定是昂贵的。只需使用变量跟踪动画是否正在进行，并在再次执行之前检查：

```
var animating = false;

$(document).keydown(function(e){
    if (e.keyCode == 40 && !animating){
       down(); //Assume down has some animate function executes for 1sec
       animating = true;
    } 
```

});

然后，您可以使用具有适当延迟的 settimeout 将动画设置回 false；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T13:04:58.060

基于 Asad 回答的解决方案：

```
$(document).keydown(function(e){
    if( $('body').hasClass('animating')){
        //DO NOTHING
    }
    else{
        if (e.keyCode == 40){
           down(); //Assume down has some animate function executes for 1sec
           $('body').addClass('animating');
        }
    }
 });

$(document).keyup(function(e){
    $('body').removeClass('animating');
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-29T12:41:09.033

您无法阻止事件触发，但您可以忽略它：

```
var keyIsDown = false;
$(document).keydown(function(e){
    if(!keyIsDown) {
        keyIsDown = true;
        if (e.keyCode == 40){
            down(); //Assume down has some animate function executes for 1sec
            // set keyIsDown = false; on the animation callback, inside down func.
        }
    }
}); 
```

# asp.net-mvc - 如何使用授权属性进行 ASP.NET Web API 集成测试

> ID：13626042
> 
> 赞同：4
> 
> 时间：2012-11-29T12:39:28.930
> 
> 标签：asp.net-mvc, unit-testing, asp.net-web-api, integration-testing, basic-authentication

我确实在我的 Web API 上应用了授权属性。我从 MVC4 应用程序调用 Web API，在该应用程序中我使用基于标准 cookie 的身份验证。我需要从集成测试中调用控制器上的 Web API 方法，但由于应用了授权属性，我总是会收到**未经授权的异常**。

解决这个问题的最佳方法是什么？PS。我不想（需要）使用其他身份验证方法，例如 APIKey、Auth Header 中的令牌和类似方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:34:22.847

首先，要回答这个问题，一个关键要素是了解您使用哪种身份验证机制。例如，如果您使用基本身份验证，则可以在集成测试时发送凭据：

```
[Fact]
public async Task FooTest() { 

    var username = "user";
    var password = "supersecret";

    // construct your config here as I do below.
    // RouteConfig and WebAPIConfig are my own classes
    var config = new HttpConfiguration();
    RouteConfig.RegisterRoutes(config);
    WebAPIConfig.Configure(config);

    var request = new HttpRequestMessage(HttpMethod.Get, "http://localhost/api/cars");
    request.Headers.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));

    request.Headers.Authorization = new AuthenticationHeaderValue(
        "Basic", EncodeToBase64(string.Format("{0}:{1}", username, password)));

    using (var httpServer = new HttpServer(config))
    using (var client = new HttpClient(httpServer)) {

        var response = await client.SendAsync(request);
        var result = await response.Content.ReadAsAsync<Car>();

        // do you test now...
    }
}

private static string EncodeToBase64(string value) {

    byte[] toEncodeAsBytes = Encoding.UTF8.GetBytes(value);
    return Convert.ToBase64String(toEncodeAsBytes);
} 
```

当然，处理身份验证的处理程序应该能够使用这些凭据对您进行身份验证。

另一方面，由于您将在内存中托管应用程序，因此将经过身份验证的主体设置`Thread.CurrentPrincipal`为另一种选择，但在这里不是我最喜欢的选择。

# xml - 如何检查前面的节点是评论还是xml节点？

> ID：13626043
> 
> 赞同：3
> 
> 时间：2012-11-29T12:39:30.617
> 
> 标签：xml, xslt, xpath

我有类似以下 xml 的内容（这实际上并不是数据集更大）：

```
 <people>
<!-- People start here -->
        <person>
        <name>Sara</name>
        <age>27</age>
        </person>
 <person>
        <name>Carl</name>
        <age>25</age>
        </person>
<!-- Nick is the father -->
    <person>
        <name>Nick</name>
        <age>52</age>
        </person>
</people> 
```

我已经编写了一个 XSL 来为所有人添加一行，想象现在的人必须看起来像：

```
<person>
<name>Sara</name>
<age>27</age>
<gender>female</gender>
</person> 
```

但是我仍然想保留评论，但有些在结束节点之后有评论，有些没有。我尝试了很多角度，但我不知道如何检查前面的节点是否是评论。以下方法均无效：

*   previous-sibling::comment()[1] （如果曾经有一个评论，它总是会得到这个）
*   previous-sibling::* （不接受评论）
*   previous::* （不接受评论）

我有点需要查看前面的节点并检查它是否为 case 类型，如果不是，则继续，如果不是，请抓住评论并将其吐出。也许我必须计算出整个文档中的节点位置（如何？）然后以这种方式检查前面的节点？这没有必要是有效的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:59:46.440

像这样保留xml片段中的注释的东西怎么样：

```
<xsl:template match="@*|node()">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="person">
    <xsl:copy>
        <xsl:copy-of select="."/>
        <gender>gender goes here</gender>
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:46:22.380

此模板应复制所有处理指令，包括注释

```
<xsl:template match="processing-instruction()">
    <xsl:copy/>
</xsl:template> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T12:58:21.370

有一段时间没有做 XSLT 的东西了，但是你能做吗？

```
<xsl:if test="preceding-sibling::comment()[1]">
  <comment>
    <xsl:value-of select="preceding-sibling::comment()[1]" />
  </comment>
</xsl:if> 
```

似乎可以在[http://www.xsltcake.com/](http://www.xsltcake.com/)上工作，但两次获得 People 评论。

# drupal - Drupal7 - 如何使用添加的自定义字段更改用户个人资料页面上的页面标题？

> ID：13626045
> 
> 赞同：2
> 
> 时间：2012-11-29T12:39:32.720
> 
> 标签：drupal, drupal-7

我正在尝试用稍后添加的其他字段替换用户个人资料页面的标题，即用户名。试图显示全名作为页面的标题。

我用以下代码编辑了**page.tpl.php** $title 但它不起作用。

```
if(arg(0)=="user") 
{
   $title=$field_user_last_name;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:52:32.290

安装[RealName](https://drupal.org/project/realname)模块并转到`/admin/config/people/realname`更改用于用户名的模式。

我正在使用[Profile2](https://drupal.org/project/profile2)添加名字和姓氏字段以及以下模式：

```
[user:profile-person:field_first_name] [user:profile-person:field_last_name] 
```

`/admin/config/people/accounts/fields`但是您也可以在不使用 Profile2的情况下添加字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-25T20:21:07.833

您可以使用[Entity API](https://drupal.org/project/entity)模块的元数据包装器和 hook_user_view() 很好地完成此功能。在模块的 .info 文件中添加对 Entity API 的依赖项，然后代码可能如下所示（假设您要将标题设置为用户的全名，并且您有名为 field_first_name 和 field_last_name 的字段）：

```
/**
 * Implements hook_user_view().
 */
function MYMODULE_user_view($account, $view_mode, $langcode) {
  // Set the page title of the user profile page to the user's full name.
  $wrapper = entity_metadata_wrapper('user', $account);
  $first_name = $wrapper->field_first_name->value();
  $last_name = $wrapper->field_last_name->value();
  if ($first_name && $last_name) {
    drupal_set_title($first_name . ' ' . $last_name);
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-23T15:28:34.033

一种更清洁的方法：

```
function mymodule_page_alter() {  

  global $user;  

  if(drupal_get_title() === $user->name) {  
    drupal_set_title('New value');  
  }  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T06:50:17.647

我有解决方案！！！

我在我的 template.php上的**preprocess_page**函数上添加了以下代码

```
 if(isset($variables['page']['content']['system_main']['field_name'])){
      $title=$variables['page']['content']['system_main']['field_name']['#object']->field_name['und'][0]['value'];
      drupal_set_title($title);
 } 
```

# php - 如何在 php 中将所有发布的数据作为一行获取？

> ID：13626050
> 
> 赞同：2
> 
> 时间：2012-11-29T12:40:21.320
> 
> 标签：php, post, form-data

我想在一行中捕获所有发布`name=asd&age=12&city=something`的数据，就像一个数组一样，同时使用表单发布数据。（我不想捕捉像`"$name=$_POST['name']")`

（问题 1：作为单行。
问题 2：作为数组。）

我怎样才能做到这一点 ？

-谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:44:16.503

我不太明白你想要什么，但我认为你正在寻找以下内容：

在单行上：

```
$raw_data = file_get_contents("php://input"); 
```

在一个数组中

```
$array_data = $_POST // this is already an array? 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:44:26.820

1.  `$postAsLine = file_get_contents("php://input");`
2.  `$postAsArray = $_POST;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:43:13.723

`echo $_SERVER['QUERY_STRING']`对于当前的 GET 查询

`http_build_query`对于任何数组

在你的情况下`http_build_query($_POST)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T12:44:08.283

您可以使用`http_build_query($yourKeyValArray)`which 从数组中创建查询字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T13:03:53.010

听起来像：

1.  `$getAll = serialize($_POST);`
2.  `$getAsArray = $_POST;`

祝你好运

# ruby - 多行正则表达式中的 TypeError 读取

> ID：13626052
> 
> 赞同：1
> 
> 时间：2012-11-29T12:40:28.160
> 
> 标签：ruby, regex, yaml, psych, syck

在一个文件中显然存储了一个多行正则表达式，可以`YAML::dump(b1)`毫无问题地保存。

问题，当 Syck 似乎对多行正则表达式有问题时，我该如何加载它？

```
b2 = YAML::load(File.open("browserObj.yaml", 'r'))

Syck::TypeError: Invalid Regular expression: "/\\A\\s*\n        ([a-zA-Z][\\-+.a-zA-Z\\d]*):                           (?# 1: scheme)\n        (?:\n           ((?:[\\-_.!~*'()a-zA-Z\\d;?:@&=+$,]|%[a-fA-F\\d]{2})(?:[\\-_.!~*'()a-zA-Z\\d;\\/?:@&=+$,\\[\\]]|%[a-fA-F\\d]{2})*) \\                   (?# 2: opaque)\n        |\n           (?:(?:\n             \\/\\/(?:\n \\                (?:(?:((?:[\\-_.!~*'()a-zA-Z\\d;:&=+$,]|%[a-fA-F\\d]{2})*)@)? \\       (?# 3: userinfo)\n                   (?:((?:(?:[a-zA-Z0-9\\-.]|%\\h\\h)+|\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|\\[(?:(?:[a-fA-F\\d]{1,4}:)*(?:[a-fA-F\\d]{1,4}|\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})|(?:(?:[a-fA-F\\d]{1,4}:)*[a-fA-F\\d]{1,4})?::(?:(?:[a-fA-F\\d]{1,4}:)*(?:[a-fA-F\\d]{1,4}|\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}))?)\\]))(?::(\\d*))?))? (?# 4: host, 5: port)\n               |\n                 ((?:[\\-_.!~*'()a-zA-Z\\d$,;:@&=+]|%[a-fA-F\\d]{2})+) \\                (?# 6: registry)\n               )\n             |\n             (?!\\/\\/)) \\                          (?# XXX: '\\/\\/' is the mark for hostport)\n \\            (\\/(?:[\\-_.!~*'()a-zA-Z\\d:@&=+$,]|%[a-fA-F\\d]{2})*(?:;(?:[\\-_.!~*'()a-zA-Z\\d:@&=+$,]|%[a-fA-F\\d]{2})*)*(?:\\/(?:[\\-_.!~*'()a-zA-Z\\d:@&=+$,]|%[a-fA-F\\d]{2})*(?:;(?:[\\-_.!~*'()a-zA-Z\\d:@&=+$,]|%[a-fA-F\\d]{2})*)*)*)? \\                   (?# 7: path)\n           )(?:\\?((?:[\\-_.!~*'()a-zA-Z\\d;\\/?:@&=+$,\\[\\]]|%[a-fA-F\\d]{2})*))? \\                (?# 8: query)\n        )\n        (?:\\#((?:[\\-_.!~*'()a-zA-Z\\d;\\/?:@&=+$,\\[\\]]|%[a-fA-F\\d]{2})*))? \\                 (?# 9: fragment)\n      \\s*\\z/x"
    from /usr/lib/ruby/1.9.1/syck/rubytypes.rb:284:in `yaml_new'
    from /usr/lib/ruby/1.9.1/syck.rb:135:in `transfer'
    from /usr/lib/ruby/1.9.1/syck.rb:135:in `node_import'
    from /usr/lib/ruby/1.9.1/syck.rb:135:in `load'
    from /usr/lib/ruby/1.9.1/syck.rb:135:in `load'
    from /usr/lib/ruby/1.9.1/syck.rb:146:in `block in load_file'
    from /usr/lib/ruby/1.9.1/syck.rb:145:in `open'
    from /usr/lib/ruby/1.9.1/syck.rb:145:in `load_file'
    from (irb):428
    from /usr/bin/irb:12:in `<main>' 
```

我已经看到有关 ruby​​types.rb 补丁的[讨论](http://www.ruby-forum.com/topic/1921684)，但除此之外什么都没有。

我宁愿不切换到 Psych，因为这会打开另一个蠕虫罐：

```
YAML::ENGINE.yamler = "psych"

# attempt to load from file again
TypeError: can't convert Fixnum into String 
```

这是怎么回事？有希望吗？在此错误使其不透明之前，我对 Syck 和 Psych 以及 YAML 解析的内部都一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:13:09.663

您可以将正则表达式存储为字符串。当您从 yaml 文件中读取它时，只需将字符串转换回正则表达式。`Regexp.new myregexp_str`- 这当然只是一种解决方法。

**更新：** 或者你可以做一些非常愚蠢的事情并修补心理来处理多行正则表达式。由于修补的方法太长了，所以[在这里](https://gist.github.com/4169393)抓住它。但这里是对真正修补的内容的解释。

```
module Psych
  module Visitors
    class ToRuby < Psych::Visitors::Visitor
       # ...
      def deserialize
        # ... L75
        when "!ruby/regexp"
        o.value =~ /^\/(.*)\/([mixn]*)$/m # <- notice the added "m" for multiline mode
        # ...
      end
    end
  end
end 
```

使用`ruby-1.9.3-p194`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T13:47:45.443

对于潜伏在周围的每个人来说，这看起来像是一个老虫子。我刚刚尝试使用 ruby​​ 1.9.3，我得到了这个： `[3] pry(main)> YAML.load(YAML.dump(/asd/m)) => /asd/m`

# shopify - Shopify webhooks API 忽略了格式参数

> ID：13626054
> 
> 赞同：0
> 
> 时间：2012-11-29T12:40:31.193
> 
> 标签：shopify, webhooks

我们昨天发现，在使用 api 创建 Shopify webhook 时，指定的 webhook 格式被忽略了。

例如：

```
>>> hook = shopify.Webhook()
>>> hook.topic = 'products/update'
>>> hook.address = '<REDACTED>'
>>> hook.format = 'json'
>>> hook.save()
True
>>> shopify.Webhook.find()
[webhook(2302062)]
>>> shopify.Webhook.get(2302062)
{'format': 'xml', 'created_at': datetime.datetime(2012, 11, 29, 12, 30, 55, tzinfo=tzutc()), 'updated_at': datetime.datetime(2012, 11, 29, 12, 30, 55, tzinfo=tzutc()), 'topic': 'products/update', 'address': '<REDACTED>', 'id': 2302062} 
```

在上面的示例中，我们尝试将 webhook 格式设置为“json”，但 webhook 是使用“xml”格式创建的

这以前一直有效。昨天是我们第一次看到这个问题。

通过 Web 管理界面创建的 Webhook 仍然允许将格式指定为 json，但是 Web 管理界面不显示通过 api 创建的任何 Webhook，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:23:06.563

这是 shopify_python_api 中的一个错误，其中格式是在类而不是资源属性上设置的。我刚刚修复了这个问题，并在 1.0.3 版本中发布了 shopify_python_api，所以升级后问题应该会消失。

# gwt - 可以使用事件总线在不同的项目或应用程序之间进行通信吗

> ID：13626061
> 
> 赞同：1
> 
> 时间：2012-11-29T12:40:50.967
> 
> 标签：gwt, event-bus

我正在为我们的内部使用创建一个 gwt 小部件库。每当我的 gwt 小部件中的任何控件发生任何事件时，我都被要求触发一个事件，然后使用我的小部件的应用程序或项目将监听该事件。这个概念似乎类似于我之前用于我的其他 gwt 项目的事件总线，用于在同一页面上不同区域中显示的不同视图之间进行通信。这很好，因为我在整个应用程序中使用相同的事件总线实例。但是现在我将在我的项目中使用事件总线的特定实例，但使用它的应用程序将不会使用相同的实例。我是继续使用它还是有另一种方法可以在不同的应用程序之间触发事件。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:28:37.757

首先，您所说的“不同的应用程序”是什么？它们会在同一个浏览器中运行吗？它们会部署在同一台服务器上吗？

如果`EventBus`它们不共享一个公共的`EventBus`.

如果您的应用程序在同一选项卡中运行，您可以将其存储`EventBus`在静态变量中，并从同一选项卡中的其他应用程序中检索它。

如果您的应用程序在同一个浏览器中运行（在不同的选项卡上），您可以使用`LocalStorage`它进行通信。你可以看看：

*   [使用本地存储的选项卡间通信](http://blog.fastmail.fm/2012/11/26/inter-tab-communication-using-local-storage/)
*   [使用 HTML5 Web 存储进行进程间通信](http://www.wintellect.com/cs/blogs/jprosise/archive/2011/03/10/using-html5-web-storage-for-interprocess-communication.aspx)
*   [使用 localStorage 跨窗口共享数据](http://www.codediesel.com/javascript/sharing-messages-and-data-across-windows-using-localstorage/)。

GWT在. `LocalStorage`_`SessionStorage``com.google.gwt.storage.client.Storage`

如果它们不在同一个浏览器中运行，您将不得不往返于服务器以从一个应用程序与另一个应用程序通信（使用 RPC 发送消息，并使用 RPC 轮询检查新消息 - 或使用服务器推送技术，请参阅[GWTEventService](http://code.google.com/p/gwteventservice/)和[ServerPushFAQ](http://code.google.com/p/google-web-toolkit-incubator/wiki/ServerPushFAQ)）。

如果它们没有部署在同一台服务器上，您将不得不往返于服务器并在服务器之间进行通信（使用套接字、RPC、Web 服务......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:42:08.773

RabbitMQ 来救援......它是此类问题的规范解决方案。

[http://www.rabbitmq.com/](http://www.rabbitmq.com/)

它是作为软件总线创建的，就像硬件总线对计算机系统一样。

我特别喜欢[http://manning.com/videla/](http://manning.com/videla/)这本书。它详细介绍了该方法，概述了源代码及其背后的体系结构。很实用。

# ruby - 一次更改数组的所有项

> ID：13626063
> 
> 赞同：0
> 
> 时间：2012-11-29T12:41:06.887
> 
> 标签：ruby, arrays, ruby-on-rails-3, performance, postgresql

我想知道是否有一种方法可以避免遍历列表的所有项目以访问相同的属性。

```
people = [John, Bob, Dave, Eric] 
```

每个都有一个数字属性（即`John.num`）

所以而不是`people.map{|person| person.num =10}`

我可能会`people.[...some magic..].num = 10`

循环遍历所有内容似乎是一种浪费。也许使用 SQL 或类似的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:55:16.353

如果 people 是 ActiveRecord 模型，则可以使用[update_all](http://apidock.com/rails/ActiveRecord/Relation/update_all)方法

```
Person.update_all("num=10") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:08:43.890

我的情况是一个非 AR 对象，你可以使用猴子补丁阵列，但我认为这是可怕的方式......我鼓励你不要那样做！

```
class Person
  def num=(value)
    @num = value
  end
  def num
    @num
  end
end

class Array

  def num value = 10
    self.each do |element|
      element.__send__(:num=, 10) if element && element.respond_to?(:num)
    end
  end

end

begin
  john = Person.new
  bob  = Person.new
  [john, bob].num
  puts "john.num => #{john.num}"
end 
```

# windows-services - Windows 服务名称的更改不生效

> ID：13626073
> 
> 赞同：0
> 
> 时间：2012-11-29T12:41:31.473
> 
> 标签：windows-services, multiple-instances, installutil

这本质上是对以下问题的跟进：

[如何增加/减少 Windows 服务的实例数？](https://stackoverflow.com/questions/12242568/how-to-increase-decrease-the-number-of-instances-of-a-windows-service)

我尝试了以下方法：

```
installutil /instance_name=instance1 mysvc.exe 
```

上面的命令完成了安装服务的工作；您可以看到在 mmc 控制台 (services.msc) 中列出的服务为“instance1”。但是在调试时，我注意到该`ServiceName`属性显示了我在设计时在设计器中设置的值。

我期待它显示“instance1”。如何正确解决这个问题？

# git - git rebase 提交历史不会被拉入分支

> ID：13626082
> 
> 赞同：2
> 
> 时间：2012-11-29T12:42:04.467
> 
> 标签：git, version-control

所以，我们有 master 和分支 X，它与 master 是最新的，还有一些提交。

我已经改变了 master 的基础，改变了历史 - 压缩了一些提交，改写了其他的。

然后，我尝试用 master 重新设置分支 X 的基础 - 似乎改写词不会进入分支 X - 它们仍然是旧的提交消息 - 我如何更新分支 Xs 提交历史以匹配 master？

（顺便说一句，壁球和修复变基似乎很好，它似乎只是改写）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:40:39.137

如果你重新设置你的 master，branch-X 不再是最新的 master。我认为解决这个问题的最简单方法是使用 git cherry-pick。

1.  从master创建一个新分支，`git checkout -b branch-Y master`
2.  `git cherry-pick <sha>`对于您需要从 branch-X 提交的每个提交
3.  您可以删除分支-X 并将分支-Y 重命名为分支-X`git branch -f branch-X branch-Y; git checkout branch-X; git branch -D branch-Y`

我还建议在广泛使用它之前阅读更多关于 rebase 的内容：[Git rebase or merge](https://stackoverflow.com/questions/13610138/git-rebase-or-merge/13610439#13610439)

# c - 如何安全地转换/复制 volatile 变量？

> ID：13626085
> 
> 赞同：14
> 
> 时间：2012-11-29T12:42:07.477
> 
> 标签：c, volatile

```
volatile char* sevensegment_char_value;

void ss_load_char(volatile char *digits) {
    ...
    int l=strlen(digits);
    ...
 }

 ss_load_char(sevensegment_char_value); 
```

在上面的例子中，我收到了来自 avr-gcc 编译器的警告

```
Warning 6   passing argument 1 of 'strlen' discards 'volatile' qualifier from pointer target type [enabled by default] 
```

所以我必须以某种方式将值从 volatile 复制到 non-volatile var？什么是安全的解决方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T12:57:19.187

C 中没有“内置”解决方法之类的东西。Volatile 告诉编译器，变量的内容（或者在你的情况下，变量指向的内存）可以在编译器没有注意到的情况下发生变化并强制编译器直接从数据总线读取数据，而不是使用寄存器中可能存在的副本。因此，volatile 关键字用于避免编译器优化引起的奇怪行为。（如果你愿意，我可以进一步解释）

在您的情况下，您有一个声明为 volatile 的字符缓冲区。如果您的程序在不同的上下文（例如 ISR）中更改此缓冲区的内容，则必须实现某种同步机制（例如禁用特定中断等）以避免数据不一致。获取“锁定”（禁用中断）后，您可以逐字节地将数据复制到本地（非易失性）缓冲区，并在该缓冲区上工作以完成例程的其余部分。

如果缓冲区不会更改您的读取访问上下文的“外部”，我建议省略 volatile 关键字，因为它没有用处。

要判断正确的解决方案，需要更多关于您的确切用例的信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-29T12:58:02.783

标准库例程不是为处理`volatile`对象而设计的。最简单的解决方案是在对易失性内存进行操作之前将其读入普通内存：

```
void ss_load_char(volatile char *digits) {
  char buf[BUFSIZE];
  int i = 0;
  for (i = 0; i < BUFSIZE; ++i) {
    buf[i] = digits[i];
  }
  int l=strlen(buf);
  ...
} 
```

这`BUFSIZE`是易失性存储器区域的大小。

根据易失性存储器的配置方式，您可能应该调用例程来复制内容，而不仅仅是使用循环。请注意，这`memcpy`不起作用，因为它不是为使用`volatile`内存而设计的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-29T12:55:05.097

编译器警告仅意味着 strlen() 不会将您的指针视为易失性指针，即在计算字符串长度时它可能会将指针缓存在寄存器中。我想，你没问题。

一般来说，`volatile`意味着编译器不会缓存变量。看这个例子：

```
extern int flag;
while (flag) { /* loop*/ } 
```

如果 ，这将永远循环`flag != 0`，因为编译器假定标志没有“从外部”更改，就像不同的线程一样。如果你想等待其他线程的输入，你必须这样写：

```
extern volatile int flag;
while (flag) { /* loop*/ } 
```

现在，每次循环循环时，编译器都会真正查看标志。这可能更符合我们在这个例子中的意图。

回答您的问题：如果您知道自己在做什么，只需使用`int l=strlen((char*)digits)`.

# iphone - 出于开发目的，如何将 iPod 5.0 升级到 5.1（而不是 6.0）？

> ID：13626090
> 
> 赞同：0
> 
> 时间：2012-11-29T12:42:24.407
> 
> 标签：iphone, ios, xcode

我们希望以 iOS 5.1 及更高版本为目标。我们有一台装有 iOS 6.0 的设备和一台装有 iOS 5.0 的设备。有没有办法（无需越狱）将 iOS 5.0 升级到 iOS 5.1？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:52:14.980

是不是可以从某个地方下载 iOS 5.1 ipsw[例如](http://www.redmondpie.com/download-5.1-ios-for-iphone-4s-4-3gs-ipad-and-ipod-touch-direct-links/)，只需按住 alt 按钮并单击恢复然后选择您的 ipsw 文件即可通过 iTunes 安装它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:56:42.580

只要 Apple 仍在签署 iOS 5.1，它可能仍然是可能的，我认为他们是。去这里：[http ://www.iclarified.com/entry/index.php?enid=757](http://www.iclarified.com/entry/index.php?enid=757)

然后，只需执行这些步骤。

一旦你有 5.1.1 固件

1.  打开 iTunes
2.  对于 Mac；在iTunes中点击选项/恢复，选择刚刚下载的5.1.1固件，确认恢复。

希望这会奏效。最坏的情况是，iTunes 告诉您无法升级。但我相信这应该仍然有效。但你最好快点行动。

# python - 用于简约 XML 数据库的 GUI

> ID：13626092
> 
> 赞同：0
> 
> 时间：2012-11-29T12:42:27.747
> 
> 标签：python, xml, database

我想创建一个非常简单的数据库来描述我过去从事的项目，其中包含少量文本和数字字段（体积、客户名称、日期等）。为此想到的解决方案是 XML 格式（每个项目都有单独的文件，或者包含所有内容的单个文件）。我当然可以使用 Python 进行编程（我知道有一些简单的命令），但是这个应用程序似乎很明显，必须已经有简单的 GUI 可以做到这一点。

所以我的问题是：是否有简单的 GUI 程序（在 Linux 中运行）可以创建和管理这种极其简单的 XML 数据库？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:09:47.647

如果您将数据存储在 MySQL 数据库中，那么[phpmyadmin](http://www.phpmyadmin.net/home_page/index.php)可以[将该数据导出](http://wiki.phpmyadmin.net/pma/export)为多种格式，包括 XML。

# php - 如何在一个控制器中验证多个模型

> ID：13626093
> 
> 赞同：0
> 
> 时间：2012-11-29T12:42:26.683
> 
> 标签：php, cakephp, phpmyadmin, phpunit

我为我的网站创建了一个，在这个控制器中`AdminsController`我使用了多个模型 `index`，如：、、、、、' `Static_page_view`、、、。`Admin``Categories``Products``contact``User``Ram`

现在我遇到了验证这些模型期望默认模型（管理员）的问题。

我该如何验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:55:54.813

您可能正在寻找 [http://www.dereuromark.de/2010/06/20/validating-multiple-models-at-once/](http://www.dereuromark.de/2010/06/20/validating-multiple-models-at-once/)

使用 saveAll() 或

```
if ($this->Model1->validates() & $this->Model2->validates() & ...) {} 
```

文档：

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveall-array-data-null-array-options-array)

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)

[http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-savemany-array-data-null-array-options-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-savemany-array-data-null-array-options-array)

取决于你到底需要什么

# javascript - 重新声明 JavaScript 变量

> ID：13626094
> 
> 赞同：7
> 
> 时间：2012-11-29T12:42:32.067
> 
> 标签：javascript, function, scope

在以下代码中：

```
var greeting = "hi";

function changeGreeting() {
    if (greeting == "hi") {
        var greeting = "hello";
    }

    alert(greeting);
}

changeGreeting();​ 
```

...`greeting`未定义。但是，如果我删除`var`并更改`changeGreeting()`为：

```
function changeGreeting() {
    if (greeting == "hi") {
        greeting = "hello";
    }

    alert(greeting);
} 
```

...我按预期得到“你好”。

我永远不会在我的代码中重新声明这样的变量，但为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-29T12:44:58.240

JavaScript 变量具有函数作用域。因此，`var greeting`函数内部的存在将声明一个局部`greeting`变量，在条件中提到它时将未定义`if`：全局变量在函数内部将不可见，被局部变量所掩盖。因此，`if`不会发生，分配`hello`不会发生，变量仍然是未定义的。

在第二个示例中，您始终使用全局变量，它不会被局部变量所掩盖（因为，`var greeting`函数内部没有），并且事情按您预期的那样工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T12:53:05.690

这很简单：JS 将*变量声明*提升到当前作用域的顶部，但是任何操作（包括赋值）都不会被提升（在同一作用域内，请参阅第二种情况说明），当然。所以你的片段被翻译成

```
(function()
{
    var currentSize;//undefined
    if (currentSize == 'hi')//always false
    {
        currentSize = 'hello';//assignment that will never be
    }
    alert(currentSize);//alerts undefined, of course
}()); 
```

通过省略 var，继续进行范围扫描（检查在全局范围内声明的变量）。~~可悲的是，这样做时，第一次使用 var 的上下文丢失了（在分支内），并且赋值也被提升了。一个隐含的全局被翻译为~~：
谢天谢地，这不是真的。我认为是这样，因为我在控制台中测试了一些似乎证实了这一点的东西。在这种情况下@amadan 是对的：您正在使用全局变量（`greeting`当我发布此内容时错误地在您的代码段中调用）。我将留下下面的代码（更正它）以显示隐含的全局变量实际上是什么，希望它有助于某些人理解 JS 中的作用域/作用域扫描。

```
var currentSize = 'hello';
//well, actually implied globals can be deleted, so it's more like
Object.defineProperty(this,'currentSize',{value:undefined,
                                          writable:true,
                                          enumerable:true,
                                          configurable:true});
(function()
{
    if (currentSize == 'hi')//always false
    {//this still doesn't get executed
        currentSize = 'hello';//assignment that will never be
    }
    alert(currentSize);//alerts undefined
}()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T12:46:52.280

在您的第一个代码片段中，您正在检查全局变量，该变量不存在 -> if 条件不通过。

在 javascript 作用域上查看此内容以及如何使用变量[Javascript garden - 函数作用域](http://bonsaiden.github.com/JavaScript-Garden/#function.scopes)

# google-chrome - 来自特定域的 chrome 扩展块

> ID：13626095
> 
> 赞同：5
> 
> 时间：2012-11-29T12:42:33.243
> 
> 标签：google-chrome, google-chrome-extension

是否可以禁止来自特定域的 chrome 扩展。

例如，我希望我安装的扩展在其他域上运行，但在域上`test.com`我根本不需要扩展。

我试过`tools->extensions`了，但在那里我只能禁止隐身和某些地方的扩展。

真的有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:19:14.103

这是不可能的。您必须使用隐身模式或创建一个没有任何扩展名的单独用户（chrome menu->Settings->Users）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-21T10:13:21.317

有一个扩展自动化可以为您处理：

[https://chrome.google.com/webstore/detail/extension-automation/ghopjgdkodchjclkkfdekhjfomdbakkb](https://chrome.google.com/webstore/detail/extension-automation/ghopjgdkodchjclkkfdekhjfomdbakkb)

自动启用和禁用指定站点的扩展。为了更简单的浏览和更好的性能。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T13:37:38.457

以下代码禁用[http://www.google.co.in/](http://www.google.co.in/)的扩展并启用其他域，您可以根据需要自定义它；它仅适用于您创建的扩展和所有已安装的实例

![在此处输入图像描述](../Images/75abdb60aef9ed1231d1fc580b8683fd.png)

![在此处输入图像描述](../Images/62c4dc7c93f49119fd0bb1ec7a5db2ac.png)

***清单.json***

```
{
"name":"Browser Action Demo",
"description":"This Demonstrates Demo of Browser Action",
"browser_action":{
"default_icon":"screen.png",
"default_title":"Browser Action Demo"
},
"background":{
    "scripts":["background.js"]
},
"manifest_version":2,
"version":"1"
} 
```

***背景.js***

```
function browseraction(){
    chrome.tabs.query({"url":"http://www.google.co.in/"},function (tabs){
        for(i=0;i<tabs.length;i++){
            chrome.browserAction.disable(tabs[i].id);
        }
    });
}
window.onload=browseraction; 
```

# android - 原因：java.lang.UnsupportedOperationException：无法转换为维度：type=0x12

> ID：13626102
> 
> 赞同：2
> 
> 时间：2012-11-29T12:42:48.743
> 
> 标签：android, android-layout

嗨，我正在开发应用程序。我的应用程序在所有设备上都能完美运行。但是当我们在 mdpi 手机上运行这个应用程序时，它给我这个错误：

`Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x12.`

请在我错的地方帮助我。

这是我的代码：-

```
<RelativeLayout
    android:id="@+id/LevLayId"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginTop="140dp" >

    <TextView
        android:id="@+id/totlScorId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:background="@drawable/score_timer"
        android:gravity="center"
        android:textColor="#ffffff" />

    <TextView
        android:id="@+id/levelId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:background="@drawable/score_timer"
        android:gravity="center"
        android:textColor="#ffffff" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/LayAboButId"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/option_last_row"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="7px"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/opt3Btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_normal_new"
            android:gravity="center|center_vertical"
            android:textColor="#ffffff"
            android:textSize="11dp" />

        <Button
            android:id="@+id/opt4Btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_normal"
            android:gravity="center|center_vertical"
            android:textColor="#ffffff"
            android:textSize="11dp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/option_pre_row"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/option_last_row"
        android:layout_marginBottom="3px"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/opt1Btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_normal_new"
            android:gravity="center|center_vertical"
            android:textColor="#ffffff"
            android:textSize="11dp" />

        <Button
            android:id="@+id/opt2Btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/option_normal"
            android:gravity="center|center_vertical"
            android:textColor="#ffffff"
            android:textSize="11dp" />
    </LinearLayout>
</RelativeLayout>

<RelativeLayout
    android:id="@+id/imgLayId"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="70dp"
    android:layout_marginRight="@id/totlScorId"
    android:layout_marginTop="70dp" >

    <ProgressBar
        android:id="@+id/progressBar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" />

    <ImageView
        android:id="@+id/imgViewId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true" />

    <ImageView
        android:id="@+id/imgViewframeId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:background="@drawable/photo_frame" />
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:08:43.253

使用一种父布局并使用下面的 XML 代码而不是您的代码，它将解决您的问题。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:android1="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:id="@+id/LevLayId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginTop="140dp" >

        <TextView
            android:id="@+id/totlScorId"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:background="@drawable/score_timer"
            android:gravity="center"
            android:textColor="#ffffff" />

        <TextView
            android:id="@+id/levelId"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:background="@drawable/score_timer"
            android:gravity="center"
            android:textColor="#ffffff" />
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/LayAboButId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/option_last_row"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_marginBottom="7px"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/opt3Btn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/option_normal_new"
                android:gravity="center|center_vertical"
                android:textColor="#ffffff"
                android:textSize="11dp" />

            <Button
                android:id="@+id/opt4Btn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/option_normal"
                android:gravity="center|center_vertical"
                android:textColor="#ffffff"
                android:textSize="11dp" />
        </LinearLayout>

        <LinearLayout
            android:id="@+id/option_pre_row"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@id/option_last_row"
            android:layout_marginBottom="3px"
            android:orientation="horizontal" >

            <Button
                android:id="@+id/opt1Btn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/option_normal_new"
                android:gravity="center|center_vertical"
                android:textColor="#ffffff"
                android:textSize="11dp" />

            <Button
                android:id="@+id/opt2Btn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/option_normal"
                android:gravity="center|center_vertical"
                android:textColor="#ffffff"
                android:textSize="11dp" />
        </LinearLayout>
    </RelativeLayout>

    <RelativeLayout
        android:id="@+id/imgLayId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="70dp"
        android:layout_marginRight="@id/totlScorId"
        android:layout_marginTop="70dp" >

        <ProgressBar
            android:id="@+id/progressBar"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true" />

        <ImageView
            android:id="@+id/imgViewId"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true" />

        <ImageView
            android:id="@+id/imgViewframeId"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"
            android:background="@drawable/photo_frame" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T13:59:08.337

今天刚开始得到这个，所以发现了导致它的变化。就我而言，这是因为我必须为新设备创建一个新的布局目录 layout-xhdpi。现在，新设备认为它是“大”的（即它正在使用 layout-large 中的布局）；但它真的是 xhdpi。

所以在新的布局 xml 文件中，我添加了对 values-large/dimens.xml 中的值的引用

但是，这不起作用。

使用其中的引用值创建 values-xhdpi/dimens.xml，解决了这个问题。

TL;DR 确保每个 layout-XXXXX 目录都有一个 values-XXXXX 目录，并且所有相关值都在其中。我相信适用于所有尺寸的值都可以在 values/dimens.xml 中找到，但这不是我的应用程序的结构，所以我无法证明这一点。

# oauth - 使用 oauth 令牌更新 Google fusiontable？

> ID：13626107
> 
> 赞同：0
> 
> 时间：2012-11-29T12:43:07.613
> 
> 标签：oauth, oauth-2.0, google-fusion-tables, insert-update

我已经拥有令牌并且可以访问我的令牌，其范围是直到 fusiontable。 [http://www.udayan2k12.com/token.html](http://www.udayan2k12.com/token.html)

```
<script type="text/javascript">
   (function() {
     var GOOGLE_AUTH_URL = "https://accounts.google.com/o/oauth2/auth";
     var GOOGLE_CLIENT_ID = "365219651081-7onk7h52kas6cs5m17t1api72ur5tcrh.apps.googleusercontent.com";
     var PLUS_ME_SCOPE = "https://www.googleapis.com/auth/fusiontables";

     var button = document.createElement("button");
     button.innerText = "Authenticate with Google";
     button.onclick = function() {
       var req = {
         "authUrl" : GOOGLE_AUTH_URL,
         "clientId" : GOOGLE_CLIENT_ID,
         "scopes" : [ PLUS_ME_SCOPE ],
       };
       oauth2.login(req, function(token) {
         alert("Got an OAuth token:\n" + token + "\n"
             + "Token expires in " + oauth2.expiresIn(req) + " ms\n");
             document.getElementById('token').innerHTML = token;
       }, function(error) {
         alert("Error:\n" + error);
       });
     };
     document.body.appendChild(button);

     var clearTokens = document.createElement("button");
     clearTokens.innerText = "Clear all tokens";
     clearTokens.onclick = oauth2.clearAllTokens;
     document.body.appendChild(clearTokens);
   })();
  </script> 
```

但问题是我无法使用该令牌来更新融合表。我想通过使用 JavaScript 来专门更新它。

有人可以提供我使用此令牌使用融合表 sql 更新 fusiontable 的代码吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:24:46.557

您应该使用[JavaScript Google API 客户端](http://code.google.com/p/google-api-javascript-client)，然后很容易向 Google API 发出经过身份验证的请求（请参阅[他们的“示例”页面](http://code.google.com/p/google-api-javascript-client/wiki/Samples)）：

```
gapi.client.setApiKey('YOUR API KEY');
var query = "INSERT INTO tableId (id, name) VALUES (1, 'test')";
gapi.client.load('fusiontables', 'v1', function(){
            gapi.client.fusiontables.query.sql({sql:query}).execute(function(response){console.log(response);});
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:50:30.827

我知道你们中的大多数人都在为 google auth 以及插入和更新融合表而受苦。我正在提供整个代码如何使用 gauth lib 以简单的方式插入

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Authorization Request</title>
<script src="https://apis.google.com/js/client.js"></script>
    <script type="text/javascript">
      function auth() {
        var config = {
          'client_id': '365219651081-7onk7h52kas6cs5m17t1api72ur5tcrh.apps.googleusercontent.com',
          'scope': 'https://www.googleapis.com/auth/fusiontables'
        };
        gapi.auth.authorize(config, function() {
          console.log('login complete');
          console.log(gapi.auth.getToken());
        });
      }
      function insert_row(){
            alert("insert called");
            gapi.client.setApiKey('AIzaSyA0FVy-lEr_MPGk1p_lHSrxGZDcxy6wH4o');

            var query = "INSERT INTO 1T_qE-o-EtX24VZASFDn6p3mMoPcWQ_GyErJpPIc(Name, Age) VALUES ('Trial', 100)";

            gapi.client.load('fusiontables', 'v1', function(){
                gapi.client.fusiontables.query.sql({sql:query}).execute(function(response){console.log(response);});
            });

        }
    </script>
</head>

<body>
<button onclick="auth();">Authorize</button>
<p>&nbsp;</p>
<button onclick="insert_row();">Insert Data</button>
</body>
</html> 
```

# json - 用于观看 sqlite 表并以 JSON 格式发布的 Mac 实用程序？

> ID：13626111
> 
> 赞同：1
> 
> 时间：2012-11-29T12:43:13.407
> 
> 标签：json, macos, sqlite, apache-camel

任何人都知道：

*   将在 Apple Mac 上运行的实用程序
*   收听本地 sqlite 表上的一组表的更改并通过
*   然后的配置机制
*   HTTP 将这些正在进行的更改发布为 JSON 请求
*   到远程 http 或 apache 骆驼服务器？

谢谢，马丁。

# javascript - Iscroll Wrapper 没有得到高度

> ID：13626120
> 
> 赞同：0
> 
> 时间：2012-11-29T07:17:34.850
> 
> 标签：javascript, jquery, html

我得到以下代码：

```
 <div data-role="content" height="100%" data-iscroll>
        <div class="homebutton_zeile">
            <a id="picture_home" href="#pictrues">
            <div class="homebutton_all">
                <div class="homebutton_name">Picture</div>
                    <div class="homebutton_picture">
                        <img src="images/picture.png" alt="image"
                                        style="position: relative;">
                    </div>
                </div>
            </a>        
        </div>
    </div>
</div> 
```

我的 CSS 类

```
.homebutton_zeile{
 width: 100%;
 height: 30%;
}

.homebutton_all{
 width: 30%;
 height: 90%;
 float:left;
 margin-left: 2%;
 margin-top:15px;
}

.homebutton_picture{
 position: relative;
 width: 100%;
 height: 85%;
 float: left;
 background-color: #AAC7BD;
 border: 1px solid black;
 border-radius: 15px;
 box-shadow:8px 8px 8px #666;
}

.homebutton_name{
 text-align:center;
 position: relative;
 top:-10px;
 width: 100%;
 height: 15%;
 margin-left: auto;
 text-decoration:none;
 color:black;
} 
```

我在用：

*   iscroll.js
*   jQuery 1.8.2
*   jQuery 移动版 1.2.0
*   jqery mobile iscrollview。

如果它需要知道`jstorage.js`和`fastclick.js`

但是上面的 div 在 iscroll 的包装器上没有得到高度。还有一个登录前，登录后会自动显示此页面的`$.mobile.changePage("#home");`功能。

我尝试在 changePage 功能之前将其作为第一页，它给了我同样的效果。例如，如果我在 `<div data-role="content" height="100%" data-iscroll>&nbps;` The Wrapper 之后放置一个 15px 的高度，则 &nbps; 但不适用于里面的图像。

# c++ - cmake minizip 链接

> ID：13626122
> 
> 赞同：3
> 
> 时间：2012-11-29T12:43:43.870
> 
> 标签：c++, cmake

我需要在我的项目中添加一个依赖项到 minizip，它是 zlib 的一部分。我的系统上有图书馆，所以我可以

```
target_link_libraries (myproject /usr/lib64/libminizip.so) 
```

但我不知道什么是便携的方法。我可以毫无问题地找到并链接 zlib 本身

```
find_package(ZLIB REQUIRED) 
```

但这并没有链接到 minizip 库，因为`${ZLIB_LIBRARIES}`变量设置为`/usr/lib64/libz.so`并且我需要`/usr/lib64/libminizip.so`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:43:43.870

在这种情况下使用 package-config 宏。

首先添加

```
INCLUDE (FindPkgConfig) 
```

然后在链接步骤之前，我们需要用正确的信息填充 UNZIP_LIBRARIES 变量：

```
if (PKG_CONFIG_FOUND)
        PKG_CHECK_MODULES(UNZIP minizip)
endif (PKG_CONFIG_FOUND) 
```

最后，链接步骤：

```
target_link_libraries (myproject ${UNZIP_LIBRARIES}) 
```

# c# - 如何忽略自动分页符？

> ID：13626124
> 
> 赞同：1
> 
> 时间：2012-11-29T12:43:48.117
> 
> 标签：c#, excel, excel-interop

我正在使用 Excel 互操作来创建报告。

我正在尝试以编程方式设置分页符。我通过使用以下方法成功地做到了这一点：

```
 this.ActiveWorksheet.HPageBreaks.Add(this[row + 1, 9].Range);
        this.ActiveWorksheet.VPageBreaks.Add(this[row + 1, 8].Range); 
```

（this[row...col] 代码指的是我们的基本 Excel 生成器，但最终指的是具有给定列/行的范围）。

当报告生成时，我可以看到我手动添加的分页符；但是自动分页符仍然出现，并且它们位于错误的位置，因此最终这使我的代码无用。我只需要使用我的分页符并忽略自动分页符。

有可能这样做吗？

我试过重置分页符无济于事。我还尝试在工作表页面设置属性上设置 FitToPagesWide 属性，但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:41:36.437

我通过设置解决了这个问题

`PageSetup.Zoom = false;`

在设置 FitToPagesWide = 1 之前

似乎除非您将缩放显式设置为 false，否则 FitToPagesWide/Tall 属性将被忽略。

# java - 在 Android 中每 10 分钟调用一次方法

> ID：13626126
> 
> 赞同：2
> 
> 时间：2012-11-29T12:43:50.887
> 
> 标签：java, android, multithreading, android-intent

我有一个带有按钮的活动。当我按下那个按钮时，应该每 10 分钟调用一次方法。

我正在尝试使用 a`Handler`和 a来做到这一点`Timer`。但无法得到结果。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-29T12:49:41.987

创建一个`Timer`对象并给它一个`TimerTask`执行您想要执行的代码的对象。

```
Timer timer = new Timer ();
TimerTask hourlyTask = new TimerTask () {
    @Override
    public void run () {
        // your code here...
    }
};

// schedule the task to run starting now and then every hour...
timer.schedule (hourlyTask, 0l, 1000*60*60);   // 1000*10*60 every 10 minut 
```

使用 Timer 对象的优点是它可以处理多个 TimerTask 对象，每个对象都有自己的计时、延迟等。您还可以通过将 Timer 对象声明为类来启动和停止定时器变量什么的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T12:51:09.070

使用以下代码，其中 notifyme() 在您作为第二个参数给出的毫秒数之后被重复调用

```
 Timer timer = new Timer();
    timer.schedule(new TimerTask()
    {
       public void run()
       {
           View v = new View(getApplicationContext());
           notifyMe(v);
       }},4000,100000);

    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T12:50:03.150

如果您不需要在后台运行您的应用程序，请使用[AlamManager 。](http://developer.android.com/reference/android/app/AlarmManager.html)否则，您可以拥有一个不断运行的服务和一个[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T12:52:33.323

[警报管理器](http://developer.android.com/reference/android/app/AlarmManager.html)适用于您希望应用程序代码在特定时间运行的情况，即使您的应用程序当前没有运行。

对于正常的计时操作（滴答声、超时等），使用 Handler 更容易、更高效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T13:05:48.580

**-**它更好用`Service`，它`Activity` **没有** `View`。

**-** `Service`可以有**界或无界**到`Activity`.

**有关服务示例，请参阅此链接：**

[http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

**-**但是，如果您仍然想使用 Thread，那么试试这个...

**1.**如果你的`Thread` **(Non-UI)**没有**在Dedicated UI线程上发布任何数据，那么就没有必要使用Handler，但如果是，那么Handler是必须的。**

**例如：**

```
Handler h;    
onCreate() {    
  h = new Handler();
  new Thread(new Runnable() {
    public void run(){
      while(true){
        try{
          h.post(new Runnable(){
            public void run(){
              go();
            }
          }
         TimeUnit.MINUTES.sleep(10);
       }
       catch(Exception ex){
       }
     }
    }
  }).start();
} 
public void go(){
  // This method is called every 10 minutes
} 
```

`Painless Threading`您也可以使用称为的东西来做同样的事情`AsyncTask`。

# javascript - 数组不传递数据

> ID：13626127
> 
> 赞同：2
> 
> 时间：2012-11-29T12:43:50.667
> 
> 标签：javascript, jquery, arrays, highcharts

从 php 页面获取数据，我将`chartData`数组作为第二个参数传递给 pie(title,chartData) 函数。
现在 `chartData`阵列正在放置，`data: [ chartData ]`但它不起作用。
但是当我用键手动添加时，它就可以工作了`data: [ chartData[0],chartData[1], ]`。
但我不想用 key 手动提及它。我想像`data: [ chartData ]` 我必须做什么一样自动安排工作？

```
function createChart(chart) {
if ( chart == 'pie' ) {     

    var title = $("#chart-title").val();        

    /***************** Data Elements ****************/
    var totalElements = $("#addMoreRowNo").val();

    var chartData = new Array();
    for(var j = 1; j <= totalElements; j++)
    {                       
        var key = $("#chart-pie-text_"+j).val();
        var value = $("#chart-pie-percentage_"+j).val();
        var data = [key, parseFloat(value)];
        chartData[j-1] = data;
    }       
    /***************** Data Elements ****************/

    pie(title,chartData);
  }
}

function pie(title,chartData) {
var chart;

chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false
    },
    title: {
        text: title
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.percentage}%</b>',
        percentageDecimals: 1
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
                enabled: true,
                color: '#000000',
                connectorColor: '#000000',
                formatter: function() {
                    return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                }
            }
        }
    },
    series: [{
        type: 'pie',
        name: 'Browser share',
        data: [

           chartData      
               /*chartData[0],
               chartData[1],*/

            //['Active Postings (13)', 20.00],

        ]
    }]
});    
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:50:01.567

我很确定您的问题可以通过更换来解决

```
data: [
  chartData
] 
```

和

```
data : chartData 
```

您编写它的方式是将数据定义为包含chartData 的数组，它本身就是一个数组。但是，您表示您正在测试它的方式是从 chartData 中获取项目并将每个项目放入数据中，这会产生不同的结构。

# php - PHP PDO 中的 echo ñ/Ñ

> ID：13626128
> 
> 赞同：0
> 
> 时间：2012-11-29T12:43:54.057
> 
> 标签：php, pdo

我的mysql中有一个带有“ñ/Ñ”字符的单词。但是当我打印它时，它被一个带问号的菱形取代。这是它到目前为止所做的，但没有奏效。

```
<meta charset="utf-8">
mysql:host=localhost;dbname=dbnameko;charset=UTF-8
Collation : latin_sedish to utf8_general_ci 
```

我用谷歌搜索并搜索了 stackoverflow 线程，但没有一个答案是正确的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:50:10.443

自 1991 年以来我们就有了 Unicode，因此这些问题仍然使我们无法开展工作，这是相当令人遗憾的。不幸的是，i18n 的默认设置有时都是错误的，所以我们必须自己做......

就 HTTP 而言，您已经做了正确的事情，但是您必须为 MySQL 连接做正确的事情......

尝试这个：

```
 $result = mysql_query("SET NAMES utf8; SET CHARACTER SET utf8;");
  $cmd = "select * from yourtable";
  $result = mysql_query($cmd); //all should data should arrive correctly encoded 
```

为避免在每个连接中都必须这样做，您可以更改 .cnf 文件。请查看以下 SO 问题的已接受答案：[Change MySQL default character set to UTF-8 in my.cnf?](https://stackoverflow.com/questions/3513773/change-mysql-default-character-set-to-utf8-in-my-cnf)

* * *

更新：事实证明问题确实出在 SQL 连接字符串上。但是，在 Apache 上 AddDefaultCharset 也会导致问题，所以我留下这部分答案。

如果您不了解它的作用，AddDefaultCharset 会很讨厌！如果已设置，Apache 将为 text/html 和 text/plain 内容类型的响应设置字符集。这实际上意味着您将被忽略。根据 Sacx 的建议将其设置为 utf-8，或者关闭。（顺便说一句，如果它不是设置为特定的字符集而是设置为“on”，这将与设置为“iso-8859-1”相同，这使得调试此类情况变得更加困难！）更多信息： [http://httpd.apache.org/docs/2.2/mod/core.html](http://httpd.apache.org/docs/2.2/mod/core.html)

* * *

另请参阅： [如何使 MySQL 正确处理 UTF-8](https://stackoverflow.com/questions/202205/how-to-make-mysql-handle-utf-8-properly/202246)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:54:52.877

您的 Web 服务器不知道此字符集。如果您使用 Apache，请在配置文件或 .htaccess 中添加此行

```
AddDefaultCharset utf-8 
```

# domain-driven-design - 如何处理跨聚合根的并发约束

> ID：13626130
> 
> 赞同：6
> 
> 时间：2012-11-29T12:44:01.510
> 
> 标签：domain-driven-design, aggregateroot, eventual-consistency

恐怕我已经知道答案了，但我希望有人可以提供以前没有找到的替代解决方案。与往常一样，根据[有效聚合设计](http://dddcommunity.org/library/vernon_2011)进行 DDD比我想象的要困难，但这是我的场景。

*   我们有两个 AR，User 和 RoleGroup
*   一个用户可以被授予一个特定的角色组，从而获得该角色组中角色（一个集合值对象）提供的权限。角色组的身份作为另一个 VA 保存在用户 AR 中。
*   当从系统中删除 RoleGroup 时，我们会引发一个域事件，处理程序使用该事件来查找引用该 RoleGroup 的所有用户并删除该引用。相应的投影反规范化器将使用相同的事件来更新用户的有效角色。这是授予该用户的各个角色和所有授予 RoleGroup 的角色的组合。
*   这不一定是事务性的（因为它最终可以是一致的）。
*   我们通过 Jonathan Oliver 的 EventStore 3.0 以及 Lokad.CQRS 和 NCQRS 中的元素来使用 Event Sourcing。

因此，理论上，当一个请求（它是一个 ASP.NET MVC 应用程序）正在执行上述场景时，另一个请求可能会将相同的 RoleGroup 授予用户。如果在上述域事件处理程序扫描与该角色组相关的用户之后发生这种情况，则该请求将完成。此时，您有一个已删除的角色组（尽管不是物理删除）和一个仍持有该角色组身份的用户。

你如何防止这种情况发生？我们目前正在考虑将用户的身份授予该 RoleGroup AR 的特定 RoleGroup 一部分，以便删除 RoleGroup 并将其授予用户将导致乐观并发冲突。但不知何故，这感觉不是正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:01:49.353

这类似于如何解决唯一性约束。

假设有一个具有 SERIAL 行为的角色组和用户的投影。当角色组被归档（即它们不能再被使用）时，位于投影顶部的反应位可以通知所有已被授予该角色组的用户他们不再是它的一部分。当同时将此归档角色组授予用户（或一组）时，可以利用投影的连续性质来告诉该用户他们不再是该组的一部分。

综上所述，这只是家务。只有当角色组和用户被使用时，正确的视图才是重要的。由于我假设角色组将带有 IsArchived 位，因此我可以安全地将它们过滤掉，而不必担心一些悬而未决的边缘情况，我们仍然必须证明它必须以自动方式解决。

顺便说一句，扫描事件日志也会揭示这种情况，即是否有任何用户授予了在该时间点之前（或在该时间点附近）存档的角色组？管理员可以通过向用户聚合发出补偿命令来解决此问题。

“视情况而定” TM

编辑：我已经为这个问题提供了一个技术解决方案。我会鼓励其他读者探索建模和解决这类问题的不同方法。有时，甚至在大多数情况下，答案根本不是技术性的。YMMV。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:15:08.073

为什么要向 User 聚合添加 RoleGroup 引用？使用此信息的用户是否有任何不变量？

我想这可以通过 RoleGroup 聚合将 RoleGroup 授予用户来更简单地建模，发出类似于 RoleGroupGrantedToUser 事件的东西。当 RoleGroup 被移除时，它会发出 RoleGroupRemoved 事件。在此事件之后，角色组不再接受新用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:07:09.587

为了防止这种情况，您可以使其具有事务性，即无法通过某种锁定机制将已删除的 RoleGroup 授予用户。但这只会使事情复杂化，正如您所指出的，这不是必需的。

当您将 RoleGroup 分配给用户时，我想您也有一个类似的投影反规范化器来更新用户的有效角色。您可以在那里检查授予的 RoleGroup 是否仍然存在，如果不存在，则从用户中删除引用。那么用户的有效角色最终应该是一致的。

# html - 如何在 HTML 中编写求和表达式？

> ID：13626132
> 
> 赞同：15
> 
> 时间：2012-11-29T12:44:07.493
> 
> 标签：html, web

如何为以下 Latex 编写等效的 HTML 表达式：

```
$$\sum_{k=1}^Nk(N-k+1) 
```

图像是：

![在此处输入图像描述](../Images/9a51b475ffdb47f5411496f9b7b634ec.png)

我确实喜欢这样：

```
∑ <sub>k=1</sub> <sup>N</sup> 
```

但输出是这样的

∑ [k=1] ^N

我不擅长 HTML，我在网上搜索但找不到答案。请对此提供帮助..谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-29T12:57:39.507

如果您的项目中有很多东西需要它，您可能会发现[**MathJax**](http://www.mathjax.org/)很有用。否则，如果您只需要这个公式，那么试试这个 -[**演示**](http://jsfiddle.net/L7XEy/1/)

```
<p>
    <span>&Sigma;</span>
    k ( N - k + 1 )
</p>​ 
```

***CSS***

```
p {
    height: 50px;
    line-height: 50px;
}

span {
    position: relative;
    font-size: 2.5em;
    display: inline-block;
    line-height: .7em;
    vertical-align: middle;
}

span:before {
    font-size: 12px;
    display: block;
    position absolute;
    left: 0;
    top: 0;
    content: "N";
    width: 22px;
    text-align: center;
}

span:after {
    font-size: 12px;
    display: block;
    position absolute;
    left: 0;
    bottom: 0;
    content: "k = 1";
    width: 27px;
    text-align: center;
}
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:58:05.687

虽然[MathJax](http://www.mathjax.org/)几乎肯定是正确的答案（主页上甚至还有一个求和的示例），但您可以使用简单的 HTML 元素（但是这些看起来不如最终的 MathJax/LaTeX 结果好）。

求和符号是 HTML 实体`&sum;`，上标和下标可以用`sup`and`sub`元素标记，所以试试：

```
&sum;<sub>k=1</sub><sup>N</sup> k (N - k + 1) 
```

得到： ∑ [k=1] ^N k (N - k + 1) 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:55:04.557

使用**Mathjax**： http: [//www.mathjax.org/](http://www.mathjax.org/)

它专为您正在寻找的东西而构建。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T15:46:48.640

正如其他人所写，最好的选择可能是[MathJax](http://www.mathjax.org/)，尽管轻量级的[jqMath](http://mathscribe.com/author/jqmath.html)可能更适合某些需求。以下是如何将 MathJax 用于您的公式（对于生产用途，请考虑将 MathJax 软件上传到您自己的服务器上）：

```
<!DOCTYPE html>
<title>MathJax demo</title>
<script src=
"http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
$$\sum_{k=1}^Nk(N-k+1)$$ 
```

纯 HTML 不会带你走太远，即使使用 CSS 样式，显示公式的结果也不能令人满意。您将需要使用 CSS 定位（在这里会变得很棘手）或 HTML 中基于表格的笨拙构造；参看。到我的笔记[Math in HTML (and CSS)](http://www.cs.tut.fi/~jkorpela/math/)，尤其是最后关于二维的笔记。

# database - 在浏览器中显示 100 万行

> ID：13626133
> 
> 赞同：1
> 
> 时间：2012-11-29T12:44:09.457
> 
> 标签：database, hibernate, design-patterns, web, derby

我们的 Utilty 有一个单表，它有 1000 万到 5000 万行，可能有一种情况我们需要在单页 html 客户端页面中显示 5000 万行，为了在浏览器中显示行，我们在 UI 中使用 jQuery。

要检索行，我们使用 Hibernate 并使用 Spring for MVC。我正在寻找检索行并在 UI 中显示的最佳实践。我应该在 Hibernate 中检索大量数千行还是两千行并缓冲到 Web 客户端，还是有最佳实践？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T12:50:15.057

最好的做法是不要这样做。它会爆炸浏览器内存和渲染引擎，并且会花费太多时间来加载。

向你的 webapp 添加一个搜索表单，让最终用户搜索他感兴趣的内容，并且只显示 N 个第一个搜索结果，就像 Google 所做的那样。

没有人能够在不搜索的情况下对 5000 万行做任何有意义的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T12:53:43.070

我认为您应该使用滚动分页（当用户几乎到达页面底部时会进行 ajax 调用并加载数据）。

只是例如快速谷歌[示例](http://www.fieg.nl/infinite-ajax-scroll-a-jquery-plugin)和[演示](http://www.fieg.nl/ias-demo)

如果你的数据是表格的，那么你可以使用[jQGrid](http://www.trirand.com/blog/phpjqgrid/examples/paging/scrollbar/default.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-14T10:04:34.470

在应用程序中处理大量数据必须通过虚拟化来完成。虽然用户确实会被数百万条记录所淹没，但他们不能用它做任何事情并不是完全正确的，也不能说如此大量的数据是深不可测的。

在实践中，根据您正在做的事情，您会注意到这个限制会出现在您身上，只有数千条记录。坦率地说，这是非常少的数据。以数据为中心的应用程序只需要一种不同的方法，如果它们要在浏览器中工作并表现良好的话。

我们这样做的方式非常简单，但并不是那么简单。

它有助于确定固定高度，因为您需要知道可滚动容器的最大高度。然后，您将在任何给定时刻可见的记录子集呈现到此容器中，并相应地定位它们（​​基于滚动事件）。有或多或少有效的方法可以做到这一点。

最终目标保持不变。您基本上需要剔除屏幕上不直接可见的所有内容，这样浏览器就不会为应用程序响应而支付内存和布局逻辑成本。这是游戏开发中的常见做法，只有现在屏幕上可见的世界才会在任何特定时刻出现。所以这就是你需要做的让大量的东西表现良好。

在浏览器的上下文中，任何归因于内存使用和布局/渲染成本的东西都需要消失，如果它不是绝对重要的话。

您还可以错开和涂抹重新计算，这样您就不会承担导致应用程序在每次小更新时降级的任何成本。如果应用程序保持响应，用户可以等待 1 秒。

# java - 可互换地解析和替换字符串中的值

> ID：13626141
> 
> 赞同：0
> 
> 时间：2012-11-29T12:44:36.997
> 
> 标签：java, string

我有一个具有某些“令牌”的字符串。
例子：

```
"Someone e.g. X here is a # and the other i.e. X is not but over is something else like #" 
```

我还有一个字符串列表，例如`{"John", "doctor", "Jim","engineer"}`

执行以下操作的最佳方法是什么：
我想用列表中的相应元素替换所有字符 **。**`#`

即我想跳过`X`和`John`替换`Jim`from`#`和`engineer`for the other `#`。
我想只是循环，`string#toCharArray()`但如果有更好的方法来做到这一点，我很感兴趣。

注意：第二个列表中的值与相应的标记**匹配。**因此，列表中的第一个值即`John`映射到第一次出现的值`X`或第`#`一次出现的值。

例子：

输入： `"Someone e.g. X here is a # and the other i.e. X is not but the other is something else like # but X is at least X but not #"`
`{"John", "doctor", "Jim","John", "engineer", "doctor"}`
输出：
`"Someone e.g. X here is a doctor and the other i.e. X is not but the other is something else like Jim but X is at least X but not doctor"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:57:54.280

您可能有兴趣查看允许类似于这种替换的[MessageFormat 。](http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html)

例如

```
MessageFormat.format(""
    + "Someone e.g. {0} here is a {1} and the other i.e. {2} " 
    + "is not but over is something else like {3}", 
    new String [] {"John", "doctor", "Jim","engineer"}); 
```

**编辑**：

如果无法修改输入字符串以包含占位符，并且占位符具有您在更新中提到的特殊含义（即应忽略 X，应替换 #），那么您只需要

*   将计数器初始化为 0。
*   创建一个对象`StringBuilder`。
*   在空间上标记输入字符串
*   遍历每个令牌
    *   如果是 X，则递增计数器，将令牌按原样附加到`StringBuilder`对象。
    *   如果是#，`counter`则从输入数组中读取索引处的值并将其附加到`StringBuilder`对象中。
    *   附加一个空格。
*   `StringBuilder.toString()`并修剪以删除尾随空格。

# android - Android：在 PopupWindow 中播放视频

> ID：13626142
> 
> 赞同：0
> 
> 时间：2012-11-29T12:44:41.353
> 
> 标签：android

> **可能重复：**
> [VideoView 在 Popupwindow 中不可见？](https://stackoverflow.com/questions/3889526/videoview-invisible-in-popupwindow)

我正在制作一个用手指移动 VideoView 的功能。

由于我使用通用布局，例如将 RelativeLayout 作为 VideoView 的父级，因此视频播放正常。

但是沿着手指移动时它会闪烁太多。

所以我认为PopupWindow可以解决这个问题。但是在PopupWindow中添加的VideoView只是留下了一个透明的空间，音频可以正常播放。

我已经搜索了很多答案，不幸的是没有一个适合我。

可以在 PopupWindow 中播放视频吗？

如何解决眨眼问题？

[位于此处的类似问题，https://stackoverflow.com/questions/3889526/videoview-invisible-in-popupwindow](https://stackoverflow.com/questions/3889526/videoview-invisible-in-popupwindow)

# ruby - 如何升级红宝石

> ID：13626143
> 
> 赞同：226
> 
> 时间：2012-11-29T12:44:55.900
> 
> 标签：ruby, gem

我需要将 gems 升级到 1.8 我尝试安装相应的 debian 软件包，但它似乎没有升级

```
anujm@test:~$ dpkg -l |grep -i rubygem
ii  rubygems                               1.3.5-1ubuntu2                                  package management framework for Ruby libraries/applications
ii  rubygems-lwes                          0.8.2-1323277262                                LWES rubygems
ii  rubygems1.8                            1.3.5-1ubuntu2                                  package management framework for Ruby libraries/applications
ii  rubygems1.9                            1.3.5-1ubuntu2                                  package management framework for Ruby libraries/applications
anujm@test:~$ 

anujm@test:~$ gem
gem     gem1.8  gem1.9  
anujm@test:~$ sudo gem1.8 install serve
ERROR:  Error installing serve:
        multi_json requires RubyGems version >= 1.3.6
anujm@test:~$ 
```

* * *

## 回答 #1

> 赞同：494
> 
> 时间：2012-11-29T12:49:03.983

安装 ruby​​gems 更新

```
gem install rubygems-update
update_rubygems
gem update --system 
```

以 root 身份运行此命令或使用 sudo。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2016-03-22T09:00:48.753

您只需执行以下操作即可更新所有宝石：

`sudo gem update`

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2015-03-08T09:34:25.420

或者：

```
gem update `gem outdated | cut -d ' ' -f 1` 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-11-03T23:53:22.763

我发现其他答案不准确/过时。最好是[参考实际文档](https://github.com/rubygems/rubygems/blob/master/UPGRADING.rdoc)。

短版：在*大多数情况下* `gem update --system`就足够了。

你不应该盲目使用`sudo`. 事实上，如果您不需要这样做，您很可能不应该使用它。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-09-16T10:22:09.080

您可以像这样将 gem 更新到任何特定版本，

```
gem update --system 'version'

gem update --system '2.3.0' 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-11-29T12:47:31.233

我不会使用 debian 包，看看[RVM](https://rvm.io/)或[Rbenv](https://github.com/sstephenson/rbenv)。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-01-24T09:05:44.197

对我来说，只需运行就足够了

```
gem update 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-01-17T22:02:51.823

要仅更新一个 gem（及其依赖项），请执行以下操作：

```
 bundle update gem-name 
```

但是要单独更新 gem（不更新它的依赖项），请执行

```
 bundle update --source gem-name 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-27T00:04:06.177

如果您使用的是 RVM，那么在从一个非常非常古老的 ruby​​gems（例如 1.3.7）升级时，下面的命令对我有很大帮助，因为该 ruby​​gems 违反了该线程中其他响应中提到的更新命令。

```
rvm rubygems <version> 
```

# .net - .Net 如何阻止已处置的模态子窗体最小化父窗体？

> ID：13626145
> 
> 赞同：0
> 
> 时间：2012-11-29T12:44:55.693
> 
> 标签：.net, vb.net, winforms, idisposable

我在 VB.Net 中创建了一个应用程序。使用 Showdialog() 方法显示子窗体，以便在关闭子窗体之前无法访问父窗体。

我需要在每次关闭子表单时对其进行处理，以便删除其中包含的信息：为此，我在子表单的关闭事件中放置了“Me.Dispose()”。

但是，通常（并非总是）当孩子关闭时，父母会被最小化，这不是我想要的。

有谁知道有什么方法可以阻止这种情况发生？感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:06:03.080

更好的方法是将模态窗口包装在 using 语句中，而不是在表单的关闭事件中使用 Me.Dispose。例如，在您的父表单中执行以下操作：

```
Using frm As New Form1
    frm.ShowDialog()
End Using 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:22:26.337

> 但是，通常（不总是）当孩子关闭时，父母会被最小化

它没有被最小化，它消失在另一个应用程序的窗口后面。调试时最常见的是 Visual Studio。这里的问题是在 Winforms 有机会重新启用您的主窗口之前**过早地破坏了表单。**Windows 窗口管理器现在被迫寻找另一个窗口来关注。您的应用程序中没有一个窗口符合条件，因为它们仍然被禁用，因此它会选择另一个应用程序的窗口。如果该窗口足够大（“并非总是”情况），那么它将与您的窗口重叠并使其消失，使您认为它已最小化。

您可以通过正确的方式解决此问题，在ShowDialog 返回*后处理对话框。*始终使用 Using 语句来执行此操作。样板代码是：

```
Using dlg = New YourDialogFormClass
    If dlg.ShowDialog() = DialogResult.Ok Then
        '' Use the dialog results
        ''...
    End If
End Using    '' <=== It gets disposed here 
```

# android - 键映射错误，仅适用于我的应用

> ID：13626151
> 
> 赞同：3
> 
> 时间：2012-11-29T12:45:08.543
> 
> 标签：android, bluetooth, mapping, headset

我的应用程序应该处理蓝牙按钮。但是，当我按下蓝牙设备或原来的有线耳机上的“下一步”按钮时，我在 Logcat 中得到了这个：
蓝牙设备：

```
11-29 13:36:48.757: W/KeyCharacterMap(8730): Can't open keycharmap file
11-29 13:36:48.757: W/KeyCharacterMap(8730): Error loading keycharmap file '/system/usr/keychars/AVRCP.kcm.bin'. hw.keyboards.65540.devname='AVRCP'
11-29 13:36:48.757: W/KeyCharacterMap(8730): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

原装有线耳机（三星）：

```
12-03 12:37:42.570: W/KeyCharacterMap(9210): Can't open keycharmap file
12-03 12:37:42.570: W/KeyCharacterMap(9210): Error loading keycharmap file '/system/usr/keychars/bcm_headset.kcm.bin'. hw.keyboards.65536.devname='bcm_headset'
12-03 12:37:42.570: W/KeyCharacterMap(9210): Using default keymap: /system/usr/keychars/qwerty.kcm.bin 
```

我虽然可能是由于设备问题（我正在使用 2.3.6 下的 Galaxy Y 进行调试），但是在运行 Winamp 进行相同的测试时，我得到了这个：

```
11-29 13:35:30.593: I/BTL-BTAPP_AV(3510): btui_av_callback(BTA_AV_REMOTE_CMD_EVT  rc_id: x4c key_state: 0)
11-29 13:35:30.593: V/BTL-BTAPP_RC(3510): +btapp_rc_handler
11-29 13:35:30.593: D/BTL-BTAPP_RC(3510): AVRCP: BACKWARD pressed
11-29 13:35:30.593: D/BTL_CFG(3510): btl_cfg_get_avrcp_pass_thru_status: service.brcm.bt.avrcp_pass_thru=1
11-29 13:35:30.593: I/BTL-BTAPP_RC(3510): AVRCP: Send key 165 (1) fd=32
11-29 13:35:30.593: D/InputReader(1476): Input event: value=1
11-29 13:35:30.593: I/InputDispatcher(1476): Delivering key to current input target: action: 0, channel '40897a08 com.nullsoft.winamp/com.nullsoft.winamp.TrackBrowserActivity (server)' 
```

并触发相应的动作...

我可以自己映射密钥吗？如何 ？我应该这样做吗？

感谢您的帮助 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T05:36:30.147

我没有遇到类似的问题。但是在搜索之后，我发现了两个非常有趣的链接，它们可能对您有所帮助。

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/FJREhX8eX9k](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/FJREhX8eX9k)

[http://forum.xda-developers.com/showthread.php?t=695936](http://forum.xda-developers.com/showthread.php?t=695936)

# sharepoint - lists.updatelistitems 不更新字段，但错误代码为 0x0000000

> ID：13626152
> 
> 赞同：2
> 
> 时间：2012-11-29T12:45:10.617
> 
> 标签：sharepoint

我正在尝试通过列表 Web 服务更新文档的元数据。

它只是返回

`<Result ID="1,Update" xmlns="<ErrorCode>0x00000000</ErrorCode">http://schemas.microsoft.com/sharepoint/soap/"><ErrorCode>0x00000000</ErrorCode></Result>`

并且不更新任何字段。

# javascript - 如何在 jquery 中处理 AJAX 中的错误

> ID：13626161
> 
> 赞同：2
> 
> 时间：2012-11-29T12:45:51.717
> 
> 标签：javascript, jquery

如何处理 AJAX 中的错误？

`console.log`在我的代码中，即使`departments.json`没有加载文件，也不会执行包含的 else 条件。我通过删除`departments.json`加载到代码中的文件来检查它。

我的代码是：

```
$.getJSON("departments.json?" + new Date().getTime(), {}, function(departments, status, xhr) {
    if (xhr.status == 200) {   
        var numericDepts = [];
        var nonNumericDepts = [];

        for(dept in departments) {   
            $("#kss-spinner").css({'display':'none'});
            if (isNaN(departments[dept].depNo)) {
                if (isNaN(parseInt(departments[dept].depNo,10)))
                    nonNumericDepts[nonNumericDepts.length] = departments[dept];
                else
                    numericDepts[numericDepts.length] = departments[dept];
            }
            else
                numericDepts[numericDepts.length] = departments[dept];
        }

        numericDepts.sort(cmp_dept);
        nonNumericDepts.sort(function(dept1,dept2) {
            return dept1.depNo.toLowerCase() - dept2.depNo.toLowerCase();
        });
        departments.sort(cmp_dept);
        var k = 0;

        $.each(numericDepts.concat(nonNumericDepts), function() {
            if (k % 2 == 0) {
                $('<p class="odd" onClick="selectTag(this,\'' + this.id + '\', 1)">' + this.depNo + '</p>').appendTo($(".scroller", $("#br1")));
            }
            else {
                $('<p class="even" onClick="selectTag(this,\'' + this.id + '\', 1)">' + this.depNo + '</p>').appendTo($(".scroller", $("#br1")));
            }
            k++;
        });
        $("#kss-spinner").css({'display':'none'});
    }
    else {  
        console.log(xhr.status);
        console.log(xhr.response);
        console.log(xhr.responseText)
        console.log(xhr.statusText);
        console.log('json not loaded');
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:50:12.703

您可以只使用通用`ajax()`函数：

```
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: successCallback,
  error: errorCallback
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:50:41.507

如果您需要通用错误处理程序，请使用

```
 $.ajaxSetup({ 
            error: function(xhr, status, error) {
            // your handling code goes here
            }
            }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:51:03.390

JQuery 的 getJSON 函数是对常规**.ajax()**方法的抽象——但它不包括错误回调。

基本上，只有在调用成功时才会调用您定义的函数（这就是它永远不会到达 else 部分的原因）。

要处理错误，请在之前设置一个错误处理程序，如下所示：

```
$.ajaxError(function(event, jqXHR, ajaxSettings, thrownError) { alert("error");}); 
```

每当 AJAX 请求完成并出现错误时，都会调用该函数。

**您还可以在getJSON**调用末尾附加 .error ：

```
$.getJSON("example.json", function() {
    (...)
 }).error(function() { (...) }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T12:47:16.783

您将需要使用[fail()](http://api.jquery.com/deferred.fail/)方法来完成此操作。

例子：

```
$.get("test.php")
  .done(function(){ alert("$.get succeeded"); })
  .fail(function(){ alert("$.get failed!"); }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T12:57:41.493

该`$.getJSON()`函数只是更通用`.ajax()`函数的特殊用途版本。

`.ajax()`函数将为您提供所需的额外功能（例如错误函数）。您可以在此处阅读更多文档[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
  url: "departments.json?" + new Date().getTime(),
  dataType: 'json',
  success: function(departments){
      var numericDepts = [];
      var nonNumericDepts = [];
      for(dept in departments)
      {   
        $("#kss-spinner").css({'display':'none'});
        if(isNaN(departments[dept].depNo))
        {
          if(isNaN(parseInt(departments[dept].depNo,10)))
            nonNumericDepts[nonNumericDepts.length]=departments[dept];
          else
            numericDepts[numericDepts.length]=departments[dept];
        }
        else
          numericDepts[numericDepts.length]=departments[dept];
      }
      numericDepts.sort(cmp_dept);
      nonNumericDepts.sort(function(dept1,dept2) {
        return dept1.depNo.toLowerCase() - dept2.depNo.toLowerCase();
      });
      departments.sort(cmp_dept);
      var k=0;
      $.each(numericDepts.concat(nonNumericDepts),function(){
        if(k%2==0){
          $('<p class="odd" onClick="selectTag(this,\''+this.id+'\',1)">'+this.depNo+'</p>').appendTo($(".scroller",$("#br1")));
        } else {
          $('<p class="even" onClick="selectTag(this,\''+this.id+'\',1)">'+this.depNo+'</p>').appendTo($(".scroller",$("#br1")));
        }
        k++;
      });
      $("#kss-spinner").css({'display':'none'});
  },
  error: function(xhr, textStatus, errorThrown) {  
    console.log(xhr.status);
    console.log(xhr.response);
    console.log(xhr.responseText)
    console.log(xhr.statusText);
    console.log('json not loaded');
  }
});​ 
```

# php - 从文件中获取数组然后循环它

> ID：13626164
> 
> 赞同：1
> 
> 时间：2012-11-29T12:46:03.647
> 
> 标签：php, arrays, file, get

尝试从像...这样的文件中获取数组

**数据.txt**

```
Array
(
    [0] => 288
    [1] => 287
    [2] => 173
) 
```

**我的.php**

```
$data = file('data.txt');

foreach ($data as $id) {
    echo $id." - ";
} 
```

为什么它回显所有数组？像 data.txt

为什么不像 288 - 287 - 173 那样回声？

**已关闭：我现在使用 JSON**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:49:34.440

保存数据时，使用以下方式获取字符串表示`serialize`：

```
$str = serialize($arr); 
```

然后你可以`unserialize`用来解码你的数组：

```
$arr = unserialize(file(data.txt)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T12:48:16.307

您的方法将 data.txt 中的数据作为字符串加载，php 不会将其解析为代码。尝试

```
$data = eval(file(data.txt)); 
```

在此处查看更多关于 eval 的信息：[关于 eval 的 PHP 手册](http://php.net/manual/en/function.eval.php)

另请注意，data.txt 中的语法无效。你要：

```
array(288, 287, 173); 
```

PHP 会根据需要自动创建索引。

另一方面，这可能不是最好的方法。不知道您的目标是在这里实现什么，但是在您的 php 文件中设置数组不是更好吗？

# graph - Scotch/PT-Scotch 图顶点重新排序以最小化邻接矩阵带宽

> ID：13626165
> 
> 赞同：1
> 
> 时间：2012-11-29T12:46:16.140
> 
> 标签：graph, graph-algorithm, data-partitioning

尽管**Scotch**文档非常清楚，但它缺少使用 API 的示例。即使使用 Google 来查找其他第三方文档、示例或教程也是死路一条。

我的问题如下：我想重新排序图的顶点，以减少使用 Scotch 的邻接矩阵带宽。现在 Scotch 实现了 GPS (Gibbs-Poole-Stockmeyer) 算法，这是一种可以进行此类重新排序的算法。但是文档说：

> 该方法主要用于分隔符，以减少外对角块的数量和范围。

我使用策略字符串“g”来选择GPS算法，尝试了不同的pass值，但没有结果。我得到的只是一个带宽大于原始矩阵的矩阵。

我的问题是：如何告诉 SCOTCH_graphOrder() 对整个图进行重新排序（以减少带宽）？

如果您至少可以推荐任何我可能找到答案的资源，我将不胜感激。

# asp.net-mvc - 如何从 mvc asp.net 中的多个表中检索数据

> ID：13626168
> 
> 赞同：-1
> 
> 时间：2012-11-29T12:46:39.690
> 
> 标签：asp.net-mvc

我想显示订单详细信息列表，包括订购材料的数量和客户名称。共有三个表 order_details、order_item_details 和 customer_details

对于这种情况如何创建视图模型和 linq

我的数据库结构

customer_details === customer_id,customer_name

||||| order_details === order_id, order_number, customer_id

||||| order_item_details === order_item_id, order_id, item_id

我想显示------ order_details.order_number, customer_details.customer_name, count(order_item_details.order_item_id)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:55:43.763

在您的数据库中创建一个适当链接三个表的视图，然后将您的 ORM (EF?) 指向该视图，您将获得具有适当模型的表的只读视图。如果您正在做的事情特别复杂，您可以创建一个存储过程并使用相同的技术。

如果您实际上使用的是实体框架，那么这里有一个 SO 答案，它告诉您如何在 EF 4 中创建自定义实体（Kevin Castle 的第一个答案）：

[Entity framework 3.5，将存储过程结果映射到自定义实体](https://stackoverflow.com/questions/1902851/entity-framework-3-5-mapping-stored-procedure-results-to-custom-entity)

# matlab - 创建单元格矩阵的总和

> ID：13626172
> 
> 赞同：3
> 
> 时间：2012-11-29T12:47:01.187
> 
> 标签：matlab, octave, cells

我想将所有矩阵的总和存储在一个单元格数组中。目前我这样做

```
StackSummImage = zeros(size(imageList{1}));
for k = 1:stackSize
     StackSummImage = StackSummImage + imageList{k};
end 
```

但如果可能的话，我宁愿把它写在一行中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:51:48.177

如果 N 个图像中的每一个都是 K x K，您可以使用`cat`将所有图像连接成一个 K x K x N 数组，然后沿第三维求和：

```
>> imageList = {[1 2; 3 4], [5 6; 7 8], [9 10; 11 12]};
>> stackSummImage = sum(cat(3,imageList{:}),3)
ans =
15    18
21    24 
```

**编辑：**您在评论中提到，由于内存限制，您无法创建单个数组。下面是我首先分配一个 1500x1500x1500 的双精度数组（大约需要 30 GB）并释放它，然后分配一个由 1500 个数组组成的元胞数组时的内存使用情况，每个数组都是一个 1500x1500 的双精度数组。如您所见，两种情况下的总内存使用量是相同的。

![在此处输入图像描述](../Images/c487b71d4a92fb1740e3bf38868a142f.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T12:49:22.033

这条线应该做：

```
StackSummImage = sum([imageList{:}]) 
```

# c# - 目标程序集不包含服务类型。您可能需要调整此程序集的代码访问安全策略

> ID：13626175
> 
> 赞同：1
> 
> 时间：2012-11-29T12:47:11.153
> 
> 标签：c#, wcf

我有一个带有 2 种方法的小型 WCF 解决方案，但是在构建它时出现此错误。
如果我留下消息而不关闭它，我会得到

```
WCF Service Host cannot find any service metadata. This may cause the client application to run improperly. Please check if metadata is enabled. 
```

我很确定我的配置是错误的，可能定义的端点与命名空间不匹配，但我不确定在哪里设置什么。

Contracts 类的命名空间`JOB_1_0_Service.Contracts`有 2 个方法。在`APP.Config`这个项目中如下：

```
<endpoint address="/Address1" binding="wsHttpBinding" contract="JOB_1_0_Service.Contracts.IService"> 
```

合约方法定义为：

```
[ServiceContract]
public interface IService
{
    [OperationContract]
    GetNearbyJobsResponse GetNearbyJobs(GetNearbyJobsRequest request);

    [OperationContract]
    GetChildJobsResponse GetChildJobs(GetChildJobsRequest request);
} 
```

实现类的命名空间`JOB_1_0_Service.Implementation`再次带有 2 个方法：

```
GetNearbyJobsResponse IService.GetNearbyJobs(GetNearbyJobsRequest request)
{
    ...
} 
```

和

```
GetChildJobsResponse IService.GetChildJobs(GetChildJobsRequest request)
{
    ...
} 
```

我应该在哪个配置文件中放什么 - 如果这确实是问题？

[更新]

好的，所以只是重申一下：我在 1 个解决方案中有 2 个项目。1 个项目包含合同，另一个项目包含实现代码。

这也意味着有 2 个配置文件。到目前为止，我不知道哪一个需要以什么方式修改。

那么，哪个是要修改的，还是我需要同时修改两个？我假设实施项目是 WCF 配置的项目。

我现在的情况是，当我构建它时说我没有公开元数据，但它也尝试（并且失败）将合同公开为端点！

[/更新]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-08T19:44:28.027

我遇到了同样的错误，因为我错误地注释了 [ServiceContract] 属性。一旦我取消注释 [ServiceContract] 属性，一切正常。

我希望这可以帮助其他面临同样问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-14T14:29:40.503

我遇到了这个错误，事实证明我把错误的项目作为启动项目：这是我第一次看到这个错误，但是哦，好吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:53:07.080

**编辑**

将元素添加到`<serviceMetadata/>`元数据的服务行为

```
<configuration>
 <system.serviceModel>
  <services>
   <service name="WCFTest.Service1" behaviorConfiguration="Simplebehavior">
    <host>
     <baseAddresses>
      <add baseAddress="http://localhost:8000/WCFTest/"/>
     </baseAddresses>
    </host>
    <endpoint
     address=""
     binding="basicHttpBinding"
     contract="WCFTest.IService1"/>
    <endpoint
     address="mex"
     binding="mexHttpBinding"
     contract="IMetadataExchange" />
   </service>
  </services>
  <behaviors>
   <serviceBehaviors>
    <behavior name="Simplebehavior">
     <serviceMetadata/>
     <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior>
   </serviceBehaviors>
  </behaviors>
 </system.serviceModel>
</configuration> 
```

* * *

添加以下端点以交换元数据

```
<endpoint
          address="mex"
          binding="mexHttpBinding"
          contract="IMetadataExchange" /> 
```

Aslo 检查详细信息：[随机错误消息：WCF 服务主机找不到任何服务元数据](http://www.toplinestrategies.com/dotneters/random-error-message/random-error-message-wcf-service-host-cannot-find-any-service-metadata/?lang=en)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-01T17:37:40.677

我刚遇到这个。在我的例子中，我有三个程序集：一个用于服务，一个用于客户端，一个由前两个共享的类库。共享程序集项目有一个由 VS 自动创建的 app.config 文件。删除该文件解决了问题。

# php - ajax HTTP 请求的等待时间

> ID：13626180
> 
> 赞同：2
> 
> 时间：2012-11-29T12:47:28.673
> 
> 标签：php, ajax

我目前正在编写使用 ajax http 请求传递数据并在第二页获得响应的脚本。当我调用 ajax 函数时，我会在总时间 22.79 秒内获得响应缓慢，其中等待时间为 21.47，接收时间为 1.32 秒.

有谁知道我怎样才能减少等待时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T12:52:03.437

等待时间是服务器端脚本执行的时间。您应该改进您的 PHP 脚本以使其更快地运行。

看看[https://codereview.stackexchange.com/](https://codereview.stackexchange.com/) - 你可以在那里发布你的代码以供同行评审，并要求人们帮助你提高其性能。

此外，您可以使用一些 PHP 分析器，自己查看哪段代码很慢。我为此使用了 XDebug：http: [//xdebug.org/docs/profiler](http://xdebug.org/docs/profiler)。非常有用的工具。

# javascript - 可以异步加载 OpenLayers 库及其依赖项（Google 和 OSM）吗？

> ID：13626183
> 
> 赞同：2
> 
> 时间：2012-11-29T12:47:36.010
> 
> 标签：javascript, google-maps-api-3, openlayers, openstreetmap

我构建了一个 AJAX 应用程序，并在我的应用程序中有一个使用 OpenLayers 的专用部分。

目前我的 Application.html 文件中有以下内容，因此它包含在应用程序启动时：

```
<script src="http://openlayers.org/api/2.11/OpenLayers.js"></script>
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js"></script> 
```

现在我想在需要时加载所有这些东西，因为它的大小约为 500-1000kb。但我不知道该怎么做。

**我试过的：**

1.  加载 OpenLayers.js 并在其回调中： ...
2.  ... 加载 GoogleMaps.js 和 OpenStreetMap.js。当这两个都完成时：...
3.  ...显示我的地图。

有时它会起作用，但大多数时候它不起作用，因为：GoogleMaps.js 和 OpenStreetMap.js 有一些额外的 .js、.css、.png 等依赖项，它们独立于我的回调加载。

这意味着： 3 个 .js 文件已完成加载，回调告诉我的应用程序显示地图，但在后台这些 .js 文件仍会获取使用 OpenLayers 所需的其他内容。

**有没有办法解决这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:20:27.147

您可能有兴趣使用以下任一方法或它们的组合。

1) [https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideHttpRequests](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideHttpRequests)

2) [https://developers.google.com/web-toolkit/doc/latest/tutorial/Xsite](https://developers.google.com/web-toolkit/doc/latest/tutorial/Xsite)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:49:50.357

也许您可以尝试 GWT-OpenLayers。

[https://bitbucket.org/gwtopenlayers/gwt-openlayers](https://bitbucket.org/gwtopenlayers/gwt-openlayers)

# android - 图库重叠项目单击

> ID：13626190
> 
> 赞同：4
> 
> 时间：2012-11-29T12:48:35.680
> 
> 标签：android, click, gallery, overlapping

我有一个基于画廊的视图，元素之间的间距为负，因此一个缩小到前一个之后，即“轮播”。通过Camera变换实现缩放和轮播效果。

当我尝试单击前景项目的右侧时出现问题，而我真正得到的是单击它后面的项目（总是在它的右侧）

让我列举一下我已经尝试过的内容：

1.  setChildrenDrawingOrderEnabled(true);
2.  背景项目的z坐标明显大于前景1
3.  getChildDrawingOrder 被尽可能多地覆盖（我发现它根本没有任何作用 - 触摸事件不依赖于视图的可见性顺序）

似乎 next(right) child 具有更大的索引，因此优先处理 UI 事件，并且我的 z 坐标/绘图顺序操作不会改变任何内容。

所以问题：如何让前台项目负责它上面的所有点击事件？

# c++ - #define 行代码到别的东西

> ID：13626192
> 
> 赞同：4
> 
> 时间：2012-11-29T12:48:39.317
> 
> 标签：c++, c

在 c/c++ 中是否有可能执行以下操作：

```
#define (_asm int 3;) (exit(1)) 
```

因此，在我的代码中的任何地方，这一行都将在编译时被替换。我知道这是不好的做法，但有可能吗？

干杯

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T12:51:11.567

您可以进行全局搜索并用您选择的编程编辑器（或 IDE）替换并更改`_asm int 3`为 eg `FOO`，然后定义`FOO`如下宏：

```
#if 1 // <<<- change this test to determine how `FOO` is expanded
  #define FOO _asm int 3
#else
  #define FOO exit(1)
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:51:00.690

不，这不是一个有效的预处理器符号，所以它不起作用。

当然，您可以通过使用外部工具（或任何编辑器的搜索和替换功能）轻松完成此替换。

# java - 通过httpconnection调用的webservice方法

> ID：13626193
> 
> 赞同：0
> 
> 时间：2012-11-29T12:48:43.997
> 
> 标签：java, liferay

我正在尝试通过 httpconnection 连接 webservice 方法。这是我的代码

```
 String data = "- <soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org  /soap/envelope/' xmlns:q0='urn:sap-com:document:sap:soap:functions:mc-style' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'>"
                           + "- <soapenv:Body>"
                           + "- <q0:ZwebserviceTest>"
                           + "<Fromdate>2012-11-27</Fromdate>" 
                             + "<Id>231</Id> "
                             + "<Name>Test User</Name>" 
                             + "<Reason>Persoanl</Reason>" 
                             + "<Todate>2012-11-27</Todate>" 
                             + "</q0:ZwebserviceTest>"
                             + "</soapenv:Body>"
                             + "</soapenv:Envelope>"; 
```

这里 ZwebserviceTest 是 webservice 方法。我想将这些数据发送到 webservice 方法。我正在尝试使用下面的代码。但没有用。帮助我。提前谢谢。

```
HttpURLConnection conn = (HttpURLConnection) url
             .openConnection(); 

            conn.setRequestMethod("POST");

           BASE64Encoder enc = new sun.misc.BASE64Encoder();
              String userpassword = user + ":" + password;
              String encodedAuthorization = enc.encode( userpassword.getBytes() );
              conn.setRequestProperty("Authorization", "Basic "+
              encodedAuthorization);
            conn.setDoInput(true);
             conn.setDoOutput(true);

             conn.setRequestProperty("SOAPAction",soapact1);

             conn.setRequestMethod("POST");
             conn.setRequestProperty("Content-Length",
               String.valueOf(data.length()));
             conn.setRequestProperty("Content-Type",
               "application/x-www- form-urlencoded");
             conn.setRequestProperty("User-Agent",
               "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1)");
             InputStream is = null;
             OutputStream os = null;
             OutputStreamWriter wr = null;
             try {
              os = conn.getOutputStream();
              System.out.println("os :" + os);
              wr = new OutputStreamWriter(os);
              System.out.println("Data : " + data);
              wr.write(data);
              wr.flush();
              is = conn.getInputStream();

             } catch (IOException e) {

              System.out.println("IO error Response code : "
                + conn.getResponseCode());
              System.out.println("IO error Response Message   : "
                + conn.getResponseMessage());
              System.out.println(" IO error : " + e);
              if ((conn.getResponseMessage() + "")
                .equals("Unauthorized")) {
               System.out.println("on unauthorized");
               //Login.authorized = false;
               //Login.errorMsg = "Wrong User Name or Password";
              } 
```

# ios - openWithCompletionHandler 从不调用 iPhone5 中的完成块

> ID：13626196
> 
> 赞同：4
> 
> 时间：2012-11-29T12:48:54.260
> 
> 标签：ios, uidocument

最近我遇到了一个奇怪的问题，如果有人遇到过同样的问题，我会很感兴趣。我正在开发一个支持 iCloud 的应用程序，它使用

*   (void)openWithCompletionHandler:(void (^)(BOOL 成功))completionHandler

对于存储在 iCloud 中的某些文件。

我正在使用 XCode 4.5.2 (4G2008a) 并且我有几台设备，每台都运行 iOS 6.0.1：一部 iPhone 3GS、4GS、5、几部 iPad 和 2 部 iPod Touch，第 4 代和第 5 代。此外，我正在使用一些也处理 iCloud 数据的 MAC - 但是，它们使用不同的方案来访问文件。

现在的问题：除了在 iPhone 5 上，该应用程序在所有其他设备上都可以完美运行 - 调用完成处理程序并且正确加载和打开文档，无论其他什么设备同时运行该应用程序。

然而，在 iPhone 5 上，完成块和 loadFromContents:: 都不会被调用，并且应用程序只是挂起，因为如果 iCloud 将它报告为存在的普遍存在的项目，它取决于此文件。

由于相同的应用程序在所有其他设备上运行，我认为不应该有任何编码或逻辑错误，但 iPhone 5 iOS 实现中存在一些差异。有没有人有类似的经历，或者有解决方法的想法？

# regex - 正则表达式仅在字符串不存在时才匹配字符串

> ID：13626197
> 
> 赞同：4
> 
> 时间：2012-11-29T12:48:56.570
> 
> 标签：regex, oracle

任何人都可以建议我使用正则表达式的解决方案，以匹配给定字符串中不存在的字符串。

假设我有一个字符串

> 罗汉要回家了

我不想那样

> 即将

字符串应该存在，那么它不会返回。但如果字符串不包含包含“going to”，则返回字符串

**有效的**

*   罗汉在家

**无效的**

*   罗汉要回家了

我听说正则表达式不太适合否定某些东西（单个字符除外）。正则表达式更倾向于匹配字符串，而不是“不匹配”它们。如果有人有解决方案，请在正则表达式中提出建议

我试图创建一个正则表达式，但直到现在还没有成功。

```
SELECT   1 
  FROM   DUAL 
 WHERE   REGEXP_LIKE (' Rohan is 12 home'
                       , '^\s[^going to])$','i'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:52:14.057

试试这个，它使用负面的展望：

```
^(?!.*going to.*$) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:50:30.243

查看负前瞻。

# internet-explorer-8 - CSS3PIE 和 IE8 问题

> ID：13626205
> 
> 赞同：0
> 
> 时间：2012-11-29T12:49:19.237
> 
> 标签：internet-explorer-8, css3pie, ie8-compatibility-mode

您对 CSS3PIE 和 IE8 有什么经验，因为我们的开发人员遇到了很多问题。

它似乎在 Chrome 和 IE9 中运行良好，但 IE8 是一种不同的体验。我们有一个应用 css3pie 样式的选项卡组件，当将一个选项卡移动到另一个选项卡时，我们会看到闪烁/抖动和内容布局上下移动。似乎 CSSPIE 直到浏览器“加载”事件完成后才执行，这就是为什么我们在背景“加载”时得到“闪烁”，然后 CSSPIE 执行并应用格式（仅 IE8 中的问题） .

过去有没有人遇到过类似的问题，如果有，请分享解决方法

![在此处输入图像描述](../Images/e62795492d29d44e197659add9cf68ff.png)

## 这是我正在使用的 jquery 脚本

```
 $(document).ready(function(){
            $('ul.tabs').each(function(){
                var $active, $content, $links = $(this).find('a');
                $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);
                $active.addClass('active');
                $content = $($active.attr('href'));
                $links.not($active).each(function () {
                    $($(this).attr('href')).hide();
                });
                $(this).on('click', 'a', function(e){
                    $active.removeClass('active');
                    $content.hide();
                    $active = $(this);
                    $content = $($(this).attr('href'));
                    $active.addClass('active');
                    $content.show();
                    e.preventDefault();
                });
            });
            $('ul.main').each(function(){
                var $active, $content, $links = $(this).find('a');
                $active = $($links.filter('[href="'+location.hash+'"]')[0] || $links[0]);
                $active.addClass('active');
                $content = $($active.attr('href'));
                $links.not($active).each(function () {
                    $($(this).attr('href')).hide();
                });
                $(this).on('click', 'a', function(e){
                    $active.removeClass('active');
                    $content.hide();
                    $active = $(this);
                    $content = $($(this).attr('href'));
                    $active.addClass('active');
                    $content.show();
                    e.preventDefault();
                });
            });
        });
        ​ 
```

* * *

# java - 无法在 JAVA 中删除文件

> ID：13626208
> 
> 赞同：1
> 
> 时间：2012-11-29T12:49:29.843
> 
> 标签：java, delete-file

我无法在 Java 中删除文件。在我的程序中，我创建了一个文件，用它做一些事情，然后我必须删除它。当我调用 myFile.delete() 时，它返回 false。我检查了它试图删除的路径及其正确，我也有管理员权限（我在 Windows 7 上工作）。这是我的一段代码，非常简单：

```
File aux = new File(System.getProperty("user.dir")+"//tmp.ps");

CreatePostScript(aux.getAbsoluteFilePath());
SendToPrinter();

try{
    aux.delete();
}
catch(SecurityException ex){
     ex.printStackTrace();
} 
```

编辑，我已经阅读了 File 对象的一些属性：

```
canRead() returns false
canWrite() returns false
exists() returns false
getPath() returns the_actual_path_of_the_file
isFile() returns false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:54:56.860

您是从某个 IDE 内部执行此操作的吗？IDE 可能正在保存文件句柄。尝试下载[Unlocker](http://www.emptyloop.com/unlocker/)并查看谁在握住手柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:54:46.213

当您对文件执行处理时，它很可能`OutputStream`仍处于打开状态。`out.close();`在尝试删除文件之前调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T12:58:29.320

您可以考虑使用 Java 7 的[NIO2 API](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)进行操作。当某些东西阻止它执行操作时，它实际上[会抛出异常，而不是返回成功值。](http://docs.oracle.com/javase/tutorial/essential/io/fileOps.html#exception)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T12:56:24.800

检查您是否提供了`user.dir`属性思想`-D`命令行参数。并使用[File.pathSeparator](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#pathSeparator)代替`//`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T12:57:53.110

在您的代码中，我看到您在删除之前没有关闭流，关闭流并删除文件。

# android - 如何从 Android 的操作栏中删除应用程序图标？

> ID：13626216
> 
> 赞同：3
> 
> 时间：2012-11-29T12:49:49.363
> 
> 标签：android, android-actionbar

我正在使用带有选项卡的操作栏。我想从操作栏中隐藏应用程序图标。我使用下面的代码，但操作栏显示在选项卡下方。两者对我都没有用。

任何人帮助我！

```
 actionBar.setDisplayUseLogoEnabled(false); 
```

和

```
 actionBar.setDisplayShowHomeEnabled(false); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T12:55:31.860

`actionBar.setDisplayUseLogoEnabled(false);`应该这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T12:54:46.457

添加

```
actionBar.setDisplayShowTitleEnabled(false) 
```

# sql-server-2005 - SQL Server 2005 查询，将 qtys 更新为 0 where orderid <> min(orderid)

> ID：13626217
> 
> 赞同：0
> 
> 时间：2012-11-29T12:49:52.387
> 
> 标签：sql-server-2005

我有一张桌子

```
OrderID   Qty    ShopID
-----------------------
1         50     10
1         50     11
2         10     15
2         10     18 
```

该人在不同的商店订购了相同的订单（他们稍后将决定由哪家供应），但我必须每个订单只显示一个数量，请帮助设置`qty = 0`orderid 相同的位置和`shopid > min(shopID)`

例如

```
OrderID   Qty    ShopID
-----------------------
1         50     10
1         0      11
2         10     15
2         0      18 
```

这只是现实世界问题的一个例子，请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:19:35.607

你可以尝试这样的事情：

```
;WITH CTE AS
(
    SELECT 
        OrderID, Qty, ShopID,
        RowNum = ROW_NUMBER() OVER (PARTITION BY OrderID ORDER BY ShopID DESC)
    FROM
        dbo.YourOrderTableHere
)
SELECT
    OrderID,
    OrderedQty = CASE RowNum    
                    WHEN 1 THEN Qty ELSE 0 
                 END,
    ShopID
FROM CTE 
```

基本上，我将数据“分区” `OrderID`- 因此给定订单中的每一行都被分配一个连续的`RowNum`.

在 CTE（公用表表达式）的选择中，我返回存储在订单表中的数量`RowNum = 1`，并抑制该数量并为相同的所有其他行返回 0 `OrderID`。

这给了我一个输出：

![在此处输入图像描述](../Images/d5b61f501456ee2e68e5c8b316aa0f26.png)

# javascript - 谷歌浏览器扩展以突出显示和提醒网页上的所有链接

> ID：13626218
> 
> 赞同：1
> 
> 时间：2012-11-29T12:50:00.107
> 
> 标签：javascript, google-chrome-extension

我是编写 Google Chrome 扩展程序的新手。我（特别是）打算做一个`browser action`扩展，点击它会打开页面上的所有链接（URL），当我们`Google Search`有任何主题时。到目前为止，我可以制作任何网页上存在的东西*`highlights`*和链接。所需的 文件如下：-***`alerts`***`(javascript alert function )`
`manifest.json``script`

**`manifest.json==>`**

`{`
`"name": "Highlight then alert.",`
`"description": "Highlight and alert links on a webpage.",`
`"version": "1.1",`
`"background": {`
`"scripts": ["write.js"]`
`},`
`"permissions": [`
`"tabs", "http://*/*", "https://*/*"`
`],`
`"browser_action": {`
`"default_title": "highlighter",`
`"default_icon": "highlight_16x16.png"`
`},`
`"manifest_version": 2`
`}`

**`write.js==>`**

`chrome.browserAction.onClicked.addListener(function(tab) {`

**`var action_url1 = "javascript:(function()`
`{for(i=0;i<document.links.length;i++)alert(document.links[i]);})();";`**

**`var action_url2 = "javascript:(function()`
`{for(i=0;i<document.links.length;i++)document.links[i].style.backgroundColor='#F00';})();";`**

`chrome.tabs.update(tab.id, {url: action_url1});`
`chrome.tabs.update(tab.id, {url: action_url2});`
`});`

现在，我正在编写一个简单的`inline`javascript 代码，将它们存储在不同的变量中，如图所示，然后将它们传递给 Chrome 对象方法
-**`chrome.tabs.update()`**以执行`highlight`and`alert`操作。
我需要找出一种方法来通过编写一个绝对的 javascript 函数而不是传递一个变量来执行相同的操作。
建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:09:58.327

示例骨架将突出显示 Google 搜索扩展中的所有链接，您可以根据需要对其进行自定义。如果您需要更多信息，请与我们联系

![在此处输入图像描述](../Images/139baafd9ba08fb5398e160e45371851.png)

***清单.json***

```
{
  "name": "Show Links",
  "description": "Show links in a page",
  "version": "0.1",
  "minimum_chrome_version": "16.0.884",
  "permissions": [
    "experimental", "tabs", "downloads","<all_urls>"
  ],
  "browser_action": {
    "default_icon": "icon.jpg",
    "default_popup": "popup.html"
  },
  "manifest_version": 2
} 
```

***popup.html***

```
<html>
<head>
<script src='popup.js'></script>
</head>
<body>
<table id='links'>
  <tr>
    <th><input type='checkbox' checked id='toggle_all'></th>
  </tr>
</table>
</body>
</html> 
```

***popup.js***

```
var allLinks = [];
var visibleLinks = [];

// Display all visible links.
function showLinks() {
  var linksTable = document.getElementById('links');
  while (linksTable.children.length > 1) {
    linksTable.removeChild(linksTable.children[linksTable.children.length - 1])
  }
  for (var i = 0; i < visibleLinks.length; ++i) {
    var row = document.createElement('tr');
    var col0 = document.createElement('td');
    var col1 = document.createElement('td');
    var checkbox = document.createElement('input');
    checkbox.checked = true;
    checkbox.type = 'checkbox';
    checkbox.id = 'check' + i;
    col0.appendChild(checkbox);
    col1.innerText = visibleLinks[i];
    col1.style.whiteSpace = 'nowrap';
    col1.onclick = function() {
      checkbox.checked = !checkbox.checked;
    }
    row.appendChild(col0);
    row.appendChild(col1);
    linksTable.appendChild(row);
  }
 }

// Add links to allLinks and visibleLinks, sort and show them.  send_links.js is
// injected into all frames of the active tab, so this listener may be called
// multiple times.
chrome.extension.onMessage.addListener(function(links) {
  for (var index in links) {
    allLinks.push(links[index]);
  }
  allLinks.sort();
  visibleLinks = allLinks;
  //console.log(links);
  showLinks();
});

// Set up event handlers and inject send_links.js into all frames in the active
// tab.
window.onload = function() {

  chrome.windows.getCurrent(function (currentWindow) {
    chrome.tabs.query({active: true, windowId: currentWindow.id},
                      function(activeTabs) {
      chrome.tabs.executeScript(
        activeTabs[0].id, {file: 'send_links.js', allFrames: true});
    });
  });
}; 
```

***send_links.js***

```
// Send back to the popup a sorted deduped list of valid link URLs on this page.
// The popup injects this script into all frames in the active tab.
console.log("Injected");

var links = [].slice.apply(document.getElementsByTagName('a'));
console.log(links);
links = links.map(function(element) {
  // Return an anchor's href attribute, stripping any URL fragment (hash '#').
  // If the html specifies a relative path, chrome converts it to an absolute
  // URL.
  var href = element.href;
  var hashIndex = href.indexOf('#');
  if (hashIndex >= 0) {
    href = href.substr(0, hashIndex);
  }
  return href;
});

links.sort();

// Remove duplicates and invalid URLs.
var kBadPrefix = 'javascript';
for (var i = 0; i < links.length;) {

  if ((((i > 0) && (links[i] == links[i - 1])) ||
      (links[i] == '') ||
      (kBadPrefix == links[i].toLowerCase().substr(0, kBadPrefix.length))) ) {
    links.splice(i, 1);
  } else {
    ++i;
  }
}
console.log(links);

chrome.extension.sendMessage(links); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:22:32.597

有点不确定你到底想要什么，但我猜你想要一种方法来注入你在浏览器操作点击上测试的代码，而不需要你现在做的小书签样式。
如果是这样，这就是我的做法...
**manifest.json**

```
{
  "name": "Testing from a PopUp",
  "version": "1.0",
  "permissions": [
    "tabs", "<all_urls>"
  ],
  "browser_action": {
      "default_title": "Inject Test Script",
      "default_icon": "icon.png",
      "default_popup": "popup.html"
  },
  "manifest_version":2
} 
```

**popup.html**

```
<!doctype html>
<html>
  <head>
    <script src="popup.js"></script>
  </head>
  <body>
  </body>
</html> 
```

**popup.js**

```
chrome.tabs.executeScript(null,{file:"injectedCode.js"});
window.close(); 
```

**注入代码.js**

```
log = function() {
    for(i = 0; i < document.links.length; i++) console.debug(document.links[i]);
}

highlight = function() {
    var links = document.querySelectorAll('div[id="search"] ol li h3 a');
    for(var i = 0,length=links.length>10 ? 10 : links.length; i < length; i++) links[i].style.backgroundColor = '#F00';
}

log();
highlight(); 
```

您应该查找的位是 executeScript
[http://developer.chrome.com/extensions/tabs.html#method-executeScript](http://developer.chrome.com/extensions/tabs.html#method-executeScript)
就 我个人而言，我喜欢这种在将其转换为内容脚本之前测试小位的方法。

# c# - MVC 4 Ajax 未更新页面内的 PartialView

> ID：13626225
> 
> 赞同：3
> 
> 时间：2012-11-29T12:50:13.843
> 
> 标签：c#, ajax, asp.net-mvc, razor

我正在使用 MVC 4 做一个网站。它是一个列出音乐的网站，用户可以创建一个播放列表（如购物车购物）。

对于每首音乐，我都有应该在 Ajax 中执行的操作链接：

```
@Ajax.ActionLink("Adicionar à Playlist","AddPlaylist", new { id = item.MusicaID }, new AjaxOptions {UpdateTargetId="playlist", InsertionMode=InsertionMode.Replace}) 
```

控制器的操作方法返回一个 PartialView （播放列表的购物车），只有它应该更新，但不是让整个页面更新该部分，我得到一个局部视图，页面上没有更多内容。

这是我渲染 PartialView 的部分：

```
<section id="playlist">
     @Html.Partial("_PlaylistPartial")
</section> 
```

这不应该像我一样工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:59:45.667

确保您已包含

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

在你看来

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:57:38.740

这是一件愚蠢的事情。

首先，我包含的 jquery.unobtrusive-ajax.min.js 不像我那样工作：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

所以我这样说：

```
@Scripts.Render("~/Scripts/jquery.unobtrusive-ajax.min.js") 
```

仍然无法正常工作，因为我还需要包含 JQuery 文件：

```
@Scripts.Render("~/Scripts/jquery-1.7.1.js")
@Scripts.Render("~/Scripts/jquery.1.7.2.min.js") 
```

这样就可以了：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-26T22:26:50.067

聚会有点晚了，但我也遇到了类似的问题。解决方案是将此行添加到 _Layout.cshtml：

```
@Scripts.Render("~/bundles/jqueryval") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-22T07:22:19.783

首先，`Microsoft.JQuery.Unobtrusive.Ajax`从 NuGet 管理器安装，然后`~/Scripts/jquery.unobtrusive`在包含`BundleConfig`后包含`jquery-{version}.js`；这看起来类似于：

```
 bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js",
                    "~/Scripts/jquery.unobtrusive*)); 
```

# html - 如何使用 CSS 隐藏标题标签？

> ID：13626231
> 
> 赞同：2
> 
> 时间：2012-11-29T12:50:34.903
> 
> 标签：html, css, element

```
<article id="node-13" class="node node-article node-promoted node-teaser contextual-links-region clearfix" about="/fos/node/13" typeof="sioc:Item foaf:Document">

<header>

<h2 class="title" property="dc:title" datatype="">

 <a href="/fos/node/13">TITLE GOES HERE.....</a>

</h2>

</header>

</article> 
```

我需要使用 CSS 隐藏标题。

我怎样才能做到这一点...

由于我对 CSS 完全陌生，请建议如何做到这一点..

**更新：**

对于唯一的文章 ID

如果我们给出 title:hidden 它不会对所有节点显示。

**在我的情况下，它不应该只显示特定节点。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:52:25.923

给它`display:none;`：

```
article#node-13 h2.title { display: none; } 
```

交替使用`visibility:hidden;`

```
article#node-13 h2.title { visibility:hidden;} 
```

**display:none**表示相关标签根本不会出现在页面上 - 在其他标签之间不会为它分配空间。

**visibility:hidden**意味着与**display:none**不同，标签不可见，但在页面上为其分配了空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T12:52:27.427

要从页面流中删除元素：

```
display:none; 
```

要隐藏元素但将其保留在页面流中：

```
visibility:hidden; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T12:56:35.887

试试看`article#node-13 h2.title { display: none; }`，如果它在节点 13 内，这只会隐藏标题元素，

演示：http: [//jsfiddle.net/SO_AMK/2QQDd/](http://jsfiddle.net/SO_AMK/2QQDd/)

如果您想隐藏整篇文章，那么您可以这样做：`article#node-13 { display: none; }`.

请注意，`display: none;`从页面流中完全删除元素，这意味着元素不仅不可见，而且会完全折叠。

如果您只想隐藏元素而不是“折叠”它，那么您应该使用`article#node-13 h2.title { visibility: hidden; }`. 正如您在演示中看到的那样，它仍然占用第二个链接上方的空间，

演示：http: [//jsfiddle.net/SO_AMK/wwRsa/](http://jsfiddle.net/SO_AMK/wwRsa/)

# javascript - 当有人单击特定链接时如何显示加载对话框？

> ID：13626237
> 
> 赞同：11
> 
> 时间：2012-11-29T12:50:52.270
> 
> 标签：javascript, jquery, loading

我确实有一个 URL，它打开了一个加载速度很慢的网页，我无法控制它。

我确实想在有人单击此 URL 时显示加载对话框，或者在发生这种情况时使用覆盖 div 阻止页面。

注意：这与与 ajax 相关的问题不同，这是针对用户的正常 URL 点击，并非所有这些都只是特定的。

```
<A href="http://veryslowload.com" onClick="...">slow load...</a> 
```

我想我正在寻找的是放在 onClick 上的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T12:54:11.777

你可以这样做 ：

```
$(function(){
​  $('a').click(function(){
     $('<div class=loadingDiv>loading...</div>').prependTo(document.body); 
  });​
}); 
```

[演示](http://jsfiddle.net/HYbV2/)（将链接更改为非常慢的页面以获得最佳效果）

但这取决于页面：如果页面立即发送一些内容而不是全部内容，您将没有时间查看您的 div。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T13:13:01.813

如果您还需要动画，这将成为一件复杂的事情，因为浏览器的行为非常不同。有些会在新页面开始加载时停止所有 GIF 动画。如果你有 jQuery 并下载 spin.js 库，基本上它可以归结为这样的事情。

**在此处查看工作解决方案**：

[http://jsfiddle.net/7aJyP/](http://jsfiddle.net/7aJyP/)

```
<style>
#loading {
    display:none;
    position:absolute;
    left:0;
    top:0;
    z-index:1000;
    width:100%;
    height:100%;
    min-height:100%;
    background:#000;
    opacity:0.8;
    text-align:center;
    color:#fff;
}

#loading_anim {
    position:absolute;
    left:50%;
    top:50%;
    z-index:1010;
}
</style>

<div id="loading"><div id="loading_anim"></div></div>

<a href="http://pangoo.it" class="mylinkclass withanimation">link</a>

<script>

$(function () {
    $(".withanimation").click(function(e) {
        e.preventDefault();
        $("#loading").show();

        var url=$(this).attr("href");

        setTimeout(function() {
            setTimeout(function() {showSpinner();},30);
            window.location=url;
        },0);

   });
});

function showSpinner() {
    var opts = {
      lines: 15, // The number of lines to draw
      length: 3, // The length of each line
      width: 4, // The line thickness
      radius: 30, // The radius of the inner circle
      rotate: 0, // The rotation offset
      color: '#fff', // #rgb or #rrggbb
      speed: 2, // Rounds per second
      trail: 70, // Afterglow percentage
      shadow: false, // Whether to render a shadow
      hwaccel: false, // Whether to use hardware acceleration
      className: 'spinner', // The CSS class to assign to the spinner
      zIndex: 2e9, // The z-index (defaults to 2000000000)
      top: 'auto', // Top position relative to parent in px
      left: 'auto' // Left position relative to parent in px
    };
    $('#loading_anim').each(function() {
        spinner = new Spinner(opts).spin(this);
    });
}
</script> 
```

如果您使用动画 (GIF)，动画可能会在某些浏览器上冻结。我使用了 spin.js 库（[http://fgnass.github.com/spin.js/](http://fgnass.github.com/spin.js/)）。虽然 GIF 被冻结，但 javascript 动画似乎正在工作。

请使用所有浏览器进行测试！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T12:56:15.343

虽然 ajax 会更优雅，但它是可能的。您必须通过阻止默认事件来拦截导航，然后强制更新 UI，然后将位置更改为目标 url。像这样的东西：

```
$('#mylink').click(function(e) {
    e.preventDefault();
    var url = this.href;
    // Update the UI here
    setTimeout(function() {
        // This is a trick to force a repaint
        window.location.href = url;
    },0);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T13:03:22.700

大概，您希望加载对话框立即出现，然后在新页面呈现时消失并被新页面替换？

三个想法浮现在脑海。

* * *

如果您可以控制源页面但不能控制目标 - 使用 click 事件处理程序将标签的正常行为替换为以下内容：

1.  显示加载动画
2.  向标签的 href 属性定义的 URL 发出 AJAX 请求（或者，创建一个以 URL 作为其源的隐藏）
3.  请求完成后，将文档的内容替换为响应。

但是，这可能会变得非常棘手，因为您不会丢失原始页面中定义的 javascript 和 css。它也不会更改用户浏览器中显示的 URL。

* * *

如果您可以控制目标并且可以使目标可缓存（即使是几秒钟）：您可以通过 AJAX 在后台加载页面，然后重定向到它。第一次加载会很慢，然后重定向将从缓存中加载页面。

* * *

还有另一种选择：如果您可以控制目标页面，则可以定义一个可选参数，如果该参数存在，服务器会返回一个页面，该页面仅包含加载动画和一些加载实际页面的 javascript。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-10T16:35:32.080

这是一个老话题，但如果您想要一个不依赖于 JQuery 的简单解决方案，请将以下内容添加到链接中的 onClick 中：

```
<A href="http://veryslowload.com" onClick=""javascript:document.getElementById('page-loader').style.display='block';"">slow load...</a> 
```

然后在您页面的某个位置，有一个隐藏的 DIV，其中包含您想要加载对话框的内容。

```
<div id="page-loader">
  <h3>Loading page...</h3>
</div> 
```

并使用 CSS 隐藏 DIV，如下所示：

```
#page-loader {                                                                                                     
  position: absolute;                                                                                              
  top: 0;                                                                                                          
  bottom: 0;                                                                                                       
  left: 0;                                                                                                         
  right: 0;                                                                                                        
  z-index: 10000;                                                                                                  
  display: none;                                                                                                   
  text-align: center;                                                                                              
  width: 100%;                                                                                                     
  padding-top: 25px;                                                                                               
  background-color: rgba(255, 255, 255, 0.7);                                                                      
} 
```

这是一个工作示例的 JSfiddle：http: [//jsfiddle.net/meb69vqd/](http://jsfiddle.net/meb69vqd/)

我不能完全相信这个例子。这里有关于此技术的其他提示：[https ://css-tricks.com/css-page-loader/](https://css-tricks.com/css-page-loader/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T13:21:44.247

您可以创建一个隐藏的 iframe 并监听 load 事件。您还需要在大约 1 秒后进行手动检查，以防目标阻止了 x 帧内容。

**演示：http: [//jsbin.com/ijofih/1](http://jsbin.com/ijofih/1)**

```
$('a').click(function(e) {
    $(this).text('Loading...'); // do your UI thing here
    e.preventDefault();
    var destination = this.href;
    setTimeout(function() {
        window.location = destination;
    },1000);
    $('<iframe>').hide().appendTo('body').load(function() {
        window.location = destination;
    }).attr('src', destination);
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T13:07:21.537

最初将 spinner.gif 存储在表单中的某个位置并将其隐藏并放置 src=""

因此将没有图像的 src

但稍后在进行 ajax 调用时，您可以为微调器图像设置 src，因此您的页面似乎正在加载

```
$(document).ready(function() {
            // bind 'myForm' and provide a simple callback function
               $("#tempForm").ajaxForm({
               url:'url to be called',
               type:'post',
               beforeSend:function()
               {
                   alert("this is the place where you place things to happen till your page is being transfered to the given URL so i am setting the src for the spinner image here");  
                   $("#spinner image ID").attr("src","../images/spinner.gif");
               },
               success:function(e){
               alert("do whatever you want with response here");
               }
        });
        }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-17T23:46:59.437

对@bfavaretto 对我有用的解决方案的改进

```
$('#mylink').click(function(e) {                                                                                   
  e.preventDefault();                                                                                              
  var url = this.href;                                                                                             
  // Update the UI here                                                                                            
  requestAnimationFrame(function() {                                                                               
    setTimeout(function() {                                                                                        
        window.location.href = url;                                                                                
    });                                                                                                            
  });                                                                                                              
}); 
```

浏览器会不一致地显示我的微调器。我尝试通过增加 setTimeout 的延迟来解决问题。正确的解决方案是询问浏览器何时准备好显示微调器，然后导航离开。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-11-29T12:52:57.230

您可能想查看模态框。您可以在发送 ajax 请求时激活模型框，成功后可能会关闭它。 [https://www.google.com/search?sugexp=chrome,mod=10&sourceid=chrome&ie=UTF-8&q=modal+box](https://www.google.com/search?sugexp=chrome,mod=10&sourceid=chrome&ie=UTF-8&q=modal+box)

# android - 从 AccountManager 获取用户凭据“密码”

> ID：13626241
> 
> 赞同：0
> 
> 时间：2012-11-29T12:51:07.897
> 
> 标签：android

有没有办法通过克服 SecurityException 来获取 Gmail 用户帐户的密码。

我正在在没有用户提示的情况下在后台发送电子邮件。我用于此的 javamail API 需要发送电子邮件的帐户的用户名和密码。我在android中使用AccountManger获取密码时遇到了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:18:12.010

幸运的是，没有。该`ActivityManager.getPassword()`调用只允许与身份验证器模块具有相同 UID 的应用程序（在本例中为 Google 应用程序）调用。即使您设法调用它，它也不会存储实际密码，而是存储密码的加密版本或主令牌。您可以在此处找到有关其工作原理的更多详细信息：http: [//nelenkov.blogspot.jp/2012/11/android-online-account-management.html](http://nelenkov.blogspot.jp/2012/11/android-online-account-management.html)

不过，Google 的 SMTP 服务器确实支持 OAuth2 令牌代替密码，因此您可以从中获取令牌`AccountManager`并使用它来进行身份验证和发送电子邮件。详情在这里：

[https://developers.google.com/google-apps/gmail/oauth_overview](https://developers.google.com/google-apps/gmail/oauth_overview)

# c - 在声明之前 typedef 一个结构

> ID：13626246
> 
> 赞同：33
> 
> 时间：2012-11-29T12:51:17.350
> 
> 标签：c, typedef

我不是初学者，我对以下成语非常熟悉：

```
typedef struct Foo_ Foo;// I know typedef struct Foo Foo is fine, I'm just trying to make it clearer
struct Foo_
{
    int value;
    Foo *link;
}; 
```

我只是突然感到困惑，因为我的理解是在声明之前不允许使用名称（标识符）。但是在声明`typedef struct Foo_ Foo`中，标识符`Foo_`还不存在！编译器怎么会允许这种情况发生？请有人对此有所了解，向我解释这种语法的理由是什么？

维基百科引用： 的目的`typedef`是为现有类型分配替代名称。

--- >8 ---

谢谢大家提供这么多有用的信息。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-29T13:00:16.553

这完全没问题。像你这样的标签的第一次使用`struct`是类型的前向声明`struct`。

请注意，您的使用`_Foo`不**符合**要求。保留带有前导下划线和后跟大写字母的标识符。不要那样做。尾随下划线就可以了。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-29T13:06:51.367

这在 6.7.2.3p8 中有所介绍：

> ### 6.7.2.3 标签
> 
> **语义**
> [...]
> 
> 8 - 如果*struct-or-union identifier*形式的类型说明符出现在 [a struct-or-union definition] 或 [a struct-or-union declaration] 之外，并且没有其他标识符声明为标记可见，然后它声明一个不完整的结构或联合类型，并将标识符声明为该类型的标记。

`struct Foo`in 中的类型说明符`typedef struct Foo Foo`不在定义 ( `struct Foo {...};`) 或声明 ( `struct Foo;`) 中，因此它属于 6.7.2.3p8。

请注意， a 没有什么特别之处`typedef`；你也可以写

```
struct A { struct Foo *p; }; 
```

并且先前的定义或声明不需要是可见的。

但是，在函数声明或定义中：

```
void foo(struct Foo *p); 
```

如果`struct Foo`之前没有声明，那么声明的*范围*将只是函数声明或定义，并且它不会与任何后续声明或定义类型兼容`Foo`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T13:13:13.480

```
ISO c99 : 6.2.1 Scopes of identifiers 
```

7

结构、联合和枚举标记的范围紧随标记出现在声明标记的类型说明符中之后开始。

```
typedef struct _Foo Foo; // You can do this because it's just the typedef the new type

struct _Foo *myfoo ; // It's pointer to struct _Foo (an incomplete type)
                      //but make sure before using myfoo->value   
                    // struct definition should be available

struct _Foo MyFoo;  // It's  definition of MyFoo but don't forget 
                    // to give the definition of struct _Foo (gcc extension). 

struct _Foo;  // forward declaration

struct _Foo    // It's the definition
{
    int value;
    Foo *link;
}; 
```

就像`functions`我们在实际定义 function 之前一样，所以我们也可以这样`forward declaration`做。`typedef``struct`

```
void func(int );
typedef void (*func_t)(int);

void func(int x)
{
 //actual definition
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-29T13:01:07.007

`typedef`用于为类型创建*别名*。但是当 typedef 时，该类型不一定存在。

例如，

如果你这样做：

```
struct Foo; 
```

而且你永远不会`struct Foo`在程序中定义任何地方，那么它仍然会编译。编译器会假设它在某处定义并继续。只有在不定义结构的情况下使用它，才会出现错误。

这也是类似的情况`typedef`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T13:00:27.827

在某些情况下，`struct ...`在声明类型之前使用它是有效的。那就是所谓的“不完整型”。

例如，将变量声明为指向“不完整”结构的指针以及（如您所见）a 是有效的`typedef`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-29T13:05:58.433

这称为前向声明。前向声明允许您在允许不完整类型的上下文中使用其名称。

编译器将“看到” typedef 标签，并将其存储起来，直到找到类型为止，所以只要您在 typedef 之后但在任何使用之前声明了类型，就可以了。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-11-29T12:56:32.437

**typedef 声明允许您定义自己的标识符，这些标识符可以用来代替类型说明符，例如 int、float 和 double。typedef 声明不保留存储。**

更多信息[http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=%2Fcom.ibm.vacpp6m.doc%2Flanguage%2Fref%2Fclrc03typdef.htm](http://publib.boulder.ibm.com/infocenter/macxhelp/v6v81/index.jsp?topic=%2Fcom.ibm.vacpp6m.doc%2Flanguage%2Fref%2Fclrc03typdef.htm)

# php - 打开购物车的搜索引擎

> ID：13626248
> 
> 赞同：1
> 
> 时间：2012-11-29T12:51:20.237
> 
> 标签：php, opencart

谁能告诉我 Open Cart 的搜索引擎是如何工作的。我的意思是说 Open Cart 中的搜索代码在哪里。哪些数据库表用于搜索任何查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T16:48:34.550

OpenCart 搜索表单提交给`route=product/search`ie `catalog/controller/product/search.php`。该文件根据提交的关键字计算结果，然后加载 product/search.tpl 模板以显示搜索结果。

搜索结果由控制器使用`catalog/product`模型的`getProducts()`功能生成。用于生成普通产品列表的相同功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:19:03.093

OpenCart 使用基本搜索（仅匹配搜索中的任何关键字），尽管扩展商店中还有其他搜索方法可用。它默认使用的表是`product`和`product_description`表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-14T12:01:34.507

根据您的过滤器在类别级别中打开购物车搜索加入 category_description 表，产品标题加入 product_description 表所有这一切都根据当前用户语言

您可以在 Product Model \catalog\model\catalog\product.php 中找到此代码

```
public function getProducts($data = array()) { 
```

# c++ - Qt：禁用按钮而不将其变为灰色

> ID：13626254
> 
> 赞同：2
> 
> 时间：2012-11-29T12:51:36.723
> 
> 标签：c++, qt

我需要在 Qt 4.8 中制作一个可检查的按钮，当被选中时它会被禁用。

我遇到的问题是按钮变成灰色，我需要让它始终保持相同的颜色。对于两种可能的路径，我有两个问题：

1）当我使用button.setEnabled（false）时，有没有办法禁用灰显效果？

2）有没有办法挂钩点击事件，所以我可以“模拟”禁用的属性？

提前致谢！

[编辑]为了提供一点上下文，我有两个应该相互切换的按钮，这就是为什么我需要防止点击按下的按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:05:43.053

试试[button.blockSignals(true)](http://doc.qt.digia.com/qt/qobject.html#blockSignals)。您还可以使用 Qt 样式表覆盖按钮禁用时的外观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:44:27.780

> 为了提供一点上下文，我有两个应该相互切换的按钮，这就是为什么我需要防止点击按下的按钮。

您应该改用[QButtonGroup](http://doc.qt.digia.com/qt/qbuttongroup.html)。

> 取消选中按钮的唯一方法是当用户选中另一个按钮时......

[来自文档](http://doc.qt.digia.com/qt/qbuttongroup.html#exclusive-prop)：

> 在独占组中，用户不能通过点击取消选中当前选中的按钮；相反，必须单击组中的另一个按钮才能为该组设置新的选中按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-06T04:04:45.043

用于禁用工具按钮并放置您选择的图标而不是变成灰色

1.  您必须加载创建 QPixmap 对象的图标，例如 qpm，
2.  创建 QIcon 对象说图标
3.  `icon.addPixmap(qpm,QIcon::Disabled,QIcon::On)`此行将显示图标
4.  工具按钮上的 setIcon
5.  设置样式表

启用 Toolbutton 时只需更改 3。`icon.addPixmap(qpm,QIcon::Normal,QIcon::On)`

# python - 在同一个生成器上发送和接收值

> ID：13626263
> 
> 赞同：2
> 
> 时间：2012-11-29T12:52:03.543
> 
> 标签：python, generator, coroutine

我试图了解 python 生成器的一些微妙细节。我编写的一个测试程序，看看我是否可以向/从同一个生成器交替发送和读取值，如下所示：

```
def injector():
    while True:
        try:
            print 'a'
            v = yield
            print 'b', v
            yield v
            print 'c'
        except GeneratorExit:
            print 'exit'
            break

g = injector()

print 'send none'
g.send(None)
print 'send 2'
g.send(2)
print 'receiving'
v = g.next()
print 'received', v

g.close() 
```

该程序的预期输出是：

```
send none
a
send 2
b 2
receiving
received 2
c
a
exit 
```

我得到的输出是：

```
send none
a
send 2
b 2
receiving
c
a
received None
exit 
```

现在，显然，问题是为什么我会得到上述输出？我不了解发电机的工作原理是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:11:01.607

让我试着澄清一下：

```
def injector():
    while True:
        try:
            print 'a'
            v = yield
            print 'b', v
            yield v
            print 'c'
        except GeneratorExit:
            print 'exit'
            break

g = injector()

print 'send none'
g.send(None) 
```

这里启动协程。它一直执行到第一个 yield 的结果是从 返回的`.send()`，然后被丢弃。

协程不打印`a`任何内容，因此`None`. 所以丢弃是可以的。

```
print 'send 2'
g.send(2) 
```

在这里，您将 2 发送到协程，使其从您离开的地方继续。`v = 2`.

它再次打印`2`并产生`v`。你会从`g.send()`电话中期待这一点。所以在接收和丢弃之后`v`，你做

```
print 'receiving'
v = g.next() 
```

在这里，您再次将控制权交给协程，它会打印`c`，然后`a`，然后`None`再次生成，您可以在这里得到。

```
print 'received', v 
```

因此打印`None`为`v`.

你可能想要的是

```
g = injector()

print 'send none'
g.send(None)
print 'send 2'
v = g.send(2)
print 'received', v

g.close() 
```

（请注意，最后一个块可以写得更干净漂亮，如下所示：

```
from contextlib import closing
with closing(injector()) as g:
    print 'send none'
    g.send(None)
    print 'send 2'
    v = g.send(2)
    print 'received', v 
```

)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:02:39.473

因此，您遇到的问题是最后一次通话。首先，它似乎从代码停止的地方开始，打印第`'c'`一个。然后由于该语句没有产生，它继续在 while 循环中打印`'a'`。最后，产生输出。none 结果，因为在`'a'`

# vhdl - 通过 VHDL 流水线同步信号的设计技巧

> ID：13626266
> 
> 赞同：4
> 
> 时间：2012-11-29T12:52:08.883
> 
> 标签：vhdl, pipeline, fpga

我正在用 VHDL 设计一个视频像素数据处理管道，它涉及多个步骤，包括乘法和除法。我想保持信号同步，以便我可以保持同步信号，并在流水线末端正确输出它以及经过多个处理阶段的操纵像素数据。

我假设我想使用移位寄存器或其他东西将信号延迟正确的周期数，以便输出正确，但我正在寻找有关设计它的好方法的建议，特别是不同信号的流水线级数随着我对设计的改进，可能会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:32:47.650

好问题。

我不知道一个完整的解决方案，但这里有两个部分策略......

**互连组件**...如果组件可以*导出*其值是其管道深度的泛型，那将是非常好的。不幸的是你不能，并且为此专门提供一个端口似乎很愚蠢（尽管它可能是可行的；因为它是一个整数常量，它会在综合中消失）

如果做不到这一点，请传入一个通用的指示此模块的预算。在模块内部，如果无法满足预算，则断言 (severity FAILURE)...（此断言在合成时是可检查的，并且至少 Xilinx XST 可以处理类似的断言）

将预算设为硬数字，如果不等于实际管道深度则断言，或者如果预算太大，则在模块内添加管道阶段，仅在预算太小时时断言。

这样您就可以连接可预测的模块，并且顶层可以执行流水线算法来平衡事物（例如，将计算出的常数值传递给可编程延迟线）

**在一个组件内**……我使用一个进程，寄存器表示为内部信号，其名称反映了它们的管道阶段，`exponent_1, exponent_2, exponent_3`依此类推。在流程中，第一部分描述了第一个周期的所有动作，第二部分描述了第二个周期，依此类推。通常，“更简单”的路径可以逐字复制到下一个管道阶段，只是为了将它们与关键路径同步。该过程相当有条理且易于维护。

我可能会将 32 位乘法分解为 16*16 的块，并将部分乘积添加流水线化。这给出的控制，用于给出比 XST 单独给出的更好的结果......

我知道有些人更喜欢流程中的变量，我将它们用于管道阶段的中间结果，但是使用信号我可以按自然顺序描述管道（感谢延迟分配），而使用变量，我必须描述它向后！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:05:34.333

我为我的每个主要处理块创建一个包，其中的一个常量是该块的处理延迟。然后我可以将它连接到我的通用“延迟线”块，该块具有通用的周期数。

最好通过自检测试台来保持与实际实现“同步”的恒定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:24:54.917

需要考虑的是延迟线（即背靠背寄存器）与 FIFO。

考虑一个`X`具有流水线延迟的模块`N`。当存在`N`变量时，FIFO 工作良好。诀窍是记住，只有在模块和 FIFO 都可以接受时，您才能请求新工作。理想情况下，您调整 FIFO 的大小，以便它可以包含`X`可以同时工作的最大项目数，但有时这不切实际。例如，如果您的计算包括对远程内存的访问。

另一种选择是将侧通道（即同步标志所采用的路径）集成到模块中`X`，而不是向外输出。如果您这样做，那么如果计算的任何部分必须停止，您也可以停止侧通道并且两者保持同步。您可以这样做，因为您处于一个包含所有必要信号的范围内。然后所有信号，无论是否用于计算，都会同时出现在输出端。

# html5-video - 全屏平移 HTML5 视频中的可点击 div

> ID：13626273
> 
> 赞同：1
> 
> 时间：2012-11-29T12:52:17.103
> 
> 标签：html5-video

我正在寻找一种方法来使平移全屏 HTML5 视频可点击。我希望视频中的不同部分（div）在向上/向下/向右或向左平移时跟随并保持原位。这甚至可能吗？

最好的，塞巴斯蒂安

# php - stream_context_create() 中的空值

> ID：13626274
> 
> 赞同：0
> 
> 时间：2012-11-29T12:52:19.643
> 
> 标签：php, paypal-adaptive-payments

我已经用于自适应贝宝付款。使用此代码

```
$params = array("http" => array( 
    "method" => "POST",
    "content" => $body_data,
    "header" =>  "X-PAYPAL-SECURITY-USERID: " . $API_UserName . "\r\n" .
    "X-PAYPAL-SECURITY-SIGNATURE: " . $API_Signature . "\r\n" .
    "X-PAYPAL-SECURITY-PASSWORD: " . $API_Password . "\r\n" .
    "X-PAYPAL-APPLICATION-ID: " . $API_AppID . "\r\n" .
    "X-PAYPAL-REQUEST-DATA-FORMAT: " . $API_RequestFormat . "\r\n" .
    "X-PAYPAL-RESPONSE-DATA-FORMAT: " . $API_ResponseFormat . "\r\n" 
));

$ctx = stream_context_create($params);

//open the stream and send request
$fp = @fopen($url, "r", false, $ctx);

//get response
$response = stream_get_contents($fp);

//check to see if stream is open
if ($response === false) {
   throw new Exception("php error message = " . "$php_errormsg");
}

//close the stream
fclose($fp); 
```

但它显示错误消息

> 消息：||php 错误消息 = stream_get_contents() 期望参数 1 是资源，给定布尔值||

如何删除这个请帮助我... :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:55:22.213

发生这种情况是因为：

```
$fp = @fopen($url, "r", false, $ctx); 
```

正在返回一个 FALSE 布尔值。删除 @ 运算符（[错误控制](http://php.net/manual/en/language.operators.errorcontrol.php)）并查看您的函数是否抛出任何错误或通知。此外，请检查并确保您的 URL 正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:55:25.283

您的`fopen()`通话失败（返回 false）。您为什么要使用 来抑制错误`@`？

`$url`无法访问其中的任何内容。检查资源是否可访问并且没有网络问题。

如果您尝试访问`https`安全链接，则需要安装并启用 OpenSSL。

从[手册](http://php.net/manual/en/function.fopen.php)：

> 成功时返回文件指针资源，错误时返回 FALSE。

# android - 如何检测已发现并配对的设备是否可用？

> ID：13626277
> 
> 赞同：12
> 
> 时间：2012-11-29T12:52:30.593
> 
> 标签：android, bluetooth

我已经发现了另一个设备并且我已经配对了它。至少我在我的 Android 手机上的配对设备列表中有它。

现在在*BluetoothSocket.connect()*上可能会出现两个问题：

1.  远程设备已关闭或不可用

2.  远程设备忘记了配对，因为它只能配对另一台设备并且已与另一部手机配对

    => 然后在一定超时后连接失败。

是否可以检查**已经配对**的设备是否真的可用**并**记住它已与我的手机配对但未连接到它？这与检测设备是否已连接无关。配对和可见不等于已连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:52:04.947

我很抱歉报告，但您的设备无法知道另一个设备在范围内，除非尝试连接它。而且，要知道远程设备是否删除了配对，必须询问它，例如连接并查看它是否要求配对。

其他方法是让用户在连接之前确认这些，或者可能使用外部通道 TCP/IP 或 WiFi 或 NFC。如果这些都没有，那么魔法力量将是唯一的选择。:-,)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T21:42:56.010

1.  记住连接的设备实际上很简单。成功绑定到设备后，您将获得`BluetoothDevice`对象。你可以用 查询它的唯一mac地址**`getAddress()`**。获得地址后，将其保存到共享首选项。这包括“是否配对”——下次我们使用`BluetoothAdapter`并接收绑定设备列表时，我们可以在其中搜索保存的设备地址。
2.  既然我们知道了设备的确切地址，我们如何判断它是否“真的可用”？好吧，如果您尝试发现设备`startDiscovery ()`（如果您发现设备是可发现的**，并且**您需要测试设备的完全连接性，则必须打开一个新套接字并查看它是否顺利。

根据我的经验，我处理了 3 种不同的可能的 BT 设备情况：

1.  设备未绑定
2.  设备绑定 - 但未连接
3.  设备绑定 - 并连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T11:09:52.007

您可以获得已配对的设备列表并与当前可发现的设备进行交叉验证。因此，这将为您提供已配对的处于可发现模式的设备。

但是对于不可发现的设备，您必须与它们连接。如果成功发送数据的远程设备处于活动状态，请尝试在它们之间创建套接字连接。

您也可以使用远程设备的 getBondState () 来检查绑定状态并注册 ACTION_BOND_STATE_CHANGED 接收器以获取绑定状态更改的回调。

# .net - 无法从 .NET OleDB.DataReader 检索行

> ID：13626285
> 
> 赞同：1
> 
> 时间：2012-11-29T12:52:52.737
> 
> 标签：.net, sql, ms-access, oledb

我的 SQL 语句有问题。

我的环境如下：

*   通过 .NET OleDB.DataReader 查询 MS Access (2002) 的 VB.NET 应用程序

该查询不提供任何行/结果。但是当我在 MS Access 数据库上执行查询时，它会提供正确的结果。

查询是：

```
<i>select prnr.prk, prnr.prl, famk, faml from 
(fzgpr inner join prnr on prnr.id = fzgpr.prid) 
inner join prfamilie on prfamilie.id = prnr.famid 
where ((fzgpr.fzgid) = 1) and ((FamL) like '*Air*')</i> 
```

我尝试了不同的括号，但没有一个有效。我注意到，删除 where 子句的第二部分（和（（FamL）...）解决了这个问题，但我需要第二部分！

我找不到错误，请帮助我，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:06:42.020

我想说，如果您通过 OleDB 运行查询，则必须符合更多基于 SQL 的语法并使用`((FamL) like '%Air%')`

我在 Access 数据库上运行了一些应用程序（我的都是 2010 年的），这就是我使用的语法。我还使用 OleDB 对数据库进行所有读取访问。

# jquery - 错误排序十进制值 tablesorter 脚本

> ID：13626291
> 
> 赞同：0
> 
> 时间：2012-11-29T12:53:12.420
> 
> 标签：jquery, sorting, tablesorter

我在对十进制值表排序器网格进行排序时遇到问题。当我尝试对表中的距离值进行排序时，距离排序如下：

```
distance
0.35
0.76
1.36
1.75
10.36
100.66
2.33

$(document).ready(function() {
// extend the default setting to always include the zebra widget.
$.tablesorter.defaults.widgets = ['zebra'];
// extend the default setting to always sort on the first column
$.tablesorter.defaults.sortList = [[0,0]];
$.tablesorter.defaults.debug=true;
  $("table#list").tablesorter();
  });
  $(document).ready(function() {

    $("table#list").tablesorterPager({container: $("#pager")});
    }); 
```

谁能告诉我防止错误排序的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:48:29.667

尝试`digit`在标题选项中将排序器设置为：

```
$(function() {
  $("table#list").tablesorter({
    widgets  : ['zebra'],
    sortList : [[0,0]]
    headers  : {
      0 : { sorter : 'digit' }
    }
  }).tablesorterPager({
    container: $("#pager")
  }); 
}); 
```

# java - 发送 IMAP 空闲命令后是否需要执行其他操作以保持连接处于活动状态？

> ID：13626292
> 
> 赞同：1
> 
> 时间：2012-11-29T12:53:18.307
> 
> 标签：java, email, protocols, imap, jakarta-mail

我正在处理 IMAP 客户端（更准确地说，使用 JavaMail）的实现，它使用 IMAP idle() 命令直接从服务器获取新的电子邮件通知，而无需轮询它。

这是我的问题：在发送此空闲命令后我是否应该做其他事情（即再次发送 IMAP idle()，只是询问消息的数量）以保持连接处于活动状态？

换一种说法：即使我之前发送了 idle() 命令，此服务器是否可以关闭当前的 IMAP 连接？

我在 Stackoverflow 和其他网站上发现了很多问题/一些代码，但我仍然不满意。希望那里有 IMAP 协议方面的专家。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:09:44.503

服务器可能不会断开您的连接，但永远不要依赖套接字的稳定性，连接可能由于多种不同的原因而消失，您需要优雅地拦截异常并尝试再次连接，可能在增加超时之后。

例如，KMail 认为连接是金字塔之后世界上最持久的东西，所以在暂停我的笔记本电脑并移动到其他地方之后，我必须重新启动它才能让它再次连接到 IMAP 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:47:31.147

该协议表明服务器可能会在 30 分钟后断开您的连接，即使在空闲状态下也是如此。

您必须至少每 30 分钟结束 IDLE 并重新发出它。此外，正如 Lt.Worf 所指出的，套接字可能由于多种其他原因而关闭。

# c++ - 如何使用 GetFileVersionInfo 函数？

> ID：13626295
> 
> 赞同：3
> 
> 时间：2012-11-29T12:53:33.123
> 
> 标签：c++, winapi, dll, resources, versioning

我有这段代码——返回文件版本（到结构中），我以 shell32.dll 为例，但有些值我不明白它们的含义，希望得到解释。

这是代码：

```
void GetFileVersion( PCHAR pFilePath  ,PVERSION pRetVersion)
{
DWORD               dwSize              = 0;
BYTE                *pVersionInfo       = NULL;
VS_FIXEDFILEINFO    *pFileInfo          = NULL;
UINT                pLenFileInfo        = 0;

/*getting the file version info size */
dwSize = GetFileVersionInfoSize( pFilePath, NULL );
if ( dwSize == 0 )
{
    printf( "Error in GetFileVersionInfoSize: %d\n", GetLastError() );
    return;
}

pVersionInfo = new BYTE[ dwSize ]; /*allocation of space for the verison size */

if ( !GetFileVersionInfo( pFilePath, 0, dwSize, pVersionInfo ) ) /*entering all info     data to pbVersionInfo*/
{
    printf( "Error in GetFileVersionInfo: %d\n", GetLastError() );
    delete[] pVersionInfo;
    return;
}

if ( !VerQueryValue( pVersionInfo, TEXT("\\"), (LPVOID*) &pFileInfo, &pLenFileInfo ) )
{
    printf( "Error in VerQueryValue: %d\n", GetLastError() );
    delete[] pVersionInfo;
    return;
}

/*checking if the allocation succeeded */
if (NULL == pRetVersion)
{
    printf("Allocation failed! \n" , GetLastError());
    return;
}

pRetVersion->major  =  ( pFileInfo->dwFileVersionMS >> 16 ) & 0xffff ;
pRetVersion->minor  =  ( pFileInfo->dwFileVersionMS) & 0xffff;
pRetVersion->hotfix =  ( pFileInfo->dwFileVersionLS >>  16 ) & 0xffff;
pRetVersion->other  =  ( pFileInfo->dwFileVersionLS) & 0xffff;      

} 
```

1.  dwSize 的含义是什么？这只是文件版本大小吗？单击 shell32.dll 时在哪里可以看到它？

2.  pLenFileinfo - 这个大小是多少？

3.  当我查看`VS_FIXEDFILEINFO`只有版本信息信息的结构时，是否有获取例如：`File description`，`Date modified`等的方法`Original filename`？（“详细信息”中的所有其他属性）？

谢谢 ！！！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:06:36.177

文件版本信息是可变长度的。它包含许多不同的信息。所有这些不同片段的总长度由 的返回值给出`GetFileVersionInfoSize`。

当您打电话时，`VerQueryValue`您是在询问整体版本信息中的特定信息。并且该特定部分的长度永远不能大于整体尺寸。

的文档[`VerQueryFile`](https://docs.microsoft.com/en-us/windows/desktop/api/winver/nf-winver-verqueryvaluea)包含提取文件描述的示例代码。

# android - 不能将两个值传递给意图

> ID：13626301
> 
> 赞同：0
> 
> 时间：2012-11-29T12:53:58.103
> 
> 标签：android, android-intent, bundle

我想通过使用捆绑将两个值传递给意图，但是当我单击意图时该值没有传递。下面是这个的源代码：

```
 public static final String ID_EXTRA = "com.example._ID";
    protected static final String ID_LISTID = "com.example._ID";
    String list = null;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            list = getIntent().getStringExtra(main.ID_EXTRA);
            listView = (ListView) findViewById(R.id.productList);
   {
   listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            myid = (int) id;

        }

    });
}

==============================================================================
    Bundle bundle = new Bundle();
    bundle.putString(ID_EXTRA, String.valueOf(myid));
    bundle.putString(ID_LISTID, list);
    editProduct.putExtras(bundle);
    startActivity(editProduct); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:09:14.673

`Bundle`建立在 之上`HashMap`，使用相同的键来存储值将导致您放置给我的最后一个元素替换为您正在插入的项目。使用不同的键：

例如：

```
 public static final String ID_EXTRA = "com.example._ID2";
 protected static final String ID_LISTID = "com.example._ID1"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:00:12.537

如果不提供额外数据，没有人可以回答这个问题：

*   ID_EXTRA 的值是多少。
*   ID_LISTID 的值是多少。

他们不应该是一样的！您提供了两个相同的值。将其更改为“ `com.example._ID1`”和“ `com.example._ID2`”之类的内容。

*   myid，怀疑这是一个整数。请通过 putInt 列表添加
*   什么是清单？你说它是一个字符串，但我真的不相信。如果是，请将您的变量重命名为更易于理解的名称。不仅适合您，也适合使用您的代码的人。

# jquery - 如何在 jquery asp.net 中进行淡出

> ID：13626304
> 
> 赞同：1
> 
> 时间：2012-11-29T12:54:02.923
> 
> 标签：jquery, asp.net

我有以下 ASP.NET 代码。当我点击按钮时，一开始一两次，div **div1**里面的文字消失了一会儿，然后又显示出来了。但是，当我现在尝试它时，它永远不会消失。div 中的文本只是保留。

```
<head runat="server">
<title></title>
<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
<script type="text/javascript">
    $(document).ready(
        function () {
            $("#div1").css("color", "red");
            $("#btn").click(function () {
                $("#div1").fadeOut("slow");
            });
        });
</script> 
```

```
<body>
<form id="form1" runat="server">
<div class="ab" id="divTest" runat="server">test</div>
    <asp:Button ID="btn" runat="server" Text="GET" />
    <div id="div1" runat="server"> 
        <div>test new </div>                
        <div id="divTestArea1">
            <b>Bold text</b>
            <i>Italic text</i>
            <div id="divTestArea2">
                    <b>Bold text 2</b>
                    <i>Italic text 2</i>
                    <div>
                            <b>Bold text 3</b>
                    </div>
            </div>
        </div>  
   </div>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T12:56:13.840

您必须使用服务器控件的 ClientID，因为您的 div 具有属性 runat="server" 因此 asp.net 将为它生成 ClientID，这将不同于原始的。由于[**ClientIDMode**](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)未设置为静态。

**[现场演示](http://jsfiddle.net/rajaadil/YHNCm/)**

```
$(document).ready(
    function () {
        $("#<%= div1.ClientID %>").css("color", "red");
        $("#<%= btn.ClientID %>").click(function () {
            $("#<%= div1.ClientID %>").fadeOut("slow");
            return false; // to stop postback
        });
 }); 
```

# java - 找不到 Spring WebApplicationInitializer

> ID：13626310
> 
> 赞同：0
> 
> 时间：2012-11-29T12:54:28.923
> 
> 标签：java, spring

我正在开发运行良好的 Spring WS，看起来我搞砸了，因为现在我得到的只是控制台的 HTTP 404 错误：

```
INFO: No Spring WebApplicationInitializer types detected on classpath
lis 29, 2012 1:49:09 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Error configuring application listener of class com.sun.faces.config.ConfigureListener
java.lang.ClassNotFoundException: com.sun.faces.config.ConfigureListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:532)
    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:514)
    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:133)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4727)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

有人知道可能出了什么问题吗？或者我应该从哪里开始检查？因为我几乎看了每一个 xml，看起来还不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:38:32.673

如果我是你，我会将你的 Java EE 依赖项缩小到 JPA——你不需要整个 javaee-api.jar。我希望您的 JPA 提供程序能够传递地为您引入该依赖项（例如，Hibernate 会，或者我上次使用它时会这样做）。这样 Tomcat 自己的库和您的应用程序中的库之间就不会发生冲突。

# android - 如何在gridview中实现图像的延迟加载

> ID：13626313
> 
> 赞同：1
> 
> 时间：2012-11-29T12:54:42.057
> 
> 标签：android

我想使用延迟加载在网格视图中加载图像。我试图通过使用 AsyncTask 来实现这一点，打赌它会引发并发的未来任务错误。我正在使用 URL 从服务器加载图像，所以请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T13:03:50.407

使用这个库`https://github.com/nostra13/Android-Universal-Image-Loader`每种风格都有加载...列表，网格等

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T12:59:09.453

一个简单的例子，展示了 android 的延迟加载 gridview。

[https://github.com/desertjim/LazyLoadingGridView](https://github.com/desertjim/LazyLoadingGridView)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:08:09.290

您可以使用[智能图像视图](http://loopj.com/android-smart-image-view/)在后台从 HTTP url 下载图像。它是开源的，其源代码可在[此链接](https://github.com/loopj/android-smart-image-view)中获得。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T13:08:32.770

这是您可以找到的处理图像的最佳链接：[http ://android-developers.blogspot.fr/2010/07/multithreading-for-performance.html](http://android-developers.blogspot.fr/2010/07/multithreading-for-performance.html)

该代码专用于 ListViews，但也适用于 GridView。这很复杂，但性能令人惊叹。

# mysql - 同一个 MySQL 表中的重复记录具有重复的 key 条目

> ID：13626316
> 
> 赞同：0
> 
> 时间：2012-11-29T12:54:48.273
> 
> 标签：mysql, sql, insert

有没有办法使用`INSERT`类似于以下的 MySQL：

`INSERT INTO doc_details SELECT * FROM doc_details WHERE dd_id = 1`

这不起作用，因为主键被重复，并且它可能会变得非常冗长，扩展列。

这样做的目的是复制同一个表中的行，这些行稍后将被修改，检索`last_insert_id`新记录。因此，其他方法的想法也会受到赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:09:37.393

只需命名要复制的列并省略主键：

```
INSERT INTO doc_details (col1, col2, col3)
SELECT col1, col2, col3 
FROM doc_details 
WHERE dd_id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:08:31.777

我建议您`ID`使用 AUTO_INCREMENT 选项创建字段，然后在插入时使用 NULL 值 -

```
INSERT INTO doc_details(id, column1, column2)
  SELECT NULL, column1, column2 FROM doc_details WHERE dd_id = 1; 
```

在这种情况下，旧的`ID`将被新的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:19:05.847

您可以依赖临时表从旧记录中复制并省略关键字段值。
您必须至少使用一个命名列，即关键字段名称，以省略其重复值。

请参见以下示例：

```
CREATE TEMPORARY TABLE tmp SELECT * from doc_details WHERE dd_id = ?;
ALTER TABLE tmp drop pk_field_name_here; -- drop the key field for not repeating

INSERT INTO doc_details SELECT 0, tmp.* FROM tmp;
DROP TABLE tmp; 
```

您可以观察到没有使用其他字段名称，而是使用关键字段名称来省略它的值。

您还可以参考我对类似帖子的回答：[***Mysql: Copy row but with new id***](https://stackoverflow.com/a/11331672/767881)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T11:14:07.963

感谢您的回答。非常感谢。因为大多数答案都指定了该列，这导致了一些额外的研究，即“不能在`INSERT`语句中使用通配符”。[选择、修改和插入到同一个表中](https://stackoverflow.com/questions/9879830/select-modify-and-insert-into-the-same-table)

我设法在我的应用程序中解决了这个问题，`SELECT`然后`INSERT`使用 Perl`map`函数扩展列：

`SELECT * FROM doc_details WHERE dd_id = 1`

然后在 Perl 中，将行作为 $data 中的哈希引用：

`$data->{'dd_id'} = 0;
$columns = join(',', map {$_ .'='. $dbh->quote( $data->{$_} ) } keys %{$cdh} );`

这个技巧很好 - 只要保留 auto_increment 列，它就会复制行，而不管列结构/顺序的变化。

我知道这不是一个纯粹的 SQL 解决方案——尽管 Ravinder 提供了一个。

谢谢大家！

# visual-studio-2010 - VisualStudio 2010 无法加载类图“引发了‘System.Exception’类型的异常。”

> ID：13626322
> 
> 赞同：3
> 
> 时间：2012-11-29T12:55:02.933
> 
> 标签：visual-studio-2010, class-diagram

在具有许多项目的 VisualStudio 2010 解决方案中，其中一个项目包含一些类图。当我尝试打开它们时，我收到错误消息`Cannot load '<class diagram file>': Exception of type 'System.Exception' was thrown.`

除了谷歌搜索（我只找到了一些不同问题的解决方案）我尝试了以下事情：

*   删除了一些和所有类图内容：得到了同样的错误
*   在项目中添加了一个新的类图：得到了同样的错误
*   创建了一个新的解决方案和项目，并添加了一个新的类图：它工作！
*   创建了一个新的解决方案并使用类图添加了现有项目：它工作！
*   删除了 SUO 和 SDF 文件：得到了同样的错误

知道如何解决我的解决方案吗？创建一个新的解决方案是可能的，但很乏味，我可能会再次遇到同样的问题。因为该解决方案受版权保护且数量庞大，我无法提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T18:41:35.267

### 跟着这些步骤：

*   转到项目»属性。
*   单击框架和参考。
*   删除所有引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T18:37:02.427

在项目的属性中删除框架和引用分支下的引用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-21T01:19:02.097

在项目属性的框架和引用下，删除指向不存在的库的所有引用。（标有红色 X）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-04T18:31:38.633

这可能是由无效的引用引起的。

1.  项目 > 属性
2.  通用属性 > 框架和参考
3.  找到您的无效参考；它们在 GUI 中用红线标记，可能会导致生成警告，如“引用的项目 '......\foo.vcxproj' 不存在”。 [![删除无效参考](../Images/19bfed43d67c9efb1800dc22741a7157.png)](https://i.stack.imgur.com/slTUa.png)
4.  类图现在加载没有错误

其他答案建议删除*所有*引用，但您可能只需要删除无效的引用。

# ember.js - 获取对给定模型对象创建的 EmberJS 视图的引用？

> ID：13626325
> 
> 赞同：4
> 
> 时间：2012-11-29T12:55:09.313
> 
> 标签：ember.js

假设我有一个对象列表，`DefinedWord`每个对象都作为页面底部的 div`{{#each}}`列表呈现在一个块中。`DefinedWordView`

当用户单击一个单词时，我会查找相关的`DefinedWord`. 现在我想要一个为此`DefinedWordView`渲染的参考`DefinedWord`，所以我可以's div.`ScrollTo()``DefinedWordView`

我总是可以让视图在加载时为每个模型对象添加一个反向引用，但这看起来有点难看。没什么大不了的，但我认为我需要为许多其他操作执行此操作，而且我宁愿不要在我的模型对象中乱扔对视图的反向引用。

任何人有一个`ember-y`成语来处理这个建议？也许`EmberJS`需要一个标准的**“单一视图注册表”之**类的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:24:47.770

让你的模型使用`Em.Evented`mixin：

```
App.Word = Em.Object.extend(Em.Evented, {
  // ...
}); 
```

当你的模型被点击时，触发一个事件，我们称之为`selected`。

```
App.WordView = Em.View.extend({
  click: function () {
    // content == the model
    this.get('content').trigger('selected');
  }
}) 
```

模型的视图可以绑定到该事件，当它被触发时，滚动到它自己：

```
// just pseudo code:
App.DefinedWordView = Em.View.extend({
  init: function () {
    this._super();

    //listen for the 'selected' event and call 'scrollToDefinition' on 'this'
    this.get('content').on('selected', this, 'scrollToDefinition');
  },

  scrollToDefinition: function () {
    $(document).scrollTo( this.$() );
  }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T22:37:43.880

[https://stackoverflow.com/a/13638139/294247](https://stackoverflow.com/a/13638139/294247)很棒，但使用属性来发出信号似乎不合适。我意识到我应该使用从对象调度的事件，并让视图做出适当的反应。

使用 Ember.Evented 混合：

```
App.DefinedWord = Ember.Object.extend(Ember.Evented, {
    // ...
    scrollToDefinition: function () {
        this.trigger('scrollToDefinition');
    }
});

App.DefinedWordView = Ember.View.extend({
    init: function () {
        this._super();
        this.get('content').on('scrollToDefinition', this, 'scrollToDefinition');
    },
    scrollToDefinition: function () {
        $(document).scrollTo(this.$());
    }
}); 
```

# visual-studio - 如何将 SVN 添加到 Visual Studio 2012？

> ID：13626326
> 
> 赞同：7
> 
> 时间：2012-11-29T12:55:10.600
> 
> 标签：visual-studio, svn, visual-studio-2012, visualsvn

我之前使用的是 Visual Studio 2010，使用 Visual SVN 作为源代码控制。现在我已经升级到 Visual Studio 2012，我面临着将 SVN 添加为源代码控制（到 VS 2012）的问题。默认情况下，只有 Team Foundation 存在。任何有关如何将 SVN 作为源代码控制添加到 Visual Studio 2012 的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T12:58:56.713

VisualSVN 3.0 支持 Visual Studio 2012。您可以在[**下载页面**](http://www.visualsvn.com/visualsvn/download/)获取。

除了 VS2012 支持以及一些可用性和 UI 改进之外，VisualSVN 3.0 引入了新的社区许可证，允许在非域机器上免费使用 VisualSVN（而且它允许商业用途！）。请参阅[VisualSVN 3.0 发行说明](http://www.visualsvn.com/visualsvn/changes/3.0/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-06T19:32:41.560

再次运行 Visual SVN 安装程序并选择“修改”勾选“集成 Visual Studio 2012”框

然后继续安装。重新启动 VS 2012，您将在 TOP 菜​​单上看到 VISUAL SVN

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-27T07:41:20.553

在 VS2012 中，只需转到 Tools/Options/Source control 并在下拉“Current source control plugin”中选择所需的一个（如果您已经安装了它）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T12:52:19.127

很可能您使用的是不支持 VS2012 的旧版 VisualSVN。尝试安装最新的 VisualSVN 3.0 以获得 Visual Studio 2012 支持。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T12:57:00.633

我们将 AnkhSVN 用于 VS2012 及更低版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-04T18:26:21.370

目前我正在使用 VisualSVN-5.1.4，但我已经用以前的版本做到了这一点。

1.  重新运行安装程序。
2.  选择“修改”，然后选择下一步以移动到“自定义设置”窗格。
3.  将出现已安装的 Visual Studio (VS) 版本的复选框列表。
4.  检查适用的 VS('s)。
5.  打开目标VS。
6.  打开“工具>选项”对话框并选择源代码管理
7.  从“当前源代码控制插件”组合框中选择“VisualSVN”。

我首先选择了“修复”选项，但这并没有将 VisualSVN 放在源代码管理选项列表中。它没有伤害，但也没有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-06T14:21:32.633

你需要再次运行 subversion 的安装程序并修复安装。安装程序也会在 VS2012 版本中注册应用程序。

我们遇到了同样的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-02T14:08:07.627

您真正需要做的是转到工具-> 选项

在对话框中向下滚动到 Source Control -> plug-in-selections。

有一个包含源控件列表的下拉列表，您可以在那里选择您的 SVN 控制器（Ankh、Visual，无论您想要什么）。

这与 2012 年、2013 年和 2015 年相同

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-10-27T17:27:24.543

重新运行安装程序，并在安装过程中选择您希望可用的 Visual Studio 版本。

# sql - 如何创建从另一列计算的列？

> ID：13626331
> 
> 赞同：5
> 
> 时间：2012-11-29T12:55:18.460
> 
> 标签：sql, sql-server-2008

我需要`age`在 SQL Server 数据库中创建一个列。

此列的值应根据该列的值计算`DOB`。

它的值也应该随着增加而`Age`增加。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T13:05:19.320

您应该使用计算列来解决此问题。定义与此类似的东西：

```
ALTER TABLE Customers ADD Age AS datediff(year, DOB ,getdate()) 
```

原始声明取自[BlackWasp](http://www.blackwasp.co.uk/SQLComputedColumns.aspx)并提供更多信息。

编辑：

MSDN 将计算列解释为：

> 计算列是根据可以使用同一表中其他列的表达式计算得出的。表达式可以是非计算的列名、常量、函数以及这些由一个或多个运算符连接的任意组合。表达式不能是子查询。
> 
> 除非另有说明，否则计算列是虚拟列，未物理存储在表中。每次在查询中引用它们时，都会重新计算它们的值。数据库引擎在 CREATE TABLE 和 ALTER TABLE 语句中使用 PERSISTED 关键字将计算列物理存储在表中。当作为其计算一部分的任何列发生更改时，它们的值会更新。通过将计算列标记为 PERSISTED，您可以在计算列上创建确定性但不精确的索引。此外，如果计算列引用 CLR 函数，则数据库引擎无法验证该函数是否真正具有确定性。在这种情况下，计算列必须是 PERSISTED 以便可以在其上创建索引。有关更多信息，请参阅在计算列上创建索引。
> 
> 计算列可用于选择列表、WHERE 子句、ORDER BY 子句或可以使用正则表达式的任何其他位置，但以下情况除外：
> 
> 用作 CHECK、FOREIGN KEY 或 NOT NULL 约束的计算列必须标记为 PERSISTED。如果计算列值由确定性表达式定义并且结果的数据类型在索引列中是允许的，则计算列可以用作索引中的键列或任何 PRIMARY KEY 或 UNIQUE 约束的一部分。
> 
> 例如，如果表具有整数列 a 和 b，则计算列 a + b 可以被索引，但计算列 a + DATEPART(dd, GETDATE()) 不能被索引，因为值可能会在后续调用中更改 >。
> 
> 计算列不能是 INSERT 或 UPDATE 语句的目标。
> 
> 数据库引擎根据使用的表达式自动确定计算列的可空性。即使只有不可为空的列存在，大多数表达式的结果也被认为是可空的，因为可能的下溢或溢出也会产生空结果。使用具有 AllowsNull 属性的 COLUMNPROPERTY 函数来调查表中任何计算列的可空性。可以通过指定 ISNULL(check_expression, constant) 将可空表达式转换为不可空表达式，其中常量是替换任何空结果的非空值。

资料来源：[MSDN - 计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-05T13:30:27.880

代码片段

```
ALTER TABLE
    TheTable
ADD
    DOB AS
    CASE
        WHEN
                MONTH(Birth) > MONTH(ISNULL(Death, SYSDATETIME()))
            OR  (
                        MONTH(Birth) = MONTH(ISNULL(Death, SYSDATETIME()))
                    AND DAY(Birth) >= DAY(ISNULL(Death, SYSDATETIME()))
                )
        THEN
            DATEDIFF(YEAR, Birth, ISNULL(Death, SYSDATETIME())) - 1
        ELSE
            DATEDIFF(YEAR, Birth, ISNULL(Death, SYSDATETIME()))
    END 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-07T04:58:35.137

使用自动生成的列创建表，

```
CREATE TABLE Person2
(Id int IDENTITY(1,1) NOT NULL, Name nvarchar(50),
DOB date, Age AS DATEDIFF(YEAR, DOB ,GETDATE()) ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T13:34:48.110

这是获取年龄的正确方法：

```
alter table <yourtable> add age as datediff(year, DOB, getdate())- case when month(DOB)*32 + day(DOB) > month(getdate()) * 32 + day(getdate()) then 1 else 0 end 
```

# spring - Spring Webflow 2 和可收藏的 URL

> ID：13626336
> 
> 赞同：1
> 
> 时间：2012-11-29T12:55:42.453
> 
> 标签：spring, seo, friendly-url, deep-linking, spring-webflow-2

目前由于 Post/Redirect/Get 模式，所有流 url 都类似于`<site_url>/flow_name?execution=?`，并且不保留输入 GET 参数。因此，用户无法复制 url 或将其添加为书签。

有什么建议可以巧妙地完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T12:11:38.490

我们可以通过自定义SWF API的**FlowHandlerAdapter来为基于 SWF 的应用程序的 URL 添加书签。**

这是一个示例：

我的 SWF 配置文件将具有：

```
<bean id="flowController" class="org.springframework.webflow.mvc.servlet.FlowController">
      <property name="flowHandlerAdapter" ref="customFlowHandlerAdapter" /> 
     </bean>

     <bean id="customFlowHandlerAdapter" class="com.xyz.CustomFlowHandlerAdapter">
        <property name="flowExecutor" ref="flowExecutor" /> 
        <property name="flowUrlHandler" >
            <bean class="com.xyz.CustomURLFlowHandler" /> 
        </property>
     </bean> 
```

我的 CustomFlowHandlerAdapter 将有：

```
public class CustomFlowHandlerAdapter extends FlowHandlerAdapter {

...

@Override
    public ModelAndView handle(HttpServletRequest request,
            HttpServletResponse response, Object handler) throws Exception {
        FlowHandler flowHandler = (FlowHandler) handler;
        checkAndPrepare(request, response, false);
        String flowExecutionKey = this.getFlowUrlHandler()
                .getFlowExecutionKey(request);
        if (flowExecutionKey != null)
            try {
                ServletExternalContext context = createServletExternalContext(
                        request, response);
                FlowExecutionResult result = this.getFlowExecutor().resumeExecution(
                        flowExecutionKey, context);
                handleFlowExecutionResult(result, context, request, response,
                        flowHandler);
            } catch(org.springframework.webflow.execution.repository.NoSuchFlowExecutionException ex){
                response.sendRedirect(request.getRequestURI());
            } catch(org.springframework.webflow.execution.repository.BadlyFormattedFlowExecutionKeyException ex){
                response.sendRedirect(request.getRequestURI());
            } catch (FlowException e) {
                handleFlowException(e, request, response, flowHandler);
            }
.... 
```

在这里，我正在捕获 NoSuchFlowExecutionException 并在没有任何参数的情况下重定向到确切的流 URL。在这里您可以捕获并重新包含您的参数

因此，我可以从任何状态为我的 URL 添加书签（总是从第一个开始），如果需要，我也可以发送我自己的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:00:05.023

您始终可以使用指向您的流程起点之一的链接并为其添加书签。
例如，您可以`<site_url>/flow_name?personId=123&projectId=456`假设您的流程有两个输入，`personId`并且`projectId`. 但是您**需要**知道网址（您必须将其提供给用户），您不能使用地址栏上的网址。

即使您想这样做，您也无法使用指向流中特定状态的链接并为其添加书签（除非您在流的开头添加一些逻辑以根据值将您引导到特定事件的输入）。

# tableview - JavaFX 2.0 日程表组件

> ID：13626339
> 
> 赞同：0
> 
> 时间：2012-11-29T12:55:50.577
> 
> 标签：tableview, javafx-2

我现在正在做一个学校项目，你知道如何在 JavaFX 2 中实现这种表吗？

提前致谢。

![预约表](../Images/0a4c5c05c8baa8d7adb8bced4810e009.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T11:34:38.437

看看 JFXtras 的议程控制

[http://jfxtras.org/](http://jfxtras.org/)

# mysql - Pentaho 数据集成 - MySQL 数据库与 SSH 连接

> ID：13626340
> 
> 赞同：4
> 
> 时间：2012-11-29T12:55:51.883
> 
> 标签：mysql, jdbc, pentaho

我正在尝试使用 Pentaho 数据集成（JDBC 驱动程序）连接到远程 MySQL 数据库。因此我需要建立一个 SSH 连接。

是否可以在工具内部/使用工具执行此操作？

**猜猜我解决了它：**

我只需要建立一个 SSH 端口转发：

```
ssh -L 3306:localhost:3306 remote.url 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T23:47:45.133

据我所知，在 PDI 中没有办法做到这一点。但你不会真的想要。我会采取配置您的 MySQL 客户端以使用加密连接的方法，然后将您的 JDBC 驱动程序连接到该连接。

对不起，我不做 MySQL，所以我不知道该怎么做。

布赖恩

# python - 如何在 WINDOWS XP 上为 Python 2.6 安装 Rpy2

> ID：13626355
> 
> 赞同：0
> 
> 时间：2012-11-29T12:56:33.083
> 
> 标签：python, windows, rpy2

我下载了 rpy2-2.2.3 ，并尝试：`python setup.py install`在我的 windows xp 计算机上使用 R: 2.12.2 ， Python: 2.6.1 ，复制一些文件后，它显示以下错误消息。怎么修 ？

```
Traceback (most recent call last):
  File "setup.py", line 441, in <module>
    [os.path.join('doc', 'source', 'rpy2_logo.png')])],
  File "D:\Python\lib\distutils\core.py", line 152, in setup
    dist.run_commands()
  File "D:\Python\lib\distutils\dist.py", line 975, in run_commands
    self.run_command(cmd)
  File "D:\Python\lib\distutils\dist.py", line 995, in run_command
    cmd_obj.run()
  File "D:\Python\lib\distutils\command\install.py", line 577, in run
    self.run_command('build')
  File "D:\Python\lib\distutils\cmd.py", line 333, in run_command
    self.distribution.run_command(command)
  File "D:\Python\lib\distutils\dist.py", line 995, in run_command
    cmd_obj.run()
  File "D:\Python\lib\distutils\command\build.py", line 134, in run
    self.run_command(cmd_name)
  File "D:\Python\lib\distutils\cmd.py", line 333, in run_command
    self.distribution.run_command(command)
  File "D:\Python\lib\distutils\dist.py", line 994, in run_command
    cmd_obj.ensure_finalized()
  File "D:\Python\lib\distutils\cmd.py", line 117, in ensure_finalized
    self.finalize_options()
  File "setup.py", line 144, in finalize_options
    rversion = get_rversion(r_home)
  File "setup.py", line 186, in get_rversion
    rversion = m.groups()[0]
AttributeError: 'NoneType' object has no attribute 'groups' 
```

R：2.12.2，Python：2.6.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:13:43.600

1.  最新的是 rpy2-2.2.7。
2.  rpy2-2.3.0beta 其实是最新的
3.  没有对 Win32（或 Win64）的官方支持，但它可能使用最新的 rpy2 构建

# scala - “scala”命令终止批处理脚本

> ID：13626364
> 
> 赞同：1
> 
> 时间：2012-11-29T12:57:16.153
> 
> 标签：scala, scripting, command, prompt, terminate

在我在这里工作期间，我遇到了一个有点奇怪的问题。可能对这种行为有一个非常简单的解释，但对我来说这没有多大意义。

情况如下：

我写了一个批处理文件“test.bat”，现在看起来像这样：

```
echo 1
scala myProgram
echo 2 
```

当我在相应目录中打开命令提示符并运行 test.bat 时，它首先回显 1，然后运行 ​​myProgram（它也有某些输出出现在控制台中，因此 scala 程序 myProgram 可以正常工作） - 然后停止。2*没有*出现在控制台中，控制台等待我输入另一个命令。

为什么会有这种行为？是控制台故障吗？还是 scala 命令的？或者根本不是故障，它实际上是为了表现得那样？

我实际上想要做的是将“scala myProgram”的输出重定向到一个文件（效果很好）并在scala程序终止后重命名这个文件，所以我的批处理文件最初看起来有点像这样：

```
scala myProgram > log.txt 2>&1
ren "log.txt" "log2.txt" 
```

我对从未创建过“log2.txt”这一事实感到困惑。

非常感谢您的回答，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:00:40.547

添加`-nc`到 scala 命令对我有用：

```
 $ scala -nc /tmp/2.scala
    Hello world 
```

所以我想，这个问题与编译守护进程有关

```
 -nc          no compilation daemon: do not use the fsc offline compiler 
```

你能试试吗？

# smooks - 在 Smooks 中使用编程配置的 MVEL 表达式

> ID：13626369
> 
> 赞同：0
> 
> 时间：2012-11-29T12:57:30.717
> 
> 标签：smooks

我使用编程配置进行了简单的 java 到 java 转换，效果很好。现在我需要用以下用例来扩展它，实际上它们都依赖于 MVEL 表达式。我找到了 Xml 配置的示例，因此解决方案可能如下所示：

```
 <jb:expression property="underlying" execOnElement="__und">
        mapper.lookup(__some/_field)
   </jb:expression> 
```

但是如何通过**编程配置**（即使用[Bean](http://www.milyn.org/javadoc/v1.5/smooks-cartridges/javabean/org/milyn/javabean/Bean.html)）来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:28:50.377

以下为我工作（Smooks 1.5）：

```
.bindTo("underlying", rmp.newBean(String.class, "__und",
    new MVELFactory<String>("mapping.lookup(__some/_field)"))) 
```

# svg - svg元素层/重叠/叠加/叠加

> ID：13626372
> 
> 赞同：1
> 
> 时间：2012-11-29T12:57:42.037
> 
> 标签：svg, overlay, d3.js, layer, overlap

为了使它们可热插拔/可拖动/可缩放，我一直在玩 Mike Bostock 的 d3[三个小圆圈](http://mbostock.github.com/d3/tutorial/circle.html)示例。

在执行此操作时，我偶然发现了一个问题（使用 Firefox 16.0.2，顺便说一句 - 通常适用于 svg），虽然它本身并不严重，但不知何故困扰了我：即虽然总是出现在生成的 HTML 中，但任何试图**覆盖带有****按钮**元素的矩形查看区域失败。

[我已经尝试遵循本次](https://github.com/mbostock/d3/issues/252)交流中的每条建议，但这些都没有影响。

这是我的基本代码，其中按钮显示在包含 svg 视图区域的圆圈**之外。**分组是拖放/可扩展性实验准备工作的一部分：

```
var root = d3.selectAll("g#tool-2");

var g0 = root
.append("g")
.attr("class", "g0")
.attr("id", function (d, i) { return d.tool});

var g01 = g0
.append("g")
.attr("class", "g01")
.attr("id", function (d, i) { return d.tool});

var g02 = g0
.insert("g")
.attr("class", "g02")
.attr("id", function (d, i) { return d.tool});

var svg = g01
.insert("svg")
.attr("width", width)
.attr("height", height);

var button = g02
.append("div")
.attr("class", "button")
.attr("id", function (d, i) { return d.tool}) 
.append("button")
.text(function(d) { return "Run" });

svg.selectAll(".little")
.data(data)
.enter()
.append("circle")
.attr("class", "little")
.attr("cx", x)
.attr("cy", y)
.attr("r", 12);

console.log("Got past circle creation");

button
.on("click", function() {

    svg.selectAll(".select").remove();

    svg.selectAll(".select")
    .data(data)
    .enter()
    .append("circle")
    .attr("class", "select")
    .attr("cx", x)
    .attr("cy", y)
    .attr("r", 60)
    .style("fill", "none")
    .style("stroke", "red")
    .style("stroke-opacity", 1e-6)
    .style("stroke-width", 3)
    .transition()
    .duration(750)
    .attr("r", 12)
    .style("stroke-opacity", 1);
}); 
```

附加到根、g0、g01 或 g02 中的**任何一个，按钮显示在矩形容器的外部。**一切都很好。例如，上面显示的代码生成的 html：

```
<g id="tool-2" class="g0">
    <g id="tool-2" class="g01">
        <svg height="180" width="360">
            <circle r="12" cy="45" cx="180" class="little"></circle>
            <circle r="12" cy="90" cx="60" class="little"></circle>
            <circle r="12" cy="135" cx="300" class="little"></circle>
            <circle style="fill: none; stroke: red; stroke-opacity: 1; stroke-width: 3;" r="12" cy="45" cx="180" class="select"></circle>
            <circle style="fill: none; stroke: red; stroke-opacity: 1; stroke-width: 3;" r="12" cy="90" cx="60" class="select"></circle>
            <circle style="fill: none; stroke: red; stroke-opacity: 1; stroke-width: 3;" r="12" cy="135" cx="300" class="select"></circle>
        </svg>
    </g>
    <g id="tool-2" class="g02">
        <div id="tool-2" class="button">
            <button>Run</button>
        </div>
    </g>
</g> 
```

然而，无论使用什么附加元素，是否使用

*   z-index
*   x & y 坐标
*   dx & dy 坐标
*   有或没有身份证
*   有或没有类
*   有或没有定位

..该按钮虽然**存在于生成的 html 中**，但要么继续显示在容器外，要么根本不显示。

svg 覆盖似乎存在我真的不熟悉的问题。有什么提示吗？

谢谢暴徒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:16:36.547

据我所知，您正在将 HTML 元素混合到 SVG 中。那是无效的。您可以将 HTML 元素包装在一个[`<foreignObject>`元素](http://www.w3.org/TR/SVG/extend.html#ForeignObjectElement)中，看看您是否更幸运。

您必须确保为外来内容添加了正确的命名空间。这是一个完整的工作示例（[尝试使用 jsfiddle](http://jsfiddle.net/Mzak8/)）：

```
<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
    <g class="g0">
        <g class="g01">
            <svg height="180" width="360">
                <circle r="12" cy="45" cx="180" class="little"></circle>
                <circle r="12" cy="90" cx="60" class="little"></circle>
                <circle r="12" cy="135" cx="300" class="little"></circle>
                <circle style="fill: none; stroke: red; stroke-opacity: 1; stroke-width: 3;" r="12" cy="45" cx="180" class="select"></circle>
                <circle style="fill: none; stroke: red; stroke-opacity: 1; stroke-width: 3;" r="12" cy="90" cx="60" class="select"></circle>
                <circle style="fill: none; stroke: red; stroke-opacity: 1; stroke-width: 3;" r="12" cy="135" cx="300" class="select"></circle>
            </svg>
        </g>
        <g class="g02">
            <foreignObject width="100" height="50">
                <div class="button" xmlns="http://www.w3.org/1999/xhtml">
                    <button>Run</button>
                </div>
            </foreignObject>
        </g>
    </g>
</svg> 
```

# silverlight - 镶边 Silverlight 表

> ID：13626373
> 
> 赞同：0
> 
> 时间：2012-11-29T12:57:43.313
> 
> 标签：silverlight

我使用这种技术在 Silverlight 中创建了一个带边框的表格：

[如何在 Silverlight 中创建带边框的表格？](https://stackoverflow.com/questions/2794538/silverlight-how-to-create-a-bordered-table?answertab=active#tab-top)

工作正常，除了网格的外边界是所有其他内单元格边界厚度的一半，这看起来很糟糕。如何让我的“表格”的所有边框都相同，包括整个网格的外边框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:15:56.757

```
<Border Style="{StaticResource borderStyle}" BorderThickness={Binding BorderThickness, RelativeSource={RelativeSource AncestorType=DataGrid}}>
    <!-- Cell content here -->
</Border> 
```

# php - 如何从 Triptracker android 应用程序接收 php 中的 JSON 数据？

> ID：13626379
> 
> 赞同：0
> 
> 时间：2012-11-29T12:58:05.543
> 
> 标签：php, android, json, gps, location

该应用程序将 gps 位置发送到用户设置的 php 服务器。我有一个 PHP MySQL 模型服务器。我不知道如何接收从应用程序发送到我服务器数据库的 JSON。任何帮助，将不胜感激。提前致谢。代码位于[https://github.com/jcs/triptracker/blob/master/src/org/jcs/triptracker/TrackerService.java](https://github.com/jcs/triptracker/blob/master/src/org/jcs/triptracker/TrackerService.java)

POST 参数是一个位置数组，每个元素都是一个哈希值，包括时间（来自位置服务的 Unix 时间戳）、纬度和经度（任意精度的两个浮点值）以及以米/秒为单位的速度。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-29T11:18:26.733

我花了一些时间来解码格式，但以下代码段正在从应用程序中提取数据。请注意，trip tracker 可能会提交一系列以前无法传输的位置点。

```
<?php
$locations  = $_REQUEST['locations'];   // Get all POST arrays

i = 0;                                  // Choose first locations array

// Now you can access single fields with:
time      = $locations[i]['time']; 
latitude  = $locations[i]['latitude'];
longitude = $locations[i]['longitude'];
speed     = $locations[i]['speed'];

?> 
```

请注意，“时间”是自纪元以来的 MILLIseconds，对于 unix 时间戳，我们需要除以 1000 为浮点数以允许转换。同样，可以有超过 1 个可用的位置数组，通过在循环中向上计数 i 来访问其他数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:02:16.360

您可以使用 json_decode() 从收到的 json 中创建一个对象。

一个例子是：

```
$data = json_decode($_POST['yourdata']); 
```

假设 JSON 看起来像这样：

```
{"foo":"bar"} 
```

您现在可以执行以下操作：

```
echo $data->foo; 
```

在您的 mysql 查询中使用此数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:04:24.230

您可以像这样在 php 中获取变量：

```
$lat = $_REQUEST['lat'];
$lng = $_REQUEST['lng']; 
```

然后你可以在你的数据库中插入 $lat 和 $lng。

例子：

```
function launchQuery($call)
{
    $link = mysqli_init();
    if (!$link) {
        die('mysqli_init failed');
    }

    if (!mysqli_options($link, MYSQLI_INIT_COMMAND, 'SET AUTOCOMMIT = 1')) {
        die('Setting MYSQLI_INIT_COMMAND failed');
    }

    if (!mysqli_options($link, MYSQLI_OPT_CONNECT_TIMEOUT, 5)) {
        die('Setting MYSQLI_OPT_CONNECT_TIMEOUT failed');
    }

    if (!mysqli_real_connect($link, $dbhost, $dbuser, $dbpassword, $dbname, $dbport)) {
        die('Connect Error (' . mysqli_connect_errno() . ') '  . mysqli_connect_error());
    }       

    mysqli_query($link,"SET NAMES 'utf8'");
    $rs = mysqli_query($link, $call);

    mysqli_close($link);

    return $rs;
} 

launchQuery("insert into whatever_your_table_name_is (latitude, longitude) values (".$lat.",".$lng.");"); 
```

# objective-c - Objective C NSURLConnection 没有得到响应数据

> ID：13626384
> 
> 赞同：1
> 
> 时间：2012-11-29T12:58:39.373
> 
> 标签：objective-c, xcode, nsurlconnection

我正在创建这个应用程序，它与我的网络服务器上的 PHP 脚本通信。

昨晚它工作得很好。但是今天有两个连接没有得到响应。

我已经在浏览器中尝试了 NSURL 链接，它工作正常。还有一个连接工作，但正如我所说的两个连接不起作用？

```
- (void) getVitsTitelByID:(int)id {

NSString *url = [NSString stringWithFormat:@"http://webserver.com   /ivitserdk.php?function=gettitelbyid&id=%d", id];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:1.0];
connectionTitelByID = [[NSURLConnection alloc] initWithRequest:request delegate:self];
} 
```

connectionDidReciveData：

```
if(connection == connectionTitelByID){
    responseTitel = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
} 
```

连接完成加载：

```
if(connection == connectionTitelByID){
    titelLabel.text = responseTitel;
} 
```

我已经尝试并调试它。

responseTitel 似乎是（空）。

帮助将是apriceated :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:21:29.673

didReceiveData 可能会被调用 N (**几次**) 次。将数据保存到可变数据缓冲区（排队）并在 didFinish 中将其读入字符串

模拟代码：

```
- (void) getVitsTitelByID:(int)identifier {
    NSString *url = [NSString stringWithFormat:@"http://webserver.com/ivitserdk.php?function=gettitelbyid&id=%d", identifier];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url] cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:1.0];
    connectionTitelByID = [[NSURLConnection alloc] initWithRequest:request delegate:self];

    dataForConnectionTitelByID = [NSMutableData data];
    [connectionTitelByID start];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    if(!data.length) return;

    if(connection == connectionTitelByID)
        [dataForConnectionTitelByID appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    if(connection == connectionTitelByID) {
        id str = [[NSString alloc] initWithData:dataForConnectionTitelByID encoding:NSUTF8StringEncoding];
        NSLog(@"%@",str);
        dataForConnectionTitelByID = nil;
        connectionTitelByID = nil;
    }
} 
```

# asp.net-web-api - Asp.Net Web Api - 更改参数名称

> ID：13626388
> 
> 赞同：2
> 
> 时间：2012-11-29T12:59:08.480
> 
> 标签：asp.net-web-api

在我的团队中，我们的编码规则要求每个函数的参数都以前缀开头，例如 *p_someParam*。

对于 Web Api，如果我们想要请求一个带有两个参数的 GET 函数，我们应该添加这些参数，例如“...？p_firstParam=value1&p_secondParam=value2”。

是否有某种方法可以在请求中使用更用户友好的名称，例如不带前缀的*someParam*，它会自动映射到控制器操作中的参数？也许有一些属性可以重命名动作参数？我找不到任何类似的例子。

每一条线索都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:03:30.860

我认为您正在寻找 URL 重写，因为您需要将 url 映射到配置或编程

[http://www.codeproject.com/Articles/2538/URL-Rewriting-with-ASP-NET](http://www.codeproject.com/Articles/2538/URL-Rewriting-with-ASP-NET)不错的文章，它在 ASP.Net 中，

# javascript - AngularJS - 创建动态控制器

> ID：13626394
> 
> 赞同：2
> 
> 时间：2012-11-29T12:59:37.493
> 
> 标签：javascript, angularjs

我有一些使用 jQuery 构建的应用程序，现在我想使用 angularjs 对我的应用程序做一些魔术。

我当前的应用在做什么？第一个。- 它使用 jquery 创建一些 DOM 元素：

```
<html>
    <body>
        <div id="wrapper"></div> 
        <script>
            for(var i = 0; i < 20; i++) {
                var $elem = $('<div>')
                    .attr('id', 'box-' + i)
                    .appendTo('#wrapper');

            } 
        </script>
    </body>
</html> 
```

然后，我进行了一些 AJAX 调用，并基于我知道的返回的 JSON，我想创建一些新的 DOM 元素（通过 jquery 和车把），并将其附加到 $("#elem-2");

```
$.get('something', function(response){
    var elemInstance = new MyElement(response); //function MyElement handles my object creation based on the response.
    var $elem = elemInstance.render(); //return new jQuery Object, like: return $("<div>");
    $elem.appendTo('#wrapper #box-2');
}); 
```

这很好用，但是因为这个动态创建的 $elem 及其“控制器”（ MyElement ）非常复杂并且需要经常重新渲染，所以我很想使用 angular 来控制以这种方式创建的所有元素。

所以，问题是：我可以在角度的OOP中拥有类似类的东西并基于这个类创建新对象吗？我可以在运行时创建角度控制器吗？或者也许ma approch是完全错误的？

# ruby-on-rails - rails，对多个模型使用 devise gem

> ID：13626399
> 
> 赞同：0
> 
> 时间：2012-11-29T12:59:49.683
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我尝试在 web 和 stackoverflow 上搜索，但任何答案都是关于我的问题：S 我有一个网站，现在想在使用该网站的路径下创建新服务。像这样;
我的网站 => www.example.com 我的新服务 => www.example.com/service, www.example.com/service/#######/#####
我有一个用户模型网站并使用设计 gem 进行身份验证。现在我必须创建名称为客户的新用户模型。客户模型和用户模型彼此完全不同。
我如何为新的客户模型实施设计身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:04:03.477

我认为您必须为此使用角色宝石。

您可以使用[https://github.com/ryanb/cancan](https://github.com/ryanb/cancan)或[https://github.com/kristianmandrup/cantango](https://github.com/kristianmandrup/cantango)

对于路由，您可以使用命名空间：

```
namespace :service do
 #routes here
end 
```

此致！

# javascript - 自动播放：当窗口调整大小时，jQuery flowlideshow 为真

> ID：13626400
> 
> 赞同：0
> 
> 时间：2012-11-29T12:59:52.237
> 
> 标签：javascript, jquery

我想：

自动播放：当窗口大小的宽度> 900 时为假，并且，

自动播放：当窗口大小为 width<900 & width>701 并且 , 时为真

自动播放：当窗口大小宽度<701时为假

使用 jQuery flowlideshow 并在调整窗口大小时运行此代码

但不工作。

```
$(window).resize(function () {
var width = $(window).width();
if (width > 900) {
    $(function () {
        $(".slidetabs").tabs(".images > div", {
            // enable "cross-fading" effect
            effect: 'fade',
            fadeOutSpeed: "slow",
            // start from the beginning after the last tab
            rotate: true,
            showMultiple: 5
            // use the slideshow plugin. It accepts its own configuration
        }).slideshow({ **autoplay: false**, clickable: false });
    });
}
else if (width < 900 & width > 701) {
    $(function () {
        $(".slidetabs").tabs(".images > div", {
            // enable "cross-fading" effect
            effect: 'fade',
            fadeOutSpeed: "slow",
            // start from the beginning after the last tab
            rotate: true,
            showMultiple: 5
            // use the slideshow plugin. It accepts its own configuration
        }).slideshow({ **autoplay: true**, clickable: false });
    });
}
else (width < 701)
{
    $(function () {
        $(".slidetabs").tabs(".images > div", {
            // enable "cross-fading" effect
            effect: 'fade',
            fadeOutSpeed: "slow",
            // start from the beginning after the last tab
            rotate: true,
            showMultiple: 5
            // use the slideshow plugin. It accepts its own configuration
        }).slideshow({ **autoplay: false**, clickable: false });
    });
}    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:18:45.223

窗口的 onResize 事件并不总是在页面加载时触发，因此在这种情况下幻灯片不会自动播放。它[似乎在 ie9 中的页面加载时触发](http://forum.jquery.com/topic/window-resize-firing-on-page-load-in-ie9)。

此外，每次调整页面大小时，此代码都会重新创建幻灯片——这也可能不是您想要的。

您可能会更好地在页面加载时绑定幻灯片，然后绑定一个事件以调整大小以暂停/恢复幻灯片行为。像这样：

```
jQuery(function($) {
    // detect window size and init slideshow here
    $(window).on('resize', function () {
        // detect window size and pause or resume the slideshow
    });
}); 
```

在没有看到您正在使用的幻灯片的文档的情况下，我无法为您指明在初始化后如何修改幻灯片的确切方向，但如果您遵循上述原则，这应该是可能的。

（附带说明，要检查调整大小事件是否被正确触发，您可以`console.log($(window).width())`）

如果您需要更多帮助，请考虑发布包含完整示例的[Fiddle](http://jsfiddle.net)，并链接到您正在使用的幻灯片插件的文档。

# c++ - 调用析构函数。和输入输出过载

> ID：13626401
> 
> 赞同：0
> 
> 时间：2012-11-29T12:59:58.553
> 
> 标签：c++

因此，如果我的对象没有通过引用传递，则析构函数会被调用两次。但是当我通过引用传递它时，一切都很好。

```
<!-- language: lang-cpp -->

ostream& operator<<(ostream& os,Counter_naslednik_1 &object){
 cout<<endl<<object.date<<endl;
 return os;
 }

//-----------------
void main(){
Counter_naslednik_1 new_object;
cout<<new_object;
} 
```

为什么析构函数被调用两次？在将对象作为参数传递给重载运算符时，为什么要通过引用传递对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T13:00:45.863

它被调用了两次，因为当你通过值传递时，你实际上是在复制你的对象，所以有两个对象要销毁。

关于您的第二个问题，再次通过引用传递新对象可以避免制作数据的新副本。如果您尚未设计复制构造函数，这将更有效并避免意外行为。

# c# - 将数据从一个控件绑定到另一个

> ID：13626404
> 
> 赞同：2
> 
> 时间：2012-11-29T13:00:13.977
> 
> 标签：c#, silverlight, visual-studio-lightswitch

我将 LightSwitch 2011 与 Visual Studio 2010 一起使用，我知道您可以使用以下代码更改控件的可见性：

```
this.FindControl("Example_Of_Control").IsVisible = False; 
```

但是，我想要的是分配值，如下所示：

```
this.FindControl("Example_Of_Control").Value = "Some text"; 
```

这可能吗，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:32:08.850

*FindControl*方法只返回控件的*代理*。*代理*只有有限数量的可以读/写的属性。

实际上，您根本不应该尝试设置**控件**的值，而应该将值分配给控件**绑定到的****属性**。

 **在 LightSwitch 屏幕中，每个控件都**必须**绑定到一个属性。因此，您可能有一个绑定到实体*Price*属性的*TextBox 。*与其尝试将值设置为*TextBox*的属性，不如将值直接分配给*Price*属性。因为*TextBox***绑定**到*Price*属性，所以控件将显示新分配的值。**

# python - 将焦点设置到特定的 TKinter 条目小部件

> ID：13626406
> 
> 赞同：24
> 
> 时间：2012-11-29T13:00:21.560
> 
> 标签：python, tkinter

我想将程序的焦点设置为特定的`entry`小部件，以便我可以立即开始输入数据 - 我该怎么做？

**我当前的代码**

```
from Tkinter import *
root = Tk()
frame=Frame(root,width=100,heigh=100,bd=11)
frame.pack()
label = Label(frame,text="Enter a digit that you guessed:").pack()
entry= Entry(frame,bd=4)
entry.pack()

button1=Button(root,width=4,height=1,text='ok')
button1.pack()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-29T13:11:48.020

使用`entry.focus()`：

```
from Tkinter import *
root = Tk()
frame=Frame(root,width=100,heigh=100,bd=11)
frame.pack()
label = Label(frame,text="Enter a digit that you guessed:").pack()
entry= Entry(frame,bd=4)
entry.pack()
entry.focus()
button1=Button(root,width=4,height=1,text='ok')
button1.pack()

root.mainloop() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-16T10:30:34.613

我试过这种方式，没关系

```
entry= Entry(root)
entry.focus()
entry.pack 
```

# java - 使用多个 ServerSockets 进行套接字编程

> ID：13626410
> 
> 赞同：0
> 
> 时间：2012-11-29T13:00:27.283
> 
> 标签：java, sockets

我想实现一个允许两个客户端通信的套接字应用程序。现在我已经通过 TCP 协议为单个服务器和多个客户端实现了它。现在我需要的是，我想实现一个将监视服务器的类，如果客户端数量超过限制，则启动新服务器，传入的客户端请求将重定向到该服务器。

如果有人对如何实现这一目标有任何想法，请告诉我。

# firefox - 更改父溢出时Firefox转换中断

> ID：13626412
> 
> 赞同：4
> 
> 时间：2012-11-29T13:00:36.600
> 
> 标签：firefox, css, css-transitions

我今天遇到了一个问题，我花了很长时间调试，我在网上找不到任何解决方案，所以我认为记录下来会很有用

如果父级的“溢出”属性与转换一起更改，则转换似乎在 Firefox 上不起作用 - 即：

```
.parent { overflow: hidden; }
.parent:hover { overflow: visible; }
.child { opacity: 1; transition: opacity 1s linear; }
.parent:hover .child { opacity: 0; } 
```

过渡不适用于孩子。从悬停的父级中删除“溢出：可见”属性，一切正常。似乎改变孩子本身的溢出不会引起任何问题，这很奇怪。

这是这个[http://jsfiddle.net/qzMj9/13/的js小提琴](http://jsfiddle.net/qzMj9/13/)

有谁知道为什么会这样？是 ff 错误还是正确的功能？它适用于 webkit！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T21:08:55.917

这看起来像[https://bugzilla.mozilla.org/show_bug.cgi?id=625289](https://bugzilla.mozilla.org/show_bug.cgi?id=625289)对我来说：父级正在重建其 CSS 框，这会丢失子级的旧计算样式，这意味着没有过渡开始，因为那是由计算的样式更改触发。

# boolean - 逻辑表达式的基本恒等式和从真值表导出逻辑表达式？

> ID：13626416
> 
> 赞同：3
> 
> 时间：2012-11-29T13:01:05.790
> 
> 标签：boolean, logic, expression, truthtable

我想知道逻辑表达式的基本身份是什么以及如何获得它。我在谷歌上查看，但找不到任何关于它的信息。

说，例如我有一个逻辑表达式 ~(~(P ^ ~(P ^ Q)) ^ ~(Q ^ ~(P ^ Q))) 下面是我从真值表得到的结果，我没有知道如何处理它以获得基本身份。

```
0
1
1
0 
```

同样，我有一个真值表，但我不知道如何从中得出逻辑表达式。

```
P Q R F 

0 0 0 0
0 0 1 0
0 1 0 0
0 1 1 0
1 0 0 0
1 0 1 1
1 1 0 1    
1 1 1 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T10:34:03.530

有了真值表，创建 DNF 公式就很简单了。看看任务在哪里是正确的。然后你最终得到（感叹号表示*否定*）

```
(P & !Q & R) OR (P & Q & !R) OR (P & Q & R). 
```

# google-drive-api - Google Drive Web View 返回错误的内容类型

> ID：13626420
> 
> 赞同：2
> 
> 时间：2012-11-29T13:01:09.950
> 
> 标签：google-drive-api

根据这篇博文，Google Drive 应该能够提供 html：http: [//googleappsdeveloper.blogspot.nl/2012/11/announcing-google-drive-site-publishing.html](http://googleappsdeveloper.blogspot.nl/2012/11/announcing-google-drive-site-publishing.html)

但在我的帐户上，我只是在`<pre></pre>`.

我使用测试 html 文件创建了一个测试文件夹：[https ://googledrive.com/host/0BxVNvXP_dI5QTEstTEtmMXNkOFU/](https://googledrive.com/host/0BxVNvXP_dI5QTEstTEtmMXNkOFU/)

html文件的内容：

```
<html>
<head>
    <title>Test 123</title>
</head>
<body>
    Test 123.
</body>
</html> 
```

博文中的[示例](https://googledrive.com/host/0B716ywBKT84AcHZfMWgtNk5aeXM/)具有以下 HTTP 响应标头：

```
HTTP/1.1 200 OK
status: 200 OK
version: HTTP/1.1
cache-control: private, max-age=315360000
content-length: 1724
content-type: text/html
date: Thu, 29 Nov 2012 12:55:22 GMT
last-modified: Tue, 06 Nov 2012 23:57:41 GMT
server: HTTP Upload Server Built on Nov 21 2012 16:10:52 (1353543052) 
```

我的页面具有以下 HTTP 响应标头：

```
HTTP/1.1 200 OK
status: 200 OK
version: HTTP/1.1
cache-control: private, max-age=315360000
content-length: 96
content-type: text/plain
date: Thu, 29 Nov 2012 12:51:00 GMT
last-modified: Thu, 29 Nov 2012 12:50:28 GMT
server: HTTP Upload Server Built on Nov 21 2012 16:10:52 (1353543052) 
```

因此，不同之处在于`content-type`标题。不知何故，我需要告诉 Google Drive 我的 html 确实是一个 html。文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:50:17.890

文件的 MIME 类型在上传时设置。您是否上传了带有 .txt 扩展名的文件并重命名了它？如果您删除并重新上传 HTML 文件，我敢打赌它会起作用。

# c# - 我可以订阅 Facebook 上的任何页面以获取实时更新吗？

> ID：13626422
> 
> 赞同：1
> 
> 时间：2012-11-29T13:01:09.533
> 
> 标签：c#, facebook

我不知道我是否可以创建一个订阅任何给定 facebook 页面的应用程序（本机窗口）？还是只允许我自己的应用程序？

一个例子：给定[http://www.facebook.com/natholdet](http://www.facebook.com/natholdet)，然后我是否能够在我的应用程序中收到一条通知，告诉我墙上的新帖子已经发布，或者我是否需要不时检查它? （facebook对我检查它的频率是否有任何限制）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:32:51.407

从[文档](https://developers.facebook.com/docs/reference/api/realtime/)中：

**“页面 - 当已将您的应用安装为选项卡的页面**更改其某些公共属性时获取通知”

`Similarly, for Page objects, you can only subscribe to changes to public attributes of the page, such as name, category, and picture.`

因此，无论如何，帖子都没有实时更新。

# html - 制作一个带有边框的元素，“缝合”到内部对象的外边框

> ID：13626425
> 
> 赞同：5
> 
> 时间：2012-11-29T13:01:37.373
> 
> 标签：html, css

用什么方法制作一个带有边框的 div（或另一个元素），“缝合”到该 div 内对象的外边框？

例如：![例子](../Images/028d298ddfd23d8037ea8de262ca8a5e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:34:28.167

如果您只想使用 css 而没有任何 javascript 插件，您可以做很多工作，例如： [**Demo**](http://jsfiddle.net/GcWGh/3/)

HTML

```
<div id="main">
    <div class="red"><div class="content">Red</div></div>
    <div class="green"><div class="content">Green</div></div>
    <div class="blue"><div class="content">Blue</div></div>
    <div class="black"><div class="content">Black</div></div>
</div> 
```

CSS

```
#main {position:relative;}
.black, .red, .blue, .green {
    position:absolute;
    border:3px dotted #000;
    background:#FFF;
    z-index:10;
}
.content {position:relative;margin:10px;}
.black {top:300px;left:103px;z-index:9;}
.black .content {height:180px;width:280px;background:#000;}
.blue{ top:50px;left:200px;border-bottom:none;}
.blue .content {height:30px;width:30px;background:#009;}
.red{top:0px;left:0px;}
.red .content {height:280px;width:80px;background:#F00;}
.green{top:100px;left:103px;border-left:none;border-bottom:none;}
.green .content{height:180px;width:180px;background:#070;} 
```

​​这里你需要设置每个元素的位置和它们的大小，然后你必须为每个叠加边框的显示进行调整。

这有点难看，但这是有效的......

# php - 从字符串中提取数据

> ID：13626426
> 
> 赞同：2
> 
> 时间：2012-11-29T13:01:39.887
> 
> 标签：php, string, extract, explode

我有包含区域地图和其他一些信息的字符串：

```
$string = 'something here 
<map name="map">
< area shape="circle" coords="34,210,3" alt="something 1" href="test.php?place=aaa&time=1" />
< area shape="circle" coords="34,220,3" alt="something2" href="test.php?place=bbb&time=2" />
< area shape="circle" coords="669,229,3" alt="some 8" href="test.php?place=bbb&time=3" />
</map>'; 
```

如何从字符串中提取每个区域的坐标、地点和时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:07:42.417

试试这个，我使用正则表达式将变量提取到数组中。您可以使用 var_dump 查看结果。

```
$string = 'something here 
<map name="map">
< area shape="circle" coords="34,210,3" alt="something 1" href="test.php?place=aaa&time=1" />
< area shape="circle" coords="34,220,3" alt="something2" href="test.php?place=bbb&time=2" />
< area shape="circle" coords="669,229,3" alt="some 8" href="test.php?place=bbb&time=3" />
</map>';

preg_match_all("/(\d+\,\d+\,\d+)/", $string, $coords);
preg_match_all("/place\=(.*)\&time\=(\d+)/i", $string, $place_time);

var_dump($place_time, $coords); 
```

**var_dump() 结果**

```
array (size=3)
  0 => 
    array (size=3)
      0 => string 'place=aaa&time=1' (length=16)
      1 => string 'place=bbb&time=2' (length=16)
      2 => string 'place=bbb&time=3' (length=16)
  1 => 
    array (size=3)
      0 => string 'aaa' (length=3)
      1 => string 'bbb' (length=3)
      2 => string 'bbb' (length=3)
  2 => 
    array (size=3)
      0 => string '1' (length=1)
      1 => string '2' (length=1)
      2 => string '3' (length=1)

array (size=2)
  0 => 
    array (size=3)
      0 => string '34,210,3' (length=8)
      1 => string '34,220,3' (length=8)
      2 => string '669,229,3' (length=9)
  1 => 
    array (size=3)
      0 => string '34,210,3' (length=8)
      1 => string '34,220,3' (length=8)
      2 => string '669,229,3' (length=9) 
```

您可以通过数组/键访问上述示例中的信息：

```
echo $coords[1][0]; //return: 34,210,3
echo $place_time[1][0]; //return: aaa
echo $place_time[2][0]; //return: 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:13:59.630

这对我来说看起来像是标记，你为什么不简单地解析它呢？

```
$DOM = new DOMDocument();
$DOM->loadXML($string);
$areas = $DOM->getElementsByTagName('area');
$coordinates = array();
for ($i = 0, $j = count($areas);$i<$j;$i++)
{
    array_push($areas, $areas[$i]->getAttribute('coords'));
} 
```

这就是你应该对待标记的方式，IMO——除非你当然[期待时代的结束](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

[看看在解析标记时如何让你的生活更轻松](http://php.net/manual/en/class.domdocument.php)，这就是文档的用途。

正如@SalamanA 指出的那样，将片段视为整个 DOM 可能被认为是矫枉过正。值得庆幸的是，在这种情况下可以使用诸如[DOMFragment 类之类的东西。](http://www.php.net/manual/en/class.domdocumentfragment.php)

```
$DOMFragment = new DOMDocumentFragment();
$DOMFragment->appendXML($string);
//or, when you need to treat multiple DOMFragments:
$DOM = new DOMDocument();//can be used as a sort-of DOMFragment factory
$fragment = $DOM->createDocumentFragment();
$fragment2 = $DOM->createDocumentFragment();
$fragment->appendXML($string); 
```

# loadrunner - 带空格的 LoadRunner 参数参数

> ID：13626428
> 
> 赞同：0
> 
> 时间：2012-11-29T13:01:49.967
> 
> 标签：loadrunner

我正在编写一个 VUser LoadRunner 脚本，并希望在此 html 中保存一个介于边界之间的参数：

```
<span id="ident" class="control-label">
My parameter
<span> 
```

但问题是 LR 使用以下代码失败：

web_reg_save_param("Some_Txt", "LB=ident" class="control-label">", "RB=",LAST );

有错误：

Action.c (34): 语法错误；找到`class' expecting`)'

Action.c (34): 语法错误；找到`class' expecting`;'

Action.c (34): 未声明的标识符“类”

Action.c (34): 语法错误；找到`RB' expecting`;'

Action.c (34): 未声明的标识符“RB”

Action.c(34)：非法表达

Action.c (34)：缺少“

Action.c (34): 未声明的标识符“sp”

Action.c (34): 语法错误；找到 ",LAST ); " 期待 `;'

Action.c (36)：语法错误；找到`web_submit_data' expecting`;'

Action.c (37)：缺失

我不确定错误消息。这里的线索是什么？问题是空格还是“”还是别的什么？

干杯马格纳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:30:46.003

您的 web_reg_Save para() 语法不正确。请参考您在 C 编程中的基础技能，了解如何在字符串中转义引号。 *假设*您呈现的捕获部分在多行 HTML 中是正确的，那么您会发现您可能会在左边界条件中丢失其他字符。除了 NULL 条件之外，您还需要在正确的边界条件中使用更好的描述符。

这个答案不包括解决方案，而是解决方案的路径：研究：

*   在C中的另一个字符串内转义引号
*   C语言行尾的控制字符表示换行和回车研究：Distinct Right边界条件（非空），可能包括控制字符
*   匹配条件的序数/实例
*   地点。web_reg_...() 的位置是否适合捕获所需的位置。

研究上述内容应该可以更好地理解您选择实施的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-31T05:16:07.407

此函数中的语法 ---

```
 web_reg_save_param("Some_Txt", "LB=ident" class="control-label">", "RB=",LAST ); 
```

是错的。它在类之前有“，”，例如---

```
web_reg_save_param("Some_Txt", "LB=ident",class="control-label\">", "RB= ",LAST ); 
```

试试这个...

# java - 使用 jvntextpro 进行 POS 标记

> ID：13626429
> 
> 赞同：1
> 
> 时间：2012-11-29T13:01:50.050
> 
> 标签：java, pos-tagger

有人有使用[Jvntextpro](http://sourceforge.net/projects/jvntextpro/develop)的经验吗？我想用它来用越南语 POS 标签数据，但不知道如何使用这个工具。应该修改哪些文件以及输入文件应该具有哪种格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:23:07.743

您好，您可以改用[NLP Standford Postagger](http://nlp.stanford.edu/)，它是最好的 POS 标记工具之一。

只需下载 zip 文件并解压缩即可。

在那你有一个文件夹作为模型

在该模型中，您有两个文件

一个是道具文件，另一个是标记文件。此代码读取输入文件并使用标记器标记单词。搜索越南语标记文件。

```
 {

              f = new FileReader(fileName);
              String content = FileUtils.readFileToString(f);
              MaxentTagger tagger = new MaxentTagger("yourtaggerfile.tagger");
              String tagged = tagger.tagString(content);

             } 
```

# php - 如果设置了变量，则赋值

> ID：13626432
> 
> 赞同：28
> 
> 时间：2012-11-29T13:01:59.123
> 
> 标签：php, variables

在 PHP 中，我发现自己经常编写这样的代码：

```
$a = isset($the->very->long->variable[$index])
            ? $the->very->long->variable[$index]
            : null; 
```

有没有更简单的方法来做到这一点？最好是不需要我写`$the->very->long->variable[$index]`两次的。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2015-08-11T19:58:09.753

一个更新，因为 PHP 7 现已推出，并且在这一点上改变了游戏规则；前面的答案是关于 PHP 5 的。

PHP 7 解决了这个问题。因为您确实说用 PHP 编写它很常见，而且这绝对不优雅。

PHP 7 中出现了[Null Coalesce Operator (RFC)](https://wiki.php.net/rfc/isset_ternary)，它是 isset 三元条件的完美简写。

它的目标是替换这种类型的条件：

```
$var = isset($dict['optional']) ? $dict['optional'] : 'fallback'; 
```

由此：

```
$var = $dict['optional'] ?? 'fallback'; 
```

更好的是，空合并运算符是可链接的：

```
$x = null;
# $y = null; (undefined)
$z = 'fallback';

# PHP 7
echo $x ?? $y ?? $z   #=> "fallback"

# PHP 5
echo isset($x) ? $x : (isset($y) ? $y : $z) 
```

空合并运算符的行为与`isset()`: 在以下情况下采用主题变量的值：

*   变量已定义（存在）
*   **变量不为空**

只是给 PHP 初学者的注意事项：如果您使用三元条件，但您知道必须定义主题变量（但您想要一个*假*值的后备），则有[Elvis 运算符](https://stackoverflow.com/questions/1993409/operator-the-elvis-operator-in-php)：

```
$var = $dict['optional'] ?: 'fallback'; 
```

使用*Elvis 运算符*，如果`$dict['optional']`是无效偏移量或`$dict`未定义，您将收到`E_NOTICE`警告（PHP 5 和 7）。这就是为什么在 PHP 5 中，人们使用可怕的*isset a ? a : b*当他们不确定输入时形成。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-29T13:05:16.810

遗憾的是没有，因为[RFC](https://wiki.php.net/rfc/ifsetor)已被拒绝。而且因为[isset](http://php.net/manual/en/function.isset.php)不是一个函数，而是一个语言结构，所以你不能为这种情况编写自己的函数。

> 注意：因为这是一种语言结构而不是函数，所以不能使用变量函数来调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T13:09:11.213

假设您知道`$the->very->long->variable`已设置，并且您只是担心数组索引....

```
$x = $the->very->long->variable;
$a = isset($x[$index]) ? $x[$index] : null; 
```

或者对于您可以在代码周围使用的更通用的变体：

```
function array_valifset($arr,$k, $default=null) {
    return isset($arr[$k]) ? $arr[$k] : $default;
} 
```

然后像这样对任何数组值调用它：

```
$a = array_valifset($the->very->long->variable,$index); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-29T20:35:51.893

如果您只分配`null`而不是未设置的变量，则可以使用：

`$a = @$the->very->long->variable[$index];`

`@`使该指令不抛出任何错误

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-14T17:57:26.693

我偶然发现了同样的问题，发现引用数组元素不会发出通知或警告，但会返回 null（至少 PHP 5.6）。

```
$foo = ['bar' => 1];

var_dump($bar = &$foo['bar']); // int 1
var_dump($baz = &$foo['baz']); // null 
```

在 if 语句中：

```
if($bar = &$foo['bar']) {
    echo $bar;
}
if($baz = &$foo['baz']) {
    echo $baz;
} 
```

# ios - UIScrollview 偏移问题

> ID：13626436
> 
> 赞同：0
> 
> 时间：2012-11-29T13:02:21.390
> 
> 标签：ios, xcode, uiscrollview, uinavigationcontroller

这里有点问题。我的导航控制器有一个滚动视图，在第一次访问时就完美了，但是在按下按钮到另一个视图控制器，然后导航回来后，滚动视图偏移了大约 200 左右，有什么想法可能是什么问题？

这是第一次加载时的视图 -

[http://imgur.com/bXV6X,rCrSi#0](http://imgur.com/bXV6X,rCrSi#0)

这是在导航到另一个视图然后按下“后退按钮”之后

[http://imgur.com/bXV6X,rCrSi#1](http://imgur.com/bXV6X,rCrSi#1)

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:41:57.700

我真的不能告诉是什么导致了这个问题，但如果没有别的尝试设置滚动视图的框架，每次视图出现在正确的位置。

像这样：

```
- (void)viewWillAppear:(BOOL)animated
{
     myScrollView.frame = CGRectMake(x, y, width, height);
} 
```

从界面生成器中选择 x、y、宽度和高度。或者玩的位置，直到你满意。或尝试粘贴一些代码，以便我们查看导致此问题的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:46:08.227

只需将它的框架设置在视图中，它就会出现，然后它会显示在右侧，或者您可以设置其中心点以产生相同的结果，如果有任何问题评论，希望您能理解。

# oracle-adf - Oracle ADF Web 浏览器刷新按钮获取旧页面

> ID：13626438
> 
> 赞同：1
> 
> 时间：2012-11-29T13:02:26.003
> 
> 标签：oracle-adf, jdeveloper

我正在开发一个 ADF 应用程序。我有个问题。我的 Jdev 版本 11.1.2.3.0。

所以，例如，我有一个像这样的 URL “http://www.hohoho.com/view/index.xhtml?_adf.ctrl-state=ju9lnu5ld_3”

在此页面中，我有一个表从 DB 获取值。例如，我在 DB 浏览器中更改了一些行，然后单击了 Web 浏览器的刷新按钮。但是没有得到新的结果！例如，我删除“?_adf.ctrl-state=ju9lnu5ld_3”并输入 url，这会得到新的结果。这种情况怎么可能处理。我需要当用户单击刷新按钮时，必须获取最后一个结果。我认为它基于 ADF 状态。这种情况怎么可能处理。

解决方案

感谢 Andread，mysql 的 autocommit 属性默认值为 true，而不是 false :) 但我使用的是 false。我已经解决了像你一样的问题，但是我自己的解决方案太酷了:) 我只覆盖了 clearCache() 方法。它解决了这个问题。

```
 public void clearCache() {
        getDBTransaction().commit(); // added
        super.clearCache();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:23:21.113

查询的结果缓存在中间层。这就是为什么在重新加载页面时不会反映通过与应用程序不同的渠道应用的数据库更新的原因。

我正在使用 JDeveloper 11.1.1.7。**在迭代器**上设置“CacheResults”属性以`false`解决此问题（转到包含表的页面或页面片段的“绑定”选项卡，为表数据选择迭代器可执行文件，然后在属性检查器中的“高级”部分，将“CacheResults”设置为“false”）。

就 XML 而言，`PageDef.xml`文件中的迭代器定义应如下所示

```
<iterator id="TestIterator" Binds="TestView1"
          DataControl="AppModuleDataControl" RangeSize="25"
          CacheResults="false"/> 
```

似乎有一些额外的方法可以解决这个问题，这在早期的 JDeveloper 版本中可能是必需的：

*   [http://technology.amis.nl/2012/06/18/notifying-adf-applications-of-database-changes-fast-and-lean-using-database-query-result-change-notification-part-one/](http://technology.amis.nl/2012/06/18/notifying-adf-applications-of-database-changes-fast-and-lean-using-database-query-result-change-notification-part-one/)
*   [http://radio-weblogs.com/0118231/stories/2005/06/16/whyIsntRefreshingTheBrowserPageEnoughToRefreshTheDataDisplayed.html](http://radio-weblogs.com/0118231/stories/2005/06/16/whyIsntRefreshingTheBrowserPageEnoughToRefreshTheDataDisplayed.html)

* * *

*附录 2012 年 12 月 3 日*

OP 使用 MySQL。对于 MySQL，设置`CacheResults`属性是必需的，但还不够。默认情况下，MySQL 运行时`autocommit=false`具有使用隔离级别的[副作用](http://ilmarkerm.blogspot.co.uk/2012/06/little-side-effect-of-having-autocommit.html)`REPEATABLE READ`。A`SELECT`隐式打开一个事务，随后`SELECTs`返回相同的结果。Oracle RDBMS`READ COMMITTED`默认使用，因此在一个会话中插入和提交的数据由另一个会话中的 SELECT 返回。

在 ADF 中解决此问题的一种解决方案是为视图对象创建一个实现类，`executeQueryForCollection()`在执行查询之前覆盖并提交事务：

```
protected void executeQueryForCollection(Object object, Object[] object2, int i) {
    getApplicationModule().getTransaction().commit();
    super.executeQueryForCollection(object, object2, i);
} 
```

请仔细使用它并查看您的实际隔离级别要求，以确保您不会通过浏览器刷新无意中提交数据。此解决方案的另一个缺点是它不能在 Oracle RDBMS 和 MySQL 之间移植。

有关 SSCCE，请参阅[https://github.com/afester/StackOverflow/tree/master/AdfRefresh](https://github.com/afester/StackOverflow/tree/master/AdfRefresh)。

# c# - 如何在 C# 中字符串的特定位置找到正则表达式匹配？

> ID：13626446
> 
> 赞同：3
> 
> 时间：2012-11-29T13:03:01.960
> 
> 标签：c#, .net, regex

我想找出正则表达式是否在字符串的特定位置匹配。

例子：

```
Regex r = new Regex("d");
string s = "abcdefg"; 
```

我希望 match 函数**仅**在它位于确切给定位置时才找到匹配项，以便使用上面的示例，匹配位置`1`,`3`和`5`应该分别给出`no match`,`match`和`no match`。不幸的是，C#`Regex.Match`方法给出了：

```
r.Match(s, 1); // => match ("d")
r.Match(s, 3); // => match ("d")
r.Match(s, 5); // => no match 
```

我知道这是因为该`Regex.Match`方法向前搜索第一个匹配项，但是如何防止这种行为而不必制作子字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T14:01:04.627

添加`\G`到正则表达式的开头：

```
Regex r = new Regex(@"\Gd");
string s = "abcdefg";
Console.WriteLine(r.Match(s, 1).Success); // False
Console.WriteLine(r.Match(s, 3).Success); // True
Console.WriteLine(r.Match(s, 5).Success); // False 
```

`\G`将匹配锚定到前一个匹配结束的位置，如果没有前一个匹配，则锚定到字符串的开头。使用 的第二个参数`Match`，您实际上是在告诉它之前有*一场*比赛，该比赛在该位置结束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:08:41.393

使用`substring`和字符串开头的锚点`^`：

```
Regex r = new Regex("^d"); // Use the start of string anchor
string s = "abcdefg";
r.IsMatch(s.Substring(3)); // Match at exactly fourth character (0-based index 3) 
```

或者，为了避免在内存中复制字符串，请使用 quantified `.`：

```
Regex r = new Regex("^.{3}d");
r.IsMatch("abcdefg"); 
```

模式`^.{3}d`说

*   从字符串的开头开始
*   完全匹配任何内容的三个字符
*   然后匹配字母'd'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T13:13:47.830

好吧，如果您一直在寻找相同的索引，则可以通过在开头添加通配符来“填充”结果来填充更多的正则表达式，即：

```
Regex r = new Regex("^.{3}d");
r.isMatch("abcdefg"); // true
r.isMatch("adcffed"); // false
r.isMatch("abcddef"); // true 
```

另一方面，如果您想使用具有不同索引的相同正则表达式，您可以只使用`^`字符来匹配字符串的开头：

```
Regex r = new Regex("^d");
r.isMatch("abcdefg".substring(3)); // true
r.isMatch("adcffed".substring(3)); // false
r.isMatch("abcddef".substring(1)); // false 
```

注意：如果你只是在寻找一个简单的字符串而不是模式，你应该简单地使用[`string.IndexOf`](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)

# actionscript - 1119：通过静态类型 Class 的引用访问可能未定义的属性 SPACE

> ID：13626447
> 
> 赞同：1
> 
> 时间：2012-11-29T13:03:03.650
> 
> 标签：actionscript

试图让空格键在 ActionScript 中执行操作。

这是相对的代码位。

```
var space:Boolean = false; 
```

.

```
stage.addEventListener(KeyboardEvent.SPACE, kSpace); 
```

.

```
function kSpace(e:KeyboardEvent)
{
    if (e.keyCode == 40)
    {
        down = false;
    }
    if (e.keyCode == 38)
    {
        up = false;
    }
    if (e.keyCode == 32)
    {
        shoot = true;
    }
}

function shootBullet()
{
    var bullet1:bullet = new bullet();
    bullet1.x = ship.x + ship.height / 2;
    bullet1.y = ship.y;
    bulletContainer.addChild(bullet1);
} 
```

获取错误场景 1，图层“操作”，第 2 帧，第 17 行 1119：通过静态类型类的引用访问可能未定义的属性空间。

第 17 行是`stage.addEventListener(KeyboardEvent.SPACE, kSpace);`

很想把这个排序:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:12:21.297

`KeyboardEvent.SPACE`不是一个事件。尝试听`KeyboardEvent.KEY_DOWN`或 `KeyboardEvent.KEY_UP`

# jquery - 尝试使用 jQuery 停止超时功能

> ID：13626450
> 
> 赞同：0
> 
> 时间：2012-11-29T13:03:11.463
> 
> 标签：jquery, animation, jquery-selectors

我有一组绝对定位的 div，它们是图像的容器。每个 div 都有一个 class ，`photoCover`每个 img 有一个 class `fbPhoto`。我已经设置了一个循环函数，它在页面加载时会淡出集合中的每个图像，从而显示下面的图像然后循环。

当用户单击其中任何一个时，我需要能够阻止这种情况。

我已经尝试了各种涉及`$(this).stop(true, true)`SO 的选项和几个示例，但似乎没有任何效果。

这是循环函数的代码

```
var thumbNailTimeOut;
function loopSmallSlides(eleArray) {
    var slideCount = eleArray.length;
    $(eleArray).each(function (indexInArray) {
        var ele = this;
        thumbNailTimeOut = setTimeout(function () {
            if (indexInArray == slideCount - 1) {
                $(eleArray).fadeIn('slow').on("click", function () {
                    clearTimeout(thumbNailTimeOut);
                }); 
                clearTimeout(thumbNailTimeOut);
                loopSmallSlides(eleArray); // loop the function when the end is reached
            } else {
                $(ele).fadeToggle('slow').on("click", function () {
                    clearTimeout(thumbNailTimeOut);
                }); 
            };
        }, (indexInArray + 1) * 1000);
    });
}; 
```

循环函数接受以下生成的元素数组`document.ready`：

```
$(document).ready(function () {
    $('.photoCover').each(function () {
        // get an array of elements to slide
        var eleArray = $(this).children('.fbPhoto').get().reverse();
        loopSmallSlides(eleArray);
    });
}); 
```

片段

```
$(ele).fadeToggle('slow').on("click", function () {
    clearTimeout(thumbNailTimeOut);
}); 
```

正在尝试为数组中的每个元素添加一个单击处理程序，以便在单击任何这些元素时清除超时，但它不起作用。如您所见，该变量`thumbNailTimeOut`是全局可用的变量...据我所知，这*应该*可以取消`timeOut`吗？

如前所述，我尝试使用`stop`但无法到达任何地方，我尝试将 a 添加`click`到父元素，然后循环遍历子元素，删除任何动画，如下所示，但这不起作用。

```
$('.photoCover').each(function () {
     $(this).children('.fbPhoto').stop(true, true);
}); 
```

如果需要，HTML 如下所示：

```
<style>
   .photoCover{display:inline-block;width:204px;height:194px;vertical-align:top;}
   .fbPhoto{position:absolute;display:inline-block;width:110px;height:110px;margin:4px;background-position:center center;background-repeat:no-repeat;border-radius:5px;border:16px groove #93BABA;background-color:#93BABA;}
</style>

<div class="photoCover">
   <h4>Album Title</h4>                     
   <span style="background-image: url('IMG URL');" class="fbPhoto"></span>
   <span style="background-image: url(IMG URL); " class="fbPhoto"></span>
   <span style="background-image: url(IMG URL); " class="fbPhoto"></span>
   <span style="background-image: url(IMG URL); " class="fbPhoto"></span>
   <span style="background-image: url(IMG URL); " class="fbPhoto"></span>                        
</div> 
```

所以我的问题是，在嵌套在父元素中的每组图像上设置了这个循环后`.photoCover`，如何通过单击暂停该动画然后重新启动？

非常感谢任何帮助！SO上似乎还有很多其他问题，但我无法为这个例子找到答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:23:40.357

thumbNailTimeOut 在这个函数中被一遍又一遍地覆盖：

```
$(eleArray).each(function (indexInArray) { /* fn body */ }); 
```

函数完成其工作后，唯一存储在变量中的是您设置的最后一个超时。您可以尝试将变量用作数组。例如：

```
thumbNailTimeOut[index] = setTimeout(function () { /* fn body */ }, delay); 
```

清除超时将变为：

```
clearTimeout(thumbNailTimeOut[index]); 
```

但老实说：我不喜欢你使用那么多超时的方法。也许使用单个区间函数会方便得多。

**编辑：**
我试图用间隔重写你的函数。我还没有尝试过，但它看起来比超时代码干净得多：

```
function loopSmallSlides(eleArray) {
    var interval
    ,   $elems = $(eleArray);
    ,   current = 0;
    ,   slideCount = eleArray.length;

    interval = setInterval(function(){
        current = intervalFn($elems, current);
    }, 1000);

    $elems.on('click', function(e) {
        clearInterval(interval);
    });
};

function intervalFn($elems, current) {
    if( current < $elems.length) {
        $elems.eq(current).fadeIn('slow');
        return current+1;
    } else {
        $elems.fadeOut('slow');
        return 0;
    }
} 
```

# c# - 关闭应用程序的计时器

> ID：13626454
> 
> 赞同：9
> 
> 时间：2012-11-29T13:03:34.223
> 
> 标签：c#, timer

如何在 C# 中创建一个强制应用程序在指定时间关闭的计时器？我有这样的事情：

```
void  myTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    if (++counter == 120)
        this.Close();
} 
```

但在这种情况下，应用程序将在计时器运行后 120 秒内关闭。我需要一个计时器，它会在例如 23:00:00 关闭应用程序。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T13:35:57.843

您必须解决的第一个问题是 System.Timers.Timer 不起作用。它在线程池线程上运行 Elapsed 事件处理程序，这样的线程不能调用 Form 或 Window 的 Close 方法。简单的解决方法是使用同步计时器，System.Windows.Forms.Timer 或 DispatcherTimer，从问题中不清楚哪个适用。

您唯一需要做的另一件事是计算计时器的 Interval 属性值。这是相当简单的 DateTime 算法。如果您总是希望窗口在晚上 11 点关闭，请编写如下代码：

```
 public Form1() {
        InitializeComponent();
        DateTime now = DateTime.Now;  // avoid race
        DateTime when = new DateTime(now.Year, now.Month, now.Day, 23, 0, 0);
        if (now > when) when = when.AddDays(1);
        timer1.Interval = (int)((when - now).TotalMilliseconds);
        timer1.Start();
    }
    private void timer1_Tick(object sender, EventArgs e) {
        this.Close();
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T13:07:35.063

我假设您在这里谈论的是 Windows 窗体。那么这可能会起作用（**编辑**更改了`this.Invoke`使用的代码，因为我们在这里谈论的是多线程计时器）：

```
void  myTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e) 
{
    if (DateTime.Now.Hour >= 23)
        this.Invoke((Action)delegate() { Close(); });
} 
```

如果您切换到使用 Windows 窗体`Timer`，则此代码将按预期工作：

```
void  myTimer_Elapsed(object sender, EventArgs e) 
{
    if (DateTime.Now.Hour >= 23)
        Close();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-29T13:26:54.290

如果我理解您的要求，让计时器每秒检查一次时间似乎有点浪费，您可以在其中执行以下操作：

```
void Main()
{
    //If the calling context is important (for example in GUI applications)
    //you'd might want to save the Synchronization Context 
    //for example: context = SynchronizationContext.Current 
    //and use if in the lambda below e.g. s => context.Post(s => this.Close(), null)

    var timer = new System.Threading.Timer(
                s => this.Close(), null, CalcMsToHour(23, 00, 00), Timeout.Infinite);
}

int CalcMsToHour(int hour, int minute, int second)
{
    var now = DateTime.Now;
    var due = new DateTime(now.Year, now.Month, now.Day, hour, minute, second);
    if (now > due)
        due.AddDays(1);
    var ms =  (due - now).TotalMilliseconds;
    return (int)ms;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-29T13:12:10.023

您可能想要获取当前系统时间。然后，查看当前时间是否与您希望应用程序关闭的时间相匹配。这可以使用`DateTime`表示时间的瞬间来完成。

**例子**

```
public Form1()
{
    InitializeComponent();
    Timer timer1 = new Timer(); //Initialize a new Timer of name timer1
    timer1.Tick += new EventHandler(timer1_Tick); //Link the Tick event with timer1_Tick
    timer1.Start(); //Start the timer
}

private void timer1_Tick(object sender, EventArgs e)
{
    if (DateTime.Now.Hour == 23 && DateTime.Now.Minute == 00 && DateTime.Now.Second == 00) //Continue if the current time is 23:00:00
    {
        Application.Exit(); //Close the whole application
        //this.Close(); //Close this form only
    }
} 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-29T13:08:09.773

```
void myTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    if (DateTime.Now.Hour >= 23)
    {
        this.Close();
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-05-12T04:44:57.847

```
Task.Delay(9000).ContinueWith(_ =>
            {
                this.Dispatcher.Invoke((Action)(() =>
                {
                    this.Close();
                }));
            }
            ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T13:07:45.313

设置您的计时器以像现在一样检查每一秒，但将内容交换为：

```
void  myTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
  if (DateTime.Now.Hour == 23)
    this.Close();
} 
```

这将确保当计时器运行并且时钟为 23:xx 时，应用程序将关闭。

# css - 在生成的表中排列元素

> ID：13626455
> 
> 赞同：1
> 
> 时间：2012-11-29T13:03:38.247
> 
> 标签：css, jsf, twitter-bootstrap

JSF 中的`selectOneRadio`元素被转换为一个表格，其中单选按钮及其标签放在`<td>`一个表格中。

```
<!-- JSF Element -->
<h:selectOneRadio id="types" label="Type"
    value="#{bean.selectedType}"
    layout="pageDirection">
    <f:selectItems value="#{bean.types}"/>
</h:selectOneRadio>

<!-- Generated HTML -->
<table id="j_id_i:types">
    <tbody>
         <tr>
             <td>
                 <input id="j_id_i:types:0" type="radio" value="VALUE1"
                     name="j_id_i:types"/>
                 <label for="j_id_i:types:0"> Value #1</label>
             </td>
         </tr>
         <tr>...</tr>
         ...
    </tbody>
</table> 
```

在我使用 Bootstrap 之前，其中的元素`<td>`会并排显示，但现在会在彼此下方查看。

![元素在彼此之下](../Images/7183affc6d4ec99a5f52cf217350e64c.png)

元素的处理 CSS 如下，由 Firebug 给出。

```
table {
    border-collapse: collapse;
    border-spacing: 0;
}
body {
    color: #333333;
    font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
    font-size: 14px;
    line-height: 20px;
}
html {
    font-size: 100%;
} 
```

我不知道是什么导致了这种行为。这不是宽度的问题，因为这是 中的单个元素`<div>`，并且没有引导它是并排渲染的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:15:47.563

那是因为`<label>`Bootstrap CSS 已经成为一个[HTML 块元素](http://www.htmlhelp.com/reference/html40/block.html)，它自然地从一个新行开始。

您需要再次使其成为[HTML 内联元素](http://www.htmlhelp.com/reference/html40/inline.html)。因此，您需要相应地覆盖 Bootstrap CSS。也许您只想将此应用于表格单元格中的标签。例如

```
td label {
    display: inline;
} 
```

# c# - 网站仅在某些客户上挂起；如果 ViewState 被禁用，则以正常速度加载

> ID：13626461
> 
> 赞同：0
> 
> 时间：2012-11-29T13:03:50.453
> 
> 标签：c#, asp.net, viewstate

这很奇怪，达到这一点需要很多时间。

我有某些客户（来自他们网络上的任何计算机）和我的一位远程工作同事，在加载我们的一些网站时，页面在显示前会挂起 3-4 分钟。

连接到无线网络时，同一客户端计算机上的同一页面可以正常加载。

我们检查了 DNS 问题，并且 DNS 解析工作正常。

在 Firebug 中检查页面加载，我可以看到 ASP.NET 页面相当快地进入接收状态，但随后它需要永远接收。

加载 HTML 文件的头部，实际上 Firebug 的 Net 选项卡显示加载 CSS、JS 文件，但是 ASP.NET 页面本身需要 3-4 分钟。

如果在加载时，我右键单击并选择查看源代码，我会在 1-2 秒内看到完整的 HTML 内容（在 Firefox 中，查看源代码会从服务器重新获取页面）

如果在 IE 中加载时，我右键单击并选择查看源（在 IE 中，查看源对应于浏览器目前可用的内容）我可以看到 HTML 内容加载到 ViewState 的一半，如果我保持重新询问 View Source，我可以看到加载的 ViewState 稍微多一些。

因此，作为一项测试，我将 ViewState 全部禁用，页面加载速度与我们办公室一样快。

我知道 ViewState 是丑陋的野兽，它占用大量带宽并且总是会影响页面加载时间，但这不是重点。

我不明白为什么这只影响连接到某些网络的某些机器。

任何人都可以对此有所了解吗？

编辑：

在禁用 ViewState 的情况下重新尝试加载页面，现在页面加载再次挂起，当我在 IE 中查看源代码时，HTML 内容进一步下降。

有趣的是：

当在 HTTS 中加载相同的页面时，它加载正常！

进一步补充：有问题的网站是[http://www.theclifftownhouse.com/](http://www.theclifftownhouse.com/)

# javascript - 如何独立创建新的 ImageData 对象？

> ID：13626465
> 
> 赞同：19
> 
> 时间：2012-11-29T13:03:54.807
> 
> 标签：javascript, canvas, html5-canvas, getimagedata

我想在代码中创建一个新的 ImageData 对象。如果我有一个`Uint8ClampedArray`想要制作图像对象的对象，那么最好的方法是什么？

我想我可以制作一个新的 canvas 元素，提取它的 ImageData 并覆盖它的 data 属性，但这似乎是一种错误的方法。

如果我可以直接使用 ImageData 构造函数，那就太好了，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-15T05:18:41.590

这是一个有趣的问题......你不能只创建`ImageData`对象：

```
var test = new ImageData(); // TypeError: Illegal constructor 
```

我也试过：

```
var imageData= context.createImageData(width, height);
imageData.data = mydata; // TypeError: Cannot assign to read only property 'data' of #<ImageData> 
```

但如[MDN](https://developer.mozilla.org/en-US/docs/DOM/ImageData) `data`中所述，属性是只读的。

所以我认为唯一的方法是通过迭代创建对象并设置数据属性：

```
var canvas = document.createElement('canvas');
var imageData = canvas.getContext('2d').createImageData(width, height);
for(var i = 0; i < myData.length; i++){
    imageData.data[i] = myData[i];
} 
```

**更新：** 我发现了ImageData属性中的`set`方法`data`，所以解决方法很简单：

```
var canvas = document.createElement('canvas');
var imageData = canvas.getContext('2d').createImageData(width, height);
imageData.data.set(myData); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-17T21:43:33.357

最新版本的 Chrome 和 Firefox 已经支持`ImageData`构造函数。[你可以在MDN](https://developer.mozilla.org/en-US/docs/Web/API/ImageData/ImageData)找到它的定义。

对于其他浏览器，您可以自己创建此构造函数：

```
function ImageData() {
    var i = 0;
    if(arguments[0] instanceof Uint8ClampedArray) {
        var data = arguments[i++];
    }
    var width = arguments[i++];
    var height = arguments[i];      

    var canvas = document.createElement('canvas');
    canvas.width = width;
    canvas.height = height;
    var ctx = canvas.getContext('2d');
    var imageData = ctx.createImageData(width, height);
    if(data) imageData.data.set(data);
    return imageData;
} 
```

你可以像这样使用它：

```
var imgData1 = new ImageData(data, width, height);
var imgData2 = new ImageData(width, height); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-04T16:17:55.297

构造`ImageData`函数终于在 Chrome 和 Firefox 中可用（参见[mdn](https://developer.mozilla.org/en-US/docs/Web/API/ImageData.ImageData)上的兼容性表）。有两种形式：

```
var imageData = new ImageData(width, height); 
```

如果你想用一个`UInt8ClampedArray`对象构建一个实例`data`：

```
var imageData = new ImageData(data, width, height); // height is optional 
```

出于兼容性原因，最好`createImageData`通过画布 2D 上下文使用，如其他答案所示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-08T12:46:29.010

有`createImageData()`方法。但为此，您需要现有画布的上下文。

```
var myImageData = context.createImageData(cssWidth, cssHeight); 
```

请参阅[此处](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas)了解更多信息。

# javascript - 将 div 包含在 data-role="page" 的 div 中后，无法动态添加锚标记

> ID：13626466
> 
> 赞同：1
> 
> 时间：2012-11-29T13:03:55.930
> 
> 标签：javascript, jquery-mobile

我想将锚标记动态添加到`div="myDiv"`.
只要我没有将它包含在另一个潜水中，它就可以正常工作`data-role="page"`。
我想将它包含在一个页面中，以便可以将其称为按钮链接上的页面。可能是什么问题。
下面是代码。

```
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
        <!--<script type="text/javascript" src="http://swfobject.googlecode.com/svn/trunk/swfobject/swfobject.js"></script> -->
        <style>
            figure{
                float:left
            }
            figcaption{
                font-size: small;
            }
            img {
                float:left; 
            }
            a {
                color: black;
                text-decoration: none;
            }
            a:hover {
                color:black; 
                text-decoration:none; 
                cursor:pointer;  
            }
        </style>        
    </head>
    <body>
        <div data-role="page">   //remove this and it will start working.
            <div data-role="div" id="myDiv" ></div>
            <div data-role="popup" id="popupMap1" class="ui-content" data-overlay-theme="a" data-theme="a" data-corners="false" data-tolerance="15,15"></div>
        </div>
        <script>
            function play(id){
                document.getElementById("popupMap1").innerHTML="<a href='#' data-rel='back' data-role='button' data-theme='a' data-icon='delete' data-iconpos='notext' class='ui-btn-right'>Close</a><iframe src='http://www.youtube.com/embed/"+id+"' width='480' height='320' seamless='' id='plyerIframe1'></iframe>";                    
            }
        </script>
        <script type="text/javascript" 
        src="http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?time=today&alt=json-in-script&callback=showMyVideos2&max-results=15&format=5">
    </script>
    <script type="text/javascript">
        var title=new Array();
        var thumbnailUrl=new Array();
        var playerUrl=new Array();
        var mydiv = document.getElementById("myDiv");
        var duration=new Array();
        var views=new Array();
        var idi=new Array();

        function showMyVideos2(data) {
            var feed = data.feed;
            var entries = feed.entry || [];
            var html = ['<ul class="videos">'];

            for (var i = 0; i < entries.length; i++) {
                var entry = entries[i];
                title[i] = entry.title.$t.substr(0,20);
                thumbnailUrl[i] = entry.media$group.media$thumbnail[0].url;
                playerUrl[i] = entry.media$group.media$content[0].url;
                duration[i]= entry.media$group.media$content[0].duration;
                views[i]= entry.yt$statistics.viewCount;
                var aTag = document.createElement('a');
                aTag.setAttribute('href','#popupMap1');
                aTag.setAttribute('data-rel','popup');
                aTag.setAttribute('data-position-to','window');
                aTag.setAttribute('data-theme','b');
                aTag.setAttribute('data-inline','true');

                //idi[i]=playerUrl[i].substring(25,36);
                idi[i]=entry.media$group.yt$videoid.$t;

                aTag.innerHTML ="<figure  onclick='play(idi["+i+"])'><figcaption>"+title[i]+"...</figcaption><img src="+thumbnailUrl[i]+"  width='200px' height='150px' ><footer>Duration: "+duration[i]+" seconds<br><span>Total Views: "+views[i]+"</span></footer></figure>" ;
                mydiv.appendChild(aTag);    
            }                   
        }       
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:44:37.390

我已经为您的问题制作了一个[jsFiddle](http://jsfiddle.net/rXRMZ/19/)解决方案。

## 解释：

当您使用`data-role="page"`div 时，您正在使用 jQuery-Mobile 框架，该框架将对 DOM 执行一些操作，重新排列一些元素。我不会对此进行更深入的讨论，因为我真的不确定幕后到底发生了什么，但似乎正在发生的事情是 jQuery-Mobile 在 youtube 脚本尝试时尚未完成页面渲染打电话`showMyVideos2`。

因此，我删除了`<script>`包含该脚本的标记，而是添加了以下 javascript 代码：

```
$(document).on('pageshow', function() {
    $.getScript("http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?time=today&alt=json-in-script&callback=showMyVideos2&max-results=15&format=5");
}); 
```

关于这件事你应该知道两件事：

1.  我已将此代码放在[pageshow](http://jquerymobile.com/test/docs/api/events.html)事件的回调中，以确保 jQuery-Mobile 在您开始任何 DOM 操作之前已完成它需要在页面上完成的所有工作。其他 jQuery-Mobile 事件，例如`pagechange`and`pagecreate`也会起作用。
2.  [我使用 jQuery 的getScript()](http://api.jquery.com/jQuery.getScript/)方法加载了 youtube 脚本，该方法允许您动态检索外部脚本并执行它。它实际上只是 $.ajax() 方法以下情况的简写符号：

    ```
    $.ajax({
      url: "http://gdata.youtube.com/feeds/api/standardfeeds/most_popular?time=today&alt=json-in-script&callback=showMyVideos2&max-results=15&format=5",
      dataType: "script"
    }); 
    ```

# java - 将代码块保存在变量中

> ID：13626468
> 
> 赞同：1
> 
> 时间：2012-11-29T13:04:08.237
> 
> 标签：java, eclipse, block

在 Objective C 中，你有一个功能块。您可以将代码块保存在变量中并将它们作为参数传递。

```
[objects enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    // Enumerating all the objects of an array
}]; 
```

在我的游戏中，我有一个`MenuScene`with `MenuSceneItem`s。在这种情况下，如果它们被单击，我想传递它们应该执行的代码。这将消除对 switch 语句的需要。

有没有办法在Java中有办法做到这一点或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:08:17.590

在 Java 中，你不能有匿名函数块，你需要使用匿名类：

```
menuScene.executeWhenClicked(new Runnable() {
  public void run() {
    // do something
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:07:20.827

这听起来像简单的多态性，例如

```
public interface Action {
   void doSomethingWhenPressed();
} 
```

并且只需实现一个实现上述接口的对象。将其作为参数传递。

您可能会使用*匿名*类来执行此操作，例如

```
// this method takes an 'Action' as an argument
passToMethod(new Action() {
   public void doSomethingWhenPressed() {
      System.out.println("Pressed!");
   }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T13:08:04.330

在 java 中，您创建一个扩展 Runnable 的对象（它不必具有显式的类类型），并将代码块放入`run`方法中。像这样

```
 Runnable myDelayedBlockOfCode = new Runnable() {
        public void run() {
            doA();
            doB();
            doC();
        }
    }; 
```

如果使用框架，请仔细查看框架特定接口，该接口允许您将此类代码块放入框架将调用的任何内容中。

# javascript - TypeError：在对象 17 中找不到函数 getHours

> ID：13626470
> 
> 赞同：0
> 
> 时间：2012-11-29T13:04:12.777
> 
> 标签：javascript, google-apps-script

我有一个 Google App 脚本停止工作并抛出错误“TypeError：在对象 17 中找不到函数 getHours。”。由于我们没有对代码进行任何更改，而且我对 Google App Script/Javascript 不太熟悉，希望有人能指出我正确的方向。

代码比这长得多，但我给出了一个 getHours 函数外观的示例（如果需要，我可以提供完整的代码）：

```
if (action.indexOf("[") == -1 && action != "") { // Check if there is some operation to take action

var roomtype = row[1]; // Reading data from the table
var desc = row[8];
var date = row[2]; 
var tstart = row[3]; 
var tstop = row[4]; 
var name = row[5]; 
var company = row[9]; 

var short_title = RoomShortcuts[0][roomtype] + " " + name + " (" + company + ")"; // Creating title of the Calendar entry
if (action == "Tentative") { short_title = "PROV: " + short_title; }              // This is for Tentative events

var year = date.getYear(); // Getting the date and time and transforming it for the calendar
var month = date.getMonth();
var day = date.getDate();    
var startHour = tstart.getHours();
var startMinute = tstart.getMinutes();
var stopHour = tstop.getHours();
var stopMinute = tstop.getMinutes();
var startdate = new Date(year, month, day, startHour, startMinute);
var stopdate = new Date(year, month, day, stopHour, stopMinute);

if (roomtype == "Gallery") {
  var repeat = 2;
  cal_EventCalendar[0]['Gallery'] = CalendarApp.openByName("Hub SMR");
} else {
  var repeat = 1;
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-30T16:33:28.863

我有一个类似的问题。我能够在一个脚本中使用 getHours，但在尝试从另一个脚本访问工作表时遇到了同样的错误。无论如何，阅读后：

[http://www.w3schools.com/jsref/jsref_gethours.asp](http://www.w3schools.com/jsref/jsref_gethours.asp)

我整理了以下解决方案：

```
function weeklyUpdater() {
  var sheet = SpreadsheetApp.getActiveSheet();
  var schedule = sheet.getRange(2, 2, sheet.getLastRow() + 1, 3).getValues();

  var hours = new Date(schedule[0][2]); // parse string into date

  var hoursX = hours.getHours(); 

  Logger.log(hoursX + ":");
} 
```

关键是使用**new Date**而在我的其他脚本中 schedule[0][2].getHours() 有效！

无论如何，希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:06:31.473

我不知道`row`它是什么，也不知道它在哪里定义。但是该`4th`元素是一个数字对象，其值为 17，而不是您期望的任何对象。

```
var tstart = row[3];
var startHour = tstart.getHours(); // Number object has no function getHours() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T17:24:42.013

问题出在您的电子表格中，而不是在您的脚本中。您可以通过双击对应于 row[3] 的单元格（很可能在 D 列中）轻松测试它并查看会发生什么：如果它是一个仅显示小时：分钟的日期对象，那么它会给您一个日历弹出窗口，例如这个： ![在此处输入图像描述](../Images/dd59bef758cbbf19dfd69d062695d091.png)

如果它是一个“普通”数字或字符串，则不会发生任何特殊情况，并且您的脚本将永远不会从中获得任何小时或分钟，因为这些语句需要一个日期对象作为参数。

这是电子表格的危险之一，它使事情看起来像它们不是的样子，在这种情况下以小时和分钟显示时间值，而后面​​的对象是带有年、秒和毫秒的完整日期值......人们经常忘记那 ;-）

因此，检查最新的单元格值，我很确定您会发现有人以错误的方式键入了一个值，并且电子表格未能将其转换为日期值。

# ios - 将日期格式化为特定格式

> ID：13626475
> 
> 赞同：-1
> 
> 时间：2012-11-29T13:04:27.033
> 
> 标签：ios, nsdateformatter

我想知道我是否可以将这种字符串“2012-11-09 11:30:00”转换为“11 月 9 日星期二 11:30”我无法弄清楚我应该使用的 NSDateFormatter 的女巫方法。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:18:19.037

```
NSString *myDateString = @"2012-11-09 11:30:00";
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];

formatter.dateFormat = @"yyyy-MM-dd HH:mm:ss";
NSDate *myDate = [formatter dateFromString: myDateString];

formatter.dateFormat = @"EEEE d 'of' MMMM 'at' HH'h'mm";
NSString *myNewDateString = [formatter stringFromDate: myDate]; 
```

（我没有包括`release`，因为我习惯使用 ARC）。

这是我得到的输出：

> 11 月 9 日星期五 11:30

[这](http://waracle.net/mobile/iphone-nsdateformatter-date-formatting-table/)是您可以使用的格式化程序列表。

请注意，这不包括当天之后的“st”、“nd”、“rd”和“th”。看看SO，关于这个有很多问题。

您还可以设置`formatter.locale`为`@"FR_fr"`或其他任何内容来更改日/月的语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:17:50.800

我不确定是否有一种开箱即用的方法来获得你想要的东西，但这应该能让你继续前进：http: [//www.ios-developer.net/iphone-ipad-programmer/development/date-and-时间/日期和时间示例](http://www.ios-developer.net/iphone-ipad-programmer/development/date-and-time/date-and-time-examples)

# matlab - 如何将颜色分配给正值和负值

> ID：13626482
> 
> 赞同：0
> 
> 时间：2012-11-29T13:04:56.367
> 
> 标签：matlab, octave

如何绘制一个充满颜色和颜色的地图区域，这些颜色和颜色代表负值和正值。颜色图只能为 [0,1] 范围内的值赋予颜色。我想扩大范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:05:30.550

让`x`成为您想要可视化的值的矩阵。然后您可以[`imagesc`](http://www.mathworks.de/de/help/matlab/ref/imagesc.html)用于可视化：

```
x = (rand(100,100)-0.5)*10; % random values between -5 and 5

imagesc(x);
colorbar 
```

请注意，颜色栏会自动调整为`x`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:25:35.647

简单的方法是这样做：

假设你想绘制`x`

```
xpos=x;
xneg=x;
xpos(xpos<0)=NaN;
xneg(xneg>=0) = NaN;

plot(xpos) 
hold all;
plot(xneg) 
```

# java - 如何构建 Apache Commons Lang Range 目的？

> ID：13626491
> 
> 赞同：6
> 
> 时间：2012-11-29T13:05:17.277
> 
> 标签：java, integer, range, apache-commons

如何创建 Apache Commons Lang 3.1`Range<Inreger>`对象？

[JavaDocs](http://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/Range.html)说：

> "*从最小点到最大点的不可变范围的对象。* "

> "*对象要么是 Comparable 的实现，要么你需要提供一个 Comparator。* "

但是当我尝试时：

```
Range<Integer> range = new Range<Integer>(100, 200); 
```

我在我的 IDE 中收到一个错误，说所需的参数是整数、整数、比较器。

即使`Integer`实现了`Comparable`接口，因此我不需要额外的比较器。

有人可以给我一个如何构造上述`Range<Integer>`对象的例子吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T13:09:27.810

Range 的构造函数似乎是私有的，因此静态方法可能是构造对象的首选方式。

例如，看起来您可以使用静态方法`between`来构造 Range：

```
Range.between(100, 200); 
```

但是还有其他静态方法，它只取决于您需要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:09:49.057

`Range`是一个抽象类。改为使用`IntRange range = new IntRange(100, 200)`。

# javascript - JQuery通过拆分段落更改页面中的文本

> ID：13626508
> 
> 赞同：0
> 
> 时间：2012-11-29T13:06:02.507
> 
> 标签：javascript, jquery, css, wordpress

我有一个基于 wordpress 的网站，其中的小部件具有类似的标题

*   按类别浏览
*   购物车
*   通讯
*   社区民意调查
*   ETC

现在，我想以蓝色显示每个小部件的第一个单词，以黑色显示剩余单词。
我怎么做？

（即浏览、购物、时事通讯、蓝色为黑色的社区）

我想，我们可以使用 jQuery 来做到这一点，但我不知道该怎么做。

编辑：

网站： http: [//granitess.com/wp/](http://granitess.com/wp/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:28:01.107

我首选的解决方案是使用 WordPress 挂钩来获取小部件标题。

```
function my_widget_title($title) {
    $parts = explode(" ", $title);
    $return = '<span class="first">' . array_shift($parts) . '</span>';
    if (sizeof($parts) > 0)
        $return .= implode(" ", $parts);
    return $return;
}

add_filter('widget_title', 'my_widget_title'); 
```

我还没有测试过，但理论上这个函数可以将小部件标题拆分成单词，`<span>`在第一个单词周围添加并返回新的小部件标题，然后您可以使用 CSS 设置样式。

您可以将这些行添加到`functions.php`您的主题中，或者更好的是，为您正在使用的主题创建一个子主题并将其添加到那里。这样，当主题更新时，它就不会被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:32:49.397

您可以试试这个，获取 iterate all `.widget-title`，获取其文本，按空格分割并更改第一个单词，`<span style='color:blue;'>`然后加入所有单词并在`.widget-title`html 中设置。像

```
$('.widget-title').each(function(){
    var $title = $(this).text();
    var words = $title.split(' ');
    words[0] = "<span style='color:blue;'>"+words[0]+"</span>";
    $(this).html(words.join(' '));
}); 
```

**编辑：**

在你这边，你的小部件标题在`.widget h3`所以试试这个 -

```
$('.widget h3').each(function(){
    var $title = $(this).text();
    var words = $title.split(' ');
    words[0] = "<span style='color:blue;'>"+words[0]+"</span>";
    $(this).html(words[0] + ' <span style="color:black;">' + words.slice(1).join(' ') + '</span>');
}); 
```

或者如果你想要和你的页脚一样，那么你可以试试这个

```
$('.widget h3').each(function(){
    var $title = $(this).text();
    var words = $title.split(' ');
    $(this).html(words[0] + ' <span style="color:#333333;">' + words.slice(1).join(' ') + '</span>');
}); 
```

# iphone - dispatch_once 调用导致崩溃

> ID：13626513
> 
> 赞同：4
> 
> 时间：2012-11-29T13:06:25.420
> 
> 标签：iphone, crash, automatic-ref-counting, exc-bad-access, grand-central-dispatch

`dispatch_once` 将项目转换为 ARC 后，调用会导致崩溃（在模拟器中）。

我最初的问题是我`EXC_BAD_ACCESS`的一个单例对象的 + (SingletonClass)shared { ... dispatch_once(..., ^{}); （在 objc_retain 调用中）崩溃了。... } 方法恰好在 dispatch_once 调用前一行。

基于日志记录和断点，我的代码没有运行到 dispatch_once 调用的块中。

我不知道原因，所以我刚刚注释掉了 dispatch_once 调用。没有那个电话，我的应用程序还没有崩溃。

之后，我尝试将 dispatch_once 放入我的应用程序之前调用的方法中。基于此，我知道 Xcode 指向恰好在 dispatch_once 调用之前的行，而不管 dispatch_once 调用的方法是什么。

对我来说主要的谜团是只有在模拟器中运行应用程序时才能重现。在设备上运行应用程序没有任何问题。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSLog(@"I will crash if you won't delete the dispatch_once after me and you run me in the iOS Simulator... If you run me on a device there won't be any problem with me...");

    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        int a = 42;
    });

    return NO;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T21:21:18.650

在一个基于PhoneGap的项目中，我一直在解决这个完全相同的问题一段时间，我不久前已经转换为ARC——在模拟器中崩溃但在设备上没有。

我创建了一个新项目，并且相同的代码运行良好，所以我通过项目配置查看有什么不同。

就我而言，我设置了旧的不需要的链接器标志，特别是`-weak_library /usr/lib/libSystem.B.dylib`.

从“构建设置”的“其他链接器标志”部分中删除它修复了它。

# php - PHP 订单图像堆栈

> ID：13626516
> 
> 赞同：0
> 
> 时间：2012-11-29T13:06:37.743
> 
> 标签：php

我有一个按特定顺序堆叠图像的应用程序。当页面生成时，顺序相同的地方我需要它是随机的。

```
Order, image_name 
[1, image1]
[1, image2]
[2, image3]
[3, image4] 
```

第一次生成页面，幻灯片放映；

```
Order, image_name 
[1, image1]
[1, image2]
[2, image3]
[3, image4] 
```

第二次生成页面时幻灯片显示：

```
Order, image_name 
[1, image2]
[1, image1]
[2, image3]
[3, image4] 
```

第三次生成页面时幻灯片显示：

```
Order, image_name 
[1, image1]
[1, image2]
[2, image3]
[3, image4] 
```

我在数据库中有一个订单字段和一个文件名字段。

（编辑）有没有办法用一个单一的选择做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:29:07.597

将此添加到 SQL：

```
ORDER BY `Order` ASC,RAND() 
```

它将按`Order`字段排序，并且任何相同的字段都将使用 RAND() 作为辅助排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:12:31.917

也许在您的 MySQL 查询中使用 ORDER BY RAND() ？

# javascript - 如何使用 jQuery 删除“禁用”属性？

> ID：13626517
> 
> 赞同：457
> 
> 时间：2012-11-29T13:06:39.337
> 
> 标签：javascript, jquery, disabled-input

我必须首先禁用输入，然后单击链接以启用它们。

这是我到目前为止所尝试的，但它不起作用。

HTML：

```
<input type="text" disabled="disabled" class="inputDisabled" value=""> 
```

jQuery：

```
$("#edit").click(function(event){
   event.preventDefault();
   $('.inputDisabled').removeAttr("disabled")
}); 
```

这显示了我`true`，然后`false`输入没有任何变化：

```
$("#edit").click(function(event){
   alert('');
   event.preventDefault();
   alert($('.inputDisabled').attr('disabled'));
   $('.inputDisabled').removeAttr("disabled");
   alert($('.inputDisabled').attr('disabled'));
}); 
```

* * *

## 回答 #1

> 赞同：937
> 
> 时间：2012-11-29T13:09:23.567

**使用 jQuery 时，始终**使用该**[`prop()`](http://api.jquery.com/prop/)**方法来启用或禁用元素（原因见下文）。

在您的情况下，它将是：

```
$("#edit").click(function(event){
   event.preventDefault();
   $('.inputDisabled').prop("disabled", false); // Element(s) are now enabled.
}); 
```

[jsFiddle 示例在这里。](http://jsfiddle.net/xPEK4/)

* * *

> `prop()`当您可以使用`attr()`/来执行此操作时，为什么还要使用`removeAttr()`？

基本上，`prop()`应该在获取或设置*属性*（例如`autoplay`、`checked`等）`disabled`时使用。`required`

通过使用`removeAttr()`，您将完全删除`disabled`属性本身 - 而`prop()`只是将属性的基础布尔值设置为 false。

*虽然您可以*使用`attr()`/来完成您想要做的事情`removeAttr()`，但这并不意味着它*应该*完成（并且可能会导致奇怪/有问题的行为，如本例所示）。

以下摘录（取自[prop() 的 jQuery 文档](http://api.jquery.com/prop/)）更详细地解释了这些要点：

> “属性和属性之间的区别在特定情况下可能很重要。在 jQuery 1.6 之前，该`.attr()`方法有时会在检索某些属性时考虑属性值，这可能会导致不一致的行为。从 jQuery 1.6 开始，该`.prop()` 方法提供了一种显式检索的方法属性值，同时 `.attr()`检索属性。”
> 
> “属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性。示例包括`value` 输入元素的`disabled`属性、输入和按钮的属性或`checked`复选框的属性。该`.prop()`方法应该用于设置`disabled`而`checked`不是`.attr()` 方法。方法`.val()`应该用于获取和设置 `value`。

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2015-01-21T14:35:15.910

删除禁用的属性使用，

```
 $("#elementID").removeAttr('disabled'); 
```

并添加禁用属性使用，

```
$("#elementID").prop("disabled", true); 
```

享受 ：）

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-11-29T13:12:00.070

```
<input type="text" disabled="disabled" class="inputDisabled" value="">
​&lt;button id="edit">Edit</button>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

$("#edit").click(function(event){
    event.preventDefault();
    $('.inputDisabled').removeAttr("disabled")
});​ 
```

[http://jsfiddle.net/ZwHfY/](http://jsfiddle.net/ZwHfY/)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-11-29T13:12:00.277

像这样使用，

**HTML：**

```
<input type="text" disabled="disabled" class="inputDisabled" value="">

<div id="edit">edit</div> 
```

**JS：**

```
 $('#edit').click(function(){ // click to
            $('.inputDisabled').attr('disabled',false); // removing disabled in this class
 }); 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-11-29T13:15:14.037

我认为您正在尝试**切换**禁用状态，以防万一您应该使用它（来自[this question](https://stackoverflow.com/questions/11903293/toggle-disabled-attribute-in-jquery)）：

```
$(".inputDisabled").prop('disabled', function (_, val) { return ! val; }); 
```

[这是一个工作小提琴。](http://jsfiddle.net/ZwHfY/1/)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2020-08-05T09:39:36.923

### 用于删除禁用的属性

```
 $('#inputDisabled').removeAttr('Disabled'); 
```

### 用于添加禁用的属性

```
 $('#inputDisabled').attr('disabled', 'disabled' ); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-06-04T13:52:12.097

## 2018 年，没有 JQuery

*我知道这个问题是关于 JQuery 的：这个答案仅供参考。*

```
document.getElementById('edit').addEventListener(event => {
    event.preventDefault();
    [...document.querySelectorAll('.inputDisabled')].map(e => e.disabled = false);
}); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-11-29T11:26:51.160

以为您可以轻松设置

```
$(function(){
$("input[name^=radio_share]").click
(
    function()
    {
        if($(this).attr("id")=="radio_share_dependent")
        {
            $(".share_dependent_block input, .share_dependent_block select").prop("disabled",false);   
        }
        else
        {
            $(".share_dependent_block input, .share_dependent_block select").prop("disabled",true);   
        }
    }
 );
}); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-04-03T00:27:32.863

这是唯一对我有用的代码：

```
element.removeProp('disabled') 
```

请注意，它是`removeProp`而不是`removeAttr`。

我在`jQuery 2.1.3`这里使用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-03-02T20:54:25.257

这个问题特别提到了 jQuery，但如果您希望在没有 jQuery 的情况下完成此操作，则原版 JavaScript 中的等价物是：

```
elem.removeAttribute('disabled'); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-04-19T13:48:15.243

尝试特殊选择器：

不工作：`$('#ID_Unit').removeAttr("disabled");`
工作：`$('select[id=ID_Unit]:disabled').removeAttr("disabled");`

所有“选择”控件`$('select:disabled').removeAttr("disabled");`

“选择”是控制类型，如“类型”等。

# python - 单元测试未运行

> ID：13626524
> 
> 赞同：60
> 
> 时间：2012-11-29T13:07:02.350
> 
> 标签：python, unit-testing

我遇到了一些单元测试。

这是我能想到的最简单的例子：

```
#testito.py
import unittest

class Prueba(unittest.TestCase):

    def setUp(self):
        pass
    def printsTrue(self):
        self.assertTrue(True)

if __name__=="__main__":
    unittest.main() 
```

问题是，运行它没有效果：

```
$ python testito.py 

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK 
```

我摸不着头脑，因为我看不到上面的代码有任何问题。现在发生了几次测试，我真的不知道下一步该怎么做。任何的想法？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-11-29T13:10:21.023

默认情况下，仅运行名称以开头的函数`test`：

```
class Prueba(unittest.TestCase):

    def setUp(self):
        pass
    def testPrintsTrue(self):
        self.assertTrue(True) 
```

从[单元测试基本示例](http://docs.python.org/2/library/unittest.html#basic-example)：

> 测试用例是通过子类化创建的`unittest.TestCase`。这三个单独的测试是用名称以字母开头的方法定义的`test`。此命名约定告知测试运行程序哪些方法代表测试。

# php - 在 Zend Framework 2 上使用表达式执行多重连接

> ID：13626527
> 
> 赞同：7
> 
> 时间：2012-11-29T13:07:10.537
> 
> 标签：php, zend-db, zend-framework2

实际上我正在做一个项目，我正在研究 Zend Framework 2 如何处理复杂的查询（特别是关于如何加入 n:m 表以及如何使用 GROUP_CONCAT 和其他函数）。您是否知道执行此查询的最佳实践：

```
SELECT o. * , x.group_one, x.group_two
FROM table_one AS o
LEFT JOIN (
SELECT r.fk1, GROUP_CONCAT( t.field_one ) AS group_one, GROUP_CONCAT( t.field_two ) AS group_two
FROM table_three AS r
INNER JOIN table_two AS t ON r.fk2 = t.id
GROUP BY r.fk1
) AS x ON o.id = x.fk1
LIMIT 0 , 20; 
```

使用这个数据库模式：

```
--
-- Database: `table-test-1`
--

-- --------------------------------------------------------

--
-- Structure of table `table_one`
--

CREATE TABLE `table_one` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
`field_1` varchar(255) NOT NULL,
`field_2` varchar(255) NOT NULL,
PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=6 ;

--
-- Dump for table `table_one`
--

INSERT INTO `table_one` (`id`, `field_1`, `field_2`) VALUES
(1, 'baz', 'bat'),
(2, 'foo', 'bar'),
(3, 'foo2', 'bat2'),
(4, 'fuz', 'bar2'),
(5, 'poo', 'pee');

-- --------------------------------------------------------

--
-- Structure of table `table_three`
--

CREATE TABLE `table_three` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
`fk1` bigint(20) NOT NULL,
`fk2` bigint(20) NOT NULL,
PRIMARY KEY (`id`),
KEY `fk1` (`fk1`,`fk2`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=10 ;

--
-- Dump for table `table_three`
--

INSERT INTO `table_three` (`id`, `fk1`, `fk2`) VALUES
(5, 1, 1),
(1, 1, 2),
(6, 1, 4),
(2, 2, 2),
(4, 3, 2),
(7, 3, 3),
(3, 4, 1),
(8, 5, 3),
(9, 5, 4);

-- --------------------------------------------------------

--
-- Structure of table `table_two`
--

CREATE TABLE `table_two` (
`id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
`field_one` varchar(255) NOT NULL,
`field_two` varchar(255) NOT NULL,
PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;

--
-- Dump for table `table_two`
--

INSERT INTO `table_two` (`id`, `field_one`, `field_two`) VALUES
(1, 'label_name_1', 'label_extended_name_1'),
(2, 'label_name_2', 'label_extended_name2'),
(3, 'label_name_3', 'label_extended_name_3'),
(4, 'label_name_4', 'label_extended_name4'); 
```

目前我使用带有手工查询的 Zend\Db\Sql\Sql 语句解决了这个问题，但我想知道实际上是否有一种方法可以使用本机 Select() 来做到这一点（可能不使用 Doctrine 或相似的）。

先感谢您 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:38:32.463

您必须导入`use Zend\Db\Sql\Predicate\Expression;`才能使用 group_concat。

前任：

```
$sql = new Sql($this->adapter); 
$select = $sql->select();
$select->columns(array('*'));
$select->from('tblCGii');
$select->join("tblCGFieldValues", "tblCGii.id = tblCGFieldValues.Cgii_id",   array("field_values"=>new Expression("Group_Concat(tblCGFieldValues.field_values)")),"LEFT"); 
$select->group('tblCGii.id'); 
```

# java - Swing HTML 渲染显示非常大的项目符号点

> ID：13626531
> 
> 赞同：4
> 
> 时间：2012-11-29T13:07:27.560
> 
> 标签：java, html, swing, rendering, jeditorpane

我使用 JEditorPane 在 swing 应用程序中呈现一些 HTML。我使用了一个项目符号列表`<ul><li>...</li></ul>`，我在输出中获得了过大的项目符号。相同的 HTML 块将在真实浏览器中显示正常大小的项目符号。

我在 Windows 7 / JDK 7 和 iirc 上也观察到了这一点，也在 Ubuntu 和 OpenJDK 1.7.0_09 上观察到了这一点。

这是已知的吗？有办法解决吗？

工作示例：

```
import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.WindowConstants;

/**
 *
 */
public class HTMLTest {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // create new frame
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        frame.setSize(500, 500);

        // create editor pane and fill with some html
        JEditorPane pane = new JEditorPane();
        pane.setContentType("text/html");
        pane.setEditable(false);
        pane.setText("<html><h1>Heading</h1>Text<ul><li>Bullet point</li></ul></html>");

        // add editor pane to frame and set frame visible
        frame.add(pane);
        frame.setVisible(true);
    }
} 
```

PS：我现在正在使用

```
ul {
    list-style-type: none;
    margin-left: 10px
} 
```

在一个CSS文件和

```
<li>&bull; Item 1</li> 
```

在 html 中有一个不错的要点。受 aterai 启发的解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T13:24:04.677

查看 ListView 源代码

```
public void paint(Graphics g, Shape allocation) {
    super.paint(g, allocation);
    Rectangle alloc = allocation.getBounds();
    Rectangle clip = g.getClipBounds();
    // Since listPainter paints in the insets we have to check for the
    // case where the child is not painted because the paint region is
    // to the left of the child. This assumes the ListPainter paints in
    // the left margin.
    if ((clip.x + clip.width) < (alloc.x + getLeftInset())) {
        Rectangle childRect = alloc;
        alloc = getInsideAllocation(allocation);
        int n = getViewCount();
        int endY = clip.y + clip.height;
        for (int i = 0; i < n; i++) {
        childRect.setBounds(alloc);
        childAllocation(i, childRect);
        if (childRect.y < endY) {
            if ((childRect.y + childRect.height) >= clip.y) {
            listPainter.paint(g, childRect.x, childRect.y,
                      childRect.width, childRect.height,
                      this, i);
            }
        }
        else {
            break;
        }
        }
    }
} 
```

listPainter 使用过去的参数作为

```
 if (childtype == CSS.Value.SQUARE || childtype == CSS.Value.CIRCLE
        || childtype == CSS.Value.DISC) {
    drawShape(g, childtype, (int) x, (int) y, 
          (int) w, (int) h, align);
    } 
```

并且drawShape紧随其后，您可以看到尺寸被硬编码为8

```
void drawShape(Graphics g, CSS.Value type, int ax, int ay, int aw, 
               int ah, float align) {
            // Align to bottom of shape.
            int gap = isLeftToRight ? - (bulletgap + 8) : (aw + bulletgap);
            int x = ax + gap;
            int y = Math.max(ay, ay + (int)(align * ah) - 8);

        if (type == CSS.Value.SQUARE) {
        g.drawRect(x, y, 8, 8);
        } else if (type == CSS.Value.CIRCLE) {
        g.drawOval(x, y, 8, 8);
        } else {
        g.fillOval(x, y, 8, 8);
        }
    } 
```

您可以尝试在您自己的painter提供的方法中替换StyleSheet的ListPainter

```
public ListPainter getListPainter(AttributeSet a) {
    return new ListPainter(a, this);
} 
```

您可以在其中更改项目符号的渲染

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:38:29.133

+1 @StanislavL，这是另一个例子（使用 css list-style-image 属性）：

![截屏](../Images/6282f087dbcb650bb4500872c44a79d7.png)

子弹.png：![子弹.png](../Images/623431e1a7fd938c061157283b0d3987.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.text.*;
import javax.swing.text.html.*;

public class HTMLTest2 {
  public JComponent makeEditorPane(String bullet) {
    // create editor pane and fill with some html
    JEditorPane pane = new JEditorPane();
    pane.setContentType("text/html");
    pane.setEditable(false);
    if(bullet!=null) {
      HTMLEditorKit htmlEditorKit = (HTMLEditorKit)pane.getEditorKit();
      StyleSheet styleSheet = htmlEditorKit.getStyleSheet();
      //String u = getClass().getResource(bullet).toString();
      String u = "http://i.stack.imgur.com/jV29K.png";
      styleSheet.addRule(String.format("ul{list-style-image:url(%s);margin:0px 20px;", u));
      //styleSheet.addRule("ul{list-style-type:circle;margin:0px 20px;}");
      //styleSheet.addRule("ul{list-style-type:disc;margin:0px 20px;}");
      //styleSheet.addRule("ul{list-style-type:decimal;margin:0px 20px;}");
    }
    pane.setText("<html><h1>Heading</h1>Text<ul><li>Bullet point</li></ul></html>");
    return pane;
  }
  public JComponent makeUI() {
    JPanel p = new JPanel(new GridLayout(2,1));
    p.add(new JScrollPane(makeEditorPane(null)));
    p.add(new JScrollPane(makeEditorPane("bullet.png")));
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new HTMLTest2().makeUI());
    f.setSize(320, 320);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
} 
```

# java-native-interface - 回调 JNI

> ID：13626535
> 
> 赞同：2
> 
> 时间：2012-11-29T13:07:36.567
> 
> 标签：java-native-interface

如何从 Android 应用注册 JNI 回调？我的要求是，我想从 Android 应用程序进行 JNI 调用，并希望注册一个回调，以便我可以从 JNI 获取对 java 应用程序的回调。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-22T14:04:23.997

首先，查看 Swig。它将 C++ 包装在 Java 中，并且还有一个“director”功能，可以更轻松地从 Java 调用 C++ 方法。

使用原始 JINI，您无法直接执行此操作。尽管可以调用 RegisterNatives() 来绑定本机方法，但不能更改它。如果要通过指针调用 C 函数，则需要分两步执行此操作。我掩饰了很多，因为 JNI 非常冗长和乏味。基本技巧是，将 C 函数指针包装在 java long 中。

首先声明一个java类：

```
public class Callback {
   public Callback(long cMethodPointer) { this.cMethod = cMethod; }
   public void doCallback() { callCMethod(cMethod); }
   public static native void callCMethod(long cMethod);
   public long cMethod;
} 
```

在该类文件上运行 javah，您将获得一个生成的存根标头，如下所示：

```
JNIEXPORT void JNICALL Java_Callback_callCMethod
  (JNIEnv *, jclass, jlong); 
```

在 DLL/so 中实现该方法：

```
typedef void (*FP)();
JNIEXPORT void JNICALL Java_Callback_callCMethod
  (JNIEnv *, jclass, jlong pointer) {
     ((FP)(void*)pointer)();
} 
```

并在您的 Java main() 方法中调用该 DLL/so 上的 System.loadLibrary()。

最后，从您的 C/C++ 代码中，您需要通过 JNI 创建回调对象的实例，并将指向实际方法的指针传递给它：

```
void MyFunction() { ... }
void Register() {
   jclass cls = env->FindClass("Callback");
   jmethodID mid = env->GetMethodID(cls, "<init>", "(J)V");
   jvalue arg;
   arg.j = (jlong)(void*)MyFunction;
   jobject callback = env->NewObjectA(confCls, mid, &arg);
} 
```

因此，这为您提供了一个指向您的 C 函数的全新回调对象！但是，你怎么做呢？好吧，您必须通过 JNI 将 Callback 对象传递给 Java（步骤省略），以便您的 Java 代码具有 Callback 对象，以便从中调用您的 C 方法：

```
public class Foo {
   public Callback callback;
   public void doSomeStuff() {
      ...
      callback.doCallback();
   }
} 
```

# php - 按下按钮并使用包含评论的文本区域更新 mysql 数据库中的评论

> ID：13626539
> 
> 赞同：0
> 
> 时间：2012-11-29T13:07:47.060
> 
> 标签：php, mysql

这个问题可能看起来有点奇怪，但我会告诉你我的意思:)

因此，我制作了一个网页，其中包含授权用户（教师）发表的评论。那是另一页中的另一段代码，因此可以完美运行。当然，发表评论的人应该可以在出现错误等情况下更改自己的评论。

我设法在单独的文本区域中向用户展示了他自己的评论和他的评论。文本区域没有特定的名称，只是称为 txtComment，我如何使它们对每个评论都是唯一的（这很灵活，因为可以稍后添加评论）。我认为这就是为什么我在按下按钮后无法更新更改/调整的文本区域的问题。

我希望你们明白我想说什么：p

我主要将荷兰语单词更改为英语，所以如果因此出现拼写错误:)

这是代码：

```
<?php
$sqlKlas = "Select * from tblcomments WHERE ForWho='".$_SESSION['User']."' AND ForWho='6HA1' OR VoorWie='6HA2'";
$resultKlas = mysql_query($sqlKlas) or die(mysql_error());
if (isset($_POST['btnAdaptCommentKlas'])){
    while($rowKlas = mysql_fetch_array($resultKlas)){
        $CommentNr = $rowKlas['CommentNr'];

        $sqlUpdate = "Update tblcomments SET Comment='".$_POST['txtComment']."' WHERE CommentNr=$CommentNr";
        $resultUpdate = mysql_query($sqlUpdate) or die(mysql_error());

        echo "<tr>";
        echo "<td>";
        ?><textarea name="txtComment" cols="80" rows="5"><?php echo $rowKlas['Comment']; ?></textarea><?php
        echo "</td>";
        echo "<td>".$rowKlas['ForWho']."</td>";
        echo "<td>".$rowKlas['Datum']."</td>";
        echo "</tr>";
    }
}
else {
    while($rowKlas = mysql_fetch_array($resultKlas)){
        echo "<tr>";
        echo "<td>";
        ?><textarea name="txtComment" cols="80" rows="5"><?php echo $rowKlas['Comment']; ?></textarea><?php
        echo "</td>";
        echo "<td>".$rowKlas['ForWho']."</td>";
        echo "<td>".$rowKlas['Datum']."</td>";
        echo "</tr>";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:16:33.750

我会做一些不同的事情 - 单独更新以列出评论。此外，您还必须设置包含评论 ID 的文本区域名称，例如我的示例：

```
<?php
$sqlKlas = "Select * from tblcomments WHERE ForWho='".$_SESSION['User']."' AND ForWho='6HA1' OR VoorWie='6HA2'";
$resultKlas = mysql_query($sqlKlas) or die(mysql_error());

if (isset($_POST['btnAdaptCommentKlas'])){
    foreach($_POST['txtComment'] as $key => $value) {
        $sqlUpdate = "UPDATE tblcomments SET Comment='".mysql_real_escape_string($value)."' WHERE CommentNr=".(int)$key;
        $resultUpdate = mysql_query($sqlUpdate) or die(mysql_error());
    }
}
while($rowKlas = mysql_fetch_array($resultKlas)){
    $CommentNr = $rowKlas['CommentNr'];
    echo "<tr>";
    echo "<td>";
    ?><textarea name="txtComment[<?php echo $CommentNr; ?>]" cols="80" rows="5"><?php echo $rowKlas['Comment']; ?></textarea><?php
    echo "</td>";
    echo "<td>".$rowKlas['ForWho']."</td>";
    echo "<td>".$rowKlas['Datum']."</td>";
    echo "</tr>";
} 
```

另外，我建议不要使用`mysql_*`功能，而是使用`PDO`或至少`mysqli_*`代替。`mysql_real_escape_string()`强烈建议使用转义用户输入。

此外，使用`MVC`和分离数据操作（更新、获取、创建）和数据表示（在 HTML 模板中）会更好，更易于维护，以便进一步开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:16:54.487

而不是`txtComment`使用`txtComment[unique_id]`. 这样你就可以做类似的事情

```
foreach(array_keys($_GET['txtComment']) as $id => $comment) { ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:37:12.460

然后试试这个

```
 $sqlUpdate = "Update tblcomments SET Comment='".$_POST['txtComment']."' WHERE OpmerkingNr='".$OpmerkingNr."' "; 
```

并改变这个

```
 $sqlKlas = "Select * from tblcomments WHERE ForWho='".$_SESSION['User']."' AND ForWho='6HA1' OR VoorWie='6HA2'"; 
```

对此

```
 $sqlKlas = "Select * from tblcomments WHERE ForWho='".$_SESSION['User']."' AND (ForWho='6HA1' OR VoorWie='6HA2' )"; 
```

您还可以在此处检查用户是否已登录

```
 if (isset($_POST['btnAdaptCommentKlas'])){ 
```

尝试将其更改为

```
 if (isset($_POST['btnAdaptCommentKlas']) AND $_SESSION['User'] !=0 ){ 
```

obs：我建议你改用 PDO。

# database-design - 图形建模——保存数据历史

> ID：13626542
> 
> 赞同：1
> 
> 时间：2012-11-29T13:07:59.120
> 
> 标签：database-design, neo4j

我正在使用 neo4j，我需要保存所有属性更改历史记录、关系和节点。

如何对数据结构进行建模，以便我可以在特定时间获取数据快照？

谢谢。

编辑：为了清楚起见，我的要求是能够在**任何**给定时间呈现数据的快照（排除定期快照）。

此外，我应该能够在时间线上呈现数据更改。

注意：我的数据可能有数百万个节点和 1000 万个关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:20:51.053

在 graphconnect 上有一个关于这个话题的好演讲，幻灯片可能是一个很好的起点：[http ://www.slideshare.net/GraphConnect/1140-adopt-suvee-fluxgraph](http://www.slideshare.net/GraphConnect/1140-adopt-suvee-fluxgraph)

# c# - 为什么我的正则表达式在 ASP.NET 中不起作用

> ID：13626543
> 
> 赞同：1
> 
> 时间：2012-11-29T13:08:00.263
> 
> 标签：c#, javascript, asp.net, regex, validation

我想`RegularExpressionValidator`以这种形式 yyyy-mm-dd 使用 a 日期（例如：2012-11-29），这是我的表达：

> /^(19[789]\d|20[0123]\d)-(0\d|1[012]|\d)-(31|30|[012]\d|\d)$/

我在[http://www.quanetic.com/Regex](http://www.quanetic.com/Regex)上对其进行了测试，它可以工作，但是如果我在我的 asp.net 应用程序中这样做，它就不起作用

```
 <tr>
   <td>Gültig ab:</td>
   <td><asp:TextBox ID="txtVon" runat="server" ></asp:TextBox></td>  
   <td><asp:ImageButton ID="imgVon" runat="server" ImageUrl="images/Calender.ico" Width="15" Height="15" />
     <asp:CalendarExtender runat="server" ID="E_Von" TargetControlID="txtVon" Format="yyyy-MM-dd" PopupButtonID="imgVon"/></td>        
   <td>
     <asp:RequiredFieldValidator ID="ValVon" 
       runat="server" ForeColor="red" 
       ErrorMessage="*" ControlToValidate="txtVon"></asp:RequiredFieldValidator>
     <asp:RegularExpressionValidator ID="regVon"   
       runat="server" ControlToValidate="txtVon" 
       ErrorMessage="*Format" ForeColor="red" 
       ValidationExpression="/^(19[789]\d|20[0123]\d)\-(0\d|1[012]|\d)\-(31|30|[012]\d|\d)$/"></asp:RegularExpressionValidator>
   </td>
 </tr> 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T13:13:30.953

只需删除字符串开头和 and 中的字符“/”。

你会有

```
ValidationExpression="^(19[789]\d|20[0123]\d)-(0\d|1[012]|\d)-(31|30|[012]\d|\d)$" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:14:42.207

我使用以下，它工作正常。

```
\A(?:^(19|20)\d\d([- /.])(0[1-9]|1[012])\2(0[1-9]|[12][0-9]|3[01])$)\Z 
```

# html - css - 提供完整的可用高度

> ID：13626559
> 
> 赞同：0
> 
> 时间：2012-11-29T13:08:50.450
> 
> 标签：html, css

我有以下设置

html:

```
<div id="resizable">
    <div id="fixHeightTop">Whatever</div>
    <div id="problematicDiv">Whatever</div>
    <div id="semiProblematicDiv">Whatever</div>
    <div id="fixHeightBottom">Whatever</div>
</div> 
```

CSS：

```
#resizable {
    position: relative;
}

#fixHeightTop {
    position: relative;
    height: 10px;
}

#fixHeightBottom {
    position: absolute;
    height: 10px;
}

#problematicDiv {
    position: relative;
    float: left;
    width: 80%;
    overflow: auto;
}

#semiProblematicDiv {
    position: relative;
    float: right;
    width: 20%;
    overflow: auto;
} 
```

#resizable div 可调整大小（jQuery）。我需要做的是给problemDiv 和semiProblematicDiv 一个等于100% 的高度——fixHeightTop 高度——fixHeightBottom 高度，这样我就可以在可调整大小的元素的整个高度上扩展它。问题是我想不出办法。如果我使用 height: 100% 它与底部元素重叠。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:25:38.407

如果我理解正确，您希望有两个具有固定高度的 div，而另外两个 div 显示占据了其余的高度。如果这是你想要的，这里有一种方法。

```
#resizable {
   height: 80px; //this is changed by JQuery, right?
}

#fixHeightTop {
   height: 20px;
}

#fixHeightBottom {
   height: 20px;
}

#problematicDiv {
   position: relative;
   float: left;
   width: 80%;
   overflow: auto;
   height: 100%; //this helps the div taking up the space
}

#semiProblematicDiv {
   position: relative;
   float: right;
   width: 20%;
   overflow: auto;
   height: 100%; //this helps the div taking up the space 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:21:23.717

我有一个想法，尝试使用`position:absolute;`

```
#problematicDiv {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 80%;
  height: 100%; // Now you can apply height 100%
  overflow: auto;
}

#semiProblematicDiv {
  position: absolute;
  top: 0px;
  right: 0px;
  width: 20%;
  height: 100%; // Now you can apply height 100%
  overflow: auto;
} 
```

祝你好运

# wpf - 在 ItemsControl 中命中测试绑定项目？

> ID：13626567
> 
> 赞同：0
> 
> 时间：2012-11-29T13:09:25.203
> 
> 标签：wpf, xaml, hittest

我`ItemsControl`绑定到一个列表，`MyItems`，对象为`SomeType`。当我单击我的 UI 元素（即省略号）时，我想抓住该`SomeType`对象。

这**不起作用**：

```
public HitTestResultBehavior SomeTypeHitCallback(HitTestResult result)
{
    if (result.VisualHit is Ellipse)
    {
        var ellipse = result.VisualHit as Ellipse;

        // Does not work...
        object item = itemsSource.ItemContainerGenerator.ItemFromContainer(ellipse);
        // item now equals DependencyProperty.UnsetValue

        // Here I want to change the property of the object
        // associated with the Ellipse...
        var o = item as SomeType;
        o.IsSelected = !o.IsSelected;

        return HitTestResultBehavior.Continue;
    }

    return HitTestResultBehavior.Stop;
}

private void Canvas_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    var pt = e.GetPosition((UIElement)sender);
    VisualTreeHelper.HitTest(
        (UIElement)sender,
        null,
        new HitTestResultCallback(SomeTypeHitCallback),
        new PointHitTestParameters(pt));
} 
```

这是 XAML：

```
<ItemsControl x:Name="itemsSource" ItemsSource="{Binding Path=MyItems}">
  <ItemsControl.ItemsPanel>
    <ItemsPanelTemplate>
      <Canvas ClipToBounds="True" PreviewMouseLeftButtonDown="Canvas_PreviewMouseLeftButtonDown" />
    </ItemsPanelTemplate>
  </ItemsControl.ItemsPanel>
  <ItemsControl.ItemTemplate>
    <DataTemplate>
      <Ellipse x:Name="item" Width="{Binding Width}" Height="{Binding Height}" />
    </DataTemplate>
  </ItemsControl.ItemTemplate>
</ItemsControl> 
```

我怎样才能找到`SomeType`对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:18:19.670

`itemsSource.ItemContainerGenerator.ItemFromContainer`仅当您通过时才有效`Item Container`，但它的视觉元素无效。所以你需要找到`ContentPresenter`包含椭圆的那个，并将它作为参数传递给`ItemFromContainer`方法。因为`ItemsContainer`for`ItemsControl`是`ContentPresenter`.

我看到的一种方法是由父母从 上去`VisualHit`，直到你找到`ContentPresenter`，并要求`ItemFromContainer`那个项目。试试这个，它应该工作。但是这里的问题可能是 ContentPresenter 可能存在于 ItemsContainer 的模板中，您将再次获得 null。绝对通过`ItemsControl`更改来`ListBox`更容易找到`ListBoxItem`，但您必须重新设置样式并删除不需要的其他功能。

也试着检查一下`Ellipse.DataContext`，我可能正是你想要的

# delphi - 服务返回代码 5 中的 CreateProcessWithLogon：访问被拒绝

> ID：13626571
> 
> 赞同：2
> 
> 时间：2012-11-29T13:09:32.333
> 
> 标签：delphi, winapi, windows-services

我有一个 StartType = stSystem 的 Windows 服务。

它使用 CreateProcessWithLogonW 执行应用程序。

```
 usr := 'myuser';
 dmn := 'mydomain';
 pwd := 'thepassword';
 cmd := 'c:\myapp.exe -calculate';
 wdir := 'c:\';

 fillchar(si, sizeof(si), 0);
 si.cb := sizeof(si);

 if not CreateProcessWithLogon(
           PWideChar(usr),
           PWideCharOf(dmn),
           PWideChar(pwd),
           LOGON_WITH_PROFILE,
           nil,
           PWideChar(cmd),
           NORMAL_PRIORITY_CLASS or CREATE_NEW_CONSOLE or CREATE_NEW_PROCESS_GROUP,
           nil,
           PWideChar(wdir),
           si,
           pi
         )
        then
          RaiseLastOSError; // raises Code 5: Access Denied 
```

在服务之外运行此代码，一切正常！

为什么 CreateProcessWithLogon 会引发系统错误代码 5: Access Denied ？

* * *

这可能是原因吗？

[关于 CreateProcessWithLogonW 的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms682431.aspx)说：

> Windows XP SP2 和 Windows Server 2003：不能从在 LocalSystem 帐户下运行的进程调用 CreateProcessWithLogonW，因为该函数使用调用者令牌中的登录 SID，而 LocalSystem 帐户的令牌不包含此 SID。作为替代方案，使用 CreateProcessAsUser 和 LogonUser 函数。

我正在使用 Windows 7 PRO x64

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:38:40.813

您正在**LocalSystem**帐户下运行该服务，并且正如[文档中](http://msdn.microsoft.com/en-us/library/ms682431.aspx)明确指出的那样：

> 您不能从在**LocalSystem**帐户下运行的进程调用 CreateProcessWithLogonW，因为该函数使用调用者令牌中的登录 SID，而 LocalSystem 帐户的令牌不包含此 SID。

因此，要么更改运行服务的用户帐户，要么切换到`CreateProcessAsUser()`，如文档所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:24:34.067

LocalSystem 帐户应该有足够的权限来读取和执行本地系统上的任何程序（除非您遇到特定的麻烦来拒绝它访问某些东西）。鉴于此，我猜测您正在执行的程序可能驻留在其他计算机上。这会导致失败的原因是因为 LocalSystem 没有网络身份，并且通常无法访问远程共享。您能否检查该程序是否确实驻留在本地驱动器上，而不是网络共享（可能被映射驱动器屏蔽）？

如果这不是问题，我会尝试使用[ProcMon](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来调试问题。这将显示系统上的所有文件和注册表活动，包括成功访问和失败。如果你运行它然后重现问题，我希望你会看到一个结果为 ACCESS DENIED 的条目，这应该指向你的原因。您可以使用过滤功能将输出限制为您的服务进程和您正在生成的进程。如果您在 Vista/2008 或更高版本上运行，则需要以提升的权限运行 ProcMon。

您还可以检查 Windows 事件日志，尤其是安全日志。如果尚未启用，您可能需要[启用审计日志；](http://support.microsoft.com/kb/310399)我将启用“审计对象访问”、“审计登录事件”、“审计帐户登录事件”和“审计权限使用”，包括成功和失败。根据我的经验，这些更改可能需要一段时间才能生效，因此如果您没有开始看到日志，您可能会重新启动测试系统。一旦日志记录工作，重试 CreateProcessWithLogon 并查看出现了哪些事件。您还可以将事情正常时产生的一系列事件与事情不工作时产生的一系列事件进行比较，这可能有助于显示问题所在。

# performance - Vim 处理远程文件时性能下降

> ID：13626575
> 
> 赞同：4
> 
> 时间：2012-11-29T13:09:42.663
> 
> 标签：performance, vim

我正在远程驱动器上打开一个文件——打开它需要 3-4 秒——没关系。

但是之后，很多命令变得非常慢。我正在输入`:help vimrc`- 显示需要 3-4 秒。
我正在打字`:setlocal nobuflisted`——需要 3-4 秒。

它可能与访问文件系统的那些命令有关。如果我这样做`:setlocal list`，它就可以了。此外，如果我切换到另一个缓冲区，一切都会再次恢复正常。

我可以做些什么来提高性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:25:36.373

也许交换文件是在远程目录中创建的，会降低你的性能。尝试在本地驱动器上设置交换和备份文件的默认目录：

```
set directory=/home/john/tmp
set backupdir=/home/john/tmp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:31:53.997

检查您的`'statusline'`设置和 autocmds 之类的事件`CursorMoved[I]`和`BufWinEnter`.

我曾经在我的状态行中有一个调用的函数`expand('%:p:h')`；正如您所经历的那样，它导致了明显的缓慢。我通过在脚本本地字典中缓存查找来解决此问题。

# c# - 当数据库中的值为 NULL 时，在 Datagrid 中显示空值（Guid）

> ID：13626581
> 
> 赞同：0
> 
> 时间：2012-11-29T13:09:53.373
> 
> 标签：c#, wpf, datagrid, viewmodel

在我的数据库表中，我有一列可以包含 Guid 但也可以是*NULL*。在我的 Viewmodel 中，此字段配置为 Guid 并绑定到我的`DataGrid`.

但是，当我清除我的字段`DataGrid`并因此将值设置为 null 时，我会收到错误“无法识别的 Guid 格式”。这是正确的，因为 guid 不能为空。但是如何将其显示为 null 或至少将其作为*NULL*传递给数据库？

XAML 绑定：

```
<DataGridTextColumn Binding="{Binding AttributeTypeValueId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Header="AttributeTypeValueId" /> 
```

我在模型中的属性：

```
private Guid _attributeTypeValueId;

public Guid AttributeTypeValueId
{
    get 
    {
        return _attributeTypeValueId; 
    }

    set
    {
        if (value != _attributeTypeValueId)
        {
            _attributeTypeValueId = value;
            RaisePropertyChanged("AttributeTypeValueId");
        }
    }
} 
```

知道我该怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:12:47.940

您可以使用可为空的：

```
private Guid? _attributeTypeValueId; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:43:18.000

将字段和属性的类型更改为 Guid？应该可以。我刚刚测试了它。

# git - 从远程 git 存储库中拉取更改

> ID：13626593
> 
> 赞同：5
> 
> 时间：2012-11-29T13:10:46.717
> 
> 标签：git

我是 git 新手。我所做的是分叉了几个我感兴趣的存储库，然后将它们克隆到我的计算机上以使用它们。

一些原始项目可能会因为我弄乱我的本地副本而显着更新，或者我可能会进行一些微不足道的更改。

据我了解，我可以“重新定位”我的克隆以“拉动”原始的更改。

这对我的更改有什么影响？例如，假设有一个`DoSomething.cpp`原始文件。我修改它，也许修复一个小错误或添加一个功能。现在！1年后，原来的项目经过多次修改，好多了。我想将这些更改“拉”到我的克隆中，但也要保留我的更改！（所以这有点与推动相反）

这很容易做到吗？如果是这样，基本思想是什么？

我想要的是我的克隆与原始克隆的任何更改（我已更改的内容）都不会被覆盖，但我实际上可以将我的更改与原始克隆（在我的 fork 上）合并，并能够实际检查和接受更改。（例如，如果`DoSomething.cpp`在原件上进行了更改，那么我需要比较更改以确保它们兼容。

我想这并不难，因为我是 fork 的所有者，我可以对其进行 rebase 或硬重置，然后将我的本地更改推送到我的 fork？（不确定它是否会起作用，因为版本控制问题的可能性很大）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T00:01:26.103

你是对的，变基是你可以让你的代码保持最新的一种方式，并且是非常常用的。

根据我的经验，变基在管理 git 历史记录方面更有用。它使您的历史保持良好和线性，它使工作看起来像是按顺序而不是并行发生的。另一方面，常规合并将涉及大量发散/收敛的提交。您可以使用`git log --graph`直观地看到这种差异。

简而言之，`rebase`接受您的提交，将它们转换为补丁，然后将它们应用到您正在变基的分支。如果有冲突，git 会停止并要求你解决它们，然后你可以让它继续。所以你仍然在合并和解决冲突，但只是以一种使历史线性化的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T13:44:53.770

首先，您应该知道，无论您“合并”还是“变基” *，您都不会丢失您的更改*，并且 git 会给您机会提交您的更改并解决冲突（如果有的话），然后将您的修改推送回您的远程仓库正在拉扯。

当你`git pull`告诉 git 这样做时：（拉取默认是使用“合并”）

> 从远程提取文件的最新副本，将它们与我的本地更改合并，如果存在您无法自动解决的冲突，请通知我以便我手动解决；这很简单。

当你`git pull --rebase`告诉 git 这样做时：

> 临时删除*从我的本地副本（我修改的文件）中的更改，从远程提取最新副本，在其上合并我的更改&如果存在您无法自动解决的冲突，请通知我以便我解决它手动。（*从技术上讲，什么都没有被删除；这只是为了让这个原本模糊的逻辑更清晰。*）

差异是微妙的，在第二种情况下，您的更改似乎就像您刚刚在从远程提取的最新副本的顶部进行了这些更改......但正如您所看到的，在这两种情况下您的更改绝对保留（否则git有什么用！）。

你应该合并还是变基？这是长时间的讨论，有些地方比另一个更好，并且有最佳实践；此页面中已经提到了一些有用的评论，有关更多信息，您可以在线搜索，只需输入“git merge vs rebase”，您将看到大量关于它的页面：）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:15:08.283

1.  找出你`git status`所在的分支，用 完成，它会在第一行或第二行显示分支的名称。

2.  对于测试，我建议首先将您的更改分支到一个单独的分支中：

    ```
    git checkout -b my-patches 
    ```

3.  现在确保所有更改都已提交。为此，您再次调用`git status`. 理想情况下，它应该显示*Working directory clean*，但如果不是这样，请使用`git add`将您的更改添加到索引并`git commit`最终提交它们。如果您想将更改拆分为几个不同的补丁集（在发生冲突时会很方便），我建议您阅读如何使用`git commit -p`. 您这样做，直到您的所有更改不再列出`git status`。将列出一些您未触及的文件`git status`，可能是构建的结果。如果没有您有兴趣保留的更改，那很好。

    如果有任何 makefile 等支持清理目录（`make clean`例如），请立即运行它们。

4.  `master`然后使用（替换为您在步骤 1 中找到的任何分支名称）切换回您的原始分支：

    ```
    git checkout master 
    ```

    如果您想确保一切正常，请运行：

    ```
    git diff my-patches 
    ```

    它应该列出您在 fork 中更改的行。如果没有，那就是出了点问题。

5.  现在是可怕的部分。您现在将丢弃对该分支所做的任何更改。请注意，如果您按照步骤 3 中的说明将所有更改提交到单独的分支，它们就可以了。如果您不确定，可以通过复制整个存储库文件夹来进行备份。然后你运行（再次，`master`用你以前的任何东西代替）：

    ```
    git fetch
    git reset --hard origin/master 
    ```

6.  理想情况下，您的分支现在应该具有分支的确切状态`origin/master`。确保一切正常。然后，您使用以下方法合并您的更改：

    ```
    git merge my-patches 
    ```

    Git 会尽最大努力让它尽可能轻松，但可能会有冲突。`>>>>`Git 将用和标记在相应的文件中``<<<<`标记它们。为了解决冲突，我建议你做一些互联网研究或阅读[打开的 Git Book 中有关基本合并冲突的部分](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging#Basic-Merge-Conflicts)。确保之后提交合并。

7.  困难的部分已经结束。您现在可以删除临时分支：

    ```
    git branch -d my-patches 
    ```

    我使用临时分支的原因是能够轻松地将存储库的状态恢复到合并尝试之前的状态。当然，也可以在单独的分支中检查远程状态，但我更喜欢这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T20:41:39.317

您是否将上游遥控器添加到您的分叉存储库中？这是让你的 fork 与它的 master 保持同步的最简单方法。这是第 3步[。](https://help.github.com/articles/fork-a-repo)

# javascript - jquery延迟函数

> ID：13626598
> 
> 赞同：2
> 
> 时间：2012-11-29T13:11:08.660
> 
> 标签：javascript, jquery, delay

我的延迟功能在我的**jquery**旋转功能中不起作用。我不确定为什么。

基本上，我的代码会让我的 div 转动一个角度，然后它会停在某个角度。这目前有效。但是我添加了一个延迟，所以它会在 3 或 4 秒后工作。

然而它没有这样做。

```
$(window).load(function() {
    var $elie = $("#super");
    rotate(1);

    function rotate(degree) {
        $elie.css({
            '-webkit-transform': 'rotate(' + degree + 'deg)',
            '-moz-transform': 'rotate(' + degree + 'deg)',
            '-o-transform': 'rotate(' + degree + 'deg)',
            '-ms-transform': 'rotate(' + degree + 'deg)',
            'transform': 'rotate(' + degree + 'deg)'
        });
        console.log(degree);
        if (degree < 55) {
            timer = setTimeout(function() {
                rotate(++degree)
            }, 10)
            delay: 4000;
        }
    }
});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:20:32.310

如果你想延迟旋转，只需在延迟函数周围设置一个“setTimeout”：

```
$(window).load(function() {
    var $elie = $("#super");
    setTimeout(function() {
        rotate(1);
    }, 4000)

    function rotate(degree) {
        $elie.css({
            '-webkit-transform': 'rotate(' + degree + 'deg)',
            '-moz-transform': 'rotate(' + degree + 'deg)',
            '-o-transform': 'rotate(' + degree + 'deg)',
            '-ms-transform': 'rotate(' + degree + 'deg)',
            'transform': 'rotate(' + degree + 'deg)'
        });
        console.log(degree);
        if (degree < 55) {
            timer = setTimeout(function() {
                rotate(++degree)
            }, 10)
        }
    };
});​ 
```

（也如上所述删除了dalay：4000，它没有你想要的效果！）

提琴手示例：http: [//jsfiddle.net/49VEe/](http://jsfiddle.net/49VEe/)

编辑2：

您可以使用[HTML5`transition`](http://css3.bradshawenterprises.com/transitions/)来获得旋转效果而不是递归函数（示例没有延迟：

```
$(window).load(function() {
    var $elie = $("#super");
        rotate(55);

    function rotate(degree) {
        $elie.css({
            '-webkit-transform': 'rotate(' + degree + 'deg)',
            '-moz-transform': 'rotate(' + degree + 'deg)',
            '-o-transform': 'rotate(' + degree + 'deg)',
            '-ms-transform': 'rotate(' + degree + 'deg)',
            'transform': 'rotate(' + degree + 'deg)',
            '-webkit-transition': 'all 1s ease-in-out',
            '-moz-transition': 'all 1s ease-in-out',
            '-o-transition': 'all 1s ease-in-out',
            transition: 'all 1s ease-in-out'
        });
    };
});​ 
```

提琴手：http: [//jsfiddle.net/mZzjP/](http://jsfiddle.net/mZzjP/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:16:07.717

如果您希望在几秒钟后开始旋转，请将初始值包装`rotate(1);`成`setTimeout`这样：

```
setTimeout(function() { rotate(1); }, 3000); // 3 seconds 
```

您还应该删除`delay: 4000;`，因为这只会导致错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T13:16:17.540

尝试

```
if (degree < 55) {
    timer = setTimeout(function () {
        rotate(++degree)
    }, 10);
    delay: 4000; // remove this
} 
```

进入

```
if (degree < 55) { 
    timer = setTimeout(function () { rotate(++degree) }, 10);
} 
```

你还需要一个像这样的初始 setTimout

```
setTimeout( rotate(1), 4000 ); 
```

[**在这里**](http://jsfiddle.net/ZsY26/1/)提琴[](http://jsfiddle.net/ZsY26/1/)

# asp.net-mvc - 如何重新安装已经在解决方案包目录中的 nuget 包？

> ID：13626600
> 
> 赞同：4
> 
> 时间：2012-11-29T13:11:20.593
> 
> 标签：asp.net-mvc, visual-studio, asp.net-mvc-4, nuget, packages

## 背景/历史

*   我有一个包含 MVC4 项目的解决方案。
*   我下载了一个 nuget 包（特别是 dotLess 包）。这在我的解决方案目录中添加了一个包文件夹，其中包括 dotless（它仍然存在）。
*   然后我删除了 MVC4 项目以重新开始，并添加了一个同名的新项目。

通常，我只会重新安装软件包。但是，这似乎需要 Nuget 服务器和互联网连接。这很好，除了目前我的开发机器没有互联网。

## 问题

由于我可以在我的解决方案的“包”目录中看到包含包文件的文件夹，有没有什么办法可以将它添加到项目中而无需通过互联网往返？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T20:56:08.517

另一种选择是设置本地 nuget 库，以便您离线访问包

[http://www.codecapers.com/post/How-to-Set-Up-a-Local-NuGet-Gallery.aspx](http://www.codecapers.com/post/How-to-Set-Up-a-Local-NuGet-Gallery.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:18:07.540

你有没有从 Scott Hanselman 那里试过这个？[http://www.hanselman.com/blog/HowToAccessNuGetWhenNuGetorgIsDownOrYoureOnAPlane.aspx](http://www.hanselman.com/blog/HowToAccessNuGetWhenNuGetorgIsDownOrYoureOnAPlane.aspx)

简而言之，他建议由于 NuGet 将内容缓存在您的本地硬盘驱动器上，您应该告诉它指向那里。

当代理阻止我连接到互联网时，我使用了它，并且效果很好！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T13:17:48.607

如果我对您的理解正确并且您知道正确的版本号，那么您可以尝试将以下内容添加到 packages.config 并查看它是否正确获取。

```
 <package id="dotless" version="1.3.1.0" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-29T21:02:24.973

这可能不是一个理想的答案，但每当我与 Visual Studio 中的 Nuget 包断开连接时，我通常会转向 Nuget 控制台并从那里重新安装，之后所有连接都将恢复。在你的情况下是这样的：

> PM> Install-Package dotless

无论如何，也许我误解了你的问题；）问候！

# c# - Cancel Output Caching in ChildAction

> ID：13626605
> 
> 赞同：2
> 
> 时间：2012-11-29T13:11:38.207
> 
> 标签：c#, asp.net-mvc

Does anyone know if it's possible to cancel output caching in code? What I mean is if I place output caching on a child action as follows can I then based on a condition cancel that caching from inside the child action?

```
[ChildActionOnly]
[OutputCache(Duration = 36000, VaryByParam="tagslug")]
public virtual ActionResult MostViewed(string tagslug, int count)
{
    // Make an API call here. If not data returned do not cache the ChildAction as specified above
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:36:29.720

Skimming [the framework source](http://aspnet.codeplex.com/releases/view/58781) it looks like the only logic is don't-cache-on-exception:

```
// Only cache output if this wasn't an error
if (!wasException) {
    ChildActionCacheInternal.Add(uniqueId, capturedText,
                                 DateTimeOffset.UtcNow.AddSeconds(Duration));
} 
```

I can't see a brilliant way to solve this: I think you'll have to make your own custom `OutputCachingAttribute` based on the original source from the ASP.NET MVC source from CodePlex, and then either add an extra check to that line for the output returned e.g.

```
if (!(wasException || capturedText.Contains("results:0"))) { 
```

or similar, or find a way to pass that code a flag to this from your controller. The existing code uses an object to store a value on the session; you could copy this, e.g.

1.  define a new static object key the same as `_childActionFilterFinishCallbackKey` e.g. `_noCacheResultKey`
2.  add a public static method to the attribute that you can call e.g.

    ```
    public static void FlagNoCache(HttpContext httpContext) {
        httpContext.Items[_noCacheResultKey] = true;
    } 
    ```

3.  extend `ClearChildActionFilterFinishCallback` to remove this from `.Items[]` as well as the callback
4.  extend the above test to check this too e.g.

    ```
    if (!(wasException
          || filterContext.HttpContext.Items.ContainsKey(_noCacheResultKey))) { 
    ```

5.  from your controller call `MyOutputCacheAttribute.FlagNoCache(Context);` as necessary.

It may also be possible to throw an exception from your code and then catch it in a different `IExceptionFilter` so that it doesn't get passed up beyond the `OutputCacheAttribute` but I don't know how sorry.

# textures - 从 WebGL 纹理中读取像素

> ID：13626606
> 
> 赞同：14
> 
> 时间：2012-11-29T13:11:44.890
> 
> 标签：textures, webgl

我有一个 WebGLTexture 对象。如何获取该纹理的像素（类似于 WebGL 的 readPixels，但用于纹理）？

我的一个想法是使用preserveDrawingBuffer=true 创建一个画布和一个WebGL 上下文，并在此画布上渲染我的纹理，使其显示2D 平面，然后使用readPixels。这种方法合理吗？有没有人有这个示例代码？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-30T06:46:32.797

您可以尝试将纹理附加到帧缓冲区，然后在帧缓冲区上调用 readPixels。

*在初始化时*

```
// make a framebuffer
fb = gl.createFramebuffer();

// make this the current frame buffer
gl.bindFramebuffer(gl.FRAMEBUFFER, fb);

// attach the texture to the framebuffer.
gl.framebufferTexture2D(
    gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0,
    gl.TEXTURE_2D, texture, 0);

// check if you can read from this type of texture.
bool canRead = (gl.checkFramebufferStatus(gl.FRAMEBUFFER) == gl.FRAMEBUFFER_COMPLETE);

// Unbind the framebuffer
gl.bindFramebuffer(gl.FRAMEBUFFER, null); 
```

*在阅读时*

```
if (canRead) {
   // bind the framebuffer
   gl.bindFramebuffer(gl.FRAMEBUFFER, fb);

   // read the pixels
   gl.readPixels(......);

   // Unbind the framebuffer
   gl.bindFramebuffer(gl.FRAMEBUFFER, null);
} 
```

对于 format = gl.RGBA 的纹理，type = gl.UNSIGNED_BYTE canRead 应该始终为 true。对于其他格式和类型，canRead 可能是错误的。

# elasticsearch - 指定在 ElasticSearch 中索引哪些字段

> ID：13626617
> 
> 赞同：25
> 
> 时间：2012-11-29T13:12:32.153
> 
> 标签：elasticsearch

我有一个文档，其中包含许多我从未查询过的字段，因此我想关闭这些字段的索引以节省资源。我相信我需要[禁用该`_all`字段](http://www.elasticsearch.org/guide/reference/mapping/all-field.html)，但是如何指定索引哪些字段呢？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-29T13:47:46.690

默认情况下，所有字段也都在[_all](http://www.elasticsearch.org/guide/reference/mapping/all-field.html)特殊字段中进行索引，它提供了开箱即用的所谓的包罗万象的功能。但是，您可以通过以下选项为映射中的每个字段指定是否要将其添加到 _all 字段`include_in_all`：

```
"person" : {
    "properties" : {
        "name" : {
            "type" : "string", "store" : "yes", "include_in_all" : false
        }
    }
} 
```

上面的示例禁用了 name 字段的默认行为，它不会是 _all 字段的一部分。

否则，如果您根本不需要特定类型的 _all 字段，您可以像这样禁用它，再次在您的映射中：

```
"person" : {
    "_all" : {"enabled" : false},
    "properties" : {
        "name" : {
            "type" : "string", "store" : "yes"
        }
    }
} 
```

当您禁用它时，您的字段仍将被单独索引，但您不会拥有 _all 提供的包罗万象的功能。然后，您将需要查询您的特定字段，而不是依赖 _all 特殊字段，就是这样。实际上，当您查询并且未指定字段时，elasticsearch 会在后台查询 _all 字段，除非您覆盖默认字段进行查询。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-09-19T14:51:06.273

每个字符串字段`index`在映射配置中都有参数，[默认为](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-core-types.html#string) `analyzed`. 这意味着除了 _all 字段之外，每个字段都被单独索引。

对于[_all 字段](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-all-field.html)，参考文献中说：

> 默认情况下，它已启用，并且所有字段都包含在其中以方便使用。

因此，要完全禁用您必须指定的字段的索引（如果启用了 _all 字段）：

```
 "mappings": {
        "your_mapping": {
            "properties": {
                "field_not_to_index": {
                    "type": "string",
                    "include_in_all": false,
                    "index": "no"
                }
            }
        }
    } 
```

对于应该查询是否将它们包含在 _all 字段中的字段（使用`"index": "no"`以节省资源），如果您通过 _all 字段进行查询，或者如果您对这些字段进行查询，则仅使用`index`具有任何正值（`analyzed`或`not_analyzed`）的参数并禁用_all 字段以节省资源。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-16T18:00:30.227

以下是了解弹性搜索中索引设置的重要文档页面 [http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/mapping-intro.html](http://www.elasticsearch.org/guide/en/elasticsearch/guide/current/mapping-intro.html)

对于您的问题，理想情况下，您应该在字段属性中将“索引”标志设置为 no。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-23T04:56:28.460

您可以利用`enabled`字段来禁用特定字段或整个映射。 [弹性搜索文档](https://www.elastic.co/guide/en/elasticsearch/reference/6.2/enabled.html)

禁用字段映射（即`session_data`字段）

```
{
  "mappings": {
    "_doc": {
      "properties": {
        "session_data": { 
          "enabled": false
        }
      }
    }
  }
} 
```

禁用整个映射

```
{
  "mappings": {
    "_doc": { 
      "enabled": false
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-08T09:44:15.410

将动态索引和 _all 索引设置为 false。在映射中指定必填字段。 [https://www.elastic.co/guide/en/elasticsearch/guide/current/dynamic-mapping.html](https://www.elastic.co/guide/en/elasticsearch/guide/current/dynamic-mapping.html)

```
{
   "mappings":{
      "candidates":{
         "_all":{
            "enabled":false
         },
          "dynamic": "false", 
         "properties":{
            "tags":{
               "type":"text"
            },
            "derivedAttributes":{
               "properties":{
                "city":{
                     "type":"text"
                  },
                  "zip5":{
                     "type":"keyword"
                  }
               }
            }
         }
      }
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-14T13:12:42.467

_all 自 6.0 起已被弃用。下面使用

```
"mappings": {
    "dynamic":"false",
    "properties": {
    "field_to_index":{"index": true, "type": "text"}
  } 
```

根据 es 文档

将 dynamic 设置为 false 根本不会改变 _source 字段的内容。_source 仍将包含您索引的整个 JSON 文档。但是，任何未知字段都不会添加到映射中并且不可搜索。

# rtc - 如何修复错误“另一个 rcp 应用程序正在此沙箱中运行”

> ID：13626619
> 
> 赞同：2
> 
> 时间：2012-11-29T13:12:54.093
> 
> 标签：rtc

当我尝试运行“scm load”时，我收到此错误：

> 另一个 rcp 应用程序正在此沙箱文件中运行，该文件锁定在文件 c:\workspaces\myworkspace

如何修复此错误？

我之前已经成功使用过 scm load 命令，所以也许我需要在加载工作区后执行一些“整理”，因为这只是在我更改工作区时发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:31:53.267

[该线程](https://jazz.net/forum/questions/94069/cannot-execute-scm-from-ant-build-script-while-rtc-is-running-message-is-another-rcp-application-is-running-in-this-sandbox-exit-code-27)总结了它：

> 两种可能的解决方案：
> 
> 1.  运行`lscm.bat`而不是“ `scm.exe`”进行签入
>     `lscm`将联系您的 RTC eclipse 客户端执行签入
> 2.  使用单独的沙箱和存储库工作区
>     用于`scm.exe`将存储库工作区加载到单独的沙箱（例如 c:\Workspaces\sandbox1）
>     *   更改该沙箱中的文件
>     *   用于`scm.exe`签入这些更改并交付它们

# c# - 使用 PdfDictionary 时出错

> ID：13626629
> 
> 赞同：0
> 
> 时间：2012-11-29T13:13:12.670
> 
> 标签：c#, visual-studio-2010, c#-4.0, itextsharp

我正在使用`PdfDictionary`并编写以下内容

```
PdfDictionary sv = new PdfDictionary();
sv["/Type"] = new PDFName("/SV");
sv["/Filter"] = new PDFName("Abc");
sv["/Ff"] = new PDFNumber(1);

signame.Dictionary["/SV"] = sv;
PDFArray arReasons = new PDFArray();
arReasons.Add(new PDFString(string.Format("CToken::{0}", customxml)));
arReasons.Add(new PDFString(reason));
v.Put(PdfName.arReasons); 
```

但它给了我以下错误搜索了很多但没有积极的结果

```
Error   1   Cannot apply indexing with [] to an expression of type 'iTextSharp.text.pdf.PdfDictionary'  C:\Users\lenovo\Dropbox\updated C# app\WindowsFormsApplication1\WindowsFormsApplication1\Form2.cs   134 17  WindowsFormsApplication1 
```

我得到的其他错误是： -

```
Error   9   'iTextSharp.text.pdf.PdfName' does not contain a definition for 'arReasons' C:\Users\lenovo\Dropbox\updated C# app\WindowsFormsApplication1\WindowsFormsApplication1\Form2.cs   145 32  WindowsFormsApplication1

Error   3   'string' does not contain a definition for 'Dictionary' and no extension method 'Dictionary' accepting a first argument of type 'string' could be found (are you missing a using directive or an assembly reference?)   C:\Users\lenovo\Dropbox\updated C# app\WindowsFormsApplication1\WindowsFormsApplication1\Form2.cs   141 25  WindowsFormsApplication1

Error   8   The name 'reason' does not exist in the current context C:\Users\lenovo\Dropbox\updated C# app\WindowsFormsApplication1\WindowsFormsApplication1\Form2.cs   144 45  WindowsFormsApplication1 
```

以防万一有人也帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:36:40.167

`PdfDictionary`键是`PdfName`对象，因此如果有索引运算符，则不能使用`string`. 由于`PdfDictionary`似乎没有实现索引运算符，因此您可以这样做：

```
PdfDictionary sv = new PdfDictionary();
sv.Put(PdfName.TYPE, PdfName.SV);
sv.Put(PdfName.FILTER, new PdfName("Abc"));
sv.Put(PdfName.FF, new PdfNumber(1)); 
```

请注意使用已设置为这些名称的静态成员，并且您不需要在任何名称字符串前加上“/”前缀。

另外，**请**确保检查输出的语法和语义。iTextSharp 不会为您执行此操作（据我所知），最终结果是损坏的 PDF，也许 Acrobat 会默默接受，但对所有其他 PDF 用户来说都是痛苦的。我以编写 PDF 工具为生，并经常质疑其他 PDF 制作者的父母的婚姻状况，当我看到缺少必需的键、空必需值、不可解析的日期时间字符串和字典中的名称为 //Foobar 而不是 /Foobar （仅举几个）。

# javascript - 在下划线模板中访问具有特殊字符的属性？

> ID：13626632
> 
> 赞同：0
> 
> 时间：2012-11-29T13:13:18.073
> 
> 标签：javascript, templates, backbone.js, underscore.js

我的模型具有带有特殊字符（从 Web 服务接收）的属性，我需要使用括号表示法来引用这些属性。有没有办法在渲染我的模板时引用这些属性`this.model.toJSON()`？我目前正在覆盖 toJSON 来映射它们。

**更新**，另一种可能是最好/最简单的方式：`$(this.el).html(this.template({ data: this.model.toJSON() }));`并使用`data['@invalid-property-#characters']`.

**更新**，示例模板：

```
<span><%= section_name %></span>
<span><%= @type %></span <!-- won't work -->
<span><%= data['@type'] %></span> <!-- works --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:11:27.313

1.  在模型中覆盖`toJSON`并以不同方式映射具有特殊字符的属性。
2.  范围变量以使用括号语法。`this.template({ scopedVariable: this.model.toJSON() })`并在模板中`<%= scopedVariable['@invalid-variable-#name'] %>`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-29T15:56:34.743

```
@type 
```

不是一个有效的 javascript 变量名，所以它不会工作。

编辑 ：

**除了更改您的属性名称之外，没有其他解决方案，**或者通过像您在问题中所做的那样传递一个对象来在变量中限定您的模型。这不仅仅是 javascript 的魔法，如果它不能在 javascript 中工作，它就不能在你的下划线模板中工作，**句号。**

# php - MySql AND 运算符针对单列（一列的两行之间的比较）

> ID：13626634
> 
> 赞同：-1
> 
> 时间：2012-11-29T13:13:23.587
> 
> 标签：php, mysql, sql

我一直在尝试执行此查询，但它不起作用。

如果有人提供帮助，将不胜感激；

```
SELECT DISTINCT(fld_tech_id) 
FROM tbl_tech_properties 
WHERE fld_tech_category_value_id = 236 
    AND fld_tech_category_value_id = 234 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:14:40.880

您的`WHERE`条件不可能匹配，因为它是针对表中的每一行进行测试的，并且没有单行可以同时`fld_tech_category_value_id`等于 234 和 236。相反，您应该按 fld_tech_id 分组并检查您的组是否包含两行。

```
SELECT fld_tech_id
FROM tbl_tech_properties
WHERE fld_tech_category_value_id IN (234, 236)
GROUP BY fld_tech_id
HAVING COUNT(DISTINCT fld_tech_category_value_id) = 2 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/5eabb/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:19:33.543

~~你为什么不直接使用~~

 ~~```
SELECT DISTINCT fld_tech_id
FROM tbl_tech_properties 
WHERE fld_tech_category_value_id IN (236,234) ; 
```~~ 

~~结果基于参考上的样本数据：~~

样品表：

```
FLD_TECH_ID     FLD_TECH_CATEGORY_VALUE_ID
1               234
2               256
3               236
3               250
2               226
3               216
1               240
1               236 
```

~~结果：~~

 ~~```
FLD_TECH_ID
1
3 
```~~ 

~~参考[SQLFIDDLE](http://sqlfiddle.com/#!2/03317/1)~~

一个有效的解决方案：

```
SELECT DISTINCT fld_tech_id
FROM tbl_tech_properties AS t
WHERE EXISTS
      ( SELECT *
        FROM tbl_tech_properties AS t1
        WHERE t1.fld_tech_id = t.fld_tech_id
          AND t1.fld_tech_category_value_id = 236
      )
  AND EXISTS
      ( SELECT *
        FROM tbl_tech_properties AS t2
        WHERE t2.fld_tech_id = t.fld_tech_id
          AND t2.fld_tech_category_value_id = 234
      )  ; 
```

参考**[SQL-Fiddle 测试 2](http://sqlfiddle.com/#!2/31ec1/2)**

# silverlight - Slider.Minimum 属性负值问题

> ID：13626636
> 
> 赞同：3
> 
> 时间：2012-11-29T13:13:27.610
> 
> 标签：silverlight, xaml, styles, slider, silverlight-5.0

可能我还有另一个无法解决的问题。在 Silverlight XAML 中，我无法`Style`为属性设置负值`Slider.Minimum`。我的意思是，这是可能的，但结果出乎意料。在 WPF 中，这确实可以正常工作。

```
<StackPanel Width="200" Orientation="Vertical">
    <StackPanel.Resources>
        <Style TargetType="Slider" x:Key="style">
            <Setter Property="Minimum" Value="-10" />
            <Setter Property="Maximum" Value="10" />
            <Setter Property="Value" Value="0" />
        </Style>
    </StackPanel.Resources>
    <!-- Here it is not working -->
    <Slider Style="{StaticResource style}"/>
    <!-- Here it works as expected, as it is not styled -->
    <Slider Minimum="-10" Maximum="10" Value="0" />
</StackPanel> 
```

结果是这样的：

![在此处输入图像描述](../Images/b4e828bd3f4e9b1e72c81fe5007c5dfe.png)

但显然两个拇指应该在同一个位置（在中间`Slider`）。

实际上，看起来`Minimum`值（-10）**被**接受了，但是`Maximum`值变成了 0，这就是为什么第一个滑块的拇指对齐到右侧（`Value`是 0，`Maximum`也是 0）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:13:15.653

问题是`HorizontalTemplate`滑块的。如果`Orientation`将 Slider更改为，`Vertical`则样式中定义的值将按预期应用。

**更新：** 解决方案是在样式中也设置方向。然后它按预期工作。

```
<Style TargetType="Slider" x:Key="style">
  <Setter Property="Minimum"
          Value="-10" />
  <Setter Property="Maximum"
          Value="10" />
  <Setter Property="Value"
          Value="0" />
  <Setter Property="Orientation"
          Value="Horizontal" />
 </Style> 
```

# wpf - 带有透明系统托盘的全屏图像

> ID：13626647
> 
> 赞同：0
> 
> 时间：2012-11-29T13:14:06.627
> 
> 标签：wpf, silverlight, windows-phone-7, system-tray

Windows Phone 7 中的搜索页面（必应搜索）很可爱；将整个区域用于一个不错的 piccy。系统栏是透明的，但图标仍然存在。

我似乎无法重现这种效果。

*   如果我在 LayoutRoot 上设置图像，它只会上升到系统托盘的底部。
*   如果我隐藏系统托盘，它总是隐藏的。
*   如果我让系统托盘背景透明，我可以通过它看到深色/浅色主题颜色（黑色或白色），这与 LayoutRoot 中的图像背景看起来很糟糕。
*   如果我尝试设置手机的背景：PhoneApplicationPage 没有任何反应。我试着设计这个，但不能让它工作。

如果 Windows Phone 7 大师可以在这里帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:53:09.390

尝试这个：

设置`d:DesignHeight="800"`and`Background="Transparent"`为`<phone:PhoneApplicationPage >`

然后对于ApplicationBar，

放`Mode="Minimized" BackgroundColor="Transparent"`

与 Bing 搜索页面中的几乎相似，但底部仍有一小块区域我无法覆盖。

# javascript - 这个 JavaScript 如何工作？

> ID：13626651
> 
> 赞同：1
> 
> 时间：2012-11-29T13:14:09.357
> 
> 标签：javascript, jquery, razor

当我使用时，此功能如何适用于所有文本框

`$('#date, #date2').blur(function () {`

但不是当我使用

`$('#date').blur(function () {`?

**MVC 查看器：**

```
@Html.TextBoxFor(x => x.ArrivalDateStart, new { id = "date" })
@Html.TextBoxFor(x => x.ArrivalDateEnd, new { id = "date" })
@Html.TextBoxFor(x => x.OtherDateEnd, new { id = "date" })
@Html.TextBoxFor(x => x.OtherDateEnd, new { id = "date" }) 
```

**Javascript：**

```
$(function () {
    $('#date, #date2').blur(function () {
        var date = $(this).val();
        var result = "";
        if (date.length === 8) {
            result = result += date.substring(0, 4) + "-" + date.substring(4, 6) + "-" + date.substring(6, 8);
            $(this).val(result);
            $(this).blur()
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T13:17:23.753

您的元素应该具有唯一的 ID。将其转换为类属性而不是 ID 属性：

```
@Html.TextBoxFor(x => x.ArrivalDateStart, new { @class = "date" }) 
```

并像这样选择它：

```
$('.date').blur(function () { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:18:33.997

首先，一个元素的 id 必须是唯一的，因此您不能只给`new { id = "date" }`所有元素。但是你可以给他们相同的类`new { @class = "date" }`名，当你将选择器更改为“.date”时，它应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:20:10.157

对于超过 1 个元素，您不能拥有相同的 id！如果您设置像 date1, date2, date3, ... 这样的 ID，您可以制作如下选择器：

```
$('textarea[id^="date"]') 
```

# c++ - “新（&变量）价值”是什么？在 C++ 中做什么？

> ID：13626653
> 
> 赞同：17
> 
> 时间：2012-11-29T13:14:12.673
> 
> 标签：c++, operators, new-operator

假设我在 C++ 程序中有以下代码：

```
Object a = Object(someParameters);
new (&a) Object(someOtherParameters); 
```

我的假设是它替换了`a`with的内容`Object(someOtherParameters)`，避免了可能`operator=`声明的 for `Object`。它是否正确？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-29T13:15:10.953

这称为[放置新](http://www.parashift.com/c++-faq/placement-new.html)。它在指定内存上调用构造函数，而不是分配新内存。请注意，在这种情况下，您必须在释放分配的内存之前显式调用对象的析构函数。

澄清。假设您分配了一些原始内存

```
char * rawMemory = new char [sizeof (Object)]; 
```

并且您想在该内存上构造一个对象。你打电话

```
new(rawMemory) Object(params); 
```

现在，在释放内存之前

```
delete [] rawMemory; 
```

您将不得不显式调用 Object 的 derstuctor

```
reinterpret_cast<Object*>(rawMemory)->~Object(); 
```

但是，在您的特定示例中，潜在的问题是您没有正确销毁现有对象，然后再在其内存中构建一个新对象。

**奖励：** 有没有想过标准如何`std::vector`在其包含的对象不被默认构造的情况下做到？原因是在大多数（如果不是全部的话）实现`allocator<T>`中不存储 a `T* p`，这将要求 T 在`p = new T[N]`. 相反，它存储一个`char`指针原始内存，并分配`p = new char[N*sizeof(T)]`. 当你`push_back`是一个对象时，它只是调用复制构造函数，并将 new 放置在该 char 数组中的适当地址上。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T13:16:52.483

它被称为**放置新**`Object`：它在括号内给出的地址处构造新的。放置 new 通常用于在原始内存中创建对象。像这段代码那样在现有对象之上构造一个新对象是个坏主意，因为它不会调用原始对象的析构函数。

# java - `if` 条件效率

> ID：13626659
> 
> 赞同：9
> 
> 时间：2012-11-29T13:14:34.077
> 
> 标签：java, performance

我正在努力提高`Java`程序的性能。在我改进了`data structures`算法的复杂性之后，我正在尝试改进实现。我想知道如何`if`在条件中使用语句是否真的很重要。

编译器是否将这两个版本视为相同？`if`它们的成本是否相同（如果语句中有更多变量）？

```
if(a && b && c && d && e && f && g) 
```

**或者**

```
if(a)
 if(b)
  if(c)
   if(d)
    if(e)
     if(f)
      if(g) 
```

（*在这个特定的项目中，我并不真正关心可读性，我知道第二个可读性较差*）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-29T13:16:59.883

`&&`运算符（以及`||`）是Java 中的短路运算符**。**

这意味着 if `a`is `false`，Java 不会计算`b`,`c`等`d`，因为它已经知道整个表达式`a && b && c && d && e && f && g`将是`false`。

`if`因此，将您的编写为一系列嵌套`if`语句没有任何收获。

优化性能的唯一好方法是使用分析器测量程序的性能，确定实际的性能瓶颈在哪里，并尝试改进这部分代码。通过检查代码和猜测进行优化，然后应用微优化，通常不是一种有效的优化方式。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-29T13:22:34.107

除了其他答案之外，即使在非常低的级别上，这两种方法也没有区别——它们被编译成相同的字节码：

```
boolean a=true, b=true, c=true, d=true, e=true, f=true, g=true;
   0: iconst_1
   1: istore_1
   2: iconst_1
   3: istore_2
   4: iconst_1
   5: istore_3
   6: iconst_1
   7: istore        4
   9: iconst_1
  10: istore        5
  12: iconst_1
  13: istore        6
  15: iconst_1
  16: istore        7

if(a && b && c && d && e && f && g) {}
  18: iload_1
  19: ifeq          45
  22: iload_2
  23: ifeq          45
  26: iload_3
  27: ifeq          45
  30: iload         4
  32: ifeq          45
  35: iload         5
  37: ifeq          45
  40: iload         6
  42: ifeq          45

if(a) if(b) if(c) if(d) if(e) if(f) if(g) {}
  45: iload_1
  46: ifeq          72
  49: iload_2
  50: ifeq          72
  53: iload_3
  54: ifeq          72
  57: iload         4
  59: ifeq          72
  62: iload         5
  64: ifeq          72
  67: iload         6
  69: ifeq          72 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-29T13:17:50.887

在分析用任何语言编写的程序时，不要关注语言结构，而要关注代码在做什么。为你的代码计时，找出时间花在哪里，然后你就会知道原因是什么，因为它会被缩小。

如果您知道程序的慢速部分在 if 语句中，那么您已经知道问题的答案。

我将其发布为答案，因为我认为出于优化目的而询问特定语言功能的效率是完全错误的方法，我相信您将从完全不同的策略中受益。

此外，某些实现可能会以不同的方式处理事情，因此除非标准中的某些东西是一成不变的（有时甚至不能保证），否则答案可能取决于实现，并且是有条件的。

# iphone - 如何在 IOS6 中旋转单个视图控制器

> ID：13626660
> 
> 赞同：5
> 
> 时间：2012-11-29T13:14:35.067
> 
> 标签：iphone, ios6

如何`ViewController`在 iPad 中旋转单曲**`ios6`**。我在

appdelegate.m

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

它使所有`viewcontroller`的肖像和我想要一个`viewcontroller`只在横向模式之间。

在graphViewController.m

```
- (BOOL)shouldAutorotate
{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
} 
```

但我无法得到正确的结果，请尽快回复。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:45:37.073

请参阅此链接[iOS6 发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

在 UIKit -> iOS 6 中 Autorotation 正在改变

> *“更多的责任正在转移到应用程序和应用程序代理身上。现在，iOS 容器（例如 UINavigationController）不会咨询他们的孩子来确定他们是否应该自动旋转。”*

shouldAutorotate 永远不会在另一个控制器（例如 UINavigationController）内的任何 UIViewController 中调用（在 iOS6 中）。

您应该使用 UINavigationController 的 shouldAutorotate 方法（如果您使用一个）来确定显示哪个孩子并强制给定方向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:44:30.263

在要旋转的 viewController 中使用此方法，而不是在 app delegate.m 中

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

因为在下面的方法中，您正在旋转窗口，这就是它为整个应用程序更改的原因。

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

# c++ - Microsoft 等效的 WebkitGTK hovering-over-link 信号

> ID：13626668
> 
> 赞同：0
> 
> 时间：2012-11-29T13:14:55.523
> 
> 标签：c++, browser, mshtml, iwebbrowser2

每次在 Linux 和 Windows 上都有鼠标悬停事件时，我需要添加捕获事件的能力。在 Linux 中，我很容易连接到[hovering-over-link](http://webkitgtk.org/reference/webkitgtk/stable/WebKitWebFrame.html#WebKitWebFrame-hovering-over-link)信号。我似乎找不到 Windows 等效项。搜了google，查了MSDN，没找到。

Windows 中有这样的功能吗？如果没有，有没有办法实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T21:28:06.940

您可以使用[StatusTextChange](http://msdn.microsoft.com/en-us/library/aa768349%28v=vs.85%29.aspx)事件吗？当鼠标悬停在链接上时会触发此事件，并`sText`设置为链接 URL。它还会触发其他消息，例如在加载页面时。在这些情况下，`sText`设置为“连接到（URL）”、“等待（URL）”等。这些消息可以通过对`sText`.

一个更复杂的方法是在[DocumentComplete事件中使用](http://msdn.microsoft.com/en-us/library/aa768282%28v=vs.85%29.aspx)[getElementsByTagName](http://msdn.microsoft.com/en-us/library/aa752545%28v=vs.85%29.aspx)搜索所有锚元素并附加到[HTMLAnchorEvents onmouseover](http://msdn.microsoft.com/en-us/library/aa769816%28v=vs.85%29.aspx)。这当然不适用于页面加载后动态创建的锚元素。

# python - 如何访问整个应用程序中的变量/对象？

> ID：13626672
> 
> 赞同：1
> 
> 时间：2012-11-29T13:15:12.263
> 
> 标签：python, plugins, importerror

我正在开发一个 PyQT 应用程序。该应用程序能够从数据库中加载一些数据，然后对这些数据进行各种分析。所有这些都有效。但由于分析可能相当复杂，并且不是唯一的用户，我不得不开发一个用户定义脚本的系统。基本上，有一个文本编辑器，用户可以在其中编写自己的小型 python 脚本（带有函数）。然后用户可以通过将文件加载为模块（在应用程序内）来保存或执行脚本。

在这里，有我的应用程序的简化版本。

应用程序的核心位于 My_apps.py 中，插件位于同一文件夹中，即 Plugin_A.py

这是 My_apps.py 的代码：

```
import sys,os

class Analysis(object):
    def __init__(self):
        print "I'm the core of the application, I do some analysis etc..."

    def Analyze_Stuff(self):
        self.Amplitudes_1=[1,2,3,1,2,3]
class Plugins(object):

    def __init__(self):
        newpath = "C:\Users\Antoine.Valera.NEUROSECRETION\Desktop\Model" #where the file is
        sys.path.append(newpath)

        Plugin_List=[]
        for module in os.listdir(newpath):
            if os.path.splitext(module)[1] == ".py":
                module=module.replace(".py","")
                Plugin_List.append(module)   

        for plugin in Plugin_List:
            a=__import__(plugin)
            setattr(self,plugin,a)

    def Execute_a_Plugin(self):
        Plugins.Plugin_A.External_Function(self)

if __name__ == "__main__":

    Analysis=Analysis()
    Plugins=Plugins()
    Plugins.Execute_a_Plugin() 
```

这是 Plugin_A.py 的代码示例

```
def External_Function(self):
    Analysis.Analyze_Stuff()
    print Analysis.Amplitudes_1 
```

为什么我会得到：

```
Traceback (most recent call last):
  File "C:\Users\Antoine.Valera.NEUROSECRETION\Desktop\Model\My_Apps.py", line 46, in <module>
    Plugins.Execute_a_Plugin()
  File "C:\Users\Antoine.Valera.NEUROSECRETION\Desktop\Model\My_Apps.py", line 37, in Execute_a_Plugin
    Plugins.Plugin_A.External_Function(self)
  File "C:\Users\Antoine.Valera.NEUROSECRETION\Desktop\Model\Plugin_A.py", line 8, in External_Function
    Analysis.Analyze_Stuff()
NameError: global name 'Analysis' is not defined 
```

但是如果我添加以下两行而不是`Plugins.Execute_a_Plugin()`

```
Analysis.Analyze_Stuff()
print Analysis.Amplitudes_1 
```

然后，它起作用了。

我如何向每个动态加载的插件表明他必须使用 Analysis 中已经存在的变量/对象？为什么我不能从插件中打印 Analysis.Amplitudes_1？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:23:34.787

您必须导入您的模块。在 Plugin_A.py 上添加以下内容

```
from My_apps import Analysis

A = Analysis()
A.Analyze_Stuff()
print A.Amplitudes_1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:44:52.670

`Plugin_A`错误消息似乎非常清楚：您导入的模块的名称空间中不存在名称“分析” ，因此`External_Function`无法访问它。

导入`Plugin_A`模块时，它无法访问导入模块命名空间中的名称，`My_apps`. 所以它不能“看到”`Analysis`你在那里创建的类的实例。

一个简单的解决方案是更改`External_Function`（和其他相关函数）的签名，以便它可以获取`Analysis`类的实例：

*`Plugin_A.py`*：

```
def External_Function(self, analysis):
    analysis.Analyze_Stuff()
    print analysis.Amplitudes_1 
```

*`My_apps.py`*：

```
 ...

   def Execute_a_Plugin(self):
       plugins.Plugin_A.External_Function(self, analysis)

if __name__ == "__main__":

    analysis = Analysis()
    plugins = Plugins()
    plugins.Execute_a_Plugin() 
```

请注意，我已经更改了命名，以便实例名称不会影响类名称。

# php - 带有页面 URL 的 PHP 通知

> ID：13626676
> 
> 赞同：-2
> 
> 时间：2012-11-29T13:15:34.067
> 
> 标签：php, error-handling

我在日志中收到了许多 PHP 通知，但我想知道发生了什么页面 URL 通知，我如何记录这些信息？

```
[29-Nov-2012 13:58:29] PHP Notice:  Array to string conversion in /usr/home/sdf/data/www/sdfsdf.com/core/test.php on line 156 
```

我想记录任何信息，当收到通知时，如何记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:19:48.820

尝试将 php 错误日志中的时间戳与您的 Web 服务器访问日志相关联。

或者，您可以tail -f 日志并触发随机页面。

或者，设置自定义错误处理程序来记录各种数据。

[http://php.net/manual/en/function.set-error-handler.php](http://php.net/manual/en/function.set-error-handler.php)

```
function myErrorHandler( $errno, $errstr, $errfile, $errline ){

    if (!(error_reporting() & $errno)) {
        // This error code is not included in error_reporting
        return;
    }

    switch ($errno) {
    case E_USER_ERROR:
        echo "<b>My ERROR</b> [$errno] $errstr<br />\n";
        echo "  Fatal error on line $errline in file $errfile";
        echo ", PHP " . PHP_VERSION . " (" . PHP_OS . ")<br />\n";
        echo "Aborting...<br />\n";
        exit(1);
        break;

    case E_USER_WARNING:
        echo "<b>My WARNING</b> [$errno] $errstr<br />\n";
        break;

    case E_USER_NOTICE:
        echo "<b>My NOTICE</b> [$errno] $errstr<br />\n";
        break;

    default:
        echo "Unknown error type: [$errno] $errstr<br />\n";
        break;
    }

    /* Don't execute PHP internal error handler */
    return true;

}

set_error_handler( "myErrorHandler" ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:17:32.097

您需要设置一些东西来捕获发生的错误/调试信息，但不要向全世界展示。不确定您是否在此应用程序中内置了会话管理，但您可能希望为此练习添加一些基本控件。

如果您使用包含在多个页面上的功能，有时更难追踪错误。该错误可能看起来发生在父页面上，但实际上是在函数中触发的，该函数包含在另一个页面上。在这种情况下，错误行号可能会产生误导。

如果您遇到无法立即隔离的间歇性错误，则可能有助于获得有关脚本中正在发生的事情的一些反馈。这是一个关于如何在函数中进行一些基本调试的粗略示例：

```
function get_func_argNames($funcName) 
{
    $f = new ReflectionFunction($funcName);
    $result = array();
    foreach ($f->getParameters() as $param) 
    {
        $result[] = $param->name;
    }
    return $result;
}

function myCoolFunction($arg1, $arg2, $arg3)
{

    $debug = false;

    $php_function_args  = implode(', ',get_func_argNames(__FUNCTION__));

    $_debug_txt = "<b><span style='color:blue;'>function</span> <span style='color:darkblue;'>" .__FUNCTION__. "</span></b>($php_function_args)";

    if ($debug)
    {
        EmailAppDev($_debug_txt);
    }

        // myCoolFunction
        $x = $arg1 + $arg2 + $arg3;
        return $x

 } 
```

理想情况下，您将拥有一个可以控制为谁启用 $debug 的会话帐户。

如果您不使用函数，则需要在脚本的战略区域中设置类似的内容，以找出问题的时间和地点。

如果没有查看整个应用程序，很难给出细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:24:47.983

您可以做的是将您的 php 通知时间与您的网络服务器访问日志进行比较，以找出导致该通知的 URL。

该通知实际上看起来并不依赖于 URL。它表明，您正在尝试将“类型”数组转换为字符串，当您执行以下操作时会发生这种情况：

```
$array = array( 'foo', 'bar' );

echo $array;
$string = 'test' . $array;
printf ( 'foo %s', $array ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T13:25:57.500

*要特别*查找此错误，您可以这样做以找出问题所在（包括使用 打印回溯`debug_backtrace`）：

```
if (is_string($var)) {
    //Then it's OK - do whatever you were doing on line 156
} else {
    //Something's wrong! Let's log it to some file!
    ob_start();
    var_dump($var);
    print_r(debug_backtrace());
    echo "\n----------------------------------------------\n";
    $debugContent = ob_get_clean();

    $logHandle = fopen("wrong_var_type.log", "a");
    if ($logHandle !== false) {
        fwrite($logHandle, $debugContent . "\n");
    }
    @fclose($logHandle);
} 
```

或者，使用记录器：

[https://stackoverflow.com/a/10800296/247893](https://stackoverflow.com/a/10800296/247893)

# php - PHPExcel：如何检查 XLS 文件是否有效？

> ID：13626678
> 
> 赞同：3
> 
> 时间：2012-11-29T13:15:38.760
> 
> 标签：php, phpexcel

我`PHPExcel 1.7.8`用来读取`.xls`由随机用户上传的文件。使用有效文件一切正常`.xls`，但现在我想用无效文件进行一些测试，以检查程序是否显示良好的错误消息。

所以我拿了一个`.csv`文件，并将其重命名为`.xls`（不转换任何内容，只是更改名称）到最后，只是为了检查......
坏了！:)

```
DOM ELEMENT: HTML
DOM ELEMENT: BODY
DOM ELEMENT: P
START OF PARAGRAPH: 
END OF PARAGRAPH:
FLUSH CELL: A1 => block,date,hour...

array
  1 =>
    array
      'A' => string  'block,date,hour...' (length=2777)

{"step":"error","errors":[],"warnings":[]} 
```

如您所见，显示了一条错误消息，我没有要求，然后是我通常编写的 JSON。

它发生在这一行：

```
<?php
echo "Loading file\n";
try {
    if (!($objPHPExcel = PHPExcel_IOFactory::load('path'))) {
        echo "Failed\n";
        return;
        // ...
    }
} catch(Exception $e) {
    echo 'Exception !';
}
echo "Done\n"; 
```

这段代码显示：

```
Loading file
/!\ ERROR MESSAGE ABOVE /!\
Done 
```

我的问题是，在我尝试解析文件之前，有没有办法使用 PHPExcel 或其他任何方法来**检查文件是否是有效的 XLS 文件？**

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-23T09:04:46.663

即使是一年多的问题，我仍然觉得弄清楚如何处理这个问题很麻烦，我会尝试在这里发布我的答案。

如果使用 try/catch 块不起作用*（在我的情况下，我将 jpg 文件重命名为 xls 并且错误处理程序不起作用，而不是抛出错误，无效文件只会抛出警告）*，您可以考虑手动检查`canRead()`正如马克所说，这是一个如何使用这个功能的例子。

如果你知道你的文件类型是什么，你可以手动定义它并检查它们：

```
$valid = false;
$types = array('Excel2007', 'Excel5');
foreach ($types as $type) {
    $reader = PHPExcel_IOFactory::createReader($type);
    if ($reader->canRead($file_path)) {
        $valid = true;
        break;
    }
}

if ($valid) {
  // TODO: load file
  // e.g. PHPExcel_IOFactory::load($file_path)
} else {
  // TODO: show error message
} 
```

希望这可以帮助任何有同样问题的人。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-29T13:25:03.557

PHPExcel 中的每个阅读器都有一个 canRead() 方法，用于验证传入读取的文件是否具有适合该阅读器的格式 - 该方法返回一个简单的布尔值 True 或 False。从调用 PHPExcel_Reader_Excel5 类的 canRead() 方法返回 True 将确认该文件可以被该阅读器读取，而与文件扩展名无关。

IOFactory identify() 方法使用此调用，依次针对每种支持的格式对 Readers 进行测试，直到它从 canRead() 调用中获得真正的返回。IOFactory load() 方法又使用 identify() 来确定应将哪个 Reader 用于指定文件。

当您想为阅读器设置其他参数时，验证文件类型的能力（不依赖于通常会误导的文件扩展名）特别有用。

从 identify()/load() 的回退稍微不太令人满意：如果 canRead() 对所有其他读取器返回 false，则文件被视为 CSV。

# validation - 验证自动完成文本框（请回复）

> ID：13626681
> 
> 赞同：1
> 
> 时间：2012-11-29T13:15:48.387
> 
> 标签：validation, autocomplete

我已经在文本框中实现了自动完成功能。

**代码：**

```
//AutoComplete the textbox having userSearch class.
function AutoComplete() {
//Autocomplete added to the textbox.
$('.userSearch').autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "CTC.aspx/GetMemberName",
            data: "{ 'prefixText': '" + request.term + "' }",
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            success: function (data) {
                response(data.d);
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert('Error occured while autocomplete');
            }
        });
    },
    minLength: 1,
    change: function (event, ui) { SaveData($(this).attr('id')); }
});
} 
```

它工作正常。

但我想限制用户，以便他必须从建议列表中选择一个选项。

所以最后不需要一个验证函数来正确或不插入数据。

请帮忙

有什么方法可以约束用户只从建议的列表中选择？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:21:44.757

试试这个

```
change: function (event, ui) {
        if (!ui.item) {
            //Not selected from the list
        }
        SaveData($(this).attr('id'));
    } 
```

# google-app-engine - 如何在 Google App Engine 中检测实体是否没有属性（不是模型）

> ID：13626685
> 
> 赞同：0
> 
> 时间：2012-11-29T13:15:59.093
> 
> 标签：google-app-engine, google-cloud-datastore

我运行了这个查询：

```
 restaurantTable = RestaurantTable.all().filter('restaurant', restaurantKey)
    .filter('prepaymentPerReservable', None)
    .get() 
```

它没有给出任何结果，因为所有 RestaurantTable 都没有 prepaymentPerReservable（新添加到 db.Model）。

我也在相同的数据上运行了这个查询：

```
 restaurantTables = RestaurantTable.all().filter('restaurant', restaurantKey)
  hasField = [x.key().id() for x in restaurantTables if x.prepaymentPerReservable == None] 
```

它给出了 4 个结果（4 个实体没有 prepaymentPerReservable）并且 x.prepaymentPerReservable == None 是有效的。

问题是，如果 x.prepaymentPerReservable == None 对于这两种情况始终为真，我如何检测实体没有字段或字段没有值？

# jquery - html拖放不规则形状

> ID：13626689
> 
> 赞同：0
> 
> 时间：2012-11-29T13:16:11.393
> 
> 标签：jquery, html, drag-and-drop, png

是否可以有可拖动元素和 droptarget 元素，它们是图像并且其边框是不规则形状？

例如，如果我想要一个星形，当你将鼠标悬停在它上面时会触发一个 jQuery 事件，并且你可以将它拖到另一个星形中，这可能吗？

如果我将其绘制为透明 png 并使用 IMG 标签或带有背景图像的 div，那么显然我将拖动一个方形元素。我在想答案可能在于图像映射或 SVG？

我宁愿将它们放在 HTML Canvas 中，因为我希望这些元素本身仍然是 HTML 元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:44:20.443

我的猜测是，在您的情况下，透明 png 作为背景图像方法就足够了。对于大多数拖放交互，可拖动项目和目标之间的任何数量的交集都应该足以触发拖放。期望用户进行精确匹配很可能会导致糟糕的用户体验。

可能值得查看 jqueryui 的拖放功能（如果您还没有这样做）并探索`snapMode`and`snapTolerance`选项（请参阅[文档](http://api.jqueryui.com/draggable/#option-snapTolerance)）。

**更新：**

SVG 可能是最好的解决方案。您可以查看其中一个 SVG 库来处理绘制形状的繁重工作。[Raphael](http://raphaeljs.com/)还内置了对拖放的支持（请参见[此处](http://raphaeljs.com/reference.html#Element.drag)的示例）。

只是一个想法，但问题的更低保真解决方案可能只是在用户开始拖动交互时将拖动的元素置于光标下的中心（`cursorAt`选项`jqueryui.draggable`将允许您这样做）。如果用户在非活动区域上单击，该元素将捕捉，因此它在光标下方居中（参见[fiddle](http://jsfiddle.net/chkKn/)）。即使对于相对较大的形状，这看起来也可以接受（至少在我看来）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:23:38.657

一个简单的选择是使用图像地图元素为您的 png 提供可定位区域。

例如

```
<img class="shape" usemap="#shapeMap" border="0">
<map name="shapeMap">
    <area class="a" shape="polygon" coords="19,44,45,11,87,37,82,76,49,98">
    <area class="b" shape="rect" coords="140,132,241,179">
    <area class="c" shape="circle" coords="100,100,35">
</map> 
```

完整示例：http: [//jsfiddle.net/66YsR/](http://jsfiddle.net/66YsR/)

# php - 将自定义 HTTP 标头传递给 RESTful 请求

> ID：13626691
> 
> 赞同：5
> 
> 时间：2012-11-29T13:16:17.977
> 
> 标签：php, rest, backbone.js, yii

我正在尝试将 Backbone 集成到 Yii 中，因此我需要 REST。所以我安装了一个 Yii 扩展，[*restfullyii*](http://www.yiiframework.com/extension/restfullyii/)，它使用需要传递给请求的用户名和密码。问题是我不知道如何使用 Backbone 来做到这一点。

通缉请求示例：

```
List
curl -i -H "Accept: application/json" -H "X_REST_USERNAME: admin@restuser" -H "X_REST_PASSWORD: admin@Access" http://yii-tester.local/api/sample/    
curl -i -H "Accept: application/json" -H "X_REST_USERNAME: admin@restuser" -H "X_REST_PASSWORD: admin@Access" http://yii-tester.local/api/sample/limit/1
curl -i -H "Accept: application/json" -H "X_REST_USERNAME: admin@restuser" -H "X_REST_PASSWORD: admin@Access" http://yii-tester.local/api/sample/limit/10/5 (limit/offeset) 
```

当前的错误响应，这完全有道理..：

```
{
    "success": false,
    "message": "You are not authorized to proform this action.",
    "data": {"errorCode":500}
} 
```

有谁知道如何在整个 Backbone 中发送这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:31:12.173

Backbone 将其 XHR 请求委托给 jQuery/Zepto，这就是您必须修改的内容。

最简单的解决方案可能是通过`$.ajaxSetup`和[headers 选项提供默认选项](http://api.jquery.com/jQuery.ajax/)

> **标头（添加 1.5）**
> 默认值：{}
> 
> 与请求一起发送的附加标头键/值对的映射。此设置在调用 beforeSend 函数之前设置；因此，headers 设置中的任何值都可以在 beforeSend 函数中被覆盖。

你可以这样设置：

```
$.ajaxSetup({
    headers:{
        X_REST_USERNAME: "admin@restuser",
        X_REST_PASSWORD: "admin@Access"
    }
}); 
```

发送的每个请求都将具有自定义标头。见[http://jsfiddle.net/nikoshr/j5Rr4/](http://jsfiddle.net/nikoshr/j5Rr4/)

或者你可以为每个请求传递额外的选项，Backbone 会将它们转发给 jQuery：

```
var m = new Backbone.Model();   
m.fetch({
    headers:{
        X_REST_USERNAME: "admin@restuser",
        X_REST_PASSWORD: "admin@Access"
    }
}); 
```

[http://jsfiddle.net/nikoshr/j5Rr4/2/](http://jsfiddle.net/nikoshr/j5Rr4/2/)

最后，您可以覆盖 Backbone.sync 为每个请求添加标头：

```
Backbone.realsync = Backbone.sync;
Backbone.sync = function(method, model, options) {
    options || (options = {});
    options.headers = {
        X_REST_USERNAME: "admin@restuser",
        X_REST_PASSWORD: "admin@Access"
    };

    return Backbone.realsync.call(model, method, model, options);
};

var m = new Backbone.Model();
m.fetch(); 
```

[http://jsfiddle.net/nikoshr/j5Rr4/4/](http://jsfiddle.net/nikoshr/j5Rr4/4/)

# oracle - 如何解决 Trigger 和 raise_error 输出

> ID：13626696
> 
> 赞同：0
> 
> 时间：2012-11-29T13:16:40.960
> 
> 标签：oracle, plsql, triggers

以下触发是停止重复预订房间并为预约提供替代房间。我在展示房间时遇到了问题。你能告诉我哪里出错了吗？

```
CREATE OR REPLACE TRIGGER CHECK_APPOINTMENT 
BEFORE INSERT OR UPDATE OF APP_DATE,C_NO,
RM_NO,APP_TIME ON APPOINTMENT
FOR EACH ROW

DECLARE

  CURSOR C_APP                   
  IS
  SELECT APP_DATE,C_NO,APP_TIME,RM_NO    
    FROM APPOINTMENT;

  V_APP_DATE APPOINTMENT.APP_DATE%TYPE;  
  V_APP_TIME APPOINTMENT.APP_TIME%TYPE;
  V_C_NO APPOINTMENT.C_NO%TYPE;
  V_RM_NO APPOINTMENT.RM_NO%TYPE;
  I_RM_NO APPOINTMENT.RM_NO%TYPE;
  RM_BKED_ERROR EXCEPTION;           

BEGIN
  OPEN C_APP;                    
  FETCH C_APP INTO V_APP_DATE,V_C_NO,V_APP_TIME,V_RM_NO; 

  IF :NEW.C_NO=V_C_NO           
 AND:NEW.RM_NO=V_RM_NO          
 AND:NEW.APP_DATE=V_APP_DATE         
 AND:NEW.APP_TIME=V_APP_TIME         
 THEN 
   RAISE RM_BKED_ERROR;      
 END IF;    

 SELECT R.RM_NO 
   INTO I_RM_NO
   FROM ROOM R,BRANCH B 
  WHERE R.RM_NO <> :NEW.RM_NO 
   AND B.BRN_NO = :NEW.BRN_NO
   AND B.BRN_NO=R.BRN_NO
 GROUP BY R.RM_NO;

EXCEPTION
  WHEN RM_BKED_ERROR THEN            
    Raise_Application_error (-20000, 'ROOM ALREADY BOOKED FOR AN APPOINTMENT.THE FOLLOWING ROOMS ARE AVAILABLE '||I_RM_NO); 
    CLOSE C_APP;
END;
 / 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:34:52.790

这看起来不像是一个正确的方法，因为触发器在执行约束方面是出了*名*的差。

我会采用以下方法之一：

1.  将预约代码封装在一个过程中，该过程首先获得对任何表中的房间记录的排他锁。然后它可以检查预约表中的重叠记录，如果所需的时间段是空闲的，则插入并提交。返回一个代码以指示预订成功或不成功，如果不成功，可能还有其他可用房间的列表（并提交或回滚以释放房间桌锁）。由于房间不可用并不是一个意外情况，我不会为此使用异常处理。

2.  创建一个单独的表，其中每个房间最小预订周期（例如 15 分钟）有一行，房间和间隔标识符具有唯一键。使用该密钥冲突来通知预订不成功，但与第一种方法类似，不要将异常传递回应用程序。

# java - iText 2.1.7 中的 PdfStamper 是否存在错误？

> ID：13626698
> 
> 赞同：1
> 
> 时间：2012-11-29T13:16:52.350
> 
> 标签：java, pdf, itext

我正在尝试在我的应用程序中使用 iText 2.1.7。我通过问题确定了以下代码：

```
InputStream inputFile = ...
OutputStream outputStream = ...
PdfReader pdfReader = new PdfReader(fis);
PdfStamper pdfStamper = new PdfStamper(pdfReader, os, '0', true);

pdfStamper.close();
pdfReader.close();
outputStream .close(); 
```

[当我使用此](http://www.finanse.mf.gov.pl/documents/766655/1481810/PIT-37%2817%29_v1-0E_2012.pdf)pdf （这是波兰税收表格）作为输入时，此代码会产生损坏的 pdf（错误 118 ）。你知道这个问题是否有一些简单的解决方法？我知道 c#/iTextSharp 中的相应代码有效。

**编辑：**这不是加密的问题。我已经解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:05:01.567

*如评论所述，相关文档已加密以限制权限。因此，来自官方 iText 2.1.7 jar 的代码将在实例化 PdfStamper 时抛出 BadPasswordException，因为未提供正确的密码。因此，它不会产生损坏的 PDF，因此这里的问题**不是错误。**;)*

话虽如此，当然可以强制 iText 2.1.7 忽略未提供密码的事实。在这种情况下，程序（在必要时更正了变量名）确实会生成一个 PDF，Adobe Acrobat 拒绝打开该 PDF，显示错误代码 118。

另一方面，对当前的 iText 5.x 执行相同操作会生成一个文档，Adobe Acrobat 可以毫无异议地打开该文档。

如果比较这两个输出，问题就会变得清晰。而在 iText 2.1.7 的情况下，更新后的信息字典如下所示：

```
16 0 obj
<<
/Creator(ADEP Document Services … Designer 10.0)
/Producer(Adobe LiveCycle Forms ES3; modified using iText 2.1.7 by 1T3XT)
/schemat(http://crd.gov.pl/wzor/2011/12/19/732/)
/Title(PIT-37)
/wersja_schemy(1-0E)
/ModDate(D:20121129153659+01'00')
/Subject(þÿ Z e z n a n i e   o   w y s o k o[ c i   o s i g n i t e g o   d o c h o d u \( p o n i e s i o n e j   s t r a t y \)   p r z e z   p o d a t n i k a   p o d a t k u   d o c h o d o w e g o   o d   o s ó b   f i z y c z n y c h)
/wariant(17)
/Author(Ministerstwo Finansów)
/CreationDate(D:20120816122649+02'00')
>>
endobj 
```

当前的 iText 5.x 看起来像这样：

```
16 0 obj
<<
/Creator(Ìû±d\\‘0Ú¼U´N°4@è4÷¤&‚ŸWŠÖsW¦ïôeå¿ê¹@aC<M¹^\t¯p; Um­…‡&amp;U$“)
/Producer(Ìû±d\\‘0Ú¼U´NSH<š¶CìœhMÙg6\(@+C“rxó3% èúáž#„~îí$´Ñ\rEÿ\){â®ø×ÇMõÒ”/k«'T“…Ô»6D±Šàûèq}=_]YùèM»Lõ‡!õØûÚ©'é+t#Väò¿ÃSVõñý)
/schemat(Ìû±d\\‘0Ú¼U´N„hÙÚújñÂð\)÷Lsg—¥oÏ0<Á@õ5/•X6úJ!–nÈÒvU‚nð)
/Title(Ìû±d\\‘0Ú¼U´NÅÎéÈ€Ã3 ÅpC„¡H)
/wersja_schemy(Ìû±d\\‘0Ú¼U´NAÞ&·4ul‰¡b‘Œó)
/ModDate(Ìû±d\\‘0Ú¼U´NÏbZk£&"!õH³Î¨l\f6\)¥+¥ûcoûÒ\rÕ8˜Í)
/Subject(Ìû±d\\‘0Ú¼U´N:¡Ž”"Ø˜í¹~KŸpS†ÑŽäQ%”ýãtõÌt\t‚Ý3t\r9Ñ}#M …O¦\nqWóm: íÑ;A“GÝ.mÐÔéÔ]Ùn“Æ¼ä°'0%±@ \rÞªeé¶T<“¾./ýÂA"ÆRvoo€‚—Ý{?Ü“Nö\r¼¨]üv•¯y©Tˆ aÂŸ?"y°à¡ÀaÂÛ”ÄR’rèŽêKD•M6{Ä£t´é¾ù|%¬ƒÒˆM….’Ëð½˜B‡lÆ³¤+¦Š¹ôTÝ^å¤=‹BAO‚Ø€°úÌ±æj9_!#÷h‡5)
/wariant(Ìû±d\\‘0Ú¼U´N6©BÛâ`Ì¡k‹Ô &lt;½`)
/Author(Ìû±d\\‘0Ú¼U´NŒ’×,ïZ2ä¡Åöwìœ­?bjÃô‚w|éUÆÐ±)
/CreationDate(Ìû±d\\‘0Ú¼U´N'·¬‡jHÎâÃë&šZ¦Ñ.U©ü«s¾½Ý;2¸Q)
>>
endobj 
```

因此，iText 2.1.7 没有对更新的信息字典的条目进行加密，并且 Adob​​e Acrobat 在尝试对其进行解密时被打断了。

**编辑**

不幸的是，即使在将未加密的信息字典分开之后，尝试加载文件时也会出现 118。因此再次查看文件还有另一个区别：iText 2.1.7 创建的版本包含一个微小的对象流，而另一个版本没有。尝试读取该对象流时，iText 本身会绊倒......

# javascript - YUI 3：如何让原生 DOM 元素包裹在 Node 中？

> ID：13626705
> 
> 赞同：6
> 
> 时间：2012-11-29T13:17:06.873
> 
> 标签：javascript, yui, yui3

我使用这种简单的技术在 jQuery 中获取原生 DOM 元素：

```
var el = $('#myid');
var native = el[0];  //or el.get(0); 
```

如何在 YUI 3 中做到这一点？例如，我想使用`getElementsByName`YUI 3 不支持的 DOM 方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T13:26:08.223

```
var el = Y.one("#myid");
var native = el.getDOMNode(); 
```

如果你不能确定 '#myid' 在 DOM 中，那么你应该首先检查 null。YUI 的 .one 不像在 jQuery 中那样链接。

```
var el = Y.one("#myid"), native;
if (el !== null) {
    native = el.getDOMNode();
} 
```

# dart - 将字符串列表写入文件

> ID：13626709
> 
> 赞同：1
> 
> 时间：2012-11-29T13:17:24.410
> 
> 标签：dart

从[API page](http://api.dartlang.org/docs/bleeding_edge/dart_io/File.html)，我收集到我正在尝试做的事情没有功能。我想从将文本存储为字符串列表的文件中读取文本，操作文本并保存文件。第一部分很容易使用该功能：

```
abstract List<String> readAsLinesSync([Encoding encoding = Encoding.UTF_8]) 
```

但是，没有让我将列表的内容直接写入文件的功能，例如

```
abstract void writeAsLinesSync(List<String> contents, [Encoding encoding = Encoding.UTF_8, FileMode mode = FileMode.WRITE]) 
```

相反，我一直在使用：

```
abstract void writeAsStringSync(String contents, [Encoding encoding = Encoding.UTF_8, FileMode mode = FileMode.WRITE]) 
```

通过将列表减少为单个字符串。我确信我也可以使用 for 循环并逐行输入流。我想知道两件事：

1.  有没有办法只把文件交给一个字符串列表来写？
2.  为什么有 readAsLinesSync 但没有 writeAsLinesSync？这是疏忽还是设计决定？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T16:05:25.047

我刚刚创建了自己的导出类来处理对文件的写入或将数据发送到 websocket。

用法：

```
exportToWeb(mapOrList, 'local', 8080);
exportToFile(mapOrList, 'local/data/data.txt'); 
```

班级：

```
//Save data to a file.
void exportToFile(var data, String filename) =>
    new _Export(data).toFile(filename);

//Send data to a websocket.
void exportToWeb(var data, String host, int port) =>
    new _Export(data).toWeb(host, port);

class _Export {

  HashMap mapData;
  List listData;
  bool isMap = false;
  bool isComplex = false;

  _Export(var data) {
    // Check is input is List of Map data structure.
    if (data.runtimeType == HashMap) {
      isMap = true;
      mapData = data;
    } else if (data.runtimeType == List) {
      listData = data;
      if (data.every((element) => element is Complex)) {
        isComplex = true;
      }
    } else {
      throw new ArgumentError("input data is not valid.");
    }
  }

  // Save to a file using an IOSink.  Handles Map, List and List<Complex>.   
  void toFile(String filename) {
    List<String> tokens = filename.split(new RegExp(r'\.(?=[^.]+$)'));
    if (tokens.length == 1) tokens.add('txt');
    if (isMap) {
      mapData.forEach((k, v) {
        File fileHandle = new File('${tokens[0]}_k$k.${tokens[1]}');
        IOSink dataFile = fileHandle.openWrite();
        for (var i = 0; i < mapData[k].length; i++) {
          dataFile.write('${mapData[k][i].real}\t'
              '${mapData[k][i].imag}\n');
        }
        dataFile.close();
      });
    } else {
      File fileHandle = new File('${tokens[0]}_data.${tokens[1]}');
      IOSink dataFile = fileHandle.openWrite();
      if (isComplex) {
        for (var i = 0; i < listData.length; i++) {
          listData[i] = listData[i].cround2;
          dataFile.write("${listData[i].real}\t${listData[i].imag}\n");
        }
      } else {
        for (var i = 0; i < listData.length; i++) {
          dataFile.write('${listData[i]}\n');
        }
      }
      dataFile.close();
    }
  }

  // Set up a websocket to send data to a client.
  void toWeb(String host, int port) {
    //connect with ws://localhost:8080/ws
    //for echo - http://www.websocket.org/echo.html
    if (host == 'local') host = '127.0.0.1';
    HttpServer.bind(host, port).then((server) {
      server.transform(new WebSocketTransformer()).listen((WebSocket webSocket) {
        webSocket.listen((message) {
          var msg = json.parse(message);
          print("Received the following message: \n"
                "${msg["request"]}\n${msg["date"]}");
            if (isMap) {
              webSocket.send(json.stringify(mapData));
            } else {
              if (isComplex) {
                List real = new List(listData.length);
                List imag = new List(listData.length);
                for (var i = 0; i < listData.length; i++) {
                  listData[i] = listData[i].cround2;
                  real[i] = listData[i].real;
                  imag[i] = listData[i].imag;
                }
                webSocket.send(json.stringify({"real": real, "imag": imag}));
              } else {
                webSocket.send(json.stringify({"real": listData, "imag": null}));
              }
            }
        },
        onDone: () {
            print('Connection closed by client: Status - ${webSocket.closeCode}'
                ' : Reason - ${webSocket.closeReason}');
            server.close();
        });
      });
    });
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T14:17:27.173

我问过Mads Ages这件事。他在 io 模块上工作。他说他决定不添加 writeAsLines，因为他觉得它没有用。一方面，编写 for 循环很简单，另一方面，您必须将其参数化为您想要使用的行分隔符类型。他说，如果有强烈的感觉它很有价值，他可以添加它。他并没有立即看到其中的很多价值。

# android - Android中的触摸线画

> ID：13626710
> 
> 赞同：0
> 
> 时间：2012-11-29T13:17:26.463
> 
> 标签：android, xml, button, transparency

我想在触摸时画线，屏幕应该是透明的。

```
public class Draw extends Activity implements OnTouchListener

{

    DrawPanel drawPanel;

    private ArrayList<Path> pointsToDraw = new ArrayList<Path>();

    private Paint mPaint;

    Path path;

    @Override

    public void onCreate(Bundle savedInstanceState)

    {

        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);

        setContentView(R.layout.activity_draw);

        drawPanel = new DrawPanel(this); 

        drawPanel.setOnTouchListener(this);

        mPaint = new Paint();

        mPaint.setDither(true);

        mPaint.setColor(Color.RED);

        mPaint.setStyle(Paint.Style.STROKE);

        mPaint.setStrokeJoin(Paint.Join.ROUND);

        mPaint.setStrokeCap(Paint.Cap.ROUND);

        mPaint.setStrokeWidth(10);

        FrameLayout framelayout = new FrameLayout(this);  

        framelayout.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,      LayoutParams.FILL_PARENT));  

        framelayout.addView(drawPanel);  

        setContentView(framelayout);  

    }

    @Override

    protected void onPause()

    {

        super.onPause();

        drawPanel.pause();

    }

    @Override

    protected void onResume()

    {

        super.onResume();

        drawPanel.resume();

    }   

    @Override

    public boolean onTouch(View arg0, MotionEvent arg1)

    {

        synchronized(pointsToDraw)

        {

                    if(arg1.getAction() == MotionEvent.ACTION_DOWN)

                    {

                        path = new Path();

                        path.moveTo(arg1.getX(), arg1.getY()); 

                        pointsToDraw.add(path);

                        path.lineTo(arg1.getX()+1, arg1.getY()+1);

                    }

                    else if(arg1.getAction() == MotionEvent.ACTION_MOVE)

                    {

                        path.lineTo(arg1.getX(), arg1.getY());

                    }

                    else if(arg1.getAction() == MotionEvent.ACTION_UP)

                    {

                        //path.lineTo(arg1.getX()+2, arg1.getY()+2);

                    }

                }       

                return true;

    }

    public class DrawPanel extends SurfaceView implements Runnable

    {

        Thread thread = null;

        SurfaceHolder holder;

        boolean isItOk = false ;

        public DrawPanel(Context context)

        {

            super(context);

            holder = getHolder();

            holder.setFormat(PixelFormat.TRANSPARENT);

        }

        public void run()

        {

            while( isItOk == true){

                if(!holder.getSurface().isValid()){

                    continue;

                }

                Canvas c = holder.lockCanvas();

                c.drawARGB(0, 0, 0, 0);

                onDraw(c);

                holder.unlockCanvasAndPost(c);

            }

        }

        @Override

        protected void onDraw(Canvas canvas)

        {

            super.onDraw(canvas);

            synchronized(pointsToDraw)

            {

                for (Path path : pointsToDraw)

                {

                canvas.drawPath(path, mPaint);

                }

            }

        }

        public void pause()

        {

            isItOk = false;

            while(true)

            {

                try

                {

                                thread.join();

                }

                catch(InterruptedException e)

                {

                    e.printStackTrace();

                }

                break;

            }

            thread = null;

        }

        public void resume()

        {

            isItOk = true;  

            thread = new Thread(this);

            thread.start();

        }

    }

} 
```

使用此代码，我得到了预期的结果。但现在的问题是当我使用 xml 放置一个按钮时，我看不到该按钮。

我想在按下按钮时清除屏幕。所以当主题是半透明的时候请帮我看看按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:39:28.923

我不认为它可能是因为`LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)`。你可以试试`LayoutParams(LayoutParams.FILL_PARENT,300)`。否则，您可以添加一个**menuitem**而不是**button**。

# android - 如何在另一个活动中设置一个活动的视图

> ID：13626711
> 
> 赞同：0
> 
> 时间：2012-11-29T13:17:29.083
> 
> 标签：android, android-activity

在我的应用程序中，我有一个带有所有屏幕通用图标的标题，当应用程序启动时它处于不可见模式......还有适配器，它在列表视图中包含我的所有结果......当用户单击列表视图时，会出现一个登录屏幕，当用户登录成功标题中的图标应该可见..我花了几个小时寻找如何在登录成功时使图标可见

```
public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.fyelogin);                    
            etPassword = (EditText)findViewById(R.id.password);
            btnLogin = (Button)findViewById(R.id.login_button);
            btnCancel = (Button)findViewById(R.id.cancel_button);
            lblResult = (TextView)findViewById(R.id.result);

            final ImageView details = (ImageView)findViewById(R.id.red); 

            btnLogin.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                    String password = etPassword.getText().toString();

                    if(password.equals("guest")){
                        lblResult.setText("password successful.");

              City.isIconvisible= false;

                    } else {
                        lblResult.setText("password doesn't match.");

                    }                                      
                    finish();}}); 
```

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:31:43.533

如果您的应用程序具有用户操作或全局导航，您可以开始使用[`ActionBar`](http://developer.android.com/guide/topics/ui/actionbar.html)作为标题。如果您的应用程序将涵盖旧版本，我建议使用名为[`ActionBarSherlock`](http://actionbarsherlock.com/).

因此，您应该创建一个抽象活动，并且您的所有活动都应该扩展它。因此，当您不希望操作栏可见时，只需使用 hide() 函数（例如：）`getActionBar().hide()`。

# c - 小型 C 代码优化（黑客）：今天没用？

> ID：13626713
> 
> 赞同：2
> 
> 时间：2012-11-29T13:17:36.063
> 
> 标签：c, compiler-optimization

20 年前，（几乎）没有任何编译器优化。因此，我们开始使用一些技巧，例如：

1.  使用指针，而不是数组索引。
2.  不要使用小函数（如`swap()`），使用宏或直接编写代码。

今天，我们有复杂的编译器优化。数组索引和指针是相同的。如果我们使用`-O3`（我知道，这很危险），编译器将删除除`main()`.

那么，旧书（*Programming Pearls*、*The C Programming Language*）中的小技巧在今天没有用了吗？他们只是让代码更难读？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T13:30:04.920

*Programming Pearls*是关于*算法*级别的优化，而不是*代码*级别的优化，因此它在今天仍然具有高度相关性。

但是，代码微优化是另一回事，许多旧技巧现在要么是多余的，要么是有害的。今天仍有一​​些重要的技术可以应用于性能关键代码，但这些技术在未来的某个时候也可能变得多余/有害。你需要跟上 CPU 微架构和编译器技术的最新进展，并且只使用合适的东西（当然，只有在绝对需要的时候——过早的优化是万恶之源。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:04:58.617

“使用指针，而不是数组索引。”

这从未像现在这样高效。甚至[ANSI-C 的旧草案也](http://flash-gordon.me.uk/ansi.c.txt)指定它们是等价的：

> 3.3.2.1 数组下标
> 
> 下标运算符[]的定义是E1[E2]等同于(*(E1+(E2)))

“不要使用小函数（比如swap()），使用宏或者直接写代码。”

这已经过时了很长一段时间。C99 引入了**inline**关键字，但在此之前，编译器可以自由地内联部分代码。出于效率原因，今天编写这种类似函数的宏是没有意义的。

“那么，旧书（Programming Pearls, The C Programming Language）中的小技巧在今天毫无用处？它们只是让代码更难读？”

*请*注意，以下只是我的个人观点，并非世界程序员社区的共识：我个人认为这两本书不仅无用，而且有害。与其说是因为各种优化技巧，不如说是因为可怕的、不可读的编码风格以及对定义不明确的行为的严重依赖。这两本书也充满了错误和错别字，所以如果没有勘误表，你甚至无法阅读它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:38:33.220

基本上，是的。但是，如果您确实发现了一个错过优化机会的特别荒谬的例子，那么您应该向开发人员报告！

Braindead 源代码总是会产生 Braindead 机器代码：在某种程度上，编译器仍然必须按照*您所说*的，而不是按照*您的意思*去做，尽管许多常见的习语都被识别和“固定”（规则是它必须不使用调试器就不可能知道它已被更改）。

还有一些新的和旧的技巧，至少在某些架构上是有用的。

例如，如果您有一个从 0 计数到 100 的循环并对数组执行某些操作，则某些编译器可能会反转计数器并使其从 100 降至零（因为与零进行比较比与另一个常数进行比较便宜），但是如果你循环有副作用，他们就不能这样做。如果您不关心副作用以相反的顺序发生，那么如果您自己反转计数器，您可以获得更好的代码。

GCC 的另一个有用技巧是`__builtin_expect(expr, bool)`，您可以使用它告诉编译器`expr`可能是`true`or `false`，因此它可以相应地优化分支。同样，`__builtin_unreachable()`可以告诉 GCC 某事不可能发生，因此它不必考虑它发生的情况。

不过总的来说，编译器已经足够好了，除非你的程序将 90% 的运行时间花在那个小函数上，否则你真的不需要关心。（例如，`memcpy`仍然通常用汇编程序编写）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T13:24:09.767

如果您因任何原因不允许打开优化，这些技巧仍然很有用。有时编译器也无法优化代码，因为他不知道某段代码的预期和意外副作用。

这真的取决于你有什么要求。根据我的经验，您仍然可以以更好的方式表达一些东西，以使编译器更好地理解您的意图。为了获得更好的编译结果，牺牲可读性总是一种权衡。

# google-chrome - 模块加载超时：domReady!_unnormalized2

> ID：13626715
> 
> 赞同：0
> 
> 时间：2012-11-29T13:17:38.080
> 
> 标签：google-chrome, requirejs, domready

你如何解释这个错误？

> 未捕获的错误：模块加载超时：domReady!_unnormalized2,domReady!_unnormalized3,domReady!

我正在使用 requirejs 2.1.2 和 domReady 2.0.1。它并不总是发生，而且显然只在 Chrome 中（在 IE 和 firefox 中工作正常）。

我增加了默认加载时间：

> 需要.config({ waitSeconds: 90 });

但它一直失败。

有任何想法吗？我将不胜感激任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T11:42:10.200

RequireJS 将等待给定`require()`调用完成的标准时间量；它允许一些时间来下载相关文件。使用`domReady!`时， require 调用被迫等待，直到 DOM 准备好，这可能比 require 愿意等待的时间更长 - 导致您提到的错误。

理想情况下，DOM 不会花很长时间准备好，因为这本身就是用户体验的问题，但如果确实如此，我相信我们将不得不避免`domReady!`依赖。

# php - 如何从 facebook pageTab 获取 appId

> ID：13626723
> 
> 赞同：0
> 
> 时间：2012-11-29T13:18:02.103
> 
> 标签：php, facebook

我在 facebook 中创建了一个页面标签应用程序，其网址如下： http: [//www.facebook.com/PageName/app_123456789](http://www.facebook.com/PageName/app_123456789)

有没有办法从 iframe 中检索应用程序的 ID（= 123456789）？

facebook 文档提到了“signed_request”参数，但它不包含此信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:25:59.870

如果你的意思是编程，那么 $facebook->appId 就可以了。base_facebook.php 有一个名为 function getAppId() 的获取函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:26:19.420

如果您创建了应用程序，您不应该已经知道应用程序 ID 吗？然后，您可以将其放入您的代码中。它不像它会改变。

否则，您可以使用 PHP 或 JavaScript 来获取浏览器的 URL。 [获取 PHP 中的完整 URL](https://stackoverflow.com/questions/6768793/php-get-the-full-url)

您可能想用 JS [来获取 PHP 中 iframe 的父 url](https://stackoverflow.com/questions/3724969/get-the-parent-url-of-iframe-in-php)

# qt - 为树莓派构建 Qt 库时出错

> ID：13626726
> 
> 赞同：11
> 
> 时间：2012-11-29T13:18:07.230
> 
> 标签：qt, compiler-errors, makefile, cross-compiling, qt5

我正在尝试为我的 RPI 编译 Qt 5 库，但它总是崩溃。

这些是我试图遵循的指南：

[http://qt-project.org/wiki/RaspberryPi_Beginners_guide](http://qt-project.org/wiki/RaspberryPi_Beginners_guide)
[http://qt-project.org/wiki/RaspberryPi](http://qt-project.org/wiki/RaspberryPi)

我已经根据指南下载了交叉编译器和 sysroot-image，并从 git repo 中提取了 Qt5 源代码。

在遵循其中一个指南之后，我现在被困在`make`.

这是我收到的错误：

```
.obj/release-shared/qlibrary_unix.o: In function `QLibraryPrivate::load_sys()':
qlibrary_unix.cpp:(.text+0xf84): warning: Using 'dlopen' in statically linked applications requires at runtime the shared libraries from the glibc version used for linking
/home/esa/qtonpi/rpi_image/usr/lib/arm-linux-gnueabihf/libdl.a(dlopen.o): In function `dlopen':
(.text+0xc): undefined reference to `__dlopen'
/home/esa/qtonpi/rpi_image/usr/lib/arm-linux-gnueabihf/libdl.a(dlclose.o): In function `dlclose':
(.text+0x0): undefined reference to `__dlclose'
/home/esa/qtonpi/rpi_image/usr/lib/arm-linux-gnueabihf/libdl.a(dlsym.o): In function `dlsym':
(.text+0xc): undefined reference to `__dlsym'
/home/esa/qtonpi/rpi_image/usr/lib/arm-linux-gnueabihf/libdl.a(dlerror.o): In function `dlerror':
(.text+0x0): undefined reference to `__dlerror'
/home/esa/qtonpi/rpi_image/usr/lib/arm-linux-gnueabihf/libm.a(feholdexcpt.o): In function `feholdexcept':
(.text+0x48): undefined reference to `_dl_hwcap'
/home/esa/qtonpi/rpi_image/usr/lib/arm-linux-gnueabihf/libm.a(fesetenv.o): In function `fesetenv':
(.text+0x64): undefined reference to `_dl_hwcap'
collect2: virhe: ld:n paluuarvo oli 1                                           # collect2: error: ld returnvalue was 1
make[2]: *** [../../lib/libQt5Core.so.5.0.0] Virhe 1                            # Error 1
make[2]: Poistutaan hakemistosta "/home/esa/qtonpi/qt5/qtbase/src/corelib"      # Leaving directory
make[1]: *** [sub-corelib-make_first] Virhe 2                                   # Error 2
make[1]: Poistutaan hakemistosta "/home/esa/qtonpi/qt5/qtbase/src"              # Leaving directory
make: *** [sub-src-make_first] Virhe 2                                          # Error 2 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T13:31:21.830

修复 sysroot 中库的路径。一些库是指向绝对路径的符号链接，这些符号链接在放置在系统中时会被破坏。检查类似 /home/esa/qtonpi/rpi_image/usr/lib/arm-linux-gnueabihf/libdl.so 或类似的东西。您应该看到那些指向绝对路径的已损坏符号链接。修复所有这些。在您报告的文件中，为此目的提供了一个脚本。你运行它了吗（[https://gitorious.org/cross-compile-tools/cross-compile-tools/blobs/master/fixQualifiedLibraryPaths](https://gitorious.org/cross-compile-tools/cross-compile-tools/blobs/master/fixQualifiedLibraryPaths)）？

如果您仍然遇到麻烦，也请尝试检查一下[：](http://thebugfreeblog.blogspot.it/2012/11/bring-up-qt-50-on-raspberry-pi.html)我写了一些注释，从 git 编译最新版本的 wheezy 图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-21T08:25:52.667

对于那些尝试了现有答案但没有奏效的人的答案：

`/usr/lib/`您下载的 Raspbian 映像可能在文件夹中不包含 libdl 和 libdm 的符号链接。

在这种情况下， fixQualifiedLibraryPaths 无法帮助您，因为它找不到符号链接。复制`libdl.so`也`libm.so`可能会失败，例如，如果您使用闪存驱动器从现有的 Raspberry Pi 复制数据，它不会将它们复制为符号链接，而是会复制库本身。但是，要使构建成功，似乎需要符号链接。

我查看了Raspberry Pi 文件夹中的内容`libdl`和指向`libdm``/usr/lib/`

```
cd /usr/lib/arm-linux-gnueabihf/
ls -l libld.so libm.so 
```

对找到的文件执行相同的操作，直到它们不再是符号链接而是普通文件。

在我的系统上，事实证明它们被调用`libdl-2.13.so`并`libm-2.13.so`驻留在`/lib/arm-linux-gnueabihf/`而不是`/usr/lib/...`

回到我的电脑，我在文件夹中找到了这些确切的`/lib/arm-linux-gnueabihf/`文件（如果你没有找到它们，你可以从你的 Raspberry Pi 复制它们）。所以我在`/usr/lib/arm-linux-gnueabihf/`文件夹中为它们创建了符号链接：

```
sudo ln -s /lib/arm-linux-gnueabihf/libdl-2.13.so /usr/lib/arm-linux-gnueabihf/libdl.so
sudo ln -s /lib/arm-linux-gnueabihf/libm-2.13.so /usr/lib/arm-linux-gnueabihf/libm.so 
```

至此，qtbase就编译成功了。

> （请注意，为了继续从 Qt 进行交叉编译，您必须将 SD 卡的映像安装在您的 PC 上（如[指南中所述](http://wiki.qt.io/RaspberryPi_Beginners_Guide#Troubleshooting)），但这还不够：您必须在启动 Qt 之前安装它创作者）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-18T16:20:40.087

试试这个

```
ln -s /mnt/raspberry-rootfs/lib/arm-linux-gnueabihf /lib/ 
```

`Pi`基本上，当链接上的so文件时，似乎已经指定了绝对路径`(/lib/)`，因此`/mnt/raspberry-rootfs`它们被破坏了。

将 Pi 链接`/lib/arm-linux-gnueabihf`到 Pc 的`/lib`目录可以修复错误的链接并允许 QT 编译。这是一个肮脏的把戏，但它有效。

如果没有`libdl/ libm`，`Pi`则需要将 SD 卡插回`Pi`，启动并安装它们。显然，您需要从 SD 卡在 PC 上创建一个新映像并将其安装在`/mnt/raspberry-rootfs`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-25T12:13:59.447

这可能是因为本地目录中缺少`libdl.so`and （只有and ）。从 Raspberry Pi 复制这两个文件应该可以使编译成功。`libm.so``rootfs/usr/lib/arm-linux-gnueabihf``libdl.a``libm.a`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-04T12:25:36.323

而不是 fixQualifiedLibraryPaths 使用：

```
cd <folder-with-sysroot-subfolder>
wget https://raw.githubusercontent.com/riscv/riscv-poky/master/script/sysroot-relativelinks.py
chmod +x sysroot-relativelinks.py
./sysroot-relativelinks.py sysroot 
```

# python - 在 Python 中使用字典替换字符串中的字符

> ID：13626728
> 
> 赞同：3
> 
> 时间：2012-11-29T13:18:11.613
> 
> 标签：python, dictionary, replace, character

我已经使用字典研究了字符替换，但我仍然无法让我的代码正常工作。我的代码是这样的：

```
def encode(code,msg):  
    for k in code:  
        msg = msg.replace(k,code[k])  
    return msg 
```

现在，当我运行代码时：

```
code = {'e':'x','x':'e'}
msg = "Jimi Hendrix"
encode(code,msg) 
```

它给了我“Jimi Hxndrix”而不是“Jimi Hxndrie”。如何将字母“x”也替换为“e”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T13:25:38.283

您可以查看`str.translate`或执行以下操作：

```
''.join(code.get(ch, ch) for ch in msg) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:25:32.367

使用`maketrans`和`translate`：

```
from string import maketrans
msg.translate(maketrans(''.join(code.keys()), ''.join(code.values()))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:46:02.453

```
 python 3.2
     use your own code it is ok.

     def encode(code,msg):  
                for k in code:  
                       msg = msg.replace(k,code[k],1)  
                return msg

       ##  str.replace(old,new,[,count])
      so when you loop in your code = {'e':'x','x':'e'}
      first it gets the key "x" then the key "e" because dict is not ordered
      so,  "Hendrix" turns into "Hendrie" then "Hendrie" turns into Hxndrix and
     you are not having your result. but if you add 1 in your code
      msg.replace(k,code[k],1) then it only will replace one letter per loop and you                                    
      have your result Try. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T13:28:10.783

问题是您迭代**代码**而不是**msg**

**对msg**进行迭代是 Jon Clements 的程序中所做的，可以更明确地写为

```
print ''.join(code[ch] if ch in code else ch for ch in msg) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T13:28:20.950

你正在交换 x 和 e；它正在覆盖您以前的编辑。

您应该从旧字符串复制到新字符串（或者更确切地说，是一个字符数组，因为正如 Kalle 指出的那样，字符串是“不可变的”/不可编辑的），这样您就不会覆盖已经替换的字符：

```
def encode(code, message):
    encoded = [c for c in message]
    for i, c in enumerate(message):
        try:
            encoded[i] = code[c]
        except KeyError:
            pass
    return ''.join(encoded) 
```

其他答案是执行类似操作的库函数，但它们没有解释你哪里出错了。

# gwt-2.4 - 从 gwt2.4.0 升级到 gwt2.5.0 出现异常

> ID：13626729
> 
> 赞同：1
> 
> 时间：2012-11-29T13:18:12.620
> 
> 标签：gwt-2.4, gwt-2.5

我有一个应用程序，我已从 gwt2.4.0 更新到 gwt2.5.0。当我运行应用程序时，会看到以下异常。

> ```
> 18:34:25.338 [ERROR] [OneViewUI] Errors in 'jar:file:/C:/Users/srapolu/.m2/repository/com/google/gwt/gwt-user/2.5.0/gwt-user-2.5.0.jar!/com/google/gwt/core/client/GWT.java'
>  18:34:25.391 [ERROR] [OneViewUI] Line 276: The method setBridge(GWTBridge) in the type GWT is not applicable for the 
> ```
> 
> 论据（GWTBridge）

你能帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T12:12:20.230

我遇到了同样的问题。事实证明，我对 2.4 版本的 gwt-dev.jar 有一些参考。确保你没有，然后再试一次。

# android - 可绘制限定符，位图在 Android 4+ 的 HTC 屏幕旋转后未正确更改

> ID：13626732
> 
> 赞同：1
> 
> 时间：2012-11-29T13:18:19.577
> 
> 标签：android, rotation, drawable, htc-android

我在 HTC Sensation 和 HTC One S 上的 drawables 有问题。

我在 drawable-nodpi 文件夹中有图形：

```
icon_l.png
icon_m.png 
```

在 drawable-hdpi 文件夹中，我有带有代码的文件 icon.xml：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/icon_l" /> 
```

在 drawable-land-hdpi 文件夹中，我有带有代码的文件 icon.xml：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/icon_m" /> 
```

在可绘制文件夹中，我有选择器文件 button.xml 和代码：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_pressed="true" android:drawable="@drawable/icon_pressed" />
  <item android:drawable="@drawable/icon" />
</selector> 
```

在布局中我有：

```
<ImageButton android:src="@drawable/button"/> 
```

在几乎所有手机和平板电脑上一切正常：横向图形更小，当我回到纵向图形时又更大；

但不是 HTC sense 和 HTC one S：当我旋转手机时，这款手机上的图形会随机加载。

我想这可能是任何缓存？我尝试将 setContentView 设置为其他布局并再次重新加载正确的布局，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:55:22.360

我能够在运行股票 ICS Android 的 Sensation 上复制此行为。到目前为止，我发现的唯一解决方法是在每个 HDPI 文件夹中放置一个额外的 button.xml 副本。

# c++ - 在标题中定义 cv::Mat 后跟另一个 Mat 避免了多个通道

> ID：13626736
> 
> 赞同：1
> 
> 时间：2012-11-29T13:18:37.943
> 
> 标签：c++, memory-management, opencv

我刚刚遇到了一个奇怪的问题。在我的班级的标题中，我定义了多个`cv::Mat`这样的：
`cv::Mat drawing, img_grad, img_bright, img_cov;` （ver1）
`cv::Mat drawing, img_grad, img_bright, img_cov, img_notused;`（ver2）

然后在代码中，我将 img_cov 定义如下：
`img_cov = Mat::zeros( somemat.size(), CV_32FC(6) )`
奇怪的是，如果我将另一个 Mat 添加到我的多个 Mats 的标头声明（参见上面的 ver2）中，即使`img_notused`它从未使用过，我也无法访问任何其他我比 0 的频道。`img_cov`访问例如 via`img_cov.at<float>( j, i, 1)`会导致崩溃。

似乎是一个mermoy分配的事情。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T14:53:30.420

您使用错误的命令来访问图像值（它应该在早些时候崩溃，也许您在发布模式下编译......）。

您的行应如下所示：

```
typedef Vec<6,float> Vec6f;
Vec6f pixel = img_cov.at<Vec6f>(i,j); 
float value_you_look_for = pixel[1]; // note that 1 means the second channel of 6. 
```

因为`CV_32FC(6)`表示一个 6 通道矩阵，通道`float`中有值。

供您参考：[链接到特定文档](http://docs.opencv.org/doc/user_guide/ug_mat.html#accessing-pixel-intensity-values)

# unix - 在 Makefile 的 vcs 选项中包含目录

> ID：13626737
> 
> 赞同：-1
> 
> 时间：2012-11-29T13:18:39.723
> 
> 标签：unix, makefile, system-verilog

我正在制作一个 makefile 让我给你快速查看

vcs 是工具，`+incdir+<dir_path>`是语法

当我做`+incdir+${$@_${seed}}`它不工作

`${seed}`是我在 makefile 开始时定义的变量

问候， 维奈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:19:52.740

找到了应该的解决方案`+incdir+{$@_${seed}} ...`

# iphone - 一个班级的吸气剂？

> ID：13626741
> 
> 赞同：1
> 
> 时间：2012-11-29T13:18:46.650
> 
> 标签：iphone, ios, ipad, block

我正在一个将成为一个块的类上创建一个属性。

它被定义为

```
@property (nonatomic, strong) void (^ myBlock)(); 
```

我想懒惰地创建该属性，因此我想为该块创建一个吸气剂，以便在某些代码使用该属性时运行。

如果属性不是块并且是 NSArray 例如，我会像这样执行设置器：

```
@synthesize myProperty = _myProperty;

- (NSArray *)myProperty {

    if (_myProperty) {
        _myProperty = [[NSArray alloc] init];
    }

    return _myProperty;
} 
```

如何为作为块的属性执行 getter（延迟实例化）？

注意：这个块在一个单例中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:41:31.897

```
@property (nonatomic, copy) void (^ myBlock)();

- (void (^)())myBlock {
    if (!_myBlock) {
        self.myBlock = ^ () {
            NSLog(@"Do something");
        };
    }
    return _myBlock;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:44:00.133

在小时

```
typedef BOOL (^MyProcessorBlock)(id param1);

@property (nonatomic, copy) MyProcessorBlock myBlockProperty 
```

以 m 为单位（如果您使用旧的 objc pre 2.0，pre summer 2012）

```
@synthesize myBlockProperty = _myBlockProperty; 
```

无论如何在m文件中

```
- (MyBlock)myBlockProperty {
    if(!_myBlockProperty) {
        _myBlockProperty = ^(self) { ..... };
    }
    return _myBlockProperty;
} 
```

# c# - Bloomberglp.Blpapi.Session 上的 EventDispatcher 有什么用？

> ID：13626744
> 
> 赞同：3
> 
> 时间：2012-11-29T13:19:00.403
> 
> 标签：c#, .net, session, bloomberg, event-dispatching

`Bloomberglp.Blpapi.Session`有一个如下所示的构造函数：

```
public Session(SessionOptions, Bloomberglp.Blpapi.EventHandler, EventDispatcher); 
```

该类`EventDispatcher`如下所示：

```
public sealed class EventDispatcher
{
    public bool Start();
    public void Stop();
    public void Stop(EventDispatcher.StopOption stopOption);
    public void DispatcherThread();
    public int NumActiveThreads { get; }
    public enum StopOption { SYNC, ASYNC }
} 
```

在代码中，我像这样使用它：

```
Session session = new Session(sessionOptions, someEventHandler.Handle, new EventDispatcher(2)); 
```

我是否正确理解这一点，这只是告诉`Session`实例使用`dispatcher`事件发生时将 委托`Event`给提供的`someEventHandler.Handle(Event, Session)`方法？

`Start();` `Stop();`和`DispatcherThread()`方法是干什么用的？

任何地方都没有记录，`EventDispatcher`所以也许有人对此有一些经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:50:40.403

假设您可以访问彭博终端，您应该咨询彭博帮助台。

基本上，您所做的不是“推荐”的方法——即教程中演示的方法。在这种方法中，您可以简单地使用：

```
Session session = new Session(sessionOptions); 
```

但听起来你已经得到了文件......那你为什么要尝试使用你自己的文件`EventDispatcher`呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T12:30:47.557

您可以使用所需数量的线程手动创建它的目的，`EvevtDispather`然后您可以根据需要传递它`Session`。他们都将使用您的 dispather 来处理事件。否则，每个 new`Session`都将使用一个线程在内部创建自己的事件调度程序。因此，如果您有大量非密集会话，明智的决定是只为它们创建一个事件干扰器。

# android - 旋转后保留视图 ID

> ID：13626745
> 
> 赞同：0
> 
> 时间：2012-11-29T13:19:01.333
> 
> 标签：android, listview, android-asynctask, screen-orientation, android-progressbar

我需要在屏幕旋转后保存 id。（安卓 3.2+）。详细信息：在清单中：

```
android:configChanges="orientation|screenSize" 
```

在活动中：

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    // TODO Auto-generated method stub
    super.onConfigurationChanged(newConfig);
    initializeAnimation(true);
    if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
        refreshView(true);
    } else if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        refreshView(false);
    }
} 
```

refreshView 方法从其他类中获取 ListView 的集合或 GridView 的集合并放入 ViewFlipper。用户可以在 List 或 Grid 视图中触摸元素，然后在 AsyncTask 和所选元素上显示的进度条上开始下载。

模型：

```
public List<ListView> getListViews(Context c) {
    listViews.clear();
    Iterator<List<Map<String, String>>> iter = arr.iterator();
    while (iter.hasNext()) {
        SimpleAdapter a = new SimpleAdapter(c, iter.next(), R.layout.vertical_list_view_item, new String[] { MONTH, IMAGE, DESCRIPTION}, new int[] { R.id.txtMonthV , R.id.imgV, R.id.txtDecriptionV});
        ListView lv = new ListView(c);
        lv.setDivider(null);
        lv.setDividerHeight(0);
        lv.setAdapter(a);
        listViews.add(lv);
    }
    return listViews;
}

public List<GridView> getGridViews(Context c){
    List<GridView> gridViews = new ArrayList<GridView>();
    Iterator<List<Map<String, String>>> iter = arr.iterator();
    while (iter.hasNext()) {
        SimpleAdapter a = new SimpleAdapter(c, iter.next(), R.layout.horizontal_list_view_item , new String[] { MONTH, IMAGE/*, DESCRIPTION*/}, new int[] { R.id.txtMonthH, R.id.imgH/*, R.id.txtDescriptionH*/ });
        GridView gv = new GridView(c);
        gv.setHorizontalSpacing(15);
        gv.setVerticalSpacing(15);
        gv.setNumColumns(6);
        gv.setAdapter(a);
        gridViews.add(gv);
    }

    return gridViews;       
} 
```

控制器：

```
public View currentView;

public View getCurrentPressedView(){
    return currentView;
}

public void setCurrentPressedView(View v){
    currentView = v;
}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    if (arg0 instanceof ListView) {
        /*....*/
        setCurrentPressedView(arg1);
        //Start download here
    } else if (arg0 instanceof GridView) {
        /*...*/
        setCurrentPressedView(arg1);
        //Start download here
    }
} 
```

在异步任务中：

```
View view;
ProgressBar proBar;
@Override
    protected void onPreExecute() {
        super.onPreExecute();
        view = getCurrentPressedView();
        proBar = (ProgressBar) view.findViewById(R.id.progress);
        proBar.setVisibility(View.VISIBLE);
///.....
@Override
    protected void onProgressUpdate(Integer... values) {
        mProDialog.setProgress(values[0]);
        proBar.setVisibility(View.VISIBLE); 
        super.onProgressUpdate(values);
    } 
```

在vertical_list_view_item 和horizo​​ntal_list_view_item 中，进度条具有相同的ID。但是当屏幕旋转时，id 改变了，我无法控制进度条。有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:22:50.360

您是否使用静态变量来存储 id ？

# asp.net - 如何在 Silverlight 应用程序中获取当前用户名而不要求用户登录

> ID：13626746
> 
> 赞同：0
> 
> 时间：2012-11-29T13:19:02.043
> 
> 标签：asp.net, silverlight, silverlight-4.0

我需要获取启动 silverlight 应用程序的用户的当前用户名。当我在 aspx 页面中获取 User.Identity.Name 并将其传递给 silverlight 应用程序时，我能够做到这一点。但它需要 Windows 身份验证，因此要求用户使用域用户（与 iis 服务器具有相同的域）登录。

是否可以在不要求用户登录的情况下获取 Windows 用户名，并且即使用户在另一个域中也可以获取名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:11:15.127

这不可能。您应该在您的服务中使用 Windows 身份验证。

# svg - 如何防止 SVG 标记（箭头）继承路径的笔划宽度？

> ID：13626748
> 
> 赞同：15
> 
> 时间：2012-11-29T13:19:03.250
> 
> 标签：svg, d3.js

我有不同边缘厚度的箭头，但是我希望箭头（svg 标记）具有相同的大小，即不根据路径的笔划宽度调整大小。我能做些什么？

```
svg.append("svg:defs").selectAll("marker")
    .data(["suit", "licensing", "resolved"])
  .enter().append("svg:marker")
    .attr("id", String)
    .attr("viewBox", "0 -5 10 10")
    .attr("refX", 15)
    .attr("refY", -1.5)
    .attr("markerWidth", 6)
    .attr("markerHeight", 6)
    .attr("orient", "auto")
    .style("stroke-width", 1)
  .append("svg:path")
    .attr("d", "M0,-5L10,0L0,5");

var path = svg.append("svg:g").selectAll("path")
    .data(force.links())
  .enter().append("svg:path")
    .attr("class", function(d) { return "aglink " + "suit"; })
    .attr("marker-end", function(d) { return "url(#" + "suit" + ")"; })
    .style("stroke-width", function(d) { if (d.total != 0) { 

        var min = 2;
        var max = 16;
        var val = Math.round((max-min)*(d.count/d.total))+min;

        return val ;
        } }); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T14:00:19.480

请参阅[http://www.w3.org/TR/SVG11/painting.html#MarkerUnitsAttribute](http://www.w3.org/TR/SVG11/painting.html#MarkerUnitsAttribute)。

你似乎想要的是`markerUnits="userSpaceOnUse"`.

# vbscript - Windows Batch 或 VB 脚本添加扩展而不是在 .csv 文件的末尾添加一行

> ID：13626750
> 
> 赞同：1
> 
> 时间：2012-11-29T13:19:05.933
> 
> 标签：vbscript, batch-file

每天有 4 个文件下载到映射驱动器，没有扩展名。我已经搜索了我想要的脚本，但我找不到它。我发现了一个 cmd 脚本，但只添加了一个 csv 作为扩展名。但我想要 1 个文件中的所有脚本。也许有人可以帮助我。

向此文件添加扩展名：

```
每日1.20121129
每日2.20121129
股权.20121129
未来4.20121129

```

（.20121129' 这是下载的日期，每天都会更改。）

脚本必须将文本添加到每个文件末尾的 2 个文件中：“daily1.date.csv”和“daily2.date.csv”日期每天都会更改我认为脚本必须打开它，如果包含 daily1 和 daily2 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:53:54.777

如果您只想将文件夹中的所有文件重命名为 csv 扩展名，那么您可以使用

```
ren C:\folder\files\* *.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:54:03.787

我使用了其他一些论坛，但这就是我想要的。对不起，我不正确我想要的。也许将来它会帮助其他人。

```
ren C:\blp\bbdl\_csv\* *?.csv
PING 127.0.0.1 -n 6
for %%j in (C:\blp\bbdl\_csv\dailycurrency1.out.????????.csv) do @echo.TEST EUR>> %%j
PING 127.0.0.1 -n 6
for %%j in (C:\blp\bbdl\_csv\dailycurrency2.out.????????.csv) do @echo.TEST >> %%j
PING 127.0.0.1 -n 6
powershell -command "& 'C:\NewScript\copy_script_PS.ps1' " 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:52:46.433

我不太确定你想要实现什么。您是否希望所有下载的文件都放在一个扩展名为 的文件中`.csv`？可以这样实现（假设目录中没有其他文件）：

```
>output.csv type * 
```

或者您想为`.csv`每个下载的文件添加扩展名？可以这样实现（再次假设目录中没有其他文件）：

```
for %%f in (*) do ren "%%~f" "%%~f.csv" 
```

还是您只想合并特定文件？如果是这样，哪些源文件应该进入哪个目标文件？

或者您需要将当前日期的文件与同一目录中的其他文件区分开来？为此，您需要构建一个日期字符串，这取决于您的计算机区域设置中定义的日期格式。假设一种格式`MM/DD/YYYY`，您可以像这样构建一个日期字符串`YYYYMMDD`：

```
setlocal EnableDelayedExpansion

for /f "tokens=1-3 delims=/" %%i in ("%DATE%") do set d=%%k%%i%%j

REM do stuff

endlocal 
```

**编辑：**

要在重命名文件之前或之后将文本附加到文件中，您可以将这些操作合并到循环中：

```
setlocal EnableDelayedExpansion

for %%f in (*) do (
  set filename=%%~f
  if "!filename:~0,5!" == "daily" echo something >> "!filename!"
  ren "!filename!" "!filename!.csv"
)

endlocal 
```

当然，如果要将不同的内容附加到两个文件中，则需要两个语句。

```
if "!filename:~0,6!" == "daily1" echo something >> "!filename!"
if "!filename:~0,6!" == "daily2" echo something else >> "!filename!" 
```

# ssis - 如何在 ssis 中进行事务回滚？

> ID：13626755
> 
> 赞同：16
> 
> 时间：2012-11-29T13:19:16.573
> 
> 标签：ssis

我有数据导入到生产服务器。在我的包中，在数据加载之前清理原始表。如果任何情况下打包失败。如何回滚 SSIS 中的原始表数据？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-17T12:49:58.133

通过在 SSIS 中使用**序列容器**（Sequence、For Loop、ForEach Loop），您可以使用名为**TransactionOption**的属性。这允许您指定包中任务的事务行为，以及包本身在任何任务失败时回滚。

例如，如果你将你的任务粘贴在一个 Sequence Container 中，并设置`TransactionOption=Required`，并将 Container 内的所有 Task 配置为`TransactionOption=Supported`，它们都会加入到 Sequence Container 中启动的事务中，如果有任何失败，事务将被回滚。

[您可以在此处](http://msdn.microsoft.com/en-us/library/ms137690.aspx)阅读 TransactionOption 属性的说明和/或按照[此处的演练](http://msdn.microsoft.com/en-us/library/ms141144.aspx)来了解如何实现这一点。

编辑：另一个很好的[演练（带截图）在这里](http://www.mssqltips.com/sqlservertip/1585/how-to-use-transactions-in-sql-server-integration-services-ssis/)

# android - 激活 SearchView 时如何获取 onBackPressed()？

> ID：13626756
> 
> 赞同：30
> 
> 时间：2012-11-29T13:19:26.193
> 
> 标签：android, searchview

如何`onBackPressed()`在搜索模式下处理？我已经在 中实现了搜索`ActionBar`，并且我想处理`onBackPressed()`.

## 编辑：

在`MainActivity`我添加了这个，但只有在搜索关闭时才会收到通知

```
@Override
public void onBackPressed() {
    mMenu.findItem(R.id.menu_eye).setVisible(true);
    mMenu.findItem(R.id.menu_layers).setVisible(true);
    super.onBackPressed();  
}; 
```

我的搜索操作监听器如下所示：

```
import com.cyrilmottier.polaris.PolarisMapView;

import android.app.SearchManager.OnCancelListener;
import android.content.Context;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.SearchView;

public class SearchListener implements SearchView.OnQueryTextListener, SearchView.OnCloseListener, SearchView.OnSuggestionListener, OnClickListener, OnCancelListener{

    private Context mContext;
    private PolarisMapView mMapView;
    private Menu mMenu;
    private SearchView mSearchView;

    public SearchListener(Context c, PolarisMapView mMapView, Menu mMenu, SearchView mSearchView){
        this.setmContext(c);
        this.setmMapView(mMapView);
        this.setmMenu(mMenu);
        this.mSearchView = mSearchView;
    }

    @Override
    public boolean onQueryTextChange(String newText) {
        return false;
    }

    @Override
    public boolean onQueryTextSubmit(String query) {
        if (Constants.searchPlaceNavigate(query, mContext, mMapView))
            return this.onClose();
        return false;
    }

    public Context getmContext() {
        return mContext;
    }

    public void setmContext(Context mContext) {
        this.mContext = mContext;
    }

    public PolarisMapView getmMapView() {
        return mMapView;
    }

    public void setmMapView(PolarisMapView mMapView) {
        this.mMapView = mMapView;
    }

    @Override
    public boolean onSuggestionClick(int position) {
        String p = mSearchView.getSuggestionsAdapter().getCursor().getString(position);
        if(position== 0)
            p = mSearchView.getSuggestionsAdapter().getCursor().getString(position*4+1);
        if(p != null)
            if(position== 0)
                Constants.searchPlaceNavigate(mSearchView.getSuggestionsAdapter().getCursor().getString(position*4+1), mContext, mMapView);
            else
                Constants.searchPlaceNavigate(mSearchView.getSuggestionsAdapter().getCursor().getString(position), mContext, mMapView);
        return this.onClose();
    }

    @Override
    public boolean onSuggestionSelect(int position) {

        return false;
    }

    @Override
    public boolean onClose() {
        mMenu.findItem(R.id.menu_eye).setVisible(true);
        mMenu.findItem(R.id.menu_layers).setVisible(true);
        mMenu.findItem(R.id.menu_search).collapseActionView();
        return true;
    }

    public Menu getmMenu() {
        return mMenu;
    }

    public void setmMenu(Menu mMenu) {
        this.mMenu = mMenu;
    }

    public SearchView getmSearchView() {
        return mSearchView;
    }

    public void setmSearchView(SearchView mSearchView) {
        this.mSearchView = mSearchView;
    }

    @Override
    public void onClick(View v) {
        this.onClose();
    }

    @Override
    public void onCancel() {
        this.onClose();

    }

} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-03-29T11:43:34.110

另一种方法是在 MenuItem 上监听 ActionExpand/Collapse ：

```
 MenuItem searchMenuItem = menu.findItem(R.id.menu_search);
    searchMenuItem.setOnActionExpandListener(new MenuItem.OnActionExpandListener() {

        @Override
        public boolean onMenuItemActionExpand(MenuItem item) {
            // Do whatever you need
            return true; // KEEP IT TO TRUE OR IT DOESN'T OPEN !!
        }

        @Override
        public boolean onMenuItemActionCollapse(MenuItem item) {
            // Do whatever you need
            return true; // OR FALSE IF YOU DIDN'T WANT IT TO CLOSE!
        }
    });
    SearchView searchView = (SearchView) searchMenuItem.getActionView();
    ... // Keep doing as you do 
```

我认为这种方式更干净，因为您可以直接听自己想要的内容

感谢[这个线程](https://groups.google.com/d/msg/actionbarsherlock/l6Xp4UTx5kQ/f8Ly1rgJuGcJ)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-06-09T07:04:25.533

为了支持旧设备，可以使用以下代码：

```
 MenuItemCompat.setOnActionExpandListener(searchItem,new MenuItemCompat.OnActionExpandListener() {

            @Override
            public boolean onMenuItemActionExpand(MenuItem item) {
                //Do whatever you want                   
                return true;
            }

            @Override
            public boolean onMenuItemActionCollapse(MenuItem item) {
                //Do whatever you want
                return true;
            }
        }); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-08-19T04:30:05.513

您可以扩展 SearchView 并覆盖 dispatchKeyEventPreIme：

```
    公共类 CustomSearchView 扩展 SearchView{
        公共CustomSearchView（最终上下文上下文）{
            超级（上下文）；
            this.setIconifiedByDefault(true);
        }

        @覆盖
        公共布尔dispatchKeyEventPreIme（KeyEvent事件）{
            if (event.getKeyCode() == KeyEvent.KEYCODE_BACK &&
                event.getAction() == KeyEvent.ACTION_UP) {
                this.onActionViewCollapsed();
            }
            return super.dispatchKeyEventPreIme(event);
        }
    }

```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-02T09:59:04.860

与制作自定义搜索视图但带有侦听器的答案相同

```
public class SearchViewer extends SearchView {
    private OnBackPressListener onBackPressListener;
    private boolean isKeyboardVisible;

        public SearchViewer(Context context) {
            super(context);
        }

        public SearchViewer(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

        public SearchViewer(Context context, AttributeSet attrs, int defStyleAttr) {
            super(context, attrs, defStyleAttr);
        }

        private void init() {
            KeyboardUtils.addKeyboardToggleListener((Activity) getContext(), new KeyboardUtils.SoftKeyboardToggleListener() {
                @Override
                public void onToggleSoftKeyboard(boolean isVisible) {
                    SearchViewer.this.isKeyboardVisible = isVisible;
                }
            });

        }

        @Override
        protected void onAttachedToWindow() {
            super.onAttachedToWindow();
            init();
        }

        @Override
        protected void onDetachedFromWindow() {
            super.onDetachedFromWindow();
            KeyboardUtils.removeAllKeyboardToggleListeners();
        }

        @Override
        public boolean dispatchKeyEventPreIme(KeyEvent event) {
            if (event.getKeyCode() == KeyEvent.KEYCODE_BACK) {
                if (onBackPressListener != null && !isKeyboardVisible)
                    onBackPressListener.backPress();
            }
            return super.dispatchKeyEventPreIme(event);
        }

        public OnBackPressListener getOnBackPressListener() {
            return onBackPressListener;
        }

        public void setOnBackPressListener(OnBackPressListener onBackPressListener) {
            this.onBackPressListener = onBackPressListener;
        }

        public interface OnBackPressListener {
            void backPress();
        }
    } 
```

用于键盘可见性的 Util 类，因此如果键盘可见返回 Press 将隐藏它而不关闭活动

```
public class KeyboardUtils implements ViewTreeObserver.OnGlobalLayoutListener {
    private static HashMap<SoftKeyboardToggleListener, KeyboardUtils> sListenerMap = new HashMap<>();
    private SoftKeyboardToggleListener mCallback;
    private View mRootView;
    private float mScreenDensity = 1;
    private KeyboardUtils(Activity act, SoftKeyboardToggleListener listener) {
        mCallback = listener;

        mRootView = ((ViewGroup) act.findViewById(android.R.id.content)).getChildAt(0);
        mRootView.getViewTreeObserver().addOnGlobalLayoutListener(this);

        mScreenDensity = act.getResources().getDisplayMetrics().density;
    }

    public static void addKeyboardToggleListener(Activity act, SoftKeyboardToggleListener listener) {
        removeKeyboardToggleListener(listener);

        sListenerMap.put(listener, new KeyboardUtils(act, listener));
    }

    public static void removeKeyboardToggleListener(SoftKeyboardToggleListener listener) {
        if (sListenerMap.containsKey(listener)) {
            KeyboardUtils k = sListenerMap.get(listener);
            k.removeListener();

            sListenerMap.remove(listener);
        }
    }

    public static void removeAllKeyboardToggleListeners() {
        for (SoftKeyboardToggleListener l : sListenerMap.keySet())
            sListenerMap.get(l).removeListener();

        sListenerMap.clear();
    }

    @Override
    public void onGlobalLayout() {
        Rect r = new Rect();
        //r will be populated with the coordinates of your view that area still visible.
        mRootView.getWindowVisibleDisplayFrame(r);

        int heightDiff = mRootView.getRootView().getHeight() - (r.bottom - r.top);
        float dp = heightDiff / mScreenDensity;

        if (mCallback != null)
            mCallback.onToggleSoftKeyboard(dp > 200);
    }

    private void removeListener() {
        mCallback = null;

        mRootView.getViewTreeObserver().removeOnGlobalLayoutListener(this);
    }

    public interface SoftKeyboardToggleListener {
        void onToggleSoftKeyboard(boolean isVisible);
    }

} 
```

示例代码：

```
searchView.setOnBackPressListener(new SearchViewer.OnBackPressListener() {
    @Override
    public void backPress() {
        onBackPressed();
    }
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-30T06:23:32.627

我找到了答案，它的关键是之前来自 Mr.Ali Imran 和来自 neworld 的答案，我必须重写这个方法：

```
@Override
public void onActionViewCollapsed() {
    //do somethink
    super.onActionViewCollapsed();
} 
```

每次关闭 searchView 时都会调用它，因此它可以处理后退按钮的情况。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-29T14:02:55.090

您始终可以像这样扩展任何视图并覆盖侦听方法：

```
class MySearchView extends SearchView {
  @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
     return super.onKeyDown(keyCode, event); //don't forget call this
  }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-29T13:26:19.060

覆盖此方法可能会对您有所帮助

```
 @Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-06T13:33:42.267

尝试这个

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        getMenuInflater().inflate(R.menu.menu_main, menu);

        MenuItem searchItem = menu.findItem(R.id.action_search);

        searchItem.setOnActionExpandListener(new MenuItem.OnActionExpandListener() {
        @Override
        public boolean onMenuItemActionExpand(MenuItem item) {
             //do something here

              return true;
        }

        @Override
        public boolean onMenuItemActionCollapse(MenuItem item) {
            //do something here

            //YourActivity is acitvity where you define searchview and fragment
            YourActivity.super.onBackPressed();  //remove fragment from backstack

            return true;
        }
    });

    //Any other code

} 
```

`onMenuItemActionCollapse(MenuItem item)`当单击向上按钮`SearchView`或按返回按钮时将运行。它将从后台堆栈中删除片段。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2019-12-19T08:09:01.087

使用此代码处理`onBackPressed()`转到以前的活动

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle action bar item clicks here. The action bar will
    // automatically handle clicks on the Home/Up button, so long
    // as you specify a parent activity in AndroidManifest.xml.

    int id = item.getItemId();
    switch (id){
        case android.R.id.home:
            onBackPressed();
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }

} 
```

# qt - 在paintEvent生成内容后调整大小

> ID：13626757
> 
> 赞同：0
> 
> 时间：2012-11-29T13:19:28.453
> 
> 标签：qt, resize, dimensions, qt5, paintevent

如何自动将任何小部件调整为paintEvent 方法生成的内容尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:14:55.097

不要试图那样做。调整大小会产生一个新的绘画事件，在最好的情况下，你最终会在你的 UI 中闪烁。您将需要在绘制事件之外计算您的小部件大小。

# java - 自定义标记：不带文本的属性（布尔值）

> ID：13626766
> 
> 赞同：2
> 
> 时间：2012-11-29T13:19:50.850
> 
> 标签：java, jsp, jstl

假设我有一个带有可选布尔属性的自定义标签。

该属性的默认值为 false。

要使用它，开发人员会编写类似的东西

有没有办法定义`="true"`-part 不是 nesscasary？所以`<xyz:mytag optAttr />`等于`<xyz:mytag optAttr="true" />`?

至少对于 HTML 中的复选框，这是很常见的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T13:28:57.487

不，这是不可能的。

JSP 自定义标记严格遵循不允许这种声明的 XML 语法（与 HTML 不同）。

# css - 将 STIX 字体应用于 MathML CSS

> ID：13626771
> 
> 赞同：1
> 
> 时间：2012-11-29T13:20:19.470
> 
> 标签：css, mathml

我尝试使用这个字体用这个简单的 CSS 渲染一个简单的 MathmML 公式，但公式没有改变，

```
.formula {
    text-align: center;
    font-weight: 100;
    font-style: normal;
    padding: 10px;

    font-family: 'STIXGeneral';
} 
```

或与

```
 @font-face
{
font-family: STIX;
src: url('STIXIntegralsD-Regular.ttf');

}

.formula {
    text-align: center;
    font-weight: 100;
    font-style: normal;
    padding: 10px;

    font-family: 'STIX';
} 
```

但是什么都没有，字体没有应用，错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:43:13.817

要使第二个工作正常，ttf 文件需要与 html 文件位于同一目录中，并且您使用的浏览器需要能够将 ttf 字体加载为网络字体，请参阅[http://caniuse.com/ttf](http://caniuse.com/ttf) 对于哪些浏览器支持 ttf 网络字体的表格。

只要您在本地安装了 stix 字体并在您的元素上使用 class="formula" ，第一个应该可以工作（尽管 100 会很轻）。

# iphone - Push segue 每次发生时都会创建一个新实例。我该如何阻止它？

> ID：13626773
> 
> 赞同：1
> 
> 时间：2012-11-29T13:20:24.913
> 
> 标签：iphone, xcode, ipad, uinavigationcontroller, segue

我有一个 main`UINavigationController`可以将 segue 推送到第二个视图控制器。第二个视图有一个返回按钮，可以返回到原始视图。当`viewDidLoad`在第二个 ViewController 上调用时，会发生很多初始化，包括从文件中加载数据，以及背景噪声的采样。这只需要执行一次，但只有在第二个视图实际上已加载时才需要。我的问题是每次 push segue 发生时，都会创建第二个视图的全新实例，并且整个初始化过程会再次发生。我如何才能保持第二个视图并在随后的推送序列发生时重新呈现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T07:29:33.077

我建议你换一种方式。让 iOS 处理 ViewController 的生命周期，然后将数据和昂贵的初始化与它解耦。您可以创建一个单独的类来完成这项工作，或者它可以由根视图控制器拥有并传递给第二个。我不认为 Storyboards 会按照你想要的方式运行，而且听起来也没有充分的理由在这方面与 iOS 抗衡。

或者您可以使用 iOS5 之前的方式来执行此操作，并使用实例化您的第二个 ViewController`initWithNibName:bundle`并将其推送到导航堆栈中`pushNavigationItem:animated`。

# xml - 使用 AS3 从 XML 获取以前的节点

> ID：13626777
> 
> 赞同：1
> 
> 时间：2012-11-29T13:20:58.553
> 
> 标签：xml, actionscript-3, loops

大家好，我正在使用 actionscript 从 XML 文件中引入数据。我可以使用 AS3 中的下一步和后退按钮循环浏览 XML 文件。此信息正在加载到动态文本框中。当到达 xml 文件的末尾时，我正在努力**循环遍历xml 文件！**例如，当我单击 as3 中的下一个按钮时，会显示下一个地点，但是当显示最后一个地点时，如果有意义，我希望按钮循环回到 XML 文件的开头。

我已经配置了 AS3，因此它使用下一个按钮循环回到开头，但是当单击上一个按钮时，我正在努力加载最后一个场地。

```
function nextVenue(e:Event) {
    //Looks at length cycles to next venue
    if (currentVenue < myXML.venue.length()) {
        //cycle through venues when next_btn is clicked
        currentVenue +=length; 
    } else {
        //loop to beginning
        (currentVenue =length) 
    }
    //Output to title textbox
    myTextBoxTitle.text = myXML.venue.name[currentVenue -1] ;

    //Output to description textbox
    myTextBoxDes.text = myXML.venue.description[currentVenue -1];
}

//previous event function / when back button is clicked
function prevVenue(e:Event) {    
    if (currentVenue >length) {
        currentVenue -=length; //cycle back through venue when prev_btn is clicked -1
    }  
    //Output to title textbox
    myTextBoxTitle.text = myXML.venue.name[currentVenue -1];

    //Output to description textbox
    myTextBoxDes.text = myXML.venue.description[currentVenue -1] 
 } 
```

文件

[http://pastebin.com/gzc4t2WR](http://pastebin.com/gzc4t2WR)

先感谢您 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:55:54.727

在这段代码中：

```
 if (currentVenue < myXML.venue.length()) {
    //cycle through venues when next_btn is clicked
    currentVenue +=length; 
  } else {
    //loop to beginning
    (currentVenue =length) 
  } 
```

您正在将 currentVenue 设置为当前长度 - 但您的评论说循环开始。如果是这种情况，那么您需要将 currentVenue 重置为 0 - 长度是多少？

** 新代码 **

```
package {
import flash.display.Sprite;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.net.URLLoader;
import flash.net.URLRequest;
import flash.text.TextField;

public class testing extends Sprite
{

    public var switch1:String = 'a';
    public var switch2:String = "3";
    public var myXML:XML;

    public var nextButton:Sprite;
    public var prevButton:Sprite;
    public var currentVenue:int;

    public var myTextTitle:TextField;
    public var myTextDes:TextField;

    public function testing() {

        this.addEventListener(Event.ADDED_TO_STAGE, this.init);
        var myLoader:URLLoader = new URLLoader();
        myLoader.load(new URLRequest("./test.xml"));
        myLoader.addEventListener(Event.COMPLETE, this.processXML);
    }

    public function init(e:Event):void {
        this.removeEventListener(Event.ADDED_TO_STAGE, this.init);
        this.currentVenue = 0;=
        this.graphics.beginFill(0x333333);
        this.graphics.drawRect(0,0,this.stage.stageWidth, this.stage.stageHeight);
        this.graphics.endFill();

        this.nextButton = this.createSpriteButton("next");
        this.addChild(this.nextButton);
        this.nextButton.x = 10;
        this.nextButton.y = 10;

        this.prevButton = this.createSpriteButton("prev");
        this.addChild(this.prevButton);
        this.prevButton.x = 100;
        this.prevButton.y = 10;

        this.myTextTitle = new TextField();
        this.addChild(this.myTextTitle);
        this.myTextTitle.background = true;
        this.myTextTitle.backgroundColor = 0xFFFFFF;
        this.myTextTitle.text = "Title: ";
        this.myTextTitle.x = 10;
        this.myTextTitle.y = 40;
        this.myTextTitle.width = 100;
        this.myTextTitle.height = 20;

        this.myTextDes = new TextField();
        this.addChild(this.myTextDes);
        this.myTextDes.background = true;
        this.myTextDes.backgroundColor = 0xFFFFFF;
        this.myTextDes.text = "Des: ";
        this.myTextDes.x = 10;
        this.myTextDes.y = 70;
        this.myTextDes.width = 100;
        this.myTextDes.height = 20;

        this.nextButton.addEventListener(MouseEvent.CLICK, this.nextVenue);
        this.prevButton.addEventListener(MouseEvent.CLICK, this.prevVenue);
    }

    private function createSpriteButton(btnName:String):Sprite {
        var sBtn:Sprite = new Sprite();
        sBtn.name = btnName;
        sBtn.graphics.beginFill(0xFFFFFF);
        sBtn.graphics.drawRoundRect(0,0,80,20,5);
        var sBtnTF:TextField = new TextField();
        sBtn.addChild(sBtnTF);
        sBtnTF.text = btnName;
        sBtnTF.x = 5;
        sBtnTF.y = 3;
        sBtnTF.selectable = false;
        sBtn.alpha = .5;

        sBtn.addEventListener(MouseEvent.MOUSE_OVER, function(e:Event):void { sBtn.alpha = 1 });
        sBtn.addEventListener(MouseEvent.MOUSE_OUT, function(e:Event):void { sBtn.alpha = .5 });

        return sBtn;
    }

    private function processXML(e:Event):void {
        this.myXML = new XML(e.target.data);
        this.updateData();
    }

    private function updateData():void {
        this.myTextTitle.text = "Title: " + this.myXML.venue.name[currentVenue];
        this.myTextDes.text = "Des: " + this.myXML.venue.description[currentVenue];
    }

    private function nextVenue(e:Event):void {
        this.updateCurrentVenue(1);
        this.updateData();
    }

    private function prevVenue(e:Event):void {
        this.updateCurrentVenue(-1);
        this.updateData();
    }

    private function updateCurrentVenue(step:int):void {
        if(step > 0) {
            this.currentVenue < this.myXML.venue.length()-1 ? this.currentVenue++ : this.currentVenue = 0;
        } else {
            this.currentVenue != 0 ? this.currentVenue-- : this.currentVenue = this.myXML.venue.length()-1;
        }
    }
} 
```

}

# ios - UDP 套接字在 iOS 中不能与 3G 网络一起使用？

> ID：13626778
> 
> 赞同：1
> 
> 时间：2012-11-29T13:21:16.177
> 
> 标签：ios, xcode, udp, cfnetwork, cocoaasyncsocket

我正在使用[GCDAsyncUdpSocket](https://github.com/robbiehanson/CocoaAsyncSocket)，它在 wifi 网络上运行良好

但是当我在 3g 网络中测试时，它似乎不起作用。

可以在 3G 网络中使用 GCDAsyncUdpSocket 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:49:54.213

是的，但这取决于您的网络提供商。大多数提供商不允许多播，有些则不允许 UDP。在您的情况下，这似乎是后者。

# sql - Oracle 表值合并

> ID：13626782
> 
> 赞同：0
> 
> 时间：2012-11-29T13:21:31.943
> 
> 标签：sql, oracle, group-by

我最近正在与 Oracle 合作，但我遇到了一些问题。

我被要求： 显示至少向 4 家商店供货的供应商名称。

这是我的查询：

```
select SuppCode
from Stocks
group by SuppCode       
having COUNT(DISTINCT StoreCode)>=4
order by SuppCode desc; 
```

我得到了正确的 SuppCode：

```
SUPPCO
------
S3 
```

但是 SuppName 在另一个表中。我如何将 SuppCode 从 Stocks 更改为 SuppName 从 Suppliers，同时保留给我正确答案的其余查询。唯一的问题是它显示的是 SuppCode，而不是供应商中的 SuppName。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:32:24.950

```
select SuppName
from suppliers sp
  join (select SuppCode
        from Stocks
        group by SuppCode       
        having COUNT(DISTINCT StoreCode)>=4
        order by SuppCode desc
  ) st on st.suppCode = sp.suppcode; 
```

# python - Django 会话在 Firefox 中不起作用

> ID：13626783
> 
> 赞同：5
> 
> 时间：2012-11-29T13:21:32.403
> 
> 标签：python, django, django-sessions

我有一个搜索视图，可以在会话中保存一些数据以供另一个视图使用：

```
def search(request):
    ...
    if request.method == 'POST':
        form = SearchForm(request.POST)
        if form.is_valid():
            cd = form.cleaned_data
            melk=data(cd)
            request.session['data'] = melk
            request.session['form'] = form
            return redirect('/result/')
    ...

def result(request):
    ...
    melk_list = request.session['data']
    form = request.session['form']
    ... 
```

当我使用 Chrome 时，一切都很好。但是当我使用 Firefox 时，它第一次运行良好，但之后每次搜索都会返回我的第一个结果！第一次之后似乎`request.session`没有改变。我试图用 删除会话`del request.session['data']`，但这没有用。

我的会话后端是一个数据库，但 Firefox 制作了一个会话 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:42:59.630

尝试

```
request.session.modified = True 
```

# c# - How to open the properties dialog for a Font without a PropertyGrid at runtime

> ID：13626785
> 
> 赞同：0
> 
> 时间：2012-11-29T13:21:42.917
> 
> 标签：c#, winforms, propertygrid, uitypeeditor

Consider a form with a `TextBox` and a `Button`. When you click that button you should get the `Font` properties dialog at run-time.

During designer you can click the button off to the right of the property in the `PropertyGrid` and get the editor window to manipulate the Font for this `TextBox`. During run-time, if you add a `PropertyGrid` to the form and point it to the `TextBox` you can also get the editor window.

How can I get this editor window at run-time through say, a button click without having a `PropertyGrid` on the form?

Though I've gotten the `PropertyDescriptor` and the `UITypeEditor` from this descriptor, I don't know what to call to get the instances of `ITypeDescriptorContext` and `IServiceProvider` when calling `UITypeEditor.EditValue`.

EDIT - Since I asked this problem of a control that has an easy solution, I've asked another question related to this topic: [How to open the properties dialog for a Complex Property without a PropertyGrid at runtime](https://stackoverflow.com/questions/13627120/how-to-open-the-properties-dialog-for-a-complex-property-without-a-propertygrid)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:30:27.493

You can use `FontDialog` to show the standard font dialog box:

```
new FontDialog().ShowDialog(); 
```

To read/write fonts:

```
var dlg = new FontDialog();
dlg.Font = textBox1.Font;
if (dlg.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    textBox1.Font = dlg.Font;
} 
```

# asp.net - 向移动应用程序和其他 3rd 方公司公开 Restful API

> ID：13626790
> 
> 赞同：0
> 
> 时间：2012-11-29T13:22:03.093
> 
> 标签：asp.net, rest

我们在 asp.net 中开发了帮助台 Web 应用程序。现在我们需要将 Restful API 暴露给我们的移动应用程序和第三方公司。我们不想将所有 API 方法暴露给 3rd 方公司。他们会使用 API 的一些方法。

目前我正在考虑在帮助台应用程序中公开 Restful API。我们的 Web 应用程序托管在 support.domain.com 中，并希望在此 URL 示例 api.support.domain.com 中公开我们的 API

我的问题是如何使用仅由我们的移动应用程序使用的私有方法设计 Restful API，而不向 3rd 方公司公开其他和公共 API 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:37:38.533

如果您对拥有 2 个不同的 API 感到满意，那么您可以创建一个并且只私下公开它，然后创建第二个并公开公开它。

如果您只想拥有一个 API，那么您需要实现授权。基本上在每个受保护的方法调用上，检查调用者是否被允许调用该方法，如果不是，则抛出异常或返回一个响应，指示他们不允许执行请求的操作。

如何验证呼叫者取决于您。您可以使用用户名/密码方案，或生成某种字符串作为 API 密钥，每次调用都会使用该密钥。

如果它是一个选项，您也可以根据 IP 地址进行操作——如果您知道内部呼叫必须来自一组特定的子网，请检查 IP 地址。您还可以保留允许的外部 IP 地址表。

# c# - C# 中的类声明

> ID：13626791
> 
> 赞同：3
> 
> 时间：2012-11-29T13:22:07.193
> 
> 标签：c#, class, generics

我正在为 MVC .Net 寻找可重用的网格。我找到了一个开源网格。

在代码中，我发现了一个非常有趣的类声明，我不明白。谁能告诉我下面类声明的详细描述：

```
public class Grid<TEntity, TSearchForm> : IGrid where  TSearchForm : SearchForm, new()
{
} 
```

另外，如何创建此类的实例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T13:25:24.973

*   Grid 类实现 IGrids 接口。
*   TSearchFormType 必须是 SearchForm 类型（通过派生）
*   TSeachForm 必须有一个不带参数的构造函数

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-29T13:30:08.363

这是从 IGrid 继承的泛型类，具有两个参数：TEntity、TSearchForm。

TSearchForm 的类型也有一个限制：

1.  它必须是 SearchForm 类型或在层次结构中低于它（能够隐式转换为 SearchForm）

2.  TSearchForm 必须具有公共无参数构造函数。

更多信息：

[where (泛型类型约束](http://msdn.microsoft.com/en-us/library/bb384067.aspx) [new Constraint](http://msdn.microsoft.com/en-us/library/sd2w2ew5.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-29T13:26:10.527

该类是一个泛型类，它实现了`IGrid`.

两个泛型类型参数是`TEntity`和 `TSearchForm`。

`TSearchForm`被限制为是`SearchForm`或继承自的类型，`SearchForm`并且它具有默认构造函数。

推荐阅读：

*   [泛型](http://msdn.microsoft.com/en-us/library/512aeb7t.aspx)
*   [类型参数的约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)

# javascript - 检测用户何时离开页面

> ID：13626796
> 
> 赞同：6
> 
> 时间：2012-11-29T13:22:30.213
> 
> 标签：javascript, jquery

如何检测到用户正在离开我的页面？有点像stackoverflow，如果你已经开始写帖子的话。

我`$(window).unload()`在 jQuery 中尝试过，但我无法让它工作。

这种说法并不完全正确，在IE9中它确实有效，实际上有点过分了。如果页面被刷新，它也会弹出。但在 Chrome 中，什么都不会触发。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T13:28:38.253

在你的代码中包含 jQuery 库，然后试试这个

```
$(window).bind('beforeunload', function(){

        return 'DataTest';
});​ 
```

[**JsFiddle 演示**](http://jsfiddle.net/3zR5r/2/)

# linux - 在 shell 脚本中编辑 sudo 文件

> ID：13626798
> 
> 赞同：2
> 
> 时间：2012-11-29T13:22:31.063
> 
> 标签：linux, shell, unix, sed

我想通过在特定行上删除`#`或添加来编辑 Solaris 中的 sudoers 文件`#`，那么我该如何为此编写脚本？我的 sudoer 示例文件如下：

```
# The following line allows su without options/arguments and sux to user root
Cmnd_Alias SU_ROOT = /usr/bin/su "",\
                     /usr/local/bin/sux - root

# Defaults specification
Defaults:%saptb !authenticate

# User privilege specification
%saptb  ALL=(root)SU_SAP
#Uncomment this line when SAP requires root access
%saptb ALL=(root)SU_ROOT
##### END SAP-TB specific  ######
#
#
#Tivoli ITM Tools Team Sudo Right
#
%cgtools        ALL=(root)       NOPASSWD: /opt/IBM/ITM/bin/* 
```

* * *

在上面的 sudoers 文件中，我想`#`在唯一一行之前添加`%saptb ALL=(root)SU_ROOT`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:30:11.983

做一个替换`sed`：

```
# Comment out the line %saptb ALL=(root)SU_ROOT
sudo sed -Ei 's/^(%saptb.*SU_ROOT.*)/#\1/' /etc/sudoers 
```

解释：

`-E`使用扩展`regex`

`-i`就地编辑文件。

```
s/         # Substitution
^          # Match the start of the line
(          # Capture the following
%saptb     # Followed by %saptb
.*         # Followed by anything
SU_ROOT    # Followed by SU_ROOT
.*         # Followed by anything
)          # Close capture
/          # Replace with 
#          # A hash 
\1         # Followed by the captured line 
```

取消注释行的原理是相同的：

1.  匹配行首
2.  紧随其后的是`#`
3.  捕获线路的其余部分
4.  用捕获的部分行替换整行（丢弃`#`）。

所以：

```
# Uncomment the line %saptb ALL=(root)SU_ROOT
sudo sed -Ei 's/^#(%saptb.*SU_ROOT.*)/\1/' /etc/sudoers 
```

* * *

您可以使用以下脚本通过运行来注释/取消注释`sudo ./toggle.sh`

```
#!/bin/bash

# Is the line already commented out
grep -q '#%saptb ALL=(root)SU_ROOT' /etc/sudoers

if [ $? -eq 0 ]; then 
    # Uncomment the line %saptb ALL=(root)SU_ROOT
    sed -Ei 's/^#(%saptb.*SU_ROOT.*)/\1/' /etc/sudoers
else 
    # Comment out the line %saptb ALL=(root)SU_ROOT
    sed -Ei 's/^(%saptb.*SU_ROOT.*)/#\1/' /etc/sudoers
fi 
```

# android-preferences - 将 ListPreference 设置为默认未选中

> ID：13626805
> 
> 赞同：3
> 
> 时间：2012-11-29T13:22:44.680
> 
> 标签：android-preferences

我需要基于另一个应用程序构建一个应用程序。在我的 PreferenceScreen 中，我有 2 个 ListPreference 对象。第二个取决于第一个并禁用，直到选择第一个（仍然需要弄清楚那个）

我想将第一个 ListPreference 设置为在我的应用程序首次启动时不被选中。我可以通过不分配键来做到这一点，但是我可以在没有键的情况下检索 ListPreference 的值吗？还有另一种方法吗？

如果 ListPreferce 没有键，我可以使用以下代码在我的 PreferenceScreen 中访问 Preferences：

```
ListPreference locationList = (ListPreference)getPreferenceScreen().getRootAdapter().getItem(1);' 
```

我为需要参考的每个首选项都这样做了。使用 SharedPreference 会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-13T16:15:04.240

在您的 Preferences XML 中，您可以在第二个中使用以下内容`ListPreference`：

```
android:dependency="key_of_first_listpreference"
android:enabled="false" 
```

然后在您的代码中，您可以添加一个侦听器，以便在选择第一个 listpreference 时，您可以填充第二个 listpreference 并像这样启用它：

```
final PreferenceScreen prefsRoot = (PreferenceScreen)getPreferenceScreen();
final ListPreference lpFirst  = (ListPreference) prefsRoot.findPreference("first_listpref_key");
final ListPreference lpSecond = (ListPreference) prefsRoot.findPreference("second_listpref_key");

lpFirst.setOnPreferenceChangeListener(new OnPreferenceChangeListener(){
    @Override public boolean onPreferenceChange ( Preference preference, Object newValue )
    {
        lpSecond.setEntries(R.array.bg_colors);
        lpSecond.setEntryValues(R.array.bg_color_values);
        lpSecond.setEnabled(true);
        return true;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-24T06:35:28.993

抱歉这么晚回答，希望对某人有所帮助。

您无需从 ListPreference 中删除键，即可将 ListPreference 默认设置为未选中。只需使用代码删除首选项值，ListPreference 将不会选择值：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // next 2 lines should be right after onCreate()
    SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
    preferences.edit().remove("your_preference_key").commit();

    // all your other code...
} 
```

它应该是 commit()，使用 apply() 将不起作用（或仅在某些时候起作用）。

# c# - 如何获取当前单元格的列索引？

> ID：13626806
> 
> 赞同：9
> 
> 时间：2012-11-29T13:22:47.253
> 
> 标签：c#, vb.net, excel, epplus

我这里有这个代码...

```
For Each cell In worksheet.Cells(8, 2, lastRow, lastCol)
    Select Case "What Goes Here"
    End Select
Next 
```

我想验证当前单元格所在的列。我可以使用...

```
cell.Address 
```

但这会返回一个包含列字母和行的字符串。是否有另一种方法可以仅获取列的索引或字母，或者我只需要做类似的事情......

```
If cell.Address.Contains("A") 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-29T13:42:38.590

您可以通过以下方式获得`cell.Start.Column`：

```
int colIndex = cell.Start.Column; 
```

`Start`总是和`End`你使用时一样`foreach`。

如果您想要行号，则相同：

```
int rowNum = cell.Start.Row; 
```

请注意，列和行不是从零开始的索引，而是从 1 开始的。所以第一行的第一列有`Row=1`和`Column=1`。

# php - 在 foreach 循环中声明的 PHP 变量是否在每次迭代时被销毁并重新创建？

> ID：13626812
> 
> 赞同：14
> 
> 时间：2012-11-29T13:23:27.770
> 
> 标签：php, variables, loops, foreach, scope

如果我在 foreach 循环中声明一个变量，例如：

```
foreach($myArray as $myData) {
    $myVariable = 'x';
} 
```

PHP 是否会销毁它，并在每次迭代时重新创建它？换句话说，这样做在性能方面是否更聪明：

```
$myVariable;
foreach($myArray as $myData) {
    $myVariable = 'x';
} 
```

提前感谢您的见解。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-29T13:27:13.217

在您的第一个示例中：

```
foreach($myArray as $myData) {
    $myVariable = 'x';
} 
```

`$myVariable`在第一次迭代期间创建，然后在每次进一步迭代中被覆盖。在离开脚本、函数、方法的范围之前，它不会在任何时候被销毁，...

在您的第二个示例中：

```
$myVariable;
foreach($myArray as $myData) {
    $myVariable = 'x';
} 
```

`$myVariable`在任何迭代之前创建并设置为 null。在每次迭代期间，如果将被覆盖。在离开脚本、函数、方法的范围之前，它不会在任何时候被销毁，...

# 更新

我错过了提到主要区别。If `$myArray`is empty ( `count($myArray) === 0`)`$myVariable`将**不会**在您的第一个示例中创建，但在您的第二个示例中它将使用 null 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:28:49.327

根据您的第一个示例中我的 IDE (NuSphere PHPed) 中的调试器：

```
foreach($myArray as $myData) {
    $myVariable = 'x';
} 
```

`$myVariable`只创建一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T13:32:07.203

根据我的实验，是一样的：

```
<?php
for($i = 0; $i < 3; $i++) {
    $myVariable = $i;
}
var_dump($myVariable); 
```

打印：int(2)

```
<?php
$myVariable;
for($i = 0; $i < 3; $i++) {
    $myVariable = $i;
}
var_dump($myVariable); 
```

打印：int(2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-26T19:28:00.303

问题是 $myVariable 并不是真正本地的 foreach 。所以它可以破坏同名的全局变量。

一种解决方法是让你的 foreach 成为一个内联匿名函数。

例如

```
$myforeach=function(&$myArray){ // pass by ref only if modifying it
  foreach($myArray as $myData) {
    $myVariable = 'x';
  }
};
$myforeach($myArray);  // execute anonymous. 
```

这样你就可以保证它不会踩到其他全局变量。

# iphone - iOS - 从 plist 数据滚动图像

> ID：13626813
> 
> 赞同：3
> 
> 时间：2012-11-29T13:23:31.090
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我创建了一个画廊`UICollectionView`，并从 plist 文件加载一组图像，当用户触摸每个单元格时，将加载全屏图像（与 iPhone 的照片应用程序相同），所以我遇到了一个问题，即照片何时会全屏我无法滚动和查看其他图像，这是我的代码：

然后在 PhotosViewerController 中：

```
-(void) creatContentWithNumerOfPage: (NSInteger) numberOfPage andCurrentPage: (NSInteger) currentPage andImageArray:(NSArray *)imageArray {

    self.pageControl.numberOfPages = numberOfPage;
    self.pageControl.currentPage = currentPage;
    [pageScrollView setContentSize:CGSizeMake(self.view.frame.size.width * pageControl.numberOfPages, self.view.frame.size.height)];
    pageScrollView.delegate = self;
    [self.view addSubview: pageScrollView];

    NSMutableArray *mArray = [[NSMutableArray alloc] initWithCapacity:thumbnailViewController.imageArray.count];
    for (int i = 0; i <= thumbnailViewController.imageArray.count; i++)
    {

        NSDictionary *picturesDictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Photos" ofType:@"plist"]];
        imageArray = [picturesDictionary objectForKey:@"PhotosArray"];

        fullScreen = [[UIImageView alloc]initWithImage:[UIImage imageNamed:[imageArray objectAtIndex:currentPage]]];
        [fullScreen setContentMode:UIViewContentModeScaleAspectFit];
        fullScreen.frame = self.view.frame;

        [mArray addObject:fullScreen];
        [pageScrollView addSubview:fullScreen];
    }

} 
```

编辑：（解决方案）

```
-(void) creatContentWithImages:(NSArray*)imageArray andCurrentPage:(NSInteger)currentPage{

    self.pageControl.numberOfPages = imageArray.count;
    self.pageControl.currentPage = currentPage;
    [self.pageScrollView setContentSize:CGSizeMake(self.pageScrollView.frame.size.width * imageArray.count, self.pageScrollView.frame.size.height)];

    for (int i = 0; i < imageArray.count; i++)
    {

        NSDictionary *picturesDictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Photos" ofType:@"plist"]];
        imageArray = [picturesDictionary objectForKey:@"PhotosArray"];

        fullScreen = [[UIImageView alloc]initWithImage:[UIImage imageNamed:[imageArray objectAtIndex:i]]];

        [fullScreen setContentMode:UIViewContentModeScaleAspectFit];
        fullScreen.frame = CGRectMake(i*self.pageScrollView.frame.size.width, 0, self.pageScrollView.frame.size.width, self.pageScrollView.frame.size.height);

        [self.pageScrollView addSubview:fullScreen];
    }

    [self scrollToPage:currentPage animated:NO];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T14:59:35.677

您的代码有很多问题，例如

*   您调用`creatContentWithImages` **before** `viewDidLoad`方法，此时我们不能指望`self.view.frame`or 的实际值`self.pageScrollView.frame`，您必须在 in/after 调用它`viewDidLoad`。也许是这样的：

    ```
    [self presentViewController:photosViewController animated:YES completion:^{
        [photoViewController creatContentWithImages:images andCurrentPage:row];
    }]; 
    ```

*   在循环中，您总是使用`currentPage`而不是`i`ivar

*   你发送`imageArray`到`creatContentWithNumerOfPage`方法，但
    由于某种原因，这个数组在这里被新数据覆盖（我
    想用相同的数据）
*   也不清楚你为什么要执行- UIScrollView 是否以编程方式创建？但它发生在哪个地方？`[self.view addSubview:
    pageScrollView]`
*   当您使用框架进行操作时，您应该使用 UIScrollView 框架，而不是 UIView，如果您的滚动大小与 UIView 不同，那么
    设计也会被破坏。

我已经改变了它并改进了一些东西，所以让我们看看这个（我发布了所有整个 PhotosViewerController.m 文件）

```
#import "PhotosViewerController.h"
@implementation PhotosViewerController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

-(void) creatContentWithImages:(NSArray*)imageArray andCurrentPage:(NSInteger)currentPage{
// I create UIScrollView programmatically, if you want to use xib then just remove lines with RM comment. 
// There are two views in xib hierarchy - UIScrollView downward and UIPageView above

    self.pageScrollView = [[UIScrollView alloc] initWithFrame:self.view.frame]; //RM
    self.pageScrollView.pagingEnabled = YES; //RM

    self.pageControl.numberOfPages = imageArray.count;
    self.pageControl.currentPage = currentPage;
    [self.pageScrollView setContentSize:CGSizeMake(self.pageScrollView.frame.size.width * imageArray.count, self.pageScrollView.frame.size.height)];

    self.pageScrollView.delegate = self;//RM
    [self.view insertSubview:self.pageScrollView atIndex:0]; //RM

    for (int i = 0; i < imageArray.count; i++) //not <=, just <
    {
        UIImage *img = [imageArray objectAtIndex:i];// not sure whether imageArray contains UIImage's or NSString, so if here NSString the create UIImage in appropriate manner. I've tested it with UIImage's 
        UIImageView *fullScreen = [[UIImageView alloc] initWithImage:img];
        [fullScreen setContentMode:UIViewContentModeScaleAspectFit];
        fullScreen.frame = CGRectMake(i*self.pageScrollView.frame.size.width, 0, self.pageScrollView.frame.size.width, self.pageScrollView.frame.size.height);

        [self.pageScrollView addSubview:fullScreen];
    }

    [self scrollToPage:currentPage animated:NO]; // scroll to corresponding page
}

- (void)scrollViewDidScroll: (UIScrollView *) sView
{
    CGFloat offset = self.pageScrollView.contentOffset.x;
    CGFloat pageSize = self.pageScrollView.frame.size.width;

    int page = floor((offset + (pageSize/2)) / pageSize);
    self.pageControl.currentPage = page;
}

- (IBAction)changeThePage:(id)sender
{
    NSLog(@"Change");
    [self scrollToPage:self.pageControl.currentPage animated:YES];
}

- (void)scrollToPage:(NSInteger)page animated:(BOOL)animated{
    CGRect pageRect = CGRectMake(page * self.pageScrollView.frame.size.width, 0, self.pageScrollView.frame.size.width, self.pageScrollView.frame.size.height);    
    [self.pageScrollView scrollRectToVisible: pageRect animated: animated];

    [self.pageControl setCurrentPage:page];
}
@end 
```

如果您仍有任何问题，请告诉我，我会尽力帮助您。

# php - jQuery 从 JSON 字符串创建 HTML

> ID：13626816
> 
> 赞同：1
> 
> 时间：2012-11-29T13:23:34.057
> 
> 标签：php, javascript, jquery, json

我有一个 JSON 对象，其中包括以下示例条目：

```
description":"<div>- diversen Diskutanten- Moderiert vom gro\u00dfartigen PreibischDebatte, Gesprochenes, Kontroverses<div class="btn-group"><a class"btn" href=""><i class="icon-map-marker"><\/i><\/a><a class"btn" href=""><i class="icon-map-marker"><\/i><\/a><\/div><\/div>" 
```

现在我正在尝试将此html添加到我的代码中的另一个元素：

```
$('#desc_text').empty();
$('#desc_text').html(event.description);
$('#description').modal('show'); 
```

问题是html没有被解析为html，我认为jquery`.html()`会这样做。我也试过了`append()`，但也没有改变。

有谁知道如何将其解析为html？

编辑2：整个工作流程，因为它似乎有点混乱：

首先我这样做：

```
$events = json_encode($func->getAllDates()); 
```

该功能：

```
public function getAllDates() {
        $this->db->query('SELECT * FROM dates ORDER BY start');
        $result = $this->db->mysql_fetch_all();
        for($i = 0; $i < count($result); $i++) {
            $result[$i]['description'] = html_entity_decode(utf8_encode($result[$i]['description']));
        }
print_r($result);
        return $result;
    } 
```

$result 函数的输出：

```
[6] => Array
        (
            [id] => 17
            [title] => Sabotage Debatte: Politik im Keller
            [start] => 2012-11-29 00:00:00
            [end] => 2012-11-29 00:00:00
            [allDay] => 1
            [url] => 
            [description] => <div>- diversen Diskutanten- Moderiert vom groÃŸartigen PreibischDebatte, Gesprochenes, Kontroverses<div class="btn-group"><a class"btn" href=""><i class="icon-map-marker"></i></a><a class"btn" href=""><i class="icon-map-marker"></i></a></div></div>
        ) 
```

编辑：

正如评论中所说：引用似乎是答案，但我不自己引用，只是使用 php-functions。也许我这样做的方式是错误的。

我从我的数据库中得到了这样的东西：

```
&amp;lt;div&amp;gt;- diversen Diskutanten- Moderiert vom großartigen PreibischDebatte, Gesprochenes, Kontroverses&amp;lt;div class=&amp;quot;btn-group&amp;quot;&amp;gt;&amp;lt;a class&amp;quot;btn&amp;quot; href=&amp;quot;&amp;quot;&amp;gt;&amp;lt;i class=&amp;quot;icon-map-marker&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;a class&amp;quot;btn&amp;quot; href=&amp;quot;&amp;quot;&amp;gt;&amp;lt;i class=&amp;quot;icon-map-marker&amp;quot;&amp;gt;&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt; 
```

然后我用

```
html_entity_decode(utf8_encode($result[$i]['description'])); 
```

把它转回来，然后我用 json_encode 把它变成 json 格式。不应该对这些功能中的任何一个进行正确的引用吗？

我希望你能进入工作流程......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:27:59.473

您的字符串具有必须转义的内部引号。此外，您还有一些错误的属性`class"btn"`，例如应该在`class="btn"`之后，它将正常工作。

```
// description with all internal double quotes escaped by \"
var event = {
    "description":"<div>- diversen Diskutanten- Moderiert vom gro\u00dfartigen PreibischDebatte, Gesprochenes, Kontroverses<div class=\"btn-group\"><a class=\"btn\" href=\"\"><i class=\"icon-map-marker\"><\/i><\/a><a class=\"btn\" href=\"\"><i class=\"icon-map-marker\"><\/i><\/a><\/div><\/div>"
    };
$('#desc_text').empty();
$('#desc_text').html(event.description);​ 
```

### [这是关于 jsfiddle 的示例](http://jsfiddle.net/kLDZV/)

### OP评论后更新：

由于您正在检索此值并解码实体（包括引号），因此您必须`json_encode()`使用它来生成正确转义的引号。

```
json_encode(html_entity_decode(utf8_encode($result[$i]['description']))); 
```

或者更有可能的是，对来自的整个数组进行编码：

```
json_encode($your_database_row_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:27:23.570

也许你应该尝试：

```
document.getElementById('desc_text').innerHTML = unescape( event.description); 
```

# javascript - 错误我不明白

> ID：13626825
> 
> 赞同：0
> 
> 时间：2012-11-29T13:24:09.870
> 
> 标签：javascript, oop

谁能纠正我在这里做的事情

```
Uncaught TypeError: Object function DataService($scope) {
        this.$scope = $scope;

        // Members Area
        var addVessel = function (userId) {
            alert("user"+userId);
        };

    } has no method 'addVessel' 
```

非常感谢 - 我是新手

在查看回复后，似乎问题嵌套得更高

这是命名空间/类

```
// Member Service Namespace
var MemberService;
(function (MemberService) {

// Member service type
var DataService = (function ($scope) {

    // Construct the data service
    function DataService($scope) {
        this.$scope = $scope;

        // Members Area
        this.addVessel = function (userId) {
            alert("user"+userId);
        };

    }

    return DataService;
})();
MemberService.DataService = DataService;

})(MemberService || (MemberService = {})); 
```

这就是电话

```
MemberService.DataService.addVessel('XXX'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T13:25:40.623

您永远不会将该方法添加`addVessel()`到对象中，而只是将其用作对象范围内的“私有”方法。

改用这个：

```
function DataService($scope) {
    this.$scope = $scope;

    // Members Area
    this.addVessel = function (userId) {
        alert("user"+userId);
    };

} 
```

**编辑**

您的错误似乎是，您创建了一个构造函数`DataService`，但从未真正调用此构造函数。

所以一个解决方案是改变这条线

```
MemberService.DataService = DataService; 
```

进入

```
MemberService.DataService = new DataService( param ); 
```

这将创建您的新实例``DataService`并将其附加到`MemberService.DataService`.

但是，如果您想创建多个实例，那么到目前为止您的代码是正确的，但是为了调用，您首先必须创建此构造函数的对象：

```
var myService = new MemberService.DataService( param ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:26:00.493

改变

```
var addVessel = ... 
```

到

```
this.addVessel = ... 
```

那应该解决它。

在前一种情况下，`addVessel`是`DataService`函数内部的局部变量。而在后一种情况下，它是`DataService`使用点符号可访问的函数对象的成员。

# c++ - 在 win32 (C++) 中打开、操作和渲染 SVG 文件

> ID：13626827
> 
> 赞同：3
> 
> 时间：2012-11-29T13:24:15.633
> 
> 标签：c++, windows, svg, cairo

我想打开 SVG 文件，操作其中定义的形状并将这些形状渲染到 windows (vista/7/...) 中的屏幕上。

我使用 C++ 构建器。我一直在考虑使用 cairo 或 agg 来渲染形状，但我需要一个 SVG 解析器库来提供渲染器和对 SVG 文件中定义的形状的完全访问权限。

有谁知道我可以用来实现这一目标的库？

出于金钱原因，我不能使用 Qt。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:37:04.313

AGG 源包括一个 SVG 查看器 :-)

即使您正在编写商业产品，Qt 许可证也应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:39:22.353

我认为最好的方法是使用 libcairo 的 librsvg。两者功能都非常丰富且易于使用。我可以打开几个 SVG，将它们渲染到屏幕上并处理它们以缩放和移动它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:05:21.010

通用的“将 SVG 渲染到 cairo 上下文”解决方案是 librsvg：[https ://live.gnome.org/LibRsvg](https://live.gnome.org/LibRsvg)

但是，Qt 和 librsvg 都在 LGPL 下获得许可（这并不禁止您在商业产品中使用它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-22T13:28:38.803

我最近用 C++ 编写了一个小型 SVG 渲染器库：[https ://github.com/igagis/svgren](https://github.com/igagis/svgren)

它使用 Cairo 渲染到屏幕外表面。支持渐变和各种形状。它使用我的另一个名为 svgdom 的库，它实际上加载并提供了 SVG 的 DOM，可以在渲染之前对其进行操作。

# java - 如何解析只有根元素的 XML

> ID：13626828
> 
> 赞同：5
> 
> 时间：2012-11-29T13:24:24.397
> 
> 标签：java, xml-parsing, jaxb

我需要注释一个类来解组这样的 XML：

```
<element>data</element> 
```

而且我不知道该怎么做，因为必须对类进行注释，`@XmlRootElement`但我需要获取根元素值。我知道这不起作用，但这是我所做的：

```
@XmlRootElement(name = "element")
public Class MyClass{

@XmlElement(name = "element")
protected String elementValue;
public String getElementValue(){...}
public void setElementValue(String el){...} 
```

有没有可能得到这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T13:28:48.150

您正在寻找`@XmlValue`注释。

**我的课**

```
package forum13626828;

import javax.xml.bind.annotation.*;

@XmlRootElement(name = "element")
public class MyClass{

    protected String elementValue;

    @XmlValue
    public String getElementValue() {
        return elementValue;
    }

    public void setElementValue(String el) {
        this.elementValue = el;
    }

} 
```

**演示**

```
package forum13626828;

import java.io.StringReader;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(MyClass.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StringReader xml = new StringReader("<element>data</element>");
        MyClass myClass = (MyClass) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(myClass, System.out);
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<element>data</element> 
```

# bash - 如何在 bash 脚本中获取 shell 命令的中间值

> ID：13626830
> 
> 赞同：1
> 
> 时间：2012-11-29T13:24:35.687
> 
> 标签：bash

我正在编写一个 bash shell 脚本。在那里，我执行一个命令并将输出保存到一个变量中。值是这样的：

```
0x34f0020d4         4 0x434346000 test_string 
```

如何解析和保存第三个字符串的值（即 0x434346000），假设该值由空格或制表符分隔？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:57:58.067

使用外壳`read`命令：

```
read first second third rest <<< "$line"
echo $third 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T14:18:46.417

以这种方式输入给出上述输出的命令：

```
x=($(your command))
$ echo ${x[2]}
0x434346000 
```

命令的输出存储在数组“x”中，因此数组的索引 2 包含第三个元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T13:26:05.167

这是一种使用方法`awk`：

```
var=$(echo "$string" | awk '{ print $3 }') 
```

测试：

```
echo "$var" 
```

结果：

```
0x434346000 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T16:13:12.050

使用数组来索引值：

```
arr=("0x34f0020d4         4 0x434346000 test_string")
echo "${arr[2]}" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T13:30:24.183

您也可以使用剪切命令。回声“axbxc” | cut -f 2 -d "x" 给出 b

# objective-c - NSObject retainCount 没有显示正确的值

> ID：13626831
> 
> 赞同：0
> 
> 时间：2012-11-29T13:24:40.640
> 
> 标签：objective-c, cocoa-touch, retaincount

我的财产如下

```
@property(strong,nonatomic)NSArray *dataArray; 
```

我正在尝试按如下方式显示retainCount

```
- (void)viewDidLoad    
{        
         [super viewDidLoad];
       // Do any additional setup after loading the view, typically from a nib.

          self.dataArray=[NSArray new];

         NSLog(@"Retain Count1 %d",[dataArray retainCount]);

        [dataArray release];

        NSLog(@"Retain Count2 %d",[dataArray retainCount]);        
} 
```

根据我的理解， **Retain Count1**和**Retain Count2**应该分别为**1**和**0**。

但是我得到了奇怪的值**22** 和**21**，当我再次运行时，有时

保留计数将再次增加**1**。任何帮助是极大的赞赏 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:28:30.687

永远不要`retainCount`用于跟踪对象的引用，因为该对象可能会在您不知道的情况下在内部保留，从而导致`retainCount`显示您认为不正确的结果。

该[网站](http://whentouseretaincount.com/)将进一步帮助您:)

# jquery - 在 open 方法中更改 jQueryUI 对话框按钮文本

> ID：13626832
> 
> 赞同：2
> 
> 时间：2012-11-29T13:24:41.027
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

打开 jQueryUI 对话框后，我想执行一个 GET 请求，并根据响应更改按钮文本。经过几个小时的努力，我终于得到了以下工作。这真的是最好的/唯一的吗？谢谢

```
$("#dialog").dialog({
    open        : function() {
        var dialog=$(this);
        $.get('ajax.php', function (data) {
            var buttons=dialog.dialog( "option", "buttons" );
            buttons[1].text=(data==1)?"CANCEL":"CLOSE";
            var buttons=dialog.dialog( "option", "buttons" ,buttons);
        });
    },
    buttons     : [
        {
            text    : 'SAVE',
            click    : function() {}
        },
        {
            text    : 'CANCEL',
            click    : function() {}
        }
    ]    
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:45:49.277

您可以像这样更改按钮文本...

下面给出的是没有ajax

```
function setbutton(button1, button2) {
var btns = {};
btns[button1] = function() {
    //your function
   $( this ).dialog( "close" );
};
btns[button2] = function() {
    // Do nothing
    //your function
    $( this ).dialog( "close" );
};

document.getElementById('dialogshow').innerHTML = "<div>open with given button text</div>";

$( "#dialogshow" ).dialog({
    autoOpen: true,
    width: 450,
    height: 200,
    modal: true,
    position: 'center',
    modal: true,
    buttons: btns
});
}
$('.test').click(function() {
setbutton('start', 'End');//in here button name you want..
}); 
```

[观看现场演示](http://jsfiddle.net/Dineshkani/5sF2M/2/)

# java - 如何使 JLabel 浮动在 JScrollPane 内的相同 JComponent 之上

> ID：13626838
> 
> 赞同：2
> 
> 时间：2012-11-29T13:24:57.720
> 
> 标签：java, swing, jscrollpane, jlabel, jlayeredpane

里面有20`JLabel`秒`JScrollPane`。`JLayeredPane`上面提到的还有floatingLabel `JscrollPane`。

要求是，当我单击内部时`JScrollPane`，它应该自动滚动以使`JLabel`索引 11**完全**可见。`JLabel`当用户滚动时， floatingLabel 应该开始在 11 以上浮动`JScrollPane`，请参阅`AdjustmentListener`。

问题[编辑]：1.如何检查 JLabel 11 是否完全或部分不可见？

SSCCE：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Point;
import java.awt.event.AdjustmentEvent;
import java.awt.event.AdjustmentListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JLayeredPane;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class JScrollPaneTest {
    protected ArrayList<JLabel> labels = new ArrayList<JLabel>();
    protected JLabel floatingLabel = new JLabel("floating");
    protected JFrame frame;
    protected JScrollPane sPane;
    protected JLayeredPane lPane;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JScrollPaneTest();
            }
        });
    }

    public JScrollPaneTest() {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());

                lPane = new JLayeredPane() {
                    private static final long serialVersionUID = 1L;

                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(800, 600);
                    }
                };

                JPanel panel = new JPanel ();

                panel.setLayout(new GridBagLayout());
                GridBagConstraints gbc = new GridBagConstraints();

                for (int i = 0; i < 20; i++) {
                    JLabel label = new JLabel("  | Label" + i + " |  ");
                    panel.add(label, gbc);
                    labels.add(label);
                }

                panel.addMouseListener(new MouseAdapter(){
                    public void mousePressed (MouseEvent me) {
                        JLabel label = labels.get(11);
                        label.scrollRectToVisible(label.getBounds());

                        Point loc = label.getLocation();
                        Point wrPos = SwingUtilities.convertPoint(label, loc, lPane);
                        floatingLabel.setLocation(wrPos);
                        floatingLabel.setVisible(true);
                    }
                });

                sPane = new JScrollPane(panel) {
                    private static final long serialVersionUID = 1L;

                    @Override
                    public Dimension getPreferredSize() {
                        return new Dimension(600, 400);
                    }
                };

                sPane.getHorizontalScrollBar().addAdjustmentListener(new AdjustmentListener() {
                    @Override
                    public void adjustmentValueChanged(AdjustmentEvent ae) {
                        System.out.println("adjustmentValueChanged: " + ae.getValue());

                        //if label11 is not visible
                        //floatingLabel.setVisible(false);
                        //else floatingLabel.setLocation();
                    }
                });

                lPane.add(sPane, JLayeredPane.PALETTE_LAYER);
                sPane.setBounds(100, 100, (int)sPane.getPreferredSize().getWidth(), (int)sPane.getPreferredSize().getHeight());

                lPane.add(floatingLabel, JLayeredPane.POPUP_LAYER);
                floatingLabel.setBounds(100, 100, 50, 30);
                floatingLabel.setBorder(BorderFactory.createLineBorder(Color.red));

                frame.getContentPane().add(lPane);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

解决的问题：

1.  JLabel 11点击后不完全可见，被裁剪了一半
2.  单击时我无法计算浮动面板的正确位置
3.  我不知道如何计算滚动时的新位置

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:49:34.853

```
label.scrollRectToVisible(new Rectangle(0,0,label.getWidth(), label.getHeight())); 
```

在点击中使用它

```
public void mousePressed (MouseEvent me) {
  JLabel label = labels.get(11);
  label.scrollRectToVisible(new Rectangle(0,0,label.getWidth(), label.getHeight()));

  //Point loc = label.getLocation();
  Point loc = new Point(0,0);
  Point wrPos = SwingUtilities.convertPoint(label, loc, lPane);
  floatingLabel.setLocation(wrPos);
  floatingLabel.setVisible(true);
}

public void adjustmentValueChanged(AdjustmentEvent ae) {
  System.out.println("adjustmentValueChanged: " + ae.getValue());

  JLabel label = labels.get(11);

  Point loc = new Point(0,0);
  Point wrPos = SwingUtilities.convertPoint(label, loc, lPane);
  floatingLabel.setLocation(wrPos);
  floatingLabel.setVisible(true);
} 
```

# android - Android - 无法初始化监视器线程：无法建立环回连接

> ID：13626840
> 
> 赞同：0
> 
> 时间：2012-11-29T13:25:00.727
> 
> 标签：android, eclipse, eclipse-plugin

我正在尝试在我的 android 手机上从 eclipse 运行一个 android 应用程序。它已经工作了3-4个月。从那天起突然停止工作。

我尝试了stackoverflow上其他各种线程中提到的多个选项，包括1.禁用Teredo接口2.将“-Djava.net.preferIPv4Stack=true”添加到eclipse.ini和ddms.bat 3.停止/启动adb服务器。启动/停止日食等。

进一步观察 1\. 从命令提示符运行 ddms.bat 会检测到我的手机。但是，在 Eclipse AVD 管理器下或从 Eclipse 运行 ddms 时未检测到电话。2.我在android中创建的虚拟模拟器可以从eclipse中打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:08:15.527

我解决了这个问题。我的防病毒防火墙阻止了我的安卓手机被识别。不得不禁用防火墙，现在一切正常。

干杯。

# c# - 正则表达式获取 12 个数字

> ID：13626843
> 
> 赞同：-1
> 
> 时间：2012-11-29T13:25:14.970
> 
> 标签：c#, vb.net

我是正则表达式的新手。如何检查用户输入在正则表达式中是否介于 0-12 之间？

```
Ex:'012','012345','012345678901' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:33:22.207

正则表达式：

```
^[0-9]{0,12}$ 
```

*   `^`-> 以（之前没有字符）开头。
*   `[0-9]`-> 从 0 到 9 的任何字符。可以替换为`\d`以匹配来自不同编码的任何数字。
*   `{0,12}`-> 0 到 12 次。
*   `$`-> 以（后面没有字符）结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T13:29:17.443

以下应该做：

```
^[0-9]{0,12}$ 
```

认为这也将匹配空行。

# javascript - Webform 计算来自 3rd 字段中的 2 个 timepicker 字段的时间差

> ID：13626846
> 
> 赞同：0
> 
> 时间：2012-11-29T13:25:24.660
> 
> 标签：javascript, timepicker

我有一个网络表单，用户在字段 1（开始时间）中选择一个时间，然后在第二个字段（结束时间）中选择时间。第三个字段是总时间，用户当前手动计算时间并在此字段中输入。是否有可能有一个时间计算器（javascript），它会给出开始和结束时间差的结果并将其输入到总时间字段中？另外我正在使用时间选择器作为开始和结束时间谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:34:44.283

老派的方法是从每个时间选择器获取时间并将其更改为毫秒。然后计算差异并将其更改回您的时间格式。在纯 Javascript 中，日期对象是你的朋友。

PS：据我所知，它存在一个用于计算时间的 JQuery 插件。这对您来说使用起来更舒适。

# wpf - 即使用户控件折叠/隐藏也会显示错误样式

> ID：13626875
> 
> 赞同：5
> 
> 时间：2012-11-29T13:27:32.027
> 
> 标签：wpf, styles, idataerrorinfo, validation

我有一个用户控件来验证它的内容。

我正在使用 IDataErrorInfo 来验证输入（我必须使用 .Net 3.5）。

我正在关注本教程：http: [//japikse.blogspot.ch/2009/07/idataerrorinfo-error-templates-and-wpf.html](http://japikse.blogspot.ch/2009/07/idataerrorinfo-error-templates-and-wpf.html)

这意味着我正在使用以下样式：

```
<Style TargetType="{x:Type TextBox}">
<Style.Triggers>
    <Trigger Property="Validation.HasError" Value="true">
        <Setter Property="Background" Value="Pink"/>
        <Setter Property="Foreground" Value="Black"/>
    </Trigger>
</Style.Triggers>
<Setter Property="Validation.ErrorTemplate">
    <Setter.Value>
        <ControlTemplate>
            <DockPanel LastChildFill="True" 
               ToolTip="{Binding ElementName=controlWithError,Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                <TextBlock DockPanel.Dock="Right" 
                   Foreground="Red"
                   FontSize="14pt" 
                   Margin="-15,0,0,0" FontWeight="Bold">*
                </TextBlock>
                <Border BorderBrush="Red" BorderThickness="1">
                <AdornedElementPlaceholder Name="controlWithError" />
                </Border>
            </DockPanel>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

问题是，在某些情况下，我必须隐藏表单（当没有选择任何元素时），但是当我显示没有错误的表单时，然后我折叠表单（网格），UserControls 中的文本框（这是无效的，因为它们不接受空值）得到红色边框和星号：

![在此处输入图像描述](../Images/bb0dcf1609c36a31e14a002bf9f1f9b2.png)

不隐藏时的相同形式： ![在此处输入图像描述](../Images/ff70d3d760176079f19d2b9ca0e971d7.png) 请注意：只有ErrorTemplate的内容是可见的，触发器的内容（粉红色背景，黑色前景）不适用。

所以我认为这种风格有问题，但我对 WPF 风格不够熟悉，无法理解原因。

另一个奇怪的事情：如果我有具有相同验证的文本框（而不是用户控件中的文本框），它们会被正确隐藏。

**编辑** 我发现了一些对我有很大帮助的其他东西，首先是这个主题： [隐藏控件时隐藏验证装饰](https://stackoverflow.com/questions/4855147/hiding-validation-adornment-when-hiding-a-control) 有了这个，我做了以下事情：将我的用户控件可见性绑定到隐藏元素的可见性，然后在用户控件中，我将文本框可见性绑定到用户控件可见性，然后（最后）添加一个样式触发器：

```
<Style TargetType="{x:Type TextBox}">
        <Style.Triggers>
            <Trigger Property="Validation.HasError" Value="true">
                <Setter Property="Background" Value="Pink"/>
                <Setter Property="Foreground" Value="Black"/>
            </Trigger>
            <Trigger Property="Visibility" Value="Visible">
                <Setter Property="Validation.ErrorTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <DockPanel LastChildFill="True" ToolTip="{Binding ElementName=controlWithError,Path=AdornedElement.(Validation.Errors)[0].ErrorContent}" >
                                <TextBlock DockPanel.Dock="Right" Foreground="Red" FontSize="14pt" Margin="-15,0,0,0" FontWeight="Bold">*</TextBlock>
                                <Border BorderBrush="Red" BorderThickness="1">
                                    <AdornedElementPlaceholder Name="controlWithError" />
                                </Border>
                            </DockPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </Style.Triggers>
</Style> 
```

它几乎可以工作！，唯一剩下的就是一个小红点，它不知从何而来 ![在此处输入图像描述](../Images/803043350240d2671292f3f4fb2cec88.png)

任何想法从哪里来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:56:36.993

我找到了一种解决方法，它可能不是最好的方法（如果你有更好的方法，请告诉我！）。

所以首先，当我使用我的用户控件时，我将它的可见性绑定到我要隐藏的用户控件：

```
<userContols:BrowseFileControl  Visibility="{Binding ElementName=uxFormGrid, Path=Visibility}"/> 
```

其次，在 IDataErrorInfo 方法（`public string this[string columnName]`）中，我只在显示当前控件时返回错误。

```
 public string this[string columnName]
    {
        get
        {
            String result=null;
            if (Visibility == Visibility.Visible)
            {
                if (columnName == "FilePath")
                {
                    if (String.IsNullOrEmpty(FilePath))
                    {
                        if (!CanBeEmpty)
                        {
                            result = "Mandatory field";
                        }
                    }
                    else if (!IsValidFilePath(FilePath))
                    {
                        result = "Malformed path";
                    }
                }
            }
            return result;
        }
    } 
```

我更喜欢处理样式，但我没有找到完全去除任何红色标记的方法。

# sql - 循环 200 万条记录并根据每行中的特定条件生成一组更新或插入的最佳性能

> ID：13626878
> 
> 赞同：4
> 
> 时间：2012-11-29T13:27:39.947
> 
> 标签：sql, database, ssis, database-migration

我目前正在使用 SSIS 2012 进行大型数据迁移练习。

我有一项任务要完成，但不确定最佳方法。

表 A 有 210 万条记录。

我需要迭代每一行并且：

步骤 1\. 使用复杂子查询的结果更新特定字段，执行一些文本操作

步骤 2\. 从 TableA 第2a行的电子邮件字段中获取电子邮件地址。查找用户表
2b。如果电子邮件存在，则获取 ID 并更新 TableA 行
2c 中的 UserId。如果电子邮件不存在 - 在 User 表中插入新记录，取回 ID 并更新 TableA 行中的 UserId

第 1 步和第 2 步不必同时完成，这些任务可以拆分为单独的数据流，因为它们不相关。

我可以用游标来写这一切——非常简单，但我知道作为一般规则使用游标是不被接受的。

我使用新的 MERGE 函数为上面的第 1 步编写了一个纯 sql 脚本。它使用的子查询调用视图，而视图又使用缩放函数来执行一些复杂的文本操作。在此通过 SSIS 运行 1h 12m 之后，由于 tembDB.log 磁盘空间不足，SSIS 被炸毁。

不确定我的查询是导致 tembDB 失控还是之前运行的 SSIS 包中的其他原因？我怎么知道？

那么，有没有人对 SSIS 中实现上述第 1 步和第 2 步的最佳工具有任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:14:18.953

我想知道是什么限制了您使用 SSIS 而不是原始 SQL。这是一次性的工作，而不是常规的数据馈送？如果它是一次性的，我很想将源数据拉到目标数据库中的临时表（或同一服务器上的单独临时数据库）中，并在那里做复杂的事情。SSIS 非常适合重复的、定期的数据馈送；如果这不是必需的，那么我会使用 SQL。

（TBH我还没有探索过SSIS的一些更高级的特性，行级操作）。

您可以将第 2 步拆分为两个 SQL 语句，在不同的集合上运行：

**一个。**电子邮件确实存在的行集；

**湾。**不存在电子邮件的行集

在开始之前对行进行“分类”，而不是在每一行上进行；仔细检查你的两组是否覆盖了整个桌子。如果您更喜欢 SSIS，则可以在 SSIS 中的单独数据流中执行此操作（只要您的源数据库允许您针对它运行 SQL，而不仅仅是将整个表转储）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:42:32.160

对于第 1 步，“复杂子查询”的 SSIS 等效项通常是带有查找的数据流。“文本操作”/“标量函数”的 SSIS 等效项通常是带有脚本转换的数据流。无论您可以在 T-SQL 中编码的任何操作都可以在 .NET 中完成，您可以利用 .NET 库，例如 Regex、HTMLEncode 等，它可能会更优雅并且运行得更快。

对于第 2 步，我将使用 OLE DB 源启动一个新的数据流，它为您提供来自 TableA 的不同电子邮件值。然后添加一个查找转换来检查您的“用户表”。忽略匹配并将不匹配的行发送到 OLE DB 目标以将它们插入您的“用户表”。

然后添加另一个数据流，该数据流采用所有 TableA 行，查找“用户表”值并将批次插入临时表。如果您必须将所有内容恢复到 TableA 中，您可以在此时截断并重新加载它 - 比更新或游标快得多。

# android - 如何处理android中的多个Webviews问题？

> ID：13626879
> 
> 赞同：1
> 
> 时间：2012-11-29T13:27:45.710
> 
> 标签：android, android-webview, android-scrollview

我正在我的 xml 页面中开发一个带有 webviews 的 android 应用程序。这里我在我的设计页面中使用了 2 个 webviews 来显示来自链接的不同文本。当我在 ICS 设备中执行应用程序时，我的视图中出现了一些闪烁（抖动）。我发现视图加载是整个视图闪烁的问题。我想停止闪烁我的视线。但我不知道该怎么做。请建议我是否有任何可能。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:15:14.077

嗨，终于我在scrollview中找到了多个webviews问题的解决方案。我一一加载了我的webview。在这里，我将 webview 客户端用于我的第一个 webview。Webview 客户端有两个覆盖方法，如 onPageStarted() 和 onPageFinished()。我在第一个 webview webclient 的 onPageFinished() 方法上加载了我的第二个 webview。就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:34:34.763

我宁愿使用 Intents 来处理这个问题。在每个意图中，您都可以创建具有固定 URL 的客户端。

如果你有多个 WebView 对象，最好创建一个新的 Intent 来做转换，这样可以避免潜在的怪异行为。特别是在 2.*.

新的 Intents 还可以在点击返回按钮时处理导航和网络历史记录。

在“处理页面导航”段落中查看此 URL：http: [//developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T05:00:17.877

你也可以使用

```
holder.web_view1.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
holder.web_view2.setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

停止闪烁

# arrays - 简单类型错误

> ID：13626880
> 
> 赞同：0
> 
> 时间：2012-11-29T13:27:50.810
> 
> 标签：arrays, types, lisp, common-lisp

我制作了一个可执行文件，其中包括对数组的调用。当我执行程序时，我得到了错误

```
Condition of type: SIMPLE-TYPE-ERROR
In function AREF, the index into the object
 #(0.00387149 3.0345068e-4 5.9720734e-4 -1.6648759e-5 0.058811672).
takes a value 5 out of the range (INTEGER 0 4). 
```

我查找了简单类型错误，我相信它发生在值是意外类型时。但是我的印象是您不必在 Lisp 中指定类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:35:33.953

您不必这样做，但是当您使用错误类型的对象调用函数时，Lisp 系统可能会抱怨。

```
CL-USER 7 > (sin "a string")

Error: In SIN of ("a string") arguments should be of type NUMBER. 
```

针对您的问题的 LispWorks 错误报告不那么“技术性”：

```
CL-USER 8 > (aref #(a b c d) 4)

Error: The subscript 4 exceeds the limit 3 for the first dimension 
of the array #(A B C D). 
```

这是有道理的，因为维度是从零开始的。上述向量的索引为 0、1、2 和 3。但不是 4。

```
CL-USER 10 > (typep 4 '(integer 0 3))
NIL 
```

所以 4 不是 0 到 3 范围内的整数。

# postgresql - 基于秒的 Postregsql 日期差异

> ID：13626887
> 
> 赞同：30
> 
> 时间：2012-11-29T13:28:07.643
> 
> 标签：postgresql

如何在 PostgreSQL 中以秒为单位找到两个日期之间的日期差异？

没有像 SQL-Server 那样以秒为单位给出日期差异的函数：

```
DATE_DIFF(second, '2011-12-30 09:55:56', '2011-12-30 08:54:55') 
```

请帮助我在 PostgreSQL 中也有这个

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-29T13:36:01.413

首先，日期需要是类型的值（如果您只是将它们指定为字符串文字，请`timestamp`附加）。`::timestamp`

如果减去两个时间戳，结果是`interval`类型，它描述了持续时间（以小时、分钟、秒等为单位）。您可以使用`extract(epoch from interval_value)`将时间间隔转换为绝对秒数。

所以，把所有这些放在一起：

```
select extract(epoch from ('2011-12-30 09:55:56'::timestamp - '2011-12-30 08:54:55'::timestamp)); 
```

请记住，`::timestamp`仅需要将字符串文字转换为时间戳：例如，如果您使用时间戳列的值，则不需要它。

# iphone - 登录在 Safari 中工作，但在 UIWebView 中不工作

> ID：13626890
> 
> 赞同：1
> 
> 时间：2012-11-29T13:28:08.207
> 
> 标签：iphone, ios

我有一个非常简单的 iOS 应用程序，它只显示一个`UIWebView`需要登录的网站。如果我运行我的应用程序并尝试登录该站点，则会重新显示登录页面（没有错误消息）。如果我使用 Safari，我可以登录到同一个站点。我可能做错了什么`UIWebView`？万一重要，该站点使用 SSL / https。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T02:35:54.337

原来问题是这样的：[Asp.Net Forms Authentication when using iPhone UIWebView](https://stackoverflow.com/questions/4158550/problem-with-asp-net-forms-authentication-when-using-iphone-uiwebview)

（UIWebView 发送一个 ASP.NET 无法识别的奇怪用户代理标头，因此它认为它无法处理 cookie。这显然已在 ASP.NET 4.5 中修复，即使在早期版本中，您也可以在服务器上修复它，如果您可以访问 ASP.NET 站点）

答案就在这里：[Change User Agent in UIWebView (iPhone SDK)](https://stackoverflow.com/questions/478387/change-user-agent-in-uiwebview-iphone-sdk)

链接到：[http ://www.mphweb.com/en/blog/easy-set-user-agent-uiwebview](http://www.mphweb.com/en/blog/easily-set-user-agent-uiwebview)

关键部分是将此代码放入您的应用程序启动代码中：

```
- (BOOL)application:(UIApplication *)application
        didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    NSDictionary *dictionary = [NSDictionary 
        dictionaryWithObjectsAndKeys:
        @"Mozilla/5.0 (iPod; U; CPU iPhone OS 4_3_3 like Mac OS X; ja-jp) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5", 
        @"UserAgent", nil];
    [[NSUserDefaults standardUserDefaults] registerDefaults:dictionary];
} 
```

这会更改用户代理。有许多其他方法可以做到这一点，其中一些非常复杂（其中一种称为“swizzling”），并且大多数都不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:57:38.447

在这种情况下，UIWebView 需要实现正确的委托协议方法，以允许您与后端架构进行通信。请看看[这个](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebPolicyDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003835)，[这个](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebUIDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003838)和[这个](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Protocols/WebResourceLoadDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40003836)。

# php - Amazon Ses 电子邮件发送速度非常慢

> ID：13626895
> 
> 赞同：2
> 
> 时间：2012-11-29T13:28:21.410
> 
> 标签：php

我正在尝试使用 Amazon SES 发送大约 28000 封电子邮件，但问题是电子邮件在过去 7 小时内发送速度非常慢，仅发送了 8000 封电子邮件，我已经设置了一个 cron 作业来在服务器端运行脚本来发送电子邮件，这是早上 8 点触发的，现在大约 15:23 的电子邮件仍在发送。

我正在使用 phpMailer 使用 smtp 通过亚马逊发送电子邮件。我怎样才能使这个过程更快地工作，我应该采取一些措施吗？

我已经尝试 curl 使用 SES api 发送电子邮件。但同样的结果。我的限制是每天 50000 封电子邮件，每秒发送 14 封电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:48:59.007

亚马逊表示，如果您使用单线程创建连接以发送邮件，邮件发送速率（最大速率为每秒 70 个）并不是特别快（**编辑：显然速率因用户而异*），将会很慢邮件。他们建议，为了达到更高的每秒发送速率，您应该使用多线程，这将允许您创建多个线程，从而为电子邮件传递创建多个连接。

对于如何在 PHP 中处理多线程，这里有很多关于如何实现它的好答案（或者类似的东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T02:01:48.997

通过 API 发送时，您还可以在“目的地”属性中最多添加 50 个收件人。这将允许您批量处理每封电子邮件 50 个块。也就是说，如果你真的能做到。显然，电子邮件必须相同，并且不能针对每个电子邮件地址进行自定义。

另一个想法是启动更多的工作节点来发送这些电子邮件。

# grails - 在 Grails 中安装 yui 插件后插件不出现

> ID：13626897
> 
> 赞同：1
> 
> 时间：2012-11-29T13:28:30.443
> 
> 标签：grails, grails-plugin

我刚刚尝试安装 YUI 插件（为了安装[Grails UI 插件](http://www.grails.org/plugin/grails-ui)，这需要 YUI 插件和 Bubbling 插件），但现在我完全坚持它对我的 Eclipse 所做的事情。安装后，我尝试运行 refresh-dependencies 命令并收到此错误：

加载 Grails 2.1.0 | 配置类路径 :: 问题摘要 :: :::: ERRORS 服务器访问错误：连接被拒绝：连接 url=http://localhost:8081/artifactory/plugins-releases-local/org/grails/plugins/yui/%5B2。 6.0,)/yui-%5B2.6.0,).pom

```
Server access Error: Connection refused: connect url=http://localhost:8081/artifactory/plugins-releases-local/org/grails/plugins/yui/maven-metadata.xml

Server access Error: Connection refused: connect url=http://localhost:8081/artifactory/plugins-releases-local/org/grails/plugins/yui/%5B2.6.0,)/yui-%5B2.6.0,).zip 
```

| 错误 执行脚本时出错 RefreshDependencies: 在插件目录 '\storage.adsroot.itcs.umich.edu\home\windat.V2.grails\2.1.0\projects\HardwareProject4\plugins\yui-minify-resources-0.1 中找不到插件描述符.4'。（使用 --stacktrace 查看完整的跟踪信息）

此外，即使我确认已安装 Grails UI、YUI 插件和 Bubbling 插件，Eclipse 中的插件目录也突然为空（我还预先安装了插件平台 UI 和自定义插件）。所以现在我什至不能卸载任何插件，如果我需要的话。

有没有人遇到过这个问题？关于如何解决这个问题的任何想法？任何帮助将不胜感激......在此先感谢。

# php - 在 MySQL/PHP 中为变量留出空间

> ID：13626901
> 
> 赞同：0
> 
> 时间：2012-11-29T13:28:46.990
> 
> 标签：php, mysql, string, variables

我敢肯定我以前见过这样做，但不知道它叫什么，我正在努力寻找任何教程等。

基本上我想在 MySQL 中存储一个字符串，但每次都为不同的变量留一个空间。

我很确定我已经看到了更好的方法，但只是为了解释我试图解决的问题......我想要存储在我的 MySQL 表中的以下字符串，然后我将其放入PHP变量：

```
"This user has ##variable## points left before reaching the next
level" 
```

然后在 PHP 中我会这样做：

```
str_replace("##variable##", $new_var, $mysql_string); 
```

我知道上述方法可行，但我确信我在某处见过更好的方法。我想象过吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:30:44.497

```
sprintf(gettext("some text %s"),$variable); 
```

在哪里`%s`替换为`$variable`。

# php - 需要组合具有相同键的 PHP Array 项

> ID：13626907
> 
> 赞同：-1
> 
> 时间：2012-11-29T13:29:07.537
> 
> 标签：php, arrays

```
[0] => Array
        (
            [2148] => 2
            [2149] => 1
            [2150] => 0
        )
[1] => Array
        (
            [2148] => 4
            [2119] => 1
            [2130] => 0
        ) 
```

所以这样的事情会很棒：

```
[array_complete] => Array
        (
            [2148] => array(2,4)
            [2149] => 1
            [2150] => 0
            [2119] => 1
            [2130] => 0
        ) 
```

调查数组推送等，但不完全确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:31:58.473

非常简单，如果您使用关联数组，请使用 array_merge_recursive。这是文档：[http ://www.php.net/manual/en/function.array-merge-recursive.php](http://www.php.net/manual/en/function.array-merge-recursive.php)

```
$array_complete = array_merge_recursive($array[0], $array[1]); 
```

由于您使用的是索引数组，因此您需要创建一些自定义的东西。这是我拼凑起来的一些对你有用的东西（注意它只适用于具有标量值的一维数组）：

```
$array_complete = array_merge_recursive_indexed($array[0], $array[1]);

function array_merge_recursive_indexed($a1, $a2) {
    $merged = array();
    $keys = array_merge(array_keys($a1), array_keys($a2));
    foreach ($keys as $key) {
        if (isset($a1[$key])) {
            if (isset($a2[$key])) {
                $merged[$key] = array($a1[$key], $a2[$key]);
            } else {
                $merged[$key] = $a1[$key];
            }
        } else if (isset($a2[$key])) {
            $merged[$key] = $a2[$key];
        }
    }
    return $merged;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:38:56.300

尝试这个

```
$array1 = array(2148 => 2, 2149 => 1 , 2150 => 0, 1234 => 3);
$array2 = array(2148 => 4, 2149 => 1 , 2150 => 0, 123=> 3);

$res = array();

function merge($array1, $array2, array &$res = null) {
    $loop = false;
    if(null == $res) {
        $res = array();
        $loop = true;
    }
    foreach($array1 as $key => $val) {
        if(false == array_key_exists($key, $array2) || $array2[$key] == $val) {
            $res[$key] = $val;
        }
        else {
            if(array_key_exists($key, $res) && false == is_array($res[$key])) {
                $res[$key] = array($res[$key]);
            }
            $res[$key][] = $val;
        }
    }

    if(true === $loop) {
        return merge($array2, $array1, $res);
    }

    return $res;
}

print_r(merge($array1, $array2));exit; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:32:51.687

`array_merge_recursive`将数组键转换为非数字键后使用。如果您按原样使用它，冲突的键将简单地重新编号。

所以总的来说：

```
$arr1 = array("a2148"=> 2, "a2149" => 1, "a2150" => 0);
$arr2 = array("a2148" => 4,"a2119" => 1, "a2130" => 0);
var_dump(array_merge_recursive($arr1,$arr2)); 
```

输出：

```
array(5) {
  ["a2148"]=>
  array(2) {
    [0]=>
    int(2)
    [1]=>
    int(4)
  }
  ["a2149"]=>
  int(1)
  ["a2150"]=>
  int(0)
  ["a2119"]=>
  int(1)
  ["a2130"]=>
  int(0)
} 
```

这是一个演示：[http ://codepad.org/k8zvK0nL](http://codepad.org/k8zvK0nL)

# mysql - 启用 MySQL 性能监视器

> ID：13626914
> 
> 赞同：1
> 
> 时间：2012-11-29T13:29:31.750
> 
> 标签：mysql, phpmyadmin, xampp, monitor, status

我喜欢收集统计数据来分析和提高整体性能......在我的小型服务器上安装 Xampp 1.8.1 后，我正在浏览 phpMyAdmin 面板，并在面板监视器 - 在状态选项卡下 - 它显示以下消息：

=====

显示器刷新失败

在请求新图表数据时，服务器返回了无效响应。这很可能是因为您的会话已过期。重新加载页面并重新输入您的凭据应该会有所帮助。

=====

我看过，但找不到任何相关内容...我尝试重新加载页面但没有成功..

我已经对 MySQL 配置文件进行了更改以允许这些统计信息..

那是因为我在**WINDOWS**服务器上使用它吗？（不幸的是，我现在无法将其更改为 Linux，因为我使用的是 Active Directory）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:32:26.957

I ran into the problem, but I hunted it down using **FireBug**. The problem was that my PHP didn't load the extension `php_com_dotnet.dll` which can be activated this way:

```
[COM_DOT_NET]

extension=php_com_dotnet.dll 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:42:58.230

当来自 AJAX 请求的响应无法解析为 JSON 数据时，会出现此错误。这也可能是由其他错误引起的。如果您有 Chrome 或 Firefox，请检查选项卡 Network (Chrome) 或 Net (Firefox) 中的开发人员工具/控制台，并查找对 server_status.php 的 ajax 请求。该 HTTP 请求的响应将有助于找出问题所在。

如果你进入调试，这可能是 PMA 中失败的地方：[https ://github.com/phpmyadmin/phpmyadmin/blob/master/js/server_status_monitor.js#L1369](https://github.com/phpmyadmin/phpmyadmin/blob/master/js/server_status_monitor.js#L1369)

此外，您使用 Windows 的事实也不是原因。我已经将它编程为在 Windows 下工作；-) MySQL 服务器设置也不太可能是它的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T13:46:06.847

Finnaly，我发现错误是因为我使用的是 Windows Server，现在看起来很明显。此面板仅适用于Linux，感谢大家的帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T13:32:57.397

您仍然可以使用[http://mtop.sourceforge.net/从 linux 客户端连接到它](http://mtop.sourceforge.net/)

或者，您可以启用[http://dev.mysql.com/doc/refman/5.0/en/slow-query-log.html](http://dev.mysql.com/doc/refman/5.0/en/slow-query-log.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-10T22:38:05.103

我在 Windows 上对 xampp 1.8.1 有同样的问题。解决了将 COM_DOT_NET 扩展添加到 php.ini 的问题。谢谢

# flyway - Flyway 命令行无法在文件系统上找到迁移

> ID：13626919
> 
> 赞同：5
> 
> 时间：2012-11-29T13:29:48.833
> 
> 标签：flyway

我正在使用 flyway 命令行工具进行数据库迁移。如果我将 SQL 迁移放在**SQL**目录中，它工作正常。但是，如果我将 Locations 属性设置为文件系统上的路径，它将失败而没有任何警告或错误。

例如：`flyway.locations=/file-path/`

如何指定文件系统路径？我不想将我的迁移放在**SQL**目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T06:19:29.763

您应该使用字符串“文件系统：”作为“迁移”目录的绝对路径的前缀，如下所示：

```
String path = "/my/project/sql/migrate/";
migrateRelease("filesystem:" + path);
flyway.setLocations(location);
flyway.migrate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:11:11.293

目前尚不支持此功能：[https ://github.com/flyway/flyway/issues/108](https://github.com/flyway/flyway/issues/108)

作为一种解决方法，您可以将 /sql 符号链接到要使用的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-28T17:27:07.387

感谢 Axel，它正在使用 3.2.1 版本。唯一需要注意的是迁移文件上的版本号应该比 schema_version 表上的版本号多。否则，您可能会在运行 migrate 命令后得到以下结果；

```
Flyway 3.2.1 by Boxfuse

Database: jdbc:mysql://...
Validated 1 migration (execution time 00:00.009s)
Current version of schema `ref_db`: 1
Schema `ref_db` is up to date. No migration necessary. 
```

# qt - 这个 UTF-8 编码是否正确？

> ID：13626928
> 
> 赞同：0
> 
> 时间：2012-11-29T13:30:14.617
> 
> 标签：qt, utf-8

我有一个 Qt 应用程序（C++），我有一个 unicode 字符串（在 QString 中）。我将字符串发送给 2 个客户端，一个接收二进制数据，另一个接收 JSON。

当我发送以下字符串“Milanović”时，字母“ć”在客户端被搞砸了。虽然我什至不确定它是否从服务器正确发送。

我正在向接受二进制数据的客户端发送该字符的以下字节：c4 86。这就是我从 QString::toUtf8() 得到的。

对于 JSON，我使用的是 QJson，它将该字符串转换为“MilanoviÄ”。嗯，这就是我在控制台中看到的。字节仍然是“c4 86”。

这是正确的，还是我应该在服务器端改变一些东西？我可以将 QJson 库更改为不对代码> 127 的字符进行转换，但我宁愿不进行转换，除非我必须这样做。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:16:09.373

您应该让客户端告诉服务器他们真正想要什么编码，然后在将文本发送到客户端之前通过适当的 QTextEncoder 运行文本。

# java - IllegalAccessError：尝试在使用 ANT 构建 Android 时访问类

> ID：13626930
> 
> 赞同：0
> 
> 时间：2012-11-29T13:30:23.420
> 
> 标签：java, android, ant

我们正在使用**ANT**构建我们的 android 应用程序。在升级到最新的**SDK 工具（Rev 21）**和**平台工具（Rev 16）**并在 manifest.xml 中设置**android:targetSdkVersion="17"**后，我们的 ant 构建失败并出现**IllegalAccessError**。

奇怪的是，双*蚂蚁发布*成功了：

*   *ant clean* -> 构建成功
*   *ant release* - > 构建失败
*   *ant release* - >**构建成功**

虽然显然我们真正想要做的不是：

*   *ant clean release* -> 构建失败

*我已经使用android update project -p*重新生成了 build.xml 。导致相同的行为。

请参阅下面的 ANT 输出：

```
release:

-pre-build:

-code-gen:
[mergemanifest] Merging AndroidManifest files into one.
[mergemanifest] Manifest merger disabled. Using project manifest only.
     [echo] Handling aidl files...
     [aidl] No AIDL files to compile.
     [echo] ----------
     [echo] Handling RenderScript files...
[renderscript] No RenderScript files to compile.
     [echo] ----------
     [echo] Handling Resources...
     [aapt] Generating resource IDs...

BUILD FAILED
/home/me/android-sdks/tools/ant/build.xml:645: The following error occurred while executing this line:
/home/me/android-sdks/tools/ant/build.xml:683: java.lang.IllegalAccessError: tried to access class com.google.common.base.Platform from class com.google.common.base.CharMatcher
    at com.google.common.base.CharMatcher.precomputed(CharMatcher.java:684)
    at com.google.common.base.CharMatcher.<clinit>(CharMatcher.java:63)
    at com.google.common.base.Splitter.on(Splitter.java:129)
    at com.android.sdklib.internal.build.SymbolWriter.write(SymbolWriter.java:51)
    at com.android.ant.AaptExecTask.execute(AaptExecTask.java:711)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
    at com.android.ant.IfElseTask.execute(IfElseTask.java:120)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:398)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:809)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 2 seconds 
```

来自白雪皑皑的中欧的许多感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T09:29:22.833

也许这会在遇到此错误时对某人有所帮助：

我有同样的问题，原因是 Ant 的类路径中的 JAR 重复。在我的例子中，checkstyle-5.6-all.jar 被添加到包含上述类的 ANT_HOME\lib 文件夹中，由于重复的类和它们之间的访问导致了一些错误。

在这种情况下，我建议为使用此库的 Ant 目标添加一个本地类路径变量，并尽可能保持 ANT_HOME\lib 干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T12:09:56.650

我遇到了同样的问题，几个小时后解决了。只需使用最新的 ANT（但不是 Jenkins 附带的那个）
，似乎 apache-ant-1.8.4 有一些问题。
但是在下载了最新的**apache-ant-1.9.1之后**之后， ant 能够使用 library-project 成功构建项目

使用库项目构建的系统配置：

```
>ANT: 1.9.1
>Android SDK - 22 rev
>java 1.6.0_38 
```

# c++ - 释放字符数组时程序崩溃

> ID：13626933
> 
> 赞同：2
> 
> 时间：2012-11-29T13:30:31.263
> 
> 标签：c++

当我在调试模式下运行使用以下代码创建的 .exe 时，它​​显示一些断言失败并且程序崩溃但是当我运行从以下代码的发布模式创建的相同 exe 时，它​​工作正常。

请帮助确定为什么我在调试模式下出现断言失败，但在发布模式下却没有。

```
#include<iostream>
using namespace std;
#include<string.h>

void main()
{
    char *buf  = new char[5];   //pre-allocated buffer
    buf = "Hello";
    delete [] buf;
    getchar();
    //cout<<buf;
    //string *p = new (buf) string("hi");  //placement new
    //string *q = new string("hi");  //ordinary heap allocation
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:34:52.587

1.  `void main`是错的。`main`返回`int`。没有例外。
2.  你在做`delete[] "Hello"`。`"Hello"`是字符串文字；你不能`delete`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T13:35:06.293

```
 char *buf  = new char[5];   //pre-allocated buffer 
```

在这里，您定义一个指针，并将其初始化为指向一个动态分配的缓冲区，其中有 5 个字符的空间。

```
buf = "Hello"; 
```

在这里，您将指针初始化为指向字符串文字的开头。

```
 delete [] buf; 
```

在这里，您删除 [] buf 指针，但 buf 指针不再指向您新建 [] 的任何内容，它指向字符串文字。您只能删除/删除 [] 指向您从 new/new[] 获得的内容的指针。所以你会得到未定义的行为，并且可能会崩溃

您可能打算将字符串的内容复制到您 new[]'d 的缓冲区中。请记住考虑 nul 终止符：

```
int main()
{
    char *buf  = new char[6];   //pre-allocated buffer
    strcpy(buf, "Hello");
    delete [] buf;
    getchar();
    //cout<<buf;
    //string *p = new (buf) string("hi");  //placement new
    //string *q = new string("hi");  //ordinary heap allocation
} 
```

虽然，在 C++ 中，你宁愿使用 std::string from `#include <string>`;

```
std::string = "Hello"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T13:36:47.733

您正在尝试解除分配字符串文字`"Hello"`。这一行：

```
buf = "Hello"; 
```

**将指针** 重定向`buf`到字面量`"Hello"`。您可能打算这样做：

```
char *buf = new char[6]; //need one extra space for terminating NUL character
strcpy(buf, "Hello"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T13:34:45.597

当你这样做时：

```
buf = "Hello"; 
```

您基本上是在更改指向`buf`只读内存区域的指针值（内存地址），因为`"Hello"`它是字符串文字，因此存储在只读内存中。

然后您尝试释放该内存，从而导致崩溃。

此外，`"Hello"`是 6 字节长，而不是 5。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-29T13:35:50.070

因为未定义的行为意味着任何事情都可能发生。问题是`buf = "Hello"`将字符串文字的地址分配给`buf`，然后尝试删除该文字。在调试模式下编译时，检查代码看到地址不能被删除；在发布模式下，检查没有完成，删除只是踩在不重要的东西上。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-29T13:35:33.220

```
 char *buf  = new char[6];   //pre-allocated buffer
 strncpy(buf, "hello", 6);
 delete [] buf; 
```

buf = "你好"; 将改变 buf 的值，从指向 new char[6] 的指针变为指向“hello”的指针，即不在堆中的内存块。

# javascript - 将图像保存到硬盘没有提示？

> ID：13626936
> 
> 赞同：8
> 
> 时间：2012-11-29T13:30:44.467
> 
> 标签：javascript, greasemonkey, tampermonkey, userscripts, filesystem-access

我用推特。有些人的推文包含照片，我想保存它们。

我检查了 ifttt，其中 twitter 不是触发器。因此，ifttt 无法帮助我做到这一点。

一种想法可能是使用 JavaScript。我使用 Firefox 并安装了 Greasemonkey。我可以编写一个在 twitter 网站上运行的 Greasemonkey 脚本 (JavaScript)。一旦我单击脚本添加的“转发”链接或其他按钮，我的脚本就会检查推文的内容，找到照片的 URL，并将其保存到我的磁盘中。

一个问题是如何保存图像。我搜索了互联网。一些使用`win.document.execCommand("SaveAs")`，它会显示一个“另存为”窗口。既然窗口显示了，为什么不直接右键单击图像并选择手动保存？所以我不喜欢这种方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-04-19T13:11:35.563

使用 Tampermonkey 或 Violentmonkey（Firefox 或 Chrome）时，这是可能的。那些用户脚本管理器添加了一个`GM_download`方法。

你可以像这样使用它：

```
// ==UserScript==
// @name         New Userscript
// @namespace    http://tampermonkey.net/
// @version      0.1
// @description  try to take over the world!
// @author       You
// @match        http*://*/*
// @grant        GM_download
// ==/UserScript==

var arg = { url: "https://example.com/123456.jpg",
            name: "CustomFileName.jpg"
          };

GM_download(arg); 
```

请参阅[Tampermonkey 官方文档](https://www.tampermonkey.net/documentation.php#GM_download)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T14:26:12.400

Greasemonkey 不能这样做，因为普通的 javascript 被禁止这样做（出于安全原因），并且[Greasemonkey API](http://wiki.greasespot.net/Category:API_Reference)没有公开写入文件的方法（[永远不会](https://github.com/greasemonkey/greasemonkey/issues/1877)）。

这里有四种选择：

1.  **更新：切换到 Tampermonkey**，[无论如何你都应该这样做](https://www.greasespot.net/2017/09/greasemonkey-4-for-users.html)。然后您可以按照*user136036*在[他的回答](https://stackoverflow.com/a/36719491/331508)中所说的那样使用[GM_download](https://tampermonkey.net/documentation.php#GM_download)。

     *或者* 
**   安装和~~使用[出色的***DownThemAll***插件](https://addons.mozilla.org/en-US/firefox/addon/downthemall/)~~（**更新：** Firefox 57 取消了对这种扩展的支持）。它仍然需要单击一下，但这比总是随意抓取文件要好，在大多数情况下无论如何。

    或者

    *   自己写~~添加在~~延期。 请参阅此（现已过时）答案，了解来自 FF 附加组件的顶级大师之一的[文件编写代码。](https://stackoverflow.com/a/12178002/331508)但是“新”风格的扩展仍然可以做到这一点。

    或者

    *   使用[XAMPP](http://www.apachefriends.org/en/xampp.html)（或类似软件）在您的机器上运行 Web 服务器。然后，您必须编写一个 Web 应用程序，将传入的图像数据（或只是图像 URL）除外，并将图像保存到磁盘。* 

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T13:33:35.810

JavaScript 无权访问计算机的文件系统。

对此没有本机 JS 功能。否则，任何站点都可以将任何内容保存到您的 PC 上，这将导致您的 PC 立即变得混乱。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T13:33:05.477

您将无法以您想要的方式执行此操作。如果浏览器允许网站将他们想要的任何内容直接保存到用户的计算机……那么你可以想象后果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T14:15:46.033

插件是这个问题的正确答案。如果您正在寻找一个框架 checkout [Firebreath](http://www.firebreath.org/display/documentation/FireBreath+Home)，它可以为您提供跨平台功能，并且可以在您能想到的所有可能的浏览器上运行，包括 IE。它也很容易学习

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T10:57:12.423

您可以在 Firefox 中轻松执行此操作，方法是选择从现在开始自动保存此选项而不是提示。我想这个选项也应该在 Chrome 中可用。

当您第一次下载新扩展名的文件时，例如 Zip 或 jpg，浏览器可能会提示您保存该文件的位置。在这种情况下，您可以将位置设置为要下载文件的默认位置，并将复选框设置为自动下载此类文件。*

# javascript - 使用 Socket.IO/Node.JS/Express.JS 监控 MySQL 的数据库

> ID：13626938
> 
> 赞同：1
> 
> 时间：2012-11-29T13:30:58.307
> 
> 标签：javascript, node.js

我想知道如何使用 Socket.IO 和 Node.JS 监控 MySQL 的数据库。这样做的目的是制作一个实时应用程序来为我的客户发送通知。我试图在网上搜索这些问题，但没有成功——不幸的是。

那么，有人可以帮助我吗？

提前致谢。

# iphone - 如何在 iOS UIAlertView 中调整文本标签

> ID：13626939
> 
> 赞同：0
> 
> 时间：2012-11-29T13:30:59.537
> 
> 标签：iphone, objective-c, uilabel, uialertview, sizewithfont

我一直在努力为我的 UIAlertView 调整标签，但我没有成功。我想让它根据字符串长度正确调整大小。我读到除了对它进行子类化之外没有什么可以做的，但是当我要这样做时，我发现了一个可以玩它的技巧。（下面的代码）

我可以成功地调整它的大小，为小字符串格式化字体等。我可以很好地适应我的一些字符串（<1000 个字符），但是更大的字符串（>1000 个字符）使它变得丑陋：

*   标签只是拒绝增长以适应额外的内容
*   尽管我减小了文本大小，但它并没有减小（对于不需要的较小字符串，它会减小。并且在需要较小的地方它仍然更大）
*   对于较大的字符串，该标签以白色背景（在设计时在 IB 中看到的）显示，字符串的尾随部分因较大的文本而被隐藏起来。

整个事情看起来完全一团糟。

以下是我如何潜入 UIAlertView 外观代码：

```
-(void)willPresentAlertView:(UIAlertView *)alertView
{
    UILabel *body = [alertView valueForKey:@"_bodyTextLabel"]; 

    body.lineBreakMode = UILineBreakModeWordWrap;
    // body.adjustsFontSizeToFitWidth = YES;

    CGRect  alFrame = body.frame;

    CGFloat pointSize;

    UIFont * font = [UIFont fontWithName:@"Verdana" size:10];

    CGSize labelSize = [body.text sizeWithFont:font minFontSize:8   actualFontSize:&pointSize forWidth:alFrame.size.width  lineBreakMode:UILineBreakModeWordWrap];

    NSLog (@"%f", labelSize.height);
    UIFont *actualFont = [UIFont fontWithName:@"Verdana" size:10];
    CGSize sizeWithCorrectHeight = [body.text sizeWithFont:actualFont];

    alFrame.size.height = sizeWithCorrectHeight.height*10;
    NSLog (@"%f - %f", alFrame.size.height, alFrame.size.width);
    body.numberOfLines = 8;
    body.frame = alFrame;
    body.font = actualFont;    
} 
```

请注意，注释行是我尝试过千次尝试的东西。未注释的也会产生相同的效果。正如我在这里编码的那样，较小的文本会调整。我只需要一个可以让我的标签显示所有文本的解决方案，而不管字符串长度如何 - 我知道它仍然有足够的空间，但它只是不会针对更大的字符串调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:10:27.860

这是我在许多运输应用程序中成功使用的 hack。

1.  用于`sizeWithFont`确定您需要多少空间（来自消息文本）。
2.  将消息设置为适当数量的`@"\n"`.
3.  使用您的文本插入一个新的透明`UILabel`作为警报视图的子视图。

如果你需要很长的文本，你可以尝试插入一个`UITextView`，理论上可以滚动。（如果你尝试它，请告诉我它是否有效。）但是，我强烈建议不要使用这种设计，而是构建一个合适的视图控制器。

```
[alertView addSubview:label]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:04:54.010

首先，[您不应该使用这些`sizeWithFont...`方法来计算`UILabel`s 的大小。](http://doing-it-wrong.mikeweller.com/2012/07/youre-doing-it-wrong-2-sizing-labels.html)

`UILabel`实现了您应该使用的标准 UIKit`sizeToFit`和方法。`sizeThatFits:`

如果您希望标签跨越多行，请首先设置`numberOfLines`为 0。然后使用此代码计算所需的大小：

```
CGSize requiredSize = [label sizeThatFits:CGSizeMake(availableWidth, CGFLOAT_MAX)];
labelFrame.size = requiredSize;
// ... 
```

或者，您可以先设置标签的宽度，然后调用`[label sizeToFit]`. 它将自行调整大小以适合其当前宽度。

# javascript - 我的 IP 地址的 Maxmind GeoIP 重定向异常

> ID：13626942
> 
> 赞同：1
> 
> 时间：2012-11-29T13:31:07.023
> 
> 标签：javascript, geoip, maxmind

我是一家加拿大公司。我有我的主要网站，所有产品均以美元计价，但随后使用此重定向，来自加拿大的任何流量都将重定向到我的另一个镜像网站，所有产品均以加元计价。

这是我在美国网站页面的 HEAD 中使用 Maxmind GeoIP Lite 的脚本。它完美地工作。

```
<script language="JavaScript" src="http://j.maxmind.com/app/country.js" type="text/javascript"></script>

<script language="JavaScript" type="text/javascript">// <![CDATA[
if(geoip_country_code() == "CA"){
    document.write("");
    window.location = 'http://www.myCanadaianWebsite.com';
}
// ]]></script> 
```

唯一的问题或烦人的事情是，由于我位于加拿大，因此我很难自己检查和测试美国网站。每次我想查看我的美国网站时，我都必须从我的美国网页中删除脚本。然后，当我完成查找时，我将其重新粘贴回去。

有没有办法可以向我的脚本添加一个不会根据我的 IP 或位置重定向我的异常？我用谷歌搜索了它，没有遇到过类似的事情。很想找到解决这个问题的方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:37:27.540

您可以使用服务器端代码根据 IP 有选择地输出脚本，或者您可以使用 Charles Proxy 之类的工具来替换您自己的脚本，`http://j.maxmind.com/app/country.js`其中包含硬编码的“这是美国”数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:58:48.713

我可能会将检查转移到服务器端，但如果失败，就会给自己一个 cookie（基于 jQuery 的示例）。

```
if(geoip_country_code() == "CA" && $.cookie('pretendimamerican') === null) { 
  //Redirect
} 
```

然后给自己那个 cookie，或者创建一个秘密 URL 来为你设置它。这样一来，无论您的 IP 是什么，您都可以使用它，并轻松地将其发送给同事。显然，您的实现不是安全问题，而是价格展示问题，所以我不担心人们会伪造它（因为这些人可以很容易地禁用您现在拥有的东西）。

* * *

在相关的说明中，如果您的测试变得更高级，我成立了一家公司来帮助人们使用代理测试他们的 GeoIP 应用程序：[https ://wonderproxy.com/](https://wonderproxy.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:43:51.800

在 php 中，您可以使用 $_SERVER['REMOTE_ADDR'] 来获取您的 IP。要在 javascript 中获取远程 IP，请参阅 [如何仅使用 javascript 获取客户端的 IP 地址？](https://stackoverflow.com/questions/391979/get-client-ip-using-just-javascript)

我建议改为以下解决方案：安装允许您设置或取消设置 cookie 的脚本：请参阅此处的文档： http: [//www.markusnordhaus.de/2012/01/20/using-cookies-in-javascript-第1部分/](http://www.markusnordhaus.de/2012/01/20/using-cookies-in-javascript-part-1/)

# java - 从位于不同位置的另一个程序调用一个类

> ID：13626944
> 
> 赞同：4
> 
> 时间：2012-11-29T13:31:16.260
> 
> 标签：java, call

我有两个程序，我必须调用一个位于不同位置的程序，即调用程序在 d://start 中，被调用程序在 f://call 中。如何在java中做到这一点？

我可以在调用程序中使用这种方法来实现吗？

```
try
{
    Process p = Runtime.getRuntime().exec(
       new String[] {"cmd.exe", "/c", "F:/call.java"});

    InputStream in = p.getInputStream();
    OutputStream out = p.outputStream();
}

catch (IOException e)
{
  e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T13:54:54.590

`exec`您可以通过以下命令运行另一个 Java 程序：

```
Runtime.getRuntime().exec("java /directory/com/Main.java")
Runtime.getRuntime().exec("java -cp /directory/package.jar com.Main") 
```

如果您需要在同一个 JVM 中调用该类的方法，您可以尝试[在运行时加载 jar，](https://stackoverflow.com/questions/60764/how-should-i-load-jars-dynamically-at-runtime)然后反射性地调用这些类。

# c# - 从定义数量的文件中进行并行读取

> ID：13626948
> 
> 赞同：3
> 
> 时间：2012-11-29T13:31:30.907
> 
> 标签：c#, multithreading, parallel-processing, task-parallel-library, multiprocessing

对于一个学校项目，我必须制作一个程序，用户可以在其中选择 1 到 10 个文本文件。然后，程序必须使用多处理器并行性（我假设[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)）搜索这些文件以找到一个单词并获得正确的行。

我想过将读取放入 a`Parallel.For`但我必须避免同时从同一个文件中读取不同的进程。

我怎么能告诉我`Parallel.For`这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:35:23.273

通过使用 TPL、Tasks（如果可以使用 .net 4.5，则等待 async），您走在了良好的道路上。

1.  您可以使用一个主线程来执行逐行读取。
2.  您将行存储在集合中
3.  然后您可以使用 TPL 执行模式搜索操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:59:52.350

我建议您编写一个从文件读取的包装类，并确保您不会两次读取同一个文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:38:20.697

您还可以在 .Net 中使用 Thread 类。[从 MSDN http://msdn.microsoft.com/en-us/library/aa645740(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa645740(v=vs.71).aspx)查看本教程。

基本上，您将为需要读取的每个文件运行一个线程，然后能够知道每个文件何时完成处理其各自的文件。

编辑：不过，只有当你有非常大的文件时，我才会推荐并行。

# jquery - jQuery标签输入插件样式

> ID：13626950
> 
> 赞同：0
> 
> 时间：2012-11-29T13:31:34.530
> 
> 标签：jquery, tags

我用这个：http: [//xoxco.com/projects/code/tagsinput/](http://xoxco.com/projects/code/tagsinput/)

作为自动完成的插件。

我希望组合框中的某些字段是粗体的。

这是组合框中的数据：

```
john, jackson, tom, <b>peter</b>, alex 
```

我希望彼得大胆一些。

然而，事实并非如此。当我检查元素时，它显示 <b> peter</b>，但是当我作为 html 编辑时，源代码的编辑器被打开，它显示 <b> 和</b> 的 html 编码：< ; b> 粗体 & lt; /b>

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:59:09.110

这是我带来的一种补丁解决方案：
在我构建了我的 dom 之后.. 我更改了元素的 innerHTML。
当然，您可以使用元素进行操作，例如比较字符串等。

```
<input id="tag1" value="alpha,beta,gamma,delta">    
<input id="someOtherId" value="peter,jackson">

var arr = $('#tag1_tagsinput span.tag');
var arr2 = $('#someOtherId_tagsinput span.tag');

var spanChild = arr[2].getElementsByTagName('span');
spanChild[0].innerHTML = "<b>"+spanChild[0].innerHTML+"</b>"; 
```

# java - 数组java中的Json解析

> ID：13626952
> 
> 赞同：1
> 
> 时间：2012-11-29T13:31:35.913
> 
> 标签：java, json

我是*JSON*解析的新手，我需要您的帮助来了解如何解析 .json 文件中的*JSON*对象`Array`。

我的*JSON*结构`log`如下：

```
{A:"text",B:"text",C:[{T:"Text",D:{E:"Text",F:{G:"time"}},H:{I:"200"},J:{K:{L:53,M:2.2},N:"Text"},P:{Q:"Time"}}]} 
```

log 是我上面的输入*JSON*。

```
JSONObject logJson = (JSONObject) JSONSerializer.toJSON( log );
String a = logJson.getString("A");
String b = logJson.getString("B"); 
```

现在的问题是我如何解析`Array`和获取`JSONObject`. 我正在使用`net.sf`API。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:47:26.103

首先，我认为你的 json 格式无效。

“键”也必须位于“中，例如 `"A":"text"`

您可以通过使用获取“C”数组`JSONArray jsonArray = logJson.getJSONArray("C");`

在数组上，您可以迭代：

```
for(int i = 0; i < jsonArray.length(); i++)
{
    JSONObject obj = jsonArray.getJSONObject(i);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:46:12.010

希望这会有所帮助::

```
 JSONObject objonthwiseClaimJSON = JSONObject.fromString(strJSONMonthwiseClaim);

    JSONArray objDateWiseClaimJSONArr = objonthwiseClaimJSON.getJSONArray("dateWiseClaimList");

 for(int dtwclaim=0; dtwclaim<objDateWiseClaimJSONArr.length();dtwclaim++)
{
                 JSONObject objDateWiseClaimJSONObject =(JSONObject) objDateWiseClaimJSONArr.get(dtwclaim);
                 String dcnid = (String) objDateWiseClaimJSONObject.get("dcnid");
                 String remark = (String) objDateWiseClaimJSONObject.get("remark");
    } 
```

在你的情况下::

```
JSONObject logJson = (JSONObject) JSONSerializer.toJSON( log );
String a = logJson.getString("A");
String b = logJson.getString("B");
JSONArray c = logJson.getJSONArray("C"); // If C is not an array, just a plain object

for(int i =0;i<c.length();i++)
{
... // 

} 
```

# asp.net-mvc - 单一控制器的简单认证

> ID：13626953
> 
> 赞同：0
> 
> 时间：2012-11-29T13:31:40.677
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我需要要求用户登录才能查看单个控制器内的所有操作。我不需要维护他们的身份，所以他们将使用共享的登录名和密码。

换句话说，我有一些用户组，他们需要访问网站上的某个区域。我想给他们所有相同的登录名和密码（比如，'用户名'和'passw0rd'）。

这个简单的身份验证应该只在该控制器内工作，并且不应该以任何方式影响网站的其他部分。请记住，我们的表单身份验证适用于网站的管理区域，并且上述用户组不应看到管理员登录页面，因为他们需要在其控制器内进行沙盒处理。

实现它的最佳方法是什么？也许我在想一个错误的方向并且有一些不同的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:51:27.560

您可以将凭据存储在 web.config 文件中。请注意，您也可以将凭据加密存储在 web.config 中。

```
<authentication mode="Forms">
  <forms timeout="30" loginUrl="~/Admin/Login">
    <credentials passwordFormat="Clear">
      <user name="user" password="password"/>
    </credentials>
  </forms>
</authentication> 
```

您可以使用该`FormsAuthentication.Authenticate`方法对用户进行身份验证。

例如。

```
[HttpPost]
public ActionResult Login(string name, string password, string returnUrl)
{
   if (FormsAuthentication.Authenticate(name, password))
   {
       FormsAuthentication.SetAuthCookie(name, false);
       return Redirect(!string.IsNullOrEmpty(returnUrl) ? returnUrl : Url.Action("Manage", "Admin"));
   }
   else
       return View();
} 
```

您可以使用内置`Authorize`属性标记其操作需要授权的控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:37:18.810

当您在应用程序中使用表单身份验证时，只需为所有新用户创建另一个用户帐户并创建两个角色，即*Admin*和*Shared Users*。

现在`Authorize`向您的控制器添加一个属性：

```
[Authorize(Roles="Shared Users") 
```

如果还没有，请将角色*Admin添加到您的管理区域：*

```
[Authorize(Roles="Admin") 
```

# android - 如何在按钮单击时刷新片段选项卡内容

> ID：13626956
> 
> 赞同：10
> 
> 时间：2012-11-29T13:31:46.310
> 
> 标签：android, eclipse, tabs, android-fragments, refresh

我是 Android 新手，我正在实施一个小项目，其中我有来自一个 Drupal 网站的新闻。这个应用程序有 3 个标签，每个标签都有一个包含特定内容的文章列表。文章列表由以线性布局排列的 textviews 和 imageviews 创建。当我点击标题时，文章正在以详细信息打开。这些文章是从 Drupal 站点通过t`HTTP POST`和`ViewJSON`模块加载的。选项卡是用`FragmentActivity`和创建的`TabHost`。一切都很好，直到这里都可以正常工作。

我的问题是我想制作一个刷新按钮，放置在选项卡上，当我按下它时，文章列表必须刷新或重新加载并保持当前选项卡打开。我试图替换标签片段内容并重新打开它，但是当我点击一篇文章的标题打开它时，标签内容保留在所有片段下的堆栈中。我提到当我点击文章标题时，会打开一个新片段。我发送了文章的 id 作为参数，并在同一个片段中打开了文章的内容。

我正在尝试使用此代码，但没有成功。

```
Button btn_refresh = (Button) findViewById(R.id.btn_refresh);
btn_refresh.setOnClickListener(new View.OnClickListener() {     
    public void onClick(View v) {
       String current_tab = mTabHost.getCurrentTabTag(); 
       if(current_tab.contains("POPULARE")){                
         Fragment f;
         f = new PopulareActivity(); 
         FragmentTransaction ft =   getSupportFragmentManager().beginTransaction(); 
         ft.replace(R.id.tot,f);               
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN); 
         ft.commit();
       }
       if(current_tab.contains("RECOMANDATE")){           
         Fragment f;
         f = new RecomandateActivity(); 
         FragmentTransaction ft = getSupportFragmentManager().beginTransaction(); 
         ft.replace(R.id.tot,f);   
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN); 
                     ft.commit(); 
       }
   } 
}); 
```

更确切地说，我在应用程序上输入，按 Tab2（显示来自 tab2 的文章列表），按刷新按钮，打开一篇文章，按移动设备的后退按钮并显示 tab2 的内容。现在，我在 tab1 上输入（并显示来自 tab1 的文章列表），从 tab1 列表中打开一篇文章，显示我需要的内容，然后在移动设备上按下后退按钮。此时显示的是 tab2 的内容（我按下刷新按钮的 tab2 中的文章列表。）。

要打开我使用的文章的详细信息：

```
tv.setOnClickListener(new View.OnClickListener() { 
  public void onClick(View v) {                          
    Fragment f;
    f = new DetaliiActivity();
    Bundle data = new Bundle();  
    data.putInt("id", nid);
    f.setArguments(data);
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.replace(R.id.tot,f);                     
    ft.addToBackStack(null);                         
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE); 
    ft.commit(); 
  }
}); 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T14:00:41.443

要刷新片段的内容，您可以保留对片段的引用，并在该片段中调用公共（例如）`refresh()`方法。例子：

```
public class ArticleTabFragmentActivity extends FragmentActivity{
  private PopulareFragment populareFragment;
  private RecomandateFragment recomandateFragment;

  <code>

  private void bindView(){
    Button btn_refresh = (Button) findViewById(R.id.btn_refresh);

    btn_refresh.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                 String current_tab = mTabHost.getCurrentTabTag(); 
                 if(current_tab.contains("POPULARE")){
                   populareFragment.refresh();
                 } else if(current_tab.contains("RECOMANDATE")){
                   recomandateFragment.refresh();
                 } 
    });
  }

}

public class PopulareFragment extends Fragment{  

  public void refresh(){
    <refresh the contents of the fragment>
  }

}

<Same for other fragment> 
```

现在，当您创建选项卡片段时，就像 PupulareFragment 一样，使用 pupulareFragment 实例变量来存储片段。所以它在刷新按钮 onClick 方法中可用。

这样，您在刷新时不会替换/创建任何新片段。因此，在进入文章详细信息活动后返回 tabActivity 可能也可以正常工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-05T21:21:57.227

```
FragmentTabHost tabHost3 = (FragmentTabHost) findViewById(android.R.id.tabhost);
String current_tab = tabHost3.getCurrentTabTag();
if (current_tab.equals("abc")) { 
    ClassFragment ni = (ClassFragment) getSupportFragmentManager().findFragmentByTag("abc");
    ni.refresh();
} 
```

试试这个，选项卡下的所有内容都将再次执行。

# java - 相对较大 TreeMap 的更快序列化

> ID：13626961
> 
> 赞同：1
> 
> 时间：2012-11-29T13:32:02.887
> 
> 标签：java, serialization

我有`TreeMap<List<String>, Integer>`一个自定义比较器和很多条目（此时为 700k，但可能更多）。List 实例通常很短（1-3 个条目）。

现在使用标准序列化大约需要 2 分钟时间，下面的自定义实现仍然需要一分钟以上。

```
@Override
public void readExternal(ObjectInput in) throws IOException,
        ClassNotFoundException {
    frequencies.clear(); //frequencies is the TreeMap
    int entrySize = in.readInt();
    for(int i = 0; i < entrySize; ++i) {
        int phraseLength =  in.readInt();
        List<String> phrase = new ArrayList<>(phraseLength);
        for(int j = 0; j < phraseLength; ++j) {
            phrase.add((String)in.readObject());
        }
        frequencies.put(phrase, in.readInt());
    }
} 
```

我怎样才能让它更快？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-29T13:39:30.723

我在这个库上取得了很大的成功：

[http://tree.phi-sci.com/](http://tree.phi-sci.com/)

[http://tree.phi-sci.com/tree.pdf](http://tree.phi-sci.com/tree.pdf)

它在 c++ 中，但我已经能够使用它来进行非常快速的树处理。

具体来说，我们在 300 毫秒内处理了 500,000 条记录（多次通过、操作和计算）。

# java - 如何忽略 PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException？

> ID：13626965
> 
> 赞同：79
> 
> 时间：2012-11-29T13:32:13.580
> 
> 标签：java, ssl, certificate, ssl-certificate

尝试向 http 服务器发布请求时出现以下异常：

这是我使用的代码

```
URL url = new URL(
        "https://www.abc.com");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();

conn.setRequestMethod("GET");

conn.setDoOutput(true);

DataOutputStream wr = new DataOutputStream(conn.getOutputStream());
// wr.writeBytes(params);
wr.flush();
wr.close();

BufferedReader br = new BufferedReader(new InputStreamReader(
        conn.getInputStream()));
String line = null;
while ((line = br.readLine()) != null) {
    System.out.println(line);
} 
```

这是一个例外：

```
Exception in thread "main" javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1731)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:241)
    at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:235)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1206)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:925)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1170)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1197)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1181)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(HttpsClient.java:434)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:166)
    at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1014)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:230)
    at com.amazon.mzang.tools.httpchecker.CategoryYank.getPV(CategoryYank.java:32)
    at com.amazon.mzang.tools.httpchecker.CategoryYank.main(CategoryYank.java:18)
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:323)
    at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:217)
    at sun.security.validator.Validator.validate(Validator.java:218)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
    at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
    at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185)
    ... 13 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
    at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:318)
    ... 19 more 
```

服务器不归我所有。有没有办法忽略这个异常？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-07-01T01:14:02.557

我已经使用下面的代码来覆盖我的项目中的 SSL 检查，它对我有用。

```
package com.beingjavaguys.testftp;

import java.io.InputStreamReader;
import java.io.Reader;
import java.net.URL;
import java.net.URLConnection;

import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;
import java.security.cert.X509Certificate;

/**
 * Fix for Exception in thread "main" javax.net.ssl.SSLHandshakeException:
 * sun.security.validator.ValidatorException: PKIX path building failed:
 * sun.security.provider.certpath.SunCertPathBuilderException: unable to find
 * valid certification path to requested target
 */
public class ConnectToHttpsUrl {
    public static void main(String[] args) throws Exception {
        /* Start of Fix */
        TrustManager[] trustAllCerts = new TrustManager[] { new X509TrustManager() {
            public java.security.cert.X509Certificate[] getAcceptedIssuers() { return null; }
            public void checkClientTrusted(X509Certificate[] certs, String authType) { }
            public void checkServerTrusted(X509Certificate[] certs, String authType) { }

        } };

        SSLContext sc = SSLContext.getInstance("SSL");
        sc.init(null, trustAllCerts, new java.security.SecureRandom());
        HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());

        // Create all-trusting host name verifier
        HostnameVerifier allHostsValid = new HostnameVerifier() {
            public boolean verify(String hostname, SSLSession session) { return true; }
        };
        // Install the all-trusting host verifier
        HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);
        /* End of the fix*/

        URL url = new URL("https://nameofthesecuredurl.com");
        URLConnection con = url.openConnection();
        Reader reader = new InputStreamReader(con.getInputStream());
        while (true) {
            int ch = reader.read();
            if (ch == -1) 
                break;
            System.out.print((char) ch);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-11-29T14:09:50.093

如果您想一起忽略证书，请在此处查看答案：[Ignore self-signed ssl cert using Jersey Client](https://stackoverflow.com/questions/6047996/ignore-self-signed-ssl-cert-using-jersey-client)

尽管这会使您的应用程序容易受到中间人攻击。

或者，尝试将证书作为受信任的证书添加到您的 java 商店。这个网站可能会有所帮助。 [http://blog.icodejava.com/tag/get-public-key-of-ssl-certificate-in-java/](http://blog.icodejava.com/tag/get-public-key-of-ssl-certificate-in-java/)

这是另一个线程，展示了如何将证书添加到您的商店。 [Java SSL连接，以编程方式将服务器证书添加到密钥库](https://stackoverflow.com/questions/6755180/java-ssl-connect-add-server-cert-to-keystore-programatically)

关键是：

```
KeyStore.Entry newEntry = new KeyStore.TrustedCertificateEntry(someCert);
ks.setEntry("someAlias", newEntry, null); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-04-05T06:46:13.873

为您的[JSoup](http://jsoup.org)命令设置`validateTLSCertificates`属性。`false`

```
Jsoup.connect("https://google.com/").validateTLSCertificates(false).get(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-17T21:24:53.833

FWIW，在 Ubuntu 10.04.2 LTS 上安装 ca-certificates-java 和 ca-certificates 包为我解决了这个问题。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-09-12T11:53:52.450

我在执行下面的 spring-boot + RestAssured 简单测试时遇到了同样的错误。

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import static com.jayway.restassured.RestAssured.when;
import static org.apache.http.HttpStatus.SC_OK;

@RunWith(SpringJUnit4ClassRunner.class)
public class GeneratorTest {

@Test
public void generatorEndPoint() {
    when().get("https://bal-bla-bla-bla.com/generators")
            .then().statusCode(SC_OK);
    }
} 
```

在我的情况下，简单的解决方法是添加“useRelaxedHTTPSValidations()”

```
RestAssured.useRelaxedHTTPSValidation(); 
```

然后测试看起来像

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import static com.jayway.restassured.RestAssured.when;
import static org.apache.http.HttpStatus.SC_OK;

@RunWith(SpringJUnit4ClassRunner.class)
public class GeneratorTest {

@Before
public void setUp() {
   RestAssured.useRelaxedHTTPSValidation();
}

@Test
public void generatorEndPoint() {
    when().get("https://bal-bla-bla-bla.com/generators")
            .then().statusCode(SC_OK);
    }
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-09-16T13:35:17.493

如果问题是缺少中间证书，您可以启用 Oracle JRE 自动下载缺少的中间证书，如[本答案](https://security.stackexchange.com/questions/162592/why-do-i-need-to-add-intermediate-ca-certificates-to-jvms-cacerts-file#answer-168061)中所述。

只需设置 Java 系统属性`-Dcom.sun.security.enableAIAcaIssuers=true`

为此，服务器的证书必须提供中间证书（证书的颁发者）的 URI。据我所知，这也是浏览器所做的并且应该同样安全——不过我不是安全专家。

编辑：如果我没记错的话，这似乎至少适用于 Java 8 并且[在此处记录了 Java 9](https://docs.oracle.com/javase/9/security/java-pki-programmers-guide.htm)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-05T22:37:30.373

如果您使用的是 CloudFoundry，那么您必须将 jar 与具有证书的密钥库一起显式推送。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-18T06:32:32.873

我也遇到了同样的问题。我试图建立一个有`clean install`目标的项目。`clean package -o`我只是在运行配置中将其更改为。然后我重新构建了这个项目，它对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-06T05:04:12.490

我也遇到过这个问题。我在吃**`JDK 1.8.0_121`**。我将 JDK 升级到**`1.8.0_181`**它，它就像一个魅力。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-20T18:41:20.633

我在 Apache Tomcat/7.0.67 和 Java JVM Version: 1.8.0_66-b18 上也有同样的问题。刚升级到 JRE 1.8.0_241 似乎问题就解决了。

# kerberos - 具有 JAAS 和多个领域的 Kerberos 身份验证

> ID：13626971
> 
> 赞同：5
> 
> 时间：2012-11-29T13:32:40.720
> 
> 标签：kerberos, jaas

全部，

任何人都可以提供有关如何使用 JAAS LoginContext 对多个 KDC/Realm 组合进行身份验证的建议。换句话说，如果对领域 A 的尝试 1 失败，请尝试领域 B。

类似于下面的伪代码。

与往常一样，非常感谢任何帮助。

查看plaincopy到剪贴板打印？

```
[realms]   
  some.address.for.auth.one  
  {  
     kdc = some.address.one  
  }  

  some.address.for.auth.two  
  {  
     kdc = some.address.two  
  }  

boolean loginSuccess = false;  

try  
{  
   LoginContext lc = new LoginContext(...);  
   //Try Realm 1  
   lc.login();  
   loginSuccess = true;  
}  
catch(LoginException le)  
{  
  try  
  {  
     LoginContext lc2 = new LoginContext(...);  
     //Try Realm 2  
     lc2.login();  
     loginSuccess = true;  
  }  
  catch(LoginException le)  
  {  
     //...  
  }  
}  

return loginSuccess; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-07T18:27:20.870

这是可能的。例如，您可以将每个配置放在单独的文件中，然后在每次尝试开始时将 Java 路径传递给 krb5.ini 和 login.conf 文件：

```
boolean loginSuccess = false;  

try  
{  
   System.setProperty("java.security.krb5.conf", "C:\kerb\conf1\krb5.ini");
   System.setProperty("java.security.auth.login.config", "C:\kerb\conf1\login.conf");
   // in login.conf you can have defined path to keytab for this configuration

   LoginContext lc = new LoginContext(...);  
   //Try Realm 1  
   lc.login();  
   loginSuccess = true;  
}  
catch(LoginException le)  
{  
  try  
  {  
     System.setProperty("java.security.krb5.conf", "C:\kerb\conf2\krb5.ini");
     System.setProperty("java.security.auth.login.config", "C:\kerb\conf2\login.conf");
     // in login.conf you can have defined path to keytab for this configuration

     LoginContext lc2 = new LoginContext(...);  
     //Try Realm 2  
     lc2.login();  
     loginSuccess = true;  
  }  
  catch(LoginException le)  
  {  
     //...  
  }  
}  

return loginSuccess; 
```

此处描述了这两个系统属性：http: [//docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/LoginConfigFile.html](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/LoginConfigFile.html)和 [http://docs.oracle.com/javase/ 7/docs/technotes/guides/security/jgss/tutorials/KerberosReq.html](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/KerberosReq.html)

另一种可能性可能是没有文件的配置。有一个 LoginContext 构造函数，它接受 CallbackHandler（这里你传递用户名和密码）和 Configuration（这里你传递你在 login.conf 中的参数）。kdc 和 realm 可以在系统属性 java.security.krb5.realm 和 java.security.krb5.kdc 中传递

[http://docs.oracle.com/javase/8/docs/api/javax/security/auth/login/LoginContext.html#LoginContext-java.lang.String-javax.security.auth.Subject-javax.security。 auth.callback.CallbackHandler-javax.security.auth.login.Configuration-](http://docs.oracle.com/javase/8/docs/api/javax/security/auth/login/LoginContext.html#LoginContext-java.lang.String-javax.security.auth.Subject-javax.security.auth.callback.CallbackHandler-javax.security.auth.login.Configuration-)

# xml - 访问被拒绝。当我使用 Windows 8 的 XAML 尝试 CRUD XML 文件时

> ID：13626973
> 
> 赞同：0
> 
> 时间：2012-11-29T13:32:46.793
> 
> 标签：xml, xaml, windows-8, crud

它不会每次都抛出这个错误，这就是它奇怪的原因。我有 50% 的机会成功。

这就是我调用保存方法的方式

```
private async void btnSave_Click(object sender, RoutedEventArgs e)
{
    await settings.WriteSettings(settings);
} 
```

这就是方法本身

```
public async Task WriteSettings(Settings settings)
{
    var ser = new System.Xml.Serialization.XmlSerializer(typeof(Settings));
    var writer = new StringWriter();
    ser.Serialize(writer, settings);
    dom.LoadXml(writer.ToString());
    StorageFolder sf = ApplicationData.Current.LocalFolder;
    StorageFile st;
    st = await sf.CreateFileAsync(filename, CreationCollisionOption.ReplaceExisting); // here i get the error
    await dom.SaveToFileAsync(st);
} 
```

我希望你们理解这个问题，你可以帮助我找到解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:50:37.337

当我尝试多次访问文件时，我得到了访问被拒绝的原因。这是因为我使用后没有关闭文件。

这就是我现在访问文件的方式：

```
public static async Task WriteSettings(Settings settings)
    {
        StorageFile file = await ApplicationData.Current.RoamingFolder.CreateFileAsync(filename, CreationCollisionOption.ReplaceExisting);
        var stream = await file.OpenStreamForWriteAsync();

        var ser = new XmlSerializer(typeof(Settings));
        ser.Serialize(stream, settings);

        await stream.FlushAsync(); // This
        stream.Dispose(); // And this helped me solve my problem
    } 
```

# objective-c - 自定义 UIMenuItem 仅第一次显示

> ID：13626979
> 
> 赞同：2
> 
> 时间：2012-11-29T13:33:10.163
> 
> 标签：objective-c, ios, cocoa-touch, uimenucontroller, uimenuitem

`- (void)viewDidLoad`我在视图控制器的方法中添加了一个自定义菜单：

```
UIMenuItem *menuItem = [[UIMenuItem alloc] initWithTitle:@"Read selected" action:@selector(readSelectedText)];
[UIMenuController sharedMenuController].menuItems = [NSArray arrayWithObject:menuItem]; 
```

在同一个控制器中，我还实现了该方法：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender {
    if (action == @selector(readSelectedText)) {
        if (textView.selectedRange.length > 0) {
            return YES;
        }
        return NO;
    }
    return [super canPerformAction:action withSender:sender];
} 
```

我第一次选择一些文本时，菜单包含“读取所选”菜单项，并且一切正常。然而，在随后的文本选择中，菜单仅包含标准系统菜单项，如复制。paste等`- (BOOL)canPerformAction:(SEL)action withSender:(id)sender`_`readSelectedText`

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:07:34.373

我试过下面的代码，它对我有用。重点是在菜单显示之前，添加自定义菜单项，然后自己显示菜单。

-(void)viewDidLoad { [超级 viewDidLoad];

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(menuWillShow) name:UIMenuControllerWillShowMenuNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(menuDidShow) name:UIMenuControllerDidShowMenuNotification object:nil]; 
```

}

-(void)menuDidShow{

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(menuWillShow) name:UIMenuControllerWillShowMenuNotification object:nil]; 
```

}

-(void)menuWillShow{

```
UIMenuItem *shareMenu = [[UIMenuItem alloc] initWithTitle:@"微博分享" action:@selector(shareToWeibo:)];
UIMenuController *menu = [UIMenuController sharedMenuController];
[menu setMenuItems:[NSArray arrayWithObjects:shareMenu, nil]];

[[NSNotificationCenter defaultCenter] removeObserver:self name:UIMenuControllerWillShowMenuNotification object:nil]; 
```

[菜单 setTargetRect:selectedRect inView:self.view]; //必须设置，否则菜单位置永远不会改变

```
[menu setMenuVisible:YES animated:YES]; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:33:14.690

我的解决方案是基于 qiufangzhou 提供的建议，因此学分和接受的答案都归他所有。

无论如何，我最终`UIMenuControllerWillShowMenuNotification`在我的方法中订阅了 noritication `viewDidLoad`：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(menuWillShow) name:UIMenuControllerWillShowMenuNotification object:nil]; 
```

然后我实现了这个方法：

```
-(void)menuWillShow{
    UIMenuItem *menuItem = [[UIMenuItem alloc] initWithTitle:@"Read selected" action:@selector(readSelectedText)];
    [UIMenuController sharedMenuController].menuItems = [NSArray arrayWithObject:menuItem];
} 
```

诀窍是每次推送菜单时都必须添加自定义菜单项，而不仅仅是一次。我猜自定义菜单项列表每次都会被清除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-14T19:51:46.567

对于可能仍然需要这个的人：

我们只需要观察**UIMenuControllerDidHideMenuNotification 即可**。

**viewDidApear：**

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(menuDidHide) name:UIMenuControllerWillShowMenuNotification object:nil]; 
```

**viewDidDisapear：**

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:UIMenuControllerDidHideMenuNotification object:nil]; 
```

**菜单隐藏**

```
UIMenuItem *menuItem = [[UIMenuItem alloc] initWithTitle:@"Read selected" action:@selector(readSelectedText)];
[UIMenuController sharedMenuController].menuItems = [NSArray arrayWithObject:menuItem]; 
```

# c - 无法使用针对 Windows 的 openssl 库将 X509 证书中的信息提取到临时文件中

> ID：13626981
> 
> 赞同：1
> 
> 时间：2012-11-29T13:33:19.937
> 
> 标签：c, visual-c++, openssl, x509

```
if (!(fp = fopen(TEMP_STORE_CERTIFICATE, "w"))) {

    free(TEMP_STORE_CERTIFICATE);
    return 0;

  }

PEM_write_X509(fp, x);
fclose(fp); 
```

我正在 Visual Studio 2010 Windows 中编写此 C 代码。当执行到达`PEM_write_X509;`流/控制台时被阻止并且代码不会继续。基本上，该函数从证书中提取信息并将其放入临时文件中。但执行不会继续。该函数来自 Open SSL 库。

# ios - FastPDFKit 为模拟器构建，但显示 arm7 的重复符号错误

> ID：13626984
> 
> 赞同：0
> 
> 时间：2012-11-29T13:33:22.790
> 
> 标签：ios, ipad

我有一个使用 FastPDFKit 的 ios 应用程序。它为模拟器构建，但显示 arm7 的重复符号错误

任何的想法？我很快就需要帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:56:17.340

明白了：清理 FastPdfKit 项目中的 FastPdfKit 目标并重新编译它。它产生了一个新的框架。在 FastPdfKit 项目根目录中抓取了新的 .embeddedframework。有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T09:38:24.677

我添加我的解决方案，就像您按照自述文件一样，它会要求您添加：

```
Inherit the project options: select the Project an from info tab and configurations line choose **FastPdfKitFramework** from the drop down list; 
```

我将 FastPdfKitFramework 目标删除为 None，现在它工作得很好。我希望它可以对某人有所帮助。

# java - 将图像添加到 doc 文件

> ID：13626986
> 
> 赞同：0
> 
> 时间：2012-11-29T13:33:26.090
> 
> 标签：java, image, text, doc

我正在尝试实现客户的要求。主要的是客户会给我一个图像，我必须调整它的大小并将它添加到一个 doc 文件中。然后他想在图像上添加自定义文本[在图像前面换行]。我需要用java来做。谁能建议我哪个库可以帮助我实现这个要求？我已经通过 [docx4j](http://www.docx4java.org/trac/docx4j)。

任何小建议都会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:38:29.637

[Apache POI](http://poi.apache.org/)是一个用于处理 Microsoft 文档（包括`.doc`文件）的 Java 库。

# xml - 从 BPEL 中的 SOAP 正文请求字符串中提取 XPath

> ID：13626987
> 
> 赞同：4
> 
> 时间：2012-11-29T13:33:27.270
> 
> 标签：xml, web-services, oracle, xpath, bpel

我正在使用 JDeveloper 编写一个 BPEL 流程。当我尝试从我的请求 xml 中提取节点的值时，我遇到了一个问题。

请求 XML 将如下所示：

```
<ConvertTemp xmlns="http://www.nikhil.net/">
   <Temperature>200</Temperature>
   <FromUnit>degreeCelsius</FromUnit>
   <ToUnit>degreeFahrenheit</ToUnit>
</ConvertTemp> 
```

我能够从 SOAP 正文中提取请求 XML 字符串并将其放入另一个字符串变量（比如 strRequest）。

我试图从这个 strRequest 变量中提取温度节点的值（即 200）。我将把它转换成一个数字并将它分配给另一个 double 类型的变量。

提取温度节点值的函数的 XPath 查询应该是什么？

```
number(bpws:getVariableData('strRequest', '', '<XPath query>')) 
```

我试过了

```
bpws:getVariableData('strRequest', '', '/ConvertTemp/Temperature/')
bpws:getVariableData('strRequest', '', '/ConvertTemp/Temperature')
bpws:getVariableData('strRequest', '', 'Temperature')
bpws:getVariableData('strRequest', 'strRequest', '/ConvertTemp/Temperature')
bpws:getVariableData('strRequest', 'strRequest', 'Temperature') 
```

和类似的组合。输出：上述所有试验的**NaN**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:09:38.937

你有一个默认的命名空间，所以也许你需要考虑到这一点。我不确定 BPEL 中是否有特殊的方法来执行此操作，但在一般的 xpath 语法中，您可以将 xpath 设置为：

`/*[local-name() = "ConvertTemp" and namespace-uri() = "http://www.nikhil.net/"]/*[local-name() = "Temperature" and namespace-uri() = "http://www.nikhil.net/"]/text()`

例如

```
with xml as (select xmltype('<ConvertTemp xmlns="http://www.nikhil.net/">
  2     <Temperature>200</Temperature>
  3     <FromUnit>degreeCelsius</FromUnit>
  4     <ToUnit>degreeFahrenheit</ToUnit>
  5  </ConvertTemp>') x from dual)
  6  select extractvalue(x.x, '/*[local-name() = "ConvertTemp" and namespace-uri() = "http://www.nikhil.net/"]'
  7  ||'/*[local-name() = "Temperature" and namespace-uri() = "http://www.nikhil.net/"]/text()') as temperature
  8    from xml x
  9  /

TEMPERATURE
--------------------------------------------------------------------------------
200 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:50:39.740

尝试`bpws:getVariableData('strRequest', '', '/ConvertTemp/Temperature/text()')`

因为'200'是`text`节点下的一个`Temperature` 节点

# encoding - Jax-rs 自动解码路径参数

> ID：13626990
> 
> 赞同：13
> 
> 时间：2012-11-29T13:33:37.247
> 
> 标签：encoding, jax-rs

我有一个 jax-rs 服务，它在路径中接收一组参数，pathparameters。这些参数可能是包含不适合 url 的值的字符串，因此它们在客户端使用 java.net.UrlEncoder 进行 urlencoded，如下所示：

```
String param = URLEncoder.encode(o.toString(), "UTF-8"); 
```

这用于构建 url `supplier/group/param1/param2/param3`。如果其中一个由于 urlencoding 而改变，例如如果它只是一个空格，则在服务上接收到的字符串是一个`+`符号。

```
@GET
@Path("{supplierId}/{groupCode}/{groupId}")
@Produces({MediaType.APPLICATION_XML, MediaType.TEXT_XML})
public SupplierGroup getSupplierGroup(@PathParam("supplierId") BigDecimal supplierId,
        @PathParam("groupCode") String groupCode,
        @PathParam("groupId") BigDecimal groupId) {
    //now groupCode is "+", not " "
} 
```

我希望 jaxrs 能够自动解码编码的路径参数。

编辑：测试更多我发现当发送使用`%20`空间时，它能够解码参数。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T13:22:39.447

pathparams 的自动编码按预期工作。问题在于`%20`它用于对 url 本身中的空格进行编码，而`+`用于对查询字符串（？之后的部分）进行编码。路径参数实际上是 URL 的一部分，因此应该使用 %20。

使用`URI.toAsciiString()`而不是`UrlEncoder.encode(...)`传递不同的部分会给出一个正确解码的有效 url。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T18:35:52.423

来自[PathParam](http://docs.oracle.com/javaee/6/api/javax/ws/rs/PathParam.html) javadoc 的引用：

> 该值是 URL 解码的，除非使用 Encoded 注释禁用它。

# c++ - 是否可以在 llvm 中为用户定义的传递添加参数

> ID：13626993
> 
> 赞同：16
> 
> 时间：2012-11-29T13:33:57.263
> 
> 标签：c++, llvm, llvm-c++-api, llvm-ir

现在我们正在按照[本教程为](http://llvm.org/docs/WritingAnLLVMPass.html)**llvm**实施分析过程。并且需要向插件传递一个附加参数，如下所示：

```
opt -load /path/to/myplugin.so -mypass -mypass_option input.bc 
```

但是我没有找到任何手册告诉我该怎么做。所以我想知道在实践中是否可能。

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-02T10:21:24.187

您应该使用LLVM 内置的[CommandLine库。](http://llvm.org/docs/CommandLine.html)基本上，您只需将通行证的 .cpp 文件放在顶部：

```
#include "llvm/Support/CommandLine.h"

static cl::opt<string> InputFilename("mypass_option", cl::desc("Specify input filename for mypass"), cl::value_desc("filename")); 
```

但我建议你查看上面的链接，它有完整的参考 + 方便的快速入门部分。

举个例子，看看内置的[循环展开 pass](http://llvm.org/docs/doxygen/html/LoopUnrollPass_8cpp_source.html) - 它定义了两个无符号和两个布尔选项，就在源文件的顶部，使用`cl::opt<unsigned>`and `cl::opt<bool>`。

# solr - solr 突出显示结果 - 节点不包含名称属性

> ID：13626996
> 
> 赞同：1
> 
> 时间：2012-11-29T13:34:01.443
> 
> 标签：solr

我已经玩 solr 大约一个星期了。我的问题可能是与突出显示有关的罕见案例，因为我无法在 SO 或 Internet 上的任何地方找到解决方案。

我启用了突出显示，几乎一切正常 - 我得到搜索结果，突出显示的部分返回`<lst name="highlighting">`.

问题是，实际上包含文本突出显示部分的子节点都没有 name 属性，该属性应该与相应结果项的 id 属性相同。

下面是使用 solr admin 搜索返回的结果的摘录。

```
<result name="response" numFound="121" start="0" maxScore="2.3798883">
   <doc>
     <float name="score">2.3798883</float>
     <str name="Turn">Android Linux</str>
     <str name="id">dcc190ba-143b-4fb7-b868-ef06875210fe</str>
     <float name="startTime">961.98</float>
   </doc>
   <doc>
     <float name="score">1.009701</float>
     <str name="Turn">
       ci sono per� degli aspetti diversi perch� Microsoft vendeva windows mentre l' Ugl     regala Android che quindi la licenza Android non costa nulla
    </str>
    <str name="id">804df3fb-3709-4bf8-a0d0-718dc5da18f1</str>
    <float name="startTime">2445.19</float>
  </doc>
</result>
<lst name="highlighting">
  <lst>
    <arr name="Turn">
      <str><span class="highlight">Android</span> Linux</str>
    </arr>
  </lst>
  <lst>
   <arr name="Turn">
     <str>ci sono per degli aspetti diversi perch Microsoft vendeva windows mentre l' Ugl     regala <span class="highlight">Android</span>
     </str>
   </arr>
  </lst>
  <lst>
    <arr name="Turn">
     <str><span class="highlight">Android</span> nd Kappa e l' ambiente che ci permette di     scrivere in codice in attivo
     </str>
    </arr>
  </lst>
</lst> 
```

可以看出，每个结果都有 id 属性。只是它没有在节点中使用。

我使用 uuid 类型作为 solr 自动生成的 id。

这是我的 schema.xml 文件的一部分。

```
<field name="id" type="uuid" indexed="true" stored="true" required="true" default="NEW"/>
<field name="startTime" type="float" indexed="true" stored="true" />
<field name="Turn" type="text_general" indexed="true" stored="true"/> 
```

fieldType uuid 在 schema.xml 文件中定义如下：

```
<fieldType name="uuid" class="solr.UUIDField" indexed="true" /> 
```

下面是生成 id 的更新处理器（在 solrconfig.xml 中）：

```
 <updateRequestProcessorChain name="uuid">
   <processor class="solr.processor.SignatureUpdateProcessorFactory">
     <bool name="enabled">true</bool>
     <str name="signatureField">id</str>
     <bool name="overwriteDupes">false</bool>
     <str name="fields">*</str>
     <str name="signatureClass">solr.processor.Lookup3Signature</str>
   </processor>
   <processor class="solr.LogUpdateProcessorFactory" />
   <processor class="solr.RunUpdateProcessorFactory" />
 </updateRequestProcessorChain> 
```

如果没有 id 作为项目内 name 属性的值，我将无法进行进一步的处理，例如替换结果中的文本。我希望这些信息足够了。否则请告诉我。两天来，我一直在努力解决这个问题。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-02T21:14:50.363

我和你有同样的问题。唯一不同的是，我启动了一个新的 solr 实例。所以我没有原件可以回去。

我通过用“字符串”替换 id 类型并在数据中添加自定义唯一键来修复它。我还在配置中添加了唯一的关键元素。

```
<uniqueKey>id</uniqueKey>
<field name="id" type="string" indexed="true" stored="true" required="true" /> 
```

这解决了我的问题。不知何故，它不适用于“uuid”类型。

希望这可以帮助遇到同样问题的任何人。

注意：uniqueKey 字段应位于“字段”节点之外

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:59:56.493

在另一个绝望的尝试中，我用原始文件替换了我的 solrconfig.xml 文件，只放回我所做的特定更改，问题就消失了。我确信这个问题可以追踪到几个特定的​​行，因为我必须在我练习的前几天在那里添加了一些东西，这对我来说是一团糟。

# php - 将 PhpStorm 自动完成设置为从特定目录绘制。

> ID：13626997
> 
> 赞同：1
> 
> 时间：2012-11-29T13:34:02.003
> 
> 标签：php, phpstorm

我最近开始使用 PhpStorm 作为我的开发 IDE，因为这是我新工作场所的人们使用的。到目前为止，我真的很喜欢它，有一些非常有用的功能是我在任何免费替代品中都没有看到的。

最有用的功能之一当然是代码自动完成。我想知道的是是否可以将自动完成指向特定目录及其项目中的子目录并忽略其他目录。

让我解释一下我的项目的结构：

```
/branches
/trunk
/trunk/*bunch of directories here with various modified and customized classes for specific clients.
/trunk/website *This is the code that development actually works on* 
```

所以，如果我控制单击一个类声明，我将看到`many implementations`由于项目的结构而导致的预期结果，自动完成正在查看所有文件并查找同名的自定义或不推荐使用的类。我必须手动查看并找到映射到 /trunk/website 的那个。我想做的是告诉自动完成在填充它的列表时只查看 /trunk/website 。我用谷歌搜索了这个但找不到任何东西，但认为也许值得在这里发一个帖子，以防其他人遇到类似情况并找到解决方法。任何建议表示赞赏。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T02:05:12.840

我认为您在谈论的是*排除目录*功能。转到**Project**视图，导航到不需要索引的目录（因此，自动完成不会从那里提供匹配项），右键单击该目录并选择**Mark Directory As** > **Excluded**。

稍后您可以在**Project Settings** > **Directories**中管理它们。

# wcf - WCF Webservice crash..需要从内存转储中知道原因

> ID：13626998
> 
> 赞同：0
> 
> 时间：2012-11-29T13:34:05.690
> 
> 标签：wcf

我们最近在生产环境中遇到了一个 WCF Web 服务崩溃的问题。我们在崩溃期间进行了内存转储，当我们使用 windbg 进行调试时，我们得到了以下堆栈跟踪

> * ***异常对象：000000000a1e5db8 异常类型：System.ObjectDisposedException 消息：无法访问已处置的对象。内部异常： `enter code here` ****StackTrace（生成）：System_ServiceModel_ni!System.ServiceModel.Channels.CommunicationObject.ThrowIfClosed()+0xfb2737 System_ServiceModel_ni!System.ServiceModel.Channels.ServiceChannel.CleanupChannelCollections()+0x37 System_ServiceModel_ni!System.ServiceModel.Channels.ServiceChannel.OnAbort()+ 0x78 System_ServiceModel_ni!System.ServiceModel.Channels.CommunicationObject.Abort()+0x28e System_ServiceModel_ni!System.ServiceModel.Channels.ServiceChannel+SessionIdleManager.TimerCallback()+0x6c System_Runtime_DurableInstancing_ni!System.Runtime.IOThreadScheduler+ScheduledOverlapped.IOCallback(UInt32, UInt32, System .Threading.NativeOverlapped*)+0x71 System_Runtime_DurableInstancing_ni!System.Runtime.Fx+IOCompletionThunk.UnhandledExceptionFrame(UInt32, UInt32, System.Threading.NativeOverlapped*)+0xdbc70 mscorlib_ni!System。Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32, UInt32, System.Threading.NativeOverlapped*)+0x96**** StackTraceString：HResult：80131622 StackTraceString：HResult：80131622****

有人可以更深入地了解此异常何时发生。

WCF Web 服务在使用 .net 框架 4.0 的 Windows 2008 服务器上运行。

其他详情：

```
ConcurrencyMode = Multiple
InstanceContextMode = PerSession 
```

我们的 web 服务调用其他几个 wcf 服务。这些的绑定和行为信息如下。

```
 <behavior name="NAME">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceThrottling maxConcurrentSessions="1000" maxConcurrentCalls="1000" maxConcurrentInstances="10`enter code here`00"/>
      <dataContractSerializer maxItemsInObjectGraph="655360"/>
    </behavior>    
        <binding name="NAME" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions" hostNameComparisonMode="StrongWildcard" listenBacklog="50" maxBufferPoolSize="524288" maxBufferSize="10485760" maxConnections="150" maxReceivedMessageSize="10485760">
            <readerQuotas maxDepth="32" maxStringContentLength="10485760" maxArrayLength="10485760" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
            <reliableSession ordered="true" inactivityTimeout="00:10:00" enabled="false" />
            <security mode="None">
                <transport clientCredentialType="Windows" protectionLevel="None" />
            </security>
        </binding> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:17:49.070

发生这种情况是因为您的服务代码以某种方式创建了`ServiceChannel`再次访问已处理的 WCF 实例的条件。目前尚不清楚这是否发生在您的服务用于调用另一个 WCF 服务的 WCF 服务代理中，或者该服务用于响应客户端请求的通道中。要正确处理代理实例，请查看有关该[方法的](http://geekswithblogs.net/DavidBarrett/archive/2007/11/22/117058.aspx)[“按设计”行为的`Dispose`](http://geekswithblogs.net/DavidBarrett/archive/2007/11/22/117058.aspx)这篇好文章。

您应该描述更多有关服务配置的信息，例如`InstanceContextMode`和`ConcurrencyMode`设置以及`serviceModel`配置以获得更好的答案。