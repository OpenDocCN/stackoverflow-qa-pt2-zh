# StackOverflow 问答 15358000-15358999

# r - `%in%` 和 `==` 有什么区别？

> ID：15358006
> 
> 赞同：28
> 
> 时间：2013-03-12T09:54:04.843
> 
> 标签：r

```
df <- structure(list(x = 1:10, time = c(0.5, 0.5, 1, 2, 3, 0.5, 0.5, 
1, 2, 3)), .Names = c("x", "time"), row.names = c(NA, -10L), class = "data.frame")

df[df$time %in% c(0.5, 3), ]
##     x time
## 1   1  0.5
## 2   2  0.5
## 5   5  3.0
## 6   6  0.5
## 7   7  0.5
## 10 10  3.0

df[df$time == c(0.5, 3), ]
##     x time
## 1   1  0.5
## 7   7  0.5
## 10 10  3.0 
```

`%in%`和这里有什么区别`==`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-12T10:01:52.990

问题是矢量回收。

您的第一行完全符合您的预期。它检查其中的元素`df$time`并`c(0.5, 3)`返回其中的值。

你的第二行更棘手。它实际上相当于

```
df[df$time == rep(c(0.5,3), length.out=nrow(df)),] 
```

要看到这一点，让我们看看如果使用 vector 会发生什么`rep(0.5, 10)`：

```
rep(0.5, 10) == c(0.5, 3)
[1]  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE 
```

看看它是如何返回每个奇数的。本质上它与向量匹配 0.5`c(0.5, 3, 0.5, 3, 0.5...)`

您可以通过这种方式操作向量以不产生匹配项。取向量: `rep(c(3, 0.5), 5)`:

```
rep(c(3, 0.5), 5) == c(0.5, 3)
[1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE 
```

他们都是`FALSE`；您将每 0.5 与 3 匹配，反之亦然。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-12T10:01:36.167

在

```
df$time == c(0.5,3) 
```

第`c(0.5,3)`一个广播到 的形状`df$time`，即`c(0.5,3,0.5,3,0.5,3,0.5,3,0.5,3)`。然后逐个元素地比较这两个向量。

另一方面，

```
df$time %in% c(0.5,3) 
```

检查 的每个元素是否`df$time`属于集合`{0.5, 3}`。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-12T16:37:58.197

这是一个旧线程，但我在任何地方都没有看到这个答案，它可能与某些人有关。

两者之间的另一个区别是处理 NA（缺失值）。

```
NA == NA
[1] NA
NA %in% c(NA)
[1] TRUE 
```

# asp.net - asp.net - 将数据从文本框添加到数据库 - 验证停止工作后

> ID：15358009
> 
> 赞同：1
> 
> 时间：2013-03-12T09:54:22.957
> 
> 标签：asp.net, vb.net

基本上，在单击提交按钮进入用户表后，我将用户输入的有关其个人详细信息的数据输入到文本框中。这工作正常，直到我在这些文本框上使用验证，现在所有验证工作，但是当单击提交时，它转到我链接到按钮的页面，但是现在没有数据被输入到数据库中的用户表中。

有任何想法吗？

我的代码如下所示。谢谢

```
Protected Sub cmdSubmit_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles cmdSubmit.Click

   'add new user'
    Dim db As New LostPropertyDataContext
    Dim U As New tblUser With {.Forename = txtforename.Text, 
           .Surname = txtsurname.Text, .DateOfBirth = txtdob.Text, .Gender = txtgender.Text,
           .Address = txtaddress.Text, .Postcode = txtpostcode.Text, .TelephoneNo = txttelephoneno.Text,
           .MobileNo = txtmobileno.Text, .Email = txtemail.Text}
    db.tblUsers.InsertOnSubmit(U)
    db.SubmitChanges()
    Response.Redirect("/u1065977/LostPropertyProject/LostProperty2.aspx")

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:12:33.627

当您说您添加了验证时，我假设您的意思是您向页面添加了验证控件。

这是一种很好的做法——有人可能会说，一种必要的做法——将代码包装在测试中以验证​​是否通过：

```
If Page.IsValid Then
   'add new user'
   Dim db As New LostPropertyDataContext
   Dim U As New tblUser With {.Forename = txtforename.Text, 
       .Surname = txtsurname.Text, .DateOfBirth = txtdob.Text, .Gender = txtgender.Text,
       .Address = txtaddress.Text, .Postcode = txtpostcode.Text, .TelephoneNo = txttelephoneno.Text,
       .MobileNo = txtmobileno.Text, .Email = txtemail.Text}
   db.tblUsers.InsertOnSubmit(U)
   db.SubmitChanges()
   Response.Redirect("/u1065977/LostPropertyProject/LostProperty2.aspx")
End If 
```

您正在尝试更新而不检查服务器端是否已通过验证。如果您使用任何自定义验证（例如`CustomValidator`），您就没有机会向您报告失败的事情。

# extjs - 新Ext.app.EventDomain的使用和功能

> ID：15358010
> 
> 赞同：3
> 
> 时间：2013-03-12T09:54:24.273
> 
> 标签：extjs, extjs4.2

我们有大量的应用程序都共享一些部分（数据/后端/前端）。用户可能有权访问一个或多个应用程序，当前用户需要一一加载它们。我们的客户不喜欢这样，所以我们现在将所有内容重构为一个巨大的应用程序，在该应用程序中，客户端自己解决要加载的模块。第一次测试看起来不错，由于我们的自定义模块构建器工具，加载时间只有一分钟。

现在我偶然发现了新的`Ext.app.EventDomain`，想知道我们是否应该将它实施到我们的重构中，因为一个棘手的部分是事件。我们也有考虑在表上使用路由。但这场辩论仍在继续。

**那么我们应该使用`Ext.app.EventDomain`它吗？如果是，它是如何使用的，或者我们应该更好地使用自定义路由？**

我的意思是 Sencha Touch 使用路由但没有 EventBus，我会说 Sencha Touch 对性能至关重要，所以这两个框架在这里不同似乎是有原因的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T22:49:02.687

`Ext.app.EventDomain`*本身*不打算使用；相反，如果需要，您可以实现自定义事件域。事件域背后的想法非常简单：它是一种在碰巧不是 Ext.Component 派生的应用程序部分之间传递事件的方法。

最常用的是Controller绑定：在4.1中只能直接调用其他Controller的方法（硬绑定），这对测试非常不利。在 4.2 中，您可以让 Controller 监听其他 Controller 的事件（软绑定）并具有清晰的逻辑分离，因此可以代替：

```
Ext.define('MyApp.controller.Foo', {
    extend: 'Ext.app.Controller',

    doSomething: function() {
        this.getController('Bar').doSomethingElse();
    }
});

Ext.define('MyApp.controller.Bar', {
    extend: 'Ext.app.Controller',

    doSomethingElse: function() {
        // The problem here is that this logic belongs to Bar controller
        // but this method has to be called from Foo controller,
        // which means Bar should always be around whenever Foo
        // needs to call it. Race conditions, anyone?
        ...
    }
}); 
```

你可以做：

```
Ext.define('MyApp.controller.Foo', {
    extend: 'Ext.app.Controller',

    doSomething: function() {
        this.fireEvent('doSomethingElse');
    }
});

Ext.define('MyApp.controller.Bar', {
    extend: 'Ext.app.Controller',

    init: function() {
        this.listen({
            controller: {
                '*': {        // '*' means any controller
                    doSomethingElse: this.doSomethingElse
                }
            }
        });
    },

    doSomethingElse: function() {
        // Not a problem anymore -- Foo fires an event, and if Bar
        // happens to be around, it reacts and does whatever it wants;
        // the benefit is that there is no direct method calling
        // so we don't have to watch for exceptions and do other
        // unnecessary stuff.
        ...
    }
}); 
```

听你自己的事件也可以——这不是你可能在生产中使用的东西，但它是一个很好的副作用，可以非常成功地用于控制器单元测试。

除了其他 Controller 的事件之外，Controller 现在还可以监听 Store、Direct 提供程序和全局事件，这有时可能很有用。

我计划在 4.2 发布时写下这个；希望在此之前这会有所帮助。

# php - 如何保持干净的 url 显示在浏览器中，而不是肮脏的重定向？

> ID：15358012
> 
> 赞同：1
> 
> 时间：2013-03-12T09:54:32.143
> 
> 标签：php, .htaccess, mod-rewrite, http-headers

我决定为我的产品创建干净的 url 链接以用于 SEO 目的，以便客户更好地记住链接。我已经研究了几个小时，但还没有完全理解干净和肮脏的 url 重定向概念。你会认为在这个主题上会有更简单的文档可用。

我的 .htaccess 文件配置如下，并且可以完美地获取用户键入的干净 url 或干净的链接，例如 www.example.com\Category\Subcategory\ 并将其重定向到 .php 文件以访问 MySQL 表并显示产品信息。

我想不通的是如何在浏览器中向用户显示干净的 url，而不显示脏的或重定向的 url？这是在 .htaccess 文件中完成的吗？

为了更清楚：

如果客户键入：www.example.com\shoes\running，.htaccess 会将干净的 url 重定向到 subcat_lookup_clean.php?c=$1&s=$2，它基本上会处理干净的 url 并查找适当的信息并动态显示它。

但是现在客户在他们的浏览器中看到了 www.example.com\subcat_lookup_clean.php?c=$1&s=$2。

相反，我希望他们看到干净的 url www.example.com\shoes\running。

.htaccess 文件包含：

```
Options +FollowSymLinks
RewriteEngine On

# do not do anything for already existing file, symbolic link or directory
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .+ - [L]

# redirect category/subcategory to lookup page
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ ./subcat_lookup_clean.php?c=$1&s=$2
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ ./subcat_lookup_clean.php?c=$1&s=$2 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T01:13:41.497

**更正 .htaccess 下面的解决方案完美运行。**

你可以在这里演示：[http ://www.tiedandtrue.com](http://www.tiedandtrue.com)

```
Options +FollowSymLinks
RewriteEngine On

# if redirected to url cleaner, redirect to actual lookup file and
# these lines will keep the clean url visible in the browser
RewriteRule ^cat_url_cleaner.php ./cat_lookup.php [L]
RewriteRule ^subcat_url_cleaner.php ./subcat_lookup.php [L]
RewriteRule ^subsubcat_url_cleaner.php ./subsubcat_lookup.php [L]

# do not do anything if already existing file, symbolic link or directory
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .+ - [L]

# redirect clean url (/category) for processing
RewriteRule ^([a-zA-Z0-9_-]+)$ ./cat_url_cleaner.php?c=$1
RewriteRule ^([a-zA-Z0-9_-]+)/$ ./cat_url_cleaner.php?c=$1 [L]

# redirect clean url (/category/subcategory) for processing
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ ./subcat_url_cleaner.php?c=$1&s=$2
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ ./subcat_url_cleaner.php?c=$1&s=$2 [L]

# redirect clean url (/category/subcategory/subsubcategory) for processing
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ ./subsubcat_url_cleaner.php?c=$1&s=$2&ss=$3
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ ./subsubcat_url_cleaner.php?c=$1&s=$2&ss=$3 [L] 
```

# css - Primefaces 组件渲染与 twitter 引导布局

> ID：15358013
> 
> 赞同：3
> 
> 时间：2013-03-12T09:54:32.923
> 
> 标签：css, twitter-bootstrap, primefaces

我在 Primefaces v3.5 项目中集成了 Twitter Bootstrap v2.3.1，我使用 Bootstrap 进行布局，使用 Primefaces 进行组件。

但是我在使用 DataTable 时遇到了一个问题，它的渲染效果并不好，如图所示： ![在此处输入图像描述](../Images/89326f4284386e77e9d364cace194552.png)

通过使用 Firebug，我发现了问题，primefaces 输入的默认 css 被 Bootstrap 输入样式覆盖

以下是按顺序加载的样式表：

```
<link type="text/css" rel="stylesheet" href="/projet/javax.faces.resource/theme.css.xhtml?ln=primefaces-aristo" />

<link type="text/css" rel="stylesheet" href="/projet/javax.faces.resource/bootstrap.css.xhtml?ln=css" />

<link type="text/css" rel="stylesheet" href="/projet/javax.faces.resource/bootstrap-responsive.css.xhtml?ln=css" />

<link type="text/css" rel="stylesheet" href="/projet/javax.faces.resource/primefaces.css.xhtml?ln=primefaces" /> 
```

如您所见，theme.css 被 bootstrap.css 覆盖

那么有没有办法在 Bootstrap 之后加载所有 primefaces 样式表？还是有任何其他解决方案可以正确渲染 Primefaces 组件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:31:54.200

我只需要在下载之前[自定义（取消选中 Base CSS 下的表单）引导框架！](http://twitter.github.com/bootstrap/customize.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:08:50.713

应用样式表没有硬性规定。

它完全取决于您，因此它不是更改样式表顺序的解决方案，在您的情况下，它已完成，`!important`但最好使用[Chris Coyier 告诉您何时使用`!important`](http://css-tricks.com/when-using-important-is-the-right-choice/)`CSS`，因此级联内有助于在某处解决冲突的特异性机制可以提供帮助你在这。

[您可以在站点](http://reference.sitepoint.com/css/specificity)点阅读它并在[特异性计算器](http://specificity.keegan.st/)上测试您的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T22:15:08.293

这篇文章是葡萄牙语的，但是例子很简单，你可以下载 datatable.css，在你的项目中使用。

[http://jnaldo.com/2013/03/deixando-a-datatable-do-primefaces-com-o-tema-do-twitter-bootstrap/](http://jnaldo.com/2013/03/deixando-a-datatable-do-primefaces-com-o-tema-do-twitter-bootstrap/)

对不起我的“古老的凯尔特阿拉伯语英语”。

# android - 如何在 Android 中使用 getWindowManager() 自定义屏幕大小

> ID：15358017
> 
> 赞同：1
> 
> 时间：2013-03-12T09:54:41.913
> 
> 标签：android, screen

我对屏幕尺寸有疑问。到目前为止，我在窗口屏幕中显示了图像。我使用下面的代码来获取所有设备的屏幕尺寸。

gridSize 将是 3*3 或 4*4

```
public  void createGameBoard(short gridSize) {
    DisplayMetrics metrics = new DisplayMetrics();

    getWindowManager().getDefaultDisplay().getMetrics(metrics);

    TableLayout tableLayout;
    tableLayout = (TableLayout) findViewById(R.id.parentLayout1);    
    tableLayout.removeAllViews();

    board = GameBoard.createGameBoard(this, 
            bitmap, 
            tableLayout,
            (int) (metrics.widthPixels * metrics.density),
            (int) (metrics.heightPixels * metrics.density),
            gridSize);

} 
```

现在我希望自定义上述方法。那，我想在这个屏幕的顶部和底部留出一些空隙来放置一些内容。我不想要默认的窗口大小。我想改变一些值，`widthPixels`并`heightPixels`在这个屏幕的顶部和底部获得一个空间。

谁能帮我吗？

谢谢拉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:38:40.303

如果您可以设置您的董事会位置，那么下面的代码可以帮助您。

这里的 gapSize 是顶部和底部的间隙。

```
 int gapSize = 10; // you can set any value
    int width = (int) (metrics.widthPixels * metrics.density);// your board width
    int height = (int) (metrics.heightPixels * metrics.density) - (2 * gapSize);// your board height
    int startX = 0, startY = gapSize;

   board = GameBoard.createGameBoard(startX,startY,this, 
        bitmap, 
        tableLayout,
        width , height , gridSize); 
```

# android - 从相机拍摄图像并重定向到特定页面

> ID：15358018
> 
> 赞同：1
> 
> 时间：2013-03-12T09:54:50.227
> 
> 标签：android, android-intent, image-capture

我的应用程序出现问题，我已经创建了相机功能，但我需要在拍摄图像后，页面应该重定向到具有该图像的另一个活动。

我已将以下代码用于相机功能：

```
@Override
public void onClick(View v) {
    Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
    startActivityForResult(cameraIntent, CAMERA_REQUEST); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:02:53.087

覆盖`onActivityResult`方法：

```
onActivityResult(int reqCode, int respCode, Intent extra)
{
   if(reqCode == CAMERA_REQUEST && respCode == RESULT_OK)
   {
      //Photo has been taken, redirect the user.
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:10:00.293

```
 public void onActivityResult(int requestCode, int resultCode, Intent intent) {
            super.onActivityResult(requestCode, resultCode, intent);

            switch (requestCode) {
                    case PICK_FROM_CAMERA:
                if (resultCode == Activity.RESULT_OK) {
                    Bitmap bitmapImage = (Bitmap) intent.getExtras().get("data");
//Redirectin to your second activty passing Bitmap Object
                                  Intent intent = new Intent(getApplicationContext(),
                                SecondActivity.class);
                        intent.putExtra("bitmap", bitmapImage);
                        startActivity(intent);
              }
                  } 
```

在 SecondActivity.java

检索该位图

```
Bitmap bitImage=getIntent().getParcelableExtra("bitmap"); 
```

# javascript - 函数前向引用异常有效

> ID：15358019
> 
> 赞同：1
> 
> 时间：2013-03-12T09:54:56.333
> 
> 标签：javascript

三个类似的片段包括函数前向引用，但行为不同。第一个在我看来很奇怪。为什么？

```
function foo() { bar(); }
function bar() { return "bar"; }
alert(foo()); 
```

```
-> undefined 
```

```
function foo() { bar(); }
function bar() { alert("bar"); }
foo(); 
```

```
-> bar 
```

```
function foo() { return bar; }
bar = "bar";
alert(foo()); 
```

```
-> bar 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:56:39.790

在第一个示例`foo`中，没有`return`语句，因此`undefined`无论返回值`bar()`是什么，它都会返回。

要更正它以给出与其他结果相同的结果，请添加一条`return`语句。

```
function foo() { return bar(); }
function bar() { return "bar"; }
alert(foo()); 
```

# github - 从 github 签出代码时出现 443 错误

> ID：15358021
> 
> 赞同：5
> 
> 时间：2013-03-12T09:54:58.853
> 
> 标签：github, openstack-nova

我正在尝试从 github 获取 nova 代码，但出现以下错误：

```
#git clone https://github.com/openstack/nova.git
Initialized empty Git repository in /home/avikki/Desktop/nt/nova/.git/
error: Failed connect to github.com:443; Operation now in progress while accessing https://github.com/openstack/nova.git/info/refs

fatal: HTTP request failed 
```

你能建议做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:53:50.407

它对我有用，没有错误。您可能会遇到连接问题 - 请注意错误描述说 git `Failed to connect to github.com:443`。查看这个答案：[GitHub - HTTPS 访问](https://stackoverflow.com/questions/3512202/github-https-access)，它提供了一些可能的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-01T16:45:45.913

我有两次这个问题。我正在运行 Linux。第一次，我在一个需要代理的网络上。请参阅此链接了解如何修复代理设置：[如何通过 HTTP 代理从 Git 存储库中提取？](https://stackoverflow.com/questions/128035/how-do-i-pull-from-a-git-repository-through-an-http-proxy)

然后我将我的代理配置计算机带到不需要代理的网络并再次出现此错误。

要取消为我的计算机配置代理，

```
git config --global --unset http.proxy
unset http_proxy
unset https_proxy
unset ftp_proxy
unset all_proxy
unset FTP_PROXY
unset ALL_PROXY
unset HTTPS_PROXY
unset HTTP_PROXY 
```

我不确定我是否需要取消设置所有这些变量，但我当然需要的不仅仅是前两个。

# android - 如何获得 android 应用程序的最低硬件要求

> ID：15358025
> 
> 赞同：15
> 
> 时间：2013-03-12T09:55:10.370
> 
> 标签：android, android-hardware, android-memory

我和一些团队成员开发了一个 android 应用程序，它通过移动设备收集现场数据。

现在这个应用程序将投入生产。所以一般人都会使用这个应用程序。我们还需要编写一个文档来解释应用程序中引入的所有内容以及运行此应用程序所需的最低硬件要求而不会出错。

现在我怎么知道最低硬件要求是什么？

基本上在我的应用程序中大约有四个`TextFields`、三个`Spinners`、`Dates`和`EditTexts`两个`ImageViews`。

那么我怎么知道运行这个应用程序需要什么最低内存要求。

我已经在一个移动设备上尝试过这个应用程序，其中几乎所有的内存都被其他一些应用程序用完了。我的应用程序无法拍摄照片。当我删除一些应用程序时，我的应用程序工作正常。

这就是为什么我想知道运行我的应用程序所需的最低内存要求。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-24T15:41:45.457

最低要求将取决于并且主要包括以下几点的测试和文档：

1.  **API 级别**：支持的最低 android 版本，开发人员最了解它。android 中的 API 之间发生了许多重大变化。支持 v4 和 v7-compat 库确实有很大帮助，但它们并没有涵盖所有方面。

2.  **设备功能**：记下您的应用使用的所有功能。（比如有触摸屏、有摄像头、加速度计、网络连接等）。幸运的是，您可以在 App manifest ( `uses-feature`) 中声明，Play Store 将过滤掉不支持的设备。

3.  **RAM**：使用[DDMS](http://developer.android.com/tools/debugging/ddms.html) / [Android Studio](http://developer.android.com/sdk/index.html)在模拟器和真实设备上查看实时内存使用情况。尽量使用尽可能多的ram，通过触发App的各种功能，让它长时间运行。以最小和最大使用量作为估计。TraceView 等 DDMS 工具还可以让您查看堆、线程上的对象分配，并进行方法分析。长时间运行[Monkey Tool以给应用程序带来压力。](https://developer.android.com/tools/help/monkey.html)

4.  **CPU 速度**：**如果**应用程序进行密集计算、数据转换等，您可能希望在此类计算代码中编写一些时间戳日志。确保您设置 CPU 速度，以便无论需要完成什么计算，都可以在足够的时间内完成，而不会使设备滞后太多。同样在视觉渲染的情况下，（游戏）良好的帧速率是主要因素。在这种情况下，您可以对真实设备的帧速率进行基准测试，并选择高端芯片组。您还可以为多核设备推荐用户。

5.  **CPU/GPU 兼容性**：另一个重要细节是，如果应用程序具有 C/C++ 代码，则该代码可能无法在某些 CPU 类型（MIPS、ARM 或 x86）上运行。使用 OpenGL ES 版本和可用扩展的应用程序也是如此。设备确实有不同的 cpu/图形芯片组。

6.  **Disk** : 估计app安装后的大小，注意App的最低磁盘要求是存储app本身需要的空间，这样至少可以启动，不包括缓存、数据库或者它创建的用户内容关于使用。

7.  **显示尺寸**：虽然始终建议使用响应式和灵活的 UI，但您的应用可能仅适用于某些屏幕尺寸。因此，可以考虑兼容的屏幕尺寸。

8.  **您无法控制**的内容：请记住，您无法控制*其他*应用程序用户可能运行的内容，因此，可以安全地声明您的应用程序在设备上需要这么多*免费*ram，并假设最好的情况，声明该设备至少具有安装了很多内存。例如，您注意到您的应用程序在最大化时占用 200 mb，因此要求仅为 512mb+ 设备。此外，您无法控制用户的 sd 卡大小，因此应用程序应及时告知用户磁盘已满时无法运行。

最后，良好的测试是将估计变成真正的基准。最好将要求基于基准，而不是仅基于估计。

**更新**：

> android是否有任何API或类根据我在应用程序中使用的字段以及我在手机上获得的权限来提供最低内存要求的信息。

1.  API 无法准确预测运行时间。您的代码中会有很多`if`' 和`else`'，加上用户输入，您无法预测对象创建和执行将沿着哪条确切路径进行。您只能使用 DDMS 等工具从外部监控运行时。

2.  与 Apple 不同，Android 是一个开放系统，制造商可以自由选择的设备硬件的可能性是巨大的。再加上他们在设备 ROM 中所做的自定义。没有通用的 API 可以跟踪所有这些。只需坚持 android API 和标准规范，避免使用隐藏的 API 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T07:32:49.957

你应该问自己的问题

**1\. 我的内存要求是什么？** 您需要大量内存（不是物理内存，而是在堆中）来处理数据还是最少？现在一天中的大多数设备都带有 64 MB 堆大小，但这因制造商而异。即使对于相同的 API 级别，它也是不同的。找出你的最小值，然后确保你有足够的堆内存可用。

要监视您在运行时消耗的内存，请检查[此](https://stackoverflow.com/questions/6073744/android-how-to-check-how-much-memory-is-remaining)

要了解当前设备上可用的堆内存量，请检查[this](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass())和[this](http://developer.android.com/reference/android/app/ActivityManager.html#getLargeMemoryClass%28%29)。

请记住，android 不像 windows，每个应用程序都以相同数量的堆内存开始，并且对于该设备上的每个应用程序来说都是恒定的。这意味着不允许应用程序增长超出此可用内存。您可以通过清单中的此标记请求额外内存， `android:largeHeap="true"`但此功能不适用于 pre 3.0 OS 版本。

> 我已经在其中几乎所有内存都被其他应用程序使用的移动设备中尝试了这个应用程序。我的应用程序无法拍摄照片。当我删除一些应用程序时，我的应用程序工作正常。

*上述假设非常令人困惑，因为当您的应用程序运行 Android 时将所有其他应用程序放在一边，这意味着您的应用程序将具有由您的堆大小定义的内存，并且如果操作系统认为它需要更多内存或未能分配更多内存，它将杀死这些进程。Android 优先考虑当前正在运行的任务。因此，如果您正在与应用程序交互，那么它的内存极不可能比堆大小少。他们可能有其他应用程序出现问题的不同原因。*

**2\. 我的 API 要求是什么？** 如果您使用的是旧 API 和级别不可用的任何特殊 API，那么您有两个选择，或者您说您的应用程序根本不支持该 API 版本，或者您可以支持该特定功能。

**3\. 我的硬件要求是什么？** 问问自己，您是否正在使用任何专业软件或硬件，是否所有设备都可以使用该特殊硬件？例如，NFC、蓝牙。

**4\. 我的显示要求是什么？**这个应用程序仅适用于移动设备还是同时适用于移动设备和平板电脑？那些介于平板电脑和手机之间的 7 英寸呢？

**5\. 我的本地化要求是什么？** 这个应用程序是否依赖任何特殊字符集？如果某个设备没有这些字符怎么办。

而且，仅供参考，您提到的对象数量不应超过几 MB。但在使用位图时要小心。[读这个](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T04:55:38.977

确定您的应用程序是否可以在某些硬件上运行的最佳方法是在该硬件上进行测试。询问您的朋友是否有较旧的 Android 手机，并在其上测试您的应用程序。

最坏的情况是创建多个具有不同内存的 Android 虚拟设备。但请注意，即使使用硬件加速，android 模拟器也慢得令人失望。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-19T16:07:45.150

似乎可以保证 Android 中的任何进程都至少有 16MB 内存，大多数现代设备允许堆增长到 24+MB

请参阅 [http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass()的描述](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass())

内存管理全部在操作系统端，并且在[http://developer.android.com/guide/components/processes-and-threads.html#Lifecycle中描述了进程和线程的优先级](http://developer.android.com/guide/components/processes-and-threads.html#Lifecycle)

因此，如果您的应用程序在前台，则很可能您有足够的资源来处理来自相机的图像。

您使用什么 API 来捕获图像？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-20T12:24:54.950

正如@veon 所说，您可以做出一些估计。但是，它总是有点不可预测，因为您想知道它在不同的环境中会使用多少，并且您需要用户知道他们手机上其他应用程序的使用情况。

据我了解，您主要需要提供的是清晰的文档。将其记录如下（对您和每个人）可能会容易得多：

> 此应用程序将在所有最新的标准安卓手机（安卓版本 XXX 及以上）上运行。但是，如果其他应用程序正在运行，特别是内存消耗量很大的应用程序正在运行，则它的性能可能会受到影响。如果您遇到性能问题，请删除其他占用大量内存和进程的应用程序。如果您需要帮助确定这一点，请使用 [ZDbox](https://play.google.com/store/search?q=zdbox)等应用程序来帮助您。

作为参考，我没有指向 ZDbox 的链接，我只是将其用作示例。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-24T16:00:18.733

> 这就是为什么我想知道运行我的应用程序的最低内存要求是多少。

使用[little eye labs](http://www.littleeye.co/features.php)的监控工具。它监控您的应用程序的功耗/内存消耗/CPU 消耗/网络活动[等](http://www.littleeye.co/features.php)。您可以[下载](http://www.littleeye.co/download.php)它进行 30 天试用。这应该让您对您的应用程序消耗的资源有一个公平的了解。我不得不说，虽然应用程序通常不会以一组硬件要求发布。检查您的内存/电池使用情况，您应该没问题。

至于内存不足，当您显示相机拍摄的照片时会发生这种情况还是相机本身会关闭应用程序？您是否正在释放相机占用的资源？看看这个问题[——Android camera out of memory exception](https://stackoverflow.com/questions/2714152/android-camera-out-of-memory-exception)

# javascript - 为什么我无法注入 angular-cookie？

> ID：15358029
> 
> 赞同：28
> 
> 时间：2013-03-12T09:55:13.957
> 
> 标签：javascript, angularjs, angular-cookies

我有

```
<body ng-app="myApp">
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.1/angular-cookies.min.js">
    </script>
</body> 
```

一切都正确加载。

然后在我的javascript中我尝试注入ngCookies：

```
angular.module("myApp", ["ngCookies"]).
    config(function($cookies) {
         console.log($cookies.myCookie);
    }); 
```

但它似乎没有找到 $cookies：

```
 Unknown provider: $cookies from myApp 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-12T11:18:12.007

我不确定您的功能用例是什么，但您不能`$cookies`在配置块中注入服务（是服务）。只有常量和提供者可以注入到配置块中。

您可以将服务注入运行块，但我不知道这是否对您有帮助，因为我不确定您想用这些 cookie 做什么。

顺便说一句：您似乎正在混合主角度文件和`ngCookies`模块的版本。这与您的问题没有直接关系，但这很奇怪。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-27T10:10:37.827

您可以手动注入它：

```
myApp.config(function() {
  var $cookies;
  angular.injector(['ngCookies']).invoke(['$cookies', function(_$cookies_) {
    $cookies = _$cookies_;
  }]);

  // here you can use $cookies as usual
}); 
```

您可能想知道为什么我们必须将呼叫指定`ngCookies`为与`injector()`呼叫一样好`.invoke()`？

`ngCookies`是模块的名称（您需要在项目中拥有[angular-cookies.js](https://docs.angularjs.org/api/ngCookies)才能使用此模块）。当您通过调用创建注入器时，`injector()`您指定应该使用哪些模块，以便可以使用来自这些模块的服务。

`invoke()`调用一个函数，但让我们指定应该将哪些服务（由各种模块提供）传递给函数（在我们的例子中，`ngCookies`模块提供的服务是命名的`$cookies`）

这个解决方案有点破解，因为您手动创建新的注入器，与您的 Angular 应用程序自动创建和使用的注入器分开，但它应该是安全的，因为`ngCookie`似乎只使用不保留自己的 Angular 功能state 并且只是浏览器功能的薄包装。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-09T14:17:22.363

我遇到了同样的问题。角度版本和角度 cookie 版本不匹配。我所做的修复它是将 bower.json 更新为两者的工作版本。

```
"angular": ">=1.2.*",
"angular-cookies": ">=1.2.*" 
```

然后我跑了：

```
bower install 
```

我有这个问题：

```
Unable to find a suitable version for angular, please choose one:
1) angular#1.3.13 which resolved to 1.3.13 and is required by angular-cookies#1.3.13 
2) angular#>=1.2.x <=1.4.x which resolved to 1.3.16 and is required by oclazyload#1.0.1 
3) angular#1.4.0 which resolved to 1.4.0 and is required by angular-cookies#1.4.0 
4) angular#>=1.2.* which resolved to 1.4.0 and is required by hashve 
5) angular#>=1 which resolved to 1.4.0 and is required by angular-bootstrap#0.11.2 
6) angular#>=1.2.26 <=1.5 which resolved to 1.4.0 and is required by angular-translate#2.7.2 
7) angular#~1.x which resolved to 1.4.0 and is required by restangular#1.5.1 
8) angular#^1.2.6 which resolved to 1.4.0 and is required by angular-socket-io#0.6.1 
9) angular#>= 1.0.8 which resolved to 1.4.0 and is required by angular-ui-router#0.2.15 
10) angular#>=1.2.0 <1.5.0 which resolved to 1.4.0 and is required by angular-moment#0.10.1Prefix the choice with ! to persist it to bower.json 
```

然后我选择了3。

它奏效了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-02T04:07:39.253

从[https://stackoverflow.com/a/18971123/132374](https://stackoverflow.com/a/18971123/132374)看来，如果您还没有在服务模块中删除“ngCookies”，您似乎需要：

```
var serviceModule = angular.app('App.services', ['ngCookies']); 
```

这对我有用。请记住，`$cookies`这只适用于 Angular 允许您注入服务的情况（有关详细信息，请参阅接受的答案）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-23T20:05:51.353

就像其他人所说的那样，您不能使用 angular cookie 服务。然而，人类已知的法律没有规定您不能简单地使用 document.cookie 来访问它并自己解析它。或者，您可以创建自己的提供程序，让您可以访问 cookie，然后您可以注入它。请记住，angular 只是一个框架，当框架有限制时，您必须记住使用称为 javascript 的东西。

* * *

## 回答 #6

> 赞同：-11
> 
> 时间：2013-12-06T03:56:14.130

`$cookieProvider`您应该使用名称注入`$cookies`：

```
angular.module("MyApp", ["ngCookies","ngRoute"])
    .config(["$routeProvider", "$locationProvider","$cookiesProvider",
        function($routeProvider, $locationProvider, $cookies) {

        }
    ]); 
```

# apache-flex - 在 Parsley 动态命令中找出发送请求的消息类型

> ID：15358030
> 
> 赞同：0
> 
> 时间：2013-03-12T09:55:14.547
> 
> 标签：apache-flex, parsley

我正在使用动态命令的欧芹框架中开发一个应用程序。

这是示例代码

```
public class MyCommand extends EventDispatcher
{
    [Inject]
    public var service:IService;

    [Inject(id="model")]
    public var model:TestModel;

    public function execute(message:TestMessage):AsyncToken
    {           
        return service.getResponse(message.requestObject);
    }

    public function result(data:Object):void
    {

            //Here i want to find out the response is for message type1 or message type2, that called the service.
        var result:ByteArray=data as ByteArray;

        var response:ArrayCollection=result.readObject() as ArrayCollection;

        model.data=response;

    }

    //faultCode, faultDetail, faultString, rootCause
    public function error(info:Object):void
    {                       
        dispatchEvent(new AlertEvent(AlertEvent.SHOW_ALERT,"Service Loading Error",
            "There was an error in the application"));
    }           
} 
```

消息类

```
public class TestMessage
{

    public static const Type1:int=0;
    public static const Type2:int=1;

    private var _type:int;

    private var _requestObject:RequestObjectHelper;

    [Selector]
    public function get type():int
    {
        return _type;
    }

    public function set requestObject(value:RequestObjectHelper):void
    {
        _requestObject = value;
    }

    public function get requestObject():RequestObjectHelper
    {
        return _requestObject;
    }

    public function TestMessage(type:int)
    {
        _type=type;
    }
} 
```

请求对象类

```
 public class RequestObjectHelper
    {
           private var _url:String;
           private var _resultFormat:String;
           private var _noCacheParam:Object;

//getters and setters
    } 
```

消息发送代码

```
public function handleViewInitialized():void
{           
    var requestObject:RequestObjectHelper;
    var message:TestMessage;

    //msg1
    requestObject=new RequestObjectHelper();

    requestObject.url="url1";

    requestObject.resultFormat="amf";

    message=new TestMessage(TestMessage.Type1);

    message.requestObject=requestObject;

    dispatcher(message);

    //msg2      
    requestObject=new RequestObjectHelper();

    requestObject.url="url2";

    requestObject.resultFormat="amf";

    message=new TestMessage(TestMessage.Type2);

    message.requestObject=requestObject;

    dispatcher(message);            
} 
```

我希望上面的代码很容易理解。我试图让它尽可能简单。我想从这段代码中得到的是**如何从 MyCommand 类的结果方法中识别调用服务的消息类型，该方法将在服务响应到达时被调用。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:36:43.880

你可以让你的命令记住它被调用的类型。

```
private var msgType:String;

public function execute(message:TestMessage):AsyncToken
{
    msgType = message.type;
    return service.getResponse(message.requestObject);
}

public function result(data:Object):void
{
    //Here i want to find out the response is for message type1 or message type2, that called the service.
    if(msgType==TestMessage.Type1)
         trace("Type1");
    else if(msgType==TestMessage.Type2)
         trace("Type2");
    else
         trace(msgType);
} 
```

# jquery - jquery给定日期之间的差异

> ID：15358032
> 
> 赞同：2
> 
> 时间：2013-03-12T09:55:21.963
> 
> 标签：jquery, date, jquery-ui-datepicker

我试图计算两个日期之间的天数，但我不想要天数差异，我要写什么脚本来显示这两个给定日期之间的所有实际日期。例如，我有 2 个日期：

`3/12/2013`和`3/15/2013`

我想以某种方式获得这些日期：`3/12/2013, 3/13/2013, 3/14/2013, 3/15/2013`

这是我写的代码，但这只会返回天数的差异

```
$(document).ready(function () {

  var From = "03-12-2013";
  var To = "03-15-2013";
  var d1 = jQuery.datepicker.parseDate("mm-dd-yy",  From);
  var d2 = jQuery.datepicker.parseDate("mm-dd-yy",  To);

  var diff = 0;
  if (d1 && d2) {
      diff = Math.floor((d2.getTime() - d1.getTime()) / 86400000); // ms per day
  }
  console.log(diff);
}); 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:16:04.063

根据您的代码，无需查看日期选择器（也许已经有一种方法可以为您提供所需的东西），您可以执行以下操作：

```
var milisperday = 86400000,
    days = [],
    offset = (d1<d2)?d1:d2;

for (var i = 1;i<=diff;i++){
    days.push(new Date(offset.getTime() + milisperday * i));
}

console.log(days); 
```

now`days`是一个数组，其中包含您想要的日期作为日期对象。

[例子](http://jsfiddle.net/7tQ4B/25)

# sharepoint - SharePoint 2010 CQWP 分批显示结果

> ID：15358033
> 
> 赞同：0
> 
> 时间：2013-03-12T09:55:31.447
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer, cqwp

我正在尝试在我的 SharePoint 网站上创建一个“相关文章”区域，并且我正在使用 CQWP（内容查询 Web 部件）将结果定制为我们为每个页面创建的元数据。到目前为止，一切都很好。

因为 CQWP 有项目限制，而且我们的网页空间有限，所以我们希望一次以 5 个批次显示结果。用户应该能够在 Web 部件中单击以滚动浏览其他文章（1 - 5 ；6 - 10 等）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:23:18.950

In the presentation option of your CQWP, put the item limit as 100 or 200. And then use a bit of jquery to paginate these into groups of 5 or 6.

# ibm-mobilefirst - BusyIndi cator 不工作

> ID：15358042
> 
> 赞同：0
> 
> 时间：2013-03-12T09:56:25.220
> 
> 标签：ibm-mobilefirst

Worklight busyindicator 无法正常工作。我的问题是我正在使用多页。在页面更改时，我调用 web 服务适配器并调用忙指示符，以便它在获取时显示正在进行的工作。但是会发生页面更改和指示符快速显示和隐藏但是适配器仍处于获取阶段，并且在成功调用了一段时间数据后，但在这些工作期间没有显示忙碌指示器。

```
var busyIndicator = null;

function wlCommonInit(){
    busyIndicator = new WL.BusyIndicator();
    } 
```

这是我在页面更改时调用的代码。

```
 busyIndicatorDemo();
    var viewPath = "views/add_fund_transfer.html";
    WL.Page.load(viewPath,
        {
                onComplete: function() {    

                PayAnyOne_Controller.GetBranches(GetBranchesProcedureName);
                busyIndicator.hide();

                }
            });

function busyIndicatorDemo() {
    busyIndicator.show();
    setTimeout(15000);
} 
```

在多页中使用时，busyindicator 似乎不适用于 adpater。请给我解决方案或我的代码中的问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:43:09.020

似乎问题出在代码流中。您基本上正在运行此代码：

1.  显示忙碌指示符
2.  加载页面
3.  页面加载完成时：调用过程（**异步调用**），并隐藏忙指示符。

因此，这会生成您报告的行为 - 一旦页面完成加载，busyindicator 会显示并快速隐藏，即使服务仍在获取数据（在异步调用中）

将busyindicator.hide移动到调用过程的onSuccess应该可以解决问题（也把它放在onFailure ...）希望这会有所帮助

# java - 如何在设定的超时时间内运行异步任务？

> ID：15358044
> 
> 赞同：3
> 
> 时间：2013-03-12T09:56:26.473
> 
> 标签：java, android, android-asynctask

我想运行我的异步任务，它以一定的准确性获取坐标，并在获得坐标时启动不同的活动。

现在我想设置一个时间，以便如果它没有以设定的精度获得坐标，那么异步任务应该自行销毁（删除位置更新等）并传递纬度/经度的默认值。

我尝试使用它： `new GetGPShotfix().execute().get(1, TimeUnit.MINUTES);`以便为此异步设置超时一分钟，然后继续执行此异步执行调用下方的下一行/任务。

但在我的情况下，它会跳到下一行而不等待异步设置的超时。

我怎样才能让它按照我想要的方式执行？我也尝试使用线程`join()`，但显然结果是相同的:(

*更新*：这是我的代码（用于 gpshotfix() 异步）：

```
private class GetGPShotfix extends AsyncTask<Void, Void, Void> {
    // ProgressDialog progressDialogGPS;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        Log.i("GPSfixer", "Ready to get GPS Hotfix");

    }

    @Override
    protected Void doInBackground(Void... params) {

        try {
            LocationRetriever myLoc = new LocationRetriever();
            // myLoc.getUserLoc();
            //if (gotLoc == 0  && (firstLoc.getAccuracy() > 10)) {
            if (gotLoc == 0) {
                myLoc.getUserLoc();
            }

        } catch (Exception e) {
            Log.i("GPSfixer", "GPS Hotfix Failed!", e);

        }

        finally {

            Log.i("GPSfixer", "Get GPS Hotfix Completed...");

        }
        return null;
    }

    @Override
    protected void onCancelled() {
        Log.i("GPSfixer", "Get GPS Hotfix Cancelled");
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);
        Log.i("GPSfixer", "GPS Hotfix cycle completed");
        System.out.println("Lon :" + myCurrentLon + "Lon2: " + finalLonNow);
        System.out.println("Lat :" + myCurrentLat + "Lat2: " + finalLatNow);
        //pDialog2.dismiss();
        // progressDialogGPS.dismiss();

    }
}

public class LocationRetriever {
    final LocationManager locationManager = (LocationManager) StoreSelection.this.getSystemService(Context.LOCATION_SERVICE);

    final LocationListener locationListener = new LocationListener() {

        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(),
                    provider + " is disabled!", Toast.LENGTH_SHORT).show();
            Toast.makeText(getApplicationContext(),
                    "Please standby..enabling " + provider,
                    Toast.LENGTH_SHORT).show();

            // explicitly enable GPS
            Intent enableGPS = new Intent("android.location.GPS_ENABLED_CHANGE");
            enableGPS.putExtra("enabled", true);
            sendBroadcast(enableGPS);

            // explictly disable GPS
            /*
             * Intent intent = new
             * Intent("android.location.GPS_ENABLED_CHANGE");
             * intent.putExtra("enabled", false); sendBroadcast(intent);
             */

        }

        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub
            Toast.makeText(getApplicationContext(),
                    provider + " is enabled..", Toast.LENGTH_SHORT).show();

        }

        public void onStatusChanged(String provider, int status,
                Bundle extras) {
            // TODO Auto-generated method stub
            /*
             * System.out.println("val of status: " + status + " provider: "
             * + provider);
             */
            if (status == 1) {
                Toast.makeText(getApplicationContext(),
                        provider + " is enabled & available..",
                        Toast.LENGTH_SHORT).show();

                System.out.println(provider + " is NOT available!");
            } else {
                System.out.println(provider + " is NOT available!");
            }

            /* progressDialogGPS.dismiss(); */

        }

        public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub

            // ORIG CODE --BELOW--

            // moved lat/lon vars to top ^

            myCurrentLon = location.getLongitude();
            myCurrentLat = location.getLatitude();

            firstLoc = location;

            myCurrentLon = Double.parseDouble(new DecimalFormat("##.#########")
                    .format(myCurrentLon));
            myCurrentLat = Double.parseDouble(new DecimalFormat("##.#########")
                    .format(myCurrentLat));

            /*Toast.makeText(getApplicationContext(),
                    myCurrentLat + " " + myCurrentLon, Toast.LENGTH_SHORT)
                    .show();*/
            System.out.println(myCurrentLat + " " + myCurrentLon);

            float acc=location.getAccuracy();
            /*Toast.makeText(getApplicationContext(), "Acc.: " + acc,Toast.LENGTH_SHORT).show();*/

            // --

            // get best out of 2 locs. --BEGINS--
            /*
             * makeUseOfNewLocation(location);
             * 
             * if(currentBestLocation == null){ currentBestLocation =
             * location; }
             */
            if (myCurrentLon != null && myCurrentLat != null && (firstLoc.getAccuracy() <= 10)) { // added
                                                                                // chk
                                                                                // for
                                                                                // online..
                gotLoc = 1;
                System.out.println("OK GOTLOC == 1 !");
                System.out.println("Got your Current Location..disabling GPS to save Battery Power..");
                Toast.makeText(getApplicationContext(), "Got your Current Location..disabling GPS to save Battery Power..", Toast.LENGTH_SHORT).show();
                // removing updates
                // locationManager.removeUpdates(locationListener);
                // explicitly turning off GPS
                Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
                intent.putExtra("enabled", false);
                sendBroadcast(intent);
                System.out.println("GPS disabled!");

                finalLatNow = myCurrentLat;
                finalLonNow = myCurrentLon;
                //
                // if(gotLoc == 0){
                if (myCurrentLon != null
                        && myCurrentLat != null && (firstLoc.getAccuracy() <= 10)) {
                    // locationManager.removeUpdates(locationListener);
                    gotLoc = 1;
                    Intent i = new Intent(StoreSelection.this, LastVisitDetails.class);

                    i.putExtra("currUsrLon", myCurrentLon); // 2nd
                    i.putExtra("currUsrLat", myCurrentLat); // 1st
                    i.putExtra("storeID", selStoreID);
                    i.putExtra("selStoreName", selStoreName);
                    i.putExtra("imei", uuid);
                    i.putExtra("date", userDate);

                    runOnUiThread(new Runnable() {
                        public void run() {
                            try {
                                // stuff here

                                pDialog2.dismiss();
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                        }
                    });
                    System.out.println("--Removing Loc. Updates--");
                    remUpdates();

                    syncTIMESTAMP = System.currentTimeMillis();
                    Date dateobj = new Date(syncTIMESTAMP);
                    SimpleDateFormat df = new SimpleDateFormat("dd-MM-yyyy HH:mm:ss");
                    fullFileName1 = df.format(dateobj);

                    dbengine.open();
                    dbengine.UpdateStoreStartVisit(selStoreID, fullFileName1);
                    dbengine.close();

                    startActivity(i);
                    finish();

                } else {

                    if (myCurrentLon == null && myCurrentLat == null) {
                        // alert + GPS not locking on..do something()
                    } else {
                    }
                    /*if (!isOnline()) {
                        // alert + not online...do something()
                        showNoConnAlert();
                    } else {
                    }*/
                }
                //
                /*
                 * } else{}
                 */

            } else {
                System.out.println("INSIDE ELSE -- GOTLOC");

            }
        }

    };

    // locationManager.requestLocationUpdates(locationManager.getBestProvider(new
    // Criteria(), true), 2000, 4, locationListener);

    // enable gps everytime we request location update
    /*
     * Intent enableGPS = new Intent("android.location.GPS_ENABLED_CHANGE");
     * enableGPS.putExtra("enabled", true); sendBroadcast(enableGPS);
     */

    // ** ORIG Grequest location updates from GPS string

    /*
     * locationManager.requestLocationUpdates(locationManager.GPS_PROVIDER,
     * ONE_MIN, 4, locationListener);
     */

    // ** now remove updating of co-ordinates

    // locationManager.removeUpdates(locationListener);

    /*public Location getBestLoc(){

        if(firstLoc.getAccuracy() <= newLoc.getAccuracy() && newLoc.getAccuracy() <= 10) {

            return firstLoc;
        }
        else if(newLoc.getAccuracy() <= firstLoc.getAccuracy() && newLoc.getAccuracy() <= 10){

            return newLoc;
        }
        else {
            return newLoc;
        }

    }*/

    void getUserLoc() {
        if (gotLoc == 1  && (firstLoc.getAccuracy() <= 10)) {
            locationManager.removeUpdates(locationListener);
        } else {
        }

        final Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setHorizontalAccuracy(Criteria.ACCURACY_FINE);
        // criteria.setVerticalAccuracy(Criteria.NO_REQUIREMENT);
        criteria.setAltitudeRequired(false);
        // criteria.setBearingAccuracy(Criteria.NO_REQUIREMENT);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);

        criteria.setPowerRequirement(Criteria.POWER_HIGH);

        runOnUiThread(new Runnable() {
            public void run() {
                try {
                    // stuff here
                    /*
                     * progressDialogGPS = ProgressDialog.show(_activity,
                     * null, null);
                     * progressDialogGPS.setContentView(R.layout.loader);
                     * progressDialogGPS
                     * .getWindow().setType(WindowManager.LayoutParams
                     * .TYPE_KEYGUARD_DIALOG);
                     */

                    /*locationManager
                            .requestLocationUpdates(locationManager
                                    .getBestProvider(criteria, true),
                                    TEN_SECS, 4, locationListener);*/

                    locationManager.requestLocationUpdates(locationManager.GPS_PROVIDER, 0l, 0.0f, locationListener);

                    // remove updates #
                    if (gotLoc == 1 && (firstLoc.getAccuracy() <= 10)) {
                        locationManager.removeUpdates(locationListener);
                    } else {
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });

        /*
         * try { Thread.currentThread().sleep(2000); } catch
         * (InterruptedException e) { // TODO Auto-generated catch block
         * e.printStackTrace(); }
         */

    }

    void remUpdates() {
        //if(firstLoc.getAccuracy() <= 10){
        locationManager.removeUpdates(locationListener);
        //}
        //else {}
    }
} 
```

任何帮助都是可观的..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T10:14:05.813

使用 execute.get(1, TimeUnit.MINUTES) 时，它将异步任务转换为同步任务。在这种情况下，使用异步任务是没有用的。您可以在启动 asynctask 时启动一个单独的线程来监视时间并在此之后执行所需的操作。您可以创建一个实现可运行的类并将 asyctask 作为构造函数参数传递并在内部取消它。

```
class checkAyscTask implements Runnable {
    AsyncTask<Void, Void, Boolean> mAT;
    Context context;

    public checkAyscTask(AsyncTask<Void, Void, Boolean> at) {
        mAT = at;
    }

    @Override
    public void run() {
        mHandler.postDelayed(runnable, 60000);
        // After 60sec the task in run() of runnable will be done
    }

    Handler mHandler = new Handler();
    Runnable runnable = new Runnable() {
        @Override
        public void run() {
            if (mAT.getStatus() == Status.RUNNING || mAT.getStatus() == Status.PENDING) {
                mAT.cancel(true); //Cancel Async task or do the operation you want after 1 minute
            }
        }
    };
}

task_GetGPS = new GetGPShotfix(); 
task_GetGPS.execute();
checkAyscTask chk = new checkAyscTask(task_GetGPS);
// Thread keeping 1 minute time watch
(new Thread(chk)).start(); 
```

# django - allauth 问题：管理员中的提供商列表为空

> ID：15358045
> 
> 赞同：0
> 
> 时间：2013-03-12T09:56:29.717
> 
> 标签：django, django-allauth

我已经根据自述文件设置了 allauth。同步数据库等。

但是，当我尝试在管理员中设置社交应用程序时，提供者下拉列表为空。

我试图在 providers/ **init** .py 文件中打印 get_list() （我假设这是 models.py 和 as_choices() 方法使用的方法。

您对我在哪里做错了有任何指示吗？:)

任何帮助是极大的赞赏。

亲切的问候，

皮特

我的设置文件（大部分）：

```
from os.path import abspath, basename, dirname, join, normpath
DJANGO_ROOT = dirname(dirname(abspath(__file__)))
SITE_NAME = basename(DJANGO_ROOT)
SITE_ROOT = dirname(DJANGO_ROOT)
sys.path.append(SITE_ROOT)
sys.path.append(normpath(join(DJANGO_ROOT, 'apps')))
sys.path.append(normpath(join(DJANGO_ROOT, 'libs')))

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    #Authentication/signup backend
    'project.apps.allauth',
    'project.apps.allauth.account',
    'project.apps.allauth.socialaccount',
    'project.apps.allauth.socialaccount.providers.facebook',
    'django.contrib.admin',

TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.request',
    'django.contrib.auth.context_processors.auth',
    'project.apps.allauth.account.context_processors.account',
    'project.apps.allauth.socialaccount.context_processors.socialaccount',
)

ACCOUNT_ADAPTER = 'project.apps.allauth.account.adapter.DefaultAccountAdapter'
ACCOUNT_AUTHENTICATION_METHOD = 'username_email'
ACCOUNT_EMAIL_REQUIRED = True
ACCOUNT_PASSWORD_MIN_LENGTH = 8
ACCOUNT_SIGNUP_PASSWORD_VERIFICATION = False
ACCOUNT_UNIQUE_EMAIL = True
ACCOUNT_USERNAME_REQUIRED = False
SOCIALACCOUNT_PROVIDERS = {'facebook': {'SCOPE': ['email'], 'AUTH_PARAMS': {'auth_type':     'reauthenticate'}, 'METHOD': 'js_sdk', 'LOCALE_FUNC': 'path.to.callable'}} 
```

我的网址文件：

```
urlpatterns = patterns('',
                   #(r'^/$', include('project.apps.main.urls')),
                   #(r'^account/$', include('project.apps.account.urls')),
                   (r'^admin/', include(admin.site.urls)),
                   (r'^registration/', include('project.apps.allauth.urls')),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:14:02.473

我不确定这是否是您的问题的原因，但您似乎正在使用手动调整的 Python 路径运行：您将 allauth 放在 project.apps 下。这可能会引入怪异，例如，想想当 allauth 开始导入自身时会发生什么：“from allauth import ...”。在您的情况下，可以通过 project.apps 和直接通过 allauth 访问相同的模块/代码。请尝试“规范化”您的安装，最好使用 virtualenv 之类的工具。

# asp.net - 不确定在 basichttpbindpart 中是否错了？

> ID：15358058
> 
> 赞同：1
> 
> 时间：2013-03-12T09:57:00.673
> 
> 标签：asp.net, vb.net, web-services

当我向此 Web 服务发送请求以获取信息时遇到问题这是我的配置代码

```
<bindings>
      <basicHttpBinding>
        <binding name="Z_SI_ADVANCE_VENDORBinding" messageEncoding="Text" textEncoding="utf-8">
          <security mode="Transport">
            <transport clientCredentialType="Basic" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding> 
```

这是我向该网络服务发送请求的代码（[http://www.xxxx.com](http://www.xxxx.com)）

```
 Dim epAddress As New EndpointAddress("http://www.xxxx.com")
            Dim binding As New BasicHttpBinding(BasicHttpSecurityMode.TransportCredentialOnly)
            binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Basic

            Dim client As XI_ADVANCE_VENDOR.Z_SI_ADVANCE_VENDORClient = New XI_ADVANCE_VENDOR.Z_SI_ADVANCE_VENDORClient(binding, epAddress)
Dim p_output As XI_ADVANCE_VENDOR.BAPIRETURN1
client.ClientCredentials.UserName.UserName = "xxxxx"
            client.ClientCredentials.UserName.Password = "xxxxx"
            p_output = client.Z_SI_ADVANCE_VENDOR(param1,param2) 
```

当调用请求完成时，它会在browser网页上显示“服务器错误”。

# jquery - 我的 JQuery show() 在 IE 中有效，但在 FF 中无效？

> ID：15358063
> 
> 赞同：5
> 
> 时间：2013-03-12T09:57:16.957
> 
> 标签：jquery, css, internet-explorer, firefox

在我的 .Net Web 应用程序中，我有一些带有“skmTooltipHost”类的元素，它们动态放置在页面上。

当鼠标悬停在它们上方时，应显示一种工具提示类型的弹出窗口。这在 IE 中运行良好，但在 Firefox 中则完全没有。

请帮忙！

执行“悬停和显示”的 javascript

```
$(document).ready(function () {
  $(".skmTooltipHost").hover(function () {
      $(this).empty().append('<div class="skmTooltipContainer"><strong>hello</strong>' + $(this).attr('tooltip') + '</div>');
      $(this).find('.skmTooltipContainer').css("left", $(this).position().left + 20);
      $(this).find('.skmTooltipContainer').css("top", $(this).position().top + $(this).height());
      $(".skmTooltipContainer").css("display", "inline-block");
      $(".skmTooltipContainer").show();
      $(this).show();
   },function () {    
     $(".skmTooltipContainer").fadeTo(500, 1.0, function () { $(this).remove(); });
   });
}); 
```

我的 CSS

```
.skmTooltipHost
{
cursor: help;
border-bottom: dotted 1px brown;

}

.skmTooltipContainer
{
padding-left: 10px;
padding-right: 10px;
padding-top: 3px;
padding-bottom: 3px;
 display:inline-block;
position: absolute!important;
background-color: #ff9;
border: solid 1px #333;
z-index: 999;
} 
```

**编辑**

我终于使用了一组不同但相似的代码，它们确实有效。我不确定有什么区别。我的工作代码如下：

```
 function simple_tooltip(target_items, name) {
      $(target_items).each(function (i) {
          $("body").append("<div class='" + name + "' id='" + name + i + "'><p>Click for a link to the run details</br><strong>Server:   </strong>" + $(this).attr('title') + "</br><strong>Information:</strong>" + $(this).attr('error') + "</p></div>");
          var my_tooltip = $("#" + name + i);

          $(this).removeAttr("title").mouseover(function () {
              my_tooltip.css({ opacity: 0.8, display: "none" }).fadeIn(100);
          }).mousemove(function (kmouse) {
              my_tooltip.css({ left: kmouse.pageX + 15, top: kmouse.pageY + 15 });
          }).mouseout(function () {
              my_tooltip.fadeOut(100);
          });
      });
  }
  $(document).ready(function () {
      simple_tooltip($(".skmTooltipHost"), "tooltip");
  });

.tooltip{
position:absolute;
z-index:999;
left:-9999px;
background-color:#dedede;
padding:2px;
border:1px solid #fff;
width:250px; 
```

}

```
.tooltip p{
    margin:0;
    padding:0;
    color:black;
    background-color:white;
    padding:2px 7px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:45:29.417

这是[（jsfiddle）](http://jsfiddle.net/ab4ML/1/)您正在使用的 CSS/HTML/JS 吗？这适用于我在 Chrome 和 Firefox 中。这条线可能不会做你想做的事：

```
$(".skmTooltipContainer").fadeTo(500, 1.0, function () { $(this).remove(); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:27:37.187

我看到的问题在于这些方面：

此行标记了从 DOM 中移除的跨度。因此它消失了，您不再悬停控件。

```
$(this).empty().append('<div class="skmTooltipContainer"><strong>hello</strong>' + $(this).attr('tooltip') + '</div>'); 
```

此行从 DOM 中删除一个控件。您会认为这是指工具提示，但实际上，它指的是顶级 SPAN（或您的情况下的工具提示主机）。

```
$(".skmTooltipContainer").fadeTo(500, 1.0, function () { $(this).remove(); }); 
```

这段代码被证明是有效的：

```
$(document).ready(function () {
  $(".skmTooltipHost").hover(function () {
      $(this).append('<div class="skmTooltipContainer"><strong>hello</strong>' + $(this).attr('tooltip') + '</div>');
      $(this).find('.skmTooltipContainer').css("left", $(this).position().left + 20);
      $(this).find('.skmTooltipContainer').css("top", $(this).position().top + $(this).height());
      $(".skmTooltipContainer").css("display", "inline-block");
      $(".skmTooltipContainer").show();
      $(this).show();
   },function () {    
     $(".skmTooltipContainer").fadeTo(500, 1.0, function () { $(".skmTooltipContainer").remove(); });
   });
}); 
```

你可以在这里测试它：http: [//jsfiddle.net/ab4ML/2/](http://jsfiddle.net/ab4ML/2/)

提到[moeffju](https://stackoverflow.com/questions/15358063/my-jquery-show-works-in-ie-but-not-ff/15361593#15361593)提供小提琴。

# database - 忘记了同一个表中属性的箭头在 RDBMS 中的含义

> ID：15358065
> 
> 赞同：0
> 
> 时间：2013-03-12T09:57:38.333
> 
> 标签：database, rdbms

在这里做一个小测验，

[http://gyazo.com/fef7b3899cb2d2785472af5d9d4b0c09](http://gyazo.com/fef7b3899cb2d2785472af5d9d4b0c09)

EMPLOYEE 中从 SUPERSSN 到 SSN 的箭头

忘记什么意思了，是不是只是告诉我它也可以用作主键？

如果您能对此有所了解，将不胜感激。

干杯，

辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:02:13.227

这意味着SUPERSSN直接依赖于SSN。

SSN 带有下划线，表示 SSN 是主键。

以及是否：

> 它只是告诉我它也可以用作主键吗

不它不是。它实际上告诉 SUPERSSN 直接依赖于 PK，就像表的其他列或列集一样。**但是没有标志，其他列可以依赖SUPERSSN！**

# typescript - 打字稿和输出 javascript 文件的解决方案资源管理器视图

> ID：15358070
> 
> 赞同：6
> 
> 时间：2013-03-12T09:57:46.710
> 
> 标签：typescript

我正在使用带有 typescript 和 web essentials 2012 插件的 Visual Studio 2012。如果您通过右键单击解决方案资源管理器 > 添加新项目 > 选择 typescript 文件来添加新的 typescript 文件...例如 file1.ts Visual Studio 也会生成 file1.js 和 file1.min.js。在解决方案资源管理器中，它们整齐地出现在 file1.ts 文件根目录下。如果您执行“添加现有项目”，例如 file2.ts，则生成的 file2.js 出现在 file2.ts 名称下时，您不会得到那种整洁的外观。

这是为什么？以及我需要更改什么设置才能使 Visual Studio 使所有生成的 js 文件出现在 ts 文件根目录下。

我希望我说得通。

顺便说一句，自从第一个 typescript 插件发布以来，情况一直如此，感谢 kashim

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T12:10:31.647

要获得所需的效果，您需要在项目文件中进行修改。您会注意到正确嵌套的文件如下所示：

```
<Content Include="app.js">
  <DependentUpon>app.ts</DependentUpon>
</Content>
<Content Include="app.min.js">
  <DependentUpon>app.ts</DependentUpon>
</Content> 
```

而您目前可能有`Content`每个文件的元素，但`DependentUpon`里面没有元素。

更改项目文件以匹配此示例将为您嵌套项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-18T07:48:28.593

**有一个名为NestIn**的小 VS 插件，它无需直接编辑项目文件（[https://visualstudiogallery.msdn.microsoft.com/9d6ef0ce-2bef-4a82-9a84-7718caa5bb45](https://visualstudiogallery.msdn.microsoft.com/9d6ef0ce-2bef-4a82-9a84-7718caa5bb45)）就可以解决问题。没有设置，没有配置，只需右键单击两个以上的文件并将它们嵌套在其中。您唯一需要的是指定哪个是根。当然，如果您愿意，您可以取消嵌套文件。

另一个由 Mads Kristensen 编写的**文件嵌套**仅适用于 Visual Studio 2013 和 2015。因此，如果您打算升级到更高的 VS 版本，您也可以尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-14T12:50:49.273

这是一个可以完成这项工作的小型正则表达式！

在解决方案资源管理器中卸载您的项目，然后右键单击并选择“编辑”

在文件中，使用 RegEx（星号启用）运行搜索和替换 ( `Ctrl`- `H`) 并替换：

`<Content Include="(.*)\\([^\\]*).js" />`

和

`<Content Include="$1\$2.js"><DependentUpon>$2.ts</DependentUpon></Content>`

现在保存文件并重新加载项目。

# c - 使用 SDL 播放 YUV 视频：当分辨率不是 4 的倍数时换行太晚

> ID：15358076
> 
> 赞同：1
> 
> 时间：2013-03-12T09:58:04.063
> 
> 标签：c, sdl, yuv

`SDL_Overlay`在使用（SDL 1.2.5）播放某些未压缩的 YUV 4:2:0 平面视频数据源时，我一直在与一个问题作斗争。

我播放**640x480**视频没有问题。但我刚刚尝试播放分辨率为**854x480**的视频，我得到了一个奇怪的效果。这条线太迟包裹 1-2 个像素（导致类似剪切的变换），色度消失，每条线上都用交替的 R、G 或 B 代替。看[这个截图](http://i.imgur.com/3OX9bun.jpg?1)

YUV 数据本身是正确的，因为我可以将其保存到文件并在另一个播放器中播放。此时未填充 -*间距与行长匹配。*

我怀疑当分辨率不是 4 的倍数时会出现一些问题。也许`SDL_Surface`期望`SDL_Overlay`色度分辨率是 2 的倍数？

更令我怀疑的是，我注意到我以**854*480**`SDL_Surface`大小创建的 RGB的间距为**2564**，而不是我期望的**3*854 = 2562 。**

 ******如果我在宽度上添加 1 或 2 个像素`SDL_Surface`（但保持叠加层和矩形相同），它可以正常工作，尽管右侧有黑色边框。当然，这会与四的倍数的视频**中断**。

### 设置

```
screen = SDL_SetVideoMode(width, height, 24, SDL_SWSURFACE|SDL_ANYFORMAT|SDL_ASYNCBLIT);
if ( screen == NULL ) {
  return 0;
}
YUVOverlay = SDL_CreateYUVOverlay(width, height, SDL_IYUV_OVERLAY, screen);
Ydata = new unsigned char[luma_size];
Udata = new unsigned char[chroma_size];
Vdata = new unsigned char[chroma_size];

YUVOverlay->pixels[0] = Ydata;
YUVOverlay->pixels[1] = Udata;
YUVOverlay->pixels[2] = Vdata;

SDL_DisplayYUVOverlay(YUVOverlay, dest); 
```

### 渲染循环：

```
SDL_LockYUVOverlay(YUVOverlay);
memcpy(Ydata, buffer, luma_size);
memcpy(Udata, buffer+luma_size, chroma_size);
memcpy(Vdata, buffer+luma_size+chroma_size, chroma_size);
int i = SDL_DisplayYUVOverlay(YUVOverlay, dest);
SDL_UnlockYUVOverlay(YUVOverlay); 
```

对我来说最简单的解决方法是增加 RGB`SDL_Surface`大小，使其在每个维度上都是 4 的倍数。但这会增加一个黑色边框。

有没有解决这个问题的正确方法？我应该尝试在我的 YUV 数据上使用填充吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T16:41:58.630

输入数据的每个平面必须从可被 8 整除的地址开始，并且每行的步幅必须能被 8 整除。要清楚：您的色度平面也需要遵守这一点。

这个要求似乎来自 SDL 库在 x86 cpu 上使用 MMX 多媒体指令。请参阅发行版中 src/video/SDL_yuv_mmx.c 中的注释。

更新：我查看了实际的汇编代码，还有源代码注释中没有提到的附加假设。这适用于 SDL 1.2.14。除了上面描述的模 8 假设之外，代码还假设输入亮度和输入色度平面都被完美地打包（即宽度 == 步幅）。******

# c# - 如何使用 Ajax UpdatePanel 的内容模板将用 C# 编写的 Html 标记动态添加到 .aspx

> ID：15358079
> 
> 赞同：0
> 
> 时间：2013-03-12T09:58:09.523
> 
> 标签：c#, asp.net, ajax, .net-4.0

我有以下代码（.Aspx.cs），

```
StringBuilder strMarkup = new StringBuilder();
strMarkup.AppendFormat("<div id=" + "MyDiv" + "><table id= " + "sDetails" +      ">" +
"<tr><td><input id= " + "lblStudentName" + " type=" + "text" + " value = " + "StudentName" + "/> </td>" +
"<td> <input id= " + "dispStudentName" + " type=" + "text" + " value = {0}/> </td>" +
"</tr>" +
"<tr><td><input id= " + "lblCourseName" + " type=" + "text" + " value = " +  "StudentName" + "/> </td>" +
"<td> <input id= " + "dispCourseName" + " type=" + "text" + " value = {1}/> </td>" +
"</tr></table></div>", _studentName, _courseName); 
```

我想将上述内容加载到 Ajax UpdatePanel 我的 .aspx 页面如下：

```
 <asp:UpdatePanel ID="UpdateDetails" runat="server">
    <ContentTemplate>
        <asp:Panel ID="StudentDetialsPanel" runat= "server">
        </asp:Panel>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID = "btnSubmit" EventName="" />
    </Triggers>
   </asp:UpdatePanel> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:59:28.030

使用面板的[InnerHtml](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmlcontainercontrol.innerhtml.aspx)属性来分配你必须面板的 html`UpdatePanel`

```
StudentDetialsPanel.InnerHtml = strMarkup.ToString(); 
```

# android - 管理免费和付费 Android 应用的标准方法是什么？

> ID：15358080
> 
> 赞同：4
> 
> 时间：2013-03-12T09:58:13.303
> 
> 标签：android, google-play

目前我在 Google Play 上发布了一个付费应用程序，并且正在开发相同应用程序的免费版本。

问题是，如果用户安装了免费版，然后安装了付费版；用户最终会得到 2 个版本吗？如果是，这在用户体验方面是否常见？购买付费版本后卸载免费版本的标准（Android 市场）方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:05:26.957

您是否在以下位置查看过一些与应用内计费相关的最佳实践：

1.  [http://developer.android.com/google/play/billing/billing_best_practices.html](http://developer.android.com/google/play/billing/billing_best_practices.html)（搜索“计费”）
2.  [http://developer.android.com/google/play/billing/v2/billing_integrate.html](http://developer.android.com/google/play/billing/v2/billing_integrate.html)（搜索“最佳实践”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:01:13.647

只要包名称不同，您就可以上传免费、付费和更多您的应用程序。每个应用程序将被视为不同的应用程序。

您可以继续提供更新，就像您为付费应用提供的一样。

# ruby-on-rails - 测试回调中是否存在模型，如果确实更新，则创建

> ID：15358081
> 
> 赞同：0
> 
> 时间：2013-03-12T09:58:14.937
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.1

我有一个名为 Product 的模型。

`p = Product.new(...) and p.save`

我想完成以下内容：

如果有另一个产品具有相同的 id（不是 pk），那么我们更新产品，否则我们创建一个新产品。

我认为这可以在回调 before_save 中完成！？

我试过这样

```
before_save :try, on: :create

def try
   p = Product.where(id: self.id).first
   p and p.update_attributes(...) and return false
   *1
end 
```

*1，此时属性已更新，返回false表示未创建新模型，但我认为数据库已回滚，因为未保存更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:09:21.433

您可以使用[`find_or_create`](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Dynamic+attribute-based+finders)（或`find_or_initialize`仅初始化而不保存实例）。

另外：我不会创建一个名为的方法[`try`](http://api.rubyonrails.org/classes/Object.html#method-i-try)，因为它已经存在尝试一个如果不存在则返回 nil 的方法（而不是异常）。

例如：

```
Product.find_or_create(self.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:03:07.017

我会做一个[`upsert`](http://en.wiktionary.org/wiki/upsert).

尽管 ActiveRecord 中不存在此命令。[这](https://stackoverflow.com/questions/4695563/upsert-in-rails-activerecord)是一个让您实现这种行为的答案。

# java - 性能问题：“java.text.MessageFormat.format”与“StringBuilder”

> ID：15358090
> 
> 赞同：8
> 
> 时间：2013-03-12T09:58:41.223
> 
> 标签：java, performance-testing

我想知道比较`MessageFormat`或`StringBuilder`类。举个例子，我有一个字符串。对于性能方面，哪一个是快速的： `java.text.MessageFormat.format`或 `StringBuilder("Test ").append("Hello ")`？

```
String txt = java.text.MessageFormat.format("Test {0}"," Hello") 
String txt1=   new StringBuilder("Test ").append("Hello ") 
```

我只想知道在最佳实践或性能方面使用哪一个

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T10:09:33.623

自己试试：

```
long start = System.nanoTime();
String txt = MessageFormat.format("Test {0}"," Hello");
System.out.println("MessageFormat: " + (System.nanoTime() - start) + " ns");

start = System.nanoTime();
String txt1 = new StringBuilder("Test ").append("Hello").toString();
System.out.println("StringBuilder: " + (System.nanoTime() - start) + " ns"); 
```

*输出：*

> 消息格式：1125974 ns
> 
> 字符串生成器：16705 ns

**结论：**

`StringBuilder`工作得更快，因为它只是向现有数组添加了一些字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:02:36.030

`StringBuilder`仅将文本附加到动态缓冲区，而`MessageFormat`必须在附加数据之前解析给定格式，因此`StringBuilder`比`MessageFormat`.

# css - 如何为单个系列条形图添加 3 个图例？JAVAFX

> ID：15358093
> 
> 赞同：0
> 
> 时间：2013-03-12T09:58:45.053
> 
> 标签：css, javafx-2, bar-chart, legend, color-scheme

这是我生成 10 个不同颜色的条的代码。我想分别添加图例，但它只显示黄色图例我可以改变它的颜色，但我想要 3 个图例。

我认为它只显示一种颜色，因为只有 1 个系列。是否可以为单个系列添加超过 1 个图例？

输出：![在此处输入图像描述](../Images/0a8381322ab1e5d74aa5a6b6f3e05072.png)

或者如果我可以将此图像作为图例添加到图表的左中

![在此处输入图像描述](../Images/0fa75209c1653958439ae58622934afc.png)

我需要如何在条形图中显示图像或如何为单个系列条形图创建 3 个不同的标签

```
import javafx.application.Application;
import javafx.beans.value.*;
import javafx.scene.*;
import javafx.scene.chart.*;
import javafx.stage.Stage;

public class DynamicallyColoredBarChart extends Application {

    @Override
    public void start(Stage stage) {
        final CategoryAxis xAxis = new CategoryAxis();
        xAxis.setLabel("Bars");
        final NumberAxis yAxis = new NumberAxis();
        yAxis.setLabel("Value");

        final BarChart<String, Number> bc = new BarChart<>(xAxis, yAxis);
        bc.setLegendVisible(false);

        XYChart.Series series1 = new XYChart.Series();

        for (int i = 0; i < 10; i++) {
            // change color of bar if value of i is >5 than red if i>8 than blue
            final XYChart.Data<String, Number> data = new XYChart.Data("Value " + i, i);
            data.nodeProperty().addListener(new ChangeListener<Node>() {
                @Override
                public void changed(ObservableValue<? extends Node> ov, Node oldNode, Node newNode) {
                    if (newNode != null) {
                        if (data.getYValue().intValue() > 8) {
                            newNode.setStyle("-fx-bar-fill: navy;");
                        } else if (data.getYValue().intValue() > 5) {
                            newNode.setStyle("-fx-bar-fill: red;");
                        }
                    }
                }
            });
            series1.getData().add(data);
        }
        bc.getData().add(series1);
        stage.setScene(new Scene(bc));
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T00:24:25.640

要将图像放在左侧，您只需将图像和图表添加到 HBox：

```
 HBox root = new HBox(5);
 root.getChildren().addAll(image, bc);
 stage.setScene(new Scene(root)); 
```

# iphone - 使用新的 Facebook SDK 在 iPhone 中发布到 Facebook Friend's Wall

> ID：15358094
> 
> 赞同：1
> 
> 时间：2013-03-12T09:58:47.187
> 
> 标签：iphone, facebook, ios6

我想使用 . 将一些文本和照片发布到我朋友的一个墙上`FBDialog`。我有这样的方法

```
 - (void)apiDialogFeedFriend:(NSString *)friendID :(NSString *)mImageSTR{
    currentAPICall = kDialogFeedFriend;
    FBSBJSON *jsonWriter = [FBSBJSON new];

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               friendID, @"to",
                               @"I'm using the Hackbook for iOS app", @"name",
                               @"Hackbook for iOS.", @"caption",
                               @"Check out Hackbook for iOS to learn how you can make your iOS apps social using Facebook Platform.", @"description",
                               @"http://m.facebook.com/apps/hackbookios/", @"link",
                               @"http://www.facebookmobileweb.com/hackbook/img/facebook_icon_large.png", @"picture",
                               actionLinksStr, @"actions",
                               nil];

    AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [[delegate facebook] dialog:@"feed"
                      andParams:params
                    andDelegate:self];

} 
```

通过这些我得到回调`dialogCompleteWithUrl`方法`FBDialogDelegate`。我已经像这样实现了这个委托方法：

```
 - (void)dialogCompleteWithUrl:(NSURL *)url {
 if (![url query]) {
        return;
    }

    NSDictionary *params = [self parseURLParams:[url query]];
    switch (currentAPICall) {
        case kDialogFeedUser:
        case kDialogFeedFriend:
        {
            // Successful posts return a post_id
            if ([params valueForKey:@"post_id"]) {
                [self showMessage:@"Published feed successfully."];
                NSLog(@"Feed post ID: %@", [params valueForKey:@"post_id"]);
            }
            break;
        }
        case kDialogRequestsSendToMany:
        case kDialogRequestsSendToSelect:
        case kDialogRequestsSendToTarget:
        {
            // Successful requests return the id of the request
            // and ids of recipients.
            NSMutableArray *recipientIDs = [[NSMutableArray alloc] init];
            for (NSString *paramKey in params) {
                if ([paramKey hasPrefix:@"to["]) {
                    [recipientIDs addObject:[params objectForKey:paramKey]];
                }
            }
            if ([params objectForKey:@"request"]){
                NSLog(@"Request ID: %@", [params objectForKey:@"request"]);
            }
            if ([recipientIDs count] > 0) {
                [self showMessage:@"Sent request successfully."];
                NSLog(@"Recipient ID(s): %@", recipientIDs);
            }
            break;
        }
        default:
            break;
    }
} 
```

在这里，我得到正确的 url 值作为`fbconnect://success?post_id=100001402819851_418640698226650`.

现在，我的问题是在我的朋友墙上我的帖子看不到/可见。

任何帮助，将不胜感激。

# debugging - 如何从 URL 启用 Joomla 调试模式

> ID：15358095
> 
> 赞同：1
> 
> 时间：2013-03-12T09:58:54.353
> 
> 标签：debugging, joomla, joomla2.5, performance-testing

我经常需要来自实时站点的性能信息。由于我无法向最终用户显示调试信息，我需要一种方法来**启用 Joomla！带 URL 参数的调试模式**，即

```
http://example.com/?debug=1 
```

我只能通过`includes/framework.php`第 91 行（Joomla 2.5.9）的核心技巧来实现这一点：

```
define('JDEBUG', $config->debug  || JRequest::getVar('debug','0')=='1'); 
```

或者可以在以下位置播放`configuration.php`：

```
public $debug = JRequest::getVar('debug','0')=='1'; 
```

在 Mark Dexter 和 Louis Landry 在*[Using Plugins to Override Core Classes](http://www.informit.com/articles/article.aspx?p=1858258&seqNum=8)*的帖子之后，我刚刚测试了使用系统插件覆盖配置。但是根据 Ivan Rajkovic 的建议进行快速测试，

```
print_r(JLoader::getClassList()); 
```

表明配置已经加载，所以不能被覆盖。

您能否提出**一种更好的方法来实现这一目标而无需核心黑客攻击？**

Joomla 有没有解决方案！3?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T13:13:35.953

我认为，如果您启用了调试插件（在插件列表中）并将其访问级别设置为超级用户或您的等级，那么除了您之外，没有其他人可以看到调试信息。

**更新**

有[一个插件](http://archive.extensions.joomla.org/extensions/miscellaneous/offline/10859)（尽管适用于 Joomla！1.5）限制某些 IP 的调试输出，使您可以在不向所有人公开的情况下调试实时站点。不知道让它与 Joomla 一起工作有多容易！2.5

# ruby-on-rails - Rails 急切加载与选定属性的关联

> ID：15358099
> 
> 赞同：8
> 
> 时间：2013-03-12T09:59:05.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3, eager-loading

谁能告诉我是否可以急切加载关联但只返回特定属性？

我想用他们的帐户检索一些订单，但只需要帐户名称。

`Order.select([:id, :account_id]).includes(:account).limit(2)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T11:45:11.703

我认为 jvnill 的评论说明了一切：

> 我不确定这是可能的。但是，您可以将 account_name 添加到返回的订单记录中。

```
orders = Order.joins(:account).select('orders.id, orders.account_id, accounts.name AS account_name') 
```

> 然后只需使用 account_name 像 orders.first.account_name

# javascript - 如何从 JavaScript 字符串中去除无效的 XML 1.0 字符？

> ID：15358100
> 
> 赞同：1
> 
> 时间：2013-03-12T09:59:11.197
> 
> 标签：javascript, xml, validation

有谁知道任何地方的 JavaScript 函数，它接受一个字符串并返回它，去掉无效的 XML 1.0 字符？

我正在尝试从包含 utf-8 数据的数据库中提取的内容创建有效的 XML 1.0，但某些数据包含无效字符，因此我创建的 xml 不会验证。

用于访问数据和创建 xml 的语言是服务器端 JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T05:04:51.367

我找到了一种至少去除那些导致 XML 1.0 无效的字符的方法。它看起来很像一个杂物，我相信一定有更好的方法来做这件事，而且最后一行看起来有些重复。但它有效。

如果我有更多时间，或者有人有更好的答案，请告诉我。谢谢。

```
str = str.replace(/\u00B7/g,'');
str = str.replace(/\u00C2/g,'');
str = str.replace(/\u00A0/g,'');
str = str.replace(/\u00A2/g,'');
str = str.replace(/\u00A3/g,'');
str = str.replace(/[^\u000D\u00B7\u0020-\u007E\u00A2-\u00A4]/g,''); 
```

# android - 合并 v4 库后静态变量变为空

> ID：15358101
> 
> 赞同：3
> 
> 时间：2013-03-12T09:59:12.457
> 
> 标签：android, performance

我最近将[v4 支持库](http://developer.android.com/tools/extras/support-library.html)合并到我的 Android 应用程序中，以启用跨标签滑动。我观察到静态对象变为空的应用程序中的随机崩溃。

我浏览了以下帖子，这些帖子告诉我内存管理的故事，其中 Android 会终止进程以获取内存，重新启动进程并重新启动最新活动。

我也明白这就是为什么静态变量不是存储应用程序数据的好地方的原因。我正在研究偏好和数据库作为替代方案。但鉴于数据的复杂性，这将需要一些时间。

编辑：我没有将数据存储在活动中，而是使用具有静态属性的类来保留应用程序级别的一组配置。

我的问题是，为什么我在集成 v4 支持库后会遇到这个问题？有没有人遇到过 support v4 lib 的类似问题？这与我的问题或我的模糊假设有什么关系吗？

[android应用程序中的系统可以将静态变量值设为空吗？](https://stackoverflow.com/questions/11884387/can-static-variable-value-be-nulled-by-system-in-android-app)

[Android 静态对象生命周期](https://stackoverflow.com/questions/1944369/android-static-object-lifecycle-application-act-crazy)

[返回应用时的静态变量null](https://stackoverflow.com/questions/9541688/static-variable-null-when-returning-to-the-app)

* * *

这是我的应用程序崩溃时的日志。我在 ApplicationConfiguration: getListOrder() 方法中观察到 NPE，它引用了其中一个静态变量。日志中是否有任何迹象表明系统已终止该进程并重新启动它？或者他们表示不同的东西？

> !@Sync 406D/HierarchicalStateMachine(287):handleMessage:E msg.what=83D/HierarchicalStateMachine(287):processMsg:ConnectedStateD/WifiStateMachine(287):ConnectedState{what=83 when=-4ms arg1=5}D/HierarchicalStateMachine( 287）：handleMessage：XW/PowerManagerService（287）：定时器 0x3->0x3|0x0D/dalvikvm（2775）：GC_EXPLICIT 释放 61K，5% 空闲 6209K/6531K，暂停 6ms+2msI/fSharp：BackgroundServiceHandler（4637）：收到消息: 3I/fSharp:BackgroundServiceHandler(4637): 列表消息处理程序存在，正在发送消息I/fSharp:BackgroundThread(4637): 已完成处理出站队列I/fSharp:BackgroundThread(4637): 在循环中...D/AndroidRuntime(4637):关闭 VMW/dalvikvm(4637): threadid=1: 线程退出未捕获异常 (group=0x401b7760)E/AndroidRuntime(4637): 致命异常:mainE/AndroidRuntime（4637）：java.lang.NullPointerExceptionE/AndroidRuntime（4637）：在 com.tfs.fsharpsupport.common.configuration.ApplicationConfiguration.getListOrder（ApplicationConfiguration.java:125）E/AndroidRuntime（4637）：在 com.tfs .fsharp.model.ListModel.refreshList(ListModel.java:576)E/AndroidRuntime(4637): 在 com.tfs.fsharp.model.ListModel.onListChanged(ListModel.java:332)E/AndroidRuntime(4637): 在 com .tfs.fsharp.model.ListModel.handleListMessage(ListModel.java:285)E/AndroidRuntime(4637): 在 com.tfs.fsharpsupport.background.BackgroundServiceHandler.handleMessage(BackgroundServiceHandler.java:104)E/AndroidRuntime(4637):在 android.os.Handler.dispatchMessage(Handler.java:99)E/AndroidRuntime(4637): 在 android.os.Looper.loop(Looper.java:132)E/AndroidRuntime(4637): 在 android.app。ActivityThread.main(ActivityThread.java:4028)E/AndroidRuntime(4637)：在 java.lang.reflect.Method.invokeNative(Native Method)E/AndroidRuntime(4637)：在 java.lang.reflect.Method.invoke(方法.java:491)E/AndroidRuntime(4637)：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)E/AndroidRuntime(4637)：在 com.android.internal.os.ZygoteInit .main(ZygoteInit.java:602)E/AndroidRuntime(4637): 在 dalvik.system.NativeStart.main(Native Method)W/ActivityManager(287): 强制完成活动 com.tfs.fsharp.ui.activity/.StartupActivityE /android.os.Debug（287）：Dumpstate > /data/log/dumpstate_app_errorI/dumpstate（5407）：beginD/HierarchicalStateMachine（287）invokeNative（本机方法）E/AndroidRuntime（4637）：在 java.lang.reflect.Method.invoke（Method.java:491）E/AndroidRuntime（4637）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:844)E/AndroidRuntime(4637): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)E/AndroidRuntime(4637): 在 dalvik.system.NativeStart.main(Native方法）W/ActivityManager（287）：强制完成活动 com.tfs.fsharp.ui.activity/.StartupActivityE/android.os.Debug（287）：Dumpstate > /data/log/dumpstate_app_errorI/dumpstate（5407）：beginD/分层状态机（287）invokeNative（本机方法）E/AndroidRuntime（4637）：在 java.lang.reflect.Method.invoke（Method.java:491）E/AndroidRuntime（4637）：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run (ZygoteInit.java:844)E/AndroidRuntime(4637): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)E/AndroidRuntime(4637): 在 dalvik.system.NativeStart.main(Native方法）W/ActivityManager（287）：强制完成活动 com.tfs.fsharp.ui.activity/.StartupActivityE/android.os.Debug（287）：Dumpstate > /data/log/dumpstate_app_errorI/dumpstate（5407）：beginD/分层状态机（287）在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)E/AndroidRuntime(4637): 在 dalvik.system.NativeStart.main(Native Method)W/ActivityManager(287): 强制完成活动 com。 tfs.fsharp.ui.activity/.StartupActivityE/android.os.Debug（287）：Dumpstate > /data/log/dumpstate_app_errorI/dumpstate（5407）：beginD/HierarchicalStateMachine（287）在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)E/AndroidRuntime(4637): 在 dalvik.system.NativeStart.main(Native Method)W/ActivityManager(287): 强制完成活动 com。 tfs.fsharp.ui.activity/.StartupActivityE/android.os.Debug（287）：Dumpstate > /data/log/dumpstate_app_errorI/dumpstate（5407）：beginD/HierarchicalStateMachine（287）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:09:31.357

显然，当您通过标签交换时，您的活动正在幕后被杀死。希望你知道[Activity 的生命周期](http://developer.android.com/training/basics/activity-lifecycle/index.html)。

至于您的信息，在活动内部使用静态变量 delcares 不是一个好习惯。你会经常遇到`Null pointer exceptions`。如果您坚持使用静态变量而不是共享偏好或内容提供者，那么我认为您应该遵循以下方法。

我曾经遇到过同样的问题，我声明了一个单独的类并将其用于静态变量。通过对 Manifest 文件添加几行和更改，您可以将它们设为全局并在应用程序范围内使用它。

[查看本教程，了解如何执行此操作](http://androidresearch.wordpress.com/2012/03/22/defining-global-variables-in-android/)。

# c# - c# 过滤一个 double[] 值的列表

> ID：15358105
> 
> 赞同：2
> 
> 时间：2013-03-12T09:59:29.993
> 
> 标签：c#, linq, list, filter

问题描述：

我有一个表示向量的 double[] 值列表，其中第 0 个向量元素对应于向量的物理长度，其他三个（1 到 3）对应于 x、y 和 z 分量。该列表包含大约 1000000 个条目。所以perfermence将是一个问题。我根据向量的长度对列表进行了排序。现在我需要过滤列表，以便保留不同长度的向量，如果长度相同，则过滤位置 1 到 3 上包含不同条目（不是排列）的向量，如示例所示。如果您需要更多信息，请告诉我。在过滤过程中不应更改向量。

问题：如何使用 C# 以及如果可能的 linq 来实现这一点？

例子：

```
 0,    0,     0;      0,0000   ->   select 
 0,    1,    -1;      8,2883   ->   select
 1,    0,    -1;      8,2883   ->   not select
 0,   -1,     1;      8,2883   ->   not select
-1,    0,     1;      8,2883   ->   not select
 1,   -1,     0;      8,2883   ->   not select
-1,    1,     0;      8,2883   ->   not select
 1,    1,    -2;     14,3558   ->   select
...
 2,     2,    -5;    38,6145   ->   select
-2,    -2,     5;    38,6145   ->   not select
 1,     4,    -4;    38,6145   ->   select
 4,     1,    -4;    38,6145   ->   not select
-1,    -4,     4;    38,6145   ->   not select
-4,    -1,     4;    38,6145   ->   not select
-1,     4,    -4;    38,6145   ->   not select
 4,    -1,    -4;    38,6145   ->   not select
-4,     1,     4;    38,6145   ->   not select
 1,    -4,     4;    38,6145   ->   not select
-2,     5,    -2;    38,6145   ->   not select
 5,    -2,    -2;    38,6145   ->   not select
 2,    -5,     2;    38,6145   ->   not select
-5,     2,     2;    38,6145   ->   not select
 4,    -4,    -1;    38,6145   ->   not select
-4,     4,    -1;    38,6145   ->   not select
-4,     4,     1;    38,6145   ->   not select
 4,    -4,     1;    38,6145   ->   not select
... 
```

代码：

```
private static double absm = 0;
private static int[] m = new int[3];
private static int[] m2 = new int[3];
private static List<double[]> ihkl1 = new List<double[]>();
private static List<double[]> ihkl2 = new List<double[]>();

...

private static void init_latt()
{
    for (int i = -kmax[2]; i < kmax[2]; i++ )
    {
        m[2] = i;
        for (int j = -kmax[1]; j < kmax[1]; j++)
        {
            m[1] = j;
            for (int k = -kmax[0]; k < kmax[0]; k++)
            {                        
                m[0] = k;
                absm = calcabsm(metten, m);                                             
                if (absm < gmax)
                {
                    double[] row1 = new double[4];
                    row1[0] = absm;
                    row1[1] = (double)m[0];
                    row1[2] = (double)m[1];
                    row1[3] = (double)m[2];
                    ihkl1.Add(row1);
                }
            }
        }
    }    
    ihkl2 = ihkl1.AsParallel().OrderBy(x => x[0]).ToList();
}
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:55:55.600

首先，我同意[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)`Vector`关于使用封装这些`double`数组的类的建议。之后，您可以执行以下操作：

```
public class VectorEqualityComparer : IEqualityComparer<Vector>
{
    public bool Equals(Vector x, Vector y)
    {
        //here you implement the equality among vectors you defined in your question
    }

    public int GetHashCode(Vector obj)
    {
        //you can return something like obj.InnerArray.GetHashCode()
    }
} 
```

现在，如果您有 的列表`Vector`，即`yourList`，您可以调用：

```
var result = yourList.Distinct(new VectorEqualityComparer()); 
```

希望这可以帮助你实现你想要的。祝你好运！！！

# asp.net-mvc - MVC：是否有可能（并且我应该）使控制器可重用于不同的视图？

> ID：15358109
> 
> 赞同：1
> 
> 时间：2013-03-12T09:59:55.443
> 
> 标签：asp.net-mvc

我有一个包含 2 个网格的视图（view1），每个网格都有自己的集合（col1，col2）。view1 实现了包含以下方法的 IView1 接口：

```
LoadCol1(IEnumerable<SomeType> Col1)
LoadCol2(IEnumerable<SomeType> Col2) 
```

还有一个控制器，通过IView1接口与view1交互，随时`LoadCol1`调用`LoadCol2`。

到目前为止一切顺利，一切正常，我相信这是一个按书本的 MVC 实现（如果我错了，请纠正我）。但是如果明天我会有另一个只包含 col1 网格的视图（view2）呢？view2 无法实现 IView1 接口，因为它需要实现 LoadCol2。

我可以想到几种解决方案，但我要求的是最佳实践。

编辑：我实际上要问的是我可以（并且应该）使控制器可重复用于不同的视图。

# c# - WPF 过滤列表框

> ID：15358113
> 
> 赞同：16
> 
> 时间：2013-03-12T10:00:10.327
> 
> 标签：c#, wpf, list, xaml, listbox

我有一个`ListBox`与字符串列表的绑定。我想在输入文本时过滤列表`TextBox`。我该怎么做？

```
public void ListLoad()
{
    ElementList = new List<string>(); // creation a list of strings
    ElementList.Add("1"); // add a item of string
    ElementList.Add("2"); // add a item of string

    DataContext = this; // set the data context
} 
```

我将它绑定在 XAML 中：

```
ItemsSource="{Binding ElementList}" 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-12T10:09:42.377

CollectionViewSource 类可以在这里提供帮助。据我所知，它具有许多过滤、排序和分组集合的功能。

```
ICollectionView view = CollectionViewSource.GetDefaultView(ElementList);
view.Filter = (o) => {return o;}//here is the lambda with your conditions to filter 
```

当您不需要任何过滤器时，只需设置`view.Filter`为`null`. 另请查看有关[过滤的文章](http://uicraftsman.com/blog/2010/10/27/filtering-data-using-collectionviewsource/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-09-11T17:21:11.610

这是用于绑定过滤器的附加属性：

```
using System;
using System.Windows;
using System.Windows.Controls;

public static class Filter
{
    public static readonly DependencyProperty ByProperty = DependencyProperty.RegisterAttached(
        "By",
        typeof(Predicate<object>),
        typeof(Filter),
        new PropertyMetadata(default(Predicate<object>), OnByChanged));

    public static void SetBy(ItemsControl element, Predicate<object> value)
    {
        element.SetValue(ByProperty, value);
    }

    public static Predicate<object> GetBy(ItemsControl element)
    {
        return (Predicate<object>)element.GetValue(ByProperty);
    }

    private static void OnByChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (d is ItemsControl itemsControl &&
            itemsControl.Items.CanFilter)
        {
            itemsControl.Items.Filter = (Predicate<object>)e.NewValue;
        }
    }
} 
```

在 xaml 中这样使用：

```
<DataGrid local:Filter.By="{Binding Filter}"
          ItemsSource="{Binding Foos}">
    ... 
```

和视图模型：

```
public class ViewModel : INotifyPropertyChanged
{
    private string filterText;
    private Predicate<object> filter;

    public event PropertyChangedEventHandler PropertyChanged;

    public ObservableCollection<Foo> Foos { get; } = new ObservableCollection<Foo>();

    public string FilterText
    {
        get { return this.filterText; }
        set
        {
            if (value == this.filterText) return;
            this.filterText = value;
            this.OnPropertyChanged();
            this.Filter = string.IsNullOrEmpty(this.filterText) ? (Predicate<object>)null : this.IsMatch;
        }
    }

    public Predicate<object> Filter
    {
        get { return this.filter; }
        private set
        {
            this.filter = value;
            this.OnPropertyChanged();
        }
    }

    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        this.PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
    }

    private bool IsMatch(object item)
    {
        return IsMatch((Foo)item, this.filterText);
    }

    private static bool IsMatch(Foo item, string filterText)
    {
        if (string.IsNullOrEmpty(filterText))
        {
            return true;
        }

        var name = item.Name;
        if (string.IsNullOrEmpty(name))
        {
            return false;
        }

        if (filterText.Length == 1)
        {
            return name.StartsWith(filterText, StringComparison.OrdinalIgnoreCase);
        }

        return name.IndexOf(filterText, 0, StringComparison.OrdinalIgnoreCase) >= 0;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-14T07:20:42.297

如果您将 Dictionary 设置为 itemsource 到列表框，请使用以下代码进行排序，

```
 private void tb_filter_textChanged(object sender, TextChangedEventArgs e)
    {
        Dictionary<string, string> dictObject = new Dictionary<string, string>();
        ICollectionView view = CollectionViewSource.GetDefaultView(dictObject);
        view.Filter = CustomerFilter;
        listboxname.ItemsSource = view;
    }

    private bool CustomerFilter(object item)
    {
        KeyValuePair<string, string> Items = (KeyValuePair<string,string>) item;
        return Items.Value.ToString().Contains("a");
    } 
```

上面的代码返回包含“a”的项目。

# c++ - 从变量中删除 const-ness

> ID：15358114
> 
> 赞同：9
> 
> 时间：2013-03-12T10:00:10.550
> 
> 标签：c++, casting, constants, const-cast

我正在尝试从变量（char *）中删除 const-ness，但由于某种原因，当我尝试更改值时，const 变量的原始值仍然保持不变。

```
 const char* str1 = "david";
 char* str2 = const_cast<char *> (str1);
 str2 = "tna"; 
```

现在 str2 的值发生了变化，但 str1 的原始值保持不变，我在 Google 上查找过但找不到明确的答案。

使用 const_cast 并更改值时， const 变量的原始值是否也应更改？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T10:03:01.297

的类型`str1`是`const char*`。它是`char`that is `const`，而不是指针。也就是说，它是一个指向`const char`. 这意味着你不能这样做：

```
str1[0] = 't'; 
```

这将改变其中一个`const` `char`s 的值。

现在，您所做`str2 = "tna";`的是更改指针的值。没关系。您只是更改`str2`为指向不同的字符串文字。现在`str1`和`str2`指向不同的字符串。

使用非`const`指针`str2`，您*可以*这样做`str2[0] = 't';`-但是，您将有未定义的行为。您不能修改最初声明的内容`const`。特别是，字符串文字存储在只读内存中，试图修改它们会给你带来可怕的不幸。

如果你想获取一个字符串文字并安全地修改它，用它初始化一个*数组*：

```
char str1[] = "david"; 
```

这会将字符串文字中的字符复制到`char`数组中。然后，您可以根据自己的喜好修改它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:02:46.887

`str2`只是一个指针。你的代码只是改变了指针的值，地址，而不是它指向的字符串。

更重要的是，您尝试做的事情会导致*未定义的行为*，并且很可能会导致运行时错误。所有现代编译器都会将您的字符串存储`"david"`在只读内存中。尝试修改该内存将导致内存保护错误。

# crystal-reports - 在水晶报表中为字符串添加掩码

> ID：15358115
> 
> 赞同：1
> 
> 时间：2013-03-12T10:00:11.793
> 
> 标签：crystal-reports

我的项目中有一个水晶报告，将显示信用卡号等机密信息。目前信用卡号没有屏蔽。我想掩盖信用卡号，例如' **XXXX XXXX 1234 5678** '。我如何在水晶报告中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:17:21.920

如果已知您所有的信用卡号码都是 16 位数字（大多数，但并非所有卡都是 16 位数字）并且是数字，您可以这样做

```
local numbervar cardno := totext({table.cardno},0,''); //cardno to string
"XXXX XXXX " + cardno[9 to 12] + " " + cardno[13 to 16] 
```

如果卡号已经是字符串，则省略第一行。您可能还想屏蔽除最后 4 位以外的所有数字，因为第 8 到第 15 位代表整个帐号（请参阅：[您的信用卡号是什么意思](http://computersolving.com/computer-tips-tricks/what-your-credit-card-numbers-mean/)）

# r - 段错误 R 包检查

> ID：15358117
> 
> 赞同：0
> 
> 时间：2013-03-12T10:00:13.740
> 
> 标签：r, segmentation-fault, package

我正在更新一个包[qdap](http://cran.r-project.org/web/packages/qdap/index.html)，该包[在其先前的构建中对 CRAN 有一个注释](http://cran.r-project.org/web/checks/check_results_qdap.html)，该问题已解决。

在[qdap 开发版本](https://github.com/trinker/qdap)中，在 R 2.15.3 下，使用`--as-cran`and `--resave-data=best`，我得到以下注释：

```
* checking R code for possible problems ... NOTE
Segmentation fault 
```

为什么会发生这种段错误（我对 Linux 有点陌生）？我怎样才能找到它？我用谷歌搜索了一段时间，但我无法弄清楚问题是什么。我收集到我的代码中存在某种问题，但是......

在 Windows 上，我没有收到任何注释。

如果需要，我可以提供更多信息（尽管 GitHub 存储库可用）。

**会话信息：**

```
R version 2.15.3 (2013-03-01)
Platform: i686-pc-linux-gnu (32-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8       
 [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8   
 [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
[10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] pacman_0.2.0 XML_3.9-4   

loaded via a namespace (and not attached):
[1] tools_2.15.3 
```

# c# - Visual Basic 等效于“矩形 a=new a() { width=1; height=2; }”

> ID：15358118
> 
> 赞同：1
> 
> 时间：2013-03-12T10:00:15.797
> 
> 标签：c#, vb.net, initialization, object-initializers

```
rectangle a=new a() { width=1; height=2; } 
```

我曾经构造过这样的对象，在 Visual Basic 中有类似的方法吗？对不起，我无法真正标记这项技术。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T10:03:16.533

[VB.NET 中的对象初始化器](http://msdn.microsoft.com/en-us/library/bb385125.aspx)：

```
Dim a = New Rectangle With { .width = 1, .height = 2 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T10:07:28.167

有`Rectangle`一个[构造函数](http://msdn.microsoft.com/en-us/library/9wcdy991.aspx)来定义宽度和高度：

```
Dim r As New Rectangle(1, 1, 200, 300) 'x,y,width,height 
```

# hibernate - 共享数据库中的并发控制

> ID：15358121
> 
> 赞同：1
> 
> 时间：2013-03-12T10:00:20.243
> 
> 标签：hibernate, jdbc, orm, locking, database-concurrency

假设我有一个由多个应用程序共享的数据库。一个应用程序使用基于 ORM 的方法（比如休眠）进行持久性，另一个应用程序使用 sql 进行持久性。两者都对数据库进行写操作。

如果我们选择乐观锁定选项，我们如何确保并发控制？如果使用 SQL 插入数据，Hibernate 会自动同步持久化对象吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:00:38.773

*   使用 SQL 的应用程序可以手动进行乐观锁定。我将在下面解释。

*   使用 Hibernate 的应用程序不会知道其他应用程序新插入的对象，但它会在加载更新陈旧数据并与其他应用程序冲突时抛出异常。HIbernate 使用这种方式（乐观锁定）来保护更新过时的数据，这些数据是由其他用户较早加载和更新的。

*   我们可以使用 verion 属性手动使用乐观锁定：

    update table1 set name='new name', version=version+1 where version=versionLoadedBeforeUpating and id=1234;

# java - Java 多线程在 Windows 中有效，但在 Ubuntu 中无效

> ID：15358124
> 
> 赞同：4
> 
> 时间：2013-03-12T10:00:28.943
> 
> 标签：java, windows, multithreading, unix

我用“Smack API”（XMPP）和“JAIN SIP”API（SIP）创建了一个 SIP-XMPP 网关。在我的应用程序中，我有三个线程：一个用于发送和接收 SIP，一个用于发送和接收 XMPP，一个“MessageQueue”用于存储传入消息并将它们重定向到相反的协议线程（传入 SIP -> 传出 XMPP，传入 XMPP - > 传出 SIP)

![在此处输入图像描述](../Images/b9fdffee9865adab1ab7e495483ac5de.png)

我目前正在我的 Windows 计算机上的 Eclipse 中运行网关，它完全可以工作。但是，如果我将 Eclipse 项目导出到 .jar 文件并在我的 Ubuntu 服务器上运行它，传入的消息将存储在消息队列中，但它们不会被重定向。

![在此处输入图像描述](../Images/3b22b288c19c3f5562d05ba65d3aa8ed.png)

我在两个操作系统上运行具有相同 JDK 版本“1.6.0_14”的应用程序。我读过 Java 中的线程在 Windows 和 UNIX 系统中的运行略有不同。我做错了什么还是线程在它运行的操作系统上运行不同的挂起？

```
MessageQueue queue = new MessageQueue();

XMPPMessageListener xmppThread = new XMPPMessageListener();
SIPThread sipThread = new SIPThread();

new Thread(queue).start();

sipThread.setQueue(queue);
xmppThread.setQueue(queue);

queue.setXMPPThread(xmppThread);
queue.setSipThread(sipThread);

new Thread(xmppThread).start();
new Thread(sipThread).start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:10:43.660

在这两个操作系统上，没有数据争用的无死锁程序应该正确运行。但是，操作系统非常不同，潜在的数据竞争或死锁可能会在一个操作系统上以比在另一个操作系统上更高的概率实现。

您的 prgram 正确且 Windows JVM 正确的可能性很小，但 UNIX JVM 存在错误。

但是，您最好确保您的程序确实是正确的。根据您所说，最好的猜测是它挂在 MessageQueue 线程或 sipThread 中。线程转储会告诉您更多信息。

# powershell - 查找范围内的空闲号码

> ID：15358126
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:00:32.100
> 
> 标签：powershell

我有一个数字范围（例如，20-100）。假设以下被占用：20、21、22、24、25、26、28。

我问用户他想要多少免费号码。可以说，他说三个数字。所以我的输出应该是 23、27、29。

如何使用 powershell 快速做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T10:12:22.707

```
$range = 20..100
$occupied = 20,21,22,24,25,26,28
$range | where-object {$occupied -notcontains $_} | `
select-object -first (read-host -Prompt "How many free numbers do you need?") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:00:59.250

您还可以使用`Compare-Object`cmdlet：

```
compare $range $occupied -PassThru

23
27
29
30
31
...
100 
```

# java - 如何调用另一个类的arraylist方法？

> ID：15358132
> 
> 赞同：-4
> 
> 时间：2013-03-12T10:00:57.060
> 
> 标签：java, sql, database, methods, arraylist

我有以下代码在一个类中`customerModel`。如何从另一个名为 的类中调用此方法`customerController`？

```
public ArrayList<Customer> search(Customer cust) {
    ArrayList<Customer> custs = new ArrayList<Customer>();
    Connection connection = GaritsConnectivity.connect();
    Tuple<ResultSet, Statement> trs = GaritsConnectivity.read("SELECT * FROM Customer     WHERE CustomerID=1", connection);
    ResultSet rs = trs.getFirst();
    try {
        //takes a customer, returns it with the correct ID set
        while (rs.next()) {
            custs.add(createFromRs(rs));
        }
    } catch (SQLException ex) {
        GaritsConnectivity.manageException("Customer search failure", ex);
    }
    GaritsConnectivity.doneReading(connection, trs);
    return custs;
} 
```

在`customerController`类中，我想创建另一个方法，我可以从中调用搜索方法`CustomerModel`。

```
public class customerController....

public boolean search(){
//what goes in here im lost? how can i connect the above search from customerModel to      customerController?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:04:48.293

在同一个包中创建另一个类，声明该类的一个实例

```
customerModel cM = new customerModel();
cM.search(Customer cust); 
```

这可能不是您之后的内容，而且几乎没有原则上回答这是一个糟糕的问题，但这仍然可以帮助您

仅供参考的语法在这里并不完美，例如。你的方法返回一些东西，所以你可能想让方法调用一个列表的声明或类似下面的答案（或者可能在上面谁知道）我的意思是我不想为这个问题提供一个完整的示例答案，只是一些有帮助的东西一点点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:04:59.373

在你`CustomerController`这样做： -

```
CustomerModel model = new CustomerModel();
List<Customer> myList = model.search(customer); 
```

# c# - ASP.NET MVC 3 删除 Http Post

> ID：15358134
> 
> 赞同：2
> 
> 时间：2013-03-12T10:00:59.463
> 
> 标签：c#, asp.net-mvc-3, razor

我一直在网上寻找如何做一个删除 HttpPost 错过了 get，我读到做一个帖子而不是一个 Get 更安全，所以这就是我想要做的。

```
 [HttpPost]
    public ActionResult Delete(Guid id)
    {

        var member = GetSelectedMember(id);

        _repository.DeleteEntity(member);

        TempData["message"] = String.Format("Blog {0} has been deleted!", member.Name);

        return RedirectToAction("Index");
    } 
```

那是我的发布方法。

```
@using (Html.BeginForm("Delete", "Member", FormMethod.Post, new { id = item.ID }))
{
    <input type="image" src="Content/delete.png" />
} 
```

这是我的剃刀观点。

以下是我得到的错误

> 参数字典包含“GenericSaving.Controllers.MemberController”中方法“System.Web.Mvc.ActionResult Delete(System.Guid)”的不可空类型“System.Guid”的参数“id”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

因此，我无法中断该方法，因为它在此之前 ping 错误，我的第一个猜测是它没有将 Guid ID 传递给参数。那么根据我的表格出了什么问题？

我认为也许作为一种解决方案，我可以将它放在表单上的隐藏字段中？如何在 post 方法中收集该字段的内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T10:02:48.610

您为 beginForm 使用了错误的重载方法。检查[这里](http://msdn.microsoft.com/en-us/library/dd492933%28v=vs.108%29.aspx)正确使用。像这样使用：

```
Html.BeginForm("action","controller", new { Id = item.ID}, FormMethod.Post); 
```

或者

```
@using (Html.BeginForm("Delete", "Member", FormMethod.Post))
{
    @Html.Hidden("id", item.ID)
    <input type="image" src="Content/delete.png" />
} 
```

# git - 我如何使用 ohmyzsh 编写 git commit -am“这是我的提交消息”？

> ID：15358137
> 
> 赞同：0
> 
> 时间：2013-03-12T10:01:04.137
> 
> 标签：git

只是想知道我是如何使用 ohmyzsh 编写的？我知道大多数 git 命令的快捷方式，只是不确定这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:04:35.650

```
gca -m "this is my commit message" 
```

根据[https://github.com/robbyrussell/oh-my-zsh/blob/master/plugins/git/git.plugin.zsh](https://github.com/robbyrussell/oh-my-zsh/blob/master/plugins/git/git.plugin.zsh)

# ruby-on-rails - 用于下载 youtube 视频的 rails 应用程序

> ID：15358155
> 
> 赞同：3
> 
> 时间：2013-03-12T10:02:07.620
> 
> 标签：ruby-on-rails

如何创建一个具有从 youtube 下载视频的代码的 Rails 应用程序？

是否有任何可以使用的 API 或 Rails 中可用的任何 gem。

谢谢，格索尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:04:09.410

您可以尝试[Youtube-dl](http://rg3.github.com/youtube-dl/)并从 Rails 调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-08T14:51:45.353

创建用于存储 url 和结果的脚手架：

```
link:string
data:text 
```

您需要在“数据”中存储哈希，因此在您的模型中：

```
 serialize :data, Hash 
```

为这个库安装包装器

```
gem 'youtube-dl.rb' 
```

从表单中保存链接后在控制器中

```
 @hash = YoutubeDL.get "#{@link.link}", {skip_download: true}
  @link.data = @hash.information
  @link.save! 
```

之后，您可以从数据哈希中获取一些密钥。例如：

```
@link.data[:title] 
```

# c# - C#/TCP Sockets/阻塞读取/如何关闭这些线程

> ID：15358157
> 
> 赞同：3
> 
> 时间：2013-03-12T10:02:14.620
> 
> 标签：c#, multithreading, tcpclient

最近我不得不构建一个小型 TCP 客户端应用程序，它连接到外部应用程序的 TCP 侦听器，旨在处理大量数据量和高频率。

我围绕 TCPClient 类创建了一个包装类，只是为了捕获异常，并保持对一些感兴趣的属性（网络流等）的引用。这是包装：

```
public class MyTCPClient
    {

        private string serverIP;
        private int serverPort;

        public TcpClient tcpClient = new TcpClient();
        private IPEndPoint serverEndPoint;
        private NetworkStream stream = null;

        public string name;

        public MyTCPClient(string serverIp, int serverPort, string parentName)
        {
            this.serverIP = serverIp;
            this.serverPort = serverPort;
            this.name = parentName + "_TCPClient";

            serverEndPoint = new IPEndPoint(IPAddress.Parse(serverIP), serverPort);

            tcpClient.ReceiveBufferSize = 1048576;

            this.TryConnect();
        }

        private bool TryConnect()
        {
            try
            {
                tcpClient.Connect(serverEndPoint);
            }
            catch (SocketException e1)
            {
                throw new ErrorOnConnectingException(e1, "SocketException while connecting. (see msdn Remarks section for more details. ) Error code: " + e1.ErrorCode);
            }
            catch (ArgumentNullException e2)
            {
                throw new ErrorOnConnectingException(e2, "ArgumentNullException while connecting. (The hostname parameter is null.) Message: " + e2.Message);
            }
            catch (ArgumentOutOfRangeException e3)
            {
                throw new ErrorOnConnectingException(e3, "ArgumentOutOfRangeException while connecting (The port parameter is not between MinPort and MaxPort. ). Message: " + e3.Message);
            }
            catch (ObjectDisposedException e4)
            {
                throw new ErrorOnConnectingException(e4, "ObjectDisposedException while connecting. (TcpClient is closed. ) Message: " + e4.Message);
            }

            try
            {
                stream = this.tcpClient.GetStream();
            }
            catch (ObjectDisposedException e1)
            {
                throw new ErrorOnGettingStreamException(e1, "ObjectDisposedException while acquiring Network stream. (The TcpClient has been closed. ) Message: " + e1.Message);
            }
            catch (InvalidOperationException e2)
            {
                throw new ErrorOnGettingStreamException(e2, "ArgumentOutOfRangeException while acquiring Network stream (The TcpClient is not connected to a remote host.  ). Message: " + e2.Message);
            }

            return true;
        }

        public string ReadData()
        {
            try
            {
                ASCIIEncoding encoder = new ASCIIEncoding();

                byte[] dataHeader = new byte[12];
                if (this.tcpClient.Connected)
                {
                    stream.Read(dataHeader, 0, 12);
                }
                else
                {
                    throw new ErrorOnReadingException(null, "The underlying TCP tcpClient is not connected any more");
                }

                var strHeaderMessage = System.Text.Encoding.Default.GetString(dataHeader);

                Utils.logToTimeStampedFile(strHeaderMessage, name);

                int bodyAndTailCount = Convert.ToInt32(strHeaderMessage.Replace("#", ""));
                byte[] dataBodyAndTail = new byte[bodyAndTailCount];

                if (this.tcpClient.Connected)
                {
                    stream.Read(dataBodyAndTail, 0, bodyAndTailCount);
                }
                else
                {
                    throw new ErrorOnReadingException(null, "The underlying TCP tcpClient is not connected any more");
                }

                var strBodyAndTailMessage = System.Text.Encoding.Default.GetString(dataBodyAndTail);

                Utils.logToTimeStampedFile(strBodyAndTailMessage, name);

                return strBodyAndTailMessage;

            }
            catch (FormatException e0)
            {
                CloseAllLeft();
                throw new ErrorOnReadingException(e0, "FormatException while reading data. (Bytes red are null or does not correspond to specification, happens on closing Server) Message: " + e0.Message);
            }
            catch (ArgumentNullException e1)
            {
                CloseAllLeft();
                throw new ErrorOnReadingException(e1, "ArgumentNullException while reading data. (The buffer parameter is null.) Message: " + e1.Message);
            }
            catch (ArgumentOutOfRangeException e2)
            {
                CloseAllLeft();
                throw new ErrorOnReadingException(e2, "ArgumentOutOfRangeException while reading data. (see msdn description) Message: " + e2.Message);
            }
            catch (IOException e3)
            {
                CloseAllLeft();
                throw new ErrorOnReadingException(e3, "IOException while reading data. (The underlying Socket is closed.) Message: " + e3.Message);
            }
            catch (ObjectDisposedException e4)
            {
                CloseAllLeft();
                throw new ErrorOnReadingException(e4, "ArgumentOutOfRangeException while reading data. (see msdn description) Message: " + e4.Message);
            }
        }

        public void CloseAllLeft()
        {
            try
            {
                stream.Close();
            }
            catch (Exception e)
            {
                Console.WriteLine("Exception closing tcp network stream: " + e.Message);
            }
            try
            {
                tcpClient.Close();
            }
            catch (Exception e)
            {
                Console.WriteLine("Exception closing tcpClient: " + e.Message);
            }
        }
    } 
```

尽管如此，没有提到使用这个 MyTCPClient 的线程。该应用程序应该有两个这样的 TCP 客户端，在不同的端口上连接，并执行不同的工作。我是 TCP 编程的新手，在对属性进行了一些游荡之后，我决定使用阻塞读取方法——即默认情况下 TCPClient.Read() 方法将阻塞线程，直到有新数据。我需要这种方法，因为我无法控制外部应用程序的侦听器，并且识别服务器关闭的唯一方法是根据 TCP 套接字规范发送“零字节”。

因此，我构建了一个抽象类，它将维护和控制稍后将使用上述 MyTCPClient 类的线程（根据设计，最终可能会阻塞父线程）。这是我的抽象 TCPManager 的代码：

```
/// <summary>
    /// Serves as a dispatcher for the high frequency readings from the TCP pipe.
    /// Each time the thread is started it initializes new TCPClients which will attempt to connect to server.
    /// Once established a TCP socket connection is alive until the thread is not requested to stop.
    ///
    /// Error hanling level here:
    ///
    /// Resources lke NetworkStream and TCPClients are ensured to be closed already within the myTCPClient class, and the error handling here
    /// is steps on top of that - sending proper emails, notifications and logging.
    ///
    /// </summary>
    public abstract class AbstractmyTCPClientManager
    {

        public string name;
        public string serverIP;
        public int serverPort;

        public Boolean requestStop = false;
        public Boolean MyTCPClientThreadRunning = false;
        public Boolean requestStart = false;

        public myTCPClient myTCPClient;

        public int sleepInterval;

        public Thread MyTCPClientThread;

        public AbstractmyTCPClientManager(string name, string serverIP, int serverPort)
        {
            this.name = name;
            this.serverIP = serverIP;
            this.serverPort = serverPort;
        }

        public void ThreadRun()
        {
            MyTCPClientThreadRunning = false;
            bool TCPSocketConnected = false;
            bool AdditionalInitializationOK = false;

            // keep trying to init requested tcp clients
            while (!MyTCPClientThreadRunning && !requestStop) // and we are not suggested to stop
            {
                while (!TCPSocketConnected && !requestStop) // and we are not suggested to stop)
                {
                    try
                    {
                        myTCPClient = new myTCPClient(serverIP, serverPort, name);

                        TCPSocketConnected = true;
                    }
                    catch (ErrorOnConnectingException e0)
                    {

                        // nah, too long message
                        string detail = e0.originalException != null ? e0.originalException.Message : "No inner exception";
                        //Utils.logToTimeStampedFile("Creating connection attempt failed.(1." + e0.customMessage + " 2." + detail + "). Will retry in 10 seconds...", name);
                        //Utils.logToTimeStampedFile(e0.customMessage + " (" + detail + "). Will retry in 10 seconds...", name);
                        Utils.logToTimeStampedFile(detail + ". Will retry in 10 seconds...", name);

                        Thread.Sleep(10000);
                    }
                    catch (ErrorOnGettingStreamException e1)
                    {
                        // nah, too long message
                        string detail = e1.originalException != null ? e1.originalException.Message : "No inner exception";
                        //Utils.logToTimeStampedFile("Getting network stream attempt failed. (1." + e1.customMessage + " 2." + detail + "). Will retry in 10 seconds...", name);
                        //Utils.logToTimeStampedFile(e1.customMessage + " (" + detail + "). Will retry in 10 seconds...", name);

                        Utils.logToTimeStampedFile(detail + ". Will retry in 10 seconds...", name);
                        Thread.Sleep(10000);
                    }
                }
                Utils.logToTimeStampedFile("TCP Communication established", name);

                while (!AdditionalInitializationOK && !requestStop) // or we are not suggested to stop
                {
                    try
                    {
                        AdditionalInitialization();

                        AdditionalInitializationOK = true;

                    }
                    catch (AdditionalInitializationException e1)
                    {
                        string detail = e1.originalException != null ? e1.originalException.Message : "No inner exception";

                        //Utils.logToTimeStampedFile("Additional initialization failed (1." + e1.customMessage + " 2." + detail + "). Will retry in 10 seconds", name);

                        Utils.logToTimeStampedFile(e1.customMessage + ". Will retry in 10 seconds", name);
                        Thread.Sleep(10000);
                    }
                }

                MyTCPClientThreadRunning = TCPSocketConnected && AdditionalInitializationOK;
                ViewModelLocator.ControlTabStatic.updateUIButtons();
            }
            Utils.logToTimeStampedFile("Additional Initialization successfully completed, thread started", name);

            // while all normal (i.e nobody request a stop) continiously sync with server (read data)
            while (!requestStop)
            {
                try
                {
                    syncWithInterface();
                }
                catch (ErrorOnReadingException e1)
                {
                    string detail = e1.originalException != null ? e1.originalException.Message : "No inner exception";

                    //Utils.logToTimeStampedFile("Error ocured while reading data. (1." + e1.customMessage + " 2." + detail + ")", name);
                    Utils.logToTimeStampedFile(e1.customMessage, name);

                    if (!requestStop) // i.e if this indeed is an exception, during a normal flow, and nobody requested a thread stop (which migh cause read exceptions as a consequence)
                    {
                        Utils.logToTimeStampedFile("There was no external stop request, when the error occured, doing tcp client restart.", name);
                        requestStop = true;
                        requestStart = true;
                    }
                }

                Thread.Sleep(sleepInterval);
            }

            // we need to close all after execution, but the execution may be closed before/while resources were still initializing
            if (TCPSocketConnected)
            {
                myTCPClient.CloseAllLeft();
            }
            if (AdditionalInitializationOK)
            {
                ReleaseAdditionalResources();
            }

            // remember that thread is stoped
            MyTCPClientThreadRunning = false;
            Utils.logToTimeStampedFile("Thread stoped", name);
            ViewModelLocator.ControlTabStatic.updateUIButtons();

            // this serves as a restart
            if (requestStart)
            {
                Utils.logToTimeStampedFile("Restarting thread...", name);
                this.requestStop = false;
                this.requestStart = false; // we are already processing a request start event, so reset this flag

                this.MyTCPClientThread = new Thread(new ThreadStart(this.ThreadRun));
                this.MyTCPClientThread.Name = this.name;
                this.MyTCPClientThread.IsBackground = true;
                this.MyTCPClientThread.Start();
            }
        }

        /// <summary>
        /// this method empties the entire TCP buffer, cycling through it
        /// </summary>
        private void syncWithInterface()
        {
            int counter = 0;
            // read at most 100 messages at once (we assume that for 3 sec interval there might not be more,
            //even if they are, it is still OK, they just will be processed next time)
            while (counter < 100)
            {
                counter++;
                string data = myTCPClient.ReadData();
                ForwardData(data);
            }

            // below is left for testing:
            /*
             * "Sleep(0) or Yield is occasionally useful in production code for
             * advanced performance tweaks. It’s also an excellent diagnostic tool
             * for helping to uncover thread safety issues: if inserting Thread.Yield()
             * anywhere in your code makes or breaks the program, you almost certainly have a bug."*/
            Thread.Yield();
        }

        /// <summary>
        /// Left for implementing in the caller that initialized the object. Meaning: one and the same way for receiving market/order data. Different ways of processing this data
        /// </summary>
        /// <param name="data"></param>
        public abstract void ForwardData(string data);

        /// <summary>
        /// left for implementing in child classes. Its purpose is to initialize any additional resources needed for the thread to operate.
        /// If something goes wrong while getting this additional resources,
        /// an AdditionalInitialization exception should be thrown, which is than handled from the initialization phase in the caller.
        /// </summary>
        public abstract void AdditionalInitialization();

        // countrapart of AdditionalInitialization method - what is initialized should be then closed
        public abstract void ReleaseAdditionalResources();
    } 
```

之后，每个需要的 TCP 通信通道都会有上述抽象类的专用实现，提供 ForwardData（即如何处理此数据）和 AdditionalInitialization（即在特定 TCP 通信处理之前还需要初始化什么）方法的实现正在运行。例如，我的线程中的一个需要在接收数据之前初始化额外的存储线程）。

一切都很好，除了关闭 TCP 处理。我有这个 requestStop 变量来控制线程是否应该退出或继续，但问题是 Read() 方法可能会陷入连续阻塞，甚至阻止 requestStop 变量被读取（我应该说我需要的两个 tcp 通道过程非常不同，其中一个非常频繁地接收数据，而另一个 - 偶尔接收）。我仍然希望他们实现相同的设计。因此，从我目前所阅读的内容来看，我必须实现另一个“父”或“控制”或“包装”线程，它实际上将在观察 requestStop 参数时完成工作。

我正在寻找像这篇文章这样的解决方案[，或者像这篇](https://stackoverflow.com/questions/1325135/exiting-a-thread-blocking-on-tcp-read-in-c-sharp)[文章](https://stackoverflow.com/questions/10084691/close-a-form-from-an-external-thread-using-the-invoke-method)这样的计时器

任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:08:05.983

我个人会为此使用异步套接字：http: [//msdn.microsoft.com/en-us/library/bbx2eya8.aspx](http://msdn.microsoft.com/en-us/library/bbx2eya8.aspx)

但是，如果您仍然想使用阻塞读取，您可以简单地从另一个线程关闭（）套接字。

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:09:16.813

我建议调用[NetworkStream 的 ReadAsync 方法](http://msdn.microsoft.com/en-gb/library/hh193669.aspx)并将 CancellationToken 传递给它。这样，当观察到请求停止事件时，可以轻松地（从另一个线程）取消读取操作：

```
public class MyTCPClient : IDisposable
{
  ...
  private CancellationTokenSource cancellationTokenSource = new CancellationTokenSource ();
  ...

  public string ReadData()
  {
     ...
     byte[] dataHeader = new byte[12];
     if (this.tcpClient.Connected)
     {
         stream.ReadAsync(dataHeader, 0, 12, cancellationTokenSource.Token).Wait();
     } ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:34:35.093

设置您的“requestStop”布尔值并从另一个线程关闭客户端套接字。这会导致 read() 调用以错误/异常返回“早期”。客户端线程可以在每次 read() 返回后检查“requestStop”，并在请求时清理/退出。

TBH，无论如何，我很少为明确关闭此类客户端而烦恼。我只是离开它们，直到应用程序退出。

# jquery - jQuery 调用 WCF 服务 - 400 错误请求

> ID：15358158
> 
> 赞同：2
> 
> 时间：2013-03-12T10:02:19.930
> 
> 标签：jquery, json, wcf

我的 jQuery 调用的 WCF 服务有问题。“错误 400 错误请求”

这是我的代码：

1.  界面
2.  执行
3.  网页配置
4.  调用 BoardService 的 Javascript 方法

IBoardService

```
[ServiceContract]
public interface IBoardService
{
    [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json)]
    string HelloWorld(string position, string idTask); 
```

董事会服务

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class BoardService : IBoardService
{
    public string HelloWorld(string position, string idTask)
    {
...
        JavaScriptSerializer js = new JavaScriptSerializer();
        return js.Serialize("Column: " + idColumn + " Story: " + idStory + " IdTask: " + idTask); 
```

网页配置

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
    <endpointBehaviors>
        <behavior name="EndpBehavior">
            <webHttp/>
        </behavior>
    </endpointBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  <services>
      <service behaviorConfiguration="ServiceBehavior" name="App.WebMVC.WCF.BoardService.BoardService">
          <endpoint address="" binding="webHttpBinding" contract="App.WebMVC.WCF.BoardService.IBoardService" behaviorConfiguration="EndpBehavior"/>
      </service>
  </services>
 </system.serviceModel> 
```

jquery.drangdrop.js - javascript 方法

```
 function Display(id,tempCurrentDrag) {
    var pageUrl = '../../WCF/BoardService.svc'
    $.ajax({
        type: "POST",
        url: pageUrl + "/HelloWorld",
        data: "{'position': '" + id + "', 'idTask': '"+tempCurrentDrag+"'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: OnSuccessCall,
        error: OnErrorCall
    });

    } 
```

# android - android中主键的自动更新

> ID：15358160
> 
> 赞同：1
> 
> 时间：2013-03-12T10:02:24.677
> 
> 标签：android, android-sqlite

我使用 SQLiteOpenHelper 创建了表，我创建的表的图像如下所示 ![](../Images/6bf83e3c925d8a10f4e40790c7cc111b.png)

在此之后我从表中删除第一行，现在我的表看起来像这样![在此处输入图像描述](../Images/76aa7fc9377556ada16d520c1f524d23.png)

您可以看到 id 现在以 2 开头。所以我的问题是当我删除第一行时，id 第一列变为 2 请帮我解决这个问题。我想要一张像这样的桌子。 ![在此处输入图像描述](../Images/aee339177b57e7b779d1a9838707c4d8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:31:03.780

> 您可以看到 id 现在以 2 开头。所以我的问题是当我删除第一行时，id 第一列变为 2 请帮我解决这个问题

id值没有问题。如果您是否使用自动增量，这是正常行为。在自动增量的情况下，它有内部迭代器并且它没有“内存”。

**所以想象一下这个场景：**你有两行 id 1、2。

*当您删除第一行时会发生什么？*

在 db 中将保留 id 为 2 的一行，但如果您将插入下一行，则该行将自动具有值 id 3 未删除 1 如果您将删除第一行，第二行也不会将值更改为 1。

在另一种情况下，如果您不使用**自动增量**，这是可能的（仅以编程方式进行），但我认为这种方法无效。如果您将拥有例如百万条记录，那么每一行的 id 都应该更改吗？这是病态。

所以这里真的不是问题，而是正常的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:22:49.110

您的问题可能是以下之一：

*   您的 ID 字段简称为`id`，而 Android 使用常规名称`_id`（作为 Java 常量，[`BaseColumns._ID`](http://developer.android.com/reference/android/provider/BaseColumns.html#_ID)）。

*   ID 字段应该是类型`INTEGER PRIMARY KEY`

# mysql - Rails对来自两列的值进行排序

> ID：15358164
> 
> 赞同：0
> 
> 时间：2013-03-12T10:02:31.080
> 
> 标签：mysql, ruby-on-rails, model-associations

我有两个表，A 和 B。A 和 B 有一个外键。两者都是 ActiveRecord。

```
class A
  has_one :b
  def valueRendered
    b.value1 || b.value2
  end
end

class B
  ( belongs_to :a, :foreign_key => :keyb ) if self.b
end 
```

这里来自 A 中的 valueRendered 方法的值在 value1 为空时具有来自 B 的字段 value2 的值。我必须使用 valueRendered 对表进行排序，即表应该根据 value1 和 value2 的值进行排序。如何进行？

> 编辑：更具体地说，假设有一个计算列（rails 中的一种方法）具有来自字段“value1”的值，但如果 value1 为空，则该值来自“value2”。我想针对此计算字段（方法）对整个表进行排序（不限于任何特定的记录或范围）。我很困惑如何进行。

更多编辑：实际示例代码

> 在控制器中，

```
 sort_fields = ['offer_orders.id','offers.name','offer_orders.created_at',  
  'offer_orders.country', 'offer_orders.ip_address',       
  'fraud_score_daily.adjusted_fraud_probability, fraud_score_daily.fraud_probability',                    
  'players.email','players.account_status',
  nil,
  nil,
  nil, 
  nil 
  ]

  arel = OfferOrder.includes(:offer, :player, :fraud_score_daily).group('fraud_score_daily.offer_order_id').order('dt desc')
  arel = paginate_table_data(arel, :sort_fields => sort_fields) 
```

paginate_table_data 方法在帮助程序中

```
def paginate_table_data(arel, opts={})
  opts.assert_keys(:required => [:sort_fields])
  @page_size = page_size
  @current_page = current_page
  arel.paginate(:page => @current_page, :per_page => params[:iDisplayLength]).
  order(order_by(opts[:sort_fields]).join(', '))
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:27:04.943

怎么样：

```
scope :order_by_value_rendered, joins(:b).order("value1, value2") 
```

# macos - OSX 安装程序包插件

> ID：15358167
> 
> 赞同：9
> 
> 时间：2013-03-12T10:02:35.550
> 
> 标签：macos, packagemaker

我正在尝试打包我一直在使用 OSX 开发的应用程序。我已经创建了包，我可以进行一些基本的（检查系统值等）检查。

**我现在要做的是在安装期间收集最终用户数据，以便创建自定义配置文件。**

我知道我必须使用安装程序插件来执行此操作，但我找不到任何有用的信息来执行此操作。

**人们可以分享资源、链接或有用的提示来帮助我做到这一点。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-10-27T19:26:58.230

（超级）迟到的答案，但目前正在这样做。我正在使用[包](http://s.sudre.free.fr/Software/Packages/about.html)。它是一个将为您构建安装程序的程序。

你要做的就是为它提供 your.app 和一个安装插件，然后就可以了。（当 Xcode 询问您要处理的项目类型时，您可以在 Xcode 中创建安装程序插件）。

关于您要具体解决的问题，我的解决方案是从我编写的插件中获取用户的输入配置。然后插件会将这些配置写入临时位置的文件中。然后我修改了我的应用程序以查找这些配置并从那里读取它们。

注意：您的插件不会以管理员权限运行（即使您在包应用程序中勾选了此框）。如果您需要管理员权限，请考虑在包中添加安装后脚本（并确保在“设置”选项卡中启用“安装时需要管理员密码”）

# android - 无法在三星 Galaxy S3 中获取用户位置？

> ID：15358177
> 
> 赞同：0
> 
> 时间：2013-03-12T10:02:54.740
> 
> 标签：android, android-location, android-networking, userlocation

我有以下课程来获取用户位置。

```
public class GetUserLocation extends Activity {

Timer timer1;

LocationManager locationManager = null;
LocationResult locationResult;
boolean gpsEnabled = false;
boolean networkEnabled = false;
public static Location userLocation = null;

public String checkProviders(Context context) {
    if (locationManager == null) {
        locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    }
    try {
        gpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch (Exception ex) {
        ex.printStackTrace();
        gpsEnabled = false;
    }

    try {
        networkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    } catch (Exception ex) {
        ex.printStackTrace();
        networkEnabled = false;
    }

    if(!gpsEnabled && !networkEnabled)
        return "No Location Service Found.\nPlease turn on your location service by\nenabling GPS or Data Service or WI-FI";

    if(gpsEnabled && !networkEnabled)
        return "No Internet Service Found.\nPlease turn on your inernet service by\nenabling Data Service or WI-FI";

    return null;

}

public boolean getLocation(Context context, LocationResult result) {
    locationResult = result;

    if (locationManager == null) {
        locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
    }

    // exceptions will be thrown if provider is not permitted.
    try {
        gpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
    } catch (Exception ex) {

    }

    try {
        networkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
    } catch (Exception ex) {
        ex.printStackTrace();
    }

    // don't start listeners if no provider is enabled
    if (!gpsEnabled && !networkEnabled)
        return false;

    if (gpsEnabled) {
        locationManager.removeUpdates(locationListenerGps);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,locationListenerGps);
    }

    if (networkEnabled) {
        locationManager.removeUpdates(locationListenerNetwork);
        locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0,locationListenerNetwork);
    }

    timer1 = new Timer();
    //timer1.schedule(new GetLastLocation(), 30000);

    return true;
}

LocationListener locationListenerGps = new LocationListener() {

    @Override
    public void onLocationChanged(Location location) {
        timer1.cancel();

        locationResult.gotLocation(location);
        locationManager.removeUpdates(this);
        locationManager.removeUpdates(locationListenerNetwork);
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
};

LocationListener locationListenerNetwork = new LocationListener() {
    @Override
    public void onLocationChanged(Location location) {
        timer1.cancel();
        locationResult.gotLocation(location);
        locationManager.removeUpdates(this);
        locationManager.removeUpdates(locationListenerGps);
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
};

//  class GetLastLocation extends TimerTask {
//      @Override
//      public void run() {
//          
//          locationManager.removeUpdates(locationListenerGps);
//          locationManager.removeUpdates(locationListenerNetwork);
//          
//          Location networkLocation = null, gpsLocation = null;
//          if (gpsEnabled) {
//              //t = Calendar.getInstance().getTimeInMillis();
//              gpsLocation = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
//          }
//          
//          if (networkEnabled) {
//              networkLocation = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
//          }
//          
//          // if there are both values use the latest one
//          if (gpsLocation != null && networkLocation != null) {
//              
//              if (gpsLocation.getTime() > networkLocation.getTime())
//                  locationResult.gotLocation(gpsLocation);
//              else
//                  locationResult.gotLocation(networkLocation);
//              
//              return;
//          }
//          
//          if (gpsLocation != null) {
//              locationResult.gotLocation(gpsLocation);
//              return;
//          }
//          
//          if (networkLocation != null) {
//              locationResult.gotLocation(networkLocation);
//              return;
//          }
//          
//          locationResult.gotLocation(null);
//      }
//  }

public static abstract class LocationResult {
    public abstract void gotLocation(Location location);
}

public void removeUpdates() {
    if(timer1!=null) {
        timer1.cancel();
    }
    locationManager.removeUpdates(locationListenerGps);
    locationManager.removeUpdates(locationListenerNetwork);
    userLocation = null;
    locationResult.gotLocation(null);
}

public Timer getTimer() {
    return this.timer1;
}

} 
```

此代码适用于其他设备，但不适用于 Galaxy s3。但在测试 S3 设备中，谷歌地图正在修复用户位置。

谁能说为什么会这样？任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T18:55:42.697

我解决了这样的问题，安装 APP GPS 状态，重置 GPS。解决方案位于： [http](http://productforums.google.com/forum/#!topic/maps/q24Cq4sQAtc%5B1-25-false%5D)
://productforums.google.com/forum/#!topic/maps/q24Cq4sQAtc%5B1-25-false%5D或者只是尝试从“地图”中清除应用数据。然后，您需要在出现提示时重新授予对位置服务的访问权限。

拥抱

# c++ - 从密码策略中获取信息

> ID：15358179
> 
> 赞同：2
> 
> 时间：2013-03-12T10:02:59.523
> 
> 标签：c++, windows, passwords

有没有办法从密码策略中获取一些信息？如密码长度、密码最长使用期限等。

我尝试在注册表中查找，但没有找到我要查找的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:21:41.200

您可以使用`NetUserModalsGet`. 这是获取 MaximumPasswordAge 的示例

```
int GetMaximumPasswordAge()
    {
        int Age = -1;
         DWORD dwLevel = 0;
       USER_MODALS_INFO_0 *pBuf = NULL;
       NET_API_STATUS nStatus;
       LPTSTR pszServerName = NULL;

       //
       nStatus = NetUserModalsGet((LPCWSTR) pszServerName,
                                  dwLevel,
                                  (LPBYTE *)&pBuf);
       //
       // If the call succeeds, print the global information.
       //
       if (nStatus == NERR_Success)
       {
          if (pBuf != NULL)
          {
              Age = pBuf->usrmod0_max_passwd_age/86400;

             printf("\tMinimum password length:  %d\n", pBuf->usrmod0_min_passwd_len);

          }
       }
       // Otherwise, print the system error.
       //
       else

          fprintf(stderr, "A system error has occurred: %d\n", nStatus);
       //
       // Free the allocated memory.
       //
       if (pBuf != NULL)
          NetApiBufferFree(pBuf);
        return Age;
    } 
```

# java - 附加代码是否可以防止打开文件泄漏

> ID：15358180
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:02:59.547
> 
> 标签：java, file-io

假设 Java6，此代码是否可以避免文件描述符泄漏：

```
{
    InputStream in = fileObject.getReadStream();
    // fileObject cleans it's internal state in case it throws exception
    try {
        // do whatever, possibly throwing exception
    } finally {
        try {
            in.close();
        } catch (Exception ex) {
            // failure to close input stream is no problem
        }
    }
} 
```

* * *

编辑：为了让问题看起来不那么明显，换句话说，上面的代码等于这个更长的代码：

```
{
    InputStream in = null;
    try {
        in = fileObject.getReadStream();
        // fileObject cleans it's internal state in case it throws exception

        // do whatever, possibly throwing exception
    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (Exception ex) {
                // failure to close input stream is no problem
            }
        }
    }
} 
```

也就是说，对返回打开的流或抛出异常的方法的调用是紧接在 之前`try`还是在`try`块内是否重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:08:03.933

是的，很好。甚至不值得回答。一个变体（我较少使用）是：

```
InputStream in = null;
try {
    in = fileObject.getReadStream();
    // do whatever, possibly throwing exception
} finally {
    if (in  != null) {
        try {
           in.close();
        } catch (Exception ex) {
            // failure to close input stream is no problem if everything else was ok
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T10:12:36.973

我是一个对Java不太熟悉的学生，但我希望能对你有所帮助。我认为这段代码不能让你避免文件描述符泄漏的问题。尽管您已经尝试关闭 in.close 方法，但是如果 in.close 方法抛出一些异常，这将无济于事。

# publisher - 更改“.exe”文件的“发布者”信息

> ID：15358185
> 
> 赞同：23
> 
> 时间：2013-03-12T10:03:09.760
> 
> 标签：publisher

**我是怎么遇到这个的**

我为一个简单的秒表编写了代码，它也可以兼作魔方计时器。源代码和可执行文件在这里：

[立方体计时器](http://www.mediafire.com/?o7o8spk7kdqlu)

无论如何，我的怀疑不是关于这段代码（它工作正常）。

我下载了我上传的可执行文件以检查它是否工作正常，当时我看到了这个屏幕：

`Open file - security warning`

在这个对话框下面有一个字段，上面写着：

`Publisher : Unknown Publisher`

**截屏：**

![截屏](../Images/18b623ef05eb88665f6c13463e5aeeba.png)

**怀疑**

是否有某种方式以编程方式或其他方式可以改变该`publisher`领域？

**眼镜**

我已经用 Microsoft Visual C++ 2010 Express 编译了代码。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-12T10:30:37.420

您可以在链接/编译时通过为项目设置[适当的资源](https://stackoverflow.com/questions/5460889/set-publisher-field-in-rc-file)（例如*CompanyName*）或使用[资源编辑器](https://stackoverflow.com/questions/4072455/windows-pe-resources)修改资源来轻松更改发布者。

您的问题实际上是没有[签名](http://msdn.microsoft.com/en-us/library/ms172240.aspx)，因此即使存在发布者字段，它也不能被信任。

[您可以在http://msdn.microsoft.com/en-us/library/windows/desktop/aa381058%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381058%28v=vs.85%29.aspx)`rc`末尾附近找到示例资源文件。

要将资源添加到您的 VC 项目，请检查：

*   [如何将版本信息嵌入到 Windows 二进制文件中？](https://stackoverflow.com/questions/975936/how-do-i-embed-version-information-into-a-windows-binary)
*   [VC++ 2012：如何将 version.inc（单独维护）中的版本信息包含到 .rc 文件中](https://stackoverflow.com/questions/12821369/vc-2012-how-to-include-version-info-from-version-inc-maintained-separately)

这些`.rc`文件将被编译为二进制 ( `.res`) 并链接到您的最终可执行文件中。

要添加或修改现有的可执行文件，您应该能够使用[此工具](http://www.codeproject.com/Articles/37133/Simple-Version-Resource-Tool-for-Windows)（需要登录，这当然会导致签名在已签名的二进制文件中无效）。

[Microsoft Authenticode 文档](http://msdn.microsoft.com/en-us/library/ms537359%28v=vs.85%29.aspx)包括教程。

[CAcert.org](http://cacert.org/)将签署您可以使用的证书，并提供[开始使用 Authenticode 的说明](http://wiki.cacert.org/Authenticode)。

（对不起，我不能对 VC 更有帮助，我不使用它，我通常使用`mingw`and `make`。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-05-14T20:06:12.727

将您的程序制作成批处理文件，然后使用 Advanced BAT to EXE Con​​verter，将其转换为 EXE 并填写所有字段。这肯定对我有帮助！:)

# android - 如何在不使用时注销android应用程序

> ID：15358189
> 
> 赞同：-3
> 
> 时间：2013-03-12T10:03:23.087
> 
> 标签：android, logout, session-timeout

我正在开发一个`Android`应用程序，我可以在其中使用特定的用户名和密码登录。我希望我的应用程序能够在应用程序状态空闲 5 分钟时自动注销用户。

我怎样才能在`Android`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:07:43.367

利用`AlarmManager`

基本思想是，您`onPause()`在其中设置一个警报 5 分钟，当警报返回时，“注销”用户。如果用户返回，您可以取消该警报（覆盖`onResume()`

这是一个很好的[线程](https://stackoverflow.com/questions/4459058/alarm-manager-example) ，解释了使用`AlarmManager`代码取消和安排新警报以及处理回调。

如果您想更简单，您可以跟踪静态时间戳变量。更新你的这个变量`onPause()`，然后当用户返回时（`onResume()`）检查这个变量的时间，看看是否已经过了 5 分钟，如果它有重定向用户回到登录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:07:34.093

根据您对空闲状态的定义，您可以`Service`在活动暂停时启动 a，其中 a`Timer`将运行 5 分钟，然后注销用户并停止服务。在每个`Activitiy`中，您停止计时器`onResume()`并在中重新启动它`onPause()`。您可以使用公共基础轻松实现此行为`Activity`。这将在用户退出最后一个应用程序后 5 分钟注销用户`Activity`。

# excel - 如何控制从 MS Access 到 Excel 的输出

> ID：15358190
> 
> 赞同：1
> 
> 时间：2013-03-12T10:03:24.807
> 
> 标签：excel, vba, ms-access

有没有人知道如何控制 MS Access to Excel 中表格的输出布局。

例如：

我的 MS Access 表看起来像这样

```
--------------------------------------------------
|ID      | Field 2 | Field 3| Field 4 | ETC
--------------------------------------------------
|A       | 1       | 2      | 3       |
|A       | 4       | 5      | 6       |
|B       | 7       | 8      | 9       |
|C       | 10      | 11     | 12      |
|A       | 13      | 14     | 15      | 
```

虽然我想将数据输出到 excel 中，例如：

```
--------------------------------------------------
|ID      | Field 2 | Field 3| Field 4 | ETC
--------------------------------------------------
|A       | 1       | 2      | 3       |
|        | 4       | 5      | 6       |
|        | 13      | 14     | 15      |
|B       | 7       | 8      | 9       |
|C       | 10      | 11     | 12      | 
```

所以我可以按“ID”字段对所有记录进行分组。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:42:31.907

**回复：行顺序**

当然，您可以在 Excel 中对行进行排序，但如果您想在 Access 中执行此操作，您将创建一个执行排序的 Select 查询，保存它，然后导出查询而不是表。

**回复：抑制重复值**

您可能*不想*完全忽略它们，但您可以使用条件格式功能将它们隐藏在 Excel 中。在你的情况下，你会

*   选择 A 列中的 ID 值（从第 2 行开始）
*   调用条件格式
*   选择“使用公式确定要格式化的单元格”
*   将公式设置为 =A2=A1
*   将字体颜色设置为与背景颜色相同

（参考：[这里](http://www.contextures.com/xlCondFormat03.html#Duplicate)）

编辑：响应下面的评论，示例 Excel VBA 代码以应用格式（由 Excel 中的“记录宏”捕获）：

```
Range("A2:A6").Select
Selection.FormatConditions.Add Type:=xlExpression, Formula1:="=A2=A1"
Selection.FormatConditions(Selection.FormatConditions.Count).SetFirstPriority
With Selection.FormatConditions(1).Font
    .ThemeColor = xlThemeColorDark1
    .TintAndShade = 0
End With
Selection.FormatConditions(1).StopIfTrue = False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:20:59.847

尝试这样的事情。

先介绍几个有用的功能：

1) 基于 SELECT 语句（通过参数传递）从 Access 获取记录集。

```
Option Explicit
Public Function Rst_From_Access(sSQL_Select As String) As ADODB.Recordset

Dim oConn                           As ADODB.Connection
Dim oRst                            As ADODB.Recordset
Dim sPath_DB                        As String
Dim sFile_DB                        As String

Dim sConn                           As String

'Instantiate the ADO-objects.

Set oConn = New ADODB.Connection
Set oRst = New ADODB.Recordset

'Set Path and File
sPath_DB = ThisWorkbook.Names("PARAM_PATH_DB").RefersToRange.value
sFile_DB = ThisWorkbook.Names("PARAM_FILE_DB").RefersToRange.value

 'Create the connectionstring.
sConn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & sPath_DB & sFile_DB & ";"

With oConn
    .Open (sConn) 'Open the connection.
    .CursorLocation = adUseClient 'Necessary to disconnect the recordset.
End With

With oRst
    .Open sSQL_Select, oConn 'Create the recordset.
    Set .ActiveConnection = Nothing 'Disconnect the recordset.
End With

Set Rst_From_Access = oRst

End Function 
```

2) ADO 连接：

```
Public Sub open_ADODB_Connection()

Dim oConn                           As ADODB.Connection
Dim sPath_DB                        As String
Dim sFile_DB                        As String

Dim sConn                           As String

'Instantiate the ADO-objects.

Set oConn = New ADODB.Connection

'Set Path and File
sPath_DB = ThisWorkbook.Names("PARAM_PATH_DB").RefersToRange.value
sFile_DB = ThisWorkbook.Names("PARAM_FILE_DB").RefersToRange.value

 'Create the connectionstring.
sConn = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & sPath_DB & sFile_DB & ";"

With oConn
    .Open (sConn) 'Open the connection.
    .CursorLocation = adUseClient 'Necessary to disconnect the recordset.
End With

End Sub 
```

3）调用记录集：

选项显式

```
Sub Connect_To_DB()

Dim oSheet                      As Excel.Worksheet

Dim sSQL_Select                 As String
Dim oRst                        As ADODB.Recordset
Dim iMax_Col                    As Integer
Dim lMax_Row                    as long

Set oSheet = ThisWorkbook.Sheets("Main")

'Get recordset
sSQL_Select = "SELECT * FROM T_TABLE ORDER BY ID;"

Set oRst = Rst_From_Access(sSQL_Select)

iMax_Col = oRst.Fields.Count
oRst.MoveLast
iMax_Row = oRst.RecordCount

With oSheet
   .Range(.Cells(1, 1), .Cells(iMax_Row, _
        lMax_Col)).CopyFromRecordset oRst
End With

End Sub 
```

当然，你会有重复的ID，会不会有问题？一般来说，我认为最好保留每一行的所有数据。如果它是用于打印目的，那么我会立即从 Access 打印它。

# c# - 使用浮点值在 XNA 中画线

> ID：15358191
> 
> 赞同：1
> 
> 时间：2013-03-12T10:03:32.960
> 
> 标签：c#, winforms, xna-4.0

我如何通过使用浮点值而不是整数在 XNA（C#）中画线，因为整数消除了点之后的值

喜欢：20.12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:19:59.043

您可以尝试使用该[`SpriteBatch.Draw (Texture2D, Vector2, Nullable<Rectangle>, Color, Single, Vector2, Vector2, SpriteEffects, Single)`方法](http://msdn.microsoft.com/en-us/library/ff433989.aspx)。您需要先创建一个`Texture2D`代表您的线的。

```
Vector2 pos = new Vector2(20.12F, 20.12F);
Vector2 scale = new Vector2(150.23F, 1);
Color myColor = Color.Blue;

Texture2D simpleTexture = new Texture2D(GraphicsDevice, 1, 1, false, SurfaceFormat.Color);

// Draws a "line" with size (1, 1), at position (20.12, 20.12), with blue color, rotated by 45° (Pi/4), with origin at (0, 0) (the line will begin at 'pos'), scaled by (150.23, 1) (gives the line a size of (150.23, 1) )
this.spriteBatch.Draw(simpleTexture, pos, null, myColor, MathHelper.PiOver4, Vector2.Zero, scale, SpriteEffects.None, 0) 
```

我已经很久没有使用 XNA 了，所以我不能保证这会奏效。
无论如何，我希望它有所帮助。

# wordpress - 使用子模块将 Git 存储库与其他 Git 存储库一起设置？（WordPress开发）

> ID：15358193
> 
> 赞同：2
> 
> 时间：2013-03-12T10:03:35.510
> 
> 标签：wordpress, git

我有一个名为“ABC”的 Git 项目/repo，我想在其中添加 WordPress。

```
ABC
  WordPress
  Other 
  Stuff 
```

理想情况下，我想将我的 WordPress 设置基于[WordPress Skeleton](https://github.com/markjaquith/WordPress-Skeleton) repo。（WordPress Skeleton 还包含一个子模块，指的是最新的稳定 WordPress 版本。）

如何创建此设置？

1.  我应该分叉 WordPress 骨架还是将其复制到我现有的仓库中？
2.  如何更新 WP-skeleton 从我的 ABC git repo 引用的子模块？

我想当我希望 ABC 包含来自其他本身具有子模块的存储库的代码时，我对在这种情况下使用分叉感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:32:50.473

基本上你正在寻找的是一个管理多个回购的工具。这里有几个：

```
repo (http://source.android.com/source/version-control.html)
gitslave (http://gitslave.sourceforge.net/) 
```

还要注意子模块陷阱'：

[http://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/](http://codingkilledthecat.wordpress.com/2012/04/28/why-your-company-shouldnt-use-git-submodules/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T20:27:42.730

@dani 我做了类似的事情。我创建了这个 git 项目：[http ://stechico.github.io/wordpress-skeleton/](http://stechico.github.io/wordpress-skeleton/)

如果有的话，那里有代码示例。高温高压

# objective-c - 处理 NSTableView 的双击鼠标事件和按下返回

> ID：15358198
> 
> 赞同：3
> 
> 时间：2013-03-12T10:03:53.820
> 
> 标签：objective-c, cocoa, nstableview

好的，我需要的很简单，尽管我仍然找不到任何具体的东西。

我希望能够：

*   跟踪双击事件
*   跟踪`NSTableView`焦点，并按下“返回”键。

你会怎么做？

PS我已经查看了`NSTableViewDelegate`规范，但我找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T10:24:51.750

对于双击，您只需执行以下操作：

```
-(void)awakeFromNib{
    [self.tableView setDoubleAction:@selector(thisMethod)];
    //And if you wish to take selector dynamically, I guess you know how to do :)
}

-(void)thisMethod{
    NSLog(@"double clicked");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-03T19:49:17.230

对于返回事件，将您的 NSTableView 子类化并覆盖 keyDown：

斯威夫特 5.x：

```
 override func keyDown(with event: NSEvent) {
        if event.characters?.count == 1 {
            let character = event.keyCode
            switch (character) {
            // 36 is return
            case UInt16(36):
                print("return: \(event)")
            default:
                print("any other key: \(event)")
            }
        } else {
            super.keyDown(with: event)
        }
    } 
```

# android - 关于 request.setTesting(true) 代码行

> ID：15358201
> 
> 赞同：5
> 
> 时间：2013-03-12T10:04:11.467
> 
> 标签：android, admob

我想在我的 android PhoneGap 应用中包含**admob 。**

为了包含 admob，我提到了链接[https://github.com/sainttex/PhoneGap-Android-Native-AdMob](https://github.com/sainttex/PhoneGap-Android-Native-AdMob)

我的问题是关于下面的代码行。

```
request.setTesting(true); 
```

当应用程序投放市场时，我必须删除该代码行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:17:40.320

在您提供的链接中查看此内容

**步骤 6) 禁用测试模式**

请**务必在部署到 Google Play 之前禁用测试模式，方法是将值更改为 false**、**注释掉或**从 MainActivity.java中删除以下行

```
request.setTesting(true); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T00:24:01.370

在 admob 管理界面中，有一个复选框可以将 testmode 请求视为常规请求。

# javascript - 在 d3 中访问和更新数组的不同对象

> ID：15358202
> 
> 赞同：0
> 
> 时间：2013-03-12T10:04:19.597
> 
> 标签：javascript, html, jquery-ui, d3.js

我做了：

```
var dummy_array=[];

for (var i = 0; i < 10; i++) {
    dummy_array.push(0);
};

var data=[],dataCheck = [];

    data['data0']=dummy_array;
    data['data1']=dummy_array;
    data['data0'].shift();
    data['data0'].push(5);
    console.log(data['data0']);
    console.log(data['data1']);
} 
```

而不是`data['data0']`得到更新，`data['data1']`也得到更新。

我只想`data['data0']`更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:09:31.277

尝试这个：

```
data['data0']=dummy_array.sclice(0);
data['data1']=dummy_array.sclice(0); 
```

# java - JAX-WS Soap 错误未出现在 WSDL 中

> ID：15358204
> 
> 赞同：9
> 
> 时间：2013-03-12T10:04:22.720
> 
> 标签：java, exception-handling, jax-ws

我正在使用 JAX-WS 创建一个 Web 服务（我正在使用 Java 到 WSDL 方法创建它）。

我无法让我的例外按我的要求工作。

我创建了以下异常类：

```
@WebFault
public class MyWebServiceException extends SOAPFaultException {

    private static final long serialVersionUID = 8234753208722614057L;

    protected MyWebServiceException(SOAPFault fault) {
        super(fault); 
    }

    protected MyWebServiceException(SOAPFault fault, Throwable throwable) {
        this(fault);
        super.setStackTrace(throwable.getStackTrace());
    }
} 
```

这允许我在我的 SOAP 响应中包含以下内容：

```
<faultcode>E0010</faultcode>
<faultstring>Invalid Report</faultstring>
<detail>
    <ns2:exception class="com.example.web.common.exceptions.MyWebServiceException" note="To disable this feature, set com.sun.xml.ws.fault.SOAPFaultBuilder.disableCaptureStackTrace system property to false" xmlns:ns2="http://jax-ws.dev.java.net/">
     <message>Invalid Report</message>
     <ns2:stackTrace>
     <ns2:frame class="com.example.web.common.exceptions.ExceptionHandler" file="ExceptionHandler.java" line="34" method="getWebException"/> 
```

但是，因为我的异常是`SOAPFaultException`which extends `RuntimeException`，它没有被添加到 WSDL，所以当服务的用户生成他们的客户端存根时，不包括异常。

有谁知道如何创建这个异常来给我预期的输出（即包括故障代码和故障字符串）但也出现在 WSDL 中（我猜它需要是一个检查异常）

我搜索了如此高和低以想出我已经拥有的东西！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:04:07.973

如果您声明您的 WebMethod 抛出 MyWebServiceException，它将出现在 WSDL 上。

但也许你不应该弄乱 SOAPFault 代码。如果您创建业务异常并抛出它，您可以在客户端获取错误代码，而不会弄乱soap 内部。

您的网络方法如下所示：

```
@WebMethod
public String sayHello(@WebParam String name, @WebParam String thing)  throws MyException
{
    // TODO Auto-generated method stub
    if ("err".equals(name))
        throw new MyException("E0010","Report not found");
    return null;
} 
```

您的业​​务例外：

```
public class MyException extends Exception {

    private static final long serialVersionUID = -923394585528818428L;
    public MyException(String errorCode,String errorMessage)
    {
        this.errorCode = errorCode;
        this.errorMessage = errorMessage;
    }

    public String getErrorCode() {
        return errorCode;
    }
    public void setErrorCode(String errorCode) {
        this.errorCode = errorCode;
    }
    public String getErrorMessage() {
        return errorMessage;
    }
    public void setErrorMessage(String errorMessage) {
        this.errorMessage = errorMessage;
    }
    String errorCode;
    String errorMessage;

} 
```

返回一个异常将是：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <soap:Fault>
         <faultcode>soap:Server</faultcode>
         <faultstring>Fault occurred while processing.</faultstring>
         <detail>
            <ns1:MyException xmlns:ns1="http://ws/">
               <errorMessage xmlns:ns2="http://ws/">Report not found</errorMessage>
               <errorCode xmlns:ns2="http://ws/">E0010</errorCode>
            </ns1:MyException>
         </detail>
      </soap:Fault>
   </soap:Body>
</soap:Envelope> 
```

您还可以添加堆栈跟踪，但最好登录服务器，如果需要，可能使用 GUID 与客户端错误相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T10:52:24.360

假设您使用的是 JAX-WS 而不是 JAX-RPC，您可以只删除`extends SOAPFaultException`. 然后将必填字段添加到您自己的异常中：

这是一个 StackTraceElement（仅作为示例）：

```
 public class SOAPStackElement implements Serializable {
       private static final long serialVersionUID = 1L;

       @XmlAttribute(name="class")
       private String class;
       @XmlAttribute(name="file")
       private String file;
       @XmlAttribute(name="methodname")
       private String methodName;
       @XmlAttribute(name="line")
       private Integer line;
    } 
```

这是 SOAP 信息：

```
 public class SOAPFaultInfo implements Serializable {
        @XmlElementWrapper(name="stackTrace")
        private SOAPStackElement[] stackTrace;
        @XmlElement(name="faultcode")
        private String faultCode;
        @XmlElement(name="faultstring")
        private String faultString;
        /* what else your heart desires.  :-) */
    } 
```

这是真正的例外：

```
 @WebFault
    public class MyWebServiceException extends Exception {

       private static final long serialVersionUID = 1L;
       private SOAPFaultInfo faultInfo;

       protected MyWebServiceException(SOAPFaultInfo fault) {
          super(); 
          this.faultInfo = fault;
       }

       protected MyWebServiceException(SOAPFaultInfo fault, Throwable cause) {
          super(cause);
          this.faultInfo = fault;
       }

       public SOAPFaultInfo getFaultInfo() {
          return faultInfo;
       }
   } 
```

老实说，我没有把它放到一个测试项目中。所以你可能需要解决一些编译问题。但我希望你能得到这张照片。

# android - WebView Android 中的套接字

> ID：15358207
> 
> 赞同：2
> 
> 时间：2013-03-12T10:04:27.070
> 
> 标签：android, sockets, webview

我有一个用 .NET 编写的应用程序（我猜）并且反应灵敏。这个想法是将应用程序包装为一个 android 应用程序。android 应用程序将具有更多功能，而这个 webview 只是其中之一。

我的问题是当前的网络应用程序正在使用一些套接字将数据推送到页面。所以内容会在不刷新页面的情况下发生变化。该功能在 android webview 中也会保持不变吗？

我应该通过构建应用程序来尝试这个，但我很糟糕，他们目前没有任何数据，也没有推送。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T18:10:04.990

我遇到了同样的问题。据我所知，Android 浏览器（又名 WebView）不支持 WebSockets：http: [//mobilehtml5.org/](http://mobilehtml5.org/)

虽然有使用 Socket.IO 的解决方法，您可以尝试：[http ://chpeck.tumblr.com/post/37273036645/socket-io-with-android-webview](http://chpeck.tumblr.com/post/37273036645/socket-io-with-android-webview)

要点：[https ://gist.github.com/secobarbital/4220309](https://gist.github.com/secobarbital/4220309)

另一个更简单的选择是在您的网站上使用[Pusher](http://pusher.com/)，如果它检测到不支持 WebSockets 的浏览器，它将自动回退到 Flash。

**编辑**

在 Android 4.4+ 中，基于 WebKit 的原始 WebView 已被 Chromium 取代，后者支持 WebSockets 以及其他好东西。更多信息：[http ://www.mobilexweb.com/blog/android-4-4-kitkat-browser-chrome-webview](http://www.mobilexweb.com/blog/android-4-4-kitkat-browser-chrome-webview)

# http - 使用边界分隔符进行 HTTP 服务器响应

> ID：15358208
> 
> 赞同：3
> 
> 时间：2013-03-12T10:04:28.097
> 
> 标签：http, poco-libraries, multipart-mixed-replace

使用 Poco，我正在尝试模拟 AXIS 相机网络服务器，它根据客户端请求发送 jpeg 帧。

每个 Web 响应都应该使用 Content-Type: multipart/x-mixed-replace 和预定义的边界进行编码。

我怎样才能用 Poco 做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:12:40.717

*response.setContentType()*是正确的，但是当您进行*sendBuffer()*时，Poco 不会将预定义的边界字符串放在每个边界块的顶部。

*将setChunkedTransferEncoding()*指定为*false*以避免块传输很重要，这不是我所要求的。

我需要的是这个： [http ://www.w3.org/Protocols/rfc1341/7_2_Multipart.html](http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)

如果这是我的数据缓冲区：“这是第一个边界块。一个边界块可能会在下一个块中继续。这是第二个边界块。”

这是我需要实现的：

```
HTTP/1.1 200 OK
Date: Tue, 01 Dec 2013 10:27:30 GMT
Content-Length: 117
Content-Type: Multipart/mixed; boundary="sample_boundary";

--sample_boundary
This is the first boundary block. A boundary block may

--sample_boundary
continue in the next block. This is the second boundary block. 
```

玩弄这个，我看到我必须手动拆分我的缓冲区以获得所需的边界。

这就是我实际这样做的方式：

```
std::ostream& ostr = response.send();

char frameBuffer[102410];
char fragment[1024];

string boundary = "--BOUNDARY--";
response.setChunkedTransferEncoding(false);
response.setContentType("multipart/x-mixed-replace; boundary=" + boundary);

//Split my frameBuffer in some fragments with boundary
unsigned int nBytes = sizeof(frameBuffer);
unsigned int _MAX_FRAGMENT_SIZE_ = sizeof(fragment);
unsigned int index=0;

response.setContentLength(frameLength);

while (nBytes>0){

    unsigned int size = (nBytes>_MAX_FRAGMENT_SIZE_)?_MAX_FRAGMENT_SIZE_:nBytes;
    memcpy(fragment, frameBuffer + index, size);

    //Enviamos el fragmento sin mas con su boundary correspondiente.
    ostr << boundary << "\r\n";
    ostr.write(fragment, size);
    ostr << "\r\n";

    index += size;
    nBytes -= size;
} 
```

我认为 Poco 有工具可以解决这个问题。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T23:29:47.857

这些方面应该做的事情：

```
using Poco::Net::HTTPRequestHandler;
using Poco::Net::HTTPServerRequest;
using Poco::Net::HTTPServerResponse;
using Poco::Net::HTTPRequestHandlerFactory;
using Poco::Net::HTTPServerParams;
using Poco::Net::HTTPServer;
using Poco::Net::ServerSocket;
using Poco::Net::SocketAddress;

struct AXISRequestHandler: public HTTPRequestHandler
{
    void handleRequest(HTTPServerRequest& request, HTTPServerResponse& response)
    {
        // ... get data to send back
        response.setContentType("multipart/x-mixed-replace; boundary=--MY_BOUND");
        response.sendBuffer(data, size);
    }
};

struct AXISRequestHandlerFactory: public HTTPRequestHandlerFactory
{
    HTTPRequestHandler* createRequestHandler(const HTTPServerRequest& request)
    {
        return new AXISRequestHandler;
    }
};

ServerSocket svs(SocketAddress("192.168.0.1", 8080));
HTTPServerParams* pParams = new HTTPServerParams;
// ... set server params here to your liking
HTTPServer srv(new AXISRequestHandlerFactory, svs, pParams);
srv.start(); // NB: server will fly off here (to its own thread) 
```

# ios - 如何制作另一个包含天数的数组

> ID：15358210
> 
> 赞同：2
> 
> 时间：2013-03-12T10:04:35.810
> 
> 标签：ios, objective-c, date

我有如下数组

```
_combinedBirthdates(
    "03/12/2013",
    "03/12/2013",
    "08/13/1990",
    "12/09/1989",
    "02/06",
    "09/08",
    "03/02/1990",
    "08/22/1989",
    "03/02",
    "05/13",
    "10/16",
    "07/08",
    "08/31/1990",
    "04/14/1992",
    "12/15/1905",
    "08/14/1989",
    "10/07/1987",
    "07/25",
    "07/17/1989",
    "03/24/1987",
    "07/28/1988",
    "01/21/1990",
    "10/13"
) 
```

所有元素都`NSString`在上面`NSArray`。

如何制作另一个包含特定日期剩余天数的数组，如下所示

```
_newlymadeArray(
    "125",
    "200",
    "50",
    "500",
    "125",
  and so on
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:14:47.123

```
unsigned int unitFlags =  NSDayCalendarUnit;
NSCalendar *currCalendar = [[NSCalendar alloc]
                             initWithCalendarIdentifier:NSGregorianCalendar];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

[dateFormatter setDateStyle:NSDateFormatterShortStyle];

NSMutableArray * _newlymadeArray = [[NSMutableArray alloc] init];
for (NSString * str in _combinedBirthdates){

        NSDate * toDate = [dateFormatter dateFromString:str];
        NSDateComponents *daysInfo = [currCalendar components:unitFlags fromDate:[NSDate date]  toDate:toDate  options:0];
        int days = [daysInfo day];
        [_newlymadeArray addObject:[NSString stringWithFormat:@"%d",days]];

    } 
```

您需要遍历第一个数组并获取 NSDate 中的日期并使用该信息来获取从当前日期到数组中下一个日期的天数差异。

您将不得不添加必要的检查，这是未经测试的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:19:06.917

使用这个算法：

1.  获取当前年份
2.  将数组中的每个日期转换为当年的日期。例如，“03/02/1990”变为“03/02/2013”
3.  如果步骤 2 中的日期早于当前日期，则将其年份提前一年（即“03/02/2013”​​变为“03/02/2014”）
4.  使用[this question](https://stackoverflow.com/q/2548008/335858)中的技术，找到从第3步到日期的天数。它将小于一年中的天数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T10:19:41.580

试试这个代码快照。

```
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
[formatter setTimeZone:[NSTimeZone localTimeZone]];
[formatter setDateFormat:@"MM/dd/yyyy"];
NSDate *currentDate = [formatter dateFromString:@"03/12/2013"];
NSTimeInterval srcInterval = [currentDate timeIntervalSince1970];

NSArray *_combinedBirthdates = @[@"03/15/2013", @"05/15/2013"];
NSMutableArray *_newlymadeArray = [NSMutableArray array];
const NSInteger SECONDS_PER_DAY = 60 * 60 * 24;

for (NSString *one in _combinedBirthdates) {
    NSDate *destDate = [formatter dateFromString:one];
    NSTimeInterval destInterval = [destDate timeIntervalSince1970];
    NSInteger diff = (destInterval - srcInterval) / SECONDS_PER_DAY;
    [_newlymadeArray addObject:[NSString stringWithFormat:@"%d", diff]];
} 
```

而已！:)

# html - 如何使 div 居中

> ID：15358219
> 
> 赞同：-7
> 
> 时间：2013-03-12T10:05:06.933
> 
> 标签：html, css, web, stylesheet

```
#container {
width: 960px;
margin-left: auto;
margin-right: auto;
height: auto; }

#large_box {
text-align: center;
width: 960px;
margin-left: auto;
margin-right: auto;
height: auto; }

#searchbcid {
position: absolute;
left: 400px;
margin-left: 50px;
top: 280px; }

#createbcid {
position: absolute;
margin-left: 250px;
top: 280px;
left: 550px; }

#loginpos {
position: absolute;
margin-left: 20px;
left: 30px;
top: 280px; } 
```

在我的 html 中有一个名为`container`. 所有其他`div`的都放在容器内。另一个 div ie，`large_box`其中包含 3 个其他`div`的，例如`loginpos`, `searchbcid`, `createbcid`。

但我无法居中对齐`div` `large_box`.

我怎样才能居中对齐它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-10T22:52:57.463

尝试将您的边距设置为 0 auto，它将以您指定的宽度在其容器内水平居中您的元素。

```
#large_box {
text-align: center;
width: 960px;
margin: 0 auto;
height: auto; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:19:25.667

在您的 css 中，仅 `margin:0 auto;` 使用 div 的一些宽度，然后它将自动在提供的宽度的中心对齐。

快乐的编码...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-22T19:21:40.503

这对我有用。

**CSS**

```
div#center{
      width:250px;
      margin:0 auto;
      background-color:yellow;
}

/* To support IE */
div#parent{
      align:center;
} 
```

**HTML**

```
 <div id="parent">    
      <div id="center">
        I'm in the middle!
      </div>
    </div> 
```

[JSFiddle 链接](http://jsfiddle.net/v6e2g/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T15:21:05.737

CSS：

```
#wrapper_div{
width:500px;
height:500px;
}

#inner_div{
width:200px;
margin:0 auto;
} 
```

HTML：

```
<div id="wrapper_div">
<div id="inner_div">
Centred content here!
</div>
</div 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-27T10:44:00.420

使用这个 css 作为 div。它将水平居中。

```
#large_box {
  width: 960px;
  margin: 0 auto; 
} 
```

# redirect - nGinx 自定义错误页面

> ID：15358222
> 
> 赞同：0
> 
> 时间：2013-03-12T10:05:11.263
> 
> 标签：redirect, nginx

我是 nGinx 的新手，我需要一些帮助将所有错误重定向到默认页面。

EG：我希望将所有 500 个内部服务器错误和 404 个未找到错误重定向到[http://www.mydomain.com/error.php](http://www.mydomain.com/error.php)

我当前将其添加到我的 nginx.conf 文件中：

```
http {
    server {
        error_page 404 http://www.mywebsite.com/error.php;
        error_page 500 http://www.mywebsite.com/error.php;

        }
................
................
} 
```

但是在我重新启动 nGinx 后没有任何反应。

当我访问一个不存在的页面时，我仍然会从 nGinx 获得默认的错误页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:07:06.383

您使用的是 FastCGI 还是代理？

要使用 FastCGI 或 Proxy Maybe，您必须将 proxy_intercept_errors 或 fastcgi_intercept_errors 切换为 on。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:48:24.053

您可能在另一个 conf 文件中有另一个“服务器”部分，它会覆盖此设置。将您的 error_page 指令放在处理您网站的 conf 文件中。

# git - git 合并出错了？

> ID：15358225
> 
> 赞同：2
> 
> 时间：2013-03-12T10:05:16.093
> 
> 标签：git, git-merge

**原来的：**

```
 "<tasks>"
+ " <exec command="ls">"
+ "  <runif status="failed" />"
+ " </exec>"
+ " <exec command="ls">"
+ "  <runif status="failed" />"
+ " </exec>"
+ "</tasks>"; 
```

**修改_1：**

```
 "<tasks>"
+ " <exec command="ls">"
+ "  <runif status="failed" />"
+ " </exec>"
+ "</tasks>"; 
```

**修改_2：**

```
 "<tasks>"
+ " <exec command="ls">"
+ "  <runif status="passed" />"
+ " </exec>"
+ " <exec command="ls">"
+ "  <runif status="failed" />"
+ " </exec>"
+ "</tasks>"; 
```

**结果：**

```
 "<tasks>"
+ " <exec command="ls">"
+ "  <runif status="passed" />"
+ " </exec>"
+ "</tasks>"; 
```

**预期结果：**

```
 "<tasks>"
+ " <exec command="ls">"
+ "  <runif status="failed" />"
+ " </exec>"
+ "</tasks>"; 
```

文件中的原始内容是**ORIGINAL**。

此时有人剪了一个分支并将**ORIGINAL**编辑为**MODIFICATION_2**。（将第一个`<exec>`节点从更改`failed`为`passed`）

在`master`有人将**ORIGINAL**更改为**MODIFICATION_1**时。（删除第一个`<exec>`节点）

将分支合并到 master 时，更改就像**RESULT**（分支中的更改应用于第二个`<exec>`节点而不是第一个被删除的节点！）而不是产生**EXPECTED_RESULT**或导致合并冲突！

这是预期的行为吗？有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:48:10.320

这里的问题是，两个`<exec>`节点在**ORIGINAL**中是相同的。**因此MODIFICATION_1**的删除是不明确的（它可能是第一个或第二个实例），并且合并算法实际上设法应用两个更改而没有任何重叠，因此不会导致合并冲突。

# virtualhost - Wamp windows 上的虚拟主机和子域

> ID：15358226
> 
> 赞同：2
> 
> 时间：2013-03-12T10:05:17.777
> 
> 标签：virtualhost

我想在本地机器上为该主机创建虚拟主机和子域，这样我的本地主机就可以作为一个网站，就像我不需要在 url 栏中写本地主机一样：

```
localhost  ---> mysite.com
           ---> sd1.mysite.com
           ---> sd2.mysite.com 
```

实际上我正在使用 wordpress 插件**WP Subdomains**，它为主要类别创建子域。

```
cat1.localhost
cat2.localhost 
```

但是如果我们尝试访问**cat1.localhost**浏览器错误**Server not found**这肯定是因为我们没有为 localhost创建名为**cat1的子域。**

我谷歌但没有找到完全解决我的问题的解决方案。

我也关注[了 http://www.talkphp.com/general/2170-setup-sub-domain-wamp.html](http://www.talkphp.com/general/2170-setup-sub-domain-wamp.html)

但出现以下错误：

> **内部服务器错误**
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 admin@localhost 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:32:43.913

好，知道了....

我关注了[http://www.talkphp.com/general/2170-setup-sub-domain-wamp.html](http://www.talkphp.com/general/2170-setup-sub-domain-wamp.html)但跳过了第 3 步：

```
Open up: C:\wamp\bin\apache\apache2.2.6\conf\extra\httpd-vhosts.conf. 
```

并在`httpd.conf`评论中`DocumentRoot "E:/wamp/www/"`添加

```
DocumentRoot "E:/wamp/www/wordpress" 
```

它工作。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-01T07:45:29.530

请点击以下链接。我试过了，对我来说工作得很好。

[http://www.axertion.com/tutorials/2012/03/how-to-setup-local-subdomains-using-wampserver/](http://www.axertion.com/tutorials/2012/03/how-to-setup-local-subdomains-using-wampserver/)

# php - 从 Laravel 中的多选表单中获取选定的值

> ID：15358227
> 
> 赞同：12
> 
> 时间：2013-03-12T10:05:18.007
> 
> 标签：php, laravel, laravel-3

要生成默认选中项目的下拉列表，请执行以下操作：

```
echo Form::select('size', array('L' => 'Large', 'M' => 'Medium', 'S' => 'Small'), 'S'); 
```

所以我生成了一个下拉列表，默认情况下选择了多个项目，方式如下：

```
echo Form::select('size', array('L' => 'Large', 'M' => 'Medium', 'S' => 'Small'), array('S', 'M'), array('multiple')); 
```

但是如何获得多个选定的值？

`Input::get('size')`仅返回最后选择的字符串。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-12T10:36:54.950

首先，如果你想默认选择多个项目，你必须给出一个值数组作为第三个参数，而不是一个简单的值。

示例：

```
Form::select('size', array('L' => 'Large', 'M' => 'Medium', 'S' => 'Small'), array('S', 'M'), array('multiple')); 
```

应该显示选择 S 和 M 的选择。

对于第二点，您应该尝试给出一个名称，`size[]`而不是`size`，它可以解决问题（因为您发布的选择不是一个简单的值，它是一个值数组）

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-03-01T11:39:38.640

通常的 Select 语句

```
<select name="select_name" id="select_name" multiple="multiple"> 
```

工作流程是 Laravel 通过名称获取表单元素。要使其工作，请将名称更改为数组。

```
<select name="select_name[]" id="select_name" multiple="multiple"> 
```

这将使 laravel 将 select 的值作为数据数组获取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-20T15:26:59.387

根据[https://laravelcollective.com/docs/5.2/html#drop-down-lists](https://laravelcollective.com/docs/5.2/html#drop-down-lists)

```
Form::select('size[]',['L' => 'Large', 'M' => 'Medium', 'S' => 'Small'], ['S', 'M'], ['multiple' => 'multiple', 'class' => 'form-control']); 
```

顺便说一句，如果您希望能够将此字段用作后端中的数组，请注意下拉列表的名称（ **size[] ）。**

例如，当您想要使用关系作为价值时，事情会变得很棘手

```
models
user =>  common fields
size => id, name, slug  [
                         {id : 1 , name : Large, slug : L}, 
                         {id : 2 , name : Small, slug : S},
                         {id : 3 , name : Medium, slug : M}
                         ] 

user_size => id, user_id, size_id  [
                                     {id :1, user_id:1, size_id:1}
                                     {id :2, user_id:1, size_id:3}
                                   ] 
```

所以`$user->colors`会返回类似的东西

```
laravel collection

[
  USER_SIZE => [  'user_id' => 1 , size_id' => 1 ],
  USER_SIZE => [  'user_id' => 1, 'size_id' => 3 ]
] 
```

* * *

你可以做类似的事情，记住`User Model`有一个`sizes`一对多的关系`SIZE Model`

```
Form::select('size[]',['L' => 'Large', 'M' => 'Medium', 'S' => 'Small'], $user->sizes->pluck('size')->pluck('slug')->toArray(), ['multiple' => 'multiple', 'class' => 'form-control']); 
```

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-19T23:32:07.277

正确的词是

> 采摘

在控制器中：

```
$skills = Skill::pluck('name', 'id');

$selectedSkills = $user->skills()->pluck('skill_user.id'); 
```

在刀片中：

```
Form::select('skills[]', $skills, $selectedSkills, ['class' => 'form-control', 'multiple' => 'multiple']) }} 
```

# java - 从代码中获取 SelectOneMenu 的选中项

> ID：15358230
> 
> 赞同：0
> 
> 时间：2013-03-12T10:05:25.107
> 
> 标签：java, jsf, primefaces

我正在尝试从代码中获取 primefaces SelectOneMenu 选定项目的名称：

这是我的 SelectOneMenu：

```
FacesContext.getCurrentInstance().getViewRoot().findComponent("formMain:somSelect"); 
```

组件已找到。我已经尝试将其转换为 SelectOneMenu，但我不会得到像“getSelectedValue()”这样的方法，该方法写在“客户端 api”的用户手册中。我也试过：

```
FacesContext.getCurrentInstance().getViewRoot().findComponent("formMain:somSelect").getAttributes().get("label"); 
```

但这会返回 NPE。

```
<p:selectOneMenu id="somSelect" value="#{userManagerBean.somValue}" valueChangeListener="#{userManagerBean.somListener}" styleClass="selecters">
<f:selectItems value="#{userSelectBean.userList}" />
</p:selectOneMenu> 
```

用户管理器Bean.java

```
@ManagedBean
@RequestScoped
public class UserManagerBean {

    private String somValue;
    private String selectedUser;
    private List<User> userData;    
    private List<User> users;

    public UserManagerBean() {  

    }

    public String getSomValue(){
        return somValue;        
    }

    public void setSomValue(String somValue){
        this.somValue = somValue;
    }

    // Getter for Table Content
    public List<User> getUserData() {
        return userData;
    } 
```

有任何想法吗？

**€：问题是如果我调用方法和ajax更新，则仅在getter中返回所选项目：**

```
<p:ajax update="panelMain" listener="#{userManagerBean.changeEvent}" /> 
```

但是我在页面加载时没有得到正确的选定项目（ item = null ）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:35:05.947

当您使用 bean 列表来填充`f:selectItems`时，您应该添加转换器或提供`itemValue`属性。在您的情况下，为 value`String`提供了您的bean`itemValue`的一些`String`标识符：`User`

```
<f:selectItems value="#{userSelectBean.userList}" var="u" itemValue="#{u.code}" itemLabel="#{u.name}"/> 
```

更改属性`code`以及`name`您在`User`bean 中拥有的属性。是`itemValue`指`String`作为你在backing bean中的价值的支持`String`。

# java - 额外的 & 设置请求，从而得到错误的响应

> ID：15358231
> 
> 赞同：0
> 
> 时间：2013-03-12T10:05:26.370
> 
> 标签：java, javascript, jakarta-ee, ascii

每当我在我的应用程序中搜索像 tai'an City 这样带有撇号“'”的东西时，请求就会发送到数据库团队，它的格式如下： `tai&amp;amp;#x27;an city`. 它正在添加一个额外的 & 符号，它使请求失败（ ' --> &#x27; 的 ASCII 值）。例如，如果手动删除多余的 &`tai&amp;#x27;an city`号，则成功处理请求。

如果我手动设置请求或尝试替换 &#x27; 与“'”类似

```
if(paramValue.contains("&#x27;")){
                paramValue = paramValue.replace("&#x27;", "'");
} 
```

但我知道这不是正确的做法。我想找到这个额外的＆符号的起源。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:09:02.433

您可能在某种形式的选项或 URL 中有一个撇号，浏览器将其转换为稍后发送到 Web 应用程序的实体。尝试：

```
<option value="tai%27an City">tai'an City</option>

<a href="www.example.com/foo?bar=tai%27an City"> 
```

如果数据最初存储`&#x27;`在数据库中，则可能会在将其传递给网页中的用户时对其进行重新编码（即`&`in`&#x27;`正在重新编码为`&amp;`）。例如，如果您使用 JSP，`c:out`除非您指定`<c:out escapeXml="false">`. 如果不知道您正在执行哪些步骤，我无法猜测更多，但我希望这可以指导您解决问题。

# excel - 使用 ActiveX 按钮从其他工作表调用数据并计算其平均值

> ID：15358234
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:05:35.340
> 
> 标签：excel, vba

我在 sheet2 中有大量数据。例如 B4=2、B5=4 和 C4=6、C5=4。我想使用 ActiveX 按钮从 sheet2 调用数据并通过单击 ActiveX 按钮计算其在 sheet1 中的平均值。你能帮助如何在这个问题中使用 VBA 代码吗？谢谢

此代码有数据与帖子无关，但思路相同

`Private Sub CommandButton1_Click()`

`Dim AVG As Integer`

`ThisWorkbook.Worksheets("Sheet2").Activate`

`Worksheets("Sheet1").Range("A3").Value = Application.WorksheetFunction.average(Range("A1:A2"))`

`AVG = Application.WorksheetFunction.average(Range("A1:A2"))`

`MsgBox Worksheets("Sheet1").Range("A3").Value`

`End Sub`

我想创建一个按钮，如果我输入一个名称，例如 Jan13，sheet1 中的按钮将根据工作表 2 上的范围 B3:B10 计算其平均值。msgBox 将得出结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:35:14.173

试试这个它应该可以解决你的问题。

```
Public Sub Average()

Dim AVG As String
ThisWorkbook.Worksheets("Sheet2").Activate
' Range here to calculate average of is A1 to A20
AVG = Application.Average(Range("A1:A20"))
' This is where the result of the average be displayed
Worksheets("Sheet1").Cells(1, 2).Value = AVG 

End Sub 
```

此外，您不需要 ActiveX 按钮。只需使用普通按钮并将此宏分配给它。

# android - 应用程序应该从数据库加载内容，但不

> ID：15358235
> 
> 赞同：0
> 
> 时间：2013-03-12T10:05:41.130
> 
> 标签：android, database, assets

我有一个非常烦人的问题，我似乎无法找到解决它的方法。我制作了第一个应用程序（一个测试版，只是为了测试我的方法），我在其中定义了所有内容，因此我的应用程序可以与数据库通信。它工作得很好。

我在相同的模型上启动了我的新应用程序，保留了相同的类和所有内容，但它不再工作了。例如，我应该打开一个列表视图，它必须显示数据库中的一些内容：我可以打开列表视图（这样做时我的应用程序没有崩溃）但它只是空的。

我的 beta 应用程序的不同之处之一是数据库的大小：它现在是 4 mo 而不是几个 ko。我已经阅读了一些关于存储在资产文件中的数据库大小的内容，但是以前的一个版本可以让我的应用程序使用同一个数据库。
此外，我的 logcat 并没有告诉我任何事情：我只是让我的应用程序运行良好，但没有显示任何它应该显示的东西。

这是我的代码（如果可以的话，我觉得我的代码与我通常在互联网上阅读的包含大量捕获/尝试/异常/各种类等的代码相比非常轻巧，所以也许它只是严格要求的代码，没有额外的但它适用于我的测试版）：

**A/ DatabaseAdapter**（我从数据库中获取数据的方法是在最后定义的，叫做findPoiInTable）：

```
public class DatabaseAdapter {

public static final String DATABASE_TABLE = "tblpoisurvey";

public static final String KEY_ROWID = "_id";
public static final String COL_NAME = "name";
public static final String COL_CAT1 = "cat1";
public static final String COL_CAT2 = "cat2";
public static final String COL_CAT3 = "cat3";
public static final String COL_SUBCAT = "subcat";
public static final String COL_STREET = "street";

private Context myContext;
private SQLiteDatabase myDatabase;
private DatabaseHelper dbHelper;
private Cursor c;

// Constructor
public DatabaseAdapter(Context context) {
    this.myContext = context;
}

public DatabaseAdapter open() throws SQLException {
    dbHelper = new DatabaseHelper(myContext);
    try {
        dbHelper.createDatabase();
    } catch (IOException e) {
        e.printStackTrace();
    }
    myDatabase = dbHelper.getReadableDatabase();
    return this;
}

public void close() {
    if (c != null) {
        c.close();
    }
    try {
        dbHelper.close();
        myDatabase.close();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public Cursor findPoiInTable(String inInterval) {
    String where = COL_CAT1 + " IN " + inInterval + " OR " + COL_CAT2
            + " IN " + inInterval + " OR " + COL_CAT3 + " IN " + inInterval;

    Cursor c = myDatabase.query(DATABASE_TABLE, new String[] { KEY_ROWID,
            COL_NAME, COL_STREET }, where, null, null, null, null);
    return c;
} } 
```

**B/我的 ResultListViewActivity**，调用该方法的人，通过 getExtra 从另一个活动获取此方法的输入，并在列表视图中显示结果。

```
public class ResultListViewActivity extends Base_Activity {

private SimpleCursorAdapter cursorAdapter;
private DatabaseAdapter dbHelper;
ListView listView;
TextView poititle; 
private static String TAG = ResultListViewActivity.class.getSimpleName();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_result_list_view);

    poititle = (TextView) findViewById(R.id.poititle);
    dbHelper = new DatabaseAdapter(this);
    dbHelper.open();

    displayListView();
}

private void displayListView() {

    Bundle bundle = getIntent().getExtras();
    String title = bundle.getString("title", "Choose here :");  
    String inInterval = bundle.getString("inInterval");

    poititle.setText(title); // FYI: the title is displayed properly so the problem is not from the putExtra / getExtra

    Cursor c = dbHelper.findPoiInTable(inInterval);
    String[] columns = new String[] {DatabaseAdapter.COL_NAME,
            DatabaseAdapter.COL_STREET };

    int[] to = new int[] {R.id.name, R.id.street};

    cursorAdapter = new SimpleCursorAdapter(this, R.layout.poi_info, c, columns, to, 0);
    ListView listView = (ListView) findViewById(R.id.poilistview);
    listView.setAdapter(cursorAdapter);         
    }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getSupportMenuInflater().inflate(R.menu.main, menu);
    return true;
}  } 
```

**C/**我不认为这会有用，但如果是我的**DatabaseHelper 类**：

```
public class DatabaseHelper extends SQLiteOpenHelper {

private static String DB_NAME = "POIfinal";
private static int DB_VERSION = 1;
private static String DB_PATH = "/data/data/com.example.asiatypeapplicationbeta/databases/";
private static String TAG = DatabaseHelper.class.getSimpleName();

private SQLiteDatabase myDatabase;
private Context myContext;

public DatabaseHelper(Context context){
    super(context, DB_NAME, null, DB_VERSION);
    this.myContext = context ;
}

public void createDatabase() throws IOException {
    boolean dbExist = checkDatabase();
    if (!dbExist) {

        // By calling this method and empty database will be created into
        // the default system path
        // of your application so we are gonna be able to overwrite that
        // database with our database.
        this.getReadableDatabase();
        try {
            copyDatabase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

/**
 * Check if the database already exists to avoid re-copying the file each
 * time you open the application.
 * 
 * @return true if it exists, false if it doesn't
 */
private boolean checkDatabase() {
    SQLiteDatabase checkDB = null;
    try {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
        final String message = e.getMessage();
        return false;
    }
    checkDB.close();
    return checkDB != null ? true : false;
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transfering bytestream.
 * */

private void copyDatabase() throws IOException {
    // open the LOCAL DATABASE as the INPUT stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);
    // path to the just created empty db
    String outfilename = DB_PATH + DB_NAME;
    // open the EMPTY DATABASE as the OUTPUT stream
    OutputStream myOutput = new FileOutputStream(outfilename);

    // transfer bytes from the INPUTfile to the OUTPUTfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer)) > 0) {
        myOutput.write(buffer, 0, length);
    }

    // close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
}

public void openDatabase() throws SQLException {
    String myPath = DB_PATH + DB_NAME;
    try {
        myDatabase = SQLiteDatabase.openDatabase(myPath, null,
                SQLiteDatabase.OPEN_READONLY);
    } catch (SQLiteException e) {
        final String message = e.getMessage();
        if (message == null) {
            throw e;
        }
        if (!message.contains("attempt to write a readonly database")) {
            throw e;
        }
    }
}

@Override
public synchronized void close() throws SQLException {

    if (myDatabase != null)
        try {
            myDatabase.close();
            super.close();
        } catch (SQLException e) {

        }

}
@Override
public void onCreate(SQLiteDatabase arg0) {
    // TODO Auto-generated method stub

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
       Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
               + newVersion + ", which will destroy all old data");
       db.execSQL("DROP TABLE IF EXISTS notes");
       onCreate(db);
}  } 
```

编辑：带有错误消息的 logcat 图片，仅在我第一次运行我的应用程序时（例如在卸载它之后）。
![在此处输入图像描述](../Images/8812cc502c12e67241c94080b65b0bf5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:33:19.200

看到您的数据库助手类，我认为您正在尝试从资产文件夹中复制数据库。

因此，在通过 dbHelper.open() 打开数据库之前；尝试首先将其复制到您的内部路径。Databasehelper 类中的方法 createdatabase 会将其复制到内部位置...然后尝试打开它。现在可能发生的是您的 open() 方法无法在给定路径找到数据库。

如果有的话，也尝试传递带有扩展名的数据库名称，例如“somedatabase.sqlite”。

# jquery - jquery preventdefault 警报未显示在 ascx 中

> ID：15358236
> 
> 赞同：1
> 
> 时间：2013-03-12T10:05:45.287
> 
> 标签：jquery, asp.net, alert, ascx, preventdefault

我有以下代码，我是 ascx，我尝试阻止按钮执行回发，然后发出警报以验证（应该稍后调用处理程序，但现在警报会执行），回发被阻止，但是警报不显示，如果我删除`$("#pollvote")`....并且只有警报，它会在页面加载时显示正常。

```
<script type="text/javascript">
        $(document).ready(function () {
            $("#pollVoteBtn").click(function (event) {
                event.preventDefault();
                alert("Clicked");
            });

        });
</script>

<asp:Label ID="pollQuestion" runat="server" /><br />
<asp:RadioButtonList ID="pollRbt" runat="server" /><br />
<asp:Button ID="pollVoteBtn" runat="server" Text="Stem"/>
<asp:Label ID="pollTestLabel" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:06:56.100

您没有按钮的[ClientIDMode="static"](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)并且按钮的 id 将在客户端更改，因此使用 ClientID 绑定 javascript 事件。

```
$("#<%= pollVoteBtn.ClientID %>").click(function (event) {
     event.preventDefault();
     alert("Clicked");
}); 
```

# c - 结构的两个malloc定义之间的区别

> ID：15358237
> 
> 赞同：0
> 
> 时间：2013-03-12T10:05:48.217
> 
> 标签：c, compiler-construction, casting, malloc

我想知道这之间是否有真正的区别：

```
c = (struct_t *) malloc(sizeof(struct_t)); 
```

和这个

```
c = malloc(sizeof(struct_t *)); 
```

除了避免强制转换之外，编译器在第二种形式方面是否利用了第一种形式？或者这两种方式完全一样，只是一个*“审美”*问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T10:06:59.773

第一个分配`sizeof(struct_t)`字节，第二`sizeof(struct_t*)`个字节。

除此之外`malloc`，无论您是否投射结果，都没有什么区别。转换结果使得代码可以被 C++ 编译器接受，但它可以隐藏不包含的错误`stdlib.h`，因此人们普遍倾向于不在 C 中转换结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T10:07:23.510

**两者完全不同。**第一个分配结构的*实例*，而第二个分配指向结构的*指针*。

通常，它们甚至不会分配相同数量的字节。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T10:08:24.133

不，它们不一样。后者为指向结构的指针分配 4 或 8 个字节的空间，第一个为它自己的结构分配足够的空间。

当 sizeof(struct_t) 足够小，并且当 malloc 分配的实际比请求的多时，用户可能看不到差异。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T14:28:55.867

两种形式不同。它们都分配内存，但数量不同。一般规则如下：分配类型 T 时，malloc 的结果应强制转换为 T*。

```
void sample1()
{
    struct pollfd *pfd = (struct pollfd*)malloc(sizeof(struct pollfd));
    // pfd is points to a memory with a size of struct pollfd
    ...
    free(pfd);
}

void sample2()
{
    struct pollfd *pfd = (struct pollfd*)malloc(sizeof(*pfd));
    // same as above, but uses variable type instead
    free(pfd);
} 
```

如果在 malloc 参数中指定了不正确的类型，通常会导致缓冲区溢出问题：

```
void sample3()
{
    struct x *px= (struct x*)malloc(sizeof(struct x*));
    x->field = 5; //<< error, as allocated only 4 or 8 bytes depending on pointer size
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T12:06:25.447

两者是不同的。

通常 malloc 返回 (void*)。因此，您想将 void* 类型转换为 (struct_t*)。

# c# - 每 10 秒 Timer Tick 事件想要在方法未调用时调用

> ID：15358238
> 
> 赞同：-2
> 
> 时间：2013-03-12T10:05:53.787
> 
> 标签：c#, timer

在我的代码中，我有一个方法`MyMethod()`会定期从外部调用（通常约 6 秒）。

但在某些情况下，我的方法将不再被调用（例如，用户取消了进度）并且我没有可能检查此事件。

由于这个事实，我想启动一个 10 秒的计时器，当我的方法在这个时间范围内**没有被调用时，它将被触发。**

我如何以及何时可以启动此计时器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:16:55.013

*   实例化一个持续时间为 10 秒的新计时器。
*   在`MyMethod()`简单地调用`myTimer.Stop()`和`myTimer.Start()`。

每次你点击你的方法时，计时器将被重置，如果在十秒内没有再次调用该方法，你的计时器将被触发。

# javascript - 占位符属性在 Internet Explorer 中不起作用

> ID：15358240
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:06:03.040
> 
> 标签：javascript, internet-explorer, placeholder

使用javascript和jquery的组合解决占位符在Internet Explorer中不起作用的问题如下。

我必须重申，在 Internet Explorer 中无法使用占位符问题的解决方案如下，使用 javascript 和 jquery 的组合。

```
 //DETERMINE BROWSER TYPE
    var browser='';
    jQuery.each(jQuery.browser, function(i, val) {
        if(i=='msie')browser=i;
    });

    if(browser=='msie'){
        var password = '<input type="text" value="Password" placeholder="Password" name="q22" class="form-gen-element" id="ie-password-holder" />';

        $(password)
        .insertAfter($('input[name="q2"]'));

        $('input[name="q2"]')
        .hide();

        //INTERNET EXPLORER PLACEHOLDER FIX
        $('#login-content')
        .find('.form-gen-element')
        .focus(function(){
            if($(this).val()==$(this).attr('placeholder')){
                //Move cursor position
                if ($(this).get(0).setSelectionRange) {
                  $(this).get(0).setSelectionRange(0, 0);
                } else if ($(this).get(0).createTextRange) {
                  var range = $(this).get(0).createTextRange();
                  range.collapse(true);
                  range.moveEnd('character', 0);
                  range.moveStart('character', 0);
                  range.select();
                }
            }
        })
        .blur(function(){
            if($(this).val()==''){
                $(this).val($(this).attr('placeholder'));

                if($(this).attr('name')=='q2')
                    $(this).attr('type','text');
            }
        })
        .keydown(function(e){
            if($(this).val()==$(this).attr('placeholder')){
                if((e.keyCode > 47 && e.keyCode < 91) || e.keyCode==109 || e.keyCode==110 || e.keyCode==190 || e.keyCode==110){
                    var t = $(this).val().split($(this).attr('placeholder'));
                    $(this).val(t[0]);

                    //Handle password attribute change
                    if($(this).attr('name')=='q22'){
                        $(this).attr('type','password');
                    }
                }
            }
        });

    }else{
        //OTHER BROWSERS DEFAULT FUNCTIONALITY
        $('#login-content')
        .find('.form-gen-element')
        .val('');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:11:26.313

查看以下有关 Internet Explorer 的 SO
[输入占位符的有用问题](https://stackoverflow.com/questions/5522164/input-placeholders-for-internet-explorer)

# c# - c#.net中将数据源绑定到gridview后删除上传的Excel文件

> ID：15358241
> 
> 赞同：1
> 
> 时间：2013-03-12T10:06:07.307
> 
> 标签：c#, asp.net, .net, excel, gridview

我想在完成读取并将数据源绑定到网格视图后删除 excel 和 csv 文件。但是在我成功删除文件后，我的网格视图有空数据...

```
DataTable dt = GetCsvData(_path, _filename);
gvList.DataSource = dt;
gvList.DataBind();      // before delete, gridview has data..
File.Delete(_path+_filename);    // after delete, gridview has empty data 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:23:24.307

删除文件与您的网格视图为空这一事实没有任何关系。显然，调用`GetCsvData`将整个文件加载到 a`DataTable`中，因此删除文件一定没有害处。

调试代码，并确保在调用`GetCsvData`包含`dt`数据之后。

如果`dt`包含数据，您可能在错误的时间执行数据绑定。把代码放进去`Page_Load`。如果您在页面生命周期的后期进行绑定，则可能不会呈现数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:43:16.213

```
gvList.DataSource = dt.Copy(); 
```

# dynamics-crm-2011 - 如果不是全球性的，如何处理 MS CRM 2011 中的选项列表

> ID：15358242
> 
> 赞同：0
> 
> 时间：2013-03-12T10:06:14.630
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

我正在尝试处理 MS CRM 2011 中的选项列表，但它无法正常工作。实际上，我在选择列表中有 5 个参数，但这段代码只有 2 个。

```
function InstOwnerPickListOnLoadStage()
{
   lSub = Xrm.Page.getControl("new_status");
   lSub.originalPicklistValues = lSub.getAttribute().getOptions();

   lKAZNACHOptionList = new Array();
   lRISKIPolOptionList = new Array();

   lKAZNACHOptionList .push(0,1);
   lRISKIPolOptionList .push(2,3);

   document.FillPicklist = function (iDesiredOptions)
   {
       for (var i=0; i< lSub.originalPicklistValues.length; i++) 
       {
           for (var j=0; j< iDesiredOptions.length; j++) 
           {
               if(iDesiredOptions[j] == i)
               {
                  lSub.addOption( lSub.originalPicklistValues[i]);
                  break;
               }
           }  
       }
   }   

   var optionset = Xrm.Page.ui.controls.get("new_status"); 
   optionset.clearOptions(); 

   document.FillPicklist(lKAZNACHOptionList );

   //InstOwnerPickListOnChangeStage(null); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:06:09.600

您的代码仅返回两项，因为您说您只需要 2 即数组的长度，`lKAZNACHOptionList`并且您只需要索引 0 和 1。为了获取更多项，您必须操作数组`lKAZNACHOptionList`并插入更多项。

# ruby-on-rails-3 - Rails - 速度和时间

> ID：15358243
> 
> 赞同：0
> 
> 时间：2013-03-12T10:06:16.030
> 
> 标签：ruby-on-rails-3, model-view-controller, highcharts

我对 MVC 之间的“逻辑速度”有疑问。
假设在模型、视图和控制器中具有相同的代码，如下所示。

1）“编译”逻辑和查询的速度在所有三个（MVC）中都相同吗？

伪代码

```
x = model.where(:a > 3, b < 9).a.first
y = model.sum(:a)
z = (x / y) * 2310.0
Date.today - 5 
```

这是一个“愚蠢”的伪代码，但我想知道我的应用程序最常使用的代码行的性能（调用`where`查询、调用`sum`（聚合）查询、做一些数学运算、玩日期）

问题是我的页面加载速度有点慢。我已经替换了所有管理查询`Models`并添加索引的内容。也许添加缓存可以解决一点问题（但我使用我认为无法缓存的 Highcharts）。

2）我怎样才能找到代码瓶颈（减慢页面加载）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:21:47.790

您可以使用一些已知的工具来分析您的控制器/操作/视图/模型。

1.  NewRelic（以分布式方式跟踪您的时间的好代理..我更喜欢这个）

2.  Librato（当控制器/动作被击中时，您可以将指标传递给它的代理，它可以在一段时间内为您提供结果）

3.  Rails 控制台输出在控制器、视图和活动记录中花费的时间分布。您绝对可以在这里跟踪一些好东西。（请参阅随附的屏幕截图）。

![在此处输入图像描述](../Images/a5d34e1de70946d97d1469a20b0d28e1.png)

# javascript - Mongoose ODM、BreezeJS - 一种模型定义

> ID：15358248
> 
> 赞同：2
> 
> 时间：2013-03-12T10:06:42.710
> 
> 标签：javascript, mongoose, breeze

是否有任何“准备好”的解决方案如何将猫鼬模型导出到客户端应用程序？如果我想象完美的世界，猫鼬模型会让我定义客户端需要哪些实体的属性和方法，并为客户端生成所需的类，这样我就可以轻松地将它们与 BreezeJS 一起使用。

任何想法？还是将它结合在一起是通往地狱的道路？:))

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T17:16:38.493

更新 - 从**v 1.2.7**开始 - 我们提供了两个工具来帮助完成这样的任务。

*   Breeze 元数据格式已记录在案，任何符合此格式并从微风元数据调用返回的 json 对象都将用于配置微风的客户端元数据。
*   JsonResultsAdapter 可用于重塑或协助解释任何 Web 服务调用的结果，以便调用返回的任何结果都可以成为 Breeze 实体。

--- 上一篇

请继续关注，我们将在接下来的几天内发布新版本的微风，支持可插入的 json 适配器，允许使用任何 Web 服务。而且由于可以为任意模型定义微风元数据，因此您应该能够非常轻松地使用您的 mongoose 模型。当然，魔鬼在细节中。

# android - 如何使用设备定义创建 avd？

> ID：15358252
> 
> 赞同：0
> 
> 时间：2013-03-12T10:06:53.057
> 
> 标签：android, avd

我想*从控制台*为 Google Nexus 创建 android 虚拟设备。现在我正在使用命令

```
android -s create avd -n %avd_name% -t 1 -p %work_dir%\devices\%avd_name% -f -s 480x800 
```

结果与我在 sdk 管理器中创建的结果不同。我想知道，如何从控制台创建基于设备定义“Galaxy Nexus”的*avd*。

![在此处输入图像描述](../Images/5ea044ff00089c8d7b4b6914c8dbb007.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-11-02T15:02:54.070

您可以使用 avdmanager 列出系统上可用的所有设备定义

```
$ avdmanager list devices 
```

然后您可以使用设备索引或 id 来创建 avd。

例如，以下命令使用基于 google nexus 9 定义的 API 级别 25 的 x86 系统映像创建一个名为“nexus9”的新 avd

```
avdmanager create avd -n google9 -k "system-images;android-25;google_apis;x86" -d "Nexus 9" 
```

*   **-n** avd 名称
*   **-k** sdk id
*   **-d**设备定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:19:17.867

使用以下命令

```
 android create avd -n <name> -t <targetID> --skin  720 x 1,280 

   adb emu window scale 0.19 
```

这可能会有所帮助......试试这个

# javascript - 在传单中创建具有不同颜色的折线

> ID：15358253
> 
> 赞同：1
> 
> 时间：2013-03-12T10:06:55.710
> 
> 标签：javascript, leaflet

我有一个创建折线并将该折线添加到地图的功能

```
 function makeRoute(e)
    {
        if(pointsSelection.length > 0)
        {
            pointsSelection.push(e.target.getLatLng());
            var firstpolyline = new L.Polyline(pointsSelection, {
            color: 'blue',
            weight: 5,
            smoothFactor: 1
            });

            firstpolyline.addTo(map);

            pointsArrayCollection.push(pointsSelection);
            polyArrayCollection.push(firstpolyline);

            selection = [];
            pointsSelection = [];
        }
        else
        {
            alert("Please select more than one point");
        }
    } 
```

我的问题是它每次都添加相同颜色的线条。

我想每次都添加不同颜色的折线。

那么如何动态更改折线的颜色。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T12:23:05.887

为了改变颜色，我使用随机颜色生成器功能。

使用 get_random_color() 代替“蓝色”：

```
function get_random_color() 
{
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) 
    {
       color += letters[Math.round(Math.random() * 15)];
    }
return color;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:01:58.633

扩展[viabhav shah](https://stackoverflow.com/users/1498159/vaibhav-shah)的答案（这是正确的），您的整体解决方案将是：

```
function makeRoute(e) {

    if(pointsSelection.length > 0) {
        pointsSelection.push(e.target.getLatLng());
        var firstpolyline = new L.Polyline(pointsSelection, {
        color: get_random_color(),
        weight: 5,
        smoothFactor: 1
        });

        firstpolyline.addTo(map);

        pointsArrayCollection.push(pointsSelection);
        polyArrayCollection.push(firstpolyline);

        selection = [];
        pointsSelection = [];

    } else {
        alert("Please select more than one point");
    }

    // Function to create a random color
    function get_random_color() {
        var letters = '0123456789ABCDEF'.split('');
        var color = '#';
        for (var i = 0; i < 6; i++ ) {
            color += letters[Math.round(Math.random() * 15)];
        } 
        return color;
    }
} 
```

Vaibhav Shah 有正确的答案，所以投票支持他的解决方案。

# javascript - 在画布上重绘图像

> ID：15358255
> 
> 赞同：0
> 
> 时间：2013-03-12T10:06:56.600
> 
> 标签：javascript, jquery, html, canvas

我需要在一张画布上放几张图片。我在使用 clear() 函数时遇到问题；当我需要在画布上拖动图像时使用它。

问题是我们的 Canvas 只出现在最后一张图片上。我尝试使用 context.save() 和 context.restore() 但在我的情况下它没有用。

```
 switch(i)
    {
    case 0:
    challengerImg = new Image();
    challengerImg.onload = function(){
        drawImage(this,x,y,i);
    };
    challengerImg.src = "<?php echo $base_url; ?>/themes/bartik/images/sheep.png";
    break;

    case 1:
    tshirt = new Image();
    tshirt.onload = function(){
        drawImage(this,x,y,i);
    };
    tshirt.src = "<?php echo $base_url; ?>/themes/bartik/images/tshirt.png";
    break;
    } 
```

以及在画布上绘制的功能：

```
 function drawImage(challengerImg,x,y,i){
            console.log("Function drawImage start");
            var events = new Events("layer0");
            var canvas = events.getCanvas();
            var context = events.getContext();
            var rectX = x;
            var rectY = y;

            var draggingRect = false;
            var draggingRectOffsetX = 0;
            var draggingRectOffsetY = 0;

             events.setStage(function(){
                var mousePos = this.getMousePos();

                if (draggingRect) {
                    rectX = mousePos.x - draggingRectOffsetX;
                    rectY = mousePos.y - draggingRectOffsetY;
                }

                this.clear(); //Here is trouble
                this.beginRegion();

                context.drawImage(challengerImg, rectX, rectY, challengerImg.width, challengerImg.height);

                // draw rectangular region for image
                context.beginPath();
                context.rect(rectX, rectY, challengerImg.width, challengerImg.height);
                context.closePath();

                this.addRegionEventListener("mousedown", function(){
                    draggingRect = true;
                    var mousePos = events.getMousePos();
                    draggingRectOffsetX = mousePos.x - rectX;
                    draggingRectOffsetY = mousePos.y - rectY;

                });
                this.addRegionEventListener("mouseup", function(){
                    draggingRect = false;
                });
                this.addRegionEventListener("mouseover", function(){
                    document.body.style.cursor = "pointer";
                });
                this.addRegionEventListener("mouseout", function(){
                    document.body.style.cursor = "default";
                });

                this.closeRegion();
            });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:32:45.110

context.save 和 context.restore 仅适用于上下文的状态（转换，globalAlpha，...），但不适用于内部呈现的内容。

当您清除上下文时，它会使其为空。

你要做的是：

*   捕捉鼠标事件并改变位置变量
*   清除画布
*   在新位置重绘所有图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T21:49:32.497

save(), restore() 根本不处理位图数据:)。

要拖动东西，基本上你需要一个不包含你正在绘制的元素的屏幕外画布，并且在每次更新后绘制屏幕外画布加上被拖动的元素。

使用已经完成的库可能更简单，大多数都这样做，例如[http://www.html5canvastutorials.com/labs/html5-canvas-interactive-scatter-plot-with-20000-nodes-using-kineticjs/](http://www.html5canvastutorials.com/labs/html5-canvas-interactive-scatter-plot-with-20000-nodes-using-kineticjs/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-14T06:32:39.467

画布是一个平面对象 - 一旦您在其上绘制图像，图像将不再具有上下文，因为它呈现为画布的一部分。您可以创建一个矩形对象数组及其坐标来跟踪画布上已有的内容，或者测试鼠标位置的背景颜色以确定是否有图像。然后，您可以通过清除画布并重新绘制所有其他项目来删除事件发生的项目。

希望这可以帮助！

# sql - 如何在 pl/sql 脚本中调用表值？

> ID：15358257
> 
> 赞同：0
> 
> 时间：2013-03-12T10:07:01.193
> 
> 标签：sql, oracle, plsql

如何在 pl/sql 脚本中调用？

```
SELECT d.device_id, 
       d.state_id, 
       ds.distributor 
INTO   a1, b1, c1 
FROM   device_t d, 
       device_smartcard_t ds 
WHERE  d.poid_id0 = ds.obj_id0 
       AND d.device_id = e1.device_id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:21:04.543

你的问题很模糊，但如果你想在 PL/SQL 块中访问这些值，你可以这样做：

```
declare
  a1 device_t.device_id%type;
  b1 device_t.state_id%type;
  c1 device_smartcard_t.distributor%type;
begin
   select d.device_id, d.state_id, ds.distributor
   into   a1,          b1,         c1
   from   device_t d
   join   device_smartcard_t ds 
   on     d.poid_id0  = ds.obj_id0 
   and    d.device_id = E1.device_id; -- (What's E1?)

   -- Do what you like with a1, b1 and c1
end;
/ 
```

我冒昧地将您的交叉连接更改为内部连接。请注意，如果您的查询返回多个或没有结果，Oracle 将抛出异常；您可以使用一个`exception`子句来处理这个问题，捕获`TOO_MANY_ROWS`and`NO_DATA_FOUND`异常。

# sql - 无法将图像重新插入 SQL？

> ID：15358259
> 
> 赞同：1
> 
> 时间：2013-03-12T10:07:09.040
> 
> 标签：sql, vb.net

我将图像放入 sql 数据表并读取并成功显示为 win 表单。但是我无法从 vb 数据集中的数据表中插入该图片（我从数据库中获取）。数据表中图像的数据类型是字节（）...我认为问题出在这一行：

```
adoCommandInsertElement.Parameters(4).Value = dataset.UgovorUgovorElement_Select.Rows(i).Item(5) 
```

`adoCommandInsertElement.Parameters(4).Value`是`image`和`Me.dataset.UgovorUgovorElement_Select.Rows(i).Item(5)`是`byte()`

错误是：`failed to convert parameter value from a byte[] to a decimal. system.invalidcastexception , object must implement IConvertible`

# mysql - 浏览 MySQL 中的嵌套结构

> ID：15358260
> 
> 赞同：3
> 
> 时间：2013-03-12T10:07:16.127
> 
> 标签：mysql

我的问题有点复杂，所以我将使用图像来解释它：实际上，我正在尝试使用具有下表的 MySQL 数据库为 GUI 提供一种嵌套结构：![在此处输入图像描述](../Images/21a3b33f9661880987771b8e11e9c859.png)

该表可以显示为： ![在此处输入图像描述](../Images/d64ec90ec1494147dc282f466883d553.png)

我想要做的是只显示元素，至少有一个绿色元素作为子元素（可能不是直接子元素），如下所示： ![在此处输入图像描述](../Images/4b503611311188ecbe149cf1bec0c1e3.png) 我知道 MySQL 中的递归查询不存在，并且MySQL 不是分层的，即使它可以按照[此处](http://www.artfulsoftware.com/mysqlbook/sampler/mysqled1ch20.html)的说明进行模拟。有人有什么主意吗？（级别数不固定）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:45:24.933

除非您的技术受到极大限制，否则请使用数据库原生技术以外的其他技术来完成此类应用程序的算法任务。

您的特殊情况听起来像[Nested Set Model](http://en.wikipedia.org/wiki/Nested_set_model)，请参阅有关 SO 的更多示例和讨论：

*   [如何在嵌套集合模型中插入数据（MySQL）；](https://stackoverflow.com/questions/11373061/how-to-insert-data-in-the-nested-set-modelmysql)
*   [使用嵌套集模型进行 SQL 查询和 PHP 操作](https://stackoverflow.com/questions/9184598/sql-query-and-php-manipulation-with-nested-set-model)
*   [嵌套集模型 PHP 库](https://stackoverflow.com/questions/3982067/nested-set-model-php-library)

# c# - 在 C# 中从 Mac 地址获取 IP

> ID：15358261
> 
> 赞同：1
> 
> 时间：2013-03-12T10:07:16.270
> 
> 标签：c#, ip-address, mac-address

有没有办法获取与特定 MAC 地址对应的 IP（或主机名）？

到目前为止，我发现是从 IP 获取主机名，反之亦然，使用`System.Net.Dns`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-10-13T14:18:28.070

你可以使用这个类

```
public class IPMacMapper
{
    private static List<IPAndMac> list;

    private static StreamReader ExecuteCommandLine(String file, String arguments = "")
    {
        ProcessStartInfo startInfo = new ProcessStartInfo();
        startInfo.CreateNoWindow = true;
        startInfo.WindowStyle = ProcessWindowStyle.Hidden;
        startInfo.UseShellExecute = false;
        startInfo.RedirectStandardOutput = true;
        startInfo.FileName = file;
        startInfo.Arguments = arguments;

        Process process = Process.Start(startInfo);

        return process.StandardOutput;
    }

    private static void InitializeGetIPsAndMac()
    {
        if (list != null)
            return;

        var arpStream = ExecuteCommandLine("arp", "-a");
        List<string> result = new List<string>();
        while (!arpStream.EndOfStream)
        {
            var line = arpStream.ReadLine().Trim();
            result.Add(line);
        }

        list = result.Where(x => !string.IsNullOrEmpty(x) && (x.Contains("dynamic") || x.Contains("static")))
            .Select(x =>
            {
                string[] parts = x.Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries);
                return new IPAndMac { IP = parts[0].Trim(), MAC = parts[1].Trim() };
            }).ToList();
    }

    public static string FindIPFromMacAddress(string macAddress)
    {
        InitializeGetIPsAndMac();
        IPAndMac item = list.SingleOrDefault(x => x.MAC == macAddress);
        if (item == null)
            return null;
        return item.IP;
    }

    public static string FindMacFromIPAddress(string ip)
    {
        InitializeGetIPsAndMac();
        IPAndMac item = list.SingleOrDefault(x => x.IP == ip);
        if (item == null)
            return null;
        return item.MAC;
    }

    private class IPAndMac
    {
        public string IP { get; set; }
        public string MAC { get; set; }
    }
} 
```

并将其用作

```
string ipAddress = IPMacMapper.FindIPFromMacAddress("some-mac-address");
string macAddress = IPMacMapper.FindMacFromIPAddress("some-ip-address"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:12:30.040

您正在寻找的是阅读计算机的[ARP](https://en.wikipedia.org/wiki/Address_Resolution_Protocol)列表。
然后解析它以找到请求的 MAC 地址...请注意，`arp -a`它同时具有 IP 和 MAC，因此您只需要匹配请求的地址即可。

这是如何在 C# 中完成[的示例](http://www.mostthingsweb.com/2011/11/reading-arp-entries-with-c/)

# android - 无法删除我自己的自定义帐户

> ID：15358271
> 
> 赞同：4
> 
> 时间：2013-03-12T10:07:33.383
> 
> 标签：android, accountmanager

我已经用谷歌搜索了这个问题，但我没有找到任何解决方案。

我创建了自己的自定义帐户。当我尝试使用以下代码以编程方式删除帐户时，不会删除该帐户：

```
Account systemAccount = new Account(mainAccount.getDisplayName(), 
                                    getResources().getString(R.string.account_type));
AccountManager.get(Accounts.this).removeAccount(systemAccount, null, null); 
```

甚至，当我尝试从设置中删除该帐户时，什么也没有发生。仅当我卸载该应用程序时，该帐户才会被删除。

我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-16T03:45:48.513

您没有将`Future`传递的参数用作`AccountManagerCallback<Boolean>#run`方法的参数。

您应该将回调作为第二个参数提供给：[`public AccountManagerFuture<Boolean> removeAccount (Account account, AccountManagerCallback<Boolean> callback, Handler handler)`](http://developer.android.com/reference/android/accounts/AccountManager.html#removeAccount%28android.accounts.Account,%20android.accounts.AccountManagerCallback%3Cjava.lang.Boolean%3E,%20android.os.Handler%29)

```
myAccountManager.removeAccount(myAccount, new AccountManagerCallback<Boolean>() {
    @Override
    public void run(AccountManagerFuture<Boolean> future) {
        // This is the line that actually starts the call to remove the account.
        boolean wasAccountDeleted = future.getResult();
    }
}, null); 
```

你应该小心你的调用方式`future.getResult()`。不应在主 UI 线程上调用它。为简洁起见，此示例未提供该机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T17:29:18.677

两件事情：

1.  始终从 获取帐户对象`AccountManager`以更改它们。

    ```
    final AccountManager accountManager = AccountManager.get(this);
    accountManager.getAccountsByType(Constants.ACCOUNT_TYPE)[0]; 
    ```

2.  确保如果您覆盖`getAccountRemovalAllowed`您`Authenticator`的 Bundle，您将返回布尔值为 true 的 Bundle，这是默认行为。

    ```
    public Bundle getAccountRemovalAllowed(
            AccountAuthenticatorResponse response, Account account)
            throws NetworkErrorException {
        final Bundle result = new Bundle();

        result.putBoolean(AccountManager.KEY_BOOLEAN_RESULT, true);

        return result;
    } 
    ```

# iphone - 循环播放视频 +AVQueuePlayer

> ID：15358274
> 
> 赞同：0
> 
> 时间：2013-03-12T10:07:37.613
> 
> 标签：iphone, ios, loops, avplayer, avplayerlayer

我用这个视频播放没有混蛋。但是如何在循环中播放**secondVideoItem** ..在视频播放后我想将此视频添加到 10-15time。只有**secondVideoItem**不是**firstVideoItem**。

```
NSString *secondVideoPath = [[NSBundle mainBundle] pathForResource:@"video1" ofType:@"mp4"];
    NSString *firstVideoPath = [[NSBundle mainBundle] pathForResource:@"video2" ofType:@"mp4"];

    AVPlayerItem *firstVideoItem = [AVPlayerItem playerItemWithURL:[NSURL fileURLWithPath:firstVideoPath]];
    AVPlayerItem *secondVideoItem = [AVPlayerItem playerItemWithURL:[NSURL fileURLWithPath:secondVideoPath]];

   AVQueuePlayer* queuePlayer = [AVQueuePlayer queuePlayerWithItems:[NSArray arrayWithObjects:firstVideoItem, secondVideoItem,nil]];

    AVPlayerLayer *layer = [AVPlayerLayer playerLayerWithPlayer:queuePlayer];
    avPlayer.actionAtItemEnd = AVPlayerItemStatusReadyToPlay;
    layer.frame = CGRectMake(0, 0, 1024, 768);

    [self.view.layer addSublayer:layer];

    [queuePlayer play]; 
```

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:24:16.660

播放第二个项目后，这将调用通知并倒带视频，以便再次开始播放...

```
queuePlayer.actionAtItemEnd = AVPlayerActionAtItemEndNone; 

 [[NSNotificationCenter defaultCenter] addObserver:self
                                           selector:@selector(itemPlayEnded:)
                                               name:AVPlayerItemDidPlayToEndTimeNotification
                                             object:[queuePlayer currentItem]];

- (void)itemPlayEnded:(NSNotification *)notification 
{
 k++;
 if(k<10-15 times)
 {
  AVPlayerItem *p = [notification object];
  [p seekToTime:kCMTimeZero];
 }
} 
```

# android - 如何使用 android maven 插件在命令行上指定目标设备（或模拟器）？

> ID：15358284
> 
> 赞同：1
> 
> 时间：2013-03-12T10:07:58.757
> 
> 标签：android, maven, android-emulator, android-maven-plugin

问题基本上是我需要在命令行中传递哪些参数才能使用 android maven 插件指定目标设备（或模拟器）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:07:58.757

你基本上只需要传递参数`-Dandroid.device=`

对于设备参数，您可以使用：

*   “usb”（将针对连接到您的 USB 端口的设备）
*   “模拟器”（将针对正在运行的模拟器）
*   specificdeviceid（可以是模拟器的端口号或设备名称或设备的ID）

顺便说一句，如果您有多个与参数匹配的目标（例如运行 2 个仿真器并且您使用“仿真器”，它将针对所有正在运行的仿真器）。如果您想在多个模拟器中部署，这非常方便 =D

以防万一，这里有一个使用参数的例子：

> mvn android:deploy android:run -Dandroid.device=emulator

# java - 字符串到本地日期错误

> ID：15358289
> 
> 赞同：5
> 
> 时间：2013-03-12T10:08:06.677
> 
> 标签：java, date, jodatime

我正在尝试从字符串转换为 localdate(JODA TIME) 但它给了我错误

```
String theDate = w.getPSDate();  == 6/03/2013
LocalDate ld = new LocalDate(theDate);
System.out.println(ld); 
```

出于某种原因，我必须使用字符串而不是日期。我想将日期打印为 (06/03/2013)。代码中的错误是什么？

错误

```
Exception in thread "main" java.lang.IllegalArgumentException: Invalid format: "06/03/2013" is malformed at "/03/2013"
at org.joda.time.format.DateTimeFormatter.parseMillis(DateTimeFormatter.java:747)
at org.joda.time.convert.StringConverter.getPartialValues(StringConverter.java:87)
at org.joda.time.LocalDate.<init>(LocalDate.java:406)
at org.joda.time.LocalDate.<init>(LocalDate.java:354)
at Date.GetDate.main(GetDate.java:94) 
```

Java 结果：1

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T10:10:09.177

使用 a[`DateTimeFormatter`](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormatter.html)代替：

```
// Are you sure it's 6/03/2013 rather than 06/03/2013? dd would be nicer...
DateTimeFormatter formatter = DateTimeFormat.forPattern("d/MM/yyyy");
LocalDate date = formatter.parseLocalDate(text); 
```

# facebook - Facebook 登录 API 或类似的东西

> ID：15358290
> 
> 赞同：0
> 
> 时间：2013-03-12T10:08:10.000
> 
> 标签：facebook, samsung-smart-tv

如果我们提供用户名和密码验证并返回用户 ID，Facebook 中是否有任何 API，可以在墙上分享，上传照片等。

啊，如果我们有类似的东西，那真是太棒了

```
$facebook = new facebook();
$user = $facebook->lgoin("atestuser@mydomain.com","xY2349");

if($user){
  $facebook->share("Sometext to share on facebook");
} 
```

如果没有提供这样的东西，我们怎么能做到这一点？请记住，我知道图形 API 并为没有浏览器的设备开发，只能发送 ajax 请求。

# java - 如何在 Android 中设置另一个控件后面的控件？

> ID：15358293
> 
> 赞同：0
> 
> 时间：2013-03-12T10:08:21.753
> 
> 标签：java, android, eclipse

我是 Android 世界的新手我有一个活动，它通过 imageview 预览图像，并且图像视图采用填充父级并填充所有屏幕，我想要当我单击图像视图时显示例如图像顶部的搜索栏减小图像尺寸。请注意搜索栏已经不可见并且我正确显示它但我希望它显示在图像视图本身而不降低图像高度。谢谢

# ios - 构建归档时 AKTabBarController 不起作用

> ID：15358296
> 
> 赞同：0
> 
> 时间：2013-03-12T10:08:24.283
> 
> 标签：ios, xcode, cocoa-touch, linker, uitabbarcontroller

我在我的项目中使用它：[https ://github.com/alikaragoz/AKTabBarController](https://github.com/alikaragoz/AKTabBarController)

它在模拟器中运行良好，但是一旦我想在手机上构建或进行临时构建，它就会失败。我真的不知道如何理解错误消息。![进行临时构建时的 xCode 错误日志](../Images/5c77e461d32ece4471fbb9728ffa77fa.png)

我是否必须更改构建设置中的某些内容？Traget 是 iOS 5 或更高版本。

谢谢你的帮助！缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:36:17.557

看起来您的项目中有多个同名文件（也许您添加了两次 AKTabBarController 库）？

尝试清理项目，查看是否有重复项并将其删除。然后 CMD+Shift+K 和 CMD+Shift+Alt+K

可能与此处所述相同的问题：[架构 armv7 的 106 个重复符号](https://stackoverflow.com/questions/13727167/106-duplicate-symbols-for-architecture-armv7)

# jquery - jquery，通过留在同一页面上发送表单

> ID：15358298
> 
> 赞同：9
> 
> 时间：2013-03-12T10:08:34.547
> 
> 标签：jquery, ajax, forms

我想在不离开当前页面的情况下发送表单，所以我正在使用：

```
$('.myForm').on('submit', function(){
        $.ajax({
            url: $(this).attr('action'),
            type: $(this).attr('method'),
            data: $(this).serialize(),
            success: function(html) {
            alert('ok');
            }
        });
    return false; 
}); 
```

但它不起作用......请问有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T10:10:19.707

这样做： -

```
$(document).on('submit', '.myForm', function(e) {
     $.ajax({
        url: $(this).attr('action'),
        type: $(this).attr('method'),
        data: $(this).serialize(),
        success: function(html) {
        alert('ok');
        }
    });
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T10:11:15.127

这是一个例子

```
<form name="frm" method="POST" action="">
 <input type="text" name="name" id="name" value="" />
 <input type="text" name="last_name" id="last_name" value="" />
 <input type="submit" name="Update" id="update" value="Update" />
</form> 
```

jquery部分

```
$("#update").click(function(e) {
  e.preventDefault();
  var name = $("#name").val(); 
  var last_name = $("#last_name").val();
  var dataString = 'name='+name+'&last_name='+last_name;
  $.ajax({
    type:'POST',
    data:dataString,
    url:'insert.php',
    success:function(data) {
      alert(data);
    }
  });
}); 
```

`insert.php`页面_

```
<?php
  $name = $_POST['name'];
  $last_name = $_POST['last_name'];
  $insert = "insert into TABLE_NAME values('$name','$last_name')";// Do Your Insert Query
  if(mysql_query($insert)) {
   echo "Success";
  } else {
   echo "Cannot Insert";
  }
?> 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T10:11:19.387

采用`event.preventDefault();`

```
$('.myForm').on('submit', function(event){
    event.preventDefault(); 
    $.ajax({
        url: $(this).attr('action'),
        type: $(this).attr('method'),
        data: $(this).serialize(),
        success: function(html) {
        alert('ok');
        }
    });
    //return false; 
}); 
```

# css - 响应式等宽

> ID：15358305
> 
> 赞同：0
> 
> 时间：2013-03-12T10:08:54.023
> 
> 标签：css, responsive-design, media-queries, percentage, fluid-layout

我正在将 960grid 12col 响应式设计转换为 HTML。它有一个三个独立的 div，每个 div 宽 300px，margin-right 宽 20px。这是我的代码。

**HTML**

```
 <section class="container">
        <h1>Services</h1>
        <div class="box">
            box1
        </div>
        <div class="box">
            box2
        </div>
        <div class="box last">
            box3
        </div>
    </section> 
```

**CSS**

```
.container{
      max-width: 960px;
      width: 98%;
      margin: 0 auto;
      padding: 0 1.04166666666667%;/*10px / 960px*/
 }
.box{
     width: 31.25%;/*300px / 960px*/
     margin-right: 6.66666666666667%;/*20px / 300px*/
     float: left;
     background: red;
     margin-bottom: 10px;
 }
.last{
   margin-right: 0;
} 
```

我的问题是带有类名框的 div 不适合容器 div。最后一个 div 打破了这条线，并低于其他两个 div。[参考这个。](http://oi47.tinypic.com/fa6eev.jpg)不知道我哪里错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:18:38.697

我认为这是您的保证金权利的问题。

它应该是 20 除以 960，即 0.020833333333333333333333333333333 依次变为 2.0833333333333333333333333333333%

在响应式设计中，边距是根据父容器而不是子元素计算的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:14:59.097

你有 3 个宽度为 31.25% 的盒子，除了最后一个之外，每个盒子都有 6.67% 的边距。这等于总共 107.09% 的宽度，因此不适合它的容器宽度。

降低数字，使它们的总数小于 100%。

此外，您应该通过执行 20/960 来计算边距。

# javascript - 对象定义时以逗号或分号结尾的Javascript语句

> ID：15358313
> 
> 赞同：3
> 
> 时间：2013-03-12T10:09:16.253
> 
> 标签：javascript

所有，我对javascript OO不熟悉，在我做了一些实验之后，我对对象定义有些困惑，请帮助查看我的代码和下面的评论。谢谢。

```
 GlobalUtility = function() {
            this.templeteCode = "123";

            this.Init();
//why can not put this code here,
//there is an error says GetOriginalSource is not a function . 
//This is not like the classical OO constructor which can call any methods in class.
            this.Init = function() {
                var source=this.GetOriginalSource();
                alert(source + " is ok.");
            },//I found I can end this statement by , or ; Is there any difference between them?

            this.GetOriginalSource=function(){
                return "abc";
            };
            //this.Init(); putting this code here is ok .

        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:57:25.047

1.  您必须在调用它之前定义一个函数。
2.  javascript 中的分号是可选的。基本上，分号用于结束语句，而逗号用于处理对象。您可以尝试阅读这些文章[JavaScript 变量定义：逗号与分号](https://stackoverflow.com/questions/3781406/javascript-variable-definition-commas-vs-semicolons)和 [您是否建议在 JavaScript 中的每个语句后使用分号？](https://stackoverflow.com/questions/444080/do-you-recommend-using-semicolons-after-every-statement-in-javascript)

Javascript 可以用 oop 方式编写 *请参阅[定义 javascript 类](http://www.phpied.com/3-ways-to-define-a-javascript-class/)，但我建议使用[Base.js](http://dean.edwards.name/weblog/2006/03/base/)，它会让您的生活更轻松。

您可能需要这个，但阅读起来并不那么有趣:) [javascript 模式](http://shichuan.github.com/javascript-patterns/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:29:50.673

试试这个：

```
GlobalUtility = function () {
            Init();

            this.templeteCode = "123";
            this.Init = Init;       
            this.GetOriginalSource = GetOriginalSource;

            //function declaration
            function Init() {
                var source = GetOriginalSource();
                alert(source + " is ok.");
            }
            function GetOriginalSource() {
                return "abc";
            }
}; 
```

您正在尝试调用尚未在运行时定义的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:12:00.947

`this.GetOriginalSource=function(){`将函数添加到对象。在这条线之前它不存在。但是你之前尝试调用它。

# google-analytics - 文件夹配置文件的流量来源

> ID：15358324
> 
> 赞同：1
> 
> 时间：2013-03-12T10:09:55.587
> 
> 标签：google-analytics

我很困惑 GA 如何处理基于文件夹过滤器的配置文件的流量来源。

示例：我有一个文件夹的配置文件 - www.domain.com/folder。想象以下场景。访问者通过自然搜索访问主页 www.domain.com。之后访问者导航到 www.domain.com/folder。此访问者如何在流量来源报告中显示？他是否会被列在有机搜索下，因为这是他登陆网站的方式。或者因为他起源于个人资料之外，所以是推荐的或直接的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T10:38:31.383

首先感谢您的问题（它帮助我发现并解决了我自己基于文件夹的设置的问题），其次，保留了原始来源（这是有道理的，因为其他所有内容都会破坏文件夹配置文件中的活动报告）。恐怕我无法使用外部参考来备份它（但我正在使用基于文件夹的设置监视一个大型站点，这就是我在结果中看到的）。

# iphone - 如何在视图中动态插入组件？

> ID：15358331
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:10:10.640
> 
> 标签：iphone, ipad

![此问题的演示图像](../Images/a32aea31418e447586abbaf4d5b463da.png)

这是演示图像。我必须开发相同类型的对话框或视图，它是以编程方式开发的还是有内置组件？

1.  库中是否有预定义的组件？
2.  如果没有，那怎么可能，我也想要组件的委托
3.  如何计算下载时间，以便计算正在进行的视图变得容易

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:47:57.997

*UIView*类中有一种方法*addSubview 。**您可以在另一个视图（或UIView*继承的任何类）中添加任何视图。

 **在这里，根据您的图像，您可以仅使用该方法将*UIActivityIndi* ​​cator 、*UIProgressBar*实例添加到*UIAlertView 。*

为了那个原因：

*   创建一个自定义的 alertview 类，它是*UIAlertView的子类*
*   在*init*方法中，通过设置其框架和其他值来添加您的其他视图
*   将子视图添加到自我（自定义警报视图）实例

现在您可以在任何地方自由使用您的自定义警报视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:20:47.647

1.  它不是预定义的组件。
2.  您可以使用预定义的组件并使用标签、活动指示器、按钮创建视图。在 github 上查看[SVProgressHUD 。](https://github.com/samvermette/SVProgressHUD)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:23:03.537

下载视图是一个自定义进度视图，其中也包含 uiactivityindicator。它是以编程方式创建的。下载视图后面是一个表格视图，其中包含标题名称为已购买故事和已下载故事的两个部分。这两个视图都是以编程方式创建的。您可以从 git hub 使用 SVProgressHUD 或 MBProgressHud。要获得时间：-

```
UIProgressView *myProgressView = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleDefault];
float someFloat = 0;

NSTimer *myTimer = [NSTimer scheduledTimerWithTimeInterval:300 target:self selector:@selector(methodToUpdateProgress) userInfo:nil repeats:YES]; 
```**

# python - 如何获取链接到我的共享对象的 python 核心转储的调试符号？

> ID：15358334
> 
> 赞同：1
> 
> 时间：2013-03-12T10:10:23.327
> 
> 标签：python, debugging, shared-libraries

我有使用共享库的 python 应用程序。这是我的共享对象，带有源代码和调试版本。

共享对象在正在运行的进程上提供了核心转储，我尝试对其进行调试。我看到了所有线程和回溯，但我无法查看源列表。它说`No symbol table is loaded. Use the "file" command.`。

我认为它加载了所有链接的库，但显然不是我的。我该如何调试呢？为什么我的共享对象没有可用的符号表？

谢谢！

# javascript - 滑动 JS 不适用于填充的内容

> ID：15358336
> 
> 赞同：0
> 
> 时间：2013-03-12T10:10:25.697
> 
> 标签：javascript, jquery, getjson

我正在使用 Swipe JS 2。如果我自己制作 HTML 结构，它可以完美运行，但如果我使用来自 jQuery 的内容填充 HTML，它会在第二张幻灯片上停止。

我的 HTML 结构：

```
<div id="map" class="swipe">
    <div class="swipe-wrap">
        <div class="city" id="current">
            <div class="location">Current Location</div>
        </div>
    </div>
</div>
<nav>
    <ul id="position">
        <li class="on">Current location</li>
    </ul>
</nav> 
```

这是我在 jQuery 上的结构。

```
$.getJSON("http://localhost/locations.php", function(localdata) {
    $.each(localdata.locations, function(i, geolocal){
        var vcountry = geolocal['country'];
        var vregion = geolocal['region'];
        var vcity = geolocal['city'];

        country = vcountry.replace(' ','_');
        region = vregion.replace(' ','_');
        city = vcity.replace(' ','_');

        // THE PROBLEM IS HERE. IF I USE AJAX OR GETJSON HERE INSIDE THE OTHER GETJSON, THE SWIPE IS BROKEN.
        $.ajax({
            type: "GET",
            url: "http://localhost/remotexml.php?url=http://www.yr.no/place/"+ country +"/"+ region +"/"+ city +"/forecast.xml",
            success: function(xml) {
                var localName = $(xml).find('location name').text();
                $('#map div.swipe-wrap .city:last-child').after('\n<div class="city">\n<div class="location">'+localName+'</div>\n</div>\n</div>');
                $('#position').append('\n<li>'+localName+'</li>');
            }
        });

    });
})
.success(function() { })
.error(function() { })
.complete(function() {
    var slider = 
      Swipe(document.getElementById('map'), {
        auto: 5000,
        continuous: true,
        callback: function(pos) {

          var i = bullets.length;
          while (i--) {
            bullets[i].className = ' ';
          }
          bullets[pos].className = 'on';

        }
      });

    var bullets = document.getElementById('position').getElementsByTagName('li');
}); 
```

发生的事情是：当我看到 jQuery 创建的 HTML 时，它是完美的。jQuery 正在创建滑块内的 div 和列表内的 lis。完美的。当我运行网站时，加载并完美启动，但是，当更改幻灯片时，在第二张幻灯片上停止，第二张幻灯片是空白的。那里空无一物。甚至认为HTML上有内容。

最奇怪的部分？如果我在网站加载后立即启动开发人员工具（Chrome 上的 Command + Alt + I），它就可以正常工作。这是什么奇葩行为？:D

任何人都可以帮助我让这个 Swipe JS 运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:30:05.940

如果您通过 AJAX 请求使用内容填充滑块，那么您很可能必须等到该 AJAX 请求完成后再构建滑块 - 即在 AJAX 函数的成功回调中。

# node.js - 通过 POST 方法访问从 html 表单发送的 nodeJS/ExpressJS 的参数

> ID：15358337
> 
> 赞同：0
> 
> 时间：2013-03-12T10:10:29.050
> 
> 标签：node.js, rest, express

我想知道从 HTML 表单访问通过 post 方法发送的参数的命令

我已经尝试了所有这些，但它们会打印`undefined`或发回`error`...

**编辑1：**忘了提，我也添加了这个`server.use(express.bodyParser());`

**编辑2：**

```
var express = require('express'),
server  = express(),
client  = require('mysql').createConnection({ host:'localhost', user:'root', password:'password' }); 
```

在 MySQL 中使用 dbCRUD 进行休息服务

```
var dbcrud  = require('dbcrud').init(client, 'contacts', model); 
```

然后我做一个

```
server.use(express.bodyParser()); 
```

发布功能在这里执行..

```
server.post('/families',function(req,res){
    console.log(req.id);
    console.log("1: " + req.param.id);
    console.log("2: " + req.params.id);
    console.log("3: " + req.param("id"));
    console.log("4: " + req.params('id'));
    console.log("5: " + req.params[0]);
    console.log("6: " + req.body.name);
    console.log("7: " + req.body.notes);
    console.log("8: " + req.body.id);
    //console.log("5: " + req.params[0]);
    res.send('Hello POST : families');
}); 
```

我在这里添加路线...

```
dbcrud.addRoutes(server); 
```

在 HTML 表单中，我为输入标签指定了 id 和 name 属性...

```
<form method="post" action="http://10.180.218.72:3000/families">
   id    : <input type="number" id="id" name="id"></input>
   name  : <input type="text" id="name" name="name"></input>
   notes : <input type="text" id="notes" name="notes"></input>
           <input type="submit" value = "submit" ></input>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:34:53.023

试试`app.use(express.bodyParser());`你的代码。bodyParser 是一个用于解析 post 请求正文的快速中间件。

# vb.net - 在一个处理程序中处理所有文本框事件

> ID：15358338
> 
> 赞同：3
> 
> 时间：2013-03-12T10:10:32.640
> 
> 标签：vb.net

我确实知道如何处理表单中文本框的事件。但想让这段代码更短，因为我将有 30 个文本框。使用它是低效的：

```
Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged, TextBox2.TextChanged, TextBox3.TextChanged, TextBox4.TextChanged, TextBox5.TextChanged, TextBox6.TextChanged, TextBox7.TextChanged, TextBox8.TextChanged, TextBox9.TextChanged, TextBox10.TextChanged
    Dim tb As TextBox = CType(sender, TextBox)

    Select Case tb.Name
        Case "TextBox1"
            MsgBox(tb.Text)
        Case "TextBox2"
            MsgBox(tb.Text)
    End Select
End Sub 
```

有没有办法缩短处理程序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T10:14:56.077

您可以以编程方式使用[`Controls.OfType`](http://msdn.microsoft.com/en-us/library/bb360913.aspx)+ 。[`AddHandler`](http://msdn.microsoft.com/en-us/library/7taxzxka%28v=vs.80%29.aspx)例如：

```
Dim textBoxes = Me.Controls.OfType(Of TextBox)()
For Each txt In textBoxes
    AddHandler txt.TextChanged, AddressOf txtTextChanged
Next 
```

一个处理程序：

```
Private Sub txtTextChanged(sender As Object, e As EventArgs)
    Dim txt = DirectCast(sender, TextBox)
    Select Case txt.Name
        Case "TextBox1"
            MsgBox(txt.Text)
        Case "TextBox2"
            MsgBox(txt.Text)
    End Select
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:15:02.170

假设如果您`textboxes`在面板（`PnlTextBoxes`）中有 30 个，现在您可以`handler`像`textboxes`下面这样动态地创建

```
For each ctrl in PnlTextBoxes.controls
 If TypeOf ctrl is TextBox then
   AddHandler ctrl.TextChanged, AddressOf CommonClickHandler
 end if
Next

Private Sub CommonHandler(ByVal sender As System.Object, _
ByVal e As System.EventArgs)

      MsgBox(ctype(sender,TextBox).Text)

End Sub 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T10:15:27.247

如果您已经使用设计器创建了非常文本框，我认为没有更好的方法。

但是，如果您已经动态创建了文本框，您应该以这种方式添加处理程序：

```
For i = 0 to 30
    Dim TB as New Texbox
    AddHandler TB.TextChanged, TextBox1_TextChanged
    'Set every Property that you need
    Me.Controls.Add(TB)
Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:17:23.570

*最好*的方法是继承 from `TextBox`，覆盖其[`OnTextChanged`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.ontextchanged.aspx)以添加您的自定义处理代码，然后在您的表单上使用它而不是内置`TextBox`控件。

这样，*所有*的事件处理代码都在一个地方，你增加了抽象。行为遵循并在控件类本身中定义，而不是包含控件的表单。当然，它可以让你摆脱一堆难看、难以维护的`Handles`语句，或者更糟、更慢甚至更难看的`For`循环。

例如，将此定义新自定义文本框控件的代码添加到项目中的新文件中：

```
Public Class CustomTextBox : Inherits TextBox

    Protected Overridable Sub OnTextChanged(e As EventArgs)
        ' Do whatever you want to do here...
        MsgBox(Me.Text)

        ' Call the base class implementation for default behavior.
        ' (If you don't call this, the TextChanged event will never be raised!)
        MyBase.OnTextChanged(e)
    End Sub

End Class 
```

然后，在重新编译后，您应该能够`TextBox`用新定义的控件替换现有控件，该控件`CustomTextBox`具有内置的所有行为。

# matlab - Matlab - 周围元素的总和

> ID：15358340
> 
> 赞同：4
> 
> 时间：2013-03-12T10:10:40.620
> 
> 标签：matlab, sum

我想计算矩阵中给定元素周围元素的总和。到目前为止，我已经编写了这些代码行：

```
for i=1:m,
        rij(1:n)=0
        for j=1:n,
            alive = tijdelijk(i-1,j)+tijdelijk(i+1,j)+tijdelijk(i-1,j-1)+tijdelijk(i+1,j-1)+tijdelijk(i,j+1)+tijdelijk(i,j-1)+tijdelijk(i-1,j+1)+tijdelijk(i+1,j+1) 
```

这会导致错误，因为例如 i=1 时 i-1 变为零。有人知道如何在不出现此错误的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T10:14:38.097

您可以通过过滤对元素求和。[`conv2`](http://www.mathworks.com/help/matlab/ref/conv2.html)可以用于这种方式。

让我举个例子。我创建了一个样本矩阵

```
>> A = reshape(1:20, 4, 5)

A =

 1     5     9    13    17
 2     6    10    14    18
 3     7    11    15    19
 4     8    12    16    20 
```

然后，我创建一个过滤器。过滤器就像一个面具，您将中心放在当前单元格上，并将过滤器上对应的位置`1's`相加。对于八连通邻居的情况，过滤器应如下所示：

```
>> B = [1 1 1; 1 0 1; 1 1 1]

B =

 1     1     1
 1     0     1
 1     1     1 
```

然后，您只需将矩阵与这个小矩阵进行卷积。

```
>> conv2(A, B, 'same')

ans =

13    28    48    68    45
22    48    80   112    78
27    56    88   120    83
18    37    57    77    50 
```

如果您想要四个连接的邻居，您可以将过滤器的角设为 0。类似地，您可以根据您的目的设计任何过滤器，例如对所有邻居进行平均而不是对它们求和。

详情请看维基百科中的[卷积文章](http://en.wikipedia.org/wiki/Convolution)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:20:20.317

两种可能性：将循环的限制更改为`i=k:(m-k)`和`j=k:(n-k)`或使用[blkproc](http://www-rohan.sdsu.edu/doc/matlab/toolbox/images/blkproc.html)

前任 ：

> 计算每个 8×8 块的二维 DCT

```
I = imread('cameraman.tif');
fun = @dct2;
J = blkproc(I,[8 8],fun);
imagesc(J), colormap(hot) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T15:56:07.303

你可以在边缘做很多事情。您所做的具体取决于您的问题，并且因用例而异。典型的事情：

1.  如果 (i-1) 或 (i+1) 超出范围，则忽略该元素。这相当于用零填充矩阵的外部并相应地调整循环限制
2.  环绕边缘。换句话说，对于 MxN 矩阵，如果 (i-1) 将您带到 0，那么您将采用元素 (M, j) 而不是采用元素 (i-1, j) = (0, j)。

由于您的代码提到了“您的老师”，我猜您可以询问边缘应该发生什么（或者以合理的方式解决它很可能是任务的一部分！！）。

# upstart - 从busybox转向新贵导致内核恐慌

> ID：15358341
> 
> 赞同：1
> 
> 时间：2013-03-12T10:10:46.910
> 
> 标签：upstart, busybox, rootfs

我们使用busybox创建了简单的linux文件系统，它运行成功。

但是我们试图从busybox init 进程转移到upstart init。但是当我们试图做`init=/sbin/init.upstart`. 可能是什么原因？

upstart 文件镜像由 upstart 0.3.9 包创建。

# javascript - 在 Javascript/jQuery 中动态添加变量名作为对象的一部分

> ID：15358342
> 
> 赞同：1
> 
> 时间：2013-03-12T10:10:54.827
> 
> 标签：javascript, jquery, object

我正在尝试创建一个引用多个表单的对象，我可以`JSON.stringify()`通过单个 AJAX 请求将这些表单发送到验证脚本，但我似乎无法正确命名对象内的数组，这应该是一个递增的随着数组（表格）数量的增加而计数。

IE

```
var images = new Object();
var i = 0;

// loop through every form
$('form').each(function() {
   var form = $(this);

   images[i].name = form.find('input[name="name"]').val();
   images[i].description = form.find('textarea[name="description"]').val();

   // etc.

   i++;
}); 
```

所以，在说两到三次迭代后完成（也就是说，它经历了两到三种形式），我有一个类似的 Javascript 对象（用伪代码编写，我不太确定它是如何实际输出的）：

```
images {
   0 {
      name : 0thImageNameValueHere,
      description : 0thImageDescripValueHere,
      etc : etc
   }

   1 {
      name : 1stImageNameValueHere,
      description : 1stImageDescripValueHere,
      etc : etc
   }
} 
```

但是，现在，Firebug 给了我一个`SyntaxError: missing ; before statement`错误，围绕这一行：

```
images[i].name = form.find('input[name="name"]').val(); 
```

现在，我可以将 'value' 更改为`images[i].name`我喜欢的任何东西 ( `images[i].name = 'yes'`)，但我仍然得到同样的错误。从语法上讲，我没有遗漏任何分号，所以不可能这样。是否有可能我没有正确声明我的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:23:49.100

图像是一个数组 ( `[]`)。您的语法不符合这种情况（您期望一个对象）。为数组中的每个项目创建一个对象，然后您可以为该对象的属性分配值。

此外，您可以只使用`index`jQuery 提供的参数，您不必创建自己的迭代器。

这可以满足您的要求：

```
var images = []; // create an array

$('form').each(function( index ) {
    var form = $(this);
    // create object with {} object notation
    var image = {
        name: form.find('input[name="name"]').val(),
        description: form.find('textarea[name="description"]').val()
    };
    images[index] = image; // append object in array position index;
} 
```

[有关JSON WIKI](http://en.wikipedia.org/wiki/JSON)对象的更多信息，请参阅。有关数组[W3Schools](http://www.w3schools.com/js/js_obj_array.asp)的更多信息，请参阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:16:58.290

我不知道任何缺少的分号，但是您需要在`images[i]`为其分配任何属性之前创建一个对象。即试试这个：

```
images[i] = { 
    name: get('input[name="name"]').val(),
    description: get('textarea[name="description"]').val()
}; 
```

您还可以使用由提供的 index 参数`each()`：

```
$('form').each(function(i) { ... } 
```

# asp.net - 实体框架生成什么也不生成

> ID：15358343
> 
> 赞同：1
> 
> 时间：2013-03-12T10:10:55.323
> 
> 标签：asp.net, sql, model, ado.net, entity

我使用sa帐户在sql server 2008中创建了一个数据库（称为Data1），然后在Data1中创建了一个表（称为Table1）。但是，在我使用 ADO.NET 实体数据模型从 Data1 生成实体后，没有生成实体。

但我可以从主数据库为系统表生成实体。

有人能给我一些建议吗？多谢

# android - 列表视图项目按钮更改文本

> ID：15358344
> 
> 赞同：0
> 
> 时间：2013-03-12T10:11:04.417
> 
> 标签：android, listview, onclicklistener, listviewitem

如何从列表视图项更改文本视图中的文本。我有一个 productAdapter，现在我尝试为这些项目添加一个 onclicklistener。当我单击它们时，我的列表视图项目中有 2 个按钮，文本应该会更改。onclicklistener 的工作方式是我输出被点击的项目的位置。

```
public class ProductAdapter extends ArrayAdapter<Product>{

    Context context;
    int layoutResourceId;   
    List<Product> data = null;

    public ProductAdapter(Context context, int layoutResourceId, List<Product> yal) {
        super(context, layoutResourceId, yal);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = yal;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View row = convertView;
        prodHolder holder = null;
        final int pos=position;
        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new prodHolder();
            holder.imgIcon = (ImageView)row.findViewById(R.id.imgIcon);
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
            holder.txtPrice = (TextView)row.findViewById(R.id.txtPrice);
            holder.txtAmount = (TextView)row.findViewById(R.id.txtAmount);
            holder.minus = (Button)row.findViewById(R.id.minbtn);
            holder.plus = (Button)row.findViewById(R.id.plusbtn);

            row.setTag(holder);
        }
        else
        {
            holder = (prodHolder)row.getTag();
        }

        holder.minus.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                onMinButtonClicked(pos,prod,v);
            }

        });
        holder.plus.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                onPlusButtonClicked(pos,prod,v);
            }
        });        
        return row;
    }
    private void onMinButtonClicked(int position,Product prod,View row) {

        short am= prod.getAmount();
        if(am>0){
                am=(short) (am-1);      
        }
        prod.setAmount(am);

        SerializeIt si=new SerializeIt();
        si.storeMyData(prod,context);
    }
    private void onPlusButtonClicked(int position,Product prod,View row) {

        short tt=(short) (prod.getAmount()+1);
        prod.setAmount(tt);
        SerializeIt si=new SerializeIt();
        si.storeMyData(prod,context);

    }   
    static class prodHolder
    {
        ImageView imgIcon;
        TextView txtTitle;
        TextView txtPrice;
        TextView txtAmount;
        Button minus;
        Button plus;
    }
} 
```

希望有人可以帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:13:29.690

尝试使用以下代码..

```
holder.minus.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                 holder.txtAmount.settext("MINUS");
            }

        });
        holder.plus.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                 holder.txtAmount.settext("PLUSH");
            }
        }); 
```

# .htaccess - 如何使用 .htaccess 映射 URL

> ID：15358346
> 
> 赞同：0
> 
> 时间：2013-03-12T10:11:09.190
> 
> 标签：.htaccess

我的本地站点有项目文件夹`http://127.0.0.1/myproject/index.php`。我希望能够映射其 URL，因此如果有人输入`http://127.0.0.1/myproject/service`，它应该显示相同的内容或执行与 index.php 相同的功能。

我在不同的站点上尝试了一些示例，但无法完成。

到目前为止我尝试的是：

```
<IfModule mod_rewrite.c>
RewriteEngine On

RewriteBase /
RewriteRule ^(.*)\myproject\service$ $index.php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:30:44.970

```
RewriteEngine On
RewriteBase /myproject/
RewriteRule service index.php [L,QSA] 
```

首先，设置要重写的基础。在规则中，所有路径现在都是**相**对于基础的，而不是绝对的。

该标志`L`表示不应应用其他规则。

该标志`QSA`表示应附加查询字符串。

更多信息：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:27:50.370

我什至会说，检查一下 Wordpress 给你的东西：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /myproject/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /myproject/index.php [L]
</IfModule>

# END WordPress 
```

# javascript - 如何从 jquery 对象中获取 html 元素

> ID：15358351
> 
> 赞同：1
> 
> 时间：2013-03-12T10:11:20.683
> 
> 标签：javascript, jquery, html

我有一个如下的html。

```
<tr class="meta-info" id="${page.id}">
    <td>
        <div class="pull-left">
         <font size="1">
             <a href="javascript:void(0)" class="like">Like</a>
         </font>
         </div>
         <div class="pull-right" style="font-size:1">
         <span class="badge"><i class="icon-thumbs-up"></i>1</span>          
         </div>
    </td>
</tr> 
```

当用户单击 Like 超链接时，我正在尝试增加喜欢的数量。

这是我的jQuery代码。我想知道如何从 jquery 对象中获取 html 元素。

```
$(".like").click(function(event){
    var parentTr = $(event.target).closest("tr");
    if(parentTr.length){
        var pageId = parentTr.attr("id");
        var spanEle = parentTr.get(0)+" div span:first-child"; ------(1)
        var lastNumber =  parseInt(spanEle.text());
        spanEle.text(lastNumber+1);
    }
}); 
```

我不知道我在标记为 1 的线上做得是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:15:00.487

尝试：**[小提琴](http://jsfiddle.net/8WeSr/1/)**

```
var lastNumber = parseInt(parentTr.find('.pull-right span').text(), 10); 
```

您的代码将如下所示：

```
$(".like").click(function(event) {
    var parentTr = $(event.target).closest("tr");
    if (parentTr.length) {
        var pageId = parentTr.attr("id");
        var spanEle = parentTr.find('.pull-right span');
        var lastNumber =  parseInt(spanEle.text(), 10);
        spanEle.text(lastNumber + 1);
     }
}); 
```

更新：如果您希望保留`<i>`标签，请使用：

```
spanEle.html(spanEle.html().replace(lastNumber, lastNumber + 1)); 
```

代替 ：`spanEle.text(lastNumber + 1);`

[样本](http://jsfiddle.net/GSJJw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:16:29.240

试试这个...

```
$(".like").click(function(event) {
    var parentTr = $(event.target).closest("tr");
    if (parentTr.length) {
        var pageId = parentTr.attr("id");
        var spanEle = parentTr.first('.badge');
        var lastNumber =  parseInt(spanEle.text(), 10);
        spanEle.text(lastNumber + 1);
    }
}); 
```

如果 span 元素始终具有该类名，那么它将找到第一个（唯一？）一个并返回其中文本的 int 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:39:21.203

我认为您需要添加一个额外的`<span>`标签，以便您可以在不触摸相邻图标的情况下替换计数

```
<span class="badge"><i class="icon-thumbs-up"></i>
    <span class="like-count">1</span>
</span> 
```

那么你可以解决它

```
$(".like").click(function() {
    var spanEle = $(this).closest('tr').find('.like-count').first();
    if (spanEle.length) {
        var newCount = parseInt(spanEle.text());
        spanEle.text(newCount + 1);
    }
}); 
```

在事件处理程序中，`this`引用是`event.target`. 您可能能够处理元素不存在的情况也比这更整洁，但这种方式是安全的。

JSFiddle 演示：http: [//jsfiddle.net/rupw/VfCvK/](http://jsfiddle.net/rupw/VfCvK/)

# robots.txt - hackers.txt 文件有什么用？

> ID：15358356
> 
> 赞同：43
> 
> 时间：2013-03-12T10:11:32.430
> 
> 标签：robots.txt, html5boilerplate

## 第一的

不，我不是要你教我黑客，我只是对这个文件及其内容感到好奇。

## 我的旅途

当我深入研究新的 HTML5 样板时，我遇到了 human.txt。我用谷歌搜索它，我来到了这个网站[http://humanstxt.org/](http://humanstxt.org/)。

我的注意力立刻转到了这张照片上：

![它位于哪里](../Images/88749b042167190d90d7c32e68ba617f.png)

我读对了吗？`Hackers.txt`?

于是我重新开始了我在谷歌的旅程，并在[这篇文章中停下来](http://www.textfiles.com/news/hackers.txt)

当我开始阅读这篇文章时，我觉得它是关于黑客和饼干之间的区别。后来我觉得我可能错了，这个地方是这个hackers.txt文件是黑客的留言簿？

[还有其他关于我在这里](http://www.elite-hackers.com/textfiles)找到的 hackers.txt 文件的例子

一些文件包含代码，而另一些文件则包含有害信息。

现在我真的很困惑，留言簿，黑客教程还是只是历史？

## 问题

这个hackers.txt文件有什么用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-09T09:16:14.887

我看待事物的方式：

*   `robots.txt`包含机器人的信息和说明（因此它应该被网络爬虫、蜘蛛和其他类型的机器人阅读/使用）
*   `humans.txt`根据[http://humanstxt.org/包含可供人类使用的有用信息](http://humanstxt.org/)
*   `hackers.txt`[正如 Ze'ev指出](https://stackoverflow.com/a/15358794/246645)的那样，它应该针对黑客，因此它应该包含网站所有者可能想要传输给黑客的任何信息。我认为这不应该是黑客写任何东西的地方，而是从网站所有者那里获取信息（也许是关于如何报告漏洞，正如其他人所建议的那样）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-18T04:54:43.720

与 一样，在[http://www.hackerstxt.org/](https://web.archive.org/web/20140123101805/http://www.hackerstxt.org/)`humans.txt`上似乎也有一个`hackers.txt`站点。我不确定是否有人将此网站设置为玩笑，但它链接到某人的 Blogger 网站上的博客文章。

这篇文章对张贴者作为“黑客”的历史有点漫不经心（我通过谷歌翻译）。无论如何，作者在最后说：

> 因此，相信我们应该推广一种倡议类型 hackers.txt ，其中经理给我们留言给潜在的“优秀的外星人”，明确表示他们会让经理收到关于您网站漏洞的报告。我一直在转这个，其实很难完成整形，因为可能是一些“不太好的外星人”，输入Brainiac，腾出手刷一个网站，或者是“好板管理员”，决定改变主意和 Liem，但我认为我们应该能够做点什么，我不知道，可能有 Jon Jonz，或者可能正在考虑如何编写该文件 hackers.txt。你怎么看？问候邪恶！

所以我假设张贴者想要开始一种类似的`hackers.txt`标准`humans.txt`，但还没有完成，或者还没有进入英语世界。

仔细研究，Blogger 网站似乎归一个名叫 Chema Alonso 的人所有，他在西班牙程序员的世界中一定很有名望，因为他有大约 35,000 个 Twitter 追随者 ( [https://twitter.com/chemaalonso](https://twitter.com/chemaalonso) )。他似乎在一家名为 ElevenPaths ( [http://elevenpaths.com/](http://elevenpaths.com/) ) 的公司工作，该公司称其正在推动“安全产品开发的彻底创新”。快速的 Whois 检查显示该`hackerstxt.org`域是由马德里的某人注册的，所以我假设它是 Alonso。

[http://www.textfiles.com/news/hackers.txt](http://www.textfiles.com/news/hackers.txt)上的`.txt`文件已被该线程中的其他一些答案所引用，似乎与[http](http://humanstxt.org/)上的引用没有任何关系[://humanstxt.org/](http://humanstxt.org/)，“hackers.txt”的大多数其他搜索结果也没有。`hackers.txt`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-05-27T20:26:27.180

[Eduardo A. Vela Nava](https://www.linkedin.com/in/eduardovela/)（或`sirdarckcat`在[Github](https://github.com/sirdarckcat/)和[Twitter 上](https://twitter.com/sirdarckcat/)）通常被称为 Eduardo Vela，自 2010 年以来一直是 Google 的安全工程师。（他目前担任产品安全响应团队负责人）。

作为他之前的其他安全专家，他思考了如何将网站漏洞奖励计划的细节有效地传达给[白帽黑客](https://en.wikipedia.org/wiki/White_hat_(computer_security))/[渗透测试者的](https://en.wikipedia.org/wiki/Penetration_test)问题。

一个具体的这样的人是[Chema Alonso](https://www.linkedin.com/in/chemaalonso/)（也在[Twitter 上](https://twitter.com/chemaalonso)）。

他的知名度足以保证[西班牙维基百科条目](https://es.wikipedia.org/wiki/Chema_Alonso)

2005 年至 2011 年间，Alonso**连续 6 年**被授予 Microsoft 企业安全最有价值专业奖。这应该告诉你一些关于他的“技能”的事情。

* * *

**2011 年 2 月 3 日，**阿隆索写了一篇关于他对网站管理员和/或开发人员与黑客之间交流话题的不满。

[![Alonso 的hackers.txt 博文截图](../Images/8d63b0fcd1c2dfb4c3c8b37f11791a00.png)](http://www.elladodelmal.com/2011/02/hackerstxt.html)

他提出了一项与[黑客](http://www.elladodelmal.com/2011/02/hackerstxt.html)[类似的倡议`humans.txt`](http://www.elladodelmal.com/2011/02/hackerstxt.html)。`hackers.txt`正如他在博客文章中提到的那样。

* * *

**2011 年 4 月**，humanstxt.org 网站有了[一个新设计](https://web.archive.org/web/20110405074122/http://humanstxt.org:80/)，其中包括提及该`hackers.txt`文件的图像。

在这一点上，我必须遗憾地屈服于猜想，但是……考虑一下：

*   [后面`humans.txt`](http://humanstxt.org/humans.txt)的球队都来自西班牙（主要是巴塞罗那）
*   至此，阿隆索在西班牙开发者社区已经相当有名了

想象他们了解彼此的努力是否会如此遥远？

* * *

**2014 年 5 月 14 日**，已经在 Google 工作的 Vela[对 Alonso 的一篇博文发表了评论](http://www.elladodelmal.com/2014/05/gmail-borraste-en-google-pero-te-quedan.html)。他们很可能在专业环境中进行了进一步的接触。他们是否广泛地分享了他们关于任何相关事物的想法`hackers.txt`是未知的。

* * *

**2017 年 7 月 6 日**，Vela 在推特上发布了这样一个问题：

[![Eduardo Vela 的 Twitter 帖子截图](../Images/b4363de726d5ad09db9994ea210f96f8.png)](https://twitter.com/sirdarckcat/status/882950197457952769)

> 我们如何创建一个 /hackers.txt 来说明某事是否在漏洞奖励计划的范围内以及在哪里报告？

[随后，在 github 上](https://github.com/sirdarckcat/hackerstxt.org/)为hackerstxt.org 创建了一个空的 git 存储库， 并[在 Google Groups 上打开了一个电子邮件线程](https://groups.google.com/forum/#!forum/hackerstxt)以进一步讨论这个想法。

* * *

**2017 年 8 月 13 日**，[Edwin Foudil](https://edoverflow.com/)（或`EdOverflow`在[Github](https://github.com/EdOverflow)和[Twitter 上）在](https://twitter.com/EdOverflow)[`security.txt`Github](https://github.com/securitytxt/security-txt)上创建了一个 git 存储库并回复了邮件列表：

> 我已经发布了一个与本小组讨论的项目类似的项目 (https://github.com/EdOverflow/security-txt)，并且很想得到您的一些反馈和想法。
> 
> 该项目相当于 robots.txt，但用于定义安全策略。公司可以将 security.txt 添加到他们的网站，并为安全研究人员在发现安全问题时必须执行的操作定义明确的指导方针。security.txt 还允许漏洞赏金计划在那里添加它们的范围。security.txt 使用与 robots.txt 类似的语法，这应该使机器更容易解析。

他的部分灵感来自他当时正在从事的一个名为[GratiPay](https://github.com/gratipay/gratipay.com)的开源项目。GratiPay[自 2013 年以来就有](https://github.com/gratipay/gratipay.com/blob/7136d3be990bcd4e34837c1b163daf1a28538af1/www/security.txt)[一个`SECURITY.txt`](https://github.com/gratipay/gratipay.com/blob/7136d3be990bcd4e34837c1b163daf1a28538af1/www/security.txt)文件。

他的灵感还来自`SECURITY.md`越来越多的开源项目添加到其存储库中的文件。

* * *

**2017 年 9 月 10 日**，Foudil 向Internet[工程任务组提交了](https://en.wikipedia.org/wiki/Internet_Engineering_Task_Force)[初稿`security.txt`](https://datatracker.ietf.org/doc/html/draft-foudil-securitytxt)。

[![在此处输入图像描述](../Images/60507fa2330918709b057726cdee3c3c.png)](https://datatracker.ietf.org/doc/html/draft-foudil-securitytxt)

* * *

**2017 年 9 月 14 日**， Alonso 写[了一篇博客文章](http://www.elladodelmal.com/2017/09/securitytxt-un-draft-del-ietf-para-mi.html)，标题为（翻译自西班牙语）“Security.TXT an IETF draft for my Hackers.TXT”。

除了标题之外，阿隆索并没有提到他 2011 年的想法是草案的起源，但他确实表示了他对这项努力的认可。

* * *

**2018 年 2 月 3 日**，邮件组被告知要让步，`security.txt`而 Vela 在推特上说[谷歌已经实施了一项](https://twitter.com/sirdarckcat/status/959585939822710786)。

* * *

## 更多的信息

可以在 **[https://securitytxt.org/](https://securitytxt.org/)**找到详细信息和生成自己的[漂亮工具](https://www.dictionary.com/browse/nifty)`security.txt`

[![securitytxt.org 网站的屏幕截图](../Images/985ceed3de97ae251d49b4198aec5e79.png)](https://www.dictionary.com/browse/nifty)

## 收养

尽管 RFC 仍处于草案阶段，但该标准已被网络上的主要参与者很好地采用。

除了[Google 的 security.txt](https://www.google.com/.well-known/security.txt)之外，在以下网站上也有一个：

*   [1个密码](https://1password.com/.well-known/security.txt)
*   [英国广播公司](https://www.bbc.com/.well-known/security.txt)
*   bit.ly - http://bit.ly/security.txt（无法链接，因为[StackOverflow 黑名单在帖子中使用常见的链接缩短](https://meta.stackoverflow.com/questions/313621/blacklist-the-use-of-common-link-shorteners-in-posts)器）
*   [新西兰证书](https://www.cert.govt.nz/.well-known/security.txt)
*   [每日运动](https://www.dailymotion.com/.well-known/security.txt)
*   [投递箱](https://www.dropbox.com/.well-known/security.txt)
*   [Facebook](https://www.facebook.com/.well-known/security.txt)
*   [Github](https://github.com/.well-known/security.txt)
*   [已经拥有](https://haveibeenpwned.com/.well-known/security.txt)
*   [节点](https://nodejs.org/.well-known/security.txt)
*   [新PM](https://www.npmjs.com/.well-known/security.txt)
*   [打开 SSL](https://www.openssl.org/.well-known/security.txt)
*   [Shopify](https://www.shopify.com/.well-known/security.txt)

（如果您发现'm，请随时从*知名网站添加更多内容）*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T10:24:13.317

这可能是个玩笑，但如果humans.txt 是供人类阅读的，那么可能hackers.txt 是对黑客的警告。

就像您通过 SSH 连接到更多公共终端时收到的通知一样。“你被监视了……如果你做了什么坏事，我们会抓到你的……” 诸如此类的事情。

如果黑客确实入侵了该站点，他们可能会注意到该文件，阅读它，意识到您是认真的，然后被吓跑！

有趣的想法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T10:32:17.190

由于这个问题有点开放，我认为您也期待一些假设，我在这里（不是在评论中）写下我的意见，但如果它应该在那里，我很抱歉。

我认为背后的想法`humans.txt`（我以前听说过）是养成新习惯、新风格或类似的东西。事实上，您可以放置​​一个联系页面，所有这些数据`humans.txt`都可以放在其中。我认为这`hackers.txt`也可能是新风格。

我想hackers.txt要早得多，可能是20年，当时www服务器和流行的网络知识很差，使用localhost时Apache + PHP + MySQL会让你成为“黑客”，如果有人可以访问该文件而不是`index.html`（以及由此链接的页面），阅读`hackers.txt`是某种奖品，或者可能是某种过滤器，可以向“那些看到的人”（也许像[这个）显示一些信息。](http://code.ohloh.net/file?fid=OgZtkg6HIkRlLW756iRUm5NmF7Q&cid=GDDmhcLr_xk&s=&browser=Default#L0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-31T09:26:57.337

我认为hackers.txt应该包含关于网站所有者希望如何使用数据的注释......例如“我不介意你是否抓取电影列表，但请不要在你的应用程序中热链接图像”

# powershell - 使用 powershell 从文件名写入部分，包括合并的 txt / csv 文件中的第一行

> ID：15358358
> 
> 赞同：0
> 
> 时间：2013-03-12T10:11:35.400
> 
> 标签：powershell, csv, merge, filenames

我目前正在编写一个 PowerShell 脚本，该脚本可以读取多个工作站上的默认打印机，并将文本文件中的信息写入网络驱动器。我关于脚本中一些文本替换的最后一个问题已成功解决。但现在我在做第二部分。

```
Get-WmiObject -Class Win32_Printer -Filter "Default = $true" | % {
  $_.Name -replace '(?:.*)\\NDPS-([^\.]+)(?:.*)', 'PS-$1'
} | Out-File -FilePath "H:\daten\printer\$($env:COMPUTERNAME)_defaultprinter.txt"
Get-WmiObject Win32_Printer -Filter "Default = $true" `
  | Select-Object -expandProperty Name `
  | Out-File -FilePath "P:\batch\migration\Printer\$($env:COMPUTERNAME)_$($env:USERNAME)_defaultprinter.txt" 
```

所提供代码的最后一行将默认打印机写入网络驱动器。现在我有近 1500 个单个 txt 文件。为了更好地分析，我使用以下 PowerShell 脚本将所有单个 txt 文件合并到一个大文件中。

```
Get-ChildItem -path \\samplepath\prgs\prgs\batch\migration\Printer -recurse | ? {
  ! $_.PSIsContainer
} | ? {
  ($_.name).contains(".txt")
} | % {
  Out-File -filepath \\samplepath\prgs\prgs\batch\migration\Printer\gesamt_printer.txt -inputobject (get-content $_.fullname) -Append
} 
```

我收到一个文件，其中包含来自每个 txt 文件的默认打印机信息，但`$($env:USERNAME)`除了在线打印机信息之外，我还需要文件名中的 -part 作为单独的值才能使用 Excel 中的数据。有人可以告诉我如何在合并文件中插入文件名中的部分吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:33:48.290

您可以像这样从文件名中提取用户名部分：

```
$_.Name -match '^.*?_(.*)_.*?\.txt$'
$username = $matches[1] 
```

正则表达式中的组（可通过 访问`$matches[1]`）包含文件名中第一个和最后一个下划线之间的文本。

你可以像这样使用它：

```
$root    = "\\samplepath\prgs\prgs\batch\migration\Printer"
$outfile = "$root\gesamt_printer.txt"

Get-ChildItem $root -Recurse | ? {
  -not $_.PSIsContainer -and $_.Extension -eq ".txt"
} | % {
  $_.Name -match '^.*?_(.*)_.*?\.txt$'
  $username = $matches[1]
  $content  = Get-Content $_.FullName
  "{0},{1}" -f ($content, $username) | Out-File $outfile -Append
} 
```

您也可以直接创建 CSV：

```
$root    = "\\samplepath\prgs\prgs\batch\migration\Printer"
$outfile = "$root\gesamt_printer.txt"

$getPrinter = { Get-Content $_.FullName }
$getUser    = { $_.Name -match '^.*?_(.*)_.*?\.txt$' | Out-Null; $matches[1] }

Get-ChildItem $root -Recurse `
  | ? { -not $_.PSIsContainer -and $_.Extension -eq ".txt" } `
  | select @{n="Username";e=$getUser},@{n="Printer";e=$getPrinter} `
  | Export-Csv $outfile -NoTypeInformation 
```

请注意，这些代码示例不包含任何检查以排除其中没有至少两个下划线的文件名。

# actionscript-3 - 如何将movieclip 导出为swf？

> ID：15358360
> 
> 赞同：1
> 
> 时间：2013-03-12T10:11:40.433
> 
> 标签：actionscript-3, apache-flex

我加载了一个movieclip，我在flash builder 4.5项目的swf加载器中修改并显示，

我希望用户能够将影片剪辑保存到他的磁盘上，因为 swf 是直的

前进的方式来做到这一点？

我搜索了建议并找到[了这个](https://stackoverflow.com/questions/1482053/as3-export-a-movieclip-or-canves-to-swf)，但似乎没有任何效果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T09:01:18.743

多亏了[“AS3SWF”课，终于完成了这个项目](https://github.com/claus/as3swf)

这是将库导入项目后保存文件的方法

```
 import com.codeazur.as3swf.SWF;

    var swf:SWF = new SWF(mySwfMc.loaderInfo.bytes);

    var ba:ByteArray = new ByteArray();
    swf.publish(ba);

    var C:ByteArray = new ByteArray();
    C.position = 0;
    C.writeBytes(ba);
    var f:FileReference = new FileReference  ;

    f.save(C,"demo.swf"); 
```

# php - PHP dom - 删除子 - 离开标签

> ID：15358361
> 
> 赞同：0
> 
> 时间：2013-03-12T10:11:41.570
> 
> 标签：php, xml, dom

使用removechild后，留下了</ >标签。

在我的代码中，您可以看到我想删除包含“bar”应用程序的工作区。

成功删除后，<WORKSPACE/> 仍然存在。我想摆脱它。怎么做？

[http://sandbox.onlinephpfunctions.com/code/07f17c110fdee579a2eabca138004958e5d17829](http://sandbox.onlinephpfunctions.com/code/07f17c110fdee579a2eabca138004958e5d17829)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:18:27.570

`APPLICATION`您正在检索`WORKSPACE`与

```
$parent = $app->parentNode; 
```

因此，如果您想删除工作区本身，您只需要检索父级`WORKSPACE`并应用相同的方法（`removeChild`使用`$parent`as 节点删除）

# apache-camel - Fuse ESB - 骆驼问题

> ID：15358363
> 
> 赞同：1
> 
> 时间：2013-03-12T10:11:47.217
> 
> 标签：apache-camel, xslt-2.0, fuseesb, osgi-bundle

我们正在尝试在 Fuse ESB 7.1.0 中使用 osgi 安装包。在这个包中，在骆驼上下文中，我们使用如下：

```
<camelContext xmlns="http://camel.apache.org/schema/spring">
    <endpoint uri="http://IPADDRESS:8080/LOB_Webservice/LOBSampleWebService?throwExceptionOnFailure=false" id="callLOBServer"/>
    <route>
        <from uri="cxf:bean:lobclient?dataFormat=MESSAGE"/>
        <to uri="log:output"/>
        <bean ref="enrichBean"/>
        <to uri="xslt:etc/8.xsl"/>
         <bean ref="enrichBean"/>
         <to ref="callLOBServer"/>
         <bean ref="enrichBean"/>
        ***<to uri="xslt:etc/3.xsl"/>***
         <bean ref="enrichBean"/>
        <to uri="xslt:etc/7.xsl"/> 
        <bean ref="enrichBean"/>
        <to uri="log:output"/> 
    </route>
</camelContext> 
```

上面的 3.xsl 使用的是`XSLT 2.0`.

当我们尝试安装它时，它会失败并显示以下信息：

```
15:11:23,047 | ERROR | ExtenderThread-4 | XsltErrorListener                | 147 - org.apache.camel.camel-core - 2.10.0.fuse-71-047 | A location step was expected following the '/' or '//' token.; Line#: 8; Column#: 77
15:11:23,047 | ERROR | ExtenderThread-4 | ContextLoaderListener            | 113 - org.springframework.osgi.extender - 1.2.1 | Application context refresh failed (OsgiBundleXmlApplicationContext(bundle=org.apache.camel.camel-example-cxf-proxy, config=osgibundle:/META-INF/spring/*.xml))
java.lang.StackOverflowError
    at java.security.AccessController.doPrivileged(Native Method)[:1.7.0_07]
    at org.osgi.framework.FrameworkUtil.getBundle(FrameworkUtil.java:208)[karaf.jar:2.3.0.fuse-71-047]
    at org.ops4j.pax.logging.util.OsgiUtil.getBundleOrNull(OsgiUtil.java:114)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.OsgiThrowableRenderer.getClassDetail(OsgiThrowableRenderer.java:148)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.OsgiThrowableRenderer.formatElement(OsgiThrowableRenderer.java:135)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.OsgiThrowableRenderer.doRender(OsgiThrowableRenderer.java:105)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.OsgiThrowableRenderer.doRender(OsgiThrowableRenderer.java:52)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.spi.ThrowableInformation.getThrowableStrRep(ThrowableInformation.java:89)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.spi.LoggingEvent.getThrowableStrRep(LoggingEvent.java:413)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:313)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.RollingFileAppender.subAppend(RollingFileAppender.java:276)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.WriterAppender.append(WriterAppender.java:162)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.Category.callAppenders(Category.java:193)[4:org.ops4j.pax.logging.pax-logging-api:1.7.0]
    at org.apache.log4j.Category.forcedLog(Category.java:365)[4:org.ops4j.pax.logging.pax-logging-api:1.7.0]
    at org.apache.log4j.Category.log(Category.java:772)[4:org.ops4j.pax.logging.pax-logging-api:1.7.0]
    at org.ops4j.pax.logging.service.internal.PaxLoggerImpl.error(PaxLoggerImpl.java:159)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.ops4j.pax.logging.internal.TrackingLogger.error(TrackingLogger.java:96)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.ops4j.pax.logging.slf4j.Slf4jLogger.error(Slf4jLogger.java:911)[4:org.ops4j.pax.logging.pax-logging-api:1.7.0]
    at org.apache.camel.builder.xml.XsltErrorListener.fatalError(XsltErrorListener.java:44)[147:org.apache.camel.camel-core:2.10.0.fuse-71-047]
    at org.apache.xpath.compiler.XPathParser.error(XPathParser.java:614)[:]
    at org.apache.xpath.compiler.XPathParser.RelativeLocationPath(XPathParser.java:1639)[:] 
```

这里也是的内容`3.xsl`。

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="return">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
         <ordertotal>
            <xsl:value-of select="sum(orderDetails/(itemPrice * itemQty))"/>
         </ordertotal>
      </xsl:copy>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

但是当我们尝试用等效的 XSLT 1.0 功能替换 3.xsl 时，它工作正常。作为要求的一部分，我们只需要使用 XSLT 2.0。

有人可以帮忙吗？谢谢。

最新的堆栈跟踪..

```
16:06:46,210 | ERROR | ExtenderThread-2 | XsltErrorListener                | 147 - org.apache.camel.camel-core - 2.10.0.fuse-71-047 | A location step was expected following the '/' or '//' token.; Line#: 8; Column#: 78
16:06:46,210 | ERROR | ExtenderThread-2 | ContextLoaderListener            | 113 - org.springframework.osgi.extender - 1.2.1 | Application context refresh failed (OsgiBundleXmlApplicationContext(bundle=org.apache.camel.camel-example-cxf-proxy, config=osgibundle:/META-INF/spring/*.xml))
java.lang.StackOverflowError
    at java.util.concurrent.ConcurrentHashMap.hash(ConcurrentHashMap.java:332)[:1.7.0_07]
    at java.util.concurrent.ConcurrentHashMap.putIfAbsent(ConcurrentHashMap.java:1144)[:1.7.0_07]
    at java.lang.ClassLoader.getClassLoadingLock(ClassLoader.java:462)[:1.7.0_07]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:403)[:1.7.0_07]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410)[:1.7.0_07]
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)[:1.7.0_07]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:410)[:1.7.0_07]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)[:1.7.0_07]
    at org.apache.felix.framework.ExtensionManager$ExtensionManagerWiring.getClassByDelegation(ExtensionManager.java:873)
    at org.apache.felix.framework.BundleWiringImpl.searchImports(BundleWiringImpl.java:1520)
    at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1466)
    at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:75)
    at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1882)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)[:1.7.0_07]
    at org.apache.felix.framework.Felix.loadBundleClass(Felix.java:1814)
    at org.apache.felix.framework.BundleImpl.loadClass(BundleImpl.java:929)
    at org.springframework.osgi.util.BundleDelegatingClassLoader.findClass(BundleDelegatingClassLoader.java:99)[114:org.springframework.osgi.core:1.2.1]
    at org.springframework.osgi.util.BundleDelegatingClassLoader.loadClass(BundleDelegatingClassLoader.java:156)[114:org.springframework.osgi.core:1.2.1]
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)[:1.7.0_07]
    at org.ops4j.pax.logging.util.OsgiUtil.loadClass(OsgiUtil.java:99)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.OsgiThrowableRenderer.findClass(OsgiThrowableRenderer.java:221)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.OsgiThrowableRenderer.formatElement(OsgiThrowableRenderer.java:134)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.OsgiThrowableRenderer.doRender(OsgiThrowableRenderer.java:105)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.OsgiThrowableRenderer.doRender(OsgiThrowableRenderer.java:52)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.spi.ThrowableInformation.getThrowableStrRep(ThrowableInformation.java:89)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.spi.LoggingEvent.getThrowableStrRep(LoggingEvent.java:413)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:313)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.RollingFileAppender.subAppend(RollingFileAppender.java:276)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.WriterAppender.append(WriterAppender.java:162)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.apache.log4j.Category.callAppenders(Category.java:193)[4:org.ops4j.pax.logging.pax-logging-api:1.7.0]
    at org.apache.log4j.Category.forcedLog(Category.java:365)[4:org.ops4j.pax.logging.pax-logging-api:1.7.0]
    at org.apache.log4j.Category.log(Category.java:772)[4:org.ops4j.pax.logging.pax-logging-api:1.7.0]
    at org.ops4j.pax.logging.service.internal.PaxLoggerImpl.error(PaxLoggerImpl.java:159)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.ops4j.pax.logging.internal.TrackingLogger.error(TrackingLogger.java:96)[3:org.ops4j.pax.logging.pax-logging-service:1.7.0]
    at org.ops4j.pax.logging.slf4j.Slf4jLogger.error(Slf4jLogger.java:911)[4:org.ops4j.pax.logging.pax-logging-api:1.7.0]
    at org.apache.camel.builder.xml.XsltErrorListener.fatalError(XsltErrorListener.java:44)[147:org.apache.camel.camel-core:2.10.0.fuse-71-047]
    at org.apache.xpath.compiler.XPathParser.error(XPathParser.java:614)[:]
    at org.apache.xpath.compiler.XPathParser.RelativeLocationPath(XPathParser.java:1639)[:]
    at org.apache.xpath.compiler.XPathParser.LocationPath(XPathParser.java:1597)[:]
    at org.apache.xpath.compiler.XPathParser.PathExpr(XPathParser.java:1317)[:]
    at org.apache.xpath.compiler.XPathParser.UnionExpr(XPathParser.java:1236)[:]
    at org.apache.xpath.compiler.XPathParser.UnaryExpr(XPathParser.java:1142)[:]
    at org.apache.xpath.compiler.XPathParser.MultiplicativeExpr(XPathParser.java:1063)[:] 
```

输入 XML 文件

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:fetchOrderListResponse xmlns:ns2="http://impl.lob.wipro.com/">
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderDetails>
               <itemPrice>50.0</itemPrice>
               <itemQty>2</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>37516016-D71B-4790-951F-55D00B0CC159</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>39.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>6095ABC7-0D0D-4B2E-92E5-80F24E9092B8</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>84EC371D-40CA-455E-A0FA-7EA733E9BFD3</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>54712493-2172-4ADB-814B-BC7AA0BB72C3</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>565.0</itemPrice>
               <itemQty>1</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>9A5030BE-F95F-4C62-B5A2-41FF85423218</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>4.0</itemPrice>
               <itemQty>90</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>65A8B3BE-D407-43D8-8754-EA1E26AA56E4</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>0BDCB222-0117-47A9-8813-DF03A1D19E5E</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>8E4220DC-884B-47BC-A565-E26B80BA5249</orderId>
            <ordertotal>0.0</ordertotal>
           <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>10.0</itemPrice>
               <itemQty>4</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>5A2DF895-BB0F-4039-80DB-F44CED31697B</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>20.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>8034FBF4-B573-4B19-BDF5-FAF6C4247A55</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>60161E3E-3C4A-4CE6-AAC3-E4D2BC240046</orderId>
            <ordertotal>0.0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
      </ns2:fetchOrderListResponse>
   </soap:Body>
</soap:Envelope> 
```

XSLT 如下：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
     </xsl:template>

     <xsl:template match="ordertotal">
         <xsl:copy>
            <xsl:value-of select="sum(../orderDetails/(itemPrice*itemQty))" />
         </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

预期输出..

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <ns2:fetchOrderListResponse xmlns:ns2="http://impl.lob.wipro.com/">
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderDetails>
               <itemPrice>50.0</itemPrice>
               <itemQty>2</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>37516016-D71B-4790-951F-55D00B0CC159</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>39.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>6095ABC7-0D0D-4B2E-92E5-80F24E9092B8</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>84EC371D-40CA-455E-A0FA-7EA733E9BFD3</orderId>
            <ordertotal>217</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>54712493-2172-4ADB-814B-BC7AA0BB72C3</orderId>
            <ordertotal>0</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>565.0</itemPrice>
               <itemQty>1</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>9A5030BE-F95F-4C62-B5A2-41FF85423218</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>4.0</itemPrice>
               <itemQty>90</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>65A8B3BE-D407-43D8-8754-EA1E26AA56E4</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>0BDCB222-0117-47A9-8813-DF03A1D19E5E</orderId>
            <ordertotal>925</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <orderId>8E4220DC-884B-47BC-A565-E26B80BA5249</orderId>
            <ordertotal>0</ordertotal>
           <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
         <return>
            <customerOrderNumber>1</customerOrderNumber>
            <deliverydate>2013-02-06T00:00:00+05:30</deliverydate>
            <orderDetails>
               <itemPrice>10.0</itemPrice>
               <itemQty>4</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>5A2DF895-BB0F-4039-80DB-F44CED31697B</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderDetails>
               <itemPrice>20.0</itemPrice>
               <itemQty>3</itemQty>
               <itemUnit>0</itemUnit>
               <orderDetailsId>8034FBF4-B573-4B19-BDF5-FAF6C4247A55</orderDetailsId>
               <camelAddedDtlField>0.1</camelAddedDtlField>
            </orderDetails>
            <orderId>60161E3E-3C4A-4CE6-AAC3-E4D2BC240046</orderId>
            <ordertotal>100</ordertotal>
            <camelAddedHdrField>0.0</camelAddedHdrField>
         </return>
      </ns2:fetchOrderListResponse>
   </soap:Body>
</soap:Envelope> 
```

从日志中......（重复打印......）

```
16:06:45,883 | ERROR | ExtenderThread-2 | XsltErrorListener                | 147 - org.apache.camel.camel-core - 2.10.0.fuse-71-047 | A location step was expected following the '/' or '//' token.; Line#: 8; Column#: 78
javax.xml.transform.TransformerException: A location step was expected following the '/' or '//' token.
    at org.apache.xpath.compiler.XPathParser.error(XPathParser.java:610)[:]
    at org.apache.xpath.compiler.XPathParser.RelativeLocationPath(XPathParser.java:1639)[:]
    at org.apache.xpath.compiler.XPathParser.LocationPath(XPathParser.java:1597)[:]
    at org.apache.xpath.compiler.XPathParser.PathExpr(XPathParser.java:1317)[:]
    at org.apache.xpath.compiler.XPathParser.UnionExpr(XPathParser.java:1236)[:]
    at org.apache.xpath.compiler.XPathParser.UnaryExpr(XPathParser.java:1142)[:]
    at org.apache.xpath.compiler.XPathParser.MultiplicativeExpr(XPathParser.java:1063)[:]
    at org.apache.xpath.compiler.XPathParser.AdditiveExpr(XPathParser.java:1005)[:]
    at org.apache.xpath.compiler.XPathParser.RelationalExpr(XPathParser.java:930)[:]
    at org.apache.xpath.compiler.XPathParser.EqualityExpr(XPathParser.java:870)[:]
    at org.apache.xpath.compiler.XPathParser.AndExpr(XPathParser.java:834)[:]
    at org.apache.xpath.compiler.XPathParser.OrExpr(XPathParser.java:807)[:]
    at org.apache.xpath.compiler.XPathParser.Expr(XPathParser.java:790)[:]
    at org.apache.xpath.compiler.XPathParser.Argument(XPathParser.java:1469)[:]
    at org.apache.xpath.compiler.XPathParser.FunctionCall(XPathParser.java:1537)[:]
    at org.apache.xpath.compiler.XPathParser.PrimaryExpr(XPathParser.java:1446)[:]
    at org.apache.xpath.compiler.XPathParser.FilterExpr(XPathParser.java:1345)[:]
    at org.apache.xpath.compiler.XPathParser.PathExpr(XPathParser.java:1278)[:]
    at org.apache.xpath.compiler.XPathParser.UnionExpr(XPathParser.java:1236)[:]
    at org.apache.xpath.compiler.XPathParser.UnaryExpr(XPathParser.java:1142)[:]
    at org.apache.xpath.compiler.XPathParser.MultiplicativeExpr(XPathParser.java:1063)[:]
    at org.apache.xpath.compiler.XPathParser.AdditiveExpr(XPathParser.java:1005)[:]
    at org.apache.xpath.compiler.XPathParser.RelationalExpr(XPathParser.java:930)[:]
    at org.apache.xpath.compiler.XPathParser.EqualityExpr(XPathParser.java:870)[:]
    at org.apache.xpath.compiler.XPathParser.AndExpr(XPathParser.java:834)[:]
    at org.apache.xpath.compiler.XPathParser.OrExpr(XPathParser.java:807)[:]
    at org.apache.xpath.compiler.XPathParser.Expr(XPathParser.java:790)[:]
at org.apache.xpath.compiler.XPathParser.initXPath(XPathParser.java:129)[:]
    at org.apache.xpath.compiler.XPathParser.initXPath(XPathParser.java:157)[:]
    at org.apache.xpath.compiler.XPathParser.initXPath(XPathParser.java:157)[:]
    at org.apache.xpath.compiler.XPathParser.initXPath(XPathParser.java:157)[:]
    at org.apache.xpath.compiler.XPathParser.initXPath(XPathParser.java:157)[:]
    at org.apache.xpath.compiler.XPathParser.initXPath(XPathParser.java:157)[:]
    at org.apache.xpath.compiler.XPathParser.initXPath(XPathParser.java:157)[:]
    at org.apache.xpath.compiler.XPathParser.initXPath(XPathParser.java:157)[:]
    at org.apache.xpath.compiler.XPathParser.initXPath(XPathParser.java:157)[:]
    at org.apache.xpath.compiler.XPathParser.initXPath(XPathParser.java:157)[:]
    at org.apache.xpath.compiler.XPathParser.initXPath(XPathParser.java:157)[:] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-11T15:43:13.660

以防万一，如果在使用**Karaf + Apache camel**时遇到如下所述的 XSLT 2.0 错误，只需强制**camel xslt 组件**使用 saxon (camel-saxon) 而不是 JDK 中的默认值。

如果您在**karaf 4.x+中创建*****新节点***并且使用根节点相同的 xslt 组件可以工作，但新节点将尝试从 JDK 选择 xslt 处理器，也会发生这种情况。

 ****问题（错误示例）：**

```
 javax.xml.transform.TransformerConfigurationException: Error checking type of the expression 'funcall(current-dateTime, [])'. 
```

**解决方案（示例）：**

```
<to uri="xslt:transformers/XSLT-Mappers/CustomerService-Response.xsl?saxon=true" /> 
```**

# android - 在android中使用轮子设置时间

> ID：15358365
> 
> 赞同：0
> 
> 时间：2013-03-12T10:11:50.917
> 
> 标签：android

我正在使用 android 轮作为时间选择器并获取如下值

```
private void SetTime(Context activity, int hour, int minute) {                  
    LayoutInflater inf = LayoutInflater.from(activity);
    // layout of alert box contains
    View view = inf.inflate(R.layout.wheel, null);

    final WheelView hours = (WheelView) view.findViewById(R.id.hours);
    hours.setViewAdapter(new NumericWheelAdapter(activity, 0, 23,"%02d"));          
    hours.setCyclic(true);
    hours.setCurrentItem(expiryHour);
    Log.d(TAG, "for expiryHour123456 ---> " + expiryHour);

    final WheelView mins = (WheelView) view.findViewById(R.id.minutes);
    mins.setViewAdapter(new Mywheel(activity, 0, 59,"%02d"));
    mins.setCyclic(true);           
    mins.setCurrentItem(expiryMinute);
    Log.d(TAG, "for expiryMinute123456 ---> " + expiryMinute);

    new AlertDialog.Builder(activity)
    .setMessage("Set Time For Post To AutoDelete")
    .setView(view)              
    .setPositiveButton("Set",
            new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {

            expiryHour = hours.getCurrentItem();
            Log.d(TAG, "for expiryHour ---> " + expiryHour);
            if(mins.getCurrentItem() > 0){
                expiryMinute = mins.getCurrentItem() + 4;
                Log.d(TAG, "for expiryMinute ---> " + expiryMinute);
            }else{
                expiryMinute = mins.getCurrentItem();
            }
        }
    });
} 
```

当我设置时间时，我得到了正确的值，但是，如果我想更改时间一次又一次地设置时间，分钟值显示错误。例如，首先我将其设置为 2:10，然后当我打开它的显示 2:14 时我想现在进行更改，这不应该发生。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:24:07.847

请检查您的代码中的以下几行。

```
if(mins.getCurrentItem() > 0){
         expiryMinute = mins.getCurrentItem() + 4;
         Log.d(TAG, "for expiryMinute ---> " + expiryMinute);
} 
```

这可能是问题的原因。增加 mins 值是否有任何具体原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:43:36.597

解决了像这样设置分钟轮的值 mins.setCurrentItem(expiryMinute-4);

```
final WheelView mins = (WheelView) view.findViewById(R.id.minutes);
            mins.setViewAdapter(new Mywheel(activity, 0, 59,"%02d"));
            mins.setCyclic(true);
            if(expiryMinute!=0){
            mins.setCurrentItem(expiryMinute-4);
            } 
```

# c# - 配置被我毁了

> ID：15358368
> 
> 赞同：0
> 
> 时间：2013-03-12T10:11:57.117
> 
> 标签：c#, wcf

我已经为我正在尝试编写的测试 Web 服务填充了我的 app.config 文件。

我现在得到的错误是：

> 在 ServiceModel 客户端配置部分中找不到引用合同“LocationService.ILocationServices”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。

我有一个域 www.mydomain.com，要在那里获取文件，我只需将它们 ftp 到 ftp.mydomain.com - root。

我的配置文件有这个：

```
 <system.serviceModel>
    <services>
      <service name="CraigsService.LocationServices">
        <endpoint address="" binding="basicHttpBinding" contract="CraigsService.ILocationServices">
          <identity>
            <dns value="www.mydomain.com" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://www.mydomain.com/CraigsService/LocationServices/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="True" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

我所有的类都在 CraigsService 命名空间中。

我的接口被声明：

```
public interface ILocationServices 
```

但我无法让它工作。我的域名应该在 App.Config 中吗？我已经尝试过 Localhost （您还如何在本地调试？）。

对于我的生活，我无法发现问题。希望有人可以提供帮助。

**编辑：问题是我将一个网站和我的网络服务部署到同一个文件夹**中，我想！删除所有文件并重新部署后，似乎可以了。但是，现在我需要创建一个子文件夹 /services/，并将服务部署到该文件夹​​中。App.Config 中需要更改哪些内容？

如果我只是将文件夹更改为我部署的 /services/ ，我会得到：

**找不到类型“CraigsService.LocationServices”，作为 ServiceHost 指令中的服务属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:44:06.437

似乎您已经更改了指向 .Net 类型的命名空间限定名称的引用，以包含命名空间“CraigsService”，而不是合同接口的实际命名空间和实现服务合同的类型。要么更改配置 xml 和 @ServiceHost 指令中的名称，要么将类型移动到新的命名空间。例如，你可能会改变

```
<% @ServiceHost Service=”CraigsService.LocationServices” ... 
```

到

```
<% @ServiceHost Service=”TheActualNameSpace.LocationServices” ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:45:34.360

问题是我的托管公司控制面板上的设置错误。我要拆分的文件夹要设置为 iis 应用程序根目录。

# php - imagemagick 最大为 950 像素

> ID：15358369
> 
> 赞同：0
> 
> 时间：2013-03-12T10:11:58.200
> 
> 标签：php, codeigniter, imagemagick

我正在使用代码点火器来做一些使用 imagemagick 的图像大小调整。它像魔术一样工作：P

唯一的问题是，当我上传图像时，我希望它调整为 1280 像素，但它似乎最大为 950 像素。看起来这是最大宽度。我在想你也许可以删除更新 php.ini 文件到 1280px。

有人知道如何更新吗？或者如果有什么办法？

# c# - 如何使用全局挂钩确定按键的主机应用程序？

> ID：15358371
> 
> 赞同：3
> 
> 时间：2013-03-12T10:12:02.960
> 
> 标签：c#, winapi, com, hook, keyboard-hook

我对在特定应用程序（如 Microsoft Word）的上下文中进行键盘监听感兴趣。谷歌搜索表明，解决这个问题的唯一方法是使用全局键盘挂钩。

全局键盘挂钩监听*所有*活动应用程序中的*所有*按键事件。例如，用户在 Microsoft Word 中输入文本（我需要捕捉这些事件），同时在 Facebook 上给他的朋友写一些消息。这意味着我的键盘监听器也处理 Facebook 消息，但这对我来说是多余的信息。

 *所以我的问题是，如何确定最后按下的键的主机应用程序？或者换句话说，我如何确定当前活动的应用程序以了解按下键的“上下文”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-27T02:58:51.190

如果 GetForegroundWindow 的想法不适合你。由于您已经有一个使用 Word 加载的 COM 插件[SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990(v=vs.85).aspx)，因此最后一个参数允许您传入线程 ID。因此，在您的 COM 插件中，您可以为 Word 使用的每个线程添加一个挂钩，或者通过反复试验找出您需要挂钩的线程。 [所有新线程都可以通知DllMain](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682583(v=vs.85).aspx)（或 DllEntryPoint），因此这可能是设置钩子并释放它们的好地方。

最终防病毒软件可能会开始警告这些类型的钩子，但到目前为止，我编写的使用它们的应用程序已安装在 100,000 台 PC 上，并且我们已经收到了这种性质的零支持电话。真是太神奇了。*

# objective-c - 如何检测 UIGesture 被添加到视图中。（目标 c）

> ID：15358373
> 
> 赞同：4
> 
> 时间：2013-03-12T10:12:20.160
> 
> 标签：objective-c, uigesturerecognizer

我必须检查是否有任何手势附加到视图。实际上，我需要限制按钮的触摸动作，如果它上面附加了任何手势识别器。（我正在使用`UILongPressGestureRecognizer`）。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:04:28.143

每个 UIView 对象都有一个名为的属性`gestureRecognizers`，它是附加到该视图的所有手势识别器的数组，如果没有附加手势识别器，则返回一个空数组。

请参阅[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/gestureRecognizers)以获取苹果参考。

所以：

```
if (yourView.gestureRecognizers.count ==0 ){
   //let the touch down action work
}else{
   //restrict the touch down action
} 
```

# sql - 如何sql选择具有两种状态的产品？

> ID：15358380
> 
> 赞同：2
> 
> 时间：2013-03-12T10:12:41.530
> 
> 标签：sql, sql-server, database, tsql

我有一张`Products`桌子

有`ProductId`和`StatusId`列

如何选择具有`StatusId`1 和 2（两行）的所有产品？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T10:24:33.140

要选择具有两种状态 (1,2) 的产品：

[**Sql-Server 小提琴演示**](http://sqlfiddle.com/#!3/ae831/1)

```
SELECT ProductId 
FROM products
WHERE status IN (1, 2)
GROUP BY ProductId
HAVING COUNT(distinct status) = 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:18:53.207

尝试此查询以获取同时具有状态 1 和 2 的产品的记录

```
SELECT DISTINCT a.ProductId 
FROM Products a, Products b 
WHERE a.ProductId = b.ProductId 
  AND a.StatusId = 1 
  AND b.StatusId = 2; 
```

使用 ANSI 连接

```
SELECT DISTINCT a.ProductId 
FROM Products a INNER JOIN Products b 
ON a.ProductId = b.ProductId 
WHERE a.StatusId = 1 
  AND b.StatusId = 2; 
```

[**小提琴**](http://sqlfiddle.com/#!2/1f9b0/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:20:57.897

```
SELECT DISTINCT a.ProductId 
FROM Products a
INNER JOIN Products b ON a.ProductId = b.ProductId
WHERE a.StatusId IN (1, 2) 
```

# c# - 字符串 C# 中的正则表达式匹配数

> ID：15358382
> 
> 赞同：0
> 
> 时间：2013-03-12T10:12:45.880
> 
> 标签：c#, regex

我正在尝试从使用 Regex 的收据中获取总价。

格式为：

```
TOTAL     15.40 
```

目标只是从字符串中获取价格。

我开始了`TOTAL[ .0-9]`，但这只返回了这个词`TOTAL`。

我四处搜索并将这个放在一起，但无法让它工作：

```
TOTAL(\\s+)(?<value>[.0-9]+) 
```

我制作了以下代码：

```
sRegex = "TOTAL(\\s+)(?<value>[.0-9]+)";    
Match match = Regex.Match(this.sHTMLResult, sRegex, RegexOptions.None);
if (match.Success)
    Console.Out.WriteLine("regex good");
else
    Console.Out.WriteLine("regex fail"); 
```

但是正则表达式不会返回成功。

我尝试从格式如下的 HTML 文件中获取它：

```
TOTAL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;15.40 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:21:31.720

`(?(\b.*\b\s)([0-9.]*[0-9]))`应该管用。

我建议你使用[Regex hero 在线编辑器](http://regexhero.net/tester/)，它至少对我很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:19:28.040

您可能会使用：

`"TOTAL *(\d*.\d*)"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T10:26:24.910

您的初始正则表达式适用于提供的文本：

```
TOTAL(\\s+)(?<value>[.0-9]+) 
```

但是，正如您在评论中指出的那样，这是来自 HTML 并包含字符实体，没有空格，因此您还需要考虑这些：

```
TOTAL(\\s+|(&nbsp;)+)(?<value>[.0-9]+) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:19:40.293

您的正则表达式有效（按照建议检查您的输入），但它有一个小错误：它会捕获数字和点的任何组合（如 333.3.2.22 ....）更好的一个是：

```
TOTAL\s+(?<value>\d+\.\d+) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-12T10:16:51.050

如果在 TOTAL 和数量之间只有一个空格，则可以在正则表达式中使用空格。此外，试试这个：

```
sRegex = "TOTAL ([0-9]+\.[0-9]+)"; 
```

有关 MSDN 参考，请参见[此处](http://msdn.microsoft.com/en-us/library/hs600312.aspx)。

# api - url mvc 4 api中的数组

> ID：15358384
> 
> 赞同：0
> 
> 时间：2013-03-12T10:12:51.053
> 
> 标签：api, asp.net-mvc-4

我想从应用程序调用 API。我需要将一个数组传递给 api。我已经读过可以通过键入以下内容：

```
string url = http://urltje?ids=1&ids=2 
```

这将导致其中包含 1 和 2 的整数数组。

现在我正在使用 mvc 4，它似乎不再工作了。我现在该怎么做？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:17:32.103

您是否尝试过添加`[FromUri]`get 方法？

```
GetUrls([FromUri] int[] ids) 
```

# java - 打开起始页后未创建 SessionScoped bean

> ID：15358387
> 
> 赞同：3
> 
> 时间：2013-03-12T10:12:58.597
> 
> 标签：java, spring, jsf

嗨，我是 jsf 的新手，遇到了这样的问题。我有这个代码的起始页：

```
<ui:repeat id="repeat" var="news" value="#{newsForm.newsList}">
    <div id="news-table">
        <div id="news-list-title">
            <h:outputText value="#{messages['body.news.title']}" />
            <h:outputText style="margin-left:10px;" value="#{news.newsTitle}" />
        </div>
        <div id="news-list-date">
            <h:outputText value="#{news.newsDate}">
                <f:convertDateTime pattern="dd/MM/yyyy" />
            </h:outputText>
        </div>
        <div id="news-list-brief">
            <h:outputText value="#{news.brief}" />
        </div>
    </div>
    <div id="links-style-area">
        <h:commandLink action="#{controller.view(news.id)}"
            value="#{messages['body.label.view']}" />
        <h:commandLink action="#{controller.edit(news.id)}"
            value="#{messages['body.label.edit']}" />
        <h:selectBooleanCheckbox id="checkbox"
            value="#{newsForm.checkboxes[news.id]}" />
    </div>
</ui:repeat> 
```

我有 2 个托管 bean，一个是我的控制器 bean（用于删除、创建、更新新闻），第二个是用于在数据库（newsForm）中存储有关新闻的信息。所有bean都有`@SessionScoped`注释。控制器 bean 具有从数据库获取所有新闻并将其设置为 newsForm bean 的后构造函数。但是当我启动应用程序时，我看到空白页面（因为我的 Controller bean 没有创建）。但是，当我按下调用控制器 bean 方法的链接时，我会在应用程序控制台中创建控制器 bean 并处理后构造函数。

也许我错了，但我认为当 session 创建由 jsf 创建的所有 SessionScoped bean 时。

如果我错了，请纠正我或提供建议，如何让我的应用程序在我打开开始页面时显示所有新闻。

**更新**

我在 Controller bean 中的 post 构造函数：

```
@PostConstruct
public void init() {
   try {
         list();
    } catch (NewsManagerException e) {
    }
} 
```

列表方法：

```
public String list() throws NewsManagerException {
        newsForm.setNews(new News());
        newsForm.setCheckboxes(new HashMap<Integer, Boolean>());
        newsForm.setNewsList(newsDao.getNewsList());
        setAttribute(PREVIOUS_PAGE, LIST);
        return LIST;
    } 
```

**更新 2**

这是 ControllerBean（这是 Struts 中的 Action 类的模拟）

```
 public final class ControllerBean implements Serializable {
    private static final String PREVIOUS_PAGE = "previousPage";
    private static final String LIST = "news";
    private static final String EDIT = "edit";
    private static final String VIEW = "view";
    private static final String REDIRECT = "?faces-redirect=true";
    private final static Log log = LogFactory.getLog(ControllerBean.class);
    private INewsDao newsDao;
    private NewsBean newsForm;

    public ControllerBean() {
    }

    @PostConstruct
    public void init() {
        list();
    }

    public String list() {
        newsForm.setNews(new News());
        newsForm.setCheckboxes(new HashMap<Integer, Boolean>());
        try {
            newsForm.setNewsList(newsDao.getNewsList());
        } catch (NewsManagerException e) {
            log.error(e);
        }
        setAttribute(PREVIOUS_PAGE, LIST);
        return LIST;
    }

    public String add() {
        News news = new News();
        news.setNewsDate(new Date());
        newsForm.setNews(news);
        return EDIT;
    }

    private void setAttribute(String name, String value) {
        Map<String, Object> sessionMap = FacesContext.getCurrentInstance()
                .getExternalContext().getSessionMap();
        sessionMap.put(name, value);
    }

    private String getAttribute(String name) {
        Map<String, Object> sessionMap = FacesContext.getCurrentInstance()
                .getExternalContext().getSessionMap();
        return (String) sessionMap.get(name);
    }

    public String save() {
        int id = newsForm.getNews().getId();
        setAttribute(PREVIOUS_PAGE, VIEW);
        try {
            if (id == 0) {
                newsDao.createNews(newsForm.getNews());
                return VIEW;
            }
            newsDao.editNews(newsForm.getNews());
        } catch (NewsManagerException e) {
            log.error(e);
        }
        return VIEW;
    }

    public String edit(int id) {
        try {
            News news = newsDao.getNewsById(id);
            newsForm.setNews(news);
        } catch (NewsManagerException e) {
            log.error(e);
        }
        return EDIT;
    }

    public String view(int id) {
        try {
            setAttribute(PREVIOUS_PAGE, VIEW);
            newsForm.setNews(newsDao.getNewsById(id));
        } catch (NewsManagerException e) {
            log.error(e);
        }
        return VIEW;
    }

    public String cancel() {
        String page = getAttribute(PREVIOUS_PAGE);
        News news = newsForm.getNews();
        try {
            if (news.getId() != 0) {
                int id = news.getId();
                news = newsDao.getNewsById(id);
                newsForm.setNews(news);
            }
        } catch (NewsManagerException e) {
            log.error(e);
        }
        return page;
    }

    public String delete() {
        try {
            setAttribute(PREVIOUS_PAGE, LIST);
            Map<Integer, Boolean> allCheckboxes = newsForm.getCheckboxes();
            Set<Integer> checkboxes = newsForm.getCheckboxes().keySet();
            Set<Integer> checkedCheckboxes = new HashSet<>();
            for (Integer id : checkboxes) {
                boolean value = allCheckboxes.get(id);
                if (value) {
                    checkedCheckboxes.add(id);
                }
            }
            if (checkedCheckboxes.size() != 0) {
                newsDao.deleteNewsById(checkedCheckboxes.toArray());
            } else {
                Integer[] delete = { newsForm.getNews().getId() };
                newsDao.deleteNewsById(delete);
            }
            newsForm.setNewsList(newsDao.getNewsList());
        } catch (NewsManagerException e) {
            log.error(e);
        }
        return list() + REDIRECT;
    }

    public INewsDao getNewsDao() {
        return newsDao;
    }

    public void setNewsDao(INewsDao newsDao) {
        this.newsDao = newsDao;
    }

    public NewsBean getNewsForm() {
        return newsForm;
    }

    public void setNewsForm(NewsBean newsForm) {
        this.newsForm = newsForm;
    }

} 
```

NewsBean（简单的 bean 用作 Struts 中的 ActionForm 元素）

```
public final class NewsBean implements Serializable {
    private static final long serialVersionUID = 1L;
    private News news;
    private List<News> newsList;
    private Map<Integer, Boolean> checkboxes = new HashMap<>();

    public NewsBean() {
    }

    public News getNews() {
        return news;
    }

    public void setNews(News news) {
        this.news = news;
    }

    public List<News> getNewsList() {
        return newsList;
    }

    public void setNewsList(List<News> newsList) {
        this.newsList = newsList;
    }

    public Map<Integer, Boolean> getCheckboxes() {
        return checkboxes;
    }

    public void setCheckboxes(Map<Integer, Boolean> checkboxes) {
        this.checkboxes = checkboxes;
    }
} 
```

映射

```
<managed-bean>
        <managed-bean-name>controller</managed-bean-name>
        <managed-bean-class>com.epam.newsmanagement.beans.ControllerBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
        <managed-property>
            <property-name>newsDao</property-name>
            <value>#{jpaDao}</value>
        </managed-property>
        <managed-property>
            <property-name>newsForm</property-name>
            <value>#{newsForm}</value>
        </managed-property>
    </managed-bean>
    <managed-bean>
        <managed-bean-name>newsForm</managed-bean-name>
        <managed-bean-class>com.epam.newsmanagement.beans.NewsBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:37:41.193

尝试使用 PrerenderView 而不是 post 构造：

从 ControllerBean 中删除 @postconstruct 并添加到您的页面中：

```
<f:metadata>
     <f:event type="preRenderView" listener="#{controller.init()}"/>
</f:metadata> 
```

# jquery - 如何使用 jquery 更改 iframe 中的 html

> ID：15358390
> 
> 赞同：0
> 
> 时间：2013-03-12T10:13:09.157
> 
> 标签：jquery, iframe

我有下面的 html 我的 iframe ID 是动态生成的，现在我想更改我的跨度的 html。

```
<a title="Visit Us on Google+" id="gPlus" class="addthis_button_google_plusone at300b" g:plusone:count="false">
  <div id="___plusone_0">
    <iframe width="100%" scrolling="no" frameborder="0" hspace="0" marginheight="0" marginwidth="0"
    style="position: static; top: 0px; width: 24px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 15px;"
    tabindex="0" vspace="0" id="I0_1363080003291" name="I0_1363080003291"
    src="https://plusone.google.com"
    allowtransparency="true" data-gapiattached="true" title="+1">
        <html lang="en" dir="ltr">
            <head>
            </head>
            <body class="g-rba-Dh-kQa ">
                <div class="Bg" dir="ltr" id="plusone">
                <span id="widget_bounds"><table cellspacing="0" cellpadding="0"><tbody><tr><td>
                <div class="ZRa">
                <span tabindex="0" role="button" title="" class="hAa Ro Bg" id="button" aria-label="Click here to publicly +1 this." aria-pressed="false"><div class="YIa"></div></span></div></td></tr></tbody></table></span></div>
            </body>
        </html>
    </iframe>
  </div>
</a> 
```

现在我想使用 jquery 在“title”标签中添加一些值

```
<div class="ZRa">
<span tabindex="0" role="button" title="" class="hAa Ro Bg" id="button" aria-label="Click here to publicly +1 this." aria-pressed="false"><div class="YIa"></div></span>
</div> 
```

请推荐！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:17:52.660

试试这个，

```
$(document).ready(function () {
$("#___plusone_0")
    .find("iframe")
    .contents()
    .find(".hAa ")
    .attr('title', 'whatever u want');
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:19:36.767

尝试这个

```
$('#___plusone_0').find('span#button').attr('title','yourTitle'); 
```

# django - 异常值：词匹配查询不存在。查找参数为 {'word__iexact': u'abc/action'}

> ID：15358395
> 
> 赞同：0
> 
> 时间：2013-03-12T10:13:17.337
> 
> 标签：django

我正在使用 Django urls.py 从 URL 中提取一个值，这是我的`urls.py`：

```
urlpatterns = patterns('',
    url(r'^word/(?P<w>.+)/$', 'myapp.views.word'),
    url(r'^word/(?P<w>.+$)/action/', 'myapp.views.action'),) 
```

第一项：`myapp.views.word`运行良好并接受输入的变量：`/word/asdf`并且我能够操纵`asdf`我在views.py中的选择方式。第二项`myapp.views.action`给了我错误

```
Exception Value:    
Word matching query does not exist. Lookup parameters were {'word__iexact': u'asdf/action'} 
```

这是我的一部分`views.py`：

```
def action(request, w):
    o = Word.objects.get(word__iexact=w) 
```

我想当用户去的时候，我可以在参数`/word/asdf/action`上运行我的`action`视图。`asdf`我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:23:41.190

您放错`$`了位置，这就是该操作在您的参数中的原因

```
urlpatterns = patterns('',
    url(r'^word/(?P<w>.+)/$', 'myapp.views.word'),
    url(r'^word/(?P<w>.+)/action/$', 'myapp.views.action'),) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:17:36.040

您收到此错误是因为`r'.+'`也匹配“/”字符，并且它表现得很贪婪，因此它匹配 URL 的所有最后部分。出于这个原因，您永远不会调用第二个定义，两者都`/asfd/`将`/asfd/action/`匹配`^word/(?P<w>.+)/$` （请参阅[https://docs.djangoproject.com/en/dev/topics/http/urls/#how-django-processes-a-request](https://docs.djangoproject.com/en/dev/topics/http/urls/#how-django-processes-a-request)，点 # 3)

在你的 url.py 中试试这个：

```
 url(r'^word/(?P<w>.+)/(?P<action>.+)/$', 'myapp.views.action'),) 
```

在你的views.py中

```
def action(request, w, action):
    o = Word.objects.get(word__iexact=w)
    # do something with "action" variable and "o" object
    #... 
```

**否则**，您可以像这样简单地使用不那么贪婪的正则表达式：

```
 url(r'^word/(?P<w>\w+)/$', 'myapp.views.word'),)
     url(r'^word/(?P<w>\w+)/action/$', 'myapp.views.action'),)
     url(r'^word/(?P<w>\w+)/draw/$', 'myapp.views.draw'),)
     # and so on... 
```

有关更多详细信息，您可以随时参考 python 文档（[http://docs.python.org/2/library/re.html#regular-expression-syntax](http://docs.python.org/2/library/re.html#regular-expression-syntax)）

# android - 如何处理纯文本和链接上的 Web 视图的触摸事件。

> ID：15358398
> 
> 赞同：1
> 
> 时间：2013-03-12T10:13:23.150
> 
> 标签：android, android-webview, ontouchlistener

我想在 web 视图的点击事件上显示和隐藏另一个视图。所以我为此目的使用**onTouchListener**，然后 web 视图中的超链接不起作用。我还用我的 Web View 设置了**webviewclient**。但它只跟随 onTouch 事件。所以请建议我一些想法来处理这种情况。谢谢。

# php - 管理 mysql 获取数组

> ID：15358400
> 
> 赞同：0
> 
> 时间：2013-03-12T10:13:25.250
> 
> 标签：php, arrays

我有一个 mysql 表，其中包含我需要以更基本的格式使用的数据。

有身份证号、日期、油、气、电值。

我可以做一个 mysql_fetch_array 带回我需要的所有值，但我需要以与 javascript 图表一起使用的格式查看它们。它们需要采用以下格式：

```
$data = array(array("6/22/2009",425.32),array("6/8/2009",424.84),array("5/26/2009",417.23),array("5/11/2009",390)); 
```

如您所见，我需要日期和油值。然后我需要创建另一个数组，其中包含日期和电值，最后是数据和气体值。

我不确定如何从 mysql_fetch_array 中获取数据并将其添加到数组中，如上所示。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:16:11.803

您可以通过以下`[]`语法附加它：

```
$data = array('oil' => array(), 'gas' => array(), 'electric' => array());
while ($row = mysql_fetch_assoc($result)) {
    $data['oil'][$row['date']] = $row['oil'];
} 
```

这假设所选日期也是唯一的。

* * *

顺便说一句，您应该避免`mysql_*`在新代码中使用函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:45:55.697

您需要使用“数字数组”：

```
 $result = mysql_query(" SELECT date, oil FROM energyprices");
    $i = 0;
    while($row = mysql_fetch_array($result, MYSQL_NUM))
    {
         $oil[$i] = array($row[0], $row[1]);
         $i++;
    } 
```

如果我不理解您的问题，请纠正我，我会相应地编辑我的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:36:23.247

谢谢你的帮助。我已经修改了我的代码来阅读这个：

```
$oil = array('oil' => array());
$result=mysql_query(" SELECT * FROM energyprices");
while ($row = mysql_fetch_assoc($result)) {
$oil[$row['pDate']]['oil'] = $row['oil'];
} 
```

当我 print_r 的数据看起来像这样：

```
Array ( [oil] => Array ( ) [2004-01-01] => Array ( [oil] => 29.73 ) [2004-01-02] => Array ( [oil] => 29.73 )); 
```

我需要它的格式是：

```
$oil = array(
array("6/22/2009",425.32),
array("6/8/2009",424.84),
array("5/26/2009",417.23)); 
```

谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:21:55.337

尝试这个..

```
$finalArray=array();
while ($row = mysql_fetch_array($result)) 
{ 
    $data=array();
    $data[] = $row['date'];
    $data[] = $row['oil'];
    $finalArray[]=$data;
}
print_r($finalArray); //This will print your values in required fromat. 
```

# windows-8 - 现代 UI 应用程序可以编辑系统文件吗？

> ID：15358404
> 
> 赞同：0
> 
> 时间：2013-03-12T10:13:34.067
> 
> 标签：windows-8, permissions, microsoft-metro

基本上我正在考虑构建一个快速应用程序来帮助我设置新的开发站点，我想知道是否可以授予现代 UI 应用程序的权限，以便他们可以编辑系统主机文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:19:14.960

不。请查看此[Windows 应用商店应用程序中的文件和访问权限概述](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)

系统主机文件不在这些文件夹之一中，它通常位于`C:\WINDOWS\system32\drivers\etc`.

**编辑** 一些额外的建议：请看[一下 powershell](http://technet.microsoft.com/en-us/library/hh857337.aspx)，一般来说，命令或批处理文件的形式优于图形 UI 工具，因为它可以在没有用户交互的情况下运行。

# java - Jmx 客户端抛出 InstanceNotFoundException

> ID：15358407
> 
> 赞同：5
> 
> 时间：2013-03-12T10:13:42.163
> 
> 标签：java, intellij-idea, client, classpath, jmx

我有一个 Jmx 客户端，用于测试我编写的 jmx bean。这是客户端的代码：

```
 JMXServiceURL url = new JMXServiceURL("service:jmx:rmi:///jndi/rmi://localhost:8686/jmxrmi");
    JMXConnector jmxc = JMXConnectorFactory.connect(url, null);

    MBeanServerConnection mbsc = jmxc.getMBeanServerConnection();
    ObjectName mbeanName = new ObjectName("com.spmsoftware.processing.ping:type=ProcessingPing");

    ProcessingPing mbeanProxy = JMX.newMBeanProxy(mbsc, mbeanName, ProcessingPing.class, true);
    System.out.println("\nResult = " + mbeanProxy.ping(346, 0).getResultCode());

    jmxc.close(); 
```

ProcessingPing 及其所有依赖项都存在于 IntelliJ 的库中。

我的 jmx 豆是：

```
 public interface ProcessingPing {

        public PingResult ping(Integer environmentId, Integer timeout);
    } 
```

和

```
 @Service("ProcessingPing")
    @ManagedResource(description = "")
    public class ProcessingPingImpl implements ProcessingPing {

        private static final Integer DEFAULT_TIMEOUT = 5000;

        @Autowired
        private PingProcessService pingProcessService;

        @Override
        @ManagedOperation(description = "")
        public PingResult ping(Integer environmentId, Integer timeout) {
            return pingProcessService.run(environmentId, timeout);
        }            
    } 
```

客户端运行时，尝试调用 ping 方法时出现异常：

```
 Caused by: javax.management.InstanceNotFoundException: com.spmsoftware.processing.ping:type=ProcessingPing
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1095)
        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getClassLoaderFor(DefaultMBeanServerInterceptor.java:1444)
        at com.sun.jmx.mbeanserver.JmxMBeanServer.getClassLoaderFor(JmxMBeanServer.java:1308)
        at com.sun.enterprise.v3.admin.DynamicInterceptor.getClassLoaderFor(DynamicInterceptor.java:907)
        at javax.management.remote.rmi.RMIConnectionImpl$4.run(RMIConnectionImpl.java:1346)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.management.remote.rmi.RMIConnectionImpl.getClassLoaderFor(RMIConnectionImpl.java:1342)
        at javax.management.remote.rmi.RMIConnectionImpl.invoke(RMIConnectionImpl.java:795)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)
        at sun.rmi.transport.Transport$1.run(Transport.java:177)
        at sun.rmi.transport.Transport$1.run(Transport.java:174)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.rmi.transport.Transport.serviceCall(Transport.java:173)
        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:553)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:808)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:667)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:722)
        at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:273)
        at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:251)
        at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:160)
        at com.sun.jmx.remote.internal.PRef.invoke(Unknown Source)
        at javax.management.remote.rmi.RMIConnectionImpl_Stub.invoke(Unknown Source)
        at javax.management.remote.rmi.RMIConnector$RemoteMBeanServerConnection.invoke(RMIConnector.java:1017)
    Disconnected from the target VM, address: '127.0.0.1:56621', transport: 'socket'
        at javax.management.MBeanServerInvocationHandler.invoke(MBeanServerInvocationHandler.java:305)
        ... 2 more 
```

我不明白为什么 jmx 似乎能够获取 bean，但不能获取类的实际实例。我猜这是一个类路径问题，但找不到。另一方面，在使用 JConsole 进行测试时，它可以正常工作。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T13:09:27.927

看起来用于注册 MBean 的对象名称与您在尝试检索托管 bean 时使用的对象名称不同。

尝试检查 JConsole 中的对象名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T10:59:14.330

看起来 mbean 中定义的对象名与您在 JMX 客户端代码中提供的对象名不同。对象名称应与您在 java 类中定义的完全匹配，例如使用 spring 公开的下面的类 m bean。

示例 - 下面的行写在类 @ManagedResource(objectName = "com.spmsoftware.processing.ping:type=ProcessingPing"

或者您也可以签入 jconsole.exe 并转到 mbeans 选项卡并在左侧窗格中检查 mbean 的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-13T14:49:56.280

在我的例子中，我忘记创建 Bean（在这些例子中是 ProcessingPingImpl）。

注释解决方案：您可以`@Component`在 bean 和`@ComponentScan("com.company")`@Configuration-Object 上使用。（见[http://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/html/ch06s02.html](http://docs.spring.io/spring-javaconfig/docs/1.0.0.M4/reference/html/ch06s02.html)）

或者您直接在 @Configuration-Object 中创建 bean，如下所示：

```
@Bean
public ProcessingPing processingPing(){
    return new ProcessingPingImpl();
} 
```

XML解决方案：

```
<context:component-scan base-package="com.company" /> 
```

（参见[https://github.com/spring-by-example/spring-by-example/blob/master/enterprise/spring-jmx/src/test/resources/org/springbyexample/jmx/JmxTest-context.xml](https://github.com/spring-by-example/spring-by-example/blob/master/enterprise/spring-jmx/src/test/resources/org/springbyexample/jmx/JmxTest-context.xml) )

或者没有组件扫描：

```
<bean id="processingPing" class="com.company.ProcessingPingImpl" /> 
```

# java - 将 Joda 时间段划分为所需大小的间隔？

> ID：15358409
> 
> 赞同：5
> 
> 时间：2013-03-12T10:13:47.297
> 
> 标签：java, jodatime

我有一个“周期”（P）的时间，由开始时间（S）和结束时间（E）表示。我想将 P 分成大小为 D 的 C 块。也就是说，

P = C * D + R，其中 R 是剩余时间或剩余时间。

例如。

```
S = NOW, E = 10 sec after NOW, D = 3 sec.
Therefore, P = 10 sec, C = 3, R = 1 sec. 
```

我想存储和显示所有块 C 及其开始时间、结束时间和大小。最后，我想存储和显示剩余部分。我如何使用 Joda Time 做到这一点？

API 是否提供了简单的方法和类来执行此操作，或者我将不得不想出一个出路？

这个问题是我在[这里发布的另一个问题的一小部分](https://stackoverflow.com/questions/15355090/how-to-slice-a-period-of-time-into-several-slices-in-joda-time?rq=1)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T11:31:18.913

我不确定这段代码是否是您正在寻找的，但它可能会让您走上正确的轨道。

我假设您有两个 DateTimes 来表示开始日期和结束日期，因为 Joda-Time Period 表示像 1 个月或 2 周这样的时间段。它没有特定的开始或结束，例如表示两个瞬间之间的时间片的间隔。

```
import java.util.*;
import org.joda.time.*;

class Test {
    public static void main(String... args) {
        DateTime now = new DateTime();
        List<Interval> list = splitDuration(now, now.plusSeconds(10), 3, 3 * 1000);

        for(Interval i : list) {
            System.out.println(i.getStart() + " - " +
                               i.getEnd() + " - " +
                               i.toDurationMillis());
        }
    }

    static List<Interval> splitDuration(DateTime start, DateTime end, long chunkAmount, long chunkSize) {
        long millis = start.getMillis();
        List<Interval> list = new ArrayList<Interval>();

        for(int i = 0; i < chunkAmount; ++i) {
            list.add(new Interval(millis, millis += chunkSize));
        }

        list.add(new Interval(millis, end.getMillis()));
        return list;
    }
} 
```

在我的情况下输出：

```
2013-03-12T12:29:01.781+01:00 - 2013-03-12T12:29:04.781+01:00 - 3000
2013-03-12T12:29:04.781+01:00 - 2013-03-12T12:29:07.781+01:00 - 3000
2013-03-12T12:29:07.781+01:00 - 2013-03-12T12:29:10.781+01:00 - 3000
2013-03-12T12:29:10.781+01:00 - 2013-03-12T12:29:11.781+01:00 - 1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-13T12:38:39.600

万一有些在给定时间之间看起来相等，这里是代码

`

```
private List<Interval> splitDateTime(long start, long end, int intervalNo) {
        long interval = (end - start) / intervalNo;
        List<Interval> list = new ArrayList<Interval>();
        for (long i = start + interval; i < end; i += interval) {
            list.add(new Interval(start, i));
            start=start + interval;
        }
        list.add(new Interval(start, end));
        return list;
    } 
```

`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-26T22:57:47.910

Kotlin 变体不会丢失最后剩下的块：

```
/**
 * Splits [Interval] with passed [duration] and returns a list of [Interval]s. The minimum supported duration is a second.
 */
fun Interval.splitBy(duration: Duration): List<Interval> {
    val durationSec = duration.standardSeconds
    val periodSec = toPeriod().toStandardSeconds().seconds
    val chunks = ceil((periodSec / durationSec.toFloat())).toInt()
    var nextStart = start
    return List(chunks) { index ->
        val seconds = if (index < chunks - 1) {
            durationSec
        } else {
            val remainder = periodSec % durationSec
            if (remainder > 0) periodSec % durationSec else durationSec
        }
        Interval(nextStart, nextStart.plusSeconds(seconds.toInt()).also { nextStart = it })
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-11T09:21:42.700

在这种情况下，我最终这样做了：

```
private static Collection<Interval> splitDuration(Interval interval, int chunks)
{
    long startMillis = interval.getStartMillis();
    long endMillis = interval.getEndMillis();
    long durationMillis = endMillis - startMillis;
    long chunkSize = durationMillis / chunks;

    Collection<Interval> list = new ArrayList<Interval>();
    for (int i = 1; i <= chunks; ++i) {
        list.add(new Interval(startMillis, startMillis += chunkSize));
    }

    return list;
} 
```

[要旨](https://gist.github.com/facundofarias/8914939c72de6b7d47f2f23cbacf35d0)

干杯!

# google-maps - Google Maps API v3：单击另一个标记时如何将标记颜色恢复为原始颜色？

> ID：15358411
> 
> 赞同：0
> 
> 时间：2013-03-12T10:13:51.433
> 
> 标签：google-maps

我正在使用 onclick 事件在单击标记图像时更改它，以显示它已突出显示。

**当我单击另一个标记时，我希望该标记返回到原始图像，而不是保持突出显示。**

这是代码；

```
 google.maps.event.addListener(marker, 'click', function() {
   marker.setIcon("default_h.png")
    infowindow.open(map, marker);
    document.getElementById("address_box").value = (title + "\n" + address);
 }); 
```

我想一种方法是以某种方式创建一个规则，即一次只能在地图上显示一个突出显示的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:30:50.097

您必须在某处存储对单击标记的引用，然后使用 setIcon。

所以你的代码看起来像这样：

```
var highlighted;

//create your markers here and assign them event listeners
var markerObject = new google.maps.Marker({});
google.maps.event.addListener(markerObject,'click',function() {
 if(highlighted) {
  highlighted.setIcon(/* original icon */);
 }

 highlighted = markerObject;
 highlighted.setIcon(/* highlighted icon */);

}); 
```

# mysql - Mysql恢复过程中的db语法错误

> ID：15358412
> 
> 赞同：0
> 
> 时间：2013-03-12T10:13:52.670
> 
> 标签：mysql

情况是这样的：我在一台机器上转储了我的数据库结构，并试图恢复第二台机器。但是在恢复数据库的过程中会发生错误，我不知道那部分 sql 代码有什么问题。

这是mysql错误：

```
ERROR 1064 (42000) at line 5846: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'TYPE=HEAP;
     WHILE TRUE DO
        SET _paramList = TRIM(_paramList);
       ' at line 13 
```

需要补充的是，我在 mysql 5.1.59 上转储了 db 结构并尝试在 5.5.30 上恢复。

我已经在 mysql 转储和恢复中尝试了兼容选项，但没有成功搜索互联网。

**编辑：**

这是整个过程：

```
DELIMITER ;;
/*!50003 CREATE*/ /*!50020 DEFINER=`root`@`localhost`*/ /*!50003 PROCEDURE `ws_core_parameters`(IN is_proc_name CHAR(64), IN is_db_name CHAR(64))
BEGIN
    DECLARE _paramList VARCHAR(800);
    DECLARE _parameter VARCHAR(100);
    SELECT
        CAST(a.param_list AS CHAR(800))
    INTO
        _paramList
    FROM mysql.proc a
    WHERE a.name = is_proc_name
        AND a.db = is_db_name
    LIMIT 1;
    CREATE TEMPORARY TABLE system_proc.__parameters ( s_parameter VARCHAR(20) ) TYPE=HEAP;
    label: WHILE TRUE DO
        SET _paramList = TRIM(_paramList);
        IF(COALESCE(_paramList, '') = '') THEN
            LEAVE label;
        END IF;
        SET _parameter = SUBSTRING_INDEX(_paramList, ',', 1);
        SET _paramList = SUBSTR(_paramList, LENGTH(_parameter)+2);
        INSERT INTO system_proc.__parameters (s_parameter)
            VALUES (
                TRIM(
                    SUBSTRING_INDEX(
                        SUBSTR(_parameter,
                            LENGTH(
                                SUBSTRING_INDEX(_parameter, ' ', 1))+2), ' ', 1)));
    END WHILE label;
    SELECT
        SUBSTR(s_parameter, 1-(
            LENGTH(s_parameter))) AS s_parameter
    FROM system_proc.__parameters WHERE s_parameter != '';
    DROP TABLE system_proc.__parameters;
END */;; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:26:26.373

将 TYPE=HEAP 更改为 ENGINE=HEAP 或 ENGINE=MEMORY

参考链接：

[类型=堆不工作](https://stackoverflow.com/questions/10829392/error-with-old-code-type-heap-for-temporary-table-in-mysql)

[MYSQL 文档](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)

# database - Heroku 操作错误

> ID：15358413
> 
> 赞同：3
> 
> 时间：2013-03-12T10:13:53.070
> 
> 标签：database, postgresql, heroku, migration

我有一个当前在 Heroku 中运行的应用程序，但它突然停止工作，起初它告诉我我无法迁移我的数据库，因为有些表已经存在，实际上存在，让我解释一下：

一周前我创建了一个从那时起一直在使用的新表，但是突然间，当我昨天尝试上传一个新表时，它告诉我它无法迁移数据库，因为上周的表确实存在。

好的，这是一个问题，但不是它让我在这里问的问题，让我在这里问的是，当我试图解决这个问题时，我这样做了：

```
heroku pgbackups:restore DATABASE 'http://url.dump' --app my-app --confirm my-app 
```

之后，我的应用程序告诉我的是：

```
OperationalError at /
FATAL:  role "ossjuwrohpnfsy" is not permitted to log in 
```

我不知道“ossjuwrohpnfsy”是什么或它来自哪里，事实上，我已经在我的应用程序中搜索过它认为这是一个非常奇怪的名字，但是，虽然我的应用程序中不存在它

请，如果你们中的任何人能说出发生了什么或如何解决它，你会救我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T19:45:06.510

您可能没有推广您的新数据库。请参阅此处的指南：[使用 PG 备份升级 Heroku Postgres 数据库](https://devcenter.heroku.com/articles/upgrade-heroku-postgres-with-pgbackups)

本质上：

```
$ heroku pg:promote HEROKU_POSTGRESQL_COLOR -a my-app 
```

# python - 子类化字典，类变量

> ID：15358415
> 
> 赞同：1
> 
> 时间：2013-03-12T10:13:56.227
> 
> 标签：python

我正在尝试拼凑一些示例代码，但遇到了一些对我来说不太有意义的问题。在不包括整个源代码的情况下，我将尝试针对我认为重要的部分，希望我能全部了解。

在这里，他声明了一个自定义 dict 子类，我认为应该是类变量“customer”和“film”。（例如，从一个类中设置这些，应该在所有情况下更新它们，是吗？）

```
class Payment(dict):
    customer = film = None 
```

这是他使用付款的地方...

```
columns = [item[0] for item in cursor.description]
payments = []
for row in cursor.fetchall():
    payment = Payment(zip(columns, row)) #I believe this is where he loads dict items
    payment.customer = customers[payment["customer_id"]] #This is where he assigns 'class variable'
    payment.film = films[payment["film_id"]]
    payments.append(payment) 
```

在最终列表中，所有“付款”不应该具有相同的值（结果是另一个字典）吗？这就是我的困惑所在。

事实证明，这两个属性具有全面的独特价值。这是否与子类化字典有关？值是否被复制而不是被引用（所以从技术上讲，它们是类变量，但由于它们被复制，它们继续保持唯一）。

就在我以为我理解了简单的 OO 机制时，这让我……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:17:49.460

在下面的：

```
payment.customer = customers[payment["customer_id"]] #This is where he assigns 'class variable'
payment.film = films[payment["film_id"]] 
```

你没有改变`payment.customer`and的值`payment.film`。相反，您正在*重新绑定*它们，使它们特定于类的*实例*。

考虑以下示例：

```
class X(object):
  val = ['orig']

x1 = X()
x2 = X()
x3 = X()
x1.val = ['rebound']      # rebind
x2.val[0] = 'modified'    # modify in place
print x1.val, id(x1.val)
print x2.val, id(x2.val)
print x3.val, id(x3.val) 
```

这打印

```
['rebound'] 2907552
['modified'] 2771544
['modified'] 2771544 
```

观察`x1.val`一旦它被反弹后如何成为一个完全独立的变量，而`x2.val`并`x3.val`继续引用同一个列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:33:08.417

当 Python 查找对象的属性时，它首先查找实例，然后查找类，然后查找超类。

在这之后

```
payment = Payment(zip(columns, row)) #I believe this is where he loads dict items 
```

您可以检查`payment.__dict__`没有条目`customer`或`film`

如果您尝试访问 (getattr) `payment.film`，由于实例没有`film`属性，您将获得`payment.__class__.film`.

始终分配属性（除非它是描述符）将在实例字典中创建条目，因此它与所有其他实例隔离。

还有一些翻译乐趣：

```
>>> class C(dict):
...  foo = "class foo"
... 
>>> c = C()
>>> c.__dict__
{}
>>> c.foo
'class foo'
>>> c.foo = "instance foo"
>>> c.__dict__
{'foo': 'instance foo'}
>>> c.foo
'instance foo'
>>> del c.foo
>>> c.foo
'class foo' 
```

顺便说一句，由于您的示例中的代码不访问这些类属性，所以这也可以：

```
class Payment(dict):
    pass 
```

出于某种原因，作者可能更喜欢“声明”这些属性，但在这种情况下，没有必要（并且可能会混淆）将它们放在那里。

# objective-c - 如何等到调用委托的按钮

> ID：15358417
> 
> 赞同：1
> 
> 时间：2013-03-12T10:14:06.707
> 
> 标签：objective-c, xcode4.5

我想创建一个显示 UIActionSheet 的函数，等到用户按下按钮然后返回按下的按钮

```
@interface UIActionSheetHandler () <UIActionSheetDelegate>

@end
@implementation UIActionSheetHandler

-(NSInteger) buttonIndexWithMessage:(NSString *) title andArrayOfOptions:(NSArray *) options
{

    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:title
                                                             delegate:self
                                                    cancelButtonTitle:nil
                                               destructiveButtonTitle:nil
                                                    otherButtonTitles:nil];

    for (NSString * strOption in options) {
        [actionSheet addButtonWithTitle:strOption];
    }

    [actionSheet showInView:[BGMDApplicationsPointers window]];

    //Wait till delegate is called.
    return 0;//I want to return buttonIndex here.
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    //What should I put it here
}
@end 
```

我如何使//等待，直到调用委托来等待？哦，我不想让主线程等待，但我想我可以解决那个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:21:03.803

我猜你误解了委托的概念。不能返回按下的按钮`buttonIndexWithMessage:andArrayOfOptions:`

事实上，UIActionSheet 在那个时间点甚至都不可见。

按下按钮后，UIActionSheet 将调用`actionSheet:clickedButtonAtIndex:`委托的方法。

因此，在您输入的位置，您将`//What should I put it here there`获得已按下按钮的索引。在那里，您可以对相应按下的按钮做出反应。例如：

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSLog (@"Button pressed with index: %d", buttonIndex); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T14:21:48.540

这个有效

```
self.operation=[NSOperationQueue new]; //These four line is necessary to suspend the whole thread.
self.operation.suspended=true; //Okay make t
[self.operation addOperationWithBlock:^{}];
[self.operation waitUntilAllOperationsAreFinished];//Don't get out of the function till user act. 
```

然后在委托

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    self.buttonIndex=buttonIndex;
    self.operation.suspended=false;
} 
```

注意：我仍在寻找更优雅的解决方案。

# sql - 缩小 sql 结果集

> ID：15358419
> 
> 赞同：0
> 
> 时间：2013-03-12T10:14:07.483
> 
> 标签：sql, sql-server-2008

我有这个 sql 命令：

```
SELECT RecordedBy as 'Recorded By', COUNT(*) Total 
FROM mytable 
WHERE 
StartedDate BETWEEN DATEADD(day, DATEDIFF(day, 0, CURRENT_TIMESTAMP), '00:01AM')
AND DATEADD(day, DATEDIFF(day, 0, CURRENT_TIMESTAMP), '11:59PM')
group by RecordedBy order by Total desc 
```

我想要完成的是通过将此 sql 嵌入另一个**而不更改原始 sql**来进一步优化此查询的结果。

例如，我想通过 RecordedBy 子句缩小原始 sql 的范围：我想做的是：

```
select * from mytable in
(
    SELECT RecordedBy as 'Recorded By', COUNT(*) Total  FROM mytable  
    WHERE  StartedDate BETWEEN 
    DATEADD(day, DATEDIFF(day, 0, CURRENT_TIMESTAMP),'00:01AM')
    AND DATEADD(day, DATEDIFF(day, 0, CURRENT_TIMESTAMP),'11:59PM') 
    group by RecordedBy order by Total desc
) 
```

但这当然会导致语法错误。谁能想到我现在缺少的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:26:16.410

The correct syntax would be:

```
select * from 
(
    SELECT RecordedBy as 'Recorded By', COUNT(*) Total  FROM mytable  
    WHERE  StartedDate BETWEEN 
    DATEADD(day, DATEDIFF(day, 0, CURRENT_TIMESTAMP),'00:01AM')
    AND DATEADD(day, DATEDIFF(day, 0, CURRENT_TIMESTAMP),'11:59PM') 
    group by RecordedBy order by Total desc
) mytable 
```

Try it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:19:57.303

你可以试试这个

```
select * from 
(
  SELECT RecordedBy as 'Recorded By', 
         COUNT(*) Total
  FROM mytable  
  WHERE  StartedDate 
         BETWEEN 
          DATEADD(day, DATEDIFF(day, 0, CURRENT_TIMESTAMP),'00:01AM')  
          AND 
          DATEADD(day,  DATEDIFF(day, 0, CURRENT_TIMESTAMP), '11:59PM')  
) as TAB
group by TAB.RecordedBy 
order by TAB.Total desc 
```

# c# - 获取保存的文件路径，无需任何回发

> ID：15358420
> 
> 赞同：2
> 
> 时间：2013-03-12T10:14:11.637
> 
> 标签：c#, javascript, asp.net, file-upload, postback

我希望能够上传文件并取回新保存的路径，而无需任何回发。我已经尝试过使用`updatepanel`但是发现文件上传为空。

实际上，我想获得`File_Path_Text`以便在 javascript 方法中使用它。

以下是我正在使用的代码；

```
 protected void get_path(object sender, EventArgs e)
        {
            if (FileUpload1.HasFile)
            {
                FileUpload1.SaveAs(@"C:\temp\" + FileUpload1.FileName);
                File_Path_Text = @"C:\temp\" + FileUpload1.FileName;
            }
        } 
```

以下是asp部分；

```
 <asp:FileUpload ID="FileUpload1" runat="server" accept="kml"/>
 <asp:Button id="Button1" text="Add layer to map" OnClick="get_path" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:16:50.673

您可以将文本分配给隐藏字段并使该隐藏字段服务器可访问。您还可以使用[公共属性](https://stackoverflow.com/questions/1548549/asp-net-how-do-i-access-a-property-of-my-usercontrol-from-within-jscript)y 为其分配值并在客户端上访问它。

*html*

```
<input type="hidden" runat="serer" id="hdnText" /> 
```

*背后的代码*

```
hdnText.Value = @"C:\temp\" + FileUpload1.FileName; 
```

*Javascript*

```
 alert(document.getElementById("<%= hdnText.ClientID %>").value); 
```

要异步上传文件，您可以使用一些 jQuery 插件，例如[Ajax File Upload](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:17:06.043

一个非常简单的选项是[uploadify](http://www.uploadify.com/)。您可以将其连接到 HttpHandler 并在应用程序保持交互时在后台进行上传。

UpdatePanels 会给您上传文件带来麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T20:00:20.483

创建一个 ashx 文件（http 处理程序）并将下面的代码（放置您的路径）放在那里。

```
window.open('<%=Server.MapPath("~/path")%>') 
```

# asp.net-mvc - 将下拉列表与数据读取器结果绑定

> ID：15358421
> 
> 赞同：0
> 
> 时间：2013-03-12T10:14:17.663
> 
> 标签：asp.net-mvc, razor, ienumerable

我想将 Html.DropDown 列表与我在数据读取器中的值绑定。

以下几个示例我通过 Method 将我的 DataReader 转换为 Enumerator ，`GetEnumerator` 而不是在 Controller 中尝试转换为 SelectList ，`Cast<SelectList>().GetEnumerator()`但在这里我收到一个错误：

```
'System.Collections.IEnumerator' does not contain a definition for 'Cast' and the best extension method overload 'System.Linq.Queryable.Cast<TResult>(System.Linq.IQueryable)' has some invalid arguments D:\Dev\MYPROJECT\MYPROJECT\MYPROJECT\Controllers\UserController.cs 
```

谁能帮我找出如何将我的 Drop 自己的列表与数据库的结果绑定。

`In Model:`

```
var prsnsInfo = new string[3];
IEnumerator Iprsns = null;

try
{
if (prsns != null || prsns.HasRows)
    Iprsns = prsns.GetEnumerator();
}

catch (Exception ex) { }
return Iprsns; 
```

`in Controller:`

```
var prsns = ModelObj.GetPersons(1);
ViewBag.prsns = prsns.Cast<SelectList>().GetEnumerator(); 
```

`in View:`

```
@Html.DropDownList("person",(IEnumerable<SelectList>)ViewBag.prsns) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:20:09.600

我会尝试使用 .Select

ViewBag.prsns = prsns.Select(x => new SelectListItem {Text = x.ID, Value = x.Name}).ToList()

（ID 和 Name 是假定字段，将它们替换为与您的需求相对应的字段）

# c# - 在另一个线程中处理时调用特定线程中的方法

> ID：15358424
> 
> 赞同：3
> 
> 时间：2013-03-12T10:14:19.613
> 
> 标签：c#, multithreading, task

我正在开始一个长期运行的任务：

```
task = Task.Factory.StartNew(LongRunningMethod, TaskCreationOptions.LongRunning); 
```

在*LongRunningMethod 中*，我正在调用引发事件的第三方方法。该事件包含我需要添加到我的数据表中的数据：

```
dataTable.Rows.Add(e.Data); 
```

问题是，*dataTable*可以与一些需要调用*Invoke*方法的视图相关联，但我不想添加对实现类似*Invoke*方法的接口的任何引用。

我想做这样的事情：

```
originalThread.Invoke(() => dataTable.Rows.Add(e.Data)); 
```

实现这一目标的最佳选择是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:25:28.460

通过汇总有用的评论，我可以得出答案。

根据[Henk Holterman](https://stackoverflow.com/users/60761/henk-holterman)的说法，不可能中断原始线程，存储其上下文，执行某些操作，然后恢复其先前的上下文并继续运行。

目标表示层有特定的解决方案，如WinForms 中的[BackgroundWorker 类和 WPF 中的](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)[Dispatcher 类](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)。

我相信对于我的场景，来自[sll](https://stackoverflow.com/users/485076/sll)的建议效果最好。我可以使用[SynchronizationContext 类](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)及其[Post Method](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.post.aspx)。下面是一个例子：

```
originalSynchronizationContext = SynchronizationContext.Current;
task = Task.Factory.StartNew(LongRunningMethod, TaskCreationOptions.LongRunning); 
```

并行 LongRunning 方法：

```
originalSynchronizationContext.Post(state => dataTable.Rows.Add(e.Data), null); 
```

# javascript - 从处理程序获取全日历事件

> ID：15358432
> 
> 赞同：1
> 
> 时间：2013-03-12T10:14:38.190
> 
> 标签：javascript, jquery, asp.net, fullcalendar

我需要从处理程序向 jquery fullcalendar 添加事件。

```
$(document).ready(function () {
        var events_ = null;
        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        $.ajax({
            type: "GET",
            url: "Handler.ashx",
            data: "{}",
            contentType: "application/json",
            async: false,
            dataType: "json",
            success: function (eventString) {
                events_ = JSON.stringify(eventString);
            },
            Error: function (err) {
                alert("Error while getting events");
            }
        });

        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,basicWeek,basicDay'
            },
            theme: true,
            editable: true,
            events: [
            {
                title: 'All Day Event',
                start: new Date(y, m, 1)
            },
            {
                title: 'Long Event',
                start: new Date(y, m, d - 5),
                end: new Date(y, m, d - 2)
            }
           ]
        });
    }); 
```

在处理程序中，我正在构建一个带有事件属性的 json 对象，例如 id、title、start。

```
EventEntity eventEntity = new EventEntity();
eventEntity.id = "1111";
eventEntity.title = "MyTitle";
eventEntity.start = DateTime.Now; 
string eventString = JsonConvert.SerializeObject(eventEntity); // using NewtonSoft.Json
context.Response.Write(eventString); 
```

如何将从处理程序获得的事件与现有事件一起添加到日历。

# c++ - C ++在向量中删除和替换

> ID：15358436
> 
> 赞同：0
> 
> 时间：2013-03-12T10:14:46.420
> 
> 标签：c++, replace, removeclass

我有一个这样的向量向量：

一个：0 1 0

乙：1 0 1

c: 0 1 1

我的程序的这一部分有效。在我想删除 0 所以我使用 remove_if 并且我想用 t 和位置替换 1 之后，所以我使用 replace_if 最终有类似的东西

一个：t2

b: t1, t3

c: t2, t3

这两件事在我的程序上不起作用，我也不知道了。我认为问题之一是我想在 int 中有“t”，但我不知道我是否可以为此使用字符串。

这是我的代码：

```
#include <iostream>
#include <vector>
#include <iterator>

     int main (){
    srand(time(0));
    int e = (rand() % 10) + 3;
    int tim = (rand() % 10) +1 ;
    std::vector< std::vector<int> > myvector;
    std::cout << "Time: 0 = Not available, 1 = available" << std::endl;

    for(int vec = 0; vec < e; vec++){
            std::vector<int> newVector(tim);
            for(int i = 0; i < tim; i++){
                    newVector[i] = (rand() % 2);
            }
            myvector.push_back(newVector);
            std::cout << "The Time " << (vec+1) << " is ";
            for(int b = 0; b < tim; b++){
                    int value = myvector[vec][b];
                    std::cout << " " << value << " ";
            }
    }
    //Delete the 0 in time
    int int_to_remove = 0;
    remove_if(myvector.begin(), myvector.end(), int_to_remove);
    std::cout << "The new Time "<< std::endl;
    copy(myvector.begin(), myvector.end(), output);

    //Change the name of 1 to t1
    int int_to_replace = 1;
    replace_if(myvector.begin(), myvector.end(), int_to_replace, t(tim));
    std::cout << "The new Time"<< std::endl;
    copy(myvector.begin(), myvector.end(), output);

    return 0;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:37:36.850

你在上面犯了几个错误。如果您只想将前导`t`打印到输出中，下面我将展示您应该如何重写代码的相关部分。请注意，即使您确实想要一个元素容器，其值具有前导`t`（在这种情况下，它必须是`string`s 的容器），删除元素的部分和替换原始代码中的元素的部分不正确。

以下是您应该如何重写相关部分：

```
#include <algorithm>   // For copy(), replace(), erase(), and for_each()
#include <iterator>    // For ostream_iterator

// ...

int main () {

// ...

    //Delete the 0 in time
    int int_to_remove = 0;
    std::cout << "The new Time "<< std::endl;
    for_each(begin(myvector), end(myvector), [=] (std::vector<int>& v)
    {
        v.erase(remove(begin(v), end(v), int_to_remove), end(v));
    //  ^^^^^^^^^^^^^^                                 ^^^^^^^^
    //  If you don't do the above, your container won't be resized,
    //  and will have trailing "dead" elements. Moreover, if you
    //  use remove_if() with a predicate which is always equal to 0,
    //  you won't remove any element.

        copy(begin(v), end(v), std::ostream_iterator<int>(std::cout, " "));
    //                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    //                         This is how you can copy each element to the
    //                         standard output.

        std::cout << std::endl;
    });

    //Change the name of 1 to t1
    int int_to_replace = 1;
    std::cout << "The new Time "<< std::endl;
    for_each(begin(myvector), end(myvector), [=] (std::vector<int>& v)
    {
        // This does the replacement. Again, using replace_if() is wrong,
        // because you are not passing in a predicate, but a value.
        replace(begin(v), end(v), int_to_replace, tim);

        // This prints each element of the vector with a leading 't'
        for_each(begin(v), end(v), [] (int i)
        {
            std::cout << "t" << i << " ";
        });

        std::cout << std::endl;
    });

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:23:06.660

使用字符串向量的向量而不是 int，因为您需要字符串值，例如 t1。即替换

```
std::vector< std::vector<int> > myvector; 
```

和

```
std::vector< std::vector<std::string> > myvector; 
```

要分配字符串“0”和“1”，您可以替换 newVector[i] = (rand() % 2); 经过

```
if(rand() % 2)
  newVector[i] = "1";
else
  newVector[i] = "0"; 
```

您将需要使用字符串比较运算符[std::string::compare更改其余的整数比较](http://www.cplusplus.com/reference/string/string/compare/)

# html - 用 chrome 以不同的方式显示边距，用 Firefox 更正

> ID：15358457
> 
> 赞同：0
> 
> 时间：2013-03-12T10:15:58.977
> 
> 标签：html, css

边距没有以正确的方式显示，我不知道为什么？我在 box_news 元素中的 chrome 中注意到了 4px，我对 rest.css 进行了一些处理，但我不确定它是否对我的状态有用。

右侧的这段代码：

```
<div class="rightside">

 ﻿﻿ <div class="box_news">
                            <h1>الاخبار</h1>

                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <div class="centerIt">
            <div class="readmore"><a href="#">مزيد من الاخبار</a></div>
            </div>
               <br><br>
    </div>

<div class="box1">
<h1>آخر معارض الصور</h1>

    <table align="center">
<tbody><tr>
    <td align="center"><img width="140" height="110" src="./Chrome_files/illaf693012853.jpg" alt="alt">
    </td>
</tr>
<tr>
    <td align="center">
    <a class="gallery" href="http://domain.com/ictproject/site/gallery?gal_id=13">اللاذقية 2013: مساعد ممارس في البرمجة اللغوية العصبية</a><br>2013-03-03</td>
</tr>
</tbody></table>
    <table align="center">
<tbody><tr>
    <td align="center"><img width="140" height="110" src="./Chrome_files/illaf654896994.jpg" alt="alt">
    </td>
</tr>
<tr>
    <td align="center">
    <a class="gallery" href="http://domain.com/ictproject/site/gallery?gal_id=5">دورة المغرب الصور الكاملة </a><br>0000-00-00</td>
</tr>
</tbody></table>
    <table align="center">
<tbody><tr>
    <td align="center"><img width="140" height="110" src="./Chrome_files/illaf906907216.jpg" alt="alt">
    </td>
</tr>
<tr>
    <td align="center">
    <a class="gallery" href="http://domain.com/ictproject/site/gallery?gal_id=12">اللاذقية 2012: دبلوم البرمجة اللغوية العصبية (2)</a><br>0000-00-00</td>
</tr>
</tbody></table>  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
         <div class="centerIt">
         <div class="readmore"><a href="http://domain.com/ictproject/site/Galleries">مزيد من المعارض</a></div>
         </div>
</div>﻿﻿

        </div> 
```

CSS：

```
.rightside {
    display: block;
    padding-top: 0;
    position: relative;
    width: 215px;
}

.box1{
display: block;
position: relative;
background: none repeat scroll 0 0 #FFFFFF;
border-radius: 5px 5px 5px 5px;
box-shadow: 0 0 2px #cccccc;
color:#666666;
font-family: DroidKufi-Regular;
font-size:12px;

width: 98%;
margin-top: -27px;

}

.box1 p {font-size:12px; text-align: right; color:#666666;}
.box1 a { text-shadow: 1px 1px 1px gray; color:#1570a6; }
.box1 a:hover { color:#49a4da; }
.box1 H1{
color:#1570a6;
font-family: DroidKufi-Regular;
font-size:14px;
border-bottom:thin #eee solid;
text-shadow: 0px 0px 0px gray;
padding:5px;
}
.box_news{
 margin-top: -27px;
background: none repeat scroll 0 0 #FFFFFF;
border-radius: 5px 5px 5px 5px;
box-shadow: 0 0 2px #cccccc;
color:#666666;
font-family: DroidKufi-Regular;
font-size:12px;

width: 98%;
margin-bottom: 10px;
height: 100%;

}
.box_news H1{

color:#8b9801;
font-family: DroidKufi-Regular;
font-size:14px;
border-bottom:thin #eee solid;
text-shadow: 0px 0px 0px gray;
padding:5px;

}
.news_title{
color:#8b9801;
font-family: DroidKufi-Regular;
font-size:11px;
text-shadow: 0px 0px 0px gray;
padding:0px;    
}
.news_title a{
color:#8b9801;
}
.news_title a:hover{
color:#;
text-shadow: 1px 1px 1px #EEE;
}
.news_time{
color:#cccccc;
font-family: DroidKufi-Regular;
font-size:10px;
border-bottom:thin #eee solid;
text-shadow: 0px 0px 0px gray;
padding:0 10 0 0px; 
}
.readmore{
    display:block;
    width:110px;
    height:24px;
    font-size:12px;
    background:url(../images/readmore.png) no-repeat center;
    font-family:DroidKufi-Regular;
    text-align:center;
    color:#FFF;
    padding:4 0 0 5px;
    margin:4px;
}
.readmore a{color:#FFF;}
.readmore a:hover{text-shadow: 2px 2px 2px #0a4e76;} 
```

火狐 ![工作](../Images/4ba836d9c39a576d389245c9c3fc1d02.png)

铬合金 ![问题](../Images/ac079c85f4776edb1a6d6ee9051ed5df.png)

任何帮助对我来说都会非常有用，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:28:05.707

两种浏览器的字体都有所不同..字体看起来更大并且在chrome中拉伸..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:22:37.300

`padding:5px;`从中删除`.box_news H1`它会起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:23:09.083

现在定义**你**`overflow:hidden` 的 **`.box_news`**

 ****像这样**

```
.box_news{
overflow:hidden;
} 
```**

# android - 使用 mupdf 库创建 pdf 中所有页面的图像

> ID：15358461
> 
> 赞同：1
> 
> 时间：2013-03-12T10:16:06.447
> 
> 标签：android, native, mupdf

我正在使用 mupdf 显示存储在我的 android 应用程序的本地存储库中的 pdf 文件。这工作得很好。现在我必须创建一个列表，显示打开的 pdf 文档的所有页面的图像，并在每个图像上添加一个单击事件，将用户导航到特定页面。为了解决这个问题，我想知道有多少种方法可以为我的应用程序中的 pdf 文档的每一页拍照。

我可以通过直接在我的 android 应用程序中运行 mupdf 命令来做到这一点，还是必须在 mupdf.c 文件中工作？请在这里发表您的看法。任何形式的帮助都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T10:17:40.753

我们的 Android 可定制杂志应用程序中有一个类似的功能，使用 muPDF：可以显示页面缩略图，当您点击缩略图时，它会将您带到相应的页面。这个应用程序是开源的，可以在[Github](https://github.com/libreliodev/android)上找到。您应该很容易查看代码，并了解我们如何实现此功能。

# c# - Winforms C#中的Phalanger代码评估

> ID：15358466
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:16:18.790
> 
> 标签：c#, php, winforms, phalanger

我想让用户能够从我的 winforms 应用程序中执行一些用 c# 编写的小代码。我想用php，所以我找到了Phalanger。

我在我的Form中放了两个richTextEdit，我想在richTextEdit1中编写php，按下一个按钮，然后在richTextEdit2中查看结果。

php代码是：

> 回声“你好词！”；

按钮代码是：

```
ScriptContext context = ScriptContext.CurrentContext;

MemoryStream ms;
StreamWriter sw;

ms = new MemoryStream();
sw = new StreamWriter(ms);

context.Output = sw ;
//context.Output = Console.Out;

var res = DynamicCode.Eval(
            richTextBox1.Text,
            false,/*phalanger internal stuff*/
            context,
            null,/*local variables*/
            null,/*reference to "$this"*/
            null,/*current class context*/
            "Default.aspx.cs",/*file name, used for debug and cache key*/
            1, 1,/*position in the file used for debug and cache key*/
            -1,/*something internal*/
            null/*current namespace, used in CLR mode*/
        );

richTextBox2.Text = Encoding.UTF8.GetString(ms.ToArray()); 
```

如果我使用 Console.Out 作为输出，它可以正常工作，但没有用。如果没有，我没有结果。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T07:26:59.653

`sw.Flush()`在阅读 ms 的内容之前只需调用。我建议在阅读 ms 并明确指定编码之前将 sw 的用法包装到 using 语句中`using (sw = new StreamWriter(ms, Encoding.UTF8))`

# c++ - 如何从用户应用程序向系统应用程序发送自定义消息？

> ID：15358468
> 
> 赞同：0
> 
> 时间：2013-03-12T10:16:24.470
> 
> 标签：c++, windows, windows-services, messages, createprocess

我创建了一个 Windows 服务来使用 createProcessAsUser 运行我的自定义应用程序。结果是一个应用程序在会话 ID 0 中使用 SYSTEM 用户运行，正如我所料。我的问题是，我需要在此应用程序与当前用户创建的其他应用程序之间进行一些通信。

如果某些桌面事件发生（SC_SCREENSAVE，监视器关闭），当前用户应用程序捕获的事件，我需要告诉我的系统应用程序。我用过：

SendMessage(HWND_BROADCAST, CURRENT_USER_HAS_DONE_SOMETHING, 0, 0);

即使 SYSTEM 应用程序捕获了很多系统事件（挂起、注销...），并且在同一个会话 ID 中运行，我的自定义消息也永远不会被捕获。Sendmessage 似乎不适用于 SYSTEM 用户。

如何从用户当前会话向 SYSTEM 应用程序发送消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:38:31.617

另一种选择是使用旧的[ControlService 功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682108%28v=vs.85%29.aspx)以及用户定义的控制代码。它不适合复杂的通信（您不能将任何参数传递给服务），但它适用于您概述的简单“发生了什么事”的通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:21:25.773

最新版本的 Windows 不允许在会话 0 和桌面会话之间交换消息。这称为[Session 0 隔离](http://blogs.technet.com/b/askperf/archive/2007/04/27/application-compatibility-session-0-isolation.aspx)。

[您可以在此处](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756986.aspx)和[此处](http://blogs.technet.com/b/voy/archive/2007/02/23/services-isolation-in-session-0-of-windows-vista-and-longhorn-server.aspx)找到更多信息。

通常的替代方案是 TCP/IP、管道、远程处理等，这些都在[这个 SO answer](https://stackoverflow.com/questions/55639/how-do-you-communicate-between-windows-vista-session-0-and-desktop)中进行了描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T10:22:58.847

显然广播消息不是正确的解决方案。一个更好的解决方案可能是`CreateEventEx`. 这将创建一个命名事件。然后，您的常规应用程序可以调用`SetEvent`，并且该`SYSTEM`应用程序可以等待此事件。

# android - Android Chrome 中的远程调试失败（自 2013 年 3 月更新以来）

> ID：15358473
> 
> 赞同：0
> 
> 时间：2013-03-12T10:16:37.647
> 
> 标签：android, google-chrome, remote-debugging

我在 android 中远程调试 Chrome 时遇到问题（2013 年 3 月更新）？

我必须从这个最新的 chrome 中调试我的错误，所以我必须通过这种情况。

在将 Chrome 更新到版本 25.0.1364.169 之前，在 Android 中远程调试我的 Chrome 几乎是完美的

我有 3 台设备，我尝试将 Chrome 回滚到 18.xxx 版，并且可以使用旧版 chrome 进行远程调试。

当我更新到上面提到的最新 chrome 时，我在控制台中得到的是这样的

```
Application Cache Progress event (9 of 208) http://chrome-devtools-frontend.appspot.com/static/25.0.1364.169/TimelinePanel.js devtools.html:1
Application Cache Error event: Resource fetch failed (-1) http://chrome-devtools-frontend.appspot.com/static/25.0.1364.169/TimelinePanel.js devtools.html:1
Failed to load resource 
```

加载 TimelinePanel.js 失败

有人从这个问题中解脱出来吗？

# castle-windsor - 网站的 windsor.xml 文件不会在 CI 服务器上转换

> ID：15358478
> 
> 赞同：1
> 
> 时间：2013-03-12T10:16:48.503
> 
> 标签：castle-windsor, slowcheetah, xml-document-transform

我的解决方案有一个 webproject 和 windows 服务。

网站有一个 web.config 和一个 windsor.xml，服务有一个 app.config 和一个 windsor.xml 文件，它们会随每个环境（测试、UAT、LIVE）而变化。

我可以在我的 PC 上本地预览网站和 Windows 服务的转换（对于 web.cofig、app.config 和 windsor.xml）。

当我在本地构建/重建/发布文件时，转换也有效。

但是，当我在 CI 服务器上运行时，服务的 windsor.xml、appconfig 已转换，但网站并未对其 windsor.xml 进行转换（尽管 web.config 已转换）。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:29:44.320

据我记得，您可能还必须在服务器上安装/安装 slowcheetah。还编辑引用慢猎豹的 prj 文件：

```
<PropertyGroup>
<SlowCheetahTargets Condition=" '$(SlowCheetahTargets)'=='' ">$(LOCALAPPDATA)\Microsoft\MSBuild\SlowCheetah\v1\SlowCheetah.Transforms.targets</SlowCheetahTargets>
</PropertyGroup>

...
<Import Project="$(SlowCheetahTargets)" Condition="Exists('$(SlowCheetahTargets)')" /> 
```

# lwuit - 代号一中的多行按钮

> ID：15358489
> 
> 赞同：1
> 
> 时间：2013-03-12T10:17:07.650
> 
> 标签：lwuit, codenameone

我必须将文本行显示为按钮。行的文本超过了行的限制，所以当我在按钮中显示它时，它会滚动文本而不是显示多行按钮。

请帮助使其成为多行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:57:03.187

您可以使用 MultiButton，但您必须自己进行换行。

或者，您可以使用支持多行的 TextArea，如果您不需要按下状态，您可以将其设置为可编辑 false 并使用`setUIID("Button")`使其看起来像一个按钮。如果您需要更详细的内容，您可以使用前导组件方法从文本区域构建一个按钮，以了解其工作原理，查看多按钮的源代码并阅读在 Container 类中设置前导组件的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:13:29.687

你不能做多行，因为按钮从 lwuit 中的标签扩展。在这种情况下，您可以在代码模式下使用。

# java - Java Web 应用页面负载监视器

> ID：15358493
> 
> 赞同：2
> 
> 时间：2013-03-12T10:17:17.337
> 
> 标签：java, websphere, monitoring

有没有办法在系统运行时监控服务器上的客户端页面加载时间？特别是，有没有这样的工具可以与 WebSphere 服务器集成？

例如，一个小时内有 1000 个页面加载，我计算平均时间。如果平均时间超过设置的数字，电子邮件会自动发送给管理员。这一点都不难实现，但是有没有办法可以跟踪服务器端用户的页面加载时间？

我正在考虑在页面通过 JS 加载到服务器端后发送响应并在那里分析它，因此它可以集成到我拥有的每个 Web 服务或控制器中。但是是否有任何工具或类似的东西可以执行这样的操作？

提前致谢。

附言

负载测试应用程序不是我需要的。

编辑

我已经浏览过这个问题 -[用户感知页面加载时间的自动监控](https://stackoverflow.com/questions/4108164/automated-monitoring-of-user-perceived-page-load-time)，但它仍然没有完全回答我的问题:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:00:45.623

有一篇有趣的 JavaWorld 文章，其中包含用于监视用户时间的示例代码，并使用 WebSphere 6.1 进行了测试：[测量 Web 应用程序响应时间：与客户见面](http://www.javaworld.com/javaworld/jw-11-2008/jw-11-measuring-client-response.html)。

> 在本文中，Srijeeb Roy 介绍了一种轻量级的方法来捕获最终用户的应用程序响应时间体验。他还向您展示了如何在服务器上发送和记录客户端响应时间以供将来分析

![在此处输入图像描述](../Images/91db72e080b8a8d90d22e6a52594056f.png)

但是，您应该实施平均计算和警报。

# r - 遗传编程适应度函数

> ID：15358497
> 
> 赞同：2
> 
> 时间：2013-03-12T10:17:23.577
> 
> 标签：r, computational-geometry, coordinate-transformation, genetic-programming

我正在尝试在遗传编程中编写一个适应度函数来扩大多边形内点所占据的区域。多边形中心附近有一些点，我想将这些点从中心扩展到多边形内部。

我正在使用多边形内的点所占据的面积与多边形外的面积之间的差异，并试图在适应度函数中将其最小化。但我不知道如何使用它来改变点的坐标，然后重新计算面积的差异并迭代地进行。我已经给出了输入和输出的样子。

提前致谢。

这是我到目前为止写的代码。

```
require(rgp)
require(splancs)
require(grDevices)
functionSet1 <- functionSet("+", "*", "-", "/","^")
inputVariableSet1 <- inputVariableSet("x","y")
constantFactorySet1 <- constantFactorySet(function() rnorm(1))

outpolygon<-matrix(c(3.061188,2.517408,0.523754,-0.258800,0.981104,4.036885,
                     3.061188,4.069070,4.069070,2.695074,0.485581,-2.129055,
                     -2.653607,4.069070),nrow=7,byrow=F)
inpoints<-matrix(c(2.637644,-0.4456578,2.160003,0.8553066,1.501256,1.3137518,2.352020,-0.2643815,
                   1.254139,1.2241712,1.918191,0.6595725,1.453478,0.9153824,1.900110,1.0607272,
                   1.648038,0.6847361,2.194931,2.2842159),nrow=10,byrow=T)

plot(-10:10,xlim=c(-5,5),ylim=c(-5,5))
polygon(outpolygon[,1],outpolygon[,2])
points(inpoints[,1],inpoints[,2])

fitnessFunction1 <-  function(f){
  if(all(point.in.polygon(inpoints[,1],inpoints[,2],outpolygon[,1],outpolygon[,2])!=0)){
    rmse(areapl(inpoints[chull(inpoints[,1],inpoints[,2]),]),areapl(cbind(outpolygon[,1],outpolygon[,2])[chull(outpolygon[,1],outpolygon[,2]),]))
  }else{
    rmse(1000,0)
  }
}

gpResult1 <- geneticProgramming(functionSet=functionSet1,
                                inputVariables=inputVariableSet1,
                                constantSet=constantFactorySet1,
                                fitnessFunction=fitnessFunction1,    
                                stopCondition=makeTimeStopCondition(10))

best1 <- gpResult1$population[[which.min(sapply(gpResult1$population,
                                                fitnessFunction1))]] 
```

![在此处输入图像描述](../Images/7fd29ac6dea42ce59ff03376f40df32b.png) ![在此处输入图像描述](../Images/29e899097ea2a266c8f503766b7adb4f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T20:51:36.780

有几种方法可以做到这一点。最简单的方法实际上是使用 GA，而不是 GP。在这种情况下，您将有一个整数数组分解成四边形，这样：

[funcx1, valx1, funcy1, valy1, funcx2, valx2, funcy2, valy2, ... , funcxn, valxn, funcyn, valyn]

您的 fit 函数将采用 funcxi 的模数并获得相应的函数。然后，您将 valxi 中的数字应用于该函数到相应的 x 值。给定返回的点，您将按照您所说的计算面积，如果个人超过相应的区域（负常数或系数超过），则惩罚他们。

或者，如果您出于某种原因必须使用 GP，则有两条主要途径。如果您希望代码是通用的（即，您*将*相同的进化代码块应用于每个点；注意：这更难），您将需要更多的非终端（即函数）。我可能至少会添加 if 语句。自动定义的函数 (ADF) 也很好，还有一些分组函数，比如 Lisp 中的 progn。可以说，GA 方法要容易得多。

另一条路线是使用更结构化的 GP 并添加分配功能。

GP 非终结符：+、-、*、/、^、=（所有向量函数）

GP 终端：point1、point2、...、pointn、randompoint()

使用 Lispy 结构，您的代码将类似于：

(* (= (= point2 (* randompoint() (= point2 randompoint()))) point1) randompoint())

然后，当您评估它时，您将进行从叶子到根的所有分配，并用较高的点覆盖较低的点。因此，在上面的示例中，point2 将被分配为随机点（可能很糟糕）。结果将乘以一个随机点，然后用结果覆盖对 point2 所做的原始分配。相同的结果将被分配给 point1，最后，它会乘以一个随机点。但是，由于没有进一步的分配，最终值将被丢弃。

这是“更有条理”的原因是您必须确保分配永远不会发生在点以外的任何事情上。基于语法或语法指导的全科医生特别擅长这一点。我将向您推荐 Whigham (1995) 的这篇论文，该论文解释了它们：

[http://sc.snu.ac.kr/courses/2007/fall/pg/aai/GP/whigham/whigham95grammaticallybased.pdf](http://sc.snu.ac.kr/courses/2007/fall/pg/aai/GP/whigham/whigham95grammaticallybased.pdf)

如果您使用 GP，在任何一种情况下，您都必须为我上面描述的格式编写一些用于列表遍历的函数。我还建议使用点和向量函数而不是 x 和 y，这样您可以跟踪更少的终端（并且您的程序树会更小/处理速度更快）。哦，并确保 randompoint() 函数返回一个特定点（即，确保在将其放入染色体*之前对其进行评估，否则代码将给出不一致的结果——非常糟糕，那）。*并使这些可能点的范围合理（即，如果您在 10 平方的空间中，请不要达到 100）。

您还有一段路要走，但希望这会为您指明正确的方向。

# ruby-on-rails - 如何从这三个模型创建复合 JSON 对象？

> ID：15358499
> 
> 赞同：0
> 
> 时间：2013-03-12T10:17:27.183
> 
> 标签：ruby-on-rails, database, database-design, model, rails-models

我有三张桌子；`Area`,`Movie`和`MovieArea`. 在 Rails 中，我希望能够`MovieArea`基于`area_id`. `Movie`然后，我想使用来自的字段返回一个复合 json 对象`Movie`，并将同名的字段替换为来自`MovieArea`.

我有以下数据库结构：

![在此处输入图像描述](../Images/468022b0a1fd5bcc670950d2d88b5fbc.png)

以及以下型号：

```
class Movie < ActiveRecord::Base
    attr_accessible :title, :synopsis, :grossing, :director, :year, :facts
    has_many :movie_areas, :class_name => 'MovieArea'
end

class Area < ActiveRecord::Base
    attr_accessible :name
    has_many :movie_areas, :class_name => 'MovieArea'
end

class MovieArea < ActiveRecord::Base
    attr_accessible :movie_id, :area_id, :synopsis, :facts

    belongs_to :area, :class_name => 'Area', :foreign_key => :area_id
    belongs_to :movie, :class_name => 'Movie', :foreign_key => :movie_id
end 
```

最后，我一直在尝试通过使用模型方法和更改 JSON 响应来创建这个对象。向模型添加：

```
def grossing
    self.movie.grossing
end
def year
    self.movie.year
end
def title
    self.movie.title
end 
```

等等。在控制器中：

```
@results = MovieArea.where(:area_id => @area.id) 
```

最后，在视图中：

```
<%= @results.to_json(:methods => [:grossing, :year, :title] ).html_safe -%> 
```

这很好，我得到了我想要的 JSON 对象的类型：

```
[
   {
      "id":1,
      "area_id":1,
      "movie_id":1,
      "synopsis":"Area relevant movie synopsis",
      "facts":"Area relevant movie facts",
      "grossing":"$9001M",
      "year":"1999",
      "title":"Movie title",
   },
   .....
] 
```

所以问题是：有没有更好的方法来做到这一点？例如，我可以从模型中输出它并调用类似的东西`MovieArea.where(:area_id => @area.id).some_function_to_respond`吗？或者我可以将逻辑移动到控制器，以便在它简单调用的视图中`@results.to_json()`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:02:32.923

最近有一集 RailsCasts 涵盖了你想做的事情。看看[这里](http://railscasts.com/episodes/409-active-model-serializers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T09:22:24.973

我最终使用了[RABL](https://github.com/nesquena/rabl) - 感谢[shweta](https://stackoverflow.com/users/867590/shweta)的推荐。我通过将以下内容添加到我的 Gemfile 并运行`bundle install`安装它来安装它。

```
gem 'rabl'
gem 'oj' 
```

`movie_areas.json.rabl`然后我在一个文件夹中创建了以下 RABL 模板`views/rabl`：

```
object @movie
attributes :id, :synopsis, :facts
glue :movie do
  attributes :title, :grossing, :director, :year
end 
```

上面的代码从表中获取`id`, `synopsis`and ，然后从父级中添加,和 and 。`facts``movie_area``title``grossing``director``year``movie`

为了在视图中直接渲染 JSON，我需要在主干.js 中使用，我调用：

```
<%= Rabl.render(@results, 'rabl/movie_areas').html_safe -%> 
```

`@results`我的问题中定义的变量 ActiveRecord 查询在哪里并`rabl/movie_areas`引用了`movie_areas.json.rabl`模板。

要直接从控制器输出 API，我使用：

```
def movies
    @area = Area.find_by_slug(params[:slug])
    @results = MovieArea.where(:area_id => @area.id)
    render :inline => Rabl::Renderer.json(@results, 'rabl/movie_areas')
end 
```

希望这将有助于将来的人！

# oracle - Oracle RAC：无法使用 IMP 或 IMPDP 命令在 DB 中导入 .DMP 文件

> ID：15358506
> 
> 赞同：0
> 
> 时间：2013-03-12T10:17:40.130
> 
> 标签：oracle, datapump

我正在尝试将 .dmp 文件导入我的 oracle 11g 数据库。

我在 ENV 变量下设置，然后我尝试运行 imp 和 impdp 命令，但我遇到了错误。

有人能帮我一下吗？将 dmp 文件导入 RAC DB 时可能出现的错误及其解决方案是什么？

```
ENV variables i set

export ORACLE_HOME=/u01/app/oracle/product/11.2.0/dbhome_1
export PATH=$PATH:$ORACLE_HOME/bin
export LD_LIBRARY_PATH=$ORACLE_HOME/lib
export ORACLE_SID=orcl

Error Trace------------------------------------------------------------------------------

[uimuser@blr2261783 bin]$ imp

Import: Release 11.2.0.3.0 - Production on Tue Mar 12 06:08:28 2013

Copyright (c) 1982, 2011, Oracle and/or its affiliates.  All rights reserved.

Username: sys
Password:

IMP-00058: ORACLE error 1034 encountered
ORA-01034: ORACLE not available
ORA-27101: shared memory realm does not exist
Linux-x86_64 Error: 2: No such file or directory
IMP-00005: all allowable logon attempts failed
IMP-00000: Import terminated unsuccessfully
[uimuser@blr2261783 bin]$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-14T07:59:52.617

我在使用 impdp 的 Linux Oracle 11g 上遇到了同样的错误。
我在 Linux 上有一个不正确的 ORACLE_SID env，在我的情况下它需要是`case sensitive`.

所以就我而言，我不得不使用：

`ORACLE_SID=mysid`

代替

`ORACLE_SID=MYSID`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:56:51.607

先试试 sqlplus。

可能 orcl 不是 SID 而是 orcl1 或 orcl2。做一个：

```
select * from v$instance 
```

并将 ORACLE_SID 设置为您启动 impdp 的服务器上的 instance_name

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:51:48.763

似乎您的环境变量设置不正确或您的服务器未运行。查看：

*   您的服务器在同一台机器上运行
*   服务器具有*相同*的ORACLE_HOME - 检查 ORACLE_HOME 上没有斜杠

# java - 从 cli 接受进程启动参数

> ID：15358509
> 
> 赞同：2
> 
> 时间：2013-03-12T10:17:48.950
> 
> 标签：java, process, command-line-interface, command-line-arguments

在我看来，在流程启动时接受流程参数的最佳方法是提供键值对元素。
例如`port=8089`等。
但大多数程序似乎都以预定义的顺序接受参数，即只是`8089`.
我想知道我错了吗？我忽略的键值对还有其他问题吗？

我指的是`String[] args`经典`main`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:33:00.600

有两种方法可以做到这一点 ：

1.  **传递键值对**：

    `java MainClass -Dkey1=value1 -Dkey2=value2`

    使用`System.getProperty("key1")`您可以访问该值。

2.  **主类的参数**

    `java MainClass value1 value2`

    您可以在 main 方法中从 args 数组访问 value1、value2
    `public static void main (String[] args)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:36:25.907

我的猜测是，通过索引而不是键来获取参数更容易，所以键值对没有错，只是预定义的顺序是懒惰的方式。

沿着类似的属性行，找到了一个将输入参数解析为属性对象的示例：[http ://www.java2s.com/Code/Java/Development-Class/CreatePropertiesfromStringarray.htm](http://www.java2s.com/Code/Java/Development-Class/CreatePropertiesfromStringarray.htm)

# sql - 将 nvarchar(MAX) 转换为日期时间

> ID：15358518
> 
> 赞同：1
> 
> 时间：2013-03-12T10:18:13.803
> 
> 标签：sql, sql-server

我有一个表格，其中包含几个字段，它们以格式`nvarchar(MAX)`占据日期。`dd/mm/yyyy`

我运行这个查询：

```
SELECT CONVERT(datetime,[Start Date],103)
FROM [YellowCard_NewDesign].[dbo].[vw_All_Requests] 
```

我得到错误：

> *将 nvarchar 数据类型转换为 datetime 数据类型导致值超出范围。*

奇怪的是，当我像这样运行这个查询时：

```
SELECT TOP 40 CONVERT(datetime,[Start Date],103)
FROM [YellowCard_NewDesign].[dbo].[vw_All_Requests] 
```

它有效，但我不想要`TOP X`.

我的表只包含 36 条记录。所以我不认为有坏数据。

```
20/03/2013
20/03/2013
10/03/2013
10/03/2013
11/03/2013
06/03/2013
06/03/2013
21/03/2013
12/03/2013
03/03/2013
18/03/2013
04/03/2013
28/02/2013
28/02/2013
28/02/2013
28/02/2013
31/01/2013
15/01/2013
23/01/2013
23/01/2013
31/01/2013
23/01/2013
30/01/2013
31/01/2013
24/01/2013
24/01/2013
24/01/2013
24/01/2013
24/01/2013
30/01/2013
23/01/2013
22/01/2013
23/01/2013
23/01/2013
23/01/2013
23/01/2013 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T13:33:22.283

**快速、简单、懒惰的方式，让您继续使用错误的数据类型并允许各种垃圾进入您的表**

```
SET DATEFORMAT DMY;

SELECT 
  -- other columns, 
  [Start Date] = CONVERT(DATETIME, CASE WHEN ISDATE([Start Date]) = 1
  THEN [Start Date] END, 103)
FROM 
  dbo.vw_All_Requests; 
```

现在，在这种情况下，它将返回`NULL`任何不包含有效日期`d/m/y`格式的列值。如果要排除这些行而不是将它们包含在`NULL`值中，可以添加一个`WHERE`子句：

```
SET DATEFORMAT DMY;

SELECT 
  -- other columns, 
  [Start Date] = CONVERT(DATETIME, CASE WHEN ISDATE([Start Date]) = 1
  THEN [Start Date] END, 103)
FROM 
  dbo.vw_All_Requests
WHERE ISDATE([Start Date]) = 1; 
```

你做不到的原因...

```
SELECT CONVERT(DATETIME, [Start Date], 103)
FROM ...
WHERE ISDATE([Start Date]) = 1; 
```

...是因为 SQL Server 可能会`CONVERT`在过滤器之前尝试，从而导致您现在遇到相同的错误。表达式（在大多数情况下`CASE`）允许您控制评估顺序。

现在，当然，作为`d/m/y`格式有效的日期并不一定意味着它是用户想要的。如果您在`07/04/2013`7 月 4 日有一个美国人输入，您会错误地将其视为 4 月 7 日。这就是为什么区域格式喜欢`d/m/y`并且`m/d/y`不好的原因。

* * *

**一种快速、简单、懒惰的方法，让您继续使用错误的数据类型*，但*通过更多工作防止更多垃圾进入您的表**

您仍然应该遵循上面的建议并*修复*或*删除*任何不符合要求的数据，并且至少添加一个检查约束，以便不再有垃圾进入您的表：

```
ALTER TABLE dbo.SourceTable 
  ADD CONSTRAINT CK_SillyMaxColumnIsValidDate
  CHECK (CONVERT(DATE, [Start Date], 103) >= '0001-01-01'); 
```

所以以下插入将失败或成功：

```
-- these succeed:
INSERT dbo.SourceTable([Start Date]) SELECT '01/01/2005';
INSERT dbo.SourceTable([Start Date]) SELECT '25/01/2005';
GO
-- fails:
INSERT dbo.SourceTable([Start Date]) SELECT '01/25/2005';
GO
-- fails:
INSERT dbo.SourceTable([Start Date]) SELECT 'garbage'; 
```

失败完全阻止了错误的插入，并且只允许有效`d/m/y`的字符串进入表。错误信息是：

> 消息 241，级别 16，状态 1，第 1 行
> 从字符串转换日期和/或时间时转换失败。

* * *

**正确的方式**

首先，识别不良数据：

```
SELECT [Start Date] 
  FROM dbo.vw_All_Requests
  WHERE ISDATE([Start Date]) = 0; 
```

现在，修复该数据，无论它来自何处，以便您可以修复数据类型。这可能意味着这些类型的语句的组合：

```
-- correct the date for specific bad values
UPDATE dbo.SourceTable 
  SET [Start Date] = '03/12/2012'
  WHERE [Start Date] = 'whatever';

-- remove the value altogether for specific bad values
UPDATE dbo.SourceTable 
  SET [Start Date] = NULL
  WHERE [Start Date] = 'whatever';

-- remove the row altogether for specific bad values
DELETE dbo.SourceTable 
  WHERE [Start Date] = 'whatever';

-- remove all rows with bad values
SET DATEFORMAT DMY;

DELETE dbo.SourceTable
  WHERE ISDATE([Start Date]) = 0; 
```

然后`DATE`在源表中添加一列：

```
ALTER TABLE dbo.SourceTable
  ADD StartDate -- no space!
  DATE; 
```

然后更新该列中的数据：

```
UPDATE dbo.SourceTable
  SET StartDate = CONVERT(DATETIME, [Start Date], 103); 
```

现在删除原始列（您可能需要调整包含此列的索引或引用它的约束）：

```
ALTER TABLE dbo.SourceTable
  DROP COLUMN [Start Date]; 
```

现在您可以更改新的列名：

```
EXEC sp_rename N'dbo.SourceTable.StartDate', 'Start Date', 'COLUMN'; 
```

或更改视图：

```
ALTER VIEW dbo.vw_All_Requests
AS
   SELECT 
    ...
    [Start Date] = StartDate 
```

或者更改您的应用程序以使用新的、更好的列名。不要忘记更改所有数据类型参数以使用正确的数据类型，并且在传递字符串文字时，**停止**使用区域格式，如`d/m/y`. 像@Kaf 一样，我更喜欢`yyyymmdd`，它永远不会被误解，但`yyyy-mm-dd`总是适用于`DATE`- 只是不是`DATETIME`，例如：

```
SET LANGUAGE FRENCH;
SELECT CONVERT(DATETIME, '2012-03-15'); 
```

结果：

> Msg 242, Level 16, State 3, Line 2
> La conversion d'un type de données varchar en type de données datetime a créé une valeur hors limites。

* * *

**一些背景**

请阅读这篇文章：

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

**最后一点**

请停止创建包含空格的列名或别名。如果您需要视觉分离，请使用下划线。这些都是列名的更好选择，不要以任何方式改变含义，并且不需要在每个引用周围都使用难看的方括号：

```
Start_Date
StartDate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:54:55.180

在字符串类型字段中保存日期不是一个好主意。但是，如果您现在必须处理这些事情，您可以使用`isdate()`函数运行此查询来检查任何不良数据并修复它们：

```
SELECT [Start Date]
FROM [YellowCard_NewDesign].[dbo].[vw_All_Requests]
WHERE isdate([Start Date]) = 0 
```

此外，如果您在转换为日期类型之前获取日期会更好。如果它们都是格式，您可以将它们放在( ) 中，如下所示。*`none culture specific`* `ISO format``dd/mm/yyyy``ISO format``'yyyymmdd'`

[SQL 小提琴演示](http://sqlfiddle.com/#!3/d41d8/10807)

```
declare @d varchar(max) = '20/03/2013'
select convert(datetime,right(@d,4) + substring(@d,4,2) + left(@d,2)) 
```

因此，您的实际查询将类似于：

```
SELECT CONVERT(datetime,right([Start Date],4) + 
                               substring([Start Date],4,2) + 
                               left([Start Date],2))
FROM [YellowCard_NewDesign].[dbo].[vw_All_Requests] 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-03-12T10:23:11.633

这与 TOP 40 无关。这意味着您在前 40 行中没有问题数据。

如果您的表中的数据较少，您可以简单地增加限制以找出错误发生的位置

前任：

```
SELECT TOP 100 CONVERT(datetime,[Start Date],103)
FROM [YellowCard_NewDesign].[dbo].[vw_All_Requests] 
```

# asp.net - 如何将 BillDesk 支付网关与 Asp.Net 网站集成？

> ID：15358521
> 
> 赞同：1
> 
> 时间：2013-03-12T10:18:29.843
> 
> 标签：asp.net

我正在使用 Asp.net 创建一个商业网站，并已进入项目的付款选项阶段。我想将我的网站与 BillDesk 支付网关集成，但在 Internet 上找不到任何有用的文档。甚至未能从 BillDesk 的网站上找到任何合适的帮助。任何人都可以帮助我提供适当的文档和示例。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:25:01.903

You need to contact billdesk.

To contact click [here](http://www.billdesk.com/part_bill.htm) and run the demo

Also, refer [this](http://www.dotnetfunda.com/articles/article1341-bill-desk-payment-gateway-integration-approach.aspx)

# asp.net - 如何在 Umbraco 中创建自定义 aspx 页面？

> ID：15358524
> 
> 赞同：5
> 
> 时间：2013-03-12T10:18:36.717
> 
> 标签：asp.net, umbraco

我想创建/自定义 Umbraco 框架。为此，我需要在 Umbraco 文件夹中创建一个新的 aspx 页面并自定义数据库表字段。有人知道如何在 Umbraco 框架中创建自定义页面吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T08:19:34.377

有很多方法可以解决您的问题，最简单的答案是创建一个名为 pages 的文件夹，然后在您的 web.config 中只需在“ **umbracoReservedPaths** ”键下添加文件夹，这将告诉 umbraco 的 url writer 忽略任何页面在 pages 文件夹下找到。

另一种方法是更“干净”的方法，您可以简单地创建一个用户控件来自定义数据库字段并通过宏将用户控件插入页面。

一些很好的参考点是：

[http://our.umbraco.org/forum/developers/extending-umbraco/4047-Using-my-own-aspx-pages-in-Umbraco](http://our.umbraco.org/forum/developers/extending-umbraco/4047-Using-my-own-aspx-pages-in-Umbraco)

[http://umbraco.com/help-and-support/video-tutorials/introduction-to-umbraco/developer-introduction/using-net-user-controls.aspx](http://umbraco.com/help-and-support/video-tutorials/introduction-to-umbraco/developer-introduction/using-net-user-controls.aspx)

# iphone - 设置使用 iPhone 相机拍摄的图像的类型

> ID：15358527
> 
> 赞同：2
> 
> 时间：2013-03-12T10:18:44.957
> 
> 标签：iphone, ios, objective-c, camera, uiimagepickercontroller

如果我们使用 iPhone 相机拍摄照片，图像将默认以 JPEG 格式保存。

我想保存以其他格式（如 PNG）捕获的图像。是否可以？

当我们从应用程序调用 iPhone 相机时，是否可以从代码中执行此操作，我们可以设置捕获图片后必须保存的图像类型吗？我的意思是在拍照前打开相机并设置类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T10:24:46.517

```
UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

// png image data

NSData *pngData = UIImagePNGRepresentation(image);

// jpeg image data

NSData *jpegData = UIImageJPEGRepresentation(image, compressionQuality);  // compressionQuality = 0.0 to 1.0 --> 0 means maximum compression and 1 means minimum compression 
```

获得 NSData 后，您可以将此数据保存到特定文件。有关更多详细信息，请访问此[链接](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)

希望这会帮助你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T10:23:20.593

这将帮助您将图像保存为 png 类型

```
-(void)imagePickerController:(UIImagePickerController *)picker
  didFinishPickingImage : (UIImage *)image
             editingInfo:(NSDictionary *)editingInfo
{
NSError *error;

NSString  *pngPath = [NSHomeDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"Documents/%@.png",@"photoname"]];
[UIImagePNGRepresentation(image) writeToFile:pngPath atomically:NO];

NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];

NSLog(@"Documents directory: %@", [fileManager contentsOfDirectoryAtPath:documentsDirectory error:&error]);

[self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T10:22:42.920

您可以在方法中使用与此类似的方法将捕获的对象保存为 PNG：

```
// Create paths to output images
NSString  *thePngPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Example.png"];
NSString  *theJpgPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Example.jpg"];

// Write a UIImage to JPEG with minimum compression (best quality)
// The value 'image' must be a UIImage object
// The value '1.0' represents image compression quality as value from 0.0 to 1.0
[UIImageJPEGRepresentation(image, 1.0) writeToFile:theJpgPath atomically:YES];

// Write image to PNG
[UIImagePNGRepresentation(image) writeToFile:thePngPath atomically:YES]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T10:22:45.490

使用此代码，

```
NSData* pngdata = UIImagePNGRepresentation (image); //PNG wrap 
UIImage* img = [UIImage imageWithData:pngdata];
UIImageWriteToSavedPhotosAlbum(img, nil, nil, nil); 
```

# c# - 前 1 且大于等于使用 Linq 的子查询

> ID：15358528
> 
> 赞同：0
> 
> 时间：2013-03-12T10:18:48.287
> 
> 标签：c#, linq

我的 sql 查询如下。

```
select st.kProductVersionPlatformFrom, st.kProductVersionPlatformTo, pv.kProduct, pv.nId, * 
from vSysTable st
left join vProductVersion pv on st.kProductVersionPlatformFrom = pv.nId  
where 
st.kProductVersionPlatformTo >= (select top 1 nid from vProductVersion where kProduct = 2
                                 and kProductVersionPlatform = 87 order by nId desc) 
```

我正在尝试将其转换为 Linq，但找不到使用大于等于的方法

```
var systemTableList = (from sysTableEntity in _sysTableEntityRepository.AsQueryable()
                       join versionEntity in _productVersionRepository.AsQueryable() on
                           sysTableEntity.ProductVersionPlatformFrom equals versionEntity.Id
                           into leftjoined 
                           from joinedsysVersionTable in leftjoined.DefaultIfEmpty()
                           where (from versionEntity in _productVersionRepository.AsQueryable() 
                                  where versionEntity.ProductEntityId.Equals(2) && 
                                 versionEntity.PlatformProductVersionEntityId.Equals(87) 
                                  orderby versionEntity.Id descending 
                                  select versionEntity.Id).Take(1).Contains(sysTableEntity.ProductVersionPlatformFrom >= 87)
                       select new { sysTableEntity}); 
```

但是它在 Contains 关键字附近给我一个错误，即“无法从使用中推断出类型参数”

在这里使用什么而不是包含？我也尝试使用 Where 但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:32:45.070

因为子查询

```
select top 1 nid
from vProductVersion
where kProduct = 2
and kProductVersionPlatform = 87
order by nId desc 
```

不相关，您可以单独使用它，然后在您的主查询中使用它的值。另外，您确定查询总是会返回值（不为空）吗？

```
var nid = from versionEntity in _productVersionRepository.AsQueryable()
where versionEntity.ProductEntityId.Equals(2) && 
versionEntity.PlatformProductVersionEntityId.Equals(87)
orderby versionEntity.Id descending
select versionEntity.Id).First(); 
```

然后使用这个：

```
var systemTableList =
     from sysTableEntity in _sysTableEntityRepository.AsQueryable()
       join versionEntity in _productVersionRepository.AsQueryable()
     on sysTableEntity.ProductVersionPlatformFrom equals versionEntity.Id
           into leftjoined
     from joinedsysVersionTable in leftjoined.DefaultIfEmpty()
     where ProductVersionPlatformTo >= nid; 
```

# ios6 - ios6.1 设备应用程序崩溃

> ID：15358529
> 
> 赞同：1
> 
> 时间：2013-03-12T10:18:51.397
> 
> 标签：ios6, crash

我开发了一个应用程序，它在 iOS 设备的 iOS 5.1 中运行良好。但是在 iOS 6.1 设备上运行应用程序时，应用程序会因错误而崩溃。

libMobileGestalt copySystemVersionDictionaryValue：无法从系统版本字典中查找 ReleaseType。

但它适用于 iOS 5.0/ios 6.1 模拟器。

# actionscript-3 - 使用动作脚本代码打开 swf 文件的免费工具？

> ID：15358531
> 
> 赞同：-2
> 
> 时间：2013-03-12T10:18:57.413
> 
> 标签：actionscript-3, flash

是否有免费工具可以打开和重新编译包含动作脚本 3 代码的 swf 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:24:39.723

对于反编译，您将需要类似[Sothink](http://www.sothink.com/product/flashdecompiler/)
和编译[Flashdevelop](http://www.flashdevelop.org/)

希望你没有偷工作；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:46:12.057

有很多不同的反编译器（有些是免费的，有些是付费的，但有试用版）。反编译文件没什么大不了的，甚至还有一个[Firefox 插件](https://addons.mozilla.org/en-us/firefox/addon/flashbug/)。

但是，从反编译器编译代码是一项非常艰巨的任务，因此不要指望重新编译的代码开箱即用，您将需要花费一些时间来尝试修复各种错误。

# android - Android-onItemClick 将正确的值传递给意图

> ID：15358533
> 
> 赞同：0
> 
> 时间：2013-03-12T10:18:59.987
> 
> 标签：android, android-intent, onitemclicklistener, onitemclick

如何从我的 GridView 获取正确的值以传递给我的意图。看来我做错了。所以这就是我所做的：

在我的 MainActivity 中：

```
CategoryRowItem category;
.
.  
.
//after parsing from json
 category = new CategoryRowItem(catId, catName);
 categoryItems.add(category);

 gridView = (GridView) findViewById(R.id.grid_view);
 final CustomBaseAdapter adapter = new CustomBaseAdapter(this, categoryItems);
 gridView.setAdapter(adapter);

 gridView.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view, int position, long id){
            String categoryId = category.getCatId(); // i think this not right
            String categoryName = category.getCatName();
            System.out.println("CAT ID: " +categoryId);
            Intent intent = new Intent(getApplicationContext(), ShopListActivity.class);
            intent.putExtra("catID", categoryId);
            intent.putExtra(CATEGORY, categoryName);
            startActivity(intent);
        }
    }); 
```

我的 CategoryRowItem 类：这有 getter 和 setter

```
 public String getCatId(){
    return catId;
}

public String getCatName(){
    return catName;
}
    public void setCatId(String cId){
    this.catId = cId;
}

public void setCatName(String name){
    this.catName = name;
} 
```

那么，我怎样才能获得正确的值，如 catID 或单击的项目的 catName>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:21:54.393

将`position`告诉您单击/选择了列表中的哪个项目，并使用它可以获取您`CategoryRowItem`的详细信息及其详细信息。

```
CategoryRowItem category = categoryItems.get(position); // Add this line here.
String categoryId = category.getCatId(); // Now this will be right.
String categoryName = category.getCatName(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:24:11.920

```
gridView.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> parent, View view, int position, long id){
        String categoryId = categoryItems.get(position).getCatId(); // i think this not right
        String categoryName = categoryItems.get(position).getCatName();
        System.out.println("CAT ID: " +categoryId);
        Intent intent = new Intent(getApplicationContext(), ShopListActivity.class);
        intent.putExtra("catID", categoryId);
        intent.putExtra(CATEGORY, categoryName);
        startActivity(intent);
    }
}); 
```

用您的网格侦听器替换此代码

# c++ - 多线程和 MFC

> ID：15358536
> 
> 赞同：3
> 
> 时间：2013-03-12T10:19:08.100
> 
> 标签：c++, multithreading, mfc

我正在编写一个多线程应用程序。在主线程上是主窗口，它是一个无模式对话框。当用户单击开始按钮时，它将创建一个新线程，该线程会长时间执行某些操作。在主线程上，它将创建一个新的无模式对话框来显示该新线程的状态，每个线程 1 个。我使用资源编辑器创建了一种模板对话框，并为状态设置了一个静态文本，其 ID 为 IDC_STATIC_NUMCYCLE。我在 OnIdle 函数期间轮询线程的状态。状态的更新仅适用于 1 个线程，但如果我产生更多的静态文本，所有的静态文本将不会更新，直到最后或者它是唯一一个仍在运行的线程。

宣言：

```
map<CSimDlg *, CSimulator *> simulations; 
```

我的 OnIdle 功能：

```
BOOL CFGSim1App::OnIdle(LONG lCount)
{
CWinApp::OnIdle(lCount);

DWORD exitCode;
CString numOfCycle;

for (map<CSimDlg *, CSimulator *>::iterator iter = simulations.begin(); iter != simulations.end();)
{
    // skip already finished threads
    if (iter->second == NULL)
    {
        iter++;
        continue;
    }
    if (GetExitCodeThread(iter->second->m_hThread, &exitCode))
    {
        if (exitCode == 0)
        {
            delete iter->second;
            iter->second = NULL;

            if (IsWindow(iter->first->m_hWnd))
            {
                iter->first->SetDlgItemText(IDC_STATIC_SIMSTATUS, L"Simulation done");
            }
            else
            {
                iter = simulations.erase(iter);
            }
        }
        else
        {
            ULONG64 temp = iter->second->m_ul64NumOfCycle;

            if (temp % 10000 == 0)
            {
                numOfCycle.Format(_T("%d"), temp);
                iter->first->SetDlgItemText(IDC_STATIC_NUMCYCLE, numOfCycle);
            }

            iter++;
        }
    }
    else
    {
        iter++;
    }   
}

return TRUE;
} 
```

我猜问题出在静态文本的 id 上。有没有办法解决这个问题？还是我需要为每个对话框声明一个不同的 id？还是其他地方的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:44:31.377

(temp % 10000 == 0) 条件对我来说是可疑的。您假设温度将缓慢增加，以至于将检测到 10000 个标记。情况可能并非如此。如果您想减少 GUI 操作，则为每个线程引入一个“last count”变量，并且仅当 temp 足够大于此变量时才更新 GUI，然后将其设置为 temp。

顺便说一句，`std::map`如果您对容器所做的只是遍历它，并且不使用地图的特殊功能，那么您就不需要了。它也可能是一个列表`std::pair`，或者一些新结构的列表。这个新结构可以保存上面提到的最后一个计数变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:14:19.580

你的逻辑对我来说似乎很好。文本更改后，MFC 可能需要重新绘制请求：

```
iter->first->SetDlgItemText(IDC_STATIC_NUMCYCLE, numOfCycle);
iter->first->Invalidate(); 
```

对不起，但目前我没有方便的 MFC 来测试......

# jquery-plugins - 我们可以使用 asp.net Web 服务通过 badsyntax 运行 jquery 拼写检查器吗？

> ID：15358543
> 
> 赞同：3
> 
> 时间：2013-03-12T10:19:28.227
> 
> 标签：jquery-plugins, spell-checking

我已经为文本框和多行文本框的合适拼写检查器研究了很长时间。

我可以看到这个功能是为 firefox 内置的，但它不存在于 chrome 中。

我正在查看 jquery spellchecker - badsyntax 提供的所有拼写检查演示，我发现它非常好用。

这是链接 [http://jquery-spellchecker.badsyntax.co/](http://jquery-spellchecker.badsyntax.co/)

但我的问题是 - 拼写检查器使用 php webservices，我想在我的 ASP.net Web 应用程序中使用它。

有什么办法可以让我使用 asp.net 网络服务运行它吗？

请给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:05:36.117

我是该插件的作者，我真的很想合并一些其他的 web 服务实现。

这最近在我的谷歌警报中弹出，但我无法验证它是否有效：

*   [http://www.yodotnet.com/post/2013/02/24/Jquery-Spellchecker-for-NET.aspx](http://www.yodotnet.com/post/2013/02/24/Jquery-Spellchecker-for-NET.aspx)
*   [https://github.com/AnthonyTerra/ASP.MVC-Jquery-Spellchecker](https://github.com/AnthonyTerra/ASP.MVC-Jquery-Spellchecker)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:12:55.047

大家好：Veerendra Prabhu，badsyntax；我已经集成了 Nhunspell 和 asp.net Web 服务（.asmx），目前我正在尝试将 jquery spellchecker - badsyntax 集成到项目中，我的 jquery spellchecker 现在与我的网络服务连接，但我仍在处理返回的数据我的网络服务类型允许 jquery spellcheker 发挥它的魔力，但我认为它的东西。

我的想法来自：

deepinthecode.com

以下是我使用的一些想法：

我使用[了 NHusnpell](http://www.maierhofer.de/en/open-source/nhunspell-net-spell-checker.aspx)，它有助于在传递的文本中获取不正确的单词并查看[字典](http://extensions.services.openoffice.org/dictionary)（以 .oxt 格式下载的打开办公室，但您必须使用 zip 来获取 en_US.aff 和 en_US.dic）此文件需要位于bin 目录。

在 Glabal.asax 文件中，我创建了一个静态的 NHuspell 实例来完成所有工作。

```
public class Global : System.Web.HttpApplication
{
    static SpellEngine spellEngine;
    static public SpellEngine SpellEngine { get { return spellEngine; } }

    protected void Application_Start(object sender, EventArgs e)
    {
        try
        {
            string dictionaryPath = Server.MapPath("Bin") + "\\";
            Hunspell.NativeDllPath = dictionaryPath;

            spellEngine = new SpellEngine();
            LanguageConfig enConfig = new LanguageConfig();
            enConfig.LanguageCode = "en";
            enConfig.HunspellAffFile = dictionaryPath + "en_us.aff";
            enConfig.HunspellDictFile = dictionaryPath + "en_us.dic";
            enConfig.HunspellKey = "";
            //enConfig.HyphenDictFile = dictionaryPath + "hyph_en_us.dic";
            spellEngine.AddLanguage(enConfig);
        }
        catch (Exception ex)
        {
            if (spellEngine != null)
                spellEngine.Dispose();
        }
    }

    ...

    protected void Application_End(object sender, EventArgs e)
    {
        if (spellEngine != null)
            spellEngine.Dispose();
        spellEngine = null;

    }
} 
```

然后我为 Get_Incorrect_Words 和 Get_Suggestions 方法创建了一个 ASMX Web 服务

```
 /// <summary>
/// Summary description for SpellCheckerService
/// </summary>
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]    
[ScriptService()]
public class SpellCheckerService : System.Web.Services.WebService
{      

    [WebMethod]
    //[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string get_incorrect_words(string words)
    {
        Dictionary<string, string> IncorrectWords = new Dictionary<string, string>();

        List<string> wrongWords = new List<string>();

        var palabras = words.Split(' ');

        // Check spelling of each word that has been passed to the method
        foreach (string word in palabras)
        {
            bool correct = Global.SpellEngine["en"].Spell(word);

            if (!correct){

                wrongWords.Add(word);
            }
        }

        IncorrectWords.Add("data", wrongWords[0]);

        return wrongWords[0];
    }

    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public List<string> get_suggestions(string word)
    {
        List<string> suggestions = new List<string>();
        suggestions = Global.SpellEngine["en"].Suggest(word);
        suggestions.Sort();
        return suggestions;
    } 
```

最后，我修改了 jquery.Spellchecker.js 中对 get_incorrect_words 和 get_suggestions 的调用

```
 /* Config
   *************************/

  var defaultConfig = {
    lang: 'en',
    webservice: {
        path: 'SpellCheckerService.asmx/get_incorrect_words'
      //,driver: 'LabNET'
    },
    local: {
      requestError: 'There was an error processing the request.',
      ignoreWord: 'Ignore word',
      ignoreAll: 'Ignore all',
      ignoreForever: 'Add to dictionary',
      loading: 'Loading...',
      noSuggestions: '(No suggestions)'
    },
    suggestBox: {
      numWords: 5,
      position: 'above',
      offset: 2,
      appendTo: null
    },
    incorrectWords: {
      container: 'body', //selector
      position: null //function
    }
  };

  var pluginName = 'spellchecker';

...

     /* Spellchecker web service
   *************************/

  var WebService = function(config) {

    this.config = config;

    this.defaultConfig = {
      url: config.webservice.path,
      //contentType: "application/json; charset=utf-8",
      type: 'POST',
      dataType: 'text',
      cache: false,
      data: JSON.stringify({
        lang: config.lang,
        driver: config.webservice.driver
      }, null,2) ,
      error: function() {
        alert(config.local.requestError);
      }.bind(this)
    };
  };

  WebService.prototype.makeRequest = function(config) {

    var defaultConfig = $.extend(true, {}, this.defaultConfig);

    return $.ajax($.extend(true, defaultConfig, config));
  };

  WebService.prototype.checkWords = function (text, callback) {
      //action: 'get_incorrect_words',
      //JSON.stringify({

      //    text: text
      //}, null, 2)

      return this.makeRequest(
          {
              data: { words: text },
              success: callback
    });
  };

  WebService.prototype.getSuggestions = function (word, callback) {
      //action: 'get_suggestions',
    return this.makeRequest({
        data: JSON.stringify({

        word: word
      }, null, 2),
      success: callback
    });
  }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T06:46:00.833

我找到了该问题的解决方案，下面是返回 jquery 拼写检查器的 JSON 响应的 web 服务

此代码是在中找到的代码的修改版本

github.com/jackmyang/jQuery-Spell-Checker-for-ASP.NET

```
 /// <summary>

  using System;
  using System.Collections.Generic;
  using System.Net;
  using System.Text;
  using System.Web;
  using System.Xml;

< %@ WebHandler Language="C#" Class="JQuerySpellCheckerHandler2" %>

/// <summary>
/// jQuery spell checker http handler class. Original server-side code was written by Richard Willis in PHP.
/// This is a version derived from the original design and implemented for ASP.NET platform.
/// 
/// It's very easy to use this handler with ASP.NET WebForm or MVC. Simply do the following steps:
///     1\. Include project jquery.spellchecker assembly in the website as a reference
///     2\. Include the httphandler node in the system.web node for local dev or IIS 6 or below
/// <example>
///     <![CDATA[
///         <system.web>
///             <httpHandlers>
///                 <add verb="GET,HEAD,POST" type="jquery.spellchecker.JQuerySpellCheckerHandler" path="JQuerySpellCheckerHandler.ashx"/>
///             </httpHandlers>
///         </system.web>
///     ]]>
/// </example>
///     3\. If IIS7 is the target web server, also need to include the httphandler node in the system.webServer node
/// <example>
///     <![CDATA[
///         <system.webServer>
///             <handlers>
///                 <add verb="GET,HEAD,POST" name="JQuerySpellCheckerHandler" type="jquery.spellchecker.JQuerySpellCheckerHandler" path="JQuerySpellCheckerHandler.ashx"/>
///             </handlers>
///         </system.webServer>
///     ]]>
/// </example>
///     4\. On the web page which included the spell checker, set the 'url' property to '~/JQuerySpellCheckerHandler.ashx'
/// <example>
///     <![CDATA[
///         $("#text-content")
///             .spellchecker({
///                 url: "~/JQuerySpellCheckerHandler.ashx",
///                 lang: "en",
///                 engine: "google",
///                 suggestBoxPosition: "above"
///         })
///     ]]>
/// </example>
/// </summary>
/// <remarks>
/// Manipulations of XmlNodeList is used for compatibility concern with lower version of .NET framework,
/// alternatively, they can be simplified using 'LINQ for XML' if .NET 3.5 or higher is available.
/// </remarks>
public class JQuerySpellCheckerHandler2 : IHttpHandler
{
    #region fields

    // in case google changes url, value of GoogleSpellCheckRpc can be stored in web.config instead to avoid code re-compilation
    private const string GoogleSpellCheckRpc = "https://www.google.com/tbproxy/spell?";
    private const string GoogleFlagTextAlreadClipped = "textalreadyclipped";
    private const string GoogleFlagIgnoreDups = "ignoredups";
    private const string GoogleFlagIgnoreDigits = "ignoredigits";
    private const string GoogleFlagIgnoreAllCaps = "ignoreallcaps";

    #endregion

    #region properties

    /// <summary>
    /// Gets or sets a value indicating whether [ignore duplicated words].
    /// </summary>
    /// <value><c>true</c> if [ignore dups]; otherwise, <c>false</c>.</value>
    private bool IgnoreDups { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether [ignore digits].
    /// </summary>
    /// <value><c>true</c> if [ignore digits]; otherwise, <c>false</c>.</value>
    private bool IgnoreDigits { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether [ignore all capitals].
    /// </summary>
    /// <value><c>true</c> if [ignore all caps]; otherwise, <c>false</c>.</value>
    private bool IgnoreAllCaps { get; set; }

    /// <summary>
    /// Gets or sets a value indicating whether [text alread clipped].
    /// </summary>
    /// <value><c>true</c> if [text alread clipped]; otherwise, <c>false</c>.</value>
    private bool TextAlreadClipped { get; set; }

    #endregion

    #region Implementation of IHttpHandler

    /// <summary>
    /// Enables processing of HTTP Web requests by a custom HttpHandler that implements the <see cref="T:System.Web.IHttpHandler"/> interface.
    /// </summary>
    /// <param name="context">An <see cref="T:System.Web.HttpContext"/> object that provides references to the intrinsic server objects (for example, Request, Response, Session, and Server) used to service HTTP requests. 
    /// </param>
    public void ProcessRequest(HttpContext context)
    {
        string engine = context.Request.Form[1];
        string lang = context.Request.Form["lang"];
        string text = context.Request.Form[3];
        string suggest = context.Request.Form[2];
        SetSwitches(context);            
        string result = SpellCheck(text, lang, engine, suggest);
        context.Response.ContentType = "application/js";
        string jsonStr = "{\"outcome\":\"success\",\"data\":[" + result + "]}";
        if (suggest == "get_incorrect_words")
        {
            context.Response.Write(jsonStr);
        }
        else
        {
            context.Response.Write(result);
        }
    }

    /// <summary>
    /// Gets a value indicating whether another request can use the <see cref="T:System.Web.IHttpHandler"/> instance.
    /// </summary>
    /// <returns>
    /// true if the <see cref="T:System.Web.IHttpHandler"/> instance is reusable; otherwise, false.
    /// </returns>
    public bool IsReusable
    {
        get { return false; }
    }

    #endregion

    #region private methods

    /// <summary>
    /// Spells the check.
    /// </summary>
    /// <param name="text">The text.</param>
    /// <param name="lang">The lang.</param>
    /// <param name="engine">The engine.</param>
    /// <param name="suggest">The suggest.</param>
    /// <returns></returns>
    private string SpellCheck(string text, string lang, string engine, string suggest)
    {
        if (0 == string.Compare(suggest, "undefined", StringComparison.OrdinalIgnoreCase))
        {
            suggest = string.Empty;
        }
        if (0 != string.Compare(engine, "google", true))
        {
            throw new NotImplementedException("Only google spell check engine is support at this moment.");
        }
        string xml;
        List<string> result;
        if (string.IsNullOrEmpty(suggest) || suggest == "get_incorrect_words")
        {
            xml = GetSpellCheckRequest(text, lang);
            result = GetListOfMisspelledWords(xml, text);
        }
        else
        {
            xml = GetSpellCheckRequest(text, lang);
            result = GetListOfSuggestWords(xml, text);
        }
        return ConvertStringListToJavascriptArrayString(result);
    }

    /// <summary>
    /// Sets the boolean switch.
    /// </summary>
    /// <param name="context">The context.</param>
    /// <param name="queryStringParameter">The query string parameter.</param>
    /// <returns></returns>
    private static bool SetBooleanSwitch(HttpContext context, string queryStringParameter)
    {
        byte tryParseZeroOne;
        string queryStringValue = context.Request.QueryString[queryStringParameter];
        if (!string.IsNullOrEmpty(queryStringValue) && byte.TryParse(queryStringValue, out tryParseZeroOne))
        {
            if (1 < tryParseZeroOne || 0 > tryParseZeroOne)
            {
                throw new InvalidOperationException(string.Format("Query string parameter '{0}' only supports values of 1 and 0.", queryStringParameter));
            }
            return tryParseZeroOne == 1;
        }
        return false;
    }

    /// <summary>
    /// Gets the list of suggest words.
    /// </summary>
    /// <param name="xml">The source XML.</param>
    /// <param name="suggest">The word to be suggested.</param>
    /// <returns></returns>
    private static List<string> GetListOfSuggestWords(string xml, string suggest)
    {
        if (string.IsNullOrEmpty(xml) || string.IsNullOrEmpty(suggest))
        {
            return null;
        }
        // 
        XmlDocument xdoc = new XmlDocument();
        xdoc.LoadXml(xml);
        if (!xdoc.HasChildNodes)
        {
            return null;
        }
        XmlNodeList nodeList = xdoc.SelectNodes("//c");
        if (null == nodeList || 0 >= nodeList.Count)
        {
            return null;
        }
        List<string> list = new List<string>();
        foreach (XmlNode node in nodeList)
        {
            list.AddRange(node.InnerText.Split('\t'));
            return list;
        }
        return list;
    }

    /// <summary>
    /// Gets the list of misspelled words.
    /// </summary>
    /// <param name="xml">The source XML.</param>
    /// <param name="text">The text.</param>
    /// <returns></returns>
    private static List<string> GetListOfMisspelledWords(string xml, string text)
    {
        if (string.IsNullOrEmpty(xml) || string.IsNullOrEmpty(text))
        {
            return null;
        }
        XmlDocument xdoc = new XmlDocument();
        xdoc.LoadXml(xml);
        if (!xdoc.HasChildNodes)
        {
            return null;
        }
        XmlNodeList nodeList = xdoc.SelectNodes("//c");
        if (null == nodeList || 0 >= nodeList.Count)
        {
            return null;
        }
        List<string> list = new List<string>();
        foreach (XmlNode node in nodeList)
        {
            int offset = Convert.ToInt32(node.Attributes["o"].Value);
            int length = Convert.ToInt32(node.Attributes["l"].Value);
            list.Add(text.Substring(offset, length));
        }
        return list;
    }

    /// <summary>
    /// Constructs the request URL.
    /// </summary>
    /// <param name="text">The text which may contain multiple words.</param>
    /// <param name="lang">The language.</param>
    /// <returns></returns>
    private static string ConstructRequestUrl(string text, string lang)
    {
        if (string.IsNullOrEmpty(text))
        {
            return string.Empty;
        }
        lang = string.IsNullOrEmpty(lang) ? "en" : lang;
        return string.Format("{0}lang={1}&text={2}", GoogleSpellCheckRpc, lang, text);
    }

    /// <summary>
    /// Converts the C# string list to Javascript array string.
    /// </summary>
    /// <param name="list">The list.</param>
    /// <returns></returns>
    private static string ConvertStringListToJavascriptArrayString(ICollection<string> list)
    {
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.Append("[");
        if (null != list && 0 < list.Count)
        {
            bool showSeperator = false;
            foreach (string word in list)
            {
                if (showSeperator)
                {
                    stringBuilder.Append(",");
                }
                stringBuilder.AppendFormat("\"{0}\"", word);
                showSeperator = true;
            }
        }
        stringBuilder.Append("]");
        return stringBuilder.ToString();
    }

    /// <summary>
    /// Sets the switches.
    /// </summary>
    /// <param name="context">The context.</param>
    private void SetSwitches(HttpContext context)
    {
        IgnoreAllCaps = SetBooleanSwitch(context, GoogleFlagIgnoreAllCaps);
        IgnoreDigits = SetBooleanSwitch(context, GoogleFlagIgnoreDigits);
        IgnoreDups = SetBooleanSwitch(context, GoogleFlagIgnoreDups);
        TextAlreadClipped = SetBooleanSwitch(context, GoogleFlagTextAlreadClipped);
    }

    /// <summary>
    /// Requests the spell check and get the result back.
    /// </summary>
    /// <param name="text">The text.</param>
    /// <param name="lang">The language.</param>
    /// <returns></returns>
    private string GetSpellCheckRequest(string text, string lang)
    {
        string requestUrl = ConstructRequestUrl(text, lang);
        string requestContentXml = ConstructSpellRequestContentXml(text);
        byte[] buffer = Encoding.UTF8.GetBytes(requestContentXml);

        WebClient webClient = new WebClient();
        webClient.Headers.Add("Content-Type", "text/xml");
        try
        {
            byte[] response = webClient.UploadData(requestUrl, "POST", buffer);
            return Encoding.UTF8.GetString(response);
        }
        catch (ArgumentException)
        {
            return string.Empty;
        }
    }

    /// <summary>
    /// Constructs the spell request content XML.
    /// </summary>
    /// <param name="text">The text which may contain multiple words.</param>
    /// <returns></returns>
    private string ConstructSpellRequestContentXml(string text)
    {
        XmlDocument doc = new XmlDocument(); // Create the XML Declaration, and append it to XML document
        XmlDeclaration declaration = doc.CreateXmlDeclaration("1.0", null, null);
        doc.AppendChild(declaration);
        XmlElement root = doc.CreateElement("spellrequest");
        root.SetAttribute(GoogleFlagTextAlreadClipped, TextAlreadClipped ? "1" : "0");
        root.SetAttribute(GoogleFlagIgnoreDups, IgnoreDups ? "1" : "0");
        root.SetAttribute(GoogleFlagIgnoreDigits, IgnoreDigits ? "1" : "0");
        root.SetAttribute(GoogleFlagIgnoreAllCaps, IgnoreAllCaps ? "1" : "0");
        doc.AppendChild(root);
        XmlElement textElement = doc.CreateElement("text");
        textElement.InnerText = text;
        root.AppendChild(textElement);
        return doc.InnerXml;
    }

    #endregion
} 
```

你也可以使用这个javascript：

```
 // Replace the Spellchecker.php path with Asp.net ashx path

    spellchecker = new $.SpellChecker(body, {
        lang: 'en',
        parser: 'html',
        webservice: {
          path: "../Includes/JS/spellify/JQuerySpellCheckerHandler2.ashx",
          driver: 'google'
        },
        suggestBox: {
          position: 'below'
        }
      });

      // Bind spellchecker handler functions
      spellchecker.on('check.success', function() {
        alert('There are no incorrectly spelt words.');
      });

      spellchecker.check(); 
```

# mongodb - 在mongodb中填写初始化数据

> ID：15358551
> 
> 赞同：0
> 
> 时间：2013-03-12T10:19:52.063
> 
> 标签：mongodb, express, mongoose

我正在使用猫鼬并为用户设置架构，如下所示：

```
var users=new mongoose.Schema({
username:String,
password:String,
type:String
});
var User=mongoose.model('user',users); 
```

**现在我需要这个有一个初始行，其值为 admin、admin、admin 怎么做？**

我正在使用快速服务器来验证这样的用户

```
app.post("/verifyLogin",function(request,response){
var usr=request.body.username;
var pass=request.body.password;
//VERIFICATION FROM DATABASE CODE GOES HERE
}); 
```

PS 我是 mongodb/基于文档的数据存储的新手。到目前为止，我一直使用 phpmyadmin 并直接从提供的界面插入数据。

**我尝试了什么：** 我做了一个像这样的临时帖子处理程序

```
app.post("/initialize/database",function(request,response){
var user=new userModel({username:'admin',password:'password', type:'admin'});
user.save(function(err){
if(!err){return console.log('created')}else{console.log(err)}
return response.send(user);
});
}) 
```

然后在控制台中这样做：

```
jQuery.post('/initialize/database',function(data){console.log(data)}) 
```

不知道这是否是最好的方法:(

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-12T10:42:23.480

我发现从终端输入初始化数据最容易。

```
$ mongo
> use database-name
> db.users.insert({ username: 'admin', password: 'admin', type: 'admin' }) 
```

这可以让事情顺利进行，但我禁止您在生产时将纯文本密码存储在数据库中。要实现散列并使用节点而不是终端，您可以创建一个路由来创建新用户。就像是：

```
app.post("/signup",function(request,response){
  var usr = request.body.username,
      pass = request.body.password;

  somePasswordHashingAlgoritm(pass, function (hashedPassword) {
    User.insert({
      username: usr,
      password: hashedPassword,
      type: 'admin'
    });
  });
}); 
```

更好的是在猫鼬中实现一个预保存钩子，但这是另一个主题的主题。如果您不希望其他人注册您的网站，只需在您自己创建时删除该代码。

# eclipse - FDT Free 中缺少“新 Haxe 项目”

> ID：15358552
> 
> 赞同：0
> 
> 时间：2013-03-12T10:19:56.627
> 
> 标签：eclipse, haxe, fdt

我刚刚从其[网站](http://fdt.powerflasher.com/buy-download/)下载了 FDT IDE 免费版。我想将它用于 Haxe 开发，所以在第一次启动时我选择只开发 Haxe 项目。但是在“新建 FDT 项目”窗口中，我找不到 Haxe 项目模板： ![这里没有 Haxe 项目](../Images/4bd73f98699597250a65d45e503e83e6.png) 我在首选项中添加了 Haxe 和 Neko 路径，但没有解决。我还尝试将它们添加到“已安装的 SDK”选项卡中，但我收到一条错误消息，指出它在给定文件夹中找不到 SDK。我最后一次绝望的尝试是提取一个新的 FDT 应用程序并将其设置为我也想开发 AS 和 Flex 应用程序，但没有运气。我仍然无法创建 Haxe 项目。然而奇怪的是 FDT 的版本大约是 1.xxx： ![低版本号](../Images/b16fa7ce371e54cb379db8ae62fd4845.png) 但据我所知最新版本是5.5。免费版本是否有单独的版本控制或我设法下载了过时的版本？如果最后一个是真的，那么我真的不知道在哪里可以获得最新版本，因为如上所述，我是从官方网站下载的。

* * *

在 Eclipse Juno 安装中使用 FDT 作为插件也是如此。那里也缺少 Haxe 项目。

* * *

查看FDT的AppData文件夹，有Haxe项目模板但没有Haxe项目类型： ![projectTemplate2 文件夹](../Images/5bd85ecaae2a5fb288a97ad582ac26c8.png) ![projectType2 文件夹](../Images/d1e13c134b563cf9293729a3d979020c.png)

* * *

我原来下载的是win64版本，但是已经试过win32版本了，还是没有Haxe项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T18:33:19.633

与 FDT 的技术支持人员交谈。显然，项目模板配置文件中的小错误将在即将发布的版本中修复。

不确定它们在非 OSX 平台上的位置，但对于 mac，它们位于：~/Library/Application Support/FDT/projectTemplates2/haxe/*/description.xml

编辑文件并将“版本”标签从 2.7 更改为 2.8。然后重新启动 FDT，将显示 Haxe 项目模板。

# ruby-on-rails - Rails + Heroku + Sidekiq = PG::Error: SSL SYSCALL error: EOF detected

> ID：15358555
> 
> 赞同：1
> 
> 时间：2013-03-12T10:20:01.050
> 
> 标签：ruby-on-rails, activerecord, heroku, actionmailer, sidekiq

我有一个使用 Sidekiq 的 DelayMailer 异步发送邮件的 rails 应用程序。该应用程序部署在我们使用 PG 作为数据库的 heroku 上。EOF 错误（PG::Error: SSL SYSCALL error: EOF detected）出现在我的 ActionMailer 实现方法中（不是每次都出现）。当我尝试从 ActionMailer 方法访问数据库时，似乎出现了错误。

```
def new_message(user_id, message_id)
  @user = User.find user_id # ERROR appears here when trying to access the DB
... 
```

我不知道发生了什么。我已经用谷歌搜索了解决方案，我只找到了一些关于将 after_fork 和 before_fork 添加到我已经拥有的 unicorn.rb 的建议，我不确定这是否相关。

# jquery - 如何在 Mobile Safari 中制作第二次单击关闭下拉菜单

> ID：15358558
> 
> 赞同：1
> 
> 时间：2013-03-12T10:20:16.270
> 
> 标签：jquery, mobile, drop-down-menu, safari

我有一个相对简单的下拉菜单，我为它设置了 mouseenter 和 mouseleave 事件。该菜单效果很好，但是在移动 Safari 上单击“第二次”触发菜单的链接（在打开菜单后）不会关闭它。我尝试向 html 或正文添加单击事件以触发菜单关闭，但这似乎不起作用。

我的 HTML：

```
<ul>
<li class="dropdown"><a href="#">Toggle dropdown</a>
    <ul class="dropdown-menu">
        <li>This is my sub menu</li>
        <li>And another item</li>
        <li>And one more</li>
    </ul>
</li>
<li><a href="#">Just another link</a></li> 
```

我的 CSS（这点真的很复杂）：

```
ul.dropdown-menu { display: none; } 
```

我的 jQuery：

```
$(document).on({ mouseenter: function(){
        $(this).find('.dropdown-menu').stop(true, true).delay(250).fadeIn(100);
        $(this).addClass('open');
    }, mouseleave: function() {
        $(this).find('.dropdown-menu').stop(true, true).delay(50).fadeOut(50);
        $(this).removeClass('open');
    }}, 'ul li.dropdown'); 
```

我也把这一切都扔进了小提琴：

[http://jsfiddle.net/EtS8E/1/](http://jsfiddle.net/EtS8E/1/)

我有点认为向 li 本身添加一个点击事件可以让我触发关闭，但唉，这也没有给我想要的结果。

我已经在谷歌上搜索了几个小时，并在这里找到了几个相关问题的答案（例如：[如何正确处理 'body' jquery event to close a dropdown](https://stackoverflow.com/questions/13237690/how-to-properly-handle-a-body-jquery-event-to-close-a-dropdown)），但似乎都没有像描述的那样工作

有任何想法吗？:!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:23:44.090

这可能对任何人都没有任何帮助，但为了清楚起见，我会在这里发布。最后，我使用以下方法解决了问题。

```
$(document).on({ mouseenter: function(e){
        if (!iOSdevice) {
            $(this).find('.dropdown-menu').stop(true, true).delay(250).fadeIn(100);
            $(this).addClass('open');
        }
    }, mouseleave: function(e) {
        if (!iOSdevice) {
            $(this).find('.dropdown-menu').stop(true, true).delay(50).fadeOut(50);
            $(this).removeClass('open');
        }
    }, click: function(e) {
        e.preventDefault(); // Prevents the default click event
        if ($(this).hasClass('open')) {
            $(this).find('.dropdown-menu').stop(true, true).delay(50).fadeOut(50);
            $(this).removeClass('open');
        } else {
            // Reset all other open dropdowns
            resetDropDowns();
            // Open this dropdown
            $(this).addClass('open');
            $(this).find('.dropdown-menu').stop(true, true).delay(250).fadeIn(100);
        }
    }}, 'header nav ul li.dropdown:not(.disabled)'); 
```

iOSdevice 变量是真/假，具体取决于浏览器类型。

# wordpress - 谷歌重复标题标签和 Wordpress

> ID：15358560
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:20:28.237
> 
> 标签：wordpress, seo

我在解决我的 Wordpress 安装中重复的标题标签问题时遇到了一些问题。我安装了 All in one SEO，我的 robots.txt 看起来像这样；

```
User-agent:  *
Disallow: /cgi-bin/
Disallow: /wp-admin/
Disallow: /wp-content/
Disallow: /wp-content/plugins/
Disallow: /wp-includes/
Disallow: /comments/feed/
Disallow: /feed/
Disallow: /trackback/
Disallow: /index.php
Disallow: /xmlrpc.php
Disallow: ?comments=*
Disallow: /search?
Disallow: /?p=*
Disallow: /go/

User-agent: Mediapartners-Google*
Allow: /

User-agent: Googlebot-Image
Allow: /wp-content/uploads/

User-agent: Adsbot-Google
Allow: / 

User-agent: Googlebot-Mobile
Allow: / 
```

在谷歌网站管理员工具中，它似乎认为我的主页上有分页，而我没有。我在下面得到重复的标题，但是我没有分页，它们都显示主页。

```
/
/page/18/
/page/22/
/page/24/ 
```

我可以将所有重复的 url 都设置为 301 到主页 url 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:34:21.057

我不确定 Google 是如何找到这些网址的。也许您曾经有过分页（googlebot 永远不会忘记 URL）。也许其他一些网站链接到他们。也许用户访问了这些页面，谷歌通过谷歌工具栏注意到了这一点。也许 googlebot 只是在运行 Wordpress 的网站上尝试这样的 URL。

在这些 URL 上提供主页似乎是 Wordpress 的工作方式。我刚刚在我自己的 Wordpress 网站上测试了这些 URL，它们也显示了主页。

正如您所建议的，您可以将它们重定向到您的 .htaccess 文件中。安装 Wordpress 的众多 SEO 插件之一可能会更容易，这些插件会将规范标签放在您的所有页面上。

# openlayers - OpenLayers 选择具有多边形的特征

> ID：15358561
> 
> 赞同：4
> 
> 时间：2013-03-12T10:20:31.970
> 
> 标签：openlayers

尝试使用它 - [http://openlayers.org/dev/examples/SLDSelect.html](http://openlayers.org/dev/examples/SLDSelect.html) 例如：我有选择功能（框），它允许我选择图层上的功能。但它是盒子类型的。现在我正在尝试进行相同的选择，但使用多边形样式。就像绘制新多边形一样，但该多边形内的内容将被选择。我是否在尝试使用此 SLD 选择时寻找正确的路径，还是有其他更好的方法？

对任何解决方案持开放态度。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-15T09:15:51.160

在这个 plunker 中，我使用了interaction.Draw 创建了一个多边形。多边形完成后，它会查找多边形范围内的所有特征点并选择它们。

[这是plunker的链接](http://plnkr.co/edit/kSFZb9)

以下是`draw.on('drawend',...`听众的摘录：

```
draw.on('drawend', function(e) {

  e.preventDefault();
  //stop a click select from overriding selection made by polygon
  setTimeout(function(){
    select.setActive(true)
  },300);

  // features that intersect the box are added to the collection of
  // selected features, and their names are displayed in the "info"
  // div
  var extent = e.feature.getGeometry().getExtent();

  //pointsLayer is the vector layer with the point features
  pointsLayer.getSource().forEachFeatureIntersectingExtent(extent, function(feature) {
    selectedFeatures.push(feature);
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T10:49:15.660

从 GIS StackEchange 站点：

```
function buildIt() {//START FUNCTION buildIt

//CREATE A NEW EMPTY VECTOR LAYER 
var polygonAdHoc = new OpenLayers.Layer.Vector("Poly Layer");
//ADD THE NEW VECTOR LAYER TO THE OPENLAYERS MAP
map.addLayer(polygonAdHoc);
//SET A VARIABLE TO THE NAME OF THE EXISTING LAYER THAT WILL BE TESTED FOR INTERSECTION WITH THE USER CREATED POLYGON
//I CHOSE TO GET THE LAYER BY NAME BUT YOU MIGHT CHOOSE TO DO IT ANOTHER WAY
var standLyr = map.getLayersByName("nameOfTheVectorLayerYouWantToTestForIntersection");

//CREATE A DRAW FEATURE CONTROL FOR THE USER CREATED VECTOR LAYER
var draw = new OpenLayers.Control.DrawFeature(polygonAdHoc, OpenLayers.Handler.Polygon);
//ADD THE DRAW FEATURE CONTROL TO THE MAP
map.addControl(draw);
//ACTIVATE THE DRAW FEATURE CONTROL
draw.activate();

//WHEN THE USER FINISHES DRAWING THE AD-HOC POLYGON THE beforefeatureadded EVENT WILL FIRE
polygonAdHoc.events.on({
    beforefeatureadded: function (event) {
        poly = event.feature.geometry;//SET A VARIABLE TO THE USERDRAWN POLYGONS GEOMETRY
        //alert("polygonAdHoc.features[0].geometry: " + poly);//IF YOU WANT TO SEE THE GEOMETRY COORDINATES UNCOMMENT THIS LINE
        for (var a = 0; a < standLyr[0].features.length; a++) {//LOOP THRU THE STANDS FEATURES OF THE LAYER YOU WANT TO TEST FOR INTERSECTION WITH THE USER DRAWN POLYGON
            if (poly.intersects(standLyr[0].features[a].geometry)) {//IF THE USER DRAWN POLYGON INTERSECTS THE TARGET LAYERS FEATURE REPRESENTED BY THE VARIABLE "a" THEN
                 //IDENTIFY THE FEATURE THAT INTERSECTS 
                 //FOR SIMPLICITIES SAKE I CHOSE TO JUST FIRE AN ALERT
                 //MY ACTUAL APP ADDS EACH SELECTED FEATURE TO A SELECT FEATURE CONTROL AND HIGHLIGHTS EACH POLYGON ON THE MAP                
                 alert("stands feature intersection: " +  standLyr[0].features[a].attributes['nameOfAttribute']);
            }//END OF IF STATEMENT
        }//END OF FOR STATEMENT
        draw.deactivate();//I ONLY WANT THE USER TO BE ABLE TO DRAW ONE AD-HOC POLYGON
        //SO I DEACTIVATE THE DRAW FEATURE CONTROL AFTER THEY CREATE THE FIRST POLYGON
        return false;
    }//END OF beforefeatureadded FUNCTION
});//END OF polygonAdHoc.events.on
}//END OF buildIt FUNCTION 
```

# java - BridJ：无法获取方法的地址

> ID：15358562
> 
> 赞同：3
> 
> 时间：2013-03-12T10:20:33.373
> 
> 标签：java, native, bridj

BridJ 找不到共享库的方法。我需要帮助来理解为什么。

该库由 JNAerator 生成。

`mn -g`lib.so 的：

```
 w _Jv_RegisterClasses
         U _Unwind_Resume@@GCC_3.0
00004970 T _Z11CreateClassv
00004960 T _Z11DeleteClassPv
.... 
```

图书馆的标题：

```
#ifdef __cplusplus
extern "C" {
#endif;
void* CreateClass(void);
void  DeleteClass(void* hClass);
.... 
```

Java代码：

```
@Runtime(CRuntime.class) 
public class MobileclientLibrary {
    static {
        BridJ.register();
    }
    public static Pointer<? > CreateClass() {
         return Pointer.pointerToAddress(CreateClass$2());
    }
    @Ptr 
    @Name("CreateClass") 
    protected native static long CreateClass$2();

    public static void DeleteClass(Pointer<? > hClass) {
        DeleteClass(Pointer.getPeer(hClass));
    }
    protected native static void DeleteClass(@Ptr long hClass);
    ... 
```

在日志中运行此应用程序时：

```
Mar 12, 2013 2:13:53 PM org.bridj.BridJ log
INFO: Failed to get address of method protected static native void Mobileclient.MobileclientLibrary.DeleteClass(long) 
```

但是方法`CreateClass`是成功找到的。

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:22:35.120

此错误消息意味着在您的标头中声明了一个方法，但未在您的库中实现。验证`DeleteClass()`实际上是在 JNAerator 引用的库中实现的。

# mysql - Spring StoredProcedure Object 返回对象列表

> ID：15358563
> 
> 赞同：0
> 
> 时间：2013-03-12T10:20:37.380
> 
> 标签：mysql, spring, stored-procedures, jdbctemplate

我使用 mysql 存储过程来检索对象列表。这可能吗 ？

我在关注这篇[文章](http://www.luv2code.com/2011/11/10/calling-stored-procedures-with-spring-jdbc-templates/)

问题：

1.  如何使用结果集在 select 语句中检索对象列表？
2.  如何将结果集映射到对象列表？

    CREATE DEFINER= `root`@ `localhost`PROCEDURE `generateLCRReport`(IN `countryCodeParam`INT, OUT `countryCode`INT, OUT `dialCode`INT, OUT `custPrefix`VARCHAR(50), OUT `vendorPrefix`VARCHAR(50), OUT `custPrice`FLOAT, OUT `vendorCost`FLOAT, OUT `profit`FLOAT) 语言 SQL 确定性读取 SQL 数据 SQL 安全定义器注释“generateLCRReport”开始选择 c.country_code 作为 countryCode，c.dial_code 作为 dialCode，c.customer_prefix 作为 custPrefix，c.vendor_prefix 作为 vendorPrefix，max(cust_rate.rate) 作为 custPrice，min(ven_rate.rate) 作为 vendorCost，round(max(cust_rate.rate) ) - min(ven_rate.rate), 3) 作为 cdr c 的利润

    inner join (select a.id, r.rate, re.country_code, re.dial_code, ap.prefix from rate r inner join region re on r.region_id = re.id inner join account_prefix ap on r.account_prefix_id = ap.id a.id = ap.account_id 上的内部加入帐户 a，其中 ap.prefix_type = 0 ）作为 cust_rate

    在 c.country_code = cust_rate.country_code 和 c.dial_code = cust_rate.dial_code 和 c.customer_prefix = cust_rate.prefix 和 c.customer_id = cust_rate.id

    inner join (select a.id, r.rate, re.country_code, re.dial_code, ap.prefix from rate r inner join region re on r.region_id = re.id inner join account_prefix ap on r.account_prefix_id = ap.id内部加入帐户 a on a.id = ap.account_id where ap.prefix_type = 1 ) as ven_rate

    在 c.country_code = ven_rate.country_code 和 c.dial_code = ven_rate.dial_code 和 c.vendor_prefix = ven_rate.prefix 和 c.vendor_id = ven_rate.id 其中 c.country_code = countryCodeParam 组由 c.country_code 和 c.dial_code 顺序由 c .country_code 升序限制 5000；

    结尾

    公共类 LCRReportSP 扩展 StoredProcedure {

    ```
    /**
     * 
     */
    @Autowired
    public LCRReportSP(JdbcTemplate jdbcTemplate, String storedProcName, RowMapper<CostReport> mapper) {
        super(jdbcTemplate, storedProcName);

        SqlReturnResultSet rs = new SqlReturnResultSet("", mapper);
        SqlOutParameter outParam = new SqlOutParameter("countryCode", Types.INTEGER);
        SqlOutParameter outParam1 = new SqlOutParameter("dialCode", Types.INTEGER);
        SqlOutParameter outParam2 = new SqlOutParameter("custPrefix", Types.VARCHAR);
        SqlOutParameter outParam3 = new SqlOutParameter("vendorPrefix", Types.VARCHAR);
        SqlOutParameter outParam4 = new SqlOutParameter("custPrice", Types.FLOAT);
        SqlOutParameter outParam5 = new SqlOutParameter("vendorCost", Types.FLOAT);
        SqlOutParameter outParam6 = new SqlOutParameter("profit", Types.FLOAT);

        this.declareParameter(rs);
        this.declareParameter(outParam);
        this.declareParameter(outParam1);
        this.declareParameter(outParam2);
        this.declareParameter(outParam3);
        this.declareParameter(outParam4);
        this.declareParameter(outParam5);
        this.declareParameter(outParam6);

        this.setFunction(false);
        this.compile();
    }

    /**
     * @param countryCode
     * @return
     */
    public Map<String, ?> generateLCRReport(int countryCode) {

        Map<String, Object> inParam = new HashMap<String, Object>();

        inParam.put("countryCodeParam", new Integer(countryCode));

        return this.execute(inParam);
    } 
    ```

    }

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:05:05.063

我正在使用 RowMapper 并声明参数 SqlReturnResultSet。

# java - 如何从jsp页面的初始化块中获取会话对象

> ID：15358566
> 
> 赞同：0
> 
> 时间：2013-03-12T10:20:51.113
> 
> 标签：java, jsp, session-variables

我有一个 JSP 文件，我需要使用它来返回存储在会话对象中的用户：

工厂.jsp：

```
<%@page import="users.User"%>
<%!
public static class Factory{
    public Factory(){

    }

    public static User getUser(){
        //session.getAttribute("loggedUser"); doesn't work
        return null;
    }
}

%>

<%
//some code
%> 
```

有没有办法在 getUser() 方法中访问会话对象？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T10:30:12.023

如果您使用任何框架，则不必使用 scriptlet。试试下面的代码：

```
<%!
    Session session = request.getSession();
%> 
```

然后使用会话对象从中获取变量。

```
<%
    User user = session.getAttribute("loggedUser");
%> 
```

# javascript - 除了 cookie 之外，还有什么替代的网络分析解决方案可以获取 100% 准确的数据？

> ID：15358573
> 
> 赞同：0
> 
> 时间：2013-03-12T10:21:08.007
> 
> 标签：javascript, html, performance, cookies, google-analytics

Cookie 常用于大多数现有的网络分析中。`Eg:Google Anlaytics`,

`Drawbacks:`假设用户在浏览器中禁用了 cookie。那么在网络分析中使用 cookie 的情况下，网络分析如何收集用户交互数据。

即使在网络分析中使用 cookie，[我们也无法获得 100% 准确的数据](http://www.kaushik.net/avinash/data-quality-sucks-lets-just-get-over-it/.)

[我们可以将分析与新的英国 cookie 法一起使用吗？](http://blog.silktide.com/2011/05/can-we-use-analytics-with-the-new-uk-cookie-law/.)

`100% accurate data`除了 cookie，还有其他替代解决方案可以在网络分析中收集吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:35:43.907

当我说“日志文件分析”时，我是在显示我的年龄吗？这将为您提供准确的页面展示次数。对于“唯一身份访问者”和其他聚合值，您无法获得 100% 准确的数字，因为这在某种程度上是定义问题，并且在系统之间有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:26:01.587

It's not 100% accurate, because like cookies a user can disable it, but a place I previously worked was migrating to a JavaScript based system. I don't know how well the data turned out to be, because I left before we get results back, but you could look at [OWA's JavaScript Tracker](http://demo.openwebanalytics.com/jstracker.php)

# java - 从服务器端脚本打印出 Java Web 应用程序

> ID：15358576
> 
> 赞同：0
> 
> 时间：2013-03-12T10:21:26.587
> 
> 标签：java, jsp, printing

我想使用服务器端 java 代码打印出 JSP 文件。

目前我正在使用 javascript 代码，但想摆脱使用客户端脚本，因为如果用户在浏览器中禁用 javascript，它将无法工作。我在用：

```
window.print(); 
```

有没有办法做到这一点？如果是，我还想设置默认打印机，不显示打印对话框并使用默认打印机进行打印。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:48:33.917

基本上，您不能，Java 是一种服务器端语言，如果您希望页面在呈现后动态更改，则需要使用客户端语言。

但是，您可以选择在我看来它非常丑陋。

在服务器上创建一个文件并使其以

```
<head>
    <meta http-equiv="refresh" content="2;url="/>
</head> 
```

这样您的页面将每 2 秒（或任何您想要的）刷新一次。然后，在服务器端脚本上，附加您必须打印出来的代码，然后在您的主网页中，创建一个指向它的 iframe。

结果：

您的页面将每 2 秒刷新一次，它将包含您之前使用 java 添加到文件中的所有 html

我希望它很清楚，如果不是，请询问:)

# java - 如何将exe应用程序转换为jar文件？

> ID：15358578
> 
> 赞同：-5
> 
> 时间：2013-03-12T10:21:34.603
> 
> 标签：java, jar, exe, launch4j

我有一个名为 Myapp.exe 的 exe 文件。现在我想将 .exe 转换为 jar 文件。该 jar 文件也应该在 NON JAVA 系统中工作。我没有任何想法来实现它。谁能建议我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:40:59.843

直接转换不可用！！！因为它们在完全不同的平台上。

![在此处输入图像描述](../Images/87bb2fbf6cb9c659cb61035f31eee67e.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:28:06.607

满足您的要求是**不可能**的，原因有二。

1) 您不能将 EXE 更改为 JAR 文件。

2) 您不能在没有安装 Java 的系统上运行 JAR 文件。

如果您想在没有安装 Java 的（Windows）系统上运行某些东西，它需要是一个 EXE ......或者其他*不需要*Java 的东西。

（如果您解释了您认为需要这样做的原因，这可能会有所帮助。也许还有一组替代要求并非不可能满足。）

* * *

> 为什么我做所有这些存根是为了让我的 jar 必须在未安装 Java 的系统中工作。

那么它需要是一个EXE！

> 我有一个 jar。它在安装了 java 的系统中运行良好。我的任务是在 jar 中捆绑 jre（不与 jar 一起使用（即我们可以将 jre 和 jar 放在同一个文件夹中以运行以下 url mindfiresolutions.com 中给出的 jar） /…))因为我必须只将 jar 文件提供给客户端，这样他们也可以在非 Java 系统中使用这个 Myapp.jar。但是，我不知道如何将 jre 捆绑到 jar 中。我不t 如何在 jar 中运行 jre？

嗯...

> 可能吗？

不可以。您*不能*以任何方式将 JRE 嵌入到 JAR 文件中，以允许它（JAR 文件）在*不*首先安装 Java 的情况下运行您的 Java 代码。（并且安装 Java 会破坏嵌入 JRE 的目的……当然。）

但是您*可以*做的是创建一个嵌入了 JRE 和 JAR 的 EXE 文件。并且有一些工具可以做到这一点。这是关于如何做到这一点的规范问题：

*   [如何将我的 Java 程序转换为 .exe 文件？](https://stackoverflow.com/questions/147181/how-can-i-convert-my-java-program-to-an-exe-file)

* * *

我认为您需要阅读有关 JAR 文件到底是什么以及 Java 程序通常如何执行的 Oracle 文档。这将帮助您了解什么是可行的……什么是荒谬的。

# filepicker.io - Filepicker.io - 两次选择和存储上传文件

> ID：15358580
> 
> 赞同：0
> 
> 时间：2013-03-12T10:21:45.090
> 
> 标签：filepicker.io

目前在我的项目中实现 Filepicker。

将`pickAndStore`函数与 javascript lib 一起使用时，该文件在我的控制台中出现两次，但在 S3 中仅出现一次。

任何的想法？

这是我的代码：

```
filepicker.setKey('XXX');

filepicker.pickAndStore({
  multiple: true,
  services: ['DROPBOX', 'FACEBOOK', 'INSTAGRAM', 'FLICKR', 'GOOGLE_DRIVE', 'BOX', 'PICASA']
}, {}, function(fpfiles) {
  var i, photos;
  photos = new Array();
  i = 0;
  while (i < fpfiles.length) {
    photos[i] = new Object();
    photos[i].url = fpfiles[i].url;
    i++;
  }
  return $.ajax({
    url: "/some/url",
    type: "POST",
    contentType: "application/json",
    data: JSON.stringify({
      photos: photos
    })
  }).always(function() {
    return location.reload();
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:11:37.603

这已解决，不再是这种情况。只会创建一个文件链接并显示在您的开发者控制台中。感谢您的建议！

# php - 如何在php中动态取消设置类成员变量的数组值

> ID：15358589
> 
> 赞同：2
> 
> 时间：2013-03-12T10:22:02.510
> 
> 标签：php

我想取消设置类的成员数组变量的第一个值，但我无法：

```
<?php

class A
{
    public  function fun()
    {       
        $this->arr[0] = "hello";
    }

    public $arr;
}

$a = new A();
$a->fun();
$var ="arr";

unset($a->$var[0]);  //does not unset "hello" value

print_r($a); 
```

在谷歌搜索后我找不到任何解决方案。如何动态删除第一个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:24:25.037

尝试以下操作：

```
unset($a->{$var}[0]); 
```

您的代码的问题是，PHP 尝试访问成员变量`$var[0]`（即`null`）而不是`$var`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:25:38.033

您可以尝试[`array_shift`](http://php.net/array_shift)：

```
array_shift($a->{$var}); 
```

此函数使用对值的引用并从数组的开头删除（并返回）值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:27:45.820

```
<?php

  class A
 {
   public  function fun()
   {       
      $this->arr[0] = "hello";
   }

   public $arr;
}

 $a = new A();
 $a->fun();

 // no need to take $var here 
 // you can directly access $arr property wihth object of class

 /*$var ="arr";*/

 // check the difference here  
 unset($a->arr[0]);  //unset "hello" value

 print_r($a);

?> 
```

试试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:54:31.550

由于 $arr 是 A 类的成员并声明为 public，因此您可以直接使用

```
$a = new A();
$a->fun();
unset $a->arr[0]; 
```

但是你会惊讶，对于数字索引数组，unset 可能会带来问题。

假设你的数组是这样的；

```
$arr = ["zero","one","two","three","four"];
unset($arr[2]);       // now you removed "two"
echo $arr[3];         // echoes three 
```

现在数组是 ["zero","one", undefined ,"three","four"];

$arr[2] 不存在，未定义，其余部分未重新索引...

对于数字索引数组，使用以下方法更好：

```
$arr = ["zero","one","two","three","four"];
array_splice($arr,2,1);  // now you removed "two" and reindexed the array 
echo $arr[3];            // echoes four... 
```

现在数组是 ["zero","one","three","four"];

# zurb-foundation - Foundation 4 下拉菜单不会为选择元素初始化。任何建议为什么？

> ID：15358590
> 
> 赞同：2
> 
> 时间：2013-03-12T10:22:16.010
> 
> 标签：zurb-foundation

选择元素保持原样。在 IE9、Chrome 25 中测试。

脚本，添加到页面：

1.  jquery.js（来自基础包）
2.  基础.js
3.  基础.dropdown.js
4.  `<script type="text/javascript">$(document).foundation();</script>`

我不明白这个框架想要什么开始工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:43:13.020

好的，解决了。我应该在包含选择的表单中添加fundation.forms.js 和“自定义”类。

# javascript - 为Javascript管理内存中变量的最佳方法是什么

> ID：15358591
> 
> 赞同：2
> 
> 时间：2013-03-12T10:22:16.897
> 
> 标签：javascript, memory-management, memory-leaks

我正在通过 Javascript 构建一个很大程度上基于浏览器的 Web 应用程序。

当我需要一个位于单独文件中的模块时，我不知道这三种方法中哪一种对于 javascript 引擎占用的内存是最好的：

**思路一**，*在extend方法中赋值变量*

```
function (ContactCollection , ItemCollection, ContactListView) {
    var ContactExample = function (inst) {
         // Wild examples of possible uses :

         this.collections.contact.each(function(model) {
             // do something with each model
         });

         this.collections.item.on('reset', this.resetItems, this);

         this.$el.remove().append(this.view.render().el);
    };

    jQuery.extend(true, ContactExample.prototype, {
        'collections': {
            'contact': ContactCollection,
            'item': ItemCollection
        },
        'view': ContactListView,
        '$el': jQuery('#somediv'),
    }, ContactExample);

    return new ContactExample();
}; 
```

**思路2**，*在实例化方法中赋值变量*：

```
function (ContactCollection , ItemCollection, ContactListView) {
    var ContactExample = function (inst) {
         // Wild examples of possible uses :

         inst.collections.contact.each(function(model) {
             // do something with each model
         });

         inst.collections.item.on('reset', this.resetItems, this);

         inst.$el.remove().append(this.view.render().el);
    }

    jQuery.extend(true, ContactExample.prototype, {
        '$el': jQuery('#somediv')
    }, ContactExample);

    return new ContactExample({
        'collections': {
            'contact': ContactCollection,
            'item': ItemCollection
        },
        'view': ContactListView
    });
}; 
```

**想法3**，*只需在代码中使用它们，因为它们已经在函数范围内被引用*：

```
function (ContactCollection , ItemCollection, ContactListView) {
    var ContactExample = function (inst) {
         // Wild examples of possible uses :

         ContactCollection.each(function(model) {
             // do something with each model
         });

         ItemCollection.on('reset', this.resetItems, this);

         this.$el.remove().append(ContactListView.render().el);
        }
    });

    jQuery.extend(true, ContactExample.prototype, {
        '$el': jQuery('#somediv')
    }, ContactExample);

    return new ContactExample();
}); 
```

什么（以及为什么）是在 javascript 内存引擎中处理变量的最佳方式。

谢谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:35:54.680

您的三个选项的最低内存使用将是使用上下文变量（想法＃3），因为它消除了重复。另外两个将值复制到在该函数内部创建的第二个对象。这是背景：

JavaScript 中的一切都是一个对象，而对象在内部只是将字符串键与对其实际值的引用相关联的哈希图。这包括普通的局部变量；在内部，它们是不可见上下文对象的属性，该函数和其中定义的任何函数都可以访问该对象。使用 $.extend 与直接分配属性没有区别，因为 extend 函数只是围绕 for 循环的语法糖，它将属性从一个对象复制到另一个对象。

由于保留了函数的上下文（局部变量）对象以供其中定义的所有函数使用，因此您的选项的最低内存使用量将是不会将其复制到新的内部对象的选项。但差异会很小。

如果您真的想将内存使用量降至最低水平并编写更易于维护的代码，我建议您摆脱花哨（且难以调试）的上下文包装，并使用老式的 JavaScript OOP 方式对其进行编码: 使用定义在顶层或单个包装函数内的普通构造函数，该函数仅在页面首次加载时运行一次。这摆脱了重复的上下文。使用“new”关键字调用它，并将数据作为分配给“this”的参数传入。在构造函数内部进行初始化，仅此而已。

将所有方法函数放在它的原型上，然后将其用作普通、普通、简洁的 JavaScript 对象。

[https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:26:37.677

你为什么要使用 $.extend 呢？只需创建一个实例并分配属性：

```
var c = new ContactExample();
c.$el = $('#somediv'); 
```

内存不会成为问题 - 而是专注于对 DOM 元素 (#somediv) 的引用，这可能会在以后引起麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:04:32.500

*   常数

    *   如果您在函数范围之外不需要它们，请使用*普通*变量。

    *   如果您在函数范围之外需要它们，则将它们放在构造函数中。

*   实例变量（随每个实例而变化）

    *   对于您知道每个实例将具有不同值的属性，请在构造函数中使用正确的类型声明它们，以便可以将它们优化为与构造函数关联的静态类型。

    *   对于在所有对象之间共享的属性（如方法），请使用原型。

    *   对于更有可能保持默认值的属性，如果你想要访问速度，你应该在构造函数中声明它们，但是如果你想使用更少的内存，你应该把默认值放在构造函数上并且只添加一个属性如果它与默认值不同，则传递给该对象。

# c++ - 动态创建的组合框中的 CBN_SELCHANGE

> ID：15358593
> 
> 赞同：1
> 
> 时间：2013-03-12T10:22:21.547
> 
> 标签：c++, visual-studio-2008, visual-c++, mfc

如何在动态创建的 CComboBoxes 中获取 CBN_SELCHANGE？？.. 我使用了一个 CComboBoxes 数组。

```
MyCComboBox * p_ComboBoxes = new MyCComboBox[numberOcComboBoxes]; //numberOcComboBoxes determined at rumtime 
```

在 MyCComboBox 的消息地图中

```
BEGIN_MESSAGE_MAP(MyCComboBox , CComboBox)
    ON_CONTROL_REFLECT(CBN_SELCHANGE, &CTestDlg::OnCbnSelchange)
END_MESSAGE_MAP()

void CTestDlg::OnCbnSelchange()
{
this->GetDlgCtrlID(); // Get The ComboBox ID;
CString sText;
p_ComboBoxes[0].GetLBText(p_ComboBoxes[0].GetCurSel() , sText); // I can't access like this 

} 
```

// p_ComboBoxes 数组的初始化..

```
for (int i = 0 ;i < iNumber ; i++)
{

p_ComboBoxes[i].Create(WS_CHILD|WS_VISIBLE|WS_VSCROLL|CBS_DROPDOWN,
        CRect(10 + MY_PIC_ADDITIONAL_WIDTH,iItemDrawHeight,10 + MY_PIC_ADDITIONAL_WIDTH +MY_PIC_PROPERTY_WIDTH
        ,iItemDrawHeight +MY_PIC_HEIGHT), this, pImageControlPropertyID[i]);

iItemDrawHeight += MY_PIC_PROPERTY_ADDITIONAL_HEIGHT;

} 
```

我无法访问它给我“访问冲突读取位置 0x00000020”错误的选定文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T03:46:02.097

如前所述，ON_CONTROL_REFLECT 用于*在控件类*中处理消息，而不是在父对话框类中。您应该在 MyCComboBox 类中实现 OnCbnSelchange() 处理程序，并在 MyCComboBox 消息映射中添加 ON_CONTROL_REFLECT 条目。

如果您真的想在父对话框中处理消息，您应该使用 ON_CONTROL 宏 - 每个子组合一个条目，每个条目都有一个单独的处理程序，这样您就可以知道是哪一个发送了消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-12T09:06:42.313

您也可以`OnCommand(WPARAM wParam, LPARAM lParam)` 在父对话窗口中覆盖。如果`HIWORD(wParam) == CBN_SELCHANGE`，则与 `LOWORD(wParam)`控件的 id 进行比较。

```
BOOL CMyDlg::OnCommand(WPARAM wParam, LPARAM lParam)
{
    if(HIWORD(wParam) == CBN_SELCHANGE) { //A combo box selection changed
        int ID = LOWORD(wParam); //The ID of the corresponding ComboBox
        //Perform additional handling...
    }
    return CDialog::OnCommand(wParam, lParam);
} 
```

# grails - 使用负载均衡器时缓存插件问题

> ID：15358598
> 
> 赞同：3
> 
> 时间：2013-03-12T10:22:32.857
> 
> 标签：grails, grails-plugin

我有一个启用了 grails 缓存和压缩资源插件的 grails 应用程序。我们在负载均衡器后面进行了多次战争部署。尝试访问该应用程序时，似乎缺少一些图像。这是我们的问题。当我们尝试访问直接指向没有负载均衡器的服务器的图像时，一台服务器包含该图像而另一台不包含 . 为什么会这样？我认为在服务器启动时，所有图像都没有在工作文件夹中创建。我看到使用 grails.resources.work.dir 定义的两个服务器映像工作文件夹中的文件数不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:14:44.197

我们在使用 Grails 2.1、Tomcat 7 和 F5 负载平衡器时遇到了类似的图像问题。这是因为在多个 grails 应用程序部署之间没有正确管理会话。这导致图像的 302 次重定向（从 /images 到 /static）失败，因为它们被拆分在两个不同的服务器之间。我们能够通过在负载均衡器中启用粘性会话/会话亲和性来解决该问题，以确保一旦建立会话，所有请求都会发送到同一台服务器。不确定您是否遇到同样的问题，但可能值得一试？

# ios - self.view setNeedsDisplay 和 self.view setNeedsLayout 不起作用

> ID：15358602
> 
> 赞同：3
> 
> 时间：2013-03-12T10:22:43.637
> 
> 标签：ios, xcode

我有一个显示在屏幕上的主视图控制器和一个在后台运行的类（委托）获取位置。当我得到结果时，我调用视图控制器中的委托方法来更新屏幕上的标签。我尝试了几种方法，但仍然没有更新屏幕。

这是方法：

```
-(void) updateDisplay
{

    NSLog(@"%@",myPosition.currentArea);
    _area.text = [NSString stringWithFormat:@"area = %@",myPosition.currentShopArea];

    //[self.view performSelectorOnMainThread:@selector(setNeedsDisplay) withObject:nil waitUntilDone:YES];
    [self.view setNeedsDisplay];
    //[self.view setNeedsLayout];
} 
```

我检查了控制台，它显示了正确的区域，但屏幕上仍然显示为空。我尝试了所有三种方法（上面已注释掉），但这些方法都没有更新屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:36:26.160

你可以尝试两件事：

1.  调用`updateDisplay`主线程：

    ```
    [delegate performSelectorOnMainThread:@selector(updateDisplay) withObject:nil waitUntilDone:YES]; 
    ```

    最后，它正在访问`UIKit`，所以最好把它做好；

2.  如果这没有帮助，请尝试：

    ```
    [_area setNeedsDisplay]; 
    ```

    在这种情况下，也建议在主线程上调用该方法。

# c++ - 我到底如何使用Boost？

> ID：15358615
> 
> 赞同：1
> 
> 时间：2013-03-12T10:23:16.867
> 
> 标签：c++, boost, visual-studio-2012, libraries

我对 C++ 相当陌生，我打算为我的 Tamagochi 游戏处理线程问题，但似乎一切都表明我应该为此获得 Boost。

所以我的问题是，我到底该如何安装它？

通过执行整个“在属性中添加路径”的事情，我找到了使用它的方法。这行得通，但是我猜如果我使用这种方式，我将无法在之后编译和发布它？

我还尝试使用来自 vertexwahn.de 的 BlueGo。但我不知道它实际上做了什么。我得到了整个“它为你编译库”的东西，但是，我该如何使用它们呢？他们应该在 VS2012 中工作而无需进一步调整，还是我仍然需要添加路径的 in 属性？

我只想使用 Boost 的线程，然后构建项目并发送给朋友。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T10:27:34.007

> 我本来打算用线程搞砸的...

如果我对 MSDN 的阅读是正确的，那么 Visual Studio 2012 似乎支持[C++ 11](http://en.wikipedia.org/wiki/C++11)的新[线程功能](http://en.wikipedia.org/wiki/C++11#Threading_facilities)。考虑到这一点，您无需安装 Boost。您可以只使用标准标题。[`<thread>`](http://msdn.microsoft.com/en-gb/library/vstudio/hh920526.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:31:46.473

1.  下载提升
2.  编译 boost（进入 boost 目录，调用 bootstrap，完成后调用 b2）
3.  决定使用 boost 的哪一部分
4.  将主 boost 目录添加到您的包含路径和 lib（默认情况下它处于阶段 - 只需搜索 lib 文件）目录到您的链接器路径
5.  确保动态链接 boost 线程（如果静态链接可能会出现问题）
6.  程序

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-12T10:34:29.337

必须构建一些升压模块。

对于 Windows，您必须使用 bjam.exe 来构建您的库。bootstrap.bat 将为您构建 bjam.exe

从您解压缩的 boost 目录中：

*   引导程序.bat
*   bjam.exe 发布调试工具集=msvc address-model=32 --build-type=complete
*   bjam.exe 发布调试工具集=msvc address-model=64 --build-type=complete

并检查您的舞台/lib 是否有 *.lib、*.dll

（你可能需要在两个 bjam 命令之间清理你的 stage/lib 目录）

然后，将包含目录和库目录添加到您的 VS 项目中。

需要的库将被自动链接（例如，您不必告诉 VS 使用 boost 线程），boost 使用 pragma 来找出需要什么。但它不适用于 Linux。

如前所述，VS2012 已经处理线程，但 boost 远不止于此，我强烈建议将它用于您想要编码的任何内容。

使用来自 boost 的 asio，您甚至可以创建线程池：见[配方](http://think-async.com/Asio/Recipes)

# sql-server - 如何在 oracle appex 中将两个不同的表数据转换为一个 .csv 文件

> ID：15358617
> 
> 赞同：0
> 
> 时间：2013-03-12T10:23:22.323
> 
> 标签：sql-server, csv, oracle11g, oracle-apex, export-to-csv

我在数据库中有两个表。我想创建一个 .csv 文件来维护在这两个表上完成的所有活动。我需要帮助将这两个表数据转换为 oracle apex 中的一个 .csv 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:49:14.540

您只是想将数据导出到 CSV 吗？

*   编写一个 SQL 选择查询将两个表链接在一起。如果您需要这方面的帮助，请告诉我们
*   创建报表并在源中输入 SQL
*   转到**Report Attributes**，有一个名为**Enable CSV Output**的选项。确保将其设置为**是**
*   运行页面，报告下方应该有一个超链接或按钮，用于导出文件。

# arm - Eclipse CDT - 错误：“未定义对 n 的引用”？

> ID：15358618
> 
> 赞同：1
> 
> 时间：2013-03-12T10:23:23.190
> 
> 标签：arm, eclipse-cdt, codesourcery

我不完全确定这是属于这里还是属于electronics.stackexchange.com，但由于这与IDE 设置和编译有关，我相信这是问我问题的最佳场所。

我在 Eclipse CDT 中有一个 C 项目设置。它使用 Mentor Graphics 的 Sourcery CodeBench Lite ARM 工具链。我已经安装了 Eclipse CDT 以及 GNU ARM Eclipse 插件，并尝试设置 ST.com STM32F4 Discovery 示例以在 Eclipse CDT 中编译。

编译时，编译器输出超过 200 个错误（为简洁起见缩短）：

```
.../main.c:75: undefined reference to `STM_EVAL_PBInit'
.../main.c:77: undefined reference to `STM_EVAL_LEDInit'
.../main.c:78: undefined reference to `STM_EVAL_LEDInit'
.../main.c:79: undefined reference to `STM_EVAL_LEDInit'
.../main.c:80: undefined reference to `STM_EVAL_LEDInit'
.../main.c:83: undefined reference to `RCC_GetClocksFreq'
.../main.c:86: undefined reference to `STM_EVAL_PBGetState'
.../main.c:89: undefined reference to `STM_EVAL_LEDOn'
.../main.c:90: undefined reference to `STM_EVAL_LEDOn'
.../main.c:91: undefined reference to `STM_EVAL_LEDOn'
.../main.c:92: undefined reference to `STM_EVAL_LEDOn' 
```

几乎所有这些项目都在[stm32f4_discovery.h](https://github.com/josefvanniekerk/stm32f4-discovery/blob/master/utilities/stm32f4_discovery/stm32f4_discovery.h)中定义，但由于某种原因，它们在编译期间没有得到解决。

我检查并仔细检查了该文件是否可用 C/C++ General > Paths and Symbols, Includes 选项卡，但不确定为什么事情没有解决。

![在此处输入图像描述](../Images/88f71c32b263d00ba66627e77d816de1.png)

该项目可在[GitHub](https://github.com/josefvanniekerk/stm32f4-discovery)上找到，任何想要自己检查和尝试编译的人都可以使用。

我还在[Github 上创建了一张票](https://github.com/josefvanniekerk/stm32f4-discovery/issues/1)，因为我不想在这里充斥着输出信息。

只需克隆[https://github.com/josefvanniekerk/stm32f4-discovery.git](https://github.com/josefvanniekerk/stm32f4-discovery.git)，将[stm32f4-discovery/projects/demonstration](https://github.com/josefvanniekerk/stm32f4-discovery/tree/master/projects/demonstration)导入 Eclipse CDT，然后尝试编译。

Sourcery CodeBench Lite 工具链是在 Mac OS X 上从[arm-cs-tools-build.sh](http://gnuarmeclipse.svn.sourceforge.net/viewvc/gnuarmeclipse/trunk/scripts/arm-cs-tools-build.sh?content-type=text%2Fplain)编译的，并且需要[Eclipse GNU ARM 插件](http://gnuarmeclipse.livius.net/blog/)，并且可以使用他们的[更新站点安装到 Eclipse 中](http://gnuarmeclipse.sourceforge.net/updates)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T20:46:25.107

原来我只需要在下面添加外部源

> C/C++ 常规 > 路径和符号 > 源位置

仍然有一些错误，但不再与这个问题有关。:)

# javascript - 顶部导航而不是标题

> ID：15358619
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:23:23.887
> 
> 标签：javascript, html, css

我的 HTML 文件中的导航应该在顶部看到。所以理论上你可以向上滚动查看标题。你懂我的意思吗？我将用 2 张图片展示它。
PS：我不想使用标签，因为我已经需要它来做其他事情了。
**编辑**：当你调用页面时，它应该看起来像图片#1。
正常状态： ![没有标题](../Images/94d705c83b5e413169c9315d8849e867.png)
如果现在向上滚动，应该会出现标题。 ![带标题](../Images/b6273dd6adb5f9902b3b078db26bae7b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:28:59.043

我认为，您正在搜索`.scrollTop()`jQuery 或类似的东西。也许这有帮助：[http ://www.backslash.gr/demos/jquery-sticky-navigation/](http://www.backslash.gr/demos/jquery-sticky-navigation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:37:09.803

如果我正确理解了你的“问题”，你可以试试这个：

```
 <script>
          document.getElementById('navigation').scrollIntoView(true);
      </script>
   </body>
</html> 
```

# asp.net - Crystal Report for VS2010 对齐问题

> ID：15358624
> 
> 赞同：1
> 
> 时间：2013-03-12T10:23:33.287
> 
> 标签：asp.net, visual-studio-2010, crystal-reports, crystal-reports-2010

我有这个使用 VS2010 的水晶报表的 Web 应用程序。我安装了水晶报告服务包 2。我不明白的是，在开发机器上一切正常，但是，一旦我将报告发布到生产服务器，所有包含多个单词的文本框都会错位。我的意思是，下一个词向下滚动。如果它是标题行，这看起来真的很糟糕，因为标题开始与详细信息行重叠。

我知道它与水晶报告版本有关，正如其他讨论中所建议的那样。但是我已经检查了这个位置 C:\Program Files (x86)\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Common\SAP BusinessObjects Enterprise XI 4.0\win32_x86 上的 crpe32.dll 版本，它在开发中是 13.0.0.99机器和生产机器。所以从技术上讲，版本是 13.0.0.99

这是包含水晶报表查看器的 ASP.NET 页面的页面指令。大概我指的版本是13.0.2。我不知道这是否是正确的做法。

```
<%@ Register Assembly="CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"
    Namespace="CrystalDecisions.Web" TagPrefix="CR" %> 
```

但我没有正确对齐标题​​。有人可以帮忙吗？我应该是这样的 ![正确报告](../Images/99f37faefec3bdf9f9dc855a75347d71.png)

虽然它显示这样 ![不正确的报告](../Images/969211a9e377d43121829699ae66fc92.png)

# c# - 在 C# 中将字符串格式化为 HTML

> ID：15358627
> 
> 赞同：0
> 
> 时间：2013-03-12T10:23:46.470
> 
> 标签：c#, php, html, string, formatting

因此，我正在使用 Unity 编写游戏，并向玩家发送一封电子邮件，其中包含有关他们游戏方式的所有统计数据。我发送电子邮件的方式是格式化一个字符串，该字符串已经编写了替换说明符的 html，`$_table`以插入我需要发送到我的服务器上的 php 脚本的数据，该脚本通过电子邮件发送给用户。所有这些都有效。

我在发送图像链接时遇到问题。由于我正在这样做，因此`C# program`我很难使用`<img src ="example.com/example.png"/>`标签。

当它发送它发送它`<img src=\"example.com/example.png\"/>`的格式为并且不显示图像。

**如何在 C# 中正确发送此字符串？**

我已经尝试过`"`并使用`@""""`来格式化字符串。

任何和所有的帮助表示赞赏。

::Edit:: 更新代码。

所以在我的 C# 代码中，我从一个 txt 文件中读取我的基本 html。问题是当我用其中有 img 标签的表替换时。

我有一个发送表单的电子邮件功能 SendEmail。在表单中，它有一个消息参数，它只是一个字符串。此表单被发送到一个 php 脚本，该脚本从表单发送到电子邮件。

//统一代码

```
public static void SendEmail(string _email, string subject, string message)
{

    if(CheckEmail(_email))//Checks if valid email form
    {
        WWWForm form = new WWWForm();
        form.AddField("from", "example@example.com");
        form.AddField("email", _email);
        form.AddField("subject", subject);
        form.AddField("message", message);

        WWW web = new WWW("http://www.example.com/_email.php", form); //Unity class for various web functions 

    }

    else
    {
        label.text = "Invalid Email";
    }
} 
```

我发送的消息是一个带有 img 链接的表格，这些链接由字符串变量引用以提高可读性。

```
public static string GetFormatedMetricTable(){
int time = 0;
string clockIcon = "<img src = &quot;http://files.softicons.com/download/web-icons/web- grey-buttons-by-axialis-team/png/48x48/Clock.png&quot;/>";

return "<table><tr><td>" + time + clockIcon + "</td></tr></table>";
} 
```

上面的代码在这个例子中被减少了，但只是内容方面的。

在我的 php 代码中，我使用一个简单的邮件功能从我的 smtp 服务器发送电子邮件。

**问题在于双引号的字符串格式。**

从电子邮件中的 html 代码中查看时，我收到 /" 导致图像不显示。

期望的结果[http://subligaming.com/example.html](http://subligaming.com/example.html)

注意：使用 Mono .Net

这是我的php代码以防万一。

```
<?php
$from = $_REQUEST['from'];
$name = $_REQUEST['name'];
$email = $_REQUEST['email'] ;
$subject = $_REQUEST['subject'] ;
$message = $_REQUEST['message'] ;

// $newMessage = str_replace("&quot;", '$_"', $message);
// $newerMessage = str_replace("$_", "", $newMessage);

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= "From: Subliminal Gaming <$from>\r\n";
mail($email, "$subject",
$message, $headers );
echo "Thank you for using our mail form";
?> 
```

我目前正在阅读字符串文字在 php 中的工作方式，这可能是问题所在，但我不知道如何解决它。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:22:08.093

尝试在 html 标签中使用简单的引号

```
<img src ='example.com/example.png'/> 
```

# c# - 为什么 C++ CLI 索引属性在 C# 中不起作用？

> ID：15358631
> 
> 赞同：4
> 
> 时间：2013-03-12T10:23:57.627
> 
> 标签：c#, c++, .net, visual-c++, c++-cli

有两个项目，一个 C++ CLI 和另一个 C# 项目。
C# 项目中引用了 C++ CLI 程序集。

一切都很好，除了不起作用的索引属性。
C++ CLI 代码：

```
property Nullable< int> PVarInt[System::String^] {
    Nullable<int> get(System::String^ inx){
    }
    void set(System::String^ inx, Nullable< int>  newx){
    }
} 
```

C# 中的代码显示为两个 set 和 get 方法，如下所示：

```
get_PVarInt(..)
set_PVarInt(..) 
```

这是一个错误吗？有解决办法吗？为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:29:58.710

C# 不支持除属性之外的索引属性`this`。

但是 .NET 框架确实如此，因此当以支持该语言的语言创建索引属性时，它将在 C# 中显示为一`get_Method`和一。`set_Method`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T14:40:44.760

C++/CLI 具有可从 C# 获得的索引属性： 示例：

```
public ref class ClassWithIndexer
{
private:
    array<int> ^x;
public:
    property int default[int]
    {
        int get(int index)
        {
            return x[index];
        }
        void set(int index, int value)
        {
            x[index] = value;
        }
    }
}; 
```

# jsf - Primefaces 和 Liferay，为整个门户设置主题

> ID：15358632
> 
> 赞同：0
> 
> 时间：2013-03-12T10:24:00.407
> 
> 标签：jsf, primefaces, liferay-6, themeroller

我正在 Liferay 上开发 primefaces portlet。

为portlet 设置主题似乎很容易。：您在 WebInf/lib 中包含 yourTheme.jar，并定义：

```
<context-param>  
   <param-name>primefaces.THEME</param-name>  
   <param-value>yourTheme</param-value>  
</context-param> 
```

在你的 web.xml

但我更愿意在一个中心点为所有 PrimeFaces portlet 设置该主题（如自定义门户主题或某些门户属性）。这样它会影响整个门户，而不是每个单独的 portlet。最好的方法应该是什么？

谢谢！

我正在使用：Liferay 6.1.0 ce ga1。Primefaces 3.5 Jsf 2.1.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:16:58.627

您应该[开发 Liferay 主题](http://content.liferay.com/document/Liferay%20Themes.pdf)并将它们部署为应用服务器中的 war 文件。

[创建页面](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/managing-pages-in-liferay-portal)并将您的 Prime 面孔 portlet 与每个页面相关联。

然后将主题应用到您的页面。

通过将主题应用到您的页面，您可以实现将主题应用到您的 Prime 面孔 portlet。

# css - 将 div 定位到包含 div 的底部

> ID：15358646
> 
> 赞同：124
> 
> 时间：2013-03-12T10:24:36.440
> 
> 标签：css, position

如何将 div 定位到包含 div 的底部？

```
<style>
.outside {
    width: 200px;
    height: 200px;
    background-color: #EEE; /*to make it visible*/
}
.inside {
    position: absolute;
    bottom: 2px;
}
</style>
<div class="outside">
    <div class="inside">inside</div>
</div> 
```

此代码将文本“内部”放在页面底部。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-03-12T10:26:06.190

```
.outside {
    width: 200px;
    height: 200px;
    background-color: #EEE; /*to make it visible*/
} 
```

需要是

```
.outside {
    position: relative;
    width: 200px;
    height: 200px;
    background-color: #EEE; /*to make it visible*/
} 
```

绝对定位在 DOM 中查找最近的相对定位的父级，如果未定义，它将使用主体。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-03-12T10:26:10.387

分配`position:relative`给`.outside`，然后分配`position:absolute; bottom:0;`给您的`.inside`.

像这样：

```
.outside {
    position:relative;
}
.inside {
    position: absolute;
    bottom: 0;
} 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-12T10:30:39.097

添加`position: relative`到`.outside`. ( [https://developer.mozilla.org/en-US/docs/CSS/position](https://developer.mozilla.org/en-US/docs/CSS/position) )

> 相对定位的元素仍被认为在文档中的正常元素流中。相反，绝对定位的元素会从流中取出，因此在放置其他元素时不会占用空间。绝对定位的元素是相对于最近定位的祖先定位的。如果定位的祖先不存在，则使用初始容器。

“初始容器”将是`<body>`，但添加上述内容会`.outside`定位。

# mysql - Public Database

> ID：15358648
> 
> 赞同：0
> 
> 时间：2013-03-12T10:24:39.073
> 
> 标签：mysql, sql, sql-server, database

What are the proper steps to hosting a public database. Currently I a building a mobile application with Adobe Flash Builder. I have used Microsoft SQL Server, My SQL as well as WAMP Server. All of these I have been told are private databases and thus will only allow my application to how the information as long as they are on the same internet connection. I have also been told that port forwarding my database isn't safe either.

In this case what is the best approach to making my database public or what other source should I use to make my application accessible to world wide users.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:28:12.290

我认为您混淆了公共数据库和可公开访问的数据库。

公共数据库将允许任何人添加/编辑/更新数据库中的任何记录，并可能更改数据库结构 - 非常危险。

可公开访问的数据库将允许您的应用程序的用户通过您配置的 Web 界面执行某些操作。

要接近后者，您需要创建一个 Web 应用程序，客户端将使用它来发送/接收更新。然后应用程序将访问和更新数据库，并代表用户执行操作。您需要一个这样的中间层来确保用户被限制在正确的操作中，并确保他们以安全的方式执行这些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:58:49.747

我想说第一步是做一个小测试。您最好在同一台服务器上设置一个连接到数据库并用作插入和检索数据的接口的 PHP 页面。这实际上很容易做到：

1.  在 MySQL 中创建一个数据库和表并填充一些数据。
2.  在 Web 服务器上创建一个 php 文件，例如`wwwroot\databasetest.php`
3.  在文本编辑器中打开并粘贴：

    ```
    mysql_connect('localhost', 'root', 'password');
    mysql_select_db('databasename');
    $query = "SELECT * FROM tablename;"
    $result = mysql_query($query);
    echo var_dump(mysql_fetch_array($result)); 
    ```

4.  从您的网络浏览器调用上述内容`http://localhost/databasetest.php`

它应该将表的内容输出为 PHP 数组。

# regex - .gitignore 文件不在集合中

> ID：15358650
> 
> 赞同：4
> 
> 时间：2013-03-12T10:24:43.807
> 
> 标签：regex, git, set

有没有办法通过在 .gitignore 中指定一组可接受的文件类型来限制 git 跟踪的文件类型？

我希望能够限制提交到我的编译目录的文件类型。我知道解析器不是正则表达式，但我想要这样的东西。

```
!src/(*.js|*.html|*.css) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T10:27:09.180

你可以做

```
src/*
!src/*.js
!src/*.css
!src/*.html 
```

# java - Why does this table sort all entries as strings?

> ID：15358652
> 
> 赞同：0
> 
> 时间：2013-03-12T10:24:49.403
> 
> 标签：java, swing, sorting, jtable

I have the problem that the JTable that I fill myself with data and want to autosort it using the interface. However it gets sorted as Strings, so 10 comes after 2\. How can i fix that?

```
public class GUI extends Frame implements ActionListener, WindowListener {
    private static final long serialVersionUID = -693036000167528691L;
    private Button run,findAll,sortByNumberOfStretchesFound, sortByLongestStretch;
    private TextField selectionSizeStart, numberOfThreads, selectionSizeEnd, minimumStretchSize, sequence;
    private JTable table;
    private String[] columnNames = new String[]{"#","Label","Label-Length","#Stretches Found","Unique","Longest Stretch"};
    private int sortBy = 3;
    private Object[][] data;

    public GUI(String defaultSequence, int defaultSelectionMinimumSize, int defaultNumberOfThreads) {
        table = new JTable(new DefaultTableModel(columnNames,0));

        table.setAutoCreateRowSorter(true);
        table.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
        JScrollPane scrollbar = new JScrollPane(table);

        setLayout(new FlowLayout());

        setVisible(true);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:36:32.137

来自 javadocs 的[`JTable`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTable.html#setAutoCreateRowSorter%28boolean%29); `setAutoCreateRowSorter`创建实例及其 javadoc 排序的[`TableRowSorter`](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/TableRowSorter.html)工作方式如下

1.  如果方法`Comparator`已为列指定了a `setComparator`，则使用它。
2.  如果返回的列类`getColumnClass`是`String`，则使用`Comparator`返回的`Collator.getInstance()`。
3.  如果列类实现`Comparable`，请使用`Comparator`调用该`compareTo`方法的 。
4.  如果`TableStringConverter`已指定 a，则使用它将值转换为`String`s，然后使用`Comparator`返回的 by `Collator.getInstance()`。
5.  否则，在调用对象的结果上使用`Comparator`返回的 by 。`Collator.getInstance()``toString`

因此，如果您想更改默认值（在本例中为 5），您需要

1.  设置一个`Comparator`，
2.  `Comparable<SomeCommonInterface>`在您的数据对象中实施或
3.  设置一个`TableStringConverter`来实现自定义`toString`功能

或者，您可以跳过所有这些并[`RowSorter`](http://docs.oracle.com/javase/6/docs/api/javax/swing/RowSorter.html)使用您自己的自定义排序逻辑实现自定义。

**编辑**

从 OP 的评论中可以看出`Integer`和的混合数组`String`。

没有明显的方法可以将 a`Integer`与 a进行比较，`String`因此您需要确定一个规则，我将假设该规则是“字符串前的数字”。

现在，要么将所有数据包装在实现`Comparable`on的类中`Object`并在那里完成工作，要么实现 a `Comparator<Object>`，将其设置在表上。在比较方法中，您需要使用`instaceof`来计算出您要比较的内容并比较它们。该方法需要看起来像：

```
class MyClass implements Comparator<Object> {

    public int compare(Object o1, Object o2) {
        if (o1 == null && o2 == null) {
            return 0;
        }
        if (o1 == null) {
            return 1;
        }
        if (o2 == null) {
            return -1;
        }
        if (o1 instanceof Integer && o2 instanceof String) {
            return 1;
        }
        if (o1 instanceof String && o2 instanceof Integer) {
            return -1;
        }
        if (o1 instanceof Integer && o2 instanceof Integer) {
            return ((Integer) o1).compareTo((Integer) o2);
        }
        return o1.toString().compareTo(o2.toString());
    }
} 
```

# iphone - shouldStartLoadWithRequest appending link with applewebdata

> ID：15358656
> 
> 赞同：4
> 
> 时间：2013-03-12T10:24:58.623
> 
> 标签：iphone, ios, objective-c, uiwebview

I am receiving a description text in HTML format, and I am loading it in a webview, if a link clicked in the description so I load it in separate view controller. But shouldStartLoadWithRequest giving a some appended link. here is my code

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
if(navigationType == UIWebViewNavigationTypeLinkClicked) {

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    WebsiteViewController *vc = [storyboard instantiateViewControllerWithIdentifier:@"WebsiteViewController"];
    vc.url = request.URL.absoluteString;
    NSLog(@"link is : %@", [[request URL] absoluteString]);
    [self.navigationController pushViewController:vc animated:YES];
    return false;
}
return true;
} 
```

it prints this

```
link is : applewebdata://038EEEBF-A4C9-4C7D-8FB5-32056714B855/www.yahoo.com 
```

and I am loading it like this

```
[webViewDescription loadHTMLString:description baseURL:nil]; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-12T10:37:03.763

当您使用`loadHTMLString`并且设置`baseURL`为 nil 时，因此iOS 使用**applewebdata** URI 方案，而不是用于访问设备内部资源的 URI 中的“http”。你可以尝试设置`baseURL`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-12T22:41:28.287

我有一个类似的问题。在实践中，将`baseURL`'http://' 或类似的设置也对我不起作用。我也只看到了`applewebdata`大约 50% 的时间方案，另外 50% 的时间我看到了我期望的正确方案。

为了解决这个问题，我最终拦截了`-webView:shouldStartLoadWithRequest:navigationType:`回调并使用正则表达式去除了 Apple 的`applewebdata`方案。这就是它最终的样子

```
// Scheme used to intercept UIWebView callbacks
static NSString *bridgeScheme = @"myCoolScheme";

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    BOOL shouldStartLoad = YES;

    NSURL *requestURL = request.URL;

    // Strip out applewebdata://<UUID> prefix applied when HTML is loaded locally
    if ([requestURL.scheme isEqualToString:@"applewebdata"]) {
        NSString *requestURLString = requestURL.absoluteString;
        NSString *trimmedRequestURLString = [requestURLString stringByReplacingOccurrencesOfString:@"^(?:applewebdata://[0-9A-Z-]*/?)" withString:@"" options:NSRegularExpressionSearch range:NSMakeRange(0, requestURLString.length)];
        if (trimmedRequestURLString.length > 0) {
            requestURL = [NSURL URLWithString:trimmedRequestURLString];
        }
    }

    if ([requestURL.scheme isEqualToString:bridgeScheme]) {
        // Do your thing
        shouldStartLoad = NO;
    }

    return shouldStartLoad;
} 
```

# python - Django : Using Mongodb with django

> ID：15358663
> 
> 赞同：5
> 
> 时间：2013-03-12T10:25:27.267
> 
> 标签：python, django, mongodb

I just start looking at mongo db for the Django backend.

I have few questions .

1.Can i use raw mongo db instead os using Django ORM for the queryset .

2.My application is realted to Electronic health record so somone can add many details somone will not add anything (Basicaaly it should not database field dependent .)Please help me in this case how should I Design my Model . Or Instead of using Model can I directly fetch and data using raw mongo db queries from the Django view ?

I go through some blog post and found it is working somewhat ok .
But . Can I insert some field in the database which is not defined in the Django Model .

Really confuse .

Any help and suggestionn would be appriciated .

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:58:45.600

当您想将 MongoDB 用于 Django 时，您可以采用各种框架。列出了一些您可能会考虑的框架。

*   [蒙哥引擎](http://mongoengine.org/)
*   [django-mongodb-engine](http://www.django-mongodb.org)
*   [明](http://merciless.sourceforge.net/)
*   [MongoKit](http://namlook.github.com/mongokit/index.html)

您可以直接访问 MangoDB，而无需通过 Django ORM，但最好使用适当的接口。PyMango 和 Ming 等包装器使您能够利用动态行为并提供 API 来保证集合中的数据类型。

选择一个框架将帮助您自信地发展。

[PyMango](http://api.mongodb.org/python/1.6/index.html)是一个轻量级的包装器，可以为您提供更快的执行速度。但是，如果您正在寻找 ORM，那么[MongoEngine](http://mongoengine.org/)或 MongoKit 或 Ming。

# ruby - File.dirname 的令人困惑的行为

> ID：15358669
> 
> 赞同：6
> 
> 时间：2013-03-12T10:25:41.497
> 
> 标签：ruby

我使用 Ruby 1.9.3 编写了几个用于系统管理的小型 Rub​​y 脚本。在一个脚本中，我使用：

```
File.dirname(__FILE__) 
```

获取脚本文件的目录。这会返回一个相对路径，但是当我从第二个脚本调用脚本时会`File.dirname`返回一个绝对路径。

[Ruby Doc](http://ruby-doc.org/core-2.0/File.html#method-c-dirname)在其示例中列出了绝对返回路径，而我在[Ruby 论坛](http://www.ruby-forum.com/topic/143383)上找到了一个讨论，用户说`dirname`应该只返回相对路径。

我正在使用 Ruby 论坛建议的解决方案`File.expand_path`来始终获取绝对路径，如下所示：

```
File.expand_path(File.dirname(__FILE__)) 
```

但是有没有办法使行为`dirname`一致？

* * *

更新：

为了扩展 Janathan Cairs 的回答，我制作了两个脚本：

s1.rb：

```
puts "External script __FILE__: #{File.dirname(__FILE__)}" 
```

s0.rb：

```
puts "Local script __FILE__: #{File.dirname(__FILE__)}"
require './s1.rb' 
```

运行 ./s0.rb 会给出以下输出：

```
Local script __FILE__: .
External script __FILE__: /home/kenneth/Pictures/wp/rip_vault 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T10:31:48.700

`File.dirname`如果给定绝对路径，则应返回绝对路径，如果给定相对路径，则应返回相对路径：

```
File.dirname('/home/jon/test.rb') # => '/home/jon'
File.dirname('test.rb') # => '.' 
```

`__FILE__`返回当前脚本的名称，因此它是当前目录的相对路径。`expand_path`这意味着，如果您想获得绝对路径，则应始终使用`File.dirname(__FILE__)`.

**NB** Ruby 2.0.0[引入了`__dir__`常量](http://www.ruby-lang.org/en/news/2013/02/24/ruby-2-0-0-p0-is-released/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T10:33:35.887

如果你已经升级到[Ruby 2.0](http://www.ruby-lang.org/en/news/2013/02/24/ruby-2-0-0-p0-is-released/)，你可以使用新的常量

```
__dir__ 
```

否则你可以使用

```
File.expand_path('..', __FILE__) 
```

比

```
File.expand_path(File.dirname(__FILE__)) 
```

[File.expand_path 文档](http://ruby-doc.org/core-2.0/File.html#method-c-expand_path)

# html - HTML5 offline enabled web app

> ID：15358672
> 
> 赞同：0
> 
> 时间：2013-03-12T10:25:52.967
> 
> 标签：html, web-applications, offline

I'm trying to build a html5 web app to be used in offline mode on iOS devices. I've created the cache.manifest file and put my html, css & img files.

I have two main issues with my offline web app:

1) Offline Mode Problem. Procedure:

```
a) open the webpage in Mobile Safari
b) bookmark it to the Home Screen.
c) I close the safari 
d) put the app on airplane mode.
e) open the app from home screen app icon 
```

I get the error "Turn on cellular data or use Wi-Fi to access data", but if I open the same location from Safari it works fine.

The only way I can solve this is before I put the device on airplane mode, I have to open the app from homescreen and close it and put the device on airplane and when I open the app afterwards it works fine.

Is there anything wrong in my way of making the app or is this the way Apple has implemented the "add to home screen" feature, so whenever a user add a offline enabled webapp the user should at least open it once before its working as an offline version?

I thought this was the entire purpose of an offline app!

2) Multiple pages

I have created two sample pages(index.html & subpage.html) for the web app offline purpose. When I click the app icon from the home screen the web app is opening fine in the full screen mode, but when I click the link to the subpage.html from index.html it opens it on safari browser thereby goes out of the fullscreen app mode.

I have tested the above mentioned problems in the following devices and same errors/userexperience I get.

```
iPhone 4S - iOS v6.1
iPad Retina - iOS v6.1

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T01:30:39.120

我不是专家，但据我所知，该页面必须在连接到互联网时至少加载一次。Html5离线效果很好，但是它只能在之前加载过之后才能离线加载页面。iPhone 在没有下载 .manifest 文件和 .html、.js、.css 等文件时无法打开应用程序。

# sockets - Jboss 4.2 + socket

> ID：15358673
> 
> 赞同：0
> 
> 时间：2013-03-12T10:25:54.570
> 
> 标签：sockets, jboss

Trying an R&D, we need to create a socket client in web application (Jboss 4.2) am completely blank. Need you help in the following queries

A) To create socket client shall we use Jboss JMS (queue/PTP) functionality,

1) Is it good concept?

2) What are the steps for configuring the Queue details & where to set the connection details (host address, timeout is there any pooling size option).

3) Based on the above how do we handle the response from Socket server (Asynchronus & what would be the clustering effect).

B) Or is there any other way to configure socket using mbean, if so where can I refer the same for Jboss 4.2.

Tried my best to explain what is there in my mind.

# xslt - XSLFO - using xsl:import or xsl:include causes error when creating PDF

> ID：15358674
> 
> 赞同：0
> 
> 时间：2013-03-12T10:25:54.643
> 
> 标签：xslt, pdf-generation, xslt-1.0, xsl-fo

I have used XSLFO to generate PDF files, which is working perfectly.

There is some code within the XSLFO that I would like to put into a common file to be used by all the PDF's, but when I add an xsl:import... or xsl:inlcude... at the top of my file, Adobe throws an error saying the file is damaged and cannot be repaired.

Is there something specific I need to do to include another xsl file? I've tried having it in the same root directory but it's still not working.

I have tried adding a full path to the imported xsl files and that works, rather than the relative path, so is this a permissions issue?

Any help would be greatly appreciated. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:07:46.153

如果您将 xsl:import 或 xsl:include 添加到 XSL-FO 文档，那么这是错误的 - 这些声明应该只出现在 XSLT 样式表文件中。

# c++ - 我在创建指向另一个类中的对象的链表时遇到问题

> ID：15358675
> 
> 赞同：0
> 
> 时间：2013-03-12T10:25:55.690
> 
> 标签：c++, list

**vlist.h**

```
 class Vlist
    {
    public:
        Vlist();
        ~Vlist();
        void insert(string title, string URL, string comment, float length, int rating);
        bool remove();

    private:
        class Node
        {
        public:
            Node(class Video *Video, Node *next)
            {m_video = Video; m_next = next;}
            Video *m_video;
            Node *m_next;
        };
        Node* m_head;
    }; 
```

**主文件**

```
 int main()
    {
    ....blah blah.... (cin the values)

            Array[i] = new Video(title, URL, comment, length, rating);
            Vlist objVlist;
            objVlist.insert(title, URL, comment, length, rating);
    } 
```

vlist.cpp

这就是错误的来源

```
(m_head = new Node(Video, NULL); 
```

...此函数的工作是将指向视频类对象的指针插入到列表中。

```
 void Vlist::insert(string title, string URL, string comment, float length, int rating)
    {
        Node *ptr = m_head;
        //list is empty
        if(m_head == NULL)
            m_head = new Node(Video, NULL);
        else
        {
            ptr = ptr->m_next;
            ptr = new Node(Video, NULL);
        }
        //sort the list every time this executes

    } 
```

**视频.h**

这是我试图指向使用链表的类。

```
class Video
{
public:
    Video(string title, string URL, string comment, float length, int rating);
    ~Video();
    void print();
    bool longer(Video *Other);
    bool higher(Video *Other);
    bool alphabet(Video *Other);
private:
    string m_title;
    string m_url;
    string m_comment;
    float m_length;
    int m_rating;
}; 
```

第一次使用堆栈溢出，不太清楚会发生什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:32:57.170

尝试改变

```
m_head = new Node(Video, NULL); 
```

到

```
m_head = new Node(new Video(title, URL, comment, length, rating), NULL); 
```

还有这个：

```
else
{
    ptr = ptr->m_next;
    ptr = new Node(Video, NULL);
} 
```

不是真正将新添加`Node`到列表头部的正确方法。需要类似的东西：

```
ptr = new Node(new Video(title, URL, comment, length, rating), NULL);
ptr->m_next = m_head;
m_head = ptr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:34:48.807

“视频”是一个类的名称。
您需要创建一个`Video`实例。

```
void Vlist::insert(string title, string URL, string comment, float length, int rating)
{
    Video* v = new Video(title, URL, comment, length, rating);
    Node *ptr = m_head;
    if(m_head == NULL)
        m_head = new Node(v, NULL);
    else
    {
        ptr = ptr->m_next;
        ptr = new Node(v, NULL);
    }
    // ...
 } 
```

# java - 如何在构造函数中修改全局数组的大小

> ID：15358679
> 
> 赞同：0
> 
> 时间：2013-03-12T10:26:03.740
> 
> 标签：java, arrays, size, global-variables

如果插槽已满，我需要将数组中的插槽数加倍。我的代码目前位于我的层次结构是

```
public class Stack {
   Object filearray[]= new Object [5];

   public Object push(element) {
       if (filearray[filearray.length - 1] != null) {
            Object temp_array[] = new Object[filearray.length*2];
            int origonal = filearray.length*2;
            //adding the element that the user passed in
            temp_array[0] = element;
            for(int i =0; i<filearray.length;i++) {
                temp_array[i+1] =filearray[i];
            }
            //wiping the filearray clear
            Object filearray[] = new Object [origonal];
            for (int i=0; i<temp_array.length; i ++) {
                filearray [i]=temp_array[i];
            }
            return filearray;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:33:28.533

新的双倍大小数组永远不会保留在实例中，因此请查看以下内容来修复它：

```
public Object push(element)
{

    if (filearray[filearray.length - 1] != null)
    {
        Object temp_array[] = new Object[filearray.length*2];
        int origonal = filearray.length*2;
        //adding the element that the user passed in
        temp_array[0] = element;
        for(int i =0; i<filearray.length;i++)
        {
            temp_array[i+1] =filearray[i];
        }

        this.filearray = temp_array;
    }
} 
```

您不需要擦除旧数组，只需将其更改为对新分配数组的引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T10:29:11.540

在上面，您正在创建一个新的*本地*数组，范围为该方法。你没有改变原来的班级成员。这：

```
 //wiping the filearray clear
    Object filearray[] = new Object [origonal]; 
```

创建一个隐藏类成员的数组`filearray`。您只需要创建临时数组，然后执行以下操作：

```
 filearray = temp_array; 
```

交换参考。

我可能会调查[ArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)，因为它会在幕后完成所有这些工作，以及（不相关的）Java [generics](http://docs.oracle.com/javase/tutorial/java/generics/)，因为这会给你类型安全（除非你*真的*想存储`Objects`）

# asp.net - Change my form Dropdown dynamically when changing value from main dropdown list

> ID：15358684
> 
> 赞同：2
> 
> 时间：2013-03-12T10:26:12.557
> 
> 标签：asp.net, c#-4.0, drop-down-menu

I have a drop-down list where i select value and when i select a value from it, a form will appear. In that form i have four drop-down list of currencies so when i select **.UK** in my Drop-down list all four dropdown list's in the form show GBP,and when i select **.CA** it show CAN in four drop-down list's present in the form. how can i do that?

**My first drop-dwon list from where i select value to fill form**:

```
<asp:DropDownList ID="ddlPortal" runat="server" AutoPostBack="True" 
       onselectedindexchanged="ddlPortal_SelectedIndexChanged">
       <asp:ListItem>TRAVELONG</asp:ListItem>
       <asp:ListItem>ONETRAVEL</asp:ListItem>
       <asp:ListItem>.UK</asp:ListItem>
       <asp:ListItem>.CA-YYZ</asp:ListItem>
       <asp:ListItem>.CA-YVR</asp:ListItem>
   </asp:DropDownList> 
```

**Dropdown list where i want changes**:

```
<asp:ValidationSummary ID="vdm" runat="server" ForeColor="Red" />
<table class="style1">
       <tr>
           <td class="style13">
               <asp:Label ID="lblTid" runat="server" Text="TID"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbTid" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvTid" runat="server" 
                   ControlToValidate="tbTid" ErrorMessage="Enter Tid" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblUnusedTicketAmount" runat="server" 
                   Text="Unused Ticket Amount"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbUnusedTicketAmount" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvUnusedTicketAmount" runat="server" 
                   ControlToValidate="tbUnusedTicketAmount" ErrorMessage="Enter Amount" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               <asp:DropDownList ID="ddlUnusedAmount" runat="server" 
                   onselectedindexchanged="ddlUnusedAmount_SelectedIndexChanged">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style14">
               <asp:Label ID="lblPNR" runat="server" Text="PNR"></asp:Label>
           </td>
           <td class="style9">
               <asp:TextBox ID="tbPNR" runat="server"></asp:TextBox>
           </td>
           <td class="style8">
               <asp:RequiredFieldValidator ID="rfvPNR" runat="server" 
                   ControlToValidate="tbPNR" ErrorMessage="Enter PNR" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style9">
               <asp:Label ID="lblAirlinePenality" runat="server" Text="Airline Penality"></asp:Label>
           </td>
           <td class="style12">
               <asp:TextBox ID="tbAirlinePenality" runat="server"></asp:TextBox>
           </td>
           <td class="style10">
               <asp:RequiredFieldValidator ID="rfvAirlinePenality" runat="server" 
                   ControlToValidate="tbAirlinePenality" ErrorMessage="Enter Penality" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style10">
               <asp:DropDownList ID="ddlAirlinePenality" runat="server">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="lblTicketNumber" runat="server" Text="Ticket Number"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbTicketNumber" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvTicketNumber" runat="server" 
                   ControlToValidate="tbTicketNumber" ErrorMessage="Enter ESAC" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblNetRefundProcess" runat="server" Text="Net Refund Process"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbNetRefundProcess" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvNetRefundProcess" runat="server" 
                   ControlToValidate="tbNetRefundProcess" ErrorMessage="RequiredFieldValidator" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               <asp:DropDownList ID="ddlNetRefundProcess" runat="server">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="lblESACCode" runat="server" Text="ESAC Code"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbESACCode" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvESACCode" runat="server" 
                   ControlToValidate="tbESACCode" ErrorMessage="Enter ESAC code" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblRefundableCommision" runat="server" 
                   Text="Refundable Commission"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbRefundableCommision" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvRefundableCommission" runat="server" 
                   ControlToValidate="tbRefundableCommision" ErrorMessage="RequiredFieldValidator" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               <asp:DropDownList ID="ddlRefundableCommission" runat="server">
                   <asp:ListItem>USD</asp:ListItem>
                   <asp:ListItem>CAD</asp:ListItem>
                   <asp:ListItem>GBP</asp:ListItem>
               </asp:DropDownList>
           </td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="lblWaiverCode" runat="server" Text="Waiver Code"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbWaiverCode" runat="server"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvWaiverCode" runat="server" 
                   ControlToValidate="tbWaiverCode" ErrorMessage="Enter Waiver Code" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblCouponRefunded" runat="server" Text="Coupon Refunded"></asp:Label>
           </td>
           <td class="style11">
               <asp:TextBox ID="tbCouponRefund" runat="server"></asp:TextBox>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvCouponRefunded" runat="server" 
                   ControlToValidate="tbCouponRefund" ErrorMessage="Enter Coupon Refund" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               &nbsp;</td>
       </tr>
       <tr>
           <td class="style13">
               <asp:Label ID="Label7" runat="server" Text="Remarks"></asp:Label>
           </td>
           <td class="style5">
               <asp:TextBox ID="tbRemarks" runat="server" TextMode="MultiLine"></asp:TextBox>
           </td>
           <td class="style4">
               <asp:RequiredFieldValidator ID="rfvRemarks" runat="server" 
                   ControlToValidate="tbRemarks" ErrorMessage="Enter Remarks" Font-Bold="True" 
                   ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td class="style5">
               <asp:Label ID="lblRefundType" runat="server" Text="Refund Type"></asp:Label>
           </td>
           <td class="style11">
               <asp:DropDownList ID="ddlRefundType" runat="server">
                   <asp:ListItem>Full</asp:ListItem>
                   <asp:ListItem>Partial</asp:ListItem>
               </asp:DropDownList>
           </td>
           <td>
               <asp:RequiredFieldValidator ID="rfvRefundType" runat="server" 
                   ControlToValidate="ddlRefundType" ErrorMessage="Select Refund Type" 
                   Font-Bold="True" ForeColor="Red">*</asp:RequiredFieldValidator>
           </td>
           <td>
               &nbsp;</td>
       </tr>
       <tr>
           <td class="style13" colspan="7"> 
               &nbsp;<asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
                   Text="Submit" />
           </td>
       </tr>
   </table> 
```

Thanks in advance..

# jquery - 使用 jQuery 获取列表中的下一个或上一个项目

> ID：15358689
> 
> 赞同：2
> 
> 时间：2013-03-12T10:26:24.413
> 
> 标签：jquery, html

我正在处理具有基于索引的下一个和上一个链接的页面。

我开始做这样的事情：

```
var nextPage = $("a.selected").next().find('a').attr('href');
window.location = nextPage;
return true; 
```

问题是，如果“选定”锚点没有孩子或更多兄弟姐妹，这将不起作用。我希望能够转到父级别的下一个直接链接，并继续像这样通过树。在示例标记上，我希望能够从“Last Item”转到“Test”，如果有的话，可以转到 Test children...

从我所见，我需要为似乎不可靠的每个级别创造条件。最好的方法是什么？

标记看起来像这样[http://jsfiddle.net/wQy6Q/](http://jsfiddle.net/wQy6Q/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:33:13.767

如果您可以更改标记，则可以使用“数据”属性来检索下一个锚点。

标记示例：

```
<ul>
    <li><a href="test" data-index="1">Test 1</a></li>
    <li><a href="test" data-index="2">Test 2</a></li>
<ul> 
```

Javascript 示例：

```
var index = $("a.selected").attr('data-index');
var nextPage = $('a[data-index="' + (index + 1) + '"]').attr('href');
window.location = nextPage;
return true; 
```

如果您不想使用属性，也可以使用 css 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:39:58.120

**如果**我正确理解您的要求：

对于您的示例：按以下顺序遍历您的树链接：

*   1st：数据概览
*   第二：部分数据如何协同工作
*   3rd：数据示例软件
*   4th：数据在上传过程中如何使用您的 Internet 连接
*   5th：数据存储
*   6th：Web 访问数据
*   第七名：数据移动应用
*   第八：资料要求
*   第九名：数据安全

很快...

然后

```
$('a').each(function(index, link) {
    console.log(index);
    console.log(link);
    $(link).attr('href'); // href attribute
}); 
```

（见小提琴：http: [//jsfiddle.net/wQy6Q/13/](http://jsfiddle.net/wQy6Q/13/)）

如果不让我知道，我将删除此答案

**评论后（您可以跳过变量以获得更简单的代码）：**

```
var collection = $('.treeview a');
var needle = $('.treeview a.selected');
var index = collection.index(needle);

if (index !== -1) { // we have a selected link
    var resultLink = $('.treeview a:eq(' + (index + 1) + ')');
    if (resultLink) { // not the last link
        console.log(resultLink.attr('href'));
    } else { // if last link we retrieve the first one (remove this if you don't need this)
        $('.treeview a:first').attr('href');
    }

} 
```

小提琴示例：http: [//jsfiddle.net/wQy6Q/19/](http://jsfiddle.net/wQy6Q/19/)（重要提示：出于测试原因，我将所选链接移至小提琴中的第二个）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:09:18.493

试试这个

```
var selected = $("a.selected");

//find children
var next = selected.find('a:first');

//find next
if(!next.length){
    next = selected.next().find('a:first');
}

//find parent
var parent = selected.parent();
while(!next.length && parent.not('.treeview')){
    var els = parent.find('a');
    var index = els.index(selected);
    console.log(next, parent)
    next = els.filter(':gt(' + index + ')').first();
    parent = parent.parent();
}

if(next.length){
    console.log(next);
    selected.removeClass('selected');
    next.addClass('selected')
}else{
    console.log('finished')
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/wQy6Q/17/)

# ios - 无法从 iOS 应用上传超过 30 秒的视频到 Facebook

> ID：15358699
> 
> 赞同：6
> 
> 时间：2013-03-12T10:26:54.610
> 
> 标签：ios, facebook, video

我搜索了不同的问题，例如

[无法从 iOS 应用程序将大型视频上传到 Facebook](https://stackoverflow.com/q/14947776/2160239)

[在 ios 6.0 上使用 facebook sdk 3.1 将视频上传到 facebook](https://stackoverflow.com/q/12861615)

还有很多。没有可用的资源可以帮助解决这个问题。我能够成功上传较小的视频（例如 3-4 秒的视频）。

我正在使用 Facebook sdk 3.2。facebook指向的资源如下，不使用facebook SDK。facebook 3.2 sdk 中的视频上传是否中断？

[https://developers.facebook.com/blog/post/2011/08/04/how-to--use-the-graph-api-to-upload-a-video--ios/](https://developers.facebook.com/blog/post/2011/08/04/how-to--use-the-graph-api-to-upload-a-video--ios/)

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T07:52:22.827

看起来这已在 FB SDK 的最新更新中得到修复。

# c++ - 在窗口处理 mfc 时执行程序

> ID：15358700
> 
> 赞同：-4
> 
> 时间：2013-03-12T10:27:02.817
> 
> 标签：c++, mfc, dialog

我想在句柄可用时使程序工作。我正在考虑在初始化时设置计时器......并将所有程序源插入其中，但如果我在 while 循环中处理程序时丢失了句柄，它不会让我立即关闭对话框。

```
BOOL WaitProcessDlg::OnInitDialog()
{
   CDialogEx::OnInitDialog();
   SetTimer(IDC_PROGRESS1, 0, NULL);
   return TRUE;
}

void WaitProcessDlg::OnTimer(UINT nIDEvent)
{
   if(::FindWindow(NULL, str)){
   tempHWND = ::FindWindow(NULL, str);
      while(tempHWND){
----------------------->>>>>>>>>>>> A LOT OF CODING <<<<<<<<<<<<<<<<----------------------
      }
   EndDialog( 0 );
   KillTimer(IDC_PROGRESS1);
    }

  CDialog::OnTimer(nIDEvent);
} 
```

所以我的问题是当外部应用程序的句柄可能丢失时关闭对话框的最佳方法是什么，可能是插入线程或有任何其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:18:24.047

听起来你需要一个 windows 挂钩。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959(v=vs.85).aspx#whgetmessagehook](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644959(v=vs.85).aspx#whgetmessagehook)

使用 WH_GETMESSAGE 您可以看到其他应用程序窗口正在处理的 Windows 事件，然后您可以等待 WM_CLOSE 出现，然后终止您的对话框。

# c# - Monodroid 在 Intent 中传递 int[]

> ID：15358702
> 
> 赞同：1
> 
> 时间：2013-03-12T10:27:06.687
> 
> 标签：c#, android, android-intent, mono, xamarin.android

我有两个活动 A 和 B。我从活动 A 开始活动 B，如下所示：

```
var intent = new Intent(this, typeof (BActivity));
StartActivityForResult(intent, 1); 
```

如果您按下活动 B 上的按钮，我必须将一个 int[] 数组传递给活动 A，我创建了一个执行此操作的测试代码：

```
var intent = new Intent();
int[] array = {1, 2, 3};
intent.PutExtra("__extra__", array);
SetResult(Result.Ok, intent);
Finish(); 
```

但是，每当我尝试从意图中获取此值时，我都会收到 null。这是我尝试的方法：

```
var value = data.GetIntArrayExtra("__extra__"); 
```

我在这里做错了什么？我对字符串进行了同样的尝试，但在我看来，它起作用了，只是 int 数组不起作用......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:54:23.287

试试看：

```
Bundle bdl = new Bundle();
int[] array = {1, 2, 3};
bdl.PutIntArray("__extra__",array);

Intent intent = new Intent();
intent.PutExtra("extra", bdl);
SetResult(Result.Ok, intent);
Finish(); 
```

和上`OnActivityResult`：

```
Bundle credBdl = data.GetBundleExtra("extra");
int[] array=credBdl.GetIntArray("__extra__"); 
```

# c# - 添加 StreamReader 代码后，无法将变量添加到我的文本文件 StreamWriter

> ID：15358706
> 
> 赞同：0
> 
> 时间：2013-03-12T10:27:16.997
> 
> 标签：c#, object, reference, instance

我有个问题。

这是代码：

```
StreamReader lasa = new StreamReader("klubbar.txt");
while (true)
{
    string line = lasa.ReadLine();

    if (line == null)
    {
        break;
    }
    antal++;
    Console.WriteLine(line);

}
lasa.Close(); 
```

这些代码行导致我将变量写入文本文件时出现问题：

```
StreamWriter sparaklubb = new StreamWriter("klubbar.txt");

for (int i = 1; i <= antal; i++)
{
    sparaklubb.Write(klubbar[i].id + "\t");
    sparaklubb.Write(klubbar[i].klubbnamn + "\t");
    sparaklubb.Write(klubbar[i].vip + "\t");
    sparaklubb.Write(klubbar[i].dansgolv + "\t");
    sparaklubb.Write(klubbar[i].intrade + "\t");
    sparaklubb.Write(klubbar[i].casino + "\t");
    sparaklubb.WriteLine(klubbar[i].genre);
}
sparaklubb.Close(); 
```

因为我收到此错误：

![在此处输入图像描述](../Images/687480b64415bd2f226ad34e88600bd1.png)

如果我删除 StreamReader 代码一切正常，我不知道如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:58:40.343

基于快速查看您的代码，您永远不会填充数组，因为数组中的每个实体都是空的，所以当您尝试访问对象上的字段时，对象本身是空的。

因此该对象未设置异常。

您需要从流阅读器部分的文本文件中正确实现填充

```
 klubb[] klubbar = new klubb[100]; //Skapa en vektor där varje element kan behålla flera olika variblar från klassen "klubb"

        //IF YOU REMOVE THIS STREAMREADERCODE WITH THE WHILE LOOP EVERYTHING WILL WORK FINE
        StreamReader lasa = new StreamReader("klubbar.txt");
        while (true)
        {
            string line = lasa.ReadLine();

            if (line == null)
            {
                break;
            }
            antal++;
            Console.WriteLine(line);
           // klubbar[antal] = line;     //ADD EACH LINE IN TEXTFILE TO AN SEPAREATE INDEX IN ARRAY klubar
        }
        lasa.Close(); 
```

当您阅读每一行时，您需要将该行解析为您的 Klubb 对象。这应该足够简单，因为它看起来像您的文件是制表符分隔的。

```
1       Harrys  True    6   100 blackjack   klubbfan
2        xoY    True    6   100 blackajacka klubb
3       lounge  True    6   100 blackjacka  klubb 
```

作为对评论的回应，因此您可以执行以下操作：

```
klubbar[antal] = GetKlubbFromString(line); 
^ this line is to replace the line in your stream reader section

private static klubb GetKlubbFromString(string line)
    {
        string[] lineItems = line.Split('\t');

        //1       Harrys  True    6   100 blackjack   klubbfan

        return new klubb
                   {
                       id = Convert.ToInt32(lineItems[0]),
                       klubbnamn = lineItems[1],
                       vip = Convert.ToBoolean(lineItems[2]),
                       dansgolv = Convert.ToInt32(lineItems[3]),
                       intrade = Convert.ToInt32(lineItems[4]),
                       casino = lineItems[5],
                       genre = lineItems[6]
                   };
    } 
```

由于例外情况，我个人不会使用 Convert.To，我更喜欢 TryParse，而且我相信一些更聪明的 SO 成员会出现并提供更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:52:49.700

问题是您没有`antal`在阅读器代码之后重置为 0。这会导致插入`klubbar`数组的代码从当前值开始`antal`，例如，阅读器可能读入 5 行，所以`antal`是 5。这意味着您没有将对象放入`klubbar`数组中的位置 1- 4（你真的应该从 0 开始索引）。然后在您的编写器代码中，您尝试在`null`值上引用成员`klubbar[1]`。删除阅读器代码“修复”了问题，因为`antal`当您开始将对象放入`klubbar`数组时将为 0。我的建议是使用 a`List<klubb>`而不是数组。

# jquery - jQuery Ajax：在 ajax 中调用 ajax

> ID：15358707
> 
> 赞同：0
> 
> 时间：2013-03-12T10:27:27.347
> 
> 标签：jquery, ajax

我将此代码用于联系表格： [http ://spyrestudios.com/coding-a-minimalist-contact-form-with-captcha-spam-protection/](http://spyrestudios.com/coding-a-minimalist-contact-form-with-captcha-spam-protection/)

我有这个菜单列表：

```
<ul class="menu">
  <li class="company"><a href="#"> company</a>
  <ul>
    <li class="aboutus"><a href="#" >aboutus</a></li>
    <li class="contactus"><a href="#" >contactus</a></li>
  </ul>  
  </li>
  <li class="services"><a href="#">services</a></li>
</ul> 
```

我正在尝试使用 ajax 调用联系表单，如下所示：

```
$(document).on("click", ".menu li.contactus", function(e) {

  e.stopPropagation();
  $("#contactform").load("contact.php");

}); 
```

这是联系表格代码：

```
<?php
session_start();
?>

 <div id="wrapper">
<div id="contactwrapper">
<form id="contact" name="contact" method="post" action="contact.php" enctype="multipart/form-data">
    <input type="hidden" name="check" value="01">
    <small>*all form fields are required.</small>

    <label for="name" id="namelabel">Name:<span class="err topp">enter your name</span></label>
    <input type="text" name="name" id="name" class="textinput">

    <label for="email" id="emailabel">E-mail:<span class="err topp">enter a valid e-mail address</span></label>
    <input type="email" name="email" id="email" class="textinput">

    <label for="message" id="msglabel">Message:<span class="err txarea">share some stuff with us</span></label>
    <textarea name="message" id="message" class="msgtextarea"></textarea>

    <img src="captcha.php" id="captchaimg">

    <label for="captcha" id="captchalabel">You're not a spammer, right?<span class="err capter">your CAPTCHA code looks wrong</span></label>
    <input type="text" name="captchavalue" id="captchavalue" class="textcaptcha">

    <section id="subber">
    <a href="javascript:void(0);" name="submitlink" id="submitlink" class="btn">Send Message</a>
    </section>
</form>
</div>
   </div>

    <script type="text/javascript">
     function checkValidEmailAddress(emailAddress) {
     var pattern = new RegExp(/^(("[\w-+\s]+")|([\w-+]+(?:\.[\w-+]+)*)|("[\w-+\s]+")([\w-+]+(?:\.[\w-+]+)*))(@((?:[\w-+]+\.)*\w[\w-+]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][\d]\.|1[\d]{2}\.|[\d]{1,2}\.))((25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\.){2}(25[0-5]|2[0-4][\d]|1[\d]{2}|[\d]{1,2})\]?$)/i);

return pattern.test(emailAddress);
};

var mailsendstatus;
function userSendMailStatus(uname, uemail, umsg, ucaptcha) {
// checking for some valid user name
if(!uname) {
    $("#namelabel").children(".err").fadeIn('slow');
}
else if(uname.length > 3) {
    $("#namelabel").children(".err").fadeOut('slow');       
}

// checking for valid email
if(!checkValidEmailAddress(uemail)) {
    $("#emailabel").children(".err").fadeIn('slow');
}
else if(checkValidEmailAddress(uemail)) {
    $("#emailabel").children(".err").fadeOut('slow');   
}

// checking for valid message
if(!umsg) {
    $("#msglabel").children(".err").fadeIn('slow');
}
else if(umsg.length > 5) {
    $("#msglabel").children(".err").fadeOut('slow');
}

// ajax check for captcha code
$.ajax(
    {
        type: 'POST',
        url: 'captcha_check.php',
        data: $("#contact").serialize(),
        success: function(data) {
            if(data == "false") {
                mailsendstatus = false;
                $("#captchalabel").children(".err").fadeIn('slow');
            }
            else if(data == "true"){
                $("#captchalabel").children(".err").fadeOut('slow');

                if(uname.length > 3 && umsg.length > 5 && checkValidEmailAddress(uemail)) {
                    // in this case all of our inputs look good
                    // so we say true and send the mail
                    mailsendstatus = true;

                    $("#subber").html('<img src="load.gif" alt="loading...">');

                    $.ajax(
                        {
                            type: 'POST',
                            url: 'sendmail.php',
                            data: $("#contact").serialize(),
                            success: function(data) {

                                if(data == "yes") {
                                    alert("aaa");
                                $("#contactwrapper").slideUp(650, function(){
                                    $(this).before("<strong>Yep your mail has been sent!</strong>");
                                });
                                }
                            }
                        }
                    ); // close sending email ajax call 
                } // close if logic for mailsendstatus true
            } // close check CAPTCHA return true
        } // close ajax success callback function
    } // close ajax bracket open
);

return mailsendstatus;
   }

   $(document).ready(function(){
$("#contact").submit(function() { return false; });

$("#submitlink").bind("click", function(e){
    var usercaptvalue = $("#captchavalue").val();
    var subnamevalue  = $("#name").val();
    var emailvalue    = $("#email").val();
    var msgvalue      = $("#message").val();

    var postchecks = userSendMailStatus(subnamevalue, emailvalue, msgvalue, usercaptvalue);
});
  });
</script> 
```

联系表单正在检查验证码并使用 jquery ajax 发送数据。因此，php 页面中的 ajax 代码不起作用。

是否可以在其中调用ajax？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:32:44.860

当你使用`load()`jQuery 加载 Html。

如果您需要 javascript，请尝试使用[$.getScript()](http://api.jquery.com/jQuery.getScript/)从文件中获取指定的 javascript。

您也可以运行 an`iframe`来避免这种情况，或者尝试将您的联系表单 javascript 嵌入到`index`页面中。

# ruby-on-rails - wkhtmltoimage 的字体渲染问题

> ID：15358708
> 
> 赞同：2
> 
> 时间：2013-03-12T10:27:30.217
> 
> 标签：ruby-on-rails, ubuntu, font-face, wkhtmltoimage

我有一个使用 wkhtmltoimage 呈现图像的 Rails 应用程序。图像中使用的字体是 Lucida Grande，通过 inline data-uris 包含在内。在我的本地 Mac 上一切正常，但在远程服务器（Ubuntu 12.10）上，字体看起来很奇怪。两者都使用 wkhtmltoimage 0.10.0 rc2。

左边是在我的 Mac 上生成的，右边是在 Ubuntu 服务器上生成的。

![苹果电脑](../Images/9310a49b0bcaba5c083fea76deb983f2.png) ![在此处输入图像描述](../Images/4647c8f59e2773bb716900148c48561a.png)

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T19:19:39.323

不幸的是，我还没有找到解决这个问题的方法。但是今天我很幸运找到了解决方法！:)

在阅读了 Thomas Fuchs[在电子邮件中的嵌入画布和 SVG 图表之后，](http://mir.aculo.us/2013/04/30/embed-canvas-and-svg-charts-in-emails/)我采取了激进的方式，将**wkhtmltoimage**完全替换为**PhantomJS**。我还使用他的[gist](https://gist.github.com/madrobby/5489174)安装了一些依赖项。结果如下：

**wkhtmltoimage**本地和远程：

![在此处输入图像描述](../Images/9741435984ad2a514c8fa764f85adcda.png) ![在此处输入图像描述](../Images/36b11385e42aa1f66cb841b4e730825e.png)

**PhantomJS**本地和远程：

![在此处输入图像描述](../Images/2695f848f0917cb38317ed96cff969fc.png) ![在此处输入图像描述](../Images/f67c6122d8a4622ee30feb7974487b23.png)

尽管仍有细微的差别，但 PhantomJS 的工作做得非常好！所以我现在将使用它，并关闭这个问题:)

# java - Java 从 URL 读取 JPG 文件

> ID：15358721
> 
> 赞同：1
> 
> 时间：2013-03-12T10:28:13.880
> 
> 标签：java, url, jpeg

```
public class Socket {
    public Socket() {
        try {
            URL url = new URL("http://images2.layoutsparks.com/1/56178/castle-stone-window-grey.jpg");
            InputStream in = url.openStream();
            BufferedInputStream bin = new BufferedInputStream(in); 

            ByteArrayOutputStream bout = new ByteArrayOutputStream(4096);
            byte[] okunan = new byte[4096];

            while(in.read()!= -1){
                bout.write(okunan, 0, in.read());

            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

我收到此错误：java.io.ByteArrayOutputStream.write 处的线程“main”java.lang.IndexOutOfBoundsException 中的异常（未知来源）

我想在写入文件后将此 jpeg 文件读取到 bytearrayoutputstream 中。

对不起我的英语不好..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:31:18.277

试试这个

```
BufferedImage img = ImageIO.read(new URL("http://images2.layoutsparks.com/1/56178/castle-stone-window-grey.jpg")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:33:38.297

使用`ImageIO`API

```
BufferedImage img = ImageIO.read(new URL("http://images2.layoutsparks.com/1/56178/castle-stone-window-grey.jpg"));

ByteArrayOutputStream bout = new ByteArrayOutputStream();
ImageIO.write(img, "jpg", bout); 
```

检查[此](http://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)和[此](http://docs.oracle.com/javase/tutorial/2d/images/saveimage.html)以获取信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:35:49.743

你的意思是像

```
try {
        URL url = new URL("http://images2.layoutsparks.com/1/56178/castle-stone-window-grey.jpg");
        InputStream in = url.openStream();
        BufferedInputStream bin = new BufferedInputStream(in); 

        ByteArrayOutputStream bout = new ByteArrayOutputStream(4096);
        byte[] okunan = new byte[4096];

        while(in.read()!= -1){
            in.read(okunan);
            bout.write(okunan);

        }

    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:54:43.080

使用 javax.imageio.ImageIO 而不是 java.io 包的简单 InputStream。

看看这里，我认为它会有所帮助：

[http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html](http://docs.oracle.com/javase/6/docs/api/javax/imageio/ImageIO.html)

# php - Zend Framework 2 - 注释表单的静态选项

> ID：15358725
> 
> 赞同：0
> 
> 时间：2013-03-12T10:28:18.537
> 
> 标签：php, doctrine-orm, annotations, zend-framework2

我正在使用`Docrine2`with `AnnotationForms`，我想知道如何实现以下目标：

我的实体中有一个字段，它应该是一个包含大约 4 个静态选项的下拉列表。

对于`Django`用户：我想定义`choices`.

例子：

*标签：你住在哪个大陆？*

*选择：非洲、亚洲、美洲、欧洲*

因为选择不会改变，所以我想将它们放在我的实体中的某个位置，以便它们绑定到数据模型。

有这种可能吗？或者如果不是最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:46:01.620

[在这里](http://samsonasik.wordpress.com/2012/10/04/zend-framework-2-step-by-step-build-form-using-annotation-builder/)偶然找到了解决方案：

```
/**
 * @ORM\Column(type="string")
 * @Form\Type("Zend\Form\Element\Select")
 * @Form\Filter({"name":"StripTags"})
 * @Form\Options({"label":"Continent*", "value_options": {"0":"Select one","1":"Africa","2":"America"}})
 * @Form\Validator({"name":"InArray", "options":{"haystack":{"1","2"}, "messages":{"notInArray":"Choose one!"}}})
 * @Form\Attributes({"value":"0"})
 */
protected $continent; 
```

# jquery - Firefox 未在选中/未选中复选框输入上添加/删除类

> ID：15358728
> 
> 赞同：0
> 
> 时间：2013-03-12T10:28:23.167
> 
> 标签：jquery, google-chrome, firefox, checkbox

嗨，我有几个实例，其中其他开发人员（执行 CSS/HTML）已将一些选项编码为复选框，用户可以单击/点击它们以“检查”它们。

```
$(document).ready(function() {
  $('.terms input:checkbox').change(function(){
     if($(this).is(":checked")) {
       $(this).parent().toggleClass("checked");
     }
  });
}); 
```

这在 Chrome 中运行良好，但在 Firefox 中没有*任何*作用（OSX 上的最新版本）

有什么理由吗？我在这里做错了什么？

编辑：很抱歉没有提供任何 HTML :-/

```
 <div class="terms">
   <input type="checkbox" name="terms" value="Acepto las condiciones" />
   <p class="checkbox"></p>
   <p>Acepto las condiciones <a title="Términos y condiciones" href="static.html">?</a></p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:46:34.593

[http://jsfiddle.net/gJ9fC/](http://jsfiddle.net/gJ9fC/)

查询：

```
$(document).ready(function() {
    $('input:checkbox').change(function() {
       $(this).parent().toggleClass("checked");

  });
}); 
```

由于您使用切换，因此您无需检查您的复选框是否被选中。当您使用切换时，jquery 会根据您的要求删除或添加类！

O 和我删除了 .terms 因为你没有它。你可以使用 .subproducts

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:47:14.150

通过对 jQuery 进行微小的更改，您就可以实现您想要做的事情。并且不要忘记`.checked`在您的 css 文件中添加类。

```
$(document).ready(function() {
  $('.terms input:checkbox').on('change', function(){          
      $(this).parent().toggleClass("checked");   
    });
}); 
```

[例子](http://jsfiddle.net/agriboz/WqnpJ/1/)

另一个使用`label`标签的例子。我相信它更方便用户体验。

[使用标签的示例](http://jsfiddle.net/agriboz/WqnpJ/3/)

# machine-learning - 如何使用 Weka 试验不同的功能集

> ID：15358731
> 
> 赞同：1
> 
> 时间：2013-03-12T10:28:28.110
> 
> 标签：machine-learning, weka

我有一个分类问题，为了解决这个问题，我打算使用不同的特征集，比如 unigramms 和 bigramms，也许会更晚一些。我想尝试这些功能集的不同组合。最好的方法是什么？我是否必须为不同的功能集组合准备不同的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:17:57.167

一种简单的方法是使用“RemoveByName”过滤器，根据正则表达式过滤掉属性。因此，例如，如果 unigram 特征名称以“uni_”开头，而 bigrams 以“bi_”开头，则可以使用 RemoveByName -E ^uni_ 仅保留 bigram。您可以通过 GUI 作为预处理步骤或使用元“FilteredClassifier”来执行此操作。

但是，我想不出在 WEKA 中尝试不同组合的自动化方式。

# php - 无法使用 exec 函数捕获 svn 命令输出

> ID：15358736
> 
> 赞同：0
> 
> 时间：2013-03-12T10:28:58.607
> 
> 标签：php, svn, diff, working-copy

我尝试通过发出以下命令来检查 svn 工作副本中文件的状态：

```
svn status /home/guna/server/local/svndump/site/head.php 
```

输出结果如下，

```
M       /home/guna/server/local/svndump/site/head.php 
```

但是当我在 php 中尝试使用相同的命令时，结果是空数组，

```
<?php
exec('svn status /home/guna/server/local/svndump/site/head.php',$re);
echo "<pre>";print_r($re);echo '</pre>';
?> 
```

这里有什么问题？有人可以帮助我吗？答案赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:27:21.713

最后我找到了解决方案。我通过执行以下操作在使用 exec 函数时检查了错误：

```
exec('svn status /home/guna/server/local/svndump/site/head.php 2> /tmp/err.txt); 
```

然后我检查了错误日志，发现以下错误：
“/usr/lib/libgcc_s.so.1：找不到版本‘GCC_4.2.0’（/usr/lib32/libstdc++.so.6 需要）”

**所以我将libgcc_s.so.1**从`/usr/lib/`目录复制到`/opt/lampp/lib/`，问题解决了。

以下两次讨论帮助了我： [错误未显示在浏览器](https://stackoverflow.com/questions/13295292/php-exec-not-executing-if-called-from-browser)和 [库错误中](http://linux42.org/kb/%27GCC_4.2.0%27+not+found.../?kbid=456)

# caching - Spring Cache 刷新间隔

> ID：15358739
> 
> 赞同：0
> 
> 时间：2013-03-12T10:28:59.973
> 
> 标签：caching, ehcache

我遇到了允许刷新缓存的 ehcache spring 注释项目。

[文章](http://cleancode.se/2012/03/31/refreshing-caches-in-ehcache.html)

Spring @Cacheable 注释中有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T03:43:46.100

Spring @cacheable 注解中没有类似的方法。

# uitableview - 删除按钮出现时自定义表格视图单元格中缺少 UISlider 宽度的动画

> ID：15358747
> 
> 赞同：0
> 
> 时间：2013-03-12T10:29:44.020
> 
> 标签：uitableview, animation, edit, uislider

这是一个微妙的问题：我有一个带有滑块和分段控件的自定义表格视图单元格。当表格进入编辑模式时，一切看起来都很好，当红色的删除按钮出现时，滑块和分段控件的宽度都会缩小，以便在右侧为删除按钮留出空间，并且这种缩小会正确设置动画。所以一切都很好。

但是，当用户没有执行删除操作而是点击越界时，滑块会在删除按钮动画滑动完成之前立即弹回其全宽。然而，分段控件被正确地动画回其全宽。我自己不处理任何动画。为什么滑块没有动画？我的设置代码如下。有任何想法吗？

请注意，左侧圆形红色选择按钮出现或消失时所有元素的动画都很好。

如果我无法解决此问题，我想知道如何阻止删除按钮在出现时将内容推向左侧，但保留选择按钮的缩进动画。

```
NSArray *itemArray = @[@"1", @"2", @"3", @"4"];
self.source = [[[UISegmentedControl alloc] initWithItems:itemArray] autorelease];
self.source.frame = CGRectMake(80, 10, cb.size.width - 92, 36);
self.source.segmentedControlStyle = UISegmentedControlStylePlain;
self.source.selectedSegmentIndex = 0;
self.source.autoresizingMask = UIViewAutoresizingFlexibleWidth;
[self.contentView addSubview:self.source];

self.phaseSlider = [[[UISlider alloc] initWithFrame:CGRectMake(80, 50, cb.size.width - 92, 36)] autorelease];
self.phaseSlider.continuous = TRUE;
self.phaseSlider.autoresizingMask = UIViewAutoresizingFlexibleWidth;
[self.contentView addSubview:self.phaseSlider]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:55:51.953

我发现了解决方案。显然，使用调整大小蒙版允许滑块在删除按钮出现时调整大小存在一些问题。相反，我删除了灵活的宽度调整蒙版。我初始化了控件，`initWithStyle`但只将框架设置在`layoutSubViews`. 这实际上是设置控制框架的更好方法，因为单元格的宽度和高度实际上在 initWithStyle 中是不确定的。当您设置帧时，`layoutSubViews`它会在删除按钮出现和消失动画期间被调用，并且位置和大小会正确设置动画。

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self)
    {
        // Initialization code
        NSArray *itemArray = @[@"1", @"2", @"3", @"4"];
        self.source = [[[UISegmentedControl alloc] initWithItems:itemArray] autorelease];
        self.source.segmentedControlStyle = UISegmentedControlStylePlain;
        self.source.selectedSegmentIndex = 0;
        [self.contentView addSubview:self.source];

        self.phaseSlider = [[[UISlider alloc] initWithFrame:CGRectZero] autorelease];
        self.phaseSlider.continuous = TRUE;
        [self.contentView addSubview:self.phaseSlider];

        self.selectionStyle = UITableViewCellSelectionStyleNone;
    }
    return self;
}

- (void)layoutSubviews
{    
    [super layoutSubviews];

    float w = self.contentView.bounds.size.width;

    self.source.frame = CGRectMake(78, 10, w - 92, 36);
    self.phaseSlider.frame = CGRectMake(78, 50, w - 92, 36);
} 
```

# c# - 在 Windows Phone 7 中实时访问来自相机的原始帧

> ID：15358754
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:30:08.590
> 
> 标签：c#, silverlight, windows-phone-7

任何人都可以帮助如何从 windows phone 中的相机访问实时原始帧吗？我搜索但没有得到任何关于此的文章。我是 Windows Phone 的新手，所以任何帮助都会很棒。

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:56:01.207

我之前在相机上使用 GetPreviewBufferY 方法取得了成功。就像是：

```
byte[] buffer;
_photoCamera.GetPreviewBufferY(buffer) 
```

# scroll - extjs4 xtype:container 添加滚动监听

> ID：15358761
> 
> 赞同：2
> 
> 时间：2013-03-12T10:30:31.603
> 
> 标签：scroll, extjs4, listener, containers

如何在 extjs 4 容器上添加滚动侦听器？

我试过了：

```
{   xtype: 'container',
    region: 'center',
    id: 'centerPanel',
    autoScroll: true,
    listeners: {
        afterrender: function (c) {
             c.getEl().on('scroll', function () {
                 console.log('scrolling');
             });
             c.getEl().on('click', function () {
                 console.log('click');
             });
        }
    },
} 
```

但这似乎不再起作用，在 ext 3 上工作。有人有什么想法吗？点击事件有效，滚动无效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-18T15:38:21.580

我找到了解决方案。'viewready' 而不是 'afterender' 并使用 grid.view

```
viewready: function(grid,eOpts){
    grid.view.getEl().on('scroll', function(e, t) { 
         console.log("scroll");
    });
} 
```

# c# - 从 ListView 排序中排除项目

> ID：15358766
> 
> 赞同：3
> 
> 时间：2013-03-12T10:30:39.213
> 
> 标签：c#, wpf, listview, sorting

我使用 WPF ListView 来显示数据。我创建了数据模型 [用作 ListView 的 DataContex]，其中包含一个成员：

```
private CollectionViewSource itemEntryInfosView; 
```

ListView 的 ItemsSource 设置为 itemEntryInfosView。假设 itemEntryInfosView 填充了从数据库下载的数据。

为了对数据进行排序[点击列后]，我编写了以下方法：

```
 public void SortList_OnExecuting(object parameter)
    {
        var sortColumn = (string)parameter;
        this.itemEntryInfosView.SortDescriptions.Clear();

        if (this.sortAscending)
        {
            this.itemEntryInfosView.SortDescriptions.Add(
                new SortDescription(sortColumn, ListSortDirection.Ascending));
            this.sortAscending = false;
        }
        else
        {
            this.itemEntryInfosView.SortDescriptions.Add(
                new SortDescription(sortColumn, ListSortDirection.Descending));
            this.sortAscending = true;
        }
    } 
```

假设 itemEntryInfoView 的**来源**是由 ItemEntry 类参数化的 ObserverableCollection（具有一些公共属性的简单类，ListView 为每个属性定义列）

一切都像 chram 一样工作，但我需要添加一个功能。我需要一个特殊的行来代表“添加新行”之类的东西。我认为这样的行可以从 ItemEntry 继承。**该行应从排序中排除。**（假设它应该始终位于 ListView 的末尾）。我怎样才能实现这样的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:42:28.107

您可以使用`CompositeCollection`：

```
<ListView>
    <ListView.ItemsSource>
        <CompositeCollection>
            <ListBoxItem Content="Add New" />
            <CollectionContainer Collection="{Binding Source={StaticResource ItemEntryInfosView}}" />
        </CompositeCollection>
    </ListView.ItemsSource>
</ListView> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:42:09.740

一种选择可能是考虑已经为您提供功能的第三方控件。例如，[WPF 扩展工具包](http://wpftoolkit.codeplex.com/)包括一个[DataGrid](http://wpftoolkit.codeplex.com/wikipage?title=DataGrid&referringTitle=Home)。

# ios - 如何在 UIBezierPath 中填充颜色？

> ID：15358769
> 
> 赞同：15
> 
> 时间：2013-03-12T10:30:43.713
> 
> 标签：ios, uibezierpath

我在 touchesMoved 中通过 UIBezierPath 绘制了一个形状。

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    secondPoint = firstPoint;
    firstPoint = [touch previousLocationInView:self];
    currentPoint = [touch locationInView:self];

    CGPoint mid1 = midPoint(firstPoint, secondPoint);
    CGPoint mid2 = midPoint(currentPoint, firstPoint);

    [bezierPath moveToPoint:mid1]; 
    [bezierPath addQuadCurveToPoint:mid2 controlPoint:firstPoint];

    [self setNeedsDisplay]; 
} 
```

我想在 closePath 之后在其中填充红色，但不能。请帮忙！

```
- (void)drawRect:(CGRect)rect
{
    UIColor *fillColor = [UIColor redColor];
    [fillColor setFill];
    UIColor *strokeColor = [UIColor blueColor];
    [strokeColor setStroke];
    [bezierPath closePath];
    [bezierPath fill];
    [bezierPath stroke]; 
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-12T10:37:12.983

如果您在其他地方存储了贝塞尔路径，则应该可以：

**编辑**

查看您编辑的代码，正在发生的事情是，当您关闭您正在绘制的路径时，您正在关闭 - 所以您得到一条线，而不是一个形状，因为您只有两个点。

解决此问题的一种方法是在您的点移动时创建路径，但描边并填充该路径的副本。例如**，这是未经测试的代码，我直接写**

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    secondPoint = firstPoint;
    firstPoint = [touch previousLocationInView:self];
    currentPoint = [touch locationInView:self];

    CGPoint mid1 = midPoint(firstPoint, secondPoint);
    CGPoint mid2 = midPoint(currentPoint, firstPoint);

    [bezierPath moveToPoint:mid1]; 
    [bezierPath addQuadCurveToPoint:mid2 controlPoint:firstPoint];

    // pathToDraw is an UIBezierPath * declared in your class
    pathToDraw = [[UIBezierPath bezierPathWithCGPath:bezierPath.CGPath];

    [self setNeedsDisplay]; 
} 
```

然后你的绘图代码可以：

```
- (void)drawRect:(CGRect)rect {
    UIColor *fillColor = [UIColor redColor];
    [fillColor setFill];
    UIColor *strokeColor = [UIColor blueColor];
    [strokeColor setStroke];

    // This closes the copy of your drawing path.
    [pathToDraw closePath];

    // Stroke the path after filling it so that you can see the outline
    [pathToDraw fill]; // this will fill a closed path
    [pathToDraw stroke]; // this will stroke the outline of the path.

} 
```

有一些整理工作要做`touchesEnded`，这可以提高性能，但你明白了。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-12T10:37:00.087

你必须保留你`UIBezierPath`的数组。试试这个代码，

```
 - (void)drawRect:(CGRect)rect
    {

        for(UIBezierPath *_path in pathArray){

         [_path fill];
        [_path stroke];
        }
    }

    #pragma mark - Touch Methods
    -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
    {
        myPath=[[UIBezierPath alloc]init];
        myPath.lineWidth = currentSliderValue;

        UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
        [myPath moveToPoint:[mytouch locationInView:self]];
        [pathArray addObject:myPath];
    }
    -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
    {
        UITouch *mytouch=[[touches allObjects] objectAtIndex:0];
        [myPath addLineToPoint:[mytouch locationInView:self]];
        [self setNeedsDisplay];

    } 
```

# ios - typedef struct vs. Object - 好处

> ID：15358771
> 
> 赞同：5
> 
> 时间：2013-03-12T10:30:54.637
> 
> 标签：ios, objective-c, struct

我计划定义一个类，它的属性中包含 x/y 网格的坐标。但是，我不确定实现此设计的“最佳”方式。这是一个非常简单的问题，我只想正确地做并且有理由！

一种解决方案是在`int`对象中拥有两个类型为“ ”的属性，一个用于 x，一个用于 y。

另一种是定义一个包含 x/y 值的两个整数的 typedef 结构并命名它`<ClassPrefix>Coordinate`。类似于`CGSize`?

有没有其他/更好的方法来做到这一点？哪个是首选？不知道如何证明任何一种方式。

谢谢！

蒂姆。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T10:43:02.153

“哪个是首选？”的答案 问题取决于几个因素：

*   **您打算创建多少这样的项目？**- 如果答案是“百万”，则`struct`获胜；如果答案是“五十八”，则对象获胜。
*   **你需要在上面定义方法吗？**- 如果答案是“是”，则对象获胜；否则，`struct`可能没问题。
*   **你打算定义它的数组吗？**- 如果答案是“是”，`struct`可能是更好的选择。
*   **您是否需要经常创建和销毁它？**- 如果答案是“是”，`struct`可能是更好的选择。

最终，您的设计约束帮助您确定什么是最好的；没有普遍“更好”的数据结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T10:58:24.493

除了@dasblinkenlight 的回答，我会给你一些决策建议：

*   **创建后结构是不可变的**吗？
    使用一个对象。

*   **该结构是否拥有（= 保留）指向其他对象或数组（C 数组或 C 数组）的指针`NSArray`？它是否与对象交互（= 具有带有对象参数的方法）？**
    然后使用一个对象。

*   **该结构是否仅包含原始类型（`int`, `float`, other`struct`等）并且仅与其他原始类型/结构交互？**
    然后使用`struct`with 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T10:45:29.573

这是一种权衡。

一个类和它的实例会消耗更多的资源，尤其是当你必须制作很多它们的时候。如果没有这么多的实例，那不是问题。

结构更快但很难扩展，最不方便的是结构不能保存对象或方法。

对于您的示例，如果您仅将其用于坐标，我建议您使用 struct. 但这取决于您的设计和代码。没有绝对的判断哪个是最好的。

# javascript - 基于 HTML 和 JQuery 中的复选框显示/隐藏下拉菜单和按钮

> ID：15358772
> 
> 赞同：1
> 
> 时间：2013-03-12T10:31:01.413
> 
> 标签：javascript, jquery, html, input, checkbox

我试图在 HTML 中显示/隐藏下拉列表和按钮，但在尝试使其正常工作时遇到问题。这是 HTML 设置：

```
<td valign="top">
    <INPUT TYPE="CHECKBOX" NAME="switchBox" onClick="showHideForm(this,'extra')"> 
</td>
<div id="extra">
   <td valign="top"><form:select path="uSelectedSystemId" id="uSelectedSystemId"></form:select> </td>
   <td valign="top"><button type="button" id="fUndelete">Undelete</button</td>
</div> 
```

这是功能：

```
function showHideForm(box, id) {
    var elm = document.getElementById(id);
    elm.style.display = box.checked ? $('#uSelectedSystemId').hide() : $('#uSelectedSystemId').show();
    elm.style.display = box.checked ? $('#fUndelete').hide() : $('#fUndelete').show();
} 
```

当我选中该框时没有任何反应。关于我做错了什么的任何想法？此外，是否有关于如何在页面首次加载时隐藏下拉菜单和按钮的任何建议（我希望它们隐藏）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T10:36:53.160

那里有一些 jQuery 和 javascript 的随机组合。如果你给你的复选框一个 ID，你可以简单地执行以下操作

```
$(function(){

    $('#uSelectedSystemId').hide();  //Hide the elements onload
    $('#fUndelete').hide();          //Hide the elements onload

    $('#checkboxID').click(function(){
          if($(this).is(':checked')){
              $('#uSelectedSystemId').show();
              $('#fUndelete').show();
          } else {
              $('#uSelectedSystemId').hide();
              $('#fUndelete').hide();
          }
    });
}); 
```

如果您出于某种原因不想为复选框提供 ID，则该行`$('#checkboxID')`可以更改为此。`$('input[name="switchBox"]')`

下面是您的函数的返工这将隐藏并显示具有额外 id 的 DIV。上面的代码不会隐藏 div 而是隐藏里面的两个元素。这可以很容易地调整

```
//Pure javascript version
function showHideForm(box, id) {
    var elm = document.getElementById(id);
    if(box.checked){
        elm.style.display = "none";
    } else {
        elm.style.display = "";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:37:23.263

在复选框的 onchange 事件时调用该函数

```
<INPUT TYPE="CHECKBOX" NAME="switchBox" onchange="showHideForm(this,'extra')"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:51:27.707

不要混合使用 jQuery 和纯 JavaScript，

```
<INPUT TYPE="CHECKBOX" NAME="switchBox" style="display:none" onClick="showHideForm()"> 
```

事情应该像这样的jQuery：

```
function showHideForm() {
    if($('#checkboxID').is(':checked')){
        $('#uSelectedSystemId').hide();
        $('#fUndelete').hide();
    }else {
              $('#uSelectedSystemId').show();
              $('#fUndelete').show();
    }
} 
```

纯js：

```
function showHideForm(){
    if(document.getElementById('checkboxID').checked){
        document.getElementById("uSelectedSystemId").style.display="none"
        document.getElementById("fUndelete").style.display="none"
    }else{
        document.getElementById("uSelectedSystemId").style.display="block"
        document.getElementById("fUndelete").style.display="block"
    }
} 
```

# xcode - 我是否必须手动释放（使用 ARC）目标视图控制器？

> ID：15358779
> 
> 赞同：0
> 
> 时间：2013-03-12T10:31:37.733
> 
> 标签：xcode, memory-management, automatic-ref-counting

在我的程序中，我经常需要手动设置一个目标视图控制器，以便我可以用数据填充它。这很好用，但是当我在源控制器和目标控制器之间来回查看 Profiler 时，我的分配量猛增。我正在使用 ARC。我知道这也可能是我在那个目的地设置东西的方式，但我也想知道——当我回到源控制器时，我是否不必摆脱我设置的目标控制器？

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    //Pull which topic the user clicked on from the table view
    NSIndexPath *myIndexPath = [self.myTableView2
                                indexPathForSelectedRow];
    NSArray * topicArray = [[myTopicLoader arrayOfFinishedCategories] objectAtIndex:myIndexPath.section];

    //Create a temporary NSObject Topic to send to the detail view controller
    //Set it to the Topic in the array based on which row the user clicked on
    //(The tableview was populated with the same array)
    topic *tempTopic = [topicArray objectAtIndex:myIndexPath.row];

    //If they clicked on one that has details to show and is purchased, load the detail view controller
    if ([segue.identifier isEqualToString:@"showTopicDetails"]) {
        //Set up a destination view controller
        topicDetailController *topicDetailController = [segue destinationViewController];

        //Set its topic to the temporary one we set up here
        topicDetailController.currentTopic = tempTopic;
    }else {
           //If they clicked on one that does not have details because it is not yet purchased, load
           //the purchase view controller instead
           purchaseDetailController *purchaseDetailController = [segue destinationViewController];

           //And set its topic to the temporary one we set up here.
           purchaseDetailController.currentTopic = tempTopic;

    }

} 
```

我的大部分超额分配是：

29717 0xaa8a600 __NSArrayM 00:28.703.069 • 32 UIKit _UITapRecognizerCommonInit

或者

1069 0x15d5e650 Malloc 32 字节 00:29.254.799 • 32 libsystem_sim_blocks.dylib _Block_copy_internal

我猜这可能来自我正在使用的一些预先构建的东西（书籍控制器和谷歌的 XML 解析器）。但我想检查一下是否可能没有摆脱目标控制器与它有关。

# c# - 具有队列管理的服务层中的多语言电子邮件模板

> ID：15358783
> 
> 赞同：3
> 
> 时间：2013-03-12T10:31:43.737
> 
> 标签：c#, html, asp.net-mvc, razor, html-email

为多语言 MVC 网站存储 HTML 和文本电子邮件模板的最佳选择是什么？

*   资源（EN/PT/FR 每种语言都有一个资源 - 它仍然将语言与服务层区分开来？）
*   数据库（每种语言一列）
*   HtML 文件 - 每种语言一个文件（file-PT.html、file-EN.html）
*   模板.tt

目标是尽可能快地发送电子邮件，以减少用户等待的延迟。

我还认为在服务层中发送比在 Web 层中发送要好得多。

由于链接是绝对的，我认为视图的需求不是很有用，但是作为邮政的解决方案是一种选择吗？或者只是简单地从数据库或文件中获取 HTML 字符串，用自定义值替换字符串标签并发送到 IIS SMTP 以处理队列？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:33:26.107

在我的项目中，我将模板存储在 .cshtml 文件的服务层中以突出显示语法。我使用每种文化的文件，即 TemplateName.[en].cshtml。我使用[Razor 引擎](http://razorengine.codeplex.com/)来渲染模板。完美运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:18:31.580

如果您使用云或任何分布式环境来托管您的应用程序。那么最好的想法是使用服务层来发送数据。因此，您可以使用队列将工作委托给发送节点。它会提高你的表现。关于模板的来源，您需要考虑如何对模板的格式更改做出反应。我认为最好使用数据库并将它们缓存在服务端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T13:20:12.657

我会为您提供将电子邮件模板存储在具有以下表结构的数据库中：

```
CREATE TABLE emailTemplates (
    id INT IDENTITY(1, 1),
    body VARCHAR(max),
    title VARCHAR(max),
    lcid INT,
    /*and maybe tmplType INT if you have different template types*/
) 
```

这将允许您简单地选择模板传递`Thread.CurrentThread.CurrentCulture.LCID`（甚至任何所需的 culure id）[和 tmplType] 作为参数 [s] 来查找所需的模板。您还可以使用管理界面（如果有的话）编辑和创建新模板或将其插入数据库，而无需更改任何代码并将其重新部署到服务器。当然，您可以将模板表映射到一些`List<your_template_class>`并将其存储在 Cashe 中，这样您就不需要每次都将其从 db 中拉出。

# actionscript-3 - 如何在函数中制作 null MovieClip？

> ID：15358787
> 
> 赞同：1
> 
> 时间：2013-03-12T10:31:52.387
> 
> 标签：actionscript-3

如何在函数中制作 null MovieClip？我试过：

```
function one()
{
var mc:MovieClip=new MovieClip();
two(mc);
}

function two(mcref:MovieClip)
{
mcref=null;
} 
```

但不幸的是，它不起作用，并且“mc”在函数后不为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:54:49.927

它应该工作，试试这个：

```
package 
{
import flash.display.MovieClip;

public class Main extends MovieClip
{
    public var mc:MovieClip;

    public function Main():void 
    {
        mc = new MovieClip();
        trace("mc : " , mc);

        makeMovieClipNull();
        trace("mc 2: ", mc);
    }

    public function makeMovieClipNull():void
    {
        mc=null;
    }

}

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:55:59.440

这是范围链问题。如果您将 MovieClip 传递给`two()`函数。实际上没有传递参考值。所以你不能访问函数中的引用对象。使值有效或仅在函数范围内执行。

阅读：[AS3 Funciton](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f54.html)

> 每当函数开始执行时，都会创建许多对象和属性。首先，创建一个称为激活对象的特殊对象，它存储参数和函数体中声明的任何局部变量或函数。您不能直接访问激活对象，因为它是一种内部机制。其次，创建一个范围链，其中包含 Flash Player 或 Adob​​e AIR 检查标识符声明的对象的有序列表。每个执行的函数都有一个存储在内部属性中的作用域链。对于嵌套函数，作用域链从它自己的激活对象开始，然后是其父函数的激活对象。链以这种方式继续，直到它到达全局对象。全局对象是在 ActionScript 程序开始时创建的，

# vb.net - 如何在运行时加载类库 DLL 并使用 VB.NET 运行类函数？

> ID：15358788
> 
> 赞同：3
> 
> 时间：2013-03-12T10:31:53.613
> 
> 标签：vb.net, dll, runtime, .net-assembly

假设我在一个名为 SomeClass 的类库项目中有一个这样的类-

```
Public Class SomeClass
  Public Function DoIt() as String
    Return "Do What?"
  End Function
End Class 
```

我得到一个`SomeClass.dll`我想在运行时从另一个 Windows 窗体应用程序加载的，然后让它调用该`DoIt()`函数并在消息框或其他东西中显示它的值。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:46:11.370

我建议进行`DoIt`共享，因为它不需要类状态：

```
Public Class SomeClass
    Public Shared Function DoIt() as String
        Return "Do What?"
    End Function
End Class 
```

然后调用它很容易：

```
' Loads SomeClass.dll
Dim asm = Assembly.Load("SomeClass")  

' Replace the first SomeClass with the base namespace of your SomeClass assembly
Dim type = asm.GetType("SomeClass.SomeClass")

Dim returnValue = DirectCast(type.InvokeMember("DoIt", _
                                               BindingFlags.InvokeMethod | BindingFlags.Static, _
                                               Nothing, Nothing, {}),
                             String) 
```

如果您无法共享该方法，您可以使用[Activator.CreateInstance](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)创建您的类的实例并将其作为参数传递给[Type.InvokeMember](http://msdn.microsoft.com/en-us/library/66btctbe.aspx)。

[我所有的代码示例都假设 Option Strict On 和 Option Infer On。]

# c++ - 如何获得具有相同姓氏的下一条记录

> ID：15358792
> 
> 赞同：0
> 
> 时间：2013-03-12T10:32:07.893
> 
> 标签：c++, sqlite

我正在尝试根据我的数据库中按字母（升序或降序）顺序的姓氏字段从 sqlite 检索下一条或上一条记录。但是，姓氏不是唯一字段，而且我只能为每个查询检索一条记录（LIMIT 1），因为我正在使用 sqlite 的回调机制，并且我不想为返回的每个可能结果缓冲结果从查询中（除非没有其他选项）。我还有一个名为 customerId 的唯一字段（即行 ID）。

这是我目前使用的语句：

```
stream << "select * from customerTable where LastName >= '" << customerLastName << "' order by LastName asc limit 1"; 
```

我尝试了其他一些陈述，例如：

```
stream << "select * from customerTable where LastName >= '" << customerLastName << "' and CustomerId != " << customerId << " order by LastName asc limit 1"; 
```

但这一条一直在两条同名的记录之间切换。

所以我需要找到一个技巧，无论姓氏是否相同，都能给我下一个（或上一个记录）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:41:33.743

获取所有唯一名称的一种更简单的方法是使用`SELECT DISTINCT`：

```
select distinct LastName from customerTable order by LastName asc 
```

这将为您提供按字母顺序排列的所有唯一名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:43:09.250

如果您坚持使用限制为 1 的查询，并且您仍然希望一个接一个地查询具有相同姓氏的所有记录，那么您可以继续使用第二种方法，即使它有点奇怪。在您查询第二条记录后，`and CustomerId !=`您将不得不查询下一条记录`and CustomerId not in (firstId, secondId)`，依此类推。

但是，你真的不应该那样做。干净的方法是首先准备一个语句（也使用主机变量而不是字符串连接！）然后调用`sqlite_step()`，直到您检索到所有记录。

# sql-server - 如何获取有关架构更新的电子邮件警报？

> ID：15358795
> 
> 赞同：0
> 
> 时间：2013-03-12T10:32:28.277
> 
> 标签：sql-server

当表、视图或存储过程更新（或理想情况下是任何数据库对象）时，是否有一种简单的方法来获取电子邮件警报？SQL Server 是否为此提供了内置函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:43:05.333

您可以使用数据库级触发器和 sp_send_dbmail 过程来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:46:20.433

对此没有内置功能，但您可以尝试结合使用[DDL 触发器](http://msdn.microsoft.com/en-us/library/ms190989%28v=sql.105%29.aspx)和 sp_send_dbmail 来发送电子邮件通知。

为此，您需要为要监视的所有对象创建 DDL 触发器，并在所有这些触发器中包含 sp_send_dbmail 存储过程。

要设置数据库邮件，您需要先通过 SSMS 对其进行配置。[这](http://blog.sqlauthority.com/2008/08/23/sql-server-2008-configure-database-mail-send-email-from-sql-database/)是一篇描述这一点的文章。

# jquery - 从 iframe 内容中获取父元素的属性值

> ID：15358799
> 
> 赞同：4
> 
> 时间：2013-03-12T10:32:35.163
> 
> 标签：jquery, html, ruby-on-rails, iframe

`data-media`如果我在内容中运行脚本，有没有办法获取属性的值`iframe`？

代码如下所示：

```
<div id="myDiv">
    <iframe data-create-resource-url="http://my.domain.url" 
       data-media="Song" 
       frameborder="0" 
       height="41" 
       src="https://different.domain.url" width="366">
     </iframe>
</div> 
```

我已经尝试了很多已经喜欢`window.parent.document`或`top.document`或`window.parent`其他可用解决方案的方法，但似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T10:49:35.207

好吧，您实际上并不需要访问父级。当您在 iframe 中运行脚本时。iframe 当前是 iframe 中脚本的窗口。所以访问窗口元素应该给你所说的`attr`. 试试这个（未测试）：

```
alert($(window).attr('data-media')); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:41:48.533

你试过这个：

```
window.frameElement.getAttribute("data-media"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-29T08:34:28.013

首先，将 ID 或 CLASS 添加到 iframe 元素（例如`id='myframe'`）
然后您可以使用 jquery 访问任何属性：

```
var parent=window.parent.document.getElementById('#myframe'); 
```

现在只需获取您的属性（未测试）：

```
myAttr=$(parent).data("my-data-attribute") or
myAttr=$(parent).attr("myelement") 
```

# sql-server-2008 - 对 nvarchar 数据进行分组，将中文和日文字符显示为问号

> ID：15358801
> 
> 赞同：1
> 
> 时间：2013-03-12T10:32:40.097
> 
> 标签：sql-server-2008

我需要检索表中重复行数（ntext 数据类型）和行数据。此列包含中文和日文字符。一旦转换为 nvarchar(max)，这些字符看起来就像问号。因此，如果在此列上使用 group by，当我需要根据中文或日文消息对问号进行分组时，它会根据问号进行分组。我的查询如下。

```
SELECT Message, COUNT(*) TotalCount
FROM ipi_messagecustomization 
GROUP BY CAST([message] AS varchar(max))  WITH ROLLUP 
HAVING COUNT(*) > 1
ORDER BY COUNT(*) DESC 
```

请帮忙。谢谢大家！！

# android - Android 音频流播放器应用

> ID：15358811
> 
> 赞同：1
> 
> 时间：2013-03-12T10:33:00.647
> 
> 标签：android, audio-streaming

嗨，我正在 android 中开发一个应用程序，它将从 url 流式传输并相应地播放歌曲，但它向我显示**一个错误**

`request time failed: java.net.SocketException: Address family not supported by protocol.`

这是**我想要构建的广播流媒体**。我不知道android音频流部分哪里出错了。请帮忙。

这是我的类文件：
StreamMusic.java

```
import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.URL;

import android.app.ProgressDialog;
import android.app.Service;
import android.content.Context;
import android.content.Intent;

import android.media.AudioManager;
import android.media.MediaPlayer;
import android.os.Binder;
import android.os.Handler;
import android.os.IBinder;
import android.os.Message;

import android.util.Log;

public class StreamMusic extends Service 
{
    private static final String APP = "StreamMusic";

    private static MediaPlayer mediaPlayer = null;
    private static String      STREAM      = "";
    HttpURLConnection connection = null;
    private final Binder binder = new LocalBinder();
    private static String TAG = "TAG";
    private ProgressDialog pd;

    @Override public IBinder onBind(Intent intent) 
    {
        return(binder);
    }

    @Override public void onDestroy() 
    {
        // stop the music
        mediaPlayer.stop();
        mediaPlayer = null;

        super.onDestroy();
    }

    public class LocalBinder extends Binder
    {
        StreamMusic getService() 
        {
            return (StreamMusic.this);
        }
    }

    // called from the main activity
    synchronized public void playPause(Context _c , String _s) 
    {
        if (mediaPlayer == null) 
        {
            // show progress dialog
            pd = ProgressDialog.show( _c , "Raw Audio", "connecting to stream..." , true , true);
            Log.d("mediaplayer synchronized playPause(Context _c, String _s)--->" , "SAMPLE");

            // not playing -> load stream
            STREAM = _s;
            loadStream(STREAM);
        }
        else if (mediaPlayer.isPlaying())
        {
            // playing -> pause
            mediaPlayer.pause();
        } 
        else 
        {
            // paused -> resume
            mediaPlayer.start();
        }
    }

    // load the stream in another thread
    private void loadStream(final String stream) 
    {
        // run the stream in its own thread
        Runnable r = new Runnable() 
        {
            public void run()
            {
                try 
                {

                Log.d("mediaplayer loadStream(String STREAM)--->" , "SAMPLE");
                    mediaPlayer = new MediaPlayer();
                    //mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
                    mediaPlayer.setDataSource(stream);
                    mediaPlayer.prepare();
                    mediaPlayer.start();
                    Log.d("mediaplayer AFTER START loadStream(String STREAM)--->" , "SAMPLE");
                    // dismiss the dialog
                    handler.sendEmptyMessage(0);
                }
                catch (IllegalStateException e) 
                {
                    Log.e(APP, "error loading stream " + STREAM + ".", e);
                    return;
                } catch (IllegalArgumentException e) 
                {
                    e.printStackTrace();
                } catch (IOException e) 
                {
                    e.printStackTrace();
                }
            }
        };

        new Thread(r).start();
    }

    // a handler to dismiss the dialog once mp starts
    private Handler handler = new Handler()
    {
        @Override public void handleMessage(Message msg)
        {
            pd.dismiss();
        }
    };
}

and second is RawAudio.java

import android.app.Activity;

import android.content.ComponentName;
import android.content.Intent;
import android.content.ServiceConnection;

import android.os.Bundle;
import android.os.IBinder;

import android.util.Log;

import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class RawAudio extends Activity implements OnClickListener 
{
    private static final String APP = "RawAudio";

    // our background player service
    private StreamMusic streamMusic = null;

    @Override public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        //streamMusic = new StreamMusic();

        // setup ui
        setContentView(R.layout.main);

        // setup play/pause button
        Button ppButton = (Button)findViewById(R.id.playpause);
        ppButton.setOnClickListener(this);

        // connect/create our service
        connectToService();
    }

    @Override public void onDestroy() 
    {
        // disconnect from our service
        unbindService(onService);

        while (streamMusic != null) 
        {
            try {
                Thread.sleep(250);
            }
            catch (InterruptedException e)
            {
                Log.e(APP, "sleep command interrupted", e);
            }
        }

        super.onDestroy();
    }

    public void onClick(View v) 
    {
        if (streamMusic != null) 
        {
            EditText t = (EditText)findViewById(R.id.entry);
            String   s = t.getText().toString().trim();

            // send play/pause command
            streamMusic.playPause(this, s);
        } 
        else 
        {
            Log.d(APP, "service not bound yet.");
        }
    }

    // establish the connection
    private void connectToService() 
    {
        try 
        {
            bindService(new Intent(this, StreamMusic.class), onService, BIND_AUTO_CREATE);
        }
        catch (Exception e)
        {
            Log.e(APP, "error binding to service.", e);
        }
    }

    // once connected, set up the interface object
    private ServiceConnection onService = new ServiceConnection() 
    {
        public void onServiceConnected(ComponentName className, IBinder iBinder)
        {
            streamMusic = ((StreamMusic.LocalBinder)iBinder).getService();
        }

        public void onServiceDisconnected(ComponentName className) 
        {
            streamMusic = null;
        }
    };
} 
```

# php - PHP：高级 array_intersect()

> ID：15358814
> 
> 赞同：1
> 
> 时间：2013-03-12T10:33:09.680
> 
> 标签：php, array-intersect

根据我的最后一个[问题](https://stackoverflow.com/questions/15352507/php-obtain-common-values-in-2-huge-arrays)，如何将以下 2 个数组与`array_intersect()`？我想将第一个数组的值与第二个数组的内部数组的`name`值进行比较。

```
// $arrayA
[0] => 'apple',
[1] => 'pineapple',
[2] => 'orange',
...
[299,999] => 'banana' 
```

和

```
// $arrayB
[0] => array('name' => 'bamboo', 'price' => 123),
[1] => array('name' => 'banana', 'price' => 123),
[2] => array('name' => 'boy', 'price' => 123),
[3] => array('name' => 'ball', 'price' => 123),
[4] => array('name' => 'balloon', 'price' => 123),
[5] => array('name' => 'bazooka', 'price' => 123), 
```

我的预期结果将在一个数组中，包含以下结果：

```
[1] => array('name' => 'banana', 'price' => 123), 
```

我目前的解决方法是仅使用内部数组的`name`值克隆第二个数组。IE

```
$arrayB_clone = array();
foreach($arrayB as $inner_array) {
  $arrayB_clone[] = $inner_array['name'];
}
$result_index = array_intersect($arrayB_clone, $arrayA);
$result = array();
foreach($result_index as $idx => $v) {
  $result[] = $arrayB[$idx]; // value $v is not important now 
}
var_dump($result); 
```

但由于我的数组有超过 300,000 条记录，克隆时会消耗大量内存和资源。有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:38:10.837

您应该翻转`$arrayA`以便查找更快。然后简单地遍历 B 并添加匹配的结果：

```
$mapA = array_flip($arrayA);

$results = array();

foreach ($arrayB as $item) {
    if (isset($mapA[$item['name']])) {
        $results[] = $item;
    }
} 
```

或者：

```
$results = array_filter($arrayB, function($item) use ($mapA) {
    return isset($mapA[$item['name']]);
}); 
```

# python - 使用python匹配条目

> ID：15358815
> 
> 赞同：3
> 
> 时间：2013-03-12T10:33:11.507
> 
> 标签：python, parsing, correlation

我已经解析了两个日志，因此只有 CVE 编号写入文本文件，因此它们显示为一个列表。这是输出的一部分；

```
NeXpose Results: CVE-2007-6519
NeXpose Results: CVE-1999-0559
NeXpose Results: CVE-1999-1382
Snort results: CVE-1999-0016
Snort results: CVE-1999-0016
Snort results: CVE-1999-0016
Snort results: CVE-1999-0016
Snort results: CVE-1999-0016 
```

整个文件都是这样。现在，我想让我的代码对 CVE 编号进行加密，并查看是否有任何 NeXpose CVE 与 snort CVE 匹配，因为我正在研究将两者关联起来。这是我的代码；

```
#!/usr/bin/env python
nexpose = {}
snort = {}

CVE = open("CVE.txt","r")
cveWarning = open("Warning","w")

for line in CVE.readlines():
        list_of_line = line.split(' ')

    if "NeXpose" in list_of_line[0]:
        nexResults = list_of_line[2]
        #print 'NeXpose: ', nexResults

    if "Snort" in list_of_line[0]:
        cveResults = list_of_line[2]
        #print 'Snort: ', cveResults

a_match = [True for match in nexResults if match in cveResults]
print a_match 
```

如果有更好的方法可以做到这一点，请告诉我，因为我认为我可能会使事情过于复杂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:42:06.790

你考虑过 Python 集吗？

```
#!/usr/bin/python

lines = open('CVE.txt').readlines()
nexpose = set([l.split(':')[1].strip() for l in lines if l.startswith('NeXpose')])
snort   = set([l.split(':')[1].strip() for l in lines if l.startswith('Snort')])

# print 'Nexpose: ', ', '.join(nexpose)
# print 'Snort  : ', ', '.join(snort)

print 'CVEs both in Nexpose and Snort  : ', ', '.join(snort.intersection(nexpose)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:41:22.377

我建议使用 python 集。

```
nex = set()
sno = set()
for line in CVE.readlines():
    list_of_line = line.split(' ')

    if(list_of_line[0]=="NeXpose"):
        nex.add(list_of_line[2])
    if(list_of_line[0]=="Snort"):
        sno.add(list_of_line[2])

inboth = sno.intersection(nex) 
```

# javascript - 如何手动收集 jQuery 序列？

> ID：15358827
> 
> 赞同：4
> 
> 时间：2013-03-12T10:33:38.680
> 
> 标签：javascript, jquery

我有两个 jQuery 对象：

```
var one = $("#one");
var two = $("#two"); 
```

我正在寻找一种方法来编译另一个 jQuery 对象，例如：

```
var oneAndTwo = $(one, two); // pseudo-function 
```

所以我可以像得到它们一样使用它`$("#one, #two")`。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T10:34:45.510

解决方案是使用[`add()`](http://api.jquery.com/add/)：

```
var oneAndTwo = one.add(two); 
```

# amazon-web-services - 我可以使用 cloud-init 来安装和配置 chef，但不能实际运行它吗？

> ID：15358830
> 
> 赞同：1
> 
> 时间：2013-03-12T10:33:39.933
> 
> 标签：amazon-web-services, chef-infra, amazon-cloudformation, cloud-init

我有一个有效的 CloudFormation 模板，其中包含用户数据和 cloud-init，成功连接并构建到托管的 Chef 服务器。我在 AWS EC2 库存图像上使用 Ubuntu 12.04。

出于我自己的目的，我想继续这样做，但是

1)***不***将 Chef 配置为作为服务运行，仅按需运行（“sudo chef-client”）

...或者，或补充这一点

2) 像以前一样执行整个 Chef 安装/配置，但**只运行一次**，而不是作为服务

我找不到合适的钩子，如果有的话，可以通过 cloud-init 示例来实现这一点。我想知道 Chef 是否有一些设置允许这个用例？我尝试使用 update-rc.d 禁用 chef-client 但这不起作用，因为它已经在运行。

以下是与 EC2 实例关联的 CF 模板中的用户数据片段：

```
#cloud-config

resize_rootfs: true
apt_update: true
byobu_by_default: disable
manage_etc_hosts: false
disable_root: true
timezone: Europe/London
package_upgrade: true
package_reboot_if_required: true

apt_sources:
  - source: "deb http://apt.opscode.com/ $RELEASE-0.10 main"
    key: |
      -----BEGIN PGP PUBLIC KEY BLOCK-----
      Version: GnuPG v1.4.9 (GNU/Linux)
      xxxx truncated xxxxx
      -----END PGP PUBLIC KEY BLOCK-----

chef:
  install_type: packages
  server_url: xxxxxx
  node_name: xxxxx
  validation_name: xxxxxx
  validation_key: |
    -----BEGIN RSA PRIVATE KEY-----
    xxxx truncated xxxxx
    -----END RSA PRIVATE KEY-----
  run_list:
    - role[my-server]
  environment: production

output: {all: '| tee -a /var/log/cloud-init-output.log'} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T03:06:03.197

最简单的方法`cloud-init`是编写一个用户数据脚本来执行 Chef 安装、配置和客户端运行（这些脚本默认由 root 运行，因此您不需要`sudo`）。

`cloud-init`输入通过它们的 MIME 类型来区分，而这些类型又由它们的第一行推断出来。正如[文档](https://help.ubuntu.com/community/CloudInit)所示，您所拥有的就是其中的`text/cloud-config`一部分。您还需要一个“用户数据脚本”，它只是一个以 shebang 开头的部分`#!`，或者具有特定的 MIME 内容类型。考虑到这一点，您的流程是这样的：

1.  编写一个脚本来处理 chef 的安装和`chef-client`运行。它可以是`bash`或`sh`任何可执行的脚本语言。

2.  使用您现有的 cloud-config 脚本，并从中剥离出主厨部分。

3.  使用[cloud-init 文档](https://help.ubuntu.com/community/CloudInit)[`write-mime-multipart`](http://bazaar.launchpad.net/~ubuntu-branches/ubuntu/saucy/cloud-utils/saucy/view/head:/bin/write-mime-multipart)中引用的脚本将您的 cloud-config 部分和 user-script 部分连接到一个多部分 MIME 有效负载中。

4.  将整个 MIME 消息放入您的云形成模板中，我假设这是您根据代码中的引号使用的内容。cloud-init（以及技术上的 cfn-init，AWS 编写的 CloudFormation 处理器）将负责其余的工作。

完成一次之后就很容易了。按照文档中的多部分示例，您将很快看到发生了什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-04T11:11:21.783

根据源代码（但不是文档！）， chef-client 只有在“ *install_type: gems* ”时才会运行。在 v.0.7.7 之前你无法控制它。

对于那些真正想要运行的人，在 cloud-init 0.7.7 中添加了选项 'exec: true' ，对于“ *install_type: gems* ”设置为 true ，对于其他设置为 false 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-23T21:51:51.157

是的，您可以使用[cloud-init](https://cloudinit.readthedocs.io)来安装和配置 Chef，但根本不运行它，还可以像以前一样执行整个 Chef 安装/配置，但只运行一次，而不是作为守护进程。

1.  根据 cloud-init Chef 模块[文档](https://cloudinit.readthedocs.io/en/latest/topics/modules.html#chef)，您可以使用`exec`config 键来控制是否运行 chef：

> exec：运行或不运行 chef 的布尔值（默认为 false，除非请求安装 gem，然后默认为 true）

例子：

```
chef:
  # [other options]
  exec: false 
```

2.  根据[源代码](https://git.launchpad.net/cloud-init/tree/cloudinit/config/cc_chef.py)，传递给的[默认参数](https://git.launchpad.net/cloud-init/tree/cloudinit/config/cc_chef.py#n137)[`chef-client`](https://docs.chef.io/ctl_chef_client.html#options)是`['-d', '-i', '1800', '-s', '20']`，它将 chef-client 作为守护进程运行，间隔为 1800 秒，“播放”为 20 秒。要只运行一次，您可以使用[未记录`exec_arguments`](https://git.launchpad.net/cloud-init/tree/cloudinit/config/cc_chef.py#n266)的配置键指定一组空的 exec 参数，这将导致 chef-client 只运行一次然后退出，而不会被守护为重复的后台进程。

例子：

```
chef:
  # [other options]
  exec_arguments: '' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-15T09:19:46.957

您可以安装/配置 chef-client 并从 cfn-init 运行一次，这将在 cloud-init 中执行，如下所示。有关 cloudfromation 模板和调用[cfn-init](http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-init.html)元数据，请参阅 aws 文档。

第 1 步：使用元数据中的文件部分将 chef-client 安装程序复制到节点。

```
"files" : {
"c:/chef-client-12.04.exe" : {
"sorce" : "https://s3:link to file "
},
"client.rb" :{
"content":"..."}
"validation.pem":{..}
} 
```

第 2 步：添加代码以执行安装程序以在云形成中安装厨师。

```
"commands": {
"1-install-chef": { 
"command":"msiexec /qn /i d:\\yourFolder\\chef-client-12.04.exe     ADDLOCAL=\"ChefClientFeature,ChefServiceFeature\"",
"waitAfterCompletion" :"1"
 }
 } 
```

第 3 步：从 cloud-init 运行一次 chef 客户端

```
"commands": {
"run-chef-client": { 
"command":"chef-client >c:\cheflogfile.log",
"waitAfterCompletion" :"1"
 }
 } 
```

请注意：如果您不想将 chef-client 配置为服务，请从安装部分中删除 ADDLOCAL=\"ChefClientFeature,ChefServiceFeature\"。

请参阅 cfn-init 链接了解确切的 json 语法。

# php - 将 Wordpress 长文本值转换为有效日期

> ID：15358831
> 
> 赞同：1
> 
> 时间：2013-03-12T10:33:51.003
> 
> 标签：php, mysql, date, type-conversion

我是新的wordpress。并在 Wordpress、PHP 和 MYSQL 中工作。我有一个数据库表，其中所有凭证到期日期都以长文本格式保存，如下所示：

```
 meta_id  post_id     meta_key        meta_value
        446     405     _end_time           1362483186
        460     411     _end_time       1363046400
        474     413     _end_time       1362787200
        488     418     _end_time       1363392000
        503     420     _end_time       1363219200 
```

无论如何我可以将元值从 Longtext 转换为日期，以便我可以将它与用户输入（日期）进行比较？请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:43:37.493

您的长文本格式是时间戳，使用[date](http://www.php.net/manual/function.date.php)将其转换为 String ：

```
$timestamp = 1362483186;
echo date('m d Y', $timestamp);
//With 1362483186 it'll give 03 05 2013 (month day year)
//See the php docs for more format types 
```

如果您需要与实际时间进行比较，另请参阅[时间函数。](http://www.php.net/manual/function.time.php)

# c# - C# 声明另一个类的方法

> ID：15358832
> 
> 赞同：-1
> 
> 时间：2013-03-12T10:33:52.183
> 
> 标签：c#, methods

以下是我遇到的问题，特别是部分有 ** 。我想在打开 ImageViewer 时调用方法“toolStripButton1_Click()”。就目前而言，当 ImageViewer 打开时，所选图像不会随之打开。我已经公开了这个方法，希望能解决这个问题，但我没有。

```
public partial class MediaPlayer : Form
{

    public ImageViewer iv;
    public AudioPlayer ap;
    public VideoPlayer vp;

    public MediaPlayer()
    {
        InitializeComponent();
    }

    private void openToolStripMenuItem_Click(object sender, EventArgs e)
    {
        if (ofdSelectMedia.ShowDialog() == DialogResult.OK)

            switch(ofdSelectMedia.FilterIndex){
                **case 1: new ImageViewer().Show(); public void toolStripButton1_Click(object sender, EventArgs e);** 
                    break;
                case 2: new AudioPlayer().Show();
                    break;
                case 3: new VideoPlayer().Show();
                    break;
       }
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:39:33.123

尝试这个..

```
public void toolStripButton1_Click(object sender, EventArgs e)
{
somemethod();
}

void somemethod()
{
 //your code which u want to execute on click of a button
} 
```

在 case1 调用方法`somemethod();`而不是调用事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:39:55.920

将代码从 toolStripButton1_Click 方法移动到一个函数，并从 case 子句和 toolStripButton1_Click 处理程序中调用它。

```
private void DoIt()
{
    // The code from the toolStripButton1_Click handler
}    

private void toolStripButton1_Click(object sender, EventArgs e)
{
    DoIt();
}

private void openToolStripMenuItem_Click(object sender, EventArgs e)
{
    if (ofdSelectMedia.ShowDialog() == DialogResult.OK)

        switch(ofdSelectMedia.FilterIndex){
            case 1: new ImageViewer().Show(); 
                DoIt();
                break;
            case 2: new AudioPlayer().Show();
                break;
            case 3: new VideoPlayer().Show();
                break;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:42:06.613

您正在做的是方法声明，而不是方法调用。尝试

```
switch(ofdSelectMedia.FilterIndex){
    case 1: new ImageViewer().Show(); 
        toolStripButton1_Click(sender, e);
        break;
    case 2: new AudioPlayer().Show();
        break;
    case 3: new VideoPlayer().Show();
        break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:42:24.377

使用 PerformClick() 如下所示

```
public partial class MediaPlayer : Form
{

public ImageViewer iv;
public AudioPlayer ap;
public VideoPlayer vp;

public MediaPlayer()
{
    InitializeComponent();
}

private void openToolStripMenuItem_Click(object sender, EventArgs e)
{
    if (ofdSelectMedia.ShowDialog() == DialogResult.OK)

        switch(ofdSelectMedia.FilterIndex){
            case 1: 
                new ImageViewer().Show();
                toolStripButton1.PerformClick();
                break;
            case 2: new AudioPlayer().Show();
                break;
            case 3: new VideoPlayer().Show();
                break;
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T10:43:38.153

*听起来*你打算像这样：

```
case 1:
    var imgViewer = new ImageViewer();
    imgViewer.Show();
    imgViewer.toolStripButton1_Click(sender, e);
    break; 
```

虽然就个人而言，我会重构`ImageViewer`有一个`ShowImage`方法或类似的方法，这样就变成了：

```
case 1:
    var imgViewer = new ImageViewer()
    imgViewer.Show();
    imgViewer.ShowImage();
    break; 
```

你`ImageViewer`有：

```
public void ShowImage() {...}

void openToolStripMenuItem_Click(object sender, EventArgs e) {
    ShowImage();
} 
```

# css - 使用 CSS 使按钮出现在 Chrome / Webkit 浏览器中的选择下拉菜单上

> ID：15358834
> 
> 赞同：2
> 
> 时间：2013-03-12T10:34:06.503
> 
> 标签：css, google-chrome, button, drop-down-menu, webkit

所以我在 HTML 中有一个简单的下拉菜单，如下所示：

```
<select name="menu" class="menu">
    <option value="a">A</option>
    <option value="b">B</option>
    <option value="c">C</option>
</select> 
```

我用这个 CSS 设计它：

```
.menu {
    font-size: 10px;
    font-family: Arial, sans-serif;
    padding-top: 2px;
    position: relative;
    bottom: 2px;
    outline: none;
    border-bottom-width: 1px !important;
    border-top-style: none !important;
    border-right-style: none !important;
    border-bottom-style: solid !important;
    border-left-style: none !important;
    border-bottom-color: #999 !important;
    width:200px;
    -webkit-border:0;
    -webkit-appearance: button;
} 
```

这在 Firefox 和 Internet Explorer 中呈现我想要的效果 - 下拉菜单仅在底部有一个 1px 的边框，并且在右侧有下拉菜单按钮（带有小向下箭头的灰色按钮）。

但在 Chrome 或其他 WebKit 浏览器（如 Safari）中，该按钮不会出现。

我一直在`-webkit-appearance`玩弄规则，玩弄在这里找到的属性[http://css-infos.net/property/-webkit-appearance](http://css-infos.net/property/-webkit-appearance)但收效甚微。

*   如果没有此规则，下拉菜单会在其周围呈现一个框，并在右侧显示按钮。

*   使用此规则，下拉菜单仅在底部呈现 1px 边框，但右侧没有按钮。

我的问题是，如何让这个下拉菜单像在 Firefox 中一样在 Chrome 中呈现，按钮在右侧，底部只有一个 1px 边框？

这是一个 jsFiddle，您可以自己查看：http: [//jsfiddle.net/tkFpe/3/](http://jsfiddle.net/tkFpe/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:13:26.493

您可以使用所有白色的边框，但底部有其他颜色的正确下拉菜单。检查这个小提琴[jsfiddle.net/LGwEd/3](http://jsfiddle.net/LGwEd/3)。

```
.menu { 
    font-size: 10px; 
    font-family: Arial, sans-serif; 
    padding-top: 2px; 
    position: relative; 
    bottom: 2px; 
    outline: none; 
    width:200px; 
    border:0; 
    appearance: menulist-button; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:09:24.800

删除 -webkit 部分，只使用边框：0 和外观：按钮；

这使它对我有用：Chrome 25.0 和 Safari：6.0.2

# ibm-mobilefirst - IBM Worklight Studio 5.0.5 | 在启动期间挂断

> ID：15358837
> 
> 赞同：2
> 
> 时间：2013-03-12T10:34:14.217
> 
> 标签：ibm-mobilefirst

![在此处输入图像描述](../Images/b09ad33e6400d923d4d167571fe8236e.png)

IBM Worklight Studio 5.0.5 曾经工作到某个时候，但不知何故它现在没有启动并且在两者之间挂起然后必须从任务管理器中强制关闭。

关闭 Worklight 后，可以看到另一个屏幕，其中提供有关日志的详细信息，我对 Worklight 相当陌生，曾经使用 ADT Eclipse 并使用 ADT 遇到一些问题，这就是转向 Worklight Studio 但无法运行的原因现在。

![在此处输入图像描述](../Images/cdfbd8e210333ec3fd2fc72cfbe49360.png)

希望得到一些指示，如果您需要更多相同的细节，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T13:42:52.317

您能否查看 /.metadata/.log 文件并查看是否有任何其他有用的信息？Worklight 的先前版本中存在一个错误，其中来自 Worklight 的 commons.io 包会与来自 ADT 的版本冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:42:29.313

我已经发生过很多次了。您必须清除项目元数据或创建新工作区并再次导入文件夹。

这是一项可怕的工作，而且效率极低。

为什么会这样？

根据我的经验，如果在您使用工作区时发生了 Eclipse（比如强制关闭或不正确关闭），它会弄乱工作区/元数据/或其中的某些东西。有时我关闭了我的计算机并且不允许 eclipse 完全关闭，这导致了同样的问题。在那之后，那个特定的工作区根本就不会打开。我将不得不创建一个新的工作区并将项目重新导入。

尝试创建一个新的工作区。（这可能是插件尝试加载 ADT 或其他组件的方式）。

我遇到了 Worklight 的两个版本（插件和完整的 Studio）的问题。我希望这可以解决问题，所以您至少知道该怎么做。我真的认为它需要修复。伊丹，这个具体的崩溃问题有票吗？

# php - 消息“$_FILES 数组为空”的异常

> ID：15358838
> 
> 赞同：-2
> 
> 时间：2013-03-12T10:34:17.623
> 
> 标签：php, magento-1.7

在自定义模块中出现以下错误我无法理解如何解决这个问题......提前致谢

```
2013-03-12T08:56:16+00:00 ERR (3): 
exception 'Exception' with message '$_FILES array is empty' in D:\wamp\www\magentotest\lib\Varien\File\Uploader.php:467
Stack trace:
#0 D:\wamp\www\magentotest\lib\Varien\File\Uploader.php(149): Varien_File_Uploader->_setUploadFileId('thumbnail')
#1 D:\wamp\www\magentotest\app\code\core\Mage\Catalog\Model\Category\Attribute\Backend\Image.php(57): Varien_File_Uploader->__construct('thumbnail')
#2 [internal function]: Mage_Catalog_Model_Category_Attribute_Backend_Image->afterSave(Object(Mage_Catalog_Model_Category))
#3 D:\wamp\www\magentotest\app\code\core\Mage\Eav\Model\Entity\Abstract.php(657): call_user_func_array(Array, Array)
#4 D:\wamp\www\magentotest\app\code\core\Mage\Eav\Model\Entity\Abstract.php(1648): Mage_Eav_Model_Entity_Abstract->walkAttributes('backend/afterSa...', Array)
#5 D:\wamp\www\magentotest\app\code\core\Mage\Catalog\Model\Resource\Category.php(235): Mage_Eav_Model_Entity_Abstract->_afterSave(Object(Mage_Catalog_Model_Category))
#6 D:\wamp\www\magentotest\app\code\core\Mage\Eav\Model\Entity\Abstract.php(1124): Mage_Catalog_Model_Resource_Category->_afterSave(Object(Mage_Catalog_Model_Category))
#7 D:\wamp\www\magentotest\app\code\core\Mage\Core\Model\Abstract.php(318): Mage_Eav_Model_Entity_Abstract->save(Object(Mage_Catalog_Model_Category))
#8 D:\wamp\www\magentotest\app\code\core\Mage\Catalog\data\catalog_setup\data-install-1.6.0.0.php(53): Mage_Core_Model_Abstract->save()
#9 D:\wamp\www\magentotest\app\code\core\Mage\Core\Model\Resource\Setup.php(624): include('D:\wamp\www\mag...')
#10 D:\wamp\www\magentotest\app\code\core\Mage\Core\Model\Resource\Setup.php(391): Mage_Core_Model_Resource_Setup->_modifyResourceDb('data-install', '', '1.6.0.0.14')
#11 D:\wamp\www\magentotest\app\code\core\Mage\Core\Model\Resource\Setup.php(289): Mage_Core_Model_Resource_Setup->_installData('1.6.0.0.14')
#12 D:\wamp\www\magentotest\app\code\core\Mage\Core\Model\Resource\Setup.php(269): Mage_Core_Model_Resource_Setup->applyDataUpdates()
#13 D:\wamp\www\magentotest\app\code\core\Mage\Core\Model\App.php(351): Mage_Core_Model_Resource_Setup::applyAllDataUpdates()
#14 D:\wamp\www\magentotest\app\Mage.php(683): Mage_Core_Model_App->run(Array)
#15 D:\wamp\www\magentotest\index.php(87): Mage::run('', 'store')
#16 {main} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:52:16.503

如果没有代码示例，创建文件上传表单时的一个常见错误是忘记将 enctype 设置为 multipart/form-data。使用 Magento 时创建具有正确设置此属性的表单的示例代码：

```
$form = new Varien_Data_Form(array(
        'id' => 'edit_form',
        'action' => $this->getUrl('*/*/save', array('id' => $this->getRequest()->getParam('id'))),
        'method' => 'post',
        'enctype' => 'multipart/form-data'
    )
); 
```

参考： http: [//www.magentocommerce.com/wiki/5__-_modules_and_development/admin/how_to_create_pdf_upload_in_backend_for_own_module](http://www.magentocommerce.com/wiki/5_-_modules_and_development/admin/how_to_create_pdf_upload_in_backend_for_own_module)

# objective-c - DISPATCH_QUEUE 或 NSThread

> ID：15358839
> 
> 赞同：0
> 
> 时间：2013-03-12T10:34:17.550
> 
> 标签：objective-c, xcode

我有两个步骤需要一个一个完成：

1- 从 Web 下载 XML 数据并存储到文档文件夹

2-将 XML 数据从 Document 文件夹重新加载到表格并显示

由于下载过程有点长，我总是把表格空白。

我应该在这里使用什么方法来确保所有数据都下载然后最后重新加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:38:30.833

通常的解决方案是显示一些微调器，在后台队列中下载数据，然后在主队列中更新 UI：

```
[self showDownloadProgress];
dispatch_async(dispatch_get_global_queue(0, 0), ^{
    [self downloadXMLData];
    dispatch_async(dispatch_get_main_queue(), ^{
        [self hideDownloadProgress];
        [tableView reloadData];
    });
}); 
```

# php - 更新到 3.5.1 后，wordpress 小部件拖放不起作用

> ID：15358840
> 
> 赞同：0
> 
> 时间：2013-03-12T10:34:18.073
> 
> 标签：php, wordpress

我在我的网站上使用带有 wordpress 的 ata-pp5 主题，最近在我将 wordpress 更新到 3.5.1 之后，现在小部件区域中的拖放功能不起作用..，我已经尝试添加 Google Libraries 插件，但它也没有工作，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:58:05.880

***你有没有尝试过：***

=> 停用所有插件以查看是否可以解决问题。如果可行，请一一重新激活插件，直到找到有问题的插件。

=>通过 FTP 或 PhpMyAdmin[重置插件文件夹。](http://codex.wordpress.org/FAQ_Troubleshooting#How_to_deactivate_all_plugins_when_not_able_to_access_the_administrative_menus.3F)有时，一个明显不活动的插件仍然会导致问题。

我认为这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:43:15.603

这是因为一些有缺陷的插件.. 有这个问题的修复和它很容易遵循的方法。这是解决方案 [http://www.youtube.com/watch?v=1UY0u-aZb-k](http://www.youtube.com/watch?v=1UY0u-aZb-k)

# windows-phone-7 - 将 generic.xaml 分成几个文件

> ID：15358848
> 
> 赞同：2
> 
> 时间：2013-03-12T10:34:48.697
> 
> 标签：windows-phone-7, xaml, windows-phone-8

我在 Windows Phone 项目中得到了 generic.xaml 文件，它变得太大了。如何将 generic.xaml 划分为多个文件？

我知道`<ResourceDictionary.MergedDictionaries>`但是，我不能让它工作。项目编译，但是当 Page 尝试解析 xaml 资源时出现运行时异常。

我试过了：

```
<ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="WatermarkedPinBox.xaml"/>
</ResourceDictionary.MergedDictionaries> 
```

请帮帮我，我不喜欢大资源文件。很难使它们的结构保持良好状态。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-10T17:42:17.013

您可以使用`MergedDictionaries`拆分`Generic.xaml`文件。看看这个例子：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mscorlib="clr-namespace:System;assembly=mscorlib">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="/YourProjectName;component/Themes/YourSecondResourceFileName.xaml" />
        <ResourceDictionary Source="/YourProjectName;component/Themes/YourThirdResourceFileName.xaml" />
    </ResourceDictionary.MergedDictionaries>

</ResourceDictionary> 
```

`Build Action`对于 YourSecondResourceFileName.xaml 和 YourThirdResourceFileName.xaml 必须设置为`Page`.

# php - 从 mysql db 绘制饼图

> ID：15358850
> 
> 赞同：0
> 
> 时间：2013-03-12T10:34:54.550
> 
> 标签：php, mysql, highcharts

我正在努力从 MySql 表创建饼图。

我的桌子如下

```
buy_trader    qty

 TKS3G  2069
 MSB1G  4417
 JKB6   4021
 FWS2   3507
 ASI1G  2578
 other  18228 
```

我正在使用以下代码从表中生成饼图。请在这件事上给予我帮助

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Highcharts Example</title>

 <?php
 $con = mysql_connect("localhost","root","");
 if (!$con) {
 die('Could not connect: ' . mysql_error());
  }
  mysql_select_db("offlinesurv", $con);
  $result = mysql_query("SELECT * FROM top_buy_trades");
  while($row = mysql_fetch_array($result)) {
  echo $row['buy_trader'] . "\t" . $row['qty']. "\n";
  }

   mysql_close($con);
  ?> 
  <script type="text/javascript" src="js/jquery.js"></script>
  <script type="text/javascript">

 $(function () {
  var chart;
  $(document).ready(function() {
   chart = new Highcharts.Chart({
    chart: {
     renderTo: 'container',
     plotBackgroundColor: null,
     plotBorderWidth: null,
     plotShadow: false
       },
     title: {
       text: 'Top Buy Traders'
        },
        tooltip: {
         pointFormat: '{series.name}: <b>{point.percentage}%</b>',
         percentageDecimals: 1
         },
         plotOptions: {
           pie: {
           allowPointSelect: true,
           cursor: 'pointer',
           dataLabels: {
           enabled: true,
           color: '#000000',
                    connectorColor: 'green',
                    formatter: function() {
                        return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'Broker share',
            data: [<?php echo $row ?>]
        }]
    });
 });

});
    </script>
</head>
<body>
<script src="js/highcharts.js"></script>
<script src="js/exporting.js"></script>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

</body>
</html> 
```

请帮我解决这个问题。因为我一段时间以来一直在努力解决这个问题。

请问这段代码有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:47:36.167

您不能像这样传递值。试试下面的代码，

将您的 while 循环更改为，

```
while($row = mysql_fetch_array($result)) {
   $traders[] = array(
      'trader' => $row['buy_trader'],
      'qty'    => $row['qty']
   );
} 
```

然后将脚本更改为，

```
series: [{
            type: 'pie',
            name: 'Broker share',
            data: [
                    <?php

                      foreach($traders as $trader) {
                         echo "[".$trader['trader'].",". $trader['qty']."],";
                     }
                     ?>
            ]
        }] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:41:41.957

行内容如下：

```
data: [<?php echo $row ?>] 
```

不在循环中。您需要通过循环遍历整个数据库结果，从 mysql 数据中为 highcahrts 生成一系列数据。目前这将生成一行，并且由于它在 PHP 循环之外，因此它是不正确的。

它应该是这样的：

```
while($row = mysql_fetch_array($result)) {
  echo //more data into your series array into the JS code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:38:27.537

请查看有关预处理数据的文章[http://docs.highcharts.com/#preprocessing](http://docs.highcharts.com/#preprocessing)

# maven - 如何从使用 install:install-file 添加的本地 maven 存储库中删除 jar 文件？

> ID：15358851
> 
> 赞同：132
> 
> 时间：2013-03-12T10:35:02.170
> 
> 标签：maven

```
mvn install:install-file -Dfile=phonegap-1.1.0.jar -DgroupId?=phonegap -DartifactId?=phonegap -Dversion=1.1.0 -Dpackaging=jar 
```

我使用上面的命令将本地 jar 安装到 maven 本地 repo 中。现在我已经从 maven repo 获得了依赖。我想从本地仓库中删除它。如何清洁它？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-08-07T14:02:47.667

尽管手动删除文件是可行的，但有一种*官方方法可以从本地（缓存）存储库中删除**项目*的依赖项，并可以选择从远程存储库中重新解析它们。

`purge-local-repository`标准 Maven 依赖插件上的目标将从缓存中删除*该项目本地安装的依赖项。*或者，您可以同时从远程存储库重新解析它们。

***这应该用作项目阶段的一部分，***因为它适用于包含项目的依赖项。默认情况下，传递依赖项也将被清除（本地）。

如果要从缓存中显式删除单个工件，请`purge-local-repository`与`manualInclude`参数一起使用。例如，从命令行：

```
mvn dependency:purge-local-repository -DmanualInclude="groupId:artifactId, ..." 
```

该文档暗示默认情况下这不会删除传递依赖项。如果您使用非标准缓存位置或在多个平台上运行，这些比“手动”删除文件更可靠。

完整的文档在[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/plugin-info.html)规范中。

*注意*：旧版本的 maven`dependency`插件有一个`manual-purge-local-repository`目标，现在（2.8 版）使用`manualInclude`. `manualIncludes`(with an )的文档`s`也应该被阅读。

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2013-03-12T10:41:34.317

虽然您可以执行一个 maven 命令来执行此操作，但从存储库中手动**删除文件会更容易。**

像这样在 Windows`Documents and Settings\your username\.m2`或`$HOME/.m2`Linux 上

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-01-15T07:51:07.820

至少在当前的 maven 版本上，如果您打算从本地存储库中删除依赖项而不重新下载它们，则需要添加开关 -DreResolve=false。

```
mvn dependency:purge-local-repository -DreResolve=false 
```

删除依赖项而不再次下载它们。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-03-12T10:38:23.560

`~/.m2/repository/phonegap/1.1.0/`如果您使用的是 linux 操作系统，请删除本地目录下的所有内容（jar、pom.xml 等） 。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-05-11T09:45:30.330

我遇到了同样的问题，经历了上面的所有建议，但没有任何效果。最后我删除了 .m2 和 .ivy 文件夹，它对我有用。

* * *

## 回答 #6

> 赞同：-8
> 
> 时间：2017-12-14T06:24:37.287

1.  `cd ~/.m2`
2.  `git init`
3.  `git commit -am "some comments"`
4.  `cd /path/to/your/project`
5.  `mvn install`
6.  `cd ~/.m2`
7.  `git reset --hard`

# ios - 工具栏应该在视图上方

> ID：15358858
> 
> 赞同：2
> 
> 时间：2013-03-12T10:35:28.577
> 
> 标签：ios, objective-c, xcode, ipad

我面临一个问题。我实现了一个`AVPlayer`并且它有效。但是如果视频是 4:3 格式，`UIToolBar`我已经在视图中实现，视频视图在我的工具栏上，所以我不能使用按钮。我如何设置`UIToolBar`总是在这个视图之上。工具栏样式应该是`UIBarStyleBlackTranslucent`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:37:30.910

写简单：

```
[self.view bringSubviewToFront:yourToolBar]; 
```

# c# - 如何检查名称是否存在于表中

> ID：15358865
> 
> 赞同：0
> 
> 时间：2013-03-12T10:35:47.090
> 
> 标签：c#, sql

我是 C# 新手，我不知道更多，但我有任务要做。

这个想法是添加新员工，当用户单击添加按钮时，它必须检查名称是否存在于数据库中的员工表中，因此如果名称存在则不会添加到表中，如果不存在则添加到表中.

所以请任何人都可以帮助我:(

这就是页面设计的样子：

![在此处输入图像描述](../Images/391fe438348cf7136563e9f7201032cb.png)

我通过存储过程进行了检查，我不知道它是否正确并且也有错误：

```
@F_name nvarchar(50),
@isExists bit output
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Insert statements for procedure here

 set @isExists = 0
if exists (SELECT F_name FROM Employee WHERE F_name =@F_name)
begin
       set @isExists=1
END
GO 
```

错误是：

> 消息 102，级别 15，状态 1，过程检查记录，第 22 行“END”附近的语法不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:42:58.830

我建议对代码隐藏使用此检查。您可以使用 LINQ 轻松完成：

```
using(DataContext db = new DataContext())
{
    var name = db.Employee.Where(n => n.F_name == YourNameFromTextBox).FistOrDefault();
    if(name == null)
    {
        // insert data
    }
    else
    {
        // record exist - throw error
    }
} 
```

如果您不想使用 LINQ，只需使用 ADO.NET 从 DB 读取/写入/更新：

```
SqlConnection dbConnection;
dbConnection = new SqlConnection(connectionString);

SqlCommand myCommand = new SqlCommand("SELECT * FROM Employee WHERE F_name=@F_name", dbConnection);
SqlParameter sqlParam = new SqlParameter("@F_name", F_name);
myCommand.Parameters.Add(sqlParam);

myCommand.Connection.Open();
SqlDataReader myReader = myCommand.ExecuteReader();

string name = "";

if (myReader.Read())
{
    name = myReader.GetString("F_name");
    // now you get 'name' from DB here, do your job
}
myReader.Close();
myCommand.Connection.Close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:39:49.097

试试这个，只是在最后添加了一个 END 语句

```
@F_name nvarchar(50),
@isExists bit output
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Insert statements for procedure here

 set @isExists = 0
if exists (SELECT F_name FROM Employee WHERE F_name =@F_name)
  begin
       set @isExists=1
  END

END

GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:40:33.970

您缺少一个`END`语句，因为每个`BEGIN`语句都应该有`END`语句。

这将是：

```
@F_name nvarchar(50),
@isExists bit output
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Insert statements for procedure here

    set @isExists = 0
    if exists (SELECT F_name FROM Employee WHERE F_name =@F_name)
    begin
       set @isExists=1
    END
END
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:52:14.600

> 这就是您编写存储过程的方式。我想说的众多方式之一。

```
CREATE PROCEDURE proc_yourProcName
    @F_name nvarchar(50) 
AS
BEGIN
    IF NOT EXISTS(SELECT F_name FROM Employee WHERE F_name = @F_name)
        BEGIN
          -- Your INSERT statement here
        END
    ELSE
        BEGIN
         -- Your UPDATE statement here
        END
END 
```

> 所以如果有任何 F_Name 它不会`INSERT`。如果你愿意，你可以在语句上设置你的`UPDATE`逻辑。`ELSE`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T10:43:09.223

您可以强制数据库不接受 Employeename 字段中的重复项

或使用代码

```
try
con.open
cmd.commandtext="select * from T1 where name = '" & varablename &"'"
reader=cmd.excutereader
if reader.read
msgbox"the emp. is alrady founded in the database"
exit sub
else
' do the insertion
end if
catch ex as exception
msgbox ex.massege
end try 
```

# html - 如何转义 HTML 实体？

> ID：15358868
> 
> 赞同：2
> 
> 时间：2013-03-12T10:35:55.563
> 
> 标签：html, html-entities

如何将 HTML 实体显示为它们的 HTML 表示，而不是等效的 Unicode 字符？

如果我有`&#x0902;`并且我希望它`&#x0902;`在我的页面上显示而不是显示为 ं，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:37:39.523

只需将`&`字符编码为`&amp;`-- 所以它应该打印为`&amp;#x0902`

# git - Git，HEAD 指向错误的分支

> ID：15358874
> 
> 赞同：0
> 
> 时间：2013-03-12T10:36:21.513
> 
> 标签：git, pointers, branch

有`git branch -av`命令的输出。现在我在`dev`树枝上。

```
***dev** 3f126e0 Comment...
master 7a47db8 Another comment...
remotes/origin/HEAD   -> origin/master
remotes/origin/dev 3f126e0 Comment...
remotes/origin/master 7a47db8 Another comment... 
```

来自 Scott Checkon 的 Pro Git 一书。

`How does Git know what branch you’re currently on? It keeps a special pointer called HEAD.`

为什么我在上时会`HEAD`指向？`origin/master``dev`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:12:30.003

`HEAD`不是指着`origin/master`；`remotes/origin/HEAD`指向`origin/master`。

看看`HEAD`用 . 指的是什么`git symbolic-ref HEAD`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:57:21.823

它只是告诉您 master 是远程存储库的默认分支。但是，无论如何，Head 通常是已签出的分支，但在这种情况下，它只提供默认的分支信息。反正它不是那么重要。一种情况是，如果您克隆存储库，则会使用默认分支。

# javascript - 我有一个 JS 文件，它接受来自 HTML 页面的值。我必须在嵌入 JS 的 CSS 中使用这个变量

> ID：15358877
> 
> 赞同：0
> 
> 时间：2013-03-12T10:36:25.953
> 
> 标签：javascript, jquery, html, css

我正在使用[simplemaps](http://simplemaps.com/)，这是一个 js 文件，其中一个函数用于从 HTML 页面获取值。

Javascript函数

```
function getValue(intvalue){
alert(intvalue);
var mapval = intvalue;
}
var simplemaps_worldmap_mapdata = {

main_settings:{
//General settings
width:1004,
background_color: '#FFFFFF', 
background_transparent: 'no',
border_color: '#FFFFFF',
zoom: 'yes',
pop_ups: 'detect', //on_click, on_hover, or detect

//Country defaults
state_description:   'Country description',
state_color: '#88A4BC',
state_hover_color: '#3B729F',
state_url: 'http://simplemaps.com',
all_states_inactive: 'no',

//Location defaults
location_description:  'Location description',
location_color: '#FF0067',
location_opacity: 1,
location_url: 'http://simplemaps.com',
location_size: 35,
location_type: 'circle', //or circle
all_locations_inactive: 'no',

url_new_tab: 'no',  
initial_zoom: 1,   
initial_zoom_solo: 'no',
auto_load: 'yes',
hide_labels: 'no'  
},
}//end of simplemaps_worldmap_mapdata 
```

我必须动态地将值传递给“初始缩放”颜色字段。在不同的值下，它以不同的级别缩放图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:15:57.103

我不明白你到底在问什么，但我想你需要访问 main_settings 对象

您可以通过以下方式访问对象中的属性

`simplemaps_worldmap_mapdata.main_settings.initial_zoom`

和

`simplemaps_worldmap_mapdata["main_settings"]["initial_zoom"];`

[读这个](http://www.jibbering.com/faq/faq_notes/square_brackets.html)

# git - 文件权限号（eg100644）是什么意思？

> ID：15358879
> 
> 赞同：11
> 
> 时间：2013-03-12T10:36:27.230
> 
> 标签：git

Git跟踪文件权限，我理解是什么意思，但是这个例子`0644`中的领先是什么意思？`10`

```
4 files changed, 201 insertions(+), 14 deletions(-)
create mode 100644 my_file 
```

# ios - imageview 图像填充适合模式

> ID：15358881
> 
> 赞同：0
> 
> 时间：2013-03-12T10:36:31.997
> 
> 标签：ios, objective-c

我有一个表格视图单元格，[原型]，我在其中添加了一个图像视图。现在我在尺寸检查器中手动设置了这个图像视图的高度和宽度。但是我正在使用

```
[cell viewWithTag:12345] 
```

在我的目标 c 代码中获取视图指针，并更新图像视图的图像。但是我发现我的手动约束被覆盖了，并且图像具有自己的大小。我在属性检查器中和以编程方式尝试了各种模式（Aspect fill、Aspect Fit 等）。

所以我的问题是如何设置约束？我哪里错了？为什么他们不工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:41:13.137

**对图像的特定****高度**和**宽度**使用以下方法

 **```
+ (UIImage*)resizeImage:(UIImage*)image withWidth:(int)width withHeight:(int)height
{
    CGSize newSize = CGSizeMake(width, height);
    float widthRatio = newSize.width/image.size.width;
    float heightRatio = newSize.height/image.size.height;

    if(widthRatio > heightRatio)
    {
        newSize=CGSizeMake(image.size.width*heightRatio,image.size.height*heightRatio);
    }
    else
    {
        newSize=CGSizeMake(image.size.width*widthRatio,image.size.height*widthRatio);
    }

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

此方法返回**NewImage**，具有您想要的特定大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:54:22.320

以下代码很有帮助

**情况1：**

```
 -(float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return 100.0;
}
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        UIImageView *image = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
        image.tag = 101;
        [cell addSubview:image];
    }
    UIImageView *imageObj =(UIImageView *)[cell viewWithTag:101];
    [imageObj setImage:[UIImage imageNamed:@"url.jpeg"]];

    // Set up the cell...

    return cell;
} 
```

输出： ![在此处输入图像描述](../Images/63c40678bcb4543b0830aee6d075c01c.png)

**案例2：**

```
-(float)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return 200.0;
}
// Customize the appearance of table view cells.
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        UIImageView *image = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
        image.tag = 101;
        [cell addSubview:image];
    }
    UIImageView *imageObj =(UIImageView *)[cell viewWithTag:101];
    [imageObj setImage:[UIImage imageNamed:@"url.jpeg"]];

    // Set up the cell...

    return cell;
} 
```

输出： ![在此处输入图像描述](../Images/6d0fabaf7c8de474d1ca055c057f0e48.png)

实际图像尺寸为 460 x 246 但您可以根据帧找到差异

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T10:41:24.513

首先，我会检查问题是否出在图像视图的内容模式或图像视图的大小上。由于自动调整掩码，您的图像视图也可能被调整大小。如果你初始化你的图像视图

```
- (id)initWithImage:(UIImage *)image 
```

方法您的 imageview 将自动调整为图像的大小。**

# linux - 在脚本中为所有没有 root 访问权限的用户查找 X 用户空闲时间

> ID：15358888
> 
> 赞同：2
> 
> 时间：2013-03-12T10:36:56.850
> 
> 标签：linux, x11

我想知道是否可以为我通过 SSH 访问的给定 linux 系统上的所有用户获取空闲时间。

```
who -Tu 
```

适用于终端用户的空闲时间，但不会更新 Xwindow 系统中用户的空闲时间。

```
xidletime 
```

似乎可以完成这项工作，但没有安装在我们的（debian linux）环境中。

这可能以其他方式吗？

我在目标机器上没有 root 访问权限，不能直接听键盘/鼠标输入，也不能安装新软件。

我知道在给定的目标机器上只有一个特定的用户（我知道）可以使用桌面。

如果我无法获得准确的时间，我是否可以 - 至少 - 找出（使用标准的非 root 控制台工具）连接的屏幕是否被锁定或处于屏幕保护程序中？

我为什么要这样做？我打算创建一个用于 MPI 并行处理任务的主机列表。我们实验室中的所有主机都是特定员工的专用台式机，但在周末/晚上大部分时间都是闲置的。通常用户不会注销，而是在离开时锁定屏幕。许多机器在白天的大部分时间也处于闲置状态。我想在需要时使用完全空闲的机器进行计算，同时排除用户在场的机器。顺便说一句：我愿意接受其他解决方案来获取此主机列表。主要目标是通过降低计算机速度来避免激怒同事。

# html - 无论内容有多少，如何让我的侧边栏与页脚对齐？

> ID：15358897
> 
> 赞同：1
> 
> 时间：2013-03-12T10:37:20.363
> 
> 标签：html, css, alignment, sidebar

所以我不久前发布了一个与此类似的问题，但尽管我得到了解决部分问题的帮助，但我意识到我的侧边栏仍然无法按照我的意愿行事。

问题是，截至目前，我有一个侧边栏，我想与我的页脚对齐，但它在“小部件”之后停止。换句话说，我希望侧边栏跟随**主要**内容一直到页脚，即使侧边栏本身并不总是有足够的内容。

我已经尝试了几种方法来做到这一点，但我还没有找到一个好的解决方案，有人可以帮助我吗？:)

这是该项目的[CODEPEN](http://codepen.io/anon/pen/ygDrK)。

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:02:33.577

有一个老派的黑客可以到达你需要的地方。

让我们假设这样的事情：

```
<div id="container">    //  Give it overflow: hidden;
  <div id="maincontent">
     Your main content goes here  // Assumes this is always taller than sidebar
  </div>
  <div id="sidebar">
     This is your sidebar stuff  // Give it a height of something like height: 16000 px;
  </div>
</div>

<div id="footer">
   This is your footer stuff
</div> 
```

使用此方法，侧边栏将始终是所有内容中最高的，但由于它所在的容器具有溢出：隐藏在 CSS 中，侧边栏将仅与您的“主要内容”DIV 一样高

第2部分：

好的，我发现了我的黑客问题，我忘记了一个重要部分：

忘记侧边栏：高度：16000px；

你需要 padding-bottom: 5000px 和 margin-bottom: -5000px; // 或者你想要的任何值，只要记住 margin-bottom 必须与 padding-bottom 大小相同，除了一个负数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:40:44.703

您应该同时提供一个常见的类，并使用 Equal Heights 等脚本。在此处查看更多信息[http://filamentgroup.com/lab/setting_equal_heights_with_jquery/](http://filamentgroup.com/lab/setting_equal_heights_with_jquery/)。

**编辑：**作为一个例子，假设你已经包含了库，并且你的元素（侧边栏和内容容器）都有类`eq-height`，你需要在你的模板中添加这个块`<head>`：

```
<script type="text/javascript">
  $(document).ready(function() {
    $('eq-height').equalHeights();
  });
<script> 
```

# python - 在 sqlalchemy 查询中分组/排序

> ID：15358898
> 
> 赞同：2
> 
> 时间：2013-03-12T10:37:21.987
> 
> 标签：python, json, python-2.7, sqlalchemy

这个 group by / order by 是行不通的，关键是`HTTP.statusline`按分钟计算，然后返回。现在它返回一分钟的多个时间。在数据库中，日期保存为字符串。

输出示例：

```
{u'date': u'2013-03-12 11:23:48', u'count': 21} 
```

但是有些东西返回了一个以上的值，如下所示：

```
{u'date': u'2013-03-12 11:36:21', u'count': 2}, {u'date': u'2013-03-12 11:36:21', u'count': 8}] 
```

代码：

```
def statusline_date(status):
    session = load_session()
    now = datetime.datetime.now()
    DD = now - datetime.timedelta(minutes=60)
    DD = DD.strftime('%Y-%m-%d %H:%M:%S')
    #query = session.query(HTTP.date, extract('minute', HTTP.date).label('min'), HTTP.statusline, func.count(HTTP.statusline).
    #        label('count')).filter(HTTP.statusline.like('%'+status+'%'), HTTP.date>=(DD+'%')).group_by('min').all()
    query = session.query(HTTP.date, HTTP.statusline, func.count(HTTP.statusline).
            label('count')).filter(HTTP.statusline.like('%'+status+'%'), HTTP.date>=(DD)).group_by(HTTP.date, HTTP.statusline).order_by(asc(HTTP.date)).all()

    result = [{'date': t.date, 'count': t.count} for t in query]

    return result 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:01:32.820

您正在对日期和状态行进行分组；很可能两个结果之间的状态行不同。

要么在输出中包含该状态行，要么将其从组和输出列中完全删除。

包括状态行：

```
result = [{'date': t.date, 'count': t.count, 'status': t.statusline} for t in query] 
```

会显示有什么不同。

从组和列列表中删除列：

```
query = session.query(HTTP.date, func.count(HTTP.statusline).
        label('count')).filter(HTTP.statusline.like('%'+status+'%'), HTTP.date>=(DD)).group_by(HTTP.date).order_by(asc(HTTP.date)).all() 
```

代替`.like('%'+status+'%')`，您也可以使用[`.contains(status)`](http://docs.sqlalchemy.org/en/latest/core/expression_api.html#sqlalchemy.sql.operators.ColumnOperators.contains); 它通常作为 LIKE*实现*，但您不必`%`自己进行连接。

# iphone - 旋转iphone视频数据

> ID：15358900
> 
> 赞同：1
> 
> 时间：2013-03-12T10:37:26.057
> 
> 标签：iphone, ios, ios5, ios6, avfoundation

我正在开发一个应用程序，该应用程序从前置摄像头捕获实时视频流并将其发送到远程端（使用 RTP）。本质上，数据流是： AVCaptureSession -> AVCaptureVideoDataOutput -> 回调 -> RTP -> 在远程端显示

当我使用横向模式时，远程端的图像是颠倒的。在纵向模式下，它会向左旋转。

如何在以下回调中旋转像素缓冲区，以使远端的图像具有正确的方向？感谢任何指针。

```
void)captureOutput:(AVCaptureOutput *)captureOutput
didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer
       fromConnection:(AVCaptureConnection *)connection 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:46:32.157

到目前为止，我能够得到一半的解决方案：

```
- (void) willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation) toInterfaceOrientation duration:(NSTimeInterval)duration
{

    switch (toInterfaceOrientation)
    {
        case UIInterfaceOrientationLandscapeRight:
            [[[self imageView] layer] setAffineTransform:CGAffineTransformMakeRotation(0)];
            break;
        case UIInterfaceOrientationLandscapeLeft:
            [[[self imageView] layer] setAffineTransform:CGAffineTransformMakeRotation(M_PI)];
            break;
//        case UIInterfaceOrientationPortrait:
//            [[[self imageView] layer] setAffineTransform:CGAffineTransformMakeRotation(M_PI / 2)];
//            break;
//        case UIInterfaceOrientationPortraitUpsideDown:
//            [[[self imageView] layer] setAffineTransform:CGAffineTransformMakeRotation(-M_PI / 2)];
//            break;
    }
} 
```

我重写了 willAnimitateRotation 函数，但这仅适用于 Landscape-Orientations（我在 Landscape-Mode 中设计了 ViewController）。

# linux - 获取 v4l2 视频设备的最大分辨率

> ID：15358920
> 
> 赞同：2
> 
> 时间：2013-03-12T10:38:19.643
> 
> 标签：linux, resolution, video-capture, v4l2

我如何才能检测到连接的视频设备能够提供的最大分辨率？

我不想捕获任何东西，只需从 v4l2 中检索此信息。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T13:26:06.363

使用`VIDIOC_ENUM_FRAMESIZES`ioctl：

```
 enum v4l2_buf_type type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
    struct v4l2_fmtdesc fmt;
    struct v4l2_frmsizeenum frmsize;
    struct v4l2_frmivalenum frmival;

    fmt.index = 0;
    fmt.type = type;
    while (ioctl(fd, VIDIOC_ENUM_FMT, &fmt) >= 0) {
        frmsize.pixel_format = fmt.pixelformat;
        frmsize.index = 0;
        while (ioctl(fd, VIDIOC_ENUM_FRAMESIZES, &frmsize) >= 0) {
            if (frmsize.type == V4L2_FRMSIZE_TYPE_DISCRETE) {
                printf("%dx%d\n", 
                                  frmsize.discrete.width,
                                  frmsize.discrete.height);
            } else if (frmsize.type == V4L2_FRMSIZE_TYPE_STEPWISE) {
                printf("%dx%d\n", 
                                  frmsize.stepwise.max_width,
                                  frmsize.stepwise.max_height);
            }
                frmsize.index++;
            }
            fmt.index++;
    } 
```

afaik，`VIDIOC_ENUM_FRAMESIZES`在 linux-2.6.29 中引入

# c++ - 通用输入驱动器

> ID：15358925
> 
> 赞同：0
> 
> 时间：2013-03-12T10:38:50.873
> 
> 标签：c++, c, input

首先，我正在构建一个简单的游戏手柄，我想知道是否可以编写通用驱动程序，我的意思是，游戏手柄（按钮、轴等）要传递的输入是内置一个驱动程序，该驱动程序与许多系统兼容。

我到处搜索，但找不到我的解决方案的答案。我看到像罗技和其他游戏手柄这样的公司，每当我将游戏手柄插入任何可以工作的系统时，我如何对我的设备进行编程来做到这一点？

**- 编辑 - ：**

主机和我的设备之间的连接是通过蓝牙连接的。但是我已经处理了那部分，数据传输成功。困难的部分是构建驱动程序，将游戏手柄的输入提交给实际游戏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T10:44:46.160

驱动程序控制硬件，并且驱动程序是在操作系统级别编写的，并处理操作系统特定的硬件处理方式。没有通用的跨平台方式来编写驱动程序，因为每个不同的操作系统在内核级别的工作方式不同。

Windows 驱动程序和 Linux 驱动程序以不同的方式编写，因为它们处理硬件的方式不同。

您必须为要支持的每个操作系统编写驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:58:39.650

最好的方法应该是让您的设备显示为[蓝牙人机接口设备](http://en.wikipedia.org/wiki/Bluetooth_profile#Human_Interface_Device_Profile_.28HID.29)：我相信主流商业设备就是这样做的。

操作系统可以为 HID 类设备提供通用驱动程序支持，这就是预定义设备类的重点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:40:30.897

就像 Unix 最初建议的那样：如果您的设备与操作系统内置的块或字符设备驱动程序代码兼容，那么您的设备将是“兼容的”。

# java - 在数据结构中分配席位

> ID：15358926
> 
> 赞同：0
> 
> 时间：2013-03-12T10:38:56.810
> 
> 标签：java, list, data-structures, map, multidimensional-array

我需要存储 n 行和 m 列的座位列表（代表教练/飞机等）。我还需要将座位分配给对象的能力。

我在想，如果我可以使用某种形式的数据结构，例如作为键的元组，那么地图可能是完美的。

例如

```
map = { (0,0): null,
        (0,1): Person1Object,
        (0,2): Person2Object,
        ...
        (n,m): PersonNObject
      } 
```

其中 (0,0) 将标识座位的行和列。然后 null 将标识一个座位没有被占用。

但我不确定这种方法是否可行，因为我见过的地图通常使用字符串作为键。我还考虑过使用多维数组和列表来解决这个问题。

任何人都可以就存储这些数据集合的最佳方法提出建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:41:33.053

如果`n`和`m`是已知的，为什么不使用数组来代替呢？

```
PersonObject[][] seats = new PersonObject[n][m]; 
```

* * *

您描述的数据结构是可能的。这将是

```
Map<Integer, Map<Integer, PersonObject>> seats = ... 
```

但它似乎不适合您的需求，因为它会引入大量您不需要的内存开销，并且处理起来也不是很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:42:20.170

您可以简单地使用二维数组`PersonObjects`并使用索引作为行号和列号的指示

例子 ：

```
PersonObject seatMatrix = new PersonObject[100][100]; 
```

要指示第 0 行第 1 列被占用（占用），请执行以下操作：

```
seatMatrix[0][1] = new PersonObject(); 
```

要检查特定（例如：第 1 行第 1 列）座位是否已被占用，您可以执行以下操作：

```
if(seatMatrix[1][1] != null)
{
     //this seat is taken
}
else
{
     // this seat is not taken!
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:02:52.203

您可以使用二维数组`PersonObject`来执行此操作，用法为：

```
final PersonObject[][] seats = new PersonObject[x][y];
//set a person
seats[a][b] = myPerson
//get a person
final PersonObject myPerson = seats[a][b]; 
```

如果数据的大小未知，您可以使用`List`s 而不是数组：

```
final List<List<PersonObject>> seats = new ArrayList<List<PersonObject>>();
//set a person
List<PersonObject> list = seats.get(a);
if(list == null) {
  list = new ArrayList<PersonObject>();
  seats.add(a, list);
}
list.add(b, myPerson);
//get a person
final PersonObject myPerson = seats.get(a).get(b); 
```

请注意，第二种方法更容易出错，因为您需要按顺序将人员放入行中，否则`seats.add(a, list)`会导致错误。如果没有按顺序将人员放入列中，`list.add(b, myPerson)`则会导致错误。

为了解决这个问题，您可以使用您建议的数据结构，这看起来像

```
final Map<Integer, Map<Integer, PersonObject>> seats = new HashMap<Integer, Map<Integer, PersonObject>>();
//set a person
Map<Integer, PersonObject> map = seats.get(a);
if(map == null) {
  map = new HashMap<Integer, PersonObject>();
  seats.put(a, map);
}
map.put(b, myPerson);
//get a person
myPerson.get(a).get(b); 
```

`NullPointerException`如果没有 row ，此 get 方法将抛出 a `a`。这可以通过扩展`HashMap`和覆盖`put`方法来避免：

```
final Map<Integer, Map<Integer, PersonObject>> seats = new HashMap<Integer, Map<Integer, PersonObject>>(){
  @Override
  public  Map<Integer, PersonObject> get(Object key) {
     Map<Integer, PersonObject> map = super.get(key);
     if(map == null) {
        map = new HashMap<Integer, PersonObject>();
        put((Integer)key, map);
     }
     return map;
  }
};
//set a person    
map.seats.get(a).put(b, myPerson);
//get a person
myPerson.get(a).get(b); 
```

因为`Map`现在外部会自动创建内部映射，所以不会出现错误。这种结构更适用于稀疏数据。

如果您允许查看 3rd 方库，google guava 有您需要的确切内容，[`Table`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Table.html)它本质上是最终数据结构的包装器。

另一种选择是使用 a`Map<Point, PersonObject>`作为`Point`已经存在的类，并且表示二维空间中的一个点。

```
final Map<Point, PersonObject> seats = new HashMap<Point, PersonObject>();
//set a person  
seats.put(new Point(a,b), myPerson);
//get a person
myPerson = seats.get(new Point(a,b)); 
```

# java - 登录 Flex Web 应用程序

> ID：15358928
> 
> 赞同：0
> 
> 时间：2013-03-12T10:39:01.687
> 
> 标签：java, apache-flex, logging, actionscript

我正在用 java 创建 Flex Web 应用程序。并部署在tomcat服务器上。我已经使用 log4j 在 java 中创建了日志记录。但无法理解如何开始登录 flex Web 应用程序。我搜索了很多，但没有找到任何逐步解决此问题的方法。在这里，我没有使用 blazeDS。请建议如何为 flex 创建日志文件并存储到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:21:31.423

是否要创建客户端日志记录或服务器端日志记录。在客户端日志记录的情况下，您可以将应用程序配置为创建日志文件或直接写入日志文件，在配置文件的日志记录部分配置服务器端日志记录-->services-config.xml

# php - 如何为 PHP 选择合适的解析器生成器？

> ID：15358929
> 
> 赞同：3
> 
> 时间：2013-03-12T10:39:04.183
> 
> 标签：php, regex, xslt, yacc, lex

一些程序员说他们“......厌倦了使用正则表达式来解析真正不应该用正则表达式解析的东西”（参见这个[流行的@nickf 评论](https://stackoverflow.com/q/2093228/287948)）。像我这样的其他人更喜欢使用 PHP（和[正则表达式](http://php.net/manual/en/function.preg-replace-callback.php)）进行更多编程并避免使用另一个框架（如[Lex/Yacc](https://stackoverflow.com/q/2093228/287948)）......但不是“更多”，这是第一个问题：

当我们必须避免创建（复杂的）PHP 解析器，迁移到真正的“[解析器生成器](http://en.wikipedia.org/wiki/Parser_generator)引擎”时？

完成第一个问题的第二个问题是“什么是解析复杂事物的最佳 PHP 工具包”？今天，2013 年，有一个标准的可互操作解析器内容、XML（或[SimpleXML 数组](http://www.php.net/manual/en/book.simplexml.php)等）和“标准解析器”，如[DOM API](http://en.wikipedia.org/wiki/Document_Object_Model)、 [XPath](http://php.net/manual/en/simplexmlelement.xpath.php)和[XSLT](http://php.net/manual/en/book.xsl.php)。

正如[我所描绘](https://stackoverflow.com/a/11648476/287948)的那样，也许没有“最佳解决方案”，但有时选择一个解决方案，然后选择另一个解决方案的*良好做法*配方。

**总结**：1）“我们什么时候应该离开纯 PHP 或 PHP+RegEx，使用*解析器生成器*？”；2) “什么是 PHP 的最佳*解析器生成器*，或者选择最佳解析器的配方/上下文/条件？”

* * *

（添加编辑版本）

我认为读者会喜欢一般性的讨论，但是，为了给出指导，这里有一些**范围**：

*   （回答@HugoDelsing）总的来说，我“不在乎它是如何工作的，但想要快速获得结果”。在某些情况下，当我“想要完全控制一切”时，我需要优化。

*   （回答@bizzehdee）近年来，我在解析多种文本字符串：[受控词汇](http://en.wikipedia.org/wiki/Controlled_vocabulary)的原始文本； [Lex URN](http://en.wikipedia.org/wiki/Lex_(URN))；References/Bibliography 的原始文本和另一个 stiling 文本，如[Vancouver Style](http://en.wikipedia.org/wiki/Vancouver_system)；[CSS 字符串](http://en.wikipedia.org/wiki/Cascading_Style_Sheets)；日期; 电子邮件文本；单位和方程（识别、规范化和最终转换）。在另外一次，我开发了简单的命令行工具。

* * *

***好奇心***（是我发布这个问题的动机）：[我](https://stackoverflow.com/a/11648476/287948)对使用“Lex/Yacc 方法的 PHP 替代方案”的回答每个月都在波动，有正面和负面的“有用投票”......也许这只是一个迹象，表明有“恨与爱”的行为，但另一方面，这可能是一个好问题！

# android - 即时添加多个按钮

> ID：15358939
> 
> 赞同：3
> 
> 时间：2013-03-12T10:39:46.963
> 
> 标签：android, android-relativelayout, layout-inflater

我想通过按钮单击代码动态添加多个按钮，我搜索了许多以前显示添加单个按钮的帖子，但我需要多个按钮。

附上示例代码。

```
 public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button b1 = (Button)findViewById(R.id.button1);
        b1.setOnClickListener(new View.OnClickListener() {      
            @Override
            public void onClick(View v) {               
                AddAll();                   
            }
        });
    }
    public void AddAll() {
        final RelativeLayout rl = (RelativeLayout)findViewById(R.id.rel);
        final Button btn = new Button(this);
        for(int i=0;i<4;i++)
        {
            rl.addView(btn); 
            btn.setText("hello");
            btn.setWidth(320);
            btn.setHeight(40);
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    } 
```

请帮助解决同样的问题。但是添加单个按钮工作正常，但我需要在另一个下方添加许多按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:42:55.403

```
public void AddAll() {
final RelativeLayout rl = (RelativeLayout)findViewById(R.id.rel);

for(int i=0;i<4;i++)
{
    final Button btn = new Button(this);
    rl.addView(btn); 
    btn.setText("hello");

    btn.setWidth(320);
    btn.setHeight(40);
}
//////////////////////////////////////////////////////////
} 
```

有关更多详细信息：-

[如何以编程方式将按钮逐行添加到布局中？](https://stackoverflow.com/questions/7195056/how-do-i-programmatically-add-buttons-into-layout-one-by-one-in-several-lines)

或者

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ScrollView scrollView= new ScrollView(this);
    LinearLayout mainLayout = new LinearLayout(this);
    mainLayout.setOrientation(LinearLayout.VERTICAL);                
    for (int i=0; i<10; i++){
        LinearLayout ll = new LinearLayout(this);
        ll.setOrientation(LinearLayout.HORIZONTAL);
        ll.setTag(i);                            
        TextView tv=new TextView(this);
        tv.setText("Row " + i);            
        ll.addView(tv);
        Button b = new Button(this);
        b.setTag(i);
        b.setText("Button " + i);            
        ll.addView(b);                    
        mainLayout.addView(ll);
    }
    scrollView.addView(mainLayout);
    setContentView(scrollView);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T10:48:33.053

```
public void AddAll() {
  LinearLayout layout = (LinearLayout) findViewById(R.id.linear);
        layout.setOrientation(LinearLayout.HORIZONTAL); 

            for (int j = 0; j < 4; j++ ){
                Button btnTag = new Button(this);
                btnTag.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
                btnTag.setText("Button " + j);
                layout.addView(btnTag);
            }
        } 
```

# osgi - osgi import-package 无法到达内部类

> ID：15358950
> 
> 赞同：1
> 
> 时间：2013-03-12T10:40:21.727
> 
> 标签：osgi, knopflerfish

我有一个捆绑包`B1`使用另一个捆绑包`B2`和捆绑包`B2`导出以下包：

*   包裹`a.b.c`
*   包裹`a.b.d`

这里的问题是`B1`我需要在包 abc 中使用一些内部类，可以说：`a.b.c.d.e`但在这种情况下，eclipse 会抛出以下错误：

```
The package a.b.c.d.e is used but not imported in manifest. 
```

但我已经`B2`导出/`B1`导入`a.b.c`包！为什么我需要再次插入内部类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:02:34.287

这看起来像是对包在 Java 中如何工作的误解。

包不是分层的，即使它们看起来是。所以包在任何意义上`a.b.c.d.e`都不是一个“子”包。`a.b.c`它们只是两个不同名称的不同包。

因此，如果您使用了包中的类，`a.b.c.d.e`则需要导入包`a.b.c.d.e`。您可能还导入了这一事实`a.b.c`是无关紧要的。

**更新**以总结以下评论/聊天中的讨论：

1.  错误“使用了包 xyz 但未在清单中导入”意味着需要将包添加到`Import-Package`，请注意包不是嵌套的，因此确实需要导入每个单独的包。

2.  如果将该包添加到`Import-Package`导致解析错误，则意味着不存在导出该包的现有捆绑包。无论哪个捆绑包包含有问题的包，都应将其列在`Export-Package`.

3.  如果现在的结果是错误消息“捆绑导出不在捆绑类路径中的包”，那么带有导出的捆绑**实际上并不包含**其内容中的包。可能您已将 export 语句添加到错误的包中，或者包的内容中以某种方式错误地省略了包。发生这种情况的原因取决于您使用的构建系统。

**最后**：不要混淆类和包！包是我们在 OSGi 中导入/导出的东西。当一个包被导出或导入时，它总是适用于该包中的*所有*类，包括“内部类”。

# ios - UITableView 在横向大于屏幕

> ID：15358951
> 
> 赞同：0
> 
> 时间：2013-03-12T10:40:27.990
> 
> 标签：ios, ipad, uikit

我有一个`UITableView`in an`UINavigationController`是 a 中的主人`UISplitViewController`。我的问题是`Portrait`一切都很好，但在横向上，我的表格比屏幕大，这意味着我可以滚动得比屏幕更远......

编辑：我`UISplitViewController`在一个 中`UITabbarController`，当我以纵向开始时，一切正常，如果我以横向模式开始，它就不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:46:22.593

尝试在方法中设置`autoresizingMask`您的表格视图`viewDidLoad:`

```
tableView.autoresizingMask = UIViewAutoresizingFlexibleWidth; 
```

您的表格将自动调整大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T07:27:08.770

似乎是 a `UISplitViewController`in a的问题`UITabBarController`。我现在以这种方式帮助我，我手动将视图框架的大小更改为 viewdidappear 中所需的大小。

# android - 在webview中触摸纯文本（无链接）时如何显示吐司

> ID：15358953
> 
> 赞同：1
> 
> 时间：2013-03-12T10:40:34.587
> 
> 标签：android, webview, android-webview, webviewclient

当用户点击网页视图中的纯文本而不是链接时，我想显示祝酒词。请了解情况

如果我设置 web View Client，那么链接很好，但不能显示纯文本的 toast。

如果我设置了触摸侦听器，则为纯文本显示 toast，但链接不起作用。

所以请告诉我如何处理它。提前致谢。

# html - css h1 字体大小与宽度一样大

> ID：15358954
> 
> 赞同：4
> 
> 时间：2013-03-12T10:40:37.853
> 
> 标签：html, css, header, width, fill

是否可以告诉 h1 调整文本大小，使其填充元素的 100% 宽度？

像这样。

![在此处输入图像描述](../Images/0ec9c5fecdae5a2b0ee73c147da4d417.png)

代码：

```
<h1>FOO</h1>
<h1>BAAR</h1> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T10:43:20.830

试试这个插件。

[http://fittextjs.com/](http://fittextjs.com/)

它非常适合响应式文本。

**编辑：**

```
jQuery("#element1").fitText(1.2, { minFontSize: '20px', maxFontSize: '540px' });
jQuery("#element2").fitText(1.2, { minFontSize: '40px', maxFontSize: '340px' }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:42:26.793

我发现一个名为 bigtext 的插件效果很好，不过会等待评论。

[https://github.com/zachleat/BigText](https://github.com/zachleat/BigText)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T11:14:19.747

使用 jQuery 的一种可能解决方案是：

```
var cs=$("#content").width();
$("h1").each(function(){
var hs=$(this).width();
while(hs<cs)
{
    $("h1").css("font-size",hs+0.01+"px");
    var hs=$(this).width();
}
while(hs>cs)
{
    $("h1").css("font-size",hs-0.01+"px");
    var hs=$(this).width();
}

}) 
```

# annotations - 为@Delete JAX-RS 方法添加另一个参数？

> ID：15358961
> 
> 赞同：1
> 
> 时间：2013-03-12T10:40:59.843
> 
> 标签：annotations, jersey, jax-rs

服务器资源从客户端正确接收到对以下提到的 remove() 的调用以进行“删除”操作。

```
@DELETE @Path("{id}")
@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
public void remove(@PathParam("id") int id) {
        dao.remove(id);
} 
```

在这里，我也从路径中正确获取了“id”参数，以从数据库中删除包含“id”的记录。

我的问题是，假设我想从同一个“路径”获取另一个参数，比如“密码”，在删除记录之前验证输入的密码，有没有办法做到这一点？

请让我知道你的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:43:42.243

试试这个：

```
@DELETE
@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
public void remove(@QueryParam(value = "id") int id, @QueryParam(value = "pw") String pw)     {
  .....
} 
```

资源必须是带有问号的请求，例如 url/url?id=1&pw=PASSWORD。但是通过 url 传输密码并不是很省钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:57:02.193

从技术上讲，可以在`@Path`注释的 URI 模板中包含多个参数，因此您可以：

```
@Path("{id}/{password}")
@DELETE @Path("{id}")
@Produces({ MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML })
public void remove(@PathParam("id") int id, @PathParam("password") String pwd) {
        // ...
} 
```

然而，这是否是授权删除请求的正确方法是另一个问题。

# jquery - jQuery中标签文本之前的复选框

> ID：15358968
> 
> 赞同：2
> 
> 时间：2013-03-12T10:41:21.030
> 
> 标签：jquery, html, checkbox

我有以下功能：

```
addCheckbox: function (name, parent, value, text) {
    var div = jQuery("#" + parent);
    var input = jQuery(document.createElement('input')).attr({
        id: "cbid_" + value,
        name: name,
        value: value,
        type: 'checkbox'
    });
    var label = jQuery("<label>").text(text);

    input.appendTo(label);
    div.append(label);
}, 
```

现在，这可行，但会产生以下结果：

![文本在复选框之前](../Images/d54f8d66016d830992c2d86ef9f9a5c3.png)

我想在标签*之前*添加复选框，使其看起来像`[x] Document Files`. 有没有办法在不使用的情况下做到这一点`html()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T10:42:22.067

是的，您可以使用[`prependTo`](http://api.jquery.com/prependTo/)：

```
var label = jQuery("<label>").text(text);

input.prependTo(label); // <=== Here
div.append(label); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:42:59.880

或者你可以只使用 CSS：使用类似于元素或元素`float: left`的属性。`<input>``float: right``<label>`

# ruby-on-rails-3 - Rails Savon Soap HTTP 错误 (500)

> ID：15358973
> 
> 赞同：0
> 
> 时间：2013-03-12T10:41:30.733
> 
> 标签：ruby-on-rails-3, http, ssl, savon

我正在使用**Savon**连接 Web 服务

```
client = Savon::Client.new("https://nsd-preview.nimsoftondemand.com/servicedesk/webservices/ServiceRequest?wsdl")

client.http.auth.ssl.verify_mode = :none

client.wsdl.soap_actions 
```

抛出错误

```
W, [2013-03-12T15:54:12.159117 #4807]  WARN -- : HTTPI executes HTTP GET using the httpclient adapter
Savon::HTTP::Error: HTTP error (500):

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      <title>Error</title>
      <link href="/servicedesk/web/common/css/form_builder/admin.css" rel="stylesheet" type="text/css" />

   </head>

   <body>
      <table width="100%" height ="500" border="0" cellpadding="0" cellspacing="0">
         <tr>
            <td valign="top"><table width="100%" border="0" cellpadding="0" cellspacing="0" class="head_bg">

               <tr valign="top">
                <td width="31%" height="67" align="left"><img src="/servicedesk/web/common/img/misc/logo.gif" width="290" height="69" /></td>
                <td width="43%">&nbsp;</td>
                <td width="23%" align="right"><table border="0" align="right" cellpadding="2" cellspacing="0">
                    <tr>
                        <td height='16'><img src="/servicedesk/web/common/img/icons/about_us.gif"/></td>
                        <td align="right" class="top_panel_links"><a href="http://www.inteqnet.com" target="_blank" class="top_panel_links">About Us</a> |</td>
                        <td height="16"><img src="/servicedesk/web/common/img/icons/help.gif"/></td>
                        <td align="right" class="top_panel_links"><a href="/xwiki" target="_blank" class="top_panel_links">Help |</td>
                        <td height="16"><img src="/servicedesk/web/common/img/icons/login.gif" /></td>
                        <td align="right" class="top_panel_links"><a href="/servicedesk/web/jsp/apps/login.jsp" class="top_panel_links">Login</td>
                    </tr>
                  </table></td>
               </tr>

            </table>
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
               <tr>
                  <td height="40">&nbsp;</td>
               </tr>
               <tr>
                  <td align="center"><table border="0" align="center" cellpadding="0" cellspacing="0" >
                     <tr>
                        <td height="265" align="left" valign="top"><img src="/servicedesk/web/common/img/misc/login_lf.gif" width="9" height="265" /></td>
                        <td width="470" valign="middle" background="/servicedesk/web/common/img/misc/login_bg.gif"><table border="0" align="center" cellpadding="2" cellspacing="10">

                           <tr>
                              <td valign="top"><img src="/servicedesk/web/common/img/icons/ico_error.gif" width="45" height="45" /></td>

                              <td valign="top" class="error_text">We're sorry. We encountered an error in servicing your request. Please contact your Support Team for further assistance

                              or return to the <span class="link_text"><a href="/servicedesk/web/jsp/apps/login.jsp">Login Page</a></span> and try again.

                              </td>
                           </tr>

                        </table></td>
                        <td align="right" valign="top"><img src="/servicedesk/web/common/img/misc/login_rt.gif" width="9" height="265" /></td>
                     </tr>
                  </table></td>
               </tr>
               <tr>
                  <td align="center" class="footer_text">Copyight &copy; 2011 Nimsoft LLC. All rights reserved.</td>
               </tr>
            </table></td>
         </tr>
      </table>
   </body>
</html> 
```

但是如果我下载文件并尝试打开意味着

```
client = Savon.client File.expand_path("path/ServiceRequest_nimsoft.xml")

client.wsdl.soap_actions

 => [:update_worklog, :list_related_tickets, :get_service_request, :add_worklog, :relate_configuration_item, :list_attachments, :list_service_requests, :update_service_request, :list_related_configuration_items, :unrelate_configuration_item, :relate_attachment, :list_activities, :send_communication, :unrelate_attachment, :relate_ticket, :list_communications, :list_sla_compliance_levels, :list_worklogs, :log_service_request, :unrelate_ticket] 
```

我在第一步做错了什么我几乎浪费了 2 天时间来尝试找到我尝试发送证书文件的解决方案但仍然发生错误我应该怎么做才能获得有效数据

我正在使用**savon 1.0.0**

任何帮助表示赞赏

是否有任何依赖问题我正在使用 ruby​​ 1.8.7 rails 3.0.7 我安装了[这里提到的 savon 1.0.0 的所有运行时依赖和开发依赖](http://rubygems.org/gems/savon/versions/1.0.0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:25:07.533

（这不是一个真正的答案，但是将这么多代码放在评论中很麻烦）

我创建了一个测试脚本，对我来说看起来不错

```
require 'rubygems'
require 'savon'
client = Savon::Client.new("https://nsd-preview.nimsoftondemand.com/servicedesk/webservices/ServiceRequest?wsdl")
client.http.auth.ssl.verify_mode = :none
puts "Soap actions: " + client.wsdl.soap_actions.inspect 
```

输出

```
$ ruby test.rb 
WARN -- : HTTPI executes HTTP GET using the net_http adapter
Soap actions: [:list_worklogs, :list_related_tickets, :list_attachments, :unrelate_configuration_item, :send_communication, :list_communications, :unrelate_ticket, :add_worklog, :update_service_request, :relate_attachment, :unrelate_attachment, :list_sla_compliance_levels, :update_worklog, :relate_configuration_item, :list_related_configuration_items, :list_activities, :relate_ticket, :log_service_request, :get_service_request, :list_service_requests] 
```

红宝石版本 1.9.3p125

Gemfile.lock

```
GEM
  remote: http://rubygems.org/
  specs:
    akami (1.2.0)
      gyoku (>= 0.4.0)
      nokogiri (>= 1.4.0)
    builder (3.2.0)
    gyoku (1.0.0)
      builder (>= 2.1.2)
    httpi (1.1.1)
      rack
    nokogiri (1.5.6)
    nori (1.1.5)
    rack (1.5.2)
    savon (1.0.0)
      akami (~> 1.1)
      builder (>= 2.1.2)
      gyoku (>= 0.4.0)
      httpi (~> 1.0)
      nokogiri (>= 1.4.0)
      nori (~> 1.1)
      wasabi (~> 2.2)
    wasabi (2.5.1)
      httpi (~> 1.0)
      nokogiri (>= 1.4.0)

PLATFORMS
  ruby

DEPENDENCIES
  savon (= 1.0.0) 
```

# javascript - NODE.JS 将提要信息输出到源

> ID：15358974
> 
> 赞同：0
> 
> 时间：2013-03-12T10:41:31.580
> 
> 标签：javascript, json, node.js, activemq, stomp

早晨。我最近开始进入 NODE.JS 的奇迹，并拥有一个节点，它通过 stomp 从 Active MQ 数据馈送中提取信息，并使用 prettyjson 呈现它并输出到控制台。

```
var prettyjson = require('prettyjson'),
    StompClient = require('stomp-client').StompClient;

var destination = '/topic/(topic)',
    client = new StompClient('datafeeds.(datafeedlocation)', 61618, '(email.address)', '(password)', '1.0');

client.connect(function(sessionId) {
    console.log('Trying to connect...');
    client.subscribe(destination, function(body, headers) {
        console.log(prettyjson.render(JSON.parse(body)));
    });
}); 
```

并且提要在控制台上非常愉快地搅动。

现在我已经阅读了很多示例，其中大多数总是输出到控制台。但是我想获取这些数据并对其进行处理。

那么我如何获取控制台输出并存储它，或者只是跳过控制台输出并存储在信息中.. 现在任何方法都可以，在 json 文件中或数据库中.. 地狱.. 甚至是文本文件。好的清晰指南很好，不要指望任何人为我编写代码。

提前感谢任何好的指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:26:45.513

呸，像往常一样张贴寻求帮助..我得到它的工作..这是最终代码

```
var prettyjson = require('prettyjson'),
    fs = require('fs'),
    StompClient = require('stomp-client').StompClient;

var destination = '/topic/(topic)',
    client = new StompClient('datafeeds.(datafeed)', 61618, '(email.address)', '(password)', '1.0');

client.connect(function(sessionId) {
    console.log('Trying to connect...');
    client.subscribe(destination, function(body, headers) {
        fs.writeFile("./output", prettyjson.render(JSON.parse(body)), function(err) {
    if(err) {
        console.log(err);
    } else {
        console.log("The file was saved!");
    }
}); 
    });
}); 
```

# solr - Solr：我应该从多大的索引开始考虑使用分片来拆分索引

> ID：15358980
> 
> 赞同：2
> 
> 时间：2013-03-12T10:41:42.597
> 
> 标签：solr

我目前索引了 120GB 的输入数据（不存储数据，只是 doc ID 和索引），索引完整数据集需要大约 12 小时的时间。

我们还没有将它投入生产，我想知道我需要什么时候开始考虑分片，将索引分离到多个服务器上？

对索引进行分片是索引大小的问题，还是仅仅是索引时间/磁盘空间/用户负载的问题？

随着我的索引增长到 200GB、300GB 的输入数据等，我会遇到内存限制吗？

# jquery - jQuery自动完成_renderItem将项目设置为null

> ID：15358984
> 
> 赞同：1
> 
> 时间：2013-03-12T10:41:48.803
> 
> 标签：jquery, jquery-autocomplete

我有重新定义的问题`_renderItems`。问题是它将 item 设置为 null，换句话说，我收到了一个错误

> 无法读取 null 的属性“casValue”

代码：

```
$(function() {
        $('.CasNumber').autocomplete({
            source: function(request, response) {
                $.ajax({
                    url: //url of the page
                    dataType: "json",
                    data: {
                        search_word: request.term,
                    },
                    success: function(data) {
                        response($.map(data.result, function(item) {
                            return {
                                label: item.Cas,
                                value: item.Cas,
                                casLabel: 'Cas No.',
                                casValue: item.Cas,
                                egLabel: 'Eg No.',
                                egValue: item.Eg,
                                REACHLabel: 'REACH No.',
                                REACHValue: item.ReachRegNumber,
                                indexLabel: 'Index-number',
                                indexValue: item.IndexNumber,
                                nameValue: item.Name,
                                data: item
                            }
                        }));
                    }
                });
            },
            minLength: 1,

            focus: function(event, ui) {

                $(".CasNumber").val(ui.item.casValue);
                return false;
            },

            select: function(event, ui) {
                log(ui.item.data, this);
                return false;
            },
            open: function() {
                $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
            },
            close: function() {
                $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
            }
        })
        .data("ui-autocomplete")._renderItem = function(ul, item) {
            return $("<li>")
            .data("item.ui-autocomplete", item)
            .append("//Format of the drop down list is here")
            .appendTo(ul);
        };
    }); 
```

当我使用调试器查看代码时，它会正确获取项目值`_renderItem`，它会完美地绘制出列表，但是一旦焦点开始（在项目选择之后）`ui.item parameter`设置为 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-12T20:31:34.627

正确的项目渲染：

```
 _renderItem = function( ul, item ) {
          return $("<li>")
        .attr("data-value", item.value)
        .append("<a></a>")
        .append(item.value)
        .appendTo(ul);
    }; 
```

注意标签 <a>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:09:47.487

结构中的第一个元素需要锚定，才能正常工作。

# c# - SCM 终止不会停止的服务的超时

> ID：15358987
> 
> 赞同：2
> 
> 时间：2013-03-12T10:41:57.270
> 
> 标签：c#, .net, windows-services

我试图弄清楚如果 SCM 向服务发送停止请求但服务没有在特定时间间隔内停止会发生什么。我已经看到在博客和论坛中将引用传递给 30 秒超时（没有任何 MSDN 引用支持）以及名为 [HKLM\System\CurrentControlSet\Control]ServicesPipeTimeout 和 [HKLM\System\CurrentControlSet\Control] 的注册表项WaitToKill 服务超时

在我的 Windows 7 开发笔记本电脑上，这些注册表项都不存在。当我尝试从控制面板停止服务时会发生什么，2 分钟后，控制面板说该服务没有响应，但它让它继续运行并且永远不会终止该进程。

是否有任何文档来描述预期的行为？特别是在我的服务中，如果它们没有在合理的时间内完成，我是否应该放入自己的计时器来杀死任何错误的线程？

我正在使用 .Net ServiceBase 类来实现

# java - 项目和maven依赖中的相同类

> ID：15358988
> 
> 赞同：2
> 
> 时间：2013-03-12T10:41:59.953
> 
> 标签：java, maven

我有 2 个项目，比如说项目 A 和项目 B。项目 A 对项目 B 有 Maven 依赖项。两个项目都包含`Test`同一个包中的类。

现在当我导入时，

```
import com.my.package.Test; 
```

从项目 A 中的另一个类，我认为（在运行时）它使用项目 B 中的测试类，而不是同一项目中包含的类。

有谁知道这是否应该如何工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:48:33.700

您不应该拥有具有相同 FQN-s（完全限定名称，例如`com.foo.MyTest`）的类。拥有重复的类只会导致这类问题。从两个工件之一中删除该类。然后使用`maven-jar-plugin` [创建一个 test-jar 工件](http://maven.apache.org/plugins/maven-jar-plugin/test-jar-mojo.html)，以便您可以在两个项目之间共享您的类。

你也可以看看[这个 SO answer](https://stackoverflow.com/questions/6469128/how-do-i-install-a-test-jar-in-maven/6469256#6469256)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T07:56:54.170

第一个类加载器获胜。maven 中的类加载器顺序与依赖顺序相同，但您应该在不同的项目中拥有具有相同 FQN 的类。

# c# - NHibernate session.Query ().Count 返回错误的计数

> ID：15358989
> 
> 赞同：2
> 
> 时间：2013-03-12T10:42:03.253
> 
> 标签：c#, .net, nhibernate

我遇到了通过接口获取正确数量的对象的问题：

```
var count = session.Query<IDirty>().Count(); 
```

有 2 个类实现了 IDirty 接口。Count 返回一个类的对象数，忽略第二个。

QueryOver 只是抛出该项目不是唯一的异常。

```
var count2 = session.QueryOver<IDirty>().RowCount(); 
```

它在内部使用 SingleOrDefault 方法，这解释了为什么它失败了......

获取项目列表正常工作 - 列表包括两种类型的对象：

```
var list= session.Query<IDirty>().ToList(); 
```

是否有任何解决方法可以在不枚举所有项目的情况下获得正确的计数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:37:57.793

尝试

```
session.QueryOver<IDirty>().ToRowCountQuery().List<int>().Sum() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:37:56.883

在我看来，这是一个错误，尽管我可以理解为什么修复它并非易事。

[您可以在https://nhibernate.jira.com](https://nhibernate.jira.com)打开一个问题。同时，只需对实现的每种类型使用单独的查询`IDirty.`

# typo3 - Typo3 - 扩展“新闻” - 设置每页的帖子数

> ID：15358994
> 
> 赞同：0
> 
> 时间：2013-03-12T10:42:11.460
> 
> 标签：typo3

我在 TYPO3 4.7 系统中使用扩展名“新闻”。我有一个工作列表视图，我想使用分页来显示每页 8 个帖子。默认是10，我不知道如何自定义这个。

有一个字段“显示的最大记录”，但这只是限制帖子总数，而不是“每页”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:31:24.897

你有没有尝试过

```
paginate.itemsPerPage 
```

?

我在[http://docs.typo3.org/typo3cms/extensions/news/Main/Configuration/Reference/Index.html上查到了](http://docs.typo3.org/typo3cms/extensions/news/Main/Configuration/Reference/Index.html)

# android - httpurlconnection 中的问题获取状态 500

> ID：15358996
> 
> 赞同：1
> 
> 时间：2013-03-12T10:42:15.610
> 
> 标签：android, httpurlconnection

我正在尝试通过 url 登录，并且在 httpurlconnevtion 中获得状态代码 500

```
public static String excutePost(String targetURL, String urlParameters)
  {
    URL url;
    HttpURLConnection connection = null;  
    try {
      //Create connection
      url = new URL(targetURL);
      connection = (HttpURLConnection)url.openConnection();
      connection.setRequestMethod("POST");
      connection.setRequestProperty("Content-Type", 
           "application/x-www-form-urlencoded");
      connection.setRequestProperty("Connection", "Keep-Alive");    
      connection.setRequestProperty("Content-Length", "" + 
               Integer.toString(urlParameters.getBytes().length));
      connection.setRequestProperty("Content-Language", "en-US");  
      connection.setRequestProperty("Accept-Encoding", ""); 
      connection.setUseCaches (false);
      connection.setDoInput(true);
      connection.setDoOutput(true);

      //Send request
      DataOutputStream wr = new DataOutputStream (
                  connection.getOutputStream ());
      wr.writeBytes (urlParameters);
      wr.flush ();
      wr.close ();

      System.out.println("status :"+connection.getResponseCode());
      System.out.println("getErrorStream() :"+connection.getErrorStream());
      //Get Response    
      InputStream is = connection.getInputStream();
      BufferedReader rd = new BufferedReader(new InputStreamReader(is));
      String line;
      StringBuffer response = new StringBuffer(); 
      while((line = rd.readLine()) != null) {
        response.append(line);
        response.append('\r');
      }
      rd.close();
      return response.toString();

    } catch (Exception e) {

      e.printStackTrace();
      return null;

    } finally {

      if(connection != null) {
        connection.disconnect(); 
      }
    }
  } 
```

我的参数是

```
String urlParameters =
                        "pwd1=" + URLEncoder.encode("DEMO123", "UTF-8") +
                        "&badge=" + URLEncoder.encode("1233", "UTF-8"); 
```

我得到了 logcat

```
status :500
getErrorStream() :libcore.net.http.FixedLengthInputStream@417bc5c0 
```

谢谢你

```
**EDITED 2** 
```

我也尝试过

```
DataOutputStream dos = new DataOutputStream(connection.getOutputStream());

        // Add badge
        dos.writeBytes(LINE_START + BOUNDRY + LINE_END);
        dos.writeBytes("Content-Disposition: form-data; name='badge';");
        dos.writeBytes(LINE_END + LINE_END);
        dos.writeBytes("1233");
        dos.writeBytes(LINE_END);

        // Add password
        dos.writeBytes(LINE_START + BOUNDRY + LINE_END);
        dos.writeBytes("Content-Disposition: form-data; name='pwd1';");
        dos.writeBytes(LINE_END + LINE_END);
        dos.writeBytes("DEMO123");
        dos.writeBytes(LINE_END); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:46:06.237

`500`表示一个`Internal Server Error`。您这边可能没有错误，它在服务器上。即使您发送错误的内容并导致服务器返回 500，它仍然是服务器问题。

**编辑：** 好的，服务器应该返回类似的东西，`400 Bad Request`而不是`500 Internal Server Error`但我现在发现你的错误：

```
connection.setRequestProperty("Content-Length", Integer.toString(urlParameters.getBytes().length));

...

//Send request
DataOutputStream wr = new DataOutputStream (connection.getOutputStream ());
wr.writeBytes (urlParameters); 
```

这里的问题是您首先`urlParameters`使用`getBytes`which 获取字节（引用 javadoc）：

> 使用平台的默认字符集将此字符串编码为字节序列

然后你使用`DataOutputStream.writeBytes`which 编写字节（引用 javadoc）：

> 字符串中的每个字符通过丢弃其高八位按顺序写出。

总之，您`Content-Length`的数据不匹配。所以服务器返回给你

> java.io.IOException：超出 20 字节的内容长度限制

**解决方案：**

```
//consider urlParameters.getBytes("UTF-8") method instead of using default encoding
byte[] bodyData = urlParameters.getBytes(); 
connection.setRequestProperty("Content-Length", Integer.toString(bodyData.length));

...

//Send request
InputStream out = connection.getOutputStream();
out.write(bodyData); 
```

**编辑2：** 编辑1肯定是有效的，但是，再次查看问题，我相信错误肯定是由服务器引起的。我认为服务器返回了一个错误的`Content-Length`标头，当在 Android 上读取数据时，系统意识到来自服务器的数据比它应该的多，`Content-Length`并引发异常，还将状态代码替换为 500，因为它真的是服务器错误。

**编辑3：**

```
connection.setRequestProperty("Content-Language", "en-US");  
connection.setRequestProperty("Accept-Encoding", ""); 
```

而不是设置`Content-Language`which is not necessary ，您应该设置`Content-Encoding`为`UTF-8`and 而不是 empty `Accept-Encoding`，您应该添加真正预期的 MIME 类型。我相信这是一个服务器错误，但如果您正确设置请求标头，它可能不会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:44:39.900

状态码的`500`意思`Internal Server Error`。为什么要扔给你，只有后面的服务器`targetURL`知道。

验证您是否正确使用了 API。查看响应的正文（除了状态代码）可能会提供提示。