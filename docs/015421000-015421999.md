# StackOverflow 问答 15421000-15421999

# javascript - 分配选项以通过 javascript 选择输入

> ID：15421001
> 
> 赞同：0
> 
> 时间：2013-03-14T21:59:24.690
> 
> 标签：javascript, html, select, options, appendchild

我的网站上有一个`Select`菜单，在一张桌子里面。

```
<select name = "menu" id="menu" >
   <option>A</option>
   <option>B</option>
   <option>C</option>
</select> 
```

我正在尝试使用 JavaScript 函数在表格下方的一行中添加另一个具有相同选项的选择菜单。
我有这个：

```
function addRow(tableID) {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    var cell1 = row.insertCell(0);
    var element1 = document.createElement("select");
    element1.id = "id";
    cell1.appendChild(element1);
} 
```

但我不知道在哪里添加选项。

我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:06:10.443

您可以通过实例化一个新的[Option](https://developer.mozilla.org/en-US/docs/DOM/Option)对象，然后将其传递给 select 元素的`add`方法来向 select 元素添加选项。

例如：

```
var opt = new Option("One", 1);
element1.add(opt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:11:37.687

如果你想完全复制它，你也可以使用类似于这样的[**cloneNode() ：**](https://developer.mozilla.org/en-US/docs/DOM/Node.cloneNode)

```
function addRow(tableID) {
    var table = document.getElementById(tableID);
    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    var cell1 = row.insertCell(0);

    // Get a handle to the original select
    var orgSelect = document.getElementById("menu");

    // Make a clone, using true to indicate we also want to clone child nodes
    var dupSelect = orgSelect.cloneNode(true);

    // Change any attributes of the new select
    dupSelect.id = "id";

    // Append the new select
    cell1.appendChild(dupSelect);
} 
```

* * *

[**演示**](http://jsfiddle.net/jveh2/)-`cloneNode()`用于复制一个`select`和`options`

* * *

然后，您甚至可以将此作为您调用的函数，传递任何相关参数，类似于：

```
function createClone(elementId, newId, includeChildNodes){
    var original = document.getElementById(elementId);
    var duplicate = original.cloneNode(includeChildNodes);

    duplicate.id = newId;

    return duplicate;
}

// Call it like this
var clonedElement = createClone('menu', 'newMenu', true); 
```

# php - Soundcloud 中的日期 - API

> ID：15421002
> 
> 赞同：0
> 
> 时间：2013-03-14T21:59:25.453
> 
> 标签：php, soundcloud

关于将 API 与 Soundcloud 一起使用的另一个问题（我正在使用 PHP）。

我将上传大量的声音，其中一些是在 1994 年左右录制的。我希望能够使用搜索 API 来检索具有此日期的文件。

我可以看到轨道资源具有 [release_day] 、 [release_month] 和 [release_year] - 但这些字段似乎不能用作查询中的过滤器，对吗？

因此，如果我无法使用这些字段按日期搜索，我能想到的唯一其他选择是使用 [created_at] 字段，因为它可以在搜索中使用。

只有 - 我已经尝试过，但我似乎无法使用 API 修改那段数据。我成功地修改了元数据的其他部分，但是，例如（使用 PHP 片段）：

```
$client->put('tracks/' . $track->id, array(
        'track[created_at]' => "1994/03/14 07:35:57 +0000",
        'track[description]' => 'This track was recorded in Berlin'

)); 
```

这没有效果，我认为这意味着我不能做我需要做的事情？

我该如何解决这个问题，并允许我网站上的用户搜索 1994 年录制的声音文件或类似文件？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:19:16.727

首先，根据文档，通过以下方式查询轨道：

```
created_at[from] date   (yyyy-mm-dd hh:mm:ss) return tracks created at this date or later
created_at[to]  date    (yyyy-mm-dd hh:mm:ss) return tracks created at this date or earlier 
```

目前不起作用，与 SoundCloud 上的许多其他查询一样。

除了作为查询被破坏之外，created_at 时间戳是在上传曲目时添加的，并且不可修改。按发布参数搜索的唯一方法是首先搜索其子资源之一，例如：

```
GET     /users/{id}/tracks  list of tracks of the user
GET     /users/{id}/playlists   list of playlists (sets) of the user
GET     /tracks/{id}/comments   comments for the track
GET     /tracks/{id}/comments/{comment-id}  a comment for the track
GET     /tracks/{id}/favoriters     users who favorited the track
GET     /tracks/{id}/favoriters/{user-id}   a user who has favorited to the track
GET     /tracks/{id}/shared-to/users    users who have access to the track
GET     /tracks/{id}/shared-to/emails   email addresses who are invited to the track 
```

然后根据轨道的发布属性过滤结果。例如，您可以按 /users/{id}/playlists 进行搜索，然后按发布日期过滤该播放列表中曲目的结果。

# android - 从移动浏览器启动 sip 客户端

> ID：15421005
> 
> 赞同：0
> 
> 时间：2013-03-14T21:59:44.133
> 
> 标签：android, ios, webkit, lync, lync-2010

有没有办法像在桌面浏览器上一样在 iOS 或 Android 上的移动浏览器中打开带有 sip 地址的 href？

我使用 Lync 2010 作为我的 sip 客户端，当我在任一手机上的移动浏览器中单击该链接时，它不会启动。我看到它进行了尝试，但 Lync 并没有像在我的桌面上那样出现。两者都安装了客户端，甚至在后台打开。

这是一个例子：

```
<a href="sip:lou@lou.com">Lou</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:42:30.613

我原以为这必须在操作系统中实现，然后应用程序将注册为能够打开该类型的链接。我认为对设置或应用程序的任何更改都不会启用此功能。不幸的是，我看不到任何移动操作系统供应商很快就会实现这一点——只是没有足够的牵引力。

# java - 收集子字符串中的零个数

> ID：15421006
> 
> 赞同：0
> 
> 时间：2013-03-14T21:59:46.687
> 
> 标签：java

我无法让以下程序正常工作。`N`当它在字符串中遇到 an时`dursend`，它使用`.split`. 然后它`1`为每个 single收集 a `N`，`2`为一个 N 收集 a ，然后是一个`Q`，依此类推。然后`0`必须收集的数量等于`Q`'s 的数量。正确的输出应该是： `011111120111111201111111111111111`其中第一个`0`应该被忽略。我得到的输出是：`01111112011111201111111111111110`，所以似乎`0`在第一次打印之后`2`程序出错了：它给出了 5 次`1`而不是 6 次`1`。

```
public class T3 {
  public static void main(String[] args)
  {
    String durs = "NNNNNNNQNNNNNNNQNNNNNNNNNNNNNNNN";
    System.out.println(durs);
    int d = countOccurrencesDurations(durs, 'N');
    int d1 = countOccurrencesDurations(durs, 'Q');
    int m = 32;
    int[] cdn = new int[m];
    int d2;
    StringBuffer sb = new StringBuffer(durs);
    String dursend = sb.append("W").toString();
    String[] a = new String[d];
    a = dursend.split("N");
    // int alen = a.length + d1 - 1;
    // System.out.println("a: " + alen);
    int i = 1;
    while (i < a.length) {
      // System.out.println("N" + a[i]);
      d2 = countOccurrencesDurations(a[i], 'Q');
      // System.out.println(d2);
      int d3 = d2 + 1;
      cdn[i] += d3;
      for (int j = 0; j < d2; j++) {
        i++;
        cdn[i] += 0;
      }
      i++;
    }
    for (int k = 0; k < m; k++) {
      System.out.print(cdn[k]);
    }
  }

  public static int countOccurrencesDurations(String haystack, char needle)
  {
    int count = 0;
    for (int i = 0; i < haystack.length(); i++) {
      if (haystack.charAt(i) == needle) {
        count++;
      }
    }
    return count;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:15:34.290

如果您需要一个有效的解决方案，您可以使用它。*我根据您的评论更新了我的解决方案。*

```
public class Main {

    private static String result;

    public static void main(String[] args) {
        String durs = "NNNNNNQQNNNNNNNQNNNNNNNNNNNNNNNN";

        result = "";

        int qCount = 0;
        for(int i = 0; i < durs.length(); i++){
            if (durs.charAt(i) == 'N'){
                // Process accumulated Q's from before
                if (qCount > 0){
                    processQ(qCount);
                    qCount = 0;
                }

                // Do nothing if there is a Q next to us
                if ((i != durs.length() - 1) && durs.charAt(i + 1) == 'Q'){
                    continue;
                }

                result += "1";

            }else{
                qCount++;
            }
        }

        if (qCount > 0){
            processQ(qCount);
        }

        System.out.println(result);
    }

    private static void processQ(int qCount) {
        if (qCount > 0){
            result += (qCount + 1);
            for(int j = 0; j < qCount; j++){
                result += "0";
            }
        }
    }

} 
```

我相信这个工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:18:03.140

您可以尝试这个简化版本（与您的实现有些一致）：

```
StringBuilder sb = new StringBuilder();
char last = 0;
for (char c : durs.toCharArray()) {
    if (c == 'Q' && last == 'N') {
        sb.deleteCharAt(sb.length() - 1);
        sb.append("20");
    } else if (c == 'N') {
        sb.append("1");
    }
    last = c;
}
System.out.println(sb.toString()); 
```

# arrays - 两个排序数组的中位数的正确实现

> ID：15421007
> 
> 赞同：1
> 
> 时间：2013-03-14T21:59:47.753
> 
> 标签：arrays, median, sorted

我刚刚测试了自己实现两个排序数组的中位数，如下所述：[http](http://www.youtube.com/watch?v=_H50Ir-Tves) ://www.youtube.com/watch?v=_H50Ir-Tves 。这个实现正确吗？先感谢您。卡塔琳娜

PS：算法 compute() 为传递的数组返回 7。如果我合并两个数组并通过直接调用 median() 方法检测中值，则再次返回值 7。所以我假设这个算法行为正确，但可能存在一些边界情况和情况，当它不起作用时。你能给我反馈一下这个实现是否正确吗？

公共类中位数{

```
public static class MedianDetector {

    public MedianDetector() {}

    public int median( int[] arr) {
        if( arr.length == 1 ) return 0;
        int rest = arr.length%2;
        return arr.length/2+rest;       
    }

    public int compute( int[] a, int[] b ) {
        int aMed = median(a);
        int bMed = (a.length+b.length)/2-aMed; //median finding formula

        if( a.length == 1)
            return a[0];
        if( b.length == 1) 
            return b[0];

        if( b[bMed] <= a[aMed] && a[aMed] <= b[bMed+1] ) {
            return a[aMed];
        } else
        if( a[aMed] <= b[bMed] && b[bMed] <= b[bMed+1] ) {
            int[] _a = new int[ a.length - aMed -1 ]; 
            System.arraycopy(a, aMed+1, _a, 0, _a.length);  
            int[] _b = new int[ bMed];
            System.arraycopy(b, 0, _b, 0, _b.length);   
            return compute( _a, _b);
        } else
        if( b[bMed] <= b[bMed+1] && b[bMed+1] <= a[aMed]) {
            int[] _a = new int[ aMed];
            System.arraycopy(a, 0, _a, 0, _a.length);
            int[] _b = new int[b.length - bMed-1];
            System.arraycopy(b, bMed+1, _b, 0, _b.length);
            return compute( _a, _b);                
        } else{
            throw new RuntimeException();
        }
    }

}

public static void main(String[] args) {

    int[] a = new int[] {1,2,3,3,3,3,4,5,6,7,8,9,9,9,9};
    int[] b = new int[] {5,6,7,8,8,8,9};                                
    System.out.println( (new MedianDetector()).compute(a,b) );  //returns 7

    int[] total = new int[a.length+b.length];
    System.arraycopy(a,0,total,0,a.length);
    System.arraycopy(b,0,total,a.length,b.length);
    //total list: [1, 2, 3, 3, 3, 3, 4, 5, 5, 6, 6, 7, 7, 8, 8, 8, 8, 9, 9, 9, 9, 9]

    List<Integer> totalList = new ArrayList<Integer>();
    for( int t : total )
        totalList.add(t);
    Collections.sort(totalList);
    System.out.println(totalList);      
    System.out.println( (new MedianDetector()).median(total) );
    System.out.println( totalList.get( (new MedianDetector()).median(total) ) ); //returns 7 as well
} 
```

}

# jquery - asp.net mvc ajax错误

> ID：15421009
> 
> 赞同：0
> 
> 时间：2013-03-14T22:00:02.590
> 
> 标签：jquery, asp.net, ajax, asp.net-mvc-3

在测试通过 jQuery ajax 从用户发送到服务器的输入时，我收到此错误“从客户端检测到潜在危险的 Request.Form 值”。只有当我故意在输入 ex 中放置一个单双引号 html 字符 `"<s"c'o<>"` 作为我的用户名时，它才会出现。但是，我仍然希望能够优雅地编码和解码用户尝试输入的任何错误输入。

这是客户端jquery

```
 var email = encodeURIComponent($('#loginEmail').val());  
    var password = encodeURIComponent($('#loginPassword').val());

    $.ajax({
        async: false,
        url: 'Account/CheckLogin',
        dataType: 'JSON',
        contentType: 'application/json',
        data: {
            email: email,
            password: password
        },
        success: function (resp) {
            alert(resp.valid);
            if (resp.valid == "false") {
                isValid = false;
                $('.errorspan').show();
            }
        }
    }); 
```

控制器代码实际上并不重要，因为错误在到达第一行的断点之前就被抛出了。在我有机会处理代码之前，似乎 Asp.net 试图将其作为 ajax 传递。我的问题是 - 为什么 encodeUriComponent() 会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:06:21.170

您需要关闭服务器端请求验证，请参见[此处](http://stephenwalther.com/archive/2009/02/20/tip-48-ndash-disable-request-validation.aspx)的示例。

至于为什么会这样？微软基本上假设任何不知道如何关闭请求验证的人也不能信任如果往返到数据库并放回页面而不考虑编码可能有害的数据。多年来，这可能拯救了很多人。URI 编码不会“隐藏” `'`.NET 中的“危险”，至少在 Firefox 中是这样。

# oracle11g - ORACLE：查询表的列（类型为TIMESTAMP）

> ID：15421014
> 
> 赞同：0
> 
> 时间：2013-03-14T22:00:16.060
> 
> 标签：oracle11g, timestamp

我想查询一个表，其中一列的数据类型为时间戳。

我想用那个特定的列来查询这个表，它的值可以说是 17:00。我怎样才能做到这一点。

此刻，我有这样的语法：

```
SELECT * FROM TableName WHERE ColumnName = '17:00'; 
```

我花了一些时间，但无法弄清楚如何编写语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:20:33.453

如果您想要时间正好是 17:00:00.000000000 的任何一天的数据

```
SELECT *
  FROM tableName
 WHERE EXTRACT( hour FROM columnName ) = 17
   AND EXTRACT( minute FROM columnName ) = 0
   AND EXTRACT( second FROM columnName ) = 0 
```

如果您通过获取当前时间戳（这是最常见的方法）来填充此列，我不希望这会找到任何东西。根据生成时间戳的平台，当前时间极不可能是下午 5 点到毫秒或微秒（或纳秒）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T07:20:45.100

这也会帮助你

```
 select * from schema2.time_stamp_test  t  where t.in_time like '%17:00:00%';

--in_time column_name 
```

# php - 为两个唯一字段设置消息

> ID：15421021
> 
> 赞同：1
> 
> 时间：2013-03-14T22:00:35.100
> 
> 标签：php, codeigniter

当 is_unique 验证检查失败时，我想在用户名和电子邮件字段上设置自定义错误消息。

```
$this->form_validation->set_message('is_unique', 'Username already registered, please log in!');

$this->form_validation->set_message('is_unique', 'Email already registered, please log in!'); 
```

codeigniter 将如何在两者之间破译？我查阅了用户指南，但没有找到解决方案。有没有办法告诉它 is_unique 用于用户名，然后下一个用于电子邮件？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:29:52.117

你可以这样做。只是以不同的方式进行，并包含`%s`在您的错误消息中。

```
$this->form_validation->set_message('is_unique', '%s already registered, please log in!'); 
```

通过 CodeIgniter：

> 如果您在错误字符串中包含 %s，它将被您在设置规则时用于字段的“人类”名称替换。

来源：[http ://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#settingerrors](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#settingerrors)

# json - MtGox 网络流 api

> ID：15421023
> 
> 赞同：1
> 
> 时间：2013-03-14T22:00:46.753
> 
> 标签：json, websocket, trading, bitcoin

在这个[文档](https://en.bitcoin.it/wiki/MtGox/API/Streaming)中，我们有一个关于 webstream MtGox-API 的信息。

所以这个问题。我们有下一个：

```
query = {
  "id":id,
  "call":apicall,
  "nonce":nonce,
  "currency":cry,
  "parameters":params,
  "item":item
}
output = serialize({
           "op":"call",
           "id":id,
           "call":self.encode_and_sign(serialize(query)),
           "context":"mtgox.com"
         })
ws.send(output) 
```

*此代码基于[此示例](http://bitbin.it/l3jJWwdZ)*

我无法在 HTTP-API 和 Webstreaming API（MtGox 的）之间建立同构。你能给出一个有效的**{apicall,params,item}**例子吗？例如对于这个查询：

```
https://mtgox.com/api/1/generic/info
https://mtgox.com/api/1/generic/orders
maybe some more complex... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:39:53.307

好的，我找到了答案：

我们有基础：

```
query = {
  "id":id,
  "call":apicall,
  "nonce":nonce,
  "currency":cry,
  "parameters":params,
  "item":item
} 
```

对于 url =~ [https://mtgox.com/api/1/generic/info](https://mtgox.com/api/1/generic/info) => 结果查询将是下一个：

```
info_query = {
  "id":"1",
  "call":"private/info",
  "nonce":["0.63745499","1364911980"]
}

res_query = {
  "op":"call",
  "id":"1",
  "call":f_sing_query(apikey,secretkey,info_query),
  "context":"mtgox.com"
} 
```

其中 f_sign_query eq 到[这个](https://en.bitcoin.it/wiki/MtGox/API/Streaming#Authenticated_commands)

如果我们替换“private/info”->“private/orders”，我们将得到我们自己的订单。

现在，让我们按日期**获取交易**

```
fetch_query = {
  "id":"1",
  "call":"BTCUSD/trades/fetch",
  "nonce":["0.63745499","1364911980"],
  "params":{"since":"1363425799999469"}
} 
```

result_query 将是相同的 (!info_query <- fetch_query)

现在，add_trade 的时刻。示例：我们想以 1BTC-56.12345USD 卖出 0.01 BTC

```
add_query = {
  "id":"1",
  "call":"BTCUSD/order/add",
  "nonce":["0.63745499","1364911980"],
  "params":{"type":"ask","amount_int":str(100000000*0.01),"price_int":str(56.1234*100000)}
} 
```

等等...

# azure - 在 Azure 中为 ASP.net 设置 SqlServer 缓存失效

> ID：15421024
> 
> 赞同：0
> 
> 时间：2013-03-14T22:00:50.757
> 
> 标签：azure, cloud, sql-server-2012, cache-control, cache-invalidation

我注册了一个 Azure 帐户并部署了一个网站和一个数据库，一切都很顺利。

一开始我在免费服务上使用它，但在遇到性能问题后，将其升级为共享模型（具有相同的性能）。“链接资源”数据库是一个网络版数据库。在门户中，它看起来像这样：

![在此处输入图像描述](../Images/625e139141d6c078bbacf6c2aa972867.png)

以下代码用于在我的网站的管理部分启用缓存失效：

```
ConnectionStringSettings Config = ConfigurationManager.ConnectionStrings["MyConnectionString"];
System.Web.Caching.SqlCacheDependencyAdmin.EnableNotifications(Config.ConnectionString);
System.Web.Caching.SqlCacheDependencyAdmin.EnableTableForNotifications(Config.ConnectionString, "MyTable"); 
```

它适用于我的本地 SqlServer Express，以及我的一个托管服务提供商的实时数据库。仅在 Azure 上，我得到以下异常：

```
System.Data.SqlClient.SqlException (0x80131904): Could not find stored procedure 'sp_addrole'.
Cannot find the user 'aspnet_ChangeNotification_ReceiveNotificationsOnlyAccess', because it does not exist or you do not have permission.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean asyncWrite)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at System.Web.Caching.SqlCacheDependencyAdmin.SetupNotifications(Int32 flags, String table, String connectionString) 
```

因此，似乎缺少存储过程和“用户”（？）。我希望网络版默认具有这些功能？

如果它可用，我会选择 Express 版，但是我只能从 Azure 控制面板中选择“Web 版”和“商业版”。

有什么办法让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T22:48:25.403

您正在使用 SQL 数据库并调用存储过程**sp_addrole**。因为它反映在此存储过程不可用的错误中。

如果您查看下面的链接，您将看到 SQL 数据库中不支持 sp_addrole SP：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee336237.aspx#sqlazure](http://msdn.microsoft.com/en-us/library/windowsazure/ee336237.aspx#sqlazure)

```
The following table lists the security stored procedures that 
Windows Azure SQL Database does not support:

sp_addrole sp_dropremotelogin sp_helpuser 
```

因此，您真正需要的是首先直接在 SQL 数据库上完成此类工作，而不是直接从您的代码中使用它。

# php - PHP邮件程序不工作

> ID：15421027
> 
> 赞同：0
> 
> 时间：2013-03-14T22:01:15.490
> 
> 标签：php

嗨，我正在尝试用 php 发送电子邮件，但我一直收到此错误

致命错误：在第 2 行的 C:\wamp\www\Site\php\phpmailer.php 中找不到类 'PHPMailer'

这是我的代码如下：

```
<?php
$mail  = new PHPMailer();   
$mail->IsSMTP();

//GMAIL configerations
$mail->SMTPAuth   = true;                  
$mail->SMTPSecure = "ssl";                 
$mail->Host       = "smtp.gmail.com";      
$mail->Port       = 465;                   
$mail->Username   = "myaddress@gmail.com"; 
$mail->Password   = "password";           
//End Gmail

$mail->From       = "address@gmail.com";
$mail->FromName   = "Me";
$mail->Subject    = "Trial";
$mail->MsgHTML("this is atest message");

$mail->AddAddress("my address@gmail.com","name to");
$mail->IsHTML(true); 

if(!$mail->Send()) {//to see if we return a message or a value bolean
    echo "Mailer Error: " . $mail->ErrorInfo;
} else{
  echo "Message sent!";
  }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:03:21.317

包括 phpmailer 类！

```
require_once($_SERVER['DOCUMENT_ROOT'].'/lib/phpmailer/class.phpmailer.php'); 
```

[http://www.askapache.com/php/phpfreaks-eric-rosebrocks-phpmailer-tutorial.html](http://www.askapache.com/php/phpfreaks-eric-rosebrocks-phpmailer-tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:02:59.800

您是否尝试过在创建实例之前包含该类？例如：

```
require_once 'C:\PATH\TO\CLASS\PHPMailer.php'; 
```

# ios - 使用 Unity3D 4.1 破坏的 Everyplay - 缺少“iPhone_GlesSupport.h”

> ID：15421028
> 
> 赞同：0
> 
> 时间：2013-03-14T22:01:18.127
> 
> 标签：ios, opengl-es, unity3d, everyplay

似乎 Unity3D 4.1 不包括它曾经在 iOS 构建中使用的一些文件。Everyplay 正在创建编译错误，因为找不到“iPhone_GlesSupport.h”。看起来这是 Unity 4.1 之前的 XCode 项目中的标准文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:21:46.460

是的，它是 Unity 3.5 和 4.0 系列中的标准文件。

4.1 版本对图形管道进行了一些重大更改，我们将尽快发布 SDK 和 Unity 插件的更新。

# c# - 使网络接口接收（听到）数据包

> ID：15421032
> 
> 赞同：0
> 
> 时间：2013-03-14T22:01:27.540
> 
> 标签：c#, networking, winpcap, pcap.net

我需要让 Microsoft Loopback Adapter 使用 PcapDotNet 或其他任何东西接收（听到）一个数据包。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:32:08.130

您不能使用 PCAP 从 Windows 上的环回适配器捕获数据包。但是，您可以使用名为[RawCAP](http://www.netresec.com/?page=RawCap)的工具来执行此操作并输出一个 .pcap 文件（您可以在 WireShark 中打开该文件：[http](http://wiki.wireshark.org/CaptureSetup/Loopback) ://wiki.wireshark.org/CaptureSetup/Loopback ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:31:12.360

您的问题既不具体也不是很详细，因此您将得到广泛的解释。Microsoft .Net Framework 4.5 实际上有一个类来处理这个问题，称为`NetworkInterface`.

[Microsoft Developer Network 实际上非常详细地解释了这些类要求。](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.aspx)

> 这个特定的类封装了本地计算机上网络接口（也称为适配器）的数据。您不创建此类的实例；GetAllNetworkInterfaces 方法返回一个数组，该数组包含本地计算机上每个网络接口的此类的一个实例。

如您所见，它需要半具体的细节，否则它将失败。因为它可能会尝试未连接的适配器。您的问题让我相信，您尝试将`ping`有效数据包发送到本地适配器以验证是否有响应。

您甚至拥有`NetworkInformation`提供大量相关[信息](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.aspx)的命名空间。一个非常非常简单的实现就像：

```
Ping pingSender = new Ping();
PingOptions options = new PingOptions();

// Default Time To Live (TTL) but don't fragment request.
options.DontFragment = true;

// Create a buffer of 32 Bytes:
string data = "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa";
byte[] buffer = Encoding.ASCII.GetBytes(data);

// Timeout
int timeout = 120;

// Ping and Request Reply
pingReply reply = pingSender.Send(args[0], timeout, buffer, options);
if(reply.Status == IPStatus.Success)
{
     Console.WriteLine("Address: {0}, reply.Address.ToString());
     Console.WriteLine ("RoundTrip time: {0}", reply.RoundtripTime);
     Console.WriteLine ("Time to live: {0}", reply.Options.Ttl);
     Console.WriteLine ("Don't fragment: {0}", reply.Options.DontFragment);
     Console.WriteLine ("Buffer size: {0}", reply.Buffer.Length); 
} 
```

您可以简单地使用该`Ping`请求，`127.0.0.1`因为这是当前正在使用的网卡的环回地址。

回复将表明它是否正在接收您的数据包。

是的，Loopback 应该收到响应以知道您的卡正在使用中。但在大多数情况下可以忽略它；因为地址只会在您收到请求时显示有用的信息。

如果你不喜欢这个`Ping`想法，你的另一个选择。只是设置您`NetworkInterface`的监听更改：

```
NetworkInterface[] adapters = NetworkInterface.GetAllNetworkInterfaces();
foreach(NetworkInterface n in adapters)
{
      Console.WriteLine("   {0} is {1}", n.Name, n.OperationalStatus);
} 
```

这是测试卡响应的两种有效方法。如上所述，除非您专门向环回地址发送请求，否则环回不会主动“接收”任何内容。

希望这会有所帮助。

# mysql - 在 mySQL 中不存在

> ID：15421040
> 
> 赞同：1
> 
> 时间：2013-03-14T22:01:47.573
> 
> 标签：mysql

我已经做了大约一个星期的家庭作业，但我碰壁了。我几乎 100% 确定我需要使用 NOT EXIST 语句，但我一辈子都无法理解这些语句的嵌套。我确定我只是让这个问题变得比它需要的更难，但它就在这里。

我写的3个create table语句如下。

```
create table libraries (
    Libnum varchar(7) primary key,
    Libname varchar(40),
    Streetnum varchar(8),
    Streetname varchar(20),
    City varchar(20),
    State varchar(2),
    Zip varchar(5)
);

create table books (
    Booknum varchar(10) primary key,
    Btitle varchar(50),
    Pages smallint unsigned,
    Copyright Date
);
create table copies (
    Copynum varchar(12) primary key,
    price decimal(7 , 2 ),
    Purchase Date,
    Booknum varchar(10) references books (Booknum),
    Libnum varchar(10) references libraries (Libnum)
); 
```

我正在尝试编写的查询需要返回包含每本书副本的库的 Libname。任何帮助将非常感激。我想我需要一个不存在的书籍和副本声明，然后是副本和图书馆的另一个声明，但我完全迷失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:16:50.563

使用 MySQL 有几种不同的方法可以做到这一点。这是使用子查询的一种方法：

```
select libname
from (
  select l.libname, count(distinct b.booknum) cnt, bcount.cnt bookcount
  from (
      select count(1) cnt
      from books
      ) bcount, libraries l
    inner join copies c on l.libnum = c.libnum
    inner join books b on c.booknum = b.booknum  
  group by l.libnum
) t
where t.cnt = t.bookcount 
```

也许还有更好的细微变化：

```
select l.libname
from libraries l
  inner join copies c on l.libnum = c.libnum
  inner join books b on c.booknum = b.booknum  
group by l.libnum
having count(distinct b.booknum) = (
  select count(1) cnt
  from books
) 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!2/4db6f/7)

*编辑——我更新了上述查询以使用 DISTINCT 计数，以防您的副本表中有多个记录。希望这可以帮助。*

# php - PHP & JSON 没有显示任何结果

> ID：15421044
> 
> 赞同：0
> 
> 时间：2013-03-14T22:01:59.853
> 
> 标签：php, json

我有以下 PHP 代码，它打印出此链接中显示的结果：http: [//www.visitrack.co.uk/testdata2.php](http://www.visitrack.co.uk/testdata2.php)

```
$json = "http://api.duedil.com/sandbox/v2/company/03977902.json fields=get_all&api_key=***";
$jsonfile = file_get_contents($json);
var_dump(json_decode($jsonfile,true)); 
```

我想要做的是将结果拆分为单个 php 变量。下面的代码是我的尝试，但它不会返回错误或任何结果。

```
 $url="http://api.duedil.com/sandbox/v2/company/03977902.json?fields=get_all&api_key=2gwhy5py2zfdzpnf3ev3dsjs";
 $json = file_get_contents($url); $response = json_decode($json, TRUE);
 echo $requestId->Response->id->value; 
```

任何建议，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:04:10.773

您将第二个参数设置为`json_decode()`true。这将产生一个关联数组。不要在那里传递任何东西（因为默认情况下它是错误的）。您可以在[文档](http://php.net/manual/en/function.json-decode.php)中阅读所有相关信息。

> json_decode ( 字符串 $json [, bool $assoc = false ])

基本上，您的使用方法`->`是如何以对象的形式访问它。

```
$foo->bar 
```

在关联数组中，这看起来像 -

```
$foo['bar'] 
```

# javascript - 节点请求 - 收到错误“SSL23_GET_SERVER_HELLO：未知协议”

> ID：15421050
> 
> 赞同：73
> 
> 时间：2013-03-14T22:02:37.370
> 
> 标签：javascript, node.js, ssl, request

我正在使用[node-request](https://github.com/mikeal/request)模块，定期向一组 URL 发送 GET 请求，有时，在某些站点上会出现以下错误。

`Error: 29472:error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol:openssl\ssl\s23_clnt.c:683`

问题是我不会总是或总是在某些 URL 上得到这个错误，只是有时。此外，不能用“ `strictSSL: false`”忽略它。

我已经读到这可能与我使用错误的协议（SSLv2、SSLv3、TLS ..）发送 SSL 请求有关。但这并不能解释为什么它会不规律地发生。

顺便说一句，我在 Win 2008 服务器上运行 nodejs。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2013-08-09T08:32:02.863

当您通过错误的端口（例如 80）请求 HTTPS 资源时，您会收到此类错误消息。因此，请确保您在请求选项中指定了正确的端口，443。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-22T13:23:41.550

这完全是我的错。

我在代码的一部分上使用了标准节点 http.request，该代码应该只向 http 地址发送请求。似乎数据库有一个以随机间隔查询的 https 地址。

简单地说，我试图向 https 发送一个 http 请求。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-19T15:01:26.463

我收到此错误是因为我正在使用`require('https')`我应该使用的地方`require('http')`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-14T22:09:20.643

一些站点正在使用 SSLv2，或者至少发送 SSLv2 server-hello，而您的客户端不使用或未配置为使用 SSLv2。您需要在此处做出政策决定。SSLv2 应该在几年前就从地球上消失了，仍然使用它的网站是不安全的。但是，如果您必须与他们交谈，您只需在最后启用它，如果可以的话。如果可以的话，我会向网站所有者投​​诉。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-01-17T16:37:29.840

我遇到了这个问题（每个包都有 403 错误），我在互联网上没有找到很好的解决方法。 **我`.npmrc`的用户文件夹中的文件是错误的并且被误解了。** 我将这条 npmrc 行从

```
proxy=http://XX.XX.XXX.XXX:XXX/ 
```

到 ：

```
proxy = XX.XX.XXX.XXX:XXXX 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-10T03:31:06.367

```
var https = require('https');
https.globalAgent.options.secureProtocol = 'SSLv3_method'; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-24T14:26:30.390

连接到 Amazon RDS 时出现此错误。当它是开发服务器并且没有人使用它时，我检查了服务器状态 50% 的 CPU 使用率。

它以前工作过，连接配置中没有任何变化。重新启动服务器为我解决了这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-05T06:24:22.500

所以简而言之，

```
vi ~/.proxy_info

export http_proxy=<username>:<password>@<proxy>:8080
export https_proxy=<username>:<password>@<proxy>:8080

source ~/.proxy_info 
```

希望这可以帮助匆忙的人:)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-27T18:21:55.673

在我的情况下（网站 SSL 使用 ev 曲线）通过添加此选项**ecdhCurve: 'P-521:P-384:P-256'解决了 SSL 的问题**

```
request({ url, 
   agentOptions: { ecdhCurve: 'P-521:P-384:P-256', }
}, (err,res,body) => {
... 
```

JFYI，也许这会对某人有所帮助

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-28T02:01:51.577

我在我的 Rocketchat 上使用它通过企业代理与我的 gitlab 通信时遇到了这个错误，

因为，使用的是 https://:8080 但实际上，它适用于 http://:8080

# java - 如何为从后台任务报告给 New Relic 的错误设置“URL”

> ID：15421052
> 
> 赞同：2
> 
> 时间：2013-03-14T22:02:44.670
> 
> 标签：java, error-reporting, newrelic

New Relic 中的**事件：错误**`NewRelic.noticeError(exception)`选项卡显示我的应用程序使用. 对于那些从网络交易报告的交易，它显示了完美的交易 URL。但是对于使用注释报告的后台任务`@Trace`，它会显示线程的名称。这是没有意义的，因为线程的名称类似于`pool-23-thread-9927`.

我可以为每个后台任务分配一个显示名称或在报告错误时传递一个显示名称，以便它显示在**URL**列中而不是线程的名称中？

**注意：**如果可以避免，我宁愿*不更改线程的名称。*

**更新**

这是代码的概述。事务包含在`PingJob`其中捕获并报告异常。

```
public class PingJob implements Callable<PingStatus>
{
    @Trace(metricName = "ping", dispatcher = true)
    @Override
    public PingStatus call() {
        try {
            // calls that may throw exceptions
        }
        catch (RuntimeException e) {
            // pass to utility method to log and/or report to New Relic
            ExceptionLogger.log(e, LOG);
        }
    }
} 
```

我在 New Relic 站点上看到了异常报告`ExceptionLogger`，但在这种情况下，URL 列列出了线程的名称而不是事务的名称`ping`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:45:52.700

根据您在`@Trace`注释中设置的参数，您将看到在 New Relic UI 中记录的错误 URL 的不同值，用于后台任务中的错误。

指定`metricName`和 设置`dispatcher`为`true`，如

```
@Trace(metricName = "YourErrorNameHere", dispatcher = true) 
```

将显示的 URL 设置为*YourErrorNameHere*

指定 no`metricName`但仍设置`dispatcher`为`true`，如

```
@Trace(dispatcher = true) 
```

将显示的 URL 设置为您的类名/方法名，例如*com.example.task.BackgroundTask/run*

如果你只是单独使用`@Trace`而不设置`dispatcher`为`true`，将显示线程名称。

我们将在未来更新我们的文档以使其更加清晰。

# ios - 使用 GData 中的公共/私人日历链接访问 Google 日历（无需对密码进行硬编码）

> ID：15421055
> 
> 赞同：0
> 
> 时间：2013-03-14T22:03:01.920
> 
> 标签：ios, security, calendar, gdata, gdata-api

我目前正在创建一个应用程序，它将访问公司的谷歌日历并在表格中显示事件信息。我希望能够访问此日历，而无需使用以下语句对凭据进行硬编码：

```
[googleCalendarService setUserCredentialsWithUsername:username password:password]; 
```

我正在阅读 Google 的 API 控制台以及如何创建 OAuth 2.0 客户端 ID 来访问信息。这会是最安全的访问方式吗？GData for iOS 支持吗？我将如何整合它？除此之外，我还在考虑从公共/私人地址读取日历。这似乎给我带来的不仅仅是麻烦，因为我只是在尝试通过以下方法使用日历中提供的公共/私人地址时收到错误：`[googleCalendarService fetchPublicFeedWithURL:calendarURL feedClass:[GDataFeedCalendar class] delegate:self didFinishSelector:@selector(calendarsTicket:finishedWithFeed:error:)];`

# java - Slick 2D：渲染空指针异常

> ID：15421057
> 
> 赞同：-1
> 
> 时间：2013-03-14T22:03:18.270
> 
> 标签：java, nullpointerexception, slick2d

所以我的问题是当我创建的状态被调用时，我得到一个`NullPointerException`.

问题是，这不是`nul`我，至少我是这么认为的。有人能告诉我 NPE 来自哪里吗？

PS：这是草率的代码，因为我没有清理它。

错误出现在粗体线处。

```
public class NewPlayerState extends BasicGameState {

    private int stateID;
    private boolean mouseDown;
    private int mouseX;
    private int mouseY;
    private Random rand;
    private String allTheStats;

    private Image classPreview;
    private Image genderSelector;

    private Player player;
    private Write write;

    private String className = "paladin";
    private String name = "JamacanGuy";
    private int hitPoints = 0;
    private int str = 0;
    private int dex = 0;
    private int sta = 0;
    private int intel = 0;
    private int cha = 0;
    private boolean male = true;

    private int hpMod = 0;
    private int strMod = 0;
    private int dexMod = 0;
    private int staMod = 0;
    private int intelMod = 0;
    private int chaMod = 0;

    private Input input;

    public NewPlayerState(int stateID) {
        this.stateID = stateID;
    }

    /* 
     *  
     *  Initiation method, brings up relevant variables and get this Initializes them!
     *  
     */

    @Override
    public void init(GameContainer gc, StateBasedGame sbg)
            throws SlickException {
        // Ready the PARSER!!!!
        rand = new Random();
        write = new Write();
        // init classPreview as paladin
        classPreview = new Image("gfx/player/previews/paladin_male.png");
        // init gender icons
        genderSelector = new Image("gfx/extra/new_player/gender_selector.png");
        allTheStats = "Hitpoints: " + hitPoints + " + HP Modifier: " + hpMod + " = " + (hitPoints + hpMod) + "\n" +
                      "Strength: " + str + " + STR Modifier: " + strMod + " = " + (str + strMod) + "\n" +
                      "Dexterity: " + dex + " + DEX Modifier: " + dexMod + " = " + (dex + dexMod) + "\n" +
                      "Stamina: " + sta + " + STA Modifier: " + staMod + " = " + (sta + staMod) + "\n" +
                      "Inteligence: " + intel + " + INT Modifier: " + intelMod + " = " + (intel + intelMod) + "\n" +
                      "Charisma: " + cha + " + CHA Modifier: " + chaMod + " = " + (cha + chaMod) + "\n" 
                      ;
    }

    @Override
    public void render(GameContainer gc, StateBasedGame sbg, Graphics g)
            throws SlickException {
        renderAll(g, sbg);

    }

    @Override
    public void update(GameContainer gc, StateBasedGame sbg, int delta)
            throws SlickException {
        input = gc.getInput();

        mouseDown = input.isMouseButtonDown(0);
        mouseX = input.getMouseX();
        mouseY = input.getMouseY();

        checkGender();
        updatePreview();
        updateStatModifier();
        updateStatDisplay();
    }

    private void renderAll(Graphics g , StateBasedGame sbg) throws SlickException {

        // draw background
        g.setColor(Color.white);
        g.fillRect(875, 455, 305, 405);
        // draw background

        // draw class preview

         **classPreview.draw(880, 460, 300, 400);**  // Error is here

        // draw class preview

        // Select your class
        // Paladin
        if (mouseOver(875, 410, 80, 40)) {
            g.setColor(Color.darkGray);
            if (mouseDown) {
                className = "paladin";
            }
        } else {
            g.setColor(Color.blue);
        }
        g.fillRoundRect(875, 410, 80, 40, 5);
        g.setColor(Color.white);
        g.drawString("Paladin", 885, 420);
        // Paladin

        // Select your class

        // Select Gender
        genderSelector.draw(875, 300, 220, 100);
        // Select Gender

        // Roll for your stats
            // Roll button
                if(!mouseOver(100, 200, 100, 50)){
                    g.setColor(Color.white);
                }else if(mouseOver(100, 200, 100, 50)){
                    g.setColor(Color.darkGray);
                    if(mouseDown){
                        rollForStats();
                    }
                }
                    g.fillRoundRect(100, 200, 100, 50, 10);
                    g.setColor(Color.black);
                    g.drawString("Roll", 130, 215);
            // Roll button

            // Display stats
                    //Ugghhghghghghhghghghghgh!!!!!!
                    g.setColor(Color.white);
                    g.drawString(allTheStats, 80, 26);
            // Display stats

        // Roll for your stats

        // exit and write to file, then open new level
                if(!mouseOver(100, 600, 100, 50)){
                    g.setColor(Color.white);
                }else if(mouseOver(100, 600, 100, 50)){
                    g.setColor(Color.darkGray);
                    if(mouseDown){
                        closeUp(sbg);
                    }
                }
                g.fillRoundRect(100, 600, 100, 50, 10);

                g.setColor(Color.black);
                g.drawString("Play!", 130, 615);
        // exit and write to file, then open new level

    }

    private void closeUp(StateBasedGame sbg) throws SlickException {

        //set all that data
        player = new Player();

        player.setClassName(className);
        player.setName(name);
        player.setHealth(hitPoints);
        player.setStr(str);
        player.setDex(dex);
        player.setSta(sta);
        player.setCha(cha);
        player.setIntel(intel);
        player.setStaMod(staMod);
        player.setChaMod(chaMod);
        player.setDexMod(dexMod);
        player.setStrMod(strMod);
        player.setIntelMod(intelMod);
        player.setGender(male);

        //save to xml 
        XStream xstream = new XStream(new StaxDriver());
        String xml = xstream.toXML(player);

        write.writeToFile(xml, "save");

        // begin game
        //Main.ps.setFirstLoad(true);
        sbg.enterState(Main.PLAYSTATE, new FadeOutTransition(), new FadeInTransition());

        // prevent multiple clicks
        mouseDown = false;
    }

    private void rollForStats(){
        hitPoints = rand.nextInt(20) + 1;
        str = rand.nextInt(20) + 1;
        dex = rand.nextInt(20) + 1;
        sta = rand.nextInt(20) + 1;
        intel = rand.nextInt(20) + 1;
        cha = rand.nextInt(20) + 1;
    }

    private boolean mouseOver(int x, int y, int width, int height) {
        if (mouseX > x && mouseX < x + width && mouseY > y
                && mouseY < y + height) {
            return true;
        } else {
            return false;
        }
    }

    private void updateStatDisplay() {
        allTheStats = "Hitpoints: " + hitPoints + " + HP Modifier: " + hpMod + " = " + (hitPoints + hpMod) + "\n" +
                  "Strength: " + str + " + STR Modifier: " + strMod + " = " + (str + strMod) + "\n" +
                  "Dexterity: " + dex + " + DEX Modifier: " + dexMod + " = " + (dex + dexMod) + "\n" +
                  "Stamina: " + sta + " + STA Modifier: " + staMod + " = " + (sta + staMod) + "\n" +
                  "Inteligence: " + intel + " + INT Modifier: " + intelMod + " = " + (intel + intelMod) + "\n" +
                  "Charisma: " + cha + " + CHA Modifier: " + chaMod + " = " + (cha + chaMod) + "\n" 
                  ;
    }

    private void updatePreview() throws SlickException {
        switch(className){
        case "paladin":
            if(male){
                classPreview = new Image("gfx/player/previews/paladin_male.png");
            }else {
                classPreview = new Image("gfx/player/previews/paladin_female.png");
            }
            break;
        default: 
                classPreview = new Image("gfx/player/previews/paladin_male.png");
            break;
        }

    }

    private void checkGender() throws SlickException {
        if (!mouseOver(875, 300, 220, 100)) {
            genderSelector = new Image(
                    "gfx/extra/new_player/gender_selector.png");
        } else if (mouseOver(875, 300, 220, 100)) {
            if (mouseX > 985) {
                genderSelector = new Image(
                        "gfx/extra/new_player/male_selected.png");
                if (mouseDown) {
                    male = true;
                }
            } else {
                genderSelector = new Image(
                        "gfx/extra/new_player/female_selected.png");
                if (mouseDown) {
                    male = false;
                }
            }
        }

    }

    public void updateStatModifier() {
        switch (className) {
        case "paladin":
            if(male){
                hpMod = 6;
                strMod = 6;
                dexMod = 2;
                staMod = 4;
                intelMod = 5;
                chaMod = 3;
            }else{
                hpMod = 6;
                strMod = 3;
                dexMod = 2;
                staMod = 4;
                intelMod = 5;
                chaMod = 5;
            }
            break;
        }
    }

    @Override
    public int getID() {
        return stateID;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:35:09.237

而不是这个

```
classPreview.draw(880, 460, 300, 400); 
```

你可以试试

```
g.drawImage(classPreview, 800, ... 
```

在此处查看 slick2d Graphics 类的不同 drawImage() 方法：http: [//slick.cokeandcode.com/javadoc/org/newdawn/slick/Graphics.html](http://slick.cokeandcode.com/javadoc/org/newdawn/slick/Graphics.html)

# javascript - 您如何检测浏览器是否支持对输入 [type="file"] 的 javascript 触发点击？

> ID：15421060
> 
> 赞同：1
> 
> 时间：2013-03-14T22:03:29.653
> 
> 标签：javascript, javascript-events

由于安全问题（IE 7 / 8 和一些旧版本的 Firefox、Safari 和 Opera），有相当数量的旧浏览器不允许在文件输入上触发点击事件。我想知道一种可靠的方法来检测在这种情况下触发的点击是否失败。

目标是使用样式按钮 / a:link 来触发事件。文件输入本身可以是 opacity:0 或 visibility:hidden。不需要显示：无。

# objective-c - 从 CCNode 继承的 init 方法

> ID：15421064
> 
> 赞同：0
> 
> 时间：2013-03-14T22:03:37.443
> 
> 标签：objective-c, cocos2d-iphone, ccnode

我有一个关于在继承自 CCNode 的 Player 类中创建自定义初始化方法的问题。不确定我是否需要改为采用不同的路线并创建类方法：

`+ (id) addSprite: (CCSprite*) sprite andSpriteBatchNode: (CCSpriteBatchNode*) spriteBatch;`
更多类方法....

在`Player`课堂上，我有一个指定的 init 方法，以及一些方便的 init 方法。
`- (id) init;`
`- (id) initWithSpriteBatchNode: (CCSpriteBatchNode*) spriteBatch;`
`- (id) initWithSprite: (CCSprite*) sprite andSpriteBatchNode: (CCSpriteBatchNode*) spriteBatch;` *//指定初始化方法*

当我在我的 Level 类中实例化这个类时，我无法直接调用我的任何自定义 init 方法。我要做的是：

`Player *player = [Player node];`
`[player initWithSprite: sprite andSpriteBatchNode: spriteBatch;];`//不确定这是否正确或是否会泄漏内存

我认为任何一个都应该工作，因为它们只是在实例级别上做同样的事情，其他方法在名称上。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T00:10:05.883

我想多了，自己也糊涂了。Cocos2D 有一个类方法 eg：`[CCNode node]`method。

我可以有尽可能多的实例和类方法来创建我的自定义类的实例。它们只是方便的方法。

而不是使用默认的继承方法：
`Player *player = [Player node];`=> 基本上是 alloc/init

我可以使用我的自定义 init 方法之一：或其他东西....
`Player *player = [[[Player alloc] initWithSpriteBatchNode: spriteBatch] autorelease];
[spriteBatch addChild: playerSprite];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:13:22.110

这里的问题是，您`Player`继承的`CCNode`不是精灵或批处理节点的功能，因为 a`CCNode`只是一个逻辑节点。

相反，如果您从 a 继承，`CCSprite`则可以轻松完成所需的操作：

```
@interface CCPlayer : CCSprite
{

}

- (id) initWithSpriteBatchNode: (CCSpriteBatchNode*) spriteBatch;

@end

@implementation CCPlayer

- (id) initWithSpriteBatchNode: (CCSpriteBatchNode*) spriteBatch
{
  if ((self = [super initWithSpriteBatchNode:spriteBatch]))
  {
    // custom code
  }

  return self;
}

@end 
```

现在你可以做

```
CCPlayer *player = [[[CCPlayer alloc] initWithBatchNode:batchNode] autorelease];
[somewhere addChild:player]; 
```

当然，如果你的玩家精灵在逻辑上是一个单一的精灵，那么这很有效，如果你有，让我们说更多的部分，那么你将需要使用组合：

```
@interface CCPlayer : CCNode
{
  CCSprite *body
}

-(id)init;

@end

@implementation CCPlayer

-(id)init
{
  if ((self = [super init]))
  {
    body = [CCSprite spriteWith:...;
    [self addChild:body];
  }

  return self;
} 
```

# javascript - Web Workers - 如何实现 importScripts() 的异常处理

> ID：15421065
> 
> 赞同：3
> 
> 时间：2013-03-14T22:03:40.003
> 
> 标签：javascript, html, exception-handling, web-worker

我`importScripts()`在我的专用 Worker 中使用 Graph 从 Facebook API 获取数据。有时请求似乎超时，Chrome 开发工具只会显示红色 GET 并打印无法检索的 URL。

我尝试将其包装`importScripts()`在 try/catch 块中，但这似乎没有多大帮助。

可以通过适当的异常处理来处理该错误吗？我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:11:08.343

我认为如果失败会发生什么取决于浏览器，[Mozilla 开发文档](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)说：

```
The browser loads each listed script and executes it.
Any global objects from each script may then be used by the worker.
If the script can't be loaded, NETWORK_ERROR is thrown, and subsequent
code will not be executed. 
```

为什么 Chrome 不这样做我认为可能是 Chrome/Chromium bugtacker 的一个问题。从他们的邮件列表开始...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T00:26:15.780

我来寻找答案 - 我得到的是：

```
try { 
    importScripts('somebadPath.js') 
} catch(e) { 
    // dosomethingwith(e.message || e.code || e.name); 
} 
```

在今天的 Canary 和本周的 Chrome、Mac（13 年 8 月 27 日）中，我在 Chrome 中运行良好。也许您需要担心的是旧版本？在那种情况下，您可能不需要太担心？

# mobile - 对于有时在移动设备上连接的表单，我应该使用什么技术？

> ID：15421068
> 
> 赞同：1
> 
> 时间：2013-03-14T22:03:50.813
> 
> 标签：mobile, cross-platform, breeze, offline-caching

我想在移动设备上填写问卷/调查并将答案发送回数据库。我是一位经验丰富的 Web 应用程序开发人员，使用 asp.net/mvc 和 sql server。

我想要一个跨平台的移动解决方案，可以应对有时断开连接的问题。

问卷相对简单，因为它们被分配给调查员并由同一名调查员回答。所以不需要真正的同步/冲突解决。如果移动设备可以依赖始终保持连接，那么我将使用标准表单来完成所有操作。

所以，现在我面临着创建一个解决方案，让用户在断开连接时继续输入数据，让他们在断开连接时浏览表单，然后在连接后立即将其全部发布回来。我一直在关注淘汰赛、放大和主干。谁能告诉我从哪里开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T14:19:32.973

您正在寻找的是一个离线应用程序。您可以使用 HTML5 离线 API。一些框架将在此过程中为您提供帮助。

淘汰赛，放大和骨干都很棒。还可以看一下breezejs 来管理你的丰富数据（breeze 还提供离线功能）。

如果您不想使用微风，那么您必须手动将其连接到本地存储中，然后应用程序上线，从本地存储中提取数据并一次性发送。

希望有帮助！苏杰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:05:15.993

您可以尝试 jaydata ( [http://jaydata.org](http://jaydata.org) )，它很容易使用它在本地存储数据，然后使用 oData、WebApi 或 REST 将数据上传到服务器，它是免费和开源的

# android - 如何处理 super.onCreate 中的异常？

> ID：15421073
> 
> 赞同：2
> 
> 时间：2013-03-14T22:04:05.590
> 
> 标签：android, google-maps, mapactivity

有没有一种安全的方法来处理抛出的异常`super.onCreate(savedInstanceState)`？

我的一小部分用户遇到了这个错误

```
java.lang.NoClassDefFoundError - android.security.MessageDigest 
```

原因在[this question](https://stackoverflow.com/questions/11407685/what-is-android-security-messagedigest)中讨论过，但基本上`onCreate`对于MapActivity类可以抛出一个`NoClassDefFoundError`。我担心提前检测到这种情况可能不是未来的证据。

我认为我的班级（扩展 MapActivity）最安全的解决方案是捕获`NoClassDefFoundError`并启动一个指向 Google 地图的 URL，例如

```
 try {            
        super.onCreate(savedInstanceState);
    } catch (NoClassDefFoundError err) {
        StringBuilder url = new StringBuilder(
                "http://maps.google.com/maps?q=").append(latitude)
                .append(",").append(longitude).append("&z=18");

        Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse(url.toString()));
        startActivity(i);
        finish();
        return;
    } 
```

但是，我担心我的代码会`SuperNotCalledException`在`NoClassDefFoundError`发生时崩溃。

在对 super.onCreate 的调用中是否有一种安全的方法来处理异常/错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T23:28:07.570

> A very small number of my users are hitting this error

They are users running pirated versions of the Google Maps subsystem. Google Maps works just fine on all versions of Android, and licensees will get a proper version. However, mentally-challenged pirates will sometimes use an old pirated set of Maps binaries on a newer device, leading to this issue.

> However, I'm worried that my code will crash with a SuperNotCalledException when the NoClassDefFoundError occurs.

There is a good chance that this will indeed be the case, or some other exception, as `startActivity()` may crash because of the missing `super.onCreate()`. So might `finish()`, for that matter. You are certainly welcome to try it, though.

> Is there a safe way to handle exceptions/errors in a call to super.onCreate?

Not generally.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:49:31.783

MapActivity 已被弃用，取而代之的是 MapFragment，它是 Google Play 服务的一部分。我认为这个新的 API 是向后兼容的。

我建议您事先检测 MapActivity。它将是面向未来的，因为 MapActivity API 不会改变。MapFragment API 需要 Google Play Services APK；该文档向您展示了如何验证它是否存在并在不存在时提示用户。APK 可从 Google Play 商店获得，并由 OTA 提供。

# java - LWJGL - 如何将 (0, 0) 设置为左 上角？

> ID：15421077
> 
> 赞同：0
> 
> 时间：2013-03-14T22:04:26.243
> 
> 标签：java, coordinates, lwjgl, coordinate-systems

我注意到在 LWJGL 中，(0, 0) 坐标位于左下角。当 (0, 0) 位于左上角时，我习惯并发现它更合乎逻辑。我想知道是否可以使 (0, 0) 成为屏幕的左上角。

是的，我确实知道 OpenGL 的默认 (0, 0) 是左下角，但我希望有办法解决这个问题。

提前致谢，
ixenocider

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:40:59.347

我想到了。

你通常把这个放在哪里：

```
GL11.glOrtho(0, screenWidth, 0, screenHeight, 1, -1); 
```

用这个：

```
GL11.glOrtho(0, screenWidth, screenHeight, 0, 1, -1); 
```

# facebook - 如何刷新 FaceBook Graph API 数据

> ID：15421078
> 
> 赞同：0
> 
> 时间：2013-03-14T22:04:28.970
> 
> 标签：facebook, facebook-graph-api

每次我对图形 api 元数据进行更改（例如添加/删除用户）时`fb:admins`，我都会看到更改不会发生，直到我调用流动 URL：

[https://developers.facebook.com/tools/debug/og/object?q=](https://developers.facebook.com/tools/debug/og/object?q=)

我的问题是刷新的正确方法是什么？每次进行更改时，我是否应该（务实地）调用此 URL？或者可能有另一个专用的 API 来进行刷新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:27:30.027

根据[文档](https://developers.facebook.com/docs/opengraph/using-objects/)，您可以通过点击端点来触发对象的抓取。

```
POST /?id={object-instance-id or object-url}&scrape=true 
```

此外，无论如何，Facebook 都会每周抓取一次对象。

# c# - 如何保护 ASP.NET 表单身份验证中的用户数据

> ID：15421079
> 
> 赞同：0
> 
> 时间：2013-03-14T22:04:30.220
> 
> 标签：c#, asp.net, iis, web-config

我正在制作一个 ASP.NET 网站并正在使用`Forms Authentication`；我正在为所有安全部分使用自定义提供程序（优秀的 TinyProviders 基于 xml 的数据提供程序）。

目前，用户数据存储（一个名为 Users.xml 的 xml 文件）包含完全未加密的数据：

```
<?xml version="1.0"?>
<ArrayOfXmlUser xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <XmlUser>
    <UserKey>a34cc5b6-a0b9-4a5e-b055-951w799a8607</UserKey>
    <UserName>Bill</UserName>
    <Password>billspassword123</Password>
    <PasswordSalt />
    <Email>bill@contoso.com</Email>
    <PasswordQuestion />
    <PasswordAnswer />
    <CreationDate>2013-03-14T21:46:36.7990912+00:00</CreationDate>
    <LastActivityDate>2013-03-14T21:47:50.3483942+00:00</LastActivityDate>
    <LastLoginDate>2013-03-14T21:47:50.3483942+00:00</LastLoginDate>
    <LastPasswordChangeDate>2013-03-14T21:46:36.7990912+00:00</LastPasswordChangeDate>
    <LastLockoutDate>9999-12-31T23:59:59.9999999</LastLockoutDate>
    <IsApproved>true</IsApproved>
    <IsLockedOut>false</IsLockedOut>
    <FailedPasswordAttemptCount>0</FailedPasswordAttemptCount>
  </XmlUser>
</ArrayOfXmlUser> 
```

我如何配置网站以执行以下操作：

*   存储密码哈希（而不是纯文本）
*   加密用户文件中的所有（或最好是电子邮件和姓名）数据

我希望从我那里做到这一点，`Web.config`因为我使用的是 TinyProvider 的二进制发行版。

这是我`Web.config`到目前为止：

```
<?xml version="1.0" encoding="utf-8"?>
<authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>
    <profile enabled="true" defaultProvider="XmlProfileProvider">
        <providers>
            <clear/>
            <add name="XmlProfileProvider"
                  applicationName="SampleWebsite"
                  type="Artem.Web.Security.XmlProfileProvider"/>
        </providers>
    </profile>
    <membership defaultProvider="XmlMembershipProvider">
          <providers>
              <clear/>
              <add name="XmlMembershipProvider"
                    applicationName="SampleWebsite"
                    type="Artem.Web.Security.XmlMembershipProvider"
                    minRequiredPasswordLength="1"
                    minRequiredNonAlphanumericCharacters="0"
                    requiresQuestionAndAnswer="false"
                    requiresUniqueEmail="false"
                    passwordFormat="Clear"/>
          </providers>
      </membership>
    <roleManager enabled="true" cacheRolesInCookie="false" defaultProvider="XmlRoleProvider">
        <providers>
            <clear/>
            <add name="XmlRoleProvider"
                  applicationName="SampleWebsite"
                  type="Artem.Web.Security.XmlRoleProvider"/>
        </providers>
    </roleManager> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:20:58.567

所以对于你的第一个问题：（存储密码哈希（而不是纯文本））

答案是您将成员资格提供程序节点中的 passwordFormat 从“Clear”更改为“Hashed”，尽管我在 XmlUser 节点中没有看到 passwordFormat 值，这让我有点担心。试试看，看看效果如何。

至于你的第二个问题，你如何加密数据的价值，我想不出你可以从 web.config 中做到这一点。通常，您将依靠您的提供商为您处理，因此如果您选择的提供商不提供该选项，我不知道您将能够做什么。

# wcf - WCF 服务如何知道使用什么证书来解密传入的安全令牌？

> ID：15421086
> 
> 赞同：3
> 
> 时间：2013-03-14T22:05:00.463
> 
> 标签：wcf, security, service, token, wif

我正在使用 .NET 4.5 和基于令牌的安全性实现 WCF 服务。在客户端，我`myfact.CreateChannelWithIssuedToken()`使用之前从 STS 检索到的令牌进行调用，当我使用此通道调用服务时，我收到以下错误（在 WCF 服务跟踪中）：

```
Cannot resolve KeyInfo for decryption: KeyInfo 'SecurityKeyIdentifier
    (
    IsReadOnly = False,
    Count = 1,
    Clause[0] = EncryptedKeyIdentifierClause(EncryptedKey = qDJDOHUxLxDP8/5baRbY6LrnIX2cYLGwC8b9xDQbEfLsYhcowtszecfWK93dFQHBNV+COHSZpKapJlzrbi12QlObuhfpB08vIxrgXCLg69w4PfAq/jzJcK3N16GHHADSE6XT0KVBXQbcwJqyrELLGAc9ve3cnn52EDg6rkVKBNg=, Method 'http://www.w3.org/2001/04/xmlenc#rsa-oaep-mgf1p')
    ) ', available tokens 'System.ServiceModel.Security.AggregateSecurityHeaderTokenResolver'. 
```

我怀疑这是因为服务无法解密传入的安全令牌，但我不知道为什么会这样。该证书位于 LocalMachine\My 存储中，并具有关联的私钥。

WCF 如何找到必要的证书，为什么在我的情况下找不到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:14:27.700

事实证明，服务证书是使用的证书。当我纠正这个（通过`<serviceCertificate .../>`旋钮：

```
<behavior name="my_service_behavior">
    <serviceCredentials useIdentityConfiguration="true" identityConfiguration="identity">
        <serviceCertificate 
            findValue="..." 
            x509FindType="FindByThumbprint" 
            storeName="My" 
            storeLocation="LocalMachine" />
    </serviceCredentials>
</behavior> 
```

一切都开始工作了。

# php - php变量包括错误全局

> ID：15421088
> 
> 赞同：0
> 
> 时间：2013-03-14T22:05:07.340
> 
> 标签：php, jquery, html, refresh, undefined

我的主要 PHP 页面是一个 1 文本框表单。表单提交给自身并显示从数据库中提取的信息 (machine.php?pc=workstation101)。

同样在这个页面上，我有一个单独的 ping.php 包含，它将每 60 秒 ping 一次搜索的机器。这被放置在一个 div 中，jQuery 自动刷新这个外部 ping.php 页面。

如果我禁用 jQuery 刷新代码（如下所示）...

```
<script>
 $(document).ready(function() {
      $("#pinger").load("inc/ping.php");
      var refreshId = setInterval(function() {
        $("#pinger").load('inc/ping.php');
      }, 60000);
    $.ajaxSetup({ cache: false });
  });
</script> 
```

...包含文件工作正常。显示正确的 ping 状态。但是，我必须使用 $GLOBALS['variable'] 从父 index.php 页面访问变量。但是当我这样做时它工作正常。

现在，如果我启用刷新 jQuery，我会收到大量“注意：未定义索引：....”错误。我已将其范围缩小到 $_GET['pc'] 在重新加载 DIV 内容时不会以任何形式传递。

它作为一个包含。作为 jQuery 加载页面失败。也许我可以将包含页面编码到索引页面中并在没有外部页面的情况下刷新 div 内容？似乎找不到适用于该方法的代码。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:12:24.973

包含一个 PHP 页面和从浏览器中获取它是两件完全不同的事情。

当您告诉 jQuery 加载 inc/ping.php 时，就好像您在另一个浏览器窗口中加载了该页面一样。原来的 PHP 页面已经完成，它的变量不再存在。

在这种情况下，您只需要构造一个类似 /dynamic/ping.php?pc=foo 的 URL 并加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:21:39.817

我不完全确定您要达到的目标，我无法发表评论，但 jquery 看起来不正确。首先我假设您想将文本框的值传递给 PHP 后端？

在脚本中试试这个：

```
<script>
    function ping(){
        $.ajax("inc/ping.php?pc="+encodeURIComponent($("#your_textbox_id").val()),{})
            .success(function(data)){
                // Your php return values are here
            }).fail(function(error){
                // alert('somthing went wrong');
            })
        });
        window.setTimeout("ping()", 60000);
    }

    $(document).ready(function(){
        ping();
    });
</script> 
```

请注意，这是未经测试的，可能有语法错误......但可能会解决您的问题

# git - 仅从 repo git 中提取更改

> ID：15421093
> 
> 赞同：0
> 
> 时间：2013-03-14T22:05:19.203
> 
> 标签：git, github

我使用 git 更新我的网站并从笔记本更新 repo，然后在推送更改之前，我必须将 repo 克隆到 public_http 文件夹

有什么方法可以只克隆最后的更改？？？

或者我必须克隆everychange？

问题是我在 Windows 7 上使用 msysgit 和 tortoisegit，在服务器上安装了 debian 64 位和 git-core 和 gitolite ......推送更改工作正常但问题是当我必须将 repo 克隆到 public_http 文件夹时必须重新编译一些模块，因为它们是为 Windows 编译的，所以我必须在每个克隆过程中再次为 debian 编译... tnx all

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:25:18.837

你为什么要克隆到 public_http？！每次克隆时都会创建一个 .git 存储库；但是一旦你有了一个 .git 存储库，你需要做的就是“git pull”。也就是说，正常使用是“git clone”一次，然后重复“git pull”。

假设您有一个共享存储库（例如在 github 上）。您使用本地 .git 存储库在笔记本上进行开发。当您准备好更新您的网站时，您可以“git push origin”（假设“origin”在 github 上）。之后您登录您的网络服务站点，停止您的网络服务器，执行“git pull origin”，根据需要重新编译，重新启动您的网络服务器。

# c# - 在没有 MS Office 的情况下创建 PDF 文件

> ID：15421099
> 
> 赞同：-1
> 
> 时间：2013-03-14T22:05:53.027
> 
> 标签：c#

我必须通过从数据库返回一些数据来创建 PDF 报告。如何在不使用 MS Office 的情况下创建 PDF 文件？我可以使用 SSRS 吗？如果是，我该怎么做？但我不想使用水晶报表..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:23:51.327

我建议**iTextSharp** ，一个非常易于使用的**iText** java 库的 C# 端口。它可以在以下[链接](http://sourceforge.net/projects/itextsharp/)中找到。几年来，我在 ASP.NET 项目中经常使用它来生成 pdf 文档。

# c++ - 内存和文件加载 C++？

> ID：15421100
> 
> 赞同：0
> 
> 时间：2013-03-14T22:05:57.493
> 
> 标签：c++, file, memory, loading

我编写了一个加载文件的程序，我想知道是否有人可以解释为什么第二次和后续加载文件比首次加载同一文件更快？
例如：
1、第一次加载大文件（500MB）时，比后续加载相同文件的时间要长。^(第二)次加载文件只需要一小部分时间。
即使 RAM 使用率介于两者之间也会出现这种情况（重新启动程序时也会出现这种行为）。

2\. 如果我重新启动我的 PC 和/或一段时间后不运行程序或重新加载文件，情况 #1 再次发生。

环境：

*   C++
*   对比 2010 (MFC)
*   Windows XP 家庭版 32 位
*   文件加载：我尝试过 fread() 和其他方法，但结果都相似。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T22:10:34.133

您的操作系统会将文件缓存在未使用的内存中。参见[维基百科](http://en.wikipedia.org/wiki/Page_cache)。这将在重新启动后消失，或者如果您使用大量内存，或者如果您打开更多文件。详细信息因您的操作系统而异。

对于现代计算机体系结构的更广泛的概述， Herb Sutter 的[这个演讲](http://www.youtube.com/watch?v=L7zSU9HI-6I)很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:10:35.347

一种可能的解释是您的硬盘驱动器可能有缓存。第一次读取文件时，您是直接从盘片中读取的。下一次，驱动器可以从缓存中提供它。在延迟（或重新启动）之后，文件的内容不再在缓存中，因此它再次从盘片中提供。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T23:33:13.000

在现代操作系统中，没有“未使用的内存”之类的东西。那将是完全的浪费。操作系统所做的是将文件、目录结构、文件元数据（例如给定文件的数据在磁盘上的位置）和其他有用数据的副本保存在“未使用的”内存中。

因此，当您读取文件时，它会被加载到内存中。假设有足够的“未使用”内存，该文件确实会在那里放置很长时间。最终它可能会被踢出，因为在您正常使用计算机时，电子邮件软件、网络浏览器、文件内容索引器、杀毒扫描器、网络时间同步器、地址簿到手机同步器以及所有其他背景代码在你的系统中运行，所有这些东西都会消耗一点“未使用”的内存。

所以，是的，文件被缓存了。在具有 4 或 8GB RAM 且未使用所有 RAM 的系统中，一个 500MB 的文件可能会在那里放置几分钟、几小时甚至几天。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T22:10:46.590

如今，大多数硬盘驱动器都有缓存，因此一旦加载一次，它就在缓存中。您可能不想多次加载文件！

# linux - 从 shell 脚本中的一行中剪切特定部分

> ID：15421104
> 
> 赞同：1
> 
> 时间：2013-03-14T22:06:07.097
> 
> 标签：linux, shell, awk

我是 shell 脚本的新手。我有一个文件包含一些这样的记录：

```
aaaa,-1,0
bbbb,2,3
cccc,-5,-10
dddd,0,100 
```

我想编写一个脚本，使列表如下所示：

```
1 aaaa -1 0
2 bbbb  2 3
3 cccc -5 -10
4 dddd  0 100 
```

有人可以帮我解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:12:50.307

试试这一行：

```
awk '{gsub(/,/," ");print NR,$0}'  file 
```

如果你想有更好的输出，试试这个：

```
awk '{gsub(/,/," ");print NR,$0}'  file|column -t 
```

例子：

```
kent$  echo "aaaa,-1,0
bbbb,2,3
cccc,-5,-10                                            
dddd,0,100"|awk '{gsub(/,/," ");print NR,$0}'          
1 aaaa -1 0
2 bbbb 2 3
3 cccc -5 -10
4 dddd 0 100 
```

与`|column -t`：

```
kent$  echo "aaaa,-1,0
bbbb,2,3
cccc,-5,-10                                            
dddd,0,100"|awk '{gsub(/,/," ");print NR,$0}'|column -t
1  aaaa  -1  0
2  bbbb  2   3
3  cccc  -5  -10
4  dddd  0   100 
```

# ios - 将 MKMapView 居中在 pin 下方的点 N 像素上

> ID：15421106
> 
> 赞同：37
> 
> 时间：2013-03-14T22:06:09.290
> 
> 标签：ios, objective-c, mapkit, core-location

想要将 MKMapView 居中在**给定引脚下方 N 像素**的点上（*在当前 MapRect 中可能可见也可能不可见*）。

我一直在尝试使用各种游戏来解决这个问题`-(CLLocationCoordinate2D)convertPoint:(CGPoint)point toCoordinateFromView:(UIView *)view`，但没有成功。

有人走过这条路（*没有双关语*）吗？

![在此处输入图像描述](../Images/af21f9245ab65de2f3ec4b635011183c.png)

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-14T22:35:46.447

最简单的技术就是将地图向下移动，比如说从 40% 的位置，`coordinate`利用`span`的。如果您不需要实际像素，而只需要将其向下移动，以便问题位于地图顶部附近（例如距离顶部 10%）：`region``MKMapView``CLLocationCoordinate2D`

```
CLLocationCoordinate2D center = coordinate;
center.latitude -= self.mapView.region.span.latitudeDelta * 0.40;
[self.mapView setCenterCoordinate:center animated:YES]; 
```

* * *

如果您想考虑相机的旋转和俯仰，上述技术可能不够用。在这种情况下，您可以：

*   确定视图中要将用户位置移动到的位置；

*   将其转换为`CLLocation`;

*   计算当前用户位置与新的期望位置的距离；

*   将相机从地图相机的当前航向沿 180° 方向移动该距离。

例如在 Swift 3 中，类似：

```
var point = mapView.convert(mapView.centerCoordinate, toPointTo: view)
point.y -= offset
let coordinate = mapView.convert(point, toCoordinateFrom: view)
let offsetLocation = coordinate.location

let distance = mapView.centerCoordinate.location.distance(from: offsetLocation) / 1000.0

let camera = mapView.camera
let adjustedCenter = mapView.centerCoordinate.adjust(by: distance, at: camera.heading - 180.0)
camera.centerCoordinate = adjustedCenter 
```

哪里`CLLocationCoordinate2D`有以下内容`extension`：

```
extension CLLocationCoordinate2D {
    var location: CLLocation {
        return CLLocation(latitude: latitude, longitude: longitude)
    }

    private func radians(from degrees: CLLocationDegrees) -> Double {
        return degrees * .pi / 180.0
    }

    private func degrees(from radians: Double) -> CLLocationDegrees {
        return radians * 180.0 / .pi
    }

    func adjust(by distance: CLLocationDistance, at bearing: CLLocationDegrees) -> CLLocationCoordinate2D {
        let distanceRadians = distance / 6_371.0   // 6,371 = Earth's radius in km
        let bearingRadians = radians(from: bearing)
        let fromLatRadians = radians(from: latitude)
        let fromLonRadians = radians(from: longitude)

        let toLatRadians = asin( sin(fromLatRadians) * cos(distanceRadians)
            + cos(fromLatRadians) * sin(distanceRadians) * cos(bearingRadians) )

        var toLonRadians = fromLonRadians + atan2(sin(bearingRadians)
            * sin(distanceRadians) * cos(fromLatRadians), cos(distanceRadians)
                - sin(fromLatRadians) * sin(toLatRadians))

        // adjust toLonRadians to be in the range -180 to +180...
        toLonRadians = fmod((toLonRadians + 3.0 * .pi), (2.0 * .pi)) - .pi

        let result = CLLocationCoordinate2D(latitude: degrees(from: toLatRadians), longitude: degrees(from: toLonRadians))

        return result
    }
} 
```

因此，即使相机倾斜并且朝向正北以外的方向，这也会将用户的位置（居中，下部十字准线所在的位置）向上移动 150 像素（上部十字准线所在的位置），产生如下内容：

[![在此处输入图像描述](../Images/ec66adfbf3b7587c9c7d29de9887245f.png)](https://i.stack.imgur.com/IpttQ.gif)

显然，您应该注意退化的情况（例如，您距离南极 1 公里，并且您尝试将地图向上移动 2 公里；您使用的摄像机角度倾斜到所需的屏幕位置超过地平线；等），但对于实际的、真实的场景，类似上面的东西可能就足够了。显然，如果不让用户改变摄像头的俯仰角，答案就更简单了。

* * *

**原始答案：用于移动注释`n`像素**

如果您有 a `CLLocationCoordinate2D`，您可以将其转换为 a `CGPoint`，将其移动 x 个像素，然后将其转换回 a `CLLocationCoordinate2D`：

```
- (void)moveCenterByOffset:(CGPoint)offset from:(CLLocationCoordinate2D)coordinate
{
    CGPoint point = [self.mapView convertCoordinate:coordinate toPointToView:self.mapView];
    point.x += offset.x;
    point.y += offset.y;
    CLLocationCoordinate2D center = [self.mapView convertPoint:point toCoordinateFromView:self.mapView];
    [self.mapView setCenterCoordinate:center animated:YES];
} 
```

您可以通过以下方式调用它：

```
[self moveCenterByOffset:CGPointMake(0, 100) from:coordinate]; 
```

不幸的是，这仅`coordinate`在开始之前可见时才有效，因此您可能必须先转到原始坐标，然后调整中心。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-03T10:14:27.750

可靠地做到这一点的唯一方法是使用以下内容：

```
- (void)setVisibleMapRect:(MKMapRect)mapRect edgePadding:(UIEdgeInsets)insets animated:(BOOL)animate 
```

为了做到这一点，给定一个您想要居中的地图区域，您必须将地图区域转换为 MKMapRect。显然，使用边缘填充作为像素偏移。

请参阅此处： [将 MKCoordinateRegion 转换为 MKMapRect](https://stackoverflow.com/questions/9270268/convert-mkcoordinateregion-to-mkmaprect)

评论：我觉得这是唯一的方法很奇怪，因为 MKMapRect 不是通常与 MKMapView 一起使用的东西——所有的转换方法都是针对 MKMapRegion 的。但是，好的，至少它有效。在我自己的项目中测试。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-09-20T21:13:05.163

对于斯威夫特：

```
import MapKit

extension MKMapView {

func moveCenterByOffSet(offSet: CGPoint, coordinate: CLLocationCoordinate2D) {
    var point = self.convert(coordinate, toPointTo: self)

    point.x += offSet.x
    point.y += offSet.y

    let center = self.convert(point, toCoordinateFrom: self)
    self.setCenter(center, animated: true)
}

func centerCoordinateByOffSet(offSet: CGPoint) -> CLLocationCoordinate2D {
    var point = self.center

    point.x += offSet.x
    point.y += offSet.y

    return self.convert(point, toCoordinateFrom: self)
}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-15T00:44:16.607

一种简单的解决方案是使地图视图的框架大于可见区域。然后将您的图钉放置在地图视图的中心，并将所有不需要的区域隐藏在另一个视图后面或屏幕边界之外。

让我详细说明。如果我查看您的屏幕截图，请执行以下操作：

你别针和底部之间的距离是 353 像素。因此，让您的地图视图框架的高度是两倍：706 像素。您的屏幕截图高度为 411 像素。将框架定位在 706px - 411px = -293 像素的原点。现在将您的地图视图以图钉的坐标居中，您就完成了。

**2014 年 3 月 4 日更新：**

我用 Xcode 5.0.2 创建了一个小示例应用程序来演示：[http ://cl.ly/0e2v0u3G2q1d](http://cl.ly/0e2v0u3G2q1d)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-28T08:27:28.247

**斯威夫特 3 更新**

更新了缩放功能

```
func zoomToPos() {

        let span = MKCoordinateSpan(latitudeDelta: 0.1, longitudeDelta:  0.1)

        // Create a new MKMapRegion with the new span, using the center we want.
        let coordinate = moveCenterByOffset(offset: CGPoint(x: 0, y: 100), coordinate: (officeDetail?.coordinate)!)
        let region = MKCoordinateRegion(center: coordinate, span: span)

        mapView.setRegion(region, animated: true)

    }

    func moveCenterByOffset (offset: CGPoint, coordinate: CLLocationCoordinate2D) -> CLLocationCoordinate2D {
        var point = self.mapView.convert(coordinate, toPointTo: self.mapView)
        point.x += offset.x
        point.y += offset.y
        return self.mapView.convert(point, toCoordinateFrom: self.mapView)
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-20T16:59:01.227

在阅读了这个帖子广告之后，尤其是放大注释后，我最终得到了以下程序：

** 以注释为中心：**

```
- (void) centerOnSelection:(id<MKAnnotation>)annotation
{
    MKCoordinateRegion region = self.mapView.region;
    region.center = annotation.coordinate;

    CGFloat per = ([self sizeOfBottom] - [self sizeOfTop]) / (2 * self.mapView.frame.size.height);
    region.center.latitude -= self.mapView.region.span.latitudeDelta * per;

    [self.mapView setRegion:region animated:YES];
} 
```

** 放大注释：**

```
- (void) zoomAndCenterOnSelection:(id<MKAnnotation>)annotation
{
    DLog(@"zoomAndCenterOnSelection");

    MKCoordinateRegion region = self.mapView.region;
    MKCoordinateSpan span = MKCoordinateSpanMake(0.005, 0.005);

    region.center = annotation.coordinate;

    CGFloat per = ([self sizeOfBottom] - [self sizeOfTop]) / (2 * self.mapView.frame.size.height);
    region.center.latitude -= self.mapView.region.span.latitudeDelta * span.latitudeDelta / region.span.latitudeDelta * per;

    region.span = span;

    [self.mapView setRegion:region animated:YES];
} 
```

`-(CGFloat) sizeOfBottom`并且`-(CGFloat) sizeOfTop`从布局指南中返回覆盖地图视图的面板的高度

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-25T22:13:37.167

作为公认答案的替代方案，我建议您最初的直觉是正确的。您可以严格在地图视图像素坐标空间内工作以获得偏移和最终定位。然后使用从位置到屏幕视图的转换调用，您可以获得最终位置并设置地图中心。

这将适用于旋转的相机并且相对于屏幕空间。在我的情况下，我需要将地图放在一个大头针上，并使用一个偏移量来说明一个地图抽屉。

这是转换调用

```
func convert(_ coordinate: CLLocationCoordinate2D, toPointTo view: UIView?) -> CGPoint
func convert(_ point: CGPoint, toCoordinateFrom view: UIView?) -> CLLocationCoordinate2D 
```

这是一个 swift 4 示例

```
//First get the position you want the pin to be (say 1/4 of the way up the screen)
let targetPoint = CGPoint(x: self.frame.width / 2.0, y: self.frame.height * CGFloat(0.25))

//Then get the center of the screen (this is used for calculating the offset as we are using setCenter to move the region
let centerPoint = CGPoint(x: self.frame.width / 2.0, y: self.frame.height / 2.0)

//Get convert the CLLocationCoordinate2D of the pin (or map location) to a screen space CGPoint
let annotationPoint = mapview.convert(myPinCoordinate, toPointTo: mapview)

//And finally do the math to set the offsets in screen space                
let mapViewPointFromAnnotation = CGPoint(x: annotationPoint.x + (centerPoint.x - targetPoint.x), y: annotationPoint.y + (centerPoint.y - targetPoint.y))

//Now convert that result to a Coordinate
let finalLocation = self.convert(mapViewPointFromAnnotation, toCoordinateFrom: mapview)

//And set the map center
mapview.setCenter(finalLocation, animated: true) 
```

* * *

## 回答 #8

> 赞同：-6
> 
> 时间：2013-03-14T22:27:23.253

看看这个方法`MKMapView`：

```
- (void)setCenterCoordinate:(CLLocationCoordinate2D)coordinate animated:(BOOL)animated 
```

# macos - Mac 别名图标更改为默认的“ico”图标

> ID：15421111
> 
> 赞同：1
> 
> 时间：2013-03-14T22:06:27.783
> 
> 标签：macos, icons, ico

为了更改别名的图标，我在 Photoshop 中复制了一张 PNG 图像（128x128、64x64 和 32x32）。单击别名，然后单击“获取信息”，选择左上角的图标并单击粘贴。该文件显示更新的时间戳，图标更改但未更改为我想要的图像。

我也尝试从其他应用程序复制图标，但结果相同。

[结果图标](http://www.iconlooker.com/icon/mac-os-x-icons-mac-os-x-panther-icons-file-types-preview-ico_w24517.html)的示例

这可能吗？难道我做错了什么？我知道我可以使用 automator 定位文件然后打开它，但是我发现在较新版本的 OSX 上运行生成的应用程序存在一些问题。

背景：Mac OS X 10.6.8 但是我可以使用 10.8 的机器，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T16:29:55.283

您必须先将该文件转换为 ICNS。

使用[img2icns](http://www.img2icnsapp.com/)将 PNG 图片转换为 ICNS，复制生成的 ICNS 文件并将其粘贴到“获取信息”窗口中与之前相同的位置（在左上角图标中）。

# perl - 是什么让模块成为实用模块？

> ID：15421114
> 
> 赞同：8
> 
> 时间：2013-03-14T22:06:32.073
> 
> 标签：perl

我正在查看`base.pm`Perl 发行版中的源代码，但我看不出它与“非实用”模块的区别。如果`use base`是“pragma”，它与任何模块`use Foo`在哪里有根本不同吗？`Foo`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T22:18:43.997

pragma 没有明确的定义。最接近官方的东西是[perlpragma](http://perldoc.perl.org/perlpragma.html)。

*   它们通常修改解析器的语言或行为。
*   它们的效果通常是词法范围的。

我个人认为这些是要求（perlpragma 似乎也是如此），但核心模块[vars](http://search.cpan.org/perldoc?vars)和[subs](http://search.cpan.org/perldoc?subs)被记录为 pragma，即使它们的效果不是词法范围的。

[base](http://search.cpan.org/perldoc?base)和[lib](http://search.cpan.org/perldoc?lib)不符合任何一个条件。他们所做的是向“Perl 本身”提供信息。我想这也有资格作为一个编译指示。

我认为我的模块[`use syntax qw( loop );`](http://search.cpan.org/perldoc?Syntax%3a%3aFeature%3a%3aLoop)是务实的。（无耻的插头！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T01:37:04.660

虽然该名称经常在许多情况下使用，但我通常将 pragma 视为使用[perldoc perlpragma](http://perldoc.perl.org/perlpragma.html)`%^H`中记录的提示哈希的东西。这意味着主要区别在于该操作必须在编译时进行；工作，而（不是在开始）没有。这是“实用模块”（根据此定义）与其他模块之间的关键区别。根据这个定义，,或都不是 pragma。`use``require``vars``subs``base``lib`

# wordpress - 修改 Wordpress 自定义帖子类型中的“添加帖子”链接

> ID：15421117
> 
> 赞同：2
> 
> 时间：2013-03-14T22:06:40.777
> 
> 标签：wordpress, action

我确定我需要一个动作挂钩，但我找不到。我需要向自定义帖子类型上的“添加联系人”链接使用的 URL 添加查询：

[http://radleygh.com/images/chrome_2013-073-14-39-44-83.png](http://radleygh.com/images/chrome_2013-073-14-39-44-83.png)

在 edit.php 中，有一个名为的变量`$post_new_file`，这是我需要添加的。有一个函数可能会有所帮助，`$wp_list_table->current_action`但它似乎不会影响`$post_new_file`变量。它被分配给一个名为的变量，`$doaction`但我认为它与`add_action`钩子无关。

谁能指出我正确的方向？我可能会摆脱输出缓冲和 preg 替换，但这似乎有点矫枉过正。`$post_new_file`在定义的时间和用 HTML 编写的时间之间似乎没有任何操作调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T00:16:18.020

这是可能的，而且不太难，尽管需要一段时间才能解决。

```
function reset_post_new_link() {
  global $post_new_file,$post_type_object;
  if (!isset($post_type_object) || 'post-type-name' != $post_type_object->name) return false;
  $post_new_file = $post_new_file."append-what-want"
}
add_action('admin_head','reset_post_new_link'); 
```

`$post_type_object`在那里，你可以限制它的运行位置。你可能想用更多的标准来限制它，但我会把它留给你。

另外，我很确定这不受官方支持，因此请注意。

# regex - 使用正则表达式检索字符之间的字符串

> ID：15421118
> 
> 赞同：0
> 
> 时间：2013-03-14T22:06:43.087
> 
> 标签：regex, linux, unix, grep

我想使用`grep`命令或只知道在`regex`“>”和“<”字符之间获取以下字符串。

细绳 ：

```
<f id=mos-title>demo-break-1</f> 
```

我想回来

```
demo-break-1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T00:08:22.800

假设文件`foo`包含：

```
<f id=mos-title>demo-break-1</f>
<f id=mos-title>demo-break-2</f>
<f id=mos-title>demo-break-3</f>
<a>foo testing</a> 
```

你可以这样做：

```
perl -ne 'print "$1\n" if /<.+id=mos-title>(.+?)<\/f>/' foo 
```

请记住，如果这些匹配只发生在一行上，这将是严格的。此外，您必须考虑格式中的任何偏差，因为这不是有效的 HTML 解析器。

就严格而言，这是一种更轻松的方法，但仍不是 100% 兼容 HTML。

```
perl -ne 'print "$1\n" if /<.+id=mos-title\b.*?>\s*(.+?)\s*<\/f>/' foo 
```

输出如下：

```
demo-break-1
demo-break-2
demo-break-3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T11:56:35.817

通常最好使用 XML 解析器，但你可以试试这个 awk：

```
awk '$1==s{print $2}' s="f id=mos-title" RS=\< FS=\> file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T00:36:39.900

如果您有这样的正确 xml 文档：

```
<root>
  <f id="mos-title">demo-break-1</f>
</root> 
```

您可以使用适当的解析器：

```
xmllint --xpath "/root/f[@id='mos-title']" input.xml | \
      sed 's/[^>]*>\([^<]*\)<[^>]*>/\1\n/g' 
```

使用您的输入，您**可以确定**输入格式是一致的（即生成的），您可以使用 sed：

```
sed 's/[^>]*>\([^<]*\)<[^>]*>/\1/g' input 
```

# ruby-on-rails - Rails 在使用 Devise 注册后发布多步骤表单数据

> ID：15421119
> 
> 赞同：3
> 
> 时间：2013-03-14T22:06:52.400
> 
> 标签：ruby-on-rails

我有一个两步表单，它在会话中保存数据并假设用户已登录创建一个新记录。

如果新用户尚未注册，我希望他能够：

1.  填写表格#1
2.  填写表格#2
3.  重定向到设计注册 ( `new_registration_path`)
4.  注册/登录完成后从表单数据发布/创建记录

请参见下面的代码（**location_controller.rb**）：

On：“ `elsif @location.last_step`?”，如果用户未登录，则直接注册，但登录后不保存数据。

有没有办法通过设计思想传递会话表单数据，以便在注册后发布/创建记录？

提前致谢

> ```
> def new
>   session[:location_params] ||= {}
>     if current_user.nil?
>       @location = Location.new(session[:location_params])
>     else
>       @location = current_user.locations.new(session[:location_params])
>     end
> 
>   @location.current_step = session[:location_step]
> 
>   respond_to do |format|
>     format.html # new.html.erb
>     format.json { render json: @location }
>   end   
> end
> 
> def create
>     session[:location_params].deep_merge!(params[:location]) if params[:location]
>     if current_user.nil?
>       @location = Location.new(session[:location_params])
>     else
>       @location = current_user.locations.new(session[:location_params])
>     end
>     @location.current_step = session[:location_step]
>     if @location.valid?   
>       if params[:back_button]
>         @location.previous_step
>       elsif @location.last_step?
>        @location.save
>       else
>         @location.next_step
>       end
>       session[:location_step] = @location.current_step
>     end
> 
>     if @location.new_record?
>       render "new"
>     else
>       session[:location_step] = session[:location_params] = nil
>       flash[:notice] = "Trip saved!"
>       redirect_to @location
>     end
>   end 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:46:26.093

我解决了它：

1.  `store_form_data(@location)`在locations.rb中添加
2.  SessionHelper 中的 store_form_data 函数（见下文）
3.  添加`include SessionsHelper`到 application_controller.rb
4.  在 application_controller.rb 中添加了`def after_sign_in_path_for(resource)`函数（见打击）

应用程序/helpers/session_helper.rb：

> ```
> module SessionsHelper
>   def store_form_data(locations)
>     session[:form_data] = locations
>   end
> end 
> ```

应用程序/控制器/application_controller.rb：

> ```
> class ApplicationController < ActionController::Base
>   protect_from_forgery
>   include SessionsHelper
> 
>   def after_sign_in_path_for(resource)
>     if session[:form_data].present?
>       @user = current_user
>       @location = session[:form_data]
>       @user.locations << @location
>       session[:form_data] = nil
>       flash[:notice] = 'Trip saved!'
>       index_path
>     else
>       new_location_path
>     end
>   end
> end 
> ```

应用程序/控制器/locations_controller.rb：

> ```
>  def new
>     #@location = Location.new
>     session[:location_params] ||= {}
>     session[:form_data] = nil
>     if current_user.nil?
>       @location = Location.new(session[:location_params])
>     else
>       @location = current_user.locations.new(session[:location_params])
>     end
> 
>     @location.current_step = session[:location_step]
> 
>     respond_to do |format|
>       format.html # new.html.erb
>       format.json { render json: @location }
>     end
>   end
> 
> def create
>     session[:location_params].deep_merge!(params[:location]) if params[:location]
>     if current_user.nil?
>       @location = Location.new(session[:location_params])
>     else
>       @location = current_user.locations.new(session[:location_params])
>     end
>     @location.current_step = session[:location_step]
>     if @location.valid?   
>       if params[:back_button]
>         @location.previous_step
>       elsif @location.last_step?
>         if current_user.nil?
>           store_form_data(@location)
>         end
>        @location.save
>       else
>         @location.next_step
>       end
>       session[:location_step] = @location.current_step
>     end
> 
>     if @location.new_record?
>       render "new"
>     else
>       session[:location_step] = session[:location_params] = nil
>       flash[:notice] = "Trip saved!"
>       redirect_to @location
>     end
>   end 
> ```

# android - AIDL中的二维数组

> ID：15421123
> 
> 赞同：1
> 
> 时间：2013-03-14T22:07:22.120
> 
> 标签：android, multidimensional-array, aidl

我是 Android 和`AIDLs`. 是否可以将二维数组作为参数传递给 a 的函数`AIDL`？

例如：

```
int sayHello(in byte[][] langCountry); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:45:11.210

据我了解，您甚至不允许通过 AIDL 传递一维数组。

您*可以*使用`List<something>`，其中`something`任何其他 AIDL 兼容类型。因此理论上你可以使用`List<List<something>>`. 然而，虽然理论上是可能的，但我发现这会导致 AIDL 编译器混淆——你可能会有更多的运气。

出于这个原因，我建议制作一个`Parcelable`封装你的二维数组的对象：http: [//developer.android.com/guide/components/aidl.html#PassingObjects](http://developer.android.com/guide/components/aidl.html#PassingObjects)

# tfs - 如果您有 Team Foundation Server 2012，VersionOne 提供什么？

> ID：15421124
> 
> 赞同：6
> 
> 时间：2013-03-14T22:07:24.333
> 
> 标签：tfs, versionone

[这听起来像是一个“哪个更好”的问题，但事实并非如此。]

我们使用 Team Foundation Server 2012 进行版本控制和错误跟踪（不会改变）。我们正在转向敏捷，并被要求使用 VersionOne 来管理流程。

我参加了几个关于 VersionOne 的网络研讨会。关于他们的 Team Foundation Server 集成故事，我无法得到明确的答案。我找不到 Team Foundation Server 2012 没有的一个重要功能。

我错过了什么？是否有更好的现有集成案例？有没有人有这两种产品一起工作的经验？有谁知道任何陷阱？

- 更新 -

我们已经与双方并肩工作了一段时间，我可以分享我们的经验：

*   设置自动同步（如预期的那样）是可怕的。预计停机时间和永久性的一般片状。
*   V1 Visual Studio 插件几乎没用。它允许您从 IDE中进行*一些更新，但不是全部。*它没有正确同步。它不提供上下文。您无法可靠地链接到任何项目。它比 Alt-Tabbing 来回更糟糕。
*   我们发现在 V1 中有用和使用的少数功能（团队会议室、子团队、讨论）将在 TFS 2013 中提供并且工作得更好（特别是如果您将 Lync 用于 IM）。

TL,DR：V1 就其本身而言非常好，但它是一个孤岛。所有的集成都是拼凑而成的。您几乎失去了 TFS 提供的集成的所有好处——不要误会我的意思，TFS 有很多、很多、很多、很多缺点，但是能够将故事与签入与缺陷与讨论与将您的团队 Wiki 上的文档添加到特定版本的效果要好得多。

- 更新 -

我们刚刚开始使用 Coded UI 进行白盒测试，它的功能非常强大。在这一点上，不得不欺骗 VersionOne 真是令人讨厌。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T11:23:20.283

如果您使用的是 TFS 2012，那么我仍然会质疑您为什么认为您需要另一个工具来“变得敏捷”。

我相信 TFS 2012 的最新更新改进了敏捷工作支持，所以这应该仍然可以正常工作。根据您选择的敏捷工作实践，您可以选择 Scrum 或看板风格。

一些可能引发更多思考的问题：

*   我们想采用 Scrum 风格还是看板？
*   作为敏捷项目的一部分，哪些非技术同事需要参与？
*   他们是否都需要使用 TFS 2012 和/或 VersionOne（或任何其他工具）？
*   TFS 2012 是否可以向非技术团队成员（他们不关心 ALM 工具）公开，还是我们需要使用其他工具？

老实说，如果您需要的话，您可能可以仅在便签上“运行敏捷”。

仅供参考： http: [//blog.countersoft.com/2013/03/basics-of-running-agile-projects/](http://blog.countersoft.com/2013/03/basics-of-running-agile-projects/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T04:32:15.640

我碰巧发现这个答案正在寻找其他东西，而且我亲自回答了很多，所以无论如何在这里添加我的答案，我觉得这是一个更真实的答案。

V1 集成对开发人员很有用（您可以根据任务签入代码，这就是您所需要的）。我都用过。也许对于开发人员来说 TFS 更好（假设他们只是签入代码），但对于优秀的 Scrum Master 和产品负责人来说，*

> VersionOne 轻松击败 TFS 在线

*。主要原因是 V1 更快地管理和操作故事、组织、优先级和报告更好。

> 在 Scrum/Sprint 管理方面，TFS online 有很多不足之处。

如果您要创建、拆分、合并故事并将故事分解为任务，这将是缓慢而繁琐的。在 V1 上做同样事情的过程效率提高了 100%，更容易，更快。如果我不得不使用 TFS 来管理积压工作，并且 V1 的报告面向敏捷开发，我会大发雷霆。

在 TFS 中的一个示例，您不能将验收标准分解为单独的测试并在计划日为它们分配时间，这会打乱您的 sprint 计划。你能用 TFS 管理它吗？当然可以自定义并链接到其他工作类型，但这很麻烦。

V1 为您的团队提供发布预测、未来两周的容量规划、为离岸团队内置的扑克规划以及为敏捷开发而构建的整体。

您的开发人员应该只需要根据任务检查代码，他们可以这样做。您的 Scrum Master/Product Owner 使用该工具，并且应该真正使用最适合他们的工具。

所以两者都用。它没有错。在线使用 TFS 只是为了存储您的代码。其他一切使用 V1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T21:50:49.993

我将两者集成在一起进行演示。客户已强制使用 VersionOne*和*TFS。我无法回答您为什么要这样做，但至于如何做到这一点，请查看他们的开源项目：

[https://github.com/versionone/V1TFS](https://github.com/versionone/V1TFS)

二进制文件在这里：

[http://legacy.community.versionone.com/Downloads/Lists/Platform%20Downloads/DispForm.aspx?ID=31](http://legacy.community.versionone.com/Downloads/Lists/Platform%20Downloads/DispForm.aspx?ID=31)

您基本上运行一个安装 Web 服务的 msi，该服务注册来自 TFS 的事件并将签入或构建数据转发到 VersionOne。

然后，您可以安装他们的签入策略，该策略要求开发人员将用户故事与签入相关联。

我个人觉得整个事情有点笨拙。例如，他们的故事选择器对话框会在您编辑代码时弹出，而不是在您准备签入时弹出。他们的插件至少使我的 Visual Studio 实例崩溃了一次。

所以最重要的是，您可以使用甚至集成两者，但是当 TFS 本身运行良好时，我认为没有理由增加笨拙。

# python - 例如，如何获取整数列表，获取函数 letter_grade 并打印“等级为 A”。

> ID：15421125
> 
> 赞同：2
> 
> 时间：2013-03-14T22:07:24.607
> 
> 标签：python

这是我拥有的代码，我想知道如何获取整数列表（分数）并调用函数并打印诸如“成绩为 A”之类的内容。

```
def letter_grade():
score = input('Enter your test score: ')
if score < 60:
    print 'The grade is E'
elif score < 70:
    print 'The grade is D'
elif score < 80:
    print 'The grade is C'
elif score < 90:
    print 'The grade is B'
else:
    print 'The grade is A' 
return score

letter_grade() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T22:14:06.990

首先让你的函数接受一个参数

```
def letter_grade(score):    
    if score < 60:
        print 'The grade is E'
    elif score < 70:
        print 'The grade is D'
    elif score < 80:
        print 'The grade is C'
    elif score < 90:
        print 'The grade is B'
    else:
        print 'The grade is A' 
    return score

score = int(raw_input('Enter your test score: '))
letter_grade(score) 
```

由于您使用的是 Python2，因此您应该使用`raw_input`而不是`input`

在同一个函数中混合逻辑和打印不好，所以让我们只*返回*成绩

```
def letter_grade(score):    
    if score < 60:
        return 'E'
    elif score < 70:
        return 'D'
    ... and so on

score = int(raw_input('Enter your test score: '))
print "The grade is {}".format(letter_grade(score)) 
```

请注意，我们现在正在使用`format`将成绩插入字符串。现在`list`的分数

```
list_of_scores = range(50, 100, 5)  # a list of scores [50, 55, 60, 65, 70, 75, 80, 85, 90, 95]
for score in list_of_scores:
    print "The grade is {}".format(letter_grade(score)) 
```

# c# - 静态变量和企业库这会导致连接泄漏吗？

> ID：15421127
> 
> 赞同：1
> 
> 时间：2013-03-14T22:07:33.577
> 
> 标签：c#, enterprise-library, static-members

以下代码是否会导致 dbConn 创建的其他连接或引用无法正确处理？

在我看来它会因为它存储在静态成员中。

```
public static Database dbConn = DatabaseFactory.CreateDatabase("LocalSqlServer");
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:35:13.017

此连接存储在静态变量中这一事实不会影响您从中创建的其他连接对象的状态。

只要在完成连接后关闭连接就可以了。

# r - 在 Windows 中使用 sendmailR

> ID：15421130
> 
> 赞同：21
> 
> 时间：2013-03-14T22:07:45.270
> 
> 标签：r, email, smtp, gmail, sendmailr

我正在尝试使用以下代码在 Windows 上运行 sendmailR：

```
## Not run: 
from <- "<tal.galili@gmail.com>" # sprintf("<sendmailR@\\%s>", Sys.info()[4])
to <- "<tal.galili@gmail.com>"
subject <- "Hello from R"
body <- list("It works!", mime_part(iris))
sendmail(from, to, subject, body,
         control=list(smtpServer="ASPMX.L.GOOGLE.COM.")) 
```

并得到以下错误：

```
Error in socketConnection(host = server, port = port, blocking = TRUE) : 
  cannot open the connection
In addition: Warning message:
In socketConnection(host = server, port = port, blocking = TRUE) :
  smtp.gmail.com tal.galili@gmail.com:statisfun:25 cannot be opened 
```

[这里的答案](https://stackoverflow.com/questions/5864400/sending-an-email-from-r-using-the-sendmailr-package)给出了Linux的解决方案，我将不胜感激Windows用户的建议。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-11T21:34:51.587

您可以试一试新的 mailR 包：[http ://cran.r-project.org/web/packages/mailR/index.html](http://cran.r-project.org/web/packages/mailR/index.html)

然后应该可以使用以下调用：

```
send.mail(from = "tal.galili@gmail.com",
          to = "tal.galili@gmail.com",
          subject = "Subject of the email",
          body = "Body of the email",
          smtp = list(host.name = "smtp.gmail.com", port = 465, user.name = "tal.galili", passwd = "PASSWORD", ssl = TRUE),
          authenticate = TRUE,
          send = TRUE) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-19T18:49:11.363

我曾经使用这些线路通过 R 发送电子邮件。

假设您的电子邮件`tal.galili@gmail.com`使用的是窗口操作系统（我的操作系统）

```
library(sendmailR)

# 1 case
from <- sprintf("<sendmailR@%s>", Sys.info()[4]) 
to <- "<tal.galili@gmail.com>" 
subject <- "Hello from R" 
msg <- "my first email" 
sendmail(from, to, subject, msg,control=list(smtpServer="ASPMX.L.GOOGLE.COM")) 

# 2 case
from <- sprintf("<tal.galili@gmail.com>", Sys.info()[4]) 
to <- "<tal.galili@gmail.com>" 
subject <- "Hello from R" 
msg <- "my first email" 
sendmail(from, to, subject, msg,control=list(smtpServer="ASPMX.L.GOOGLE.COM")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-07T17:58:34.463

每当 sendmailR 无法通过身份验证时，都会收到一条不太有用的消息，

```
Error in if (code == lcode) { : argument is of length zero 
```

这可能有很多原因，包括服务器端的原因。就我而言，我需要将我的 IP 放在服务器的白名单上。@alko989 使用 sendemailR 声明有问题[，](https://stackoverflow.com/questions/23792137/issue-using-sendemailr?noredirect=1)`authentication ... is not supported by sendmailR`并且截至 2015 年 2 月 20 日 sendmailR [https://cran.r-project.org/web/packages/sendmailR/sendmailR.pdf](https://cran.r-project.org/web/packages/sendmailR/sendmailR.pdf)的发布，唯一的控制参数是`smtpServer`, `smtpPort`& `verbose`，所以对于用户、密码、ssl、tls 等都没有。今天的邮件服务器往往比过去的邮件服务器更安全，所以这是 sendmailR 的一个严重限制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-05T10:20:28.350

作为使用 sendmailR 的替代方法，您可以尝试以下操作：

一起解析一个 VB 脚本（参见例如[http://www.paulsadowski.com/wsh/cdo.htm](http://www.paulsadowski.com/wsh/cdo.htm)），然后通过 shell 调用它。

这可能看起来像这样：

```
SendMail <- function(from="me@my-server.de",to="me@my-server.de",text="Hallo",subject="Sag Hallo",smtp="smtp.my.server.de",user="me.myself.and.i",pw="123"){
require(stringr)
part1 <- "Const cdoSendUsingPickup = 1 'Send message using the local SMTP service pickup directory. 
Const cdoSendUsingPort = 2 'Send the message using the network (SMTP over the network). 
Const cdoAnonymous = 0 'Do not authenticate
Const cdoBasic = 1 'basic (clear-text) authentication 
Const cdoNTLM = 2 'NTLM "

part2 <- paste(paste("Set objMessage = CreateObject(",'"',"CDO.Message",'"',")" ,sep=""),
paste("objMessage.Subject = ",'"',subject,'"',sep=""),
paste("objMessage.From = ",'"',from,'"',sep=""),
paste("objMessage.To = ",'"',to,'"',sep=""),
paste("objMessage.TextBody = ",'"',text,'"',sep=""),
sep="\n")

part3 <- paste(
"'==This section provides the configuration information for the remote SMTP server. 

objMessage.Configuration.Fields.Item _ 
(\"http://schemas.microsoft.com/cdo/configuration/sendusing\") = 2

'Name or IP of Remote SMTP Server 
objMessage.Configuration.Fields.Item _ 
(\"http://schemas.microsoft.com/cdo/configuration/smtpserver\") = ",'"',smtp,'"'," 

'Type of authentication, NONE, Basic (Base64 encoded), NTLM 
objMessage.Configuration.Fields.Item _ 
(\"http://schemas.microsoft.com/cdo/configuration/smtpauthenticate\") = cdoBasic 

'Your UserID on the SMTP server 
objMessage.Configuration.Fields.Item _ 
(\"http://schemas.microsoft.com/cdo/configuration/sendusername\") = ",'"',user,'"'," 

'Your password on the SMTP server 
objMessage.Configuration.Fields.Item _ 
(\"http://schemas.microsoft.com/cdo/configuration/sendpassword\") = ",'"',pw,'"', "

'Server port (typically 25) 
objMessage.Configuration.Fields.Item _ 
(\"http://schemas.microsoft.com/cdo/configuration/smtpserverport\") = 25 

'Use SSL for the connection (False or True) 
objMessage.Configuration.Fields.Item _ 
(\"http://schemas.microsoft.com/cdo/configuration/smtpusessl\") = False 

'Connection Timeout in seconds (the maximum time CDO will try to establish a connection to the SMTP server) 
objMessage.Configuration.Fields.Item _ 
(\"http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout\") = 60 
objMessage.Configuration.Fields.Update

'==End remote SMTP server configuration section== 

objMessage.Send 
",sep="")

vbsscript <- paste(part1,part2,part3,sep="\n\n\n")
str_split(vbsscript,"\n")
writeLines(vbsscript, "sendmail.vbs")
shell("sendmail.vbs")
unlink("sendmail.vbs")
} 
```

...并像这样使用它：

```
SendMail(
    from="me.myself@andI.com",
    to="whatsup@man.com",
    text="Hallo",   
    subject="readThis",
    smtp="smtp.andI.com",
    user="me.myself@andI.com",
    pw="123456"
    ) 
```

# php - 为什么 datetime->days 总是返回正数

> ID：15421132
> 
> 赞同：55
> 
> 时间：2013-03-14T22:07:58.653
> 
> 标签：php, datetime

```
// Difference from a date in the future:
$a = new DateTime('2000-01-01');
$b = new DateTime('2000-01-05');
$interval = $b->diff($a);
return $interval->days;             // Returns 4

// Difference from a date in the past:
$a = new DateTime('2000-01-01');
$b = new DateTime('1999-12-28');
$interval = $a->diff($b);           // Arguments swapped
return $interval->days;             // Returns 4 
```

为什么这两个函数都返回正 4？如果日期是过去的，如何返回负数？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-14T22:20:48.210

你可以使用[`DateInterval::format`](http://www.php.net/manual/en/dateinterval.format.php).

`return $interval->format("%r%a");`

如果需要，转换为 int：

`return (int)$interval->format("%r%a");`

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-11-16T05:41:54.110

如果 Date 在过去，则反转为 1。
如果 Date 在未来，则反转为 0。

```
$invert    = $interval->invert; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-14T22:49:22.683

这是你的答案：

```
$today = new DateTime();
$date = new DateTime('2013-03-10');
$interval = $today->diff($date);
echo $interval->format("%r%a"); 
```

[在这里测试](http://ideone.com/cZofdl)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-06-24T18:22:45.170

当您比较两个 DateTime 对象时，以下规则适用：

```
$objA->diff($objB) == $objB - $objA 
```

举个例子：

```
$todayDateObj = new \DateTime('2016/5/26');
$foundedDateObj = new \DateTime('1773/7/4');

$interval = $todayDateObj->diff($foundedDateObj);
echo $interval->format('%r%a') . "\n\n";
// -88714

$interval2 = $foundedDateObj->diff($todayDateObj);
echo $interval2->format('%r%a');
// 88714 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-12-02T04:37:53.393

你可以像这样使用时间戳。

```
<?php 
    $date1 = '2015-01-02';
    $date2 = '2015-01-05';
    $diff = strtotime($date1, 'Y-m-d') - strtotime($date2, 'Y-m-d'); 
?> 
```

$diff 将返回负数或正数。

# linux - 在 Linux 中搜索两个不同的字符串

> ID：15421137
> 
> 赞同：1
> 
> 时间：2013-03-14T22:08:23.710
> 
> 标签：linux, bash

关于这个主题的最后一个问题 - 我保证！我一直在尝试各种命令。

我需要在包含字符串“bcs”的目录中查找文件，并且以从 161 到 190 的数字结尾。

例如：

```
ls
albcs182
albcs188 
```

我可以使用 find 命令获取所有带有 bcs 字符串的文件，但是在一个命令中搜索两个字符串时遇到问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:44:28.923

以下应该适用于所有文件名：

```
find -print0 | perl -ne 'INIT { $/ = "\0" } chomp;
  print "$_\n" if /bcs.*?(\d+)$/g && ($1>160 && $1<=190);' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:37:52.577

```
ls | egrep ".*bcs.*(16[1-9]|1[7-8][0-9]|190)$" 
```

# c++ - 连接 LPWSTR 字符串

> ID：15421139
> 
> 赞同：15
> 
> 时间：2013-03-14T22:08:40.607
> 
> 标签：c++, string, winapi, concatenation, string-concatenation

在 Visual C++ 中，我有一个

```
LPWSTR mystring; 
```

这已经在代码的其他地方定义了。

我想创建一个新的 LPWSTR，其中包含：

```
"hello " + mystring + " blablabla"        (i.e. a concatenation) 
```

我对这么简单的事情（串联）感到生气！提前非常感谢，我迷路了！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-14T22:12:33.473

C++方式：

```
std::wstring mywstring(mystring);
std::wstring concatted_stdstr = L"hello " + mywstring + L" blah";
LPCWSTR concatted = concatted_stdstr.c_str(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T22:12:13.277

您可以使用[StringCchCatW](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647518%28v=vs.85%29.aspx)函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-20T21:54:31.420

```
std::wstring mystring_w(mystring);
std::wstring out_w = L"hello " + mystring_w + L" blablabla";
LPWSTR out = const_cast<LPWSTR>(out_w.c_str()); 
```

'out' 是 'out_w' 的 LPWSTR 包装器。因此，只要“out_w”在范围内，它就会很好用。此外，您不需要删除“out”，因为它已绑定到“out_w”生命周期。

这与“user529758”给出的答案几乎相同，但“克里斯”提出了修改。

# ssis - SQL Server 2008 R2 中两个不同架构之间的实时复制

> ID：15421140
> 
> 赞同：0
> 
> 时间：2013-03-14T22:08:46.283
> 
> 标签：ssis, sql-server-2008-r2, replication

我有一个客户，他的旧应用程序将部分被新应用程序替换，两者都使用具有相似但不同架构的 SQL Server 2008 R2 数据库。新数据库是旧数据库的超级集，其中包含合并表和拆分表以实现更好的规范化。

虽然最终新应用程序将完全取代旧应用程序，但它们将并行存在一段时间，并且输入的数据需要近乎实时地反映在另一个应用程序中。是否有任何产品，或者甚至更好的 MS 包可以支持 Replication + SSIS 之类的东西？

我们现在提出的解决方案是在旧数据库中实现写入新数据库的触发器，并在数据层实现对旧数据库的复制（如果有人关心的话，C#/.NET）。出于技术和政治原因，我们不可能修改旧的应用程序（冷聚变）来做同样的事情。虽然这个解决方案有效，但它显然很难看，如果可能的话，我们想要更优雅的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T05:20:25.820

您拥有的解决方案（触发器）可能与任何解决方案一样好。我认为您不太可能找到现成的解决方案，只要考虑到标准化过程中方差的性质。

您也许可以使用[合并复制](http://msdn.microsoft.com/en-us/library/ms152746.aspx)来完成一些巧妙的事情。

也许您实际上可以在新数据库中使用相同的数据模型，并建立合并复制。然后创建视图，并为其附加一些`instead of`触发器，以模拟新的表结构。（或者，完全向后进行 - 将新模型复制到旧数据库，并使用视图 + 触发器将旧数据模型模拟到旧应用程序。）

但是，在这种情况下，最好的选择可能是创建一个 SSIS 包。毕竟，这确实是 SSIS 旨在处理的那种问题。

# python - 如何排除除特定单词之外的所有字母 - 正则表达式

> ID：15421142
> 
> 赞同：0
> 
> 时间：2013-03-14T22:08:50.540
> 
> 标签：python, regex, python-2.7

我有这个正则表达式

```
[^a-z]* 
```

不包括所有字母/单词。但是如何重做它，以便它仍然排除所有字母/单词，除了我们指定的单词。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:12:50.653

只需将您要包含的单词列表作为替代词，即`word1|word2|[^a-z]*`

# java - 对来自多个数据源的结果进行连接、过滤和分页

> ID：15421143
> 
> 赞同：5
> 
> 时间：2013-03-14T22:08:52.517
> 
> 标签：java, orm, querydsl

我们现有的 Java 应用程序直接构建在 Spring Data/JPA/Hibernate 之上，用于数据访问。在大多数情况下，对象由 Spring Repositories 执行 JPQL 查询来补充。当需要更动态的查询和排序时，我们也依赖 QueryDSL。Spring Data 与 QueryDSL 配合得非常好，并且您使用 Spring Data 获得的所有漂亮的分页/排序都可以继续正常工作。

我们目前正在将现有系统扩展为一些数据在数据库中而其他数据通过 RESTful 服务持久化的系统。出现的问题是如何在处理多个持久数据源时有效地加入、过滤、排序和分页。来自一个来源的数据可以通过其主键引用来自另一个来源的数据，显然没有完整性约束。

我查看了诸如 QueryDSL for collections、Quaere、jaque、SBQL4J 和 lambdaj 之类的东西，但得出的印象是来自所有数据源的所有数据都必须加载到内存中才能进行连接、过滤、排序和分页 -效率不高，尤其是对于网络应用程序。当然，可以通过 JPQL 过滤一些数据，例如，以稍微减少内存使用量的影响，但这仍然很臭。

**问：是否有任何可用的库可以优雅地处理这种异构数据源和技术的场景？**

# android - Android 2.3.4 上的 AsyncTask 错误

> ID：15421150
> 
> 赞同：0
> 
> 时间：2013-03-14T22:09:17.333
> 
> 标签：android, android-asynctask, runtime-error

当我在我的三星 Galaxy S3（4.1.1）上运行我的 AsyncTask 类时，它运行得非常好，但是当我在我的 HTC Android（2.3.4）上运行它时，我收到以下错误。这里有什么问题？

这是课程。

```
 public class enemyHandler extends AsyncTask<String, Integer, String>
    {
        @Override
        protected String doInBackground(String... arg0) {
            if(System.currentTimeMillis() - lastSpawn >= 2000)
            {
                Enemy x = new Enemy(SCREEN_WIDTH, SCREEN_HEIGHT, enemy.getHeight());
                enemies.add(x);

                lastSpawn = System.currentTimeMillis();
            }
            for(int i = 0; i < enemies.size(); i++)
            {
                Enemy tempE = enemies.get(i);
                if(tempE.x <= 0 - enemy.getWidth())
                    enemies.remove(tempE);
            }
            return null;
        }
    } 
```

日志输出：

```
03-14 18:04:53.656: E/AndroidRuntime(4279): FATAL EXCEPTION: Thread-12
03-14 18:04:53.656: E/AndroidRuntime(4279): java.lang.ExceptionInInitializerError
03-14 18:04:53.656: E/AndroidRuntime(4279):     at com.jister13.plane.Main$SView.run(Main.java:188)
03-14 18:04:53.656: E/AndroidRuntime(4279):     at java.lang.Thread.run(Thread.java:1027)
03-14 18:04:53.656: E/AndroidRuntime(4279): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
03-14 18:04:53.656: E/AndroidRuntime(4279):     at android.os.Handler.<init>(Handler.java:121)
03-14 18:04:53.656: E/AndroidRuntime(4279):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
03-14 18:04:53.656: E/AndroidRuntime(4279):     at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
03-14 18:04:53.656: E/AndroidRuntime(4279):     at android.os.AsyncTask.<clinit>(AsyncTask.java:152)
03-14 18:04:53.656: E/AndroidRuntime(4279):     ... 2 more 
```

解决方案：

我可以通过调用我的来解决这个问题

```
AsyncTask().execute(""); 
```

在 onCreate() 中创建类本身，然后在我希望它运行的地方调用它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:19:11.513

必须在 UI 线程中调用的东西不会在那里调用。1.你必须在UI线程上调用`AsyncTask`'s 。`execute`2\. 不要在你的`AsyncTask`（视图）上处理 UI 对象。

请向我们提供有关`Enemy`该类的更多信息（它到底是什么？）以及执行`AsyncTask`.

在向我们提供了您的其余代码之后：正如我所说，您确实`AsyncTask`从一个不是 UI 线程的线程开始。您的`SurfaceView`implements`Runnable`和执行的部分`AsyncTask`在`Thread.run`方法中。在您的活动中`onCreate`，您正在创建`SurfaceView`和`onResume`（在之后调用`onCreate`），您正在启动一个新线程（t1），该线程执行`AsyncTask`. 为了能够`AsyncTask`正确执行此操作，您需要将执行此操作的代码发布到 UI 线程。`AsyncTasks`必须从 UI 线程启动。

请阅读`android.os.Handler`课程：http: [//developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

你可以在这里看到一个简单的例子： [Android: Accessing UI Element from timer thread](https://stackoverflow.com/questions/9738239/android-accessing-ui-element-from-timer-thread)

我不知道它为什么在 4.1 中工作，也许他们做了一些更改来掩盖`AsyncTasks`从 UI 线程执行的错误。

# php - 从 url php 启用 post 功能

> ID：15421155
> 
> 赞同：0
> 
> 时间：2013-03-14T22:09:44.143
> 
> 标签：php, mysql, post

我有一个张贴表格，您可以在其中张贴您的姓名、文字、地点和联系方式。4 个标签。

html 中的 post 表单代码如下所示：

```
<div  class="form">
            <form id="contactform" action="post.php" method="post"> 
                <p class="contact"><label for="who">Who</label></p> 
                <input id="who" name="who" placeholder="Who are you? (First & Second name)" required="" type="text"> 

                <p class="contact"><label for="email">Text</label></p> 
                <input id="what" name="what" placeholder="Text" required="" type="text"> 

                <p class="contact"><label for="username">Where</label></p> 
                <input id="where" name="where" placeholder="Country, City, Street..." required="" type="text"> 

                <p class="contact"><label for="password">Contact</label></p> 
                <input type="text" id="contact" name="contact" placeholder="Phone number or email"required=""> 
<input class="buttom" name="submit" id="submit" tabindex="5" value="Submit" type="submit"> 
```

post.php 代码如下所示：

```
<?php header("Location: feed.php"); ?>
<?php 

define ( 'DB_NAME','database_name');
define ( 'DB_USER','user');
define ( 'DB_PASSWORD','foot');
define ( 'DB_HOST','localhost');

$link = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);

if (!link) {
die('Could not connect: ' .mysql_error());
}

$db_selected = mysql_select_db(DB_NAME, $link);

if (!$db_selected) {
die('Can\'t use ' . DB_NAME . ': ' . mysql_error());
}

$value1 = $_POST['who'];
$value2 = $_POST['text'];
$value3 = $_POST['where'];
$value4 = $_POST['contact'];

$sql = "INSERT INTO content (`who`, `text`, `where`, `contact`) VALUES ('$value1', '$value2', '$value3', '$value4')";

 if (!mysql_query($sql)) {
die('Error: ' . mysql_error());
}
    echo "You've just posted your text!";
mysql_close();
?> 
```

我想要的是您应该能够通过写作来发布文本，例如 www.mywebsite.com/post.php?name=MyName&text=MyText&place=MyPlace&contact=Contact

因此，您应该能够通过 url 填写表格。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:10:46.043

只需将所有 $_POST 更改为 $_GET 或 $_REQUEST 即可。

$_GET：[http](http://www.php.net/manual/en/reserved.variables.request.php)
://www.php.net/manual/en/reserved.variables.get.php $_REQUEST：[http ://www.php.net/manual/en/reserved.variables.request.php](http://www.php.net/manual/en/reserved.variables.get.php)

# python - Panda3d 启动窗口工作或工作不是没有理由的

> ID：15421156
> 
> 赞同：0
> 
> 时间：2013-03-14T22:09:55.997
> 
> 标签：python, panda3d

这是我的代码，在 main 方法中，只有一行：

```
game.initShowBase() 
```

那么这个函数的代码是：

```
def initShowBase():

   global myShowBase   
   myShowBase = ShowBase(False)
   startwindowThread = threading.Thread(target = starters.startfunction)
   startwindowThread.start()
   myShowBase.run() 
```

首发然后：

```
def startfunction():
   from modules.logic import game
   global h
   h = 0
   print h
   # g1 = open ("game1", "a")
   #g1.close()
   #g2 = open ("game2", "a")
   #g2.close()
   #g3 = open ("game3", "a")
   #g3.close()
   game.myShowBase.setBackgroundColor(1.0,0.627,0.894, 1)     
   textObject = OnscreenText(text = "Beginn", pos = (0.95,-0.95), 
                         scale = 0.07,fg=(1,0.5,0.5,1),align=TextNode.ACenter,mayChange=1)

   buttons = [
           DirectRadioButton(text = 'Game 1 ', scale=0.05, indicatorValue = 0,  pos=(-0.4,0,0), command=load, extraArgs =[1]),
           DirectRadioButton(text = 'Game 2 ',  scale=0.05, indicatorValue = 0, pos=(0,0,0), command=load, extraArgs = [2]),
           DirectRadioButton(text = 'Game 3 ',  scale=0.05, indicatorValue = 0, pos=(0.4,0,0), command=load, extraArgs = [3])
         ]
   print "button"
   for button in buttons:
       button.setOthers(buttons)
       print "true"

def load(gamenumber):
   global h
   if (gamenumber==1):
       h += 1
       if (h>0):
           loadGame("game1")
   elif (gamenumber==2):
       loadGame("game2")
   else:
       loadGame("game3")

def loadGame (gamename): 
    from modules.logic import game
    global data
    data = open (gamename, "r")
    print gamename 
```

如果不对代码进行任何更改，有时我会得到一个没有任何按钮的黑色窗口，一个没有任何按钮的粉红色窗口（正确颜色）或一个带有所有三个按钮的粉红色窗口。

没有堆栈跟踪，因为编译器似乎从来没有看到错误，所以我想我在某个地方遇到了死锁。我只是没有找到它，我的意思是，它没有那么多代码。

谁能帮忙？

也许我还应该提到，indicatorValue 似乎不起作用 - 第一个按钮，如果它出现，总是设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T13:50:13.950

我猜这个问题与你对线程的使用有关。首先，如果您还没有使用 Panda3D 1.8，我建议您使用它，它改进了对线程的支持。也就是说，我仍然可以在 Panda3D 1.8 中重现您的代码的一些问题。

其次，我强烈建议您在主线程中进行设置，或添加额外的同步。例如，如果在主线程中正确启动窗口之前调用 setBackgroundColor，则窗口可能会显示为黑色。使用线程时有许多潜在的陷阱需要考虑，尤其是同时从两个线程访问相同的结构时。我会为繁重的加载操作保留线程，例如加载模型（Panda3D 有特殊的结构可以异步执行此操作）或与图形管道几乎没有交互的游戏逻辑。

至于indicatorValue，需要实际使用`value`and`variable`字段来改变默认值，如下：

```
var = [1]
buttons = [
    DirectRadioButton(text='Game 1 ', variable=var, value=[1], scale=0.05, pos=(-0.4,0,0), command=load, extraArgs=[1]),
    DirectRadioButton(text='Game 2 ', variable=var, value=[2], scale=0.05, pos=(0,0,0), command=load, extraArgs=[2]),
    DirectRadioButton(text='Game 3 ', variable=var, value=[3], scale=0.05, pos=(0.4,0,0), command=load, extraArgs=[3])
] 
```

`var`默认情况下，将选择与该设置匹配的任何按钮的值。（使用列表而不是 int 的原因是因为列表是按引用传递的，而不是按值传递的。

# php - FFMPEG 与 PHP 将视频转换为 mp4 和快照

> ID：15421161
> 
> 赞同：2
> 
> 时间：2013-03-14T22:10:18.980
> 
> 标签：php, macos, ffmpeg, html5-video, video-encoding

我最近开始在一个用户可以上传视频的网站上工作，而且我是 ffmpeg 的初学者，但是我一直在搜索和搜索如何做这些我想做的事情，但是大多数都不起作用我。

我想将任何视频类型转换为`.mp4`并尽可能保持质量。现在我的代码只适用于`.mov`和`.mp4`上传，但`.avi`没有转换（它甚至没有为这些文件创建新文件）。

我也想从视频中截取高质量的截图，但是我现在得到的截图质量似乎很低，所以我不知道这是怎么回事。

我现在使用的代码是这样的：

```
$ffmpeg = "/Users/USERNAME/ffmpeg/ffmpeg";
$src    = "/Applications/MAMP/htdocs/lounge/videos/".$filename."_original.".$ext;
$img    = "/Applications/MAMP/htdocs/lounge/videos/thumbnails/".$filename."_1.jpg";
$img2   = "/Applications/MAMP/htdocs/lounge/videos/thumbnails/".$filename."_2.jpg";
$img3   = "/Applications/MAMP/htdocs/lounge/videos/thumbnails/".$filename."_3.jpg";
$video  = "/Applications/MAMP/htdocs/lounge/videos/".$filename.".mp4";

$src = preg_replace("/ /", "\ ", $src);
$img = preg_replace("/ /", "\ ", $img);

$imgOutput  = shell_exec("$ffmpeg -ss 1 -i $src -s 960x540 -f image2 -vframes 1 $img");
$imgOutput2 = shell_exec("$ffmpeg -ss 15 -i $src -s 960x540 -f image2 -vframes 1 $img2");
$imgOutput3 = shell_exec("$ffmpeg -ss 30 -i $src -s 960x540 -f image2 -vframes 1 $img3");

$videoOuput = shell_exec("$ffmpeg -y -i $src 2>&1 -s vga $video"); 
```

我该如何输出 720p 或 1080p 视频？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T23:00:45.887

FFMpeg 是一个非常强大的解决方案，但是您需要习惯它的众多选项才能获得您想要的。

首先，您需要确定播放视频的软件/硬件。

我在这里假设视频将在网站上播放，可能使用 Flash 播放器或 HTML5 播放器（例如，JWPlayer 两者兼有）。

然后，您需要找到最适合您所需质量的视频和音频格式。请注意，这`.mp4`只是一个容器，可以包含各种视频和音频格式。FFMpeg 足够聪明，默认情况下将 AVC (H.264) 用于视频，将 AAC 用于音频，这很好，但可能不会给你完美的结果，除非你指定你想要的比特率或质量。

在继续之前，请阅读这个非常有用的链接[http://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide 。](http://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide)

如果您想确保可预测的网络吞吐量，您可能应该使用 ABR 或 CBR 模式，或者如果您主要关心质量，则应该使用 CRF 模式（18 到 20 会给您带来很好的质量）。

调整视频大小本身就是一个复杂的话题。您可能会发现自己遇到的视频具有非方形样本纵横比，这意味着该视频的观看尺寸与实际宽度或高度不同，或者您将尝试以 4:3 比例观看视频调整为 16:9 的比例，导致变形。

使用该`-s`选项实际上会插入一个`scale`过滤器，该过滤器默认使用双线性过滤算法来调整视频帧的大小。这通常足以满足您的需求，但如果您要对视频执行其他处理步骤，有时明确使用过滤器会更有趣。例如：

```
-vf "scale=-1:720" 
```

这将强制设置为 720 像素的高度，但确保输出比例与输入比例相同，因此视频不会变形。

请注意，实际上使视频更大不会提高其质量，只会增加处理时间以及文件大小。

最后，在对将通过 HTTP 播放的文件进行 MP4 编码后，必须注意一个问题。MP4 文件包含一个称为 MOOV 的原子，它是描述文件内容的数据块。播放器软件需要读取此块才能开始播放，如果在磁盘上找到文件，这在本地不是问题，但如果在文件末尾找到文件，则在从 HTTP 下载时阻止文件播放，因为必须先下载整个文件才能开始播放。猜猜看，FFMpeg 将 MOOV atom 放在文件末尾，因此默认情况下它不适合 HTTP 渐进式播放。

您必须使用 qt-faststart 或 MP4Box 之类的工具来修改文件以将 MOOV atom 放在开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T01:01:23.387

你试过`-preset veryslow -qp 0`吗？阅读 SirDarius[建议的链接](http://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide#LosslessExamplebestcompression)作为无损 H.264 最佳压缩的预设。

# asp.net - AppHarbor 上的 ASP.NET 网站（不是 Web 应用程序）

> ID：15421162
> 
> 赞同：0
> 
> 时间：2013-03-14T22:10:19.373
> 
> 标签：asp.net, appharbor

我在 App_Data 文件夹中有一个使用 localDB 的网站（不是 Web 应用程序）。如何在 AppHarbor 上部署它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:51:53.423

您应该改用[sequelizer](http://support.appharbor.com/kb/add-ons/using-sequelizer)，即 AppHarbor 数据库即服务插件。尝试在 AppHarbor 工作文件系统上永久存储数据是行不通的，因为它们在每次部署时都会被擦除。

如果您已经有一个包含数据的 LocalDB 数据库，您应该能够使用[SQL Server bulk copy](https://github.com/appharbor/AppHarbor-SqlServerBulkCopy)将其传输到 AppHarbor 。

# wpf - 当 Canvas 旋转时，C# Canvas 不会渲染到位图（RenderTransform）

> ID：15421163
> 
> 赞同：1
> 
> 时间：2013-03-14T22:10:20.123
> 
> 标签：wpf, canvas, rendertransform

这是我的功能：

```
private byte[] GetByteArray(IPhotoObject photo)
{
        _addCanvas.RenderTransformOrigin = new Point(0.5, 0.5);
        _addCanvas.RenderTransform = new RotateTransform(90.0);

        BinaryImageConverter converter = new BinaryImageConverter();
        Image i = new Image();
        BitmapSource source = (BitmapImage)converter.Convert(photo.ImageBytes, typeof (BitmapSource), null, null);
        i.Stretch = Stretch.None;
        i.Width = source.PixelWidth;
        i.Height = source.PixelHeight;
        i.SetValue(Image.SourceProperty,source);
        var width = source.PixelWidth;
        var height = source.PixelHeight;

        Canvas canvas = new Canvas();
        canvas.Width = width;
        canvas.Height = height;
        canvas.Children.Add(i);
        canvas.Children.Add(_addCanvas);
        var size = new Size(width, height);
        var rect = new Rect(size);
        canvas.Measure(size);
        canvas.Arrange(rect);

        RenderTargetBitmap bmp = new RenderTargetBitmap(
            Convert.ToInt32(width),
            Convert.ToInt32(height),
            96.0,
            96.0,
            PixelFormats.Default);
        bmp.Render(canvas);

        return XImage.GetJpegByteArrayFromWritableBitmap(new WriteableBitmap(bmp));
} 
```

我的问题是_addCanvas。它没有被绘制到位图上。如果我取出旋转线，_addCanvas 将被绘制到位图，但我需要旋转 _addCanvas。

_addCanvas 具有包含简单形状（正方形、圆形、线条）和文本框的子项。

我已经尝试在 _addCanvas 上调用 Measure、Arrange 和 UpdateLayout 无济于事。如果旋转，它不会进入位图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:12:29.497

我的问题的解决方案是在调用canvas.Measure 和canvas.Arrange 后将_addCanvas 添加为canvas 的子项。

我不是 100% 知道为什么这是必要的，但这就是我认为这有效的原因：在调试时，我注意到 canvas.ActualWidth 和 canvas.ActualHeight 在调用测量和排列之前为零。我猜在这种情况下（有一个 Canvas 是 Canvas 的子级），_addCanvas 的 RenderTransformOrigin 是相对于画布设置的。由于当我将 _addCanvas 放入其子列表时，画布的 ActualWidth 和 ActualHeight 都为零，因此 _addCanvas 围绕原点而不是围绕其中心旋转。

如果在测量和排列画布之后将 _addCanvas 插入到子列表中，则画布的 ActualWidth 和 ActualHeight 将具有非零值，并且 _addCanvas 将根据需要围绕其中心旋转。

# php - jquery切换问题

> ID：15421164
> 
> 赞同：0
> 
> 时间：2013-03-14T22:10:22.000
> 
> 标签：php, javascript, jquery, toggle

我正在使用 jquery 切换来显示带有内容的 div。不知道如何解释我遇到的问题，但是如果您转到我的测试页面并单击类似电影的第一个链接（它与电影 500 Days of Summer 相吻合），您会看到一个面板打开了类似的电影. 如果您转到下一个类似电影链接（与我讨厌您的 10 件事相吻合），您会看到它仍然控制着第一组电影，这意味着它会上下切换面板。事实上，所有的相似电影链接都控制着第一个面板。不知道如何解决这个问题。***已删除链接-不再需要-谢谢！**

```
<script type="text/javascript"> 
$(document).ready(function(){
$(".flip").click(function(){
    $("#panel").slideToggle("slow");
  });
});
</script> 

<div class="flip">Similar Movies
</div><!-- end of flip-->

    <div id="panel">
similar movies are echoed here from a database using php...
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:13:02.923

不要为面板使用 ID，而是使用类，如下所示：

```
<div class="panel">
  similar movies are echoed here from a database using php...
</div> 
```

然后在你的 jQuery 中：

```
$(document).ready(function() {
  $(".flip").click(function() {
    $(this).siblings(".panel").slideToggle("slow");
  });
}); 
```

不建议在多个元素上使用相同的 ID，[尤其是](https://stackoverflow.com/questions/4789859/access-multiple-elements-of-same-id-in-jquery)在使用 jQuery 时会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:38:33.700

尝试类似的东西；

```
<div class="container">
<div class="flip">Similar Movies
</div><!-- end of flip-->

    <div class="panel">
similar movies are echoed here from a database using php...
</div>
</div>

var panel;
$(".flip").click(function(){
    panel = $(this).parent('.container').children('.panel');
    panel.slideToggle("slow");
 }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:13:56.493

那是因为您有许多具有相同“id”的 div。您可以使用以下代码修复它：

```
$(document).ready(function(){
$(".flip").click(function(){
    $(this).next().slideToggle("slow");
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T22:14:53.727

那是因为您的点击功能只是用面板的 id 切换 div，这是第一个 id。如果您有其他具有此 id 的 div，它们将被忽略，因为 id 必须是唯一的，jQuery 只会找到具有指定值的第一个 id 并使用它。您应该从`id="panel"`to更改`class="panel"`并修改您的 jQuery 函数以查找具有类的下一个同级元素`panel`并切换它。

代码可能如下所示：

```
$(document).ready(function(){
    $('.flip').click(function(){
        $(this).next('.panel').slideToggle('slow');
    });
}); 
```

# php - 需要帮助在链接上循环 curl 功能

> ID：15421167
> 
> 赞同：0
> 
> 时间：2013-03-14T22:10:31.860
> 
> 标签：php, loops, curl, foreach

嗨，我很难循环我的 curl 函数并自动化这项工作。

$scrape_url 是一个从页面中获取链接的函数。scrape_nextpage 是一个抓取“下一个”页面的 url 的函数，我将在其中再次使用 $scrape_url ，依此类推，到目前为止我的代码如下：

```
$url = "http://website.com";   

$results_page = scrape_url($url); 

 if ( $url !==scrape_nextpage($url) ) {

        $url = scrape_nextpage($url);

       $results_page = scrape_url($url); 
```

我想遍历我在页面中找到的每个 $url （有点通过分页）

到目前为止，我只得到了前 2 页，我需要获取其他页面

更新：scrape_nextpage() 是一个 curl 函数，用于获取下一页的 url（例如：

scrape_nextpage() 抓取网址：“website.com/next30post.html”；

因此在 scrape_url($url) 中使用的新 $url 变为 "website.com/next30post.html" 。

然后我用 scrape_nextpage() 获取同一页面以获取“website.com/next60post.html”；等等 。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T15:46:54.393

我想你正在寻找这样的东西：

```
$url = "http://website.com";  
$results_page = scrape_url($url);  

while ($url !== scrape_nextpage($url))
{
    $url = get_nextpage($url);
    if (!$url) {
        break;
    }
    $results_page = scrape_url($url);
    // do something with $results_page
} 
```

只需确保在没有更多要检查的 url 时`get_nextpage()`返回或一个空字符串 - 这将打破 while 循环。`FALSE`

**更新：**

您的函数命名非常模糊。完全不清楚他们做了什么。你想要清晰的名字。

例如，您需要一个函数`get_content($url);`来获取某个页面的 url（例如，`http://website.com`）并返回该网页的 HTML。您需要的第二个函数是一个函数`grab_links($html);`，它将解析某些页面的 HTML 并返回它在那里找到的链接。然后代码将是：

```
$list_of_urls = array(
    "http://website.com"
    );
foreach ($list_of_urls as $url)
{
    $html = get_content($url);
    $links = grab_links($html);
    // do something with $links
} 
```

现在这很清楚，可以轻松调试。

# r - R 不能使用 hist() 因为负十进制数导致“内容不是数字”？

> ID：15421172
> 
> 赞同：2
> 
> 时间：2013-03-14T22:10:45.817
> 
> 标签：r, decimal, histogram, numeric

我是 R 新手，我正在尝试使用 hist() 的 100,000 个这样的数字列表绘制直方图

```
-0.764
-0.662
-0.764
-0.019
0.464
0.668
0.464 
```

但我不能这样做，因为 R 抱怨内容不是数字。这是我尝试过的：

*   我使用 读取文件`t <- read.table(file= "file.txt", sep = "\n", dec = ".", header = TRUE)`，数据加载并且看起来很好（我得到相同的值）

*   我尝试使用 将其设为数字`as.numeric(c(t[,1])), sapply(t, as.numeric)`​​，但我得到完全不同的数字，例如

    53 428 791 428 582 428 979 428 456 533 550

我认为他们可能是小数点“。”的问题。或负号“-”或两者兼而有之。有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:27:04.543

R 似乎已将数据的第一列转换为一个因素。如果此列中的所有数据在文件中都是数字，则不应发生这种情况。所以一定有一个元素不能被识别为数字。

您可以在 R 中尝试以下（有点脏）来尝试确定问题出在哪里。从以下因素开始：

```
R> v <- factor(c("0.51", "-0.12", "0.345", "0.45b", "-0.8")) 
```

您可以确定哪个值导致问题：

```
R> v[is.na(as.numeric(as.character(v)))]
[1] 0.45b 
```

你可以找到这个值在你的向量中的位置：

```
R> which(is.na(as.numeric(as.character(v))))
[1] 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:26:44.933

如果要将因子转换为数值类型，则必须了解因子的工作原理。

在内部，类列中的每个不同项目（每个“因素”）`factor`都存储为一个数字。这些是您在跑步时看到的数字`as.numeric`。这些数字实际上只是因子水平的索引，因此如果您键入`levels(t[,1])`，您应该会在数据框的第一列中看到所有不同值的列表。

因此，有了这些知识，我们可以使用一个技巧来提取实际数字：

```
as.numeric(levels(t[,1])[t[,1]]) 
```

当然，如果 R 在`read.table`读取这行数字时将其解释为一个因素，则在此技巧起作用之前，您必须删除包含非数字类型的行。

# sql - 从 Datagridview 中删除特定列中具有相同值的行。

> ID：15421179
> 
> 赞同：0
> 
> 时间：2013-03-14T22:11:00.527
> 
> 标签：sql, select, join

由此：

```
|-------------------------------|
| Column1 |  Column2  |  Column3|
|-------------------------------|
|   1     |     2     |    3    |
|-------------------------------|
|   1     |     2     |    4    |
|-------------------------------|
|   1     |     2     |    4    |
|-------------------------------|
|   2     |     5     |    6    |
|-------------------------------|
|   3     |     7     |    7    |
|-------------------------------| 
```

我怎样才能做到这一点：

```
|-------------------------------|
| Column1 |  Column2  |  Column3|
|-------------------------------|
|   1     |     2     |    3    |
|-------------------------------|
|   2     |     5     |    6    |
|-------------------------------|
|   3     |     7     |    7    |
|-------------------------------| 
```

仅基于第 3 列有 2 行不同的值为 4 的事实。

该数据网格可以达到数千个，因此最好采用一种经济高效的方式来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:20:05.170

以您的示例为例，我将为“重复包含”列选择最小值：

```
select a.column1, a.column2, min(a.column3) as column3
from table as a
group by a.column1, a.column2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:29:57.000

根据您的情况选择

```
SELECT *
FROM dbo.yourTable t
WHERE EXISTS (         
              SELECT 1
              FROM dbo.yourTable t2
              WHERE t2.Column3 = t.Column3
              HAVING COUNT(*) = 1
              ) 
```

# javascript - 在 $(document).ready 中添加多个函数

> ID：15421181
> 
> 赞同：-2
> 
> 时间：2013-03-14T22:11:09.467
> 
> 标签：javascript

我的页面上有几个相互排斥的操作（表单验证和确认框），这些功能不相关或相互依赖，所以可以将两者都放入

```
$(document).ready 
```

前任：

```
$(document).ready(function(){
  $("form").validate();
  $("delete").confirm();
}); 
```

我假设在这种情况下 form 和 delete 或兄弟函数，并且由于它们不是嵌套的，它们不依赖，这是正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:15:04.100

如您所说，如果它们彼此不依赖，那么从 . 调用它们应该没有问题`$(document).ready`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T22:15:14.477

当然，`$(document).ready`只是说您的文档结构已准备好并且您可以对其进行操作。您 `$("form")`和任何元素都可以使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T22:23:15.377

是的，你可以`$(document).ready`这样调用方法；如果它们不相互依赖，那么它应该可以工作。

顺便说一句，虽然这只是一个例子……`{}`不需要。

# sql - 在一个表中平均不同的值？

> ID：15421190
> 
> 赞同：0
> 
> 时间：2013-03-14T22:11:53.977
> 
> 标签：sql, distinct, average

我有一张列出大学课程代码和成绩的表格。一些程序代码是相同的。我想平均每个不同课程的成绩。我该如何管理？到目前为止，我的代码刚刚让我到了这张桌子，但我看不到如何在这张 ONE 桌子上进行操作？

```
SELECT s.program_code, 
       r.grade 
FROM   students s 
       INNER JOIN (SELECT e.student_id, 
                          e.module_code, 
                          IF( c.grade IS NULL, e.grade, (e.grade + c.grade)/2 ) AS grade 
                   FROM   exams e 
                          LEFT OUTER JOIN continuous_assessments c 
                                       ON e.student_id = c.student_id 
                                          AND e.module_code = c.module_code) r 
               ON s.student_id = r.student_id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:15:16.543

像这样的东西可能会起作用

```
select program_code, avg(e.grade + grade)
from blah blah
group by program_code 
```

# python - 在 Flask 中使用 app.add_url_rule 的默认值

> ID：15421193
> 
> 赞同：3
> 
> 时间：2013-03-14T22:12:17.700
> 
> 标签：python, flask

我正在使用以下内容设置 url 端点：

**管理器.py**

```
from xxx import ContactAPI
from xxx.models import Contact

# self.app is my Flask app
# self.session is SQLAlchemy Session

api_name = 'contact'
instance_endpoint = '/%s/<int:instid>' % api_name
methods = ['GET']

api_view = ContactAPI.as_view(api_name, self.session,
                              Contact, app)

self.app.add_url_rule(instance_endpoint, methods=methods, 
                      defaults={'instid': None},
                      view_func=api_view) 
```

`get()`并在我的 ContactAPI 类中覆盖：

**视图.py**

```
from flask.views import MethodView

class ContactAPI(MethodView):

    def __init__(self, session, model, app, *args, **kwargs):
        super(ContactAPI, self).__init__(*args, **kwargs)

    def get(self, instid):
        print instid 
```

当我点击 URL 时，`/contact/1`我`instid`打印为`None`.

当我`defaults={'instid': None},`从 manager.py 中删除该行时，我`instid`打印为 1。

为什么在我的调用中有默认行来`add_url_rule`覆盖我在我的 URL 中输入的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T22:41:50.063

事实证明，我需要在使用时注册两个端点`defaults`。

因为在我的 ContactAPI 视图中作为 kwarg`{'instid': None}`传递`get()`，所以我需要告诉 Flask`instid`在 URL`/contact`被命中时设置为 None。

当我击中时`/contact/1`，我需要使用`<int:instid>`。为此，我需要`defaults`在对`add_url_rule()`.

**管理器.py**

```
from xxx import ContactAPI
from xxx.models import Contact

# self.app is my Flask app
# self.session is SQLAlchemy Session

api_name = 'contact'
instance_endpoint = '/%s/<int:instid>' % api_name
collection_endpoint = '/%s' % api_name

methods = ['GET']

api_view = ContactAPI.as_view(api_name, self.session,
                              Contact, app)

self.app.add_url_rule(instance_endpoint, methods=methods, 
                      view_func=api_view)

self.app.add_url_rule(collection_endpoint, methods=methods, 
                      defaults={'instid': None},
                      view_func=api_view) 
```

相关 Werkzeug 文档：[http ://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Rule](http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Rule)

感谢`asdf`在#flask IRC 频道中指出这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-14T00:47:10.720

烧瓶文档中有一个类似事情的完整示例 - [https://flask.palletsprojects.com/en/1.1.x/views/](https://flask.palletsprojects.com/en/1.1.x/views/)

# android - 无论如何，facebook和google都有共同的sso吗？

> ID：15421194
> 
> 赞同：0
> 
> 时间：2013-03-14T22:12:23.780
> 
> 标签：android, ios, facebook, ios6

目前我正在使用 Facebook 单点登录进行身份验证，并且效果很好。我也想添加谷歌身份验证。但是，如果我允许用​​户通过 Google 进行身份验证，如果 Facebook 也没有对用户进行身份验证，用户将如何在 Facebook 墙上发帖？

请帮帮我，我是跨应用程序开发的新手。或者请告诉我是否有任何替代方法。任何建议和指导都会对我和有类似问题的用户有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:28:15.843

不，Google 和 Facebook 没有通用的 SSO。您的用户必须连接 Facebook 才能在他们的 Facebook 墙上发帖。

# single-page-application - 是否可以有多个 viewEngine.viewExtension

> ID：15421195
> 
> 赞同：1
> 
> 时间：2013-03-14T22:12:24.380
> 
> 标签：single-page-application, durandal, hottowel

我有一个 asp.net Hot Towel SPA 应用程序，我想同时使用 .html 和 .cshtml 页面。

是否可以添加多个视图扩展：

```
viewEngine.viewExtension = '.cshtml';
viewEngine.viewExtension = '.html'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T11:54:32.117

viewExtension 不是数组，所以一开始不能设置多个 viewExtension。当然，这只是 javascript，您可以进入源代码并从核心 Durandal 应用程序文件夹更改 viewEngine.js（链接在这里：[https ://github.com/BlueSpire/Durandal/blob/master/App/durandal /viewEngine.js](https://github.com/BlueSpire/Durandal/blob/master/App/durandal/viewEngine.js)）。

话虽如此，如果客户端拉下 *.cshtml 文件，剃刀语法将不会以您认为的方式呈现。如果服务器提供 *.cshtml 视图，那么它将在被吐出给客户端之前被渲染。如果您正在使用 Durandal 寻找动态视图渲染，您最好的选择是覆盖 viewEngine 中的一个或两个函数，即：viewEngine.convertViewIdToRequirePath(viewId):string 并进一步控制 viewEngine.createView(viewId):promise。

有关更多信息，请查看此链接：[Routing and Leveraging Dynamic Content in DurandalJS](https://groups.google.com/forum/?fromgroups=#!topic/durandaljs/hpfZB-WFEXk "在 Durandaljs 中路由和利用动态内容")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T23:15:59.413

看看这个要点：[https ://gist.github.com/irium/5191764](https://gist.github.com/irium/5191764)

这是我自己解决类似问题的方法。这些是 Durandal`viewEngine` 和`viewLocator`. 在你的模块中导入这个模块`shell`并运行`customizeViewEngine()`和`customizeViewLocator()`函数。之后`.html`将像以前一样处理带有扩展名的视图，但`.cshtml`将从远程服务器请求视图。但请记住：由于 Durandal 的视图缓存，这只会执行一次。同一视图的所有后续请求将在客户端使用缓存版本。这可以通过从 RequireJS 手动取消注册视图模块来更改，但这超出了我的需求范围

这是编译为 JavaScript 的 CoffeScript 代码，但我希望你能明白这一点，我的代码会对你有所帮助。

# spring - Spring 声明式事务。基于 transactionAttributes 的自定义 PreInterceptor

> ID：15421200
> 
> 赞同：0
> 
> 时间：2013-03-14T22:12:34.913
> 
> 标签：spring, transactions, interceptor

我有一个弹簧交易定义如下 -

```
<bean id="ServiceTransactions"  class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean" abstract="true">
        <property name="optimize" value="true" />
    <property name="transactionManager" ref="transactionManager" />
    <property name="transactionAttributes">
        <props>
            <prop key="find*">PROPAGATION_REQUIRED,readOnly</prop>
            <prop key="create*">PROPAGATION_REQUIRED</prop>
            <prop key="update*">PROPAGATION_REQUIRED</prop>
            <prop key="delete*">PROPAGATION_REQUIRED</prop>
        </props>
    </property>
            <property name="preInterceptors">
        <list>
            <bean id="readOnlyConnectionMethodInterceptor" class="com.dealer.framework.dao.interceptor.ReadOnlyConnectionMethodInterceptor" />
        </list>
    </property>
    </bean> 
```

我想确保它`readOnlyConnectionMethodInterceptor`仅适用于以 find* 开头的方法，而不适用于其他方法。

我在春季文档中找不到任何关于此的信息。

我想知道是否有人可以阐明如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:04:06.247

看起来Spring方面对此没有支持。在选择采取行动之前，我创建了一种骇人听闻的方式来检查预拦截器中的方法名称。

有点像这样——

```
class CustomInterceptor {

    public Object invoke(MethodInvocation invocation) throws Throwable {

      if(invocation.getMethod().getName().startsWith("foo"){
          //Take appropriate Action
      }
      invocation.proceed();
    }
} 
```

# visual-studio-2012 - 如何运行 Visual Studio 2012 内存分析器？我收到错误 DA0002

> ID：15421201
> 
> 赞同：4
> 
> 时间：2013-03-14T22:12:34.980
> 
> 标签：visual-studio-2012, profiler

我正在尝试在 WinForms 项目上运行 VS12 内存分析器，但是当我这样做时，应用程序启动，它似乎工作正常，但随后报告出现空白。在错误列表中，我收到此错误...

> 错误 1 ​​DA0002：似乎是在未使用 VSPerfCLREnv.cmd 正确设置环境变量的情况下收集了文件。托管二进制文件的符号可能无法解析。

性能分析器工作正常。在运行内存分析器之前我应该​​做些什么吗？在命令窗口中运行 VSPerfCLREnv.cmd 似乎对我没有任何帮助（根据文档，它应该只是为该命令窗口设置环境变量）。

我已经安装了 Red Gate Ants 的试用版。我现在正在卸载它，以防干扰。还有其他建议吗？从命令行运行分析器的一个很好的教程可能是一个很好的解决方法（尽管我宁愿 VS12 刚刚工作），但我不想分析应用程序的启动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-07T01:39:28.303

我能够在 VSPerfCLREnv 之后使用“VS2012 的开发人员命令提示符”生成示例分析[报告](http://msdn.microsoft.com/en-us/library/bb385759.aspx)

```
VSPerfCLREnv /SampleOn
VSPerfCLREnv /SampleGC
VSPerfCmd /Start:Sample /Output:MyApp.exe.vsp /Launch:MyApp.exe 
```

然后在关闭后在同一命令提示符`MyApp.exe`中执行，并生成`VSPerfCmd.exe /Shutdown``MyApp.exe.vsp`

```
VSPerfCmd.exe /Shutdown 
```

这个文件`MyApp.exe.vsp`可以在VS2012中打开

**注意**：使用 /GC 选项执行 VSPerfCmd 会显示相同的**DA0002**错误。我的环境是Win7 x86。

# gtk - 将 Glade 的信号连接到 Gjs/Seed 代码

> ID：15421204
> 
> 赞同：1
> 
> 时间：2013-03-14T22:13:02.520
> 
> 标签：gtk, glade, seed, gjs

我想使用该`connect_signals`方法将我的 Glade 信号绑定到 Gjs/Seed 方法。
但我总是收到以下错误：`Argument 'user_data' (type void) may not be null`
有谁知道如何使用该`connect_signals`方法？

## Gjs/种子文件

```
Gtk.init(null, 0);
let builder = new Gtk.Builder();
builder.add_from_file( "ui.glade" );

builder.connect_signals(this);

Gtk.main();

function on_button_ok_clicked() {
    print("ok");
}; 
```

## 林间空地文件

```
<?xml version="1.0" encoding="UTF-8"?>
<interface>
  <object class="GtkWindow" id="window">
    <child>
      <object class="GtkButton" id="button_ok">
        <signal name="clicked" handler="on_button_ok_clicked" swapped="no"/>
      </object>
    </child> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T13:22:30.587

由于 user_data，我无法让 connect_signals 工作`void*`，但 connect_signals_full 确实因为一些神秘的原因工作:-)

```
const SignalHandlers = new Lang.Class({
    Name: 'SignalHandlers',

    _init: function () {},

    your_switch_active_notify_cb: function (object) {
      print("switch is active:" + object.get_active());
    },

    _connector: function(builder, object, signal, handler) {
      object.connect(signal, Lang.bind(this, this[handler]));
    },
});

function buildPrefsWidget() {
  let win = new Gtk.Table(), ui = new Gtk.Builder();

  ui.add_from_file(Me.dir.get_path() + "/prefs.ui");
  ui.get_object("content-table").reparent(win);

  let signal_handlers = new SignalHandlers();
  ui.connect_signals_full(Lang.bind(signal_handlers, signal_handlers._connector));

  return win;
} 
```

# javascript - 从 UIWebView 调用 javascript 函数

> ID：15421206
> 
> 赞同：0
> 
> 时间：2013-03-14T22:13:07.157
> 
> 标签：javascript, iphone, ios, ipad, uiwebview

我在从 UIWebView 调用 javascript 函数时遇到了一些问题。

这是我的工作流程：

第 1 步：在 UIWebView 中加载网页

第 2 步：用户单击网页中的按钮，从而启动对应用程序功能的调用 -

```
window.location=("native-function-call:getSessionID:"+session); 
```

第三步：位置变化被app函数拦截，并在app中设置sessionID——

```
-(BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
NSString *requestString = [[request URL] absoluteString];

if([requestString hasPrefix:@"native-function-call:"])
{
    NSArray *components = [requestString componentsSeparatedByString:@":"];
    NSString *function = [components objectAtIndex:1];
    if([function isEqualToString:@"getSessionID"])
    {
        sessionID = [components objectAtIndex:2];
        [webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"%@%@%@", @"generateToken(\"",sessionID,@"\")"]];
    }
    if ([function isEqualToString:@"getTokenID"])
    {
        tokenID = [components objectAtIndex:2];

        //do stuff to connect to the session with the token

        NSString *javaScriptRequest = [NSString stringWithFormat:@"%@%@%@", @"sendRequest(\"",sessionID,@"\")"];
        [webView stringByEvaluatingJavaScriptFromString:javaScriptRequest];
    }
    return NO;
}
return YES;
} 
```

第四步：设置好sessionID后，调用javascript——generateToken(session)

第5步：在javascript函数中，generateToken，再次调用上面的函数，因此-

```
window.location="native-function-call:getTokenID:"+token; 
```

第 6 步：根据上面的代码，将在 javascript 中创建的 tokenID 传递给应用程序。然后应用程序继续调用另一个函数，称为 sendRequest(session)。

第6步：生成一个通知并发送到另一个设备，其中包含上面的sessionID。另一台设备收到通知，执行的功能是：

```
-(void) requestReceived:(NSNotification *) pushNotification
{
NSDictionary *notification = [pushNotification userInfo];
sessionID = [notification objectForKey:@"session"];
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"%@%@%@", @"generateToken(\"",sessionID,@"\")"]];
} 
```

第 7 步：这是正在中断的步骤。根据上面的代码，我正在设置调试点，最后一个通知功能正在另一台设备上输入。但是，对 generateToken(session) 的 javascript 调用不起作用。位置更改的拦截永远不会发生，因此其他设备不会继续进行该过程。

关于为什么最后一个请求没有被发送到页面的任何想法，或者什么是破坏？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:47:14.220

弄清楚出了什么问题。所有对 window.location 的调用都被混淆了，有些没有执行。我通过将 javascript 分成不同的服务器端文件并分别调用每个文件而不是对同一个 webview 进行所有调用来解决了这个问题。

# ember.js - Ember.js - 如何处理动态构建的布局？

> ID：15421207
> 
> 赞同：0
> 
> 时间：2013-03-14T22:13:18.587
> 
> 标签：ember.js

假设我有一组视图 [header、menu、list、aside、bottom、footer]，它们不是固定的，而是动态设置的，因此数组元素可能不同。我想要实现的是以某种方式呈现所有这些，如下所示：

```
for (view in views) {
   view.render(model, controller);
} 
```

这不是有效的 Ember 代码，我只是为了能够解释我的问题而编造它。我检查了 Ember.ContainerView 和 Ember 布局，但它们并没有提供类似的东西。

我可以用 Ember 的方式做这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:17:04.297

严格来说，以下内容符合您的描述：

```
views.forEach(function(view) {
  view.set('controller', controller);
  view.set('content', model);
  view.append();
}); 
```

这会将视图附加到文档正文。您可以提供一个选择器`view.append()`来呈现到特定元素中。

也就是说，使用的方法`CounterView`肯定更符合 Ember 习惯，并且具有在删除父视图时拆除视图的额外好处。[Ember.js 指南](http://emberjs.com/guides/views/manually-managing-view-hierarchy/)中有更多信息。

# oracle - PLS-00363：表达式“HTP.HTBUF_LEN”不能用作分配目标

> ID：15421211
> 
> 赞同：1
> 
> 时间：2013-03-14T22:13:26.763
> 
> 标签：oracle, plsql, oracle9i

尝试通过浏览器上的 OWT 查看此过程时，我遇到了一个非常奇怪的错误。我通过 wdbsvr.app 连接了其他模式，并且一切正常。此模式来自我们在另一台机器上进行的导入。我是否需要更改 OWT 的配置中的某些内容？

谢谢！

```
ORA-06550: line 5, column 6:
PLS-00363: expression 'HTP.HTBUF_LEN' cannot be used as an assignment target
ORA-06550: line 5, column 2:
PL/SQL: Statement ignored

CREATE OR REPLACE PROCEDURE "CRS"."TEST1"  IS

BEGIN
  HTP.HTMLOPEN;                            -- generates <HTML>
  HTP.HEADOPEN;                            -- generates <HEAD>
  HTP.TITLE('Title');                      -- generates <TITLE>Hello</TITLE>
  HTP.HEADCLOSE;                           -- generates </HTML> 

  -- generates <BODY TEXT="#000000" BGCOLOR="#FFFFFF">
  HTP.BODYOPEN( cattributes => 'TEXT="#000000" BGCOLOR="#FFFFFF"');

  -- generates <H1>Heading in the HTML File</H1>
  HTP.HEADER(1, 'Heading in the HTML File');

  HTP.PARA;                                 -- generates <P>        
  HTP.PRINT('Some text in the HTML file.'); 
  HTP.BODYCLOSE;                            -- generates </BODY>
  HTP.HTMLCLOSE;                            -- generates </HTML>

END; 
```

# mysql - 多个锂模型关系

> ID：15421213
> 
> 赞同：0
> 
> 时间：2013-03-14T22:13:30.973
> 
> 标签：mysql, relationships, lithium

我实际上在一个项目中，并使用 PHP 的锂框架。我正在使用多个数据库（MongoDB 和 MySQL），在 MySQL 数据库上，我的表之间有很多多对多的关系。我一直在阅读模型之间的锂关系，我发现了“属于”关系。是否可以使用这个属于关系两次？如果是的话，有人可以解释我怎么做吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:50:51.933

```
<?php

class Posts extends \lithium\data\Model {

    public $belongsTo = ["Categories", "Users"];

    // -- or --

    public $belongsTo = ["Categories", "Author" => ["class" => "Users"]];
}

?> 
```

希望有帮助。

# php - 查询为空，以及其他错误

> ID：15421215
> 
> 赞同：0
> 
> 时间：2013-03-14T22:13:38.617
> 
> 标签：php, mysql

我已经为此工作了一个多月，并且在此代码中看不到任何错误。直到大约两个月前它工作得很好。我开始收到此错误：**警告：mysql_num_rows()：提供的参数不是第 41 行的 functions.php 中的有效 MySQL 结果资源**（第 41 行是 $num=mysql_num_rows($result);）。我确保它正在与数据库连接，并检查了整个文件中的括号。当我使用 mysql_error 检查错误时，我挂断了第 40 行的**Query is empty**，如下所示。我花了很多时间试图通过阅读 stackoverflow 上的帖子来解决这个问题，但需要更多帮助。谢谢。

```
function query_sql($sql)
{
$username="somename";
$password="mypassword";
$database="database2";
$link=mysql_connect("sqlserver.myserver.net",$username,$password);
@mysql_select_db($database,$link);
$result = mysql_query ($sql)or die(mysql_error());
$num=mysql_num_rows($result);
mysql_close();
return $result;
} 
```

这是包含 $sql 变量的主页中的代码。

```
<?php
include 'modules/functions.php';
update_log($_SERVER['PHP_SELF'], "");
if(isset($_SERVER['PHP_AUTH_USER']))
{
    $User = $_SERVER['PHP_AUTH_USER'];
    $sql = "select Username from users where Username = '".$_SERVER['PHP_AUTH_USER']."'";
    $get_results = query_sql($sql) or die('Query failed: ' . mysql_error() . "<br />\n$sql"); 
    $row = mysql_fetch_assoc($get_results);
}
else
{
    header('Location: ../index.php');
}

$sql = 'select Name, Category, Category2, Private, Staff from users where Username = "'.$User.'"';
$get_user_access = query_sql($sql);
$sql = ''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T08:23:42.967

首先注释掉或删除函数定义`mysql_close();`中的。`query_sql()`

这是这背后的原因

在您调用`mysql_close()`然后调用`mysql_fetch_assoc($get_results);`PHP 将尝试使用默认设置重新连接到数据库 - 但没有活动的 SQL 查询来获取行数/获取错误输出的数据。

这是我的建议 - 不要反复打开和关闭数据库连接，在顶部打开它 - 运行所有查询并在底部关闭它，或者让它在脚本末尾使用 PHP 垃圾收集器关闭。

# iphone - 防止 objc 块复制属性

> ID：15421223
> 
> 赞同：2
> 
> 时间：2013-03-14T22:14:03.517
> 
> 标签：iphone, ios, objective-c, ios6, objective-c-blocks

我有一个页面`UITableView`一次只显示一个项目。每个项目都是从互联网上获取的图片。我使用 block 异步下载图像：

```
- (void)downloadImageForPost:(GifPost *)p atIndex:(NSInteger)index
{
  [APIDownloader imageForSource:p.src
                     completion:^(NSData *data, NSError *error) {
                       if (self.currentIndex != index)
                         return;

                       [self.tableView
                        reloadRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:index
                                                                    inSection:0]]
                              withRowAnimation:UITableViewRowAnimationNone];
                     }];
} 
```

问题出`if (self.currentIndex != index)`在`self.currentIndex`块外修改的地方。假设我为我的所有图像调用此函数，而`self.currentIndex = 0`. 如果我滚动到另一个索引，就像`self.currentIndex`在执行时保存的那样，我的 if 条件不起作用。

有没有办法防止块复制指定的变量。如果没有，我该怎么做才能有正确的行为？

PS：我没有做任何事情`data`，只是调用这个函数把它放在我的缓存中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:22:42.723

正如 Andrew Madsen 所说，`self.currentIndex`是一种方法调用。我的错误来自我更新的地方`self.currentIndex`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T22:33:33.163

您可能希望使用对 self 的弱引用来防止保留循环：

```
- (void)downloadImageForPost:(GifPost *)p atIndex:(NSInteger)index
{
   __weak ClassForSelf *weakSelf = self;
  [APIDownloader imageForSource:p.src
                 completion:^(NSData *data, NSError *error) {
                   if (weakSelf.currentIndex != index)
                     return;

                   [weakSelf.tableView
                    reloadRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:index
                                                                inSection:0]]
                          withRowAnimation:UITableViewRowAnimationNone];
                 }];
} 
```

# android - 我的 Android 应用程序可以在任何给定时刻知道并检测手机在哪个运营商下运行吗？

> ID：15421231
> 
> 赞同：1
> 
> 时间：2013-03-14T22:15:05.170
> 
> 标签：android, carrier

是否有一个 Android API 可以让我的应用程序检测并了解手机的运营商？我会很高兴得到代码...？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T22:17:22.683

使用[TelephonyManager.getNetworkOperatorName()](http://developer.android.com/reference/android/telephony/TelephonyManager.html#getNetworkOperatorName%28%29)

# java - httpClient -> HTTP/1.1 500 内部服务器错误

> ID：15421234
> 
> 赞同：0
> 
> 时间：2013-03-14T22:15:19.300
> 
> 标签：java, rest, httpclient, put, http-error

当我尝试使用 HttpClient 在我的 REST 客户端应用程序中执行 PUT/POST 时，我总是收到此错误（**HTTP/1.1 500 Internal Server Error ）。**

你知道它可能是什么样的错误吗？这不是代码中的错误吗？它告诉它在服务器中。如果您需要我的一些代码，请索取！

谢谢

这是我在服务器日志中收到的消息：

```
[#|2013-03-15T09:34:32.508+0000|WARNING|glassfish3.1.2|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=115;_ThreadName=Thread-2;|StandardWrapperValve[ServletAdaptor]: PWC1406: Servlet.service() for servlet ServletAdaptor threw exception
org.codehaus.jackson.JsonParseException: Unexpected character ('A' (code 65)): expected a valid value (number, String, array, object, 'true', 'false' or 'null')
 at [Source: org.apache.catalina.connector.CoyoteInputStream@7fd86c92; line: 1, column: 2]
    at org.codehaus.jackson.JsonParser._constructError(JsonParser.java:1432)
    at org.codehaus.jackson.impl.JsonParserMinimalBase._reportError(JsonParserMinimalBase.java:385)
    at org.codehaus.jackson.impl.JsonParserMinimalBase._reportUnexpectedChar(JsonParserMinimalBase.java:306)
    at org.codehaus.jackson.impl.Utf8StreamParser._handleUnexpectedValue(Utf8StreamParser.java:2084)
    at org.codehaus.jackson.impl.Utf8StreamParser._nextTokenNotInObject(Utf8StreamParser.java:600)
    at org.codehaus.jackson.impl.Utf8StreamParser.nextToken(Utf8StreamParser.java:486)
    at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2761)
    at org.codehaus.jackson.map.ObjectMapper._readValue(ObjectMapper.java:2682)
    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1308)
    at org.codehaus.jackson.jaxrs.JacksonJsonProvider.readFrom(JacksonJsonProvider.java:419)
    at com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy.readFrom(JacksonProviderProxy.java:139)
    at com.sun.jersey.spi.container.ContainerRequest.getEntity(ContainerRequest.java:474)
    at com.sun.jersey.server.impl.model.method.dispatch.EntityParamDispatchProvider$EntityInjectable.getValue(EntityParamDispatchProvider.java:123)
    at com.sun.jersey.server.impl.inject.InjectableValuesProvider.getInjectableValues(InjectableValuesProvider.java:46)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$EntityParamInInvoker.getParams(AbstractResourceMethodDispatchProvider.java:153)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$VoidOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:166)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:18:04.680

您的服务器接收到请求，但处理它的逻辑（如果是 java，则为 servlet）会导致错误。您必须获取服务器日志并查找堆栈跟踪、错误消息...等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T11:03:27.060

我已经通过以不同的方式执行 PUT 解决了我的问题。

我是这样做的：

```
 httpPut.addHeader("Accept", "application/json");
    httpPut.addHeader("Content-type", "application/json");

    List <NameValuePair> nvps = new ArrayList <NameValuePair>();

    nvps.add(new BasicNameValuePair("Accept", "application/json"));
    nvps.add(new BasicNameValuePair("Content-Type", "application/json"));

    nvps.add(new BasicNameValuePair("userID", "user1"));
    nvps.add(new BasicNameValuePair("firstName", "teste"));
    nvps.add(new BasicNameValuePair("lastName", "Alves"));

    httpPut.setEntity(new UrlEncodedFormEntity(nvps));

    HttpResponse response = httpclient.execute(httpPut); 
```

现在我正在这样做：

```
 httpPut.addHeader("Content-type", "application/json");
        httpPut.addHeader("Accept", "application/json");

        JSONObject obj = new JSONObject();  
            obj.put("userID", "user1");
            obj.put("firstName", "Antonio");
            obj.put("lastName", "Alves");

        StringEntity se = new StringEntity(obj.toString());
        se.setContentEncoding("UTF-8");
        se.setContentType("application/json");
        httpPut.setEntity(se);

        HttpResponse response = httpclient.execute(httpPut); 
```

一切顺利...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-20T16:40:38.993

如果您在尝试使用 HTTP 标头的解决方案时用尽了选项，如果您在 500 内部服务器错误之前看到“没有此类窗口异常”，请尝试将以下键添加到 Windows 注册表中的 Internet Explorer。以下为我解决了这个问题。

[Selenium - IE 11 中的 NoSuchWindowException](https://stackoverflow.com/questions/24746777/selenium-nosuchwindowexception-in-ie-11)

# magento - nginx 反向代理到 magento 和 drupal

> ID：15421238
> 
> 赞同：0
> 
> 时间：2013-03-14T22:15:47.780
> 
> 标签：magento, nginx, reverse-proxy, proxypass

我使用以下配置将 nginx 配置为反向代理：

www.mydomain.com --> drupal.mydomain.com

www.mydomain.com/store --> magento.navionics.com

# Drupal（网站）

```
location / {
            proxy_pass         http://10.21.120.12/;
            proxy_redirect     http://10.21.120.12/ http://$server_name/;
            proxy_set_header   Host             $host;
            proxy_set_header   X-Real-IP        $remote_addr;
            proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
            client_max_body_size       50m;
            client_body_buffer_size    128k;
            proxy_connect_timeout      90;
            proxy_send_timeout         90;
            proxy_read_timeout         90;
            proxy_buffer_size          4k;
            proxy_buffers               4 32k;
            proxy_busy_buffers_size     64k;
            proxy_temp_file_write_size 64k;
    } 
```

# Magento

```
 location /store {
            proxy_pass         http://10.192.134.10/;
            proxy_redirect     http://10.192.134.10/ http://$server_name/store/;
            proxy_set_header   Host             $host;
            proxy_set_header   X-Real-IP        $remote_addr;
            proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
            client_max_body_size       50m;
            client_body_buffer_size    128k;
            proxy_connect_timeout      90;
            proxy_send_timeout         90;
            proxy_read_timeout         90;
            proxy_buffer_size          4k;
            proxy_buffers               4 32k;
            proxy_busy_buffers_size     64k;
            proxy_temp_file_write_size 64k; 
```

当我尝试 www.mydomain.com 时，我可以看到 drupal 网站。

当我尝试 www.mydomain.com/store 或 www.mydomain.com/store/ 我收到错误

```
"Error 310 (net::ERR_TOO_MANY_REDIRECTS): There were too many redirects." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-15T13:33:01.540

Magento 总是重定向到每个商店的 config/web 中输入的路径。

如果您尝试重写我的任何 nginx/apache/xyz 规则，magento 将再次重写它......因此正在创建 inifnite 循环。

在其 config/web 设置中为您的 magento 商店设置正确的路径，它将正常工作。

# bash - 从 bash 脚本中将日期传递给 sqlplus 命令

> ID：15421244
> 
> 赞同：0
> 
> 时间：2013-03-14T22:16:12.747
> 
> 标签：bash, variables, plsql, sqlplus

我有以下 bash 脚本，它应该使用当前日期调用 sqlplus。

```
#!/bin/bash

DATE='date +%F'

sqlplus -s << EOF1
DB_username/DB_password
set heading off
exec PLSQL_PROCEDURE('$DATE', '-30','someString','/home/outputFolder');
exit
EOF1

exit 
```

但是，我收到以下错误-它绝对不是在评估 date 命令：

```
BEGIN PLSQL_PROCEDURE('date +%F', '-30', 'someString', '/home/outputFolder'); END;

*
ERROR at line 1:
ORA-01841: (full) year must be between -4713 and +9999, and not be 0
ORA-06512: at "DataBaseName.PLSQL_PROCEDURE", line 19
ORA-06512: at line 1 
```

我该如何修复它，以便它像这样传递当前日期？

```
PLSQL_PROCEDURE('2013-03-14', '-30', 'someString', '/home/outputFolder'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:33:09.777

试试这个：

```
#!/bin/sh

DATE=$(date +%F) # note the $( ) form

sqlplus -s  << EOF1
DB_username/DB_password
set heading off
exec PLSQL_PROCEDURE('$DATE', '-30','someString','/home/outputFolder');
exit
EOF1 
```

您应该了解*命令替换*：`$(foo bar)`导致命令 'foo' 使用参数 'bar' 执行`$(..)`并将被*输出*替换。见[http://mywiki.wooledge.org/BashFAQ/002](http://mywiki.wooledge.org/BashFAQ/002)

# c# - SQL分层数据的转换

> ID：15421246
> 
> 赞同：1
> 
> 时间：2013-03-14T22:16:27.110
> 
> 标签：c#, recursion

我有一个sql数据

```
ID Name ParentID
1 BillGates 1
2 Paul Allen 1
3 Progam manager 2
4 Some Programmer 3 
```

……

我如何将其递归到`List<Employee>`员工所在的位置

```
public  class Employee
{
    public int ID { get; set; }
    public string Name { get; set; }
    public List<Employee> Children { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:23:28.037

要递归地获取员工下的所有员工，您可以使用以下函数：

```
 public IEnumerable<T> GetDescendents<T>(T parent, Func<T, IEnumerable<T>> childSelector)
    {
        yield return parent;

        foreach (var child in childSelector(parent))
        {
            foreach (var grandChild in GetDescendents(child, childSelector))
            {
                yield return grandChild;
            }
        }
    } 
```

示例用法：

```
var allChildEmployees = GetDescendents(employee, e => e.Children); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:18:20.543

您需要保留以下字典`Employee`：

```
Dictionary<int, Employee> employees;

public class Employee
{
    public int ID { get; set; }
    public string Name { get; set; }
    public List<int> ChildrenIDs { get; set; }
    public List<Employee> Children { get; set; }
} 
```

首先，直接阅读您的员工，阅读他们的父母`ID`。

一旦它们都被读取，迭代并用`Employee`s 引用替换 ID。

```
foreach (var employee in employees)
{
    foreach (var id in employee.ChildrenIDs)
    {
        employee.Children.Add(employees[id]);
    }
} 
```

# php - 将过程式 PHP 转换为面向对象的 PHP

> ID：15421247
> 
> 赞同：8
> 
> 时间：2013-03-14T22:16:27.460
> 
> 标签：php, oop, static, namespaces, procedural-programming

我目前有一个完全用程序 PHP 编写的相当大的应用程序。我希望进一步提升我的 PHP 经验，并使用面向对象的技术重新编写我的大部分应用程序。

在很多领域，OOP 可以帮助减少代码量并使其更易于阅读。但是，我有几个问题。

**1）**我的理解是，一个类被用作任意数量对象的蓝图，但是任何一个类只代表一个对象，从不超过一个。所以一个类可以代表一个玩家，但不能代表多个玩家。

**2）**由于我将包含很多不同的类，我是使用“加载器”类来加载它们，`spl_autoload_register`还是只`spl_autoload_register`在我的应用程序的程序文件中使用？

**编辑：**所以我的自动加载器将是一个类，然后我创建一个实例来启动自动加载，或者只是一个带有函数和 spl_autoload_register 的 php 文件，我将包括以避免在多个文件中重复相同的代码？

**3）**我的一些课程依赖于其他课程。我以前从未遇到过这种情况，所以老实说，我不知道答案。如果我在我的主程序文件中包含所有类，但我的播放器类不*包含*它需要运行的类，那么播放器类是否可以工作，因为主程序已经包含了播放器依赖的类？

**编辑：**所以即使一个类可以实例化一个 Player 类型的对象，并且 Player 类不直接包含在此类中，它仍然可以工作，因为控制器类*确实*包含 Player 类？

**4)**在多种情况下，我需要处理我正在创建的对象。我想知道我应该怎么做。例如，在我的 Player 类中，有时我需要从一个 Player 向另一个 Player 发送一些东西。那么，我是在 Player 类中实现一个以两个 Player 作为参数的静态方法并进行传输还是做其他事情？

**编辑：**好的，所以避免使用静态方法。现在我遇到了一个严重的问题：我的应用程序中有多次运行的方法，但我无法将它们实现为静态方法。我应该将它们实现为实例方法吗？例如，从一个播放器发送到另一个播放器。我会创建一个实例方法，它接受一个 Player 对象并向它发送*或*从*它*发送吗？

**5)**我有很多方法不属于任何一个类的实例，也不适合作为静态方法。这些是否应该在自己的类中声明为 Common 或类似的静态方法？在这种情况下在实践中做了什么？

**编辑：**这些方法是否属于使用它们的特定应用程序文件，或者可能存储在它们自己的“functions.php”文件中？

**6）**我想学习如何使用命名空间，但是我的代码永远不会被其他人使用，我也永远不会在我的应用程序中使用其他人的代码。命名空间是我的应用程序中不必要的添加，还是学习如何使用它们是个好主意？无论如何，一个应用程序有一个命名空间（应用程序名称？）还是每个类都属于它自己的命名空间？

**7）**最后，有一个用于数据库连接的类和一个用于网络方法的类是否很常见？我的应用程序需要两者。我认为将代码转换为使用面向对象技术时遇到的主要问题是确定将哪些方法放在哪里，因为目前它们都在一个整体文件中。

感谢您提供的任何帮助和见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T22:30:53.173

> 1）我的理解是，一个类被用作任意数量对象的蓝图，但是任何一个类只代表一个对象，永远不会超过一个。所以一个类可以代表一个玩家，但不能代表多个玩家。

一个类不代表任何东西，因为正如您正确指出的那样，它只是任意数量对象的蓝图。您可以拥有代表多个玩家的同一类的多个实例（对象）。

> 2) 由于我将包含很多不同的类，我是使用“加载器”类来使用 spl_autoload_register 加载它们，还是只在我的应用程序的程序文件中使用 spl_autoload_register？

在不知道“我的应用程序的程序文件”是什么意思的情况下，我说是的。使用自动加载器，因为它可以正常工作，而您不必担心会做`require_*`.

> 3）我的一些课程依赖于其他课程。我以前从未遇到过这种情况，所以老实说，我不知道答案。如果我在我的主程序文件中包含所有类，但我的播放器类不包含它需要运行的类，那么播放器类是否可以工作，因为主程序已经包含了播放器依赖的类？

您不想加载所有类，而只想加载您将要使用的类。使用自动装载机时，这又不是您必须担心的事情。但是是的，一旦加载了一个类，它就可以在整个应用程序中实例化。

通常您会希望在[应用程序的引导阶段](https://github.com/PeeHaa/Uploader/blob/master/Src/RichUploader/bootstrap.php)启动 autploader 。

> 4) 在多种情况下，我需要处理我正在创建的对象。我想知道我应该怎么做。例如，在我的 Player 类中，有时我需要从一个 Player 向另一个 Player 发送一些东西。那么，我是在 Player 类中实现一个将两个 Player 作为参数的静态方法并进行传输还是做其他事情？

避免在 OOP PHP 中使用静态方法。几乎从不需要它。你可以考虑拥有另一个类，它就像一个玩家池，负责从一个玩家到另一个玩家“发送数据”。

因此，只要它在尝试实例化它之前发生，包含该类的文件的位置并不重要。

> 5）我有很多方法不属于任何一个类的实例，也不适合作为静态方法。这些是否应该在自己的类中声明为 Common 或类似的静态方法？在这种情况下在实践中做了什么？

再次请不要使用静态方法。如果你在其他类中使用它们，你只会让你的类难以进行单元测试，并且你会引入隐藏的依赖关系。以我的经验，它*几乎*从来没有碰巧在某处有一个单一的方法。也许你的方法做得太多了。

但这很难仅通过阅读您的问题来判断。也许你可以在评论中举个例子？

> 6）我想学习如何使用命名空间，但是我的代码永远不会被其他人使用，我也永远不会在我的应用程序中使用其他人的代码。命名空间是我的应用程序中不必要的添加，还是学习如何使用它们是个好主意？

PHP 中的命名空间是关于结构化的。尽管没有其他人会使用您的代码，但您不必担心在某处为某个类使用相同的名称。一旦应用程序变大而不是迟到，就会发生这种情况。

> 无论如何，一个应用程序有一个命名空间（应用程序名称？）还是每个类都属于它自己的命名空间？

在命名空间方面，我经常遵循[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)。

> 7）最后，有一个用于数据库连接的类和一个用于网络方法的类是否很常见？我的应用程序需要两者。我认为将代码转换为使用面向对象技术时遇到的主要问题是确定将哪些方法放在哪里，因为目前它们都在一个整体文件中。

只需牢记[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)，并且通常是[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。

另外，我强烈建议您观看[这些](http://www.g-truc.net/post-0182.html)内容并继续观看，直到您理解为止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T22:33:08.700

> 1）我的理解是，一个类被用作任意数量对象的蓝图，但是任何一个类只代表一个对象，永远不会超过一个。所以一个类可以代表一个玩家，但不能代表多个玩家。

通常，您还将拥有表示对象*集合*的类，例如可用于从所有玩家的集合中检索单个玩家的“玩家”类：

```
$players = new Players();
$john = $players->findByName("john"); 
```

> 2) 由于我将包含很多不同的类，我是使用“加载器”类来使用 spl_autoload_register 加载它们，还是只在我的应用程序的程序文件中使用 spl_autoload_register？

这在很大程度上取决于您的项目的复杂性。一个简单的自动加载器函数通常就足够了，但您可以看看[Zend Framework Autoloader 类](http://framework.zend.com/manual/1.12/en/zend.loader.autoloader.html)。

> 3）我的一些课程依赖于其他课程。我以前从未遇到过这种情况，所以老实说，我不知道答案。如果我在我的主程序文件中包含所有类，但我的播放器类不包含它需要运行的类，那么播放器类是否可以工作，因为主程序已经包含了播放器依赖的类？

是的。但是，通过自动加载，您根本不需要担心这一点。如果不使用自动加载，最好在定义类的文件中包含所需的类（使用`require_once()`以避免多次包含同一个文件）。

> 4) 在多种情况下，我需要处理我正在创建的对象。我想知道我应该怎么做。例如，在我的 Player 类中，有时我需要从一个 Player 向另一个 Player 发送一些东西。那么，我是在 Player 类中实现一个将两个 Player 作为参数的静态方法并进行传输还是做其他事情？

静态方法几乎总是错误的方法。普通方法属于一个实例（即特定的播放器），静态方法属于类，即播放器的一般“想法”。如果您需要将内容从一个播放器转移到另一个播放器，为什么不这样实现：

```
class Player {
    public function transferMoney(Player $recipient, $amount) { ... }
}

$tom = new Player("tom");
$marc = new Player("marc");

$tom->transferMoney($marc, 500); 
```

> 5）我有很多方法不属于任何一个类的实例，也不适合作为静态方法。这些是否应该在自己的类中声明为 Common 或类似的静态方法？在这种情况下在实践中做了什么？

我无法合理地回答这个问题。然而，PHP 中仍然有一些普通函数，这似乎是这种情况下的最佳方法。然而，如果你正确地使用 OOP，你很可能永远不会遇到这样的问题。这通常是您的类设计的问题，这使您认为这些方法不属于任何对象。

> 6）我想学习如何使用命名空间，但是我的代码永远不会被其他人使用，我也永远不会在我的应用程序中使用其他人的代码。命名空间是我的应用程序中不必要的添加，还是学习如何使用它们是个好主意？无论如何，一个应用程序有一个命名空间（应用程序名称？）还是每个类都属于它自己的命名空间？

命名空间很棒，但没有它们你的代码可能会很好。由于命名空间可以嵌套，您通常会有一个顶级命名空间和每个组件的子命名空间。

> 7）最后，有一个用于数据库连接的类和一个用于网络方法的类是否很常见？我的应用程序需要两者。我认为将代码转换为使用面向对象技术时遇到的主要问题是确定将哪些方法放在哪里，因为目前它们都在一个整体文件中。

这取决于您如何模拟您的实际情况。如果数据库连接和“网络”对您来说是两个不同的东西，那么两个类是要走的路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T22:31:54.267

1.  A`PlayerCollection`将是一个有效的类。当然，它的一个对象是多个玩家的*一个*集合。

2.  使用 spl_autoload_register，句号。最好遵循[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)标准并使用任何符合 PSR-0 的现有自动加载器（即[Symfony Loader](https://github.com/symfony/ClassLoader)）

3.  它会起作用的。但是由于您使用自动加载器（请参阅 2。）您根本不必关心包含类

4.  从玩家 1 向玩家 2 发送消息很容易翻译为在玩家 1 中调用玩家 2 的方法。但是，“发送东西”和“处理对象”可能意味着很多东西，所以答案是：视情况而定。*但总的来说，避免使用静态方法*是个好建议。

5.  这听起来很像程序性思维。很抱歉，我不能在这里给你一个灵丹妙药的答案，你必须学习和理解面向对象设计的原则才能应用它们。网络上有一些标准文献和许多有用的资源。通过示例学习也可能很有用（查看其他开源的 OO 应用程序和框架）

6.  “一个应用程序有一个命名空间（应用程序名称？）还是每个类都属于它自己的命名空间？” - 答案介于两者之间。命名空间可用于将一起工作的事物组合在一起，并且无论谁使用或查看代码，它们都很有用。

7.  面向对象设计的第一条规则：一个类，一个责任。

# ruby-on-rails - 意外 git rm ./ 后设计路由错误

> ID：15421250
> 
> 赞同：0
> 
> 时间：2013-03-14T22:16:48.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, ruby-on-rails-3.2

我不小心调用`git rm ./ -r`了我的工作目录并删除了我的所有代码。没问题，我只是打电话`git pull`来获取最新的代码更新，但是现在我不断收到来自设计的路由错误。

之后我不得不打电话`bundle install`。从这里开始，我不断收到错误：

```
Routing Error

No route matches {:controller=>"devise/registrations"}
Try running rake routes for more information on available routes. 
```

所以我做的第一件事就是跑去`rake routes`看看这条路线是否存在并且它确实存在：

```
 members_ban GET    /members/ban(.:format)         members#ban
           members_unban GET    /members/unban(.:format)       members#unban
                 members GET    /members(.:format)             members#index
                         POST   /members(.:format)             members#create
              new_member GET    /members/new(.:format)         members#new
             edit_member GET    /members/:id/edit(.:format)    members#edit
                  member GET    /members/:id(.:format)         members#show
                         PUT    /members/:id(.:format)         members#update
                         DELETE /members/:id(.:format)         members#destroy
        new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy
                    root        /                              home#index 
```

我将以下代码添加`<%= link_to "New", new_user_registration %>`到我的主页视图文件中，以查看是否可以获得更多信息：我收到以下错误：[https ://gist.github.com/anonymous/5165745](https://gist.github.com/anonymous/5165745)

我的路线文件：

```
Eveco::Application.routes.draw do

  get 'members/ban'
  get 'members/unban'
  resources  :members
  devise_for :users
  root :to => 'home#index'
end 
```

**扩展：所以我通过控制台和错误日志追踪了问题：**

```
Started GET "/users/sign_up" for 127.0.0.1 at 2013-03-14 23:51:38 +0100
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.0ms)
  Rendered devise/registrations/new.html.erb within layouts/application (5.0ms)
  Rendered layouts/_nav.html.erb (0.0ms)
  Rendered layouts/_bread.html.erb (2.0ms)
Completed 500 Internal Server Error in 17ms

ActionController::RoutingError (No route matches {:controller=>"devise/registrations"}):
  app/views/layouts/_bread.html.erb:11:in `_app_views_layouts__bread_html_erb__280287340_55609968'
  app/views/layouts/application.html.erb:27:in `_app_views_layouts_application_html_erb__58597651_53376372' 
```

**我为我的应用程序实现面包屑的糟糕方式似乎存在问题。基本上我只想在其中显示控制器和方法，所以我使用它：**

```
<div class="row">
    <div class="span12">
        <ul class="breadcrumb">
          <li><%= link_to "Home", root_path %> <span class="divider">/</span></li>

          <% if params[:controller] != 'devise' && params[:controller] != 'users' %>
              <% if params[:controller] != 'home'  %>
                  <li>
                    <a href="#">
                    <%=
                        link_to params[:controller].to_s.capitalize,
                                :controller => params[:controller]
                    %>
                    <span class="divider">/</span>
                  </li>
                  <li class="active">
                    <%= params[:action].to_s.capitalize %>
                  </li>
              <% end %>
          <% end %>

        </ul>
    </div>
</div> 
```

如果我从应用程序中删除这个部分，路由就像一个魅力。然而现在它提出了一个新的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:56:05.587

根据[这个问题](https://github.com/plataformatec/devise/issues/763)，它可能是命名空间的问题。

基本上，我认为这`params[:controller]`显示为`/devise/registrations`因为如果您查看它，这就是您的路线设置方式（注意最后一列），但是您已将其映射到，`users`因此您必须将其用作控制器：

```
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy 
```

如果您能以某种方式使用 url 助手，也许会更好。也许创建一个将面包屑文本映射到 url 路径的哈希。

# r - R中意外的PCA分数

> ID：15421253
> 
> 赞同：2
> 
> 时间：2013-03-14T22:16:54.047
> 
> 标签：r, pca

给定数据矩阵 M，pc=prcomp(M) 提供 pc$rotation（特征向量矩阵）和 pc$x，即原始变量在 pca 空间中的得分。但是，我获得的分数与“手动”计算的内积不匹配。

例如，如果我有矩阵

```
m1=matrix(c(1,2,3,4,4,8,7,9,5,3,2,11),byrow=TRUE,nrow=3) 
```

`pctest=prcomp(m1)`分别为 pctest$x、pctest$rotation 返回以下内容：

```
Rotation:
          PC1        PC2        PC3
    [1,] -0.3751603  0.3133237 -0.5240612
    [2,] -0.5810952 -0.4802203  0.5681371
    [3,] -0.3471051 -0.5836868 -0.6211215
    [4,] -0.6333255  0.5749142  0.1295694

pctest$x
           PC1       PC2           PC3
     [1,]  5.11167 -1.326545 -1.110223e-16
     [2,] -4.05543 -2.728072 -1.942890e-15
     [3,] -1.05624  4.054616  2.831069e-15 
```

现在，变量 1 在 PCA 轴 2 上的得分（例如）应该只是 m1[1,] 在 pctest$rotation[,2] 上的内积，即

```
 m1[1,]%*%pctest$rotation[,2]
        [,1]
        [1,] -0.09852071 
```

而不是 pctest$x[1,2]，即 -1.3265

这只是缩放问题，还是 $x 返回的不是原始变量在 PCA 轴上的投影？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:18:48.053

阅读文档以`?prcomp`回答您的问题：*计算是通过（居中和可能缩放的）数据矩阵的奇异值分解完成的......*

您需要先居中并缩放`m1[1,]`，然后才能将其与相应的 PCA 向量相乘。这可以通过将`center`and`scale`参数设置为`FALSE`之后很容易地观察到：

```
all.equal(m1 %*% pctest$rotation, pctest$x)
[1] TRUE 
```

# c++ - 已在 .obj 中定义 - 没有双重包含

> ID：15421254
> 
> 赞同：40
> 
> 时间：2013-03-14T22:16:57.450
> 
> 标签：c++, visual-studio-2010, oop, boost, include

我碰巧得到了 .obj 错误中已经定义的那个。这是我的项目的结构：

### 主文件

```
#include "main.h"; 
```

### 主文件

```
#include <iostream>
#include <string>
#include <sstream>
#include <boost/asio.hpp>
#include <boost/thread/thread.hpp>
#include "client.cpp" 
```

### 客户端.cpp

```
#ifndef SOCKET_CLIENT_CLASS
#define SOCKET_CLIENT_CLASS
#ifndef BOOST_ASIO_HPP
#include <boost/asio.hpp>
#endif
/*CLASS DEFINITION HERE*/
#endif 
```

这就是编译器所抱怨的：

> main.obj : 错误 LNK2005: "public: bool __thiscall **SocketClient::read** (int,char *)" (?read@SocketClient@@QAE_NHPAD@Z)**已经**在 client.obj 中定义

请注意，它是在抱怨我的课程，而不是提升。一件有趣的事情是，当我`#include <boost/asio.hpp>`从**client.cpp**中删除时，我会收到错误，尽管**它也包含在 main.h 中**。

如您所见，我没有双重定义/包括我的课程，它在*main.h中只包含***一次**。那么这里发生了什么？ 我已经阅读[了这个答案](https://stackoverflow.com/a/7528305/607407)，但它没有帮助，因为它需要双重包含。在投票支持重复之前考虑这个事实，因为这仅仅意味着毫不留情地斩首我。

 ** * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-14T22:24:30.120

这不是*编译器*错误：错误来自*链接器*。编译后，链接器将合并每个翻译单元（`.cpp`文件）编译产生的目标文件。

链接器发现您在不同的翻译单元中多次定义了相同的符号，并抱怨它（这违反了单一定义规则）。

原因肯定是`main.cpp`包含`client.cpp`，并且这两个文件都由编译器单独处理以生成*两个*单独的目标文件。`client.cpp`因此，在翻译单元中定义的所有符号也将在翻译单元中定义`main.cpp`。这是您通常不归档的原因之一`#include` `.cpp`。

将您的类的定义放在一个单独的`client.hpp`文件中，该文件**不**包含该类的成员函数的定义；然后，让`client.cpp`并`main.cpp`包含该文件（我的意思是`#include`）。最后，保留`client.cpp`类成员函数的定义。

**客户端.h**

```
#ifndef SOCKET_CLIENT_CLASS
#define SOCKET_CLIENT_CLASS
#ifndef BOOST_ASIO_HPP
#include <boost/asio.hpp>
#endif

class SocketClient // Or whatever the name is...
{

// ...

    bool read(int, char*); // Or whatever the name is...

//  ...
};

#endif 
```

**客户端.cpp**

```
#include "Client.h"

// ...

bool SocketClient::read(int, char*)
{
    // Implementation  goes here...
}

// ... (add the definitions for all other member functions) 
```

**主文件**

```
#include <iostream>
#include <string>
#include <sstream>
#include <boost/asio.hpp>
#include <boost/thread/thread.hpp>
#include "client.h"
//              ^^ Notice this! 
```

**主文件**

```
#include "main.h" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-14T22:26:07.160

你可能不想这样做：

```
#include "client.cpp" 
```

编译器将编译 *.cpp 文件作为构建的一部分。通过将它包含在其他文件中，它将在您包含它的每个文件中再次（一次又一次！）编译。

*现在事情是这样的：* 你用 来保护它`#ifndef SOCKET_CLIENT_CLASS`，但是，每个文件`#include "client.cpp"` *都是独立构建*的，因此会发现`SOCKET_CLIENT_CLASS`尚未定义。因此它的内容将被包括在内，而不是#ifdef'd out。

如果它包含任何定义（而不仅仅是声明），那么这些定义将在包含它的每个文件中重复。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-06-26T19:38:38.460

我确实建议在 2 个填充（.h .cpp）中执行它但是如果你懒惰只是`inline`在函数之前添加所以它看起来像这样

```
inline void functionX() 
{ } 
```

更多关于内联函数：

> 内联函数是 C++ 增强功能，用于增加程序的执行时间。函数可以被指示编译器使它们内联，以便编译器可以在任何被调用的地方替换那些函数定义。编译器在编译时替换内联函数的定义，而不是在运行时引用函数定义。注意 - 这只是对编译器的建议，使函数内联，如果函数很大（就可执行指令等而言），编译器可以忽略“内联”请求并将函数视为普通函数。

更多信息[在这里](https://www.cplusplus.com/articles/2LywvCM9/)*

# qt5 - QT 5.0 Qudpsocket 不会触发 waitforbyteswritten

> ID：15421262
> 
> 赞同：1
> 
> 时间：2013-03-14T22:17:38.657
> 
> 标签：qt5, qudpsocket

我已经绑定了一个 udp 套接字，我正在尝试为特定地址编写一个 udp 数据报，所以这是我的代码：

```
UDP::UDP(QObject *parent) :
    QObject(parent)
{
    socket = new QUdpSocket(this);
    QObject::connect(socket,SIGNAL(bytesWritten(qint64)),this,SLOT(bytesWritten(qint64)));
    QObject::connect(socket,SIGNAL(readyRead()),this,SLOT(readyRead()));
}
void UDP::connect(int port){

if(socket->state()==QAbstractSocket::BoundState){
    qDebug()<<"already bound try to disconnect";
    socket->close();
}
     if(socket->bind(QHostAddress::Any,port,QAbstractSocket::ShareAddress|QAbstractSocket::Reuse    AddressHint)){
        qDebug()<< "listening";
        emit changeStatus("UDP: escutando("+QString::number(port)+")");
    }else{
        qDebug()<< "error no bind";
        emit changeStatus("UDP: erro no bind("+QString::number(port)+")");
    }
}

void UDP::bytesWritten(qint64 bytes){
    qDebug()<<"bytes written:"<<bytes;
    emit changeStatus("UDP: enviado");
}

void UDP::readyRead(){
    qDebug()<<"ready to read";
    QByteArray datagram;
    QHostAddress sender;
    quint16 senderPort;

    datagram.resize(socket->pendingDatagramSize());
    socket->readDatagram(datagram.data(),datagram.size(),&sender,&senderPort);
    qDebug()<< "datagram received from " << sender.toString();

    emit receivedUDPdata(datagram);

}
bool UDP::write(QString dest,int port, QString buffer, int size){
    char *finalOutput;
    finalOutput = new char[size];
    unsigned int j=0;

    for(unsigned int i=0;i<size;i++){
        if(buffer[i]== '\\'){
            switch (buffer.at(++i).toLatin1()){
            case 'r':
                finalOutput[j++] = '\r';
                break;
            case 'n':
                finalOutput[j++]= '\n';
                break;
            case 't':
                finalOutput[j++]='\t';
                break;
            case '\\':
                finalOutput[j++]='\\';
                break;
            }
        }else{
            finalOutput[j++]= buffer[i].toLatin1();
        }
    }
    socket->writeDatagram(finalOutput,j,QHostAddress(dest),port);
    if(!socket->waitForBytesWritten(2000)){
        qDebug() << "UDP Couldnt write.";
        emit changeStatus("UDP: Não foi possível escrever");
        return false;
    }
    return true;
} 
```

变量 dest 是 QString，但是在我调用 socket->writeDatagram 之后，它进入下面的 if 就好像它失败了，但实际上字节被写入（然后我接收）并发出 byteswritten 信号。那么为什么要进入 if 子句呢？

ps（我将 ip dest 测试为 127.0.0.1）并且 socket->errorString() 打印“未知错误”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-12T18:13:21.527

QAbstractSocket::waitForBytesWritten() 用于 TCP 套接字，在调用 write() 之后。

使用 QUdpSocket，API 是 writeDatagram()，它立即发送（至少在 Qt 级别，我想操作系统有一个缓冲区）。为了证明这一点，请参阅 src/network/socket/qudpsocket.cpp 中 writeDatagram() 的实现，它发出 bytesWritten(sent);

所以在 writeDatagram() 之后调用 waitForBytesWritten() 是没有意义的。

# c++ - 遍历文件失败

> ID：15421263
> 
> 赞同：3
> 
> 时间：2013-03-14T22:17:40.513
> 
> 标签：c++

我想遍历文件并打印所有字符串。例如，该文件包含：

```
a
1
2
10
a1
1
b 
```

将输出：

```
a
a1
b 
```

我这样写我的代码：

```
int main(){
  ifstream stream;
  stream.open("example.txt");
  string temp;
  while (getline(stream, temp)){
    cout<<temp<<endl;
    int n;
    while(stream>>n){}
  }
} 
```

这个程序在线打印“a”和“a1”。和建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:54:35.460

会发生以下情况：一旦您的程序到达这一行，

```
while(stream>>n){} 
```

它尝试从文件中读取以下标记作为`int`egers。`1`成功。 `2`成功。 `10`成功。 `a1`失败。

`stream`现在处于失败状态 ( `stream.fail() == true`)。您的代码执行的下一条语句是

```
while (getline(stream, temp)){ 
```

这*将*读取下一个标记 ( `a1`) 但由于`stream`处于失败状态，结果`getline`将被解释为`false`，并且循环将被中断。

这就是您的程序提前结束的原因。但是，它甚至不应该 print `a1`。事实上，它只`a`在我的机器上打印。

在循环内吃完整数标记后，您需要清除失败状态。在末尾添加以下语句：

```
stream.clear(); 
```

这将重置失败状态 ( `stream.fail() == false`) 并且外部循环将继续运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:37:39.120

那这个呢？

```
std::copy_if(std::istream_iterator<string>(stream), std::istream_iterator<string>(),
             std::ostream_iterator<string>(std::cout),
             [](std::string const& rhs) { return !std::isdigit(rhs[0]); }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:47:36.680

如果字符串不为空，并且以字母开头，对吗？

```
if (temp.size() > 0 && isalpha(temp[0]))
{
    cout << temp;
} 
```

# html - 在火狐中。为什么 Mozilla 不支持在其浏览器中输入数字？

> ID：15421264
> 
> 赞同：0
> 
> 时间：2013-03-14T22:17:44.850
> 
> 标签：html, firefox, numbers, html-input

真奇怪。输入数字是 W3C 的标准，但它还不适用于 Firefox。

在 Firefox 上使用输入数字有什么技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T02:25:50.963

这是一个提议的标准，而不是一个标准。有区别。

它没有任何技巧。只是桌面 Firefox 尚不支持它（Android 上的 FirefoxOS 和 Firefox 可能有实现；我不清楚它们是否支持）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T16:08:07.280

你可以在这里看到当前的牵引力：

[https://bugzilla.mozilla.org/show_bug.cgi?id=344616](https://bugzilla.mozilla.org/show_bug.cgi?id=344616)

# php - 这个 PHP 的语法错误

> ID：15421268
> 
> 赞同：-3
> 
> 时间：2013-03-14T22:17:59.680
> 
> 标签：php, syntax

此代码在带有“else”的行上为我提供了一个语法错误。任何建议，谢谢！

```
<?php
if($_SESSION['id'])
echo '<div id="center" class="column">';
include("center.php");
echo'</div>
<div id="left" class="column">';
include("leftbar.php");
echo'</div>
<div id="right" class="column">';
include("rightbar.php");
echo '</div>';
else
echo '<h1>Staff please, <a href="index.php">login</a> 
before accessing this page, no access to students.</h1>';
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:20:05.007

您需要将它们放在一个块内。块以 开头`{`和结尾`}`。

```
if($_SESSION['id']) {
  echo '<div id="center" class="column">';
  include("center.php");
  echo'</div>
  <div id="left" class="column">';
  include("leftbar.php");
  echo'</div>
  <div id="right" class="column">';
  include("rightbar.php");
  echo '</div>';
}
else {
  echo '<h1>Staff please, <a href="index.php">login</a> 
  before accessing this page, no access to students.</h1>';
} 
```

* * *

PS：我建议`isset()`在 if 条件内使用。像这样：

```
if( isset($_SESSION['id']) ) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:20:31.260

是的，我的建议是使用括号。现在你的代码基本上是这样的：

```
<?php
if($_SESSION['id']) {
    echo '<div id="center" class="column">';
}
include("center.php");
echo'</div>
<div id="left" class="column">';
include("leftbar.php");
echo'</div>
<div id="right" class="column">';
include("rightbar.php");
echo '</div>';
} else {} <--- error is here because there is no open if statement since you didn't use brackets
echo '<h1>Staff please, <a href="index.php">login</a> 
before accessing this page, no access to students.</h1>';
?> 
```

请注意，由于您没有使用括号，因此您的 if 条件仅适用于以下代码行。当解析器命中 else 行时，没有打开的 if 条件与 else 相关。

您的代码应如下所示：

```
<?php
if($_SESSION['id']) {
    echo '<div id="center" class="column">';
    include("center.php");
    echo'</div><div id="left" class="column">';
    include("leftbar.php");
    echo'</div><div id="right" class="column">';
    include("rightbar.php");
    echo '</div>';
} else {
    echo '<h1>Staff please, <a href="index.php">login</a> before accessing this page, no access to students.</h1>';
}
?> 
```

# c# - 有没有办法创建一个具有 Add 方法但也具有协变类型参数的集合？

> ID：15421269
> 
> 赞同：1
> 
> 时间：2013-03-14T22:18:02.017
> 
> 标签：c#, generics, collections, ienumerable

我需要一个具有 Add 方法和协变类型参数的集合。

T 的 IEnumerable 覆盖协变类型参数

```
public interface IEnumerable<out T> : IEnumerable 
```

但它没有 Add 方法。

T 的 IList 没有协变类型参数，但有 Add 方法。

有谁知道一个可以涵盖这个或如何制作的集合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:22:18.420

`IEnumerable<out T>`意味着“这种类型的值可以分配给任何类型的变量，`IEnumerable<X>`其中`X`是`T`或父级`T`”

如果你有类似的东西`IList<out T>`，那意味着你可以执行以下操作：

```
IList<string> strings = new List<string>();
IList<object> objects = strings; 
objects.Add(new object()); 
```

显然这不是类型安全的，这就是为什么不存在这样的接口的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:12:43.853

不能有一个接口，它是相对于并包含一个接受 type 的方法的*共同*变体，因为这意味着能够接受任何类型的集合能够接受任何类型的。可以定义一个带有类型参数的方法的*Contra*变体接口（我更喜欢“feed”而不是“add”，因为后一个术语也可以指算术运算，并且因为存在可以接受对象的对象并且对它们做一些事情并不意味着这些对象被添加到某种集合中；例如，一个人可以很容易地拥有一个过滤类，它接受一个和一个`T``Add``T``Dog``Animal`*`IFeedable<in T>``Feed``T``IFeedable<T>``Predicate<T>`并`IFeedable<T>`通过获取每个给定的值来实现，称为谓词函数，并且仅当谓词返回 true 时才`T`将项目传递给提供的项。`IFeedable<T>`提供给这种方法的数据不一定会“添加”到任何类型的集合中，但仍会“馈送”给实现接口的对象。*

# android - 带有圆角而不是 100% 屏幕宽度的自定义 FragmentDialog

> ID：15421271
> 
> 赞同：58
> 
> 时间：2013-03-14T22:18:03.833
> 
> 标签：android, custom-component, android-dialogfragment

我正在创建一个带有圆角的自定义片段对话框，其布局不会填充屏幕宽度（我希望它只是包装其内容）。

这是我`rounded_dialog.xml`的可绘制文件夹，我的自定义将其调用`ThemeWithCorners`为对话框的背景。我还尝试将其设置为创建其内容的线性布局的背景，但没有任何效果。

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" 
>
<solid android:color="@android:color/white"/>
<corners android:radius="20dp"
/>
</shape> 
```

这就是我调用对话框的方式：

```
final String FTAG = "TAG_FRAGMENT_DIALOG_CALENDAR";
    dialog = (CalendarDialog) fm.findFragmentByTag(FTAG);
    ft = fm.beginTransaction();
    if (dialog != null)
    {
        ft.remove(dialog);
    }
    dialog = CalendarDialog.newInstance(this);      
    dialog.setCancelable(true);

    ft.add(dialog, FTAG);
    ft.show(dialog);
    ft.commit(); 
```

在对话框的 onCreate 方法中，我设置了样式和主题：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setStyle(DialogFragment.STYLE_NO_TITLE, R.style.ThemeWithCorners);      
} 
```

这是 onCreateView 方法：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
getDialog().setCanceledOnTouchOutside(true);
v = (MyCalendar)inflater.inflate(R.layout.calendar_dialog, container, true)
    return v;
} 
```

我还尝试将其添加到 onCreateDialog 方法中，作为 SO 上的其他答案建议但也没有工作：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState)
{
    Dialog d =  super.onCreateDialog(savedInstanceState);
    LayoutParams lp=d.getWindow().getAttributes();
    d.getWindow().setBackgroundDrawable(new ColorDrawable(0));
    lp.width=-2;lp.height=-2;lp.gravity=Gravity.CENTER;
    lp.dimAmount=0;            
    lp.flags=LayoutParams.FLAG_LAYOUT_NO_LIMITS | LayoutParams.FLAG_NOT_TOUCH_MODAL;

    return d;
} 
```

所以总结一下，我想要圆角，而不是 100% 的屏幕宽度，它最好应该包裹它的内容。拜托，拜托，我需要一些帮助，我真的很绝望，我已经尝试了好几天了！

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2017-07-04T18:23:09.487

**对话背景：** `dialog_rounded_bg.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@android:color/white" />
    <corners android:radius="12dp" />
</shape> 
```

**对话框布局：** `dialog_rounded.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/dialog_rounded_bg"
    android:minWidth="260dp"
    android:orientation="vertical"
    android:padding="24dp">
    ...
</LinearLayout> 
```

**对话框片段：** `RoundedDialog.java`

```
public class RoundedDialog extends DialogFragment {
    ...
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                            Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.dialog_rounded, container, false);
        // Set transparent background and no title
        if (getDialog() != null && getDialog().getWindow() != null) {
            getDialog().getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));
            getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE);
        }
        return view;
    }
    ...
} 
```

[![圆形对话框](../Images/c101df44ccdba37c7583daa811c2e461.png)](https://i.stack.imgur.com/I5BYGm.png)

**更新：**如果您不设置标志，则在 Android ≤ 4.4 的设备中，对话框顶部会出现`Window.FEATURE_NO_TITLE`一条[蓝线。](https://stackoverflow.com/q/37738690/6305235)

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2013-03-15T00:23:17.327

好吧，我刚刚找到了一个解决方案，但我对此并不满意。

我为对话框设置了背景（rounded_dialog.xml），如下所示：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle">
<solid android:color="@android:color/transparent"/>
<corners android:radius="10dp" />
<padding android:left="10dp" android:right="10dp"/>
</shape> 
```

然后我在下面的“onCreateView”方法中将它设置为我的对话框。圆角在这段代码中并不是真正需要的，因为背景是透明的，但是填充很重要，因为对话框实际上仍然和屏幕一样宽，但是填充使它看起来不像。

```
getDialog().getWindow().setBackgroundDrawableResource(R.drawable.rounded_dialog); 
```

最后，我将对话框组件的背景设置为另一个使角落变圆的自定义可绘制对象。我有一个LinearLayout，顶部有RelativeLayout，底部有TextView，所以我将@null 设置为父LinearLayout，并为这两个部分设置了两个不同的自定义drawable，其中一个具有圆形bottomCorners，另一个具有topCorners。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical" 
android:background="@drawable/title_round"  
>

<RelativeLayout
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"        
    android:orientation="horizontal" 
    android:background="@drawable/blue_title_round_top"
    android:paddingTop="4dp"
    android:paddingBottom="4dp"
    >
<TextView 
    android:id="@+id/calendarHint"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/rounded_bottom"
    android:layout_gravity="center"
    android:gravity="center"
        />
</LinearLayout> 
```

我相信有一个更合适的解决方案，因为这只是在视觉上是正确的，而不是真正的功能，但对于这种情况来说足够正确。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-08-23T08:32:04.713

使用 Kotlin 和 View Binding 更新了 2022 年的答案 -

```
class InternetLostDialog : DialogFragment() {

    private lateinit var binding: DialogInternetLostBinding

    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {
        binding = DialogInternetLostBinding.inflate(LayoutInflater.from(context))
        val builder = AlertDialog.Builder(requireActivity())
        isCancelable = false
        builder.setView(binding.root)
        binding.root.setOnClickListener {
            requireActivity().finish()
        }
        val dialog = builder.create()
        dialog.window!!.setBackgroundDrawable(ColorDrawable(Color.TRANSPARENT))
        return dialog
    }

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-10T19:47:06.787

**另一种方式：** 使用`setStyle()`in`onCreate()`方法**将样式**应用于您的`DialogFragment`.
然后，您可以像往常一样在文件的**根视图**中使用`android:background`相同的方法。**`your_layout.xml`**

 *** * *

脚步：

1.  **style.xml**文件（在**res**文件夹中）：

```
<style name="DialogTheme_transparent" parent="Theme.AppCompat.Dialog">
    <item name="android:windowBackground">@android:color/transparent</item>
    <!--You can set other style items also, such as animations and etc-->
</style> 
```

2.  `your_layout.xml`在**布局文件夹**中创建文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="8dp"
    android:background="@drawable/bg_corner_dialog">
    ...
</LinearLayout> 
```

3.  `bg_corner_dialog.xml`在**可绘制文件夹**中创建文件：

```
<?xml version="1.0" encoding="utf-8"?>
<shape
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle"
    android:dither="true">
    <solid android:color="#ffffff"/>
    <corners android:radius="16dp"/>
</shape> 
```

4.  最后适用于你`style`的：`layout``DialogFragment`

```
public class CustomDialogFragment extends DialogFragment {
    ...

    @Override
    public void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setStyle(STYLE_NO_TITLE, R.style.DialogTheme_transparent);
        ...
    }

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.your_layout, container, false);
        ButterKnife.bind(this, v);
        //init UI Elements...
        return v;
    }

} 
```

我希望这可以帮助你。
最好的祝愿

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-14T21:13:03.880

使用 Kotlin 对我有用的更新解决方案。

我为对话框设置了背景（rounded_dialog.xml），如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <corners android:radius="28dp" />
    <solid android:color="@color/white"/>
</shape> 
```

然后以编程方式计算屏幕宽度，然后使用此代码片段从中减去 Margin 值。

```
val displayMetrics = DisplayMetrics()
        requireActivity().windowManager.defaultDisplay.getMetrics(displayMetrics)
        val width = displayMetrics.widthPixels 
```

然后在 onStart 回调中，我应用了该宽度减去边距。这是完整的代码。

```
@AndroidEntryPoint
class CancelDialogFragment : DialogFragment() {

    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {

        if (dialog != null && dialog?.window != null) {
            dialog?.window?.setBackgroundDrawable(ColorDrawable(Color.TRANSPARENT));
            dialog?.window?.requestFeature(Window.FEATURE_NO_TITLE);
        }
        return inflater.inflate(R.layout.fragment_cancel_dialog, container, false)
    }

    override fun onStart() {
        super.onStart()
        val displayMetrics = DisplayMetrics()
        requireActivity().windowManager.defaultDisplay.getMetrics(displayMetrics)

        val width = displayMetrics.widthPixels
        val height = displayMetrics.heightPixels

        dialog?.window?.setLayout(width-64, ViewGroup.LayoutParams.WRAP_CONTENT)
    }

} 
```

XML 布局`fragment_cancel_dialog`

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:paddingVertical="32dp"
    android:padding="8dp"
    android:layout_marginHorizontal="8dp"
    android:background="@drawable/rounded_dialog"
    tools:context=".ui.orders.CancelDialogFragment">

    <TextView
        android:id="@+id/textView9"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp"
        android:text="Reason of cancellation"
        android:textSize="16sp"
        app:layout_constraintStart_toStartOf="@+id/firstNameTIL"
        app:layout_constraintTop_toTopOf="parent" />

    <com.google.android.material.textfield.TextInputLayout
        android:id="@+id/firstNameTIL"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="24dp"
        android:layout_marginTop="16dp"
        app:hintAnimationEnabled="false"
        app:hintEnabled="false"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/textView9">

        <com.google.android.material.textfield.TextInputEditText
            android:id="@+id/firstNameET"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/edit_text_bg"
            android:drawablePadding="12dp"
            android:inputType="textPersonName"
            android:paddingHorizontal="16dp"
            android:paddingVertical="16dp"
            android:textAlignment="viewStart"
            android:textColor="@color/textColor"
            android:textColorHint="@color/black" />
    </com.google.android.material.textfield.TextInputLayout>

    <Button
        android:id="@+id/signUpButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:layout_marginTop="16dp"
        android:layout_marginBottom="32dp"
        android:background="@drawable/button_bg"
        android:paddingHorizontal="56dp"
        android:text="@string/confirmStr"
        android:textAllCaps="false"
        android:inputType="text"
        android:textColor="@color/black"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintHorizontal_bias="0.5"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/firstNameTIL" />

</androidx.constraintlayout.widget.ConstraintLayout> 
```

[![在此处输入图像描述](../Images/259497ee753a378fa3f9558b295bb9e0.png)](https://i.stack.imgur.com/VgOO6.jpg)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-07T18:04:54.617

DialogFragment 有一个快速修复。例如，在方法 onCreateDialog()中在 AlertDialog.Builder(context, style) 中**添加样式：**

```
@NonNull
@Override
public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {
    View view = LayoutInflater.from(getActivity()).inflate(R.layout.custom_dialog_lauout, null);
    return new AlertDialog.Builder(getActivity(), R.style.custom_alert_dialog)
            .setView(view)
            .setPositiveButton(android.R.string.ok, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int i) {
                    // do something
                }
            })
            .setNegativeButton(android.R.string.cancel, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                }
            })
            .create();
} 
```

**在样式文件夹中** `custom_alert_dialog`

```
<style name="custom_alert_dialog" parent="Theme.AppCompat.Light.Dialog.Alert">
    <item name="android:windowBackground">@drawable/corner_background</item>
</style> 
```

在可绘制文件夹中`corner_background.xml`

```
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<solid android:color="#FFFFFF" />
<corners android:radius="8dp" /> 
```

[![在此处输入图像描述](../Images/7bc422b602fe462991d5dd4ed6ea3ea6.png)](https://i.stack.imgur.com/DUPOR.png)

已针对 API >= 21 进行测试

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-29T10:44:19.787

对于任何想要使用 AlertDialogBu​​ilder 并透明背景并在 XML 文件中设置 Drawable 的人。

```
<style name="DialogStyle" parent="ThemeOverlay.MaterialComponents.Dialog.Alert">

<item name="android:background">@drawable/dialog_background</item>
<item name="android:windowBackground">@android:color/transparent</item> 
```

> 在 Builder 上设置这个主题，如下所示

```
private val builder: AlertDialog.Builder = AlertDialog.Builder(context,R.style.DialogStyle)
    .setView(dialogView) 
```

R.drawable.dialog_background 在哪里

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
<item>
    <shape android:shape="rectangle" android:padding="10dp">
        <solid
            android:color="@color/dialog_bg_color"/>
        <corners
            android:radius="30dp" />
    </shape>
</item> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-17T09:07:16.653

我认为制作圆角，如果您将 cardview 作为布局的根并在 onCreateView() 中添加以下代码，会容易得多： alertDialog.getWindow().setBackgroundDrawableResource(android.R.color.transpare‌​nt)**

# mysql - 如何使用 SQL Server 将 Joomla 1.5 Akeeba Backup 3.4.3 站点恢复到新服务器？

> ID：15421273
> 
> 赞同：0
> 
> 时间：2013-03-14T22:18:16.107
> 
> 标签：mysql, sql-server, joomla, installation, migrate

Joomla 2.5 支持 SQL Server，但我在 Joomla 1.5 中创建了一个使用 Akeeba Backup 3.4.3 和 MySQL 的旧站点。

当我第一次导航到该站点时，Akeeba Backup 识别出需要安装该站点，但它没有给我使用 MSSQL Server 的选项。

我尝试将较新的 Joomla 2.5 转储到 web 目录中，但这并没有帮助。有谁知道如何将使用 MySQL 的 Joomla 1.5 站点迁移到使用 SQL Server 的 Joomla 2.5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:35:15.837

我让它工作了。

首先，旧站点必须使用 MySQL，以便我可以使用 jUpgrade 将其升级到 joomla 2.5。jUpgrade Pro（测试版软件）不起作用，仅供参考，所以我不得不使用原来的 jUpgrade。网站顺利升级到joomla 2.5。

接下来，我必须获得我正在使用的模板的最新版本。当我尝试安装较新版本的 YooTheme Phoenix 模板时，它不让我安装它，说已经有一个具有该名称的模板。我只是删除了现有的“templates\yoo_phoenix”文件夹，然后再次安装了新主题，它就可以工作了。之后，两个模板（旧的和新的）都出现在模板管理器中，但只有新的有效（名称以“- Default”结尾。然后我能够卸载旧的。此时，该站点运行良好。

随着新站点在 MySQL 上的 joomla 2.5 中启动并运行，我应该能够使用 akeeba 备份来备份站点，然后我将备份恢复到设置为使用 SQL Server 的新站点。在成功将站点恢复到 SQL Server 后，我将更新此内容。

# sql - 如何将一个 select 语句的结果用作另一个中的变量？

> ID：15421275
> 
> 赞同：0
> 
> 时间：2013-03-14T22:18:25.547
> 
> 标签：sql, database, variables

这就是我想要做的

```
WITH 
loc_id AS ( // take the result of the following select statement
SELECT l.location_id
  FROM mopdb.lulocation l
  WHERE (l.location_short = 'FOO'))

SELECT d.device
  FROM mopdb.ludevice d
  LEFT JOIN lulocation l ON (d.location_id = l.location_id)
  WHERE (d.location_id = loc_id) //use it here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:23:48.987

如果您尝试使用公用表表达式，那么`loc_id`将是一个可以像子查询一样使用的表，因此您可以执行以下操作：

```
with loc_id as (
    select l.location_id
    from mopdb.lulocation l
    where (l.location_short = 'FOO')
) select
    d.device
from mopdb.ludevice d
left join lulocation l on d.location_id = l.location_id
where d.location_id = (select location_id from loc_id); 
```

然而，变量在每种 SQL 方言中都有不同的语法，因此它在很大程度上取决于您使用的产品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:27:16.120

丑陋，但是：

```
 SELECT d.device
      FROM mopdb.ludevice d
      LEFT JOIN lulocation l ON d.location_id = l.location_id
      WHERE d.location_id = 
       (
        SELECT x.location_id
        FROM mopdb.lulocation x
        WHERE (x.location_short = 'FOO')
      ) 
```

# ios - 为什么在通过 Dropbox Sync API 下载文件时，此块不执行进度更新？

> ID：15421276
> 
> 赞同：2
> 
> 时间：2013-03-14T22:18:28.883
> 
> 标签：ios, objective-c, dropbox, dropbox-api

```
[tFile addObserver:self block:^() {
    NSLog(@"here");
}];
NSData * tData = [tFile readData:&tError]; 
```

我有一个现有的观察者运行良好：

```
[tFilesystem addObserver:self forPathAndDescendants:[DBPath root] block:^() {}]; 
```

* * *

编辑

在示例笔记应用程序中似乎也没有调用该块。

```
[_file addObserver:self block:^() { [self reload]; }]; 
```

这应该在桌面上编辑文件并保存后重新加载文件。它没有。

# php - 正则表达式不仅识别文件名，甚至识别字符

> ID：15421281
> 
> 赞同：0
> 
> 时间：2013-03-14T22:18:39.660
> 
> 标签：php, regex

我正在使用正则表达式来查看字符串是否包含文件名，例如 P1190681。问题是正则表达式认为字符串中的字母是文件名或类似的东西。让我告诉你我的意思。

这是我的正则表达式，它将识别文件名（例如 P1190681 或 PICT1136）`([P|PICT0-9_{,7}]+)`：如果字符串（例如“输入正确的验证码”）包含任何 P、I、C、T 或任何数字，它会将这些转换为链接，这是**错误**的！

如何使此正则表达式**仅**将文件名识别为我用作示例的文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:29:11.050

感谢马里奥，这是解决方案：`(P[0-9]|PICT[0-9]+)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:35:34.997

您的答案`(P[0-9]|PICT[0-9]+)`将只允许一位数字`P`

匹配`P1190681`或者`PICT1136`你可以使用，例如

```
P(ICT)?[0-9]+ 
```

# .net - 如何使用 .NET WebBrowser 控件中的上传文件对话框弹出窗口？

> ID：15421284
> 
> 赞同：0
> 
> 时间：2013-03-14T22:18:44.873
> 
> 标签：.net, dialog, browser, save, sendkeys

我`WebBrowser`在 C# 中使用 .NET 控件来自动处理网站。该页面有一个按钮控件，可打开`WebBrowser`控件的“上传文件”对话框以将文件上传到站点。但是，我似乎找不到任何直接使用此文件对话框的对象模型/类库？这似乎是一个标准的 MS windows 文件浏览器对话框，所以我希望有一种方法可以直接使用它。此外，当此对话框在 WebBrowser 控件中打开时，我的应用程序的主线程执行暂停，因此对我来说特别麻烦。

理想情况下，我想将文件名路径发送到对话框并直接使用对对话框的代码调用单击“打开”按钮，但我似乎无法找到通过对象模型执行此操作的方法。**在此对话框打开之前，我确实有一个有时**会起作用的解决方法（如果时间恰到好处并且月亮和所有星星都完美对齐）在此对话框打开之前使用 SendKeys() ，但这只是从长远来看的一个黑客，只能间歇性地工作. 我需要在所有情况下都有效的东西。

有没有人对我如何直接使用 .NET`WebBrowser`控件生成的“上传文件”对话框有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:52:33.940

你所要求的会造成如此巨大的安全漏洞，它*永远不会*发生。

您可以做的是使用该`WebClient.UploadFile`方法，或具有正确 ContentType 和 RequestStream 内容的 HttpWebRequest。

# gwt - 无需在 URL 中附加参数的 GWT 动态本地化

> ID：15421285
> 
> 赞同：1
> 
> 时间：2013-03-14T22:18:46.073
> 
> 标签：gwt, internationalization

根据 GWT 文档，有两种方法可以使我的 GWT 应用程序国际化。一种是通过标签在 HTML 本身中声明语言（硬编码）`meta`，另一种是在 URL 中使用查询参数（如`&locale=de`）。

我的 webapp 是动态的，来自不同地区的不同用户将使用它，所以第一个选项不可行。第二个选项很好，但不知何故，将查询参数附加到 URL 是我的宠儿。我试图通过做类似`$("head).append("<meta name='gwt:property' content='locale=de'>");`第一件事的事情来使其动态化`onModuleLoad`，但它不起作用。

我的应用程序实际上将是一个重定向，其他一些网页将包含一个重定向，例如`foo.com&locale=de`. 基于此，它将加载所需的语言环境。但在那之后，我想再次重新加载它而不在 URL 中显示查询参数，从可以在第一次加载时设置的 cookie 中获取语言环境信息。有可能这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:32:20.863

## 还有第三个选项使用`cookie`.

参考 -[动态生成内容的 GWT 国际化](https://stackoverflow.com/questions/15256782/gwt-internationalization-for-dynamically-generated-content/)

在用户选择他的语言环境之前，请确保您为 cookie 设置了语言环境值或为您的 cookie 设置了默认值。在我们的例子中，用户在登录前选择一种语言（我在其中为用户设置 cookie 区域设置值）并在加载时将其读入 gwt 应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T00:27:45.797

将参数添加到模型（在 a 中`Controller`）并在客户端（在 a 中`*.jsp`）获取它对您有用吗？

```
<meta name="gwt:property" content="locale=${locale}"> 
```

然后你只需要刷新页面并重置控制器中的区域设置值。在您的页面中添加元标记代码`html/jsp`，它应该在页面加载之前存在。

`onModuleLoad`适用于已经加载到浏览器窗口的代码，因此`meta`加载后追加将不起作用。

# php - 无法在 PHP/MySQL 中创建 $_SESSION？

> ID：15421286
> 
> 赞同：0
> 
> 时间：2013-03-14T22:18:46.583
> 
> 标签：php, mysql

```
ID  UID         Username    Full Name       Password    Rank
0   131037146   DSaidov     Денис Саидов    PASS        Администратор
0   1970687978  LKatzarov   Любомир Кацаров PASS        Администратор
0   58367315    Admin       Георги Гергинов PASS        Собственик 
```

这是我的 MySQL 表；我想创建一个 $_SESSION 来保存当前在 CMS 中登录的用户的全名内容。这是 auth.php 文件：

```
<?php
include("sql.php");
session_start();

function Destroy() {
    unset($_SESSION['UID']);
    unset($_SESSION['USERNAME']);
    unset($_SESSION['FULL NAME']);
    header("location: index-restricted.php");
}

if(isset($_SESSION['UID']) && isset($_SESSION['USERNAME'])) {
    $UID = $_SESSION['UID'];
    $username = $_SESSION['USERNAME'];
    $qry = mysql_query("SELECT * FROM `users` WHERE `UID` = '$UID' AND `Username` = '$username'");
    if(mysql_num_rows($qry) != 1) { Destroy(); }
} else { Destroy(); }?> 
```

先感谢您。

# java - 可比类

> ID：15421289
> 
> 赞同：1
> 
> 时间：2013-03-14T22:18:59.117
> 
> 标签：java, comparable

一段时间以来，我一直在尝试学习可比较的类，我知道正确的语法以及在大多数情况下如何使用它。如：

```
int result = ObjectA.compareTo(ObjectB); 
```

如果两个对象相同，则返回值 0；如果对象 A 小于对象 B 则为负值，如果 A 大于 B 则为正值。

但是，当我实际编写一个使用 compareTo 方法的程序时，编译器说它找不到 compareTo 方法。

我的问题是：我必须直接从 Comparable 类继承才能使用 compareTo 方法吗？我问的唯一原因是因为您不必显式继承 toString 或 equals 之类的方法......因为一切都从对象继承。CompareTo 属于哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T22:21:18.163

您需要实现`Comparable`接口：

```
public class MyClass implements Comparable<MyClass> 
```

然后声明`compareTo()`方法：

```
public int compareTo(MyClass myClass){
    //compare and return result
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:21:29.997

[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)是一个接口，而不是一个类。所以你将实现接口，而不是子类。此外，实现接口意味着`compareTo`自己在实现类中实现方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:22:03.170

1.  首先，它只在实例中起作用。由于您的命名，不知道您的比较是比较对象还是类本身。我会假设你正在使用对象:)
2.  你想比较的类`#compareTo`必须实现`Comparable`。无需实现即可实现此目的的另一种方法`Comparable`是为您的排序方法提供`Comparator`期望您的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T22:22:53.940

`Comparable`是一个接口，所以你不要“继承”它（`extends`），而是实现它（`implements`）。

您可以在类中编写自己的`compareTo`方法而无需指定`Comparable`接口，但是 API 中的方法将不知道您的对象是否符合`Comparable`强制执行的合同。因此，您将无法使用`Arrays.sort()`期望与确实执行的对象一起使用的方法`Comparable`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T22:25:15.573

如果您想`A`比较类的对象，可能是因为您喜欢对这些对象的列表进行*排序*，则需要使类`A`实现`Comparable`接口。

一旦类`A`实现`Comparable`，它必须实现并定义 的行为`compareTo`，这本质上就是*您*希望如何比较类的两个对象`A`。

在这个方法中，您可以决定类的哪些字段`A`参与评估对象的*较小*或*较大*。

# jquery - 如何动画（）

> ID：15421293
> 
> 赞同：1
> 
> 时间：2013-03-14T22:19:25.637
> 
> 标签：jquery

Dreamweaver 没有说我有任何语法错误，那么为什么我的背景颜色没有改变？

jQuery：

```
$(function () {
    $("#contact").hover(function () {
        $("#contactform").stop().fadeIn(500);
        $(this).stop().animate({
            height: "260px",
            background: "blue"
        });
    }, function () {
        $("#contactform").stop().fadeOut(500);
        $(this).stop().animate({
            height: "20px",
        });

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:21:35.777

仅更改颜色的正确标签应该是“背景颜色”

```
$(this).stop().animate({
    height: "260px",
    'background-color': "blue"
}); 
```

还要确保你已经包含了 jQuery UI。

# php - 使用英国东线和北线计算距离（军械测量）

> ID：15421294
> 
> 赞同：1
> 
> 时间：2013-03-14T22:19:31.467
> 
> 标签：php, mysql, sql

我已经下载了包含所有英国邮政编码的邮政编码东向和北向的军械调查，我想执行一个 mySQL 查询来计算并显示给定距离的结果。

首先，我需要将属性中的所有记录与邮政编码表相匹配，以显示每个属性东向和北向连接到结果中。

然后，我需要计算给定邮政编码和每个属性记录之间的距离，并仅显示在给定距离内的那些。

我找到了很多使用 long/lat 的例子，但我似乎找不到任何使用法令测量东向和北向系统的好例子。根据法令调查指南，使用完整的 6 位数字，我应该得到以米为单位的答案。

我也收到此错误：

errorErrormessage: BIGINT UNSIGNED 值超出范围 '((( `mjm`. `pc`. `Eastings`- 436421) ^ 2) + (( `mjm`. `pc`. `Northings`- 291786) ^ 2))'

尝试测试查询时：

```
$query = "
            SELECT * , SQRT( (pc.Eastings - {$e1})^2 + (pc.Northings - {$n1})^2) AS distance
            FROM properties p, postcodes pc
            WHERE concat( p.POSTCODE1, p.POSTCODE2 )= pc.Postcode HAVING distance <= 10
            LIMIT 0 , 30
        "; 
```

有人可以帮我理解我需要做什么才能完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:46:48.377

^ 是 XOR 运算符，而不是平方。你能试试这个吗？

```
SQRT( POW(pc.Eastings - {$e1}, 2) + 
      POW(pc.Northings - {$n1}, 2)) as distance 
```

# c# - 如何缓存具有多个属性的对象

> ID：15421297
> 
> 赞同：1
> 
> 时间：2013-03-14T22:19:57.797
> 
> 标签：c#, caching, dictionary

我正在寻找缓存其唯一性由该对象中所有属性的组合确定的对象。我拥有的对象是这样的：

```
 public double A { get; set; }
    public double B { get; set; }
    public short C { get; set; }
    public bool D { get; set; }
    public double E { get; set; }
    public double F { get; set; }
    public double G { get; set; }
    public double H { get; set; }
    public double J { get; set; }
    public double K { get; set; }
    public double[] L { get; set; }
    public double[] M { get; set; } 
```

我可以覆盖`GetHashCode`并做类似的事情`return A ^ B ^ C etc...` 但是，我担心我会遇到很多冲突。

缓存这样的对象的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T22:23:21.140

你可以使用这个`GetHashCode`：

```
public override int GetHashCode()
{
    int hash = 23;
    unchecked
    {
        hash *= 17 + A.GetHashCode();
        hash *= 17 + B.GetHashCode();
        hash *= 17 + C.GetHashCode();
        // the same applies with the rest of your properties ...
        // collections must be treated differently:
        if(L != null)
        {
            hash *= 17 + L.Length;
            foreach(var d in L)
                hash *= 17 + d.GetHashCode();
        }
        if (M != null)
        {
            hash *= 17 + M.Length;
            foreach (var d in M)
                hash *= 17 + d.GetHashCode();
        }         
    }
    return hash;
} 
```

当不同的属性具有相同的值时，这会生成不同的哈希码。如果我省略了素数乘数，那么 if`A==A`或`A==B`. 素数用于减少错误碰撞的可能性。

它还考虑了数组及其值+顺序。

这是该主题的“必读”：[E. Lippert，GetHashCode 的指南和规则](http://ericlippert.com/2011/02/28/guidelines-and-rules-for-gethashcode/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:17:02.107

一个简单（虽然可能不是最佳）的解决方案可能是：

1.  生成类的字符串表示。如果您只有 escalar 属性，您可以执行以下操作`string.Format("{0}-{1}-{2}", A, B, C)`；因为你有数组，你最好使用 a`StringBuilder`并在循环中组合字符串。

2.  调用`GetHashCode`生成的字符串。

# android - 为 Android 编写定期通知时遇到问题？

> ID：15421298
> 
> 赞同：0
> 
> 时间：2013-03-14T22:19:57.923
> 
> 标签：android, notifications, push

我想每 12 小时向我的用户发送一条通知消息，但我无法确定从哪里开始。有人可以提供分步指南来向我的用户添加简单的通知吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:31:38.147

步骤是：

*   [通过AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)设置警报
*   在警报火灾的广播接收器上填充一个[通知](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)，然后您可以在 12 小时内设置下一个警报

另一种方法是从头开始创建，每 12 小时重复一次。

在 Android 中查看此示例[AlarmManager 和 Notification](http://smartandroidians.blogspot.gr/2010/04/alarmmanager-and-notification-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:39:08.813

您可以使用以下代码：

```
private static final int TIME = 1000*60*60*12;

        new Timer().scheduleAtFixedRate(new TimerTask() {
            public void run() {
                showNotification();
            }
        }, 0, TIME);//start immediatly, run every 12hours

    public void showNotification() {
        final NotificationManager mNotification = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

        final Intent launchNotifiactionIntent = new Intent(this, ActivityLauchedOnClickNotif.class);
        final PendingIntent pendingIntent = PendingIntent.getActivity(this,
                    REQUEST_CODE, launchNotifiactionIntent,
                    PendingIntent.FLAG_ONE_SHOT);

        Notification.Builder builder = new Notification.Builder(this)
            .setWhen(System.currentTimeMillis())
            .setContentTitle(titleString)
            .setContentText(messageString)
            .setContentIntent(pendingIntent);

        mNotification.notify(NOTIFICATION_ID, builder.build());
    } 
```

此代码从 API 11 开始有效！(notification.builder)

# sql - SQL (Oracle) - 如何从两个计数语句中获取比率？

> ID：15421313
> 
> 赞同：2
> 
> 时间：2013-03-14T22:21:10.730
> 
> 标签：sql, oracle, count

我想获得**count1 / count2**
的比率， 这使我符合百分比。这就在我的指尖下方……
我能得到一些帮助吗？

```
Select 
 (
 Select Count (*) from tso_skf_nomeas_in60days_v 
 ) as count1, 
 (
 Select Count (*) from tso_skf_recent_meas
 ) as count2
 (
 from dual 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T22:25:04.750

你非常接近：

```
Select 
    (Select Count (*) from tso_skf_nomeas_in60days_v) 
    / 
    (Select Count (*) from tso_skf_recent_meas) as perc
from dual 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!4/fcbb9/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T22:23:53.593

```
SELECT
(SELECT cast(COUNT(*) as float) FROM tso_skf_nomeas_in60days_v)
/
(SELECT cast(COUNT(*) as float) FROM tso_skf_recent_meas) as perc
FROM dual 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T22:57:02.137

**更新答案：**

```
Select Count1/Count2
FROM (Select Count(*) Count1 From tso_skf_nomeas_in60days_v) tso_skf_nomeas_in60days_v,
(Select Count(*) Count2 From tso_skf_recent_meas) tso_skf_recent_meas; 
```

如在[SQL Fiddle 上所见。](http://sqlfiddle.com/#!4/fcbb9/10)

最终结果：

![在此处输入图像描述](../Images/5458f8696bba8433c589d114e932b53f.png)

# jquery - 如何在 jquery 中使用 $.when 与任何方法不同？

> ID：15421318
> 
> 赞同：0
> 
> 时间：2013-03-14T22:21:22.487
> 
> 标签：jquery, object, jquery-selectors, jquery-deferred

我想知道是否可以将`$.when`jquery 选择器或操作用作延迟，例如：

```
$.when(newTemplate.appendTo("#container")).done(function(){
    var rand = Math.floor((Math.random()*1000)+1);
    console.log(rand);
}); 
```

`appendTo`可能不是异步的，但读起来像

这是要等`appendTo`完结吗？

如果没有，在这种情况下，我怎样才能返回一个延迟的 obj `appendTo`，所以我会知道它是什么时候`ready`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:24:56.513

同步代码总是在下一行之前完成，所以你可以

```
newTemplate.appendTo("#container");
var rand = Math.floor((Math.random()*1000)+1);
console.log(rand); 
```

您传递的`$.when`应该是实现[Promise 接口](http://api.jquery.com/category/deferred-object/)并封装一些异步活动的对象。如果活动是同步的，您当然仍然可以这样做，但这会使代码复杂化很多，绝对没有任何好处。

# google-plus - 在 Google+ 上上传和分享图片

> ID：15421326
> 
> 赞同：4
> 
> 时间：2013-03-14T22:21:50.637
> 
> 标签：google-plus

我似乎找不到任何关于在 Google+ 上上传和共享图片的文档或参考资料。

google+ 当前是否支持此操作？

他们的[时刻分享](https://developers.google.com/+/api/moment-types)似乎接受缩略图网址，但我不想在访问者创建和共享图像后将其保留在我的网站上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T00:49:59.130

您有几个不同的选择，但我不确定它们中的任何一个是否真的是您正在寻找的。

Google+ 并不允许外部应用程序自动上传和分享内容。

正如您所观察到的，您可以获得的最接近的方法是生成一个时刻供他们分享。虽然与即时上传有相似之处，但并不完全相同。您可能会使用[数据 url](http://en.wikipedia.org/wiki/Data_URI_scheme)来编码和存储图像作为此刻的一部分，但我还没有测试过。

另一种选择是使用[Google Drive API](https://developers.google.com/drive/)将图像存储在他们的 Drive 空间中，允许公开读取图像，获取它的链接，并将此链接用作缩略图 URL。同样，您也许可以使用[Picasa 网络相册数据 API](https://developers.google.com/picasa-web/)来存储图像。两者都有与 Google+ 的良好但不同的集成。前者更现代，而后者具有更多为图像量身定制的功能。

# vb6 - 在 Visual Basic 6 项目中更改窗体的路径

> ID：15421327
> 
> 赞同：0
> 
> 时间：2013-03-14T22:22:02.007
> 
> 标签：vb6, path, project

我正在尝试修改旧的 Visual Basic 项目。在 Visual Basic 6 中，当我加载项目时，它表示表单文件不在特定目录中，而不是在项目所在的目录中查找。

我已经查看了整个应用程序以寻找可以设置该路径的位置，但没有运气。

在 Visual Basic 6 中如何设置项目文件的路径？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T04:27:17.287

使用文本编辑器打开项目文件 (.vbp) 并编辑路径。

# bash - 从多行 Here Document 中读取 Bash 变量

> ID：15421331
> 
> 赞同：2
> 
> 时间：2013-03-14T22:22:26.633
> 
> 标签：bash

从 Bash 中的 Here Document 读取多行变量的*完美*方法是什么？

看看我的做法是如何产生返回的`1`副作用`$?`......

* * *

### 巴什代码：

```
#!/bin/bash

printf "Unsetting...\n"
unset variable
printf "Exit status: %s.\n" "$?"
printf "Variable: %s.\n" "${variable}"

printf "\n"

printf "Setting to 'foo'...\n"
variable='foo'
printf "Exit status: %s.\n" "$?"
printf "Variable: %s.\n" "${variable}"

printf "\n"

printf "Setting to 'bar' by reading stdin from process substitution...\n"
read variable < <(echo 'bar')
printf "Exit status: %s.\n" "$?"
printf "Variable: %s.\n" "${variable}"

printf "\n"

printf "Setting to 'baz' by reading stdin from Here String...\n"
here_string='baz'
read variable <<< "${here_string}"
printf "Exit status: %s.\n" "$?"
printf "Variable: %s.\n" "${variable}"

printf "\n"

printf "Setting to 'quux' by reading stdin from Here Document...\n"
read variable <<- 'EOF'
quux
EOF
printf "Exit status: %s.\n" "$?"
printf "Variable: %s.\n" "${variable}"

printf "\n"

printf "Setting to 'thud <newline> thud' by reading stdin from Here Document...\n"
read -d '' variable <<- 'EOF'
thud
thud
EOF
printf "Exit status: %s.\n" "$?" # ONE?!one!!oneone? :)
printf "Variable: %s.\n" "${variable}" 
```

* * *

### 输出

```
Unsetting...
Exit status: 0.
Variable: .

Setting to 'foo'...
Exit status: 0.
Variable: foo.

Setting to 'bar' by reading stdin from process substitution...
Exit status: 0.
Variable: bar.

Setting to 'baz' by reading stdin from Here String...
Exit status: 0.
Variable: baz.

Setting to 'quux' by reading stdin from Here Document...
Exit status: 0.
Variable: quux.

Setting to 'thud <newline> thud' by reading stdin from Here
Document...
Exit status: 1.
Variable: thud
thud. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T22:42:11.610

我认为问题在于`read`在看到 ASCII NUL 字符之前看到文件结尾。但是，如果这是真的，以下应该以 0 退出：

```
read -d '' variable <<< $'thud\nthud\x00' 
```

但事实并非如此。

代替真正的修复，我可以提供以下技巧。由于它会阻止任何命令实际返回 0，因此它不应破坏您的登录脚本：

```
read -d '' variable <<-'EOF' || true
thud
thud
EOF 
```

`read`仍然退出 1，但这只会导致 shell 执行`true`命令，保证退出 0。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T23:33:43.173

`read`到达 EOF 时返回 1，同时分配读取的最后一个结果。这就是为什么不以换行符结尾的文件有问题的原因，因为一个简单`read`的循环不会为最后一行运行循环体。

当你在`read -d ''`没有将 NUL 字节放入输入的情况下使用时，这就像读取文件的最后一行一样。问题是为什么`read`在这种情况下你会想要返回 0？它正在做它应该做的事情。另请注意，heredocs（和 herestrings）总是自动在末尾添加换行符。

有点相关：

*   [我的文本文件坏了！他们缺少最后的换行符！](http://mywiki.wooledge.org/BashFAQ/001#My_text_files_are_broken.21__They_lack_their_final_newlines.21)
*   您可能会遇到下一个问题：http: [//lists.gnu.org/archive/html/bug-bash/2011-11/msg00148.html](http://lists.gnu.org/archive/html/bug-bash/2011-11/msg00148.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T22:55:12.153

`read`如果它到达文件末尾而没有击中其分隔符，将返回非零值。显然 \0 被视为EOF，无论它是否是您的分隔符。防止这种情况的一个技巧是选择一个不太可能的分隔符并在最后用它填充你的字符串。例子：

```
read -r -d $'\3' variable <<<"thud\nthud\n"$'\3' ; echo $? 
```

话虽如此，但这在heredoc中更难做到。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T23:12:31.467

您可以将 here-document 读入带有`mapfile`或其别名的数组`readarray`

```
mapfile var <<-'EOF'
thud
thud
EOF 
```

导致

```
var=([0]="thud
" [1]="thud
") 
```

然后只是连接数组元素，例如

```
variable=${var[0]}
variable+=${var[1]}
... 
```

对于可变长度的数组，您可以在循环中执行此操作或使用`printf`内置函数（感谢 eush77）：

```
printf -v variable "%s" "${var[@]}" 
```

两种选择都会导致

```
variable=$'thud\nthud\n' 
```

Sorpigal 已经给出了退出状态为 1 的原因..

# php - Twitter Bootstrap Carousel - 显示多个缩略图

> ID：15421332
> 
> 赞同：0
> 
> 时间：2013-03-14T22:22:29.083
> 
> 标签：php, codeigniter, twitter-bootstrap, thumbnails, carousel

我创建了轮播，每张幻灯片显示 4 个缩略图，我有两张[幻灯片。](http://jsfiddle.net/S2rnm/487/)

```
<div class="container">
    <div class="row">
        <div class="carousel slide span8" id="myCarousel">
            <div class="carousel-inner">
              <div class="item active">
                    <ul class="thumbnails">
                        <li class="span2">
                            <div class="thumbnail">
                                <img src="http://placehold.it/260x180" alt="">
                            </div>
                        </li>
                        <li class="span2">
                            <div class="thumbnail">
                                <img src="http://placehold.it/260x180" alt="">
                            </div>
                        </li>
                        <li class="span2">
                            <div class="thumbnail">
                                <img src="http://placehold.it/260x180" alt="">
                            </div>
                        </li>
                        <li class="span2">
                            <div class="thumbnail">
                                <img src="http://placehold.it/260x180" alt="">
                            </div>
                        </li>
                    </ul>
              </div>
              <div class="item">
                    <ul class="thumbnails">
                        <li class="span2">
                            <div class="thumbnail">
                                <img src="http://placehold.it/260x180" alt="">
                            </div>
                        </li>
                        <li class="span2">
                            <div class="thumbnail">
                                <img src="http://placehold.it/260x180" alt="">
                            </div>
                        </li>
                        <li class="span2">
                            <div class="thumbnail">
                                <img src="http://placehold.it/260x180" alt="">
                            </div>
                        </li>
                        <li class="span2">
                            <div class="thumbnail">
                                <img src="http://placehold.it/260x180" alt="">
                            </div>
                        </li>
                    </ul>

    </div>
</div>
                                <a data-slide="prev" href="#myCarousel" class="left carousel-control">‹&lt;/a>
            <a data-slide="next" href="#myCarousel" class="right carousel-control">›&lt;/a>
        </div>
    </div> 
```

这些幻灯片使用 codeigniter 填充来自数据库的图像。现在的问题是，如果我想创建 6-7 张幻灯片并且我不想手动创建它们，我应该如何在代码中进行。因此，当我单击左箭头时，会加载新的图像集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:57:44.487

找到所有图像之间的共同点。换句话说，这个代码片段：

```
<li class="span2">
  <div class="thumbnail">
    <img src="IMAGE_URL" alt="">
  </div>
</li> 
```

由于这是标准的并且不会针对每个图像进行更改，因此您可以在 foreach 循环中将其打印出来。将数据库中的图像 url 查询到一个数组中，然后在 html 中运行你的 foreach 循环：

```
<div class="carousel-inner">
  <div class="item active">
        <ul class="thumbnails">
          <?php foreach($image_url as $image) { ?>
             <li class="span2">
               <div class="thumbnail">
                 <img src="<?php echo $image; ?>" alt="">
               </div>
             </li>
          <?php } ?>          
        </ul>
  </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-29T16:37:58.730

***Twitter Bootstrap Carousel - 在 Wordpress 中显示多个缩略图***

```
<div class="container">
    <!-- Carousel -->
    <div id="promo-carousel" class="carousel slide" data-ride="carousel">

      <!-- Wrapper for slides -->
      <div class="carousel-inner" role="listbox">

        <?php
        // Item size (set here the number of posts for each group)
        $i = 4; 

        // Set the arguments for the query
        global $post; 
        $args = array( 
          'numberposts'   => -1, // -1 is for all
          'post_type'     => 'post', // or 'post', 'page'
          'orderby'       => 'title', // or 'date', 'rand'
          'order'         => 'ASC', // or 'DESC'
        );

        // Get the posts
        $myposts = get_posts($args);

        // If there are posts
        if($myposts):

          // Groups the posts in groups of $i
          $chunks = array_chunk($myposts, $i);

          /*
           * Item
           * For each group (chunk) it generates an item
           */
          foreach($chunks as $chunk):
            // Sets as 'active' the first item
            ($chunk === reset($chunks)) ? $active = "active" : $active = "";
            echo '<div class="item '.$active.'"><div class="container"><div class="row">';

            /*
             * Posts inside the current Item
             * For each item it generates the posts HTML
             */
            foreach($chunk as $post):

              echo '<div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">';
                the_post_thumbnail(); 
              echo '</div>';

            endforeach;

            echo'</div></div></div>';

          endforeach;

          // Prints the HTML

        endif;
        ?>

      </div> <!-- carousel inner -->

      <!-- Controls -->
      <a class="left carousel-control" href="#promo-carousel" role="button" data-slide="prev">
        <span class="fa fa-arror-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#promo-carousel" role="button" data-slide="next">
        <span class="fa fa-arror-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>

    </div> <!-- /carousel -->
</div> 
```

# php - 两部分 PHP 表单跳过检测

> ID：15421333
> 
> 赞同：0
> 
> 时间：2013-03-14T22:22:31.237
> 
> 标签：php, forms, workflow

我有一个两部分的 php 表单。

> 第 1 部分 - 协议页面。..您必须接受这一点才能继续前进到第 2 部分是 > 继续否 > 重定向到另一个页面。
> 
> 第 2 部分 - 形成自己。填写表格 > 继续感谢您。

如何防止人们直接进入第 2 部分？前任。 `part1-p1.php`, `part2-p2.php`. 如果我加载`part2-p2.php`，那么它会检测到您不是来自`part1-p1.php`并将您重定向到`part1-p1.php`.

任何片段或网络参考将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:26:07.910

您可以使用`Session`此条件，在用户同意协议后，设置`$_SESSION['agree'] = true`，加载第 2 部分时，请先`$_SESSION[agree]`检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:30:40.640

我个人喜欢@LotusH 的回答。但是，我想如果您不使用会话（或出于任何原因不想使用），我会提供另一个建议。

您可以将第 1 部分页面发布到第 2 部分页面。如果接受的预期 POST 值不存在（或者如果 page2 没有回发到自身），您可以重定向到不接受页面。

# nginx - 在 Nginx 中使用 Flask-Sijax 的 Comet

> ID：15421337
> 
> 赞同：0
> 
> 时间：2013-03-14T22:22:50.440
> 
> 标签：nginx, flask, sijax

我有一个 Flask 应用程序，我在其中使用 Sijax 的 Comet 将数据从后端流式传输到前端。当我通过使用命令启动应用程序来运行我的应用程序时，这可以正常工作`python app.py`

现在我正在尝试使用 Nginx 运行我的应用程序。该应用程序似乎没有很好地流式传输我的数据，而是等到所有数据都流式传输后才将其发送到浏览器。

是否有一些 Nginx 配置或 Sijax 设置可以启用或禁用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T11:22:50.990

你可以在 StackOverflow 上找到这样的 nginx 配置。

```
 proxy_buffering    off;
    proxy_set_header   X-Real-IP $remote_addr;
    proxy_set_header   X-Scheme $scheme;
    proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header   Host $http_host;        
    proxy_set_header Connection '';
    proxy_http_version 1.1;
    chunked_transfer_encoding off;
    proxy_cache off; 
```

# android - 将 jpg 图像下载到 android 时 url 无效

> ID：15421346
> 
> 赞同：1
> 
> 时间：2013-03-14T22:23:20.967
> 
> 标签：android, asynchronous, bitmap, download

尝试下载 jpg 文件时出现 nullPointerException。它是在 AsyncTask 方法中完成的，我无法在调试器中跟踪程序流，可能是因为它是异步的。我的跟踪显示在它停止之前读取了 2 条记录。我使用端口 8000 作为我的本地服务器，它停止的 url 是

```
 http://10.0.2.2:8000/my_album/5_irises.jpg". 
```

下载 jpeg 和 png 文件有什么特别之处，还是我的 url 编码不正确？url中的下划线有问题吗？另外，每次下载后我必须关闭连接吗？

```
 begin of loop {
  ........
   new AccessImages().execute(urlstring);
  }  ......end of loop 

 private class AccessImages extends AsyncTask<String, Void, Bitmap> {
        protected Bitmap doInBackground(String... urladds){
            return downloadImage(urladds[0]);
        }
        protected void onPostExecute(Bitmap bm) {
            bitmap_photo[itemcount] = bm;
            itemcount++;
        }
        }

  private Bitmap downloadImage(String url) {
        Log.d("downloadImage", url);
        Bitmap bmap = null;
        InputStream inStream = null;
    //  Drawable drawable = null;
        try {
            inStream = openHttpConnection(url);
            Log.d("inStream", String.valueOf(inStream));
        //  drawable = Drawable.createFromStream(inStream, "src");
            Log.d("before bmap", url);
            bmap = BitmapFactory.decodeStream(inStream);
            Log.d("after bmap", url);
            inStream.close();

        }
        catch (IOException el) {
            el.printStackTrace();
        }
        return bmap;
    }

    private InputStream openHttpConnection(String urlString) throws IOException {

        InputStream inStream = null;
        int checkConn = -1;
        URL url = new URL(urlString);
        URLConnection conn = url.openConnection();
        try {

            Log.d("try openhttpconnection", urlString);
            HttpURLConnection httpConn = (HttpURLConnection) conn;
            httpConn.setAllowUserInteraction(false);
            httpConn.setInstanceFollowRedirects(true);
            httpConn.setRequestMethod("GET");
            httpConn.connect();
            checkConn = httpConn.getResponseCode();
            if (checkConn == HttpURLConnection.HTTP_OK) {
                inStream = httpConn.getInputStream();
                Log.d("instream", urlString);

            }

        }
        catch (Exception ex) {
            throw new IOException("Error connecting");
        }
        return inStream;
    } 
```

我刚刚发现 NullPointerException 在这条指令中：

```
 inStream.close(); 
```

什么会导致这种情况？

好的。现在我纠正了 inStream 不为空，但现在我从以下指令中得到 NullPointerException：bitmap_photo[itemcount] = bm;

```
 if(bm != null)
            {
            bitmap_photo[itemcount] = bm;
            itemcount++;
            } 
```

我不能检查位图中的空值还是数组有问题？我应该补充一点，我按如下方式创建了 bitmap_photo 数组：这是一个问题吗？

```
 Bitmap [] bitmap_photo; 
```

# ios - 从本地文本文件加载具有多个 uitextfield 和 uitextview 的调查

> ID：15421348
> 
> 赞同：0
> 
> 时间：2013-03-14T22:23:24.270
> 
> 标签：ios, uitextfield, uitextview, survey, scroll-paging

我正在尝试开发一个应用程序，其功能之一是调查表。这项调查可能会不时更改。所以我想，最好的办法是通知用户更新版本的调查，让他下载为文本文件。下载后，我会处理一些预定义*标签*的文本文件，然后将其作为调查表加载到他的屏幕上，其中包含多个文本字段和文本视图。是否有可用的示例代码显示我们如何对这些不同的*标签*进行编码，这些标签可以稍后在显示调查滚动视图之前进行处理。

例如：我可以将 [Question] 用于文本视图，将 [Empty] 用于文本字段，将 [Multiple] 用于多选答案的可能性。类似地 [[Start]] 和 [[End]] 用于开始和结束要处理的文本。

我试图在网上搜索更好的方法来做到这一点。我遇到了建议 webview 的[这个](https://stackoverflow.com/questions/14468187/i-want-to-make-a-survey-app-for-ipad-where-should-i-start)问题，但我需要离线使用调查，以便用户可以保存他的答案并在以后继续/更改它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:54:28.053

我不知道任何带有文本文件的开源项目，但是有一个开源库可以让您创建可编辑的 PDF。你可以看一下，看看这个库是否为你提供了你正在寻找的东西。无论如何，这是链接：

[http://fastpdfkit.com/](http://fastpdfkit.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:13:13.543

您可能应该使用用于存储和管理 XML 等数据的多种标准格式中的一种：

```
<Question text="What is...?" /> 
```

对于一个基本的用户输入问题

```
<Question text="What is...?">
  <Answer text="Option 1">
  <Answer text="Option 2">
</Question> 
```

对于多项选择题

等等

# java - 是否可以确定从活动返回的数据是字符串还是字符串 []？

> ID：15421352
> 
> 赞同：2
> 
> 时间：2013-03-14T22:23:30.680
> 
> 标签：java, android, android-intent, android-activity

我正在`activityForResult()`从我的`MainActivity`. 根据用户在其中选择的选项，`SecondActivity`它返回 a`String`或 a `String[]`。在我的`MainActivity`I override`onActivityResult()`中，但是如何首先测试返回的数据以查看它是否是一个`String`或者`String[]`我可以相应地处理它？

这就是我处理数组的方式：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            // TODO Auto-generated method stub

                    String[] result =data.getStringArrayExtra("elements");
                    et.setText("");
                    for(int i=0;i<result.length;i++){
                        et.append(result[i].toString());
            }
            } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T22:27:14.917

为什么不总是`String[]`从 中返回 a `SecondActivity`？如果只有一个`String`，只需返回一个`String []`包含那个的 a `String`。使用相同的键返回两种不同类型的对象似乎是糟糕的设计......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:31:20.730

我会把它们放在不同的键中。类似于和`element`的东西。`String``elements``String[]`

```
String[] result =data.getStringArrayExtra("elements");
if(result == null)
   String strResult = data.getStringExtra("element"); 
```

我也支持史蒂文所说的。但是不知道你的应用程序的设计以及你这样做的原因，所以你必须做出选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:25:52.617

你几乎做到了..只是检查

```
if(result != null)
   // it is array 
```

# c# - 子弹碰撞

> ID：15421359
> 
> 赞同：-2
> 
> 时间：2013-03-14T22:23:53.413
> 
> 标签：c#, xna

我正在 Xna 4.0 中制作 2D 射击游戏

我的游戏中有一颗子弹，我试图让它与敌人相撞，但是当我尝试检查它的位置是否等于敌人时，它没有

子弹射击：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using Microsoft.Xna.Framework.Graphics;
    using Microsoft.Xna.Framework;

namespace Moba_Turtle1
{
    class Bullet
    {
    Texture2D bulText;

    float timer;
    float interval = 2;

    public bool shot = false;

    public Vector2 velocity;
    bool canChange = true;

    public Vector2 position;
    public Vector2 lastPosition;
    Vector2 orgin;

    public Bullet (Texture2D newText, Vector2 newPos)
    {
        bulText = newText;
        position = newPos;
    }

    public void Update (GameTime gameTime)
    {

        if (Moba_Turtle1.Character.direction == true && canChange == true)
        {
            canChange = false;
            velocity.X = 50f;
        }

        if (Moba_Turtle1.Character.direction == false && canChange == true)
        {
            canChange = false;
            velocity.X = -50f;
        }

        position = position + velocity;
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(bulText, position, null, Color.White, 0f, orgin, 1.0f, SpriteEffects.None, 0);
    }
} 
```

}

碰撞检查：

```
foreach (BeeAi bee in Bees)
        {
            {
                if (bullet.position == bee.position)
                    bulCol = true;
            }
        }

        if (bulCol == true)
            bullets.Clear(); 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:29:13.477

```
bullet.position == bee.position 
```

`position`是 a `Vector2`，它由`float`坐标组成。子弹和蜜蜂几乎不可能完全处于相同的位置以达到漂浮的精度！

您需要根据两个边界矩形是否重叠来重新考虑您的碰撞检测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:37:14.783

问题是，正如其他人所提到的，您几乎永远不会击中与蜜蜂完全相同的位置。

一个简单的解决方法是让你的循环像这样：

```
foreach (BeeAi bee in Bees)
{
    foreach (Bullet bullet in bullets)
    {
        if ((bullet.position - bee.position).Length() <= 10f)
        {
            bulCol = true;
        }
    }
} 
```

但如果子弹的速度足够高，这也很容易失败。

我建议你研究一下 Ray、BoundingSphere、BoundingBox 和 Rectangle。

如果您的子弹总是仅水平移动或仅垂直移动，那么最简单和最好的解决方法是制作一个跨越子弹移动最后一帧距离的矩形，并使用 Rectangle.Contains 或其他东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:28:45.330

不要比较浮点数，因为除非它们完全相同，否则它们不会相等。因此，如果您正在计算位置，您将不会得到匹配。您应该测试项目符号位置是否在一个小范围的值内。

# python - 查找忽略大小写的字符串的索引

> ID：15421363
> 
> 赞同：11
> 
> 时间：2013-03-14T22:24:06.507
> 
> 标签：python

我有一个字符串，我需要在忽略大小写的列表中查找索引。

```
MG
['ADMISSION' ,'Colace','100','mg', 'b.i.d.' , 'insulin','Lente','12'] 
```

我想在下面的行中找到 MG 的索引作为列表。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-14T22:45:45.433

一种更优雅的方法是使用生成器：

```
>>> list = ['ADMISSION' ,'Colace','100','mg', 'b.i.d.' , 'insulin','Lente','12']
>>> next(i for i,v in enumerate(list) if v.lower() == 'mg')
3 
```

上面的代码生成了一个生成器，它产生列表中下一个不区分大小写的 出现的索引`mg`，然后调用`next()`一次，以检索第一个索引。如果您`mg`在列表中有多次出现，重复调用`next()`将产生它们。

这还具有稍微便宜一点的好处，因为不需要创建整个小写列表；只有尽可能多的列表被处理以找到下一个匹配项。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T22:26:13.593

您可以通过将总列表和要搜索的项目转换为小写来忽略大小写。

```
>>> to_find = 'MG'
>>> old_list =  ['ADMISSION' ,'Colace','100','mg', 'b.i.d.' , 'insulin','Lente','12']
>>> new_list = [item.lower() for item in old_list]
>>> new_list.index(to_find.lower())
3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-17T08:58:27.710

与第一个相同，但如果您只对索引感兴趣，我认为不需要创建新旧列表

```
>>> search_term ="MG"
>>> my_list = ['ADMISSION' ,'Colace','100','mg', 'b.i.d.' , 'insulin','Lente','12']
>>> [item.lower() for item in my_list ].index(search_term .lower())
3 
```

# matlab - 用-1替换矩阵中的空元素的最佳方法是什么？MATLAB

> ID：15421365
> 
> 赞同：0
> 
> 时间：2013-03-14T22:24:15.063
> 
> 标签：matlab, replace

如果我有一个 27 x 12 的矩阵，则有些元素是空的。像这样，[]

我正在尝试将 [ ] 的任何元素替换为 -1。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T22:28:42.623

我假设你在谈论一个单元阵列。

在这种情况下，最简单的方法是：

```
%# create some sample data
C = {1,2,[];3,[],99};

%# replace empty elements with -1
[C{cellfun(@isempty,C)}] = deal(-1);

%# or, simpler (thanks @EitanT)
C(cellfun(@isempty,C)) = {-1};

%# just in case you want to turn C into a numeric array
numericC = cell2mat(C); 
```

# css - 在 IE9 中输入 HTML5

> ID：15421367
> 
> 赞同：0
> 
> 时间：2013-03-14T22:24:25.573
> 
> 标签：css, html, input, internet-explorer-9

我希望你能帮助我解决 IE9 中 HTML5 的简单问题在我的代码中，我有几件事：

```
<input type="text" id="fn" name="fn" placeholder="Street" autofocus/>
---------------------------------------------------------------------
/* INPUT TEXT */
input[type="text"]
{
    border:2px solid #dadada;
    border-radius:7px;
    font-size:16px;
    padding:5px; 
}

input[type="text"]:focus
{ 
    outline:none;
    border-color:#9ecaed;
    box-shadow:0 0 10px #9ecaed;
} 
```

在 Opera、Chrome 和 Firefox 中一切都很好，但在 IE9 中什么都没有……我试图在链接 CSS 文件之前在 head 中包含以下行：

```
<!--[if IE]>
<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]--> 
```

你有任何想法如何解决这个问题吗？这个 CSS 在 IE9 中不起作用（在 IE9 中是正常输入），在 Opera、Chrome、Firefox 中是很好的半径和颜色输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T02:45:26.830

我看到 IE9 和 Opera/Chrome/Firefox 之间唯一不同的问题是它不支持`placeholder`HTML5 属性。您可以查看此 jsFiddle 以验证 IE9 [http://jsfiddle.net/dndrS/](http://jsfiddle.net/dndrS/)中的损坏行为，还可以参考[CanIUse](http://caniuse.com/#search=placeholder)以查看对输入占位符属性的支持。

IE10 确实支持 placeholder 属性，因此您可以升级，或者如果您想支持 IE9，那么您可以使用 Mathias Bynens 的以下polyfill [https://github.com/mathiasbynens/jquery-placeholder](https://github.com/mathiasbynens/jquery-placeholder)。这是一个使用在 IE9 中工作的 polyfill [http://jsfiddle.net/nyTMw/的 jsFiddle](http://jsfiddle.net/nyTMw/)

寻找其他 polyfill 的便捷网站是[http://html5please.com/](http://html5please.com/)

# google-maps - 响应式谷歌地图？

> ID：15421369
> 
> 赞同：44
> 
> 时间：2013-03-14T22:24:33.370
> 
> 标签：google-maps, responsive-design

如何从代码制作响应式谷歌地图

```
<div class="map">
    <iframe>...</iframe>
</div> 
```

我在 css 中使用完整的地图

```
.map{max-width:100%;} 
```

和小型设备

```
.map{max-width:40%;} 
```

但它没有用。

有人知道吗？谢谢你。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-03-30T13:18:20.783

将此添加到您的初始化函数中：

```
<script type="text/javascript">

function initialize() {

  var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

  // Resize stuff...
  google.maps.event.addDomListener(window, "resize", function() {
    var center = map.getCenter();
    google.maps.event.trigger(map, "resize");
    map.setCenter(center); 
  });

}

</script> 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-05-28T06:19:30.910

为其 iframe的**宽度**和**高度**属性添加**100%**一直对我有用。例如

 ****```
<iframe width="100%" height="100%" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.co.in/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=+&amp;q=surat&amp;ie=UTF8&amp;hq=&amp;hnear=Surat,+Gujarat&amp;ll=21.195,72.819444&amp;spn=0.36299,0.676346&amp;t=m&amp;z=11&amp;output=embed"></iframe><br /> 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-03-26T11:10:35.293

没有javascript的解决方案：

HTML：

```
<div class="google-maps">
<iframe>........//Google Maps Code//..........</iframe>
</div> 
```

CSS：

```
.google-maps {
    position: relative;
    padding-bottom: 75%; // This is the aspect ratio
    height: 0;
    overflow: hidden;
}
.google-maps iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100% !important;
    height: 100% !important;
} 
```

如果您有自定义地图大小，请删除“height: 100% !important”

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-12-04T16:20:54.423

最好使用 Google Map API。我在这里创建了一个示例：http: [//jsfiddle.net/eugenebolotin/8m1s69e5/1/](http://jsfiddle.net/eugenebolotin/8m1s69e5/1/)

主要特点是使用功能：

```
//Full example is here: http://jsfiddle.net/eugenebolotin/8m1s69e5/1/

map.setCenter(map_center);
// Scale map to fit specified points
map.fitBounds(path_bounds); 
```

它处理调整大小事件并自动调整大小。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-01-31T16:36:59.687

在 iframe 标签中，您可以轻松添加 width='100%' 而不是地图给您的预设值

像这样：

```
 <iframe src="https://www.google.com/maps/embed?anyLocation" width="100%" height="400" frameborder="0" style="border:0;" allowfullscreen=""></iframe> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-15T01:33:16.290

检查此解决方案：http: [//jsfiddle.net/panchroma/5AEEV/](http://jsfiddle.net/panchroma/5AEEV/)

不过，我不能把代码归功于代码，它来自[快速简便的方法来使谷歌地图 iframe 嵌入响应式](https://stackoverflow.com/questions/14370115/quick-and-easy-way-to-make-google-maps-iframe-embed-responsive)。

祝你好运！

**CSS**

```
#map_canvas{
width:50%;
height:300px !important;
} 
```

**HTML**

```
 <!DOCTYPE html>
<html>
  <head>
    <title>Google Maps JavaScript API v3 Example: Map Simple</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>
    <meta charset="utf-8"/>
    <style>
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
      var map;
      function initialize() {
        var mapOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map_canvas"></div>
  </body>
</html> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-07-31T08:19:52.553

这里有一个标准的 CSS 解决方案 + JS 用于地图的高度调整

CSS

```
#map_canvas {
   width: 100%;
} 
```

JS

```
// On Resize
$(window).resize(function(){ 
    $('#map_canvas').height($( window ).height()); 
```

JsFiddle 演示：http: [//jsfiddle.net/3VKQ8/33/](http://jsfiddle.net/3VKQ8/33/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-12T07:54:08.717

我认为最简单的方法是添加这个 css，它会完美地工作。

```
embed, object, iframe{max-width: 100%;} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-11T22:20:49.557

# 我在 Foundation 4 模态中的响应式 [解决方案] 谷歌地图

* * *

**JS**

使用以下代码创建一个外部 JavaScript 文件（即 mymap.js）

```
google.maps.visualRefresh = true; //Optional

var respMap;

function mymapini() {
    var mapPos = new google.maps.LatLng(-0.172175,1.5); //Set the coordinates
    var mapOpts = {
    zoom: 10, //You can change this according your needs
    disableDefaultUI: true, //Disabling UI Controls (Optional)
    center: mapPos, //Center the map according coordinates
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    respMap = new google.maps.Map(document.getElementById('mymap'),
      mapOpts);

    var mapMarker = new google.maps.Marker({
          position: mapPos,
          map: respMap,
          title: 'You can put any title'
      });

    //This centers automatically to the marker even if you resize your window
    google.maps.event.addListener(respMap, 'idle', function() {
    window.setTimeout(function() {
      respMap.panTo(mapPos.getPosition());
    }, 250);    
  });
}

google.maps.event.addDomListener(window, 'load', mymapini);

$("#modalOpen").click(function(){ //Use it like <a href="#" id="modalOpen"...
    $("#myModal").show(); //ID from the Modal <div id="myModal">...
    google.maps.event.trigger(respMap, 'resize');
}); 
```

**HTML**

在标记前添加以下代码：

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script src="js/mymap.js"></script> 
```

将此添加到模态代码中：

```
<div id="mymap"></div> 
```

**CSS**

将此添加到您的样式表中：

```
#mymap { margin: 0; padding: 0; width:100%; height: 400px;} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-14T13:23:27.757

用 CSS 尝试过，但它从来没有 100% 响应，所以我构建了一个纯 JavaScript 解决方案。这个使用jQuery，

```
google.maps.event.addDomListener(window, "resize", function() {

  var center = map.getCenter();

  resizeMap();

  google.maps.event.trigger(map, "resize");
  map.setCenter(center);

});

function resizeMap(){

  var h = window.innerHeight;
  var w = window.innerWidth;

  $("#map_canvas").width(w/2);
  $("#map_canvas").height(h-50);

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-12T16:11:33.080

**使用 CSS 响应** 您可以使用以下 CSS 代码使 Iframe 响应。

```
.map {
    position: relative;
    padding-bottom: 26.25%;
    padding-top: 30px;
    height: 0;
    overflow: hidden;
}

.map iframe,
.map object,
.map embed {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
} 
```

**响应式 JavaScript**

这可能通过`window.resize`事件发生，您可以在谷歌地图上应用它`google.maps.event.addDomListener(window, 'resize', initialize);`

考虑以下示例：

```
function initialize() {
    var mapOptions = {
           zoom: 9,
           center: new google.maps.LatLng(28.9285745, 77.09149350000007),  
           mapTypeId: google.maps.MapTypeId.TERRAIN
    };

    var map = new google.maps.Map(document.getElementById('location-canvas'), mapOptions);
    var marker = new google.maps.Marker({
           map: map,
           draggable: false,
           position: new google.maps.LatLng(28.9285745, 77.09149350000007)
     });
}
google.maps.event.addDomListener(window, 'resize', initialize); 
```

查看更多详细信息 - [https://webomnizz.com/how-to-make-responsive-google-map-with-google-map-api/](https://webomnizz.com/how-to-make-responsive-google-map-with-google-map-api/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-08T20:11:09.027

我是一个业余爱好者，但我发现这很有效：

```
.maps iframe {
    position: absolute;
}

body {
    padding-top: 40px;
    padding-bottom: 820px;
    height: available;
} 
```

底部可能有一点空白，但我很满意

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-04-28T10:42:24.853

我基于 eugenemail 回复的解决方案：

**1\. HTML** - 谷歌地图 API

[获取 API 密钥](https://developers.google.com/maps/documentation/javascript/get-api-key)

```
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script> 
```

**2\. HTML** - 画布

```
<div id="map_canvas"></div> 
```

**3\. CSS** - 地图画布

```
#map_canvas {
    height: 400px;
} 
```

**4.JavaScript**

```
function initialize() {
    var lat = 40.759300;
    var lng = -73.985712;
    var map_center = new google.maps.LatLng(lat, lng);
    var mapOptions = {
        center: map_center,
        zoom: 16,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var mapCanvas = document.getElementById("map_canvas");
    var map = new google.maps.Map(mapCanvas, mapOptions);
    new google.maps.Marker({
        map: map,
        draggable: false,
        position: new google.maps.LatLng(lat, lng)
    });
    google.maps.event.addDomListener(window, 'resize', function() {
        map.setCenter(map_center);
    });
}
initialize(); 
```****

# php - cakephp 如何按日期时间进行分页组但保留所有数据

> ID：15421372
> 
> 赞同：0
> 
> 时间：2013-03-14T22:24:45.543
> 
> 标签：php, mysql, cakephp, pagination, cakephp-2.0

所以，如果我有一个使用历史数据库表，比如

```
id     file   email   date_send
1     1.txt   A        2013-01-31 15:26:00  
2     2.txt   A        2013-01-31 15:26:00
3     3.txt   B        2013-01-30 12:26:00 
```

我想在视图中显示它

```
Date                   email        File
2013-01-31 15:26:00     A           1.txt
                                    2.txt
2013-01-30 12:26:00     B           3.txt 
```

考虑到 cakephp 中的分页，我该怎么做。我现在所拥有的几乎只是按原样展示

```
Date                   email        File
2013-01-31 15:26:00     A           1.txt
2013-01-31 15:26:00     A           2.txt
2013-01-30 12:26:00     B           3.txt 
```

我在控制器中的代码

```
 $this->paginate =  array(
            'UsageHistory' => array(
                'conditions' => array(
                    'UsageHistory.user_id' => $id
                ),
                'order' => 'UsageHistory.date_send DESC'
            )
        );
        $this->set('usageHistory', $this->paginate('UsageHistory')); 
```

并且在视图中

```
<?php if ( !empty($usageHistory) ) { ?>
                            <?php foreach ( $usageHistory as $history ) :?>  
                        <tr>
                            <td class="filename"><?php echo $history['UsageHistory']['file_name']; ?></td>
                            <td class="recip"><?php echo $history['UsageHistory']['recipient_email']; ?></td>
                            <td class="size"><?php echo round($history['UsageHistory']['file_size']/1048576*100)/100 . ' MB'; ?></td>
                            <td class="datesent"><?php echo $this->Time->format('m/d/o h:i A', $history['UsageHistory']['date_send']); ?></td>
                        </tr>
                            <?php endforeach; ?>
                        <?php } else { ?>
                        <tr>
                            <td colspan="3">No Usage History Yet</td>
                        </tr>
                        <?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:04:27.867

这纯粹是数据的*呈现*，因此应该在视图中完成。

因为您仍然希望所有行都可见，所以不必修改查询，只需修改结果的显示方式即可。

“虚拟”代码

```
$curDate = null;

foreach($results as $row) {
   if($row['date'] != $curDate) {
       // new date/time; should be visible
       $visibleDate = $row['date'];

       // Make this the new 'current' date
       $curDate = $row['date'];
   } else {
       // Still the same date; should not be visible
       $visibleDate = '';
   }
   ?>
   <tr><td><?php echo $visibleDate ?></td><td><?php echo $row['email'] ?></td><td>...</td></tr>
   <?php
} 
```

'email' 列也可以这样做

# django - Django SQSError：413 请求实体太大

> ID：15421380
> 
> 赞同：0
> 
> 时间：2013-03-14T22:25:37.363
> 
> 标签：django

我从下面的代码中收到以下错误：

**SQSError: SQSError: 413 请求实体太大**

我上传的文件只有 445k。

如何解决此错误？谢谢你。

**任务.py**

```
@task
def import_csv(filename):
    ContactCSVModel.import_from_file(filename) 
```

**视图.py**

```
def upload(request):
    if request.method == 'POST':
            filename = request.FILES['file']
            import_csv.delay(filename) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T00:03:51.513

SQS 文件不能为 445kB。

最大大小为**64kB**。

请参阅 Amazon 的[SQS 服务常见问题解答](http://aws.amazon.com/sqs/faqs/)：

> Amazon SQS 消息最多可包含 64 KB 的文本数据，包括 XML、JSON 和无格式文本。

您很可能希望使用[Amazon 的文件存储服务](http://aws.amazon.com/s3/)S3 ，其中文件最大可达 2GB。

# ios - Xcode在svn中将新文件添加到现有项目

> ID：15421386
> 
> 赞同：1
> 
> 时间：2013-03-14T22:26:01.040
> 
> 标签：ios, xcode, svn, commit, checkin

我在 svn 上有一个现有项目，我想提交一个新的 ViewController 类。我的问题与 ViewController 和 .storyboard 文件有关，我是否也提交了 project.pbxproj ？还是不需要。

对不起这个愚蠢的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:34:14.983

右键单击新文件，单击**源代码管理 -> 添加**

然后再次右键单击，单击**Source Control -> Commit Selected Files**

就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:30:48.633

您只需要将已更改或新添加的文件添加到 svn 存储库。未更改的文件不需要提交。当您从中选择一个文件时`Source Control->Commit`，它将向您显示文件中发生的更改的预览。如果您要添加一个新文件，那么您应该像这样添加 `Source Control->Add` 然后提交。

关于`project.pbxproj` 如果它已经存在于存储库中，你不需要提交这个文件

# ruby-on-rails - 试图加载 twitter 引导程序，现在得到一个有趣的错误

> ID：15421392
> 
> 赞同：1
> 
> 时间：2013-03-14T22:26:12.370
> 
> 标签：ruby-on-rails, twitter-bootstrap, gem

我刚跑：

```
rails g bootstrap:install 
```

然后尝试运行一个rails服务器，得到了这个奇怪的错误：

```
rails s
/Users/makersacademy/.rvm/gems/ruby-1.9.3-p392@global/gems/rubygems-bundler-1.1.1/lib/rubygems-bundler/noexec.rb:33:in `pwd': No such file or directory - getcwd (Errno::ENOENT)
    from /Users/makersacademy/.rvm/gems/ruby-1.9.3-p392@global/gems/rubygems-bundler-1.1.1/lib/rubygems-bundler/noexec.rb:33:in `<module:Noexec>'
    from /Users/makersacademy/.rvm/gems/ruby-1.9.3-p392@global/gems/rubygems-bundler-1.1.1/lib/rubygems-bundler/noexec.rb:32:in `<top (required)>'
    from /Users/makersacademy/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:60:in `require' 
```

有人可以帮忙吗？我不知道我需要做什么才能让 Rails 服务器正常工作......谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T13:50:43.403

真的很傻。在这里得到了回答：

[http://shriikant.blogspot.co.uk/2010/04/shell-init-error-retrieving-current.html](http://shriikant.blogspot.co.uk/2010/04/shell-init-error-retrieving-current.html)

你只需要做 cd 然后再进去，它似乎会自行解决......不知道为什么......

# php - 如何从 PHP 5.4 连接到 MS SQL 2000？

> ID：15421397
> 
> 赞同：2
> 
> 时间：2013-03-14T22:26:37.237
> 
> 标签：php, zend-framework, sql-server-2000

我使用 ZendFramework 和 PHP 版本 5.4.12，我的操作系统是 Windows 7。我的连接参数是

```
resources.db.adapter = "sqlsrv"
resources.db.params.pdoType = "mssql" 
```

但我有这个例外

```
Fatal error: Uncaught exception 'Exception' with message '[Microsoft][SQL Server Native Client 11.0]SQL Server Native Client 11.0 does not support connections to SQL Server 2000 or earlier versions.' 
```

因为我使用最新的 php 驱动程序。

如何连接到 MS SQL Server 2000（版本 8.00.760）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-17T22:44:44.517

我有一些仍在运行 SQL Server 2000 的数据库，我不想为其他人恢复到旧驱动程序。经过一番探索，这是我能想到的最佳解决方法：通过 ADO 使用 OLEDB 连接到 SQL Server 2000 数据库。ADO 是一个 COM 组件，因此您需要启用`COM_DOT_NET`扩展。

我已经验证这仍然适用于安装了 Native Client 11 的 Windows Server 2008 R2 下的 PHP 5.4。

```
<?php
$conn =  new COM("ADODB.Connection") or die("Cannot create ADO COM object");
$conn->Open("Provider=SQLOLEDB;Integrated Security=SSPI;Persist Security Info=True;Data Source=LOCALHOST;Initial Catalog=master");
//$conn->Open("Provider=SQLOLEDB;User ID=username;Password=password;Persist Security Info=True;Data Source=host.example.com;Initial Catalog=databasename"); 
$rs = $conn->Execute("SELECT 1 as Number,GetDate() as Date, CAST(0 as bit) as Boolean, 'hello world' as String");
$fieldnames = []; 
$rows = [];
while (!$rs->EOF){
  $fieldnames = []; // wasteful, redoing this each time
  $thisrow = [];
  for ($i=0;$i<($rs->Fields->Count);$i++)  {
    $field = $rs->Fields[$i];
    $fieldname = (string) $field->Name;
    $type = $field->Type;
    // field->Type is the ADO type; due personal weakness I am only handling types I actually need 
    if ($type == 3 || $type == 20) {
      $value = (integer) $field->Value;
    } elseif ($type == 4 || $type==5) {
      $value = (float) $field->Value;
    } elseif ($type == 11) {
      $value = (boolean) $field->Value;
    } else {
    $value = (string) $field->Value;
    }
    $thisrow[] = $value; //array by index
    $thisrow[$fieldname] = $value; // array by name
    $fieldnames[]=$fieldname;
  }
  $rows[] = $thisrow;
  $rs->MoveNext();
}
$rs->Close(); 
$conn->Close();
echo "your fieldnames are, in column order:\n";
var_dump($fieldnames);
echo "your data is, in record order:\n";
var_dump($rows);
?> 
```

笔记：

*   这仅适用于 Windows 下的 PHP。
*   您需要启用 PHP COM_DOT_NET 扩展。乌格。请参阅[这篇文章](https://stackoverflow.com/questions/10678325/class-com-not-found)了解如何操作。
*   [devnetwork.net 上的这篇文章](http://www.devnetwork.net/viewtopic.php?f=2&t=134561)对于展示如何在 PHP 下使用 ADO 至关重要。
*   使用 ADO 的技巧是数据作为 COM 变体返回。使用 ADO 的最快方法是调用 GetRows() 并将返回的变体转换为 2D 变体数组并从那里开始，但我无法让 PHP 使用它。（这是上述链接中的“DrDev”问题。）
*   为避免出现问题，我遍历每一行的每个字段并显式转换为数据 PHP 类型。（这可以做得更好，但这些都是我关心的所有 ADO 类型。）

待办事项：参数化查询。我多么希望我可以将这些主机更新到 SQL Server 2012 Express Edition...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:39:26.407

因为您使用的是 SQL Server Native Client（版本 11）的 2012 版，它不再支持您的 SQL Server 的 2000 版。是的，这是一种耻辱。

要解决此问题，您应该下载可以在此处找到的早期版本：http: [//www.microsoft.com/en-us/download/details.aspx?id=16978](http://www.microsoft.com/en-us/download/details.aspx?id=16978)

查找部分

> Microsoft® SQL Server® 2008 R2 本机客户端

还是不行，需要先卸载2012版本。

如果它仍然不起作用，请看这里：[http ://www.sqlservercentral.com/Forums/Topic1317581-2799-1.aspx](http://www.sqlservercentral.com/Forums/Topic1317581-2799-1.aspx)

# php - 使用单个搜索参数搜索多个数据库表

> ID：15421398
> 
> 赞同：0
> 
> 时间：2013-03-14T22:26:38.007
> 
> 标签：php, mysql

我现在在数据库中有四个表，询问如何使用 PHPMYSQL 的单个搜索参数搜索这四个表并在单个页面中显示结果？非常感谢朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:32:10.920

```
 Select *
    From table1 inner join table2 on table1.col=table2.col 
    inner join table3 on table#.col=table3.col ..........
    where Col=? 
```

你可以替换 ?=? 如果两个表具有相同的列名，则使用“使用（列）”。

# jquery - 我的 html 到 webapp2 搜索表单不起作用

> ID：15421402
> 
> 赞同：0
> 
> 时间：2013-03-14T22:27:03.383
> 
> 标签：jquery, python, html, google-app-engine, webapp2

我的搜索词作为空字符串传递给我的处理程序。这是组件：

html表单：

```
<form class="navbar-search" action="/search">
                <input type="text" class="search-query span3 ajax-typeahead" placeholder="Search" data-link="/typeahead" name="searchQuery"  autocomplete="off" />
                <button class="btn btn-primary" style="margin-top: 0px;" type="submit">
                    <i class="icon-search icon-white"></i>
                </button>
            </form> 
```

用于预先输入的 jquery：

```
<script type="text/javascript">
            $(document).ready(function() {
                $('.ajax-typeahead').typeahead({
                    source: function(query, process) {
                        return $.ajax({
                            url: $(this)[0].$element[0].dataset.link,
                            type: 'get',
                            data: {query: query},
                            dataType: 'json',
                            success: function(json) {
                                return typeof json.options == 'undefined' ? false : process(json.options);
                            }
                        });
                    }
                });
            });
        </script> 
```

python webapp2处理程序：

```
class SearchHandler(webapp2.RequestHandler):
    def get(self, searchQuery):
        self.response.out.write('Term: %s' % searchQuery)

app = webapp2.WSGIApplication([('/search(.*)', SearchHandler)],
                              debug=True) 
```

结果：

![在此处输入图像描述](../Images/eab9698e7fee3e056c6e28acb2ba526f.png)

我似乎找不到问题，感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:04:08.933

在你`RequestHandler`这样做：

```
class SearchHandler(webapp2.RequestHandler):
  def get(self):
    searchQuery = self.request.get('searchQuery')
    self.response.out.write('Term: %s' % searchQuery) 
```

您将查询参数与 URL 映射混淆了。

同样在 Python 中，我建议您对变量使用 lower_case_underscore 约定。

# php - 使用 FFmpeg 在 PHP 中将图像转换为视频

> ID：15421404
> 
> 赞同：2
> 
> 时间：2013-03-14T22:27:08.327
> 
> 标签：php, image, video, ffmpeg

我遇到了一个可怕的问题。我一直在搜索，一整天都在谷歌搜索，但找不到这个问题的答案..

我正在尝试使用 PHP 中的 FFmpeg 将 5 张图片转换为视频。我的 php.ini 中安装了 FFmpeg 扩展。

尝试运行此命令：

```
<?php
exec("ffmpeg -r 25 -qscale 2 -i %05d.jpg output.mp4");
?> 
```

但它给了我一个没有错误或其他东西的空白页。有谁能够帮我 ？

# apache-flex - 如何在 Flex 中不超出面板边框绘制？

> ID：15421414
> 
> 赞同：0
> 
> 时间：2013-03-14T22:27:53.733
> 
> 标签：apache-flex, actionscript, line, mxml

我想画一些线条，它们不能越过面板边框，我不知道该怎么做...线条越过面板边框，但我希望那条线进入面板，然后我可以缩放它. 这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               >

<fx:Script>
    <![CDATA[
        import mx.graphics.SolidColorStroke;

        import spark.primitives.Line;

        private function drawLine():void 
        {
            var myShape:Shape = new Shape();
            myShape = new Shape() ;

            myShape.graphics.lineStyle(2, 0x00008B, .75);
            myShape.graphics.moveTo(500, 500);

            myShape.graphics.lineTo(25, 45);
            spr.addChild(myShape);
        }
    ]]>
</fx:Script>

<mx:Button label="Click" click="drawLine()" />
<s:Panel  y="30" width="400" height="250" layout="vertical" title="Panel" borderColor="#008040" fontFamily="Arial" fontWeight="bold" fontSize="13">

<mx:Text text="Drawing.." fontWeight="bold"/>
        <s:SpriteVisualElement width="500" height="500" id="spr"/>
</s:Panel>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:43:14.293

一种简单的方法是将内容放入 a`Group`和 set[`clipAndEnableScrolling`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/GroupBase.html#clipAndEnableScrolling)中。

```
<s:Panel>
    <s:VGroup height="100%" width="100%" clipAndEnableScrolling="true">
        <mx:Text text="Drawing.." fontWeight="bold"/>
        <s:SpriteVisualElement width="500" height="500" id="spr"/>            
    </s:VGroup>
</s:Panel> 
```

# iphone - 请求用户允许自动检测 SIM 电话号码 - xCode

> ID：15421419
> 
> 赞同：-1
> 
> 时间：2013-03-14T22:28:12.687
> 
> 标签：iphone, ios, phone-number

苹果有一个禁止获取用户电话号码的功能，因为这可能是侵入性的等等。

这是据我所知的代码

```
NSString *num = [[NSUserDefaults standardUserDefaults] stringForKey:@"SBFormattedPhoneNumber"]; 
```

我想知道......在这样做之前，应用程序应该在 UIAlertView 中显示用户对此类操作的批准，这是一个有效的解决方案吗？

在此先感谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:43:57.817

未记录功能的问题是它们不能被依赖。任何版本更新都可能破坏它们。也就是说，更大的问题是苹果是否会批准使用这种调用的应用程序。如果不是（共识似乎是他们不赞成使用 SBFormattedPhoneNumber），那么在这样做之前简单地询问用户可能不会在批准过程中为您购买任何积分。我的建议是避免这种情况，如果需要，只需向用户询问他们的电话号码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:43:36.917

*如果您的应用完全使用任何*禁止的 API，您的应用将被审核团队拒绝。警报视图或无警报视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T22:47:13.677

`SBFormattedPhoneNumber`版本后不再存在`ios4`。基本上没有办法做到这一点。尝试通过某种未记录的方式访问该号码可能会使您的应用程序被拒绝。

这是 Apple 对此功能的回应

> “出于安全原因，iPhone OS 将应用程序（包括其首选项和数据）限制在文件系统中的唯一位置。此限制是称为应用程序“沙箱”的安全功能的一部分。沙箱是一组精细的-粒度控制限制应用程序对文件、首选项、网络资源、硬件等的访问。”
> 
> 设备的电话号码在您的应用程序容器中不可用。您需要修改您的应用程序，使其仅在您的目录容器中读取，然后将您的二进制文件重新提交到 iTunes Connect，以便重新考虑您的应用程序是否可以在 App Store 中使用。

# php - 请帮我用 PHP 过滤这个字符串

> ID：15421423
> 
> 赞同：0
> 
> 时间：2013-03-14T22:28:45.260
> 
> 标签：php, string

我有一个带有零件编号和零件描述的字符串。例如

```
$MyString = "9210009 - text 6420, 5412, 5224, 4416, 4408 - SSL  Upgrade to 2,000  9210020 - ADC factory installed"; 
```

我不会只使用 pn 来获取数组。

```
$pn = array(
    "9210009",
    "9210020",
); 
```

有人能帮我吗 ？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:30:39.833

```
$MyString = "9210009 - text 6420, 5412, 5224, 4416, 4408 - SSL  Upgrade to 2,000  9210020 - ADC factory installed";

function extractPartNumbers($str, $pnLength = 7) {
    $pn  = array();
    $str = explode(' ', $str);

    foreach ($str as $s) {
        if (is_numeric($s) && strlen($s) == $pnLength) {
            $pn[] = $s;
        }
    }

    return $pn;
}

print_r( extractPartNumbers($MyString) ); // Array ( [0] => 9210009 [1] => 9210020 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:34:35.107

```
$pn = array();
$pnbits= explode("", $mystring); 
```

用它把它分成几块

9210009 - 文本 6420、5412、5224、4416、4408 - SSL 升级到 2,000 9210020 - ADC 出厂安装

然后遍历所有部分，如果它符合您的条件，则将其推入数组并随后打印

```
foreach ($pnbits as $bits) {
    if (is_numeric($bits) && strlen($bits) == 7) {
        array_push($pn,$bits);
    }
}

print_r($pn); 
```

# python - 搜索文档中的每个空白行，然后弹出第一行？

> ID：15421424
> 
> 赞同：1
> 
> 时间：2013-03-14T22:28:49.410
> 
> 标签：python

我想要做的是逐行浏览文档，找到每个空白行，继续遍历直到我点击下一行文本，然后弹出该行。因此，例如，我想做的是：

> 第 1 段
> 这是一行。
> 这是另一条线。
> 
> 这是空格后的一行，我想弹出！
> 这是下一行，我想保留。
> 
> 这是我想弹出的另一行。

所以它会遍历每个空白行，直到它碰到下一个句子，并且只弹出那个句子，然后继续。我想我应该使用 re.split('\n') ，但我不确定。对不起，我没有要发布的代码，但我真的不知道从哪里开始任何帮助将不胜感激，谢谢！这是一个更大的代码的一部分，我已经工作了好几天并且已经弄清楚了这一点，所以我已经完成了大部分工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:38:31.450

到目前为止，最简单的新手解决方案可能是史蒂夫建议的方式：只需迭代行，并使用标志来跟踪最后一行是否为空行。

但是如果你想要一个更高层次的解决方案，你需要在更高层次上重新思考这个问题。您实际上要指定的是每个段落的第一行，但第一行，其中“段落”是由空行分隔的内容。正确的？

那么，你怎么能这样做呢？好吧，您可以`'\n\n'`像 on 一样轻松拆分 on `\n`。所以：

```
paragraphs = document.split('\n\n')
first_lines = [paragraph.partition('\n')[0] for paragraph in paragraphs]
popped_lines = first_lines[1:] 
```

（我在这里使用`partition`而不是，`split`因为它只在第一个拆分`'\n'`，其余部分不理会，并且因为它可以正确处理单行段落 - 这`paragraph.split('\n', 1)`不会。）

但是您不想要弹出行的列表，您想要除弹出行之外的所有内容的列表*，*对吗？

```
paragraphs = document.split('\n\n')
first, rest = paragraphs[0], paragraphs[1:]
rest_edited = [paragraph.partition('\n')[1] for paragraph in rest] 
```

如果你想把它变成一个文档：

```
all_edited = [first] + rest_edited
document_edited = '\n\n'.join(all_edited) 
```

您可以通过使用切片分配来缩短它，尽管我不确定它是否具有可读性：

```
paragraphs = document.split('\n\n')
paragraphs[1:] = [paragraph.partition('\n')[1] for paragraph in paragraphs[1:]]
document_edited = '\n\n'.join(paragraphs) 
```

* * *

正如 JF Sebastian 指出的那样，这个问题有点模棱两可。“空白行”是指“空行”还是“只有空格的行”？如果是后者，事情就有点复杂了，最简单的解决方案可能*是*一个简单的正则表达式 ( `r'\n\s*\n'`) 来分割成段落。

* * *

同时，如果您拥有的是一系列行（请注意，文件是一系列行！）而不是一个大字符串，您可以通过几种不同的方式完全不拆分。

例如，段落是一组非空行，对吧？因此，您可以使用该`groupby`函数来获取它们：

```
groups = itertools.groupby(lines, bool) 
```

或者，如果“空白”并不意味着“空”：

```
groups = itertools.groupby(lines, lambda line: not line.strip()) 
```

请注意，这将为您`(False, <sequence of lines>)`提供每个段落和`(True, <sequence of blank lines>)`每个空白行。如果你想按原样保留空行，你可以——但如果你很高兴只用一个空行替换每一行空行（如果“空白”*确实*意味着“空”，那么你显然是这样），它可能是更容易丢弃空白段落：

```
paragraphs = (group for (key, group) in paragraphs if not key) 
```

然后，您可以从除第一个组之外的所有元素中删除第一个元素，最后将这些组链接在一起形成一个大序列：

```
first = next(paragraphs)
edited_paragraphs = (itertools.islice(paragraph, 1) for paragraph in paragraphs)
edited_document = itertools.chain(first, *edited_paragraphs) 
```

* * *

最后，如果您连续运行多个空行怎么办？好吧，首先你必须决定如何处理它们。如果你有两个空行，你会删除第二个吗？如果是这样，你是删除下一段的第一行（因为它最初是在一个空行之后），还是不删除（因为它之后的空行已经被删除了）？如果你连续三个呢？分裂`'\n\n'`会做一件事，分裂会做另一件事，还有另一`'\n\s*\n'`件事`groupby`……但在你知道你想要什么之前，当然不可能说哪个是“正确的”或如何“修复”其他的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:31:48.400

如果你这样做`for line in filehandle:`，它将遍历每一行。如果在上一行为空白时您的标志为真，您可以跳过下一行然后重置该标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T22:36:22.063

我假设原始海报（OP）想要就地删除这些行，这意味着从文件中删除这些行。这是一个修改后的解决方案（我以前的解决方案不合时宜。谢谢 JF Sebastian 告诉我。

```
import fileinput

def remove_line_after_blank(filename, in_place_edit=False):
    previous_line = ''
    for line in fileinput.input(filename, inplace=in_place_edit):
        if not (previous_line == '\n' and line != '\n'):
            print line.rstrip()
        previous_line = line

if __name__ == '__main__':
    remove_line_after_blank('data.txt', in_place_edit=True) 
```

### 讨论

*   如果您不想修改原始数据文件，请删除`, in_place_edit=True`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T22:35:47.337

用于`re.findall`匹配字符串中的所有出现：

```
>>> text = """Paragraph 1
This is a line.
This is another line.

Here is a line after a space, which I want to pop!
Here is the next line, which I want to keep.

Here is another line I want to pop."""
>>> re.findall("\n\n+(.+)", text)
['Here is a line after a space, which I want to pop!', 'Here is another line I want to pop.']
>>> re.findall("\n\n+(.+)$", text, re.MULTILINE)
['Here is a line after a space, which I want to pop!', 'Here is another line I want to pop.'] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-14T22:33:11.377

最简单的方法是将文本拆分为换行符：

```
lines = your_string.split("\n") 
```

这会将其分解为一个数组（存储在 中`lines`），其中数组的每个元素都是单独的文本行。（如评论中所述，如果您已经有一个文件对象，则可以循环遍历它。）

然后你可以遍历每一行`lines`，检查换行符。如果你找到一个，你可以“弹出”下一个。（我不知道你所说的pop是什么意思，所以我只是让代码打印出你想要的行。）

```
for line in lines:
  if print_next_line:
     print(line)
     print_next_line = False

  if line == "":
    print_next_line = True 
```

# jquery - 只有最后一篇文章的评论会显示在弹出窗口中（Ruby on Rails）

> ID：15421425
> 
> 赞同：0
> 
> 时间：2013-03-14T22:29:04.533
> 
> 标签：jquery, ruby-on-rails, ruby

我在每个帖子下都有评论。所有的帖子和评论都可以通过链接/用户/用户名看到

我正在使用 facebox（基于 jQuery 的灯箱）作为弹出窗口，并且评论显示得很好。唯一的问题是弹出窗口中只显示最新帖子的评论。所有弹出链接都显示相同的**注释。**

例如，如果最新帖子有 5 条评论，我可以单击帖子下方的评论链接以在弹出窗口中查看。但是，当我向下滚动并转到另一个有 1 条评论的帖子时，当我单击评论链接时，我会看到相同的 5 条评论。如何确保只显示与特定帖子相关的评论？

这是我的 show.html.erb

```
<script src="/jquery.js" type="text/javascript"></script>
<link href="/src/facebox.css" media="screen" rel="stylesheet" type="text/css"/>
<script src="/src/facebox.js" type="text/javascript"></script> 
<script language="javascript">

 jQuery(document).ready(function($) {
  $('a[rel*=facebox]').facebox() 
}) 
</script>

<% provide(:title, @user.name) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.name %>
      </h1>
    </section>
    <section>
      <%= render 'shared/stats' %>
     </section>
  <br>
  </aside>
 <br>

  <div class="span10">
    <%= render 'follow_form' if signed_in? %>
    <% if @user.microposts.any? %>
      <h3>Browse</h3>
      <ol class="microposts">
        <%= render @microposts %>
      </ol>
      <%= will_paginate @microposts %>
    <% end %>
  </div>
  </div> 
```

我的 micropost.html.erb 评论视图位于底部

```
<li>

 <%= render 'shared/comment_form', micropost: micropost if signed_in?%>
 <div id ="modal" class = "comments">
  <% micropost.comments.each do |comment| %>
  <%= image_tag("http://www.gravatar.com/avatar.php?gravatar_id=#{Digest::MD5::hexdigest(comment.user.email)}", :alt => 'Avatar', :class => 'avatar', :height => "10%", :width => "10%") %> <!-- Retrieves Gravatar -->
    <%= link_to comment.user.name, comment.user %>
          <span class="timestamp"><%= time_ago_in_words(comment.created_at) %> ago</span>
    <span class="content2"><%= comment.comment_content %></span>
    <% end %></div>
</li> 
```

最后是comment_form.html.erb

```
<%= form_for([micropost, @comment]) do |f| %>
<%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_field :comment_content %>
  </div>
  <div class="ItemContainer">
<div class="ItemInput">
    <button class="btn" type="submit">
    Comment
  </button>
  </div><div class="ItemCommentCount">
<% end %>

<%= link_to "#modal", :rel => "facebox-#{micropost.id}" do %>
  Comments
<% end %></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:39:14.223

从[精细规范](http://www.w3.org/TR/html-markup/global-attributes.html#common.attrs.id)：

> **身份证=身份证**
> 
> 元素的唯一标识符。
> 
> 文档中不能有多个元素具有相同的 id 值。

您有多个`<div id="modal">`元素：

```
<div id ="modal" class = "comments"> 
```

在您的页面中。由于`id`s 应该是唯一的，因此对 an 的 DOM 搜索`id`通常只会找到第一个；您总是会收到第一个微博的评论，并且当您有重复`id`的 s 时，这与预期的行为相匹配。

一个简单的解决方案是`micropost.id`在 DOM中包含`id`：

```
<div id="modal-<%= micropost.id %>" class="comments"> 
```

然后在链接中：

```
<%= link_to "#modal-#{micropost.id}", :rel => "facebox-#{micropost.id}" do %>
  Comments
<% end %> 
```

# delegates - 使用 func<> 的 Autofac 委托工厂

> ID：15421430
> 
> 赞同：17
> 
> 时间：2013-03-14T22:29:21.980
> 
> 标签：delegates, autofac, factory-pattern

我正在尝试使用 Autofac 了解委托工厂模式。我知道如何使用带有 Keyed() 注册的 IIndex<> 来实现工厂，这里很好地解释了这一点：[Configuring an Autofac delegate factory that's defined on an abstract class](https://stackoverflow.com/questions/7522541/configuring-an-autofac-delegate-factory-thats-defined-on-an-abstract-class)

我想知道是否可以使用 Func<> 创建工厂，以及如何为以下示例进行注册：

```
public enum Service
{
   Foo,
   Bar
}

public interface FooService : IService 
{
   ServiceMethod();
}

public interface BarService : IService 
{
   ServiceMethod();
}

public class FooBarClient
{
   private readonly IService service;

   public FooBarClient(Func<Service, IService> service)
   {
      this.service = service(Service.Foo);
   }

   public void Process()
   {
      service.ServiceMethod(); // call the foo service.
   }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-15T08:15:01.633

Autofac 无法`Func<Service, IService>`为您构造它，它允许您根据参数返回不同的类型。这是`IIndex<>`为了什么。

但是，如果你不想/不能使用，你可以在or`IIndex<>`的帮助下创建这个工厂函数，并在容器中注册你的工厂：`Keyed``Named`

```
var builder = new ContainerBuilder();
builder.RegisterType<FooBarClient>().AsSelf();
builder.RegisterType<FooService>().Keyed<IService>(Service.Foo);
builder.RegisterType<BarService>().Keyed<IService>(Service.Bar);

builder.Register<Func<Service, IService>>(c => 
{
    var context = c.Resolve<IComponentContext>();
    return s => context.ResolveKeyed<IService>(s);
}); 
```

# proxy - 将 CORS 或 nginx proxy_pass 用于 RESTful 客户端-服务器应用程序会更好吗？

> ID：15421435
> 
> 赞同：5
> 
> 时间：2013-03-14T22:29:54.000
> 
> 标签：proxy, cors

我有一个客户端-服务器应用程序，其中服务器是一个 Ruby on rails 应用程序，它呈现 JSON 并理解 RESTful 请求。它由 nginx+passenger 提供服务，地址是 api.whatever.com。

客户端是一个使用这些服务的 Angular js 应用程序（whatever.com）。它由第二个 nginx 服务器提供服务，它的地址是whatever.com。

我可以将 CORS 用于跨子域 ajax 调用，也可以将客户端的 nginx 配置为 proxy_pass 请求到 rails 应用程序。

哪一个在性能方面更好，对开发人员和服务器管理员的麻烦更少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T14:54:05.733

除非您是 Facebook，否则您不会注意到额外的反向代理会对性能造成任何影响。开销*很小*。它基本上是解析一堆字节，然后通过本地套接字将它们发送到另一个进程。Nginx 中的反向代理很容易设置，不太可能成为管理负担。

您应该更多地担心浏览器支持。几乎所有浏览器都支持 CORS，当然 Internet Explorer 和一些移动浏览器除外。

[Juvia](https://github.com/phusion/juvia)使用 CORS，但回退到 JSONP。没有反向代理设置。

# php - 如何在 Node.js 中使用私钥签名

> ID：15421436
> 
> 赞同：4
> 
> 时间：2013-03-14T22:29:55.947
> 
> 标签：php, node.js, cryptography, openssl

我正在尝试为以下 PHP 函数做同样的事情

```
openssl_private_encrypt 
```

使用我的私钥签署一个字符串

这就是我正在做的

```
var signer = crypto.createSign('RSA-SHA256').update(timestamp + '|' + userId);
var signature = signer.sign(privKey, 'base64'); 
```

我的第一个问题是将 RSA 和 SHA256 放在一起意味着什么？我了解使用 RSA 私钥加密某些内容或使用 SHA256 对某些内容进行哈希处理意味着什么。但我无法理解把这两个放在一起意味着什么。

我把它放在那里是因为 createSign 需要一个字符串参数（不支持“RSA”），而 RSA-SHA256 是我找到的最接近的东西。

我的第二个问题是我该怎么做

```
openssl_private_encrypt 
```

在 Node.js 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T01:17:20.230

正常的签名操作由哈希计算组成，然后（如果函数需要）然后由私钥加密。散列是消息的压缩 - 较小 - 表示，无法找到重复的散列（冲突）。对于 RSA，然后使用 PKCS#1 v2.1（公共标准）中的方案填充消息，然后执行模幂运算。

模幂运算通常被错误地称为加密，加密需要不同的 RSA 填充方法（并且加密也不执行散列）。

您不应该使用`openssl_private_encrypt`对字符串进行签名，它是一个已弃用的函数，主要用于相对特定的身份验证目的。当单独使用时，它使用用于签名的填充来加密数据，但它确实省略了散列和散列指示符。

要为您创建等效项，`openssl_private_encrypt`您需要能够执行 PKCS#1 v1.5 填充方法和模幂运算。您可能可以从 Node.js 的源代码中检索这些函数，但您不太可能在更高级别的 API 中找到它们。但是，建议您取消`openssl_private_encrypt`PHP 中的函数并使用更高级别的签名函数。

# javascript - jQuery 或 JS 从范围内修剪字符

> ID：15421438
> 
> 赞同：0
> 
> 时间：2013-03-14T22:30:01.163
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 或 JS 删除跨度内某些文本的结尾。

```
<h3 class="ms-standardheader ms-WPTitle">
    <a href="" tabindex="0" accesskey="W">
    <nobr>
        <span>Programs ‭[1]‬&lt;/span> 
```

我在 SharePoint 中有 15 个这样生成的标题 - 5 个程序、5 个临床服务和 5 个其他支持。我想从他们每个人中删除 [x]，但是这是由 SharePoint 自动生成的，因为它不喜欢具有相同名称的标题。

我尝试过以下迭代：

```
$('.ms-WPTitle a nobr span').splice(0, -4); 
```

我似乎无法在跨度内找到文本来修剪它。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T22:31:15.797

```
$('.ms-WPTitle a nobr span').text(function(el, old){ 
  return old.slice(0, -4);
}); 
```

`.text()`接受一个函数，您可以使用该函数轻松修剪字符

演示：http: [//jsfiddle.net/vhTuA/](http://jsfiddle.net/vhTuA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:42:40.830

由于 ahren 提供了一种方法，您也可以尝试：您也可以尝试

**演示** [http://jsfiddle.net/CCvPQ/2/](http://jsfiddle.net/CCvPQ/2/) **或** [http://jsfiddle.net/CCvPQ/4/](http://jsfiddle.net/CCvPQ/4/)

使用的 API：

*   [http://api.jquery.com/first/](http://api.jquery.com/first/)
*   [http://api.jquery.com/text/](http://api.jquery.com/text/)
*   [http://api.jquery.com/find/](http://api.jquery.com/find/)

希望它适合原因`:)`

**代码**

```
jQuery.fn.justtext = function() {

    return $(this).children().find('span').text();

};

alert($('.ms-standardheader').justtext()); 
```

**使用 .first api**

[http://jsfiddle.net/qRZe7/1/](http://jsfiddle.net/qRZe7/1/)

```
jQuery.fn.justtext = function() {

    return $(this).children().find('span').first().text();

};

alert($('.ms-standardheader').justtext()); 
```

# javascript - 在coffeescript中循环html5数据钩子

> ID：15421442
> 
> 赞同：0
> 
> 时间：2013-03-14T22:30:27.533
> 
> 标签：javascript, jquery, ruby-on-rails, coffeescript

我有一个产品列表页面，其中包含主要产品图片和每个主要图片下方的变体缩略图。当您将鼠标悬停在缩略图上时，它应该将主图像更改为缩略图的主图像。我几乎可以让它工作，除了当您将鼠标悬停在缩略图上时，它会更改页面上每个产品的主图像，而不仅仅是缩略图下方的产品。

每个主图像都通过 ruby​​ 和 html5 分配了它的 product_id：

```
<div class="main-image" data-productid="<%= product.id %>">
  <%= link_to large_image(product, :itemprop => "image", :class => "product-image"), product, :itemprop => 'url' %>
</div><!-- main-image--> 
```

我相信我需要为每个产品分别循环遍历我的咖啡脚本代码，但我不确定如何执行它。这是我现在拥有的，以及所有产品的不断变化的图像：

```
add_image_handlers = ->

  thumbnails = ($ '.product-images ul.thumbnails')
  ($ '.main-image').data 'selectedThumb', 'productid', ($ '.main-image img').attr('src')
  thumbnails.find('li').eq(0).addClass 'selected'
  thumbnails.find('a').on 'click', (event) ->
    ($ '.main-image').data 'selectedThumb', ($ event.currentTarget).attr('href')
    ($ '.main-image').data 'selectedThumbId', ($ event.currentTarget).parent().attr('id')
    ($ this).mouseout ->
      thumbnails.find('li').removeClass 'selected'
      ($ event.currentTarget).parent('li').addClass 'selected'
    false

  thumbnails.find('li').on 'mouseenter', (event) ->
    ($ '.main-image img').attr 'src', ($ event.currentTarget).find('a').attr('href')

  thumbnails.find('li').on 'mouseleave', (event) ->
    ($ '.main-image img').attr 'src', ($ '.main-image').data('selectedThumb')

show_variant_images = (variant_id) ->
  ($ 'li.vtmb').hide()
  ($ 'li.vtmb-' + variant_id).show()
  currentThumb = ($ '#' + ($ '.main-image').data('selectedThumbId'))
  if not currentThumb.hasClass('vtmb-' + variant_id)
    thumb = ($ ($ 'ul.thumbnails li:visible.vtmb').eq(0))
    thumb = ($ ($ 'ul.thumbnails li:visible').eq(0)) unless thumb.length > 0
    newImg = thumb.find('a').attr('href')
    ($ 'ul.thumbnails li').removeClass 'selected'
    thumb.addClass 'selected'
    ($ '.main-image img').attr 'src', newImg
    ($ '.main-image').data 'selectedThumb', newImg
    ($ '.main-image').data 'selectedThumbId', thumb.attr('id')

update_variant_price = (variant) ->
  variant_price = variant.data('price')
  ($ '.price.selling').text(variant_price) if variant_price

$ ->
  add_image_handlers()
  show_variant_images ($ '#product-variants input[type="radio"]').eq(0).attr('value') if          ($ '#product-variants input[type="radio"]').length > 0
($ '#product-variants input[type="radio"]').click (event) ->
show_variant_images @value
update_variant_price ($ this) 
```

我想我需要为页面上的每个“productid”数据钩子循环遍历这段代码，但我不确定。

谢谢！

# c++ - C++ Visual Studio 链接器错误

> ID：15421443
> 
> 赞同：-1
> 
> 时间：2013-03-14T22:30:27.667
> 
> 标签：c++, visual-c++, compiler-errors, linker-errors

我做了一个布尔方法，它将返回真或假。我想看看它返回的实际值，所以我在我的 main 方法中尝试了这个：

```
bool answer = methodName(); // I made sure to include the parameters in my code
cout << answer << endl; 
```

它给了我以下错误：

```
error LINK2019: unresolved external symbol "bool ___cdec1" methodName(parameters) 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:32:28.133

链接器抱怨，因为您*声明*了您的函数`methodName()`，但您没有为它提供*定义*。

# html - HTML 按钮重定向错误

> ID：15421444
> 
> 赞同：1
> 
> 时间：2013-03-14T22:30:33.783
> 
> 标签：html, visual-studio-2012, hyperlink

所以我一直在使用[BootMetro](http://aozora.github.com/bootmetro/hub.html)框架，但在尝试在图标按钮上创建链接时遇到了问题。

在主标题栏的一部分，我创建了额外的图标。但是我似乎无法弄清楚如何将按钮变成可重定向的链接：

```
 <div class="top-info-block">
           <b class="icon-blogger-2" onclick="window.location.href='www.blogger.com'"></b>
           <b class="icon-facebook-2"></b>
           <b class="icon-google-plus-3"></b>
           <b class="icon-youtube"></b>
        </div> 
```

使用 VS2012 时，当 html 链接出现时出现页面未找到错误：`http://localhost:8581/www.blogger.com`这只是 VS2012 的问题还是我的 onclick 方法错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T22:32:23.077

更改`onclick="window.location.href='www.blogger.com'"`为`onclick="window.location.href='http://www.blogger.com'"`

如果没有协议 ( `http`)，`window.location.href`则会尝试解析`www.blogger.com`为相对于您当前位置的文件/目录/。在这种情况下，`http://localhost:8581/`。

希望有帮助。

# ubuntu - 无法在 Ubuntu 服务器上获取适用于 PHP 的 AWS 开发工具包

> ID：15421451
> 
> 赞同：1
> 
> 时间：2013-03-14T22:30:55.533
> 
> 标签：ubuntu, sdk, amazon-web-services, amazon-ec2, suhosin

我一直在尝试安装 AWS SDK 并在我的 EC2 实例上工作。我正在运行 Ubuntu 服务器，并尝试`aws.phar`在我的代码中要求该文件并通过 PEAR 安装。无论哪种方式，我都会收到以下错误：

```
PHP Fatal error: Class 'S3BrowserUpload' not found in /var/www/... 
```

要求 SDK 没有错误这一事实让我认为这是安装页面上所述的 suhosin 配置问题。问题是，我在服务器上的任何地方都没有 suhosin.ini 文件。

如果我运行`php -v`它表明我确实有 suhosin：

```
PHP 5.3.10-1ubuntu3.4 with Suhosin-Patch (cli) (built: Sep 12 2012 18:59:41)
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

在没有 suhosin.ini 文件的情况下，我尝试添加：

```
suhosin.executor.include.whitelist = phar 
```

并重新`php.ini`启动apache。没有骰子。我安装了 composer 但尚未配置它，因为我真的不想经历设置它的所有麻烦，只是为了遇到相同的（suhosin？）问题。

**问题已解决。该类不在最新版本的 SDK 中**:( smh ...

# ruby - Ruby 扫描以匹配多个单词

> ID：15421452
> 
> 赞同：2
> 
> 时间：2013-03-14T22:30:57.230
> 
> 标签：ruby, regex

我有一个代码可以解析文件夹中的文本文件，并在某个搜索词周围保存文本。

但是，我在编辑代码以使其同时适用于多个单词时遇到问题。我不想循环整个代码，因为我希望为每个文本文件分组结果，而不是为每个搜索词分组。

使用`all_documents.scan("(word1|word2|word3)")`相似的或正则表达式变体似乎不起作用。

```
 #helper
        def indices text, index, word
        padding = 20
        bottom_i = index - padding < 0 ? 0 : index - padding
        top_i = index + word.length + padding > text.length ? text.length : index +         word.length + padding
        return bottom_i, top_i
    end

    #script
    base_text = File.open("base.txt", 'w')
    Dir::mkdir("summaries") unless File.exists?("summaries")
    Dir.chdir("summaries")

    Dir.glob("*.txt").each do |textfile|
        whole_file = File.open(textfile, 'r').read
        puts "Currently summarizing " + textfile + "..."
        curr_i = 0
        str = nil
        whole_file.scan(/trail/).each do |match|
          if i_match = whole_file.index(match, curr_i)
            top_bottom = indices(whole_file, i_match, match)
            base_text.puts(whole_file[top_bottom[0]..top_bottom[1]] + " : " +         File.path(textfile))
            curr_i += i_match                     
          end
        end
        puts "Done summarizing " + textfile + "."
    end
    base_text.close 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T22:35:51.487

你可以使用[`Regexp.union()`](http://www.ruby-doc.org/core-2.0/Regexp.html#method-c-union)它。它完全符合您的要求。

在您的代码中，它将变为

```
...
whole_file.scan(Regexp.union(/trail/, /word1/, /word2/, /word3/)).each do |match|
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:44:27.820

您可以使用`Regexp.union`，但这只会生成子字符串匹配。如果你想匹配完整的单词，你需要做更多的工作。我会使用：

```
/\b(?:#{ Regexp.union(%w[trail word1 word2 word3]).source })\b/
=> /\b(?:trail|word1|word2|word3)\b/ 
```

生成的模式将定位整个单词，忽略任何子字符串：

```
foo = /\b(?:#{ Regexp.union(%w[trail word1 word2 word3]).source })\b/
# /\b(?:trail|word1|word2|word3)\b/

words = %w[trail word1 word2 word3]
words.join(' ').scan(foo)
# [
#     [0] "trail",
#     [1] "word1",
#     [2] "word2",
#     [3] "word3"
# ]

words.join.scan(foo)
# []

'trail word1word2 word3'.scan(foo)
# [
#     [0] "trail",
#     [1] "word3"
# ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:40:21.470

我认为您最好`scan`处理任何单词（例如 by `/[\w']+/`）并在 的块内`scan`检查是否`$&`与任何特定单词匹配。如果`scan`碰巧匹配了一个你不感兴趣的词，那就没有错；忽略它。

# ado.net - 为什么 tableadapter 命名空间与数据集的命名空间不同？

> ID：15421459
> 
> 赞同：0
> 
> 时间：2013-03-14T22:31:32.480
> 
> 标签：ado.net, dataset, .net-2.0, strongly-typed-dataset, tableadapter

我知道这听起来可能有点基本，但我想知道为什么 tableadapter 命名空间与数据集的命名空间不同？

是我生成它时所做的吗？

# matlab - 在带有向量的 Matlab 中使用integral2

> ID：15421467
> 
> 赞同：0
> 
> 时间：2013-03-14T22:32:00.057
> 
> 标签：matlab

我正在尝试对双积分进行**数值评估。**具体积分太复杂了，不过这里不相关，我只想要大意。

假设我有：

```
x=1;
y=1;

fun = @(theta,phi)  (x.*sin(theta) + y.*cos(phi));
result = integral2(fun,0,pi,0,2*pi) 
```

这给出了一个值。假设我想对 X 和 Y 的一系列值执行此操作。理想情况下，我希望将 x,y 作为向量：

```
x=1:10;
y=1:10; 
```

Matlab 给出（使用错误。* 矩阵尺寸必须一致。）

解决办法是什么？（理想情况下，我不想使用 for 循环）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:40:42.340

`arrayfun`当您希望它接受数组时，您可以使用它来“提升”您的功能

```
x = 1:10;
y = 1:10;
result = arrayfun(@(x, y) integral2(@(theta,phi) x.*sin(theta) + y.*cos(phi),0,pi,0,2*pi), x, y); 
```

或者

```
fun = @(theta, phi, x, y) x.*sin(theta) + y.*cos(phi);
result = arrayfun(@(x, y) integral2(@(theta,phi)fun(theta,phi,x,y), 0,pi,0,2*pi), x, y); 
```

# javascript - 具有重复类名的 Javasctipt 类模式

> ID：15421468
> 
> 赞同：0
> 
> 时间：2013-03-14T22:32:04.417
> 
> 标签：javascript

我想在javascript中模拟类，并提出了这个方案......

```
var Random = function(a){ // class name used here
    var Random = function(a){ // and used again here
        this.valueOf = function(){
            return Math.random()
        }
        this.under = function(limit){
            return this*limit
        }
        this.floor = function(limit){
            return Math.floor(this*limit)
        }
    }
    return new Random(a)
}

var rnd = Random()

console.log(rnd*20<<0) 
```

命名对我来说似乎很传统，TitelCase 中的类名和 camelCase 中的实例。我将该类包装两次，以便我可以返回一个实例，因为我不喜欢`new Thing`在我的主代码中使用。

让我印象最不寻常的是对两个包装器使用相同的类名。这种模式有什么技术问题吗？

有没有更简单的方法来实现同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:19:30.110

这是一种非常低效的模式，因为它在每次调用时都会创建一个新的构造函数，并且不利用原型继承。此外，仅依靠大小写来指示构造函数不利于维护。至少`new Foo()`很明显，正在返回一个新实例。

如果你不喜欢使用`new`（我不明白为什么），那么将构造函数包装在一个调用函数中，并使用一个名称来表明它们的作用、喜欢`newRandom`或类似。

关于代码，我不知道您为什么使用函数表达式而不是声明。内部函数不需要与外部函数使用相同的名称，实际上内部函数根本不需要名称：

```
function X(name) {
  return new (function(name) {
    this.name = name;
  })(name)
}

var a = X('a');
a.name; // a 
```

但我不建议你这样做。

# android - OutputStream 到 DataOutputStream 用于蓝牙通信

> ID：15421476
> 
> 赞同：2
> 
> 时间：2013-03-14T22:32:41.433
> 
> 标签：android, sockets, bluetooth, datainputstream, dataoutputstream

我已经在网上找到的教程的帮助下编写了一个连接到蓝牙设备的 Android 应用程序。这个应用程序使用 InputStream 和 OutputStream 对象来连接和建立连接。因为我必须传输少量数据，所以这个解决方案没问题，因为我只能发送字节。

现在我想更改我的旧代码以使用 DataInputStream 和 DataOutputStream 轻松发送复杂数据。我试图通过简单地在 InputStream 和 OutputStream 之前添加 Data 标识符来修改我的原始代码，但这在我的代码中产生了错误。有人可以解释一下如何正确使用 DataInputStream 和 DataOutputStream，这样我就不会出错。这是我的旧代码：

```
 private class ConnectedThread extends Thread {
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the input and output streams, using temp objects because
        // member streams are final
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) { }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
        byte[] buffer = new byte[1024];  // buffer store for the stream
        int bytes; // bytes returned from read()

        // Keep listening to the InputStream until an exception occurs
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);        // Get number of bytes and message in "buffer"
                hBluetooth.obtainMessage(RECEIVE_MESSAGE, bytes, -1, buffer).sendToTarget();        // Send to message queue Handler
            } catch (IOException e) {
                break;
            }
        }
    }

    /* Call this from the main activity to send data to the remote device */
    public void send(String message) {
        if(D)   Log.d(TAG, "...Data to send: " + message + "...");
        if (btSocket != null && btSocket.isConnected()) {

        byte[] msgBuffer = message.getBytes();
        try {
            mmOutStream.write(msgBuffer);
            Log.e(TAG, "Int" +msgBuffer);
        } catch (IOException e) {
            Log.d(TAG, "...Error data send: " + e.getMessage() + "...");     
          }
        }

    } 
```

这里是修改后的版本：

```
 private class ConnectedThread extends Thread {
     DataInputStream mmInStream;
     DataOutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
       InputStream tmpIn = null;
       OutputStream tmpOut = null;

        mmInStream = new DataInputStream(tmpIn);
        mmOutStream = new DataOutputStream(tmpOut);

        // Get the input and output streams, using temp objects because
        // member streams are final
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) { }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    } 
```

感谢您的任何投入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:50:23.843

如果我正确理解了您的问题，请执行以下操作来获取 DataInputStream 和 DataOutputStream 对象：

```
 mmInStream = new DataInputStream(tmpIn);
  mmOutStream = new DataInputStream(tmpOut); 
```

如果您需要它们是全局的，那么变量将在类外部声明如下，正如我从您所做的编辑中看到的那样：

```
 DataInputStream mmInStream;
   DataOutputStream mmOutStream; 
```

编辑对于更新的问题：

```
public ConnectedThread(BluetoothSocket socket) {
   InputStream tmpIn = null;
   OutputStream tmpOut = null;

    // Get the input and output streams, using temp objects because
    // member streams are final
    try {
        tmpIn = socket.getInputStream();
        tmpOut = socket.getOutputStream();
    } catch (IOException e) { }

    mmInStream = new DataInputStream(tmpIn);
    mmOutStream = new DataOutputStream(tmpOut);

} 
```

# regex - 如何使用 SED 从文件中删除 CTRL-A 字符？

> ID：15421478
> 
> 赞同：8
> 
> 时间：2013-03-14T22:32:44.470
> 
> 标签：regex, unix, sed

我想使用 SED 从文件中删除所有“^A”控制字符。我可以使用 'sed s/[[:cntrl:]]//g' 删除所有控制字符，但如何具体指定“^A”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T22:36:14.880

要重现“^A”，只需按 Ctrl-v Ctrl-a 这将重现文件中的 ^A

```
sed -i -e 's/^A/BLAH/g' testfile 
```

那一行`^A`是我按 Ctrl-v Ctrl-a 的结果

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-14T22:38:16.843

^A 是字节 1`\x01`左右，你应该能够做到这一点：

```
sed 's/\x01//g' 
```

请记住，对于单字节更改，“tr”比 sed 快，尽管您必须使用 bash 的`$'..'`语法给它一个 0x01 字节：

```
tr -d $'\x01' 
```

# jquery - jQuery解析字符串数据

> ID：15421480
> 
> 赞同：1
> 
> 时间：2013-03-14T22:32:49.363
> 
> 标签：jquery, json, html-parsing

我的模拟结果是从包含字符串和数值的 REST 服务中获取的。我能够解析数字（`x_water`），但字符串（ ）有困难`x_date`。下面是我的方法，我想我在使用 HTML5`data-val`属性存储字符串时可能是错误的。那么有人可以给我一些建议吗？

我的数据如下所示

`x_water`

```
[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 22.1, 0.0545, 0.000171, 3.71e-05, 3.61e-05, 3.54e-05, 3.48e-05, 3.42e-05, 3.35e-05, 3.3e-05, 3.24e-05, 3.18e-05, 3.12e-05, 3.06e-05, 3.01e-05, 2.95e-05, 2.9e-05, 2.85e-05, 2.79e-05, 2.74e-05, 2.69e-05, 2.64e-05, 2.59e-05, 2.54e-05, 2.5e-05, 2.45e-05, 2.41e-05, 2.36e-05, 2.32e-05, 2.28e-05, 2.23e-05, 2.19e-05] 
```

`x_date`

```
[' 1/ 1/1961', ' 1/ 2/1961', ' 1/ 3/1961', ' 1/ 4/1961', ' 1/ 5/1961', ' 1/ 6/1961', ' 1/ 7/1961', ' 1/ 8/1961', ' 1/ 9/1961', ' 1/10/1961', ' 1/11/1961', ' 1/12/1961', ' 1/13/1961', ' 1/14/1961', ' 1/15/1961', ' 1/16/1961', ' 1/17/1961', ' 1/18/1961', ' 1/19/1961', ' 1/20/1961', ' 1/21/1961', ' 1/22/1961', ' 1/23/1961', ' 1/24/1961', ' 1/25/1961', ' 1/26/1961', ' 1/27/1961', ' 1/28/1961', ' 1/29/1961', ' 1/30/1961', ' 1/31/1961', ' 2/ 1/1961', ' 2/ 2/1961', ' 2/ 3/1961', ' 2/ 4/1961', ' 2/ 5/1961', ' 2/ 6/1961', ' 2/ 7/1961', ' 2/ 8/1961', ' 2/ 9/1961', ' 2/10/1961', ' 2/11/1961', ' 2/12/1961'] 
```

在 python 中，我将它们放在一个隐藏的 html 表中，如下所示：

```
html = html + """
<table class="results" width="550" border="1">
                  <tr>
                    <th scope="col" colspan="3"><div align="center">Results</div></th>
                  </tr>
                  <tr style="display: none">
                    <td id="x_water" data-val='%s'></td>
                    <td id="x_date" data-val='%s'></td>
                  </tr>
</table><br>"""%(x_water,x_date) 
```

最后一步是使用 jQuery 来获取这两个变量：

```
 var x_water = $.parseJSON($('#x_water').attr('data-val'));
    var x_date = $.parseJSON($('#x_date').attr('data-val')); 
```

我检查了生成的html文件的来源：

```
<td id="x_water" data-val='[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 22.1, 0.0545, 0.000171, 3.71e-05, 3.61e-05, 3.54e-05, 3.48e-05, 3.42e-05, 3.35e-05, 3.3e-05, 3.24e-05, 3.18e-05, 3.12e-05, 3.06e-05, 3.01e-05, 2.95e-05, 2.9e-05, 2.85e-05, 2.79e-05, 2.74e-05, 2.69e-05, 2.64e-05, 2.59e-05, 2.54e-05, 2.5e-05, 2.45e-05, 2.41e-05, 2.36e-05, 2.32e-05, 2.28e-05, 2.23e-05, 2.19e-05]'></td>
<td id="x_date" data-val='[' 1/ 1/1961', ' 1/ 2/1961', ' 1/ 3/1961', ' 1/ 4/1961', ' 1/ 5/1961', ' 1/ 6/1961', ' 1/ 7/1961', ' 1/ 8/1961', ' 1/ 9/1961', ' 1/10/1961', ' 1/11/1961', ' 1/12/1961', ' 1/13/1961', ' 1/14/1961', ' 1/15/1961', ' 1/16/1961', ' 1/17/1961', ' 1/18/1961', ' 1/19/1961', ' 1/20/1961', ' 1/21/1961', ' 1/22/1961', ' 1/23/1961', ' 1/24/1961', ' 1/25/1961', ' 1/26/1961', ' 1/27/1961', ' 1/28/1961', ' 1/29/1961', ' 1/30/1961', ' 1/31/1961', ' 2/ 1/1961', ' 2/ 2/1961', ' 2/ 3/1961', ' 2/ 4/1961', ' 2/ 5/1961', ' 2/ 6/1961', ' 2/ 7/1961', ' 2/ 8/1961', ' 2/ 9/1961', ' 2/10/1961', ' 2/11/1961', ' 2/12/1961']'></td> 
```

我的 Chrome JS 控制台并没有太大帮助，只是抱怨：

```
Uncaught SyntaxError: Unexpected end of input 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T00:32:18.003

您的报价没有正确转义。看看这个页面

[如何正确转义html属性中的引号？](https://stackoverflow.com/questions/4015345/how-to-properly-escape-quotes-inside-html-attributes)

这里还有一个正确使用的小提琴

[http://jsfiddle.net/earlonrails/LUDh8/3/](http://jsfiddle.net/earlonrails/LUDh8/3/)

```
<td id="x_water" data-val='[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 22.1, 0.0545, 0.000171, 3.71e-05, 3.61e-05, 3.54e-05, 3.48e-05, 3.42e-05, 3.35e-05, 3.3e-05, 3.24e-05, 3.18e-05, 3.12e-05, 3.06e-05, 3.01e-05, 2.95e-05, 2.9e-05, 2.85e-05, 2.79e-05, 2.74e-05, 2.69e-05, 2.64e-05, 2.59e-05, 2.54e-05, 2.5e-05, 2.45e-05, 2.41e-05, 2.36e-05, 2.32e-05, 2.28e-05, 2.23e-05, 2.19e-05]'></td>
<td id="x_date" data-val="[ &quot;1/ 1/1961&quot;, &quot; 1/ 2/1961&quot;, &quot; 1/ 3/1961&quot;, &quot; 1/ 4/1961&quot;, &quot; 1/ 5/1961&quot;, &quot; 1/ 6/1961&quot;, &quot; 1/ 7/1961&quot;, &quot; 1/ 8/1961&quot;, &quot; 1/ 9/1961&quot;, &quot; 1/10/1961&quot;, &quot; 1/11/1961&quot;, &quot; 1/12/1961&quot;, &quot; 1/13/1961&quot;, &quot; 1/14/1961&quot;, &quot; 1/15/1961&quot;, &quot; 1/16/1961&quot;, &quot; 1/17/1961&quot;, &quot; 1/18/1961&quot;, &quot; 1/19/1961&quot;, &quot; 1/20/1961&quot;, &quot; 1/21/1961&quot;, &quot; 1/22/1961&quot;, &quot; 1/23/1961&quot;, &quot; 1/24/1961&quot;, &quot; 1/25/1961&quot;, &quot; 1/26/1961&quot;, &quot; 1/27/1961&quot;, &quot; 1/28/1961&quot;, &quot; 1/29/1961&quot;, &quot; 1/30/1961&quot;, &quot; 1/31/1961&quot;, &quot; 2/ 1/1961&quot;, &quot; 2/ 2/1961&quot;, &quot; 2/ 3/1961&quot;, &quot; 2/ 4/1961&quot;, &quot; 2/ 5/1961&quot;, &quot; 2/ 6/1961&quot;, &quot; 2/ 7/1961&quot;, &quot; 2/ 8/1961&quot;, &quot; 2/ 9/1961&quot;, &quot; 2/10/1961&quot;, &quot; 2/11/1961&quot;, &quot; 2/12/1961&quot;]"></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:39:32.157

如果您知道页面加载时的数据，我建议您直接在 javascript 中将其作为对象文字输出：

```
html = html + """
<script type="javascript">
var x_water = %s;
var x_date = %s;
</script>"""%(x_water,x_date); 
```

# c# - 如何以另一种形式将时间存储在数据库中？

> ID：15421481
> 
> 赞同：0
> 
> 时间：2013-03-14T22:32:57.697
> 
> 标签：c#, database, winforms, database-connection

如何将“ShowTime”中的值存储在数据库中？这应该在与数据库有连接的 form2 中。下面的代码属于form1。我已经创建了数据库和一个表。

这应该是一个存储前 10 个高分的高分列表。

我在 from2 中创建了一个 datagridview，并尝试在名为“time”的列下自动获取“ShowTime”值，但没有成功。可悲的是，我删除了此代码并尝试使用标签，但在这里我还没有设法解决我的问题。我真的没有任何代码来展示我是如何尝试的，因为我不知道这样做的正确方法是什么。

```
private Stopwatch _sw = new Stopwatch();

public void StartGame()
{
    ...
    _sw.Start();
}

GameOver()
{
    _sw.Stop();
    ShowTime = String.Format("Congratulation, you won the game in: {0} seconds.",    _sw.Elapsed.TotalSeconds);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:39:15.697

好吧，如果你相信这个 SO 帖子

[存储值 > 24:00:00 的 .Net 时间跨度的正确 SQL 类型是什么？](https://stackoverflow.com/questions/8503825/what-is-the-correct-sql-type-to-store-a-net-timespan-with-values-240000)

你使用一个大整数。

当然，这是基于 > 24 小时的值，这在您的情况下似乎有点过分了。

我可能会使用一个简单的 Sql`Float`

我对格式不太满意（在 POST 中，而不是代码本身），但请看一下这个连接数据库和更新值的简单示例。

[调整初学者 C# SQL Server INSERT 示例以使用我的数据库](https://stackoverflow.com/questions/8224371/adapt-beginner-c-sharp-sql-server-insert-example-to-work-with-my-database)

# c++ - 为什么我对指针-> 下一个 == NULL 的检查在我的链接列表中为假？

> ID：15421483
> 
> 赞同：0
> 
> 时间：2013-03-14T22:33:06.723
> 
> 标签：c++, linked-list

我第一次将 current->next 值设置为 null 时插入到链表中。我用它来检查我是否在打印期间位于列表的末尾。当我在调试器中检查它时，它显示一个空值，但我的 if 语句 [if(current->next == NULL)] 不会阻止无限打印。我的代码如下。

```
#include "List.h"
#include <cstdlib>

List::List(){
    //precondition:none
    //postcondition:empty list;position @ 1
    head = NULL;
    current = NULL;
    previous = NULL;
position = 1;
}
List::~List(){
    //precondition:link exists
    //List is now an empty linked list
makeEmpty();
}
void List::goToNext(){
    if(!isAtEnd()){
        if(current->next == NULL){
            previous == current;
            current == NULL;
        }
        else{
            previous = current;
            current = current->next;
            position +=1;
        }
    }
}
void List::goToStart(){
    if(position = 1){
        return;
    }
    else{
        current = head;
        previous = NULL;
        position = 1;
    }
}
void List::makeEmpty(){
    if(!isEmpty()){
        this->goToStart();
        while(isAtEnd() == false)
        {
            goToNext();
            delete previous;
            previous = current;
        }
        head = NULL;
        previous = NULL;
        current = NULL;
        position = 1;
    }
}
bool List::isEmpty(){
    if(this->head == NULL && this->current == NULL && this->previous == NULL){
        return true;
    }
}
bool List::isAtEnd(){
    if(current == NULL){
        return true;
    }
    else{
        return false;
    }
}
ItemType List::CurrentItem(){
    if(isAtEnd() != true){
        return current->data;
    }
}
void List::insert(ItemType item){
    nodeType * temp = new nodeType;
    temp->data = item;

    if(head == NULL){
        temp->next = NULL;
        head = temp;
        current = head;
        current->next = NULL;
    }
    else if(position == 1){
        head = temp;
        head->next = current;
        current = head;
    }
    else if(!isAtEnd() && current->next == NULL){
        temp->next = current;
        current = temp;
        if(previous != NULL){
            previous->next = current;
        }
    }
    else{
        current = temp;
        current->next = NULL;
    }
}
void List::deleteCurrentItem(){
    previous->next = current->next;
    delete current;
    current = previous->next;
    position -= 1;
}
int List::currentPosition(){
    return position;
}

////////---print function from main---///////
void print(List & testList){
    int storedPosition = testList.currentPosition();

    testList.goToStart();
    while (!testList.isAtEnd())
    {
        cout << testList.CurrentItem() << endl;
        testList.goToNext();
    }

    testList.goToStart();
    for ( int i = 1; i < storedPosition; i++)
        testList.goToNext();        
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:36:44.840

在`List::goToNext()`中，您希望在设置时使用赋值`previous`而`current`不是使用比较器。

```
 previous = current;
    current = NULL; 
```

# php - PHP foreach - 开关/案例 - 如果

> ID：15421488
> 
> 赞同：-2
> 
> 时间：2013-03-14T22:33:32.487
> 
> 标签：php, foreach, switch-statement

大家好，THX 寻求帮助。我有一种情况，然后我需要从 switch/case 返回值，但我做不到。这很容易，但是？？？我的代码是这样的。

```
<? if (is_array($all_data)) { foreach ($all_data as $key => $data) { 
                                $sec = $data->section_id;
                                switch ($sec) {
                                    case 1:
                                        $pref = 'news_detail';
                                        break;
                                    case 3:
                                        $pref = 'article';
                                        break;
                                    case 4:
                                        $pref = 'perestr';
                                        break;
                                };
                            if ($key % 2 == 0) { ?>
                                <div class="news_content">
                                    <?php $href_link1 = base_url() . "pages/". $pref . '/' . $data->id . '/' . str_replace($replace_simbols, '-', $data->title); ?>
                                    <a href="<?=$href_link1.'.php'?>"><img src="<?=base_url();?>assets/uploads/articles/<? echo $data->base_img;?>"/></a>
                                    <a class="news_title_left" href="<?=$href_link1.'.php'?>"><? echo $data->title;?></a>
                                </div>
                            <? } else { ?>
                            <div class="news_content">
                                <?php $href_link2 = base_url() . "pages/". $pref . '/' . $data->id . '/' . str_replace($replace_simbols, '-', $data->title); ?>
                                <a href="<?=$href_link2.'.php'?>"><img src="<?=base_url();?>assets/uploads/articles/<? echo $data->base_img;?>"/></a>
                                <a class="news_title_right" href="<?=$href_link2.'.php'?>"><? echo $data->title;?></a>
                            </div>
                            <? }; }; ?>
                            <? } else echo '<p style="text-align: center;">Нет записей, повторите попытку позже!</p>'; ?> 
```

我需要为我的 $href_link 返回 $pref。其中 $sec = $data->section_id; 是我表中的 SECTION ID (1,2,3...)

如果我有案例 1 (section_id = 1) 我需要 $pref = 'news_detail' 和 $href_link weel

.../pages/news_detail/...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:36:40.940

```
 $sec = (int) $data->section_id;
 switch ($sec) {
                                    default:
                                        $pref = "Default";
                                        break;
                                    case  1: 
                                        $pref = 'news_detail';
                                        break;
                                    case  3:
                                        $pref = 'article';
                                        break;
                                    case 4:
                                        $pref = 'perestr';
                                        break;
                                }; 
```

# apache-flex - Flex Spark VGroup，将项目置于显示列表顶部而不更改顺序

> ID：15421491
> 
> 赞同：1
> 
> 时间：2013-03-14T22:34:05.340
> 
> 标签：apache-flex

使用 spark vGroup 布局元素时，列表底部的项目始终位于显示堆栈的顶部。我需要让列表顶部的项目也位于显示堆栈的顶部，以便属于它的项目（正在屏幕上拖动）覆盖其他元素。我尝试将它们布置并使用 setElementIndex 函数将其带到显示堆栈的顶部，但这会导致列表被使用并且项目移动到底部，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T16:28:47.140

所有`IVisualItem`s 都有一个[depth](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/IVisualElement.html#depth)属性，它决定了它们呈现的顺序。
在其中一个项目上设置`depth="1"`应该将其呈现在其他项目的前面。

# javascript - angular.identity() 的用例有什么好的例子吗？

> ID：15421502
> 
> 赞同：14
> 
> 时间：2013-03-14T22:34:57.660
> 
> 标签：javascript, functional-programming, angularjs

根据文档

```
A function that returns its first argument. This function is useful when writing code in the functional style. 
```

我想知道在哪里可以找到这种用例的一个很好的例子——在 Angular 应用程序中以函数式风格编写代码。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T23:19:31.247

来自 AngularJS 源代码的示例：

```
function transformer(transformationFn, value) {
  return (transformationFn || angular.identity)(value);
}; 
```

解释：

如果`transformationFn`作为第一个参数提供，它将`value`作为它自己的参数调用。否则`identity`函数将以相同的值调用。

正如ng源代码提到的：

> *在以函数式风格编写代码时，此函数很有用。*

这意味着在函数式编程中没有全局变量，所以你总是必须传递/注入你需要的一切。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-19T13:18:18.267

假设我们有以下两个功能：

```
$scope.square = function(n) {
return n * n
};

$scope.multplybyTwo = function(n) {
return n * 2
}; 
```

要以功能方式调用它：

```
$scope.givemeResult = function(fn, val) {
return (fn || angular.identity)(val);
}; 
```

然后你可以使用上面的函数，如下所示：

```
$scope.initVal = 5;
$scope.squareResult = $scope.givemeResult($scope.square, $scope.initVal);
$scope.intoTwo = $scope.givemeResult($scope.multplybyTwo, $scope.initVal); 
```

您可以点击以下链接：

[http://litutech.blogspot.in/2014/02/angularidentity-example.html](http://litutech.blogspot.in/2014/02/angularidentity-example.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-04-30T14:00:23.540

如果我错了，请纠正我，但我的理解是

```
function transformer(transformationFn, value) {
  return (transformationFn || angular.identity)(value);
}; 
```

可以对此“未重构”

```
function transformer(transformationFn, value) {
  if (transformationFn) {
    return transformationFn(value);
  } else {
    return angular.identity(value);
  }
}; 
```

这在功能上等同于这个`identity`-less 版本：

```
function transformer(transformationFn, value) {
  if (transformationFn) {
    return transformationFn(value);
  } else {
    return value;
  }
}; 
```

所以我想用例是当你想对一个值应用某种转换时，你提供了一些可能实际存在或不存在的东西。

我想更好地解释这个`identity`功能（据我所知），尽管当我回顾我的答案时，我认为我并没有真正回答你的问题。无论如何都要在这里留下我的答案，以防万一。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-02T14:54:06.213

`angular.identity`在您希望通过将对象从父对象传递给其子对象来引用绑定到父对象的情况下非常有用。

> 恒等函数就像函数的零。本身有点无用，但偶尔作为使用高阶函数的表达式的一部分很有用，您可以将函数作为参数或将其作为结果返回。

这是数组值的示例：

> 例如，您可以将二维数组绑定到初始选择，然后将包含的内部数组绑定到每个子选择。在这种情况下，values 函数是标识函数：它为每组子元素调用，传递绑定到父元素的数据，并返回这个数据数组。

当需要将虚拟函数传递给：

*   一个承诺（$q）
*   编译器（$compile）
*   单元测试（间谍/模拟）

它充当管道的数据源或泵。

相比之下，`Angular.noop`正确处理解析/拒绝承诺是因为它总是返回未定义，而`Angular.identity`正确处理解析/拒绝承诺是因为它总是返回传递给它的参数（`f(x) = x`）。

就 Angular 中的构造函数而言，它是相关的：

> 如果构造函数没有显式返回对象（即类型对象或函数的值），JavaScript 引擎只会返回构造函数的实例。因此新的身份（值）始终是一个对象。因此 new identity(value) == value 只有在 value 是一个对象时才返回 true。这是因为当操作数之一是对象时，JavaScript 中的相等运算符总是检查身份。

**参考**

*   [“身份功能”的目的？](https://stackoverflow.com/questions/1298627/1113772)

*   [Angular.noop 是做什么用的？](https://stackoverflow.com/questions/22348253/1113772)

*   [R中恒等函数的实际用途是什么？](https://stackoverflow.com/questions/7108835/1113772)

*   [人们使用身份功能做什么？](https://stackoverflow.com/questions/25987085/1113772)

*   [JavaScript 中标识函数的使用](https://stackoverflow.com/questions/11485508/1113772)

*   [身份功能在哪里以及为什么有用？](https://stackoverflow.com/questions/21504350/1113772)

*   [如何漂亮地打印带有已删除源元素的 XSLT 结果文档？](https://stackoverflow.com/questions/2228004/1113772)

*   [d3 wiki：选择](https://github.com/mbostock/d3/wiki/Selections)

*   [AngularJS 问题 #4579：orderBy 过滤器不支持按值本身排序](https://github.com/angular/angular.js/issues/4579)

*   [Promise 和 angular.noop 的危险](http://www.codeducky.org/promises-danger-angular-noop/)

*   [身份单子](https://www.common-lisp.net/project/cl-monad-macros/monad-macros.htm#_Toc251846355)

*   [函数组合和恒等函数](http://www.kevinalbrecht.com/code/joy-mirror/j02maf.html)

*   [Cocoa 绘图指南：变换 - 身份变换](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CocoaDrawingGuide/Transforms/Transforms.html#//apple_ref/doc/uid/TP40003290-CH204-SW8)

*   [了解 Fluent API](https://www.sitepoint.com/javascript-like-boss-understanding-fluent-apis/)

*   [请解释下划线.js的_.identity(value)的用法](https://stackoverflow.com/questions/14216479/)

*   [https://softwareengineering.stackexchange.com/questions/256090/function-only-returns-unchanged-parameter-useless](https://softwareengineering.stackexchange.com/questions/256090/function-only-returns-unchanged-parameter-useless)

# android - 在制作新项目时，如何确保我的 Android App 可以在 3 个不同版本的 Android 上运行？

> ID：15421503
> 
> 赞同：1
> 
> 时间：2013-03-14T22:35:06.303
> 
> 标签：android, api, sdk, avd

我正在 Android 中构建一个应用程序，最终应用程序需要能够在三个不同的 AVD 上运行。

我将设置什么作为最小和目标 SDK 以及我用什么编译？

我正在使用带有 Android 插件的 Eclipse Juno。JRE7

例如，如果我想运行 3 个 AVD：

*   API 级别 10：2.3.3
*   API 级别 13：3.2
*   API 级别 16 4.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:37:26.573

```
 <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="16" /> 
```

实际上，您可以将 minsdk 设置为小于 10 的任何值（如果您的 api 支持）并将 targetsdk 设置为最大值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:42:33.993

您应该将最低 SDK 设置为 API 级别 10，将目标 SDK 设置为 16，因为这只是说设备/AVD 必须**至少为**API 级别 10，因此它可以在所有三个 AVD 上工作，因为它们都≥ API 级别 10。现在对于目标 SDK，您可能应该将其设置为您将测试它的最高 SDK，因为“*该设置表示您使用应用程序测试过的 Android 的最高版本*”有关更多信息，请访问[此处。](http://developer.android.com/tools/projects/projects-eclipse.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:43:20.063

这很棘手。在三个 AVD 上进行测试与支持多个版本不同。

要在测试期间处理不同的 AVD，请创建 AVD，然后使用允许您在运行时选择“设备”的运行配置：

1.  从菜单中，运行 > 运行配置
2.  右键单击 Android 应用程序，然后选择新建
3.  单击目标选项卡，然后在顶部单击始终提示选择设备

填写对话框的其余部分并保存您的新配置。每次使用此配置名称运行应用程序时，系统都会提示您选择 AVD。

要编写适用于多种设备的应用程序，请参阅 Android 培训课程 [Supporting Different Devices](http://developer.android.com/training/basics/supporting-devices/index.html)。

如果您要支持的平台范围在 10 到 16 之间，请在清单中设置 minSdkVersion=10 和 targetSdkVersion=16。

# c# - 数据未显示在列表框中

> ID：15421504
> 
> 赞同：0
> 
> 时间：2013-03-14T22:35:09.200
> 
> 标签：c#, mysql, winforms

我正在尝试让记分牌从 mySQL DB 显示在我的列表框中。

但是我在列表框中得到的只是'System.Data.DataRowView'

这是代码：

```
MySqlConnection myConn = new MySqlConnection(connStr);

string sqlStr = "SELECT CONCAT(Name, ' ', Score) as NameAndScore " + "FROM highscore ORDER BY Score DESC";

MySqlDataAdapter dAdapter = new MySqlDataAdapter(sqlStr, myConn);

DataTable dTable = new DataTable();
lstNames.DisplayMember = "NameAndScore";
lstNames.DataSource = dTable;
dAdapter.Fill(dTable);
dAdapter.Dispose(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:38:46.140

装订前填充。

```
 dAdapter.Fill(dTable);
 lstNames.DataSource = dTable;
 lstNames.DisplayMember = "NameAndScore"; 
```

# javascript - 在 JavaScript 中打印二维

> ID：15421506
> 
> 赞同：0
> 
> 时间：2013-03-14T22:35:14.733
> 
> 标签：javascript, printing

我想在 JavaScript 中输出这样的东西。

```
*
**
***
****
***** 
```

我在尝试

```
<script type="text/javascript" language="javascript">
var i ,j ;

for(i=1;i<=6;i++){
  for(j=1;j<=6;j++){
    document.write('*');    
    document.write('<br>');    
  }
  document.write('<br>');   
}
</script> 
```

绝对这段代码不能按我需要的方式工作..我对如何`*`以我需要的方式打印感到困惑...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:38:07.277

将内循环更改为

```
for (j=1; j<=i; j++) {
             ^---  the important bit
    document.write('*');
}
document.write('<br>'); 
```

这样，内循环会打印出多达6 行`i`的`*`字符，而外循环会负责在完成 6 行后停止处理。例如

```
i | j     | printed
-------------------
1 | 1     | *
2 | 1,2   | **
3 | 1,2,3 | ***
etc... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T22:41:59.300

你只需要一个循环：

```
function writeStars(n) {
    var m = '',
        t = [];

    for (var i=0; i<n; i++) {
      m += '*';
      t.push(m);
    }
    return t.join('<br>') + '<br>';
}

document.write(writeStars(6)); 
```

# java - Java中的套接字和对象非常基本的例子

> ID：15421507
> 
> 赞同：0
> 
> 时间：2013-03-14T22:35:25.517
> 
> 标签：java, sockets, object

我正在尝试在一台服务器和一台客户端之间创建一个简单的传输。我正在尝试将对象从客户端发送到服务器。我已经检查了我的代码很多次了，我真的不知道为什么 t 不起作用。另外，我想补充一点，我在 netbeans 中创建了两个独立的项目，一个用于客户端，一个用于服务器。代码如下：

客户：

```
package client;
import java.net.*;
import java.io.*;
import java.util.Scanner;
import java.io.Serializable;

class Object implements Serializable {  
    String one;
    String two;

    public Object(String one, String two){
        this.one = one;
        this.two = two;
    } 

    @Override
    public String toString(){
        return "\nOne: " + one +"\nTwo: " + two;
    }            

}

public class Client {  

    public static void main(String[] args){    

        try {
            Object obj= new Object ("Something", "Else");

            Socket sock = new Socket("127.0.0.1", 1111);

            ObjectOutputStream oos = new ObjectOutputStream(sock.getOutputStream());  
            System.out.println("Connecting to "+ sock.getInetAddress()+ " and port "+sock.getPort());

            System.out.println("Local Address :"+sock.getLocalAddress()+" Port:"+sock.getLocalPort());

            oos.writeObject(obj);
            oos.flush();
            oos.close();
            sock.close();
            System.out.println("Connection Closing...");

        } catch (Exception ex){
            System.out.println("No Conenction");
        } 
    } 
} 
```

服务器：

```
<!-- language: lang-java -->

package server;

import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.*;
import java.io.*;

class Object implements Serializable {  
    String one;
    String two;

    public Object(String one, String two){
        this.one = one;
        this.two = two;
    } 

    @Override
    public String toString(){
        return "\nOne: " + one +"\nTwo: " + two;
    }            

}

public class Server {
    public static void main(String[] args){
        try{
            ServerSocket server = new ServerSocket(1111,10);

            System.out.println("Waiting Incoming Connection...");

            System.out.println("Local Address :"+server.getInetAddress()+" Port:"+server.getLocalPort());

            Socket sock = server.accept();
            ObjectInputStream ois = new ObjectInputStream(sock.getInputStream());               

            Object ob=new Object ("Once", "Upon"); //for test
            Object obj2= null;
            try{
                obj2 = (Object )ois.readObject();
                System.out.println(obj2);

            }catch (Exception ex){
                 System.out.println("nothing...");
            }
            System.out.println(ob); 
            ois.close();

        }catch (Exception ex){
            System.out.println("Error during I/O");
            ex.getMessage();
            ex.printStackTrace();
        } 
    } 
} 
```

代码有效，但从未发送对象 =/ 。我收到异常消息“什么都没有。”。该连接有效，因为它们使用简单的消息 BufferedReader() 、 BufferedWritter() 交换消息。问题在于对象....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T22:39:26.727

1）不要只说“抛出了一些异常”。打印抛出了哪个异常，以及在哪里 ( `e.printStackTrace()`)。

2）很可能，您必须在服务器和客户端中使用相同的类。这意味着相同的包，（`client.Object`）也与（`server.Object`）不同。可能你得到一个`ClassCastException`）。

3) 请不要使用 API 中的类名称来命名您的类，并且不要使用`java.lang`. **任何名字**都比`Object`.

更新：一些实施技巧

又快又脏。将您的重命名`server.Object`为`server.MyServer`. 导入`client.Object`. 使`obj2`变量 a `client.Object`。问题在于，要运行您的服务器，您需要在类路径中使用您的客户端代码。

更详细。`mytest.Bean`使用您要传输的对象的定义创建第三个类（例如）。在客户端和服务器代码中都使用这样的类（不要忘记将它添加到类路径中）。

最后，当你有一个真正的应用程序时，你会将共享数据做成一个库，并在服务器和客户端应用程序中都导入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:31:10.887

与其为每个类创建一个项目，不如将所有类放到同一个项目中。

事实上，最简单的方法可能是使用一个类。将您的`Object`课程重命名为更有意义的名称（怎么样`MyNetworkType`？）。`MyNetworkType`应该有一个`main`接受“客户端”或“服务器”作为命令行参数的方法。如果您获得“客户端”，请运行`client`包含`Client.main()`您提供的代码的方法。如果您获得“服务器”，请运行包含`Server.main()`您提供的代码的方法。

您的课程最终将看起来像这样：

```
class MyNetworkType implements Serializable {

    //
    // Data here
    //

    public MyNetworkType() {
        // initialize your data
    }

    public static void runClient() {
        // Copy the code from Client.main() here
    }

    public static void runServer() {
        // Copy the code from Server.main() here
    }

    public static void main(String[] args) {
        if( args[0].equals("client") ) {
            MyNetworkType.runClient();
        }
        else if( args[0].equals("server") ){
            MyNetworkType.runServer();
        }
    }
} 
```

我知道如何在 Eclipse 中传递命令行参数（当然也可以在命令行中），但是要使用 NetBeans 来解决，你就得靠你自己了。

请注意，这不是好的设计。在实践中，您肯定希望您的客户端和服务器在单独的类中（但您不一定需要将它们放在单独的项目中）。但是您正在寻找一个非常基本的示例，还有什么比单个类更简单的呢？

我希望这有帮助。

# wso2esb - wso2esb wso2 治理注册表

> ID：15421509
> 
> 赞同：0
> 
> 时间：2013-03-14T22:35:33.013
> 
> 标签：wso2esb, wso2bam

这似乎是非常基本的功能，但开箱即用并不能很好地工作。使用 ESB 版本 4.5.1 或 4.6.0，挂载注册表版本 4.5.0

安装似乎工作，结构存在，但是文件缺少内容。

这适用于 WSO2ESB 4.5.0，但 BAM 不适用于该版本，所以我试图让它与 4.5.1 一起使用

尝试使用 scm 挂载时，注册表 4.5.1 及更高版本中会出现相同的问题，目录结构存在，但文件缺少内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:50:45.003

此内容缺失问题是由于 G-Reg 4.5.1 中的错误所致。

[1] [https://wso2.org/jira/browse/REGISTRY-1607](https://wso2.org/jira/browse/REGISTRY-1607)

谢谢

阿吉特

# android - Android 使用前置摄像头 - 兼容所有设备

> ID：15421511
> 
> 赞同：1
> 
> 时间：2013-03-14T22:35:44.300
> 
> 标签：android, camera, device, compatibility, using

我用这个脚本打开了前置摄像头：

```
private Camera openFrontFacingCameraGingerbread() {
int cameraCount = 0;
Camera cam = null;
Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
cameraCount = Camera.getNumberOfCameras();
for ( int camIdx = 0; camIdx < cameraCount; camIdx++ ) {
    Camera.getCameraInfo( camIdx, cameraInfo );
    if ( cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
        try {
            cam = Camera.open(camIdx);
        } catch (RuntimeException e) {
            Log.e(TAG, "Camera failed to open: " + e.getLocalizedMessage());
        }
    }
} 
```

我认为这个脚本应该选择并打开所有设备上的前置摄像头。但是在我的设备上，脚本只能在带有两个摄像头（前置 + 后置摄像头）的设备上正常工作。在带有一个前置摄像头的其他设备上，我只收到空白屏幕。仅使用一个前置摄像头访问摄像头有什么区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:14:21.293

> *“在其他带有一个前置摄像头的设备上，我只收到空白屏幕。”*

通过*“仅接收空白屏幕”*，您是指来自[相机预览](http://developer.android.com/training/camera/cameradirect.html#camera-preview)吗？通过调用打开相机`Camera.open(cameraId)`不会自动为您提供预览屏幕。有关启动相机预览的示例，请参阅[本](http://boundarydevices.com/how-to-write-an-android-camera-app/)示例教程中的`startPreview()`方法。

此外，请确保您的设备没有任何硬件问题（通过在 stock-camera 应用程序上进行测试来确认您的代码，以查看是否成功打开相机预览或在其他设备上）。

> *“但在我的设备上，脚本只能在带有两个摄像头（前置 + 后置摄像头）的设备上正常工作。”*

`camIdx`和的值`cameraCount`有效且符合预期；因此，它应该可以正常工作。无论设备拥有的摄像头总数如何，您在问题中提供的代码*仅*打开前置摄像头，评估您的代码：

**如果您有一台相机：**

```
cameraCount = Camera.getNumberOfCameras(); // cameraCount == 1
// in for loop
cam = Camera.open(camIdx); // camIdx == 0 
```

**如果您有两个摄像头：**

```
cameraCount = Camera.getNumberOfCameras(); // cameraCount == 2
// ... more codes
// in for loop
cam = Camera.open(camIdx); // camIdx == 1 
```

> *“只用一个前置摄像头访问摄像头有什么区别吗？”* *

[在处理具有不同规格的不同设备时，调用Camera](http://developer.android.com/reference/android/hardware/Camera.html)对象及其关联方法应该没有任何区别。就Android应用开发而言，我们只需要`Camera.CameraInfo`通过调用来检索对象，`Camera.CameraInfo()`并在需要时调用其关联的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:20:11.250

此方法应为您提供可用的最前置摄像头。如果设备只有一个后置摄像头，你会得到那个。如果有两个，你会得到前面的一个。如果前面只有一个，你会得到那个：

```
private Camera getCameraInstance() {
    Camera c = null;
    try {
        // get the front-est camera
        c = Camera.open(Camera.getNumberOfCameras() - 1);
    } catch (Exception e) {
        Log.d(TAG, "Couldn't get the camera");
    }
    return c;
} 
```

# c# - 清除控制台中的一行

> ID：15421515
> 
> 赞同：5
> 
> 时间：2013-03-14T22:35:57.133
> 
> 标签：c#, console-application, line

如何在 C# 中清除控制台中的一行？

我知道如何将光标放在一行的开头：

```
Console.SetCursorPosition(0, Console.CursorTop); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T22:43:09.643

最简单的方法是移动到行的开头，就像您所做的那样，然后写出与行长度相同的空格字符串。

```
Console.Write(new String(' ', Console.BufferWidth)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-12T04:54:30.750

一旦使用了控制台缓冲区行的最后一个空格，控制台光标就会自动跳转到下一行。

1.  在光标到达控制台边缘之前将光标重置回开头
2.  擦除旧的控制台输出，将光标放在下一行
3.  将光标重置回刚刚清除的行

    ```
    while (true)
    {
      Console.Write(".");
      if (Console.CursorLeft + 1 >= Console.BufferWidth)
      {
        Console.SetCursorPosition(0, Console.CursorTop);
        Console.Write(Enumerable.Repeat<char>(' ', Console.BufferWidth).ToArray());
        Console.SetCursorPosition(0, Console.CursorTop - 1);
      }

      if (Console.KeyAvailable)
        break;
    } 
    ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-26T06:54:24.280

（在这里结合 at.toulan 和 Andrew 的答案。）

最简单的是，覆盖最后一行：

```
Console.SetCursorPosition(0, Console.CursorTop - 1)
Console.WriteLine("new line of text"); 
```

如果“新文本行”比以前的文本短，请在写文本之前写下空格，就像 Andrew 说的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-08T12:55:09.827

设置好光标位置后，可以使用退格：

```
do { Console.Write("\b \b"); } while (Console.CursorLeft > 0); 
```

# c# - 本地网络中的 WCF 服务

> ID：15421518
> 
> 赞同：1
> 
> 时间：2013-03-14T22:36:18.567
> 
> 标签：c#, wcf

我已经在我的开发机器上创建并启动了 WCF 服务。

当我`http://localhost:8080/ServiceName/Function`用作 URL 时，工作正常。

当我`http://MY.LAN.IP.ADDRESS:8080/ServiceName/Function`用作 URL 时，它不能在任何地方工作，不能在开发机器上，也不能在 LAN 中的其他机器上。

例如，在 Android 测试应用程序中，错误消息显示：

> “连接到 http://... 被拒绝”

我已禁用 Windows 防火墙和防病毒软件。

是什么导致了这样的问题？我需要在服务配置（web.config）中配置一些东西吗？

请注意，服务在 ASP.Net 开发服务器中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:50:31.783

根据[这个](http://forums.asp.net/t/1242749.aspx/1)站点，您应该检查开发服务器选择的随机端口（在您的情况下是 8080）是否在防火墙上打开。如果这不起作用，那么我不确定在没有为这些远程请求安装和配置 IIS 版本的情况下它是否能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T22:50:43.867

ASP.NET 开发服务器不能接受远程连接，所以这在本地机器之外不起作用

[http://msdn.microsoft.com/en-us/library/58wxa9w5%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/58wxa9w5%28VS.80%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T22:53:00.767

我不确定你是如何配置它的；因为这实际上会导致并发症。但是您的问题存在于您的`Host`. 您如何创建`Host`接收您的`Proxies`. 可能发生的一件事：

当它在您的本地计算机上运行时，它实际上是启用`IIS Express`的，因此您可以查看服务并对其进行测试。因此，此时 IIS 正在处理这些请求。这使它可以毫无问题地工作。

另一个困境是：

*   开发服务器可能未配置为接收外部请求。
*   IIS 服务器可能未配置为接收这些请求。
*   或者它创建了一个随机端口使用；这是无法访问的。

这更可能是正在发生的事情。由于 IIS 会自动处理它；其中之一更可能不正确。

但在我们看到您`app.config`和`ServiceHost`代码的详细信息之前，我们无法确定。

# c# - 如何将复杂对象发送回控制器以进行分页？

> ID：15421520
> 
> 赞同：0
> 
> 时间：2013-03-14T22:36:22.050
> 
> 标签：c#, asp.net-mvc, pagination

我根本无法在标题中正确描述这一点。

我们有我们产品的用户事件历史记录，它显示为分页，允许您设置每页的事件数，并根据需要过滤多个列的结果。过滤器过去只是一个单一的选择。例如，将有一个事件类型的下拉列表，您可以只选择其中一个并对其进行过滤。我添加了对在每个过滤器下拉列表中选择多个选项的支持，现在分页不起作用。

它现在所做的是为每个页码、上一页/下一页链接以及更改每页事件数的链接生成 ActionLink。由于它们只是单个选择，因此很容易将这些值作为路由值放入并将它们发送到控制器，控制器将使用它们为下一页返回正确过滤的数据。现在我混合了简单的枚举值（一些下拉菜单仍然只是单个选择）和枚举值列表。

我在我的页面上接收过滤器数据作为 RouteValueDictionary，所以我必须检查该值是一个对象还是一个对象列表，然后才能对它做任何适当的事情，这让我觉得很难看。

所以简而言之，我需要生成将过滤器选项发送回控制器的链接。一些过滤器选项将是一个以字符串为键的枚举，而一些将是一个以字符串为键的枚举列表。`<string, object`我可以在> 字典中的视图侧使用这些过滤器选项。

我只是无法弄清楚这样做的“好”方式是什么。

让我知道您是否需要了解其他信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:59:01.807

我认为，当您的过滤器更新时，您需要刷新结果页面。如果是这种情况，我会做一些 jQuery Ajax 来处理整个事情，而不是修改链接 url。我改用 Ajax 的原因是因为很容易创建一个您想用它发送到服务器的对象，而将一个复杂的对象作为查询字符串发送并不那么容易。你会有这样的事情：

```
$(document).on('click','selector of your filter inputs', function(){
    $.Ajax({
        url: '/[Controller]/[Action]',
        type: 'GET',
        data: { filter1: $('input').val()... }, // however complex object you need
        success: function(data){
            $('selector of the result container').html(data);
        }
    });
}); 
```

# facebook - og:image 打开图形警告图像大小

> ID：15421521
> 
> 赞同：35
> 
> 时间：2013-03-14T22:36:36.097
> 
> 标签：facebook, facebook-opengraph, resolution

我检查了我的网址，因为 facebook 不使用我在 og:image 上设置的图像

[网址 fb 检查](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fwww.filmopis.com%2Flistaomiljenih.php%3Fmlista%3D165)

我的图片是：639x649px 486kb 但fb使用这张图片：300x443px 97kb

警告说：

> og:image 应该更大：前提是 og:image 不够大。请使用至少 200x200，最好是 1500x1500 的图片。（最大图像大小为 5MB。）将使用图像 'url from image, size: 300x443px 97kb'。

但是当我尝试创建一个 1500x1500px 的图像，上传到服务器，刷新并再次检查顶部的链接时，结果是一样的。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-09T09:29:03.933

我在 Facebook 的经历让我怀疑计算机是确定性机器 :)

有时它会接受任何尺寸的图像（200 到 1500px 之间），有时会抱怨图像太小（*og:image 应该更大*），即使图像**是平方的**并且**大于最小尺寸**（例如 400x400px）。我的情况是，同一链接在 linter 和 FB 状态字段中显示所有 3 个 og：图像，然后突然 2 周后停止工作并开始仅显示一个图像，同时尝试在 FB 状态字段中共享它（linter 仍然显示所有 3 个图像)，反之亦然。有时 FB 似乎有不同域的问题（例如页面在 www.example.com 和 og:image 在 www.picdumpexamplesite.com），有时它不介意......

恕我直言，它已严重损坏，您能做的最好的事情是：
- 使图像平方，四舍五入到“数百”，例如大小 300x300px
- 将它们托管在同一服务器上（相同的域名）
- 使用 jpg
- 避免任何“奇怪”字符文件名（我只使用字母和数字）
- 祈祷上面的东西可以工作:)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-09T14:05:06.730

这是我的悲惨故事，希望它可以帮助其他人。

我收到了类似的警告：

```
Provided og:image is not big enough. Please use an image that's at
least 200x200 px. 
```

但这仅发生在我们网站的某些页面上，而不是其他页面上。这很奇怪，因为我们使用的 CMS 始终`427px x 307px`在每个页面上放置一个图像，并使用该图像的 URL 作为`og:image`标记。

在尝试了上述提示后，我最终比较了有效页面上的 JPG 文件与无效页面上的 JPG 文件，发现无效页面中包含 EXIF 元数据。我在 Photoshop 中删除了元数据，更新了网页并将页面重新提交到[Facebook 调试器](https://developers.facebook.com/tools/debug)，它工作正常。

**tl;dr** - 从 og:image 中删除 EXIF 数据。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-07-19T15:03:49.073

我有

```
<meta property="og:type" content="website" /> 
```

在元标记中。

删除了该行并且它起作用了。

当前标签现在看起来像这样：

```
<meta property="og:title" content="Title Here" />       
<meta property="og:url" content="http://www.mysite.com" />
<meta property="og:image" content="http://www.mysite.com/images/myimage.jpg"/> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-12T20:04:52.410

根据我的经验，Facebook 通常会在第二次抓取 URL 时清除图像大小错误。它会在第一次刮取任意大小的图像时给出错误。我遇到的问题是它最终使用图像并将其任意裁剪为 2:1 以用于页面帖子。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-11T11:09:02.873

我发现通过添加以下对我有用的附加标签...

```
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="1280" />
<meta property="og:image:height" content="855" /> 
```

正如[Facebook linter报告中提到的那样：og：图像太小，当它大于它选择的图像时](https://stackoverflow.com/questions/15004288/facebook-linter-reports-ogimage-is-too-small-when-it-is-larger-than-the-image)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-11T21:23:33.903

我遇到了同样的错误，但我也没有`og:description`. 一旦我添加了描述，图像就起作用了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-07T21:22:07.850

我尝试了这篇文章和其他人的许多建议都无济于事。解决方案（我在其他地方没有看到）是为`<head>`我之前完全省略的元素添加正确的前缀。

```
<head prefix="og: http://ogp.me/ns#"> 
```

我不确定这是否真的解决了问题，或者它是否迫使调试器正确地重新扫描图像。希望此解决方案对其他人有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-16T07:15:53.857

我最近遇到了类似的问题。根据经验，使用 JPG 而不是 PNG 文件。

PNG文件的问题是透明背景。他们无法正确计算身高和体重。

很遗憾，文档上没有指定...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-05T21:55:11.647

关于 100 舍入和平方的想法是不正确的。我不知道你从哪里得到的。看看这个网。尝试调试 URL [http://www.stipendije.ba/novost/1969](http://www.stipendije.ba/novost/1969)

它也可能取决于“强烈”的颜色、巨大的对比度和奇怪的字符。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-25T17:56:02.417

我认为SeeBeen是对的。我发现 Facebook 更喜欢四舍五入到数百的数字，而且似乎不太关心图像是否为正方形。

例如，它将正确选择 700x300 的图像，而不是 610x281 的图像（这些是我测试中的实际示例）。我遇到了 og:image 为 610x281 的问题，而 FB 会从我们的侧边栏中选择 300x600 横幅广告，而完全忽略 og:image。当我将原始图像文件更改为 700x300 时，它工作正常。

我想这很快就会改变，但现在（2013 年 3 月）它似乎有效。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-15T19:52:49.007

我已经通过使用 Facebook URL 调试器强制刷新**规范 URL 的缓存来解决这个问题。**这就是诀窍。我试图刷新一个不是确切规范 URL 的 URL（它缺少尾部正斜杠）。一旦我获取了正确 URL 的新元数据，一切都会正确解析和显示。

# java - 如何在 JavaFX 中的两个节点之间为 2D 曲线箭头设置动画

> ID：15421527
> 
> 赞同：2
> 
> 时间：2013-03-14T22:36:50.023
> 
> 标签：java, animation, javafx-2, shape, java-2d

我正在我的项目中处理 SVGPaths（从 Shape 类扩展），此外，我正在努力提高自己对 JavaFX 中动画的了解。问题是，我想在两个节点之间创建 2D 弯曲箭头动画。在这里，您可以看到我的地图样本包括国家（换句话说，节点/形状），以便您更清楚。

![地图](../Images/676d08e0e37e354a3ea0d6c66c59b797.png)

因此，请考虑每当鼠标光标位于节点上方时，2d 箭头将开始动画以指向邻国。而且，箭头看起来像这样；

![箭](../Images/6c6bce3e4db5d5645eeda9a81d29e5ef.png)

我研究了互联网并阅读了一些关于 JavaFX 动画的教程，但找不到清晰的东西。无论如何，我将感谢每一个答案并感谢。

编辑：最后我实现了一个关于在两个矩形的中点之间旋转箭头的正确动画。这是简单的源代码；

```
Rectangle rect1 = new Rectangle(71, 64, 31, 21); // Create first rectangle
Rectangle rect2 = new Rectangle(158, 64, 35, 21); // Create second rectangle

rect1.setVisible(false);
rect2.setVisible(false);

worldMap.getChildren().add(rect1); // add both of them in to the Group Layout
worldMap.getChildren().add(rect2);

Path path = new Path(); // Create the oath object which arrow will rotate on

MoveTo moveTo = new MoveTo();

moveTo.setX( rect1.getX()+ (rect1.getWidth()/2) );
moveTo.setY( rect1.getY()+ (rect1.getHeight()/2) );

QuadCurveTo quadCurveTo = new QuadCurveTo(); 

quadCurveTo.setX( rect2.getX()+(rect2.getWidth()/2) );
quadCurveTo.setY( rect2.getY()+(rect2.getHeight()/2) );
quadCurveTo.setControlX( ( rect1.getX()+rect2.getX() ) /2 );
quadCurveTo.setControlY( ( rect1.getY()-50) );

path.getElements().add(moveTo);
path.getElements().add(quadCurveTo);
path.setStrokeWidth(3); 
path.setStroke(Color.BLACK);
path.setMouseTransparent(true);

final Polygon arrow = new Polygon(); // Create arrow

arrow.getPoints().addAll(new Double[] {50.0,50.0,70.0,50.0,70.0,42.0,82.0,54.0,70.0,66.0,70.0,58.0,50.0,58.0});
arrow.setFill(Color.GREEN);

PathTransition pathTransition = new PathTransition(); //

pathTransition.setDuration(Duration.millis(750));
pathTransition.setPath(path);
pathTransition.setNode(arrow);
pathTransition.setOrientation(PathTransition.OrientationType.ORTHOGONAL_TO_TANGENT);
pathTransition.setCycleCount(Timeline.INDEFINITE);
pathTransition.setAutoReverse(true);
pathTransition.play(); 
```

现在我想创建一个动画，它提供箭头将从起点开始延伸直到它到达终点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:12:35.480

JavaFX 2D/3D 非常使用 JDK 8。

阅读[FXexperience中的示例](http://fxexperience.com/2013/02/javafx-3d-early-access-available/)

下载的 JKD 8 包括 3D。

[下载JDK8 http://jdk8.java.net](http://jdk8.java.net)

# xml - 基于另一个节点的值的 XPath 表达式选择元素

> ID：15421531
> 
> 赞同：3
> 
> 时间：2013-03-14T22:37:29.293
> 
> 标签：xml, xpath, xpath-2.0

使用下面的 XML，是否可以使用 XPath 表达式选择本地项目元素，其中具有相同代码的区域项目的金额在本地项目金额的 5% 以内？在此示例中，将选择本地项目 4。

```
<?xml version="1.0" encoding="UTF-8"?>

<Inventory> 
  <Local> 
    <Item> 
      <Code>1</Code>  
      <Amount>10000</Amount> 
    </Item>  
    <Item> 
      <Code>2</Code>  
      <Amount>20000</Amount> 
    </Item>  
    <Item> 
      <Code>3</Code>  
      <Amount>30000</Amount> 
    </Item>  
    <Item> 
      <Code>4</Code>  
      <Amount>40000</Amount> 
    </Item> 
  </Local>  
  <Regional> 
    <Item> 
      <Code>2</Code>  
      <Amount>100</Amount> 
    </Item>  
    <Item> 
      <Code>4</Code>  
      <Amount>39900</Amount> 
    </Item> 
  </Regional> 
</Inventory> 
```

到目前为止，我只能使用下面的表达式选择具有相同代码的本地项目，该表达式返回两个元素，但我似乎无法弄清楚如何将两个元素乘以 0.95，因为将“/Amount * 0.95”添加到这个表达式的结尾使它只返回第一个项目的数量乘以 0.95。

```
/Inventory/Local/Item[Code=/Inventory/Regional/Item/Code] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:01:58.613

你可以试试[`xquery`](http://www.w3schools.com/xquery/xquery_flwor.asp)：

### XQuery

```
for $x in doc("input.xml")//Local/Item
let $y:=doc("input.xml")//Regional/Item[Code=$x/Code]
where $y/Amount*0.95<=$x/Amount and $x/Amount<=$y/Amount*1.05
return $x 
```

### 在 shell 中测试

```
$ zorba -q 'for $x in doc("input.xml")//Local/Item let $y:=doc("input.xml")//Regional/Item[Code=$x/Code] where $y/Amount*0.95<=$x/Amount and $x/Amount<=$y/Amount*1.05 return $x' 
```

### 输出

```
<?xml version="1.0" encoding="UTF-8"?>
<Item> 
      <Code>4</Code>  
      <Amount>40000</Amount> 
</Item> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:04:17.903

我发现这个问题很有趣，过去一个小时一直在尝试解决它，

这是使用**XPATH 2.0**的解决方案：

```
for $x  in   /Inventory/Local/Item[Code=/Inventory/Regional/Item/Code],
    $y   in   /Inventory/Regional/Item[Code = $x/code]
      return  $x[Amount div 20 <= $y/Amount ] 
```

很确定这不能使用**XPath 1.0 表达式**来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:46:28.880

**XQuery 不需要指定所需的选择**。

**这是一个正确、更短且更高效的 XPath 2.0 表达式**：

```
for $locItem in /*/Local/*,
    $locAmount in $locItem/Amount,
    $fivePercent in $locAmount*0.05,
    $regItem in
    /*/Regional/Item
         [Code eq $locItem/Code
        and
         abs(Amount -$locAmount) le $fivePercent
         ]
 return $locItem 
```

**基于 XSLT 2.0 的验证：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:sequence select=
   "for $locItem in /*/Local/*,
        $locAmount in $locItem/Amount,
        $fivePercent in $locAmount*0.05,
        $regItem in
        /*/Regional/Item
             [Code eq $locItem/Code
            and
             abs(Amount -$locAmount) le $fivePercent
             ]
     return $locItem"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Inventory>
  <Local>
    <Item>
      <Code>1</Code>
      <Amount>10000</Amount>
    </Item>
    <Item>
      <Code>2</Code>
      <Amount>20000</Amount>
    </Item>
    <Item>
      <Code>3</Code>
      <Amount>30000</Amount>
    </Item>
    <Item>
      <Code>4</Code>
      <Amount>40000</Amount>
    </Item>
  </Local>
  <Regional>
    <Item>
      <Code>2</Code>
      <Amount>100</Amount>
    </Item>
    <Item>
      <Code>4</Code>
      <Amount>39900</Amount>
    </Item>
  </Regional>
</Inventory> 
```

**计算 XPath 表达式，并将计算结果复制到输出：**

```
<Item>
    <Code>4</Code>
    <Amount>40000</Amount>
</Item> 
```

# python - Python：获取 Lambda 函数的总和

> ID：15421534
> 
> 赞同：1
> 
> 时间：2013-03-14T22:37:44.450
> 
> 标签：python, math, lambda

我正在尝试使用 lambda 函数在 Python 中获得低于 2,000,000 的所有质数的总和。（我已经暴力破解了，但这需要的时间太长了，我想要一个更好的解决方案。）这是我目前所拥有的：

```
def isPrime(n):
    for x in range(2, int(n**0.5)+1):
        if n%x==0: return False
    return True

print reduce(lambda x: isPrime(x), [range(200)]) 
```

现在，这只是打印从 1 到 200 递增的数字，所以我认为 reduce 不起作用=\

有人有任何提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:44:21.013

您的代码发生了一些奇怪的事情。

*   我认为您实际上想要使用[`filter()`](http://docs.python.org/2/library/functions.html#filter)，而不是[`reduce()`](http://docs.python.org/2/library/functions.html#reduce).
*   `lambda x: isPrime(x)`等价于`isPrime`（毕竟`isPrime`已经是返回结果的函数了`isPrime`）。
*   `[range(200)]`创建一个嵌套列表。外部列表中唯一的元素是数字从 0 到 200 的列表。我认为您只需要单个列表。

因此，请尝试以下操作：

```
print filter(isPrime, range(200)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T22:46:35.603

这里有很多问题。第一个是您可以`lambda x: isPrime(x)`简单地替换为`isPrime`。函数是 Python 中的第一类，这意味着您可以像传递整数或字符串一样传递它们。第二个是您正在传递一个列表列表；`[range(200)]`是一个包含`range(200)`范围返回值的列表，返回一个列表，因此您只减少一个值。这解决了第三个问题，即您的reduce 函数应该接受2 个参数，因为reduce 调用该函数作为时间传递给成对的项目。实际上，只有一个项目，因此该函数被调用 0 次，并返回列表中的第一个项目。

我怀疑您想要做的是过滤列表，您可以使用该`filter`函数来执行此操作，也可以使用如下所示的列表理解：

```
[x for x in range(200) if isPrime(x)] 
```

# ios - 我可以强制 iOS Safari 识别手持媒体查询吗？

> ID：15421536
> 
> 赞同：0
> 
> 时间：2013-03-14T22:38:01.783
> 
> 标签：ios, css, safari, media-queries

干净利落。如何强制 iOS Safari 识别这一点？

```
BUTTON {
    padding: 0 0.5em; /* To conserve screen space on point-and-click interfaces */
}

@media handheld {
    BUTTON {
        padding: 1em 2em; /* So fingers can more easily touch it */
    }
} 
```

我已经阅读了[如何强制 iPhone 的 Safari 使用 media="handheld"？](https://stackoverflow.com/questions/2123091/how-can-i-force-iphones-safari-to-use-media-handheld)，但这是 3 年前提出的。在当今 HTML5 和 CSS3 合规性以及标准被如此容易接受的时代，我希望 Apple 在 iOS Safari 中加入一些东西，以便能够在 iPhone 现在相对较小的屏幕上处理手持媒体查询。

我尝试使用精确值，例如`screen and (max-width: 5in)`，但显然它认为它的屏幕比 5 英寸宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:48:09.620

您可以将此目标用于特定的设备宽度。

```
 @media only screen and (max-device-width: YourDeviceWidth){

       //Styles for this device width here.
    } 
```

或者你可以为 Iphone+Ipad 使用设备纵横比：

iPhone < 5:

```
 @media screen and (device-aspect-ratio: 2/3) {
        } 
```

iphone 5：

```
 @media screen and (device-aspect-ratio: 40/71) {
        } 
```

平板电脑：

```
 @media screen and (device-aspect-ratio: 3/4) {
        } 
```

# iis-7 - 如何在 WIX 中为 IIS6 而不是 IIS7 创建匿名用户？

> ID：15421540
> 
> 赞同：0
> 
> 时间：2013-03-14T22:38:29.547
> 
> 标签：iis-7, wix, installation, iis-6, wix3.5

我正在升级为 IIS6 制作的旧 WiX 安装程序，以便在 IIS7 中工作。我们创建了一个匿名用户并将该用户分配给 WorkerProcessGroup，但是，在 IIS7 中这不是必需的，并且安装程序无法将用户添加到组，因为 IIS_WPG 不存在。

我可以通过放置来使用户的创建有条件：

```
<Condition><![CDATA[(INETSTPMAJORVERSION = "#6")]]></Condition> 
```

就在用户组件的正上方，但还有另一部分会创建虚拟目录，然后失败：

```
<iis:WebVirtualDir ...
    <iis:WebDirProperties ...
        AnonymousUser="IusrThatIWasSupposedToMakeButDidntBecauseItsIIS7" 
```

WiX 不会采用“iis:WebDirProperties”上方的“Condition”，但会采用“iis:WebVirtualDir”上方的“Condition”。问题是，该标签中有很多设置（280 行），我不想复制/粘贴整个内容以获得单独的条件。

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:00:01.463

您最好的选择是在`Condition`元素下添加`Component`元素。抱歉，目前无法将相同的条件应用于许多组件。

# webmatrix - ModelState.AddFormError("无法登录") 的 CSS 样式

> ID：15421545
> 
> 赞同：0
> 
> 时间：2013-03-14T22:38:47.353
> 
> 标签：webmatrix, modelstate

我想设置“无法登录”的错误消息的样式，但我不知道如何在 css 中标记它？提前致谢。我正在使用 webmatrix 2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T04:26:58.067

我希望你有一个代码来显示。但我会想象你打算将 css 注入失败的登录。

```
if(!Validation.IsValid()){
  <style type="text/css">
      /*Style the error class here */
  </style>
} 
```

# sql - 从一对年/月值中减去 4 个月

> ID：15421547
> 
> 赞同：0
> 
> 时间：2013-03-14T22:38:57.820
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我想减去4个月，期间定义为年月：

```
UPDATE [MAS_YCA].[dbo].[temp_AR_SalesPersonhistory]
SET FiscalYear = year(DATEADD(month,-4,DATEADD(DAY,-1,DATEADD(month,cast(FiscalPeriod as Int),DATEADD(year,cast(FiscalYear as Int)-1900,0))))),
FiscalPeriod = right('00'+cast(month(DATEADD(month,-4,DATEADD(DAY,-1,DATEADD(month,cast(FiscalPeriod as Int),DATEADD(year,cast(FiscalYear as Int)-1900,0))))) as varchar),02)
GO 
```

我得到的错误是`Adding value to a datetime column caused an overflow.`

字段会计年度和期间在数据表中都定义为 varchar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:51:12.637

听起来您需要检查 FiscalYear 和 FiscalPeriod 列中的数据。最有可能的是，您的会计年度列中的年份无效。

SQL Server 中的日期范围是 1753 年 1 月 1 日到 9999 年 12 月 31 日。因此，在此之外的任何年份都会导致您的错误。

一个简单的检查（编辑，添加空字符串和空字符串情况）：

```
Select * from [MAS_YCA].[dbo].[temp_AR_SalesPersonhistory]
where cast(FiscalYear as Int) > 9999 or cast(FiscalYear as Int) < 1753
or FiscalYear is NULL or FiscalYear = '' 
```

# php - 如何在使用诸如 FireBug 之类的工具时从 div 跟踪 HTML 的来源，以便我可以在后端对其进行更改？

> ID：15421559
> 
> 赞同：1
> 
> 时间：2013-03-14T22:39:49.693
> 
> 标签：php, html, templates, firebug, buddypress

我承认这可能是一个非常基本的问题。我对此很陌生。

...但是例如。我在stackoverflow上检查了“问题”按钮。它向我展示了：

```
<html>
    <head>
    <body class="ask-page">
        <noscript><div id="noscript-padding"></div></noscript>
        <div id="notify-container"></div>
        <div id="overlay-header"></div>
        <div id="custom-header"></div>
        <div class="container">
         <div id="header">
         <div id="portalLink">
         <div id="topbar">
         <br class="cbt">
         <div id="hlogo">
         <div id="hmenus">
             <div class="nav mainnavs">
              <ul>
               <li>
                <a id="nav-questions" href="/questions">Questions</a>
               </li> 
```

我如何确定将其应用于后端站点的位置？我要寻找什么模板或文件？我正在专门与 BuddyPress 合作。他们使用 .php 模板。但我只是通过 FireBug 查看 div 的 css/html 不知道来源。

谢谢你陪我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:26:34.563

您无法仅通过查看 HTML 来判断是哪个模板生成了 HTML。

如果页面上有一些独特的文本，您*可能*能够通过使用`grep`. 但是许多模板软件几乎将网页的*所有文本都存储在数据库中。*数据库中的文本不会暴露给`grep`.

由于 WordPress 将网站的几乎*所有*文本都存储在数据库中，因此您必须更加努力。我建议从[WordPress 基础](http://www.prelovac.com/vladimir/wordpress-fundementals-for-newbies)开始。由于您本质上是这种情况下的用户，因此请先仔细研究主题。在核心、插件和主题的 WordPress 架构中，主题比核心和插件更接近用户。

不要错过 StackExchange 的[Wordpress](https://wordpress.stackexchange.com/)网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:26:47.580

我有时只是在我的编辑软件中使用查找功能。它在大多数主要程序（如 Visual Studio 和 Dreamweaver）中都可用，并且将搜索文件夹中的任意数量的文件以找到您的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T23:33:20.800

为了获得要编辑的正确主题文件以获取差异，我通常会搜索应该只是在该页面中的内容，例如具有特定 ID 的 div 或脚本。

我还使用了一个名为“Firediff”的 Firebug 扩展，它允许我跟踪我在 HTML 或 CSS 中所做的所有更改，以便我可以重现它们：[firediff](https://addons.mozilla.org/en-us/firefox/addon/firediff/)

# ios - Facebook FBOpenGraphAction 用户消息不起作用

> ID：15421562
> 
> 赞同：1
> 
> 时间：2013-03-14T22:40:01.247
> 
> 标签：ios, objective-c, facebook-graph-api, facebook-opengraph

我将照片作为打开的图形对象上传，然后在它返回 URL 后将其绑定到我的打开图形操作中。

到目前为止一切正常，但***我无法获得自定义用户消息“TEST TEST TEST TEST！” 露面。*** 我一直在从各个角度解决这个问题，但似乎无法确定它。有任何想法吗？

![在此处输入图像描述](../Images/323f7c9cc29bd91d72f8739144c4a2d0.png)

```
 - (void)postPhotoThenOpenGraphAction {

        FBRequestConnection *connection = [[FBRequestConnection alloc] init];

        // First request uploads the photo.
        FBRequest *request1 = [FBRequest requestForUploadPhoto:[UIImage imageWithData:[NSData dataWithContentsOfFile:picture.pathSmall]]];

        [connection addRequest:request1 completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

            if (!error) {
            } else {
                [self showFacebookFailedError];
            }
        }
                batchEntryName:@"photopost"];

        // Second request retrieves photo information for just-created
        // photo so we can grab its source.
        FBRequest *request2 = [FBRequest requestForGraphPath:@"{result=photopost:$.id}"];

        [connection addRequest:request2 completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

             if (!error && result) {

                 NSString *source = [result objectForKey:@"source"];
                 [self postOpenGraphActionWithPhotoURL:source];

             } else {
                 [self showFacebookFailedError];
             }
         }
         ];

        [connection start];

       }

    - (void)postOpenGraphActionWithPhotoURL:(NSString*)photoURL {

        id<PTOGPicture> photoGraphObject = [self pictureObjectForPicture:self.picture];
        id<PTOGSharePicture> action = (id<PTOGSharePicture>)[FBGraphObject graphObject];

        action.photo = photoGraphObject;

        if (self.selectedPlace) {
            action.place = self.selectedPlace;
        }
        if (self.selectedFriends.count > 0) {
            action.tags = self.selectedFriends;
        }

        action.message = @"TEST TEST TEST TEST!";

        if (photoURL) {

            NSMutableDictionary *image = [[NSMutableDictionary alloc] init];

            [image setObject:photoURL forKey:@"url"];

            NSMutableArray *images = [[NSMutableArray alloc] init];
            [images addObject:image];

            action.image = images;
        }

        // Create the request and post the action to the.
        [FBRequestConnection startForPostWithGraphPath:@"me/myappapp:share"
                                           graphObject:action
                                     completionHandler:^(FBRequestConnection *connection,
                                                         id result,
                                                         NSError *error) {
           //... code taken out for brevity

        }];
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:03:53.103

我有一个更简单的版本，可以满足您的需求：

首先，您根据需要创建您的操作对象：

```
- (void)shareOnFacebook {
    NSMutableDictionary<FBGraphObject> *action = [FBGraphObject graphObject];
    action[@"<OPEN_GRAPH_OBJ>"] = obj;
    action[@"image[0][url]"] = url;
    action[@"image[0][user_generated]"] = @"true";
    action[@"message"] = @"some message here";

    [FBRequestConnection startForPostWithGraphPath:@"me/<app_namespace>:<action>" graphObject:action completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    }];
} 
```

但是，要使其正常工作，您必须在操作设置页面上设置这两个权限：

![在此处输入图像描述](../Images/11adae52bfdcf47d2ee97da9353f46e6.png)

我希望它有所帮助。

# c# - 如何编码登录到站点、单击按钮，然后与下一页交互？

> ID：15421564
> 
> 赞同：0
> 
> 时间：2013-03-14T22:40:15.183
> 
> 标签：c#, .net

我正在尝试通过代码登录供应商的网站，然后在登录页面后加载的页面上按“用户确认”按钮，然后从第三页下载文件。

有没有人有以编程方式登录页面然后与第二页交互的示例？

我找到了很多允许我通过代码登录网站的示例，但是我没有看到任何关于登录后与页面交互的内容（我将在第二页上触发一个按钮作为“用户确认” ）。

我正在寻找的代码示例需要用于 .Net（C# 或 VB.Net）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:39:07.987

如果我正确理解你，你可以使用`web browser control`这个，所以我为你写了一个简单的例子：

```
 public Form1()
        {
            InitializeComponent();
            //navigate to you destination 
            webBrowser1.Navigate("https://www.certiport.com/portal/SSL/Login.aspx");
        }
        bool is_sec_page = false;
        private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            if (!is_sec_page)
            {
                //get page element with id
                webBrowser1.Document.GetElementById("c_Username").InnerText = "username";
                webBrowser1.Document.GetElementById("c_Password").InnerText = "pass";
                //login in to account(fire a login button promagatelly)
                webBrowser1.Document.GetElementById("c_LoginBtn_c_CommandBtn").InvokeMember("click");
                is_sec_page = true;
            }
            //secound page(if correctly aotanticate
            else
            {
                //intract with sec page elements with theire ids
            }

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:39:23.443

我如何做类似的事情是将第二页的处理程序放在一个事件处理程序中，该处理程序在第一页完全加载时运行。不过，我只做得到。

# javascript - 使用 this.constructor from 构造函数调用访问静态属性时是否存在兼容性问题？

> ID：15421567
> 
> 赞同：0
> 
> 时间：2013-03-14T22:40:26.930
> 
> 标签：javascript, cross-browser

我想在初始化期间使用构造函数的静态属性，如下所示：

```
var MyConstructor = function() {
  this.foo = 'foo';
  this.set_bar();
}

MyConstructor.bar = "bar";

MyConstructor.prototype = {
  set_bar: function() {
    this.bar = this.constructor.bar;
  }
}

var myObj = new MyConstructor(); 
```

这似乎在新浏览器中工作得很好，但在旧浏览器中它会失败吗？我在 Google 上找不到这个问题。我想知道是否某些浏览器`this.constructor`在构建后设置，使得该属性在构建期间不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:46:35.173

没有设置属性，它们是在对象上查找的。如果属性不在对象上，则在对象的原型对象上查找。如果不在对象的原型对象上，则在对象的原型对象的原型对象上查找，依此类推。

您的代码无法按预期工作，因为`MyConstructor.prototype =`覆盖了具有正确构造函数的默认原型对象。所以`MyConstructor.prototype`没有`constructor`属性，也没有`myObj`。所以`this.constructor === Object`，不是`MyConstructor`。`Object.bar`是`undefined`，因此也是`myObj.bar`。

修复方法是扩展默认原型而不是覆盖，或者重新插入构造函数：

```
MyConstructor.prototype = {
    set_bar: function() {
        this.bar = this.constructor.bar;
    },

    constructor: MyConstructor
} 
```

# javascript - 将数据传递给子模板

> ID：15421581
> 
> 赞同：1
> 
> 时间：2013-03-14T22:41:35.493
> 
> 标签：javascript, ember.js, ember-data

如何从子模板访问数据？

例如，她是我的路由器：

```
App.Router.map(function() {
    this.resource("users", function(){
        this.route('new');
    });
    this.resource("user", {path: '/users/:user_id'}, function(){
        this.route('edit');
    });
}); 
```

路线：

```
App.UsersIndexRoute = Ember.Route.extend({
    model: function() {
        return App.User.find();
    }
}); 
```

单用户模板：

```
<script type="text/x-handlebars" data-template-name="user">
    <h2>{{name_full}} is the username on the resource template</h2>
    {{ outlet }}
</script> 
```

单用户索引模板：

```
<script type="text/x-handlebars" data-template-name="user/index">
    <h2>{{name_full}} is the username on the index page.</h2>
    {{#linkTo users}}Back to All Users{{/linkTo}}
</script> 
```

我了解单用户模板如何访问用户对象，但是如何授予子路由访问权限？

我已经访问了[Ember Router Guides](http://emberjs.com/guides/routing/defining-your-routes/#toc_nested-resources)，但这对我来说仍然不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T00:04:38.987

要授予子路由访问权限，您需要定义 UsersIndexRoute 并从其模型挂钩返回用户。所以：

```
App.UserIndexRoute = Ember.Route.extend({
  model: function() {
    return this.modelFor("user");
  }
}); 
```

modelFor 将查找指定路由的当前模型，它可以是任何东西，但在这种情况下恰好是父模型。

# web-services - 使用 ServiceStack 访问 SOAP Web 服务

> ID：15421585
> 
> 赞同：4
> 
> 时间：2013-03-14T22:41:44.620
> 
> 标签：web-services, soap, servicestack

我正在创建与 ServiceStack 的客户端/服务器应用程序互通，并且运行良好，但我还需要访问外部 SOAP Web 服务。

我尝试使用`Soap12ServiceClient`来访问它，但找不到任何示例，然后我采用了实际有效的添加服务引用 WCF 方式，但创建了大量代码。

是否可以使用与发送消息/请求和接收消息/响应`Soap12ServiceClient`相同的简单方式？`JsonServiceClient`如果是这样，你能帮忙或给我一个样本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:57:22.610

我不确定你在哪里卡住了，因为所有[ServiceStack 的 C# 服务客户端](https://github.com/ServiceStack/ServiceStack/wiki/C%23-client)都实现了相同的`IServiceClient`，因此它们可以以相同的方式使用。[这是一个调用相同 Hello World 服务](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.IntegrationTests/Tests/HelloWorldServiceClientTests.cs)的所有 ServiceStack 的内置 C# 服务客户端的示例：

```
[TestFixture]
public class HelloWorldServiceClientTests
{
    public static IEnumerable ServiceClients
    {
        get
        {
            return new IServiceClient[] {
                new JsonServiceClient(Config.ServiceStackBaseUri),
                new JsvServiceClient(Config.ServiceStackBaseUri),
                new XmlServiceClient(Config.ServiceStackBaseUri),
                new Soap11ServiceClient(Config.ServiceStackBaseUri),
                new Soap12ServiceClient(Config.ServiceStackBaseUri)
            };
        }
    }

    [Test, TestCaseSource("ServiceClients")]
    public void HelloWorld_with_Sync_ServiceClients(IServiceClient client)
    {
        var response = client.Send<HelloResponse>(new Hello { Name = "World!" });

        Assert.That(response.Result, Is.EqualTo("Hello, World!"));
    }
} 
```

尽管 SOAP 与任何其他 C# 客户端的工作方式相似，但以这种方式使用它并不常见，因为如果您能够使用通用 C# SOAP 服务客户端，您也可能能够使用任何其他服务客户端所有这些都比 SOAP 更快、更有弹性和更可版本化 - 除了能够生成您说您无论如何都不想做的客户端代理之外，它实际上没有其他格式的可取之处。

如果您不确定应该使用哪种端点或格式，我[建议您阅读我在 InfoQ 上的采访，](http://www.infoq.com/articles/interview-servicestack)其中讨论了 SOAP 的缺点和使用其他格式的好处。

# html - 如果 HTTP 是超文本传输 协议，我们如何上传文档和图像？

> ID：15421587
> 
> 赞同：7
> 
> 时间：2013-03-14T22:41:55.620
> 
> 标签：html, http, tcp, computer-science

据我了解，`HTTP`代表超文本传输​​协议，您可以在其中以文本格式向/从网络服务器传输/接收数据。如果是这种情况，我们如何能够将文档/图像提交或上传到网络服务器？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T23:23:01.037

`HTTP`如您所述，表示超文本传输​​协议。HTTP 在客户端服务计算机中用作请求-响应协议。这意味着当您使用计算机上的网络浏览器（客户端 - 例如 Firefox 或 Chrome）进行导航时，您正在从该网站请求信息。

回答您的问题：一切都以`bytes`. 一组单词由一串字节组成，一个word文档是一串字节，而一张图片，你猜对了，是一串字节。HTTP 是浏览器与服务器通信的方式，使用特定命令，用户可以将他们的数据（他们的字节串）提交给服务器。

从历史上看，一个字节是`bits`用于在计算机中对单个文本字符进行编码的数量。*简单来说*，所有数据都由字节组成，并且是`HTTP`您可以将这些字节从 A 传输到 B 的一种方式。其他方式包括`FTP`、`POP3`和。`UDP``TCP/IP`

*非常*简单地说，HTTP 通过向服务器发送和从服务器接收命令来工作。客户端和服务器之间请求-响应的两种常用方法是`GET`和`POST`。GET 请求从指定的资源请求数据（以字节为单位），而 POST 将要处理的数据提交到指定的资源（也以字节为单位）。然后，您的计算机会将这些字节转换为可理解的格式 - 例如：

1.  您导航到网站上的图像（下载）。浏览器识别它是一个图像（通过多种方式，但现在，我们会说图像是一个`.png`文件）。您的浏览器识别出它有要下载的图像，并在图像标签之间转换这些字节以将其呈现为图像。然后您会看到您的图像加载到屏幕上（快乐！）。

2.  您将 Word 文档上传到网站。HTTP 向服务器发送附有文档的 POST 请求，并将文档作为字节字符串发送。然后，服务器会将其放在您或它指定的位置，并且您已将 Word 文档（一长串字节）上传到服务器。

所以，长话短说，一切都转换为`bytes`. 位于您计算机上的文档和从网站下载的图像都包含不同的字节数和组合。

我真的没有任何计算机科学学位，并且已经尝试解释这一点。但是，您可以从以下链接中找到更多信息：

[HTTP 方法 - GET 与 POST](http://www.w3schools.com/tags/ref_httpmethods.asp)

[字节——信息存储单元](http://en.wikipedia.org/wiki/Byte)

[网络协议列表](http://en.wikipedia.org/wiki/List_of_network_protocols)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T00:30:46.383

HTTP 允许您使用`Content-Type`标头指定要传输的数据类型。内容*不一定是*文本，但可以是任何字节流。

```
HTTP/1.1 200 OK
Server: carrier pigeon
Content-Type: image/jpeg
Date: today

...contents... 
```

HTTP 标头、请求消息和响应消息都是纯文本，但内容不一定是文本。

HTTP 的原始版本不支持标头，因此没有可靠的方法来区分文本和图像。当 HTTP 1.0 到来时，H​​TTP 不再只是用于传输超文本，但名称已经卡住了。

# php - 一个while循环PHP SQL中的substr

> ID：15421590
> 
> 赞同：0
> 
> 时间：2013-03-14T22:42:02.077
> 
> 标签：php, substr

我不得不求助于在这里发帖，完全迷失了这个！

我有一个可以成功打印的数组，但我需要限制打印字符的方式。我知道这可以用 substr 来完成，但是我似乎无法将 substr 放在我需要限制的值上。

我理解在一行中使用 $variable = substr ，但是我无法使用我正在使用的数组来实现，并且我已经搜索了所有可能澄清我的问题但遗憾的是无济于事的文档。

下面是代码，在本例中是数组 $info 和值 .info['post_content']。

```
 mysql_connect("localhost", "xxxxxxxx", "xxxxxxx") or die(mysql_error()); 
 mysql_select_db("xxxxxxxxx") or die(mysql_error()); 
 $data = mysql_query("SELECT * FROM posts WHERE hushfeed_showon = 1") 
 or die(mysql_error()); 
    } 

 while($info = mysql_fetch_array( $data )) 
 { 

echo "<div>
<ul class='blocks-thumbs thumbs-rollover'>
    <li>
        <a href='single.html' class='thumb' title='An image'><img src='img/dummies/282x150.gif' alt='Post' /></a>
        <div class='excerpt'>
            <a href='dnb/a_Post.php?postid=".$info['postid']."' class='header'>".$info['post_title'] ."</a>
            <p class='para1'>" .$info['post_content']."</p>

        </div>
        <a href='single.html' class='link-button'><span>Read more &#8594;</span></a>
    </li>

</ul>
</div>";

} 
```

我正在苦苦挣扎，因为我找不到任何关于在回声“.$.”期间使用期间的信息。

如果有人能阐明我应该专注于处理这个 substr 的地方，那将不胜感激！

谢谢！

斯图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:45:41.760

```
<?php
echo "[...]<p class='para1'>" . 
      (strlen($info['post_content'])>200? 
          substr( $info['post_content'],0,200)."...": 
          $info['post_content']).
      "</p>[...]"; 
```

和简单的版本：

```
 <?php
echo "[...]<p class='para1'>" . substr( $info['post_content'],0,200) . "</p>[...]"; 
```

# node.js - 每个请求都转储非常大的对象

> ID：15421591
> 
> 赞同：0
> 
> 时间：2013-03-14T22:42:02.687
> 
> 标签：node.js, express

我有一个使用 express.js 编写的应用程序。当我在笔记本电脑上运行应用程序时，对于每个请求，我都会看到一个非常大的对象作为 JSON 转储到控制台。它像这样开始并持续了许多行：

```
{ domain: null,
  _events: null,
  _maxListeners: 10,
  socket:
   { domain: null,
     _events:
      { drain: [Function: ondrain],
        timeout: [Object],
        error: [Function],
        close: [Object] },
     _maxListeners: 10,
     _handle:
      { writeQueueSize: 0,
        owner: [Circular],
        onread: [Function: onread] },
     _pendingWriteReqs: 0,
     _flags: 0,
     _connectQueueSize: 0,
     destroyed: false,
     errorEmitted: false,
     bytesRead: 483,
     _bytesDispatched: 0,
     allowHalfOpen: true,
     writable: true,
     readable: true,
     server: 
```

奇怪的是，完全相同的代码不会在我的电脑上执行此操作。我想这本身不是错误，但这意味着我在终端中看不到任何有用的输出。我不知道为什么我会得到这个输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:14:07.587

我通过删除项目中的 node_modules 目录并运行 npm install 重新下载所需的模块来解决问题。显然其中一个模块有问题。

# java - ServerSocket + 客户端 Socket - 如何获取客户端的 IP 地址？

> ID：15421592
> 
> 赞同：5
> 
> 时间：2013-03-14T22:42:04.903
> 
> 标签：java, sockets, serversocket

我有一个正在监听连接的 ServerSocket 实例。当客户端连接到它时，我想获取已连接套接字的 IP，但似乎找不到正确的方法。

```
public void start() {
    listenSocket = new ServerSocket(port);
    connectionSocket = listenSocket.accept();
} 
```

我试过调用以下命令，但没有成功：

```
connectionSocket.getLocalAddress();
connectionSocket.getInetAddress.getHostAddress();
listenSocket.getLocalSocketAddress(); 
```

以上都没有返回正确的IP。它们要么返回“/0:0:0:0:0:0:0:1%0”，要么返回“0.0.0.0”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T22:45:14.803

```
connectionSocket.getRemoteSocketAddress(); 
```

# html - Css链接搞砸了

> ID：15421597
> 
> 赞同：0
> 
> 时间：2013-03-14T22:42:50.787
> 
> 标签：html, css

我刚开始使用 CSS，在为链接添加颜色时遇到了一些麻烦。当我添加链接颜色时它不起作用，所以我尝试自己修复它，但只会让我的网站更加混乱。这是我的代码。

```
<html>
    <head>
    <title> website </title>
    </head>
    <style type="text/css">
body 
    {
      background-color:#474747;
      color:#e1e1e1;
      font-family:"Courier New";
      text-align:center;
    {
      a:link
    {
      color:#00FFFF;}    /* unvisited link */
      a:visited
    {
      color:#4DFF4D;} /* visited link */
      a:hover
    {
      color:#00FFFF;}   /* mouse over link */
      a:active
    {
      color:#00FFFF;}  /* selected link */
    }
h1
    {
      font-size:40;
    }
h3
    {
      font-size:20;
      text-decoration:underline;
    }
p
    {
      font-size:12;
    }
    </style>
    <body>
    <h1> heading </h1>
    <hr size="3" color="red" />
    <h3>Welcome!!!</h3>
    <p>Welcome to my website!</p>
    <h3>Links</h3>
    <p><a href="http://www.youtube">Youtube</a></p>
    </body>
</html> 
```

它是在 Html 代码中还是在 Css 编码中？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:45:07.080

首先正确地关闭你的牙套，让我们知道这是怎么回事

```
body 
{
    background-color:#474747;
    color:#e1e1e1;
    font-family:"Courier New";
    text-align:center;
{ 
```

应该

```
body 
{
  background-color:#474747;
  color:#e1e1e1;
  font-family:"Courier New";
  text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:50:03.447

有一个命令可以对锚伪状态进行样式化。

```
a, a:link, a:visited {
    /* any links, unvisited links, visited links*/
}
a:hover, a:visited:hover, a:active, a:focus {
    /* any links hovered, any links already visited hovered, any links with active state (mouseDown or actual page), any links that has browser focus */
}
a:focus {
    /* maybe you want to remove outline for this one */
} 
```

当然，在清理你凌乱的 .css 之后试试这个

# opencl - 我可以假设所有平台上 OpenCL 中第一个工作组的本地 ID 等于全局 ID

> ID：15421602
> 
> 赞同：3
> 
> 时间：2013-03-14T22:43:18.017
> 
> 标签：opencl

我可以假设这`get_local_id(0)`等于`get_global_id(0)`所有硬件/平台上 OpenCL 中的第一个工作组吗？

问题是，如果生成的每个工作项`0,1,2,3,4,5,6,7`在全局空间中都被赋予 id，然后`0,1,2,3 | 0,1,2,3`在本地空间中被赋予 id。

或者它可能是本地空间，`0,2,4,6 | 1,3,5,7`. 在哪里 | 在此示例中拆分两个工作组，即两个工作组和 8 个工作项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T22:59:20.277

这在[OpenCL 1.2 规范](http://www.khronos.org/registry/cl/specs/opencl-1.2.pdf)的第 3.2 节（执行模型）中进行了描述，但稍后在第 6.12.1 节（工作项功能）中未提及。

```
global_id(d) = global_offset(d) + local_id(d) + group_id(d) * local_size(d)
global_size(d) = local_size(d) * num_groups(d) 
```

如果 global_offset 为 (0,0,0)，则您的假设是正确的。

# php - 如何保留访问令牌

> ID：15421604
> 
> 赞同：0
> 
> 时间：2013-03-14T22:43:21.733
> 
> 标签：php, facebook-authentication

我想制作简单的 fb 应用程序，但我找不到应该如何保存访问令牌。我的意思是，当用户登录时，我得到了 60 天的访问令牌，而且它很酷，但是如果用户更改密码怎么办？验证访问令牌并获得新令牌的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:46:41.817

Facebook 在他们的博客上有一篇文章可以帮助你打电话`How-To: Handle expired access tokens`

来源：[https ://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/](https://developers.facebook.com/blog/post/2011/05/13/how-to--handle-expired-access-tokens/)

# php - 为分页、排序和过滤器创建 URL - ZF

> ID：15421605
> 
> 赞同：1
> 
> 时间：2013-03-14T22:43:30.593
> 
> 标签：php, zend-framework, url, url-rewriting, zend-router

我所有正在阅读本文的人，

5分钟前我在网上，发现一个很不错的网址：

```
www.exemple.com/blog/rating.asc/2 
```

这与以下内容有关：

```
blog => controller/action/module or anything
rating => ordered by
asc => order of list
2 => current page 
```

我想知道如何使用`Zend_Controller_Router_Route`Zend Framework 类创建类似的 URL。

对于我的网站，它会是这样的：

```
www.exemple.com/portfolio/date.asc/2 
```

或者

```
www.exemple.com/blog/author.desc/ (page optional, default 1) 
```

和

```
www.exemple.com/blog/ (default order: date.asc, page: 1) 
```

**注意：**我对正则表达式不友好，所以我想禁止这样做，或者如果有人确切表达，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:02:33.303

嘿，我不确定您是否使用 ini 进行配置，但如果我有以下方法，我会这样做：

```
module     => blog
controller => article
action     => list
// Parameter to get from the request in the controller
// Note that those are the defaults in case you don't provide any parameters in the url
sortBy => author
order  => asc
page   => 1 
```

在ini文件中：

```
; /www.exemple.com/blog/articles/author/desc/2
resources.router.routes.whateverroutname.route = /blog/articles/:sortBy/:order/:page
resources.router.routes.whateverroutname.defaults.module = blog
resources.router.routes.whateverroutname.defaults.controller = article
resources.router.routes.whateverroutname.defaults.action = list
resources.router.routes.whateverroutname.defaults.sortBy = author
resources.router.routes.whateverroutname.defaults.order = asc
resources.router.routes.whateverroutname.defaults.page = 1 
```

希望这可以帮助 ：）

# assembly - 汇编代码，数据段中的剩余值

> ID：15421610
> 
> 赞同：0
> 
> 时间：2013-03-14T22:43:55.070
> 
> 标签：assembly, nasm, x86-16

我的程序遇到了一些小问题，我的程序应该使用重复加法将两个 1 字节整数相乘。

```
BITS 16         ;Set code generation to 16 bit mode
ORG 0x0100      ;Set code start address to 0100h

SEGMENT .text       ;Main code segment

Main:
    mov CX,[num2]                                                    
    mov AX,00
Sum:
    add AX,[num1]
    dec CX
    cmp CX,0
    je Terminate
    jmp Sum

Terminate:
    mov DL,AL
    mov AX,4C00H
    int 21H

SEGMENT .data       ;Initialised data segment
    num1 db 4
    num2 db 3 
```

问题是当我调试我的代码时，初始值（num2）输入到CX很好，但是当num1输入到AX时，仍然有一些来自num2的剩余数据。

例如。[调试](http://imgur.com/mfR83Nc)

正如您从图像中看到的那样，放入 CX (3) 的值可以正常工作，但不是将 4 放入 AX，而是放入 304。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:53:09.997

那是因为您将 16 位值加载到 AX 中，但您的 num1 值是一个字节。

做

```
 add al, [num1] 
```

反而。

# bash - ftp一堆文件从多个目录到一个目录

> ID：15421613
> 
> 赞同：1
> 
> 时间：2013-03-14T22:43:58.427
> 
> 标签：bash, shell, ftp, sh

我有一个打印所有 cpp 文件的命令

查找/-名称 *.cpp

我想将所有这些的结果 ftp 到我的 ftp 目录 /backup

我将如何将 ftp 命令与 find 命令合并以将所有 cpp 文件 ftp 到一个 ftp 目录中。抱歉，我对 ftp 命令处理很陌生，只知道基础知识，并且想找到答案，或者如果有人可以链接到一个很好的教程，我也会很感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T22:48:55.543

您可以使用`-exec`查找选项对匹配的每个文件执行操作。该`curl`命令可用于上传文件：

```
find / -type f -name '*.cpp' -exec curl -T {} ftp://somesite/somedir/ --user myname:mypassword \; 
```

# mysql - 在 mysql 中使用 group by 仅选择最后一个值

> ID：15421616
> 
> 赞同：18
> 
> 时间：2013-03-14T22:44:15.210
> 
> 标签：mysql, group-by

我有一张表，其中包含有关参加某些活动的数据。我在表中有每次用户发送新考勤的考勤数据，信息是这样的：

```
mysql> SELECT id_branch_channel, id_member, attendance, timestamp, id_member FROM view_event_attendance WHERE id_event = 782;
+-------------------+-----------+------------+------------+-----------+
| id_branch_channel | id_member | attendance | timestamp  | id_member |
+-------------------+-----------+------------+------------+-----------+
|              1326 |    131327 |        459 | 1363208604 |    131327 |
|              1326 |    131327 |        123 | 1363208504 |    131327 |
|              1326 |    131327 |          1 | 1363208459 |    131327 |
|              1326 |     93086 |          0 |       NULL |     93086 |
|              1326 |     93087 |          0 |       NULL |     93087 |
|              1326 |     93088 |          0 |       NULL |     93088 |
|              1326 |     93093 |          0 |       NULL |     93093 |
|              1326 |     99113 |          0 |       NULL |     99113 |
|              1326 |     99135 |          0 |       NULL |     99135 |
|              1326 |     99199 |          0 |       NULL |     99199 |
|              1326 |     99200 |          0 |       NULL |     99200 |
|              1326 |    131324 |          0 |       NULL |    131324 |
|              1326 |     85850 |          0 |       NULL |     85850 |
|              1326 |     93085 |          0 |       NULL |     93085 |
+-------------------+-----------+------------+------------+-----------+
14 rows in set (0.00 sec) 
```

（这实际上是一个视图，因此某些字段为空）。

我可以按 id_member 分组，因此每个成员只能获得一行（即，只有用户发送的最后一次出席）。但是，当我这样做时，我收到了用户发送的第一个出席信息，而不是最后一个。

```
mysql> SELECT id_branch_channel, id_member, attendance, timestamp, id_member FROM view_event_attendance WHERE id_event = 782 GROUP BY id_event,id_member;
+-------------------+-----------+------------+------------+-----------+
| id_branch_channel | id_member | attendance | timestamp  | id_member |
+-------------------+-----------+------------+------------+-----------+
|              1326 |    131327 |          1 | 1363208459 |    131327 |
|              1326 |     93086 |          0 |       NULL |     93086 |
|              1326 |    131324 |          0 |       NULL |    131324 |
|              1326 |     93087 |          0 |       NULL |     93087 |
|              1326 |     93088 |          0 |       NULL |     93088 |
|              1326 |     93093 |          0 |       NULL |     93093 |
|              1326 |     99113 |          0 |       NULL |     99113 |
|              1326 |     99135 |          0 |       NULL |     99135 |
|              1326 |     85850 |          0 |       NULL |     85850 |
|              1326 |     99199 |          0 |       NULL |     99199 |
|              1326 |     93085 |          0 |       NULL |     93085 |
|              1326 |     99200 |          0 |       NULL |     99200 |
+-------------------+-----------+------------+------------+-----------+
12 rows in set (0.00 sec) 
```

我已经尝试添加 ORDER BY 子句，但它们根本不起作用......有什么想法吗？

提前致谢！

**编辑**：这是创建表的脚本

```
CREATE OR REPLACE VIEW view_event_attendance 
    AS
        SELECT 
            tbl_event.id_event,
            tbl_member_event.id_member,
            tbl_event.id_branch_channel,
            tbl_member_event_attendance.id_member_event_attendance,
            IF(ISNULL(tbl_member_event_attendance.attendance), 0, tbl_member_event_attendance.attendance) AS attendance,
            tbl_member_event_attendance.timestamp
        FROM 
            tbl_event
            INNER JOIN 
                tbl_member_event ON tbl_member_event.id_event = tbl_event.id_event
                LEFT OUTER JOIN
                    tbl_member_event_attendance ON tbl_member_event_attendance.id_member_event = tbl_member_event.id_member_event
        ORDER BY 
            tbl_member_event_attendance.timestamp DESC; 
```

**编辑2：**

非常感谢 MichaelBenjamin，但是使用子查询时的问题是视图的大小：

```
mysql> DESCRIBE SELECT id_branch_channel, id_member, attendance, timestamp, id_member 
    -> FROM (select * from view_event_attendance order by timestamp desc) as whatever
    -> WHERE id_event = 782 
    -> GROUP BY id_event,id_member;
+----+-------------+-----------------------------+--------+-----------------+-----------------+---------+------------------------------------------------+-------+----------------------------------------------+
| id | select_type | table                       | type   | possible_keys   | key             | key_len | ref                                            | rows  | Extra                                        |
+----+-------------+-----------------------------+--------+-----------------+-----------------+---------+------------------------------------------------+-------+----------------------------------------------+
|  1 | PRIMARY     | <derived2>                  | ALL    | NULL            | NULL            | NULL    | NULL                                           | 16755 | Using where; Using temporary; Using filesort |
|  2 | DERIVED     | tbl_member_event            | index  | id_event        | id_event        | 8       | NULL                                           | 16346 | Using index; Using temporary; Using filesort |
|  2 | DERIVED     | tbl_event                   | eq_ref | PRIMARY         | PRIMARY         | 4       | video_staging.tbl_member_event.id_event        |     1 |                                              |
|  2 | DERIVED     | tbl_member_event_attendance | ref    | id_event_member | id_event_member | 4       | video_staging.tbl_member_event.id_member_event |     1 | Using index                                  |
+----+-------------+-----------------------------+--------+-----------------+-----------------+---------+------------------------------------------------+-------+----------------------------------------------+
4 rows in set (0.08 sec) 
```

如您所见，我的表中有很多行，因此我不想使用子查询...

**编辑 3：**

但是将 WHERE 添加到子查询中看起来更好......

```
mysql> DESCRIBE SELECT id_branch_channel, id_member, attendance, timestamp, id_member 
    -> FROM (select * from view_event_attendance where id_event = 782 order by timestamp desc) as whatever
    -> WHERE id_event = 782 
    -> GROUP BY id_event,id_member;
+----+-------------+-----------------------------+-------+-----------------+-----------------+---------+------------------------------------------------+------+----------------------------------------------+
| id | select_type | table                       | type  | possible_keys   | key             | key_len | ref                                            | rows | Extra                                        |
+----+-------------+-----------------------------+-------+-----------------+-----------------+---------+------------------------------------------------+------+----------------------------------------------+
|  1 | PRIMARY     | <derived2>                  | ALL   | NULL            | NULL            | NULL    | NULL                                           |   14 | Using where; Using temporary; Using filesort |
|  2 | DERIVED     | tbl_event                   | const | PRIMARY         | PRIMARY         | 4       |                                                |    1 | Using temporary; Using filesort              |
|  2 | DERIVED     | tbl_member_event            | ref   | id_event        | id_event        | 4       |                                                |   12 | Using index                                  |
|  2 | DERIVED     | tbl_member_event_attendance | ref   | id_event_member | id_event_member | 4       | video_staging.tbl_member_event.id_member_event |    1 | Using index                                  |
+----+-------------+-----------------------------+-------+-----------------+-----------------+---------+------------------------------------------------+------+----------------------------------------------+
4 rows in set (0.01 sec) 
```

如果我找不到其他不使用子查询的东西，我想我会选择这个作为答案......

**编辑 4**

在看到答案中的评论后，我决定选择另一个作为答案。这是两个查询的 DESCRIBE，我认为最好的解决方案是显而易见的：

```
mysql> DESCRIBE SELECT 
    ->   id_branch_channel,
    ->   id_member, 
    ->   attendance, 
    ->   timestamp,
    ->   id_member
    -> FROM view_event_attendance AS t1
    -> WHERE id_event = 782
    -> AND timestamp = (SELECT MAX(timestamp)
    ->                  FROM view_event_attendance AS t2 
    ->                  WHERE t1.id_member = t2.id_member 
    ->                    AND t1.id_event = t2.id_event 
    ->                  GROUP BY id_event, id_member)
    -> OR timestamp IS NULL
    -> GROUP BY id_event, id_member;
+----+--------------------+-----------------------------+--------+--------------------+--------------------------+---------+------------------------------------------------+------+-----------------------------------------------------------+
| id | select_type        | table                       | type   | possible_keys      | key                      | key_len | ref                                            | rows | Extra                                                     |
+----+--------------------+-----------------------------+--------+--------------------+--------------------------+---------+------------------------------------------------+------+-----------------------------------------------------------+
|  1 | PRIMARY            | tbl_event                   | index  | PRIMARY            | id_member_branch_channel | 4       | NULL                                           |  208 | Using index; Using temporary; Using filesort              |
|  1 | PRIMARY            | tbl_member_event            | ref    | id_event           | id_event                 | 4       | video_staging.tbl_event.id_event               |   64 | Using index                                               |
|  1 | PRIMARY            | tbl_member_event_attendance | ref    | id_event_member    | id_event_member          | 4       | video_staging.tbl_member_event.id_member_event |    1 | Using where; Using index                                  |
|  2 | DEPENDENT SUBQUERY | tbl_event                   | eq_ref | PRIMARY            | PRIMARY                  | 4       | func                                           |    1 | Using where; Using index; Using temporary; Using filesort |
|  2 | DEPENDENT SUBQUERY | tbl_member_event            | eq_ref | id_event,id_member | id_event                 | 8       | video_staging.tbl_event.id_event,func          |    1 | Using where; Using index                                  |
|  2 | DEPENDENT SUBQUERY | tbl_member_event_attendance | ref    | id_event_member    | id_event_member          | 4       | video_staging.tbl_member_event.id_member_event |    1 | Using where; Using index                                  |
+----+--------------------+-----------------------------+--------+--------------------+--------------------------+---------+------------------------------------------------+------+-----------------------------------------------------------+
6 rows in set (0.00 sec)

mysql> DESCRIBE SELECT *
    -> FROM (SELECT id_branch_channel, id_member, attendance, timestamp, id_event 
    ->       FROM view_event_attendance 
    ->       WHERE id_event = 782 
    ->       ORDER BY timestamp desc
    ->      ) as whatever
    -> GROUP BY id_event,id_member;
+----+-------------+-----------------------------+-------+-----------------+-----------------+---------+------------------------------------------------+------+---------------------------------+
| id | select_type | table                       | type  | possible_keys   | key             | key_len | ref                                            | rows | Extra                           |
+----+-------------+-----------------------------+-------+-----------------+-----------------+---------+------------------------------------------------+------+---------------------------------+
|  1 | PRIMARY     | <derived2>                  | ALL   | NULL            | NULL            | NULL    | NULL                                           |   14 | Using temporary; Using filesort |
|  2 | DERIVED     | tbl_event                   | const | PRIMARY         | PRIMARY         | 4       |                                                |    1 | Using temporary; Using filesort |
|  2 | DERIVED     | tbl_member_event            | ref   | id_event        | id_event        | 4       |                                                |   12 | Using index                     |
|  2 | DERIVED     | tbl_member_event_attendance | ref   | id_event_member | id_event_member | 4       | video_staging.tbl_member_event.id_member_event |    1 | Using index                     |
+----+-------------+-----------------------------+-------+-----------------+-----------------+---------+------------------------------------------------+------+---------------------------------+
4 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T23:29:21.370

使用 id_member 的简单组，但选择：

```
substring(max(concat(from_unixtime(timestamp),attendance)) from 20) as attendance 
```

这会将出勤附加到组中每一行的时间戳，以便能够使用 max() 选择所需的时间戳/出勤，然后仅提取出勤。

返回的是`concat()`19 个字符的格式化时间戳 (YYYY-mm-dd HH:MM:SS)，从字符 20 开始附加出勤；`substring(... from 20)`仅从该组的（字符串方式）最大出席人数中获得出席人数。您可以删除组

```
select concat(from_unixtime(timestamp),attendance), timestamp, attendance 
```

更好地了解它如何使用 max 来获得正确的出勤率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T22:56:52.810

```
SELECT id_branch_channel, id_member, attendance, timestamp, id_member 
FROM (select * from view_event_attendance order by timestamp desc) as whatever
WHERE id_event = 782 
GROUP BY id_event,id_member; 
```

**编辑：**这可能会产生更好的性能：

```
SELECT *
FROM (SELECT id_branch_channel, id_member, attendance, timestamp, id_member 
      FROM view_event_attendance 
      WHERE id_event = 782 
      ORDER BY timestamp desc
     ) as whatever
GROUP BY id_event,id_member; 
```

只要结果集可以放入 Innodb_buffer_pool，您就不会看到显着的性能下降。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T23:08:45.357

我看到了`JOINS`and的答案`Subquerys`，但我相信一个简单的`HAVING`子句应该可以解决问题：

```
SELECT 
  id_branch_channel,
  id_member, 
  attendance, 
  timestamp,
  id_member
FROM view_event_attendance
WHERE id_event = 782 
GROUP BY id_event, id_member
HAVING MAX(timestamp) OR timestamp IS NULL; 
```

**编辑：**如果您还想包含这些行，请添加对 IS NULL 的检查。

**编辑 2：**当您已经将其过滤为 1 个事件时，是否甚至需要按 id_event 分组？

**编辑 3：**不知道为什么不赞成，[这个 sql fiddle](http://sqlfiddle.com/#!2/3b9f0/2)显示它有效。

**编辑 4：**我必须道歉，@ysth 是正确的，SQL Fiddle 无法正常工作。我应该得到-1，但是当你投反对票时，至少解释一下为什么这样我也可以自己学习一些东西。

以下工作，但不幸的是它再次有一个子查询，并且不会比此处发布的其他解决方案更好。

```
SELECT 
  id_branch_channel,
  id_member, 
  attendance, 
  timestamp,
  id_member
FROM view_event_attendance AS t1
WHERE id_event = 782
AND timestamp = (SELECT MAX(timestamp)
                 FROM view_event_attendance AS t2 
                 WHERE t1.id_member = t2.id_member 
                   AND t1.id_event = t2.id_event 
                 GROUP BY id_event, id_member)
OR timestamp IS NULL
GROUP BY id_event, id_member; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-06T14:51:47.547

```
SUBSTRING_INDEX(SUBSTRING_INDEX(group_concat(%requiredfield%), ',', count(*)),',',-1) 
```

这将从任何 group_concat 获取“必填字段”的最后一个值，如果未排序，默认情况下它将是表中的最后一个值。

可以使用 group_concat_ws 来说明可能的空字段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T22:55:34.087

这是一个选项（未经测试）：

```
SELECT v.id_branch_channel, v.id_member, v.attendance, v.timestamp, v.id_member 
FROM view_event_attendance v
    JOIN (
        SELECT id_event, id_member, MAX(attendance) maxattendance
        FROM view_event_attendance 
        GROUP BY id_event, id_member ) m ON 
            v.id_event = m.id_event AND
            v.id_member = m.id_member AND
            v.attendance = m.maxattendance
WHERE v.id_event = 782 
GROUP BY v.id_member; 
```

这个概念是获取`MAX()`时间戳并将该字段用于`JOIN`您的视图。您可能不需要所有字段——实际上取决于您的表结构。但这应该让你朝着正确的方向前进。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-14T22:51:38.187

一种方法是使用窗口函数和子查询，如果您将条目添加到选择列表，因为`row_number() over (partition by id_member order by timestamp desc)`这将解析为按每个 id_member 组中分组的时间戳（1 是最旧的）对行进行排序的数字（运行如果这没有意义，它会很清楚）。然后，您可以从中选择作为子查询，其中额外的列 = 1，它将仅选择每个组中具有最高时间戳的行。

# ruby-on-rails - 使用 ActionMailer 的设计决策

> ID：15421622
> 
> 赞同：0
> 
> 时间：2013-03-14T22:44:32.327
> 
> 标签：ruby-on-rails, actionmailer

我对我需要做出什么样的设计决定感到困惑。

我知道 ActionMailer 的基本用例，因为你会：

*   创建一个继承自 ActionMaier 的类
*   在那里定义一个方法来发送什么以及发送给谁以及从谁发送等等

这是我偏离和失去理解的地方。

通常，您会在特定操作的控制器中调用邮件模型上的方法，例如

```
def create
 @user = User.new(params[:user])
 if @user.save
   MyMailerClass.send_signup_email(@user).deliver
   redirect_to @user
 else
   render :new
 end
end 
```

例如，如果我想根据用户是否在 X 天内未登录来发送电子邮件怎么办。我敢肯定有很多方法可以做到这一点，但对 Rails 的最佳实践方式感到好奇，因为我不知道该去哪里找。[这很接近](https://stackoverflow.com/questions/10077112/actionmailer-send-email-based-on-date-condition-in-rails)我不希望它在满足特定条件时根据一天中的时间发送。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:57:20.703

听起来您想要一个定期运行以检查某些条件并根据这些条件发送电子邮件的 cron 作业。这与您使用标准邮件程序所做的事情并不太远，除了不是从控制器发送它，而是从一个单独的脚本发送它。我通常为此编写一个 rake 任务：

```
task :send_reminder_emails => :environment do
  users = User.where('last_login <= ?', 10.days.ago)
  users.each do |user|
    MyMailerClass.reminder(user).deliver
  end
end 
```

你会用`rake send_reminder_emails`. 如果您不熟悉如何设置 cron 作业，有大量示例可用于设置 cron 作业。

# android - Android SearchView 与 ActionBar 中的其他项目

> ID：15421625
> 
> 赞同：4
> 
> 时间：2013-03-14T22:44:44.677
> 
> 标签：android, searchview

我使用 Android SearchView 作为操作栏项目布局中的第二个项目。当它展开时，第一个项目保持可见。因此，搜索视图的区域会更小。它不占用屏幕的整个宽度。

我该怎么做才能使它全宽？谢谢你。

# c++ - 在设备上调用 printf() 的不完整输出

> ID：15421626
> 
> 赞同：3
> 
> 时间：2013-03-14T22:44:57.143
> 
> 标签：c++, cuda, printf

为了测试设备上的 printf() 调用，我编写了一个简单的程序，它将一个中等大小的数组复制到设备并将设备数组的值打印到屏幕上。尽管数组已正确复制到设备，但 printf() 函数无法正常工作，从而丢失了前几百个数字。代码中的数组大小为 4096。这是一个错误还是我没有正确使用这个函数？提前感谢。

编辑：我的 gpu 是 GeForce GTX 550i，计算能力 2.1

我的代码：

```
#include<stdio.h>
#include<stdlib.h>
#define N 4096

__global__ void Printcell(float *d_Array , int n){
    int k = 0;

    printf("\n=========== data of d_Array on device==============\n");
    for( k = 0; k < n; k++ ){
        printf("%f  ", d_Array[k]);
        if((k+1)%6 == 0) printf("\n");
    }
    printf("\n\nTotally %d elements has been printed", k);
}

int main(){

    int i =0;

    float Array[N] = {0}, rArray[N] = {0};
    float *d_Array;
    for(i=0;i<N;i++)
        Array[i] = i;

    cudaMalloc((void**)&d_Array, N*sizeof(float));
    cudaMemcpy(d_Array, Array, N*sizeof(float), cudaMemcpyHostToDevice);
    cudaDeviceSynchronize();
    Printcell<<<1,1>>>(d_Array, N);    //Print the device array by a kernel
    cudaDeviceSynchronize();

    /* Copy the device array back to host to see if it was correctly copied */   
    cudaMemcpy(rArray, d_Array, N*sizeof(float), cudaMemcpyDeviceToHost);

    printf("\n\n");

    for(i=0;i<N;i++){
        printf("%f  ", rArray[i]);
        if((i+1)%6 == 0) printf("\n");
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T23:12:01.360

来自设备的 printf 队列有限。它适用于小规模调试式输出，而不是大规模输出。

参考[程序员指南](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#formatted-output)：

> printf() 的输出缓冲区在内核启动之前设置为固定大小（请参阅关联的主机端 API）。它是循环的，如果在内核执行期间产生的输出多于缓冲区可以容纳的输出，则旧的输出将被覆盖。

您的内核中 printf 输出超出了缓冲区，因此在缓冲区转储到标准 I/O 队列之前，第一个打印的元素丢失（覆盖）。

链接的文档表明缓冲区大小也可以增加。

# c++ - 未解决的外部链接 2019 混乱

> ID：15421632
> 
> 赞同：3
> 
> 时间：2013-03-14T22:45:40.593
> 
> 标签：c++, unresolved-external

我正在尝试解决未解决的外部问题（link2019 错误）。StackOverflow 上有很多关于这个问题的帖子，但要么我不理解错误，要么我对此视而不见。

该错误是由我的 generate_maze 函数引起的（特别是由 rand_neighbor() 调用，对吗？），但我的理解是这些都已“解决”。

我稍微截断了代码，因为它非常冗长。我希望这是适当的。

```
void generate_maze (Vector<int> &coords, Grid<bool> &included, Maze &m);

int main() {

    Grid<bool> included = initialize_grid();
    Vector <int> coords = rand_coords();
    Vector <int> current_point = coords;

    generate_maze(coords, included, m);
    return 0;
}

void generate_maze (Vector<int> &coords, Grid<bool> &included,  Maze &m) {
    while (gridIsTrue == false) {
    Vector<int> neighbor = rand_neighbor(coords, included);
    pointT neighborpoint = {neighbor[0], neighbor[1]};
    pointT current_point = {coords[0], coords[1]};
    if (included.get(neighbor[0], neighbor[1]) == false) {m.setWall(current_point, neighborpoint, false); included.set(neighbor[0], neighbor[1], true); current_point = neighborpoint;}
    }
}

Vector<int> rand_neighbor(Vector<int> &coords, Grid<bool> &included) {
    while (1) {
        int randomint;
        randomint = randomInteger(1,4);
        if (randomint == 1) {if (included.inBounds(coords[0], coords[1]+1)) {coords[1] = coords[1]+1; break;}}
        if (randomint == 2) {if (included.inBounds(coords[0], coords[1]-1)){coords[1] = coords[1] -1; break;}}
        if (randomint == 3) {if (included.inBounds(coords[0] -1, coords[1])){coords[0] = coords[0] -1; break;}}
        if (randomint == 4) {if (included.inBounds(coords[0] +1, coords[1])){coords[0] = coords[0] + 1; break;}}
                }
        return coords; 
```

错误：

```
error LNK2019: unresolved external symbol "class Vector<int> __cdecl rand_neighbor(class Vector<int>,class Grid<bool> &)" (?rand_neighbor@@YA?AV?$Vector@H@@V1@AAV?$Grid@_N@@@Z) referenced in function "void __cdecl generate_maze(class Vector<int> &,class Grid<bool> &,class Maze &)" (?generate_maze@@YAXAAV?$Vector@H@@AAV?$Grid@_N@@AAVMaze@@@Z)
1>C:\Users\com-user\Desktop\New folder\maze\assign3-maze-PC\Maze\Debug\Maze.exe : fatal error LNK1120: 1 unresolved externals 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T23:10:33.367

[在这里](http://slush.warosu.org/c++filtjs/)使用不错的 web c++ demangler ，您可以看到您的未定义引用`?rand_neighbor@@YA?AV?$Vector@H@@V1@AAV?$Grid@_N@@@Z`实际上意味着`class Vector __cdecl rand_neighbor(class Vector,class Grid &)`. 您的错误消息中缺少参数。

现在，您看到函数的声明和定义之间的区别了吗？

```
class Vector __cdelc rand_neighbor(class Vector,class Grid &);
Vector<int> rand_neighbor(Vector<int> &coords, Grid<bool> &included) { /* ... */} 
```

让我把它们标准化一下：

```
Vector<int> rand_neighbor(Vector<int>, Grid<bool> &);
Vector<int> rand_neighbor(Vector<int> &, Grid<bool> &) { /* ... */} 
```

您忘记了`&`函数原型中的引用 ()！因此，您的定义是不同的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T22:47:39.377

正如链接器告诉你的那样，问题出在`rand_neighbor()`函数上。你为它提供了一个*声明*（如果你不提供，你会得到一个编译器错误而不是一个链接器错误），但是你没有提供一个*定义*。

# javascript - jQuery没有加载

> ID：15421633
> 
> 赞同：2
> 
> 时间：2013-03-14T17:34:25.963
> 
> 标签：javascript, jquery

好吧，伙计们，我正在尝试处理 Jquery，但现在我实际上正在实现它，我发现很难让它返回任何东西。就像，我什至不完全确定我是否正确加载它，或者如果我有一些随机的错字阻止任何工作。我将有资格在底部添加一个简单的 Javascript 代码，并带有 document.write 以确保 javascript 文件确实已链接。它工作正常。

如果我单击 h1，则没有任何反应。不管我输入的 Jquery 命令是什么，即使它只是在 $(document).ready 中，它仍然会做......什么都不做。

这是实际的 Jquery/Javascript：

```
$(document).ready(function() {
  $("h1").click(function() {
    $(this).animate({color:blue}, 'fast');
 });
}); 
```

这是我在 HTML 中调用它的地方（如下）。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="script.js"></script>
</head> 
```

.js 脚本确实称为 script.js，并且与 HTML 位于同一目录中。我对两者都有点陌生，所以这很可能是一个非常新手的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:56:49.893

您的代码中有错误，您最好在测试时使用一些开发人员工具来捕获这些错误。

> 未捕获的 ReferenceError：未定义蓝色

该行：

```
$("h1").animate({color:blue}, 'fast'); 
```

期望蓝色是一个变量，你需要把它变成一个字符串。

```
$("h1").animate({color:'blue'}, 'fast'); 
```

此外，正如dystroy 所提到的，您需要插件或jQuery UI 文件。文档中的附加说明：

> 注意：jQuery UI 项目扩展了 .animate() 方法，允许对一些非数字样式（例如颜色）进行动画处理。该项目还包括通过 CSS 类而不是单个属性指定动画的机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:55:01.400

从[文档](http://api.jquery.com/animate/)中：

> 所有动画属性都应动画为单个数值，除非以下说明；大多数非数字属性无法使用基本的 jQuery 功能进行动画处理（例如，宽度、高度或左侧可以进行动画处理，但背景颜色不能进行动画处理，除非使用 jQuery.Color() 插件）。

这是主要问题：如果您尝试使用数字属性的代码，[它可以工作](http://jsbin.com/oqigef/1/edit)。

如果您真的想为颜色设置动画，我建议您使用提到的插件。

# javascript - 当通过其他代码更改数据时，不会在文本框上触发更改事件

> ID：15421638
> 
> 赞同：1
> 
> 时间：2013-03-14T22:45:45.543
> 
> 标签：javascript, jquery, javascript-events

我需要一个更改事件来触发一个元素，而不考虑元素值是如何更改的。

我的用例是每当特定文本框更改值时，我都需要更改表单上的元素。问题是该元素由另一个按钮填充（一个日历按钮，允许用户选择一个日期，然后将其插入第一个文本框中）。

使用下面的示例，我需要知道“date1”何时更改，以便更新“date2”。 **我不知道按钮的 ID——它是由另一个工具动态生成的——所以我不能附加任何东西。**

我有以下 HTML：

```
 <input type="text" id="date1" value="" />
 <input type="button" id="but1" value="click me" />
 <br/>
 <input type="text" id="date2" value="" /> 
```

而这个javascript：

```
 $(function () {

     $("#but1").click(function () {
         $("#date1").val(new Date().toLocaleDateString());
     });

     $("#date1").change(function () {
         var d = new Date($("#date1").val());
         $("#date2").val(d.addDays(7));
     });

 });

 Date.prototype.addDays = function (days) {
     var current = this;
     current.setDate(current.getDate() + days);
     return current;
 }; 
```

这是我正在使用的 jsfiddle：http: [//jsfiddle.net/mYWJS/7/](http://jsfiddle.net/mYWJS/7/)

**更新**：我在 jsfiddle 示例中添加了一个 DIV 包装器，希望能激发另一个解决方案。我自己找不到使用它的方法，但我的 javascript 技能相当平庸。

关于 Fabricio 关于 DOM 突变的评论，是否有某种独立于浏览器的 DOM 突变解决方案？我无法肯定地预测将在这里使用的浏览器。我不太关心 IE6，但我见过的针对 DOM 突变的少数解决方案似乎都集中在 Chrome 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:29:00.740

触发事件

```
$(function () {

    $("#but1").click(function () {
        $("#date1").val(new Date().toLocaleDateString()).change();
    });

    $("#date1").change(function () {
        var d = new Date($("#date1").val());
        $("#date2").val(d.addDays(7));
    });

});

Date.prototype.addDays = function (days) {
    var current = this;
    current.setDate(current.getDate() + days);
    return current;
}; 
```

备用：

```
$("#date1").val(new Date().toLocaleDateString()).trigger('change'); 
```

编辑：鉴于您的澄清：

```
$(function () {
    $("#date1").next('input[type=button]').on('click',function () {
        $("#date1").val(new Date().toLocaleDateString()).change();
    });

    $("#date1").change(function () {
        var d = new Date($("#date1").val());
        $("#date2").val(d.addDays(7));
    });
});

Date.prototype.addDays = function (days) {
    var current = this;
    current.setDate(current.getDate() + days);
    return current;
}; 
```

注意：此示例将它们放在同一个表格单元格中。如果它在后续表格单元格中，请使用：

```
 $("#date1").next('td input[type=button]') 
```

# extjs - XTemplate 中的 EXTJS 自定义代码 - " 如何在 XTemplate 中执行特定次数的循环 以下不起作用 <tpl for="5">...</tpl> 问候， kkris1983 Android：从数据模型中按名称

> ID：15421640
> 
> 赞同：0
> 
> 时间：2013-03-14T22:45:56.657
> 
> 标签：extjs

如何在 XTemplate 中执行特定次数的循环

以下不起作用

```
<tpl for="5">
...
</tpl> 
```

问候， kkris1983

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:41:11.827

我认为这可行的唯一方法是用 5 个项目填充变量，如下所示：

```
Ext.onReady(function () {
    var panel = Ext.create('Ext.panel.Panel', {
        renderTo: Ext.getBody(),
        title: 'test',
        height: 300,
        width: 300
    });

    var total = 5;
    var data = {
        count: []
    };    
    for (var i = 1; i <= 5; i++) {
        data.count.push(i);
    }

    var tpl = [
        '<tpl for="count">',
        '{.}<br>',            
        '</tpl>'];

    var t = new Ext.XTemplate(tpl);
    panel.update(t.apply(data));
}); 
```

小提琴：http: [//jsfiddle.net/johanhaest/2WEVE/3/](http://jsfiddle.net/johanhaest/2WEVE/3/)

# android - Android：从数据模型中按名称对 ListView 进行排序

> ID：15421641
> 
> 赞同：2
> 
> 时间：2013-03-14T22:45:58.900
> 
> 标签：android, android-listview, android-adapter

我正在尝试`ListView`按字母顺序排序。

我有一个名为的数据模型类`AiringModel()`，它有一个名为`getName()`. 我需要根据来自的返回值订购 ListView `getName()`。

到目前为止，我尝试`Comparator`在适配器上使用 a ，`sort()`如下所示：

```
final ArrayAdapter<AiringModel> adapter = new TrackingAdapter(
                activity.getSherlockActivity(), resultList);
        //resultList -> List<AiringModel> list
        adapter.sort(new Comparator<AiringModel>() {
            @Override
            public int compare(AiringModel lhs, AiringModel rhs) {
                // TODO Auto-generated method stub
                return lhs.getName().compareTo(rhs.getName());
            }
        });
        trackingAdapter = adapter;
        activity.setListAdapter(adapter); 
```

但这不起作用，没有错误，`ListView`只是保持完全相同。

知道我做错了什么吗？

编辑：

该列表根据日志完美排序，所以我又去挖掘了一些，结果发现我正在另一个线程中重置适配器，叹息。感谢您给我一些想法，但它有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:51:01.543

试着打电话

```
adapter.notifyDataSetChanged(); 
```

将其设置为`ListView`.

# c# - 在 C# 中拆分字符串

> ID：15421651
> 
> 赞同：11
> 
> 时间：2013-03-14T22:46:37.437
> 
> 标签：c#, regex, string, split

我正在尝试通过以下方式在 C# 中拆分字符串：

传入字符串的形式为

```
string str = "[message details in here][another message here]/n/n[anothermessage here]" 
```

我正在尝试将其拆分为表单中的字符串数组

```
string[0] = "[message details in here]"
string[1] = "[another message here]"
string[2] = "[anothermessage here]" 
```

我试图以这样的方式做到这一点

```
string[] split =  Regex.Split(str, @"\[[^[]+\]"); 
```

但它不能以这种方式正常工作，我只是得到一个空数组或字符串

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-14T22:50:59.650

请改用以下`Regex.Matches`方法：

```
string[] result =
  Regex.Matches(str, @"\[.*?\]").Cast<Match>().Select(m => m.Value).ToArray(); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-14T22:49:37.683

该方法返回指定模式实例*之间*[`Split`](http://msdn.microsoft.com/en-us/library/ze12yx1d.aspx)的子字符串。例如：

 *```
var items = Regex.Split("this is a test", @"\s"); 
```

结果在数组中`[ "this", "is", "a", "test" ]`。

解决方案是[`Matches`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matches.aspx)改用。

```
var matches =  Regex.Matches(str, @"\[[^[]+\]"); 
```

然后，您可以使用 Linq 轻松获取匹配值的数组：

```
var split = matches.Cast<Match>()
                   .Select(m => m.Value)
                   .ToArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T00:07:15.313

另一种选择是使用环视断言进行拆分。

例如

```
string[] split = Regex.Split(str, @"(?<=\])(?=\[)"); 
```

这种方法有效地分割了右方括号和左方括号之间的空白。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T22:54:37.040

`Split`您可以像这样在字符串上使用该方法，而不是使用正则表达式

```
Split(new[] { '\n', '[', ']' }, StringSplitOptions.RemoveEmptyEntries) 
```

使用这种方法，您会在结果周围松动`[`，`]`但根据需要将它们重新添加并不难。*

# php - 全局文件引用

> ID：15421652
> 
> 赞同：0
> 
> 时间：2013-03-14T20:56:27.213
> 
> 标签：php, html, url, structured-data

我的基本文件结构类似于：

```
domain.com/
        home.php
        images/
                global/
                        nav/
                            nav-img.jpg
        includes/
                menu.php
        fruit/
                apples/
                        red/
                            gala/
                                gala.php 
```

我想创建一个全局路径来建立我的 Web 根目录，无论它位于何处，我都可以在每个页面中动态引用它。我试图弄清楚如何使用 [例如] **define(ROOT)**，以及如何从单个页面调用它。

知道所有页面都使用 [menu.php]，我的障碍是，例如：

从 gala.php 页面 - 当我点击 [home] 时，它会查找：

```
/fruit/apples/red/gala/home.php 
```

但这不存在。

*另外，如果可能的话，我**会尽量避免**这些 [2] 的事情：*

1.  **像这样在gala.php**中使用 html 文件引用：../../../../includes/menu.php [找到正确的全局包含]

2.  并避免在**menu.php**中使用链接引用，如下所示：/images/global/nav/nav-img.jpg

**

# 更新

**

1.  解决了

就像其他人发布的一样，我最终使用了：

```
define('ROOT',$_SERVER['DOCUMENT_ROOT']); 
define('INCLUDES',ROOT.'/path/to/includes/folder/'); 
```

当我从 html 调用它时效果很好：

```
include(INCLUDES.'menu.php');  // or any file 
```

这很棒，因为无论从哪里调用它们，我都可以找到我的包含...一旦我弄清楚如何使用它，这很容易。

**

# 剩下的问题

**

[对于上面的＃2]唯一剩下的问题是我在包含中的所有html链接都被破坏了，其中包含是从ROOT以外的级别调用的。

我发现一种解决方法是只使用绝对路径，例如：

```
href="/images/global/nav/nav-img.jpg" 
```

**有没有一种方法可以为图像位置创建 DOCUMENT_ROOT 类型的文件引用，以便我的包含总能找到它们？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:27:27.907

也许，您可以使用[此处](http://php.net/manual/en/reserved.variables.server.php)找到的 $_SERVER 信息来分配 $server_root 变量或 $prefix 变量，并以此为基础。

# c# - 如何使用 login 和 createuserwizard 工具连接到 SQL 服务器？

> ID：15421657
> 
> 赞同：0
> 
> 时间：2013-03-14T22:47:01.380
> 
> 标签：c#, asp.net, sql-server-2008

我正在尝试基于**asp.net**制作网站。我正在使用*登录*工具和*createuserwizard*工具来构建我的用户数据库。但我不知道如何将它们链接到远程 SQL 服务器。我有服务器的授权和信息。但是当我尝试链接它们时：

```
protected void Page_Load(object sender, EventArgs e)
{
    conn.Open();
    SqlCommand comm = new SqlCommand(
        "SELECT * FROM aspnet_Membership where userId='" + UserName.Text + "' and password= '" + Password.Text + "'",
        conn);
} 
```

无法识别文本信息。有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:20:59.033

您使用的会员服务提供商已过时。请使用[ASP.Net 通用提供程序](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)

如果您使用会员提供者的默认功能，基本上不需要编写任何代码。

按照上面链接上的 Scott Hanselman 编写的说明进行操作。

# visual-studio-2010 - 如何使用 MFC 滑块获得“移动后通知”事件？

> ID：15421658
> 
> 赞同：0
> 
> 时间：2013-03-14T22:47:11.670
> 
> 标签：visual-studio-2010, visual-c++, mfc, slider

在编辑 MFC 滑块控件时，我可以勾选“移动前通知”，然后将一个方法与 TRBN_THUMBPOSCHANGING 事件相关联，以定义用户移动滑块时要执行的操作。

但是，由于我想根据当前滑块位置更新标签值，我实际上需要一个“移动后通知”事件。有办法参加这个活动吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:20:04.383

添加[NM_RELEASEDCAPTURE](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775560%28v=vs.85%29.aspx)通知的方法。例如

`ON_NOTIFY(NM_RELEASEDCAPTURE, IDC_SLIDER1, &CSliderTestDlg::OnNMReleasedcaptureSlider1)`

# android - 如何在 box2d 中更改身体的大小？

> ID：15421664
> 
> 赞同：0
> 
> 时间：2013-03-14T22:47:45.830
> 
> 标签：android, box2d, andengine

如何使用andengine更改box2d中身体的大小？在 body 类中没有方法可以做到这一点。是否有另一个班级会这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:38:08.503

事实证明你不能，所以我最终不得不做的就是摧毁身体然后制造一个新的。

# javascript - 在页面加载/重新加载时设置 Jquery ui 活动选项卡

> ID：15421669
> 
> 赞同：8
> 
> 时间：2013-03-14T22:48:11.840
> 
> 标签：javascript, jquery, jsp

我正在使用运行良好的 Jquery UI 选项卡的基本实现，但我想根据用户操作动态设置（或重置）活动选项卡。

1.  如何根据查询字符串值设置活动选项卡？使用我以前的选项卡解决方案，我能够传递一个查询字符串值并在页面加载时设置活动选项卡。（由于其他技术挑战，我不得不放弃这个旧的解决方案。）

2.  当用户在我的浏览器应用程序中选择“保存”按钮并重新加载浏览器页面时，我如何才能将注意力集中在他们按下保存之前所在的选项卡上？

3.  当用户返回到我的浏览器应用程序的任务页面时，如何设置活动选项卡？例如，在我的 Web 应用程序中，如果用户浏览到 Projects 页面然后返回到 Task 页面，我如何重置他们之前所在的选项卡？

Javascript：

```
$(function() {
   $("#tabs").tabs();
}); 
```

HTML 示例代码：

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Description</a></li>
        <li><a href="#tabs-2">Action</a></li>
        <li><a href="#tabs-3">Resources</a></li>
        <li><a href="#tabs-4">Settings</a></li>
    </ul>

<div id="tabs-1">
    <p>Description content</p>
</div>

<div id="tabs-2">
    <p>Action content</p>
</div>

<div id="tabs-3">
    <p>Resources content</p>
</div>

<div id="tabs-4">
    <p>Settings </p>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T14:07:54.047

经过额外的研究和反复试验，我解决了我自己的 jQuery 选项卡问题。这是一个工作示例。我不知道这是否是最优雅的解决方案，但它有效。我希望这有帮助。

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/redmond/jquery-ui-1.10.1.custom.min.css">
    <script language="javascript" type="text/javascript" src="js/jquery/jquery-1.9.1.js"></script>
    <script language="javascript" type="text/javascript" src="js/jquery/jquery-ui-1.10.1.custom.min.js"></script>

    <script language="javascript" type="text/javascript">
        $(document).ready(function() {
            $("#tabs").tabs({active: document.tabTest.currentTab.value});

            $('#tabs a').click(function(e) {
                var curTab = $('.ui-tabs-active');
                curTabIndex = curTab.index();
                document.tabTest.currentTab.value = curTabIndex;
            });
        });
    </script>
</head>

<body>
    <form name="tabTest" method="post" action="tab">
        <!-- default tab value 2 for Tab 3 -->            
        <input type="hidden" name="currentTab" value="2"/> 
        <div id="tabs">
            <ul>
                <li><a href="#tabs-1">Tab 1</a></li>
                <li><a href="#tabs-2">Tab 2</a></li>
                <li><a href="#tabs-3">Tab 3</a></li>
            </ul>
            <div id="tabs-1">Tab 1 Content</div> 
            <div id="tabs-2">Tab 2 Content</div>
            <div id="tabs-3">Tab 3 Content</div>
        </div>
    </form>
</body> 
```

以下是我如何回答我之前的每个问题。

**1.如何根据查询字符串值设置活动选项卡？** 我最终不需要使用查询字符串。我将#tabs-x 添加到我的网址末尾。例如，如果我想要一个直接指向 Tab 3 的链接，我将链接编码为：

```
localhost:8080/pm/detail?prjID=2077#tabs-3 
```

**2\. 当用户在我的浏览器应用程序中选择“保存”按钮，并且浏览器页面重新加载时，我如何才能将焦点保持在他们按下保存之前所在的选项卡上？**

我通过捕获单击事件、获取当前选项卡索引然后设置隐藏表单元素“currentTab”来存储当前选项卡值来解决此问题。然后回到 Java Servlet，我检索了隐藏的表单元素并在页面重新加载时将其重置。

```
$(document).ready(function() {
        // Set active tab on page load
        $("#tabs").tabs({active: document.tabTest.currentTab.value});

        // Capture current tab index.  Remember tab index starts at 0 for tab 1.
        $('#tabs a').click(function(e) {
            var curTab = $('.ui-tabs-active');
            curTabIndex = curTab.index();
            document.tabTest.currentTab.value = curTabIndex;
        });
    }); 
```

**3\. 当用户返回我的浏览器应用程序的项目页面时，如何设置活动选项卡？例如，在我的 Web 应用程序中，如果用户浏览到 Task 页面然后返回到 Project 页面，我如何重置他们之前所在的选项卡？**

这可以通过在我的 Java Servlet 中设置一个会话变量来存储隐藏的表单元素“currentTab”来解决。这样，当我返回项目页面时，我可以重置“currentTab”值，就像在“保存表单”操作中设置它一样。

我希望这个例子可以帮助其他人解决他们的 jQuery 标签问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:02:26.830

jQuery UI 选项卡可以接受选项。对您的问题特别有用的是`cookie`和`selected`。[您可以在此处](http://docs.jquery.com/UI/API/1.8/Tabs#options)阅读有关选项的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-18T17:44:25.323

```
 var currentTab = $('.ui-state-active a').index();
    currentTab = $('#divMainContent').find('#sel_tab')[0].value; 
```

注意：其中 Sel_tab 是隐藏字段。onclick 选项卡 achor 链接为隐藏字段赋值

# css - 在列表中垂直居中标签和输入

> ID：15421674
> 
> 赞同：0
> 
> 时间：2013-03-14T22:48:45.173
> 
> 标签：css, html, forms

我有一个要放入滑块的表单，我想将每个输入字段的标签垂直居中在 li 中。有些标签有两行，有些只有一行。稍后我还想将所有单选按钮居中。

到目前为止我已经尝试过了，但它不起作用

```
 <li class="fill-in">
        <label for="sasqNumber">SASQ number (today's date i.e. dd_mm_yyyy):</label>
        <input type="text" name="sasqNumber" id="sasqNumber" value="" />
    </li>

#test ul li.fill-in label{
    text-align:right;
    width:30%;
    float:left;
    vertical-align:middle; 
    display:table-cell;
    margin:0 5% 0 0;
} 
```

链接到该网站[http://www.foresightaus.com.au/form/](http://www.foresightaus.com.au/form/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:22:13.233

使用这个非常简单的 jquery 脚本：

```
(function ($) {
$.fn.vAlign = function() {
    return this.each(function(i){
    var ah = $(this).height();
    var ph = $(this).parent().height();
    var mh = Math.ceil((ph-ah) / 2);
    $(this).css('margin-top', mh);
    });
};
})(jQuery); 
```

然后在要垂直对齐的任何元素上调用该函数：

```
$('#example p').vAlign(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T22:59:06.617

无需过多地编辑您的设置，我让它看起来更居中。我补充说：

```
position: relative;
top: 50%;
margin: -15px 5% 0 0 
```

# javascript - 从其名称实例化一个 javascript 对象

> ID：15421676
> 
> 赞同：2
> 
> 时间：2013-03-14T22:48:47.997
> 
> 标签：javascript, oop

我有点实现我自己的非常基本的 MVC 控制器，我想要的是，如果我有一个 viewName，我想实例化名为“viewName”的 javascript 对象。例如。

可以说我有一个对象定义为

```
function ViewABC() {}
ViewABC.prototype.init = function() {
      alert("comes here!");
}; 
```

现在在我的控制器模块的某个地方，我得到一个视图名称为“ViewABC”。我想要的只是用 viewName 调用对象

```
function(viewName){
//check if viewName exists somewhere! initial validation
//create var viewObj = new 'viewName' here in this case it will be
//var viewObj =- new ViewABC();
//then call viewObj.init(); 
```

我查看了 window[className] 和 this[className] 但 window 或 this 都没有我在上下文中定义的函数类。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T23:02:35.500

而不是仅仅在全局范围内转储函数，这又如何：

```
Views = Views || {}; // namespace initialization
Views['ViewABC'] = function() {};
// ...
var viewName = 'ViewABC';
var viewObj = new Views[viewName](); 
```

**更新**

将第一行更改为：

```
window.Views = window.Views || {}; 
```

或者如果您只使用一次，只需：

```
Views = {}; 
```

# scala - 在 Scala 中从谓词构造位集？

> ID：15421678
> 
> 赞同：1
> 
> 时间：2013-03-14T22:48:49.650
> 
> 标签：scala, bitset

假设我想构造一个 BitSet，其中包含从 0 到 n 满足某个 predicate 的所有整数`f: Int => Boolean`。

我可以写类似的东西

```
BitSet((0 until n):_*).filter(f) 
```

这当然有效。但是感觉效率很低！我计划在一个非常紧凑的循环中执行此操作，并希望提供更有效方法的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:04:15.193

这是我目前能想到的最好的

```
BitSet((0 until n).view.filter(f):_*) 
```

视图部分使`filter`方法变得懒惰。这确保当`BitSet`从给定序列创建时，它将即时过滤。您的原始建议在创建`BitSet`第一个建议后会创建一个新建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T00:39:11.833

我认为最有效的“功能”方式是使用`foldLeft`：

```
(1 to 5).foldLeft(BitSet())((s,i) => if (f(i)) s + i else s) 
```

它不会创建中间集合，而是在过滤时从头开始构建集合。

我想到的第一件事是使用`breakOut`，但它不适用于`filter`：

```
scala> val set: BitSet = (0 until 10).filter(f)(collection.breakOut)
<console>:11: error: polymorphic expression cannot be instantiated to expected type;
 found   : [From, T, To]scala.collection.generic.CanBuildFrom[From,T,To]
 required: Int
       val set: BitSet = (0 until 10).filter(f)(collection.breakOut)
                                                           ^

scala> val set: BitSet = (0 until 10).map(_+1)(collection.breakOut)
set: scala.collection.immutable.BitSet = BitSet(1, 2, 3, 4, 5, 6, 7, 8, 9, 10) 
```

`breakOut`也不会创建中间集合，但是因为`filter`没有第二个参数列表，所以它不能工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T11:20:31.307

如果性能确实是您最关心的问题，最好的选择可能是使用一个`mutable.BitSet`和一个while循环，然后调用`toImmutable`结果。

```
val bitSet = {
  val tmp = new scala.collection.mutable.BitSet(n)
  var i = 0;
  while (i < n) {
    if (f(i)) {
      tmp += i
    }
    i = i + 1
  }
  tmp.toImmutable
} 
```

# mapreduce - 您如何在 CouchBase 上实现多租户？它可以是高性能的吗？

> ID：15421679
> 
> 赞同：1
> 
> 时间：2013-03-14T22:48:51.117
> 
> 标签：mapreduce, couchdb, couchbase, multi-tenant

我正在考虑一个将存储客户数据的应用程序。鉴于存储桶在 CouchBase 中的工作方式，所有客户数据都将位于一个存储桶中。看来我有两个选择：

1.  通过为每条记录分配一个字段来指示其所属的客户，从而在视图中实现多租户。

2.  通过在作为客户 ID 的每个键上添加一个因素来实现它。

不过，似乎因为我将使用视图，所以我真的想同时做这两个。在第 2 种情况下，我需要在记录中包含数据，以便可以对其进行索引（或者我可以在映射阶段提取部分键并在客户上建立索引），并且在选项 1 中，我想要它是检索数据时检查的关键部分，以确保我不会发送错误的客户数据。

问题是，这是一项服务，多个客户将进行交互，有时一个客户会创建一些数据，而另一个客户会在第一个客户请求时查看它。但是，在每条记录上放置一个 ACL，列出所有有权查看它的人，至少可以说是有问题的。

我敢打赌，有一种通用的方法或设计模式可以回答这个问题，并且希望能得到一些最佳实践的指导。

如果索引同时对特定的相关数据和客户 ID 进行索引，我还担心性能......大量不同的客户可能会使索引效率低得多。（但也许不是。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:00:00.533

以下是我对您的问题的看法：

> [关于项目 #1 和 2] - 不过，似乎因为我将使用视图，所以我真的想同时做这两个。

这对我来说似乎没有意义。在 Couchbase 中，映射阶段可以包含来自键和值的内容。将数据存储在键和值中几乎没有意义，因为您可以保证在那里有 1:1 的重复。将其存放在最适合存放它的地方；在这种情况下，可能是值。

> 问题是，这是一项服务，多个客户将进行交互，有时一个客户会创建一些数据，而另一个客户会在第一个客户请求时查看它。但是，在每条记录上放置一个 ACL，列出所有有权查看它的人，至少可以说是有问题的。

我的站点还具有存储在单个数据库中的多租户数据。在我的例子中，我使用对象唯一标识符作为我的键。默认情况下，客户可以访问属于他们的所有对象（我有一个用户对象，并且用户与客户帐户相关联）。用户还可以分配给他们额外的权限，从而可以将来自另一个客户的单个对象添加到他们的用户帐户中，从而授予他们查看对象的访问权限。

另一种选择是“通过默默无闻的安全性”并使用 guid 作为随机标识符，让客户可以访问查看他们拥有 guid 的任何对象。

但是，我*不会*尝试将权限存储在对象本身上。那很快就会变得笨拙。您需要考虑您的特定用例，并决定哪种*简单*方法适用于大多数情况，而不支持其他 1-2% 的情况。

# java - 转到方法，从文件中提取信息，然后在拆分后返回它。我收到错误

> ID：15421680
> 
> 赞同：1
> 
> 时间：2013-03-14T22:48:54.217
> 
> 标签：java, arrays, methods, io

```
String[] quarters = new String[100] ;   
quarters[] = information(fileCheck) ;

public static string information(String a)
    {   
        Scanner inFile = new Scanner (new File(a)) ; // opens connection with file

        while (inFile.hasNext())                        // loops while more lines in file
        {
            String line = inFile.nextLine() ;           // brings in next line to be broken up
            String[] tokens = line.split(", ") ;        //stores lines into array tokens
        }       
            inFile.close() ;                            // close connection to file
            return tokens[] ;
    } // end information 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:52:25.227

这不是 Java：

```
return tokens[] ; 
```

也许您的意思是返回令牌数组：

```
return tokens; 
```

如果是这样，请声明返回`String[]`not的方法`String`。

此外，您没有向我们展示这些行的位置：

```
String[] quarters = new String[100] ;   
quarters[] = information(fileCheck) ; 
```

据我们所知，他们赤身裸体地坐在课堂上，而不是任何方法或构造函数中。如果是这样，那不是 Kosher Java，因为第二行不是声明，需要在方法或构造函数中。

# bash - 变量中的通配符，Shell bash，怎么办？变量=$variable2*

> ID：15421685
> 
> 赞同：4
> 
> 时间：2013-03-14T22:49:15.810
> 
> 标签：bash, shell, variables, wildcard

对我来说它有效：

```
diretorio=$(echo 'test 123'*) 
```

但是当我在引号中使用变量时不起作用

```
Var2="test 123" 
diretorio=$(echo '$Var2'*) 
```

如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T22:53:19.817

[你的glob](http://mywiki.wooledge.org/glob)中的错误是

```
diretorio=$(echo '$Var2'*) 
```

是一个镜头`/dev/null`，因为*shell*不会在单引号中扩展变量。

所以 ：

```
diretorio=$(echo "$Var2"*) 
```

了解 ' 和 " 和 ` 之间的区别。参见[http://mywiki.wooledge.org/Quotes](http://mywiki.wooledge.org/Quotes)和[http://wiki.bash-hackers.org/syntax/words](http://wiki.bash-hackers.org/syntax/words)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T02:39:35.270

我可以建议另一种方法吗？不要制作以空格分隔的文件名列表（如果任何文件名包含空格，例如“test 123”，这将导致可怕的混乱），而是使用数组：

```
diretorio=("${Var2}"*)
doSomethingWithAllFiles "${diretorio[@]}"
for umDiretorio in "${diretorio[@]}"; do
    doSomethingWithASingleFile "$umDiretorio"
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T22:53:55.677

使用双引号：

```
diretorio=$(echo "$Var2"*) 
```

单个防止变量替换

# websocket - 当 WebSocket 客户端连接到 WebSocket 服务器时，YourKit 显示 16 MB 字节 [] 正在分配

> ID：15421687
> 
> 赞同：1
> 
> 时间：2013-03-14T22:49:24.710
> 
> 标签：websocket, netty

我在 java 7 se 嵌入式应用程序中使用 Netty beta 2 websocket 功能，我试图使占用空间尽可能小。我正在使用 -Xms8m 和 -Xmx32m 运行。

当我在 YourKit 中分析应用程序时，一旦客户端与服务器建立 websocket 通道，基本的 byte[] 类型大小就会从 2 MB 跳到 16 MB。

*   注意：这是在握手之后，但在发送任何 websocket 消息之前

有没有其他人看到过这个，你知道这个分配是做什么的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T05:44:59.850

我认为这是因为我们在 Netty 4 中默认使用的池化 ByteBufAllocator。它将分配大块字节并将其放入池中，并在请求较小尺寸时仅使用它的“切片”。这有助于堆上的内存布局等。

如果您想使用低内存（并降低一些性能），请使用未池化的 ByteBufAllocator。

对于客户：

```
bootstrap.option(ChannelOption.ALLOCATOR, UnpooledByteBufAllocator.DEFAULT); 
```

对于服务器：

```
bootstrap.childOption(ChannelOption.ALLOCATOR, UnpooledByteBufAllocator.DEFAULT); 
```

# prototypejs - 原型 1.7：有没有办法序列化表单之外的元素？

> ID：15421689
> 
> 赞同：1
> 
> 时间：2013-03-14T22:49:26.933
> 
> 标签：prototypejs

在原型中，有没有办法在使用查找后序列化页面上的所有“输入”元素`$$`？我必须处理一些没有任何表单或某些元素在表单之外的页面，因此不能使用 Form.serialize 或 Form.serializeElements。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:10:14.610

实际上，您可以`Form.serialzeElements()`在表单之外使用，您只需将元素列表传递给它。

例如

HTML

```
<input type="text" name="a" id="a" value="12345" />
<input type="text" name="b" id="b" value="6789" /> 
```

Javascript

```
Form.serializeElements($$('input')) 
```

返回

```
a=12345&b=6789 
```

[在这个 jsfiddle http://jsfiddle.net/av5Kj/](http://jsfiddle.net/av5Kj/)中尝试一下

# java - 使用 Switch 语句计算 Twitter 搜索 API 中的表情符号？爪哇

> ID：15421690
> 
> 赞同：-4
> 
> 时间：2013-03-14T22:49:30.907
> 
> 标签：java

我已经查看是否有其他人问过这个问题，或者是否有类似类型的问题，但我找不到任何问题。

我创建了访问 Twitter 搜索 API 的代码。我能够访问 Twitter，并取回一些推文。但是我应该创建一个计算表情符号的应用程序。我创建了一个 Switch case 语句，它列出了我希望搜索 API 通过的所有表情符号，并且我想要对它们进行计数。如果它通过一个表情符号并且它在推文中，我希望它计算它。我有超过 100 个表情符号，我在它们自己的 switch case 语句中将它们分开。我如何计算可能出现在推文中的表情符号？请在java中。或者你能告诉我一条替代路线吗？

嗯不错

这是我的 Twitter 搜索 API 代码：

```
 public class searchingTwitter {
public static void main(String[] args) throws IOException {
    BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
    String urlstr = "http://search.twitter.com/search.json?q=";
    // that is the Twitter search API, i can request a search query and get tweets related to query
    StringBuffer buff = new StringBuffer();
    System.out.print("Search for : "); // this is where you input what you want the tweets on
    urlstr += in.readLine();
    URL url = new URL(urlstr);
    BufferedReader br = new BufferedReader(new InputStreamReader(url.openConnection().getInputStream()));
    // opens a connection to twitter and gets the tweets
    int c;
    while ((c=br.read()) !=-1) { // stores the tweets
        buff.append((char)c); 
    }br.close();    

    JSONObject js = new JSONObject(buff.toString()); //converts whatever is buffered from Twitter to String
    JSONArray tweets = js.getJSONArray("results");
    // results = array, represents a single tweet and all the information regarding that tweet
            JSONObject tweet;
    for(int i=0;i<tweets.length();i++) {
        tweet = tweets.getJSONObject(i);
        System.out.println((i+5)+") "+tweet.getString("from_user") // username of tweeter
                +" at "+tweet.getString("created_at")); // time tweet written/created
        System.out.println(tweets.getJSONObject(i).getString("text")+"\n"); // Prints out the tweet texts, one on a new line everytime
} 
```

我怎么称呼幸福课？以便它可以查看并计算。

谢谢你帮助我！这是为了我的论文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:53:04.307

使用地图而不是开关。开关实际上适用于具有特定代码片段执行的小型数据集。对于关联数据块来说，地图要好得多。同样在 jdk 7 之前，只有 int 可以用于 switch 语句。

```
public void updateEmoticonMap(Map<String,Integer> countMap, String emoticon){
    Integer count = countMap.get(emoticon);
    if(count == null){
        count = 0;
    }
    count++;
    countMap.put(emoticon,count);
} 
```

# python - 提交带有机械化 HTTP 错误 500 的表单

> ID：15421692
> 
> 赞同：0
> 
> 时间：2013-03-14T22:49:34.333
> 
> 标签：python, python-2.7, mechanize, form-submit, mechanize-python

这是我第一次使用 mechanize，我正在尝试使用 mechanize 填写表格

这是我的浏览器选项：

```
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

br.addheaders = br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-    US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')] 
```

我用有效值填写表单并点击 br.submit() 但它给了我 HTTP：错误 500：内部服务器错误。我假设它检测到它是一个机器人或提交的东西？但我认为这就是 addheaders 应该处理的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:42:16.043

你可以使用[http://grablib.org/docs/](http://grablib.org/docs/)，它更容易更高效。试试看。在linux上安装：

点安装 pycurl lxml

点安装抓取

```
from grab import Grab

g = Grab()
g.go('http://google.com') # go to google.com
g.choose_form(0)  #form number
g.set_input('q', 'test')  # 'q'-input name, 'test' - search query
g.submit()  # send request
print g.xpath_list('//a/text()') # view xpath result link list 
```

对不起我的英语不好。

# c# - 无法通过 APNS 向设备发送 MDM 推送通知。

> ID：15421702
> 
> 赞同：0
> 
> 时间：2013-03-14T22:50:44.960
> 
> 标签：c#, mdm

无法通过 APNS 向设备发送 MDM 推送通知。

我们正在通过控制注册的设备来安装我们自己的 MDM 服务器。

我们的 MDM 服务器是 64 位 Windows 2008 R2 服务器。我们使用使用我们的企业许可证创建的 mdm 证书从网站[https://identity.apple.com/pushcert/获得了推送证书。](https://identity.apple.com/pushcert/)

我们还使用配置文件完成了设备的注册。我们可以使用配置文件中提供的签入 url 检索 pushmagic 和 UDID。

现在使用该信息，我们尝试将推送通知发送到苹果沙箱服务器“gateway.sandbox.push.apple.com”。我已经在 MDM 服务器中安装了从苹果收到的推送证书（通过将 pem 转换为 p12）。

我们使用 C#(MOONAPNS/PUSHSHARP) 作为程序将有效负载信息发送到 APNS。我们发送的信息类似于 {"mdm","C00B83E6-7B66-4DE3-BBE4-B728E0E3E16F"} 以及设备令牌。这永远不会唤醒设备。连接到 APNS 的 c# 程序没有抛出任何错误，并说成功发送。但是 APNS 似乎没有唤醒 ipad 设备（基于 ipad 中的日志。）

我完全被困在这里，不知道如何进一步进行。如何调试这个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T17:46:19.557

我相信你有错误的证书。您需要在您的个人资料中切换一个不同的开关才能成为 MDM 供应商，以便获得正确的证书来管理您正在尝试的设备。您不能将您获得的证书与您的企业帐户一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-26T15:11:54.960

对于 MDM，您不需要使用沙盒 URL，您可以使用生产 URL 本身。尝试通过 gateway.push.apple.com，端口 2195 使用生产环境。

参考[这个](https://stackoverflow.com/a/10629281/8472539)

# symfony - 具有两个相同类型实体的实体

> ID：15421703
> 
> 赞同：0
> 
> 时间：2013-03-14T22:50:47.003
> 
> 标签：symfony, doctrine, entity-relationship, database-schema

我正在编写一个小游戏，需要一个代表玩家和比赛的数据库。

玩家有名字、玩家ID和等级。一场比赛有一个 ID 和两个玩家。

## 播放器

*   id（大整数）
*   名称（字符串）
*   玩家ID（字符串）
*   排名（整数）

## 匹配

*   id（大整数）
*   匹配ID（字符串）
*   playerOne（玩家）
*   playerTwo（玩家）

最终，我想在 Player 中有一个“匹配”关系，但我不明白的一点是如何让一个实体有两个相同类型的实体，我应该使用什么类型的关系？

我尝试过使用 onetoone 关系，但它创建的 UNIQUE 条件是个问题。

欢迎任何想法。

干杯。

西里尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:56:25.377

你需要一个多对多的关系。这通常使用“中间”或“链接”表来完成。在此示例中，该`PlayedMatch`表是链接表。

这实际上是 Player 和 Match 之间的单个多对多关系。但是，它由 2 个一对多关系表示：

玩家 [1] --> [n] PlayedMatch

比赛 [1] --> [n] PlayedMatch

```
Player
  Id
  Name
  Rank

Match
  Id

PlayedMatch
  Id
  MatchId
  Player1Id
  Player2Id 
```

我看到您有一些名为 PlayerId 和 MatchId 的字符串属性。如果可以，请避免使用这些名称，因为它们通常用于外键关系。

您可能希望`PlayedMatch`表中有更多属性，例如`WinnerId`（链接到播放器）。

上面的 SQL 查询看起来像这样：

```
SELECT 
  *
FROM
  PlayedMatch pm
    INNER JOIN Player p1 ON pm.Player1Id = p1.Id
    INNER JOIN Player p2 ON pm.Player2Id = p2.Id
    INNER JOIN Match m ON pm.MatchId = m.Id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:04:48.843

如果您想轻松找到每个玩家的所有比赛，您将需要使用`ManyToMany`关系。以下是类的外观的简化片段。

```
class Player {

    /**
     * @ORM\ManyToMany(targetEntity="Match", mappedBy="players")
     */
    protected $matches;

}

class Match {

    /**
     * @ORM\ManyToMany(targetEntity="Player", inversedBy="matches")
     */
    protected $players;

} 
```

然后从根目录运行以下命令：

```
php app/console doctrine:generate:entities Your/AwesomeBundle/Entity 
```

您将能够使用以下方法：

```
Match::getPlayers()
Match::addPlayer()
Player::addMatch() // probably will have an 'e' at the end of the word match
Player::getMatches() // which is the one that will give you all matches of a user 
```

您需要在代码中限制每场比赛的玩家人数。

# spring - Spring/JSF2 和 @ViewScoped

> ID：15421704
> 
> 赞同：0
> 
> 时间：2013-03-14T22:50:53.253
> 
> 标签：spring, jsf-2, managed-bean

我想为我的 JSF2 控制器使用 spring 管理的 bean，以便自动装配工作。`@ViewScoped`我知道春天没有，而且我知道一些`@ViewScoped`在各种博客中浮动的实现（一个来自 primefaces 领导）。

**它们中的任何一个是否在实际应用程序中使用并被认为是稳定的？**也许其中之一被推荐或广泛使用，我只是找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:58:08.403

有一个:) 没有内存泄漏和`@PreDestroy`支持。在生产中测试。[在这里](https://github.com/michail-nikolaev/primefaces-spring-scopes/blob/master/primefaces-scopes-test/src/main/java/org/nkey/primefaces/scopes/test/spring/scope/ViewScope.java)。

```
package org.nkey.primefaces.scopes.test.spring.scope;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.ObjectFactory;
import org.springframework.beans.factory.config.Scope;

import javax.faces.component.UIViewRoot;
import javax.faces.context.FacesContext;
import javax.faces.event.PreDestroyViewMapEvent;
import javax.servlet.http.HttpSession;
import javax.servlet.http.HttpSessionBindingEvent;
import javax.servlet.http.HttpSessionBindingListener;
import java.io.Serializable;
import java.util.HashSet;
import java.util.Map;
import java.util.Set;
import java.util.WeakHashMap;

/**
 * @author m.nikolaev Date: 21.11.12 Time: 0:37
 */
public class ViewScope implements Scope, Serializable, HttpSessionBindingListener {
    private static final Logger LOGGER = LoggerFactory.getLogger(ViewScope.class);
    private final WeakHashMap<HttpSession, Set<ViewScopeViewMapListener>> sessionToListeners = new WeakHashMap<>();

    @Override
    public Object get(String name, ObjectFactory objectFactory) {
        Map<String, Object> viewMap = FacesContext.getCurrentInstance().getViewRoot().getViewMap();
        //noinspection SynchronizationOnLocalVariableOrMethodParameter
        synchronized (viewMap) {
            if (viewMap.containsKey(name)) {
                return viewMap.get(name);
            } else {
                LOGGER.debug("Creating bean {}", name);
                Object object = objectFactory.getObject();
                viewMap.put(name, object);

                return object;
            }
        }
    }

    @Override
    public Object remove(String name) {
        throw new UnsupportedOperationException();
    }

    @Override
    public String getConversationId() {
        return null;
    }

    @Override
    public void registerDestructionCallback(String name, Runnable callback) {
        LOGGER.debug("registerDestructionCallback for bean {}", name);
        UIViewRoot viewRoot = FacesContext.getCurrentInstance().getViewRoot();
        ViewScopeViewMapListener listener =
                new ViewScopeViewMapListener(viewRoot, name, callback, this);

        viewRoot.subscribeToViewEvent(PreDestroyViewMapEvent.class, listener);

        HttpSession httpSession = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(true);
        final Set<ViewScopeViewMapListener> sessionListeners;
        synchronized (sessionToListeners) {
            if (!sessionToListeners.containsKey(httpSession)) {
                sessionToListeners.put(httpSession, new HashSet<ViewScopeViewMapListener>());
            }
            sessionListeners = sessionToListeners.get(httpSession);
        }
        //noinspection SynchronizationOnLocalVariableOrMethodParameter
        synchronized (sessionListeners) {
            Set<ViewScopeViewMapListener> toRemove = new HashSet<>();
            for (ViewScopeViewMapListener viewMapListener : sessionListeners) {
                if (viewMapListener.checkRoot()) {
                    toRemove.add(viewMapListener);
                }
            }
            sessionListeners.removeAll(toRemove);
            sessionListeners.add(listener);
        }
        if (!FacesContext.getCurrentInstance().getExternalContext().getSessionMap().containsKey("sessionBindingListener")) {
            FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("sessionBindingListener", this);
        }

    }

    @Override
    public Object resolveContextualObject(String key) {
        return null;
    }

    @Override
    public void valueBound(HttpSessionBindingEvent event) {
        LOGGER.debug("Session event bound {}", event.getName());
    }

    @Override
    public void valueUnbound(HttpSessionBindingEvent event) {
        LOGGER.debug("Session event unbound {}", event.getName());
        final Set<ViewScopeViewMapListener> listeners;
        synchronized (sessionToListeners) {
            if (sessionToListeners.containsKey(event.getSession())) {
                listeners = sessionToListeners.get(event.getSession());
                sessionToListeners.remove(event.getSession());
            } else {
                listeners = null;
            }
        }
        if (listeners != null) {
            for (ViewScopeViewMapListener listener : listeners) {
                listener.doCallback();
            }
        }
    }

    public void clearFromListener(ViewScopeViewMapListener listener) {
        LOGGER.debug("Removing listener from map");
        HttpSession httpSession = (HttpSession) FacesContext.getCurrentInstance().getExternalContext().getSession(false);
        if (httpSession != null) {
            synchronized (sessionToListeners) {
                if (sessionToListeners.containsKey(httpSession)) {
                    sessionToListeners.get(httpSession).remove(listener);
                }
            }
        }
    }

} 
```

# php - require_once 失败

> ID：15421705
> 
> 赞同：-1
> 
> 时间：2013-03-14T22:50:53.817
> 
> 标签：php

我快要疯了。不知道为什么它总是失败。

```
index.php
chdir(__DIR__);
if(!defined('ARCTICA_CORE_DIR'))
    define('ARCTICA_CORE_DIR', './arctica/core/');

require_once(ARCTICA_CORE_DIR . 'Arctica.php');

echo ARCTICA_CORE_DIR -> Correctly outputs ./arctica/core/

BUUUUUUT;

Warning: require_once(./arctica/core/Arctica.php): failed to open stream: No such file or directory in C:\wamp\www\Arctica\index.php on line 18
Fatal error: require_once(): Failed opening required './arctica/core/Arctica.php' (include_path='.;C:\php\pear') in C:\wamp\www\Arctica\index.php on line 18 
```

操作系统是 Windows 7。

这是我的应用程序的路径：

```
C:\wamp\www\Arctica\index.php 
```

这是我试图要求的文件路径：

```
C:\wamp\www\Arctica\arctica\core\Arctica.php 
```

怎么了？我错过了什么吗？我敢打赌这是我忽略的一点……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:55:00.413

可能`C:\wamp\www\Arctica\arctica`不在您的包含路径中。说`(include_path='.;C:\php\pear')`。您可以找到`echo get_include_path();`并添加您自己的路径[`set_include_path`](http://www.php.net/manual/en/function.set-include-path.php)

真的不需要为此开始玩`chdir();`。

我也将删除点。

`define('ARCTICA_CORE_DIR', '/arctica/core/');`

那么为什么不直接使用完整路径呢？

```
define('ARCTICA_CORE_DIR', __DIR__.'/arctica/core/'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:30:11.437

问题是有第二个不必要的 .php 扩展名。`Arctica.php.php.`

Windows 7 没有显示文件扩展名。当我将文件复制到 linux 环境中时，我注意到了这一点。

# java - 如何使用 Swing 类 Java 绘制网格并在单击和拖动时检测鼠标位置

> ID：15421708
> 
> 赞同：6
> 
> 时间：2013-03-14T22:51:09.030
> 
> 标签：java, swing, grid, jpanel, mouseover

我正在尝试使用 Swing 类创建一个网格 UI (5*5)。我尝试了一个嵌套循环并将一个 jPanel 动态添加到 jFrame。我还尝试在用户单击并放下每个 jPanel 时更改其背景颜色。但是对于我的代码，每个单元格之间存在巨大的差距，我无法让拖动事件起作用。

```
public class clsCanvasPanel extends JPanel {
    private static final int intRows = 5;
    private static final int intCols = 5;
    private List<JPanel> jpllist = new ArrayList<JPanel>();

    public clsCanvasPanel() {                           
        /*
         * 
         * Add eventListener to individual JPanel within CanvasPanel
         *
         * 
         * TODO : 
         * 1) mousePressed --> update Temperature and HeatConstant of clsElement Class
         * 2) start a new thread and  
         * 3) call clsElement.run() method
         * 
         * 
         * Right Now : it updates the colours of the JPanel
         * */
          MouseListener mouseListener = new MouseAdapter() {
             @Override
             public void mousePressed(MouseEvent e) {
                JPanel panel = (JPanel) e.getSource();

                Component[] components = panel.getComponents();
                for (Component component : components) {
                   component.setVisible(!component.isVisible());
                   component.setBackground(new Color(255,255,0));
                }
                panel.revalidate();
                panel.repaint();
             }
          };

          //TODO : refactoring
          GridLayout gdlyPlates = new GridLayout();
          gdlyPlates.setColumns(intCols);
          gdlyPlates.setRows(intRows);
          gdlyPlates.setHgap(0);
          gdlyPlates.setVgap(0);
          setLayout(gdlyPlates);

          //TODO : refactoring
          for (int row = 0; row < intRows; row++) {
              for (int col = 0; col < intCols; col++) {
                 JPanel panel = new JPanel(new GridBagLayout());
                 panel.setOpaque(false);
                 JPanel jl = new JPanel();
                 jl.setVisible(true);
                 panel.add(jl);
                 panel.addMouseListener(mouseListener);
                 jpllist.add(panel);
                 add(panel);
              }
           }
    }
} 
```

所以现在我正在尝试创建一个面板并在其上绘制网格，然后检测网格上的鼠标位置，进一步更改每个单元格的颜色。

有人可以给我一些关于如何在 JPanel 上实现这个网格的建议，并更改所选单元格的颜色。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-15T00:42:24.017

有很多方法可以让它发挥作用，具体取决于您想要实现的目标。

第一个示例仅使用 2D 图形 API 来呈现单元格并`MouseMotionListener`监视突出显示的单元格。

![在此处输入图像描述](../Images/0233f9ee66e0d1565ca2b8dfb7e8c033.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestGrid01 {

    public static void main(String[] args) {
        new TestGrid01();
    }

    public TestGrid01() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private int columnCount = 5;
        private int rowCount = 5;
        private List<Rectangle> cells;
        private Point selectedCell;

        public TestPane() {
            cells = new ArrayList<>(columnCount * rowCount);
            MouseAdapter mouseHandler;
            mouseHandler = new MouseAdapter() {
                @Override
                public void mouseMoved(MouseEvent e) {
                    Point point = e.getPoint();

                    int width = getWidth();
                    int height = getHeight();

                    int cellWidth = width / columnCount;
                    int cellHeight = height / rowCount;

                    selectedCell = null;
                    if (e.getX() >= xOffset && e.getY() >= yOffset) {

                        int column = (e.getX() - xOffset) / cellWidth;
                        int row = (e.getY() - yOffset) / cellHeight;

                        if (column >= 0 && row >= 0 && column < columnCount && row < rowCount) {

                            selectedCell = new Point(column, row);

                        }

                    }
                    repaint();

                }
            };
            addMouseMotionListener(mouseHandler);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        public void invalidate() {
            cells.clear();
            selectedCell = null;
            super.invalidate();
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();

            int width = getWidth();
            int height = getHeight();

            int cellWidth = width / columnCount;
            int cellHeight = height / rowCount;

            int xOffset = (width - (columnCount * cellWidth)) / 2;
            int yOffset = (height - (rowCount * cellHeight)) / 2;

            if (cells.isEmpty()) {
                for (int row = 0; row < rowCount; row++) {
                    for (int col = 0; col < columnCount; col++) {
                        Rectangle cell = new Rectangle(
                                xOffset + (col * cellWidth),
                                yOffset + (row * cellHeight),
                                cellWidth,
                                cellHeight);
                        cells.add(cell);
                    }
                }
            }

            if (selectedCell != null) {

                int index = selectedCell.x + (selectedCell.y * columnCount);
                Rectangle cell = cells.get(index);
                g2d.setColor(Color.BLUE);
                g2d.fill(cell);

            }

            g2d.setColor(Color.GRAY);
            for (Rectangle cell : cells) {
                g2d.draw(cell);
            }

            g2d.dispose();
        }
    }
} 
```

此示例确实使用窗口调整了网格的大小，但是使单元格固定大小将是一个微不足道的更改。

查看[2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)了解更多详情

**更新组件示例**

此示例使用一系列`JPanel`s 来表示每个单元格。

每个单元格都定义有固定的宽度和高度，并且不随主窗口调整大小。

![在此处输入图像描述](../Images/dc6f798fc09cea7d45f019595be735f5.png)

在此示例中，每个单元格面板都有自己的鼠标侦听器。重新编码并不会太难，这样主面板就有一个鼠标监听器，而是自己管理工作负载。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.Border;
import javax.swing.border.MatteBorder;

public class TestGrid02 {

    public static void main(String[] args) {
        new TestGrid02();
    }

    public TestGrid02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new GridBagLayout());

            GridBagConstraints gbc = new GridBagConstraints();
            for (int row = 0; row < 5; row++) {
                for (int col = 0; col < 5; col++) {
                    gbc.gridx = col;
                    gbc.gridy = row;

                    CellPane cellPane = new CellPane();
                    Border border = null;
                    if (row < 4) {
                        if (col < 4) {
                            border = new MatteBorder(1, 1, 0, 0, Color.GRAY);
                        } else {
                            border = new MatteBorder(1, 1, 0, 1, Color.GRAY);
                        }
                    } else {
                        if (col < 4) {
                            border = new MatteBorder(1, 1, 1, 0, Color.GRAY);
                        } else {
                            border = new MatteBorder(1, 1, 1, 1, Color.GRAY);
                        }
                    }
                    cellPane.setBorder(border);
                    add(cellPane, gbc);
                }
            }
        }
    }

    public class CellPane extends JPanel {

        private Color defaultBackground;

        public CellPane() {
            addMouseListener(new MouseAdapter() {
                @Override
                public void mouseEntered(MouseEvent e) {
                    defaultBackground = getBackground();
                    setBackground(Color.BLUE);
                }

                @Override
                public void mouseExited(MouseEvent e) {
                    setBackground(defaultBackground);
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(50, 50);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-03T11:17:01.383

我不喜欢渲染边框，因为在网格内部，如果有比示例更多的边框，则会复制一些边框。我认为这个解决方案更好：

```
private int width;
private int height;

// ...

for (int row = 0; row <= this.height; row++) {
    for (int col = 0; col <= this.width; col++) {
        gbc.gridx = col;
        gbc.gridy = row;

        CellPane cellPane = new CellPane();
        Border border = new MatteBorder(1, 1, (row == this.height ? 1 : 0), (col == this.width ? 1 : 0), Color.GRAY);

        cellPane.setBorder(border);
        this.add(cellPane, gbc);
    }
} 
```

编辑：

我的解决方案更好，因为如果原始代码将是 5x5 单元格，但更多，例如 10x10 ... 一些单元格的内边缘会接触并在某些地方创建粗网格。很高兴在屏幕截图上看到 [粗网格](http://i.stack.imgur.com/J4EvK.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T07:02:51.387

在 mouseMoved 方法的 MouseListener 示例中，您可能需要考虑 xOffset/yOffset 以实现更平滑的单元格识别。

```
int column = (x - xOffset) / cellWidth;
int row = (y - yOffset) / cellHeight; 
```

# android - 基于 View 的 Android RelativeLayout 对齐方式以编程方式添加

> ID：15421709
> 
> 赞同：1
> 
> 时间：2013-03-14T22:51:09.170
> 
> 标签：android, android-layout, android-relativelayout

我以编程方式创建了一个名为 DataTable 的 TableLayout（类似于[Create TableLayout programmatically](https://stackoverflow.com/questions/1528988/create-tablelayout-programatically)）。现在我需要以编程方式将表添加到RelativeLayout。我尝试以下方法：

```
DataTable dataTable = new DataTable(getApplicationContext(), data);
RelativeLayout rootLayout = (RelativeLayout) findViewById(R.id.rel_view);
rootLayout.addView(dataTable); 
```

数据表显示但对齐混乱。我现在的问题是设置与 dataTable 相关的其他组件。

下面我将展示我想要结束的内容。除了，`my_table`是 dataTable 应该去的地方。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rel_view"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MyViewActivity" >

    <TableLayout
        android:id="@+id/my_table"
        android:layout_alignParentTop="true" />

    <Spinner
    android:id="@+id/my_spinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/my_table" />

    <Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/my_table"
    android:layout_toRightOf="@id/my_spinner"
    android:text="@string/button_mine"
    android:onClick="buttonPushed" />

</RelativeLayout> 
```

一种想法是基本上保持 xml 布局与我的方式相同，然后以某种方式替换`my_table`为 dataTable，保留`id`和`layout_alignParentTop`字段。我不知道该怎么做。

另一个想法是使用

```
RelativeLayout.LayoutParams layout = new RelativeLayout.LayoutParams(LayoutParams.blahblah) 
```

但我不知道如何设置对齐方式。同样，`id`与其他观点无关。

**如果上述内容不清楚**，我的主要问题是：在 RelativeLayout 中，如何将 xml 硬编码元素（Button 和 Spinner）与以编程方式添加的元素（TableLayout）对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:01:49.627

您可以在布局中添加一个额外的项目（ a`ViewGroup`或 a `LinearLayout`），作为`View`您拥有的动态创建的容器。将`Spinner`和`Button`与这个额外的项目对齐。无需将视图直接添加到布局的根视图中，而是将其添加到容器中。它应该始终保持您在 xml 布局文件中设置的对齐方式。例如，此布局应始终保持您的`DataTable`低于您的`Spinner`：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/rel_view"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MyViewActivity" >

    <TableLayout
        android:id="@+id/my_table"
        android:layout_alignParentTop="true" />

    <Spinner
    android:id="@+id/my_spinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/my_table" />

    <Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/my_table"
    android:layout_toRightOf="@id/my_spinner"
    android:text="@string/button_mine"
    android:onClick="buttonPushed" />

    <LinearLayout
        android:id="@+id/my_container"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:layout_below="@id/my_spinner"/>

</RelativeLayout> 
```

# ruby-on-rails - 山狮红宝石中的Https证书错误

> ID：15421713
> 
> 赞同：0
> 
> 时间：2013-03-14T22:51:29.950
> 
> 标签：ruby-on-rails, omniauth

我有一个应用程序正在使用[omniauth-singly](https://github.com/Singly/omniauth-singly)。

它一直运行良好，但是我现在尝试在 Mac OS Mountain lion 上使用它，每当我尝试使用身份验证时都会收到以下错误。

Faraday::Error::ConnectionFailed at /auth/singly/callback

SSL_connect 返回=1 errno=0 state=SSLv3 读取服务器证书B：证书验证失败

我试过安装不同的东西，比如 ca certs 和 faraday，但我似乎无法让它工作。

我怎样才能停止这个错误，以便我可以使用singly-oauth api？

# couchdb - 如何使用 elasticsearch river 插件索引 couchdb 文档的所有修订

> ID：15421720
> 
> 赞同：1
> 
> 时间：2013-03-14T22:52:21.880
> 
> 标签：couchdb, elasticsearch

我知道如何设置河流插件并搜索它。问题是如果多次编辑同一个文档（多个修订版），来自最旧修订版的数据会被保留，而旧数据会丢失。我打算能够为我的整个 couchdb 保留所有修订的索引，因此我不必保留我的 couchdb 上的历史记录并使用 elasticsearch 检索文档上的历史记录，而不必去蒲团。我知道问题将是在索引时唯一确定 couchdb 文档的键，但我们可以将“修订”号附加到键上，并且每个键都是唯一的。

我在任何文档中都找不到这样做的方法。有没有人知道如何做到这一点。

欢迎任何建议/想法。

编辑1：更明确地说，目前elasticsearch保存couchdb文档是这样的：

```
"_index": "foo",
"_type": "foo",
"_id": "27fd33f3f51e16c0262e333f2002580a",
"_score": 1.0310782,
"_source": {
    "barVal": "bar",
    "_rev": "3-d10004227969c8073bc573c33e7e5cfd",
    "_id": "27fd33f3f51e16c0262e333f2002580a", 
```

这里来自 couchdb 的 _id 与搜索索引的 _id 相同。我希望搜索索引是来自 couchdb 的 concat("_id","_rev") 。

编辑 2：（在尝试了@DaveS 解决方案之后）所以我尝试了以下方法，但它没有用 - 搜索仍然根据 couchdb 的 _id 对其进行索引

我做了什么：

```
curl -XDELETE 127.0.0.1:9200/_all
curl -XPUT 'localhost:9200/foo_test' -d '{
  "mappings": {
    "foo_test": {
      "_id": {
        "path": "newId",
        "index": "not_analyzed",
        "store": "yes"
      }
    }
  }
}'

curl -XPUT 'localhost: 9200/_river/foo_test/_meta' -d '{
  "type": "couchdb",
  "couchdb": {
    "host": "127.0.0.1",
    "port": 5984,
    "db": "foo_test",
    "script": "ctx.doc.newId = ctx.doc._id + ctx.doc._rev",
    "filter": null
  },
  "index": {
    "index": "foo_test",
    "type": "foo_test",
    "bulk_size": "100",
    "bulk_timeout": "10ms"
  }
}' 
```

在此之后，当我搜索我添加的文档时，我得到：

```
_index: foo_test
_type: foo_test
_id: 53fa6fcf981a01b05387e680ac4a2efa
_score: 8.238497
_source: {
    _rev: 4-8f8808f84eebd0984d269318ad21de93
    content: {
        foo: bar
        foo3: bar3
        foo2: bar2
    }
    _id: 53fa6fcf981a01b05387e680ac4a2efa
    newId: 53fa6fcf981a01b05387e680ac4a2efa4-8f8808f84eebd0984d269318ad21de93 
```

@DaveS - 希望这有助于解释弹性搜索没有使用新路径来定义其“_id”字段。

编辑 3 - 用于@dadoonet。希望这可以帮助

这就是您获取 couchdb 的所有旧版本信息的方式。然后，您可以遍历可用的并获取它们的数据并为它们编制索引：

1.  获取 doc id 上所有修订的列表：

    curl http://:5984/testdb/cde07b966fa7f32433d33b8d16000ecd?revs_info=true {"_id":"cde07b966fa7f32433d33b8d16000ecd", "_rev":"2-16e89e657d637c67749c88375e662f:","foobar"," "_revs_info":[ {"rev":"2-16e89e657d637c67749c8dd9375e662f", "status":"available"}, {"rev":"1-4c6114c65e295552ab1019e2b046b10e", "status":"available"}]}

然后您可以通过（如果状态可用）检索每个版本：

```
curl http://<foo>:5984/testdb/cde07b966fa7f32433d33b8d16000ecd?rev=1-4c6114c65e295552ab1019e2b046b10e
{"_id":"cde07b966fa7f32433d33b8d16000ecd",
 "_rev":"1-4c6114c65e295552ab1019e2b046b10e",
 "foo":"bar"}

curl http://<foo>:5984/testdb/cde07b966fa7f32433d33b8d16000ecd?rev=2-16e89e657d637c67749c8dd9375e662f
{"_id":"cde07b966fa7f32433d33b8d16000ecd",
 "_rev":"2-16e89e657d637c67749c8dd9375e662f",
 "foo":"bar",
 "foo2":"bar2"} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:10:16.783

我不认为你可以。只是因为据我记得，CouchDb 不保存旧版本的文档。压缩后，旧版本被删除。

也就是说，即使在 CouchDB 中可行，您也不能在 Elasticsearch 中存储文档的不同版本。

为此，您必须为新文档定义一个 ID：例如：DOCID_REVNUM

这样，新修订版不会更新现有文档。

CouchDB 河现在还没有这样做。

我建议您在 CouchDB 中管理它（也就是为文档的每个新版本创建新文档），并让*标准*的CouchDB River 将其作为另一个文档进行索引。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:07:00.070

您可能会考虑调整映射以从生成的字段中提取 _id 字段，例如从[文档中](http://www.elasticsearch.org/guide/reference/mapping/id-field.html)：

```
{
    "couchdoc" : {
        "_id" : {
            "path" : "doc_rev_id"
        }
    }
} 
```

然后“只是”修改河流以连接字符串并将结果添加到`my_concat_field`. 一种方法可能是使用couchdb 河提供的[脚本过滤器插件。](https://github.com/elasticsearch/elasticsearch-river-couchdb/blob/master/README.md#script-filters)例如这样的：

```
{
    "type" : "couchdb",
    "couchdb" : {
        "script" : "ctx.doc.doc_rev_id = ctx.doc._id + '_' + ctx.doc._rev"
    }
} 
```

您可以将上面的代码片段和`PUT`它带到河流的终点，可能还有定义的其余部分，例如 via `curl -XPUT 'localhost:9200/_river/my_db/_meta' -d '<snippit from above>`。必要时注意转义引号。

# c++ - C/C++：文字字符串中“\xNNN”格式的固有歧义

> ID：15421722
> 
> 赞同：8
> 
> 时间：2013-03-14T22:52:25.630
> 
> 标签：c++, c, string, hex, literals

考虑这两个字符串：

```
wchar_t* x = L"xy\x588xla";
wchar_t* y = L"xy\x588bla"; 
```

阅读本文后，您会期望两个字符串文字都是相同的，除了一个字符 - an`'x'`而不是 a `'b'`。
事实证明，情况并非如此。第一个字符串编译为：

```
y = {'x', 'y', 0x588,  'x', 'l', 'a' } 
```

第二个实际上是：

```
x = {'x', 'y', 0x588b, 'l', 'a' } 
```

他们甚至不一样的长度！
是的，被十六进制表示 ( ) 字符`'b'`吃掉了。`'\xNNN'`

至少，这可能会导致手写字符串中的混淆和细微错误（您可能会争辩说 unicode 字符串不属于代码主体）

但更严重的问题，也是我面临的问题，是自动生成的代码。似乎没有任何方法可以表达这一点：`{'x', 'y', 0x588, 'b', 'l', 'a' }`作为一个文字字符串而不诉诸以十六进制表示形式编写整个字符串，这是浪费且不可读的。

有什么办法解决这个问题吗？
这种行为的语言有什么意义？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T22:54:19.563

一种简单的方法是使用编译时字符串文字连接，因此：

```
wchar_t const* y = L"xy\x588" L"bla"; 
```

# visual-studio-2010 - 如何从 Visual Studio 连接 Team Foundation Server？

> ID：15421725
> 
> 赞同：1
> 
> 时间：2013-03-14T22:52:46.327
> 
> 标签：visual-studio-2010, tfs

我下载并安装了 Visual Studio 2010 的 Team Foundation 服务器 ( [http://www.microsoft.com/en-us/download/details.aspx?id=15070](http://www.microsoft.com/en-us/download/details.aspx?id=15070) )。之前安装了 Visual Studio Professional 2010。这两个程序都安装到 C:\Program Files (x86)\Microsoft Visual Studio 10.0。

但是，我在 Visual Studio 的工具中看不到连接到 Team Foundation 服务器的选项。所以我不知道下一步该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T07:39:25.220

`Team Foundation Server Console`你的`Start`->中没有`All Programs`设置和配置 TFS 吗？如果这样做了，您可以按照[这篇文章](http://blogs.msdn.com/b/jasonz/archive/2009/10/21/tutorial-getting-started-with-tfs-in-vs2010.aspx)与 TFS 连接。

# php - call_user_func() 验证数组值

> ID：15421726
> 
> 赞同：2
> 
> 时间：2013-03-14T22:52:48.607
> 
> 标签：php, arrays, csv

我想通过数组为字段预设验证规则，例如：

```
$vals = array(
   'val1' => array(
       'rule' => 'ctype_alnum',
   ),
   'val2' => array(
       'rule' => 'ctype_digit',
   ),
); 
```

如果满足基本验证，这些字段将从 CSV 导入并插入数据库。

例如

```
$while ($data = fgetcsv....)

$array['val1'] = $data[2];
$array['val2'] = $data[9];
$array['val3'] = $data[11]; 
```

我想要做的，我不确定如何准确地做到这一点，现在是交叉引用`$array`数组与数组中的预设规则`$fields`。如果任何字段未验证，则该行的导入将中止。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:57:34.937

这应该是您需要的：

```
foreach ($vals as $key => $rule)
{

  if (function_exists($rule['rule']) && !call_user_func($rule['rule'], $array[$key]))
  {
    continue 2;
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:16:09.767

我看到的问题是，您必须确定如何验证每一列，例如，第 0 列是被验证为字母数字还是数字？另一种方法，为每一列提供验证上下文如下所示：

```
$columnsDigit = array(0, 3, 7, 8);
$columnsAlnum = array(1, 2, 4, 5, 6);

$while ($line = fgetcsv....) {

    foreach ($line as $column => $value) {

        if ((in_array($column, $columnsDigit)) && (false === ctype_digit($value))) {
            continue 2;
        }

        elseif ((in_array($column, $columnsAlnum)) && (false === ctype_alnum($value))) {
            continue 2;
        }
    }

    // Do something with your valid line
 } 
```

# html - CSS3 过渡仅适用于 Chrome

> ID：15421737
> 
> 赞同：0
> 
> 时间：2013-03-14T22:53:30.383
> 
> 标签：html, css, hover, css-transitions, transition

如何使这种转换在所有浏览器中都有效？尽管我将这些值应用于所有浏览器，但它仅在 Chrome 中起作用。（我也在其他电脑上试过，结果一样）：

```
.titlu 
{ 
    background:url(images/titlu.png); 
    background-repeat: no-repeat;
    width:716px; 
    height: 237px; 
    display: block; 
    position: absolute; 
    top:460px; 
    right: 255px; 
    z-index: 5;
    -webkit-transition: background 0.20s linear;
    -moz-transition: background 0.20s linear;
    -o-transition: background 0.20s linear;
    transition: background 0.20s linear;
}

.titlu:hover 
{
    width:716px; 
    height: 237px;
    display: block; 
    z-index: 5; 
    background-repeat: no-repeat;
    background-image:url(images/titlu2.png);
} 
```

我被要求更详细地说明问题...我的意思是不工作是 webkit 效果不适用于图像...悬停只是过渡没有生效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:57:30.737

据我所知，交叉淡入淡出的图像目前仅适用于 Chrome 18+、iOS6（可能是其他 WebKit 浏览器？在 Win 7 上的 Safari 中不起作用......）。为了模拟相同的效果，您可以做的是在绝对定位的子元素上设置第二个图像（我说子元素而不是伪元素的原因是伪元素上的转换在其他浏览器中还不起作用，除了Firefox），它与父级占据相同的空间，并将`opacity`该子级的从悬停在父级上更改`0`为。`1`

# [*演示*](http://codepen.io/thebabydino/pen/dsIAg)

**HTML**：

```
<h1 class='titlu'>
  <div class='secondary-bg'></div>
</h1> 
```

**CSS**：

```
.titlu { 
  position: absolute;
  background: url(http://imgsrc.hubblesite.org/hu/db/images/hs-2013-06-a-web.jpg) 
              no-repeat; 
  background-size: 100% 100%;
  width: 16em; 
  height: 10em; 
}
.secondary-bg {
  position: absolute;
  width: inherit; height: inherit;
  opacity: 0;
  background: inherit;
  background-image: 
    url(http://imgsrc.hubblesite.org/hu/db/images/hs-2010-13-a-web.jpg);
  transition: opacity 2s linear;
}
.titlu:hover .secondary-bg { opacity: 1; } 
```

# jquery - jquery 在容器上制作动画，然后取消绑定事件

> ID：15421740
> 
> 赞同：0
> 
> 时间：2013-03-14T22:53:59.490
> 
> 标签：jquery, events, jquery-animate, unbind

嗨，我正在尝试在动画完成后取消绑定事件，并且不想在该容器上触发该事件。我的方法

```
$('#container').on('mouseover.grow', function(){
    $(this).parents('.secondary').animate({height:'360'},1000);
}).off('mouseover.grow'); 
```

但这种方法似乎行不通。任何关于我在这里遗漏的指针将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T22:59:30.447

正如你所做的那样链接`.off()`方法将导致它立即触发。

您需要在方法的`complete`回调中调用它[`.animate()`](http://api.jquery.com/animate/)（即等到动画完成）：

```
$('#container').on('mouseover.grow', function(){
    var $this = $(this); 

    $this.parents('.secondary').animate({height:'360'},1000, function() {
        $this.off('mouseover.grow');
    });
}); 
```

*还要注意，我们赋值`var $this = $(this);`是因为回调函数中的范围`this`会有所不同。*

# git - Git 提取/合并不起作用

> ID：15421741
> 
> 赞同：3
> 
> 时间：2013-03-14T22:54:05.513
> 
> 标签：git

我对代码做了一些更改。

*   git添加-A
*   git commit -m ".."
*   git push 起源大师

> ！[rejected] master -> master (non-fast-forward) error: failed to push some refs to '.....' 为了防止您丢失历史记录，非快进更新被拒绝在推送之前合并远程更改再次。有关详细信息，请参阅“git push --help”的“关于快进的说明”部分。

*   git 获取原始主机

> 远程：计数对象：42，完成。远程：压缩对象：100% (26/26)，完成。远程：总共 26 个（增量 17），重用 0 个（增量 0） 拆包对象：100% (26/26)，完成。从...... * 分支
> 主 -> FETCH_HEAD

*   git 合并大师

> 已经是最新的了。

*   git合并原点/主

> 已经是最新的了。

*   git合并原点/主主

> 已经是最新的了。是啊！

*   git push 起源大师

> ！[rejected] master -> master (non-fast-forward) error: failed to push some refs to '....' 为了防止您丢失历史记录，非快进更新被拒绝了在再次推送之前合并远程更改. 有关详细信息，请参阅“git push --help”的“关于快进的说明”部分。

所以又是一样的。

这是怎么回事？使用 git pull 它可以工作，但我读到使用 fetch/merge 更好，所以请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T23:13:14.423

`git pull``git fetch`将导致与 a和完全相同的结果`git merge`。

`git fetch`工作方式有点不同，具体取决于您如何称呼它。通常你只需调用`git fetch`. 这将从原点更新所有远程分支。之后你自己的分支仍然存在`master`，而远程分支仍然存在`origin/master`，因此如果你想合并`origin/master`到`master`你必须结帐`master`和`git merge origin/master`。

`git fetch origin master`只会获取那个分支并将其存储到一个名为 FETCH_HEAD 的临时分支中。您可以使用`git merge FETCH_HEAD`.

但你可能只想做一个简单的`git pull`. ;)

提示：用于`git branch -av`查看所有本地和远程分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:10:07.077

你检查了哪个分支？ `git merge origin/master master`不针对`master`：您始终合并到当前分支。

# c# - 我不能让这个 AJAX 在 ASP.Net/C# 中触发

> ID：15421742
> 
> 赞同：1
> 
> 时间：2013-03-14T22:54:09.960
> 
> 标签：c#, jquery, asp.net, ajax

我正在使用 ASP.Net ScriptManager 控件。它已经在页面上。

```
<asp:UpdatePanel ID="UpdatePanel3" runat="server">
    <ContentTemplate>
        <asp:Panel ID="cpBox" Visible="false" runat="server">
            <!-- jQuery plugin goes here -->
        </asp:Panel>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="ddlColorChart" />
    </Triggers>
</asp:UpdatePanel> 
```

C#：

```
protected void ddlColorChart_SelectedIndexChanged(object sender, EventArgs e)
{
    if (ddlColorChart.SelectedValue == "1")
    {
        // cpBox.Visible = true;
        /* StringBuilder colorPicker = new StringBuilder();
        colorPicker.Append("$(document).ready(function() {");
        colorPicker.Append("$('#<%=colorPickerBox.ClientID %>').ColorPicker({ flat: true });");
        colorPicker.Append("})");
        ScriptManager.RegisterStartupScript(colorPickerBox, this.GetType(), "colorPicker", colorPicker.ToString(),  true);
        */
    }
} 
```

jQuery：

```
<script type="text/javascript"">
    $(document).ready(function () {
        $('#<%=colorPicker_Box.ClientID %>').ColorPicker({ flat: true });
    });
</script> 
```

如您所见，我尝试使用`ScriptManager.RegisterStartupScript`. 我一生都无法弄清楚如何让 jQuery 插件显示出来。我尝试使用 jQuery AJAX 并迷路了。

编辑：我知道如果我把它放在一个普通的 div 中，插件就可以工作。一旦我添加`'runat="server",'`它就会停止工作（这是有道理的）。有没有办法让我使用 ASP.Net AJAX 来完成这个，而插件的容器不是服务器控件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:09:05.053

`<%= %>`是服务器代码；JavaScript 无法执行它。所以你想从服务器端传递控件的客户端 ID。

```
colorPicker.Append("$('#" + colorPickerBox.ClientID " + 
   "').ColorPicker({ flat: true });"); 
```

更新：如果`ColorPicker`不是服务器控件，那就更简单了——

```
colorPicker.Append("$('#colorPickerBox').ColorPicker({ flat: true });"); 
```

# iphone - 应用程序中的 iOS 消息无法正常工作

> ID：15421743
> 
> 赞同：0
> 
> 时间：2013-03-14T22:54:14.727
> 
> 标签：iphone, ios, mfmessagecomposeview, imessage

我正在开发一个 RSS 应用程序，它需要通过消息发送文章的 url。到目前为止我有这个代码，

```
 MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init] ;{
            if([MFMessageComposeViewController canSendText])
            {
                controller.body = @"Check Out This Informtaion, %@", [NSURL URLWithString:self.feedItem[@"url"]];
                controller.recipients = [NSArray arrayWithObjects: nil];
                controller.messageComposeDelegate = self;
                [self presentModalViewController:controller animated:YES];
            }} 
```

它会起作用，它会在应用程序中打开消息，但它在消息中所说的只是

`Check Out This Information, %@`

当我做同样的事情时

`[NSURL URLWithString:self.feedItem[@"url"]];`

在Safari中打开页面，它可以工作，所以这是正确的，但我不知道如何修复它，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T00:45:28.363

这一行：

```
controller.body = @"Check Out This Informtaion, %@", [NSURL URLWithString:self.feedItem[@"url"]]; 
```

相当于

```
controller.body = @"Check Out This Informtaion, %@";
[NSURL URLWithString:self.feedItem[@"url"]]; 
```

…因为这两个语句是独立执行的。

正如 user2056143 指出的那样，您在值周围缺少 NSString -stringWithFormat: 。IE：

```
controller.body = [NSString stringWithFormat:@"Check Out This Informtaion, %@", [NSURL URLWithString:self.feedItem[@"url"]]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:49:12.287

将正文更改为：

```
controller.body = [NSString stringWithFormat:@"Check Out This <a href=\"%@\">Information<\a>", self.feedItem[@"url"]]; 
```

# jquery - 将 Jquery 与 HTML 链接

> ID：15421745
> 
> 赞同：1
> 
> 时间：2013-03-14T22:54:20.913
> 
> 标签：jquery, html, hyperlink

我不明白这有什么问题。这可能是一个链接问题，但我不知道是哪一个。index.html、script.js 和 jquery 的库文件在我的桌面上。这是代码：

这是 HTML 代码：

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="script.js"></script>
</head>

<body>
    <h1>asdasd</h1>
</body>
</html> 
```

这是 Jquery 外部工作表：

```
$(document).ready((function) {
("h1").click((function) {
    (this).hide();
});
}); 
```

没有 CSS 表，因为我把它简化了，所以我可以确定它没有错，但也许它是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:56:26.283

```
src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" 
```

无协议 URL 不能通过该`file:///`方案工作。

把一个`http://`代替，`//`它应该可以工作。但是，从长远来看，使用 localhost 服务器是一种更好的方法。`=]`

使用本地主机服务器，您可以轻松地运行您的页面，`http://`以便您解决该错误以及您将来可能遇到的许多其他文件权限问题。以下是一些易于安装的服务器：[WAMP](http://www.wampserver.com/en/)、[EasyPHP](http://www.easyphp.org/)、[XAMPP](http://www.apachefriends.org/en/xampp-windows.html)、[BitNami](http://bitnami.org/)

* * *

也`(function)`应该是`function()`，你错过了一个`$`：

```
$(document).ready((function) {
    ("h1").click((function) { 
```

应该

```
$(document).ready(function() {
    $("h1").click(function() { 
```

[尝试通过JSHint](http://jshint.com/)运行您的代码，它会为您找到那些基本的语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:56:48.777

`<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>`

你需要添加`http:`到你`script`的`src`属性

不过，您应该从自己的服务器中提取它。正如克罗克福德所说：

> 使用您自己的副本。从您无法控制的服务器加载代码是非常不明智的。

代码块也有点错误：

```
$(document).ready(function () {
    $("h1").click(function () {
        $(this).hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T22:57:01.747

你错过了 $ 对象

```
$(this).hide(); 
```

# python - Matplotlib：从右到左书写文本（希伯来语、阿拉伯语等）

> ID：15421746
> 
> 赞同：34
> 
> 时间：2013-03-14T22:54:21.010
> 
> 标签：python, matplotlib, hebrew, right-to-left

我正在尝试在我的情节中添加一些文本，即 RTL（在本例中为希伯来语）。经过一些工作设法让它显示文本，但它显示的是 LTR（意思是，以反向顺序）。我已经深入研究了参考并在网上进行了广泛的搜索，但没有任何结果。

我正在使用的示例：

```
import matplotlib.pyplot as plt
plt.text(0.5, 0.5, u'שלום כיתה א', name = 'Arial')
plt.show() 
```

它显示“א התיכ םלוש”。如果您看不到希伯来语，就好像我输入“Hello”，输出将是“olleH”。

我不能简单地反转输入，因为它混合了 LTR 和 RTL。

每一个帮助将不胜感激。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2014-12-30T09:28:48.747

对于**阿拉伯语**`bidi.algorithm.get_display`，您需要两个[`arabic_reshaper`](https://github.com/mpcabd/python-arabic-reshaper)模块：

```
from bidi.algorithm import get_display
import matplotlib.pyplot as plt
import arabic_reshaper

reshaped_text = arabic_reshaper.reshape(u'لغةٌ عربيّة')
artext = get_display(reshaped_text)

plt.text(0.25, 0.45, artext , name = 'Times New Roman',fontsize=50)
plt.show() 
```

![python matplotlib 阿拉伯语文本](../Images/9bc088e5e616fd4ecd15162e86d04610.png)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-16T12:16:02.477

对于遇到同样问题的人，我找到了部分解决方案。

[bidi 包](https://pypi.python.org/pypi/python-bidi)提供了这个功能，所以使用：

```
from bidi import algorithm as bidialg
import matplotlib.pyplot as plt
text = bidialg.get_display(u'שלום כיתה א')
plt.text(0.5, 0.5, text , name = 'Arial')
plt.show() 
```

正确显示它。

那么为什么是局部的呢？因为我发现 bidi 包有时会弄乱我在 matplotlib 中使用的乳胶表达式。所以要小心使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-11-28T17:51:12.900

我有同样的问题，我认为使用@Korem 和@Nasser Al-Wohaibi 的两个答案，例如：

```
import arabic_reshaper
from bidi.algorithm import get_display

new_text=get_display(arabic_reshaper.reshape(old_text))
```

因为只有arabic_reshaper没有重新排列字母，而bidi没有组合它们

^_^

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-09T16:27:36.273

我知道我的答案不是这个问题的解决方案，但使用[Plotly](https://plotly.com)而不是 matplotlib 解决了我的问题。它正确显示波斯语单词。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-08-24T16:42:15.437

您可以尝试通过以下方式翻转文本：

```
import matplotlib.pyplot as plt
plt.text(0.5, 0.5, (u'שלום כיתה א')[::-1], name = 'Arial')
plt.show() 
```

![](../Images/43e60d8c2515216de9b961bf0ca107b1.png)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2019-12-29T21:12:24.697

改用牵牛星。它立即与阿拉伯语/波斯语文本兼容。无需改变任何东西！[https://altair-viz.github.io/index.html](https://altair-viz.github.io/index.html)

# ios - 将新用户添加到 xcode 项目

> ID：15421753
> 
> 赞同：-2
> 
> 时间：2013-03-14T22:54:40.817
> 
> 标签：ios, objective-c, xcode

我已经在我的一个新的 iOS 应用程序上工作了大约 6 个月。我要带另一个人来帮助我完成我的项目，这是我第一次做一个联合项目。

我的问题是，有没有办法保护我的代码不被这个人窃取或试图自己使用它？我相信个人，但我不想冒险。我知道苹果提供临时服务，但我认为这只是为了在应用程序完成后进行测试？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:57:37.770

你们可以使用 Subversion 一起工作。您必须配置 Xcode 才能使用 Subversion。

请在[此处查看详细信息](http://osxdaily.com/2010/06/03/configuring-xcode-to-use-subversion/)

步骤 1.**告诉 Xcode 你的存储库。**

第 2 步。**让我们将您的代码放在 Subversion 服务器上**

步骤 3.**两个人从存储库中签出您新导入的代码**

步骤 4.**通知您的项目它在 SCM 控制下**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:08:54.100

您的问题的简单答案是否定的，如果其他人有代码，他可以“窃取”它。有版权，您可能可以制定法律协议，但这可能不是您想要的。如果您有很大一部分应用程序在服务器上运行，那么这是“安全的”。您不必与他共享整个代码，具体取决于您希望他贡献多少。如您所说，临时构建用于测试，而不是开发。

# c - 了解 C 中的双精度运算

> ID：15421755
> 
> 赞同：0
> 
> 时间：2013-03-14T22:54:45.343
> 
> 标签：c, types, precision, double-precision

我想了解为什么这段代码：

```
double r,d,rc;
scanf("%lf %lf", &r, &d);
rc = (r * r) - (d/2) * (d/2);
printf("%.2f\n", M_PI * rc); 
```

返回比这个更精确的结果（没有`rc`变量赋值）：

```
double r,d,rc;
scanf("%lf %lf", &r, &d);
printf("%.2f\n", M_PI * (r * r) - (d/2) * (d/2)); 
```

另一个相关的问题：为什么`n * n`优于`pow(n,2)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T22:59:44.617

第一个代码示例计算：

```
M_PI * ((r * r) - (d/2) * (d/2)); 
```

第二个计算：

```
(M_PI * (r * r)) - (d/2) * (d/2); 
```

在大多数编译器上，调用与`pow(n, 2)`, 相同。`n * n`将发出*完全相同的程序集。*这是由于称为“强度减少”的优化——大多数`pow()`实现将检查指数是否为 2，并将这种情况减少为单次乘法。未优化的版本稍微贵一些，因为它需要函数调用和一些分支。

请注意，这`M_PI`不是 C 标准的一部分，因此您可以使用等效的，它编译为完全相同的代码：

```
double M_PI = 4.0 * atan(1.0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:01:55.977

回答第二个问题；`pow`旨在执行任意幂，但是当幂恒定时，有一种更快的方法来计算答案也就不足为奇了。单次乘法速度很快（只需一条处理器指令），而调用`pow`需要函数调用开销（暂时忽略优化）和反复乘法直到得到答案的迭代算法。当您可以看到避免此类事情的数学捷径时，您就会使用它。

# audio-streaming - 如何同时实时录制和播放声音？

> ID：15421758
> 
> 赞同：2
> 
> 时间：2013-03-14T22:55:06.003
> 
> 标签：audio-streaming, wav, pcm, waveout

我有一个接收器，我希望能够听到接收器正在传输的音频并将该音频保存为 wav 文件。我编写了一个客户端-服务器应用程序来与接收者通信。接收器正在通过 udp 传输音频，我使用 WaveOut 功能播放音频，但我遇到了一些问题：

1) 有没有办法使用 WaveIn 函数来录制音频？我以这种方式尝试了一些东西，但 get dev caps func 没有找到任何设备。我可以愚弄 func 认为有设备吗？

2) 我尝试将数据直接写入 wav 文件，并注意到流中添加了噪音。我是否需要先将数据写入原始 pcm，然后将其转换为 wav 文件，还是有其他方法？

还有其他建议吗？

# sql - SQL Server 分页查询

> ID：15421761
> 
> 赞同：3
> 
> 时间：2013-03-14T22:55:33.420
> 
> 标签：sql, sql-server, pagination

急！我已经为此苦苦挣扎了很长时间！我可以很容易地用 MySQL 做到这一点，但不能用 SQL Server :(

以下是应该连接在一起的简化表格。

![在此处输入图像描述](../Images/4b170f0579be48e001933d50b2c58176.png)

通过使用内部连接语法将所有这些组合起来，我必须编写一个查询以用于将来的分页（顺便说一句，PHP）。假设我需要在 2012 年 10 月 1 日和 2012 年 10 月 30 日之间拍摄的所有 ID、姓名和日期信息……每页 20 人。

在这里实现目标最简单的查询是什么？（我试过NOT IN ..但它太有问题了，因为我不习惯'NOT IN'的东西......）

您可以忽略性能速度。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T23:19:14.427

这就是我在 SQL Server 2005+ 中的做法：

```
SELECT ID, Name, Photo, CreatedDate, rowNum, (rowNum / 20) + 1 as pageNum
FROM (
    SELECT a.ID, a.Name, b.Photo, c.Created_Date
       , Row_Number() OVER (ORDER BY c.Created_Date ASC) as rowNum
    FROM a
       JOIN b ON a.ID = b.ID
       JOIN c ON c.photo = b.photo
    WHERE c.Created_Date BETWEEN '2012-01-1' AND '2012-10-30'
) x
WHERE (rowNum / 20) + 1 = 1 
```

请注意，我正在使用一个小的整数除法技巧来计算页码。

由于 2005 年之前遗憾地没有 row_number()，我将使用带有标识列的中间表：

```
 SELECT a.ID, a.Name, b.Photo, c.Created_Date
       , identity(int,1,1) as rowNum
    INTO t
    FROM a
       JOIN b ON a.ID = b.ID
       JOIN c ON c.photo = b.photo
    WHERE c.Created_Date BETWEEN '2012-01-1' AND '2012-10-30'
    ORDER BY c.Created_Date ASC
    GO

    ALTER TABLE t ADD pageNum AS rowNum / 20
    GO

    SELECT ID, Name, Photo, Created_Date, rowNum
    FROM t
    WHERE pageNum = 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-13T18:47:18.087

这是我很久以前的做法..

```
 SELECT * FROM (
      SELECT TOP y * FROM (
           SELECT TOP x * FROM sometable
           ORDER BY somefield ASC
      )
      ORDER BY somefield DESC)
ORDER BY somefield 
```

> 最里面的查询 SELECT TOP x 获取前 x 行，第二个查询 SELECT TOP y 获取 x 行的最后 y 行，最外面的查询 SELECT * 将结果按正确的顺序排列。

这是一篇解释它是如何工作的博客文章 这是我在 2006 年写的一篇博客文章，谈论它[http://code.rawlinson.us/2006/12/t-sql-query-paging.html](http://code.rawlinson.us/2006/12/t-sql-query-paging.html)

tl;博士; 该帖子的内容来自本段：

> 例如，假设我们想要第一页，所以前 20 个结果。这很简单，只需使用 SELECT TOP 20 ...。但是第二页或后续页呢？您如何获得 21-40 项？这比你想象的要容易。您实际上想要得到的是前 x 个结果的底部 y。要以另一种方式看待，您希望前 x 个结果中的前 y 个向后排序。

如何计算并将 x 和 y 值提供给查询取决于您。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-23T11:54:06.993

Microsoft 在 SQL Server 2012 及更高版本中使用["OFFSET" 和 "FETCH"](https://technet.microsoft.com/en-us/library/ms188385.aspx#Offset)添加了本机分页功能。您可以按如下方式使用此功能：

```
-- Skip the first 500 rows and return the next 100
SELECT *
FROM TableName
ORDER BY [ID]
    OFFSET 500 ROWS
    FETCH NEXT 100 ROWS ONLY; 
```

对于`OFFSET __`and`FETCH NEXT __`子句，您可以指定常量值（如上），也可以指定变量、表达式或常量标量子查询。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-13T17:22:54.010

[用 Sql Server 2008 + AdventureWorks](http://msftdbprodsamples.codeplex.com/releases/view/93587)数据库试试这个

```
DECLARE @PageIndex INT, @RowsPerPage INT
DECLARE @StartRow INT, @EndRow INT;

SET @PageIndex = 1;
SET @RowsPerPage = 500;
SET @StartRow = ((@PageIndex - 1) * @RowsPerPage) + 1;
SET @EndRow = @StartRow + @RowsPerPage - 1;

--append#1
WITH PAGE_ROWS
AS
(
SELECT ROW_NUMBER() OVER(ORDER BY OrderDate DESC, SalesOrderNumber ASC) AS ROW_NO
    , COUNT(*) OVER() AS TOTAL_ROWS
    , *
FROM( 
    --working query
    SELECT S.SalesOrderID
        , S.SalesOrderNumber
        , S.OrderDate
        , S.DueDate
        , S.ShipDate
        , S.Status
        , S.PurchaseOrderNumber
        , C.AccountNumber
        , P.FirstName, P.MiddleName, P.LastName
    FROM [Sales].[SalesOrderHeader] AS S
        LEFT OUTER JOIN [Sales].[Customer] AS C ON C.CustomerID=S.CustomerID
        LEFT OUTER JOIN [Person].[Person] AS P ON P.BusinessEntityID=C.PersonID
--append#2
) AS Src)
SELECT CEILING(TOTAL_ROWS/ CAST(@RowsPerPage AS DECIMAL(20,2))) AS TOTAL_PAGES
    ,*
FROM PAGE_ROWS
WHERE ROW_NO BETWEEN @StartRow AND @EndRow
ORDER BY OrderDate DESC, SalesOrderNumber ASC 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-08T16:35:28.280

我喜欢 Taha Siddiqui 的回答，只是它需要修改传入的查询，并且由于前同事做出的一些非常糟糕的设计决策，它不适用于我必须使用的 SQL UNION 语句。

通用 SQL Server 查询是：

```
SELECT * FROM (
    select ROW_NUMBER() OVER (order by ID) as row_num, * FROM (
      <<Put Your Query Here>>
    ) AS tempTable1
) AS tempTable2 WHERE row_num >= ((pageNum -1) * pageSize) AND row_num < ((pageNum -1) * pageSize) + pageSize; 
```

我创建了一个假定基于一的分页的 Java 函数：

```
 public static String buildPagingQuery(String sqlStr, String sortExpression, int pageNum, int pageSize) {
        if (StringUtils.isBlank(sortExpression)) { //NOTE: uses org.apache.commons.lang.StringUtils
            sortExpression = " (select 0)";
        }

        int startIndex = ((pageNum - 1) * pageSize) + 1;
        int endIndex = startIndex + pageSize;

        StringBuilder sb = new StringBuilder();

        sb.append("SELECT * FROM (");
        sb.append("SELECT ROW_NUMBER() OVER (ORDER BY ");
        sb.append(sortExpression);
        sb.append(") as row_num, * FROM (");
        sb.append(sqlStr);
        sb.append(") as tempTable1 ");
        sb.append(") AS tempTable2  "); 
        sb.append("WHERE row_num >= ").append(startIndex);
        sb.append(" AND row_num < ").append(endIndex);

        return sb.toString();
    } 
```

我还没有在一张大桌子上检查过性能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-06T11:00:29.823

```
ALTER  Proc [dbo].[Sp_PagingonTable] 
@SearchText varchar(255) = null,
@ChannelName varchar(255)= null,
@ChannelCategory varchar(255)= null,
@ChannelType varchar(255)= null,
@PageNo int,
@PageSize int,
@TotalPages int output
As
DECLARE  @VariableTable TABLE
(
Rownumber INT,
ReferralHierarchyKey BIGINT, 
ReferralID VARCHAR(255), 
ChannelDetail VARCHAR(255),     
ChannelName VARCHAR(255),
ChannelCategory VARCHAR(255),
ChannelType VARCHAR(255)
)
 /*---Inserting Data into variable Table-------------*/
INSERT INTO @VariableTable
SELECT   
 ROW_NUMBER() OVER(ORDER BY [ColumnID) as Rownumber,*
 FROM [dbo].[TableName]
 WHERE (@SearchText IS NULL OR ChannelDetail LIKE '%' + @SearchText + '%')                                 And       (@ChannelName  IS NULL OR ChannelName  = @ChannelName )
/*--Applying Paging on filter Table--*/
SELECT 
        ReferralID
       ,ChannelDetail
       ,ChannelName
       ,ChannelCategory
       ,ChannelType 
    FROM 
        @VariableTable
WHERE Rownumber between (((@PageNo -1) *@PageSize)+1) and @PageNo *    @PageSize
 /*--Getting Total Pages After filter Table---*/
 SELECT @TotalPages =  (Count(*) + @PageSize - 1)/@PageSize FROM  @VariableTable
 SELECT @TotalPages 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-14T13:08:34.983

我们可以通过 CTE (Common Table Expressions) 来实现。首先我们需要设置当前页码和我们需要从中获取的结果的偏移量。然后我们必须按 ROW_NUMBER 对结果集进行排序。并使用存储结果cte feature.then 过滤结果与页面大小和对行号的偏移量。SQL查询如下

```
DECLARE @PageSize INT=1 ,@PageNumber INT=2

DECLARE @Offset int =(@PageSize * (@PageNumber - 1))+1

;WITH Results_CTE AS
(

    SELECT *,
                   ROW_NUMBER() OVER (ORDER BY FieldName) AS RowNum
    FROM TABLENAME
  )  

  SELECT *
  FROM Results_CTE
  WHERE RowNum>=@Offset AND RowNum < @Offset + @PageSize

END 
```

[https://amonghorizo​​n.blogspot.com/2020/07/sql-server-query-for-pagination-control.html](https://amonghorizon.blogspot.com/2020/07/sql-server-query-for-pagination-control.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-05T19:54:40.510

您可以使用以下类中的方法

```
internal class PagingHelper
{
    public static String ParseQueryForPagingAndSorting(String strSQL, string SortExpression, int StartIndex, int EndIndex)
    {
        if (String.IsNullOrEmpty(SortExpression))
            SortExpression = " (select 0)";
        StringBuilder sb = new StringBuilder();
        sb.Append("select * from (");
        sb.Append(" select ROW_NUMBER() OVER (ORDER BY " + SortExpression + ") AS row_num,");
        int index = strSQL.ToLower().IndexOf('t', 0);
        sb.Append(strSQL.Substring(index + 2));
        sb.Append(")");
        sb.Append(" AS TempTable");
        sb.Append(" where row_num>=" + StartIndex.ToString() + " AND row_num<=" + EndIndex.ToString());
        return sb.ToString();
    }
    public static String ParseQueryForCount(String strSQL)
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("select count(*) from");
        sb.Append("(");
        sb.Append(strSQL);
        sb.Append(")");
        sb.Append(" AS TempTable");
        return sb.ToString();
    }
} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-01-22T11:43:24.237

我发现另一种方法可以在 Sql server 2012 中执行此操作

[http://raresql.com/2012/07/01/sql-paging-in-sql-server-2012-using-order-by-offset-and-fetch-next/](http://raresql.com/2012/07/01/sql-paging-in-sql-server-2012-using-order-by-offset-and-fetch-next/)

# c++ - C++输出向量列表时，输出的数量取平方

> ID：15421763
> 
> 赞同：0
> 
> 时间：2013-03-14T22:55:41.700
> 
> 标签：c++, system

我是一名 CS 初学者，正在尝试使用我父母餐厅的号码来编写“收银员”系统。

到目前为止，程序只能为表 1 添加前两个开胃菜，然后在屏幕上打印含税的总数。

我的问题是，虽然程序现在以我想要的方式运行，但当我尝试“查看总计”时，输出的项目是平方的......这意味着如果我添加项目“KIMBAB”一次，它只会在输出列表；但是，如果我添加两次 KIMBAB，则输出的项目数变为 4，如果我添加 3，则输出 9 等等。

如果我也使用“JON”（开胃菜菜单上的第 2 项），然后再次添加 KIMBAB、JON 然后 KIMBAB，输出看起来像

金巴

金巴

金巴

乔恩

乔恩

乔恩

金巴

金巴

金巴

以下是我到目前为止所拥有的源代码，如果有人可以帮助我，那就太好了！谢谢！

```
#include <iostream>
#include <string>
#include <iomanip>
#include <vector>

using namespace std;

float sum(const vector<float>& x);

// prices
        // appetizers
float kimBab=5.50, jon=7.50, kJon=6.50, sTofu=5.50, wanja=7.50, kgSalad=5.50, edamame=4.00, fVeggies=5.50;
        // mains
float BBB=14.50, BGG=17.50, seaFood=19.50, dakChim=17.50, djGalbi=17.50, soGalbi=19.50;
        // soups
float kimchiC=12.50, dwenjangC=12.50, ygJang=14.50, sdbC=12.50, bjC=14.50;
        // rice and noodles
float japChae=14.50, BBK=10.50, ksBokum=12.50, dopBab=12.50;
        // fusion
float cbggQ=13.50, bggB=13.50, bggBag=13.50, bggW=12.50, bggP=12.50;
        // desserts
float breadP=4.00, vIC=3.00, sjG=3.00, gelato=3.50, butterT=2.50;

// item entry
        // appetizers
string kimBabS="KIMBAB", jonS="JON", kJonS="KIMCHI JON", sTofuS="SEASONED TOFU", wanjaS="WANJA", kgSaladS="KOREAN GREEN SALAD", edamameS="EDAMAME", fVeggiesS="FRESH VEGGIES WITH DIP";
        // mains
string BBBS="BIBIMBAB", BGGS="BULGOGI", seaFoodS="SEAFOOD", dakChimS="DAK-CHIM", djGalbiS="DWEJIGALBI-CHIM", soGalbiS="SOGALBI-DUKBEGI";
        // soups
string kimchiCS="KIMCHI-CHIGYE", dwenjangCS="DWENJANG-CHIGYE", ygJangS="YOUKGYEJANG", sdbCS="SOONDUBU-CHIGYE", bjCS="BIJI-CHIGYE";
        // rice and noodles
string japChaeS="JAPCHAE", BBKS="BIBIMKUKSU", ksBokumS="KUKSUBOKUM", dopBabS="DOPBAB";
        // fusion
string cbggQS="CHICKEN BULGOGI QUESADILLA", bggBS="BULGOGI BURGER", bggBagS="BULGOGI BAGUETTE", bggWS="BULGOGI WRAP", bggPS="BULGOGI PANINI";
        // desserts
string breadPS="BREAD PUDDING", vICS="VANILLA ICE CREAM", sjGS="SUJUNGGWA", gelatoS="GELATO", butterTS="BUTTER TART";
        // attributes
string beef="BEEF", pork="PORK", chicken="CHICKEN", shrimp="SHRIMP", tofu="TOFU";

// variables
string table1="1", table2="2", table3="3", table4="4", table5="5", table6="6", table7="7", table8="8", table9="9", table10="10";
string appySelect="1", mainSelect="2", soupSelect="3", riceNoodleSelect="4", dessertSelect="5";
string appyInput, mainInput, soupInput, riceNoodleInput, fusionInput, dessertInput, attInput, addAnotherInput;
string itemEntry1, itemEntry2, itemEntry3, itemEntry4, itemEntry5, itemEntry6, itemEntry7, itemEntry8, itemEntry9, itemEntry10, itemEntry11, itemEntry12, itemEntry13, itemEntry14, itemEntry15, itemEntry16, itemEntry17, itemEntry18, itemEntry19, itemEntry20;
float itemPrice1, itemPrice2, itemPrice3, itemPrice4, itemPrice5, itemPrice6, itemPrice7, itemPrice8, itemPrice9, itemPrice10, itemPrice11, itemPrice12, itemPrice13, itemPrice14, itemPrice15, itemPrice16, itemPrice17, itemPrice18, itemPrice19, itemPrice20;
float totalpreTax, totalpostTax, addHST, addtaxHST=0.14, totaltaxHST=1.14;
// booleans
bool itemOne, itemTwo, itemThree, itemFour, itemFive, itemSix, itemSeven, itemEight, itemNine, itemTen, itemEleven, itemTwelve, itemThirteen, itemFourteen, itemFifteen, itemSixteen, itemSeventeen, itemEighteen, itemNineteen, itemTwenty;
// input variables
string tableNumber;
string selectInput;
string itemInput1, itemInput2, itemInput3, itemInput4, itemInput5, itemInput6, itemInput7, itemInput8, itemInput9, itemInput10, itemInput11, itemInput12, itemInput13, itemInput14, itemInput15, itemInput16, itemInput17, itemInput18, itemInput19, itemInput20;
string itemAtt1, itemAtt2, itemAtt3, itemAtt4, itemAtt5, itemAtt6, itemAtt7, itemAtt8, itemAtt9, itemAtt10, itemAtt11, itemAtt12, itemAtt13, itemAtt14, itemAtt15, itemAtt16, itemAtt17, itemAtt18, itemAtt19, itemAtt20;

// MATH FUNCTIONS
void totalposttaxCalc ()
{
    totalpreTax = itemPrice1 + itemPrice2 + itemPrice3 + itemPrice4 + itemPrice5 + itemPrice6 + itemPrice7 + itemPrice8 + itemPrice9 + itemPrice10 + itemPrice11 + itemPrice12 + itemPrice13 + itemPrice14 + itemPrice15 + itemPrice16 + itemPrice17 + itemPrice18 + itemPrice19 + itemPrice20;
    addHST = totalpreTax * addtaxHST;
    totalpostTax = totalpreTax * totaltaxHST;
    cout << string(50, '\n');
    cout << "Total:  " << "$" << totalpreTax << endl;
    cout << endl;
    cout << "Tax  :  " << "$" << addHST << endl;
    cout << endl;
    cout << endl;

    cout << "Grand Total:  " << "$" << totalpostTax;
    std::cin.get();
}
// SELECTION FUNCTIONS
void tableSelection ()
{
    do
    {
        cout << "Enter table number: ";
        cin >> tableNumber;
    } while ((tableNumber!=table1)&&(tableNumber!=table2)&&(tableNumber!=table3)&&(tableNumber!=table4)&&(tableNumber!=table5)&&(tableNumber!=table6)&&(tableNumber!=table7)&&(tableNumber!=table8)&&(tableNumber!=table9)&&(tableNumber!=table10));
}
void menuSelection ()
{
    do
    {
        cout << "-= MENU =-" << endl;
        cout << "1\. Appetizers" << endl;
        cout << "2\. Mains" << endl;
        cout << "3\. Soups" << endl;
        cout << "4\. Rice and Noodles" << endl;
        cout << "5\. Fusion" << endl;
        cout << "6\. Desserts" << endl;
        cout << "7\. Back" << endl;
        cout << endl;
        cout << "8\. SEE COMPLETE ORDER." << endl;
        cout << endl;
        cout << "Please enter your selection: ";
        cin >> selectInput;
    } while ((selectInput!="1")&&(selectInput!="2")&&(selectInput!="3")&&(selectInput!="4")&&(selectInput!="5")&&(selectInput!="6")&&(selectInput!="7")&&(selectInput!="8"));
}
void appySelection ()
{
    do
    {
        cout << "-= APPETIZERS =- " << endl;
        cout << "1\. " << kimBabS << endl;
        cout << "2\. " << jonS << endl;
        cout << "3\. " << kJonS << endl;
        cout << "4\. " << sTofuS << endl;
        cout << "5\. " << wanjaS << endl;
        cout << "6\. " << kgSaladS << endl;
        cout << "7\. " << edamameS << endl;
        cout << "8\. " << fVeggiesS << endl;
        cout << "9\. Back" << endl;
        cout << endl;
        cout << "Enter your selection: ";
        cin >> appyInput;
        } while ((appyInput!="1")&&(appyInput!="2")&&(appyInput!="3")&&(appyInput!="4")&&(appyInput!="5")&&(appyInput!="6")&&(appyInput!="7")&&(appyInput!="8")&&(appyInput!="9"));
}
void mainSelection ()
{
    do
    {
        cout << "-= MAINS =-" << endl;
        cout << "1\. " << BBBS << endl;
        cout << "2\. " << BGGS << endl;
        cout << "3\. " << seaFoodS << endl;
        cout << "4\. " << dakChimS << endl;
        cout << "5\. " << djGalbiS << endl;
        cout << "6\. " << soGalbiS << endl;
        cout << "7\. Back" << endl;
        cout << endl;
        cout << "Enter your selection: ";
        cin >> mainSelect;
    } while ((mainSelect!="1")&&(mainSelect!="2")&&(mainSelect!="3")&&(mainSelect!="4")&&(mainSelect!="5")&&(mainSelect!="6")&&(mainSelect!="7"));
}
void soupSelection ()
{
    do
    {
        cout << "-= SOUPS =- " << endl;
        cout << "1\. " << kimchiCS << endl;
        cout << "2\. " << dwenjangCS << endl;
        cout << "3\. " << ygJangS << endl;
        cout << "4\. " << sdbCS << endl;
        cout << "5\. " << bjCS << endl;
        cout << "6\. Back" << endl;
        cout << endl;
        cout << "Enter your selection: ";
        cin >> soupInput;
    } while ((soupInput!="1")&&(soupInput!="2")&&(soupInput!="3")&&(soupInput!="4")&&(soupInput!="5")&&(soupInput!="6"));
}
void riceNoodleSelection ()
{
    do
    {
        cout << "-= RICE AND NOODLES =- " << endl;
        cout << "1\. " << japChaeS << endl;
        cout << "2\. " << BBKS << endl;
        cout << "3\. " << ksBokumS << endl;
        cout << "4\. " << dopBabS << endl;
        cout << "5\. Back" << endl;
        cout << endl;
        cout << "Enter your selection: ";
        cin >> riceNoodleInput;
    } while ((riceNoodleInput!="1")&&(riceNoodleInput!="2")&&(riceNoodleInput!="3")&&(riceNoodleInput!="4")&&(riceNoodleInput!="5"));
}
void fusionSelection ()
{
    do
    {
        cout << "-= FUSION =- " << endl;
        cout << "1\. " << cbggQS << endl;
        cout << "2\. " << bggBS << endl;
        cout << "3\. " << bggBagS << endl;
        cout << "4\. " << bggWS << endl;
        cout << "5\. " << bggPS << endl;
        cout << "6\. Back" << endl;
        cout << endl;
        cout << "Enter your selection: ";
        cin >> fusionInput;
        } while ((fusionInput!="1")&&(fusionInput!="2")&&(fusionInput!="3")&&(fusionInput!="4")&&(fusionInput!="5")&&(fusionInput!="6"));
}
void dessertSelection ()
{
    do
    {
        cout << "-= DESSERTS =- " << endl;
        cout << "1\. " << breadPS << endl;
        cout << "2\. " << vICS << endl;
        cout << "3\. " << sjGS << endl;
        cout << "4\. " << gelatoS << endl;
        cout << "5\. " << butterTS << endl;
        cout << "6\. Back" << endl;
        cout << endl;
        cout << "Enter your selection: ";
        cin >> dessertInput;
        } while ((dessertInput!="1")&&(dessertInput!="2")&&(dessertInput!="3")&&(dessertInput!="4")&&(dessertInput!="5")&&(dessertInput!="6"));
}
void attSelection ()
{
    do
    {
        cout << "-= WHAT KIND =-" << endl;
        cout << "1\. " << beef << endl;
        cout << "2\. " << pork << endl;
        cout << "3\. " << chicken << endl;
        cout << "4\. " << shrimp << endl;
        cout << "5\. " << tofu << endl;
        cout << endl;
        cout << "Enter your selection: ";
        cin >> attInput;
    } while ((attInput!="1")&&(attInput!="2")&&(attInput!="3")&&(attInput!="4")&&(attInput!="5"));
}
void addAnother ()
{
    do
    {
        cout << endl;
        cout << "Add another item from the same category? (1 for YES, 2 for NO): ";
        cin >> addAnotherInput;
    } while ((addAnotherInput!="1")&&(addAnotherInput!="2"));
}

int main ()
{
    cout << setiosflags(ios::fixed) << setiosflags(ios::showpoint) << setprecision(2);
    mainLoop:
    tableSelection ();
    // IF TABLE 1 START
    if (tableNumber==table1)
    {
        vector<string> tableOneList;
        vector<float> tableOnePriceList;

        tableOneLoop:
        cout << string(50, '\n');
        cout << "-= TABLE 1 =-" << endl;
        cout << endl;
        menuSelection ();
        // IF VIEW TOTAL START
        if (selectInput=="8")
        {
            cout << endl;
            for(vector<string>::const_iterator items = tableOneList.begin(); items != tableOneList.end(); ++items )
            for(vector<float>::const_iterator prices = tableOnePriceList.begin(); prices!= tableOnePriceList.end(); ++prices)
            cout << *items << endl;
            cout << "__________________________________________" << endl;
            cout << "TOTAL: " << "$" << sum(tableOnePriceList) << endl;
            totalpreTax=sum(tableOnePriceList);
            cout << "HST:   " << "$" << totalpreTax*addtaxHST << endl;
            cout << endl;
            cout << "GRAND TOTAL: " << "$" << totalpreTax*totaltaxHST << endl;
        }
        // IF VIEW TOTAL END

        // IF APPY START
        if (selectInput=="1")
        {
            appyLoop:
            appySelection ();
            if (appyInput=="1")
            {
                tableOneList.push_back(kimBabS);
                tableOnePriceList.push_back(kimBab);
                cout << endl;
                cout << kimBabS << " successfully added.";
                cout << endl;
                goto tableOneLoop;
            }
            if (appyInput=="2")
            {
                tableOneList.push_back(jonS);
                tableOnePriceList.push_back(jon);
                cout << endl;
                cout << jonS << " successfully added.";
                cout << endl;
                addAnother ();
                if (addAnotherInput=="1")
                {
                    goto appyLoop;
                }
                if (addAnotherInput=="2")
                {
                    goto tableOneLoop;
                }
            }
            if (appyInput=="3")
            {
                tableOneList.push_back(kJonS);
                tableOnePriceList.push_back(kJon);
            }
            if (appyInput=="4")
            {
                tableOneList.push_back(sTofuS);
                tableOnePriceList.push_back(sTofu);
            }
            if (appyInput=="5")
            {
                tableOneList.push_back(wanjaS);
                tableOnePriceList.push_back(wanja);
            }
            if (appyInput=="6")
            {
                tableOneList.push_back(kgSaladS);
                tableOnePriceList.push_back(kgSalad);
            }
            if (appyInput=="7")
            {
                tableOneList.push_back(edamameS);
                tableOnePriceList.push_back(edamame);
            }
            if (appyInput=="8")
            {
                tableOneList.push_back(kimBabS);
                tableOnePriceList.push_back(kimBab);
            }
        }
        // IF APPY END

        // IF MAIN START
        if (selectInput=="2")
        {
            mainSelection ();
        }
        // IF MAIN END

        // IF SOUP START
        if (selectInput=="3")
        {
            soupSelection ();
        }
        // IF SOUP END

        // IF RICENOODLE START
        if (selectInput=="4")
        {
            riceNoodleSelection ();
        }
        // IF RICENOODLE END

        // IF FUSION START
        if (selectInput=="5")
        {
            fusionSelection ();
        }
        // IF FUSION END

        // IF DESSERT START
        if (selectInput=="6")
        {
            dessertSelection ();
        }
        // IF DESSERT END

        // IF BACK START
        if (selectInput=="7")
        {
            goto mainLoop;
        }
        // IF BACK END
    }
}    // IF TABLE 1 END

float sum(const vector<float>& x) {
    float total = 0.0;  // the sum is accumulated here
    for (int i=0; i<x.size(); i++) {
        total = total + x[i];  
    }
    return total;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T23:18:32.847

问题是 if(selectInput == "8") 下的双 for 循环。这使输出的数量平方。第二个 for 循环（价格循环）完全未使用，应该删除。通过使用括号和适当的缩进来防止将来出现这个问题，即使是单行循环也是如此。

请，请使用数组，如果您实际上不想存储文本，请不要使用字符串，并避免使用 goto。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T23:41:33.850

我发现很难以目前的形式解决这个问题。

我会通过摆脱重复来开始改变它。

你有很多变量，其中名称、内容、价格是分开保存的。选择它们的编号等。

你需要介绍几个关键的数据结构。我不会为你做所有的事情。

```
struct Price {
    const unsigned int pennies;
    Price(int pennies);
};

struct Dish {
    const string name;
    const Price price;
    Dish(string name, Price price);
};

struct SubMenu {
    const string name;
    const vector<Dish> dishes;
    SubMenu(string name, vector<Dish> dishes);
};

typedef vector<SubMenu> Menu;

Menu menu;
menu.push_back(
    SubMenu("appetizers", {
        Dish("KIMBAB", Price(550)),
        Dish("JON", Price(750))
        })); // etc 
```

然后你可以说，例如：

```
SubMenu& subMenu = menu[0];

cout << subMenu.name << endl;
for(int i = 0; i < subMenu.dishes.size(); ++i) {
    cout << i << " " << subMenu.dishes[i] << endl;
} 
```

您应该能够拥有一项功能来打印任何子菜单。

此外，将选项读入一个整数并检查范围：

```
do {
    unsigned int choice;
    cin >> choice;
} while(choice >= subMenu.dishes.size()); 
```

这些很少的更改将大大减少代码的大小，并提高其可读性和查找错误的能力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T23:37:04.017

作为一名 CS 初学者，我建议您尝试以下方法来开始您的数据：

```
struct menuItem
{
    menuItem(string name, MenuTypes type, float price)
    { 
        this.name=name;
        this.type=type; 
        this.price=price;
    }
    string name;
    MenuTypes type;
    float price;
};

enum MenuTypes
{
    Appetizer,
    Main,
    Soup,
    Rice_And_Noodles,
    Fusion,
    Dessert
} 
```

然后你可以使用 STL List 创建一个菜单项列表，或者你甚至可以创建一个这样的数组：

```
menuItem myMenu[20]; //or whatever # of items you expect in your menu
int curItem = 0;
myMenu[curItem++] = new menuItem("firstItemName", MenuTypes.Appetizer, 1.34f);
myMenu[curItem++] = new menuItem("secondItemName", MenuTypes.Appetizer, 2.35f);
... 
```

只要确保你创建一个足够大的数组顺便说一句，如果你这样做......这肯定会让事情变得更容易......这样你就可以创建一个像这样的菜单：

```
int displayMenu(MenuTypes theType){
    int curMenuCount = 0;
    for(int i = 0; i < myMenu.size(); i++){
         if(myMenu[i].type == theType){
              cout << ++curMenuCount << myMenu[i].name << endl;
         }
    }
    return curMenuCount;
} 
```

然后找到该项目：

```
float getPriceForItem(int selection, MenuType theType){
    int curNumForThisMenu = 0;
    for (int i = 0; i < myMenu.size(); i++){
        if(myMenu[i].type == theType) curNumForThisMenu++;
        if(curNumForThisMenu == selection){
            return myMenu[i].price;
        }
    }
} 
```

像这样的东西会让你的代码更容易阅读，而不会让你的水平变得太高级（希望如此）。当然有更好的方法来做到这一点，但这对你来说可能是一个好的开始。

# regex - 在 Sublime Text 2 中编辑 HTML .tmLanguage 文件以处理内联 Handlebars 模板

> ID：15421766
> 
> 赞同：3
> 
> 时间：2013-03-14T22:56:21.163
> 
> 标签：regex, syntax-highlighting, sublimetext2, text-editor, handlebars.js

我最近一直在将[Handlebars.js](http://handlebarsjs.com/)合并到一些新项目中。我一直在使用内联 Handlebars 模板以及常规内联 javascript。

问题是 Sublime Text 2 将内联 Handlebars 模板视为 JS，这意味着语法着色是完全错误的。

我遇到的一个[建议的解决方案是简单地注释掉 Sublime Text 的](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=2815)**[HTML.tmLanguage](http://pastebin.com/irTLDzKC)**文件的内联 Javascript 部分，从第 284 行到第 379 行。

虽然这确实导致了 Handlebars 模板的正确着色，但它也为内联 Javascript 提供了语法着色。

有没有办法在这里两全其美？也许是一种从 HTML.tmLanguage 编辑以下行以使其不适用于任何带有`type="text/x-handlebars-template"`?

```
<string>(?:^\s+)?(&lt;)((?i:script))\b(?![^&gt;]*/&gt;)</string> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T05:15:21.047

用户 Iamntz 能够在 sublimetext 论坛上[回答我的问题。](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=2815#p46062)

获胜的正则表达式是：

```
<string>(?:^\s+)?(&lt;)((?i:script))\b(?!([^&gt;]*text/x-handlebars-template[^&gt;]*|[^&gt;]*/>))</string> 
```

# php - 在 flexigrid codeigniter 中使用搜索和排序功能时没有任何变化

> ID：15421771
> 
> 赞同：0
> 
> 时间：2013-03-14T22:56:27.990
> 
> 标签：php, mysql, codeigniter, flexigrid

在 codeigniter 中使用 flexigrid 库时，我可以很好地显示数据网格，但是当我使用函数排序和搜索时，它不能像我以前希望的那样运行。什么都没有改变，只是加载第一页。问题在于搜索和排序，分页功能还可以。

也许是我的代码有问题，需要帮助。谢谢。

```
//Controller
public function daftarKomoditi()
{
    $colModel['dig10'] = array('Kode Komoditi KBKI',120,TRUE,'left',2);
    $colModel['desk10'] = array('Jenis Komoditi',453,TRUE,'left',2);

    $gridParams = array(
        'width' => '600',
        'height' => 'auto',
        'rp' => 10,
        'singleSelect' => true,
        'rpOptions' => '[10,15,20,25,40]',
        'pagestat' => 'Displaying: {from} to {to} of {total} items.',
        'blockOpacity' => 0.5,
        'title' => 'Master Komoditi SHPB 2013',
        'showTableToggleBtn' => false
    );

    $buttons[] = array('Refresh','refresh','test');
    $buttons[] = array('separator');

    $grid_js = build_grid_js('flex2',site_url("/ajax/getKomoditiList"),$colModel,'id','asc',$gridParams,$buttons);

    $data['js_grid'] = $grid_js;  

    $this->load->view('kualitas/komoditi_list',$data);
}

public function getKomoditiList()
{  
    $valid_fields = array('dig10,desk10');
    $this->flexigrid->validate_post('dig10','asc',$valid_fields);

    $records = $this->KualitasModel->getDaftarKomoditi();
    $this->output->set_header($this->config->item('json_header'));

    foreach ($records['records']->result() as $row) {   
        $record_items[] = array($row->dig10,
        $row->dig10,  
        ucfirst(strtolower($row->desk10)),
        );
    }

    $this->output->set_output($this->flexigrid->json_build($records['record_count'],$record_items));        
}

//Model
    function getDaftarKomoditi() //Flexigrid
{
    $table_name = "shpb_mkbki_dig10";

    $this->db->select('*')->from($table_name);
    $this->CI->flexigrid->build_query();

    //Get contents
    $return['records'] = $this->db->get();

    //Build count query
    $this->db->select('count(dig10) as record_count')->from($table_name);
    $this->CI->flexigrid->build_query(FALSE);
    $record_count = $this->db->get();
    $row = $record_count->row();

    //Get Record Count
    $return['record_count'] = $row->record_count;

    //Return all
    return $return;                                        

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-29T19:03:16.507

这是我在 CodeIgniter 2.2 中的 Flexigrid 实现，查看演示示例并下载：[http ://ci-flexigrid.sameershemna.com/](http://ci-flexigrid.sameershemna.com/)

# windows - 阻止进程访问互联网

> ID：15421772
> 
> 赞同：-1
> 
> 时间：2013-03-14T22:56:28.277
> 
> 标签：windows, delphi, winapi, hook, winsock

我正在使用 Delphi，我想编写一个小型“加载器”来启动应用程序并挂钩所有 Socket API，因此它可以防止访问互联网。我有一个工作挂钩单元可以做到这一点，但我仍然有一些问题：

1) 有哪些 Windows API 可以访问互联网（除了 Winsock？！）

2) 如果应用程序不使用导出并通过 PEB 或 GetProcAddress 动态获取地址怎么办？还能上钩吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:47:00.533

它可以使用更高级别的 API，例如 WINHTTP 或 WININET，但您应该能够通过枚举其静态导入来查看它实际可能使用的内容。

如果应用程序试图隐藏它正在做的事情，它可能会结合 GetProcAddress(Ex) 执行 LoadLibrary，是的，但您也可以挂钩这些函数。

您到底想阻止此应用程序做什么？- 也许有更简单的方法。

# javascript - 如果不是“我的操作系统”更改 css - jquery

> ID：15421788
> 
> 赞同：0
> 
> 时间：2013-03-14T22:57:31.187
> 
> 标签：javascript, jquery, css, cross-browser

我正在尝试制作一个“ *css hack* ”，它允许我根据用户的操作系统更改 css。

对于 Mac 和 iOS，我想要一种风格，对于其他一切（Windows、Linux、Android 等），我想要不同的风格。

到目前为止，我已经拼凑了这个：

```
if (navigator.platform = :not("MacIntel")) {
        $("p").css("font-size", "50px");
    } 
```

但是，我不确定如何更进一步。

我想做的是：如果不是 Mac 或 iOS，则更改 css 字体大小元素。

知道我该怎么做吗？

我在这里做了一个jsFiddle：

*   [http://jsfiddle.net/b9r5G/](http://jsfiddle.net/b9r5G/)

正如我上面所说的，我已经完成了一半的工作......我需要帮助才能将其达到 100%。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:47:35.627

在这里看到了一些东西：[How to detect mobile browser using jQuery or in some other SIMPLE way..？](https://stackoverflow.com/questions/5045615/how-to-detect-mobile-browser-using-jquery-or-in-some-other-simple-way)

```
var android = (navigator.platform.indexOf("android")>=0); //true if android 
```

# linux - x86 汇编语言 - 如何读取输入的字符数？

> ID：15421790
> 
> 赞同：0
> 
> 时间：2013-03-14T22:57:35.190
> 
> 标签：linux, assembly, x86, gnu

我知道如果你想说两个字符输入，你会使用：

```
input_str:  .ascii "??" 
```

然后：

```
mov $2, %edx 
```

比如在：

```
.data               
input_str:  .ascii "??" 

.text               
.global _start          
_start:             
    mov $3, %eax          # eax = 3 = function number for "read"
    mov $0, %ebx          # ebx = 0 = file descriptor (stdin)
    mov $input_str, %ecx  # ecx = address of input buffer
    mov $2, %edx          # edx = buffer maximum size
    int $0x80             # Call Linux kernel API
                          # eax = error code or number of bytes read 
```

ETC...

但是，如果你要求一个随机长度的句子呢？输入后如何读取有多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:57:24.713

处理随机长度数据有不同的技巧，所有这些技巧都需要动态分配的内存。

在 Linux 中提供它的最简单方法是使用**sys_brk**函数，但它只允许分配一个内存块。

有提供堆管理的库。[**FreshLib**](http://fresh.flatassembler.net/index.cgi?page=content/articles/2_FreshLibDoc.txt#H12.1.)就是这样一个完全用汇编语言编写的库。另一种选择是与 C 标准库链接。

那么，有两种情况要读取动态分配的缓冲区中的数据，这取决于您是否提前（在运行时）知道数据长度。

## 已知数据大小

这很简单 - 分配所需大小的缓冲区并完全读取数据。

## 未知数据大小 - 所谓的流数据

### 阅读然后复制

在内存中读取流数据的唯一可能方法是读取该数据的固定块，然后将其复制到动态分配的缓冲区中。当缓冲区被填满时，您需要以更大的大小重新分配它，然后继续直到读取所有数据。

Note, that the memory reallocation is expensive operation, so it is better to allocate more than needed memory. Common algorithm is to double the size of the allocated memory on every reallocation. Personally I think this strategy is too aggressive and often use multiplying the size by 1.5;

### Don't read the whole data at all

It is often possible to not read the whole data in the memory, but to process it on the fly as it is read in small fixed chunks. This method needs a little bit more complex algorithms, but has the big advantage to use very small memory, not need dynamically allocated memory and avoids the copy of the data between multiply memory locations.

# java - 比较 JAVA 中的优先级队列

> ID：15421794
> 
> 赞同：1
> 
> 时间：2013-03-14T22:58:01.573
> 
> 标签：java, oop, queue, priority-queue

我现在要说清楚，这是为了大学的作业。我想要帮助我学习的建议和答案，而不是复制和粘贴。我有一项需要模拟医院急诊室的任务。它是练习 ADT 和优先队列的实现。任务的条件之一是我需要创建一个 compareTo 方法，我猜这将有助于优先考虑进入急诊室的患者，它是根据严重程度确定的。如果严重性大于 17，我必须用 17 替换它，如果严重性小于 1，我必须用 1 替换它......我仍然对这个 compreTo 以及如何比较两个对象或 int 的精确度感到困惑：S....根据我在下面写的内容，有人可以向我解释如何比较严重性吗？

这只是一个粗略的草稿，只是为了得到一个基本的想法，我将有一个名为患者的对象，我假设它也会有一个名称和条件严重性......

> //比较器方法...
> 
> 严重性
> 
> 如果（严重程度 > 17）{
> 
> 用 17 替换严重性 if (患者严重性 > 其他患者严重性) { return 1 }
> 
> else if(患者严重程度 > 其他患者严重程度) { return -1 } else if (患者严重程度 == 其他患者严重程度) { return 0 } }
> 
> 否则，如果（严重性 < 1）{
> 
> 用 17 替换严重性 if (患者严重性 > 其他患者严重性) { return 1 }
> 
> else if(患者严重程度 > 其他患者严重程度) { return -1 } else if (患者严重程度 == 其他患者严重程度) { return 0 } }
> 
> 别的 {
> 
> 用 17 替换严重性 if (患者严重性 > 其他患者严重性) { return 1 }
> 
> else if(患者严重程度 > 其他患者严重程度) { return -1 } else if (患者严重程度 == 其他患者严重程度) { return 0 } }

基本上问题是，您使用什么代码来比较两个对象或属于一个对象的两个整数。如果我在优先级队列中有许多要比较的项目，比较器如何工作。感谢所有帮助/输入！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:04:36.440

假设我们有一个`Patient`带有 int 变量的类`severity`。

“如果一个 int 低于 min，则将其视为 min，如果它低于 maxed，则将其视为 max”的操作称为钳位。制作一个钳位辅助函数可能很有用，如下所示：

```
public static int clamp(int value, int min, int max)
{
   return value < min ? min : value > max ? max : value;
}

public int compareTo(Parent other)
{
    int clampedSeverity = clamp(this.severity, 1, 17);
    int clampedOtherSeverity = clamp(this.severity, 1, 17);
    //do comparisons
} 
```

现在，要制作 a `PriorityQueue`- a 的语义`PriorityQueue`是在任何插入时自动排序的集合的语义，这样最高比较元素（在本例中为最高严重性）位于开头。

因此，要插入 a `PriorityQueue`，我们可以`PriorityQueue`通过说 an 来“支持” `ArrayList`，然后使用二进制搜索`compareTo`来查看我们是否需要看起来更高、更低或是否有匹配。如果我们有匹配，那么我们可以在那里插入。如果我们没有找到匹配项，但我们将其范围缩小到比下面的元素更严重但比上面的元素少，我们可以将它插入那里。

如果所有插入都保持`PriorityQueue`排序，那么最严重的患者总是在最前面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:05:58.077

您应该首先编写一个将原始严重性转换为“标准化”严重性（即，1 到 17 之间的严重性）的方法。然后你应该通过患者的标准化安全性来比较患者：

```
private int normalizedSeverity(int severity) {
    if (severity < 1) {
        return 1;
    }
    if (severity > 17) {
        return 17;
    }
    return severity;
}

public int compare(Patient p1, Patient p2) {
    int severity1 = normalizedSeverity(p1.getSeverity());
    int severity2 = normalizedSeverity(p2.getSeverity());
    return Integer.compare(severity1, severity2);
} 
```

# java - WebService 不接受请求格式

> ID：15421799
> 
> 赞同：1
> 
> 时间：2013-03-14T22:58:37.143
> 
> 标签：java, android, web-services, ksoap2, android-ksoap2

我有一个网络服务，我想在其上访问 ping 方法。此方法只接受一个字符串并返回一个字符串。

我想在 android 设备上使用 ksoap2 库来访问它。经过多天未能达到正确的结果后，我发现 SoapUI 我的请求必须如下所示：

```
// Generated with SoapUI
<v:Envelope xmlns:ns="http://shared.bimserver.org/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
  <v:Header />
  <v:Body>
    <ns:ping>
      <in>test</in>
    </ns:ping>
  </v:Body>
</v:Envelope> 
```

这是我的代码：

```
String namespace = "http://shared.bimserver.org/";
String method = "ping";
String url = "http://10.0.0.5:8082/soap?WSDL";

SoapObject request = new SoapObject(namespace, method);
request.addProperty("in", "test");

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request); 
```

这是我的代码生成的请求。

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
  <v:Header />
  <v:Body>
    <ping xmlns="http://shared.bimserver.org/">
      <in i:type="d:string">test</in>
    </ping>
  </v:Body>
</v:Envelope> 
```

我发现网络服务不喜欢第 4 行

```
<ping xmlns="http://shared.bimserver.org/"> 
```

它的格式应该类似于上面使用soapUI 生成的（工作）请求。不知何故，Web 服务不喜欢直接在 ping 标记中定义命名空间。然而。使用我的代码，我得到以下响应：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <soap:Fault>
         <faultcode>soap:Client</faultcode>
         <faultstring>Unmarshalling Error: unexpected element (uri:"http://shared.bimserver.org/", local:"in"). Expected elements are &lt;{}in></faultstring>
      </soap:Fault>
   </soap:Body>
</soap:Envelope> 
```

那么如何从 ping 标签到信封标签获取命名空间呢？

# java - 在另一个字符串中查找多个字符串

> ID：15421809
> 
> 赞同：0
> 
> 时间：2013-03-14T22:59:34.960
> 
> 标签：java, string, validation, if-statement

好的，所以我正在尝试创建一个简单的电子邮件验证应用程序。

我被困在一个特定的位置，我需要简单地在 1 个字符串中找到 2 个字符串。我很想知道电子​​邮件中是否有 .com 或 .co.uk。到目前为止，我只是为了检查.com。我到处找，找不到解决办法。我试过做`.indexof(dotCom && dotUK)`，但没有奏效。

所以只是需要它，所以说“.com”或“.co.uk”

```
 String dotCom = ".com";
     String dotUK = ".co.uk";

     rest = user_email.indexOf( dotCom);

     if (rest== -1){
        System.out.println("Invalid email address. Must contain .com or .co.uk");
     }else{
        System.out.println("Valid email address");
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:07:37.480

```
if(mail.contains(".com") || mail.contains(".co.uk")) {
    //is valid
} 
```

`indexOf`如果您不关心它的实际索引，请不要用于检查其他字符串中子字符串的存在。

如果您只想知道某个字符串是否包含其他字符串，请使用`contains`方法 - 它更直接

正如建议的那样，更好的是：

```
if(mail.endsWith(".com") || mail.endsWith(".co.uk")) {
    //is valid
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:24:44.557

You could use a regex, or a collection of suffixes like this:

```
private static boolean matches(final String      mail,
                               final String ... suffixes)
{
    String match;

    match = null;

    for(final String suffix : suffixes)
    {
        if(mail.endsWith(suffix))
        {
            match = suffix;
            break;
        }
    }

    // or return (match); if you want to know the type.
    return (match != null);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T23:20:29.270

好吧，为了让你的片段工作，那就是

```
if (user_email.indexOf( dotCom) == -1 && user_email.indexOf( dotUK) == -1){
 System.out.println("Invalid email address. Must contain .com or .co.uk");

 }
  else {
    System.out.println("Valid email address");
} 
```

另一方面，您可以尝试[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)以获得更灵活的解决方案。希望能帮助到你

# linux - 查看 linux 目录中正在增长的文件

> ID：15421810
> 
> 赞同：3
> 
> 时间：2013-03-14T22:59:42.493
> 
> 标签：linux, bash, shell, filesystems

是否有人有一个 shell 脚本或实用程序可以监视特定目录并查看哪个文件在特定时间段内增长以及可能增长了多少？

例如，如果我在目录中有以下文件：

```
myfile1.txt
anotherfile.gz
thisonetoo.tar 
```

该脚本可以运行一次，然后在下一次运行时它可能会说类似

```
myfile1.txt +5MB
anotherfile.gz -10MB
thisonetoo.tar +100MB 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:09:35.893

我有一个使用`inotifywait`& [bash](/questions/tagged/bash "显示标记为“bash”的问题")的好方法：

```
cd /path/to/dir
inotifywait -m -e modify  -r . |
while read a; do
    [[ $a =~ MODIFY[[:space:]]+(myfile1.txt|anotherfile.gz|thisonetoo.tar) ]] &&
    du -h "${BASH_REMATCH[1]}"
done 
```

## 笔记

这样做的好处是可以避免每 N 秒*轮询一次。*

> inotify 是一种基于 inode 的文件系统通知技术。它提供了简单地监视文件系统中文件上的各种事件的可能性。它是（过时的）dnotify 的一个非常强大的替代品。inotify 带来了一种舒适的方式来管理应用程序中使用的文件。

请参阅[inotify 文档](http://inotify.aiken.cz/?section=inotify&page=about&lang=en)

（这只是一个开始，您需要更多代码才能获得所需的输出，但现在这很容易）

# c# - WPF 渲染事件不绘制任何东西

> ID：15421816
> 
> 赞同：5
> 
> 时间：2013-03-14T23:00:19.287
> 
> 标签：c#, .net, wpf

我正在尝试将一些 WinForm 代码转换为 WPF 以用于管道网络绘图应用程序。我一直基于这篇绘画应用文章：

[http://www.codeproject.com/Articles/22776/WPF-DrawTools](http://www.codeproject.com/Articles/22776/WPF-DrawTools)

这就是我在 WinForms 中的内容，我正在尝试将其转换，因为我们需要更多可自定义的窗口。我需要执行以下操作：

a）单击画布以绘制节点 b）单击并拖动上述节点 c）悬停并突出显示节点 d）使用链接连接节点

我有以下代码在画布上绘制一个矩形，但是触发渲染时画布上不会出现任何内容。我相对确定它被触发了，因为在其中放置一个消息框会导致程序崩溃。

```
protected override void OnRender(DrawingContext drawingContext)
    {
        base.OnRender(drawingContext);
        SolidColorBrush mySolidColorBrush = new SolidColorBrush();
        mySolidColorBrush.Color = Colors.LimeGreen;
        Pen myPen = new Pen(Brushes.Blue, 10);            
        Rect myRect = new Rect(50, 50, 500, 500);

        drawingContext.DrawRectangle(mySolidColorBrush, myPen, myRect);            
    }

    private void myCanvas_MouseDown(object sender, MouseButtonEventArgs e)
    {
        System.Windows.Forms.MessageBox.Show("click event fired");                         

        DrawingVisual vs = new DrawingVisual();
        DrawingContext dc = vs.RenderOpen();

        OnRender(dc);
    } 
```

“已触发”消息框就在其中，以确保单击事件触发，它确实触发了。XML:

```
<TabItem Header="View Results">
            <Canvas Background="WhiteSmoke" Name="myCanvas" MouseDown="myCanvas_MouseDown" >                    
            </Canvas>
</TabItem> 
```

是什么赋予了？文章中的那个人使用了用户控件……这就是我遇到问题的原因吗？WPF 让我发疯......我感觉好像我做错了什么，但我能找到的关于这个主题的文档很少。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T02:14:35.553

看这是我在 20 分钟内制作的一个简单示例：

XAML：

```
<Window x:Class="NodesEditor.MainWindow"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:NodesEditor"
        Title="Window1" Height="800" Width="800" x:Name="view">
    <Grid Margin="10">
        <Grid.Resources>
            <!-- This CompositeCollection basically Concatenates the Nodes and Connectors in a single one -->
            <CompositeCollection x:Key="Col">
                <CollectionContainer Collection="{Binding DataContext.Connectors,Source={x:Reference view}}"/>
                <CollectionContainer Collection="{Binding DataContext.Nodes,Source={x:Reference view}}"/>
            </CompositeCollection>

            <!-- This is the DataTemplate that will be used to render the Node class -->
            <DataTemplate DataType="{x:Type local:Node}">
                <Thumb DragDelta="Thumb_Drag">
                    <Thumb.Template>
                        <ControlTemplate TargetType="Thumb">
                            <Ellipse Height="10" Width="10" Stroke="Black" StrokeThickness="1" Fill="Blue"
                                     Margin="-5,-5,5,5" x:Name="Ellipse"/>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsDragging" Value="True">
                                    <Setter TargetName="Ellipse" Property="Fill" Value="Yellow"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Thumb.Template>
                </Thumb>
            </DataTemplate>

            <!-- This is the DataTemplate that will be used to render the Connector class -->
            <DataTemplate DataType="{x:Type local:Connector}">
                <Line Stroke="Black" StrokeThickness="1"
                      X1="{Binding Start.X}" Y1="{Binding Start.Y}"
                      X2="{Binding End.X}" Y2="{Binding End.Y}"/>
            </DataTemplate>
        </Grid.Resources>

        <!-- This Border serves as a background and the VisualBrush used to paint its background serves as the "Snapping Grid" -->
        <!-- The "Snapping" Actually occurs in the Node class (see Node.X and Node.Y properties), it has nothing to do with any UI Elements -->
        <Border>
            <Border.Background>
                <VisualBrush TileMode="Tile"
                             Viewport="0,0,50,50" ViewportUnits="Absolute" 
                             Viewbox="0,0,50,50" ViewboxUnits="Absolute">
                    <VisualBrush.Visual>
                        <Rectangle Stroke="Darkgray" StrokeThickness="1" Height="50" Width="50"
                                   StrokeDashArray="5 3"/>
                    </VisualBrush.Visual>
                </VisualBrush>
            </Border.Background>
        </Border>
        <ItemsControl>
            <ItemsControl.ItemsSource>
                <StaticResource ResourceKey="Col"/>
            </ItemsControl.ItemsSource>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas IsItemsHost="True"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemContainerStyle>
                <Style TargetType="ContentPresenter">
                    <Setter Property="Canvas.Left" Value="{Binding X}"/>
                    <Setter Property="Canvas.Top" Value="{Binding Y}"/>
                </Style>
            </ItemsControl.ItemContainerStyle>
        </ItemsControl>
    </Grid>
</Window> 
```

代码背后：

```
using System.Collections.Generic;
using System.Linq;
using System.Windows;
using System.Windows.Controls.Primitives;

namespace NodesEditor
{
    public partial class MainWindow : Window
    {
        public List<Node> Nodes { get; set; }
        public List<Connector> Connectors { get; set; }

        public MainWindow()
        {
            InitializeComponent();

            Nodes = NodesDataSource.GetRandomNodes().ToList();
            Connectors = NodesDataSource.GetRandomConnectors(Nodes).ToList();

            DataContext = this;
        }

        private void Thumb_Drag(object sender, DragDeltaEventArgs e)
        {
            var thumb = sender as Thumb;
            if (thumb == null)
                return;

            var data = thumb.DataContext as Node;
            if (data == null)
                return;

            data.X += e.HorizontalChange;
            data.Y += e.VerticalChange;
        }
    }
} 
```

数据模型：

```
public class Node: INotifyPropertyChanged
    {
        private double _x;
        public double X
        {
            get { return _x; }
            set
            {
                //"Grid Snapping"
                //this actually "rounds" the value so that it will always be a multiple of 50.
                _x = (Math.Round(value / 50.0)) * 50;
                OnPropertyChanged("X");
            }
        }

        private double _y;
        public double Y
        {
            get { return _y; }
            set
            {
                //"Grid Snapping"
                //this actually "rounds" the value so that it will always be a multiple of 50.
                _y = (Math.Round(value / 50.0)) * 50;
                OnPropertyChanged("Y");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged(string propertyName)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

public class Connector
{
    public Node Start { get; set; }
    public Node End { get; set; }
} 
```

随机数据源（用一些东西填充示例）

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace NodesEditor
{
    public static class NodesDataSource
    {
        public static Random random = new Random();

        public static Node GetRandomNode()
        {
            return new Node
                {
                    X = random.Next(0,500),
                    Y = random.Next(0,500)
                };

        }

        public static IEnumerable<Node> GetRandomNodes()
        {
            return Enumerable.Range(5, random.Next(6, 10)).Select(x => GetRandomNode());
        }

        public static Connector GetRandomConnector(IEnumerable<Node> nodes)
        {
            return new Connector { Start = nodes.FirstOrDefault(), End = nodes.Skip(1).FirstOrDefault() };
        }

        public static IEnumerable<Connector> GetRandomConnectors(List<Node> nodes)
        {
            var result = new List<Connector>();
            for (int i = 0; i < nodes.Count() - 1; i++)
            {
                result.Add(new Connector() {Start = nodes[i], End = nodes[i + 1]});
            }
            return result;
        }
    }
} 
```

这是它在我的电脑中的样子：

![在此处输入图像描述](../Images/dca60d6a61fdb9ea813b7b0a8c73f7f2.png)

# php - PHP查找从开始时间到下一个重复事件还有多少天

> ID：15421818
> 
> 赞同：0
> 
> 时间：2013-03-14T23:00:34.137
> 
> 标签：php, calendar, intervals

我有一个日历，其中包含用户从安装开始日期输入的事件。这些事件总是从开始日期开始重复，每隔 X 天、几个月或几年，我们不知道结束日期。我需要找到以 unix 时间戳格式发生的下一个事件。我试图找出内置的 PHP DateInterval 类，但我不知道如何在没有已知结束日期的情况下。

这是我到目前为止所拥有的

```
/* User Input */
$installdate="315558000";// 1st Jan 1980 
$Every = 1; // Could be 1 =>  
$DateOption = 'Months'; // Could be 'Days' 'Months' or 'Years'

#Possible user selections 
$DateJustify = array('Days'=>j,'Months'=>n,'Years'=>Y);

#Getting the next service date into printed variables for mktime
foreach($DateJustify as $keyDate => $dt ){
${$keyDate}=date($dt,$installdate);
if($DateOption == $keyDate )
${$keyDate} += $Every; 
} 
```

这将返回所有适合使用 mktime 时间戳的内容，但它只是给出了安装日期的下一个日期。由于安装日期从一天开始，最终秒、分钟或小时都无关紧要

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T00:01:17.827

使用[DateTime](http://php.net/manual/en/class.datetime.php)类将字符串转换为时间。第二个参数接受时区，使用[DateTimeZone](http://php.net/manual/en/class.datetimezone.php)。

```
$z = new DateTimeZone("Europe/Berlin");
$d = new DateTime("next wed +3 day", $z);
echo $d->format("d.m.Y H:i");
echo $d->format("U"); # or echo $d->getTimestamp(); on PHP > 5.3.0 
```

[DateTime::format()](http://php.net/manual/en/datetime.format.php)方法接受类似于[date()](http://php.net/manual/en/function.date.php)函数的格式。

# ffmpeg - 没有使用 webm/libvorbis 使用 ffmpeg 编码的音频

> ID：15421819
> 
> 赞同：0
> 
> 时间：2013-03-14T23:00:37.843
> 
> 标签：ffmpeg, webm

将音频编码为 webm 时遇到问题。尝试了许多不同的方法，它只是没有发生。每次通过之前，命令都打印在下面。

我尝试过移动音频命令，尝试不同的比特率，不同的音频命令，并在几个不同的文件上尝试过，它们都有音频。

使用 x264 将这些文件编码为 MP4 不会导致任何问题，并且工作正常并且可以播放音频，因此这似乎只是 webm 的问题。正如您在下面看到的，它是一个 2-pass 编码。

感谢您的任何帮助，您可以提供！

克雷格

```
Webm LG PASS 1...........................

    webm_pass1: /usr/bin/ffmpeg -i /home/thedirectory/video613268.mov  -codec:v libvpx -quality good -vf 'scale=640:360 [scaled];movie=/home/thedirectory/watermarks/w640X360.png [logo];[scaled][logo] overlay' -cpu-used 0 -b:v 500k -aspect 16:9 -qmin 10 -qmax 42 -maxrate:v 500k -bufsize:v 1000k -r:v 25/1 -force_fps -threads 0 -an -acodec libvorbis -ac 2 -ab 96k -ar 44100 -pass 1 -f webm -y /dev/null

    ffmpeg version 0.10.2 Copyright (c) 2000-2012 the FFmpeg developers
      built on Mar 11 2013 14:48:26 with gcc 4.6.2 20111027 (Red Hat 4.6.2-2)
      configuration: --prefix=/usr --libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --incdir=/usr/include --disable-avisynth --extra-cflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC' --enable-avfilter --enable-libfaac --enable-libgsm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libx264 --enable-gpl --enable-nonfree --enable-postproc --enable-pthreads --enable-shared --enable-swscale --enable-vdpau --enable-version3 --enable-x11grab --enable-libvorbis --enable-libvpx
      libavutil      51\. 35.100 / 51\. 35.100
      libavcodec     53\. 61.100 / 53\. 61.100
      libavformat    53\. 32.100 / 53\. 32.100
      libavdevice    53\.  4.100 / 53\.  4.100
      libavfilter     2\. 61.100 /  2\. 61.100
      libswscale      2\.  1.100 /  2\.  1.100
      libswresample   0\.  6.100 /  0\.  6.100
      libpostproc    52\.  0.100 / 52\.  0.100
    Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/home/thedirectory/video613268.mov':
      Metadata:
        major_brand     : qt  
        minor_version   : 537199360
        compatible_brands: qt  
        creation_time   : 2013-02-23 20:04:32
      Duration: 00:00:21.02, start: 0.000000, bitrate: 114326 kb/s
        Stream #0:0(eng): Video: mjpeg (jpeg / 0x6765706A), yuvj422p, 1920x1080 [SAR 72:72 DAR 16:9], 112786 kb/s, 29.97 fps, 29.97 tbr, 2997 tbn, 2997 tbc
        Metadata:
          creation_time   : 2013-02-23 20:04:32
          handler_name    : ?Gestionnaire d?alias Apple
        Stream #0:1(eng): Audio: pcm_s16be (twos / 0x736F7774), 48000 Hz, 2 channels, s16, 1536 kb/s
        Metadata:
          creation_time   : 2013-02-23 20:04:32
          handler_name    : ?Gestionnaire d?alias Apple
    Incompatible pixel format 'yuvj422p' for codec 'libvpx', auto-selecting format 'yuv420p'
    [buffer @ 0x1f675a0] w:1920 h:1080 pixfmt:yuvj422p tb:1/1000000 sar:1/1 sws_param:
    [movie @ 0x1f799c0] seek_point:0 format_name:(null) file_name:/home/thedirectory/watermarks/w640X360.png stream_index:0
    [overlay @ 0x1f7c2c0] auto-inserting filter 'auto-inserted scale 0' between the filter 'Parsed_movie_1' and the filter 'Parsed_overlay_2'
    [scale @ 0x1f78d40] w:1920 h:1080 fmt:yuvj422p -> w:640 h:360 fmt:yuv420p flags:0x4
    [scale @ 0x1f7cde0] w:640 h:360 fmt:rgba -> w:640 h:360 fmt:yuva420p flags:0x4
    [overlay @ 0x1f7c2c0] main w:640 h:360 fmt:yuv420p overlay x:0 y:0 w:640 h:360 fmt:yuva420p
    [overlay @ 0x1f7c2c0] main_tb:1/1000000 overlay_tb:1/25 -> tb:1/1000000 exact:1
    [libvpx @ 0x1f77ce0] v1.0.0
    Output #0, webm, to '/dev/null':
      Metadata:
        major_brand     : qt  
        minor_version   : 537199360
        compatible_brands: qt  
        creation_time   : 2013-02-23 20:04:32
        encoder         : Lavf53.32.100
        Stream #0:0(eng): Video: vp8, yuv420p, 640x360 [SAR 1:1 DAR 16:9], q=10-42, pass 1, 500 kb/s, 1k tbn, 25 tbc
        Metadata:
          creation_time   : 2013-02-23 20:04:32
          handler_name    : ?Gestionnaire d?alias Apple
    Stream mapping:
      Stream #0:0 -> #0:0 (mjpeg -> libvpx)
    Press [q] to stop, [?] for help
    frame=  527 fps= 21 q=0.0 Lsize=       0kB time=00:00:00.00 bitrate=   0.0kbits/s dup=0 drop=103    
    video:0kB audio:0kB global headers:0kB muxing overhead -nan%
    Output file is empty, nothing was encoded (check -ss / -t / -frames parameters if used)
    Webm LG PASS 2.......................

    webm_pass2: /usr/bin/ffmpeg -i /home/thedirectory/video613268.mov -codec:v libvpx -quality good -vf 'scale=640:360 [scaled];movie=/home/thedirectory/watermarks/w640X360.png [logo];[scaled][logo] overlay' -cpu-used 0 -b:v 500k  -aspect 16:9  -qmin 10 -qmax 42 -maxrate:v 500k -bufsize:v 1000k -r:v 24/1 -force_fps -threads 0 -an -acodec libvorbis -ac 2 -ab 96k -ar 44100 -pass 2 -f webm -y /media/amazons3/webmlg/video613268.mov.webm

    ffmpeg version 0.10.2 Copyright (c) 2000-2012 the FFmpeg developers
      built on Mar 11 2013 14:48:26 with gcc 4.6.2 20111027 (Red Hat 4.6.2-2)
      configuration: --prefix=/usr --libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --incdir=/usr/include --disable-avisynth --extra-cflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC' --enable-avfilter --enable-libfaac --enable-libgsm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libx264 --enable-gpl --enable-nonfree --enable-postproc --enable-pthreads --enable-shared --enable-swscale --enable-vdpau --enable-version3 --enable-x11grab --enable-libvorbis --enable-libvpx
      libavutil      51\. 35.100 / 51\. 35.100
      libavcodec     53\. 61.100 / 53\. 61.100
      libavformat    53\. 32.100 / 53\. 32.100
      libavdevice    53\.  4.100 / 53\.  4.100
      libavfilter     2\. 61.100 /  2\. 61.100
      libswscale      2\.  1.100 /  2\.  1.100
      libswresample   0\.  6.100 /  0\.  6.100
      libpostproc    52\.  0.100 / 52\.  0.100
    Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/home/thedirectory/video613268.mov':
      Metadata:
        major_brand     : qt  
        minor_version   : 537199360
        compatible_brands: qt  
        creation_time   : 2013-02-23 20:04:32
      Duration: 00:00:21.02, start: 0.000000, bitrate: 114326 kb/s
        Stream #0:0(eng): Video: mjpeg (jpeg / 0x6765706A), yuvj422p, 1920x1080 [SAR 72:72 DAR 16:9], 112786 kb/s, 29.97 fps, 29.97 tbr, 2997 tbn, 2997 tbc
        Metadata:
          creation_time   : 2013-02-23 20:04:32
          handler_name    : ?Gestionnaire d?alias Apple
        Stream #0:1(eng): Audio: pcm_s16be (twos / 0x736F7774), 48000 Hz, 2 channels, s16, 1536 kb/s
        Metadata:
          creation_time   : 2013-02-23 20:04:32
          handler_name    : ?Gestionnaire d?alias Apple
    Incompatible pixel format 'yuvj422p' for codec 'libvpx', auto-selecting format 'yuv420p'
    [buffer @ 0x1f2a5a0] w:1920 h:1080 pixfmt:yuvj422p tb:1/1000000 sar:1/1 sws_param:
    [movie @ 0x1f3bec0] seek_point:0 format_name:(null) file_name:/home/thedirectory/watermarks/w640X360.png stream_index:0
    [overlay @ 0x1f3f2c0] auto-inserting filter 'auto-inserted scale 0' between the filter 'Parsed_movie_1' and the filter 'Parsed_overlay_2'
    [scale @ 0x1f3c8a0] w:1920 h:1080 fmt:yuvj422p -> w:640 h:360 fmt:yuv420p flags:0x4
    [scale @ 0x1f3fde0] w:640 h:360 fmt:rgba -> w:640 h:360 fmt:yuva420p flags:0x4
    [overlay @ 0x1f3f2c0] main w:640 h:360 fmt:yuv420p overlay x:0 y:0 w:640 h:360 fmt:yuva420p
    [overlay @ 0x1f3f2c0] main_tb:1/1000000 overlay_tb:1/25 -> tb:1/1000000 exact:1
    [libvpx @ 0x1f3ace0] v1.0.0
    Output #0, webm, to '/media/amazons3/webmlg/video613268.mov.webm':
      Metadata:
        major_brand     : qt  
        minor_version   : 537199360
        compatible_brands: qt  
        creation_time   : 2013-02-23 20:04:32
        encoder         : Lavf53.32.100
        Stream #0:0(eng): Video: vp8, yuv420p, 640x360 [SAR 1:1 DAR 16:9], q=10-42, pass 2, 500 kb/s, 1k tbn, 24 tbc
        Metadata:
          creation_time   : 2013-02-23 20:04:32
          handler_name    : ?Gestionnaire d?alias Apple
    Stream mapping:
      Stream #0:0 -> #0:0 (mjpeg -> libvpx)
    Press [q] to stop, [?] for help
    frame=  506 fps=  7 q=0.0 Lsize=    1610kB time=00:00:21.08 bitrate= 625.8kbits/s dup=0 drop=124    
    video:1389kB audio:0kB global headers:0kB muxing overhead 15.952140% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T00:13:11.150

该[`-an`选项](http://ffmpeg.org/ffmpeg.html#Audio-Options)用于产生没有音频的输出。如果您想要音频，请删除此选项。

# r - knitr 的缓存机制如何检查是否运行一个块？

> ID：15421821
> 
> 赞同：2
> 
> 时间：2013-03-14T23:00:46.280
> 
> 标签：r, caching, knitr

我正在写一个文档，`knitr`并且`Latex`缓存机制有问题。具体来说，我有一个问题，我将多个数据帧写入 CSV 文件以便`pgfplotstable`稍后读取它们。但是，如果相应的 CSV 文件已被删除或以任何方式更改，则 knitr 的缓存机制无法重新运行块。比如下面的文档运行一次，删除`mwe.dat`后再运行会报错

```
\documentclass{article}
\begin{document}
<<cache=TRUE>>=
df <- data.frame(a=rep(1,5), b=rep(2.5), c=rep(3,5))
write.csv(df, file='mwe.dat')
rm(df)
@

<<cache=FALSE>>=
df <- read.csv(file='mwe.dat')
## Warning: cannot open file ’mwe.dat’: No such file or directory
## Error: cannot open the connection
@
\end{document} 
```

那么问题来了，knitr 是如何确定一个 chunk 需要重新运行的呢？如果它只是关于块源代码的实际更改，那么我将不得不将我的（相当数量的）`write.csv`语句包装在它们自己的块中，尽管事实上大部分时间块只设置数据框要写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:32:38.390

网站中的[缓存页面](http://yihui.name/knitr/demo/cache/)`knitr`已经解释了这个问题。特别是，`#238`在该页面中搜索类似案例。

# javascript - 使用 DOM 探索表

> ID：15421822
> 
> 赞同：1
> 
> 时间：2013-03-14T23:00:57.133
> 
> 标签：javascript, dom

我正在构建一个我想使用 DOM 探索的动态 html 表。这是表格的代码：

```
<table id='nameTable'>
  <col width='5%'/>
  <col width='40%'/>
  <col width='40%'/>
  <col width='5%'/>
  <tr>
    <th rowspan='1' colspan='1'>Modify:</th>
    <th colspan='2'>Name Set Title: <span id="setTitle"><?php echo $setTitle ?></span></th>
    <th rowspan='1' colspan='1'>Remove:</th>
  </tr>
  <tr>
    <th rowspan='1' colspan='1'><input type='checkbox' name='' value='' /> All</th>
    <th colspan='2'>Tags: <span id="tags"><?php
      foreach ($tagArray as $tag){
        echo $tag." ";
      }?></span>
    </th>
    <th rowspan='1' colspan='1'><input type='checkbox' name='' value='' /> All</th>
  </tr>
    <?php 
      foreach ($nameArray as $pair){
        echo
        "<tr>
          <td><input type='checkbox' name='' value=''/></td>
          <td>".$pair[0]."</td>
          <td>".$pair[1]."</td>
          <td><input type='checkbox' name='' value=''/></td>
        </tr>";
      }
    ?>
</table> 
```

在上面，`$nameArray`是一个数组数组，每个子数组包括一个名字和一个姓氏。

我正在尝试使用 DOM 访问 HTML 表的各种元素。我在我的页面中建立了一个`<p id='test'></p>`测试区域，我可以在其中看到各种 DOM 语句的含义，例如通过执行`document.getElementById('test').innerHTML=document.getElementById('nameTable').childNodes[2].childNodes[1].innerHTML;`

我无法将`childNodes`. 进一步来说：

*   `getElementById('nameTable').childNodes[2].childNodes[0]`是`[object HTMLTableRowElement]`，我可以用 得到值`innerHTML`。包含表格的标题等。
*   `childNodes[2].childNodes[2]`也是`[object HTMLTableRowElement]`对应于我表的第二行的。
*   这两者之间是`childNodes[2].childNodes[1]`，这是一个`[object Text]`。正如预期的那样，它`nodeName`是。`#text`但是，它`nodeValue`是空白的。我不明白该节点包含什么或如何访问它的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T23:06:10.537

*   首先，避免使用`innerHTML`like that。如果需要，您可以克隆 DOM 元素。

*   其次，您的表格缺少`<tbody>`，这意味着浏览器将为您插入它，从而使您的嵌套`.childNodes`不准确。

*   第三，是的，会有你可能没想到的文本节点。页面中的所有内容都表示为一个节点，因此您需要处理表示您的空白格式的节点。

*   最后，表格元素很容易导航，因为它们有自己的自定义集合，所以使用它们而不是`.childNodes`. 这也解决了文本节点的情况。

    ```
    table.rows[]        // collection of rows in the table

    table.tBodies[]     // collection of tbody elements in the table

    table.tBodies[0].rows[]           // collection of rows in the first tbody

    table.tBodies[0].rows[0].cells[]  // collection of cells in the first row
                                      //                     in the first tbody

    table.tHead         // thead element
    table.tHead.rows... // as above

    table.tFoot         // tfoot element
    table.tFoot.rows... // as above 
    ```

# sql-server - 产品分类父/子层次结构 - “父属性必须与维度的关键属性相关。”

> ID：15421823
> 
> 赞同：0
> 
> 时间：2013-03-14T23:00:59.547
> 
> 标签：sql-server, ssas, sql-server-2012, business-intelligence, ssas-2012

这是我在stackoverflow上的第一篇文章......我做了一些搜索，但找不到我的答案，所以我会在这里问。

我需要按产品分类报告销售额。

*   FactTransactions 有对 ProductID 的引用
*   我的 DimProduct 表有 ProductID、ClassID、ProductName、...
*   我的 DimProductClass 表有 ClassID、ParentClassId、ClassName、...
*   产品分类是父子关系...一对多

一个产品可以属于一个类（一对多），但进入不同级别的层次结构......例如：

1.  管A（产品）->镀锌管（类）->管（类）
2.  管 B（产品）-> 钢管（类）-> 管（类）
3.  管道 C（产品）-> 管道（类）
4.  管 D（产品）-> 镀锌管（类）-> 管（类）

在 SSAS 中，我采取了以下步骤：

1.  在数据源视图中定义了我的关系

    *   与 DimProduct (p) 相关的事实 (f)
    *   将 DimProduct (p) 与 p.ClassID = pc1.ClassID 上的 DimProductCategory (pc1) 相关联
    *   将 DimProductCategory (pc1) 关联到 pc1.ParentClassId = pc2.ClassId 上的 DimProductCategory (pc2)
2.  定义产品维度

    *   拉入以下属性
        *   ProductName（ProductID 键列；键字段属性用法）
        *   ClassName（ClassID 键列）
        *   类（ParentClassID 键列、父属性用法）
    *   相关属性
        *   产品名 -> 类名
        *   类名 -> 类

当我执行最后一步时，出现错误**“父属性必须与维度的键属性相关”。**

这是一个使用 AdventureWorks 的类似模型的屏幕截图的链接（我没有足够的声望点来添加屏幕截图）：http: [//i.imgur.com/zwtFemH.png](http://i.imgur.com/zwtFemH.png)

我可以做些什么来将产品交易汇总到他们必要的产品分类中？

谢谢，

BPlantes

# php - Fancybox Gallery 中独特的点赞按钮

> ID：15421829
> 
> 赞同：2
> 
> 时间：2013-03-14T23:01:43.917
> 
> 标签：php, javascript, fancybox, facebook-like, expressionengine

我到处搜索，但还没有找到关于这个问题的明确答案。[这个问题对我的帮助最大](https://stackoverflow.com/questions/9243163/like-action-not-showing-on-users-wall)，但我仍然无法让“赞”按钮将图像发布到用户的时间轴。

在我的网站 example.com/gallery/my-gallery 的几个页面上，有 10 张照片。我使用[Fancybox](http://fancyapps.com)作为图像查看器。我的意图是在每张幻灯片上设置一个“赞”按钮，以允许用户赞该图像并将该活动记录在他们的时间轴上。

使用带有唯一查询的编码 URL，我可以让活动记录在时间线上，但问题是图像不会显示，除非我首先使用 FB 的调试器对自定义 URL 进行 Lint。

我正在使用 iFrame Like 按钮并获取一个独特的图像 URL，如下所示：

```
// Inside my call to Fancybox, I am using two event listeners
beforeLoad : function(){
    var that = this

    // this/that is the absolute url to the image.
    // I split it off into a variable img that I will use as a query string.
    a = function(){
        var url = that.href
        var img = url.split("http://example.com").pop()
        return img
    }
},
afterLoad : function(e){
    // argument "e" lets me dig in and the current Gallery URL 'example.com/gallery/my-gallery' 
    var galUrl = e.parent.context.URL
    // now I have pathToImg that I can use as a query string
    var pathToImg = a() 
```

好的，现在我使用`galUrl`和的组合`pathToImg`来构建一个唯一的 url：

```
var thisURL = encodeURIComponent(galUrl + '?' + pathToImg)

// still in afterLoad() at this point, so I dynamically create a Like button with the proper parameters
<iframe src="//www.facebook.com/plugins/like.php?href=' + thisURL + '&amp;send=false&amp;layout=button_count&amp;width=50&amp;show_faces=false&amp;action=like&amp;colorscheme=light&amp;font=segoe+ui&amp;height=21&amp;appId=########" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:80px; height:21px;" allowTransparency="true"></iframe> 
```

FWIW，appID 参数 ( `########`) 链接到 FB 开发人员仪表板上的“应用程序”。应用程序域设置为 example.com，在与 Facebook 集成下，我选择了“使用 Facebook 登录的网站”，站点 URL 为[http://example.com](http://example.com)（注意添加的协议）。我没有进行其他配置更改。沙盒模式已关闭。

好的，最后一点是修改引用 url 上的 OG 标签（`thisURL`解析为）。您可能知道也可能不知道，FB 会将其 OG 解析器发送到 href 参数中提供的 url，它看起来像[http://example.com/gallery/my-gallery?/path/to/image.jpg](http://example.com/gallery/my-gallery?/path/to/image.jpg) (但它实际上是 URL 编码的）。我在我的元标记中使用 PHP 来提供提取查询字符串并向 FB 显示我希望它看到的内容。

```
<meta property="og:type" content="article" />
<meta property="og:image" content="<?= "http://example.com".$_SERVER['QUERY_STRING']; ?>" />
<meta property="og:url" content="<?= "http://example.com".$_SERVER['REQUEST_URI']; ?>" /> 
```

给定一个类似 的 URL `http://example.com/gallery/my-gallery?/path/to/image.jpg`，`og:image`标签解析为`http://example.com/path/to/image.jpg`并且`og:url`标签解析为`http://example.com/gallery/my-gallery?/path/to/image.jpg`。

这是在 CMS（ExpressionEngine）上，因此该块实际上被包装在条件中。

我的其他元标记：

```
<meta property="og:title" content="WEBSITE TITLE - {embed="includes/page-title segment='{segment_1}'"}" />      
<meta property="og:description" content="WEBSITE DESCRIPTION">
<meta property="og:site_name" content="WEBSITE NAME" />
<meta property="fb:app_id" content="#########" /> 
```

现在，当我喜欢一张照片时，我会在我最近在我的 Facebook 个人资料上的活动中看到它，其中包含所有预期的 OG 标签，**除了图像。**当我使用 FB 的调试器检查[http://example.com/gallery/my-gallery?/path/to/image.jpg](http://example.com/gallery/my-gallery?/path/to/image.jpg)时，我得到了所有的预期值，**包括图像**。

如果我先对那个 url 进行 lint，然后像图像一样，图像**确实**会出现在我的时间线上。我不知道以编程方式检查每个查询字符串 url 是一种选择。

几乎我的智慧结束了。有人可以帮忙吗？

# jsp - 如何在struts的动作类中获取更改的单选按钮值

> ID：15421830
> 
> 赞同：2
> 
> 时间：2013-03-14T23:01:45.050
> 
> 标签：jsp, struts-1

我正在使用 struts 1.3 开发一个应用程序。在我的 JSP 页面中，一个表格将所有注册用户的详细信息显示为每行一条记录。

每行包含两个单选按钮，FM 和“ODP”。在用户注册期间，所有用户的默认值为 FM。

管理员必须选择特定用户并将他们的选项更改为 ODP。管理员可以更改所有用户的选项，也可以跳过某些用户。按下提交按钮后，如何根据管理员的选择一一读取所有更改的单选按钮值以更新数据库。

每当我在更改值后按下提交按钮时，我都会在我的操作类中获得相同的旧值。如何访问所选单选按钮的新值？

对此的任何帮助将不胜感激。

这是我的示例代码-

JSP-

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="/WEB-INF/struts-html.tld" prefix="html" %>
<%@taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>
<%@taglib uri="/WEB-INF/struts-logic.tld" prefix="logic" %>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>JSP Page</title>

</head>

<body>
    <div style="color:red">
   <!--     <html:errors/> --> 
    </div>
    <html:form  action="/User.dp?parameter=save" >
    <div>
<div style="float:left;padding-left:30px;">UserName</div> 
<div style="float:left;padding-left:30px;">Address</div>
<div style="float:left;padding-left:30px;">Satus</div>
<div style="float:left;padding-left:30px;">Radio</div>
<div style="clear:both;"></div>
</div>
<logic:iterate  id="listUserIdDetails" name="UserForm" property="listUserId">
<p>
<div>
<div style="float:left;padding-left:30px;"><bean:write name="listUserIdDetails" property="name"/> </div> 
<div style="float:left;padding-left:60px;"><bean:write name="listUserIdDetails" property="address"/></div>
<div style="float:left;padding-left:60px;"><bean:write name="listUserIdDetails" property="active"/></div>
 <div style="float:left;padding-left:60px;"><html:radio indexed="true" property="active" name="listUserIdDetails" value="001"   /> <html:radio indexed="true"  property="active" name="listUserIdDetails"  value="002" /></div>
  </div><div style="clear:both;"></div>
  </logic:iterate>
  <html:submit value="submit"  ></html:submit>
       </html:form>
  </body>
  </html> 
```

这是我的动作课-

```
 public ActionForward save(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {
    UserListForm userForm = (UserListForm) form;
    ArrayList alist=userForm.getListUserId();

     for(int i=1;i<alist.size();i++)
     {
         UserListForm ulist= (UserListForm)alist.get(i);
        System.out.println("User:"+ulist.getName()+":"+ulist.getActive()); 
     }
    System.out.println(userForm.getName()+":"+userForm.getActive());

        return mapping.findForward("success");

  }
 } 
```

形式-

```
 public class UserListForm extends ActionForm {

private String name=null;
private String address=null;
private String active=null;
private ArrayList<UserListForm> listUserId=null;
public ArrayList<UserListForm> getListUserId() {
    return listUserId;
}
public void setListUserId(ArrayList<UserListForm> listUserId) {
    this.listUserId = listUserId;
}
    ......
    ......
    } 
```

如果管理员更改单选按钮，请帮助我在我的操作类中获取更改的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T17:28:55.060

我认为你应该沿着这条线做点什么。

```
<html:radio name="userListForm " property="myRadio" value="FM" >FM</html:radio>
<html:radio name="userListForm " property="myRadio" value="ODP" >ODP</html:radio> 
```

* * *

```
public class UserListForm { 
    private String myRadio;
    public String getMyRadio() {
        return myRadio;     
    }
    public void setMyRadio(String myRadio) {
        this.myRadio = myRadio;
    }
} 
```

* * *

```
public class MyAction{
     public ActionForward save(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {

        UserListForm userForm = (UserListForm) form;
        String radioSelected = userForm.getMyRadio();//This will return the value of the "myRadio" in this case it will be either "FM" or "ODP" depending on which one you selected. 
} 
```

`String radioSelected = userForm.getMyRadio()`---此语句将返回被选中的单选按钮的值。所以你可以检查这个返回的值并做你想做的事。例如。

```
if(radioSelected.equals("FM"){
     //do something
}else if(radioSelected.equals("ODB"){
     //do something else. 
} 
```

# themes - 安装新主题时是否有必要/建议删除 octopress 中的默认主题？

> ID：15421831
> 
> 赞同：1
> 
> 时间：2013-03-14T23:01:46.583
> 
> 标签：themes, blogs, octopress

我刚刚为我的 octopress 博客安装了一个新主题。但是，我认为由于主题文件中的所有内容都被复制到源文件中，所以现在有点混乱。我的意思是，在源文件中是来自我不使用的旧默认主题的文件。

它并没有给我带来太多困扰，但我只是想知道是否有办法“卸载”/删除主题？有任何想法吗？这是可以实现的吗？在安装新主题之前删除任何旧主题会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:13:15.053

卸载主题就像从隐藏的主题目录中删除它一样简单。

利用

```
rm -rf .themes/UNWANTED_THEME 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T04:40:38.803

我也遇到过同样的问题，在我的情况下它变得更糟，因为一些包含文件来自经典的 octopress 主题，并且存在冲突。

对我有用的是：

*   进入`.themes/<oldtheme>/source`以查看主题提供的确切文件
*   `source`从octopress 根目录中的文件夹中排除相应的文件
*   运行`rake install[theme]`以安装新主题，例如`classic`主题

希望能帮助到你

# excel - 尝试将单元格格式（单元格颜色）附加到 Excel 中索引匹配的信息

> ID：15421836
> 
> 赞同：0
> 
> 时间：2013-03-14T23:02:04.323
> 
> 标签：excel, vba, colors, indexing, match

这是我第一次发帖，所以提前感谢您的帮助。

我正在进行项目，我已经到了最后一步，我似乎无法弄清楚。我基本上创建了一个员工计划，当您从数据验证列表中选择某个班次时，它会在旁边的行中填充“班次块”。我已经想出了如何使用索引匹配将数据放入行中......我遇到困难的地方是我需要与填充的数据相关的颜色来附带它。这是因为我的主日程表上有一个计数颜色公式，这是至关重要的。

任何人对 Excel 中的 VBA 有任何想法可以实现这一点吗？我真的把我的头撞在了墙上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:49:50.960

这是你想要做的吗？

```
ActiveCell.Interior.ColorIndex = 36 
```

请参阅：[可能的颜色](http://msdn.microsoft.com/en-us/library/office/cc296089%28v=office.12%29.aspx#xlDiscoveringColorIndex_ColorIndexProperty)

如果它需要基于选择的某种颜色，我只需将该条件添加到代码中。您可以通过执行以下操作将新单元格颜色编码为 onload：

```
If Range("A1").Value = "Night Shift" Then
Range("A1").Interior.ColorIndex = 36
End If 
```

# pthreads - pthread_join 和 pthread_create

> ID：15421837
> 
> 赞同：0
> 
> 时间：2013-03-14T23:02:24.837
> 
> 标签：pthreads

我是多线程编程的菜鸟。这里我写了一个小程序来计算 0 到 20 的平方根。我的 thread_id 数组的大小是 3。我的策略就像要求 thread_ID[0] 计算 0,3,6 的平方根......和 ​​thread_ID[ 1]计算1,4,7...但是结果似乎有些问题。有重复的结果。

```
#include <stdio.h>
#include <math.h>
#include <pthread.h>

#define THREAD_NUM 3

void *thread_function( void *arg )
{
    int *incoming = (int*)(arg);

    double result = sqrt(*incoming);
    printf("The square root of %d is %f\n ",*incoming, result);
    return NULL;
}

int main( void )
{
    pthread_t thread_ID[THREAD_NUM];

    void *exit_result;
    int i;

    for( i = 0; i < 20; i++ )
    {
        int id = i%THREAD_NUM;
        int num = i;
        if( i >= THREAD_NUM )
        {
            if(pthread_join( thread_ID[id], &exit_result ) != 0)
                perror("join failed");
        }

        if( pthread_create( &thread_ID[id],NULL,thread_function,&(num)) != 0)
            perror("create failed");

    }
    for( i = 0; i < THREAD_NUM; i++ )
    {
        pthread_join( thread_ID[i], &exit_result );
    }
    return 0;
} 
```

结果是

2 的平方根是 1.414214 3 的平方根是 1.732051 2 的平方根是 1.414214 4 的平方根是 2.000000 5 的平方根是 2.236068 7 的平方根是 2.645751 8 的平方根是 2.828427 6 的平方根是 2.449490 9 的平方根是 3.000000 10 的平方根是 3.162278 12 的平方根是 3.464102 13 的平方根是 3.605551 11 的平方根是 3.316625 14 的平方根是 3.741657 平方根15 的平方根是 3.872983 16 的平方根是 4.000000 18 的平方根是 4.242641 17 的平方根是 4.123106 19 的平方根是 4.358899 19 的平方根是 4.358899

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:07:48.760

您的所有线程只有一个整数。具体来说：

```
int num = i; 
```

你打电话时

```
pthread_create( &thread_ID[id],NULL,thread_function,&(num)) 
```

然后将地址`num`传递给线程。现在，在每个创建的线程中，您可以按如下方式使用此地址：

```
int *incoming = (int*)(arg); 
```

所以，`*incoming`将是一个指向`num`主函数的指针。问题是，它将是一个指向所有其他线程正在使用的*相同的指针。* `num`而你不断改变`num`. 因此，每个线程都只会查看您为其设置的最后一个值。

# bash - 当命令具有变量赋值时，为什么 sudo 会出现这样的行为，我该怎么办？

> ID：15421840
> 
> 赞同：1
> 
> 时间：2013-03-14T23:02:29.627
> 
> 标签：bash, centos, centos5

我正在调试一个 bash 脚本，并将我的问题归结为这个非常简单的脚本。它在 CentOS 5.7 中运行：

```
# tmp.sh
function do_as_someuser {
  sudo -u someuser -i "$1"
}

do_as_someuser "ls -l"       # line 1
#do_as_someuser "A=1 ls -l"  # line 2 
```

`someuser`当我执行此脚本仅取消注释第 1 行时，它会按预期显示 的主目录的列表：

```
[root@centos57 test]# ./tmp.sh 
total 4
drwxr-xr-x 4 someuser someuser 4096 Mar 14 23:36 some_dir
[root@centos57 test]# 
```

但是当我只取消注释第 2 行时，它会将我记录为`someuser`并且不会返回到我的用户提示，这绝对不是我所期望的。毕竟，为什么定义一个变量会有所作为呢？

```
[root@centos57 test]# ./tmp.sh 
[someuser@centos57 ~]$ 
```

`A=1 ls -l`当我直接在命令行中编写它时，它运行得非常好。如果这是一个有效的命令，我当然应该能够执行它，将它作为参数传递给`sudo`，不是吗？

我的问题：

*   为什么会这样？
*   如何修改`do_as_someuser`以便它执行具有变量分配的命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:11:20.180

我*认为*正在发生的事情是它`sudo`本身将“var = value”形式解释为环境变量赋值，而不是仅仅将它传递给shell。就`sudo`目前而言，您正在分配`A`具有价值`1 ls -l`，然后不运行命令。例如，这是一个快速控制台会话：

```
$ sudo -i "X=5 ls"
root# echo $X
5 ls 
```

根据快速测试，您可以通过在`--`要运行的命令之前使用该选项来避免该问题：

```
$ sudo -i -- "X=5 ls"
... files ...
$ sudo -i -- 'BLORT=zorch env' | grep BLORT
BLORT=zorch
SUDO_COMMAND=/bin/sh -c BLORT=zorch env 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T23:38:59.803

实现您想要的一种方法是使用

```
sudo -u someuser $SHELL -c "A=1; ls -l; echo \$A" 
```

*即，在您以该用户身份执行的shell 命令*的开头将要穿梭的变量赋值到其他用户上下文中。

一个更具可读性的替代方案证明了这一点：

```
sudo -u someuser $SHELL -c "FOOBAR=BAZ env|grep FOOBAR" 
```

为什么会这样？我认为这是因为`sudo`没有使用 shell 作为中介来执行你给定的命令。然而，这就是我上面给出的命令的作用。从错误消息中，`-i`我假设`bash`（或者在任何情况下来自 的登录 shell `passwd`）正在尝试`exec(3)`执行命令而不是拆分参数 - 坦率地说，它怎么知道如何正确拆分它？：

```
$ sudo -u someuser $SHELL -i "FOOBAR=1 env|grep FOOBAR"
bash: FOOBAR=1 env|grep FOOBAR: No such file or directory 
```

但我相信手册页`sudo`在这种情况下的实现是错误的（`-i`选项文档）：

> 如果指定了命令，则通过 shell 的`-c`选项将其传递给 shell 以执行。

如您所见，由于使用了必须转义的变量，因此上述内容并不十分方便。

继续你的例子：

```
# tmp.sh
function do_as_someuser {
    sudo -u someuser $SHELL -c "$1"
}

do_as_someuser "ls -l"       # line 1
do_as_someuser "A=1 ls -l"   # line 2 
```

* * *

`-i`我从您的问题中不明白的部分是为什么您在期望命令运行并返回时坚持使用...为什么是*初始登录*外壳呢？你需要来自`.profile`et 的东西吗？人。？

# c - 为什么文件中写入结构的字节序与内存中的结构不同？

> ID：15421841
> 
> 赞同：0
> 
> 时间：2013-03-14T23:02:31.200
> 
> 标签：c

我尝试将结构写入文件，然后我发现它的字节序与内存中的字节序不同。

一些测试代码：

```
void show_hex(unsigned char *p, int n)
{

    for (int i=0; i<n;i++){
        printf("%02X ",p[i]);
    }

}

int main()
{
    FILE *fp = fopen("as","w");
    struct X{
        int x,y;
    };
    struct X *p = malloc( sizeof(struct X));
    p->x = 0xFFEECCAA;
    p->y = 0xFFAADD;
    show_hex((unsigned char *) p, sizeof(struct X));
    fwrite(p, sizeof(struct X), 1, fp);
    fclose(fp);

    int f = open("as2",O_WRONLY);
    write(f, p, sizeof(struct X));
    close(f);
    return 0;
} 
```

问题出来了：AA CC EE FF DD AA FF 00 //我知道那是小端

```
tyw@um08:~/pro|master⚡ ⇒  hexdump as
0000000 ccaa ffee aadd 00ff                    
0000008
tyw@um08:~/pro|master⚡ ⇒  hexdump as2
0000000 ccaa ffee aadd 00ff                    
0000008 
```

所以endin是不同的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T23:06:00.127

文件的字节顺序与内存没有什么不同。的默认行为`hexdump`是将值打印为 16 位短裤。你所看到的是对记忆的不同解释。尝试`hexdump -C`

# javascript - 动态更改 jquery 对话框的标题，未从选择下拉列表中获取缓存数据

> ID：15421843
> 
> 赞同：2
> 
> 时间：2013-03-14T23:02:40.033
> 
> 标签：javascript, jquery, jquery-ui

我有一个选择下拉列表，其中无论选择什么我希望在弹出的 jquery 对话框中显示名称，我遇到的问题是它似乎正在缓存/保留以前的值并且从不更改它。

```
 var scenarioname = '';
    scenarioname = $('#FileUploadScenarioID option:selected').text();

    $('#dialog-module-add').dialog({
        autoOpen: false,
        closeOnEscape: false,
        modal: true,
        resizable: true,
        draggable: true,
        height: 680,
        width: 720,
        title: scenarioname
    }); 
```

是的，我看到了这篇文章，但是将代码放在 jsfiddle 中似乎并没有给我想要 的东西[在 jQuery 中传递变量来更改对话框标题](https://stackoverflow.com/questions/15409658/passing-variables-in-jquery-to-change-a-dialog-title)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T23:19:41.640

也许：

```
$('#FileUploadScenarioID').on('change', function() {
    var title = $(this).find('option:selected').text();
    $('#dialog-module-add').dialog('option','title',title);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:18:23.433

也许当您更改`option`内部时`select`，它不会重新分配新`scenarioname`值。如果您为选择添加事件处理程序以重新分配怎么办`scenarioname`

```
var scenarioname = '';
$("#FileUploadScenarioID").change(function () {
    $("#FileUploadScenarioID option:selected").each(function() {
        scenarioname = $(this).val();
    });
    console.log(scenarioname);
}); 
```

在这里工作：http: [//jsfiddle.net/TEjqM/3/](http://jsfiddle.net/TEjqM/3/)

# mysql - MySQL查询以查找同时也是（一个）其他部门的员工（不是经理）的经理

> ID：15421846
> 
> 赞同：0
> 
> 时间：2013-03-14T23:02:57.130
> 
> 标签：mysql, sql, database

我得到了这个架构：

```
Emp(eid: integer,ename: string,age: integer,salary: real)
Works(eid:integer,did: integer,pct_time: integer)
Dept(did:integer,budget: real,managerid:integer) 
```

我无法概念化需要做什么。我正在考虑获取所有 managerid 的列表，然后以某种方式将 IN 与针对 eid 的子查询一起使用，但我不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:11:30.663

```
select Works.eid 
from Works inner join Dept using (did)
where Works.eid != Dept.managerid 
  and Works.eid in (select managerid as eid from Dept) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:24:53.973

我们错过了一个信息：经理是否有 Works 行？我以为有。

```
Select d1.managerid
From Dept as d1
Where Exists 
(Select 1 from Works 
 Join Dept as d2 using (did)
 Where Works.eid = d1.managerid 
 And Works.eid != d2.managerid) 
```

我认为使用“exists”比使用“in”更好。

如果您需要返回经理的完整信息，则需要在主查询中添加连接 Emp。

# java - 在 Java 中检索 XML 元素的子节点的属性和值

> ID：15421847
> 
> 赞同：1
> 
> 时间：2013-03-14T23:03:00.417
> 
> 标签：java, xml, dom

请问，如何在下面的 XML 结构中使用属性“AdvancedAlgorithm”获取 XML 课程标签名称中第二个的属性值：

```
<course name="AdvancedAlgorithm">
    <Teacher name="Francis" class="A" />
    <Teacher name="John" class="B" />
    <Teacher name="Philips" class="C" />
    <course name="AlgorithmForBeginners">
        <Teacher name="Simon" class="E" />
        <Teacher name="Joan" class="F" />
    </course>
    <Teacher name="Edward" class="M" />
</course> 
```

我尝试了各种方法来获取它，但不知何故它首先给了我一个错误的长度和一个错误的值。我在下面的代码中做错了什么？

```
 public void getStructure(NodeList list){

    for(int i= 0;i<list.getLength();i++){
        Element element = (Element)list.item(i);
           if(element.getNodeType()==Node.ELEMENT_NODE && element.getAttribute("name").equals("AdvancedAlgorithm"))
         {
                NodeList node = element.getChildNodes(); //get the child elements
                System.out.println(node.getLength());
                for(int k=0; k<node.getLength();k++){
                    Node currentNode = node.item(i);
                    Element e = (Element)currentNode;
                    System.out.println(e.getAttribute("name"));

            }

         }
    } 
```

我的分析：NodeList 列表的长度为 2。鉴于 XML 有两个 course 标签，但当我将 Element 元素的 ChildNodes 分配给 NodeList 节点并检查 NodeList 节点的长度时，这是真的吗，我发现它是 11 而不是 5，因为该节点有 5 个子节点。我关心的是，首先，我想知道这个 XML 结构的长度是多少，其次，如何检索第二个 . 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:26:58.837

我不确定你到底想做什么，但 XPath 可能会解决这个问题。下面是一个使用您提供的 XML 片段的快速示例：

```
public static void main(String[] args) throws UnsupportedEncodingException, ParserConfigurationException, SAXException, IOException, XPathExpressionException {
    final String xml = "<course name=\"AdvancedAlgorithm\">\n"
            + "    <Teacher name=\"Francis\" class=\"A\" />\n"
            + "    <Teacher name=\"John\" class=\"B\" />\n"
            + "    <Teacher name=\"Philips\" class=\"C\" />\n"
            + "    <course name=\"AlgorithmForBeginners\">\n"
            + "        <Teacher name=\"Simon\" class=\"E\" />\n"
            + "        <Teacher name=\"Joan\" class=\"F\" />\n"
            + "    </course>\n"
            + "    <Teacher name=\"Edward\" class=\"M\" />\n"
            + "</course>";
    final Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new ByteArrayInputStream(xml.getBytes("UTF-8")));
    final XPath xPath = XPathFactory.newInstance().newXPath();
    final XPathExpression expression = xPath.compile("//course[@name='AdvancedAlgorithm']//Teacher");

    final NodeList nodeList = (NodeList) expression.evaluate(doc, XPathConstants.NODESET);

    for (int i = 0; i < nodeList.getLength(); ++i) {
        System.out.println(((Element)nodeList.item(i)).getAttribute("name"));
    }
} 
```

输出：

```
Francis
John
Philips
Simon
Joan
Edward 
```

因此，`Document`然而（`String`在这种情况下是从）构建的，然后我们创建并编译一个`XPathExpression`. 这个表达式 ,`//course[@name='AdvancedAlgorithm']//Teacher`意味着找到文档中的所有“Teacher”元素，无论它们在哪里，只要它们在某处有一个名为“AdvancedAlgorithm”的课程作为父级。

表达式`//course[@name='AdvancedAlgorithm']/course`将产生一个值“AlgorithmForBeginners”，因为这要求所有课程名称为“AdvancedAlgorithm”的课程作为直接父级。

该表达式`//course[@name='AdvancedAlgorithm']/course[@name='AlgorithmForBeginners']/Teacher`将查找所有名为“AlgorithmForBeginners”的课程，其直接父项是名为“AdvancedAlgorithm”的课程，并列出所有`Teacher`直接子项的元素。

要查找名为“AlgorithmForBeginners”的任何课程的所有教师，您可以将`//course[@name='AlgorithmForBeginners']/Teacher`其用于直接孩子或`//course[@name='AlgorithmForBeginners']//Teacher`任何孩子，即直接或间接。

那是你要找的吗？我不确定“第二个属性值”是什么意思。

# php - 服务器和邮件功能

> ID：15421849
> 
> 赞同：-1
> 
> 时间：2013-03-14T23:03:19.780
> 
> 标签：php, email, server-side

**我在发送邮件时遇到问题，此脚本在 localhost 上有效，但在服务器上无效，请帮助，在 localhost 和其他服务器上处理邮件功能之间是否有区别 **

```
<?php
session_start();
error_reporting(E_ALL & ~E_NOTICE);

/**
* this function is made to upload multiple files
*@param string $file (input name)
*@return nothing
*/
function upload($file)
{
    for($i=0; $i<count($_FILES[$file]['name']); $i++) {
  //Get the temp file path
  $file_name = $_FILES[$file]['name'][$i];
  $type = $_FILES[$file]['type'][$i];
  $tmpFilePath = $_FILES[$file]['tmp_name'][$i];
  //Make sure we have a filepath
  if ($tmpFilePath != ""){
    //Setup our new file path
   global $newFilePath;
   $newFilePath  = "uploadFiles/" . $_FILES[$file]['name'][$i];
   global $files;
   $files[] = array($newFilePath.':'.$type.':'.$file_name);
   //echo $files;

   //Upload the file into the temp dir
    if(move_uploaded_file($tmpFilePath, $newFilePath)) {

     echo "تم رفع الملفات بنجاح";

    }
    else{
        echo "حدث خطا فى رفع الملفات";
    }
  }
}
}

if($_POST['contact'])
{

    if($_POST['name'] && $_POST['email'] && $_POST['phone'] && $_POST['others'] && $_FILES['img'])
    {
        $name = $_POST['name'];
        $email = $_POST['email'];
        $phone = $_POST['phone'];
        $others = $_POST['others'];
        $others = implode(" and ", $others);
        upload("img");
      foreach ($files as $index => $file) {
  foreach ($file as   $value) {
    $a[] = $value;
  }
}
}
    else
    {
      $_SESSION['message'] = "please fill all require fields";
      header('Location: contact.php');
    }
}

?>

<?php
$RecipientEmail = "mohammed_habibphp@yahoo.com"; 

$RecipientName = "mohammed habib";

$SenderEmail = $email; 

$SenderName = $name;

$subject = "coding";

$cc = "alice@example.com, bob@example.com"; 

$bcc = "johndoe@example.com";

// For HTML
$type = "HTML";
// For plain text
//$type = "plain";

$message ="<b>customer name</b>: ".$name.

"<br /><b>email</b>: ".$email.

"<br /><b>phone</b>: ".$phone.

"<br /><b>others</b>: ".$others;

// For normal leave it blank
$priority = "high";

$attachments =$a;

$sent = Email($RecipientEmail, 
              $RecipientName, 
              $SenderEmail, 
              $SenderName, 
              $cc, 
              $bcc, 
              $subject, 
              $message, 
              $attachments, 
              $priority, 
              $type);

echo $sent ? "It worked!!" : "It didn't work"; 
// ^ This is used to test if it worked

// This work is licensed under a Creative Commons Attribution-NonCommercial 3.0 Unported License

function Email($remail, $rname, $semail, $sname, $cc, $bcc, $subject, $message, $attachments, $priority, $type)  {

// Checks if carbon copy & blind carbon copy exist
if($cc != null){$cc="CC: ".$cc."\r\n";}else{$cc="";}
if($bcc != null){$bcc="BCC: ".$bcc."\r\n";}else{$bcc="";}

// Checks the importance of the email
if($priority == "high"){$priority = "X-Priority: 1\r\nX-MSMail-Priority: High\r\nImportance: High\r\n";}
elseif($priority == "low"){$priority = "X-Priority: 3\r\nX-MSMail-Priority: Low\r\nImportance: Low\r\n";}
else{$priority = "";}

// Checks if it is plain text or HTML
if($type == "plain"){$type="text/plain";}else{$type="text/html";}

// The boundary is set up to separate the segments of the MIME email
$boundary = md5(@date("Y-m-d-g:ia"));

// The header includes most of the message details, such as from, cc, bcc, priority etc. 
$header = "From: ".$sname." <".$semail.">\r\nMIME-Version: 1.0\r\nX-Mailer: PHP\r\nReply-To: ".$sname." <".$semail.">\r\nReturn-Path: ".$sname." <".$semail.">\r\n".$cc.$bcc.$priority."Content-Type: multipart/mixed; boundary = ".$boundary."\r\n\r\n";    

// The full message takes the message and turns it into base 64, this basically makes it readable at the recipients end
$fullmessage = "--".$boundary."\r\nContent-Type: ".$type."; charset=UTF-8\r\nContent-Transfer-Encoding: base64\r\n\r\n".chunk_split(base64_encode($message));

// A loop is set up for the attachments to be included.
if($attachments != null) {
  foreach ($attachments as $attachment)  {
    $attachment = explode(":", $attachment);
    print_r($attachment);

    $fullmessage .= "--".$boundary."\r\nContent-Type: ".$attachment[1]."; name=\"".$attachment[2]."\"\r\nContent-Transfer-Encoding: base64\r\nContent-Disposition: attachment\r\n\r\n".chunk_split(base64_encode(file_get_contents($attachment[0])));
  }
}

// And finally the end boundary to set the end of the message
$fullmessage .= "--".$boundary."--";

return mail($rname."<".$remail.">", $subject, $fullmessage, $header);
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:18:39.393

在[PHP 4.2.3+](http://php.net/manual/en/function.mail.php#refsect1-function.mail-changelog)中，第 4 和第 5 个参数在**[safe_mode](http://php.net/manual/en/features.safe-mode.php)**中被禁用，并且 mail() 函数将公开警告消息并在使用时返回 FALSE。

换句话说，您的服务器可能启用了**安全模式**。而你使用第四个参数：

`return mail($rname."<".$remail.">", $subject, $fullmessage, $header);`

服务器的 sendmail 设置不正确或根本没有安装也可能是一个小概率。检查`phpinfo()`它是否已启用/注册。如果一切都失败了，请致电您的网络服务器主机或提交票证。

# c# - 如何在具有 Java MTOM Web 服务的 C# 客户端中使用 Stream 而不是 byte[]

> ID：15421851
> 
> 赞同：1
> 
> 时间：2013-03-14T23:03:38.373
> 
> 标签：c#, java, web-services, cxf, mtom

我有一个使用 CXF 生成的 java webservice，并启用了 MTOM。

在 java 方面，我使用 DataHandler 而不是 byte[] 来发送一个大文件。

如果我生成一个 Java 客户端，它工作正常，也在客户端上声明 DataHandler。

问题是当我尝试创建 C#.net 客户端时。

使用 Visual Studio 2010 生成客户端代码，它将字段声明为 byte[] 而不是 Stream。这是一个问题，因为在客户端它正在读取和分配所有数据以填充字节 []。

看到 MTOM 和 C# 的一些示例，他们使用 Strem 而不是 byte[]。

如何生成客户端代码以在 C# 中使用 Stream 而不是 byte[]？

这是使用 mtom 的 wsdl 部分：

```
<xs:complexType name="wsDtoCampoRespostaFotografia">
<xs:complexContent>
<xs:extension base="tns:wsDtoCampoResposta">
<xs:sequence>
<xs:element xmlns:ns4="http://www.w3.org/2005/05/xmlmime" minOccurs="0"   name="valorRespostaFotografia" ns4:expectedContentTypes="application/octet-stream" type="xs:base64Binary"/>
</xs:sequence>
</xs:extension>
</xs:complexContent>
</xs:complexType> 
```

编辑：我遇到的问题是内存分配。当读取大量记录，或读取大文件的记录时，客户端会抛出异常（由于内存分配）。

使用 byte[] 调用 web 服务，客户端将所有数据加载到内存中，甚至在将结果提供给其余代码来处理它之前。使用 Stream 时，我可以访问 web 服务的结果，并且可以将 Stream 的内容写入文件，而无需加载到内存中，避免内存不足的问题。

# java - JButton如何设置翻转图标边界

> ID：15421854
> 
> 赞同：0
> 
> 时间：2013-03-14T23:04:11.373
> 
> 标签：java, swing, jbutton, imageicon

所以我有代码可以设置一个JButton 等于一个ImageIcon。同样，当我将鼠标悬停在图像上时，它会显示一个新的 ImageIcon，但我拥有它的方式是，新的 IconImage 实际上比原来的要大一点。现在的问题是它仍然存在于按钮的范围内，所以假设我的按钮大小是 100、250 并且翻转 IconImage 是 120、270 那么问题是每边的 20 个像素被切断。

到目前为止，我的解决方案实际上是使按钮等于翻转 IconImage 的大小，但我的问题是，即使我将鼠标悬停在最多 20 像素的图像旁边，翻转效果仍然会发生。现在这显然是因为我更改了 JButton 的边界。

如果有人有任何他们能想到的解决方案，我将不胜感激。

这是我正在做的一个例子：

```
singlePlayerButton = new ImageIcon("GUIImages\\singlePlayerButton.png");
rollOverSinglePlayerButton = new ImageIcon("GUIImages\\rollOverSinlgePlayerButton.png");
btnSinglePlayer = new JButton(singlePlayerButton);
btnSinglePlayer.setOpaque(false);
btnSinglePlayer.setContentAreaFilled(false);
btnSinglePlayer.setBorderPainted(false);
btnSinglePlayer.setFocusPainted(false);
btnSinglePlayer.setBounds(320, 25, 275, 130);
btnSinglePlayer.setRolloverIcon(rollOverSinglePlayerButton);
mainMenu.add(btnSinglePlayer); 
```

想象一下，我已经声明了我在其他地方使用的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:19:17.510

我只是确保两个图标的大小完全相同。如有必要，为较小的边框添加透明边框。

这将使一切变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:18:29.893

您可以将“MouseListener”实例添加到您的按钮并实现“mouseEntered”方法。然后，您可以更改您的按钮（bouds、image、...）并在必要时在屏幕上重新绘制它。有关更多信息，请参阅 JButton 和 MouseAdapter 类的 javadoc。

# jquery - Jquery在同一页面上的多个事件实例

> ID：15421855
> 
> 赞同：0
> 
> 时间：2013-03-14T23:04:13.537
> 
> 标签：jquery, click, multiple-instances

我正在处理具有复制搜索块的功能的页面。我还需要能够删除这些额外的搜索块。我有一个附加了点击事件的链接，以便将其删除。这似乎适用于第一个实例，但之后的每个重复实例似乎都不想工作。

任何解释为什么这不起作用？我对 jquery 还是很陌生。

这是代码：

```
$('.k-item').click(function(){

        var $searchblock = $('#search-block').html();
        var $addsearchblock = '<div class="additional-search-block"></div>';
        $('.additional-search-block').html($searchblock).attr('class', 'added-search').append($addsearchblock);
    });

$('.remove').click(function(e){
                e.preventDefault();
                //alert('hello');
                $(this).parent().hide();
            }); 
```

这是我正在处理的页面：

[http://www.mniac.com/ELRN5/search-template.html](http://www.mniac.com/ELRN5/search-template.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:10:27.183

当您绑定 using`.click()`等时，它仅绑定到绑定时存在于 DOM 中的元素。如果您希望它们在动态添加的元素上工作，则需要将[.on()与委托事件一起使用。](http://api.jquery.com/on/)

```
$(document).on('click', '.remove', function(e){
    e.preventDefault();
    $(this).parent().hide();
}); 
```

如果您有一个比所有目标元素更接近的父元素，`document`那么您应该绑定到该元素。鉴于您的示例页面：

```
$('#content').on('click', '.remove', function(e){
    e.preventDefault();
    $(this).parent().hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:12:04.003

如果您需要一条鱼，请使用：

```
$('<selector of parent of elements you want to attach events to>').on('click', '.remove', function(e) {
    e.preventDefault();
    $(this).parent().hide();
}) 
```

如果您需要钓鱼竿，请阅读[事件委托](https://www.google.com.ua/search?q=jquery%20event%20delegation&aq=f&oq=jquery%20event%20delegation&aqs=chrome.0.57j0l3j62.5283&sourceid=chrome&ie=UTF-8#hl=ru&sclient=psy-ab&q=javascript%20event%20delegation&oq=javascript%20event%20delegation&gs_l=serp.3..0l2j0i30l2.2036.4215.1.4343.11.11.0.0.0.4.173.1418.0j11.11.0...0.0...1c.1.6.psy-ab.5RmGaJ8qR88&pbx=1&bav=on.2,or.r_qf.&bvm=bv.43828540,d.Yms&fp=9c7fbc9f3f37bfa6&biw=1920&bih=975)。

# entity-framework - 将不同版本的实体框架生成的实体数据模型组合在同一个程序集中。可能吗？

> ID：15421858
> 
> 赞同：1
> 
> 时间：2013-03-14T23:04:33.977
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

我正在从事最初在 Visual Studio 2010 .Net framework 4.0 中创建的项目。我们有几个使用 EF 4.0 创建的实体数据模型。在它们中，大多数情况下我们调用存储过程和导入函数检索复杂类型。

我们已经迁移到 Visual Studio 2012（但我们没有迁移到 .Net 4.5）。我们想开始使用新版本的 EF。我们正在尝试使用 EF 4.3。

我们没有迁移 EF 4.0 生成的旧模型。但是我们尝试在同一程序集中使用 EF 4.3 创建新模型。我们能够创建，但是当我们运行它时，它失败了，出现以下异常：

**ExecuteFunction 中的类型参数“{Namespace.ComplexTypeName}”与函数返回的类型“{Namespace.ComplexTypeName}”不兼容。**

如果我们在单独的程序集中使用 EF 4.3 创建模型，它们可以正常工作。

然后，我想知道这些版本之间是否存在某种不兼容，导致这些模型不能存在于同一个程序集中。我已经寻找了一些证实我的猜测的官方来源，但我找不到任何东西。

在此先感谢！，大卫。

# watir-webdriver - 需要帮助才能使用 Watir webdriver 访问 Chrome 工具栏

> ID：15421859
> 
> 赞同：0
> 
> 时间：2013-03-14T23:04:36.240
> 
> 标签：watir-webdriver

我下载了 Chrome 扩展程序，其图标在工具栏中，我需要访问它。我在 Windows 7 上使用 Chrome。这可能使用 watir 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:05:20.590

我不认为您可以使用 Watir 或 Selenium自动化 Chrome *chrome中的任何内容。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T18:52:57.063

您需要使用其他一些 UI 级别的自动化工具。Watir 和任何基于 Webdriver（Selenium、watir-webdriver、capybara）的东西都不能自动化浏览器 DOM（文档对象模型）之外的东西。这意味着浏览器本身的控件是这些工具的“禁区”

我的第一选择是查看[RAutomate](https://github.com/jarmo/RAutomation) 语法与 Watir 用户的语法非常相似，因此如果您需要在测试中使用它，您会觉得很自然。

[AutoIT 或 XDO](http://auto.rubyforge.org/)可能是另一种选择 [Sikuli](http://www.sikuli.org/)可能是另一种选择，我主要使用它来处理闪存控制和其他非常难以自动化、在程序级别不“可见”的东西。

# ruby - 仅当弹性搜索的得分超过 1 时，我如何要求轮胎返回

> ID：15421862
> 
> 赞同：1
> 
> 时间：2013-03-14T23:04:43.693
> 
> 标签：ruby, full-text-search, elasticsearch, tire

我试图只返回`_score`超过 1 个的文档。我不知道该怎么做。我可以获取所有返回的文档并在 ruby​​ 代码中单独检查，但我想这可以直接从 elasticsearch 完成。

这是我现在的查询。

```
tag_results = Tire.search $index_elasticsearch do
            query do
                boolean do
                    should { fuzzy(:tags, query, {:min_similarity => 0.85}) }
                    should { string "description:#{query}" }
                    should { string "description1:#{query}" }
                end
            end
        end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:44:19.197

您可以在搜索中使用[min_score](http://www.elasticsearch.org/guide/reference/api/search/min-score.html)参数来指定要被接受的结果必须满足的最低分数。

但在实践中，分数会有所不同。你不会得到一致的结果。更好的是使查询的要求足够高，以便它们不包括仅略微相关的结果。

例如，看看在和查询中使用`minmum_should_match`参数。它可以设置为例如`bool``match``"60%"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-29T18:09:51.993

所以我发现有一种方法可以将 min_score 传递给 Tire。

IE。如果你只想要分数 > 1 的结果

```
Tire.search $index_elasticsearch do
   min_score 1
end 
```

# android - 使用 RatingBar 显示进度

> ID：15421864
> 
> 赞同：1
> 
> 时间：2013-03-14T23:05:11.063
> 
> 标签：android, android-progressbar, ratingbar

我得到了这个跟踪器屏幕，它可以跟踪用户的锻炼天数和完成的锻炼集。我想通过增加我的计数器来添加`ProgressBar`或`RatingBar`显示某种进度/评级。

假设`ProgressBar`当 counter2 达到 300（counter2（锻炼组已完成））时，将获得 5 星或满星。

![在此处输入图像描述](../Images/71116d5ac881e0c66a8f5e75b80becbb.png)

我当前的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    super.onCreate(savedInstanceState);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    a = new AlphaAnimation(1, 0);
    a.setDuration(120);

    if (savedInstanceState == null) {
        counter1 = 0;
        counter2 = 0;
    }
    setContentView(R.layout.tracker);

    counter1 = 0;
    counter2 = 0;

    add1 = (Button) findViewById(R.id.baddday);
    sub1 = (Button) findViewById(R.id.bsubday);
    add2 = (Button) findViewById(R.id.baddset);
    sub2 = (Button) findViewById(R.id.bsubset);
    list = (Button) findViewById(R.id.blist);
    bar = (ProgressBar) findViewById(R.id.progressBar1);

    display1 = (TextView) findViewById(R.id.tvDisplayDays);
    display2 = (TextView) findViewById(R.id.tvDisplaySets);
    Typeface tf = Typeface.createFromAsset(getAssets(), "fonts/tele.ttf");
    display1.setTypeface(tf);
    display2.setTypeface(tf);

    add1.setOnClickListener(this);
    sub1.setOnClickListener(this);
    add2.setOnClickListener(this);
    sub2.setOnClickListener(this);
    list.setOnClickListener(this);

    SharedPreferences setting = getSharedPreferences("countersetting", 0);
    counter1 = setting.getInt("countervalue1", 0);
    counter2 = setting.getInt("countervalue2", 0);
    display1.setText("" + counter1);
    display2.setText("" + counter2);
            bar.setProgress(counter2);
}

@Override
protected void onSaveInstanceState(Bundle savedInstanceState) {
    savedInstanceState.putString("YourTextViewTextIdentifier1", display1
            .getText().toString());
    savedInstanceState.putString("YourTextViewTextIdentifier2", display2
            .getText().toString());
    savedInstanceState.putInt("int", counter1);
    savedInstanceState.putInt("int", counter2);
    super.onSaveInstanceState(savedInstanceState);
}

@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    display1.setText(savedInstanceState
            .getString("YourTextViewTextIdentifier1"));
    display2.setText(savedInstanceState
            .getString("YourTextViewTextIdentifier2"));
    counter1 = savedInstanceState.getInt("int");
    counter2 = savedInstanceState.getInt("int");
}

@Override
protected void onStop() {
    super.onStop();

    SharedPreferences setting = getSharedPreferences("countersetting", 0);
    SharedPreferences.Editor editor = setting.edit();
    editor.putInt("countervalue1", counter1);
    editor.putInt("countervalue2", counter2);
    editor.commit();
}

@Override
public void onClick(View view) {
    // TODO Auto-generated method stub
    switch (view.getId()) {

    case R.id.baddday:
        counter1 += 1;
        display1.setText("" + counter1);
        add1.startAnimation(a);
        break;
    case R.id.bsubday:
        counter1 -= 1;
        display1.setText("" + counter1);
        sub1.startAnimation(a);
        break;
    case R.id.baddset:
        counter2 += 1;
        display2.setText("" + counter2);
        add2.startAnimation(a);

        bar.setProgress(counter2);
        bar.setMax(300);
        bar.incrementProgressBy(counter2);
        bar.getProgress();

        break;
    case R.id.bsubset:
        counter2 -= 1;
        display2.setText("" + counter2);
        sub2.startAnimation(a);
        bar.setProgress(counter2);
        bar.incrementProgressBy(counter2);
        bar.getProgress();

        break;
    case R.id.blist:
        new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {

                Intent i = new Intent(Tracker.this, List.class);
                startActivity(i);
            }
        }, 150);
        list.startAnimation(a);
        break;

    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:10:29.183

> 假设计数器 2 达到 300 时（计数器 2（锻炼组完成））将获得 5 颗星或完整的进度条

您已经为 设置了正确的进度，`ProgressBar`但是您还再次**增加**了新设置的进度（按计数器值），这不会显示正确的结果。在`onCreate`方法中：

```
bar.setMax(300);
bar.setProgress(counter2); // the initial stored value 
```

并在按钮的侦听器中：

```
case R.id.baddset:
    counter2 += 1;
    display2.setText(String.valueOf(counter2));
    add2.startAnimation(a);
    bar.setProgress(counter2);
    break;
case R.id.bsubset:
    counter2 -= 1;
    display2.setText(String.valueOf(counter2));
    sub2.startAnimation(a);
    bar.setProgress(counter2);
    break; 
```

# gwt - GWT 建议框覆盖默认行为

> ID：15421867
> 
> 赞同：1
> 
> 时间：2013-03-14T23:05:24.360
> 
> 标签：gwt, overriding, suggestbox

我有一个用于在我的应用程序中搜索产品的文本框。当用户在文本框中输入内容时，它应该显示建议，以便用户可以搜索任何特定的产品类别。

例如，如果产品分类为男士、女士、儿童、夏季、冬季，并且用户输入“鞋类”，则建议列表应显示如下：

```
foot wear in Men
foot wear in Women
foot wear in Kids
foot wear in Summer
foot wear in Winter 
```

在 KeyUp 事件中，我清除当前建议并通过在每个类别名称中附加用户输入的文本来填充新的建议列表。只要用户没有输入任何与类别名称匹配的内容，它就可以正常工作。也就是说，如果用户输入“Win”，则建议仅显示

```
Wi in Winter 
```

但我希望这些建议是

```
Win in Men
Win in Women
Win in Kids
Win in Summer
Win in Winter 
```

谁能告诉我可能出了什么问题。

谢谢。

**更新 - 附上代码**

我实际上创建了一个自定义小部件。下面是我的 java 和 xml 模板

```
public class MySearchBox extends Composite implements IsWidget, HasKeyDownHandlers, HasSelectionHandlers<Suggestion>, KeyUpHandler, ClickHandler, BlurHandler
{

private static MySearchBoxUiBinder uiBinder = GWT.create(MySearchBoxUiBinder.class);

interface MySearchBoxUiBinder extends UiBinder<Widget, MySearchBox>
{
}

private static final List<String> PDT_CHANNELS = Arrays.asList("Men", "Women", "Kids", "Summer", "Winter");

@UiField
SuggestBox mySuggestionBox;

public MySearchBox()
{
    initWidget(uiBinder.createAndBindUi(this));
    initialize();
}

private void initialize()
{

    mySuggestionBox.getTextBox().addKeyUpHandler(this);
    mySuggestionBox.getTextBox().addClickHandler(this);
    mySuggestionBox.getTextBox().addBlurHandler(this);

}

@Override
public void onKeyUp(final KeyUpEvent event)
{
    if(event.getNativeKeyCode() != KeyCodes.KEY_ENTER)
    {
        populateOracle(mySuggestionBox.getText().trim());
    }
}

private void populateOracle(final String inputText)
{

    String searchText = "";
    if(inputText != null)
    {
        searchText = inputText.trim();
    }
    if((searchText == null || searchText.length() < 1))
    {
        clearOracle();
        mySuggestionBox.showSuggestionList();
        return;
    }
    final List<String> oracleSuggestions = new ArrayList<String>();
    for(String scope : PDT_CHANNELS)
    {
        oracleSuggestions.add(searchText + " in " + scope);
    }
    populateOracle(oracleSuggestions);

}

private void clearOracle()
{
    final MultiWordSuggestOracle oracle = (MultiWordSuggestOracle)mySuggestionBox.getSuggestOracle();
    final DefaultSuggestionDisplay suggestionDisplay = (DefaultSuggestionDisplay)mySuggestionBox
            .getSuggestionDisplay();
    if(suggestionDisplay.isSuggestionListShowing())
    {
        suggestionDisplay.hideSuggestions();
    }
    oracle.clear();
}

private void populateOracle(final List<String> data)
{
    final MultiWordSuggestOracle oracle = (MultiWordSuggestOracle)mySuggestionBox.getSuggestOracle();
    oracle.clear();
    oracle.addAll(data);
    final DefaultSuggestionDisplay suggestionDisplay = (DefaultSuggestionDisplay)mySuggestionBox
            .getSuggestionDisplay();
    if(!suggestionDisplay.isSuggestionListShowing())
    {
        mySuggestionBox.showSuggestionList();
    }
}

@Override
public HandlerRegistration addSelectionHandler(final SelectionHandler<Suggestion> handler)
{
    return mySuggestionBox.addHandler(handler, SelectionEvent.getType());
}

@Override
public HandlerRegistration addKeyDownHandler(final KeyDownHandler handler)
{
    return mySuggestionBox.addHandler(handler, KeyDownEvent.getType());
}
} 
```

XML 模板：

```
</ui:style>
    <g:SuggestBox ui:field="mySuggestionBox"></g:SuggestBox>
</ui:UiBinder> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T23:51:56.130

我发现我的代码出了什么问题。我通过调用 clearOracle(); 清除了建议列表；然后添加新的建议。有效。谢谢大家。

```
private void populateOracle(final String inputText)
{

    String searchText = "";
    if(inputText != null)
    {
        searchText = inputText.trim();
    }
    clearOracle();
    if((searchText == null || searchText.length() < 1))
    {

        mySuggestionBox.showSuggestionList();
        return;
    }
    final List<String> oracleSuggestions = new ArrayList<String>();
    for(String scope : PDT_CHANNELS)
    {
        oracleSuggestions.add(searchText + " in " + scope);
    }
    populateOracle(oracleSuggestions);

} 
```

# php - MYSQL插入数据

> ID：15421870
> 
> 赞同：0
> 
> 时间：2013-03-14T23:05:53.023
> 
> 标签：php, head

我在 mysql 数据库中插入数据时遇到问题。错误显示如下：“您的 SQL 语法有错误；请检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '1')' 附近使用正确的语法”

```
<?php

    $firstname = $_POST['firstname'];
    $lastname = $_POST['lastname'];
    $fathername = $_POST['fathername'];
    $mothername = $_POST['Firstname'];
    $fatherjob = $_POST['fatherjob'];
    $motherjob = $_POST['motherjob'];
    $phone = $_POST['phone'];
    $mobile1 = $_POST['mobile1'];
    $mobile2 = $_POST['mobile2'];
    $address = $_POST['address'];
    $id=1;
    $roll=1;

    $sex = $_POST['sex'];
    $bloodgroup = $_POST['bloodgroup'];
    $class = $_POST['class'];
    $section = $_POST['section'];
    $day = $_POST['day'];
    $month = $_POST['month'];
    $year = $_POST['year'];
    $birthday=$day."-".$month."-".$year;

    $hostname_localhost ="localhost";
    $database_localhost ="school";
    $username_localhost ="root";
    $password_localhost ="";
    $localhost = mysql_connect($hostname_localhost,$username_localhost,$password_localhost)
    or
    trigger_error(mysql_error(),E_USER_ERROR);

    mysql_select_db($database_localhost, $localhost);

    $sql = "INSERT INTO student_info VALUES ('".$id."',".$firstname."','".$lastname."','".$sex."','".$bloodgroup."','".$fathername."','".$mothername ."','".$fatherjob."','".$motherjob."','".$address."','".$birthday."','".$phone."','".$mobile1."','".$mobile2."','".$class."','".$section."','".$roll."')";

     mysql_query($sql) or die(mysql_error());
     echo "updated  succesfully";

?> 
```

顺便说一句，我的表中有 2 列名为 id 和 roll 应该自动生成...在这种情况下，它是正确的 sql 吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:10:12.563

是的，有一个语法错误正确的语法是：

```
$sql = "INSERT INTO (id,firstname) VALUES (1,'Oussaki')"; 
```

您必须指定要在其上插入的字段..祝您好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:11:16.527

您的情况的最佳方法是使用提及如下列的查询：

```
$sql = "INSERT INTO student_info (id, firstname, ..... ) VALUES ('".$id."',".$firstname."','".$lastname."','".$sex."','".$bloodgroup."','".$fathername."','".$mothername ."','".$fatherjob."','".$motherjob."','".$address."','".$birthday."','".$phone."','".$mobile1."','".$mobile2."','".$class."','".$section."','".$roll."')"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-05-22T22:45:05.967

你在这里犯了一个错误

```
 $sql = "INSERT INTO student_info VALUES ('".$id."',".$firstname."','".$lastname."','".$sex."','".$bloodgroup."','".$fathername."','".$mothername ."','".$fatherjob."','".$motherjob."','".$address."','".$birthday."','".$phone."','".$mobile1."','".$mobile2."','".$class."','".$section."','".$roll."')"; 
```

要在MYSQL中插入数据，首先要确认`column` 要插入到哪个位置和哪个值。因此，在声明之前`VALUES`，您必须首先指定要存储的列`$id $firstname`。这同样适用于其他人。

此外，您不需要之前和之后的“点”`$id`以及其他。我希望你的数据库有诸如此类的列`id firstname`。

**例如正确的代码**

```
$sql = "INSERT INTO student_info (id,firstname) VALUES ('$id',$firstname'); 
```

# java - Java 错误“被覆盖的方法不会抛出 java.io.IOException”？

> ID：15421875
> 
> 赞同：1
> 
> 时间：2013-03-14T23:06:10.217
> 
> 标签：java, sockets

这可能是一个非常新手的问题，但是有没有办法启动一个创建套接字的线程？因为我不能执行以下操作：

```
public void run() throws IOException{

  Socket sock2 = new Socket("localhost", 9898);

} 
```

我得到这个错误：

> CapitalizeClient 中的 run() 无法实现 java.lang.Runnable 中的 run() 覆盖方法不会抛出 java.io.IOException

或者我应该只在 main 中创建套接字代码？我想定期创建套接字以用作心跳。谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T23:07:39.297

您不能放入`throws IOException`该`run`方法，因为[`Runnable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html)接口没有说该`run`方法会引发任何已检查的异常。

通过捕获它来处理`IOException`它，或者将代码移动到另一个位置。

# python - 如何使用 SQLAlchemy 的表达式语言编写条件子句？

> ID：15421877
> 
> 赞同：0
> 
> 时间：2013-03-14T23:06:14.410
> 
> 标签：python, mysql, sqlalchemy

所以，我写了一个相当复杂的查询，它从两个表中获取并连接一堆数据。

```
SELECT
    /* Common attributes */
    carrier.name,
    carrier.notes,
    carrier.turnaround,

    /* Either per-reseller price, generic reseller price or default price */
    IFNULL(
        rsu.price,
        IF(
            (
                carrier.reseller_price != IS NOT NULL AND
                carrier.reseller_price != 0
            ),
            carrier.reseller_price,
            carrier.price
        )
    ) AS price,
    IFNULL(
        rsu.price_barred,
        IF(
            (
                carrier.reseller_price_barred IS NOT NULL AND
                carrier.reseller_price_barred != 0
            ),
            carrier.reseller_price_barred,
            carrier.price_barred
        )
    ) AS price_barred
FROM
    `core_carrier` AS carrier
LEFT OUTER JOIN
    `core_resellerunlock` AS rsu ON (
        rsu.carrier_id = carrier.id AND
        rsu.reseller_id = 1
    ) 
```

*有人可以建议一种使用 SQLAlchemy 查询生成器重写它的方法吗？*我不确定这些`SELECT ... IF`条款是否可行。

**编辑：**我不想使用 ORM 来执行此操作（据我所知，纯粹使用 SQLAlchemy ORM 执行此操作是不可能的）。我只是在寻找一种使用 SQLAlchemy 核心的或多或少的可移植方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T02:09:10.170

您可以使用[函数在查询](http://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html#sqlalchemy.sql.expression.case)[中`case`](http://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html#sqlalchemy.sql.expression.case)包含条件。这不会产生您提供的 SQL，但可以产生功能等效的东西。

这是一个简单的例子，其中`carrier`和`rsu`变量引用`Table`对象，并`case`引用上述函数：

```
join = carrier.join(rsu, (rsu.c.carrier_id == carrier.c.id) & (rsu.c.reseller_id == 1))
query = join.select([
    carrier.c.name,
    carrier.c.notes,
    carrier.c.turnaround,
    case([
        (
            rsu.c.price_barred == None,
            case([
                (
                    (carrier.c.reseller_price != None) & (carrier.c.reseller_price != 0),
                    carrier.c.reseller_price
                )
            ],
            else_=carrier.c.price
        )
    ]
]) 
```

您可能会发现创建一些帮助函数来表示您的更高级别`IFNULL`和`IF`函数以提高查询的可读性很方便。例如：

```
def if_(expr, then, else_):
    return case([
        (expr, then)
    ], else_=else_) 
```

# actionscript-3 - Flex：从父级访问静态常量

> ID：15421878
> 
> 赞同：2
> 
> 时间：2013-03-14T23:06:23.130
> 
> 标签：actionscript-3, apache-flex, constants, parent-child

为什么我不能将父类中定义的静态常量视为 Flex 中子类的属性？

## 柔性

```
class A {
  public static const MAX:int = 100;
}

class B extends A {}

A.Max; // Valid
B.Max; // Invalid 
```

## 爪哇

```
class A {
  public static final int MAX = 100;
}

class B extends A {}

A.Max; // Valid
B.Max; // Valid 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T23:16:25.130

## Quick n'dirty hack：

为了将常量`MAX`视为 的属性`B`，您必须重新定义`MAX`并将其设置为等于`A.MAX`：

```
class B extends A {
  public static const MAX:int = A.MAX;
} 
```

* * *

# [未继承的静态属性](http://livedocs.adobe.com/flex/3/html/help.html?content=04_OO_Programming_11.html)

静态属性不被子类继承。这意味着不能通过子类的实例访问静态属性。静态属性只能通过定义它的类对象来访问。例如，以下代码定义了一个名为 Base 的基类和一个扩展 Base 的名为 Extender 的子类。`test`在 Base 类中定义了一个名为的静态变量。以下摘录中编写的代码在严格模式下无法编译，并在标准模式下生成运行时错误。

```
package {
    import flash.display.MovieClip;
    public class StaticExample extends MovieClip
    {
        public function StaticExample()
        {
            var myExt:Extender = new Extender();
            trace(myExt.test);// error
        }
    }
}

class Base {
    public static var test:String = "static";
}

class Extender extends Base { } 
```

访问静态变量的唯一方法`test`是通过类对象，如下代码所示：

```
Base.test; 
```

但是，允许使用与静态属性相同的名称来定义实例属性。这样的实例属性可以在与静态属性相同的类中定义，也可以在子类中定义。例如，前面示例中的 Base 类可能有一个名为 的实例属性`test`。以下代码编译并执行，因为实例属性是由 Extender 类继承的。如果测试实例变量的定义被移动但未复制到 Extender 类，则代码也将编译和执行。

```
package
{
    import flash.display.MovieClip;
    public class StaticExample extends MovieClip
    {
        public function StaticExample()
        {
            var myExt:Extender = new Extender();
            trace(myExt.test);// output: instance
        }
    }
}

class Base
{
    public static var test:String = "static";
    public var test:String = "instance";
}

class Extender extends Base {} 
```

# python - 生成非连续组合

> ID：15421886
> 
> 赞同：6
> 
> 时间：2013-03-14T23:06:53.957
> 
> 标签：python, algorithm, combinations

我正在尝试创建一个生成器（支持执行下一个操作的迭代器，可能在 python 中使用 yield），它提供来自 {1,2,...n} 的 r 元素的所有组合（n 和 r 是参数），这样在选定的 r 个元素，没有两个是连续的。

例如，对于 r = 2 和 n= 4

生成的组合是`{1,3}, {1,4}, {2, 4}`。

我可以生成所有组合（作为迭代器）并过滤那些不满足条件的组合，但我们将做不必要的工作。

是否有某种生成算法使得`next`是 O(1) （如果不可能，O(r) 或 O(n)）。

返回集合的顺序无关紧要（希望允许 O(1) 算法）。

注意：我已将其标记为 python，但与语言无关的算法也会有所帮助。

**更新：**

我找到了一种将其映射到生成纯组合的方法！网络搜索显示 O(1) 是可能的组合（尽管看起来很复杂）。

这是映射。

假设我们有一个`x_1, x_2, ... , x_r`组合`x_1 + 1 < x_2, x_2 + 1 < x_3, ...`

我们映射到`y_1, y_2, ..., y_r`如下

```
y_1 = x_1

y_2 = x_2 - 1

y_3 = x_3 - 2

...

y_r = x_r - (r-1) 
```

这样我们就`y_1 < y_2 < y_3 ...` 没有非连续约束了！

这基本上相当于从 n-r+1 中选择 r 个元素。因此，我需要做的就是运行（n-r+1 选择 r）的生成。

对于我们的目的，在事物生成之后使用映射就足够了。

**选择svkcr答案的理由**

所有很好的答案，但我选择了 svkcr 的答案。

以下是一些原因

1.  它实际上是无状态的（或者更准确地说是“马尔可夫”）。下一个排列可以从前一个排列生成。它在某种程度上几乎是最优的：O(r) 空间和时间。

2.  这是可以预见的。我们确切地知道生成组合的顺序（字典顺序）。

这两个属性使生成并行化变得容易（在可预测的点拆分和委托），并引入了容错（如果 CPU/机器发生故障，可以从最后生成的组合中挑选出来）！

抱歉，前面没有提到并行化，因为当我写这个问题时我没有想到它，我后来才知道这个想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T23:13:38.190

`n+1`这是我的递归生成器（如果选择了第一项，它只会跳过第一项`n`）：

```
def non_consecutive_combinator(rnge, r, prev=[]):
    if r == 0:
        yield prev

    else:
        for i, item in enumerate(rnge):
            for next_comb in non_consecutive_combinator(rnge[i+2:], r-1, prev+[item]):
                yield next_comb

print list(non_consecutive_combinator([1,2,3,4], 2))
#[[1, 3], [1, 4], [2, 4]]
print list(non_consecutive_combinator([1,2,3,4,5], 2))
#[[1, 3], [1, 4], [1, 5], [2, 4], [2, 5], [3, 5]]
print list(non_consecutive_combinator(range(1, 10), 3))
#[[1, 3, 5], [1, 3, 6], [1, 3, 7], [1, 3, 8], [1, 3, 9], [1, 4, 6], [1, 4, 7], [1, 4, 8], [1, 4, 9], [1, 5, 7], [1, 5, 8], [1, 5, 9], [1, 6, 8], [1, 6, 9], [1, 7, 9], [2, 4, 6], [2, 4, 7], [2, 4, 8], [2, 4, 9], [2, 5, 7], [2, 5, 8], [2, 5, 9], [2, 6, 8], [2, 6, 9], [2, 7, 9], [3, 5, 7], [3, 5, 8], [3, 5, 9], [3, 6, 8], [3, 6, 9], [3, 7, 9], [4, 6, 8], [4, 6, 9], [4, 7, 9], [5, 7, 9]] 
```

关于效率：

此代码不可能是 O(1)，因为遍历堆栈并在每次迭代时构建一个新集合不会是 O(1)。此外，递归生成器意味着您必须使用`r`最大堆栈深度来获得`r`-item 组合。这意味着使用低`r`，调用堆栈的成本可能比非递归生成更昂贵。有了足够的`n`and `r`，它可能比基于 itertools 的解决方案更有效。

我在这个问题中测试了两个上传的代码：

```
from itertools import ifilter, combinations
import timeit

def filtered_combi(n, r):
    def good(combo):
        return not any(combo[i]+1 == combo[i+1] for i in range(len(combo)-1))
    return ifilter(good, combinations(range(1, n+1), r))

def non_consecutive_combinator(rnge, r, prev=[]):
    if r == 0:
        yield prev

    else:
        for i, item in enumerate(rnge):
            for next_comb in non_consecutive_combinator(rnge[i+2:], r-1, prev+[item]):
                yield next_comb

def wrapper(n, r):
    return non_consecutive_combinator(range(1, n+1), r)   

def consume(f, *args, **kwargs):
    deque(f(*args, **kwargs))

t = timeit.timeit(lambda : consume(wrapper, 30, 4), number=100)
f = timeit.timeit(lambda : consume(filtered_combi, 30, 4), number=100) 
```

结果和更多结果（编辑）（在 windows7，python 64bit 2.7.3，核心 i5 ivy 桥与 8gb ram）：

```
(n, r)  recursive   itertools
----------------------------------------
(30, 4) 1.6728046   4.0149797   100 times   17550 combinations
(20, 4) 2.6734657   7.0835997   1000 times  2380 combinations
(10, 4) 0.1253318   0.3157737   1000 times  35 combinations
(4, 2)  0.0091073   0.0120918   1000 times  3 combinations
(20, 5) 0.6275073   2.4236898   100 times   4368 combinations
(20, 6) 1.0542227   6.1903468   100 times   5005 combinations
(20, 7) 1.3339530   12.4065561  100 times   3432 combinations
(20, 8) 1.4118724   19.9793801  100 times   1287 combinations
(20, 9) 1.4116702   26.1977839  100 times   220 combinations 
```

如您所见，~~递归解决方案和基于 itertools.combination 的解决方案之间的差距随着`n`上升~~而变大。

实际上，两种解决方案之间的差距在很大程度上取决于`r`- 更大`r`意味着您必须丢弃更多从`itertools.combinations`. 例如，在以下情况下`n=20, r=9`：我们过滤并在 167960(20C9) 个组合中仅取 220 个组合。如果`n`和`r`很小，使用`itertools.combinations`会更快，因为它在更少的 r 下效率更高，并且不使用堆栈，正如我解释的那样。（如您所见，itertools 非常优化（如果使用 、 和一堆生成器和列表推导编写逻辑`for`，`if`它`while`不会像使用 itertools 抽象的那样快），这是人们为什么喜欢python——你把你的代码提升到更高的水平，你会得到回报。这方面的语言不多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T01:09:17.087

这很好玩！这个怎么样：

```
def nonconsecutive_combinations(r, n):
  # first combination, startng at 1, step-size 2
  combination = range(1, r*2, 2)
  # as long as all items are less than or equal to n
  while combination[r-1] <= n:
    yield tuple(combination)
    p = r-1 # pointer to the element we will increment
    a = 1   # number that will be added to the last element
    # find the rightmost element we can increment without
    # making the last element bigger than n
    while p > 0 and combination[p] + a > n:
      p -= 1
      a += 2
    # increment the item and
    # fill the tail of the list with increments of two
    combination[p:] = range(combination[p]+1, combination[p] + 2*(r-p), 2) 
```

每个`next()`调用都应该有一个 O(r) .. 我在考虑如何将其转换为自然数时得到了这个想法，但是花了相当长的时间来获得正确的细节。

```
> list(nonconsecutive_combinations(2, 4))
[(1, 3), (1, 4), (2, 4)]
> list(nonconsecutive_combinations(3, 6))
[(1, 3, 5), (1, 3, 6), (1, 4, 6), (2, 4, 6)] 
```

# 让我试着解释一下这是如何工作的。

`c`包含元素的元`r`组成为结果集一部分的条件：

1.  元组的任何元素至少与前一个元素加 2 一样大。 ( `c[x] >= c[x-1] + 2`)
2.  所有元素都小于或等于`n`。因为 1\. 说*最后一个元素*小于或等于 就足够了`n`。( `c[r-1] <= n`)

*可能*是结果集一部分的最小元组是`(1, 3, 5, ..., 2*r-1)`. 当我说一个元组比另一个元组“小”时，我假设的是字典顺序。

正如 Blckknght 指出的那样，即使是最小的元组也可能太大以满足条件 2。

上面的函数包含两个 while 循环：

*   外部循环遍历结果并假设它们按字典顺序出现并满足条件一。一旦有问题的元组违反条件二，我们就知道我们已经用尽了结果集并完成了：

    ```
    combination = range(1, r*2, 2)
    while combination[r-1] <= n: 
    ```

    第一行根据条件一使用第一个可能的结果初始化结果元组。第二行直接转换为条件二。

*   内部循环找到满足条件一的下一个可能的元组。

    ```
    yield tuple(combination) 
    ```

    由于`while`条件 (2) 为真，并且我们确保结果满足条件一，我们可以产生当前的结果元组。

    接下来，要找到按字典顺序排列的下一个元组，我们会将“1”添加到最后一个元素。

    ```
    # we don't actually do this:
    combination[r-1] += 1 
    ```

    但是，这可能会过早地打破条件 2。因此，*如果*该操作会破坏条件 2，我们会增加前一个元素并相应地调整最后一个元素。这有点像以 10 为基数计算整数：“如果最后一位大于 9，则递增前一位并将最后一位设为 0。” 但我们不是添加零，而是填充元组，使条件 1 为真。

    ```
    # if above does not work
    combination[r-2] += 1
    combination[r-1]  = combination[r-2] + 2 
    ```

    问题是，第二行可能会再次打破条件二。所以我们实际上要做的是，我们跟踪最后一个元素，这就是`a`. 我们还使用`p`变量来引用我们正在查看的索引当前元素。

    ```
    p = r-1
    a = 1
    while p > 0 and combination[p] + a > n:
      p -= 1
      a += 2 
    ```

    我们通过结果元组的项目从右到左（p = r-1，p -= 1）迭代。最初我们想将一个添加到最后一项（a = 1），但是当单步执行元组时，我们实际上希望将最后一项替换为前一项的值 plus `2*x`，其中`x`是两项之间的距离。(a += 2, 组合[p] + a)

    最后，我们找到了我们想要增加的项，并用从增加的项开始的序列填充元组的其余部分，步长为 2：

    ```
    combination[p:] = range(combination[p]+1, combination[p] + 2*(r-p), 2) 
    ```

    就是这样。当我第一次想到它时，它似乎很容易，但是整个函数中的所有算术都为一个错误的错误提供了一个很好的地方，并且描述它比它应该的更难。当我添加那个内部循环时，我应该知道我遇到了麻烦:)

# 关于性能..

不幸的是，充满算术的while循环并不是用Python编写的最有效的东西。其他解决方案接受这一现实并使用列表推导或过滤将繁重的工作推到 Python 运行时。在我看来，这是*正确的做法*。

另一方面，我很确定如果这是 C，我的解决方案会比大多数解决方案执行得更好。内部 while 循环是 O(log r)，它会就地改变结果并且相同的 O(log r ）。它不消耗额外的堆栈帧，并且除了结果和两个变量之外不消耗任何内存。但显然这不是 C，所以这些都不重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T23:17:40.123

如果有一种方法可以在 O(1) 中生成所有组合，那么您可以在 O(r) 中通过生成和过滤来做到这一点。假设`itertools.combinations`有一个 O(1) `next`，最多有 r-1 个值要跳过，所以最坏的情况是 r-1 乘以 O(1)，对吧？

为了避免混淆，我认为没有 O(1) 的实现`combinations`，因此这*不是*O(r)。但是有什么可能*吗*？我不知道。总之……</p>

所以：

```
def nonconsecutive_combinations(p, r):
    def good(combo):
        return not any(combo[i]+1 == combo[i+1] for i in range(len(combo)-1))
    return filter(good, itertools.combinations(p, r))

r, n = 2, 4
print(list(nonconsecutive_combinations(range(1, n+1), r)) 
```

这打印：

```
[(1, 3), (1, 4), (2, 4)] 
```

* * *

该`itertools`文档不保证`combinations`具有 O(1) `next`。但在我看来，如果有可能的 O(1) 算法，他们会使用它，如果没有，你就找不到。

你可以阅读[源代码](http://hg.python.org/cpython/file/3.3/Modules/itertoolsmodule.c#l2289)，或者我们可以给它计时……但我们会这样做，让我们为整个事情计时。

[http://pastebin.com/ydk1TMbD](http://pastebin.com/ydk1TMbD)有我的代码、thkang 的代码和一个测试驱动程序。它的打印时间是迭代整个序列的成本除以序列的长度。

从`n`4 到 20 并`r`固定为 2，我们可以看到两者的时间都在下降。（请记住，迭代序列的*总*时间当然会增加。它只是 中的亚线性`the total length`）`n`范围从 7 到 20 并`r`固定为 4，同样如此。

`n`固定为 12 且范围从`r`2 到 5，两者的时间都从 2 到 5 线性上升，但是 1 和 6 的时间比您预期的要高得多。

仔细想想，这是有道理的——924 个值中只有 6 个好值，对吧？这就是为什么每次时间`next`都在下降的原因`n`。总时间在增加，但产生的值的数量增加得更快。

所以，`combinations`没有 O(1) `next`；它确实有一些复杂的东西。而且我的算法没有 O(r) `next`；这也很复杂。我认为在整个迭代中指定性能保证会比每次更`next`容易（如果你知道如何计算，那么很容易除以值的数量）。

无论如何，我测试的两种算法的性能特征完全相同。（奇怪的是，切换包装器`return`以`yield from`使递归更快，过滤更慢......但无论如何它是一个小的常数因素，所以谁在乎呢？）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T06:18:02.027

这是我对递归生成器的尝试：

```
def combinations_nonseq(r, n):
    if r == 0:
        yield ()
        return

    for v in range(2*r-1, n+1):
        for c in combinations_nonseq(r-1, v-2):
            yield c + (v,) 
```

这与 thkang 的递归生成器的算法大致相同，但它具有更好的性能。如果`n`接近，`r*2-1`则改进非常大，而对于较小的`r`值（相对于`n`），改进很小。它也比 svckr 的代码好一点，没有明确的连接`n`或`r`值。

我的关键见解是，当`n`小于时`2*r-1`，不可能有没有相邻值的组合。这让我的发电机做的工作比 thkang 的少。

这是一些时间，使用 thkang`test`代码的修改版本运行。它使用该`timeit`模块找出消耗生成器的全部内容十次需要多少时间。该`#`列显示了我的代码产生的值的数量（我很确定所有其他值都相同）。

```
( n, r)      # |abarnert |  thkang |   svckr |BlckKnght| Knoothe |JFSebastian
===============+=========+=========+=========+=========+=========+========
(16, 2)    105 |  0.0037 |  0.0026 |  0.0064 |  0.0017 |  0.0047 |  0.0020
(16, 4)    715 |  0.0479 |  0.0181 |  0.0281 |  0.0117 |  0.0215 |  0.0143
(16, 6)    462 |  0.2034 |  0.0400 |  0.0191 |  0.0125 |  0.0153 |  0.0361
(16, 8)      9 |  0.3158 |  0.0410 |  0.0005 |  0.0006 |  0.0004 |  0.0401
===============+=========+=========+=========+=========+=========+========
(24, 2)    253 |  0.0054 |  0.0037 |  0.0097 |  0.0022 |  0.0069 |  0.0026
(24, 4)   5985 |  0.2703 |  0.1131 |  0.2337 |  0.0835 |  0.1772 |  0.0811
(24, 6)  27132 |  3.6876 |  0.8047 |  1.0896 |  0.5517 |  0.8852 |  0.6374
(24, 8)  24310 | 19.7518 |  1.7545 |  1.0015 |  0.7019 |  0.8387 |  1.5343 
```

对于较大的 值`n`，abarnert 的代码花费的时间太长，所以我从下一个测试中删除了它：

```
( n, r)      # |  thkang |   svckr |BlckKnght| Knoothe |JFSebastian
===============+=========+=========+=========+=========+========
(32, 2)    465 |  0.0069 |  0.0178 |  0.0040 |  0.0127 |  0.0064
(32, 4)  23751 |  0.4156 |  0.9330 |  0.3176 |  0.7068 |  0.2766
(32, 6) 296010 |  7.1074 | 11.8937 |  5.6699 |  9.7678 |  4.9028
(32, 8)1081575 | 37.8419 | 44.5834 | 27.6628 | 37.7919 | 28.4133 
```

我一直在测试的代码在[这里](https://gist.github.com/BlckKnght/5168419)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-15T07:06:42.170

这是一个类似于[@thkang 的答案](https://stackoverflow.com/a/15421949/4279)但具有显式堆栈的解决方案：

```
def combinations_stack(seq, r):
    stack = [(0, r, ())]
    while stack:
        j, r, prev = stack.pop()
        if r == 0:
            yield prev
        else:
            for i in range(len(seq)-1, j-1, -1):
                stack.append((i+2, r-1, prev + (seq[i],))) 
```

例子：

```
print(list(combinations_stack(range(1, 4+1), 2)))
# -> [(1, 3), (1, 4), (2, 4)] 
```

根据我机器上[的基准](https://gist.github.com/zed/43d08f797378022c586c#file-combinations_benchmark-py)，对于某些`(n, r)`值，它是最快的解决方案：

```
name                                time ratio comment
combinations_knoothe           17.4 usec  1.00 8 4
combinations_blckknght         17.9 usec  1.03 8 4
combinations_svckr             20.1 usec  1.16 8 4
combinations_stack             62.4 usec  3.59 8 4
combinations_thkang            69.6 usec  4.00 8 4
combinations_abarnert           123 usec  7.05 8 4
name                                time ratio comment
combinations_stack              965 usec  1.00 16 4
combinations_blckknght         1e+03 usec  1.04 16 4
combinations_knoothe           1.62 msec  1.68 16 4
combinations_thkang            1.64 msec  1.70 16 4
combinations_svckr             1.84 msec  1.90 16 4
combinations_abarnert           3.3 msec  3.42 16 4
name                                time ratio comment
combinations_stack               18 msec  1.00 32 4
combinations_blckknght         28.1 msec  1.56 32 4
combinations_thkang            40.4 msec  2.25 32 4
combinations_knoothe           53.3 msec  2.96 32 4
combinations_svckr             59.8 msec  3.32 32 4
combinations_abarnert          68.3 msec  3.79 32 4
name                                time ratio comment
combinations_stack             1.84  sec  1.00 32 8
combinations_blckknght         2.27  sec  1.24 32 8
combinations_svckr             2.83  sec  1.54 32 8
combinations_knoothe           3.08  sec  1.68 32 8
combinations_thkang            3.29  sec  1.79 32 8
combinations_abarnert            22  sec 11.99 32 8 
```

`combinations_knoothe`问题中描述的算法的实现在哪里：

```
import itertools
from itertools import imap as map

def _combinations_knoothe(n, r):
    def y2x(y):
        """
        y_1 = x_1
        y_2 = x_2 - 1
        y_3 = x_3 - 2
        ...
        y_r = x_r - (r-1)
        """
        return tuple(yy + i for i, yy in enumerate(y))
    return map(y2x, itertools.combinations(range(1, n-r+1+1), r))

def combinations_knoothe(seq, r):
    assert seq == list(range(1, len(seq)+1))
    return _combinations_knoothe(len(seq), r) 
```

其他功能来自对应的答案（修改为接受统一格式的输入）。

# list - 添加列表 到 JDOM 元素

> ID：15421889
> 
> 赞同：0
> 
> 时间：2013-03-14T23:07:16.967
> 
> 标签：list, element, jdom

我有一个场景，我需要在一本书中获取子页面（最多 3 个）并将这些页面移动到书的父级。

像：

```
<book>
 <book1>
   <page1>
   <page2>
   <page3>
   <page4>
 </book1> 
</book> 
```

因此，如果 book1 下的页数大于 3，则将 book1 拆分为 2，即 book1_h_1 和 book2_h_2，并将 page1、page2、page 移动到 book1_h_1 下，并将 page4 移动到 book1_h_2 下。book1下可能有超过4页的场景，比如10页或更多。

为了获得需要创建多少新书，我做了以下操作

```
List<Element> elChildren = book1.getChildren();
int size = 3;
int numBatches = (elChildren.size() / size) + 1;
List<Element> batches = null;
for (int index = 0; index < numBatches; index++) {
int count = index + 1;
int fromIndex = Math.max(((count - 1) * size), 0);
int toIndex = Math.min((count * size), elChildren.size());
batches = elChildren.subList(fromIndex, toIndex);
}

public static void createElementNew(Element parent, int i){
for(int q = 1; q <=i; q++){
parent.addContent(new Element("book1_h_"+q));
}
} 
```

我的问题是如何将列表“批次”添加到新创建的书籍“book1_h_1 和 book1_h_2？

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:46:19.833

你可以用一个迭代器完成整个事情.....不需要将东西保存在变量和存储桶列表中。

'booke' 将指向 book1 元素...

```
Element booke = ..... ;
Element parent = booke.getParentElement();
int bookpos = parent.indexOf(booke);
Iterator<Element> lit = booke.getChildren().iterator();

int cnt = 0;
int bkh = 1;
Element bke = null;
String namebase = booke.getName() + "_h_";
while (it.hasNext()) {
    Element page = it.next();
    if (cnt >= 3) {
       if ((cnt % 3) == 0) {
          bkh++;
          bookpos++;
          bke = new Element(namebase + bkh);
          parent.addContent(bookpos, bke);
       }
       it.remove();
       bke.add(page);
    }
    cnt++;
}
if (cnt > 3) {
    booke.setName(namebase + "1");
} 
```

罗弗尔

# java - 尝试将单个 int 数拆分为数组的单独数字

> ID：15421896
> 
> 赞同：-3
> 
> 时间：2013-03-14T23:07:52.060
> 
> 标签：java, arrays, string, integer

我知道你可以使用带有`.charAt()`线条的字符来做到这一点，但我想知道整数是否有类似的东西？这是在java中。

编辑：

这是我试图这样做的代码：

```
for(int j=0; j<lines; j++){ 
        for (int k=0; k<quizKey.length; k++){
        String lane = userAnswers   
            userIndividualAnswers[k][0] = userAnswers[0].IntAt(k);

        }//end for loop
    }//end for loop 
```

显然这是不正确的，但是使用数学方法我如何能够分别转换 userAnswers 整数？userAnswers 数组中有 5 个整数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:09:03.360

在字符串表示需要多个数字的意义上，多位数字只是多位数字。考虑到这一点，您最好的选择是使用 toString 并将各个组件作为整数提取出来。

或者，正如上面提到的评论者，使用整数除法和 % 10 来做数学运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:30:40.560

如果你有一个整数 I，假设 I = 19478。如果我们使用 I%10，我们得到 8。% 用作模数。它返回除法的其余部分。模数的一个很好的参考是 -> [Wikipedia](http://en.wikipedia.org/wiki/Modulo_operation)。在您的情况下，mod 的实现如下。

```
 int target = 104978;
  int[] ara = new int[6];         

  for(int i=0;i<ara.length;i++)
  {
         ara[i]=target%10; 
         target=target/10;
  } 
```

第一次通过它将 mod 104978 % 10 并返回 8。然后它将对 104978/10 进行整数除法并将目标设置为 10497。第二轮通过它 mods 10497 % 10 = 7 等。我希望这会有所帮助。

# jquery - jQuery键盘箭头导航不适用于自动完成下拉列表

> ID：15421898
> 
> 赞同：1
> 
> 时间：2013-03-14T23:08:04.327
> 
> 标签：jquery, ajax

我有一个通过 ajax 调用填充的自动完成列表，每次在文本框中按下一个键时都会调用 API。

这可以正常工作，并且列表会显示所需的结果。问题是，我想使用向上/向下箭头键添加键盘导航并滚动列表项，将当前项目的类更改为“选定”。

滚动列表的代码可以自行运行，但与 ajax 调用一起停止工作。我假设必须有某种冲突发生，每次进行ajax调用时都会重置一些东西，阻止列表项的索引值被正确识别？这段代码正确吗？

的HTML：

```
<form method="post" action="" autocomplete="off">
    <input type="text" id="textBox" autocomplete="off" />
       <ul id="predictiveList">
          <li><a href="test">test</a></li>
          <li><a href="test">test2</a></li>
          <li><a href="test">test3</a></li>
        </ul>              
 </form> 
```

查询

```
var $listItems = $('#predictiveList li');

$('#textBox').live('keyup', function(e)
{
    var key = e.keyCode,
    $selected = $listItems.filter('.selected'),
    $current;

    $listItems.removeClass('selected');

    if ( key == 40 ) // Down key
    {
        if ( ! $selected.length || $selected.is(':last-child') ) {
            $current = $listItems.eq(0);
        }
        else {
            $current = $selected.next();
        }
    }
    else if ( key == 38 ) // Up key
    {
        if ( ! $selected.length || $selected.is(':first-child') ) {
            $current = $listItems.last();
        }
        else {
            $current = $selected.prev();
        }
    }

     $current.addClass('selected') ;
});

$('#textBox').live('keyup', function(e) {
    $.ajax({
        type: 'GET',
        dataType:'jsonp',
        url: 'http://www.apiCallurlhere.js?callback=displayOptions'
    });
});

/******** Generates dropdown from results of AJAX call ***********/

function displayOptions(data){ 

    $('#predictiveList').show();  
    var obj = data.results;
    var dropdownOptions = '';

    //generate list of options for dropdown menu
    $.each( obj, function( i, v ) {
        dropdownOptions += '<li><a href="' + v.pubId + '">' + v.place + '</a></li>';

    });
    $('#predictiveList').html(dropdownOptions); 

} 
```

正如我所说，两者都可以独立工作，但是当 AJAX 调用与键盘导航同时包含在页面中时，箭头导航停止工作（尽管列表仍然显示并按预期填充）

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:15:58.587

啊，不要使用 keyup 事件来获取自动完成列表。

当您按向上或向下箭头时，它会调用 ajax 来刷新列表，并且可能“.selected”类正在被删除。

因此，请改用 change 事件：

```
$('#textBox').live('change', function(e) {
    $.ajax({
        type: 'GET',
        dataType:'jsonp',
        url: 'http://www.apiCallurlhere.js?callback=displayOptions'
    });
}); 
```

但是，.live() 方法在 1.7 中已弃用，在 1.9 中已删除。所以你真的应该使用 .on() 方法：

```
$(document).on('change', '#textBox', function(e) {
    $.ajax({
        type: 'GET',
        dataType:'jsonp',
        url: 'http://www.apiCallurlhere.js?callback=displayOptions'
    });
}); 
```

首先使用 .live() 方法尝试我的第一个解决方案。如果可行，请尝试我的第二种解决方案以避免使用已弃用的 .live() 方法。

# ios - NSTimer 和 performSelector:afterDelay: 有什么区别？

> ID：15421900
> 
> 赞同：2
> 
> 时间：2013-03-14T23:08:13.197
> 
> 标签：ios, objective-c, ios5, ios6, nstimer

我想每 x 秒 y 次做一件事。使用 NSTimer 的 scheduleTimerWithTimeInterval: vs performSelector:afterDelay: 使用这两种方法是否有特定的优势？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T23:17:35.473

有很多不同。

`performSelector`仅以对象作为参数向接收者发送消息。（必需的）

但是你可以通过 `NSTimer`

几个例子，

> 您可以指定计时器在创建时是重复的还是不重复的。
> 
> 您可以在运行循环中安排计时器

更多信息，请阅读[NSTimer 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:09:01.900

NSTimer 可以重复，并且是它自己的对象，您可以检查 nil 。我敢肯定还有其他事情，但这些通常是最重要的。

# javascript - 禁用匿名访问并启用 Windows 身份验证时，Firefox 中的 Uploadify 失败

> ID：15421901
> 
> 赞同：1
> 
> 时间：2013-03-14T23:08:28.983
> 
> 标签：javascript, asp-classic, uploadify

我有一个非常巧妙的 uploadify 实现，在 IE、FF 和 Chrome 中运行良好，但是当我在 IIS 中禁用匿名访问并启用 Windows 身份验证时，它在 FF 中失败并抛出“aaaHTTP:undefined”错误。我的FF版本是19.0.2。

它是一个经典的 ASP 实现，任何帮助都会很棒！

先感谢您

# mongodb - Mongodb查询嵌套数组中最后一个文档的字段

> ID：15421902
> 
> 赞同：1
> 
> 时间：2013-03-14T23:08:34.597
> 
> 标签：mongodb, mongodb-query

我来自 SQL 世界，还在学习查询 MongoDB，我遇到了这个问题......

# 设置：

我有一个学生集合，其中包含一系列会议

```
student: {
  meetings: [
    {time: x},
    {time: y},
    {time: z}
  ]
} 
```

meeting 数组具有动态大小，其元素按时间按 asc 排序，因此数组中的第一次会议将具有最早的时间。

我可以通过以下方式查询所有在特定时间后开始第一次会议的学生：

```
db.students.find( { "meetings.0.time": {$gt: ISODate()} } ) 
```

# 问题：

现在我还需要查询以获取最后一次会议在特定时间之前开始的所有学生。但是，以下方法不起作用：

```
db.students.find( { "meetings.-1.time": {$lt: ISODate()} } ) 
```

你们将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T23:16:56.253

这对你有用吗？

```
db.student.aggregate(
  { $unwind : "$meetings" },
  { $group : { _id: "$_id", lastMeeting : { $max : "$meetings.time" }}},
  { $match: { lastMeeting : { $lt : IsoDate(...) } } 
); 
```

# json - 如何通过 Google Places Autocomplete API 以多种语言执行搜索，获取城市的唯一标识符

> ID：15421909
> 
> 赞同：9
> 
> 时间：2013-03-14T23:09:04.053
> 
> 标签：json, google-places-api

当在另一种语言 API 中再次寻找同一个城市以找到同一个城市的这个地方时，我需要获取一个城市名称的唯一标识符。

例子：

我通过 Google API 自动完成位置进行搜索，如下所示：

> 城市：纽约

结果是：

> 美国纽约州纽约市国家代码：美国

例如，当我再次用俄语搜索“纽约”时，我需要一个纽约的唯一标识符，以知道纽约在英语中与俄语中的“Нью-Йорк”相同

结果是：

> Нью-Йорк, Нью-Йорк, США Код страны: США

我的问题是如何确定“纽约市”在两个搜索中是相同的，因为我比较了同一城市的不同语言的结果并确定两个答案指的是同一个纽约市？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-02T00:11:26.857

考虑以下两个查询。

```
https://maps.googleapis.com/maps/api/place/autocomplete/json?input=newyork&types=(cities)&language=en&sensor=true&key=<YOUR-API-KEY> 
```

以下是 JSON 响应的前几行。如您所见，`id`结果中有一个可用的（`reference`值已编辑）：

```
{
   "predictions" : [
      {
         "description" : "New York, NY, United States",
         "id" : "7eae6a016a9c6f58e2044573fb8f14227b6e1f96",
         "matched_substrings" : [
            {
               "length" : 8,
               "offset" : 0
            }
         ],
         "reference" : "CkQzAAAAs[...]g5OK5Y",
         ... 
```

现在查询俄语：

```
https://maps.googleapis.com/maps/api/place/autocomplete/json?input=Нью-Йорк&types=(cities)&language=ru&sensor=true&key=<YOUR-API-KEY> 
```

此查询返回更多预测（在密苏里州、内布拉斯加州等地具有相同名称的城市），但您仍然可以使用以下命令从俄语结果中找到纽约市`id`：

```
 {
   "predictions" : [
      {
         "description" : "Нью-Йорк, Соединенные Штаты Америки",
         "id" : "7eae6a016a9c6f58e2044573fb8f14227b6e1f96",
         "matched_substrings" : [
            {
               "length" : 8,
               "offset" : 0
            }
         ],
         "reference" : "CmRZAAAA[...]s10LLA",
         ... 

      {
         "description" : "Нью Йорк, Миссури, Соединенные Штаты Америки",
         "id" : "211cae70217210a77581fd2a2dca45bc4286e064",
         ...
         "reference" : "CnRpAAAA[...]FUydA",
         ...
      {
         "description" : "Нью Йорк, Небраска, Соединенные Штаты Америки",
         "id" : "10a97689b3441120410e18c71d7f1b9ed70ac2e7",
         ...
         "reference" : "CnRrAAAA[...]XrkzYY",
         ...
      {
         "description" : "Нью-Йорк Милс, Нью-Йорк, Соединенные Штаты Америки",
         "id" : "2902d4dc0e1ecfe52aef4da6d5eb06e4c9fab4d9",
         ...
         "reference" : "CoQBcwAAA[...]g3G1Jw",
         ... 
```

您可以使用以下方法查询*Place Details API*`reference`（对于上面的每个预测结果都不同）：

```
https://maps.googleapis.com/maps/api/place/details/json?reference=CkRAAAAA[...]cLKfOc_4mvY&language=ru&sensor=true&key=<YOUR-API-KEY> 
```

并用于`id`验证您正在搜索的地方的身份。引用*地点详细信息 API* [文档](https://developers.google.com/places/documentation/details#PlaceDetailsRequests)：

> `id`包含一个唯一的稳定标识符来表示这个地方。此标识符可能不用于检索有关此地点的信息，但可用于合并有关此地点的数据，并**在单独的搜索中验证地点的身份**。由于`ids`偶尔会发生变化，建议将存储`id`的位置与稍后在同一位置的详细信息请求中返回的值进行比较`id`，并在必要时进行更新。

传递`id`给这个查询仍然是可能的，但`reference`它是一个必填字段：

```
https://maps.googleapis.com/maps/api/place/details/json?id=7eae6a016a9c6f58e2044573fb8f14227b6e1f96&language=ru&reference=CkRAAAAA[...]cLKfOc_4mvY&sensor=true&key=<YOUR-API-KEY> 
```

# ios - 启动管理器后，是否可以在 iOS 上禁用 Novocaine？

> ID：15421912
> 
> 赞同：0
> 
> 时间：2013-03-14T23:09:37.250
> 
> 标签：ios, novocaine

我正在将 Novocaine 用于 iOS 应用程序。`[Novocaine audioManager]`Novocaine使用单例实例来处理音频 IO（

当我尝试打开想要同时播放音频和视频的视频预览控制器时，这将导致问题。当此控制器尝试控制设备的音频输出时，应用程序崩溃。

你知道禁用单例实例的方法`Novocaine`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:07:31.023

好吧，我发现使用“标准” Novocaine 管理器是不可能的。

为了解决这个问题，我不得不修改开源`Novocaine`工具，添加一个自定义方法来在我不需要它“工作”时拆除音频管理器（该`-tearDownAudio`方法与 结合使用`-setupAudio`）。

请看一下[Github 上的分叉项目](https://github.com/marzapower/novocaine)。

# c# - TextBox.ScrollToEnd 花费的时间太长

> ID：15421913
> 
> 赞同：1
> 
> 时间：2013-03-14T23:09:42.960
> 
> 标签：c#, wpf, .net-4.0, textbox

我有一个用于显示日志消息的 LogTextBox 类：

```
public class LogTextBox : TextBox
{
    int maxMessageCount, messageCount;

    //number of characters for each message
    List<int> messageLengths;

    public LogTextBox(int maxMessageCount)
    {
        this.messageCount = 0;
        this.maxMessageCount = maxMessageCount;
        this.messageLengths = new List<int>();

        IsReadOnly = true;
        IsUndoEnabled = false;
    }

    public void Log(string message)
    {
        if (messageCount >= maxMessageCount)
        {
            Dispatcher.Invoke((Action)delegate()
            {
                //statement 1
                string text = Text.Remove(0, messageLengths[0]);

                //statement 2
                Text = text + message + '\n';

                //statement 3
                ScrollToEnd();
            });

            messageLengths.RemoveAt(0);
            messageLengths.Add(message.Length + 1);
        }
        else
        {
            Dispatcher.Invoke((Action)delegate()
            {
                AppendText(message + '\n');
                ScrollToEnd();
            });

            messageLengths.Add(message.Length + 1);
            messageCount++;
        }
    }
}

public class Test
{
    public LogTextBox logView;

    public Timer timer;

    [STAThread]
    public static void Main()
    {
        Application app = new Application();
        Test test = new Test();

        test.logView = new LogTextBox(200);

        test.timer = new Timer(200);
        test.timer.Elapsed += new ElapsedEventHandler(test.timer_Elapsed);
        test.timer.Start();

        app.Run(main);
    }

    int line = 0;
    void timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        logView.Log(GetMessage(line++));
    }

    private string GetMessage(int line)
    {
        StringBuilder builder = new StringBuilder();
        for (int i = 0; i < 1000; i++)
            builder.Append(line + " ");

        builder.Append('\n');

        return builder.ToString();
    }
} 
```

在上述配置中，语句 3 执行 10 次平均需要 200 毫秒。如果将语句 2 注释掉，则语句 3 执行 10 次平均需要 0.1 毫秒。在这两种情况下，Log 方法的其他部分平均需要 10 毫秒。语句 1 和语句 2 的执行时间很小，并不重要。我使用高分辨率秒表进行测量。

为什么更新 Text 属性时 ScrollToEnd 需要这么长时间？ScrollToEnd（语句 3）的执行时间与 Text 属性的大小成正比，因为如果在 LogTextBox 构造函数中将 maxMessageCount 设置为 500，则需要 500 毫秒。我必须通过删除第一条消息来更新文本以限制使用的内存，但我还没有找到任何其他方式。有没有其他方法可以删除第一条消息？

**编辑：**

我按照建议尝试了 AvalonEdit，并从 TextEditor 而不是 TextBox 派生。我不必更改代码，因为方法名称相同。ScrollToEnd(Statement 3) 在相同的测试配置下平均花费 0.02 毫秒，并且无论 Text 属性的大小如何，它都保持不变。结果，我的性能问题得到了解决，我将使用 AvalonEdit。我给了 Jacob 赏金，因为他首先建议了 AvalonEdit。

TextBoxBase.ScrolltoEnd 调用 UpdateLayout（如下所示，使用 Reflector），我猜这就是它性能不佳的原因，而 AvalonEdit 的 TextEditor.ScrollToEnd 只调用 ScrollViewer.ScrollToEnd。

```
public void ScrollToEnd()
{
    if (this.ScrollViewer != null)
    {
        base.UpdateLayout();
        this.ScrollViewer.ScrollToEnd();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:49:24.493

您是否尝试过将语句 2 从

```
 //statement 2
       Text = text + message + '\n'; 
```

至

```
AppendText(message);
AppendText('\n'); 
```

?

这只是一个猜测，但由于所写的语句 2 每次都分配一个新的字符串对象，垃圾收集器可能会开始释放旧的字符串。我相信 AppendText 的实现方式可以避免中间分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T08:40:10.353

为什么不考虑使用不同的文本框控件？

你可以试试支持文本高亮的[AvalonEdit](https://github.com/icsharpcode/SharpDevelop/wiki/AvalonEdit)，你可以在这里阅读[http://www.codeproject.com/KB/edit/AvalonEdit.aspx](http://www.codeproject.com/KB/edit/AvalonEdit.aspx)

似乎比原生 WPF 富文本控件更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:12:03.030

如果易于阅读是主要的文档消费场景。然后你可以尝试使用[Flow Document](http://msdn.microsoft.com/en-us/library/aa970909.aspx)。

注意：此 FlowDocument 旨在优化查看和可读性。RichText 框 表示对 FlowDocument 对象进行操作的富编辑控件。

编辑：

1.  如果您不希望应用程序中有超过一万个搜索结果，那么到目前为止，一个 TextBlock 控件或只读多行 TextBox 就足够了。TextBox 类有一个 AppendText() 方法，该方法对您来说应该足够快。您不必删除第一条消息。

2.  您可以考虑使用不同的文本框控件。这是一个完全从头开始的 SharpDevelop 的 Wpf 文本编辑器。它叫AvalonEdit，codeproject上有一篇好文章：http: [//www.codeproject.com/KB/edit/AvalonEdit.aspx](http://www.codeproject.com/KB/edit/AvalonEdit.aspx) 看来他对大内容做了优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-26T17:27:52.590

我发现`logbox.ScrollToVerticalOffset(double.MaxValue);`它比`logbox.ScrollToEnd();`. 也许是因为它避免了对`UpdateLayout()`.

# ios - 如何在 performSelector: 方法中使用多个参数？

> ID：15421915
> 
> 赞同：4
> 
> 时间：2013-03-14T23:09:49.810
> 
> 标签：ios, objective-c, ios5, ios6

我是否使用 withObject:? 如果是这样，我可以通过，说一个 NSNumber 吗？

它会如何出现在方法的签名中？

```
- (void)methodName:(NSTimer *)timer withObject:(NSNumber *)value {} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T23:25:47.763

You can use an NSArray object or NSDictionary which encapsulates multiple dataobjects into one! In example:

```
NSArray * myDataArray = [NSArray arrayWithObjects:[NSNumber numberWithInt:0], [NSNumber numberWithInt:2],@"A String", nil];

[self performSelector:@selector(doStuff:) withObject:myDataArray afterDelay:1.0];

-(void)doStuff:(NSArray *)array{
   NSNumber * myNumber = [array objectAtIndex:0];
   NSNumber * myNumber2 = [array objectAtIndex:1];
   NSString * myString = [array objectAtIndex:2];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T23:19:30.873

您最多可以直接传递两个参数，使用`performSelector:withObject:withObject:`在`NSObject`协议中声明。

使用您的示例，选择器将是`@selector(methodName:withObject:)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T23:12:07.977

你不能。但是，您可以传递一个`NSDictionary`, 到/从中您可以打包和提取多个对象。

另外，看看`NSInvocation`课堂。

# vba - OLEObject 的方法在 Excel VBA 中不起作用

> ID：15421933
> 
> 赞同：0
> 
> 时间：2013-03-14T23:11:41.390
> 
> 标签：vba, excel, excel-2007

任何想法为什么这有效（VBA，Excel 2007）：

```
ThisWorkbook.Worksheets("Sheet1").OLEObjects(controlId).ListFillRange = "" 
```

但这不是：

```
ThisWorkbook.Worksheets("Sheet1").OLEObjects(controlId).AddItem ("xyz") 
```

我不记得我以前是如何解决这个问题的。现在它说对象不支持这个属性或方法（它是一个组合框）。

PS：这很奇怪；据我所知，我测试了一个运行良好的旧程序，但现在它莫名其妙地失败了。它还包含这样的参考：

```
MsgBox ThisWorkbook.Worksheets("Sheet1").toggleBtn.Caption 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T23:20:17.147

您需要引用 Object 本身才能使用 AddItem 属性。

```
ThisWorkbook.Worksheets("Sheet1").OLEObjects(controlId).Object.AddItem ("xyz") 
```

# c++ - 在类中重新初始化 asio::socket

> ID：15421934
> 
> 赞同：0
> 
> 时间：2013-03-14T23:12:00.393
> 
> 标签：c++, oop, boost, boost-asio, initialization-list

我发现，如果我想`boost::socket`用作类成员，我必须使用**初始化列表**来定义它，并且必须**在构造函数调度之前**定义它。
这意味着，我必须用一些虚拟参数证明它的构造函数，当我有我需要的数据时，我需要再次重新初始化它。

### 客户端.hpp

```
class SocketClient {
    private:
       int port; //Port, currently unused
       boost::asio::io_service io_service;  //This is my "dummy" parameter
       boost::asio::ip::tcp::resolver::iterator endpoint_iterator;
       boost::asio::ip::tcp::socket sock; //Socket class instance

    public:
       void init(const char*, const char* );
       SocketClient::SocketClient():sock(io_service){};  //Giving empty "io_service" to  the "sock"
       bool read(int bytes, char *text);
       bool send(int length, char *text);
       bool send(std::string text);
       unsigned int timeout;
}; 
```

稍后，当`init()`调用方法时，我需要提供`sock`with initialized `io_service`。我不知道该怎么做：

### 客户端.h

```
void SocketClient::init(const char* ip_a, const char* port_a) {
    boost::asio::ip::tcp::resolver resolver(io_service);
    boost::asio::ip::tcp::resolver::query query(ip_a, port_a);
    boost::asio::ip::tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);
    //Error (unsuported operator =):
    sock=boost::asio::ip::tcp::socket(io_service);
    //Error (term does not evaluate to a function taking 1 arguments):
    sock(io_service);
} 
```

[在这里您可以看到整个项目](http://u8.8u.cz/code/sockets/)，没有任何内容被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:24:45.830

You already have the sokect initialized , now only need to connect

```
tcp::resolver resolver(io_service);
tcp::resolver::query query(tcp::v4(), ip_a,port_a);
tcp::resolver::iterator iterator = resolver.resolve(query);
sock.connect(*iterator); 
```

# jsp - JSTL c:set 包裹自定义 JSP 标记以用于 ATG 存储库查找

> ID：15421940
> 
> 赞同：0
> 
> 时间：2013-03-14T23:12:26.773
> 
> 标签：jsp, jstl

很抱歉标题冗长，但这是一个冗长的问题。我正在尝试与各种 CMS 进行交互，但我的自定义标签生成的 HTML 除了保存在 JSTL 变量中之外，还会输出到页面。我什至不知道我想要实现的目标是否可行。

```
<%-- promo.tag --%>
<%@ tag display-name="PromoMap Lookup Tag" body-content="empty" %>
<%@ attribute name="id" required="true" description="" %>
<%@ attribute name="elName" required="true" description="" %>

<%@ taglib uri="/dspTaglib" prefix="dsp" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core"      prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>

<dsp:importbean bean="/promo/PromoMapLookup"/>

<dsp:droplet name="PromoMapLookup">
    <dsp:param name="id" value="${id}"/>
    <dsp:param name="elementName" value="${elName}"/>
    <dsp:oparam name="output">
        <c:set var="html"><dsp:valueof param="promo.html" valueishtml="true"/></c:set>
        <c:set var="html" value="${fn:trim(html)}"/>
        <c:if test="${not fn:endsWith(html, '-->') and not empty html}">
            ${html}
        </c:if>
    </dsp:oparam>
    <dsp:oparam name="empty">
        <%-- Nothing retrieved for promo slot id --%>
    </dsp:oparam>
</dsp:droplet> 
```

...然后调用页面在所有 html 之上进行这样的调用：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib tagdir="/WEB-INF/tags" prefix="pro" %>
<c:set var="masthead"><pro:promo id="287" elName="promo" /></c:set>

...some html...

${masthead} 
```

该`elName`属性是内部的，所以不用担心。因此，`PromoMapLookup`吐出的 html 被保存到变量中，但是`c:set`除了我稍后在页面中引用变量的位置之外，它还呈现在调用标记的页面上。结果是页面上两个位置的 html 相同。我觉得这与编译/渲染的顺序有关，但我无法弄清楚。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:46:52.440

所以我最终解决了这个问题。问题是我使用`<dsp:valueof>`标签来检索 promo.html（promo 是对带有字段“html”的表的引用）。一旦我将标签更改为`<dsp:getvalueof param="promo.html" var="html"/>`并删除了周围的`<c:set>`标签，一切都解决了。

getvalueof DSP 标记允许将值直接存储到 JSTL 变量中，而 valueof 标记就地输出值（即使它也通过`<c:set>`标记捕获到 JSTL 变量中。

# android - 围绕一个圆圈触摸一个点

> ID：15421944
> 
> 赞同：0
> 
> 时间：2013-03-14T23:13:03.773
> 
> 标签：android, trigonometry

有趣的三角问题在这里......

我在 Android 屏幕中间有一个圆圈。我需要根据用户触摸屏幕的 X、Y 坐标从正 Y 轴获取角度。

此刻，我所有的高中几何都让我失望了。任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:01:36.257

如果您触摸点 x1、y1 和

```
xc = display.getWidth()/2;

yc = display.getHeight()/2; 
```

![x1, y1 在左上角。 x2, yc 在中心。 角 b 和角 a](../Images/336d62fcd68e4f62f5e05a211522b087.png)

然后 atan2( y1 - yc, x1 - xc) 将给您并以对应于图中角度“a”的弧度给出答案。

您所指的“正 y 轴”对应于 90 度角或 pi/2 弧度。如果您真正想要的是“与正 y 轴的角度”，那么您需要从您的角度中减去 pi/2 并使用以下等式获取绝对值（以获取 y 轴与您之间角度的原始差异）：

```
angleInRadiansAwayFromYAxis = Math.abs(Math.atan2(y1 - yc, x1 - xc) - Math.PI/2); 
```

如果你想要角度 b 和 a 之间的绝对角度差（所以，假设水平 y 轴是 0 角度）你只需要减去角度：

```
angleInRadiansFromYAxis = Math.atan2(y1 - yc, x1 - xc) - Math.PI/2; 
```

如果负数困扰您，您可以随时在 Math.PI * 2 对任何负数结果来获得 0 和 pi*2 之间的正数。

# sql-server - SQL Server 导入 CSV（在单元格中带有换行符和双引号）

> ID：15421946
> 
> 赞同：2
> 
> 时间：2013-03-14T23:13:22.480
> 
> 标签：sql-server, csv

我有一个 CSV 文件，其中包含如下行：

```
"header1", "header2"
"header
    with many lines", """header with quotations in it""" 
```

在excel中应该显示为：

```
header1,                  header2
header                    "header with quotations in it"
    with many lines 
```

我想将其导入 SQL Server 数据库并保留所有字符和新行，因为它们会出现在 Excel 中。批量插入功能会支持这个吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T11:41:01.033

您是否尝试过将此 CSV 保存为 Excel 文件，然后使用[SQL Server 导入和导出向导](http://msdn.microsoft.com/en-us/library/ms140052.aspx)？如果这不起作用，我会尝试创建一个简单的 .NET 应用程序来解析 CSV 文件并将数据导入数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:44:19.237

不幸的是，我现在能给你的最好的答案是部分答案。您对 BULK INSERT 命令的唯一希望是格式化​​文件。我不确定这是否会起作用，因为我以前没有使用过。

如果您使用 SSIS，您可以将文本限定符设置为 "，这将解决您的多行问题，但仍无法使用引号。您可以应用预处理器将双 "s 更改为其他内容，然后在导入后将它们改回来。

# java - 签名小程序加载签名jar读取文件错误

> ID：15421950
> 
> 赞同：1
> 
> 时间：2013-03-14T23:13:53.373
> 
> 标签：java, security, digital-signature, jar-signing

我目前正在开发一款游戏，并制作了一个 JFrame 加载器，它可以从 user.home 目录加载游戏，但最近决定我也想在 web 小程序中使用它。

当我运行 JFrame 加载程序时，它成功加载游戏，检查文件并打开。（游戏和 JFrame 都已签名）我可以使用以下方法从 Applet 加载和调用该方法：

```
m.invoke(null, (Object) new String[]{textPack, font, currVersionStr,saveDir}, null, null, this); 
```

但是当Applet尝试加载它时会发生以下错误，它可以正常加载游戏，但是当它尝试使用代码加载保存的选项时：

```
 File f = new File(OS.saveDir + OS.fileSeparator + "Options.keys");
    if (!f.exists()) {
        try {
            f.createNewFile();
            saveKeys();
        } catch (IOException ex) {
            Logger.getLogger(Configuration.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

它给了我以下错误：

> 2013 年 3 月 14 日晚上 11:10:21 core.GameEngine 运行严重：null java.security.AccessControlException：访问被拒绝（“java.io.FilePermission”“C:\Users\Jake.Zombies\Options.keys”“读取” ) 在 java.security.AccessControlContext.checkPermission(Unknown Source) 在 java.security.AccessController.checkPermission(Unknown Source) 在 java.lang.SecurityManager.checkPermission(Unknown Source) 在 java.lang.SecurityManager.checkRead(Unknown Source) 在java.io.File.exists(Unknown Source) 在 core.Configuration.loadKeys(Configuration.java:123) 在 core.Configuration.onStartup(Configuration.java:105) 在 core.GameEngine.run(GameEngine.java:76)

如果行 if(!f.exists()) 是 Configuration.java:123

我的问题是它在 JFrame 加载器（已签名）中加载良好，但在 Applet（已签名）中加载良好

非常感谢任何帮助，谢谢。

编辑：小程序加载程序检查文件，并且可以下载最新的文件。只有当我询问我加载的游戏时，才能加载它遇到问题的文件。

编辑2（完整加载代码）：

```
 File folder = new File(saveDir);
        URL u = new URL("jar:" + folder.toURI().toURL() + "Zombies.jar!/");
        URLClassLoader ucl = URLClassLoader.newInstance(new URL[]{u});
        Class c = Class.forName("Visual.GameDisplay", true, ucl);
        Method m = c.getMethod("main", String[].class, String[].class, java.sql.Connection.class, Component.class);
        m.invoke(null, (Object) new String[]{textPack, font, currVersionStr,saveDir}, null, null, this); 
```

通过仅获取缓冲输入流，然后将其写入缓冲输出流来写入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T23:19:30.687

[http://docs.oracle.com/javase/tutorial/deployment/applet/security.html](http://docs.oracle.com/javase/tutorial/deployment/applet/security.html)

小程序不允许任意文件访问。

实际上，如果从本地磁盘加载，则会出现异常。这是怎么加载的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T23:21:21.630

小程序不允许访问用户文件系统。您必须将数据保存回服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T17:11:02.770

混合受信任和不受信任的代码是一个真正的想法。你可以加载任何东西。加载代码的一种更安全的方法是通过`javax.jnlp`，从 6u10 开始，它应该可用于小程序。请注意，您应该确保在加载 jar 完成之前不引用任何类，因为您将无法使用这些类名（它不会起诉单独的类加载器）。

# matlab - 在 Matlab 中从矩阵中删除行和列

> ID：15421951
> 
> 赞同：7
> 
> 时间：2013-03-14T23:14:07.273
> 
> 标签：matlab, matrix

我们应该如何有效地从 Matlab 中的矩阵中删除多行和多列？向量包含应该删除的索引。

输入：t 乘 t 矩阵

输出： (tk) by (tk) 矩阵，其中 k 不相邻的行和对应的列从输入矩阵中删除。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-14T23:21:37.993

这应该可以解决您的问题。

```
matrix=randi(100,[50 50]);
rows2remove=[2 4 46 50 1];
cols2remove=[1 2 5 8 49];
matrix(rows2remove,:)=[];
matrix(:,cols2remove)=[]; 
```

第二个想法，如果你有索引，那么首先使用以下函数将这些索引转换为下标`ind2sub`：

```
[rows2remove,cols2remove] = ind2sub(size(matrix),VecOfIndices); 
```

现在您将获得需要删除的元素的行和列索引。不能从矩阵中删除单个元素。所以我假设您需要删除整个列和行。可以这样做：

```
rows2remove=unique(rows2remove);
cols2remove=unique(cols2remove); 
matrix(rows2remove,:)=[];
matrix(:,cols2remove)=[]; 
```

如果要删除单个元素，请使用元胞数组或将这些元素替换为一些过时的值，例如 9999。

# .net - .NET 中是否有多线程 TCP 服务器套接字？

> ID：15421952
> 
> 赞同：2
> 
> 时间：2013-03-14T23:14:07.443
> 
> 标签：.net, tcp, parallel-processing, .net-4.5

假设我们在一个套接字的一个端口上有 1k 个客户端，并且我们希望并行回复其中的 N 个（意味着有 N 个线程并行写入套接字而没有互斥锁，这也意味着并行发送数据包）在 .网？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:35:20.613

您可以使用.net 中提供的异步套接字命名空间 ( [MSDN](http://msdn.microsoft.com/en-gb/library/system.net.sockets.aspx) )自己创建所有这些。如果您更愿意使用库来节省时间，[请查看 lidgren](http://code.google.com/p/lidgren-network-gen3/)或[networkcomms.net](http://www.networkcomms.net)。

*免责声明：我是 networkcomms.Net 的开发人员之一*

# winapi - 如何让 FindText 对话框将其消息放到主循环中？

> ID：15421955
> 
> 赞同：0
> 
> 时间：2013-03-14T23:14:43.857
> 
> 标签：winapi, windows-messages, common-dialog

我已经注册了 FINDMSGSTRINGW，但它没有显示在主循环中：

```
#include <windows.h>
#include <iostream>

int main() {
  using namespace std;
  UINT uFindReplaceMsg = RegisterWindowMessageW(FINDMSGSTRINGW);
  WCHAR szFindWhat[MAX_PATH] = {0};  // buffer receiving string

  FINDREPLACEW fr;
  ZeroMemory(&fr, sizeof(fr));
  fr.lStructSize = sizeof(fr);
  fr.hwndOwner = GetConsoleWindow();
  fr.lpstrFindWhat = szFindWhat;
  fr.wFindWhatLen = MAX_PATH;
  fr.Flags = 0;
  HWND hdlg = FindTextW(&fr);

  MSG msg;
  for (;;) {
    GetMessageW(&msg, 0, 0, 0);
    TranslateMessage(&msg);
    if (msg.message == uFindReplaceMsg) {
      cout << "uFindReplaceMsg detected" << endl;
    }
    DispatchMessageW(&msg);
  }
} 
```

单击对话框上的“查找下一个”应在控制台中产生消息，但没有任何反应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T00:11:30.213

[正如它在文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646872%28v=vs.85%29.aspx)的开场白中所说：

> 当用户单击“查找下一个”、“替换”或“全部替换”按钮或关闭对话框时，查找或替换对话框**将FINDMSGSTRING 注册消息发送到其所有者窗口的窗口过程。**

（强调我的。）发送的消息直接传递到窗口过程，而不是由`GetMessage`. 一般来说，您不应该使用`GetConsoleWindow`句柄来托管 UI，因为您无权访问它的消息过程，因此这样的事情不会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T00:13:57.477

我看错地方了。该消息显示在对话框的父窗口的窗口过程中，这是工作代码：

```
#include <windows.h>
#include <iostream>

UINT uFindReplaceMsg = RegisterWindowMessageW(FINDMSGSTRINGW);

LRESULT CALLBACK MyWndProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
  if (Msg == uFindReplaceMsg) std::cout << "uFindReplaceMsg catched" << std::endl;
  return DefWindowProcW(hWnd, Msg, wParam, lParam);
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE, LPTSTR, int nCmdShow) {
  using namespace std;

  WNDCLASSEXW wc;
  wc.cbSize = sizeof(WNDCLASSEXW);
  wc.style = CS_HREDRAW | CS_VREDRAW;
  wc.lpfnWndProc = &MyWndProc;
  wc.cbClsExtra = 0;
  wc.cbWndExtra = sizeof(PVOID);
  wc.hInstance = hInstance;
  wc.hIcon = LoadIcon(NULL, IDI_APPLICATION);
  wc.hIconSm = NULL;
  wc.hCursor = LoadCursor(NULL, IDC_ARROW);
  wc.hbrBackground = reinterpret_cast<HBRUSH>(COLOR_BACKGROUND);
  wc.lpszMenuName = L"MainMenu";
  wc.lpszClassName = L"window";
  ATOM class_atom = RegisterClassExW(&wc);

  HWND hWnd = CreateWindowExW(
    0,
    reinterpret_cast<LPCWSTR>(class_atom),
    L"window title",
    WS_OVERLAPPEDWINDOW | WS_VISIBLE | WS_CLIPCHILDREN | WS_CLIPCHILDREN | WS_THICKFRAME,
    CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT,
    NULL,
    NULL,
    hInstance,
    NULL
  );

  WCHAR szFindWhat[MAX_PATH] = {0};

  FINDREPLACEW fr;
  ZeroMemory(&fr, sizeof(fr));
  fr.lStructSize = sizeof(fr);
  fr.hwndOwner = hWnd;
  fr.lpstrFindWhat = szFindWhat;
  fr.wFindWhatLen = MAX_PATH;
  fr.Flags = 0;
  HWND hdlg = FindTextW(&fr);

  MSG msg;
  for (;;) {
    GetMessageW(&msg, 0, 0, 0);
    TranslateMessage(&msg);
    DispatchMessageW(&msg);
  }
} 
```

# php - SugarCRM：直接 Bean 属性访问与 getFieldValue

> ID：15421957
> 
> 赞同：1
> 
> 时间：2013-03-14T23:15:09.703
> 
> 标签：php, orm, javabeans, sugarcrm

在现代版本的 SugarCRM 中，将数据加载到 bean 对象后

```
$account = BeanFactory::getBean('Accounts')
->retrieve_by_string_fields(array('name'=>'Q.R.&E. Corp')); 
```

您可以通过直接访问属性来获取数据

```
$account->name 
```

或通过使用`getFieldValue`

```
$account->getFieldValue('industry') 
```

有什么历史原因`getFieldValue`存在吗？是否有一种规范的方式来决定何时使用`getFieldValue`与直接对象属性方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:22:14.450

我看到的唯一区别是，如果该字段不存在，它不会抛出 PHP 错误，如果它是一个布尔值，它将把它转换为一个整数。见函数定义...

```
function getFieldValue($name)
{
    if (!isset($this->$name)){
        return FALSE;
    }
    if($this->$name === TRUE){
        return 1;
    }
    if($this->$name === FALSE){
        return 0;
    }
    return $this->$name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-29T22:30:06.490

我知道这很旧，但我想澄清一下，如果属性不存在，PHP 不会抛出错误。直接访问属性和使用 getFieldValue 方法的唯一区别是，您将收到 NULL 与属性和 FALSE 与 getFieldValue 方法。

以这个例子来证明 PHP 错误没有被抛出，也许是一个警告，但没有什么致命的。

```
<?php

class TestClass {
    public $one = 1;
}

$testClassInstance = new TestClass();

var_dump($testClassInstance->one); // Result = int(1)
var_dump($testClassInstance->two); // Result = NULL 
```

只是想澄清一下，因为原始答案说“抛出错误”，而在编程世界中，“抛出”意味着您可能会得到一个异常，如果不“捕获”，这可能对您的应用程序是致命的。

# entity-framework - 如何使用 AutoMapper 映射外键值？

> ID：15421958
> 
> 赞同：3
> 
> 时间：2013-03-14T23:15:11.610
> 
> 标签：entity-framework, asp.net-mvc-4, automapper

我目前在运行 Code-First Entity Framework 的 MVC 项目上使用 AutoMapper。

是否可以在 AutoMapper 中映射外键值？

例如，我在下面剥离了一部分模型：

```
public class Account
{
    [Key]
    public int AccountID { get; set; }

    public int AccountTypeID { get; set; }

    //Not included in Account Table in Database
    //  -Get "Type" column from dbo.AccountType table
    public string AccountType { get; set; }
} 
```

在我的 Account Details 页面上，我想在页面上显示 AccountType 的名称而不是 ID。AccountTypeID 是与我的数据库中的 AccountType 表相关的 FK。

我当前的映射非常简单：

```
Mapper.CreateMap<Models.Account, DataLayer.Account>();
Mapper.CreateMap<DataLayer.Account, Models.Account>(); 
```

这可以通过使用 ForMember 来实现吗？或者我是否也必须对我的模型进行一些更改才能实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T23:28:33.140

Add this to your configuration

```
Mapper.CreateMap<AccountType, string>().ConvertUsing(a => a.Name); 
```

# javascript - IE7 和 8 的 jQuery load() 问题

> ID：15421959
> 
> 赞同：-2
> 
> 时间：2013-03-14T23:15:19.410
> 
> 标签：javascript, jquery

我一直在搜索几个小时以找到影响 ie7 和 8 的 jquery .load 问题的最佳解决方案，我有以下代码块，它从外部 jsp 页面加载我的内容，除了永远的错误 IE7 之外的所有浏览器都没有问题和 8。

```
$(document).ready(function(){
    $.ajaxSetup({ cache: false });
    setInterval(function () {
        $('#myDiv').load('test.jsp').fadeIn("slow");
    }, 10000); 
}); 
```

我发现了许多解决方法，例如设置新日期，例如：

```
$('#myDiv').load('test.jsp',{noncache: new Date().getTime()},function(){..}).fadeIn("slow"); 
```

但对我不起作用，内容仍然无法在 IE7 和 8 上加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:23:15.120

首先，如果您希望内容淡入，则必须首先将其隐藏。如果包含的 div 已经可见，则它不能淡入。

其次，有些版本的 IE 对缓存有点热心，您可以使用 URL 中的唯一参数来消除缓存（就像您尝试过的那样）。

第三，`.load()`不是动画所以它不使用动画队列所以如果你想在加载完成后做一些事情，那么你需要在完成函数中做。你有这最后两个的部分，但还没有把它们放在一起。

您可以将所有这三个与以下内容结合起来：

```
$(document).ready(function(){
    var myDiv = $('#myDiv');
    setInterval(function () {
        myDiv.fadeOut('slow', function() {
            var now = new Date().getTime();
            myDiv.load('test.jsp?unique=' + now, function() {
                myDiv.fadeIn('slow');
            });
        });
    }, 10000); 
}); 
```

# ssl - Adobe air over TLS 连接 - 抛出错误

> ID：15421962
> 
> 赞同：0
> 
> 时间：2013-03-14T23:15:50.843
> 
> 标签：ssl, air

我正在尝试从不受信任的 SSL 位置加载图像文件。当我尝试这样做时，我一直在发出警报。根据在线解决方案之一，我需要将证书安装到我的机器上，这将避免错误[链接](http://forums.adobe.com/thread/92215)，我已经做到了，我已经摆脱了以前遇到的错误，现在我看到了一个新的粘贴在下面的错误类型。有没有办法在 Windows 机器上覆盖此警报？

我已经在浏览器中验证了链接，它们似乎可以工作，因为我们在我们的机器上添加了受信任的根证书颁发机构的证书。

警报说

> 此站点的安全证书的吊销信息不可用。你想继续吗？
> 
> 是的，不，查看证书

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T08:52:03.687

也许您的服务器配置中缺少 CRL？

尝试这样的事情：

```
openssl ca -gencrl -out pathToYourCrl/ca.crl -crldays7 
```

当然，您也必须在 apache.conf 中指向此路径。

# laravel - 安装 Laravel 4 Powerpack 会破坏 SessionServiceProvider 中的代码？

> ID：15421963
> 
> 赞同：1
> 
> 时间：2013-03-14T23:15:55.913
> 
> 标签：laravel, composer-php, laravel-4, packagist

在我使用`composer update`L4 powerpack 要求后`composer.json`，它可以毫无问题地获取它。然后我在 app.php 中更新`providers`和数组，但是当我使用时，我得到以下信息：`aliases``HTML::script(...)`

```
ErrorException: Notice: Undefined index: domain in C:\Users\Dartanjan\Documents\web\big\vendor\laravel\framework\src\Illuminate\Session\SessionServiceProvider.php line 124 
```

我也尝试了一个不同的包，但我得到了相同的。

知道为什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:30:44.273

这不是因为l4 powerpack，而是因为laravel新的变化，下载最新版本的laravel并在app/session文件中查找差异

# android - 如何使用端点查询我在谷歌应用引擎中的数据存储，以查看两个字段是否包含字符串？

> ID：15421966
> 
> 赞同：3
> 
> 时间：2013-03-14T23:16:09.927
> 
> 标签：android, google-app-engine, gql, google-cloud-endpoints

我已经在我的 android 应用程序中实现了 google appengine 的端点客户端 api 库*（感谢本教程：[http](http://devthots.blogspot.ca/2012/07/building-awesome-android-apps-with.html) ://devthots.blogspot.ca/2012/07/building-awesome-android-apps-with.html ）*。我正在插入我的实体对象（SOESave），如下所示：

```
SOESave save = new SOESave();

save.setId(uniqueKey.toString());
save.setName(name);
save.setDesc(desc);
Text jsonText = new Text();
jsonText.setValue(JSON);
save.setJson(jsonText);
save.setDownloadCount(0);
save.setBlobKey(s.toString());

Soesaveendpoint endpoint = CloudEndpointUtils.updateBuilder(endpointBuilder).build();
endpoint.insertSOESave(save).execute(); 
```

在 Soesaveendpoint.java 中有这个方法：

```
public CollectionResponse<SOESave> listSOESave(
        @Nullable @Named("cursor") String cursorString,
        @Nullable @Named("limit") Integer limit) 
```

如果我理解正确，cursorstring 将被添加到**“从 SOESave 中选择为 SOESave”**的末尾并用作我的数据存储上的查询，我也可以在此处指定限制。

我无法弄清楚如何对我的数据存储进行查询，该查询仅显示**标题**或**描述**字段包含特定字符串的结果。[我在GQL 语法参考](https://developers.google.com/appengine/docs/python/datastore/gqlreference)中找不到任何可以帮助我找到结果包含字符串的地方。这甚至可以用 GQL 实现吗？感谢您的任何回复，抱歉，这篇文章有点长！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:02:18.573

核心问题似乎是：我可以使用类似 SQL 的`LIKE`语句来查询数据存储吗？答案是否定的。`>`您可以使用、`<`或进行比较`=`，但不能进行部分匹配。对于后者，您必须使用[Search API](https://developers.google.com/appengine/docs/java/search/overview)之类的东西。

# php - 将空文件上传并存储到数据库中，并将上传大小限制为 1mb

> ID：15421973
> 
> 赞同：0
> 
> 时间：2013-03-14T23:16:49.587
> 
> 标签：php, file

1.  我希望能够在我的数据库中存储空文件。
2.  我想将文件大小限制为 1mb。

我正在尝试上传带有和不带有文件的文件，但第一个`if($_FILES['word']['size'] = (0000000))`不执行。相反，它执行 ELSE 语句，`if($_FILES['word']['size'] < (1024000))`.

```
<?php
error_reporting(E_ALL ^ E_NOTICE);
mysql_connect("localhost", "root", "") or die (mysql_error());
mysql_select_db("calendario") or die (mysql_error());

#Add Files in Database#
session_start();
if(isset($_POST['btnadd'])){
$title =$_POST['txttitle'];
$detail =$_POST['txtdetail'];

$month=$_POST['month'];
$day =$_POST['day'];
$year =$_POST['year'];
$eventdate = $month."/".$day."/".$year;

$emonth=$_POST['Emonth'];
$eday =$_POST['Eday'];
$eyear =$_POST['Eyear'];
$expire = $emonth."/".$eday."/".$eyear;

$code = $_SESSION['code'];

$id = $_SESSION["username"];

##############################################################################################Image

    $word =$_FILES['word']['tmp_name'];
    $word_name = addslashes($_FILES['word']['name']);
    $word_size = addslashes($_FILES['word']['size']);
    $word_type = $_FILES['word']['type'];

if($_FILES['word']['size'] = (0000000)) //if files uploaded empty, still enter database
{
   echo("<script language=\"JavaScript\" type=\"text/JavaScript\">\n");
    echo("alert('File Error 0.');\n");
    echo("window.location = ('calender.php');\n");
    echo("</script>\n");
}
else
{
    if($_FILES['word']['size'] < (1024000)) //if files is less than 1mb
    {
    echo("<script language=\"JavaScript\" type=\"text/JavaScript\">\n");
    echo("alert('File Error.');\n");
    echo("window.location = ('calender.php');\n");
    echo("</script>\n");
    }

    else{
    $word = addslashes(file_get_contents($_FILES['word']['tmp_name']));
    $word_name = addslashes($_FILES['word']['name']);
    $word_size = addslashes($_FILES['word']['size']);
    $fp      = fopen($word, 'r');
    $content = fread($fp, filesize($word));
    $content = addslashes($content);
    fclose($fp);

  if(!get_magic_quotes_gpc())
{
    $word_name = addslashes($word_name);
}

    }

############################################################################################Insert
$sqlinsert = "INSERT into eventcalendar(classCode,Title,Detail,eventDate,dateAdded,Image,WordPpt,WordPptName,WordPptSize,WordPptType,Username,Edate) values ('".$code."','".$title."','".$detail."','".$eventdate."',now(),'".$image."','".$content."','".$word_name."','".$word_size."','".$word_type."','".$id."','".$expire."')";
$resultinginsert = mysql_query($sqlinsert);
}
if($resultinginsert){
echo("<script language=\"JavaScript\" type=\"text/JavaScript\">\n");
echo("alert('Done.');\n");
echo("window.location = ('calender.php');\n");
echo("</script>\n");
}else{
echo "(Event Failed to be Added....)";    

}
}
else
{
    echo "error";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:57:17.450

你的意思是空文件还是没有文件？

如果有文件但大小为 0 ：（双等号）

```
if($_FILES['word']['size'] == 0) 
```

如果没有上传文件，你可以写：

```
if(!isset($_FILES['word'])) 
```

笔记：

1MB = 1 字节 * 1024 * 1024 = 1048576

# php - 模拟准备和直接准备调用之间的区别？

> ID：15421976
> 
> 赞同：0
> 
> 时间：2013-03-14T23:17:07.147
> 
> 标签：php, sql, pdo, prepared-statement, sql-injection

数据库是否仍然容易受到带有准备语句的 SQL 注入的攻击，如下例所示（我使用的是 PDO 和 php 版本 5.3）：

```
 $unsafe = $_POST['user_input'];

  $stmt = $db->prepare("INSERT INTO table (column) VALUES ('" . $unsafe . "')"); 
```

这两个例子有什么值得一提的区别吗？

```
 $stmt = $db->prepare('SELECT * FROM table WHERE name = :name');

  $stmt->execute(array(':name' => $name)); 
```

和

```
 $stmt = $db->prepare('SELECT * FROM table WHERE name = :name');
    $stmt->bind_param(':name', $name);

    $stmt->execute(); 
```

方法执行中可以使用哪些类型的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T00:26:55.960

尽管尚不完全清楚您的实际问题是什么，但让我这样说：

您发布的第一个片段是正确的。根本没有一个有效的论据可以让您使用*已弃用*的扩展（或已弃用的扩展）`mysql_*`。忘记所有那些讨厌的`mysql_connect`电话。
看看我猜你正在使用的另外两个片段`PDO`，它确实支持准备模拟。事实上，它默认模拟prepares。但是，如果第三个片段是一个`mysqli_*`片段，那么问题是什么？除非你运行的是 MySQL 3.x，否则你就可以了。

模拟准备和直接准备调用之间的区别在于，模拟可能会在不涉及 MySQL 服务器的情况下发现一些语法错误，因此效率更高。但是，如果您的 MySQL 服务器不支持准备好的语句，我很确定`PDO`会为您解决这个问题，所以您应该没问题。不过不知道`mysqli_*`。考虑到所有因素，无论如何我都赞成第二个片段。它的代码更少，与第三个片段做同样的事情，并允许代码整洁、易于维护。

关于*“方法执行中可以使用哪些类型的参数”*的问题，您可以查阅文档页面，如果它没有参数，或者[您可以在此处看到](http://php.net/manual/en/pdostatement.execute.php)`PDO`的数组： 如果是，这取决于您的使用OO 或程序样式，[如文档中所示](http://www.php.net/manual/en/mysqli-stmt.execute.php)：for OO for procedural style`bool PDOStatement::execute ([ array $input_parameters ] )`
`mysqli_execute`
`bool mysqli_stmt::execute ( void )`
`bool mysqli_stmt_execute ( mysqli_stmt $stmt )`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:23:45.837

> 数据库是否仍然容易受到使用准备语句的 SQL 注入的影响，如下例所示

为什么？当然。因为在这个例子中没有实际使用准备好的语句。

> 模拟准备和直接准备调用之间的区别？

在安全性方面没有区别——任何一种方式都是安全的。
但是，可能会有如下所述的不便之处

Errr ...我突然想到，您可能对**仿真准备**的内容有错误的认识。
您问题中的第一个代码片段根本不是一个准备好的陈述，既不是模拟的也不是自然的 - 而是旧的很好的推断，背后有所有的危险。
虽然模拟准备代表 PDO 操作查询的方式，但[在此处解释](https://stackoverflow.com/questions/8263371/how-prepared-statements-can-protect-from-sql-injection-attacks/8265319#8265319)

> 方法执行中可以使用哪些类型的参数？

这很明显 - 默认情况下，所有参数都被视为*字符串*。

因此，无论哪种方式，您的查询都是无懈可击的，但如果仿真为 ON，则可能会带来一些不便 - 如果 LIMIT 子句中有占位符，则必须显式绑定参数，而不是将它们传递给执行，为它们设置 INT 类型。
但是如果禁用了仿真，mysql可以对所有参数进行排序，并且可以将数组发送到`execute()`一路。

# php - Postgres“RAISE EXCEPTION”如何转换为 PDOException？

> ID：15421981
> 
> 赞同：0
> 
> 时间：2013-03-14T23:17:55.883
> 
> 标签：php, postgresql, exception

我试图弄清楚“RAISE EXCEPTION”语句的哪些“部分”映射到 PDOException 的哪些“部分”。有人可以解释“谁”和“如何”执行此转换（或者更好的是，指向描述此转换的文档或执行此转换的源代码）？

更具体地说，我想知道是否有办法影响 SQLSTATUS 值（在我的测试中它总是'P0001'）和/或'ERROR：'值（它是消息的一部分并且总是空的）

我能做到的最好的是：

```
使用消息引发异常 = '<a message>'，ERRCODE = 'UE001'

```

在 PHP 方面，它给了我这样的消息：

```
错误：编号：UE001，详细信息：<一条消息>

```

但我对此不是很满意。能够将“UE001”“放入”PDOException 字段之一会很棒（因此我不必从消息字符串中解析它）。

您的评论将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T23:46:55.073

使用 的`code`属性`PDOException`来获取`SQLSTATE`. 请参阅[文档`PDOException`](http://www.php.net/manual/en/class.pdoexception.php#pdoexception.props.code)

要控制`SQLSTATE`由引发错误的 PL/PgSQL 函数生成，请[`RAISE ... SQLSTATE`按照文档](http://www.postgresql.org/docs/current/static/plpgsql-errors-and-messages.html)使用。

当然，为此，数据库驱动程序必须正确报告`SQLSTATE`. 我已经验证 PDO 至少在 PHP 5.4.11 和 PostgreSQL 9.2 中执行此操作，根据以下可以使用`php`命令行可执行文件执行的独立示例代码：

```
<?php
$pdo = new PDO('pgsql:');

$sql = <<<EOD
CREATE OR REPLACE FUNCTION exceptiondemo() RETURNS void AS $$
BEGIN
  RAISE SQLSTATE 'UE001' USING MESSAGE = 'error message';
END;
$$ LANGUAGE plpgsql
EOD;

$sth = $pdo->prepare($sql);
if (!$sth->execute()) {
        die("Failed to create test function\n");
}

$sql = "SELECT exceptiondemo();";

$sth = $pdo->prepare($sql);
if (!$sth->execute()) {
        $ei = $sth->errorInfo();
        die("Function call failed with SQLSTATE " . $ei[0] . ", message " . $ei[2] . "\n");

        // Shortcut way:
        // die("Function call failed with SQLSTATE " . $sth->errorCode());
}
?> 
```

输出是：

```
Function call failed with SQLSTATE UE001, message ERROR:  error message 
```

用这个替换从第二个`$sth->execute()`到最后的代码块，以证明异常处理模式也可以正常工作：

```
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
try {
        $sth->execute();
} catch (PDOException $err) {
        $ei = $err->errorInfo;
        die("Function call failed with SQLSTATE " . $ei[0] . ", message " . $ei[2] . "\n");

        // Alternate version to just get code:
        //die("Function call failed with SQLSTATE " . $err->getCode() . "\n");
} 
```

# iphone - CSS背景图像未出现在移动设备（iPhone）上

> ID：15421984
> 
> 赞同：0
> 
> 时间：2013-03-14T23:18:25.773
> 
> 标签：iphone, css, html, mobile, background

我有一个标题和几个带有背景图像的 div，它们没有出现在我的移动设备（iPhone 5）上。这是一个例子：

CSS：

```
#title_img {
    background: url("title.png") no-repeat scroll center top / 100% auto transparent;
    height: 125px;
} 
```

我正在处理的网站是响应式的，因此在减小窗口大小的情况下，我减小了标题的高度大小：

```
#title_img {
    height: 80px;
} 
```

HTML：

```
<header id="title_img" role="banner"></header> 
```

图像应该在的空白区域。

我还有几个 div 使用类似的 CSS 来显示设备上未出现的背景图像。这些图像都与 CSS 文件位于同一目录中。有一个图像通过 HTML 中的标签调用，它在 iPhone 上显示良好。谢谢！

# java - 即时重绘和验证

> ID：15421987
> 
> 赞同：1
> 
> 时间：2013-03-14T23:18:31.887
> 
> 标签：java, swing, event-dispatch-thread

我必须强制我的程序在它添加一个新组件的那一刻验证并重新绘制我的 gui（或它的一部分）。在组件被绘制在屏幕上之前，必须绝对什么都不做，然后代码才能继续。

我正在创建一个分层的 JPanel 结构。一系列 JPanel，每个 JPanel 包含一系列 JPanel，每个 JPanel 包含一系列 JPanel。

在创建 3 级 JPanel 时，我需要从尚未绘制的 1 级 JPanel 中获取数据。这会导致他们返回错误的数据并弄乱整个设置。

第一级 JPanel 仅在主 for 循环（通过第一级 JPanel 的循环）完成后才能绘制。

我如何强制我的程序在创建并添加到其父级后立即绘制它？我检查了这里的一切都是在 EDT 内完成的。重绘和验证根本不起作用。

编辑：好的，我使用了 Robins 解决方案。

但是，有没有一种方法可以在代码中的行执行后立即强制进行 GUI 更新（反对将 for 循环用于 finins 和类似的东西）。如果可能的话，调试一些东西会容易得多。即使 insta-update 意味着暂停所有其他线程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T23:43:35.050

> 在创建 3 级 JPanel 时，我需要从尚未绘制的 1 级 JPanel 中获取数据。这会导致他们返回错误的数据并弄乱整个设置。

我首先建议将此设置更改为更安全的设置。不得不依赖 UI 元素的绘制顺序听起来像是一个很好的问题来源。

> 第一级 JPanel 仅在主 for 循环（通过第一级 JPanel 的循环）完成后才能绘制。
> 
> 我如何强制我的程序在创建并添加到其父级后立即绘制它？我检查了这里的一切都是在 EDT 内完成的。重绘和验证根本不起作用。

它不起作用，因为您阻止了 EDT。调用`repaint`和/或`validate`实际上不会触发重绘。相反，它会安排一个。您可以尝试将您的主循环分解为几个单独`Runnable`的循环，每个循环都安排在 EDT 上。这可能会允许`Runnable`由`repaint`呼叫安排​​的时间介于两者之间。但是，对此没有任何保证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:41:49.883

您应该有一个 GUI 数据模型，其中包含要放在面板上的信息。

您将生成信息，然后创建您的 GUI 组件。

# c++ - 使用本机 C++ 在 Windows 上具有多个网络适配器的机器上的 UDP 广播

> ID：15421997
> 
> 赞同：2
> 
> 时间：2013-03-14T23:19:10.500
> 
> 标签：c++, windows, sockets, network-programming, udp

我需要使用本地 C++ 代码在具有多个网络适配器的 Windows 机器上进行 UDP 广播（我认为这应该是理想的多播）。

目前，我在套接字上设置 SO_BROADCAST 套接字选项以允许广播，然后发送到 INADDR_BROADCAST 地址 (255.255.255.255)。这在具有多个网络适配器的机器上并不可靠。

我一直在四处寻找，并在 Stack Overflow 上发现了很多关于此的问题。据我所知，最好的方法似乎是找出每个网络适配器的广播 IP，然后遍历那些发送到每个网络适配器的 IP。

因此，例如，如果我的机器有一个 IP 地址为 10.0.0.x 的网络适配器和另一个 IP 地址为 192.168.1.x 的网络适配器，那么我需要将消息发送到 10.0.0.255 和 192.168.1.255。

尽管我查看了所有问题/答案，但我无法将这些点连接起来以获取上述地址列表。

谁能指出我正确的方向？例如，我找到了一些使用 GetAdaptersAddresses 枚举 IP 地址的示例代码，但我看不到在哪里可以获得每个地址的子网掩码。如果没有子网掩码，我无法确定广播地址。我需要 IP 地址列表和每个地址的子网掩码，这样我就可以形成要发送到的广播地址列表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T23:55:09.880

API 调用 GetAdaptersInfo 为每个网络适配器填充一个 IP_ADAPTER_INFO 结构。根据文档，地址列表中提供了掩码：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa366062(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366062%28v=vs.85%29.aspx)

一旦有了 IP 地址和掩码，您就可以计算广播地址：

[根据 ip 和子网掩码计算广播地址](https://stackoverflow.com/questions/777617/calculate-broadcast-address-from-ip-and-subnet-mask)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T01:54:00.997

RichardBrock 的回答是正确的，GetAdaptersInfo 提供了所需的信息。这是一些更具体地显示如何执行此操作的代码。请注意，此代码使用 MFC 和字符串转换宏 STR_A2T，它只是将 char* 字符串转换为 wchar_t* 字符串，因为项目是为 Unicode 构建的。结果是一个字符串数组，其中每个字符串都是一个广播 IP。然后我们只是遍历这些并发送给每个人。

```
CStringArray baList;
baList.RemoveAll();

ULONG bufSz = 0;
if (GetAdaptersInfo(NULL,&bufSz) == ERROR_BUFFER_OVERFLOW)
{
    vector<BYTE> buf;
    buf.resize(bufSz,0);
    if (GetAdaptersInfo((IP_ADAPTER_INFO*)&buf[0],&bufSz) == ERROR_SUCCESS)
    {
        IP_ADAPTER_INFO* pAdapterInfo = (IP_ADAPTER_INFO*)&buf[0];
        for(; pAdapterInfo != NULL; pAdapterInfo = pAdapterInfo->Next)
        {
            unsigned long ip = inet_addr(pAdapterInfo->IpAddressList.IpAddress.String);
            unsigned long mask = inet_addr(pAdapterInfo->IpAddressList.IpMask.String);
            unsigned long bcip = ip | ~mask;
            struct in_addr ia;
            ia.S_un.S_addr = bcip;
            CString broadcastAddr;
            STR_A2T(inet_ntoa(ia),broadcastAddr);
            baList.Add(broadcastAddr);
        }
    }
} 
```