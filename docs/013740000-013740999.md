# StackOverflow 问答 13740000-13740999

# c# - EF 5 更新 N 级深度对象图？

> ID：13740005
> 
> 赞同：2
> 
> 时间：2012-12-06T08:54:26.160
> 
> 标签：c#, asp.net-mvc-4, code-first, entity-framework-5, asp.net-4.5

这是情况，我有三个实体，它们具有以下关系：

```
-Team one-to-one TeamContact
-TeamContact one-to-one TeamAddress 
```

我已经成功地创建、添加和保存了这些对象。但是，当我尝试创建编辑方法时，修改后只保存父对象。见下文我到目前为止;

**在我的 Db 类中保存方法**

```
public void SaveTeam(Team team)
    {
        if (team.Id == 0)
        {
            context.Teams.Add(team);
        }
        else
        {
            var model = context.Teams.Find(team.Id);
            context.Entry(model).CurrentValues.SetValues(team);
        }
        context.SaveChanges();
    } 
```

**编辑方法**

```
[HttpGet]
    public ActionResult Edit(int id)
    {
        var model = _dataSource.Teams.FirstOrDefault(t => t.Id == id);
        return View(model);
    }

    [HttpPost]
    public ActionResult Edit(Team team)
    {
        if (ModelState.IsValid)
        {
            _dataSource.SaveTeam(team);

            return RedirectToAction("Detail", "Team", new { id = team.Id });
        }
        return View(team);
    } 
```

就像我上面说的，我只让我修改父对象，我在这里错过了什么？

**试过了**

```
 public void SaveTeam(Team team)
    {
        if (team.Id == 0)
        {
            context.Teams.Add(team);
        }
        else
        {
            //var model = context.Teams.Find(team.Id);
            var model = context.Teams.Include(c => c.TeamContact).Single(t => t.Id == team.Id);
            context.Entry(model).CurrentValues.SetValues(team);
            model.TeamContact = team.TeamContact;
        }
        context.SaveChanges();
    } 
```

尝试上述方法后出现此错误：

```
Violation of PRIMARY KEY constraint 'PK_dbo.TeamAddresses'. Cannot insert duplicate key     in object 'dbo.TeamAddresses'. The duplicate key value is (5).
 The statement has been terminated. 
```

底线，如何更新 N 级深度对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T06:23:00.950

经过长时间的搜索和阅读，我终于弄清楚了我打算做什么。我很幸运，创建和保存 N 级深度对象图并不像更新这些对象那么难。无论如何，在阅读了 Danny Varod 的评论后，我决定回去阅读更多关于[DbContext](http://www.amazon.ca/Programming-Entity-Framework-Julia-Lerman/dp/1449312969/ref=sr_1_1?ie=UTF8&qid=1355033996&sr=8-1)的内容。以下是我试图做的，我也很抱歉我使用相同的方法来保存新对象：

```
public void SaveTeam(Team team)
    {
        if (team.Id == 0)
        {
            context.Teams.Add(team);
        }
        else if (team.Id > 0)
        {
            //This Updates N-Level deep Object grapgh
            var currentTeam = context.Teams
                .Include(c => c.TeamContact)
                .Include(a => a.TeamContact.TeamAddress)
                .Single(t => t.Id == team.Id);

            context.Entry(currentTeam).CurrentValues.SetValues(team);
            currentTeam.TeamContact.TeamAddress = team.TeamContact.TeamAddress;
            currentTeam.TeamContact = team.TeamContact;
        }
        context.SaveChanges();
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T09:11:42.743

与 add 附加可从提供的实体访问的整个图不同，应用更改仅将更改应用于提供的实体，它也不知道应该修改哪些连接的实体。

您将不得不为每个实体调用应用更改。

# seo - 网站上的站点地图仅显示一个链接

> ID：13740006
> 
> 赞同：1
> 
> 时间：2012-12-06T08:54:29.827
> 
> 标签：seo, sitemap

我有一个关于网站站点地图的小问题。

该网站是： http: [//parmemarin.com](http://parmemarin.com)。

如果我继续[http://www.xml-sitemaps.com/](http://www.xml-sitemaps.com/)并尝试为我的网站生成站点地图，我最终在我的站点地图中只有一个链接，即 _inc/conditions.php

没有 index.php 或我的其他链接 (index.php?page=...)

有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T01:33:37.413

嗯，这可能是 xml-sitemaps.com 的问题，也可能是您的站点的问题，也可能是两者兼而有之。我不知道这项服务，所以我不知道它是如何工作的以及它做了什么。

浏览您的标记，我注意到您链接到一些 URL 时没有对 & 符号进行编码。`&`（如果用于参数）应该是`&amp;`如果你在 HTML 中链接它。

我想知道：您为什么不自己构建站点地图？您是唯一可以确定您的网站上存在哪些页面的人。收集您所有的 URL 并将它们放在一个文件中，例如[http://www.sitemaps.org/](http://www.sitemaps.org/)描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:26:42.560

感谢您的回答。

我完全忘了删除元数据：没有索引，没有关注……这显然没有帮助:)

# sql - SQL 查询停止并没有返回结果，“系统资源超出”

> ID：13740008
> 
> 赞同：1
> 
> 时间：2012-12-06T08:54:32.753
> 
> 标签：sql, vb.net, visual-studio-2010, ms-access

我正在运行以下 SQL 查询来查询我的数据库。

`Query = "SELECT TimeValue, strValue FROM tabDataRaw WHERE ID_PAR = 5 AND TimeValue >= #01/10/2012 00:21:00# AND TimeValue <= #01/10/2012 18:12:00#"`

但是，当我运行此查询时，我没有得到任何结果，代码在执行命令处冻结并且不返回任何结果。通常，几分钟后我会看到我的 PC 上使用的内存有所下降，我认为这是查询放弃了，但它永远不会返回任何内容。

我决定让代码在一夜之间运行，然后我早上回来发现一个`System Resource Exceeded`错误。我不明白这一点，因为我有大约 1.5GB 的 RAM 备用，这个查询应该只返回大约一千个结果。该表确实包含超过 1300 万条记录，但这肯定不会严重影响查询所需的 RAM，`.mdb`驱动器上的文件小于 1GB。

任何有关调试的帮助或建议将不胜感激。

**编辑：**我在我通常使用的数据语法中的查询中发现了一个错误，这导致了另一个错误，因为我正在查询错误的日期，这个查询正在寻找 1 月 10 日而不是 10 月 1 日。我通常使用这种形式使其更清晰：

`Query = "SELECT TimeValue, strValue FROM tabDataRaw WHERE ID_PAR = 13 AND TimeValue >= #01 October 2012 00:21:00# AND TimeValue <= #01 October 2012 18:12:00#"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:05:13.220

该查询可能正在对表进行全面扫描。为避免这种情况，请在 上添加复合索引`(ID_PAR, TimeValue)`：

```
CREATE INDEX ID_PAR__TimeValue_IDX             --- choose a name for the index
  ON tabDataRaw  (ID_PAR, TimeValue) ; 
```

在大多数 DBMS 中，（覆盖）索引`(ID_PAR, TimeValue, strValue)`会更好，但我不确定这是否适用于 MS-Access。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T12:32:42.340

做以下方式

Query = "SELECT TimeValue, strValue FROM tabDataRaw WHERE ID_PAR = 5 AND (TimeValue between '01/10/2012' AND '01/10/2012' )

# java - Source to SoapMessage (for read UserToken)

> ID：13740012
> 
> 赞同：3
> 
> 时间：2012-12-06T08:54:56.130
> 
> 标签：java, soap, cxf, ws-security

I have a code like this:

```
import javax.xml.transform.Source;
import org.apache.cxf.binding.soap.SoapMessage;

public class MyProvider implements Provider<Source> {

    public Source invoke(Source request) {
        SoapMessage message= ???    
    }
} 
```

Now I want to extract from *request* the SoapMessage that I know is inside. Someone know how to do it????

Pay attention that I'd like to have a `org.apache.cxf.binding.soap.SoapMessage` and not `javax.xml.soap.SOAPMessage`.

Truly my purpose is to read the **UserToken** from *request*, if I have a org.apache.cxf.binding.soap.SoapMessage I know how to do. But if someone know how to read it directly from Source or some other method I appreciated the same.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:28:14.997

我假设您的 UserToken 包含在 SOAP 标头中。如果是这种情况，必须使用 ServiceMode "MESSAGE" 来获取整个 SOAP 信封，而不仅仅是正文。或者，您可以使用 Handler 将提取的用户令牌放入请求上下文中以进行进一步处理。

# python - 为什么 Python 字符串的行为很有趣？

> ID：13740013
> 
> 赞同：0
> 
> 时间：2012-12-06T08:54:59.210
> 
> 标签：python, string, python-2.7

我很困惑......为什么/如何`a`不同于`b`？！为什么他们不打印相同的东西？

```
>>> a = '"'
>>> a
'"'
>>> b = "'"
>>> b
"'" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T08:56:11.497

字符串的呈现方式并无不同。他们的演示文稿只是被调整以避免引用包含的报价。`'`和都是`"`合法的字符串文字分隔符。

请注意，字符串*的**内容*非常不同。与;不是同一个字符串 是（显然地）。*`"``'``a == b``False`*

 *否则， Python 必须对or字符使用`\`反斜杠。如果您在字符串中同时使用*这两个*字符，则 python 被迫使用引号：`"``'`

 *```
>>> '\'"'
'\'"'
>>> """Tripple quoted means you can use both without escaping them: "'"""
'Tripple quoted means you can use both without escaping them: "\'' 
```

如您所见，Python 使用的字符串表示仍然使用单引号和反斜杠来表示最后一个字符串。**

# javascript - 对多个组合框使用相同的 ID？

> ID：13740017
> 
> 赞同：2
> 
> 时间：2012-12-06T08:55:24.790
> 
> 标签：javascript, jquery, json, node.js

**我需要为**jquery autocomplete Combobox分配一个 ID，**但我在页面中有多个**jquery autocomplete Combobox 我正在使用此行将`input.attr("id", "anyThng");`ID 分配给 jquery autocomplete Combobox

[http://jqueryui.com/autocomplete/#combobox](http://jqueryui.com/autocomplete/#combobox)

**参考代码：**

```
(function($) {
    $.widget("ui.combobox", {
        _create: function() {
            var input, self = this, select = this.element.hide(), selected = select.children(":selected"), value = selected.val() ? selected.text() : "", wrapper = this.wrapper = $("<span>").addClass("ui-combobox").insertAfter(select);

            input = $("<input>")
            // .id("something")
                    .appendTo(wrapper)
                    .val(value)
                    .addClass("ui-state-default ui-combobox-input")
                    .autocomplete({
                        delay: 0,
                        minLength: 0,
                        source: function(request, response) {
                            var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                            response(select.children("option").map(function() {
                                var text = $(this).text();
                                if (this.value && (!request.term || matcher.test(text)))
                                // alert(text);
                                    return {
                                        label: text.replace(
                                            new RegExp(
                                                "(?![^&;]+;)(?!<[^<>]*)(" +
                                                $.ui.autocomplete.escapeRegex(request.term) +
                                                ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                            ), "<strong>$1</strong>"),
                                        value: text,
                                        option: this
                                    };
                            }));
                          //     alert(input.val());
                            //   alert(input.attr('id'));
                          // input.attr("id", this.id);
                           // alert(input.attr('id'));
                        },

                        select: function(event, ui) {
                            ui.item.option.selected = true;
                            self._trigger("selected", event, {
                                item: ui.item.option
                            });
                        },
                        change: function(event, ui) {

                            //alert(input[0].id);

                            // alert($(event.target)[0].id);
                            // alert($(this).attr('id'));
                            // alert($("#something").attr('id'));
                            // alert(event.target.id);
                            // alert($(".ui-state-default ui-combobox-input ui-autocomplete-input").attr("id"));

                            if (!ui.item) {
                                xT = $(this).val();
                                var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                                    valid = false;
                                select.children("option").each(function() {
                                    if ($(this).text().match(matcher)) {
                                        this.selected = valid = true;
                                        return false;
                                    }
                                });
                                if (!valid) {

                                    xT = $(this).val();
                                    if (countryID == '' || countryID == undefined) {
                                        $(".selPnext").hide();
                                        $("#Tr3").hide();
                                    }
                                    else {
                                        // Checking saudi Province
                                        $("#status").val("21");
                                        if (countryID == 1500000090) {
                                            if (comissionarY == '' || comissionarY == undefined) {
                                                //comissionary
                                                if (ProcvID == '' || ProcvID == undefined) {
                                                    $(".selPnext").hide();
                                                    $("#Tr3").hide();
                                                }
                                                else {
                                                    $(".selPnext").show();
                                                    $("#Tr3").show();
                                                    $("#Td3").html("Comissionary Status (20/21)");
                                                    $("#status").val("21");
                                                }
                                            }
                                            else {
                                                //center
                                                if (ProcvID == '' || ProcvID == undefined) {
                                                    $(".selPnext").hide();
                                                    $("#Tr3").hide();
                                                }
                                                else {
                                                    $(".selPnext").show();

                                                    if (countryID == 1500000090) {
                                                        $("#Td3").html("Center Status (22/23)");
                                                        $("#status").val("22");
                                                        $("#Tr3").show();
                                                    }
                                                    else {
                                                        $("#Tr3").hide();
                                                    }
                                                }
                                            }
                                        }
                                        else {
                                            if (countryID != 1500000090) {
                                                $(".selPnext").show();
                                                $("#Tr3").show();
                                            }
                                            //$("#Div1").css({ width: "400px" });
                                        }
                                    }

                                    // remove invalid value, as it didn't match anything
                                    // $(this).val("");
                                    // select.val("");
                                    // input.data("autocomplete").term = "";
                                    return false;
                                }
                            }
                        }
                    })
            //.addClass("ui-widget ui-widget-content ui-corner-left");

            input.data("autocomplete")._renderItem = function(ul, item) {
                return $("<li></li>")
                        .data("item.autocomplete", item)
                        .append("<a>" + item.label + "</a>")
                        .appendTo(ul);
            };

            $("<a>")
                    .attr("tabIndex", -1)
                    .attr("title", "Show All Items")
                    .appendTo(wrapper)
                    .button({
                        icons: {
                            primary: "ui-icon-triangle-1-s"
                        },
                        text: false
                    })
                    .removeClass("ui-corner-all")
                    .addClass("ui-corner-right ui-combobox-toggle")
                    .click(function() {
                        // close if already visible
                        if (input.autocomplete("widget").is(":visible")) {
                            input.autocomplete("close");
                            return;
                        }

                        // work around a bug (likely same cause as #5265)
                        $(this).blur();

                        // pass empty string as value to search for, displaying all results
                        input.autocomplete("search", "");
                        input.focus();
                    });
        },

        destroy: function() {
            this.wrapper.remove();
            this.element.show();
            $.Widget.prototype.destroy.call(this);
            //added  n cam b deleted
            this.input.remove();
            this.button.remove();
            this.element.show();
            $.Widget.prototype.destroy.call(this);
        }
    });
})(jQuery);
var xT;
function myVal() {
    return xT;
}
$(function() {
    //$("#tryy").combobox();
//$("#country").combobox();
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T08:57:48.673

`ID`应该是唯一的，为什么不将它们更改为共享相同`Class`，然后在您的函数中使用它。

# qt - 安装 QVTKWidgetPlugin 时出错

> ID：13740018
> 
> 赞同：0
> 
> 时间：2012-12-06T08:55:33.633
> 
> 标签：qt, vtk, itk

嗨，我是 VTK 的新手。我想在 Qt 设计器中使用 QVTKPluginWidget。我正在使用带有 MSVC 编译器 CMake- 2.8.10.1 Qt 版本 -4.8.3 VTK - 5.0 的 Visual Studio 2008

根据 VTK 用户指南，我们必须使用 Cmake 配置 VTK Lib，并设置几个选项，例如，

```
VTK_USE_GUISUPPORT=Turn On
configure
Desired Qt version cmake take itself
configure
then
set qt_qmake_executable
ON Build Example
configure

after doing this i am getting this warning in Cmake
CMake Warning (dev) at GUISupport/Qt/CMakeLists.txt:113 (ADD_LIBRARY):
  Policy CMP0003 should be set before this line.  Add code such as

    if(COMMAND cmake_policy)
      cmake_policy(SET CMP0003 NEW)
    endif(COMMAND cmake_policy)

  as early as possible but after the most recent call to
  cmake_minimum_required or cmake_policy(VERSION).  This warning appears
  because target "QVTKWidgetPlugin" links to some libraries for which the
  linker must search:

    vfw32, opengl32

  and other libraries with known full path:

    C:/Qt/4.8.3/lib/QtGuid4.lib
    E:/DebugLibrary/VtkBin/bin/Debug/vtkRendering.lib

  CMake is adding directories in the second list to the linker search path
in
  case they are needed to find libraries from the first list (for backwards
  compatibility with CMake 2.4).  Set policy CMP0003 to OLD or NEW to enable
  or disable this behavior explicitly.  Run "cmake --help-policy CMP0003"
for
  more information.
This warning is for project developers.  Use -Wno-dev to suppress it.

Generating done 
```

然后必须在 Visual Studio 中构建这个库，然后将 QVTKPluginWidget.dll 复制到 Plugin/Designer 文件夹中。然后我们应该在设计器中获取 QVTKWidget

但是在完成这个过程之后，我没有在设计师那里得到它。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T21:07:30.160

您必须使用 BUILD_SHARED_LIBS=ON 构建 VTK（如此处所述[http://www.vtk.org/Wiki/VTK/Tutorials/QtSetup](http://www.vtk.org/Wiki/VTK/Tutorials/QtSetup)）才能在 Designer 中使用小部件。

# java - 如何使用 requestFacade 包装器读取 org.apache.catalina.connector.request InputStream 两次？

> ID：13740024
> 
> 赞同：1
> 
> 时间：2012-12-06T08:55:48.627
> 
> 标签：java, tomcat, servlets

我试图在我的过滤器链中多次读取请求对象的输入流。我应该如何使用 RequestFacade 包装类来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:15:50.740

不能保证输入流可以倒带。你可以打电话`markSupported()`，如果返回，`true`那么`mark()`在你开始阅读并`reset()`倒带之前。如果`markSupported()`返回 false 那么你必须自己缓冲它。

# javascript - Ext-JS 4 动态创建控制器 - 代码不起作用

> ID：13740025
> 
> 赞同：2
> 
> 时间：2012-12-06T08:55:52.257
> 
> 标签：javascript, extjs, extjs4

你能告诉我为什么这让我

> 无法调用未定义的**子字符串**。无法调用未定义的方法**getModel**。

```
Ext.require(                   
    ['MyApp.controller.Country', 'MyApp.controller.CountryProperties'],     // this auto-loads all dependencies 
    function(){ 
            // ... as soon as this class 
            //    and all its dependencies have loaded...
        var controller = Ext.create('MyApp.controller.Country');  // create an instance
        var controller2 = Ext.create('MyApp.controller.CountryPropeties');  // create an instance
        controller.init();                  // launch init() method
        controller2.init();
    }
); 
```

但是，当我在 app.js 中手动将这些控制器、视图、存储和模型添加到控制器：[]、视图：[] 等时，它就可以工作了。

顺便提一句。我有内部控制器 - > stores:[], views: [] 所以当我只加载一个控制器时，它应该加载控制器的任何依赖项。

为什么我得到那个错误？

谢谢你。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:53:40.873

*除了@arshabh 答案之外，这是完全正确的。*

如果你打电话*（rev 1\. - 修正错字）*

```
this.application.getController('Country');
this.application.getController('CountryPropeties'); 
```

从您的控制器中，您会得到与执行此操作完全相同的结果，只是更简单一些。请注意，应用程序 getter 会自动加载缺少的类，并为控制器或存储初始化/注册它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:07:05.730

您的代码很完美，但您忘记了范围（this）

请在代码中做一些小改动，如下所示

```
 Ext.require(                   
['MyApp.controller.Country', 'MyApp.controller.CountryProperties'],     // this auto-loads all dependencies 
function(){ 
        // ... as soon as this class 
        //    and all its dependencies have loaded...
    var controller = Ext.create('MyApp.controller.Country');  // create an instance
    var controller2 = Ext.create('MyApp.controller.CountryPropeties');  // create an instance
    controller.init();                  // launch init() method
    controller2.init();
},this
   ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T00:37:18.000

对我有用的是

```
this.application.getController('Country').doInit(this); 
```

干杯
埃德加

# ruby - 红宝石webrick和cgi

> ID：13740026
> 
> 赞同：0
> 
> 时间：2012-12-06T08:55:53.150
> 
> 标签：ruby, cgi, webrick

我无法让 Webrick 使用 servlet HTTPServlet::CGIHandler——我收到一个 EACCES 错误：

```
[2012-12-06 01:38:02] ERROR CGIHandler: /tmp/cgi-bin:
/Users/7stud/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpservlet/cgi_runner.rb:46:in `exec': Permission denied - /tmp/cgi-bin (Errno::EACCES)
    from /Users/7stud/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpservlet/cgi_runner.rb:46:in `<main>'
[2012-12-06 01:38:02] ERROR CGIHandler: /tmp/cgi-bin exit with 1
[2012-12-06 01:38:02] ERROR Premature end of script headers: /tmp/cgi-bin
localhost - - [06/Dec/2012:01:38:02 MST] "GET /cgi/my_prog.cgi HTTP/1.1" 500 326
- -> /cgi/my_prog.cgi 
```

这是我设置的权限：

```
~/ruby_programs$ cd /
/$ ls -al tmp
lrwxr-xr-x@ 1 root  wheel  11 Jul  3  2011 tmp -> private/tmp

/$ cd tmp
/tmp$ ls -al
total 0
drwxrwxrwt  8 root   wheel  272 Dec  6 01:08 .
drwxr-xr-x@ 6 root   wheel  204 Mar 27  2010 ..
drwxr-xr-x  3 7stud  wheel  102 Dec  6 01:25 cgi-bin

/tmp$ cd cgi-bin/
/tmp/cgi-bin$ ls -al my_prog.cgi 
-rwxr-xr-x  1 7stud  wheel  123 Dec  6 01:09 my_prog.cgi 
```

我的服务器程序（1.rb）：

```
#!/usr/bin/env ruby
require 'webrick'
include WEBrick

port = 12_000
dir = Dir::pwd 

server = HTTPServer.new(
  :Port           => port,
  :DocumentRoot   => dir + "/html"
)

server.mount("/cgi", HTTPServlet::CGIHandler, "/tmp/cgi-bin")
puts "Listening on port: #{port}"

Signal.trap('SIGINT') { server.shutdown }
server.start 
```

运行我的服务器程序：

```
~/ruby_programs$ ruby 1.rb 
[2012-12-06 01:37:58] INFO  WEBrick 1.3.1
[2012-12-06 01:37:58] INFO  ruby 1.9.3 (2012-04-20) [x86_64-darwin10.8.0]
Listening on port: 12000
[2012-12-06 01:37:58] INFO  WEBrick::HTTPServer#start: pid=4260 port=12000 
```

我在浏览器中输入了这个地址：

```
http://localhost:12000/cgi/my_prog.cgi 
```

这显示在我的浏览器中：

> 内部服务器错误
> 
> 脚本头过早结束：/tmp/cgi-bin WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20) at localhost:12000

这是我的 cgi 脚本（/tmp/cgi-bin/my_prog.cgi）：

```
#!/usr/bin/env ruby

require 'cgi'
cgi = CGI.new
puts cgi.header
puts "<html><body>Hello Webrick</body></html>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-20T17:50:51.437

就我而言，由于文件权限不正确和标题确实不正确，我遇到了类似的问题。CGI-script 的权限应该是这样的：

```
~/ruby_projects/cgi_webrick/cgi
ls -l
-rwxr-xr-x 1 me me  112 Sep 20 20:29 test.cgi 
```

我的服务器代码看起来非常相似（放在 中`~/ruby_projects/cgi_webrick/`），但处理程序不同。

```
#!/usr/bin/env ruby

require 'webrick'

server = WEBrick::HTTPServer.new :Port => 1234 
server.mount "/", WEBrick::HTTPServlet::FileHandler , './'
trap('INT') { server.stop }
server.start 
```

如果您运行 server script `ruby my_server_script.cgi`，它将提供来自根目录或其他目录的任何脚本。在我的情况下，我可以访问`http://localhost:1234/cgi/test.cgi`（放置在子文件夹中的脚本`cgi`）和`http://localhost:1234/test.cgi`（放置在启动服务器的根目录中）。

我的测试脚本：

```
#!/usr/bin/ruby

require 'cgi'

cgi = CGI.new
puts cgi.header
puts "<html><body>This is a test</body></html>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T20:38:14.560

我可以让 WEBrick 在根目录以外的目录中执行 cgi 文件的唯一方法是使用 HTTPServlet::FileHandler servlet：

```
port = 12_500
...

cgi_dir = File.expand_path("~/ruby_programs/cgi-bin")
server.mount("/cgi", HTTPServlet::FileHandler, cgi_dir) 
```

然后用于执行位于 cgi_dir 中的 .cgi 文件的 url 是：

```
http://localhost:12500/cgi/my_prog.cgi 
```

显然，当你写：

```
server = HTTPServer.new(
  :Port           => port,
  :DocumentRoot   => "./html"  #Regular files served/.cgi files executed out of this dir
) 
```

Webrick 自动“挂载”一个 HTTPServlet::FileHandler 来处理对 :DocumentRoot 目录的请求，例如

```
http://localhost:12500/my_html.htm 
```

它将提供来自 ./html 目录的文件（即一个名为 html 的目录，位于运行程序的目录下方）。HTTPServlet::FileHandler 也将*执行*该目录中的文件，如果它们具有 .cgi 扩展名。

如果您明确使用 mount() 将 HTTPServlet::FileHandler 添加到另一个目录，例如

```
cgi_dir = File.expand_path("~/ruby_programs/cgi-bin")
server.mount("/cgi", HTTPServlet::FileHandler, cgi_dir) 
```

然后 WEBrick 还将提供该目录中的文件并执行该目录中具有 .cgi 扩展名的文件。

我还没有找到一种方法来将 WEBrick 配置为仅提供 :DocumentRoot 目录中的文件并且仅在另一个目录中执行 .cgi 文件。

请参阅此处的“Gnome WEBrick 指南”：

[http://microjet.ath.cx/webrickguide/html/](http://microjet.ath.cx/webrickguide/html/)

# jquery - jquery ui滑块根据子元素修改宽度

> ID：13740030
> 
> 赞同：0
> 
> 时间：2012-12-06T08:56:09.900
> 
> 标签：jquery, jquery-ui, slider, jquery-ui-slider

我有一个以像素为单位的巨大宽度的 jquery ui 滑块。

`.scroll-content {width:2400px;}`

和结构：

```
<div class="scroll-pane ui-widget ui-widget-header ui-corner-all">
   <div class="scroll-content">
     <div class="scroll-content-item ui-widget-header"><img src="img/img1.jpg" /></div>
     <div class="scroll-content-item ui-widget-header"><img src="img/img2.jpg" /></div>
   </div>
 <div class="scroll-bar-wrap ui-widget-content ui-corner-bottom">
  <div class="scroll-bar"></div>
 </div>
</div> 
```

我如何获得内部元素的宽度并将该宽度放入滑块容器中？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:21:51.167

有很多方法可以真正做到这一点。一种是遍历`scroll-content-item`div 并将每个的宽度相加，应用主`scroll-content`div。

```
var totalWidth = 0;

$('.scroll-content-item').each(function(){
    totalWidth = totalWidth + $(this).width();
});

$('.scroll-content').css('width', totalWidth + 'px'); 
```

# php - PHP脚本的内存使用和执行速度

> ID：13740034
> 
> 赞同：1
> 
> 时间：2012-12-06T08:56:24.750
> 
> 标签：php, performance, symfony

我有以下两个代码。哪个代码在性能方面好？

```
$gd = $this->getDoctrine();
$em = $gd->getEntityManager();
$data = $gd->getRepository('MyB:MyC')->find...;
// update $data.
$em->persist($data);
$em->flush(); 
```

我想知道它的内存使用和执行速度。

```
$data = $this->getDoctrine()->getRepository('MyB:MyC')->find...;
// update $data.
$this->getDoctrine()->getEntityManager()->persist($data);
$this->getDoctrine()->getEntityManager()->flush(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:00:54.007

简短回答：在大多数情况下，前者会更快，但会占用更多内存。

tl;博士

取决于底层的`getDoctrine()`工作方式，第二种方法至少会在执行中增加一些方法调用开销。

如果这些方法进行计算并且没有任何缓存机制，您还必须为此跟踪整个调用堆栈。

在内存占用和性能开销之间总是存在权衡。

**编辑**

更糟糕的情况：后者每次调用 getter 时都会创建某种基础数据的实例。这对性能没有帮助，甚至会产生堆峰值。

最佳情况：对 getter 的所有子序列调用都在访问同一个对象，这实际上在 DAO 或 SQL 帮助程序中非常罕见，因为在父对象中保存了一个引用，所以消耗的内存与第一个完全相同。

在这种情况下，我的建议是使用第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:52:38.217

你可以很容易地找到

```
memory_get_peak_usage () 
```

见[http://php.net/manual/function.memory-get-peak-usage.php](http://php.net/manual/function.memory-get-peak-usage.php)

# php - Symfony 2.1.4-knpPaginator 未在单击元素时对数据进行排序

> ID：13740038
> 
> 赞同：2
> 
> 时间：2012-12-06T08:56:34.137
> 
> 标签：php, symfony, doctrine-orm, symfony-2.1

我的控制器正在使用学说并调用 knp pagination bundle 的 paginate 方法，代码如下

```
$em = $this->get('doctrine.orm.entity_manager');

    $query = $em->createQueryBuilder()->add('select', 'a')
                ->add('from', 'Acme\TaskBundle\Entity\Product a')->getQuery()->getResult();
    $paginator = $this->get('knp_paginator');
    $pagination = $paginator->paginate(
                                        $query,
                                        $this->get('request')->query->get('page', 1)/*page number*/,
                                        5/*limit per page*/
                                      );
    return $this->render('AcmeTaskBundle:Default:index.html.twig', array(
    'pagination' => $pagination,
    )); 
```

而视图只是代表分页数据

```
<table>
<tr>
  {# sorting of properties based on query components #}
<th>{{ pagination.sortable('Id', 'a.id')|raw }}</th>
<th>{{ pagination.sortable('Name', 'a.name')|raw }}</th>
<th>{{ pagination.sortable('Price', 'a.price')|raw }}</th>
<th>{{ pagination.sortable('Description', 'a.description')|raw }}</th>
</tr>

{# table body #}
{% for Product in pagination %}
 <tr {% if loop.index is odd %}class="color"{% endif %}>
<td>{{ Product.id }}</td>
<td>{{ Product.name }}</td>
<td>{{ Product.price }}</td>
<td>{{ Product.description }}</td>    
 </tr>
 {% endfor %}
 </table>
 {# display navigation #}
<div class="navigation">
   {{ pagination.render()|raw }}
 </div> 
```

和路由是

```
index_entries:
   pattern: /index/
   defaults: { _controller: AcmeTaskBundle:Default:index } 
```

我通过分页获取所有表格数据，但无法在单击元素时对数据进行排序。分页器配置是

```
protected $defaultOptions = array(
    'pageParameterName' => 'page',
    'sortFieldParameterName' => 'sort',
    'sortDirectionParameterName' => 'direction',
    'distinct' => true
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:16:19.737

我得到了答案。首先，我像这样从分页器视图中获取帖子数据

```
$postData = $request->query->all(); 
```

然后在查询字符串中传递数据，例如

```
$dql= 'select a from AcmeTaskBundle:Product a order by ORDER BY $postData[sort]    $postData[direction]'; 
```

# c++ - 当不需要创建多个对象时，是否应该将类的成员变为静态？

> ID：13740039
> 
> 赞同：0
> 
> 时间：2012-12-06T08:56:38.937
> 
> 标签：c++, oop, class, static

```
class AA
{
    public:
        AA ();
        static void a1          ();
        static std :: string b1 ();
        static std :: string c1 (unsigned short x);
}; 
```

我的班级不会有不同的对象在他们之间或与其他人之间进行交互。
当然我需要至少有一个对象来调用这个类的函数，所以我想到了制作成员`static`以避免不必要的对象创建。

这种设计的优缺点是什么？什么是更好的设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:01:27.633

要访问静态成员，您甚至不需要对象，只需调用

```
AA::a1() 
```

这种模式被称为“Monostate”，替代方案是 Singleton，您可以在其中实际创建一个对象，但要确保它只完成一次，有大量关于如何做到这一点的教程，只需 google 一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T08:58:50.190

> **`static`当不需要创建多个对象时，是否应该转换类的成员？**

当您的类`static`的所有对象只需要一个成员实例时，您就可以创建该类的成员。当您声明一个类成员`static`时，该成员变为每个类而不是每个对象。

当您说您只需要类的一个对象时，您可能指的是**单例设计模式**。请注意，模式被广泛认为是一种反模式，如果有的话，它的有用性取决于特定情况。

你在Q中提到的原因与你是否应该成为会员`static`没有任何关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:39:25.607

你的类没有数据成员，所以我看不出有什么好的理由使用一个类：

```
namespace AA
{
    void a1          ();
    std :: string b1 ();
    std :: string c1 (unsigned short x);
}; 
```

> 当然我需要至少有一个对象才能调用这个类的函数

这不是真的。您可以在没有类实例的情况下调用静态成员函数。

关于 Singleton 模式的说明：它名声不好，经常被误用，而且根据我的经验，它很少有用。它的作用是强制该类只能有一个实例，并且该实例是全局可访问的。

人们经常认为，“我只需要一个实例，因此我应该使用 Singleton”，尤其是当 Singleton 是他们被引入的第一个大写设计模式时。这是错误的——如果您只需要一个实例，请创建一个实例并使用它。不要不必要地限制该类的所有未来用户只创建一个实例。不要不必要地创建共享的全局状态。这两件事都会使您的代码不那么灵活，更难以不同的方式使用，因此特别难以测试。有些人会争辩说，由于这些原因，Singleton 严格来说*从来没有*用处。

在这种情况下，您似乎甚至不需要一个实例。如果是这种情况，我会使用上述免费功能。

# java - 如何在干净的 POJO 中表示 JSON 对象？

> ID：13740048
> 
> 赞同：2
> 
> 时间：2012-12-06T08:57:06.787
> 
> 标签：java

我对 Java 很陌生。我只是在解析一个字符串并得到这样的 Json 响应：

```
{
  "customer_id": "user",
  "merchantId": "xxxx",
  "cards": 
  [
    {
      "card_token": "715fc10a-e7b3-48a1-b6e7-09e71ac050f8",
      "card_number": "11111111",
      "card_isin": "23232",
      "card_exp_year": "2013",
      "card_exp_month": "12"
    }
  ]
} 
```

出于某种原因，我希望我能够在 POJO 中表示这一点。请注意，该`cards`字段可以包含多个字段。

我是 Java 新手。我不想要这样做的代码，但我想知道在 POJO 中表示这些结构的最佳方式是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T08:58:52.687

您可以使用可以轻松地将 json 转换为 java 对象（通用）的[GSON](http://code.google.com/p/google-gson/)，反之亦然，您可以进一步将其用于您的 POJO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T09:23:20.510

**-** `Manual`解析`JSON`对象会很痛苦。

**-**最好搭配`Jackson`，我用的。

**-**或者您也可以选择`GSON`（最初由 google 创建供内部使用）。

**有关实现示例，请参见此链接：**

[http://www.mkyong.com/java/json-simple-example-read-and-write-json/](http://www.mkyong.com/java/json-simple-example-read-and-write-json/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T09:08:09.210

Java 的两个主要 JSON 处理器是 GSON（正如@Abu 在他的回答中指出的那样）和 Jackson。这些库将帮助您将 Java POJO 映射到 JSON 对象，反之亦然。

[这](https://stackoverflow.com/questions/2378402/jackson-vs-gson)是关于SO的比较。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T09:10:38.000

您还可以使用杰克逊 JSON。它更快一点，并且与[Java API for RESTful Services (JAX-RS)](http://jax-rs-spec.java.net/)配合使用，这是 REST api 的 Java 标准化。

这是两者之间的更好比较：[杰克逊与。格森](https://stackoverflow.com/questions/2378402/jackson-vs-gson)

要从 String 中读取对象，请查看[ObjectMapper 类](https://www.google.com/search?q=jackson+objectmapper)。

# maven - Maven 找不到已安装工件的包

> ID：13740050
> 
> 赞同：1
> 
> 时间：2012-12-06T08:57:30.610
> 
> 标签：maven, maven-2

我正在尝试`mvn clean install`在一个项目上运行并在失败后收到一条消息（名称已更改）：

```
C:\<...>\SomeClass.java:[23,29] error: package org.example.codes does not exist 
```

多个包显示此错误，它们都属于同一个项目/工件。但是这个工件已安装，即它的 jar 和元数据在里面`<user-dir>/.m2/repository`，当尝试从命令行再次安装它时，它说

```
Cannot install artifact. Artifact is already in the local repository. 
```

我手动检查（使用 WinRAR），这个 jar 中的结构显然看起来像那些“丢失”的包实际上在那里。

我在这里想念什么？

# sql-server - 查询很慢

> ID：13740052
> 
> 赞同：-1
> 
> 时间：2012-12-06T08:57:35.163
> 
> 标签：sql-server, sql-server-2008

我有桌子

表格1

```
epid        etid        id          EValue       reqdate
----------- ----------- ----------- ------------ ----------
15          1           1           498925307069 2012-01-01
185         1           2           A5973FC43CE3 2012-04-04
186         1           2           44C6A4B776A2 2012-04-05
205         1           2           7A0ED3F1DA13 2012-09-19
206         1           2           77771D65F9C4 2012-09-19
207         1           2           AD74A4AA41BD 2012-09-19
208         1           2           9595ABE5A0C8 2012-09-19
209         1           2           7611D2FB395B 2012-09-19
210         1           2           04A510D6067A 2012-09-19
211         1           2           24D43EC268F8 2012-09-19 
```

表2

```
PEId        Id          EPId
----------- ----------- -----------
43          9           15
44          10          15
45          11          15
46          12          15
47          13          15
48          14          15
49          15          15
50          16          15
51          17          15
52          18          15 
```

表3

```
PLId        PEId        Id          ToPayId
----------- ----------- ----------- -----------
71          43          9           1
72          43          9           2
73          44          10          1
74          44          10          2
75          45          11          1
76          45          11          2
77          46          12          1
78          46          12          2
79          47          13          1
80          47          13          2 
```

我想在表 3 中获取一个计数小于 8 的 id，并在表 2 中按 peid 排序，

我已经写了查询

```
SELECT Top 1  ToPayId FROM 
(
    SELECT Count(pl.ToPayId) C, pl.ToPayId 
    FROM table3 pl 
    INNER JOIN table2 pe ON pl.peid = pe.peid 
    INNER JOIN table1 e ON pe.epid = e.epid
    WHERE e.EtId=1 GROUP BY pl.ToPayId 
) As T 
INNER JOIN table2 p ON T.ToPayId= p.Id 
WHERE C < 8 ORDER BY p.PEId ASC 
```

此查询在存储过程中执行超过 1000 次，取决于使用 while 条件的用户定义表类型中的条目。

但它非常慢，因为我们在每个表中都有数百万个条目。

任何人都可以就上述问题提出更好的查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:23:14.200

也许尝试使用 having 子句来摆脱 from select

```
select table2.id as due
      from table3 inner join table2 on table2.PEId=table3.PEId...
      group by ...
      having count(due) <8
      order by ... 
```

-> 你在 table3 中有一个多余的 Id 列：看起来没什么用，因为一对 PEId 和 Id 看起来是唯一的，所以删除它并将表 3 的大小减少 25%，从而提高 db 的性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:55:05.173

将..因为您没有提供足够的示例数据，我不确定您的业务逻辑到底是什么。这样我就可以盲目地修改代码。

```
SELECT ToPayId 
FROM (

    SELECT TOP 1 Count(pl.ToPayId) C, pl.ToPayId, pe.PEId
    FROM table3 as pl 
        INNER JOIN table2 as pe ON pl.peid = pe.peid AND pl.ToPayId = pe.Id
        INNER JOIN table1 e ON pe.epid = e.epid
    WHERE e.EtId=1
    GROUP BY pl.ToPayId, pe.PEId 
    HAVING Count(pl.ToPayId) < 8
    ORDER BY pe.PEId ASC    

) AS T 
```

# visual-studio - Visual Studio 如何确定项目中可用的项模板？

> ID：13740055
> 
> 赞同：1
> 
> 时间：2012-12-06T08:57:48.443
> 
> 标签：visual-studio, visual-studio-2012

我希望在以类库开始的项目中提供 Add->View... 上下文菜单项，就像它在以 MVC 4 项目开始的项目中可用一样。我已经粗略地阅读了 .csproj 文件，但我没有看到任何内容说“这是一个 MVC 项目”，那么 VS 是如何知道这一点的呢？

从那以后，我了解到 VS 会查看项目文件中的 ProjectTypeGuids 元素，并且我必须将 GUID E3E379DF-F4C6-4180-9B81-6769533ABE47 添加到此元素值的前面。也许我的问题现在更清楚了，我可以说我正在尝试找出这些 GUID 与项目中可用的项目模板之间的关联。

# xml - XSL 转换排除 cdata 部分的特定 qname？

> ID：13740057
> 
> 赞同：0
> 
> 时间：2012-12-06T08:58:00.343
> 
> 标签：xml, xslt

我正在做一个 xstl 转换，我想保留来自源 xml 的 CDATA 条目。因此，我相应地定义了 cdata-section-elements。但是我有相同的 qname 和一个属性`name="test"`。那里我不想应用 cdata。我怎样才能排除这个元素？

.xml

```
<my:request><![CDATA[<foo...>]]>
<my:request>

<my:request name="test">
</my:request> 
```

.xsl

```
<xsl:output cdata-section-elements="my:request"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:50:58.240

不，不可能有基于属性的异常！

但！！如果您坚持使用替代解决方案，那么..我建议您插入一个没有属性`<![CDATA[`的元素..请参阅下面的示例：`my:request``name`

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="http://www.w3.org/2001/something">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="my:request[not(@name)]">
    <xsl:copy>
      <xsl:apply-templates select="@*"/>

      <!--Insert CDATA-->
      <xsl:value-of select="'&#60;![CDATA['" disable-output-escaping="yes"/>
      <xsl:apply-templates select="node()"/>
      <xsl:value-of select="']]&#62;'" disable-output-escaping="yes"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

输入 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<my:root xmlns:my="http://www.w3.org/2001/something">
  <my:request other="something">data</my:request>    
  <my:request name="test">data</my:request>
</my:root> 
```

输出 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<my:root xmlns:my="http://www.w3.org/2001/something">
  <my:request other="something"><![CDATA[data]]></my:request>    
  <my:request name="test">data</my:request>
</my:root> 
```

# nhibernate - Nhibernate SQL Server CE 批量更新

> ID：13740058
> 
> 赞同：-1
> 
> 时间：2012-12-06T08:58:02.533
> 
> 标签：nhibernate, batch-file, sql-server-ce, bulk

有没有办法使用 Nhibernate 在 SQL Server CE 数据库中批量插入/更新记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T12:29:56.607

ErikEJ 的代码可能性能更高，但要回答这个问题：

可以使用插入大量数据`IStatelessSession.Insert()`

# android - 安卓应用程序的设置文件

> ID：13740060
> 
> 赞同：0
> 
> 时间：2012-12-06T08:58:12.590
> 
> 标签：android, file, xamarin.android, appsettings, android-assets

我的 android 应用程序有一个 XML 设置文件。发布应用程序时，它具有一些必须与应用程序一起发布的默认值。并且在用户更改设置后，必须更改此设置文件的值。我使用 XML 资产文件来实现此功能。这个文件有一些默认值。通过发布一个应用程序，它也会被复制到设备中。但是当我写入这个文件并回来时，似乎该文件从未更改过。我使用文件管理器并查看设备上的文件，发现该文件从未更改过并且具有默认值。我正在使用 monondroid，这是我用于在 xmlsetting 文件中编写的代码：

```
public bool writeToFile (string newXmlContent)
        {
            try {
                Stream sw= Application .Context .OpenFileOutput (AppConstants .xmlSettingFileName ,
                                                                 FileCreationMode .Private  );
                StreamWriter stw= new StreamWriter (sw);
                stw.Write (newXmlContent );
                stw.Flush ();
                XmlContent = newXmlContent ;
                stw.Close ();
                sw=null;
                return true;

            } catch (Exception ex) {
                Common .HandleException (ex);
                return false ;
            }

        } 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:25:32.053

有什么特别的理由不为此使用内置设施吗？

我检索任何变化的持久性值，如下所示：

```
var prefs = Application.Context.GetSharedPreferences("MyApp", FileCreationMode.Private);  
var somePref = prefs.GetString("PrefName", null); 
```

要存储它们：

```
var prefEditor = prefs.Edit();
prefEditor.PutString("PrefName", "Some value");
prefEditor.Commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T12:00:16.530

我发现要实现设置页面并使用应用程序设置，最好的方法是使用 Preferences.for 更多信息，请参阅：

[developer.android.com/design/patterns/settings.html](http://developer.android.com/design/patterns/settings.html)

[developer.android.com/guide/topics/ui/settings.html](http://developer.android.com/guide/topics/ui/settings.html)

但是如果任何机构想要实现一个配置文件。可以为此提议使用资产。在资产文件中写入和读取必须覆盖应用程序类并将资产文件复制到 sd 或设备内存中此类的一次创建中。之后你可以工作有了这个文件。

# wix - wix，安装文件并运行bat文件

> ID：13740063
> 
> 赞同：2
> 
> 时间：2012-12-06T08:58:14.977
> 
> 标签：wix

我在使用 wix 构建 msi 安装程序时遇到问题，它将安装一些 bat 文件并运行它。我在互联网上找到了一些示例，但我无法使其工作：/这是我的 wix 源文件

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="44A8F987-6B89-422B-B41F-1364AE1EF0D5" Name="my_name" Language="1033" Version="1.11.5164" Manufacturer="company" UpgradeCode="BD8652F4-1C1A-4825-9799-7DFB499B9F12">
        <Package Description="Test file in a Product" Comments="Simple test" InstallerVersion="200" Compressed="yes" />
        <Media Id="1" Cabinet="simple.cab" EmbedCab="yes" />
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder" Name="PFiles">
                <Directory Name="my_folder" Id="MY_FOLDER">
                  <Component Id="CONFIGURE.BAT" DiskId="1" Guid="041ED78B-3D42-4EBD-8DAE-29D94DEFFC20">
                         <File KeyPath="yes" Id="file_configure.bat" Name="configure.bat" Source="C:\Documents and Settings\root\Desktop\some_path\configure.bat" />
                  </Component>  
                </Directory>
            </Directory>
        </Directory>
        <Feature Id="MainFeature" Title="Main Feature" Level="1">
                   <ComponentRef Id="CONFIGURE.BAT" />
        </Feature>
        <UI />
        <UIRef Id="WixUI_Minimal" />

        <CustomAction Id="BatchCmd" Property="BatchRun" Value="&quot;[#file_configure.bat]&quot;" Execute="immediate">
        </CustomAction>
        <CustomAction Id="BatchRun" BinaryKey="WixCA" DllEntry="CAQuietExec" Execute="deferred" Return="check" Impersonate="yes">
        </CustomAction>
        <InstallExecuteSequence>
            <Custom Action="BatchCmd" Before="BatchRun">NOT Installed</Custom>
            <Custom Action="BatchRun" After="InstallFiles">NOT Installed</Custom>
        </InstallExecuteSequence>  
    </Product>
</Wix> 
```

`Configure.bat`文件已正确安装，但在安装过程中不会运行。请帮忙

# fiddler - 获取 AppContainer 信息失败：无法枚举 AppContainer

> ID：13740065
> 
> 赞同：1
> 
> 时间：2012-12-06T08:58:20.630
> 
> 标签：fiddler, windows-server-2012

这个问题是在@EricLaw 向我解释了当[我无法从我的 REST 请求中收到响应](https://stackoverflow.com/questions/13709484/fiddler4-in-windows-server-2012-provokes-restsharp-requests-to-be-null/13714466#13714466)时出现的问题之后出现的。

本质上，请求只是返回空白，然后我发现如果 Fiddler 没有运行，应用程序就可以正常工作。

正如 Eric 解释的那样，在 Windows Server 2012 中开发/调试时，我应该考虑[一些安全问题。](http://blogs.msdn.com/b/fiddler/archive/2011/09/14/fiddler-and-windows-8-metro-style-applications-https-and-private-network-capabilities.aspx)

我按照说明安装[了建议的实用程序](http://blogs.msdn.com/b/fiddler/archive/2011/12/10/fiddler-windows-8-apps-enable-loopback-network-isolation-exemption.aspx)，但是当我单击 AppContainer Loopback 实用程序时，出现以下错误：*无法获取 AppContainer 信息：无法枚举 AppContainer，Windows 防火墙服务是否已启动？*

当然，我的防火墙服务工作得很好。

另外还有一点我还是不明白，为什么我的 HTTP 请求在 Fiddler 没有运行的时候就可以正常工作？

有人遇到过这个问题吗？

PS：我们需要一个名为 fiddler4 的新标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-06T12:27:49.847

我知道提出这个问题有点晚了，但由于我有一个修复程序，我认为它可能对其他人也有帮助。我使用了[此处](http://mymemorysucks.wordpress.com/2013/11/12/issues-with-fiddler-on-windows-8-1-and-ie-11/)描述的实用程序，虽然它没有为我解决问题，但它有一个发光的提示，即 Windows 防火墙。

为我解决了这个问题的是启动了我之前禁用的**Windows 防火墙服务。**

希望这可能会有所帮助。

# jquery - 使用 jQuery 添加/删除类并附加到无序列表导航

> ID：13740067
> 
> 赞同：0
> 
> 时间：2012-12-06T08:58:22.200
> 
> 标签：jquery

我有一个样式为水平导航栏的无序列表 - 在最后一个列表项中，我有一个带有右拉类的搜索框，如下所示...

```
 <div class="navbar">
    <ul>
      <li><a href="#">Coming Up</a></li>
      <li><a href="#">This Month</a></li>
      <li><a href="#">Next Month</a></li>
      <li><a href="#">All Events</a></li>
      <li><a href="#">Past Events</a></li>
      <li><a href="#">Contact Us</a></li>
      <li class="pull-right">
   <div id="event-serach-content">
    <form id="search-event" method="get" action="">
    <div class="event-search-box">
    <input type="text" placeholder="Search events..." id="frm-search" name="s">
          </div>
    <div class="event-submit-btn">
            <button type="submit">Go</button>
    </div>
    </form>
  </div>

    </li>
    </ul>

     </div>
<!-- navbar End //--> 
```

我有以下 jQuery，它使用 click 事件添加/删除“selected”类并附加 span 标签。有没有办法忽略最后一个列表，即不添加选定的类？空的 span 标签有一个向下箭头的 Bg。希望这是有道理的，在此先感谢。

```
 $(document).ready(function () {

            $(".navbar ul li:first").addClass('selected').append('<span></span>');

                $(".navbar ul li").click(function(){
                     $(".navbar ul li").removeClass('selected').find('span').empty().remove();

                     $(this).addClass('selected');
                     if ( $(this).hasClass('selected') ) {
                         // $(".navbar ul li:last").removeClass('selected').find('span').empty().remove();
                          $(".navbar ul li").append('<span></span>')
                     }
                     return false
                });

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:02:34.807

您可以使用`:not`和`:last`选择器：

```
$(".navbar ul li:not(:last)") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:05:09.197

减少您将单击事件绑定到使用的选定元素集`:not(:last)`

```
 $(".navbar ul li:not(:last)").click(function(){
                 $(".navbar ul li").removeClass('selected').find('span').empty().remove();

                 $(this).addClass('selected');
                 if ( $(this).hasClass('selected') ) {
                     // $(".navbar ul li:last").removeClass('selected').find('span').empty().remove();
                      $(".navbar ul li").append('<span></span>')
                 }
                 return false
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:02:53.340

在这种情况下，您只需要在 click 函数中添加一个条件来检查最后一个孩子。

```
$('.navbar ul li').click(function(e) {
    // If LI is not last child append class
    if ( ! $(this).is(':last-child') ) {
        $(".navbar ul li").removeClass('selected').find('span').empty().remove();
    }

    // Rest of code for click
}); 
```

# javascript - HTML5 画布 - 控制在同一个地方绘图时会发生什么

> ID：13740069
> 
> 赞同：1
> 
> 时间：2012-12-06T08:58:28.427
> 
> 标签：javascript, html, gwt, canvas, html5-canvas

当我在与前一行相同的坐标中绘制一条线时，我如何控制会发生什么？目前颜色变得更亮，但我希望它保持不变（或更准确地说 - 我希望第二行位于第一行之上）。

我试着做：

```
_context.setGlobalCompositeOperation(Composite.SOURCE_OVER); 
```

但它似乎仅在画布上绘制画布时才有效，而不是在同一画布上绘制时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:31:10.683

假设您的颜色具有完整的 alpha，您的问题可能与您在整数坐标处绘制宽度为 1 的线的事实有关。

看看下面的小提琴：http: [//jsfiddle.net/RAgak/](http://jsfiddle.net/RAgak/)

在整数坐标处绘制会使线条更宽且模糊。第二次绘制使它更亮。但是当我在半整数坐标处画线时，这不会发生。

```
var y = 10;
c.beginPath();
c.moveTo(0, y);
c.lineTo(30, y);
c.stroke(); // fuzzy
c.beginPath();
c.moveTo(50, y+0.5);
c.lineTo(80, y+0.5);
c.stroke(); // ok 
```

这是因为线是在它们所覆盖的所有像素上绘制的（在画布上定位是浮动的）。当你想在画布上用 JavaScript 绘制精确的垂直或水平线时，你最好将它们放在半个整数中。

见插图：第一条水平线是用y位置1绘制的。这条线模糊而宽。第二条水平线以 4.5 的 y 位置绘制。它薄而精确。

![在此处输入图像描述](../Images/deb803122da991107393adc6e746ed33.png)

至少在绘制水平或垂直线（或矩形）时，解决方案是考虑线的宽度并在整数或半整数坐标处绘制。

# java - RSA_PKCS1_OAEP_PADDING 等效于 Java

> ID：13740070
> 
> 赞同：2
> 
> 时间：2012-12-06T08:58:30.087
> 
> 标签：java, encryption, openssl, rsa

目前我在Java中使用加密实例，如下所示：

```
Cipher cipher = Cipher.getInstance("RSA"); 
```

但是我无法在我想使用 RSA_PKCS1_OAEP_PADDING 的 OpenSSL 中解密我的加密消息。我需要添加什么`"RSA"`才能使用 RSA_PKCS1_OAEP_PADDING？

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T09:07:47.243

您是否尝试过在其中使用“RSA/NONE/OAEPPadding” `getInstance()`？

否则，请查看[Java Cryptography Architecture Standard Algorithm Name Documentation](http://docs.oracle.com/javase/6/docs/technotes/guides/security/StandardNames.html#Cipher)以查找可能参数的列表。

# android - 蓝牙信号死节点

> ID：13740083
> 
> 赞同：7
> 
> 时间：2012-12-06T08:59:09.937
> 
> 标签：android, bluetooth, bluetooth-lowenergy

我正在开发一个基于服务器的数据库项目的应用程序。在这方面，我遇到了 Wi-fi 和蓝牙设备的问题。

如果我用我的平板电脑超出范围，我的过程就会被那一刻本身所困扰，解决这个问题帮助我..

我正在尝试为此开发蓝牙强度计算器或通知管理器的程序，任何人都可以帮助我..

谢谢，..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:09:12.730

检查蓝牙适配器和连接。使用以下链接获取教程并尝试使用它。

[蓝牙适配器..](http://mobile.tutsplus.com/tutorials/android/android-quick-look-bluetoothadapter/)

并查看此示例并尝试将其视为...

[第一个示例问题](https://stackoverflow.com/questions/13736967/displaying-a-notification-when-bluetooth-is-disconnected-android)

[第二个示例问题](https://stackoverflow.com/questions/13171817/android-bluetooth-program-crashing)

这些例子对你有帮助！..

# android - android从网络获取日期

> ID：13740084
> 
> 赞同：0
> 
> 时间：2012-12-06T08:59:10.547
> 
> 标签：android, date

我需要一些代码仅在特定日期执行。如果我从系统中获取日期，用户可以通过更改设置中的日期来作弊。如何从网络获取当前日期以避免这种情况？

编辑我需要的用法：

```
Btn.setOnClickListener(new View.OnClickListener() { 
public void onClick(View v) {
vib.vibrate(50); 
if (*DATE IS 10.12*){
my method()
}else 
showDialog() 
}); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T09:05:42.297

尝试点击这个网络服务[http://json-time.appspot.com/time.json?tz=GMT](http://json-time.appspot.com/time.json?tz=GMT)

杰森的回应是这样的

{

"tz": "格林威治标准时间",

“小时”：9，

"datetime": "2012 年 12 月 6 日星期四 09:22:06 +0000",

“第二”：6，

“错误”：错误，

“分钟”：22

}

只需在提到的 url 中替换您的 timezome。

在 JSON 中获取响应后，对其进行解析并从响应中获取当前日期。

所以答案有两个方面：

1) 发出 HTTP 获取请求并使用您的时区点击 url。

2）解析响应并获取当前日期和时间

我希望这会有所帮助

# c# - 如何逐行动态创建超链接（c#asp.net）

> ID：13740089
> 
> 赞同：-1
> 
> 时间：2012-12-06T08:59:24.157
> 
> 标签：c#, asp.net

我在占位符中创建超链接，但是当创建链接时，它们是相邻的。

我想在下一行创建链接，但我不知道如何制作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:05:21.110

我通过添加一个文字控件来抵消这一点，其中有一个换行符。也就是说`<br/>`，它看起来像这样。

```
Literal lit = new Literal();

lit.Text = "<br/>"; 
```

然后在每个超链接后添加此控件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:11:22.990

您可以根据需要使用 HTML 无序列表或 HTML 有序列表以及合适的 CSS 类。

即使是`<p></p>`标签也可以。

例如。：

```
<p><a href="https://www.google.co.in/">Google IN</a></p>
<p><a href="https://www.google.com/">Google1</a></ 
```

p>

检查这个：

[HTML 列表](http://www.w3schools.com/html/html_lists.asp)

HTML 无序列表：

```
<ul>
<li><a href="https://www.google.co.in/">Google IN</a></li>
<li><a href="https://www.google.com/">Google1</a></li>
</ul> 
```

HTML 有序列表：

```
<ol>
 <li><a href="https://www.google.co.in/">Google IN</a></li>
 <li><a href="https://www.google.com/">Google</a></li>
</ol> 
```

# android - 安卓 4.0 错误

> ID：13740091
> 
> 赞同：0
> 
> 时间：2012-12-06T08:59:32.010
> 
> 标签：android

以下代码是否有任何错误：

```
public void onclick2(View v)
    {
        final ProgressDialog dialog = ProgressDialog.show(this, "LOADING", "PLEASE WAIT",true);
        new Thread(new Runnable(){
            public void run(){
                try{
                    Thread.sleep(5000);
                    dialog.dismiss();
                }
                catch (InterruptedException e){
                    e.printStackTrace();
                }
            }
        }).start();
} 
```

出现以下错误：

```
The device not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:31:59.337

从您的控制台尝试`adb start-server`. 如果您在设备上启用了 USB 调试，您应该在运行时看到它`adb devices`。

# scala - 在 Play 中启动 Akka 演员

> ID：13740094
> 
> 赞同：6
> 
> 时间：2012-12-06T08:59:52.887
> 
> 标签：scala, playframework-2.0, akka

我有戏！具有一些我需要定期运行的任务的应用程序。我可以使用 Akka 安排任务，但我不确定如何启动调度程序本身。我现在正在做的是拥有一个 Scheduler 对象并从它开始`Global.scala`，就像这样

```
// app/jobs/Scheduler.scala
package jobs

import akka.util.duration._
import play.api.libs.concurrent.Akka
import play.api.Play.current

object Scheduler {
  def start() {
    Akka.system.scheduler.schedule(0 seconds, 1 minutes) {
      SomeTask.start()
    }
  }
} 
```

进而

```
// app/Global.scala
import play.api._
import jobs.Scheduler

object Global extends GlobalSettings {
  override def onStart(app: Application) {
    Scheduler.start()
  }
} 
```

问题在于，即使在开发模式和测试期间，任务也会运行，这很快就会变得非常烦人。

> 有没有办法仅在生产模式下使用 Akka 安排作业？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T09:49:59.637

Methods`isProd`和on object 可能会有所帮助`isDev`。即使您没有隐式范围，您也可以显式传递它`isTest`[`Play`](http://www.playframework.org/documentation/api/2.1-RC1/scala/index.html#play.api.Play%24)`Application`

```
override def onStart(app: Application) {
  if (isProd(app)) Scheduler.start()
} 
```

# html - 如何声明输入框的内半径

> ID：13740101
> 
> 赞同：0
> 
> 时间：2012-12-06T09:00:24.247
> 
> 标签：html, css

输入框内半径

```
<input type="text" class="input-text"> 
```

css

```
.input-text{
  border-width: 4px;
  border-color: #F85534;
  padding: 6px 14px;
  width: 540px;
  font-size: 16px;
  margin: 0px !important;
  height: 35px;
  -webkit-appearance: none;
  z-index: 5;
  position: relative;
  border-radius:0px;
  box-shadow: inset -1px 1px 2px 
  rgba(43, 40, 40, 0.2),-1px 1px 0px 
  rgba(43, 40, 40, 0.2),-2px 2px 0px 
  rgba(43, 40, 40, 0.2);
  -webkit-box-shadow: inset -1px 1px 2px rgba(43, 40, 40, 0.2),-1px 1px 0px rgba(43, 40,40,0.2),-2px 2px 0px rgba(43, 40, 40, 0.2);
} 
```

我需要文本框的内半径，外半径应该为零。

编辑

图片![在此处输入图像描述](../Images/43f94eb33bae1a9a39313c8fa0d6e073.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:21:30.347

我不确定您是否可以在不将输入包装在 div 中的情况下做到这一点，这就是我的做法：

HTML：

```
<div class="input-wrapper"><input type="text" placeholder="text"></div>​ 
```

CSS：

```
.input-wrapper {
    background: blue;
    padding: 3px;
    display: inline-block;
}

.input-wrapper input {
    border-radius: 5px;
    border: none;
    font-size: 14px;
    padding: 3px;
} 
```

在此处检查 JS-fiddle：http: [//jsfiddle.net/qCyKW/](http://jsfiddle.net/qCyKW/)

​</p>

# c# - 如何从数据库中的所有表中获取数据

> ID：13740102
> 
> 赞同：1
> 
> 时间：2012-12-06T09:00:24.777
> 
> 标签：c#, asp.net, sql

我在数据库的不同表中有 3 列。表名称和编号可以是任何内容，因此我无法编写查询来从这三列中获取数据。

查询：

```
SELECT first_name, last_name 
FROM (table names) 
WHERE email="someting@someting.com" 
```

请帮我解决一下这个。

谢谢，

爱德华

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:13:22.217

您可以动态构建 SQL 语句。类似于：

声明 @SQL VARCHAR(4000)

SET @SQL = 'SELECT first_name, last_name FROM .... etc'

执行 (@SQL)

因此，假设您要使用的表名作为参数传入或以其他方式从某处查找，您可以将它们包含在您在@SQL 变量中构建的查询中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:02:57.420

你可以这样做：

```
SELECT first_name, last_name, FromWhichTable 
FROM
(
   SELECT first_name, last_name, email, FromWhichTable = 1 FROM table_name1 
   UNION ALL
   SELECT first_name, last_name, email, 2                  FROM table_name2
   UNION ALL
   SELECT first_name, last_name, email, 3                  FROM table_name3 
) t
WHERE email="someting@someting.com" 
```

# iphone - 将文本框数据写入 Plist

> ID：13740103
> 
> 赞同：1
> 
> 时间：2012-12-06T09:00:28.057
> 
> 标签：iphone, ios, ipad, textbox, plist

我有一个带有提交按钮的文本框。当我按下提交时，我需要将文本框中的数据写入 plist 中。我尝试了下面的代码，但 plist 中没有任何变化。我创建了一个带有名称的 plist `sample.plist`。

```
 -(void) SubmitAction {
NSString *path = [NSSearchPathForDirectoriesInDomains (NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *finalPath = [path stringByAppendingPathComponent:@"sample.plist"];
NSMutableDictionary *plistDict = [NSMutableDictionary dictionaryWithContentsOfFile:finalPath];
NSMutableArray *titleArray=[plistDict valueForKey:@"title"];

[titleArray addObject:textbox1.text];

[plistDict setValue:titleArray forKey:@"title"];

[plistDict writeToFile:finalPath atomically:NO];
} 
```

在 plist 中创建的数组如下

```
<plist version="1.0">
<dict>
<key>title</key> <array/>
 </dict>
</plist> 
```

请告诉我还需要做什么..我的错在哪里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:11:11.223

尝试：
首先检查文件是否存在

```
 bool b=[[NSFileManager defaultManager] fileExistsAtPath:filePath];
 if (!b) 
 {
      NSLog(@"The file does not exist");
      return;
 }

  ........

 [titleArray addObject:[NSString stringWithFormat:@"%@", textbox1.text]];

 [plistDict setObject:titleArray forKey:@"title"]; 
```

现在，如果文件不存在，请按照苹果文档[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/CreatePropListProgram/CreatePropListProgram.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/PropertyLists/CreatePropListProgram/CreatePropListProgram.html) 以编程方式创建文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:35:41.230

你可以在我这边使用这个工作正常

```
-(void)writeToPlist
{
BOOL success;
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
NSUserDomainMask, YES); 
NSString *documentsDirectory = [documentPaths objectAtIndex:0];
NSString *documentPlistPath = [documentsDirectory stringByAppendingPathComponent:@"XYZ.plist"];

NSString *bundlePath = [[NSBundle mainBundle] bundlePath];  
NSString *bundlePlistPath = [bundlePath stringByAppendingPathComponent:@"XYZ.plist"];

if([fileManager fileExistsAtPath:documentPlistPath]){

    NSMutableDictionary *documentDict = [NSMutableDictionary 
    dictionaryWithContentsOfFile:documentPlistPath];
    NSMutableArray *valArray = [NSMutableArray arrayWithArray:[self readFromPlist]];
    int index = [valArray count];
    [valArray insertObject:@"lastObject" atIndex:index];
    [documentDict setObject:valArray forKey:@"title"];

    success =[documentDict writeToFile:documentPlistPath atomically:NO];

} else {

    NSError *error;
    BOOL written =  [fileManager copyItemAtPath:bundlePlistPath toPath:documentPlistPath 
    error:&error];

    if (written) {
        NSMutableDictionary *documentDict = [NSMutableDictionary 
        dictionaryWithContentsOfFile:documentPlistPath];
        NSMutableArray *valArray = [NSMutableArray arrayWithArray:[self readFromPlist]];
        int index = [valArray count];
        [valArray insertObject:@"lastObject" atIndex:index];
        [documentDict setObject:valArray forKey:@"title"];

        success =[documentDict writeToFile:documentPlistPath atomically:NO];

    }else {
        NSLog(@"Plist couldnot be copied from bundle to directory!!!");
    }

} 

}
 -(NSArray*)readFromPlist
 {
   NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
  NSUserDomainMask, YES); 
  NSString *documentsDirectory = [documentPaths objectAtIndex:0];
 NSString *documentPlistPath = [documentsDirectory stringByAppendingPathComponent:@"XYZ.plist"];

   NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:documentPlistPath];

   NSArray *valueArray = [dict objectForKey:@"title"];

   return valueArray;

 } 
```

用您的 textbox.text 替换 @"lastobject"；并用您的 sample.plist 替换 XYZ.plist。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:49:20.970

试试这个代码..

```
NSString* plistPath = nil;
NSFileManager* manager = [NSFileManager defaultManager];
if (plistPath = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"sample.plist"]) 
{
    if ([manager isWritableFileAtPath:plistPath]) 
    {
        NSMutableDictionary *plistDict = [NSMutableDictionary dictionaryWithContentsOfFile:finalPath];
        NSMutableArray *titleArray=[plistDict valueForKey:@"title"];

        [titleArray addObject:textbox1.text];

        [plistDict setValue:titleArray forKey:@"title"];

        [plistDict writeToFile:finalPath atomically:NO];
        [manager changeFileAttributes:[NSDictionary dictionaryWithObject:[NSDate date] forKey:NSFileModificationDate] atPath: [[NSBundle mainBundle] bundlePath]];
    }
} 
```

我希望这可以帮助你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-12T14:31:34.750

这对我有用我的“Words.plist”

```
<dict>
    <key>Root</key>
    <array>
        <string>sunday</string>
        <string>monday</string>
        <integer>44</integer>
    </array>
</dict>

NSString *StringsFromPList = [[NSBundle mainBundle] bundlePath];
NSString *itemPositionPlistLocation = [StringsFromPList stringByAppendingPathComponent:@"Words.plist"];
 _myDictionary= [[NSDictionary alloc] initWithContentsOfFile:itemPositionPlistLocation];
NSArray * items = [_myDictionary objectForKey:@"Root"];
NSLog(@"%@", items); 
```

希望能帮助到你 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T09:07:16.367

尝试使用，

```
[plistDict setObject:titleArray forKey:@"title"]; 
```

并检查数组是否具有值或`nil`对象

# perl - 在 Perl 中存储 UNIVERSAL 方法的位置

> ID：13740116
> 
> 赞同：0
> 
> 时间：2012-12-06T09:01:15.900
> 
> 标签：perl, oop, methods

所以我知道特殊的 UNIVERSAL 类将被视为创建所有其他对象的基类。所以如果 Perl 遍历继承层次后没有找到特定的方法，它会在 UNIVERSAL 类中查看是否可以找到该方法。但是，当您创建发行版时，不会创建 UNIVERSAL.pm 包。此外，如果没有 UNIVERSAL.pm，UNIVERSAL 方法 'DOES' 和 'can' 已经存在......因此，我不确定是否应该将 UNIVERSAL 方法写入随机包中，如下所示：

```
sub UNIVERSAL::nicemethod{
    launch_teh_missles();
} 
```

或者我应该创建一个单独的通用包和 .pm 文件？什么被认为是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:08:10.303

您可以像添加任何其他包一样向 UNIVERSAL 添加新方法：

```
package
   UNIVERSAL;  # Line break to fool CPAN indexer

sub nice_method {
   ...
} 
```

# javascript - Javascript：将选定的焦点重置在正在重新渲染的元素上

> ID：13740117
> 
> 赞同：0
> 
> 时间：2012-12-06T09:01:24.187
> 
> 标签：javascript, focus, dust.js

我正在使用[dust.js](http://akdubya.github.com/dustjs/)来将Javascript 模板呈现为HTML。使用dust.js，我基本上将我的页面分解为模板组件，这些模板组件会根据某些事件重新呈现。一个这样的组件/模板在概念上如下所示：

[标签] [输入1] [输入2] [输入3]

该组件中的所有 3 个输入都有一个 onBlur 事件，该事件用于重新计算其他输入的值，进而导致模板重新渲染。例如，如果用户修改了 Input1 的值，则 Input2 和 Input3 的值都会被调整并重新渲染。

我重新渲染模板而不只是设置值的原因是模板包含根据值渲染的附加逻辑和元素（例如，某些值会导致呈现错误消息或显示附加字段） .

到目前为止一切顺利，但这会导致焦点问题。例如，如果用户修改了 Input1，然后单击 Input2。onBlur 将触发，我将更新 Input2 和 Input3 的值，然后重新渲染模板。这反过来会导致用户的焦点被丢弃，他们将不得不再次单击 Input2。

我需要一种方法来知道用户点击了 Input2，以便在重新渲染完成后我可以将焦点设置为它。由于 onBlur 事件在 onFocus 之前触发，我想不出任何办法来做到这一点。

除了绕过模板渲染，还有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:35:06.183

I had a similar problem. I solved it by delaying the "blur" event listener function with about 100ms, to allow the focus event on another input to fire before the blur handler starts rendering.

# linq - 使用 LINQ 进行内部连接

> ID：13740122
> 
> 赞同：-1
> 
> 时间：2012-12-06T09:01:27.490
> 
> 标签：linq

我是 LINQ 的新手，有人可以帮我如何将以下查询转换为 LINQ：

```
select c.cityname, c.cityid from country cn
inner join [State] st on cn.stateid = st.stateid
inner join [city] c on c.cityid = st.cityid where 
cn.countrid = 'cn001' order by c.cityname 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:17:57.697

尝试这个：

```
List<State> States = new List<State>();
List<City> Cities = new List<City>();
List<Country> Countries = new List<Country>();

int countryId = 10;
var query = Countries
            .Join(States, c => c.StateId, s => s.StateId, (c, s) => new {Country = c, State = s})
            .Join(Cities, s => s.State.CityId, c => c.CityId, (t, c) => new {c.CityId, c.CityName, t.Country.CountryId})
            .Where(r => r.CountryId == countryId)
            .Select(r => new {r.CityName, r.CityId})
            .OrderBy(r => r.CityName);

class Country
{
    public int StateId { get; set; }

    public int CountryId { get; set; }
}
class State
{
    public int StateId { get; set; }

    public int CityId { get; set; }
}

class City
{
    public int StateId { get; set; }

    public int CityId { get; set; }

    public string CityName { get; set; }
} 
```

# c# - 如何使用telerik窗口打开底部有常量面板的页面？

> ID：13740128
> 
> 赞同：0
> 
> 时间：2012-12-06T09:01:44.230
> 
> 标签：c#, asp.net, telerik, radwindow

我有以下情况：

我使用[RadWindow](http://demos.telerik.com/aspnet-ajax/window/examples/overview/defaultcs.aspx)打开我的解决方案中存在的特定页面（该页面）。

现在我想在这个窗口的底部（常量面板）放置一个带有一组按钮的面板，与页面分开。

但我不知道该怎么做。

* * *

```
 <telerik:RadWindowManager ID="RadWindowManager1" runat="server" EnableShadow="true">
        <Windows>
            <telerik:RadWindow ID="RadWindow1" runat="server" ShowContentDuringLoad="false" Width="400px"
                Height="400px" Title="Telerik RadWindow" Behaviors="Default" EnableShadow="true" KeepInScreenBounds="true" Modal="true" VisibleStatusbar="true">
                <ContentTemplate>

                    <asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" />
                </ContentTemplate>

            </telerik:RadWindow>

        </Windows>
    </telerik:RadWindowManager> 
```

* * *

```
 <script type="text/javascript">
        //<![CDATA[
        function openRadWin() {
            radopen("About.aspx", "RadWindow1");
        }

        function openPopUp() {
            window.open("About.aspx", "WindowPopup", "width=400px, height=400px, resizable");
        }
        //]]>
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:21:31.270

您似乎使用的是 ContentTemplate，而不是外部页面。然而，简单的 CSS 与 position: fixed （或绝对 + 一个具有 position: relative 的 div 包装器）和 bottom: 0px 用于按钮的包装器应该可以完成工作，无论是在 RadWindow 中还是直接在浏览器中。有很多方法可以定位这样的元素。

其他选项是使用更丰富的控件，如 RadNotification（请参阅[此演示](http://demos.telerik.com/aspnet-ajax/notification/examples/sizeinpercent/defaultcs.aspx)）或 RadSplitter 将您的静态内容放在其底部窗格中（请参阅[此处](http://demos.telerik.com/aspnet-ajax/splitter/examples/resizewithwindow/defaultcs.aspx)和[此处](http://demos.telerik.com/aspnet-ajax/splitter/examples/splitterorientation/defaultcs.aspx)）。

# scala - 匹配集合中的多个元素

> ID：13740131
> 
> 赞同：3
> 
> 时间：2012-12-06T09:01:52.610
> 
> 标签：scala, scala-2.9

定义：

```
val x = List(1, 2, 3, 4) 
```

我想查找是否`x`包含`1`or `3`。一种方法是

```
x.contains(1) || x.contains(3) 
```

另一个是

```
x.exists(y => y == 1 || y == 3) 
```

另一个是：

```
x.exists(List(1,3).contains(_)) 
```

我会更喜欢类似的东西

```
x.containsAnyOf(1, 3) 
```

请注意，`x.containsSlice`在这种情况下不起作用。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T09:10:44.313

你可以做

```
x exists Set(0, 1, 2) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T09:16:20.907

当然，`containsAnyOf`Scala 的标准库中没有。您可以使用“pimp my library”模式使其看起来像存在。

```
class ContainsAnyOf[T](seq: Seq[T]) {
  def containsAnyOf(xs: T*) = seq.exists(xs.contains(_))
}

implicit def seqToContainsAnyOf[T](seq: Seq[T]) = new ContainsAnyOf(seq) 
```

现在你可以这样做：

```
scala> val a = List(1,2,3,4)
a: List[Int] = List(1, 2, 3, 4)

scala> a.containsAnyOf(1,3)
res0: Boolean = true 
```

# ios - Streaming NSXMLParser with NSInputStream

> ID：13740132
> 
> 赞同：9
> 
> 时间：2012-12-06T09:02:00.053
> 
> 标签：ios, nsxmlparser, nsinputstream

**Update:**

When using `NSXMLParser` class method `initWithContentsOfURL`, rather than parsing as the XML feed is downloaded, it appears to try to load the entire XML file into memory, and only then initiate the parsing process. This is problematic if the XML feed is large (using an excessive amount of RAM, inherently inefficient because rather than parsing in parallel with the download, it only starts the parsing once the download is done, etc.).

Has anyone discovered how to parse as the feed is being streamed to the device using `NSXMLParser`? Yes, you can use `LibXML2` (as discussed below), but it seems like it should be possible to do it with `NSXMLParser`. But it's eluding me.

**Original question:**

I was wrestling with using [`NSXMLParser`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html) to read XML from a web stream. If you use [`initWithContentsOfURL`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html#//apple_ref/occ/instm/NSXMLParser/initWithContentsOfURL%3a), while the interface may lead one to infer that it would stream the XML from the web, it doesn't seem to to do so, but rather appears to attempt to load the entire XML file first before any parsing taking place. For modest sized XML files that's fine, but for really large ones, that's problematic.

I have seen discussions of using `NSXMLParser` in conjunction with [`initWithStream`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html#//apple_ref/occ/instm/NSXMLParser/initWithStream%3a) with some customized `NSInputStream` that is streaming from the web. For example, there have been answers to this that suggest using something like the `CFStreamCreateBoundPair` referred to in the [following Cocoa Builder post](http://www.cocoabuilder.com/archive/cocoa/306924-asynchronous-downloading-and-parsing-of-xml.html) and the discussion of [Setting Up Socket Streams](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Streams/Articles/NetworkStreams.html#//apple_ref/doc/uid/20002277-BCIDFCDI) in the Apple *Stream Programming Guide*, but I have not gotten it to work. I even tried writing my own subclassed `NSInputStream` that used a [`NSURLConnection`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html) (which is, itself, pretty good at streaming) but I wasn't able to get it to work in conjunction with `NSXMLParser`.

In the end, I decided to use [`LibXML2`](http://www.xmlsoft.org/) rather than `NSXMLParser`, as demonstrated in the Apple [XMLPerformance sample](http://developer.apple.com/library/ios/#samplecode/XMLPerformance/Introduction/Intro.html), but I was wondering if anyone had any luck getting streaming from a web source working with `NSXMLParser`. I've seen plenty of "theoretically you could do *x*" sort of answers, suggesting everything from `CFStreamCreateBoundPair` to grabbing the [`HTTPBodyStream`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLRequest/HTTPBodyStream) from [`NSURLRequest`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html), but I've yet to come across a working demonstration of streaming with `NSXMLParser`.

The Ray Wenderlich article [How To Choose The Best XML Parser for Your iPhone Project](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project) seems to confirm that `NSXMLParser` is not well suited for large XML files, but with all of the posts about possible `NSXMLParser`-based work-arounds for streaming really large XML files, I'm surprised I have yet to find a working demonstration of this. Does anyone know of a functioning `NSXMLParser` implementation that streams from the web? Clearly, I can just stick with `LibXML2` or some other equivalent XML parser, but the notion of streaming with `NSXMLParser` seems tantilizingly close.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-26T20:06:48.733

`-[NSXMLParser initWithStream:]` is the only interface to `NSXMLParser` that currently performs a streaming parse of the data. Hooking it up to an asynchronous `NSURLConnection` that's providing data incrementally is unwieldy because `NSXMLParser` takes a blocking, "pull"-based approach to reading from the `NSInputStream`. That is, `-[NSXMLParser parse]` does something like the following when dealing with an `NSInputStream`:

```
while (1) {
    NSInteger length = [stream read:buffer maxLength:maxLength];
    if (!length)
        break;

    // Parse data …
} 
```

In order to incrementally provide data to this parser a custom `NSInputStream` subclass is needed that funnels data received by the `NSURLConnectionDelegate` calls on a background queue or runloop over to the `-read:maxLength:` call that `NSXMLParser` is waiting on.

A proof-of-concept implementation follows:

```
#include <Foundation/Foundation.h>

@interface ReceivedDataStream : NSInputStream <NSURLConnectionDelegate>
@property (retain) NSURLConnection *connection;
@property (retain) NSMutableArray *bufferedData;
@property (assign, getter=isFinished) BOOL finished;
@property (retain) dispatch_semaphore_t semaphore;
@end

@implementation ReceivedDataStream

- (id)initWithContentsOfURL:(NSURL *)url
{
    if (!(self = [super init]))
        return nil;

    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    self.connection = [[[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:NO] autorelease];
    self.connection.delegateQueue = [[[NSOperationQueue alloc] init] autorelease];
    self.bufferedData = [NSMutableArray array];
    self.semaphore = dispatch_semaphore_create(0);

    return self;
}

- (void)dealloc
{
    self.connection = nil;
    self.bufferedData = nil;
    self.semaphore = nil;

    [super dealloc];
}

- (BOOL)hasBufferedData
{
    @synchronized (self) { return self.bufferedData.count > 0; }
}

#pragma mark - NSInputStream overrides

- (void)open
{
    NSLog(@"open");
    [self.connection start];
}

- (void)close
{
    NSLog(@"close");
    [self.connection cancel];
}

- (NSInteger)read:(uint8_t *)buffer maxLength:(NSUInteger)maxLength
{
    NSLog(@"read:%p maxLength:%ld", buffer, maxLength);
    if (self.isFinished && !self.hasBufferedData)
        return 0;

    if (!self.hasBufferedData)
        dispatch_semaphore_wait(self.semaphore, DISPATCH_TIME_FOREVER);

    NSAssert(self.isFinished || self.hasBufferedData, @"Was woken without new information");

    if (self.isFinished && !self.hasBufferedData)
        return 0;

    NSData *data = nil;
    @synchronized (self) {
        data = [[self.bufferedData[0] retain] autorelease];
        [self.bufferedData removeObjectAtIndex:0];
        if (data.length > maxLength) {
            NSData *remainingData = [NSData dataWithBytes:data.bytes + maxLength length:data.length - maxLength];
            [self.bufferedData insertObject:remainingData atIndex:0];
        }
    }

    NSUInteger copiedLength = MIN([data length], maxLength);
    memcpy(buffer, [data bytes], copiedLength);
    return copiedLength;
}

#pragma mark - NSURLConnetionDelegate methods

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    NSLog(@"connection:%@ didReceiveData:…", connection);
    @synchronized (self) {
        [self.bufferedData addObject:data];
    }
    dispatch_semaphore_signal(self.semaphore);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSLog(@"connectionDidFinishLoading:%@", connection);
    self.finished = YES;
    dispatch_semaphore_signal(self.semaphore);
}

@end

@interface ParserDelegate : NSObject <NSXMLParserDelegate>
@end

@implementation ParserDelegate

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
    NSLog(@"parser:%@ didStartElement:%@ namespaceURI:%@ qualifiedName:%@ attributes:%@", parser, elementName, namespaceURI, qualifiedName, attributeDict);
}

- (void)parserDidEndDocument:(NSXMLParser *)parser
{
    NSLog(@"parserDidEndDocument:%@", parser);
    CFRunLoopStop(CFRunLoopGetCurrent());
}

@end

int main(int argc, char **argv)
{
    @autoreleasepool {

        NSURL *url = [NSURL URLWithString:@"http://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xml"];
        ReceivedDataStream *stream = [[ReceivedDataStream alloc] initWithContentsOfURL:url];
        NSXMLParser *parser = [[NSXMLParser alloc] initWithStream:stream];
        parser.delegate = [[[ParserDelegate alloc] init] autorelease];

        [parser performSelector:@selector(parse) withObject:nil afterDelay:0.0];

        CFRunLoopRun();

    }
    return 0;
} 
```

# ruby-on-rails - 如何在开发生命周期中设置不同的服务器

> ID：13740137
> 
> 赞同：0
> 
> 时间：2012-12-06T09:02:26.650
> 
> 标签：ruby-on-rails

我想将瘦服务器用于开发，将独角兽用于暂存/生产环境。如何修改我的 Gemfile，以便仅在其各自的 gemset 中安装适当的服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:05:22.140

开发中：

```
group :development do
  gem "thin"
end 
```

在分期和制作方面：

```
group :staging, :production do
  gem "unicorn"
end 
```

# javascript - 无法在里面添加 使用 jQuery

> ID：13740138
> 
> 赞同：-2
> 
> 时间：2012-12-06T09:02:28.553
> 
> 标签：javascript, jquery

这就是我在`<div id = 'book'>....</div>`. 不幸的是，它没有像我预期的那样创建任何 img 标签。错误是什么？确认路径包含值。

```
$('#book').append('<img src ="' + paths[1] + '" style = "width:100%;height:100%;top:1px;left:1px" alt = "flip book" id = "logo-cover" />'); 
```

更新：

这可能是由于 path[1] 值，它使用 for 循环来迭代一个数组，它可能是一个空值，但它应该被跳过，因为我在追加之前检查过...

整个脚本

```
 <script>
function load_pages(page) {
    $.ajax({
        type: "GET",
        url: "scandir.php",
        data: "page=" + page,
        dataType: 'json',
        success: function (data) {
            console.log(data);
            $.each(data, function(i,paths){
                    var status = 'nonFinal';
                    if (paths[0] == '' && i == 'next'){
                        status = 'suspectFinal';
                    }
                    if (paths[1] == '' && i == 'next' && status == 'suspectFinal'){
                        status = 'final';
                        page--;
                        load_pages(page);
                        status == 'nonfinal'
                    }
                    else{
                        if (paths[0] != ''){
                            console.log('method called'); 
                            $('#book').append($('<img>').attr('src',paths[0]).css({'width':'100%','height':'‌​100%','top':1px;}).attr('id','logo-cover'));
                        }

                        if (paths[1] != ''){
                            console.log('method2 called'); 
                            $('#book').append($('<img>').attr('src',paths[1]).css({'width':'100%','height':'‌​100%','top':1px;}).attr('id','logo-cover'));
                        }
                    }
            });
            }
    });
}
    $(document).ready(function(){
    var inputPage = '1';
    if (inputPage == '1'){
        inputPage = '2';
    }

    load_pages(inputPage);
    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:13:36.587

您发布的代码是正确的，我用它来创建这个工作 jsFiddle：http: [//jsfiddle.net/Ah87q/](http://jsfiddle.net/Ah87q/)

您应该检查是否`paths[1]`不为空，或者您应该在其他地方找到错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:16:46.777

检查代码是否被调用的一种方法是向“append()”方法添加某种回调函数。虽然它没有，但我们将这样模拟它：

```
$('#book').append('<img src ="' + paths[1] + '" style = "width:100%;height:100%;top:1px;left:1px" alt = "flip book" id = "logo-cover" />').each(function(){ 

console.log('method called'); 
// or with an alert
alert('method called'); 

}); 
```

如果根本没有调用它，则问题可能在于使用 id 而不是类（'#' 而不是 '.'）或类似的东西。此外，此方法可能会在元素“#book”加载之前调用，因此您可能希望将代码放入

$(文档).ready(函数(){

});

# jquery - 在无逻辑胡子模板引擎中实现条件

> ID：13740140
> 
> 赞同：3
> 
> 时间：2012-12-06T09:02:35.207
> 
> 标签：jquery, templates, conditional-statements, mustache

到目前为止[`mustache`](http://mustache.github.com/)很好，但现在逻辑少似乎不是一个功能。假设，我必须渲染模板，我可以在其中拥有用户的电子邮件和姓名。

如果电子邮件和姓名都存在，我希望我的渲染结果是：

```
<a href="mailto:EMAIL">NAME</a> 
```

如果存在电子邮件但不存在名称，则结果将是：

```
<a href="mailto:EMAIL">EMAIL</a> 
```

如果只存在名称，则模板应呈现为：

```
NAME 
```

所以现在我必须做类似的事情：

```
{{#email}}<a href="mailto:{{email}}">{{#name}}{{name}}{{/name}}{{^name}}{{email}}{{/name}}</a>{{/email}}{{^email}}{{name}}{{/email}} 
```

这太丑了！而这只是3个条件！如果我需要更多怎么办？我觉得应该有另一种方式来做同样的事情`mustache`。还是不应该？

所以，小胡子开发人员认为没有逻辑是一件好事，但我有一个论点。大多数时候我们需要检查模板中的一些变量（大多数时候我们只需要检查是否存在）。所以我会做类似的事情：

```
{% if email %}{{ email }}{% else %}{{ name }}{% endif %} 
```

这看起来更全面

```
{{#email}}{{email}}{{/email}}{{^email}}{{name}}{{/email}} 
```

不是吗？

如果我也需要检查`name`：

```
{% if email %}{{email}}{% elif name %}{{name}}{% else %}Anonymous{% endif %} 
```

对比

```
{{#email}}{{email}}{{/email}}{{^email}}{{#name}}{{name}}{{/name}}{{^name}}Anonymous{{/name}}{{/email}} 
```

如果没有，你会建议另一个模板库来呈现模板`javascript`吗？与（jQuery-plugin）集成`jQuery`是一个优势，但不是必需的——我可以自己做。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:11:56.280

总有[Handlebars](http://github.com/wycats/handlebars.js/)比 vanilla Mustache 功能更丰富（它是 Mustache 的超集），当然您可以使用任何其他可用于 JS 的无数模板引擎。如果您使用 Handlebars，您甚至可以重新实现一个`{{#if}}`接受多个参数的块帮助器版本，就像这样（警告：非常轻微的测试，大部分都是在我的脑海中写出来的）

```
Handlebars.registerHelper('if', function() {
    var args = Array.prototype.slice.call(arguments),
        options = args.splice(-1, 1)[0],
        allPass = true,
        context;

    for (var i = 0; i < args.length; i++) {
        context = args[i];

        if(Object.prototype.toString.call(context) === "[object Function]") { 
            context = context.call(this);
        }

        if (!context || Handlebars.Utils.isEmpty(context)) {
            allPass = false;
            break;
        }
    }

    if(allPass) {
        return options.fn(this);
    } else {
        return options.inverse(this);
    }
}); 
```

并像这样使用它：

```
var template = "{{#if a b c}}pass{{else}}fail{{/if}}";
var c = Handlebars.compile(template);
console.log(c({a: true, b: pass, c: true})) 
```

请注意，当您实现某种复合逻辑运算符时，纯粹主义者可能会认为这可能是“作弊”，甚至更多地使其接受不确定数量的参数。Mustache 的要点是有一个非常小的[规范](https://github.com/mustache/spec/)，可以很容易地跨编程语言移植，这样你就可以在后端和前端互换地重用你的模板。

# ruby-on-rails - will_paginate 使用索引从 1 开始下一页计数

> ID：13740141
> 
> 赞同：0
> 
> 时间：2012-12-06T09:02:36.720
> 
> 标签：ruby-on-rails, ruby

我有一个帖子的索引页面，它就像：

```
<% @posts.each_with_index do |post, index| %>
   //do some rendering
<% end %>
<%= will_paginate @posts %> 
```

在我的控制器中，我有以下内容：

```
def index
    @posts = Post.paginate(:page => params[:page], :per_page => 15)
end 
```

第一页编号最多为 15，但是当我继续翻到第二页时，索引计数又回到 1。我希望它从 15 开始。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:20:11.193

必须浏览 will_paginate 代码以提出解决方案。在配方模型中，我添加了这种方法。

```
def offset(page)
    per_page = 15
    @off_set = WillPaginate::PageNumber(page).to_offset(per_page).to_i
end 
```

在我的控制器中，我添加了：

```
def index
     @page = params[:page]
end 
```

最后在我看来，我添加了这个：

```
<%= index + recipe.offset(@page) + 1 %> 
```

# ios - glGetAttribLocation 与 glBindAttribLocation

> ID：13740147
> 
> 赞同：2
> 
> 时间：2012-12-06T09:02:48.583
> 
> 标签：ios, opengl-es, opengl-es-2.0

在 iOS 设备上绑定属性是否明智（以及如何选择要绑定的索引号）？在我的应用程序中，我有几个着色器，跟踪所有属性/制服变得很麻烦。但是我读到[nVidia 对索引施加了限制](http://www.opengl.org/sdk/docs/tutorials/ClockworkCoders/attributes.php)，这让我认为`glBindAttribLocation`一般情况下应该避免。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:10:21.320

我发现管理属性和制服的最佳方法是有一个枚举

```
enum
{
UNIFORM_MODELVIEWPROJECTION_MATRIX,
UNIFORM_NORMAL_MATRIX,
UNIFORM_VEC3_lightPosition,
UNIFORM_VEC4_lightDiffuseColour,
UNIFORM_VEC4_lightSpecularColour,
UNIFORM_VEC4_lightAmbientColour,
UNIFORM_VEC3_lightHalfVector,
UNIFORM_Texture,
UNIFORM_VEC4_NumberColour,
UNIFORM_VEC4_FaceColour,
UNIFORM_VEC4_camerPosition,
NUM_UNIFORMS
};

GLint uniforms[NUM_UNIFORMS]; 
```

然后当你初始化你的着色器

```
// Get uniform locations.
uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX] = glGetUniformLocation(Program, "modelViewProjectionMatrix");
uniforms[UNIFORM_NORMAL_MATRIX] = glGetUniformLocation(Program, "normalMatrix");
uniforms[UNIFORM_VEC3_lightPosition] = glGetUniformLocation(Program, "lightPosition");
//etc 
```

然后在使用它们时

```
glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, modelViewProjectionMatrix.m);
glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, normalMatrix.m);
//etc 
```

不确定这是否是您真正要问的，但它仍然很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T09:16:00.000

“*但我读到 nVidia 对索引施加了限制*”

1.  您所说的是*Desktop OpenGL*，它与 OpenGL ES 不同。所以它不适用于你。

2.  即使对于桌面 GL，这也是不正确的。确实，NVIDIA 确实在内置属性和用户定义属性之间非法使用别名。*但是，如果您从不使用*内置属性，那就无关紧要了。你不应该。因此，如果您不这样做，则无需担心。

# jquery - 二进制文件的 PrimeFaces FileUpload 错误

> ID：13740148
> 
> 赞同：1
> 
> 时间：2012-12-06T09:02:49.697
> 
> 标签：jquery, file-upload, encoding, primefaces

我正在使用**PrimeFaces FileUpload**组件将`.properties`文件传输到服务器。然而，扩展并不是一切，所以我想测试发布其他内容时的行为。我已经上传了示例 jar 文件（具体来说是 apache commons 编解码器），但是我遇到了浏览器的奇怪行为，而不是堆栈跟踪中可能出现的异常：对话框内容完全折叠并且不可用（**IE**）。

我打开了 JavaScript 控制台，发现了更根本的错误。

在**FireFox**上，有**jQuery 错误**，但对话框没有折叠：

```
NS_ERROR_NOT_IMPLEMENTED: Component returned failure code: 0x80004001 (NS_ERROR_NOT_IMPLEMENTED) [nsIDOMLSProgressEvent.input] 
```

但是，在**IE 9**上，渲染引擎出现错误：

```
XML5617: Ungültiges XML-Zeichen. 
form.xhtml, Zeile 3 Zeichen 3926 
```

XML 答案包含二进制内容，例如上传文件的内容将附加到其中。搜索可能的 PrimeFaces 错误我发现了以下内容：[primefaces fileupload filter with utf8 characters filter](https://stackoverflow.com/questions/11190081/primefaces-fileupload-filter-with-utf8-characters-filter)但我不知道它如何适用于我的情况，因为我没有将内容存储到字符串中，我直接在`UploadedFile`目的：

```
public void onPropertyFileUpload(FileUploadEvent event) {
    log.info("onPropertyFileUpload");
    if (event.getFile() == null) {
        log.warn("Empty file!!!");
        return;
    }
    Properties props = new Properties();
    try {
        props.load(event.getFile().getInputstream());
    } catch (IOException e) {
        log.error(e.getMessage(), e);
        return;
    } 
```

那么，`MultipartRequest`在我的情况下，BalusC 发现的错误是导致此问题的原因，还是其他原因？而且，最重要的是，我能做些什么来避免这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:14:57.130

起初，我查看了[带有 utf8 字符过滤器的 primefaces 文件上传过滤器](https://stackoverflow.com/questions/11190081/primefaces-fileupload-filter-with-utf8-characters-filter)，我认为可能是这种情况，但在分析了 PrimeFaces 代码后，我发现这是完全不同的东西。

该错误实际上在**PrimeFaces**中，但被深深地隐藏了。错误在于它们没有正确转义嵌入在 XML 响应中的文本。我的代码将文件转换为可用于编辑并因此发送给用户的字符串。因为上传的文件是二进制文件，并且 PrimeFaces**没有正确转义**，所以 XML 被破坏了。

因为在Java中实际上没有办法说字符串是正确的（没有解码错误！），我不得不使用我在其他项目中见过几次的代码（至少不应该把它放入**阿帕奇公共语言**？）

```
/**
     * This method ensures that the output String has only
     * valid XML unicode characters as specified by the
     * XML 1.0 standard. For reference, please see
     * <a href="http://www.w3.org/TR/2000/REC-xml-20001006#NT-Char">the
     * standard</a>. This method will return an empty
     * String if the input is null or empty.
     *
     * @param in The String whose non-valid characters we want to remove.
     * @return The in String, stripped of non-valid characters.
     */
    public String stripNonValidXMLCharacters(String in) {
        StringBuffer out = new StringBuffer(); // Used to hold the output.
        char current; // Used to reference the current character.

        if (in == null || ("".equals(in))) return ""; // vacancy test.
        for (int i = 0; i < in.length(); i++) {
            current = in.charAt(i); // NOTE: No IndexOutOfBoundsException caught here; it should not happen.
            if ((current == 0x9) ||
                (current == 0xA) ||
                (current == 0xD) ||
                ((current >= 0x20) && (current <= 0xD7FF)) ||
                ((current >= 0xE000) && (current <= 0xFFFD)) ||
                ((current >= 0x10000) && (current <= 0x10FFFF)))
                out.append(current);
        }
        return out.toString();
    } 
```

解决方案来源：[https ://kr.forums.oracle.com/forums/thread.jspa?threadID=1625928](https://kr.forums.oracle.com/forums/thread.jspa?threadID=1625928)

# eclipse - Eclipse 手表表达式？

> ID：13740156
> 
> 赞同：6
> 
> 时间：2012-12-06T09:03:10.207
> 
> 标签：eclipse, debugging

我希望 Eclipse 调试器在某个表达式变为真（其值更改）时进行观察，并在发生这种情况时停止。在我看来，这似乎非常有用且基本，所以我认为必须有一种方法可以在 eclipse 中执行此操作（如在 gdb 中）。我不想要一个带条件的断点，因为我不知道哪个语句会使表达式为真，而且我不想要一个观察点，因为它只适用于程序中的变量，而不适用于任意表达式。知道如何进行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T17:41:32.603

从我在网上的搜索和我得到的回复来看，我猜 eclipse 不支持这一点。

# ios - iPad 应用程序方向和重新定位问题

> ID：13740160
> 
> 赞同：1
> 
> 时间：2012-12-06T09:04:07.157
> 
> 标签：ios, xcode, ipad, orientation, uimodalpresentationstyle

当我的 UI 流程如下时，我的应用程序中有一个奇怪的错误：

1.  mainViewController 以纵向启动，然后显示一个 LoginViewController，其中 modalPresentationStyle 设置为`UIModalPresentationFullScreen`。

2.  我将 loginViewController 设置为横向模式，输入凭据进行登录（验证用户的方法在 mainViewController 中定义）。

3.  loginViewController 被解除（从 mainViewController）并且一堆按钮被加载到屏幕上以指示它是主屏幕。

现在我的问题是按钮位置看起来好像应用程序处于纵向方向，即使在显示 loginViewController 时应用程序切换到横向。

此外，仅当 modalPresentationStyle 设置为`UIModalPresentationFullScreen`! 当我将其呈现为表单或页面表时，一切正常（但是，我需要将 loginViewController 显示为全屏）。

到目前为止，我已经尝试在 loginViewController 被解除等时手动调用 shouldAutorotate 方法，这解决了问题，但似乎是一种劣质的解决方法而不是修复。

我也尝试从 loginViewController 调用 mainViewController 的 shouldAutorotate 方法，但这并没有改变。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T18:16:15.833

**自动旋转**在 iOS 6 中发生了变化。在 iOS 6 中，`shouldAutorotateToInterfaceOrientation:`UIViewController 的方法已被弃用。取而代之的是，您应该使用`supportedInterfaceOrientations:`and`shouldAutorotate`方法：

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAllButUpsideDown;    
} 
```

**模态**视图控制器在 iOS 6 中不再获得旋转调用：`willRotateToInterfaceOrientation:duration:, willAnimateRotationToInterfaceOrientation:duration:`和`didRotateFromInterfaceOrientation:`方法不再在任何对其自身进行全屏演示的视图控制器上调用——例如那些被调用的视图控制器：`presentViewController:animated:completion:`。

[这个答案将进一步解释 iOS 6 中的旋转变化](https://stackoverflow.com/questions/12554204/ios-6-rotation-issue-no-rotation-from-presented-modal-view-controller/12555205#12555205)

* * *

[编辑] 完全不同的方式是注册轮换事件。优点是所有对象都可以为此注册，而不仅仅是`UIViewController`. 这通常在视图加载时完成，并在视图消失时停止（在此处放入 dealloc）。当方向改变时调用选择器中的方法（这里是`orientationChanged:`）：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Start generating device rotations and register for them
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(orientationChanged:) name:UIDeviceOrientationDidChangeNotification object:nil];
}

- (void)dealloc {
    // Deregister and stop generating device rotations
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[UIDevice currentDevice] endGeneratingDeviceOrientationNotifications];
    [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:52:35.670

```
check this out.... may be this'll help...

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
     return (interfaceOrientation == UIInterfaceOrientationPortrait |interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown| interfaceOrientation == UIInterfaceOrientationLandscapeLeft | interfaceOrientation == UIInterfaceOrientationLandscapeRight);

}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationPortrait | UIInterfaceOrientationPortraitUpsideDown | UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationLandscapeRight;
}

- (BOOL) shouldAutorotate
{
    return YES;
} 
```

# ruby-on-rails - ruby 装饰器和类 eval 有什么区别？

> ID：13740163
> 
> 赞同：4
> 
> 时间：2012-12-06T09:04:13.280
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

嘿，我目前正在做一个整合 Spree 和 Refinery 的项目。Spree 建议使用他们所谓的装饰器完成许多修改：

```
Refinery::Page.class_eval do

  def autocomplete_label
    title
  end

  attr_accessible :spree_taxon_id
  has_one :spree_taxon

end 
```

这工作正常。但是直接打开类和直接添加方法有什么区别呢？

```
class Refinery::Page

  def autocomplete_label
    title
  end

  attr_accessible :spree_taxon_id
  has_one :spree_taxon

end 
```

我可以理解，当类直到运行时才知道时，可以使用第一个（这个用例不需要）。还有其他区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T13:01:56.230

我能想到的唯一区别是第一个版本将导致它[自动加载](http://www.rubyinside.com/ruby-techniques-revealed-autoload-1652.html)现有的 Page 类，然后在加载后添加您的代码。如果该类尚未加载，而您使用第二个版本，它可能会干扰 Spree 和 Refinery 所期望的自动加载行为，并且该类可能无法正确加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T13:08:51.143

如果您使用 Spree 建议的类装饰器模式，那么您的更改将通过 Gem 的升级而生效。如果您选择将您的方法直接添加到类定义中，那么在您更新 gem 时它们将丢失。

# javascript - d3.js 转换（）在浏览器最小化时不起作用

> ID：13740164
> 
> 赞同：10
> 
> 时间：2012-12-06T09:04:17.570
> 
> 标签：javascript, d3.js

我用来在新数据进入时移动*svg*元素位置的***transition()***选择在打开浏览器窗口时完美运行，但是当我打开另一个选项卡或最小化窗口时，***transition()****函数将svg*元素堆积在顶部彼此的。当我打开窗口时，我看到*svg*元素堆叠在一起。

 *****然而，***exit()***选择移出屏幕。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T17:17:07.547

D3[使用 requestAnimationFrame](https://twitter.com/mbostock/status/45556964415119361)来实现流畅高效的绘制。这是有关该主题的[更多信息。](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

许多人遇到的基本问题是，当窗口/选项卡在后台时，页面渲染“进入睡眠模式”并且没有提供“动画帧”，即浏览器将停止绘制。

[您可以通过使用浏览器可见性 API](http://dvcs.w3.org/hg/webperf/raw-file/tip/specs/PageVisibility/Overview.html)来控制您的绘图（例如，当页面再次可见时对图表进行**完整更新**）来解决该“问题” 。有关示例，请参阅[相关的 MDN 页面](https://developer.mozilla.org/en-US/docs/DOM/Using_the_Page_Visibility_API)。*****

# tags - git-svn：自动导入/创建 svn 版本作为 git 标签

> ID：13740165
> 
> 赞同：3
> 
> 时间：2012-12-06T09:04:26.603
> 
> 标签：tags, automation, git-svn

我正在使用 git-svn 来处理 svn 存储库。git`master`分支正在镜像 svn`trunk`分支（唯一使用的 svn 分支），即主分支和主干分支上的元素之间存在一对一的关系。

我想拥有与 svn 修订版相对应的 git 标签，这样我就可以做一些事情，例如`git diff r123 workbranch`查看与 svn 修订版 123 相比我所做的事情。

当我这样做时，修订没有被标记`git svn rebase`，所以我创建了以下我在 svn rebase 后运行的脚本：

```
#!/usr/bin/perl 

use strict;
use warnings;

open(PIPE, "git log master |");
# Format for the pipe output:
# ...
# commit 6b24b8fdc6a25d35b01140dc1ac054697133423d
# ...
#      git-svn-id: https://server.example.com/svn/project/trunk@594 164096ca-3471-41d1-a9ce-9541462a8c31
# ...
my $commit = "";
my $i = 0;
foreach my $line (<PIPE>) {
    if ($line =~ /^commit ([\da-f]+)/) {
        $commit = $1;
        next;
    }
    next unless $line =~ /^\s+git-svn-id: .*\/trunk\@(\d+) /;
    my $git_svn_id = $1;
    run("git", "tag", "-f", "r$git_svn_id", $commit);
    last if $i++ == 20;
}
close(PIPE);

sub run {
    print join(' ', @_), "\n";
    return system(@_);
} 
```

这个脚本完成了工作，但是我每次都必须手动运行它，并且我（任意）在检查最后 21 个修订时对其进行了限制，因此理论上存在遗漏一些的风险（但我会从印刷中看到） .

问题：有什么方法可以自动化这个，这样我就可以运行`git svn rebase`并且所有导入的修订都将在 git 中标记？我可以使用任何[挂钩吗？](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

PS 是的，我知道 svn find-rev，但我绝对不想编写复杂的命令，`git diff $(git svn find-rev r123) $(git svn find-rev r124)`而不仅仅是`git diff r123 r124`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T00:29:40.583

这是一个疯狂的想法：陷阱`bash`命令并自动`r1234`用 SHA 哈希替换任何字符串：

```
shopt -s extdebug

enhance_rev_parse () {
    [ -n "$COMP_LINE" ] && return  # do nothing if completing
    case "$BASH_COMMAND" in
    *r[0-9]*)
        eval $(echo "$BASH_COMMAND" | sed -e 's/r[0-9][0-9]*/$(git svn find-rev &)/g')
        return 1
        ;;
    esac
}

trap 'enhance_rev_parse' DEBUG 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T22:49:54.023

### 简答和注意事项

没有办法挂钩`git svn rebase`我知道（或`git svn dcommit`）的命令。

你*可以*做的是使用`post-rebase`钩子。但是，只有在 rebase 实际更新历史记录时才会调用它——如果您运行`git svn rebase`并且没有影响当前 Git 分支的新 SVN 提交，则不会发生任何更改。

### 确保您使用过`--stdlayout`

关于在单个命令中为 SVN 标签创建 Git 标签，如果您最初没有克隆存储库...

`git svn clone --stdlayout`

我建议您重新克隆存储库。这将使您的生活更轻松。

### 告诉 Git*新的*SVN 标签

要告诉 Git 新的 SVN 标签和分支，请使用命令`git svn fetch --all`. 该命令`git svn rebase --fetch-all`也执行此操作。

### 自动`git tag`所有 SVN 标签

为了将这些新获取的 SVN 标签转换为 Git 标签，一种方法是遍历引用。

```
#!/bin/sh
git svn fetch --all &&
git for-each-ref refs/remotes/origin/tags |
while read ref
do
  tagName=$(echo $ref | cut --delimiter / --fields=5)
  git tag -f "$tagName" "refs/remotes/origin/tags/$ref"
done 
```

将此文件作为`.git/hooks/post-rebase`.

# asp.net - 从asp.net中的多个Listbox中选择多个列表项

> ID：13740168
> 
> 赞同：1
> 
> 时间：2012-12-06T09:04:51.690
> 
> 标签：asp.net

我的 asp 页面中有动态列表框。我需要从下面的每个列表框中选择项目。所选项目

```
[Date].[Calendar Date].[Calendar Year].&[2002] from one list box

[Date].[Calendar Date].[Calendar Semester].&[2002]&[2] from another list box

[Date].[Calendar Date].[Calendar Quarter].&[2001]&[4] from another etc.... 
```

我需要携带以上选定的物品如下

```
FROM ( SELECT { 
[Date].[Calendar Date].[Calendar Year].&[2002]
} ON COLUMNS 
FROM ( SELECT { 
[Date].[Calendar Date].[Calendar Semester].&[2002]&[2]
} ON COLUMNS 
FROM ( SELECT { 
[Date].[Calendar Date].[Calendar Quarter].&[2001]&[4]
} ON COLUMNS 
```

下面的代码我曾经这样做但没有运气:)

```
 protected void imgRunReport_Click(object sender, ImageClickEventArgs e)
{
Panel tt = Cache["tt"] as Panel;
string mdxqry;
isRefresh = true;
string Cubename = ddlCubeList.SelectedItem.Value;

Dictionary<string, string> selectedfil = new Dictionary<string, string>();
foreach (ListBox ctl in tt.Controls.OfType<ListBox>())
{
string strSelectedFilters = string.Empty;
selectedfil.Remove(ctl.Text);

foreach (ListItem li in ctl.Items)
{

if (li.Selected)
selectedfil.Add(li.Text, li.Value);

}
strSelectedFilters = "FROM ( SELECT { " + string.Join("," , new List<string>(selectedfil.Values).ToArray()) + "}" + " ON COLUMNS ";

}

}

Remember: these values comes from dynamic listboxes 
```

提前致谢

# sql-server-2008 - sql server 2008 中带双引号的 CSV 文件

> ID：13740172
> 
> 赞同：0
> 
> 时间：2012-12-06T09:05:18.467
> 
> 标签：sql-server-2008

我有 4GB 文件并尝试使用以下脚本将数据加载到表中。它引发了以下错误。请提出可能的原因。

文件大小：4GB 文件中的列数：329

表有 329 列，每列都有 varchar(1000)。

```
BULK
INSERT npi_db
FROM 'c:\data_20050523-20121008.csv'
WITH
(
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n'
) 
```

但我得到：

```
The bulk load failed. The column is too long in the data file for row 1, 
column 329\. Verify that the field terminator and row terminator are specified correctly. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:12:24.670

您似乎没有将数据拉入现有表（是`npi_db`数据库还是表？）。我建议您首先创建一个与 .csv 格式相同的有效表格。这将避免您遇到的问题，这似乎是批量插入不知道 .csv 值被拉入的数据类型。首先创建正确的表

```
CREATE TABLE CSVTest
(ID INT,
FirstName VARCHAR(40),
LastName VARCHAR(40),
BirthDate SMALLDATETIME);
GO 
```

导入**表**如下

```
BULK
INSERT inventory.dbo.fruits
FROM 'C:\fruit\inventory.txt' 
WITH
(
    FIELDTERMINATOR = ',',
    ROWTERMINATOR = '\n'
);
GO 
```

您还可以查看使用 SQL Server 的[BCP](http://msdn.microsoft.com/en-us/library/aa174646(v=sql.80).aspx)加载文件。使用此实用程序，您可以使用[格式文件 (.fmt)](http://msdn.microsoft.com/en-us/library/ms191516.aspx)指定数据的格式。

有关您想要的更多信息，请参阅[使用 bcp 将 csv 文件导入 sql 2005 或 2008 ...](https://stackoverflow.com/questions/924733/use-bcp-to-import-csv-file-to-sql-2005-or-2008)

我希望这有帮助。

# java - 小尺寸,高分辨率图像

> ID：13740179
> 
> 赞同：4
> 
> 时间：2012-12-06T09:05:43.267
> 
> 标签：java, android, image, image-resizing

我创建了一个名为它的应用程序（应用程序 A），它需要在 res 可绘制文件夹中存储大量高分辨率图像，（我知道我可以远程下载，但我需要将其保存在可绘制 res 文件夹中），它：

**数码相机拍摄的 3000 x 4000 JPEG 图像**，因为这将导致无法接受的应用程序大小增加，并导致在设备上运行时内存异常增加，所以我们可以创建另一个名为
(app B) 的应用程序，仅用于调整图像大小，将**选择**将存储在 SD 上的这些图像（仅用于调整大小），然后将其**调整**为较小尺寸的图像，但**不会损失图像质量并保持高图像分辨率** ，然后 以 PNG 或 JPEG 格式**再次将其保存到 SD** ，所以然后我可以从 SD 卡中获取图像，然后将其保存到（应用程序 A）资源文件并使用它，具有合理的大小和高分辨率，

希望是否有人可以提供解释该内容的**教程**或**链接**或应用此内容的**完整代码答案，**

注意：我尝试使用计算机软件作为：photoshop 或格式工厂，但都影响分辨率。

您的帮助将不胜感激和感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T01:12:34.273

这最好使用图像平铺来解决。你把你的图像分成许多较小的“图块”，比如 500x500 像素，然后放在一个网格上 - 选择你最喜欢的布局。对于放大渲染，只会绘制那些在屏幕上的图块。

这是更多详细信息的参考：[How to tile and scroll a large image (10000x10000) in android](https://stackoverflow.com/questions/4678331/how-to-tile-and-scroll-a-large-image-10000x10000-in-android)

要拆分图像，请按照此处的说明进行操作：[Android - Split Drawable](https://stackoverflow.com/questions/4754985/android-split-drawable)

对于真正平滑的行为，您还可以从原始图像创建一个缩小的图像，并在缩小网格时使用缩小的图块。当用户放大时切换回原始分辨率。

**编辑**

> 我的目标是我有 3000*4000 分辨率的大图片我想将其转换为更小的尺寸但保持相同的分辨率

有几个概念要记住：

1.  *图片*的原始分辨率（在您的情况下为 3000x4000 像素）
2.  *显示器*的分辨率。例如，Nexus 4 的显示屏为 768x1,280 像素。显示器有一个重要的属性：DPI 或每英寸点数。这是物理屏幕上 1 英寸（25.4 毫米）的像素数。iPhone 上 Apple 的“视网膜”显示屏的 DPI 为 326——这是清晰度的基准；此屏幕上的像素太小，人眼无法在典型的握持距离下单独/清晰地看到。老式单调 LCD 显示器的 DPI 在 30-60 范围内 - 您可以轻松看到单个像素的方形。
3.  要在显示器上显示的图片部分 -*视口*。有两种不同的极端：

    1.  **缩小**：您希望在显示屏上显示完整的图片。在您的情况下，图片的像素比显示器多（显示器的*物理*限制是没有足够的像素以原始分辨率显示原始图片），因此显示器上的一个像素将从图片，平均颜色和亮度，或
    2.  **自然分辨率**：自然分辨率是原始图像中的一个像素精确地显示在屏幕上的一个像素上。在您的情况下，您只能看到大约四分之一的图像。这种缩放具有最大的*清晰度*，但图像的某些细节可能太小而无法看到，因为眼睛实际上无法看到各个显示像素。
    3.  **放大**：您希望在显示器上显示图片的更小部分，其中图片的原始像素实际上比显示器大。在这里，图片中的一个像素将显示在显示器上的几个或多个像素上。

现在，Android 图像库将提供帮助。当您在显示器上渲染图像时，库将缩放图片以“适合”显示器上的像素 - 您的实际图片将保持不变。

我希望通过这种新语言，您可以看到基本限制，从而决定如何进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:19:53.023

使用[BitmapFactory.Options.inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)读取二次采样位图。

```
BitmapFactory.Options opts = new BitmapFactory.Options();
opts.inSampleSize = 2;
Bitmap bitmap = BitmapFactory.decodeFile(pathName, opts); 
```

并使用 Bitmap.compress() 将位图保存到 sdcard。

编辑：如果你仍然想保持分辨率，你可以尝试设置`BitmapFactory.Options.inPreferredConfig = Bitmap.Config.RGB_565;`解码位图，这可以减少一半的内存成本，因为大多数默认配置是 RGB_8888。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T11:26:24.180

基本上有 3 种方法可以减小图像的大小：

*   减少它的大小和/或质量（例如通过减少像素的数量，或每个像素的大小）——Jpeg 做的事情与此非常相似。
*   压缩文件——这是 GIF 和 PNG 所做的。
*   使用矢量图形。

由于您正在谈论进一步压缩数码相机 jpeg 图像，因此您无法在不损失更多质量的情况下进一步缩小图像本身（JPEG 已经降低了质量并压缩了文件，这就是为什么它是最常用的类型网络）。任何在不进一步降低质量的情况下压缩文件的尝试都不会给你太多的理由（尽管你可以尝试几种不同的压缩方案，而且你很少有机会找到正确的方案来获得一些实质性的减少）。

从理论上讲，如果您可以将所有图像一起添加到单个图像中，并将其压缩为单个图像，那么您可能会获得一些基础，但是在谈论这样的尺寸时，您不太可能能够处理这样的一个巨大的文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T11:41:41.607

正如你所说，你已经尝试了 Photoshop 并获得了关于分辨率的不可接受的结果，

**仅在 Photoshop CS 和 CS2 中发现了一个简单的技巧**：

```
When you want to reduce an image go to the Image> Image Size menu. Click on 
Resample Image and choose Bicubic Sharper from the drop-down menu. This is the 
best setting for making sure that an image doesn't blur. The example photo of the
flower started at 2,000 pixels across. I stepped it down to 250, and then again 
to 125 with almost no loss of sharpness. 
```

另一件事要记住

```
when resizing is to try to do it only once on an image.
Many people will resize repeatedly as they search for the perfect fit for 
a design element, and then end up with an image with a lot of blur. It's always
better to experiment on a duplicate of the image. Then, when you've settled on 
the final dimensions, you can go back to the original and resize it just once. 
```

我已经亲自尝试过，并且得到了很好的小尺寸图像分辨率。

改编自此链接：[http ://www.photoshopsupport.com/tutorials/jennifer/bicubic.html](http://www.photoshopsupport.com/tutorials/jennifer/bicubic.html)

希望那有帮助。

# javascript - D3线路径更新动画不流畅

> ID：13740182
> 
> 赞同：3
> 
> 时间：2012-12-06T09:05:49.647
> 
> 标签：javascript, jquery, d3.js

我有一个由我试图根据用户输入更新的区域、线条和圆圈组成的图表，我已经开始工作了，但是当从较低的数据量转换到较高的数据量时，比如从`[4,2,3,4,5]`到`[2,4,3,1,5,8,6]`，线条动画他们当前的路径到他们的新位置，但是偏移量只是被捕捉到位，对于添加到路径的任何新值都没有动画。

我想要它做的是从当前线路径到新线路径的动画，平滑过渡，以便新值不会只是卡入到位，无论数据数量如何。

另外，在旁注中，图形宽度在更新时不断变化，我希望它延伸到 svg 的整个宽度，无论存在多少数据，我怎么能做到这一点？

这是我迄今为止所拥有的小提琴[http://jsfiddle.net/znmBy/](http://jsfiddle.net/znmBy/)。

我希望我足够清楚，我是 D3 的新手，所以我对术语有点不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:29:45.277

您描述的问题有点复杂，因为在 D3 中您首先必须在**固定位置**添加一个对象，然后您可以将其从原始位置设置为动画到另一个位置。

在您的示例中，我将根据先前的值计算新的（中间）初始位置，然后使用实际的最终值再次更新图表。这将创建一个从开始到最终位置的漂亮路径动画：

```
 updateGraph([
            [...].concat(computeLatestIntermediates()),
            [...].concat(getLatestTimes())
          ]);

    updateGraph([
            [...].concat(getRealValues()),
            [...].concat(getLatestTimes())
          ]); 
```

或者，您可以将初始值设置为`0`。这将创建一个从底部到目标值的漂亮动画：

```
 updateGraph([
            [..., 0, 0, 0, 0],
            [...,10,12,13,14]
          ]);

    updateGraph([
            [..., 234, 245, 210, 170],
            [...,  10,  12,  13,  14]
          ]); 
```

顺便说一句：为折线图制作动画时，您通常还会遇到其他几个问题。其中一些包含在 Mike 的[路径动画页面上](http://bost.ocks.org/mike/path/)。[这里](https://stackoverflow.com/questions/13133499/issues-with-generating-real-time-line-graphs)还有一个相关的问题。

**编辑**（更智能的解决方案）：

您可以在绘图函数中实现这个两步绘图，而不是调用两次更新函数，如下所示：

```
function getPathData(d,i)        { return "M 0,0 ... L n,n"; }
function getInitalTransform(d,i) { return "translate(...)";  }
function getFinalTransform(d,i)  { return "translate(...)";  }

path
    .attr("d", getPathData)
    .attr("transform", getInitalTransform)
  .transition()
    .ease("linear")
    .attr("transform", getFinalTransform); 
```

# c# - 标签滚动效果

> ID：13740183
> 
> 赞同：4
> 
> 时间：2012-12-06T09:06:02.813
> 
> 标签：c#, winforms, scroll, label

我使用一个标签，其中从文本框中输入的文本显示在该标签中。现在，我想让标签文本滚动。我通过互联网环顾四周，并尝试将其写入标签内的代码中：

```
private void label1_Click(object sender, EventArgs e)
{
    int Scroll;
    string strString = "This is scrollable text...This is scrollable text...This is scrollable text";

    Scroll = Scroll + 1;
    int iLmt = strString.Length - Scroll;
    if (iLmt < 20)
    {
        Scroll = 0;
    }
    string str = strString.Substring(Scroll, 20);
    label1.Text = str;
} 
```

有人看到我做错了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-11T17:32:41.457

//容易得多：

```
private void timer2scroll_Tick(object sender, EventArgs e)
{
  label10Info.Text = label10Info.Text.Substring(1, label10Info.Text.Length - 1) + label10Info.Text.Substring(0,1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T09:18:32.210

您需要在函数调用之外声明 Scroll 变量，每次单击它时都会重置它。

这里是表单加载上带有计时器的代码以自动滚动文本：

```
private Timer tmr;
private int scrll { get; set; }

void Form1_Load(object sender, EventArgs e)
{
    tmr = new Timer();
    tmr.Tick += new EventHandler(this.TimerTick);
    tmr.Interval = 200;
    tmr.Start();
}

private void TimerTick(object sender, EventArgs e)
{
    ScrollLabel();
}

private void ScrollLabel()
{
    string strString = "This is scrollable text...This is scrollable text...This is scrollable text";

    scrll = scrll + 1;
    int iLmt = strString.Length - scrll;
    if (iLmt < 20)
    {
        scrll = 0;
    }
    string str = strString.Substring(scrll, 20);
    label1.Text = str;
}

private void label1_Click(object sender, EventArgs e)
{
    ScrollLabel();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T22:55:17.413

这可以使用我的库。

> **WinForm 动画库 [.Net3.5+]**
> 
> 一个简单的库，用于在 .Net WinForm（.Net 3.5 及更高版本）中为控件/值设置动画。基于关键帧（路径）且完全可定制。

[https://falahati.github.io/WinFormAnimation/](https://falahati.github.io/WinFormAnimation/)

```
 var textToScroll = "Lorem Ipsum is simply dummy text of the printing and typesetting industry.";
    var durationOfAnimation = 5000ul;
    var maxLabelChars = 20;
    var label = label1;

    new Animator(new Path(0, 100, durationOfAnimation))
    {
        Repeat = true,
        ReverseRepeat = true
    }.Play(
        new SafeInvoker<float>(f =>
        {
            label.Text =
                textToScroll.Substring(
                    (int) Math.Max(Math.Ceiling((textToScroll.Length - maxLabelChars)/100f * f) - 1, 0),
                    maxLabelChars);
        }, label)); 
```

# jsp - 如何使用 JSP 在复选框中动态包含值？

> ID：13740185
> 
> 赞同：2
> 
> 时间：2012-12-06T09:06:04.747
> 
> 标签：jsp, jdbc

我创建了一张桌子。其中的值将从数据库中动态创建。我在最后一列添加了一个复选框。Now what I like to know is that, when the checkbox is selected that particular row alone want to be stored in new database, so according to how much checkbox is selected that much row should be added in the database. 谁能帮我这个？
提前致谢...

我的代码：

```
<%@ page import="java.sql.*" %> 
<%
    String connectionURL = "";
    Connection connection = null;
    Statement statement = null;
    ResultSet rs = null;
    int f=0;
%>

<html>
    <head>
        <title>csepoff</title>
    </head>

    <body>
        <form name="cse" action="csepoffcheck1.jsp">
        <%
            Class.forName("com.mysql.jdbc.Driver").newInstance ();
            connection = DriverManager.getConnection(connectionURL,"root","tajmahalss");
            statement = connection.createStatement();
            String[] batchcse=request.getParameterValues("batchcse");
            String batchhcse="";
            String data="";
            String data1="";
            String data2="";

            for(int i=0; i<batchcse.length; i++) {
                batchhcse+=batchcse[i]+" ";
            }

            rs=statement.executeQuery("select * from signup where batch='"+batchhcse+"'");

            out.println("<table border='1'><tr>");
            out.println("<th>NAME</th><th>DEPARTMENT</th><th>BATCH</th>");
            out.println("<th>FATHER NAME</th><th>MOTHER NAME</th><th>SELECT</th>");

            while(rs.next()){
                out.println("<tr>");
                out.println("<td>"+rs.getString("name")+"</td>");
                out.println("<td>"+rs.getString("depart")+"</td>");
                out.println("<td>"+rs.getString("batch")+"</td>");
                out.println("<td>"+rs.getString("fname")+"</td>");
                    out.println("<td>"+rs.getString("mname")+"</td>");
                out.println("<td><input type=\"checkbox\" name=\"checkbox\" value=\"${}\"></td>");
                out.println("</tr>");
            }
            out.println("</table>");
        %>
            <input type="submit" value="SUBMIT">
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T08:36:21.197

One thing, do not write java code in JSP at all. JSPs are meant for representation only. Still as answer to this question you can follow this.

You can set the value of checkbox as `rs.getString("id")` where `id` is the primary key of the row in the table.

After you submit the form you can retrieve che checkbox values as

```
String[] cbValues =  request.getParameterValues("checkBoxNameAsInHtmlForm"); 
```

and using its `cbValues.length`, you can know how many records need to be created in the database.

Also instead of writing `out.println()` statements, you should write.

```
<form name="cse" action="csepoffcheck1.jsp">
        <table border='1'>
            <th>NAME</th>
            <th>Select</th>
            <%
                while (rs.next()) {
            %>
            <td><%=rs.getString("name")%></td>
            <td><input type="checkbox" name="checkbox"
                value="<%=rs.getString("id")%>"></td>

            <%
                }
            %>
        </table>

    </form> 
```

Well this is not also the good way because it breaks the purpose of MVC architecture.Just for current situation, do this.

Next time follow the MVC pattern and do not write java code in jsp at all. Its a very bad thing.

# asterisk - 星号上下文 - 多个开始和结束

> ID：13740187
> 
> 赞同：1
> 
> 时间：2012-12-06T09:06:18.943
> 
> 标签：asterisk

我试图让不同的扩展名拥有它自己的挂断 agi 文件，我已经设法让它加载它自己的启动 agi 文件，但是当挂断时，它使用的是第一个初始文件。

请帮我纠正我的上下文，提前谢谢！

```
[check]
exten => _3939X.,1,AGI(start.php)
exten => h,1,AGI(END.php)

exten => _5858X.,1,AGI(58start.php)
exten => h,1,AGI(58end.php) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T17:19:47.060

`h`每个`[..]`块只能有一个。我认为你可以在这里做两件事。您可以为每个扩展创建不同的块，这样它们就可以拥有自己的`h`扩展。所以也许是这样的：

```
[check]
exten => _3939X.,1,Goto(3939,s,1)
exten => _5858X.,1,Goto(5858,s,1)

[3939]
exten => s,1,AGI(start.php)
exten => h,1,AGI(39end.php)

[5858]
exten => s,1,AGI(start.php)
exten => h,1,AGI(58end.php) 
```

或者使用单个`end.php`脚本并传递一个附加参数来告诉脚本要做什么。这样，您可以在脚本中捕获 EXT 参数，然后根据变量的内容决定要采取的操作。

```
[check]
exten => _3939X.,1,Set(EXT=3939)
exten => _3939X.,2,AGI(start.php)

exten => _5858X.,1,Set(EXT=5858)
exten => _5858X.,2,AGI(58start.php)

exten => h,1,AGI(end.php|${EXT}) 
```

# .htaccess - htaccess 规则索引到文件夹

> ID：13740193
> 
> 赞同：0
> 
> 时间：2012-12-06T09:07:09.350
> 
> 标签：.htaccess, rule

有谁知道如何编写正确的 .htaccess 规则

当有人键入 www.mydomain.com 以将访问者重定向到特定文件夹 www.mydomain.com/foldername

```
Options +FollowSymlinks
RewriteEngine On
...what to write then.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:10:43.113

你可以在没有 mod_rewrite 的情况下实现这一点。您可以使用[重定向](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect)指令：

```
Redirect / /foldername 
```

请注意，如果您使用的 Apache 版本早于 2.2.6，则无法使用相对 URL，您需要使用与您的站点相同的域中的完整 URL：

```
Redirect / http://www.mydomain.com/foldername 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:51:56.753

这就是我的诀窍..

首先..

htaccess 文件中没有其他规则。

```
RedirectMatch permanent ^/$ http://wwww.mydomain.com/folder/ 
```

# c# - MVC 3 中的文件上传始终为空

> ID：13740196
> 
> 赞同：7
> 
> 时间：2012-12-06T09:07:10.547
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我想创建一个表单，用户可以在其中编辑个人资料并上传图片，如果他们愿意，这是我的视图

//表单字符串`@using(Html.BeginForm("EditProfile","Employee",FormMethod.Post, new { enctype = "multipart/form-data " }))`

//输入HTML `<input type="file" name="file" id="file"/>`

//提交`<input type="submit" name="SubmitBtn" value="SaveProfile" /> <input type="submit" name="SubmitBtn" value="Cancel" />`

现在我的控制器

```
 //Profile Modification
    [Authorize]
    [HttpPost]
    public ActionResult EditProfile(employer model, string SubmitBtn,HttpFileCollection file)
    {
        switch (SubmitBtn)
        {
            case "SaveProfile":
                try
                {
                    if (ModelState.IsValid)
                    {
                          //the file is always null
                        if (file != null)
                        {
                             //Function I want to Apply on file
                             model.logoname = logouploded(file);  
                            return RedirectToAction("Profile", "Employer");
                        }
                        return RedirectToAction("EditProfile");
                    }
                    //ChangeEmployeeProfile(model);

                }
                catch (Exception ex)
                {
                    ViewBag.warn = ex.Message;
                    return View(model);
                }
                break;
            case "Cancel":
                return RedirectToAction("index");
        }
        return View(model);
    } 
```

现在无论我上传什么文件，文件总是为空，我也尝试将 HttpFileCollectionBase 作为操作函数中的参数，但文件仍然为空

只是提到员工模型只包含图像文件名，因为我只想将图像名称保存在数据库中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T09:13:01.943

将 HttpFileCollection 类型更改为[HttpPostedFileBase](http://msdn.microsoft.com/en-us/library/system.web.httppostedfilebase.aspx)。

# c# - 外键关系，相关对象未正确存储在 DbContext 中？

> ID：13740198
> 
> 赞同：0
> 
> 时间：2012-12-06T09:07:16.693
> 
> 标签：c#, wpf, wcf, entity-framework

尽管我对 .NET 堆栈完全陌生，但我还是设法开发了一个涉及以下技术的小型 N 层应用程序：

WPF -> WCF -> 实体框架 -> SQL Server

我的疑问主要是关于实体框架如何管理导航属性的分配。我将把我的数据合同代码放在一起，让球滚起来......

```
[DataContract]
public class Problem
{
    [DataMember]
    public int ProblemId { get; set; }

    [DataMember]
    public String Title { get; set; }

    [DataMember]
    public String Description { get; set; }

    [DataMember]
    public int WorkerId { get; set; }

    [DataMember]
    public int WorkId { get; set; }

    [DataMember]
    [ForeignKey("WorkerId")]        
    public virtual Worker Worker { get; set; }

    [DataMember]
    [ForeignKey("WorkId")]        
    public virtual Work Work { get; set; }
}

[DataContract]
public class Worker
{
    [DataMember]
    public int WorkerId { get; set; }

    [DataMember]
    public String Name { get; set; }    

    [DataMember] 
    public virtual ICollection<Problem> Problems { get; set; }        
}

[DataContract]
public class Work
{
    [DataMember]
    public int WorkId { get; set; }

    [DataMember]
    public String Name { get; set; }      

    [DataMember] 
    public virtual ICollection<Problem> Problems { get; set; }
} 
```

在我的 Seed 方法中，我正在执行以下操作：

```
Work Work1 = new Work()
                                {
                                    WorkId = 1,
                                    Name = "Work1"
                                };

        Worker emp1 = new Worker()
                                {
                                    WorkerId = 1,
                                    Name = "Worker1"
                                };

        Problem Problem1 = new Problem()
                            {
                                ...
                                WorkId = 1,
                                WorkerId = 1
                            };

        Problem Problem2 = new Problem()
                              {
                                  ...
                                  Work = Work1,
                                  Worker = emp1
                              };

        //add objects to the context
        context.Works.Add(Work1);
        context.Workers.Add(emp1);
        context.Problems.Add(Problem1);
        context.Problems.Add(Problem2);

        //added just for testing
        Problem1.Work = Work1;
        Problem1.Worker = emp1;

        //finally: save changes           
        context.SaveChanges(); 
```

关键是：在处理上下文并进行如下查询后：context.Problems.ToList() ...问题1和问题2都将其导航属性（Worker，Work）分配给Null。WorkerId 和 WorkId 被存储，但问题实体中没有它的相关对象。

我错过了什么吗？

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:11:52.260

是的，你需要做

```
context.Problems.Include(p=>p.Work).ToList() 
```

为了在新上下文下重新加载子项时填充子项。

# c# - 从视频文件或网络摄像头使用 kinect 面部跟踪

> ID：13740199
> 
> 赞同：0
> 
> 时间：2012-12-06T09:07:20.507
> 
> 标签：c#, c++, tracking, kinect, kinect-sdk

我想在不使用 Kinect 传感器的情况下使用 Kinect 面部跟踪 SDK，而不是使用 Kinect 传感器，我想使用我的网络摄像头或录制的视频文件。

我该怎么做（C#/C++）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:29:30.093

Kinect for Windows Developer Toolkit 中提供的面部跟踪示例使用来自深度摄像头的数据来准确识别和跟踪面部特征。您将无法将代码用于网络摄像头或视频文件。

该代码可从 Kinect for Windows Developer Toolkit 中获得以进行剖析。您当然可以将其分开并将其用作开发您自己的跟踪器的灵感。

如果您想使用网络摄像头进行跟踪，我建议您在 Internet 上查看许多可用示例。这是一个快速的谷歌搜索：[面部跟踪网络摄像头](https://www.google.com/search?q=face%20tracking%20web%20camera&aq=0&oq=face%20tracking%20from%20web%20ca&aqs=chrome.1.57j0j60j61.9074&sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8)。

# javascript - Highcharts - HTML 工具提示和数据标签呈现问题

> ID：13740200
> 
> 赞同：7
> 
> 时间：2012-12-06T09:07:42.060
> 
> 标签：javascript, css, tooltip, highcharts

这是我的问题，当您为数据标签设置 useHTML: true 时，标签文本似乎会覆盖工具提示背景。

您可以在这个简单的小提琴中看到行为：[条形图](http://jsfiddle.net/alapenna/Rbaqw/34/)

尝试在鼠标上方显示工具提示，您将在工具提示背景中看到数据标签的文本。

是否可以在数据标签上设置 z-index？

我试图在工具提示定义中添加它但没有成功：

```
style : {
    color: 'black',
    'z-index': 0
    }, 
```

我还尝试为数据标签和工具提示设置跨度类，然后将 z-index 添加到这些类的 css 属性中，但它仍然无法正常工作。

编辑：当我仍在寻找解决问题的方法时，有人可以指出将类添加到图表的条形（或数据标签）的方法吗？我的目标是在此类上调用特定的 onclick 事件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T12:00:54.617

好的，这是我的问题的解决方法......这个想法是创建您自己的自定义工具提示。

Highcharts 论坛上给出了解决方案：[Highcharts 论坛帖子](http://highslide.com/forum/viewtopic.php?t=22633)

为此，请在数据标签和工具提示上设置“useHTML”属性，删除工具提示的一些默认属性并在格式化程序函数中设置 CSS 类：

```
//JS
datalabels: {
    ...
    useHTML: true,
    formatter: function() {
        return ("<span class='datalabel'>" + this.y + "</span>");
    }
}

tooltip: {
    ...
    borderWidth:0,
    borderRadius:0,
    shadow:false,
    useHTML: true,
    formatter: function() {
        return ("<div class='tooltip'>" + this.y + "</div>");
    }
} 
```

最后一步（最重要的一步）是为 highcharts-tooltip span 类设置 CSS 规则（Highcharts 使用它来呈现 HTML 工具提示）。

```
//CSS
.highcharts-tooltip span {
    background-color:white;
    z-index:9999!important;  
} 
```

请注意 z-index 属性，该属性将允许工具提示在数据标签上呈现。

现在，您可以通过为“工具提示”类设置 CSS 规则来自定义工具提示。

有关完整的实时示例，请参阅此处的 jsfiddle：[自定义工具提示](http://jsfiddle.net/alapenna/Rbaqw/53/)

注意：为了使该解决方案有效，不必在格式化程序中指定 datalabel 类，我只需要在其上注册特定的鼠标事件即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-09-14T18:06:59.293

6 年后，与 HC v6.1.1 一起，添加了一个新的工具提示选项，解决了这个问题。请参阅[tooltip.outside](https://api.highcharts.com/highcharts/tooltip.outside)

```
datalabels: {
    useHTML: true,
    formatter: function() {
        return ("<span class='datalabel'>" + this.y + "</span>");
    }
},

tooltip: {
    outside: true
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T10:33:34.543

检查[http://api.highcharts.com/highcharts#tooltip.backgroundColor](http://api.highcharts.com/highcharts#tooltip.backgroundColor)工具提示背景颜色。

[在highslide 论坛上](http://highslide.com/forum/viewtopic.php?f=9&t=20996)用这个属性解决了同样的问题

# android - 如何使用sqlite浏览器在eclipse中同步数据库

> ID：13740206
> 
> 赞同：0
> 
> 时间：2012-12-06T09:07:59.640
> 
> 标签：android, sqlite, data-synchronization

我从 DBHandling 开始。我已经执行了 CRUD 操作，我希望他们在我的数据库中立即看到。

我已经从 Eclipse 中的文件资源管理器中提取数据库并在 sqlite 浏览器中打开该数据库，但我想减少我的工作量，我想要的是当我对数据库执行一些操作时，我应该立即看到数据库中的所有更改。 .我不想再次拉数据库并在sqlite中打开。

请提出一些替代方案。

感谢您阅读查询并抽出时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:21:42.707

打开你的 Eclipse，转到 DDMS，选择文件资源管理器（在那​​里你会得到模拟器列表，如果你启动了多个，请选择一个），转到数据，因为还有另一个名为 data 的子文件夹，现在你会得到已安装应用程序列表的包名称，选择您的应用程序，如果您创建了 db，您将找到该 db，您可以拉取和推送该 db

# jquery - jquery找到最后一个元素

> ID：13740212
> 
> 赞同：0
> 
> 时间：2012-12-06T09:08:14.827
> 
> 标签：jquery, html

我想要的是，当我在最后一个列表选择菜单上使用 tab 键时，我想得到一个警报。使用我拥有的 jquery，我会收到一个警报，但在每个选择菜单上，而不仅仅是最后一个。

HTML 标记

```
<div id="invoiceLinesForm" style="">
<ul id="sortable" class="ui-sortable">
    <li id="headerLine">
        <div class="qty">Aantal</div>
        <div class="description">Omschrijving</div>
        <div class="price">Bedrag EUR</div>
        <div class="total">Totaal</div>
        <div class="vat">BTW</div>
        <div class="actions"></div>
        <div class="clear"></div>
    </li>

    <li id="firstLine">
        <div class="qty"><input type="text" name="invoice_line[0][qty]" value="1" class="qty_input"></div>
        <div class="description"><textarea name="invoice_line[0][description]"></textarea></div>
        <div class="price"><input type="text" name="invoice_line[0][price]" value="0.00" style="text-align:right;"></div>
        <div class="total">0,00</div>
        <div class="vat">
            <select name="invoice_line[0][vat]">
                <option value="0.21">21%</option>
                <option value="0.06">6%</option>
                <option value="0.00">0%</option>
            </select>
        </div>
        <input type="hidden" name="invoice_line[0][total]" class="line_total" value="0">
        <input type="hidden" name="invoice_line[0][vat_amount]" class="line_vat_amount" value="0">
        <input type="radio" class="line_selector" style="display:none;">

        <div class="actions"><span class="delLine">Verwijder </span><span>Slepen</span></div>
        <div class="clear"></div>
    </li>

    <li class="extraLine">
        <div class="qty"><input type="text" name="invoice_line[1][qty]" value="1" class="qty_input"></div>
        <div class="description"><textarea name="invoice_line[1][description]"></textarea></div>
        <div class="price"><input type="text" name="invoice_line[1][price]" value="0.00" style="text-align:right;"></div>
        <div class="total">0,00</div>
        <div class="vat">
            <select name="invoice_line[1][vat]">
                <option value="0.21">21%</option>
                <option value="0.06">6%</option>
                <option value="0.00">0%</option>
            </select>
        </div>
        <input type="hidden" name="invoice_line[1][total]" class="line_total" value="0">
        <input type="hidden" name="invoice_line[1][vat_amount]" class="line_vat_amount" value="0">
        <input type="radio" class="line_selector" style="display:none;">

        <div class="actions"><span class="delLine">Verwijder </span><span>Slepen</span></div>
        <div class="clear"></div>
    </li>
    <li class="extraLine">
        <div class="qty"><input type="text" name="invoice_line[2][qty]" value="1" class="qty_input"></div>
        <div class="description"><textarea name="invoice_line[2][description]"></textarea></div>
        <div class="price"><input type="text" name="invoice_line[2][price]" value="0.00" style="text-align:right;"></div>
        <div class="total">0,00</div>
        <div class="vat">
            <select name="invoice_line[2][vat]">
                <option value="0.21">21%</option>
                <option value="0.06">6%</option>
                <option value="0.00">0%</option>
            </select>
        </div>
        <input type="hidden" name="invoice_line[2][total]" class="line_total" value="0">
        <input type="hidden" name="invoice_line[2][vat_amount]" class="line_vat_amount" value="0">
        <input type="radio" class="line_selector" style="display:none;">

        <div class="actions"><span class="delLine">Verwijder </span><span>Slepen</span></div>
        <div class="clear"></div>
    </li>
</ul> 
```

jQuery

```
$('.vat select').live('keyup', function(e) 
{ 
    if (e.keyCode == 9) 
    {               
        $(this).blur(function(e)
        {
            if($(this).parent().parent().is('li:last'))
            {
                alert('last item');
            }

            e.preventDefault();
            e.stopImmediatePropagation();

        });                 
    } 

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:13:09.593

```
 if($(this).parents("li").is(':last-child'))
    {
        alert('last item');
    } 
```

演示：http: [//jsfiddle.net/UtHKR/3/](http://jsfiddle.net/UtHKR/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:12:32.970

```
$('.vat select').live('keyup', function(e) 
{ 
    if (e.keyCode == 9) 
    {               
        $(this).blur(function(e)
        {
            if($(this).parent().parent().is($(':last'))
            {
                alert('last item');
            }

            e.preventDefault();
            e.stopImmediatePropagation();

        });                 
    } 

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:58:43.187

我认真对待 ahren 的提示，并给你一些意见。我的解决方案是：

```
// Use on, so there is only one event listener
$('#sortable').on('keyup', '.vat select', function(event) {
    // Cache your event target
    var $select = $(this);

    if (event.keyCode == 9) {   

        $select.blur(function(event) {
            event.preventDefault();
            event.stopImmediatePropagation();

            var $clostestLi = $select.closest('li');

            if($clostestLi.is(':last-child') == true) {
                alert('last item');
            }
        });                 
}
}); 
```

小提琴：http: [//jsfiddle.net/qLGeb/](http://jsfiddle.net/qLGeb/)

# javascript - 实时计算不起作用

> ID：13740217
> 
> 赞同：0
> 
> 时间：2012-12-06T09:08:44.450
> 
> 标签：javascript

我在用户打字时做一些实时计算。

很奇怪，它在 jsfiddle 中有效，但在 localhost 中无效。

```
window.onload = function() {

    var base = 10;
    var numberField = document.getElementById('numberField');

    numberField.onkeyup = numberField.onpaste = function() {

        if(this.value.length == 0) {

            document.getElementById('result').innerHTML = '';
            return;

        }

        var number = parseInt(this.value);

        if(isNaN(number)) return;

        document.getElementById('result').innerHTML = number * base;

    };

    numberField.onkeyup(); //could just as easily have been onpaste();
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:31:03.617

你正在听错误的事件，onkeyup。相反，您应该收听 .change ，它在整个字段更改以及用户完成输入并且输入字段失去焦点或模糊后触发。

快速示例：

```
 $(document).ready(function(){
     $(":input").change(function () {
         //do something
     });
 }); 
```

另一件事是使用 jquery 而不是 javascript。它将为您省去很多麻烦。

# sql - 每小时每种类型的 SQL 计数

> ID：13740228
> 
> 赞同：0
> 
> 时间：2012-12-06T09:09:34.887
> 
> 标签：sql, sql-server, count

希望计算一个小时内记录的类型数量。

我可以用这段代码计算类型的数量：

```
SELECT count (left (Barcode,9)) as T_Count, left (Barcode,9) as T
FROM table
group by left (Barcode,9) 
```

并且可以使用此代码（包括所有类型）计算每小时的项目数：

```
SELECT Year, Month, Day, Hour, COUNT(T) AS "Items per Hour"
FROM
(
SELECT DATEPART(YEAR,timestamp) Year, DATEPART(MONTH,timestamp) Month,
DATEPART(DAY,timestamp) Day, DATEPART(HOUR, timestamp) Hour, left (Barcode,9) as T
FROM table
) temp
group by Year, Month, Day, Hour
order by Year desc, Month desc, Day desc 
```

但是不知道如何计算每小时每种类型的项目数 - 这意味着一个小时内将有超过 1 个条目 - 根据类型的数量...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:12:18.040

```
SELECT 
    Year, Month, Day, Hour, 
    COUNT(T) AS "Items per Hour", 
    count (distinct T) as "Types per Hour"
FROM 
    ( SELECT DATEPART(YEAR,timestamp) Year, DATEPART(MONTH,timestamp) Month, DATEPART(DAY,timestamp) Day, DATEPART(HOUR, timestamp) Hour, left (Barcode,9) as T FROM [JCI_Trim].[dbo].[T6_Trim] ) temp 
group by Year, Month, Day, Hour 
order by Year desc, Month desc, Day desc 
```

# c# - 以编程方式使用选中的选项填充 CheckBoxList

> ID：13740229
> 
> 赞同：2
> 
> 时间：2012-12-06T09:09:41.777
> 
> 标签：c#, asp.net, .net

我觉得我在这里错过了关于 asp.net 页面生命周期的一些非常基本的东西。

我有一个 CheckBoxList（虽然 ListBox 也会发生同样的事情）

```
 <asp:CheckBoxList runat="server" ID="cblCountriesAccessible" DataTextField="Text" /> 
```

我正在向它添加一堆 ListItems

```
 var lbData = new List<ListItem>();
        lbData.Add(new ListItem("x", "", true));
        lbData.Add(new ListItem("y", "", false)); 
```

然后将它们绑定到 CheckBoxList

```
 cblCountriesAccessible.DataSource = lbData;
    cblCountriesAccessible.DataBind(); 
```

并且每次列表中的项目显示为未选中（或未在 ListBox 中选择）时，如果我将 ListItems 直接添加到标记中的控件，它们会显示为选中或未选中。

```
 <asp:ListItem Text="x" Value="" Selected="True" /> 
```

我在选择没有执行的代码中做错了什么？我已经尝试将 CheckBoxes 绑定到 Checked 设置为 true，并且发生了同样的事情。

编辑：好的，我没有正确设置 Selected。我现在正在使用

```
 var lbData = new List<ListItem>();
        var l1 = new ListItem("yy", "", true) {Selected = true};
        var l2 = new ListItem("xx", "", true) {Selected = false};

        lbData.Add(l1);
        lbData.Add(l2); 
```

而且他们仍然没有按检查加载

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:12:31.707

您可以创建[**ListItem**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.aspx)更改其`Selected`属性并添加到集合中。

```
ListItem li1 = new ListItem("x", "", true);
ListItem li2 = new ListItem("x", "", true); 
li1.Selected = true; 
li2.Selected = true;
cblCountriesAccessible.Items.Add(li1);
cblCountriesAccessible.Items.Add(li2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:31:00.997

`ListItem.Enabled`不一样`ListItem.Selected`。根据这个 MSDN 页面（[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.enabled.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitem.enabled.aspx)）

启用只是确定是否可以选择它。使用此重载创建项目时，它不会选择它。

根据此页面（[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.aspx)）：“要确定 CheckBoxList 控件中的选定项目，请遍历 Items 集合并测试集合中每个项目的 Selected 属性。”

我过去使用 LINQ 完成了这项工作，方法是预先确定我的项目列表，然后遍历它们。

这是一些未经测试的代码，应该会给您一个想法。这基本上就是我对 Win Forms 做同样的事情的方式，所以你的用法可能会略有不同：

```
For each item in Items
    CheckedListBox.Items.Add(item.Name,Item.value,True)
Next

dim selectedItems as list(of Item) = items.where(function (x) x.selected = True)

for each item in CheckedListBox.items
    item.Selected = selectedItems.contains(item.Value)
next 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-05T11:43:51.800

```
public string GetListItems()
{
    System.Collections.Generic.List<string> items = new System.Collections.Generic.List<string>();

    foreach (ListItem item in lstfunction.Items)
    {
        if (item.Selected)
        {
            items.Add(item.Value);
        }
    }

    return String.Join(", ", items.ToArray());
} 
```

# linux - 使用 perl 仅检查开放端口

> ID：13740235
> 
> 赞同：0
> 
> 时间：2012-12-06T09:10:10.693
> 
> 标签：linux, perl

我需要编写一个脚本来扫描服务器上的端口并生成报告。该脚本应：

从文件中读取 IP 列表；扫描每个 IP，并将结果写入一个文件。

我为此使用以下脚本::

```
#!/usr/bin/perl -w
use strict;
use IO::Socket::PortState qw(check_ports);

my $hostfile = 'hosts.txt';

my %port_hash = (
        tcp => {
            22      => {},
            443     => {},
            80      => {},
            53      => {},
            30032   => {},
            13720   => {},
            13782   => {},
            }
        );

my $timeout = 5;

open HOSTS, '<', $hostfile or die "Cannot open $hostfile:$!\n";

while (my $host = <HOSTS>) {
    chomp($host);
    my $host_hr = check_ports($host,$timeout,\%port_hash);
    print "Host - $host\n";
    for my $port (sort {$a <=> $b} keys %{$host_hr->{tcp}}) {
        my $yesno = $host_hr->{tcp}{$port}{open} ? "yes" : "no";
        print "$port - $yesno\n";
    }
    print "\n";
}

close HOSTS; 
```

现在我要做的一件事是：

**扫描所有打开的端口。**

目前它正在扫描端口**%port_hash**但我需要扫描所有端口并列出打开的端口。这该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:19:41.943

这将用所有端口填充 %porthash：

```
my %port_hash = ( tcp => {} );
for my $port (1 .. 65535) {
  $port_hash{'tcp'}{$port} = {};
} 
```

然后你可以`check_ports`用这个 %port_hash 调用。

# android - 如何将数据库中的数据显示到 TextView

> ID：13740239
> 
> 赞同：0
> 
> 时间：2012-12-06T09:10:23.110
> 
> 标签：android, android-layout

我已经创建了一个表单，并且已经能够将详细信息保存到我的数据库中，但是我想要在用户进行相同活动时将保存的详细信息显示到我的 TextView 中。这是我的表单的当前代码：

```
public void onCreate(Bundle savedInstanceState) 
{
      super.onCreate(savedInstanceState);

      setContentView(R.layout.emailsettings);

      nameTU = (EditText) findViewById(R.id.text_username);
      nameTP = (EditText) findViewById(R.id.text_password);
      nameTO = (EditText) findViewById(R.id.text_to);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameTU.setText(extras.getString("username"));  
         nameTP.setText(extras.getString("password"));  
         nameTO.setText(extras.getString("id_to"));  
      }
} 
```

我想要的是在我的 text_username、text_password 和 text_to 中显示页面加载时保存的数据，所有这些都是 TextView。

谢谢。

# php - php代码点火器不返回错误

> ID：13740240
> 
> 赞同：1
> 
> 时间：2012-12-06T09:10:23.597
> 
> 标签：php, codeigniter

我已经下载了一个 SSI 实现示例以在*codeigniter*中使用它，我阅读了文档和代码，现在我正在修改它。我只更改了数据库名称、表及其字段。现在系统不会显示找不到数据库或表不存在和未定义字段名称的错误，而我期待错误。我知道数据库名称、表名称以及表字段中存在错误，但我的问题是，系统不会对数据库抛出任何错误。我确实使用了`try ... catch`构造，但它没有抛出错误，而是简单地执行..

我是否在图书馆遗漏了一些需要纠正或写入的东西？

我正在使用代码*点火器*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-13T02:26:34.227

你检查过模型的加载吗？例子

```
$this->load->model('model_name'); 
```

未加载 CodeIgniter 中的模型时不显示错误。

-谢谢（=

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:30:16.813

打开 index.php 文件并确保定义 ENVIRONMENT 的行是 define('ENVIRONMENT', 'development'); 而不是测试或生产

尝试添加

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

到要显示错误的文件顶部或连接字符串（database.php）之前

# java - 将任何日期字符串转换为特定日期格式字符串

> ID：13740241
> 
> 赞同：1
> 
> 时间：2012-12-06T09:10:25.770
> 
> 标签：java, date, simpledateformat

具体来说，我有一个任何格式的日期字符串，我想将其转换为字符串为“20121112”，请提供任何帮助......我知道这可以通过 SimpleDateFormatter 完成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T09:13:38.163

您可以在这里应用任何魔法。首先你需要弄清楚日期格式是什么，然后你需要转换它。例如，01/02/03 是 1903 年 2 月 1 日还是 2003 年 2 月 1 日，或者是 2003 年 1 月 2 日，还是 2001 年 2 月 3 日。您决定。;)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T09:13:47.670

像这样的东西...

```
SimpleDateFormat source = new SimpleDateFormat("dd/MM/YYYY");  // British format
SimpleDateFormat target = new SimpleDateFormat("YYYYMMdd");

String oldDate = "06/12/2012";
String newDate = target.format(source.parse(oldDate)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T09:16:20.347

它无法完成，因为您必须指定日、月的顺序。

罗马尼亚日期字符串：“30.01.2013”​​ 匈牙利日期字符串：“2013.01.30” 美国日期字符串：“01.30.2013”

而且您想从任何格式“识别”...

至少必须知道格式，不再是任何格式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T09:14:59.620

您需要将日期传递到格式化程序。一种方法是这样的：

```
Date date = new Date(System.currentTimeMillis());
FastDateFormat dateFormatter = FastDateFormat.getInstance("yyyyMMdd");
System.out.println(dateFormatter.format(date)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T09:16:21.920

如果您知道日期格式（即 mm/dd 或 dd/mm），则可以使用类似的方法：

```
// my date in String format in yyyy/mm/dd
String myDate = "20121206";

Calendar cal = Calendar.getInstance();
SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd"); // format
cal.setTime(sdf.parse(myDate)); 
```

这会将您的字符串转换为`Calendar`,`Date#parse`已弃用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-04-01T10:04:31.990

像 date -d "Fri Apr 1" +%D 仅适用于 java 吗？

# c# - C# XML LINQ 查询到 LIST<>

> ID：13740247
> 
> 赞同：2
> 
> 时间：2012-12-06T09:10:43.587
> 
> 标签：c#, xml, linq, list

我正在尝试将 XML 文档转换为具有预定义类的 List<>

我的 xml 数据集 TestData.xml

```
<Objects>
    <Object ID="1">
        <ItemOne>"Hickory"</ItemOne>
        <ItemTwo>"Dickory"</ItemTwo>
        <ItemThree>"Dock"</ItemThree>
    </Object>

    <Object ID="2">
        <ItemOne>"The"</ItemOne>
        <ItemTwo>"Mouse"</ItemTwo>
        <ItemThree>"Went"</ItemThree>
    </Object>
</Objects> 
```

主程序

```
class Program
{
    static void Main(string[] args)
    {

        XElement TestData = XElement.Load("TestData.xml");

       List<Test> myTest = new List<Test>(from d in TestData.Descendants("Objects")
                                     select new Test(
                                         d.Element("ItemOne").Value.ToString(),
                                         d.Element("ItemTwo").Value.ToString(),
                                         d.Element("ItemThree").Value.ToString()));

        myTest.ForEach(i => Console.WriteLine("{0} {1} {2}", i.itemOne, i.itemTwo, i.itemThree));

        Console.ReadLine();
    }

} 
```

我试图将数据形成的类

```
class Test
{
    public string itemOne { get; set; }
    public string itemTwo { get; set; }
    public string itemThree { get; set; }
} 
```

我想出去

```
Hickory Dickory Dock
The Mouse went 
```

但我最终什么也没得到。看起来 LINQ 查询找到了数据，但从未将其分配给`List<Test>`myTest，该值在调试器中显示为 null。我不确定我做错了什么。

我想将 XML 转换为，`List<Test>`以便我可以随机重新排列对象。我打算只使用 int[] 数组并按“ID”排序，但我不知道数组的实际长度并想动态分配它，所以我不得不做一个`list<>`. 我愿意接受其他实现这一目标的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T09:14:16.317

未经测试，我认为您应该编写`TestData.Descendants("Object")`而不是`TestData.Descendants("Objects")`. for 的参数`Descendants`必须与您要选择的节点的名称相匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T09:14:39.947

你已经在根`Objects`

做这个

```
from d in TestData.Descendants("Object")
                               -------- 
```

# rpm - RPM Build Spec 文件我想检查 rpm 正在安装或更新

> ID：13740254
> 
> 赞同：4
> 
> 时间：2012-12-06T09:11:12.347
> 
> 标签：rpm, rpmbuild, rpm-spec, rpm-maven-plugin

我想检查我创建的 rpm 是由用户（客户端）安装还是更新，例如

```
rpm -ivh abc.rpm 
```

或者

```
rpm -Uvh abc.rpm 
```

是他们在规范文件中的任何 %command 以获取有关此命令的信息。

我的要求是，如果我有一个名为 abc-0.1-2.rpm 的 rpm 并且现在用户想在使用命令安装 abc.0.1-1.rpm 之前安装它， `rpm -ivh abc.0.1-2.rpm`那么它允许安装或用户`rpm -Uvh abc.0.1-2`在安装旧版本之前使用命令直接更新 rpm版本然后停止这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-13T19:59:07.337

扩展上述内容：

在您的`%post[un]`或`%pre[un]`部分中有一个变量，您可以检查系统上是否已存在此软件包（正在更新/升级中的清理）或不存在（首次安装/最终卸载）。

它看起来像这样：

```
%post
if [ $1 -eq 1 ]; then
    echo "First install complete"
else
    echo "Upgrade complete"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:54:30.563

你`%pre[un]`和`%post[un]`脚本被赋予“一个数字，代表当前安装在系统上的包的实例数，在当前包被安装或删除之后”，以便告诉你当前是否安装了 RPM。请参阅[最大 RPM 的这一部分](http://ftp.rpm.org/max-rpm/s1-rpm-inside-scripts.html)。

# css - 我们可以使用 Twitter Bootstrap 使任何网页设计响应式吗？还有其他选择吗？

> ID：13740257
> 
> 赞同：1
> 
> 时间：2012-12-06T09:11:23.350
> 
> 标签：css, twitter-bootstrap, responsive-design

由于 Twitter BootStrap 是一个响应式**框架**，我想知道它是否可以插入任何站点。换句话说，如果我无法控制设计网页的团队，那么我可以采用他们的设计（容器、标题、导航等元素可以是任何尺寸）并使用 BootStrap 使其响应。或者 BootStrap 是否希望网页设计具有特定尺寸才能正常工作。

是否有其他流行的 CSS 响应库可以轻松插入？

**编辑**：根据保罗的评论，我意识到我的问题不太清楚。所以我们开始：

我本质上是在寻找一个在不同元素的宽度/填充/边距上灵活（或可调整）的响应式 CSS 库。大多数响应式库都要求网站的宽度必须为 1440 像素或 960 像素，然后他们为不同的容器提供 'N' 像素的填充/边距。最后，我知道无论我选择哪个库，它的 CSS 都需要针对我的设计进行修改。那么 BootStrap 是否易于调整，或者我应该使用其他库吗？

谢谢， 锯齿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:19:54.933

当然，Bootstrap 中使用的相同类可以帮助您做出响应，但它也使用类似`row`and `span12`,`span9`等类...

所以我认为在现有网站上使用框架是相当复杂的。

最好的方法是手动创建它，您可以从 Bootstrap 复制`media queries`并查看它如何使所有元素响应。

还有很多其他框架可以做到这一点，Bootstrap 不是唯一的，使用谷歌你可以找到很多这样的框架，但 Bootstrap 是最好的。

其他几个框架：

*   [http://foundation.zurb.com/](http://foundation.zurb.com/)
*   [http://www.getskeleton.com/](http://www.getskeleton.com/)
*   [http://cssgrid.net/](http://cssgrid.net/)

一篇好的博文： http: [//speckyboy.com/2011/11/17/15-responsive-css-frameworks-worth-considering/](http://speckyboy.com/2011/11/17/15-responsive-css-frameworks-worth-considering/)

* * *

编辑：

使用 Bootstrap，您可以在下载框架之前自定义许多内容。

只需去这里：http: [//twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

如您所见，您可以更改颜色、字体等...以及列数、填充、装订线、边距等...所以也许它非常适合您正在寻找的东西。希望它有所帮助。

# c++ - 为什么这个函数没有引起错误？

> ID：13740258
> 
> 赞同：1
> 
> 时间：2012-12-06T09:11:24.813
> 
> 标签：c++

```
void removeDuplicateWithHashtable(LinkedListElement<char> *head)
{
    LinkedListElement<char> *runner = head;
    LinkedListElement<char> *previous = nullptr;
    hash_map<char, bool> record;
    while (runner) {
        if (record.count(runner->Data) == 0) {
            pair<char, bool> item(runner->Data,true);
            record.insert(item);
        }else
        {
            free(runner);
            previous->Next = runner->Next;
        }
        previous=runner;
        runner=runner->Next;
    }
} 
```

一开始我以为会有错误。因为在`free(runner)`，如果我释放内存，我无法访问 runner->Next。但是 GCC 编译器运行成功。

实际上，如果我更改为免费删除跑步者，那也是正确的。请问原因可能是空闲还是删除，只是告诉你内存可用，里面没有实际清除数据，所以你也可以访问Next。我能问一下如何改进吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:13:12.723

这不是编译错误，但问题（未定义的行为）将在运行时表现出来。如果您选择调用`free`未分配的内存，编译器不会阻止您。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T09:13:18.620

编译器无法检测到此类逻辑错误！相反，该程序具有未定义的行为，其中可能包括看似正常的运行、崩溃或产生各种垃圾。有很多（我不能强调足够多，比如很多）情况会导致未定义的行为

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:16:37.350

您的程序**可以正常工作**，因为`free()`只是将一些内存标记为空闲，但实际上并没有覆盖它。因此，**您的解决方案很可能在大多数情况下都能正确运行，**因为在您的函数中您没有使用任何新内存。（至少在单线程环境中。）

另一方面，我会像这样**从根本上改变**函数：

```
template<typename _Tp>
void unique(forward_list<_Tp>& list)
{
  unordered_map<_Tp, bool> record;
  auto la=list.before_begin();
  for(auto it=list.begin(); it!=list.end(); ++it) 
  {
    if(record.find(*it)==record.end())
      record[*++la] = true;
    else
      list.erase_after(la);
  }
} 
```

你甚至可以写这个：

```
template<typename _Tp>
void unique(forward_list<_Tp>& list)
{
  unordered_map<_Tp, bool> record;
  auto la=list.before_begin();
  for(auto e: list) 
  {
    if(record.find(e)==record.end())
      record[*++la] = true;
    else
      list.erase_after(la);
  }
} 
```

但我认为这可能有点过分了，因为它并不反映我们需要一个接一个地进行。

* * *

**我做出根本改变的原因：**

1.  在 C++`free()`中称为`delete`. 它与`new`（在 c++ 中用于代替`malloc()`or `calloc()`）成对使用。`delete`像这样使用：

    删除跑步者；
    // 并且 new 是这样使用的：
    Some_type *p = new Some_type();

2.  STL 已经有一个 LinkedList，所以使用它是有意义的。它被称为[std::forward_list](http://en.cppreference.com/w/cpp/container/forward_list)。你想用[`erase_after`，用一个很好的例子](http://en.cppreference.com/w/cpp/container/forward_list/erase_after)。

3.  您想使用 std::unsorted_map 而不是 hash_map （同样，因为它在 STL 中）。最好的总是标准解决方案。

4.  类的主要目的之一是隐藏必要的指针活动，所以在函数头中我宁愿使用引用而不是指针，所以至少你的函数应该是

    `void removeDuplicateWithHashtable(LinkedListElement<char>& head)`

# javascript - 可以模拟吗使用?

> ID：13740262
> 
> 赞同：1
> 
> 时间：2012-12-06T09:11:48.110
> 
> 标签：javascript, html

我想使用简单的 html 输入`type="text"`和一个按钮来编写一个程序，该按钮将执行 input 的功能`type="file"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:22:47.333

HTML 来自：

```
<input type="file" class="file">
<input type="text" name="file" class="sfile">
<input type="submit" value="send file" name="submit"> 
```

CSS：

```
.file{
    visibility:hidden; # don't use display:none; because IE compability in js
} 
```

jQuery :

```
$('.sfile').click(function(){
   $('.file').click();
});
$('.file').change(function(){
  $('.sfile').val($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:15:03.230

理论上你可以破解它（将 0 不透明度设置为 input[file] 等），但手动输入文本字段的路径将不起作用（不会发送带有表单的文件）。似乎有很多不必要的黑客攻击。是什么原因？

# jquery-animate - 边框框隐藏jQuery动画中的伪元素

> ID：13740264
> 
> 赞同：1
> 
> 时间：2012-12-06T09:12:01.430
> 
> 标签：jquery-animate, pseudo-element, border-box

我有一个奇怪的问题，在应用时不会出现伪元素：

```
box-sizing:border-box; 
```

**测试用例 1： http:** [//jsfiddle.net/kGGuP/1/](http://jsfiddle.net/kGGuP/1/) - 这按预期工作。单击该框将显示内容，并且还将显示“**箭头**”伪元素。

**测试用例 2： http:** [//jsfiddle.net/XGGg4/](http://jsfiddle.net/XGGg4/) - 我已经添加

```
* {
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
} 
```

到 CSS。如您所见，“**箭头**”伪元素将不再出现。这将发生在除 Firefox 之外的所有浏览器中。

**除了删除box-sizing:border-box;**之外，还有什么解决方法吗？? 我真的不想删除这条规则。

**附加信息：**

只有**带参数**的 .toggle()和**.slideToggle()**似乎有这个问题。

如果使用**不带参数**的 .toggle()和**.fadeToggle()**，它可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:18:21.190

看看这个[http://jsfiddle.net/XGGg4/5/](http://jsfiddle.net/XGGg4/5/)

添加

```
*{
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
} 
```

真的搞砸了你的代码，而不是你可以设置`box-sizing:border-box;`每个单独的元素。这将为您创造奇迹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:40:57.830

这是链接[http://jsfiddle.net/XGGg4/1/](http://jsfiddle.net/XGGg4/1/)

我在 CSS 文件中做了一些小改动，用你希望的代码检查一下

你可以用

```
*{
    -moz-box-sizing:content-box;
    -webkit-box-sizing:content-box;
    box-sizing:content-box;
} 
```

上面的代码也将有助于您的代码

# android - 自定义 From-To AlertDialog

> ID：13740270
> 
> 赞同：0
> 
> 时间：2012-12-06T09:12:17.070
> 
> 标签：android

我需要一点帮助。我已经构建了一个自定义警报对话框，其中包含两个日期选择器（从 - 到）。我正在从 xml 文件中为警报的布局充气，当我试图获取我的程序兑现的日期值时。这里是代码：

```
 View fromToLayout = (View)getLayoutInflater().inflate(R.layout.from_to_layout, null);
         final DatePicker fromPicker  = (DatePicker) findViewById(R.id.dpFrom);
         final DatePicker toPicker  = (DatePicker) findViewById(R.id.dpTo);

        AlertDialog alert =  new AlertDialog.Builder(context).create();

           alert.setMessage("Insert Interval:");                
           alert.setView(fromToLayout,0,0,0,20);
           alert.setButton(DialogInterface.BUTTON_POSITIVE,"Ok", new DialogInterface.OnClickListener() 
           {

               @SuppressWarnings("deprecation")
                public void onClick(DialogInterface dialog, int which) 
                   {
                    // TODO Auto-generated method stub

                      Date  dateFrom = new Date(fromPicker.getYear()-1990, fromPicker.getMonth(),fromPicker.getDayOfMonth());
                      Date  dateTo =  new Date(toPicker.getYear() - 1990,toPicker.getMonth(),toPicker.getDayOfMonth());

                      SimpleDateFormat isoFormat = new SimpleDateFormat("yyyyMMdd",Locale.US);
                      SimpleDateFormat dispalyFormat =  new SimpleDateFormat("dd-MM-yyyy",Locale.US);

                      String fromDisplay =  dispalyFormat.format(dateFrom);
                      String toDisplay =  dispalyFormat.format(dateTo);
                      String fromValue = isoFormat.format(dateFrom);
                      String toValue = isoFormat.format(dateTo);

                      CashInInfoActivity.this.setTitle("Cash In " + fromDisplay + " - " + toDisplay );                      
                      DownloadCashInAsyncTask task =  new DownloadCashInAsyncTask(context);
                      task.execute(fromValue,toValue);

                      return;
                   }
            });

           alert.setButton(DialogInterface.BUTTON_NEGATIVE,"Cancel", new DialogInterface.OnClickListener()
           {

            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                return;
                }
            });

           alert.show(); 
```

我在行得到 nullPointerException ： `Date dateFrom = new Date(fromPicker.getYear()-1990, fromPicker.getMonth(),fromPicker.getDayOfMonth());`

日志：

```
12-06 11:01:48.919: E/AndroidRuntime(24121): FATAL EXCEPTION: main
12-06 11:01:48.919: E/AndroidRuntime(24121): java.lang.NullPointerException
12-06 11:01:48.919: E/AndroidRuntime(24121):    at com.example.denandroidapp.CashInInfoActivity$1.onClick(CashInInfoActivity.java:98)
12-06 11:01:48.919: E/AndroidRuntime(24121):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:159)
12-06 11:01:48.919: E/AndroidRuntime(24121):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-06 11:01:48.919: E/AndroidRuntime(24121):    at android.os.Looper.loop(Looper.java:123)
12-06 11:01:48.919: E/AndroidRuntime(24121):    at android.app.ActivityThread.main(ActivityThread.java:3687)
12-06 11:01:48.919: E/AndroidRuntime(24121):    at java.lang.reflect.Method.invokeNative(Native Method)
12-06 11:01:48.919: E/AndroidRuntime(24121):    at java.lang.reflect.Method.invoke(Method.java:507)
12-06 11:01:48.919: E/AndroidRuntime(24121):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
12-06 11:01:48.919: E/AndroidRuntime(24121):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
12-06 11:01:48.919: E/AndroidRuntime(24121):    at dalvik.system.NativeStart.main(Native Method) 
```

你知道我做错了什么吗？thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:43:43.227

尝试改变：

```
final DatePicker fromPicker  = (DatePicker) findViewById(R.id.dpFrom);
final DatePicker toPicker  = (DatePicker) findViewById(R.id.dpTo); 
```

到：

```
final DatePicker fromPicker  = (DatePicker) fromToLayout.findViewById(R.id.dpFrom);
final DatePicker toPicker  = (DatePicker) fromToLayout.findViewById(R.id.dpTo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:44:36.030

您将获得“fromPicker”的空指针异常，同样的异常也适用于“toPicker”。

例外的原因是：

*   您正在动态扩展您的布局，并且您希望引用 DatePicker。
*   请记住，当您动态扩展任何布局并想要获取它的控制权时，您必须使用视图的对象调用 findViewById，如下所示

.

```
View fromToLayout = (View)getLayoutInflater().inflate(R.layout.from_to_layout, null);
final DatePicker fromPicker  = (DatePicker) fromToLayout.findViewById(R.id.dpFrom);
final DatePicker toPicker  = (DatePicker) fromToLayout.findViewById(R.id.dpTo); 
```

# php - PHP 记住我，COOKIE

> ID：13740273
> 
> 赞同：3
> 
> 时间：2012-12-06T09:12:25.110
> 
> 标签：php

我不知道哪里出错了。当我勾选记住我复选框页面没有转到用户区域页面并且似乎 cookie 无法正常工作当我只登录而不勾选记住我复选框时它可以工作

```
<?PHP
session_start();

$connect=mysql_connect("localhost", "root", "");
mysql_select_db("phplogin", $connect);

function loggedin(){
    if(isset($_SESSION['email']) || isset($_COOKIE['username'])){
    $loggedin=TRUE;
    return $loggedin;   
    }
}

if(loggedin()){
header("Location:userarea.php");}

if(isset($_POST['login'])){

$email=$_POST['email'];
$password=$_POST['password'];
$rememberme=$_POST['rememberme'];

    if($email && $password){
        $login=mysql_query("SELECT * FROM users WHERE email='$email'");
            while($row=mysql_fetch_assoc($login)){
            $db_email=$row['email'];
            $db_password=$row['password'];
            $db_firstname=$row['firstname'];
            $db_lastname=$row['lastname'];  

            if($password==$db_password){$log=TRUE;}
            else{$log=FALSE;}               
            }

            if($log==TRUE){
                if($rememberme=="on"){
                    setcookie("email", $email, time()+7200);
                }
                else if($rememberme==""){
                    $_SESSION['email']=$email;
                    header("Location:userarea.php");
                }
            }
            else{die("Wrong email or password");}
    }
}
?>

<html>
    <form action="index.php" method="POST">
        <input type="text" name="email" value="" placeholder="email" /><br/>
        <input type="password" name="password" value="" placeholder="password"/><br/>

        <input type="checkbox" name="rememberme"> Remember me | <a href="register.php">Register?</a><br/>
         <input type="submit" name="login" value="Login" />
     </form>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:33:03.197

函数 login() 中的 cookie 变量名称错误。它应该是 isset($_COOKIE['email'])

```
function loggedin(){
    if(isset($_SESSION['email']) || isset($_COOKIE['email'])){
       $loggedin=TRUE;
       return $loggedin;   
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:02:53.190

改变如下

```
if(isset($_POST['rememberme'])){
    $rememberme = $_POST['rememberme'];
} 
```

然后

```
if($log==TRUE){
    if(isset($rememberme)){
        setcookie("email", $email, time()+7200);
    }
    else{
        $_SESSION['email']=$email;  
    }
    header("Location:userarea.php");
    exit();
} 
```

# python - 单个 Numpy 类型似乎不保留字节顺序

> ID：13740275
> 
> 赞同：2
> 
> 时间：2012-12-06T09:12:27.700
> 
> 标签：python, numpy, endianness

numpy 版本：1.6.2

有人可以解释为什么数组的单个标量不保持 dtype 中设置的字节序吗？如何让它们以正确的字节顺序输出？

```
>>> numpy_type1 = numpy.uint32
>>> numpy_type2 = numpy.dtype(numpy_type1).newbyteorder('>')
>>> hexdump(numpy.array([100000000], dtype = numpy_type1).tostring())
'00e1f505' # OKAY (endianness of host platform)
>>> hexdump(numpy.array([100000000], dtype = numpy_type2).tostring())
'05f5e100' # OKAY (byte swap is visible)
>>> hexdump(numpy.array([100000000], dtype = numpy_type1)[0].tostring())
'00e1f505' # OKAY (endianness of host platform)
>>> hexdump(numpy.array([100000000], dtype = numpy_type2)[0].tostring())
'00e1f505' # FAIL (no byte swapping seen)
>>> hexdump(numpy_type1(100000000).tostring())
'00e1f505' # OKAY (endianness of host platform)
>>> hexdump(numpy_type2.type(100000000).tostring())
'00e1f505' # FAIL (no byte swapping seen) 
```

在上面的示例中，请注意当在 numpy 数组上调用 tostring 时正确执行了字节交换，但在数组的标量元素上执行不正确？

简而言之，我只需要一些方法来实例化 dtype 中的值并以正确的字节顺序获取二进制字符串。我不能使用 Python 结构，因为它不支持 Numpy 支持的 float16、float128 或其他奇异数字类型。我宁愿不手动进行字节交换。

我很想看到这项工作：

```
>>> hexdump(numpy_type2.type(100000000).tostring())
'05f5e100' # OKAY (byte swapping seen) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:18:29.207

对于单个值，您也可以使用`struct`package.json 。为简单起见，标量在 numpy（始终是系统）中根本没有字节序。但是，您也可以使用 0-d 数组来保留字节顺序。但是对于大多数结果，numpy 会将 0-d 数组转换为标量，因为它们通常是您想要的。

既然你说你不能使用`struct`，那么`np.array(scalar, dtype=original.dtype).tostring()`即使它有点难看，你也可以使用。

# css - 使内部 div 从顶部显示得更远

> ID：13740276
> 
> 赞同：0
> 
> 时间：2012-12-06T09:12:26.463
> 
> 标签：css, html, positioning

我试图让内部 div 出现在页面下方，但它只是位于顶部，看起来像外部 div #top_middle 的默认边距

```
<div id="top_center">
   <div id="main_container"></div>
</div>

#top_middle
{
    padding: 0px;
    margin: 0px auto;
    width: 100%;
    position: relative;
    z-index: 99;
    top: 0px
}
#main_container
{
    width: 800px;
    display: block;
    background-color: #ddd093;
    margin: 0px auto;
    padding: 0px;
    height: 300px;
    top: 200px;
    z-index: 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:19:48.113

你必须给这个 div的**position:absolute 。**由于最高值仅适用于位置（绝对，相对）...

```
#main_container
    {
    width: 800px;
    display: block;
    background-color: #ddd093;
    margin: 0px auto;
    padding: 0px;
    height: 300px;
    top: 200px;
    z-index: 1;
    position:absolute
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:24:06.747

添加位置：绝对在这个css中

```
#main_container{
...;
position:absolute;
...
} 
```

# javascript - 视频弹出+文字

> ID：13740277
> 
> 赞同：-1
> 
> 时间：2012-12-06T09:12:30.027
> 
> 标签：javascript, video, text, youtube, popup

我正在使用脚本在弹出窗口中播放我的 youtube 视频。是否可以更改此设置，以便我可以在弹出窗口中播放视频，但在下方添加 5 行文本作为有关视频的信息？

```
<script type="text/javascript">
    //<![CDATA[
    function showPopup(url) {
    newwindow=window.open(url,'name','height=315,width=560,top=200,left=300,resizable');
    newwindow.focus();
    }
    //]]>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:31:54.537

```
var win = window.open("", "win", "width=500,height=600"); // a window object
win.document.open("text/html", "replace");
win.document.write('<iframe width="420" height="315" src="http://www.youtube.com/embed/bKkESJ1abRA" frameborder="0" allowfullscreen></iframe><p>Your text</p><p>Hey, moar text :D</p>');
win.document.close();
win.focus(); 
```

尝试这个！

在评论中提出您的要求后：

```
<html>
    <head>
        <script>
            function openWindow(url,id){
                var win = window.open("", "win", "width=500,height=600"); // a window object
                var myText = document.getElementById(id).innerHTML;
                win.document.open("text/html", "replace");
                win.document.write('<iframe width="420" height="315" src="'+url+'" frameborder="0" allowfullscreen></iframe>'+myText);
                win.document.close(); 
            }

        </script>
    </head>
    <body>
        <img src="asd.jpg" onclick="openWindow('http://www.youtube.com/embed/bKkESJ1abRA','div1')">
        <img src="dsa.jpg" onclick="openWindow('http://www.youtube.com/embed/bKkESJ1abRA','div2')">
        <div style="display: none" id="div1">
            <p>My text 1</p>
        </div>
        <div style="display: none" id="div2">
            <p>My text 2</p>
        </div>
    </body>
</html>​ 
```

小提琴：http: [//jsfiddle.net/BRAQD/](http://jsfiddle.net/BRAQD/)

# actionscript-3 - adobe air 桌面应用程序 - 与服务器的持续通信

> ID：13740280
> 
> 赞同：2
> 
> 时间：2012-12-06T09:12:36.623
> 
> 标签：actionscript-3, air

需要弄清楚如何在 AS 3.0 中打开与服务器的连接并监听来自客户端应用程序的不断变化。

这是我在这里的第一篇文章，所以请稍等片刻。

我正在尝试开发一个基本上可以由多个玩家在家里同时玩的在线游戏，方法是将我目前正在使用的客户端安装到他们的机器上。现在，我设置服务器没有问题，因为它设置为在询问时提供 XML，例如（gamenumber、maxplayers、currentplayers）。我选择 Adob​​e Air 进行客户端开发。当客户端在 PC 上打开时，它会与服务器连接并检索上面的 XML 示例，然后显示在主窗口中。问题来了……假设我有 2 个玩家，每个玩家都在我的网站上注册的不同位置。应用程序如何与服务器通信，以便当玩家 1 从应用程序中选择并打开游戏，并且玩家 2 加入该游戏时，玩家 1 电脑上的客户端会自动更新......此外，一旦游戏开始，并且 player1 在游戏中采取了一些行动（按下某个按钮），player2 看到了这一点。我知道我可以使用计时器或 pollintervals，例如让客户端每隔“n”秒从服务器请求一次游戏状态，但我正在寻找一种更具流动性的解决方案。例如，让应用程序不断地监听服务器的变化。在应用程序中实现 node.js 之类的东西（可能是一个愚蠢的想法）。当涉及到有限数量的连接和数据大小时，轮询和计时可以正常工作，但如果您有数千个或更多，您要么需要服务器场，要么需要其他解决方案。我不认为我会有成千上万的连接，但是当我开发应用程序时，我意识到它需要从服务器中提取的数据会随着我的每一个新想法而增加。所以......有什么想法吗？我'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:05:08.590

好吧，我找到了我的问题的答案，但不完全是一个解决方案。为了在空中应用程序和服务器以及其他客户端之间保持双向开放通道，我需要用 php、java、c++、python 或其他语言编写自己的 XMLSocket 服务器，并使用 XMLSocket(); Flex 中的功能。我设法在这里找到另一个例子：[http ://www.kilometer0.com/blog/code/php-xml-socket-server/](http://www.kilometer0.com/blog/code/php-xml-socket-server/). 对于那些像我一样希望开发广泛平台的人来说，它仍然不是答案，因为 php XMLSock 仍然无法处理那么多连接。此外，当我继续阅读时，我发现它比一般的 http 网站要复杂一些，因为您需要根据您的桌面应用程序构建您的套接字服务器。一个好的解决方案似乎是用 C++ 编写你的套接字服务器，因为它可以很好地处理错误和大量的连接。谢谢大家的指点。

# c# - 字符串格式化必须调用 javascript 函数 onclick(mvc) 的锚点

> ID：13740283
> 
> 赞同：4
> 
> 时间：2012-12-06T09:12:48.260
> 
> 标签：c#, javascript, asp.net-mvc

```
 goog_snippet_vars = function(){
var w = window;
w.google_conversion_id ="xxxxx";
w.google_conversion_label ="xxxxxx";
w.google_conversion_value ="xxxxxx";
},
goog_report_conversion = function(url) {
goog_snippet_vars();
window.google_conversion_format = '3';
window.google_is_call = true;
var opt = new Object();
opt.onload_callback = function() {
if (typeof(url) != 'undefined') {window.location = url;}
}
var conv_handler = window['google_trackConversion'];
if (typeof(conv_handler) == 'function') {conv_handler(opt);}
}
</script> 
```

我正在使用来自服务器的 stringbuilder 将上述代码转储到页面（onload）中。我正在使用 string.format 从服务器端生成 html 到网页上没有显示的电话，点击时必须调用上述脚本中的函数之一。我为此使用了以下代码

```
string.Format("<a href=\"tel:{0}\" onclick=\"Javascript: goog_report_conversion(tel{0}); return false;\">{0}</a>", PhoneNumber)); 
```

一切都很好 html 适用于电话号码。问题在于点击它没有点击该功能，它只是导航到以 url 作为 href 值的新页面。

所以如果有任何解决方法请帮助我......谢谢......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T11:05:30.667

最后我解决了这个问题。主要问题是将参数传递给脚本函数。我们必须传递一些东西，比如 goog_report_conversion(567678899);

为此，我使用了 regex.replace 函数来删除特殊字符，如下所示

```
Regex.Replace(sPhone,"[()' '-]",""); 
```

并在函数调用时将其传递给参数。现在我生成的 html 如下所示

```
<a onclick="Javascript: goog_report_conversion(2818669180); return false;" href="tel:(281) 866-9180">(281) 866-9180</a> 
```

所以，最后我以上述方式解决了我的问题。感谢所有试图帮助我的人......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:51:33.860

请尝试将此作为您的第一个代码段

```
<script type="text/javascript">
    goog_snippet_vars = function() {
        var w = window;
        w.google_conversion_id ="xxxxx";
        w.google_conversion_label ="xxxxxx";
        w.google_conversion_value ="xxxxxx";
    };
    goog_report_conversion = function(url) {
        goog_snippet_vars();
        window.google_conversion_format = '3';
        window.google_is_call = true;
        var opt = new Object();
        opt.onload_callback = function() {
            if (typeof(url) != 'undefined') {window.location = url;}
        }
        var conv_handler = window['google_trackConversion'];
        if (typeof(conv_handler) == 'function') {conv_handler(opt);}
    };
</script> 
```

第二个片段是这样的：

```
string.Format("<a href=\"tel:{0}\" onclick=\"javascript:goog_report_conversion('tel:{0}'); return false;\">{0}</a>", PhoneNumber)); 
```

那么，你能发布你的程序吐出的结果 HTML 吗？（仅包含其属性的 a 标签就足够了）。

**更新**：我认为您的电话号码格式会导致错误。您写道，您的 string.Format 调用的结果是

```
<a onclick="Javascript: goog_report_conversion(tel(xxx) xxx-xxxx); return false;" href="tel:(xxx) xxx-xxxx">(xxx) xxx-xxxx</a> 
```

x 代表数字。这有两个问题：

1.  这是一个 JS 语法错误，goog_report_conversion(url) 的参数应该是一个字符串，类似于`goog_report_conversion('tel:xxxxxxxxxx')`. 此错误还会阻止`return false;`执行。

2.  电话号码格式可能是个问题，虽然我不确定，因为我不确定`tel:`URL 可以有什么格式。您可能应该去掉数字中的括号/括号和空格，并遵守我在这里链接的指南：[可能有用的链接 1](http://www.mobilexweb.com/blog/click-to-call-links-mobile-browsers)，[可能有帮助的链接 2](http://www.marketingtechblog.com/hyperlink-phone-number/)

**更新 2**：[此链接](http://www.ietf.org/rfc/rfc2806.txt)可能有用，它描述了“tel:”URL 的语法。

希望有帮助！:)

# lucene - 如何覆盖lucene中的停用词

> ID：13740284
> 
> 赞同：0
> 
> 时间：2012-12-06T09:12:58.827
> 
> 标签：lucene, indexing, stop-words

我正在我的文件夹中创建一个 Lucene 索引，并且正在索引 txt 文件的内容。我希望我的内容没有停用词索引，但是在通过分析器后实际上在搜索时让我脱离了停用词，但我所有的文本索引。我把代码放在下面：

```
 IndexWriter writer = new IndexWriter(new SimpleFSDirectory(indexDir),
                        new SpanishAnalyzer(Version.LUCENE_36),
                        create,
                        IndexWriter.MaxFieldLength.UNLIMITED);
    if (!file.isHidden() && file.exists() && file.canRead()) {

                String fileName = file.getName();
                String type = Files.extension(file);
                if(type==null)
                {
                    type="";
                }
                Document d = new Document();

                d.add(new Field("Name",fileName,
                                Store.YES,Index.ANALYZED,Field.TermVector.YES));
                d.add(new Field("Type",type,
                                Store.YES,Index.ANALYZED));
                if(("txt".equals(type.toLowerCase())) || ("log".equals(type.toLowerCase())))
                {
                    String Content = Files.readFromFile(file,"ASCII");
        d.add(new Field("Content",Content,Store.YES,Index.ANALYZED, Field.TermVector.YES));
                }
    }

    writer.addDocument(d); 
```

示例文件的内容是“安装目录”。如果我对“a”、“to”、“of”进行搜索，但没有找到任何东西，这意味着我已经成功通过了分析器。使用该工具查看索引 LUKE，我看到该字段包含“安装到目录”，但查看 Field.TermVector 仅包含：“安装”和“目录”，这就是我想要出现的全部内容场。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T17:20:34.357

您正在使用 SpanishAnalyzer() 的默认构造函数。您应该使用[带有停用词的那个作为参数](http://lucene.apache.org/core/old_versioned_docs/versions/3_1_0/api/contrib-analyzers/org/apache/lucene/analysis/es/SpanishAnalyzer.html#SpanishAnalyzer%28org.apache.lucene.util.Version,%20java.util.Set%29)。

如下创建索引器：

```
IndexWriter writer = new IndexWriter(new SimpleFSDirectory(indexDir),
                    new SpanishAnalyzer(Version.LUCENE_36, new HashSet<String>()),
                    create,
                    IndexWriter.MaxFieldLength.UNLIMITED); 
```

在这里，我们传递了一组空的停用词，因此覆盖了没有停用词的默认值。您应该在此处阅读有关[lucene 停用词的](http://ankitjain.info/ankit/2009/05/27/lucene-search-ignore-word-list/)更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:32:24.587

尝试为 : 使用不同的构造函数，`SpanishAnalyzer`而不是

`new SpanishAnalyzer(Version.LUCENE_36)`
利用
`new SpanishAnalyzer(Version.LUCENE_36, Collections.emptySet())`

# android - 跟踪android文本到语音模块中的单词

> ID：13740287
> 
> 赞同：1
> 
> 时间：2012-12-06T09:13:04.733
> 
> 标签：android, text-to-speech

我正在尝试构建一个应用程序，其中设备使用 tts 模块读取故事，当它到达特定单词时，我想显示图像。我的 TTS 模块工作正常，我是否可以知道文本到语音模块所说的单词是什么，以便我可以获取适当的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:45:55.507

也许，将您的阅读内容分成几个小字。每次您的应用开始说话时，设置一个特定的[KEY_PARAM_UTTERANCE_ID](http://developer.android.com/reference/android/speech/tts/TextToSpeech.Engine.html#KEY_PARAM_UTTERANCE_ID)。然后什么时候使用[onStart](http://developer.android.com/reference/android/speech/tts/UtteranceProgressListener.html)回调来知道应用程序何时在说特定的`KEY_PARAM_UTTERANCE_ID`.

# canvas - html5画布贝塞尔曲线 - 如何构造反射？

> ID：13740296
> 
> 赞同：1
> 
> 时间：2012-12-06T09:13:17.827
> 
> 标签：canvas, bezier

如果我使用 control.bezierCurveTo 构建贝塞尔曲线，我想以编程方式绘制该曲线的镜面反射。我有第一条曲线的起点/终点和控制点。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:39:00.650

要围绕 x 轴镜像您的点，它只是相同的点，但 y 值为负。

```
(1,4) (-2,2) (4,-6) ==> (1,-4) (-2,-2) (4,6) 
```

同样适用于 y 轴，但使用负 x 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T23:27:16.920

只需围绕您选择的轴镜像控制点。

# tomcat - 如何在 Tomcat 中节流/限制 webapps 的资源？

> ID：13740308
> 
> 赞同：0
> 
> 时间：2012-12-06T09:13:46.793
> 
> 标签：tomcat, web-applications, resources, limit

我在 Tomcat 中运行同一个 webapp 的多个实例。我需要限制

1.  总带宽

2.  记忆

3.  贮存

由tomcat中的每个实例（webapp）使用。有没有办法在tomcat中做到这一点？如果是，如何？

感谢您的答复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:24:42.680

1.  Bandwidth - see [this](https://stackoverflow.com/questions/7832512/how-to-throttle-webservice-calls-in-a-java-web-application) SO post. It only allows throttling based on request count (and not bandwidth) but still better than nothing.

2.  I'm afraid this is not possible as you are running multiple webapps under the same JVM. There are some [papers](http://vmkit.llvm.org/publications/osgi_dsn.html) elaborating this should be possible if you use OSGi but I don't believe it is anywhere close to production-ready.

3.  You are much better off achieving this using [OS disk quotas](http://www.udel.edu/topics/faqs/coplandquota.html) rather than programmatically.

# ios - 从浏览器打开本机 iOS 应用程序，如何？

> ID：13740312
> 
> 赞同：0
> 
> 时间：2012-12-06T09:13:53.270
> 
> 标签：ios, html

我想知道当 iOS 用户点击 Facebook 中的 Like us 链接时，我将如何从网络浏览器 (html5) 打开本机 ios App Facebook 或 Twitter。

有谁知道如何引用这个原生 iOS 应用程序，以及这个应用程序中的“签入”页面的链接/重定向命令是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:19:09.550

我相信你应该有一个 index.html 文件。使用 firefox 或 google chrome 浏览器打开它，然后您可以检查元素。

如果您的应用程序确实有许多 html 页面，那么这不是一个好的编程习惯。通常使用 jquery mobile，每个页面都是一个 div，您可以使用 jquery、ajax、json 以及您需要引用的任何 javascript 库为元素设置动画

# ruby-on-rails - 会话变量在切换后不持久

> ID：13740313
> 
> 赞同：0
> 
> 时间：2012-12-06T09:13:57.780
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我试图在显示页面上实现基本和高级查看模式之间的切换，本质上是通过链接打开/关闭基本/高级 div。[在控制器中，我将查看模式存储在会话变量中（使用与http://railscasts.com/episodes/199-mobile-devices](http://railscasts.com/episodes/199-mobile-devices)类似的方法）。问题：切换查看模式可以正常工作，但是当我在非默认查看模式中单击指向不同显示页面的链接时，它会将我带回默认模式，这是为什么呢？

**显示.html.erb**

```
<% if viewing_mode? %>
    <%= link_to "Advanced", {mode: 0}  %>
<% else %>
    <%= link_to "Basic", {mode: 1} %>
<% end %>

<% if viewing_mode? %>
  <div class="container" id="basic">
   This is the basic view
  </div>

<% else %>
  <div class="container" id="advanced">
  This is the advanced view
  </div>
<% end %> 
```

**控制器**

```
before_filter :prepare_for_viewing

def viewing_mode?
  if session[:viewing_param]
    session[:viewing_param] == "1"
  else
    session[:viewing_param] == "0"
  end
end
helper_method :viewing_mode?

def prepare_for_viewing
  session[:viewing_param] = params[:mode] if params[:mode]
end 
```

**编辑 1**：显示会话参数表明 :viewing_params 更改为：

```
"viewing_param"=>"1" 
```

至

```
"viewing_param"=>"1.json" 
```

单击显示页面上的链接后。这可能是问题所在，但是为什么viewing_param会这样修改呢？

**编辑 2**：我在添加 hack 后让它工作，将“a.json”设置为“a”，这不是一个很好的解决方案，但它可以工作：

```
def prepare_for_viewing
  session[:viewing_param] = params[:mode][0] if params[:mode]
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:24:11.013

这个方法好像不对？我发表了一些评论

```
def viewing_mode?
  # this is true for all values except nil and false
  if session[:viewing_param]
    # should it be test here? Or setting a value?
    session[:viewing_param] == "1"
  else
    # can never be "0" here, because that value gives true in the test above
    session[:viewing_param] == "0"
  end
end 
```

你正在使用这个：

```
link_to "Advanced", {mode: 1} 
```

对于高级链接，在这个：

```
before_filter :prepare_for_viewing
def prepare_for_viewing
  session[:viewing_param] = params[:mode] if params[:mode]
end 
```

您正在设置`session[:viewing_param]`为`"1"`（高级时），然后在

```
def viewing_mode?
  if session[:viewing_param]
    session[:viewing_param] == "1"
  else
    session[:viewing_param] == "0"
  end
end 
```

你正在变得真实，这会给你“基本”的观点，因为：

```
<% if viewing_mode? %>
  <div class="container" id="basic">
   This is the basic view
  </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:40:25.973

这就是我认为您正在尝试做的事情（取决于默认的模式）：

```
before_filter :prepare_for_viewing
helper_method :advanced_view_mode?, :basic_view_mode?

def advanced_view_mode?
  session[:viewing_param] == '1'
end

def basic_view_mode?
  !advanced_view_mode?
end

def prepare_for_viewing
  session[:viewing_param] = params[:mode] if params[:mode]
end 
```

也尽量不要重复标记，但如果你有完全独立的视图，那么一起渲染不同的页面可能是值得的。

```
<div class="container" id="<%= advanced_view_mode? ? 'advanced' : 'basic' %>">

  This is common content

  <%= render 'advanced/partial' if advanced_view_mode? %>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T21:32:05.600

有同样的问题 - 会话变量没有持久化，我使用了很多会话变量，所以我认为这是重新创建错误的关键

但是我已经通过使用 cookie 而不是 session 克服了这个问题

只是简单地代替

```
session[:viewing_param] = ..
if session[:viewing_param] 
```

利用

```
cookies[:viewing_param] = ..
if cookies[:viewing_param] 
```

有可用的高级选项

```
 cookies[:key] = {
   :value => 'dummy value',
   :expires => 1.month.from_now,
   :domain => 'domainname.com'
 } 
```

以下是删除它的方法：

```
 cookies.delete(:key, :domain => 'domain.com') 
```

切换到 cookie 后，我无法发现任何非持久性问题。

# php - 填写用户 php 的表单

> ID：13740319
> 
> 赞同：1
> 
> 时间：2012-12-06T09:14:19.370
> 
> 标签：php

当用户提交表单时，使用 if 语句进行验证，如下所示

```
if (strlen($_POST['password']) < 5)
{
    $data['errors'][] = 'Too short';
}
elseif ($_POST['password'] != $_POST['confirm_password'])
{
    $data['errors'][] = 'doesnt match';
} 
```

验证完成后，我们检查是否有任何错误

```
if (!$data['errors']) 
```

如果不是，我们继续并将数据填充到数据库中

但是，如果有错误，用户需要重新填写整个表格，我不希望这样，如果它是合法的，我需要返回一些数据

```
if (!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL))
{
    $data['errors'][] = 'E-mail not valid';
} 
```

像这里一样，如果密码验证失败但电子邮件验证正常，我想退还表单中已经有价值的电子邮件。我是否需要在每个验证检查上添加一个 else 语句，例如 } else { $data['postback']['email']; 或者我可以用另一种更简单的方式做到这一点吗？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:43:30.950

您可以只对正在检查的字段使用 AJAX 或 Javascript/JQuery，因此其余字段的值将保持不变。

使用这种方法，您可以保留用户输入，因为您不需要将页面提交到服务器。它也使服务器更好，因为它不必处理额外的请求。

例如：您有登录名和密码字段。您需要验证数据库中是否已存在登录名，并检查密码字段是否匹配。
您还可以有一些不需要验证的名为 randomText 的文本输入。

因此，对于登录字段，您使用 AJAX：当 onBlur 事件发生时，您将数据发送到服务器，服务器检查此登录是否存在于数据库中并发送回答案。根据您的回答，您使用 javascript/jQuery 向用户显示错误。如果页面验证出现错误，请务必禁用页面提交。
对于密码验证，您只需使用 Javascript 并检查字段值是否匹配，如果不匹配 - 您再次编写错误。
当您执行所有这些检查时，randomText 字段保持不变，因为您没有将页面提交到服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T09:22:32.147

您必须将每个值放回呈现的 HTML 输入元素中。如果您过滤任何值并且您希望在 HTML 中使用过滤后的值，则必须使用`filter_var`函数的返回值。

```
<?php
$filtered = filter_var($_POST['email'], FILTER_VALIDATE_EMAIL); 
```

HTML：

```
<input type="text" value="<?php echo $filtered ?>" /> 
```

例如。如果您使用支持某种形式呈现的模板系统或框架，例如 Zend Framework 或 Symfony，它会变得更容易一些。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T09:25:57.280

做这样的事情

```
<input value="<?= $_POST['email']; ?>" type="text" name="email" /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T09:26:54.223

```
<input type="text" name="email" value="<?php if(isset($_POST['email'])){echo $_POST['email']; } ?>" /> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-08T08:34:57.023

通过在验证中添加 else 语句解决了问题，如果验证成功，我会将数据返回到渲染布局如果验证中的其他内容失败。

```
if (!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL))
{
    $data['errors'][] = 'E-mail not valid';
}
else
{
    $data['post']['email'] = $_POST['email'];
} 
```

然后我只需传回 $data 数组，其中包含 post.email 变量并将其输出到屏幕上。

# java - 速度模板 DateFormat

> ID：13740324
> 
> 赞同：1
> 
> 时间：2012-12-06T09:14:45.303
> 
> 标签：java, velocity

我在转换日期格式时遇到问题，但问题是在连接时。这是在速度模板中使用的代码。

```
#if($order.ordqty)"$order.ordqty" 
#end 

#if($order.etd) "$format.getFormatedDate("dd-MM-yyyy", $order.etd)" 
#end 
```

输出：这不起作用

```
#if($order.ordqty)"$order.ordqty 
#end

#if($order.etd) @$order.etd" 
#end 
```

输出：效果很好 --output==1200@Thursday 10 2012

```
#if($order.etd) "$format.getFormatedDate("dd-MM-yyyy", $order.etd)" 
#end 
```

输出：效果很好 2012 年 12 月 12 日

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:40:03.067

```
#if($finaldate) 
   #set( $finaldate = $format.getFormatedDate("dd-MM-yyyy", $order.etd) )    
   "$finaldate" 
#end 
```

或者

```
#if($DOMASTER.issuedate) 
     $format.getFormatedDate("dd-MM-yyyy", $DOMASTER.issuedate) 
#end 
```

由于存在“”问题，它可以通过创建另一个用于日期操作的变量来解决。

# apache-flex - 无法使用 selenium flex api 执行单击按钮？

> ID：13740326
> 
> 赞同：2
> 
> 时间：2012-12-06T09:14:50.997
> 
> 标签：apache-flex, selenium, automation

我有一个已经用 Selenium Flex 重新编译的 Flash 应用程序。
使用 FlashFirebug，我能够找到该应用程序的定位器，并且我已经使用 Selenium RC 的 selenium flex API 编写了脚本，当我运行脚本时，这些定位器被识别但无法执行操作。
在 selenium IDE 中，也可以识别这些定位器，但无法执行**单击等操作。**在这里，我已将 user-extension.js 附加到我的 IDE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T04:33:44.610

这就是我如何找到问题的根本原因：

*   确保您的 *.swf（flex 应用程序）是针对[Selenium-Flex API](http://code.google.com/p/sfapi/ "Selenium-Flex API") *.swc 库正确 编译的
    *   在带有 Javascript 调试控制台的网络浏览器中运行您的 swf（例如带有[Firebug](http://getfirebug.com "萤火虫")的 Firefox ）。
    *   使用 Javascript 控制台，使用 DOM ID 获取对 swf 的引用 -`document.getElementById(swfId)`
    *   现在，通过运行它为 Selenium 公开的测试命令之一来测试 Flex-Selenium 是否已编译到您的 swf OK 中。这些命令是在上一步中获得的对象上执行的 Javascript 函数 - 有关详细信息，请参阅[从 Javascript 访问 Flex 应用程序](http://livedocs.adobe.com/flex/3/html/help.html?content=passingarguments_5.html "来自 Javascript 的 Flex")。Flex-Selenium 公开的所有命令都可以在[Commmands.as](http://code.google.com/p/sfapi/source/browse/trunk/flex_source/src/sfapi/commands/Commands.as "Flex-Selenium 命令.as")的 Flex-Selenium 源代码中找到。例如，`ExternalInterface.addCallback("doFlexMouseDown", mouseCommands.doFlexMouseDown);`意味着一个名为*doFlexMouseDown*（在[MouseCommands.as](http://code.google.com/p/sfapi/source/browse/trunk/flex_source/src/sfapi/commands/MouseCommands.as "鼠标命令.as")中定义）的 Javascript 函数已在您的 swf 中公开。执行 Javascript 表达式`typeof document.getElementById('swfId').doFlexMouseDown`应计算为*函数*（不是*未定义*）。您还应该能够在没有错误的情况下调用此函数 -您的 swf 中某个对象（例如按钮）的 ID`document.getElementById(swfId).doFlexClick('idOfFlexObject')`在哪里。`idOfFlexObject`
*   因此，现在您应该能够找到您在通过 selenium 调用您的 swf 时遇到问题的命令，并针对 swf 测试它们是否存在 Javascript 调试控制台中的错误。
    *   如果您的 swf 确实是针对您的 swf 正确编译的，那么当您针对您的 swf 调用相应的 Javascript 函数时，您很可能会收到错误（Javascript 函数本身已正确定义并暴露给 Javascript，但您的swf 当它被调用时）。然后，您可以通过下载 Flex-Selenium 的源代码（请参阅前面的超链接）并将 flex 调试器附加到您的 swf 并在其搜索路径中使用此源代码来查找此错误的原因。您将在执行失败的命令时设置一个断点。根据我自己的经验，我不得不自定义和修复 Flex-Selenium 源代码中的小错误。
    *   如果您没有在 Javascript 调试控制台上观察到错误，您应该发布堆栈跟踪，其中 Selenium RC 无法针对您的 swf 运行命令，因为您使用或配置 Selenium RC（或 Selenium IDE ) 是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T10:49:43.887

通过 SFAPI（Slenium Flex API）点击 flex 应用程序非常简单，您必须使用 SeleniumFlexAPI.swc 文件编译您的 flex 代码，您将在 SFAPI 文件夹中获得该文件，对于这些 SFAPI 文件，您需要按照以下步骤操作，[请参见此处](https://stackoverflow.com/questions/10044001/how-can-we-automate-flash-element-click-action-in-selenium/)

或[在此处查看示例](http://asktofolks.com/38/how-to-handle-flex-in-selenium-web-driver)

# ffmpeg - 如何暂停ffmpeg文件读取？

> ID：13740331
> 
> 赞同：1
> 
> 时间：2012-12-06T09:15:08.253
> 
> 标签：ffmpeg

我的基于 ffmpeg 的播放器播放从服务器下载的 mpeg-ts 文件。我希望我的播放器能够播放视频文件，即使它正在下载。

如果下载速度快于读取速度没有问题，否则我的播放器会崩溃。我的问题是，无论如何要暂停 ffmpeg 文件读取以等待可用数据继续进行？

# c - 非线性 lut 对数精度

> ID：13740334
> 
> 赞同：0
> 
> 时间：2012-12-06T09:15:13.023
> 
> 标签：c, math

目前我计算日志如下：

```
#define MAXLOG 1001
double myloglut[MAXLOG];
void MyLogCreate()
{
    int i;
    double exp, expinc;
    expinc = (2.0 - 0.1) / MAXLOG;
    for (i = 0, exp = 0.1; i <= MAXLOG; ++i, exp += expinc)
            myloglut[i] = log(exp);
    myloglut[478] = 0; // this one need to be precise
}

double MyLog(double v)
{
    int idx = (int)((MAXLOG*(v - 0.1)) / (2.0 - 0.1));
    return myloglut[idx];
} 
```

如您所见，我只对 range 感兴趣`0.1 - 2.0`。但是，我需要更精确的`0`. 我怎样才能实现非线性计算？还有什么方法可以在这个函数中使用一些插值来获得更好的精度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:27:44.007

## 最新版本

```
#include <stdio.h>                  // for input/output.
#include <math.h>                   // for mathmatic functions (log, pow, etc.)

// Values
#define MAXELM 1000                 // Array size
#define MINVAL 0.1                  // Minimum x value
#define MAXVAL 1.9                  // Maximum x value
#define EXPVAR 1.4                  // Exponent which makes the variation non linear. If set to 1, the variation will be linear.
#define ACRTPT (MINVAL + MAXVAL)/2  // Accurate point. This value is used to know where to compute with maximum accuracy. Can be set to a fixed value.
// Behavior
#define STRICT 0                    // if TRUE: Return -1 instead of the floored (or closest if out of range) offset when (x) hasn't been calculated for this value.
#define PNTALL 0                    // if TRUE: Print all the calculated values.
#define ASKFOR 1                    // if TRUE: Ask for a x value then print the calculated ln value for it.

// Global vars
double results[MAXELM];             // Array to store computed values.

// Func: offset to var conversion
double getvar(int offset)
{
    double x = (double)MINVAL + ((double)MAXVAL - (double)MINVAL) * (double)offset / (double)MAXELM;

    if(x >= (double)ACRTPT)
        x = pow(x - (double)ACRTPT, (double)EXPVAR) + (double)ACRTPT;
    else
        x = -pow((double)ACRTPT - x, (double)EXPVAR) + (double)ACRTPT;
    // This ^ is the equation used when NONLIN = 1; to have a non linear repartition. Feel free to change it. The inverse equation is in `int getoffset(double)`.
    return x;
}

// Func: var to offset conversion
int getoffset(double var)
{
    double x = var;

    if(x >= (double)ACRTPT)
        x = pow(x - (double)ACRTPT, 1.0/(double)EXPVAR) + (double)ACRTPT;
    else
        x = -pow((double)ACRTPT - x, 1.0/(double)EXPVAR) + (double)ACRTPT;
    // This ^ is the equation used when NONLIN = 1; to calculate offset with a non linear repartition. Feel free to change it (but it must be the inverse of the one in
    // `double getvar(int)` for this to work.). These equations are tied, so you cannot modify one without modifying the other. They are here because
    // `pow(negative, non-integer)` always returns `-nan` instead of the correct value. This 'trick' uses the fact that (-x)^(1/3) == -(x^(1/3)) to cicumvent the
    // limitation.

    int offset = (x - (double)MINVAL) * (double)MAXELM / ((double)MAXVAL - (double)MINVAL);
#if STRICT
    if(getvar(offset) != var)
        return -1;
    return (offset < 0)?-1:(offset > (MAXELM - 1))?-1:offset;
#else
    return (offset < 0)?0:(offset > (MAXELM - 1))?MAXELM - 1:offset;
#endif
}

// Func: main.
int main(int argc, char* argv[])
{
    int offset;
    for(offset = 0; offset < MAXELM; offset++)
        results[offset] = log(getvar(offset));

#if PNTALL
    for(offset = 0; offset < MAXELM; offset++)
    {
        printf("[log(%lf) = %lf] ", getvar(offset), results[offset]);
        if(!((offset + 1) % 6))
            printf("\n");
    }
    printf("\n");
#endif

#if ASKFOR
    double x;
    printf("log(x) for x = ");
    scanf("%lf", &x);
    if((offset = getoffset(x)) < 0)
        printf("ERROR: Value for x = %lf hasn't been calculated\n", x);
    else
        printf("results[%d]: log(%lf) = %lf\n", offset, getvar(offset), results[offset]);
#endif

    return 0;
} 
```

最新版本的特点：

*   使用固定大小的数组。
*   仅计算存储的值（不会为一个数组单元计算多个值）。
*   使用函数从值中获取偏移量和从偏移量中获取值，因此您不必存储`log`已计算出的值。

与上一个版本相比的优点：

*   不使用`cbrt`，`pow`改为使用。
*   允许在编译时指定微积分变量的增长。（因此这些值或多或少围绕准确的点 ( `ACRTPT`) 分组）

* * *

## 第三版

```
#include <stdio.h>                  // for input/output.
#include <math.h>                   // for mathmatic functions (log, pow, etc.)

// Values
#define MAXELM 1000                 // Array size
#define MINVAL 0.1                  // Minimum x value
#define MAXVAL 1.9                  // Maximum x value
#define ACRTPT (MINVAL + MAXVAL)/2  // Accurate point. This value is used to know where to compute with maximum accuracy. Can be set to a fixed value.
// Behavior
#define NONLIN 1                    // if TRUE: Calculate log values with a quadratic distribution instead of linear distribution.
#define STRICT 1                    // if TRUE: Return -1 instead of the floored (or closest if out of range) offset when (x) hasn't been calculated for this value.
#define PNTALL 0                    // if TRUE: Print all the calculated values.
#define ASKFOR 1                    // if TRUE: Ask for a x value then print the calculated ln value for it.

// Global vars
double results[MAXELM];             // Array to store computed values.

// Func: offset to var conversion
double getvar(int offset)
{
    double x = (double)MINVAL + ((double)MAXVAL - (double)MINVAL) * (double)offset / (double)MAXELM;
#if NONLIN
    x = pow((x - ACRTPT), 3) + ACRTPT;
    // This ^ is the equation used when NONLIN = 1; to have a non linear repartition. Feel free to change it. The inverse equation is in `int getoffset(double)`.
#endif
    return x;
}

// Func: var to offset conversion
int getoffset(double var)
{
#if NONLIN
    int offset = ((
        cbrt(var - ACRTPT) + ACRTPT
    // This ^ is the equation used when NONLIN = 1; to calculate offset with a non linear repartition. Feel free to change it (but it must be the inverse of the one in
    // `double getvar(int)` for this to work.)
                    ) - (double)MINVAL) * (double)MAXELM / ((double)MAXVAL - (double)MINVAL);
#else
    int offset = (var - (double)MINVAL) * (double)MAXELM / ((double)MAXVAL - (double)MINVAL);
#endif
#if STRICT
    if(getvar(offset) != var)
        return -1;
    return (offset < 0)?-1:(offset > (MAXELM - 1))?-1:offset;
#else
    return (offset < 0)?0:(offset > (MAXELM - 1))?MAXELM - 1:offset;
#endif
}

// Func: main.
int main(int argc, char* argv[])
{
    int offset;
    for(offset = 0; offset < MAXELM; offset++)
        results[offset] = log(getvar(offset));

#if PNTALL
    for(offset = 0; offset < MAXELM; offset++)
    {
        printf("[log(%lf) = %lf] ", getvar(offset), results[offset]);
        if(!((offset + 1) % 6))
            printf("\n");
    }
    printf("\n");
#endif

#if ASKFOR
    double x;
    printf("log(x) for x = ");
    scanf("%lf", &x);
    if((offset = getoffset(x)) < 0)
        printf("ERROR: Value for x = %lf hasn't been calculated\n", x);
    else
        printf("results[%d]: log(%lf) = %lf\n", offset, getvar(offset), results[offset]);
#endif

    return 0;
} 
```

这个版本比以前的版本更干净，更容易维护。如果您还需要什么，请发表评论。

您可以使用文件顶部的宏配置其行为。

特点：

*   使用固定大小的数组。
*   仅计算存储的值（不会为一个数组单元计算多个值）。
*   使用函数从值中获取偏移量和从偏移量中获取值，因此您不必存储`log`已计算出的值。

* * *

## 第二版

好吧，这是我的第二个解决方案。请参阅下面的原始评论。

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#define MIN_INC 0.001    // This is the minimum increment. If its set to 0, when tmp will be equal to avg, it will never leave this state, since INC_MUL * (tmp - avg)^2 will be 0.
#define INC_MUL 0.2      // This is a number which influences the precision you will get. The smaller it is, the more precise you will be, and the greater will be your result array cardinality.

typedef struct {
    double offset;
    double value;    // value = log(offset). Since the results are not linarly widespread, this is pretty important.
} logCalc;

// Here, we need to use a pointer on a logCalc pointer, since we want to actually SET the address of the logCalc pointer, not the address of one of its copies.
int MyLogCreate(logCalc** arr, double min, double max)
{
    if((*arr) != NULL)
        return 0;
    unsigned int i = 0;
    double tmp, avg = (max + min) / 2.0;
    for( ; min < avg; min += (INC_MUL * ((avg - min) * (avg - min)) + MIN_INC))
    {
        (*arr) = (logCalc*)realloc((*arr), sizeof(logCalc) * (i + 1));
        (*arr)[i].offset  = min;
        (*arr)[i++].value = log(min);
    }
    for(tmp = avg ; tmp < max; tmp += (INC_MUL * ((tmp - avg) * (tmp - avg)) + MIN_INC))
    {
        (*arr) = (logCalc*)realloc((*arr), sizeof(logCalc) * (i + 1));
        (*arr)[i].offset  = tmp;
        (*arr)[i++].value = log(tmp);
    }
    return i;
}

int main(int argc, char** argv)
{
    logCalc *myloglut = NULL;
    unsigned int i,
        t = MyLogCreate(&myloglut, .1, 1.9);
    for(i = 0; i < (t-1); i++)
    {
        printf("[log(%lf) = %lf], ", myloglut[i].offset, myloglut[i].value);
        if(!((i+1)%6))         // Change 6 to what's best for your terminal $COLUMNS
            printf("\n");
    }
    printf("\n");
    free(myloglut);
    return 0;
} 
```

* * *

## 原评论

您计算的线性度来自您使用线性增量这一事实。在 for 循环的每次迭代中，您递增`exp`.`(2.0 - 0.1) / MAXLOG`

要在 0 附近获得更精确的值，您将需要：

1.  定义更大的范围 - 更大的数组 - （能够在 0 附近存储更多值）
2.  使用非线性增量。该增量可能取决于`i`（或`exp`取决于您的操作方式），因此您可以准确地知道要计算的数字的“偏移量”（以及您需要增加的数量`exp`）。当然，你会在 0 附近计算更多的结果。

这是我目前的实现：

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#define CALCULATE_UNTIL 2.0
#define PRECISE_UNTIL   1.0

typedef struct {
    double offset;
    double value;
} logCalc;

logCalc *myloglut = NULL;

int MyLogCreate()
{
    double exp = 0.1;
    int i;
    for (i = 0; exp <= CALCULATE_UNTIL; exp += (exp < PRECISE_UNTIL)?0.0001898:0.001898)
    {
        myloglut = realloc(myloglut, sizeof(logCalc) * (i + 1));
        myloglut[i].offset = exp;
        myloglut[i++].value = (i == 4780)?0:log(exp);
    }
    return i; // So you know how big the array is. Don't forget to free(myloglut); at the end of your code.
}

int main(int argc, char** argv)
{
    int i,
    t = MyLogCreate();
    for(i = 0; i < t; i++)
    {
        printf("[log(%lf) = %lf], ", myloglut[i].offset, myloglut[i].value);
        if(!(i%6))    // For formatting purposes.
            printf("\n");
    }
    printf("\n");
    free(myloglut);
    return 0;
} 
```

我还创建了一个新类型来存储 exp 的值，这对于了解结果是什么值的日志可能很有用。

*更新：*我不确定你想做什么。你想精确到 log(x) = 0 还是 x = 0？在第一种情况下，我可能必须再次重新编写代码才能使其按您的意愿工作。此外，您希望结果在接近 0 时更精确，还是希望结果在给定范围内更精确（就像现在一样）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:43:02.903

将您的函数“原点”从零或 0.1 转移到 1.0。

```
 for (i=-478;i<523;i++) {
     double j = 1.0 + (double)i / 523.0;
     myloglut[i+478] = log(j);
 } 
```

此函数仅选择两个点：1.0 和 2.0 作为 1.0 + (523.0 / 523.0) == 2.0。

那么第一个值是：

```
myloglut[0] = log(0.0860420650095602); 
```

更“自然”的大小是 973，这将使除数为 512（确切地说），第一个条目将是 51/512 = ~0.099609375。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:02:53.340

这需要多准确和多快？你可以用分段切比雪夫近似做一些很好的事情。您可以使用切比雪夫近似的阶数来控制精度（高阶 = 更慢但更准确）。我还建议通过将你的 double 分解为尾数（1 到 2 之间）和指数（2 的幂，其对数就是指数 times `log(2)`，你可以预先计算）来减少参数。

我不认为您可以在 [0.1, 2] 上提出任何非常准确的信息，而无需在需要日志时进行更多算术运算或使用巨大的表并引发所有缓存和不可预测的内存访问问题。但是，如果您有足够的时间，请考虑进行分段切比雪夫近似。（如果你想让我向你展示使用切比雪夫近似的代码，请在评论中告诉我，我会更新这篇文章。）

**编辑**：使用切比雪夫近似的对数代码。精确到 1e-5。

```
double mylog(double x) {
  static double logtwo = log(2);
  static double tbls[4][5] = {{0,0,0,0,0},
    {-.9525934480e-2,-.87402539075,-1.135790603,1.1519051721,-1.7063112037},
    {.53892330786e-3,-1.0117355213,-.4085197450,-.6242237228,0},
    {.60393290013e-6,-1.0001523639,-.4940510719,-.4058961978,0}};
  if (x>1) return -mylog(1/x);
  int expo,e2;
  x = 1-frexp(x, &expo);
  double y = frexp(x, &e2);
  if (e2 < -3) e2 = -3;
  double *tbl = tbls[-e2];
  return expo*logtwo + tbl[0]+x*(tbl[1]+x*(tbl[2]+x*(tbl[3]+x*tbl[4])));
} 
```

我使用 Maple 计算了 Chebyshev 近似值，并将它们扩展为传统的多项式以提高速度。

如果您想要非常接近 1 的良好精度，您可以更改`if (e2 < -3) e2 = -3`该行并将其添加到对应于泰勒近似值`{0,-1,-.5,-1/3.,-.25}`的末尾。`tbls`如果您希望它更快，请在 1/2 和 3/4 之间计算一个更好的 log(x) 三次近似值，并将其存储在`tbls`.

# ios - 我可以自己崩溃我的应用程序吗？

> ID：13740335
> 
> 赞同：-3
> 
> 时间：2012-12-06T09:15:13.590
> 
> 标签：ios, uibutton

iOS APP问题

我有一个我想要的特殊情况有一个按钮，当它出现时`onClicked`，APP会自行崩溃（控制）

**例子**

```
[btn addTarget:self action:@selector(noThisMethod) forControlEvents:UIControlEventTouchUpInside]; 
```

这只是在代码中添加后的工作......『崩溃』。

但是....这个应用程序会被苹果批准吗？还是会被苹果拒绝？

如果这将被苹果​​拒绝，是否有任何文件维护它？

感谢您的大力帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:31:27.520

引用 App Store 审查指南第 2 节：

> **2.1**崩溃的应用将被拒绝

此外-> [https://stackoverflow.com/a/8491688/1155387](https://stackoverflow.com/a/8491688/1155387)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:17:02.177

如果他们赶上崩溃，那么不，他们不会批准它。

如果他们错过了它并且没有让它自己崩溃，那么是的，他们会批准它。

# macos - 使用默认值从 Mac 上的命令行修改 Plist

> ID：13740337
> 
> 赞同：27
> 
> 时间：2012-12-06T09:15:33.370
> 
> 标签：macos, shell, console, plist, property-list

**有谁知道如何使用默认值**从命令行修改 Plist 文件？`URL types`目前数组下有两个字典；我需要添加另一个。

![在此处输入图像描述](../Images/fa1f06ed21bd4ea67b90a823b36fa9a0.png)

我尝试过的每个命令要么替换了整个字典，要么创建了一个名为`URL types`而不是编辑它的新数组。关于如何在默认设置（控制台 Mac 应用程序）而*不是*PlistBuddy 中完成此操作的任何想法？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-10-31T17:19:49.673

XML 属性列表可以直接在文本编辑器中查看，正如上面 Lauri 的回答所建议的那样。

二进制属性列表（在 Apple 自己的许多运输应用程序中都有）需要首先转换为 XML 属性列表格式。

plutil 可用于在任一方向执行此操作。不过要小心，因为属性列表已就地修改，因此您希望首先制作属性列表的副本。

```
plutil -convert xml1 binary-property-list-to-convert.plist 
```

并将其转换回二进制：

```
plutil -convert binary1 XML-property-list-to-convert.plist 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-12-06T15:03:20.803

在文本编辑器中打开 Info.plist 以查看实际标识符。

```
defaults write Absolute/Path/to/Info.plist CFBundleURLTypes -array-add '<dict>
<key>CFBundleTypeRole</key>
<string>Viewer</string>
<key>CFBundleURLName</key>
<string>Mac App Store URL</string>
<key>CFBundleURLSchemes</key>
<array>
<string>macappstore</string>
</array>
</dict>' 
```

`pbpaste | pl`将 XML 转换为旧式格式。

`defaults write Info.plist CFBundleURLTypes -array-add '{CFBundleTypeRole=Viewer; FBundleURLName="Mac App Store URL";CFBundleURLSchemes=(macappstore);}'`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-06T18:28:53.337

OSX 有 PlistBuddy，这让这变得简单多了。

[https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man8/PlistBuddy.8.html](https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man8/PlistBuddy.8.html)

另请参阅：[https ://github.com/kevinSuttle/OSXDefaults/blob/master/REFERENCE.md](https://github.com/kevinSuttle/OSXDefaults/blob/master/REFERENCE.md)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-06T14:50:42.197

使用`-array-add`值类型：

```
defaults write /path/to/plist/file "URL Types" -array-add '{"URL Identifier" = "com.myapp.2"; "URL Schemes" = { "two"; }; }' 
```

# c# - 使用 ValueInjecter 展平

> ID：13740338
> 
> 赞同：2
> 
> 时间：2012-12-06T09:15:38.353
> 
> 标签：c#, valueinjecter

我尝试使用[ValueInjecter](http://valueinjecter.codeplex.com/)将多个对象映射到视图模型对象。但它不像我预期的那样工作。

**代码：**

```
class Call
{
    public string Number { get; set; }
    public string CustomerNumber { get; set; }
}

class Operation
{
    public int ID { get; set; }
    public string CallNumber { get; set; }
    public string TimeFrom { get; set; }
}

class Customer
{
    public string Number { get; set; }
    public string Name { get; set; }
}

class CallViewModel
{
    public string Number { get; set; }
    public string CustomerName { get; set; }
    public string OperationTimeFrom { get; set; }
}

class Test
{
    static void Main(string[] args)
    {
        var call = new Call { Number = "001337", CustomerNumber = "000001" };
        var op = new Operation { ID = 1, CallNumber = "001337", TimeFrom = "08:00" };
        var customer = new Customer { Number = "000001", Name = "John Doe" };

        var viewModel = new CallViewModel();
        viewModel.InjectFrom(call, op, customer);

        Console.WriteLine("Number:\t\t\t" + viewModel.Number);
        Console.WriteLine("CustomerName:\t\t" + viewModel.CustomerName);
        Console.WriteLine("OperationTimeFrom:\t" + viewModel.OperationTimeFrom);
        Console.ReadLine();
    }
} 
```

**预期输出：**

```
Number:            001337
CustomerName:      John Doe
OperationTimeFrom: 08:00 
```

**有效输出：**

```
Number:            00001
CustomerName:      
OperationTimeFrom: 
```

**注意**

,`Call.Number`表示为`Number`in`CallViewModel`被 覆盖`Customer.Number`。两者`CustomerName`并`OperationTimeFrom`永远不会获得其指定来源的值`Customer.Name`和`Operation.TimeFrom`。

在那种情况下我该怎么办？ValueInjecter 甚至支持这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T10:54:06.480

我猜你想以不同的方式变平，它的工作方式是你从

```
obj.Prop.Prop1.Prop2 to obj.PropProp1Prop2 
```

这是您修改的代码：

```
using System;
using Omu.ValueInjecter;

namespace ConsoleApplication1
{
    class Program
    {
        private static void Main(string[] args)
        {
            var call = new Call { Number = "001337", CustomerNumber = "000001" };
            var op = new Operation { ID = 1, CallNumber = "001337", TimeFrom = "08:00" };
            var customer = new Customer { Number = "000001", Name = "John Doe" };

            var model = new
                            {
                                Call = call,
                                Customer = customer,
                                Operation = op
                            };

            var viewModel = new CallViewModel();
            viewModel.InjectFrom<FlatLoopValueInjection>(model);

            Console.WriteLine("Number:\t\t\t" + viewModel.CallNumber);
            Console.WriteLine("CustomerName:\t\t" + viewModel.CustomerName);
            Console.WriteLine("OperationTimeFrom:\t" + viewModel.OperationTimeFrom);
            Console.ReadLine();
        }

        class Call
        {
            public string Number { get; set; }
            public string CustomerNumber { get; set; }
        }

        class Operation
        {
            public int ID { get; set; }
            public string CallNumber { get; set; }
            public string TimeFrom { get; set; }
        }

        class Customer
        {
            public string Number { get; set; }
            public string Name { get; set; }
        }

        class CallViewModel
        {
            public string CallNumber { get; set; }
            public string CustomerName { get; set; }
            public string OperationTimeFrom { get; set; }
        }
    }
} 
```

# asp.net-mvc - kendo UI Grid MVC 初始页面

> ID：13740339
> 
> 赞同：4
> 
> 时间：2012-12-06T09:15:45.300
> 
> 标签：asp.net-mvc, kendo-ui

我正在使用剑道 UI 网格。有没有办法在与第一页不同的页面开始网格？每次打开网格时，我都想将初始页码设置为“3”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:26:44.820

我建议您将 Grid 的**AutoBind**属性设置为**false**，并且当文档就绪事件发生时，使用**dataSource的****page**方法（这实际上是**pager.page**调用的方法）。

 ****```
$('#MyGrid').data().kendoGrid.dataSource.page(3); 
```

您使用的**Data函数的用途略有不同:)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-15T16:12:07.440

我使用 ajax 数据源，我需要这样做：

1.  将自动绑定设置为 false
2.  设置数据源中的总记录
3.  通过javascript调用数据源的page()方法

这是我的视图片段（我使用剃刀）： 注意：在操作中，我在 ViewBag 中设置了两个值：

*   **ViewBag.InitialPage：**要显示的初始页面
*   **ViewBag.Total：**总记录数

.

```
@{
    int initialPage = (int)ViewBag.InitialPage;
    int totalPages = (int)ViewBag.Total / 20;
}

@(Html.Kendo().Grid<YourModelClass>
    ()
    .Name("gridMain")
    .Columns(columns =>
    {
        //Todo: Add your columns
    })
    .Pageable(p => p.Refresh(true).Info(true).Input(true).ButtonCount(6).Numeric(true))
    .Sortable()
    .Scrollable()
    .Filterable()
    .DataSource(dataSource => dataSource
        .Ajax()
        .PageSize(20)
        .Read(read => read.Action("YourAction", "YourController"))
        .Total(ViewBag.Total) //Set the total record count
    )
    .AutoBind(false)        
)

<script type="text/javascript">
    $(function () {
        var initialPage = @initialPage;
        $('#gridMain').data().kendoGrid.dataSource.page(initialPage);
    })
</script> 
```****

# php - 页面刷新插入两次

> ID：13740340
> 
> 赞同：0
> 
> 时间：2012-12-06T09:15:46.353
> 
> 标签：php

我有一个搜索页面，当有人搜索它时，它有一个查询将其插入我的数据库以保存搜索记录，每当您搜索它时，它都会多次插入同一行。我的 hitcounter 脚本和下载计数器也是如此，

```
include'header.php';
include'db.php';

$d = date("Y-m-d");
mysql_query("INSERT INTO search VALUES('$d','','$ab','1')"); 
```

那是我在搜索页面上唯一的 php 代码，所以我不知道为什么每次搜索都会插入多次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:21:23.970

插入查询后重定向到同一页面

```
include'header.php';
include'db.php';

if(isset($_POST)){
    $d = date("Y-m-d");
    mysql_query("INSERT INTO search VALUES('$d','','$ab','1')");

    header('location:page_name.php');
    exit();
} 
```

# c# - 如何在不查询打印机的情况下获取 A4 页面的尺寸？

> ID：13740342
> 
> 赞同：2
> 
> 时间：2012-12-06T09:15:50.750
> 
> 标签：c#, wpf, printing

我知道我可以连接到打印机并调用 GetPrinterCapabilities，它将返回打印机也能够打印的页面列表以及它们的实际尺寸。

但是，有没有办法在不查询 PrintQueue 的情况下获取给定 PageMediaSizeName 的 PageMediaSize？

# c# - 冒泡排序背后的逻辑

> ID：13740343
> 
> 赞同：2
> 
> 时间：2012-12-06T09:15:55.487
> 
> 标签：c#, bubble-sort

我正在做一个冒泡排序练习，我的感觉是它非常接近正确。就像现在一样，我看到了一个永恒的循环。

错在哪里？

```
static void Main(string[] args)
    {
        int[] numbers = { 2, 4, 8, 5, 88, 55, 32, 55, 47, 8, 99, 120, 4, 32 };
        int temporary;
        bool sorted;
        do
        {
            sorted = false;

            for (int i = 0; i < numbers.Length - 1; i++)
            {
                int a = numbers[i];
                int b = numbers[i + 1];
                if (a > b)
                {
                    temporary = a;
                    a = b;
                    b = temporary;

                    sorted = true;

                }
            }
            Console.WriteLine("sorted");
        } while (sorted == true);

        foreach (int i in numbers)
        {
            Console.Write(i + " ");
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:21:35.603

C# 中更好的方法是使用通用冒泡排序

```
public void BubbleSort<T>(IList<T> list);
{
    BubbleSort<T>(list, Comparer<T>.Default);
}

public void BubbleSortImproved<T>(IList<T> list, IComparer<T> comparer)
{
    bool stillGoing = true;
    int k = 0;
    while (stillGoing)
    {
        stillGoing = false;
        for (int i = 0; i < list.Count - 1 - k; i++)
        {
            T x = list[i];
            T y = list[i + 1];
            if (comparer.Compare(x, y) > 0)
            {
                list[i] = y;
                list[i + 1] = x;
                stillGoing = true;
            }
        }
        k++;
    }
} 
```

[Jon Skeet 在他的回答](https://stackoverflow.com/a/1595310/626442)中给出了这个算法的简要解释。“它使用任意比较器，但允许您省略它，在这种情况下，默认比较器用于相关类型。它将对 IList 的任何（非只读）实现进行排序，其中包括数组。”

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T09:21:39.577

你交换`a`，`b`但你不对你的输入数组做任何事情。因此，您不断地在内存中交换值，但原始数组没有改变。尝试：

```
 for ( int i = 0; i < numbers.Length - 1; i++ )
            {
                if ( numbers[i] > numbers[i + 1] )
                {
                    temporary = numbers[i];
                    numbers[i] = numbers[i + 1];
                    numbers[i + 1] = temporary;

                    sorted = true;

                }
            } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T09:21:06.177

您没有将结果写回数组。

改用这个：

```
//temporary = a;
//a = b;
//b = temporary;

numbers[i] = b;
numbers[i + 1] = a; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T09:21:17.533

它应该是

```
if (numbers[i] > numbers[i + 1])
    {
            temporary = numbers[i];
            numbers[i] = numbers[i + 1];
            numbers[i + 1] = temporary;

            sorted = true;

     } 
```

中所做的更改`a`，`b`不会反映在，`numbers[i]` `numbers[i+1]`因为 a 和 b 仅仅`copy`是`numbers[i]` `numbers[i+1]`..

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T09:25:33.487

这是一个工作示例：

```
static void Main(string[] args)
{
    int[] numbers = { 2, 4, 8, 5, 88, 55, 32, 55, 47, 8, 99, 120, 4, 32 };
    int temporary;
    bool sorted;

    do
    {
        sorted = false;
        for (int i = 0; i < numbers.Length - 1; i++)
        {
            if (numbers[i] > numbers[i + 1])
            {

                temporary = numbers[i];
                numbers[i] = numbers[i + 1];
                numbers[i + 1] = temporary;

                sorted = true;
            }
        }
        Console.WriteLine("sorted");
    } while (sorted == true);

    foreach (int i in numbers)
    {
        Console.Write(i + " ");
    }
} 
```

# macos - 所有 OS X 浏览器上的字体呈现方式不同

> ID：13740346
> 
> 赞同：-1
> 
> 时间：2012-12-06T09:16:06.127
> 
> 标签：macos, google-chrome, css, safari, webkit

我正在开发这个网站，我在其中使用 CSS 来设置菜单按钮的样式。

它们在 Windows 上看起来都不错，但是当我在 OS X 上试用它们时，它们呈现错误。更奇怪的是，它们在一个页面上显示得很好，但 [在我看来] 在另一个页面上却不太好：

字体呈现模糊：
![字体呈现模糊](../Images/eaf2eac18b2abebeed15c1efbd42dc06.png)

字体以“瘦”模式呈现：
![字体呈现在](../Images/5118334dbc9a1afe3760c37bb2a02b68.png)

此外，我发现如果我将鼠标悬停在一个元素（即徽标）上，该元素（即徽标）在悬停时应用了 CSS3 过渡，则**模糊**渲染的字体会变成**skinny**，但是当 CSS3 动画结束时，它们会恢复**模糊**渲染。

原因中的 CSS 转换：

```
.logo {
    float: left;
    margin-left: 0px;

    -moz-transition: all 0.3s ease-out;  /* FF4+ */
    -o-transition: all 0.3s ease-out;  /* Opera 10.5+ */
    -webkit-transition: all 0.3s ease-out;  /* Saf3.2+, Chrome */
    transition: all 0.3s ease-out;

    -webkit-transform: rotate(0deg);
}

.logo:hover {
    -moz-transition: all 0.3s ease-out;  /* FF4+ */
    -o-transition: all 0.3s ease-out;  /* Opera 10.5+ */
    -webkit-transition: all 0.3s ease-out;  /* Saf3.2+, Chrome */
    transition: all 0.3s ease-out;  

    -moz-transform: rotate(-3deg) scale(1);  /* FF3.5+ */
    -o-transform: rotate(-3deg) scale(1);  /* Opera 10.5 */
    -webkit-transform: rotate(-3deg) scale(1);  /* Saf3.1+, Chrome */
    transform: rotate(-3deg) scale(1);  

    zoom: 1;
} 
```

你可以在这里观察到这种现象：http: [//pote.ca](http://pote.ca)。

帮助？请？
提前致谢！:)

**更新：**

我`verdana`用于菜单项，另一种字体用于*// bun venit*消息。

另一个看起来不太好的字体示例是 Google 分析页面上的菜单：

![在此处输入图像描述](../Images/9efcba69bbcda59d108d0f35a2578ee1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:28:59.867

这并没有“糟糕”地渲染，它使用了与 Windows 完全不同的字体渲染策略。OS X 倾向于更好地保留字符的原始形状，而 Windows 则试图将字符推入像素网格。结果看起来*不同*，而不是“更糟”。是的，您需要在设计中考虑到这一点。

作为参考，请参阅[仔细查看字体渲染](http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/)，[编码恐怖：Apple 的字体渲染有什么问题？](http://www.codinghorror.com/blog/2007/06/whats-wrong-with-apples-font-rendering.html)等等

# php - 代码点火器的漂亮 URL

> ID：13740347
> 
> 赞同：0
> 
> 时间：2012-12-06T09:16:16.163
> 
> 标签：php, codeigniter, url-rewriting, content-management-system, codeigniter-routing

我想知道是否可以在 Code igniter 中编写漂亮的 URL？我的意思是我有一个代码点火器项目，我在其中显示来自 uri 段的数据，如下所示：

[http://myproj.local/category/subcategory/64/239](http://myproj.local/category/subcategory/64/239)

其中 64 是我的类别的 ID（例如 Garden Products），239 是我的子类别 ID（例如 Brushes）。

无论如何我可以在代码点火器中编写这样的 URL：

对于类别：

[http://myproj.local/花园](http://myproj.local/Garden)产品/

[http://myproj.local/Household](http://myproj.local/Household) Range/

对于子类别：

[http://myproj.local/Garden](http://myproj.local/Garden) Products/Brushes/

[http://myproj.local/Household](http://myproj.local/Household) Range/Buckets/

就像 wordpress 或其他 CMS 一样。

**简而言之，我希望我的 CODE IGNITER MVC 框架能够显示 URL/页面，如下所示：**

[http://myproj.local/Garden](http://myproj.local/Garden) Products/Brushes/

[http://myproj.local/Household](http://myproj.local/Household) Range/Buckets/

这是否可以在代码点火器中实现？如果是，那么我该怎么做？我怎么能在代码点火器中写这个？我应该用什么方法来实现这个？如果您能在这方面帮助我，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:20:26.457

我之前已经回答过一个类似的问题。

检查[一下](https://stackoverflow.com/questions/10241806/pretty-url-setting-in-codeigniter)，看看它是否有帮助。

其他选项包括数据库驱动路由，看看这个[链接](http://osvaldas.info/smart-database-driven-routing-in-codeigniter)。

这里还有一篇关于[反向路由](http://codefury.net/2010/09/easy-reverse-routing-with-codeigniter/)的文章/示例可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:20:36.700

SEO 不建议在 URL 中使用空格

你可以参考[seomoz](http://www.seomoz.org/learn-seo/url)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:30:23.637

除了使用 ID，您可以使用唯一的字符串名称，因此`http://myproj.local/category/subcategory/64/239`变得公正`http://myproj.local/category/subcategory`，然后使用路由重定向任何不是例如`images`,`css`等的内容，无论您使用什么，都可以重定向到以类别和子类别为参数的通用控制器/方法。

此外，CodeIgniter 有一个很好的帮助函数[url_title](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)，它可以帮助您编写类别和子类别的唯一字符串表示......您只需要确保它们是唯一的。

另一种方法就像其他人所说的那样，在您的路由文件中创建一个白名单并手动进行每个重定向。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T10:25:25.283

This why you have the routes file,however i know only of hardcoing categories, dunno about doing that automatically. you can do something like this :

```
$routes['Gardents/Products'] = "category/subcategory/64/239"; 
```

# python - 如何在python中对信号应用过滤器

> ID：13740348
> 
> 赞同：24
> 
> 时间：2012-12-06T09:16:16.187
> 
> 标签：python, scipy, signal-processing

python中是否有任何准备好的函数可以将滤波器（例如巴特沃斯滤波器）应用于给定信号？我在 'scipy.signal' 中寻找这样的功能，但我没有找到比过滤器设计更有用的功能。实际上我希望这个函数将滤波器与信号进行卷积。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-06T09:27:54.427

是的！那里有两个：

```
scipy.signal.filtfilt
scipy.signal.lfilter 
```

还有卷积 (`convolve`和`fftconvolve`) 的方法，但这些方法可能不适合您的应用程序，因为它涉及 IIR 滤波器。

完整代码示例：

```
b, a = scipy.signal.butter(N, Wn, 'low')
output_signal = scipy.signal.filtfilt(b, a, input_signal) 
```

您可以在文档中阅读有关参数和用法的更多信息。一个问题是这`Wn`是奈奎斯特频率的一小部分（采样频率的一半）。因此，如果采样率为 1000Hz 并且您想要 250Hz 的截止频率，您应该使用`Wn=0.5`.

顺便说一句，我强烈建议对大多数应用程序使用`filtfilt`over `lfilter`（仅`filter`在 Matlab 中调用）。正如[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.filtfilt.html)所述：

> 此函数两次应用线性滤波器，一次向前，一次向后。组合滤波器具有线性相位。

这意味着输出的每个值都是输入中“过去”和“未来”点的函数。因此它不会滞后输入。

相反，`lfilter`仅使用输入的“过去”值。这不可避免地会引入时间滞后，这将取决于频率。当然，有一些应用程序需要这样做（尤其是实时过滤），但大多数用户使用`filtfilt`.

# .net - 如何在 asp.net mvc 中执行验证？

> ID：13740354
> 
> 赞同：-4
> 
> 时间：2012-12-06T09:16:34.697
> 
> 标签：.net, asp.net-mvc

在我的模型层中，我为密码编写了这样的代码：

```
[Required]
[StringLength (100,ErrorMessage 
               ="The {0} must be atleast {2} characters long.",MinimumLength=6)]
[DataType(DataType.Password)]
[Display(Name="Password")]
public string Password { get; set; } 
```

但它在我的注册页面中没有受到影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:57:50.520

使用正则表达式，例如：

对于正则表达式： public const string Password = @"^. *(?=.{6,})(?=.* \d)(?=. *[az])(?=.* [AZ]).*$" ;

对于模型： [Required(ErrorMessage = "Password is required")] [RegularExpression(RegularExpressions.Password, ErrorMessage = "至少6个字符长，大小写至少1个数字")] [StringLength(20, ErrorMessage = "密码最大长度为 20 个字符")] public string Password { get; 放; }

还要确保按照本文执行模型状态验证： [http ://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx](http://weblogs.asp.net/scottgu/archive/2010/01/15/asp-net-mvc-2-model-validation.aspx)

# c# - C++ exe 到 dll 以用作组件 (CLR)

> ID：13740355
> 
> 赞同：-2
> 
> 时间：2012-12-06T09:16:38.293
> 
> 标签：c#, c++, dll, components, exe

我有一个用 c++ 编写的 Program.exe。还有一个仅显示 c++ exe 源代码的 c++ 文件。

所以首先我尝试使用 Cmake 程序来更改和调试 c++ exe。在此之后，我必须将其转换为 .dll 文件，例如此 .dll 文件可以用作 c# (CLR) 中的组件。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:54:06.300

我猜，那个程序有一些你想在 C# 中使用的功能？在这种情况下，将项目从 exe 转换为（本机）DLL，然后使用 P/Invoke：

如何制作 DLL： http: [//msdn.microsoft.com/en-us/library/ms235636 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms235636(v=vs.80).aspx)

从 DLL 调用平台：http: [//msdn.microsoft.com/en-us/library/aa288468 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288468(v=vs.71).aspx)

# wso2 - 如何使用 vfs JMS Sender 在 wso2 esb 代理中返回响应？

> ID：13740362
> 
> 赞同：3
> 
> 时间：2012-12-06T09:17:06.367
> 
> 标签：wso2, wso2esb, vfs, apache-commons-vfs

我在 WSO2 ESB 4.5.0 中有一个代理服务，它应该处理来自 webclient 的 SOAP 请求，将信息发送到 JMS-topic，然后响应 webclient。

问题是，当我使用 JMS-sender 时，它默认等待临时队列上的响应。

要更改 JMS-Sender 的行为，我可以将 OUT_ONLY 设置为 true，但是 webclient 根本没有得到响应。

即使我将 OUT_ONLY 设置为 true，是否有办法返回响应？

或者

我可以设置 JMS-Sender 在不发送 OUT_ONLY 为 true 的情况下不期待回复吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-16T10:19:34.573

根据您的要求，您可能需要使用 Messagestore，请参考以下配置，该配置将消息存储在 JMSStore 中并将确认发送回客户端（成功或失败），随后 ESB 使用前向调度处理器来保证JMSStore 中的存储消息将被传递到后端，并且在真正的 BE（可能是 JMS）失败的情况下，它会退出，因此消息被传递，因此它不会从消息存储中删除，这是 DEAD 的一部分LATTER CHANNELING 已使用 WSO2 ESB 完成

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="StockQuoteProxy" transports="http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
        <property name="OUT_ONLY" value="true"/>
        <property name="target.endpoint" value="JMSEP"/>
         <property name="enableREST" value="true"/>
         <store messageStore="JMSMS"/>
         <payloadFactory>
            <format>
               <esbResponse xmlns="">
                  <text> added sccuessfully </text>
               </esbResponse>
            </format>
         </payloadFactory>
         <header name="To" action="remove"/>
         <property name="RESPONSE" value="true" scope="default" type="STRING"/>
         <send/>
      </inSequence>
      <faultSequence>
         <makefault version="soap11">
            <code xmlns:soap11Env="http://schemas.xmlsoap.org/soap/envelope/" value="soap11Env:VersionMismatch"/>
            <reason value="test"/>
            <role>MessageStoreFault</role>
            <detail>MessageStoreFault</detail>
         </makefault>
         <send/>
      </faultSequence>
   </target>
   <publishWSDL uri="file:repository/samples/resources/proxy/sample_proxy_1.wsdl"/>
   <description></description>
</proxy>

<endpoint xmlns="http://ws.apache.org/ns/synapse" name="JMSEP">
   <address uri="jms:/SimpleStockQuoteService?transport.jms.ConnectionFactoryJNDIName=QueueConnectionFactory&java.naming.factory.initial=org.apache.activemq.jndi.ActiveMQInitialContextFactory&java.naming.provider.url=tcp://localhost:61616" format="pox">
      <suspendOnFailure>
         <progressionFactor>1.0</progressionFactor>
      </suspendOnFailure>
      <markForSuspension>
         <retriesBeforeSuspension>0</retriesBeforeSuspension>
         <retryDelay>0</retryDelay>
      </markForSuspension>
      <timeout>
         <duration>1000</duration>
         <responseAction>fault</responseAction>
      </timeout>
   </address>
</endpoint>

<messageStore name="JMSMS" class="org.wso2.carbon.message.store.persistence.jms.JMSMessageStore" xmlns="http://ws.apache.org/ns/synapse">
   <parameter name="java.naming.factory.initial">org.apache.activemq.jndi.ActiveMQInitialContextFactory</parameter>
   <parameter name="java.naming.provider.url">tcp://localhost:61616</parameter>
   <parameter name="store.jms.destination">JMSMS</parameter>
   <parameter name="store.jms.JMSSpecVersion">1.1</parameter>
   <parameter name="store.jms.cache.connection">false</parameter>
</messageStore>

<messageProcessor name="Processor1" class="org.apache.synapse.message.processors.forward.ScheduledMessageForwardingProcessor" messageStore="JMSMS" xmlns="http://ws.apache.org/ns/synapse">
   <parameter name="interval">4000</parameter>
</messageProcessor> 
```

# java - 通过 HTTP 的 SSO CAS 客户端

> ID：13740364
> 
> 赞同：3
> 
> 时间：2012-12-06T09:17:14.560
> 
> 标签：java, http, tomcat, https, cas

我找不到任何关于如何在 HTTP 上运行 CAS SSO 客户端应用程序的文档。我已经安装了 CAS 服务器，它在 HTTPS 上运行，没关系。但我不希望我的客户端应用程序在 HTTPS 上运行。原因是因为它们是内部应用程序，它们不需要在 HTTPS 上运行。

当我尝试在 HTTP 上运行我的客户端应用程序时，我遇到了 SSL 握手异常，因为 CAS 期望我的应用程序通过 HTTPS 运行。

这甚至可以通过 HTTP 运行与 CAS 集成的客户端应用程序吗？如果它是如何做到这一点的呢？

规格：

1.  雄猫 6.0.35
2.  JDK 1.6
3.  CAS 3.5.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T14:37:17.717

CAS 服务器通过其后台定义的 urls 模式了解 CAS 客户端应用程序，并且这些 urls 模式可以是基于 HTTP 的。

# c# - 将数据表行添加到另一个数据表时出错

> ID：13740365
> 
> 赞同：0
> 
> 时间：2012-12-06T09:17:17.617
> 
> 标签：c#, asp.net, datatable

我有 datatable1，它有 11 列和 100,000 行。我想检查第一列中的文本是否以“one”开头，如果是，则将该行添加到第二个数据表中。我已经完成了以下操作，但仍然无法正常工作。我收到该行属于另一个表的错误

```
foreach (DataRow r in queryDataTable.Rows)
{
     if (r[0].ToString().StartsWith(queryString))
     {
          dt.ImportRow(r);                    
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:24:20.227

您可以使用 LINQ 来选择 StartsWith 的那些行，而不是您的 for 循环，`queryString`然后您可以使用[CopytoDataTable](http://msdn.microsoft.com/en-us/library/bb396189.aspx)方法为选定的行创建一个新表。

```
var NewTable = queryDataTable.AsEnumerable()
               .Where(r => r.Field<string>(0).StartsWith(queryString))
               .CopyToDataTable(); 
```

记得`using System.Linq;`在顶部包含。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:24:38.087

您不能直接将一个表的行导入另一个数据表。您需要创建一个新行，然后复制该行。

尝试这个 -

```
dt.Rows.Add(r.ItemArray) 
```

# jquery - 基本函数和 if 语句在 jQuery 中不起作用

> ID：13740366
> 
> 赞同：1
> 
> 时间：2012-12-06T09:17:19.090
> 
> 标签：jquery, if-statement

这是我的代码：

```
<button id="addSubject" type="button">+</button> 
    <script>                            
        $('#addSubject').click(function() 
        {
                function optionExists(mySelect, val) 
                {
                    return $("#"+mySelect+" option").filter(function() {
                        return this.value === val;
                    }).length !== 0;
                }

                if (optionExists($('#subjectCategories'), $('#fieldNewSubject').val()))
                {
                    $('#subjectCategories').append("<option value=\"" + $('#fieldNewSubject').val() + "\">" + $('#fieldNewSubject').val() + "</option>");
                    $('#fieldNewSubject').val("");
            });  
    </script> 
```

这是我的问题：为什么它不起作用？当我点击按钮时没有任何反应！我确实把它放在标题中：

```
<script src="js/jquery.ui.button.js"></script> 
<script src="js/jquery-1.8.2.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:31:52.650

如果我猜对了你的意图，这应该做同样的事情：

```
$('#addSubject').click(function () {
  var
    val = $('#fieldNewSubject').val(),
    $select = $('#subjectCategories');

  if ($select.find('option[value="' + val + '"]').length === 0) {
    $('<option>', {
      value: val,
      text: val
    }).appendTo($select);
  }
}); 
```

[http://jsbin.com/usadoq/1/](http://jsbin.com/usadoq/1/)

# javascript - 未反映在 JS 中的更改

> ID：13740368
> 
> 赞同：1
> 
> 时间：2012-12-06T09:17:36.353
> 
> 标签：javascript, jquery, html

我正在尝试使用调用的 JS 函数设置一个新的“a”组件，使用以下内容：

```
function add_div(data){
    mydiv = document.getElementById("new_twt");
    var link =document.createElement("a");
    var text = "you have new conversations";
    link.setAttribute("name",text);
    link.onclick=function(){new_tweet(data);};
    mydiv.appendChild(link);
  } 
```

更改不会反映在网页上，但是如果我使用其他元素，例如按钮或新 div，它会立即创建，我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:22:08.327

这对我有用：

```
function add_div(data){
    var mydiv = document.getElementById("new_twt");
    var link = document.createElement("a");
    var text = "you have new conversations";
    link.name = text;
    link.href = '#';
    link.innerHTML = 'link';
    link.onclick=function(){ new_tweet(data); return false; };
    mydiv.appendChild(link);
} 
```

*   我添加了链接文本（innerHTML），因此您实际上可以看到链接
*   我还添加了“href”，因此链接表现为链接（您需要防止默认链接操作，例如事件侦听器中的“return false”，以防止浏览器跳转到顶部）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:25:10.157

试试这个：

```
var mydiv = document.getElementById("new_twt");
var aTag = document.createElement('a');
aTag.setAttribute('href',"yourlink.htm"); //or #
aTag.innerHTML = "you have new conversations";
aTag.onclick=function(){new_tweet(data);};
mydiv.appendChild(aTag); 
```

这是工作[JS Fiddle](http://jsfiddle.net/SCUTE/7/)。

# android - 如何从 onPostExecute 内部重新启动 AsyncTask

> ID：13740369
> 
> 赞同：1
> 
> 时间：2012-12-06T09:17:36.383
> 
> 标签：android, android-asynctask

如果 onPostExecute 无法从服务器加载数据，我想在对话框上显示重新加载按钮。那么如何在 AsyncTask 中重新启动或执行类似的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:25:24.390

再次调用它：

```
new mAsyncTask.execute(""); 
```

当数据未成功加载时，在**onPostExecute**的某些 if 块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:25:52.800

把它放在你的按钮的 onClickListener 中：

```
if(task.cancel(true)) {
    YourTask task = new YourTask(this);
    task.execute();
} 
```

因此，在单击按钮时，您将尝试取消当前执行的任务并开始一个新任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-03T06:09:22.827

要重新启动 AsyncTask，您需要创建 asynctask 的新实例并调用 execute();

```
@Override
protected void onPostExecute(Response result) {
    super.onPostExecute(result);
    new YourAsyncTask().execute();          
    }
} 
```

# android - httpclient里面Activity的使用方法片段

> ID：13740372
> 
> 赞同：0
> 
> 时间：2012-12-06T09:17:48.257
> 
> 标签：android, android-fragments, httpclient

我为一些 httpclinet 编写了代码

由于我的服务器只允许两个链接操作，因此很容易堵塞

必须通过replace HttpClient HttpClient链接断开

可以在同一个Activity中简单替换

但是更改完成了如何共享相同 HttpClient 链接的片段

实现替换功能以完成断开连接的要求

```
HttpClient httpclient = new DefaultHttpClient();

//Regardless of the implementation of several actions are repeated replace

private void JS() {
        HttpPost httppost=new HttpPost("IP");

    List<NameValuePair> params=new ArrayList<NameValuePair>();

    params.add(new BasicNameValuePair("s1","2"));

    try {
        httppost.setEntity(new UrlEncodedFormEntity(params,HTTP.ISO_8859_1));
    } catch (UnsupportedEncodingException e1) {

        e1.printStackTrace();
    }

    HttpResponse response = null;
    try {
        response = httpclient.execute(httppost);
    } catch (ClientProtocolException e1) {

        e1.printStackTrace();
    } catch (IOException e1) {

        e1.printStackTrace();
    }

    if(response.getStatusLine().getStatusCode()==200){
        try {
        String  strResult=EntityUtils.toString(response.getEntity());

        } catch (ParseException e1) {

            e1.printStackTrace();
        } catch (IOException e1) {

            e1.printStackTrace();
        }

    }

} 
```

需要补充这方面的其他信息，请通知我

# maven - IntelliJ IDEA - 新项目的 Maven 主目录设置重置

> ID：13740376
> 
> 赞同：35
> 
> 时间：2012-12-06T09:18:01.813
> 
> 标签：maven, intellij-idea, settings

我刚刚开始使用 IntelliJ（我已经习惯了 Eclipse）并且遇到了一些让我非常恼火的事情。无论是我还是 IntelliJ，我都非常希望解决这个问题。

每次我打开一个新项目时，“Maven 主目录”设置都会重置，因此我每次打开一个我以前没有打开过的项目时都必须设置它。

有没有办法永久/全局设置此设置？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-06T13:40:22.533

IntelliJ IDEA 2018.x 或更高版本：

[![新项目的设置](../Images/738893a63cf0504877f495bef3593986.png)](https://i.stack.imgur.com/Sj6fd.png)

[![欢迎画面](../Images/71b1a915cd00cc4ae84133ff2943752c.png)](https://i.stack.imgur.com/Mi8FG.png)

旧版本：

您可以在**模板项目设置**中更改它，以便所有新项目都继承此设置。您可以`File`在项目打开时从菜单或从欢迎屏幕访问它：`Configure`| `Template Project`| `Settings`.

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-11-16T16:55:34.177

在 Intellij 2018.1 中：

```
File -> Other Settings -> Default Settings... 
```

[![在此处输入图像描述](../Images/b96e88ecbce3afc238c3a8892a0ef7ab.png)](https://i.stack.imgur.com/rP1Z8.png)

更改默认设置仅适用于新项目。
当前项目不会受到影响。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-09-17T09:51:07.813

在 IntelliJ 2020.2 中，它现在直接

```
File -> New Projects Settings -> Settings for New Projects... 
```

[![在此处输入图像描述](../Images/c1fba9df1f5a4f4a9133aa98c11c3225.png)](https://i.stack.imgur.com/96P7e.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-08-14T03:46:49.607

Intellij 2018.2 现在位于**File > Other Settings > Preference for New Projects下**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T12:40:03.680

我会将对所有项目都有效的设置放入 maven/conf/settings.xml 而不是用户主目录。然后将环境变量 M2_HOME 设置为 maven 文件夹。然后 IntelliJ 应该能够自动检测 maven 安装。它看起来不像从 Maven 设置中读取 settings.xml，但它确实使用了它，您不必在想法设置对话框中覆盖 settings.xml。只需保留默认值即可。但我认为您需要在系统中设置 M2_HOME 变量。

# html - 如何使表格行在 Internet Explorer 中正常工作？

> ID：13740383
> 
> 赞同：1
> 
> 时间：2012-12-06T09:18:48.833
> 
> 标签：html, internet-explorer, jsp, tags

我已经收集了一段这样的代码：

```
<table class="inlineH" border="0" summary="">
<tr>
<th class="select"></th>
<th class="name">My Name </th>
<th class="description">Mob Number </th>
<th class="Job">My Job</th>
</tr> 
</table> 
```

在此之后，我有一个 for 循环，我正在使用它在 div 中迭代另一个表，如下所示：

```
<%for (int x=0; x< MyNo; x++ ) {

%>
<div id="manIt">
<table>
<tr>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
</table>
</div>
<% }%> 
```

这些东西在 Mozilla 中完美运行，给了我我想要的东西。但是当我在 IE 中尝试时，代码会发生这种情况：

```
<table class="inlineH" border="0" summary="">
<tr>
<th class="select"></th>
<th class="name">My Name </th>
<th class="description">Mob Number </th>
<th class="Job">My Job<br/></th>
</tr/> 
</table>

<%for (int x=0; x< MyNo; x++ ) {

%>
<div id="manIt">
<table>
<tr>
<td>...</td/>
<td>...</td/>
<td>...</td/>
</tr/>
</table>
</div>
<% }%> 
```

如您所见，IE 在结束标记中添加了一个额外的“/”：. 我正在使用 IE8。我在这里做错了什么？

**编辑：**对不起IE版本。我重新检查了它，它是 IE 8 。

请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T12:49:37.713

一种可能的解决方案是使用另一种类型的标记，例如`<script type="text/javascript" src="test.js"/>`, 而不是`<script> something </script>.`

# image - Smarty 下拉列表在选择时更改图像

> ID：13740388
> 
> 赞同：1
> 
> 时间：2012-12-06T09:19:11.930
> 
> 标签：image, select, drop-down-menu, smarty

我无法让它在 smarty 模板 (.tpl) 中工作，尽管它在使用纯 html 时工作正常。当用户从下拉列表中选择时，图像被替换。模板中发生的情况是替换的图像显示为空白，这表明它找不到 src。

```
{literal}
<script>
function displayResult(selTag)
{
var x=selTag.options[selTag.selectedIndex].text;
alert("You selected: " + x);
document.getElementById('temp_image').src='images/'+ x +'.jpg';
}
</script>
{/literal}

<div class="configoptions">
{foreach from=$configurableoptions item=configoption}
{if $configoption.optiontype eq 1}
<select name="configoption[{$configoption.id}]" id="configoption[{$configoption.id}]"     onchange="displayResult(this); recalctotals();">
{foreach key=num2 item=options from=$configoption.options}
<option value="{$options.id}"{if $configoption.selectedvalue eq $options.id}   selected="selected"{/if}>{$options.name}</option>
{/foreach}
</select>
<br />

<img id="temp_image" src="images/templates/{$options.name}.jpg"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:29:36.127

你已经在一个包含来自 {$configoption.options} 的元素的 foreach 循环中定义了 {$options}，它本身包含来自 {$configurableoptions} 的项目。不幸的是，这个定义超出了范围，因为它在 foreach 循环之外：

```
<img id="temp_image" src="images/templates/{$options.name}.jpg"> 
```

要（默认情况下）显示 {$options} 的第一个元素，您可以尝试以下操作：

```
<img id="temp_image" src="images/templates/{$configurableoptions[0].options[0].name}.jpg"> 
```

# wcf - WCF REST 服务不适用于 URI 中的参数

> ID：13740394
> 
> 赞同：0
> 
> 时间：2012-12-06T09:19:27.160
> 
> 标签：wcf, jquery

我有一个 WCF REST 服务 (.NET4)。

对于没有参数的调用，它可以正常工作（浏览器、ajax 调用），但我无法让它与参数一起工作。既不是在浏览器中，也不是通过 ajax 调用。

我的合同：

```
[OperationContract]
[WebGet(
    ResponseFormat = WebMessageFormat.Json,
    UriTemplate = "knowledgefields")]
IEnumerable<cKnowledgeField> GetKnowledgeFields();

[OperationContract]
[WebGet(
    BodyStyle = WebMessageBodyStyle.Bare,
    ResponseFormat = WebMessageFormat.Json,
    RequestFormat = WebMessageFormat.Json,
    UriTemplate = "knowledgeitems?id={id}")]
IEnumerable<cKnowledgeItem> GetKnowledgeItemsByField(string id); 
```

我的 web.config

```
<configuration>
  <appSettings/>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
      </assemblies>
    </compilation>
  </system.web>
  <system.serviceModel>
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint name="" automaticFormatSelectionEnabled="false" defaultOutgoingResponseFormat="Json"/>
      </webHttpEndpoint>
    </standardEndpoints>
    <services>
      <service name="ExpertData.expertREST" behaviorConfiguration="META">
        <endpoint address="" bindingConfiguration="webHttpBindingWithJsonP" binding="webHttpBinding" contract="ExpertData.IexpertREST"/>
      </service>
    </services>
    <protocolMapping>
      <add scheme="http" binding="webHttpBinding"/>
    </protocolMapping>
    <behaviors>
      <serviceBehaviors>
        <behavior name="META">
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior>
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <bindings>
      <webHttpBinding>
        <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true"/>
      </webHttpBinding>
    </bindings>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="false" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <directoryBrowse enabled="true"/>
  </system.webServer>
  <connectionStrings>
    <add name="FindAnExpertEntities" connectionString="metadata=res://*/ExpertData.csdl|res://*/ExpertData.ssdl|res://*/ExpertData.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=WIN8ATWORK\SQLEXPRESS;initial catalog=FindAnExpert;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient"/>
  </connectionStrings>
</configuration> 
```

阿贾克斯调用：

```
 function getKnowledgeItems(id) {
      return $.ajax({
          url: "http://localhost:31634/expertREST.svc/knowledgeitems",
          dataType: "jsonp"
          data: { "id" : id + "" }
      }).then( function( data, textStatus, jqXHR ) {
          amplify.publish( "knowledgeItemsdata.updated", data );
      });
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:28:24.130

您的 AJAX 调用在消息正文中传递 ID，但您的服务期望它作为查询字符串的一部分。将javascript更改为：

```
 return $.ajax({
      url: "http://localhost:31634/expertREST.svc/knowledgeitems"
           + "?id=" + id,
      dataType: "jsonp"
  }).then( function( data, textStatus, jqXHR ) {
      amplify.publish( "knowledgeItemsdata.updated", data );
  }); 
```

# sharepoint - Sharepoint caml更新批处理：如何传递空值

> ID：13740396
> 
> 赞同：0
> 
> 时间：2012-12-06T09:19:37.530
> 
> 标签：sharepoint, batch-file, null, updates, caml

当我需要更新 SharePoint 列表中的某些值时，我会像这样创建 caml-batch：

```
<Batch ListVersion="1" OnError="Continue">
<Method Cmd="Update" ID="1">
    <Field Name="ID">123</Field>
    <Field Name="MyField">my value</Field>
</Method></Batch> 
```

如何将空值传递给这样的批次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:02:39.523

只需传递一个空值。

```
<Field Name="MyField"></Field> 
```

# python - Python中最接近的对

> ID：13740406
> 
> 赞同：-2
> 
> 时间：2012-12-06T09:20:06.797
> 
> 标签：python

我很难修改这段代码，我对 python 真的很陌生，我试图在用户的 10 个输入整数中找到最接近的对。到目前为止，这是我的代码，并且存在语法错误...

```
a = [0,1,2,3,4,5,6,7,8,9] 
a[0]=input() 
a[1]=input() 
a[2]=input() 
a[3]=input() 
a[4]=input() 
a[5]=input() 
a[6]=input() 
a[7]=input() 
a[8]=input() 
a[9]=input() 
a.sort() 
b=sorted(set(a)) 
for item in enumerate(a):
    for item1 in enumerate(b):
        c = item - enumerate(b)
        if c = item-1:
            print item
            print c 
```

谢谢，艾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:58:32.357

您的代码导致异常，因为您没有`enumerate`正确处理的输出。您的`item`值将是`(value, index)`成对的，而不是单个值，因此无法直接减去它们。

这是另一种实现，可能类似于您的目标：

```
import itertools

def find_nearest_pair(lst):
    min_pair = None
    min_distance = float("inf")

    for a, b in itertools.combinations(lst, 2): # generates all (a,b) pairs
        distance = abs(a-b) # abs makes distance always non-negative
        if distance < min_distance:
            min_pair = (a,b)
            min_distance = distance

    return min_pair # you could return min_distance here too (or instead) 
```

您甚至可以使用以下`min`函数进一步压缩它：

```
nearest_pair = min(itertools.combinations(lst, 2),
                   key=lambda item: abs(item[0]-item[1])) 
```

或者，如果您只想要该值：

```
nearest_pair_distance = min(abs(a-b) for a, b in itertools.combinations(lst, 2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:24:26.230

所有这些呼吁是`enumerate`为了什么？那是当您想要遍历集合并保留一个计数器时。您应该删除所有这些 - 但尤其是`c = item - enumerate(b)`绝对*没有*意义的那一行。

一旦你让它运行起来，你应该会看到你也有一些逻辑错误，但我会让你自己修复这些错误。

# facebook - 非常严重的登录 - 担心

> ID：13740410
> 
> 赞同：-3
> 
> 时间：2012-12-06T09:20:43.447
> 
> 标签：facebook, login

我的名字是 Shamcaoblakslbl，我来这里是因为一个我非常担心的非常严重的问题。

所以我通常保持我的 facebook 24/7 登录并在我的机器上打开。以前从未注销过。所以我回到脸书，它说“你已经退出了”哦不！

所以我登录，它把我带到了通常的设备检查点......好吧。现在我继续，我看到的只是 500 内部服务器错误。我已经尽一切努力解决这个问题，我已经登录其他机器但没有成功，浏览器，清除缓存。然后我毫无问题地登录了我的Facebook好友。

我现在完全失去理智了。为什么我的脸书是唯一返回 500 错误的脸书。

我被秘密禁止了吗？它是什么？我要疯了。在我的朋友帐户上，我让他访问我的个人资料，它加载看起来像我通常的个人资料。没有倒下什么的。

我已经重置了我的密码，我能做的一切都成功了。但不要让它在任何地方都通过了设备检查点。

那是为了我的Facebook吗？我已经对此进行了大量搜索，并且看到了非常令人沮丧的令人不安的结果，即用户被迫创建一个新的 Facebook，并且没有任何理由或已知原因。人们说它刚刚发生，是时候建立一个新的 Facebook 了。

我担心我丢失了记忆中的信息、朋友、联系人、帖子。

这是来自 Facebook 的一个大笑话吗？一个真正的脾气暴躁的问题？或者我只是搞砸了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T18:54:04.080

事实证明，Facebook 有一个新的非常严重的漏洞。发布在页面上的内容可能会导致整个帐户永久毁坏。

我有一些朋友在我的页面上发帖，它正在做非常奇怪的事情。比如 XSS 类型相关的攻击。

很长的时间来解释，但我的个人资料被 T 弄错了。

# php - 代码中的未知类，PHP网站中的SB_Modules::loadClass？

> ID：13740411
> 
> 赞同：0
> 
> 时间：2012-12-06T09:20:44.320
> 
> 标签：php

我们最近接管了一个网站，我们不知道主机是谁，只是收到了文件。

现在这个网站使用了我们目前没有安装在我们的网络服务器上的 Ioncube。

如果我打开 index.php 文件，我会看到以下代码，但我找不到它的源代码，我认为这是一个外部库。如果我用谷歌搜索，我会找到类似的代码，但没有任何源/文档

```
require_once('init.php');
$loadClass = SB_Modules::loadClass('Modules_Statistics');
$statisticsObject = new Modules_Statistics('a3p1kuk5rzs');
$statisticsObject->init();
$statisticsObject->processAction(); 
```

我试过 Google 上面的代码是什么或它属于哪里，但我唯一假设的是它需要在特定环境上运行，或者被开发为使用一种 CMS 或购物车。

任何指向它可能属于哪个系统的指针都会有所帮助？因为我找不到上面的文档。

# winapi - 通过 keybd_event 发送 wchar_t

> ID：13740412
> 
> 赞同：0
> 
> 时间：2012-12-06T09:20:46.963
> 
> 标签：winapi

我的问题与键盘事件的 WIN32 API 有关。

```
VOID WINAPI keybd_event(
  _In_  BYTE bVk,
  _In_  BYTE bScan,
  _In_  DWORD dwFlags,
  _In_  ULONG_PTR dwExtraInfo
); 
```

此方法接受 BYTE 作为 Key 值。只要它的 char 一切正常，但对于 wchar_t 它不起作用，显然是因为数据类型的差异。是否有针对 wchar_t 数据类型或我可以做的任何其他转换将这个词发送到屏幕上的任何方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:43:37.037

`char`您本身不发送此功能，而是向其发送一组[Virtual Key Codes](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd375731%28v=vs.85%29.aspx)，并且这些代码的范围受到限制。所以试图给它发送一个`wchar_t`类型并没有任何意义。

您还将在[MSDN 文档中看到此功能的](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646304%28v=vs.85%29.aspx)此注释：

> 注意 此功能已被取代。请改用 SendInput。

我应该认为你最好[`SendInput`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms646310%28v=vs.85%29.aspx)改用它。

# objective-c - 如何在 Interface Builder 中将 showFromTabBar 与选项卡式应用程序一起使用？

> ID：13740413
> 
> 赞同：2
> 
> 时间：2012-12-06T09:20:48.657
> 
> 标签：objective-c, ios, uitabbar

我在选项卡式应用程序中使用操作表，当它显示时，Xcode 记录以下消息：

呈现由其超级视图剪辑的操作表。某些控件可能无法响应触摸。在 iPhone 上尝试

```
-[UIActionSheet showFromTabBar:] 
```

或者

```
-[UIActionSheet showFromToolbar:] 
```

代替

```
-[UIActionSheet showInView:]. 
```

但是`showFromTabBar`需要一个`UITabBar`参数，并且`UITabBar`在 Interface Builder（标签栏控制器或视图控制器，无关紧要）中的设置不会连接到`UITabBar`我在任何头文件中创建的任何内容。所以我不能调用`showFromTabBar`我实际拥有的标签栏。

关于如何进行的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:48:13.657

你可以给`self.tabbarcontroller.tabbar`作为输入参数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T09:55:01.273

如果它是一个选项卡式应用程序，您将通过调用此获取 Interface Builder 的 tabBar 实例

```
 self.tabBarController.tabBar 
```

财产。所以你可以这样做

```
[yourActionSheet showFromTabBar:self.tabBarController.tabBar]; 
```

显示 UIActionSheet。

# javascript - Ember.js 视图（数量不限）

> ID：13740417
> 
> 赞同：3
> 
> 时间：2012-12-06T09:21:03.453
> 
> 标签：javascript, ember.js

所以我需要能够在 ember 中支持（无限）无限数量的视图。

基本上，我正在创建一个调查应用程序。调查可以具有未定义数量的步骤，因此未定义数量的视图/控制器。步骤数是从服务器获取的，以及内容和车把模板（一个步骤只有有限数量的可能内容类型），我需要某种方式来扩展不同调查的调查. 所以基本上一个 ember 应用程序可以处理整个事情，我已经设法抽象出我的代码来渲染内容类型，这对于 ember 步骤无关紧要：我现在只需要让它支持无限数量的步骤

是否可以有 ember 视图和控制器，但不是按名称引用它们，而是按数组索引引用它们？就像通常你会去 App.TestView = ... 和 router.get('applicationController').connectOutlet('test')，但我可以使用 App.AllView[0] = Ember.View.extend(); 和 router.get('applicationController').connectOutlet('test')[0] 什么的？然后我可以在开始时有一个 for 循环，它抓取包含内容类型和步数的调查数据，将其插入视图数组，然后我们就走了

可能还有其他方法可以实现这一点，因此任何解决方案都会很棒。创建新的 ember 应用程序不是一种选择，同一个应用程序需要为作为调查对象传入的任何内容提供服务。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:00:30.340

您可以创建一个包含不同步骤的视图类数组。您可以使用车把模板名称向阵列添加新视图。

```
App.surveyViews = [];
App.surveyControllers = [];
App.surveyViews['firstStep'] = Em.View.extend({ templateName: 'my-handlebars-template' });
App.surveyControllers['firstStep'] = Em.Controller.extend(); 
```

您的路由可以从路由中获取步骤，并使用它来查找适当的视图类和控制器以用于 connectOutlet。

```
step: Em.Route.extend({
    route: '/:step',
    connectOutlets: function(router, context) {
        router.get('applicationController').connectOutlet({ 
            viewClass: App.surveyViews[context.step], 
            controller: App.surveyControllers[context.step].create(),
            context: {}
        });
    }
}) 
```

您可以为上下文等添加所需的任何额外逻辑，但这将是基本思想。

# c# - FluentNhibernate 映射字典外键保持为空

> ID：13740420
> 
> 赞同：4
> 
> 时间：2012-12-06T09:21:07.043
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有一个简单的 Fluent-NHibernate 映射，让我很头疼！我正在尝试为其中一个实体映射字典，但它的 FK 仍然为空。

这是实体代码：

```
public class Person
{
    public Person()
    {
        PhoneNumbers = new Dictionary<string, Phone>();
    }

    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual IDictionary<string, Phone> PhoneNumbers { get; set; }
}

public class Phone
{
    public virtual int Id { get; set; }
    public virtual string Type { get; set; }
    public virtual string Number { get; set; }
} 
```

现在，这是映射：

```
public class PersonClassMap : ClassMap<Person>
{
    public PersonClassMap()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        Map(x => x.Name);
        HasMany(x => x.PhoneNumbers).AsMap(y => y.Type).Cascade.All();
    }
}

public class PhoneClassMap : ClassMap<Phone>
{
    public PhoneClassMap()
    {
        Id(x => x.Id).GeneratedBy.Identity();
        Map(x => x.Type);
        Map(x => x.Number);
    }
} 
```

最后，这是我正在做的测试：

```
 static void Main(string[] args)
    {
        ConfigureSessionFactory();

        using (var session = _sessionFactory.OpenSession())
        {
            var john = new Person();
            john.Name = "John";

            Phone home = new Phone
                             {
                                 Type = "Home",
                                 Number = "12345"
                             };

            john.PhoneNumbers.Add(home.Type, home);

            session.Save(john);
        }
    } 
```

出于某种原因，当我查看数据库时，电话记录`Person_id`仍然为空，而当我从数据库中加载此人时，`PhoneNumbers`字典仍然为空。

为什么？以及如何解决这个问题？我映射错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:54:38.753

通过添加事务最终解决了这个问题。我不知道为什么会这样（实际上这让我很伤心），但确实如此。

```
using (var session = _sessionFactory.OpenSession())
{
    var transaction = session.BeginTransaction();
    john.Name = "John";

    Phone home = new Phone
                     {
                         Type = "Home",
                         Number = "12345"
                     };
     john.PhoneNumbers.Add(home.Type, home);
     session.Save(john);
     transaction.Commit();
} 
```

希望对你也有帮助，因为我花了 3 个小时太长时间才把它弄好。

# android - 在 android 4.1 收件箱样式通知中，每行的标题应该看起来不同？

> ID：13740422
> 
> 赞同：3
> 
> 时间：2012-12-06T09:21:14.867
> 
> 标签：android, android-4.2-jelly-bean

![Android (4.1) 收件箱样式通知](../Images/a9d7d235b48b66cb4de6a323c6b25a00.png)

我想知道 gmail 应用程序如何能够以不同的方式在 jellybean 收件箱样式通知中设置每一行的标题，例如，这里的“（Google+）、Google Play、Stack Exchange”等与它们各自的细节相比具有更亮的颜色文本。有什么线索吗？

[http://developer.android.com/guide/topics/ui/notifiers/notifications.html#BigNotify](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#BigNotify)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T12:35:39.937

`addLine()`on`InboxStyle`需要一个`CharSequence`. 因此，您可以使用 a`SpannedString`而不是正则`String`，其中`SpannedString`包含内联标记规则。实现此目的的一种方便（如果有点慢）的方法是`Html.fromHtml()`将简单的 HTML 标记转换为合适的`CharSequence`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T08:36:05.540

在得到 CommonsWare 的提示后能够解决这个问题。非常感谢。最后方法看起来像这样

```
private SpannableString getFormattedString(String contact, String lastMessage)
{
    String boldContact = "<b>" + contact + "</b>";
    return new SpannableString(Html.fromHtml(boldContact + " " + lastMessage));
} 
```

# php - Wordpress PHP Cron 职位

> ID：13740426
> 
> 赞同：3
> 
> 时间：2012-12-06T09:21:28.090
> 
> 标签：php, wordpress, cron, scheduled-tasks

我有一个将 csv 数据导入 wordpress 表的插件。它通过 Wordpress 仪表板运行，您可以在其中输入一些详细信息并单击一个按钮来执行它。

我已经更改了插件，以便输入数据是静态的（每次都来自同一个 csv）并且现在都位于一个 php 文件中。我想安排一个 Cron 作业每隔一小时左右执行一次这个脚本。

我尝试使用 cPanel 设置它并直接访问 php 文件，但它不起作用（没有显示）。我相信这是因为该插件使用了 wp_insert_post 等 wordpress 功能。

我如何运行这个脚本，就好像它是通过 wordpress 仪表板运行一样，作为预定事件？

注意：该文件还包含一些 javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:55:31.057

您必须包含 2 个文件才能访问管理端功能：首先，wp-load.php。wp-load.php 设置好所有内容，并启动 wordpress。但是，您是从插件文件夹中调用此函数，在内容目录（而不是 admin 目录）内 - 所以当 wp-load 被调用时，您不会在 admin 部分，也不会获得访问权限到那些功能。从好的方面来说，您也不必处理 WordPress 强迫您登录。由于您仍然需要这些管理功能，请包括 wp-admin/admin-functions.php。这会加载管理端并让您访问管理功能 - 您准备好了

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:24:27.960

You should use wp_schedule_event. See in WordPress codex here : [http://codex.wordpress.org/Function_Reference/wp_schedule_event](http://codex.wordpress.org/Function_Reference/wp_schedule_event). Use something like this:

```
 register_activation_hook(__FILE__, 'my_activation');
            add_action('my_hourly_event', 'do_this_hourly');

            function my_activation() {
                wp_schedule_event( time(), 'hourly', 'my_hourly_event');
            }

            function do_this_hourly() {
                // do something every hour
            } 
```

You can perfectly call a PHP file inside your `do_this_hourly()` function.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T01:09:39.187

接受的答案对我来说效果很好。我修改了这个，这是我的发现。在这种情况下，您可以在插件方案之外使用此解决方案。基本上，您可以使用本机 wordpress 功能使用 cron 作业运行您的服务器，如下所示。您可以在 wordpress 应用程序的顶层创建一个文件，然后在`include /wp-load.php;`其中创建一个文件。

这会在原生 wordpress 中加载，并允许您调用一个可以定义为必须使用插件的一部分的类。然后你就可以开始使用基本的 wordpress 功能了，比如`$wpdb`和`get_usermeta()`

`$class_variable = new YourClass;`现在您可以使用并从那里调用类函数来实例化您的类。关于这一点的重要部分是，您可以像通常在服务器上一样安排 cron 作业，并且当您这样做时，您的 wordpress 功能就像在 wordpress 中一样运行。这意味着您不需要将您的 cron 作业内容作为插件的一部分进行维护，这可能会或可能不会有用，具体取决于您的工作。

# php - Typo3 $this->cObj->enableFields() SQL 错误 WHERE AND

> ID：13740433
> 
> 赞同：0
> 
> 时间：2012-12-06T09:21:39.590
> 
> 标签：php, mysql, typo3

我使用这条线来做一个数据库选择：

```
$res = $TYPO3_DB->exec_SELECTquery('*', $table, $this->cObj->enableFields($table), '' , '', ''); 
```

问题是 SQL 错误：

SELECT * FROM xyz **WHERE AND** xyz.deleted=0 AND.......

有人知道为什么会这样吗？我如何使用 enableFields 函数处理 where clouse 有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:47:36.370

[TYPO3 维基](http://wiki.typo3.org/Extension_Developers_Guide)

> 如果你还没有 WHERE 子句，你会得到一个错误的 SQL 语句（“SELECT * FROM tt_address WHERE AND ...”），所以你必须去掉前导 AND

采用`'1'.$this->cObj->enableFields($table)`

# sql-server - SQL Server Select 查询非常慢

> ID：13740437
> 
> 赞同：1
> 
> 时间：2012-12-06T09:22:03.920
> 
> 标签：sql-server, sql-server-2005

我有`SQL Server 2005`。`Windows Server 2003`2 天前还好，但现在查询要花很多时间。例子：

```
Select * from Table --[table has around 6000 records] 
```

还有其他数据库也可以正常工作，但这是一个数据库的问题。

我试过了，`DBCC DBREINDEX`但花了 18 个小时，还在运行。最后，我不得不取消它。

请帮忙。

谢谢

# c# - Windows Phone 8 中的设备方向

> ID：13740443
> 
> 赞同：5
> 
> 时间：2012-12-06T09:22:24.927
> 
> 标签：c#, xaml, camera, windows-phone-8

我想在使用 PhotoCaptureDevice 选项拍摄快照时根据 Windows Phone 8 中的设备方向旋转图像。

当设备方向为

```
LandscapeLeft  - Image to be rotated to -90
LandscapeRight - Image to be rotated to 90 
```

但是在 Windows Phone 8 中没有找到设备方向的选项。你能请任何人帮助我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T14:49:21.600

您可以使用加速度传感器读数，然后按如下方式获取 atan2：

```
angle = Math.Atan2(-x,y) * 180.0 / Math.PI; 
```

其中“角度”是相对于默认纵向方向的设备方向。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-06T11:05:53.117

您需要重写[PhoneApplicationPage.OnOrientationChanged](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.controls.phoneapplicationpage.onorientationchanged%28v=vs.105%29.aspx)方法以获取有关方向何时更改的通知。您需要确保您的页面支持您首先需要的各种方向。

然后您可以根据此更改图像方向。

# windows-phone - 如何在 Windows Phone 8 应用程序上模拟试用模式？

> ID：13740445
> 
> 赞同：2
> 
> 时间：2012-12-06T09:22:30.510
> 
> 标签：windows-phone, windows-phone-8, trial

一年多来，我一直在开发和测试 WP 应用程序，包括带有试用版的付费应用程序、Silverlight 和 XNA。在 WP7 SDK 中使用**Guide.SimulateTrialMode**和**Guide.IsTrial**时，它在模拟器和真实设备上都可以完美运行。现在，当我在 WP8 SDK 中为 WP8 应用程序使用相同的方法时，当我将 SimulateTrialMode 设置为 true 时，Guide.IsTrial 仍然返回 false。我什至尝试过 LicenseInformation.IsTrial() 并且它也返回 false。

问题是，是我做错了什么，还是无法在 WP8 应用程序中使用 Guide.SimulateTrialMode 模拟试用模式？请注意，当我将它用于带有 WP8 SDK 的 WP7.1 应用程序时，它工作得很好，所以我想这只是 WP8 应用程序中的错误。

我已经检查了这些指南，但没有任何迹象表明 SimulateTrialMode 在 WP8 上被破坏：
[为 Windows Phone 创建试用应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff967558%28v=vs.105%29.aspx)
[Guide.SimulateTrialMode Property](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gamerservices.guide.simulatetrialmode.aspx)
[App platform compatible for Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206947%28v=vs.105%29.aspx)

tl;dr **SimulateTrialMode 在 WP8 应用程序中不起作用**，还有其他方式，如何模拟试用模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:00:07.053

我这样做的方式是，我不是直接调用，而是`Guide.IsTrialMode`将它包装在一个属性中：

```
public static bool IsTrial
{
    get
    {
        return Guide.IsTrialMode;
    }
} 
```

关键是您现在可以在测试期间轻松更改属性以返回 true 或 false。您甚至可以使用预处理器指令和特定的构建配置来切换到试用模式：

```
public static bool IsTrial
{
    get
    {
#if TRIAL
        return true;
#else
        return Guide.IsTrialMode;
#endif
    }
} 
```

# ember.js - 来自 JSON 的 Ember 数据映射嵌入对象

> ID：13740448
> 
> 赞同：4
> 
> 时间：2012-12-06T09:22:39.560
> 
> 标签：ember.js, ember-data

我正在努力解决一个奇怪的问题。我有一个模型`Activity`，其属性定义如下：

`owner: DS.belongsTo('App.User', embedded: true)`

`User`当我收到这样的 JSON 响应时，这也是一个已定义的模型：

```
some single properties and

user: { id: etc. } 
```

我的所有属性都映射得很好，但来自 JSON 的用户嵌入对象没有映射到所有者属性。然而，当我改变

```
owner 
```

至

```
user 
```

它映射得很好。但我想离开所有者，因为它更好地代表了我的意思。我试过这个动作：

```
owner: DS.belongsTo('App.User', key: 'user', embedded: true) 
```

但这没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-29T21:17:20.377

首先，我建议使用最新的 Ember / EmberData，但您需要通过[增强`extractSingle`自定义序列化](https://github.com/emberjs/data/blob/master/TRANSITION.md#embedded-records)程序来手动处理嵌入记录（参见下面的示例）。此外，您应该像这样定义关系：

```
App.Activity = DS.Model.extend({
  name:  DS.attr('string'),
  owner: DS.belongsTo('user')
});

App.User = DS.Model.extend({
  name:       DS.attr('string'),
  activities: DS.hasMany('activity')
}); 
```

接下来，`ActiveModelAdapter`如果您在与服务器通信时使用下划线，我建议使用 （例如在 EmberData 0.13 中）：

```
App.ApplicationAdapter = DS.ActiveModelAdapter; 
```

最后，要在自定义序列化程序中`owner`使用`User`, 覆盖。`typeForRoot`

例如：

```
App.ApplicationSerializer = DS.ActiveModelSerializer.extend({
  typeForRoot: function(root) {
    if (root == 'owner' || root == 'owners') { root = 'user'; }
    return this._super(root);
  },

  // based on: https://github.com/emberjs/data/blob/master/TRANSITION.md#embedded-records
  extractSingle: function(store, type, payload, id, requestType) {
    var owner = payload.activity.owner,
        ownerId = owner.id;

    payload.owners = [owner];
    payload.activity.owner_id = ownerId;

    return this._super.apply(this, arguments);
  }
}); 
```

[示例 JSBin](http://jsbin.com/ulaVITA/1/edit?html,js,output)

# android - windows环境下PhoneGap教程难找

> ID：13740449
> 
> 赞同：0
> 
> 时间：2012-12-06T09:22:41.720
> 
> 标签：android, eclipse, cordova, windows-7

我已经搜索了几次以找到基于 Windows 环境的 PhoneGap 教程，但无论我得到哪个教程都是基于 Mac OS 的。我刚刚开始使用 PhoneGap 进行 Android 应用程序开发，将其用作条形码扫描仪应用程序的插件。我正在使用 Windows 7 环境并使用 Eclipse。所以，我需要一个基于 Windows 的教程，因为我是初学者。任何帮助，将不胜感激。

我刚刚检查了@Craig 建议的[http://www.vsnomad.com/ 。](http://www.vsnomad.com/)但不幸的是，首先它是一个试用基础扩展，其次，需要注册。那么，有没有其他选择呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T16:57:10.577

我正在使用windows server 2008，我使用了这几个教程（只要你使用eclipse，你使用哪个环境并不重要）。

[http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html](http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html)

[http://mobile.tutsplus.com/tutorials/phonegap/creating-an-android-hello-world-application-with-phonegap/](http://mobile.tutsplus.com/tutorials/phonegap/creating-an-android-hello-world-application-with-phonegap/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:49:50.623

如果您想使用 Visual Studio，那么我建议您查看 www.vsnomad.com，这将大大简化 Windows 上的 PhoneGap 开发。

# javascript - 在 Javascript 中以编程方式将 SVG 转换为图像

> ID：13740451
> 
> 赞同：0
> 
> 时间：2012-12-06T09:22:47.057
> 
> 标签：javascript, svg, html5-canvas, kineticjs

> **可能重复：**
> [在浏览器中将 SVG 转换为图像（JPEG、PNG 等）](https://stackoverflow.com/questions/3975499/convert-svg-to-image-jpeg-png-etc-in-the-browser)

我正在使用 Kinetic.js 开发纸牌游戏，目前我正在探索允许游戏的“窗口”和全屏模式的机会。如果用户选择全屏模式，JS 应该能够为卡片生成（或加载）更大的图像。

最好在开始时加载 SVG 图像，然后在客户端计算机上生成所需大小的光栅化图像。仅使用 JavaScript 是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:03:45.220

正如 Sirko 所说，如果您已经在使用 SVG，正如您所暗示的那样，您可以更改这些 SVG 的大小。这是他们的一部分。

如果动力学不为此提供方法也没关系，只需使用普通的javascript：yourSVGelement.setAttribute('width',yourNewWidthValue);

高度也一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:54:52.553

你不能在纯 Javascript 中做到这一点。您需要将 SVG 图像发送到服务器，例如使用[http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)对其进行转换，然后将其发送回客户端。

您可以通过查看[http://phantomjs.org/](http://phantomjs.org/)来打印屏幕，但只能在 webkit 浏览器中。

# c# - 无法访问文件

> ID：13740452
> 
> 赞同：0
> 
> 时间：2012-12-06T09:22:47.233
> 
> 标签：c#

我似乎无法访问我正在编写的程序中使用的文件。我不确定如何准确地工作，因为我希望我的程序打开您选择的文件，它确实如此，然后我希望它能够将信息接收到一个数组中，它确实如此，然后从那里，将该信息从数组写入您打开的文件。当我尝试一些代码开始处理它时，它告诉我，“该进程无法访问文件'文件'，因为它正在被另一个进程使用。” 这是我到目前为止所拥有的。请告诉我。谢谢你。有问题的区域是我写“这是一个测试”的代码的 Save_Click 部分谢谢。

```
 public partial class ListingSearch : Form
{
    string line;
    DialogResult result;
    string fileName;
    int i = 0;
    string[] first = new string[100];
    string[] last = new string [100];
    string[] phone = new string [100];
    string[] grade = new string [100];

    public ListingSearch()
    {
        InitializeComponent();
        MessageBox.Show("Please be sure to open a file before beginning");
    }

    private void OpenFile_Click(object sender, EventArgs e)
    {
        using (OpenFileDialog filechooser = new OpenFileDialog())
        {
            result = filechooser.ShowDialog();
            fileName = filechooser.FileName;
            System.IO.StreamReader file =
                new System.IO.StreamReader(fileName);

            while ((line = file.ReadLine()) != null)
            {
                string[] words = File.ReadAllText(fileName).Split(new string[] { "\n", "\r\n", ":" }, StringSplitOptions.RemoveEmptyEntries);
                //firstName.Text = words[4];
                //lastName.Text = words[5];
                //telephone.Text = words[6];
                //GPA.Text = words[7];
            }
            Read.Enabled = true;
       }
    }

    private void Save_Click(object sender, EventArgs e)
    {
        File.AppendAllText(fileName, "This is a test");
    }

    private void Read_Click(object sender, EventArgs e)
    {
        MessageBox.Show(fileName);
        MessageBox.Show(File.ReadAllText(fileName));
    }

    private void info_Click(object sender, EventArgs e)
    {
        first[i] = firstName.Text;
        firstName.Text = " ";
        last[i] = lastName.Text;
        lastName.Text = " ";
        phone[i] = telephone.Text;
        telephone.Text = " ";
        grade[i] = GPA.Text;
        GPA.Text = " ";
        i++;
    }

    private void displayinfo_Click(object sender, EventArgs e)
    {
        if (i == 0)
            MessageBox.Show("Nothing to display!");
        else
        for (int j = 0; j < i; j++)
        {
            MessageBox.Show(first[j] + " " + last[j] + "\r" + phone[j] + "\r" + grade[j]);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:27:18.197

你在这里得到错误

```
File.ReadAllText(fileName) 
```

因为你在它之前打开了同一个文件

```
System.IO.StreamReader file = new System.IO.StreamReader(fileName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T17:53:59.253

您需要在阅读完文件后关闭该文件。此外，不确定您为什么要打开文件，因为您随后使用`File.ReadAllText`which 将自行处理打开和关闭文件。

似乎您的`OpenFile_click`活动应该如下所示：

```
 using (OpenFileDialog filechooser = new OpenFileDialog())
    {
        result = filechooser.ShowDialog();
        fileName = filechooser.FileName;

        string[] words = File.ReadAllText(fileName).Split(new string[] { "\n", "\r\n", ":" }, StringSplitOptions.RemoveEmptyEntries);

        Read.Enabled = true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T17:53:58.283

你还没有关闭你的 StreamReader。C# 将锁定文件，直到您这样做。或者您可以在关闭 StreamReader 后使用 StreamWriter

# ruby-on-rails - 使用 Capybara 进行测试时如何获取元素的 id (Rails)

> ID：13740453
> 
> 赞同：17
> 
> 时间：2012-12-06T09:22:49.407
> 
> 标签：ruby-on-rails, capybara, integration-testing

我正在使用 Capybara 在我的应用程序中编写测试，但现在我有一种情况，我需要读取 capybara 中的元素的 id，例如

`myid = page.find("#parentNode").first(".childClass").id`

考虑我有以下 HTML 结构

```
<div id="parentNode">
 <div id="childNode1" class="childClass">1</div>
 <div id="childNode2" class="childClass">2</div>
</div> 
```

**请注意：**我不是要读取子节点的内容，而是要读取 id。上面显示的是示例。

**预期输出：** childNode1（第一个元素的id，class为childClass

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-06T11:28:42.113

你几乎接近答案了。唯一的变化是不要将 id 作为方法调用，您必须将其作为属性调用，如下所示

```
page.find("#parentNode").first(".childClass")[:id] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:34:37.193

在这种情况下，我会使用一些 xpath 而不是 css。注意我对 xpathing 不是很熟练，所以我首先使用 css 来查找 parentNode。

```
find(#parentNode).find(:xpath, div[1]).id 
```

试试看它是否有效。

可选地，您也可以在第二个查找中使用 css 并将类用作标准，因为它无论如何都会找到第一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:18:52.427

得到答案..!!

我们可以使用`page.evaluate_script`来实现这一点。我使用了下面的代码

`page.evaluate_script('$("#parentNode .childNode").first().attr("id")')`

希望这会对某人有所帮助:)

# java - 在 Java 中发送 40（ish）HTTP 请求的最快方法是什么？

> ID：13740456
> 
> 赞同：3
> 
> 时间：2012-12-06T09:22:56.503
> 
> 标签：java, http

我目前正在使用 Apache HTTP 客户端并运行多线程解决方案，目前我正在为我执行的每个 httppost 生成一个新线程。有什么办法可以让这个执行得更快吗？我不需要对返回的内容做任何事情，我只需要发送我的请求。

我主要使用了步骤 2.9 中提供的代码[http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e639](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e639)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T09:28:54.457

假设您需要它运行很长时间，如果您预先创建线程，您可以节省一些执行时间，因此您不必为每个请求生成它们。性能提升会很小，但总比没有好。看看[Java 执行器](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)。

此外，请确保就 Apache HTTP 客户端的使用而言，您没有创建不需要的对象。例如，如果您（提前）知道您的请求被发送到哪里，您可能希望持有一个 HTTP 连接池，而不是每次需要发送请求时都建立连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:30:55.910

我会考虑使用异步 IO (NIO) 并在单个线程中触发 40 个请求，这样您就不会产生创建 40 个线程的开销。

# jquery - 使用 jquery 或 ajax 调用 asp.net 函数

> ID：13740464
> 
> 赞同：0
> 
> 时间：2012-12-06T09:23:24.410
> 
> 标签：jquery, asp.net, session

我正在创建一个管理页面，如果不允许用户在那里，我需要在几秒钟后重定向页面。管理员登录时应该创建一个会话，我想使用 jquery 检查会话是否存在。

这是c#代码：

```
protected void Page_Load(object sender, EventArgs e)
{
    if ((string)Session["admin"] == null)
    {
        mainF.InnerHtml = "<div id='inner' style='margin-left:370px; margin-top:80px;font: 0.92em arial,sans-serif;word-spacing: 2px;font-weight: bold;'>Your Are Not Supposed To Be Here.</div>";
    }
}
public bool checkIfAllowed()
{
    bool isIt = false;
    if ((string)Session["admin"] != null && (string)Session["admin"] != "")
    {
        isIt = true;
    }
    return isIt;
} 
```

所以基本上我认为我可以以某种方式使用 jquery 调用 checkIfAllowed() 函数来检查会话是否存在，但我不知道如何。

这就是我所拥有的：

```
if (!checkIfAllowed() /*which of course doesn't work*/) {
        var inter = setInterval(function () {
            window.location.replace("http://www.google.com");
        }, 3000);
    }
    else {
        clearInterval(inter);
    } 
```

可能还有其他方法可以做到这一点，如果您有一些解决方案，请告诉我。我想我也可以用 asp.net 重定向页面，但它第一次没有工作。我也试着写

```
$("#inner").html != null && $("#inner").html != "" 
```

在 jquery 的 if() 语句中，因为 #inner html 在 asp.net 中的 pageLoad 上发生了变化。

谢谢=]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:38:33.293

为了从您的 javascript 调用您的服务器端方法，您必须在您的 aspx 页面中注册一个脚本管理器，并且`EnablePageMethods`等于 true ：

```
<asp:ScriptManager ID="MyScriptManager" 
    EnablePageMethods="true" 
    EnablePartialRendering="true" runat="server" /> 
```

并用属性`[WebMethod]`（命名空间`System.Web.Services`：

```
[WebMethod]
public static bool checkIfAllowed()
{
    ...
} 
```

在您的 javascript 代码中，您必须调用以关键字为前缀的服务器端方法`PageMethod`：

```
var isAllowed = PageMethods.checkIfAllowed(); 
```

* * *

**编辑 ：**

由于调用是异步的，因此函数的结果应该在回调函数中获取：

```
PageMethods.checkIfAllowed(function(response) {
    if (!response) {
        var inter = setInterval(function () {
            window.location.replace("http://www.google.com");
        }, 3000);
    } else {
        clearInterval(inter);
    }
}); 
```

还要注意，由于您的网络方法应该是静态的，因此您必须使用`HttpContext.Current.Session`而不是`Session`...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:38:37.097

你需要使用ajax来调用checkIfAllowed() google ajax教程

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:41:17.517

你可以做的是：

```
var session ='<%= Session("VariableName")%>'
if (!session) {
        var inter = setInterval(function () {
            window.location.replace("http://www.google.com");
        }, 3000);
    }
    else {
        clearInterval(inter);
    } 
```

或者您可以使用 HiddenField 并从会话中加载数据，然后检查该值是否存在于 javascript 之类的

```
var hiddenValue = document.getElementById('myHiddenField');
if (!hiddenValue ) {
            var inter = setInterval(function () {
                window.location.replace("http://www.google.com");
            }, 3000);
        }
        else {
            clearInterval(inter);
        } 
```

希望这会有所帮助。

# backbone.js - Backbone.js 如何在表格列表中选择组合框选项？

> ID：13740471
> 
> 赞同：1
> 
> 时间：2012-12-06T09:23:50.410
> 
> 标签：backbone.js, javascript-framework, datagridviewcombobox

我在列表表模板中添加了一个组合框

```
<script type="text/x-handlebars-template" id="listItemTmpl">
    <tr>                             
        <td>{{partNo}}</td>
        <td>
             <select name="selectCombo" id="selectCombo">
                    {{#each chks}}
                    <option value='{{this.id}}' {{#if(this.id==status)}}selected{{/if}}>{{this.name}}</option>
                    {{/each}}
                </select>
        </td>
    </tr>

</script> 
```

所以我的 chk 模型是；

```
chkModel = Backbone.Model.extend({
   urlRoot:url,
   defaults:{
        name:""
   }

}); 
```

但现在我收到这样的错误；

```
Uncaught Error: Parse error on line 13:
...ue='{{this.id}}' {{#if(this.id==status)}
-----------------------^
Expecting 'ID', got 'undefined' 
```

那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:23:57.773

因此，您似乎想根据模型属性填充选择框。Handlebar.js 似乎支持循环，因此请尝试以下操作。请注意，我认为您的模型和集合结构不正确。据我了解，您有一个模型，其属性之一是集合。查看[主干文档](http://backbonejs.org/#Model)以了解如何获取和设置属性。使用正确的方法，否则事件不会被触发。

我打算尝试发布一些代码，但我担心我会弄错，因为我不了解上下文以及您所做的一切。

花点时间阅读本教程，以更好地了解您应该如何做事。

[http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/)

如果您在阅读博客后需要帮助，请发表评论

* * *

添加到此。下面的代码是一个 handlebar.js 示例，它可以遍历 JSON 项（在您的情况下，它们将是模型属性）

```
{{#if items}}
 <ul>
    {{#each items}}
      <li>
        {{this.name}}
      </li>
    {{/each}}
  </ul>
{{/if}} 
```

# css - 如何使用javascript将一个div添加到另一个div

> ID：13740474
> 
> 赞同：-1
> 
> 时间：2012-12-06T09:23:58.340
> 
> 标签：css, kendo-ui

我有 5 个具有不同 id 的列表视图，我使用 class=".k-header" 为每个列表视图提供一个标题。每当我运行代码时，标题都会排在最前面，而列表视图会排在后面。我想要每个列表视图的标题。

我为所有列表视图使用通用列表视图 css 文件。

我怎样才能做到这一点。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:36:03.903

请参阅[有关 DOM 插入的 jQuery 文档](http://api.jquery.com/category/manipulation/dom-insertion-outside/)。使用 insertBefore 可能会有所帮助。

# c# - 调整通过有条件地将另外两个数组相乘产生的数组的长度

> ID：13740476
> 
> 赞同：1
> 
> 时间：2012-12-06T09:24:02.683
> 
> 标签：c#, c#-4.0

假设我有 3 个整数数组，它们是 arr1、arr2 和 prod。其中，Arr1 和 Arr2 具有相同的长度，而 prod 将取决于大小。我正在尝试以下代码

```
for (int i =0; i < arr1.lenght; i++)
{        
    if (arr1[i]> 0 && arr2[i]> 0)
        prod[i]= arr1[i]*arr2[i];
} 
```

我怎样才能提前重新调整阵列 prod 的大小？请问有什么帮助吗？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:27:50.953

使用集合。例如[列表](http://msdn.microsoft.com/ru-ru/library/6sh2ey19.aspx)

```
List<int> prod = new List<int>();
for (int i =0; i < arr1.lenght; i++)
{
   if (arr1[i]> 0 && arr2[i]> 0)
   prod.Add(arr1[i]*arr2[i]);
} 
```

然后您可以从 List 创建一个数组：

```
int[] prodArray = prod.ToArray(); 
```

如果要保持 arr1 中的索引和乘法结果中的索引之间的连接，可以使用[Dictionary](http://msdn.microsoft.com/ru-ru/library/xfhwa508.aspx)

```
Dictionary<int, int> prod = new Dictionary<int, int>();
for (int i =0; i < arr1.lenght; i++)
{
   if (arr1[i]> 0 && arr2[i]> 0)
   prod.Add(i, arr1[i]*arr2[i]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T09:32:05.647

您可以使用 LINQ：

```
int[] prod = arr1
    .Zip(arr2, (i, j) => Tuple.Create(i, j))
    .Where(t => t.Item1 > 0 && t.Item2 > 0)
    .Select(t => t.Item1 * t.Item2)
    .ToArray(); 
```

这将仅包含相应元素为`arr1`和`arr2`为正的产品。

编辑：稍微好一点的方法是：

```
int[] prod = Enumerable.Range(0, arr1.Length)
    .Where(i => arr1[i] > 0 && arr2[i] > 0)
    .Select(i => arr1[i] * arr2[i])
    .ToArray(); 
```

这避免了创建中间元组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T09:28:04.673

一种选择是使用`List<int>`. 这将根据添加的内容动态调整大小。插入的性能会比使用 a 慢，`int[]`但取决于大小，它可能是微不足道的。

所以你可以这样做：

```
List<int> Prod = new List<int>();
for (int i =0; i < arr1.lenght; i++)
    if (arr1[i]> 0 && arr2[i]> 0)
        prod.Add(arr1[i]*arr2[i]); 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T09:38:02.340

这是另一种方法：

```
static void Main(string[] args)
{
    List<int> arr1 = new List<int>();
    List<int> arr2 = new List<int>();
    List<int> prod = new List<int>();

    arr1.AddRange(new int[] { 1, 0, 1 });
    arr2.AddRange(new int[] { 1, 1, 0 });

    prod = arr1.Select((item, index) => new { item, index })
        .Join(arr2.Select((item, index) => new { item, index }), i => i.index, i => i.index, (a, b) => a.item * b.item)
        //Where makes it variable
        .Where(i => i > 0)
        .ToList();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-06T09:39:08.537

您可以使用以下 LINQ：

```
int[] prod = (from x in Enumerable.Range(0, array1.Length).Select((z) => array1[z] * array2[z]) where x != 0 select x).ToArray(); 
```

这利用了一个事实，即`0`如果因子之一也是 0，则只能是乘法的结果。

**编辑**
我错过了你的问题。您想将两个因素都为*正*的条目相乘。在这种情况下，您应该使用@Lee 提供的 LINQ 代码。

**编辑 2**
我刚刚阅读了您对建议使用字典的答案的评论，以便您稍后可以查看哪个索引产生了哪个结果：

> 您所说的“保持连接”是什么意思。我认为使用 list 和 dictionary 保持相同的索引。我对吗 ？

此处给出的所有解决方案都会生成元素数量少于或等于`arr1`和的列表或数组`arr2`。这意味着在最坏的情况下，您不知道哪个索引产生了乘法结果。

您原始答案中的代码围绕这一点发布：`prod`数组需要具有与 and 相同数量的元素`arr1`，`arr2`否则您会遇到异常。

In turn, elements that are `0` in the `prod` array can only be the result of one of `arr1` or `arr2` being `<= 0` at this index. This is information you lose when creating a list - thus the suggestion of using a dictionary, which maps the index to the result, but still contains less elements.

# android - 向android中的联系人添加自定义mime类型

> ID：13740484
> 
> 赞同：10
> 
> 时间：2012-12-06T09:24:22.533
> 
> 标签：android, mime-types, android-contentprovider, android-contacts

我正在尝试编写一个应用程序，为用户选择的每个联系人存储数据。我想为每个用户添加一个`custom provider`（就像 facebook 一样），在按下时会打开我的应用程序并允许用户查看存储的数据。我按照本指南创建了一个自定义提供程序： [http ://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-2/](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-2/)

但是`custom provider`没有出现在我的联系人列表中，我尝试将我的更改`MIME_TYPE`为`vnd.com.google.cursor.item/contact_user_defined_field` 也没有帮助（使用第三方应用程序时，它显示了我的提供商但没有我的图标）

我的联系人定义是这样的：

```
<ContactsSource xmlns:android="http://schemas.android.com/apk/res/android">
 <ContactsDataKind
  android:icon="@drawable/ic_launcher"
  android:mimeType="vnd.android.cursor.item/vnd.MyPackageName.profile"
  android:summaryColumn="data2"
  android:detailColumn="data3"
  android:detailSocialSummary="true" />
</ContactsSource> 
```

我的相关代码是这样的：

```
String MIME_TYPE  "vnd.android.cursor.item/vnd.MyPackageName.profile";

ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();
int rawContactInsertIndex =ops.size();//(int)Contact_RAW_ID;
ops.add(ContentProviderOperation.newInsert(RawContacts.CONTENT_URI)
   .withValue(RawContacts.ACCOUNT_TYPE, null)
   .withValue(RawContacts.ACCOUNT_NAME,null )
   .build());

ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
   .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
   .withValue(Data.MIMETYPE,Phone.CONTENT_ITEM_TYPE)
   .withValue(Phone.NUMBER, "9X-XXXXXXXXX")
   .build());

ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
   .withValueBackReference(Data.RAW_CONTACT_ID, 0)
   .withValue(Data.MIMETYPE,StructuredName.CONTENT_ITEM_TYPE)
   .withValue(StructuredName.DISPLAY_NAME, "John Doe")
   .build());  

ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
   .withValueBackReference(Data.RAW_CONTACT_ID, 0)
   .withValue(Data.MIMETYPE,Email.CONTENT_ITEM_TYPE)
   .withValue(Email.ADDRESS, "John Doe")
   .build());

ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
   .withValueBackReference(Data.RAW_CONTACT_ID, 0)
   .withValue(Data.MIMETYPE,Phone.CONTENT_ITEM_TYPE)
   .withValue(Phone.NUMBER, "1234567890")
   .build());

ops.add(ContentProviderOperation.newInsert(Data.CONTENT_URI)
    .withValueBackReference(Data.RAW_CONTACT_ID, 0)
    .withValue(Data.MIMETYPE,MIME_TYPE)
    .withValue(Data.DATA1, "Custom Field")
    .withValue(Data.DATA2, "Custom Field Header")
    .withValue(Data.DATA3, "Custom Field Body")
    .build());

ContentProviderResult[] res = CallerActivity.getContentResolver().applyBatch      
 (ContactsContract.AUTHORITY, ops); 
```

**编辑（06/01/2013）：** 设法修复它，如果您想让您的联系人可见，请确保您提供给提供商的帐户名称是作为联系人帐户的名称。

现在我有一个不同的问题，在 4.0 设备中，联系人成为彼此的重复我尝试手动聚合，但在某些设备中它可以工作，而在某些设备中它没有。

# algorithm - 寻找最大尺寸的圆形映射的算法

> ID：13740486
> 
> 赞同：4
> 
> 时间：2012-12-06T09:24:24.923
> 
> 标签：algorithm

我有九组，每组 500 个对象。尽管这些集合是独立的，但我假设这些集合共享一个共同对象的核心。但是，一个相同的对象可能具有不同的名称（索引），具体取决于集合。但我可以测量两个物体之间的成对距离。

基于成对距离，我已经计算了所有成对集合的两个集合对象之间的最佳映射。所以，对于每一对集合，我可以说任意两个对象之间的对应关系。

现在我想检测封闭的映射圈，例如{5（set 1）-> 13（set 2）-> 24（set 3）-> 5（set 1）}，即set 1的object 5映射到object 13集合 2，映射到集合 3 中的 24，然后映射回集合 1 的对象 5。我需要这种形式的循环映射来证明对象本质上是相同的。

当然，在理想的世界中，我可以识别出跨越所有九组的大多数圆圈。但是，3-9 组之间的常见对象也很有趣。因此，我想要一份详尽的清单。

你知道执行这个任务的算法，或者这个问题在组合数学中是如何定义的！？

作为一种启发式方法，我将首先确定 3 个集合的所有组合中的圆圈，然后将这些结果组合成更大的集合组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:45:35.340

If I follow your description correctly, it seems you'll like to find correspondences between the sets. Will this algorithm work for you.

```
 1\. Intialize a hashmap H
 2\. Initialize key frequency map U = {}
 3\. for each set i 
 4\.    for each element e in set i
 5\.        H.insert {e.key, {i, ...}}
 6\.        if U.contain(e.key)
 7\.            c = U.get(e.key)
 8\.           U.update(e.key,  c + 1)
 9\.        else
10\.            U.insert(e.key,  1)
11\.        endif 
12\.    endfor
13\. endfor 
```

Line 5 will insert an element into the map H. Elements with the same key are stored in a linked list. You can find the longest chain by finding the the key with the largest frequency in U. Then by doing H.get(key), you'll get back the list. By linking the last element to the first, you'll obtain the cycle you seek.

I hope this helps.

# javascript - ModelClientValidationRule ValidationType 字符串的有效值？

> ID：13740489
> 
> 赞同：4
> 
> 时间：2012-12-06T09:24:27.323
> 
> 标签：javascript, c#, asp.net-mvc, asp.net-mvc-3, jquery-validate

是否有直接可用的验证规则类型，而无需编写新的代码？

例如

JQuery.validation 有“min(value)”

但我试过了

```
var rule = new ModelClientValidationRule();
rule.ErrorMessage = ErrorMessage;
rule.ValidationParameters.Add("required", true);
rule.ValidationParameters.Add("min", _minDate);
rule.ValidationType = "min";
yield return rule; 
```

没有成功。

唯一的选择是继承的类吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T09:47:50.917

取自[jquery 文档](http://docs.jquery.com/Plugins/Validation#List_of_built-in_Validation_methods)，我怀疑您不能使用日期类型，而是将日期转换为数字，它可能会起作用。

![在此处输入图像描述](../Images/fdbd53c1c961e63068dc5cac89fc5c2e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T08:01:40.923

请参阅[使用 FluentValidation 进行远程客户端验证](http://www.jerriepelser.com/blog/remote-client-side-validation-with-fluentvalidation)，您可以通过执行以下操作来使用现有的远程验证器

```
 var rule = new ModelClientValidationRule
            {
                ValidationType = "remote",
                ErrorMessage = message
            };
            rule.ValidationParameters.Add("url", "/api/validation/uniqueemail");

            yield return rule; 
```

**我认为您可以通过指定ValidationType**来更改要使用的类型。

您可以获得[内置验证方法列表](http://jqueryvalidation.org/documentation#List_of_built-in_Validation_methods)。请参阅该表，它包括*所需*的和您需要的*最小值。*

# unit-testing - MSTest.exe 以 ExitCode 1 退出

> ID：13740490
> 
> 赞同：0
> 
> 时间：2012-12-06T09:24:33.497
> 
> 标签：unit-testing, msbuild, mstest, tfsbuild

我通过手动调用 mstest.exe 从 msbuild/tfsbuild 手动运行测试，但是当我期待 0 时，它意外失败并出现错误 MSB3073 和 ExitCode 1。

我有这个目标，它在 $(OutDir) 文件夹中搜索后缀为 *UnitTests.DLL 的所有 DLL。它构建了一个命令行语句，然后执行：

```
<Target Name="RunUnitTests">
      <CreateItem Include="$(OutDir)\*.UnitTests.dll" 
                  AdditionalMetadata="TestContainerPrefix=/testcontainer:">
          <Output TaskParameter="Include" 
                  ItemName="UnitTestAssemblies" />
      </CreateItem>

      <Exec Timeout="120000" 
            Command="&quot;$(VS110COMNTOOLS)..\IDE\mstest.exe&quot; @(UnitTestAssemblies->'%(TestContainerPrefix)&quot;%(FullPath)&quot;',' ') /testsettings:&quot;$(OutDir)..\..\Sources\mysettings.testsettings&quot;" >
          <Output TaskParameter="ExitCode" PropertyName="ExitCode"/>
      </Exec>

     <Error Condition=" '$(ExitCode)' != '0' And '$(ExitCode)' != '2'" Text="An error [$(ExitCode)] occurred running unit tests." />
     <OnError ExecuteTargets="MarkBuildStepAsFailed" />
</Target> 
```

我在上面添加了一个 Timeout 属性，因为一些谷歌搜索建议了这一点，但它没有任何区别。

这在构建日志文件中等同于如下（包括引号）（我更改了文件夹名称，但在相关的地方留下了空格，但它们看起来不太长）：

```
"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\..\IDE\mstest.exe" /testcontainer:"C:\b\someprojectfolder\anotherfolder\Binaries\..\..\debug\some.unittests.dll" /testsettings:"C:\b\someprojectfolder\anotherfolder\Sources\..\..\mysettings.testsettings" 
```

测试确实作为构建过程的一部分在构建服务器上运行（即调用上面的目标），因为我可以看到在磁盘上创建了测试结果文件夹。所有单元测试都按预期通过。我也可以在构建日志中看到 MSTest.exe 控制台输出（例如，开始执行、测试和结果列表、结果文件已列出等）

此外，我可以将 RDC 作为构建服务帐户安装到构建服务器上，并使用 CMD 手动运行上面的命令行，它可以工作。（测试结果（*.trx）和文件夹在那里）。

当我像我自己一样在本地开发人员机器上使用 CMD 手动调用上面的命令行时，它们也可以工作。它创建测试结果文件和文件夹。

仅供参考我们在我的本地机器上使用 Visual Studio 2012 Ultimate，并且也安装在构建服务器上。

仅供参考，我们正在使用带有升级过程定义的 TFS 2012

我有一种感觉，这与引号和/或撇号的“解析”/转义有关，或者可能是在路径中使用 ..\ ？

我检查了构建服务器上的事件日志，它没有显示错误/信息。我可以检查其他任何日志吗？或我可以定义“查看”实际错误代码的属性？

注意：我知道我可以使用`<RunTest>`样式 msbuild/tfs 构建语法，但我在构建过程中更方便的时间手动触发这些测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:50:07.507

这与路径中的引号或撇号无关。我的 .testsettings 文件连接到远程测试控制器（在另一台运行 Windows Server 2008 R2 的服务器上）。我正在收集所有数据和诊断信息（录像机等、网络仿真、事件日志、系统诊断等）

当我检查测试控制器/代理服务器上的事件日志时，它充满了错误，说 MSTest 必须以管理权限运行。这就是我现在正在调查的。

# encoding - Twitter api 响应不可读

> ID：13740491
> 
> 赞同：1
> 
> 时间：2012-12-06T09:24:36.200
> 
> 标签：encoding, asp-classic, twitter

我们使用 twitter api 已经有一段时间了，但它突然停止工作了。追溯起来`MSXML2.ServerXMLHTTP`，ASP vbscript 似乎无法读取来自请求的响应。

即使是对页面的简单 GET 请求也会变成无效字符。在浏览器中打开[https://api.twitter.com/oauth/request_token](https://api.twitter.com/oauth/request_token)将显示字符串“无法验证 oauth 签名和令牌”。当我尝试在 ASP 中获得相同的东西时，它返回不可读的数据。

```
<% @LANGUAGE="VBSCRIPT" %>
<%
Set objXMLHTTP = Server.CreateObject("MSXML2.ServerXMLHTTP")
objXMLHTTP.open "GET", "https://api.twitter.com/oauth/request_token", false
objXMLHTTP.send ""

Response.Write "<pre>"
Response.Write objXMLHTTP.responseText
Response.Write "<hr>"
Response.Write objXMLHTTP.getAllResponseHeaders()
Response.Write "</pre>"
%> 
```

输出是：

```
?
------
Date: Thu, 06 Dec 2012 09:12:17 GMT
Status: 401 Unauthorized
X-MID: caa889032d29f5316a855dcadd748211ed4ee276
X-Frame-Options: SAMEORIGIN
Cache-Control: no-cache, no-store, must-revalidate, pre-check=0, post-check=0
Content-Type: text/html; charset=utf-8
Last-Modified: Thu, 06 Dec 2012 09:12:16 GMT
Pragma: no-cache
X-Transaction: dd71c8da0813a966
Expires: Tue, 31 Mar 1981 05:00:00 GMT
X-Runtime: 0.02056
Set-Cookie: k=10.36.75.125.1354785136971277; path=/; expires=Thu, 13-Dec-12 09:12:16 GMT; domain=.twitter.com
Set-Cookie: guest_id=v1%3A135478513698331395; domain=.twitter.com; path=/; expires=Sat, 06-Dec-2014 21:12:16 GMT
Set-Cookie: _twitter_sess=BAh7CDoPY3JlYXRlZF9hdGwrCFihfG87ASIKZmxhc2hJQzonQWN0aW9uQ29u%250AdHJvbGxlcjo6Rmxhc2g6OkZsYXNoSGFzaHsABjoKQHVzZWR7ADoHaWQiJTMx%250AMzI0YjhkNDc4YmQ4MDExMjlhNTI2NWU5OTAxNDVi--97206a42b05d8cb85fbd88ccd9ccb8aaca39ebef; domain=.twitter.com; path=/; HttpOnly
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 62
Server: tfe 
```

这 ？实际上是一个具有更多字符但无法处理的字符串，因为它包含一个 CHR(0)。

现在我认为这可能是因为`Content-Encoding: gzip`，但即使发送`objXMLHTTP.setRequestHeader "Accept-Encoding", "none"`（或任何其他格式）它返回相同。

有人知道我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:34:39.027

我已经看了好几个小时了，就在问了之后，我找到了遮阳篷！Twitter API 要求用户代理与请求一起发送很长的内容。所以它很简单：

```
Set objXMLHTTP = Server.CreateObject("Msxml2.ServerXMLHTTP.6.0")
objXMLHTTP.open "GET", "https://api.twitter.com/oauth/request_token", false
objXMLHTTP.SetRequestHeader "User-Agent", "something"
objXMLHTTP.send() 
```

# jquery - jQuery UI - “对象不支持属性或方法‘标签’” IE7

> ID：13740493
> 
> 赞同：1
> 
> 时间：2012-12-06T09:24:40.407
> 
> 标签：jquery, jquery-ui, internet-explorer, internet-explorer-7

我有一个在几乎所有浏览器上都使用 jQuery UI 选项卡的完美工作网页 - 它不适用于 IE7。

我所有的代码都是由 asp 文件呈现的——包括数据，包括 JavaScript 和 CSS，还有创建选项卡的代码。

我的第一个问题是，在 IE7 中，我在警报框中收到以下消息：

> Internet Explorer 无法打开 Internet 站点。

几个小时后，我找到了一种使用 脚本标签的[defer 属性来解决这个问题的方法。](http://www.w3schools.com/tags/att_script_defer.asp)

现在，我收到以下错误：

> 对象不支持属性或方法“选项卡”

当我检查 jQuery 和 jQuery UI 版本时（看看它们是否被加载），我只得到 jQuery 的结果。

我想，没有加载 jQuery UI 或者创建选项卡的脚本在加载库之前执行，尽管它应该在文档准备好时执行。

有没有人面临同样的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:30:13.160

加载 jQuery UI 的脚本标签依赖于在加载 jQuery UI 脚本*之前*运行 jQuery 的脚本标签中的 JavaScript 。如果您`defer`在 jQuery 脚本标签上使用该属性，则会引入竞争条件，最终可能会导致 jQuery UI 首先加载并失败（而不是添加`tabs`到`jQuery.fn`）。*因此，使用*该`tabs`函数的代码是否在`ready`回调中并不重要。

您根本不需要使用`defer`，因此我建议不要使用`defer`和发布有关您的原始问题的问题，而不是尝试解决此问题，因为添加`defer`不应该是解决方案。

但是，如果您想继续使用`defer`，请删除您的 jQuery UI 脚本标签，并将其放在页面底部，就在结束`</body>`标签之前：

```
<script>
(function() {
    var waitingForUI = false;

    loadScripts();

    function loadScripts() {
        if (window.jQuery && window.jQuery.fn.tabs) {
            // Both jQuery and jQuery UI are loaded.
            // ==> your code using `tabs` here <==
        }
        else {
            if (window.jQuery) {
                // jQuery is loaded but not jQuery UI, go get it
                // unless we've already started loading it
                if (!waitingForUI) {
                    waitingForUI = true;
                    jQuery.getScript("/your/path/to/jquery/ui");
                }
            }
            setTimeout(loadScripts, 10);
        }
    }
})();
</script>
</body> 
```

这将等待 jQuery 被加载，然后加载 jQuery UI 脚本，然后触发您的代码。

或者，当然，只需创建您自己的包含 jQuery 和 jQuery UI 的脚本文件，然后使用您的代码`tabs`，然后加载该文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-07-27T11:49:02.257

I had this problem too and I found that I'd saved the "jquery-ui.css" content instead of "jquery-ui.js" content.
check it up if you are using correct files?

# matlab - 将 Matlab 数组转换为元胞数组

> ID：13740495
> 
> 赞同：1
> 
> 时间：2012-12-06T09:24:44.993
> 
> 标签：matlab, cells

我无法将 matlab 数组转换为单元格值数组。

```
stacksize = size(resultStack.('f'),1); % 2897 values
exportc = cell(stacksize+1, 4);

exportc{1,1} = 'top';
exportc{1,2} = 'bottom';
exportc{1,3} = 'left';
exportc{1,4} = 'right';

exportc{2:end,:} = mat2cell(resultStack.('f'), 1:stacksize, 1:4); 
```

这以错误结束

> 输入参数 D1 到 D2 必须与输入矩阵大小 [2897 4] 的每个维度相加。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:45:52.310

你没有`mat2cell`正确使用。以下是如何使用它：

```
C = mat2cell(resultStack.('f'), ones(stacksize,1), ones(1,4)) 
```

这意味着：您指定输出单元格的每一行`C`都应包含接下来的 1 行和 1 列`resultStack.f`（这是所有这些 1 背后的原因）。

此外，正如 Colin T. Bowers 所指出的，您应该使用 barece-indexing ( *)*`()`从另一个单元格复制内容，并且仅在从单元格中检索数据时使用括号索引 ( `{}`) 。

 *因此，您的代码的完整、更正版本应该是：

```
stacksize = size(resultStack.('f'),1); % 2897 values
exportc = cell(stacksize+1, 4);

exportc(1,:) = {'top' 'bottom' 'left' 'right'};
exportc(2:end,:) = mat2cell(resultStack.('f'), ones(stacksize,1), ones(1,4)); 
```

或者，由于您想要的输出允许，您可以使用更新、更好、更简单的`num2cell`命令：

```
exportc(1,:)     = {'top' 'bottom' 'left' 'right'};
exportc(2:end,:) = num2cell(resultStack.('f')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:27:38.803

**更新：** Rody 在您的代码中发现了第二个问题，超出了我在此处提到的问题。您应该将他完全正确的解决方案合并到您的代码中，如果您对它感到满意，请将他的回复标记为答案。不要将此响应标记为答案，因为它不完整。

`()`将元胞数组分配给另一个元胞数组的子集时使用括号，例如

```
%# A simple example
A = cell(2, 2);
B = {'hello', 'world'};
A(1, :) = B; 
```

在您的代码中，您需要将最后一行更改为：

```
exportc(2:end,:) = mat2cell(resultStack.('f'), 1:stacksize, 1:4); 
```

请注意，花括号`{}`保留用于索引到元胞数组的单个元胞的内容。*

# asp.net - IE9 中关于多值参数的 ReportViewer 控件错误

> ID：13740501
> 
> 赞同：1
> 
> 时间：2012-12-06T09:25:21.927
> 
> 标签：asp.net, reporting-services, ssrs-2008, reportviewer

这是微软示例*Employee_Sales_Summary_2008R2*在 IE9 中使用 WebForms ReportViewer 2010 的样子：

![在此处输入图像描述](../Images/c3f0347123cf74fac1939a0b53cc52a9.png)

如果我将 IE9 更改为模拟 IE7 或 IE8，它看起来像：

![在此处输入图像描述](../Images/ca9ca7e95298d8449cfd1f244fb3db12.png)

此特定参数是一个多值参数，没有设置可用值。

第一个图像的值之间应该有逗号，并导致以下错误消息：

> 为报告参数“CategoryQuota”提供的值对其类型无效。(rsReportParameterTypeMismatch)

有没有办法来解决这个问题？

# sql - 在位列之间复制值的 SQL 脚本

> ID：13740510
> 
> 赞同：0
> 
> 时间：2012-12-06T09:26:11.487
> 
> 标签：sql

我在一个表中有 10 列，我想将 A 列中的值复制到 E 列，其中两者都是位列。完全不应对 A 列进行任何更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:26:59.053

使用不带 where 子句的 update 语句复制`ColumnA`to`ColumnB`

```
Update YourTable
set ColumnE = ColumnA; 
```

您可能会看到：[更新语句 SQL](http://www.techonthenet.com/sql/update.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:32:43.507

```
UPDATE table set columnE = columnA 
```

您也可以提供 WHERE 子句

```
UPDATE table set columnE = columnA Where SomeCondition 
```

# c++ - SQLite 函数错误：未找到入口点

> ID：13740514
> 
> 赞同：0
> 
> 时间：2012-12-06T09:26:34.293
> 
> 标签：c++, sqlite, visual-studio-2005

我在我的项目中使用 SQLite 作为数据库。我在旧版本中正确构建并执行了该项目。但是在对项目的其他部分进行了一些修改后，出现了问题。

它仍然可以构建，但它不起作用。

当我调试项目时，我看到`sqlite3_prepare_v2`SQLite 的功能导致了一个问题：

> 未找到入口点。

我用旧版本替换了这个函数`sqlite3_prepare`，它导致了运行时错误。

我什至无法弄清楚问题所在。它一直在同一个系统和旧项目上工作。

我在互联网上研究了解决方案。据说，通过regedit更改错误日志可以解决，但没有成功。

如果有人以前见过并解决过这个问题，我会很高兴。

谢谢你。

# ruby - 如何在短语中第一次出现正则表达式（使其变得贪婪）

> ID：13740515
> 
> 赞同：0
> 
> 时间：2012-12-06T09:26:34.047
> 
> 标签：ruby, regex, regex-greedy

我正在尝试构建一个在第一次出现时停止的正则表达式。我知道我可以通过把`?`.

考虑一个字符串：

```
"This is sample text located at first line and located at second line." 
```

在这里，我正在寻找`pattern1`使用`pattern2`.

*   `pattern1`是`"text"`
*   `pattern2`是`"located at"`

在上面的字符串中，我想提取`"text"`，我的搜索模式是`"located at"`，所以我使用以下正则表达式：

```
/is.*sample(.*)located at?/ 
```

我如何做到`located at`不贪心？我正在使用[http://rubular.com/](http://rubular.com/)来验证我的正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:12:45.003

您的正则表达式不正确。

如果您想要在第一个“位于”之前出现的单个“单词”，您可以使用：

```
"This is sample text located at first line and located at second line."[/(\S+)\s+located at/, 1]
=> "text" 
```

我将“单词”定义为使用 的非空白字符`\S`，因此标​​点符号和数字将包含在字母字符中。可以使用其他类，例如，`\w`如果您想要`[A-Za-z0-9_]`. 否则使用`[a-z]`如下：

```
"This is sample text located at first line and located at second line."[/([a-z]+)\s+located at/i, 1]
=> "text" 
```

如果您想要任何出现在“样本”和第一个“位于”之间的文本，您可以使用：

```
"This is sample text located at first line and located at second line."[/sample\s+(.+?)\s+located at/, 1]
=> "text" 
```

在您的模式`/test.*sample(.*)located at?/`中，您正在使用 multiple `.*`，这意味着任何东西的零个或多个（但是，实际上并不是任何东西，具体取决于上下文，但这比我们现在需要做的更深）。那个“更多”是你正在碰撞的部分，因为它是贪婪的。而且，因为你使用了两次，所以它是双重贪婪的。您可以通过添加来使用“非贪婪”变体`?`，但它仍然无法正常工作，因为您给正则表达式引擎提供了太多可玩的绳索。我的模式收紧了这一切，减少了`?`在前两个中使用修饰符的需要。

我的第三个示例需要它，因为再一次，它`.+`会很贪婪并且需要适度。

最后，`at?`在您的模式不适`?`用于修改`.*`，它作用于前面的`t`，导致引擎“必须找到零或一't'”，这不是你想要的，因为那会匹配“一”或“在”。

# clearcase - Clearcase - 获取与分支无关的文件的最新版本

> ID：13740517
> 
> 赞同：2
> 
> 时间：2012-12-06T09:26:38.297
> 
> 标签：clearcase, config, specifications

有没有办法制定配置规范，以获取所有文件的最新版本？我真正想做的是查看每个文件的日期，并获取最近修改的文件。（即使它已签出/保留）

（我想用它来制作快照视图，并确保我总是拥有最新的文件。我知道它可能会导致我有并行分支的问题，但对我来说没关系）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:02:23.877

只需使用`/LATEST`规则就足以选择最后一个版本。

对于给定的分支：

```
 element * .../aBranch/LATEST
 element * /main/LATEST 
```

*现在，您不能在多个*分支中选择一个元素的最新版本：您必须先选择一个分支。

对于*一个*文件，您可以首先通过解析“”的结果来确定哪个分支包含最新版本**[`cleartool lshistory`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_lshistory.htm)**。
但是当您有数千个文件时，这种方法不能很好地扩展。

# wpf - 使用 ItemsSource 时如何设置 TabItem 的标题

> ID：13740525
> 
> 赞同：0
> 
> 时间：2012-12-06T09:27:29.187
> 
> 标签：wpf, xaml

将用户控件集合绑定到 TabControl 的 ItemsSource 属性很有用。

然而，一旦你走这条路，似乎很难从代码中设置每个 tabitem 的标题。我可以从 xaml 中做到这一点，*但我需要从代码中做到这一点*。

所以我正在寻找的是类似的东西

```
TabControl tabControl = new TabControl();

tabControl.ItemsSource = collectionOfUserControls;

tabControl.HeaderPath = "Title" // this property is not available 
```

**编辑**

如果手动添加到集合中，这就是如何做到这一点。问题是如何在使用 ItemsSource 属性时设置标题。

```
 var vragenlijsten = new UserControl[]
                                {
                                    new UC1() ,
                                    new UC2(), 
                                };

        TabControl tabControl = new TabControl();

        foreach (var vragenlijst in vragenlijsten)
        {
            var tabItem = new TabItem();
            tabItem.Content = vragenlijst;
            tabItem.Header = vragenlijst.GetType();
            tabControl.Items.Add(tabItem);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:15:07.963

如果您**必须**在代码中执行此操作，则需要检索`TabItem`s 并为它们中的每一个设置标题。像这样的东西：

```
(tabControl.Items[0] as TabItem).Header = "Title"; 
```

# c# - ServiceStack.Text 是否提供漂亮的 JSON 打印？

> ID：13740534
> 
> 赞同：14
> 
> 时间：2012-12-06T09:28:01.713
> 
> 标签：c#, .net, json, servicestack

TL;DR：ServiceStack.Text 中是否有内置方式来生成打印精美的 JSON？

我正在使用[ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)进行 JSON 序列化。到目前为止它工作得非常好，但是创建的 JSON（使用`.ToJSON()`）不是用空格或换行符格式化的（通过网络发送时最有可能节省空间）。但是，在某些情况下，最好将 JSON 格式化为更易于人类阅读。

该`.Dump ()`方法会进行某种格式设置，但不会生成有效的 JSON（即缺少周围的双引号）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T04:51:18.533

[ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)中的`T.Dump()`和`T.PrintDump()`扩展方法只是使用 TypeSerializer 类或扩展方法创建的[JSV 格式的格式化版本。](https://github.com/ServiceStack/ServiceStack.Text/wiki/JSV-Format)它只是提供人类友好的数据转储，它是不可解析的。`T.ToJsv()`

v4.5.5 提供的新`string.IndentJson()`扩展方法可以让您漂亮地打印 JSON，否则您可以为 Chrome 或 Firefox 安装漂亮的 JSONView 扩展程序以查看漂亮的 JSON，或者您可以将 JSON 粘贴到[jsonprettyprint.com](http://jsonprettyprint.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T10:45:14.877

从 servicestack 文本中获得漂亮的 json 格式会很好。作为一种解决方法，因为我创建了一个插件来在需要时格式化 json。希望未来版本的服务堆栈我可以摆脱这段代码。

从下面的链接下载 dll，（它为您提供了格式化 json 的扩展方法） [http://www.markdavidrogers.com/json-pretty-printerbeautifier-library-for-net/](http://www.markdavidrogers.com/json-pretty-printerbeautifier-library-for-net/)

我使用它而不是 json.net 之类的东西，因为我想确保我没有更改 json 的 servicestack 序列化。

然后我创建了以下插件

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using JsonPrettyPrinterPlus;
using ServiceStack.Common.Web;
using ServiceStack.ServiceClient.Web;
using ServiceStack.ServiceHost;
using ServiceStack.ServiceModel.Serialization;
using ServiceStack.ServiceModel.Support;
using ServiceStack.WebHost.Endpoints;

namespace Bm.Services.Plugins
{
    public class PrettyJsonFormatPlugin : IPlugin
    {
        public const string JsonPrettyText = "application/prettyjson";
        public void Register(IAppHost appHost)
        {
            appHost.ContentTypeFilters.Register(JsonPrettyText,
                 Serialize,
                 Deserialize);

        }

        public static void Serialize(IRequestContext requestContext, object dto, Stream outputStream)
        {
            var json = HttpResponseFilter.Instance.Serialize(ContentType.Json, dto);

            json = json.PrettyPrintJson();
            byte[] bytes = Encoding.UTF8.GetBytes(json);

            outputStream.Write(bytes, 0, bytes.Length);
        }

        public static object Deserialize(Type type, Stream fromStream)
        {
            var obj = JsonDataContractDeserializer.Instance.DeserializeFromStream(type, fromStream);
            return obj;
        }

    }

    public class PrettyJsonServiceClient : JsonServiceClient
    {
        public PrettyJsonServiceClient() : base()
        {
        }

        public PrettyJsonServiceClient(string baseUri) : base(baseUri)
        {           
        }

        public PrettyJsonServiceClient(string syncReplyBaseUri, string asyncOneWayBaseUri) : base(syncReplyBaseUri, asyncOneWayBaseUri)
        {
        }

        public override string Format
        {
            get
            {
                return "prettyjson";
            }
        }
    }
} 
```

在您的启动代码中注册新插件

```
EndpointHost.AddPlugin(new PrettyJsonFormatPlugin()); 
```

从 C# 调用示例服务

```
var prettyJsonClient = new PrettyJsonServiceClient(HOST_URL);
var ret = prettyJsonClient.Get<string>(@"/system/ping/test"); 
```

这是一个等效的xml

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using Bm.Core;
using JsonPrettyPrinterPlus;
using ServiceStack.Common.Web;
using ServiceStack.ServiceClient.Web;
using ServiceStack.ServiceHost;
using ServiceStack.ServiceModel.Serialization;
using ServiceStack.ServiceModel.Support;
using ServiceStack.WebHost.Endpoints;

namespace Bm.Services.Plugins
{
    public class PrettyXmlFormatPlugin : IPlugin
    {
    public const string XmlPrettyText = "application/prettyxml";
    public void Register(IAppHost appHost)
    {
        appHost.ContentTypeFilters.Register(XmlPrettyText,
         Serialize,
         Deserialize);

    }

    public static void Serialize(IRequestContext requestContext, object dto, Stream outputStream)
    {

        var xml = HttpResponseFilter.Instance.Serialize(ContentType.Xml, dto);

        xml =  Common.PrettyXml(xml);
        byte[] bytes = Encoding.UTF8.GetBytes(xml);

        outputStream.Write(bytes, 0, bytes.Length);
    }

    public static object Deserialize(Type type, Stream fromStream)
    {
        var obj = JsonDataContractDeserializer.Instance.DeserializeFromStream(type, fromStream);
        return obj;
    }

    }

    public class PrettyXmlServiceClient : XmlServiceClient
    {
    public PrettyXmlServiceClient()
        : base()
    {
    }

    public PrettyXmlServiceClient(string baseUri)
        : base(baseUri)
    {
    }

    public PrettyXmlServiceClient(string syncReplyBaseUri, string asyncOneWayBaseUri)
        : base(syncReplyBaseUri, asyncOneWayBaseUri)
    {
    }

    public override string Format
    {
        get
        {
        return "prettyxml";
        }
    }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-28T18:00:13.617

要获得漂亮的 JSON：

```
var formattedJson = JsvFormatter.Format(JsonSerializer.SerializeToString(dto)); 
```

生成的 json 字符串可以被解析回来：

```
var dto = JsonSerializer.DeserializeFromString<MyDto>(formattedJson); 
```

# android - 多个异步任务的问题

> ID：13740539
> 
> 赞同：0
> 
> 时间：2012-12-06T09:28:13.513
> 
> 标签：android, android-asynctask

我`asyncTasks`一次开始6个。但我的问题是我怎么知道`onPostExecute()`返回了哪个异步任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:57:21.457

在这种情况下，IMO 最好的解决方案是将某种回调传递给您的每个`AsyncTask`s。这是如何完成的：

1.  创建你的回调接口：

    ```
    public interface OnTaskCompleteListener() {
        public void onTaskComplete(Void result);
    } 
    ```

2.  然后将此回调添加为您的构造函数参数`AsyncTask`：

    ```
    public class MyAsyncTask extends AsyncTask { 
        private OnTaskCompleteListener listener; 

        public MyAsyncTask(OnTaskCompleteListener listener){ 
            this.listener=listener; 
        }

        @Override 
        protected void onPostExecute(Void result) {
            if (this.listener!=null) {
                this.listener.onTaskComplete(result);
            }
        }
    } 
    ```

3.  最后，在实例化您的 时`AsyncTask`，为每个实例提供回调实现：

    ```
    //instance 1
    new MyAsyncTask(new OnTaskCompleteListener() {
        public void onTaskComplete(Void result) {
            //do something with the result
        }
    }).execute();

    //instance 2
    new MyAsyncTask(new OnTaskCompleteListener() {
        public void onTaskComplete(Void result) {
            //do something completely different here
            //this code doesn't interfere in any way with instance 1
        }
    }).execute(); 
    ```

请注意，您没有义务为 each 实现回调`AsyncTask`，可以共享实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:33:27.940

首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。

如果你真的想要并行执行，你可以调用`executeOnExecutor(java.util.concurrent.Executor, Object[]) with THREAD_POOL_EXECUTOR`.

了解更多信息。 [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

```
public final AsyncTask<Params, Progress, Result> executeOnExecutor (Executor exec, Params... params) 
```

在 API 级别 11 中添加 使用指定参数执行任务。任务返回自身（this），以便调用者可以保留对它的引用。

此方法通常用于`THREAD_POOL_EXECUTOR`允许多个任务在 AsyncTask 管理的线程池上并行运行，但是您也可以使用自己的 Executor 进行自定义行为。

**警告：**允许多个任务从线程池并行运行通常不是人们想要的，因为它们的操作顺序没有定义。例如，如果这些任务用于修改任何共同的状态（例如由于单击按钮而写入文件），则无法保证修改的顺序。如果不仔细工作，在极少数情况下，较旧版本的数据可能会覆盖较新版本的数据，从而导致难以理解的数据丢失和稳定性问题。此类更改最好​​按顺序执行；为了保证无论平台版本如何都可以序列化此类工作，您可以将此功能与`SERIAL_EXECUTOR`.

此方法必须在 UI 线程上调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T09:34:13.160

```
myTask extends AsyncTask{ 
int mTag; 
public AsyncTas(int tag){ 
this.mTag = tag; 
}

@Override protected void onPostExecute(Void arg0) {
super.onPostExecute(arg0); 
switch(tag){ .... } 

}

} 
```

# google-chrome - RSpec：当驱动程序为：chrome时自动设置js：true？

> ID：13740540
> 
> 赞同：0
> 
> 时间：2012-12-06T09:28:15.483
> 
> 标签：google-chrome, selenium, rspec, capybara

我们正在使用无头 webkit 驱动程序进行集成测试，因此我们不必再次使用 Selenium 打开浏览器窗口。

但是，有时，真正查看浏览器中发生的事情很方便，因此我们`driver: :chrome`在运行测试时可以选择，此外`js: true`，它还会打开 Chrome。

`js: true`为方便起见，只要将驱动程序设置为自动设置就好了`:chrome`，这可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:47:15.333

从源代码一目了然，通过`driver`在您的功能中定义似乎应该启动 Capybara。

[https://github.com/jnicklas/capybara/blob/master/lib/capybara/rspec.rb#L21](https://github.com/jnicklas/capybara/blob/master/lib/capybara/rspec.rb#L21)

# ruby-on-rails - 嵌套在集合块中的资源声明

> ID：13740543
> 
> 赞同：0
> 
> 时间：2012-12-06T09:28:35.977
> 
> 标签：ruby-on-rails, routing, rails-routing

下面的路线似乎按预期工作，允许`GET /widgets/skins` 资源：widgets do collection do resources：skins，only: "index" end end

我似乎无法在[http://guides.rubyonrails.org/routing.html#nested-resources](http://guides.rubyonrails.org/routing.html#nested-resources)中找到这种形式，只有常规：

```
resources :widgets do
  collection do
    get :skins, to: "Skins#index"
  end
end 
```

第一个示例是我可以依赖的官方功能吗？如果是这样，你能指点我合适的文档吗？

我正在使用 Rails 3.2.9。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:42:02.780

您可以使用`get :skins, action: "index"`. 它会生成完全相同的路线，并且在您链接的文档中进行了描述

# php - 为什么不回显 $rslt 变量

> ID：13740544
> 
> 赞同：-7
> 
> 时间：2012-12-06T09:28:44.843
> 
> 标签：php, cookies

我有以下代码，但我找不到为什么不回显 $rslt[0]["product_id"]; ? cookie在浏览器中，谁能告诉我什么问题？

```
if (isset($_COOKIE["jshopping_temp_cart"])) {
    mysql_connect("localhost", "user", "pass") or die(mysql_error());
    mysql_select_db("shopping_katalog") or die(mysql_error());
    $result = mysql_query("SELECT * FROM x9qg6_jshopping_cart_temp WHERE id_cookie ='".$_COOKIE["jshopping_temp_cart"]."'");    
    while ($row = mysql_fetch_array($result)) {
        $data = $row['cart'];
        $rslt = unserialize($data);
        echo $rslt[0]["product_id"];
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T09:29:43.027

你没有使用`echo`，所以它不会回显。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T09:30:04.927

你需要`echo`它；）

```
 echo $rslt[0]["product_id"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T09:30:19.043

您实际上根本没有在这里调用 echo ，而且如果您在没有值的变量上调用 echo ，那么它根本不会回显值。

`echo $rslt[0]["product_id"];`

确保变量中确实有一些东西：

`var_dump($rslt[0]["product_id"]);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T09:33:16.287

echo is missing in your code. please modify your code like:

```
 if (isset($_COOKIE["jshopping_temp_cart"])) {

    mysql_connect("localhost", "shopping_katalog", "logik@112233") or die(mysql_error());
    mysql_select_db("shopping_katalog") or die(mysql_error());
    $result = mysql_query("SELECT * FROM x9qg6_jshopping_cart_temp WHERE id_cookie ='" . $_COOKIE["jshopping_temp_cart"] . "'");
    while ($row = mysql_fetch_array($result)) {
        $data = $row['cart'];
        $rslt = unserialize($data);
        echo $rslt[0]["product_id"];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T09:36:37.447

您可以回显必填字段或使用 print_r() 显示所有结果，如 print_r();

# ios - CGContextClear 警告

> ID：13740550
> 
> 赞同：7
> 
> 时间：2012-12-06T09:29:03.103
> 
> 标签：ios, cgimage

我在使用 CGImageDestinationFinalize 时遇到了 iOS 问题。我将在 CGImageDestinationRef 上调用 CGImageDestinationFinalize 并收到以下警告

> 错误：“CGContextClear”功能已过时，将在即将到来的更新中删除。不幸的是，这个应用程序或它使用的库正在使用这个过时的函数，从而导致系统性能的整体下降。

查看 Instruments，当我调用 CGImageDestinationFinalize 时，我的内存使用量猛增（有时它会变得如此之高以至于崩溃）。我不确定这个问题是否应该归咎于，但我已将其隔离为 CGImageDestinationFinalize 的问题

关于使用什么来避免调用 CGContextClear 的任何建议？或者如何使用 CGImageDestinationFinalize 减少内存使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T21:18:05.353

我会说它肯定与 CGContextClear 有关。它保留了您在内存中绘制的任何内容。虽然您的上下文不会被清除或释放，但它会将在该上下文中定义的元素保留在内存中。您使用的是哪个版本的 iOS？
我很确定 CGContextClear 不适用于 iOS 6 及更高版本。

如果您转到文档，您会注意到 CGContextClear 不再出现 [https://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Reference/CGContext/Reference/reference.html](https://developer.apple.com/library/ios/DOCUMENTATION/GraphicsImaging/Reference/CGContext/Reference/reference.html)

寻找可能有助于您的目的的 CGContextClearRect

# c# - 如何处理文件目录

> ID：13740553
> 
> 赞同：1
> 
> 时间：2012-12-06T09:29:25.313
> 
> 标签：c#, winforms, visual-studio-2010

我目前正在开发一个项目，该项目与多个我无法控制的可执行文件密切合作。这些可执行文件都依赖于其所需的文件（一些是我的程序创建的，而另一些是由我没有的其他可执行文件创建的控制）位于同一目录中。这些可执行文件都创建文件并将它们存储在与运行可执行文件相同的目录中。

目前，对于我的大部分测试，我一直在使用硬编码的目录路径，这对我来说很好，但显然在应用程序完成后这将不起作用.. 我只是想知道最好的处理方法是什么这些文件的目录路径。我可以完全控制存储可执行文件和文件的位置；只是无法控制这些可执行文件如何处理其输入/输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:37:57.430

您可以使用`Application.ExecutablePath`将为您提供正在运行的可执行文件路径的属性。在此之后，您可以调用该`System.IO.Path.GetDirectoryName()`方法，这将产生可执行文件的当前目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:36:45.057

包含 WinForms 可执行文件的目录是：

```
AppDomain.CurrentDomain.BaseDirectory 
```

# ibm-sbt - 带有 XPage 的 sbt.properties

> ID：13740554
> 
> 赞同：0
> 
> 时间：2012-12-06T09:29:34.533
> 
> 标签：ibm-sbt

在安装指南中解释了 sbt.properties 文件，并引用了不同的环境。在 XPages 中，您通常使用 xsp.properties 文件。我是否应该将引用从 sbt.properties 复制到 xsp.properties，以利用这些引用。还提到通过 %{variable name} 包含这些变量。是否可以在我的 Domino 数据库的 faces-config.xml 中使用这样的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T11:35:02.497

SDK 使用工厂来加载用于配置的托管 bean 和属性，即端点定义、环境、密码存储等。SDK 包含一个用于定义工厂的扩展点，并包括用于从类路径或 WEB-INF 文件夹读取配置文件的标准工厂您的网络应用程序。此外，SBT 游乐场有一些代码可以从 Notes DB 中读取这些数据。我们正在努力在即将发布的版本中包含 Domino 和 Domino Designer 中的 SDK。因此，与此同时，还需要一些发展。我将创建一个示例，说明如何创建自定义 bean 和 proeprties 工厂（都柏林研讨会提出的请求）。作为其中的一部分，我还将查看此请求。Phil 也可能对如何重用 Playground 使用的代码有一些想法。- 标记

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:02:34.833

SBT 代码同时使用托管 bean 和属性。在 Java EE 服务器的情况下，当 JSF 不在混合中时，我们从头开始实现。对于 XPages，我们实际上使用了 XPages 框架已经实现的东西。这意味着它使用在 xsp.properties 中定义的属性，以及在常规 faces-config.xml 中定义的 JSF 托管 bean。由于 JSF 框架不支持托管 bean 定义文件中的属性替换，因此 XPagesNow 无法使用此功能，在 JSF 中，还可以使用 EL 表达式计算属性值：#{...}。这不是那么容易使用，但可以提供帮助。

# cucumber - 什么时候是功能，什么时候是场景

> ID：13740557
> 
> 赞同：0
> 
> 时间：2012-12-06T09:29:39.603
> 
> 标签：cucumber, organization

我正在寻找一些背景信息来阐明*功能*和*场景*之间的区别。

说，我有一个文件`use_administration.feature`

```
Feature: Use administration area

  So that I can administrate the application
  As an administrator
  I can visit the administration area

  Scenario: Get a login form
    Given I am not logged in
    When I visit the administration dashboard
    Then I should see a login-form

  Scenario: Access the Dashboard
    Given I am not logged in
    And there is a user "admin@example.com" with password "password"
    When I log in with username "admin@example.com" and password "password"
    Then I should see a dashboard 
```

我会认为这些场景的定义非常明确。

但是，当查看另一个时`Feature`，问题变得更加清晰

```
Feature: Manage campings

  So that a writer can manage her campings
  As a logged in writer
  I want to update and delete campings

  Scenario: Logged in writer can create a new camping
    Given I am administrator
    And no campings on the campings listing
    When I create a Camping named "Beautifull Green"
    And I visit the "Campings" administration page
    Then I should see a camping "Beautifull Green"

  Scenario: Logged in writer sees own campings dashboard
    Given I am administrator
    And I have a camping "Beautifull Green"
    When I visit the administration dashboard
    Then I should see a panel titled "My Campings"
    Then I should see camping "Beautifull Green"

  Scenario: Logged in writer can update campings
    Given I am administrator
    And I have a camping "Beautifull Green"
    When I visit the update page for "Beautifull Green"
    And I update the name to "updated!"
    And I visit the "Campings" administration page
    Then I should see a camping "updated!"

  Scenario: Logged in writer can update camping from dashboard
    Given I am administrator
    And I have a camping "Beautifull Green"
    When I visit the administration dashboard
    Then I should see the "edit"-link for "Beautifull Green" 
```

这些场景中有很多重叠，因此可能应该是功能本身。请注意，重叠部分主要由共享步骤覆盖。然而仍然有很多重复。

我的主要问题是：什么时候是功能，什么时候是场景。有什么经验法则吗？是否有关于一个功能应该包含多少个场景的良好做法？还是我完全误解了整个话题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:49:24.897

在我看来，这一切都与现实生活中的组织能力有关。如果你能用简单的英语清楚地描述场景，那就足够了。

让我们检查您的第二个功能。有很多问题。

1.  用户角色是什么？作家还是管理员？您在一个功能中提到了它们。这是不可接受的。

2.  描述格式有问题。这不是正确的英语。它应该是：

    ```
    In order to keep my campaigns up to date
    As a logged in writer
    I want to manage my campaigns 
    ```

    或者

    ```
    As a logged in writer
    I want to manage my campaigns
    So that I can keep my campaigns up to date 
    ```

    这里有一些注释

    *   您在场景中提到了 CRUD，但前面的描述仅用于更新和删除。
    *   “管理活动”不是业务目标，而是活动。所以我用“让我的广告系列保持最新”来代替它。
3.  场景中有“鉴于我是管理员”和“我有一个露营'Beautifull Green'”的重叠。那是不必要的。你应该用它`Background`来描述。例如：

    ```
    Background:
      Given I have logged in as an Administrator
      And I have a camping "Beautifull Green" 
    ```

    这些将为您节省所有重复项。如果您想测试`Create`，只需使用另一个名称，相同的“Nice Red”。

4.  场景标题太长。无需主题。您之前已经描述了用户和背景。标题可以是：

    ```
    Scenario: Create new campaign
      # description here
    Scenario: Update campaign
      # ..... 
    ```

希望这些帮助。

# .net - 使用 mysql 工作台创建 SQL 数据库 (.mdf)？

> ID：13740571
> 
> 赞同：0
> 
> 时间：2012-12-06T09:30:29.803
> 
> 标签：.net, database, c#-4.0, mysql-workbench

我已经为开发人员安装了 mysql 产品，并开始“创建模式”，根据其他博客和论坛，它是 mysql 语言来创建数据库。之后，我尝试将该数据库文件导入到我的 C# 项目中，这就是我对 Access 数据库所做的，但我似乎找不到数据库？另外，我在 mysql 工作台上找不到任何函数来创建或导出我创建的数据库。它包含大约 10 个表格和一个未完成的图表。我想导入用于发布 C# 应用程序的数据库。

# sql - 将包含数据的表从一个模式复制到另一个模式？

> ID：13740572
> 
> 赞同：5
> 
> 时间：2012-12-06T09:30:46.723
> 
> 标签：sql, sql-server, sql-server-2008

我有许多包含数据的表，`Schema1`我想将这些表与数据一起复制到我创建的新模式中，`Schema2`.

有没有一种优雅的方式来做到这一点？我正在使用 SQL Server 管理工作室。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T09:40:08.647

在 SQL Management Studio 中，右键单击具有源表的数据库，选择任务 -> 导出数据。

您将能够设置源和目标服务器和架构，选择您要复制的表，您可以让目标架构创建将要导出的表。

此外，如果复制到相同的服务器和数据库但不同的架构，请确保：

1.  对 Source 和 Destination 参数 使用 Sql Server Native Client（参见
    [https://i.stack.imgur.com/Qqhbd.png ）](https://i.stack.imgur.com/Qqhbd.png)

2.  为 Source 和 Destination 参数选择相同的数据库名称
3.  **在Select Source Tables and Views** GUI中选择从一个或多个表或视图中复制数据（可选）
4.  将目标表的架构更改为与源架构不同的内容（即键入“newschema.tablename”之类的内容）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:38:39.427

假设架构发生了结构变化，因此您不能只进行备份并恢复到新数据库，您可以右键单击数据库并选择任务 | 生成脚本。在第二页有一个选项（默认关闭）来编写数据脚本。

这将创建一系列 SQL 插入语句以及 CREATE TABLE 语句。您可能还需要选择脚本触发器并检查使用这些功能时可能需要的其他一些选项。

您还可以跨模式执行 INSERT 或使用 SSIS，如下所述：

[如何在 SQLServer 数据库的两个实例之间复制数据记录](https://stackoverflow.com/questions/153988/how-can-i-copy-data-records-between-two-instances-of-an-sqlserver-database)

需要注意的一点是，我相信导出数据工具不会传播索引、约束、触发器等，这就是为什么我喜欢使用第一种方法来处理中等数量的数据，或者至少在第一名，然后是其他方法之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-17T19:01:19.590

这是我所做的：

1.  右键单击源表并选择“选择前 1000 行”。
2.  从选择中删除“前 1000 名”。
3.  在 from 子句上方添加“INTO newschema.newtable”
4.  运行该查询。
5.  在新表上创建索引。

这不适用于所有人，因为它要求新架构可从 SQL Studio 中的同一连接获得。

# integration-testing - 使用集成测试测试控制器

> ID：13740578
> 
> 赞同：1
> 
> 时间：2012-12-06T09:31:06.707
> 
> 标签：integration-testing

我从事的项目由 3 层组成：表示（asp.net mvc）-> 业务逻辑-> 存储库

我们使用单元测试测试所有三个部分。

我们计划添加集成测试。现在我们正在决定应该用它们测试哪个部分。

我们考虑下一个解决方案：

*   测试控制器，在这种情况下，将涉及系统的所有三个部分
*   测试业务逻辑，本例只涉及2个部分

如果我们的核心用户很少，我会从第二种解决方案中获益。例如站点、移动版本、命令工具。在这种情况下，所有客户端都将使用经过良好测试的业务逻辑。

您认为哪种解决方案更好？你能描述一下你使用集成测试的经验吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T06:38:28.330

`business logic -> repository:`集成测试是必要的，这里发现了很多严重的错误。通过识别错误的 SQL 查询，在这一层还发现了许多与性能相关的错误。

`presentation:`对控制器测试的反应不一。我认为网页的手动或自动化测试（通过编码的 UI）是必要的，但 UI 测试可能不会涵盖所有的控制器和业务逻辑。所以目前我们也在为控制器编写测试。进行控制器测试的另一个原因是 CodedUI 自动化测试或 UI 手动测试需要大量时间来执行。

首先编写接口集成测试，然后是控制器测试，然后是编码 UI。 *手动测试应该与所有这些活动同时进行。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:59:02.023

我会说你的第一个选择应该是一个偏好。如果您要编写跨越多个层的进程内（即不是浏览器自动化）测试，您最好从“外部”开始，并尽可能轻松地通过尽可能多的层。通过调用你的控制器开始你的测试应该提供对你的系统在给定（例如）意外或不完整的用户输入的情况下的行为的洞察和保证。您还可以在您的操作返回的视图模型上执行您的断言，从而最大限度地提高测试的相关性和覆盖率。

# vbscript - 从 VBscript 恢复/最大化应用程序窗口的可靠方法

> ID：13740581
> 
> 赞同：0
> 
> 时间：2012-12-06T09:31:13.947
> 
> 标签：vbscript

我有 Visual Basic 脚本，其中包括创建 IE 实例、隐藏它、操作它，然后使其对用户可见。

不幸的是，由于不明原因，恢复功能不适用于所有 PC。当前代码是：

```
objectIE.Visible = True
wshShell.AppActivate objectIE 'which is I think wrong as objectIE is not PID.
wscript.sleep timoutSleep
wshShell.SendKeys restWindow 'which is "% r" and will not work on all locales :( 
```

我认为问题出在这一行：

> wshShell.AppActivate objectIE

我想在这里我需要将 PID 传递给该`AppActivate`方法。

**问题**：如何获取 IE 对象的 PID？或者`wshShell.AppActivate objectIE`是正确的，我正在寻找错误的方向？

PS我不能使用应用程序的标题，因为它不是唯一的:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:10:05.400

您可以使用 pInvoke 从 PowerShell 脚本调用 Win32 方法。互联网上到处都是这样的例子。对于 PostMessage，这里有一个示例： [SendMessage 导致脚本挂起](https://stackoverflow.com/questions/9891585/sendmessage-is-causing-script-to-hang)

为此，您需要在字符串中构建 PSScript 行，然后使用例如执行它 `powershell.exe -ExecutionPolicy Unrestricted -command "get-process -Name iexplore"`

并提取生成的 Id，然后将其发送到调用 的脚本，`PostMessage()`甚至将所有命令放入单个（短）脚本中。

# c# - 如何将 TextBox 类型的对象赋予线程

> ID：13740583
> 
> 赞同：0
> 
> 时间：2012-12-06T09:31:16.627
> 
> 标签：c#, .net

```
private void button1_Click(object sender, EventArgs e)
{
    t = new Thread(new ParameterizedThreadStart(startRequest));
    t.Start(textBox1);
}

void startRequest(object textBox1)
{
    textBox1.Text = "hello";
} 
```

在这里我得到一个错误，即 textBox1 没有属性 Text，在主线程中一切正常，但是在新线程中我得到一个错误，如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:32:40.730

在使用其 Text 属性之前，您必须将您`object`的类型转换为类型。`TextBox`

```
void startRequest(object textBox1)
{
    MethodInvoker mi = delegate
    {
        TextBox tempTextBox = textBox1 as TextBox;
        if (tempTextBox != null)
            tempTextBox.Text = "hello";
    };

    if (this.InvokeRequired)
        this.Invoke(mi);
} 
```

如果转换失败，最好检查 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:33:31.660

Object does not have property, You need to `type cast` object to `TextBox`, you wont be able to access text box though as your current thread is not `GUI thread`. You can use `MethodInvoker` To invoke the code in GUI thread as follow.

```
void startRequest(object textBox1)
{
    MethodInvoker mi = delegate {         
        ((TextBox) textBox1).Text = "hello";
    }
    if(InvokeRequired)
       this.Invoke(mi);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T09:36:32.550

您不能从 UI 线程以外的线程访问 UI 组件。你会在这里得到例外

```
tempTextBox.Text = "hello"; 
```

如果您尝试从另一个线程执行此操作。

# jquery - jQuery 在页面加载后在 div 之前加载 div 包装器

> ID：13740585
> 
> 赞同：0
> 
> 时间：2012-12-06T09:31:28.330
> 
> 标签：jquery, html-parsing, append, jquery-load

我想加载一个 div 以在页面加载后环绕另一个 div 并将 CSS 应用于该 div。

这是页面：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <div id="body">

    </div>
</body>
</html> 
```

我想使用 jQuery 在页面加载后在正文周围添加一个 div 包装器：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <div id="body2" style="xyx"><div id="body">

    </div></div>
</body>
</html> 
```

正文之间已经有很多 PHP、JavaScript 和内容，这是我快速修复所需的解决方案。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:34:09.113

You can use `wrap` method:

```
$(function(){
    $('#body').wrap('<div id="body2" class="class"/>');
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:35:30.113

是的，你可以做到，

```
$('#body').wrap('<div id="body2" />'); 
```

> .wrap() 函数可以采用任何可以传递给 $() 工厂函数的字符串或对象来指定 DOM 结构。这个结构可以嵌套好几层，但应该只包含一个最里面的元素。此结构的副本将环绕匹配元素集中的每个元素。此方法返回用于链接目的的原始元素集。

[***阅读更多***](http://api.jquery.com/wrap/)。

# c# - 将 eumn 绑定到 ComboBox 时发生 WPF 错误

> ID：13740588
> 
> 赞同：0
> 
> 时间：2012-12-06T09:31:39.813
> 
> 标签：c#, wpf, combobox, enums, ivalueconverter

我有一个如下的枚举：

```
public enum ProcessControlSysType
{
    PFS = 1,
    MES = 2,

} 
```

我将它作为 itemsource 绑定到一个组合框，如下所示：

```
<ObjectDataProvider x:Key="ProcessSystemType"
                MethodName="GetValues" 
                ObjectType="{x:Type sys:Enum}">
        <ObjectDataProvider.MethodParameters>
            <x:Type TypeName="local:ProcessControlSysType" />
        </ObjectDataProvider.MethodParameters>
    </ObjectDataProvider>
<ComboBox Name="combProcessControlSysType" 
                      ItemsSource="{Binding Source={StaticResource ProcessSystemType }}" 
                      SelectionChanged="combProcessControlSysType_SelectionChanged"></ComboBox> 
```

它工作正常，我想要的是从 app.config 文件中获取值，然后绑定到与 SelectedItem 相同的组合框

```
<ComboBox Name="combProcessControlSysType" 
                      ItemsSource="{Binding Source={StaticResource ProcessSystemType }}" 
                      SelectedItem="{Binding Source={StaticResource ConfigFile}, Path=Default.ProcessControlSys, Converter={StaticResource ProcessSystemConverter}}"
                      SelectionChanged="combProcessControlSysType_SelectionChanged"></ComboBox> 
```

值转换器是：

```
public class ProcessSystemToStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {

        string strProcessSystem = value.ToString();

        switch (strProcessSystem)
        {
            case "PFS" :
                return ProcessControlSysType.PFS;
            case "MES" :
                return ProcessControlSysType.MES;

            default:
                return null;
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter,
    System.Globalization.CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

当我运行它时，组合框工作正常。但是当我在代码隐藏中调用它们时，其他控件变为空。

# c++ - 获取传递给模板函数的 std::map 的值类型

> ID：13740591
> 
> 赞同：2
> 
> 时间：2012-12-06T09:31:51.653
> 
> 标签：c++, dictionary, templates

具有模板功能 -

```
template <class B>
B getValue (B& map) {
    // implementation ...       
} 
```

对此函数 a 传递 a `map`，例如 -

```
map<string,double> doubleMap;
getValue (doubleMap); 
```

因此，例如在这种情况下，如果我想将函数的*返回值*`double`设置为根据`doubleMap`我应该提取this的`value` *类型*`map` ，如果我想声明一个双精度（或根据传递的映射的任何其他类型）我必须有这个..

我怎么才能得到它 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T09:34:50.857

`std::map` defines the member types `key_type` and `mapped_type`.

What you want is `B::mapped_type`, which will be `double` in your case.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T09:37:46.800

您可以创建一个接收容器并使用 typedef 导出其类型参数的模板：（一般模板参数类型检索的示例）

```
template <typename>
class GetTemplateArgs {};

template <typename ARG1, typename ARG2>
class GetTemplateArgs<std::map<ARG1,ARG2>>
{
  public:
    typedef ARG1 KEY;
    typedef ARG2 DATA;
};

template <class B>
typename GetTemplateArgs<B>::DATA getValue (B& map) {
    // implementation ...       
} 
```

当然，您可以将其更具体地用于地图，因此它只会接收地图作为参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-08T11:02:05.223

以防万一它有帮助，这是我如何做的一个例子：

```
 template<typename MapType>
    static auto GetValueOrDefault(const MapType& map, const std::string& key, const typename MapType::mapped_type& defaultVal)
    {
        // Try to find the key
        auto iter = map.find(key);

        // If we didn't find it then return the default value
        if (iter == map.end())
            return defaultVal;

        // Return the value
        return iter->second;
    } 
```

这类似于 arnoo 的回答，但我必须做的另一件事是在函数参数列表中的“MapType::mapped_type”之前添加关键字“typename”。

# wpf - 将 UserControl 的 datacontext 设置为在父视图模型中定义的 ViewModel

> ID：13740593
> 
> 赞同：12
> 
> 时间：2012-12-06T09:31:55.297
> 
> 标签：wpf, xaml, data-binding, datacontext

我正在尝试使用带有嵌套视图模型的 MVVM 模式创建应用程序。主视图模型是 ShellView，它包含三个用户控件，每个控件都有自己的视图模型。ShellView ViewModel 是在代码隐藏中创建的，如下所示：

```
public ShellView()
{
    InitializeComponent();
    _shellViewModel = new ShellViewModel();
    DataContext = _shellViewModel;
} 
```

现在，我的 ShellViewModel 包含其他 ViewModel 作为属性：

```
 public CustomerViewModel CustomerViewModel { get; set; }

    public ContactsViewModel ContactsViewModel { get; set; } 
```

如何从 UserControls 的 XAML 访问这些属性？我希望能够做类似的事情：

```
DataContext="<<ParentWindowViewModel>.CustomerViewModel> 
```

我怎样才能做到这一点？我已经尝试过：

```
DataContext="{Binding DataContext.CustomerViewModel, RelativeSource={RelativeSource FindAncestor, AncestorType=Window, AncestorLevel=1}, Path=DataContext.CustomerViewModel}"> 
```

但调试器说“无法在'对象'类型的数据上下文中解析属性'CustomerViewModel'。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T09:37:22.510

你只需要使用

```
DataContext="{Binding CustomerViewModel}" 
```

您已经`DataContext = _shellViewModel;`在构造函数中进行了设置，因此将整个窗口的数据上下文设置为`ShellViewModel`，因此当您定义绑定时，它会在您定义的数据上下文中查找路径。这就是为什么上面的绑定会在你的实例上寻找`CustomerViewModel`属性。`ShellViewModel`

# ruby-on-rails - Rails rest 需要几个动作

> ID：13740595
> 
> 赞同：0
> 
> 时间：2012-12-06T09:31:58.283
> 
> 标签：ruby-on-rails, api, rest

我的项目中有很多资源。现在我想为我的所有资源实现一个“日期范围”功能。

例子：

```
/url/posts/daterange/datefrom-dateto/

/url/schedule/daterange/datefrom-dateto/ 
```

我可以在每个我想使用它的控制器中编写一个动作，但这感觉就像在重复自己。

您将如何实现一个可供所有此类操作使用的全局操作？

路由是最好的方式还是我应该在 application_controller 中写一些东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:36:29.337

I would use parameters instead of path segments, like `/url/posts?datefrom=2012-12-05&dateto=2012-12-31`, because that wouldn't affect the routes and is still RESTful.

Then, I would like to have the following class macro:

```
class PostsController < ApplicationController
  allows_query_by_daterange
  #...
end 
```

And the mixin:

```
module QueryByDateRange
  def allows_query_by_daterange
    include QueryByDateRange::Filter
  end

  module Filter
    extend ActiveSupport::Concern
    included do
      before_filter :apply_daterange  # maybe only on the index action?
    end

    def apply_daterange
      # set @datefrom and @dateto from params
    end
  end
end 
```

Make it available to all controllers:

```
class ApplicationController
  extend QueryByDateRange
end 
```

In your action, you have now at least the instance variables set. This solution could be driven much further, where the condition gets automatically appended to your ARel statement and adding the macro would be all you need to do.

Hopefully, my answer can show you a possible direction where to go.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:06:10.757

我猜你预计这仅用于索引操作。为此，您可以在 config/routes.rb 中使用以下内容

```
match '/(:controller)/(/daterange/(:datefrom)-(:dateto))(.:format)' => ':controller#index', :via => :get 
```

如果您希望它用于其他操作，您可以在 routes.rb 中进行配置

# node.js - 如果 process.on('uncaughException') 处理程序使用 `undefined` 调用，在 node.js 中意味着什么？

> ID：13740597
> 
> 赞同：0
> 
> 时间：2012-12-06T09:31:58.377
> 
> 标签：node.js

我有一个 node.js（v0.8.15，最新稳定）程序崩溃，唯一的输出是：

```
timers.js:103
        if (!process.listeners('uncaughtException').length) throw e;
                                                                  ^
undefined 
```

考虑到我会使用`uncaughtException`监听器进行更深入的挖掘，我注册了一个微不足道的回调：

```
process.on('uncaughtException', function() {
  console.log(arguments)
}) 
```

但是，当进程崩溃时，我现在得到的唯一输出是：

```
{ '0': undefined } 
```

没有 Exception 对象，没有堆栈跟踪，没有消息 - 只是好的 ol' `undefined`。

*   为什么会发生这种情况？在这种情况下意味着什么`undefined`？
*   关于如何更好地调试这个的任何建议？当然，我可以开始用随机调试语句乱扔我的代码，但由于我对错误的来源一无所知，这似乎是在要求大打出手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:54:12.810

我想通了：我的部分代码`throw e`在可能没有定义的上下文中调用，如果你抛出一个未定义的，它就不能附加堆栈信息或任何东西。

如果其他人遇到这种情况（或类似情况），请检查您的代码以查看您是否可能抛出非异常的内容。（请参阅StackOverflow 上其他地方[的 JavaScript 中出色的自定义异常](https://stackoverflow.com/questions/464359/custom-exceptions-in-javascript)问题，了解您应该如何抛出一个。）

# java - Java 处理一段带有 GSON 的 json

> ID：13740598
> 
> 赞同：1
> 
> 时间：2012-12-06T09:31:59.420
> 
> 标签：java, json, gson

我有一个 JSON 响应：

```
 {
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "3",
               "short_name" : "3",
               "types" : [ "street_number" ]
            },
            {
               "long_name" : "1033",
               "short_name" : "1033",
               "types" : []
            },
            {
               "long_name" : "K osmidomkům",
               "short_name" : "K osmidomkům",
               "types" : [ "route" ]
            },
            {
               "long_name" : "Praha-Suchdol",
               "short_name" : "Praha-Suchdol",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Praha",
               "short_name" : "Praha",
               "types" : [ "locality", "political" ]
            },
            {
               "long_name" : "Hlavní město Praha",
               "short_name" : "Hlavní město Praha",
               "types" : [ "administrative_area_level_2", "political" ]
            },
            {
               "long_name" : "Hlavní město Praha",
               "short_name" : "Hlavní město Praha",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "Česká republika",
               "short_name" : "CZ",
               "types" : [ "country", "political" ]
            },
            {
               "long_name" : "165 00",
               "short_name" : "165 00",
               "types" : [ "postal_code" ]
            },
            {
               "long_name" : "Praha 620",
               "short_name" : "Praha 620",
               "types" : [ "postal_town" ]
            }
         ],
         "formatted_address" : "K osmidomkům 1033/3, 165 00 Praha-Praha-Suchdol, Česká republika",
         "geometry" : {
            "location" : {
               "lat" : 50.13670170,
               "lng" : 14.36865280
            },
            "location_type" : "ROOFTOP",
            "viewport" : {
               "northeast" : {
                  "lat" : 50.13805068029150,
                  "lng" : 14.37000178029150
               },
               "southwest" : {
                  "lat" : 50.13535271970850,
                  "lng" : 14.36730381970850
               }
            }
         },
         "types" : [ "street_address" ]
      }
   ],
   "status" : "OK"
} 
```

现在我需要通过 GSON 处理 JSON，但我只需要“几何”部分。我需要位置（lat，lng）。如何将这段 json 绑定到 POJO？我的意思是这样的

```
public class GoogleMapLocation
{
    @SerializedName("lat")
    private double latitude;

    @SerializedName("lng")
    private double longitude;

    public double getLatitude()
    {
        return latitude;
    }

    public void setLatitude(final double latitude)
    {
        this.latitude = latitude;
    }

    public double getLongitude()
    {
        return longitude;
    }

    public void setLongitude(final double longitude)
    {
        this.longitude = longitude;
    }
} 
```

进而

```
GoogleMapLocation gml = gson.fromJson(jsonReader, GoogleMapLocation.class); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:56:32.247

这应该有效（getter, setter, ...为清楚起见省略，**而不是防错**）：

```
public class GoogleMapLocation {
    List<Result> results;

    String status;
}

public class Result {
    @SerializedName("address_components")
    private List<AddressComponent> addressComponents;

    @SerializedName("formatted_address")
    private String formattedAddress;

    private Geometry geometry;

    @SerializedName("partial_match")
    private String partialMatch; // not sure of the type

    private List<String> types;
}

public class AddressComponents {
    @SerializedName("long_name")
    private String longName;

    @SerializedName("short_name")
    private String shortName;

    private List<String> types;
}

public class Geometry {
    LatLng location;

    Viewport viewport;

    Viewport bounds;

    @SerializedName("location_type")
    String locationType;
}

public class LatLng {
    @SerializedName("lat");
    private double latitude;

    @SerializedName("lng");
    private double longitude;
}

public class Viewport {
    private LatLng northeast;

    private LatLng southwest;
} 
```

见[官方文档](https://developers.google.com/maps/documentation/geocoding/)。

编辑：请注意，某些字段也可以声明为枚举（`status`，...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:39:46.933

采用 RC 的代码制作完整的工作样本

类`Test`，获取`Geometry`内容。

```
package com.yourcomp.test2;

import com.google.gson.Gson;

public class Test {

    public static void main(String[] args) {
        String test = "{" + 
        "   \"results\" : [" + 
        "      {" + 
        "         \"address_components\" : [" + 
        "            {" + 
        "               \"long_name\" : \"3\"," + 
        "               \"short_name\" : \"3\"," + 
        "               \"types\" : [ \"street_number\" ]" + 
        "            }," + 
        "            {" + 
        "               \"long_name\" : \"1033\"," + 
        "               \"short_name\" : \"1033\"," + 
        "               \"types\" : []" + 
        "            }," + 
        "            {" + 
        "               \"long_name\" : \"K osmidomkum\"," + 
        "               \"short_name\" : \"K osmidomkum\"," + 
        "               \"types\" : [ \"route\" ]" + 
        "            }," + 
        "            {" + 
        "               \"long_name\" : \"Praha-Suchdol\"," + 
        "               \"short_name\" : \"Praha-Suchdol\"," + 
        "               \"types\" : [ \"sublocality\", \"political\" ]" + 
        "            }," + 
        "            {" + 
        "               \"long_name\" : \"Praha\"," + 
        "               \"short_name\" : \"Praha\"," + 
        "               \"types\" : [ \"locality\", \"political\" ]" + 
        "            }," + 
        "            {" + 
        "               \"long_name\" : \"Hlavní mesto Praha\"," + 
        "               \"short_name\" : \"Hlavní mesto Praha\"," + 
        "               \"types\" : [ \"administrative_area_level_2\", \"political\" ]" + 
        "            }," + 
        "            {" + 
        "               \"long_name\" : \"Hlavní mesto Praha\"," + 
        "               \"short_name\" : \"Hlavní mesto Praha\"," + 
        "               \"types\" : [ \"administrative_area_level_1\", \"political\" ]" + 
        "            }," + 
        "            {" + 
        "               \"long_name\" : \"Ceská republika\"," + 
        "               \"short_name\" : \"CZ\"," + 
        "               \"types\" : [ \"country\", \"political\" ]" + 
        "            }," + 
        "            {" + 
        "               \"long_name\" : \"165 00\"," + 
        "               \"short_name\" : \"165 00\"," + 
        "               \"types\" : [ \"postal_code\" ]" + 
        "            }," + 
        "            {" + 
        "               \"long_name\" : \"Praha 620\"," + 
        "               \"short_name\" : \"Praha 620\"," + 
        "               \"types\" : [ \"postal_town\" ]" + 
        "            }" + 
        "         ]," + 
        "         \"formatted_address\" : \"K osmidomkum 1033/3, 165 00 Praha-Praha-Suchdol, Ceská republika\"," + 
        "         \"geometry\" : {" + 
        "            \"location\" : {" + 
        "               \"lat\" : 50.13670170," + 
        "               \"lng\" : 14.36865280" + 
        "            }," + 
        "            \"location_type\" : \"ROOFTOP\"," + 
        "            \"viewport\" : {" + 
        "               \"northeast\" : {" + 
        "                  \"lat\" : 50.13805068029150," + 
        "                  \"lng\" : 14.37000178029150" + 
        "               }," + 
        "               \"southwest\" : {" + 
        "                  \"lat\" : 50.13535271970850," + 
        "                  \"lng\" : 14.36730381970850" + 
        "               }" + 
        "            }" + 
        "         }," + 
        "         \"types\" : [ \"street_address\" ]" + 
        "      }" + 
        "   ]," + 
        "   \"status\" : \"OK\"" + 
        "}";
        GoogleMapLocation res = new Gson().fromJson(test, GoogleMapLocation.class);
        System.out.println(res);

        Geometry geometry = res.getResults().get(0).getGeometry();
        System.out.println(geometry);
    }

} 
```

`GoogleMapLocation`班级_

```
package com.yourcomp.test2;

import java.util.List;

import com.google.gson.annotations.SerializedName;

public class GoogleMapLocation {
    List<Result> results;

    String status;

    /**
     * Gets the results.
     * 
     * @return <tt> the results.</tt>
     */
    public List<Result> getResults() {
        return results;
    }

    /**
     * Sets the results.
     * 
     * @param results
     *            <tt> the results to set.</tt>
     */
    public void setResults(List<Result> results) {
        this.results = results;
    }

    /**
     * Gets the status.
     * 
     * @return <tt> the status.</tt>
     */
    public String getStatus() {
        return status;
    }

    /**
     * Sets the status.
     * 
     * @param status
     *            <tt> the status to set.</tt>
     */
    public void setStatus(String status) {
        this.status = status;
    }

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "GoogleMapLocation [results=" + results + ", status=" + status
                + "]";
    }

}

class Result {
    @SerializedName("address_components")
    private List<AddressComponents> addressComponents;

    /**
     * Gets the addressComponents.
     * 
     * @return <tt> the addressComponents.</tt>
     */
    public List<AddressComponents> getAddressComponents() {
        return addressComponents;
    }

    /**
     * Sets the addressComponents.
     * 
     * @param addressComponents
     *            <tt> the addressComponents to set.</tt>
     */
    public void setAddressComponents(List<AddressComponents> addressComponents) {
        this.addressComponents = addressComponents;
    }

    /**
     * Gets the formattedAddress.
     * 
     * @return <tt> the formattedAddress.</tt>
     */
    public String getFormattedAddress() {
        return formattedAddress;
    }

    /**
     * Sets the formattedAddress.
     * 
     * @param formattedAddress
     *            <tt> the formattedAddress to set.</tt>
     */
    public void setFormattedAddress(String formattedAddress) {
        this.formattedAddress = formattedAddress;
    }

    /**
     * Gets the geometry.
     * 
     * @return <tt> the geometry.</tt>
     */
    public Geometry getGeometry() {
        return geometry;
    }

    /**
     * Sets the geometry.
     * 
     * @param geometry
     *            <tt> the geometry to set.</tt>
     */
    public void setGeometry(Geometry geometry) {
        this.geometry = geometry;
    }

    /**
     * Gets the partialMatch.
     * 
     * @return <tt> the partialMatch.</tt>
     */
    public String getPartialMatch() {
        return partialMatch;
    }

    /**
     * Sets the partialMatch.
     * 
     * @param partialMatch
     *            <tt> the partialMatch to set.</tt>
     */
    public void setPartialMatch(String partialMatch) {
        this.partialMatch = partialMatch;
    }

    /**
     * Gets the types.
     * 
     * @return <tt> the types.</tt>
     */
    public List<String> getTypes() {
        return types;
    }

    /**
     * Sets the types.
     * 
     * @param types
     *            <tt> the types to set.</tt>
     */
    public void setTypes(List<String> types) {
        this.types = types;
    }

    @SerializedName("formatted_address")
    private String formattedAddress;

    private Geometry geometry;

    @SerializedName("partial_match")
    private String partialMatch; // not sure of the type

    private List<String> types;

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Result [addressComponents=" + addressComponents
                + ", formattedAddress=" + formattedAddress + ", geometry="
                + geometry + ", partialMatch=" + partialMatch + ", types="
                + types + "]";
    }
}

class AddressComponents {
    private String long_name;
    private String short_name;
    private List<String> types;

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "AddressComponents [long_name=" + long_name + ", short_name="
                + short_name + ", types=" + types + "]";
    }

    /**
     * Gets the long_name.
     * 
     * @return <tt> the long_name.</tt>
     */
    public String getLong_name() {
        return long_name;
    }

    /**
     * Sets the long_name.
     * 
     * @param long_name
     *            <tt> the long_name to set.</tt>
     */
    public void setLong_name(String long_name) {
        this.long_name = long_name;
    }

    /**
     * Gets the short_name.
     * 
     * @return <tt> the short_name.</tt>
     */
    public String getShort_name() {
        return short_name;
    }

    /**
     * Sets the short_name.
     * 
     * @param short_name
     *            <tt> the short_name to set.</tt>
     */
    public void setShort_name(String short_name) {
        this.short_name = short_name;
    }

    /**
     * Gets the types.
     * 
     * @return <tt> the types.</tt>
     */
    public List<String> getTypes() {
        return types;
    }

    /**
     * Sets the types.
     * 
     * @param types
     *            <tt> the types to set.</tt>
     */
    public void setTypes(List<String> types) {
        this.types = types;
    }

}

class Geometry {
    LatLng location;

    Viewport viewport;

    Viewport bounds;

    @SerializedName("location_type")
    String locationType;

    /**
     * Gets the location.
     * 
     * @return <tt> the location.</tt>
     */
    public LatLng getLocation() {
        return location;
    }

    /**
     * Sets the location.
     * 
     * @param location
     *            <tt> the location to set.</tt>
     */
    public void setLocation(LatLng location) {
        this.location = location;
    }

    /**
     * Gets the viewport.
     * 
     * @return <tt> the viewport.</tt>
     */
    public Viewport getViewport() {
        return viewport;
    }

    /**
     * Sets the viewport.
     * 
     * @param viewport
     *            <tt> the viewport to set.</tt>
     */
    public void setViewport(Viewport viewport) {
        this.viewport = viewport;
    }

    /**
     * Gets the bounds.
     * 
     * @return <tt> the bounds.</tt>
     */
    public Viewport getBounds() {
        return bounds;
    }

    /**
     * Sets the bounds.
     * 
     * @param bounds
     *            <tt> the bounds to set.</tt>
     */
    public void setBounds(Viewport bounds) {
        this.bounds = bounds;
    }

    /**
     * Gets the locationType.
     * 
     * @return <tt> the locationType.</tt>
     */
    public String getLocationType() {
        return locationType;
    }

    /**
     * Sets the locationType.
     * 
     * @param locationType
     *            <tt> the locationType to set.</tt>
     */
    public void setLocationType(String locationType) {
        this.locationType = locationType;
    }

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Geometry [location=" + location + ", viewport=" + viewport
                + ", bounds=" + bounds + ", locationType=" + locationType + "]";
    }

}

class LatLng {
    @SerializedName("lat")
    private double latitude;

    @SerializedName("lng")
    private double longitude;

    /**
     * Gets the latitude.
     * 
     * @return <tt> the latitude.</tt>
     */
    public double getLatitude() {
        return latitude;
    }

    /**
     * Sets the latitude.
     * 
     * @param latitude
     *            <tt> the latitude to set.</tt>
     */
    public void setLatitude(double latitude) {
        this.latitude = latitude;
    }

    /**
     * Gets the longitude.
     * 
     * @return <tt> the longitude.</tt>
     */
    public double getLongitude() {
        return longitude;
    }

    /**
     * Sets the longitude.
     * 
     * @param longitude
     *            <tt> the longitude to set.</tt>
     */
    public void setLongitude(double longitude) {
        this.longitude = longitude;
    }

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "LatLng [latitude=" + latitude + ", longitude=" + longitude
                + "]";
    }

}

class Viewport {
    private LatLng northeast;

    /**
     * Gets the northeast.
     * 
     * @return <tt> the northeast.</tt>
     */
    public LatLng getNortheast() {
        return northeast;
    }

    /**
     * Sets the northeast.
     * 
     * @param northeast
     *            <tt> the northeast to set.</tt>
     */
    public void setNortheast(LatLng northeast) {
        this.northeast = northeast;
    }

    /**
     * Gets the southwest.
     * 
     * @return <tt> the southwest.</tt>
     */
    public LatLng getSouthwest() {
        return southwest;
    }

    /**
     * Sets the southwest.
     * 
     * @param southwest
     *            <tt> the southwest to set.</tt>
     */
    public void setSouthwest(LatLng southwest) {
        this.southwest = southwest;
    }

    private LatLng southwest;

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Object#toString()
     */
    @Override
    public String toString() {
        return "Viewport [northeast=" + northeast + ", southwest=" + southwest
                + "]";
    }

} 
```

# php - 如何从 MySQL 表数据 PHP 创建 PDF 文档

> ID：13740602
> 
> 赞同：1
> 
> 时间：2012-12-06T09:32:06.037
> 
> 标签：php, mysql, database, pdf

我想从 MySQL 数据库中获取数据并制作和创建数据的 PDF 文件。

这是我的代码，它保存了 PDF 文件，但无法打开。

```
<?php  
$host = 'localhost';
$user = 'root';
$pass = 'xxxx';
$db = 'db';

$link = mysql_connect($host, $user, $pass) or die("Can not connect." . mysql_error());
mysql_select_db($db) or die("Can not connect.");

$query = "SELECT childID,sex from child ";  

$result = mysql_query($query) or die('Error, query failed'); 

    while(mysql_fetch_array($result))  
    {  
        header("Content-length: $size"); 
        header("Content-type: $type"); 
        header("Content-Disposition: inline; filename=$username-$description.pdf"); 
    } 
    echo $content;
    mysql_close($link); 
    exit; 
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:36:36.880

使用以下任意 php 脚本生成动态 PDF 文档

FPDF：[http ://www.fpdf.org/](http://www.fpdf.org/)

TCPDF：[http ://www.tcpdf.org/](http://www.tcpdf.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:40:36.443

您可以使用 DOMPDF。有关更多详细信息，请查看：

[http://code.google.com/p/dompdf/downloads/detail?name=dompdf_0-6-0_beta3.zip](http://code.google.com/p/dompdf/downloads/detail?name=dompdf_0-6-0_beta3.zip)

# system.reactive - 在 Reactive Extensions 中实现自定义的基于硬件定时器的调度程序

> ID：13740609
> 
> 赞同：3
> 
> 时间：2012-12-06T09:32:42.667
> 
> 标签：system.reactive

是否可以为响应式扩展实现自定义的基于硬件计时器的调度程序？我该如何开始，有什么好的例子吗？

我有一个硬件可以每毫秒向我发送一个准确的中断。我想利用它来创建更精确的 RX 调度程序。

**更新**

感谢 Asti 回答中的关键字，我找到了这篇[博](http://blogs.msdn.com/b/rxteam/archive/2012/06/14/testing-rx-queries-using-virtual-time-scheduling.aspx)文，这让我发现我可以实现[VirtualTimeScheduler<TAbsolute, TRelative>](http://msdn.microsoft.com/en-us/library/hh229068%28v=vs.103%29.aspx)，因为我的硬件设备为我提供了绝对时间戳。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T13:52:22.787

我不确定它会有多准确（在 GC 系统中很难保证最后期限），但我可以从这里开始。

*   从实现`IScheduler`接口开始。

*   在内部，使用`System.Reactive.Concurrency.SchedulerQueue<TAbsolute>`该类来维护计划项目的优先队列。`TAbsolute`是每个计划项目的绝对到期时间的类型，因此如果您选择最接近硬件提供的数字类型可能会更容易。

*   通过对项目使用优先队列，您只需评估队列中的第一个项目是否到期。您可能可以缓存下一个到期时间并在每次中断时进行比较。

*   此外，实现`ISchedulerPeriodic`接口，这允许它针对重复计划进行更优化。

祝你好运！

# wix - wix boodstrapper 正在卸载 .net 框架，但它不应该

> ID：13740612
> 
> 赞同：0
> 
> 时间：2012-12-06T09:32:47.597
> 
> 标签：wix, uninstallation, .net-framework-version

我有一个 wix 引导程序，它正在检查是否安装了 .net framework 4.0，如果没有安装它。这行得通。但现在我想卸载程序，但它也想卸载框架。这不应该发生，我查看了所有谷歌但我找不到解决方案。我仍在网上寻找遮阳篷，但小费会有所帮助

我试图在 Windows 中使用添加/删除程序来卸载应用程序，但是当我运行引导程序时，它想要卸载或想要修复安装。这是我的代码：

```
 <?xml version="1.0" encoding="UTF-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
     xmlns:fx="http://schemas.microsoft.com/wix/NetFxExtension">
<Bundle Name="MyCompanyapp" Version="1.0.0.0" Manufacturer="MyCompany" 
    UpgradeCode="99e2007c-0d40-4b58-958a-218a93c08270" DisableRemove="yes" DisableModify="yes">

    <BootstrapperApplicationRef Id="WixStandardBootstrapperApplication.RtfLicense"/>
    <Variable Name="InstallFolder" Type="string" Value="[ProgramFilesFolder]\company\app" />
    <util:RegistrySearch Id="FindDotNet40InstallRegValue" Root="HKLM"
                         Key="SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full" Value="Install"
                         Variable="DotNetFramework40InstallRegValue" />

    <Chain >

     <PackageGroupRef Id="NetFx40Web" />
     <ExePackage Name="dotNetFx40_Client_x86_x64.exe" SourceFile=".\sources\dotNetFx40_full_x86_x64.exe" DownloadUrl="http://download.microsoft.com/download/5/6/2/562A10F9-C9F4-4313-A044-9C94E0A8FAC8/dotNetFx40_Client_x86_x64.exe" 
                  Vital="yes"  DetectCondition="DotNetFramework40InstallRegValue=1" InstallCommand="/passive/promptrestart">
        <!--<RemotePayload Size="42991616" Description="net 4.0 installer"  ProductName="net 4.0 installer" Version="4.0.0.0" Hash="6ce3a433309c63d98bcf0e2b9f1dfaed8cc18783"/>-->
      </ExePackage>
      <RollbackBoundary/>

      <MsiPackage Id="setup" Compressed="yes" Vital="yes" 
        SourceFile="C:\installer.msi" 
                  Cache="yes" Visible="yes" After="dotNetFx40_Client_x86_x64.exe" >
        <MsiProperty Name="INSTALLLOCATION" Value="[InstallFolder]" />
      </MsiPackage>   
    </Chain> 
 </Bundle>
</Wix> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:26:37.763

您需要添加一个`Permanent`属性`ExePackage`并将其设置为“是”。

这意味着它不会被卸载。

# c# - FilterEventHandler with custom parameters?

> ID：13740617
> 
> 赞同：0
> 
> 时间：2012-12-06T09:33:05.383
> 
> 标签：c#, .net, wpf

I'm interested in creating a new FilterEventHandler and associating it to a CollectionViewSource. All works fine, unless I want this handler to receive a parameter (let's say "price") in order to help with the filtering process.

However, when I try to put this extra-parameter, I'm getting a message which tells me that no overload matches the FilterEventHandler delegate signature (that's true, btw :p).

How can I achieve what I want? Is it possible? Or ... should I need to use a global variable instead a parameter in order to store that value and use it from the filtering method?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:06:46.997

创建一个包含您需要的所有参数的新对象。例如

> 公共 FilterData { 小数价格 {get;set;} int Quantity{get;set;} }

将此对象设置为 FilterEventArgs Item 属性。

现在，当引发此事件时，请检查 Item 属性是否为 FilterData 类型。如果是这样，请投射到 FilterDate 和瞧！您现在可以访问数量、价格以及您想要添加的任何其他属性。

# excel - Bulk updating the same cell(s) in multiple excel files

> ID：13740619
> 
> 赞同：0
> 
> 时间：2012-12-06T09:33:13.293
> 
> 标签：excel

I have 200 excel sheets that all need the same 5 cells updated from their current content to new content. All will have the same new content.

I am wondering if there is anyway to do this in bulk instead of opening each individual document and doing the updates one by one.

Example:

Document 1, cell B/C/D7 (merged cell) contains a date in DD.MM.YYYY format. I need that date in YYYY.MM.DD format in all 200 documents.

Can this be done using a macro or something?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:54:44.590

最简单的方法确实是使用 VBA 来完成。您可以将所有文件放在一个目录中，然后使用[它](http://www.ozgrid.com/VBA/loop-through.htm)来循环浏览所有文件，应用您的更改。

对于您提到的情况，假设您需要对`Sheet1`需要运行的每个工作簿的工作表进行更改`wbResults.Worksheets("Sheet1").Range("B7").NumberFormat = "YYYY.MM.DD"`

```
Sub RunCodeOnAllXLSFiles()
Dim lCount As Long
Dim wbResults As Workbook
Dim wbCodeBook As Workbook

Application.ScreenUpdating = False
Application.DisplayAlerts = False
Application.EnableEvents = False

On Error Resume Next
    Set wbCodeBook = ThisWorkbook
        With Application.FileSearch
            .NewSearch
            'Change path to suit
            .LookIn = "C:\MyDocuments\TestResults"
            .FileType = msoFileTypeExcelWorkbooks
            'Optional filter with wildcard
            '.Filename = "Book*.xls"
                If .Execute > 0 Then 'Workbooks in folder
                    For lCount = 1 To .FoundFiles.Count 'Loop through all
                        'Open Workbook x and Set a Workbook variable to it
                        Set wbResults = Workbooks.Open(Filename:=.FoundFiles(lCount), UpdateLinks:=0)

                        'DO YOUR CODE HERE
                         wbResults.Worksheets("Sheet1").Range("B7").NumberFormat = "YYYY.MM.DD"
                        wbResults.Close SaveChanges:=True
                    Next lCount
                End If
        End With
On Error GoTo 0
Application.ScreenUpdating = True
Application.DisplayAlerts = True
Application.EnableEvents = True
End Sub
MsoFileType can be one 
```

# android - Extended Activity class, nullpointer on init

> ID：13740628
> 
> 赞同：0
> 
> 时间：2012-12-06T09:33:54.920
> 
> 标签：android, interface, nullpointerexception

I want all my activities to have knowledge about the power state: is there a charger connected? When the registered receiver receives an `ACTION_POWER_CONNECTED` or an `ACTION_POWER_DISCONNECTED` a callback to the activity is made to inform the registered activity. Since I want all activities that are part of the application, and I work with this callback method I created an interface which forces the activity to implement `powerDisconnected()` and `powerConnected();`

```
public interface BrightnessActivityInterface {
    void powerDisconnected();
    void powerConnected();
} 
```

Because my activities all use the same type of code (eg. screen on and bright lock when connected, and screen dim when power is disconnected) I extended the `class Activity` and implemented the `BrightnessActivityInterface`:

```
public class BrightnessActivity extends Activity implements BrightnessActivityInterface {

    private ChargingOffReceiver chargingOff;
    private ChargingOnReceiver chargingOn;

    public BrightnessActivity(){
        chargingOn = new ChargingOnReceiver(this);
        registerReceiver(chargingOn, new IntentFilter(Intent.ACTION_POWER_CONNECTED));

        chargingOff = new ChargingOffReceiver(this);
        registerReceiver(chargingOff, new IntentFilter(Intent.ACTION_POWER_DISCONNECTED));
    }

    @Override
    public void onResume() {
        super.onResume();
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD + WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON + WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
    }

    @Override
    public void onPause() {
        super.onPause();
        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    }

    public void powerDisconnected() {
        getWindow().clearFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
    }

    public void powerConnected() {
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON + WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
    } 
```

All my activities extend now this BrightnessActivity instead of Activity. Sounds all good so far?

The problem is the first activity I start I get a nullpointer just after the line

```
 registerReceiver(chargingOn, new IntentFilter(Intent.ACTION_POWER_CONNECTED)); 
```

'this' has a value (it is my launch activity), and chargingOn is a ChargingOnReceiver. I installed the source but I have no idea what I am looking at.

My class has the rights to register to the `ACTION_POWER_CONNECTED` and it worked fine until I derived all my classes from `BrightnessActivity` instead of Activity. Please advice.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:38:27.690

您不应覆盖默认的 Activity 构造函数。将您的代码移动到覆盖的 onCreate() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:36:56.497

您应该在其中注册您的接收器`onCreate`并在其中取消注册`onPause`

API：[onRegisterReceiver API](http://developer.android.com/reference/android/content/Context.html#registerReceiver%28android.content.BroadcastReceiver,%20android.content.IntentFilter%29)

> “您可以使用 Context.registerReceiver() 动态注册此类的实例，也可以通过 AndroidManifest.xml 中的标记静态发布实现。注意：如果在 Activity.onResume() 实现中注册接收器，则应取消注册它在 Activity.onPause() 中。（暂停时您不会收到意图，这将减少不必要的系统开销）。不要在 Activity.onSaveInstanceState() 中取消注册。”

如果你不明白为什么你的 Activity 在构造函数之后没有处于“就绪”状态，你需要阅读[Activity Lifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

# c# - How do I trigger a method to run after x seconds?

> ID：13740629
> 
> 赞同：14
> 
> 时间：2012-12-06T09:33:59.133
> 
> 标签：c#, timer

I am working on a C# Windows Forms application where I need the method to pause for 30 seconds until it continues on to the next line of code. I have tried `Thread.Sleep()` which wasn't suitable for this application and I've understood that I should use some sort of timer instead. I have searched a lot but I can't figure out how to implement timers.

My code is below and could anyone show me how I should implement the timer. I have made a comment on where I want the method to pause.

```
private void start_Vid_Click(object sender, EventArgs e)
{
    if (video.State != StateFlags.Running)
    {
        viewport.Visible = true;
        video.Play();
    }

    //Here I want to wait 30 seconds until the next line of code is triggered

    viewport.Visible = false;
    viewport2.Visible = true;
    pictureBox1.Visible = true;
    start_Webc(); 
    video2.Play();
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-06T09:45:09.300

如果您的应用程序是 .Net 4.5 应用程序，那么使用起来会更容易一些`Task`：

```
private async void start_Vid_Click(object sender, EventArgs e)
{
    if (video.State != StateFlags.Running)
    {
        viewport.Visible = true;
        video.Play();
    }

    await Task.Delay(TimeSpan.FromSeconds(30));

    viewport.Visible = false;
    viewport2.Visible = true;
    pictureBox1.Visible = true;
    start_Webc();
    video2.Play();
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-06T09:43:48.867

Task.Delay 在 .NET 4.0 上不可用，但您可以启动任务，它只会休眠 30 秒，然后您可以再次在 UI 线程上继续：

```
Task.Factory.StartNew(() => Thread.Sleep(30 * 1000))
            .ContinueWith((t) =>
    {
         viewport.Visible = false;
         viewport2.Visible = true;
         pictureBox1.Visible = true;
         start_Webc(); 
         video2.Play();
    }, TaskScheduler.FromCurrentSynchronizationContext()); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-06T09:42:16.283

在类级别定义一个实例`Timer`（有一些这样的类 - 对于您应该使用的 winforms 应用程序`System.Windows.Forms.Timer`）

```
static System.Windows.Forms.Timer myTimer = new System.Windows.Forms.Timer(); 
```

然后在您的方法中添加行来处理它的刻度并启动它：

```
private void start_Vid_Click(object sender, EventArgs e)
{
    if (video.State != StateFlags.Running)
    {
        viewport.Visible = true;
        video.Play();
    }

    myTimer.Tick += (o,ea) => {    
        viewport.Visible = false;
        viewport2.Visible = true;
        pictureBox1.Visible = true;
        start_Webc(); 
        video2.Play();
        myTimer.Stop();
    }
    myTimer.Interval = 5000; // 5 seconds
    myTimer.Start();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-09-18T20:03:07.913

```
System.Threading.Tasks.Task.Delay( 60 * 1000 ).ContinueWith( (_) => StartVoid() ); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-06T11:08:00.503

我们可以使用来自的任务来做到这一点

```
System.Threading.Tasks.Task.Factory.StartNew(() =>
        {
            Thread.Sleep(5000);
            this.Invoke(new Action(() => 
                Method1()));
        }); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-06T09:51:40.653

还有一种反应式扩展的方法：

```
Observable.Return("Delayed").Delay(TimeSpan.FromSeconds(30)).Subscribe(val => Console.WriteLine("Executing delayed")); 
```

# ios - PopToViewController in UIStoryboard application

> ID：13740630
> 
> 赞同：1
> 
> 时间：2012-12-06T09:34:08.367
> 
> 标签：ios, uiviewcontroller, uistoryboard, xcode4.5, poptoviewcontroller

I have made on application using Xcode 4.5. and also use UIStoryboard in this application.

In this app, I push from one ViewController to second ViewController and then push from second ViewController to third ViewController.

Now, How I can Pop (back) directly from third ViewController to first ViewController.

Is it possible or not ? If possible, then How?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:46:34.283

这是可能的，只需使用这个..

```
 [self.navigationController popToViewController: [self.navigationController.viewControllers objectAtIndex:0] animated:YES]; 
```

您可以使用要弹出的任何控制器的值更改 objectAtIndex 的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:03:11.403

使用这个方法

```
popToRootViewControllerAnimated: 
```

苹果文档

弹出堆栈上除根视图控制器之外的所有视图控制器并更新显示。

*   (NSArray *)popToRootViewControllerAnimated:(BOOL)动画

参数动画：将此值设置为 YES 以动画过渡。如果您在显示其视图之前设置导航控制器，则传递 NO。

返回值：从堆栈中弹出的视图控制器数组。

使用示例

```
 [self.navigationController popToRootViewControllerAnimated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-11T05:42:59.020

您可以使用**popToViewController**并使用以下代码检查视图控制器是否在堆栈中。

```
for (UIViewController *aViewController in self.navigationController viewControllers)
{
    if ([aViewController isKindOfClass:[firstViewController class]])
                        {
                            firstViewController *FVC = (firstViewController*)aViewController;
                          [self.navigationController popToViewController:FVC animated:YES];
                        }
                    } 
```

希望这可以帮助。

# css - 如何使用 css 显示旁边有详细信息的头像图片？

> ID：13740633
> 
> 赞同：1
> 
> 时间：2012-12-06T09:34:10.753
> 
> 标签：css, asp.net-mvc-3, html

在我看来，我有这部分 html：

```
 <div class="info">    
   <img width="52" height="52" alt="Avatar" src="/ThemeFiles/Base/images/User/user-avatar.png"/> 
 </div>
 <ul class="links">
    <li>
       <%: newsItem.CommentDate %>
    </li>
    <li>
       <%: ViewBag.UserName %>
    </li>
 </ul> 
```

我的头像在头像**下方**显示了 newsItem.CommentDate 和 ViewBag.UserName 。我怎样才能获得显示在头像旁边的日期和用户名？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T12:54:06.740

这是一种方式：

```
div.info { display: inline-block; width:52px; height:52px; }
ul.links { display: inline-block; } 
```

但是，如果您希望它们以某种方式排列，您可能需要进行一些调整（一种方式是给出`ul.links`一个固定的`height`，以及一些`padding-top`.

对于不理解的浏览器，您也可以使用`float: left`代替。`display:inline-block`

但是，对于`float`s，您必须考虑*跟随*它们的`inline-block`元素会发生什么 - 对于您没有的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:57:08.260

尝试将头像 div 浮动到左侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:54:49.957

您是否尝试过将其设为两个 div，然后`float: left`在第一个 div 上使用

```
 <div class="info">    
     <img width="52" height="52" alt="Avatar" src="/ThemeFiles/Base/images/User/user-avatar.png"/> 
  </div>

   <div class="linkscontainer">
          <ul class="links">
            <li>
               <%: newsItem.CommentDate %>
            </li>
            <li>
               <%: ViewBag.UserName %>
            </li>
          </ul> 
      <div> 
```

# ruby-on-rails - undefined method `store' for AWS::S3::S3Object:Class

> ID：13740635
> 
> 赞同：0
> 
> 时间：2012-12-06T09:34:23.983
> 
> 标签：ruby-on-rails, amazon-s3, amazon-web-services

Getting this error even also require 'aws/s3' in controller file

and even tried include AWS::S3 which gives error

so any suggestions?

# mysql - INSERT query with if exist statement

> ID：13740640
> 
> 赞同：0
> 
> 时间：2012-12-06T09:34:40.643
> 
> 标签：mysql

I have two tables:

1.  `purchase_mis(id, user_id, total_purchased, date)`
2.  `daily_purchase(id, user_id, product_id, paid_amount, purchase_date)`

I have a CRON file that runs every night, it counts the daily purchase from the "daily_purchase" table and runs insert into "purchase_mis".

For example:

```
SELECT
    COUNT(*) AS purchase_count,
    purchase_date
FROM daily_purchase
GROUP BY user_id; 
```

This returns the purchase_count for every user and then it will be inserted to the "purchase_mis" table.

```
INSERT INTO
    purchase_mis(user_id, total_purchased, date)
VALUES
    ('2', 'purchase_count', 'purchase_date'); 
```

But before inserting, it needs to check if the purchased information of user_id = 2 for some date "purchase_date" has already been inserted so it should not be inserted again.

I want something like the below query:

```
INSERT INTO
    purchase_mis(user_id, total_purchased, date)
VALUES
    ('2', 'purchase_count', 'purchase_date')
WHERE date NOT EXISTS (SELECT date FROM purchase_mis WHERE user_id = '2'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:46:05.383

尝试这样的事情。

```
INSERT INTO purchase_mis(user_id, total_purchased, date)
SELECT user_id, purchase_date, count(*)
FROM daily_purchase a
LEFT OUTER JOIN purchase_mis b
ON a.user_id = b.user_id
AND a.purchase_date = b.date
WHERE b.user_id IS NULL
GROUP BY user_id, purchase_date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:38:14.823

用这个

```
INSERT IGNORE INTO
    purchase_mis(user_id, total_purchased, date)
VALUES
    ('2', 'purchase_count', 'purchase_date'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:41:18.097

你可以使用一个[`INSERT IGNORE`](http://dev.mysql.com/doc/refman/5.0/en/insert.html)语句。为此，您必须在`user_id`和上有一个唯一的键`date`。然后下面的查询将只插入那些键不存在的值（表示该日期没有条目的用户）并向其他人发出警告，您可以在此处忽略。

```
INSERT IGNORE INTO
    purchase_mis(user_id, total_purchased, date)
( SELECT
    user_id,
    COUNT(*),
    purchase_date
FROM daily_purchase
GROUP BY user_id ); 
```

# json - how to get json response in a jsp through ajax format

> ID：13740641
> 
> 赞同：1
> 
> 时间：2012-12-06T09:34:40.723
> 
> 标签：json

how to get JSON response from server in a client page using ajax XMLHttpRequest

```
var xmlHttp = false;
try{
xmlHttp = new ActiveXObject("msxml2.XMLHTTP");
}catch(e1){
try{
xmlHttp = new ActiveXObject("microsoft.XMLHTTP");
}catch(e2){
try{
xmlHttp = new XMLHttpRequest();
}catch(e3){
xmlHttp = false;
} 
```

# c# - How to know the browser URL from an iframed page, server-side?

> ID：13740643
> 
> 赞同：1
> 
> 时间：2012-12-06T09:34:50.103
> 
> 标签：c#, asp.net, iframe, browser, request

I have a child page (e.g. [http://www.domain.com/childpage.aspx](http://www.domain.com/childpage.aspx)) within a parent page (e.g. [http://www.domain.com/parentpage.aspx](http://www.domain.com/parentpage.aspx)) using an iframe.

I'd like to know what the URL of the parent page is using server-side code. would that be possible?

`Request.Browser` gives the URL of the child page only.

I also checked `Request.UrlReferrer` which contains the parent page URL only the first time the page loads. As soon as I click on a link inside the child page, the `Request.UrlReferrer` won't be the parent page any more, it will be the previous page.

I'd like to know what the URL of the parent page is using server-side code.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:44:12.327

您无法在服务器端找到这一点，就所有意图和目的而言，就好像请求来自不同的网页一样。

您唯一的希望是使用客户端脚本获取 URL 使用 ajax 将 URL 发送到服务器。请记住，这仅在页面位于同一域中时才有效。如果不是，您将遇到单点来源限制问题。

# mysql - 如果我使用 IN 运算符过滤 NULL 值和空格 它不起作用 为什么？

> ID：13740648
> 
> 赞同：1
> 
> 时间：2012-12-06T09:35:00.967
> 
> 标签：mysql

我有一个像 table1(id int,name VC,description VC); 该表包含 100 条记录。对于描述列，它有一些空格和空值我想消除描述值为空或空格的行？

我试过这样

```
select * from table1 where description not in('',NULL); //Displaying nothing

But

select * from table1 where description in('',NULL);// It is displaying all the rows which contains white spaces but not Nulls 
```

我很困惑。IN 运算符也接受 varchar，如果我不使用 NOT，我会得到正确的结果，但是如果我使用 NOT，为什么我没有得到。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:37:31.067

试试这个：

`select * from table1 where description not in('') and description is not null`;

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:38:42.407

您需要使用 IS NOT NULL 来比较空值

```
select * from table1 where description is not null and description <> '' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:39:41.840

因为 SQL“IN”条件有助于减少使用多个 SQL“OR”条件的需要。

所以，写：

```
description not in('',NULL); 
```

相同：

```
!(description='' OR description is NULL) 
```

写起来是一样的：

```
!(description='') AND description is not NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T09:41:27.907

可以试试这个 - 这将类似于 c# .IsNullOrWhitespace

SELECT * FROM Table1 WHERE Description IS NOT NULL AND LEN(TRIM(Description) > 0)

# javascript - To get the words that are having the particular special character as its last letter

> ID：13740650
> 
> 赞同：0
> 
> 时间：2012-12-06T09:35:09.570
> 
> 标签：javascript, dom-events, javascript-framework

My Code:

I tried the following code

```
var str = "Have fun storming the castle!"
var character = "!";

function endsWith(str, character) {
    return str.indexOf(character, str.length - character.length) !== -1;
}

alert(endsWith(str, character)); 
```

It is giving the result as `True` since such word is present in the sentence.

But I need the result as `castle!` as it is the only word having such character atlast. If multiple words having such character also, I need those words.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:44:51.037

下面的函数接受字符串和字符，并返回以该字符为最后一个字符的单词数组。它区分大小写，但如果你想让它不区分大小写，那么只需添加`.toLowerCase()`到比较行。

```
function getWords(str, character)
{
    var words = str.split(" ");
    var result = [];

    for(var i=0; i<words.length; i++)
    {
        if(words[i].slice(-1) == character)
        {
            result.push(words[i]);
        }
    }

    return result;
}

var str = "Have fun storming the castle!";
var character = "!";

console.log( getWords(str, character) ); 
```

输出

> [“城堡！”]

多字测试：

```
console.log( getWords("Have fun storming! the castle!", "!") ); 
```

输出

> [“风暴！”，“城堡！”]

**[jsFiddle 演示](http://jsfiddle.net/d923v/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:16:11.740

```
var str = "Have fun storming! the castle!"
var character = "!";

function getWords(str, character)
{
     var words = str.split(" ");
     var result = [];

     for(var i in words)
     {
         //if(words[i].search(character)!="-1")
         if(words[i].substring(words[i].length-1)==character)
         {
             result.push(words[i]);
         }
     }

     return result;
}

alert(getWords(str, character)); 
```

如果字符串是“玩得开心冲进城堡！”。然后它返回

**城堡！**

如果字符串是“玩得开心冲锋！城堡！”。然后它返回

**风暴！，城堡！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:59:42.453

您想使用正则表达式。如果您将其定义为“全局”，它将为您提供列表中的所有匹配项：

```
function endsWith (str, character) {
    regexp = new RegExp ('\\b.*?' + character + '\\b', 'g');
    return str.match (regexp);
} 
```

然而，为了让它真的很好，你应该确保字符被转义，这样它就不会弄乱你的正则表达式：

```
function escape (character) {
    int num = character.charCodeAt (0);
    String code = '000' + num.toString (16);
    return '\\u' + code.substring (code.length - 4);
}

function endsWith (str, character) {
    regexp = new RegExp ('\\b.*?' + escape (character) + '\\b', 'g');
    return str.match (regexp);
} 
```

# html - HTML、CSS - 样式列表 - 最佳实践

> ID：13740655
> 
> 赞同：1
> 
> 时间：2012-12-06T09:35:22.060
> 
> 标签：html, css

我正在寻找 HTML / CSS 中的样式列表，并想知道最佳实践是什么。

```
<ul class="newsItems">
    <li>
        <h5>July 16, 2012</h5>
        <p>News - headline information</p>
    </li>
</ul> 
```

我需要显示一个小报纸图标，以及 H5 中的文本和右侧旁边的 P，这些需要内联显示（从左到右）。

最好使用包含 H5 / P 元素的 LI 来做到这一点，还是有更好的方法来做到这一点，我不知道？

我的 CSS 目前看起来像这样：-

```
#News .newsItems {
padding-left:10px;
display:inline;
}

#News .newsItems li {
list-style-image:url(/Images/NewspaperIcon.png);    
list-style-position:Inside;
}

#News .newsItems li {
vertical-align:top;
max-width:180px;
}

#News .newsItems li h5 {
vertical-align:top;
}

#News .newsItems li p {
vertical-align:top;
} 
```

预期输出的示例 -

![列表项目 - 新闻](../Images/48cdb6fd5dc6c94213dfe9b9f44af813.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:57:13.313

试试这个

**CSS**

```
ul.newsItems{
margin:0; padding:0;
}
ul.newsItems li {    
  height:auto; 
  display:inline-block; 
  list-style:none;
  padding-left:40px; max-width:180px;
 background: url('http://www.parker.edu/uploadedImages/1200_Newsletters/1214_Buttons/Newsletter-Icon.png') left top no-repeat;
}
.newsItems li span{
vertical-align:top; font-weight:bold;
}
.newsItems li p  {margin:0; padding:0} 
```

**[演示](http://tinkerbin.com/Y7JLL8Tc)**

# .net - 如果模块已经在 Powershell 中导入，如何删除它？

> ID：13740658
> 
> 赞同：2
> 
> 时间：2012-12-06T09:35:32.237
> 
> 标签：.net, powershell, module

我在启动时在我的脚本中动态添加了一些模块。

如果模块在导入之前已经导入，我想删除它。

如果已在 Powershell 中导入模块 Foo，如何删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:43:07.130

如果你想“重新加载”它，你也可以使用 import-module Foo -force

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:39:14.010

和之前的回答一样：

```
 get-module Foo | remove-module 
```

或者

```
remove-module foo -ea silentlycontinue 
```

# ios - ios：禁用前向触摸事件

> ID：13740659
> 
> 赞同：0
> 
> 时间：2012-12-06T09:35:35.810
> 
> 标签：ios, cocoa-touch

我的程序中的视图树是这样的：

```
根视图
  --- 子视图

```

我的问题是如何禁用从 rootView 到 subView.like 的前向触摸事件：

```
if(shouldForward){
     [rootView passTouchEventToSubView];
}
else{
   //do nothing
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:38:22.090

您正在寻找

[用户交互启用](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instp/UIView/userInteractionEnabled)

# php - 验证 Windows 文件名

> ID：13740661
> 
> 赞同：3
> 
> 时间：2012-12-06T09:35:46.987
> 
> 标签：php, regex, windows, filenames

如何确定给定字符串是否是有效的 Windows 文件名？我正在考虑一些可以提供字符串并返回布尔值的函数。它应该检查不允许的字符（<>:"/\|?*）和保留字（CON、PRN 等）。

```
isValidWindowsFilename('readme.txt'); // true
isValidWindowsFilename('foo/bar'); // false
isValidWindowsFilename('CON'); // false 
```

我找到了一个 MSDN 参考，准确描述了什么是有效的：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa365247 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx)

我还为 Java 找到了相同的问题，答案可以满足我的需要，只是它是 Java 而不是 PHP：[Validate a file name on Windows](https://stackoverflow.com/questions/6730009/validate-a-file-name-on-windows)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T09:35:46.987

这是移植到 PHP[的 Java 问题](https://stackoverflow.com/questions/6730009/validate-a-file-name-on-windows)的答案。

```
/**
 * @param string $filename
 * @return boolean Whether the string is a valid Windows filename.
 */
function isValidWindowsFilename($filename) {
    $regex = <<<'EOREGEX'
~                               # start of regular expression
^                               # Anchor to start of string.
(?!                             # Assert filename is not: CON, PRN, AUX, NUL, COM1, COM2, COM3, COM4, COM5, COM6, COM7, COM8, COM9, LPT1, LPT2, LPT3, LPT4, LPT5, LPT6, LPT7, LPT8, and LPT9.
    (CON|PRN|AUX|NUL|COM[1-9]|LPT[1-9])
    (\.[^.]*)?                  # followed by optional extension
    $                           # and end of string
)                               # End negative lookahead assertion.
[^<>:"/\\|?*\x00-\x1F]*         # Zero or more valid filename chars.
[^<>:"/\\|?*\x00-\x1F\ .]       # Last char is not a space or dot.
$                               # Anchor to end of string.
                                #
                                # tilde = end of regular expression.
                                # i = pattern modifier PCRE_CASELESS. Make the match case insensitive.
                                # x = pattern modifier PCRE_EXTENDED. Allows these comments inside the regex.
                                # D = pattern modifier PCRE_DOLLAR_ENDONLY. A dollar should not match a newline if it is the final character.
~ixD
EOREGEX;

    return preg_match($regex, $filename) === 1;
} 
```

请注意，此函数对文件名的长度没有任何限制，但根据平台，实际文件名可能会限制为 260 或 32767 个字符。

这里有一些测试代码来验证它的正确性。

```
$tests = array(
    // Valid filenames
    'readme.txt' => true,
    'foo.AUX' => true,
    'foo.AUX.txt' => true,
    '.gitignore' => true, // starting with a period is ok.

    // Invalid filenames
    'x<y' => false, // less than not allowed.
    'x>y' => false, // greater than not allowed.
    'q: why not.txt' => false, // colon not allowed.
    'He said "hi".doc' => false, // double quote not allowed.
    'foo/bar' => false, // Forward slash not allowed.
    'foo\\bar' => false, // Backslash not allowed.
    'cat readme | backup' => false, // vertical bar (pipe) not allowed.
    'ls foo?.rtf' => false, // question mark not allowed
    'ls foo*.rtf' => false, // asterisk not allowed
    "null\0char" => false, // null character not allowed
    '.' => false, // must not end in period
    '..' => false, // must not end in period
    'period.' => false, // must not end in period
    'space ' => false, // must not end with space

    // Do not use the following reserved device names for the name of a file:
    // CON, PRN, AUX, NUL, COM1, COM2, COM3, COM4, COM5, COM6, COM7, COM8, COM9, LPT1, LPT2, LPT3, LPT4, LPT5, LPT6, LPT7, LPT8, and LPT9.
    // Also avoid these names followed immediately by an extension; for example, NUL.txt is not recommended.
    'CON' => false,
    'prn.txt' => false,
    'LPT9.php' => false,
);

// Disallow characters whose integer representations are in the range from 1 through 31
for ($i = 1; $i <= 31; $i++) {
    $tests[chr($i)] = false;
}
?>

<style>
.pass {
    background-color: #efe;
}
.fail {
    background-color: #fee;
}
</style>

<table>
<thead><tr><th>filename</th><th>expected</th><th>actual</th></tr></thead>
<tbody>
<? foreach ($tests as $filename => $expected) {
    $actual = isValidWindowsFilename($filename);
    ?>
    <tr><td><?=htmlentities($filename)?></td><td><?= $expected ? 'valid' : 'invalid' ?></td><td class="<?= $expected === $actual ? 'pass' : 'fail' ?>"><?= $actual ? 'valid' : 'invalid' ?></td></tr>
    <?
} ?>
</tbody>
</table> 
```

# javascript - 需要使用 javascript 代码运行警报字符串

> ID：13740665
> 
> 赞同：0
> 
> 时间：2012-12-06T09:36:01.270
> 
> 标签：javascript, jquery

我想`is it executed well?`在 javascript 中执行以下行后发出警报

`window["is"]("it")("executed")("well")("?")`

这里的 window 表示一个全局对象。我不知道上面的那行在 javascript 中是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:41:33.963

```
window.is = function(it){
    return function(executed){
        return function(well){
            return function(questionMark){
              alert("is "+it+" "+executed+" "+well+" "+questionMark);
            }
        }
    }
}

window["is"]("it")("executed")("well")("?")​ 
```

奇怪的问题。可能有一种更有效的方法......

演示：http: [//jsfiddle.net/jd3uM/](http://jsfiddle.net/jd3uM/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T09:48:45.427

邪恶的递归:)

`arguments.callee`指您当前正在调用的函数。

```
window.is = (function(len){
    var buffer = ["is"];
    return function(str) {
        buffer.push(str);
        if(buffer.length === len) {
            alert(buffer.join(" "));
        }
        else {
            return arguments.callee;            
        }
    }
}(5)); 
```

[http://jsfiddle.net/tarabyte/wf8ag/](http://jsfiddle.net/tarabyte/wf8ag/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:42:23.523

以下作品，虽然我想不出任何可能用于丑陋的东西。

```
window["is"] = function (it) {
   return function (executed) {
      return function (well) {
          return function (questionMark) {
              alert("is " + it + " " + executed + " " + well + questionMark);
          }
      }
   }
} 
```

第一件事是将`is`元素添加到`window`数组中（哦，我的……），然后继续返回将被调用的函数。

# ruby - 如何在 = 获取时打破

> ID：13740667
> 
> 赞同：2
> 
> 时间：2012-12-06T09:36:11.880
> 
> 标签：ruby, while-loop, interrupt

我想像这样运行这段代码

```
count = Hash.new(0)

while line = gets
  words = line.split
  words.each do |word|
    count[word] += 1
  end
end

count.sort{|a, b|
  a[1] <=> b[1]
}.each do |key, value|
  print "#{key}: #{value}\n"
end 
```

但我不知道如何打破。击中`Command`+`C`返回

```
word_count.rb:3:in `gets': Interrupt
from word_count.rb:3:in `gets'
from word_count.rb:3:in `<main>' 
```

如何修复此代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:52:29.920

您还可以捕获信号`Ctrl`+`C`发送到进程：

```
 count = Hash.new(0)
 trap("SIGINT") { 
   count.sort{|a, b|
     a[1] <=> b[1]
   }.each do |key, value|
     print "#{key}: #{value}\n"
   end
   exit!
 }
 while line = gets
   words = line.split
   words.each do |word|
     count[word] += 1
   end
 end 
```

参考[Ruby Signal 的文档](http://www.ruby-doc.org/core-1.9.3/Signal.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:39:07.833

试试`Ctrl`- `D`。这是你需要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:09:05.230

```
count = Hash.new(0)

stop_condition = "\n"
until stop_condition == line = gets
  words = line.split
  words.each do |word|
    count[word] += 1
  end
end 
```

当然，您可以`break if line.chomp.empty?`在 while 循环中使用 a，但我避免使用它，因为它确实是一个无限循环，您知道要从中逃脱的条件。这也不会退出程序，只是循环。

`control``c`并且`control``d`对用户来说很奇怪，我会避免将这些东西用于非异常事件。

# html - 使网站仅在 iPad 上响应 - 我如何不为 iPhone 输出视口元标记...？

> ID：13740668
> 
> 赞同：0
> 
> 时间：2012-12-06T09:36:19.733
> 
> 标签：html, ios, twitter-bootstrap, responsive-design

我有一个建立在 Bootstrap 之上的响应式网站。但是，我只希望它在 iPad 上响应 - iPhone 应该显示常规的完整站点。

在我的`<head>`我正在使用：

`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

但我只希望在设备*不是*iPhone 时输出它。

但是 - 这需要是静态 HTML - 所以我不能使用 PHP 或任何服务器端。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:42:30.080

试试这个。

```
<meta name="viewport" content="width=1024, initial-scale=1, minimum-scale: 1, maximum-scale: 1"> 
```

# macos - 图层支持视图的核心动画几何

> ID：13740669
> 
> 赞同：3
> 
> 时间：2012-12-06T09:36:26.137
> 
> 标签：macos, cocoa, core-animation

我有一个支持图层的视图，并且想了解锚点是如何为它工作的，是否允许它使用 CALayer 几何属性（而不是使用 NSView 的框架属性）

首先，引用文档：

> anchorPoint 的默认值为 (0.5,0.5)，对应于图层边界的中心

但是当我尝试直接将锚点的值更改为 (0.5,0.5) 时，我得到了偏移。这是示例，红色区域是原始位置（当没有应用到锚点时），按钮被移动到左下角：

![在此处输入图像描述](../Images/0f78a14668ea44847ac96d41f0b02c46.png)

当我将锚点设置为 (0,0) 按钮时，它应该在：

![在此处输入图像描述](../Images/fc626e00d1844d89f88ee3c9d73b3c6c.png)

**更新**：

这是我用来实例化 Button 的代码：

```
self.button = [[NSButton alloc] initWithFrame:NSMakeRect(130, 130, 100, 40)];
self.button.title = @"My Title";
self.button.wantsLayer = YES;
NSLog(@"Button anchor Point is : (%f;%f)", self.button.layer.anchorPoint.x, self.button.layer.anchorPoint.y);
[panelView addSubview:self.button]; 
```

有趣的是，似乎对于 layer-backed view 的默认锚点是 0,0：

```
NSLog(@"Button anchor Point is : (%f;%f)", self.button.layer.anchorPoint.x, self.button.layer.anchorPoint.y); 
```

产生 (0.000000;0.000000)

毕竟，OS X 部署目标是 10.8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:19:44.197

以下是 NSView 上 Apple 文档的引用：

> 当使用 layer-backed 视图时，你不应该直接与 layer 交互。

似乎此代码跨越了您可以使用图层支持的视图执行的操作的边界。

# hadoop - HBase 与 Hadoop 的集成 - 同步支持

> ID：13740670
> 
> 赞同：1
> 
> 时间：2012-12-06T09:36:31.660
> 
> 标签：hadoop, hbase, sync

我对 HBase 或 Hadoop 比较陌生，这听起来可能很幼稚。然而..

我在将 Hbase 与现有 hadoop 集群集成时遇到问题。出于学习的目的，我配置了一个 2 节点 Hadoop 1.1.1 集群。让我们说主人和奴隶。我什至可以毫无问题地运行 map reduce 示例。

在 Master --- 1\. Namenode 2\. Secondary Namenode 3\. Job Tracker + 4\. Datanode 5\. Task tracker

On Salve --- 1\. Datanode 2\. Task Tracker

现在，我想在这个 hadoop 集群上运行 HBase 0.90.6。问题是这个版本的 HBase 与 Hadoop-code-append jar 捆绑在一起。现在要将 HBase 0.90.6 与 Hadoop 1.1.1 集成，我已将 hbase lib 目录中的 hadoop core jar 替换为 hadoop-core-1.1.1 jar。我还必须将 commons-configuration jar 放在 hbase lib 文件夹下。然后通过 hbase-site.xml 下的 hbase.rootdir 属性使 HBase 指向 hadoop 集群这工作得很好。

当我启动 HBase 主 Web UI 时出现问题，它说

“您当前正在运行未启用 HDFS 附加支持的 HMaster。这可能会导致数据丢失。有关详细信息，请参阅 HBase wiki。”

当我搜索同步支持时，似乎并非所有版本的 Hadoop 都支持这一点。

现在的问题是，如何获得 Hbase 0.90.6 和 hadoop 1.1.1 组合的同步支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:29:28.503

您是否打开了对`hbase-site.xml`和的附加支持`hdfs-site.xml`？这适用于 HBase 0.96.0。

```
 <property>
    <name>dfs.support.append</name>
    <value>true</value>
  </property> 
```

进行此更改后，您必须重新启动集群。

# python - 在熊猫中，我如何按工作日（）分组日期时间列？

> ID：13740672
> 
> 赞同：16
> 
> 时间：2012-12-06T09:36:35.400
> 
> 标签：python, pandas

我想过滤掉周末数据，只查看工作日的数据（周一（0）-周五（4））。我是熊猫新手，在熊猫中实现这一目标的最佳方法是什么？

```
import datetime
from pandas import *

data = read_csv("data.csv")
data.my_dt 

Out[52]:
0     2012-10-01 02:00:39
1     2012-10-01 02:00:38
2     2012-10-01 02:01:05
3     2012-10-01 02:01:07
4     2012-10-01 02:02:03
5     2012-10-01 02:02:09
6     2012-10-01 02:02:03
7     2012-10-01 02:02:35
8     2012-10-01 02:02:33
9     2012-10-01 02:03:01
10    2012-10-01 02:08:53
11    2012-10-01 02:09:04
12    2012-10-01 02:09:09
13    2012-10-01 02:10:20
14    2012-10-01 02:10:45
... 
```

我想做类似的事情：

```
weekdays_only = data[data.my_dt.weekday() < 5] 
```

AttributeError：“numpy.int64”对象没有属性“weekday”

但这不起作用，我还没有完全掌握如何访问列日期时间对象。

最终目标是按工作日时间范围分层排列，例如：

```
monday, 0-6, 7-12, 13-18, 19-23
tuesday, 0-6, 7-12, 13-18, 19-23 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-06T10:19:32.793

您对函数“weekday”的调用不起作用，因为它对 data.my_dt 的索引进行操作，该索引是一个 int64 数组（这是错误消息的来源）

您可以使用以下内容在包含工作日的数据中创建一个新列：

```
data['weekday'] = data['my_dt'].apply(lambda x: x.weekday()) 
```

然后你可以过滤工作日：

```
weekdays_only = data[data['weekday'] < 5 ] 
```

我希望这有帮助

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-08-29T03:04:26.423

更快的方法是使用[`DatetimeIndex.weekday`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.weekday.html)，如下所示：

```
temp = pd.DatetimeIndex(data['my_dt'])
data['weekday'] = temp.weekday 
```

快得多，尤其是对于大量行。有关更多信息，请查看[此](https://stackoverflow.com/a/21811766/3765319)答案。

# asp.net-mvc - 如何安全地插入和显示来自数据库的 html 文本

> ID：13740677
> 
> 赞同：1
> 
> 时间：2012-12-06T09:36:46.977
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我是第一次在数据库中插入 html，所以我需要一些建议，我是否让它正确且安全。
我有财产类：

```
[AllowHtml] public property Description {get;set} 
```

在视图中，我有一个**tinyMCE**（在文本区域上），用户可以在其中输入他的数据。
当我稍后显示该 html 时，我使用：

```
@Html.Raw(Model.Description) 
```

我不知道我是否应该采取其他措施来防止对站点的某些攻击。
我试图输入：

```
<script>alert('attack');</script> 
```

但什么也没发生，它将它保存在数据库中并稍后显示为普通文本。
另外我想知道用户是否会留下一些未关闭的标签，他会以某种方式破坏我的布局。
处理这种情况时有哪些明智的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:13:17.100

应该发生的是，在将 html 写入数据库之前应该对其进行编码。如果您查看数据库，您应该会看到类似这样的内容（或者至少在安全的情况下您应该看到）：

```
&lt;script&gt;alert(&#39;attack&#39;);&lt;/script&gt; 
```

现在，当它通过 html raw 写入页面时，它会像提交时一样出现在屏幕上，但是如果您检查页面，您仍然会看到相同的内容。

实际上，ASP.Net 使编写打开您的网站容易被滥用的代码变得非常困难，因此您通常应该没问题。值得围绕该主题进行更多阅读，因为这是需要注意的好东西，尤其是在指导他人时。

一些链接：

[防止 Javascript 和 XSS 攻击](https://stackoverflow.com/questions/6639859/preventing-javascript-and-xss-attacks)

[http://msdn.microsoft.com/en-us/library/ff649310.aspx](http://msdn.microsoft.com/en-us/library/ff649310.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:24:54.793

您可以使用[Windows 保护库](http://wpl.codeplex.com/)中的 Microsoft AntiXSS 。

[TinyMCE、AntiXSS、MVC3 和 GetSafeHtmlFragment](https://stackoverflow.com/questions/10875458/tinymce-antixss-mvc3-and-getsafehtmlfragment)

干杯。

# sql - 动态sql存储过程更新查询问题？

> ID：13740678
> 
> 赞同：0
> 
> 时间：2012-12-06T09:36:52.550
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures, dynamic-sql

我编写了以下代码将表中的文件路径列设置为`'F:\DataMigration\Wise\DELTA_20121008\Attachments\SR\SR_1.txt'`

```
where SR_1 is file_name column
      .txt is file_ext column from my table. 
```

但在执行以下过程后，我在表中得到文件路径列

```
'F:\DataMigration\Wise\DELTA_20121008\Attachments\file_name.file_ext' 
```

意味着它将列名视为字符串，我如何将其设为列，以便它将使用该列中的值。

```
alter procedure [dbo].[WISEMissingAttachmentReportGenerator]
(
@tablename varchar(255), @pathonlocal nvarchar(255)
)
as
begin
--step 1
exec dbo.proc_alter_table @tablename
--step 2
EXEC ('update '+ @tablename +
' set filepath = '''+ @pathonlocal + ' file_name'+'.'+'file_ext''')
EXEC('Select * from '+@tablename)
end

exec [dbo].[WISEMissingAttachmentReportGenerator] [WISE.Non_VP_Service_Request_Attachments_File_Check_Analysis],
N'F:\DataMigration\Wise\DELTA_20121008\Attachments\SR\' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:50:34.087

尝试将您的陈述更改为：

```
EXEC ('update '+ @tablename +
' set filepath = '''+ @pathonlocal + ''' + file_name + ''.'' + file_ext') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:53:19.493

尝试;

```
EXEC('UPDATE '+ @tablename +
' SET filepath = '''+ @pathonlocal + ''' + file_name + '''+'.'+''' + file_ext') 
```

等于;

```
UPDATE [YourTable] SET filepath = 'YourPath' + file_name + '.' + file_ext 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-19T08:54:36.467

```
declare @tblnm varchar(20) = 'test'
declare @upda varchar(20) = 'update '
declare @set varchar(25) = ' set'
declare @id varchar(25) = ' id'
declare @cmd varchar(1000)

set @cmd = @upda + @tblnm + @set + @id + '=7'
exec(@cmd)

SAMPLE SQL UPDATE QUERY - FOR BUILDING TABLENAME DYNAMICALLY  
EXECUTED GUYS - THIS IS CALL JUGAAAAAAAAAD [NO NEED TO GET INTO ''' STUFF] 
```

# viewmodel - 将数据从 viewmodel 传递到 windows phone 后面的代码

> ID：13740682
> 
> 赞同：0
> 
> 时间：2012-12-06T09:37:01.957
> 
> 标签：viewmodel, windows-phone, code-behind

我试图在我的第一个（非常简单的）WP7 应用程序上使用 MVVM 模式，但我被严重卡住了，现在我只是想让它工作而不关心 MVVM。

我的 MainPage 有一个 MainViewModel，它工作正常。我有一个传递一些数据并导航到“详细信息页面”的按钮。我已经设置了一个导航服务来导航到详细信息页面并传递参数，效果很好。我只是无法将数据绑定到视图工作。由于它是一个简单的应用程序，我决定将数据从 DetailsPageVieModel.cs 传递到后面的 DetailsPage.xaml.cs 代码并在那里完成工作。这是 veiw 模型部分的样子。

```
public override void Initialize(IDictionary<string, string> parameters)
{
    DetailsPage dp = new DetailsPage();
    //DetailsPage dp = Application.Current.RootVisual as DetailsPage;
    base.Initialize(parameters);
    parameters.TryGetValue("url", out vidUrl);
    dp.LoadVideoData(vidUrl);
} 
```

在我的 DetailsPage.xaml.cs 中，我有以下内容：

```
 public void LoadVideoData(string url)
    {
        HtmlWeb doc = new HtmlWeb();
        doc.LoadAsync("http://mydomain.com/video.php?url=" + url);
        doc.LoadCompleted += doc_LoadCompleted;
    }

    private void doc_LoadCompleted(object sender, HtmlDocumentLoadCompleted e)
    {
        this.vidTitle.Text = e.Document.GetElementbyId("title").InnerText;
        vidId = e.Document.GetElementbyId("youtubeId").InnerText;
        this.vidUrl.Source = new Uri("http://mydomain.com/video.php?url=" + vidUrl, UriKind.Absolute);

        BitmapImage bi = new BitmapImage();

        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile("temp.jpg", FileMode.Open, FileAccess.Read))
            {
                bi.SetSource(fileStream);
                this.vidImg.Height = bi.PixelHeight;
                this.vidImg.Width = bi.PixelWidth;
            }
        }
        this.vidImg.Source = bi;
    } 
```

这是相关的 DetailsPage.xaml 代码

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <StackPanel>
            <TextBlock x:Name="vidTitle" Canvas.ZIndex="99" />
            <TextBlock Canvas.ZIndex="99" Text="Tap on the image to view the video." FontSize="14" Margin="0"/>
            <Button Margin="0 -50" Padding="0" BorderThickness="0">
                <Image x:Name="vidImg" Height="225" />
            </Button>
            <StackPanel Canvas.ZIndex="99" Height="516">
                <phone:WebBrowser x:Name="vidUrl" IsScriptEnabled="True" Height="516" Margin="0"/>
            </StackPanel>
        </StackPanel>
    </Grid> 
```

我猜问题出在以下几点

```
DetailsPage dp = new DetailsPage();
//DetailsPage dp = Application.Current.RootVisual as DetailsPage; 
```

这些代码行都不起作用。第一行正确执行，但页面没有使用正确的数据进行更新。第二行在到达 dp.LoadVideoData(vidUrl); 时给了我一个运行时错误消息。线。

这是我的第一个 Windows Phone 应用程序，如果有人能提供任何帮助，我将不胜感激。

卡迈勒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T23:48:11.323

在挖掘了更多之后，我找到了以下解决方案。

```
DetailsPage currentPage = (App.Current as App).RootFrame.Content as DetailsPage; 
```

我将此代码放在 DetailsPageViewModel.cs 中。但是对于像我这样的其他新手来说，文件名并没有什么特别之处。很可能是 Monkey.cs。上面的代码只是让您可以访问正在显示的当前页面背后的代码。

# python - scipy稀疏矩阵的乘法运算符

> ID：13740691
> 
> 赞同：4
> 
> 时间：2012-12-06T09:37:49.817
> 
> 标签：python, scipy, sparse-matrix

`*`当涉及 scipy 稀疏矩阵时，乘法运算符的行为让我有点困惑。似乎运算符实现了矩阵乘法，而不是像使用 numpy 数组那样实现逐个乘法。

一些代码来检查这一点：

```
from scipy.sparse import lil_matrix
A = lil_matrix(-numpy.eye(2))
b = lil_matrix(numpy.ones((2,2)))
print (A * B).toarray() 
```

结果是：

```
[[-1\. -1.]
 [-1\. -1.]] 
```

该模块的[文档](http://docs.scipy.org/doc/scipy/reference/sparse.html#module-scipy.sparse)`scipy.sparse`并没有真正详细说明这一点，我想知道某处是否有明确的乘法行为规范？

此外，对于具有 scipy 稀疏矩阵和 numpy 矩阵或数组的乘法运算符，是否有一些明确定义的规则？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-23T10:00:49.570

文档确实很稀缺。如果您正在寻找按分量乘法，您可以使用`A.multiply(b)`，其中 b 可以是元素、向量或矩阵：

[https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.sparse.csr_matrix.multiply.html](https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.sparse.csr_matrix.multiply.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:50:49.833

是的，在所有情况下都是矩阵乘法。

# android - 如何使用图形 api 将图像发布到 facebook 墙上

> ID：13740692
> 
> 赞同：0
> 
> 时间：2012-12-06T09:37:52.360
> 
> 标签：android

我的活动中有一个位图，我尝试将其转换为如下所示的字符串

位图 bitmap = getIntent().getParcelableExtra("data");

```
 strpostimageurl=   BitMapToString(bitmap) ; 
```

//将位图转换为字符串的方法

```
 public String BitMapToString(Bitmap bitmap){
     ByteArrayOutputStream baos=new  ByteArrayOutputStream();
     bitmap.compress(Bitmap.CompressFormat.PNG,100, baos);
     byte [] b=baos.toByteArray();
     String temp=Base64.encodeToString(b, Base64.DEFAULT);
     return temp; 
```

}

我正在将此字符串发送到 Facebook Graph api，如下所示

```
String res=  

UrltoValue.getValuefromUrl("https://graph.facebook.com/"+Login.facebookid+"/feed?access_token="+accesstoken+"&method="+"post"+"&message="+"hi"+"&picture="+strpostimageurl); 
```

但我收到非法字符响应

```
12-06 14:47:16.488: E/post response(21627): Illegal character in query at index 281: https://graph.facebook.com/100001574672236/feed?access_token=AAAGaMRblwW4BAOdRuZCHNSxtpAPd8O05fXBDY0yF10sWf7tv1wlW7xX6WituirF6g7bZAMCflHPb5qLzeNYOmItEZBzeewNZBNF09KrpZBgZDZD&method=post&message=hi&picture=iVBORw0KGgoAAAANSUhEUgAAALcAAAChCAYAAACF4S4ZAAAABHNCSVQICAgIfAhkiAAAIABJREFU 
```

如何将位图发送到 Facebook api 以显示图像

# java - 记录 antlr v3 解析器活动

> ID：13740697
> 
> 赞同：3
> 
> 时间：2012-12-06T09:38:00.593
> 
> 标签：java, antlr

我希望能够记录 Antlr v3（准确地说是 3.0.1）生成语法的解析过程。我尝试使用 DebugTreeParser 但它什么也没做，看起来它的方法永远不会被调用。

理想情况下，我希望能够输出如下内容，即尝试/执行的规则的踪迹：

```
 parsing: program (token: Foo)
 parsing: statements (token: Foo)
 parsing: statement (token: Foo)
 parsing: block (token: Foo)
 parsed: block -> false (at 0)
 parsing: method call (token: Foo)
 parsing: variable (token: Foo)
 parsed: variable -> true (at 1)
 ... 
```

这是我的解析代码：

```
 CharStream cs = new ANTLRReaderStream(script);
        MyLexer lex = new MyLexer(cs);
        CommonTokenStream tokens = new CommonTokenStream(lex);
        MyParser parser = new MyParser(tokens);
        return new Program(makeProgram((Tree) parser.program().getTree())); 
```

我尝试了在 Antlr Wiki 上找到的解决方案：

```
 ...
 ParseTreeBuilder builder = new ParseTreeBuilder("prog");

 MyParser parser = new MyParser(tokens);
 parser.setTreeAdaptor(new DebugTreeAdaptor(builder, parser.getTreeAdaptor())); 
```

但是构建器没有输出任何有趣的东西。

也许有一个选项可以在源语法中激活以生成调试兼容的解析器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T00:03:29.743

`-debug`首先，使用命令行选项生成语法。完成此操作后，您的令牌解析器将拥有额外的、以调试为中心的构造函数，允许您使用自定义`DebugEventListener`或内置构造函数。由于您要进行自定义日志记录，因此这是一个使用 custom`DebugEventListener`的示例解决方案来帮助您入门。

这是我将用于测试的语法。它可能包含问题。

### 调试文件

```
grammar DebugMe;

compilationUnit : statements EOF;
statements      : statement+;
statement       : block | call | decl;
block           : LCUR statements RCUR;    
call            : ID LPAR arglist? RPAR SEMI;
arglist         : ID (COMMA ID)*;    
decl            : VAR ID EQ expr SEMI;
expr            : add_expr;     

add_expr        : primary_expr ((PLUS|MINUS) primary_expr)*;    
primary_expr    : STRING | ID | INT | LPAR expr RPAR;    

VAR: 'var';   
ID: ('a'..'z'|'A'..'Z')+;
INT: ('0'..'9')+;
STRING: '"' ~('\r'|'\n'|'"')* '"';
SEMI: ';';
LPAR: '(';
RPAR: ')';
LCUR: '{';
RCUR: '}';
PLUS: '+';
MINUS: '-';    
COMMA: ',';
EQ: '=';
WS: (' '|'\t'|'\f'|'\r'|'\n') {skip();}; 
```

这是我将使用的测试程序。请注意，我省略了`newEventListener`.

### TestDebugMeGrammar.java

```
public class TestDebugMeGrammar {

    public static void main(String[] args) throws Exception {

        CharStream input = new ANTLRStringStream("var x = 3; print(x);");

        DebugMeLexer lexer = new DebugMeLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);

        DebugMeParser parser = new DebugMeParser(tokens, newEventListener());

        parser.compilationUnit();
    }
    //...
} 
```

我不太熟悉`DebugEventListener`解析器是如何调用的，所以我将从一个简单的`Proxy`实现开始，它可以以最少的麻烦转储每个调用：

```
//TestDebugMeGrammar.java

    private static DebugEventListener newEventListener() {
        return (DebugEventListener) Proxy.newProxyInstance(TestDebugMeGrammar.class.getClassLoader(),
                new Class[] { DebugEventListener.class },
                new DebugListenerHandler());
    }

    public static class DebugListenerHandler implements InvocationHandler {
        @Override
        public Object invoke(Object proxy, Method method, Object[] args)
                throws Throwable {

            // simply print out the method call.
            System.out.print(method.getName());

            if (args != null && args.length > 0) {
                System.out.print(": ");
                for (int i = 0, count = args.length; i < count; ++i) {
                    Object arg = args[i];
                    if (arg == null) {
                        System.out.printf("<(null)> ");
                    } else {
                        System.out.printf("<%s> ", arg.toString());
                    }
                }
            }

            System.out.println();
            return null;
        }
    } 
```

输出很广泛，但它可以很好地了解听众听到的内容。

```
enterRule: <DebugMe.g> <compilationUnit> 
commence
location: <4> <1> 
enterAlt: <1> 
location: <5> <7> 
enterRule: <DebugMe.g> <statements> 
location: <7> <1> 
enterAlt: <1> 
location: <8> <7> 
enterSubRule: <1> 
enterDecision: <1> <false> 
LT: <1> <[@0,0:2='var',<11>,1:0]> 
exitDecision: <1> 
enterAlt: <1> 
location: <8> <7> 
enterRule: <DebugMe.g> <statement> 
location: <10> <1> 
enterDecision: <2> <false> 
LT: <1> <[@0,0:2='var',<11>,1:0]> 
exitDecision: <2> 
enterAlt: <3> 
location: <13> <7> 
enterRule: <DebugMe.g> <decl> 
... 
```

这是一个基于我从上面收集到的内容的小型、专注的听众。输出更接近您想要的，并且可以作为您有用的起点。

```
//TestDebugMeGrammar.g
    //redefinition
    private static DebugEventListener newEventListener() {
        return new SimpleDebugEventListener();
    }

    private static class SimpleDebugEventListener extends
            BlankDebugEventListener {

        private Token lastToken;
        @Override
        public void LT(int i, Object t) {
            System.out.println("Read object \"" + t + "\"");
        }

        @Override
        public void LT(int i, Token t) {
            if (!t.equals(lastToken)){
                System.out.println("Read input \"" + t.getText() + "\"");
                lastToken = t;
            }
        }

        @Override
        //public void enterRule(String ruleName) { // <-- ANTLR 3.0.1
        public void enterRule(String grammarFileName, String ruleName) { //<-- ANTLR 3.4
            System.out.println("Entered rule " + ruleName);
        }

        @Override
        //public void exitRule(String ruleName) { // <-- ANTLR 3.0.1
        public void exitRule(String grammarFileName, String ruleName) { //<-- ANTLR 3.4
            System.out.println("Exited rule " + ruleName);
        }

        @Override
        public void consumeToken(Token token) {
            System.out.println("Consumed \"" + token.getText() + "\"");
        }
    } 
```

这是输出：

```
Entered rule compilationUnit
Entered rule statements
Read input "var"
Entered rule statement
Entered rule decl
Consumed "var"
Read input "x"
Consumed "x"
Read input "="
Consumed "="
Entered rule expr
Entered rule add_expr
Entered rule primary_expr
Read input "3"
Consumed "3"
Exited rule primary_expr
Read input ";"
Exited rule add_expr
Exited rule expr
Consumed ";"
Exited rule decl
Exited rule statement
Read input "print"
Entered rule statement
Entered rule call
Consumed "print"
Read input "("
Consumed "("
Read input "x"
Entered rule arglist
Consumed "x"
Read input ")"
Exited rule arglist
Consumed ")"
Read input ";"
Consumed ";"
Exited rule call
Exited rule statement
Read input "<EOF>"
Exited rule statements
Consumed "<EOF>"
Exited rule compilationUnit 
```

* * *

我最初使用 ANTLR 3.4 测试并运行了上述代码。我根据您的规格使用 ANTLR 3.0.1 重新测试了它，您需要进行的唯一更改就是在`SimpleDebugEventListener`课堂上。我已更新代码以指示需要更改的位置以及更改的内容。

* * *

只是为了好玩，这里有一个修改后`SimpleDebugEventListener`的打印输出，我认为它更类似于您的日志记录目标。

```
 private static class SimpleDebugEventListener extends
            BlankDebugEventListener {

        private LinkedList<String> activeRules = new LinkedList<String>();

        @Override
        public void enterRule(String grammar, String ruleName) {  //ANTLR 3.4
            activeRules.add(ruleName);
        }

        @Override
        public void exitRule(String grammar, String ruleName) { //ANTLR 3.4
            activeRules.removeLast();
        }

        @Override
        public void consumeToken(Token token) {
            System.out.printf("%s consumed \"%s\"%n", formatRules(),
                    token.getText());
        }

        private String formatRules() {
            if (activeRules.size() == 1) {
                return activeRules.getLast();
            } else { 
                StringBuilder builder = new StringBuilder();
                boolean first = true;
                for (String rule : activeRules){
                    if (!first){
                        builder.append(" -> ");
                    } else { 
                        first = false;
                    }
                    builder.append(rule);
                }

                return builder.toString();
            }
        }
    } 
```

输出：

```
compilationUnit -> statements -> statement -> decl consumed "var"
compilationUnit -> statements -> statement -> decl consumed "x"
compilationUnit -> statements -> statement -> decl consumed "="
compilationUnit -> statements -> statement -> decl -> expr -> add_expr -> primary_expr consumed "3"
compilationUnit -> statements -> statement -> decl consumed ";"
compilationUnit -> statements -> statement -> call consumed "print"
compilationUnit -> statements -> statement -> call consumed "("
compilationUnit -> statements -> statement -> call -> arglist consumed "x"
compilationUnit -> statements -> statement -> call consumed ")"
compilationUnit -> statements -> statement -> call consumed ";"
compilationUnit consumed "<EOF>" 
```

# java - Swing显示多个子jframe

> ID：13740701
> 
> 赞同：1
> 
> 时间：2012-12-06T09:38:04.993
> 
> 标签：java, swing, user-interface, jframe

我在 JAVA Swing Netbeans IDE 7.1 中做一个项目。我创建了一个带有一些按钮和下拉菜单的 jFrame。从下拉列表中选择一个选项后，会创建另一个框架对象并将 setVisible 设置为 true。但不是显示一个窗口，而是显示了 2 个窗口。还有其他类似的电话，但没有一个有这个问题，请有人帮助我。谢谢。

代码：

```
private void itemListItemStateChanged(java.awt.event.ItemEvent evt) {                                          

        String item = null;
        String filename = null;
        item = (String) itemList.getSelectedItem();
        if(item=="P"){

            filename="p";
            description.setText("Description:  P");
        }
        else if(item=="A"){

            filename="a";
            description.setText("Description:  A");
        }
        else if(item=="R"){

            filename="r";
            description.setText("Description:  R");
        }

        else if(item=="S"){

            filename="s";
            description.setText("Description:  S");
        }

        else if(item=="X"){
            displayText.setText("");
            x xl = new x();
            xl.setVisible(true);

        }

        else if(item=="Xx"){

            filename="xx";
            description.setText("Description: xx");
        }

        else {
            System.out.println("invalid selection.");

        }

        if (item=="X"){
            return;
        }
        else {
             displayText.setText("");

            BufferedReader b = null;
        try {
            b= new BufferedReader(new FileReader ("/home/sfred/"+filename+".mile"));

        } catch (FileNotFoundException ex) {
            ex.printStackTrace();
        }
        try {
            line = b.readLine();
        } catch (IOException ex) {
           ex.printStackTrace();
        }

        while (line != null){
            displayText.append(line + "\n");
            try {
                line=b.readLine();
            } catch (IOException ex) {
                ex.printStackTrace();
            }

        }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:45:21.930

*   请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice)而是使用：

    1)`JDialog`

    2)[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)这将允许您在单个`JFrame`.

*   您不能比较`String`using`==`运算符必须使用`equals(String s)`，否则它不会正确评估

    ```
    if(item.equals("X")) {
    } 
    ```

*   比较时使用`switch`语句（Java 7+）`String`：

    ```
    switch(item) {
        case "P":
            //do something
        break;

        case "X":
           //do something
        break;

        default:
           //if no match with above was found..
        break;
    } 
    ```

# python - 伪终端上的 tty.setraw 在 OS X 中挂起

> ID：13740706
> 
> 赞同：2
> 
> 时间：2012-12-06T09:38:27.707
> 
> 标签：python, macos, posix, pty

这是一个在 Ubuntu 系统上完美运行的代码片段，但在 OS X 上调用 setraw 会使 Python 进程挂起。

```
import os, sys, termios, tty

# Open pseudo terminal
m,s = os.openpty()
stdin = os.fdopen(s, 'r', 0)
stdout = os.fdopen(s, 'w', 0)

# Remember olt attrs for restoration later on
tcattr = termios.tcgetattr(stdin.fileno())

# Set pseudo terminal in raw mode
tty.setraw(stdin.fileno())

# Write something on the slave side of the pseudo terminal
stdout.write('test\n')

# Call setraw again. (for no reason) But it hangs here...
tty.setraw(stdin.fileno()) 
```

这段代码有问题，还是 OS X 的行为不同？过去它可以工作，但我们代码中的一些细微变化使它现在在 OS X 中阻塞......

# javascript - Javascript - 函数在 jQuery(document).ready 中不起作用（谷歌地图地理编码）

> ID：13740711
> 
> 赞同：3
> 
> 时间：2012-12-06T09:38:35.053
> 
> 标签：javascript, jquery, google-maps-api-3

我有一个小的谷歌地图脚本可以从 Lat Lon 对或 address 获取位置，还可以更新那些 lat, lon 和 address 输入字段..

在这里查看[jsfiddle](http://jsfiddle.net/obmerk99/rcTUH/23/)

单击“绘制”按钮时 -`codeAddress()`应该调用一个被调用的函数。但在萤火虫控制台上我得到：

```
Error: ReferenceError: codeAddress is not defined 
```

我不明白为什么`codeAddress()`没有定义...

奇怪的是，如果我将函数移到

`jQuery(document).ready(function(){}`它确实有效（请参阅[jsFIDDLE](http://jsfiddle.net/obmerk99/rcTUH/21/)）

（我还需要移动`var marker`- 否则它只会使地图居中，并给出`marker is undefined`错误；

所以我的问题很简单，我做错了什么？为什么相同的功能在外部起作用`jQuery(document).ready(function(){}`但在内部不起作用？

还有一个问题：拖动标记时如何更新地址输入字段（如 lon lat 输入..）？

**UPDATE** - 感谢大家 - 学到了另一件重要的事情。不幸的是 - 所有都是有效的答案和解决方案 - 但我只能接受一个，对我来说，最容易理解的解决方案（对 JS 非常不熟悉 - 尽管它可能不是完美的做法）是 @cowls 再次感谢大家。 .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:48:48.583

简单的解决方案是更换

```
function codeAddress() { ... } 
```

和

```
codeAddress = function() { ... } 
```

您的问题是您将 codeAddress 声明为一个变量，其范围对于您绑定到文档就绪处理程序的函数是本地的。因此，该函数一退出，codeAddress 就不再存在。第二个声明（注意缺少的“var”）将 codeAddress 声明为全局变量，因此在准备函数退出后它仍可访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T09:45:45.257

而不是使用 onclick，您应该为 document.ready 方法内的所需元素分配一个点击处理程序。

例如

```
$(input).click(function() { codeAddress() }); 
```

将代码地址函数分配给所有输入框的单击事件，显然您希望将其定位在特定的类或 id

这是最佳实践，而不是使用 onclick。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T09:46:22.253

单击按钮时，`codeAddress()`将在全局范围内查找，但您已在`$(document).ready()`.

在外面声明函数`$(document).ready()`可能是这里最好的方法，只有你只会从就绪处理程序内部调用的函数才应该在里面定义；这样做也会使您准备好的处理程序保持清洁。

要在标记被拖动到某个位置时找到该位置，您需要使用`GeoCoder`服务器将其映射到文本位置：

```
var geocoder = new google.maps.Geocoder();

google.maps.event.addListener(marker, 'dragend', function(evt) {
    geocoder.geocode({latLng: evt.latLng}, function(results, status) {
        if (status==google.maps.GeocoderStatus.OK && results.length) {
            // do something with results[0..x].formatted_address
        }
    })
}); 
```

# mysql - 根据时间戳从新到旧排列数据

> ID：13740717
> 
> 赞同：0
> 
> 时间：2012-12-06T09:38:58.263
> 
> 标签：mysql

您好，我做了一个查询，其中我根据当前日期排列数据，但问题是结果以旧到新的形式出现。我怎样才能通过新到旧来实现这一点。这是我的查询

```
$date = "select CAST(post_date AS DATE) AS dated from wp_hdflvvideoshare  group by dated order by (DATE_SUB(CURDATE(), INTERVAL 20 DAY))";
 $date_sql=$wpdb->get_results($date); 
```

就像我得到结果一样

> 十月 十一月 十二月

我想要它

> 十二月 十一月 十月

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:48:46.030

试试这个 ：：

```
select CAST(post_date AS DATE) AS dated from wp_hdflvvideoshare  group by dated 
order by dated desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:47:09.840

```
 $date = "select CAST(post_date AS DATE) AS dated
          from wp_hdflvvideoshare
          group by dated
          order by dated DESC"; 
```

# c# - 在中继器中使用 jquery 禁用/隐藏所有链接按钮

> ID：13740718
> 
> 赞同：0
> 
> 时间：2012-12-06T09:38:58.233
> 
> 标签：c#, jquery, asp.net, repeater, linkbutton

我有一个中继器，每行都有一个链接按钮，代码如下：

```
<asp:Repeater ID="rpt_OutstandingBCsForClient" runat="server">
   <ItemTemplate>
        <div class="pay">
            <table>
                 <tr>
                     <td>
                      <div style="width: 230px;">
                <asp:Label ID="lbl_Len" runat="server" ></asp:Label>
                 </div>
                   </td>
                  <td align="left">
                  <div style="width: 80px;">
            <asp:LinkButton ID="lnkbtn_Remove" runat="server">Remove</asp:LinkButton>

            </div>
              </td>                            
               </tr>
           </table>
          </div>
        </ItemTemplate>
      </asp:Repeater> 
```

我想在单击按钮时禁用或隐藏 ID 为“lnkbtn_Remove”的所有链接按钮，所以我已经这样做了，但它仍然不起作用，如果在 var linkBut​​ton1 之后发出警报，我得到一个对象，但它不会禁用或隐藏链接按钮：

```
$("input[id$='btnP']").click(function (e) {
                var linkButton1 = $('[id*="lnkbtn_Remove"]'); 
                $.ajax({
                    type: "POST",
                    url: "MyPage.aspx/Take",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",

                    success: function (msg) {
                        if (msg.d.indexOf('https://') > -1) {

                            $('#lnkbtn_Remove').attr("disabled", true);
                        }
                        else {

                        }
                    }

                });

            e.preventDefault();
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:44:09.233

因为您`LinkButton`的 s 是服务器端控件，所以它们的客户端 ID 不会是`lnkbtn_Remove`but `somethingsomethingsomethinglnkbtn_Remove`。

因此，尝试`$('[id$="lnkbtn_Remove"]')`代替`$('#lnkbtn_Remove')`. `id$=`意思是“ID 以”结尾。

* * *

除了选择器问题外，您显然也无法禁用 a `LinkButton`，因此您需要`.remove()`或`.hide()`它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:04:35.800

OnbuttonClick 如果要禁用此按钮，则可以使用...

```
$('[id*=lnkbtn_Remove]').attr("disabled", true); 
```

或者如果你想隐藏它，那么你可以使用

```
$("#lnkbtn_Remove").hide(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T09:58:30.770

尝试为您的按钮设置 CSS 类，例如“linkBut​​tonRemove”，这样转发器中的所有链接按钮都将具有相同的类。我认为这比在这里使用 ID 更好...

然后在 jquery 中尝试隐藏找到的元素：

```
 $('.linkButtonRemove').hide(); 
```

或通过添加 css 样式

```
 $('.linkButtonRemove').css('display', 'none'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T09:43:34.337

asp.net 将为每个链接按钮更改您的 id。使用通配符。

改变

```
$('#lnkbtn_Remove').attr("disabled", true); 
```

至

```
$('[id*=lnkbtn_Remove]').attr("disabled", true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T10:00:35.390

```
$('#lnkbtn_Remove').click(function(){return false;}) 
```

# java - JAVA中从UTF8到BIG5的中文稀有字符映射

> ID：13740719
> 
> 赞同：1
> 
> 时间：2012-12-06T09:39:02.387
> 
> 标签：java

> byte[] byteArr1 = {(byte)0x8E,(byte)0x62};

字节数组由 BIG5 中的稀有汉字字节组成。

> String out = new String(byteArr1, "ISO-8859-1");

在这里，我通过将其编码转换为 ISO-8859-1 来将字节分配给我的字符串变量。但是在分配我的十六进制值后，从（8E 62）变为（3F 62）。因此我的输出字符串发生了变化。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:46:12.337

你看过[这里](http://docs.oracle.com/javase/1.5.0/docs/guide/intl/encoding.doc.html)吗？

创建 String 时提供的编码必须是底层字节数组的编码。您总是在从某种东西转换为 Unicode。在你的情况下，你应该尝试`"Big5"`而不是`"ISO-8859-1"`

Java 字符串始终是 unicode（字符串类是 UTF-16），因此无需复制。

# mainframe - JCL 相当于 CEMT NEWCOPY

> ID：13740721
> 
> 赞同：0
> 
> 时间：2012-12-06T09:39:04.820
> 
> 标签：mainframe, cics

我在 CEMT/CICS 中寻找与 NEWCOPY 方法等效的 JCL：

```
CEMT SET PROG(xxxx) NEWCOPY 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:19:04.037

如果您对 NealB 问题的回答是“是”，那么这里有一些选项。

1.  通过操作员命令调用 CEMT。一种方法是 [批量运行 SDSF](https://www.ibm.com/docs/en/zos/2.4.0?topic=guide-using-sdsf-in-batch)，另一种方法是使用[TSO CONSOLE](https://www.ibm.com/docs/en/zos/2.4.0?topic=syntax-console-command)命令。请注意，这需要授权。
2.  用您喜欢的编程语言编写程序并调用 CICS 系统编程 API [SET PROGRAM](https://www.ibm.com/docs/en/cics-ts/5.6?topic=sc-set-program)。然后编写另一个程序，以批处理方式执行，该程序使用外部 CICS 接口 (EXCI) 来调用执行 SET PROGRAM 的 CICS 程序。
3.  有第三方工具可以做你想做的事，DADS PLUS 就是其中之一。我们使用我们的变革管理系统中内置的设施，来自 Serena 的 Change Man。可能还有其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:53:01.453

您可以使用 JCL`COMMAND`将 COMMAND 嵌入到您的作业流中：

```
//CMD1 COMMAND 'F CICSRGN1, CEMT SET PROG(xxx) NEWCOPY' 
```

我不确定语法，但这正是您从操作员终端使用的语法。

# google-app-engine - 应用引擎数据存储事务异常

> ID：13740724
> 
> 赞同：0
> 
> 时间：2012-12-06T09:39:08.843
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

在应用引擎[交易文档](https://developers.google.com/appengine/docs/python/datastore/transactions)中，我发现了以下注释：

> 注意：如果您的应用在提交事务时收到异常，并不总是意味着事务失败。在事务已提交并最终将成功应用的情况下，您可能会收到 Timeout、TransactionFailedError 或 InternalError 异常。尽可能使您的数据存储事务具有幂等性，这样如果您重复事务，最终结果将是相同的。

这是相当笼统的信息，我无法找到更多详细信息。关于这个问题，我有以下问题：

1.  它会影响 NDB 交易吗？[NDB文档](https://developers.google.com/appengine/docs/python/ndb/transactions)没有提到它，但我认为这种行为是继承的
2.  什么会导致这种情况？
3.  它多久会发生一次？
4.  我可以阻止它，还是降低概率？
5.  在这种情况下，事务性任务是否排队？
6.  这种情况是将来会修复的错误，还是我应该习惯的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:32:54.947

是的，它也会影响 ndb。

潜在原因包括数据存储服务器成功提交但无法将结果传达给应用程序的网络分区。

这是罕见的，但无法预防，也永远无法修复。它是所有分布式系统所固有的。

任务队列添加由数据存储服务器与事务一起提交。

# windows - createobject(shell.application) 引发异常“库未注册”

> ID：13740728
> 
> 赞同：1
> 
> 时间：2012-12-06T09:39:24.697
> 
> 标签：windows, dll, dllregistration

这条线

```
createobject( shell.application ) 
```

在 Win7 PC 上引发此异常**“库未注册”**

似乎 a`dll`丢失或未注册。

1°) 哪个`dll`没有注册？2°）我该如何解决这个问题？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:47:19.733

由于[MSDN](http://msdn.microsoft.com/de-de/library/windows/desktop/bb774063%28v=vs.85%29.aspx)页面显示其 Shell32.dll 您可以通过 regsvr32 thedll.dll 通过 cmd.exe 注册 dll

# typescript - var 声明隐藏模块内的接口

> ID：13740729
> 
> 赞同：2
> 
> 时间：2012-12-06T09:39:25.493
> 
> 标签：typescript

以下代码

```
interface Foo {
}
declare var Foo: {
    new() : Foo;
}

module Bar {
    export interface Baz {
    }
    export declare var Baz: {
        new() : Baz;
    }
}

function f(p:Foo) {
}

//function b(p:Bar.Baz) {
//} 
```

编译得很好，但是如果我在最后两行注释 tsc.exe 会生成“预期类型”-错误似乎在作用域内声明 var 会隐藏接口声明。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:34:12.630

我想我理解你想要做什么，但可能是错的。

这是一个创建类似于示例中的声明的示例：

```
interface Foo {
}

declare var Foo: {
    new() : Foo;
}

declare module Bar {
    export interface Baz {
    }
    export class Baz {
        new() : Baz;
    }
}

function f(p:Foo) {
}

function b(p:Bar.Baz) {
} 
```

我不建议在声明之外执行此操作 - 这就是我将模块转换为声明的原因。

# sql - <> 和 != 之间的区别

> ID：13740732
> 
> 赞同：16
> 
> 时间：2012-12-06T09:39:27.050
> 
> 标签：sql, sql-server, oracle

> **可能重复：**
> [Oracle <> 、 != 、 ^= 运算符](https://stackoverflow.com/questions/12003127/oracle-operators)

在sql中， 和 有什么区别`<>`，`!=`我们可以将两者用于“ `NOt Equal to`”。

它们之间有什么区别吗？
前任。

```
select * from student where no != 2; 
```

&

```
select * from student where no <> 2; 
```

使用一个 insted 有什么好处吗？

`!=`没有成为ISO标准的主要因素是什么

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-06T09:42:26.610

**对于 SQL Server：**

他们是一样的。两者都是两个***Not Equal To***运算符。但`!=`不是 ISO 标准，引用自[**比较运算符**](http://msdn.microsoft.com/en-us/library/ms188074.aspx)：

> <>（不等于）不等于
> 
> !=（不等于）不等于（非 ISO 标准）

# ios - 具有可变高度的 UIScrollView

> ID：13740738
> 
> 赞同：1
> 
> 时间：2012-12-06T09:39:43.047
> 
> 标签：ios, uiview, uiscrollview, uitextview

我有一个带有 UIView 作为子视图的滚动视图，它又具有许多子视图，其中一个是具有可变高度的 textView。这是视图的层次结构：

```
-UIScrollView
   - UIView
       -UITextView with variable height
       -UImages 
```

是否可以根据内容的长度动态改变 UIView 的高度，最后是滚动视图的高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:44:50.713

当用户编辑您的`UITextView`字段时，获取其边界高度并重新计算可滚动视图的整体大小，然后设置`UIScrollView`的`contentSize`属性。

您可以`UITextView`通过其`UITextViewDelegate` `textViewDidEndEditing:`方法检测对象的编辑结束。

# c# - 从 Web 服务返回实体列表

> ID：13740742
> 
> 赞同：1
> 
> 时间：2012-12-06T09:39:55.073
> 
> 标签：c#, .net, wcf, entity-framework, edmx

我为我的模型使用实体框架（edmx 文件），并且我正在使用 WCF 来访问我的模型。当尝试返回实体数据模型（示例表对象）的列表时，我得到一个错误：

> 服务器没有提供有意义的回复；这可能是由于合同不匹配、会话过早关闭或内部服务器错误造成的。

这是我的 WCF 代码。IService.cs：

```
[ServiceContract(CallbackContract = typeof(IPesananCallBack), SessionMode = SessionMode.Required)]
public interface IPelayanWebService
{
   [OperationContract]
   List<table> GetAllTables();
} 
```

服务.cs：

```
public List<table> GetAllTables()
{
    TableModel model = new TableModel();
    return model.GetAllTables();
} 
```

我在模型中的代码：

```
public List<table> GetAllTables()
{
    using (restoicdbEntities ent = new restoicdbEntities())
    {
        return ent.table.ToList();
    }
} 
```

在我的客户中，我只是调用了该函数，然后发生了错误。我必须创建自己的数据合同吗？无论如何可以从 edmx 生成数据合同吗？

**更新：** 这是从实体框架生成的代码：

```
[EdmEntityTypeAttribute(NamespaceName="restoicdbModel", Name="table")]
[Serializable]
[DataContractAttribute(IsReference=true)]
public partial class table: EntityObject
{
    [EdmScalarPropertyAttribute(EntityKeyProperty=true, IsNullable=false)]
    [DataMemberAttribute()]
    public global::System.Int32 ID_TABLE
    {
        get
        {
            return _ID_TABLE;
        }
        set
        {
            if (_ID_TABLE != value)
            {
                OnID_TABLEChanging(value);
                ReportPropertyChanging("ID_TABLE");
                ID_TABLE = StructuralObject.SetValidValue(value);
                ReportPropertyChanged("ID_TABLE");
                OnID_TABLEChanged();
            }
        }
    }
    private global::System.Int32 ID_TABLE;
    partial void OnID_TABLEChanging(global::System.Int32 value);
    partial void OnID_TABLEChanged();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T14:28:17.160

在阅读了 Steve Wilkes, [WCF, Entity Framework & Data Contracts](https://stackoverflow.com/questions/1121877/wcf-entity-framework-data-contracts)提供的链接之后，从 Web 服务传递实体对象看起来并不好。所以我必须创建自己的数据传输对象，它是实体对象的映射，然后从 Web 服务传递它。

# php - php的同步锁定文本字段

> ID：13740743
> 
> 赞同：0
> 
> 时间：2012-12-06T09:39:55.427
> 
> 标签：php, html

当一个用户在一个文本字段中输入时如何锁定文本字段？意味着当 1 个用户在文本字段中键入时，其他用户无法在该特定文本字段中键入。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:44:21.677

根据我的理解，您需要使用 JavaScript 不断轮询服务器以获取更改。当用户开始输入时，他将通过 Ajax 通知服务器。服务器会将新状态保存到数据库中，当其余用户轮询更改时，服务器会告诉他们用户 X 正在编辑字段 Y，并使用 JavaScript 锁定字段。

请注意，此方法不应用于关键安全功能！用户可以轻松绕过使用 JavaScript 制作的任何内容，或者通常在客户端上制作的任何内容。您也应该在服务器端进行验证，并且不要接受已经输入的字段的输入。

# javascript - 播放视频按钮

> ID：13740749
> 
> 赞同：0
> 
> 时间：2012-12-06T09:40:34.913
> 
> 标签：javascript

我想触发视频的播放功能。. 你能推荐 javasript 功能来播放这个视频吗？

jsfiddle 代码在[这里](http://jsfiddle.net/umeshpatil86/X3fcA/2/)给出。要播放视频，我需要右键单击视频，然后单击 flashplayer 的播放功能。我在 html 中有以下视频代码：

```
<div class="content flowplayer is-splash is-closeable" id="vid1">
    <video src="http://www.w3schools.com/html/movie.webm" tabindex="0">    
    <source type="video/mp4" src="http://www.w3schools.com/html/movie.mp4"></source>
    <source type="video/webm" src="http://www.w3schools.com/html/movie.webm"></source>
</video>    
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:53:54.817

我已经更新了你的代码。[它现在正在工作。](http://jsfiddle.net/oamiamgod/X3fcA/3/)

你必须得到元素的标签ID `video`，然后说`.play()`

更多示例[在这里](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_video_js_prop)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:43:43.430

获取对视频元素的引用（例如，通过给它一个 id 然后使用`document.getElementById`），然后调用它[的`play()`方法](http://www.w3.org/TR/html5/media-elements.html#dom-media-play)。

# ruby-on-rails-3 - 使用 https 请求显示 Amazon s3 图像

> ID：13740752
> 
> 赞同：0
> 
> 时间：2012-12-06T09:40:40.967
> 
> 标签：ruby-on-rails-3, image, amazon-s3

我有一个从亚马逊 s3 存储桶“动态”获取的图像，这里是源示例：src = [http://s3.amazonaws.com/kidslink_assets/logos/5082f5d279216d14d000001e/original.png?1350759890](http://s3.amazonaws.com/kidslink_assets/logos/5082f5d279216d14d000001e/original.png?1350759890)

我需要这是一个 http*s* (https) 请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:57:20.143

如果我理解 S3 术语，则 S3 响应始终用作 https 。我尝试使用 http 访问您的图像，默认重定向到 https (https://s3.amazonaws.com/kidslink_assets/logos/5082f5d279216d14d000001e/original.png?1350759890)

所以你不必担心 https/ssl。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T11:01:34.430

As client needs to see it as https request, i added manually when the page is rendering the image. I means added "s" manually for the link before rendering the page as http and https are doing the same.

# jfreechart - JFReeCharts XYPlot 是否可以更改图例中的形状

> ID：13740756
> 
> 赞同：0
> 
> 时间：2012-12-06T09:40:53.900
> 
> 标签：jfreechart

```
lt.setPosition(RectangleEdge.BOTTOM);
lt.setItemFont(old);
// get the range axis and add the $ symbol for the values
NumberAxis na = (NumberAxis) plot.getRangeAxis();       
// set font
na.setLabelFont(fAxisFont); 
na.setTickLabelFont(fAxisFont);
na.setAutoRange(true); 
```

以上是我的代码片段。任何人都可以告诉如何改变传说中的形状

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:31:05.507

我正在使用以下解决方法：

```
StandardXYItemRenderer renderer = new StandardXYItemRenderer() {
    private static final long serialVersionUID = 0L;

    @Override
    public LegendItem getLegendItem(int datasetIndex, int series) {
        LegendItem legend = super.getLegendItem(datasetIndex,
                series);
        return new LegendItem(legend.getLabel(),
                legend.getDescription(), legend.getToolTipText(),
                legend.getURLText(), Plot.DEFAULT_LEGEND_ITEM_BOX,
                legend.getFillPaint());
    }
};

...

plot.setRenderer(renderer); 
```

结果： ![在此处输入图像描述](../Images/4940fdcebd4c4406537e1e7f27fe2df2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:54:22.167

A从相应的系列中`LegendItem`推断出它`Shape`，可以按[此处](https://stackoverflow.com/a/6669529/230513)所示进行更改。此[相关](https://stackoverflow.com/a/13309587/230513)`LegendItem`示例显示了在外部组件中呈现 a 的一种方法。

![图片](../Images/d60d8afb204de6b13c3eb30891f4d241.png)

# objective-c - 从动态单元格中的文本字段获取数据时出现问题

> ID：13740757
> 
> 赞同：0
> 
> 时间：2012-12-06T09:40:53.663
> 
> 标签：objective-c, ios, xcode, uitableview

我创建了一个动态表，但是当我尝试访问第一个单元格中文本字段的内容时遇到了问题。我得到的文本字段总是空的，即使我在调用操作之前在其中输入了一些文本。

这是我的代码。你能帮我找出其中的问题吗？

自定义名称单元格.h

```
@interface CustomNameCell : UITableViewCell
    @property (retain, nonatomic) IBOutlet UITextField *nameTextField;
@end 
```

自定义视图控制器.h

```
@interface CustomViewController : UITableViewController
    @property (retain, nonatomic) IBOutlet UITableView *tableview;
    - (IBAction)search:(id)sender;
@end 
```

自定义视图控制器.m：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row == 1) {
        static NSString *CellIdentifier = @"nameCell";
        CustomNameCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell==nil) {
            cell = [[CustomNameCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }
        return cell;
    }
    ... 
```

以及单击按钮时的操作，我尝试在其中获取文本字段的内容：

```
- (IBAction)search:(id)sender {

static NSString *CellIdentifier = @"nameCell";
CustomNameCell *nameCell = [_tableview dequeueReusableCellWithIdentifier:CellIdentifier];

here nameCell.nameTextField.text is always equal to @"" 
```

为什么我的文本字段总是空的？

谢谢您的帮助 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:06:42.357

如果你需要一个单元格，你应该像这样得到它：

```
CustomNameCell * cell = (CustomNameCell *)[tableview cellForRowAtIndexPath:indexPath];
NSString * textInField = cell.nameTextField.text; 
```

如果你告诉我你需要什么逻辑，我会扩展我的问题。现在 - 你可以使用这个方法。

第一个单元格的内容将是：

```
CustomNameCell * cell = (CustomNameCell *)[tableview cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
NSString * textInField = cell.nameTextField.text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:12:58.297

您不应该`[_tableview dequeueReusableCellWithIdentifier:CellIdentifier];`在您的内部调用 -`(IBAction)search:(id)sender`因为它是一种在创建 tableView 期间重用单元格的机制。当您滚动表格视图时，您不是在创建新单元格，而是在重用您之前创建的一些单元格。

**底线：**改用`cellForRowAtIndexPath`来访问您部分中特定行的单元格，如果您想要第一部分的第一个单元格，它将是：

```
CustomNameCell * cell = (CustomNameCell *)[tableview cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-07T09:33:28.030

我只是这样做。我不知道这是当前的方法。

```
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return cellContentArray.count;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellId=@"cell";
    UITableViewCell *cell=[tableView dequeueReusableCellWithIdentifier:cellId forIndexPath:indexPath];
    if (cell==nil) {
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellId];
    }
    UITextField *firsttext=[cell viewWithTag:101];
    UITextField *second=[cell viewWithTag:102];
    [second setTag:(indexPath.row)+1000];
    [firsttext setTag:(indexPath.row)+100];
    return cell;
}
- (IBAction)buttonPressed:(id)sender 
{
    for (int i=0; i<cellContentArray.count; i++) {
        UITableViewCell * cell = (UITableViewCell *)[baseTableveiew cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
        UITextField *tempTextField=[cell viewWithTag:i+100];
        UITextField *secondTextField=[cell  viewWithTag:i+1000];
        NSString * textInField = tempTextField.text;
        NSLog(@"tempTExtTiedl tag %ld data %@",(long)tempTextField.tag, textInField);
        NSLog(@"second tag %ld data %@",(long)secondTextField.tag, secondTextField.text);
    }

} 
```

# c# - 如何在 WindowsPhone 7 应用程序上更改 webbrowser 的显示屏幕

> ID：13740772
> 
> 赞同：0
> 
> 时间：2012-12-06T09:41:50.823
> 
> 标签：c#, windows-phone-7, webbrowser-control

我正在制作一个关于显示最新目标的应用程序。在那个应用程序中，我正在使用 webbrowser-control。我想专门显示我的 url 链接。例如，我想显示页面的 100 像素高度和 100 像素宽度。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:03:24.300

在您的页面中，使用以下属性调用 webbrowser 控件

```
<phone:WebBrowser x:Name="webBrowser" Height="100" Width="100"/> 
```

# haskell - 如何正确限定类型以使用（转换后的）ST 和随机单子

> ID：13740774
> 
> 赞同：1
> 
> 时间：2012-12-06T09:41:59.767
> 
> 标签：haskell, monads, monad-transformers

这是我的代码：

```
...

import System.Random ( RandomGen, next, split )
import qualified Data.Array.MArray as MAI
import Data.Array.ST.Safe( STUArray )
import Control.Monad.ST.Safe(ST)
import qualified Control.Monad.Random as CMR
import Control.Monad.Trans.Class( lift )

data GraphEdgeYaml = GraphEdgeYaml { 
    specie1:: NodeName,
    specie2 :: NodeName,
    sign :: Int,
    speed :: Int
}

type LinksSTA s = STUArray s Int GraphEdgeYaml

-- Change a simple link 
swapLink :: RandomGen g => 
    LinksSTA s
    -> g
    -> ST s g
swapLink graph generator = 
   let
      swap_op :: CMR.RandT g (ST s) ()
      swap_op = do 
          (low_limit, high_limit) <- lift $ MAI.getBounds graph
          idx_value <- CMR.getRandomR (low_limit, high_limit)
          return ()
   in do
      (_, new_generator) <- CMR.runRandT  swap_op generator
      return new_generator 
```

这是我收到的错误消息：

```
hs/SignMatrixBuild/Randomize.hs:43:26:
    Could not deduce (RandomGen g1)
      arising from a use of `CMR.getRandomR'
    from the context (RandomGen g)
      bound by the type signature for
                 swapLink :: RandomGen g => LinksSTA s -> g -> ST s g
      at hs/SignMatrixBuild/Randomize.hs:(38,1)-(47,28)
    Possible fix:
      add (RandomGen g1) to the context of
        the type signature for swap_op :: CMR.RandT g1 (ST s1) ()
        or the type signature for
             swapLink :: RandomGen g => LinksSTA s -> g -> ST s g
    In a stmt of a 'do' block:
      idx_value <- CMR.getRandomR (low_limit, high_limit)
    In the expression:
      do { (low_limit, high_limit) <- lift $ MAI.getBounds graph;
           idx_value <- CMR.getRandomR (low_limit, high_limit);
           return () }
    In an equation for `swap_op':
        swap_op
          = do { (low_limit, high_limit) <- lift $ MAI.getBounds graph;
                 idx_value <- CMR.getRandomR (low_limit, high_limit);
                 return () } 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T11:24:18.320

修复它的一种方法是使用扩展将类型变量带入范围`s`，另一种方法是简单地省略.`g``ScopedTypeVariables``swap_op`

如果省略了本地签名，则可以推断出类型——然而，这留下了约束的问题

```
MAI.MArray (STUArray s) GraphEdgeYaml (ST s) 
```

这是需要的。有两种选择，

*   将数组类型更改为`STArray`
*   `STUArray`确实使用s

如果将数组类型更改为`STArray`，则不需要约束（因为存在`instance MArray (STArray s) e (ST s)`涵盖所有元素类型的 ），并且没有本地类型签名，它可以毫无问题地编译。

如果要保留`STUArray`s，则该函数只能在实例在范围内的情况下使用。通常，最好在定义类的位置（此处不是选项）或定义类型的位置（即此模块）提供此类实例。

那么你应该写一个

```
instance MAI.MArray (STUArray s) GraphEdgeYaml (ST s) 
```

在该模块中，通过该实例，将满足约束并且无需将其置于函数上。但是请注意，编写这样的实例并非易事。

或者，您可以将约束添加到签名中，并减轻为`swapLink`.

我不知道 a`NodeName`是什么，但是否`GraphEdgeYaml`是不可装箱的类型似乎值得怀疑。因此，我建议切换到`STArray`s。

# .htaccess - 重写源代码中的url

> ID：13740775
> 
> 赞同：0
> 
> 时间：2012-12-06T09:42:01.043
> 
> 标签：.htaccess

例如我有一个文件 php，index.php，内容如下：

```
<ul>
    <li><a href="menu.php">Menu</a></li>
    <li><a href="howitwork.php">How it work</a></li>
</ul> 
```

我写了 .htaccess 如下：

```
RewriteEngine On
RewriteRule ^menu/?$ menu.php
RewriteRule ^how-it-work/?$ howitwork.php 
```

但是如果我输入 localhost/menu 或 localhost/how-it-work 就可以了，但是我想查看 Menu 下的链接以及它是如何工作的也被写入 /menu 和 /how-it-work，目前它仍然是 menu.php和 howitwork.php

另一个问题，如果我有文件 product.php?action=view&id=123，我如何使用 htaccess 将其更改为此 localhost/product/123-name-of-topic/

我在 localhost 上进行编码和测试，然后再让它生效。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:01:53.237

如果我理解正确，这里有一个例子：

**修改的**

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^.*howitwork.*$
RewriteRule .* http://mydomain.com/how-it-work  [L,R=301]

RewriteCond %{REQUEST_URI} ^.*menu.*$
RewriteRule .* http://mydomain.com/menu  [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:55:18.327

对不起，我首先无法理解你的问题，

最后一个问题可以通过在表单中​​使用 post 方法而不是 get 来解决，

```
<form action="home.php" method="post">
....
....
</form> 
```

希望这可以帮助。

# apache - BIRT 报告与 Web 服务数据源引发异常无法打开连接。org.eclipse.datatools.connectivity.oda.OdaException

> ID：13740777
> 
> 赞同：3
> 
> 时间：2012-12-06T09:42:05.507
> 
> 标签：apache, tomcat, birt

我正在尝试将 Web 服务用作 BIRT 报告的数据源。报告在 Eclipse 中运行良好，但从部署在 tomcat 中的 webviewer 中却没有。

BIRT 版本：4.2.1 Tomcat：6

下面是我得到的例外。

```
Dec 6, 2012 3:00:01 PM org.eclipse.birt.data.engine.odaconsumer.ConnectionManager openConnection
SEVERE: Unable to open connection.
org.eclipse.datatools.connectivity.oda.OdaException
    at org.eclipse.datatools.enablement.oda.ws.impl.Connection.open(Connection.java:81)
    at org.eclipse.datatools.connectivity.oda.consumer.helper.OdaConnection.open(OdaConnection.java:250)
    at org.eclipse.birt.data.engine.odaconsumer.ConnectionManager.openConnection(ConnectionManager.java:165)
    at org.eclipse.birt.data.engine.executor.DataSource.newConnection(DataSource.java:224)
    at org.eclipse.birt.data.engine.executor.DataSource.open(DataSource.java:212)
    at org.eclipse.birt.data.engine.impl.DataSourceRuntime.openOdiDataSource(DataSourceRuntime.java:217)
    at org.eclipse.birt.data.engine.impl.QueryExecutor.openDataSource(QueryExecutor.java:407)
    at org.eclipse.birt.data.engine.impl.QueryExecutor.prepareExecution(QueryExecutor.java:317) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T14:54:59.343

堆栈跟踪中是否有“原因：”？

作为一个疯狂的猜测，这是一个网络/防火墙问题。我假设他的 Tomcat 服务器运行在与 Eclipse IDE 不同的机器上和/或使用不同的操作系统帐户。

# iphone - 在ios6中绘制PDF时如何在右侧设置对齐？

> ID：13740790
> 
> 赞同：0
> 
> 时间：2012-12-06T09:42:45.417
> 
> 标签：iphone, objective-c, ios6

任何人都可以知道我在绘制 PDF 时如何在右侧设置对齐方式。

我的代码如下所示，我想将 textField(text1.text ,text2.text,text3.text) 值设置为文本对齐方式

```
- (void) drawHeader
{
    CGContextRef    currentContext = UIGraphicsGetCurrentContext();
    CGContextSetRGBFillColor(currentContext, 0.0, 0.0, 0.0, 1.0);

         NSString *textToDraw =[NSString stringWithFormat:@"\t\t \t\t\t\t\t\t\t\t\t\t\t\t Display Device (# rooms: Good   %@   /Better   %@   /Best   %@   ) \n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$500-----------------------------------------------------------------$5,000   \n \n \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$5,000--------------------------------------------------------------$50,000 \n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$50,000------------------------------------------------------------$200,000  \n  \n   \t\t\t\t\t\t\t\t\t\t\t\t\ \t\t\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\ \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ \t\t\t\t\t\t\t\t\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\ \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\Display Devices Total:\t\t %@ ",text1.text ,text2.text,text3.text,allDiaplayDeviceAll.text] ;

    UIFont *font = [UIFont boldSystemFontOfSize:16.0f];

    CGSize stringSize = [textToDraw sizeWithFont:font constrainedToSize:CGSizeMake(pageSize.width - 2*kBorderInset-2*kMarginInset, pageSize.height - 2*kBorderInset - 2*kMarginInset) lineBreakMode:UILineBreakModeWordWrap];

CGRect renderingRect = CGRectMake(kBorderInset + kMarginInset, kBorderInset + kMarginInset, pageSize.width - 2*kBorderInset - 2*kMarginInset, stringSize.height);

    [textToDraw drawInRect:renderingRect withFont:font lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:49:20.060

您是否尝试过指定`UITextAlignmentRight`：

```
[textToDraw drawInRect:renderingRect withFont:font lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentRight]; 
```

实际上，对于 iOS6（如果您不是针对 iOS5），正确的常量是`NSTextAlignmentRight`(`UITextAlignmentRight`已被弃用，但它仍然有效)。

# perl - perl 保存 lwp 下载的文件

> ID：13740791
> 
> 赞同：10
> 
> 时间：2012-12-06T09:42:50.470
> 
> 标签：perl, save, download, lwp

我使用 LWP 下载可执行文件类型并在内存中响应，我能够散列文件。但是，如何将这个文件保存在我的系统上？我认为我在下面的尝试中走错了路。下载成功，因为我能够正确生成哈希（我通过下载实际文件并比较哈希进行了仔细检查）。

```
use strict;
use warnings;
use LWP::Useragent;
use Digest::MD5    qw( md5_hex );
use Digest::MD5::File qw( file_md5_hex );
use File::Fetch;

my $url = 'http://www.karenware.com/progs/pthasher-setup.exe';
my $filename = $url;
$filename =~ m/.*\/(.*)$/;
$filename = $1;
my $dir ='/download/two';
print "$filename\n";

my $ua = LWP::UserAgent->new();
my $response = $ua->get($url);
die $response->status_line if !$response->is_success;
my $file = $response->decoded_content( charset => 'none' );
my $md5_hex = md5_hex($file);
print "$md5_hex\n";
my $save = "Downloaded/$filename";
    unless(open SAVE, '>>'.$save) {
        die "\nCannot create save file '$save'\n";
    }
    print SAVE $file;
    close SAVE; 
```

如果您想知道为什么我不下载所有内容然后解析每个文件和哈希的文件夹，这是因为我在循环中下载所有这些文件。在每个循环中，我将相关的源 URL（找到该文件的位置）连同文件名和哈希一起上传到数据库中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T09:49:35.937

尝试`getstore()`从`LWP::Simple`

```
use strict;
use warnings;
use LWP::Simple qw(getstore);
use LWP::UserAgent;
use Digest::MD5    qw( md5_hex );
use Digest::MD5::File qw( file_md5_hex );
use File::Fetch;

my $url = 'http://www.karenware.com/progs/pthasher-setup.exe';
my $filename = $url;
$filename =~ m/.*\/(.*)$/;
$filename = $1;
my $dir ='/download/two';
print "$filename\n";

my $ua = LWP::UserAgent->new();
my $response = $ua->get($url);
die $response->status_line if !$response->is_success;
my $file = $response->decoded_content( charset => 'none' );
my $md5_hex = md5_hex($file);
print "$md5_hex\n";
my $save = "Downloaded/$filename";
getstore($url,$save); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-06T21:48:12.980

getstore 是一个很好的解决方案，但是对于其他在稍微不同的设置中阅读此响应的人来说，它可能无法解决问题。

首先，您很可能只是遇到了二进制/文本问题。

我会改变

```
my $save = "Downloaded/$filename";
unless(open SAVE, '>>'.$save) {
    die "\nCannot create save file '$save'\n";
}
print SAVE $file;
close SAVE; 
```

到

```
my $save = "Downloaded/$filename";
open my $fh, '>>', $save or die "\nCannot create save file '$save' because $!\n";
# on platforms where this matters
# (like Windows) this is needed for 
# 'binary' files:
binmode $fh;
print $fh $file;
close $fh; 
```

我更喜欢这个的原因是，如果您在浏览器对象 ($ua) 上设置或获取了一些设置，它们会在 LWP::Simple 的 getstore 中被忽略，因为它使用自己的浏览器。

此外，它使用了 open 的三参数版本，应该更安全。

另一种解决方案是在下载文件时使用回调方法并存储文件，例如，如果您正在处理一个大文件。必须更改散列算法，因此这里可能不相关，但这里有一个示例：

```
my $req = HTTP::Request->new(GET => $uri);
open(my $fh, '>', $filename) or die "Could not write to '$filename': $!";
binmode $fh;
$res = $ua->request($req, sub {
    my ($data, $response, $protocol) = @_;
    print $fh $data;
});
close $fh; 
```

如果大小不重要（并且散列是通过其他方式完成的），您可以让您的浏览器直接存储它：

```
my $req = HTTP::Request->new(GET => $uri);
$res = $ua->request($req, $filename); 
```

# jquery - 鼠标离开后淡出然后单击 jQuery

> ID：13740793
> 
> 赞同：-1
> 
> 时间：2012-12-06T09:42:51.853
> 
> 标签：jquery, click, mouseleave, fadeout

我有一些`DIV`通过单击另一个 DIV 触发元素淡入。我想不出一个脚本来：

*   鼠标离开然后点击外部-**淡出**`DIV`

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:22:25.417

如果我理解正确，这就是你想要的：

```
$(document).ready(function(){

  var button = $("#div1");
  var container = $("#div2");    

  button.on('click', function(){

       container.fadeIn();

  });      

  $(document).mouseup(function (e){

        // check if click target is element or one of its children
        if (!container.is(e.target) && container.find(e.target).length == 0){

            container.fadeOut();

        }
  });

}); 
```

这是小提琴：http: [//jsfiddle.net/neQuK/](http://jsfiddle.net/neQuK/)

# c++ - CreateFile 打开在另一个终端会话中创建的 MS-DOS 设备

> ID：13740794
> 
> 赞同：4
> 
> 时间：2012-12-06T09:42:54.103
> 
> 标签：c++, c, winapi, kernel, driver

我有一个应该与用户模式组件通信的（某种过滤器）驱动程序。它通过调用 创建一个设备对象`IoCreateDevice`，然后通过 为它创建一个所谓的 MS-DOS 符号链接，以便可以从用户模式代码（通过）`IoCreateSymbolicLink`访问它。`CreateFile`这或多或少是一种标准技术。驱动程序创建一个形式为 的符号链接`\DosDevices\mydevicename`，而用户模式代码打开一个名为`\\.\mydevicename`.

现在，当驱动程序在终端服务器会话的上下文中创建设备时，问题就开始了。创建的符号链接实际上属于*本地会话目录*，而我的用户模式服务在“零会话”的系统帐户下运行，它“看到”属于*全局目录*的符号链接。

在文档中提到通常没有问题，因为驱动程序大多在`DriverEntry`或`AddDevice`函数的上下文中创建设备对象，这些设备对象保证在系统帐户下运行。但我的情况不同。而且我不想改变这一点，我真正需要的是能够在属于任何会话的任意线程的上下文中创建/销毁设备对象。

根据文档，有一种方法可以解决这个问题。驱动程序可能会坚持创建一个属于*全局目录*的符号链接，方法是这样命名：`\DosDevices\Global\mydevicename`. 此外，如果用户模式代码恰好在某个帐户下运行，它也可能会坚持在*全局目录*中查找链接，将文件命名为：`\\.\Global\mydevicename`. 虽然这通常不是必需的，但如果该符号在本地目录中不存在，则会在全局目录中自动检查。

我试过这个技巧：它对我不起作用。我使用的是 64 位的 Windows 2008R2。至今没有成功。我始终能够打开在系统帐户中创建的设备，但无法打开在另一个会话中创建的设备（错误代码是“找不到文件”）。我已经尝试了`\Global`在内核/用户模式下指定的所有组合和变体 - 到目前为止结果是相同的。

这让我怀疑还有一层符号隔离。也许 using`\Global`创建了一个全局会话范围的符号链接，但仍然不是系统范围的。

这有意义吗？有没有办法创建系统范围的符号链接？或者有没有办法打开一个符号链接属于另一个会话的文件？

**编辑**：

感谢@Hans Passant。我已经尝试过 WinObj 实用程序来实际查看驱动程序实际创建的设备和符号链接。

乍一看，一切似乎都很好。我看到我的所有设备都在`\Device`目录下，所有符号链接都在`\GLOBAL??`. 符号链接指向正确的设备名称。

然而有一件事很奇怪。尝试从 WinObj 中查看设备属性：对于在零会话中创建的设备，这可以正常工作，但对于在其他会话中创建的设备 WinObj 响应错误：

*   打开 \Device\mydevicename 时出错：系统找不到指定的文件。

因此，它会在其列表中显示此设备对象，但在尝试打开它时它“未找到”。很奇怪。但这解释了我的问题。但这真的很奇怪。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:03:11.133

有一条`\Sessions\N\DosDevices\`路径，其中 N 是会话号。我没有尝试过，但它应该可以工作。

我还注意到 subst 和网络驱动器映射在 中创建符号链接`\Sessions\0\DosDevices\ID\`，其中 ID 是会话 ID。因此，您也可以检查该路径。

# xml - 使用 LINQ 提取 XML 元素

> ID：13740795
> 
> 赞同：0
> 
> 时间：2012-12-06T09:42:54.997
> 
> 标签：xml, vb.net, linq, linq-to-xml

是否可以使用 LINQ 从父元素中提取子元素，例如：

XML

```
<?xml version="1.0"?>
<Names>
    <Harrison>
        <preName>Simon</preName>
        <preName>John</preName> 
    </Harrison>
    <Smith>
        <preName>Harvey</preName>
        <preName>Oscar</preName>
    </Smith>
</Names> 
```

VB.NET

```
private sub query()
    Dim file as string = "C:\SomexmlFile.xml"
    Dim query = From Names In File
                Where Names = Harrison
                Select preName

end sub 
```

这样的东西会起作用吗？是否有任何语法可以选择该子元素的所有 preNames，例如 MySql“Select * FROM file WHERE Name = Harrison”（我知道这不起作用，因为 MySql 不会查询 xml，但你明白我的意思）

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:10:49.887

当然：

```
Dim xml = <Names>
              <Harrison>
                  <preName>Simon</preName>
                  <preName>John</preName> 
              </Harrison>
              <Smith>
                  <preName>Harvey</preName>
                  <preName>Oscar</preName>
              </Smith>
          </Names>

Dim harrisons = from prename in xml.<Harrison>
                from name in prename.<preName>
                select name.Value 
```

`harrisons`现在包含`Simon`和`John`。

* * *

另一种方式：

```
xml.Elements.First(function(e) e.Name = "Harrison").Elements _
            .Select(function(h) h.Value) 
```

或简单地使用[XPath](http://msdn.microsoft.com/en-us/library/system.xml.xpath.extensions_methods.aspx)：

```
xml.XPathSelectElements("Harrison/preName").Select(Function(n) n.Value) 
```

# variables - 如何使用茄子工具传递变量

> ID：13740800
> 
> 赞同：0
> 
> 时间：2012-12-06T09:43:03.853
> 
> 标签：variables, eggplant

我正在阅读一张 Excel 表格中的文本。该文本被放入一个临时变量中。

现在我想将此临时变量用于另一个脚本。

茄子里有什么命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-24T01:32:37.327

在您的其他脚本（在此示例中名为 OtherScript）中，创建一个处理程序：

```
to HandlerName Variable1 //Starts the handler.
      //Insert your script commands here 
end HandlerName//Ends the handler. 
```

在您当前的脚本中，运行以下行以将您的临时变量传递给另一个脚本：

```
run OtherScript.HandlerName temp 
```

其中 temp 是您希望从读取 excel 表的当前脚本传递给其他脚本的变量。

# mysql - Delphi中的“where子句中的未知列”但不是MySQL

> ID：13740803
> 
> 赞同：2
> 
> 时间：2012-12-06T09:43:09.317
> 
> 标签：mysql, delphi, delphi-xe, dbexpress, dbx

我正准备把我的头发扯掉，以扔便便为生！

我有一个在 MySQL 中运行良好的 MySQL 查询

```
SELECT 
    p.ID AS DataID, 
    p.timestamp AS Timestamp, 
    sum(p.Value * v.Factor) AS Value,
    v.VirtualProfiles_id AS VProfileID 
FROM 
    profiledata p 
JOIN 
    profilevirtualjoin v 
ON 
    p.Profile_ID=v.Profile_ID 
WHERE 
    v.VirtualProfiles_id = 5
GROUP BY 
    v.Profile_ID, 
    p.timestamp 
```

但是当我尝试在 Delphi 的 SQLDataSet 中将其作为查询运行时

```
SQLDataSet2.Active := False;
SQLDataSet2.CommandText := 'SELECT p.ID AS DataID, p.timestamp AS Timestamp, sum(p.Value * v.Factor) AS Value,' +
   'v.VirtualProfiles_id AS VProfileID FROM profiledata p JOIN profilevirtualjoin v ON ' +
   'p.Profile_ID=v.Profile_ID WHERE v.VirtualProfiles_id = ' + InttoStr(5)
   +' GROUP BY v.Profile_ID, p.timestamp';
SQLDataSet2.Active := True; 
```

我收到一个错误

```
First chance exception at $765BC41F. Exception class TDBXError with message 'Unknown column 'v.VirtualProfiles_id' in 'where clause''. Process EMVS.exe (7556) 
```

如果有人能提供任何见解，我将不胜感激。

编辑：

我正在使用 MySQL 服务器 5.5 和 Delphi XE

我想做的是：

我有一个表格如下：

```
Profile:
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| ID          | int(11)      | NO   | PRI | NULL    | auto_increment |
| Designation | varchar(255) | YES  |     | NULL    |                |
| Description | text         | YES  |     | NULL    |                |
| UnitID      | int(11)      | NO   | PRI | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+

profiledata
+------------+----------+------+-----+---------+----------------+
| Field      | Type     | Null | Key | Default | Extra          |
+------------+----------+------+-----+---------+----------------+
| ID         | int(11)  | NO   | PRI | NULL    | auto_increment |
| TimeStamp  | datetime | YES  |     | NULL    |                |
| Value      | double   | YES  |     | NULL    |                |
| Profile_ID | int(11)  | NO   | PRI | NULL    |                |
+------------+----------+------+-----+---------+----------------+

Virtualprofiles
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| id          | int(11)      | NO   | PRI | NULL    | auto_increment |
| Designation | varchar(45)  | NO   |     | NULL    |                |
| Description | varchar(255) | YES  |     | NULL    |                |
| Unit_ID     | int(11)      | NO   | PRI | 0       |                |
+-------------+--------------+------+-----+---------+----------------+

profilevirtualjoin
+--------------------+---------+------+-----+---------+----------------+
| Field              | Type    | Null | Key | Default | Extra          |
+--------------------+---------+------+-----+---------+----------------+
| id                 | int(11) | NO   | PRI | NULL    | auto_increment |
| VirtualProfiles_id | int(11) | NO   | PRI | NULL    |                |
| Profile_ID         | int(11) | NO   | PRI | NULL    |                |
| Factor             | double  | NO   |     | 1       |                |
+--------------------+---------+------+-----+---------+----------------+ 
```

我需要做的是“生成”一个新的配置文件，它是一组现有配置文件的总和。因此，必须对 profiledata 表中的数据求和，其中 ProfileID 包含在 virtualprofile 中并且时间戳值相等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T07:39:08.483

## 问题

所以，问题是这样的。**Delphi XE**提供的 DBExpress 驱动程序只能处理动态 SQL 查询，不能处理 MySQL 查询。虽然 Dynamic SQL 与 MySQL 兼容，但反过来却不兼容。

引用 MySQL 手册（第 12.16.3 节）：

> 在标准 SQL 中，包含 GROUP BY 子句的查询不能引用选择列表中未在 GROUP BY 子句中命名的非聚合列。
> 
> MySQL 扩展了 GROUP BY 的使用，以便选择列表可以引用未在 GROUP BY 子句中命名的非聚合列。

**Delphi XE3 中**包含的更新的 DBExpress 驱动程序包括对 MySQL 代码的特定支持，因此此限制不适用。

## 解决方法

这个问题的解决方案是在 MySQL 服务器中创建一个视图，并仅使用动态 SQL 兼容代码从 Delphi 调用它。最后，以下解决方法成功了：

在 MySQL 中：

```
CREATE VIEW `VirtualProfileData` AS
SELECT 
    p.ID AS DataID, 
    p.timestamp AS Timestamp, 
    sum(p.Value * v.Factor) AS Value,
    v.VirtualProfiles_id AS VProfileID 
FROM 
    profiledata p 
JOIN 
    profilevirtualjoin v 
ON 
    p.Profile_ID=v.Profile_ID 
GROUP BY 
    v.Profile_ID, 
    p.timestamp 
```

然后在德尔福

```
SQLDataSet2.Active := False;
SQLDataSet2.CommandText := 'SELECT * FROM VirtualProfileData WHERE VProfileID = ' + InttoStr(5);
SQLDataSet2.Active := True; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T12:04:45.327

您在此处更改了列的名称：

```
v.VirtualProfiles_id AS VProfileID 
```

在那之后，在大多数情况下（涉及分组或聚合的情况除外），您需要通过新名称引用列。我认为这里就是这种情况。

尝试更改您的`WHERE`子句以改用别名：

```
WHERE v.VirtualProfiles_id = ' + InttoStr(5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T15:00:30.473

问题是Mysql类型和Delphi类型之间的兼容性尝试使用delphi的Basics Types

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-06T11:36:30.163

在我的情况下，从

```
SELECT * FROM table_name WHERE column_name = 'VALUE'; 
```

到

```
SELECT * FROM table_name WHERE column_name LIKE 'VALUE'; 
```

解决了问题并返回相同的结果。

我没有挖掘 dipper 来弄清楚发生了什么，但这是一个奇怪的错误，因为它适用于除特定列之外的所有其他列。

# c# - 引用的程序集版本更改时如何中断构建？

> ID：13740804
> 
> 赞同：0
> 
> 时间：2012-12-06T09:43:12.257
> 
> 标签：c#, visual-studio-2010, compiler-construction, msbuild, sitecore

我有一些 C# 修复了一个已在较新版本的 Sitecore CMS 中修复的问题。

我希望在我们升级到较新版本时删除该修复程序，但这可能是将来的某个时间，并且此修复程序的存在很容易被遗忘。

当引用的程序集版本更改（即高于 v6.5.x）时，是否可以中断构建或以其他方式引起对这部分代码的注意？围绕`#error`指令的条件可能有效，但我不知道这是否或如何引用引用的程序集版本？

请注意，我希望这可以在构建时而不是运行时发生，并特别提请注意有问题的代码，以便对其进行审查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:56:33.210

当然要做到这一点，您需要做的就是确保您的项目将该引用的“SpecificVersion”标志设置为true？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:09:54.127

在 Visual Studio 中使用构建后（或我想是预构建）事件怎么样？您可以运行 powershell 脚本或其他东西来检查您的程序集版本并提醒您程序集版本已更改。

有点难看，但我认为它会起作用。

有关构建事件的信息... [http://msdn.microsoft.com/en-us/library/ke5z92ks.aspx](http://msdn.microsoft.com/en-us/library/ke5z92ks.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:58:32.390

虽然以下解决方案不会在构建时运行，但您可以在运行状况检查中使用单元测试来执行此操作（假设您正在使用单元测试进行 CI）。

您编写一个单元测试来测试那段代码。确保单元测试断言 Sitecore DLL 引用的版本。当单元测试运行时，您的健康检查构建将失败。

您甚至可以用它来检查签入，以确保没有通过该单元测试就没有人可以签入。

# c# - Formfields.BookMarks.get_Item().Checkbox.Value 不起作用（自动化词）

> ID：13740807
> 
> 赞同：4
> 
> 时间：2012-12-06T09:43:27.560
> 
> 标签：c#, checkbox, automation, ms-word, bookmarks

我试图通过 C# 中的自动化来更改单词复选框（来自开发人员选项卡）的值，但未成功。我尝试了不同的方法，但我在互联网上搜索时总能找到的唯一方法是：

当您处于开发人员模式时，通过单击复选框的属性来查找复选框的名称

```
object oCheckbox = "Checkbox_name"

document_name.FormFields.get_Item(ref oCheckbox).CheckBox.Value = true/false; 
```

但是每当我执行代码时，我都会收到以下错误（集合的请求成员不存在），这意味着如果我理解正确，我的文档中没有名为“Checkbox_name”的复选框。

我还尝试将具有相同名称的复选框加入书签并执行：

`document_name.BookMarks.get_Item(ref oCheckbox).CheckBox.Value`但它也不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T11:19:02.793

如果您通过单击开发人员选项卡中显示的复选框插入了一个复选框，那么我假设您使用的是 Word 2007 或更高版本。

而且，如果是这种情况，那么您插入的不是表单字段，而是内容控件。因此，如果您在 VBA 编辑器的即时窗口中输入以下内容：

```
?ActiveDocument.Content.FormFields.Count 
```

...它将打印“0”。而如果你尝试：

```
?ActiveDocument.Content.ContentControls.Count 
```

...它应该打印一些大于零的数字，具体取决于您插入的数量。

要插入旧式表单域复选框，请单击复选框图标旁边的带有工具的文件夹图标 - 这会下拉更多类型的控件，包括“旧式表单”和“ActiveX 控件”。每个组中都有一个复选框，但它是第一个组（“Legacy Forms”），它将创建显示在 FormFields 集合中的复选框。

如果可能，我建议使用内容控件，因为可能不会永远支持旧式表单字段。

# c# - 具有多个值的资源文件（或通过代码访问注释列）

> ID：13740819
> 
> 赞同：2
> 
> 时间：2012-12-06T09:43:44.473
> 
> 标签：c#, .net, enums, embedded-resource

是否可以拥有一个包含多个值的条目的资源文件。

例如。我想拥有类似的东西。

> 资源.CanViewSection.Value 资源
> .CanViewSection.Description。

我这样做的原因是我们的数据库是使用代码优先的方法创建的，我们需要在我们的应用程序中实现非常精细的权限，所以我期待很多权限和或可能的项目重复，并且我喜欢把它们集中起来。

因此，在我们的数据库播种机中，我可以执行以下操作：

```
private IEnumerable<Permission> SetupParameterPermissions()
{
    var innerCollection = new List<Permission>
        {
            //id like to do this
            this.New(Resource.CanViewSection.Value, Resource.CanViewSection.Description),

            //instead of this
            this.New("CanViewSection", "User can view the section")
        };

    return this.SetGroupId(innerCollection, PermissionGroupEnum.Parameters);
} 
```

在我们的服务中，我们可以像这样对资源进行访问检查：

例如。

```
if(UserHasAccessTo(Resource.CanViewSection.Value))
{
// do something amazing
} 
```

我尝试了几种方法，例如。在资源的值列中添加名称并在评论部分添加描述，但我不知道如何以编程方式访问资源文件的评论列。

我意识到我也可以使用 ENUMS 实现这种效果，但我第二次猜测最好的方法是什么，因为我们将拥有大量权限，并且不知何故，具有 2 个同样巨大的扩展的巨大 ENUM 的想法让我感到奇怪出去。

```
 public enum SomeEnum
    {          
        CanViewSection
    }    

    public static class SomeEnumExtensions
    {           
        public static string GetValue(this SomeEnum)
        {
            switch (me)
            {
                case SomeEnum.CanViewSection:
                    return "CanViewSection";
                default:
                    return "Fail!";
            }
        }

        public static string GetDescription(this SomeEnum)
        {
            switch (me)
            {
                case SomeEnum.CanViewSection:
                    return "YOLO!";
                default:
                    return "Fail!";
             }
        }
    } 
```

我也愿意接受其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:31:46.180

也许你可以试试这个（或类似的东西）：

1) 使用您的 ID 创建资源文件。铁

```
 Resource.Code1
   Resource.Code2 
```

2) 创建 XML 文件并将其添加到项目中。它可能看起来像这样：

```
 <codes>
          <Code1 Value="Some value text" Description="Some description">
          <Code2 Value="Some value text" Description="Some description">
   </codes> 
```

3）创建某种具有 2 个字段的包装类 - 值和描述，fe

```
 public class ResourceWrapper
    {
    public string Value {get;set;}
    public string Description{get;set;}
    } 
```

3）然后创建简单的静态方法，该方法将通过资源文件中的代码从 XML 文件中获取值，解析它，并返回 ResourceWrapper 作为结果。

```
 public static class ResourceHelper
  {
        public static ResourceWrapper GetSomeWrapper(string resourceCode);
  } 
```

调用看起来像（在你的情况下）：

```
 ResourceWrapper wrap = ResourceHelper.GetSomeWrapper(Resource.Code1.ToString());
  this.Add(new Permission(wrap.Value, wrap.Description)); 
```

可能您希望将已包装对象的集合存储在某种缓存中，或者其他。

# jquery - 时间戳内消息框的显示和隐藏

> ID：13740821
> 
> 赞同：0
> 
> 时间：2012-12-06T09:43:49.070
> 
> 标签：jquery, html, css

我有一个登录页面，我也可以在其中执行注册。如果用户是新用户，那么他必须单击“注册”页面进行注册，然后会显示一个包含注册字段的对话框。

注册完成后，我应该会收到一个消息框，该消息框应该在右上角显示一条消息“注册完成”作为时间戳，这意味着消息框应该显示该消息并在一秒钟内隐藏。我不想使用警报，而不是一些消息框。

```
 page.gsp

   <div class="pageOneResolution">
    <div class="costing" id="costingBubbleText">
        <img class="defis-visuel"
            src="${resource(dir: 'images', file: 'temp2.png')}"
            alt="Guido Heading" />
    </div>
    <div class="costing" id="GuidoImage">
        <img class="defis-visuel"
            src="${resource(dir: 'images', file: 'guido.png')}"
            alt="Guido Image" />
    </div>
    <div>

        <div id="infoContainer">
            <img class="squareContainer"
                src="${resource(dir: 'images', file: 'square-clip-art-5.gif')}"
                alt="thinking" />
            <div id="subInfoContainer">
                <p id="getStartedText">Get Started</p>

                <p
                    style="color: black; text-align: left; font-size: 14px; font-family: Arial; font-weight: bold;">
                    User Email <br /> <input class="infoContainerFields"
                        id="emailfield" placeholder=" Enter your Email"
                        data-bind="value: $data.eMail" />
                </p>
                <p
                    style="color: black; text-align: left; font-size: 14px; font-family: Arial; font-weight: bold;">
                    Password <br /> <input class="infoContainerFields"
                        id="passwordfield" placeholder=" Enter your Password"
                        data-bind="value: $data.password" />
                </p>

                <p>
                    <a href="javascript:void(0)" class="signup"
                        onclick="document.getElementById('light').style.display='block';document.getElementById('fade').style.display='block'">Sign
                        Up</a>
                </p>
            </div>
        </div>

        <p>
            <a href="javascript:void(0)"
                onclick="document.getElementById('light').style.display='block';document.getElementById('fade').style.display='block'">Sign
                Up</a>
        </p>
      <div data-bind='validationOptions: { messageTemplate: "customMessageTemplate" }'  >
          <div id="light"  class="white_content" style="color: black;">
            <form action="#/cart" method="post">

                <input type="hidden" name="url"value="${grailsApplication.config.serverURL}"/>

                <p><label>first name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input name="firstName" class="formElement" data-bind='value: firstName'/></label></p>
                <p><label>last name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input name="lastName" class="formElement" data-bind='value: lastName' /></label></p>
                <p><label>organisation: <input name="organisation" class="formElement" data-bind='value: organisation' /></label></p>
                <p><label >email:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="text" name="email" id="email" class="formElement" data-bind='value: email' /></label><label id="emailError"></label></p>
                <p><label>password:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="password" name="password" class="formElement" data-bind='value: password' /></label></p>
                <p><label style="margin-left: -37px;">confirm password:</label> <input type="password" name="confirmPassword" class="formElement" data-bind='value: confirmPassword' /></p>
                <p><input type="submit" value="register" /></p>

            </form>
              <a href="javascript:void(0)"
                onclick="document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none';clearBox();">Close</a>
          </div>
      </div>
        <div id="fade" class="black_overlay"></div>

    </div>

    <a id="firstPageNavigator" class="go" href="newCosting.gsp#"
        data-bind="click: $data.capitalizeLastName" onClick="showDiv()"
        title="2nd Page"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:58:34.347

您可以在顶部包含一个 div，例如 `<div id="statusMsg"></div>`

注册成功后，您可以使用 jquery 附加状态消息

$('#statusMsg').html('注册完成')

并使用淡出或延迟方法隐藏该消息

# python - 试图用scrapy抓取网页的所有链接。但我无法在页面上输出链接

> ID：13740825
> 
> 赞同：5
> 
> 时间：2012-12-06T09:44:01.120
> 
> 标签：python, scrapy, web-crawler

我在这里的第一个问题:)

我试图在我的学校网站上抓取所有可能的网页。但我无法将链接放入文本文件。我有正确的权限，所以这不是问题。

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from scrapy.item import Item
from scrapy.spider import BaseSpider

class hsleidenSpider(CrawlSpider):
        name = "hsleiden1"
        allowed_domains = ["hsleiden.nl"]
        start_urls = ["http://hsleiden.nl"]

        # allow=() is used to match all links
        rules = [
        Rule(SgmlLinkExtractor(allow=()), follow=True),
        Rule(SgmlLinkExtractor(allow=()), callback='parse_item')
        ]

        def parse_item(self, response):
                x = HtmlXPathSelector(response)

                filename = "hsleiden-output.txt"
                open(filename, 'ab').write(response.url) 
```

所以我只在 hsleiden.nl 页面上扫描。我想将 response.url 放入文本文件 hsleiden-output.txt 中。

有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T01:49:27.277

参考[CrawlSpider](https://scrapy.readthedocs.org/en/latest/topics/spiders.html?highlight=rules#crawlspider)的文档，如果多个规则匹配同一个链接，那么只会使用第一个。

因此，作为重定向的结果，使用第一条规则会导致看似无限循环。由于第二条规则被忽略，没有任何匹配的链接被传递给 parse_item 回调，这意味着没有输出文件。

需要进行一些调查来解决重定向问题（并修改第一条规则，使其不与第二条冲突），但将其完全注释掉会产生如下链接的输出文件：

> [http://www.hsleiden.nl/activiteitenkalenderhttp://www.hsleiden.nlhttp://www.hsleiden.nl/vind-je-studie/proefstuderenhttp://www.hsleiden.nl/studiumgenerale](http://www.hsleiden.nl/activiteitenkalenderhttp://www.hsleiden.nlhttp://www.hsleiden.nl/vind-je-studie/proefstuderenhttp://www.hsleiden.nl/studiumgenerale)

ETC

它们都在一行中合并在一起，因此您可能希望在每次写入输出文件时添加换行符或分隔符。

# nservicebus - NServiceBus - 如何使用 autofac 注册我自己的模块

> ID：13740826
> 
> 赞同：1
> 
> 时间：2012-12-06T09:44:05.103
> 
> 标签：nservicebus, autofac

由于 NServiceBus 内部使用 autofac，我应该通过 nservicebus 注册我的绑定还是应该像往常一样使用模块和绑定安装 AutoFac？如果是这样，因为我有一个 Windows 服务项目，我在哪里启动 autofac 设置？在我的 EndPointConfig.cs 中？

请注意，这是针对我自己的绑定，而不是自动注册的 IBus。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T19:23:57.013

在所有容器可用的情况下，端点配置中将有一个重载，以传入一个容器实例，该容器应该加载你所有的东西。从那里，NSB 将添加其内部内容，所有内容都可供您使用。

```
Configure.With().AutofacBuilder(builder)... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:10:59.353

我有一个单独的类来实现 INeedInitialization。在它的初始化方法中，我配置了 DI。

例如：

```
using NServiceBus;
using NServiceBus.Config;

public class DependencyInjection  : INeedInitialization
{

    public void Init()
    {
        Configure.Instance.Configurer.RegisterSingleton<ISomeInterface>(
            new SomeClassImplementingInterface());
    }
} 
```

# android-contentprovider - ContentProvider：如何取消先前对 delete() 的调用？

> ID：13740828
> 
> 赞同：0
> 
> 时间：2012-12-06T09:44:10.183
> 
> 标签：android-contentprovider, cancellation

我正在使用自定义[ContentProvider](http://developer.android.com/reference/android/content/ContentProvider.html)。对于查询，有一个[CancellationSignal](http://developer.android.com/reference/android/os/CancellationSignal.html) (API 16+) 可用于取消先前对[query()](http://developer.android.com/reference/android/content/ContentProvider.html#query%28android.net.Uri,%20java.lang.String%5b%5d,%20java.lang.String,%20java.lang.String%5b%5d,%20java.lang.String,%20android.os.CancellationSignal%29)的调用。

我的问题：我怎样才能存档`delete()`？为了澄清起见，我的自定义提供商管理 SD 卡上的文件，因此我希望能够取消我的提供商内部的删除操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:58:06.290

我用一个简单的解决方案解决了这个问题。

例如，对于每次调用`query()`，我们放置一个指向任务 ID 的参数，并使用[SparseBooleanArray](http://developer.android.com/reference/android/util/SparseBooleanArray.html)来保存该 ID，例如：

```
...
private static final SparseBooleanArray _MapInterruption = new SparseBooleanArray();

...
@Override
public Cursor query(Uri uri, String[] projection, String selection, String[] selectionArgs, String sortOrder) {
    Cursor cursor = ...

    int taskId = ... // obtain task ID from uri
    boolean cancel = ... // obtain cancellation flag from uri
    if (cancel) {
        _MapInterruption.put(taskId, true);
        return null; // don't return any cursor
    } else {
        doQuery(taskId);
        if (_MapInterruption.get(taskId)) {
            _MapInterruption.delete(taskId);
            return null; // because the task was cancelled
        }
    }

    ...
    return cursor;
}// query()

private void doQuery(int taskId) {
    while (!_MapInterruption.get(taskId)) {
        ... // do the task here
    }
}// doQuery() 
```

用法：

*   查询：

    ```
    ...
    getContentResolver().query("content://your-uri?task_id=1", ...); 
    ```

*   取消：

    ```
    ...
    getContentResolver().query("content://your-uri?task_id=1&cancel=true", ...); 
    ```

如需完整的工作解决方案，请查看[android-filechooser](http://code.google.com/p/android-filechooser/)。

优点是您可以在 Android... 1+ 和其他方法中使用此技术，例如`delete()`，`update()`... 虽然[CancellationSignal](http://developer.android.com/reference/android/os/CancellationSignal.html)仅在 API 16+ 中可用，并且仅限于`query()`.

# xml - Perl 和 curl - 发送 XML 时数据丢失

> ID：13740830
> 
> 赞同：-1
> 
> 时间：2012-12-06T09:44:12.980
> 
> 标签：xml, web-services, perl, curl

我正在从 Perl 程序调用一个简单的 Web 服务。Web 服务只返回一些简单的 XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<job>
    <path>/root/subdir1/subdir2</path>
</job> 
```

当我在浏览器上调用 Web 服务时，我会返回完整的 XML 并且可以“看到”

```
/root/subdir1/subdir2 
```

当我使用 curl 从不同的 linux 框调用相同的 URL 时，它会丢失数据。我得到了这个：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<job>
    <path></path>
</job> 
```

我不明白为什么它会删除数据但仍返回 XML。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:04:14.003

所以你得到了不同的回应。找出请求的不同之处。然后解决差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:36:52.627

我已经找到了这个问题的答案。我没有收到响应的原因是，当使用多个 url 参数调用 curl 时，您需要用引号将完整的 url 括起来。

如果您只有一个查询字符串参数，这将起作用：

```
curl -sS http://www.mywebsite.com/myprog.pl?myparam1=1 
```

但这不会：

```
curl -sS http://www.mywebsite.com/myprog.pl?myparam1=1&myparam2=2 
```

除非你这样做：

```
curl -sS 'http://www.mywebsite.com/myprog.pl?myparam1=1&myparam2=2' 
```

在这里找到了答案：

[如何使用 curl 将多个参数传递给 cron 作业？](https://stackoverflow.com/questions/2981923/how-to-pass-multiple-parameters-to-cron-job-with-curl)

谢谢！:-)

# objective-c - 在 CoffeeScript 中重写一个线程化的 Objective-C“故事引擎”：如何在没有大量回调的情况下按顺序编写动作和条件？

> ID：13740833
> 
> 赞同：1
> 
> 时间：2012-12-06T09:44:24.743
> 
> 标签：objective-c, html, callback, coffeescript, iced-coffeescript

我一直在尝试使用 CoffeeScript 将我的 Objective-C iPhone 冒险[Scarlett and the Spark of Life](http://launchingpadgames.com/games/scarlett/)的底层“故事引擎”移植到 HTML5（我正在研究[IcedCoffeeScript](http://maxtaco.github.com/coffee-script/)）。

图形部分可以只在 DOM 上使用 DIV——那里的要求相当简单。有问题的部分是“命令和控制”故事类型的命令。理想的情况是能够表达高级故事命令——包括条件句——并让它们**按顺序**执行。因此，例如，在 faux-CoffeeScript 中：

```
scarlett.walkTo(200,300)
scarlett.turnTo(0)
story.wait(0.8)

if interesting
  scarlett.think('Looks interesting.')
else
  scarlett.think('Looks boring.') 
```

在 Objective-C 中（当像 Lua 这样的脚本语言在 App Store 上被禁止时，这又回来了），我们通过两个线程来实现这一点。主线程运行 cocos2d-phone 来处理所有的 OpenGL 调用、动画和其他 cocos 细节。“故事”线程处理故事的命令和控制，如果有必要，线程会休眠，`NSCondition`在从函数返回并继续进行下一个调用之前等待一个。

这听起来很尴尬，但它让我们能够以顺序、自然的方式表达故事命令和条件，只需使用看起来很正常的代码。请注意，在上面的示例中，`if`对变量的检查`interesting`将在 Scarlett 说话之前进行评估，*而不是*在函数的开头。此外，`walkTo()`直到它们相关的动画、延迟或文本框在主线程上完成后`turnTo()`，调用才会返回。`wait()``think()`

我正在努力解决的是如何使用网络技术来实现这种表现力。在我看来，我的选择是：

1.  使用**Web Worker**作为故事“线程”。但是，据我所知，工作人员无法入睡，并且未共享状态，因此他们甚至无法执行忙碌的等待。
2.  使用**回调链**，可能利用 IcedCoffeeScript`await`和`defer`关键字来保持代码整洁。但是，即使有这些，也会产生很多额外的线路噪音。
3.  不知何故，将故事脚本中的行逐一**评估为字符串。**我不禁觉得这将是一个很大的问题。
4.  （在某些方面类似于 3。）用专门设计的**解释语言**编写故事命令，其中程序计数器可以根据需要停止和启动。这似乎是在不必要地重新发明轮子。

不过，我不禁觉得我忽略了一些非常明显的解决方案。不知何故，我在看这个从后到前的东西吗？是否有一种公认的模式来使用实际代码*编写顺序动作和条件脚本*，而无需大量回调？

# linq-to-sql - LINQ sum 返回错误的结果

> ID：13740840
> 
> 赞同：2
> 
> 时间：2012-12-06T09:45:00.917
> 
> 标签：linq-to-sql

我有一个包含以下数字的行的表：

```
4191808.51
3035280.22
3437796.06
4013772.33
1740652.56
0 
```

该表的总和是`16419309.68`。

当我对该表执行 Linq SUM 查询时，它返回一个完全不同的数字：`19876858.14`

我用来求和的代码如下：

```
IEnumerable<MyData> data = _myRepository.GetMatching(myValue);
decimal sumSales = data.Sum(x => x.Sales); 
```

这可能是什么原因造成的？我怀疑一些最大十进制值，但找不到相关信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-06T20:45:54.793

你能检查一下你的

```
IEnumerable<MyData> data = _myRepository.GetMatching(myValue); 
```

执行后在调试器中。我怀疑您正在选择一些不同的数据集 - 而不是您在示例中显示的数据。我试图重新创建你的情况 LinqPad，但不断得到正确的答案。

```
decimal[] data = {
    4191808.51m
    ,3035280.22m
    ,3437796.06m
    ,4013772.33m
    ,1740652.56m
    ,0m
};

decimal sumSales = data.Sum();
sumSales.Dump(); 
```

并获得：**16419309.68**

# php - 查找每个工作表的最高列

> ID：13740845
> 
> 赞同：1
> 
> 时间：2012-12-06T09:45:43.777
> 
> 标签：php, phpexcel

有没有办法获得最高的列值，例如包含值的最高列。使用 getWorksheetIterator。我想获取该列并使用它来将单元格清理到最高列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T09:49:45.943

对工作表的 getHighestDataColumn() 方法的简单调用应该会给你这个

# mysql - MySQL查询月份选择错误

> ID：13740851
> 
> 赞同：0
> 
> 时间：2012-12-06T09:45:54.943
> 
> 标签：mysql

我正在尝试使用此查询来涵盖一个月，但我无法让它工作。

```
SELECT GVA14.COD_VENDED, GVA14.RAZON_SOCI
FROM GVA14
GROUP BY GVA14.COD_VENDED, GVA14.RAZON_SOCI, GVA14.FECHA_ALTA
HAVING (((DATE(GVA14.FECHA_ALTA))=Month(curDate()))); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:50:06.877

这不能解决它：

```
SELECT GVA14.COD_VENDED, GVA14.RAZON_SOCI, GVA14.FECHA_ALTA
FROM GVA14
WHERE Month(GVA14.FECHA_ALTA)=Month(curDate())
    and Year(GVA14.FECHA_ALTA)=Year(curDate())
GROUP BY GVA14.COD_VENDED, GVA14.RAZON_SOCI, GVA14.FECHA_ALTA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:56:46.770

GROUP BY 仅用于聚合函数。但我没有看到您的查询中使用了任何函数。此外，Having 与聚合函数一起使用。如果您可以说明您想从数据库中获取的确切内容以及数据库中的列（至少是相关列）是什么，那将会很有帮助。

# java - 如何检查当前 Java 应用程序是否在我的 Windows PC 上的前台？

> ID：13740853
> 
> 赞同：2
> 
> 时间：2012-12-06T09:45:57.730
> 
> 标签：java, windows, swing

我想检查我的摇摆应用程序是否在前台。如果不是这种情况，我会使用应用程序的系统托盘图标来显示某些特定事件的气球通知。关于如何检查的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:58:55.777

`isActive()`并且`isFocused()`是一个很好的起点，因此请查看您的框架是否有焦点。

`WindowListener`也可用于对`windowActivated`和作出反应`windowDeactivated`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-09T07:03:03.813

[焦点子系统](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)帮助您检查窗口是否处于活动状态。

```
jframe.addWindowFocusListener(new WindowAdapter() {

    //To check window gained focus
    public void windowGainedFocus(WindowEvent e) {
        //set flag
        isWindowActive = true;
    }

    //To check window lost focus
    public void windowLostFocus(WindowEvent e) {
        //set flag
        isWindowActive = false;
    }
}); 
```

高温高压

# c# - 将 JSON 反序列化为？

> ID：13740854
> 
> 赞同：1
> 
> 时间：2012-12-06T09:46:01.983
> 
> 标签：c#, json, deserialization

我有需要反序列化的 JSON，但我不想创建具有属性名称的类。

这是我在 JSON 中得到的：

```
"[{"id":1,"width":100,"sortable":true}, {"id":"Change","width":100,"sortable":true}]" 
```

那么我该怎么做呢？

感谢提前:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:52:21.043

您可以使用[JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

```
var list = new JavaScriptSerializer()
                  .Deserialize<List<Dictionary<string, object>>>(json);

var id = list[0]["id"]; 
```

或者，如果你愿意， [Json.Net](http://json.codeplex.com/)

```
var list2 = JsonConvert.DeserializeObject<List<Dictionary<string, object>>>(json); 
```

Json.Net 还允许您使用[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264736.aspx)

```
dynamic list = JsonConvert.DeserializeObject(json);
var wdth = list[0].width; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T09:58:34.577

使用[Json.net](http://james.newtonking.com/projects/json-net.aspx)，您可以直接反序列化为匿名类：

```
var json = "[{\"id\":1,\"width\":100,\"sortable\":true}, \"id\":\"Change\",\"width\":100,\"sortable\":true}]";

var myExempleObject = new {id = new object(), width = 0, sortable = false};

var myArray = JsonConvert.DeserializeAnonymousType(json, new[] {myExempleObject}); 
```

我假设这里 id 可以是任何对象（如在您的示例中它可以是 int 或 string）， width 必须是 int 并且 sortable 必须是布尔值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:50:11.760

您可以使用 json.net

我不确定它是否是您正在寻找的东西。

```
 string json = @"{
    'CPU': 'Intel',
    'PSU': '500W',
    'Drives': [
      'DVD read/writer'
      /*(broken)*/,
      '500 gigabyte hard drive',
      '200 gigabype hard drive'
    ]
}";

JsonTextReader reader = new JsonTextReader(new StringReader(json));
while (reader.Read())
{
  if (reader.Value != null)
    Console.WriteLine("Token: {0}, Value: {1}", reader.TokenType, reader.Value);
  else
    Console.WriteLine("Token: {0}", reader.TokenType);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T09:55:43.170

```
using System;
using Newtonsoft.Json;
using Newtonsoft.Json.Linq;

class Program
{
    static void Main(string[] args)
    {
        string json = "[{\"id\":1,\"width\":100,\"sortable\":true}, {\"id\":\"Change\",\"width\":100,\"sortable\":true}]";
        JArray array = JsonConvert.DeserializeObject(json) as JArray;
        if (array != null)
        {
            foreach (JObject jObj in array)
                Console.WriteLine("{0,10} | {1,10} | {2,10}", jObj["id"], jObj["width"], jObj["sortable"]);
        }
        Console.ReadKey(true);
    }
} 
```

# python - 尝试解析字符串时出现Python poplib错误

> ID：13740859
> 
> 赞同：1
> 
> 时间：2012-12-06T09:46:11.633
> 
> 标签：python, poplib

我正在使用 poplib 从 POP3 服务器获取电子邮件。

但是发生了这个错误：

```
*cmd* 'USER xxx@gmail.com'
*put* b'USER xxx@gmail.com'
*get* b'+OK send PASS\r\n'
*resp* b'+OK send PASS'
*cmd* 'PASS asdasd\n'
*put* b'PASS asdasd\n'
*get* b'-ERR bad command qj1pf12899100pbb.19\r\n'
*resp* b'-ERR bad command qj1pf12899100pbb.19' 
```

这是python代码：

```
import getpass, poplib
def LoginGmail( email, pa ):
    M = poplib.POP3_SSL('pop.googlemail.com', '995') 
    M.set_debuglevel(2)
    user = email
    try:
        M.user(user)
        M.pass_(pa)
    except:
        print('Invalid credentials')
    else:
        print('Successful login')

...
in main():
loginGmail('test@gmail.com','asdasd') 
```

但是，在函数中，当我尝试输入密码（表示为“pa”）并直接输入时，它可以工作。它不会发生在用户身上。

请帮忙，我已经尝试了一天来弄清楚，但对我来说似乎是不可能的:(

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:51:07.043

发现问题，当它读取密码时：

```
*cmd* 'PASS asdasd\n'
*put* b'PASS asdasd\n' 
```

不知何故，它还读取了包含非法字符的 \n 。通过删除每个输入值的 \n 来解决。

# xml - 如何在 XSLT 中对元素进行分组

> ID：13740863
> 
> 赞同：4
> 
> 时间：2012-12-06T09:46:21.213
> 
> 标签：xml, xslt, xslt-1.0, grouping

面对通过分组元素 XSLT 解决问题的困难。我必须使用 xsl: 键吗？如果是这样，如何做或更多 xsl: for-each？这是我的问题。我的 XML 文件：

```
<page>
<name>test</name>
<property id="416" name="country" type="relation">
    <title>Country</title>
        <value>
            <item id="1014" name="Canada"/>
        </value>
    </property>
</page> 
```

和物品这样的作品 20，每件都有一个名字（非经常性的，和他们自己的国家，可以重复） 如何得出这些按国家分组的元素？例如：

```
<h1>Canada</h1>
<h2>test<h2>
<h2>test2<h2>

<h1>England</h1>
<h2>test3</h2>
<h2>test3</h2> 
```

更新：

```
 <page id="423" parentId="421" link="/producers/oao_nii_elpa/" is-active="1" object-id="1020" type-id="67" type-guid="catalog-category" update-time="1350295423" alt-name="oao_nii_elpa">
<basetype id="44" module="catalog" method="category">Catalog category</basetype>
<name>Nii elpa</name>
<properties>
<group id="130" name="common">
<title>Params</title>
<property id="116" name="h1" type="string">
<title>H1 field</title>
<value>Nii elpa</value>
</property>
</group>
<group id="131" name="menu_view">
<title>Menu View</title>
<property id="123" name="header_pic" type="img_file">
<title>Header_Pic</title>
<value path="./images/cms/headers/elpa.jpg" folder="/images/cms/headers" name="elpa" ext="jpg" width="139" height="63">/images/cms/headers/elpa.jpg</value>
</property>
</group>
<group id="133" name="additional">
<title>Additional</title>
<property id="416" name="country" type="relation">
<title>Country</title>
<value>
<item id="3" guid="a1e3ae17e80ba2b4a3ddb1b855430346f74b8d48" name="England" type-id="4" type-guid="d69b923df6140a16aefc89546a384e0493641fbe" ownerId="42" xlink:href="uobject://3"/>
</value>
</property>
</group>
</properties>
</page> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T12:49:25.760

对于 XSLT 1.0，分组方式是通过 muenchian 方法完成的，例如：（
来源： http: [//www.jenitennison.com/xslt/grouping/muenchian.html](http://www.jenitennison.com/xslt/grouping/muenchian.html)）

我们有一个 XML：

```
<records>
    <contact id="0001">
        <title>Mr</title>
        <forename>John</forename>
        <surname>Smith</surname>
    </contact>
    <contact id="0002">
        <title>Dr</title>
        <forename>Amy</forename>
        <surname>Jones</surname>
    </contact>
    ...
</records> 
```

而且我们不想按姓氏分组，并产生以下输出：

```
Jones,<br />
    Amy (Dr)<br />
    Brian (Mr)<br />
Smith,<br />
    Fiona (Ms)<br />
    John (Mr)<br /> 
```

这是通过以下 XSLT 1.0 模板和密钥完成的：

```
<xsl:key name="contacts-by-surname" match="contact" use="surname" />
<xsl:template match="records">
    <xsl:for-each select="contact[count(. | key('contacts-by-surname', surname)[1]) = 1]">
        <xsl:sort select="surname" />
        <xsl:value-of select="surname" />,<br />
        <xsl:for-each select="key('contacts-by-surname', surname)">
            <xsl:sort select="forename" />
            <xsl:value-of select="forename" /> (<xsl:value-of select="title" />)<br />
        </xsl:for-each>
    </xsl:for-each>
</xsl:template> 
```

您的问题的模板如下所示（未经测试）：

```
<xsl:key name="page-by-country" match="page" use="property[@name='country']/value/item/@name" />
<xsl:template match="pages">
    <xsl:for-each select="page[count(. | key('page-by-country', property[@name='country']/value/item/@name)[1]) = 1]">
        <xsl:sort select="property[@name='country']/value/item/@name" />
        <h1><xsl:value-of select="property[@name='country']/value/item/@name" /></h1>
        <xsl:for-each select="key('page-by-country', property[@name='country']/value/item/@name)">
            <xsl:sort select="name" />
            <h2><xsl:value-of select="name"/></h2>
        </xsl:for-each>
    </xsl:for-each>
</xsl:template> 
```

有关您的问题，请参阅此工作示例：[xsltransform.net](http://xsltransform.net/pPgCcoi)

# javascript - 让用户在不输入@domain.com 部分的情况下登录他们的电子邮件？

> ID：13740864
> 
> 赞同：0
> 
> 时间：2012-12-06T09:46:31.177
> 
> 标签：javascript, html, email, forms

我为我的员工创建了一个页面，无需访问[http://www.ipage.com/mail/](http://www.ipage.com/mail/)即可登录他们的邮件。该页面是[http://www.pgla-jordan.org/staff-login.html](http://www.pgla-jordan.org/staff-login.html)。

这是该页面的代码：

```
<form METHOD="POST" NAME="login" ENCTYPE="application/x-www-form-urlencoded">
<TR>
<TD>E-mail Address:</TD>
<TD>
<INPUT TYPE="text" NAME="credential_0" value="" SIZE="20" MAXLENGTH="128" class="formfield">
</TD>
</TR>
<TR>
<TD>Password:</TD>
<TD>
<INPUT TYPE="password" NAME="credential_1" SIZE="20" MAXLENGTH="50" class="formfield">
</TD>
</TR> 
<TR><TD>
<INPUT TYPE="submit" NAME="Log In" VALUE="Check Mail" onclick="javascript:login.action='https://secure.ipage.com/mailLogin';javascript:login.destination.value = '/mailadmin/index.bml?check=1';" >
</TD><TD>
<INPUT TYPE="submit" NAME="Log In" VALUE="Manage Mail" onclick="javascript:login.action='https://secure.ipage.com/mailLogin';javascript:login.destination.value = '/mailadmin/index.bml?manage=1';">
</TD></TR>
<INPUT TYPE="hidden" NAME="destination">
</form>
</TABLE>
</center> 
```

我想让用户只输入他们电子邮件的第一部分（中的`XXXX`部分`XXXX@domain.com`）和密码以将他们登录到他们的邮件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:39:12.043

做一些javascript.....

```
 <INPUT TYPE="submit" NAME="Log In" VALUE="Check Mail" onclick="Login()" >

 function Login()
 {
    document.getElementByName("credential_0").value =  document.getElementByName("credential_0").value + "@domain.com";

    javascript:login.action='https://secure.ipage.com/mailLogin';
    javascript:login.destination.value = '/mailadmin/index.bml?check=1';

    return true;
 } 
```

希望这会奏效。如果它不起作用，你可能需要做一些微调。但逻辑应该适合你。

# javascript - 如何在 JS 日期对象中转换 JSON 字符串？

> ID：13740867
> 
> 赞同：0
> 
> 时间：2012-12-06T09:46:35.477
> 
> 标签：javascript, json

```
 {"date":"Thu Dec 06 14:56:01 IST 2012"} 
```

我得到这个字符串作为 JSON 我可以将它转换为 JS 日期对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:54:17.000

编辑：不幸的是我完全错了，对不起，我的错，它碰巧总是导致今天，但不要把你搞砸，这是一个无论如何都应该为你工作的解决方案如果你从你的服务器获得不同的时间字符串，也许最好的方法是编写与您的字符串模式匹配的正则表达式模式

*   `date`从您的 JSON 对象访问您的属性
*   由于使用此“Thu Dec 06 14:56:01 IST 2012”字符串实例化日期对象将导致日期无效
*   删除“IST”`myJson.date.replace(" IST","")`
*   用你的新字符串实例化你的 Date 对象`myDate = new Date("Thu Dec 06 14:56:01 2012")`
*   现在真的有你的日期对象

* * *

```
var myJson = {"date":"Thu Dec 06 14:56:01 IST 2012"}
var myDate = new Date(myJson.date.replace(" IST",""))
console.log(myDate.toLocaleDateString()) 
```

这是[JSBin](http://jsbin.com/inusun/1/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:03:09.433

将 JSON 转换为将日期解析为字符串的数据对象的正确方法。

```
var myJson = {"date":"Thu Dec 06 14:56:01 IST 2013"}
var myDate = new Date(Date(myJson.date))
console.log(myDate.getFullYear()) // 2012 
```

不适用于与当前年份不同的年份。

相关链接
[在哪里可以找到有关在 JavaScript 中格式化日期的文档？](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)

# javascript - 历史.js + 谷歌

> ID：13740868
> 
> 赞同：5
> 
> 时间：2012-12-06T09:46:45.313
> 
> 标签：javascript, ajax, history.js, hashbang

让我们谈谈google的AJAX爬虫：

由于[history.js](https://github.com/balupton/History.js/)是丑陋的[hashbang](https://developers.google.com/webmasters/ajax-crawling/docs/specification) url 的一个很好的替代品，我想知道一个特定的问题：对于 HTML5 浏览器，如果加载了 ajax-content 并且应该由 google 索引，则会创建漂亮的 url。对于非 HTML5 浏览器（例如 IE 9 不支持 history.pushState），使用旧的 hashbang。

那么google看到的是哪个版本呢？谷歌看到重复内容是否有任何风险（一次是漂亮的 url，一次是 hashbang）？

感谢您对此的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T14:32:20.400

HTML

```
<a href="http://some/other/page/1" data-history='{"some":"data"}' title="...">link1</a>
<a href="http://some/other/page/2" data-history='{"some":"data"}' title="...">link2</a> 
```

JavaScript

```
$(document).on('click', '[data-history]', function(e){
    e.preventDefault();
    History.pushState($(this).data().history, this.title, this.href);
}) 
```

对于启用了 JavaScript 的客户端， hisotory.js 将处理这个 AJAX 请求，对于没有 JavaScript 的客户端，它将请求正常页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:22:49.320

如果需要用 google 索引 ajax 页面，我们需要从服务器提供页面的 html 快照。

例如：xyz.com/page1#!name=john

谷歌抓取工具找到了这个#！标识符和请求[http://xyz.com/page1?_escaped_fragment_=name=john](http://xyz.com/page1?_escaped_fragment_=name=john) 这样我们的服务器可以提供页面的 html 快照。

现在，当我们的 URL 被美化并附加 #! ajax 页面将被索引。

对于仅在 URL 中附加 # 的页面，谷歌爬虫将无法看到通过 ajax 加载的内容，并且不会被索引。所以不会有任何重复的可能

我们还可以在页面的 head 部分使用链接标签，其中 rel 规范 url 指向邮件 url。请参阅[http://googlewebmastercentral.blogspot.in/2009/02/specify-your-canonical.html](http://googlewebmastercentral.blogspot.in/2009/02/specify-your-canonical.html)以供参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:51:43.553

我建议对支持 API 的浏览器（大约 70% 的浏览器）仅使用 HTML5 History API，同时向不支持该 API 的浏览器提供常规静态页面。这样，搜索引擎就不可能看到与完整规范静态 URL 不同的任何内容。

# scala - 为 SORM 设置 SBT 并与 Play 2.1 一起使用

> ID：13740870
> 
> 赞同：0
> 
> 时间：2012-12-06T09:47:04.367
> 
> 标签：scala, playframework, sorm

您提供了 Maven 依赖项设置，但是 SBT 呢，您能否将其添加到文档中。

它适用于 Play 2.1 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:19:29.827

你能不能只对 maven 依赖使用 sbt 解析器？

[sbt 解析器](http://www.scala-sbt.org/release/docs/Detailed-Topics/Resolvers.html)

# c# - c# string to float convert 不能正常工作

> ID：13740871
> 
> 赞同：2
> 
> 时间：2012-12-06T09:47:05.383
> 
> 标签：c#, string, floating-point, converter

我必须将字符串转换为浮点数，只有普通转换器不起作用。

```
fi.Resolution = float.Parse(nodeC.InnerText);
fi.Resolution = (float)nodeC.InnerText; 
fi.Resolution = Single.Parse(nodeC.InnerText); 
```

并且更多这些方法不起作用。当 nodeC.InnerText 为 0.01 时它返回 1，但如果 nodeC.InnerText 为 5.72958e-07 它返回 0,0575958 并且 0.0001 也返回 1，所以它不是位移。

有谁知道为什么这个标准的 c# 转换不起作用？

所以我正在尝试编写自己的 StringToFloat 方法，但它失败了：P

```
public float StringToFloat(string input)
        {
            float output = 0;
            char[] arr = input.ToCharArray();

            for (int i = 0; i < input.Length - 1; i++)
            {
                if (arr[i].Equals("."))
                    output += 1;//change
                else
                    output += Convert.ToInt32(arr[i]);
            }

            return output;
        } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T09:50:22.290

尝试`fi.Resolution = float.Parse(nodeC.InnerText, CultureInfo.InvariantCulture);`

看起来您当前的文化期望`,`作为小数分隔符并忽略任何`.`存在。

因此

```
0.01        =>    001     => 1
5.72958e-07 => 572958e-07 => 0,0572958 (note it gave you a , not a .) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:50:57.443

您是否有机会使用默认为“，”作为小数分隔符的 Windows 语言环境？

还：

```
(float)nodeC.InnerText; 
```

永远不应该工作

# java - 导入 Web 项目时出现“无法解析为类型”错误

> ID：13740875
> 
> 赞同：1
> 
> 时间：2012-12-06T09:47:15.490
> 
> 标签：java, eclipse, web-applications, import, autowired

我已经下载了这个基于 java 的 Web 应用程序示例：[https](https://github.com/loiane/ext4-crud-mvc) ://github.com/loiane/ext4-crud-mvc ，现在我正在尝试将其导入 Eclipse。我希望它能开箱即用，但不幸的是，在操作 IDE 向我抛出错误之后：

`Autowired cannot be resolved to a type`[并在https://github.com/loiane/ext4-crud-mvc/blob/master/src/br/com/braziljs/loiane/web/ContactController.java](https://github.com/loiane/ext4-crud-mvc/blob/master/src/br/com/braziljs/loiane/web/ContactController.java)的第 101 行以及 '@Classname ' 建设出现。

这是我第一次使用 Eclipse，第一次使用 java web 应用程序，并且在上次使用 Java 开发几年后，所以我不确定从哪里开始解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:06:39.050

您是否将所有必需的 jar 文件添加到构建路径？

# c - 使用正则表达式从字符串中分配变量

> ID：13740876
> 
> 赞同：1
> 
> 时间：2012-12-06T09:47:15.767
> 
> 标签：c, regex

我正在用 C 编码，我有一个字符串，其中包含这样的值

> e=3213213123
> 
> n=321312321321321

如何使用正则表达式从字符串中分配这些值`int e`？`int n`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:49:19.590

跳过该`"e="`部分，并使用[`strtoll`](http://en.cppreference.com/w/c/string/byte/strtol). 不需要正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:48:42.083

`atoi()`它将字符串转换为整数。

`strtol()`- 将字符串转换为长整数。

阅读这些功能的手册页并根据您的需要进行选择。

atoi() 函数将 nptr 指向的字符串的初始部分转换为 int。行为与

`strtol(nptr, (char **) NULL, 10);` 除了 atoi() 不检测错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:56:14.897

没有办法直接将字符串与变量名匹配；变量名严格来说是一个编译时概念，在运行时不存在。

您需要进行匹配（可能是针对运行时列表或变量名数组），解析要分配的值，最后将分配作为单独的步骤进行。

在这里使用正则表达式没有什么意义，一些更简单的方法，例如：

```
char vname[32];
int  value;

if(sscanf("%30s=%d", vname, &value) == 2)
{
  if(strcmp(vname, "e") == 0)
    e = value;
  else if(strcmp(vname, "n") == 0)
    n = value;
  else
    fprintf(stderr, "**Unknown variable name '%s'\n", vname);
} 
```

应该这样做。请注意，上面只是对变量名称的“列表”进行了硬编码，如果您需要支持大量（三个以上）变量，则它的可扩展性不是很高。

# php - PHP else if 进入数组？

> ID：13740877
> 
> 赞同：2
> 
> 时间：2012-12-06T09:47:20.343
> 
> 标签：php

好的，假设我在 PHP 中有一堆 else-if 的小片段

```
function getLevelByExp($theExp) {

    if ($theExp < 83) { $theLevel = 1; }
else if ($theExp < 175) { $theLevel = 2; }
else if ($theExp < 278) { $theLevel = 3; }
else if ($theExp < 392) { $theLevel = 4; }
else if ($theExp < 519) { $theLevel = 5; }
else if ($theExp < 659) { $theLevel = 6; }
else if ($theExp < 814) { $theLevel = 7; }
else if ($theExp < 987) { $theLevel = 8; }
else if ($theExp < 1178) { $theLevel = 9; }
else if ($theExp < 1390) { $theLevel = 10; }
else if ($theExp < 1624) { $theLevel = 11; }
else if ($theExp < 1884) { $theLevel = 12; }
else if ($theExp < 2172) { $theLevel = 13; }
else if ($theExp < 2492) { $theLevel = 14; }
else if ($theExp < 2845) { $theLevel = 15; }
else if ($theExp < 3237) { $theLevel = 16; }
else if ($theExp < 3671) { $theLevel = 17; }
else if ($theExp < 4151) { $theLevel = 18; }
else if ($theExp < 4683) { $theLevel = 19; }
else if ($theExp < 5273) { $theLevel = 20; }
else if ($theExp < 5926) { $theLevel = 21; }
else if ($theExp < 6650) { $theLevel = 22; }
else if ($theExp < 7451) { $theLevel = 23; }
else if ($theExp < 8339) { $theLevel = 24; }
else if ($theExp < 9322) { $theLevel = 25; }
else if ($theExp < 10412) { $theLevel = 26; }
else if ($theExp < 11618) { $theLevel = 27; }
else if ($theExp < 12955) { $theLevel = 28; }
else if ($theExp < 14436) { $theLevel = 29; }
else if ($theExp < 16076) { $theLevel = 30; }
else if ($theExp < 17893) { $theLevel = 31; }
else if ($theExp < 19906) { $theLevel = 32; }
else if ($theExp < 22137) { $theLevel = 33; }
else if ($theExp < 24607) { $theLevel = 34; }
else if ($theExp < 27345) { $theLevel = 35; }
else if ($theExp < 30377) { $theLevel = 36; }
else if ($theExp < 33737) { $theLevel = 37; }
else if ($theExp < 37460) { $theLevel = 38; }
else if ($theExp < 41584) { $theLevel = 39; }
else if ($theExp < 46154) { $theLevel = 40; }
else if ($theExp < 51217) { $theLevel = 41; }
else if ($theExp < 56827) { $theLevel = 42; }
else if ($theExp < 63042) { $theLevel = 43; }
else if ($theExp < 69929) { $theLevel = 44; }
else if ($theExp < 77560) { $theLevel = 45; }
else if ($theExp < 86015) { $theLevel = 46; }
else if ($theExp < 95383) { $theLevel = 47; }
else if ($theExp < 105764) { $theLevel = 48; }
else if ($theExp < 117266) { $theLevel = 49; }
else if ($theExp < 130010) { $theLevel = 50; }
else if ($theExp < 144132) { $theLevel = 51; }
else if ($theExp < 159781) { $theLevel = 52; }
else if ($theExp < 177120) { $theLevel = 53; }
else if ($theExp < 196333) { $theLevel = 54; }
else if ($theExp < 217623) { $theLevel = 55; }
else if ($theExp < 241215) { $theLevel = 56; }
else if ($theExp < 267356) { $theLevel = 57; }
else if ($theExp < 296323) { $theLevel = 58; }
else if ($theExp < 328421) { $theLevel = 59; }
else if ($theExp < 363990) { $theLevel = 60; }
else if ($theExp < 403404) { $theLevel = 61; }
else if ($theExp < 447078) { $theLevel = 62; }
else if ($theExp < 495475) { $theLevel = 63; }
else if ($theExp < 549104) { $theLevel = 64; }
else if ($theExp < 608531) { $theLevel = 65; }
else if ($theExp < 674384) { $theLevel = 66; }
else if ($theExp < 747357) { $theLevel = 67; }
else if ($theExp < 828220) { $theLevel = 68; }
else if ($theExp < 917826) { $theLevel = 69; }
else if ($theExp < 1017122) { $theLevel = 70; }
else if ($theExp < 1127154) { $theLevel = 71; }
else if ($theExp < 1249084) { $theLevel = 72; }
else if ($theExp < 1384199) { $theLevel = 73; }
else if ($theExp < 1533925) { $theLevel = 74; }
else if ($theExp < 1699840) { $theLevel = 75; }
else if ($theExp < 1883698) { $theLevel = 76; }
else if ($theExp < 2087436) { $theLevel = 77; }
else if ($theExp < 2313207) { $theLevel = 78; }
else if ($theExp < 2563392) { $theLevel = 79; }
else if ($theExp < 2840632) { $theLevel = 80; }
else if ($theExp < 3147852) { $theLevel = 81; }
else if ($theExp < 3488295) { $theLevel = 82; }
else if ($theExp < 3865553) { $theLevel = 83; }
else if ($theExp < 4283609) { $theLevel = 84; }
else if ($theExp < 4746873) { $theLevel = 85; }
else if ($theExp < 5260236) { $theLevel = 86; }
else if ($theExp < 5829115) { $theLevel = 87; }
else if ($theExp < 6459514) { $theLevel = 88; }
else if ($theExp < 7158087) { $theLevel = 89; }
else if ($theExp < 7932204) { $theLevel = 90; }
else if ($theExp < 8790038) { $theLevel = 91; }
else if ($theExp < 9740641) { $theLevel = 92; }
else if ($theExp < 10794045) { $theLevel = 93; }
else if ($theExp < 11961369) { $theLevel = 94; }
else if ($theExp < 13254932) { $theLevel = 95; }
else if ($theExp < 14688387) { $theLevel = 96; }
else if ($theExp < 16276862) { $theLevel = 97; }
else if ($theExp < 18037122) { $theLevel = 98; }
else if ($theExp < 20000000) { $theLevel = 99; }
else { $theLevel = 99; }

return $theLevel;

} 
```

如您所知，我可以使用经验值轻松获得关卡，例如`$currentLevel = getLevelByExp(300)`输出：`3`。

但是，我会做到这一点吗？按级别获取经验，所以如果我输入`getExpByLevel(3)`它会输出：`392`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:51:24.040

这应该可以解决问题

```
// level 0: 0 exp, level 1: 83 exp, level 2: 175 exp, level 3: 278 exp, ...
$levels = array(0, 83, 175, 278 /*, ... */);

// get level for theExp
$theExp = 180;

foreach ($levels as $level => $exp) {
    if($theExp < $exp) break;
}

// output level
echo "the level for {$theExp} is {$level}";
// => 2 
```

使用一些不错的封装来解决这个问题

```
class Player

    static private $levels = array(0, 83, 175, 278);
    static private $max_level = 50;

    private $exp;

    public function __construct($exp) {
        $this->exp = $exp;
    }

    public function getLevel() {

        // find level based on exp
        foreach (self::$levels as $level => $exp) {
            if ($this->exp < $exp)
                return $level;
        }

        // no level found; return max level
        return self::$max_level;
    }
} 
```

这是用法

```
// create new player with 180 exp
$ply = new Player(180);

// get player level
echo $ply->getLevel(); //=> 2 
```

* * *

感谢您的`max level`提示，@EugenRieck

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:56:15.390

```
$EXP_LEVEL_MAP=array (0,83,175,278,392,....20000000);

function lvlFromExp($exp) {
  global $EXP_LEVEL_MAP;
  foreach($EXP_LEVEL_MAP as $k=>$v)
    if ($v>$exp)
      return $k;
  return 99;
}

function expFromLvl($lvl) {
  global $EXP_LEVEL_MAP;
  if ($lvl>99) $lvl=99;
  else if ($lvl<1) $lvl=1M
  return $EXP_LEVEL_MAP[$lvl];
} 
```

# android - 列表视图崩溃应用程序，measureHeightOfChildren 上的 java nullpointer 异常

> ID：13740882
> 
> 赞同：-1
> 
> 时间：2012-12-06T09:47:37.220
> 
> 标签：android, listview, layout, height, adapter

==================这是我的片段：

```
public class ChooseAssigmentFragment extends Fragment {
private ListArrayAdapter listArrayAdapter;

private Assigment assigment;

private Assigments assigments;

private ListView assigList;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.assigments, null);
    init(v);
    assigments = new Assigments();
    assigment = new Assigment("Nikon D700", "aisle 5, range 1m");
    assigments.add(assigment); // daca comentez linia, atuncia functioneaza assigment.name si assigment.details nu is nule
    loadAssigments(assigments);

    return v;
}

private void init(View v) {
    // TODO Auto-generated method stub
    EditText assigSearchET = (EditText) v.findViewById(R.id.assigSearchET);
    ImageButton assigSearcthIB = (ImageButton) v.findViewById(R.id.assigSearchIB);
    assigList = (ListView) v.findViewById(R.id.assigListView);

    assigList.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> assigList, View v, int position, long id) {
            Assigment assigment = ((ListArrayAdapter) assigList.getAdapter()).getItem(position);
            LogService.log(getTag(), "position: " + assigList.getAdapter().getItem(position));

        }
    });

}

private void loadAssigments(Assigments assigments) {

    listArrayAdapter = new ListArrayAdapter(ChooseAssigmentFragment.this, assigments);

    listArrayAdapter.notifyDataSetChanged();
    assigList.setAdapter(listArrayAdapter);
}

} 
```

========================这是我的 ListView 适配器：

```
public class ListArrayAdapter  extends BaseAdapter implements Filterable {
private final LayoutInflater mInflater;
private ChooseAssigmentFragment chooseAssigmentFragment;
private Assigments assigments;
private Object mFilter;

public ListArrayAdapter(ChooseAssigmentFragment chooseAssigmentFragment, Assigments assigments) {
    this.chooseAssigmentFragment = chooseAssigmentFragment;
    this.assigments = assigments;
    mInflater = LayoutInflater.from(chooseAssigmentFragment.getActivity());
}

public int getCount() {
    return assigments.size();
}

public Assigment getItem(int position) {
    return assigments.get(position);
}

public long getItemId(int position) {
    return position;
}

public Assigment getAssigments(int i) {
    return assigments.get(i);
}

public Filter getFilter() {
    if (mFilter == null) {
        mFilter = new ItemFilter();
    }
    return (Filter) mFilter;
}

public View getView(int position, View convertView, ViewGroup parent) {

    ListContent holder = null;

    Assigment assigment = getAssigments(position);
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.row_layout_main_fragment, null);

        holder = new ListContent();
        holder.assigName = (TextView) convertView.findViewById(R.id.listItemName);
        holder.assigDetails = (TextView) convertView.findViewById(R.id.listItemDetails);

        convertView.setTag(holder);
    } else {
        holder = (ListContent) convertView.getTag();

    }
    holder.assigName.setText(assigment.name);
    holder.assigDetails.setText(assigment.details);

    return null;
}
private class ItemFilter extends Filter {
    @Override
    protected FilterResults performFiltering(CharSequence prefix) {
        return null;

    }

    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {

    }
}

class ListContent {
    TextView assigName;
    TextView assigDetails;

}
} 
```

=================我的 Inflater xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout02"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="#FFFFFF"
    android:orientation="vertical"
    android:paddingLeft="5dp" >

<TextView android:id="@+id/listItemName" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:layout_weight="1"
    android:text="@+id/listItemName" android:textSize="18dp"
    android:lineSpacingExtra="15dp" android:textStyle="bold"
    android:textColor="@color/Black">
</TextView>

<TextView android:id="@+id/TextView02" android:layout_width="wrap_content"
    android:layout_height="1dp">
</TextView>

<TextView android:id="@+id/listItemDetails" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:layout_weight="1"
    android:text="@+id/listItemDetails" android:textSize="14dp"
    android:lineSpacingExtra="15dp"
    android:textColor="@color/DarkGray">
</TextView>

</LinearLayout> 
```

====================我的xml片段文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/white"
    android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/RelativeLayout2"
    android:layout_width="match_parent"
    android:layout_height="20dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@color/SlateGray"
    android:gravity="center"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_gravity="center"
        android:text="@string/sensor_conf" />
</RelativeLayout>

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="45dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/RelativeLayout2"
    android:weightSum="8" >

    <EditText
        android:id="@+id/assigSearchET"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="7" >

        <requestFocus />
    </EditText>

    <ImageButton
        android:id="@+id/assigSearchIB"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="0.99"
        android:background="@color/white"
        android:src="@drawable/ic_action_search" />
</LinearLayout>

<ListView
    android:id="@+id/assigListView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/linearLayout1"
    android:layout_centerHorizontal="true" >
</ListView>

</RelativeLayout> 
```

=================这就是我的Logcat给我的：

```
12-06 11:35:54.156: E/AndroidRuntime(26171): FATAL EXCEPTION: main
12-06 11:35:54.156: E/AndroidRuntime(26171): java.lang.NullPointerException
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.AbsListView.obtainView(AbsListView.java:2048)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.ListView.onMeasure(ListView.java:1127)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.View.measure(View.java:8459)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.RelativeLayout.measureChild(RelativeLayout.java:566)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:381)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.View.measure(View.java:8459)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.View.measure(View.java:8459)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:581)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:365)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.View.measure(View.java:8459)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.View.measure(View.java:8459)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.RelativeLayout.measureChildHorizontal(RelativeLayout.java:581)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:365)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.View.measure(View.java:8459)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.View.measure(View.java:8459)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.View.measure(View.java:8459)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.ViewRoot.performTraversals(ViewRoot.java:864)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1902)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.os.Looper.loop(Looper.java:130)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at android.app.ActivityThread.main(ActivityThread.java:3744)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at java.lang.reflect.Method.invokeNative(Native Method)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at java.lang.reflect.Method.invoke(Method.java:507)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
12-06 11:35:54.156: E/AndroidRuntime(26171):    at dalvik.system.NativeStart.main(Native Method) 
```

我尝试更改片段 xml，只包含列表，尝试更改膨胀的 xml，但仍然没有运气。我没有任何想法

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T09:56:16.937

您的适配器的 getView() 返回 null。您应该返回 convertView：

```
public View getView(int position, View convertView, ViewGroup parent) {

    ListContent holder = null;

    Assigment assigment = getAssigments(position);
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.row_layout_main_fragment, null);

        holder = new ListContent();
        holder.assigName = (TextView) convertView.findViewById(R.id.listItemName);
        holder.assigDetails = (TextView) convertView.findViewById(R.id.listItemDetails);

        convertView.setTag(holder);
    } else {
        holder = (ListContent) convertView.getTag();

    }
    holder.assigName.setText(assigment.name);
    holder.assigDetails.setText(assigment.details);

    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:56:14.287

在我的 getView 方法的适配器中，我忘了更改：

```
 return null; 
```

到：

```
return convertView; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-17T09:57:29.530

你返回空值；请尝试更改并返回 View 对象。

# ios - UIScrollView 移动调整 UITextView 的大小

> ID：13740883
> 
> 赞同：0
> 
> 时间：2012-12-06T09:47:47.377
> 
> 标签：ios, xcode, cocoa, ios5, ios6

我有一个奇怪的问题，我正在使用 IOS6，我试图让 UIScrollView 根据其中的内容调整大小，有 3 个 UITextView（2 个固定高度和 1 个动态高度）。问题似乎是，当您向下滚动滚动视图时，具有动态高度的 UITextView 将恢复到以前在 Interface Builder 中设置的高度。我在下面放置了代码来显示我如何设置滚动高度和 UITextView 高度。

```
- (void)viewDidAppear:(BOOL)animated {

CGRect frame = description.frame;
frame.size = description.contentSize;
description.frame = frame;

CGFloat scrollViewHeight = 0.0f;

scrollViewHeight = 160 + description.contentSize.height;

NSLog(@"%f",description.contentSize.height);

[scrollView setContentSize:(CGSizeMake(320, scrollViewHeight))];

} 
```

要扩展，UITextView 似乎不会扩展到 UIScrollView 的可滚动区域，而是只会扩展到滚动视图的初始设置高度

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:04:05.800

事实证明，这是导致问题的布局约束。

# angularjs - angularjs位置范围

> ID：13740885
> 
> 赞同：4
> 
> 时间：2012-12-06T09:47:55.833
> 
> 标签：angularjs

我对 AngularJS 范围和位置有一些问题。这是一个例子：

```
function CreateAccountCtrl($scope, $http, $location) {
    ...
    $http.post(url,$scope.form).
        success(function(data){
            $location.path('/'); // I need to transfert data to the location 
        }
} 
```

我的问题是：我想将数据传输到 / 控制器，我想使用 rootScope 但我认为这不是最好的方法。

任何想法 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-17T10:43:45.960

您可以使用*$rootScope*在控制器之间发送数据。*$routeParams*不允许发送复杂的数据结构。让我们来看看它。

将成功回调的返回数据分配给*$rootScope*中的变量。导航到 AccountController。

```
function CreateAccountCtrl($scope, $http, $location,$rootScope ) {
    ...
    $http.post(url,$scope.form).
        success(function(data){
            $rootScope.accountInfo = data; 
            $location.path('/account');
        }
} 
```

在*$routeProvider*中配置路由：

```
$routeProvider.when('/account', {
    template: 'account.html',
    controller: AccountCntl  
}); 
```

在 AccountController 中可以访问*$rootScope*上的数据。

```
function AccountCtrl($scope, $rootScope) {
    $scope.accountInfo = $rootScope.accountInfo;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T10:18:36.213

使用 $routeParams 服务。

```
function CreateAccountCtrl($scope, $http, $location) {
    ...
    $http.post(url,$scope.form).
        success(function(data){
            $location.path('/account/' + data.accountId);
        }
} 
```

在 $routeProvider 中配置路由：

```
$routeProvider.when('/account/:accountId', {
    template: 'account.html',
    controller: AccountCntl  
}); 
```

您的 AccountController 现在可以访问数据：

```
function AccountCtrl($scope, $routeParams) {
    $scope.accountId = $routeParams.accountId;
} 
```

# java - Android Matrix如何使用指定的点进行旋转？

> ID：13740886
> 
> 赞同：1
> 
> 时间：2012-12-06T09:47:56.870
> 
> 标签：java, android

默认旋转中心是 View center ，但现在我想从底部旋转矩阵？

Android API 有一个方法：但我不知道参数是什么意思。

公开声明`boolean android.graphics.Matrix.postRotate(float degrees, float px, float py)`

使用指定的旋转对矩阵进行后连接。M' = R(度, px, py) * M

参数：度数px py

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:55:31.303

`px`和的值是要围绕其旋转的对象`py`的点。`pivot`

# html - 单选按钮的 Hotmail 和 Outlook 问题

> ID：13740890
> 
> 赞同：0
> 
> 时间：2012-12-06T09:48:13.820
> 
> 标签：html, email, hotmail

最近我实施了一个系统，客户可以通过电子邮件提供有关客户服务的反馈。发送给他们的电子邮件包括两个单选按钮、一个评论文本输入框和一个提交按钮。该解决方案已在 Gmail 中进行了测试并且运行良好，但是我们收到的报告称 Hotmail、Outlook 以及我们所知道的其他人也存在问题。

在 Hotmail 中测试后，我们发现无法选择单选按钮，提交按钮没有任何作用，而在 Outlook 中，整个内容显示为文本。

电子邮件从 Salesforce 平台发送，HTML 如下：

```
<p>Hi {!recipient.name},</p>

<p>An issue you raised with us has been marked for closure. We would
appreciate if you could take a few seconds to just let us know whether 
you were satisfied with the resolution.</p>

<p>Your case is number: {!relatedTo.CaseNumber}. The subject for your case is: {!relatedTo.Subject}.</p>

<form method="post" action="www.oursite.com/feedback.php" onsubmit="Disable()">
<input type="radio" name="yesno" value="This issue was resolved." checked="true">This issue was resolved.</input><br></br>
<input type="radio" name="yesno" value="This issue was not resolved">This issue was not resolved.</input>
<p>Anything else we should know? <input type="text" name="comments"></input></p>
<input type="hidden" name="cust" value="{!recipient.name}"></input>
<input type="hidden" name="caseendid" value="{!relatedTo.CaseNumber}"></input>
<input type="hidden" name="caselink" value="https://eu1.salesforce.com/{!relatedTo.Id}"></input>
<input type="submit" name="submit" value="Submit"></input>
</form>

<script>
function Disable()
{
var button;
button = document.getElementByName('submit');
button.enabled = false;
}
</script> 
```

{!some.value} 中包含的任何内容在发送之前都会被 Salesforce 替换为文本。任何人都可以解释为什么我们在 Hotmail 或 Outlook 中遇到问题，因为在 MSDN 上或这里似乎并没有太多关于此的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:52:44.067

`<form>`s 和 HTML 格式的电子邮件混合得非常非常糟糕。

而是向人们发送反馈链接，并在其中使用识别令牌来预填充（使用您喜欢的任何识别数据）在常规 http(s) 网站上托管的常规网页中的表单。

（如果您没有要预先填充的任何数据，您可以给他们一个简单的表单和一个没有识别标记的链接）。

# excel - 从 Excel 导出的 html 中的换行符

> ID：13740894
> 
> 赞同：0
> 
> 时间：2012-12-06T09:48:38.467
> 
> 标签：excel, vba

我有一个关于 Excel 以及它如何将其工作表保存/导出为 html 的问题。

如果我在工作表的未合并单元格中有长文本，并且当我将工作表导出为 wep 页面时，为什么单元格的文本会在 html 源代码中分成多行？

例如，单元格 A1 有文本**选择 X 和 Y，然后运行 ​​XYZ 代码来 blah blah blah**。当工作表保存为网页时，源代码如下所示：

```
<tr height=20 style='height:15.0pt'>
  <td height=20 class=xl1511698 colspan=5 style='height:15.0pt'>Select X and Y,
  and run XYZ code to blah blah blah</td>
 </tr> 
```

**在一行中**选择 X 和 Y，****然后运行 ​​XYZ 代码以将 blah blah blah**插入另一行。有没有办法防止这种情况？一些 VBA 代码或内置设置？**

 **我需要这些信息，因为我有一个宏代码可以扫描导出的 html 文件的每一行以搜索一些文本。如果文本在 html 文件中出现损坏，则宏找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:39:52.050

HTML 文本文件中的行似乎以大约 80 个字符换行。我没有看到任何明显的更改方法，并怀疑由于这样的换行符在 HTML 中通常不重要，因此无法更改。如果我在 Excel 单元格中插入换行符（使用`Alt+Enter`），它会在 HTML 输出中以`<br>`.

你问这个：

> 为什么在html源代码中单元格的文本会分成多行？

..而且答案不是很有用，恐怕：“因为它是那样做的”。

您对文件的外观做出了不合理的假设：不幸的是，在这种情况下，假设被证明是不正确的。您能否使您的代码更智能，以便它在文件中查找文本`<td>`和`</td>`跨物理行的标签？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:34:54.063

好吧，我也找到了解决方法。我使用以下 VBA 代码打开 html 文件进行编辑：

```
Open filePath For Input As #nextFileNum
  oldFileContents = Input$(LOF(nextFileNum), #nextFileNum)
  Close #nextFileNum 
```

然后使用以下几行 VBA 代码，我整理了标签，以便所有文本（实际内容）出现在一行中：

```
oldFileContents = Replace(oldFileContents, vbCrLf, " ")
oldFileContents = Replace(oldFileContents, Chr(13), "")
oldFileContents = Replace(oldFileContents, Chr(10), "")
oldFileContents = Replace(oldFileContents, "&nbsp;", " ")
oldFileContents = Replace(oldFileContents, ">", ">" + vbCrLf)
oldFileContents = Replace(oldFileContents, "</", vbCrLf + "</")
oldFileContents = Replace(oldFileContents, "  ", "") 
```

这会将 html 源代码格式化为：

```
<tr height=20 style='height:15.0pt'>
<td height=20 class=xl1511698 colspan=5 style='height:15.0pt'>
Select X and Y,  and run XYZ code to blah blah blah
</td>
</tr> 
```**

# jsf - 刷新时触发的jsf命令按钮动作

> ID：13740896
> 
> 赞同：2
> 
> 时间：2012-12-06T09:48:39.750
> 
> 标签：jsf, jsf-2

在我的`.xhtml`页面中，我有 2 个`h:commandButton`元素：

```
 <h:commandButton immediate="true" lang="en" class="msbutton"  action="#{user.changeLanguage()}" value="Test1">
 </h:commandButton>
 <h:commandButton immediate="true" lang="en" class="msbutton"  action="#{user.test()}"   value="Test2">
 </h:commandButton> 
```

我的问题是，当我刷新页面时，再次触发最后一次单击的按钮，并执行托管 bean 中的操作。

我不希望在刷新页面时触发该操作。（仅在单击按钮时触发）。

我需要改变什么吗？我需要做什么才能在不触发按钮操作的情况下刷新页面？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:06:23.697

这是由于重新提交表单而发生的。在方法的末尾添加这一行。

```
public void test() {
  .......
  FacesContext.getCurrentInstance().getExternalContext().redirect("current_page.jsf");
} 
```

`current_page`是您当前页面的名称。

# json - 如何反序列化 java pojo 类中的 json 对象？

> ID：13740901
> 
> 赞同：6
> 
> 时间：2012-12-06T09:48:44.043
> 
> 标签：json, web-services, rest, serialization, jaxb

我有一个简单的 JSON 语句，该语句非常符合需要。像这样

```
 {
       actor:{name:"kumar",mbox:"kumar@gmail.com"}
       verb :"completed"
    } 
```

或者

```
{
       actor:{name:["kumar","manish"],mbox:["kumar@gmail.com","manish@gmail.com"]}
       verb :{
            "id" : "http://adlnet.gov/expapi/verbs/completed",
        "display" : {
            "en-US" : "completed"
        }
    } 
```

我正在使用 POJO 类来映射这个 json 字符串，并且 pojo 类代码给出了 bleow

```
@JsonProperty("actor")
Actor actor;
@JsonProperty("verb")
Verb objVerb;
@JsonProperty("verb")
String verb;
public Actor getActor() {
    return actor;
}
public void setActor(Actor actor) {
    this.actor = actor;
}
public Verb getObjVerb() {
    return objVerb;
}
public void setObjVerb(Verb objVerb) {
    this.objVerb = objVerb;
}
@JsonIgnore
public String getVerb() {
    return verb;
}
@JsonIgnore
public void setVerb(String verb) {
    this.verb = verb;
}
public static class Actor {
    String objectType;
    @JsonProperty("name")
    ArrayList<String> listName;
    @JsonProperty("name")
    String name;
    @JsonProperty("mbox")
    ArrayList<String> listMbox;
    @JsonProperty("mbox")
    String mbox;
    @JsonProperty("mbox_sha1sum")
    ArrayList<String> Listmbox_sha1sum;
    @JsonProperty("mbox_sha1sum")
    String mbox_sha1sum;
    @JsonProperty("openid")
    String openid;
    @JsonProperty("account")
    Account account;
    public String getObjectType() {
        return objectType;
    }

    public void setObjectType(String objectType) {
        this.objectType = objectType;
    }

    public ArrayList<String> getListName() {
        return listName;
    }

    public void setListName(ArrayList<String> listName) {
        this.listName = listName;
    }
    @JsonIgnore
    public String getName() {
        return name;
    }
    @JsonIgnore
    public void setName(String name) {
        this.name = name;
    }

    public ArrayList<String> getListMbox() {
        return listMbox;
    }

    public void setListMbox(ArrayList<String> listMbox) {
        this.listMbox = listMbox;
    }
    @JsonIgnore
    public String getMbox() {
        return mbox;
    }
    @JsonIgnore
    public void setMbox(String mbox) {
        this.mbox = mbox;
    }

    public ArrayList<String> getListmbox_sha1sum() {
        return Listmbox_sha1sum;
    }

    public void setListmbox_sha1sum(ArrayList<String> listmbox_sha1sum) {
        Listmbox_sha1sum = listmbox_sha1sum;
    }
    @JsonIgnore
    public String getMbox_sha1sum() {
        return mbox_sha1sum;
    }
    @JsonIgnore
    public void setMbox_sha1sum(String mbox_sha1sum) {
        this.mbox_sha1sum = mbox_sha1sum;
    }

    public String getOpenid() {
        return openid;
    }

    public void setOpenid(String openid) {
        this.openid = openid;
    }

    public Account getAccount() {
        return account;
    }

    public void setAccount(Account account) {
        this.account = account;
    }

    public static class Account {
        @JsonProperty("homePage")
        String homePage;
        @JsonProperty("name")
        String name;
        public String getHomePage() {
            return homePage;
        }
        public void setHomePage(String homePage) {
            this.homePage = homePage;
        }
        public String getName() {
            return name;
        }
        public void setName(String name) {
            this.name = name;
        }
    }
}
public static class Verb {
    String id;
    Map<String,String> display;
    public String getId() {
        return id;
    }
    public void setId(String id) {
        this.id = id;
    }
    public Map<String, String> getDisplay() {
        return display;
    }
    public void setDisplay(Map<String, String> display) {
        this.display = display;
    }
} 
```

我正在使用 jaxb 和 jakson。我正在实现 web 服务来处理 json 语句，所以我使用 bean 类与 json 进行映射。但是当我用来映射这个json时，它给出了以下例外

> org.codehaus.jackson.map.JsonMappingException ：名称为“mbox”的属性有两个条目。

定义适当的 bean 结构，使其直接映射到 bean 类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:19:23.933

尝试只留下`@JsonProperty("mbox") ArrayList<String> listMbox;`字段（不需要`@JsonProperty("mbox") String mbox;`）并添加`Feature.ACCEPT_SINGLE_VALUE_AS_ARRAY=true`到 Jackson 对象映射器配置。

因此，在反序列化中，它将能够同时获得数组和单个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T12:40:48.257

你可以使用gson。

类 cls = gson.fromJson(jsonString, clazz);

这里 jsonString 可以是字符串化的 java 脚本对象。gson.fromJson 方法可以将您的 java 脚本键映射到 java 属性。

# perl - 使用 perl 客户端-服务器（套接字）执行远程命令

> ID：13740906
> 
> 赞同：1
> 
> 时间：2012-12-06T09:49:01.687
> 
> 标签：perl, sockets

我的客户.pl

```
#!/usr/bin/perl
use IO::Socket::INET;
use strict;

my $name = '172.20.10.189'; #Server IP
my $port = '7890';

my $socket = IO::Socket::INET->new('PeerAddr' => $name,
                                   'PeerPort' => $port,
                                'Proto' => 'tcp') or die "Can't create socket ($!)\n";

print "Client sending\n";
while (1) {
    my $msg = <STDIN>;
    print $socket $msg;
    print scalar <$socket>;
}
close $socket
    or die "Can't close socket ($!)\n"; 
```

我的服务器.pl

```
#!/usr/bin/perl
use IO::Socket::INET;
use strict;

my $port = "7890";

my $socket = IO::Socket::INET->new('LocalPort' => $port,
                                   'Proto' => 'tcp',
                                   'Listen' => SOMAXCONN)
    or die "Can't create socket ($!)\n";

while (my $client = $socket->accept) {
    my $name = gethostbyaddr($client->peeraddr, AF_INET);
    my $port = $client->peerport;
    while (<$client>) {
        print "[$name $port] $_";
        my @out = `$_`;
        print @out;
        print $client "$.: @out";
    }
    close $client
        or die "Can't close ($!)\n";
}

die "Can't accept socket ($!)\n"; 
```

我的客户端正在向服务器发送命令（ls -lrt /），服务器应该运行该命令并将输出发送回客户端。

问题：-

该命令在服务器上成功执行，但它只向客户端发送第一行。如果我再次按下客户端的任何键，则下一行输出将发送到客户端。

或者告诉我如何将多行输出发送回客户端。

任何帮助，将不胜感激。

谢谢阿布舍克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:04:50.947

服务器将所有行发送到客户端，但是客户端选择只读取一行：

```
print scalar <$socket>; 
```

如果您删除`scalar`，它应该可以工作。**但是，您的架构仍然是一场安全噩梦。**

*   所有服务器都应该在污点模式下运行（`-T`开关）。
*   永远不要盲目地执行客户发送给您的命令。只执行通过非常严格的验证测试的命令，不要运行看起来没有恶意的命令。
*   也许您正在尝试复制 SSH，您可能想查看该程序。
*   您的服务器不进行任何类型的身份验证。至少它记录所有输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:09:02.423

这是一个愚蠢的错误......我已经解决了第一个问题，如下所示，并在客户端获得了多行输出......

## 客户端.pl

```
#!/usr/bin/perl
use IO::Socket::INET;
use strict;

my $name = '172.20.10.189'; #Server IP
my $port = '7890';

my $socket = IO::Socket::INET->new('PeerAddr' => $name,
                                   'PeerPort' => $port,
                                   'Proto' => 'tcp')
    or die "Can't create socket ($!)\n";
print "Client sending\n";

while (1) {
        my $msg = <STDIN>;
        print $socket $msg;
        while (<$socket>)
        {
                print "\n$_";
        }
} 
```

close $socket or die "不能关闭套接字 ($!)\n";

但还有一个问题——

我希望我的客户一个接一个地发送几个其他命令，直到我手动关闭客户端并接收输出。

问题是 - 它只接收第一个命令的输出..

现在有人可以帮助我吗？

# php - 检查网站的首次访问

> ID：13740907
> 
> 赞同：0
> 
> 时间：2012-12-06T09:49:08.010
> 
> 标签：php, javascript, jquery, html

伙计们，我如何检查用户第一次访问该网站的时间？因为我想在他/她第一次访问该网站时显示一条弹出消息。,我发现[了这个](https://stackoverflow.com/questions/8757449/javascript-jquery-only-gets-executed-on-first-visit-cookie-prevents-it-from-exe)问题和这个网站[http://www.electrictoolbox.com/jquery-cookies/](http://www.electrictoolbox.com/jquery-cookies/)但我不知道如何使用它. 我只是写了一个简单的代码，以便我检查它是如何完成的。

```
<script type="text/javascript">

$.cookie("example", "foo");
alert( $.cookie("example") );

</script> 
```

但它不工作。我在这里做错了什么？或者你可以建议另一种方法。任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:50:59.327

您首先需要检查cookie是否存在，如果存在则检查消息（*请*不要`alert`用于那个），*然后*设置cookie。例如：

```
if (!$.cookie("yourcookie")) {
    // Show a message (please don't use alert)
}
$.cookie("yourcookie", "anything not blank here"); 
```

当然，这只是检查用户没有 cookie，并不一定意味着他们以前从未访问过该站点（因为用户可以清除 cookie）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:54:37.373

1.  从此 URL [https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)下载 js并导入您的代码
2.  您可以设置 cookie`$.cookie("example", "foo");` **或**（`$.cookie("example", "foo", { expires: 7 });`-cookie 持续 7 天）
3.  你可以通过`$.cookie("example");`

使用这些

```
if(!$.cookie("example"))
{
 alert('not 1st time');
}
{
 alert('1st time');
 $.cookie("example", "foo"); //set the cookie
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:55:31.557

在索引页面上检查是否存在某些 cookie，如果没有将 cookie 设置为无限期，下次用户返回页面时，您将知道他已经访问过（如果他没有从浏览器中删除 cookie）。您也可以将他的 IP 地址与其他一些数据一起放入您的数据库中，并从数据库中检查用户是否曾经访问过，但这也是不可靠的，因为您也可以通过多种方式更改您的 IP，这取决于您要实现什么以及如何实现重要的是要知道用户之前是否访问过页面。

# tomcat - 在一台机器上管理多个独立的 Tomcat 服务器

> ID：13740908
> 
> 赞同：0
> 
> 时间：2012-12-06T09:49:17.987
> 
> 标签：tomcat, web-applications, webserver

我想使用 Tomcat 安装几个 webapps，但我不希望它们相互干扰。即：我不希望它们在同一个 tomcat 服务器上工作，因为我希望能够重新启动一个应用程序的 tomcat 而不会损害另一个应用程序的活动。

我知道通过安装几个 tomcat 服务器是可行的，但我更希望有一个中心位置可以为我运行它。

有没有方便的工具让我轻松配置和管理独立的 tomcat 服务器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:17:13.453

看看[Cargo](http://cargo.codehaus.org/Features)， Maven 插件。它允许部署、停止/启动服务器以及许多其他事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T20:27:17.440

看看 www.mulesoft.com/tcat。Tcat 允许您管理多个服务器，将它们放入服务器组并配置部署。部署是一堆应用程序和服务器。您只需要列出要部署的应用程序以及要在其上部署它们的服务器。完成后，您单击一个按钮，Tcat 会将所有应用程序推送到相应的服务器。出现任何问题，您始终可以回滚到以前的部署版本。希望这可以帮助。有关部署的更多信息，请查看[http://www.mulesoft.org/documentation/display/TCAT/Deploying+Applications](http://www.mulesoft.org/documentation/display/TCAT/Deploying+Applications) 免责声明：我管理此产品。

# jquery - Chrome ext，创建 JQuery 对话框的内容脚本需要忽略 iframe

> ID：13740912
> 
> 赞同：0
> 
> 时间：2012-12-06T09:49:21.007
> 
> 标签：jquery, iframe, google-chrome-extension

我有一个简单的 chrome 扩展，可以在我打开的每个选项卡上打开 JQuery 对话框，
问题是当网页中有 iframe 时，对话框打开页面中的 iframe 数量。
我想避免这种情况，我只需要打开它，并且每个页面只有 1 个对话框实例。如何避免页面中的 iframe？
这是我的内容脚本：

```
var layerNode= document.createElement('div');
    layerNode.setAttribute('id','dialog');
    layerNode.setAttribute('title','Basic dialog');
var pNode= document.createElement('p');
    console.log("msg var: "+massage); 
    pNode.innerHTML  = massage;

layerNode.appendChild(pNode);
document.body.appendChild(layerNode);

jQuery("#dialog").dialog({
    autoOpen: true, 
    draggable: true,
    resizable: true,
    height: 'auto',
    width: 500,
    zIndex:3999,
    modal: false,
    open: function(event, ui) {
        $(event.target).parent().css('position','fixed');
        $(event.target).parent().css('top', '5px');
        $(event.target).parent().css('left', '10px');
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:59:19.010

把这一切都包起来怎么样

```
if(window==window.top) {
   // we're not in an iframe
   // your code goes here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T00:55:32.853

As PAEz said in a comment, content scripts run in only the top frame by default. To make them run in subframes, you'd need to have '"all_frames":true' in the [content_scripts section of your manifest](https://developer.chrome.com/extensions/content_scripts.html). Similarly, if you're injecting script using [tabs.executeScript](https://developer.chrome.com/extensions/tabs.html#method-executeScript), you'd have to include '"allFrames":true' in the [InjectDetails](https://developer.chrome.com/extensions/tabs.html#type-InjectDetails) argument.

# java - Java 和 Javascript 中的 XML 正则表达式

> ID：13740913
> 
> 赞同：-1
> 
> 时间：2012-12-06T09:49:35.197
> 
> 标签：java, javascript, xml, regex

我有一种情况，有人为我提供了很多 XML 风格的正则表达式，我需要使用这些正则表达式在 Java 和 Javascript 中进行一些验证。处理那些 XML 风格的正则表达式的最佳原因是什么，因为 XML 风格的正则表达式和 Java 风格或 ECMA（Javascript）风格之间存在差异？

例子

正则表达式：

```
[A-z] 
```

**爪哇**

```
"A" // true
"Ab" // false
"a" // true 
```

**Javascript**

```
"A" // true
"Ab" // true
"a" // true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:38:32.343

您已经链接到 XML 和 ECMAScript 样式正则表达式之间的比较表，因此您可以轻松找出差异。

有一些相关的区别：

*   `\d`并且`\w`仅匹配 JavaScript（和 Java）中的 ASCII 数字/字母数字。
*   JavaScript 不像 XML 和 Java 那样支持 Unicode 字符属性（`\p{L}`等）。
*   Java 和 JavaScript 都不支持 XML 字符转义（如`\i`and `\c`）或字符类减法 ( `[a-z-[aeiou]]`)。

因此，如果您的 XML 正则表达式要使用这些功能中的任何一个，您将无法轻松地转换它们。

[您可以通过使用带有 Unicode 插件的 Steve Levithan 的 XRegExp 包](http://xregexp.com/plugins/)来修复 Unicode 问题，至少可以修复部分问题。在 Java 7 中，您可以为和[开启 Unicode 匹配](https://stackoverflow.com/a/4307261/20670)，这样应该可以解决您的大部分潜在问题。`\d``\w`

但是，可能存在不那么明显的细微实现差异，因此您肯定需要进行一些测试。

# javascript - 对于 Vaadin 应用程序，我如何与 js 文件集成

> ID：13740916
> 
> 赞同：-1
> 
> 时间：2012-12-06T09:49:37.647
> 
> 标签：javascript, vaadin

我创建了一个 vaadin 应用程序，但它需要 javascript 集成。如何将 .js 文件添加到 vaadin 应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:02:14.440

对于 Vaadin 6，您应该能够在 Window 中使用 executeJavascript 方法，如下所示：

```
getWindow().executeJavaScript("alert(\"Hello JavaScript\");"); 
```

# javascript - 否则如果在javascript中

> ID：13740917
> 
> 赞同：0
> 
> 时间：2012-12-06T09:49:41.617
> 
> 标签：javascript

我正在尝试根据用户输入计算字符串并显示一些消息：

```
$('#myInput').keyup(function() {
    if(this.value.length<=158)
     $('#charCount').text('We will deduct 1 credit from your account');
    else if(this.value.length>158 || this.value.length<316)
         $('#charCount').text('We will deduct 2 credit from your account');
    else if(this.value.length>316 || this.value.length<400)
        $('#charCount').text('We will deduct 3 credit from your account');
}); 
```

[http://jsfiddle.net/p9jVB/11/](http://jsfiddle.net/p9jVB/11/)

问题是最后一个`else if`不工作......我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T09:51:18.297

看起来你的意思是 &&，而不是 ||

```
$('#myInput').keyup(function() {
    if(this.value.length<=158)
         $('#charCount').text('We will deduct 1 credit from your account');
    else if(this.value.length>158 && this.value.length<=316)
         $('#charCount').text('We will deduct 2 credit from your account');
    else if(this.value.length>316 && this.value.length<400)
        $('#charCount').text('We will deduct 3 credit from your account');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-06T09:53:22.400

> ```
> else if(this.value.length>158 || this.value.length<316)
>     $('#charCount').text('We will deduct 2 credit from your account');
> else if(this.value.length>316 || this.value.length<400)
>     $('#charCount').text('We will deduct 3 credit from your account'); 
> ```

世界上的每一个数字都大于 158*或*小于 316，所以永远不会达到替代条件。

# c++ - 在 Windows 8 中从开始菜单切换到桌面

> ID：13740920
> 
> 赞同：1
> 
> 时间：2012-12-06T09:49:46.850
> 
> 标签：c++, windows-8, desktop, startmenu

有没有办法以编程方式从开始菜单切换到桌面。例如，如果您有一个在用户登录后运行的服务，并且您希望该服务在用户登录后切换到桌面视图？我似乎找不到解决方法。我试过按windows键的虚拟按键，但没用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:28:48.150

我不确定您所面临的问题究竟是什么。“以编程方式从开始菜单切换到桌面”可以解释为几种不同的方式。

但是，由于您说“您希望该服务切换到桌面”“我尝试按下 windows 键的虚拟按键”，我假设您正在尝试通过服务与桌面上的 windows 进行通信，这是无法完成的。这是设计为一种安全功能。如果您打开任务管理器并查看 -> 选择列 -> 会话 ID，您会注意到服务在会话 0 中运行，而“桌面”应用程序在登录用户的会话中运行。应用程序无法在会话之间通过 Windows 消息进行通信。

有一种解决方法，尽管比简单地发送虚拟按键需要更多的努力。解决方法是让您的服务在用户会话中创建一个进程，然后为您执行任务（例如，您的虚拟按键方法将在此应用程序中工作）。

您需要用来执行此操作的 API 调用是：

`CreateProcessAsUser`

`WTSGetActiveConsoleSessionId`

`WTSQueryUserToken`

`DuplicateTokenEx`

**编辑**

如果你想控制开始菜单，也没有简单的方法。如果一定要这么做，我建议你使用一个叫做 Spy++ 的工具（Visual Studio 自带——见 Microsoft Visual Studio xx\Common7\Tools，或者可以[下载](http://mdb-blog.blogspot.fr/2010/11/microsoft-spy-or-spyxx-for-download.html)）。使用“查找窗口”功能查看按下 Windows 开始按钮时发送到的消息，然后您可以查看要发送到按钮的消息以按您需要的方式控制它。

例如，您可能会看到一条`WM_LBUTTONDOWN`消息发送到开始按钮。切换开始菜单。然后，您可以使用`FindWindow`，也许 with`GetDesktopWindow`来获取开始按钮的句柄，然后发送您想要控制它的消息`SendMessage`。您可能还想检查是否显示了开始菜单，方法是使用相同的过程来获取开始菜单的句柄并使用`IsWindowVisible`.

# orchardcms - Orchard 无法访问媒体文件 - 访问被拒绝

> ID：13740922
> 
> 赞同：1
> 
> 时间：2012-12-06T09:49:56.817
> 
> 标签：orchardcms

我正在尝试在 Orchard amdin 页面中插入图片，但出现错误

```
An unhandled exception has occurred and the request was terminated. Please refresh the page. If the error persists, go back

The folder could not be created at path: . System.UnauthorizedAccessException: Access to the path 'D:\Projects\MySite.Web\Media\Default' is denied. at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) at System.IO.Directory.InternalCreateDirectory(String fullPath, String path, Object dirSecurityObj) at Contrib.MediaFolder.Services.RemoteStorageProvider.ListFolders(String path)

System.ArgumentException: The folder could not be created at path: . System.UnauthorizedAccessException: Access to the path 'D:\Projects\MySite.Site.Web\Media\Default' is denied. at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) at System.IO.Directory.InternalCreateDirectory(String fullPath, String path, Object dirSecurityObj) at Contrib.MediaFolder.Services.RemoteStorageProvider.ListFolders(String path) at Contrib.MediaFolder.Services.RemoteStorageProvider.ListFolders(String path) at Orchard.Media.Services.MediaService.GetMediaFolders(String relativePath) at Orchard.MediaPicker.Controllers.AdminController.Index(String name, String mediaPath) at lambda_method(Closure , ControllerBase , Object[] ) at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.b__12() at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) 
```

我已将所有用户（IUSR、SYSTEm、Administartor、用户）的所有权限设置为 Media 文件夹，但仍然出现错误。请帮我解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-27T08:41:16.090

我有同样的问题，将媒体文件夹的内容复制到一个新文件夹，删除媒体文件夹并将新文件夹重命名为媒体并为 IIS_IUSRS 设置权限，似乎解决了问题。

# android - 在 EditText 之间跳转

> ID：13740928
> 
> 赞同：0
> 
> 时间：2012-12-06T09:50:18.940
> 
> 标签：android, android-layout, android-xml

我有带有 4 个 EditTexts 的 XML 布局，但是然后我专注于首先输入 smth，然后从移动键盘单击下一步按钮，光标跳转到最后一个 edittext，我该如何修复它，每次然后我输入 smth 并单击下一步我跳到下一个，而不是最后一个 EditText。

# ssl - 禁用 CURLOPT_SSL_VERIFYHOST (libcurl/openssl) 的安全后果

> ID：13740933
> 
> 赞同：14
> 
> 时间：2012-12-06T09:50:37.827
> 
> 标签：ssl, curl, openssl, ssl-certificate, libcurl

**启用CURLOPT_SSL_VERIFYPEER**和禁用**CURLOPT_SSL_VERIFYHOST**的安全后果是什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-06T10:56:55.460

*   [CURLOPT_SSL_VERIFYPEER](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTSSLVERIFYPEER)检查远程证书是否有效，即您相信它是由您信任的 CA 颁发的并且它是真实的。

*   [CURLOPT_SSL_VERIFYHOST](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTSSLVERIFYHOST)检查证书是否已颁发给您要与之交谈的实体。

为了将其与现实生活中的场景进行比较，VERIFYPEER 就像检查 ID 的形式是否是您认可的形式（即来自您信任的国家的护照、来自您认识的公司的员工卡……）。VERIFYHOST 就像检查卡上的实际姓名是否匹配您想与之交谈的人。

如果您不使用 VERIFYHOST（正确的值是 2，而不是 1，顺便说一句），您将禁用主机名验证并为 MITM 攻击打开大门：任何拥有您信任的 ID 形式的人都可以冒充您的 ID 集中的任何人信任，例如，任何持有有效护照的人都可以假装自己是持有有效护照的其他任何人。

# javascript - 如何删除特定字符串

> ID：13740935
> 
> 赞同：0
> 
> 时间：2012-12-06T09:50:38.157
> 
> 标签：javascript, jquery

我在画廊中有这些链接：

```
<div id="mygallery">
<ul>
<li><a href="http://farm9.staticflickr.com/8484/824625656895_5e5645636c50d_s.jpg">image 1</a></li>
<li><a href="http://farm9.staticflickr.com/8684/824625654348_5e5546fdcc50d_s.jpg">image 2</a></li>
<li><a href="http://farm9.staticflickr.com/8474/824623123897_f53s3afs6c50d_s.jpg">image 3</a></li>
<li><a href="http://farm9.staticflickr.com/8984/824625656856_5asdfet656655_s.jpg">image 4</a></li>
</ul>
</div> 
```

如何从它们中删除“_s”？所以我最终得到

```
<div id="mygallery">
<ul>
<li><a href="http://farm9.staticflickr.com/8484/824625656895_5e5645636c50d.jpg">image 1</a></li>
<li><a href="http://farm9.staticflickr.com/8684/824625654348_5e5546fdcc50d.jpg">image 2</a></li>
<li><a href="http://farm9.staticflickr.com/8474/824623123897_f53s3afs6c50d.jpg">image 3</a></li>
<li><a href="http://farm9.staticflickr.com/8984/824625656856_5asdfet656655.jpg">image 4</a></li>
</ul>
</div> 
```

[实时复制](http://jsfiddle.net/xKyqY/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:53:07.483

**请参阅下面的更新**

我会做出很大的假设，即您将这些字符串放在数组或其他东西中。

如果是这样：

```
var index;
for (index = 0; index < theArray.length; ++index) {
    theArray[index] = theArray[index].replace("_s.jpg", ".jpg");
} 
```

当您给它一个要搜索的字符串时，`replace`将用您给它的替换字符串替换该字符串的第一次出现。我做了`"_s.jpg"`（替换为`".jpg"`）而不是仅仅`"_s"`出于偏执，以防万一`"_s"`出现得更早。

* * *

果然，更多的信息完全改变了这个问题。

```
​$("a").each(function() {
    this.href = this.href.replace("_s.jpg", ".jpg");
});​​​​​​​​​​​​​​​​​​​ 
```

[更新小提琴](http://jsfiddle.net/xKyqY/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:54:36.540

假设这`string`是网址。

```
string = string.replace("_s", ""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:55:35.270

可以尝试各种格式

```
str.replace('_s.', '.'); 
```

# android - Android -- asnctask 被取消时会发生什么？

> ID：13740947
> 
> 赞同：0
> 
> 时间：2012-12-06T09:51:23.150
> 
> 标签：android, android-asynctask

`AsncTask`取消后会发生什么。

它仍然调用`onPostExecute()`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:53:43.680

答案是**否定**的。正如文档所说：

> [public final boolean cancel (boolean mayInterruptIfRunning)](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29) :
> 
> *调用此方法可确保永远不会调用 onPostExecute(Object)*。调用此方法后，应定期从 doInBackground(Object[]) 中检查 isCancelled() 返回的值，以尽早完成任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T09:53:46.923

来自官方java文档：

> 可以通过调用 cancel(boolean) 随时取消任务。调用此方法将导致对 isCancelled() 的后续调用返回 true。**调用此方法后，将在 doInBackground(Object[]) 返回后调用 onCancelled(Object)，而不是 onPostExecute(Object)。**为了确保尽快取消任务，如果可能（例如在循环内），您应该始终从 doInBackground(Object[]) 定期检查 isCancelled() 的返回值。

和方法java doc：

```
public final boolean cancel (boolean mayInterruptIfRunning) 
```

> 尝试取消此任务的执行。如果任务已完成、已被取消或由于其他原因无法取消，则此尝试将失败。如果成功，并且在调用取消时此任务尚未启动，则此任务不应该运行。如果任务已经开始，则 mayInterruptIfRunning 参数确定是否应该中断执行该任务的线程以尝试停止该任务。
> 
> 调用此方法将导致在 doInBackground(Object[]) 返回后在 UI 线程上调用 onCancelled(Object)。**调用此方法可确保永远不会调用 onPostExecute(Object)。**调用此方法后，应定期从 doInBackground(Object[]) 中检查 isCancelled() 返回的值，以尽早完成任务。

# triggers - Sybase IQ：将一个用户的表的权限授予另一个用户

> ID：13740948
> 
> 赞同：0
> 
> 时间：2012-12-06T09:51:29.887
> 
> 标签：triggers, grant, rights, sap-iq

我正在寻找一种将**一个用户****的所有表上**的某些**权利**（比如 SELECT）授予**其他用户**的方法。像这样的东西：

 ******```
GRANT SELECT ON Username1.* to Username2 
```

重要的条件是我**不仅**需要授予对**所有现有表**的权限，而且我还希望默认情况下将由 Username1**创建的****所有表****都应授予**对 Username2 的对应权限

 ****我所做的是创建一个外部脚本来选择由 Username1 创建的所有表：

```
SELECT table_name FROM systable WHERE creator IN (SELECT user_id from sysuser WHERE username='Username1')) 
```

并为它们中的每一个生成 GRANT 语句。

但是，我需要在创建新表后立即执行该脚本。从数据库中获得授权逻辑并不是很优雅。我希望在数据库中有某种触发器，但 Sybase IQ 不支持触​​发器。

有人知道如何以优雅的方式解决问题吗？**********

# directx - .x 文件中逗号 (,) 的含义是什么

> ID：13740951
> 
> 赞同：0
> 
> 时间：2012-12-06T09:51:49.170
> 
> 标签：directx, directx-9

我正在加载和编写 DirectX .x 文件。我正在尝试以加载文件的方式关注第三方应用程序。如果我有以下网格：

网格 obj1 {

```
4;

6.500000;-3.656250;0.000000;,
-6.500000;3.656250;0.000000;,
-6.500000;-3.656250;0.000000;,
6.500000;3.656250;0.000000;; 
```

在这种情况下，即使我删除逗号并将所有内容写在一行中，第三方工具仍然能够加载文件。

我找不到描述逗号角色的适当文档。很有可能只有这个工具以这种方式加载它。您能否告诉我逗号在 .x 文件中的作用（特别是在 Mesh 中）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:56:16.783

逗号用于分隔数组成员。有关简要说明，请点击链接[http://paulbourke.net/dataformats/directx/#xfilefrm_Use_of_commas](http://paulbourke.net/dataformats/directx/#xfilefrm_Use_of_commas)

# jquery-gmap3 - 添加标记后jQuery GMAP3自动居中

> ID：13740952
> 
> 赞同：0
> 
> 时间：2012-12-06T09:51:49.267
> 
> 标签：jquery-gmap3

我在某些国家/地区有一个选择元素，当触发“更改”时，我调用一个函数来获取坐标然后添加标记。没关系，但是当添加标记时，标记没有居中。

我正在使用最新版本 5.0b。

```
// get coords
$gmap.gmap3({
    getlatlng: {
        address: complete_address,
        callback: function(result){
            if(result) {
                var i = 0;
                $.each(result[0].geometry.location, function(index, value) {
                    if(i == 0) { lat = value; }
                    if(i == 1) { lng = value; }
                    i++;
                });

                // add marker
                $gmap.gmap3({
                    marker: {
                        address: complete_address,
                        options: {
                            draggable: false,
                            animation: google.maps.Animation.DROP
                        }
                    },
                    map:{
                        options:{
                            center:[lat, lng],
                            zoom: zoom
                        }
                    }
                });

            }
        }
    }
}); 
```

我进入控制台：“未捕获的**错误：不正确的值：51.919438,19.14513599999998** ”

任何提示将不胜感激。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:11:32.747

刚发现，

```
center: new google.maps.LatLng(lat, lng), 
```

# c# - Json.NET - 在反序列化期间在属性设置器中抛出异常

> ID：13740957
> 
> 赞同：6
> 
> 时间：2012-12-06T09:52:09.420
> 
> 标签：c#, json.net

我使用属性设置器来验证 C# 类中的输入并在无效输入上抛出异常。我还使用 Json.NET 将 json 反序列化为对象。问题是我不知道在哪里捕获 setter 抛出的无效 json 值的异常。异常不会从`JsonConvert.DeserializeObject`方法中抛出。

```
public class A{
    private string a;

    public string number{
        get {return a;}
        set {
            if (!Regex.IsMatch(value, "^\\d+$"))
                throw new Exception();
            a = value;
        }
    }
}

public class Main
{
    public static void main()
    {
         // The Exception cannot be caught here.
         A a = JsonConvert.DeserializeObject<A>("{number:'some thing'}");
    }    
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T10:03:28.557

您需要在反序列化对象时订阅错误：

```
 JsonConvert.DeserializeObject<A>("{number:'some thing'}",
            new JsonSerializerSettings
            {
                Error = (sender, args) =>
                {
                    Console.WriteLine(args.ErrorContext.Error.Message);
                    args.ErrorContext.Handled = true;
                }
            }); 
```

如果您删除`args.ErrorContext.Handled = true`语句，则 setter 中引发的异常将从`JsonConvert.DeserializeObject`方法中重新抛出。它将被包裹在`JsonSerializationException`("Error setting value to 'number'") 中。

# node.js - 初始化 NodeJS 服务器示例

> ID：13740964
> 
> 赞同：0
> 
> 时间：2012-12-06T09:52:23.387
> 
> 标签：node.js, webserver

[我在这里](http://nodejs.org/api/net.html#net_net_createserver_options_connectionlistener)看到了下一个例子

```
var net = require('net');
var server = net.createServer(function(c) { //'connection' listener
  console.log('server connected');
  c.on('end', function() {
    console.log('server disconnected');
  });
  c.write('hello\r\n');
  c.pipe(c);
});
server.listen(8124, function() { //'listening' listener
  console.log('server bound');
}); 
```

所以`createServer()`有一个匿名函数作为参数。我看到它的方式这个函数监听并发送回它收到的任何内容，即`c`.

到目前为止我是对的吗？`c`来自哪里？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:56:13.613

该`c`变量是在`net.createServer`函数内部创建的。`c`通过作为参数给`createServer`函数的回调返回。

例子：

```
function createServer(callback) {
   var c = "hello world";
   callback(c);
}

createServer(function(c) {
   console.log(c); // Hello world
}); 
```

在您的情况下，`c`当然不是字符串。这只是为了举例。这是另一个对象：套接字。

# ios - 使用引号字符搜索时崩溃

> ID：13740972
> 
> 赞同：0
> 
> 时间：2012-12-06T09:52:44.327
> 
> 标签：ios, core-data, nspredicate

我有一个搜索字段，并且使用以下命令针对 CoreData 触发文本：

```
produkt.name CONTAINS[cd] %@ 
```

但是当用户键入时这会崩溃`'`，因为该`'`字符弄乱了我的查询：

> 由于未捕获的异常 NSInvalidArgumentException 导致应用程序终止
> 原因：无法解析格式字符串 produkt.name CONTAINS[cd]。

CoreData 中没有选项来处理这个问题吗？我无法想象我必须自己逃离它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T04:51:15.037

您不必进行任何字符替换。我猜你正在像这样创建你的谓词：

```
NSString *s = [NSString stringWithFormat:@"produkt.name CONTAINS[cd] '%@'", term];
NSPredicate *p = [NSPredicate predicateWithFormat:s]; 
```

那是不正确的。您需要做的就是：

```
NSPredicate *p = [NSPredicate predicateWithFormat:@"produkt.name CONTAINS[cd] %@", term]; 
```

无论搜索词中的任何单引号等如何，这都将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:37:44.817

您可以用 string 替换该字符串`'`，`''`例如

```
string = [string stringByReplacingOccurrencesOfString:@"'" withString:@"''"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T13:18:38.377

我想，它会解决这个问题的。

下面是我尝试过的，并在搜索框中将**Oh ' gd '作为字符串传递。**

```
- (void) stringWithPredicateText : (NSString *)predicateText {

    if ([predicateText length] >0) {
        NSLog(@"predicateText = (%@)",predicateText);
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"location contains[cd] %@",predicateText];
        NSLog(@"Predicate = <%@>",predicate);
    }   

} 
```

输出 ：

测试[52856:707] predicateText = (Oh ' gd ")

测试[52856:707] 谓词 = (位置 CONTAINS[cd] "Oh ' gd \"")

在这里您可以看到谓词文本和谓词格式正确，它已经处理了 ' 和 " 字符，并且我的应用程序没有崩溃。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T10:35:30.267

If you do not need to search for the `'` character, you can simply exclude it from the search field in your text field delegate callback:

```
- (BOOL)textField:(UITextField *)textField 
     shouldChangeCharactersInRange:(NSRange)range 
     replacementString:(NSString *)string {

   if ([string isEqualToString:@"'"]) return NO;
   return YES;
} 
```

You could also remove the offending character directly when constructing the predicate.

```
[NSPredicate predicateWithFormat:@"produkt.name CONTAINS[cd] %@",
  [searchString stringByReplacingOccurrencesOfString:@"'" withString:@""]]; 
```

# python - 引发错误与返回 False python3

> ID：13740975
> 
> 赞同：2
> 
> 时间：2012-12-06T09:52:56.413
> 
> 标签：python, return, raise, try-except

嗨，我最近开始用 python 编码，我想知道如何处理错误。我做了教程diveintopython，在那里他使用raise error来反馈出了什么问题。这是我的情况：我有一个函数可以检查代表数字的字符串是否为 7 位或 8 位长以及其他一些东西

```
def checkNumber( someNumber ):
  ''' checks if Number is valid '''
  someNumber = str(someNumber);
  if not 6 < len(someNumber) < 9:
     raise ValueError('number must be either 7 or 8')
  if not re.search('^[0-9]{7,8}$', someNumber):
     raise ValueError('only digits from 0...9')
  sum = 0
  if len(pzn) == 7: someNumber = '0' + someNumber
  for n, a in list(enumerate(someNumber[:-1], start=1)):
     sum += int(a)*n
  if someNumber[-1]==str(sum%11):
     return someNumber
  else:   
     raise ValueError('not a vaild code') 
```

我单独使用这个函数，但我也会从另一个函数调用它，它扫描条形码并调用这个函数来验证代码。因此，如果扫描编号正确，则应继续扫描，否则应继续扫描。像我一样做它并在扫描仪功能中放置一个 try/except 块会更好还是我应该返回一个 False

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T09:59:16.403

最好提出一个异常，这就是异常的用途。

此外，返回将需要您的代码来处理测试和`False`之间的差异。突然你需要测试你的函数的返回值。`0``False`

你的职能似乎确实受到人格分裂的影响。一方面，您将其命名为`checkNumber`，并且您的文档声称它正在检查该号码是否有效。另一方面，它正在*转换*、更改该数字、将其转换为字符串，甚至在全局长度为 7 的情况下将 a 添加`0`到它前面。`pzn`

如果你的函数所做的只是测试数字是否有效，那么返回一个布尔值是有意义的。然后，使用异常可以为您提供有关验证失败性质的更多信息，但如果您不需要该信息，则布尔值可能就足够了。

但是，如果您还需要将您的号码转换为不同的类型和格式，您需要重命名您的函数，然后验证错误确实是正常行为的一个例外。然后期望函数返回转换后的值，并且无效输入应该引发异常以指示由于输入中的某些错误它无法返回正常值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T10:19:09.117

纯粹主义者会说，在 Python 中*“请求宽恕比请求许可更容易”*，这意味着您应该始终尽可能使用异常。

**我也更喜欢在有意义**的时候使用异常。对于直观地应该返回`True`或`False`（例如类似的东西`is_valid_number()`）的方法，我只是发现更明显/可读的只是返回布尔值而不引发任何异常。

现在对于像这样的方法`convert_number()`，您希望使用异常，否则返回代码的处理可能会使您的代码变得一团糟。

从您的代码中，我发现您`return someNumber`最后不应该这样做；你可以简单地返回`True`或`False`。

如果您对检查失败的原因感兴趣，那么使用异常是可行的方法，因为您可以干净利落地向调用者返回“错误消息”。在这种情况下，您也不需要返回任何内容，您调用它并且它没有引发任何异常的事实已经意味着该数字是有效的。

最后，如果您的意图是将数字转换为其他内容，那么您的方法应该被调用`convert_number()`，如果一切正常，则返回数字，并在出现错误时引发异常。

# c# - 下载同名文件时BackgroundWorkers冲突，我该如何解决？

> ID：13740980
> 
> 赞同：0
> 
> 时间：2012-12-06T09:53:22.697
> 
> 标签：c#, backgroundworker

我正在制作一个程序，它从互联网上下载照片并将其保存到一个名为“temp.jpg”的文件中。例如，我的程序用户`BackgroundWorker`和我有一个问题，我第二次运行`BackgroundWorker`我的程序尝试打开“temp.jpg”，但它仍然被第一个`BackgroundWorker`.

任何建议如何解决这个问题？

一个解决方案可能是通过时间戳或类似的东西来命名文件。

要将照片下载到我正在使用的 temp.jpg

```
WebClient webClient = new WebClient();
try
{
    webClient.DownloadFile(foto, path);
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

问题是第一个正在使用“temp.jpg” `BackgroundWorker`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:58:10.993

文件访问是一个主要的瓶颈。时间戳不是一个奇怪的解决方案。

使用以下内容创建文件名：-

```
string outFile = 
  String.Format("temp_{0:dd}_{0:MMM}_{0:yyyy}_{0:hh}_{0:mm}_{0:ss}_{0:fff}.jpg",
    DateTime.Now); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:00:10.490

**编辑**

`WebClient.DownloadFile`为您处理文件流的管理，因此，这不是您处理流对象或释放文件句柄的问题。

您需要确保每个并发调用`WebClient.DownloadFile`都使用唯一的文件名。

框架可以使用该[`Path.GetTemporaryFileName`](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)方法生成唯一的临时文件名。

* * *

您应该确保您正在关闭文件并在后台工作人员中释放句柄，这通常通过文件流[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)周围的块来实现。`IDisposable`

If you want to download files concurrently i.e. on multiple background workers at once, then each worker will need a unique file name but, if this is a problem for a repeated run of a single background worker, unique names is not the right solution. Hiding the problem by using new unique filenames will just leak resources.

# c# - Linq 和 Odata 过滤器，展开并选择

> ID：13740981
> 
> 赞同：0
> 
> 时间：2012-12-06T09:53:25.077
> 
> 标签：c#, sql, linq, entity-framework, odata

我刚开始学习一些 Odata，并且在我提出的一些问题上需要帮助。

我们以 2-3 个 Linq 查询为例。 *（注：查询列表）*

```
 1) var one  =  Users.Single(s => s.ID == 1).Sources.Where(s =>s.Genre.Name == "Sport").ToList();

      2) var second = TvSchedules.Where(s => s.Date.Day == DateTime.Today && s.Source.Type == "Channel"). Select(s => new {s.Media.Title,s.Media.Details.Description,s.Media.Images.FirstOrDefault(a=>a.ID==s.Media.ID).Link, s.Source.Sign}).ToList();

      3) var third = TvSchedules.Where(s => s.Date < week && s.Media.Metadata.Select(a => a.IsHD).Contains(true)).Select(s => new { s.Media.Title, s.Media.Details.Description, s.Media.Images.FirstOrDefault().Link, s.Media.Metadata.FirstOrDefault().PriceSD, s.Media.RTRating }).ToList(); 
```

这些查询是为了什么？ *（注意：解释查询列表）*

```
1) I am selecting all Sources from User with ID=1 where source genre = 'Sport' ( I use User and Sources database tables )

2) I am querying only TVSchedules from Today where TVSchedules.Sources.Name = 'Channel' and I am selecting from TvSChedules.Media ( Title ), TvSchedules.Media.Details( Description), TvSchedules.Media.Images( Link ), TvSchedules.Source.Sign       

  In TvSchedules database table I have 2 FK ( MediaID, SourceID )

3) Like the second one, but I add some filters. I want to check if TvSchedules.Media.Metadata.isHd ==true 
```

**我的问题** *（注意：基于上述查询的问题）*

问题 A) 这些查询在 Linq 中是否正确？我不确定多对多关系。

例如，在第三个示例中，媒体和元数据之间存在多对多关系（ **TvSchedules.Where(s => s.Date < week && s.Media.Metadata.Select(a => a.IsHD)。包含（真））** ）。我只需要选择**date < week 和 Media.Metada.isHd=true**的 TvSchedules 。

我的**TvSchedules**表看起来像这样

```
ID     MediaID    SourceID   Date
--     ------     --------   ---- 
```

问题 B）如何在 ODATA（开放数据协议）查询中翻译这些查询？

```
 1)  /Users(1)/AvailableSources?&filter=Genres eq 'Sport'
    2)  /TvSchedules?&filter=Date eq '@today'?$expand=Media,Details,Images?$select=Title,Description,Link 
    3) ? 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:07:10.440

除了第一个之外，这种查询在语法和语义上都是正确的，但它们在可读性、性能方面也存在问题，并且因为很难构成 odata 过滤条件。

我走了那条路，你越往前走，就越痛苦。我的建议是为他们创建 sql 视图：

1.  没关系，因为它很简单。
2.  创建 Today_TV_Schedule sql 视图
3.  创建 Today_HDTV_Schedule（它使用 Today_TV_Schedule）

在此之后，映射您的实体，您将能够使其更容易：

```
var second = TvSchedules;
var third = HdTvSchedules; 
```

OData 查询也将更容易。请考虑我的建议。

祝你好运！

# php - 加载 jQuery 字符集

> ID：13740982
> 
> 赞同：3
> 
> 时间：2012-12-06T09:53:34.463
> 
> 标签：php, jquery

我有 2 个 php 文件。`index.php`和`preview.php`

在顶部`index.php`我有这个代码

```
<meta http-equiv='Content-Type' content='Type=text/html; charset=utf-8'> 
```

当我尝试使用以下内容加载内容`index.php`时`preview.php`：

```
function preview_content(id)
{

    var thebutton = '#previewButton';
    $(thebutton).hide();
    $('#preview_area').load('preview.php?id='+id);
} 
```

加载了这样的字符的内容`M�laga CF`

我试图将相同的`utf-8`代码放在顶部，`preview.php`但没有任何改变。有没有办法用`UTF-8`字符集检索内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:14:21.013

请确定`preview.php`' 的编码是`UTF-8`. 您的编辑器的默认编码适用于新创建的文件，但如果您`preview.php`从其他地方复制它的编码可能会有所不同。还添加`header('charset=utf-8');`作为第一行`preview.php`可能会有所帮助。像这样;

```
<?php
header('charset=utf-8');
// your code below here
.
.
. 
```

您也可以使用`.ajax()`和指定`contentType`来代替`.load()`;

```
function preview_content(id)
{

    var thebutton = '#previewButton';
    $(thebutton).hide();
    $.ajax({
        data: { "id" : id },
        type: "GET",
        url: "preview.php",
        contentType: "application/x-www-form-urlencoded;charset=UTF-8",
        success: function(output) {
            $('#preview_area').html(output);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:20:36.303

元内容属性没有“Type=”部分

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-19T03:55:09.113

Emre Erkan 的解决方案是正确的，但它需要在 "header('...')" 之前使用 "echo"

在 preview.php 的顶部添加以下行：

```
<?php
echo header('Content-Type: text/html; charset=utf-8'); 
?> 
```

它在我的网站上工作

# networking - RFC 中的 ascii 图是如何生成的？

> ID：13740983
> 
> 赞同：19
> 
> 时间：2012-12-06T09:53:37.937
> 
> 标签：networking, ascii, rfc, ascii-art

不确定这是否是提出这个问题的正确 stackexchange，但我想知道是否有人知道 [http://tools.ietf.org/rfc/rfc5755.txt](http://tools.ietf.org/rfc/rfc5755.txt)第 6 页中的 ascii 图是否是手工制作或使用的程序生成的将节点和转换作为输入。

如果它们是生成的，有人知道是哪个程序吗？

直接在 Google 上搜索不会出现任何相关信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-03T08:01:36.987

我相信 Emacs 图片模式、表格模式（`M-x table-insert`或`M-x table-recognize`）以及可能的其他模式简化了 ASCII 编辑。

另请阅读有关将 PDF 格式用于 RFC 的建议：

[https://datatracker.ietf.org/doc/html/draft-ash-alt-formats-02](https://datatracker.ietf.org/doc/html/draft-ash-alt-formats-02)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-12T08:10:28.380

如果您愿意，也可以使用 asciiflow 手动绘制 ASCII 图。我不时发现这个工具非常方便。 [http://asciiflow.com/](http://asciiflow.com/)

# java - 如何防止 Solr 提取 Word 文档时内存不足？

> ID：13740989
> 
> 赞同：0
> 
> 时间：2012-12-06T09:53:55.223
> 
> 标签：java, solr, out-of-memory, solrj

我正在使用更新/提取请求处理程序上传一个 9MB 字的文档文件。我正在使用 solrj 来执行此操作。但我不断在同一个文件上收到内存不足错误。我正在使用自动提交，但我认为这不是问题，因为即使我关闭它也会失败。

由于 gc，cpu 使用率飙升至 95%，该过程大约需要 4.4Gb

有谁知道如何防止这个错误？

这是错误：

```
 <date>2012-12-06Txx:xx:xx</date>
  <millis>1354786975705</millis>
  <sequence>157</sequence>
  <logger>org.apache.solr.servlet.SolrDispatchFilter</logger>
  <level>SEVERE</level>
  <class>org.apache.solr.common.SolrException</class>
  <method>log</method>
  <thread>16</thread>
  <message>null:java.lang.RuntimeException: java.lang.OutOfMemoryError: GC overhead limit exceeded
    at org.apache.solr.servlet.SolrDispatchFilter.sendError(SolrDispatchFilter.java:469)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:297)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1337)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:484)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:524)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:233)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
    at org.eclipse.jetty.server.Server.handle(Server.java:351)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)
    at org.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:47)
    at org.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:900)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:954)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:952)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:235)
    at org.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:66)
    at org.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:254)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.OutOfMemoryError: GC overhead limit exceeded
    at java.util.Arrays.copyOfRange(Unknown Source)
    at java.lang.String.&lt;init&gt;(Unknown Source)
    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseCdataLiteral(PiccoloLexer.java:3027)
    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseQuotedTagValue(PiccoloLexer.java:2936)
    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseAttributesNS(PiccoloLexer.java:1754)
    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseOpenTagNS(PiccoloLexer.java:1521)
    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseTagNS(PiccoloLexer.java:1362)
    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseXMLNS(PiccoloLexer.java:1293)
    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.parseXML(PiccoloLexer.java:1261)
    at org.apache.xmlbeans.impl.piccolo.xml.PiccoloLexer.yylex(PiccoloLexer.java:4808)
    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.yylex(Piccolo.java:1290)
    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.yyparse(Piccolo.java:1400)
    at org.apache.xmlbeans.impl.piccolo.xml.Piccolo.parse(Piccolo.java:714)
    at org.apache.xmlbeans.impl.store.Locale$SaxLoader.load(Locale.java:3439)
    at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1270)
    at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1257)
    at org.apache.xmlbeans.impl.schema.SchemaTypeLoaderBase.parse(SchemaTypeLoaderBase.java:345)
    at org.openxmlformats.schemas.wordprocessingml.x2006.main.DocumentDocument$Factory.parse(Unknown Source)
    at org.apache.poi.xwpf.usermodel.XWPFDocument.onDocumentRead(XWPFDocument.java:134)
    at org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:159)
    at org.apache.poi.xwpf.usermodel.XWPFDocument.&lt;init&gt;(XWPFDocument.java:116)
    at org.apache.poi.xwpf.extractor.XWPFWordExtractor.&lt;init&gt;(XWPFWordExtractor.java:53)
    at org.apache.poi.extractor.ExtractorFactory.createExtractor(ExtractorFactory.java:180)
    at org.apache.tika.parser.microsoft.ooxml.OOXMLExtractorFactory.parse(OOXMLExtractorFactory.java:87)
    at org.apache.tika.parser.microsoft.ooxml.OOXMLParser.parse(OOXMLParser.java:82)
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:242)
    at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:242)
    at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:120)
    at org.apache.solr.handler.extraction.ExtractingDocumentLoader.load(ExtractingDocumentLoader.java:219)
    at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:74)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.RequestHandlers$LazyRequestHandlerWrapper.handleRequest(RequestHandlers.java:240) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:02:46.633

如果您有 64 位操作系统，请尝试使用此参数运行您的应用程序

```
java -Xmx1024m -jar yourfile.jar 
```

将 -Xmx1024 的值更改为 RAM 大小的最大值，例如 -Xmx16384m。确保将 shell 导航到 jar 文件所在的文件夹

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:07:21.420

运行`System.gc()`你的应用程序这么多的工作。

# php - 在 PHP 的 foreach 循环中使用 file() + CURL 函数

> ID：13740990
> 
> 赞同：1
> 
> 时间：2012-12-06T09:53:54.457
> 
> 标签：php, loops, curl

当我运行下面的代码时，它只显示可通过“domainslist.txt”中列出的最后一个 url 访问的网页。它不显示早期的网页。

例如，如果“domainslist.txt”包含：

```
http://example[1].com
http://example[2].com
http://example[3].com 
```

然后代码只显示来自 example[3].com 的网页。

为什么不显示所有三个？

```
function url_get_contents($Url) {
        if (!function_exists('curl_init')) {
            die('CURL is not installed!');
        }
        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, $Url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        $output = curl_exec($ch);
        curl_close($ch);
        return $output;
    }

    $urls = file("domainslist.txt", FILE_SKIP_EMPTY_LINES);

    foreach ($urls as $url) {

        echo(url_get_contents($url)); 

    } 
```

注意如果我手动创建 URL 数组，如下所示：

```
$urls = array();
$urls[0] = "http://example[1].com";
$urls[1] = "http://example[2].com";
$urls[2] = "http://example[3].com"; 
```

然后它工作正常，显示所有 3 页。

编辑：

当我使用时`var_dump($urls);`，形成数组的两种不同方法的结果之间存在微小差异。使用创建的数组中的前两个 URL 在`file()`字符串长度中报告了两个额外的字符 - 但最终 URL（显示的 URL）是正确的字符数。但是，手动创建数组时，没有多余的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:15:57.590

你的代码看起来不错，所以我猜 domainlist.txt 有点奇怪

您需要检查的第一件事`foreach ($urls as $url)`是执行的频率以及 $url 的内容是什么。应该是 3 次，显然是 3 个不同的 URL。还要检查附加到 $url 的额外数据，以防文件采用奇怪的编码格式。

简而言之，试试这个进行调试并让我们知道输出。

```
function url_get_contents($Url) {
    if (!function_exists('curl_init')) {
        die('CURL is not installed!');
    }
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, trim($Url)); //added trim to fix unintented chars from domainlist.txt
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $output = curl_exec($ch);
    curl_close($ch);
    return $output;
}

$urls = file("domainslist.txt", FILE_SKIP_EMPTY_LINES);

var_dump($urls);

foreach ($urls as $url) {
    var_dump($url);
    var_dump(url_get_contents($url));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:20:51.217

添加标志**FILE_IGNORE_NEW_LINES**

```
file('domainslist.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES); 
```

手动函数[文件（）](http://php.net/manual/ru/function.file.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T10:26:58.957

假设您的“domainslist.txt”文件示例是文件本身的外观，请在 URL 的末尾添加一个斜杠 ( / )，您的代码将正常工作。

打开文件时添加标志 FILE_IGNORE_NEW_LINES 也应该这样做。

# python - 如何让 python 程序从表/外部文件中读取和提供不同的数据值？

> ID：13740993
> 
> 赞同：0
> 
> 时间：2012-12-06T09:54:06.297
> 
> 标签：python, datasource, external, minecraft

我正在尝试编写一个与 Minecraft 一起使用的程序，它可以让我通过输入名称来搜索任何游戏内物品的物品 ID。

例如：搜索“MOSSY STONE”将返回类似“MOSSY COBBLESTONE ID = 98:1”的内容

我是 Python 和一般编码的新手（保存一些可忽略不计的基本 HTML ......）。是否可以以某种方式将外部文本文件链接到我的 .py，以便在执行“MOSSY STONE”时，搜索词与文本文件和相应的项目 ID 交叉引用（在本例中为 98： 1)、是否退货？

[编辑]

*   我还没有创建 .txt 文件。最初它是一张桌子，但我猜是这样的

> 第 1 项 - 第 1 项 ID
> 第 2 项 - 第 2 项 ID
> 第 3 项 - 第 3 项 ID
> 等...

*   我以前用 Python 编写过一些简单的东西，主要是用数学方程测试程序（我写了一些东西来计算我的世界中的距离，使用：
    **sqrt((x2-x1)^2 + (y2-y1)^2 + (z2 -z1)^2))**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:31:41.247

当你没有提供任何细节时，真的很难帮助你。另外，你知道多少蟒蛇。如果您还没有得到它，您真的应该尝试获得一些基本的了解。这是一个好的开始：[http ://www.youtube.com/watch?v=tKTZoB2Vjuk](http://www.youtube.com/watch?v=tKTZoB2Vjuk)

无论如何，这是您尝试实现的快速而肮脏的示例。如果您有一个名称`testdata.txt`如下的文件：

```
STONE A > 11:1
STONE B > 12:2
MOSSY STONE > 98:1
STONE C > 13:3 
```

你可以这样读：

```
import re  # For use later
datafile = open('C://testdata.txt', 'r')
data = datafile.read() 
```

像这样搜索某个 id：

```
prop = 'MOSSY STONE'
match = re.search(prop + '\s>\s(\d+:\d+)', data)
if match:
    id = match.group(1)
    print id
else:
    print prop, 'not found!' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:31:25.727

奇怪...奇怪的问题）反正可能有用的 [正则表达式](http://docs.python.org/2/library/re.html)

[HTML 解析器](http://docs.python.org/2/library/htmlparser.html)

# windows-installer - UAC 仅在卸载时提示“未知发布者”

> ID：13740996
> 
> 赞同：3
> 
> 时间：2012-12-06T09:54:18.060
> 
> 标签：windows-installer, uac, uninstallation, publisher

我已使用有效证书签署了我的 MSI 安装程序。当我安装此 MSI 时，UAC 会提示并正确显示发布者名称。但是，当我卸载 MSI UAC 时提示“未知发布者”。

如果检查`C:\Windows\Installer`了缓存安装程序的文件夹并且它没有证书！

那么为什么它不保留缓存安装程序的证书呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:16:09.967

如果您在 Windows Vista（或 Windows Server 2008）上运行，这是Windows Installer ^([archive](https://archive.ph/thlm6))[的一个众所周知的行为](http://blogs.msdn.com/b/heaths/archive/2009/02/02/changes-to-package-caching-in-windows-installer-5-0.aspx) 。

> Windows Installer 剥离嵌入式机柜以节省空间。不幸的是，以这种方式更改`.msi`数字签名也会使数字签名无效。

您可以通过建造`.msi`没有嵌入式驾驶室来避免这种情况；也就是说，您安装的所有文件都在其`.msi`自身之外。但是，如果您在 Windows 7 或更高版本上看到这一点，那将是出乎意料的。

# php - PHP mail() 函数，以 HTML 代码形式发送邮件

> ID：13740997
> 
> 赞同：0
> 
> 时间：2012-12-06T09:54:26.303
> 
> 标签：php, html

我面临一个问题，当我使用 发送邮件时`mail()`，它会在邮件中发送 HTML 代码。这是我的代码：

```
<?php
$message = "<table width='100%' border='0' cellspacing='0' cellpadding='3'>
  <tr>
    <td colspan=2>Dear ".$_POST['fname']."&nbsp;".$_POST['lname'].",</td>
  </tr>
   <tr>
    <td colspan=2>Thank you for contacting us.We will get back to you in next 48 hrs.Your Contacts Details are as follows:</td>
  </tr>
  <tr>
    <td width='28%' >Title</td>
    <td width='72%'>".$_POST['title']."</td>
  </tr>
  <tr>
    <td>Email</td>
    <td>".$_POST['email']."</td>
  </tr>
  <tr>
    <td>Your Message</td>
    <td>".$_POST['message']."</td>
  </tr>
  <tr>
    <td>How did you hear about us? </td>
    <td>".$checkBox."</td>
  </tr>
</table>
";  

$subject = "ContactUs";
$headers .= "From: ".$from_mail." \r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1\r\n";

mail($_POST["coach"], $subject, $message, $headers);

?> 
```

我在电子邮件中收到的输出如下所示：

```
<table width='100%' border='0' cellspacing='0' cellpadding='3'>
  <tr>
    <td colspan=2>Dear Test User,</td>
  </tr>
   <tr>
    <td colspan=2>Thank you for contacting us.Your Contacts Details are as follows:</td>
  </tr>
  <tr>
    <td width='28%' >Title</td>
    <td width='72%'>Mr.</td>
  </tr>
  <tr>
    <td>Email</td>
    <td>test@example.com</td>
  </tr>
  <tr>
    <td>Your Message</td>
    <td>Test Message</td>
  </tr>
  <tr>
    <td>How did you hear about us? </td>
    <td>www.example.com</td>
  </tr>
</table> 
```

我不知道为什么会这样。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:56:29.803

试试这个

```
$header  = "MIME-Version: 1.0\r\n";
$header .= "Content-type: text/html; charset: utf8\r\n"; 
```

也试试：[PHPMailer](http://phpmailer.worxware.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:58:12.007

采用

> html_entity_decode()

```
eg. mail($_POST["coach"], $subject, html_entity_decode($message), $headers); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T11:04:32.180

在标题部分添加以下代码

```
<?php
$headers .= 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
?> 
```

# android - 在android中打开软键盘时不显示编辑文本

> ID：13740999
> 
> 赞同：2
> 
> 时间：2012-12-06T09:54:31.773
> 
> 标签：android

我创建了一个活动。它工作正常。但是当我尝试通过编辑文本进行输入时。我正在选择编辑文本，然后编辑文本被软键盘隐藏。

我已经尝试通过给予`android:windowSoftInputMode="adjustPan"`和`android:windowSoftInputMode="adjustResize"`许可，但它没有得到解决。请帮我解决这个问题。

这是显示活动时的屏幕。

![最初看起来像这样](../Images/ac9ae12de23ab6f91ba34701c078d362.png)

选择编辑文本时显示如下。

![在此处输入图像描述](../Images/e1c54ecd1970198700ac1841a76a008b.png)

您可以在上图中看到，编辑文本被隐藏，这就是我无法在其中输入文本的原因。请帮我解决这个问题。

这是我的 layout.xml

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/textViewOSoutletName"
        style="@style/HeadingTheme"
        android:drawableRight="@drawable/transaction"
        android:paddingBottom="0dp"
        android:paddingRight="10dp"
        android:text="@string/outletname" >
    </TextView>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="2dp"
    android:background="@color/black_dark" >
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="1" >

    <TextView
        android:id="@+id/textViewOSBrand"
        style="@style/Head_Text"
        android:layout_weight="0.2"
        android:text="@string/brand"
        android:textSize="25dp" />

    <Spinner
        android:id="@+id/spinnerOSBrandName"
        style="@style/Style_Spinner"
        android:layout_height="50dp"
        android:layout_weight="0.8" />
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="2dp"
    android:layout_marginTop="2dp"
    android:background="@color/black_dark" >
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="1" >

    <TextView
        android:id="@+id/textViewOScategory"
        style="@style/Head_Text"
        android:layout_weight="0.2"
        android:text="@string/category"
        android:textSize="25dp" />

    <Spinner
        android:id="@+id/spinnerOScategoryName"
        style="@style/Style_Spinner"
        android:layout_height="50dp"
        android:layout_weight="0.8" />
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="2dp"
    android:layout_marginTop="2dp"
    android:background="@color/black_dark" >
</LinearLayout>

<TextView
    android:id="@+id/textViewOSProductNameHeading"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@color/white"
    android:gravity="center"
    android:singleLine="true"
    android:text="@string/product_name"
    android:textColor="@color/blue"
    android:textSize="25dp" />
<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:orientation="vertical"
    android:layout_weight="1.0">
 <HorizontalScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:fadingEdge="none"
    android:fillViewport="true"
    android:scrollbars="none" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:background="@color/grey_default"
        android:weightSum="1" >

        <TextView
            android:id="@+id/textViewOSProductName"
            style="@style/ListViewHeaderThemeLarge"
            android:layout_width="0dp"
            android:layout_weight="0.5"                
            android:text="@string/product_name" />

        <ImageView
            android:id="@+id/imageViewseparator1"
            style="@style/ListViewHeaderSeperator" />

        <TextView
            android:id="@+id/textViewOSQuantity"
            style="@style/ListViewHeaderThemeLarge"
            android:layout_width="0dp"
            android:layout_weight="0.25"
            android:gravity="center"
            android:text="@string/qty" />

        <ImageView
            android:id="@+id/imageViewseparator2"
            style="@style/ListViewHeaderSeperator" />

        <TextView
            android:id="@+id/textViewOSPrice"
            style="@style/ListViewHeaderThemeLarge"
            android:layout_width="0dp"
            android:layout_weight="0.25"
            android:gravity="center"
            android:text="@string/rp" />           
    </LinearLayout>

</HorizontalScrollView>
 <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
         <ListView
            android:id="@+id/listViewOS"
            style="@style/ListViewTheme"
            android:layout_width="match_parent"
            android:layout_height="match_parent">
        </ListView>
    </LinearLayout>
    </LinearLayout>
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/footer_background_drawable"
    android:gravity="center"
    android:orientation="vertical" >

    <View
        style="@style/horizontalImg"
        android:background="@color/black_dark" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"

        android:orientation="horizontal"
        android:weightSum="1" >

        <Button
            android:id="@+id/buttonOSBack"
            style="@style/styleNormalButtonLargeLand"
            android:drawableLeft="@drawable/left"
            android:text="@string/back" >
        </Button>

        <Button
            android:id="@+id/buttonOSSubmit"
            style="@style/styleNormalButtonLargeLand"
            android:drawableRight="@drawable/discount1"
            android:text="@string/discount" >
        </Button>
    </LinearLayout>

</LinearLayout> 
```

这是我创建列表元素的布局。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="1"
        android:background="@drawable/list_selector" >

        <TextView
            android:id="@+id/textViewOSLProductName"
            style="@style/ListViewTextViewLarge"
            android:layout_width="0dp"
            android:layout_weight="0.5"
            android:ellipsize="end"
            android:gravity="left"
            android:paddingLeft="3dp"
            android:singleLine="true"
            android:text="@string/product_name"
            android:textColor="@drawable/text_selector" />

        <ImageView
            android:id="@+id/imageViewselparator1"
            style="@style/ListViewTextSeperatorForAll" />

        <EditText
            android:id="@+id/editTextOSLQuantity"
            style="@style/ListViewTextViewLarge"
            android:layout_width="0dp"
            android:layout_weight="0.25"
            android:background="#FBFCFE"
            android:gravity="center"
            android:inputType="number"
            android:maxLength="5"
            android:text="qty"
            android:textStyle="bold"
            android:textColor="@color/black_dark" />
        <!-- android:background="#404040" -->

        <ImageView
            android:id="@+id/imageViewselparator2"
            style="@style/ListViewTextSeperatorForAll" />

        <TextView
            android:id="@+id/textViewOSLPrice"
            style="@style/ListViewTextViewLarge"
            android:layout_width="0dp"
            android:layout_weight="0.25"
            android:gravity="center"
            android:maxLength="8"
            android:text="rp"
            android:textColor="@drawable/text_selector" />
    </LinearLayout>

</LinearLayout> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T10:12:28.623

在您的 Android 清单文件中，您必须在所需的活动中设置此标签

```
android:windowSoftInputMode="adjustPan" 
```

让我知道它是否有效

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T10:07:31.223

试试**ScrollView**添加`android:layout_gravity="center"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:22:10.293

这是一个 Android 问题（请参见下面的链接）并且在全屏时发生，即当没有状态栏时。在非全屏模式下试用您的应用。

安卓问题：[http ://code.google.com/p/android/issues/detail?id=10510](http://code.google.com/p/android/issues/detail?id=10510)

编辑：全屏标志 - 如果你有它们，你应该删除它们。

```
requestWindowFeature(Window.FEATURE_NO_TITLE); // removes title
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); // removes statusbar 
```