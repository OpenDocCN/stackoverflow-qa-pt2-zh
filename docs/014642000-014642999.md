# StackOverflow 问答 14642000-14642999

# iphone - 使用 writeImageDataToSavedPhotosAlbum:metadata:completionBlock: ios 删除元数据标签

> ID：14642000
> 
> 赞同：0
> 
> 时间：2013-02-01T08:03:00.303
> 
> 标签：iphone, ios, metadata, exif

我想在 iOS 中编辑一些元数据标签，并且需要使用[ALAssetsLibrary/writeImageDataToSavedPhotosAlbum:metadata:completionBlock:](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/occ/instm/ALAssetsLibrary/writeImageDataToSavedPhotosAlbum%3ametadata%3acompletionBlock%3a)因为是唯一不重新编码像素数据的方法。

在方法的规格中它说：

> 如果图像数据中的元数据与元数据字典发生冲突，图像数据元数据值将被覆盖。

我的问题是，它也可以用来删除元标记吗？我运行了一些测试并将一些`exif`值设置`NSNull`为空字符串，但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T08:48:52.320

我正在使用`writeImageToSavedPhotosAlbum:orientation:completionBlock:`并且我的所有元数据都被剥离了，除了方向被保存到我传递的任何参数中。我保存`ALAssetsLibrarywriteImageDataToSavedPhotosAlbum:metadata:completionBlock:`并传递了我的元数据，它与图像一起保存。

我没有在不传递元数据的情况下尝试使用此功能。

# unit-testing - 在 VS 2012 上运行代码覆盖率分析抛出异常

> ID：14642001
> 
> 赞同：1
> 
> 时间：2013-02-01T08:03:06.373
> 
> 标签：unit-testing, visual-studio-2012, code-coverage

当我尝试在 VS 2012 中运行代码覆盖率时，我突然开始出现以下异常：

抛出异常：代码覆盖分析引擎抛出异常：覆盖文件“........coverage”无效或损坏

任何解决方案/解决方法都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T01:36:13.757

I have seen this error in VS2010 and it's frustrating to say the least. The error is likely related to one or more assemblies that don't get "instrumented" correctly, From memory I recall it can be solved by unselecting "instrument assemblies in place" in the test settings.

Regarding "instrumenting in place", when code coverage is turned on Visual Studio takes a few moments before the TestRun to rewrite the IL for your assemblies so that it can record which parts of the IL are executed. "Instrumenting in place" creates a back up of the assembly with a ".instr" extension, runs the tests with the profiler turned on, then replaces the instrumented assembly with the original assembly after the Tests complete. When i was seeing this error it seemed as though the original file could not be restored (possibly locked) and i had a few remnant ".instr" assemblies in my build output folder. My theory is that the IDE tries to correlate the coverage data to the original assembly but fails because of this mismatch.

AFAIK, there are no visible differences to turning off in place instrumentation when viewing coverage locally.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:53:23.030

我在 VS 2012 Premium 上遇到了这个错误。我通过应用[VS Update 1](http://support.microsoft.com/kb/2797915)修复了它，从那以后就再也没有看到它。

# clearcase - Clearcase 远程客户端无法创建视图和已经存在的视图

> ID：14642004
> 
> 赞同：1
> 
> 时间：2013-02-01T08:03:19.670
> 
> 标签：clearcase, clearcase-remote-client

我正在更新 CCRC 中的视图，该视图无法挂起并显示加载，同时进行代码更新，然后我重新启动明确的情况，它无法正常工作，不显示当前视图，无法创建新视图...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:17:23.870

最好让管理员检查日志：

*   在 CCRC 服务器上查看这是否是（Web）服务器问题或在那里管理的查看服务器上。
*   在 ClearCase 服务器上检查所有服务 (vob_server) 是否仍然启动。

（也知道特定的 CCRC 版本存在加载问题，如CCRC7.1的[此技术说明）](http://www-01.ibm.com/support/docview.wss?uid=swg21392572)

您还可以检查您是否是唯一遇到该问题的人。
在这种情况下，这是一个客户端问题，这意味着您可以尝试再次安装 CCRC（在另一个路径中以不修改您当前的设置），并检查问题是否仍然存在。

确保这不是凭据问题（当您必须定期更改登录密码时可能会发生这种情况）。

事实上，[OP SCK](https://stackoverflow.com/users/198166/sck) [报告](https://stackoverflow.com/questions/14642004/clearcase-remote-client-unable-to-creare-view-and-already-existing-view/14642164#comment20647676_14642164)：

> 我与我的管理员交谈，[这是一个]问题，我的登录凭据在 Windows 中重新创建了用户配置文件，并且它开始正常工作。

# delphi - Windows 的哪个外部函数会启动 WM_SIZE？

> ID：14642005
> 
> 赞同：0
> 
> 时间：2013-02-01T08:03:23.090
> 
> 标签：delphi, vcl

我有一个非常奇怪的问题。我在Win7平台上使用D2007。

我的应用程序在第一台 Win7 机器（我的）上运行良好，但 UI 无法在第二台 Win7 系统（三星平板电脑）上正确刷新。

我在平板电脑上使用远程调试。经过长时间的评估和调试后，我发现`WM_SIZE`我的一个框架没有启动。每个框架都包含在她的父级和`Align = alClient`.

在我的机器上，这条消息发送得很好，当然，用户界面也有正确的行为。

Windows Unit 的哪个外部函数发送 WM_Size 消息代码？

* * *

我将更详细地解释这个问题。

当应用程序最大化或调整大小时，我看到两台 Win7 机器之间的 UI 刷新行为有所不同。

某些帧的大小已正确调整，但其中一个未正确调整。结构如下：

MainForm -> 一些框架 -> PageControl -> TabSheet -> Frame1 -> Frame2。

注意 ：

*   我的 UI 在大多数计算机上都能正常运行。

*   我使用标准的windows机制

在此结构中，直到包含 TabSheet 的所有帧都被调整大小，但 Frame1 没有。帧是在运行时创建的。

因为我知道 TabSheet 的名称，所以我可以在断点处停下来查看 WMSize。

我在其中使用了一些条件断点`TWinControl.AlignControls`并抓住了`Frame1`.

使用断点`Classes.StdWndProc`，我可以跟踪发送到的消息`Frame1.Handle`。

当一切正常时：

*   $0046 : WM_WINDOWPOSCHANGING

*   $0083 : WM_NCCALCSIZE

*   $0085 : WM_NCPAINT

*   $0014 : WM_ERASEBKGND

*   $0047 : WM_WINDOWPOSCHANGED

*   $0005 : WM_SIZE

当调整大小失败时：

*   $0046 : WM_WINDOWPOSCHANGING

*   $0085 : WM_NCPAINT

*   $0014 : WM_ERASEBKGND

*   $0047 : WM_WINDOWPOSCHANGED

因为，代码是相同的，操作系统在这两种情况下都是 Win7，我不明白这个问题。我只知道这两条消息`WM_NCCALCSIZE`，并且`WM_SIZE`在第二种情况下从未发送过。

这就是我寻找返回`WM_SIZE`响应的函数的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:56:20.610

WM_SIZE 在大小改变后发送到窗口。这意味着系统会在更改大小后自动将 WM_SIZE 发送到您的框架。要更新您的框架，我建议调用以下之一：+ UpdateWindow API + YourFrame.Invalidate 或 YourFrame.Repaint

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:05:37.337

我给你我的回复，我不能在星期五发布。后来我发现问题似乎来自Win7 / VCL D2007的一个错误。我尝试使用用 DXE3 编译的 exe 来解决问题。

# iphone - 来自 NSUserDefaults 的 iOS 呼叫电话号码

> ID：14642006
> 
> 赞同：1
> 
> 时间：2013-02-01T08:03:31.700
> 
> 标签：iphone, ios, objective-c, nsuserdefaults

我正在尝试将电话号码存储为 NSUserDefaults 中的 NSString。由于某种原因，下面的代码不起作用。如果我不使用变量，代码就可以工作，但我不能让它工作。有谁知道为什么？

```
NSString *savedPhone = [[NSUserDefaults standardUserDefaults]
                        stringForKey:@"savedPhone"];

NSString *callNumber = [NSString stringWithFormat:@"%@%@",@"tel://",savedPhone];

NSURL *myURL = [NSURL URLWithString:callNumber];
[[UIApplication sharedApplication] openURL:myURL]; 
```

如果有人有任何想法，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:15:44.587

更改 URL 格式（删除`//`）

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:2135554321"]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:19:52.770

像这样改变你`callNumber`： NSString *callNumber = [NSString stringWithFormat:@"tel:%@",savedPhone];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:21:43.507

您可以使用以下代码实现：

```
NSUserDefaults *objUserDefaults = [NSUserDefaults standardUserDefaults];
NSString *savedPhone = [objUserDefaults objectForKey:@"savedPhone"];
[self callNumber:savedPhone]; 
```

然后添加以下函数：

```
-(void)callNumber:(NSString *)pstrContactNo
{
    NSString *strDeviceModel = [UIDevice currentDevice].model;
    if(![strDeviceModel isEqualToString:@"iPhone"])
    {
            UIAlertView *objAlertMsg = [[UIAlertView alloc] initWithTitle:@""
                                                       message:@"Calling is not supported in this device."
                                                      delegate:nil
                                             cancelButtonTitle:@"OK"
                                             otherButtonTitles:nil];
       [objAlertMsg show];
       [objAlertMsg release];
    }
    else
    {
        pstrContactNo = [NSString stringWithFormat:@"tel:%@",pstrContactNo];
        NSString *strDialedContact = [pstrContactNo stringByReplacingOccurrencesOfString:@" " withString:@""];
        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:strDialedContact]];
    }
} 
```

这将解决您的问题。

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:03:37.687

```
 NSString *number = YOUR-NUMBER;       
  NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"telprompt:%@",number]];

 [[UIApplication sharedApplication] openURL:url]; 
```

尝试使用此代码，完成通话后它将导航回您的应用

# testing - Symfony2测试数据库生产环境

> ID：14642007
> 
> 赞同：1
> 
> 时间：2013-02-01T08:03:46.297
> 
> 标签：testing, symfony, doctrine

在生产服务器上的每次代码更新之前，我通过在测试数据库中插入行来执行 phpunit 测试。由于测试数据库不反映生产数据库的内容，我想在生产数据库上执行测试。测试完成后，我想在测试期间删除所有创建的行。实现这一目标的最佳方法是什么？我想不出一种非常好的方法，而且没有改变生产数据的风险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:09:56.213

我使用 Alexandre Salome 在[Symfony2 中的测试隔离中](http://alexandre-salome.fr/blog/Symfony2-Isolation-Of-Tests)描述的方法，将我的测试与事务隔离并在最后回滚。这种方法非常有效，但很明显，在生产数据库上使用它之前，您需要对其进行彻底的测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:46:37.753

我建议您使用 sqlite（默认）进行测试，因为它更快，并且您不必担心它们是否会在生产数据库上搞砸。我所做的是每

`EntityTest.php extends TestsHelper.php extends PHPUnit_Framework_TestCase`

在 setup() 中，我创建了数据库和固定装置。

我从互联网上获取了代码，它可以工作。你可能会发现它很有用。

```
 // class TestsHelper

 /**
 * @var Symfony\Component\DependencyInjection\Container
 */
protected $container;

public function setUp()
{
    // Boot the AppKernel in the test environment and with the debug.
    $this->kernel = new \AppKernel('test', true);
    $this->kernel->boot();

    // Store the container and the entity manager in test case properties
    $this->container = $this->kernel->getContainer();
    $this->em = $this->container->get('doctrine')->getEntityManager();

    // Build the schema for sqlite
    $this->generateSchema();

    $this->generateFixtures() ;

    parent::setUp();
}

public function tearDown()
{
    // Shutdown the kernel.
    $this->kernel->shutdown();

    parent::tearDown();
}

protected function generateSchema()
{
    // Get the metadatas of the application to create the schema.
    $metadatas = $this->getMetadatas();

    if ( ! empty($metadatas)) {
        // Create SchemaTool

        /**
        * @var \Doctrine\ORM\Tools\SchemaTool
        */
        $tool = new SchemaTool($this->em);
//            $tool->dropDatabase() ;
        $tool->createSchema($metadatas);
    } else {
        throw new Doctrine\DBAL\Schema\SchemaException('No Metadata Classes to process.');
    }
}
/**
 * Overwrite this method to get specific metadatas.
 *
 * @return Array
 */
protected function getMetadatas()
{
    return $this->em->getMetadataFactory()->getAllMetadata();
} 
```

在 generateFixtures() 中，您将照常创建它们：

```
$entity = new MyEntity() ;
$this->em->persist($entity) ;
$this->em->flush() ; 
```

# events - Firefox 18 - 意外的transitionend事件行为/奇怪的事件冒泡

> ID：14642009
> 
> 赞同：0
> 
> 时间：2013-02-01T08:03:54.860
> 
> 标签：events, firefox, css-transitions

在 Firefox 18.0.1 中，我遇到了一些来自 transitionend 事件的意外行为。我无法在 MDN 或 W3C 文档中找到有关此特定事件的任何详细描述 - 是否有人对这是否是错误有意见？

在这种特殊情况下，过渡与包含许多其他 DIV 的 DIV 的高度变化有关，而 DIV 又包含许多 CANVAS。转换和事件附加到外部 DIV。

*   虽然 FF 18 之前的事件在过渡结束时只触发一次，但现在它会触发很多次。
*   事件总是从包含的 CANVAS 对象中冒出来。
*   每个 CANVAS 将触发七个 transitionend 事件，事件数据的唯一区别是 propertyName。它将“迭代”每个 CANVAS 的七个不同颜色相关的 css 属性（颜色、边框颜色、--moz-xxx 属性等）。

在这里不知所措。解决这个问题需要大量的重写。帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:13:51.443

Transitionend 事件会根据规范进行冒泡，并为每个正在转换的属性触发。我不相信这会随着 Firefox 18 的改变而改变。如果没有看到您的测试用例，很难说更多。

如果您正在寻找这些事件的详细描述，请参阅[http://dev.w3.org/csswg/css3-transitions/#transition-events](http://dev.w3.org/csswg/css3-transitions/#transition-events)

# sql - 为什么我的 IDENTITY 列值中存在空白？

> ID：14642013
> 
> 赞同：13
> 
> 时间：2013-02-01T08:04:06.187
> 
> 标签：sql, sql-server

我有个问题。

我的 ID Primary (IDENTITY) 配置为自动递增（类型：int）。但是，当我插入一个新行时，这个新的 id 不是连续的。怎么了？有什么解决办法吗？

编辑：

```
[...]
[id]int] IDENTITY(1,1) NOT NULL,
[...]
CONTRAINT [PK_Medida] PRIMARY KEY CLUSTERED
(
[id] ASC
) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-01T08:10:33.553

**[列上的标识属性不保证以下内容](http://msdn.microsoft.com/en-us/library/ms186775%28v=sql.110%29.aspx)**：

**值的**唯一性——必须通过使用 PRIMARY KEY 或 UNIQUE 约束或 UNIQUE 索引来强制执行唯一性。

**事务中的连续值**- 插入多行的事务不能保证获得行的连续值，因为表上可能会发生其他并发插入。如果值必须是连续的，则事务应在表上使用排他锁或使用 SERIALIZABLE 隔离级别。

**服务器重新启动或其他故障后的连续值**- SQL Server 可能出于性能原因缓存标识值，并且某些分配的值可能会在数据库故障或服务器重新启动期间丢失。这可能会导致插入时标识值出现间隙。如果间隙不可接受，则应用程序应使用带有 NOCACHE 选项的序列生成器或使用它们自己的机制来生成键值。

**值的重用**——对于具有特定种子/增量的给定身份属性，引擎不会重用身份值。如果特定的插入语句失败或插入语句回滚，则使用的标识值将丢失并且不会再次生成。当生成后续标识值时，这可能会导致间隙。

**还，**

如果频繁删除的表存在标识列，则标识值之间可能会出现间隙。如果这是一个问题，请不要使用 IDENTITY 属性。但是，**为了确保没有创建间隙或填补现有间隙**，请在显式输入 with 之前评估现有标识值`SET IDENTITY_INSERT ON`。

此外，检查身份列属性并检查身份增量值。它应该是1。

![在此处输入图像描述](../Images/70f66bb2ef8dbe4676cb544d060669e7.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-01T08:07:32.120

不要期望身份是连续的。有许多情况可能会留下空白。将身份视为抽象数字，不要为其附加任何商业意义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-05T03:42:57.987

在以下情况下会出现差距：

1.  记录被删除。
2.  尝试插入新记录时发生错误（例如，非空约束错误）。标识值被无奈地跳过。
3.  有人使用显式值（例如 identity_insert 选项）插入/更新了它。
4.  增量值大于 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-27T18:58:09.403

您可以通过在执行增量语句之前**评估预期错误**来避免此错误，或者**通过使用事务**使该语句永远不会执行并在出现任何错误时回滚。希望能帮助到你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T08:07:17.337

新插入的行不再使用被删除行的自动 ID。我无法为此提供解决方案，但这就是行为。

沃特

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-01-24T16:15:22.360

我有一个带有一些约束的表，我希望这些约束会导致大量插入语句失败。它在我的由 Identity(1,1) 处理的索引中造成了巨大的空白。

我设计的解决方案是创建一个没有 ID 列的临时表，但具有该表的所有其他列。然后，我指定一个触发器在暂存表表上运行，插入成功后，记录将传输到带有索引的实际表中。在这种情况下，ID 保留在不同的时间完成，并允许将所有值组合在一起以用于 ID。

我知道这似乎有点低效，但到目前为止它对我来说效果很好。

# android - createInsecureRfcommSocketToServiceRecord 中频繁出现随机故障（服务发现失败）

> ID：14642014
> 
> 赞同：2
> 
> 时间：2013-02-01T08:04:07.357
> 
> 标签：android, bluetooth, rfcomm

我正在尝试在两个 Android 设备之间建立不安全的蓝牙套接字连接。我控制两端的软件。一端用于`listenUsingInsecureRfcommWithServiceRecord`监听连接，另一端用于`createInsecureRfcommSocketToServiceRecord`连接。这行得通。**有时。**

“有时”是我的问题。在大约 20% 的尝试中，它失败并抛出以下异常：

```
java.io.IOException: Service discovery failed
    at android.bluetooth.BluetoothSocket$SdpHelper.doSdp(BluetoothSocket.java:403)
    at android.bluetooth.BluetoothSocket.connect(BluetoothSocket.java:213)
    at com.example.bluetoothpoke.MainActivity$1.onClick(MainActivity.java:34) 
```

两台设备都在屏幕开启时处于唤醒状态。设备之间的距离约为 1m（10 cm 和 3m 没有区别）。两个设备都没有执行发现。两个设备都是可发现的（使两者都不可发现也不会改变任何东西）。

由于无线接口，我是否必须假设它是正常的，然后在失败时重试，还是我能做些什么？鉴于我处于非常舒适的距离，它不应该更可靠地工作吗？

注意：我发现了很多类似的问题，但我发现的问题要么是关于“根本不起作用”，要么是连接到非 Android 设备，或者两者兼而有之。

# c++ - 从背面插入和从正面和背面取出的最有效容器是什么？

> ID：14642015
> 
> 赞同：2
> 
> 时间：2013-02-01T08:04:08.113
> 
> 标签：c++

在运行时方面，通过后端存储大量数据并从前端或后端移除最有效的容器是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T08:05:31.223

A[`std::deque`](http://en.cppreference.com/w/cpp/container/deque)或双端队列。

与 a 不同[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)，它不能保证存储在连续的内存中。但是，您应该对您的特定需求进行基准测试，因为缓存变得越来越重要，而一般的复杂性陈述则越来越不重要；但是，在这种情况下， a`deque`是我要开始的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:57:55.233

这取决于实现、容器的大小、涉及的类型以及可能还有其他因素，因此唯一能给出的真正答案就是测量。 `std::deque`是为这些类型的操作而设计的，对于复制类型昂贵的非常大的容器，它无疑会是最快的，但是我测量过的一次（使用多达 8 个容器——`char`小而复制成本低），`std::vector beat` std： :deque` 放下手。

# php - SEO 友好的 URL 来替换旧的 URL

> ID：14642022
> 
> 赞同：1
> 
> 时间：2013-02-01T08:04:37.963
> 
> 标签：php, .htaccess

在我的网站中，我目前使用的 URL 如下：

`http://sitname.in/category.php?active=1&filter=All`

我希望将整个 URL 替换为

`http://sitname.in/category`

这意味着参数应该通过，但应该显示一个干净的 URL，因为不应显示 in URL

告诉我如何完全创建一个 .htaccess 文件以及创建此 seo 友好 URL 所需的其他文件，我不希望整个站点的旧 URL 甚至应该是超链接的点击应该显示新 URL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:07:34.693

.htaccess 中最快的方法是这个

```
RewriteEngine On
RewriteRule ^category$ /category.php?active=1&filter=All [L] 
```

记住，任何锚点现在都应该指向 www.mysite.com/category

# python - 使用带有更多选项的 smtp python 发送邮件

> ID：14642026
> 
> 赞同：1
> 
> 时间：2013-02-01T08:04:59.907
> 
> 标签：python

这是

```
smtp = smtplib.SMTP(server) 
```

我想使用 和 的附加参数使其更具可定制`timeout`性`port`。

我想使用在任何主机上运行的端口（但不想使用端口 25）使用 SMTP python 发送电子邮件，但我无法开始`timeout`使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:30:20.707

您是否尝试过设置`port`和`timeout`？

```
 smtplib.SMTP(server, port=1234, local_hostname='your_local_host', timeout=10) 
```

或者尝试阅读[文档](http://docs.python.org/2/library/smtplib.html#smtplib.SMTP)？

# php - 如何在自定义地图上绘制一组定位点？

> ID：14642031
> 
> 赞同：1
> 
> 时间：2013-02-01T08:05:49.850
> 
> 标签：php, mysql

![在此处输入图像描述](../Images/8705023c0686937d2135495c548514ad.png)

我有一组点和一张自定义地图（我自己制作的），假设我想绘制一张像上图一样的带有多个点的地图，我该怎么做？我应该使用哪种工具（或语言）？如何在我的地图上获得那些路径（涂成红色和蓝色）？谢谢 :D

# c - 什么是默认互斥属性？

> ID：14642034
> 
> 赞同：1
> 
> 时间：2013-02-01T08:06:13.323
> 
> 标签：c, pthreads, mutex

从手册页：

> 该`pthread_mutex_init()`函数应使用 attr 指定的属性初始化由 mutex 引用的互斥锁。
> ***如果 attr 为 NULL，则使用默认的 mutex 属性；***效果应与传递默认互斥体属性对象的地址相同。成功初始化后，互斥锁的状态变为初始化并解锁。

什么是默认互斥属性？
这段代码设置了什么：`pthread_mutex_t mutexLock = PTHREAD_MUTEX_INITIALIZER;`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:48:46.757

您必须深入研究 POSIX 规范以获取互斥体属性的默认值：

*   [pthread_mutexattr_settype()](http://pubs.opengroup.org/onlinepubs/007904875/functions/pthread_mutexattr_gettype.html)

    > `PTHREAD_MUTEX_DEFAULT`
    > 
    > 尝试递归锁定这种类型的互斥锁会导致未定义的行为。尝试解锁未被调用线程锁定的这种类型的互斥锁会导致未定义的行为。尝试解锁未锁定的此类互斥锁会导致未定义的行为。允许实现将此互斥体映射到其他互斥体类型之一。

    请注意，这可能与其他互斥锁类型不同，但它可以映射到`PTHREAD_MUTEX_NORMAL`or `PTHREAD_MUTEX_ERRORCHECK`。

*   [pthread_mutexattr_setpshared()](http://pubs.opengroup.org/onlinepubs/009696799/functions/pthread_mutexattr_getpshared.html)

    > 该属性的默认值为`PTHREAD_PROCESS_PRIVATE`。

对于其他属性，规范似乎没有明确说明。这些属性是：

*   优先上限属性 ( [`pthread_mutexattr_getprioceiling()`](http://pubs.opengroup.org/onlinepubs/007904975/functions/pthread_mutexattr_setprioceiling.html))
*   优先级继承的协议属性 ( [`pthread_mutexattr_getprotocol()`](http://pubs.opengroup.org/onlinepubs/009604599/functions/pthread_mutexattr_getprotocol.html))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:33:04.367

检查此链接： http: [//www.sourceware.org/pthreads-win32/manual/pthread_mutex_init.html](http://www.sourceware.org/pthreads-win32/manual/pthread_mutex_init.html)

```
pthread_mutex_t fastmutex = PTHREAD_MUTEX_INITIALIZER;

pthread_mutex_t recmutex = PTHREAD_RECURSIVE_MUTEX_INITIALIZER;

pthread_mutex_t errchkmutex = PTHREAD_ERRORCHECK_MUTEX_INITIALIZER;

pthread_mutex_t recmutex = PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP;

pthread_mutex_t errchkmutex = PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP; 
```

# android - Android 通用图像加载器和几个图像的 url

> ID：14642039
> 
> 赞同：1
> 
> 时间：2013-02-01T08:06:41.033
> 
> 标签：android, image, url

我正在使用通用图像加载器将图像从指定的 url 加载到 imageview 中。但是，如果一个图像有多个可能的 url，例如图像可能存储在`www.example.com/image.png`or中，`www.example.com/image.jpg`或者`www.example.com/image.gif`我需要显示第一个现有图像。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:31:44.610

If url are available in xml then you have to read those url using DOMParser or any other xml parser. Once you got the required url, feed it to the Universal Image Loader

```
ImageLoader imageLoader;
DisplayImageOptions options;
ImageView image;

private void loadImageFromURL(String url) {
        options = new DisplayImageOptions.Builder()
        .showStubImage(R.drawable.app_icon)
        .showImageForEmptyUrl(R.drawable.app_icon).cacheInMemory()
        .cacheOnDisc().build();

        imageLoader = ImageLoader.getInstance();
        imageLoader.init(ImageLoaderConfiguration.createDefault(this));
        imageLoader.displayImage(url, image, options,
                new ImageLoadingListener() {
            public void onLoadingComplete() {
                mProgressBar.setVisibility(View.INVISIBLE);

            }

            public void onLoadingFailed() {

                mProgressBar.setVisibility(View.INVISIBLE);
            }

            public void onLoadingStarted() {
                mProgressBar.setVisibility(View.VISIBLE);
            }
        });

    } 
```

# css - 如何纠正 IE 的 css？

> ID：14642043
> 
> 赞同：-2
> 
> 时间：2013-02-01T08:07:14.047
> 
> 标签：css, internet-explorer

现在我在[这个网站上工作](http://www.filmulmeu.ucoz.com)

到目前为止，它在所有浏览器上看起来都不错，除了`IE`. 我不知道为什么`IE`他在左边对齐。如何检测导致此问题的原因？有没有办法检测 IE 中的 CSS 有什么问题？！

CSS：

```
 html,body{
margin:0px;
padding:0px;
text-align:left;
border:0px;
background:#000000 url(/design/wrap_t_bg.jpg) repeat-x;
font-family:Tahoma, Geneva,sans-serif; font-size:11px;
color:#434343;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:16:30.500

**更改此部分：**

```
html,body{
margin:0px; 
```

到：

```
html,body{
margin:0px auto; 
```

* * *

**截屏**

![在此处输入图像描述](../Images/5e2b8b8d059cccb3f99837b3c4063887.png)

* * *

**怪癖模式问题**

默认情况下，该站点进入怪癖模式。那么，你能把它加到第一行吗？

```
<!doctype html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:51:20.247

将正文中的文本对齐更改为“中心”并在 div 中覆盖它。

请使用 html 验证器。代码中有一些可怕的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:15:35.390

有两种方法可以为 IE 编写 css .. 首先是这样 ..在 html 页面上 目标 IE 的所有版本

```
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="all-ie-only.css" /> 
```

其他是在css页面示例上使用后备方法......

```
html > body #div {
  height: 300px; 
```

}

最好你阅读这篇文章。. [http://css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)

# php - Symfony1.4 admin generator 自定义编辑和删除动作

> ID：14642052
> 
> 赞同：0
> 
> 时间：2013-02-01T08:08:10.000
> 
> 标签：php, symfony-1.4, admin, generator

我想在 Symfony1.4 管理生成器中添加自定义编辑和删除操作。

我已经完成的步骤：

1.  为管理员创建了一个自定义主题。
2.  `theme: mythemename`在管理模块中提到`generator.yml`
3.  `_list_td_actions`在根据我的自定义修改的主题模板中。

但在这里我无法编辑`linkToEdit`&`linkToDelete`函数返回值。我可以覆盖`sfModelGeneratorHelper.class.php`文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:05:56.487

您必须在此位置创建一个自定义文件，如下[所示：](http://trac.symfony-project.org/browser/branches/1.4/lib/plugins/sfDoctrinePlugin/data/generator/sfDoctrineModule/admin/template/lib/helper.php)`data/generator/sfDoctrineModule/mythemename/template/lib/helper.php`

这是我覆盖的示例`linkToEdit`：

```
[?php

/**
 * <?php echo $this->getModuleName() ?> module configuration.
 *
 * @package    ##PROJECT_NAME##
 * @subpackage <?php echo $this->getModuleName()."\n" ?>
 * @author     ##AUTHOR_NAME##
 * @version    SVN: $Id$
 */
abstract class Base<?php echo ucfirst($this->getModuleName()) ?>GeneratorHelper extends sfModelGeneratorHelper
{
  public function getUrlForAction($action)
  {
    return 'list' == $action ? '<?php echo $this->params['route_prefix'] ?>' : '<?php echo $this->params['route_prefix'] ?>_'.$action;
  }

  public function linkToEdit($object, $params)
  {
    return '<li>'.link_to(' ', $this->getUrlForAction('edit'), $object, array('class' => 'box editer', 'title' => 'Editer')).'</li>';
  }
} 
```

# python-2.6 - 如何按下按钮并单击复选框

> ID：14642055
> 
> 赞同：0
> 
> 时间：2013-02-01T08:08:23.300
> 
> 标签：python-2.6, mechanize-python

如何单击按钮并使用 mechanize python 选中复选框... HTML 代码：

```
<input type="button" id="btn_t" style="width:120px;float:left;margin:10px;margin-top:2px;" value="Apply" disabled=""> 
```

我试过：

```
br.click(id ="btn_t") 
```

但这会引发错误：

```
mechanize._form.ControlNotFoundError: no control matching kind 'clickable', id '
btn_t' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:19:21.663

您的按钮不是标准的提交按钮，因此它可能会触发一些`javascript`您必须模拟的按钮。如果此“点击”触发提交，您可以尝试：

```
br.submit() 
```

# android - 如何处理与 AsyncTask 一起使用的 OutOfMemoryError [内存耗尽]？

> ID：14642059
> 
> 赞同：0
> 
> 时间：2013-02-01T08:08:36.857
> 
> 标签：android, android-asynctask, android-ksoap2

我做了一个应用程序，在其中我使用 soap 从 Magento 框架获取产品列表，Magento 中有 10000 个产品，这是网络任务，所以我实现了 soap 调用并在 AsyncTask 的 doInBackground 方法中解析响应，

但问题是它给了我

```
Caused by: java.lang.OutOfMemoryError: [memory exhausted] 
```

有什么帮助吗？

* * *

我只是删除了将产品信息存储到DTO的ArrayList中的代码，但它仍然给出了同样的错误，我只是调试应用程序，它在调用soap后没有执行

> "androidHttpTransport.call("", 信封);",

并且从这条线重新分配内存需要，它给出了 OutOfMemoryError

请参阅下面的日志...

```
02-01 14:48:39.176: W/KeyCharacterMap(526): No keyboard for id 0
02-01 14:48:39.176: W/KeyCharacterMap(526): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
02-01 14:48:39.253: V/TabGroup2Activity(526): finish from child , mIdList size = 2
02-01 14:48:39.253: V/TabGroup2Activity(526): Last id = OptionsActivity2
02-01 14:48:39.313: V/ProductOptionActivity(526): in on resume
02-01 14:48:45.323: D/dalvikvm(526): GC_EXPLICIT freed 281K, 59% free 2820K/6727K, external 7035K/8182K, paused 102ms
02-01 14:50:15.393: V/Info before check(563): nullnullnull
02-01 14:50:15.403: V/Hello(563): Hello
02-01 14:50:15.403: V/Hello(563): test...http://magento.cybercom.in/mobile/magentoadminadmin123
02-01 14:50:15.553: D/dalvikvm(563): GC_EXTERNAL_ALLOC freed 81K, 51% free 2663K/5379K, external 1819K/2137K, paused 53ms
02-01 14:50:15.844: D/dalvikvm(563): GC_EXTERNAL_ALLOC freed 19K, 51% free 2687K/5379K, external 2348K/2704K, paused 91ms
02-01 14:50:16.033: V/TabGroup1Activity(563): id = OptionsActivity
02-01 14:50:16.033: V/TabGroup1Activity(563): start child , mIdList size = 1
02-01 14:50:35.883: D/dalvikvm(563): GC_CONCURRENT freed 892K, 53% free 3165K/6727K, external 3600K/4216K, paused 5ms+3ms
02-01 14:50:36.773: I/dalvikvm(563): Jit: resizing JitTable from 512 to 1024
02-01 14:50:37.543: D/dalvikvm(563): GC_CONCURRENT freed 931K, 50% free 3594K/7175K, external 3600K/4216K, paused 4ms+4ms
02-01 14:50:39.123: D/dalvikvm(563): GC_CONCURRENT freed 1029K, 48% free 4067K/7751K, external 3600K/4216K, paused 9ms+4ms
02-01 14:50:40.423: D/dalvikvm(563): GC_CONCURRENT freed 1111K, 46% free 4571K/8391K, external 3600K/4216K, paused 4ms+3ms
02-01 14:50:41.823: D/dalvikvm(563): GC_CONCURRENT freed 1250K, 44% free 5138K/9095K, external 3600K/4216K, paused 4ms+5ms
02-01 14:50:43.293: D/dalvikvm(563): GC_CONCURRENT freed 1338K, 42% free 5746K/9799K, external 3600K/4216K, paused 7ms+4ms
02-01 14:50:44.633: D/dalvikvm(563): GC_FOR_MALLOC freed 1342K, 40% free 6358K/10439K, external 3600K/4216K, paused 129ms
02-01 14:50:45.884: D/dalvikvm(563): GC_FOR_MALLOC freed 1302K, 37% free 6952K/11015K, external 3600K/4216K, paused 139ms
02-01 14:50:47.204: D/dalvikvm(563): GC_FOR_MALLOC freed 1319K, 36% free 7555K/11655K, external 3600K/4216K, paused 146ms
02-01 14:50:48.364: D/dalvikvm(563): GC_FOR_MALLOC freed 1287K, 34% free 8143K/12231K, external 3600K/4216K, paused 157ms
02-01 14:50:49.664: D/dalvikvm(563): GC_FOR_MALLOC freed 1265K, 32% free 8721K/12807K, external 3600K/4216K, paused 177ms
02-01 14:50:50.794: D/dalvikvm(563): GC_FOR_MALLOC freed 1251K, 31% free 9292K/13383K, external 3600K/4216K, paused 180ms
02-01 14:50:51.944: D/dalvikvm(563): GC_FOR_MALLOC freed 1241K, 30% free 9858K/13959K, external 3600K/4216K, paused 193ms
02-01 14:50:53.124: D/dalvikvm(563): GC_FOR_MALLOC freed 1234K, 29% free 10422K/14535K, external 3600K/4216K, paused 204ms
02-01 14:50:54.285: D/dalvikvm(563): GC_FOR_MALLOC freed 1229K, 28% free 10982K/15111K, external 3600K/4216K, paused 207ms
02-01 14:50:55.455: D/dalvikvm(563): GC_FOR_MALLOC freed 1226K, 27% free 11543K/15687K, external 3600K/4216K, paused 251ms
02-01 14:50:56.655: D/dalvikvm(563): GC_FOR_MALLOC freed 1180K, 26% free 12081K/16199K, external 3600K/4216K, paused 231ms
02-01 14:50:57.803: D/dalvikvm(563): GC_FOR_MALLOC freed 1193K, 25% free 12626K/16775K, external 3600K/4216K, paused 240ms
02-01 14:50:58.943: D/dalvikvm(563): GC_FOR_MALLOC freed 1157K, 24% free 13154K/17287K, external 3600K/4216K, paused 248ms
02-01 14:51:00.123: D/dalvikvm(563): GC_FOR_MALLOC freed 1177K, 24% free 13692K/17863K, external 3600K/4216K, paused 294ms
02-01 14:51:01.253: D/dalvikvm(563): GC_FOR_MALLOC freed 1147K, 23% free 14215K/18375K, external 3600K/4216K, paused 310ms
02-01 14:51:02.393: D/dalvikvm(563): GC_FOR_MALLOC freed 1127K, 23% free 14730K/18887K, external 3600K/4216K, paused 276ms
02-01 14:51:03.544: D/dalvikvm(563): GC_FOR_MALLOC freed 1114K, 22% free 15238K/19399K, external 3600K/4216K, paused 283ms
02-01 14:51:04.734: D/dalvikvm(563): GC_FOR_MALLOC freed 1105K, 21% free 15742K/19911K, external 3600K/4216K, paused 364ms
02-01 14:51:05.995: D/dalvikvm(563): GC_FOR_MALLOC freed 1098K, 21% free 16244K/20423K, external 3600K/4216K, paused 310ms
02-01 14:51:07.083: I/dalvikvm-heap(563): Clamp target GC heap from 24.410MB to 24.000MB
02-01 14:51:07.093: D/dalvikvm(563): GC_FOR_MALLOC freed 1093K, 21% free 16743K/20935K, external 3600K/4216K, paused 308ms
02-01 14:51:08.173: I/dalvikvm-heap(563): Clamp target GC heap from 24.758MB to 24.000MB
02-01 14:51:08.193: D/dalvikvm(563): GC_FOR_MALLOC freed 782K, 19% free 17100K/20999K, external 3600K/4216K, paused 330ms
02-01 14:51:08.953: I/dalvikvm-heap(563): Clamp target GC heap from 24.996MB to 24.000MB
02-01 14:51:08.998: D/dalvikvm(563): GC_FOR_MALLOC freed 531K, 18% free 17343K/20999K, external 3600K/4216K, paused 310ms
02-01 14:51:09.593: I/dalvikvm-heap(563): Clamp target GC heap from 25.158MB to 24.000MB
02-01 14:51:09.603: D/dalvikvm(563): GC_FOR_MALLOC freed 362K, 17% free 17508K/20999K, external 3600K/4216K, paused 311ms
02-01 14:51:10.163: I/dalvikvm-heap(563): Clamp target GC heap from 25.267MB to 24.000MB
02-01 14:51:10.183: D/dalvikvm(563): GC_FOR_MALLOC freed 247K, 17% free 17621K/20999K, external 3600K/4216K, paused 310ms
02-01 14:51:10.693: I/dalvikvm-heap(563): Clamp target GC heap from 25.342MB to 24.000MB
02-01 14:51:10.705: D/dalvikvm(563): GC_FOR_MALLOC freed 168K, 16% free 17698K/20999K, external 3600K/4216K, paused 319ms
02-01 14:51:11.143: I/dalvikvm-heap(563): Clamp target GC heap from 25.394MB to 24.000MB
02-01 14:51:11.163: D/dalvikvm(563): GC_FOR_MALLOC freed 115K, 16% free 17751K/20999K, external 3600K/4216K, paused 305ms
02-01 14:51:11.623: I/dalvikvm-heap(563): Clamp target GC heap from 25.429MB to 24.000MB
02-01 14:51:11.677: D/dalvikvm(563): GC_FOR_MALLOC freed 78K, 16% free 17787K/20999K, external 3600K/4216K, paused 385ms
02-01 14:51:12.134: I/dalvikvm-heap(563): Clamp target GC heap from 25.453MB to 24.000MB
02-01 14:51:12.153: D/dalvikvm(563): GC_FOR_MALLOC freed 53K, 16% free 17811K/20999K, external 3600K/4216K, paused 408ms
02-01 14:51:12.613: I/dalvikvm-heap(563): Clamp target GC heap from 25.469MB to 24.000MB
02-01 14:51:12.623: D/dalvikvm(563): GC_FOR_MALLOC freed 36K, 16% free 17828K/20999K, external 3600K/4216K, paused 373ms
02-01 14:51:13.043: I/dalvikvm-heap(563): Clamp target GC heap from 25.480MB to 24.000MB
02-01 14:51:13.063: D/dalvikvm(563): GC_FOR_MALLOC freed 24K, 16% free 17839K/20999K, external 3600K/4216K, paused 404ms
02-01 14:51:13.453: I/dalvikvm-heap(563): Clamp target GC heap from 25.487MB to 24.000MB
02-01 14:51:13.463: D/dalvikvm(563): GC_FOR_MALLOC freed 15K, 16% free 17846K/20999K, external 3600K/4216K, paused 381ms
02-01 14:51:13.854: I/dalvikvm-heap(563): Clamp target GC heap from 25.492MB to 24.000MB
02-01 14:51:13.863: D/dalvikvm(563): GC_FOR_MALLOC freed 9K, 15% free 17850K/20999K, external 3600K/4216K, paused 357ms
02-01 14:51:14.203: I/dalvikvm-heap(563): Clamp target GC heap from 25.494MB to 24.000MB
02-01 14:51:14.213: D/dalvikvm(563): GC_FOR_MALLOC freed 5K, 15% free 17853K/20999K, external 3600K/4216K, paused 337ms
02-01 14:51:14.613: I/dalvikvm-heap(563): Clamp target GC heap from 25.496MB to 24.000MB
02-01 14:51:14.643: D/dalvikvm(563): GC_FOR_MALLOC freed 3K, 15% free 17855K/20999K, external 3600K/4216K, paused 407ms
02-01 14:51:14.983: I/dalvikvm-heap(563): Clamp target GC heap from 25.497MB to 24.000MB
02-01 14:51:14.993: D/dalvikvm(563): GC_FOR_MALLOC freed 2K, 15% free 17855K/20999K, external 3600K/4216K, paused 343ms
02-01 14:51:15.323: I/dalvikvm-heap(563): Clamp target GC heap from 25.497MB to 24.000MB
02-01 14:51:15.333: D/dalvikvm(563): GC_FOR_MALLOC freed 1K, 15% free 17856K/20999K, external 3600K/4216K, paused 330ms
02-01 14:51:15.703: I/dalvikvm-heap(563): Clamp target GC heap from 25.498MB to 24.000MB
02-01 14:51:15.713: D/dalvikvm(563): GC_FOR_MALLOC freed <1K, 15% free 17857K/20999K, external 3600K/4216K, paused 359ms
02-01 14:51:16.233: I/dalvikvm-heap(563): Clamp target GC heap from 25.498MB to 24.000MB
02-01 14:51:16.269: D/dalvikvm(563): GC_FOR_MALLOC freed <1K, 15% free 17857K/20999K, external 3600K/4216K, paused 518ms
02-01 14:51:16.753: I/dalvikvm-heap(563): Clamp target GC heap from 25.498MB to 24.000MB
02-01 14:51:16.773: D/dalvikvm(563): GC_FOR_MALLOC freed 0K, 15% free 17857K/20999K, external 3600K/4216K, paused 419ms
02-01 14:51:16.773: I/dalvikvm-heap(563): Forcing collection of SoftReferences for 32-byte allocation
02-01 14:51:17.233: I/dalvikvm-heap(563): Clamp target GC heap from 25.496MB to 24.000MB
02-01 14:51:17.253: D/dalvikvm(563): GC_FOR_MALLOC freed 1K, 15% free 17855K/20999K, external 3600K/4216K, paused 465ms
02-01 14:51:17.613: I/dalvikvm-heap(563): Clamp target GC heap from 25.498MB to 24.000MB
02-01 14:51:17.623: D/dalvikvm(563): GC_FOR_MALLOC freed 2K, 15% free 17857K/20999K, external 3600K/4216K, paused 365ms
02-01 14:51:18.045: I/dalvikvm-heap(563): Clamp target GC heap from 25.499MB to 24.000MB
02-01 14:51:18.066: D/dalvikvm(563): GC_FOR_MALLOC freed 1K, 15% free 17857K/20999K, external 3600K/4216K, paused 416ms
02-01 14:51:18.463: I/dalvikvm-heap(563): Clamp target GC heap from 25.499MB to 24.000MB
02-01 14:51:18.493: D/dalvikvm(563): GC_FOR_MALLOC freed 1K, 15% free 17858K/20999K, external 3600K/4216K, paused 401ms
02-01 14:51:18.923: I/dalvikvm-heap(563): Clamp target GC heap from 25.500MB to 24.000MB
02-01 14:51:18.943: D/dalvikvm(563): GC_FOR_MALLOC freed <1K, 15% free 17858K/20999K, external 3600K/4216K, paused 438ms
02-01 14:51:19.313: I/dalvikvm-heap(563): Clamp target GC heap from 25.500MB to 24.000MB
02-01 14:51:19.325: D/dalvikvm(563): GC_FOR_MALLOC freed <1K, 15% free 17858K/20999K, external 3600K/4216K, paused 369ms
02-01 14:51:19.683: I/dalvikvm-heap(563): Clamp target GC heap from 25.500MB to 24.000MB
02-01 14:51:19.713: D/dalvikvm(563): GC_FOR_MALLOC freed <1K, 15% free 17858K/20999K, external 3600K/4216K, paused 357ms
02-01 14:51:19.713: I/dalvikvm-heap(563): Forcing collection of SoftReferences for 44-byte allocation
02-01 14:51:20.113: I/dalvikvm-heap(563): Clamp target GC heap from 25.500MB to 24.000MB
02-01 14:51:20.133: D/dalvikvm(563): GC_FOR_MALLOC freed 0K, 15% free 17858K/20999K, external 3600K/4216K, paused 409ms
02-01 14:51:20.133: E/dalvikvm-heap(563): Out of memory on a 44-byte allocation.
02-01 14:51:20.133: I/dalvikvm(563): "AsyncTask #1" prio=5 tid=9 RUNNABLE JIT
02-01 14:51:20.133: I/dalvikvm(563):   | group="main" sCount=0 dsCount=0 obj=0x405339b8 self=0x2b8fa8
02-01 14:51:20.133: I/dalvikvm(563):   | sysTid=572 nice=10 sched=0/0 cgrp=bg_non_interactive handle=2853696
02-01 14:51:20.133: I/dalvikvm(563):   | schedstat=( 39823809736 8700307287 2410 )
02-01 14:51:20.133: I/dalvikvm(563):   at java.lang.String.<init>(String.java:~513)
02-01 14:51:20.133: I/dalvikvm(563):   at org.kxml2.io.KXmlParser.get(KXmlParser.java:610)
02-01 14:51:20.133: I/dalvikvm(563):   at org.kxml2.io.KXmlParser.parseStartTag(KXmlParser.java:719)
02-01 14:51:20.133: I/dalvikvm(563):   at org.kxml2.io.KXmlParser.nextImpl(KXmlParser.java:342)
02-01 14:51:20.133: I/dalvikvm(563):   at org.kxml2.io.KXmlParser.next(KXmlParser.java:1378)
02-01 14:51:20.133: I/dalvikvm(563):   at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:1408)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:275)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:389)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:273)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:389)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.readVector(SoapSerializationEnvelope.java:323)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.readInstance(SoapSerializationEnvelope.java:446)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:387)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:273)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:389)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:151)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:140)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.transport.Transport.parseResponse(Transport.java:100)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:214)
02-01 14:51:20.133: I/dalvikvm(563):   at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96)
02-01 14:51:20.133: I/dalvikvm(563):   at com.magentodemo.MainActivity$DownloadWebPageTask.doInBackground(MainActivity.java:475)
02-01 14:51:20.133: I/dalvikvm(563):   at com.magentodemo.MainActivity$DownloadWebPageTask.doInBackground(MainActivity.java:1)
02-01 14:51:20.133: I/dalvikvm(563):   at android.os.AsyncTask$2.call(AsyncTask.java:185)
02-01 14:51:20.133: I/dalvikvm(563):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
02-01 14:51:20.133: I/dalvikvm(563):   at java.util.concurrent.FutureTask.run(FutureTask.java:138)
02-01 14:51:20.153: I/dalvikvm(563):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
02-01 14:51:20.153: I/dalvikvm(563):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
02-01 14:51:20.153: I/dalvikvm(563):   at java.lang.Thread.run(Thread.java:1019)
02-01 14:51:20.523: I/dalvikvm-heap(563): Clamp target GC heap from 25.500MB to 24.000MB
02-01 14:51:20.533: D/dalvikvm(563): GC_FOR_MALLOC freed <1K, 15% free 17858K/20999K, external 3600K/4216K, paused 355ms
02-01 14:51:20.533: I/dalvikvm-heap(563): Forcing collection of SoftReferences for 240-byte allocation
02-01 14:51:20.863: I/dalvikvm-heap(563): Clamp target GC heap from 25.500MB to 24.000MB
02-01 14:51:20.873: D/dalvikvm(563): GC_FOR_MALLOC freed 0K, 15% free 17858K/20999K, external 3600K/4216K, paused 330ms
02-01 14:51:20.873: E/dalvikvm-heap(563): Out of memory on a 240-byte allocation.
02-01 14:51:20.873: I/dalvikvm(563): "AsyncTask #1" prio=5 tid=9 RUNNABLE
02-01 14:51:20.873: I/dalvikvm(563):   | group="main" sCount=0 dsCount=0 obj=0x405339b8 self=0x2b8fa8
02-01 14:51:20.873: I/dalvikvm(563):   | sysTid=572 nice=10 sched=0/0 cgrp=bg_non_interactive handle=2853696
02-01 14:51:20.873: I/dalvikvm(563):   | schedstat=( 40517822073 8767874467 2431 )
02-01 14:51:20.873: I/dalvikvm(563):   at java.lang.Throwable.nativeFillInStackTrace(Native Method)
02-01 14:51:20.873: I/dalvikvm(563):   at java.lang.Throwable.fillInStackTrace(Throwable.java:135)
02-01 14:51:20.873: I/dalvikvm(563):   at java.lang.Throwable.<init>(Throwable.java:74)
02-01 14:51:20.873: I/dalvikvm(563):   at java.lang.Error.<init>(Error.java:38)
02-01 14:51:20.873: I/dalvikvm(563):   at java.lang.VirtualMachineError.<init>(VirtualMachineError.java:36)
02-01 14:51:20.873: I/dalvikvm(563):   at java.lang.OutOfMemoryError.<init>(OutOfMemoryError.java:34)
02-01 14:51:20.873: I/dalvikvm(563):   at java.lang.String.<init>(String.java:-1)
02-01 14:51:20.873: I/dalvikvm(563):   at org.kxml2.io.KXmlParser.get(KXmlParser.java:610)
02-01 14:51:20.873: I/dalvikvm(563):   at org.kxml2.io.KXmlParser.parseStartTag(KXmlParser.java:719)
02-01 14:51:20.873: I/dalvikvm(563):   at org.kxml2.io.KXmlParser.nextImpl(KXmlParser.java:342)
02-01 14:51:20.873: I/dalvikvm(563):   at org.kxml2.io.KXmlParser.next(KXmlParser.java:1378)
02-01 14:51:20.873: I/dalvikvm(563):   at org.kxml2.io.KXmlParser.nextTag(KXmlParser.java:1408)
02-01 14:51:20.873: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:275)
02-01 14:51:20.873: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:389)
02-01 14:51:20.873: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:273)
02-01 14:51:20.873: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:389)
02-01 14:51:20.873: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.readVector(SoapSerializationEnvelope.java:323)
02-01 14:51:20.873: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.readInstance(SoapSerializationEnvelope.java:446)
02-01 14:51:20.873: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:387)
02-01 14:51:20.873: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.readUnknown(SoapSerializationEnvelope.java:273)
02-01 14:51:20.873: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.read(SoapSerializationEnvelope.java:389)
02-01 14:51:20.883: I/dalvikvm(563):   at org.ksoap2.serialization.SoapSerializationEnvelope.parseBody(SoapSerializationEnvelope.java:151)
02-01 14:51:20.883: I/dalvikvm(563):   at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:140)
02-01 14:51:20.883: I/dalvikvm(563):   at org.ksoap2.transport.Transport.parseResponse(Transport.java:100)
02-01 14:51:20.883: I/dalvikvm(563):   at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:214)
02-01 14:51:20.883: I/dalvikvm(563):   at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:96)
02-01 14:51:20.883: I/dalvikvm(563):   at com.magentodemo.MainActivity$DownloadWebPageTask.doInBackground(MainActivity.java:475)
02-01 14:51:20.883: I/dalvikvm(563):   at com.magentodemo.MainActivity$DownloadWebPageTask.doInBackground(MainActivity.java:1)
02-01 14:51:20.883: I/dalvikvm(563):   at android.os.AsyncTask$2.call(AsyncTask.java:185)
02-01 14:51:20.883: I/dalvikvm(563):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
02-01 14:51:20.883: I/dalvikvm(563):   at java.util.concurrent.FutureTask.run(FutureTask.java:138)
02-01 14:51:20.883: I/dalvikvm(563):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
02-01 14:51:20.883: I/dalvikvm(563):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
02-01 14:51:20.883: I/dalvikvm(563):   at java.lang.Thread.run(Thread.java:1019)
02-01 14:51:20.883: W/dalvikvm(563): Exception thrown (Ljava/lang/OutOfMemoryError;) while throwing internal exception (Ljava/lang/OutOfMemoryError;)
02-01 14:51:21.343: D/dalvikvm(563): GC_FOR_MALLOC freed 15123K, 87% free 2735K/20999K, external 3600K/4216K, paused 456ms
02-01 14:51:21.343: W/dalvikvm(563): threadid=9: thread exiting with uncaught exception (group=0x40015560)
02-01 14:51:21.353: E/AndroidRuntime(563): FATAL EXCEPTION: AsyncTask #1
02-01 14:51:21.353: E/AndroidRuntime(563): java.lang.RuntimeException: An error occured while executing doInBackground()
02-01 14:51:21.353: E/AndroidRuntime(563):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
02-01 14:51:21.353: E/AndroidRuntime(563):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
02-01 14:51:21.353: E/AndroidRuntime(563):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
02-01 14:51:21.353: E/AndroidRuntime(563):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
02-01 14:51:21.353: E/AndroidRuntime(563):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
02-01 14:51:21.353: E/AndroidRuntime(563):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
02-01 14:51:21.353: E/AndroidRuntime(563):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
02-01 14:51:21.353: E/AndroidRuntime(563):  at java.lang.Thread.run(Thread.java:1019)
02-01 14:51:21.353: E/AndroidRuntime(563): Caused by: java.lang.OutOfMemoryError: [memory exhausted]
02-01 14:51:21.353: E/AndroidRuntime(563):  at dalvik.system.NativeStart.main(Native Method)
02-01 14:51:22.605: E/WindowManager(563): Activity com.magentodemo.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4053cbc8 that was originally added here
02-01 14:51:22.605: E/WindowManager(563): android.view.WindowLeaked: Activity com.magentodemo.MainActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4053cbc8 that was originally added here
02-01 14:51:22.605: E/WindowManager(563):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
02-01 14:51:22.605: E/WindowManager(563):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
02-01 14:51:22.605: E/WindowManager(563):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
02-01 14:51:22.605: E/WindowManager(563):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
02-01 14:51:22.605: E/WindowManager(563):   at android.app.Dialog.show(Dialog.java:241)
02-01 14:51:22.605: E/WindowManager(563):   at android.app.ProgressDialog.show(ProgressDialog.java:107)
02-01 14:51:22.605: E/WindowManager(563):   at android.app.ProgressDialog.show(ProgressDialog.java:90)
02-01 14:51:22.605: E/WindowManager(563):   at com.magentodemo.MainActivity$DownloadWebPageTask.onPreExecute(MainActivity.java:279)
02-01 14:51:22.605: E/WindowManager(563):   at android.os.AsyncTask.execute(AsyncTask.java:391)
02-01 14:51:22.605: E/WindowManager(563):   at com.magentodemo.MainActivity.onCreate(MainActivity.java:83)
02-01 14:51:22.605: E/WindowManager(563):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-01 14:51:22.605: E/WindowManager(563):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-01 14:51:22.605: E/WindowManager(563):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-01 14:51:22.605: E/WindowManager(563):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-01 14:51:22.605: E/WindowManager(563):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-01 14:51:22.605: E/WindowManager(563):   at android.os.Handler.dispatchMessage(Handler.java:99)
02-01 14:51:22.605: E/WindowManager(563):   at android.os.Looper.loop(Looper.java:123)
02-01 14:51:22.605: E/WindowManager(563):   at android.app.ActivityThread.main(ActivityThread.java:3683)
02-01 14:51:22.605: E/WindowManager(563):   at java.lang.reflect.Method.invokeNative(Native Method)
02-01 14:51:22.605: E/WindowManager(563):   at java.lang.reflect.Method.invoke(Method.java:507)
02-01 14:51:22.605: E/WindowManager(563):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-01 14:51:22.605: E/WindowManager(563):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-01 14:51:22.605: E/WindowManager(563):   at dalvik.system.NativeStart.main(Native Method)
02-01 14:51:27.403: D/dalvikvm(563): GC_EXPLICIT freed 69K, 87% free 2746K/20999K, external 3600K/4216K, paused 45ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:30:43.280

Storing data in Array List is depends only on the available memory of devices VM.

If your VM has available memory of 1 MB, you could store an array of byte[1024 * 1024] or Object[256 * 1024].

So it is possibly because storing data in ArrayList. Still it seems to keep the data in application memory which allocated by device VM.

I am suggesting you to give a try by get the response, parse it and directly store it in DB without using any temporary arrays to keep the data in application memory.

# forms - Magento：如何向管理菜单项添加简单的表单？

> ID：14642064
> 
> 赞同：1
> 
> 时间：2013-02-01T08:09:01.987
> 
> 标签：forms, magento

我创建了一个新的菜单项，我们称之为“我的菜单项”。它显示在 Magento 的管理区域。如果单击新项目，我不想显示网格，而是一个带有一些文本字段和按钮的简单表单应该触发一个动作。我该怎么做？我发现的所有示例都创建了一个网格来显示数据，这不是我想要的。我只想要一个表格就在我的菜单项“后面”

那可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:45:35.323

是的，它完全有可能，因为该框架本质上是可扩展的。你为什么不做以下。

1.) 确保您的 adminhtml 控制器正常工作。2.) 创建您在菜单项的操作标签中指定的操作。3.) 在上述动作中：

```
$this->loadLayout();
$this->renderLayout(); 
```

这就是控制器的全部需要。此时您应该正在加载标准的 magento 管理布局。所以你想在页面中添加一个表单？好的，很简单。

4.) 为您的模块声明一个布局 xml 文件。即在您的 etc/config.xml 中，即把它放在全局节点之外。

```
<adminhtml>
    <layout>
        <updates>
            <yournamespace_yourmodule>
                <file>yourfile.xml</file>
            </yournamespace_yourmodule>
        </updates>
    </layout>
</adminhtml> 
```

那么你会把这个文件放在哪里呢？

好吧，这取决于你，但我建议把它放在 app/design/adminhtml/default/default/layout

这个文件是干什么用的？好吧，我们可以注册一个块并为其设置一个模板文件。

该文件可能看起来像

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>
<adminhtml_yourcontroller_youraction>
    <reference name="content">
         <block type="yournamespace_yourmodule/adminhtml_yourblock"
                name="yournamespace_yourmodule_form" template="yourformtemplate.phtml"/>
     </reference>
</adminhtml_yourcontroller_youraction>
</layout> 
```

所以接下来的步骤是

5.) 按照您在布局 xml 文件中的引用方式声明一个新块

**编辑：**为了澄清块文件，继续示例，在模块目录中的 Block/Adminhtml 下创建一个文件，并将其命名为“Yourblock.php”或您想要的任何名称，确保它与您的块声明相对应：

```
<block type="yournamespace_yourmodule/adminhtml_yourblock" ... found in your layout file. 
```

以下是 Block Class 的示例：

```
<?php

class Yournamespace_Yourmodule_Block_Adminhtml_Yourblock extends Mage_Adminhtml_Block_Template
{
     //to statt you dont really need anything here, but this is where you would place you block methods that can assist your template file when it needs data or other logic...
} 
```

6.）创建一个模板文件并将其正确放置，在我的示例中将其放置在

应用程序/设计/adminhtml/默认/默认/模板

将您的 php 表单添加到其中（或一些标准 html 以检查其是否正常工作）

就是这样（就显示表单而言——当然，您现在需要创建操作来接受您的表单 POST 以及所有其他内容）。

回顾一下。

*   声明一个 adminhtml 布局更新文件
*   声明一个新的 adminhtml 块
*   实例化块并设置其模板文件，确保布局更新仅特定于您的控制器操作。（都在布局 xml 文件中）
*   在控制器动作中，只需加载和渲染布局。

# bash - 从字符串中提取文件名

> ID：14642068
> 
> 赞同：1
> 
> 时间：2013-02-01T08:09:15.240
> 
> 标签：bash, shell

我在每一行都有一个长字符串，比如

> 1000 AS34_59329 RICwdsRSYHSD11-2-IPAAPEK-93 **/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz** **/ ifshk5 / BC_IP / PROJECT / T11073 / T11073_RICekkR / Fq上/ AS34_59329 / 111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_2.fq.gz** **/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/clean_111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz.total.info** 11.824 0.981393 43.8283 95.7401 OK

此行包含三个文件位置（粗体）。我需要将这些文件 scp 到另一个位置，例如 /sample。

如何使用 shell 对每一行中的文件进行 scp 处理？

```
 while read myline  
  do  
    echo "LINE:"$myline 
    scp .......

  done < datafile.list 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:15:10.987

如果这些是第 4、5 和 6 列，您可以执行以下操作：

```
while read _ _ _ file1 file2 file3 _ 
do  
    scp "$file1" "$file2" "$file3" "user@host:path"
done < datafile.list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:37:06.867

使用`grep`：

```
# grep each file name
$ grep -o "/[^ ]*" datafile.list
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_2.fq.gz
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/clean_111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz.total.info

# Pipe files to scp 
$ grep -o "/[^ ]*" datafile.list | xargs -i% scp % host:/sample 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:26:56.513

您可以检查您的字符串的一部分是否是一个文件，`-f`然后执行您的`scp`.

```
#!/bin/bash
str="1000 AS34_59329 RICwdsRSYHSD11-2-IPAAPEK-93 /ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz /ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_2.fq.gz /ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS34_59329/clean_111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz.total.info 11.824 0.981393 43.8283 95.7401 OK"

for i in $str
do
  if [ -f $i ]; then
    echo $i
    # scp here
  fi
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:18:47.263

如果您的目标是捕获文件名，记录中的单词数是可变的，并且文件名不包含空格（如您的示例中所示），您可以尝试以下操作：

```
while read -rd ' ' word || [ "$word" ] ; do
    if [ "$word" != "${word#\/}" ] ; then
        echo '$word is the name of a file'
    fi
done < datafile.list 
```

# c# - 当我试图打开它时找不到文件

> ID：14642070
> 
> 赞同：1
> 
> 时间：2013-02-01T08:09:24.870
> 
> 标签：c#, asp.net, asp.net-mvc

我正在尝试打开证书文件：

```
//path to file
static string KKBpfxFile = 
    Path.Combine(HostingEnvironment.ApplicationPhysicalPath,
                 ConfigurationManager.AppSettings["CertFolder"], 
                 "cert.pfx");

_logger.Debug(KKBpfxFile);

X509Certificate2 KKbCert = new X509Certificate2(KKBpfxFile, KKBpfxPass); 
```

但是，我找不到异常文件。在日志文件中包含以下路径：

> C:\inetpub\wwwroot\msite\Certificates\cert.pfx

我在资源管理器中打开此路径，一切正常。该文件存在。
哪里有问题？

PS。我授予了此文件夹的所有（读取、写入和其他）权限以进行`ALL`分组。
PS2。这只是生产服务器上的问题。在我的本地机器上是有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:15:49.260

尝试`File.Exists()`在调用构造函数之前进行检查。

此外，访问权限可能仍然存在问题，具体取决于运行应用程序池的用户，但如果您将访问权限设置为“每个人”，它应该可以工作。仍然......在生产服务器上仔细检查。

此外，作为进一步的步骤，您可以在调用构造函数之前检查文件的 ACL 并查看您是否具有读取权限，甚至更进一步，将文件加载到字节数组中并使用字节数组作为 arg 调用构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:26:39.057

使用 procexp.exe 并在 exe 中给出路径。我会告诉你哪个程序锁定了你的文件。请求程序释放它。不要杀死它，因为它是生产服务器。

Procexp 可以在您的本地机器中找到/从 microsoft 下载。将 tat exe 复制到生产服务器并从那里运行

# ruby-on-rails-3 - Ruby Gnuplot 不保存到文件

> ID：14642071
> 
> 赞同：1
> 
> 时间：2013-02-01T08:09:33.703
> 
> 标签：ruby-on-rails-3, gnuplot

我今天开始使用 gnuplot 并尝试了一些示例，尤其是[这个](https://github.com/rdp/ruby_gnuplot/blob/master/examples/output_image_file.rb)示例。它的作用是创建一个 Sin-Wave-Diagramm 并将其放入一个文件中，这就是我想要的，但是当我执行此代码时（我将它放入模型中还是直接放入 Rails 控制台都没有关系）它完全没有任何作用。所以我尝试记录活动并且代码运行良好。我用记录器检查了绘图对象，这就是输出（对格式化感到抱歉，但我用 Blockquotes 得到了一些奇怪的输出）：

```
#<Gnuplot::Plot:0x2d597c0 @cmd="plot", @settings=[[:set, "terminal", "png"], [:set, "output", "\"/root/rails/drapetest/tst.png\""], [:set, "xrange", "[-10:10]"], [:set, "title", "\"Array Plot Example\""], [:set, "xlabel", "\"x\""], [:set, "ylabel", "\"sin(x)\""]], @arbitrary_lines=[], @data=[#<Gnuplot::DataSet:0x2d58ba8 @data="sin(x)", @axes=nil, @smooth=nil, @matrix=nil, @linecolor=nil, @linewidth=4, @using=nil, @with="lines", @title=nil>]> 
```

据我所知，这没关系（我只是好奇他为什么将路径放在两个 "" 中）。我接下来要做的是，我将代码直接放入控制器的 index-Action 中，然后他将输出呈现到窗口中，这正是他根据插件文档应该做的事情。所以数据没问题，整体输出也没问题，但他只是没有把它放入文件中。根据 gnuplot，我在每个教程中都看到了上面的示例，它似乎有效。

一些数据：系统是一个 RaspberryPi（是的，Ruby on Rails 在 Raspberry 上运行得非常好），带有最新的 Raspian OS。CPU没有超频。

Ruby 版本：1.9.3p374 Rails 版本：3.2.11

我还在我的笔记本电脑上测试了相同的代码：i7 QM 2.2GHz Quad Core 8 GB RAM Linux Mint 13 x64 Same Ruby and Rails-Versions 我也遇到了同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:10:41.987

好吧，我想通了，我很尴尬地承认，但我只是忘了 `require 'gnuplot'`在我的课程中添加一个。那是一个非常愚蠢的人，我可以咬自己，但仍然：谢谢！

# javascript - 如何在 D3 圆包中使用 pack.sort() 函数？

> ID：14642077
> 
> 赞同：3
> 
> 时间：2013-02-01T08:09:55.740
> 
> 标签：javascript, sorting, d3.js, circle-pack

我正在尝试理解 D3 并用它来制作文字云......这是为此目的使用 D3 circle pack 的代码：

```
var diameter = 560,
  format = d3.format(",d"),
  color = d3.scale.category20c();

var bubble = d3.layout.pack()
  .sort()
  .size([diameter, diameter])
  .padding(.5);

var svg = d3.select("body").append("svg")
  .attr("width", diameter)
  .attr("height", diameter)
  .attr("class", "bubble");

d3.json("data/bubble.json", function(error, root) {
  var node = svg.selectAll(".node")
    .data(bubble.nodes(classes(root))
    .filter(function(d) { return !d.children; }))
   .enter()
    .append("g")
    .attr("class", "node")
    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

  node.append("title")
    .text(function(d) { return d.className + ": " + format(d.value); });

  node.append("circle")
    .attr("r", function(d) { return d.r; })
    .style("fill", function(d) { return color(d.packageName); });

  node.append("text")
    .attr("dy", ".3em")
    .style("text-anchor", "middle")
    .text(function(d) { return d.className.substring(0, d.r / 3); });
}); 
```

气泡是按随机顺序出现的，但我希望它们按排序顺序排列，比如最左边最大的圆圈，然后在最右边的最小的圆圈右边更小......

怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-06T21:53:19.330

在这部分代码中：

```
var bubble = d3.layout.pack()
  .sort()// <-- here
  .size([diameter, diameter])
  .padding(.5); 
```

尝试添加一个比较器函数，以便告诉 pack() 您希望如何对数据进行排序。否则，您将获得默认比较器：

```
function comparator(a, b) {
  return a.value - b.value;
} 
```

例如，如果您想根据字长进行排序：

```
function(a, b){
    return a.text.length - b.text.length;
} 
```

这里还有一些[文档](https://github.com/mbostock/d3/wiki/Pack-Layout#wiki-sort)

# mysql - 带有外键的 MySQL errno 150

> ID：14642082
> 
> 赞同：1
> 
> 时间：2013-02-01T08:10:24.973
> 
> 标签：mysql, database, foreign-keys, innodb

因此，当我输入以下内容时，我一直收到此错误：

```
ALTER TABLE user_follow
ADD FOREIGN KEY (follower,following)
REFERENCES users(idusers) 
```

但是当我将跟随者和跟随者分开时我没有收到错误

```
ALTER TABLE user_follow
ADD FOREIGN KEY (follower)
REFERENCES users(idusers)

ALTER TABLE user_follow
ADD FOREIGN KEY (following)
REFERENCES users(idusers) 
```

我这样做正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:16:33.360

因为您不能将多个列引用到另一个表的一列。下面是一个关于如何定义多个复合外键的示例

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/e4d76)

# ui-automation - Ranorex 无法唯一识别元素？

> ID：14642087
> 
> 赞同：2
> 
> 时间：2013-02-01T08:11:11.393
> 
> 标签：ui-automation, ranorex

一个现有的应用程序有一个html表格，在body标签内，有多个同名的td标签

Ranorex 无法将它们全部导入存储库，因为它们都具有相同的 XPath。

如何将这些项目添加到存储库？

我尝试进行录制，自动创建的存储库仅包含一个存储库项目..

注意：我无法对应用程序进行任何更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T10:46:44.657

有了更多信息，这会容易得多，比如当您将任何项目添加到存储库时，您获得的 Ranorex XPath 是什么？

此外，除了上面提到的 Max 方式之外，您将 ENTIRE 表添加到存储库，然后找到后代注意：不是子项，因为子项只能从下一个集合中找到元素，因此可能找不到您要查找的所有时间（看起来像这样）：

```
foreach(Ranorex.TdTag tags in repo.testWebsite.tdTable.FindDescendants<Ranorex.TdTag>())
{
if(tags.TagValue.contains("<tagname>"));
{
tags.<DOSOMETHING>();
}
} 
```

请注意，这应该遍历所有标签并为它们做同样的事情。

除此之外，虽然所有标签可能在存储库中找到并以相同的方式显示，但它们有多个，因此可以将它推到一个有根文件夹中，将整个表添加为根，然后添加td 标签作为数组项。

```
.//div[#'pagecontent']/div[1]/div[2]/div/div/ul/form[2]/li/input[@name='Submit'] 
```

上面的示例有多个 /div 部分，因此要确定要搜索哪个部分，请在 [#]、div[1] 或 div[2] 中输入，因为这些是您遇到的第一个或第二个 /div 标签。tdTags 的工作方式可能与您可以标记 tdtag[1]、[2]、[3] 等的方式相同，但它可能值得一试，因为它允许您创建所需的存储库项目.

我自己对此很陌生，所以假设可能是错误的。

*编辑*等等，Max 回答了他自己的问题吗？哈哈...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:55:55.230

您必须创建一个自定义 UI 自动化提供程序来公开这些元素。查看 System.Windows.Automation.Provider 命名空间以了解详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T11:39:18.567

方法如下：查找父元素，并在代码中使用查找子元素

这不允许您在存储库中实际添加项目，但至少您可以获取项目列表并通过遍历列表来单独访问它们！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T13:48:53.443

我发现的最简单的方法是将单个项目添加到代表所有项目的存储库中。IE。"./Select/option" 将识别选项列表框中的所有元素，然后在用户代码中使用 repoiteminfo.createAdapters ( [http://www.ranorex.com/Documentation/Ranorex/html/M_Ranorex_Core_Repository_RepoItemInfo_CreateAdapters__1.htm](http://www.ranorex.com/Documentation/Ranorex/html/M_Ranorex_Core_Repository_RepoItemInfo_CreateAdapters__1.htm) ) 方法创建每个元素的单独适配器

# asp.net - 在 asp.net 应用程序中接收数据

> ID：14642088
> 
> 赞同：0
> 
> 时间：2013-02-01T08:11:19.720
> 
> 标签：asp.net, json, http

我向一个 api 发出一个 http 请求，它作为回报向我的 asp.net 应用程序发送一些响应。

发送的数据格式为

```
{
    "deliveryInfoNotification": {
        "deliveryInfo": {
            "address": "14075550100",
            "code": "0",
            "createdDateTime": "2011-05-12T00:55:25.313Z",
            "deliveryStatus": "DeliveredToNetwork",
            "direction": "outbound",
            "message": "Hello world",
            "messageId": "3e5caf2782cb2eb310878b03efec5083",
            "parts": "1",
            "senderAddress": "16575550100",
            "sentDateTime": "2011-05-12T00:55:34.359Z"
        }
    }
} 
```

一旦它在那里接收，我如何通过我的 asp.net 应用程序接收和解析这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:06:08.497

要在 ASP.NET 中处理 JSON，您可以使用`Web.Script.Serialization.JavaScriptSerializer`（添加对 的引用`System.Web.Extensions`）。将返回的对象转换`.DeserializeObject()`为 a`Generic.Dictionary`以使用它。

```
Dim json As String = String.Concat(
   "{",
       """deliveryInfoNotification"": {",
           """deliveryInfo"": {",
               """address"": ""14075550100"",",
               """code"": ""0"",",
               """createdDateTime"": ""2011-05-12T00:55:25.313Z"",",
               """deliveryStatus"": ""DeliveredToNetwork"",",
               """direction"": ""outbound"",",
               """message"": ""Hello world"",",
               """messageId"": ""3e5caf2782cb2eb310878b03efec5083"",",
               """parts"": ""1"",",
               """senderAddress"": ""16575550100"",",
               """sentDateTime"": ""2011-05-12T00:55:34.359Z""",
           "}",
       "}",
   "}")

Dim serializer As New Web.Script.Serialization.JavaScriptSerializer,
    jsonObject As System.Collections.Generic.Dictionary(Of String, Object) =
        DirectCast(serializer.DeserializeObject(json), System.Collections.Generic.Dictionary(Of String, Object))

If jsonObject.Count > 0 _
    AndAlso jsonObject.ContainsKey("deliveryInfoNotification") _
    AndAlso jsonObject("deliveryInfoNotification").ContainsKey("deliveryInfo") Then

    Dim deliveryInfo As System.Collections.Generic.Dictionary(Of String, Object) = jsonObject("deliveryInfoNotification")("deliveryInfo"),
        address As String = deliveryInfo("address"),
        code As String = deliveryInfo("code"),
        createdDateTime As String = deliveryInfo("createdDateTime"),
        deliveryStatus As String = deliveryInfo("deliveryStatus"),
        direction As String = deliveryInfo("direction"),
        message As String = deliveryInfo("message"),
        messageId As String = deliveryInfo("messageId"),
        parts As String = deliveryInfo("parts"),
        senderAddress As String = deliveryInfo("senderAddress"),
        sentDateTime As String = deliveryInfo("sentDateTime")

End If 
```

# php - php die() 在 asp 中的等效代码

> ID：14642090
> 
> 赞同：5
> 
> 时间：2013-02-01T08:11:51.360
> 
> 标签：php, asp-classic

我正在学习 asp 。在 php 中我们使用

```
die('error message') 
```

**它在asp（vb脚本）中的等效代码是什么？如何在asp中调试？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T08:13:28.910

在经典 ASP 中，使用这个：

```
Response.End 
```

* * *

要在结束前输出一些东西，请使用以下代码：

```
Response.Write "Hello, World!"
Response.End 
```

这相当于：

```
die("Hello, World!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:13:35.023

我不太记得 asp.net 但你可以使用

> 在此处返回*您的变量*

或者

```
Response.End 
```

第二个将输出一切

# java - 为什么初始化数组的时间不同

> ID：14642091
> 
> 赞同：5
> 
> 时间：2013-02-01T08:11:53.533
> 
> 标签：java, arrays, initialization

为什么

```
 long t = System.currentTimeMillis();
        int size = 3333333;
        int[][][] arr = new int[size][6][2];
//        int[][][] arr= new int[2][6][size];
        pr(System.currentTimeMillis() - t ); 
```

打印`5000 ms` 但

```
 long t = System.currentTimeMillis();
        int size = 3333333;
//        int[][][] arr = new int[size][6][2];
        int[][][] arr= new int[2][6][size];
        pr(System.currentTimeMillis() - t ); 
```

印刷`44 ms`

第二种解决方案快 115 倍

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T08:23:53.973

测试更简单`int[][]`

```
int[][] arr = new int[size][2]; 
```

在这种情况下，您必须分配`size`大小为 16 字节的内存。

在这种情况下

```
int[][] arr = new int[2][size]; 
```

您只需分配 2 块大小*8 字节的内存。

并且分配是昂贵的操作。

# sql-server-2005 - 试图让 Reporting Services 理解我的代码

> ID：14642095
> 
> 赞同：2
> 
> 时间：2013-02-01T08:11:58.757
> 
> 标签：sql-server-2005, reporting-services

我试图将一些我在报告中经常需要的表达式封装到报告函数中，这样我就可以编写一次代码并在报告中的任何地方使用它。*但我真的是一个 Pascal / C# 程序员，并且在 VB(A) 语法上苦苦挣扎.....*

但即使是这个微小的日期格式化功能也无法正常工作......

```
Public Function DateFmt (ByVal dt As DateTime) As String
    Return IIF(IsNothing(dt), "", FormatDateTime(dt, 2))
End Function 
```

基本上，如果数据库中有一个`DateTime`字段`NULL`，我想显示一个空字符串（空单元格），否则使用“短日期”格式选项。

在一个单元格上，我试图将其添加为单元格表达式，但是当我开始输入这样的表达式时：

```
=Code. 
```

智能感知启动，但我的功能未显示在该列表中......嗯......我错过了什么？

> **更新：**我注意到虽然智能感知不起作用，但我仍然可以将表达式`=Code.DateFmt(.....)`放入单元格中 - 但唉，它不起作用。
> 
> 虽然直接添加表达式可以很好地抑制`NULL`显示日期，但使用此共享函数会导致`NULL`日期`01.01.0001`再次显示在我的报告中。***为什么？***

另外：我需要一个函数，它根据选择列表返回一个值 -`SWITCH`基本上是一个语句。这里的代码正确吗？

```
Public Function GetGrp(ByVal grp As String)
    Select Case grp
      Case "Region"
          Return fields!RegionId.Value
      Case "Somedate"
          Return YEAR(Fields!Somedate.Value)
    End Select
End Function 
```

此函数实际上会导致编译失败，并显示以下错误消息：

> *用户定义代码第 7 行出错：[BC30469] 对非公共成员的引用需要对象实例*

~~?!?!?!?!? SSRS 到底想在这里告诉我什么？~~

**更新 #2：**
好的，解决了这个问题 - 该`Fields`集合在自定义代码中不可用（不清楚为什么不 - 无论如何......）。

所以我需要将此功能更改为：

```
Public Function GetGrp(ByVal grp As String, ByVal fields As Fields) 
```

现在那部分有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:22:37.330

从函数返回值的 VBA 方法是将值分配给该函数名；我认为没有`return`关键字。

这可能也是函数没有出现在智能感知列表中的原因。

尝试像这样定义函数：

```
Public Function DateFmt (ByVal dt As DateTime) As String
    DateFmt = IIF(IsNothing(dt), "", FormatDateTime(dt, 2))
End Function

Public Function GetGrp(ByVal grp As String)
    Select Case grp
      Case "Region"
          GetGrp = fields!RegionId.Value
      Case "Somedate"
          GetGrp = YEAR(Fields!Somedate.Value)
    End Select
End Function 
```

### 更新：

此外，SSRS 中的 VBA 代码更像是静态函数的集合，这意味着它们无法访问报表状态（例如参数/字段）。

我会尝试将这两个`fields!*`值作为`byval`参数传递给`GetGrp`函数。

* * *

注意：*我没有 SSRS 或 Office 来测试此代码，所以如果出现问题，请告诉我。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:44:36.333

`IsNothing` *vbscript*表达式在自定义*VB*代码中似乎不能很好地工作。如果您将自定义代码更改为此它可能会起作用：

```
Public Function DateFmt (ByVal dt As DateTime) As String
    Return IIF(dt = Nothing, "", FormatDateTime(dt, 2))
End Function 
```

[从这个相关问题](https://stackoverflow.com/questions/9184745/checking-for-null-dates-in-ssrs-custom-code-function)中提取的解决方案。

# c++ - 条件赋值为布尔值

> ID：14642096
> 
> 赞同：8
> 
> 时间：2013-02-01T08:11:58.427
> 
> 标签：c++, c

在 C 中模拟布尔值可以这样完成：

```
int success;
success = (errors == 0 && count > 0);
if(success)
   ... 
```

包含`stdbool.h`以下内容可以完成：

```
bool success;
success = (errors == 0 && count > 0) ? true : false;
if(success)
   ... 
```

据我了解，逻辑和比较运算符应返回 1 或 0。此外，`stdbool.h`应定义常量，以便`true == 1`和`false == 0`.

因此以下应该工作：

```
bool success;
success = (errors == 0 && count > 0);
if(success)
   ... 
```

它确实适用于我测试过的编译器。但是假设它是可移植代码是否安全？（假设`stdbool.h`存在）

由于 bool 是内部类型，C++ 编译器的情况是否有所不同？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T08:17:17.603

假设是安全的。在 C99 中，在转换为`_Bool`类型后，所有非零值都将转换为 1。这在 C99 标准的第 6.3.1.2 节中进行了描述。等式和关系运算符（例如`==`,`>=`等）也保证会产生 1 或 0。这在第 6.5.8 节和第 6.5.9 节中进行了描述。

对于 C++，该`bool`类型是真正的布尔类型，其中值被转换为`true`或而不是 1 或 0，但是将操作等`false`的结果分配给 a 并期望它工作仍然是安全的，因为关系和比较运算符结果无论如何。当转换为整数类型时，它会转换为 1。`==``bool``bool``true`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T08:50:04.750

该表达式`(errors == 0 && count > 0)`具有 type `bool`，并且可以在`bool`需要 a 的任何地方使用，包括将其分配给 type 的变量`bool`，或在条件中使用它。（当转换为另一种整数类型时，`false`转换为 0 和`true`1，但在您的代码中没有问题。）

请注意，在 C 中，带有`<stdbool.h>`,`bool`的行为应该与在 C++ 中的行为完全相同（尽管由于各种历史原因，实际规范有所不同）。这意味着类似：

```
bool success = (errors == 0 && count > 0) ? true : false; 
```

不是*你*真正想写的东西。该表达式`errors == 0 && count > 0`具有与 兼容的类型`bool`，并且可以用作类型的表达式 `bool`。（当然，在 C++ 中，类型不仅与 兼容 `bool`，还与`bool`.）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T08:39:10.720

`stdbool.h`这是我系统上的多汁部分：

```
#define bool    _Bool
#if __STDC_VERSION__ < 199901L && __GNUC__ < 3
typedef int     _Bool;
#endif

#define false   0
#define true    1 
```

C99 具有`_Bool`内置类型，它将所有非零值转换为 1（如前所述）。但是，快速浏览一下我的`stdbool.h`演示，即使没有 C99，也可以安全地假设这些东西可以使用一个警告，即不等于 0*或*分配给 a的值`_Bool`不会*被*转换为 1（`_Bool`因为一个简单的`int`typedef 而不是具有特殊属性的内置类型），因此不会`== true`.

# android - 文本在 TextView 中从底部剪切

> ID：14642098
> 
> 赞同：1
> 
> 时间：2013-02-01T08:12:13.300
> 
> 标签：android, layout, textview, text-size

我为列表创建了一个行布局。我使用自定义文本视图来调整文本大小。但文本从底部剪切，显示在突出显示的区域。任何人都可以知道为什么会这样。请给我一些解决方案。

# inserthtml - 组件返回失败代码：0x80004005 (NS_ERROR_FAILURE) [nsIDOMHTMLDocument.execCommand]

> ID：14642099
> 
> 赞同：0
> 
> 时间：2013-02-01T08:12:15.557
> 
> 标签：inserthtml

```
<html>
    <head>
        <script>
            function insertHTMLCode() {
                var htmlText = '<b>HI</b>';
                try {
                    document.execCommand('insertHTML', false, htmlText);
                } catch(e) {
                    console.log(e);
                }
            }
        </script>
    </head>
    <body>
        <div>
            <ys_content contenteditable="true"><!-- ~Client References -->
                <font size="2" face="Arial, Helvetica, sans-serif" color="#000000"><strong>More information coming soon...</strong> </font> 
            <!-- ~/Client References -->
            </ys_content>
        </div>
        <input type="button" onclick="insertHTMLCode();" value="Click">
    </body>
</html> 
```

当我尝试将 HTML 内容插入到 FireFox 的可编辑区域时，上面的代码总是抛出错误，但它在 chrome 中运行良好。

我的FF版本：18.0.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:09:49.893

```
 <div contenteditable="true">
        <ys_content ><!-- ~Client References -->
            <font size="2" face="Arial, Helvetica, sans-serif" color="#000000"><strong>More information coming soon...</strong> </font> 
        <!-- ~/Client References -->
        </ys_content>
    </div> 
```

您的包装器 div 应设置为 contenteditable="true"

# java - 调试需要表锁吗？

> ID：14642104
> 
> 赞同：0
> 
> 时间：2013-02-01T08:12:26.710
> 
> 标签：java, database, debugging, junit, unitils

我想我需要一个知识渊博的人来解决我目前的问题：

我使用 Eclipse 来调试使用 Unitils 的 jUnit 测试。在调试时，我的数据库中的部分或全部表被锁定，即使它们目前没有被访问。

结果是，只要我在调试（反之亦然），在同一数据库上工作的其他开发人员就无法运行测试。

从逻辑上讲，我看不出为什么表应该一直被锁定的原因。那么，我应该尝试停用锁定吗？你知道如何配置吗？

虽然我可以想到其他方法，但我真的很想回答这些问题，因为这将是最方便的解决方案。

编辑：测试在带有空表的 Oracle DB 上运行。在每次测试之前，Unitils 都会清空每个表（Unitils 的不寻常配置），然后插入特定的测试数据。所有约束都处于活动状态，这又是一种不寻常的配置。当我正在调试并且另一个开发人员启动 jUnit-Test 时，他们的 IDE 会冻结，直到他们获得数据库超时或我停止调试，因为 Unitils 试图再次清空表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T08:31:15.350

解决方案：停止使用 Unitils。单独的 DBUnit 就足够了，这个问题就消失了。虽然做出了这个决定，但因为不再支持 Unitils。

# java - jvm如何设置默认参数？

> ID：14642105
> 
> 赞同：8
> 
> 时间：2013-02-01T08:12:32.910
> 
> 标签：java, windows, set, parameter-passing, jvm-arguments

我想知道如何在 JVM 启动之前将参数传递给它。例如，

我想我需要修改 JVM 时区参数。

我在 Windows 7 中使用 Eclipse。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T08:34:59.840

在 Eclipse 中转到

```
Run As -> Run Configurations -> Arguments -> VM Arguments 
```

并设置所需的 JMV 参数，例如

```
-Duser.timezone=PST 
```

您可以通过运行此测试获取 JVM 中可用的所有时区 ID

```
for(String id : TimeZone.getAvailableIDs()) {
    System.out.println(id);
} 
```

输出

```
Etc/GMT+12
Etc/GMT+11
Pacific/Midway
Pacific/Niue
Pacific/Pago_Pago
Pacific/Samoa
.... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T08:22:57.933

JVM 参数在命令行中指定`-D`

```
java -Dfile.encoding=utf-8 -jar myApp.jar 
```

在你的情况下使用`-Duser.timezone`

[如何正确设置 JVM 时区](https://stackoverflow.com/questions/2493749/how-to-set-a-jvm-timezone-properly)

# php - mod-rewrite 不同的子域到 php 文件

> ID：14642107
> 
> 赞同：0
> 
> 时间：2013-02-01T08:12:36.827
> 
> 标签：php, .htaccess, mod-rewrite, redirect

我想用 htaccess 文件重定向不同的子域。一个例子：

网址：`http://varying-string.example.com/`

重定向.php： `<?php echo $_GET['value']; ?>`

输出：`varying-string`

这是我的尝试，但我不工作。

.htaccess

```
RewriteRule ^.*\.redirect.episch.ch$ redirect.episch.ch/redirect.php?value=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:16:12.977

您可以使用`RewriteCondition`来捕获子域模式。

您在重写条件中捕获的模式需要`%1`在重写规则中引用。

```
RewriteCond %{HTTP_HOST} (\w*).domain.com [NC]
RewriteRule domain.com /redirect.php?value=%1 [L,R=301] 
```

# java - 将字符更改为字符串

> ID：14642108
> 
> 赞同：0
> 
> 时间：2013-02-01T08:12:37.560
> 
> 标签：java

必须将字符“^”更改为“255E”

```
String s_ysymbol = c1.getString(c1.getColumnIndex(DBConstants.YSYMBOL)); 
```

在这个 ysymbol 起始字符中将是 ^ 必须将其更改为 255E 然后必须进行进一步处理.. 我尝试了替换方法

```
s_ysymbol.replace("^","255E"); 
```

但它没有改变..任何人都可以提供解决方案..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:14:24.260

尝试这个 `s_ysymbol = s_ysymbol.replace("^","255E");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:45:04.807

只需查看 String 类的源代码即可。

```
public final class String{
....
} 
```

请注意关键字final。这意味着不能更改 String 对象。所以String类中的所有方法都不会改变对象本身，而是创建新的String对象并返回到新的对象。这就是为什么只有“ s_ysymbol.replace("^","255E"); ”不做任何改变的原因。

```
s_ysymbol = s_ysymbol.replace("^","255E"); 
```

这会奏效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T08:16:51.950

`replace`返回 的另一个实例`String`，您不能修改现有实例，因此需要赋值。

```
s_ysymbol = s_ysymbol.replace("^","255E"); 
```

或者，您可以使用`replaceFirst`或`replaceAll`传递正则表达式并更改它的第一次出现或所有出现。在这种情况下，您必须使用转义字符。

```
s_ysymbol = s_ysymbol.replaceFirst("\^","255E"); 
```

# html - 在 HTML 网页上播放多个 swf 文件

> ID：14642111
> 
> 赞同：0
> 
> 时间：2013-02-01T08:12:54.140
> 
> 标签：html, flash

我已经使用 HTML 开发了网页，并且在页面顶部有一个位置，我可以在其中播放`.swf`带有嵌入控件的文件。我的目标是让它`.swf`连续播放多个文件（3 或 4 个文件）。

我怎样才能做到这一点？

这就是我所拥有的：

```
<object width="311" height="100%" title="bn" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0" classid="clsid:D27CDB6E-AE6D-11cf-96B8-44953540000">
  <param value="../img/swf/main.swf" name="movie">
  <param value="high" name="quality">
  <param value="transparent" name="wmode">
  <embed width="311" height="100%" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" quality="high" src="../img/swf/main.swf">
</object> 
```

所以我还有其他`.swf`文件，除了`main.swf`. 可以说我有`promo.swf`，`comm.swf`。我想连续播放所有 3 个，每个之间有 5 秒的时间戳。例如，拳头演奏`main.swf`5 秒，之后`promo.swf`等等....

# android - 使用 Ant 测试 Android 项目

> ID：14642112
> 
> 赞同：0
> 
> 时间：2013-02-01T08:12:59.463
> 
> 标签：android, unit-testing, ant, junit

我编写了一个 xml 文件“test_build.xml”来运行所有测试。我已经编译了测试文件和编译的源文件。我还需要一些我的源/测试文件使用的 jar 文件。我已在路径中包含所有这些目录（编译代码）/jar 并将其用作我的类路径。我得到一个运行时异常。

<项目名称="myandroid" >

```
<path id="test.classpath">
    <pathelement path="a.jar"/>
    <pathelement path="tests"/> 
    <!-- other jars and directories -->
</path>
<target name="test-run" description="Run Test">
    <delete dir = "test_result" />
    <mkdir dir = "test_result" />
    <junit printsummary="yes" haltonfailure="yes" showoutput="yes" >
        <classpath refid="test.classpath"/>
        <batchtest fork="yes" todir="test_result">
            <formatter type="xml"/>
            <fileset dir="tests">
                <include name="**/*.java"/>
            </fileset>
        </batchtest>
    </junit>
</target> 
```

我在命令行上运行以下命令： ant "test-run" -f test_build.xml

得到：

测试运行：

```
[delete] Deleting directory test_result
[mkdir] Created dir: test_result
[junit] Exception in thread "main" java.lang.RuntimeException: Stub!
[junit]     at junit.framework.TestResult.<init>(TestResult.java:4)
[junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:353)
[junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1052)
[junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:906)
[junit] Running RegexTest
[junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:32:32.463

The `android.jar` file that you use to create the application does only contain stub implementations.

```
public void something(...) { 
    throw new RuntimeException("Stub!"); 
} 
```

Stubbing the implementations reduces the size of the SDK a lot. This is fine for building an app as you still build against Android's public API. To finally execute your APK or run tests again, it must be deployed on either a device or emulator.

**Update**

To actually solve the problem you need an attached device or running emulator instance on your laptop. Verify that it's accessible by listing all available devices with `adb`:

```
$ adb devices 
```

The `run-tests` target should automatically deploy your application on an emulator or device. If it does not you probably have to update your project first. The Android documentation, section [Running Tests](http://developer.android.com/tools/testing/testing_otheride.html#RunTestsCommand), states:

> You can use Ant to run all the tests in your test project, using the target run-tests, which is created automatically when you create a test project with the android tool.
> 
> This target re-builds your main project and test project if necessary, **installs the test application to the current AVD or device**, and then runs all the test classes in the test application.
> 
> You can update an existing test project to use this feature. To do this, use the android tool with the update test-project option.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T12:20:11.553

通过首先放置测试类路径来反转您的路径声明！
应该正常工作;-)

# macos - 使用 IOKit 获取 USB 设备的设备文件

> ID：14642115
> 
> 赞同：2
> 
> 时间：2013-02-01T08:13:03.293
> 
> 标签：macos, cocoa, serial-port, usb

按照 Apple Developer 网站上的教程，我设法弄清楚如何枚举串行端口或连接的 USB 设备，前者为我提供了我需要从哪个设备文件读取和写入的信息，而后者为我提供了设备的姓名。不幸的是，我不确定如何确定哪个设备文件对应于哪个 USB 设备。

理想情况下，我会创建一个 USB 设备迭代器，为每个设备创建一个接口以获取我需要的信息，然后做一些事情来获取与 USB 设备对应的设备文件的路径。我已经实现了一切，除了这个神秘的东西。

有任何想法吗？谢谢！

# ruby-on-rails - 导入 CSV 时，如何处理与关联对应的行中的数据？

> ID：14642121
> 
> 赞同：5
> 
> 时间：2013-02-01T08:13:58.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, csv, import

我正在关注[Import CSV Railscast](http://railscasts.com/episodes/396-importing-csv-and-excel?view=asciicast)，它是直截了当的。

问题在于它只处理一个 csv 文件，该文件仅包含 1 个文件中的 1 个模型中的信息。

比如说，我有一个 CSV 文件，我正在尝试将其导入到我的`Listing`模型中。在每一行/列表上，它都有一个名为的列`Building`，其中值实际上是该列表的构建属性的名称（即`@listing.building.name`）。

我如何处理进口中的这些情况？

这是 Ryan 进入 Railscast 的壁橱，`Product`在他的案例中是模型：

```
def self.import(file)
  CSV.foreach(file.path, headers: true) do |row|
    product = find_by_id(row["id"]) || new
    product.attributes = row.to_hash.slice(*accessible_attributes)
    product.save!
  end
end 
```

正在发生的一切是他正在检查产品是否存在，如果存在则更新属性。如果没有，则创建一个新的。

不太确定在这种情况下如何处理关联……特别是考虑到如果关联记录不存在，则需要在此过程中创建关联记录。

所以回到我`building.name`之前的例子，如果没有`Building.find_by_name(name)`，那么它应该创建一个新的建筑记录。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:32:45.487

试试这个

```
def self.import(file)
  CSV.foreach(file.path, headers: true) do |row|
    product = find_by_id(row["id"]) || new
    product.attributes = row.to_hash.slice(*accessible_attributes)
    product.save!

    building = product.buildings.find_by_name(row['building_name'])
    building ||= product.buildings.build
    building.attributes = row.to_hash.slice(*build_accessible_attributes)
    building.save!
  end
end 
```

更新：使用新的 rails 3 方法更新答案

```
def self.import(file)
  CSV.foreach(file.path, headers: true) do |row|
    product = where(id: row["id"])
      .first_or_create!(row.to_hash.slice(*accessible_attributes))

    product.buildings.where(name: row['building_name'])
      .first_or_create!(row.to_hash.slice(*building_accessible_attributes))
  end
end 
```

# c# - 从 DataGridTextColumn.Header 绑定到 Parent.Parent

> ID：14642122
> 
> 赞同：0
> 
> 时间：2013-02-01T08:13:58.673
> 
> 标签：c#, xaml, mvvm, binding, icommand

嗨，通常它应该会自动工作，但它不会

XAML：

```
 <DataGrid AutoGenerateColumns="False" Width="350" IsReadOnly="True" 
                              ItemsSource="{Binding StichwortList}" >
           <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding DisplayName}" Width="350">
                      <DataGridTextColumn.Header>
                            <DockPanel Margin="0" Width="340" HorizontalAlignment="Stretch" LastChildFill="True">
                                  <TextBlock DockPanel.Dock="Left" Margin="0" Text="Name"/>
                                  <Button DockPanel.Dock="Right" Content="-" Margin="0" Width="23" Command="{Binding RemoveStichwortCommand}"/>
                                  <Button DockPanel.Dock="Right" Content="+" Margin="0" Width="23" Command="{Binding AddStichwortCommand}"/>
                                  <Label />
                            </DockPanel>
                      </DataGridTextColumn.Header>
                 </DataGridTextColumn>
           </DataGrid.Columns>
  </DataGrid> 
```

相关代码：

```
 private RelayCommand _addStichwortCommand;
        public ICommand AddStichwortCommand
        {
            get { return _addStichwortCommand ?? (_addStichwortCommand = new RelayCommand(param => this.OnAddStichwort())); }
        }

        private void OnAddStichwort()
        {
            // some code
        }

        private RelayCommand _removeStichwortCommand;
        public ICommand RemoveStichwortCommand
        {
            get { return _removeStichwortCommand ?? (_removeStichwortCommand = new RelayCommand(param => this.OnRemoveStichwort())); }
        }
private void OnRemoveStichwort()
        {
           // some code
        } 
```

我对该视图的其他绑定有效，并且我的命令绑定也可以正常工作

所以请任何人告诉我我的绑定有什么问题吗？

## 编辑

哦，我忘了

它都在一个包含所有属性和绑定和命令`Usercontrol`的`Datacontext`

## 灵魂：

`DockPanel`需要绑定他的和`Datacontext`需要一个名字`Usercontrol` `Datacontext``Usercontrol`

`x:Name="uc"`

```
<DockPanel Margin="0" Width="340" HorizontalAlignment="Stretch" LastChildFill="True" DataContext="{Binding ElementName=uc, Path=DataContext}">
     <TextBlock DockPanel.Dock="Left" Margin="0" Text="Name"/>
     <Button DockPanel.Dock="Right" Content="-" Margin="0" Width="23" Command="{Binding RemoveStichwortCommand}"/>
      <Button DockPanel.Dock="Right" Content="+" Margin="0" Width="23" Command="{Binding AddStichwortCommand}"/>
      <Label />
</DockPanel> 
```

如果上面的解决方案不起作用，你应该看看这个[答案](https://stackoverflow.com/a/84317/1993545)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:31:53.200

您必须`UserControl`在**XAML**中命名并在绑定中使用它。类似于以下代码：

```
<UserControl x:Name="uc" >
.
.
.
<Button DockPanel.Dock="Right" Content="-" Margin="0" Width="23" Command="{Binding RemoveStichwortCommand, ElementName=uc}"/>
<Button DockPanel.Dock="Right" Content="+" Margin="0" Width="23" Command="{Binding AddStichwortCommand, ElementName=uc}"/> 
```

希望这有帮助。

# vb6 - 设置代码在 VB6 中运行的最长时间

> ID：14642124
> 
> 赞同：0
> 
> 时间：2013-02-01T08:14:01.330
> 
> 标签：vb6

我有一行代码可以打开一个 word 文档，但偶尔，这段代码会失败并无限期地锁定整个程序。

```
Set oDoc = oApp.Documents.Open(sF) 
```

理想情况下，我希望能够在经过一定时间后中止这行代码。我研究了一些使用 VB6 的多线程示例，但没有取得多大成功。

# java - 我需要素数的原始根吗？

> ID：14642125
> 
> 赞同：1
> 
> 时间：2013-02-01T08:14:09.030
> 
> 标签：java, algorithm, primes

我需要素数的原始根。我写了这段代码，但它有堆大小错误，它不适用于像 101 这样的大数字。我没有任何其他计算原始根的想法。如果你有请帮助我.我非常需要它。你还有其他计算素数原始根的算法吗？

```
static ArrayList<ArrayList<Integer>> list1=new  ArrayList<ArrayList<Integer>>();

private static int primitiveRoot(int prim){

        ArrayList<ArrayList<Integer>>  number=new ArrayList<ArrayList<Integer>>();// this has all sequence numbers of x power of 0 to prime-1
        ArrayList<Integer> sublist=new ArrayList<Integer>();

        for (int x=2;x<prim;x++ ){
            sublist = new ArrayList<Integer>();
            for (int power=0;power<prim-1;power++){
                int i=(int)((Math.pow(x, power))%prim);
                sublist.add(i);     
            }

            number.add(sublist);

        }

        for (int j=0;j<number.size();j++){
                for (int m=0;m<list1.size();m++){
                    if(number.get(j).equals(list1.get(m)) ){// element of number arraylist compare to list1,equality means that we find one of primitive root
                        a=j+2;
                         break;
                    }
                }

        }

        return a;// this is primitive root

    } 
```

list1 是数组列表的数组列表，它包含从 1 到素数 1 之间的所有数字排列。它仅适用于像 7 或 11 这样的小素数。我增加了堆大小，但没有效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:27:43.403

[尝试维基百科](http://en.wikipedia.org/wiki/Primitive_root_modulo_n#Finding_primitive_roots)查找算法。

在 Java 中，计算的快速方法`a^b mod n`是使用`BigInteger`，因为它既安全又快速。

```
BigInteger a = new BigInteger("101");
BigInteger res = a.modPow(b, n); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-02T09:30:56.363

```
import java.math.BigInteger;
import java.util.*;

public class PrimitiveRoot {

    public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        int p = in.nextInt();
        int m = p;
        if (isPrime(p)) {
            m = p - 1;
        }
        int primeRoot = 0;
        Map<Integer, Integer> primeFactor = getPrimeFactor(m);
        for (Map.Entry<Integer, Integer> map : primeFactor.entrySet()) {
            primeFactor.put(map.getKey(), m / map.getKey());
        }
        for (int i = 2; i <= m; i++) {
            boolean notPrimeRoot = false;
            Set<Integer> reminder = new HashSet<>();
            for (Map.Entry<Integer, Integer> map : primeFactor.entrySet()) {
                if(BigInteger.valueOf(i).modPow(BigInteger.valueOf(map.getValue()), BigInteger.valueOf(p)).equals(BigInteger.ONE))
                    notPrimeRoot = true;
            }
            if (!notPrimeRoot) {
                primeRoot = i;
                break;
            }
        }
        System.out.println("Prime Root is: " + primeRoot);
    }

    private static boolean isPrime(int p) {
        for (int i = 2; i <= Math.sqrt(p); i++) {
            if (p % i == 0) {
                return false;
            }
        }
        return true;
    }

    private static Map<Integer, Integer> getPrimeFactor(int p) {
        Map<Integer, Integer> map = new HashMap<>();
        while (p % 2 == 0) {
            insertToMap(2, map);
            p /= 2;
        }

        for (int i = 3; i <= Math.sqrt(p); i += 2) {
            while (p % i == 0) {
                insertToMap(i, map);
                p /= i;
            }
        }

        if (p > 2)
            insertToMap(p, map);
        return map;
    }

    private static void insertToMap(int i, Map<Integer, Integer> map) {
        if (map.get(i) != null) {
            map.put(i, map.get(i) + 1);
        } else {
            map.put(i, 1);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2020-11-10T04:07:34.780

这是用于计算给定数字的所有原始根的python版本：D

```
#David Isaac Pinos
def prime_factors(n):
    i = 2
    factors = []
    while i * i <= n:
        if n % i:
            i += 1
        else:
            n //= i
            factors.append(i)
    if n > 1:
        factors.append(n)
    return factors

N=int(input("Insert number: "))
phi_N=N-1
factor_aux=prime_factors(phi_N)
print(factor_aux)
factor = []
i=0
while(i<len(factor_aux)-1):
    if (factor_aux[i]!=factor_aux[i+1]):
        factor.append(factor_aux[i])
    if (i==(len(factor_aux)-2)):
        factor.append(factor_aux[i+1]) 
    i=i+1
N_factor=len(factor)
print("")
print("")
i=2
a=0
while (i<10):
    print ("*****Evaluating for " , i , ":")
    j=0
    while (j<N_factor):
        tester=int(phi_N/factor[j])
        test= pow(int(i),tester)%int(N)
        print (i, "^" , tester, " mod ", N, "=" , test )
        if (test!=1):
            j=j+1
            if (j==N_factor and a==0):
                print ("********************* ",i, " IS THE PRIMITIVE ROOT OF ",N)
                primitive_root=i
                i=100
        else:
            j=N_factor
    i=i+1

print("All primitive numbers are: ")

i=1
while(i<N):
    print(primitive_root, "^", i, "mod",N,"=",pow(primitive_root,i)%N)
    i=i+1 
```

# ruby-on-rails-3 - 尝试在发出 POST 请求的选定页面上实施 HTTPS

> ID：14642126
> 
> 赞同：7
> 
> 时间：2013-02-01T08:14:12.547
> 
> 标签：ruby-on-rails-3, ssl, https, http-post

我正在尝试在我的 rails 3.1 项目中发出 POST 请求的选定页面上实现 HTTPS。但是尝试了各种宝石都没有成功`ssl_requirement`，`rack-ssl-enforcer`。所有的宝石都在帮助将 GET 请求作为 HTTPS，但对 POST 请求没有任何成功。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T13:01:30.770

我找到了使用的解决方案`rack-ssl-enforcer`并将这些行放在我的 application.rb 文件中，使其工作

```
 config.middleware.use Rack::SslEnforcer, :only => [%r{^/users/}], :mixed => true 
```

# jquery - html jquery表单复选框

> ID：14642128
> 
> 赞同：1
> 
> 时间：2013-02-01T08:14:15.770
> 
> 标签：jquery, html

HTML：

```
<td>
    <input type="checkbox" name="lit" value="literary"><span class="checkdata">&nbsp;Literary Event&nbsp;&nbsp;</span>
    <input type="checkbox" name="art" value="art"><span class="checkdata">&nbsp;Art Event&nbsp;&nbsp;</span>
    <input type="checkbox" name="cul" value="cultural"><span class="checkdata">&nbsp;Cultural Event&nbsp;&nbsp;</span>
</td> 
```

脚本：

```
<script>
    $(function(){
        if ("input:checked") {
            $(".checkdata").css("color", "#F0F0F0");
        }
    });
</script> 
```

我在这里要做的是检查用户是否选中了复选框。如果是这样，`span class="checkdata"`应该变成灰色。但它不会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:19:45.437

尝试这个

```
$(function(){
    $('input[type="checkbox"]').each(function(){
        $(this).click(function(){
        if ($(this).prop('checked'))
        {
            $(this).next(".checkdata").css("color", "#F0F0F0");
        }
        else
            $(this).next(".checkdata").css("color", "#000000");

        });
    });
}); 
```

测试小提琴：http: [//jsfiddle.net/GQ4FY/1/](http://jsfiddle.net/GQ4FY/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:21:54.637

尝试这个：

```
$(function(){

    if($("input").is(':checked')){
        $(".checkdata").css("color", "#F0F0F0");
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:23:46.570

如果您想在复选框值更改时切换 css，请尝试以下操作：

```
$(function () {
    $("input[type='checkbox']").change(function () {
        var isChecked = $(this).is(":checked");
        if (isChecked) {
            $(".checkdata").css("color", "#F0F0F0");

        } else {
            $(".checkdata").css("color", "#000000");
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T08:35:50.103

```
 $("input[type='checkbox']").change(function (){
var perform = {
   true : {'color' : 'green'},
   false: {'color' : 'red'}
 }, chk = $(this);

 $(".checkdata").css(perform[chk.is(":checked")]);

}); 
```

防止 if 语句 :) 多态性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T08:42:05.130

把你的脚本写成

```
$(function() {
    $('input[type="checkbox"]').click(function() {
        $(this).next('.checkdata').css('color', this.checked ? '#F0F0F0' : '#000000');
    });
}); 
```

# python - 如何在 Django 中响应 ajax 请求

> ID：14642130
> 
> 赞同：8
> 
> 时间：2013-02-01T08:14:28.053
> 
> 标签：python, django

我有这样的代码：

```
$(document).ready(function(){
    $('#error').hide();
    $('#submit').click(function(){
        var name = $("#name").val();
        if (name == "") {
            $("#error").show("slow");
            return false;
        }
        var pass = $("#password").val();
        if (pass == "") {
            $("#error").show("slow");
            return false;
        }
        $.ajax({
            url: "/ajax/",
            type: "POST",
            data: name,
            cache:false,
            success: function(resp){
                alert ("resp");
            }
        });
    });
}); 
```

并在 Django 中查看：

```
def lat_ajax(request):
    if request.POST and request.is_ajax:
        name = request.POST.get('name')
        return HttpResponse(name)
    else :
        return render_to_response('ajax_test.html',locals()) 
```

我的错误在哪里？我是 Django 的初学者，请帮助我。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-01T08:43:13.180

放入`dataType: "json"`jquery 调用。resp 将是一个 javascript 对象。

```
$.ajax({
    url: "/ajax/",
    type: "POST",
    data: name,
    cache:false,
    dataType: "json",
    success: function(resp){
        alert ("resp: "+resp.name);
    }
}); 
```

在 Django 中，您必须返回包含数据的 json 序列化字典。content_type 必须是`application/json`. 在这种情况下，不推荐使用 locals 技巧，因为可能某些局部变量无法在 json 中序列化。这将引发异常。另请注意，这`is_ajax`是一个函数，必须调用。在你的情况下，它永远是正确的。我也会测试`request.method`而不是`request.POST`

```
import json
def lat_ajax(request):

    if request.method == 'POST' and request.is_ajax():
        name = request.POST.get('name')
        return HttpResponse(json.dumps({'name': name}), content_type="application/json")
    else :
        return render_to_response('ajax_test.html', locals()) 
```

* * *

更新：正如 Jurudocs 所述，csrf_token 也可能是我推荐阅读的原因：[https ://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-01T08:20:31.530

如何创建 dict 并解析为 json：

```
name = request.POST.get('name')
dict = {'name':name}
return HttpResponse(json.dumps(dict), content_type='application/json') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-09T19:19:01.383

你有一个错字：

```
 success: function(resp){
        alert ("resp");
    } 
```

应该

```
 success: function(resp){
            alert (resp);
        } 
```

此外，关于 csrf，您必须使用如下标头：

```
 $.ajax({
            url: "some-url",
            headers: {'X-CSRFToken': '{{ csrf_token }}'}, 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-15T11:23:45.887

只需这样做......（Django 1.11）

```
from django.http.response import JsonResponse

return JsonResponse({'success':False, 'errorMsg':errorMsg}) 
```

当您在 jQuery 中处理 json 部分时，请执行以下操作：

```
$.ajax({
    ...
    dataType: 'json',
    success: function(returned, status, xhr) {
        var result = returned['success']; // this will be translated into 'true' in JS, not 'True' as string
        if (result) { 
            ...
        else {
            ...
        }
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T12:03:48.927

```
$(document).ready(function(){
    $('#error').hide();
    $('#submit').click(function(){
        var name = $("#name").val();
        if (name == "") {
            $("#error").show("slow");
            return false;
        }
        var pass = $("#password").val();
        if (pass == "") {
            $("#error").show("slow");
            return false;
        }
        $.ajax({
            url: "/ajax/",
            type: "POST",
            data: { 
                'name': name, 
                'csrfmiddlewaretoken': '{{csrf_token}}'
            }, 
            contentType: "application/json;charset=utf-8",
            dataType: "json",
            success: function(data) { 
                alert(data);
            },
            error: function(ts) { 
                alert(ts);
            }
        });
    });
});

def lat_ajax(request):
    if request.POST:
        name = request.POST['name']
        return HttpResponse(name)
    else :
        return render_to_response('ajax_test.html',locals()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-26T09:05:09.960

如果没有任何效果，请将“@csrf_exempt”放在您的函数之前

```
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def lat_ajax(request):
"""
your code
""" 
```

# android - 从 StackMob 获取数据行并在 Android 模拟器中显示

> ID：14642133
> 
> 赞同：1
> 
> 时间：2013-02-01T08:14:48.210
> 
> 标签：android, eclipse, fetch, stackmob

我正在开发一个与 stackmob 连接的 android 应用程序。我想从 stackmob 获取数据，我的 fetch() 方法正在工作，但它没有在模拟器中显示任何数据。请有人告诉我这个。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:07:40.587

UI 必须在单独的线程中更新。尝试这样的事情：

[http://crodrigues.com/updating-the-ui-from-a-background-thread-on-android/](http://crodrigues.com/updating-the-ui-from-a-background-thread-on-android/)

# xcode - Xcode shift+space 在编辑器中插入下划线

> ID：14642135
> 
> 赞同：0
> 
> 时间：2013-02-01T08:15:12.583
> 
> 标签：xcode, editor

有谁知道如何设置 Xcode，以便当我按下 shift+space 时，它​​会在编辑器中插入下划线而不是空格？

这只是为了在键入 funtion_names_with_lots_of_underscores 时让生活更轻松！

# html - HTML：时间格式的字母 T - 有什么用？

> ID：14642141
> 
> 赞同：4
> 
> 时间：2013-02-01T08:15:28.517
> 
> 标签：html, time, tags, format

文件[http://www.w3.org/TR/NOTE-datetime](http://www.w3.org/TR/NOTE-datetime)

说了很多关于日期和时间格式：

```
Examples

1994-11-05T08:15:30-05:00 corresponds to November 5, 1994, 8:15:30 am, US Eastern Standard Time.

1994-11-05T13:15:30Z corresponds to the same instant. 
```

完整的日期加上小时、分钟、秒和秒的小数部分 YYYY-MM-DDThh:mm:ss.sTZD（例如 1997-07-16T19:20:30.45+01:00）

在哪里：

```
 YYYY = four-digit year
 MM   = two-digit month (01=January, etc.)
 DD   = two-digit day of month (01 through 31)
 hh   = two digits of hour (00 through 23) (am/pm NOT allowed)
 mm   = two digits of minute (00 through 59)
 ss   = two digits of second (00 through 59)
 s    = one or more digits representing a decimal fraction of a second
 TZD  = time zone designator (Z or +hh:mm or -hh:mm) 
```

**但是，1994-11-05T08:15:30 中的 T 是为了什么？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T08:17:09.437

**从格式**部分的第二段：

> 请注意，“T”按字面意思出现在字符串中，表示时间元素的开始，如 ISO 8601 中所指定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T08:18:47.310

它只是一个分隔符，用于指定字符串的时间部分从哪里开始。

# ruby-on-rails - 如何解决 FbGraph::Unauthorized: OAuthException :: (#200) 用户尚未授权应用程序执行此操作

> ID：14642142
> 
> 赞同：1
> 
> 时间：2013-02-01T08:15:29.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, omniauth, fb-graph

我收到错误 FbGraph::Unauthorized: OAuthException :: (#200) 用户尚未授权应用程序执行此操作。我的 omniauth.rb 如下所示：

```
Rails.application.config.middleware.use OmniAuth::Builder do
 provider :facebook, ENV['FACEBOOK_APP_ID'], ENV['FACEBOOK_SECRET'], {:scope => "offline_access, publish_stream, user_photos, publish_checkins, photo_upload"}
end 
```

我的控制器包含：

```
me = FbGraph::User.me(ACCESS_TOKEN)
me.feed!(
:message => 'Updating via FbGraph',
:picture => 'https://graph.facebook.com/matake/picture',
:link => 'https://github.com/nov/fb_graph',
:name => 'FbGraph',
:description => 'A Ruby wrapper for Facebook Graph API'
) 
```

我得到了这个错误：

```
FbGraph::Unauthorized: OAuthException :: (#200) The user hasn't authorized the application to perform this action
    from /home/usr/.rvm/gems/ruby-1.9.3-p194@usr/gems/fb_graph-2.5.5/lib/fb_graph/exception.rb:55:in `handle_httpclient_error'
    from /home/usr/.rvm/gems/ruby-1.9.3-p194@usr/gems/fb_graph-2.5.5/lib/fb_graph/node.rb:147:in `handle_response'
    from /home/usr/.rvm/gems/ruby-1.9.3-p194@usr/gems/fb_graph-2.5.5/lib/fb_graph/node.rb:55:in `post'
    from /home/usr/.rvm/gems/ruby-1.9.3-p194@usr/gems/fb_graph-2.5.5/lib/fb_graph/connections/feed.rb:15:in `feed!'
    from (irb):4
    from /home/usr/.rvm/gems/ruby-1.9.3-p194@usr/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
    from /home/usr/.rvm/gems/ruby-1.9.3-p194@usr/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
    from /home/usr/.rvm/gems/ruby-1.9.3-p194@usr/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

请解决我的问题。我正在使用有效的 access_token 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T21:49:08.163

对于我看到你在你的范围内缺少权限尝试添加这个publish_actions，

让我知道这是否解决了您的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:05:54.377

你添加了[Javascript SDK](https://developers.facebook.com/docs/howtos/login/getting-started/)吗？

# mysql - Mysql计算总分钟数

> ID：14642155
> 
> 赞同：1
> 
> 时间：2013-02-01T08:17:02.997
> 
> 标签：mysql, sql

如何合计两个日期的分钟数？我的意思是我想知道从 MySQL 到使用 MySQL 的总分钟`2012-01-08 8:30`数`2012-01-09 14:11`？

`initiate_date`我的表中有`finalize_date`列，我想选择它们并显示它们的总分钟数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T08:19:41.910

我建议[时间戳差异](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timestampdiff)

例如

```
TIMESTAMPDIFF(MINUTE, initiate_date, finalize_date) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T08:26:16.480

```
 SELECT (TIME_TO_SEC(end_time) - TIME_TO_SEC(start_time))/60 AS `minutes` 
```

# jquery - Jquery 显示一个 div 并隐藏另一个 div

> ID：14642157
> 
> 赞同：1
> 
> 时间：2013-02-01T08:17:06.053
> 
> 标签：jquery

我正在制作导航，我需要在点击时显示一些不同的东西。但一次只能显示一个选项卡。我不是专业的 jquery，所以希望有人能告诉我我做错了什么？

当我进入我的网站时，我需要显示我的登录框，但是当我推送新用户时，登录框应该向上滑动，然后新用户框应该向下滑动。

**HTML**

```
<div class="nav">
  <a id="logmein" href="#">login</a>
  <a id="createme" href="#">new user</a>

  <div id="logmein-box">logmein</div>
  <div id="createme-box">createme</div>
</div> 
```

**CSS**

```
.nav {width:600px; height:500px; background-color:#F60;}
#logmein-box {display:none; width:400px; height:400px; background-color:#F20;}
#createme-box {display:none; width:400px; height:400px; background-color:#567;} 
```

**查询**

```
$("#logmein").click(function(e) {
  e.preventDefault();
    $(".logmein-box").slideToggle(200);
  if(this).hasClass("test");
  return;
  $(this).addClass("test");
    $(".createme-box").hide();
}); 
```

我还做了一个 codepen - fiddle 离线了。

[http://codepen.io/anon/pen/mHGbJ](http://codepen.io/anon/pen/mHGbJ)

编辑：我最终使用了这段代码 - 任何人都可以用相同的输出制作更短更智能的方法吗？

```
$('#login-slide').click(function (e) {
        e.preventDefault();
        if (!$(this).hasClass("selected")) {
            $('#user-box').slideUp(function () {
                $('#login-slide').addClass('selected');
                $('#user-slide').removeClass('selected');
                $('#login-box').slideDown();
            });
        }
    });
//here is 2 buttons because i need to enter new user from two buttons.
    $('#user-slide, .lab-key-continue-btn').click(function (e) {
        e.preventDefault();
        if (!$(this).hasClass("selected")) {
            $('#login-box').slideUp(function () {
                $('#user-slide').addClass('selected');
                $('#login-slide').removeClass('selected');
                $('#user-box').slideDown();
            });
        }
    });

}); 
```

所选类仅用于我的导航按钮上的背景颜色，因此我可以看到哪个是活动的。

在这里小提琴：http: [//jsfiddle.net/iBertel/54Xyu/](http://jsfiddle.net/iBertel/54Xyu/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:23:55.973

好吧，乍一看，我可以告诉您，您需要更改`(".logmein-box")`为`("#logmein-box")`. 请注意主题标签而不是句点，因为它是 an`ID`而不是`CLASS`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:32:02.883

```
<ul id="user">
 <li id="action_login">login</li>
 <li id="action_create">new user</li>
</ul><div id="login" class="action">logmein</div><div id="create" class="action">createme</div> 
```

then with jquery you use the following code. Also included class highlighter for the selected list element, which you can style with css

```
$(document).ready(function(){
$('ul#user li').click(function(){
    var ref = $(this).attr('id'); // 'action_login'
var divcl = ref.split('_')[0]; // 'action'
var divid = ref.split('_')[1]; // 'login'
 $( 'div.'+divcl ).css( 'display', 'none' );
 $( 'div#'+divid ).css( 'display', 'block' );
 $( 'ul#user li').removeClass( 'selected' );
 $( 'ul#user li#' + ref  ).addClass( 'selected' ).css( 'outline', 'none' ).blur(); 
```

}); });

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:32:29.903

you have a class selector instead of id selector..

```
 $(".logmein-box").slideToggle(200);     
 ---^--- here 
```

try this

```
 $("#logmein").click(function(e) {
   e.preventDefault();
   $("#logmein-box").slideDown(200);
   $("#createme-box").slideUp(200);
});

$("#createme").click(function(e) {
  e.preventDefault();
  $("#logmein-box").slideUp(200);
   $("#createme-box").slideDown(200);

}); 
```

[fiddle here](http://jsfiddle.net/bipen/zBdFQ/1/)

# android - ScrollView 和 Admob Ad 在底部

> ID：14642160
> 
> 赞同：1
> 
> 时间：2013-02-01T08:17:13.993
> 
> 标签：android, scrollview, admob

这是我的应用程序的屏幕截图

![在此处输入图像描述](../Images/da3c49d08728fafc80cd0a4e60e85cd4.png)

这是屏幕的xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="90px"
        android:background="#000000"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/txtViewPrevious"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:gravity="right"
            android:height="25px"
            android:singleLine="true"
            android:text=""
            android:textSize="16px" />

        <EditText
            android:id="@+id/edtxtInput"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:background="#000000"
            android:clickable="false"
            android:cursorVisible="false"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="right"
            android:textColor="#FFFFFF"
            android:textSize="24px" >

            <requestFocus />
        </EditText>
    </LinearLayout>

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:id="@+id/linearLayoutMain"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:background="#000000"
            android:orientation="vertical" >

            <LinearLayout
                android:id="@+id/linearLayout2"
                android:layout_width="match_parent"
                android:layout_height="45px"
                android:layout_marginBottom="2px"
                android:background="#000000" >

                <Button
                    android:id="@+id/btnVoiceCommand"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.60"
                    android:background="@drawable/button_custom_vc"
                    android:text=""
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnClear"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="C"
                    android:textColor="#FF0000"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnDelete"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="DEL"
                    android:textColor="#FF0000"
                    android:textSize="24px" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayout3"
                android:layout_width="match_parent"
                android:layout_height="45px"
                android:layout_marginBottom="2px"
                android:background="#000000" >

                <Button
                    android:id="@+id/btnPower"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="^"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnFactors"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="F"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnPrime"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="P"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnMultiple"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="M"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnSpace"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="____"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayout4"
                android:layout_width="match_parent"
                android:layout_height="45px"
                android:layout_marginBottom="2px"
                android:background="#000000" >

                <Button
                    android:id="@+id/btnInverse"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="1/x"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnFactorial"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="n!"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnPercentage"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="%"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumberLeftBrace"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="("
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumberRightBrace"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text=")"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayout5"
                android:layout_width="match_parent"
                android:layout_height="45px"
                android:layout_marginBottom="2px"
                android:background="#000000" >

                <Button
                    android:id="@+id/btnCubeRoot"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="³ √x"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumber7"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="7"
                    android:textColor="#FFFF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumber8"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="8"
                    android:textColor="#FFFF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumber9"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="9"
                    android:textColor="#FFFF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumberDivide"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="/"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayout6"
                android:layout_width="match_parent"
                android:layout_height="45px"
                android:layout_marginBottom="2px"
                android:background="#000000" >

                <Button
                    android:id="@+id/btnSquareRoot"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="√x"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumber4"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="4"
                    android:textColor="#FFFF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumber5"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="5"
                    android:textColor="#FFFF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumber6"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="6"
                    android:textColor="#FFFF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumberMultiply"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="x"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayout7"
                android:layout_width="match_parent"
                android:layout_height="45px"
                android:layout_marginBottom="2px"
                android:background="#000000" >

                <Button
                    android:id="@+id/btnSquare"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="x²"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumber1"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="1"
                    android:textColor="#FFFF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumber2"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="2"
                    android:textColor="#FFFF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumber3"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="3"
                    android:textColor="#FFFF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumberMinus"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="-"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />
            </LinearLayout>

            <LinearLayout
                android:id="@+id/linearLayout8"
                android:layout_width="match_parent"
                android:layout_height="45px"
                android:layout_marginBottom="2px"
                android:background="#000000" >

                <Button
                    android:id="@+id/btnCube"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="x³"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumberDot"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="."
                    android:textColor="#FFFF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumber0"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="0"
                    android:textColor="#FFFF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumberEqual"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="="
                    android:textColor="#00FF00"
                    android:textSize="24px" />

                <Button
                    android:id="@+id/btnNumberPlus"
                    android:layout_width="0dip"
                    android:layout_height="fill_parent"
                    android:layout_marginRight="2px"
                    android:layout_weight="0.20"
                    android:background="@drawable/button_custom"
                    android:text="+"
                    android:textColor="#FFFFFF"
                    android:textSize="24px" />
            </LinearLayout>

        </LinearLayout>
    </ScrollView>

</LinearLayout> 
```

我想在屏幕底部放置 AdMob 广告。当用户向下滚动时，广告应该是可见的。我不想将广告放在顶部，因为它会破坏用户体验。我本可以使用相对布局，但是用户必须滚动才能点击计算器中的按钮，这不是一个好的举措。

条件 ::: 1\. 只在底部做广告。2.没有相对布局。

当我试图将广告放在滚动视图中时，我得到的输出是“Required viewWidth 350, got 0”。这可能是因为使用了滚动视图。我是否有解决方法，广告显示在底部，而不缩小屏幕或按钮..

这是我想在屏幕底部添加的代码..

```
<TextView
    android:id="@+id/txtViewAdvertisement"
    android:layout_width="match_parent"
    android:layout_height="30px"
    android:layout_gravity="center"
    android:gravity="center"
    android:text="ADVERTISEMENT"
    android:textSize="24px" />

<com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="a1510b619xxxxx"
    ads:loadAdOnCreate="true" /> 
```

如果不是通过 XML，我可以通过编码实现我想要的吗？

谢谢 ！！！

更新

![在此处输入图像描述](../Images/d45d609df02c3b8921380157dc92ceca.png)

广告挡住了按键，要访问底部按键，我必须向下滚动。

这里还有logcat。广告不显示。

```
02-01 14:00:12.964: I/Ads(28406): Request scenario: Online server request.
02-01 14:00:14.924: W/webcore(28406): Can't get the viewWidth after the first layout
02-01 14:00:16.794: I/webview(28406): skipInvalidates
02-01 14:00:16.794: I/webview(28406): skipInvalidates
02-01 14:00:16.794: I/webview(28406): skipInvalidates
02-01 14:00:16.794: I/Ads(28406): onReceiveAd()
02-01 14:00:16.934: W/Ads(28406): Not enough space to show ad! Wants: <320, 50>, Has: <0, 428> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:25:19.657

对您的 XML 进行一些修改，如下面的代码所示。注意`android:layout_weight="1"`ScrollView 上使用的属性。

```
<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="90px"
    android:background="#000000"
    android:orientation="vertical" >
    ....
    ....
    ....
</LinearLayout>

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_weight="1"
    android:fillViewport="true"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    <LinearLayout
        android:id="@+id/linearLayoutMain"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#000000"
        android:orientation="vertical" >
        ....
        ....
        ....
        ....
    <LinearLayout>
</ScrollView>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="bottom|center"
    android:orientation="vertical" >
    <TextView
        android:id="@+id/txtViewAdvertisement"
        android:layout_width="match_parent"
        android:layout_height="30px"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="ADVERTISEMENT"
        android:textSize="24px" />

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="a1510b619xxxxx"
        ads:loadAdOnCreate="true"
        ads:testDevices="TEST_EMULATOR, YOUR_DEVICE_ID" />
</LinearLayout> 
```

**编辑：**

理想情况下，这应该为您完成。否则，我很难过。对我来说效果很好。问题也可能是因为使用了**px**值。但我对此进行了推测，因为我从未使用过**px**值，也不知道它们在这种情况下的行为方式。

# asp.net - 查询中出现错误“指定的演员表无效”

> ID：14642161
> 
> 赞同：1
> 
> 时间：2013-02-01T08:17:14.930
> 
> 标签：asp.net, sql

我有一个有趣的问题。我想执行这个查询，但是发生了这个错误：

“指定的演员表无效。”

有谁能够帮助我？

这是我的代码：

```
 string connStr = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
        SqlConnection sqlconn = new SqlConnection(connStr);
        SqlCommand sqlcmd = new SqlCommand();
        sqlcmd = new SqlCommand("SELECT max(ID) FROM AddNews ", sqlconn);

        sqlconn.Open();
        int ID = ((int)sqlcmd.ExecuteScalar());
        sqlconn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:22:23.937

有一种情况，您可能没有结果并且返回可以为空。

你最好试试

```
int? MaxID = sqlcmd.ExecuteScalar() as int?; 
```

并检查 MaxID 是否不为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:23:47.940

结果在 SQL 级别被强制转换为 int。返回值将是一个 int，如果为 null，则默认为 0。

您可以使用`Convert.ToInt32(sqlCmd.ExecuteScalar())`代替 (int) 或`(int?)sqlCmd.ExecuteScalar() ?? 0;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T08:32:19.687

```
you have to change as follow

int ID=int.Parse(cmd.ExecuteScalar().ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T08:24:08.720

而不是`((int)value)`使用`Convert.ToInt32(value)`. 它会起作用的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T08:27:40.210

```
sqlcmd.ExecuteScalar()); 
```

它返回一个对象而不是 int。

试试这个

```
Object s= cmd.ExecuteScalar()
int x=Integer.Parse(s.ToString)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T08:30:16.837

您可以先测试您的值是否为 int

```
int ID;
int.TryParse(sqlcmd.ExecuteScalar(), out ID); 
```

# javascript - ajax函数的问题

> ID：14642167
> 
> 赞同：2
> 
> 时间：2013-02-01T08:17:58.330
> 
> 标签：javascript, jquery, html, ajax, http

我写了一个名为 getContent() 的 ajax 函数，结构如下

getContent(whichcontent){//代码在这里获取内容}

具体代码在这里：

```
function getXmlHttpRequestObject() {
  if (window.XMLHttpRequest) {
    return new XMLHttpRequest(); //Not IE
  } else if(window.ActiveXObject) {
    return new ActiveXObject("Microsoft.XMLHTTP"); //IE
  } else {
    alert("Your browser doesn't support the XmlHttpRequest object.  Better upgrade to Firefox.");
  }
}

var receiveReq = getXmlHttpRequestObject();

var page_id = 1;

function getContent(which_page,append){
  if (receiveReq.readyState == 4 || receiveReq.readyState == 0) {    

    receiveReq.open("GET", 'spt/page_'+which_page, true);//get the text file

    receiveReq.onreadystatechange = function(){
        handleGetContent(which_page,append);
    }
    receiveReq.send(null);
  }     
}

function handleGetContent(which_page,append){
    if (receiveReq.readyState == 4) {        
        if(append == 1){
            $('#container').append("<div class='page' id='page_"+which_page+"'><div class='title'>围城</div><p>" + receiveReq.responseText + "</p><div class='pagenum'>"+which_page+"</div></div>");

        }
        if(append == 0){
          $('#container').prepend("<div class='page' id='page_"+which_page+"'><div class='title'>围城</div><p>" + receiveReq.responseText + "</p><div class='pagenum'>"+which_page+"</div></div>");          
        }
    }
} 
```

我像这样使用了getContent

```
$(document).ready(function (){
    getContent(1,1);
    getContent(2,1);
} 
```

问题是我只得到一个......而另一个ID为page_2的没有出现。我想知道ajax函数是否只能在js函数中调用一次，或者我只是让ajax函数出错。来人帮帮我！！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:25:21.293

XMLHttpRequest 调用是异步的，因此如果您只使用一个请求对象，则第二个调用`getContent`将被忽略，因为`receiveReq.readyState`既不是 0 也不是 4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:31:14.757

我认为代码还可以，但是如果您对 ajax 有疑问，则可以使用`jquery`它，如果没有，则可以为 ajax 使用单个函数，例如：[http ://www.w3schools.com/ajax/ajax_aspphp.asp](http://www.w3schools.com/ajax/ajax_aspphp.asp)

或者试试这个代码

```
// change the function like
function getContent(which_page,append){
    var receiveReq = getXmlHttpRequestObject();// Create object here

    receiveReq.open("GET", 'spt/page_'+which_page+'.txt', true);//get the text file
    //write the extension of the file
    receiveReq.onreadystatechange = function(){
        if (receiveReq.readyState == 4 || receiveReq.readyState == 0) {    
            handleGetContent(receiveReq,which_page,append);
        }

    }    
    receiveReq.send(null); 
}
// add an extra parameter in this function
function handleGetContent(receiveReq,which_page,append){
    if (receiveReq.readyState == 4) {        
        if(append == 1){
            $('#container').append("<div class='page' id='page_"+which_page+"'><div class='title'>围城</div><p>" + receiveReq.responseText + "</p><div class='pagenum'>"+which_page+"</div></div>");

        }
        if(append == 0){
          $('#container').prepend("<div class='page' id='page_"+which_page+"'><div class='title'>围城</div><p>" + receiveReq.responseText + "</p><div class='pagenum'>"+which_page+"</div></div>");          
        }
    }
}
$(document).ready(function (){
    getContent(1,1);
    getContent(2,1);
});// change this line also 
```

# math - 编程以查找 2D 圆是否无障碍

> ID：14642168
> 
> 赞同：0
> 
> 时间：2013-02-01T08:18:35.517
> 
> 标签：math, graphics, 2d, collision-detection, game-physics

在二维平面中，有一个圆心 (x,y) 和半径 r。如果圆圈内有任何障碍物，程序化查找的有效方法是什么？

当然，解决问题的一种方法是遍历圆中的每个点以检查该位置是否有障碍物（[您如何循环遍历二维数组中的一圈值？](https://stackoverflow.com/questions/4590846/how-do-you-loop-through-a-circle-of-values-in-a-2d-array)），但有没有更好的怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:25:50.383

是的。圆有一个中心和一个半径。检查平面上是否有一个点 (x [0] , y [0] )，这样：

(x [0] - x) ² + (y [0] - y) ² ≤ r ²

# grails - 如何使用 grails 脚手架对遗留表进行建模

> ID：14642169
> 
> 赞同：2
> 
> 时间：2013-02-01T08:18:35.333
> 
> 标签：grails, grails-orm

经过一周的搜索和尝试，我不得不带着我的问题来到这里。

我有一个需要使用 grails**脚手架**建模的遗留系统。系统通过以下方式收集报告信息：

```
|customer_id|Question_1  |Question_2|...|Question_N|
|123        |A           |Z         |...|D         |
|456        |B           |X         |...|E         | 
```

问题的答案集是：

```
Question 1: A,B,C
Question 2: Z,X,Y
Question N: D,E,F 
```

**在许多此类表中，N 远远超过**100 。

**我知道我可以通过以下方式对表格进行建模（不介意语法）**

### 1.inList

```
class InformationTable {
    Int customerId
    String question1
    String question2
    .
    .
    String questionN

    static constraints = {
        question1 inList: ['A','B','C']
        question2 inList: ['Z','X','Y']
        .
        .
        questionN inList: ['D','E','F']
    }
} 
```

**或者通过使用自定义验证器限制可能的结果来部分使用脚手架。Scaffolding 在答案的选择框中显示所有选项，但只允许保存它们自己类型的答案：**

### 2\. 自定义验证器

```
class InformationTable {
    Int customerId
    Answer answer1
    Answer answer2
    .
    .
    answer answerN

    // again, don't mind about the syntax 
    // I wrote this out of memory and will 
    // check the syntax in the evening

    static constraints = {
        answer1 validator: { val, obj ->
            obj.answer1.type == 'question1'
        }
        answer2 validator: { val, obj ->  
            obj.answer2.type == 'question2'
        }   
        .
        .
        answerN validator: { val, obj ->  
            obj.answerN.type == 'questionN'
        }
    }
}

class Answer {
    String name
    String type
} 
```

### 后一个例子中的问题表

```
|type     |name|
|question1|A   |
|question1|B   |
|question1|C   |
|question2|Z   |
|question2|X   |
|question2|Y   |
|question3|D   |
|question3|E   |
|question3|F   | 
```

第一个选项（inList）是一种使用脚手架的方法，但它需要大量工作，我不喜欢这些答案选项不在数据库中。

第二种方法看起来很有希望，但我不如何限制脚手架打印的打印答案，例如 answer1 只会将有效选项（'A'，'B'，'C'）打印到脚手架保管箱。

**有谁知道用脚手架做这件事的更好方法？**

# android - java.net.SocketException：recvfrom 失败：来自 PhoneGap 的 FileTransfer 的 ECONNRESET

> ID：14642171
> 
> 赞同：1
> 
> 时间：2013-02-01T08:18:49.530
> 
> 标签：android, cordova, socketexception

程序在执行以下函数时抛出异常：

```
 testDownloadFunc: function() {
    console.log("testDownload");
    var remoteFile = "http://192.168.55.177/MvcApplication6/Download/getFile";
    var localFileName = "Test01.properties";

    function fail(error) {
        console.log(error.code);
    }

    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
        fileSystem.root.getFile(localFileName, {create: true, exclusive: false}, function(fileEntry) {
            var localPath = fileEntry.fullPath;
            if (device.platform === "Android" && localPath.indexOf("file://") === 0) {
                localPath = localPath.substring(7);
            }
            var ft = new FileTransfer();
            ft.download(remoteFile,
                localPath, function(entry) {
                    console.log("download complete: " + entry.fullPath);
                }, fail);
        }, fail);
    }, fail);       
} 
```

> 引发了以下异常：02-01 16:01:16.920: E/FileTransfer(23147): {"target":"/storage/sdcard0/Test01.properties","source":"http://192.168\. 55.177/MvcApplication6/Download/getFile","http_status":200,"code":3} 02-01 16:01:16.920: E/FileTransfer(23147): java.net.SocketException: recvfrom failed: ECONNRESET（连接重置通过对等）02-01 16:01:16.920：E/FileTransfer（23147）：在 libcore.io.IoBridge.maybeThrowAfterRecvfrom（IoBridge.java:552）02-01 16:01:16.920：E/FileTransfer（23147）：在 libcore.io.IoBridge.recvfrom(IoBridge.java:516) 02-01 16:01:16.920: E/FileTransfer(23147): 在 java.net.PlainSocketImpl.read(PlainSocketImpl.java:488) 02-01 16 :01:16.920: E/FileTransfer(23147): at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46) 02-01 16:01:16.920: E/FileTransfer(23147): 在 java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240) 02-01 16:01:16.920: E/FileTransfer(23147): 在 java.io.BufferedInputStream .read(BufferedInputStream.java:304) 02-01 16:01:16.920: E/FileTransfer(23147): 在 libcore.net.http.ChunkedInputStream.read(ChunkedInputStream.java:52) 02-01 16:01:16.920 : E/FileTransfer(23147): at java.io.InputStream.read(InputStream.java:163) 02-01 16:01:16.920: E/FileTransfer(23147): at org.apache.cordova.FileTransfer.download( FileTransfer.java:507) 02-01 16:01:16.920: E/FileTransfer(23147): at org.apache.cordova.FileTransfer.execute(FileTransfer.java:88) 02-01 16:01:16.920: E/ FileTransfer(23147): 在 org.apache.cordova.api.PluginManager$1.run(PluginManager.java:231) 02-01 16:01:16.920: E/FileTransfer(23147):在 java.lang.Thread.run(Thread.java:856) 02-01 16:01:16.920: E/FileTransfer(23147): Caused by: libcore.io.ErrnoException: recvfrom failed: ECONNRESET (Connection reset by peer) 02-01 16:01:16.920: E/FileTransfer(23147): 在 libcore.io.Posix.recvfromBytes(Native Method) 02-01 16:01:16.920: E/FileTransfer(23147): 在 libcore.io.Posix .recvfrom(Posix.java:131) 02-01 16:01:16.920: E/FileTransfer(23147): 在 libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164) 02-01 16:01:16.920: E /FileTransfer(23147): 在 libcore.io.IoBridge.recvfrom(IoBridge.java:513) 02-01 16:01:16.920: E/FileTransfer(23147): ... 还有 10 个E/FileTransfer(23147): 在 libcore.io.Posix.recvfromBytes(Native Method) 02-01 16:01:16.920: E/FileTransfer(23147): 在 libcore.io.Posix.recvfrom(Posix.java:131) 02-01 16:01:16.920: E/FileTransfer(23147): 在 libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164) 02-01 16:01:16.920: E/FileTransfer(23147): 在 libcore。 io.IoBridge.recvfrom(IoBridge.java:513) 02-01 16:01:16.920: E/FileTransfer(23147): ... 10 更多E/FileTransfer(23147): 在 libcore.io.Posix.recvfromBytes(Native Method) 02-01 16:01:16.920: E/FileTransfer(23147): 在 libcore.io.Posix.recvfrom(Posix.java:131) 02-01 16:01:16.920: E/FileTransfer(23147): 在 libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164) 02-01 16:01:16.920: E/FileTransfer(23147): 在 libcore。 io.IoBridge.recvfrom(IoBridge.java:513) 02-01 16:01:16.920: E/FileTransfer(23147): ... 10 更多

问题的根本原因是什么以及如何解决？我使用 PhoneGap 2.1 和 Android 4.1.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:25:57.893

我不确定，但是这个问题出在 java IO 核心的某个地方，同时读取了太多的文本**行**，我通过将 JSON 代码的行数从 450 行减少到 10 行来解决这个问题。

我想出了这个解决方案，因为我使用 java 做了同样的工作并且在它到达`BufferedReader.readLine()`方法时遇到了同样的问题。

而且它可能有助于以另一种方式读取文件，例如使用 byteBuffer 或其他方式读取它们。但在你的情况下（电话差距），我没有想法：D

# python - Python any(iterable) 和 all(iterable) 没有短路和副作用

> ID：14642179
> 
> 赞同：1
> 
> 时间：2013-02-01T08:19:48.583
> 
> 标签：python

我有以下代码：

```
def evAnd(v, *predicates):
    satisfied=True
    for f in predicates:
        if not f(v):
            satisfied=False
            # log: f,v->False in a map and other side effects
        else:
            # log: f,v->True in a map and other side effects
    return satisfied

def evOr(v, *predicates):
    satisfied=False
    for f in predicates:
        if f(v):
            satisfied=True
            # log: f,v->True in a map and other side effects
        else:
            # log: f,v->False in a map and other side effects
    return satisfied 
```

在单个函数中统一上述内容的 Pythonic 方法是什么？（因为放置日志消息的地方有相当多的副作用代码）注意副作用的存在以及需要评估**所有**谓词的结果，而不会短路[任何](http://docs.python.org/2/library/functions.html#any)和[所有](http://docs.python.org/2/library/functions.html#all)

## 基于接受的答案的解决方案

所以，这就是我最终根据接受的答案所做的事情：

```
def adorn(predicate):
    def rv(v):
        rvi = predicate(v)
        if rvi:
            print "%s is satisfied for value %d" % (predicate.__name__, v)
            # any other side effects
        else:
            print "%s is not satisfied for value %d" % (predicate.__name__, v)
            # any other side effects
        return rvi
    return rv

def my_all(n, predicates):
    return reduce(operator.and_, map( lambda x : x(n), map(adorn, predicates)), True)

def my_any(n, predicates):
    return reduce(operator.or_, map( lambda x : x(n) , map(adorn, predicates)), False) 
```

它可以通过以下方式进行测试：

```
def even(n):
    return n%2==0

def odd(n):
    return n%2!=0

print my_all(3, [even, odd])
print my_any(4, [even, odd]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T08:26:34.583

一般来说，如果你传递一个生成器表达式，`any`否则`all`它会被短路，但是如果你把它变成一个 LC 并将它传递给这两个内置函数，那么短路是不可能的，你会得到你想要的效果追求

以下演示是不言自明的，可以根据您的问题进行调整

```
>>> count = 0
>>> def foo(n):
    global count
    count += 1
    return n%2

>>> any(foo(n) for n in range(10))
True
>>> count
2
>>> count = 0
>>> any([foo(n) for n in range(10)])
True
>>> count
10 
```

**正如 Blender 所建议的，它可能会创建一个应该被丢弃的列表。一个更面向生成器的解决方案如下**

`any`研究这个问题的另一种方法（至少对于生成器）是，如果被or短路，您希望消耗其余的可迭代对象`all`。[您可以通过部分借用使用 itertools 配方](http://docs.python.org/2/library/itertools.html#recipes)轻松做到这一点

```
>>> count
0
>>> it = (foo(n) for n in range(10))
>>> any(it)
True
>>> collections.deque(it, maxlen = 0)
deque([], maxlen=0)
>>> count
10 
```

这里有两个版本的 any 和 all 不会短路。随意给这些函数起一个有意义的名字（我真的很讨厌）

```
>>> def all_noss(expr):
    it = iter(expr)
    result = any(it)
    collections.deque(it, maxlen = 0)
    return result

>>> def any_noss(expr):
    it = iter(expr)
    result = any(it)
    collections.deque(it, maxlen = 0)
    return result 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T09:08:48.833

简单点怎么样

```
reduce(operator.and_, seq) 
```

对于“所有”，和

```
reduce(operator.or_, seq) 
```

对于“任何”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T08:28:00.013

您可以使用`reduce`：

```
def evAnd(v, *predicates):
    return reduce(lambda x, y: x and y, [f(v) for f in predicates])

def evOr(v, *predicates):
    return reduce(lambda x, y: x or y, [f(v) for f in predicates]) 
```

或使用`all`or `any`：

```
def evAnd(v, *predicates):
    return all([f(v) for f in predicates])

def evOr(v, *predicates):
    return any([f(v) for f in predicates]) 
```

由于上述方法创建了一个列表推导，所有谓词都将在没有短路的情况下进行评估。

**更新**：

列表推导式的缺点是它们会在内存中创建列表，如果您担心，我们可以使用生成器：

```
def evAnd(v, *predicates):
    return reduce(lambda x, y: x and y, (f(v) for f in predicates))

def evOr(v, *predicates):
    return reduce(lambda x, y: x or y, (f(v) for f in predicates)) 
```

这次我们必须使用`reduce`, while`all`或`any`会有短路，这是不可取的。

@NPE 提醒，我们可以用运算符替换 lambda：

```
def evAnd(v, *predicates):
    return reduce(operator.and_,  (f(v) for f in predicates))

def evOr(v, *predicates):
    return reduce(operator.or_,  (f(v) for f in predicates)) 
```

# php - 编辑时密码哈希两次 - CakePHP

> ID：14642183
> 
> 赞同：5
> 
> 时间：2013-02-01T08:19:51.633
> 
> 标签：php, authentication, cakephp-2.0

我有一个用户编辑视图。当人们访问此视图时，它在密码块中有散列密码。

如果您单击保存，它（显然）会再次对密码进行哈希处理，因为这是在我的用户模型中。

```
public function beforeSave($options = array()) {
    if(!empty($this->data['User']['password'])) {
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
    }
    return true;
} 
```

但我不想让它散列两次（因为这意味着密码已更改）。我更改了编辑视图并添加`array('value' => '','autocomplete'=>'off')`到密码字段。现在当我保存它时，它会在数据库中保存一个空白字符串。我认为它会阻止它使用函数`if(!empty($this->data['User']['password']))`中的语句来执行此`beforeSave`操作。

如何防止密码被双重哈希？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T09:37:43.723

解决方案相当简单。只需将 beforeSave 中的 if 语句更改为：

```
public function beforeSave($options = array()) {
    if(!empty($this->data['User']['password'])) {
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
    }
    return true;
} 
```

到：

```
public function beforeSave($options = array()) {
    if(!empty($this->data['User']['password'])) {
        $this->data['User']['password'] = AuthComponent::password($this->data['User']['password']);
    } else {
        unset($this->data['User']['password']);
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-22T05:44:28.543

**比较哈希：**

您可以将数据库中保存的哈希值与密码字段中的文本进行比较。如果您没有触摸密码（更改密码字段），哈希值应该匹配。假设您保存的散列是`xyz`，并且密码散列中加载的散列仍然保持不变，`xyz`; 在这种情况下，您不必重新散列任何内容，并且散列应该保持不变。

在另一种情况下，假设您保存的哈希是`xyz`，但您将密码 html 字段编辑为`abc`; 在这种情况下，您必须重新散列新密码 ( `abc`)，然后替换数据库记录中的旧密码。

**所有这些都可以用如下代码翻译：**

```
public function beforeSave($options = array()) {

    if (isset($this->data[$this->alias]['password'])) {

        if(isset($this->data[$this->alias]['id'])) {
            $id = $this->data[$this->alias]['id'];
            $user = $this->findById($id);
        } else {
            $id = false;
        }

        if(!$id || $this->data[$this->alias]['password'] != $user['User']['password']) {
            $passwordHasher = new SimplePasswordHasher();
            $this->data[$this->alias]['password'] = $passwordHasher->hash(
                $this->data[$this->alias]['password']
            );
        }

    }

    return true;
} 
```

问候，米

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T09:46:28.650

在您的视图中使用备用字段名称（例如`$this->Form->password('pwd')`）

```
public function beforeSave($options = array()) {
    if (!empty($this->data[$this->alias]['pwd'])) {
        $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['pwd']);
 }
    return true;
} 
```

这可以防止密码被覆盖/空白。此链接上的信用、解释和其他最佳实践[。](http://www.dereuromark.de/2011/08/25/working-with-passwords-in-cakephp/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T08:26:29.683

通常用户编辑页面与您描述的不同。如果您存储散列密码，则密码永远不会在编辑视图中返回。

如果用户想要更改他的密码，一个表单通常包含 3 个字段

*   旧密码
*   新密码
*   新密码（检查它是否等于以前的密码）

然后发生的是：

*   检查两个新密码的值是否相等
*   散列旧密码
*   哈希新密码
*   检查旧密码散列是否等于数据库中的散列...如果是，旧散列将被新散列替换

在您的示例中，您无法区分散列和常规密码，因此您的代码可能永远不会在其当前状态下工作，因为散列也只是一个字符串文字。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-11T07:04:37.927

```
public function beforeSave($options = array()) {
    if(AuthComponent::user('id') == null)
        if (isset($this->data[$this->alias]['password'])) {
            $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
        }
        return true;
} 
```

# ios - iOS 应用内购买 Adob e AIR

> ID：14642185
> 
> 赞同：0
> 
> 时间：2013-02-01T08:20:00.650
> 
> 标签：ios, air, in-app-purchase

我正在使用 Adob​​e AIR 为 iOS 开发游戏，我希望添加应用内购买、社交媒体和游戏中心的功能。所以最近我开始理解 Native Extensions 是什么意思，它们将我的 AIR 代码连接到 Apple iOS SDK 库。

所以问题是：Adobe 不提供那些原生扩展，所以这里买来了，让我们[**在这里**](http://www.milkmangames.com/blog/tools/#iosiap)说这个。

所以我必须从送奶人游戏中购买这个，导入扩展并从我的代码中调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T05:07:18.570

Adobe 使用 Adob​​e Gaming SDK 发布了一个名为 ProductStore 的免费 ANE。您不必购买 Milkman Games 之一。

# sql-server-2008 - Sql Server - 获取求和行的 ID

> ID：14642186
> 
> 赞同：2
> 
> 时间：2013-02-01T08:20:04.173
> 
> 标签：sql-server-2008

我有下表 t_vouchers：

```
id  code  amount  isactive
1   a1    10      1
2   a2    20      0
3   a3    30      1 
```

我想计算所有活动凭证的总和（金额），但还要获得另一列，其中包含此总和中包含的 id 列表。如下所示：

```
sum   ids
40    1,3 
```

查询将类似于：

```
 select sum(amount) /* ? how to get here the ids stuffed in a comma separated string ? */
 from t_vouchers
 where isactive = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:26:50.463

这应该有效：

```
 select sum(amount) sum,
        (
        STUFF((
            SELECT  DISTINCT ',' + CAST(a.id AS VARCHAR(100))
            FROM    t_vouchers a
            WHERE   a.isactive = 1
            FOR XML PATH('')
            ),1,1,'')
        ) ids
 from t_vouchers
 where isactive = 1 
```

这是一个[SQL 小提琴](http://sqlfiddle.com/#!3/b6fcf/1/0)

# entity-framework - 让一个天蓝色的云项目在云上/云上工作？

> ID：14642188
> 
> 赞同：0
> 
> 时间：2013-02-01T08:20:16.030
> 
> 标签：entity-framework, azure, wcf-data-services

使为 azure（也）开发的项目能够在云之外部署（例如在 Windows Server 计算机上）需要哪些步骤？我的项目有 2 个工人角色。一个基本上是数据挖掘器，另一个托管（自托管）WCF 服务。它使用 Azure 表服务、队列和 Blob 服务。这些元素将如何从云端转换？SQL 数据库或 NoSql 方法？我将如何添加一个抽象级别以允许它使用实际可用的任何资源，而无需修改底层实现（即我的 DataServiceContext 类保持大部分不变）？

**编辑1：**

工作者角色 <=> Windows 服务

Azure 表服务 <=> EntityFramework + WCF 数据服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:29:30.530

不幸的是，如果不进行大量返工，您将无法完成它。尽管您的 Web/工作者角色可能更容易移动，但您的大问题是使用 Azure 存储。虽然您可以（或可能已经）抽象出您的存储并注入到任何适当的存储中，但您很可能（无论是否明确）做出了特定于 Azure 存储的设计注意事项。这意味着您实施的​​内容可能在 Azure 上运行良好，但在本地运行不佳。例如，您使用的 blob 存储的许多功能（例如页 blob 或冗余）在传统的基于磁盘的存储中是不可用的。

不久前，我给 Scott Gu 发了一封电子邮件，专门询问缺少与 Azure 存储 API 兼容的本地存储产品该怎么办。他回答说 API 兼容性是他们正在努力的事情，并将在今年晚些时候（去年 2012 年）出现。我假设这指的是在本地运行的 Azure 网站（和其他 IaaS）——他们去年在预览版中宣布了这一点。就存储和计算而言，目前还没有。

我建议您避免尝试使用相同的代码和基础结构为 Azure 和本地构建应用程序。既然您已经开始使用 Azure，请质疑对内部部署的需求，并尝试发现潜在的需求。是安全恐惧吗？归属感？成本？也许您可以了解真正需要什么，并在您的 Azure 应用程序中解决这些问题。也许有点推销在 Azure 上运行的好处会比重写更容易。毕竟，应用程序**必须**在本地运行的用例并不多——否则我们根本不会做这个云计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T01:18:24.180

我曾从事过一个需要在云端和本地部署的项目，具有相同的代码库。也许我可以从我身边分享一些想法。

我们在设计的时候需要关注很多方面，主要关注云和本地的不同环境，在我们的系统中构建一些虚拟化层。这样我们就可以通过配置进行切换。

1.  文件系统：我们有一个虚拟文件操作界面，里面包含了文件保存、删除和获取的方法。然后我们有两个本地和 blob 的实现类。

2.  数据库：这可以通过支持 SQL Server 和 SQL Azure 的简单 SQL 帮助程序类轻松完成。只需要更改连接字符串。但是在使用 SQL Server 时，我们也遵循 SQL Azure 的限制，例如不能跨数据库查询。

3.  配置：我们将一些配置移到了从 web.config 启用缓存的数据库中，特别是对于那些可能在运行时更改的配置元素。这是因为在云上部署时，除非推送新包，否则我们无法更改 web.config。

4.  托管：由于我们的项目是 WCF 服务，因此我们为底层服务实现创建了多个托管项目。其中一些用于本地部署，例如 Windows 服务托管、控制台应用程序托管和 IIS 托管。我们还有一个 Web 角色和工作人员角色，可用于在云上托管我们的服务。托管项目非常简单，它们都使用相同的服务实现类。

5.  日志：我们利用我们的文件系统层，以便日志可以保存在本地文件（本地部署）或表服务（云部署）中。

6.  缓存：我们从 ServiceStack 学习了代码，并为 Windows Server AppFabric Cache 和 Windows Azure Shared Cahce 构建了一个缓存接口和一些实现。它可以通过配置进行切换。对于下一个版本，我们将为云服务缓存实现另一个实现类。

7.  无状态：我们确保我们的应用程序，特别是服务实现是无状态的。这不仅对云部署很重要，对本地部署也很重要。

希望这可以帮助。

# javascript - 为什么这个 for in 语句返回 0 和 1？

> ID：14642190
> 
> 赞同：1
> 
> 时间：2013-02-01T08:20:30.197
> 
> 标签：javascript, json, for-loop

谁能帮我分解这些代码并详细解释为什么它返回 0 和 1？

For in 语句应该返回对象的属性。我不明白为什么这段代码会返回 0 和 1。谁能用简单的语言解释一下？提前感谢您的帮助！

```
var JSON = {
            "users":[
                {
                    "name":"dennis",
                    "age":25
                },
                {
                    "name":"zoe",
                    "age":25               
                }
            ]
};

for (var prop in JSON.users){
    console.log(prop);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:21:20.250

因为`JSON.users`是一个数组，所以键是索引，0 和 1（您可以使用`JSON.users[0]`and检索元素`JSON.users[1]`）。

# android - 将图像与另一个图像的中心对齐

> ID：14642194
> 
> 赞同：2
> 
> 时间：2013-02-01T08:21:04.603
> 
> 标签：android, android-layout, android-xml

我有多个图像需要以特定方式对齐，第二个`imageview`必须与第一个的中心对齐`imageview`。怎样才能做到这一点？![在此处输入图像描述](../Images/b2ad66dd1a9276db79598d76050c6bdb.png)

我附上了一张图片供参考，

到目前为止，我正在做的是在 的中心保持一个隐藏的视图`obj1`，并将其顶部对齐`obj2`，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:00:56.557

你为什么不直接得到`paddingTop` obj3 的一半，一半是 obj1 的`paddingTop`或`marginTop`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:31:20.673

使用`RelativeLayout`并设置对齐方式`ImageViews`：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="match_parent"
                android:layout_height="match_parent">

    <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/imageViewLeft"
            android:layout_alignParentLeft="true"/>

    <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/imageViewRight"
            android:layout_alignParentRight="true"/>
</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:40:49.163

您可以自己尝试一下，我希望这将帮助您根据您的要求获得意见-

创建activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rlBase"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:background="#FFF000" >

<ImageView
    android:id="@+id/imageViewRight"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageViewLeft"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

创建 imagemiddle.xml

```
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/imageViewMiddle"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/ic_launcher" /> 
```

在主要活动中 -

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

} 
```

和 -

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    // TODO Auto-generated method stub
    super.onWindowFocusChanged(hasFocus);
    if (hasFocus) {
        RelativeLayout rlParent = (RelativeLayout) findViewById(R.id.rlBase);
        int height = rlParent.getMeasuredHeight() / 2;
        Log.d("Height:", height + "");
        rlParent.getLayoutParams().height = height
                + rlParent.getMeasuredHeight();
        rlParent.invalidate();// Change the height of the Relative layout programatically

        // Layout params for the middle image--
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.CENTER_HORIZONTAL,
                RelativeLayout.TRUE);
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
        ImageView ivMiddle = (ImageView) inflater.inflate(
                R.layout.imagemiddle, null);
        params.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM,
                RelativeLayout.TRUE);
        ivMiddle.setLayoutParams(params);
        rlParent.addView(ivMiddle, params);

    }
} 
```

这不是确切的答案；但这应该可以帮助您获得所需的输出。

# android - 什么是 Android JNI 应用程序上下文中的模块？

> ID：14642201
> 
> 赞同：1
> 
> 时间：2013-02-01T08:21:29.423
> 
> 标签：android, android-ndk, makefile, java-native-interface

我是 JNI、C++ 和制作文件的新手。在`Application.mk`我的示例 Android-JNI-C++ 项目中，它们是一个`APP_MODULES`属性。

[Android NDK 文档](http://www.kandroid.org/ndk/docs/APPLICATION-MK.html)只是说

> APP_MODULES
> 
> 这个变量是可选的。如果未定义，NDK 将默认构建您的 Android.mk 声明的*所有*模块，以及它可能包含的任何子 makefile。
> 
> 如果定义了 APP_MODULES，它必须是一个以空格分隔的模块名称列表，因为它们出现在 Android.mk 文件的 LOCAL_MODULE 定义中。请注意，NDK 将自动计算模块依赖关系。

而且我从[StackOverflow 上的其他问题中](https://stackoverflow.com/q/5835926/199048)知道，每个模块都需要它自己的`Android.mk`。

但是在这种情况下，什么是模块？拥有多个模块而不是只有一个模块有什么好处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T22:24:59.803

您可以在单个 Android.mk 中定义多个模块。您构建或复制的每个库（静态库或共享库）（称为预构建库）都是一个单独的模块。

在 Android 上将代码拆分到单独的库中的主要原因与在所有其他平台上相同：*divide et impera*。在 NDK 构建方案中，还有一种情况：为每个模块指定编译参数要容易得多，因此如果需要[混合使用 -std=c99 和 -std=c++0x](https://groups.google.com/d/topic/android-ndk/eUW7X_rKZPs/discussion)，简单的解决方法是使用两个静态库.

# c# - 如何处理 T4 字符串模板？

> ID：14642204
> 
> 赞同：4
> 
> 时间：2013-02-01T08:21:40.393
> 
> 标签：c#, t4

我有以下关于 T4 模板的问题。考虑 SomeTemplate.tt 包含：

```
<#@ template language="C#" #>
Today is  <#=  DateTime.Today.ToString() #> 
```

它是这样处理的：

```
 SomeTemplatest st = new SomeTemplate(); 
 string  processedText = st.TransformText(); 
```

问：什么是模板不是现有的 tt，而是在数据库中的某个位置。如何处理作为字符串的模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:57:18.867

尽管我对您的问题发表了评论，但在这两种情况下，您都需要创建`Microsoft.VisualStudio.TextTemplating.Engine`该类的实例。此类有一个方法`ProcessTemplate(...)`，您可以将模板代码传递为要转换为字符串的方法。

第二个参数可能更棘手，它是一个提供上下文信息和功能来转换模板的模板主机。我不确定是否有办法获取 Visual Studio 的 TextTemplatingEngineHost。

但是对于构建后的独立版本（例如，您想在应用程序中转换模板），您必须创建自定义文本模板主机。可以在此处找到如何执行此操作的演练：http: [//msdn.microsoft.com/en-us/library/bb126579.aspx](http://msdn.microsoft.com/en-us/library/bb126579.aspx)

# verification - 连接错误连接计数 0 不满足所需的最小值 1

> ID：14642207
> 
> 赞同：1
> 
> 时间：2013-02-01T08:22:04.370
> 
> 标签：verification, system-verilog

我收到一个错误。我将记分牌的`vip_export`端口（一个分析端口）与我的 USB 代理的观察者端口连接在`connect_phase`. 我什至`vip_export`在记分牌的新阶段更新。

我得到了这个`UVM_INFO`我无法理解的东西。

`UVM_INFO /h/tool_linux/synopsys/vcs/2012.09/etc/uvm-1.1/base/uvm_resource_db.svh(129) @ 0.000 ns: reporter [CFGDB/GET] Configuration 'uvm_test_top.mss1_tb_env.usb_scoreboard.vip_export.check_connection_relationships' (type logic signed[4095:0]) read by uvm_test_top.mss1_tb_env.usb_scoreboard.vip_export = null (failed lookup)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:34:52.403

我找到了解决方案。我在记分牌文件中使用`uvm_analysis_export`而不是。`uvm_analysis_imp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-19T09:33:28.640

其他方法是将 uvm_tlm_analysis_fifo 连接到 uvm_analysis_export

# html - html页面刷新缓存

> ID：14642214
> 
> 赞同：1
> 
> 时间：2013-02-01T08:22:18.497
> 
> 标签：html, caching

> **可能重复：**
> [设置缓存过期？](https://stackoverflow.com/questions/7134425/set-cache-expiration)

我正在发布我的 HTML 页面的新版本。但在大多数浏览器（客户的浏览器）中，显示的是旧版本。

问题应该是缓存。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:29:02.103

使用`no-cache`标题。把这个放在你的里面`<head></head>`：

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE"> 
```

# c# - C# 中的自旋锁。在哪种算法中 SpinLock 是对 Monitor 的更好选择？

> ID：14642215
> 
> 赞同：0
> 
> 时间：2013-02-01T08:22:18.247
> 
> 标签：c#, multithreading, monitor, spinlock, interlocked-increment

> **可能重复：**
> [为什么每个人都说 SpinLock 更快？](https://stackoverflow.com/questions/14611320/why-everyone-states-that-spinlock-is-faster)

这个问题是关于 SpinLock、Monitor & Interlocked。

我做了 2 个测试来测试 的性能，`Monitor`这些测试让我感到困惑。`SpinLock``Interlocked`

我的困惑特别是关于`SpinLock`真正的速度有多快。根据我的测试`SpinLock`，它比`Monitor`. 但是基于一些文档和文章`SpinLock`应该提供性能增益。

现在我想知道**在哪些情况下会`SpinLock`提高性能？**

您可以在下面找到有关我执行的测试的一些详细信息：

在第一次测试中，我创建了几个线程（就像我拥有的​​许多硬件线程一样）访问同一个共享锁对象，执行非常短的操作（或根本没有操作：这只是一个测试）。

在第二个测试中，我创建了一个元素数组，并且很少有线程随机访问该数组中的元素。每个元素都包含自己的锁定对象：`System.Object`for `Monitor`test，`SpinLock`object for `SpinLock`test，对于`Interlocked.Increment`，线程使用数组元素内部的int类型的公共变量来执行`Interlocked.Increment`操作。

在每个测试中，对共享区域的访问都是循环执行的。每个测试由 3 个例程组成：

*   测试自旋锁
*   测试监视器
*   测试增量.联锁

每次测试都显示`SpinLock`比 慢`Monitor`。所以，自从我进行了提到的测试以来，困扰我的问题是**哪些场景适合于由`SpinLock`**

* * *

**发布测试代码以提供详细信息：**

（这两个测试都是针对 .net 4.5 编译的）

**测试 1，线程试图获得对同一个共享锁定对象的独占访问权限**

```
using System;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Diagnostics;
using System.Threading.Tasks;
using System.Linq;
using System.Globalization;
using System.ComponentModel;
using System.Threading;
using System.Net.Sockets;
using System.Net;

class Program
{
    static int _loopsCount = 1000000;
    static int _threadsCount = -1;

    static ProcessPriorityClass _processPriority = ProcessPriorityClass.RealTime;
    static ThreadPriority _threadPriority = ThreadPriority.Highest;

    static long _testingVar = 0;

    static void Main(string[] args)
    {
        _threadsCount = Environment.ProcessorCount;
        _threadsCount = (_threadsCount == 0) ? 1 : _threadsCount;

        Console.WriteLine("Cores/processors count: {0}", Environment.ProcessorCount);
        Console.WriteLine("Threads count: {0}", _threadsCount);

        Process.GetCurrentProcess().PriorityClass = _processPriority;

        TimeSpan tsInterlocked = ExecuteInterlocked();
        TimeSpan tsSpinLock = ExecuteSpinLock();
        TimeSpan tsMonitor = ExecuteMonitor();

        Console.WriteLine("Test with interlocked: {0} ms\r\nTest with SpinLock: {1} ms\r\nTest with Monitor: {2} ms",
            tsInterlocked.TotalMilliseconds,
            tsSpinLock.TotalMilliseconds,
            tsMonitor.TotalMilliseconds);

        Console.ReadLine();
    }

    static TimeSpan ExecuteInterlocked()
    {
        _testingVar = 0;

        ManualResetEvent _startEvent = new ManualResetEvent(false);
        CountdownEvent _endCountdown = new CountdownEvent(_threadsCount);

        Thread[] threads = new Thread[_threadsCount];

        for (int i = 0; i < threads.Length; i++)
        {
            threads[i] = new Thread(() =>
                {
                    _startEvent.WaitOne();

                    for (int j = 0; j < _loopsCount; j++)
                    {
                        Interlocked.Increment(ref _testingVar);
                    }

                    _endCountdown.Signal();
                });

            threads[i].Priority = _threadPriority;
            threads[i].Start();
        }

        Stopwatch sw = Stopwatch.StartNew();

        _startEvent.Set();
        _endCountdown.Wait();

        return sw.Elapsed;
    }

    static SpinLock _spinLock = new SpinLock();

    static TimeSpan ExecuteSpinLock()
    {
        _testingVar = 0;

        ManualResetEvent _startEvent = new ManualResetEvent(false);
        CountdownEvent _endCountdown = new CountdownEvent(_threadsCount);

        Thread[] threads = new Thread[_threadsCount];

        for (int i = 0; i < threads.Length; i++)
        {
            threads[i] = new Thread(() =>
            {
                _startEvent.WaitOne();

                bool lockTaken;

                for (int j = 0; j < _loopsCount; j++)
                {
                    lockTaken = false;

                    try
                    {
                        _spinLock.Enter(ref lockTaken);

                        _testingVar++;
                    }
                    finally
                    {
                        if (lockTaken)
                        {
                            _spinLock.Exit();
                        }
                    }
                }

                _endCountdown.Signal();
            });

            threads[i].Priority = _threadPriority;
            threads[i].Start();
        }

        Stopwatch sw = Stopwatch.StartNew();

        _startEvent.Set();
        _endCountdown.Wait();

        return sw.Elapsed;
    }

    static object _locker = new object();

    static TimeSpan ExecuteMonitor()
    {
        _testingVar = 0;

        ManualResetEvent _startEvent = new ManualResetEvent(false);
        CountdownEvent _endCountdown = new CountdownEvent(_threadsCount);

        Thread[] threads = new Thread[_threadsCount];

        for (int i = 0; i < threads.Length; i++)
        {
            threads[i] = new Thread(() =>
            {
                _startEvent.WaitOne();

                bool lockTaken;

                for (int j = 0; j < _loopsCount; j++)
                {
                    lockTaken = false;

                    try
                    {
                        Monitor.Enter(_locker, ref lockTaken);

                        _testingVar++;
                    }
                    finally
                    {
                        if (lockTaken)
                        {
                            Monitor.Exit(_locker);
                        }
                    }
                }

                _endCountdown.Signal();
            });

            threads[i].Priority = _threadPriority;
            threads[i].Start();
        }

        Stopwatch sw = Stopwatch.StartNew();

        _startEvent.Set();
        _endCountdown.Wait();

        return sw.Elapsed;
    }
} 
```

**测试2，线程试图获得对数组元素的独占访问权，这些元素是随机挑选的，即低竞争测试**

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace TestConcurrency
{
    class Program
    {
        static int _loopsCount = 10000000;
        static int _threadsCount = -1;
        static int _arrayCount = 1000;

        static ProcessPriorityClass _processPriority = ProcessPriorityClass.RealTime;
        static ThreadPriority _threadPriority = ThreadPriority.Highest;

        static void Main(string[] args)
        {
            _threadsCount = Environment.ProcessorCount;
            _threadsCount = (_threadsCount == 0) ? 1 : _threadsCount;

            Console.WriteLine("Cores/processors count: {0}", Environment.ProcessorCount);
            Console.WriteLine("Threads count: {0}", _threadsCount);

            Process.GetCurrentProcess().PriorityClass = _processPriority;

            TimeSpan tsInterlocked = ExecuteInterlocked();
            TimeSpan tsSpinLock = ExecuteSpinLock();
            TimeSpan tsMonitor = ExecuteMonitor();

            Console.WriteLine("Test with interlocked: {0} ms\r\nTest with SpinLock: {1} ms\r\nTest with Monitor: {2} ms",
                tsInterlocked.TotalMilliseconds,
                tsSpinLock.TotalMilliseconds,
                tsMonitor.TotalMilliseconds);

            Console.ReadLine();
        }

        static IEnumerable<int> newList()
        {
            return Enumerable.Range(0, _arrayCount);
        }

        static TimeSpan ExecuteMonitor()
        {
            ManualResetEvent _startEvent = new ManualResetEvent(false);
            CountdownEvent _endCountdown = new CountdownEvent(_threadsCount);

            Thread[] threads = new Thread[_threadsCount];
            var array = newList().Select(i => new ArrayElementForMonitor()).ToArray();

            for (int i = 0; i < threads.Length; i++)
            {
                int localI = i;

                threads[i] = new Thread(() =>
                {
                    Random r = new Random(localI * localI * localI);

                    int index = 0;

                    _startEvent.WaitOne();

                    bool lockTaken;

                    for (int j = 0; j < _loopsCount; j++)
                    {
                        index = r.Next(0, _arrayCount);

                        lockTaken = false;

                        try
                        {
                            Monitor.Enter(array[index].Locker, ref lockTaken);
                        }
                        finally
                        {
                            if (lockTaken)
                            {
                                Monitor.Exit(array[index].Locker);
                            }
                        }
                    }

                    _endCountdown.Signal();
                });

                threads[i].Priority = _threadPriority;
                threads[i].Start();
            }

            GC.Collect();

            Stopwatch sw = Stopwatch.StartNew();

            _startEvent.Set();
            _endCountdown.Wait();

            return sw.Elapsed;
        }

        static TimeSpan ExecuteSpinLock()
        {
            ManualResetEvent _startEvent = new ManualResetEvent(false);
            CountdownEvent _endCountdown = new CountdownEvent(_threadsCount);

            Thread[] threads = new Thread[_threadsCount];
            var array = newList().Select(i => new ArrayElementForSpinLock()).ToArray();

            for (int i = 0; i < threads.Length; i++)
            {
                int localI = i;

                threads[i] = new Thread(() =>
                {
                    Random r = new Random(localI * localI * localI);

                    int index = 0;

                    _startEvent.WaitOne();

                    bool lockTaken;

                    for (int j = 0; j < _loopsCount; j++)
                    {
                        index = r.Next(0, _arrayCount);

                        lockTaken = false;

                        try
                        {
                            array[index].Locker.Enter(ref lockTaken);
                        }
                        finally
                        {
                            if (lockTaken)
                            {
                                array[index].Locker.Exit();
                            }
                        }
                    }

                    _endCountdown.Signal();
                });

                threads[i].Priority = _threadPriority;
                threads[i].Start();
            }

            GC.Collect();

            Stopwatch sw = Stopwatch.StartNew();

            _startEvent.Set();
            _endCountdown.Wait();

            return sw.Elapsed;
        }

        static TimeSpan ExecuteInterlocked()
        {
            ManualResetEvent _startEvent = new ManualResetEvent(false);
            CountdownEvent _endCountdown = new CountdownEvent(_threadsCount);

            Thread[] threads = new Thread[_threadsCount];
            var array = newList().Select(i => new ArrayElementInterlocked()).ToArray();

            for (int i = 0; i < threads.Length; i++)
            {
                int localI = i;

                threads[i] = new Thread(() =>
                {
                    Random r = new Random(localI * localI * localI);

                    int index = 0;

                    _startEvent.WaitOne();

                    for (int j = 0; j < _loopsCount; j++)
                    {
                        index = r.Next(0, _arrayCount);

                        Interlocked.Increment(ref array[index].Element);
                    }

                    _endCountdown.Signal();
                });

                threads[i].Priority = _threadPriority;
                threads[i].Start();
            }

            GC.Collect();

            Stopwatch sw = Stopwatch.StartNew();

            _startEvent.Set();
            _endCountdown.Wait();

            return sw.Elapsed;
        }
    }

    public class ArrayElementForMonitor
    {
        public object Locker = new object();
    }

    public class ArrayElementForSpinLock
    {
        public SpinLock Locker = new SpinLock();
    }

    public class ArrayElementInterlocked
    {
        public int Element;
    }
} 
```

* * *

**附加测试 3\. 测试在单个线程中执行。线程访问锁的最高机会。**

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Linq;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace TestSimpleLocking
{
    class Program
    {
        static int _loopsCount = 100000000;

        static ProcessPriorityClass _processPriority = ProcessPriorityClass.RealTime;
        static ThreadPriority _threadPriority = ThreadPriority.Highest;

        static void Main(string[] args)
        {
            Process.GetCurrentProcess().PriorityClass = _processPriority;
            Thread.CurrentThread.Priority = _threadPriority;

            TimeSpan tsInterlocked = ExecuteInterlocked();
            TimeSpan tsSpinLock = ExecuteSpinLock();
            TimeSpan tsMonitor = ExecuteMonitor();

            Console.WriteLine("Test with interlocked: {0} ms\r\nTest with SpinLock: {1} ms\r\nTest with Monitor: {2} ms",
                tsInterlocked.TotalMilliseconds,
                tsSpinLock.TotalMilliseconds,
                tsMonitor.TotalMilliseconds);

            Console.ReadLine();
        }

        static TimeSpan ExecuteMonitor()
        {
            object locker = new object();
            int variable = 0;

            Stopwatch sw = Stopwatch.StartNew();
            bool lockTaken = false;

            for (int i = 0; i < _loopsCount; i++)
            {
                lockTaken = false;

                try
                {
                    Monitor.Enter(locker, ref lockTaken);

                    variable++;
                }
                finally
                {
                    if (lockTaken)
                    {
                        Monitor.Exit(locker);
                    }
                }
            }

            sw.Stop();

            Console.WriteLine(variable);

            return sw.Elapsed;
        }

        static TimeSpan ExecuteSpinLock()
        {
            SpinLock spinLock = new SpinLock();
            int variable = 0;

            Stopwatch sw = Stopwatch.StartNew();

            bool lockTaken = false;

            for (int i = 0; i < _loopsCount; i++)
            {
                lockTaken = false;

                try
                {
                    spinLock.Enter(ref lockTaken);

                    variable++;
                }
                finally
                {
                    if (lockTaken)
                    {
                        spinLock.Exit();
                    }
                }
            }

            sw.Stop();

            Console.WriteLine(variable);

            return sw.Elapsed;
        }

        static TimeSpan ExecuteInterlocked()
        {
            int variable = 0;

            Stopwatch sw = Stopwatch.StartNew();

            for (int i = 0; i < _loopsCount; i++)
            {
                Interlocked.Increment(ref variable);
            }

            sw.Stop();

            Console.WriteLine(variable);

            return sw.Elapsed;
        }
    }
} 
```

据我了解，第三次测试是最好的`SpinLock`选择。完全没有争议。单线程 - 顺序执行。为什么`SpinLock`还远远落后`Monitor`？谁能给我指出一些可以证明我`SpinLock`有用的代码（设备驱动程序开发除外）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:27:40.557

如果对资源的争用较少（即几乎总是成功地获得对资源的锁定），SpinLock 会非常快。参考：Joe Duffy 书籍和博客[http://www.bluebytesoftware.com/blog/](http://www.bluebytesoftware.com/blog/)

> 在每个测试中，对共享区域的访问都是循环执行的

_可能_意味着争用很高；（顺便说一句，你能发布一个完整的代码示例吗？这将有助于减少所需的“猜测”）。因此，SpinLock 很可能会旋转，然后等待 - 使其比直接等待的 Monitor 更糟糕。

编辑：在阅读了您已关闭的相关问题的详细信息后：我完全同意[Hans Passant 的回答](https://stackoverflow.com/a/14613190/863564)：

> 所以基本要求是锁的持有时间很短，这在你的情况下是正确的。并且有合理的几率可以获得锁。在您的情况下不是这样，锁受到不少于 24 个线程的激烈竞争。

盲目地使用 SpinLock，没有测量和/或至少不理解其设计背后的原理，是一种过早优化的情况，它可以快速运行到实际上更慢甚至不正确的代码：记住，一些同步结构保证公平和/ 或进度，其他没有；当大量访问是只读的时，有些工作得更好，有些在争用较低时工作得更好，......在这种情况下，公平可能是相关的。

只是另一个快速的、未经检验的假设：我更惊讶的`InterlockedIncrement`是它比 Monitor 更慢或相等。这让我想到了缓存一致性问题；毕竟，当写入争用很少时，Interlocked 也最有效，因为它是在目标变量上使用原子 CAS 操作来实现的。在像您这样的写入繁重的场景下，它将需要大量的重试，每次重试结束可能会在内核间总线上产生大量流量以保持缓存的一致性。使用 Monitor 可以以某种方式更好地“序列化”访问，从而减少内核间/进程间总线上的流量。但这一切都只是猜测:)

# wxwidgets - 使 Boost Python 不删除析构函数中的 C++ 对象

> ID：14642216
> 
> 赞同：2
> 
> 时间：2013-02-01T08:22:20.510
> 
> 标签：wxwidgets, boost-python

我正在使用 Boost Python 为 wxWidgets 的一个子集创建绑定。wxWidgets 中的窗口对象不应手动删除，因为它们自己处理删除操作：例如，当用户单击关闭按钮关闭顶层窗口时，它会自动删除自身。如果窗口*被*删除，事件处理程序等会发生奇怪的事情。

（详情：[http](http://docs.wxwidgets.org/2.8/wx_windowdeletionoverview.html) ://docs.wxwidgets.org/2.8/wx_windowdeletionoverview.html ）

然而，这会导致在 Python 中创建的窗口对象出现问题：在垃圾回收时，C++ 对象总是被删除！

有什么方法可以告诉 Boost Python 不要拥有它创建的 C++ 对象的所有权？可能是构造函数的调用策略之类的东西？

（另外，我有点担心如何处理从 C++ 中删除的对象。当关联的 C++ 对象被删除时，Python 对象会发生什么情况？Python 不会以任何方式得到通知。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T21:09:55.743

这可以通过[`boost::shared_ptr`](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_ptr.htm#deleter_constructor)Boost.Python 中的一些设置来完成。

`boost::shared_ptr`具有接受自定义删除器的构造函数。当`shared_ptr`的引用计数达到零时，`shared_ptr`将调用客户删除器，将先前托管的指针作为参数传递。这允许使用不同的释放策略，例如“无操作”或调用`wxWindow::Destroy()`.

```
class window {};
void no_op(window*) {};
boost::shared_ptr(new window(), &no_op); 
```

当向 Python 公开一个类时，Boost.Python 允许通过`HeldType`. 在这种情况下，`HeldType`将是`boost::shared_ptr`。这允许在 C++ 和 Python 之间发生正确的引用计数，并允许自定义解除分配策略。

```
boost::python::class_<window, boost::shared_ptr<window>, ...>("Window", ...); 
```

让这些透明地协同工作的诀窍是：

*   禁止 Boost.Python 创建默认初始化程序 ( `__init__`)。
*   显式提供一个`__init__`函数，该函数将调用一个返回`shared_ptr`带有自定义删除器的工厂函数。

* * *

这是一个模拟`window`类，旨在仅通过`destroy()`成员函数销毁。

```
class window
{
...
private:
  ~window();
public:
  void destroy();
}; 
```

定义了一个工厂函数，它将`window`使用自定义删除器创建一个引用计数对象。`destroy()`当引用计数达到零时 ，自定义删除器将在对象上调用。

```
boost::shared_ptr<window> create_window()
{
  return boost::shared_ptr<window>(
    new window(),
    boost::mem_fn(&window::destroy));
} 
```

最后，使用 Boost.Python 公开`window`类，但抑制默认初始化程序，并透明地将其替换为`create_window`工厂函数。

```
boost::python::class_<window, boost::shared_ptr<window>, 
                      boost::noncopyable>("Window", python::no_init)
  .def("__init__", python::make_constructor(&create_window)); 
```

* * *

这是一个完整的例子：

```
#include <iostream>
#include <boost/mem_fn.hpp>
#include <boost/python.hpp>
#include <boost/shared_ptr.hpp>

/// @brief Mockup window class.
class window
{
public:
  window(unsigned int id)
    : id_(id)
  {
    std::cout << "window::window() " << id_ << std::endl;
  }
  void action() { std::cout << "window::action() " << id_ << std::endl; }
  void destroy()
  {
    std::cout << "window::destroy() " << id_ << std::endl;
    delete this;
  }
private:
  ~window() { std::cout << "window::~window() " << id_ << std::endl; }
private:
  unsigned int id_;
};

/// @brief Factory function that will create reference counted window
///        objects, that will call window::destroy() when the reference
///        count reaches zero.
boost::shared_ptr<window> create_window(unsigned int id)
{
  return boost::shared_ptr<window>(
    new window(id),
    boost::mem_fn(&window::destroy));
}

BOOST_PYTHON_MODULE(example) {
  namespace python = boost::python;
  // Expose window, that will be managed by shared_ptr, and transparently
  // constructs the window via a factory function to allow for a custom
  // deleter.
  python::class_<window, boost::shared_ptr<window>, 
                 boost::noncopyable>("Window", python::no_init)
    .def("__init__", python::make_constructor(&create_window))
    .def("action", &window::action)
    ;
} 
```

及其用法：

```
>>> from example import Window
>>> w1 = Window(1)
window::window() 1
>>> w2 = Window(2)
window::window() 2
>>> w3 = Window(3)
window::window() 3
>>> del w2
window::destroy() 2
window::~window() 2
>>> w3 = None
window::destroy() 3
window::~window() 3
>>> w = w1
>>> del w1
>>> w.action()
window::action() 1
>>> w = None
window::destroy() 1
window::~window() 1 
```

请注意 Python 如何仅在 Python 不再引用该实例时才通知 C++ 删除该对象。因此，在这种情况下，Python 不会尝试与已删除的对象进行交互。希望这可以减轻在 C++ 中删除对象时表达的担忧。

如果在某些情况下 C++ 将删除 Python 中仍然处于活动状态的对象，则考虑使用[不透明指针](http://en.wikipedia.org/wiki/Opaque_pointer)来分隔实现类和句柄类。句柄类可以在转发调用之前检查关联的实现实例是否已被删除，从而允许向 Python 抛出异常。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-30T10:37:52.290

实际上，使用 auto_ptr 有一个更简单的解决方案，甚至在[Boost Python FAQ](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/v2/faq.html#ownership)中。[Python Wiki](http://wiki.python.org/moin/boost.python/HowTo#ownership_of_C.2B-.2B-_object)上有更多详细信息。到目前为止，它工作得很好。

# c# - C# Uri AppDomain.CurrentDomain.BaseDirectory 相对路径

> ID：14642219
> 
> 赞同：3
> 
> 时间：2013-02-01T08:22:33.170
> 
> 标签：c#

如何将 AppDomain.CurrentDomain.BaseDirectory 的相对路径放入 Uri。

我需要从 AppDomain.CurrentDomain.BaseDirectory 升级“cd ......”，然后再向下移动到其他文件夹。

你知道如何？

提前致谢

问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T09:09:21.197

如果您只想增加一个或多个文件夹然后向下，您可以使用这样的东西。

要获得两个文件夹的文件：

```
AppDomain.CurrentDomain.BaseDirectory+"..\\..\\Program.cs" 
```

要获取文件，上下两个文件夹：

```
AppDomain.CurrentDomain.BaseDirectory + "..\\..\\Properties\\AssemblyInfo.cs" 
```

如果您只想要路径，您可以执行以下操作：

```
Path.GetFullPath(AppDomain.CurrentDomain.BaseDirectory + "..\\..\\Properties\\"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:40:41.343

我最终使用了以下内容：

System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory,@"......\www\");

# protobuf-net - 自定义模型的部分序列化

> ID：14642223
> 
> 赞同：2
> 
> 时间：2013-02-01T08:22:39.467
> 
> 标签：protobuf-net

为什么部分序列化的 ShouldSerialize 模式在自定义 RuntimeTypeModel 上不起作用？这项工作是否符合设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:19:23.233

我猜你正在传递`false`给`applyDefaultBehaviour`，即

```
var type = model.Add(typeof(SomeType), applyDefaultBehaviour: false); 
```

在这种情况下，这个问题变成“为什么，当我告诉它不应用任何内置模式时，它不应用任何内置模式？”。

如果您选择完全手动配置模型，那么*您必须完全手动配置模型*。在这种情况下，类似于：

```
type.AddField(1, "Foo").SetSpecified(
    typeof(SomeType).GetMethod("FooSpecified"), null); 
```

（第一个参数是“get”方法，在序列化时使用；第二个参数是“set”方法，在反序列化时使用）

# java - JPA 2：@MapsId 映射中的隐式列引用失败

> ID：14642227
> 
> 赞同：2
> 
> 时间：2013-02-01T08:22:59.230
> 
> 标签：java, hibernate, annotations, jpa-2.0

我尝试使用多个映射属性。但是当我尝试运行代码时，代码会产生异常，这个例子是基于 Pro JPA 2，第 10 章的书。有以下代码：

**部门ID.java**

```
public class DeptId implements Serializable{

private static final long serialVersionUID = 5177373337405448966L;
private int number;
private String country;
    ..................... 
```

**项目ID.java**

```
public class ProjectId implements Serializable{

private static final long serialVersionUID = 4239980609226293562L;
private String name;
private DeptId deptId;
..................... 
```

**部门.java**

```
@Entity
@IdClass(DeptId.class)
public class Department implements Serializable {

private static final long serialVersionUID = 1L;
@Id
private int number;
@Id
private String country;
private String name;

@OneToMany(mappedBy="deptId")
List<Project> projects;
    ...................... 
```

**项目.java**

```
@Entity
@IdClass(ProjectId.class)
public class Project implements Serializable {

private static final long serialVersionUID = 1L;
@Id
private String name;

@Id
@ManyToOne
@JoinColumn(name="dept_id")
private Department deptId;
    ........................ 
```

此代码将生成以下异常

```
Caused by: org.hibernate.AnnotationException: Implicit column reference in the @MapsId mapping fails, try to use explicit referenceColumnNames: example.domain.Department 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:13:30.580

DeptID 有两个主键，所以你不能有类似`@JoinColumn(name="dept_id")`. 相反，使用这个：

```
@JoinColumns({
    @JoinColumn(name="dept_number", referencedColumnName="number"),
    @JoinColumn(name="dept_country", referencedColumnName="country")
}) 
```

如果这仍然不起作用：在主键类（DeptID 和 ProjectId）中尝试切换到公共或保护私有属性。还要检查他们是否有一个没有参数的构造函数并实现了 equals 和 hashcode 方法。

# xpath - 流式 XPath 能提高多少性能

> ID：14642228
> 
> 赞同：5
> 
> 时间：2013-02-01T08:23:07.913
> 
> 标签：xpath, wso2, wso2esb, axiom

只需阅读文章“ [WSO2 ESB 的流式 XPath 解析器](http://wso2.org/library/articles/2013/01/streaming-xpath-parser-wso2-esb)”。我想知道与以前的实现相比，此实现的性能提高了多少。

有没有可用的数字？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T10:31:32.233

我认为您必须针对您的特定用例进行测量（并且您必须决定要比较什么：不同的 XPath 实现的性能可能相差 100 倍）。使用流技术之类的技术通常会比其他查询更有利于某些查询；好处也很大程度上取决于文档大小。这还取决于您是在寻找节省时间还是节省内存。

警告：我对这个具体实现一无所知，但这是一篇有趣的文章。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-02T01:40:01.530

Stream XPath 的目标，其中 AXIOM 不会消耗不需要的部分蒸汽，从而减少将 XML 文档作为 Java 对象模型打开所需的内存和时间。基本上我们观察到它会提高性能所以如果你仔细分析例如，Performance round 6.5 文章 [2] 中的 CBR 场景统计数据清楚地表明，与以前的 ESB 版本相比，它的性能翻了一番。

[1] [http://wso2.org/library/articles/2013/01/streaming-xpath-parser-wso2-esb](http://wso2.org/library/articles/2013/01/streaming-xpath-parser-wso2-esb) [2] [http://wso2.org/library/articles/2013/01/esb-performance -65](http://wso2.org/library/articles/2013/01/esb-performance-65)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T13:44:44.553

[这](http://wso2.org/library/articles/2013/01/esb-performance-65)是对新发布的 WSO2 ESB 4.6.0 进行的最新一轮性能测试的结果，该版本使用流式 XPath 实现和更多改进。这将 ESB 4.6.0 的性能与其先前版本以及其他一些 ESB 进行了比较。你会发现这很有趣。最新的 ESB 包可[在此处](http://wso2.com/products/enterprise-service-bus/)获得。

# php - 无法访问类中包含的文件功能

> ID：14642230
> 
> 赞同：-1
> 
> 时间：2013-02-01T08:23:20.197
> 
> 标签：php, class

当我尝试使用此代码时，我遇到了一个错误。

我的代码：

```
require_once 'functions/general.functions.inc';

class AccessingNodes {

    function getNodeId($parent_id){
        $node_id = $this->getNodeIdByParentId($parent_id); // This function is defined in general.functions.inc file
        return $node_id;
    } 

} 
```

我无法访问该包含文件的功能。它给了我一个错误。

错误 ：

> 对未定义方法 AccessingNodes::getNodeIdByParentId 的致命错误调用

general.functions.inc 是由某个人定义的。我不知道这里缺少什么。我得到了我之前在 SO 中的帖子的答案。在那里，据说我们可以将 .inc 文件的函数视为文件自己的函数。所以我使用`$this`运算符调用了该函数。

任何人都请指导我克服这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:28:56.577

.inc 文件函数可以被视为文件自己的函数，但不能被视为类自己的函数。

删除 $this 并且代码应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T08:31:56.950

你对`$this`. `$this`是对调用对象的引用。因此，除非有一个类可以扩展您的类 -`AccessingNodes`并且具有方法`getNodeIdByParentId`并且您的方法`getNodeId`是从包含脚本中提到的类的实例调用的，否则您将无法调用它。（**注意：**这是一个糟糕的设计，因为父类不应该知道任何关于子类的事情）

所以看看那个文件里面有什么。

1.  如果只定义了函数，请像函数一样使用它。例如

    ```
    function getParentIdByParentId($id) { }

    class AccessingNodes {

         function getNodeId($parent_id){
              $node_id = getNodeIdByParentId($parent_id); // This function is defined in general.functions.inc file
              return $node_id;
         } 
     } 
    ```

2.  如果它是某个类的静态方法：

    ```
     class MyClass {
        public static function getNodeIdByParentId($id) {}
     }

     class AccessingNodes {

        function getNodeId($parent_id){
            $node_id = MyClass::getNodeIdByParentId($parent_id); // This function is defined in general.functions.inc file
            return $node_id;
        } 
    } 
    ```

3.  如果有一个类有方法`getNodeIdByParentId`创建它的实例并调用该方法：

    ```
    class MyClass {
        public function getNodeIdByParentId($id) {}
    }

    class AccessingNodes {

        function getNodeId($parent_id){
            $obj = new MyClass;
            $node_id = $obj->getNodeIdByParentId($parent_id); // This function is defined in general.functions.inc file
            return $node_id;
        } 
    } 
    ```

ps 有关更多信息，请阅读[手册](http://php.net/manual/en/language.oop5.php)并查看[OOP 概念](https://www.google.com/search?q=OOP+practices&oq=OOP+practices&aqs=chrome.0.57j0l2j62l3.4650&sourceid=chrome&ie=UTF-8#hl=en&sugexp=les%3B&gs_rn=2&gs_ri=serp&tok=61gtiZbHWAA_pn064wIpNA&pq=oop%20practices&cp=5&gs_id=4&xhr=t&q=OOP%20concepts&es_nrs=true&pf=p&tbo=d&sclient=psy-ab&oq=OOP+c&gs_l=&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&bvm=bv.41867550,d.Yms&fp=dd3b863c0d48009b&biw=1440&bih=775)

# eclipse - Eclipse 未启动 GWT 安装

> ID：14642231
> 
> 赞同：0
> 
> 时间：2013-02-01T08:23:25.557
> 
> 标签：eclipse, gwt

我在 RHEL5 上运行 Eclipse 3.7 (Indigo)。[我从https://developers.google.com/eclipse/docs/install-eclipse-3.7](https://developers.google.com/eclipse/docs/install-eclipse-3.7)安装了 GWT 插件，它要求我重新启动。但它并没有自动重启，所以我尝试从命令提示符启动它。但它根本没有启动，给出如下消息：

**平台关闭后发现作业仍在运行。作业应由在关机期间安排它们的插件取消：org.eclipse.ui.internal.ide.IDEWorkbenchActivityHelper$4**

因此，我尝试按照[Eclipse(Indigo) launch failed after google app engine plugin install](https://stackoverflow.com/questions/11546283/eclipseindigo-launch-failed-after-google-app-engine-plugin-install)的说明进行操作，这又指的是[this](http://expertdevelopers.blogspot.com/2011/07/eclipse-troubleshooting.html)。但即使我删除了该`.log`文件，它仍然没有启动并抛出相同的错误。谁能告诉我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:10:16.290

我们成功地将 Juno Eclipse 与 GWT 2.5 和 GPE 一起使用 -

朱诺 - SR 1 [http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)

GPE - [http://dl.google.com/eclipse/plugin/4.2](http://dl.google.com/eclipse/plugin/4.2)

参考 - [https://developers.google.com/eclipse/docs/getting_started](https://developers.google.com/eclipse/docs/getting_started)

# php - 使用 PHP 在 Javascript 谷歌地图中填充动态值

> ID：14642232
> 
> 赞同：-2
> 
> 时间：2013-02-01T08:23:27.163
> 
> 标签：php, javascript, google-maps, google-maps-api-3, get

我是一个新的蜜蜂，他对 Javascript 有一定的了解。我有一个脚本，可以使用给定的经度和纬度值加载谷歌地图。见下文：

**我的Javascript：**

```
 function load()
{
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(54.789397, -2.255003),
    zoom: 13,
    mapTypeId: 'roadmap'
  });
  ..........................
  .........................
   .........................
} 
```

我正在使用 PHP，并希望使用 URL 中的 GET 方法动态填充经度和纬度的值。我怎样才能实现这一点？如何用我从 $_GET 变量中获得的值替换 54.789397 和 -2.255003 值？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:51:29.897

`center: new google.maps.LatLng(<?php echo $_GET['lat'] ?>, <?php echo $_GET['lng'] ?>)`

应该让你上路。

# hbase - 如何在 HBase 0.96.0+ 中使用 avro？

> ID：14642236
> 
> 赞同：4
> 
> 时间：2013-02-01T08:23:36.897
> 
> 标签：hbase, avro

我的项目正在与使用 Avro 的其他项目集成。该项目开始使用 HBase，使用一些 HBase Avro API 会很有用，但根据[HBASE-6653](https://issues.apache.org/jira/browse/HBASE-6553)，avro 网关支持已在 HBase 0.96.0 中删除。是否有可能在开源领域的任何地方找到这个网关？我正在研究 github 和 *.apache.org，但没有发现任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:08:20.140

我发现使用[kiji](http://www.kiji.org/)在 HBase 中序列化 Avro 是可以接受的。此外，kiji 还有许多有用的工具，例如，很棒的模式（布局）管理工具。

# wso2 - WSO2 数据出版商

> ID：14642244
> 
> 赞同：1
> 
> 时间：2013-02-01T08:24:28.983
> 
> 标签：wso2, cluster-computing, thrift, complex-event-processing, wso2cep

我们有一个 2 节点 WSO2 CEP 集群。

我们想通过 thrift 将事件发送到 CEP 集群。我们在客户端使用 Wso2 数据桥 - DataPublisher。虽然我们能够通过 thrift 将事件发送到一个 CEP，但不确定我们如何将事件发送到集群。

我们尝试使用逗号分隔的 thrift URL，但 DataPublisher 因 MalformedURLException 而失败？

有什么建议么 ？

谢谢拉吉夫帕蒂尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:54:49.767

您已经使用了纯**DataPublisher**。为了使用逗号分隔的 URL，您需要使用**LoadBalancingDataPublisher** ，它是启用负载平衡的**DataPublisher**的包装版本。

# c++ - 在 C++ 套接字连接中发送的奇怪行为

> ID：14642245
> 
> 赞同：0
> 
> 时间：2013-02-01T08:24:36.610
> 
> 标签：c++, sockets, curl, tcp

我正在 c++ 下试验 tcp 套接字连接。我想通过网络发送 std::map 对象的序列化 (JSON) 形式。我发现在发送了一定数量的数据包（这取决于数据包的大小）之后，就无法再发送了。我已经尝试了用于套接字连接的 curl lib 和标准 POSIX API：

*   在 POSIX API 中发送：在发送约 100 个数据包后开始阻塞
*   curl: curl_easy_send 似乎执行了，但是服务器没有收到新的数据包

在通信期间使用相同的套接字连接。我想整个事情与缓冲区大小有关，但是（1）我已经增加了它并且没有看到任何显着的影响（2）我希望之后可以再次发送如果缓冲区当前已满，则为给定的时间。在这种情况下，也许我错过了一些重要但愚蠢的选项或信息。所以我的问题是：服务器的配置是错误的还是我没有以正确的方式使用 API？

接收方：

```
ListenerThread::ListenerThread() {
    curl = curl_easy_init();

    if (curl != 0) {
        curl_easy_setopt(curl, CURLOPT_URL, "...");
        curl_easy_setopt(curl, CURLOPT_CONNECT_ONLY, 1L);
        res = curl_easy_perform(curl);
        res = curl_easy_getinfo(curl, CURLINFO_LASTSOCKET, &sockfd);

        if (res != 0) {
            printf("Error: %s\n", curl_easy_strerror(res));
        }
    }
}
...
void ListenerThread::run() {
    while (true) {
        char buf[2048];

        wait_on_socket(sockfd, 1, 60000L);
        res = curl_easy_recv(curl, buf, 2048, &iolen);

        if (CURLE_OK != res) {
            break;
        }

        nread = (curl_off_t) iolen;

        printf("Received %" CURL_FORMAT_CURL_OFF_T " bytes.\n", nread);
        printf("Buffer: %s\n", buf);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:36:26.060

如果对等方没有读取您正在发送的数据，则可能会发生这种情况。

数据包进入另一端套接字的接收缓冲区，并将 ACK 发送回您，因此一些数据得到确认并从套接字发送缓冲区中丢弃。但是，如果对等方没有从其接收缓冲区中提取数据，它最终会变满，并且您无法发送任何数据，直到那里的某个位置被释放。

# c# - 保存的 ZIP 文件损坏（从 Android 应用程序到 IIS 服务器）

> ID：14642246
> 
> 赞同：1
> 
> 时间：2013-02-01T08:24:45.643
> 
> 标签：c#, java, android, asp.net, http

在[尝试将 XML](https://stackoverflow.com/questions/14620007/saving-a-file-posted-using-http-post)文件从我的客户端应用程序（在 Android 上）发送到服务器端（IIS 7）之后。我没有得到 XML 文件的文件名，而只是得到了内容。
现在我意识到，简单地传输裸 XML 文件会非常繁重（当我将几乎所有应用程序的数据同步到服务器之后）。

- 现在我正在追求从我的客户端应用程序发送一个压缩文件到服务器端。
- XML 文件被完美地压缩到原来大小的一半以下。文件正在使用`HTTP POST`直接使用`FileEntity`而**不是**使用的方法发送`MultiPart`（这可能是一个问题）。

**更新 2：**添加了我自己的答案（效果更好：D）。

**更新：**添加了客户端代码。

**问题：**
- zip 文件保存在服务器端，但是当我打开它时，winrar/7zip 给了我一个错误提示`unexpected end of archive.`。

我提到了一个[几乎类似的问题](http://forums.devshed.com/net-development-87/httpwebresponse-save-zip-file-locally-but-file-is-corrupted-when-unzipped-502499.html)，但我在`.NET`开发方面也处于`C#`劣势:(所以不能真正使用确切的代码（缺少、未初始化的变量等）。此外，线程就像 4 年老了，我真的不希望有人会在那里做出回应。

**我现有的服务器端代码：**

```
string fileName = "D:\\newZIPfile.zip";
        Stream myStream = Request.InputStream;
        byte[] message = new byte[myStream.Length];
        myStream.Read(message, 0, (int)myStream.Length);
        string data = System.Text.Encoding.UTF8.GetString(message);

        using (FileStream fs = new FileStream(fileName, FileMode.Create))
        {
            using (StreamWriter writer = new StreamWriter(fs, System.Text.Encoding.UTF8))
            {
                writer.Write(data);
            }
        } 
```

**我的客户端代码：**

```
 File file2send = new File(newzipfile);

                String urlString = "http://192.168.1.189/prodataupload/Default.aspx";       // FOR TEST
                HttpParams httpParams = new BasicHttpParams();
                int some_reasonable_timeout = (int) (30 * DateUtils.SECOND_IN_MILLIS);

                HttpConnectionParams.setConnectionTimeout(httpParams, some_reasonable_timeout);

                HttpClient client = new DefaultHttpClient(httpParams);
                HttpPost post = new HttpPost(urlString);

                //System.out.println("SYNC'ing USING METHOD: " + post.getMethod().toString());
             try {
                   //OLD FILE-ENTITY MECHANISM >
                    FileEntity fEntity = new FileEntity(file2send, "application/zip");

                    //NEW (v1.5) INPUTSTREAM-ENTITY MECHANISM >
                    //InputStreamEntity fEntity = new InputStreamEntity(new FileInputStream(newzipfile), -1);
                   // fEntity.setContentType("application/zip");
                    post.setEntity(fEntity);

                    HttpResponse response = client.execute(post);
                    resEntity = response.getEntity();
                    res_code = response.getStatusLine().getStatusCode();            
                    final String response_str = EntityUtils.toString(resEntity);
                    if (resEntity != null) {        
                        Log.i("RESPONSE",response_str);
            //... 
```

我该如何解决这个问题？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:14:17.267

所以这个问题一直困扰着我到目前为止所经历的许多论坛/线程中的很多人。

这是我所做的：
- 将客户端更改为具有`binary/octet-stream`内容类型。

- 将服务器端代码更改为： **更新：**

```
if(Request.InputStream.Length < 32768) {
        Request.ContentType = "binary/octet-stream";
        Stream myStream = Request.InputStream;
        string fName = Request.Params["CLIENTFILENAME"];
        //string fName = Request.Params.GetValues("zipFileName");

        int iContentLengthCounter = 0;
        int maxlength = (int) myStream.Length;
        byte[] bFileWriteData = new byte[maxlength];
        string fileName = "D:\\"+ fName +".zip";

        //FileStream oFileStream = new FileStream();

        while (iContentLengthCounter < maxlength)
       {
           iContentLengthCounter += Request.InputStream.Read(bFileWriteData, iContentLengthCounter, (maxlength - iContentLengthCounter));
       }
        System.IO.FileStream oFileStream = new System.IO.FileStream(fileName, System.IO.FileMode.Create, System.IO.FileAccess.Write);
       oFileStream.Write(bFileWriteData, 0, bFileWriteData.Length);

        oFileStream.Close();
       Request.InputStream.Close();
    }
    else
    {
    } 
```

基本上..我没有收集数据。到它的长度。（答案需要编辑..稍后完成）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:14:22.433

我会告诉问题是由于将代码中的 ZIP 文件（二进制文件）转换为 UTF-8 流所致。

尝试将服务器端代码替换为以下内容：

```
string fileName = "D:\\newZIPfile.zip";

using (FileStream fs = new FileStream(fileName, FileMode.Create))
{
    byte[] buffer = new byte[32768];
    int read;
    while ((read = Request.InputStream.Read(buffer, 0, buffer.Length)) > 0)
    {
        fs.Write (buffer, 0, read);
    }
} 
```

这会将接收到的输入流写入 ZIP 文件。

要同时接收客户端 ZIP-Filename，一种可能的方法是更改​​行

```
String urlString = "http://192.168.1.189/prodataupload/Default.aspx"; 
```

类似于：

```
String urlString = "http://192.168.1.189/prodataupload/Default.aspx?CLIENTFILENAME=" + 
    urlEncodedFilename; 
```

因此，您可以通过使用`Request.Params`属性来访问参数。

**警告**：不要相信客户端发送的文件名（有人可以操纵它！）。对参数进行严格的卫生/验证！

# iphone - UITextView 不与 ARC 一起发布

> ID：14642252
> 
> 赞同：1
> 
> 时间：2013-02-01T08:25:31.043
> 
> 标签：iphone, ios, memory, automatic-ref-counting, uitextview

我还有一个假设性问题。

我创建功能：

```
-(IBAction)text:(id)sender{
    UITextView * textview = [[UITextView alloc]initWithFrame:CGRectZero];
} 
```

并且因为我使用 ARC 我希望当函数超出范围时该对象会被释放。但是使用 Instrument 我检测到内存没有被释放。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:51:54.053

无论是否为 nil，ARC 都会自动释放/释放 textView

* * *

将其全部包装在 @autoreleasepool 中即可！

```
-(IBAction)text:(id)sender{
   @autoreleasepool {
        UITextView * textview = [[UITextView alloc]initWithFrame:CGRectZero];
    }
} 
```

* * *

As for the **initial grow** when the textview is used the first time: the cocoa touch text system is allocated. (The underlying 'engine' that all textviews share)

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-02-01T08:33:39.457

如果你想真正释放它，试试这个。

```
-(IBAction)text:(id)sender{
    UITextView * textview = [[UITextView alloc]initWithFrame:CGRectZero];
    textview = nil;
} 
```

ARC 只是自动添加发布代码，它不像其他语言那样具有垃圾收集器。只要你给一个对象 nil ，它就会立即被释放。否则，当添加此对象的“自动释放池”被刷新时，它会被释放。（虽然我不确定最后一点。）。

# qt - 根据 ItemDataRole 属性设置 Qt 模型/视图项目的样式

> ID：14642254
> 
> 赞同：2
> 
> 时间：2013-02-01T08:25:45.143
> 
> 标签：qt, stylesheet, model-view

我有一个`QTreeView`来自我自己模型的项目（`QAbstractItemModel`派生的）。现在我想为项目设置样式（在 上使用样式表`QTreeView`），以便根据不同的属性，它们将具有不同的背景。

此外，这个问题似乎适用于任何模型/视图容器。不只是`QTreeView`。

* * *

例如，做交替背景很容易。`alternatingRowColors`就`QTreeView`必须`true`。然后在样式表中，您可以使用`:alternate`伪选择器来更改备用项目的属性，以便：

```
QTreeView::item {
  background: green;
}

QTreeView::item:alternate {
  background: blue;
} 
```

* * *

做选定的项目同样简单。事实上，做任何由 Qt 的伪选择器处理的事情都很容易。

但是那些不是伪选择器的属性呢？特别是如何根据关联的值选择样式`ItemDataRole`（哪些接缝是在模型中存储数据的唯一合理通用的方法）？

*请注意，有一个技巧。例如，如果您不使用检查状态，您可能会“重用”该状态以映射到您自己的东西，然后您有一个伪选择器......但这只是一种解决方法，甚至不是一般的解决方法。*

* * *

`QTreeWidget`似乎您可以通过为您想要添加的任何项目创建一个专用的派生类`QWidget`。`Q_PROPERTY`然后，您可以在样式表中按名称访问该属性。

例如，参见[Qt Center 上的“使用带有样式表的自定义 Q_PROPERTY”问题](http://www.qtcentre.org/threads/30095-Using-custom-Q_PROPERTY-with-Stylesheet)和[“使用动态属性时触发小部件的更新”。请注意 Qt 样式表示例的末尾](http://qt-project.org/doc/qt-4.7/stylesheet-examples.html)。

但是这些`*View`类的项目没有任何`QWidget`s 甚至`QObject`s （或者至少不是公共可访问的）。

* * *

也有可能提供自己的`QAbstractItemDelegate`，可能是从`QStyledItemDelegate`. 但这使得样式表交互变得更加困难。

有了像财产这样的简单员工，`background-color`这似乎是可行的。但是，您将如何模拟以及复杂集合中的许多其他样式`border-image`？`padding`

更不用说一旦你编写了一个项目委托，代码就会被冻结。如果`Qt`更改呈现样式表的方式（以某种方式改进它），您将不会从中受益……这也会使逻辑/表示分离变得更加困难。现在你需要一个程序员来设置这些项目的样式，而不仅仅是一个支持 CSS 的图形专家......

* * *

那么有没有办法根据模型提供的属性/数据在样式表中进行子类化？

# php - 带有重命名功能的wordpress codex上传文件？

> ID：14642259
> 
> 赞同：0
> 
> 时间：2013-02-01T08:26:18.187
> 
> 标签：php, wordpress

我需要知道是否有任何其他功能可以做到这一点。

我试图创建一个将照片上传到 wp_handle_upload() 的函数

现在我试图搜索的是那个。是否有可能在使用此功能时照片会重命名。

```
if ( ! function_exists( 'wp_handle_upload' ) ) require_once( ABSPATH . 'wp-admin/includes/file.php' );
$uploadphoto =  $_FILES['image'];
$uploadphoto_overrides = array( 'test_form' => false );
$movephoto = wp_handle_upload( $uploadphoto, $uploadphoto_overrides ); 
```

我试图做这样的事情

```
$uploadphoto = '123changename' . $_FILES['image']; 
```

我只有错误。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T07:36:12.750

用这个： `$uploadphoto = time() . '_my_file_' . $_FILES['image'];`

`$_FILES['image']`数组在哪里。如果要存储名称，请使用：

`$uploadphoto_name = time() . '_my_file_' . $_FILES['image'][0];`

# javascript - Javascript / Jquery - 多次更改（函数（）

> ID：14642260
> 
> 赞同：7
> 
> 时间：2013-02-01T08:26:22.537
> 
> 标签：javascript, jquery

我对 Jquery / JS 有点陌生，经过一点帮助。我意识到希望有更好的方法来做到这一点，任何帮助将不胜感激。

我正在构建一个可以计算总数的表格。那是：

'成本' x '(1 + 百分比(%))' = '总成本'

我让它工作得很好，虽然我想这样做，以便如果我更改“**百分比**”字段或“**成本**”字段，那么**总金额**会更新。目前只有当你更新'**成本**'时才会**更新总价**。

希望这是有道理的。代码如下。

```
$(document).ready(function(){

$("#cost").change(function() { 
var findprofit = parseFloat($("#cost").val());
var profit = (findprofit*.01)
var margin = parseFloat($("#percentage").val());
var total = profit*margin;
$(".profit_1_1").html(total);
var totalprofit = (total + findprofit);
$("#total").val(totalprofit);
});

<input type="text" name="cost" id="cost"  />
<input type="text" name="percentage" id="cost" percentage />
<input type="text" name="total" id="total" readonly /> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-01T08:30:26.227

```
$("#cost, #percent").change(function() { 
    ...
}); 
```

应该做的伎俩。

编辑：你需要给你的百分比输入一个“百分比”的ID。两个元素可能没有相同的 ID。

```
<input type="text" name="cost" id="cost"  />
<input type="text" name="percentage" id="percent" percentage />
<input type="text" name="total" id="total" readonly /> 
```

另外我不确定输入末尾的“百分比”是多少。百分比不是有效属性。

# java - 尝试读取文件时出现 java.io.FileNotFoundException

> ID：14642264
> 
> 赞同：2
> 
> 时间：2013-02-01T08:26:37.060
> 
> 标签：java, swing, jfilechooser, filenotfoundexception, opencsv

我正在编写一个小应用程序，它读取 csv 文件并将内容显示到 JList 中。

我目前的问题是`new FileReader(file)`代码一直给我一个`java.io.FileNotFoundException`错误，我不太清楚为什么。

```
loadFile.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent actionEvent)
            {
                JFileChooser fileChooser = new JFileChooser();
                fileChooser.setCurrentDirectory(new File("~/"));

                if (fileChooser.showOpenDialog(instance) == JFileChooser.APPROVE_OPTION)
                {
                    File file = fileChooser.getSelectedFile();
                    CSVReader reader = new CSVReader(new FileReader(file.getAbsolutePath()));
                    fileLocation.setText(file.getAbsolutePath());

                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T08:29:49.807

```
new File("~/") 
```

`~`是主目录的 Shell 快捷方式。使用绝对路径，例如

```
new File("/home/myself/") 
```

正如@pickypg 所指出的，如果传递的目录无效，则[JFileChooser.setCurrentDirectory()](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html#setCurrentDirectory%28java.io.File%29)将用户的主目录设置为默认目录。因此，即使`File()`不解释`~`为 Shell ，也会`JFileChooser`从用户的主目录开始 - 但对于任何不存在的目录都是如此，例如

```
new File("/Windows")   // JFileChooser would start in "\Windows"
new File("/xWindows")   // JFileChooser would start in the user's home directory 
```

正如文档所述，用户的主目录是系统特定的，但在 MS Windows 上，它通常是“我的文档”文件夹。

但是，即使使用“~/”这样的不存在路径，也会`JFileChooser.getSelectedFile()`返回正确的路径，因此`FileReader()`不应抛出`FileNotFoundException`.

* * *

根据评论，事实证明问题不是运行时异常，而是未捕获异常的编译时错误。在构造函数周围添加一个`try{}catch{}`块`FileReader()`：

```
try {
    CSVReader reader = new CSVReader(new FileReader(file.getAbsolutePath()));
}catch(FileNotFoundException fnfe) {
    // handle exception, e.g. show error message
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:30:51.280

如果问题实际上出在那条线上，而不是 Andreas 指出的地方，那么`FileReader`直接用 the构造`file`而不是给它路径：

```
new FileReader(file) 
```

# ios - Quartz core : 改变整个图层的像素颜色

> ID：14642270
> 
> 赞同：0
> 
> 时间：2013-02-01T08:26:54.880
> 
> 标签：ios, quartz-core

我正在开发一个在图层上绘画的应用程序。这是一个示例代码，显示了我的绘画方式。

```
UIImageView * currentLayer = // getting the right layer...
UIGraphicsBeginImageContext(currentLayer.frame.size);
[currentLayer.image drawInRect:currentLayer.bounds];
// Painting...
UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
currentLayer.image = img;
UIGraphicsEndImageContext(); 
```

所以我有一个图像（1024x768），它有两种像素：
- 绘制的（每个颜色相同）
- 透明的

知道所有像素具有相同颜色的情况下，更改整个图层不透明像素颜色的最佳方法是什么？

我必须一个一个地重绘每个不透明的像素吗？

**编辑 ：**

正如 David Rönnqvist 所建议的那样，尝试用我的图层掩盖填充图像。

我想改变颜色的图层是`self.image`：

```
// Creating image full of color
CGRect imRect = self.bounds;
UIGraphicsBeginImageContext(imRect.size);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetFillColorWithColor(context, [color CGColor]);
CGContextFillRect(context, imRect);
UIImage * fill = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

// masking the image
CGImageRef maskRef = [self.image CGImage];
CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                    CGImageGetHeight(maskRef),
                                    CGImageGetBitsPerComponent(maskRef),
                                    CGImageGetBitsPerPixel(maskRef),
                                    CGImageGetBytesPerRow(maskRef),
                                    CGImageGetDataProvider(maskRef), NULL, false);

CGImageRef masked = CGImageCreateWithMask([fill CGImage], mask);
self.image = [UIImage imageWithCGImage:masked]; 
```

几乎 ！它掩盖了我图层的确切对面：只绘制了 alpha 像素......

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:48:05.800

事实上，这很简单。

UIImage 有一个方法：`drawInRect`它只绘制不透明的像素。

这是代码（从 调用`UIImageView`）：

```
CGRect rect = self.bounds;
UIGraphicsBeginImageContext(rect.size);
[self.image drawInRect:rect];
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetBlendMode(context, kCGBlendModeSourceIn);
CGContextSetFillColorWithColor(context, newColor.CGColor);
CGContextFillRect(context, rect);
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

非常感谢[iPhone - 你如何为图像着色？](https://stackoverflow.com/questions/1223340/iphone-how-do-you-color-an-image)

# android - 如何使用phonegap 2.2.0，jquery 1.8.3上传从相机拍摄的照片

> ID：14642274
> 
> 赞同：2
> 
> 时间：2013-02-01T08:27:21.530
> 
> 标签：android, jquery, cordova, mobile

如何使用phonegap，jquery上传从相机拍摄的照片

我指 [的是 AJAX 文件上传到 WCF 服务的工作示例](https://stackoverflow.com/questions/13661105/working-example-of-ajax-file-upload-to-wcf-service)

但是ajax调用总是进入错误函数。

# node.js - NPM UPDATE 模块版本不匹配问题

> ID：14642276
> 
> 赞同：0
> 
> 时间：2013-02-01T08:27:30.697
> 
> 标签：node.js, npm

我在一个项目中使用了 session-mongoose(0.0.2) 模块。这是在节点版本 v0.6.7 之上运行的。最近有一些变化，session-mongoose 模块尝试在对我的根 package.json 使用命令“npm update”时拉出与节点版本（v0.6.19）兼容的模块 mongoose。

由于 session-mongoose 及其依赖项是通过“npm update”命令从 npm 注册表动态提取的，我无法控制这些。

现在的问题是系统停止在新部署的生产中工作。有没有办法在不更新节点版本的情况下解决这个问题？

错误日志是，

```
npm ERR! error rolling back mongoose@3.5.5 Error: UNKNOWN, unknown error 'C:\Pro
gram Files\nodejs\node_builds\server\node_modules\session-mong
oose\node_modules\mongeese\node_modules\mongoose'

npm ERR! Unsupported
npm ERR! Not compatible with your version of node/npm: mongodb@1.2.11
npm ERR! Required: {"node":">=0.6.19"}
npm ERR! Actual:   {"npm":"1.1.13","node":"0.6.7"}
npm ERR!
npm ERR! System Windows_NT 5.1.2600
npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nod
ejs\\node_modules\\npm\\bin\\npm-cli.js" "update"
npm ERR! cwd C:\Program Files\nodejs\node_builds\server
npm ERR! node -v v0.6.7
npm ERR! npm -v 1.1.13
npm ERR! code ENOTSUP
npm ERR! message Unsupported
npm ERR! errno {}
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     C:\Program Files\nodejs\node_builds\server\npm-de
bug.log
npm not ok 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T12:19:19.097

您将不得不更新 node.js。否则您将无法使用最近发布的软件包。0.6.19 版本于 2012 年 6 月发布。从那时起进行了许多更改。最近的稳定版本是 0.8.19。

在处理依赖关系时，您应该使用 npm-shrinkwrap 来锁定依赖关系。 [http://blog.nodejs.org/2012/02/27/managing-node-js-dependencies-with-shrinkwrap/](http://blog.nodejs.org/2012/02/27/managing-node-js-dependencies-with-shrinkwrap/)

或者，您可以在计划部署项目后冻结项目（不要进行更新）。

# android - 无法在 Web 服务器中检测到 Android

> ID：14642278
> 
> 赞同：12
> 
> 时间：2013-02-01T08:27:38.980
> 
> 标签：android, browser

通过服务器检测 Android 的明显方法是从 User-Agent HTTP 标头中搜索“Android”字符串。但是 - 我抱怨这在某些设备上不起作用（例如在我的 HTC Evo 中），它们没有被检测为 Android。whatsmyuseragent.com 为我的 HTC Evo 3D 网络浏览器提供：**Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/534.24 (KHTML, like Gecko) Chrome/11.0.696.34 Safari/534.24**。没有 Android 字符串或版本。可能是设备上的安全软件对其进行了更改，或者是 HTC 特定的问题，不确定。

显然，同一设备上的 Android Chrome 有另一个更好的 UA：**Mozilla/5.0 (Linux; Android 4.0.3; HTC EVO 3D X515m Build/IML74K) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166 Mobile Safari/535.19**，但我不能只希望例如 QR 码阅读器应用程序打开 Chrome 而不是内置的 Android 浏览器，它具有无效的 UA。

是否有一个好技巧（javascript 调用？）可以跨设备和浏览器可靠地检测 Android？

编辑：看起来与 Galaxy S III 相同的问题，相同的用户代理字符串：[Android 手机浏览器检测](https://stackoverflow.com/questions/11597940/android-phone-browser-detection)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:39:58.113

看起来我在 Android 网络浏览器设置中选择了“显示桌面版本”。一旦关闭，用户代理就在里面带有 Android。这似乎是 ICS 的一个功能，HTC 不应该受到责备：谷歌搜索错误的用户代理，我已经看到它发生在许多不同的手机上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T02:04:01.590

对于这个特定的任务，我可能会建议使用[wurfl](http://wurfl.sourceforge.net/)服务器端。

您可以通过执行非常简单的操作来检测 android：

```
$requestingDevice = $wurflManager->getDeviceForHttpRequest($_SERVER);
if ($requestingDevice->getCapability("device_os") == "Android") {
    //the magic
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T05:38:58.043

检查用户代理一直是可靠地确定用户设备的推荐方法（至少在默认设置下）。也许您可以尝试使您的搜索更加健壮？[Mozilla](https://developer.mozilla.org/en-US/docs/Browser_detection_using_the_user_agent#Mobile.2C_Tablet_or_Desktop)建议改为搜索字符串**“Mobi” 。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:25:03.857

我从您的问题中了解到的是，您在某些设备上获得了用户代理，而在少数设备上拒绝提供用户代理。所以我假设你在 android 设备上有一个应用程序，它通过一些 web 服务调用你的服务器，并且你试图从中提取用户代理。所以我在这里看到的解决方案是在android应用程序中添加用户代理参数作为代码，这样它将被发布在HTTP标头中，你可以从服务器中轻松提取

```
HttpClient httpclient = new DefaultHttpClient();
httpclient.getParams().setParameter(CoreProtocolPNames.USER_AGENT, "Android"); 
```

我有同样的问题，但我以这种方式解决了。

# jdbc - 如何通过 JDBC 显示 Informix sysprocedures.paramtypes 列？

> ID：14642281
> 
> 赞同：1
> 
> 时间：2013-02-01T08:27:42.910
> 
> 标签：jdbc, informix

我在通过本机 JDBC 驱动程序执行 SQL 查询时遇到问题。我的程序使用此查询来生成 Informix 数据库模式的报告：[http ://code.activestate.com/recipes/576621-dump-informix-schema-to-text/](http://code.activestate.com/recipes/576621-dump-informix-schema-to-text/)

```
SELECT procname, numargs, isproc, paramtypes, variant, handlesnulls, parallelizable
FROM sysprocedures
WHERE internal='f' AND mode IN ('D', 'd', 'O', 'o')
ORDER BY procname, numargs, procid 
```

当我使用 ODBC 时它可以工作，但是这个程序可以由 Jython 和 JDBC 运行，并且在 JDBC 中我得到了异常：

```
Dla tego typu danych jest wymagana dostosowana mapa typów. [SQLCode: -79769], [SQLState: IX000] 
```

英文翻译（我讨厌本地语言中的 JDBC 错误描述，它们只会在您在网络中搜索解决方案时造成麻烦）：

```
-79769 A customized type map is required for this data type
Explanation: You must register a customized type map to use any opaque types. 
```

我也简单地尝试过：

```
SELECT * FROM sysprocedures 
```

但这在 JDBC 中也不起作用。

我看到这`paramtypes`是一个问题：如果我删除它，查询就可以工作。

我必须注册什么才能将此列映射到 JDBC 可以显示的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T19:21:44.120

该`paramtypes`列是一种复杂的列类型，使用 Informix 的一些可扩展性特性创建。我怀疑 ODBC 驱动程序通过执行以下操作来解决它：

```
SELECT procname, numargs, isproc, paramtypes::LVARCHAR, variant, handlesnulls, parallelizable
  FROM sysprocedures
 WHERE internal = 'f' AND mode IN ('D', 'd', 'O', 'o')
 ORDER BY procname, numargs, procid 
```

也就是说，它强制转换为字符串。当我运行查询（在我的 SQLCMD 中）时，我得到了输出，但是很多 procnames 是空字符串。我不太确定那里发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-10T08:51:15.227

与其使用参数类型的非规范化版本，不如加入

```
SELECT p.*, c.*, informix.schema_coltypename(c.paramtype, c.paramxid)
FROM sysprocedures p
JOIN sysproccolumns c ON p.procid = c.procid
WHERE p.internal='f' AND p.mode IN ('D', 'd', 'O', 'o')
ORDER BY p.procname, p.numargs, p.procid, c.paramid 
```

# php - 正则表达式在 MySQL 查询上做左连接

> ID：14642287
> 
> 赞同：2
> 
> 时间：2013-02-01T08:28:16.763
> 
> 标签：php, mysql, sql, select

我有这张表，名为 Prospects ：

```
+---------+-------------+
| Name    | PhoneNumber |
+---------+-------------+
|John     | 08199999    |
|Viona    | 08332222    |
+---------+-------------+ 
```

另一方面，我也有这张表，名为 SMSD ：

```
+-----------------+---------------+
| Message         | PhoneNumber   |
+-----------------+---------------+
|Hello World!     | +628199999    |
|Hi World         | +628332222    |
+-----------------+---------------+ 
```

现在我需要基于 PhoneNumber 对这两个表进行 LEFT JOIN ：Prospects.PhoneNumber = SMSD.PhoneNumber 而在 SMSD 表上的电话号码总是有国家代码前缀。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:36:11.753

```
select * from Prospects
left join SMSD on substring(SMSD.PhoneNumber, 4) = substring(Prospects.PhoneNumber, 2) 
```

（未测试）

这应该在执行加入之前从 SMSD 电话号码中删除国家代码前缀，并从潜在客户电话号码中删除前导零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:43:26.607

```
SELECT *
FROM prospects AS t1
JOIN SMSD AS t2
ON 
CONCAT(@prefix, SUBSTRING(t1.PhoneNumber, 2)) = t2.PhoneNumber
WHERE t1.PhoneNumber LIKE @prefix% 
```

# javascript - SharePoint 应用开发 AppWeb 与 HostWeb 的通信

> ID：14642290
> 
> 赞同：0
> 
> 时间：2013-02-01T08:28:33.137
> 
> 标签：javascript, sharepoint-2013

我在 SharePoint 托管的应用程序中遇到问题。我要做的就是获取运行应用程序的网络列表并使用这些列表。

使用此代码，我可以在 AppWeb 中获得列表：

```
this.web = context.get_web();
this.lists = this.web.get_lists();
this.context.load(this.lists); 
```

我已经尝试过类似的方法来从 HostWeb 获取列表：

```
this.context = new SP.ClientContext("https://sharepoint-server.com/_layouts/15/start.aspx#/");
var oWebsite = client.get_web();
this.lists = oWebsite.get_lists();
this.context.load(this.lists); 
```

但它不会从这个网络返回列表。

有人能帮助我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:54:50.700

调用“加载”函数后，您需要使用回调函数调用“executeQueryAsync”方法以获取结果：请参阅[MSDN 中的此示例代码](http://msdn.microsoft.com/en-us/library/jj163201.aspx#BasicOps_SPListTasks)：

```
function retrieveAllListProperties(siteUrl) {
  var clientContext = new SP.ClientContext(siteUrl);
  var oWebsite = clientContext.get_web();
  this.collList = oWebsite.get_lists();
  clientContext.load(collList);

  clientContext.executeQueryAsync(
      Function.createDelegate(this, this.onQuerySucceeded), 
      Function.createDelegate(this, this.onQueryFailed)); }

function onQuerySucceeded() {
  var listInfo = '';
  var listEnumerator = collList.getEnumerator();

  while (listEnumerator.moveNext()) {
      var oList = listEnumerator.get_current();
      listInfo += 'Title: ' + oList.get_title() + ' Created: ' + oList.get_created().toString() + '\n';
}
alert(listInfo); }

function onQueryFailed(sender, args) {
  alert('Request failed. ' + args.get_message() + '\n' + args.get_stackTrace()); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T03:23:27.487

在调用 Load 方法后尝试调用 this.context.ExecuteQuery()。在 ExecuteQuery() 调用之后，上下文中的对象才可用。

HTH。

# ruby - 转换已以 UTF-8 编码的 ruby 字符串中的 unicode 字符

> ID：14642291
> 
> 赞同：2
> 
> 时间：2013-02-01T08:28:34.063
> 
> 标签：ruby, string, unicode, encoding, utf-8

我有一个以 UTF-8 编码的字符串值。但它们也可能包含 unicode 字符。

例如；

```
"\u0131".encoding
=> #<Encoding:UTF-8> 
```

“\u0131”是“ı”。

如何将所有 unicode 字符转换为 utf-8？

谢谢

恰达什

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T08:53:33.107

在内部，在此字符串中，所有 unicode 字符都已表示为 utf-8 字节。让我们检查一下。

```
> "\u0131".bytes.to_a
=> [196, 177] 
```

好的，有两个字节，但它们是 UTF-8 还是 UTF-16 字节？最简单的检查方法是查看二进制表示。让我们迭代每个字节并以二进制基数打印它们：

```
>> "\u0131".each_byte {|b| print b.to_s(2)};puts
1100010010110001
=> nil 
```

这是您的字符串的二进制表示 - 如您所见，这是 char 的正确 UTF-8 两字节序列`100110001`，即`0x0131`：

```
110 00100 10 110001
---       --        ← UTF-8 markers for 2-byte char
    =====    ====== ← bits of your char 
```

所以答案是——**什么都不做**。字符串已经是 utf-8，QED

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:50:33.723

utf-8 是 unicode 字符的编码。您无需转换任何内容，您的字符已经以 utf-8 编码。它们是否显示为`\u0131`或`ı`取决于显示程序。

# ocaml - 这个 ocaml 片段是什么意思？

> ID：14642292
> 
> 赞同：2
> 
> 时间：2013-02-01T08:28:42.203
> 
> 标签：ocaml

```
let memorize o table = Hashtbl.add table (o :> < >) o 
```

`:>`是演员，但我不明白`< >`里面的..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:48:25.290

`< ... >`OCaml 中对象类型的语法也是如此。这些方法进入`<`and内部`>`。`< >`是不指定方法的对象类型；因此任何对象类型都可以向上转换为这种类型。这种类型通常没什么用，因为你不能用这种类型的值做任何事情（因为在 OCaml 中没有对象类型的向下转换，你永远不能把它变成你可以调用方法的东西）。

在这种情况下，他们将其用作哈希表的键类型。我真的不知道他们为什么要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:45:05.967

`< mi: ti>`是具有 type 方法的对象的`mi`类型`ti`。在这里，您强制`o`转换为没有任何方法的对象，即所有对象类型的超类型（类似于`Object`Java）。换句话说，表应该能够存储任何对象。

# android - Android 多个包和布局

> ID：14642295
> 
> 赞同：0
> 
> 时间：2013-02-01T08:28:58.767
> 
> 标签：android, android-layout

我正在尝试构建一个具有多个包名称的 Android 应用程序以获得更好的结构。我目前的包裹是`src/com/waveletandroid`.

我在这个文件夹下`src/com/waveletandroid/customer`创建了一个文件`SearchCustomerActivity.java`夹。还创建了一个新文件夹`res/layout/customer`。`activity_search_customer.xml`文件已在此 res/layout/customer 文件夹中创建。

现在，当我尝试构建项目时，它会抛出错误“R 无法解析为变量”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:38:50.977

您的资源文件有问题。

这将导致不生成 R.java，从而导致“ **R 无法解析为变量**”。

此错误的根源是*在布局文件夹中创建文件夹*。Android 不允许这样做。支持并建议使用多个包。

# c++ - 如何使用按钮单击绘制 - C++ Windows 窗体

> ID：14642297
> 
> 赞同：0
> 
> 时间：2013-02-01T08:29:28.473
> 
> 标签：c++, windows, forms

在 C++ WINdows Form 2010 中，单击按钮时，我需要在面板内画一条线。我知道如何在油漆中画一条线，但在`GO_Click`成员中不知道。

```
private: System::Void GO_Click(System::Object^  sender, System::EventArgs^  e) 
{
    m->DrawLine(Pens::Blue, 500, 550, 700, 500);
} 
```

如何在 GO_Click 成员中使用 DrawLine？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:44:09.170

看看这个样本：

```
 private: System::Void GO_Click(System::Object^  sender, System::EventArgs^  e) 
    {
        // This works, but the drawn line will be lost when refreshing the panel etc.

        //Graphics^ g = panel1->CreateGraphics();
        //g->DrawLine(System::Drawing::Pens::Blue, 500, 550, 700, 500);

        // This approach draws the line on the BackroungImage of the panel
        if (panel1->BackgroundImage == nullptr)
        {
            panel1->BackgroundImage = gcnew System::Drawing::Bitmap(panel1->Width, panel1->Height);
        }

        Graphics^ buffGraphics = Graphics::FromImage(panel1->BackgroundImage);

        buffGraphics->Clear(panel1->BackColor);
        buffGraphics->DrawLine(System::Drawing::Pens::Blue, 500, 550, 700, 500);

        panel1->Update();
    } 
```

**但是**，有更多的方法来画线。

# c++ - 我如何在外面引用 C++ 方法？

> ID：14642298
> 
> 赞同：-3
> 
> 时间：2013-02-01T08:29:47.467
> 
> 标签：c++, qt

比如说，我有一些类 , `Music`, `Video`,`Photo`并且有一个名为 的类`Control`,`Control`有一个方法, `centerlcall(char* fuction_name,char* json_para)`,`fuction_name`可能是`Music`, `Video`,`Photo`的成员方法之一。所以，我想从函数中调用成员方法`Control`。`centercall`

```
class Contact {
 pubilc:
 Contact();
 void getallcontact(char* data);
 void changeContact(char* data);
 void addacontact(char* data);
};

class Music {
 public :
 Music();
 void getMusic(char* data);
 void addMusic(char* data);
 void playMusic(char* data);
}

class Video {
 public:
 Video();
 void getVideo(char* data);
 void addVideo(char* data);
}

class Photo {
 public:
 photo();
 void getPhoto(char* data);
}

class Control {
   public:
   Control();
   centerlcall(char* fuction_name,char* json_para){
      //check function_name is in video ,photo,music ,if in , call the method . 
   }
} 
```

我该怎么做？qt有帮助吗？

我想要的不是让usr直接调用Music的getMusic或其他方法，而是调用centercall，并告诉centercall他想调用什么方法，就像ajax一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:34:14.247

函数指针就够了！拥有面向对象的方式！

```
class Stuff {
public:
   virtual ~Stuff();

   virtual void get(char* data) = 0;
};

class Music : public Stuff{
   public :
      Music();
      void get(char* data);
}

class Video : public Stuff {
   public:
      Video();
      void get(char* data);
}

class Photo : public Stuff {
   public:
      Photo();
      void get(char* data);
}

class Control {
   public:
      Control();
      void centerlcall(Stuff* hisStuff, char* json_para){
          hisStuff->get(/* whatever */);
      }
} 
```

美丽的。

* * *

*“谢谢，我想用 jni 之类的东西，每个音乐之类的类都有一个 regist 方法来注册导出到 Control 的方法，但我不知道怎么写。”*

```
class Control {
   public:
      Control();
      void centerlcall(Stuff* hisStuff, char* json_para){
          hisStuff->get(/* whatever */);
      }

      void registerStuff (Stuff* hisStuff) {  // <- It's that easy!
         // push it to a vector or a list or whatever data collection you want
      }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:45:49.797

由于这些类没有任何共同点，因此您必须将要调用的函数保存在某处。请注意，C++ 不会为您执行此操作，没有存储函数名称等元数据，您必须自己执行此操作，例如：

```
class Control {
   std::unordered_map<std::string,std::function<void(char*)>> functions;
   public:
   Control();
   centerlcall(char* fuction_name,char* json_para){
      functions[function_name](json_para);
   }
} 
```

当然你还是要在map中添加相关的函数，也许你希望key不是函数名而是对象名+函数名，...。或者，您可以使用事件/信号库而不是重新发明轮子，它应该为您提供适当的框架来执行此操作。

无关：请不要使用类似的东西`char*`，`std::string`而是使用。

# python - 我需要澄清 apache 如何与 modwsgi 和金字塔一起工作

> ID：14642300
> 
> 赞同：0
> 
> 时间：2013-02-01T08:29:59.497
> 
> 标签：python, apache, sqlalchemy, mod-wsgi, pyramid

我们有一个配置为运行`pyramid+sqlalchemy`应用程序的服务器`modwsgi+apache2`

我们在`__init__.py`金字塔应用程序中有一些东西可以创建数据库并预填充一些测试用户和帐户。它类似于[这里的金字塔食谱示例中的 initialize_sql 函数](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/database/sqlalchemy.html#importing-all-sqlalchemy-models)

Out apache config 看起来像这样（从某个地方复制并被黑）：

```
WSGIApplicationGroup %{GLOBAL}
WSGIPassAuthorization On
WSGIDaemonProcess pyramid user=ubuntu group=staff processes=1 \
   threads=4 \
   python-path= VIRTUAL_ENV_SITE_PACKAGES
WSGIScriptAlias / WSGI_SCRIPT_PATH

<Directory /Users/chrism/modwsgi/env>
  WSGIProcessGroup pyramid
  Order allow,deny
  Allow from all
</Directory> 
```

困扰我们的是，它`initialize_function`会被许多请求调用，而不是只被调用一次。我们不了解 apache 是如何工作的，也不了解我们在配置中做了什么。我们希望能够`__init__.py`一次调用函数，仅此而已。有人可以解释 apache 的实际工作原理以及为什么金字塔`__init__.py`一直在重新加载。还要解释我们如何确保`__init__.py`不会重新运行每个请求

考虑分享关于相同内容的简单易懂的链接:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:46:04.753

像创建数据库和预填充它这样的事情不应该进入`__init__.py`WSGI 应用程序的文件中，因为正如您所注意到的，只要您启动服务器（以及在某些其他点），该文件就会运行。

您需要的是一个可以在需要时从命令行调用的脚本。每个框架都提供了自己的构建方式。在 Pyramid 中，它们被称为`console scripts`。[在这里](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/commandline.html#making-your-script-into-a-console-script)，您可以找到有关如何自己构建的文档。

但是，我建议您使用[本教程](http://docs.pylonsproject.org/projects/pyramid/en/1.4-branch/tutorials/wiki2/installation.html#making-a-project)中的脚手架（项目模板）并查看名为`initialize_tutorial_db`. 它完全符合您的要求，并允许您在需要时从命令行创建/初始化数据库。

* * *

关于 apache 配置，与您的问题相关的行如下：

```
WSGIDaemonProcess pyramid user=ubuntu group=staff processes=1 \
   threads=4 \
   python-path= VIRTUAL_ENV_SITE_PACKAGES 
```

这意味着您将使用**4 个**线程启动**1 个**进程。这不应该意味着您文件中的代码会运行多次。这更有可能是由于您手动重新启动服务器或通过代码更改引起的。**`__init__.py`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:31:10.407

诀窍是产生多个实例`WSGIDaemonProcess`来处理所有进入 Apache 的请求。甚至有可能在这些进程中，创建了多个线程来（大部分）同时处理请求。您应该尝试保护您的 initialize_function()，使其每个进程（或线程）仅运行一次，例如通过跟踪它是否已经运行。一般来说，最好将您的操作/资源管理范围限定为请求的生命周期。**

# caching - AppFabric 和 CachingPolicy/ChangeMonitors

> ID：14642301
> 
> 赞同：0
> 
> 时间：2013-02-01T08:30:05.297
> 
> 标签：caching, appfabric, appfabric-cache

我们正在研究使用 Windows AppFabric 迁移到分布式缓存。我们的 ASP.NET 4.0 应用程序当前有一个使用 MemoryCache 的缓存实现。

一个关键特性是，当项目被添加到缓存中时，会包含一个包含 ChangeMonitor 的 CacheItemPolicy：

```
 CacheItemPolicy policy = new CacheItemPolicy();
 policy.Priority = CacheItemPriority.Default;
 policy.ChangeMonitors.Add(new LastPublishDateChangeMonitor(key, item, GetLastPublishDateCallBack)); 
```

更改监视器在内部使用计时器来定期触发传递给它的委托——这通常是一种从数据库中获取值以进行比较的方法。

当一个项目被添加到缓存中时，策略和它的更改监视器就会被包括在内：

```
Cache.Add(key, item, policy); 
```

早期查看 AppFabric 的 DataCache 类似乎表明，在将项目添加到缓存时可以包含时间跨度，而 CacheItemPolicy 本身不能。

是否有另一种方法可以在 AppFabric 中实现相同的 ChangeMonitor 类型的功能。也许是通知？

干杯

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:40:48.083

> 计算机科学中只有两个难题：缓存失效、命名和非一个错误。
> 菲尔·卡尔顿

不幸的是，AppFabric 不支持这种使缓存项失效的监视，同样不支持`SqlCacheDependency`.

但是，AppFabric 1.1 引入了对 read-through 和 write-behind 的支持。后写意味着您的应用程序首先更新缓存的数据而不是底层数据库，因此缓存始终保存最新版本（因此不需要监视底层数据）；然后缓存异步更新底层数据库。要实现 read-through/write-behind，您需要创建一个继承自`DataCacheStoreProvider`( [MSDN](http://msdn.microsoft.com/en-gb/library/microsoft.applicationserver.caching.datacachestoreprovider.aspx) ) 的对象，并编写了解数据库结构以及如何更新它的 Read、Write 和 Delete 方法。

# dynamics-crm-2011 - Dynamics CRM 2011 Outlook 客户端可以连接到 CRM 4 服务器吗？

> ID：14642304
> 
> 赞同：1
> 
> 时间：2013-02-01T08:30:12.657
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-4

我在 CRM 4 Outlook 客户端上找到了一些信息，以便能够连接到 CRM 2011 服务器实例（在应用至少汇总 10 个左右之后），但是否有可能反过来呢？

我的意思是，CRM 2011 Outlook 客户端可以连接到旧的 CRM 4 服务器（在这种情况下是内部部署的）吗？我们的客户将拥有 CRM 4 和 2011 服务器，一些员工需要能够同时连接这两者（如果可能）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:58:10.063

不可以。新客户端根本无法与 CRM 4.0 一起使用。出于这个原因，升级部署始终必须首先在服务器上完成，让您在之后尽快升级 Outlook 客户端。

是时候升级该 CRM 4 实例了（也许就像您已经拥有的同一台 CRM 2011 服务器上的第二个组织一样）。

# java - Datastore Projection Queries on key/id in

> ID：14642308
> 
> 赞同：1
> 
> 时间：2013-02-01T08:30:23.997
> 
> 标签：java, google-app-engine, google-cloud-datastore

I have a model, say,

```
class MainModel {
   @Id String id;
   String p1;
   String p2;
   int p3;
   /... some 10-15 fields
} 
```

In a query, all I want is values of p1 for some ids. So, basically,

```
SELECT __key__, p1 from MainModel where __key__ in [ 'i1', 'i2', ... ] 
```

What's the best way to do this in Java?

# php - 将这段 Javascript 与另一部分结合起来？

> ID：14642313
> 
> 赞同：0
> 
> 时间：2013-02-01T08:30:49.660
> 
> 标签：php, javascript, html, forms

因为当涉及到 JS、JQuery 和 PHP 时，我在各个方面都是一个完整的 n00b，所以我需要一些帮助。

可能对于有 JS 基础知识的人来说真的很简单，但对我来说可没那么简单。

我的 index.php 中有以下部分：

```
<form method="get" id="searchform" action="http://wwwapps.ups.com/WebTracking/track?HTMLVersion=5.0&loc=nl_NL&Requester=UPSHome&WBPM_lid=homepage%2Fct1.html_pnl_trk" target="_blank" >
<input type="text" value="" name="trackNums" id="ups" />
<input type="hidden" name="track.x" value="Traceren">
<input type="hidden" name="loc" value="nl_NL">
<input type="image" src="afbeeldingen/search_btn.png" id="searchsubmit" />
</form> 
```

在 .js 文件中，我有这个：

```
$(document).ready(function() {
    $("#ups").attr("value", "UPS Trackingscode...");
    var text = "UPS Trackingscode...";
    $("#ups").focus(function() {
        $(this).addClass("active");
        if($(this).attr("value") == text) $(this).attr("value", "");
    });
    $("#ups").blur(function() {
        $(this).removeClass("active");
        if($(this).attr("value") == "") $(this).attr("value", text);
    });
}); 
```

我在 .js 文件中添加了这个（在顶部）：

```
function removeSpaces(string) {
    return string.split(' ').join('');
} 
```

但是当我将此部分添加到 index.php （表单部分）时，它不起作用：

```
<input type="text" onblur="this.value=removeSpaces(this.value);"> 
```

我想我也必须将它合并到当前的 JS 中，但我不知道如何执行此操作或更改/添加什么。

我在这里想要实现的是，每当我将跟踪代码粘贴到文本字段中时，它应该会自动删除空格（如果有的话，因为复制/粘贴操作错误）。

它不是针对任何特殊网站，只是供我个人使用，因此我可以从我自己的起始页面更轻松地跟踪包裹。

我希望我解释正确。对于具有基本 JS 技能的人来说，可能需要不到一分钟的时间，但对我来说，这非常困难。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:45:45.790

该功能本身运行良好。这只是一个范围界定问题。你有两个选择：

1）您将功能移到`$(document).ready(function() { })`零件之外

2）您`onblur="this.value=removeSpaces(this.value);"`从元素中删除，丢弃您的函数并编写相应的事件处理程序

```
// identifier or class needed to target the element, i use id="target"
$("#target").on("focusout",function(){
   this.value = this.value.replace(/\s*/g,"");
}); 
```

第二种方式（使用事件处理程序）被认为是更清洁和更好的方式。但两者都是有效的。

旁注：

要从字符串中删除空格，最好使用带有相应正则表达式的[replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)方法（替换整个字符串中的`/\s*/g`零个或多个空格（全局））。`\s*``g`

而不是 `$(this).attr("value")`使用[`$(this).val()`](http://api.jquery.com/val/).

# jquery - My website is not working after upgrading Dotnetnuke to V7

> ID：14642320
> 
> 赞同：0
> 
> 时间：2013-02-01T08:31:30.887
> 
> 标签：jquery, dotnetnuke

I have this website, [http://www.fagakademiet.no](http://www.fagakademiet.no).

The site has a custom skin developed by a developer that already left the company.

We upgraded our DNN to V7 and now the Modules, Users Pages, Edit Page toolbar on top is not working.

I get a "Uncaught TypeError: Object [object Object] has no method 'dialog'" error from dnn.jquery.js

Any ideas??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:05:22.667

问题本身并不是真正的解决方案，但也许您可以尝试切换回功能区样式工具栏，以便恢复菜单操作。

您可以在主机设置 -> 其他设置 -> 控制面板下找到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:10:13.887

你没有做太多事情，但这里有一些事情要看： 1.) 你不能使用最新版本的 jQuery，1.9。使用 1.8 或 1.7.2。2.) 看看这个线程。进入编辑模式存在一些问题。更改为功能区控制面板是一种可能，但不是特别好的一种。[http://www.dotnetnuke.com/Resources/Forums/forumid/190/threadid/469106/scope/posts.aspx](http://www.dotnetnuke.com/Resources/Forums/forumid/190/threadid/469106/scope/posts.aspx)

# wpf - 即使尚未渲染视图，如何通过事件将对象传递给 MVVM 中的不同视图模型

> ID：14642321
> 
> 赞同：0
> 
> 时间：2013-02-01T08:31:31.770
> 
> 标签：wpf, mvvm, prism, viewmodel

我正在使用 MVVM 和 PRISM 开发 WPF 应用程序，但遇到了一个问题。

我有两个不同的视图（View1 和 View2）及其各自的视图模型。

View1 是具有域对象列表的主视图，而 View2 用于显示域对象的属性。现在，每次更改选择时，我都需要将对象传递给 View2。

我知道我们可以做到，`IEventTrigger`但视图模型只有在事件驻留在内存中时才能监听事件。

所以我的问题出现了。由于第一个没有选定的项目。View2 未呈现。我不知道如何通过事件第一次将对象传递给 View2。

可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:40:32.343

如果您的 View1 包含一个具有 SelectedItem 属性的列表，您可以在 ViewModel1 中创建一个 SelectedItem-Property。您在 ViewModel1 中创建一个 ViewModel2-Property。

你像这样绑定到它：

```
<ListView SelectedItem="{Binding Path=SelectedItem}">
 .
 .
</ListView>
<my:view2 DataContext="{Binding Path=ViewModel2}"/> 
```

最后，您在 SelectedItem-Property 的设置器中传递 SelectedItem：

```
public object SelectedItem
{
    get { return _seledtedItem; }
    set { _selectedItem = value; ViewModel2.SomeProperty = _selectedItem; OnPropertyChanged("SelectedItem"); }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:46:54.687

由于您[在评论](https://stackoverflow.com/questions/14642321/how-to-pass-an-object-via-event-to-different-viewmodel-in-mvvm-even-if-no-view-i#comment20457072_14642440)中说您不希望一个 ViewModel 引用另一个，因此您可以使用 PRISM 的[EventAggregator](http://msdn.microsoft.com/en-us/library/ff921122%28v=pandp.20%29.aspx)来代替

Whenever the selection changes, broadcast a `SelectionChangedMessage`from `ViewModel1`, and have `ViewModel2`subscribe to receive those messages.

如果您还需要知道`ViewModel2`第一次创建所选项目时，让它广播类似 a 的内容`GetCurrentItemMessage`，它`ViewModel1`可以订阅接收并使其重新广播`SelectionChangedMessage`

此外，如果您是 PRISM 的新手，[我的博客上](http://rachel53461.wordpress.com/2011/10/09/simplifying-prisms-eventaggregator/)`EventAggregator`有一个静态类，可用于简化PRISM 的使用方式，因为我发现默认语法起初非常令人困惑且难以理解。我将它用于大多数小型应用程序。`EventAggregator`

# iphone - How to show vertical or horizontal scroller on UIWebView?

> ID：14642322
> 
> 赞同：0
> 
> 时间：2013-02-01T08:31:34.893
> 
> 标签：iphone, ios, objective-c, uiwebview, uiweb

I ma using UIWebView to some html content. And some time the data is more in width or height but I have fixed size UIWebView. So for user perspective I want to show scroller vertical or horizontal to indicate the user that there are some more content are available in this view. I am using [webView.scrollView flashScrollIndicators]; but it show scroller when I touch UIWebView. I want to show scroller by default. Can you suggest how to do this.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:41:43.980

像这样使用 webviw 的滚动视图：

```
 [(YOUR WEBVIEW).scrollView  setShowsHorizontalScrollIndicator:YES];
   [(YOUR WEBVIEW)scrollView  setShowsVerticalScrollIndicator:YES]; 
```

你可以做一件事，使用这个

```
 - (void) webViewDidFinishLoad:(UIWebView *)webView){

        [(YOUR WEBVIEW).scrollView flashScrollIndicators];

     } 
```

当内容下载完成时，它将显示滚动指示器，用户将很容易理解，页面底部还有更多内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:41:18.237

这里的答案很简单——**你不能**因为它违反了人机界面指南。手动让它们显示的唯一方法是调用`flashScrollIndicators`. Apple 并不打算让您展示它们，因此如果您要实现它，这将是一种艰难的方式（子类化或创建自己的 UIWebView）。

> 外观和行为
> 
> 当滚动视图首次出现时——或者当用户与之交互时——垂直或水平滚动指示器会**短暂闪烁**，以向用户显示他们可以显示更多内容。除了瞬态滚动指示器，滚动视图没有预定义的外观。
> 
> 滚动视图响应手势的速度和方向，以人们感觉自然的方式显示内容。当用户在滚动视图中拖动内容时，内容跟随触摸；当用户轻拂内容时，滚动视图会快速显示内容，并在用户触摸屏幕或到达内容末尾时停止滚动。滚动视图也可以在分页模式下运行，其中每个拖动或轻拂手势都会显示一个应用程序定义的内容页面。

[来源](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html)- iOS UI 元素使用指南

# jquery-mobile - jQuery Mobile - List slips under header

> ID：14642324
> 
> 赞同：0
> 
> 时间：2013-02-01T08:31:42.597
> 
> 标签：jquery-mobile

I am currently working on a web app for mobile phones and tablets and got to another problem with jquery mobile. my header is fixed to the top an i have got to lists that are under it. the left one is positioned relative the right one absolute.

the left one slips under my header. the scrolling is active, although there is no need to scroll actually.

does someone have a hint?

![example](../Images/0ee73047737c5fc51c1583dcf471531f.png)

```
<div id="page" class="ui-page ui-body-c ui-page-active ui-page-header-fixed" data-role="page" data-url="page" tabindex="0" style="min-height: 491px; padding-top: 44px;">
    <div id="content" class="ui-content" data-role="content" role="main">
        <div class="ui-header ui-bar-a ui-header-fixed slidedown" data-role="header" data-position="fixed" data-tap-toggle="false" role="banner">
        <ul id="console" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" data-role="listview" data-inset="true" style="width: 50%;">
        <ul id="control" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" data-inset="true" data-role="listview" style="width: 48%; position: fixed; top: 58px; right: 1%;">
    </div>
</div> 
```

EDIT:

Here you have got a print out of my firebug console:

![enter image description here](../Images/0ad3b865e1187029fe6341897fe4bc62.png)

EDIT 2:

The strange thing is the size of the html element:

![enter image description here](../Images/0bee0429eb27b2b38ca5f3fd9dac8d4e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:42:10.417

您的标题位置错误，它不应该是内容的一部分：

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
    <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div id="page" data-role="page" data-url="page" >
        <div class="ui-header ui-bar-a ui-header-fixed slidedown" data-role="header" data-position="fixed" data-tap-toggle="false" role="banner">
            <h3>Header</h3>
        </div>
        <div id="content" data-role="content">
            <ul id="console" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" data-role="listview" data-inset="true" style="width: 50%;">
                <li><a>Item 1</a></li>
            </ul>
            <ul id="control" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" data-inset="true" data-role="listview" style="width: 48%; position: fixed; top: 58px; right: 1%;">
                <li><a>Item 1</a></li>
            </ul>
        </div>
    </div> 
</body>
</html> 
```

工作示例：http: [//jsfiddle.net/Gajotres/us2w5/](http://jsfiddle.net/Gajotres/us2w5/)

# reporting-services - 使用由“或”组合的两个“Like”操作过滤 tablix

> ID：14642331
> 
> 赞同：1
> 
> 时间：2013-02-01T08:32:18.727
> 
> 标签：reporting-services, ssrs-tablix

我需要过滤 tablix 以返回字符串中的值包含“*黑色*”或“*红色*”的位置：

```
Expression:  =Fields!DrawOfficeNum.Value Like "*BLACK*" AND Fields!DrawOfficeNum.Value Like "*RED*"
Operator:    Like
Value:       True 
```

我没有得到任何结果，我知道有结果。帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T10:21:50.147

我会这样做：

**表达式（文本类型）：**

```
=IIf(InStr(Fields!DrawOfficeNum.Value, "BLACK") > 0 or InStr(Fields!DrawOfficeNum.Value, "RED") > 0
    , "Include"
    , "Exclude") 
```

**运算符：** =

**值：**排除

![在此处输入图像描述](../Images/16611108a0f0bc31664e7e84998dab3f.png)

这给出了结果：

![在此处输入图像描述](../Images/1a943092bb7f02c79d5af84c98029662.png)

唯一需要注意的是，我将过滤器从**布尔**类型转换为**文本**类型 - 过去我一直遇到**布尔**过滤器问题，并且根据屏幕截图，上面的选项效果很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T10:31:05.313

引用，强调我的：

> 我需要过滤...字符串中的值包含“BLACK”**或**“RED”：

引用，强调我的：

> =Fields!DrawOfficeNum.Value Like "*BLACK*" **AND** Fields!DrawOfficeNum.Value Like "*RED*"

在你的表达中改变`AND`成`OR`，然后你就可以走了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-31T15:07:07.257

它似乎以这种方式更容易工作：

*   在“表达式”框中，输入 [DrawOfficeNum]
*   在“运算符”框中，选择“在”
*   在值框中，输入黑色；红色的

它会知道您使用的是字符串类型（取决于您的字段类型），并生成一个用 ; 分隔的列表

如果我错了，谁能告诉我？

# c# - RavenDB，使用嵌入式数据库存储数据的唯一方法是在“系统数据库”中？

> ID：14642333
> 
> 赞同：3
> 
> 时间：2013-02-01T08:32:25.897
> 
> 标签：c#, database, ravendb, ravendb-studio

我使用嵌入式数据库，想知道操作数据的唯一方法是使用系统数据库吗？我在管理工作室看了一下，发现我所有的数据都转储到了系统数据库中。即使我在管理工作室中创建了一个新数据库，这个新数据库也保持不变。使用代码方法我没有进一步了解，因为嵌入式实例似乎不支持多租户。那么唯一的方法是存储和访问来自系统数据库的数据吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T16:00:08.043

那是对的。嵌入式模式旨在针对单个数据库进行操作，该数据库也是系统数据库。它目前不支持其他“租户”数据库。

如果您需要少量不同的数据库，您可以创建多个嵌入式数据库。每个都需要自己的 EmbeddableDocumentStore 实例，以及为数据目录指定的不同路径。

如果您正在设计需要*大量*数据库的东西，则嵌入式模式不合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-26T07:36:28.247

如果您为文档存储指定一个默认数据库名称，您的数据将存储在该数据库中。

```
var documentStore = new EmbeddableDocumentStore
{
    DataDirectory = "Data",
    DefaultDatabase = "MyDb"
};
documentStore.Initialize(); 
```

# authentication - User authentication Bcrypt and Sinatra - LINK - Please help explanation needed

> ID：14642336
> 
> 赞同：-1
> 
> 时间：2013-02-01T08:32:42.987
> 
> 标签：authentication, encryption, sinatra, haml, bcrypt-ruby

**[http://www.128bitstudios.com/2011/11/21/authentication-with-sinatra/](http://www.128bitstudios.com/2011/11/21/authentication-with-sinatra/)**

## Simple and nice Sinatra BCrypt authentication system - I would appreciate an explanation =)

I found this very nice article on a very simple authentication system made for Sinatra together using BCrypt and I think it's great and simple, with an nice continues classic code.

However, I have trouble understanding it, and yes I am a noob. I would really appreciate if some of you could explain at least some of the code to me, and the one I am especially interested in is this part

```
post "/signup" do
  password_salt = BCrypt::Engine.generate_salt
  password_hash = BCrypt::Engine.hash_secret(params[:password], password_salt)

  #ideally this would be saved into a database, hash used just for sample
  userTable[params[:username]] = {
    :salt => password_salt,
    :passwordhash => password_hash 
  }

  session[:username] = params[:username]
  redirect "/"
end

post "/login" do
  if userTable.has_key?(params[:username])
    user = userTable[params[:username]]
    if user[:passwordhash] == BCrypt::Engine.hash_secret(params[:password], user[:salt])
      session[:username] = params[:username]
      redirect "/"
    end
  end
  haml :error
end 
```

I guess there isn't anything wrong with the code considering it's written by someone who is much better than me with that kind of stuff, but it could contain errors, but most likely not. Since I am quite new to both Sinatra and the use of BCrypt I would appreciate if someone could explain the procedure and the way it encrypts the password.

*All the rest of the code is there when you visit the link, no point pasting it all here.*

Also I think if I have understood correctly that the BCryptEngine creates a salt from the user param :password, but I can't understand how it saves the user to the table and all etceteral stuff. Thanks :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:42:35.457

如果你想实现这样的东西，你至少应该了解你在做什么，而不是在这里简单地问。有一些简单的事情发生，例如将用户数据保存在不保留在请求之间的 Hash 中，因此除非您知道将用户数据存储在哪里，否则实现它没有意义。数据库可能是目前最好的答案。

salt 不是从用户密码创建的，它由 BCrypt 生成并存储在 userTable Hash 中。连同散列密码。在注册例程中，userTable 获得一个包含新用户的条目，但除非您将该哈希保存在某处，否则它会在下一次请求后丢失。

我建议先阅读基本的 Ruby 用法。如果您想在您的应用程序中实现安全性，那么了解您在做什么是有意义的。否则，如果安全性是安全的，它或多或少是纯粹的机会。

# javascript - Ember.js 嵌套路由

> ID：14642340
> 
> 赞同：7
> 
> 时间：2013-02-01T08:33:03.090
> 
> 标签：javascript, model-view-controller, web-applications, ember.js

干杯! 我有路线：

```
TravelClient.Router.map(function() {
  this.resource('tours', function() {
    this.resource('tour', { path: ':tour_id' }, function(){
      this.route('seats');
    });   
  });
}); 
```

还有一个模板：

```
 <script type="text/x-handlebars" data-template-name="tour/seats">
    {{...}}
  </script> 
```

Seats 是 Tour 对象的一个​​属性：

```
TravelClient.Tour.find(1).get('seats');
12 
```

我像这样扩展我的 TourSeats 路线：

```
TravelClient.TourSeatsRoute = Ember.Route.extend({
  model: function(params) {
    return TravelClient.Tour.find(params.tour_id).get('seats');
  }
}); 
```

问题：如何在模板中渲染游览的座位？

**更新：**

我的装置看起来像这样：

```
TravelClient.Store = DS.Store.extend({
  revision: 11,
  adapter: 'DS.FixtureAdapter'
});

TravelClient.Tour = DS.Model.extend({
  title: DS.attr('string'),
  description: DS.attr('string'),
  seats: DS.attr('number')
});

TravelClient.Tour.FIXTURES = [{
  id: 1,
  title: "Brighton, England",
  description: "Lorem ipsum dolor ... .",
  seats: 12
},... 
```

我已经改变了我的路线延伸到这个：

```
TravelClient.TourSeatsRoute = Ember.Route.extend({
  model: function(params) {
    return TravelClient.Tour.find(params.tour_id);
  }
}); 
```

在模板中：

```
 <script type="text/x-handlebars" data-template-name="tour/seats">
    {{tour.seats}}
  </script> 
```

**更新 2：**

```
 <script type="text/x-handlebars" data-template-name="tour/seats">
    {{controller.model.seats}}
  </script> 
```

它给了未定义的回报。经过一些调试，我发现 params 中没有任何 id 并且 params 为空，这就是为什么我无法在 TourSeatsRou​​te 函数中获得正确的模型。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-06T05:20:31.237

如果您使用的是 ember-1.0-pre.4+，则仅针对您所在的特定路线返回参数，而不是整个 URL。这里有一些[关于这个](https://github.com/emberjs/ember.js/issues/1769)的讨论。

我相信此时所需的方法是使用`this.modelFor`传递您在父路由中设置的父资源的名称。因此，在您的情况下，它将是：

```
TravelClient.TourSeatsRoute = Ember.Route.extend({
  model: function() {
    return this.modelFor("tour");
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T12:08:06.523

您只需要从`model`方法中返回模型：

```
TravelClient.TourSeatsRoute = Ember.Route.extend({
  model: function(params) {
    return TravelClient.Tour.find(params.tour_id);
  }
}); 
```

然后在您的模板中，您可以`controller`在上下文中执行以下操作：

```
{{model.seats}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:57:02.023

我还是 EmberJS 的新手，但我会像这样编写我的路由器和路由。

我不确定您是否需要将帖子资源包装在*帖子*资源*中*。注意 ToursSeatsRou​​te 中的双复数

 *```
TravelClient.Router.map(function() {
  this.resource('tours', function() {        
    this.route('/:tour_id/seats');        
  });
}); 
```

这将为您提供以下网址：

/tours - 你可以把它映射到一个 ArrayController

/tours/:tour_id/seats - 您可以将其映射到 ObjectController

```
TravelClient.ToursSeatsRoute = Ember.Route.extend({
  model: function(params) {
    console.log(params); 
    return TravelClient.Tour.find(params.tour_id);
  }
}); 
```

搏一搏？或者也许将您的代码放在 JSFiddle 中？*

# c - C makefile errors

> ID：14642343
> 
> 赞同：0
> 
> 时间：2013-02-01T08:33:11.033
> 
> 标签：c, makefile

I have a custom header file example.h which has prototypes for a few functions. There is a .C file example.c that I implemented which "includes" (#include "example.h") and has the implementations of the functions that has prototype in example.h. Now, I have another function test.c that calls the functions that are prototyped in example.h and defined in example.c.

My make file is as follows

```
test: test.o
    gcc -o test -g test.o

test.o: test.c example.c example.h  
    gcc -g -c -Wall test.c
    gcc -g -c -Wall example.c

clean:
    rm -f *.o test 
```

I get following message for the functions that are defined in example.c

Undefined first referenced symbol in file

function1 test.o

function2 test.o

function3 test.o

function4 test.o

ld: fatal: Symbol referencing errors. No output written to test

collect2: ld returned 1 exit status

*** Error code 1

make: Fatal error: Command failed for target `test'

Any help is most appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:35:24.340

```
%.o: %.c
    gcc -c -g -o $@ $^

test: test.o example.o
    gcc -o -g $@ $^ 
```

`%.o: %.c`这意味着任何`*.o`文件都应该从其等效的`c`文件中构建。

示例`test.o`应该建立自`test.c`并且`example.o`应该建立自`example.c`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:48:48.310

首先，生成可执行文件时必须包含example.o文件：`gcc -o test example.o test.o`。然后，您为目标 test.o 编写的依赖项不正确。你应该像这样拆分它：

```
test: test.o example.o
    gcc -o test test.o example.o
test.o: test.c
    gcc -c -Wall test.c
example.o: example.c
    gcc -c -Wall example.c 
```

然后，考虑使用变量来存储目标文件的名称、要传递给链接器/编译器的标志等……这将使您的生活更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:50:34.267

`test.o: test.c example.c example.h
gcc -g -c -Wall test.c gcc -g -c -Wall example.c`

根据您的代码 test.o 目标正在调用我看不到的 test.c example.c example.h 目标。

# wordpress - WordPress引导轮播

> ID：14642344
> 
> 赞同：0
> 
> 时间：2013-02-01T08:33:16.430
> 
> 标签：wordpress, twitter-bootstrap, carousel

我正在使用 320press.com Wordpress Bootstrap。以前从未使用过wordpress。我找到了如何将媒体添加到特色图片等，但仍然无法配置 wordpress，因此它显示轮播。

有人可以用 123 个步骤简要解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:01:11.403

在普通的 Wordpress 上，您需要为此安装一个插件。也许您可以使用本教程进行配置：[如何使 Bootstrap Carousel 显示 WordPress 动态内容](http://www.lanexa.net/2012/04/how-to-make-bootstrap-carousel-display-wordpress-dynamic-content/)

[Wordpress 轮播插件](http://wordpress.org/extend/plugins/search.php?q=carousel)

# java - 正则表达式负回溯

> ID：14642348
> 
> 赞同：0
> 
> 时间：2013-02-01T08:33:33.480
> 
> 标签：java, regex

> **可能的重复：**
> [远负回顾](https://stackoverflow.com/questions/14625969/far-negative-lookbehind)

几天来我一直在努力让它发挥作用。我昨天有一个类似的问题，但它并没有真正帮助。基本上我正在尝试创建一个匹配的模式：

`(a)`其中“a”可以是任何字母，例如：`[a-zA-Z]`. 但是，这不应该匹配：`paragraph (a), (b), (c), (d) or (e);`因为它以单词开头`paragraph`。如果只是`(a), (b), (c), (d) or (e)`这样，它应该会导致找到 5 个匹配项。

[http://regexr.com?33ka2](http://regexr.com?33ka2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:43:08.823

这就是你要找的

```
^(?![^()]*paragraph).*?\([a-zA-Z]\) 
```

使用`multiline`选项

* * *

相反，您可以通过首先获取所有不包含的行`paragraph`然后收集个人来分解问题`([a-zA-Z])`

```
 Pattern p=Pattern.compile("^(?!.*paragraph).*$",Pattern.MULTILINE);
 Matcher m=p.matcher(input);
 while(m.find())
 {
     Matcher mm=Pattern.compile("\\([a-zA-Z]\\)").matcher(m.group(0));
     while(mm.find())
     {
         System.out.println(mm.group(0));
     }
 } 
```

# wsdl - Override WSDL returned via ?wsdl in JAX-WS

> ID：14642349
> 
> 赞同：0
> 
> 时间：2013-02-01T08:33:36.223
> 
> 标签：wsdl, jax-ws, customization

Can I override WSDL being returned by `?wsdl`?

Looks like `wsdlLocation` can serve the purpose. According to multiple examples, I can write something like `WEB-INF/wsdl/DSystemWS.wsdl`. It simply doesn't work. I have tried relative path and absolute paths. The only thing I always get is something like:

> Exception in thread "main" com.sun.xml.ws.server.ServerRtException: [failed to localize] cannot.load.wsdl(/my/absolute/path/myservice.wsdl)

What's wrong?

# java - Invalid key length: 16 bytes

> ID：14642351
> 
> 赞同：1
> 
> 时间：2013-02-01T08:33:39.527
> 
> 标签：java, android

I am getting Invalid key length: 16 bytes on netbeans ide `keybyte` length is 16

```
SecretKey deskey = new SecretKeySpec(keybyte, "DESede/ECB/NOPADDING");
//enter code here..
Cipher c1 = Cipher.getInstance("DESede/ECB/NOPADDING");
c1.init(Cipher.ENCRYPT_MODE, deskey); 
```

but the same code works on android

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T09:04:52.383

您的密码算法（三重 DES）需要一个 24 字节的密钥，但您只给它 16 个字节，这可能有助于展示您如何构建密钥。

此外，您应该了解欧洲央行的局限性。由于相同的块总是被加密为相同的结果，因此密文的不透明性可能比您想象的要低。[有关详细信息，请参见此处](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)。

# ssl - 如何使用 unboundid ldap 侦听器在端口 636 上侦听 ldap 客户端请求

> ID：14642355
> 
> 赞同：0
> 
> 时间：2013-02-01T08:33:47.620
> 
> 标签：ssl, unboundid-ldap-sdk

我已经创建了一个测试环境。我有一个 ldap 客户端、ldap 侦听器（作为 ldap 代理）和一个 ldap 服务器。Ldap 客户端将 ldap 请求发送到端口`389`(SSL) 上的 ldap 代理。ldap 代理解码 ldap 请求并将它们转发到 port 上的 ldap 服务器`389`。并且代理成功地将 ldap 服务器的回复转发给 ldap 客户端。

我在 ldap 服务器上创建了 SSL 证书。而这次我测试了 ldap 客户端在端口 389 (SSL) 上向 ldap 代理发送 ldap 请求。ldap proxy 将请求转发到 ldap server 的 636 端口，proxy 将 ldap server 的回复成功转发给 ldap client。

但是当我尝试在双方都使用 SSL 时出现问题。我是说

> ldap 客户端（636 端口）-> ldap 代理（636 端口）-> ldap 服务器（636 端口）

我的客户抛出异常

> javax.net.ssl.SSLHandshakeException：握手期间远程主机关闭连接

我使用 unboundid ldap sdk 和 LdapDebugger 示例作为 ldap 代理。如何配置 ldaplistener 以接受 SSL 加密请求（端口 636）？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:47:05.500

如果您使用 LDAP SDK 提供的 ldap-debugger 工具，它目前仅支持 SSL 与后端服务器通信，但不支持与客户端通信。也就是说，“--useSSL”选项仅适用于 LDAP 调试器和后端目录服务器之间的通信，而不适用于客户端和 LDAP 调试器之间的通信。但是，因为这可能是一个非常有用的功能，所以我刚刚提交了一组添加此功能的更改，因此如果您检查并构建最新版本的 LDAP SDK，您会发现 ldap-debugger 工具有一个控制这一点的新“--listenUsingSSL”参数。

请注意，无论您是使用 ldap-debugger 工具还是通过 Java 代码创建了自己的侦听器，您都需要确保您拥有包含将呈现给客户端的 SSL 证书的 Java 密钥库。如果您使用的 LDAP 服务器是基于 Java 的（例如，随 LDAP SDK 提供的内存目录服务器），那么您可能已经有了它。否则，您需要创建一个。如果您只是出于测试目的这样做，那么自签名证书应该没问题（只要客户端信任它，或者配置为盲目信任所有证书）。

# vba - Send Ascii command in vba

> ID：14642358
> 
> 赞同：1
> 
> 时间：2013-02-01T08:34:03.553
> 
> 标签：vba, ascii

I am fairly new to vba. Appologies if this is a simple question, but after 3 days on google im starting to feel dumb.

I am writing a very simple POS program to take stock in a bar. Part of the program is a Till point function. I am writing in excel VBA. I have a generic pos printer connected to a generic cash drawer. Printer is connected via usb to pc.

My question: i am unable to get the cash drawer to kick open when a receipt is printed. It is printing the reciepts fine, but i do not how how to send a ascii - esc/pos command to the printer.

I know that i should use "chr(27), chr(112)" , but how?!

As a last resort Ive tried pasting those chars in a cell and used cells("A1").printout function but that just sends it to the printer as text to be printed and not a command.

Any help would be greatly appreciated.

Marchant

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:34:42.480

[该链接](http://www.excelforum.com/excel-programming-vba-macros/473633-send-printer-escape-commands-to-a-printer-using-vba.html)建议：

```
Option Explicit
Sub testme01()
Open "LPT1:" For Output As #1
Print #1, chr(27)+chr(112)
Close #1
End Sub 
```

# php - 在 PHP 中，如果数组中存在字符串，则添加 '-1'、'-2' 等，直到唯一

> ID：14642361
> 
> 赞同：-1
> 
> 时间：2013-02-01T08:34:27.043
> 
> 标签：php, arrays, string

在 PHP 中，我需要检查一个字符串是否存在于一个数组中。如果是，则应将“-1”添加到其值中，如果“string-1”再次存在，则应为“string-2”等，直到“string-N”是唯一的。

```
$string = 'string';
If $string exists in $array, $string = 'string-1'
If $string exists again in $array, $string = 'string-2'
If $string exists again in $array, $string = 'string-3'
etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:41:08.767

```
$filearray = //blah blah ... (you need to have this array filled before)
$filename = "string";
if (in_array($filename,$filearray))
{
    $i = 1;
    while (in_array($filename.'-'.$i,$filearray))
    {
        i++;
    }
    $filename = $filename.'-'.$i;
}
echo $filename; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:38:17.403

这应该有效：

```
$array = array("this", "is", "my", "string", "and", "it", "is", "a", "string");
$string = "string";

$i = 1;
foreach ($array as &$value) {
    if ($value == $string) {
        $value = $string . "-" . ($i++);
    }
}
unset($value); 
```

输出：

```
Array
(
    [0] => this
    [1] => is
    [2] => my
    [3] => string-1
    [4] => and
    [5] => it
    [6] => is
    [7] => a
    [8] => string-2
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T08:39:06.890

while循环的完美用例：

```
$tmp = $string;
$i = 1;
while(in_array($tmp, $array)) {
    $tmp = $string . '-' . $i;
    ++$i;
}
$string = $tmp; 
```

例子：

```
$string = 'test';
$array = ['foo', 'bar', 'test', 'test-1']; 
```

输出：

```
test-2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:09:31.123

我假设您需要在数组中的每个字符串之后附加 -1, -2... 如果它不止一次出现。检查此代码：

```
<?php

$array = array("this", "is", "my", "string", "and", "it", "is", "a", "string", "do", "you", "like", "my", "string");
$ocurrences = array();

$iterator = new ArrayIterator($array);

while ($iterator->valid()) {
    $keys = array_keys($ocurrences);
    if (in_array($iterator->current(), $keys)) {
        $array[$iterator->key()] = $iterator->current() . '-' . $ocurrences[$iterator->current()];
        $ocurrences[$iterator->current()]++;
    }
    else {
        $ocurrences[$iterator->current()] = 1;
    }
    $iterator->next();
}

print_r($array); 
```

它将打印：

```
Array
(
    [0] => this
    [1] => is
    [2] => my
    [3] => string
    [4] => and
    [5] => it
    [6] => is-1
    [7] => a
    [8] => string-1
    [9] => do
    [10] => you
    [11] => like
    [12] => my-1
    [13] => string-2
) 
```

# mysql - MySQL查询以选择字段为NULL或字段日期值不大于另一个日期的日期

> ID：14642362
> 
> 赞同：1
> 
> 时间：2013-02-01T08:34:33.177
> 
> 标签：mysql

我有这个`MySQL`查询：

```
SELECT DISTINCT
    *
FROM
    students s
        LEFT JOIN
    (SELECT 
        *
    FROM
        studentabsences a1
    WHERE
        (a1.absence_date = '2013-01-28')) a ON a.absence_student_id = s.student_id
        LEFT JOIN
    (SELECT 
        *
    FROM
        studentabsencenotes b1
    WHERE
        (b1.absence_note_date = '2013-01-28')
    GROUP BY absence_note_student_id) b ON b.absence_note_student_id = s.student_id
        INNER JOIN
    studentdates sd ON sd.student_id = s.student_id
        INNER JOIN
    coursecategory ctc ON s.student_course_category_id = ctc.category_id
WHERE
    '2013-01-28' BETWEEN sd.student_startdate AND sd.student_enddate
ORDER BY s.student_lastname , s.student_firstname 
```

现在我想添加另一个`WHERE` `clause`来选择**不**大于`sd.student_break_date`2013-01-28 的行但也选择空字段

例如：

```
WHERE '2013-01-28' >= sd.student_break_date 
```

这可行，但未列出那些具有`NULL`值的行。`sd.student_break_date`

乱七八糟的吧？我的问题是：如何选择日期不高于 2013-01-28 的空字段和字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:44:52.157

尝试这个 ：：

```
WHERE sd.student_break_date is null OR  '2013-01-28' >= sd.student_break_date 
```

或者你可以试试::

```
WHERE sd.student_break_date is null OR  sd.student_break_date<'2013-01-28' 
```

或者 ：：

```
WHERE IFNULL(sd.student_break_date,'2013-01-27') <'2013-01-28' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:02:38.427

对于这段代码来说，BETWEEN 是一个奇怪的

```
'2013-01-28' BETWEEN sd.student_startdate AND sd.student_enddate 
```

你实际上是在做 sd.student_startdate>'2013-01-28' AND sd.student_enddate<'2013-01-28'。请注意，其中没有 = ，因此在这两种情况下它实际上都*排除*了第 28 位。如果您想在子句中实际包含第 28 个，那么 BETWEEN 并没有任何用处。

至于你的问题，假设措辞不好的问题意味着你想要一个 sd.studen_break_date 为空或小于 28 日，那么它会是

```
WHERE sd.student_startdate>'2013-01-28' AND sd.student_enddate<'2013-01-28' AND (sd.student_break_date is null OR sd.student_break_date<='2013-01-28') 
```

# c - （OpenGL）将“旧”矩阵推入堆栈

> ID：14642364
> 
> 赞同：1
> 
> 时间：2013-02-01T08:34:48.707
> 
> 标签：c, opengl, matrix

我目前正在尝试通过 OpenGL 来了解基础知识。当时我尝试渲染一个带有金字塔的浮动立方体。我希望 Cube 在 Input 上旋转（这已经在工作）并且 Pyramid 保持在它应该在的位置。

在弄清楚使用后`Push-`，`PopMatrix`我设法只旋转了立方体。我的问题是，只要我松开钥匙，立方体就会停止旋转。`player.X`那时并没有`Player.Z`重置（检查）。

所以我的猜测是`PushMatrix`把某种标准矩阵放到堆栈上，然后旋转它并显示它。因为`1 * x`总是相等`x`，所以没有旋转。

所以问题是：我如何设法将“旧”矩阵推入堆栈，而不是新矩阵？

```
glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

glPushMatrix();
glRotatef( -(player->Z), 1.0f, 0.0f, 0.0f );
glRotatef( -(player->X), 0.0f, 1.0f, 0.0f );
glBegin( GL_QUADS );
//Draw Cube
glEnd();
glPopMatrix(  );

glBegin( GL_TRIANGLES );
//Draw Pyramid
glEnd();

glFlush();
SwapBuffers (hDC); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:47:28.237

glPushMatrix() 不会将“标准”矩阵推入堆栈，它会推入*当前*矩阵。希望您已经在某个时候使用 a 初始化了矩阵`glLoadIdentity()`，可能还有一些初始转换来设置视图，所以这就是将要推送的内容。

您通常不应该逐帧更新该矩阵，因为错误最终会累积。

相反，在一些更新循环中更新您的旋转值，而不是在按键例程中。

另外，请注意，这种使用 GL 进行渲染的方法被认为已弃用。推荐的方法是使用可编程管道，这涉及创建您自己的矩阵（以及其他更改）。

（如果您迫切希望保持持久变换，同时还要推送和弹出以呈现其他内容，则可以使用 a 读取当前矩阵`glGet()`，将其存储在某处，然后执行 a`glLoadMatrix()`稍后再次恢复它......但不要'不这样做。）

# android - 更新 ExpandableListView 组的其中一个子项的有效方法？

> ID：14642371
> 
> 赞同：0
> 
> 时间：2013-02-01T08:35:20.803
> 
> 标签：android, expandablelistview, expandablelistadapter

我有一个带有一些组的 ExpandableListView，每个组只有一个孩子，上面有一个字符串。

我有一个线程获取一些更新的数据，并且**每秒**调用一个处理程序来更新 ExpandableListView 的一个子项的字符串，然后调用此方法来刷新视图并向用户显示更新的数据：`((BaseExpandableListAdapter) mAdapter).notifyDataSetChanged();`

这是更新处理程序：

```
infoUpdateHandler = new Handler(){
            @Override
            public void handleMessage(Message msg) {
                super.handleMessage(msg);   
                children[2][0]=getUpdatedInfo();
                ((BaseExpandableListAdapter) mAdapter).notifyDataSetChanged();
            }
        }; 
```

问题是当我滚动可扩展列表视图时，我可以看到滚动显示性能低下，有时会停止。我认为这是因为此调用`((BaseExpandableListAdapter) mAdapter).notifyDataSetChanged();`正在更新所有 ExpandableListView。

**不存在更新可扩展列表视图的更好方法吗？也许一种只更新您想要更新的孩子的方法？**

谢谢

# javascript - 使用jquery将div放在窗口空白部分的中间

> ID：14642374
> 
> 赞同：2
> 
> 时间：2013-02-01T08:35:26.943
> 
> 标签：javascript, jquery, css, responsive-design

在我的模板中，我将 div 固定在主包装器 div 的左侧，在其余部分中，我想将另一个 div 框完美地放置在中间，即使在窗口重新调整大小时也是如此。

我用 jquery 得到了当前的窗口大小：

```
<script type=text/javascript>
$(window).resize(function() {
       var my_window = $(window).width();
});
</script> 
```

html:

```
<div id="wrapper">
<div id="rightbox"></div>
<div id="leftbox"> </div>
</div> 
```

CSS：

```
#wrapper{
position:absolute;
width:100%;
height:100%;
background:green;}

#leftbox{
position:fixed;
width:100px;
height:100%;
top:0;left:0;
background:red;}

#rightbox{
position:fixed;
width:400px;
height:100px;
bottom:100px;
left:50px;
background:blue;} 
```

演示：http: [//jsfiddle.net/NpeRZ/](http://jsfiddle.net/NpeRZ/)

现在我想放置`rightbox div`在任何屏幕分辨率的绿屏中间，所以我想要灵活的宽度`rightbox div`。如何使用 jquery 来设置 rightbox 始终在中间。同样根据jquery`my_window`值，我想为rightbox div设置不同的margin-left和margin-right。

```
for my-window 1024px :margin-left = 100px,
for my-window 768px  :margin-left = 80px.
for my-window 640px  :margin-left = 60px.
for my-window 480px  :margin-left = 40px.
for my-window 240px  :margin-left = 20px. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:47:47.937

尝试这个：

```
#rightbox{
position:fixed;
width:400px;
height:100px;
left: 100px;
right: 0px;
top: 0px;
margin: auto;
bottom:0px;
background:blue;
} 
```

左边将是左框架或 div 的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:49:14.590

你不必使用Jquery，只需将右侧框的css更改为：

```
#rightbox{
position:fixed;
width:400px;
height:100px;
left:50%;
margin-left:-150px;    
top:50%;
margin-top:-50px;
background:blue;} 
```

刚刚试了一下，完美运行。

# networking - 每个 NAT 下的 P2P 网络

> ID：14642379
> 
> 赞同：1
> 
> 时间：2013-02-01T08:35:48.277
> 
> 标签：networking, udp, p2p, nat, hole-punching

我正在做一些移动项目，需要与两个设备进行 P2P 通信。
我遇到了问题。（因为智能手机很少有公共IP）

我找到了一些答案。它是“UDP打孔”。

我想我在概念上 100% 了解“UDP 打孔”，并编写了一些代码。但它不起作用。

这是我的情况。

```
Device A connected NAT(A) for Wi-Fi.  
Device B connected NAT(B) for Wi-Fi.  
NAT(A) and NAT(B) is different one.  

Relay Server S bind socket and waiting for devices. (S is WebServer but Network Status is good.)  

At the first, A and B send dummy packet to S. Then S save UniqueID(to tell A and B), Public IP, Port.  

And S send information to each device A and B.   

Like this:  
 - IP Address and Port Number about A. -> send to B  
 - IP Address and Port Number about B. -> send to A  

Now A and B send UDP packet to other device based on information(IP Address and Port Number) from S.  
(15 per second. using same socket that used server-device session) 
```

但它不起作用。（实际上是断断续续的工作。可能10次一次？我不知道为什么成功和失败。没有任何微小的共同关系。）

我认为这不是 NAT 类型的问题。我测试了韩国，韩国 90% 的 NAT 不是 Symmetric Cone。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:47:10.280

1.  根据 NAT 的实现，它可能根本不起作用。NAT 打洞需要一些特殊形式的 NAT 实现：公共 IP 地址），然后在一段有限的时间内将该端口上的传入 UDP 流量重定向回 NAT 后面的主机（更改端口号并更改接收器 IP）。这就是它的工作原理。b) 另一种可能性是，NAT 只将流量从特殊主机重定向到打开的端口到 NAT 后面的主机。那是它行不通的地方。c) 什么“刷新”传入流量规则的超时不是标准化的。超时可能会因传入流量而延长。

2.  对于某些实现，UDP 状态似乎也很快过期（在某些情况下在 100 毫秒内）。这意味着，您要么需要继续向服务器“S”发送保持活动数据包，要么至少需要在小于 100 毫秒的时间内发送 UDP 数据包（例如每 50 毫秒或 20 毫秒一次）。

# c# - 使用 Windows Phone 应用程序中的 Bugsense 报告中的堆栈跟踪跟踪生成错误的位置

> ID：14642384
> 
> 赞同：1
> 
> 时间：2013-02-01T08:36:11.130
> 
> 标签：c#, windows-phone-7, bugsense

我在 windows phone 商店里有一个应用程序有一段时间了，一些人一直在给我发电子邮件关于错误。我无法复制这些问题，所以我在我的应用程序中添加了 bugsense。现在我开始收到很棒的错误报告。

我今天收到的一份报告在堆栈跟踪中包含以下内容

```
at Microsoft.Phone.Reactive.ObservableExtensions.b__3[TSource](Exception exception)
at Microsoft.Phone.Reactive.AnonymousObserver`1.Error(Exception exception)
at Microsoft.Phone.Reactive.AbstractObserver`1.OnError(Exception exception)
at Microsoft.Phone.Reactive.AnonymousObservable`1.AutoDetachObserver.Error(Exception exception)
at Microsoft.Phone.Reactive.AbstractObserver`1.OnError(Exception exception)
at Microsoft.Phone.Reactive.Observable.<>c__DisplayClass161`1.<>c__DisplayClass163.b__160()
at Microsoft.Phone.Reactive.CurrentThreadScheduler.Trampoline.Run()
at Microsoft.Phone.Reactive.CurrentThreadScheduler.EnsureTrampoline(Action action)
at Microsoft.Phone.Reactive.AnonymousObservable`1.Subscribe(IObserver`1 observer)
at Microsoft.Phone.Reactive.Observable.<>c__DisplayClass323`1.<>c__DisplayClass325.b__31e()
at Microsoft.Phone.Reactive.ThreadPoolScheduler.<>c__DisplayClass5.b__3(Object _)
at System.Threading.Timer.ring() 
```

评论是 操作已超时。

问题是我在整个应用程序的各个地方都使用了 Observable，那么我如何跟踪错误的产生位置？

编辑：我刚刚发现了我正在使用的 Observable.TimeOut，这可能是原因吗？

```
IObservable<IEvent<TheWeatherBug.GetLocationListCompletedEventArgs>> observable =
            Observable.FromEvent<TheWeatherBug.GetLocationListCompletedEventArgs>(WeatherBugService, "GetLocationListCompleted").Take(1);

            var ObservableTimeout = Observable.Timeout(observable, TimeSpan.FromSeconds(10));

            ObservableTimeout.Subscribe(w =>
            {
                pbarSearch.Visibility = System.Windows.Visibility.Collapsed;

                if (w.EventArgs.Error == null)
                {
                    locations = w.EventArgs.Result;

                    foreach (TheWeatherBug.ApiLocationData ap in locations)
                    {
                        if (ap.City.Contains(location))
                            if (!lbxLocations.Items.Contains(ap.City + " - " + ap.Country))
                                lbxLocations.Items.Add(ap.City + " - " + ap.Country);
                    }

                    if (lbxLocations.Items.Count == 0)
                        MessageBox.Show("Sorry could not find a city called " + location);
                }
            }); 
```

# entity-framework - 如何首先配置 EF 5.0 代码以使用每种枚举类型创建单独的表

> ID：14642393
> 
> 赞同：0
> 
> 时间：2013-02-01T08:36:38.323
> 
> 标签：entity-framework

我在代码优先模型中使用了以下枚举

```
public enum Role
    {
        Reviewer = 1,
        Requester = 2,
        Approver = 3
    } 
```

它用于用户实体，如下所示

```
 public class User
    {
        public int Id { get; set; }

        public string Name { get; set; }

    public string Email { get; set; }

        public Role Role { get; set; }

    } 
```

EF 在数据库中创建单个表用户，并且角色作为 int 存储在那里。我在这里需要的是另一个名为“角色”的表，带有 Id 和 Desc。Id 是枚举的值，Desc 是它的名称。该表将在模型创建时自动填充。

EF有一些功能吗？还是我必须为角色创建另一个实体并手动填充？

# django - Django 消息框架：消息作为字符串

> ID：14642398
> 
> 赞同：1
> 
> 时间：2013-02-01T08:37:03.017
> 
> 标签：django, django-templates

我在我的视图中添加这样的消息：

```
from django.contrib import messages
messages.success(request, 'contact-ok') 
```

如何检查特定消息的存在？我试过这样

```
{% if messages %}
    {% for message in messages %}
        {% if message == 'contact-ok' %}
            alert('ok');
        {% endif %}                    
    {% endfor %}
{% endif %} 
```

但不知何故，消息可以像字符串一样打印，但不能像字符串那样比较，并且不会调用警报。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:48:02.357

中的每条消息`messages`都是一个 python 对象，而不是一个字符串。您可以在 中查看`Message`课程[`django.contrib.messages.storages.base`](https://github.com/django/django/blob/master/django/contrib/messages/storage/base.py#L12)。您会注意到每个`Message`都有一个`message`属性，因此不要尝试将对象与字符串进行比较，而是使用对象的 message 属性：

```
{% if message.message == 'contact-ok' %} 
```

# c# - MVC 局部视图

> ID：14642401
> 
> 赞同：3
> 
> 时间：2013-02-01T08:37:11.723
> 
> 标签：c#, asp.net-mvc-3

我正在尝试重用一些代码，并且在使用 MVC 时，部分视图似乎是最好的方法。

我创建了一个继承自 IEnumerable 的局部视图（见下文）。

```
@model IEnumerable<Models.facility>

<div class="display-field">
    @foreach (var facility in Model)
    {
        <li>
            @facility.name
        </li>
    }
</div> 
```

嵌入此视图的视图是这样的：

```
<div class="display-field">
    <div> @{Html.RenderPartial("FacilityPartial");} </div>
</div> 
```

所以现在的问题。

我收到一个空引用错误，我可以看到模型变量为空。

错误：

> 你调用的对象是空的。

有人可以告诉我我是否在做正确的事情以及我哪里出错了，除了它是空的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:48:23.693

使用 Html.Partial。考虑这个例子。

**索引视图（主页）**

```
 @{
        ViewBag.Title = "Home Page";
        //Test model to be passed to the partial view
        var products = new List<Product> { new Product{ProductName="Test product 1", ProductId=1234}};
    }
@Html.Partial("_TestPV", products) 
```

**_TestPV（局部视图）**

```
@model IEnumerable<Product>
<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            ProductName
        </th>
    </tr>
@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.ProductName)
        </td>
    </tr>
}
</table> 
```

**输出：**

![在此处输入图像描述](../Images/9b452a9a7ae595d2485150a9a303a20a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T08:58:28.703

您忘记将参数传递给局部视图，因此是空引用。应该：

```
@{Html.RenderPartial("FacilityPartial", someIEnumerableVariableHere);} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-23T22:33:39.423

当您调用时`@{Html.RenderPartial("FacilityPartial");}`，您提供了局部视图的名称，但您忘记将模型作为参数包含在内。这就是为什么您收到空引用错误的原因，因为在呈现视图时，它正在尝试访问您在视图中声明的模型：

```
@model IEnumerable<Models.facility> 
```

如果您将调用行更改为`@{Html.RenderPartial("FacilityPartial", model);}`它应该可以工作。视图现在可以作用于传递给它的模型。

* * *

作为旁注，@Jobbert Enamno 接受的答案与您在问题中使用的答案`@Html.Partial`相反。`@Html.RenderPartial`这些之间的区别可能会让您或其他查看此问题的人感到困惑：

`@Html.Partial` **将渲染视图返回**为 a `MvcHtmlString`，因此您可以根据需要将其存储在变量中。

`@Html.RenderPartial`不返回任何内容，即 void，因此直接输出到`Response`流。

在性能方面，通常使用后者更好。有关更详细的答案，请参阅[此](https://stackoverflow.com/questions/5248183/html-partial-vs-html-renderpartial-html-action-vs-html-renderaction)问题。

# javascript - 使用click方法导入所有xml属性值

> ID：14642402
> 
> 赞同：-1
> 
> 时间：2013-02-01T08:37:20.127
> 
> 标签：javascript, jquery, ajax

我有这种类型的带有大量数据的 xml：-

```
<root>
      <child1 id="4331" value="twenty-twenty">
                 <child2 id="4332" value="India">
                            <child4 id="4334" value="Mumbai Indian"></chlild4>
                            <child5 id="4335" value="Rajshthan Royal"></child5>
                 </child2>
                 <child3 id="4333" value="Pakishtan">
                             <child6 id="4336" value="Arngabad"></child6>
                             <child7 id="4337" value="Punjab"></child7>
                 </child3>
      </child1>
</root> 
```

我试过这个

```
 <html>                                                                  
 <head>                                                                  
 <script type="text/javascript" src="jquery.js"></script>          
 <script type="text/javascript">                                         
 $(document).ready(function() {
   $("button").click(function() {
   });
 });  
 $(function() {
$.ajax({
             type: "GET",
             url: "atry.xml",
             dataType: "xml",
             success: function(xml) { 
             data = xml;
             $(xml).find('*').each(function(){
    console.log($(this).attr('id'));
    console.log($(this).attr('value'));
    });//close $.each(
    }
 }); //close click(
});
 </script>                                                               
 </head>                                                                 
 <body>                                                                  
   <!-- we will add our HTML content here --> 
 <button>Link</button>   
 </body>                                                                 
 </html> 
```

我正在尝试这个但没有输出显示...

使用带有点击事件的jquery导入所有子属性...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:44:39.233

您可以使用 jquery 尝试此代码：

```
var xml  = '<root><child1 id="4331" value="twenty-twenty"><child2 id="4332" value="India"><child4 id="4334" value="Mumbai Indian"></chlild4><child5 id="4335" value="Rajshthan Royal"></child5></child2><child3 id="4333" value="Pakishtan"><child6 id="4336" value="Arngabad"></child6><child7 id="4337" value="Punjab"></child7></child3></child1></root>';

var $root = $(xml);
$root.find('*').each(function(){
    console.log($(this).attr('id'));
    console.log($(this).attr('value'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:44:29.333

你可以试试这样

```
$(document).ready(function() {
  $("button").click(function() {
     $.ajax({
             type: "GET",
             url: "atry.xml",
             dataType: "xml",
             success: function(xml) { 
             data = xml;
             $(xml).find('*').each(function(){
    console.log($(this).attr('id'));
    console.log($(this).attr('value'));
    });//close $.each
    }
 });  //cloase ajax 

  }); //close button click

}); //close ready 
```

# c# - 在c#中下载websocket dll

> ID：14642404
> 
> 赞同：0
> 
> 时间：2013-02-01T08:37:34.260
> 
> 标签：c#, websocket

我在哪里可以下载 System.Net.WebSockets dll 来使用它

```
System.Net.WebSockets 
```

请给我一些链接，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:44:28.983

`System.Net.WebSockets`命名空间是 .NET Framework 4.5 的一部分（它位于 System.dll 程序集中）。

# wsdl - 使用 JAX-WS 的 XML 序列

> ID：14642405
> 
> 赞同：4
> 
> 时间：2013-02-01T08:37:39.757
> 
> 标签：wsdl, jax-ws, code-generation

有没有办法让 JAX-WS 生成的默认 WSDL（通过返回`?wsdl`）使用 XML`choice`而不是`any`and `sequence`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:29:58.180

`<types/>`我假设您指的是 WSDL 部分中的 XML 模式。此模式的生成不受 JAX-WS 管理，而是由 JAXB 规范管理。这是 JAX-WS 中数据绑定的规范。

`@XMLElements`但要真正回答您的问题：是的，您可以在表示您的数据类型的类中使用适当的注释来做到这一点。例如，采用这样的 Web 服务接口：

```
@WebService
public interface Chooser {

    String chooseOne(Choice myChoice);

} 
```

那么你的 XSD 的内容取决于`Choice`类的结构。您可以通过以下方式强制生成`choice`元素：

```
public class Choice {

    @XmlElements(value = { @XmlElement(type = First.class),
            @XmlElement(type = Second.class) })
    private Object myChoice;

} 
```

类`First`和`Second`是选择中的可能元素。从此代码生成的架构如下所示：

```
<xs:complexType name="choice">
  <xs:sequence>
    <xs:choice minOccurs="0">
      <xs:element name="myChoice" type="tns:first"></xs:element>
      <xs:element name="myChoice" type="tns:second"></xs:element>
    </xs:choice>
  </xs:sequence>
</xs:complexType> 
```

`choice`这仍然将a包装起来`sequence`，但由于 中只有一个元素`sequence`，这并不重要。

# c++ - 如何在 Eclipse 中构建代码之前运行 vcvars32.bat？

> ID：14642406
> 
> 赞同：3
> 
> 时间：2013-02-01T08:37:41.960
> 
> 标签：c++, eclipse, build, nmake

我想用 cl 编译器编译我的 c++ 代码。因此，我在 Eclipse 中启动了一个“c++ makefile 项目”。然后我写了我的make文件。我必须首先运行 vcvars32.bat 才能运行 cl，所以我在 make 文件中编写了该命令，但它不能正常工作。我现在该怎么办？在构建代码之前如何运行该命令？顺便说一句，我正在使用 nmake。

我的制作文件如下：

```
OBJS =      helloWorld.o

TARGET =    helloWorld.exe

all:    $(TARGET)

helloWorld.exe: 
    **vcvars32.bat**
    cl helloWorld.cpp
    rm -f *.obj

clean:
    rm -f helloWorld.exe *.obj 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:27:24.797

打开命令行，运行 vcvars32.bat，然后从同一命令行启动 eclipse。

前两个步骤可以通过转到合并为一个`Start->Visual Studio xxx->Visual Studio Tools->VS command prompt`（确切命名取决于您安装的内容）

# performance - AES 比 RSA 加密更快？

> ID：14642408
> 
> 赞同：5
> 
> 时间：2013-02-01T08:38:01.267
> 
> 标签：performance, encryption, compare, aes, rsa

我正在尝试在 ubuntu 中使用 openssl 测试 RSA 和 AES 的速度。

我用下面的代码来测试它。

```
echo -n "0123456789012345" > message.txt

openssl genrsa -out private.pem 1024
openssl rsa -in private.pem -out public.pem -pubout

for i in {1..1000}
do
    openssl rsautl -encrypt -inkey public.pem -pubin -in message.txt -out message_enc.txt
done

for i in {1..1000}
do
    openssl rsautl -decrypt -inkey private.pem -in message_enc.txt -out message_dec.txt
done

for i in {1..1000}
do
    openssl enc -e -aes-128-cbc -in message.txt -out aes.bin -K ddf -iv 345

done 
```

结果：

```
$ time ./rsa_enc 
real    0m3.697s
user    0m1.308s
sys     0m0.680s

$ time ./rsa_dec
real    0m14.273s
user    0m3.172s
sys     0m0.696s

$ time ./aes

real    0m3.790s
user    0m1.408s
sys     0m0.500s 
```

它表明 RSA 加密比 AES 加密更快。

AES不应该更快吗？我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:58:32.513

除了@jbtule 关于 RSA 和 AES 加密不同目的的正确观点之外，您的基准测试设计存在根本性缺陷。

您在这里测量的不仅仅是 RSA 或 AES 加密例程，而是这些`openssl`命令的整个执行。

虽然在外部程序之外使用计时器来测量其功能之一的执行情况是有意义的，但这样做需要花费时间做其他事情（如解析命令行参数、找到正确的 OpenSSL 子模块、打开文件，读取文件）与执行定时功能所需的时间相比可以忽略不计。

在这里，显然情况并非如此，尤其是对于如此简短的测试消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:46:56.703

为什么无论如何哪个更快很重要。你真的不能用它们来做同样的事情。RSA 只能加密[非常少量的数据](https://stackoverflow.com/a/11823119/637783)。

但通常，如果您需要使用 RSA 加密大型内容，您可以使用它加密随机 AES 密钥和 aes 来处理您的明文，但更多的是出于安全原因，基于块大小和解密速度而不是加密速度。

# javascript - 使用切换或显示/隐藏切换 Div 内容

> ID：14642412
> 
> 赞同：0
> 
> 时间：2013-02-01T08:38:44.410
> 
> 标签：javascript, jquery, toggle, show-hide

我希望通过一个简单的 jquery 问题获得一些指导。

当我按下按钮时，我试图显示/隐藏内容。我有 2 个按钮。我希望一个按钮显示 1 个 div 的内容，我希望另一个按钮在按下时隐藏第一个 div 的内容并显示第二个 div 的内容。

我在这里创建了一个 JSFiddle [http://jsfiddle.net/Yn3tt/1/](http://jsfiddle.net/Yn3tt/1/)

我的想法是，我可以切换一个名为的类，该类`noDisplay`将设置在我不想显示的 div 上（因此隐藏它）我不确定 jquery 可以这样做吗？

我也不确定这是否更容易使用 jquery 显示/隐藏类来实现这一点？

谢谢

我的HTML如下

```
<button id="opt1">Option 1</button>
<button id="opt2">Option 2</button>

<div class="yesDisplay">
<p>Show me when I press Option 1 and hide Option 2 content</p>
</div>

<div class="noDisplay">
<p>Show me when I press Option 2 and Hide Option 1 content</p>
</div> 
```

我的 CSS 很简单

```
.noDisplay{display:none;}

.yesDisplay{display:block;} 
```

演示在这里[http://jsfiddle.net/Yn3tt/1/](http://jsfiddle.net/Yn3tt/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:44:21.393

使用`hide()` `show()`jquery函数..`click()`点击时触发事件......我尽可能简单，这样你就会很容易理解

**CSS**

```
.noDisplay{display:none;}
.yesDisplay{display:none;} 
```

**查询**

```
 $('#opt1').click(function(){
     $('.yesDisplay').show(); //class selector for the div to show
     $('.noDisplay').hide();
 });

$('#opt2').click(function(){
     $('.noDisplay').show();
   $('.yesDisplay').hide();
}); 
```

但是你可以使用类似..的函数`toggle()` `slideToggle()`来减少你的代码

[在这里摆弄](http://jsfiddle.net/bipen/Yn3tt/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:46:28.883

更新了你的小提琴：http: [//jsfiddle.net/Yn3tt/3/](http://jsfiddle.net/Yn3tt/3/)

```
$('#opt1').click(function(){
    $('.yesDisplay').show();
    $('.noDisplay').hide();
});

$('#opt2').click(function(){
    $('.yesDisplay').hide();
    $('.noDisplay').show();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T08:50:49.383

```
u can do this without css ,i mean using jquery
<script>
      $(".yesDisplay").hide();
      $(".noDisplay").hide();
  $("#opt1").click(function(){
      $(".yesDisplay").show();
     $(".noDisplay").hide();
});

  $("#opt2").click(function(){
      $("noDisplay").show();
     $(".yesDisplay").hide();
});
</script>

<button id="opt1">Option 1</button>
<button id="opt2">Option 2</button>

<div class="yesDisplay">
<p>Show me when I press Option 1 and hide Option 2 content</p>
</div>

<div class="noDisplay">
<p>Show me when I press Option 2 and Hide Option 1 content</p>
</div> 
```

你可以在这里查看[http://jsfiddle.net/Yn3tt/7/](http://jsfiddle.net/Yn3tt/7/)

# android - Saxparsing....无异常...无错误....无输出

> ID：14642413
> 
> 赞同：0
> 
> 时间：2013-02-01T08:38:46.307
> 
> 标签：android, parsing, sax

在这个 sax 解析代码中，我得到了加载数据的屏幕，但 xml 文件没有被解析.....任何人都可以尽快帮助这个，因为我必须提交 thos 应用程序......

我的代码..

```
 public class Xmlfile extends Activity {
// For Single Data
private List<String> item = new ArrayList<String>();
public ArrayList<StudentDetails> data = new ArrayList<StudentDetails>();

Xmlfile x;

private boolean in_name;
private boolean in_formatted_address;
private boolean in_lat;
private boolean in_lng;
StudentDetails d;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

    x = this;
    new StudentTask().execute();
}

public class StudentTask extends AsyncTask<Void, Void, Void> {
    ProgressDialog pd;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
        pd = ProgressDialog.show(x, "Please Wait", "Loading Data");

        pd.setCancelable(true);
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        try {

            URL u = new URL(
                    "https://maps.googleapis.com/maps/api/place/textsearch/xml?query=restaurants+in+Vijayawada&sensor=true&key=AIzaSyC-bRTW12s9l3iZ57wPZGrH8kRMpQPeF5s");
            InputSource i = new InputSource(u.openStream());

            SAXParserFactory sx = SAXParserFactory.newInstance();
            SAXParser msx = sx.newSAXParser();

            XMLReader reader = msx.getXMLReader();

            MyXmlHandler myRSSHandler = new MyXmlHandler();

            reader.setContentHandler(myRSSHandler);
            // Reading xml file from raw folder.
            // InputStream istream = null;
            // istream =
            // getApplicationContext().getResources().openRawResource(R.raw.studentdetails);

            // InputSource myInputSource = new
            // InputSource(rssUrl.openStream());

            // myXMLReader.parse(myInputSource);
            reader.parse(new InputSource(u.openStream()));

        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

        // setListAdapter(new
        // ArrayAdapter<String>(x,android.R.layout.simple_list_item_1,
        // item));
        //          StudentDetails d = new StudentDetails();
               //           data.add(d);
        ListView l=(ListView)findViewById(R.id.list);
         Demo demo=new Demo();
        l.setAdapter(demo);
        pd.dismiss();
    }

}

// 1)Implementing Handler to get data from xml file
public class MyXmlHandler extends DefaultHandler {
    private boolean in_name = false;
    private boolean in_formatted_address = false;
    private boolean in_lat = false;
    private boolean in_lng = false;

    // private boolean in_clas = false;
    // private boolean in_phno = false;
    // private boolean in_email = false;

    String name;
    String formatted_address;
    public String lat, lng;

    @Override
    public void startDocument() throws SAXException {
        // TODO Auto-generated method stub
    }

    @Override
    public void endDocument() throws SAXException {
        // TODO Auto-generated method stub
    }

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        if (localName.equals("name")) {
            d=new StudentDetails();

            this.in_name = true;
        } else if (localName.equals("formatted_address")) {

            this.in_formatted_address = true;

        } else if (localName.equals("lat")) {

            this.in_lat = true;
        }

        else if (localName.equals("lng")) {

            this.in_lng = true;
        }
    }

    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {
        if (this.in_name) {

            name = new String(ch, start, length);
            d.setName(name);
            //Log.v("name========", name + item.size());

        }

        else if (this.in_formatted_address) {

            formatted_address = new String(ch, start, length);
            d.setFormatted_address(formatted_address);

        } else if (this.in_lat) {

            lat = new String(ch, start, length);

            d.setLat(lat);

        }

        else if (this.in_lng) {

            lng = new String(ch, start, length);
            d.setLng(lng);

        }

    }

public void endElement(String uri, String localName, String qName)
        throws SAXException {
    // TODO Auto-generated method stub
    if (localName.equals("name")) {

        this.in_name = false;

    } else if (localName.equals("formatted_address")) {
        this.in_formatted_address = false;

    }

    else if (localName.equals("lat")) {
        this.in_lat = false;

    } else if (localName.equals("lng")) {
        this.in_lng = false;
        data.add(d);
    }

}
}
public class Demo extends BaseAdapter

{
    Activity context;
    private List<String> s;

    public Demo() {
        super();
        this.context = context;
        this.s = s;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        // return LISTITEMS.size();
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return data.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View v = convertView;

        if (v == null) {
            LayoutInflater vi = LayoutInflater.from(parent.getContext());
            v = vi.inflate(R.layout.activitymain, null);
        }

        final StudentDetails studentdetails=data.get(position);
        // ImageView img=(ImageView)v.findViewById(R.id.img);
        TextView name = (TextView) v.findViewById(R.id.name);
        TextView formatted_address = (TextView) v
                .findViewById(R.id.formatted_address);
        TextView lat = (TextView) v.findViewById(R.id.lat);
        TextView lng = (TextView) v.findViewById(R.id.lng);

        // c.moveToPosition(position);

        // img.setImageResource(Integer.parseInt(c.getString(0)));
        name.setText(data.get(position).getName());
        formatted_address
                .setText(data.get(position).getFormatted_address());
        lat.setText(data.get(position).getLat());
        lng.setText(data.get(position).getLng());

        return v;
    }

}
      } 
```

吸气剂和吸气剂....

```
 public String name,formatted_address,lat,lng;

public StudentDetails(String n,String f,String la,String ln)
{
    this.name=n;
    this.formatted_address=f;
    this.lat=la;
    this.lng=ln;

}
  public StudentDetails(){

    }

public String getName() {
    return name;
}
public void setName(String name) {
       this.name = name;
   }

public String getFormatted_address() {
    return formatted_address;
}

public void setFormatted_address(String Formatted_address) {
       this.formatted_address = formatted_address;
   }
public String getLat() {
    return lat;
}
public void setLat(String Lat) {
       this.lat = lat;
   }

public String getLng() {
    return lng;
}

public void setLng(String Lng) {
       this.lng = lng;
   }

       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:26:56.713

尝试将您的方法更改为`characters(char[] ch, int start, int length)`：

```
 @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {

        if (this.in_name) {
            name += new String(ch, start, length);

            /* What does list 'item' actually do in your code? */
            item.add(name);
            Log.v("name========", name + item.size());

        } else if (this.in_formatted_address) {
            formatted_address += new String(ch, start, length);
            item.add(formatted_address);

        } else if (this.in_lat) {
            lat += new String(ch, start, length);
            item.add(lat);

        } else if (this.in_lng) {

            lng += new String(ch, start, length);
            item.add(lng);
        }
    } 
```

以及为什么在`endElement(String uri, String localName, String qName)`方法中将所有字段设置为 null 之前将它们分配给 StudentDetails 类，我想应该是：

```
public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if (localName.equals("name")) {
            StudentDetails s = new StudentDetails(name,formatted_address, lat, lng);    
            data.add(s);

            String lng = "";
            String name = "";
            String formatted_address = "";
            String lat = "";                      
            this.in_name = false;

        } else if (localName.equals("formatted_address")) {
            this.in_formatted_address = false;
        } else if (localName.equals("lat")) {
            this.in_lat = false;
        } else if (localName.equals("lng")) {
            this.in_lng = false;
        }
    } 
```

# android - 文本选择样式

> ID：14642421
> 
> 赞同：2
> 
> 时间：2013-02-01T08:39:20.910
> 
> 标签：android, text, input, selection, css-selectors

是否可以以某种方式更改我的 android 应用程序的文本选择器（选择、光标等）颜色或样式（例如下面链接中的一个）？

[选择图像示例](http://developer.android.com/design/media/text_input_textselection.png)

或者它是设备的默认值并且无法更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T22:09:13.547

如果有人需要它，我已经想出将选择颜色更改为以下样式：

```
<item name="android:textColorHighlight">@color/my_color</item> 
```

# grails - Grails 在部署时从不同的插件渲染视图

> ID：14642422
> 
> 赞同：0
> 
> 时间：2013-02-01T08:39:24.097
> 
> 标签：grails

我有一个问题，只有在部署我的应用程序时才会出现问题 - 开发时没有问题。

我有 2 个控制器。一个控制器驻留在第二个正在扩展的 ia 插件中。视图文件夹中存在特定模板 -`/templates/_mytemplate.gsp`在“主”项目中 - 即不在插件中。

“common-controller”具有基于字符串呈现各种模板的方法。这就是麻烦开始的地方。使用：

```
String summary = groovyPageRenderer.render(template: "/mycontroller/templates/_mytemplates.gsp", model: [foo: bar]) 
```

在开发中工作得非常好，但在战争部署时，字符串是空的。我已将问题缩小到[[1]](http://grails.org/doc/latest/api/org/codehaus/groovy/grails/web/pages/discovery/DefaultGroovyPageLocator.html)中区分查找路径的`resolveSearchPaths`方法。`DefaultGroovyPageLocator`

任何人？什么是合理的解决方案？最好模板不在插件中....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:48:28.157

几天前我在发布时遇到了类似的问题，并使用了类似的东西：

```
try {
        //look for template in the main app
        def html = render(template:'/mycontroller/templates/mytemplates', model: [foo: bar])
        if(html && html.size() > 0) {
            render html
        }
    } catch (Exception e) {
        //bad way to handle template not found.
    }
    //fallback on the template defined in the plugin
    render(plugin:'myPlugin', template:'/mycontroller/templates/mytemplates', model: [foo: bar]) 
```

这可能不是处理此问题的最佳方法，但至少可以使部署的战争发挥作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:18:12.060

傻傻傻傻！

在 Windows 上开发 - 部署到 Unix。所以忘记了驼峰式 T <- 它适用于 Windows 而不是 Unix :)

所以要让它工作：

```
String summary = groovyPageRenderer.render(template: "/mycontroller/templates/_my**T**emplates.gsp", model: [foo: bar]) 
```

# nuget - Nuget：如何将文件复制到根文件夹而不包括在项目中

> ID：14642427
> 
> 赞同：0
> 
> 时间：2013-02-01T08:39:44.097
> 
> 标签：nuget

如果您将任何文件放在`Content`Nuget 包的文件夹中，则在安装期间这些文件是：

1.  复制到目标项目的根目录并
2.  包含在项目中。

有什么方法可以让 Nuget 跳过动作 2，即复制它们但不将它们包含在项目中？

我知道我可以使用 Powershell 脚本执行此操作，该脚本进入并从项目中删除文件。但我不认为这是一个非常强大的方法。

我可以在不依赖 Powershell 的情况下实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:00:58.947

您可以尝试将内容直接添加到包中，而不是“内容”文件夹中。在尝试添加内容文件时，NuGet 将忽略“内容”之外的文件。

然后你可以使用你的 powershell scr 来做复制部分

# maven - Maven 发布和版本 Maven 插件

> ID：14642428
> 
> 赞同：2
> 
> 时间：2013-02-01T08:39:47.830
> 
> 标签：maven, maven-3, nexus, maven-release-plugin, versions-maven-plugin

在进行快照/发布时，依赖项的编号/版本控制策略是什么？

一个由 15 名开发人员组成的团队，20 个 Maven 父项目 = 总共 70 多个 POM，包括子模块 POM。目前有很多依赖关系，这 70 个依赖项中的大多数依赖于其中一个。

## 过去的：

所有 POMS 都有`1.0.0-SNAPSHOT`其版本和依赖项标签。它使用 .它上传到 Nexus 存储库`mvn deploy`。

## 当下：

`mvn release`我们最近开始做。所以现在所有 20 个父 POM`1.0.1-SNAPSHOT`和它们的发布版本`1.0.0`都位于 Nexus 中。所有`<dependencies>`标签现在都指向`1.0.0`

## 问题：

**开发人员**不想指向发布版本。他们需要来自同行的前沿开发版本`1.0.X-SNAPSHOT`，无论它是否不稳定。

**SCM**只想指向`RELEASE`版本，因为他必须`mvn release`每周执行一次，这将失败，因为它指向快照版本。

## 问题：

现在我知道了[版本插件](http://mojo.codehaus.org/versions-maven-plugin/)，但问题是，我在 POM 中放了什么，以便双方都通过运行自己的`mvn versions:`命令版本感到满意。最好 POM 应该指向 SNAPSHOTS 以便 15 人满意，并且当 SCM 发布时，他可以运行 a`mvn versions:something`并且所有内容都转换为`RELEASE`版本来代替`SNAPSHOTS`. 然后返回给开发人员的 SNAPSHOTS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T15:17:30.240

我将其作为答案，尽管目前这还不是很有效的答案。

当我[`completionGoals`](http://maven.apache.org/maven-release/maven-release-plugin/prepare-mojo.html#completionGoals)在 Maven 发布插件中添加配置选项时，我的目标是启用开发使用版本范围的工作流程，但该版本将仅固定到具体版本。

添加到版本 Maven 插件的启用目标之一就是[`versions:resolve-ranges`](http://mojo.codehaus.org/versions-maven-plugin/resolve-ranges-mojo.html)目标。缺少的是一种在之后再次解开这些范围的方法。

在我们再次需要它之前，我们真的没有任何安全的地方来存储发布插件不会反对或清理的原始范围。

我想到的最接近的解决方案是在包含版本范围的版本旁边注入[XML PI](http://en.wikipedia.org/wiki/Processing_Instruction)`pom.xml` ......在这种情况下，将被转换为，例如

```
<project>
  ...
  <dependencies>
    ...
    <dependency>
      <groupId>com.foo.bar</groupId>
      <artifactId>manchu</artifactId>
      <version>[1.2.3,2.0)</version>
    </dependency?
    ...
  </dependencies>
  ...
</project> 
```

至

```
<project>
  ...
  <dependencies>
    ...
    <dependency>
      <groupId>com.foo.bar</groupId>
      <artifactId>manchu</artifactId>
      <version>1.5.7</version>
      <?versions-maven-plugin allowed-version-range="[1.2.3,2.0)"?>
    </dependency?
    ...
  </dependencies>
  ...
</project> 
```

通过确保[`preparationGoals`](http://maven.apache.org/maven-release/maven-release-plugin/prepare-mojo.html#preparationGoals)包含`versions:resolve-ranges`目标...（注意：版本插件可能必须派生第三个 Maven 来解决缺乏`pom.xml`重新加载的问题，以便`clean verify`有意义，但`resolve-ranges`应该在构建的确切版本中解决正在使用，所以它不应该是一个问题）。

然后，[`completionGoals`](http://maven.apache.org/maven-release/maven-release-plugin/prepare-mojo.html#completionGoals)您有（尚未实现的）versions-maven-plugin 目标，该目标删除 XML PI 并将范围放回原处。

目前有许多问题阻止了这一点：

*   不确定 Maven 发布插件的 pom 重写是否会删除 XML PI（需要测试确认）

*   versions-maven-plugin 中的 XML 解析库充其量是 hacky，需要更好的解决方案来启用 XML PI 注入

*   我的儿子需要关注，我很少有时间来处理这些问题。

但是，您也许可以一起拼凑一些东西。

1.  设置`completionGoals`为类似`versions:use-next-snapshots versions:commit`

2.  像这样运行你的版本`mvn versions:use-releases versions:commit scm:commit release:prepare release:perform install`

那么应该发生什么：

*   我们将`-SNAPSHOT`s 切换到发布

*   我们将更改提交给 SCM

*   我们开始发布准备

*   当`pom.xml`转换为下一个开发版本时，我们还推进了依赖项（利用我们所有的依赖项都有完全相同的命令（`install`末尾带有）的事实，因此它们的下一个`-SNAPSHOT`已经在本地存储库中，因此它们将得到高级*自动*为我们（**理论上**）），我们依靠`release:prepare`为我们提交更改。

*   释放正常执行

*   我们将下一个开发安装`-SNAPSHOT`到本地 repo 中，以便所有下游项目在运行时都会更新其版本`versions:use-next-snapshots`

以上内容容易出错......如果我可以为您提供基于版本范围的解决方案，我会更喜欢，但是，现在这是我能看到的最好的解决方案。

# python - 如何合并从模型生成的一些表单

> ID：14642430
> 
> 赞同：1
> 
> 时间：2013-02-01T08:40:00.613
> 
> 标签：python, django-models, django-forms

我尝试创建注册表单。它由几个从模型生成的表单 UserForm、UserProfileForm 和 CompanyForm 组成。

**模型.py**

```
from django.db import models
from django.contrib.auth.models import User

class Company(models.Model):
    login = models.CharField(max_length=20, null=True)
    password = models.CharField(max_length=10, null=True)
    is_active = models.BooleanField()
    title = models.CharField(max_length=100)
    org = models.CharField(max_length=50)
    inn = models.BigIntegerField()
    kpp = models.BigIntegerField()

class UserProfile(models.Model):
    company = models.ForeignKey(Company)
    user = models.OneToOneField(User)
    department = models.CharField(max_length=100)
    position = models.CharField(max_length=100) 
```

**表格.py**

```
from django.contrib.auth.models import User
from django.forms import ModelForm
from django.forms import HiddenInput
from django.forms.models import modelformset_factory

from models import Company, UserProfile

class CompanyRegistrationForm(ModelForm):
    class Meta:
        model = Company
        exclude = ('login', 'password', 'is_active')

class UserForm(ModelForm):
    class Meta:
        model = User
        fields = ('first_name', 'last_name', 'email')

class UserProfileForm(ModelForm):
    class Meta:
        model = UserProfile
        exclude = ('user')
        widgets = {'company': HiddenInput()} 
```

我尝试通过表单集和继承来做到这一点，但不幸的是。我想要一种具有一种自定义保存方法的表单，可以吗？

**ps**而我的views.py 是

```
class RegistrationCreateView(CreateView):
    template_name = 'accounts/registration.html'
    model = Company
    #form_class = CompanyRegistrationForm
    success_url = 'thanks/'

    def _create_credentials(self):
        login_str = random.randint(1000000, 9999999)
        password = ''.join([symbol for i in range(10)
                            for symbol in random.choice(string.letters)])
        return login_str, password

    def form_valid(self, form):
        context = self.get_context_data()
        form = context['registration_form']
        if form.is_valid():
            #TODO(mid): refactor this
            self.object = form.save()
            company_id = self.object.id
            login_str, password = self._create_credentials()
            self.object.password = password
            self.object.login = login_str
            self.object.is_active = True
            form.instance = self.object
            form.save()
            return self.success(login_str, password, company_id)
        return self.form_invalid(form)

    def form_invalid(self, form):
        return self.render_to_response(self.get_context_data(form=form))

    def get_context_data(self, **kwargs):
        context = super(RegistrationCreateView, self).get_context_data(**kwargs)
        context['registration_form'] = CompanyRegistrationForm()
        context['user_form'] = UserForm()
        context['user_profile_form'] = UserProfileForm()
        if self.request.POST:
            context['registration_form'] = CompanyRegistrationForm(self.request.POST)
            context['user_form'] = UserForm(self.request.POST)
            context['user_profile_form'] = UserProfileForm(self.request.POST)
        return context

    def success(self, login_str, password, company_id):
        login(self.request, self.object)
        self.request.session['company_id'] = company_id
        return render_to_response('accounts/thanks.html',
                                  {'login': login_str, 'password': password},
                                            RequestContext(self.request)) 
```

# java - 比较Java中的Long值

> ID：14642432
> 
> 赞同：8
> 
> 时间：2013-02-01T08:40:11.463
> 
> 标签：java

> **可能重复：**
> [Java 中允许整数 == int](https://stackoverflow.com/questions/7672317/integer-int-allowed-in-java)

以下两种说法有什么区别

```
Long l1 = 2L;
if(l1 == 2)
    System.out.println("EQUAL");                         
if(l1.longValue() == 2)
    System.out.println("EQUAL"); 
```

他们都给出了相同的结果“相等”。但我怀疑 Long 是对象。怎么相等？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T08:48:30.803

正如评论中已经指出的那样，当

```
if(l1 == 2) 
```

`Long` `l1`自动拆箱为其原始类型，`long`. 所以比较是在`long`和之间`int`。

在第二种情况下，[`l1.longValue()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Long.html#longValue())将返回对象表示`long`的原始值，因此比较将再次在 and 之间进行。回答[您的评论](https://stackoverflow.com/questions/14642432/compare-long-value-in-java/14642560#comment20457049_14642432)，看看[原始类型和包装类之间的主要区别是什么？](https://stackoverflow.com/q/13339918/851811)`Long``Long``long``int`

[关于自动装箱](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)的评论中给出的链接很好地涵盖了这个主题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T09:07:57.870

这种行为可以通过加宽和装箱来解释。

在第一个例子中，

```
if(l1 == 2) 
```

发生的情况如下：

1：编译器注意到您正在将包装器（Long）与原始值（int）进行比较，因此它将原始值装箱，导致：

`if (l1 == new Integer(2))`

因为 2 是一个 int （最后缺少“L”）。

2：编译器现在注意到我们正在将 Long 与 Integer 进行比较，因此它将 Integer 扩展为 Long，导致：

`if (l1 == new Long(new Integer(2))`

3：现在我们正在比较两个多头。

另一种情况更简单，这里的结果很简单：

> 如果（2L == 2）

比较原始值，即使它们是不同的类型也是允许的。

# c++ - 适用于 Windows Phone 8 的 MP4/h264 解码库

> ID：14642433
> 
> 赞同：6
> 
> 时间：2013-02-01T08:40:18.780
> 
> 标签：c++, windows-phone-8, h.264, mp4, decoder

我正在寻找适用于 Windows Phone 8 的 mp4/h264 解码器，它允许我访问解码的视频帧数据（在 I/P/B 帧处理之后）。Afaik Windows Phone 8 本身不提供访问解码的 h264 数据以进行进一步处理的方法。

你能推荐一个最好用 C/C++ 编写、独立于平台并且可以在 WP8 上编译的库吗？欢迎免费和商业建议。

问候，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T10:36:46.417

看看[FFMpeg](http://www.ffmpeg.org)或[libav](http://www.libav.org)。

# dataframe - 卡住将 NetCDF 文件导入 Pandas DataFrame

> ID：14642435
> 
> 赞同：1
> 
> 时间：2013-02-01T08:40:19.727
> 
> 标签：dataframe, pandas, netcdf

作为初学者，我已经为此工作了一段时间。总的来说，我想读入一个 NetCDF 文件并将多个（~50）列（和 17520 个案例）导入 Pandas DataFrame。目前我已经为 4 个变量的列表设置了它，但我希望能够以某种方式扩展它。我开始了，但是任何关于如何循环使用 50 个变量来实现这一点的帮助都会很棒。它确实使用下面的代码来处理 4 个变量。我知道它不漂亮 - 还在学习！

另一个问题是，当我尝试将`numpy`数组直接读入 Pandas DataFrame 时，它​​不起作用，而是创建了一个 17520 列大的 DataFrame。它应该是另一种方式（转置）。如果我创建一个系列，它工作正常。所以我不得不使用以下几行来解决这个问题。甚至不确定它为什么起作用。有什么更好的方法建议（尤其是涉及 50 个变量时）？

```
d={vnames[0] :vartemp[0], vnames[1] :vartemp[1], vnames[2] :vartemp[2], vnames[3] :vartemp[3]}
hs = pd.DataFrame(d,index=times) 
```

整个代码粘贴在下面：

```
import pandas as pd
import datetime as dt
import xlrd
import numpy as np
import netCDF4

def excel_to_pydate(exceldate):
    datemode=0           # datemode: 0 for 1900-based, 1 for 1904-based
    pyear, pmonth, pday, phour, pminute, psecond = xlrd.xldate_as_tuple(exceldate, datemode)
    py_date = dt.datetime(pyear, pmonth, pday, phour, pminute, psecond)
    return(py_date)

def main():
    filename='HowardSprings_2010_L4.nc'
#Define a list of variables names we want from the netcdf file
    vnames = ['xlDateTime', 'Fa', 'Fh' ,'Fg']

# Open the NetCDF file
    nc = netCDF4.Dataset(filename) 

#Create some lists of size equal to length of vnames list.
    temp=list(xrange(len(vnames)))
    vartemp=list(xrange(len(vnames)))

#Enumerate the list and assign each NetCDF variable to an element in the lists.  
# First get the netcdf variable object assign to temp
# Then strip the data  from that and add to temporary variable (vartemp)
    for index, variable in enumerate(vnames):               
        temp[index]= nc.variables[variable]
        vartemp[index] = temp[index][:]   

# Now call the function to convert to datetime from excel. Assume datemode: 0
    times = [excel_to_pydate(elem) for elem in vartemp[0]]

#Dont know why I cant just pass a list of variables i.e. [vartemp[0], vartemp[1], vartemp[2]]
#But this is only thing that worked
#Create Pandas dataframe using times as index
    d={vnames[0] :vartemp[0], vnames[1] :vartemp[1], vnames[2] :vartemp[2], vnames[3] :vartemp[3]}
    theDataFrame = pd.DataFrame(d,index=times)

#Define missing data value and apply to DataFrame
    missing=-9999
    theDataFrame1=theDataFrame.replace({vnames[0] :missing, vnames[1] :missing, vnames[2] :missing, vnames[3] :missing},'NaN')

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:21:50.763

你可以替换：

```
d = {vnames[0] :vartemp[0], ..., vnames[3]: vartemp[3]}
hs = pd.DataFrame(d, index=times) 
```

和

```
hs = pd.DataFrame(vartemp[0:4], columns=vnames[0:4], index=times) 
```

.

话虽如此，熊猫可以直接读取[HDF5](http://pandas.pydata.org/pandas-docs/stable/io.html#hdf5-pytables)，所以netCDF（基于HDF5）可能也是如此......

# symfony - Symfony2：如何在 preRemove 中删除父关系

> ID：14642437
> 
> 赞同：0
> 
> 时间：2013-02-01T08:40:28.427
> 
> 标签：symfony, doctrine-orm

我有一个三个实体：

```
class User
{
    @ORM\OneToMany(targetEntity="Conversation", mappedBy="sender", cascade={"remove"})
    private $send_messages;
} 
```

///

```
class Conversation
{
    /**
     * @ORM\ManyToOne(targetEntity="User", inversedBy="send_messages")
     * @ORM\JoinColumn(name="sender_id", referencedColumnName="id", onDelete="SET NULL")
     */
    private $sender;
} 
```

///

```
class Message
{
    /**
     * @ORM\OneToMany(targetEntity="Conversation", mappedBy="message")
     */
    private $conversations;

    /**
     * @ORM\PreRemove
     */
    function onPreRemove()
    {
         // how remove parent relationship ????
    }
} 
```

当我删除用户时，对话被 CASCADE 删除。问题 - 删除时如何删除和消息 Coversation 是消息的最后一个关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:44:53.267

我认为您正在寻找的是 Doctrine2 “[孤儿清除](http://docs.doctrine-project.org/en/2.0.x/reference/working-with-associations.html#orphan-removal)”

> 如果类型 A 的实体包含对私有实体 B 的引用，那么如果从 A 到 B 的引用被删除，则实体 B 也应该被删除，因为它不再被使用。

# android - 无法访问来自不同类的值

> ID：14642439
> 
> 赞同：1
> 
> 时间：2013-02-01T08:40:32.077
> 
> 标签：android, class, android-alertdialog

在我的主类中，我有一个按钮来调用一个类，该类显示一个带有编辑文本的对话框。我的问题是 - 主要活动在第一次运行时没有获得 edittext 值，如果我第二次运行它，我会得到旧的 edittext 值。

似乎主活动类执行完整的代码块并返回存储在类中的先前值，我尝试了许多方法，包括共享首选项。

**MainActivity.java**

```
public class MainActivity extends Activity {
    EditText comment_et,input_et;
    Spinner spinner;
    Button addbutton,reportbut;
    String input_string,date,time,comment,item;
    TextView date_tv,time_tv;
    String temp[];
    Datas datatemp;
    String savedinput;

    ArrayList<String> list = new ArrayList<String>();

    ArrayAdapter<String> adapter;
    DatabaseHandler db = new DatabaseHandler(this);

    @Override
    protected void onCreate(Bundle savedInstanceState) 
{

        SharedPreferences prefs = getSharedPreferences("myprefs", 0);
        savedinput=  prefs.getString("KEY_SAVEDINPUT","");

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        spinner = (Spinner)findViewById(R.id.spin1);
        input_et = (EditText)findViewById(R.id.input_et);
        addbutton = (Button)findViewById(R.id.addbutton);
        reportbut = (Button)findViewById(R.id.report);

        comment_et = (EditText)findViewById(R.id.comment_et);
        adapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, list);
        date_tv = (TextView)findViewById(R.id.date_tv);
        time_tv = (TextView)findViewById(R.id.time_tv);

        final Calendar c = Calendar.getInstance();
        int mYear = c.get(Calendar.YEAR);
        int mMonth = c.get(Calendar.MONTH);
        int mDay = c.get(Calendar.DAY_OF_MONTH);
        int mHour = c.get(Calendar.HOUR_OF_DAY);
        int mMinute = c.get(Calendar.MINUTE);

        date = ""+mDay+"/"+mMonth+1+"/"+mYear;
        time = ""+mHour+":"+mMinute;
        date_tv.setText(date);
        time_tv.setText(time);

        int max_id = db.getDatasCount();

        for(int i = 1; i<max_id+1 ;i++)
         {          

        datatemp = db.getItemOnly(i);
        String s = datatemp._item.toString();
        list.add("   "+ s);
         }

        addbutton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                AlertDialogManager alert = new AlertDialogManager();

                alert.showAlertDialog(MainActivity.this, "Enter Item",
                        "Please enter the spinner item",
                        true);
                System.out.println("main : " +savedinput);

            }   

        });

            reportbut.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent i = new Intent(getApplicationContext(), ListviewActivity.class);
                    startActivity(i);

                }

            });

        spinner.setAdapter(adapter);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {

                item = parent.getItemAtPosition(position).toString();

            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });

        Button submit = (Button)findViewById(R.id.save);
        submit.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) 
            {

                 comment  = comment_et.getText().toString();

                    System.out.println("comment:"+comment);

                /**
                 * CRUD Operations
                 * */
                // Inserting Contacts
                Log.d("Insert: ", "Inserting ..");
                db.addData(new Datas(item, comment, date, time));
                Toast.makeText(getApplicationContext(), "Data Submitted Successfully",
                Toast.LENGTH_LONG).show();
                // Reading all contacts
                Log.d("Reading: ", "Reading all contacts..");
                List<Datas> datas = db.getAllDatas();       

                for (Datas d : datas) {
                    String log = "Id: "+d.getID()+" ,Item: " + d.getItem() + " ,Comment: " + d.getComment() + " ,Date: " + d.getDate() + ",Comment: " + d.getTime();
                        // Writing Contacts to log
                Log.d("Item: ", log);
                }
            }
        });
}

    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

**AlertDialogManager.java**

```
public class AlertDialogManager {
    /**
     * Function to display simple Alert Dialog
     * @param context - application context
     * @param title - alert dialog title
     * @param message - alert message
     * @param status - success/failure (used to set icon)
     *               - pass null if you don't want icon
     * */
    String savedinput;
    public void showAlertDialog(final Context context, String title, String message,
            Boolean status) 
    {
        AlertDialog alertDialog = new AlertDialog.Builder(context).create();

        // Setting Dialog Title
        alertDialog.setTitle(title);

        // Setting Dialog Message
        alertDialog.setMessage(message);

        //setting input
         final EditText input = new EditText(context);
         alertDialog.setView(input);

         // saving input to a string
         savedinput = input.getText().toString();
         System.out.println(savedinput);

        if(status != null)
            // Setting alert dialog icon
            alertDialog.setIcon((status) ? R.drawable.success : R.drawable.fail);

        // Setting OK Button
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                savedinput = input.getText().toString();

                SharedPreferences prefs = context.getSharedPreferences("myprefs", 0);
                SharedPreferences.Editor editor =prefs.edit();
                editor.putString("KEY_SAVEDINPUT", savedinput);
                editor.commit();                
                System.out.println("from class "+savedinput);
            }
        });

        // Showing Alert Message
        alertDialog.show();

    }

    String getItem()
    {
        return savedinput;
    }
} 
```

这是我的logcat，只是为了进一步澄清

```
02-01 13:48:43.372: I/System.out(897): main : firstexecute
02-01 13:48:46.942: W/KeyCharacterMap(897): No keyboard for id 0
02-01 13:48:46.942: W/KeyCharacterMap(897): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
02-01 13:48:49.532: I/System.out(897): from class secondexecute 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:53:32.210

你在这里有几个问题。

1.  您不应该阅读`savedValue`，`onCreate`只有在实际使用时才应该阅读。请参阅@ρяσѕρєяK 答案。
2.  `alert.showAlertDialog`是非阻塞的。因此，在显示对话框后`System.out.println("main : " + savedInput);`执行行。它**不会等待**您的输入。因此，除了保存到对话框的确定​​按钮上的共享首选项之外，您还应该调用其他一些操作。此操作应调用用户在对话框中输入一些文本后应发生的逻辑。

**更新**

```
public void showAlertDialog(final Context context, String title, String message,
                            Boolean status, final Spinner spinner) 
{
    AlertDialog alertDialog = new AlertDialog.Builder(context).create();

    // Setting Dialog Title
    alertDialog.setTitle(title);

    // Setting Dialog Message
    alertDialog.setMessage(message);

    //setting input
     final EditText input = new EditText(context);
     alertDialog.setView(input);

     // saving input to a string
     savedinput = input.getText().toString();
     System.out.println(savedinput);

    if(status != null)
        // Setting alert dialog icon
        alertDialog.setIcon((status) ? R.drawable.success : R.drawable.fail);

    // Setting OK Button
    alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            savedinput = input.getText().toString();
            // do whatever you want with spinner and savedInput here.
        }
    });

    // Showing Alert Message
    alertDialog.show();
 } 
```

onClick 显示对话框：

```
alert.showAlertDialog(MainActivity.this, "Enter Item",
     "Please enter the spinner item",
     true, (Spinner) findViewById(R.id.spin1)); 
```

**更新 2** 显然您需要将新项目添加到您的微调器适配器。为此，您可以创建所有项目的列表并将此列表与适配器一起传递给对话框。当用户输入字符串并按下 OK 按钮时，`onClick`方法将此字符串添加到列表中并调用`notifyDataSetChanged`以更新 UI：

将其添加到`MainActivity`：

```
List<String> spinnerItems; 
```

在`onCreate`：

```
spinnerItems = new ArrayList<String>();
adapter = enw ArrayAdapter<String>(this, 0, spinnerItems);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

传递到：`spinnerItems`_`adapter``showAlertDialog`

```
alert.showAlertDialog(MainActivity.this, "Enter Item",
     "Please enter the spinner item",
     true, spinnerItems, adapter); 
```

最后将文本添加到列表并通知适配器：

```
alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        savedinput = input.getText().toString();
        spinnerItems.add(savedInput);
        adapter.notifyDataSetChanged();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:48:53.787

您需要在 Button click 而不是 onCreate 上获取最新值才能从 SharedPreferences 中获取最新值：

```
addbutton.setOnClickListener(new View.OnClickListener() {

        @Override
         public void onClick(View v) {
           AlertDialogManager alert = new AlertDialogManager();

           alert.showAlertDialog(MainActivity.this, "Enter Item",
                        "Please enter the spinner item",
                        true);
           savedinput=  prefs.getString("KEY_SAVEDINPUT",""); //<<< get value here
           System.out.println("main : " +savedinput);

       }   

   }); 
```

或者你会尝试从 Activity 的 onResume 中获取价值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:51:40.593

这

```
savedinput = input.getText().toString(); 
```

在运行时进行评估。不是你打电话的时候`getItem()`。在这种情况下，您将获得的值是显示警报之前的值。

同样的逻辑适用

```
savedinput=  prefs.getString("KEY_SAVEDINPUT",""); 
```

# cuda - 使用推力计算直方图

> ID：14642442
> 
> 赞同：5
> 
> 时间：2013-02-01T08:40:38.660
> 
> 标签：cuda, thrust

如果`i`是像下面这样的随机游走（每个索引不是唯一的），并且有一个`A`用零填充的设备向量。

```
{0, 1, 0, 2, 3, 3,  ....} 
```

是否有可能推力可以`A[i]`自动增加，操作后`A`可能看起来像

```
//2 means appears count of 0's
//1 means appears count of 1's
//1 means appears count of 2's
//2 means appears count of 3's
{2, 1, 1, 2} 
```

我尝试了几种情况，但是这些情况只有在`A`宿主向量时才能正常工作，我猜是因为推力是并行的，所以以前的结果不会影响新的，结果可能看起来像 //only count once no无论索引出现多少次 {1, 1, 1, 1}

推力可以通过设备向量 A 和随机游走索引向量实现我的目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-21T18:49:39.937

如果您正在通过 Thrust 寻求直方图计算，那么您可能希望注意有一个[Thrust 文档示例](https://github.com/thrust/thrust/blob/master/examples/histogram.cu)提供了两种不同的算法：

1.  *密集直方图*，`sort`用于对数组进行排序，然后`upper_bound`用于确定累积直方图，最后`adjacent_difference`用于计算直方图；
2.  *稀疏直方图*，`sort`用于对数组进行排序，然后`reduce_by_key`，正如@Eric 在他的评论中提到的那样。

从这两个线程

*   [直方图或 count_by_key](https://groups.google.com/forum/#!topic/thrust-users/SARplGR98Hg)；
*   [如何从排序后的序列中获取直方图](https://groups.google.com/forum/#!topic/thrust-users/rqeCeIz1aGo)。

我想说，以上是使用 Thrust 实现直方图的仅有的两种方法。我已经对 Kepler K20c 卡上的两种方法进行了计时，这些都是计时：

*   `N=1024*16`; `# bins`= `16*16`; 密集 = `2.0ms`; 稀疏 = `2.4ms`;
*   `N=1024*128`; `# bins`= `16*128`; 密集 = `3.4ms`; 稀疏 = `3.1ms`;

考虑到时间确实取决于输入数组这一事实，我想说结果似乎并没有太大的不同。

需要注意的是，CUDA 样本提供了一个直方图计算示例，但它针对`64`or `256`bins 进行了优化，因此与上述推力代码不齐。

# python - Python 朗读麦克风

> ID：14642443
> 
> 赞同：6
> 
> 时间：2013-02-01T08:40:46.207
> 
> 标签：python, audio, random, microphone

我正在尝试让 python 从我的麦克风中获取数据，因为我想制作一个随机生成器来使用它的噪声。所以基本上我不想记录声音，而是将它作为数据文件读入，但是是实时的。

我知道 Labview 可以做到这一点，但我不喜欢那个框架，并试图在 python 上做得更好。

任何帮助/提示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T09:15:37.593

你可能对[PyAudio](http://people.csail.mit.edu/hubert/pyaudio/docs/)感兴趣。我认为您可以从流中获取一些字节。

这是一个[有趣的例子](https://stackoverflow.com/a/4160733/117092)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-05T06:06:15.790

您可以参考 Speech_recognition 模块或 PyAudio 模块来录制语音。我将 PyAudio 模块与 Microsoft 认知服务一起使用。它对我来说很好用。

# c# - 用于统计数据的 SQL 单独数据集 - DataTable 的集合

> ID：14642444
> 
> 赞同：2
> 
> 时间：2013-02-01T08:40:46.747
> 
> 标签：c#, .net, sql, sql-server, dataset

在查询中（MainQuery，示例并不复杂），我需要不同字段上的计数器，有一种方法可以让这些计数器出现在单独的数据集中而不是在所有行中？谢谢你的帮助。

```
WITH 
MainQuery  AS(
SELECT   ROW_NUMBER() OVER (ORDER BY tb17.[NO]) AS OrderId,
* FROM [OFFRES] tb17),

Counters as (SELECT *,
(select MAX(OrderId) FROM MainQuery ) AS 'TotalRecs',
sum(case when [TypeLoc]=215 then 1 else 0 end) over() Loc215,
sum(case when [TypeLoc]=220 then 1 else 0 end) over() Loc220,
sum(case when [TypeLoc]=526 then 1 else 0 end) over() Loc526,
sum(case when [TypeLoc]=209 then 1 else 0 end) over() Loc209,
sum(case when [TypeLoc]=223 then 1 else 0 end) over() Loc223 
/*...*/
from MainQuery
)

SELECT * FROM Counters  WHERE OrderId BETWEEN 1 AND 20000 
```

一个数据集中的实际输出：

```
OrderId No  TypeLoc TotalRecs   Loc215  Loc220  Loc526  Loc209  Loc223
1       399 218     28097       1299    1349    1324    1346    1329
2       403 223     28097       1299    1349    1324    1346    1329
3       404 223     28097       1299    1349    1324    1346    1329
4       405 223     28097       1299    1349    1324    1346    1329
5       406 223     28097       1299    1349    1324    1346    1329 
```

我想要的输出：

首先 - 所有结果行：

```
OrderId No  TypeLoc 
1       399 218
2       403 223
3       404 223
4       405 223
5       406 223 
```

第二 - 连续的所有统计数据：

```
TotalRecs   Loc215  Loc220  Loc526  Loc209  Loc223
28097       1299    1349    1324    1346    1329 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:22:27.603

在不知道您的表结构的情况下，我会说在两个单独的选择语句中执行此操作并仅选择适当的列

```
WITH 
MainQuery  AS(
SELECT   ROW_NUMBER() OVER (ORDER BY tb17.[NO]) AS OrderId,
* FROM [OFFRES] tb17)

SELECT OrderId, No, TypeLoc
FROM MainQuery
WHERE OrderId BETWEEN 1 AND 20000 
```

和

```
WITH 
MainQuery  AS(
SELECT   ROW_NUMBER() OVER (ORDER BY tb17.[NO]) AS OrderId,
* FROM [OFFRES] tb17),

Counters as (SELECT 
(select MAX(OrderId) FROM MainQuery ) AS 'TotalRecs',
sum(case when [TypeLoc]=215 then 1 else 0 end) over() Loc215,
sum(case when [TypeLoc]=220 then 1 else 0 end) over() Loc220,
sum(case when [TypeLoc]=526 then 1 else 0 end) over() Loc526,
sum(case when [TypeLoc]=209 then 1 else 0 end) over() Loc209,
sum(case when [TypeLoc]=223 then 1 else 0 end) over() Loc223 
/*...*/
from MainQuery
)
SELECT TotalRecs, Loc215, Loc220, Loc526, Loc209, Loc223
FROM Counters
WHERE OrderId BETWEEN 1 AND 20000 
```

# php - 如何在codeigniter中处理多个参数

> ID：14642445
> 
> 赞同：0
> 
> 时间：2013-02-01T08:40:51.560
> 
> 标签：php, codeigniter

我允许用户以两种方式查看书籍：“列表”视图或“网格”视图。所以我想以网格或列表的形式接收参数，并将视图页面显示为接收的参数。但我不知道如何在 codeigniter 的控制器中处理这个问题。

而且我的页面上已经有分页了。我的网址正在显示`http://localhost/thebestbookfinder.com/viewallbooks/books/pgn/9` ，在此我想传递一个参数，如 view=grid 或 view=list，我必须在我的控制器中接收它。

所以我的网址可能是： `http://localhost/thebestbookfinder.com/viewallbooks/books/pgn/9/grid` 那么我将如何在我的控制器中接收它。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:02:37.700

你为什么不像你在这里得到页码的方式那样做呢`$page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;`

你可以这样做`$viewType = ($this->uri->segment(5)) ? $this->uri->segment(5) : 'list';`，如果你想将它传递给视图`$data['viewType '] = $viewType;`

然后稍后在您调用视图的部分中`$this->load->view('commonfiles/booksview',$data);`，您可能已经创建了 2 个单独的视图，一个用于列表视图，一个用于网格视图，并根据`$viewType`或将两个代码都放在一个视图文件中调用适当的视图文件并从中选择哪个显示与`if`比较的语句`$data['viewType']`。我推荐第一个选项。

同样在 CodeIgniter 中，您可以将 URI 段作为函数的参数按照它们在 URI 中的顺序传递，就像这个例子`function books($hasPagination, $paginationNumber, $viewType = 'list'){`将从这个 URI 获取参数，`http://localhost/thebestbookfinder.com/viewallbooks/books/pgn/9/grid`并且值将像这样分配： `$hasPagination = 'pgn'; $paginationNumber = 9; $viewType = 'grid';`

您也可以像往常一样传递 GET 参数`viewallbooks/books?pagination=true&pgn=9&viewType=list`，然后使用内置函数处理每个参数，例如 this`$viewType = $this->input->get('viewType')`等`$pgn = $this->input->get('pgn')`。

# java - 如何在 Eclipse 启动时禁用“初始化 Java 工具”？

> ID：14642447
> 
> 赞同：34
> 
> 时间：2013-02-01T08:40:57.517
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, eclipse-pde

在我们的应用程序中，它是一个 Eclipse 插件，当 Eclipse 启动需要很长时间并且用户在应用程序的左下角看到“Initialize Java tooling”消息。因为我们的用户与java没有任何关系，我想知道是否可以禁用Initialize Java tooling。

另一个问题：什么是初始化 Java 工具？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-10-11T19:44:24.503

从命令提示符只需键入

eclipse.exe - 清洁

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-09-23T09:03:55.103

尝试终止eclipse然后备份并删除文件夹

```
.metadata/.plugins/org.eclipse.core.resources/.history 
```

重启 eclipse 不会挂起 Java Tooling 进程。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-02-01T09:16:54.597

java-tooling 实现了一个Java IDE，支持开发任何Java 应用程序，包括Eclipse 插件。它将 Java 项目性质和 Java 透视图添加到 Eclipse Workbench 以及许多视图、编辑器、向导、构建器以及代码合并和重构工具。Java 工具为开发人员提供了一个开发环境。

**如何在启动时禁用插件**

您可以尝试在启动应用程序时禁用 java 工具。我给您一个快照。

![在此处输入图像描述](../Images/6bd32bd6a622a79d0b5af5701fce75f8.png)

去寻找视角作为**Window->Preferences->Run&Launching->java Application->**并将运行组合框调试为无值。希望这可以解决您的问题。

在**Eclipse Oxygen**的情况下，可以在以下位置找到此设置：

**Eclipse > Preferences > Run/Debug > Launching > Perspectives > Java Application > Eclipse JDT Launcher**

[![在此处输入图像描述](../Images/6171b79262668636d9040c6bce3034c3.png)](https://i.stack.imgur.com/35ov1.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-04-15T13:29:38.010

您的项目中将有文件夹 .metadata 。只需删除其中的 .log 文件并重新启动 eclipse。它应该可以工作

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-27T07:36:30.087

只需取消选中“自动构建”并强制退出 Eclipse。然后重新开始。项目>自动构建 - 取消选中 -force quit -start Eclipse

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-08T09:22:00.203

我知道有点晚的建议，但因为我现在有 3 天的这个问题，我非常非常沮丧....尽可能多地复制你的 eclipse IDE“处女”来重新运行它。任何你想要的插件都可以在这个“处女”日食的直接复制版本上完成。这是摆脱您无法控制的笨拙插件和幕后工作人员的唯一方法。从一开始就一直导入项目或删除元数据文件夹是毁灭性的......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-30T11:42:51.763

是删除或重命名工作区文件夹中的.metadata/.plugins/org.eclipse.core.resources 中的.projects 文件夹。这似乎不会影响任何项目，并且 .project 文件夹将在 Eclipse 重新启动时重新创建

# iphone - 从核心数据库获取大数据时应用程序冻结

> ID：14642449
> 
> 赞同：0
> 
> 时间：2013-02-01T08:41:02.870
> 
> 标签：iphone, ios

我正在使用核心数据，并尝试使用代码一次获取大量数据

```
NSArray *result = [context executeFetchRequest:request error:&error]; 
```

但我的主线是冻结的。如何在后台线程上获取我的数据？
[在苹果文档中，它在“在后台获取 UI 响应性”列中的链接上给出][1]

但是没有示例代码来实现它。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:52:29.443

```
[self performSelectorInBackground:@selector(yourMethodName) withObject:nil]; 
```

如果您不需要将任何参数传递给该方法.. 最后留下 nil

在你调用的那个方法中处理你的获取

# php - 如何构建我的数据库，这样我就不必一直更新冗余数据？

> ID：14642450
> 
> 赞同：-1
> 
> 时间：2013-02-01T08:41:05.783
> 
> 标签：php, mysql, database, algorithm

**数据库结构**

可以使用用户提交的搜索词来搜索transaction_detail 表条目。关键字列包括搜索词，例如描述和客户名称，并在添加新记录时插入。然后检查关键字列是否与搜索词匹配。

人表

```
+----+------+
| ID | NAME |
+----+------+
| 12 | Mike |
+----+------+ 
```

交易明细表

```
+----+--------------------------+-----------------+---------------------------+
| ID | DESCRIPTION              | CUSTOMER_ID(FK) | KEYWORDS                  |
+----+--------------------------+-----------------+---------------------------+
| 55 | Delivery from ABC Stores |              12 | ABC stores, delivery,mike |
+----+--------------------------+-----------------+---------------------------+ 
```

**设想**

当客户名称（Mike）发生变化时，需要更新每一行的关键字列，Customer_id 为 12。

但是，当 Transaction_details 表有几百行时，此方法变得非常低效。有人可以告诉我另一种改进表中记录搜索的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:46:41.840

正如[@Niko](https://stackoverflow.com/users/927626/niko)所说，这应该存储在另一个表（或两个）中：

关键字表

```
+----+------------+
| id | name       |
+----+------------+
|  1 | ABC stores |
|  2 | delivery   |
+----+------------+ 
```

人到关键词表

```
+-----------+------------+
| person_id | keyword_id |
+-----------+------------+
|        12 |          1 |
|        12 |          2 |
+-----------+------------+ 
```

然后，当您想知道女巫人的关键字是什么时，只需将它们加入 ID，您就会得到您的列表。

# c# - C# - 使用泛型类型的方法的实现

> ID：14642456
> 
> 赞同：1
> 
> 时间：2013-02-01T08:41:26.730
> 
> 标签：c#, winforms, generics

我正在创建一个`MDI form`并且我有一个加载不同表单的方法。现在我需要做一些修改——我需要添加从另一个子表单中调用一个子表单的功能。

因为我在几个不同的地方都需要这个，所以我创建了一个新类，所有需要这个功能的类都继承自该类。我想让它与泛型类型一起工作，这样我就可以传递我可能需要的每个表单类`LoadAForm(MyForm1)`等等`LoadAForm(MyForm2)`。我希望我很清楚我想要什么作为最终结果。

我试过这个：

```
protected void LoadAForm<T>(ref T sender)
{
    MainForm frm = this.MdiParent as MainForm;
    T temp;
    if (frm != null)
    {
        sender  = SingletonFormProvider.GetInstance<temp>(frm, true);
        sender.MdiParent = frm;
        sender.Dock = DockStyle.Fill;
        sender.Show();
    }
} 
```

这是行不通的。但是在方法中使用泛型时，我几乎没有使用泛型的经验，所以我不知道如何继续。

使用此语法时我得到的错误是`The type or namespace "temp" could not be found...". I'm not even sure that this is the way to do it.`GetInstance<>` 必须采用与我正在调用的表单类型相同类型的参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T08:43:27.053

您需要使用*类型*参数，而不是变量名：

```
sender = SingletonFormProvider.GetInstance<T>(frm, true); 
```

此外，为确保它`T`有效（如您的[评论](https://stackoverflow.com/questions/14642456/c-sharp-implementation-of-method-which-is-using-generic-types/14642488#comment20457073_14642488)所示），您需要对其进行约束：

```
protected void LoadAForm<T>(ref T sender) where T : Form 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:47:46.037

我认为您在这里不需要泛型。我认为您可以通过简单地使用`Form`作为具体类型来更轻松地工作：

```
protected void LoadAForm(ref Form sender)
{
    MainForm frm = this.MdiParent as MainForm;
    Form temp;
    if (frm != null)
    {
        sender  = SingletonFormProvider.GetInstance(frm, true);
        sender.MdiParent = frm;
        sender.Dock = DockStyle.Fill;
        sender.Show();
    }
} 
```

# python - 在 python 正则表达式中转义数字和特殊字符

> ID：14642469
> 
> 赞同：0
> 
> 时间：2013-02-01T08:42:19.997
> 
> 标签：python, regex, python-2.7

我有表单，我希望它的字段不匹配任何数字和任何特殊字符。

现在，

我有这样的

```
name = forms.RegexField(regex = r'[^0-9]+$') 
```

它现在只是逃避数字。

如何为转义数字和特殊字符设置正则表达式模式。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:05:46.873

这是一个查看所有正则表达式符号的表格：

[http://www.javascriptkit.com/jsref/regexp.shtml](http://www.javascriptkit.com/jsref/regexp.shtml)

对于您的问题，如果我了解您想要的应该是... r'[a-zA-Z]+$'

不知道，但是看看链接中的表格，它非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:17:14.060

据我了解，您只需要匹配字母。

要兼容 unicode，请使用[属性](http://www.unicode.org/reports/tr18/)：

```
\p{L}+ 
```

这将匹配任何语言的一个或多个字母。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:06:36.687

假设允许包含字母和数字的单词，这个正则表达式可以完成工作

```
[a-zA-Z0-9]*[a-zA-Z]+[a-zA-Z0-9]* 
```

这将检查输入字段是否必须包含至少一个字符，并且只允许使用字母或字母和数字的组合。不允许使用特殊字符。`abc` `12abc` `abc12`有效，但`123` `ab@/`无效。

我所做的是，我颠倒了方法。我没有限制特殊字符，而是只允许字母和上述组合。这会自动限制特殊字符。

如果需要转义数字，则可以使用此正则表达式：

```
[a-zA-Z]+ 
```

这将只允许字母，并将限制所有数字和所有特殊字符。

# javascript - CreateElementwithId 函数不起作用

> ID：14642470
> 
> 赞同：0
> 
> 时间：2013-02-01T08:42:25.367
> 
> 标签：javascript

我试图获得一个用 ID 写入元素的函数。但我无法让它工作。

这就是我所拥有的。

```
function createElementWithId(elementName, idName)
{
    var id = document.createElement(elementName);
    id.idName = idName;
    return id;
} 
```

有任何想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:43:26.943

**id**应设置为，而`.id`不是`.idName`

```
var elem = document.createElement(elementName);
elem.id = idName; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T08:43:55.927

您可以使用`.id`而不是设置元素的 id `.idName`。

```
function createElementWithId(elementName, idName) {
  var elem = document.createElement(elementName);
  elem.id = idName;
  return id;
} 
```

[这](https://stackoverflow.com/questions/3342743/how-to-set-an-id-with-some-value-in-of-td-in-javascript)是另一个使用`id`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T08:47:09.503

[document.createElement](http://www.javascriptkit.com/javatutors/dom2.shtml)将 返回元素。并且元素具有`id`属性，而不是 idName 属性。

```
function createElementWithId(elementName, idName)
{
    var element = document.createElement(elementName);
    element.id = idName;
    return element;
} 
```

# postgresql - 从 shell 级别进行 PostgreSQL 数据库逆向工程

> ID：14642476
> 
> 赞同：1
> 
> 时间：2013-02-01T08:42:40.933
> 
> 标签：postgresql, reverse-engineering

我碰巧用大型数据库做了一些调节工作，但我在这方面经验不足，所以我想聪明的做法是在我的本地主机上创建类似的数据库，以免弄乱原来的数据库。

这是我的问题，是否可以根据需要`SQL`创建脚本来创建精确的表？
我的意思是在 MySQL GUI 工具上有这样的选项，`reverse engineering`它会生成`SQL`脚本，该脚本将在我使用函数时创建精确的数据库，在 shell 级别的 PostgreSQL 中是否可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:48:05.120

```
pg_dump --schema-only db1 > db-schema.sql

```

# iphone - 胎面 9：EXC_BAD_ACCESS

> ID：14642478
> 
> 赞同：0
> 
> 时间：2013-02-01T08:42:53.460
> 
> 标签：iphone, ios, objective-c, multithreading

我在此方法中收到此消息“Tread 9: EXC_BAD_ACCESS (code=1, address=0x70000010)（但只有在下载另一个线程文件时才会创建此错误）：

```
- (NSMutableDictionary *) getDictionaryAllStatin:(sqlite3*)database
{

    if (self._streetsArrey == nil || self._streetsArrey.count <= 0) {
        [self getArrayAllStatin:database];
    }

    /*--------------------------------------------------------------*/
    NSMutableDictionary *result1 = [[NSMutableDictionary alloc] init];

    for (StreetData *street in _streetsArrey) {
        NSString * name = [self deleteContractionWithText:street._name];
        NSArray * arr = [name componentsSeparatedByString:@" "];
        NSMutableArray *arrm = [[NSMutableArray alloc] initWithArray:arr];
        arr = nil;
        [arrm addObject:name];

            for (NSString *txt in arrm) {
                int lengthText = txt.length;
                for (int i = 2 ; i <= lengthText; i++) {
                    NSString * key = [txt substringToIndex:i];
                    key = [key lowercaseString];
                    NSMutableDictionary *isSet = [result1 objectForKey:[NSNumber numberWithInt:[key hash]]];
                    if (isSet == nil) {
                        isSet = [[NSMutableDictionary alloc]init];
                    }
                    [isSet setObject:street forKey:[NSNumber numberWithInt:street._streetId]];
                    [result1 setObject:isSet forKey:[NSNumber numberWithInt:[key hash]]];
                    isSet = nil;
                    key = nil;
                }
            }

    }

    NSMutableDictionary *result = [[NSMutableDictionary alloc] init];
    for (id key in result1) {
        NSMutableDictionary *dictionary = [result1 objectForKey:key];
        NSArray *arr = [dictionary allValues];
        [result setObject:arr forKey:key];
        arr = nil;
        [dictionary removeAllObjects];
        dictionary = nil;

    }
    [result1 removeAllObjects];
    result1 = nil;
    /*--------------------------------------------------------------*/
    if (result.count > 0) {
        _streetsDictionary = result;
        result = nil;
        return _streetsDictionary;
    }else {
        _streetsDictionary = nil;
        return nil;
    }
} 
```

![在此处输入图像描述](../Images/b3f0809666524b1b8ffb88d868bbde75.png)

![在此处输入图像描述](../Images/dcdf394593a2eb2785cfc6d99f79d8e3.png)

**为什么我会收到此消息？**

**我该如何解决？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:05:35.307

崩溃的最可能原因是试图访问已被释放的对象。

既然看起来故障就行了：

```
 NSMutableDictionary *isSet = [result1 objectForKey:[NSNumber numberWithInt:[key hash]]]; 
```

我建议将语句拆分为其组件，以尝试找出哪个对象实际上可能是罪魁祸首：

```
 NSInteger h = [key hash];
 NSNumber n = [NSNumber numberWithInt:h];
 ... 
```

> 但是只有在下载另一个线程文件时才会创建此错误

另外，检查下载代码和崩溃代码是否有任何共同之处。前者可能导致释放第二个中使用的对象。

希望能帮助到你。

# css - 纵向模式下的媒体打印问题

> ID：14642479
> 
> 赞同：0
> 
> 时间：2013-02-01T08:43:01.863
> 
> 标签：css, printing, print-style

我有这张表格，我打印出来是为了完成我的工作。

现在，问题是，在纵向模式下，它被最小化了，我的意思是它看起来很小，就像 A4 Letter 的一半页面，而在横向模式下它看起来还不错。

这是我的媒体打印 css：

```
@media print  {
textarea{
        border:none;
    }
textarea#difekti {
padding-bottom:40px;
border:none;
    }
#menu-home { display:none }
#status-print { display:none }
#submit-f {display:none};
#MainContent {
    display: block;

}
#tab1 table, td, th {
  border: 1px solid red;   
}

#tab1 thead {
  float: left;   
}

#tab1 thead th {
  display: block;   
  background: yellow;
}

#tab1 tbody {
  float: right;   
}
#programi {
    display:none;
}
#kursor {
    display:none;
}
#adresa { }
* {position:static !important;}

} 
```

有什么建议吗？此外，我也有 IE 的问题。我可以为 IE 创建额外的媒体打印吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:59:37.690

@page CSS at-rule 用于在打印文档时修改某些 CSS 属性。您不能使用 @page 更改所有 CSS 属性。您只能更改文档的页边距、孤立点、窗口和分页符。更改任何其他 CSS 属性的尝试将被忽略。

```
@page { size:5.5in 10in; margin: 1cm } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:47:06.227

您应该将其更改为单独的 CSS 文件，并使用任何 CSS 链接底部的**media="print"将其链接到您的 HTML 文档。**

```
<link rel="stylesheet" type="text/css" media="print" href="path/to/your/css" /> 
```

这也将帮助您避免 IE 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-28T10:28:32.713

@media print and (orientation: portrait) { 这里的样式 }

@media print and (orientation: Landscape) {这里的样式}

# ios - iOS：从服务器请求后开始上传用户位置

> ID：14642481
> 
> 赞同：1
> 
> 时间：2013-02-01T08:43:04.380
> 
> 标签：ios, gps, notifications, push-notification, tracking

我需要实现这一点：我有一个应用程序，它想要跟踪家庭成员的位置。因为我不想让 GPS 一直运行，所以我想我可以从服务器发送一个请求，当一些家庭成员想知道我的位置时。
但是我遇到了一些问题：
我不能使用 PUSH 通知，因为需要确认（点击），然后应用程序才知道发生了什么事。（这不会很好，因为孩子们可能不会点击推送通知）
另一种选择是让应用程序在后台运行，检查服务器是否有任何新闻，如果它在服务器上发现一些请求，然后启动 GPS跟踪并将坐标上传到服务器。这听起来好一点，但也会消耗电池电量。
有人已经试过了吗？有没有更好的方法来解决这个问题？
感谢您的任何反应！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:11:14.550

我们在我们的应用程序中遇到了类似的问题。我们采用了不断监听推送通知端口的方法，每当我们收到任何通知时，检查它是否适用于我们的应用程序，然后做出相应的反应。

我们可以长时间监听端口以节省电池电量。抱歉无法与您分享任何代码，但我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:53:54.520

是的，我认为您剩下的唯一选择是在后台运行定位服务。

为此在 Plist 中设置为`Required background modes`to `App registers for location updates`。这将使您能够根据需要发送位置更新。但请注意，这仅在应用程序运行或在后台运行时有效，并且在您的应用程序关闭时不会运行。如果用户关闭了您的应用程序，那么如果您从设备获得任何更新，则可以触发推送通知。

另外，请注意，您需要在应用程序的描述中提及，该应用程序使用位置服务会耗尽您的电池，否则您的应用程序将不会被批准。

希望这些信息对你有帮助..

# objective-c - UIRefreshControl 改变 UIActivityIndi catorView 的颜色

> ID：14642484
> 
> 赞同：12
> 
> 时间：2013-02-01T08:43:14.100
> 
> 标签：objective-c, xcode, colors, uiactivityindicatorview, uirefreshcontrol

有什么办法可以改变 UIRefreshControl 的“UIActivityIndi​​catorView”的颜色？？

我什么也没找到！

谢谢！！

![UIRefreshControl](../Images/ff7cb09022b009643adafc74743dbb90.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-09T15:42:15.877

您可以通过设置 的 来做到这一点`Tint Color`，`UIRefreshControl`如下所示：

**目标 C** `[refreshControl setTintColor:[UIColor blackColor]];`

**迅速** `refreshControl.tintColor = .black`

这也将更改滑动时扩展的箭头。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-04-08T18:38:45.723

由于之前的答案已经过时，我想我只需将其修改为 Swift 4 并分享解决方案（感谢 @subharb）。

```
refreshControl.tintColor = UIColor.white 
```

这行代码会将 UIActivityIndi​​catorView 的颜色更改为您想要的任何颜色:)

# magento - Magento 管理面板在停止备份后无法正常工作

> ID：14642489
> 
> 赞同：1
> 
> 时间：2013-02-01T08:43:32.813
> 
> 标签：magento, magento-1.7, magento-1.5, magento-1.6

不幸的是，我停止了备份过程。之后尝试登录管理面板时出现错误：

```
There has been an error processing your request
Exception printing is disabled by default for security reasons.
Error log record number: 851173009070 
```

我接受错误报告：

```
a:5:{i:0;s:91:"SQLSTATE[HY000]: General error: 1205 Lock wait timeout exceeded; try restarting transaction";i:1;s:3113:"#0 /var/www/vhosts/ooh-lala.co.uk/httpdocs/lib/Varien/Db/Statement/Pdo/Mysql.php(110): Zend_Db_Statement_Pdo->_execute(Array)
#1 /var/www/vhosts/ooh-lala.co.uk/httpdocs/lib/Zend/Db/Statement.php(300): Varien_Db_Statement_Pdo_Mysql->_execute(Array)
#2 /var/www/vhosts/ooh-lala.co.uk/httpdocs/lib/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 /var/www/vhosts/ooh-lala.co.uk/httpdocs/lib/Zend/Db/Adapter/Pdo/Abstract.php(238): Zend_Db_Adapter_Abstract->query('UPDATE `admin_u...', Array)
#4 /var/www/vhosts/ooh-lala.co.uk/httpdocs/lib/Varien/Db/Adapter/Pdo/Mysql.php(389): Zend_Db_Adapter_Pdo_Abstract->query('UPDATE `admin_u...', Array)
#5 /var/www/vhosts/ooh-lala.co.uk/httpdocs/lib/Zend/Db/Adapter/Abstract.php(632): Varien_Db_Adapter_Pdo_Mysql->query('UPDATE `admin_u...', Array)
#6 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Admin/Model/Resource/User.php(85): Zend_Db_Adapter_Abstract->update('admin_user', Array, Array)
#7 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Admin/Model/User.php(299): Mage_Admin_Model_Resource_User->recordLogin(Object(Mage_Admin_Model_User))
#8 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Admin/Model/Session.php(91): Mage_Admin_Model_User->login('admin', 'nicola123')
#9 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Admin/Model/Observer.php(55): Mage_Admin_Model_Session->login('admin', 'nicola123', Object(Mage_Core_Controller_Request_Http))
#10 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Core/Model/App.php(1299): Mage_Admin_Model_Observer->actionPreDispatchAdmin(Object(Varien_Event_Observer))
#11 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Core/Model/App.php(1280): Mage_Core_Model_App->_callObserverMethod(Object(Mage_Admin_Model_Observer), 'actionPreDispat...', Object(Varien_Event_Observer))
#12 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/Mage.php(416): Mage_Core_Model_App->dispatchEvent('controller_acti...', Array)
#13 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(505): Mage::dispatchEvent('controller_acti...', Array)
#14 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Adminhtml/Controller/Action.php(152): Mage_Core_Controller_Varien_Action->preDispatch()
#15 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Core/Controller/Varien/Action.php(409): Mage_Adminhtml_Controller_Action->preDispatch()
#16 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Core/Controller/Varien/Router/Standard.php(250): Mage_Core_Controller_Varien_Action->dispatch('index')
#17 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Core/Controller/Varien/Front.php(176): Mage_Core_Controller_Varien_Router_Standard->match(Object(Mage_Core_Controller_Request_Http))
#18 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/code/core/Mage/Core/Model/App.php(347): Mage_Core_Controller_Varien_Front->dispatch()
#19 /var/www/vhosts/ooh-lala.co.uk/httpdocs/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#20 /var/www/vhosts/ooh-lala.co.uk/httpdocs/index.php(224): Mage::run('', 'store')
#21 {main}";s:3:"url";s:17:"/index.php/admin/";s:11:"script_name";s:10:"/index.php";s:4:"skin";s:5:"admin";} 
```

谁能帮我解决这些问题？

# php - 使用 PHP CURL 获取 HTML 文件的 HTML 代码

> ID：14642491
> 
> 赞同：0
> 
> 时间：2013-02-01T08:43:51.957
> 
> 标签：php, curl

我正在处理本地服务器 192.168.1.1 的任务。我想获取页面的数据

> 192.168.1.1/userRpm/SystemStatisticRpm.htm?Num_per_page=100

我想显示这个文件返回的 HTML 代码。

当我在 **curl -u admin:admin PageURL 之**类的终端上运行 curl 命令时（它返回页面代码）

但是当我使用 PHP curl 时，它会将我重定向到 192.168.1.1

有谁能够帮助我 ？

我的代码是：

```
<?php
$json_url="http://192.168.1.1/userRpm/SystemStatisticRpm.htm?Num_per_page=100";
$username="admin";
$password="admin";
$ch=curl_init();
    curl_setopt($ch, CURLOPT_URL, $json_url);
    curl_setopt($ch, CURLOPT_HTTPHEADER,array('Content-Type:application/json')); 
    curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);

  $result=curl_exec($ch);
  curl_close ($ch); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:09:05.847

请检查这个

```
$ch= curl_init();
curl_setopt ($ch1, CURLOPT_URL, 'http://192.168.1.1/userRpm/SystemStatisticRpm.htm?Num_per_page=100' );
curl_setopt($ch1, CURLOPT_HEADER, 0);
curl_setopt($ch1,CURLOPT_VERBOSE,1);
curl_setopt($ch1, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)');
curl_setopt ($ch1, CURLOPT_REFERER,'http://www.google.com');  //just a fake referer
curl_setopt($ch1, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch1,CURLOPT_POST,0);
curl_setopt($ch1, CURLOPT_FOLLOWLOCATION, 20);

$htmlContent= curl_exec($ch1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:46:43.150

试试这个：

```
$ch = curl_init("addrress");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
$content = curl_exec($ch);
curl_close($ch); 
```

# java - 如何在 Spring Portlet MVC 中获取对象类型参数

> ID：14642493
> 
> 赞同：3
> 
> 时间：2013-02-01T08:43:57.427
> 
> 标签：java, spring-mvc, combobox, portlet, spring-portlet-mvc

我正在研究 Spring Portlet MVC。我有一个名为“CLASS”的表。CLASS 表有复合主键。我想在其他表中使用 CLASS 表。我想在组合框中列出 CLASS 表项。

选择组合框时，我必须获取 CLASS 的复合 ID。但我无法获得身份证。因为 id 是 CLASSID 类型。（并且 id 是一个对象）我只从组合框中得到 int,string.. 类型参数。

是否可以从组合框中获取对象？如果回答是，该怎么做？

问候。

```
 <form:select path="classId">          
            <form:options items="${classes}" itemValue="id" itemLabel="name" />
  </form:select> 
```

classId 是对象。我可以从类数组中获取名称值和其他值。但我无法获得 classId 值。它返回空值。如何在 Spring Portlet MVC 中获取对象类型参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T18:00:46.907

[检查“类型转换”以将您的 ID 转换为字符串，并在此处的 spring 参考](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/validation.html)中反向检查它

# c - 在 Windows (ANSI C) (_beginthread/_beginthreadex/CreateProcess) 上 fork() 的任何简单/快速方法

> ID：14642496
> 
> 赞同：3
> 
> 时间：2013-02-01T08:44:09.983
> 
> 标签：c, winapi, fork

有人可以帮我制作这个 C POSIX 代码来移植它以在 Windows 下运行吗？（没有 Cygwin，MinGW 只是 Windows 本机 API 和 Visual Studio），尝试了很多事情，但没有任何运气。

```
#include <stdio.h>
#include <string.h>
#include <unistd.h>
#include <time.h>
#include <stdlib.h>

void usage(char *s);
int test_function(char *host);
FILE *infile, *outfile;
int numforks = 0;

void usage(char *s) {
        printf("Usage: %s <input> <childs>\n", s);
        exit(EXIT_SUCCESS);
}

int main(int argc, char *argv[]) {
        char buf[1024];
        time_t start;
        if (argc < 2)
                usage(argv[0]);
        outfile = fopen("test.txt", "a+");
        infile = fopen(argv[1], "r");
        printf("[*] In: %s Childs: %s\n", argv[1], argv[2]);
        start = time(0);
        while (!feof(infile)) {
                fgets((char *)&buf, sizeof(buf), infile);
                if (buf[strlen (buf) - 1] == '\n')
                        buf[strlen (buf) - 1] = '\0';
                if (!(fork())) {
                        test_function(buf);
                        exit(0);
                } else {
                        numforks++;
                        if (numforks > atoi(argv[2]))
                                for (numforks; numforks > atoi(argv[2]); numforks--)
                                        wait(NULL);
                }
        }
        fclose(infile);
        fclose(outfile);
        printf("[*] Completed in: %lu secs\n", (time(0) - start));
        exit(EXIT_SUCCESS);
}

int test_function(char *host) {
  usleep(2000000); // for debugging
  fprintf(outfile, "%s\n", host);
  printf("%s\n", host);
  return 1;
} 
```

我试图这样做：

```
#include <stdio.h>
#include <string.h>
#ifdef LINUX
  #include <unistd.h>
#endif
#include <time.h>
#include <stdlib.h>

#ifdef WIN32
  #define fork _forkWin32
  #define usleep Sleep
  #include <cstdlib>
  #include <cstring>
  #include <iostream>
  #include <process.h>
  #include <windows.h>
  using   namespace  std;
#endif

void usage(char *s);
#ifdef WIN32
unsigned int _stdcall test_function(void *ptr);
#else
int test_function(char *host);
#endif
FILE *infile, *outfile;
int numforks = 0;
char proc;

void usage(char *s) {
        printf("Usage: %s <input> <threads>\n", s);
        exit(EXIT_SUCCESS);
}

int main(int argc, char *argv[]) {
        char buf[1024];
        time_t start;
        //#ifdef WIN32
        //HANDLE      child;
        //#endif
        if (argc < 3)
                usage(argv[0]);
        outfile = fopen("test.txt", "a+");
        infile = fopen(argv[1], "r");
        printf("[*] In: %s Threads: %s\n", argv[1], argv[2]);
        start = time(0);
        HANDLE      child;
        while (!feof(infile)) {
                fgets((char *)&buf, sizeof(buf), infile);
                if (buf[strlen (buf) - 1] == '\n')
                        buf[strlen (buf) - 1] = '\0';
                #ifdef WIN32
                child = (HANDLE) _beginthreadex(NULL, 0, test_function, buf, 0, NULL);
                if (child != 0) {
                #else
                if (!(fork())) {
                        test_function(buf);
                #endif
                        exit(0);
                } else {
                        numforks++;
                        if (numforks > atoi(argv[2]))
                                for (numforks; numforks > atoi(argv[2]); numforks--)
                                        #ifdef WIN32
                                        WaitForSingleObject(child, INFINITE);
                                        #else
                                        wait(NULL);
                                        #endif
                }
        }
        fclose(infile);
        fclose(outfile);
        printf("[*] Completed in: %lu secs\n", (time(0) - start));
        exit(EXIT_SUCCESS);
}

#ifdef WIN32
unsigned int test_function(void *ptr) {
    char* host = (char*)ptr;
#else
int test_function(char *host) {
#endif
  usleep(2000000); // for debugging
  fprintf(outfile, "%s\n", host);
  printf("%s\n", host);
  return 1;
} 
```

似乎什么都没做。我究竟做错了什么？都错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:31:27.573

Windows 根本不支持`fork()`。Unix`fork()`是一个系统调用，它生成一个进程的相同副本，而这在 Windows 中根本不容易做到。

如果可能的话，我会说使用线程来模拟分叉是最不坏的选择。然而，它确实改变了一些事情——主要是文件句柄是共享的，而不是重复的，因此分叉进程不能像在真正的分叉进程中那样关闭它们。

基本上，我想说的是，如果你计划在你的分叉进程中做一些比一些简单的打印语句更复杂的事情，那么你将陷入痛苦的世界，虽然线程在某些情况下可以模拟分叉，但几乎如果没有大量工作，就不可能完全模拟 fork 在 Windows 中的工作方式。

# javascript - 在backbone.js 中创建新对象时，我的属性另存为nil

> ID：14642497
> 
> 赞同：0
> 
> 时间：2013-02-01T08:44:14.507
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, backbone.js

所以每次我创建一个新的会员时，它都会保存到数据库中，但没有名字。我这辈子都想不通。

```
 class Shop.Views.AffiliatesNew extends Backbone.View

  template: JST['affiliates/new']

  events:
    'submit .form-container': 'addAffiliate'

  initialize: ->
    @collection.on('reset', @render, this)
    @collection.on('add', @render, this)

  render: ->
    $(@el).html(@template(affiliates: @collection))
    this

  addAffiliate: (event) ->
    event.preventDefault()
    @collection.create({
      name: $('#first').val()
      })

    <input type="text" name="name" id="first"/> <br />
          .form-title 

          .submit-container
            <input id="affiliate-button" type="submit" value="Submit" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:12:28.537

尝试使用类而不是 ID 来表示您的输入字段。您可能`#first`在页面上的其他地方有另一个，这可能会导致仅找到第一个（因浏览器而异）。

您还可以使用`this.$el.find(<selector>)`

# .net - 绑定到 .NET 中的多个索引属性？

> ID：14642503
> 
> 赞同：1
> 
> 时间：2013-02-01T08:44:48.457
> 
> 标签：.net, wpf, xaml, data-binding, binding

绑定到这个属性相当简单：

```
public Foo MyFoo {get; set;}

public class Foo
{
    public object this[object key]
} 
```

因为在 XAML 中您可以执行以下操作：

```
<Label Content="{Binding MyFoo["key"]}"/> 
```

但是，如果我有第二个索引属性怎么办？

我知道这在 C# 中不可能直接实现，但在 VB.NET 中却可以。

```
Default Public Property Item(key As Object) As Object 'equivalent to this[...]'
Public Property Item2(key As Object) As Object 'a second indexed property!' 
```

这些是我尝试过的一些绑定：

```
<Label Content="{Binding MyFoo["key"]}"/>
<Label Content="{Binding MyFoo.Item["key"]}"/>
<Label Content="{Binding MyFoo.Item2["key"]}"/> 
```

第一个绑定仍然有效，但其他两个不会。

有没有直接的解决方案，还是我需要解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:27:49.907

在[Jobo](https://stackoverflow.com/users/1041340/jobo)建议将 VB.NET 类放在程序集中并在**C#**项目中引用它之后，
我发现了为什么不能*直接*绑定到多个索引属性。

*在后台，为每个额外的*索引属性生成两个方法：`get_X`和`set_X`，其中`X`是索引属性的名称。

这意味着未标记为 的 VB.NET 索引属性`Default`实际上**不存在**。这就是为什么我的问题中的 XAML 绑定说它找不到属性`Item`或`Item2`...

对于这个问题，可能有多种解决方法。例如，您可以创建一个包含索引器属性的小类，然后在`MainWindow`.

另一种解决方法可能是绑定到 的返回值`get_X`，但我只能想象这会变得多么令人恼火，因为这样您将无法获得`INotifyPropertyChanged`.

# winforms - 如何将opencv图像blit到窗口形式？

> ID：14642505
> 
> 赞同：1
> 
> 时间：2013-02-01T08:44:52.263
> 
> 标签：winforms, visual-studio-2010, visual-c++, opencv, picturebox

我正在使用 open-CV 从网络摄像头获取实时流。

有没有办法在图片框中显示 IplImage？

我在 C++ 中使用 opencv 2.3.1。我在窗口窗体应用程序中使用 Visual Studio 2010。谢谢

```
int main()
{
    CvCapture* capture=cvCreateCameraCapture(0);
    cvNamedWindow("Live",CV_WINDOW_AUTOSIZE);
    IplImage *frame=cvCreateImage(cvSize(w,h),8,3);   //Original Image

    while(1)
    {
        IplImage *fram=cvQueryFrame(capture);

        if(!fram)
        break;

        cvShowImage("Live",frame);

        char c=cvWaitKey(33);
        if(c==27)
        break;
    }

    cvReleaseCapture(&capture);
    cvDestroyAllWindows();
} 
```

我知道这是在 [如何将 Iplimage 放在图片框上讨论过的？](https://stackoverflow.com/questions/8805386/how-to-put-an-iplimage-on-a-picturebox/14642268#14642268)

但我不明白如何以窗口形式编写。

# c# - VS2008 - 无法开始调试

> ID：14642508
> 
> 赞同：0
> 
> 时间：2013-02-01T08:45:04.623
> 
> 标签：c#, asp.net, .net, debugging, asp.net-3.5

![在此处输入图像描述](../Images/4988b76e6587680863f993be5a086a7e.png)

当我尝试调试我的应用程序时出现错误，它的构建成功也没有向我显示任何错误。但是一旦我开始调试它就会向我显示错误，甚至帮助按钮重定向一些“未找到”页面。

有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:58:39.763

Your application compilation must be set to debug = true in your config file.

# calendar - 是否有 API 可以在 Google Apps for business 中提取公司中每个人的电子邮件和日历？

> ID：14642510
> 
> 赞同：0
> 
> 时间：2013-02-01T08:45:09.577
> 
> 标签：calendar, gmail, google-api, google-apps

我工作的公司有 Google Apps for business 帐户，我想创建这个宠物项目（由 HR 指导），我需要在其中获取该公司每个人的所有电子邮件和日历以进行一些分析。我不关心电子邮件的内容，我只需要发件人和收件人的信息。有那个API吗？

（假设我将拥有该帐户的管理员访问权限）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T19:10:06.147

Gmail IMAP 和 Google 日历都支持使用服务帐户进行 OAuth 2.0 身份验证，允许您以最终用户身份进行身份验证以获取/设置/修改他们的数据：

[Gmail OAuth 2.0 身份验证](https://developers.google.com/google-apps/gmail/xoauth2_protocol)

[OAuth 2.0 服务帐户](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

[谷歌日历 v3](https://developers.google.com/google-apps/calendar/)

[Google Drive 域范围的授权](https://developers.google.com/drive/delegation) （Calendar v3 API 的过程一直到构建服务的点都是相同的）

# eclipse - 将语言包添加到 Eclipse RCP

> ID：14642512
> 
> 赞同：1
> 
> 时间：2013-02-01T08:45:30.470
> 
> 标签：eclipse, plugins, localization, rcp

1.  我从以下站点下载了 eclipse 语言包：http: [//download.eclipse.org/technology/babel/babel_language_packs/R0.10.1/indigo/indigo.php](http://download.eclipse.org/technology/babel/babel_language_packs/R0.10.1/indigo/indigo.php)
2.  我将下载的插件放在我的 Eclipse 安装的插件文件夹中。

我的问题：我现在如何在我的 Eclipse RCP 应用程序中使用这些插件？

我似乎无法将它们添加到我的应用程序中，因为我无法在任何地方选择它们。在导出应用程序并将插件名称添加到 config.ini 后，我还尝试将它们放入我的 RCP 应用程序的插件文件夹中，但没有成功。

由于我被卡住了，因此我将不胜感激有关此主题的任何帮助:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:50:32.317

从 3.6 左右开始，Eclipse 不再尝试在`plugins`文件夹中查找额外的插件；它只会考虑使用 p2 安装的内容（即通过“安装新软件”菜单或市场）。

`dropins`文件夹旁边应该有一个文件`plugins`夹；将语言包放在那里，Eclipse 应该会自动拾取它们。

[有关详细信息，请参阅文档。](http://wiki.eclipse.org/Equinox_p2_Getting_Started#Dropins)

# c# - C#中构造函数内的静态成员

> ID：14642514
> 
> 赞同：2
> 
> 时间：2013-02-01T08:45:36.073
> 
> 标签：c#, oop, variables, static

通常我们知道，为了访问**静态**变量，我们不需要创建类的实例。我们可以直接做like `classname.staticvariable`。为了访问类中的静态变量，我们应该有一个静态方法。

现在我对以下代码片段有疑问

```
public class xyz
{
    private static int a;

    public xyz()
    {
        a++;
    }
} 
```

上面的代码片段会起作用吗？如果是，为什么，如果不是，为什么？

谢谢普拉班詹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:47:43.720

是的，它会。int 的默认值为 0。每次调用构造函数时，都会增加静态变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T08:49:24.573

有用。

想象一下，您想知道已创建了多少个类的实例。所以在这种情况下你可以使用

```
xyz.a 
```

此外，要监控活动实例的数量，您可以创建一个析构函数并使用`a--`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T09:32:39.530

To quote from the [C# documentation on static variables](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.110%29.aspx):

> Static members are initialized before the static member is accessed for the first time and before the static constructor, if there is one, is called.

For example run the following sample program:

```
using System;

namespace ScrapCSConsole
{
   class ScrapCSConsole
   {
      public static void Main()
      {
         Console.WriteLine("Create StaticDemo A");
         StaticDemo a = new StaticDemo();
         Console.WriteLine("Create StaticDemo B");
         StaticDemo b = new StaticDemo();
         Console.WriteLine("Done");
      }
   }

   class StaticDemo
   {
      private static int staticDemo1;
      private static int staticDemo2 = 0;
      private static int staticDemo3 = default(int);
      private static int staticDemo4;
      private static int classNumber;

      /// <summary>
      /// Static Constructor
      /// </summary>
      static StaticDemo()
      {
         Console.WriteLine("Static Constructor");
         Console.WriteLine("staticDemo1 {0}", staticDemo1);
         staticDemo4 = (new DateTime(1999, 12, 31)).DayOfYear;
      }

      /// <summary>
      /// Instance Constructor
      /// </summary>    
      public StaticDemo()
      {
         classNumber++;
         Console.WriteLine("classNumber {0}", classNumber);
         Console.WriteLine("staticDemo2 {0}", staticDemo2);
         Console.WriteLine("staticDemo3 {0}", staticDemo3);
         Console.WriteLine("staticDemo4 {0}", staticDemo4);                  
      }      
   }
} 
```

And you get the following output:

```
Create StaticDemo A
Static Constructor 
staticDemo1 0
classNumber 1
staticDemo2 0
staticDemo3 0
staticDemo4 365
Create StaticDemo B
classNumber 2
staticDemo2 0
staticDemo3 0
staticDemo4 365
Done 
```

There are some interesting things to note here:

1.  The line 'Console.WriteLine("Create StaticDemo A")' gets called before StaticDemo's static constructor.
2.  The line 'Console.WriteLine("Static Constructor")' only gets called once.
3.  The line 'Console.WriteLine("staticDemo1 {0}", staticDemo1)' works even though staticDemo1 has never been explicitly initialized.
4.  staticDemo1, staticDemo2 and staticDemo 3 all start out as 0 in value.

Finally as a sub note you need to be careful if you are creating the objects on multiple threads. This is because classNumber++ is not an atomic operation. It counts as two seperate operations one read and one write. As such two seperate threads can both read the variable before either one of them writes out the incremented value. To avoid this situation use this line instead:

```
System.Threading.Interlocked.Increment(ref classNumber); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T08:47:52.153

从实例方法访问静态成员是非常好的。

静态变量`a`有一个默认值，`0`每次创建类的实例时，您的代码都会递增它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T08:48:27.440

上面的代码片段将完美地工作。编写此类代码是为了计算类中存在的活动实例的数量。

```
public class xyz
{
    private static int a;

    public xyz()
    {
        a++;
    }

    public static int A
    {
        get { return a;}
    }
} 
```

将活动实例的数量打印为：

```
Console.WriteLine(obj.A); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T08:50:22.603

以下假设不正确；

> 为了访问类中的静态变量，我们应该有一个静态方法。

您提供的代码有效，因为您不需要静态方法。

试试下面的，你会发现它也有效；

```
public class xyz
{
    private static int a;

    public void A()
    {
        a++;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T08:52:55.567

是的，它会起作用。您可以在实例成员中引用静态成员，但不能在静态成员中引用实例成员，因为它们需要实例才能工作，而静态不需要。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-01T09:10:33.853

It doesn't work if you want access to static var, you must decalar it public and Constructor method doesn't run, because constructors runs when you use initialize a class and create an object.

# php - 多个网站可以使用相同的主页和相同的数据库，但不需要更改网址？

> ID：14642517
> 
> 赞同：-2
> 
> 时间：2013-02-01T08:45:47.753
> 
> 标签：php, mysql, linux, .htaccess, web-hosting

我有多个网站域，例如 example1.com、example2.com、example3.com 等，并且域在不同的服务器上，一些在同一台服务器上，一些在另一台服务器上。如果用户访问 expample1.com、empample2.com 等等......然后用户登陆 index.php，这对于所有网站都是通用的，并为所有网站使用通用数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:49:35.470

这可以工作，您只需要在链接中使用相对 URL，所以不要这样做

`<a href="http://example1.com/index.php">Home</a>`

你会做...

`<a href="/index.php">Home</a>`

这样，浏览器将为您放入页面所在的域。

您也可以将此技术用于头部中 CSS 文档的链接，或指向 JavaScript 资源的链接，只要所有站点的目录结构相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:58:27.943

用掩蔽转发它们。您只需要决定哪个网站将托管该网站，然后将其余部分简单地转发

[http://support.godaddy.com/help/article/422/forwarding-or-masking-your-domain-name](http://support.godaddy.com/help/article/422/forwarding-or-masking-your-domain-name)

# layout - 具有浏览器大小的 Highslide 缩小弹出窗口

> ID：14642526
> 
> 赞同：0
> 
> 时间：2013-02-01T08:46:12.340
> 
> 标签：layout, liquid, highslide

我正在使用带有液体布局的 Highslide。如何更改代码以将弹出窗口大小更改为浏览器窗口的百分比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:04:05.787

您不能使用百分比作为 Highslide 弹出窗口的大小。

*   常规的 Highslide 图像弹出窗口将以完整尺寸显示图像，但如果图像大于视口并且[allowSizeReduction](http://highslide.com/ref/hs.allowSizeReduction)为 true（默认设置），图像将缩小以适合视口。
*   如果[useBox](http://highslide.com/ref/hs.useBox)为 true，则图像区域需要固定的[宽度](http://highslide.com/ref/hs.width)和[高度](http://highslide.com/ref/hs.height) （以 px 为单位）。
*   HTML 弹出窗口需要固定宽度。默认宽度为 400 像素。

# c# - HyperLinkField DataNavigateUrlFormatString 页面

> ID：14642529
> 
> 赞同：0
> 
> 时间：2013-02-01T08:46:31.760
> 
> 标签：c#, asp.net, hyperlink

我有带有“HyperLinkField”的 GridView，当我单击表中的几个名称之一时，这会将我带到另一个页面。然后我想显示有关单击项目的一些信息。在这段代码中，我描述了我想要单击的任何行，打开新页面并从上一页获取 FirstName clicked 字段。我需要有关代码中此字段的更多信息：

这个字段到底是做什么的？

```
DataNavigateUrlFormatString="Page.aspx?FirstName={0}" /> 
```

更具体地说："FirstName={0}" />"

```
<asp:HyperLinkField 
 DataTextField="FirstName" 
 HeaderText="First Name"
 DataNavigateUrlFields="FirstName" 
 DataNavigateUrlFormatString="Page.aspx?FirstName={0}" /> 
```

如何从新页面中的上一页获取此点击字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:55:20.203

`{0}`是用于替换所需值的占位符。在上面的示例中，datanavigateurlformatstring 与 datanavigateurlfields 结合使用。它将替换 DataNavigateUrlFields 值。[DataNavigateUrlFormatString](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.datanavigateurlformatstring.aspx)

笔记 ：

> 仅当设置了 DataNavigateUrlFields 属性时才应用格式字符串。

```
datanavigateurlfields="ProductID"
datanavigateurlformatstring="~\details.aspx?ProductID={0}" 
```

用例

1.  主要用于需要动态链接的Gridview或Listview，基于数据字段。
2.  这与为每个超链接手动添加查询字符串相同。

要在其他页面中使用此值，您可以访问该`Request`属性。

```
if(Request["ProductID"]!=null)
var productID=Request["ProductID"].ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:49:26.597

[DataNavigateUrlFormatString](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.datanavigateurlformatstring.aspx)中的 {0} 占位符将替换为 HyperLinkField 对象中的字段值。在您的代码中，它将替换为 FirstName 值

# php - 在codeigniter的表单验证中只接受英文字符

> ID：14642538
> 
> 赞同：2
> 
> 时间：2013-02-01T08:47:09.593
> 
> 标签：php, codeigniter, validation

我想在 codeigniter 的文本框表单验证中只接受英文字符。是否有任何内置的表单验证方法，或者我应该使用自己的验证函数来实现这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:55:55.817

您需要的规则是 alpha。你可以这样做：

```
$this->form_validation->set_rules('text', 'Text','required|alpha'); 
```

确保输入的内容仅包含字母值。

请参阅 codeigniter 文档中的[规则参考](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#rulereference)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T02:34:29.923

试图找到解决方案 3 天....以上一个不能通过空格、下划线、连字符等等等....

所以我做了什么来过滤和传递英文字符：（对我来说很好......也许很愚蠢，但我尝试了很多选择！没有一个有效，只有这个）

```
$this->load->helper('text');
    $yourText = ascii_to_entities($yourText,true);  

if (strpos($yourText,'&#') !== false) {
    echo 'use English only';
}else {
    echo 'all good';
} 
```

# highcharts - Highcharts 不会在 Colorbox 中刷新，但在 Firebug 中检查时会自动刷新

> ID：14642542
> 
> 赞同：1
> 
> 时间：2013-02-01T08:47:29.330
> 
> 标签：highcharts, colorbox

我的主要 HTML 中有 highcharts 图形。我把它放在一个小 div 中，所以某些部分的图形没有显示出来。当用户单击一个按钮时，它会在颜色框中作为弹出窗口打开，但不会刷新其大小。当我单击以使用 Firebug 进行检查时，它突然刷新其大小并且一切正常。当我关闭颜色框时它仍然很大，我也看不到图形的很多部分。

是否有任何想法关于如何刷新 Highcharts 图形以及为什么当我单击使用 Firebug 的检查元素时它会刷新自身（我想要什么）？

**PS：**当我调整与 Firebug 无关的窗口大小时，它可以工作。我的似乎有同样的问题：[https ://github.com/highslide-software/highcharts.com/issues/472](https://github.com/highslide-software/highcharts.com/issues/472)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:28:28.243

我在加载数据并关闭颜色框后调用了 window.resize，它解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:04:40.620

没有一个例子来看看它很难说，但这是我认为正在发生的事情：

首先检查选项[reflow](http://api.highcharts.com/highcharts#chart.reflow)是否设置为 true。如果是，那么 Highcharts 将监视 window.resize 事件并在发生调整大小时重绘自身。我的猜测是，当激活 Firebug 时，窗口会调整大小并重新绘制图表。

如果要手动设置图表的新大小，可以使用 api 方法[setSize()](http://api.highcharts.com/highcharts#Chart.setSize%28%29)。要仅重绘图表，您应该使用[redraw()](http://api.highcharts.com/highcharts#Chart.redraw%28%29)。

# triggers - 火鸟，锁内触发器

> ID：14642550
> 
> 赞同：0
> 
> 时间：2013-02-01T08:47:52.473
> 
> 标签：triggers, deadlock, firebird

最近我与几个客户项目的 Firebird 服务器打架。我可以避免在我的编程环境中出现死锁问题，但我想在触发器中做一些工作。感谢我从 StackOverflow 获得的建议，我真的很接近我的目标，但我找不到有关在触发器中捕获死锁的信息，等到它解锁并继续触发过程。有人可以给我链接或建议如何面对它吗？

带有更新或插入的简单触发器定义：

```
CREATE TRIGGER XYZ FOR TABLE_X ACTIVE AFTER UPDATE POSITION 0 AS
begin
    UPDATE TABLE_X SET FIELD = 1 where contidion
end 
```

当我要更改的行被其他进程锁定时，如何避免问题？

问候， 阿蒂克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:35:23.650

在您的评论中，您说您要更新触发器触发的同一行，在这种情况下不会发生死锁，因为当前事务已经在该行上具有“锁定”，因此允许再次修改它。但是，您的方法是错误的。如果要修改触发器触发的同一行的内容，则不应**使用**触发器`AFTER UPDATE`，而应使用`BEFORE UPDATE`触发器并使用`NEW`触发器上下文变量来更新一个或多个列。

所以你的触发器应该是这样的：

```
CREATE TRIGGER XYZ FOR TABLE_X ACTIVE BEFORE UPDATE POSITION 0 AS
begin
    IF condition THEN
       NEW.FIELD = 1;
end 
```

# delphi - 使用 Delphi 嵌入式 Chromium (CEF1) 读取 cookie 的访问冲突

> ID：14642551
> 
> 赞同：0
> 
> 时间：2013-02-01T08:47:56.320
> 
> 标签：delphi, cookies, tchromium, chromium-embedded

我在我的应用程序上使用 Delphi Embedding Chromium (CEF1)，但无法读取 URL 的 cookie 数据。

我找到[了这段代码](http://magpcss.org/ceforum/viewtopic.php?f=10&t=545)（包括在下面），但是在 XE3 上，当我使用它时，我得到了一个异常：

```
if WaitForSingleObject(vis.pEvent.Handle, INFINITE) = WAIT_OBJECT_0 then begin 
```

例外是

> 项目 guiclient.exe 引发异常类 EAccessViolation，并带有消息“地址 00000000 的访问冲突”。读取地址 00000000

暗示其中一个对象未​​正确创建或初始化。

我正在使用的代码（从上面的论坛链接复制）是：

```
 TCustomVisitor = class (TCefCookieVisitorOwn)
    private
      fcookie: PCefCookie;
      function visit(const name, value, domain, path: ustring; secure, httponly,
            hasExpires: Boolean; const creation, lastAccess, expires: TDateTime;
            count, total: Integer; out deleteCookie: Boolean): Boolean; override;
    public
      pEvent: TEvent;
      function getCookies: PCefCookie;
      constructor Create; override;
  end;

constructor TCustomVisitor.Create;
begin
  inherited;
  pEvent := TEvent.Create(nil, False, False, 'ev.chromium');
  new(fcookie);
end;

function TCustomVisitor.getCookies;
begin
  Result := fcookie;
end;

function TCustomVisitor.visit(const name, value, domain, path: ustring; secure, httponly,
            hasExpires: Boolean; const creation, lastAccess, expires: TDateTime;
            count, total: Integer; out deleteCookie: Boolean): Boolean;
begin
    fcookie.name := CefString(name);
    fcookie.value := CefString(value);
    fcookie.domain := CefString(domain);
    fcookie.path := CefString(path);
    fcookie.secure := secure;
    fcookie.httponly := httponly;
    fcookie.has_expires := hasExpires;
    //fcookie.creation := DateTimeToCefTime(creation);
    //fcookie.last_access := DateTimeToCefTime(lastAccess);
    //fcookie.expires  := DateTimeToCefTime(expires);

    SetEvent(pEvent.Handle);
end;

procedure TfrmAuth.bt_okClick(Sender: TObject);
var
  vis: TCustomVisitor;
  cname, cvalue: uString;
  ccookie: PCefCookie;
begin
  if crm.Browser<>nil then begin
    vis := TCustomVisitor.Create;
    try
      CefVisitUrlCookies(ed_url.Text, true, vis);

      // !!! This line causes the access violation
      if WaitForSingleObject(vis.pEvent.Handle, INFINITE) = WAIT_OBJECT_0 then begin
        ccookie := vis.getCookies;
        cname := CefString(@ccookie.name);
        cvalue := CefString(@ccookie.value);
      end;
    finally
      vis.Free;
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:16:21.127

这很简单。CefVisitUrlCookies 将您的对象作为引用计数接口，并在返回时释放它，并且对象会自行销毁，因此您在尝试访问炸对象时会遇到访问冲突。为避免此问题，您可能希望在局部变量中存储对对象的引用，或显式调用 _addref：

```
vis._AddRef();
CefVisitUrlCookies(ed_url.Text, true, vis);
WaitForSingleObject(...)
vis._Release(); 
```

或者

```
ivis: ICefCookieVisitor;
...
ivis := vis;
CefVisitUrlCookies(ed_url.Text, true, ivis);
WaitForSingleObject(...)
ivis := nil; 
```

并且不要忘记删除免费通话。您永远不应该使用引用计数显式释放接口对象。

# android - 将2张不同大小的位图叠加成屏幕大小的一张

> ID：14642554
> 
> 赞同：1
> 
> 时间：2013-02-01T08:48:01.517
> 
> 标签：android, canvas, bitmap, overlay, scale

我有 2 个位图，一个是：宽度 720 x 404 高度。另一个是 1280x550 我用这个功能：

```
public Bitmap overlay(Bitmap bmp1, Bitmap bmp2) {
    Bitmap bmOverlay = Bitmap.createBitmap(bmp1.getWidth(), bmp1.getHeight(), bmp1.getConfig());
    Bitmap bmp2new = getResizedBitmap(bmp2, bmp1.getHeight(), bmp1.getWidth(), bmp2.getConfig());
    Canvas canvas = new Canvas(bmOverlay);
    canvas.drawBitmap(bmp1, new Matrix(), null);
    canvas.drawBitmap(bmp2new, 0, 0, null);
    return bmOverlay;
    } 
```

现在它向我展示了两者。覆盖。现在第一个是视频的屏幕截图，第二个是我绘制的画布。问题是，如果我在屏幕边缘的东西上画一些东西，它将被错误地覆盖（偏移），因为我的视频被拉伸到与第二张图片相同。我能做些什么来放置两张图片，但屏幕截图以几个像素的偏移量开始，所以它会被正确放置？

我试过：

```
 int left = (int)((bmp2.getWidth() - (bmp1.getWidth()*(bmp2.getHeight()/bmp1.getHeight())))/2.0);
    Bitmap bmp1new = getResizedBitmap(bmp1, bmp2.getHeight(), ((bmp2.getWidth() - (bmp1.getWidth()*(bmp2.getHeight()/bmp1.getHeight())) , bmp1.getConfig());
  Bitmap bmptest = Bitmap.createBitmap(bmp1new, left, 0,bmp1new.getWidth() - left, bmp1new.getHeight()); 
```

但是没有运气，现在我更加困惑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:17:26.823

它适用于此：

```
 public Bitmap overlay(Bitmap bmp1, Bitmap bmp2) {
    Bitmap bmOverlay = Bitmap.createBitmap(bmp2.getWidth(), bmp2.getHeight(), bmp1.getConfig());
    float left =(bmp2.getWidth() - (bmp1.getWidth()*((float)bmp2.getHeight()/(float)bmp1.getHeight())))/(float)2.0;
    float bmp1newW = bmp1.getWidth()*((float)bmp2.getHeight()/(float)bmp1.getHeight());
    Bitmap bmp1new = getResizedBitmap(bmp1, bmp2.getHeight(), (int)bmp1newW , bmp1.getConfig());
    Canvas canvas = new Canvas(bmOverlay);
    canvas.drawBitmap(bmp1new, left ,0 , null);
    canvas.drawBitmap(bmp2, new Matrix(), null);
    return bmOverlay;
    } 
```

# php - Windows 7 Professional 64 位上的 PHP 的 ImageMagick？

> ID：14642557
> 
> 赞同：0
> 
> 时间：2013-02-01T08:48:08.987
> 
> 标签：php, windows, windows-7, 64-bit, iis-7.5

大家早，

第 2 天 - 我知道这会变得很棘手......

Windows 7 Professional 64bit IIS 7.5 PHP 5.3.19（由 Web 平台安装程序建议/安装）

一切正常。

ImageMagick 6.8.2.2 2013-01-28 Q16 - 32 位版本。（昨天尝试了 64 位版本，但无法让 php_imagick.dll 工作）

在职的

php_imagick.dll：

`PHP Startup: Unable to load dynamic library 'C:\Program Files (x86)\PHP\v5.3\ext\php_imagick.dll' - The specified module could not be found. in Unknown on line 0`

*   有没有人有这方面的经验？
*   我需要 64 位版本的 PHP 吗？
*   我应该瞄准更新还是旧的 PHP 版本？
*   如何确定我的 PHP 版本（由 WPI 安装）是 32 位还是 64 位？
*   使用Win7 64时最好坚持32位还是小心翼翼地使用所有64位版本？

当我选择升级到 64 位 Windows 时，我确信不兼容的日子已经结束。我不年轻，但我仍然很愚蠢，显然......

我今天的计划是尝试所有可能的组合，包括放弃 IIS 和使用 Apache。这将是一项艰巨的任务，但我没有其他真正的选择。我找到的任何东西都会在这里发布给后代。

感谢您的任何评论/帮助/观察。

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T14:23:56.023

好的，我希望有比这更全面的东西，但我相当详尽的调查指出以下几点：

ImageMagick-xxx-x-Qx-x64-dll与 x64 PHP Dll**不**兼容。

有 x64 构建工作的草图报告，但对于工作安装的每个报告，有 10 个不起作用。有一些令人钦佩的努力来记录这一点，但很有可能，它不会奏效。

我尝试过使用 PHP 5.3(x64) 和 5.4(x64) TS 和 NTS 的 Nginx(x64)、Apache(x64) 和 IIS 服务器。

我总是收到“%1”或“找不到模块”的问题。

答案是避开 x64 二进制文件。Windows 7 x64 很好，但不要使用任何其他 x64 组件。

我对任何其他轶事感兴趣，但我严重怀疑我会花更多时间在这上面。鉴于 PHP、Apache 和 ImageMagick 阵营对 Windows 的相对敌意，修复可能来自其他地方。

# python - 技能点菜单不起作用

> ID：14642561
> 
> 赞同：0
> 
> 时间：2013-02-01T08:48:37.610
> 
> 标签：python

基本上，用户更早地选择了一个类。在这个菜单中，它会检查，如果用户选择了巫师，那么他们可以选择最多花费 4 个技能点。

```
if Class == ("wizard") or Class == ("Wizard"):
    print("You have four spell points. You can learn up to four level- one spells, or one level-four spell, or any combination thereof.")
    Spellpoints = 4
    FireballLvl = 0
    IceBlastLvl = 0
    TelekeniticSheildLvl = 0
    ElectricShockLvl = 0
    WindLvl = 0
    while True:
        Spellmenu = input("Press 1 to spend a point on Fireball. Press 2 to spend a point on Ice Blast. Press 3 to spend a point on Telekenitic Sheild. Press 4 to spend a point on Electric Shock. Press 5 to spend a point on Wind.") 
        if Spellpoints == 0:
            print ("You have no more spell points")
            break
        if Spellmenu == ("1"):
            Spellpoints - 1
            FireballLvl + 1
        elif Spellmenu == ("2"):
            Spellpoints - 1
            IceBlastLvl + 1
        elif Spellmenu ==("3"):
            Spellpoints - 1
            TelekeniticSheildLvl + 1
        elif Spellmenu ==("4"):
            Spellpoints - 1
            ElectricShockLvl + 1
        elif Spellmenu ==("5"):
            Spellpoints - 1
            WindLvl + 1 
```

我的问题是循环永远不会结束。当没有更多的法术点时应该是这样，但它并没有结束。提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:50:48.217

尝试这个：

```
Spellpoints -= 1 
```

对于其他变量也是如此。

`Spellpoints - 1`什么都不做；它只是返回返回结果而不修改变量。为了更改变量，您必须将结果分配回它。`x -= 1`是 的简写`x = x - 1`，其中`-=`是*减法赋值运算符*。其他算术运算也存在类似的运算符。

# windows-8 - 从 Windows 8 应用商店应用程序 (WinRT) 访问智能卡

> ID：14642562
> 
> 赞同：1
> 
> 时间：2013-02-01T08:48:38.940
> 
> 标签：windows-8, windows-runtime, windows-store-apps, smartcard, smartcard-reader

在 Windows 8 商店应用程序中，我想从智能卡中读取数据。安装智能卡读卡器（USB 设备）后，我可以通过命名空间读取其设备路径和连接状态`Windows.Devices.Enumeration`。甚至设备接口 id 也是可检索的（50dd5230-ba8a-11d1-bf5d-0000f805f530），我将其作为应用程序清单文件中的必需功能。

对于与设备的交互，我使用调用`CreateDeviceAccessInstance`方法的 C++ 组件。但是这个调用总是会导致`ACCESS_DENIED`异常。

进一步的研究告诉我，与自定义硬件设备（除了打印机、麦克风、鼠标等之外的所有设备）交互需要对发布到 Windows 8 驱动程序商店的设备驱动程序进行一些调整。我很乐意这样做，但我不是 IHV 并且想使用通用驱动程序和通用接口。

谁能给我一个提示，如何从这里开始并使用 USB 智能卡设备的通用接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T06:33:50.787

这不是一个真正的答案，但我有同样的问题，我花了很长时间在互联网上寻找关于这个主题的难以找到的信息，[我想分享我的结果](http://xkcd.com/979/)。

Windows 8.1 有一些用于（虚拟）智能卡的特定 API（[API 参考](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.smartcards.aspx)，[示例](http://code.msdn.microsoft.com/windowsapps/Smart-card-sample-c7d342e0)），但它们似乎只能用于身份验证，目前无法向卡发送 APDU 命令（请参阅Himanshu的[此评论](http://channel9.msdn.com/Events/Build/2013/2-041#c635084018346669735)索尼）。我想人们可以使用新的 USB API 直接与读者对话，但是你必须自己实现整个协议。

# javascript - 从 USB 运行 webapps

> ID：14642563
> 
> 赞同：4
> 
> 时间：2013-02-01T08:48:45.957
> 
> 标签：javascript, node.js, twitter-bootstrap, frameworks, express

我是 Javascript 框架和 nodejs 的新手。最近，我遇到了一个要求，这让我想我是否可以使用它们。

要求： -- 一个轻量级网站，可以通过 USB 棒（一种便携式 Web 应用程序）运行，而无需在客户端机器上安装完整的网络服务器。--该网站应该可供本地网络上的用户使用。该网络应用程序将用于 (a) 捕获用户对问卷的响应 (b) 显示图表、数据、报告 (c) 显示可点击的图表

我想构建一个响应速度非常快的富客户端类型的 web 应用程序。

从我在互联网上搜索的任何内容来看，我认为我应该使用 node.js（作为 Web 服务器）+ express.js（MVC 框架）+ Twitter Bootstrap（用于构建漂亮的 UI）。

我不确定我对框架/工具的选择是否正确，所以想知道专家推荐什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:09:40.113

唯一的要求是下载 node.js 的便携版本。例如，[windows x64 v0.8.18](http://nodejs.org/dist/v0.8.18/x64/node.exe)。所有可分发产品都位于[此处](http://nodejs.org/dist/)。

就这样。您的所有模块都需要在本地安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:09:30.010

我刚刚下载并编译了 node.js 来评估。很棒的工具，在 Ubuntu 下也可以很好地构建和运行，并且在[Mac OS](https://sites.google.com/site/nodejsmacosx/)和 Windows 上也受支持。非常有趣的可能性。当然可以推荐。

要让它真正跨平台，您可以简单地将几个适用于不同平台的 nodejs 可执行文件放入 NTFS 格式的 USB 记忆棒中。Linux 人可能需要调整安装权限，但他们已经习惯了。

# php - 大方形 wordpress 帖子缩略图

> ID：14642567
> 
> 赞同：3
> 
> 时间：2013-02-01T08:48:54.787
> 
> 标签：php, wordpress

有人知道如何获得方形 wordpress 缩略图吗？

如果我使用它，图像不是方形的

```
<?php the_post_thumbnail( array(205,205) ); ?> 
```

但如果我这样做，它们是方形的

```
<?php the_post_thumbnail( array(135,135) ); ?> 
```

我需要创建一个缩略图库，比如说 300 x 300 方形图像。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T09:24:37.170

您必须先创建自己的图片尺寸。这是通过[add_image_size()](http://codex.wordpress.org/Function_Reference/add_image_size)函数完成的。

你可以这样做：

```
if ( function_exists( 'add_theme_support' ) ) { 
    add_theme_support( 'post-thumbnails' );
    add_image_size( 'square-large', 300, 300, true); // name, width, height, crop 
    add_filter('image_size_names_choose', 'my_image_sizes');
}

function my_image_sizes($sizes) {
    $addsizes = array(
        "square-large" => __( "Large square image")
    );
    $newsizes = array_merge($sizes, $addsizes);
    return $newsizes;
} 
```

如果还没有，这将为您的主题添加对缩略图的支持。它将创建一个裁剪为 300x300 像素的新图像大小。第二个函数给出了更好的描述，并确保它会显示在媒体插入对话框中。

然后你可以像这样使用它。

```
<?php the_post_thumbnail( 'square-large' ); ?> 
```

`functions.php`您可以在主题中添加这些行。如果您想确保在更新主题时不会覆盖这些行，我强烈建议您创建一个子主题，您可以[在此处阅读如何做到这一点](http://codex.wordpress.org/Child_Themes)。

这不会影响现有图像。您可以使用以下代码重新创建丢失的缩略图：

```
include_once( ABSPATH . 'wp-admin/includes/image.php' );
function regenerate_all_attachment_sizes() {
    $args = array( 'post_type' => 'attachment', 'numberposts' => 100, 'post_status' => null, 'post_parent' => null, 'post_mime_type' => 'image' ); 
    $attachments = get_posts( $args );
    if ($attachments) {
        foreach ( $attachments as $post ) {
            $file = get_attached_file( $post->ID );
            wp_update_attachment_metadata( $post->ID, wp_generate_attachment_metadata( $post->ID, $file ) );
        }
    }       
}
regenerate_all_attachment_sizes(); 
```

这只需要运行一次。

# php - 防止网站上的错误消息

> ID：14642568
> 
> 赞同：-2
> 
> 时间：2013-02-01T08:49:01.107
> 
> 标签：php, cakephp

我正在使用第三方 API，它使用

```
trigger_error function 
```

关于错误。

这反过来将显示在网站上。防止在网站上显示此类错误的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:52:45.630

把它放在你的 PHP 文件之上

```
error_reporting(0);
ini_set('display_errors', 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:53:20.237

[`error_reporting()`](http://php.net/manual/en/function.error-reporting.php)就像@Dainis Abols 所说，您可以简单地使用每个文档开头的函数调用来关闭错误报告，或者您可以将其放置在所有文档中通用的包含文件中。最有效的方法是在您的 php.ini 文件中将其更改[`error_reporting`](http://www.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:01:19.793

如果您需要防止所有错误意味着不需要在您的脚本或第 3 部分 API 中显示任何错误，您可以使用

```
error_reporting(0);
ini_set('display_errors', 0); 
```

如果您需要防止特定代码行中的某些错误，请在该行前面使用@infront，它将抑制错误

见这里[http://us3.php.net/manual/en/language.operators.errorcontrol.php](http://us3.php.net/manual/en/language.operators.errorcontrol.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:58:55.253

如果您使用 cakephp，请将 Config/core.php 中的调试更改为 0

```
/**
 * CakePHP Debug Level:
 *
 * Production Mode:
 *  0: No error messages, errors, or warnings shown. Flash messages redirect.
 *
 * Development Mode:
 *  1: Errors and warnings shown, model caches refreshed, flash messages halted.
 *  2: As in 1, but also with full debug messages and SQL output.
 *
 * In production mode, flash messages redirect after a time interval.
 * In development mode, you need to click the flash message to continue.
 */
    Configure::write('debug', 0); 
```

# python - 如何获取函数的名称和/或给定指针的描述

> ID：14642572
> 
> 赞同：1
> 
> 时间：2013-02-01T08:49:16.120
> 
> 标签：python

我正在使用**Python 2.7**。有没有办法将名称、描述以及可能的其他元数据与函数关联起来，这样我就不必使用外部字典来保存这些信息，如下面的代码：

```
def predicateA(v):
    # some logic that eventually returns a True/False value
    return True

def predicateB(v):
    # some logic that eventually returns a True/False value
    return False

predicateNames={}
predicateNames[predicateA]='name and description for predicateA'
predicateNames[predicateB]='name and description for predicateB'

predicates = [predicateA, predicateB]

def evalForAllPredicates(v):
    for f in predicates:
       result = f(v)
       print "function %s returned: %s" % (predicateNames[f], result)

evalForAllPredicates(3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:54:48.753

如果你的函数有合适的[文档字符串](http://www.python.org/dev/peps/pep-0008/#documentation-strings)，你可以使用`__name__`and`__doc__`属性

```
>>> def predicateA(v):
    '''some logic that eventually returns a True/False value
    '''
    return True

>>> predicateA.__doc__
'some logic that eventually returns a True/False value\n    '
>>> predicateA.__name__
'predicateA' 
```

在您的示例中，您想要的描述是通过 doc 字符串，并放置在函数头之后的三重双或单代码中。除非你这样做，否则你`__doc__`将返回空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T09:02:10.730

`__name__`您可以通过and`__doc__`属性访问函数的名称及其文档字符串。函数的文档字符串只是作为函数中第一条语句放置的字符串文字。约定是使用三引号将文档字符串括起来，因为它们预计会跨越多行。

```
def predicateA(v):
    """
    some logic that eventually returns a True/False value
    """
    return True

print "Name:", predicateA.__name__
print "Doc:", predicateB.__doc__ 
```

要将任意元数据关联到函数，只需将您喜欢的任何属性分配给函数，就好像它是一个普通对象一样，毕竟它就是。

```
def predicateB(v):
    """
    some logic that eventually returns a True/False value
    """
    return False

predicateA.alwaysReturnsFalse = False
predicateB.alwaysReturnsFalse = True

for pred in [predicateA, predicateB]:
    print "Function:", pred.__name__
    print "Documentation:", pred.__doc__
    if pred.alwaysReturnsFalse:
        print "(This function always returns false)" 
```

```
功能：谓词A
文档：
    一些最终返回 True/False 值的逻辑

功能：谓词B
文档：
    一些最终返回 True/False 值的逻辑

（此函数始终返回 false）

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T08:53:08.927

您可以向函数添加各种属性，并且可以包含一个文档字符串：

```
def fun(x)
    """
    Description ...
    """
    pass

fun.foo = 2
fun.baz = "will do naught" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T08:53:20.283

您可以使用`__name__`和`__doc__`属性分别获取函数名和文档字符串。

# android - DalvikVM 中的异常：没有可用的临时寄存器

> ID：14642575
> 
> 赞同：2
> 
> 时间：2013-02-01T08:49:23.677
> 
> 标签：android, cordova, jquery-mobile

我正在尝试使用 PhoneGap 和 jquery mobile 开发一个移动应用程序 android。应用程序运行正常，直到显示以下错误的阶段：

```
 No free temp registers 
 Jit: aborting trace compilation, reverting to interpreter 
```

我怎么解决这个问题？

# ios - 无法打开持久连接的日志，即在 iPhone 上推送日志

> ID：14642583
> 
> 赞同：0
> 
> 时间：2013-02-01T08:50:19.573
> 
> 标签：ios, debugging, logging, apple-push-notifications, xcode-organizer

我已尝试根据以下说明在我的 iPhone 上启用推送通知日志记录：[Apple Technical Note 2265](http://developer.apple.com/library/ios/#technotes/tn2265/_index.html)。

我已经成功地安装了 PersistentConnectionLogging.mobileconfig 文件，没有任何问题。在我的设备的控制台窗口中查看时，我收到以下警告：

```
<Warning>: Unable to open logging file '/var/mobile/Library/Logs/PersistentConnection/com.apple.syncdefaultsd-syncdefaultsd-APSClient.log' 
```

这到底是什么意思？在我看来，它无法在我的计算机上创建日志文件:(

我已经在我的计算机上创建了路径。

有没有人遇到过同样的问题？是否可以设置保存日志的路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T12:24:34.977

事实证明，通过 Organizer 进行的日志记录似乎不起作用。根据技术说明，控制台日志记录在 iOS 6.x 中不可用。但是我可以使用 iTunes 读取日志。

您必须连接您的设备并进行同步。在此之后，应该在此处找到崩溃日志（在 Mac OS X 上）：

```
~/Library/Logs/CrashReporter/MobileDevice/<DEVICE_NAME>/PersistentConnection/ 
```

我希望这可以帮助别人。

# php - 如果我用“when”命名mysql表中的一个字段会发生什么

> ID：14642584
> 
> 赞同：1
> 
> 时间：2013-02-01T08:50:22.123
> 
> 标签：php, mysql, phpmyadmin

我创建了一个包含 3 列 ID（主键）、何时（一些 varchar 值）、Created_date（时间戳）的表

**用“何时”命名字段会产生任何问题吗？**

我一直在查询`update table set table.when='$when' where ID='1'`

请建议

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T08:51:40.997

只要您必须使用 tableName 和列名就可以**了**

```
update `table` 
set `table`.when='$when' 
where ID='1' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/75875/1)

否则，用反引号包裹它

```
update `table` 
set `when`='$when' 
where ID='1' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/75875/3)

其他链接：

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

如果可能，不要使用保留关键字列表中的名称或标识符以避免出现问题。

# javascript - 使用 less.js 会出现异常

> ID：14642587
> 
> 赞同：1
> 
> 时间：2013-02-01T08:50:30.493
> 
> 标签：javascript, jquery, css, less, tumblr

当我尝试包含`less.js`它时，它会给我一个**XmlHttpRequest Exception 101**。

我包括这样的 .less 文件：

```
<link rel="stylesheet/less" type="text/css" href="anything.less" /> 
```

现在，我正在开发一个 Tumblr 主题，这仅在我将主题上传到 Tumblr 时才会发生。这两个文件都包含正确，我可以通过单击源代码中的链接来访问真实文件。

谁能帮我解决这个问题？

我仅将其用于生产。在本地编译less文件，嵌入到模板中，然后再次上传是非常耗时的。

* * *

不重复：

[LESS CSS 最小设置失败](https://stackoverflow.com/questions/7942277/less-css-minimal-setup-failure)
我使用的是 Safari，并且我使用的是全局 url ( [http://somelink.com/style.less](http://somelink.com/style.less) )。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:07:22.193

你说：

> 然后 html 文件在 www.tumblr.com 上，.less 文件在 themelandia.com 上

这意味着 less.js 文件必须发出跨域 ajax 请求才能检索您的`.less`文件。浏览器不允许这样做，因此请求失败。

如果你想解决你的问题，你必须把`.less`文件放在 tumblr.com 上的某个地方

# javascript - 在 JavaScript 或 jQuery 的帮助下截屏？

> ID：14642598
> 
> 赞同：1
> 
> 时间：2013-02-01T08:51:07.873
> 
> 标签：javascript, jquery, html, webpage-screenshot

> **可能重复：**
> [使用 jquery 生成网站的屏幕截图](https://stackoverflow.com/questions/4550947/generating-a-screenshot-of-a-website-using-jquery)
> [如何使用 JavaScript 对 div 进行屏幕截图？](https://stackoverflow.com/questions/6887183/how-to-take-screen-shot-of-a-div-with-javascript)

我想使用 JavaScript 或 jQuery 截取整个网页的屏幕截图，并在单击按钮时将该图像设置为另一个窗口背景。我怎样才能实现它。

# mysql - SELECT * FROM 表 A 并统计表 B 中匹配特定字段的对应行数

> ID：14642599
> 
> 赞同：2
> 
> 时间：2013-02-01T08:51:10.723
> 
> 标签：mysql, database, select, join

我有两个表：“系列”和“产品”

“系列”包含系列书籍的名称，“产品”包含个别书籍名称的详细信息。

所以是这样的：

```
Series Table:
id      series_name               series_description
1       Lord of the Rings         Trilogy of fantasy books recently made into film
2       A Song of Ice and Fire    Epic series of novels currently showing on HBO
3       Harry Potter              Famous Children's book series also loved by adults

Product Table:
id      product_name              series_id     author             etc...
1       Fellowship of the Ring    1             JRR Tolkien
2       The Two Towers            1             JRR Tolkien
3       Return of the King        1             JRR Tolkien
4       A Game of Thrones         2             George R R Martin
5       A Clash of Kings          2             George R R Martin
6       A Storm of Swords         2             George R R Martin
7       A Feast for Crows         2             George R R Martin
8       A Dance with Dragons      2             George R R Martin
9       Harry Potter and the...   3             JK Rowling
etc. 
```

我想 SELECT * FROM series 和 COUNT(*) FROM product 以便查询返回一个包含系列信息的表，数据库中与每个系列对应的产品数量附加为表的最后一列。我也想按类型来做，所以在某处有一个额外的 WHERE 子句。如果选择“幻想与魔法”作为类型，它看起来像这样：

```
id      series_name               series_description         number_of_products
1       Lord of the Rings         Trilogy of Fantasy...      3
2       A Song of Ice and Fire    Epic Series of Novels...   5
3       Harry Potter              Famous Children's book...  7 
```

我想我可能需要 LEFT JOIN，但到目前为止我的最佳尝试一直在进行。

这是我到目前为止所拥有的，但我认为这可能是完全错误的。

```
SELECT  series.id,                                   
series.series_name,                                         
series.publisher_id,                                       
series.description, 
series.image, 
COUNT (product.*) as nRows 
FROM series 
LEFT OUTER JOIN product
ON series.id = product.series_id                    
WHERE series.genre = 'Fantasy and Magic'
GROUP BY ... (do I need a GROUP BY?) 
```

任何帮助都将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T09:05:30.260

差不多好了。尝试这个。

```
SELECT  series.id,                                   
series.series_name,                                         
series.publisher_id,                                       
series.description, 
series.image, 
COUNT (product.id) as nRows 
FROM series 
LEFT OUTER JOIN product
ON series.id = product.series_id                    
WHERE series.genre = 'Fantasy and Magic'
GROUP BY series.id,                                   
series.series_name,                                         
series.publisher_id,                                       
series.description, 
series.image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:08:46.297

[这](http://www.sqlfiddle.com/#!3/8d526/4)不是有帮助吗？

```
select s.id, 
   s.series_name, 
   s.series_description, 
   (select count(*) from Products p where p.series_id = s.id) number_of_products 
from Series s 
```

# android - 我应该如何处理访问令牌？

> ID：14642602
> 
> 赞同：0
> 
> 时间：2013-02-01T08:51:25.057
> 
> 标签：android, facebook

首先，我可以登录我的 facebook，并且我已经将访问令牌保存在`SharedPreferences`.

但是，当我尝试使用此代码时：

```
JSONObject json_data = null;
try    
{
    JSONObject response = Util.parseJson(new Facebook(Define.APP_ID).request("me/friends"));

    JSONArray jArray = response.getJSONArray("data");

    json_data = jArray.getJSONObject(0);
    String name = json_data.getString("name");

}
catch (MalformedURLException e)
{
    e.printStackTrace();
}
catch (JSONException e)
{
    e.printStackTrace();
}
catch (IOException e)
{
    e.printStackTrace();
}
catch (FacebookError e)
{
    e.printStackTrace();
} 
```

我收到错误“必须使用活动访问令牌来查询有关当前用户的信息”。

我该怎么办？我已经有了访问令牌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:53:15.863

你不应该`Facebook`直接从 Object 发出任何请求。您必须先创建`Facebook`对象，然后设置`AccessToken`到期时间，然后执行以下请求。

```
FaceBook fb = new FaceBook(APP_ID);

fb.setAccessToken("youraccesstoken");
fb.setAccessExpires(expires);//expires is your milliseconds time. 
```

然后你做你的请求`fb.request("me/friends");`

您在没有经过有效身份验证的会话的情况下请求信息。所以你得到了那个错误。进行身份验证并设置访问令牌，然后就没有问题了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:06:08.343

使用 Facebook SDK for Android 3.0 为您处理几乎所有事情不是更好吗？类中的方法`executeMyFriendsRequestAsync(Session session, Request.GraphUserListCallback callback`)`Request`在回调中返回您的朋友列表。这是入门指南：[https](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0) ://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0 。如果您使用本指南中的示例代码并更改执行的请求类型，您将获得与您尝试在您提供的代码中获得的相同信息。

# winapi - 如何知道进程是否从服务运行

> ID：14642610
> 
> 赞同：0
> 
> 时间：2013-02-01T08:52:02.390
> 
> 标签：winapi, service, findwindow

我制作了一个 GUI 应用程序，它必须在我的 DELL 服务器上运行才能 24 小时发送查询。

如果应用程序被随机用户停止，或者不管它是什么，我创建了一个服务程序来检测它何时停止运行，并再次执行它。

问题是，在服务中，FindWindow() 不能正常工作（总是返回 nullptr），因为微软从 XP 开始改变了它的操作系统服务策略。而且我的服务程序无法找到该程序是否在进程列表中。

我在互联网上找到了一些解决方案，即“允许服务与服务面板上的桌面交互”，但由于它是很久以前的，所以不太适合当前的操作系统版本。

我应该改用 IPC 吗？或任何其他解决方法？

我相信必须有一种方法可以做到这一点，因为使用 CreateProcessAsUser() 也可以从服务执行进程。

任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:10:16.383

所以我按照 Remy Lebeau 的建议做了，它在 Windows 7 和 2008 中都能正常工作。

以下是我一步一步进行的。

1.  在 GUI 应用程序的**全局**命名空间中创建一个命名互斥锁。

    ```
    ::CreateMutex(nullptr, false, L"Global\\MyMutex"); 
    ```

2.  使用 CreateMutex() 定期检查互斥锁是否消失，不要忘记处理句柄**的引用计数**。

    ```
    HANDLE hDetector = ::CreateMutex(nullptr, false, L"Global\\MyMutex");

    if (GetLastError() == ERROR_ALREADY_EXISTS)
    {
            // The GUI application is still running.
            // ...  

            ::CloseHandle(hDetector); 
    }
    else
    {
            // The GUI application is not running.
            // ...

            ::CloseHandle(hDetector);
    } 
    ```

3.  看到它的工作。

# mysql - 在 mysql 中使用 IN 和 UNION 无法正确形成数据集

> ID：14642611
> 
> 赞同：0
> 
> 时间：2013-02-01T08:52:10.167
> 
> 标签：mysql, sql, logic, union

数据库模式

![数据库模式](../Images/2b3024bcfc3a8ee1be6697347cf59240.png)

问题 -

> 找出制造商 B 生产的所有产品（任何类型）的型号和价格。

我的尝试——

```
SELECT b.model, b.price FROM laptop AS b 
WHERE b.model IN ( SELECT model FROM product WHERE maker = 'B')
UNION
SELECT c.model, c.price FROM pc AS c 
WHERE c.model IN ( SELECT model FROM product WHERE maker = 'B')
UNION
SELECT d.model, d.price FROM printer AS d 
WHERE d.model IN ( SELECT model FROM product WHERE maker = 'B') 
```

即使这也没有显示仅使用 B 的正确数据集 -

```
SELECT b.model, b.price FROM laptop AS b 
WHERE b.model IN ( SELECT model FROM product WHERE maker = 'B') 
```

只有一个结果集即将到来。

让我知道我在查询时犯的逻辑错误。

编辑 -

输出 -

```
SELECT model FROM product WHERE maker = 'B' 
```

![查询1](../Images/a96e30087a167334e3359970942252eb.png)

```
SELECT b.model, b.price FROM laptop AS b 
WHERE b.model IN ( SELECT model FROM product WHERE maker = 'B') 
```

![输出](../Images/d43104c5a98eadf11af53a34dd824fa6.png)

询问 -`SELECT * FROM product WHERE maker = 'B'`

输出 -

![在此处输入图像描述](../Images/abe0be9f2282c94bb245902b498ad749.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:58:42.477

```
SELECT b.model, b.price FROM laptop AS b 
...
SELECT c.model, c.price FROM laptop AS c 
...
SELECT d.model, d.price FROM laptop AS d 
```

您从笔记本电脑中选择了 3 次，结果是相同的结果集。然后将`UNION`它们放在一起，这将删除所有重复项。

编辑：您的示例查询；

```
SELECT b.model, b.price FROM laptop AS b 
WHERE b.model IN ( SELECT model FROM product WHERE maker = 'B') 
```

只会找到笔记本电脑，因为那是唯一使用的桌子。1121是PC，所以查询不会显示。

# javascript - 粗略的 Unicode -> 没有 CLDR 的语言代码？

> ID：14642615
> 
> 赞同：1
> 
> 时间：2013-02-01T08:52:30.543
> 
> 标签：javascript, python, unicode, cldr

我正在写一个字典应用程序。如果用户键入 Unicode 字符，我想检查该字符是哪种语言。

例如

```
字 - returns ['zh', 'ja', 'ko'] 
العربية - returns ['ar']
a - returns ['en', 'fr', 'de'] //and many more
й - returns ['ru', 'be', 'bg', 'uk'] 
```

我搜了一下发现可以用CLDR [https://stackoverflow.com/a/6445024/41948](https://stackoverflow.com/a/6445024/41948)

或 Google API [Python - 我可以检测 unicode 字符串语言代码吗？](https://stackoverflow.com/q/4545977/41948)

但就我而言

*   查找大型charmap db 似乎需要大量存储和内存
*   调用 API 太慢，而且需要网络连接
*   不需要非常准确。只有大约 80% 的正确率是可以接受的
*   简单快速是主要要求
*   只覆盖 UCS2 BMP 字符是可以的。

有小费吗？

我需要在 Python 和 Javascript 中使用它。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:27:23.907

将字形缩小到语言家族就足够了吗？如果是这样，您可以基于 BMP 的映射创建一组范围（语言 -> 代码范围），例如[http://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane](http://en.wikipedia.org/wiki/Plane_(Unicode)#Basic_Multilingual_Plane)或脚本部分中显示的范围Unicode 图表页面 - [http://www.unicode.org/charts/](http://www.unicode.org/charts/)

由于共享符号的数量，可靠地确定字形的父语言肯定更加复杂。如果您只需要 80% 的准确度，您可能会调整某些语言的范围，以便在简化范围的情况下有意包含/省略某些字符。

编辑：我重新阅读了您引用 CLDR 的问题以及关于代码 - > 语言映射的第一个答案。我认为这绝对是不可能的，但如果计算成本有点高，反过来似乎也是可行的。通过巧妙的数据结构，您可以识别语言系列，然后从那里深入到实际的语言范围，减少通过不相关语言 -> 范围对的遍历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:25:27.770

如果语言的数量相对较少（或者您关心的数量相当少），您可以为每种语言使用 Bloom 过滤器。布隆过滤器让您可以进行非常便宜的成员资格测试（可能会出现误报），而无需将所有成员（在本例中为代码点）存储在内存中。然后，通过针对每种语言的预构建过滤器检查代码点来构建结果集。它是可调的——如果你得到太多误报，你可以使用更大尺寸的过滤器，但会消耗内存。

有 Python 和 Javascript 的布隆过滤器实现。（嘿 - 我见过做这个的人！[http://www.jasondavies.com/bloomfilter/](http://www.jasondavies.com/bloomfilter/)）

布隆过滤器：[http ://en.m.wikipedia.org/wiki/Bloom_filter](http://en.m.wikipedia.org/wiki/Bloom_filter)

多读一点，如果您只需要 BMP（65,536 个代码点），您可以为每种语言存储一个直接位集。或用于语言 X 代码点的 2D[位数组。](http://pypi.python.org/pypi/bitarray)

你想考虑多少种语言？

# cuda - Nvidia 的 Fermi GPU 如何向流式多处理器发出线程块

> ID：14642619
> 
> 赞同：3
> 
> 时间：2013-02-01T08:52:54.630
> 
> 标签：cuda, gpu, multiprocessor

假设我有 8 个线程块，我的 GPU 有 8 个 SM。那么 GPU 是如何向 SM 发出这个线程块的呢？

我发现一些程序或文章提出了一种广度优先的方式，即在这个例子中每个 SM 运行一个线程块。然而，根据一些文件，如果 GPU 内核受到延迟限制，那么增加占用率可能是一个好主意。如果可以的话，可以推断出 8 个线程块将在 4 个或更少的 SM 上运行。

我想知道哪一个是真实的。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T15:35:15.277

很难说 GPU 到底在做什么。如果你有一个你感兴趣的特定内核，你可以尝试读取和存储`%smid`每个块的寄存器。

[此处](https://devtalk.nvidia.com/default/topic/468126/using-smid-compiling-a-ptx-/)给出了如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T16:44:36.383

你问错了问题：你不应该担心硬件如何将线程块分配给 SM。这是 GPU 的责任。事实上，由于他们的编程模型没有假设哪些块将在哪些 SM 上运行，因此您可以获得跨计算设备池/未来世代的可扩展性。

相反，您应该尝试为 GPU 提供最佳数量的线程块。这很重要，因为它受到许多限制

# angularjs - $location 哈希前缀

> ID：14642634
> 
> 赞同：20
> 
> 时间：2013-02-01T08:53:51.197
> 
> 标签：angularjs

我刚开始使用 Angular，所以这可能是一个常见的新手错误，但我正在尝试实现以下 url 格式：

```
http://myapp.localhost/index.html#!/about 
```

我认为哪个应该是 Angular 的默认设置？

这是我的配置：

```
angular.module('App', []).config(function($routeProvider, $locationProvider, VIEWS_ROOT) {
    $locationProvider.html5Mode(false);
    $locationProvider.hashPrefix = '!';

    // Routing
    $routeProvider.when('/', {templateUrl: './welcome.html', controller: 'WelcomeController'});
   $routeProvider.when('/about', {templateUrl: './about.html', controller: 'AboutController'});
})
.run(function($rootScope) {
    //...
}); 
```

在我的 html 中，我有一个简单的锚点，如下所示：

```
<a href="#!/about">About</a> 
```

但是，当我单击该锚点时，构造的结果 URL 是：

```
http://myapp.localhost/index.html#/!/about 
```

这显然不符合我的任何路线......有点难倒这里实际发生的事情，或者我做错了什么。我正在虚拟主机下运行我的本地 Apache 实例。mod_rewrite 没有发生任何事情 - 所以看起来 Angular 正在这样做。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-04T08:55:52.743

这是一种设置 hashPrefix 的方法，而不是属性。`$locationProvider.hashPrefix('!');`

# mysql - 查询制作销售发票 iReport

> ID：14642635
> 
> 赞同：0
> 
> 时间：2013-02-01T08:53:53.183
> 
> 标签：mysql

[http://www.4shared.com/photo/q95NaCKo/satack.html](http://www.4shared.com/photo/q95NaCKo/satack.html) 这是我在其中创建这样的表格的图像

问题：
我想创建一个报告，但在此之前我必须创建一个查询，我从许多表中获取 field2。从我的图像中......带有下划线的单词是主键......

有六个表不为空..之前，我尝试了这个查询...

```
create view view_si as 
select sellheader.NoBukti as  nobukhead,mssell.NoBukti,       
mssell.KodeBarang,mssell.Qty,
mssell.Satuan,mssell.Harga,mssell.Qty, 
mssell.Harga as Qtyharga 
from sellheader 
join mssell on sellheader.NoBukti = mssell.NoBukti 
group by sellheader.NoBukti 
```

但它不能用我的头脑...

我想要这样的结果..

[http://www.4shared.com/photo/FTbZzX2K/capture.html](http://www.4shared.com/photo/FTbZzX2K/capture.html)

我已经尝试加入但在表 sellheader 上只有一行..除了 mssell 有 2 行..如果我加入他们。它变成1行..

# c# - 母版页控制访问 c#

> ID：14642637
> 
> 赞同：0
> 
> 时间：2013-02-01T08:54:12.943
> 
> 标签：c#, asp.net, controls, master-pages

在母版页中，我有一个 id 为“txtMasterTextBox”的 asp:TextBox。当此页面中另一个 ID 为“childTextBox”文本的文本框发生更改时，我想从子页面更改此文本框的“文本”属性。在 childTextBox_TextChanged() 我有

```
TextBox tbTest = (TextBox)this.Master.FindControl("txtMasterTextBox");
tbTest.Text = childTextBox.Text; 
```

我可以使用 Text Visualiser 看到 lbTest.Text 已成功更改，但在母版页上的实际 textBox 中没有任何变化。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:14:09.943

```
you have to do this

In master page.

    Master:  <asp:TextBox ID="txtMasterTextBox" runat="server"></asp:TextBox>
In Child Page.

 child:  <asp:TextBox ID="childtxt" runat="server" ontextchanged="childtxt_TextChanged" **AutoPostBack="true"**></asp:TextBox>

than in Textchange event of child textbox 
 protected void childtxt_TextChanged(object sender, EventArgs e)
        {
            TextBox tbTest = (TextBox)this.Master.FindControl("txtMasterTextBox");
            tbTest.Text = childtxt.Text;

        }

**so basiclly u have to put one attribute "AutoPostback" to True** 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T08:58:10.277

您必须在 master 中提供一个公共属性作为`TextBox`. 然后你只需要相应地转换`Master`页面的属性。

在你的主人：

```
public TextBox MasterTextBox { 
    get {
        return txtMasterTextBox;
    } 
} 
```

在您的子页面中（假设您的主人的类型是`MyMaster`）：

```
((MyMaster) this.Master).MasterTextBox.Text = childTextBox.Text; 
```

但是，这只是比您的方法更清洁的`FindControl`方法，所以我不确定为什么`TextBox`不显示您更改的文本。也许这是`DataBind`回发的问题。

更好的方法是不公开属性中的控件，而只公开`Text`. 然后您可以轻松更改基础类型。考虑您要将类型从更改`TextBox`为`Label`以后。您必须使用 更改所有内容页面`FindControl`，您甚至不会收到编译器警告而是运行时异常。使用 proeprty 方法，您可以进行编译时检查。如果您甚至将其更改为仅获取/设置`Text`底层控件的属性，则可以在不更改任何内容页面的情况下更改它。

例如：

```
public String MasterTextBoxText { 
    get {
        return txtMasterTextBox.Text;
    }
    set {
        txtMasterTextBox.Text = value;
    }
} 
```

并在内容页面中：

```
((MyMaster) this.Master).MasterTextBoxText = childTextBox.Text; 
```

# c++ - 将所有文件从 ZIP 存档移动到另一个

> ID：14642640
> 
> 赞同：0
> 
> 时间：2013-02-01T08:54:34.167
> 
> 标签：c++, zip, unzip

我正在寻找一个库，只需将 ZIP 存档中的所有文件移动到 C++ 中的另一个库。我找到了 libzip，但最好只用于某些您知道名称的文件。我不关心档案 A 和档案 B 之间的步骤，只要它不会花费太多时间。（如果可能，它将删除其临时文件夹中的文件）。我更喜欢便携式图书馆。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:06:00.387

Libzip 可能是最好的选择。

您可以使用[`zip_get_num_entries`](http://www.nih.at/libzip/zip_get_num_entries.html)获取存档中的文件数，然后使用[`zip_get_name`](http://www.nih.at/libzip/zip_get_name.html)获取特定文件的文件名。用于[`zip_fopen_index`](http://www.nih.at/libzip/zip_fopen.html)打开存档内的文件，[`zip_fread`](http://www.nih.at/libzip/zip_fread.html)读取文件（并保存到磁盘或另一个 zip 存档），完成[`zip_fclose`](http://www.nih.at/libzip/zip_fclose.html)后关闭文件。如果要从存档中删除文件，请使用[`zip_delete`](http://www.nih.at/libzip/zip_delete.html).

继续对所有文件循环执行此操作，从最高索引开始到索引零。

* * *

至于 Windows 上的 libzip，请参见例如[这个答案](https://stackoverflow.com/a/12239625/440558)（或者如果它不起作用[这个](https://stackoverflow.com/a/10508376/440558)答案）。

# javascript - 单击按钮后如何更改列排序类型？[jQuery，数据表]

> ID：14642641
> 
> 赞同：0
> 
> 时间：2013-02-01T08:54:34.003
> 
> 标签：javascript, jquery, datatables

我在“firstValue secondValue”之类的列中有数据。此数据必须在一列中（我不能制作两列）。当我设置排序时，它按 firstValue 和 secondValue 排序。现在，在某些事件之后，我想更改为按 secondValue 对数据进行排序（忽略 firstValue）。在另一个事件之后，我想按 firstValue 排序。这可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T19:19:04.210

这可能为时已晚，但我刚刚遇到了同样的问题。该解决方案涉及[自定义排序](http://datatables.net/plug-ins/sorting)和[更改事件处理程序中的表设置](http://www.datatables.net/forums/discussion/542/dynamically-change-idisplaylength/p1)的组合。

一些使其更具体的代码：

```
$.extend($.fn.dataTableExt.oSort, {
    "secondValue-pre": function ( a ) {
        var parts = a.split(' ')[1];        
    },
    "secondValue-asc": function ( a, b ) { return ((a < b) ? -1 : ((a > b) ? 1 : 0)); },
    "secondValue-desc": function ( a, b ) { return ((a < b) ? 1 : ((a > b) ? -1 : 0)); }
});

var $myTable = $('#example').dataTable({
  "aoColumns": [
    null, //your column containing "firstValue secondValue"
    null,
  ]
});

$(document).ready(function() {
    $('.something').click( function () {
        var oSettings = $myTable.fnSettings();
        oSettings.aoColumns[0].sType = 'secondValue';
    });
}); 
```

我确信有很多方法可以改进此代码，但它应该可以帮助您入门。

# android - 手动 .apk 更新随机失败（从服务器下载）

> ID：14642644
> 
> 赞同：0
> 
> 时间：2013-02-01T08:54:40.500
> 
> 标签：android, android-asynctask, apk, auto-update

应用程序更新在启动时发生在应用程序中。该应用程序在服务器上检查最新版本，如果有更新版本可用，则下载并存储最新的 .apk 文件。然后应用程序启动更新过程。

有时发生的情况是，在下载并尝试安装更新后会出现一条消息。“解析错误。解析包时出现问题。” 我们在该领域有 60 多台 Android 设备，除了大约 10 台之外，大多数更新都适用于这些设备。

然后在一个使用相同更新过程的新项目中，我们的平板电脑拒绝使用相同的错误消息进行更新。这种情况在同一台平板电脑上反复发生，尽管在另一台平板电脑（不同品牌和操作系统）上运行良好。

设备品牌或操作系统版本之间似乎没有关联。在平板电脑上，很明显 .apk 文件没有完全下载。但是，从 Internet 浏览器进行手动下载和更新是可行的。

因此，尝试在某些设备上总结 .apk 文件下载未完成且安装失败。这可能是因为网络带宽限制吗？但是，该领域的这 10 台平板电脑肯定会在某个时候更新，因为每次应用程序启动时都会启动更新过程，我可以看到这些应用程序一次又一次地使用但没有更新。

很抱歉漫无边际，但我想了解很多信息。下面的这些代码行会在 5 秒后停止下载吗？两次超时有什么区别？

```
HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);
HttpConnectionParams.setSoTimeout(httpParameters, 5000); 
```

以下是标准更新`AsyncTask`。任何帮助，将不胜感激。我现在有点困惑，时间不在我这边。

```
 private class UpdateDownloadTask extends AsyncTask<Void, Void, String> {

        HttpClient httpclient;
        HttpGet httpget;
        HttpResponse response;
        HttpEntity httpentity;
        OutputStream outputStream;

        protected void onPreExecute () {

            //do not lock screen or drop connection to server on login
            activity.getWindow().addFlags(LayoutParams.FLAG_KEEP_SCREEN_ON);                  
            //initiate progress dialogue to block user input during initial data retrieval
            ProcessingDialog = ProgressDialog.show(context, "Please Wait", "Downloading Updates", true,false);
        }

        @Override
        protected String doInBackground(Void... nothing) {

            try {
                //set timeouts for httpclient
                HttpParams httpParameters = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);
                HttpConnectionParams.setSoTimeout(httpParameters, 5000);

                //setup http get
                httpclient = new DefaultHttpClient(httpParameters);             
                httpget = new HttpGet(uriApk);

                // Execute HTTP Get Request
                response = httpclient.execute(httpget);
                httpentity = response.getEntity();

                //create location to store apk file
                String path = Environment.getExternalStorageDirectory() + "/download/";
                File file = new File(path);
                file.mkdirs();  //if download folder not already exist
                File outputFile = new File(file, apkName);

                //write downloaded file to location
                outputStream = new FileOutputStream(outputFile, false);
                httpentity.writeTo(outputStream);
                outputStream.flush();
                outputStream.close();

                return "success";
            }

            catch (Exception e) {
                return "error: " + e.toString();
            }

        }

        @Override
        protected void onPostExecute(String result) {

            //check if result null or empty
            if (result.length() == 0 || result == null) {

                Toast.makeText(context, "Could Not Download Updates, Please Try Again. Closing Application.", Toast.LENGTH_LONG).show();
                activity.finish();
            }           
            //update downloaded
            if (result.equals("success"))   {
                //install downloaded .apk file
                Intent intent = new Intent(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/download/" + apkName)), "application/vnd.android.package-archive");
                activity.startActivity(intent);               
                //activity.finish();
            }
            //update not downloaded
            else {
                Toast.makeText(context, "Could Not Download Updates, Please Try Again. Closing Application.", Toast.LENGTH_LONG).show();                
                activity.finish();
            }           

            //close update dialog
            try {
                ProcessingDialog.dismiss();
            } catch (Exception e) {
                // nothing
            }
            //release screen lock
            activity.getWindow().clearFlags(LayoutParams.FLAG_KEEP_SCREEN_ON);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:32:53.143

在我添加以下代码并将超时时间增加到 30000 毫秒后，它起作用了。

```
httpget.setHeader("Accept", "application/vnd.android.package-archive");
httpget.setHeader("Content-Type", "application/vnd.android.package-archive");
String userAgent = "Mozilla/5.0 (Linux; U; Android 2.2; en-us; SCH-I800 Build/FROYO) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1";
httpget.setHeader("User-Agent", userAgent); 
```

希望这可以帮助其他有同样问题的人。

# android - 如何让键盘在应用程序启动时显示

> ID：14642652
> 
> 赞同：0
> 
> 时间：2013-02-01T08:55:02.400
> 
> 标签：android, keypad

作为我的应用程序的一部分，我希望在应用程序启动时显示 android 默认键盘，我从论坛获得了以下代码，但它不起作用。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    InputMethodManager imm;
    imm = = (InputMethodManager) gettSystemService(Context.INPUT_METHOD_SERVICE);
    imm.toggleSoftInput(InputMethodManager.SHOW_FORCED, inputMethodManager.HIDE_IMPLICIT_ONLY); 
```

请让我知道，如果我做错了什么，或者是否有任何其他方式来完成该功能。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:14:56.907

你只需要改变你的`manifest.xml`文件

```
<activity android:name=".MyActivity"
android:label="@string/app_name"
android:windowSoftInputMode="stateAlwaysVisible" /> 
```

看看[这个](https://stackoverflow.com/questions/1509719/android-how-to-make-the-keypad-always-visible)了解详情。

通过执行此设备的键盘将在加载应用程序时打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:59:46.153

我正在做类似的事情。但它需要布局中的 EditText。

```
private EditText editText;

void showKeyboard() {
    this.editText.requestFocus();
    InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    mgr.showSoftInput(this.editText, InputMethodManager.SHOW_IMPLICIT);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:04:03.103

如果你有一个`EditText`布局，使用这个：

```
EditText editText = (EditText) findViewById(R.id.editText);
editText.requestFocus();
InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
mgr.showSoftInput(editText, InputMethodManager.SHOW_IMPLICIT); 
```

或者，如果您在布局中**没有**并且`EditText`仍需要显示软键盘，请使用以下命令：

```
this.getWindow().setSoftInputMode(LayoutParams.SOFT_INPUT_STATE_VISIBLE); 
```

注意：对于第二种选择，所需的导入`LayoutParams`是：`import android.view.WindowManager.LayoutParams;`

# android - 表格布局中的片段

> ID：14642653
> 
> 赞同：-4
> 
> 时间：2013-02-01T08:55:04.943
> 
> 标签：android, android-fragments, tablelayout

我可以在表格行中动态放置几个片段并打开/关闭其可见性吗？

如果有任何示例代码，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:16:09.650

要了解如何正确执行此操作，请阅读如何使用 xml 或以编程方式将片段添加到任何 ViewGroup（包括表格布局）：http: [//developer.android.com/guide/components/fragments.html#Adding](http://developer.android.com/guide/components/fragments.html#Adding)

在布局 xml 中，您可以将`FrameLayout`带有 id的 a`fragment_container`放入表布局中并从 java 调用：

```
fragmentTransaction.add(R.id.fragment_container, fragment); 
```

# php - 如何获取计数值

> ID：14642655
> 
> 赞同：0
> 
> 时间：2013-02-01T08:55:31.240
> 
> 标签：php

如何从我的查询 COUNT 中获取结果。

这就是我在数据库中查询的样子

```
 fname  lname   mname    positionName  COUNT(tbl_votes.studId)
    jr    gwapo   is-very    chairman           2 
```

这就是我的网页的外观

```
 Name           Position      Number of Votes
  jr is-very gwapo    chairman         ______ 
```

这是我的代码。

```
<?php
  if ($result = $mysqli->query("SELECT tbl_student.fname, tbl_student.lname, tbl_student.mname, tbl_position.positionName, Count(tbl_votes.studId) FROM tbl_candidate Inner Join tbl_student ON tbl_candidate.studId = tbl_student.studId Inner Join tbl_position ON tbl_candidate.positionId = tbl_position.positionId Inner Join tbl_votes ON tbl_student.studId = tbl_votes.candId WHERE tbl_position.positionId =  '1' GROUP BY tbl_student.fname, tbl_student.lname, tbl_student.mname, tbl_position.positionName")) {

      if ($result->num_rows > 0) {
          echo "<table border='1' cellpadding='10'>";
          // set table headers
          echo "<tr><th>Name</th><th>Position</th><th>Number of Votes</th></tr>";

          while ($row = $result->fetch_object()) {
              echo "<tr>";
              echo "<td>" . $row->fname . " " . $row->mname . " " . $row->lname . " </td>";
              echo "<td>" . $row->positionName . "</td>";
              //this is where i suppose to echo the count result
            echo "<td>" . $row-> ??? . "</td>"; 
            echo"<tr>";
          }
          echo "</table>";
      } else {
          echo "No results to display!";
      }

  }
  $mysqli->close();

?> 
```

这是我的问题，我怎么能在 "echo "" 中传递 "Count(tbl_votes.studId)" 。 $row-> ??? . ""; " ？请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:58:55.673

在sql查询中，更改`Count(tbl_votes.studId)`为`Count(tbl_votes.studId) as stu_count`.

在php中，您可以使用`$row->stu_count`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:59:44.843

您需要使用[**SQL 别名**](http://dev.mysql.com/doc/refman/5.0/en/problems-with-alias.html)。

```
Count(tbl_votes.studId) as cnt
//or
Count(tbl_votes.studId) 'cnt' 
```

然后你可以访问它`$row->cnt`

关于别名的一些规则：

*   您可以在查询的其余部分使用别名（在您的示例中，您可以使用`ORDER BY cnt`）。*注意：据我所知，您不能在另一个 select 语句中使用您在 select 中创建的别名。*例如，`SELECT COUNT(something) AS cnt, cnt+3 FROM`......将不起作用
*   您可以为表使用别名，并在以后的使用中将表名替换为别名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:00:03.533

尝试 Select field1, field2, Count(tbl_votes.studId) as cnt from ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:00:53.833

而不是写

```
count(some_field) 
```

写

```
count(some_field) as count_some_field 
```

您为该计数字段提供别名。您可以通过 $row->count_some_field 访问它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T09:02:31.350

你应该使用 ' **as** ' 和 ' **count** ' 。所以你的查询会变成这样

```
"SELECT tbl_student.fname, tbl_student.lname, tbl_student.mname, tbl_position.positionName, Count(tbl_votes.studId) as no_of_votes FROM tbl_candidate Inner Join tbl_student ON tbl_candidate.studId = tbl_student.studId Inner Join tbl_position ON tbl_candidate.positionId = tbl_position.positionId Inner Join tbl_votes ON tbl_student.studId = tbl_votes.candId WHERE tbl_position.positionId =  '1' GROUP BY tbl_student.fname, tbl_student.lname, tbl_student.mname, tbl_position.positionName" 
```

然后你可以通过 php 得到它

`$row->no_of_vote`

有关更多信息，请参见[COUNT AS](http://www.w3schools.com/sql/sql_func_count.asp)

# speech-recognition - 在线自由语音识别器和 API

> ID：14642657
> 
> 赞同：0
> 
> 时间：2013-02-01T08:55:41.903
> 
> 标签：speech-recognition, speech

我想为孩子们开发一些基于网络的互动活动，我想使用语音识别作为一种输入。我的问题**不**在于如何在浏览器中录制声音，许多其他问题已经解决了这个问题。

我想知道的是是否存在某种免费的在线服务，我可以通过专用 API 访问来进行语音识别位？我的想法是录制声音并将其发送到服务器，这样我就不必为语音识别部分设置自己的专用服务器。例如，这就是 Siri 的工作方式。我认为 Apple 不提供对其语音识别引擎的免费访问（至少不是我发现的），但也许其他公司提供？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T06:23:34.773

谷歌推出了一种新的 API，称为网络语音 API。看看[https://www.google.com/intl/en/chrome/demos/speech.html](https://www.google.com/intl/en/chrome/demos/speech.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-25T13:18:55.113

我也没有找到太多。谷歌有[一篇论文](https://static.googleusercontent.com/media/research.google.com/en//pubs/archive/44268.pdf)谈到了在巨大的数据集上训练 LSTM 网络以建立儿童和成人的词汇表，还有[Pullstring](https://www.pullstring.com)声称有针对儿童的语音识别引擎，但说到 API，我没有找到任何内容。我很感激对此有任何进一步的研究结论。

# mysql - 从 SET 字段中删除值的最佳方法？

> ID：14642658
> 
> 赞同：19
> 
> 时间：2013-02-01T08:55:46.210
> 
> 标签：mysql, sql, sql-update

这是更新 mysql SET 字段的最佳方法，以从字段中删除特定值。

例如。具有值的字段类别：1、2、3、4、5？我想从列表中删除“2”：

```
UPDATE table 
SET categories = REPLACE(categories, ',2,', ',') 
WHERE field LIKE '%,2,%'; 
```

但是如果 '2' 是列表中的第一个或最后一个值呢？

```
UPDATE table 
SET categories = REPLACE(categories, '2,', '') 
WHERE field LIKE '2,%';

UPDATE table 
SET categories = REPLACE(categories, ',2', '') 
WHERE field LIKE ',2%'; 
```

我怎么能用一个查询来处理所有 3 个案例？！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-01T09:26:17.800

如果您需要从集合中删除的值不能多次出现，您可以使用这个：

```
UPDATE yourtable
SET
  categories =
    TRIM(BOTH ',' FROM REPLACE(CONCAT(',', categories, ','), ',2,', ','))
WHERE
  FIND_IN_SET('2', categories) 
```

看到它在[这里](http://sqlfiddle.com/#!2/e5cd9/1)工作。如果该值可以多次出现，这将删除它的所有出现：

```
UPDATE yourtable
SET
  categories =
    TRIM(BOTH ',' FROM
      REPLACE(
        REPLACE(CONCAT(',',REPLACE(col, ',', ',,'), ','),',2,', ''), ',,', ',')
    )
WHERE
  FIND_IN_SET('2', categories) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-01T11:03:54.790

```
update TABLE
set COLUMN = COLUMN & ~NUM
where COLUMN & NUM 
```

取自以下评论部分：[http ://dev.mysql.com/doc/refman/5.0/en/set.html](http://dev.mysql.com/doc/refman/5.0/en/set.html)

但请注意，NUM 不是值 '2'，而是它的内部索引。所以如果你定义了像“set ('1,'2','3','4','5')”这样的字段，那么这些值的对应索引是(1,2,4,8,16)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-01T09:03:51.930

**最好的方法是不要将用逗号分隔的值保存在表格上。**

但要回答你的问题，你可以使用`CASE`这个，

```
UPDATE table 
SET categories = CASE WHEN field LIKE '%,2,%'  -- In the middle
                           THEN REPLACE(categories, ',2,', ',')
                      WHEN field LIKE '2,%'    -- At the beginning
                           THEN REPLACE(categories, '2,', '')
                      WHEN field LIKE '%,2'    -- At the end
                           THEN REPLACE(categories, ',2', '') 
                      WHEN field = '2'         -- At whole
                           THEN '' 
                 END
WHERE FIND_IN_SET('2', categories) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-13T09:22:23.940

这是另一种方法：

```
UPDATE table
SET categories = CONCAT_WS(',',
    IF(FIND_IN_SET('1', categories), '1', NULL),
    -- Note that '2' is missing here!
    IF(FIND_IN_SET('3', categories), '3', NULL),
    IF(FIND_IN_SET('4', categories), '4', NULL),
    IF(FIND_IN_SET('5', categories), '5', NULL)
); 
```

`CONCAT_WS``','`如果不是 ，则将其所有参数（参数 1 除外）与第一个参数（在本例中）连接起来`NULL`。如果字段包含它，我们会查找该字段的每个可能值，`SET`但跳过我们要删除的那个（`2`在这种情况下）。如果是，我们返回那个值，否则`NULL`。这将集合的所有值与 连接起来`','`，跳过我们要删除的那个，为该`SET`字段重建一个新值。

这当然只有在你知道 的所有可能值的情况下才有效`categories`，但由于这是一个`SET`字段，你知道这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-05-14T05:35:11.460

> 具有值的字段类别：1、2、3、4、5？我想从列表中删除“2”：

我发现使用按位运算符是最干净的方法。的返回值返回值`FIND_IN_SET()`的位置，因此您可以使用此计算位来关闭。

```
UPDATE table
SET categories = CAST(categories AS UNSIGNED) & ~POW(2, FIND_IN_SET('2', categories))
WHERE FIND_IN_SET('2', categories); 
```

请注意，这`(categories+0)`是将当前值强制为`SET`整数。您可能会发现这是多余的，但要小心包含大量值的集合。我发现如果你不明确地将集合强制为整数，那么得到的数学可能是错误的——在执行这样的操作时，你绝对不想要错误的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-10-21T02:05:39.380

我喜欢 Kris Gielen 的这种方式（[https://blog.krisgielen.be/archives/255](https://blog.krisgielen.be/archives/255)）：

```
UPDATE table SET categories =
  TRIM(BOTH ',' FROM REPLACE(CONCAT(',', categories, ','),
  CONCAT(',', '2', ','), ','))
WHERE ... 
```

向集合中添加值：

```
UPDATE table SET categories = 
  CONCAT_WS(',', categories, '2')
WHERE ... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-27T18:16:32.687

在这里，@palindrom 和 @JohnWoo 提供了最佳答案。事实上，@palindrom 提供的答案非常好，应该是公认的答案。

但是，在@JohnWoo 提供的答案的情况下，如此大的案例陈述是绝对没有必要的，并且可以用更简短和整洁的编码来完成。我在下面说明了这一点-

```
UPDATE my_table
    -> SET categories = CASE
    -> WHEN categories LIKE "2"
    -> THEN REPLACE(categories,"2","")
    -> WHEN categories LIKE "2%"
    -> THEN REPLACE(categories,"2,","")
    -> WHEN categories LIKE "%2%"
    -> THEN REPLACE(categories,",2","")
    -> ELSE categories
    -> END; 
```

在这里，研究这篇关于结合两个更新语句的[帖子很有帮助。](https://stackoverflow.com/questions/4641970/how-do-i-combine-two-update-statements-in-one-mysql-query/69350126#69350126)我也在这里提供了答案。

# ios - iOS 6 中的 MKRoadWidthAtZoomScale？

> ID：14642665
> 
> 赞同：7
> 
> 时间：2013-02-01T08:56:23.143
> 
> 标签：ios, mapkit

从文档中`MKRoadWidthAtZoomScale`：

> 在 iOS 6 及更高版本中，您不应使用此函数来检索道路宽度。

是否可以使用其他功能，或者这只是 iOS 6 中缺少的功能？

奇怪的是，如果您不应该使用该功能，那么该功能并未被弃用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:53:56.267

我冒险猜测它没有被弃用，因为该功能将在某个时候重新添加。该函数在 iOS 6 中仍然有效，因为它在调用时不会导致崩溃，即使输出没有用。

如果您查看 (Apple) Maps 应用程序，您会发现当您放大方向路径时，路径的宽度会在最高缩放级别增加。在这些高缩放级别下，道路的宽度也会增加。显然，Apple 有一种内部方法可以知道缩放时道路的宽度。也许它还没有经过全面测试以进行一般发布。

以防万一有人认为您仍然可以使用此功能，以下是建议的道路宽度，从完全放大 (MKZoomScale = 1) 开始并缩小。

代码：

```
for (float zoomScale=1; zoomScale>0.00001; zoomScale /= 2) {
    NSLog(@"zoomScale: %f Road Width: %f", zoomScale, MKRoadWidthAtZoomScale(zoomScale));
} 
```

结果：

```
zoomScale: 1.000000 Road Width: 21.000000
zoomScale: 0.500000 Road Width: 32.000000
zoomScale: 0.250000 Road Width: 60.000000
zoomScale: 0.125000 Road Width: 96.000000
zoomScale: 0.062500 Road Width: 176.000000
zoomScale: 0.031250 Road Width: 288.000000
zoomScale: 0.015625 Road Width: 448.000000
zoomScale: 0.007812 Road Width: 768.000000
zoomScale: 0.003906 Road Width: 1536.000000
zoomScale: 0.001953 Road Width: 2048.000000
... 
```

至于替换功能，我建议只创建一些适用于最高 2 或 3 缩放级别的值，并使用低于该值的常量值。

这是苹果地图在低和高变焦下的路线叠加。您可以看到替代路线没有考虑较大的道路宽度，但主要路线宽度是正确的。更改路线不会影响备选路线宽度。

![在此处输入图像描述](../Images/776c29ee03c6df7f60cf962d67c38710.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T08:37:51.637

从 iOS 7.1 开始，文档中不再有警告 `MKRoadWidthAtZoomScale`。它是`MKOverlayRenderer.h`在 iOS 7.0 中引入的。

# c - 输出是什么？

> ID：14642666
> 
> 赞同：0
> 
> 时间：2013-02-01T08:56:40.900
> 
> 标签：c, debugging

> **可能重复：**
> [C 中以下宏的副作用是什么？嵌入式 C](https://stackoverflow.com/questions/7299286/whats-the-side-effect-of-the-following-macro-in-c-embedded-c)

以下将是什么输出：

```
#include <stdio.h>
#define MAN(x,y) ((x) < (y))?(x):(y)
main()
{  
    int i=10,j=5,k=0;
    k= MAN(i++,++j);
    printf("%d %d %d" ,i,j,k);
} 
```

在这里，我认为将调用 MAN(10,6) 并且输出将是：

```
11 6 6 
```

但是输出是

```
11 7 7 
```

有人可以解释一下吗。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T09:00:49.650

记住宏是如何工作的。它们完全按原样替换文本，并且不会像您期望的函数那样评估它们的论点。

```
k= MAN(i++,++j); 
```

实际上是

```
k= ((i++) < (++j))?(i++):(++j) 
```

这就是为什么`j`增加两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:01:25.177

您可以简单地将： x <- i++, y <- ++j 放入您的宏定义中，然后您可以看到

```
((i++) < (++j))?(i++):(++j) 
```

i++ 和 ++j 在进行比较时都被执行；由于比较返回 false，将执行 ++j 因此您得到了结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:01:57.190

它成为了

i++ < ++j ? 我++ : ++j

i 不会小于 j，所以我们使用第二个参数

所以我们做一个 i++ 和 ++j 和另一个 ++j

所以 10 + 1 =11 5 + 1 + 1 = 7 并返回第二个参数..... 7

11 7 7

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:04:23.227

由于 MAN 是*宏*而不是函数，因此此代码：

```
k = MAN(i++,++j); 
```

这意味着：

```
k = ((i++) < (++j))?(i++):(++j) 
```

因此，`j`会增加两次：一次是在`<`测试中，一次`(++j)`是在评估时。如果`MAN`是*函数*而不是宏，则将传递递增的*值*，而不是表达式本身，并且您的答案将是您所期望的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T09:07:01.477

在宏中它不计算值并传递它只是替换符号所以它变成这样的东西

```
MAN(i++,++j) ((i++) < (++j))?(i++):(++j) 
```

所以这里 ++j 执行了两次，答案变成了 11,7,7

# symfony - 如何在 Symfony2 中重定向未经授权的请求？

> ID：14642667
> 
> 赞同：1
> 
> 时间：2013-02-01T08:56:42.477
> 
> 标签：symfony

注意：我[手动验证](https://stackoverflow.com/questions/14520265/how-to-serialize-a-user-regarding-authentication#answer-14563732)用户。

我的安全配置如下：

```
firewalls:
    secured_area:
        pattern: ^/
        anonymous: ~
        form_login:
            check_path: login_check
            login_path: about
        remember_me:
            key: %secret%
            lifetime: 31536000
            path: /
            domain: ~
        logout: ~

access_control:
    - { path: ^/(_(profiler|wdt)|css|images|js)/, roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/(login|about), roles: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/, roles: ROLE_USER } 
```

我的想法是，如果用户没有被授权，他会被重定向到 about 页面。然后从那里他点击登录链接，我手动验证他的凭据。

目前它正在工作一半。问题是关于页面：

1）虽然资产似乎正确加载，但没有样式，

2）它似乎将很多重定向到自身（？）它似乎应该触发一个无限循环，但然后停止？理论：为什么它会为每个资产重新加载关于页面？

3）我会记得我甚至工作吗？

当前状态： ![在此处输入图像描述](../Images/af675e57cc1aae05f8a12017e7686d8e.png)

编辑：这是资产。将其从资产中取出使其工作。但我仍然想使用资产。

# java - 使用基类中定义的属性过滤条件

> ID：14642671
> 
> 赞同：1
> 
> 时间：2013-02-01T08:56:55.847
> 
> 标签：java, hibernate, hibernate-filters

我有 3 个类，`Base`定义如下：`Child``Other`

```
@Entity
@Filter(name = "myFilter", condition = "propBase = 'special'")
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class Base {
   private String propBase;

   //Getters, Setters
}

@Entity
public class Child extends Base {
   private String propChild;

   //Getters, Setters
}

@Entity
public class Other {
   @Filter(name = "myFilter", condition = "propBase = 'special'")
   private Set<Child> myList;

   //Getters, Setters
} 
```

假设过滤器是在包级别定义的，因此所有使用它的类都可以看到它。

使用启用了**myFilter**`Other`的会话，我从我的数据库中检索了一些实例。然后，当我尝试访问该`myList`集合时，由于该集合被声明为惰性，Hibernate 尝试从数据库中获取该集合。但是，在生成的 SQL 查询中出现了一些我没想到的东西：table 的别名`Child`用于为列添加前缀`propBase`，并且由于该列未在 table`Child`中定义（它定义在 中`Base`），所以我收到以下错误：

> 错误 JDBCExceptionReporter - 'where 子句'中的未知列'childAlias.propBase'

根据这个[线程](https://forum.hibernate.org/viewtopic.php?f=1&t=944267)，这似乎是预期的行为，但我不明白它是怎么回事。另外，假设这是预期的行为，当条件使用基类中定义的属性时如何使用过滤？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-03-21T04:49:40.153

您需要使用 sql 片段别名 - [https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#pc-filter-sql-fragment-alias](https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#pc-filter-sql-fragment-alias)

```
@Entity
public class Other {
   @Filter(
        name = "filterPropBase", 
        condition = "{b}.propBase='special'",
        aliases={@SqlFragmentAlias(alias="b", entity=Base.class)
   )
   private Set<Child> myList;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-21T09:10:55.300

我正在使用 Hibernate 4.1 并且遇到了同样的问题。[这解释了](https://github.com/rworsnop/hibernate-orm/blob/HHH-2394/hibernate-core/src/test/java/org/hibernate/test/annotations/filter/subclass/joined/Club.java)如何告诉 Hibernate 你的条件实际上是在哪个实体类上定义的。为 @Filter 注释添加别名解决了我的问题。

在 JPQL 选择语句中，通过继承直接解析属性名称，顺便说一句。

# android - 从 iPhone 和 Android 客户端录制并流回 iPhone/Android 进行播放的最佳音频格式？

> ID：14642675
> 
> 赞同：2
> 
> 时间：2013-02-01T08:57:25.267
> 
> 标签：android, iphone, audio

我的问题部分回答了：[iPhone和Android可以录制和播放哪种音频格式？](https://stackoverflow.com/questions/5083958/which-audio-format-can-be-recorded-and-played-back-by-iphone-and-android/5083999#5083999)

但是，如果可能的话，我想进一步询问。

简化的用例是这样的：客户端应用程序（将是 iPhone 或 Android）将通过内置麦克风录制音频。然后该音频将被发送到服务器。从同一个客户端应用程序中，用户可以看到录制的音频文件列表并流回播放。

我正在尝试查看录制和流式播放的最佳音频格式。

我有两个问题：

1）从我上面给出的链接来看，iPhone和Android似乎都支持AAC进行录制。但是，我对 AAC 的变体感到困惑。Android 似乎支持 AAC ADTS，而 iPhone 则有所不同（MPEG-4）。这些是一样的吗？

2) 我希望能够在 iPhone/Android 上以相同的格式录制，以便它们可以按原样流式传输到客户端设备。但是，如果在服务器上转码是更好的选择，那么首选的格式是什么？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-22T08:25:16.283

最后，在 iOS 上，我最终使用了

```
NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:

                                [NSNumber numberWithInt:kAudioFormatMPEG4AAC], AVFormatIDKey,                                    
                                [NSNumber numberWithInt:AVAudioQualityMin], AVEncoderAudioQualityKey,
                                [NSNumber numberWithInt:16], AVEncoderBitRateKey,
                                [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
                                [NSNumber numberWithFloat:16000.0], AVSampleRateKey,
                                nil]; 
```

在安卓上：

```
_mediaRecorder = new MediaRecorder();
_mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
_mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.AAC_ADTS);
_mediaRecorder.setOutputFile(_mediaFile.getAbsolutePath());
_mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AAC); 
```

生成的文件是 AAC 文件，可在 iOS 和 Android 上播放。希望有帮助！

# java - java中是否有线程安全和元素唯一的队列？

> ID：14642678
> 
> 赞同：4
> 
> 时间：2013-02-01T08:57:45.457
> 
> 标签：java, concurrenthashmap

就像“ConcurrentHashMap”和“ConcurrentLinkedQueue”的混合体。

这是我的要求：
我需要一个异步更新的缓存系统。这意味着我在将每个实体设置到 memcache 之前包装它。warpper 中有一个时间戳，指示其内容何时到期。来自前端的每个请求都会从 memcache 中获取数据，如果 warpper 显示过期，则会生成一个更新事件并将其放入 concurrentLinkedQueue 中，然后等待异步更新。
问题是：我不想多次徒劳地更新实体。在将事件添加到队列之前，我希望找到一种方法来确保队列中已经没有同一实体的事件。

如果我以这些方式这样做可以吗？

1、创建一个warpper Class，里面包含一个hashMap和一个linkedList。它的所有方法都是同步的：

```
public synchronized boolean add(String key,Object value){
    if(hashMap.containsKey(key)){
        return false;
    }else{
        hashMap.put(key,value);
        return linkedList.offer(value);
    }
} 
```

我相信这个解决方案会非常慢。
也许它就像 Collections.synchronizedMap(new LinkedHashMap())。

2、只需使用一个concurrentHashMap。如果我需要“轮询”操作，请从中迭代一个元素。

```
public Object poll(){
    Collection valueColl = concurrentHashMap.values();
    if(valueColl.isEmpty()){
        retrun null;
    }
    return valueColl.get(0);
} 
```

动作`concurrentHashMap.values().get(0)`慢不慢？

3、查看“ConcurrentHashMap”和“ConcurrentLinkedQueue”的源代码，如果可能的话，写一个“ConcurrentUniqueLinkedQueue”。
目前这对我来说有点难。

那么，你们会怎么说呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T09:16:33.373

我不认为您想丢弃最新的更新。也许你让它变得比它需要的更复杂。

```
public void add(K key, V value) {
    concurrentMap.put(key, value);
    queue.add(key);
}

public V poll() {
    for(K key; (key = queue.take()) != null;) {
        V value = concurrentMap.remove(key);
        if (value != null)
           return value;
        // value will be null if it's a duplicate so ignore and look for more.
    }
    return null;
} 
```

这将为您提供排队顺序中键的最新值。它不需要任何锁定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-12T22:42:17.217

```
import java.util.LinkedHashSet;
import java.util.Queue;
import java.util.concurrent.locks.ReentrantLock;

public class ConcurrentSetQueue<E> extends LinkedHashSet<E> implements Queue<E> {

    /**
     * 
     */
    private static final long serialVersionUID = 7906542722835397462L;

    final java.util.concurrent.locks.ReentrantLock lock = new ReentrantLock();

    public E remove() {
        final ReentrantLock lock = this.lock;
        lock.lock();
        try {
            E next = iterator().next();
            remove(next);
            return next;
        } finally {
            lock.unlock();
        }
    }

    @Override
    public E element() {
        return iterator().next();
    }

    @Override
    public boolean offer(E arg0) {
        return add(arg0);
    }

    @Override
    public E peek() {
        return element();
    }

    @Override
    public E poll() {
        return remove();
    }

} 
```

# android - 如何在 Android 的 ListView 中显示图像

> ID：14642682
> 
> 赞同：1
> 
> 时间：2013-02-01T08:58:02.703
> 
> 标签：android, android-listview

我制作了一个应用程序，在其中我正在*获取产品列表*及其*名称、描述和图像*，我**能够**在*单击任何 ListView 项目行时*以*详细的产品表单*显示图像，但**显示图像时出现问题在 ListView 中**，我不知道为什么会遇到这个问题..

 ***请让我知道我在哪里失踪：

代码：

```
 public class CategoryActivity extends ListActivity {
    // Connection detector
    ConnectionDetector cd;      
    // Alert dialog manager
    AlertDialogManager alert = new AlertDialogManager();        
    // Progress Dialog
    private ProgressDialog pDialog;
    // Creating JSON Parser object
    JSONParser jsonParser = new JSONParser();
    ArrayList<HashMap<String, String>> albumsList;
    // albums JSONArray
    JSONArray albums = null;
    String imagepath;
    // albums JSON url
    private static final String URL_ALBUMS = "http://XXX.com/albums.php";

    // ALL JSON node names
    static final String TAG_ID = "id";
    static final String TAG_NAME = "name";
    static final String TAG_DESCRIPTION = "description";
    static final String TAG_IMAGEPATH = "imagepath";
    static final String TAG_SONGS_COUNT = "songs_count";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_category);
        cd = new ConnectionDetector(getApplicationContext());
        // Check for internet connection
        if (!cd.isConnectingToInternet()) {
            // Internet Connection is not present
            alert.showAlertDialog(CategoryActivity.this, "Internet Connection Error",
                    "Please connect to working Internet connection", false);
            // stop executing code by return
            return;
        }
        // Hashmap for ListView
        albumsList = new ArrayList<HashMap<String, String>>();
        // Loading Albums JSON in Background Thread
        new LoadCategories().execute();
        // get listview
        ListView lv = getListView();

        /**
         * Listview item click listener
         * TrackListActivity will be lauched by passing album id
         * */
        lv.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> arg0, View view, int arg2,
                    long arg3) {
                // on selecting a single album
                // TrackListActivity will be launched to show tracks inside the album
                Intent i = new Intent(getApplicationContext(), ProductListActivity.class);
                // send album id to tracklist activity to get list of songs under that album
                String album_id = ((TextView) view.findViewById(R.id.album_id)).getText().toString();
                i.putExtra("album_id", album_id);           
                startActivity(i);
            }
        }); 
    }

    /**
     * Background Async Task to Load all Albums by making http request
     * */
    class LoadCategories extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(CategoryActivity.this);
            pDialog.setMessage("Loading Please Wait ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting Albums JSON
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            String json = jsonParser.makeHttpRequest(URL_ALBUMS, "GET",
                    params);
            // Check your log cat for JSON reponse
            Log.d("Albums JSON: ", "> " + json);
            try {               
                albums = new JSONArray(json);
                if (albums != null) {
                    // looping through All albums
                    for (int i = 0; i < albums.length(); i++) {
                        JSONObject c = albums.getJSONObject(i);

                        // Storing each json item values in variable
                        String id = c.getString(TAG_ID);
                        String name = c.getString(TAG_NAME);
                        String description = c.getString(TAG_DESCRIPTION);
                        String imageurl = c.getString(TAG_IMAGEPATH);
                        String songs_count = c.getString(TAG_SONGS_COUNT);
                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();
                        // adding each child node to HashMap key => value
                        map.put(TAG_ID, id);
                        map.put(TAG_NAME, name);
                        map.put(TAG_DESCRIPTION, description);
                        map.put(TAG_IMAGEPATH,imageurl);
                        map.put(TAG_SONGS_COUNT, songs_count);
                        // adding HashList to ArrayList
                        albumsList.add(map);
                    }
                }else{
                    Log.d("Albums: ", "null");
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all albums
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            CategoryActivity.this, albumsList,
                            R.layout.list_item_categories, new String[] 
                                    {
                                    TAG_ID, TAG_NAME, TAG_DESCRIPTION, TAG_IMAGEPATH, TAG_SONGS_COUNT 
                                    }, 
                                    new int[] 
                                    {
                                    R.id.album_id, R.id.album_name, R.id.album_description, R.id.list_image, R.id.songs_count 
                                    }
                            );
                    // updating listview
                    setListAdapter(adapter);
                }
            });         
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:58:39.053

不用担心

我想你必须使用下面的代码，它对你很有用，*几天前我*在我的应用程序中使用了它：

首先**将 onPostExecute 替换**为：

```
 protected void onPostExecute(String file_url) {

            /**
             * Updating parsed JSON data into ListView
             * */
            adapter = new LazyAdapter(
                    CategoryActivity.this, albumsList);
            // updating listview
            setListAdapter(adapter);
            // updating UI from Background Thread
            pDialog.dismiss();

        } 
```

现在创建一个 LazyAdapter 类并放入下面的代码，只需要复制和粘贴我已经以您的方式更改了它：

```
 public class LazyAdapter extends BaseAdapter {

private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.listrow, null);

    TextView title = (TextView)vi.findViewById(R.id.title); 
    TextView description = (TextView)vi.findViewById(R.id.description); 
    TextView cost = (TextView)vi.findViewById(R.id.cost); 
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); 

    HashMap<String, String> item = new HashMap<String, String>();
    item = data.get(position);

    // Setting all values in listview
    title.setText(item.get(Catalogue.KEY_TITLE));
    description.setText(item.get(Catalogue.KEY_DESCRIPTION));
    cost.setText(item.get(Catalogue.KEY_COST));

    imageLoader.DisplayImage(item.get(Catalogue.KEY_THUMB_URL), thumb_image);
    return vi;
}
} 
```

快乐......快乐编码快乐结局***

# javascript - 表单提交时动态更改表单操作

> ID：14642687
> 
> 赞同：0
> 
> 时间：2013-02-01T08:58:33.433
> 
> 标签：javascript, html, forms

```
<form method='GET' name='search' action='index.php'> 
    <input type="hidden" name="searchType" value="all" />
    <input type="checkbox" name="vehicle" value="first"/> 
    <input type="checkbox" name="vehicle" value="second" checked/> 
</form>

<a href="javascript:document.search.submit()"></a> 
```

从上面的表格中，我希望 URL 数据`index.php/searchType=all`在第一个复选框被选中时为，如果第二个复选框被选中，URL 数据为`index.php/`（为空）。我要怎么做？是否可以像上面的示例一样打开或关闭“隐藏”参数？我不希望它是`index.php/searchType=`在选中第二个复选框时，而是要删除整个参数名称。

* * *

这是第二个问题：

我想在表单操作中注入一些参数，我该怎么做？它看起来像这样吗：

```
<a href="javascript:injectParameter();document.search.submit()"></a> 
```

我应该在 injectParameter() 方法中写什么？

对不起，我对 Javascript 和网络很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:02:57.450

一个示例`injectParameter`函数是：

```
function injectParameter() {
   document.search.action = "index.php?newParam1="+newValue+"&newParam2="+newValue2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:54:49.597

我认为，如果您不希望输入字段显示在 URL 中，您可以在发布之前将它们从表单中删除。

未经测试：

```
var objForm = document.search;
if (objForm.vehicle.checked)
    {
    objForm.removeChild(objForm.searchType);
    objForm.submit();
    } 
```

那是你的目标吗？

此外，具有相同名称的多个字段也不能以这种方式工作。

您可能希望像这样使用单选按钮：

```
<input type="radio" name="vehicle" value="all" />
<input type="radio" name="vehicle" value="first"/> 
<input type="radio" name="vehicle" value="second" selected /> 
```

或创建一个字段数组，如下所示：

```
<input type='checkbox' name='vehicle[]' value='first' />
<input type='checkbox' name='vehicle[]' value='second' checked /> 
```

我希望这有帮助...

# php - 从文本行创建多维数组

> ID：14642688
> 
> 赞同：0
> 
> 时间：2013-02-01T08:58:35.473
> 
> 标签：php, arrays, file, text, multidimensional-array

如果您有这样的文本文件：

```
item1
item1 > item3
item1 > item3 > item4
item1 > item5
item1 > item5 > item6 > item7
item2 > item8
item2 > item8 > item9 
```

我想要一个看起来像这样的数组：

```
array(
        [item1]
                array(
                        [item3]
                                array(
                                        [item4]
                                )
                        [item5]
                                array(
                                        [item6]
                                                array(
                                                        [item7]
                                                )
                                )
                )
        [item2]
                array(
                        [item8]
                                array(
                                        [item9]
                                )              
                )
    ) 
```

我应该如何用 PHP 做这个？我不知道从哪里开始。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:21:41.507

这是解决您的问题的一种非常简单的方法。结果并不完全相同（最后一个元素也是一个数组），但我认为这更灵活：

```
$input = array(
  'item1',
  'item1 > item3',
  'item1 > item3 > item4',
  'item1 > item5',
  'item1 > item5 > item6 > item7',
  'item2 > item8',
  'item2 > item8 > item9',
);

$data = array();
foreach ($input as $line) {
  $parent =& $data;  
  foreach (array_map('trim', explode('>', $line)) as $el) {
    if (!isset($parent[$el])) {
      $parent[$el] = array();
    }

    $parent =& $parent[$el];
  }
}

print_r($data);

/*
Array (
  [item1] => Array (
    [item3] => Array (
      [item4] => Array ()
    )
    [item5] => Array (
      [item6] => Array (
        [item7] => Array ()
      )
    )
  )
  [item2] => Array (
    [item8] => Array (
       [item9] => Array ()
    )
  )
)
*/ 
```

演示：[http ://codepad.viper-7.com/IwZFQ3](http://codepad.viper-7.com/IwZFQ3)

# java - 什么是改进并行/分布式编程的好项目

> ID：14642689
> 
> 赞同：2
> 
> 时间：2013-02-01T08:58:37.817
> 
> 标签：java, c++, parallel-processing, distributed, distributed-computing

我是并行/分布式编程个人项目的想法。我熟悉 openMP、Intel Cilk、Java Concurrent 和 MPI，我觉得有必要开始写一些大的东西，但想出了一个有趣的想法。你有什么？

编辑：我正在考虑（但由于害怕被嘲笑而犹豫告诉你）是在 Windows 中为 MPI 实现调试器/api-call 拦截器。我在调试以前的项目时遇到了问题，因为我买不起专用的调试器，这就是这个想法的产生方式。我阅读了很多关于拦截 api 调用以及调试器如何工作的文献，虽然我不能声称对所有涉及的概念有一个牢固的把握，但我有足够的能力来确定可能出现的一些问题，所以我想问你们的是下列的：

*   是可行的吗？我不确定一个资源有限的人是否有可能制作出比玩具更多的东西。我的背景：我是一名计算机科学专业的学生，​​具有 Java（在学校获得）、C++ 和 python（或多或少是自我思考）的经验。我最近接触了并行和分布式计算，我很喜欢它，所以我设法学到了很多。我对操作系统如何工作的知识相当薄弱（主要担心我开发这个项目的能力）

*   是否可行。最好的开始方式是什么？我阅读了很多解释调试技术的文章和论文，但考虑到 MPI 调试器应该在多个进程上工作，可能在多台计算机上工作，并且每个进程都有单独的输出，我仍然不确定什么是最好的方法。他们。到目前为止，我的想法似乎很愚蠢。

*   学习如何去做。到目前为止，我在决定什么是好建议和什么是坏/过时的建议时遇到了问题，所以如果你们知道任何好的文档/资源来开始这样的事情，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:05:25.433

你可以看看实现一个`Distributed Key Value`商店。这个来自伯克利分布式计算课程的[项目页面可以帮助您入门。](http://www-inst.eecs.berkeley.edu/~cs162/sp13/phase4.html)它将涵盖以下概念

*   群体沟通与决策
*   负载均衡
*   容错
*   分布式哈希

您将对开发分布式算法/应用程序中的问题有第一手的感觉，下次您将阅读一些论文/算法时，这将有助于欣赏其中的微小细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:02:23.010

为什么不尝试演员模型？

这是 C++ 中的一个实现： [http ://www.theron-library.com/](http://www.theron-library.com/)

# node.js - app.locals 和 res.locals 生命周期

> ID：14642692
> 
> 赞同：25
> 
> 时间：2013-02-01T08:58:44.400
> 
> 标签：node.js, express

我真的很困惑`app.locals`，`res.locals`因为我不知道我应该什么时候使用它们以及如何使用它们？实际上我想知道`app.locals`生命`res.locals`周期。

例如，我应该在哪里保存我的用户（经过身份验证的用户）详细信息（用户名、角色等）？在`app.locals`或`res.locals`？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-02-01T20:42:36.703

你可以认为`app.locals`是全球性的。您可能想要存储的一些示例`app.locals`：URL 帮助程序、应用程序级常量。您应该在此处放置您希望在每个视图中都可以访问的任何内容。

`res.locals`仅存储特定响应（响应特定请求）的数据。例如，GET /something 将创建一个新的 res.locals，它会通过所有响应 '/something.' 的中间件传递。这里的适当信息是您问题中经过身份验证的用户详细信息。

生命周期看起来像这样，您的职责**是大胆的**（其他一切都由 express 为您完成）：

1.  **应用程序已创建 (var app = express();)**
2.  app.locals 已创建
3.  请求到达
4.  res.locals 是为该请求创建的
5.  **您将内容添加到 res.locals 中，例如用户角色 (res.locals.role = 'admin';)**
6.  **您对请求作出响应 (res.render('some/view');)**
7.  该请求的 res.locals 被垃圾收集，消失了
8.  只要应用存在，app.locals 就会继续存在

# excel - 创建一个接收变量的过程，然后将另一个返回到 Excel VBA 中的调用过程

> ID：14642693
> 
> 赞同：0
> 
> 时间：2013-02-01T08:58:51.227
> 
> 标签：excel, vba, procedure, output-parameter

我想创建允许我将变量传递给过程的功能，让它基于该变量打开一个文件，然后将文件路径返回到调用过程。我有打开文件等的代码，但是由于程序中有多个地方可以调用它，我不希望它在那里，而只是将文件路径返回到一个变量中（然后可以使用它从打开的文件中加载字段）。

加载我正在使用的文件的代码如下，我将如何将其转换为程序来执行我需要的操作？：

```
 'Open the file
        NameOfFile = ActiveWorkbook.Worksheets("Parameters").Cells(8, 2).Value
        PathToFile = Left$(NameOfFile, InStrRev(NameOfFile, "\") - 1)
        FileNameNoPath = Mid$(NameOfFile, InStrRev(NameOfFile, "\") + 1)
        NameOfFile = FileNameNoPath
        CompleteFilePath = PathToFile & "\" & NameOfFile

        On Error Resume Next
        Set File1 = Workbooks(NameOfFile)

        If Err.Number <> 0 Then
        'Open the workbook
          Err.Clear
          Set File1 = Workbooks.Open(CompleteFilePath, UpdateLinks:=False)
          CloseIt = True
        End If

        'Check and make sure workbook was opened
        If Err.Number = 1004 Then
            MsgBox "File is missing, please check your path!" _
            & vbNewLine & NameOfFile
            Exit Sub
        End If
        On Error GoTo 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:04:45.593

你的意思是这样吗？

```
Option Explicit

Dim FilePath As String

Sub Sample()
    Dim FileToOpen As String

    FileToOpen = "C:\Temp\Sample.xlsx"

    OpenFile FileToOpen

    Debug.Print FilePath
End Sub

Sub OpenFile(strFile As String)
    FilePath = Left$(strFile, InStrRev(strFile, "\") - 1)

    '
    '~~> Rest of the code
    '
End Sub 
```

# django - django 历史对象值

> ID：14642698
> 
> 赞同：2
> 
> 时间：2013-02-01T08:59:26.233
> 
> 标签：django

我知道那里有回归，我知道 django 中有 fullhistory 分支。但我非常想坚持 django 对象的原始历史。我只需要确保我还保存 OLD 和 NEW 值。

默认情况下，django 只保存发生的事情（例如更新），但不存储值。任何人都可以向我指出一些东西（片段或应用程序），它略微增强了 django 的默认历史记录，并且还存储了编辑属性的值，而不仅仅是它被编辑的事实。

现在我的历史说

> 9-01-2012 12:55:02 更改：时间

我想让它说

> 9-01-2012 12:55:02 更改：时间从 6 点到 8 点

**更新：** ==> 对于任何对我的解决方案感兴趣的人（基于下面的答案）..

1.  将 HistoryModel(object) 类添加到我的 models.py

    ```
     class HistoryModel(object):
             changed_fields = {} 
    ```

2.  继承于我的任何模型

3.  添加了一个 pre_save 接收器来保存旧值：

    ```
     @receiver(pre_save, sender=Customer) 
        def save_old_values(sender,**kwargs):
            #dont delete using in eval
            db_obj = sender.objects.get(pk=kwargs['instance'].pk)
            for field in kwargs['instance']._meta.fields:
                if not eval("db_obj." + str(field.get_attname_column()[0])) == eval("kwargs['instance']." +  str(field.get_attname_column()[0])):
                         kwargs['instance'].changed_fields[field.get_attname_column()[0]] = "from "+str(eval("db_obj." + str(field.get_attname_column()[0]))) + " to " + str(eval("kwargs['instance']." +  str(field.get_attname_column()[0]))) 
    ```

4.  覆盖我的管理员中的 log_change 方法并收集 object.changed_fields 字典并将其存储为消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:07:01.910

它不是“默认 django”。您正在使用贡献的 django 应用程序（[管理员](https://github.com/django/django/blob/master/django/contrib/admin)），因此它与任何其他应用程序（即 django-reversion）一样，并且在某种程度上，它不支持您想到的开箱即用的功能。

幸运的是，django 管理员是相当可配置的。您可以尝试[覆盖类的`log_change`](https://github.com/django/django/blob/master/django/contrib/admin/options.py#L530)方法，并通过检测哪些字段已更改（通过将表单值与数据库值进行比较）来`ModelAdmin`使更详细。`change_message`大概您希望在项目中的所有应用程序中都使用此功能，因此可以编写一个 mixin 来支持此功能，或者分叉整个管理员并对功能进行硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-31T11:44:35.887

要扩展有关更改的信息，仅覆盖`ModelAdmin.construct_change_message`方法就足够了。无需在模型上添加属性（例如 changed_fields），因为您可以从表单和表单集的初始数据构建日志消息。

这是一个记录每个更改字段的先前值的版本：

```
def construct_change_message(self, request, form, formsets):
    change_message = []
    if form.changed_data:
        msg_list = u''
        for field in form.changed_data:
            if form.initial[field] is not None and hasattr(form.fields[field], 'queryset'):
                old_value = form.fields[field].queryset.get(id=form.initial[field]).__unicode__()
            else:
                old_value = form.initial[field]
            msg_list = _("{0}field '{1}' from \"{2}\", ").format(msg_list, field, old_value)
        change_message.append(capfirst(_(u'changed {0}.').format(msg_list[:-2])))

    if formsets:
        for formset in formsets:
            for added_object in formset.new_objects:
                change_message.append(_('Added %(name)s "%(object)s".')
                                      % {'name': force_unicode(added_object._meta.verbose_name),
                                         'object': force_unicode(added_object)})
            for changed_object, changed_fields in formset.changed_objects :
                for form in formset.initial_forms:
                    if form.instance != changed_object:
                        continue
                    msg_list = u''
                    for field in changed_fields:
                        if form.initial[field] is not None and hasattr(form.fields[field], 'queryset'):
                            old_value = form.fields[field].queryset.get(id=form.initial[field]).__unicode__()
                        else:
                            old_value = form.initial[field]
                        msg_list = _("{0}field '{1}' from \"{2}\", ").format(msg_list, field, old_value)
                    change_message.append(_('Changed %(list)s for %(name)s "%(object)s".')
                                          % {'list': msg_list[:-2],
                                             'name': force_unicode(changed_object._meta.verbose_name),
                                             'object': force_unicode(changed_object)})
            for deleted_object in formset.deleted_objects:
                change_message.append(_('Deleted %(name)s "%(object)s".')
                                      % {'name': force_unicode(deleted_object._meta.verbose_name),
                                         'object': force_unicode(deleted_object)})
    change_message = ' '.join(change_message)
    return change_message or _('No fields changed.') 
```

# javascript - 图像 id 的变量

> ID：14642705
> 
> 赞同：0
> 
> 时间：2013-02-01T08:59:51.370
> 
> 标签：javascript, random, image, identifier

我有这些：

```
<th  scope="col"> 
        <img style="height:200px" id="img1"  src=""></div>
    </th>

   <th scope="col">
         <img id="img2" src=""></div>
  </th>

   <th scope="col">
        <img id="img3" src=""></div>
    </th> 
```

我想用以下代码在每个中加载一张随机图片：

```
var images = ['"image1.jpg"', '"image2.jpg"', '"image3.jpg"', '"image4.jpg"', 'image5.jpg'];
var longitut = images.length;

for(i=0;i<3;i++){

    // Random Image 
    var num = Math.floor(Math.random()*longitut) ;
    var foto=images[num]; 
    var current='"img'+i+'"';
    alert(foto);

    var objecte =document.getElementById(current);

    objecte.src=foto; 
```

问题是 img src 不起作用，我无法发现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:04:41.650

您没有选择任何元素。

改变：

```
var current = '"img' + i + '"';  // If i is 5 it produces '"img5"' 
```

至：

```
var current = 'img' + i;  // ==> 'img5' 
```

此外，删除图像数组中的引号：

```
'"image1.jpg"' -> 'image1.jpg' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:04:12.757

```
you have to make this changes
<th  scope="col"> 
        <img style="height:200px" id="img1"  src=""></div>
    </th>

   <th scope="col">
         <img id="img2" src=""></div>
  </th>

   <th scope="col">
        <img id="img3" src=""></div>
    </th>

And I wanna load one random pic in each with the following code :

var images = ['"image1.jpg"', '"image2.jpg"', '"image3.jpg"', '"image4.jpg"', 'image5.jpg'];
var longitut = images.length;

for(i=0;i<3;i++){

    // Random Image 
    var num = Math.floor(Math.random()*longitut) ;
    var foto=images[num]; 
    **var current="image"+i+".jpg";**
    alert(foto);

    var objecte =document.getElementById(current);

    objecte.src=foto; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:04:27.000

你犯的一个错误是你有额外的报价

应该是这样的：

```
var images = ['image1.jpg', 'image2.jpg', 'image3.jpg', 'image4.jpg', 'image5.jpg']; 
```

和

```
var current='img'+i; 
```

我们图像的 id 是`img1`,`img2`和`img3`. html 代码中的双引号是语法的一部分，而不是 ID。

但是在您的代码中，您将双引号添加到您尝试搜索的 id 中：

```
var current='"img'+i+'"'; 
```

所以你没有找到任何元素。如果你解决了这个问题，你的图像仍然会有问题。这与您使用 ID 的原因相同。（您尝试使用 src 加载图像，`"image1.jpg"`但您想加载`image1.jpg`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:19:34.513

请尝试以下 html 和 javascript：

```
<th  scope="col"> 
<img id="img1" style="height:200px" src="" />
</th>
<th scope="col">
<img id="img2" src="" />
</th>
<th scope="col">
<img id="img3" src="" />
 </th> 
```

Javascript：

```
var images = ['image1.jpg', 'image2.jpg', 'image3.jpg', 'image4.jpg', 'image5.jpg'];
var longitut = images.length;
for(i=1;i<=3;i++){
// Random Image 
var num = Math.floor(Math.random()*longitut) ;
var foto=images[num]; 
var current='#img'+i;
$(current).attr("src",foto);
} 
```

# delphi - 动态记录访问

> ID：14642706
> 
> 赞同：0
> 
> 时间：2013-02-01T08:59:56.207
> 
> 标签：delphi, css-selectors, field, records

我是 delphi 的新手，并试图为我的 a2 计算课程编写一个复杂的搜索算法。我需要从字符串变量访问我的记录字段。例如

```
 getfield(record,'name'); 
```

我找到了一篇可以解决我的问题的文章，但我无法理解它。请有人可以将其缩短为我需要的。谢谢。

[http://theroadtodelphi.wordpress.com/2010/10/10/fun-with-delphi-rtti-dump-a-trttitype-definition/](http://theroadtodelphi.wordpress.com/2010/10/10/fun-with-delphi-rtti-dump-a-trttitype-definition/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T10:06:44.280

[从他们的评论中对](https://stackoverflow.com/a/11514088/576719)[LU RD](https://stackoverflow.com/users/576719/lu-rd)的代码进行了简单的改编。这在 Delphi XE2 下编译和工作，但早期版本也应该没问题。

```
program Project4;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils, RTTI, TypInfo;

type
  TSampleRecord = record
    SomeInt: Integer;
    SomeStr: String;
    SomeFloat: Single;
  end;

function GetField(Rec: TValue; const FieldName: String): String;
var
  Context: TRTTIContext;
  RTTIRecord: TRTTIRecordType;
  RecField: TRTTIField;
  RecValue: TValue;
begin
  if (Rec.Kind = tkRecord) then
  begin
    RTTIRecord := Context.GetType(Rec.TypeInfo).AsRecord;
    RecField := RTTIRecord.GetField(FieldName);

    RecValue := RecField.GetValue(Rec.GetReferenceToRawData);
    Result := RecValue.ToString();

    if (RecValue.Kind = tkFloat) then
      Result := Format('%.4f', [RecValue.AsExtended]);
  end;
end;

var
  SR: TSampleRecord;
begin
  SR.SomeInt := 1992;
  SR.SomeStr := 'Lorem ipsum dolor sit amet';
  SR.SomeFloat := 3.1415;

  Writeln(GetField(TValue.From(SR), 'SomeInt'));
  Writeln(GetField(TValue.From(SR), 'SomeStr'));
  Writeln(GetField(TValue.From(SR), 'SomeFloat'));

  Readln;
end. 
```

# php - 服务器和 MySql 负载问题

> ID：14642708
> 
> 赞同：5
> 
> 时间：2013-02-01T09:00:03.537
> 
> 标签：php, mysql, server-load

我正在使用从网站获取 100 个项目并将其插入数据库的代码，如果项目存在，它会更新该记录。它每分钟作为一个 cron 作业运行。它运行多达 50000 种产品。

脚本运行良好，产品导入成功。现在的问题是服务器和 MySql 负载。我的服务器支持人员说它占用了将近 50% 的资源，他们需要禁用该脚本。

我尝试谷歌检查解决方案，发现加载文件比 mysql_query 插入和更新更好。因此，我计划将所有查询写入服务器上的 txt 文件中，并在完成后使用加载文件将其导入 db。

这是一个好方法吗？或者它也承担相同的服务器负载？在继续之前，我想知道专家的决定。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:46:05.873

了解场景中的所有变量会很有帮助。显然，您不想透露有关您的设置的任何敏感信息，但是如果不了解您的情况的更多参数，则很难给出适当的答案。每当出现 MySQL 性能问题时，您都必须评估您所做的一切，而不仅仅是您编写的每分钟在 cron 上运行的脚本（乍一看，这本身似乎可以优化或重构为以不同的方式运行）。一些很高兴知道的事情是： - 您在哪种类型的托管环境中，即共享、云等...？- 您的网站每天、每小时、每分钟等获得什么样的流量... ? - 您正在运行多少台 Web 服务器？- 您运行了多少个数据库服务器？有多少主人和奴隶？- 你有负载平衡吗？- 您是否使用任何类型的缓存，例如 Memcache？

了解您为什么每分钟进行如此多的更新也会有所帮助？如果您别无选择，那么您可能需要考虑将资源专用于该过程，并在半夜每天运行一次 cron 以同步您的数据库。

这一切都可能是多余的，如果您的数据库表正确规范化并且您的索引设置正确，您将能够获得很多性能。一个非常普遍的经验法则是确保在“WHERE”子句中查询的数据库中的列上有索引。

希望这会有所帮助。

# asp.net-mvc-4 - 剃刀视图中的 ASP.NET MVC 4 命名空间问题

> ID：14642709
> 
> 赞同：9
> 
> 时间：2013-02-01T09:00:07.823
> 
> 标签：asp.net-mvc-4, namespaces

我已将以下命名空间添加到我的 Views web.config 文件中：

```
<add namespace="System.Web.Mvc.Html5" /> 
```

现在的问题是，在视图中，我只能使用使用全名的类型：

```
@System.Web.Mvc.Html5.InputTypes.Html5TextBox() 
```

我希望能够做到：

```
@InputTypes.Html5TextBox() 
```

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-01T09:01:45.503

确保您已将此命名空间添加到`~/Views/web.config`文件而不是标准`~/web.config`文件中：

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />

        <add namespace="System.Web.Mvc.Html5" />
      </namespaces>
    </pages>
</system.web.webPages.razor> 
```

还要确保在添加此命名空间后，您已在 Visual Studio 中关闭并重新打开 Razor 视图，以使更改生效。

# c# - IIS 7.5 下 XmlTextWriter 性能缓慢

> ID：14642713
> 
> 赞同：0
> 
> 时间：2013-02-01T09:00:22.193
> 
> 标签：c#

我们需要构建一个包含 Google 提要的大型**XML文件。**如果我们在控制台应用程序中执行代码，或者在本地机器上运行在 IIS Express 下的 ASP.NET 站点中，它会运行得非常快。

如果我们在 IIS 7.5 下的 ASP.net 环境中执行它（作为 webforms 或 MVC 站点），它的执行速度会大大降低。

我们使用一个`xmltextwriter`对象并通过 读取数据`SqlDataReader`，每次读取一行时，我们创建不同的节点并将它们写入磁盘。

```
xmlFeedWriterToFile = new XmlTextWriter(tempXmlfileName, Encoding.UTF8);
while (feedReader.Read())
{
    xmlFeedWriterToFile.WriteStartElement("item");
    // ID
    xmlFeedWriterToFile.WriteStartElement("id", "http://base.google.com/ns/1.0");
    if (this.ReturnSKULevelResults)
        // SKU-specific ID
        xmlFeedWriterToFile.WriteString(string.Format("{0}", feedReader.GetString(4)));
    else
    {
        xmlFeedWriterToFile.WriteString(string.Format("{0}_{1}", feedReader.GetString(1), feedReader.GetString(2)));
        xmlFeedWriterToFile.WriteEndElement();
    }
    // other code that writes XML nodes in the XmlTextWriter object 
```

似乎 ASP.Net 应用程序池会减慢速度，因为在控制台应用程序中执行相同的例程非常快。

我们还尝试将 Web 应用程序部署在不同的 WebServer 上，但结果是相同的：

任何解决该问题的想法将不胜感激。问候

# c++ - 无法在我的 C++ 代码中调用 gnome-terminal 命令

> ID：14642720
> 
> 赞同：0
> 
> 时间：2013-02-01T09:00:59.557
> 
> 标签：c++, linux, gnome-terminal

```
char *mycmd = "gnome-terminal --profile 'me' -e '/usr/bin/programA --file/usr/bin/config/myconfig.ini --name="programA" --loggingLevel=1'";
popen(mycmd, "r"); 
```

第一行错误：错误：`expected ';' before 'Node'`

我知道这是因为“”`--name`

反正有没有让这个命令工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:05:18.467

转义双引号：

```
char *mycmd = "gnome-terminal --profile 'me' -e '/usr/bin/programA --file/usr/bin/config/myconfig.ini --name=\"programA\" --loggingLevel=1'"; 
```

# c++ - WindowProc 中的异常

> ID：14642722
> 
> 赞同：5
> 
> 时间：2013-02-01T09:01:09.307
> 
> 标签：c++, winapi, exception-handling, seh

是否可以在`WindowProc`回调中捕获错误？`try`/`catch`不起作用。看起来`__try` `__except`和硬件异常（`AV`例如）也不起作用。

* * *

**更新：**

我发现确实可以在`WindowProc`回调中抛出异常并用`catch`block outside捕获它`WindowProc`。经过测试并适用于`Windows XP x86`. 我[在 WndProc 中发现了相关的问题 64bit exceptions silently fail](https://stackoverflow.com/questions/2631452/64bit-exceptions-in-wndproc-silently-fail)这个问题似乎只存在于`Windows 7 x64`（并且根据该问题也存在于其他 x64 Windows 版本上）。

所以问题是有可能以某种方式抛出异常并用块外`WindowProc`捕获它吗？我安装了 microsoft hotfix，在注册表中设置为 1，我得到的最好的是，不是我的例外。`catch``WindowProc``DisableUserModeCallbackFilter``FATAL_USER_CALLBACK_EXCEPTION`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T11:33:26.863

WindowProc的[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633573%28v=vs.85%29.aspx)包含有关从 WindowProc 引发/传播的异常的详细信息。似乎异常仅在 32 位版本的 Windows 中传播。

但是，您的原始问题与更新中的问题不同。第一个是关于在 WindowProc 中**捕获**异常，这将始终正常工作。第二个是关于从 WindowProc**抛出**异常。

我不确定第二个的有用性/必要性。窗口过程通常由于以下原因而被调用：

1.  在消息循环中调用 DispatchMessage。在这种情况下不需要抛出异常，因为这样做只会导致应用程序退出。如果您遇到应该导致应用程序退出的错误，只需调用 PostQuitMessage(0)
2.  调用发送消息。在这种情况下，您并不想抛出异常，因为窗口过程将在 UI 线程中执行，并且如果调用线程与 UI 线程不同，则调用线程无论如何都不会得到异常
3.  直接调用窗口过程。在这种情况下，异常将正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-22T02:34:03.050

使用 C++11，您可以通过手动转发任何异常来处理您的情况，如下所示：

```
#include <exception>
std::exception_ptr windowProcException = nullptr;

LRESULT windowProc(){
  try {
    yourcode();
  catch(...){
    windowProcException = std::current_exception();
  }   
} 
```

然后，您可以像这样在主循环中重新抛出异常：

```
windowProcException = nullptr;
DispatchMessage();
if (windowProcException)
  std::rethrow_exception(windowProcException); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-19T05:25:12.213

Chronial给出了最好的答案。我会给出我认为有用的改进。

Chronial 的概念是允许在你的窗口过程中使用 cpp throw 机制，但不要让它在窗口过程之外传播；它在 C 库中调用并导致 64 位 Windows 上的未定义行为，即 64 位 win 7 或 Windows 8。而是在窗口过程中捕获异常，并将其保存在全局变量中，然后在 cpp main 中重新抛出功能和利用。有关代码示例，请参阅 Chronial 的答案。

这个概念很简单，但需要一些细节才能 100% 正确。

*   要避免的一个陷阱是不要破坏你扔掉的窗户。您的代码将清除在 try 块中声明的所有对象，但您创建的窗口对象仍将处于活动状态并处理消息。即使您不再发送消息。如果您在窗口过程中使用指针，当您的代码在您的 catch 块中时，这些指针可能无效，而 Windows 仍在向您的窗口发送未销毁的消息。

*   每个窗口过程都需要有这种try catch，保存异常技术。如果只准备您的顶级窗口，它将不起作用，但在其子窗口的过程中会引发异常。

*   如果前两个非常明显，那么这个就有点不明显了。对于您的顶级窗口的过程；除了尝试捕获整个 switch 语句之外，您还应该尝试捕获 WM_CREATE 消息，如果捕获到异常则返回 -1。这将阻止创建窗口及其子项；并且一旦您重新抛出异常，您就不必破坏窗口。

*   最后再次在顶级窗口的 WM_CREATE 消息中，运行创建子窗口的代码后，检查这些子窗口是否设置了全局 windowProcException 变量。子窗口的创建将运行它们自己的 windowProcedure，并且在这些窗口过程中捕获的异常不会自动传播到您的顶级窗口的过程。如果子窗口过程发生异常，从顶层窗口返回 -1 将取消所有窗口的创建。除非，您认为特定的子窗口不是超级重要。

    无效 createChildWindows();

    windowProcedure(hwnd,msg,wparam,lparam) { try { try { if(msg == WM_CREATE) { createChildWindows(); 返回 windowProcException ？-1：0；} } catch(...) { windowProcException = std::current_exception(); 返回-1；}

    ```
     return DefWindowProc(hwnd,msg,wparam,lparam);
     }
     catch(...)
     {
      windowProcException = std::current_exception();
      //MingGw won't complain if you don't return a value;
      //MSVC might
      //As far as I am concerned, we are throwing, 
      //so any value returned is undefined
      //We must however be careful with WM_CREATE as that return code
      //dictates whether or not window creation continues
     } 
    ```

    }

# sharepoint - 是否可以访问 v4.master 文件的代码？

> ID：14642727
> 
> 赞同：0
> 
> 时间：2013-02-01T09:01:18.220
> 
> 标签：sharepoint, sharepoint-2010

我在 v4.master 中有一些用户定义的控件。

现在，根据某些逻辑，其中一些控件应该是可见的。

情况：

我在 v4.master 页面上添加了用于登录和注销的链接按钮。现在，任何时候都应该只看到一个，无论是登录还是注销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:14:01.680

如果您的条件与权限有关 - 请查看[SPSecurityTrimmed](http://codename-srini.blogspot.ru/2009/04/spsecuritytrimmedcontrol-and.html) 如果是其他逻辑，您可以尝试类似`this.Page.FindControl("ControlID2").FindControl("controlID2").Visible = false;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T07:23:38.950

最好只创建一个用户控件，并在您背后的代码中检查当前用户是否已登录 - 您呈现注销链接，否则登录。

检查此链接以了解如何执行[此](http://rburgundy.wordpress.com/2010/03/19/sharepoint-2010-user-login-check/)操作。

安德鲁

# sharepoint - 如何在 SharePoint 托管应用程序中发送电子邮件？

> ID：14642733
> 
> 赞同：3
> 
> 时间：2013-02-01T09:01:42.260
> 
> 标签：sharepoint, client-side, sharepoint-2013

我正在开发 SharePoint 托管应用程序，并尝试使用客户端代码发送电子邮件。我是否必须使用工作流或事件接收器来执行此操作？似乎找不到任何关于此的信息。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T06:22:56.293

您可以将 Visual Studio 中的工作流添加到您的项目中。将电子邮件从工具箱拖放到您的工作流程中，设置参数，您的工作流程现在已配置为发送电子邮件。

从客户端，您需要包含`sp.workflowservices.js`. 然后您需要做的就是检索工作流实例并启动它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-18T20:31:35.317

您可以使用这样的函数从 SharePoint 托管的应用程序中使用 JavaScript 发送电子邮件。

```
function sendEmail(from, to, body, subject) {
    var appweburl = decodeURIComponent(getQueryStringParameter('SPAppWebUrl'));
    var urlTemplate = appweburl + "/_api/SP.Utilities.Utility.SendEmail";
    $.ajax({
        contentType: 'application/json',
        url: urlTemplate,
        type: "POST",
        data: JSON.stringify({
            'properties': {
                '__metadata': { 'type': 'SP.Utilities.EmailProperties' },
                'From': from,
                'To': { 'results': [to] },
                //'CC': { 'results': [cc]}, //Maybe you want to include a CC address?
                'Body': body,
                'Subject': subject
            }
        }
      ),
        headers: {
            "Accept": "application/json;odata=verbose",
            "content-type": "application/json;odata=verbose",
            "X-RequestDigest": $("#__REQUESTDIGEST").val()
        },
        success: function (data) {
           alert("An email was sent.");
        },
        error: function (args) {
           alert("We had a problem and an email was not sent.");
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T23:49:07.367

您将无法在客户端发送实际的电子邮件，但您可以形成电子邮件并将其发送到将发送电子邮件的 ASP.Net 页面。

有关示例，请参阅[如何从 JavaScript 发送电子邮件。](https://stackoverflow.com/questions/7381150/send-email-with-javascript)

# php - 为什么 CListView dataProvider 无法管理从 Sphinx 接收到的数据？

> ID：14642735
> 
> 赞同：2
> 
> 时间：2013-02-01T09:01:48.110
> 
> 标签：php, yii, sphinx, dataprovider

我`Sphinx`用来生成需要的列表`ID`。在这个列表中，`ID`我`filters`使用该`Sphinx`语言应用，然后使用`Search`Model 方法创建并返回一个新的 CActiveDataProvider；

[图像示例](http://content.screencast.com/users/flaviuspogacian/folders/Jing/media/7c4273a9-a784-4376-b206-5b9f5c9343ee/2013-02-07_1241.png)

```
$dataProvider = new CActiveDataProvider('model', array(
                    'criteria' => $criteria,
                    'pagination' => array(
                        'pageSize' => $this->pageSize,
                        'currentPage' => $this->cp_page - 1,
                    ),
                )); 
```

在视图中，现在，我有：

```
<div class="search_result searchconright">
         <?php

                 $custom_pager_left = '
                <div class="pagetxt">

                <ul class="searchPager">
                    <li><span>View</span></li>
                    <li class="page"><a href="" class="page_search_limit">All</a></li>
                    <li class="page"><a href="" class="page_search_limit page_search_limit_active">3</a></li>
                    <li class="page"><a href="" class="page_search_limit page_search_limit_active">5</a></li>
                    <li class="page"><a href="" class="page_search_limit page_search_limit_active">24</a></li>
                    <li class="page"><a href="" class="page_search_limit">48</a></li>
                </ul>

                </div>
            ';

        $this->widget('zii.widgets.CListView', array(
            'ajaxUrl' => Yii::app()->createAbsoluteUrl('/employer/search'),
            'id'=>'listViewSearch',
            'dataProvider' => $model->search(),
            'template' => "{summary}\n{sorter}\n{items}\n<div style='float:left;width=700px;'>$custom_pager_left<div class='pagetxt'>{pager}</div></div>",
            'itemView' => '_index_post',
            'enablePagination' => true,
            'pager' => array(
                'cssFile' => Yii::app()->baseUrl . '/css/clistview.css',
                'header' => false,
                'firstPageLabel' => 'First',
                'prevPageLabel' => 'Previous',
                'nextPageLabel' => 'Next',
                'lastPageLabel' => 'Last',
            ),
            'summaryText' => '',
            'sortableAttributes' => array(
            ),
        ));
        ?>
    </div> 
```

但这无法正常工作，因为如果我单击下一步，并且列表结束，不知何故，ajax 代码不会重新初始化正在发送的 url，它会继续与旧 url 连接，直到 url 变得如此之大以至于应用程序崩溃。

CListView 不应该验证接收到的数据是否存在吗？Sphinx 可以提供一个注册 ID，该 ID 不再存在或处于非活动状态；

发生了什么事，我该如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:43:09.610

我发现了一些与`ajaxUrl`属性和分页有关的论坛主题。看起来 ajaxUrl 被分页忽略了。奇怪，也许这就是问题所在。

这是这个主题：[http ://www.yiiframework.com/forum/index.php/topic/21886-problem-with-clistview-and-ajaxurl-property/](http://www.yiiframework.com/forum/index.php/topic/21886-problem-with-clistview-and-ajaxurl-property/)

请注意，最后发布的路由是在 dataprovider 而不是 listview 上设置的。内部列表视图或网格视图应将 ajaxUrl 传递给 dataprovider。

以下是如何手动设置分页路由： [http ://www.yiiframework.com/doc/api/1.1/CPagination#route-detail](http://www.yiiframework.com/doc/api/1.1/CPagination#route-detail)

```
$dataprovider->pagination->route = 'site/index'; 
```

如果使用了一些参数，还可以手动设置分页参数（包括 $_GET 附带的参数）： [http ://www.yiiframework.com/doc/api/1.1/CPagination#params-detail](http://www.yiiframework.com/doc/api/1.1/CPagination#params-detail)

```
$dataprovider->pagination->params = array('search' => 'Search string'); 
```

我也不确定`$custom_pager_left`应该如何设置链接hrefs？

# ruby - 如何在 Sinatra 中隐藏 url 的参数

> ID：14642738
> 
> 赞同：0
> 
> 时间：2013-02-01T09:01:58.260
> 
> 标签：ruby, url, sinatra

我有一个 Sinatra 网络应用程序。

像这样的网址：

> [http://test.com:9393/signup](http://test.com:9393/signup)？用户名=&email=liubei@test.com&nickname=&gender=&birthday=&password=123456&password_confirmation=123456

[如何删除url中的参数。使浏览器中的url为： http](http://test.com:9393/signup) ://test.com:9393/signup

也可以获得参数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T09:05:10.087

你不能只是*隐藏*它们。

您在这里需要的是使用`POST`请求而不是使用请求`GET`。 `GET`请求总是在查询字符串中发送它们的参数。

# iphone - EGOTableViewPullRefresh 与 GMGridView 集成时不刷新并显示向上箭头

> ID：14642739
> 
> 赞同：0
> 
> 时间：2013-02-01T09:01:58.573
> 
> 标签：iphone, ios, ios6, uiscrollview

我需要在[https://github.com/gmoledina/GMGridView](https://github.com/gmoledina/GMGridView) GMGridView 中添加拉动刷新效果！所以我只是在我的视图控制器中将 GMGridView 与 EGOTableViewPullRefresh 集成，但事实证明没有新鲜效果，并且当我拉出 refreshHeaderView 时不显示向上箭头。以下是我的 viewController 中的一些代码片段：

```
- (void)loadView
{
    [super loadView];

    self.view.backgroundColor = [UIColor whiteColor];
    NSInteger spacing = INTERFACE_IS_PHONE ? 5 : 15;

    GMGridView *gmGridView = [[GMGridView alloc] initWithFrame:self.view.bounds];
    gmGridView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    gmGridView.backgroundColor = [UIColor clearColor];
    [self.view addSubview:gmGridView];
    _gmGridView = gmGridView;

    _gmGridView.style = GMGridViewStyleSwap;
    _gmGridView.itemSpacing = spacing;
    _gmGridView.minEdgeInsets = UIEdgeInsetsMake(spacing, spacing, spacing, spacing);
    _gmGridView.centerGrid = YES;
    _gmGridView.actionDelegate = self;
    _gmGridView.sortingDelegate = self;
    _gmGridView.transformDelegate = self;
    _gmGridView.dataSource = self;

}

- (void)viewDidLoad
{
    [super viewDidLoad];

    if (_refreshHeaderView == nil) {

        EGORefreshTableHeaderView *view = [[EGORefreshTableHeaderView alloc] initWithFrame:CGRectMake(0.0f, 0.0f - self.gmGridView.bounds.size.height, self.view.frame.size.width, self.gmGridView.bounds.size.height)];
        view.delegate = self;
        [self.gmGridView addSubview:view];
        _refreshHeaderView = view;
        [view release];

    }
    [_refreshHeaderView refreshLastUpdatedDate];
}

- (void)scrollViewDidScroll:(UIScrollView *)scrollView{

    [_refreshHeaderView egoRefreshScrollViewDidScroll:scrollView];

}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate{

    [_refreshHeaderView egoRefreshScrollViewDidEndDragging:scrollView];

}

- (void)reloadTableViewDataSource{

    //  should be calling your tableviews data source model to reload
    //  put here just for demo
    _reloading = YES;

}

- (void)doneLoadingTableViewData{
    _reloading = NO;
    [_refreshHeaderView egoRefreshScrollViewDataSourceDidFinishedLoading:self.gmGridView];

}

- (void)egoRefreshTableHeaderDidTriggerRefresh:(EGORefreshTableHeaderView*)view{

    NSLog(@"egoRefreshTableHeaderDidTriggerRefresh");
    [self reloadTableViewDataSource];
    [self performSelector:@selector(doneLoadingTableViewData) withObject:nil afterDelay:3.0];

}

- (BOOL)egoRefreshTableHeaderDataSourceIsLoading:(EGORefreshTableHeaderView*)view{

    NSLog(@"egoRefreshTableHeaderDataSourceIsLoading");
    return _reloading; // should return if data source model is reloading

}
- (NSDate*)egoRefreshTableHeaderDataSourceLastUpdated:(EGORefreshTableHeaderView*)view{

    return [NSDate date]; // should return date data source was last changed

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:40:44.827

我已经解决了这个问题：需要让 viewController 确认 UIScrollViewDelegate 并添加

```
 _gmGridView.delegate = self; 
```

在 viewController 的 loadView 方法中。

# javascript - Backbone.js：我在哪里放置我的 jQuery 设置？

> ID：14642740
> 
> 赞同：8
> 
> 时间：2013-02-01T09:02:01.260
> 
> 标签：javascript, backbone.js

我开始掌握 Backbone.js，但我不明白的一件事是把设置页面所需的所有一次性 jQuery 代码放在哪里。

你知道这样的事情：配置一个 jQuery 轮播插件，添加一个“滚动到顶部”箭头......当用户第一次加载页面时发生的一次性配置。

目前我正在路由器中执行此操作：

```
 var AppRouter = Backbone.Router.extend({
  routes: {
    // some routes
  },
  initialize: function() {
    initializeJqueryStuff();
  } ...
 });
 var StateApp = new AppRouter();
 Backbone.history.start({
   pushState: true
 });
 function initializeJqueryStuff() { 
   // one-off jQuery stuff goes here
 } 
```

哟呵。我应该怎么做？应该`initializeJqueryStuff`是Router对象的另一个属性吗？这一切都应该住在里面`initialize`吗？或者我真的应该将此代码与 Backbone 应用程序完全分开吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:29:37.700

我通常定义一个`LayoutView`，即一个根视图，它负责呈现应用程序中的所有“实际”视图。此布局视图仅在需要运行任何其他视图代码之前初始化一次。这也是我倾向于进行任何一次性视图配置的地方。

样本：

```
//LayoutView should be considered a singleton, only initialized once
var LayoutView = Backbone.View.extend({
    el:'body',

    initialize: function() {
        this.initializeSomejQueryStuff();
    },

    renderChild: function(child) {
        if(this._currentChild)
            this._currentChild.remove();
        this._currentChild = child;
        this.$el.html(child.render().el);
    },

    initializeSomejQueryStuff: function() {
        //init here
    }
}); 
```

用法：

```
var AppRouter = Backbone.Router.extend({
    routes: {
        "foo/:id": "foo"
    },

    initialize: function() {
        this.layout = new LayoutView();
    },

    foo: function(id) {
        var model = new Foo({id:id});
        var view = new FooView({model:model});

        //delegate the view rendering to a layout
        this.layout.renderChild(view);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:39:19.723

嗯...对不起，如果我因为我的英语不好而错过了一些细节。但是正如我所看到的那样，您的问题的重点是：您可以在哪里配置和放置与 Backbone 无关的 jQuery 内容？总之，您可以将这段代码分开，然后将其链接到 .html

主干只是一点点 MVC。你可以操纵你的渲染函数和一些与视图相关的js东西`Backbone.View.extend({...})`，但总的来说，我认为为不同的东西制作不同的结构是一个好点。像这样：

```
.../
   public/
         css/
         img/
         lib/
            ..any source code for your plugins..
         tpl/
            ..for your templates..
         js/
           models/
                 models.js
           views/
                ..your views.js..
           main.js(your backbone router and for example, .loadTemplate() func for templates and other)
           ..any code for plugings configuration.. 
```

所以我认为这种结构可以帮助理解什么是来源，并让你清楚地编码。

希望对您有所帮助。对不起，如果我误解了smth。

# android - 如何更改焦点以编辑文本而不是按钮

> ID：14642743
> 
> 赞同：0
> 
> 时间：2013-02-01T09:02:10.760
> 
> 标签：android, android-layout

布局文件：-

```
 <?xml version="1.0" encoding="utf-8"?>
  <ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:background="@drawable/scroll_bg" >

 <RelativeLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="521dp"
  android:layout_marginBottom="60dp"
  android:background="@drawable/bg" >

<com.deemtech.widgets.MenuLayout
    android:id="@+id/menuTitle"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/txtCustomerDetails"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="140dp"
    android:gravity="center"
    android:text="@string/customer_details"
    android:textColor="#ffffff"
    android:textSize="12sp" />

<EditText
    android:id="@+id/editNameCustomerDetails"
    style="@style/EditText"
    android:layout_below="@+id/txtCustomerDetails"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="12dp"
    android:ems="10"
    android:hint="NAME"
    android:inputType="text" />

<RelativeLayout
    android:id="@+id/innerLayout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_marginLeft="25dp"
    android:layout_marginRight="25dp"
    android:layout_marginTop="190dp"
    android:background="@drawable/bg_create_account1x"
    android:gravity="center"
    android:paddingBottom="5dp"
    android:paddingLeft="25dp"
    android:paddingRight="25dp"
    android:paddingTop="8dp" >

    <EditText
        android:id="@+id/editEmailCustomerDetails"
        style="@style/EditText"
        android:layout_alignLeft="@+id/editPhoneCutomerDetails"
        android:layout_alignParentTop="true"
        android:layout_marginTop="52dp"
        android:ems="10"
        android:hint="EMAIL ADDRESS"
        android:inputType="textEmailAddress" />

    <EditText
        android:id="@+id/editPhoneCutomerDetails"
        style="@style/EditText"
        android:layout_below="@+id/editEmailCustomerDetails"
        android:layout_marginTop="8dp"
        android:ems="10"
        android:hint="CONTACT NUMBER"
        android:maxLength="12"
        android:inputType="phone" />

    <!--
    <EditText
        android:id="@+id/editAdditionalInfo"
        android:layout_width="150dp"
        android:layout_height="50dp"
        android:layout_alignLeft="@+id/editPhoneCutomerDetails"
        android:layout_alignRight="@+id/editPhoneCutomerDetails"
        android:layout_below="@+id/editPhoneCutomerDetails"
        android:layout_marginBottom="60dp"
        android:layout_marginTop="10dp"
        android:background="@drawable/message_additional_box1x"
        android:ems="10"
        android:hint="ADDITIONAL INFO"
        android:inputType="text"
        android:padding="10dp"
        >

        <requestFocus />
    </EditText>
    -->

    <EditText
        android:id="@+id/editAdditionalInfo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editPhoneCutomerDetails"
        android:layout_alignParentBottom="true"
        android:layout_alignRight="@+id/editPhoneCutomerDetails"
        android:layout_below="@+id/editPhoneCutomerDetails"
        android:layout_marginBottom="60dp"
        android:layout_marginTop="8dp"
        android:hint="ADDITIONAL INFO"
        android:background="@drawable/message_additional_box1x"
        android:ems="10"
        android:singleLine="true"
        android:gravity="top"
        android:lines="3"
        android:padding="10dp"
        android:width="150dp" >

        <requestFocus />
    </EditText>
</RelativeLayout>

<Button
    android:id="@+id/btnBackCustomerDetails"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="448dp"
    android:layout_toLeftOf="@+id/btnSubmitCustomerDetails"
    android:background="@drawable/btn_back"
    android:contentDescription="@string/app_name" />

<Button
    android:id="@+id/btnSubmitCustomerDetails"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/editNameCustomerDetails"
    android:layout_marginTop="448dp"
    android:background="@drawable/btn_submit"
    android:contentDescription="@string/app_name" /> 
```

我的代码是：-

```
 editPhoneCustomerDetails.setOnKeyListener(new OnKeyListener() {
        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
                    (keyCode == KeyEvent.KEYCODE_ENTER)) {

                findViewById(R.id.editAdditionalInfo).requestFocusFromTouch();

            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);                imm.toggleSoftInput(InputMethodManager.SHOW_FORCED,
            InputMethodManager.HIDE_IMPLICIT_ONLY);

                //((ScrollView) findViewById(R.id.scrollView)).fullScroll(View.FOCUS_DOWN);

                //findViewById(R.id.editPhoneCutomerDetails).requestFocusFromTouch();

               // findViewById(R.id.btnBackCustomerDetails).requestFocusFromTouch(); 
            }
            return false;
        }
    }); 
```

在这里，我想像当用户从电话详细信息中单击下一个按钮时那样执行，它应该关注最后编辑文本并且还应该显示两个按钮。我的问题是，当我从软输入模式单击下一个按钮时，它会聚焦到后退按钮而不是最后编辑文本。

请帮忙。

注意：- 我必须同时显示两个按钮和最后的编辑文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:04:24.553

这应该可以解决问题：

```
EditText editNameCustomerDetails = 
    (EditText)findViewById(R.id.editNameCustomerDetails);

editNameCustomerDetails.requestFocus(); 
```

# .net - 使用 IfModifiedSince 访问条件是否会减少 Azure Blob 存储事务的数量？

> ID：14642751
> 
> 赞同：2
> 
> 时间：2013-02-01T09:02:37.517
> 
> 标签：.net, azure, azure-storage, azure-blob-storage

有一个[`BlobRequestOptions.AccessCondition`](http://msdn.microsoft.com/en-US/library/microsoft.windowsazure.storageclient.blobrequestoptions.accesscondition)属性可以设置为[`IfModifiedSince`](http://msdn.microsoft.com/en-US/library/microsoft.windowsazure.storageclient.accesscondition.ifmodifiedsince)，例如`ListBlobs()`只返回在指定时间后修改的 blob。

现在，[ListBlobs REST API 调用](http://msdn.microsoft.com/en-us/library/windowsazure/dd135734.aspx)的描述没有任何可以映射访问条件的参数。所以我假设所有的 blob 都将被返回，然后 StorageClient 代码将以编程方式在客户端上过滤它们。

所以看起来使用访问条件不会改变对存储的请求数。

访问条件是否真的减少了事务的数量，或者它们仅适用于客户端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:58:15.853

尽管`BlobRequestOptions`对象可以作为参数传递给 Storage Client 库中的所有函数，但请注意这`AccessCondition`仅适用于少数操作。有关您可以指定的操作列表`AccessCondition`，请参阅此链接：http: [//msdn.microsoft.com/en-us/library/windowsazure/dd179371.aspx#Subheading2](http://msdn.microsoft.com/en-us/library/windowsazure/dd179371.aspx#Subheading2)。对于所有其他操作，`AccessCondition`参数将被忽略。

具体`ListBlobs()`忽略`AccessCondition`。

# c++ - 大图像的 CUDA 内存分配问题

> ID：14642758
> 
> 赞同：1
> 
> 时间：2013-02-01T09:03:17.080
> 
> 标签：c++, cuda

我有一个从图像制作直方图的功能（给定的顺序版本（家庭作业））

```
CImg< unsigned char > histogramImage = CImg< unsigned char >(BAR_WIDTH * HISTOGRAM_SIZE, HISTOGRAM_SIZE, 1, 1);
unsigned int *histogram;
histogram = (unsigned int *)malloc(HISTOGRAM_SIZE * sizeof(unsigned int));
 memset(reinterpret_cast< void * >(histogram), 0, HISTOGRAM_SIZE * sizeof(unsigned int));

cudaMemset(gpuImage, 0, grayImage.width() * grayImage.height() * sizeof(unsigned char));

cuda_err = cudaMemcpy(gpuImage, grayImage, grayImage.width() * grayImage.height() * sizeof(unsigned char), cudaMemcpyHostToDevice);
if (cuda_err != cudaSuccess)
{
    std::cout << "ERROR: Failed cudaMemcpy" << std::endl;
   return -1;
}

unsigned int *gpuhistogram;
cuda_err = cudaMalloc((void **)(&gpuhistogram), HISTOGRAM_SIZE * sizeof(unsigned int));
if (cuda_err != cudaSuccess)
{
    std::cout << "ERROR: Failed cudaMalloc" << std::endl;
}
cudaMemset (gpuhistogram, 0, HISTOGRAM_SIZE * sizeof(unsigned int));

histogram1D(gpuImage, histogramImage, grayImage.width(), grayImage.height(), gpuhistogram, HISTOGRAM_SIZE, BAR_WIDTH, total, gridSize, blockSize);

cuda_err = cudaMemcpy(histogram, gpuhistogram, HISTOGRAM_SIZE * sizeof(unsigned int), cudaMemcpyDeviceToHost);
if (cuda_err != cudaSuccess)
{
    std::cout << "ERROR: Failed cudaMemcpy" << std::endl;
} 
```

那叫

```
void histogram1D(unsigned char *grayImage, unsigned char *histogramImage, const int width, const int height, unsigned int *histogram, const unsigned int HISTOGRAM_SIZE, const unsigned int BAR_WIDTH, NSTimer &timer, dim3 grid_size, dim3 block_size) {

NSTimer kernelTime = NSTimer("kernelTime", false, false);

kernelTime.start();
histo <<< grid_size, block_size >>> (grayImage, histogram,width);
cudaDeviceSynchronize();
kernelTime.stop();

cout << fixed << setprecision(6);
cout << "histogram1D (kernel): \t\t" << kernelTime.getElapsed() << " seconds." << endl;
} 
```

核函数是

```
__global__ void histo(unsigned char *inputImage, unsigned int *histogram, int width)
{

int x = threadIdx.x + (blockIdx.x * blockDim.x);
int y = threadIdx.y + (blockIdx.y * blockDim.y);

unsigned int index = static_cast< unsigned int >(inputImage[(y * width) + x]);
atomicAdd(&histogram[index],1);
} 
```

我遇到的问题是，当我用 1024x1024 到 3543x2480 的图像调用它时，它可以工作。但是，我有一张 8192x8192 的图像，当函数返回时，* histogram 中的值仍然为 0。我的试验似乎表明它与 *gpuhistogram 的内存分配有关（unsigned int 不应该足够大？）因为这个工作的顺序版本。如何解决这个问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:54:46.943

1.  检查你的卡。来自维基百科：

    技术规格 计算能力（版本） 1.0 1.1 1.2 1.3 2.x 3.0 3.5 线程块网格的最大维度 2 3 线程块网格的最大 x、y 或 z 维度 65535 231-1

2.  我怀疑您的直方图的性能会比 CPU 代码差，尝试使用共享内存之类的东西并假设 256 个值。诀窍是每个块使用 bin# of threads（每个块 256 个线程）。我不想破坏作者的收入，所以请参阅`CUDA by Example 2010`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:22:54.257

只是想补充；按照米哈伊尔的回答，这就是我现在正在做的事情；

```
void histogram1D(unsigned char *grayImage, unsigned char *histogramImage, const int width, const int height, unsigned int *histogram, const unsigned int HISTOGRAM_SIZE, const unsigned int BAR_WIDTH, NSTimer &timer, dim3 grid_size, dim3 block_size) {

NSTimer kernelTime = NSTimer("kernelTime", false, false);

kernelTime.start();
// Kernel
histo <<< 15*2, 256 >>> (grayImage, histogram,width,height);//15 is the number of blocks for my device
//cudaDeviceSynchronize(); //i get slow results with this. figured it's not nessesary since the kernel threads are synced.
kernelTime.stop();

cout << fixed << setprecision(6);
cout << "histogram1D (kernel): \t\t" << kernelTime.getElapsed()*1000 << " milliseconds." << endl;
} 
```

内核代码；

```
__global__ void histo(unsigned char *inputImage, unsigned int *histogram, int width, int height)
{
__shared__ unsigned int temp[256];
temp[threadIdx.x] = 0;

__syncthreads();

int i = threadIdx.x + blockIdx.x * blockDim.x;
int offset = blockDim.y * gridDim.x;
while(i<width*height)
{
    atomicAdd(&temp[inputImage[i]],1);
    i += offset;
}

__syncthreads();
atomicAdd(&(histogram[threadIdx.x]),temp[threadIdx.x]);
} 
```

# json - 在 Windows Phone 上解析 JSON

> ID：14642763
> 
> 赞同：0
> 
> 时间：2013-02-01T09:03:32.120
> 
> 标签：json, c#-4.0, json.net, windows-phone-8

我有一个 Web 服务，它为我生成一些我想在 Windows Phone 上解析的 JSON。我是这个主题的新手，所以我不知道该怎么做，因为在 JSON 中有不同数量的条目的列表，所以我无法获取带有索引的项目，因为我不知道它。如何将动态数据导入我的 Windows Phone 应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:35:15.390

从您的 Json 消息中，此页面可以生成类：http: [//json2csharp.com/](http://json2csharp.com/)

使用此页面获取在 C# 中反序列化/序列化 Json 的参考代码：http: [//json.codeplex.com/](http://json.codeplex.com/)

然后例如反序列化您的 Json 响应：

```
void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
{
    RootObject obj = JsonConvert.DeserializeObject<RootObject>(e.Result);
} 
```

# extjs - 如何从 Ext 表单中获取值

> ID：14642765
> 
> 赞同：10
> 
> 时间：2013-02-01T09:03:38.780
> 
> 标签：extjs, extjs4

实际上我有一个 ExtJs 脚本来创建带有下面窗口的表单。

```
var frmAccount = Ext.create('Ext.form.Panel',{
    bodyPadding: 5,
    frame  : true,
    items    :[
    {
        xtype       : 'textfield',
        fieldLabel  : 'Account Number',
        name        : 'accountNum'
    },{
        xtype       : 'textfield',
        fieldLabel  : 'Company',
        name        : 'company'
    },{
        xtype       : 'textfield',
        fieldLabel  : 'Office',
        name        : 'office'
    },{
        xtype       : 'textareafield',
        fieldLabel  : 'Address',
        name        : 'address',
        width       : 350
    },{
        xtype       : 'textfield',
        fieldLabel  : 'City',
        name        : 'city'
    },{
        xtype       : 'textfield',
        fieldLabel  : 'Country',
        name        : 'nation'
    }]
});

var winAddAccount = Ext.create('widget.window',{
    id     : 'addAccount',
    title  : 'Filter Record',
    width  : 400,
    height : 300,
    modal  : true,
    closeAction    : 'hide',
    items  : frmAccount,
    layout : 'fit',
    bodyPadding: 5,
    buttons:[
    {
        text    : 'Find',
        handler: function(){
            //console.log(form value);
        }
    },
    {
        text    : 'Cancel',
        handler: function(){
            winAddAccount.hide();
        }
    }
    ]
}); 
```

单击“查找”按钮后，我只想从表单中获取值。但是我不知道在单击“查找”按钮后从表单中获取值。希望我可以在处理程序上看到`console.log`脚本的值。请帮我解决或提出一个想法。谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-01T09:08:21.020

试试这个

```
text    : 'Find',
handler: function(btn){
    var win = btn.up('window'),
        form = win.down('form');
    console.log(form.getForm().getValues());
} 
```

此外，我建议您阅读 sencha 提供的**[教程](http://www.sencha.com/learn/extjs/?4x)**并查看**[API](http://docs.sencha.com/ext-js/4-1/#!/api/)**，其中还包含大量示例

要仅获取特定字段的值（此示例假设该字段存在！）

```
text    : 'Find',
handler: function(btn){
    var win = btn.up('window'),
        form = win.down('form');
    console.log(form.getForm().findField('NamePropertyValue').getSubmitValue() /*or call getSubmitData() or just getValue()*/);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T07:39:01.953

```
handler: function(button) {
  var form = button.up('form').getForm();
  console.log(form.getValues());
  // ...
} 
```

# rvm - 使用 RVM 安装 ruby 1.9.2-p320 时出错

> ID：14642766
> 
> 赞同：0
> 
> 时间：2013-02-01T09:03:41.397
> 
> 标签：rvm, fedora, ruby-1.9.2

我在 x86-64 架构上运行 Fedora 18。我可以使用 RVM 安装 Ruby 1.9.3。但是，当我尝试安装 Ruby 1.9.2 时，它给了我以下错误：

```
ruby-1.9.2-p320 - #extracting ruby-1.9.2-p320 to /home/abhay/.rvm/src/ruby-1.9.2-p320
ruby-1.9.2-p320 - #extracted to /home/abhay/.rvm/src/ruby-1.9.2-p320
ruby-1.9.2-p320 - #configuring
ruby-1.9.2-p320 - #compiling
Error running 'make', please read /home/abhay/.rvm/log/ruby-1.9.2-p320/make.log
There has been an error while running make. Halting the installation. 
```

以下是 make.log 文件的内容：

```
compiling bigdecimal
make[1]: Entering directory `/home/abhay/.rvm/src/ruby-1.9.2-p320/ext/bigdecimal'
gcc -I. -I../../.ext/include/x86_64-linux -I../.././include -I../.././ext/bigdecimal -DRUBY_EXTCONF_H=\"extconf.h\" -I/home/abhay/.rvm/usr/include    -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long  -fPIC  -o bigdecimal.o -c bigdecimal.c
gcc -shared -o ../../.ext/x86_64-linux/bigdecimal.so bigdecimal.o -L. -L../.. -L/home/abhay/.rvm/usr/lib -Wl,-R/home/abhay/.rvm/usr/lib -L.  -rdynamic -Wl,-export-dynamic   -Wl,-R -Wl,/home/abhay/.rvm/rubies/ruby-1.9.2-p320/lib -L/home/abhay/.rvm/rubies/ruby-1.9.2-p320/lib -lruby  -lpthread -lrt -ldl -lcrypt -lm   -lc
/usr/bin/mkdir -p ../../.ext/common/bigdecimal
cp ../.././ext/bigdecimal/lib/bigdecimal/newton.rb ../../.ext/common/bigdecimal
cp ../.././ext/bigdecimal/lib/bigdecimal/math.rb ../../.ext/common/bigdecimal
cp ../.././ext/bigdecimal/lib/bigdecimal/jacobian.rb ../../.ext/common/bigdecimal
cp ../.././ext/bigdecimal/lib/bigdecimal/ludcmp.rb ../../.ext/common/bigdecimal
cp ../.././ext/bigdecimal/lib/bigdecimal/util.rb ../../.ext/common/bigdecimal
make[1]: Leaving directory `/home/abhay/.rvm/src/ruby-1.9.2-p320/ext/bigdecimal'
compiling continuation
make[1]: Entering directory `/home/abhay/.rvm/src/ruby-1.9.2-p320/ext/continuation'
gcc -I. -I../../.ext/include/x86_64-linux -I../.././include -I../.././ext/continuation -DRUBY_EXTCONF_H=\"extconf.h\" -I/home/abhay/.rvm/usr/include    -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long  -fPIC  -o continuation.o -c continuation.c
gcc -shared -o ../../.ext/x86_64-linux/continuation.so continuation.o -L. -L../.. -L/home/abhay/.rvm/usr/lib -Wl,-R/home/abhay/.rvm/usr/lib -L.  -rdynamic -Wl,-export-dynamic   -Wl,-R -Wl,/home/abhay/.rvm/rubies/ruby-1.9.2-p320/lib -L/home/abhay/.rvm/rubies/ruby-1.9.2-p320/lib -lruby  -lpthread -lrt -ldl -lcrypt -lm   -lc
make[1]: Leaving directory `/home/abhay/.rvm/src/ruby-1.9.2-p320/ext/continuation'
compiling coverage
make[1]: Entering directory `/home/abhay/.rvm/src/ruby-1.9.2-p320/ext/coverage'
gcc -I. -I../../.ext/include/x86_64-linux -I../.././include -I../.././ext/coverage -DRUBY_EXTCONF_H=\"extconf.h\" -I/home/abhay/.rvm/usr/include    -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long  -fPIC  -o coverage.o -c coverage.c
gcc -shared -o ../../.ext/x86_64-linux/coverage.so coverage.o -L. -L../.. -L/home/abhay/.rvm/usr/lib -Wl,-R/home/abhay/.rvm/usr/lib -L.  -rdynamic -Wl,-export-dynamic   -Wl,-R -Wl,/home/abhay/.rvm/rubies/ruby-1.9.2-p320/lib -L/home/abhay/.rvm/rubies/ruby-1.9.2-p320/lib -lruby  -lpthread -lrt -ldl -lcrypt -lm   -lc
make[1]: Leaving directory `/home/abhay/.rvm/src/ruby-1.9.2-p320/ext/coverage'
compiling curses
make[1]: Entering directory `/home/abhay/.rvm/src/ruby-1.9.2-p320/ext/curses'
gcc -I. -I../../.ext/include/x86_64-linux -I../.././include -I../.././ext/curses -DRUBY_EXTCONF_H=\"extconf.h\" -I/home/abhay/.rvm/usr/include    -fPIC -O3 -ggdb -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-missing-field-initializers -Wno-long-long  -fPIC  -o curses.o -c curses.c
gcc -shared -o ../../.ext/x86_64-linux/curses.so curses.o -L. -L../.. -L/home/abhay/.rvm/usr/lib -Wl,-R/home/abhay/.rvm/usr/lib -L.  -rdynamic -Wl,-export-dynamic   -Wl,-R -Wl,/home/abhay/.rvm/rubies/ruby-1.9.2-p320/lib -L/home/abhay/.rvm/rubies/ruby-1.9.2-p320/lib -lruby -lncursesw -ltinfo  -lpthread -lrt -ldl -lcrypt -lm   -lc
curses.o: file not recognized: File truncated
collect2: error: ld returned 1 exit status
make[1]: *** [../../.ext/x86_64-linux/curses.so] Error 1
make[1]: Leaving directory `/home/abhay/.rvm/src/ruby-1.9.2-p320/ext/curses'
make: *** [mkmain.sh] Error 1 
```

谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T21:37:31.840

我不像以前那样使用 Fedora，但是在我的 Debian x86_64 机器上，这条线略有不同。在那，你的呼唤`libncursesw`，我的呼唤`libncurses`；这两个库在源代码上相当兼容，但可能会根据您的语言环境设置导致轻微的渲染差异。请参阅下面代码块的第一行，了解我的机器如何调用 gcc 将 curses.so 编译为 curses.o 与你的在底线：

```
gcc -shared -o ../../.ext/x86_64-linux/curses.so curses.o -L. -L../.. -L. -L/home/schade/.rvm/usr/lib -Wl,-rpath,/home/schade/.rvm/usr/lib -rdynamic -Wl,-export-dynamic   -Wl,-R -Wl,/home/schade/.rvm/rubies/ruby-1.9.2-p320/lib -L/home/schade/.rvm/rubies/ruby-1.9.2-p320/lib -lruby -lncurses -ltinfo  -lpthread -lrt -ldl -lcrypt -lm   -lc

gcc -shared -o ../../.ext/x86_64-linux/curses.so curses.o -L. -L../.. -L/home/abhay/.rvm/usr/lib -Wl,-R/home/abhay/.rvm/usr/lib -L.  -rdynamic -Wl,-export-dynamic   -Wl,-R -Wl,/home/abhay/.rvm/rubies/ruby-1.9.2-p320/lib -L/home/abhay/.rvm/rubies/ruby-1.9.2-p320/lib -lruby -lncursesw -ltinfo  -lpthread -lrt -ldl -lcrypt -lm   -lc 
```

正如您所看到的，除了我们的用户名之外，唯一的区别是`-lncurses`与`-lncursesw`.

[如果您可以在没有 unicode 支持的情况下进行管理，那么对此SuperUser 问题](https://superuser.com/questions/416147/fedora-16-failed-to-install-scion-browser-with-cabal)的解决方案的类似修复可能会为您解决此问题。

# python - 使用python解析XML文件时如何打印整个标签

> ID：14642768
> 
> 赞同：0
> 
> 时间：2013-02-01T09:03:46.560
> 
> 标签：python, xml, dom, xml-parsing

我有一个如下的 xml 文件：

```
<alarms rootMIB="1" source="PLATFORM">
<alarm alarmCode="123" alarmMIBName="chassde">
        <alarmObject>CHASSIS</alarmObject>
        <alarmType>equipmentAlarm</alarmType>
        <probableCause>equipmentMalfunction</probableCause>
        <description>Report</description>
</alarm>
</alarms> 
```

我可以通过以下代码获取“alarmCode”和“alarmMIBName”的属性：

```
import xml.dom.minidom
for alarm_tag in dom.getElementsByTagName('alarm'):
    if alarm_tag.hasAttribute('alarmMIBName'):
            alarmmibname = str(alarm_tag.getAttribute('alarmMIBName')) 
```

但我也想**打印 hasAttribute 'alarmMIBName' 的整行，**即这一行：

```
<alarm alarmCode="123" alarmMIBName="chassde"> 
```

谁能告诉我如何打印整行？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:12:58.373

这对我有用

```
alarm_tag.toxml().split("\n")[0] 
```

# mysql - InnoDB论坛DB设计与复合主键（Cluster Primary Key）

> ID：14642772
> 
> 赞同：2
> 
> 时间：2013-02-01T09:04:00.567
> 
> 标签：mysql, primary-key, innodb, clustered-index

我正在使用 InnoDB 设计论坛数据库并且有几个问题，有人可以帮我澄清一下吗？

**下面的帖子**和**评论**表设计

```
CREATE TABLE `my_posts` (
  `forum_id` mediumint(8) unsigned NOT NULL,
  `post_id` int(10) unsigned NOT NULL,          // not an auto increment
   subject   varchar(200) NOT NULL,
  `details` text NOT NULL,
  `access` tinyint(3) unsigned NOT NULL,  //private,friends,public
  `created_by` int(10) unsigned NOT NULL,
  `created_on` int(10) unsigned NOT NULL,
  `updated_on` int(10) unsigned NOT NULL,
  `comment_count` smallint(5) unsigned NOT NULL DEFAULT '0',
  `ip_address` int(10) unsigned NOT NULL,
   sphinx_unique_id  int(10) unsigned NOT NULL,  // not an auto increment
   PRIMARY KEY (`forum_id`,`post_id`,created_by)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `my_posts_comments` (
  `forum_id` mediumint(8) unsigned NOT NULL,
  `post_id` int(10) unsigned NOT NULL,          // not an auto increment 
  `comment_id` int(10) unsigned NOT NULL,
  `details` text NOT NULL,
  `created_by` int(10) unsigned NOT NULL,
  `created_on` int(10) unsigned NOT NULL,
  `ip_address` int(10) unsigned NOT NULL,
  PRIMARY KEY (`forum_id`,`post_id`,comment_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我有基于**forum_id、post_id、created_by**的查询以及对**updated_on 、 comment_count的排序**

```
SELECT * FROM my_posts  WHERE access=public ORDER BY updated_on DESC      //OR ASC
SELECT * FROM my_posts  WHERE access=public ORDER BY comment_count DESC      //OR ASC
SELECT * FROM my_posts WHERE forum_id=?  and access=public ORDER BY updated_on DESC      //OR ASC
SELECT * FROM my_posts WHERE forum_id=?  and access=public  ORDER BY comment_count DESC   //OR ASC
SELECT * FROM my_posts WHERE created_by=?  ORDER BY updated_on DESC     //OR ASC
SELECT * FROM my_posts  WHERE created_by=(Friends_ids) AND access=(public,friends)   ORDER BY updated_on DESC      //OR ASC 
SELECT * FROM my_posts WHERE forum_id=? AND  post_id=?  
SELECT * FROM my_posts_comments WHERE forum_id=? AND post_id=? 
```

**1) 由于forum_id, post_id, created_by**上的复合主键，我发现访问它的问题只是以**created_by**为条件。**在created_by**上查询的最佳设计是什么 ？我可以从复合键中删除**created_by**并为其添加索引吗？我将在这里失去集群性能..

2）在论坛级别增加 post_id 的最佳方法是什么？或者我可以在表级别增加。例如

**样本数据（论坛级别）**

```
 FORUM_ID  POST_ID
    1         1
    1         2
    1         3
    1         4
    2         1
    2         2
    2         3
    2         4
    2         5 
```

或**表级**

```
 FORUM_ID  POST_ID
1          1
1          2
1          3
1          4
2          5
2          6
2          7
2          8
2          9 
```

如果我可以使用上面的表级别增量，我可以删除 sphinx_unique_id 列，因为我只将它用于 sphinx 搜索。同样在评论表中，我可以删除 forum_id 列。

3）我在 **updated_on**和**comment_count**上排序的所有查询。这两个不是PK的，所以前两个查询看起来是个大问题..

感谢你的帮助

# backbone.js - 事件附加到主干中的表（数据表）视图中的所有行

> ID：14642774
> 
> 赞同：0
> 
> 时间：2013-02-01T09:04:05.123
> 
> 标签：backbone.js, datatable

我有一个视图，它在使用数据表插件呈现的表中添加了一个新行。我希望每一行都附加一组特定的事件。这是视图：

```
var newRow=Backbone.View.extend({

        el:".datatable",

        events:{
            'click .edit':'edit',
            'click .delete':'delete'
            },

            render: function()
            {

                data=this.model.toJSON();
                this.$el.dataTable().fnAddData([data.name,data.email,data.contact_number,'<span style="cursor:pointer" class="delete">Delete</span>']);
                return this;
            },

            edit:function(){
                alert("edit");
            },

            delete:function(){
            alert("delete");
            }
        }) 
```

现在，当我单击一行上的删除时，它会触发所有行的事件，并且我会收到与行一样多的警报。我明白问题是什么。由于我已将 el 作为整个表，因此它会在所有行中附加事件。有什么办法可以解决这个问题？我需要使用数据表。对于简单的表，我应该只使用 el 作为“tr”，但真的不知道如何实现我目前的愿望。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:51:12.047

如果有人在这个问题上苦苦挣扎，请像我一样使用数据表中的 fnAddTr 插件：

```
var newrow=Backbone.View.extend({            

       tagName:"tr",

        events:{
            'click .edit':'edit',
            'click .delete':'delete'
            },

            render: function()
            {

            data=this.model.toJSON();

            this.$el.html('<td>'+data.name+'</td><td>'+data.email+'</td><td>'+data.contact_number+'</td><td><span class="delete">Delete</span> | <span class="edit">Edit</span></td>');
            return this;
            },

            edit:function(){
                alert("edit");
            },

            delete:function(){
            alert("delete");
            }
            }); 
```

并在调用函数中添加 tr 元素，如下所示：

```
var Instance=new newRow({ model:myModel});
$('table').dataTable().fnAddTr(Instance.render().el); 
```

所以这条线是关键`$('table').dataTable().fnAddTr(Instance.render().el);`

希望这可以帮助某人。

# eclipse - 从 Eclipse 内部使用模拟/存根运行 Spock-spec 时的验证错误

> ID：14642775
> 
> 赞同：4
> 
> 时间：2013-02-01T09:04:09.803
> 
> 标签：eclipse, spock

这曾经有效：

在 Eclipse 中，选择其中包含 (spock) 模拟或存根的 Spock 规范，然后选择 Run as -> JUnit Test。

突然我不能再运行这些了，但是得到一个 java.lang.VerifyError。

在没有任何模拟/存根的情况下运行规范时，它按预期工作，而从 Gradle 构建运行时，则不会发生这种情况。

这是我在 Eclipse 内部使用存根运行 Spec 时得到的堆栈跟踪：

```
java.lang.VerifyError: class net.sf.cglib.core.DebuggingClassWriter overrides final\
   method visit.(IILjava/lang/String;Ljava/lang/String;Ljava/lang/String;\
   [Ljava/lang/String;)V
at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
at net.sf.cglib.core.AbstractClassGenerator.<init>(AbstractClassGenerator.java:38)
at net.sf.cglib.core.KeyFactory$Generator.<init>(KeyFactory.java:127)
at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:112)
at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:108)
at net.sf.cglib.core.KeyFactory.create(KeyFactory.java:104)
at net.sf.cglib.proxy.Enhancer.<clinit>(Enhancer.java:69)
at org.spockframework.mock.runtime.ProxyBasedMockFactory$CglibMockFactory.createMock(ProxyBasedMockFactory.java:80)
at org.spockframework.mock.runtime.ProxyBasedMockFactory.create(ProxyBasedMockFactory.java:49)
at org.spockframework.mock.runtime.JavaMockFactory.create(JavaMockFactory.java:51)
at org.spockframework.mock.runtime.CompositeMockFactory.create(CompositeMockFactory.java:44)
at org.spockframework.lang.SpecInternals.createMock(SpecInternals.java:47)
at org.spockframework.lang.SpecInternals.createMockImpl(SpecInternals.java:282)
at org.spockframework.lang.SpecInternals.StubImpl(SpecInternals.java:131)
at se.hd.taglib.TaglibSpecBase.stubPageContext(TaglibSpecBase.groovy:43) 
```

我没有为运行配置设置任何参数（因为我以前不需要），但是我可以在运行配置中设置一些运行时或环境变量来解决这个问题吗？

*   斯波克： `org.spockframework:spock-core:0.7-groovy-2.0`
*   时髦的：`org.codehaus.groovy:groovy-all:2.0.6`
*   Eclipse：`Version: Juno Service Release 1 Build id: 20121004-1855`，（在jdk1.7.0_06.jdk上运行，虽然源级别设置为1.6）
*   Groovy-Eclipse 插件：`2.7.1.xx-RELEASE-20121219-0800-e42`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:36:18.190

听起来您的 Eclipse 类路径有错误的 CGLIB（或 ASM）版本。Spock 0.7 是针对`cglib:cglib-nodep:2.2.2`.

# asp.net - 我可以在 DotNetNuke 自定义模块中免费使用 telerik.dll

> ID：14642776
> 
> 赞同：1
> 
> 时间：2013-02-01T09:04:12.257
> 
> 标签：asp.net, telerik, dotnetnuke, dotnetnuke-module

我正在构建一个 dnn 站点，我想在其中使用 Telerik 控件。
现在telerik.dll 包含在DotNetNuke 中。

我的问题是我可以引用这个 dll 并在我的模块中**免费**使用它吗？

（*我正在建设商业网站*）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T09:59:10.133

我相信您可以在站点内的模块中免费使用它，只要您使用 Telerik 控件的 DNN 包装器。

但是，您不能出售您的自定义模块。

这是我对“使用 Telerik 控件开发 DNN 模块是否有特殊要求？”的解释。拉维发布的链接部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:50:52.700

如果我没记错的话，您可以使用恰好使用 Telerik Controls 的 DNN 控件而不会出现问题。如果您想在您的模块中使用 Telerik 控件，您需要拥有自己的 Telerik 工具许可证。看来，如果您购买 DNN Professional，您可以让无限的开发人员使用 Telerik 控件进行开发。

[Telerik DNN 常见问题解答](http://www.telerik.com/purchase/faqs/telerik-dnn-partnership-qanda.aspx)将为您解答所有问题。

# javascript - HighCharts - 如何关闭积分？

> ID：14642779
> 
> 赞同：87
> 
> 时间：2013-02-01T09:04:16.950
> 
> 标签：javascript, highcharts

我正在使用 HighCharts。[这](http://api.highcharts.com/highcharts#chart)是文档。我想关闭这些点，但起初我不知道那是怎么称呼的。因此我无法关闭它们。你知道我怎么能杀死那些点吗？

![我想扭转这些观点](../Images/14c9f31e9d806119b582803a8a41c15d.png)

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2013-02-01T09:11:43.313

这是一个带有折线图的示例：http: [//jsfiddle.net/aeZ6P/1/](http://jsfiddle.net/aeZ6P/1/)

重要部分：

```
plotOptions: {
    line: {
        marker: {
            enabled: false
        }
    }
} 
```

另请参阅：[https ://api.highcharts.com/highcharts/plotOptions.line.marker.enabled](https://api.highcharts.com/highcharts/plotOptions.line.marker.enabled)

与样条曲线相同的效果：http: [//jsfiddle.net/aeZ6P/](http://jsfiddle.net/aeZ6P/)

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2013-02-01T14:49:27.340

在 Highcharts 中，我们有三种禁用标记的方法：

1) 按类型禁用所有系列：

```
plotOptions: {
    line: { /* or spline, area, series, areaspline etc.*/
        marker: {
           enabled: false
        }
    }
} 
```

2）禁用一个特定系列：

```
series: [{
    data: [14,17,21],
    marker: {
       enabled: false
    }
}] 
```

3）禁用某个点的标记：

```
series: [{
    data: [{
        y: 14,
        marker: {
            enabled: false
        }
    },{
        y: 17
    },{
        y: 21
    }]
}] 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-01T09:11:50.567

从 HighCharts API 参考看一下：

[http://api.highcharts.com/highcharts#plotOptions.series.marker.enabled](http://api.highcharts.com/highcharts#plotOptions.series.marker.enabled)

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-enabled/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-marker-enabled/)

您需要添加的选项如下：

```
 plotOptions: {
        series: {
            marker: {
                enabled: false
            }
        }
    }, 
```

这种方法很好，因为它适用于所有带有点标记的图表。如果您想要特定的图表类型，请查看：

```
 plotOptions: {
        line: { // <--- Chart type here, check the API reference first!
            marker: {
                enabled: false
            }
        }
    }, 
```

享受！

# git - TextMate 没有从 git 加载我的包

> ID：14642781
> 
> 赞同：0
> 
> 时间：2013-02-01T09:04:24.173
> 
> 标签：git, textmatebundles

使用 git，我检查了

MyBundle.tmbundle

至

/库/应用程序支持/TextMate/Bundles

但 TextMate 无法识别该捆绑包。

我尝试重新加载 TextMate 并在菜单中运行“重新加载捆绑包”。这些都不起作用。

相同的捆绑包以前工作过。我手动删除它并尝试安装它。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:20:48.023

我从头开始重新制作捆绑包，重新提交它，然后再次检查它。捆绑包中的键已更改。我认为 TextMate 在崩溃时会以某种方式损坏、丢失或将这些旧密钥列入黑名单。我不知道为什么它以前崩溃了。无论如何，它现在有效。故事的寓意 - 其他 TextMate 文件在崩溃时损坏，这使其无法识别捆绑包。然而，这个包是完全一样的，因为它保存在一个 git repo 中。

# hibernate - 在 Nhibernate 中计算会话

> ID：14642789
> 
> 赞同：1
> 
> 时间：2013-02-01T09:04:45.750
> 
> 标签：hibernate, nhibernate, orm, fluent-nhibernate

我正在使用流畅的 NHibernate。我想计算在应用程序中创建和存在的会话数。有什么方法可以计算吗？

请分享您的观点和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:45:49.700

创建配置时，还要执行以下操作：

```
var config = new Configuration();

config.DataBaseIntegration(db => { .. });
config.SessionFactory().GenerateStatistics(); 
```

然后看看：

```
SessionFactory.Statistics.EntityFetchCount 
```

# c# - Windows 8 应用程序/线程

> ID：14642791
> 
> 赞同：0
> 
> 时间：2013-02-01T09:04:53.257
> 
> 标签：c#, windows, windows-8, windows-phone-8, windows-applications

我是 Windows 8 的新手，仍然了解基础知识及其工作原理。我的最终目标是设计一个可以安装在 Windows 8 平板电脑上的应用程序/线程。此应用程序/线程将具有 ip 数据，并且可以启动平板电脑上本地安装的 rdp 应用程序。显然，一旦完成并输入凭据，远程会话将启动。

我知道这可能有点偏离主题，但是有人可以指点我一个方向吗，过去几天我一直在“googleling”，但是我的搜索返回了不想要的结果。这背后的原因可能是，我使用了错误的关键字（来自 android 背景），因此非常感谢任何帮助。我特别想知道是否有任何我可以使用的 API。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:11:38.900

**入门：http:** [//msdn.microsoft.com/en-US/windows](http://msdn.microsoft.com/en-US/windows)

[http://msdn.microsoft.com/en-us/windows/apps/br229512.aspx](http://msdn.microsoft.com/en-us/windows/apps/br229512.aspx)

**创建您的第一个应用程序：http:** [//msdn.microsoft.com/en-us/library/windows/apps/hh974581.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974581.aspx)

（谷歌搜索查询：*“how to windows 8 metro app”*和*“metro app tutorial”*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:32:14.013

根据您的具体要求，您将无法从 Windows 应用商店应用程序直接启动另一个进程。使用平台强制执行的沙盒模型，您通常会使用[文件或协议激活](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh779670%28v=win.10%29.aspx)。

*至于“基础知识及其工作原理”，构建 Windows 应用商店应用程序的最佳整体资源切入点是[Generation App](http://aka.ms/8in30)，提供技术资源和专家实时咨询的组合。*

# jquery - Knockout Js：获取下拉订阅的表格行索引值

> ID：14642795
> 
> 赞同：0
> 
> 时间：2013-02-01T09:05:21.647
> 
> 标签：jquery, knockout.js

我正在使用淘汰赛 JS。而在下拉的订阅功能中。我需要获取所选下拉列表的索引。

其中下拉列表在表内（即foreach tr）

HTML：

```
<table>
    <tbody  data-bind="foreach: Rows">
      <tr>
         <td>
            <select data-bind="options: Materials, value: selectedMaterial,attr:{index:$(index)}"></select>
        </td>
      </tr>
</table> 
```

脚本：

```
 this.selectedMaterial.subscribe(function(data){
       // I need to get the index value of the selectedMaterial

       // i try to get like following code but its not working
          var k =$(this).attr("index"); 
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:08:19.153

KO 不可能在订阅功能中做到这一点。您应该尝试另一种方式，例如处理更改事件。

```
<select data-bind="event: {change: selectChanged}"... />

yourViewModel.selectChanged = function(data, event){
     var k = $(event.target).attr("index"); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:09:39.170

您可以使用 data-bind 设置元素的 id，然后使用 jQuery 获取值：

```
 <select data-bind="options: Materials, value: selectedMaterial,attr:{index:$(index), id: 'dropdown' + $index }"></select>

$('#dropDown' + theIndexOfTheTable).prop('selectedIndex'); 
```

这确实假定您将知道正在处理的表的索引。

# javascript - 通过 html5 和 javascript 获取用户地理位置

> ID：14642796
> 
> 赞同：14
> 
> 时间：2013-02-01T09:05:22.033
> 
> 标签：javascript, html, google-maps, geolocation, ip-geolocation

我正在尝试通过 html5 geolcation api 获取用户地理位置，我使用以下代码段：

```
if (navigator.geolocation) {
    var timeoutVal = 10 * 1000 * 1000;
    navigator.geolocation.getCurrentPosition(
      displayPosition, 
      displayError,
      { enableHighAccuracy: true, timeout: timeoutVal, maximumAge: 0 }
    );
  }
  else {
     // DO SOME STUFF HERE
  }

  function displayPosition(position) {

    // configuration
    var myZoom = 12;
    var myMarkerIsDraggable = true;
    var myCoordsLenght = 6;
    var defaultLat = position.coords.latitude;
    var defaultLng = position.coords.longitude;
    document.getElementById('latitude').value = defaultLat;
    document.getElementById('longitude').value = defaultLng;
    /*
      1\. creates the map
      2\. zooms
      3\. centers the map
      4\. sets the map’s type
    */
    var map = new google.maps.Map(document.getElementById('canvas'), {
      zoom: myZoom,
      center: new google.maps.LatLng(defaultLat, defaultLng),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    });
    // centers the map on markers coords
    map.setCenter(myMarker.position);
    // adds the marker on the map
    myMarker.setMap(map);
  }

  function displayError(error) {
    var errors = { 
      1: 'Permission denied',
      2: 'Position unavailable',
      3: 'Request timeout'
    };
    alert("Error: " + errors[error.code]);
  }
}); 
```

上述方法的问题在于，很少有用户发现它难以使用。很少有时间，他们点击了**拒绝**而不是**允许**并一直盯着屏幕。所以从可用性的角度来看，我认为一个好的方法是：

1.  征求他们的同意。

2.  等待 3 秒，如果他们点击拒绝或没有响应，使用 IP 在地图上显示地理定位。

我如何才能完成上述代码段中的第二步。请让我知道，谢谢！但是，有什么更好的处理方式

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-11T10:57:24.337

这是我前段时间编写并最近更新的脚本（ [**geolocator.js ）。**](https://github.com/onury/geolocator)

**更新**：Geolocator v2 已发布。

### 特征：

*   HTML5 地理位置（由用户许可）
*   按 IP 定位
*   地理编码（地址坐标）
*   反向地理编码（从坐标中查找地址）
*   完整的地址信息（街道、城镇、社区、地区、国家、国家代码、邮政编码等...）
*   回退机制（从 HTML5-geolocation 到 IP-geo 查找）
*   看地理位置
*   获取距离矩阵和持续时间
*   计算两个地理点之间的距离
*   获取时区信息
*   获取客户端 IP
*   支持谷歌加载器（动态加载谷歌地图）
*   动态创建谷歌地图（带有标记、信息窗口、自动调整缩放）
*   非阻塞脚本加载（在不中断页面加载的情况下动态加载外部源）

观看[**现场演示**](https://onury.github.io/geolocator/?content=examples)。
请参阅[**API 文档**](https://onury.github.io/geolocator/?api=geolocator)。

[![地理定位器示例截图](../Images/b2355e862d95b579b04636fe19bb43d0.png)](https://i.stack.imgur.com/mvdbR.png)

### 用法：

```
var options = {
    enableHighAccuracy: true,
    timeout: 6000,
    maximumAge: 0,
    desiredAccuracy: 30, // meters
    fallbackToIP: true, // get location by IP if geolocation fails or rejected
    addressLookup: true, // requires Google API key
    timezone: true, // requires Google API key
    map: "my-map" // creates a Google map. requires Google API key
};
geolocator.locate(options, function (err, location) {
    console.log(err || location);
}); 
```

**示例输出：**

```
{
    coords: {
        latitude: 37.4224764,
        longitude: -122.0842499,
        accuracy: 30,
        altitude: null,
        altitudeAccuracy: null,
        heading: null,
        speed: null
    },
    address: {
        commonName: "",
        street: "Amphitheatre Pkwy",
        route: "Amphitheatre Pkwy",
        streetNumber: "1600",
        neighborhood: "",
        town: "",
        city: "Mountain View",
        region: "Santa Clara County",
        state: "California",
        stateCode: "CA",
        postalCode: "94043",
        country: "United States",
        countryCode: "US"
    },
    formattedAddress: "1600 Amphitheatre Parkway, Mountain View, CA 94043, USA",
    type: "ROOFTOP",
    placeId: "ChIJ2eUgeAK6j4ARbn5u_wAGqWA",
    timezone: {
        id: "America/Los_Angeles",
        name: "Pacific Standard Time",
        abbr: "PST",
        dstOffset: 0,
        rawOffset: -28800
    },
    flag: "//cdnjs.cloudflare.com/ajax/libs/flag-icon-css/2.3.1/flags/4x3/us.svg",
    map: {
        element: HTMLElement,
        instance: Object, // google.maps.Map
        marker: Object, // google.maps.Marker
        infoWindow: Object, // google.maps.InfoWindow
        options: Object // map options
    },
    timestamp: 1456795956380
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T14:24:29.843

然后，您将使用这样的地理 ip api：

[http://freegeoip.net/static/index.html](http://freegeoip.net/static/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T17:37:14.947

好的，所以这不是代码答案，更多的是用户体验答案。

从用户体验的角度来看，最突出的第一件事是在您触发浏览器请求他们许可之前您提供的信息不足。

我建议您使用某种覆盖框来显示屏幕截图（上面有一个大箭头），在屏幕上展示他们将被要求获得许可的“位置”。您也可以借此机会告诉他们，如果他们在 10 秒内拒绝或未能接受许可（即他们忽略提示栏），将会发生什么。

我建议您不要默认显示 IP 位置，因为他们基本上“可能会说”我不同意让您知道我在哪里。然后你显示他们在哪里的大地图，这可能会吓坏一些点击拒绝的人！此外，它可能非常不准确。

“不请求许可请求原谅”的想法可能在 Biz dev 中有效，但在 UI 中无效，因为它们只是不会回来。

我会问自己是否真的需要高精度，因为它会耗尽用户电池，花费更长的时间，并且可能不会给你带来更多的收益，特别是如果你只需要它来松散地找出它们的位置。如果需要，您可以随时再次调用它以获得更准确的读数。

如果他们不点击拒绝或允许，则超时的概念可以通过 setTimeout 来实现。因此，一旦他们在您的叠加框上单击“好的，我已准备好单击允许”，请启动超时，如果它最终超时，然后按照您在上述步骤中告诉他们的操作。

通过使用这种方法，您可以强制用户允许或拒绝（忽略），无论哪种方式，它都会将控制权交还给您，并让用户完全了解情况。

尽管这不是特定于代码的答案，但从您的 JS 中可以清楚地看出，“代码实现帮助”并不是真正的问题。我希望如果没有别的，这能让你更多地思考你的用户体验。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T21:40:27.997

您可以使用此在线服务轻松获取 lat lng：

[http://dev.maxmind.com/geoip/javascript](http://dev.maxmind.com/geoip/javascript)

关于超时，我认为没有办法干扰浏览器的权限机制（例如，在一定秒数后关闭该权限弹出窗口）——尽管我很乐意被证明是错误的。您可以做的是设置一个计时器，并在三秒后获取基于 IP 的地理位置并将地图设置为它（或者，在 3 秒后刷新页面，并设置一个触发基于 IP 的地理而不是 HTML5 的 cookie geo，但如果你问我，那有点过分了）。

然后，如果他们给予许可，它将使用 HTML5 地理位置刷新地图（应该更准确）。您还可以将 IP 地理回退封装到一个函数中，如果他们没有 HTML5 地理位置或者他们点击拒绝，则可以使用它。

这是一个小提琴：http: [//jsfiddle.net/mfNCn/1/](http://jsfiddle.net/mfNCn/1/)

这是小提琴的粗略剪辑：

```
<script src="http://j.maxmind.com/app/geoip.js" charset="ISO-8859-1" type="text/javascript"></script>
...
var time_perm = window.setTimeout(get_by_ip, 3000);
...
function get_by_ip() {
    var lat = geoip_latitude();
    var lng = geoip_longitude();
    map_it(lat, lng);
}
...
function map_it(lat,lng) {
    // build your map here
} 
```

（我犹豫把整个代码块放在这里，因为它相当长，所以检查小提琴的其余部分和完整的实现）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T23:03:20.387

如果超时或用户拒绝请求，我会设置一个默认位置，如纽约，纽约 (40.7142，-74.0064)。如果用户拒绝请求，他们还必须期望您不会知道他们的位置，因此选择一个可理解的默认值是下一个最佳选择。

在不更改代码的情况下使用默认值可以通过`displayPosition({coords: {latitude: 40.7142, longitude: -74.0064}})`在两个地方调用来完成：

```
if (navigator.geolocation) {
    var timeoutVal = 10 * 1000 * 1000;
    navigator.geolocation.getCurrentPosition(
        displayPosition, 
        displayError,
        { enableHighAccuracy: true, timeout: timeoutVal, maximumAge: 0 }
    );
}
else {
    displayPosition({coords: {latitude: 40.7142, longitude: -74.0064}})
}
....
function handleError(error){
    switch(error.code)
    {
        case error.PERMISSION_DENIED: alert("User did not share geolocation data");break;  
        case error.POSITION_UNAVAILABLE: alert("Could not detect current position");break;  
        case error.TIMEOUT: alert("Retrieving position timed out");break;  
        default: alert("Unknown Error");break;  
    }
    displayPosition({coords: {latitude: 40.7142, longitude: -74.0064}});
} 
```

在[http://nearbytweets.com](http://nearbytweets.com)上，我使用函数“队列”来查找用户的位置，循环遍历队列，直到其中一个找到有效位置。最后一个函数返回纽约，纽约，这意味着所有其他尝试都失败了。这是稍微修改的代码示例：

```
var position_finders = [                                                                                                                                                                                                              
    function () {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(check_position, check_position);
            return;
        }   
        check_position();
    },  
    function () {
        check_position(JSON.parse(localStorage.getItem('last_location')));
    },  
    function () {
        $.ajax({
            url: 'http://www.google.com/jsapi?key=' + google_api_key,
            dataType: 'script',
            success: check_position
        }); 
    },  
    function () {
        check_position({latitude: 40.7142, longitude: -74.0064}, true);
    }   
],

check_position = function (pos, failed) {
    pos = pos || {}; 
    pos = pos.coords ? 
        pos.coords :
        pos.loader ?
        pos.loader.clientLocation :
        pos;

    if (typeof pos.latitude === 'undefined' || typeof pos.longitude === 'undefined') {
        position_finders.shift()();
        return;
    }   

    localStorage.setItem('last_location', JSON.stringify(pos));

    // using your code, I would call this:
    displayPosition(pos);
};

check_position(); 
```

以下是每个 position_finder 的作用：

1.  尝试 navigator.geolocation。
2.  尝试从 localStorage 中提取他们的最后一个位置
3.  使用[Google Loader](https://developers.google.com/loader/)通过 IP 查找位置
4.  使用纽约州纽约市

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-03T11:06:01.283

看看这个 tutsplus 示例[http://mobile.tutsplus.com/tutorials/mobile-web-apps/html5-geolocation/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/html5-geolocation/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T17:46:55.857

这可能会有所帮助： http: [//jsfiddle.net/sandesh2302/FghFZ/](http://jsfiddle.net/sandesh2302/FghFZ/) 我用它来做我的东西，效果很好。

前任：

```
 <!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />    
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>    

    <script type="text/javascript">
      function getLocation(){
        navigator.geolocation.getCurrentPosition(handleSuccess,handleError);
      }

      function initiate_watchlocation() {  
        if(watchProcess == null){
          watchProcess = navigator.geolocation.watchPosition(handleSuccess,handleError);
        }
      } 

      function stop_watchlocation() {  
        if(watchProcess != null){
          navigator.geolocation.clearWatch(watchProcess);
        }
      } 

      function handleSuccess(position){
        drawMap(position);
      }

      function handleError(error){
        switch(error.code)
        {
          case error.PERMISSION_DENIED: alert("User did not share geolocation data");break;  
          case error.POSITION_UNAVAILABLE: alert("Could not detect current position");break;  
          case error.TIMEOUT: alert("Retrieving position timed out");break;  
          default: alert("Unknown Error");break;  
        }
      }

      function drawMap(position) {
        var container = $('#map_canvas');
        var myLatLong = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
        var mapOptions = {
          center: myLatLong,
          zoom: 12,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(container[0],mapOptions);
        container.css('display','block');
        var marker = new google.maps.Marker({ 
          position: myLatLong,
          map:map,
          title:"My Position (Accuracy of Position: " + position.coords.accuracy + " Meters), Altitude: " 
            + position.coords.altitude + ' Altitude Accuracy: ' + position.coords.altitudeAccuracy
        });
      }

      function drawStaticMap(position){
        var container = $('#map_canvas');
        var imageUrl = "http://maps.google.com/maps/api/staticmap?sensor=false&center=" + position.coords.latitude + "," +  
                    position.coords.longitude + "&zoom=18&size=640x500&markers=color:blue|label:S|" +  
                    position.coords.latitude + ',' + position.coords.longitude;  

        container.css({
          'display':'block',
          'width' : 640
        });
        $('<img/>',{
          src : imageUrl
        }).appendTo(container);
      } 
    </script>
  </head>
  <body >
    <button id="getLocation">Find My Location</button>
    <div style="text-align:center">
      <button id="initWatch">Put Watch on Your Position</button>
      <button id="stopWatch">Stop Position Watching</button>
    </div>
    <div id="map_canvas" ></div>
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
    consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
    cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
    proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>

  </body>
</html> 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-02-07T07:58:48.817

从 UI 的角度来看，我将遵循以下步骤：

A）显示一个漂亮的文本框，解释接下来会发生什么（即“浏览器会要求您授予权限”、“单击允许”等）并要求按下按钮继续 B）像您一样显示地图现在

# c# - 水平装订图像

> ID：14642805
> 
> 赞同：0
> 
> 时间：2013-02-01T09:05:45.650
> 
> 标签：c#, xaml, windows-phone-8

我正在开发一个 Windows Phone 8 应用程序。

我正在尝试将一些图像数据绑定到 ListBox 中，但它以垂直方式显示：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <ListBox x:Name="picList">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <Image Source="{Binding picture}" Height="80" Width="80"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:28:14.270

没有。您应该将 ListBox 的 ItemsPanel 设置为具有水平方向的 StackPanel。它将负责 ListBox 中的 Items 排列。

```
<ListBox>
   <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
             <StackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
   </ListBox.ItemsPanel>
</ListBox> 
```

# c# - 选择列的数量是否会影响 linq 查询的效率？

> ID：14642810
> 
> 赞同：0
> 
> 时间：2013-02-01T09:06:17.267
> 
> 标签：c#, linq

根据这个帖子

[返回的列数会影响查询的速度吗？](https://stackoverflow.com/questions/852572/does-the-number-of-columns-returned-affect-the-speed-of-a-query)

我们应该避免`Select *`使用 sql

这是否也适用于 linq 查询？

**编辑：**

从`Select *`for linq 我的意思是

```
from a in mytable select a; 
```

我的意思是从选定的列中

```
from a in mytable select new{a.Prop1, a.Prop2}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:14:08.823

您不能`SELECT *`使用 LINQ。生成的查询始终具有要选择的所有列名。因此，为了确定该表的列，读取表的定义不会造成延迟。但是从磁盘读取所有列数据并通过网络发送数据会有延迟。因此，如果您只需要表格中的几列，那么最好只选择这些列：

```
var query = from p in db.Person
            select new { p.Id, p.Forename, p.Surname }; 
```

备注：使用 Linq to Object（内存中查询）你有相反的情况 - 你已经在内存中有对象。选择一组属性较慢，因为应该创建匿名对象，并且应该映射它的属性。但此操作不使用硬盘驱动器或网络，因此延迟无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:13:30.707

LINQ 查询（如果在数据集或集合上完成）发生在内存中。影响不如 DB 级别高，因为 DB 将数据存储在硬盘驱动器中。

由于您的 RAM 比 HDD 快，因此性能并不明显。但是将其应用于 LINQ 仍然不是一个坏主意

# image-processing - 使用较小系数的图像压缩

> ID：14642812
> 
> 赞同：1
> 
> 时间：2013-02-01T09:06:20.087
> 
> 标签：image-processing

我有兴趣找到使用 1024 个系数（即原始数据的 1/64）对 256x256 图像（即 65536 个系数）执行有损压缩的 matlab 代码。这将如何使用matlab完成？是否有为此目的的特定命令？

# c# - 更改所选行datagridview的背景颜色

> ID：14642816
> 
> 赞同：-5
> 
> 时间：2013-02-01T09:06:36.573
> 
> 标签：c#

在我的 datagridview 中，如果单击单元格，则应更改整行的背景选择颜色。请指导我这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:16:02.530

Usae the `DefaultCellStyle.SelectionBackColor` Alternativly 你可以看到[NanoTaboada 的答案](https://stackoverflow.com/a/3239597/395659)

看看[MSDN](http://msdn.microsoft.com/en-us/library/1yef90x0.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:09:30.470

请尝试以下代码，我认为它可能会有所帮助：

```
dgv.Rows[curRowIndex].DefaultCellStyle.SelectionBackColor = Color.Blue; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:49:07.710

感谢您的回复。我尝试了以下方法，它有效。

```
dgvDetails.Rows[e.RowIndex].DefaultCellStyle.SelectionBackColor = Color.Blue; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T07:20:45.583

您应该处理 DataGridView 的事件 RowStateChanged 并设置 SelectionBackColor。试试下面的代码：

```
 DataGVEmployee.RowStateChanged += new DataGridViewRowStateChangedEventHandler(DataGVEmployee_RowStateChanged);

    void DataGVEmployee_RowStateChanged(object sender, DataGridViewRowStateChangedEventArgs e)
        {
     if (e.StateChanged == DataGridViewElementStates.Selected)
                {
                    e.Row.DefaultCellStyle.SelectionBackColor = Color.Red;
                }
                else
                {
                    e.Row.DefaultCellStyle.SelectionBackColor = Color.White;

                }
} 
```

# xmpp - 通过 XMPP 传输大量图像

> ID：14642820
> 
> 赞同：2
> 
> 时间：2013-02-01T09:06:55.390
> 
> 标签：xmpp, file-transfer

我需要发送很多图像`XMPP`（用户用来实时发送和接收图像的应用程序）。现在`XMPP`支持发送二进制数据，客户端可以通过`XMPP`. 但是在服务器必须存储大量待处理图像以发送给当前离线的客户端的情况下，它可能会堆积很多负载。所以我正在考虑的是这个

1.  `user_A`使用该应用程序将图像发送到`user_B`.
2.  图像由`user_A`的应用程序上传到`Amazon S3`及其`bucket`并发`key`送到。`XMPP``user_B`
3.  的应用程序`user_B`获取图像的存储桶和密钥并开始从`S3`.

这是做事的好方法还是我应该使用其他东西？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T08:25:09.840

最好的方法是在 base64 的消息节中发送图像。

通过消息节发送它，确保实时或用户在线时接收到图片。避免使用 vCard，因为有大小限制（小于 200KB）

# javascript - 从函数返回第二个值最方便的方法是什么

> ID：14642821
> 
> 赞同：0
> 
> 时间：2013-02-01T09:06:56.750
> 
> 标签：javascript, conventions

不时使用 JavaScript，我尝试使用我习惯于使用另一种语言的模式。当函数结果是关于操作成功的时候，其中一个参数是对实际返回值的引用。

知道在 JavaScript 中没有引用传递，唯一的方法是使用对象（包括数组）。所以像

```
function getSomething(res)
{
  if (....)
  {
    res["value"] = 123;
    return true;
  } else
    return false;
} 
```

但这会带来一些不便。其中之一是当我实际使用这个函数时，我不应该忘记约定，所以我处理这个问题的自然方法是

```
 var value = {};  
  if (getSomething(value))
  {
    if (value == 123)
    {
    }
  } 
```

当我应该记住的正确方式是

```
...
if (value["value"] == 123)
... 
```

此外，如果我忘记使用 {} 初始化值，则会出现另一个错误。

所以，对于那些混合语言的人来说，这可能是一个问题。您认为这种返回模式方便的约定是什么？

**更新**：作为将出现在 C 程序中的实际代码片段的示例

```
if (getSomethingA(&res1) && getSomethingB(&res2) && getSomethingC(&res3)) {
     ...   
     v = res1*res2*res3;
     ...
} 
```

我不知道如何在没有“不太容易记住约定”或太多行的情况下在 JavaScript 中实现这样的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:09:12.500

为什么不创建一个响应对象并在其中包含一些字段用于状态和实际响应值。每次都返回该对象，而不是在 false 时返回 false 并在 true 时返回数组

**为了成功**

```
 response=new Object();
 response.status=true;
 response.value="Response string";
 return response; 
```

**对于失败**

```
response=new Object();
 response.status=false;
 response.value="Response string";
 return response; 
```

您还可以使用替代语法来避免`extra line`

```
response={status:true,value:"Response string"}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:02:22.983

如果您的首要任务是编写与您的 C 示例最相似的代码，您可以将您的`getSomething()`函数传递给一个对象，在这种情况下，您可以通过引用很好地操作它，同时返回一个单独的值（也可以查看[这个 fiddle](http://jsfiddle.net/du5NS/)）：

```
var someA = {}, someB={}, someC={};

if(getSomethingA(someA) && getSomethingB(someB) && getSomethingC(someC)) {
    var values = [someA.value, someB.value, someC.value];
    alert('Success...Values are:\n' + values.join('\n'));
} else {
    alert('Failure!');
}

function getSomethingA(refObj) {
    if(...) {
        refObj.value = 123;
        return true;
    } else {
        return false;
    }
}

function getSomethingB(refObj) {
    if(...) {
        refObj.value = 456;
        return true;
    } else {
        return false;
    }
}

function getSomethingC(refObj) {
    if(...) {
        refObj.value = 789;
        return true;
    } else {
        return false;
    }
} 
```

# visual-c++ - CComboBox MFC 控件出现问题

> ID：14642825
> 
> 赞同：0
> 
> 时间：2013-02-01T09:07:08.857
> 
> 标签：visual-c++, mfc

我在 MFC 中有一个带有下拉属性的组合框。

当我打开一个包含此组合框的对话框时，该组合框中的文本会突出显示。当我单击它时，就在此组合框的编辑字段中的最后一个字符旁边，假设我插入了一个字符 C，它写在末尾，但光标移动到开头。

这只会发生一次，如果我再次将光标移动到结束并开始写作，一切都很好。

当焦点丢失时，再次编辑它会导致上述问题。

同样在代码中，对此控件没有任何特殊处理。

我不明白，为什么会这样？

任何建议或建议都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:00:23.413

您可以在组合框的 ON_CBN_EDITUPDATE 处理程序中尝试此操作-

{

```
DWORD dwSel =  m_mycombo.GetEditSel();
// Only do this if no characters are selected
if( LOWORD( dwSel ) != LOWORD( dwSel ) ) return;

// code you have added handler for

m_mycombo.SetEditSel( LOWORD( dwSel ), LOWORD( dwSel ) ); 
```

}

# javascript - 如何创建顺序图像淡入淡出？

> ID：14642827
> 
> 赞同：1
> 
> 时间：2013-02-01T09:07:14.597
> 
> 标签：javascript, jquery, html, image, sequences

我正在尝试创建一个顺序图像淡入效果，它必须在最后一个数组图像元素的末尾停止。目前我有这个功能，它只淡入一个元素。

任何建议表示赞赏，谢谢

```
function x() {
     $('#myImage').fadeIn(600, function() {
         $(this).attr('src', images[0]).css({'display':'none'}).fadeIn(600);
     });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:19:52.977

通过添加索引参数和转义子句递归调用您的 x 方法

```
function x(imageIndex)
{
     $('#myImage').fadeIn(600, function(){
         $(this).attr('src', images[imageIndex]).css({display:'none'})
     });
     if(imageIndex < images.length)
     {
          x(imageIndex+1);
     }
} 
```

编辑说明：现在已经过测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:44:34.590

这是你想要的吗？

[jsfiddle](http://jsfiddle.net/vubDL/6/)

```
function x(imageIndex)
{
    if(!imageIndex) imageIndex = 0;
    $myImg.fadeIn(600, function(){
        if(imageIndex < images.length) {
            $(this).hide().attr('src', images[imageIndex]);
            x(++imageIndex);
        }
    });
}

x(); 
```

# java - 运行 JUnit 测试时未执行静态类初始化

> ID：14642828
> 
> 赞同：7
> 
> 时间：2013-02-01T09:07:23.147
> 
> 标签：java, static, junit, initialization, cobertura

我有一个带有一些静态字段的 java 类：

```
private static final PDMapCacheDAO REST_CACHE_DAO = 
    new PDMapCacheDAOImpl( Constants.REST_CACHE_NAME );

private static final PDMapCacheDAO HOLIDAYS_CACHE_DAO = 
    new PDMapCacheDAOImpl( Constants.HOLIDAYS_CACHE_NAME );

private static final String[] DATE_ARRAY = { "D", "0", "1", "2", "3", "C" }; 
```

JUnit 测试模拟了 REST_CACHE_DAO 和 HOLIDAYS_CACHE_DAO 的初始化行为：

```
final PDMapCacheDAOImpl holidaysMapCacheDAOImpl = mock(PDMapCacheDAOImpl.class);
final PDMapCacheDAOImpl restMapCacheDAOImpl = mock(PDMapCacheDAOImpl.class);

whenNew(PDMapCacheDAOImpl.class).withArguments(Constants.HOLIDAYS_CACHE_NAME).thenReturn(holidaysMapCacheDAOImpl);
whenNew(PDMapCacheDAOImpl.class).withArguments(Constants.REST_CACHE_NAME).thenReturn(restMapCacheDAOImpl); 
```

当测试单独执行时，测试按预期执行，但是当所有 JUnit 测试一起执行时（来自 Java 项目，带有 Run As --> Junit Test），测试会给出空指针异常。

我做了一些调试，发现问题（如标题中所述）是静态类未初始化 - 当调用静态方法时 REST_CACHE_DAO 和 HOLIDAYS_CACHE_DAO 为空。PDMapCacheDAOImpl 的构造函数没有被调用，也没有注入模拟，因此当我们使用它们时，它会给出一个 NPE。

我已经阅读了一些执行测试的工具，例如具有此错误的[eclemma](http://www.eclemma.org/)（某些静态类未初始化）。在这种情况下，解决方案是包含 -f 选项。

这就是 Eclemma 网站关于这个问题的说法：”

> 2.8\. EMMA 如何定义类覆盖率？首先，一个类需要被认为是可执行的，甚至被认为是覆盖范围。如果一个可执行类已被 JVM 加载和初始化，则认为它已被覆盖。类初始化意味着执行类静态构造函数（如果有）。请注意，即使没有执行任何其他方法，也可以覆盖一个类。当您使用不带 -f 选项的 emmarun 时，通常会看到少量已加载但未初始化的类。EMMA 报告类覆盖率，以便您可以发现测试套件似乎没有“触及”的类：它们可能是死代码或需要更多测试关注。

有趣的是我们没有使用 Eclemma，我们使用的是 Cobertura，但行为和错误是相同的。

有谁知道 Cobertura 中的这个错误以及如何解决它？（无论是在 Cobertura 还是以一般的方式）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:07:39.720

最后，我们决定改用 Singleton 并避免静态初始化的所有问题。我不得不对公司说问题仍然存在，并且将来可能会再次发生，但我等不及 SQA 团队解决它。

感谢您的所有回复和您的时间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:59:29.100

这是推测性的。

我猜`PDMapCacheDAO`是一个接口/抽象类，它`PDMapCacheDAOImpl`用于一些常量。

和类`PDMapCacheDAOImpl`实现/扩展`PDMapCacheDAO`。正确的？

当我发现这是一个技术上丑陋的解决方案（交互依赖）时，请`PDMapCacheDAOs`使用这些常量创建一个单独的接口。

那可能会解决问题。

# ruby-on-rails - Rails 路线更正：id

> ID：14642837
> 
> 赞同：1
> 
> 时间：2013-02-01T09:08:05.060
> 
> 标签：ruby-on-rails, routes

我是 Rails 的新手，我正在使用一个简单的应用程序，它具有以下路线：

```
 resources :mothers do
    resources :kids
end 
```

在 kids show.html.erb 页面上，我显示了孩子的母亲，并有一个链接返回到母亲的链接：

```
 Mother: <%= @kid.mother.full_name %>
      <%= link_to raw('View'), mother_path %> 
```

然而，这似乎重定向到一个路径mother/:id，其中:id 是mother 的:id 实际上是child 的:id。

如何更正路线，使其通过 ID 链接到孩子的正确母亲？

我试过了

```
<%= link_to raw('View'), mother_path(mother) %> 
```

它说“未定义的局部变量或方法”。我的控制器中是否缺少某些内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T09:09:28.427

```
<%= link_to 'View', mother_path(@kid.mother) %> 
```

或者

```
<%= link_to 'View', @kid.mother %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:47:03.357

我建议您阅读[ruby​​ on rails3 basic routing](http://jonathanhui.com/ruby-rails-3-routing)，您将了解路由正常工作的基本概念

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:55:35.767

无需将一种资源放入另一种资源中。

**儿童模特**

```
class Kid < ActiveRecord::Base
  belongs_to :mother
end 
```

**母亲模型**

```
class Mother < ActiveRecord::Base
  has_many :kids
end 
```

**你的路线.rb-**

```
resources :mothers 

 resources :kids 
```

**您的观点链接：**

```
<%= link_to 'View', {:controller => 'mother', :action => :show, :id => @kid.mother.id} %> 
```

# html - 如何更新 element.styles css

> ID：14642838
> 
> 赞同：2
> 
> 时间：2013-02-01T09:08:05.883
> 
> 标签：html, css

以下样式导致 div 元素未对齐：

![在此处输入图像描述](../Images/f0767c24f594467458450a354ac71897.png)

我不知道这种风格是在哪里设置的，我搜索了代码库，但这似乎是由浏览器设置的？

如何删除这种样式，当我使用 Chrome 删除“左”样式时，我得到了正确的对齐方式。这种风格是在哪里设置的？

这是设置样式的 div：

这是代码：

```
<div class="multipleColumns" > 
```

但是当我检查 Chrome 上的元素时，这是代码：

```
<div class="multipleColumns" style="left: auto; display: none;" 
```

所以看起来样式' style="left: auto; display: none;' 在运行时被注入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:13:16.110

`element.style`表示元素上存在未从样式表中读取的内联样式。

例如

**css**

```
span.mystyle{ color: blue; } 
```

**html**

```
<span class="mystyle" style="color: red;">test</span> 
```

这将导致**red** text 而不是**blue**。

内**联样式**将覆盖您的**样式表**样式，因此您需要确定将其添加到元素的位置并将其删除。

**更新**

根据您编辑的问题。似乎内联样式是通过 JavaScript 添加的。您将需要找出它在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:11:48.153

我认为样式是直接在 hmtl 代码中的元素样式块中设置的。也许你可以分享一个片段？

您是否尝试过其他浏览器？也许在安装了 firebug 的 Firefox 中尝试一下。虽然我认为这很奇怪，但可能是缓存问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:14:57.940

它是应用于元素的内联样式。

例如

`<asp:DropDownList style="background-color:blue;" ID="DropDownList1" runat="server">`

我有 CSS

```
 select 
    {
        border:0px;
        outline:0px;
    } 
```

如果您检查下拉列表，您会看到

```
element.style {
background-color: blue;
}
Matched CSS Rules
select {
border: 0px;
outline: 0px;
} 
```

编辑：为了摆脱`left:auto;`你可以添加你的 CSS 例如：

```
left:100px!important; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:27:40.780

您可以为此使用内联 css，因为内联 css 的优先级高于外部 css。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T12:30:59.603

样式是在 javascript 文件中设置的：

```
$('.multipleColumns').css('left', 'auto').hide(); 
```

# javascript - 呈现的共享视图中的 Javascript 函数看不到主视图中的对象/函数

> ID：14642842
> 
> 赞同：1
> 
> 时间：2013-02-01T09:08:21.837
> 
> 标签：javascript, asp.net-mvc

我有一个带有网格和过滤器的页面。过滤器在多个地方重复使用，这就是为什么决定将其移动到单独的视图中并使用`Html.RenderAction`.

页面完全加载后一切正常。但是，我想过滤事件的网格，在`$(document).ready`这里我遇到了一个问题——父视图在子视图中看不到对象和函数，反之亦然。

因此，当我在子视图中尝试这样的事情时：

```
 $(document).ready(function () {
        if(window.onFilterIsReady) {
            window.onFilterIsReady();
        }
    }); 
```

在主视图中：

```
function onFilterIsReady() {
    filter();
} 
```

`onFilterIsReady`找不到。

这是它应该工作的方式吗？

编辑：找出问题。上述场景中出现问题的原因是当调用 $(document).ready for child view 时，还没有加载父视图。因此，函数 onFilterIsReady 确实不存在。

当我从父母给孩子打电话时 - 一切正常。（以前，我在动态生成的变量名称中犯了一个错误，这就是我无法访问它的原因）

# c++ - 什么是兴趣 C ++ 03中的函数对象？

> ID：14642843
> 
> 赞同：3
> 
> 时间：2013-02-01T09:08:25.183
> 
> 标签：c++, callback, functional-programming

我正在用 C++ 编写一个围绕 http 服务器的包装器。我的编译器只支持 C++03 (gcc 4.1.2)，我不能使用 boost。

我想实现一个通用的回调机制来响应请求，能够注册一个函数或一个对象方法或一个静态对象方法。

（太）快速浏览`<functional>`函数对象（C++03，[http://www.cplusplus.com/reference/functional/](http://www.cplusplus.com/reference/functional/)）让我认为这是答案。

然而，`<functional>`函数对象似乎并不意味着提供一个通用的回调机制。

所以我想知道：`<functional>`C++03 中函数对象的用途是什么？他们是为了什么？他们应该比简单的函数指针提供什么真正的好处？还是 C++03 版本有缺陷，只有 C++11 版本真正有用？

[编辑] 根据我最初的理解，在我看来，C++03 函数对象只是对函数指针的无用包装。那我宁愿直接使用函数指针。纠正这个错误的分析是这个问题的重点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:30:51.230

我不太明白你的问题，`<functional>`是一个标题，而不是一个机制。标头提供了方便地制作函数对象的实用程序。举个简单的例子，假设您想调用变换，将一个范围的元素乘以另一个范围，并将结果存储在第三个范围内。你可以定义一个这样的函数：

```
double mult(double lhs, double rhs) { return lhs * rhs; }; 
```

然后像这样调用它：

```
std::transform(lhs.begin(), lhs.end(), rhs.begin(), out.begin(), mult); 
```

或者您可以使用`std::multiplies`已经为您定义的 ：

```
std::transform(lhs.begin(), lhs.end(), rhs.begin(), out.begin(), std::multiplies<double>()); 
```

还有很多其他的例子。你只需要有创意。C++11 lambdas 已经使许多设施`<functional>`过时，或者至少没那么有用，因为你可以在你的算法调用中定义你的函数。

> 我想实现一个通用的回调机制来响应请求

C++03 版本`<functional>`不能帮你解决这个问题。C++11 版本确实，带有`std::function`，改编自`boost::function`.

# android - Android 动态丰富背景

> ID：14642844
> 
> 赞同：0
> 
> 时间：2013-02-01T09:08:25.777
> 
> 标签：android, background

对于用户可以在白板上绘图的个人应用程序，我需要在图标上具有动态背景。

这是一种油漆桶，用户可以在其中选择自己喜欢的颜色。基本上，当用户单击按钮时，会出现一个颜色选择器对话框，他可以选择一个。我需要图标背景随着给定的颜色而改变。

我的按钮看起来像这样： ![在此处输入图像描述](../Images/e024ba7db5b180607eefa64a79688865.png)

当用户单击对话框中的有效按钮时，我需要将红色更改为新颜色。并在该按钮上添加一个边框，告诉用户该选项已被选中。

有没有办法以编程方式做到这一点？如果有怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:28:32.573

查看[Drawable#setColorFilter](http://developer.android.com/reference/android/graphics/drawable/Drawable.html#setColorFilter%28int,%20android.graphics.PorterDuff.Mode%29)。

您实际上可以使用：

```
Drawable.setColorFilter( 0xffff0000, Mode.MULTIPLY ). 
```

这会将白色像素设置为红色，其中颜色格式为 ARGB。

如果它不起作用，请尝试更粗暴的解决方案：[https ://stackoverflow.com/a/1715673/821054](https://stackoverflow.com/a/1715673/821054)

# android - 关键错误的片段不再存在

> ID：14642847
> 
> 赞同：3
> 
> 时间：2013-02-01T09:08:30.443
> 
> 标签：android, android-asynctask, android-fragments, android-viewpager

我有一个包含三个选项卡的应用程序（使用片段的 TabWidget）。每个选项卡都会打开一个片段，其中包含一个基于 FragmentStatePagerAdapter 的视图分页器。视图寻呼机使用异步任务从在线服务器获取的项目填充。

我的问题：

*   我单击选项卡 1，然后它开始加载项目（使用 asyncTask）
*   然后我单击选项卡 2，它再次开始加载。
*   当我再次单击选项卡 1 时，应用程序强制关闭，堆栈跟踪如下所示：

```
E/AndroidRuntime(29658): FATAL EXCEPTION: main
E/AndroidRuntime(29658): java.lang.IllegalStateException: Fragement no longer exists for key f1: index 1
E/AndroidRuntime(29658):        at android.support.v4.app.FragmentManagerImpl.getFragment(FragmentManager.java:564)
E/AndroidRuntime(29658):        at android.support.v4.app.FragmentStatePagerAdapter.restoreState(FragmentStatePagerAdapter.java:211)
E/AndroidRuntime(29658):        at android.support.v4.view.ViewPager.onRestoreInstanceState(ViewPager.java:1220)
E/AndroidRuntime(29658):        at android.view.View.dispatchRestoreInstanceState(View.java:11910)
E/AndroidRuntime(29658):        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2584)
E/AndroidRuntime(29658):        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2590)
E/AndroidRuntime(29658):        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2590)
E/AndroidRuntime(29658):        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2590)
E/AndroidRuntime(29658):        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2590)
E/AndroidRuntime(29658):        at android.view.ViewGroup.dispatchRestoreInstanceState(ViewGroup.java:2590)
E/AndroidRuntime(29658):        at android.view.View.restoreHierarchyState(View.java:11888)
E/AndroidRuntime(29658):        at android.support.v4.app.Fragment.restoreViewState(Fragment.java:417)
E/AndroidRuntime(29658):        at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:933)
E/AndroidRuntime(29658):        at android.support.v4.app.FragmentManagerImpl.attachFragment(FragmentManager.java:1264)
E/AndroidRuntime(29658):        at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:672)
E/AndroidRuntime(29658):        at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1444)
E/AndroidRuntime(29658):        at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:429)
E/AndroidRuntime(29658):        at android.os.Handler.handleCallback(Handler.java:615)
E/AndroidRuntime(29658):        at android.os.Handler.dispatchMessage(Handler.java:92)
E/AndroidRuntime(29658):        at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(29658):        at android.app.ActivityThread.main(ActivityThread.java:4745)
E/AndroidRuntime(29658):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(29658):        at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(29658):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
E/AndroidRuntime(29658):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
E/AndroidRuntime(29658):        at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(17922):   Force finishing activity com.abello.news/.MainActivity 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-29T19:00:33.280

我知道这花了很多时间，但没有正确的答案。

尝试使用`FragmentPagerAdapter`而不是`FragmentStatePagerAdapter`. 因为后者用于保存状态并且不更新某些数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-11T14:20:32.667

你的问题是这一行：

```
Category category1Adapter = new Category1Adapter(getChildFragmentManager(),category1Events.size()); 
```

而不是使用`getChildFragmentManager()`你必须使用`getFragmentManager()`以确保在重新创建屏幕时片段仍然存在。

# python - 没有pickle的用于序列化的Python类设置

> ID：14642848
> 
> 赞同：1
> 
> 时间：2013-02-01T09:08:35.003
> 
> 标签：python, oop, file-io, constructor

### 设想

我在 python 中寻找一种面向对象的方法，它可以将类的实例保存在数据文件中，并在稍后的时间点再次加载它。我目前的方法如下所示：

```
class A(object):
    def __init__(self, ComplexParam1, ComplexParam2):
        self.ComplexParam1 = ComplexParam1
        self.ComplexParam2 = ComplexParam2

    @staticmethod
    def Create(EasyParam1, EasyParam2):
        #do some complex calculation to get ComplexParam1 and ComplexParam2 from EasyParam1 and EasyParam2
        return A(ComplexParam1, ComplexParam2)        

    def Save(self, Filename):
        #write ComplexParam1 and ComplexParam2 to disc

    @staticmethod
    def Load(Filename):
        #read ComplexParam1 and ComplexParam2 and call constructor
        return A(ComplexParam1, ComplexParam2) 
```

正如您所看到的`ComplexParam1`，并且`ComplexParam2`是要计算的参数，并且不用于对象的第一次创建，`A`因为它们获取起来非常复杂，而`EasyParam1`和`EasyParam2`是“已知”参数。把它想象成`EasyParameters`是整数，而`ComplexParameters`是基于构造的大型矩阵`EasyParameters`

所以我使用上面的设置`Save`和`Load`对象来和来自文件，其中`Create`使用构造函数`ComplexParam1`，并且`ComplexParam2`存储在文件中，不需要再次计算。

### 问题

到目前为止，上面显示的方法对我来说效果很好。然而，当这个方案也与类继承一起使用时，问题就出现了。所以我正在寻找一个更好、更清洁的解决方案来解决我的问题。

在 C++ 中，我会重载构造函数并使两个可能的类创建可用，但这在 python 中不受支持。

任何帮助，链接和建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:16:46.267

我认为这是[`@classmethod`](http://docs.python.org/3/library/functions.html#classmethod)装饰师的情况。例如，如果您将`Load`方法更改为以下内容：

```
 @classmethod
    def Load(cls, Filename):
        # Do stuff
        return cls(ComplexA, ComplexB) 
```

然后你可以覆盖构造函数：

```
class B(A):
    def __init__(self, complexA, complexB):
        # Whatever you want, including calling the parent constructor 
```

And, finally, you could call `B.Load(some_file)` which would invoke `B.__init__`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:17:05.697

Overloading in not needed, just use a `classmethod` for alternative contructor methods. Look at [this questions](https://stackoverflow.com/questions/682504/what-is-a-clean-pythonic-way-to-have-multiple-constructors-in-python) and it's answers.

```
class A (object):

    @classmethod
    def Load(cls, Filename):
        #read ComplexParam1 and ComplexParam2 and call constructor
        return cls(ComplexParam1, ComplexParam2) 
```

By using the cls parameter for the class, it works nice with inheritance.

# java - BoundedFifoBuffer 和 CircularFifoBuffer 的区别？

> ID：14642864
> 
> 赞同：3
> 
> 时间：2013-02-01T09:09:15.347
> 
> 标签：java, collections

在[apache 公共集合](http://commons.apache.org/collections/apidocs/index.html?org/apache/commons/collections/buffer/package-summary.html)中有什么区别：

1.  循环先进先出缓冲器
2.  有界先进先出缓冲区

好的，第一个在满时删除最旧的条目，另一个以相同的顺序删除条目，就像进来的一样。但不是一样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T09:24:03.507

`CircularFifoBuffer`延伸`BoundedFifoBuffer`。它只覆盖**单个**方法 - `add`：

```
public boolean add(Object element) {
    if (isFull()) {
        remove();
    }
    return super.add(element);
} 
```

所以**唯一的**区别是`BoundedFifoBuffer`当它满时抛出异常并且你尝试添加新元素同时`CircularFifoBuffer`删除最旧的元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T09:16:20.290

假设您将 n 个项目放入索引为 1,2,3--n 的缓冲区中

现在在 CircularFifoBuffer 和 BoundedFifoBuffer 中，空间已满。

在有界缓冲区中，由于第 n 个元素已满，它会说整个缓冲区已满。

在 CircularFifoBuffer 中，如果缓冲区已满，则丢弃最近最少添加的元素，以便插入新元素。因此，如果第 n 个元素已满，它将把下一个元素放在第一个索引中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T09:28:57.153

当**BoundedFifoBuffer**已满时，它会阻止插入另一个元素。但是在**CircularFifoBuffer**中，一旦它满了，它就会删除第一个。

# php - phpExcel如何将设置传递给类

> ID：14642865
> 
> 赞同：3
> 
> 时间：2013-02-01T09:09:18.583
> 
> 标签：php, caching, memory-leaks, phpexcel

基本上，由于内存问题（不断耗尽），我试图启用单元缓存，它是一个相当大的电子表格。从我读过的内容来看，在线单元缓存是一个很好的方法

从我在网上找到的示例来看，它看起来像这样

[单元缓存和内存泄漏](http://phpexcel.codeplex.com/discussions/234530)

[stackoverflow - 修复内存错误](https://stackoverflow.com/questions/3537604/how-to-fix-a-memory-error-in-php)

```
$oExcel = new PHPExcel();
$cacheMethod = PHPExcel_CachedObjectStorageFactory::cache_to_phpTemp;
$cacheSettings = array( 'memoryCacheSize' => '512MB');

PHPExcel_Settings::setCacheStorageMethod($cacheMethod,$cacheSettings); 
```

上面的问题是我没有用设置设置excel对象吗？

```
$oExcel->setCacheStorageMethod($cacheMethod,$cacheSettings); // this returns method not found error 
```

我想我只是初始化错了吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T09:27:05.347

它在开发人员文档的第 4.2.1 节中进行了描述：标题为“单元缓存”的部分；并且您需要在实例化或加载 PHPExcel 对象**之前设置单元缓存。**

setCacheStorageMethod() 不是 PHPExcel 类的方法，因为您尝试在此行中使用：

```
$oExcel->setCacheStorageMethod($cacheMethod,$cacheSettings); 
```

采用

```
$cacheMethod = PHPExcel_CachedObjectStorageFactory::cache_to_phpTemp;
$cacheSettings = array( 'memoryCacheSize' => '512MB');
PHPExcel_Settings::setCacheStorageMethod($cacheMethod,$cacheSettings);

$oExcel = new PHPExcel(); 
```

and the new PHPExcel object will automatically use the configured cache setting (ie phptemp)

# plugins - 在 TYPO3 中调用两次主函数

> ID：14642866
> 
> 赞同：0
> 
> 时间：2013-02-01T09:09:19.847
> 
> 标签：plugins, typo3, frontend

我使用 kickstarter 创建了一个 TYPO3 插件。我有一个`pi1`包含`class_pi1.php`类的文件夹。我的问题是，每当我加载这个类时，它的主要功能都会执行两次。在这种情况下可能会出现什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:31:03.350

我用另一种方式解决了。

我使用的方法是 $this->cObj->convertToUserIntObject(); 并且看起来在使用时，该插件被第二次执行。

所以，我没有让他做他想做的事，而是在方法结束后阻止他。

```
$this->cObj->convertToUserIntObject();

if ($this->cObj->doConvertToUserIntObject) {
     return;
} 
```

该模块仍然第二次执行，但至少，我没有对数据库进行任何请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T04:57:42.540

解决了这个问题。

t3lib_extMgm::addPItoST43($_EXTKEY, 'pi1/class.tx_besijobs_pi1.php', '_pi1', 'list_type', 1);

必须将“1”更改为“0”。

t3lib_extMgm::addPItoST43($_EXTKEY, 'pi1/class.tx_besijobs_pi1.php', '_pi1', 'list_type', 0 );

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T04:31:10.160

确保你已经嵌入了这个元素一次。如果 ext 是由 kickstarter 创建的，打字稿必须没问题。如果 plugin.tx_myext_pi1 是一种 USER 类型，它总是呈现一次，如果嵌入一次。

“每当我加载这个类时” - “加载”一个类是什么意思？你用它做什么？

# node.js - 骨干.js + node.js - express.js

> ID：14642868
> 
> 赞同：4
> 
> 时间：2013-02-01T09:09:24.743
> 
> 标签：node.js, backbone.js, architecture, socket.io

我正在学习构建单页应用程序 (SPA) 所需的所有技术。总而言之，我想将我的应用程序实现为单独的层，其中前端仅使用 API Web 服务（通过 socket.io 的 json）与后端通信。前端基本上是 Backbone.js（+ html5、css3、jquery），后端使用 node.js（+ mongodb、express 等）。决定使用node是因为socket.io。

我的问题可能听起来很基本，但我还是不明白。

1.  在这个配置上，有必要使用 Express.js 吗？据我所知，Express.js 的主要功能是提供 Web API 和通过路由服务网页。但是由于我想用 Backbone.js 作为 SPA 构建一个完整的前端，并通过 Socket.io 提供 CRUD，所以我的项目需要 Express.js 吗？

2.  在这个配置中，节点服务器只会监听 socket.io crud 命令，对吧？在这里，不需要使用 Express.js 作为 REST API 服务器，对吧？

3.  如果我只想要 Web API 和实时 CRUD 多播操作（就像您可以使用 Socket.io 一样），是否必须使用 Node.js 作为后端，或者我可以使用其他技术？

我希望有人能给我一些答案，并提前非常感谢您的时间和支持。

对于编辑：几个月以来，我在接受答案方面遇到了一些大问题。我总是接受它们，但 stackoverflow 总是表明我不接受。如果一些stackoverflow编辑器可以帮助我解决这个问题，我真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:22:21.340

> 在这个配置上，有必要使用 Express.js 吗？

不，socket.io 的唯一要求是监听[`http.Server`](http://nodejs.org/api/http.html#http_http_createserver_requestlistener)。

> 在这个配置中，节点服务器只会监听 socket.io crud 命令，对吧？

可能。您仍然需要能够提供 SPA 开始发出 WebSocket 请求所需的任何（静态）文件。

> [...] 是否必须使用 Node.js 作为后端，或者我可以使用其他技术？

不必要。socket.io 库确实需要 Node.js。[*但是，如果您只需要它的功能，“其他语言*](https://github.com/learnboost/socket.io/wiki)”下还列出了其他选项。

# java - 我怎样才能使它与java泛型一起工作

> ID：14642869
> 
> 赞同：3
> 
> 时间：2013-02-01T09:09:25.360
> 
> 标签：java, generics, class-design

假设我有这个接口和具体：

```
public interface MeterValue {}
public class MeterValueA implements MeterValue {}
public class MeterValueB implements MeterValue {}

public interface ReportBuilder<T extends MeterValue> {} 
public class ReportBuilderA implements ReportBuilder<MeterValueA> {}
public class ReportBuilderB implements ReportBuilder<MeterValueB> {} 
```

我有一个全局实例：

```
ReportBuilder<MeterValue> reportBuilder; 
```

我想改变 reportBuilder 实例如下：

```
if (isA())
   reportBuilder = new ReportBuilderA();
else
   reportBuilder = new ReportBuilderB();

reportBuilder.desiredMethod(); 
```

这样做我得到“类型不匹配”。如何获得我想要的功能？或者我怎样才能改进我的课堂设计，使其更加灵活？

**编辑：**

通配符？解决了这个问题。但也引入了其他问题。假设我在界面中有这个方法：

```
public interface ReportBuilder<T extends MeterValue> {
     public String getStuff(List<T> values);
} 

public class ReportBuilderA implements ReportBuilder<MeterValueA> {
     @Override
     public String getStuff(List<MeterValueA> values) { return "A"; }
}

public class ReportBuilderB implements ReportBuilder<MeterValueB> {
     @Override
     public String getStuff(List<MeterValueB> values) { return "B"; }
} 
```

假设我有这个实例：

```
 ReportBuilder<? extends MeterValue> reportBuilder = new ReportBuilderA(); 
```

和：

```
 List<? extends MeterValue> list = new ArrayList<MeterValueA>();
  String s = reportBuilder.getStuff(list); 
```

由于列表包含通配符，因此对 getStuff(...) 的调用将不起作用。一种解决方法是将 ReportBuilder 接口方法修改为：

```
public String getStuff(List<? extends MeterValue> values); 
```

但后来我打破了具体的 ReportBuilders。（列表也是一个全局实例，内容可能会有所不同）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:14:21.537

我认为您应该将报告生成器变量声明为：

```
ReportBuilder<? extends MeterValue> reportBuilder; 
```

这允许`reportBuilder`有任何`ReportBuilder`类，具有泛型类型`MeterValue`，或任何实现接口的类。

顺便说一句，如果您还不熟悉它，创建`ReportBuilder`实例似乎类似于[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)，可能值得一读。（当然还有其他模式。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T09:15:33.130

```
public interface MeterValue {}

public class MeterValueA implements MeterValue {}

public class MeterValueB implements MeterValue {}

public interface ReportBuilder<T extends MeterValue> {
    void desiredMethod();
}

public class ReportBuilderA implements ReportBuilder<MeterValueA> {
    @Override
    public void desiredMethod() {}
}

public class ReportBuilderB implements ReportBuilder<MeterValueB> {
    @Override
    public void desiredMethod() {}
}

void f() {
    ReportBuilder<? extends MeterValue> reportBuilder = null;

    if (Math.random() > 0.5)
        reportBuilder = new ReportBuilderA();
    else
        reportBuilder = new ReportBuilderB();

    reportBuilder.desiredMethod();
} 
```

其中：`ReportBuilder<? extends MeterValue>`表示泛型参数可以扩展*MeterValue*接口。

请参阅[教程](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)以阅读有关通配符声明的更多说明。

* * *

注意：请在您的特定情况下查看此代码以避免[并行继承](http://sourcemaking.com/refactoring/parallel-inheritance-hierarchies)气味。如果要添加一些新的 MeterValue 你应该添加 ReportBuilder 这应该意味着你可能有这个问题。

* * *

**编辑：**

您不能将具有 MeterValue 子类型的数组传递给至少需要 MeterValueA 的 ReportBuilderA。它不是类型安全技术。继承后实例化具体类更适合 C++。在 Java 中，最好不要在继承后更改受限类型。

可能的解决方案，可能适用于您的具体案例：

1) MeterValue 使用单一接口。所有差异都转移到 ReportBuilder 继承。这意味着您在项目中具有并行继承。

2）`List<MeterValueA>`调用`getStuff()`方法时使用具体。所有用于处理的共享逻辑`List<MeterValueA>`并`List<MeterValueB>`移至带有签名的方法：`public void sharedLogic(List<? extends MeterValue> list)`

# php - 事件管理器 wordpress 插件预订表格短代码不起作用

> ID：14642870
> 
> 赞同：0
> 
> 时间：2013-02-01T09:09:25.737
> 
> 标签：php, wordpress, events

我正在使用活动管理器版本 3.0.97，我想在我的客户页面中使用预订表格。我正在使用旧版本，因为我有定制的东西。

```
#_ADDBOOKINGFORM 
```

我试过了

```
echo do_shortcode('[#_ADDBOOKINGFORM]'); 
echo do_shortcode('#_ADDBOOKINGFORM'); 
```

即使我调用了这个函数。

```
em_add_booking_form() ; 
```

但没有运气。我究竟做错了什么 ？

注意：我已经定制了一些东西，这就是我不使用最新版本的原因。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-20T07:29:12.917

这可能很旧，但希望这有助于其他面临同样问题的开发人员，您可以尝试类似的方法。

```
do_shortcode( '[event post_id="POST_ID"]#_ADDBOOKINGFORM[/event]' ); // replace POST_ID with current post ID 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:19:24.313

这些占位符仅在为给定事件启用预订时以及在事件管理器设置页面中显示。空间占位符将默认为 0

# debugging - Domino Designer：寻找隐藏的@Prompt

> ID：14642875
> 
> 赞同：1
> 
> 时间：2013-02-01T09:09:32.647
> 
> 标签：debugging, lotus-domino, prompt

来了一个尴尬的问题：

出于调试目的，我使用`@Prompt`语句（因为 Domino Designer 中没有公式语言的调试器）。

但是现在我遇到了一个问题，当打开一个名为“PartnerContact”的特定表单时，总是会出现一个消息框。

![（CONTACT_NOMINATION 是字段的名称）](../Images/f3c8247be531b5868425b136ee88e16c.png)
（CONTACT_NOMINATION 是字段的名称）

我正在手动查找此表单的整个代码（以及我对其进行了一些修改的每个表单）以及包含的搜索

![在此处输入图像描述](../Images/f139855c82b47c1e65f4b7055f846620.png)

我使用以下每个搜索字符串执行了搜索：
`@Prompt`
`Msgbox`
`Messagebox`
`System.out`

但是没有他们，我有任何搜索结果。

我对这个消息框感到绝望。你有什么暗示这个该死的盒子可能藏在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:49:07.400

为未来。有一个非常有用的选项：`File->Application->Design Synopsis...`. 添加所有设计元素并搜索其所有属性和代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:11:52.833

There could be a couple of issues here to check. The Design Synopsis that @pstr mentions should work, unless it is corruption or duplicated design element.

First try using the search in designer, rather then form itself.

![Search Icon](../Images/2e2c347c2a9ef56a28742a6720df743f.png)

Search for "CONTACT_NOMINATION" and "PartnerContact".

![search dialog](../Images/19ebf931182205f2aaaf727d3a0a6f7d.png)

This will display the results in DXL format, so you can check the source, or manually go to the related objects yourself.

another option is to right click on the related design element and "Edit with DXL". It will allow you to see any corruption, for example fields which are not rendering in the UI.

![edit with dxl](../Images/8097a4d981d1eba8f0835c0bebf05f68.png)

Lastly you can try using NotesPeek as it can easily check for design duplication. You can pick it up at the following link.

[http://www-01.ibm.com/support/docview.wss?uid=swg24005686](http://www-01.ibm.com/support/docview.wss?uid=swg24005686)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T09:36:10.850

我终于找到了。

视图中的一个字段是`Dialog List`. 可用选项在`field properties`-> `controls`-> `Choices`->下计算`Use formula for choices`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T12:26:10.593

仅供参考，看看 TeamStudo Analyzer - 非常好的和简单的产品，可以搜索（并找到 ;-) ）您设计元素中的所有内容。（PS：它不是免费的，我不为 TeamStudio 工作！）

# c# - 扩展 .net TabControl 的一些问题

> ID：14642877
> 
> 赞同：3
> 
> 时间：2013-02-01T09:09:36.190
> 
> 标签：c#, winforms

我扩展了 TabControl 以支持单个选项卡的关闭按钮。看这个截图：

![在此处输入图像描述](../Images/90170bb13e60c8120cedc7aebe74952f.png)

**问题 1**

将鼠标悬停在关闭按钮上不会立即触发按钮的 MouseHover 事件。大约 200 毫秒的小延迟导致悬停状态的图像显示延迟。如果我将鼠标悬停在按钮上的速度足够快，则该事件根本不会触发。

我使用以下代码将按钮放在 TabControl 上（使 Button 成为 TabControl 的子项）：

```
[DllImport("User32", CharSet = CharSet.Auto, ExactSpelling = true)]
public static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndParent);

...

SetParent(closeButton.Handle, this.Handle); 
```

顺便说一句，这是不可能的：

```
closeButton.Parent = this; // this == instance of TabControl 
```

它会导致异常，这就是我使用 API 调用的原因。

知道为什么 MouseHover 会延迟吗？

**问题 2**

关闭按钮不能使用具有透明背景的图像，因为背景将显示为系统控制颜色。我确实读过BackColor设置为透明的控件将采用父控件的BackColor。我的父控件是没有 BackColor 属性的 TabControl 实例。

有没有办法将 TabControl 的 BackColor 动态设置为透明？也许用winapi调用？

**问题 3**

正如您在屏幕截图中看到的那样，选项卡文本上缺少填充，导致关闭按钮覆盖文本。如何在不使用诸如在文本中添加一些空格之类的肮脏技巧的情况下解决此问题？

要获取选项卡标题项的位置，我使用 winapi 调用：

```
WinApi.RECT myRect = new WinApi.RECT();
WinApi.SendMessage(this.Handle, WinApi.TCM_GETITEMRECT, (IntPtr)this.TabPages.IndexOf(tab), ref myRect);
Rectangle realRect = new Rectangle(myRect.Left, myRect.Top, myRect.Width, myRect.Height); 
```

也许有一种方法可以通过 api 调用来设置大小？可以设置 TCM_SETMINTABWIDTH，但这会更改所有选项卡的最小宽度。

**问题 4**

要定义哪个选项卡是可关闭的，我目前使用自定义方法：

```
ExtendedTabControl.SetTabCloseable(TabPage tab) 
```

实现需要如何才能在 DesignMode 中工作？扩展 TabPage 类（添加属性“Closeable”），然后通知 VisualStudio（通过注释？）我的自定义 TabPage 类应该在 DesignMode 中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T12:50:06.500

**问题 1** 假装是一个按钮可能比实际上是一个按钮要容易得多。将选项卡控件的 DrawMode 设置为 OwnerDrawFixed 并使用 DrawItem 事件绘制文本，然后绘制按钮。由于您已经完全控制了绘图，因此您可以剪切文本绘图并绘制透明图像等。

要模拟按钮，您需要处理 TabControl 的 MouseDown/MouseMove/MouseUp 事件

由于您没有任何实际按钮，因此您需要维护一个矩形列表，这些矩形是您绘制的按钮的边界。在鼠标事件中，你可以测试你是否在一个按钮上并采取相应的行动。

我的结果（用 Delphi 编写，所以它的代码对你没有太大帮助）最终看起来像这样： ![带有关闭按钮的选项卡控件](../Images/c8c6044bbc7ed3c267215521714aa301.png)

按钮的图像最终通过绘制事件中的调用由窗口绘制。

**问题 2** 当您不使用真正的按钮时，这会消失。

**问题 3** 我知道的唯一方法是使用选项卡控件的 ItemSize 属性使选项卡足够宽以容纳文本。

**问题 4** 这成为选项卡本身的布尔属性，所以是的。如果您希望每个选项卡独立完成，则需要处理自己的选项卡页。这本身就是一个话题，因此对于另一个问题可能是最好的，而不是将其全部归为一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T02:37:51.787

```
protected override void OnHandleCreated(EventArgs e) {
  SendMessage(NativeMethods.TCM_SETPADDING, 0, 
              NativeMethods.Util.MAKELPARAM(padding.X, padding.Y));
} 
```

# android - 在 WebView 上绘图时无法处理事件

> ID：14642886
> 
> 赞同：1
> 
> 时间：2013-02-01T09:10:09.200
> 
> 标签：android, android-webview

我的 reqm 是在 android 的 HTML 页面上绘制一些东西。所以我在布局中有一个 WebView，它正在加载 HTML url，然后添加另一个在我的布局上绘制画布的视图。问题是处理事件，以便在触摸时它会绘制以及滚动 HTML 页面。对我来说，滚动或绘画作品。两者没有一起工作。

```
rl.addView(myView); //To add View extended class on which to draw canvas on relativelayout
rl.addView(webview); //To add HTML page on relativelayout 
```

两者都没有一起工作。两者中的任何一个同时工作。请帮我。

我已经看到[了这个链接](https://stackoverflow.com/questions/12900157/android-draw-canvas-on-webview)，但没有解决我的问题。

提前致谢

# javascript - 如何在移动设备上创建模态导航菜单并防止正文滚动？

> ID：14642887
> 
> 赞同：6
> 
> 时间：2013-02-01T09:10:22.323
> 
> 标签：javascript, android, mobile, scroll, modal-dialog

我寻找并测试了许多解决方案，但我还不能让它工作。我希望子导航菜单（模态）能够在显示时滚动，但不能滚动正文。

我试过了 ：

1：当模式打开时，Javascript 将 CSS 属性更改为“固定”：

```
var main = document.getElementById('main');
main.setAttribute("style", "position: fixed;"); 
```

**问题：**如果您在打开模式时正在滚动页面，页面会上升（因为“固定”也意味着您不能有滚动条）

2：当模式打开时，Javascript 将 CSS 属性更改为“溢出隐藏”：

```
document.body.setAttribute("style", "overflow: hidden;"); 
```

**问题：**在移动设备上不起作用，仍然滚动（我使用 android）。

3：Javascript禁用触摸事件：

```
var main = document.getElementById('main');
main.addEventListener('touchstart', function(e){ e.preventDefault(); });
main.addEventListener('scroll', function(e){ e.preventDefault();});
main.addEventListener('touchmove', function(e){ e.preventDefault();}); 
```

**问题：**除非您从子导航菜单中开始触摸，否则有效。

看到这个更好地理解我的意思：http: [//i45.tinypic.com/ajl3rt.png](http://i45.tinypic.com/ajl3rt.png)

那么，当显示覆盖菜单时，如何防止移动设备中的正文滚动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T00:27:11.997

我有一个类似的问题。通常溢出：隐藏在桌面上完成此操作。对于移动设备，您还需要应用固定位置。因此，当您的对话框处于活动状态时，将“.noscroll”类添加到正文：

```
body.noscroll{
overflow:hidden;
position:fixed;
} 
```

# linux - Impty grep 导致循环

> ID：14642891
> 
> 赞同：1
> 
> 时间：2013-02-01T09:10:36.027
> 
> 标签：linux, file, unix, grep

我对 shell 脚本很陌生，所以这可能很容易回答

我在一个程序中发现了一些有趣的基因，输出是数据文件interest.txt

```
Nrg3
Srebf1
Cacna2d3
LOC100759725
LOC100761135
LOC100771217
LOC100769029 
```

我有另一个数据文件（unique_saml），其中包含大部分这些名称以及其他信息，例如

```
Nrg3    neuregulin_3    XM_003503005.1 
```

所以我想编写一个脚本来获取我的结果并从我的数据文件中 grep 其余数据

```
"#!/bin/sh
for ((  i = 0 ;  i <= 7; i++  ))
do  
cat interest.txt | head -$i | tail -1 | gawk '{print $1}' > tempname

name=`awk '{print $1 }' < tempname`

grep `echo $name` unique_saml >> results.txt
done 
```

但是程序停止并且永远不会结束，因为`i = 4 = LOC100759725`在 unique_saml 文件中找不到 = grep 返回空。

我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T12:33:10.200

如果您想遍历文件`interest.txt`并添加更多信息（如果可用），您可以执行以下操作：

```
cat interest.txt | while read line
do
   echo -e "$line\t`grep $line unique_saml | awk '{print $2 "\t" $3}'`"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:18:47.190

`grep`可以使用以下方式从文件中读取模式`-f`：

```
$ grep -f interest.txt unique_saml
Nrg3    neuregulin_3    XM_003503005.1 
```

如果您希望其中的值`interest.txt`仅匹配 中的第一列`unique_saml`：

```
$ sed 's/^/^/' interest.txt | grep -f - unique_saml
Nrg3    neuregulin_3    XM_003503005.1 
```

# iphone - cocos2d-iphone：iPhone Retina 纹理导致 iPad 上的低 fps

> ID：14642894
> 
> 赞同：-1
> 
> 时间：2013-02-01T09:10:46.977
> 
> 标签：iphone, objective-c, ipad, cocos2d-iphone, retina-display

我想请你帮忙，我有点迷路了。我正在升级我的游戏，以便它可以通用。我正在使用 cocos2d-iphone 1.0.1 版。我扩展了 CCDirectorIOS 类，因此它将 iPhone 分辨率缩放到 iPad（只有宽度，没有拉伸）。它工作得几乎完美。我通过以下方式获得稳定的 60 fps：

*   3GS iPhone/iPod，普通纹理，带 Retina 的 4G iPod/iPhone
*   纹理。

这是 akward 的部分：

*   iPad 1/2/3/mini，iPhone 应用程序（非通用），Retina 纹理 = 稳定 60 fps，
*   iPad 1/2 和 mini，应用程序设置为 Universal，Retina 纹理 = 20 fps，
*   正常纹理为 60 fps，而具有 Retina 纹理的 iPad 3 = 稳定的 60 fps。

因此它可以在具有视网膜纹理的 20 fps 的低分辨率 iPad 上运行。我想不通。

这是修改后的 CCDirectorIOS 类的源代码（仅修改）：

```
//CCDirectorIOS.h only the modified

typedef enum {
/// sets a 2D projection (orthogonal projection).
kCCDirectorProjection2D,

/// sets a 3D projection with a fovy=60, znear=0.5f and zfar=1500.
kCCDirectorProjection3D,

/// it calls "updateProjection" on the projection delegate.
kCCDirectorProjectionCustom,

/// Detault projection is 3D projection
kCCDirectorProjectionDefault = kCCDirectorProjection2D, // this was 3D

// backward compatibility stuff
CCDirectorProjection2D = kCCDirectorProjection2D,
CCDirectorProjection3D = kCCDirectorProjection3D,
CCDirectorProjectionCustom = kCCDirectorProjectionCustom,

} ccDirectorProjection;

@interface CCDirector : NSObject
{
//...

float m_VirtualWindowScale; //default 1
float m_VirtualWindowHeight; // default 0
float m_VirtualWindowWidth; // default 0
float mScaleFactor;
//...
}
//...

// stretch and virtual height
-(void) setVirtualWindowScale: (float) scale andH:(float) height;
-(float) getVirtualWindowScale;
-(float) getVirtualWindowHeight;
-(float) getVirtualWindowWidth;
//...
@end

//CCDirectorIOS.m only the modified

//...
-(void) setProjection:(ccDirectorProjection)projection
{
CGSize size = winSizeInPixels_;

switch (projection) {
case kCCDirectorProjection2D:
{
glViewport(0, 0, size.width, size.height);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
ccglOrtho(0, size.width / m_VirtualWindowScale, 0, size.height / m_VirtualWindowScale, -1024 * CC_CONTENT_SCALE_FACTOR(), 1024 * CC_CONTENT_SCALE_FACTOR()); //-----------
glMatrixMode(GL_MODELVIEW);
//glDepthFunc(GL_ALWAYS);
glLoadIdentity();
break;
}

case kCCDirectorProjection3D:
{
float zeye = [self getZEye];

glViewport(0, 0, size.width, size.height);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
//   gluPerspective(60, (GLfloat)size.width/size.height, zeye-size.height/2, zeye+size.height/2 );
gluPerspective(60, (GLfloat)size.width/size.height, 0.5f, 1500);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
gluLookAt( size.width/2, size.height/2, zeye,
size.width/2, size.height/2, 0,
0.0f, 1.0f, 0.0f);
break;
}

case kCCDirectorProjectionCustom:
if( projectionDelegate_ )
[projectionDelegate_ updateProjection];
break;

default:
CCLOG(@"cocos2d: Director: unrecognized projecgtion");
break;
}

projection_ = projection;
}

//...

-(CGPoint)convertToGL:(CGPoint)uiPoint
{
CGSize s = winSizeInPoints_;
float newY = s.height - uiPoint.y;
float newX = s.width - uiPoint.x;

CGPoint ret = CGPointZero;
switch ( deviceOrientation_) {
case CCDeviceOrientationPortrait:
ret = ccp( uiPoint.x, newY );
break;
case CCDeviceOrientationPortraitUpsideDown:
ret = ccp(newX, uiPoint.y);
break;
case CCDeviceOrientationLandscapeLeft:
ret.x = uiPoint.y;
ret.y = uiPoint.x;
break;
case CCDeviceOrientationLandscapeRight:
ret.x = newY;
ret.y = newX;
break;
}
ret = ccpMult(ret, 1.0f / m_VirtualWindowScale); //-----------
return ret;
}

-(CGPoint)convertToUI:(CGPoint)glPoint
{
CGSize winSize = winSizeInPoints_;
int oppositeX = winSize.width - glPoint.x;
int oppositeY = winSize.height - glPoint.y;
CGPoint uiPoint = CGPointZero;
switch ( deviceOrientation_) {
case CCDeviceOrientationPortrait:
uiPoint = ccp(glPoint.x, oppositeY);
break;
case CCDeviceOrientationPortraitUpsideDown:
uiPoint = ccp(oppositeX, glPoint.y);
break;
case CCDeviceOrientationLandscapeLeft:
uiPoint = ccp(glPoint.y, glPoint.x);
break;
case CCDeviceOrientationLandscapeRight:
// Can't use oppositeX/Y because x/y are flipped
uiPoint = ccp(winSize.width-glPoint.y, winSize.height-glPoint.x);
break;
}
//uiPoint = ccpMult(uiPoint, 1/__ccContentScaleFactor);
uiPoint = ccpMult(uiPoint, 1/(__ccContentScaleFactor* m_VirtualWindowScale)); //-----------
return uiPoint;
}

//... 
```

在 Appdelegate 中的 applicationDidFinishLaunch 结束时，我添加了这些：

```
if ([[CCDirector sharedDirector] enableRetinaDisplay: YES]) {
NSLog(@"Retina Display enabled");
}

if ([[UIDevice currentDevice].model isEqualToString:@"iPad"]) {
[[CCDirector sharedDirector] setContentScaleFactor:2.0f];
}

NSLog(@"inpixels: %f inpoints: %f", [[CCDirector sharedDirector] winSizeInPixels].width, [[CCDirector sharedDirector] winSize].width);

int screenWidth = [[CCDirector sharedDirector] winSize].width; 
int screenHeight = [[CCDirector sharedDirector] winSize].height;

float scale = screenWidth / 320.0f;
float virtualHeight = screenHeight / scale;

[[CCDirector sharedDirector] setVirtualWindowScale:scale andH:virtualHeight]; 
```

我将所有内容定位到 virtualHeight 和 VirtualWidth，因此所有内容都保留在屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:22:34.320

您不应该使用比例因子，即不要使用 [SPStage setContentScaleFactor:2.0f] 下面的行

如果您不设置比例因子，则一切都以 30 fps 的速度运行。但缺点是应用程序现在在没有高清显卡的情况下运行。iPad 上的一切看起来都很模糊。

这是一个艰难的决定。最好是把一个 iPhone 应用程序变成通用，但你必须牺牲性能。您使用定制纹理和内容比例为 1 的方式提供了完美的结果，但这意味着在修改代码方面需要做更多的工作。

# android - 在android中将对象从一个应用程序传递到另一个应用程序

> ID：14642895
> 
> 赞同：3
> 
> 时间：2013-02-01T09:10:48.973
> 
> 标签：android, serialization, ipc, parcelable, aidl

经过大量的谷歌搜索，我找不到任何方法将对象从一个应用程序传递到另一个应用程序。虽然我知道我们可以使用 Parcel 将对象从一个活动传递到另一个活动，但是如何在应用程序之间做到这一点？我的对象是这个

```
public class MyObject
{
    private String name;
    public String getName()
    {
        return this.name;
    }
    public void setName(String name)
    {
        this.name=name;
    }
} 
```

那么如何像我们在活动之间传递对象一样做到这一点

`intent.putExtra("key",new MyOject());`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T13:58:40.377

我假设你负责这两个应用程序。

以下哪种情况是真的？

*   两个应用程序都依赖于单个数据存储
*   应用程序是相当独立的，但用户可能希望从一个到另一个共享一些数据

如果第一种情况属实，通常的方法是创建一个 Android 内容提供程序（如前所述）或一个服务，它使用 AIDL 语言公开一个 API。两个应用程序都将依赖于内容提供者或服务。

有关 AIDL 和服务的信息，请参见此处：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html) [http://developer.android.com/guide/components/aidl.html](http://developer.android.com/guide/components/aidl.html)

但是，如果应用程序是对等的，那么关于 Intents 的现有答案是好的。一个应用程序可以简单地使用 触发另一个应用程序`startActivity`，或者您可能希望为用户提供一种方式来选择从一个应用程序共享对象到另一个应用程序。看看这个：http: [//developer.android.com/training/sharing/send.html](http://developer.android.com/training/sharing/send.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:33:11.383

一个建议可能是使用[ContentProviders](http://developer.android.com/reference/android/content/ContentProvider.html)

来自参考：

> 内容提供者是 Android 应用程序的主要构建块之一，为应用程序提供内容。它们封装数据并通过单个 ContentResolver 接口将其提供给应用程序。

另一个建议可能是使用 SharedPreferences，[getSharedPreferences](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)和正确的[mode](http://developer.android.com/reference/android/content/Context.html#MODE_PRIVATE)。但正如您在参考资料中看到的那样，某些模式自 API 级别 17 以来已被弃用。

希望这会有所帮助，如果没有在下面发表评论

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T10:33:07.450

还有另一种在全局库中使用这些对象和方法的最佳方法，并将该库添加到您的 android 项目中。您可以在该库中声明自己的类，另一个功能是 jar 文件，您可以将 taht 类放在 jar 文件中和您可以重新使用它....此链接可能对您有用..................[如何创建自己的 Android 开发库以在您编写的每个程序中使用？](https://stackoverflow.com/questions/4085313/how-to-create-your-own-library-for-android-development-to-be-used-in-every-progr)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T11:09:51.060

如果您必须共享相对非常小的数据，请使用易于实现的 [Shared Preferences 。](http://developer.android.com/reference/android/content/SharedPreferences.html)

```
public static void addData(Context context, String data) {
    SharedPreferences sharedPref = context.getSharedPreferences(app_name, 0);
    SharedPreferences.Editor editor = sharedPref.edit();
    editor.putString("Name", data);
    editor.commit();
    }

public static String getData(Context context) {
    SharedPreferences sharedPref = context.getSharedPreferences(app_name, 0);
    String fontSize = sharedPref.getString("Name", "default");
    return fontSize;
    } 
```

或者，如果您有相当大的数据，您也可以使用[Content Provider 。](http://developer.android.com/guide/topics/providers/content-provider-creating.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-01T09:43:44.160

不幸的是，如果它不是 Parcelable，则您不能在应用程序之间按原样共享对象。

但是你可以在服务和 AIDL 的帮助下做到这一点：http: [//developer.android.com/guide/components/aidl.html](http://developer.android.com/guide/components/aidl.html)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-02-01T09:46:19.697

传递对象黑白活动：

```
public class MyObject  implements Parcelable{

    private String name;
    public String getName()
    {
    return this.name;
    }
    public void setName(String name)
    {
     this.name=name;
    }

    public MyObject() {

    }

    // Parcelling part
    public MyObject(Parcel in){
        this.name = in.readString();
    }

    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int arg1) {
        dest.writeString(this.name);
    }

    public static final Parcelable.Creator CREATOR = new Parcelable.Creator() {
        public MyObject createFromParcel(Parcel in) {
            return new MyObject(in); 
        }

        public MyObject[] newArray(int size) {
            return new MyObject[size];
        }
    };
}

//set Intent
Intent i= new Intent();
MyObject  o;
i.putExtra("obj", o);

//getIntent
Bundle data = getIntent().getExtras();
MyObject obj = data.getParcelable("obj"); 
```

# android - 在活动中定义文本视图

> ID：14642897
> 
> 赞同：1
> 
> 时间：2013-02-01T09:10:50.083
> 
> 标签：android, textview

我在我的 xml 布局中定义了一个 textview。现在，当我想在我的活动 Java 文件中调用这个 textview 时，我不知道该怎么做。你能告诉我怎么做吗？提前谢谢。

这是我的xml布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/bubble_sort"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_gravity="left" 
    android:text=
"hello welome to your first c++ code."/>

</LinearLayout> 
```

这是我的 Java 文件：

```
package com.example.cprograms;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Bubble_sort extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        TextView tv = (TextView) findViewById(R.id.bubble_sort);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:13:06.917

添加这些行

```
setcontentView(R.layout.yourxmlfile); 
```

和

```
tv.setText("Hello") 
```

......

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setcontentView(R.layout.yourxmlfile);
    TextView tv = (TextView) findViewById(R.id.bubble_sort);
     tv.setText("Hello");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:17:14.540

```
package com.example.cprograms;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Bubble_sort extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setcontentView(R.layout.YOUR_MAIN_ACTIVITY.XML)
    TextView tv = (TextView) findViewById(R.id.bubble_sort);
    tv.setText("HelloWorld"); //Here Setting Text During Run time.

}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:51:08.340

您尚未`setcontentView(R.layout.yourXmlFileName)` 在 Activity 中调用方法。之后调用此方法`super.onCreate(savedInstanceState)`。

希望这可以帮助。

# jquery - Kendo Grid onLoad Javascript 错误

> ID：14642906
> 
> 赞同：0
> 
> 时间：2013-02-01T09:11:30.413
> 
> 标签：jquery, jquery-ui, kendo-grid

我正在使用剑道网格和页面加载在 IE8 中的 jquery-1.4.3.min.js 中给出错误，如下所示：

Microsoft JScript 运行时错误：“长度”为空或不是对象

即使我已将 jquery 版本更改为 1.7.1.min，但它仍然给我错误。

帮我！！！

谢谢，拉维。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:05:30.980

这完全取决于您使用的 Kendo 版本，不同的版本需要不同的 jQuery 最低版本。

如果您使用的是 2012 年第三季度的最新版本，则需要 jQuery 1.8.2。在此之前 1.7.1 应该足够了。

当然，错误可能与 Kendo 无关，可能来自您自己的代码，但除非您发布示例代码或最小的堆栈跟踪，否则无法判断。

# php - Codeigniter - 全局 XSS 过滤 TRUE

> ID：14642914
> 
> 赞同：0
> 
> 时间：2013-02-01T09:12:00.380
> 
> 标签：php, codeigniter, xss, non-ascii-characters

我在我的 config.php 中设置了这个：

```
$config['global_xss_filtering'] = TRUE; 
```

对我来说问题是它删除了所有重音字符，如“à,ù,è,ò”

这是平常的吗？

还有为什么要更换它们？我怎么能离开他们？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:15:56.567

为了留下重音字符，您可以使用该`convert_accented_characters()`函数`text_helper`将高 ASCII 字符音译为低 ASCII 字符。您必须先加载帮助程序。文档[在这里](http://ellislab.com/codeigniter/user-guide/helpers/text_helper.html)

# android - android sdk 错误 - AudioManager.isMicrophoneMute() 总是错误的

> ID：14642916
> 
> 赞同：4
> 
> 时间：2013-02-01T09:12:04.687
> 
> 标签：android, audio, mute

正如标题所述`AudioManager.isMicrophoneMute()`，无论如何总是返回错误。

*设置：*

清单包含此权限，因为可能与此相关的较旧错误。旧错误是关于检查是否使用耳机。没有帮助，但也没有伤害。

`<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />`

1.  从 telnet 发起对模拟器的调用。
2.  拿起电话
3.  检查应用程序状态`audioManager.getMode() == audioManager.MODE_IN_CALL`为`true`。好的，我们很好
4.  状态检查`audioManager.isMicrophoneMute()`是`false`- 好的，我们仍然很好
5.  切换回手机并按下静音按钮
6.  切换到应用程序，检查`audioManager.isMicrophoneMute()`它**仍然** `false`- 不好。应该是真的。

那么这是一个损坏的 API 吗？还是我需要一些其他权限？或者这在模拟器上不起作用？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T16:03:41.747

我进行了一项小型研究并检查了 Android 的来源。实际上，问题出在文件中的默认电话应用程序中`packages/apps/Phone/src/com/android/phone/PhoneUtils.java`。这是功能：

```
 /**
 * Internally used muting function.
 */
private static void setMuteInternal(Phone phone, boolean muted) {
    final PhoneGlobals app = PhoneGlobals.getInstance();
    Context context = phone.getContext();
    boolean routeToAudioManager =
        context.getResources().getBoolean(R.bool.send_mic_mute_to_AudioManager);
    if (routeToAudioManager) {
        AudioManager audioManager =
            (AudioManager) phone.getContext().getSystemService(Context.AUDIO_SERVICE);
        if (DBG) log("setMuteInternal: using setMicrophoneMute(" + muted + ")...");
        audioManager.setMicrophoneMute(muted);
    } else {
        if (DBG) log("setMuteInternal: using phone.setMute(" + muted + ")...");
        phone.setMute(muted);
    }
    app.notificationMgr.updateMuteNotification();
} 
```

您可以看到，如果您单击静音按钮，电话应用程序会检查`R.bool.send_mic_mute_to_AudioManager`安装到的参数`false`（我检查了源代码）。因此，在这种情况下，状态是电话，它是 GSMPhone 类的一个实例。此类与 RIL 套接字通信并在那里向 setMute ( `RIL_REQUEST_SET_MUTE`) 发送适当的请求。因此，AudioManager 的状态在命令路径上没有任何地方更新。同样，我没有看到 AudioManager 在更改麦克风状态时通知 RIL。

因此，如果您向 AudioManager 询问麦克风的状态，它会返回默认值（即为 false）。我不知道这种行为是预期的还是这是一个错误。您可以在 android-platform 组中提问并链接到此问题和错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-25T15:46:36.700

这现在适用于 5.x Lollipop。在 4.x 中仍然不起作用。也许谷歌只是不会为旧操作系统修复它。

# wpf - 表示逻辑与 UI 逻辑

> ID：14642917
> 
> 赞同：1
> 
> 时间：2013-02-01T09:12:06.680
> 
> 标签：wpf, design-patterns, mvvm, presentation-layer

任何人都可以澄清这些条款吗？
我发现它们非常模糊或依赖于上下文。

例如，我们有一个带有项目列表的 VM。选择不仅会影响按钮的可访问性（即命令可以执行），还会影响 VM 的行为：一个或多个项目需要同时编辑很重要。

第二个示例是创建新项目的过程。
在用户提供数据后，我们将项目添加到项目集合中，从而将其插入列表中并希望使其被选中并聚焦。现在我们通过为项目的虚拟机引入`IsSelected`和属性来做到这一点。`IsFocused`真正的工作是由视图通过绑定、附加属性和行为来完成的。

我们团队的一些成员坚持认为向 VM 添加此类属性（`IsVisible`、、an 等）会给 VM 带来 UI 逻辑，这不是一个好的做法，因为 UI 和表示逻辑是混合的`IsSelected`。`IsFocused`

对我来说，遵循模式很重要，但更重要的是不要重复自己。我更喜欢绑定和代码隐藏中的几行代码，而不需要将 DataContext 转换为具体的 VM 类型、调用 VM 的方法等等。

尽管如此，我不喜欢HolyWars，并且承认由于对这两个术语的误解以及将两者分开的标准，我可能是错的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:23:17.897

我认为将表示逻辑放在 VM 中并在其上具有 IsEnabled 之类的属性很重要，因为这使其可测试。这也降低了视图的复杂性，从而减少了无法进行单元测试的代码量。

此外，我会对您的同事可能对为什么 VM 中的表示逻辑不是最佳实践的任何参考感兴趣。恕我直言，UI 是表示层的一部分，VM 的目的是为视图建模。因此，将表示逻辑放在这里似乎很自然。

**附加编辑：**

从[实现 MVVM 模式](http://msdn.microsoft.com/en-us/library/gg405484%28v=pandp.40%29.aspx "实现 MVVM 模式")

> 视图的职责是定义用户在屏幕上看到的结构和外观。理想情况下，视图的代码隐藏只包含一个调用 InitializeComponent 方法的构造函数。在某些情况下，代码隐藏可能包含 UI 逻辑代码，这些代码实现了难以用可扩展应用程序标记语言 (XAML) 表达的视觉行为，例如复杂的动画，或者当代码需要直接操作视觉元素时视图的一部分。您不应将任何逻辑代码放在需要进行单元测试的视图中。通常，视图代码隐藏中的逻辑代码将通过 UI 自动化测试方法进行测试。

# php - 在php中将excel日期值读取到mdY

> ID：14642926
> 
> 赞同：2
> 
> 时间：2013-02-01T09:12:40.167
> 
> 标签：php

在我的 php 项目中，我需要导入一个 excel 文件并将所有值插入到表中。我正在使用`phpExcelReader`导入文件。在 y excel 文件中，有一列用于以 d/m/Y 格式存储日期值。但是当我读到这些值时，它不是正确的敌人示例，我将日期指定为“ `25/02/2013`”，它会导致`TueTue/FebFeb/2013201320132013`

查看代码

```
require_once 'Excel/reader.php';
$data = new Spreadsheet_Excel_Reader();
$data->setOutputEncoding('CP1251');
//echo $target_path;
$data->read('uploads/initiativeData/'.$uploadFile);     
$startDate=trim(mysql_escape_string($data->sheets[0]['cells'][$i][5])); 
```

这里 $startDate 是存储日期字段值的变量

我需要得到价值`02-25-2013`..有人知道吗

请回复

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-09T18:06:16.003

这为我解决了这个问题：

```
$data->sheets[$sheetNumber]['cellsInfo'][$rowNumber][$cellNumber]['raw']; 
```

它将以时间戳格式为您提供日期，其中：

```
$data = new Spreadsheet_Excel_Reader();
$data->read("YourFile.xls"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:15:09.720

尝试[strtotime](http://php.net/strtotime)，它应该能够解析您的日期字符串。[之后，您可以使用date](http://php.net/date)将其转换为您想要的任何格式。例如：

```
$yourData = date('d.m.Y', strtotime(trim($data->sheets[0]['cells'][$i][5]))); 
```

**编辑：**

```
$yourData = date('d.m.Y', strtotime(str_replace('/', '-', trim($data->sheets[0]['cells'][$i][5])))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T12:04:50.637

在[PHPExcel](http://phpexcel.codeplex.com/)中有 2 个不同的函数来获取字段的值。

```
$value  = $objPHPExcel->setActiveSheetIndex(0)->getCell('B12')->getValue();
$value2 = $objPHPExcel->setActiveSheetIndex(0)->getCell('B12')->getCalculatedValue(); 
```

我不确定您正在使用的 phpExcelReader 库中是否也存在不同的功能，但值得研究。

进一步看，这是在文档中：

```
Accessing Cell Values

It is recommended that the public API functions be used to access data rather than relying on the underlying data structure, which may change between releases.

Retrieve the formatted value of a cell (what is displayed by Excel) on the first (or only) worksheet:

    $data->val($row,$col) 

You can also use column names rather than numbers:

    $data->val(10,'AZ') 

Access data on a different sheet:

    $data->val($row,$col,$sheet_index) 
```

所以尝试使用 val() 函数来获取值，而不是你正在使用的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:48:16.507

PHP 有一个[`DateTime::createFromFormat()`函数](http://www.php.net/manual/en/datetime.createfromformat.php)，它会做你想要的。

```
$date = DateTime::createFromFormat('d/m/Y', '25/02/2013');  //import with the specified format...
echo $date->format('Y-m-d');   //...and now you can output it in whatever format you want. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-28T08:59:30.603

Spreadsheet_Excel_Reader 类

替换此功能：

```
function createDate($numValue) {
        if ($numValue > 1) {
            $utcDays = $numValue - ($this->nineteenFour ? SPREADSHEET_EXCEL_READER_UTCOFFSETDAYS1904 : SPREADSHEET_EXCEL_READER_UTCOFFSETDAYS);
            $utcValue = round(($utcDays) * SPREADSHEET_EXCEL_READER_MSINADAY);

            $this->curformat = strtolower($this->curformat);
            //echo $this->curformat; echo "<br>";
            if ($this->curformat == 'mm/dd/yyyy' || $this->curformat == 'i/dd/yyyy') {
                $this->curformat = 'Y-m-d';
            }

            $string = date($this->curformat, $utcValue);
            $raw = $utcValue;
        } else {
            $raw = $numValue;
            $hours = floor($numValue * 24);
            $mins = floor($numValue * 24 * 60) - $hours * 60;
            $secs = floor($numValue * SPREADSHEET_EXCEL_READER_MSINADAY) - $hours * 60 * 60 - $mins * 60;
            $string = date($this->curformat, mktime($hours, $mins, $secs));
        }

        return array($string, $raw);
    } 
```

# javascript - 验证特殊字符 JavaScript

> ID：14642927
> 
> 赞同：1
> 
> 时间：2013-02-01T09:12:42.983
> 
> 标签：javascript, validation, special-characters

我有以下JS代码：

**编辑**

```
 function validateForm() {
            var IsOk = true;
            var RegNumbers = (/^[0-9]+$/);
           var iChars = "!@#$%^&*()+=-[]\';,/{}|\":<>?";
           if (Fname == null || Fname == "") {
                    alert("can't be empty");
                    IsOk = false;
                }
                else if (Fname.length < 2) {
                    alert("the iput too short ");
                    IsOk = false;
                }
  else if (Fname != "") {

            if (RegNumbers.test(Fname)) {
                alert("Fname can't include numbers");
                IsOk = false;
            }
                    for (var i=0; i<Fname.length;) {
                 if (iChars.indexOf(Fname[i]) != -1) {
                    IsOk = false; alert('no special chracters pleas!');

                     break;
                 }

    }

    }
            } 
```

问题在于，当输入是特殊字符时，不会发出不允许输入的警告。为什么？？希望得到帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:15:09.693

这一行：

```
if (iChars.indexOf(Fname) >= 0) { 
```

只是测试`Fname`字符串是否在里面`iChars`。除极少数情况外，您只测试是否`Fname`是包含特殊字符的单字符字符串。

要保持相同的逻辑（即不使用正则表达式），您必须遍历 Fname ：

```
for (var i=0; i<Fname.length; i++) {
   if (iChars.indexOf(Fname[i]) >= 0) {
      alert('...');
      IsOk = false;
      break;
   }
} 
```

您可以使用正则表达式“简化”：

```
if (Fname.match(/[\!\@#\$\%\^\&\*\(\)\+\=\-\[\]\\\'\;\,\/\{\}\|\"\:\<\>\?]/)) {
      alert('...');
      IsOk = false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:21:43.443

您需要测试任何一个字符，最好的方法是使用正则表达式：

```
var iChars = "!@#$%^&*()+=-[]\';,/{}|\":<>?";
  ,    iRx = new RegExp( '[\\' + iChars.split('').join( '\\' ) + ']' );

...

if( iRx.test( Fname ) ) {
    ...
} 
```

这样做是将您的特殊字符列表转换为正则表达式：

```
[\!\@\#...] 
```

这意味着如果这些字符中的任何一个在您的字符串中的任何位置，它将匹配

仅供参考，您不需要`==null`支票。它在功能上与`==""`. 你也不需要`!= ""`支票（因为你已经检查过了）

并且您的数字正则表达式应该只是`/[0-9]/`，否则`foo22bar`将被允许。

# iphone - 如何将 JSON 字符串添加到 NSDictionary

> ID：14642928
> 
> 赞同：-4
> 
> 时间：2013-02-01T09:12:43.630
> 
> 标签：iphone

如何将 JSON 字符串添加到 NSDictionary ？

```
 NSString *j_String  @"{ "comp": [
      { "id": "1" },
      { "id": "2" },
      { "id": "3" }
     ],
    "contact": [
      { "mail": "some@email.com", "name": "Name"  },
      { "mail": "email@email.com", "name": "Name"  }
     ]
    }";

NSMutableDictionary *dic = [NSMutableDictionary dictionary];
[dic setValue:@"nvjd" forKey:j_String]; 
```

我可以通过这种方式将 Json 字符串添加到 NSMutableDictionary 或 NSDictionary 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:36:34.800

使用 SBJSON 将您的 Json 字符串转换为 NSobject。然后添加到您自己的字典中。如果我们想从这个中获取 Json，只需使用 SBJson 类中的转换 Json 编写器方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T16:05:28.790

在您的项目中添加 SBJson 库，您可以从[这里](https://github.com/stig/json-framework/)下载它，然后在您的 .m 文件中使用此代码

```
#import "SBJson.h"

   SBJsonParser *jsonParser = [SBJsonParser new];
   NSDictionary *jsonData = (NSDictionary *) [jsonParser objectWithString: j_String error:nil];

   NSLog(@"json data is : %@",jsonData); 
```

# android - 如何直接从谷歌电子表格中获取数据？

> ID：14642932
> 
> 赞同：3
> 
> 时间：2013-02-01T09:12:55.690
> 
> 标签：android, google-api, google-sheets

我需要我的 android 应用程序始终连接到同一个谷歌电子表格以获取单元格数据（我将在未来每天更改，以便应用程序可以在不使用服务器的情况下获取更新的数据）。

在文档[https://developers.google.com/google-apps/spreadsheets/?hl=it#ListFeeds](https://developers.google.com/google-apps/spreadsheets/?hl=it#ListFeeds)中，它展示了如何进行身份验证等，但我需要使用以下直接链接连接到公共电子表格：

[https://docs.google.com/spreadsheet/ccc?key=xxx](https://docs.google.com/spreadsheet/ccc?key=xxx) ....

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-05T06:19:12.347

是可能的，一些例子可以是詹姆斯摩尔的代码[http://blog.restphone.com/2011/05/very-simple-google-spreadsheet-code.html](http://blog.restphone.com/2011/05/very-simple-google-spreadsheet-code.html)

请记住，您需要在电子表格“文件->发布到网络”中手动添加

```
package com.banshee;

    import java.io.IOException;
    import java.net.URL;

    import com.google.gdata.client.spreadsheet.SpreadsheetService;
    import com.google.gdata.data.spreadsheet.CustomElementCollection;
    import com.google.gdata.data.spreadsheet.ListEntry;
    import com.google.gdata.data.spreadsheet.ListFeed;
    import com.google.gdata.util.ServiceException;

    public class SpreadsheetSucker {
      public static void main(String[] args) {
        SpreadsheetService service = new SpreadsheetService("com.banshee");
        try {
          // Notice that the url ends
          // with default/public/values.
          // That wasn't obvious (at least to me)
          // from the documentation.
          String urlString = "https://spreadsheets.google.com/feeds/list/0AsaDhyyXNaFSdDJ2VUxtVGVWN1Yza1loU1RPVVU3OFE/default/public/values";

          // turn the string into a URL
          URL url = new URL(urlString);

          // You could substitute a cell feed here in place of
          // the list feed
          ListFeed feed = service.getFeed(url, ListFeed.class);

          for (ListEntry entry : feed.getEntries()) {
            CustomElementCollection elements = entry.getCustomElements();
            String name = elements.getValue("name");
            System.out.println(name);
            String number = elements.getValue("Number");
            System.out.println(number);
          }
        } catch (IOException e) {
          e.printStackTrace();
        } catch (ServiceException e) {
          e.printStackTrace();
        }

      }
    } 
```

# html - 如何将 Bordertop black 设置为具有黑色不透明背景颜色的 div

> ID：14642936
> 
> 赞同：1
> 
> 时间：2013-02-01T09:13:10.020
> 
> 标签：html, css, border

我有一个`Backgroundcolor`黑色和`opacity`0.6 的 Div。现在我想将bordertop设置为黑色而没有不透明度

**CSS：**

```
 #MainHeader
    {
        position:relative;
        top:0px;
        height:50px;
        width:1000px;
        opacity:0.7;
        background-color:black;
        border-top:10px solid black;
     } 
```

**HTML：**

```
<div id="MainHeader"></div> 
```

**[JS小提琴](http://jsfiddle.net/hJzgh/2/)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:15:30.100

用于`RGB`赋予背景颜色和不透明度

```
 background-color: rgba(0, 0, 0, 0.7);
    /* For IE 5.5 - 7*/
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
    /* For IE 8*/
   -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)"; 
```

**[演示](http://jsfiddle.net/hJzgh/6/)**

[**在此处**](http://userinterfacehome.blogspot.in/2012/08/transparency-for-background-color.html)查看详细说明[](http://userinterfacehome.blogspot.in/2012/08/transparency-for-background-color.html)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:18:22.527

使用**rgba**背景颜色而不是不透明度。

```
MainHeader {
position:relative;
top:0px;
height:50px;
width:1000px;
background-color:rgba(67, 67, 69, 0.6);  // use this instead of opacity
border-top:10px solid #000000;
} 
```**

# ibm-mq - MQ 资源管理器和远程 QMGR 之间的数据转换有些奇怪

> ID：14642940
> 
> 赞同：2
> 
> 时间：2013-02-01T09:13:23.563
> 
> 标签：ibm-mq, mq

我有一个关于 MQ Explorer 和远程 QMGR 之间的数据转换的问题。

为了重现数据转换失败的问题，我将远程 QMGR 的 ccsid 的值设置为**9066**。**由于系统中没有 ccsid 9066 的转换表，我认为从 MQ explorer 到 QMGR 的连接会失败。**但是，不幸的是，该资源管理器仍然可以成功添加 QMGR。

你能帮忙解释一下为什么会这样吗？

提前致谢

请查找以下相关信息：

```
-bash-4.1$ cd /opt/mqm/lib/iconv/
-bash-4.1$ ls | grep 236A    (note: the hex value of ccsid 9066 is 236A)
-bash-4.1$ echo dis qmgr ccsid | runmqsc QMGR01
5724-H72 (C) Copyright IBM Corp. 1994, 2005\.  ALL RIGHTS RESERVED.
Starting MQSC for queue manager QMGR01.
     1 : dis qmgr ccsid
AMQ8408: Display Queue Manager details.
   QMNAME(QMGR01)                          CCSID(9066)
One MQSC command read.
No commands have a syntax error.
All valid MQSC commands were processed.
-bash-4.1$ dspmqver
Name:        WebSphere MQ
Version:     6.0.2.12
CMVC level:  p600-212-121204
BuildType:   IKAP - (Production)
-bash-4.1$ uname -a
Linux localhost.localdomain 2.6.32-71.el6.i686 #1 SMP Fri Nov 12 04:17:17 GMT 2010 i686 i686 i386 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:38:54.073

WebSphere MQ 以不同的方式处理消息头的转换和消息数据的转换。标头的设计使转换最小化，并且在需要时始终使用可在所有 CCSID 中转换的字符。目的是两个 QMgr 或一个客户端和一个 QMgr 应该能够连接，即使在有效负载数据可能无法转换的情况下也是如此。您无法让它失败的事实证明了这种方法的稳健性。

# c# - 将数据从 LINQ 检索到 SQL 时查询模式错误的实现

> ID：14642941
> 
> 赞同：0
> 
> 时间：2013-02-01T09:13:28.647
> 
> 标签：c#, winforms, linq-to-sql

我有一个用于从多个表中搜索的存储过程

```
`ALTER PROCEDURE [dbo].[rdsp_Srchfld]
(
@strFldlst as nvarchar(max),
@strTblnm as nvarchar(max),
@intSrchStyle as int,
@strcond1 as nvarchar(250),
@strCond2 as nvarchar(250)=null,
@strCond3 as nvarchar(300)
)
AS
BEGIN 
declare @strSql as varchar(7000)

--Process
set @strSql = 'select Distinct ' + @strFldlst  + ' from ' + @strTblnm 
IF @intSrchStyle = 0
BEGIN
    SET @strSql = @strSql + ' where ' + @strcond1  + ' = ' + '''' + @strCond2 + '''' + ' order by ' + '' + @strcond3 + ''
END
ELSE IF @intSrchStyle = 1
BEGIN
    SET @strSql = @strSql + ' where ' + @strcond1 + ' like ' + '''' + @strCond2 + '%' + '''' + ' order by ' + '' + @strcond3 + ''
END

ELSE IF @intSrchStyle = 2 
BEGIN
    SET @strSql = @strSql + ' where ' + @strcond1  + ' like ' + '''' + '%' + @strCond2 + '%' + '''' + ' order by ' + '' + @strcond3 + ''
END

EXEC (@strSql)
END` 
```

并将参数从 LINQ 传递到 Sql 作为

```
var rslt = from srch in custDC.rdsp_Srchfld(fldName, tblName, srchType, cond1, cond2, cond3) select srch; 
```

现在我尝试构建我的程序，我收到错误

```
Error   1   Could not find an implementation of the query pattern for source type 'int'.  'Select' not found. 
```

为什么我收到错误以及如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:21:57.330

不要这样做。现在放弃你的方法。

首先阅读这篇文章，[http://www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

想想为什么要创建 Linq-to-SQL。看看它的继任者EF。

然后从已建立的支持[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)的 SQL Server 为您的数据库制作模型。然后使用该模型为您提供漂亮的类型检查代码。让模型为您执行动态 SQL。如果您有 ORM 无法处理的特殊要求或情况。然后考虑写一个专门的SP来处理。

* * *

如果您要坚持使用您的方法，至少要了解什么是[SQL 注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。了解[sp_executesql](http://msdn.microsoft.com/en-gb/library/ms188001.aspx)并使用它。

* * *

如果 Linq-to-SQL 无法正确获取您的动态 SQL，无论出于何种原因，在客户端/应用程序层而不是在 SP 中构建语句更有意义。查看[DataContext的](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.aspx)[ExecuteQuery](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.executequery.aspx)和[ExecuteCommand](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.executecommand.aspx)方法。如果一个 ORM 太多，使用 vanilla ADO.Net 和一个有优点的。[`SqlCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)

# sqlite - 登录屏幕仅在 sencha 的本机应用程序中首次出现

> ID：14642944
> 
> 赞同：2
> 
> 时间：2013-02-01T09:13:39.073
> 
> 标签：sqlite, cordova, extjs, login, sencha-touch

我正在使用**sencha touch 开发本机应用程序**。我想创建一个应该只在第一次看到的登录视图。任何建议如何解决它。

激活.js

```
Ext.define('FOS.view.Activation', {
    extend: 'Ext.form.Panel',
    alias: "widget.activationview",
    requires: ['Ext.form.FieldSet', 'Ext.form.Password', 'Ext.Label', 'Ext.Img', 'Ext.util.DelayedTask'],
    config: {
        title: 'Login',
        items: [

            {
                xtype: 'label',
                html: 'Activation failed. Please enter the correct credentials.',
                itemId: 'activationFailedLabel',
                hidden: true,
                hideAnimation: 'fadeOut',
                showAnimation: 'fadeIn',
                style: 'color:#990000;margin:5px 0px;'
            },
            {
                xtype: 'fieldset',
                title: ' ',
                items: [
                    {
                        xtype: 'textfield',
                        placeHolder: 'Enter Agency Id',
                        itemId: 'agencyIdTextField',
                        name: 'agencyIdTextField',
            label: 'Agency Id',
                        labelWidth: '40%',
                        //required: true
                    },
                    {
                        xtype: 'textfield',
                        placeHolder: 'Enter App Id',
                        itemId: 'appIdTextField',
                        name: 'appIdTextField',
            label: 'App Id',
                        labelWidth: '40%',
                       // required: true
                    }
                ]
            },
            {
                xtype: 'button',
                itemId: 'activationButton',
                ui: 'action',
                padding: '10px',
                text: 'Activate'
            }
         ],
        listeners: [{
            delegate: '#activationButton',
            event: 'tap',
            fn: 'onActivationButtonTap'
        }]
    },
    onActivationButtonTap: function () {

        var me = this,
            agencyidField = me.down('#agencyIdTextField'),
            appidField = me.down('#appIdTextField'),
            label = me.down('#activationFailedLabel'),
            agencyid = agencyidField.getValue(),
            appid = appidField.getValue();

        label.hide();

        // Using a delayed task in order to give the hide animation above
        // time to finish before executing the next steps.
        var task = Ext.create('Ext.util.DelayedTask', function () {

            label.setHtml('');

            me.fireEvent('activationCommand', me, agencyid, appid);

            agencyidField.setValue('');
            appidField.setValue('');
        });

        task.delay(500);

    },
    showActivationFailedMessage: function (message) {
        var label = this.down('#activationFailedLabel');
        label.setHtml(message);
        label.show();
    }
}); 
```

登录.js

```
Ext.define('FOS.view.Login', {
    extend: 'Ext.form.Panel',
    alias: "widget.loginview",
    requires: ['Ext.form.FieldSet', 'Ext.form.Password', 'Ext.Label', 'Ext.Img', 'Ext.util.DelayedTask'],
    config: {
        title: 'Login',
        items: [

            {
                xtype: 'label',
                html: 'Login failed. Please enter the correct credentials.',
                itemId: 'signInFailedLabel',
                hidden: true,
                hideAnimation: 'fadeOut',
                showAnimation: 'fadeIn',
                style: 'color:#990000;margin:5px 0px;'
            },
            {
                xtype: 'fieldset',
                title: ' ',
                items: [
                    {
                        xtype: 'textfield',
                        placeHolder: 'Enter UserName',
                        itemId: 'userNameTextField',
                        name: 'userNameTextField',
            label: 'UserName',
                        labelWidth: '40%',
                        //required: true
                    },
                    {
                        xtype: 'passwordfield',
                        placeHolder: 'Enter Password',
                        itemId: 'passwordTextField',
                        name: 'passwordTextField',
            label: 'Password',
                        labelWidth: '40%',
                       // required: true
                    }
                ]
            },
            {
                xtype: 'button',
                itemId: 'logInButton',
                ui: 'action',
                padding: '10px',
                text: 'Log In'
            }
         ],
        listeners: [{
            delegate: '#logInButton',
            event: 'tap',
            fn: 'onLogInButtonTap'
        }]
    },
    onLogInButtonTap: function () {

        var me = this,
            usernameField = me.down('#userNameTextField'),
            passwordField = me.down('#passwordTextField'),
            label = me.down('#signInFailedLabel'),
            username = usernameField.getValue(),
            password = passwordField.getValue();

        label.hide();

        // Using a delayed task in order to give the hide animation above
        // time to finish before executing the next steps.
        var task = Ext.create('Ext.util.DelayedTask', function () {

            label.setHtml('');

            me.fireEvent('signInCommand', me, username, password);

            usernameField.setValue('');
            passwordField.setValue('');
        });

        task.delay(500);

    },
    showSignInFailedMessage: function (message) {
        var label = this.down('#signInFailedLabel');
        label.setHtml(message);
        label.show();
    }
}); 
```

主菜单.js

```
Ext.define('FOS.view.MainMenu', {
    extend: 'Ext.Panel',
    requires: ['Ext.TitleBar'],
    alias: 'widget.mainmenuview',
    config: {
        layout: {
            type: 'fit'
        },
        items: [{
            xtype: 'titlebar',
            title: 'Main Menu',
            docked: 'top',
            items: [
                {
                    xtype: 'button',
                    text: 'Log Off',
                    itemId: 'logOffButton',
                    align: 'right'
                }
            ]
        }],
        listeners: [{
            delegate: '#logOffButton',
            event: 'tap',
            fn: 'onLogOffButtonTap'
        }]
    },
    onLogOffButtonTap: function () {
        this.fireEvent('onSignOffCommand');
    }
}); 
```

控制器

```
Ext.define('FOS.controller.Login', {
    extend: 'Ext.app.Controller',

   config: {
        refs: {
            loginView: 'loginview',
            mainMenuView: 'mainmenuview',
        activationView: 'activationview'
        },
        control: {
        activationView: {
                activationCommand: 'onActivationCommand'
            },
               loginView: {
                   signInCommand: 'onSignInCommand'
            },
            mainMenuView: {
                onSignOffCommand: 'onSignOffCommand'
            }
        }
    },

    // Session token

   // sessionToken: null,

    // Transitions
    getSlideLeftTransition: function () {
        return { type: 'slide', direction: 'left' };
    },

    getSlideRightTransition: function () {
        return { type: 'slide', direction: 'right' };
    },

onActivationCommand: function (view, agencyid, appid) {

        console.log('AgencyId: ' + agencyid + '\n' + 'AppId: ' + appid);

        var me = this,
            activationView = me.getActivationView();

        if (agencyid.length === 0 || appid.length === 0) {

            activationView.showActivationFailedMessage('Please enter your Agency Id and App Id.');
            return;
        }

        activationView.setMasked({
            xtype: 'loadmask',
            message: 'Activating...'
        });

            me.activationSuccess();     //Just simulating success.

    },

    activationSuccess: function () {
        console.log('Activated.');
        var activationView = this.getActivationView();
        loginView = this.getLoginView();
        activationView.setMasked(false);

        Ext.Viewport.animateActiveItem(loginView, this.getSlideLeftTransition());
    },

    onSignInCommand: function (view, username, password) {

        console.log('Username: ' + username + '\n' + 'Password: ' + password);

        var me = this,
            loginView = me.getLoginView();

        if (username.length === 0 || password.length === 0) {

            loginView.showSignInFailedMessage('Please enter your User Name and Password.');
            return;
        }

        loginView.setMasked({
            xtype: 'loadmask',
            message: 'Signing In...'
        });

      /*  Ext.Ajax.request({
            url: '../../services/login.ashx',
            method: 'post',
            params: {
                user: username,
                pwd: password
            },
            success: function (response) {

                var loginResponse = Ext.JSON.decode(response.responseText);

                if (loginResponse.success === "true") {
                    // The server will send a token that can be used throughout the app to confirm that the user is authenticated.
                    me.sessionToken = loginResponse.sessionToken;*/
                    me.signInSuccess();     //Just simulating success.
               /* } else {
                    me.singInFailure(loginResponse.message);
                }
            },
            failure: function (response) {
                me.sessionToken = null;
                me.singInFailure('Login failed. Please try again later.');
            }
        });*/
    },

    signInSuccess: function () {
        console.log('Signed in.');
        var loginView = this.getLoginView();
        mainMenuView = this.getMainMenuView();
        loginView.setMasked(false);

        Ext.Viewport.animateActiveItem(mainMenuView, this.getSlideLeftTransition());
    },
/*
    singInFailure: function (message) {
        var loginView = this.getLoginView();
        loginView.showSignInFailedMessage(message);
        loginView.setMasked(false);
    },*/

    onSignOffCommand: function () {

        var me = this;

       /* Ext.Ajax.request({
            url: '../../services/logoff.ashx',
            method: 'post',
            params: {
                sessionToken: me.sessionToken
            },
            success: function (response) {

                // TODO: You need to handle this condition.
            },
           failure: function (response) {

                // TODO: You need to handle this condition.
            }
        });*/

        Ext.Viewport.animateActiveItem(this.getLoginView(), this.getSlideRightTransition());
    }
}); 
```

应用程序.js

```
//<debug>
Ext.Loader.setPath({
    'Ext': 'touch/src',
    'FOS': 'app'
});
//</debug>

Ext.application({
    controllers: ["Login"],

    name: 'FOS',

    requires: [
        'Ext.MessageBox'
    ],

    views: ['Activation','Login','MainMenu'],

    icon: {
        '57': 'resources/icons/Icon.png',
        '72': 'resources/icons/Icon~ipad.png',
        '114': 'resources/icons/Icon@2x.png',
        '144': 'resources/icons/Icon~ipad@2x.png'
    },

    isIconPrecomposed: true,

    startupImage: {
        '320x460': 'resources/startup/320x460.jpg',
        '640x920': 'resources/startup/640x920.png',
        '768x1004': 'resources/startup/768x1004.png',
        '748x1024': 'resources/startup/748x1024.png',
        '1536x2008': 'resources/startup/1536x2008.png',
        '1496x2048': 'resources/startup/1496x2048.png'
    },

    launch: function() {
        // Destroy the #appLoadingIndicator element
        Ext.fly('appLoadingIndicator').destroy();

        // Initialize the main view

    Ext.Viewport.add([
         { xtype: 'activationview'},
             { xtype: 'mainmenuview' },
         { xtype: 'loginview' }
     ]);
    },

    onUpdated: function() {
        Ext.Msg.confirm(
            "Application Update",
            "This application has just successfully been updated to the latest version. Reload now?",
            function(buttonId) {
                if (buttonId === 'yes') {
                    window.location.reload();
                }
            }
        );
    }
}); 
```

我只想要这个激活视图一次。网络服务还不可用....

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T19:27:24.813

基本上，您寻找的是类似于大多数网站和本机应用程序上可用的**记住我**或**SSO**（单点登录）功能的东西。我自己最近在我的一个应用程序中需要这个。

使用 sencha，您可以使用 HTML5 存储。用户成功登录后，将某些用户详细信息（如登录状态、访问令牌、用户 ID 等）存储到 HTML5 数据库中。您可以轻松地在其中存储多达 5MB 的数据，并且由于 sencha 可以在 webkit 等现代 Web 浏览器上运行，您可以使用该 api 并用它做一些事情。

至此，我已经在我的应用程序中创建了一个具有各种字段的模型，例如用户 ID、登录状态和访问令牌。例如，您可以拥有类似的模型 -

```
Ext.define('MyApp.model.Userinfo',{
    extend:'Ext.data.Model',
    config:{
        identifier: 'uuid',
        store:'MyApp.store.Userinfo',
        fields:[                 
           {name: 'id', type: 'string' },
           {name: 'userid', type: 'string' },
           {name:'login_status',type:'string'},
           {name:'access_token',type:'string'}
        ]    
    }        
}); 
```

您可以根据需要添加字段数量，并为每个字段选择合适的类型。但是你的模型应该有一个唯一的标识符。使用 ST2.0，您可以使用`identifier:'uuid'`为您的存储分配唯一标识符。

然后是商店，它可以像 -

```
Ext.define('MyApp.store.Userinfo',{
   extend:'Ext.data.Store',   
   config:{
       model:'MyApp.model.Userinfo',
       autoLoaded:true,
       autoLoad: true,
       autoSave:true,
       proxy:{
           type:'localstorage',
           id:'userinfo'
       }
   }
}); 
```

最后，当登录成功时，您可以使用以下命令将数据添加到本地存储中 -

```
 var userInfoData=Ext.getStore('Userinfo');                                
  userInfoData.removeAll();
  userInfoData.getProxy().clear();
  userInfoData.add({userid:'user_id_to_store',login_status:"true",access_token:'generated_access_token'});
  userInfoData.sync(); 
```

最后，在您的 中`app.js`，检查此本地存储的条目并验证访问令牌的可靠性。所以在`launch`方法上，

```
var userInfoData=Ext.getStore('Userinfo');              
if(null!=userInfoData.getAt(0)){
    var status = userInfoData.getAt(0).get('login_status');
    var user_id=userInfoData.getAt(0).get('userid');
    var access_token = userInfoData.getAt(0).get('access_token');   

    //validate access token, check user id and status and load your next view that comes after login    

}else{
    // if reached here, that means user is not logged in.
    // load your login view.  
} 
```

我无法阅读您的整个代码并对其进行编辑。但这是我用过的，到目前为止它工作没有任何问题。您可以根据您的应用程序和要求轻松更改它。

* * *

**注意**

这段代码已有一年多的历史了。所以它可能不适用于最新的 ST 版本（未经测试）。但想法是一样的。干杯。:)

# jsf - 使用 TinyMCE 将内容保存到 Facelets 模板中

> ID：14642952
> 
> 赞同：1
> 
> 时间：2013-02-01T09:14:08.887
> 
> 标签：jsf, tinymce, facelets

我正在尝试使用 TinyMCE 和 JSF 2.x 实现解决方案。但是我不确定如何继续（不同的方法）。

我正在尝试做的...

创建具有特定可编辑区域/部分的用户模板（Facelets 文件），用户可以在登录后通过 TinyMCE 进行编辑。

我不想使用 DB 来存储“可编辑”部分或将它们动态插入到 Facelets 模板中。

我在想这样的事情。

1.  将可编辑的内容加载到 TinyMCE。
2.  用户更新内容。
3.  提交时，使用 Java API for XML Processing 或其他一些 xml/xhtml 解析器验证内容。
4.  阅读 Facelets 模板并将可编辑的内容替换为提交的内容。
5.  用新的 Facelets 文件替换旧的 Facelets 文件并保存。

在进行更改之前，我是否应该使用中间步骤将提交的内容预先保存到 Facelets 文件中？关于如何继续进行的任何其他想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:15:10.857

> *我不想使用 DB 来存储“可编辑”部分或将它们动态插入到 Facelets 模板中。*

那么您唯一可行的选择是将它们保存在本地磁盘文件系统中。请注意，您可以也不应该将它们保存在 WAR 的 deploy 文件夹中，而是保存在 WAR 之外。否则，在重新部署甚至简单的服务器重新启动期间，所有更改都会丢失。更重要的是，当服务器配置为在内存而不是磁盘中扩展 WAR 时，您将无法向其写入文件。

在 WAR 之外保存文件很容易。`FileOutputStream`只需在此文件上写入 a ：

```
new File("/some/base/path", filename); 
```

让 Facelets 从外部 WAR 解析资源需要自定义[`ResourceResolver`](http://download.oracle.com/javaee/6/api/javax/faces/view/facelets/ResourceResolver.html)：

```
public class MyResourceResolver extends ResourceResolver {

    private ResourceResolver parent;

    public MyResourceResolver(ResourceResolver parent) {
        this.parent = parent;
    }

    @Override
    public URL resolveUrl(String path) {
        URL url = parent.resolveUrl(path); // Resolves from WAR.

        if (url == null) {
            url = new File("/some/base/path", path).toURI().toURL();
        }

        return url;
    }

} 
```

其中需要注册如下`web.xml`。

```
<context-param>
    <param-name>javax.faces.FACELETS_RESOURCE_RESOLVER</param-name>
    <param-value>com.example.MyResourceResolver</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:21:05.977

Xhtml 文件默认位于 WAR 中。您可以部署爆炸的 WAR 并将它们保存在原地。但是，在重新部署后，您将丢失所有更改。

您可以“破解”JSF 以在 WAR 存档之外查找模板，但这可能会很棘手。

你需要坚持JSF吗？基于组件的服务器端技术不是最佳选择。对于此类解决方案，我最好使用一些基于模板的控制器优先技术，例如 Spring MVC 或 Grails。请注意，在 JSF 中，控制流程的是 XHTML 页面。这不仅仅是模板技术。

另请注意，这就是发明 CMS 系统的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:45:00.853

我在一个项目中使用了richfaces html 编辑器，但是我们遇到了几个问题，所以我们决定创建我们自己的facelet 标签来加载由apache 提供的tinymce 文件。奇迹般有效

# registry - 如何向 WSO2 GREG 中的现有工件添加字段值？

> ID：14642954
> 
> 赞同：1
> 
> 时间：2013-02-01T09:14:14.620
> 
> 标签：registry, repository, wso2

我想用一些额外的字段来更新 WSO2 GREG（Governance Registry）4.5.3 附带的架构工件类型。这是我的新神器来源：

```
<artifactType type="application/x-xsd+xml" fileExtension="xsd" shortName="schema" singularLabel="Schema" pluralLabel="Schemas" hasNamespace="true" iconSet="29">
<content href="../generic/schema_view_ajaxprocessor.jsp?hideStandardView=true">
    <field >
     <name>Gender</name>
     <values>
      <value>male</value>
      <value>female</value>
     </values>
</field> 
```

它在添加新架构工件时有效，但在编辑现有架构工件（在此更新之前存在）时，我没有选择为字段“性别”选择值的选项。

我必须为我已经导入的模式设置“性别”值哪些选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T08:49:42.323

在 WSO2 Governance Registry 架构中，策略、wadls、swaggers 和 wsdl 是内容类型 RXT，它们的查看方式与普通工件不同，因此无法像您尝试的那样为架构工件定义自定义字段。在 WSO2 GREG 附带的其他工件类型（元数据类型）中，例如 api 或服务，您可以创建其他字段，并且更改也将反映在现有工件中。

但是，在您的情况下，您可以通过关联来实现这一点。[管理控制台协会](https://docs.wso2.com/display/Governance510/Managing+Dependencies+and+Associations)和新[治理中心协会](https://docs.wso2.com/display/Governance510/Adding+Associations+in+the+Publisher)。

要创建您自己的 RXT，请参阅[这篇文章](http://sencs.blogspot.com/2016/03/how-to-create-new-artifacts-type-in.html)。

您可以通过在下面给出的内容元素下插入新的表格元素或通过将字段元素添加到现有表格元素来添加其他字段

```
 <table name="Overview">
   <field type="text" required="true" readonly="true">
      <name>Name</name>
   </field>
   <field type="text" required="true" readonly="true">
      <name>Address</name>
   </field>
   <field type="options" readonly="true">
      <name label="Sex">Sex</name>
      <values>
         <value>male</value>
         <value>female</value>
      </values>
   </field>
  </table> 
```

# vim - 为什么 vundle 需要关闭文件类型

> ID：14642956
> 
> 赞同：26
> 
> 时间：2013-02-01T09:14:22.707
> 
> 标签：vim, coffeescript, less

在 vundle 的主页上，它记录了它需要在 .vimrc 中关闭文件类型：

```
 filetype off                   " required!
 set rtp+=~/.vim/bundle/vundle/
 call vundle#rc() 
```

我不明白为什么。由于我最近在为它们单独安装了相关插件（vim-coffee-script 和 vim-less）之后在编辑 .coffee 和 .less 文件时遇到了问题。我在[vim-coffee-script上的问题](https://github.com/kchmck/vim-coffee-script/issues/112)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-06-11T13:39:09.253

您可以`filetype on`在最后一个 Vundle 命令之后设置：

```
 filetype off                   " required!
 set rtp+=~/.vim/bundle/vundle/
 call vundle#rc()
 ...
 Vundle 'blabla'
 Vundle 'blabla2'

 filetype plugin indent on   " re-enable filetype 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-12-07T14:26:35.820

我想解决这个问题的部分原因。

这个答案大部分来自以下github线程

[https://github.com/VundleVim/Vundle.vim/issues/176](https://github.com/VundleVim/Vundle.vim/issues/176)

> 这是 Vim 的特性。
> Vim 为来自 runtimepath 的文件类型插件缓存。因此，如果 vundle 更改 runtimepath，它必须在调用之前重置。

那里也说这个问题只在7.3.430之前存在。

正如@Maxim Kim 所回答的那样，最好在与 Vundle 相关的所有内容之后打开它

```
set nocompatible
filetype off
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()

" Let vundle manage itself:
Plugin 'VundleVim/Vundle.vim'
" Syntax checking plugin
Plugin 'scrooloose/syntastic'

call vundle#end() 

filetype plugin indent on " Filetype auto-detection
syntax on " Syntax highlighting 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-06T06:36:10.193

这是您的**WHY的**[答案](https://github.com/VundleVim/Vundle.vim/issues/176#issuecomment-12996269)，我从 Vundle 的贡献者那里得到的。基本上，他的意思是您需要关闭以避免在命令运行时出现意外行为。之后，您可以重新打开它。**`Bundle`**

 **> 捆绑块之后。必须在 Bundles 块之后启用文件类型检测，因为每个 Bundle 命令都会更新运行时路径，这可能会为特定文件类型带来新的文件类型或更多插件。似乎打开它，当它打开时，什么都不做，所以必须先关闭它。
> 
> 如果您因为它影响某些文件类型检测而不愿意将其关闭，请尝试使用更新的 vim 版本，第 430 个补丁（很不幸，Ubuntu 只获得了该补丁之前的补丁。）**

# mysql - 归档在 Mysql 中从其他计算字段计算

> ID：14642957
> 
> 赞同：0
> 
> 时间：2013-02-01T09:14:22.303
> 
> 标签：mysql, database

我寻求一种能够写出这样的东西的方法

```
select complicated_calculation1 as comp1, 
complicated_calculation2 as comp2, 
(comp1/comp2) as percent
from table 
```

而不是像这样以更复杂的方式编写它

```
select complicated_calculation1 as comp1, 
complicated_calculation2 as comp2, 
(complicated_calculation1/complicated_calculation2) as percent
from table 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:16:36.180

不在同一行。

你可以做的是：

```
SELECT comp1, comp2, (comp1/comp2) as percent FROM(
select complicated_calculation1 as comp1, 
complicated_calculation2 as comp2
from table) AS t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:22:05.357

```
no u cann't use this 

select complicated_calculation1 as comp1, 
complicated_calculation2 as comp2, 
(comp1/comp2) as percent
from table

u have to use only this 

select complicated_calculation1 as comp1, 
complicated_calculation2 as comp2, 
(complicated_calculation1/complicated_calculation2) as percent
from table

because rantime calculation can not be applied on Alis field name 
```

# .net - 高提交内存但小堆大小

> ID：14642962
> 
> 赞同：2
> 
> 时间：2013-02-01T09:14:58.587
> 
> 标签：.net, debugging, memory, memory-leaks, windbg

据报道，我的一个应用程序正在使用 5 gigs 内存，当我转储进程并在 windbg 中分析时，我可以看到所报告的总提交大小为 5 gigs，但总托管堆大小仅为1.6 场演出。

问题：当堆大小只有几个 gigs 时，是什么导致提交大小如此之大，我可以看到 MEM_COMMIT 大小几乎全部被 PAGE_READWRITE 部分使用，可能是内存碎片吗？

状态大小 MEM_COMMIT 5.653 Gb MEM_RESERVE 2.597 Gb

GC 堆大小：大小：0x67cefd88 (1741618568) 字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:25:29.927

是的，托管堆中未考虑的提交大小可能来自非托管堆中的碎片。命令*!heap -s*将在 windbg 中显示它们。您还可以使用[VMMap](http://technet.microsoft.com/en-us/sysinternals/dd535533)快速排除其他类型的内存分配数据。

# c# - ListView.Items.Clear 不工作

> ID：14642975
> 
> 赞同：2
> 
> 时间：2013-02-01T09:15:43.573
> 
> 标签：c#, winforms

我正在尝试在从树视图中选择节点时填充列表视图，但是每次我选择节点时，它都会在列表视图中附加，我的 Listview.Items.Clear() 函数不起作用。我的代码：

```
listView1.Clear();
            if (this.treeView1.SelectedNode.Tag != null)
            {
                string msg = this.treeView1.SelectedNode.Tag.ToString();
                int complaint_id = Convert.ToInt32(msg);
                PopulateDataTable2(complaint_id);
                foreach (DataRow row11 in dsTreeView_Info.Tables["Complaints_Info"].Rows)
                {
                    listView1.Items.Add(new ListViewItem() { Text = row11["Complaint_Descriptions_Info"].ToString() });
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:30:00.853

我没有在forecah之后清除数据集。所以它的项目不断添加。

```
 dsTreeView_Info.Clear(); 
```

谢谢“DJ KRAZE”。

# objective-c - NSManagedObjects 的奇怪行为。为什么他们是零？

> ID：14642976
> 
> 赞同：0
> 
> 时间：2013-02-01T09:15:56.183
> 
> 标签：objective-c, xcode, core-data

我在 CoreData 中添加新实体时遇到问题。在我的模型中是 Glyph -> 轮廓 -> 节点，每个节点都有原点、bcpIn 和 bcpOut - 所有 PointValue 类。我尝试添加具有新来源、bcpIn 和 bcpOut 的节点。但是在创建它们并分配回关系之后

```
origin.node = node;
bcpIn.node = node;
bcpOut.node = node; 
```

只有 bcpIn 具有适当的值。Origin 和 bcpOut 的节点值为零这是我的代码的一部分：

```
 [points willChangeValueForKey:@"selectedObjects"];

 TPGlyph * glyph;
 TPContour * contour;

 if (points.selectedObjects.count==1) {
                TPPointData * currentPoint = [points.selectedObjects objectAtIndex:0];
                contour = currentPoint.node.contour;
                glyph = currentPoint.node.contour.glyph;
                //index = contour

  } else if (points.selectedObjects.count==0){
                glyph = [glyphs.selectedObjects objectAtIndex:0];
                contour = [NSEntityDescription insertNewObjectForEntityForName:@"Contour" inManagedObjectContext:moc];
                contour.glyph = glyph;  
            }

  TPNode * node = [NSEntityDescription insertNewObjectForEntityForName:@"Node" inManagedObjectContext:moc];

  node.contour=contour;
  node.type = [NSNumber numberWithInt:NSLineToBezierPathElement];

  NSPoint point = [self rezoomPoint: firstClick ofGlyph:glyph];

  TPPointData * origin = [NSEntityDescription insertNewObjectForEntityForName:@"PointData" inManagedObjectContext:moc ];
  origin.pointValue = NSMakePoint(point.x, point.y);
  origin.node = node;
  node.origin = origin;

  TPPointData * bcpOut = [NSEntityDescription insertNewObjectForEntityForName:@"PointData" inManagedObjectContext:moc ];
  bcpOut.pointValue = NSMakePoint(point.x, point.y);
  bcpOut.node = node;
  node.bcpOut = bcpOut;

  TPPointData * bcpIn = [NSEntityDescription insertNewObjectForEntityForName:@"PointData" inManagedObjectContext:moc];
  bcpIn.pointValue = NSMakePoint(point.x, point.y);
  bcpIn.node = node;
  node.bcpIn = bcpIn;

  [points didChangeValueForKey:@"selectedObjects"];

  [contour addNodesObject:node];
  [points addObject:origin];
  NSLog(@"contour %@", contour);
  NSLog(@"node %@", node);
  NSLog(@"origin %@", origin);
  NSLog(@"bcpIn %@", bcpIn);
  NSLog(@"bcpOut%@", bcpOut); 
```

输出是：

```
2013-02-01 09:50:04.410 AlwaysSmooth[59268:403] contour <TPContour: 0x1006c64e0> (entity: Contour; id: 0x105a07fc0 <x-coredata:///Contour/t338CE27E-8294-4455-AB79-BA5A70DD59AD2> ; data: {
    glyph = "0x100681350 <x-coredata://1CE61895-49D8-4BAB-BFE9-FC5762336779/Glyph/p2>";
    nodes =     (
        "0x100154e30 <x-coredata:///Node/t338CE27E-8294-4455-AB79-BA5A70DD59AD3>"
    );
})
2013-02-01 09:50:04.410 AlwaysSmooth[59268:403] node <TPNode: 0x1001aa0e0> (entity: Node; id: 0x100154e30 <x-coredata:///Node/t338CE27E-8294-4455-AB79-BA5A70DD59AD3> ; data: {
    bcpIn = "0x1001a8cf0 <x-coredata:///PointData/t338CE27E-8294-4455-AB79-BA5A70DD59AD6>";
    bcpOut = "0x1001a9f60 <x-coredata:///PointData/t338CE27E-8294-4455-AB79-BA5A70DD59AD5>";
    contour = "0x105a07fc0 <x-coredata:///Contour/t338CE27E-8294-4455-AB79-BA5A70DD59AD2>";
    next = "(...not nil..)";
    origin = "0x1001a8cf0 <x-coredata:///PointData/t338CE27E-8294-4455-AB79-BA5A70DD59AD6>";
    prev = "(...not nil..)";
    smooth = 1;
    type = 1;
})
2013-02-01 09:50:04.411 AlwaysSmooth[59268:403] origin <TPPointData: 0x1001ee690> (entity: PointData; id: 0x1001c8d50 <x-coredata:///PointData/t338CE27E-8294-4455-AB79-BA5A70DD59AD4> ; data: {
    node = nil;
    x = "-1936.5";
    y = "-981.8333";
})
2013-02-01 09:50:04.411 AlwaysSmooth[59268:403] bcpIn <TPPointData: 0x1001a8c90> (entity: PointData; id: 0x1001a8cf0 <x-coredata:///PointData/t338CE27E-8294-4455-AB79-BA5A70DD59AD6> ; data: {
    node = "0x100154e30 <x-coredata:///Node/t338CE27E-8294-4455-AB79-BA5A70DD59AD3>";
    x = "-1936.5";
    y = "-981.8333";
})
2013-02-01 09:50:04.412 AlwaysSmooth[59268:403] bcpOut<TPPointData: 0x1001a9e80> (entity: PointData; id: 0x1001a9f60 <x-coredata:///PointData/t338CE27E-8294-4455-AB79-BA5A70DD59AD5> ; data: {
    node = nil;
    x = "-1936.5";
    y = "-981.8333";
}) 
```

origin 和 bcpOut 为 nil，但 bcpIn 具有正确的节点值。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:27:28.683

自动释放问题？此命令有效：

```
node.origin = [NSEntityDescription insertNewObjectForEntityForName:@"PointData" inManagedObjectContext:moc ];
node.origin.pointValue = NSMakePoint(point.x, point.y); 
```

# java - 在Java中的索引之间替换部分字符串

> ID：14642978
> 
> 赞同：44
> 
> 时间：2013-02-01T09:16:00.933
> 
> 标签：java, string

说我有字符串`123456789`。我知道我想替换字符串的索引 3-5。（4、5 和 6）。请记住，替换可能不是 3 个字符，我可能希望以`123foobar789`.

最好的方法是什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-01T09:34:07.447

试试下面的代码。在 StringBuffer 的帮助下，您可以进行替换。[StringBuffer 替换 java 文档](https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html#replace(int,%20int,%20java.lang.String) "字符串缓冲区替换")

```
public static void main(String[] args) {

        StringBuffer buf = new StringBuffer("123456789");

        int start = 3;
        int end = 6;
        buf.replace(start, end, "foobar"); 
        System.out.println(buf);

    }

} 
```

运行上述程序后，将输出以下内容。

```
123foobar789 
```

[演示](https://ideone.com/oXfxUE)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-02-01T09:19:04.430

首先，你不能这样做¹，因为 a`String`在java中是不可变的。

[`String#substring()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int%29)但是，您可以使用以下方法（例如）创建具有所需值的新 String 对象：

```
String s = "123456789";
String newString = s.substring(0, 3) + "foobar" + s.substring(3+3);
System.out.println(newString); 
```

* * *

如果您确实想有效地实现它，您可以避免创建一些由连接和`substring()`方法使用的中间字符串。

```
String s = "123456789";
StringBuilder sb = new StringBuilder();
char[] buff = s.toCharArray();
sb.append(buff , 0, 3).append("foobar");
sb.append(buff,3+3,buff.length -(3+3));
System.out.println(sb.toString()); 
```

但是，如果它不是在一个非常紧密的循环中完成的 - 您可能应该忽略它，并坚持使用第一个且更具可读性的解决方案。

* * *

（1）无论如何都不容易，它可以通过[反射](http://docs.oracle.com/javase/tutorial/reflect/index.html)来完成- 但应该避免。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-01T09:38:24.470

如果给定子字符串没有重复，那么试试这个。

```
String s ="123456789";
s = s.replace(s.substring(3,6), "foobar"); 
```

如果给定子字符串重复，请尝试此操作。

```
String s ="123123123";
s= s.substring(0,3) + "foobar" + s.substring(6,s.length()); 
```

# wpf - 如何在wpf的datalist中显示数据

> ID：14642980
> 
> 赞同：0
> 
> 时间：2013-02-01T09:16:03.203
> 
> 标签：wpf

我是 WPF 的新手。我只是想知道 wpf 中是否有任何控件，例如 asp.net 中的中继器控件。我想使用模板来显示我的收藏，并希望按从左到右和从上到下的顺序显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:32:46.477

有多种布局项目集合的方法。

我建议看看 ListView 和 ItemsControl。您可以为内容设置模板样式，以按照您的方式显示数据。

要回答您的问题，您可以将项目面板设置为允许您选择方向的面板，即：

```
 <ListView>
        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal" />
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
    </ListView> 
```

# jquery - 三个复选框，一个其他的 onClick 应该使用 jQuery 禁用？

> ID：14642982
> 
> 赞同：1
> 
> 时间：2013-02-01T09:16:05.520
> 
> 标签：jquery, checkbox

我不知道如何做到这一点。

我有三个复选框，如果我单击其中一个，其他复选框应该被禁用。我如何使用 jQuery 来实现这一点

```
<input type="checkbox" name="box1" >
<input type="checkbox" name="box2" >
<input type="checkbox" name="box3" > 
```

在这方面帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:29:20.833

**[jsFiddle 1](http://jsfiddle.net/2WXKY/)**

```
$('input[type="checkbox"]').click(function() {
    $(this).siblings().attr('disabled', true); 
}); 
```

**[jsFiddle 2](http://jsfiddle.net/2WXKY/1/)**

或者，如果您想在取消选择时启用复选框，您可以使用：

```
$('input[type="checkbox"]').click(function() {
    $(this).siblings().attr('disabled', this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:32:01.163

我总是推荐使用类名来引用 DOM 元素，这会让你的代码更加干净和不显眼。此代码更全面且更易于维护：

```
<input type="checkbox" name="box1" class="check checker">
<input type="checkbox" name="box2" class="check">
<input type="checkbox" name="box3" class="check"> 
```

JS：

```
$('.checker').change(function() {
    $('.check').not(this).prop('disabled', this.checked);
}); 
```

在这种情况下，您可以更改复选框的位置（`siblings`方法将中断），它们的名称（`[name^="box"]`将失败），而无需修改您的 JS 代码。

[http://jsfiddle.net/4krnh/](http://jsfiddle.net/4krnh/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:24:17.637

您可以使用 :not() 过滤器来排除单击的复选框。

```
$("input[type='checkbox']").click(function(){
    var name = $(this).attr("name");
    $("input[type='checkbox']:not(input[name='"+name+"'])").attr("disabled", "disabled");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:26:07.127

```
<div>
    <input type="checkbox" name="box1" >
    <input type="checkbox" name="box2" >
    <input type="checkbox" name="box3" >
</div>

$('input[name^="box"]').click(function() {
    if($(this).is(":checked"))
        $(this).siblings().attr('checked', false);
}) 
```

编辑：[JSFiddle](http://jsfiddle.net/Cwqxd/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T09:28:31.813

你可以试试这个

```
$('input:checkbox').click(function(){
        $('input:checkbox').not($(this)).attr("disabled", true);
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T09:33:53.357

试试这个

```
 $('input:checkbox').click(function() {
         $(this).siblings('input:checkbox').not(this).attr("disabled","disabled");
     }); 
```

[**JSFIDDLE 演示**](http://jsfiddle.net/AVEjt/267/)

# android - 类型安全：从对象到列表的未经检查的强制转换

> ID：14642985
> 
> 赞同：25
> 
> 时间：2013-02-01T09:16:12.000
> 
> 标签：android, listview, casting, filter, custom-object

我有一个 ListView 列出了一个自定义对象（比如说`MyObject`）。

我想通过一个动态过滤它，所以我必须用一个 publishResults 方法`EditText`来实现一个：`getFilter()`

```
@Override
protected void publishResults(CharSequence constraint, FilterResults results) {
    MyObjectAdapter.this.setItems((List<MyObject>) results.values);
    MyObjectAdapter.this.notifyDataSetChanged();
} 
```

此时，Eclipse 抱怨：`Type safety: Unchecked cast from Object to List<MyObject>`

我相信这个演员永远是真的，但 Eclipse 只建议添加`@SuppressWarnings("unchecked")`，但我完全反对，`SuppressWarnings`因为它只是隐藏问题，而不是解决方案......

我尝试添加：

```
if(results.values instanceof List<MyObject>) 
```

但是 Eclipse 再次抱怨，这没有解决任何问题......

`Cannot perform instanceof check against parameterized type List<MyObject>. Use the form List<?>`

我知道强制转换总是正确的，但哪种方法可以确保代码`results.values`实际上是正确的`List<MyObject>`？

提前致谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-01T09:38:20.647

如果您所要做的只是 a `Object`，那么您无法在运行时检查您实际上是否拥有 a `List<MyObject>`，因为泛型类型`MyObject`仅用于编译时类型检查，它在运行时*不可用。*这就是为什么您在尝试添加`instanceof`检查时收到错误的原因。

如果您确定您的`Object`确实始终是 a，`List<MyObject>`那么我会说`@SuppressWarnings`没关系，如果您记录了为什么您确定这不是问题的原因。

但是，如果您绝对想避免警告，则可以创建自己的`List`实现（例如，`MyObjectList`），它本身不是通用的，而是实现`List<MyObject>`的。然后您可以在运行时进行`instanceof`检查。`MyObjectList`

另一种选择是按照错误提示进行检查并转换`List<?>`为。`instanceof`然后您可以遍历列表中的元素并检查它们是否实际上都是 MyObject 的所有实例，并将它们复制到一个新的`List<MyObject>`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-01T11:45:11.783

好吧，我终于设法找到了解决方案。

正如@Medo42 所说：

> 另一种选择是根据 instanceof 错误提示检查并转换为 List 。然后您可以遍历列表中的元素并检查它们是否实际上都是 MyObject 的实例，并将它们复制到一个新的列表中。

尽管我没有经历过创建一个全新对象的过程，以使这个特殊案例“无警告”地工作，但这是正确的方向。

所以我采用了@lokoko 的想法并在一个新`setItems()`方法中使用它，使用`Object`参数而不是 a`List<MyObject>`以确保

结果代码如下：

```
public void setItems(List<MyObject> var){
    this.list = var;
}

public void setItems(Object var){
    List<MyObject> result = new ArrayList<MyObject>();
    if (var instanceof List){
        for(int i = 0; i < ((List<?>)var).size(); i++){
            Object item = ((List<?>) var).get(i);
            if(item instanceof MyObject){
                result.add((MyObject) item);
            }
        }
    }
    setItems(result);
} 
```

感谢大家的帮助！

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-01T10:34:13.677

尝试这样的事情：

```
List<?> result = (List<?>) results.values;
for (Object object : result) {
    if (object instanceof MyObject) {
        tempList.add((MyObject) object); // <-- add to temp
    }
}

filteredItems = tempList; // <-- set filtered 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T09:37:07.120

您可以在将其传递给之前执行检查`setItems()`。

```
final Object myListObj = reuslts.values;
if(myListObj instanceof List<?>) {
    if(((List<?>)myListObj).get(0) instanceof MyObject)
        // You can safely suppress the warning here because you made sure it is a List containing MyObject
        MyObjectAdapter.this.setItems((List<? extends MyObject>) myListObj);

} 
```

但是，您需要相应地更改`setItems()`方法：

```
public void setItems(List<? extends MyObject> list) {
    // Your code here
} 
```

# mysql - Mysql水平连接，表值作为列

> ID：14642986
> 
> 赞同：0
> 
> 时间：2013-02-01T09:16:14.687
> 
> 标签：mysql, sql, join

我有 3 个表项，item_sizes，这些字段的大小：

```
items
id
name

item_sizes
item_id
size_id

sizes
id
size 
```

尺寸具有以下值，例如：S、M、XL、XXL 等

```
item_id   |   name   |   S   |   M   |  XL  ...
--------------------------------------------
1             shirt      1       0      1
2             dress      0       1      1
3             jacket     1       1      1 
```

等等。值 1 表示此项目具有此大小。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:30:21.600

```
SELECT  a.id,
        a.name,
        SUM(CASE WHEN c.size = 'S' THEN 1 ELSE 0 END) `S`,
        SUM(CASE WHEN c.size = 'M' THEN 1 ELSE 0 END) `M`,
        SUM(CASE WHEN c.size = 'L' THEN 1 ELSE 0 END) `L`,
        SUM(CASE WHEN c.size = 'XL' THEN 1 ELSE 0 END) `XL`,
        SUM(CASE WHEN c.size = 'XXL' THEN 1 ELSE 0 END) `XXL`
FROM    items a
        LEFT JOIN item_sizes b
            ON a.id = b.item_id
        LEFT JOIN sizes c
            ON b.size_ID = c.id
GROUP   BY a.id, a.name 
```

利用`PreparedStatament`

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(CASE WHEN c.size = ''',
      size,
      ''' then 1 ELSE 0 end) AS ',
      size
    )
  ) INTO @sql
FROM sizes;

SET @sql = CONCAT('SELECT  a.id,
                           a.name, ', @sql, ' 
                  FROM    items a
                          LEFT JOIN item_sizes b
                              ON a.id = b.item_id
                          LEFT JOIN sizes c
                              ON b.size_ID = c.id
                  GROUP   BY a.id, a.name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# mysql - SQL如何连接两个不同的表列作为结果

> ID：14642991
> 
> 赞同：1
> 
> 时间：2013-02-01T09:16:27.197
> 
> 标签：mysql, sql

我有两张桌子：

表格1：

```
---------------------------
|id_column1 | name_column |
---------------------------
|        1  | my_name1    |
|        2  | my_name2    |
--------------------------- 
```

表2：

```
--------------------------------------
|id_column2 | surname_column | fk_id1|
--------------------------------------
|      111  | my_surname1    | 1     |
|      222  | my_surname2    | 2     |
--------------------------------------
fk_id1 is foreign key referenced to table1.id_column1

SELECT * FROM table1 WHERE fk_id1=1;

--------------------------------------
|id_column2 | surname_column | fk_id1|
--------------------------------------
|      111  | my_surname1    | 1     | 
```

我怎样才能得到这个（是否有可能加入两个表列作为结果）：

```
------------------------------------------------
|id_column2 | surname_column | fk_id1| name    |
------------------------------------------------
|      111  | my_surname1    | 1     |my_name1 | 
```

如下所示：

```
SELECT * FROM table2 WHERE fk_id1=1 AND SELECT name FROM table1 WHERE id_column1=1; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T09:19:56.800

```
SELECT id_column2,surname_column,fk_id1,name_column FROM table1,table2 WHERE table1.id_column1=table2.fk_id1 AND table1.id_column1=1; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T09:20:34.217

你的意思是这样的？

```
SELECT t2.*, t1.name_column 
FROM table2 t2 
     INNER JOIN table1 t1 on t2.fk_id1 = id_column1 
WHERE t1.id_column1 = 1 
```

这是一个用于测试的示例[SQL Fiddle 。](http://sqlfiddle.com/#!2/1bc00/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:58:48.723

这很简单。可以使用内部联接来完成。

```
SELECT id_column2,surname_column,fk_id1,name_column as name FROM table1 Inner Join table2 on table1.id_column1=table2.fk_id1 where table1.id_column1=1; 
```

或者

```
SELECT id_column2,surname_column,fk_id1,name_column as name FROM table1 , table2 where table1.id_column1=table2.fk_id1 and table1.id_column1=1; 
```

如果您希望得到以下格式的结果：

```
------------------------------------------------
|id_column2 | surname_column | fk_id1| name    |
------------------------------------------------
|      111  | my_surname1    | 1     |my_name1 | 
```

# sql - 将 WHERE IN 分成多个 SELECTS

> ID：14642992
> 
> 赞同：0
> 
> 时间：2013-02-01T09:16:27.747
> 
> 标签：sql

[将这个](https://dl.dropbox.com/u/16821294/WhereOBJECTIDIN122072Items)WHERE IN 分解为许多选择是否会使整体*性能*更好

```
SELECT aField FROM aTable WHERE objectId IN (0,1,2...999) * many
```

与拥有巨大的 WHERE objectId IN（700k 项）相比。

编辑 - -

我在内存中的 objectIds 列表可以多达 700k 个项目。它们可以是连续的，但不太可能。where 子句中的字段（在这种情况下为 objectId）是否被索引也不是决定性的。

允许我仅通过 WHERE CLAUSE 的第三方应用程序当前正在使用 Oracle DB。它还具有连接到其他类型数据库的选项，但我正在开发的插件的用户群主要针对 Oracle 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:20:58.690

它更好读但更难调试，在内部它会很有趣，哪个更快，通常我会说带有 ObjectID 列表的选项，但是传输如此大量的数据也会消耗一些性能，您可以比较两种变体根据我们的 DBMS 使用解释计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:45:04.313

多达 70 万件商品？如果是这种情况，我会认真考虑将它们存储在一个单独的表中并使用 a`JOIN`代替 - 如果 objectId 是索引外键，那将执行得更好。

# linux - 在 linux mint 上安装 clang

> ID：14642994
> 
> 赞同：1
> 
> 时间：2013-02-01T09:16:31.157
> 
> 标签：linux, clang

我正在尝试根据以下内容安装 clang：
[Is clang working on linux](https://stackoverflow.com/questions/14519158/is-clang-working-on-linux)
但我收到以下错误：

E: 无法定位包铿锵声

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:04:54.193

Clang 在某个时候被删除了。“可能需要更改您的 sources.list 以指向 Debian 测试。”

取自这里[http://forums.linuxmint.com/viewtopic.php?f=190&t=102090&p=579467](http://forums.linuxmint.com/viewtopic.php?f=190&t=102090&p=579467)

# testing - 低内存开销 XML 解析

> ID：14642998
> 
> 赞同：1
> 
> 时间：2013-02-01T09:16:40.130
> 
> 标签：testing, grails, memory-management, memory-leaks, groovy

*介绍：*

我正在开发一个 Web 应用程序 (Grails) 并且有一个 XML 操作（上传和导入 > 20MB 文件），该操作具有巨大的内存消耗，在我的生产环境中导致 OutOfMemoryExceptions。

所以我想比较一下 XMLSlurper/XMLParser/ [XmlTwig](http://groovy.329449.n5.nabble.com/first-step-toward-Xml-Twig-for-Groovy-groovy-util-XPathXmlSlurper2-groovy-td4923577.html)的内存消耗（老实说我懒得为我的 DOM 写一个 SAX 解析器）

*我想知道的：*

我缺乏一个好主意如何在非生产环境（普通的 groovy 而不是 grails 环境）中开始一些批处理执行。**我想多次测试不同的实现，测量内存消耗**（可能还有 cpu 时间）并显示平均值。我的生产环境的内存设置如何设置也可能很重要（-XX:MaxPermSize，...，在 Tomcat 上），改变它也会很好。

有没有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:22:56.933

这是一个很难直接回答的问题。但是我来了...

对 URL 使用 DOM 解析器或类似 Groovy 的 XMLSlurper 应该可以解决问题（或者将文件上传到服务器，然后使用 XMLSlurper）。每当您处理大文件时，您确实希望避免将整个文件加载到内存中*然后*对其进行处理，看起来您理解为什么会这样。比较每个实现似乎有点矫枉过正，所以只需选择一个您信任的不会预先将所有内容加载到内存中的实现。

另外，就tomcat的jvm设置而言，您应该在合理范围内利用可用的硬件...... 在需要更多内存才能有效运行的 Java 环境中尤其如此，因此最大限度地设置设置 (-Xmx2048m -Xms2048m -XX:MaxPermSize=256m)。

# python - pefle：如何处理 unicode 文件名

> ID：14642999
> 
> 赞同：0
> 
> 时间：2013-02-01T09:16:44.220
> 
> 标签：python, unicode

据说 pefile python 模块 v1.2.8 能够处理 unicode 字符。我安装了 1.2.10，但在传递带有 Japanesse 文件名的文件时仍然遇到异常。我将如何传递文件名具有 UnicodeCharacters 的 PE 文件？

```
# -*- coding: utf8 -*-
import pefile
pe = pefile.PE(str("c:/temp/じゃｙそｎ.exe").decode('utf-8')) 
```

上面的代码片段给出了这个例外：

```
UnicodeEncodeError: 'ascii' codec can't encode characters in position 37-194: ordinal 
not in range(128) 
```

我该如何处理？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:22:32.817

str() 不是 unicode()。

尝试使用 unicode 字节串（注意 ".:

```
pe = pefile.PE(u"c:/temp/じゃｙそｎ.exe")) 
```

然后阅读：

[http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)