# StackOverflow 问答 15852000-15852999

# ios - 如何在 iOS 上突出显示多个文本片段？

> ID：15852001
> 
> 赞同：1
> 
> 时间：2013-04-06T14:17:20.877
> 
> 标签：ios, uiwebview, uitextview, highlighting

过去几天，我一直在寻找合适的解决方案来突出显示 iOS 上的多个文本片段。总体思路类似于亚马逊 Kindle 应用程序中文本突出显示的工作方式。

我已经尝试了`UITextView`as well `UIWebView`，但在可用性和性能方面我还没有找到合适的解决方案。

这个想法很简单。用户点击一个句子并且该句子被突出显示。当点击另一个句子时，该句子也会突出显示。用于突出显示文本的内置解决方案不适用于此目的。该解决方案的一个重要方面是文本需要设置样式，这在`UITextView`iOS 6 中就可以实现。

我的问题是相当笼统的，也就是说，有哪些可行的方法来实现这种功能？是否有任何开源解决方案可以满足我的描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:37:36.297

我会建议你在多行 UILabel 上使用 NSAttributedString。从 iOS 6 开始，UILabels 默认支持属性字符串，无需任何修改。

```
NSMutableAttributedString *str = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"Some text and some more %@", dynamicString]];

//Change background color to highlight a sentence, by giving sentence's range
[str addAttribute:NSBackgroundColorAttributeName value:[UIColor yellowColor] range:NSMakeRange(sentenceStartIndex, sentenceLength)];

[label setAttributedText:str]; 
```

编辑：原来 UITextViews 也支持 NSAttributedString 我没有尝试过，所以你可以用 UITextViews 替换 UILabels。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:52:16.287

我推荐使用Matt Thompson 的[TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)。它支持属性字符串，可以一直追溯到 iOS 4，并且是 MIT 许可的。

# ruby - 如何在 SketchUp 中调试 ruby 插件？

> ID：15852006
> 
> 赞同：0
> 
> 时间：2013-04-06T14:17:44.763
> 
> 标签：ruby, debugging, plugins, sketchup

我在 SketchUp 中调试 ruby​​ 插件的唯一提示是使用`puts`.

我试图以这种方式启动 SketchUp：，`sketchup.exe > log.txt 2> errors.txt`但它只显示来自 SketchUp 应用程序的日志/错误，而不是来自其插件。

有谁知道如何：

*   在 SketchUp 中一步一步执行
*   当插件崩溃 SketchUp 时获取执行堆栈
*   在这种情况下有助于调试 ruby​​ 插件的任何其他想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-23T22:43:53.033

SketchUp 于 2014 年 4 月 15 日发布了 SketchUp Ruby API 的开源调试器：

[https://github.com/SketchUp/sketchup-ruby-debugger](https://github.com/SketchUp/sketchup-ruby-debugger)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T10:23:25.870

**更新：**从 SketchUp 2014 开始，您可以使用 Ruby IDE 单步执行 Ruby 代码。按照此 GitHub 存储库中的说明进行操作：[https](https://github.com/SketchUp/sketchup-ruby-debugger) ://github.com/SketchUp/sketchup-ruby-debugger 不再`puts`调试！

* * *

TBD 已经编写并发布了一个调试 SketchUp Ruby 插件的桥梁：http: [//labs.plugins.ro/](http://labs.plugins.ro/)

这可能就是你要找的。我自己还没有使用它 - 所以不能详细说明它。

* * *

我经常使用对 WIN32 api 的调用，`OutputDebugString`它允许我查看我发送给它的输出（在 DebugView 中），无论 SU 是否崩溃 - 它不会像向 SketchUp Ruby 输出大量内容那样减慢执行速度控制台： [http ://www.thomthom.net/software/sketchup/tt_lib2/doc/TT.html#debug-class_method](http://www.thomthom.net/software/sketchup/tt_lib2/doc/TT.html#debug-class_method)

（我的意思是直接链接到 BitBucket 源代码，但该网站暂时关闭。回购：[https](https://bitbucket.org/thomthom/tt-library-2/) ://bitbucket.org/thomthom/tt-library-2/ ）编辑：网站重新上线 - 直接链接：[https ://bitbucket.org/thomthom/tt-library-2/src/tip/TT_Lib2/debug.rb?at=Version%202.8](https://bitbucket.org/thomthom/tt-library-2/src/tip/TT_Lib2/debug.rb?at=Version%202.8)

`puts`如果您想要`OutputDebugString`快速捕获所有解决方案，也可以重新路由。

* * *

顺便说一句，SketchUp 团队还发布了开发人员工具实用程序，该实用程序具有增强的 Ruby 控制台和单元测试框架：[https ://github.com/SketchUp/sketchup-developer-tools](https://github.com/SketchUp/sketchup-developer-tools)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T20:27:26.620

看起来 SketchUp 的人在 2014 年 10 月发布了一个新的单元测试框架。我还没有尝试使用它，但会试一试并报告我的发现：

[https://github.com/SketchUp/testup-2](https://github.com/SketchUp/testup-2)

# html - 标题中的图标/图像

> ID：15852009
> 
> 赞同：1
> 
> 时间：2013-04-06T14:17:55.473
> 
> 标签：html, google-chrome, safari, favicon

我刚刚看到这个网站（[http://helios.io](http://helios.io)），它的标题中有一个图标。不是网站图标，而是标题文本旁边（在它的右侧）。

![是UA向导吗？](https://i.stack.imgur.com/wkxUm.png)

这是如何实现的？

（适用于 Safari 和 Chrome）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T14:21:12.077

那将是 Unicode 字符`U+1F680`。

你可以在这里找到它，使用方便的 Unicode 字符搜索：

[http://www.fileformat.info/info/unicode/char/search.htm?q=rocket&preview=entity](http://www.fileformat.info/info/unicode/char/search.htm?q=rocket&preview=entity)

在您的 Mac 上，它使用内置的表情符号字体进行渲染 - 预览在这里：

[http://www.iemoji.com/view/emoji/146/places/rocket](http://www.iemoji.com/view/emoji/146/places/rocket)

# linux - LogWatch 报告的可能的 ^null$ 漏洞利用是什么？

> ID：15852010
> 
> 赞同：9
> 
> 时间：2013-04-06T14:18:12.247
> 
> 标签：linux, security, exploit

[LogWatch](http://sourceforge.net/projects/logwatch/?source=navbar)是一个不错的工具，可以提供有关 linux 日志文件的每日报告。它包括几个信息摘要，如流量、登录的用户、使用 sudo 的用户、相关的内核消息、探测服务器的 IP、探测你的 apache 的搜索引擎等......

其中一部分包括使用已知漏洞尝试入侵您的服务器的 IP 地址。他们不一定成功，但无论如何他们都列在报告中以获取知识。这就是它的样子。

```
Attempts to use known hacks by 4 hosts were logged 4 time(s) from:
   187.13.156.179: 1 Time(s)
      ^null$ 1 Time(s) 
   187.60.121.62: 1 Time(s)
      ^null$ 1 Time(s) 
   189.123.240.18: 1 Time(s)
      ^null$ 1 Time(s) 
   189.70.214.124: 1 Time(s)
      ^null$ 1 Time(s) 
```

**我的问题是这种`^null$`攻击到底是什么？我试过用谷歌搜索这个，但似乎没有任何相关的东西出现。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-17T07:38:55.277

这通常不用担心 - 它不一定是实际攻击。“`^null$`攻击”只是一个客户端连接终止而不发送任何 HTTP 请求（即与您的 Web 服务器建立连接，但没有收到请求）。

如果您从一个 IP 在您的服务器上进行了多次尝试，或者`^null$`每个 IP 有多个条目，那么您可能有协同尝试的证据。事实上，我建议您可以放心地忽略上面给出的示例日志。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-11T00:41:15.190

有趣的是，[Heartbleed](http://heartbleed.com/)探测转化为来自 LogWatch 的此类警告：

`Attempts to use known hacks by 1 hosts were logged 1 time(s) from: 54.82.203.167: 1 Time(s) ^null$ 1 Time(s)`

相应的 Apache SSL 日志条目是：

`XXXXXX:443 54.82.203.167 - - [10/Apr/2014:00:19:45 +0200] "quit" 301 1313 "-" "-"`

（使用[http://filippo.io/Heartbleed/](http://filippo.io/Heartbleed/)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-09T20:28:09.837

几种类型的监控服务也会使这种情况发生；例如 uptimerobot.com：

10 台主机使用已知黑客的尝试记录了 107 次，来自：74.86.158.106：91 次 ^null$ 91 次

74.86.158.106 - - [09/Feb/2015:01:09:54 -0500] “GET / HTTP/1.1” 200 17896 “-” “Mozilla/5.0+（兼容；UptimeRobot/2.​​0；[http://www. uptimerobot.com/](http://www.uptimerobot.com/) )"

74.86.158.106 - - [09/Feb/2015:01:10:47 -0500] “HEAD / HTTP/1.1” 200 - “-” “Mozilla/5.0+（兼容；UptimeRobot/2.​​0；[http://www. uptimerobot.com/](http://www.uptimerobot.com/) )"

某些类型的故障转移应用程序也可能会触发它，例如 heartbeat 和 ldirectord（取决于它们的配置）。

# node.js - 为什么 settimeout 会阻塞事件循环

> ID：15852011
> 
> 赞同：6
> 
> 时间：2013-04-06T14:18:19.827
> 
> 标签：node.js

注意：这不是关于 settimeout 的复制帖子，这里的关键答案是浏览器设计选项。

我开始学习node.js：一个测试异步的简单示例：

```
var http=require('http');

http.createServer(
    function(request, response){

        response.writeHead(200);
        response.write("Hello, dog is running");
        setTimeout(
            function(){
                response.write("Dog is done");
                response.end();
            },
            10000
        );

    }
).listen(8080);
console.log("Listen on port 8080") 
```

一件有趣的事情是它的行为在带有 curl 的命令行和浏览器中是不同的：在 Ubuntu 12.10 中，我在两个控制台中使用 curl localhost:8080，它们在几乎相同的 10 次发送中响应。

但是，我打开两个浏览器，几乎同时发出请求，但整个过程花了我 20 秒？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-06T17:30:21.633

等待的是浏览器，而不是 node.js

如果您`http://localhost:8080/`在两个选项卡中运行服务器并请求，则需要 20 秒，因为浏览器会在启动第二个之前等待对相同 url 的第一个请求。

如果您运行服务器并请求`http://localhost:8080/1`并`http://localhost:8080/2`在两个选项卡中再次需要 10 秒。

# sip - “SIP/2.0 488 此处不可接受”错误

> ID：15852013
> 
> 赞同：5
> 
> 时间：2013-04-06T14:18:25.467
> 
> 标签：sip, sip-server, mjsip

我是 MjSip 的新手，我使用 MjUa 来创建客户端。我想连接到星号服务器。它支持 G.711，但我无法配置我的应用程序。我使用这个配置：

```
 media=audio 4000 rtp/avp {audio 0 PCMU 8000 160, audio 8 PCMA 8000 160} 
```

但我仍然收到 488 错误，请帮助我。如何更改“MjUa”配置文件？

* * *

这是所有消息日志：

```
INVITE sip:57@192.168.0.254:5060 SIP/2.0
Via: SIP/2.0/UDP 192.168.0.57:5060;rport;branch=z9hG4bK2bfdff77
Max-Forwards: 70
To: "Alice" <sip:57@192.168.0.254:5060>
From: "aziz" <sip:157@192.168.0.254>;tag=350164683297
Call-ID: 728007708208@192.168.0.57
CSeq: 1 INVITE
Contact: <sip:157@192.168.0.57>
Expires: 3600
User-Agent: mjsip 1.7
Content-Length: 141
Content-Type: application/sdp

v=0
o=157 0 0 IN IP4 192.168.0.57
s=-
c=IN IP4 192.168.0.57
t=0 0
m=audio 4000 rtp/avp 0 8
a=rtpmap:0 PCMU/8000
a=rtpmap:8 PCMA/8000
-----End-of-message-----

1365314026097: 10:23:46.097 Sun 07 Apr 2013, 192.168.0.254:5060/udp (519 bytes) received
SIP/2.0 401 Unauthorized
Via: SIP/2.0/UDP 192.168.0.57:5060;branch=z9hG4bK2bfdff77;received=192.168.0.57;rport=5060
From: "aziz" <sip:157@192.168.0.254>;tag=350164683297
To: "Alice" <sip:57@192.168.0.254:5060>;tag=as3f160681
Call-ID: 728007708208@192.168.0.57
CSeq: 1 INVITE
Server: FPBX-2.8.1(1.8.11.0)
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
WWW-Authenticate: Digest algorithm=MD5, realm="asterisk", nonce="6e640e9a"
Content-Length: 0

-----End-of-message-----

1365314026107: 10:23:46.107 Sun 07 Apr 2013, 192.168.0.254:5060/udp (326 bytes) sent
ACK sip:57@192.168.0.254:5060 SIP/2.0
Via: SIP/2.0/UDP 192.168.0.57:5060;rport;branch=z9hG4bK2bfdff77
Max-Forwards: 70
To: "Alice" <sip:57@192.168.0.254:5060>;tag=as3f160681
From: "aziz" <sip:157@192.168.0.254>;tag=350164683297
Call-ID: 728007708208@192.168.0.57
CSeq: 1 ACK
User-Agent: mjsip 1.7
Content-Length: 0

-----End-of-message-----

1365314026151: 10:23:46.151 Sun 07 Apr 2013, 192.168.0.254:5060/udp (706 bytes) sent
INVITE sip:57@192.168.0.254:5060 SIP/2.0
Via: SIP/2.0/UDP 192.168.0.57:5060;rport;branch=z9hG4bK644461b7
Max-Forwards: 70
To: "Alice" <sip:57@192.168.0.254:5060>
From: "aziz" <sip:157@192.168.0.254>;tag=350164683297
Call-ID: 728007708208@192.168.0.57
CSeq: 2 INVITE
Contact: <sip:157@192.168.0.57>
Expires: 3600
User-Agent: mjsip 1.7
Authorization: Digest username="157", realm="asterisk", nonce="6e640e9a", uri="sip:57@192.168.0.254:5060", algorithm=MD5, response="84ff5e12b8325a153e09ac2e316f5b1f"
Content-Length: 141
Content-Type: application/sdp

v=0
o=157 0 0 IN IP4 192.168.0.57
s=-
c=IN IP4 192.168.0.57
t=0 0
m=audio 4000 rtp/avp 0 8
a=rtpmap:0 PCMU/8000
a=rtpmap:8 PCMA/8000
-----End-of-message-----

1365314026152: 10:23:46.152 Sun 07 Apr 2013, 192.168.0.254:5060/udp (450 bytes) received
SIP/2.0 488 Not acceptable here
Via: SIP/2.0/UDP 192.168.0.57:5060;branch=z9hG4bK644461b7;received=192.168.0.57;rport=5060
From: "aziz" <sip:157@192.168.0.254>;tag=350164683297
To: "Alice" <sip:57@192.168.0.254:5060>;tag=as3f160681
Call-ID: 728007708208@192.168.0.57
CSeq: 2 INVITE
Server: FPBX-2.8.1(1.8.11.0)
Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO, PUBLISH
Supported: replaces, timer
Content-Length: 0

-----End-of-message-----

1365314026155: 10:23:46.155 Sun 07 Apr 2013, 192.168.0.254:5060/udp (326 bytes) sent
ACK sip:57@192.168.0.254:5060 SIP/2.0
Via: SIP/2.0/UDP 192.168.0.57:5060;rport;branch=z9hG4bK644461b7
Max-Forwards: 70
To: "Alice" <sip:57@192.168.0.254:5060>;tag=as3f160681
From: "aziz" <sip:157@192.168.0.254>;tag=350164683297
Call-ID: 728007708208@192.168.0.57
CSeq: 2 ACK
User-Agent: mjsip 1.7
Content-Length: 0

-----End-of-message----- 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-28T19:05:48.013

有点晚了，但通常这与编解码器不兼容有关。对于遇到此问题的任何人，他们应该检查双方（服务器和客户端）是否至少有一个可以协商的代码。

从发布的日志中：

```
a=rtpmap:0 PCMU/8000
a=rtpmap:8 PCMA/8000 
```

似乎请求了 G711，但在服务器端不可用。因此，服务器拒绝 RTP 通道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-21T14:08:30.250

我在使用 Snom 300 电话联系 Asterisk 服务器时遇到了同样的错误。在手机上关闭 RTP 加密对我有用。

在 V7 固件上，它位于：“V7：身份 - RTP 设置（部分）：RTP 加密”。显然，在 V7 上，RTP 加密默认开启：[http ://wiki.snom.com/wiki/index.php/Settings/user_srtp](http://wiki.snom.com/wiki/index.php/Settings/user_srtp)

我不知道根本原因是否是 Asterisk 服务器配置错误（我没有运行它），但至少这解决了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-07T01:46:09.820

对我来说，这是我的 VOIP 提供商的服务器端设置，只需要加密连接。在客户端恢复为纯文本连接后，我忘记了它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-16T11:27:01.423

我在 Zoiper5 桌面应用程序中遇到了这个错误。该问题可能通过设置[RTCP Feedback-> OFF](https://i.stack.imgur.com/ZIffV.png)解决，之前我使用“兼容模式”，因此它是 488 错误的最可能原因。另外，我已将编解码器的顺序更改为：G.711 mulaw；一条法律; GSM FR；G.722 而将 OPUS 编解码器移动到最不优选的现场[编解码器的顺序](https://i.stack.imgur.com/DFAcM.png)。

# mysql - 文字不会显示

> ID：15852023
> 
> 赞同：2
> 
> 时间：2013-04-06T14:19:33.523
> 
> 标签：mysql

我有这个查询；

```
<?php

$oQuery = mysql_query("SELECT alertboxheader FROM cms_settings");
while($rQuery=mysql_real_escape_string($oQuery)){
echo $rQuery['alertboxheader'];   }
?> 
```

但它不显示任何文本！我需要从数据库中获取它； [http://i50.tinypic.com/30wva0x.png](http://i50.tinypic.com/30wva0x.png)

![在此处输入图像描述](https://i.stack.imgur.com/2IFza.png)

我希望有一个人可以帮助我。

问候雷。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T14:21:17.837

你为什么用`mysql_real_escape_string`？尝试，`mysql_fetch_assoc`

```
<?php

    $oQuery = mysql_query("SELECT alertboxheader FROM cms_settings");
    while($rQuery = mysql_fetch_assoc($oQuery))
    {
        echo $rQuery['alertboxheader'];   
    }

?> 
```

*   [mysql_query](http://php.net/manual/en/function.mysql-query.php)

* * *

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:51:18.790

使用`select value from cms_settings where variable='alertboxheader';`并且不要忘记JW所说的。

# android - 扎根的 Transformer tf 101 与三星 Note 2 和三星 Galaxy Tab 之间的 AlertDialogue 的不同行为

> ID：15852030
> 
> 赞同：0
> 
> 时间：2013-04-06T14:20:27.157
> 
> 标签：android, android-alertdialog

所以，我有一个简单的代码：

```
private void promptToZap() {
    DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            switch (which) {
            case DialogInterface.BUTTON_POSITIVE:
                startProgressBar(20);
                break;

            case DialogInterface.BUTTON_NEGATIVE:
                gotoGrassLoop();
                break;
            }
        }
    };

    overlay.setProgress(0);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("CI is yellow, would you like to zap?").setPositiveButton("Yes", dialogClickListener).setNegativeButton("No", dialogClickListener).show();
} 
```

从只调用一次的方法中只调用一次。

在变压器上它工作正常。它提示一次，它完美地处理用户的选择。

在 Note 2 和 Galaxy Tab 上，它会提示两次。然后，当您从中选择选项时，它会执行两次结果。

所以，一般问题....

他们是一种检查是否已经显示 AlertDialog 的方法吗？

或者

我怎样才能让它只提示一次而不是两次？

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:00:42.730

好吧，谷歌应该比我做的多一点。

但解决方案类似于：[如何防止对话框打开两次](https://stackoverflow.com/questions/7527296/how-to-prevent-dialog-to-open-twice)

我只是使用了一个布尔值 isDialogShown 并在调用 .show() 之前检查它是否为 false，然后在 .show() 之后将其设置为 true，然后在按钮/case(switch) 语句中将其重置为 false。

这对我的目的有用。

# sql - SELECT 基于另一个 SELECT 的结果

> ID：15852031
> 
> 赞同：1
> 
> 时间：2013-04-06T14:20:50.393
> 
> 标签：sql, sql-server, sql-server-2008

是否可以根据第一个 SELECT 的结果运行另一个 SELECT？

例如：

```
SELECT COUNT(*) FROM table1 
```

如果结果为 0，我想显示结果：

```
SELECT A, B, C FROM table2 
```

如果第一个 SELECT 的结果不是 0，则显示第一个查询的结果并 IGNORE 第二个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:31:44.610

您当然可以根据第一个结果运行第二个选择：

你可以这样做：

```
declare @count integer = (select count(*) from table1)

if @count = 0
    select ... from table1
else
    select ... from table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:31:50.240

第一次查询的结果是计数，因此您可以使用该变量来避免重新运行查询。

```
DECLARE @count int = ( SELECT COUNT(*) FROM INFORMATION_SCHEMA.COLUMNS )

IF @count > 0
BEGIN
    SELECT TABLE_NAME, COLUMN_NAME, ORDINAL_POSITION FROM INFORMATION_SCHEMA.COLUMNS
END
ELSE
BEGIN
    SELECT @count AS total
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T23:53:20.177

您的问题不需要变量

```
if EXISTS (select * from table1)
    select A, B, C from table2 
```

# java - 地址 aeardy in use 异常（Multicast Socket）

> ID：15852037
> 
> 赞同：0
> 
> 时间：2013-04-06T14:21:20.590
> 
> 标签：java, multicastsocket

我试图为服务编写服务器和客户端，这将告诉当前时间。我的代码：

**服务器**

```
public class TimeServer {

   public static void main(String[] args) {
      try {
         final DatagramSocket so = new DatagramSocket(8189);
         new Thread(new Runnable() {
            @Override
            public void run() {
               try {
                  while (true) {
                     try {
                        InetAddress group = InetAddress.getByName("200.20.2.0");
                        byte[] buf = new byte[256];
                        Calendar cal = Calendar.getInstance();
                        buf = cal.toString().getBytes();
                        DatagramPacket packet = new DatagramPacket(buf, buf.length,
                                group, 8189);
                        so.send(packet);
                     } catch (IOException ex) {
                        ex.printStackTrace();
                     }
                     Thread.sleep((int)(Math.random() * 5));
                  }
               } catch (InterruptedException ex) {
                  ex.printStackTrace();
               }
            }
         }).start();
      } catch (IOException ex) {
         ex.printStackTrace();
      }
   }
} 
```

**客户**

```
public class TimeClient {

   public static void main(String[] args) {
      try {
         MulticastSocket so = new MulticastSocket(8190);
         InetAddress group = InetAddress.getByName("200.20.2.0");
         so.joinGroup(group);

         //5 razy czekamy na otrzymanie od serwera wiadomosci
         for (int a=0; a<5; a++) {
            byte[] buf = new byte[256];
            DatagramPacket packet = new DatagramPacket(buf, buf.length);
            so.receive(packet);

            String recv = new String(packet.getData());
            System.out.println("RECEIVED: " + recv);
         }

         so.leaveGroup(group);
         so.close();
      } catch (IOException ex) {
         ex.printStackTrace();
      } 
   }

} 
```

启动服务器然后启动客户端时，出现以下错误：

```
java.net.BindException: Address already in use
    at java.net.PlainDatagramSocketImpl.bind0(Native Method)
    at java.net.AbstractPlainDatagramSocketImpl.bind(AbstractPlainDatagramSocketImpl.java:95)
    at java.net.DatagramSocket.bind(DatagramSocket.java:376)
    at java.net.MulticastSocket.<init>(MulticastSocket.java:172)
    at java.net.MulticastSocket.<init>(MulticastSocket.java:137)
    at timeclient.TimeClient.main(TimeClient.java:13) 
```

请帮忙，谢谢

**编辑：** 我更改了客户端端口，现在出现异常：

```
java.net.SocketException: Not a multicast address
    at java.net.MulticastSocket.joinGroup(MulticastSocket.java:306)
    at timeclient.TimeClient.main(TimeClient.java:15) 
```

现在做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:23:43.707

每个端口只能由单个应用程序使用。在您的情况下，您的服务器和客户端（2 个应用程序）正在尝试使用导致异常的相同端口。

要修复它，例如将客户端的端口从更改`8189`为`8190`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:24:36.727

您必须更改客户端端口（或服务器端口），因为每个端口只能由单个进程使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:03:29.000

试试看`DatagramSocket.setReuseAddress(true)`会发生什么。

# php - oop，php，扩展类，调用类中的特定方法时运行函数

> ID：15852039
> 
> 赞同：0
> 
> 时间：2013-04-06T14:21:22.840
> 
> 标签：php, oop, extending

首先，关于oop 等，我几乎是个菜鸟，所以请善待。

我确实阅读了很多手册，但不知何故迷失在所有的东西中，找不到答案:(所以任何提示、链接等将不胜感激

无论如何，我发现自己处于需要在执行类中的特定方法时调用函数的情况。但是，我不能碰课堂本身。

为了演示，这个类是这样的：

```
/* icannot touch this class*/
class Bar extends Foo {
/*some other methods and variables here, omitted for sanity reasons**/

function DBSave(){      

    $this->cat_parent = intval($this->cat_parent);
    $this->cat_num_files = intval($this->cat_num_files);

    return parent::DBSave();
}

/*some more methods omitted for sanity reasons**/
}
/*end of class*/ 
```

/ *****编辑****** /

根据下面的评论，我现在写/添加了以下内容，但它并没有真正按照我希望的方式做事:(

```
class Baz extends Bar {
    public function DBSave() {
        /*here I want to use $this->cat_parent etc to do something with*/
        parent::DBSave();
    }
}
/*this is probably also wrong, but I tried with the following results*/
$b = new Baz();/*just adding this does nothing*/
$b->DBSave();/* when this is added as well it *always* runs regrdless of whether bar->foo is called*/ 
```

另外 - 我忘了提，抱歉 - Baz 中的方法需要变量（$this->cat_parent 等），希望上述内容有意义......？

/ *******编辑结束****** **** /

每当调用 DBSave 时，我想运行另一个函数，但我不知道该怎么做:( 我尝试了一些扩展类的方法，但它只是出错或一直调用它等等......将不胜感激

如果需要，当然很乐意扩展这个问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:23:51.597

最简单的方法可能是：

```
class Baz extends Bar {
    public function DBSave() {
        parent::DBSave();
    }
} 
```

您可以在该方法的主体中定义其他功能。

# amazon-web-services - 厨师和redisio错误

> ID：15852041
> 
> 赞同：1
> 
> 时间：2013-04-06T14:21:26.113
> 
> 标签：amazon-web-services, chef-solo

也许有人面临同样的情况

我们在 redis 上有一个干净的实例，它试图把一个厨师默认食谱只有

include_recipe "redisio :: 安装"

当我做饭时收到以下错误环境 AWS ec2.micro ubuntu 12.04 当我运行做饭时收到错误

```
================================================================================
Recipe Compile Error in /tmp/chef-solo/cookbooks/main/recipes/default.rb
================================================================================

NoMethodError
-------------
undefined method `[]' for nil:NilClass

Cookbook Trace:
---------------
  /tmp/chef-solo/cookbooks/ulimit/recipes/default.rb:13:in `block in from_file'
  /tmp/chef-solo/cookbooks/ulimit/recipes/default.rb:12:in `from_file'
  /tmp/chef-solo/cookbooks/redisio/recipes/install.rb:20:in `from_file'
  /tmp/chef-solo/cookbooks/main/recipes/default.rb:11:in `from_file'

Relevant File Content:
----------------------
/tmp/chef-solo/cookbooks/ulimit/recipes/default.rb:

  6:  # All rights reserved - Do Not Redistribute
  7:  #
  8:  ulimit = node['ulimit']
  9:  
 10:  case node[:platform]
 11:    when "debian", "ubuntu"
 12:      template "/etc/pam.d/su" do
 13>>       cookbook ulimit['pam_su_template_cookbook'] 
 14:      end
 15:  end
 16:  

[2013-04-06T14:09:50+00:00] ERROR: Running exception handlers
[2013-04-06T14:09:50+00:00] ERROR: Exception handlers complete
Chef Client failed. 0 resources updated
[2013-04-06T14:09:50+00:00] FATAL: Stacktrace dumped to /tmp/chef-solo/chef-stacktrace.out
[2013-04-06T14:09:50+00:00] FATAL: NoMethodError: undefined method `[]' for nil:NilClass
ERROR: RuntimeError: chef-solo failed. See output above. 
```

资源[https://github.com/Piom/redis-chef.git](https://github.com/Piom/redis-chef.git)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T02:36:36.380

我也遇到了这个问题。我有一种解决方法，但我也刚刚开始研究厨师。

问题是 redisio 取决于 ulimit 并且当您没有定义 ulimit 的任何属性时，看起来配方无法处理。

```
ulimit = node['ulimit'] 
```

尝试获取属性的哈希值，但结果为零。因此，如果您定义一些属性，它应该可以工作。

自从您下载后，可能会有更新版本的食谱。如果没有，`ulimit/attributes/default.rb`我有`default['ulimit']['pam_su_template_cookbook'] = nil`，它对我有用。

ulimit 让您限制资源。我认为它可以用来限制redis资源。（我也是新手。）所以更好的方法可能是弄清楚你想如何配置 ulimit 并设置正确的属性而不是 nil

# node.js - Mongoose find()，如何访问结果文档？

> ID：15852043
> 
> 赞同：12
> 
> 时间：2013-04-06T14:21:36.010
> 
> 标签：node.js, mongodb, express, mongoose

我刚开始玩猫鼬和猫鼬。我有以下代码：

```
var ninjaSchema = mongoose.Schema({
    name: String,
    skill: Number
});

var Ninja = mongoose.model('Ninja',ninjaSchema);

module.exports = {
init : function(){
    console.log('Connecting to database');
    mongoose.connect('mongodb://localhost/mydb');
    var db = mongoose.connection;
    db.on('error', console.error.bind(console, 'connection error:'));
    db.once('open', function callback () {
      console.log('Successfully connected!');
    });
},
createNinja : function(name,skill){
    var n = new Ninja({name:name,skill:skill});
    n.save(function(err,n){
        if (err)
            console.log('saving failed');
        console.log('saved '+ n.name);
    });
},
getNinjas : function(){
    var res = null;
    res = Ninja.findOne({},'name skill',function(err,docs){
        if (err)
            console.log('error occured in the query');
        return 'ninja name: '+docs.name+' ninja skill: '+docs.skill;
    });

    return res;
} 
```

向数据库添加条目没有问题，但检索它们时遇到问题。我对整个事情的运作方式有点困惑。我的理解如下：

有模式，就像 oop 中的类，所以只是数据库中记录的蓝图。该模型是一个记录，好吧，也许更多，因为我看到您可以向模型添加一个方法。嗯......我真的不明白如何使用它们。你能告诉我他们到底是什么吗？

言归正传：在发出 find 命令时，它调用了匿名函数，结果应该是 docs 吧？现在我如何访问它们？从现在开始，如果我记录 res，我会得到以下信息：

```
{ options: {},
safe: undefined,
_conditions: {},
_updateArg: {},
_fields: { name: 1, skill: 1 },
_geoComparison: undefined,
op: 'findOne',
model: 
{ [Function: model]
 base: 
  { connections: [Object],
    plugins: [],
    models: [Object],
    modelSchemas: [Object],
    options: {} },
 modelName: 'Ninja',
 model: [Function: model],
 db: 
  { base: [Object],
    collections: [Object],
    models: {},
    replica: false,
    hosts: null,
    host: 'localhost',
    port: 27017,
    user: undefined,
    pass: undefined,
    name: 'mydb',
    options: [Object],
    _readyState: 1,
    _closeCalled: false,
    _hasOpened: true,
    _listening: true,
    _events: [Object],
    db: [Object] },
 schema: 
  { paths: [Object],
    subpaths: {},
    virtuals: [Object],
    nested: {},
    inherits: {},
    callQueue: [],
    _indexes: [],
    methods: {},
    statics: {},
    tree: [Object],
    _requiredpaths: [],
    options: [Object],
    _events: {} },
 options: undefined,
 collection: 
  { collection: [Object],
    opts: [Object],
    name: 'ninjas',
    conn: [Object],
    queue: [],
    buffer: false } } } 
```

另外，如果我使用我`Ninja.find(...,function(err,docs){ ... })`如何阅读文档？或者我如何检索我的记录？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-06T15:27:05.997

我找到了错误。这更像是一个概念性的：我正在处理异步调用，并试图从另一个函数返回结果，但不知道它何时会执行。所以发生的事情是我请求执行 db 查询并返回结果，结果为空。这段代码：

```
getNinjas : function(){
    var res = null;
    Ninja.find({},'name skill',function(err,docs){
        if (err)
            console.log('error occured in the database');
        console.log(docs);
    });     
    return res;
} 
```

返回空值，但是！console.log(docs) 将数据库中的所有值打印到控制台，这是我试图做的。现在我需要进行更改，很可能传递一个回调，该回调将在收到结果时执行。

更改后的代码如下所示：

```
getNinjas : function(res){
    var twisted = function(res){
        return function(err, data){
            if (err){
                console.log('error occured');
                return;
            }
            res.send('My ninjas are:\n');
            console.log(data);
        }
    }

    Ninja.find({},'name skill',twisted(res));
} 
```

所以像这样我可以传递响应对象，这样我就可以发送我的忍者的名字:)

# css - 如何使我的搜索栏向右拉？

> ID：15852044
> 
> 赞同：0
> 
> 时间：2013-04-06T14:21:36.633
> 
> 标签：css

我已经在我的 Rails 应用程序上实现了一个搜索栏，但它不会在我的生活中正确使用。使用我使用的方法，有一个 form_tag 似乎覆盖了顶部导航栏。

搜索栏的代码如下所示：

```
 <%= form_tag search_path, :method => 'get', :class => "form-search", :style => "height:24px;" do %>
                <div class="input-append" style="padding-top:5px;"> 
                  <%= text_field_tag :search, params[:search], :class=>"span3 watermark search-query", :placeholder => "Search By Device or PIN"%>
                  <button class="btn" type="submit"><i class="icon-search"></i></button>     
                </div>
              <% end %> 
```

导航栏看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/fHFsE.png) 在任何标签中添加 pull-right 作为样式都不起作用。有没有人遇到过这个问题？

Bootstrap CSS 覆盖代码：

```
#Wrapper {
margin: 0 auto;
width: 900px;
}

.navbar-fixed-top {
  padding-bottom:0px !important;
  height:42px;
}

.navbar-inner {
  background-color: hsl(27, 94%, 39%) !important;
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#c05a05", endColorstr="#c05a05");
  background-image: -khtml-gradient(linear, left top, left bottom, from(#c05a05), to(#c05a05));
  background-image: -moz-linear-gradient(top, #c05a05, #c05a05);
  background-image: -ms-linear-gradient(top, #c05a05, #c05a05);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #c05a05), color-stop(100%, #c05a05));
  background-image: -webkit-linear-gradient(top, #c05a05, #c05a05);
  background-image: -o-linear-gradient(top, #c05a05, #c05a05);
  background-image: linear-gradient(#c05a05, #c05a05);
  border-color: #c05a05 #c05a05 hsl(27, 94%, 39%);
  color: #fff !important;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.00);
  -webkit-font-smoothing: antialiased;
  .border-radius(0) !important;
  }

.navbar .brand {
  display: block;
  float: left;
  padding: 10px 20px 10px;
  margin-left: -20px;
  font-size: 20px;
  font-weight: 200;
  color: white;
  text-shadow: 0 0px 0 #;
}

.navbar .nav > li > a {
    color: white;
    float: none;
    padding: 10px 15px;
    text-decoration: none;
    text-shadow: 0 0px 0 #ffffff;
}

.navbar .nav > li > a:focus 

.navbar .nav > li > a:hover {
  color: orange;
  text-decoration: none;
  background-color: transparent;
}

.container {
  max-width:900px;
}

.row-fluid {
  max-width:900px;
}

.span3 {
  max-width:210px;
}

.well {
  background-color: hsl(33, 100%, 93%) !important;
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffeedb", endColorstr="#ffeedb");
  background-image: -khtml-gradient(linear, left top, left bottom, from(#ffeedb), to(#ffeedb));
  background-image: -moz-linear-gradient(top, #ffeedb, #ffeedb);
  background-image: -ms-linear-gradient(top, #ffeedb, #ffeedb);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #ffeedb), color-stop(100%, #ffeedb));
  background-image: -webkit-linear-gradient(top, #ffeedb, #ffeedb);
  background-image: -o-linear-gradient(top, #ffeedb, #ffeedb);
  background-image: linear-gradient(#ffeedb, #ffeedb);
  border-color: #ffeedb #ffeedb hsl(33, 100%, 93%);
  color: #333 !important;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.00);
  -webkit-font-smoothing: antialiased;  
}

.well-thumbnail {
  background-color: white;
  border-radius: 5px;
  padding-top: 5px;
  padding-left: 5px;
  padding-right: 5px;
}

.row-padded {
  padding-top: 10px;
  background-color: #B8B8B8;
  border: 5px solid #DDD;
  margin-top: 10px;
}

.btn-danger {

}

.btn-custom-danger {
  background-color: hsl(0, 69%, 22%) !important;
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#b42121", endColorstr="#5e1111");
  background-image: -khtml-gradient(linear, left top, left bottom, from(#b42121), to(#5e1111));
  background-image: -moz-linear-gradient(top, #b42121, #5e1111);
  background-image: -ms-linear-gradient(top, #b42121, #5e1111);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #b42121), color-stop(100%, #5e1111));
  background-image: -webkit-linear-gradient(top, #b42121, #5e1111);
  background-image: -o-linear-gradient(top, #b42121, #5e1111);
  background-image: linear-gradient(#b42121, #5e1111);
  border-color: #5e1111 #5e1111 hsl(0, 69%, 17%);
  color: #fff !important;
  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.33);
  -webkit-font-smoothing: antialiased;
}

.btn-custom-primary {
  background-color: hsl(193, 32%, 49%) !important;
  background-repeat: repeat-x;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="#b8d3da", endColorstr="#5493a4");
  background-image: -khtml-gradient(linear, left top, left bottom, from(#b8d3da), to(#5493a4));
  background-image: -moz-linear-gradient(top, #b8d3da, #5493a4);
  background-image: -ms-linear-gradient(top, #b8d3da, #5493a4);
  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #b8d3da), color-stop(100%, #5493a4));
  background-image: -webkit-linear-gradient(top, #b8d3da, #5493a4);
  background-image: -o-linear-gradient(top, #b8d3da, #5493a4);
  background-image: linear-gradient(#b8d3da, #5493a4);
  border-color: #5493a4 #5493a4 hsl(193, 32%, 41.5%);
  color: #333 !important;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.49);
  -webkit-font-smoothing: antialiased;
}

#thumbnail-font{
  font-size:small;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:29:52.963

尝试使用`float:right`to 发送`.form-search`到标题的右侧。

```
.form-search {
    float:right;
} 
```

# mysql - Mysql排序分层数据

> ID：15852045
> 
> 赞同：3
> 
> 时间：2013-04-06T14:21:38.620
> 
> 标签：mysql, hierarchical

我有一个问题，上周正在处理这个问题，但还没有解决。我可以用 join 查询子菜单，但我不能订购它。

我有一张这样的桌子

```
| 编号 | 姓名 | 家长 | 订购 |    
|--------------------------------------------|
| 1 | 菜单1 | 0 | 1 |
| 2 | 子菜单1 | 1 | 2 |
| 3 | 子菜单2 | 1 | 1 |
| 4 | 子菜单 | 2 | 1 |
| 5 | 子子菜单:) | 4 | 1 |
| 6 | 菜单2 | 0 | 3 |
| 7 | 菜单3 | 0 | 2 |
|--------------------------------------------|

```

我想得到这样的东西。

```
| - 菜单1
      | - 子菜单2
      | - 子菜单1
              | - 子菜单
                       | - 子子菜单:)
| - 菜单3
| - 菜单2

```

谁能给我一个想法如何处理这个？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-27T07:56:56.747

我研究了[http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/](http://explainextended.com/2009/03/17/hierarchical-queries-in-mysql/)并找到了解决您问题的方法。我想你已经有了你的解决方案，但是对于任何其他正在寻找相同解决方案的人，我在这里回答。

我的解决方案也适用于关系表，因为我们不能在关系表的父字段中设置零 (0)。它将为 NULL，我的解决方案也适用于关系表。

## 功能

```
DROP FUNCTION IF EXISTS hierarchy_connect_by_parent_eq_prior_id;
DELIMITER $$
CREATE FUNCTION hierarchy_connect_by_parent_eq_prior_id(value INT) RETURNS INTEGER
NOT DETERMINISTIC
READS SQL DATA
BEGIN
    DECLARE _parent INT;
    DECLARE _rank INT;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET @id = NULL;

    SET _parent = @id;
    SET _rank = 0;

    IF @id IS NULL THEN
            RETURN NULL;
    END IF;

    LOOP
        SET @innerrank = 0;
        SELECT p.id 
        INTO   @id
        FROM   (
                SELECT   id, @innerrank := @innerrank+1 AS rank 
                FROM     yourTable 
                WHERE    COALESCE(parent, 0) = _parent 
                ORDER BY yourField
                ) p 
        WHERE   p.rank > _rank LIMIT 0, 1;
        IF @id IS NOT NULL OR _parent = @start_with THEN
                SET @level = @level + 1;
                RETURN @id;
        END IF;
        SET @level := @level - 1;
        SET @innerrank = 0;
        SELECT COALESCE(p.parent, 0), p.rank
        INTO   _parent, _rank
        FROM   (
                SELECT id, parent, @innerrank := @innerrank+1 AS rank
                FROM    yourTable
                WHERE   COALESCE(parent, 0) = (
                    SELECT COALESCE(parent, 0) FROM yourTable WHERE id = _parent
                    ) 
                ORDER BY yourField
               ) p
        WHERE p.id = _parent;
    END LOOP;       
END;
$$
DELIMITER ; 
```

请替换`yourTable`为您的表格名称和`yourField`您想要对数据进行排序的字段名称。

## 查询

```
SELECT ou.* FROM (
    SELECT hi.id, parent, yourField FROM (
        SELECT hierarchy_connect_by_parent_eq_prior_id(id) AS id, 
            @level AS level 
            FROM (
                SELECT @start_with := 0, @id := @start_with, @level := 0
                 ) vars, yourTable 
            WHERE @id IS NOT NULL
        ) ho 
    JOIN yourTable hi ON hi.id = ho.id
) ou 
```

请替换`yourTable`为您的表格名称和`yourField`您要显示的字段名称。

这将产生您需要的结果。我对其进行了测试并且效果很好。

这是[http://sqlfiddle.com/#!9/9d060d/2](http://sqlfiddle.com/#!9/9d060d/2)以查看它的实际效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:38:21.023

你不能用一个查询来做到这一点。只需在您选择的脚本语言中使用递归

```
class Hierarchy

    function __construct(db)
        db = db.connect
        this.stmt = db.prepare "SELECT name FROM Hierarchy WHERE parent = ?"
        this.tree = {}
    end

    function getHierarchyFromParent(parent = 0, tree = null)
        tree = this.tree if tree is null
        while result = this.stmt.execute(parent).fetch
            tree[result.name] = {
                children: this.getHierarchyFromParent result.id tree[result.name]
            }
        end
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:47:15.453

根据您的回答 - 您希望将结果放在一个平面列表中。在这种情况下，我会说最有效的方法是确保您更改订单策略，您将在选择商品时避免不必要的复杂性和开销。如果您的订购也基于平面列表，您将解决问题：

```
| id   |  name           |  parent | order  |    
|-------------------------------------------|
| 1    | menu1           |  0      |   1    |
| 2    | submenu1        |  1      |   2    |
| 3    | submenu2        |  1      |   3    |
| 4    | subsubmenu      |  2      |   4    |
| 5    | subsubsubmenu:) |  4      |   5    |
| 6    | menu2           |  0      |   6    |
| 7    | menu3           |  0      |   7    |
|-------------------------------------------| 
```

实现这样的排序并不难。

# .net - GUID + DataBind 给出异常？

> ID：15852046
> 
> 赞同：0
> 
> 时间：2013-04-06T14:21:46.957
> 
> 标签：.net, data-binding, ado.net, guid

我有以下代码：

```
string ConnString = ConfigurationManager.ConnectionStrings["DefaultConnection"].ConnectionString;
string SqlString = "Select * From Memberships WHERE ApplicationId =  @username";
using(SqlConnection conn = new SqlConnection(ConnString)) {
  using(SqlCommand cmd = new SqlCommand(SqlString, conn)) {
    cmd.CommandType = CommandType.Text;
    SqlParameter param = new SqlParameter();
    param.ParameterName = "@username";
    param.Value = UserName2.Text;
    cmd.Parameters.Add(param);
    conn.Open();
    using(SqlDataReader reader = cmd.ExecuteReader()) {
      test.DataSource = reader;
      test.DataBind();
    }
  }
} 
```

在这种情况下，代码在 DataBind() 上中断并出现以下错误：**从字符串转换为唯一标识符时转换失败。**这是因为我在查询中使用 ApplicationId 而不是 UserName。使用 UserName 一切正常。

我知道 GUID 导致了错误，但我不知道为什么以及如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:26:36.207

您的数据库中的 AplicationId 类型是什么？如果 guid - 您的问题是将字符串参数与 guid 进行比较。投其中之一。

类似 convert(nvarchar(50), ApplicstionID)

另请参见 [SQL Server：在 case 语句中将 UniqueIdentifier 转换为字符串](https://stackoverflow.com/questions/6299918/sql-server-converting-uniqueidentifier-to-string-in-a-case-statement)

# asp.net-mvc - MVC 中的 NonShared DbContext 是一种不好的做法吗？

> ID：15852051
> 
> 赞同：1
> 
> 时间：2013-04-06T14:22:04.467
> 
> 标签：asp.net-mvc, performance, entity-framework, mef

它是一个 MVC 应用程序，具有用于 ORM 的实体框架代码优先和作为 IoC 的 MEF。如果我将 标记为`DbContext`，`PartCreationPolicy.Shared`则每次尝试执行编辑时都会显示该对象已存在于容器中。但是，如果我简单地标记`DbContext`with`PartCreationPolicy.NonShared`以便为每个请求创建它呢？这对性能有可怕的影响吗？

**更新** 这里是保存的代码：

```
Provider IRepository<Provider>.Put(Provider item)
        {
            if (item.Id == Guid.Empty)
            {
                item.Id = Guid.NewGuid();
                this.Providers.Add(item);
            }
            else this.Entry<Provider>(item).State = EntityState.Modified;
            return item;
        } 
```

这是共享时的错误

> ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:55:23.053

你绝对应该使用`PartCreationPolicy.NonShared`. 您可以阅读的有关上下文生命周期管理的所有内容，无论是 linq to sql、实体框架还是 NHibernate（会话），都会同意一件事：上下文应该是短暂的。一个简单的经验法则是：将它用于*一个*工作单元，这意味着：创建上下文、执行操作、调用`SaveChanges`一次、处理。大多数时候，这条规则对我很有效。

共享（或单例）上下文是影响性能的模式，因为随着时间的推移上下文变得臃肿。变更跟踪器需要跟踪越来越多的对象，关系修复会变慢。你会发现自己一次又一次地刷新（重新加载）实体。

# java - readFully(byte[] b, int off, int len) 和 EOFException

> ID：15852056
> 
> 赞同：0
> 
> 时间：2013-04-06T14:22:54.893
> 
> 标签：java, tcp, io

我在一段代码中经常遇到这个异常，当我调用 readFully 时就会发生这种情况。我不明白它是如何发生的，因为 readFully 应该阻塞直到 len 个字节可用。如果它知道有那么多字节可用，那么它以后怎么会遇到 EOF？

我该如何解决这个问题？（我正在读取前 3 个字节以获取长度（TLV 的 TL 部分），然后在读取 V 时偶尔遇到问题）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:29:16.037

[文档](http://docs.oracle.com/javase/6/docs/api/java/io/DataInputStream.html#readFully%28byte%5B%5D,%20int,%20int%29)说：

> throws：EOFException - 如果此输入流在读取所有字节之前到达末尾。

因此，如果您发送的长度不正确（即大于实际长度），或者如果发送方在写入所有字节之前关闭流，则会出现这种行为。

# css - 使用 Bootstrap Grid 的全高列背景颜色

> ID：15852057
> 
> 赞同：5
> 
> 时间：2013-04-06T14:23:00.730
> 
> 标签：css, twitter-bootstrap

我知道机会很小，但是您将如何实现如下布局，**在使用引导网格系统时**，左、中和右具有不同的背景颜色？我猜列布局违背了 Bootstrap 网格的思想，对吗？

![在此处输入图像描述](https://i.stack.imgur.com/qzy0C.png)

**[这是一个在线用例 url](http://dabblet.com/gist/5326268)。**

CSS 是用于 span 等的标准 Bootstrap 网格 CSS。

我查看了其他一些 SO Q 和 A，但我不想使用 JavaScript 之类的东西……或者 IE7+ 不支持的东西……

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T17:30:00.410

@Omega 的解决方案看起来不错，这是另一种选择：http: [//jsfiddle.net/panchroma/u5XGL/](http://jsfiddle.net/panchroma/u5XGL/)

这里 CSS 的重要一点是如何获取具有不同内容高度的列的背景颜色。

我为每一列添加了一个大的填充和一个同样大的负边距，然后将整行包装在一个隐藏溢出的类中。

**CSS**

```
.col{
margin-bottom: -99999px;
padding-bottom: 99999px;
background-color:#ffc;
}

.col-wrap{
overflow: hidden; 
} 
```

你会发现它反应很好，也是一个很好的跨浏览器解决方案。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T14:43:14.803

当然，只需使用这个 CSS：

```
html, body, .container-fluid, .row-fluid, .blue, .lightgrey {height:100%;} 
```

[http://dabblet.com/gist/5326320](http://dabblet.com/gist/5326320)

# ios - 在 10.6.4 上为 IOS 开发

> ID：15852059
> 
> 赞同：-1
> 
> 时间：2013-04-06T14:23:12.683
> 
> 标签：ios, macos

生病开始为 IOS 开发，但我得到的硬件只支持 10.6.4 我知道 Xcode 4.2 似乎可以在 Snowleopard 上运行......但最后一个版本需要 10.7.4，无论如何都要让最后一个版本在10.6？如果没有，如果我只使用4.2，我还能毫无问题地开发吗？我会错过什么？谢谢

编辑：谢谢大家，我会为自己建立一个hackintosh ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:36:24.463

**旧版本的 Xcode 仍然可用：**

如果您无法在 MAC 上安装最新版本的 Xcode，您可以在[connect.apple.com](http://connect.apple.com)上获取旧版本。

**笔记：**

*   但是，它们不会附带最新的 SDK。
*   而且你不能使用旧版本的 Xcode 为最新的 iOS 设备进行开发。

简而言之，您可能需要升级硬件才能使用更高版本的 Xcode 进行开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:45:25.570

Apple 非常狡猾——他们想销售硬件——因此通过放弃对 Xcode 中各种操作系统版本的支持，并且不支持用新操作系统支持旧硬件，他们实际上迫使开发人员购买最新硬件以跟上软件开发的最新情况。

您仍然可以使用旧版本的 Xcode 开发旧的 iOS 应用程序（即使用旧的 SDK 并针对旧的 iOS 版本）（Apple 至少通过开发人员门户提供旧版本的 Xcode）。但是，您需要仔细确定您可以定位哪些 iOS 版本，因为 Apple 也在提高最低应用程序规格，以便向 App-Store 提交新应用程序和更新。很快就不可能将使用 Xcode 4.2 开发的应用程序提交到商店，如果您想制作将提交到商店的应用程序，您将需要更新您开发的 Apple 硬件。

最烦人的是，您甚至不能将旧的 Apple 计算机用作构建服务器。我有一台不到 5 年的 Mac mini，我不能再将它用于开发 - 它作为构建服务器将是完美的！

# c# - 如何使用 System.Data.SQLite 合并制作单个可执行文件？

> ID：15852061
> 
> 赞同：4
> 
> 时间：2013-04-06T14:23:15.757
> 
> 标签：c#, wpf, sqlite

我的申请包括`SQLite.dll`. 如何在 C# WPF 中制作单可执行应用程序而不通过 ClickOnce 应用程序或任何安装文件设置进行安装。

如何捆绑`System.Data.SQLite`到我的项目中，这样我就可以生成一个没有标记 DLL 的单可执行应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:05:11.583

对于`System.Data.SQLite.dll`程序集，您可以将其作为资源嵌入，然后`Reflection.Load`在资源被任何代码使用之前从资源中使用，这样就可以使用了。或处理何时`AssemblyResolve`被调用，然后从资源中加载它。

这`SQLite.Interop.dll`就是困难的部分，因为它实际上对 SQLLite C++ 库进行了所有调用，并且`System.Data.SQLite`程序集使用的方法对基于 X86 或 x64 的正确 DLL 进行了调用。您可以将本文的第一部分与[本文](http://www.joachim-bauch.de/tutorials/loading-a-dll-from-memory/)结合起来创建第二个 DLL 的基于内存的加载，但您需要复制 x64/x86 和 .NET dll 执行的初始检查，然后加载正确的。（您只需嵌入两者并加载正确的）

# java - GWT：SplitLayoutPanel UiBinder

> ID：15852062
> 
> 赞同：1
> 
> 时间：2013-04-06T14:23:27.673
> 
> 标签：java, gwt, resize, uibinder

[我有和这里](https://stackoverflow.com/questions/9735735/gwt-handler-to-splitlayoutpanel-drag)一样的问题。

有没有办法覆盖 onResize 方法并在 uibinder 中使用它？

```
SplitLayoutPanel mainPanel = new SplitLayoutPanel() {
    @Override
    public void onResize() {
        super.onResize();
        //some other resizing stuff
    }           
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:55:02.097

是的。定义类：

```
package com.foo;

public class MySplitLayoutPanel extends SplitLayoutPanel() {
  @Override
  public void onResize() {
    super.onResize();
    //some other resizing stuff
  }           
}; 
```

然后将类所在的包绑定到您选择的 xml 命名空间（与`UiBinder`模板中定义的其他命名空间不冲突）：

```
<ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
             xmlns:g='urn:import:com.google.gwt.user.client.ui'
             xmlns:foo='urn:import:com.foo'> 
```

然后通过命名空间引用你的类（就像你对常用`g`命名空间的其他小部件一样）：

```
<foo:MySplitLayoutPanel /> 
```

这是`UiBinder`部分内容，但我认为您链接的答案根本不是解决方案，因为`onResize()`当浏览器窗口调整大小时也会（主要是）调用。

# php - PHP：我可以得到我的方法在我的类中被调用的那一行吗？

> ID：15852068
> 
> 赞同：1
> 
> 时间：2013-04-06T14:23:59.267
> 
> 标签：php

说我有 MyClass.php

```
class MyClass
{
    public static function myMethod()
    {
        // Here I want to know the line (and file) where my method has been called
    }
} 
```

还有 SomeOtherFile.php

```
// other code ...

MyClass::myMethod();

// other code ... 
```

那么，有没有办法从 SomeOtherFile 中获取该行，其中 myMethod() 已直接在 myMethod 中调用？我的意思是，没有将行作为参数传递。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T14:25:42.393

`debug_backtrace()`应该做的工作：

```
class MyClass
{
    public static function myMethod()
    {
        var_dump(debug_backtrace());
    }
} 
```

# java - 计算跳棋的最佳移动

> ID：15852069
> 
> 赞同：0
> 
> 时间：2013-04-06T14:24:02.463
> 
> 标签：java

我创建了一个棋盘游戏，我希望计算机计算出最优化的移动。这是我到目前为止所做的：

```
public BoardS calcNextMove(BoardS bs)
{
    ArrayList<BoardS>options = calcPossibleOptions(bs);
    int max = -1;
    int temp;
    int bestMove = 0;

    for(int k=0;k<options.size();k++)
    {
        temp = calculateNextMove2(options.get(k));
        if(max<temp)
        {
            max = temp;
            bestMove = k;
        }
    }
    return options.get(bestMove);
}

public int calculateNextMove2(BoardS bs)
{
    int res = soWhoWon(bs);

    if(res == 2) //pc won(which is good so we return 1)
        return 1;
    if(res == 1)
        return 0;

    ArrayList<BoardS>options = calcPossibleOptions(bs);

    int sum = 0;
    for(int k=0;k<options.size();k++)
    {
        sum += calculateNextMove2(options.get(k));
    }
    return sum;
} 
```

我不断得到

> > 线程“AWT-EventQueue-0”中的异常 java.lang.StackOverflowError

calcPossibleOptions 效果很好，它是一个返回所有可能选项数组的函数。

BoardS 是一个代表游戏板的类。

我想我必须让它更有效率，怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:03:45.540

您将需要找到 MinMax 的替代方案，即使最有可能进行 alpha-beta 修剪，因为棋盘太大，导致太多可能的移动和反移动。这会导致堆栈溢出。

我很惊讶地看到为井字游戏制作完整的决策树并没有让我自己溢出，但恐怕我对人工智能规划或解决这些问题的其他算法了解不够，无法帮助你除此之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:07:31.467

“calculateNextMove2()”的递归将运行得太深，这就是你得到 StackOverFlow 的原因。如果您希望游戏进行到最后（除非相对接近实际胜利），这可能确实需要很长时间。就像国际象棋一样（我有更多的经验），一个引擎可能会走 20 步，然后你可能会使用它迄今为止发现的东西。如果你从一局国际象棋游戏开始就运行它......它可以运行 100 年以当前的技术（仍然不能真正说出获胜的第一步是什么）。也许只是尝试 10 或 20 步深度？（它仍然会击败大多数人——并且仍然可能被归类为“最佳移动”）。与国际象棋一样，您将很难评估一个位置的好坏（通常计算为物质优势和位置优势的组合）。这是棘手的部分。注意：奇努克项目已经完成了您想要实现的目标 - 它已经“击败”了西洋跳棋游戏（国际象棋还没有这样的东西编辑：Magnus Carslen 出于所有意图和目的已经“击败”了游戏：D）。

请参阅：[Alpha-beta pruning](http://en.wikipedia.org/wiki/Alpha%E2%80%93beta_pruning) （它可能会有所帮助）

这里还有一篇我在这个主题上看到的（旧的）论文：

[Graham Owen 1997 Search Algorithms and Game Playing](http://www.gtryfon.demon.co.uk/bcc/Computer_chess/Graham/formcmp.htm) （可能有用）

另请注意，返回导致“获胜”的第一步是“幼稚的”——因为这可能是一个完全不可能的移动路线，如果对手不参加非常特别的胜利，他们将获得优势——例如国际象棋中的傻瓜伴侣或学者伴侣......（快速但非常受惩罚）

# jquery - select2 使用 JSON 标记

> ID：15852071
> 
> 赞同：0
> 
> 时间：2013-04-06T14:24:20.647
> 
> 标签：jquery, json, jquery-select2

我刚开始使用 [select2][1]，我正在开发一个需要从 JSON 数据源填充的标签列表（如 StackOverflow 上）的项目。我正在使用在这个问题上找到的一个例子：[Tagging With Ajax In Select2][2] 但我在让它工作时遇到了一些麻烦。

```
 // Testing JSON load
        $("#testJsonLoad").select2({
            tags: true,
            tokenSeparators: [",", " "],
            createSearchChoice: function (term, data) {

                if ($(data).filter(function () {
                    return this.text.localeCompare(term) === 0;
                }).length === 0) {
                    return {
                        id: term,
                        text: term
                    };
                }
            },
            multiple: true,
            ajax: {
                url: 'data.json',
                dataType: "json",
                data: function (term, page) {
                    return {
                        q: term
                    };
                },
                results: function (data, page) {
                    return {
                        results: data
                    };
                }
            }
        }); 
```

仅出于测试目的，data.json 页面中包含以下数据：

```
{
"data": [
    { "id" : 1, "text" : "Alabama" },
    { "id" : 2, "text" : "Alaska" },
    { "id" : 3, "text" : "Arizona" },
    { "id" : 4, "text" : "Arkansas" },
    { "id" : 5, "text" : "California" },
    { "id" : 6, "text" : "Colorado" },
    { "id" : 7, "text" : "Connecticut" },
    { "id" : 8, "text" : "Delaware" },
    { "id" : 9, "text" : "District of Columbia" },
    { "id" : 10, "text" : "Florida" },
    { "id" : 11, "text" : "Georgia" },
    { "id" : 12, "text" : "Hawaii" },
    { "id" : 13, "text" : "Idaho" } ]
} 
```

我的问题是我收到了这个错误：this.text is undefined - Line 78

```
return this.text.localeCompare(term) === 0; 
```

我认为这可能与我的 JSON 格式化方式有关。我尝试了几种不同的格式，但我的大部分在线研究都没有产生积极的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T08:49:50.413

结果需要json 中的**id**和**text**节点，您可以告诉您的 JSON 使用这些节点名称输出结果，或者指定在 JS 中使用哪个：

来自网站的示例：

```
query: function (query) {
  var data = {results: []}, i, j, s;
  for (i = 1; i < 5; i++) {
    s = "";
    for (j = 0; j < i; j++) {s = s + query.term;}
    data.results.push({id: query.term + i, text: s});
  }
  query.callback(data);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:03:24.013

将调试器放在 if ($(data).filter(function () 之前并检查您在 $(data) 中得到了什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T15:55:10.717

我发现了这个问题。我需要在结果 ajax 函数中调用 data.data（在我的示例中）。

例子：

```
 results: function (data, page) {
                return {
                    results: data.data
                };
            } 
```

# python - 通过矩阵代数拟合原点

> ID：15852079
> 
> 赞同：1
> 
> 时间：2013-04-06T14:25:29.820
> 
> 标签：python

通常我使用以下代码进行线性拟合或二次拟合。有时需要使用 weight=2 对模型 1/x2 进行加权。我想知道我是否可以通过添加一些矩阵代数来强制模型通过原点（显然，如果 weight=0）。谢谢。

```
import numpy
from pylab import *
data=loadtxt('...')

degree=1
weight=0

x,y,w=data[:,0],data[:,1],1/data[:,0]**weight
n=len(data)
d=degree+1

f=zeros(n*d).reshape((n,d))
for i in range(0,n):
    for j in range(0,d):
        f[i,j]=x[i]**j

q=diag(w)
fT=dot(transpose(f),q)
fTx=dot(fT,f)
fTy=dot(fT,y)
coeffs=dot(inv(fTx),fTy) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:15:17.650

对于这种情况，通过更改为来`weight=0`摆脱特征向量中的常数项 。`for j in range(0,d)``for j in range(1,d)`

对于较大的`weight`术语值，与术语相关的权重`1/x^p`必须为零，这在普通最小二乘解决方案中可能不会发生。

为了获得最佳 numpy 实践，我建议您`zeros(n*d).reshape((n,d))`使用`zeros( (n,d) )`和`dot(inv(fTx),fTy)`替换`linalg.solve(fTx,fTy)`。

# java - 清除文本按钮

> ID：15852083
> 
> 赞同：-2
> 
> 时间：2013-04-06T14:26:03.290
> 
> 标签：java, button, awt

我有一个代码可以在按下按钮时清除文本字段。它不会工作。继承人的代码：

```
 buttonButton.addActionListener(this); 
  field1TextField.setForeground(Color.black); 
  cleartextButton.addActionListener(this); 
  cleartextButton.setForeground(Color.black); 

 }

public void actionPerformed(ActionEvent e) { 
   if(e.getSource() == buttonButton) { 
      add(buttonLabel);
      validate(); 
      add(field1TextField); 
      validate(); 
      add(cleartextButton);
      validate();
    if(e.getSource() == cleartextButton) {
        String cleartext = "";
        field1TextField.setText(cleartext);
        validate();

    }
       }     
   } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:30:47.563

您需要`if`在`actionPerformed`.

```
if(e.getSource() == buttonButton) {
   ...

} <--- add this 
```

# actionscript-3 - tweenlite 未声明

> ID：15852090
> 
> 赞同：0
> 
> 时间：2013-04-06T14:26:44.843
> 
> 标签：actionscript-3, fdt, gsap

```
package com.powerflasher.SampleApp {
import flash.events.MouseEvent;
import flash.display.Sprite;

public class test1 extends Sprite {
    public function test1() 
    {       
    NewCircle1();   
    NewButton1();
    Magic();
    }

    private function NewButton1():void
    {
        var NewButton:Sprite = new Sprite();
        NewButton.graphics.beginFill(0x0000ff,1);   
        NewButton.graphics.drawRect(100, 100, 50, 50);
        NewButton.graphics.endFill();
        addChild(NewButton);
        NewButton.addEventListener(MouseEvent.CLICK, Magic);

    }
    private function NewCircle1():void
    {
        var NewCircle:Sprite = new Sprite();
        NewCircle.graphics.beginFill(0x000000,1);
        NewCircle.graphics.drawCircle(400, 500, 50);
        NewCircle.graphics.endFill();
        addChild(NewCircle);

    }   
    private function Magic():void { 
    Tweenlite.to(NewCircle1(), 2+Math.random()*6, {x:Math.random()*20, y:Math.random()*25, scaleX:Math.random()*3, ScaleY:Math.random()*5});

    }}} 
```

我要做的就是绘制正方形，绘制圆形，然后在正方形上单击鼠标以将圆形移动到随机位置

收到错误“未声明变量'Tweenlite'”，不知道..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:06:15.680

在 TweenLite 函数中，您有 - NewCircle1()。但是那个函数不返回对象，所以错误来了，因为你正在尝试补间 - 什么都没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:43:58.577

您的代码有几个问题，但关于您最初的问题，如果您想在课堂上使用它，则需要导入 Tweenlite。

```
import com.greensock.Tweenlite; 
```

但是您的代码也有其他问题，接下来可能会导致问题。您正在使用局部变量来存储您的精灵实例。这意味着变量名称在这些方法完成后不会持续存在。

NewButton 和 NewCircle 需要成为类属性，以便类中的所有方法都可以使用它们。

这是一个例子：

```
 package com.powerflasher.SampleApp {
    import flash.events.MouseEvent;
    import flash.display.Sprite;
    import com.greensock.Tweenlite; // import Tweenlite

    public class test1 extends Sprite {

        // declare your class properties
        public var NewButton:Sprite;
        public var NewCircle:Sprite;

        public function test1() 
        {       
            NewCircle1();   
            NewButton1();
            Magic();
        }

        private function NewButton1():void
        {
            NewButton = new Sprite(); 
            NewButton.graphics.beginFill(0x0000ff,1);   
            NewButton.graphics.drawRect(100, 100, 50, 50);
            NewButton.graphics.endFill();
            addChild(NewButton);
            NewButton.addEventListener(MouseEvent.CLICK, Magic);

        }
        private function NewCircle1():void
        {
            NewCircle = new Sprite();  
            NewCircle.graphics.beginFill(0x000000,1);
            NewCircle.graphics.drawCircle(400, 500, 50);
            NewCircle.graphics.endFill();
            addChild(NewCircle);

        }   
        private function Magic():void 
       { 

             Tweenlite.to(NewCircle, 2+Math.random()*6, {x:Math.random()*20, y:Math.random()*25, scaleX:Math.random()*3, ScaleY:Math.random()*5});

        }
    }
} 
```

# c# - 以编程方式滚动/移动到 .net asp:listview 控件中的项目

> ID：15852094
> 
> 赞同：0
> 
> 时间：2013-04-06T14:27:06.547
> 
> 标签：c#, javascript, asp.net, listview

我有一个带有 asp:ListView 的网页，我正在尝试弄清楚如何以编程方式滚动到某个项目。这是我的 aspx 标记：

```
<asp:ListView ID="lvGlossary" runat="server" DataSourceID="SqlDataSource1" OnItemDataBound="lvGlossary_ItemDataBound">
    <LayoutTemplate>
        <div class="glossaryTitle">Glossary</div>
        <div id="ItemPlaceholder" runat="server"></div>
        <br />
    </LayoutTemplate>
    <ItemTemplate>
        <div class="glossaryEntry">
            <span class="glossaryWord">
                <asp:Label ID="lbWord" runat="server" Text='<%# Bind("Word") %>' />: 
            </span>
            <span class="glossaryDefinition">
                <asp:Label ID="lbDefinition" runat="server" Text='<%# Bind("Definition") %>' />
            </span>
            <br />
        </div>
    </ItemTemplate>
    <AlternatingItemTemplate>
        <div class="glossaryEntryAlternating">
            <span class="glossaryWord">
                <asp:Label ID="lbWord" runat="server" Text='<%# Bind("Word") %>' />: 
            </span>
            <span class="glossaryDefinition">
                <asp:Label ID="lbDefinition" runat="server" Text='<%# Bind("Definition") %>' />
            </span>
            <br />
        </div>
    </AlternatingItemTemplate>
</asp:ListView> 
```

在我后面的 c# 代码中，我正在用文本填充一个文本框，当用户选择一个单词时，我想自动滚动到列表视图中的单词，以便它可见。它很可能需要在客户端完成，所以我想我需要一些 javascript 来做到这一点。谁能给我举个例子来说明如何做到这一点？

任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:52:07.860

您可以使用元素的 scrollIntoView javascript 方法：

```
document.getElementById('id').scrollIntoView(true); 
```

# sql-server - 如何允许在具有唯一约束的字段中在 SQL Server 中输入大量空值

> ID：15852103
> 
> 赞同：2
> 
> 时间：2013-04-06T14:27:51.477
> 
> 标签：sql-server

```
create table test3
(
id int PRIMARY KEY,
id2 int
);

create unique index ndx_id2 on test3 (id2); 
```

出于唯一索引的目的，所有`NULL`值都被认为与所有其他`NULL`值不同，因此是唯一的。这是对 SQL-92 标准的两种可能解释之一（标准中的语言是模棱两可的），也是 PostgreSQL、MySQL、Firebird 和 Oracle 遵循的解释。

Informix 和 Microsoft SQL Server 遵循该标准的其他解释。

```
INSERT INTO test3(id, id2) VALUES (1, null);
INSERT INTO test3(id, id2) VALUES (2, null); 
```

第二次 INSERT 返回

> 不能将重复值插入唯一索引。[表名=test3，约束名=ndx_id2]

SQL Server 中的错误，但成功地将记录添加到另一个 DBMS，例如 Sqlite。

SQL Server中如何允许在具有唯一约束的字段中输入大量空值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T14:46:32.317

从 SQL Server 2008 起，您可以使用[过滤索引](https://stackoverflow.com/a/767702/50552)：

```
create unique index UX_YourIndex
on YourTable(col1) 
where col1 is not null 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!6/dbf85/1/0)

对于 SQL Server 2005 和更早版本（[9.0 对应于 2005](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)），您可以使用代理列。代理列是计算列。计算如下：

*   当半唯一列不是`null`时，代理列等于该列
*   当半唯一列是`null`时，代理列等于唯一 id。唯一 id 可以是标识列、rowguid 或每行不同的任何内容。

换句话说，只要原始列是 ，代理列就使用唯一的字符串`null`。例如：

```
create table YourTable 
    (
    id int identity primary key
,   col1 int
,   surrogate1 as (coalesce(convert(varchar(20), col1), '_' + convert(varchar(20), id)))
    );

create unique index UX_YourIndex on YourTable(surrogate1); 
```

确保代理值不会与实际值发生冲突是您的工作。在此示例中，我假设`col1`不能以下划线开头。

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!3/44521/1/0)

# php - codeigniter 不需要这样的文件或目录

> ID：15852104
> 
> 赞同：0
> 
> 时间：2013-04-06T14:28:04.187
> 
> 标签：php, codeigniter, require

我刚刚遇到一个非常令人沮丧的错误。`require 'file_name'`当我尝试加载视图（例如：标题）时，我总是使用。

我`CI`现在正在使用，我试图做这样的事情：`<?php require 'header_v.php';?>`在我的`home_v.php`但它总是给我**没有这样的文件或目录**错误。

这是`header_v.php`：

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Backend-Vihara Dharma Bhakti</title>
<link href="../../../style/style_backend.css" rel="stylesheet" type="text/css">
<link href="<?php echo base_url(); ?>style/style_backend.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/css/ui-lightness/jquery-ui-1.10.2.custom.min.css" />
<script language="javascript" type="text/javascript" src="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/js/jquery-1.9.1.js"></script>
<script language="javascript" type="text/javascript" src="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.min.js"></script>

<script>
  $(function() {
    $( "#datepicker" ).datepicker();
  });

  $(function() {
    $( "#tabs" ).tabs();
  });
</script>

<div id="header"><h1>HEADER</h1></div>
    <div id="tabs">
        <ul>
            <li><a href="backend/umat">Daftar Umat</a></li>
            <li><a href="backend/pengurus">Daftar Pengurus</a></li>
            <li><a href="backend/absensi">Absensi</a></li>
        </ul>
    </div>
</head> 
```

这是`home_v.php`（需要 header_v.php 的那个）：

```
<body>
    <link rel="stylesheet" href="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/css/ui-lightness/jquery-ui-1.10.2.custom.min.css" />
    <script language="javascript" type="text/javascript" src="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/js/jquery-1.9.1.js"></script>
    <script language="javascript" type="text/javascript" src="<?php echo base_url(); ?>jquery/jquery-ui-1.10.2.custom/js/jquery-ui-1.10.2.custom.min.js"></script>

    <script>
      $(function() {
        $( "#datepicker" ).datepicker();
      });
     </script>

    <?php require 'header_v.php';?>

    <div id="form_search">
        <?php echo form_open('backend/index') ?>
           <p>
               <?php echo form_dropdown('ddl_search', $data_search, 'id="ddl_search"');?>
           </p> 
            <p>
                Kelas :
                <?php echo form_dropdown('ddl_kelas1', $list_kelas, 'id="ddl_kelas1"');?> -
                <?php echo form_dropdown('ddl_kelas2', $list_kelas, 'id="ddl_kelas2"');?>
            </p>
            <p>
                Nama : <?php echo form_input('txt_nama');?>
                Alamat : <?php echo form_input('txt_alamat');?>
                Tanggal Lahir : <input type="text" id="datepicker" />
            </p>
                <?php echo form_submit('btn_search', 'Search');?>
        <?php echo form_close(); ?>
    </div>
    <div>
        <?php echo $table ?>
        <?php echo $pagination ?>
    </div>
</body>
</html> 
```

我错过了什么？它与`config.php`或`routes.php`其他 CI 的设置有关吗？因为我已经使用这种方式很多时间，并且它一直在工作，除了现在。

感谢您的帮助：D

**注意**：文件名是正确的，`header_v`并且`home_v`在同一个文件夹中（**views**）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:31:34.980

加载视图文件的正确方法是：

```
$this->load->view('file-in-views-folder') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T14:40:48.450

要在 CI 中使用 require 函数，您必须输入该文件的完整路径。

像：

```
<?php require '/var/www/main/application/views/header_v.php';?> 
```

但是，使用 CI 的正确方法是在控制器中加载视图。

```
 $this->load->view("header_v"); 
```

进而

```
 $this->load->view("home_v"); //remove the require function from your code. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T14:31:44.330

为什么不加载控制器文件？

```
$this->load->view('header_v');
$this->load->view('home_v'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T18:19:09.200

如果你想输出一些东西，请使用

```
echo $this->load->file('/path/to/myfile'); 
```

如果它是一个视图

```
echo $this->load->view('myviewname'); 
```

如果它是一个 php 库或一个助手（所以你不必输出一些东西，而只需要或包含类和方法）：

```
$this->load->helper();
$this->load->library(); 
```

***记住***

**意见**必须留在`/application/views`文件夹下

**下的**图书馆**`/application/libraries`**

 ****下的**帮手**`/application/helpers`**

 ****一般文件类型**可以保留在您想要的位置，因为您使用它们的整个路径加载它们`/path/to/my/file`****

# php - 将变量从目标 C 发送到 url 字符串

> ID：15852107
> 
> 赞同：-1
> 
> 时间：2013-04-06T14:28:20.277
> 
> 标签：php, iphone, objective-c, xcode

我在尝试在我的 iPhone 应用程序中创建反馈表单并通过 php 邮件页面时遇到以下代码问题，我想知道下面的错误是否可能是原因。

以下代码显示了此问题“格式字符串未使用的数据参数” `@"%@?email=%@&message="`，特别是指此问题

```
NSString *email = [self.emailTxt text];
NSString *message = [self.messageTxt text];
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"%@?email=%@&message=", FeedbackURL, email, message]];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    NSString *title = (!error)? @"Message Sent" : @"Error";
    NSString *message = (!error)? @"Thank you for your Feedback, we hope it will help us to make this product even better." : @"There was an connection error. Please make sure you have internet connection and try again later.";
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:title message:message delegate:nil cancelButtonTitle:@"Close" otherButtonTitles:nil, nil];
    [alert show];

    NSLog(@"Error: %@", error.localizedDescription);
}];

if (email && (email.length > 0)) {
    NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
    [userDefaults setObject:email forKey:UserEmailKey];
    [userDefaults synchronize];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:32:41.820

你忘了第三个`%@`。

```
@"%@?email=%@&message=" 
```

第三个参数未填写，因为您缺少`%@`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:33:18.113

看起来 `%@`您的格式字符串中缺少 a ：

```
@"%@?email=%@&message=" 
```

应该

```
@"%@?email=%@&message=%@" 
```

# c# - 转换为 Linq（重叠验证）

> ID：15852113
> 
> 赞同：0
> 
> 时间：2013-04-06T14:29:19.040
> 
> 标签：c#, asp.net, linq, overlap, gaps-in-data

我有一个元组列表，我想找到重叠：

```
static bool Overlap(params Tuple<int, int>[] ranges) {
    for (int i = 0; i < ranges.Length; i++) {
        if (i + 1 < ranges.Length) {
            if (!(ranges[i].Item1 < ranges[i].Item2 
                  && ranges[i + 1].Item1 > ranges[i].Item2)) {
                return true;
            }
        }
    }
    return false;
} 
```

如何将其转换为 linq？我怎样才能找到 linq 是否也存在差距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:36:35.107

```
return ranges
    .Zip(ranges.Skip(1), (t1, t2) => new { T1 = t1, T2 = t2 })
    .Any(p => !(p.T1.Item1 < p.T1.Item2 && p.T2.Item1 > p.T1.Item2)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:35:39.257

借助 ReSharper 的强大功能，我向您展示：

```
return ranges.Where((t, i) => i + 1 < ranges.Length 
                     && !(t.Item1 < t.Item2 && ranges[i + 1].Item1 > t.Item2)).Any(); 
```

* * *

要确定是否存在间隙，您需要检查下一个元素的起始值是否高于当前元素的结束值。所以只需更改`>`为`<=`.

```
return ranges.Where((t, i) => i + 1 < ranges.Length 
                     && !(t.Item1 < t.Item2 && ranges[i + 1].Item1 <= t.Item2)).Any(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T14:42:28.137

不幸的是，您不能在此处使用[.Any()](http://msdn.microsoft.com/en-AU/library/system.linq.enumerable.any.aspx)，因为它不包含允许访问索引的重载。

```
static bool Overlap(params Tuple<int, int>[] ranges) {
    return ranges
        .Where((range, i) =>
            i < ranges.Length && 
            !(range.Item1 < range.Item2 && 
              ranges[i + 1].Item1 > range.Item2)
        .Any();
} 
```

# directx - 顶点着色器中的正常计算？

> ID：15852114
> 
> 赞同：1
> 
> 时间：2013-04-06T14:29:23.373
> 
> 标签：directx, shader, lighting, terrain, normals

我正在使用 rastertek 框架进行地形生成。我已经从顶点着色器渲染了地形，但我不知道如何计算着色器中的法线。在从地形生成法线的类之一中有一个函数调用，但这仅在地形是在 cpu 上生成时才有效。这是我正在使用的顶点着色器的代码：

```
////////////////////////////////////////////////////////////////////////////////
// Filename: terrain.vs
////////////////////////////////////////////////////////////////////////////////
#include "terrain.fx"

/////////////
// GLOBALS //
/////////////

cbuffer MatrixBuffer
{
    matrix worldMatrix;
    matrix viewMatrix;
    matrix projectionMatrix;
};

//////////////
// TYPEDEFS //
//////////////
struct VertexInputType
{
    float4 position : POSITION;
    float3 normal : NORMAL;
};

struct PixelInputType
{
    float4 position : SV_POSITION;
    float3 normal : NORMAL;
};

////////////////////////////////////////////////////////////////////////////////
// Vertex Shader
////////////////////////////////////////////////////////////////////////////////
PixelInputType TerrainVertexShader(VertexInputType input)
{
    PixelInputType output;

    input.position.y = input.position.y + terrain(input.position.x,input.position.z);

    // Change the position vector to be 4 units for proper matrix calculations.
    input.position.w = 1.0f;

    // Calculate the position of the vertex against the world, view, and projection matrices.
    output.position = mul(input.position, worldMatrix);
    output.position = mul(output.position, viewMatrix);
    output.position = mul(output.position, projectionMatrix);

    // Calculate the normal vector against the world matrix only.
    output.normal = mul(input.normal, (float3x3)worldMatrix);

    // Normalize the normal vector.
    output.normal = normalize(output.normal);

    return output;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T13:15:45.297

在着色器中生成法线的最大问题是您需要了解周围的顶点。这是你可以用几何着色器克服的，但不能用顶点着色器。计算法线的一种简单方法是计算碰到您正在查看的顶点的所有多边形的多边形法线（取由 2 条边形成的向量并将它们叉积为面法线），然后将它们相加并归一化。因此，如果您无法访问几何着色器，唯一真正的解决方案是使用 CPU。即使这样，这也不是计算顶点法线的最佳方法。您可能仍然会发现使用更复杂的算法会更好，这会给您带来更多问题！所以，是的，CPU 或几何着色器......基本上，这些都是你的选择。

# php - 包括 readfile 上的源文件名？

> ID：15852117
> 
> 赞同：1
> 
> 时间：2013-04-06T14:30:01.450
> 
> 标签：php, path, download, readfile

我有一个非常简单的隐藏下载路径脚本设置，如下所示：

在 index.html 我有这个链接：

```
<a href="savefile.php">save</a> 
```

在 savefile.php 我有这段代码：

```
$file = 'http://www.mysite.com/files/correct_horse_battery_staple.rar';
header("Content-Type: application/force-download");
@readfile($file); 
```

这似乎确实有效，但不幸的是，它将文件下载为`savefile.php`而不是`correct_horse_battery_staple.rar`.

有什么方法不仅可以更改文件名，还可以更改扩展名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:37:20.750

我有同样的问题

解决如下：

```
header("Content-Type: application/force-download");

header('Content-Disposition: attachment; filename="'.$filename.'"');

readfile($filename); 
```

我希望它对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:37:42.667

您的链接转到 savefile.php，而浏览器从未得到过 savefile.php 以外的文件名。您需要添加一个标题，如：

```
header('Content-Disposition: attachment; filename="correct_horse_battery_staple.rar"'); 
```

或更好...

```
header('Content-Disposition: attachment; filename="'.basename($file).'"'); 
```

希望能帮助到你！

# php - PHP：字符串中的新变量与变量（variable-variables）连接

> ID：15852121
> 
> 赞同：2
> 
> 时间：2013-04-06T14:30:26.413
> 
> 标签：php, variable-variables

我有一个我无法解决的基本 php 问题，我也想了解为什么！

```
 $upperValueCB = 10;
 $passNodeMatrixSource = 'CB';

 $topValue= '$upperValue'.$passNodeMatrixSource;

 echo $topValue; 
```

输出 $upperValueCB

但我希望 OUTPUT 作为变量的值 10。

如何让 PHP 将 $dollar-phrase 作为变量而不是字符串读取？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T14:33:36.260

```
$varName = 'upperValue' . $passNodeMatrixSource;
$topValue = $$varName; 
```

[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T14:35:16.303

这个小例子可以说明你将要做什么：

```
<?php

$a = 'b';
$b = 10;

echo ${$a}; // will output 10 
```

因此，您必须将示例更改为：

```
$upperValueCB = 10;
$passNodeMatrixSource = 'CB';

$topValue= 'upperValue'.$passNodeMatrixSource;

echo ${$topValue}; // will output 10 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T14:36:12.493

你可以这样做：

```
$upperValueCB = 10;
$passNodeMatrixSource = 'CB';

$topValue= ${'upperValue'.$passNodeMatrixSource};

echo $topValue; 
```

因为`upperValueCB`是 var 名称，如果你想让 PHP 了解使用哪个 var，你必须给出 var 名称。
为此，您可以使用像这样的静态方式`$upperValueCB`
或使用这样的字符串：`${'upperValueCB'}`
或使用包含 var 名称的第三个 var`$var = 'upperValueCB'; $$var;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T14:32:58.680

```
 $upperValueCB = 10;
 $passNodeMatrixSource = 'CB';

 $topValue= 'upperValue'.$passNodeMatrixSource;

 echo ${$topValue}; 
```

# android - 颜色的十六进制透明度

> ID：15852122
> 
> 赞同：1395
> 
> 时间：2013-04-06T14:30:26.450
> 
> 标签：android, colors, hex, transparency

我正在为我的应用小部件实现小部件透明度选项，尽管我在正确获取十六进制颜色值时遇到了一些麻烦。作为十六进制颜色透明度的新手，我搜索了一下，虽然我找不到我的问题的具体答案。

我想通过十六进制颜色设置透明度，所以假设我的十六进制颜色 ID“#33b5e5”，我希望它是 50% 透明的。然后我将使用“#8033b5e5”，因为 80 是 50%。

我在这里找到了一个有用的图表：[http](http://www.dtp-aus.com/hexadeci.htm) ://www.dtp-aus.com/hexadeci.htm 。有了这些数据，我设法想出了这个：

```
0% = #00
10% = #16
20% = #32
30% = #48
40% = #64
50% = #80
60% = #96
70% = #112
80% = #128
90% = #144 
```

现在，当我的十六进制数超过 100 时，问题开始出现。十六进制颜色代码只能是 8 个符号，对吗？例如 #11233b5e5 (80%) 崩溃。

我该怎么做才能让我也使用更高的数字？

* * *

## 回答 #1

> 赞同：3975
> 
> 时间：2013-06-21T16:15:35.430

这是不透明度的十六进制值的正确百分比表。例如，对于 50% 白色，您将使用 #80FFFFFF。要考虑透明度，请翻转百分比的顺序（更不透明 = 更不透明）。

| % | 十六进制 |
| --- | --- |
| 100% | 法郎 |
| 95% | F2 |
| 90% | E6 |
| 85% | D9 |
| 80% | 抄送 |
| 75% | 高炉 |
| 70% | B3 |
| 65% | A6 |
| 60% | 99 |
| 55% | 8C |
| 50% | 80 |
| 45% | 73 |
| 40% | 66 |
| 35% | 59 |
| 30% | 4D |
| 25% | 40 |
| 20% | 33 |
| 15% | 26 |
| 10% | 1A |
| 5% | 0D |
| 0% | 00 |

（[来源问题](https://stackoverflow.com/questions/5445085/understanding-colors-on-android-six-characters)）

* * *

## 回答 #2

> 赞同：167
> 
> 时间：2015-03-19T10:14:49.177

# 简短的回答

您可以查看完整的十六进制值百分比表，并在[https://play.golang.org/p/l1JaPYFzDkI的这个 Playground 中](https://play.golang.org/p/l1JaPYFzDkI)**运行**代码。

# 伪代码的简短解释

### 十六进制值的百分比

1.  **小数**= 百分比 * 255 / 100 。例如：十进制 = 50*255/100 = 127.5
2.  将**十进制**转换为十六进制值。例如：十进制的 127.5 = 7*16^1 + 15 = 十六进制的 7F

### 十六进制值到百分比

1.  将十六进制值转换为十进制。例如：D6 = 13*16^1 + 6 = 214
2.  百分比 =（十进制值）* 100 / 255。例如：214 *100/255 = 84%

[转换十进制 <=> 十六进制的更多信息](https://www.wikihow.com/Convert-Hexadecimal-to-Binary-or-Decimal)

# 长答案：如何在你的脑海中计算

这个问题一般可以通过[交叉乘法](http://en.wikipedia.org/wiki/Cross-multiplication)来解决。

我们有一个百分比（范围从 0 到 100 ）和另一个数字（范围从 0 到 255）然后转换为十六进制。

*   100 <==> 255（十六进制的FF）
*   0 <==> 0（十六进制的 00）

1%

*   1 * 255 / 100 = 2,5
*   如果将其向下舍入，则2,5 in hexa 为**2 。**

2%

*   2 * 255 / 100 = 5
*   六进制中的 5 是**5**。

最佳答案中的表格给出了 5% 的百分比。

如何计算你脑海中的数字？由于**2.5**的增量，第一个加2，下一个加3

*   95% — F2 // 开始
*   96% — F4 // 将 2 添加到 F2
*   97% — F7 // 加 3 。或 F2 + 5 = F7
*   98% — F9 // 加 2
*   99% — FC // 加 3\. 9 + 3 = 12 in hexa : C
*   100% — FF // 加 2

* * *

我更喜欢教如何找到解决方案，而不是展示一个你不知道结果来自哪里的答案表。

> 给一个人一条鱼，你就喂他一天；教一个人钓鱼，你养他一辈子

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2013-04-06T14:35:23.427

颜色十六进制表示法如下：#AARRGGBB

*   答：阿尔法
*   R：红色
*   G : 绿色
*   B：蓝色

你应该首先看看[十六进制](http://en.wikipedia.org/wiki/Hexadecimal)是如何工作的。你最多可以写FF。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-04-06T14:39:48.463

该图表未显示百分比。“#90”不是“90%”。该图表显示了十六进制到十进制的转换。十六进制数 90（通常表示为 0x90）等价于十进制数 144。

十六进制数以 16 为基数，因此每个数字都是介于 0 和 F 之间的值。两个字节的十六进制值（例如颜色的透明度）的最大值是 0xFF，即十进制的 255。因此 100% 是 0xFF。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2014-06-24T11:03:58.267

我为一个 android 应用程序构建了这个小助手方法，可能会派上用场：

```
 /**
 * @param originalColor color, without alpha
 * @param alpha         from 0.0 to 1.0
 * @return
 */
public static String addAlpha(String originalColor, double alpha) {
    long alphaFixed = Math.round(alpha * 255);
    String alphaHex = Long.toHexString(alphaFixed);
    if (alphaHex.length() == 1) {
        alphaHex = "0" + alphaHex;
    }
    originalColor = originalColor.replace("#", "#" + alphaHex);

    return originalColor;
} 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2015-04-22T08:31:45.340

![在此处输入图像描述](https://i.stack.imgur.com/zSbB6.png)

这可能是很晚的答案。但是这张图表杀死了它。

所有百分比值都映射到十六进制值。

[https://web.archive.org/web/20200812155307/http://online.sfsu.edu/chrism/hexval.html](https://web.archive.org/web/20200812155307/http://online.sfsu.edu/chrism/hexval.html)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-06-11T06:09:28.130

在谷歌搜索上试试这个（或[点击这里](https://www.google.nl/?#q=255+*+.2+to+hex)）

`255 * .2 to hex`

它将因此产生`0x33`。

但是，google 不会对值进行四舍五入，因此您只能使用 1 位乘数。如果你想使用 .85，你必须先得到 255 * .85 的四舍五入值，然后输入`(rounded-value here) to hex`谷歌搜索。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2014-12-12T02:16:15.600

使用python来计算这个，例如（用python 3编写），50%的透明度：

```
hex(round(256*0.50)) 
```

:)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2015-12-09T19:44:51.097

我意识到这是一个老问题，但我在做类似的事情时遇到了它。

使用 SASS，您有一种非常优雅的方式将 RGBA 转换为十六进制 ARGB: `ie-hex-str`。我在这里的mixin中使用了它。

```
@mixin ie8-rgba ($r, $g, $b, $a){
    $rgba: rgba($r, $g, $b, $a);
    $ie8-rgba: ie-hex-str($rgba);
    .lt-ie9 &{
      background-color: transparent;
      filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#{$ie8-rgba}', endColorstr='#{$ie8-rgba}');
  }
}

.transparent{
    @include ie8-rgba(88,153,131,.8);
    background-color: rgba(88,153,131,.8);
} 
```

输出：

```
.transparent {
  background-color: rgba(88, 153, 131, 0.8);
}
.lt-ie9 .transparent {
  background-color: transparent;
  filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='#CC589983', endColorstr='#CC589983');
  zoom: 1;
}
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-05-13T08:01:40.677

我总是来这里检查 int/hex alpha 值。因此，最终在我的 java utils 类中创建了一个简单的方法。此方法会将百分比转换为十六进制值并附加到颜色代码字符串值。

```
 public static String setColorAlpha(int percentage, String colorCode){
    double decValue = ((double)percentage / 100) * 255;
    String rawHexColor = colorCode.replace("#","");
    StringBuilder str = new StringBuilder(rawHexColor);

    if(Integer.toHexString((int)decValue).length() == 1)
        str.insert(0, "#0" + Integer.toHexString((int)decValue));
    else
        str.insert(0, "#" + Integer.toHexString((int)decValue));
    return str.toString();
} 
```

所以，`Utils.setColorAlpha(30, "#000000")`会给你`#4c000000`

# java - Java 线程安全计数器

> ID：15852123
> 
> 赞同：0
> 
> 时间：2013-04-06T14:30:28.547
> 
> 标签：java, multithreading, thread-safety

我正在学习编写线程安全的程序以及如何评估不是线程安全的代码。

如果一个类在被多个线程执行时能够正确运行，那么它就被认为是线程安全的。

我的 Counter.java 不是线程安全的，但是所有 3 个线程的输出都按预期从 0-9 打印。

谁能解释为什么？以及线程安全如何工作？

```
public class Counter {

    private int count = 0;

    public void increment() {
        count++;
    }

    public void decrement() {
        count--;
    }

    public void print() {
        System.out.println(count);
    }

}

public class CountThread extends Thread {
    private Counter counter = new Counter();

    public CountThread(String name) {
        super(name);
    }

    public void run() {
        for (int i=0; i<10; i++) {
            System.out.print("Thread " + getName() + " ");
            counter.print();
            counter.increment();
        }
    }

}

public class CounterMain {

    public static void main(String[] args) {
        CountThread threadOne = new CountThread("1");
        CountThread threadTwo = new CountThread("2");
        CountThread threadThree = new CountThread("3");

        threadOne.start();
        threadTwo.start();
        threadThree.start();
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-06T14:34:35.137

您`Counter`不是通过 3 个线程共享的，而是每个线程都有一个唯一的`Counter`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T14:36:02.730

您的代码在您的特定测试中运行良好。这并不意味着它总是能正常工作。尝试多次迭代，您可能会开始看到异常。

你的测试有点像如果你测试一座桥可以支持 20 辆卡车，只需要一辆汽车骑在桥上。它没有表现出任何东西。并且几乎不可能使用测试证明代码是线程安全的。只有仔细阅读和理解所有潜在问题才能保证这一点。一个非线程安全的程序可能运行良好多年，然后突然出现错误。

为了让您反击安全，请使用 AtomicInteger。

编辑 ：

此外，正如@SpringRush 所指出的，您不会在线程之间共享单个计数器。每个线程都有自己的计数器。所以你的代码实际上是线程安全的，但我认为它并没有达到你想要的效果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T14:37:27.017

所以这实际上是线程安全的。对于每个 CountThread，都有一个计数器。要使其不是线程安全的，请将计数器变量更改为：

```
private static Counter counter = new Counter(); 
```

那么它就不是线程安全的，因为不同的线程可以同时修改计数器状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-30T10:55:54.483

试试这个：

```
public class ThreadSafeCounter {

    AtomicInteger value = new AtomicInteger(0);

public ThreadSafeCounter(AtomicInteger value) {
    this.value = value;
}

public void increment() {
    value.incrementAndGet();
}

public void decrement() {
    value.decrementAndGet();
}

public AtomicInteger getValue() {
    return value;
} 
```

}

# c# - Gecko 多线程错误

> ID：15852128
> 
> 赞同：1
> 
> 时间：2013-04-06T14:30:46.313
> 
> 标签：c#, gecko

我正在尝试使用 5 个虚拟（隐藏）Gecko（Xulrunner）浏览器制作应用程序。但是，当我尝试在 GeckoPreferences 的 Threading 中创建一个浏览器返回错误时，我完全对它感到困惑！

这里的代码示例：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using DevExpress.XtraEditors;
using Skybound.Gecko;
using System.Threading;
namespace Gekco_Test
{
public partial class Main : DevExpress.XtraEditors.XtraForm
{
    public Main()
    {
        InitializeComponent();
        CheckForIllegalCrossThreadCalls = false;
    }

    private void Main_Load(object sender, EventArgs e)
    {

    }

    private void simpleButton1_Click(object sender, EventArgs e)
    {
        Thread th = new Thread(webControllerFunc);
        th.SetApartmentState(ApartmentState.STA);
        th.Start();

    }
    void webControllerFunc()
    {
        geckoWebControl gControll = new geckoWebControl();
        gControll.webBrowserAccess("91.213.108.178", 80);
    }

}

class geckoWebControl
{
    bool readyState;
    GeckoWebBrowser wb = new GeckoWebBrowser();
    public string webBrowserAccess(string host,int port)
    {
        Skybound.Gecko.Xpcom.Initialize(Application.StartupPath + "\\xulrunner\\");
        readyState = false;
        Form form = new Form();
        GeckoPreferences.User["network.proxy.http"] = host;
        GeckoPreferences.User["network.proxy.http_port"] = port;
        GeckoPreferences.User["network.proxy.type"] = 1;
        wb.Navigate("about:blank");
        wb.DocumentCompleted += wb_DocumentCompleted;

        while (!readyState)
            Application.DoEvents();

        return wb.Document.TextContent;
    }

    void wb_DocumentCompleted(object sender, EventArgs e)
    {
        readyState = true;
    }

} 
```

}

错误：

{“无法将类型为“System.__ComObject”的 COM 对象转换为接口类型“Skybound.Gecko.nsIServiceManager”。此操作失败，因为对具有 IID 的接口的 COM 组件调用 QueryInterface '{8BB35ED9-E332-462D-9155 -4A002AB5C958}' 由于以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)）。"}

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T08:42:48.197

Gecko 不支持多线程。所以你可以使用它下面的代码在线程中使用它。

```
this.BeginInvoke(new Action(() => {
//What you want gecko browser to do! Like:
geckoBrowser.navigate("http://somewhere.com");
 })); 
```

# paypal - Paypal NVP REFUND API 收到错误 10007

> ID：15852132
> 
> 赞同：1
> 
> 时间：2013-04-06T14:31:00.513
> 
> 标签：paypal, paypal-sandbox, paypal-nvp

我正在尝试使用 paypal nvp 退还金额。我收到以下错误

```
[TIMESTAMP] => 2013 04 06T13 48 19
[CORRELATIONID] => aac23709cc94a
[ACK] => Failure [VERSION] => 51 0
[BUILD] => 5618210
[L_ERRORCODE0] => 10007
[L_SHORTMESSAGE0] => Permission denied
[L_LONGMESSAGE0] => You do not have permission to refund this transaction     
[L_SEVERITYCODE0] => Error ) 
```

我做错了什么？我已经设置了付款的电子邮件 ID 的 api 密钥请让我知道有什么问题以及如何使退款工作。

代码

```
$API_Endpoint = "https://api-3t.sandbox.paypal.com/nvp";
$version = urlencode('51.0');
$API_UserName = 'example';
$API_Password = 'example';
$API_Signature = 'example';
$API_Endpoint = 'example';
$sandboxmode = 'example';
$methodName_ = 'RefundTransaction';
$transactionID = urlencode('example');
$refundType = urlencode('example'); 

if($partial) {
    $amount = 'example';
    $memo   = 'Refunding the amount ';
    $nvpStr_ = "&TRANSACTIONID=$transactionID&REFUNDTYPE=$refundType&CURRENCYCODE=$currencyID&AMT=$amount&NOTE=$memo";
} else {
    $nvpStr_ = "&TRANSACTIONID=$transactionID&REFUNDTYPE=$refundType&CURRENCYCODE=$currencyID";
}
$currencyID = urlencode('CAD');
    $API_Endpoint = "https://api-3t.sandbox.paypal.com/nvp";
    $version = urlencode('51.0');
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $API_Endpoint);
curl_setopt($ch, CURLOPT_VERBOSE, 1);

// Turn off the server and peer verification (TrustManager Concept).
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);

curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, 1);

// Set the API operation, version, and API signature in the request.
$nvpreq = "METHOD=$methodName_&VERSION=$version&PWD=$API_Password&USER=$API_UserName&SIGNATURE=$API_Signature$nvpStr_";

// Set the request as a POST FIELD for curl.
curl_setopt($ch, CURLOPT_POSTFIELDS, $nvpreq);

// Get response from the server.
$httpResponse = curl_exec($ch); 
```

# c++ - C/C++ 小波库，非 GPL

> ID：15852134
> 
> 赞同：7
> 
> 时间：2013-04-06T14:31:20.043
> 
> 标签：c++, c, algorithm, wavelet, haar-wavelet

理想情况下，我希望找到具有与多个小波类别（如 GSL）的简单、直接接口的东西，但它具有允许我在专有软件中使用它的许可证。这里的[最佳答案](https://stackoverflow.com/questions/9606458/looking-for-a-good-c-c-wavelet-library-for-signal-processing)列出了 10 个 Wavelet 库，但是除了一个之外，其他所有库都在 GPL 下获得许可，而且[那个](http://www.maven.de/code/wavelet/index.html)似乎不是有点重量级的，小波计算包含在更大的图像处理功能中（我没有这样做）。无论如何，我希望有更多的选择。

我还发现[了这个](http://www.cse.cuhk.edu.hk/~ttwong/demo/dwtgpu/)，它看起来很酷，但它假定一个支持 cuda 的 GPU，我不能假设。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T16:27:22.603

[找到一个](https://sourceforge.net/projects/leasy-wavelet/?source=dlp)！它提供 Apache 2.0 许可证以及 GPL。不幸的是，它只计算一个特定的变换（“带有提升的惰性变换”），所以我仍然想知道更多选项（如果有的话）。

# java - 如何使用java程序运行命令提示符命令？

> ID：15852144
> 
> 赞同：8
> 
> 时间：2013-04-06T14:32:22.727
> 
> 标签：java, command, command-prompt, ping, prompt

这是我第一次在这里发帖，所以我不确定该说什么/问什么。无论如何，我正在尝试制作一个简单的 java 程序，该程序从 java 程序运行命令提示符命令，主要用于 ping flood（ping flooding 我自己）。

这是我当前的代码

```
public class Core extends JFrame {

JTextField ipTextField;

int packets = 0;

boolean running = false;

public Core() {
    super("Fatique");

    Container container = getContentPane();
    JButton bAttack = new JButton("Start Attack");
    JButton bStop = new JButton("Stop Attack");
    JPanel jPanel = new JPanel();

    container.setLayout(new FlowLayout());
    ipTextField = new JTextField("IP Address", 30);
    container.add(ipTextField);

    bAttack.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            String input = ipTextField.getText();
            String[] value = input.split(":");

            int amountOfPackets = Integer.parseInt(value[1]);

            exec("cmd /c" + input + " -t -n " + amountOfPackets);
            running = true;
        }
    });

    bStop.addActionListener(new ActionListener()
    {
        public void actionPerformed(ActionEvent e)
        {
            stop();
        }
    });

    if(!running) {
        jPanel.add(bAttack);
    } else {
        jPanel.add(bStop);
    }

    add(jPanel);
}  

public void exec(String cmd) {
    try {
        Process p = Runtime.getRuntime().exec(cmd);
        System.out.println(getOutput(p) + " - " + getPacketsSent());
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public String getOutput(Process p) {
    String output = null;

    try {
        BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
        String line = null;
        while ((line = in.readLine()) != null) {
            output = line;
            packets++;
        }

        return output;
    } catch (IOException e) {
        System.err.println(e.getStackTrace());
    }

    return null;
}

public int getPacketsSent() {
    return packets;
}

public void stop() {
    exec("cmd /c break");
    running = false;
}

public static void main(String[] args) {  
    Core c = new Core();
    c.setSize(500, 300);
    c.setVisible(true);
    c.setResizable(false);
    c.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    c.setLocationRelativeTo(null);
} 
```

我对java很陌生，所以这可能不会做我想做的事。我想要它做的是我在文本字段中输入一个 IP 地址，并用“：”分割它，然后是数据包的数量，例如

```
127.0.0.1:100 
```

虽然现在当我尝试使用该 ip 和数据包数量时，它返回“null - 0”（来自 exec 方法），我什至不确定它是否做了与 ping 相关的任何事情。

正如我已经说过的那样，我想要完成的是，ping 自己，然后输出我得到的任何响应，尽管我不知道这段代码是否做了任何与此相关的事情，但我在编写 java 代码时主要使用逻辑。

```
 public String getOutput(Process p) {
    String output = null;

    try {
        BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
        String line = null;
        while ((line = in.readLine()) != null) {
            output = line;
            packets++;
        }

        return output;
    } catch (IOException e) {
        System.err.println(e.getStackTrace());
    }

    return null;
} 
```

有人可以解释一下为什么我的代码无法正常工作吗？请不要判断，正如我已经说过的，我对 java 编程很陌生。

编辑：这是我想要完成的快速“信息性”解释。

1.  我输入一个 IP 地址以及我想发送多少个数据包。在这个解释中，我使用的是 localhost ip 和 5 个数据包。 ![即将发送5个数据包到localhost ip](https://i.stack.imgur.com/xKXbl.png)
2.  我开始攻击。在这部分，我希望程序运行 cmd prompt 命令

    ping 127.0.0.1 -t -n 5

    127.0.0.1 是我在程序的文本字段中输入的 ip，5 是我在文本字段中输入的数据包数量。

3.  我开始了攻击，所以这就是在命令提示符下应该发生的事情： ![5 个数据包发送到 locahost](https://i.stack.imgur.com/SC3wz.png)

    语言是芬兰语，但还是一样的。

    这是我要完成的工作的基本解释，希望有人理解并可以帮助/说明为什么我的代码不工作，或者工作但没有在 Eclipse 控制台中打印正确的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:18:10.303

您的 getOutput 方法有问题。看起来您打算收集每一行输出。但实际上，由于您分配`line`给`output`，因此您只会返回流结束之前的最后一行。

要解决此问题，请更改

```
 output = line; 
```

至

```
 output += line + "\n"; 
```

或者更正确地说：

```
 output += line + LINE_SEPARATOR; 
```

您之前将后者声明为：

```
 final String LINE_SEPARATOR = System.getProperty("line.separator"); 
```

* * *

这并不能直接解释您为什么会得到`null`，但这可能是因为您正在运行的命令正在将输出写入“错误”流而不是“输出”流。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T14:34:58.400

尝试这样的事情：

```
try {
       Runtime rt = Runtime.getRuntime();
       Process p = rt.exec("ping 192.168.16.67");
       InputStream in = p.getInputStream();
       OutputStream out = p.getOutputStream ();
       InputStream err = p.getErrorStream();
       p.destroy();
} catch(Exception exc) {} 
```

然后，您必须读取`out`变量以连续解析`ping`命令输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-06T10:58:46.460

```
bAttack.addActionListener(new ActionListener()
{
    public void actionPerformed(ActionEvent e)
    {
        String input = ipTextField.getText();
        String[] value = input.split(":");

        int amountOfPackets = Integer.parseInt(value[1]);

        try {
            p=Runtime.getRuntime().exec("ping -n "+amountOfPackets+" "+value[0]);
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        running = true;

    } 
```

只需对您的代码进行少量修改。得到输出如下：

```
public String getOutput(Process p) {
String output = null;

try {
    BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
    String line = null;
    while ((line = in.readLine()) != null) {
        output =output+ line+"\n";
        packets++;
    }

    return output;
} catch (IOException e) {
    System.err.println(e.getStackTrace());
}

return null;
} 
```

这里的输出是我用来显示 PING 进程输出的 JTextArea。我无法向您展示输出，因为我缺乏声誉。

我不知道为什么第一行是空的。无论如何，它有效。

希望这对您有所帮助。玩得开心编码。

# ruby-on-rails - CanCan - 将控制器映射到现有模型

> ID：15852153
> 
> 赞同：0
> 
> 时间：2013-04-06T14:33:15.473
> 
> 标签：ruby-on-rails, ruby, rubygems, cancan

我想“映射”`MyController`到`User`模型

```
#ability
class Ability
  include CanCan::Ability

  def initialize user
    user ||= User.new
    if user.has_role? :admin
      can :manage, :all
    else
      can :read, :all
      can :read, User do |u|
        u && u.user_id == user.id
      end

    end
  end
end

#routes
get 'my_controller/show/(:id)', to: 'MyController#show'

#controller
class MyController < ApplicationController
  # load_and_authorize_resource

  def show
    # showing a user
  end
end 
```

所以`my_controller/show/(:id)`只能对`admin`和访问`current user`。例如，用户`id == 2`可以看到自己的个人资料`my_controller/show/2`，而不能看到其他用户的个人资料，例如`my_controller/show/1234`除非他们是`admin`.

项目中没有`My`模型。理想情况下，我必须重命名`MyController`为，`UserController`但由于某种原因我不允许这样做。

如果我`load_and_authorize_resource`在 处取消注释`MyController`，则会出现以下错误

```
NameError in MyController#show

uninitialized constant My 
```

那么我怎样才能摆脱它呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:42:44.227

您可以指定要加载和授权的资源类型的名称：

```
load_and_authorize_resource :user 
```

否则 cancan 将尝试按照约定（基于控制器的名称）来解决它。

[https://github.com/ryanb/cancan/wiki/authorizing-controller-actions](https://github.com/ryanb/cancan/wiki/authorizing-controller-actions)

# java - Java android - 用于在未注册活动时通知的 Eclipse 插件？

> ID：15852156
> 
> 赞同：1
> 
> 时间：2013-04-06T14:33:19.650
> 
> 标签：java, android, eclipse, plugins, android-activity

我只是想知道是否存在一个 Eclipse 插件，如果活动未在 xml 中注册，它会在编译时通知。

编辑：我只想知道是否专门存在一个插件来做到这一点，而不是如何创建一个活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:35:39.137

如果你使用 File - New - Other ... - Android Activity。它将创建扩展类文件`Activity`并自动将其注册到您的清单文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:56:11.620

内置的 lint 能够检测到此类错误。

# matrix - 制作一个无需先声明矩阵大小即可初始化的 Matrix 类

> ID：15852157
> 
> 赞同：1
> 
> 时间：2013-04-06T14:33:30.263
> 
> 标签：matrix, initialization, smalltalk, squeak

我是 Smalltalk 的新手，目前正在上课。我们被分配的一个问题需要创建一个新的“HeavyMatrix”类，它的调用方式是这样的——</p>

```
aMatrix := HeavyMatrix new. 
```

请注意，没有初始大小分配。大小应该在创建时未确定。然后，该类使用以下方法将值添加到矩阵 -</p>

```
aMatrix setRow:1 column:2 value:7. 
```

矩阵中所有未以这种方式声明的值默认为0。新的HeavyMatrix 类不应该继承Object 以外的任何东西（即不是Matrix 或Array）。任何 Smalltalkers 可以帮助我吗？该类必须包含一些其他方法，但我认为一旦能够初始化该类，我就可以计算出其他所有方法。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T17:09:46.600

我能给你什么建议……首先，`setRow:column:value:`如果当前列大小小于所需的大小，则可以只使用有序集合，然后添加缺少的 OrderedCollection 实例。与所需的行大小相同（添加 0）。实现将是这样的：

```
initialize
    rows := OrderedCollection new

setRow: aRow column: aColumn value: aValue
    | row |
    rows size < aRow ifTrue: [
        (aRow - rows size) timesRepeat: [rows add: OrderedCollection new]].
    row := rows at: aRow.
    row size < aColumn ifTrue: [
        (aColumn - row size) timesRepeat: [row add: 0]].
    row at: aColumn put: aValue

getRow: aRow column: aColumn
    aRow <= rows size ifTrue: [
        |row|
        row := rows at: aRow.
        aColumn <= rows size ifTrue: [^ row at: aColumn]].
    ^ 0 
```

但更有效的方法是实现我认为的稀疏矩阵。你有很多在[wiki](http://en.wikipedia.org/wiki/Sparse_matrix)描述的结构。请注意，只有当您的元素数量相对于矩阵本身的大小而言较少时，此矩阵才有效。但是，如果您要检查最简单的实现，例如在字典中存储坐标值数据，那么它将非常适合您：

```
initialize
    dict := Dictionary new

setRow: aRow column: aColumn value: aValue
    dict at: aRow@aColumn put: aValue

getRow: aRow column: aColumn
    dict at: aRow@aColumn ifAbsent: [0] 
```

# ios - 带有按钮和标签的半透明覆盖层？

> ID：15852159
> 
> 赞同：0
> 
> 时间：2013-04-06T14:33:50.937
> 
> 标签：ios, objective-c

我正在尝试实现与附加图像类似的东西——只是一个半透明的覆盖层、一个标签和一个按钮。我尝试添加一个带有按钮和标签的视图并降低 alpha，但我无法让它工作。有谁知道我如何在努力降低内存成本的同时实现类似的目标。

![](https://i.stack.imgur.com/pkEFJ.jpg)

预先感谢您的任何帮助 ：）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:50:26.220

实际上，添加一个具有半透明背景颜色的子视图对我来说效果很好：

![半透明视图](https://i.stack.imgur.com/an5CV.png)

我添加到单视图应用程序模板的唯一代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    [self.view addSubview:self.semiView];
} 
```

# windows - 更改 DLL 代码段内的页面保护的影响？

> ID：15852160
> 
> 赞同：0
> 
> 时间：2013-04-06T14:33:56.473
> 
> 标签：windows, dll

我想更改对 Dll 中空洞函数的内存页的保护，使其不再可执行。

这会影响将相同 dll 映射到虚拟地址空间的其他进程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:59:42.200

**TL;DR：不，它没有。**

NX 位在虚拟/页面级别工作。每个进程都有自己的虚拟地址空间，不能直接影响另一个进程的地址空间（共享内存除外）。

不同的进程可以共享 DLL 的映射页。如果一个进程更改了一个页面，写入时复制启动并且该进程获得该页面的唯一副本，则其他进程的 DLL 视图不受影响。

有关 NX 的更多信息，请参阅[英特尔® 64 和 IA-32 架构软件开发人员手册](http://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-vol-3a-part-1-manual.html)（第 3A 卷已链接，共 7 卷）。

此外，这是一篇较旧但仍然相关的 Microsoft[文章，关于写时复制保护](http://support.microsoft.com/kb/103858)。

# css-transitions - 如何在悬停时设置过渡

> ID：15852161
> 
> 赞同：0
> 
> 时间：2013-04-06T14:34:07.070
> 
> 标签：css-transitions

我想在悬停时设置不透明度过渡，但不明白如何。任何帮助将不胜感激。

```
<div><img src="http://codezona.com/wp-content/uploads/2013/03/rusalkasmall.jpg" alt=""></div>
img {
 display:block;
}
div {
  position:relative;
}

div:hover:before {
  content:"";
  opacity:0.1;
  position:absolute;
  width:170px;
  height:100px;
  background:#ebe316; 
} 
```

[演示](http://codepen.io/anon/pen/mbrcp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:38:02.083

使用 CSS3 过渡。这是一个带有小提琴的示例，因此您可以看到它的工作原理。

```
#on-hover {
    opacity:0;
    /* Firefox */
    -moz-transition-property: opacity;
    -moz-transition-duration: 2s;
    -moz-transition-delay: 1s;
    /* WebKit */
    -webkit-transition-property: opacity;
    -webkit-transition-duration: 2s;
    -webkit-transition-delay: 1s;
    /* Opera */
    -o-transition-property: opacity;
    -o-transition-duration: 2s;
    -o-transition-delay: 1s;
    /* Standard */
    transition-property: opacity;
    transition-duration: 2s;
    transition-delay: 1s;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
}
#on-hover:hover {
    opacity:1;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";
} 
```

[http://jsfiddle.net/djwave28/CuNkZ/6/](http://jsfiddle.net/djwave28/CuNkZ/6/)

IE10 之前的浏览器不支持，但您可以应用 -ms-filter 以使不透明度响应。

# iphone - 触摸移动时如何检测图像视图的触摸结束

> ID：15852168
> 
> 赞同：2
> 
> 时间：2013-04-06T14:34:44.833
> 
> 标签：iphone, ios, uiimageview, touches

我有一个图像视图。我在这样的图像视图中检测到触摸

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
   UITouch *touch = [touches anyObject];
   int viewTag=[touch view].tag;

   if ([[touch view] isKindOfClass:[UIImageView class]])
   {
      //My code
   }
} 
```

并触摸在图像视图上移动。每当我的触摸在特定时间移出图像视图时，我都需要一个警报视图。如何在触摸移动中从图像视图中检测到触摸？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:57:09.010

我建议使用 a`UIPanGestureRecognizer`并将其添加到要检测的图像视图的更大超级视图中。这样，即使触摸从外部开始并移入和移出图像视图，您也可以在手势处理程序中跟踪触摸的移动。

这很简单，`handlePan:`例如创建一个名为的方法，使用您的处理程序方法创建手势识别器，将其添加到适当的超级视图中。现在，只要手势处于活动状态并且触摸移动，您的处理程序方法就会被调用，您可以检查它是否在您的图像视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:55:22.617

你应该用这个方法...

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
   UITouch *touch = [touches anyObject];
   int viewTag=[touch view].tag;

   if ([[touch view] isKindOfClass:[UIImageView class]])
   {
  //My code
   }
   else
   {
      //show the alertView here
   }
} 
```

并检查初始点击是否在 imageView 上，您必须在 touchesBegan 方法中设置一个标志......并在 touchesMoved 方法中相应地检查它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T15:07:44.877

您可以在和轨道`UIButton`顶部添加相同大小的透明`UIImageView``UIControlEventTouchDragOutside`

`[button addTarget:self action:@selector(draggedOutside:) forControlEvents:UIControlEventTouchDragExit];`

# mysql - MYSQL 触发器由于错误不会被创建

> ID：15852169
> 
> 赞同：0
> 
> 时间：2013-04-06T14:34:50.067
> 
> 标签：mysql, triggers, phpmyadmin

我正在尝试在 MYSQL 5.0.95 中创建一个触发器，以防止在电子邮件字段中找不到 @ 符号时发生插入。我知道除了触发器之外还有其他方法可以做到这一点，但我真的很想了解触发器是如何工作的

```
CREATE TRIGGER triggerUsersEmail 
BEFORE INSERT ON Users 
FOR EACH ROW 
BEGIN 
IF (Users.email NOT LIKE '%@%') THEN
DECLARE dummy INT;
SELECT not a valid email address INTO dummy FROM Users WHERE 1=1
END IF;
END;$$ 
```

我在 PHPMYADMIN 中使用 $$ 分隔符运行上述内容，但出现此错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DECLARE dummy INT; SELECT not a valid email address INTO dummy FROM Users WHERE' at line 6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:49:12.350

你试过这个吗？

```
    CREATE TRIGGER triggerUsersEmail
    在插入用户之前
    每一行
    开始
    声明虚拟 INT；
    IF (Users.email NOT LIKE '%@%') THEN
    SELECT not a valid email address INTO dummy FROM Users WHERE 1=1
    万一;
    结束；$$

```

在开始后声明变量。

_ *_*编辑

```
分隔符 $$
CREATE TRIGGER triggerUsersEmail
在插入用户之前
每一行
开始
    声明虚拟 INT；

    IF (Users.email NOT LIKE '%@%') THEN
        SELECT "not a valid email address" INTO dummy FROM Users WHERE 1=1;
    万一;
结尾;

$$

```

这在我的服务器上有效

# c++ - 为什么没有隐式生成的移动构造函数？

> ID：15852182
> 
> 赞同：2
> 
> 时间：2013-04-06T14:36:00.553
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, move-constructor

比如说，我有一个以可移动资源为成员的类：

```
struct A {
  std::vector<int> v;
}; 
```

有一个隐式生成的复制构造函数，它工作得很好，大致如下实现：

```
// Implicitly generated copy constructor
A(const A& rhs) : v(rhs.v) {}; 
```

而且我希望在 C++11 中以相同的方式隐式生成移动构造函数：

```
// Move constructor is not implicitly generated, why?
A(A&& rhs) : v(std::move(rhs.v)) {}; 
```

但是，至少在 Visual Studio 2010 中不会隐式生成移动构造函数。并且在以下代码中复制了一个向量：

```
A a;
A b(std::move(a));  // a.v is copied, not moved 
```

我的问题是——为什么？在我看来，编译器隐式生成移动构造函数的副本没有区别 - 它具有这两个的完整信息。

或者也许移动构造函数*应该*由标准生成，但 Visual Studio 不这样做？

**更新**

我调试了代码，并在文件`vector(const _Myt& _Right)`中调用了构造函数。`<vector>`当我显式编写移动构造函数时，`vector(_Myt&& _Right)`会调用构造函数。

**更新2**

刚刚检查过：Visual Studio 2012 Update 1 中的行为相同。

**更新3**

好的，我同意这是重复的，但关闭原因中提供的链接不正确。评论中提供了正确的链接：[为什么调用这个复制构造函数而不是移动构造函数？](https://stackoverflow.com/q/10201659/261217)

这就是为什么，来自[VC 博客](http://blogs.msdn.com/b/vcblog/archive/2011/09/12/10209291.aspx)：

> 右值引用 v3.0 添加了新规则，可以在特定条件下自动生成移动构造函数和移动赋值运算符。这不会在 VC11 中实现，它将继续遵循 VC10 的从不自动生成移动构造函数/移动赋值运算符的行为。（与此处所有尚未实现的功能一样，这是由于时间和资源限制，而不是由于不喜欢这些功能本身！）

# ios - 使用 Evernote iOS sdk 搜索笔记

> ID：15852192
> 
> 赞同：0
> 
> 时间：2013-04-06T14:37:06.897
> 
> 标签：ios, rubymotion, evernote

我正在使用 ruby​​-motion 在evernote-ios-sdk 之上构建一个应用程序。我可以创建标签和注释，但是当我尝试进行搜索时出现错误：domain=com.evernote.sdk, code=3 (EDAMErrorCode_PERMISSION_DENIED?)。这是权限问题还是代码问题？下面是我的带有和不带有 resultSpec 的代码。

```
 note_store = EvernoteNoteStore.noteStore
    filter = EDAMNoteFilter.alloc.initWithOrder 0, ascending:false, words:nil, notebookGuid:nil, tagGuids:nil, timeZone:nil, inactive:false, emphasized:nil
    note_store.findNotesWithFilter filter, offset:0, maxNotes:10, success: notes_loaded, failure: output_error

    spec = EDAMNotesMetadataResultSpec.alloc.initWithIncludeTitle false, includeContentLength:false, includeCreated:false, includeUpdated:false, includeUpdateSequenceNum:false, includeNotebookGuid:false, includeTagGuids:false, includeAttributes:false, includeLargestResourceMime:false, includeLargestResourceSize:false
    note_store.findNotesMetadataWithFilter filter, offset:0, maxNotes:10, resultSpec:spec, success: notes_loaded, failure: output_error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:38:56.403

创建 API 密钥时，您可能要求提供基本访问权限。您需要完全访问权限才能阅读笔记。更多信息[在这里](http://dev.evernote.com/start/core/permissions.php)。[您可以在此处](http://dev.evernote.com/support/faq.php#getsupport)将其更改为完全访问权限。

# java - 实现搜索栏

> ID：15852193
> 
> 赞同：0
> 
> 时间：2013-04-06T14:37:14.560
> 
> 标签：java, android

我想实现一个搜索栏，用户可以写一些东西，它会在页面中搜索。

我在 android developer 中读到了它并找到了它：

[http://developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html)

但是，我读到它仅适用于 api 11 及更高版本。

是否有低于 11 的 api 的任何实现或其他搜索小部件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:52:54.477

不幸的是，我无法回答您的具体问题，但您可以使用 Regex 库解析页面本身的文本（请参阅[Tutorial Trail](http://docs.oracle.com/javase/tutorial/essential/regex/)）。诚然，您必须以某种方式在其中放置某种效率措施，毕竟这不是 Lua，但可以手动完成。

# java - DriverManager 没有合适的驱动 mysql

> ID：15852195
> 
> 赞同：2
> 
> 时间：2013-04-06T14:37:20.640
> 
> 标签：java, mysql, jsp, jdbc, localhost

在使用 DriverManager 创建连接时，我们很难找出为什么会收到错误消息。

这是我们的代码

```
package Databank;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.Statement;
import java.util.List;

public class Connectie_Databank
{
    //Eigenschappen databank
    private String connectieString = "";
    private Connection connectie = null;
    private PreparedStatement prepStatement = null;
    private Statement statement = null;
    private ResultSet inhoudQuery = null;

    //Inloggegevens PhpMyAdmin
    private String gebruikersnaam, wachtwoord;

    //Constructor met standaardinstellingen
    public Connectie_Databank()
    {
        this.connectieString = "jdbc:mysql://localhost/groep2_festivals";
        this.gebruikersnaam = "root";
        this.wachtwoord = "";
    }

    //Constructor met nieuwe data
    public Connectie_Databank(String connectionString, String gebruikersnaam, String wachtwoord)
    {
        this.connectieString = connectionString;
        this.gebruikersnaam = gebruikersnaam;
        this.wachtwoord = wachtwoord;
    }

    /**
     * Deze methode zorgt ervoor dat er verbinding gemaakt wordt me de databank
     */
    public void maakConnectie()
    {
        try
        {
            connectie = DriverManager.getConnection(connectieString, gebruikersnaam, wachtwoord);
        }
        catch(Exception e)
        {
            System.err.println("FOUTMELDING: " + e.getMessage());
        }
    }

    public void voerQueryUit(String query, List<String> parameters)
    {
        try
        {
            if(parameters.size() > 0)
            {
                //Reden preparedStatement: geen SQL-Injectie!
                prepStatement = connectie.prepareStatement(query);

                //Lijst met parameters uitlezen om de preparedStatement op te vullen
                for(int i=1; i<=parameters.size(); i++)
                {
                   prepStatement.setString(i, parameters.get(i-1));
                }
                inhoudQuery = prepStatement.executeQuery();
            }
            else
            {
                statement = connectie.createStatement();
                inhoudQuery = statement.executeQuery(query);
            }
        }
        catch(Exception e)
        {}
    }

    public ResultSet haalResultSetOp()
    {
        return inhoudQuery;
    }

    public void sluitConnectie()
    {
        //ConnectieString leegmaken en alle objecten die te maken hebben met de connectie sluiten
        try
        {
            connectieString = "";
            if(connectie != null)
            {
                connectie.close();
            }
            if(prepStatement != null)
            {
                prepStatement.close();
            }
            if(inhoudQuery != null)
            {
                inhoudQuery.close();
            }
        }
        catch(Exception e)
        {}
    }
} 
```

我们在 JSP 页面中调用我们的连接类，如下所示：

```
 <%
        Connectie_Databank connectie;
        ResultSet res;
        connectie  = new Connectie_Databank();

        connectie.maakConnectie ();

        List<String> lijstParams = new ArrayList<String>();
        connectie.voerQueryUit ("SELECT * FROM festivals", lijstParams);

        res  = connectie.haalResultSetOp();
    %> 
```

这发生在我们页面的头部。第一次加载页面时，我们得到一个错误“找不到适合 jdbc mysql 的驱动程序”但是当我们刷新时，我们查询的信息正确显示。

所以，我们只在第一次加载时收到一条错误消息，之后就没有错误发生，一切正常。

任何人都可以帮助我们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:40:39.560

首先你需要在连接之前加载JDBC驱动

```
// Notice, do not import com.mysql.jdbc.*
// or you will have problems!

//Load Driver
try {
  // The newInstance() call is a work around for some
  // broken Java implementations
  Class.forName("com.mysql.jdbc.Driver").newInstance();
} catch (Exception ex) {
  // handle the error
}

con=DriverManager.getConnection(connectieString);
System.out.println ("Database connection established"); 
```

确保在运行应用程序时类路径上有 mysql-connector-java-5.xx-bin.jar。

# jquery - 优化使用平板电脑的 jquery 创建的网站上的动画

> ID：15852199
> 
> 赞同：2
> 
> 时间：2013-04-06T14:37:45.070
> 
> 标签：jquery, performance, mobile-website

我有一个广泛使用 jQuery 的 SPA 网站。一切都很好 - 在所有浏览器上看起来和表现都很好。

现在我要求让它对**平板电脑**友好。

仅通过在平板电脑上打开网站，最大的问题似乎是所有交互 - 选择、加载图标、淡入、淡出都是缓慢且不流畅的（就像它们在 pc 浏览器上一样）。

我能做什么？我负担不起使用其他框架重写网站的费用，但如果我可以利用 jquery mobile 等框架提供的功能，我愿意接受建议。

资源链接表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T14:43:29.240

简而言之，尽可能使用 CSS 过渡。如果不是，请确保您的动画使用 requestAnimationFrame。

我写了[http://css3.bradshawenterprises.com/blog/jquery-vs-css3-transitions/](http://css3.bradshawenterprises.com/blog/jquery-vs-css3-transitions/)一年左右，其中有一个人为的演示来显示差异。

[https://github.com/benbarnett/jQuery-Animate-Enhanced](https://github.com/benbarnett/jQuery-Animate-Enhanced)可能可以简单地加入以提高性能，尽管它可能会在复杂动画上破坏您的网站。

# php - 在后台从 Windows 上的命令行执行 PHP 执行 PHP 脚本

> ID：15852207
> 
> 赞同：0
> 
> 时间：2013-04-06T14:38:24.473
> 
> 标签：php, command-line-interface

我有一个 PHP 页面，我正在从另一个这样的 PHP 页面执行 -`exec('c:\php\php.exe processing.php > NUL ');`

处理页面有一个 SQL 存储过程，该过程运行并在存储过程完成后需要一段时间才能完成，然后从结果中创建一个 .csv 并将其放入目录中。

只要执行时间不长，整个过程就可以正常工作。如果我在几千条记录上运行它，只需要 3-5 分钟就可以完成。如果我使用 20K 条记录运行它，则该过程需要 10 多分钟才能完成，但在完成之前就被杀死了。

速度不是问题，我们可以接受它需要一段时间才能运行，但不知何故脚本被杀死了。虽然它正在运行，但我可以从 Windows 的任务管理器中看到 CLI 进程，但看起来如果它需要超过 10 分钟，Windows 就会杀死它或其他什么东西。

我只是想弄清楚如何运行它而不会使进程因花费太长时间而被杀死。

对此的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:03:09.923

尝试使用`set_time_limit(0)`（参见文档： http: [//php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)）。

将时间限制设置为 0 将删除任何时间限制。

另外，请确保您没有任何内存问题。如果你的脚本试图分配太多内存，它无论如何都会被杀死。您可以检查脚本的内存使用情况`memory_get_usage()`（请参阅文档： http: [//php.net/manual/en/function.memory-get-usage.php](http://php.net/manual/en/function.memory-get-usage.php)）

# html - Sublime Text 2 HTML 语法高亮问题

> ID：15852211
> 
> 赞同：4
> 
> 时间：2013-04-06T14:38:58.180
> 
> 标签：html, syntax-highlighting, sublimetext2

我在 Sublime Text 2 中对 HTML（和纯文本）的语法突出显示有问题，因为它只会使图像中的行变灰。

![在此处输入图像描述](https://i.stack.imgur.com/ekicn.jpg)

每当我转向 Python、JavaScript 和其他语言时，突出显示效果都很好。我是 Sublime Text 2 的新手，所以这可能是一个简单的答案，但我不知道如何在不显示图像的情况下制定问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T14:59:30.123

我不认为这是一个问题，这只是主题“万圣节前夜”的工作原理：您可以在此块内更改此颜色：（首选项->浏览包>配色方案-默认->万圣节前夜）

```
 <dict>
        <key>name</key>
        <string>Text base</string>
        <key>scope</key>
        <string>text</string>
        <key>settings</key>
        <dict>
            <key>background</key>
            <string>#434242</string> #THIS IS GRAY COLOR YOU WANNA CHANGE.
            <key>foreground</key>
            <string>#FFFFFF</string>
        </dict>
    </dict> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T14:54:34.297

我发现了问题；看起来配色方案“万圣节前夜”在 HTML 上效果不佳，所以我只是更改了配色方案。

# vim - vim 宏将 \n 替换为 ','

> ID：15852221
> 
> 赞同：2
> 
> 时间：2013-04-06T14:40:41.303
> 
> 标签：vim, macros

我正在尝试保存一个替换为的`\n`宏`,`

输入：

```
978818
978818
900298
900272 
```

输出：

```
'978818','978818','900298','900272' 
```

`CTRL`当我使用++保存宏时，在 vimrc 中它如下所示`R` `CTRL`：`R``B`

```
let @b = ":%s/\n/','/g^MI'^[A~@kb~@kb^[" 
```

但是现在当我运行这个宏时，它给出的输出为：

```
978818978818900298900272 
```

和错误：

```
E486: Pattern not found: ',' 
```

不知道为什么它试图匹配`,`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:56:46.227

您可能需要转义 \n。vim 认为您在字符串中的该点需要一个换行符，并将其替换为文字换行符。所以固定宏应该是。

`let @b = ":%s/\\n/','/g^MI'^[A~@kb~@kb^["`

编辑：如果你想要一些可以复制和粘贴的东西，我相信下面的宏相当于你想要的。

`let @b = ":%s/\\n/','/g\nI'\e$xx"`

# android - 媒体播放器 NullPointerException？

> ID：15852224
> 
> 赞同：2
> 
> 时间：2013-04-06T14:40:58.513
> 
> 标签：android, nullpointerexception, android-mediaplayer

我在铃声应用程序（mp3 声音）中使用媒体播放器。它工作正常，但我在 google play 开发者控制台上看到错误报告（对于某些用户），我在我的设备上找不到错误，谢谢

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    soundname= new String[]  {"Sound1","Sound2","Sound3","Sound4","Sound5","Sound6"}; 
    soundfile= new int[] {R.raw.sound1,R.raw.sound2,R.raw.sound3,R.raw.sound4,R.raw.sound5,R.raw.sound6};

    this.setContentView(R.layout.single_list_item_view);

    TextView txtProduct = (TextView) findViewById(R.id.product_label);
    Intent intent = getIntent();
    int position = intent.getExtras().getInt("position");

    txtProduct.setText(soundname[position]);
    stopPlaying();  
    mediaPlayer = MediaPlayer.create(this, soundfile[position]); 

    Button btnplay= (Button) findViewById(R.id.btnoynat);
    btnplay.setOnClickListener(new View.OnClickListener(){

        public void onClick(View arg0) { 
                mediaPlayer.start();         
        }
        });
}

private void stopPlaying() {
    if (mediaPlayer != null) {
        mediaPlayer.stop();
        mediaPlayer.release();
        mediaPlayer = null;
  }} 
```

错误日志；(mediaPlayer.start();-->SingleListItem.java:60)

```
java.lang.NullPointerException
at com.zilsesleri.SingleListItem$1.onClick(SingleListItem.java:60)  
at android.view.View.performClick(View.java:2538)
at android.view.View$PerformClick.run(View.java:9152)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3693)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T15:07:07.453

在第 60 行，即 mediaplayer.start() 上，NPE（空指针异常）即将到来，因为它发现 mediaplayer 为空。因此，一种方法是在那里放置一个空选项检查

IE

```
if(mediaplayer != null){
mediaplayer.start();
} 
```

NPE 即将到来，因为在某些设备上从原始声音文件创建媒体播放器失败。

此外，您需要在 MediaPlayer 的 onCompletionListener 中停止（）和释放（）媒体播放器，以便它不会因为链接中提到的清理资源失败而失败：- [MediaPlayer->create](http://developer.android.com/reference/android/media/MediaPlayer.html#create%28android.content.Context,%20android.net.Uri,%20android.view.SurfaceHolder%29)

例如->

```
MediaPlayer mediaplayer = MediaPlayer.create(this, R.raw.sound1);        
if(mediaplayer == null) {            
    Log.v(TAG, "Create() on MediaPlayer failed.");       
} else {
    mediaplayer.setOnCompletionListener(new OnCompletionListener() {

    @Override
      public void onCompletion(MediaPlayer mediaplayer) {
          mediaplayer.stop();
          mediaplayer.release();
      }
    });
    mediaplayer.start();

} 
```

# r - 使用具有多个拟合参数的 nls 模型绘制平滑且外推的曲线

> ID：15852226
> 
> 赞同：1
> 
> 时间：2013-04-06T14:41:06.657
> 
> 标签：r, graphics, ggplot2, nls

我觉得我已经接近找到我的问题的答案，但不知何故我无法做到。我已经使用 nls 函数来拟合 3 个参数，该函数使用一个相当复杂的函数来描述在一系列精子浓度（x 轴）中卵子的受精成功（y 轴）（Styan 模型[[1]](http://www.jstor.org/stable/10.1086/286168)、[[2]](http://onlinelibrary.wiley.com/doi/10.1111/j.1558-5646.2008.00521.x/abstract)）。拟合参数效果很好，但我无法使用`predict`函数绘制平滑的外推曲线（见本文末尾）。我想这是因为我使用了一个未安装在 x 轴上的值。我的问题是如何根据`nls`在 x 轴上使用非拟合参数拟合函数的模型绘制平滑和外推曲线？

这是一个例子：

```
library(ggplot2)

data.nls <- structure(list(S0 = c(0.23298, 2.32984, 23.2984, 232.98399, 2329.83993, 
23298.39926), fert = c(0.111111111111111, 0.386792452830189, 
0.158415841584158, 0.898648648648649, 0.616, 0.186440677966102
), speed = c(0.035161615379406, 0.035161615379406, 0.035161615379406, 
0.035161615379406, 0.035161615379406, 0.035161615379406), E0 = c(6.86219803476946, 
6.86219803476946, 6.86219803476946, 6.86219803476946, 6.86219803476946, 
7.05624476582978), tau = c(1800, 1800, 1800, 1800, 1800, 1800
), B0 = c(0.000102758645352932, 0.000102758645352932, 0.000102758645352932, 
0.000102758645352932, 0.000102758645352932, 0.000102758645352932
)), .Names = c("S0", "fert", "speed", "E0", "tau", "B0"), row.names = c(NA, 
6L), class = "data.frame")

## Model S

modelS <- function(Fe, tb, Be) with (data.nls,{
x <- Fe*(S0/E0)*(1-exp(-B0*E0*tau))
b <- Fe*(S0/E0)*(1-exp(-B0*E0*tb))
x*exp(-x)+Be*(1-exp(-x)-(x*exp(-x)))*exp(-b)})

## Define starting values

start <- list(Fe = 0.2, tb = 0.1, Be = 0.1)

## Fit the model using nls

modelS.fitted <- nls(formula = fert ~ modelS(Fe, tb, Be), data = data.nls, start = start, 
control=nls.control(warnOnly=TRUE,minFactor=1e-5),trace = T, lower = c(0,0,0), 
upper = c(1, Inf, 1), algorithm = "port")

## Combine model parameters

model.data <- cbind(data.nls, data.frame(pred = predict(modelS.fitted)))

## Plot

ggplot(model.data) +
geom_point(aes(x = S0, y = fert), size = 2) +
geom_line(aes(x = S0, y = pred), lwd = 1.3) +
scale_x_log10() 
```

![在此处输入图像描述](https://i.stack.imgur.com/P7wjV.png)

我在[这里](https://stackoverflow.com/questions/9918807/how-get-plot-from-nls-in-r)尝试了 joran 的示例，但它没有效果，可能是因为我不适合`S0`：

```
r <- range(model.data$S0)
S0.ext <- seq(r[1],r[2],length.out = 200)
predict(modelS.fitted, newdata = list(S0 = S0.ext))
# [1] 0.002871585 0.028289057 0.244399948 0.806316161 0.705116868 0.147974213 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T16:12:12.687

你的函数应该有参数`(S0,E0,B0,tau,Fe,tb,Be)`。`nls`将在传递给其`data`参数的 data.frame 中查找参数，并仅尝试适合那些在其中找不到的参数（前提是给出了起始值）。`with`在你的职能中不需要这个有趣的事情。（`with`无论如何都不应该在函数内部使用。它用于交互使用。） In`predict` `newdata`必须包含所有变量，即 S0、E0、B0 和 tau。

试试这个：

```
modelS <- function(S0,E0,B0,tau,Fe, tb, Be) {
  x <- Fe*(S0/E0)*(1-exp(-B0*E0*tau))
  b <- Fe*(S0/E0)*(1-exp(-B0*E0*tb))
  x*exp(-x)+Be*(1-exp(-x)-(x*exp(-x)))*exp(-b)}

## Define starting values

start <- list(Fe = 0.2, tb = 0.1, Be = 0.1)

## Fit the model using nls

modelS.fitted <- nls(formula = fert ~ modelS(S0,E0,B0,tau,Fe, tb, Be), data = data.nls, start = start, 
                     control=nls.control(warnOnly=TRUE,minFactor=1e-5),trace = T, lower = c(0,0,0), 
                     upper = c(1, Inf, 1), algorithm = "port")

## Combine model parameters

model.data <- data.frame(
  S0=seq(min(data.nls$S0),max(data.nls$S0),length.out=1e5),
  E0=seq(min(data.nls$E0),max(data.nls$E0),length.out=1e5),
  B0=seq(min(data.nls$B0),max(data.nls$B0),length.out=1e5),
  tau=seq(min(data.nls$tau),max(data.nls$tau),length.out=1e5))
model.data$pred <- predict(modelS.fitted,newdata=model.data)

## Plot

ggplot(data.nls) +
  geom_point(aes(x = S0, y = fert), size = 2) +
  geom_line(data=model.data,aes(x = S0, y = pred), lwd = 1.3) +
  scale_x_log10() 
```

![在此处输入图像描述](https://i.stack.imgur.com/JKymS.png)

显然，这可能不是您想要的，因为该函数有多个变量并且不止一个变量在`new.data`. 通常，对于这样的情节，一个人只会改变一个，而其他人则保持不变。

所以这可能更合适：

```
 S0 <- seq(min(data.nls$S0),max(data.nls$S0),length.out=1e4)
  E0 <- seq(1,20,length.out=20)
  B0 <- unique(data.nls$B0)
  tau <- unique(data.nls$tau)

model.data <- expand.grid(S0,E0,B0,tau)
names(model.data) <- c("S0","E0","B0","tau")

model.data$pred <- predict(modelS.fitted,newdata=model.data)

## Plot

ggplot(model.data) +
  geom_line(data=,aes(x = S0, y = pred, color=interaction(E0,B0,tau)), lwd = 1.3) +
  geom_point(data=data.nls,aes(x = S0, y = fert), size = 2) +
  scale_x_log10() 
```

![在此处输入图像描述](https://i.stack.imgur.com/x8ycW.png)

# ember.js - 每次我点击 Ember 应用程序中的链接时，关联的模型都会将相同的数据附加到页面

> ID：15852227
> 
> 赞同：2
> 
> 时间：2013-04-06T14:41:08.363
> 
> 标签：ember.js, ember-data

这是我的 Ember 代码： http: [//pastebin.com/Hb9HCyy6](http://pastebin.com/Hb9HCyy6)

这是html： http: [//pastebin.com/kp195dFA](http://pastebin.com/kp195dFA)

JSFiddle：http: [//jsfiddle.net/MBmUs/270/](http://jsfiddle.net/MBmUs/270/)

现在即使停止工作大声笑我把那个API放在网上，当我用浏览器访问它时它就可以工作了。

```
App.Store = DS.Store.extend({
        revision:12,
        adapter:DS.RESTAdapter.extend({
                url:"http://galdikas.net/rest_api/book-store-restful-api/api"
        })
}); 
```

甚至不知道要寻找什么。但基本上可以说我点击“管理区域链接”，它将我带到相关区域。但是如果我点击返回“返回存储链接”，所有旧数据都保留在那里，模型再次获取相同的数据，并将其附加到旧数据中。如果没有新数据，我将如何告诉它不获取任何数据。或者如果这不可能，我将如何告诉它简单地覆盖旧数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:26:13.317

不确定，但我会使用 {{#linkTo 'index'}}Back To shop{{/linkTo}} 而不是使用 a 标签。链接到管理会话也是如此。

更新：在“快速讨论”之后，似乎唯一的“错误”是后端发送的错误 json 有效负载。默认情况下，ember-data 期望有一个 'id' 作为主键，以便正确地将记录加载到存储中。

如果后端是不可变的，您可以配置 ember-data 以接受任何键作为主键。在这个例子中：

`DS.RESTADapter.map('App.Book', { primaryKey: 'book_id'})`

# firefox - 带有 Addon Builder Firefox 的 HTML 桌面通知

> ID：15852232
> 
> 赞同：2
> 
> 时间：2013-04-06T14:42:05.150
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我找到了如何使用 Firefox 的插件生成器显示桌面通知。就像下面的代码一样，但是如何显示 HTML 自定义通知，谷歌浏览器扩展可以显示自定义 Html 通知。Firefox 有可能吗，怎么样？

这是一个典型的例子。单击该消息时，会在控制台中记录一个字符串。

```
var notifications = require("notifications");
notifications.notify({
  title: "Jabberwocky",
  text: "'Twas brillig, and the slithy toves",
  data: "did gyre and gimble in the wabe",
  onClick: function (data) {
    console.log(data);
    // console.log(this.data) would produce the same result.
  }
}); 
```

这会显示一个图标，该图标存储在加载项的数据目录中。（有关更多信息，请参阅 self 模块文档。）

```
var notifications = require("notifications");
var self = require("self");
var myIconURL = self.data.url("myIcon.png");
notifications.notify({
  text: "I have an icon!",
  iconURL: myIconURL
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T00:58:05.623

看起来您已经找到了当前文档：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/notifications.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/modules/sdk/notifications.html)

如上所述，（抱歉）插件 SDK 不支持通知中的 HTML 内容。

# ajax - 用于后期编辑屏幕的 Ajax 加载表单元素

> ID：15852237
> 
> 赞同：1
> 
> 时间：2013-04-06T14:42:40.477
> 
> 标签：ajax, wordpress

我想通过 AJAX 为自定义帖子类型的编辑屏幕加载一些表单元素。

实现这一点的最佳实践是什么？

我应该使用这个算法吗？

> 将动作挂钩`admin_menu`到
> 
> > 检测来自 AJAX 客户端的请求（通过`x-requested-with`），
> > 
> > 清理缓冲区（通过`ob_clean`），
> > 
> > 输出请求的元素，然后退出。
> 
> `wp-admin/post-new.php`来自 AJAX 客户端的请求

# http - 如何构造复杂的谷歌网页搜索查询？

> ID：15852238
> 
> 赞同：10
> 
> 时间：2013-04-06T14:42:41.780
> 
> 标签：http, search-engine, google-search

使用[Google](http://www.google.com)搜索引擎在 Web 上进行搜索是 Internet 用户的*事实*标准。Google 提供了一个*基本*或[*高级表单*](http://www.google.com/advanced_search)来为它的搜索引擎准备一个查询字符串。假设对不使用 Web 表单感兴趣，可以简单地使用根据搜索条件构造的查询字符串对特定 URL 执行 HTTP get 请求。

例如，我可以通过在以下位置执行 HTTP 请求来搜索带有单词“ *hello ”的结果：*

```
http://www.google.com/search?q=hello 
```

我可以添加另一个词，例如“*世界*”，如下所示：

```
http://www.google.com/search?q=hello+world 
```

你知道，通过指定好的参数，搜索可以更加“复杂”：

*   或条件
*   确切的短语
*   搜索特定域
*   避免使用特定的单词
*   使用特定语言搜索
*   按地理区域限制搜索
*   搜索文档类型
*   等等

如何修改查询字符串以考虑上述搜索参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T12:23:40.627

我仔细检查了[Pratik Chowdhury](https://stackoverflow.com/users/1691072/pratik-chowdhury)和[Robbie Vercammen](https://stackoverflow.com/users/1536027/robbie-vercammen)的答案。它们提供了指向 Web 文档的链接，这些文档报告了在 Google 搜索表单中可能使用的文本过滤列表。尽管这很有趣，但他们没有提供问题的答案。因此，我研究了很多问题，并找到了以下解决方案。

假设您需要对 Google 搜索进行一次*不可靠*的HTTP 调用（例如，通过 CRON 运行的 PHP 类每月一次）以检索特定字符串查询的搜索结果，例如所有带有某些单词的页面（即“ hello" 和 "world") 在您的网站（即*mywebsite.com*）中，然后您可以对以下地址进行 HTTP get 调用：

```
http://www.google.com/search?q=hello+world+site:mywebsite.com 
```

该`q`参数可以包含整个搜索查询，但是 Google 定义了一个参数的*虚拟证明*列表。

请注意，`AND`运算符可以由`as_q`参数表示。

要获得介于“hello”和“world”（即 OR）之间的页面结果，必须将查询“q”参数更改为：

```
q=hello+OR+world 
```

而更紧凑的表示使用`as_oq`参数：

```
as_oq=hello+world 
```

如果要查找确切的短语“hello world”，则`q`参数为：

```
q="hello+world" 
```

同时，另一个紧凑的表示使用`as_epq`参数：

```
as_epq=hello+world 
```

如果查找所有不包含“hello”和“world”的结果，`q`参数为：

```
q=-hello+-world 
```

同时，另一个紧凑的表示使用`as_eq`参数：

```
as_eq=hello+world 
```

当然，`as_q`, `as_oq`, `as_epq`,`as_eq`等可以像往常一样组合在一个唯一的搜索查询中（即通过使用`&`字符）。因此，例如，我可以搜索“hello”和“word”这两个词加上“programming”和“code”之间的一个，如下所示：

```
q=hello+world&as_oq=programming+code 
```

可以按如下方式搜索特定域（同样是*mydomain.com*）：

```
as_sitesearch=mydomain.com 
```

但是，如果您想排除特定域（例如，因为它是垃圾邮件源），您必须重新使用标准符号。例如：

```
q=hello+-site:mydomain.com 
```

返回所有不在站点*mydomain.com*中的带有单词“hello”的页面。

要获取特定文件类型，例如 pdf，您可以使用`as_filetype`：

```
as_filetype=pdf 
```

可以使用更复杂的搜索参数，如[Google 支持文档](http://support.google.com/websearch/answer/136861?hl=en)中提供的那样。例如，要获得同义词的结果，只需`~`在单词前面使用运算符，例如

```
q=~hello 
```

此外，如果您想使用通配符，例如要获取所有以“hello”开头并以“world”结尾的确切短语，则应使用`*`运算符：

```
q="hello+*+world" 
```

这可能会返回类似：“hello to the world”和“hello sweet world”。

还可以使用以下关键字在页面标题或页面 url 中搜索特定单词（阅读[此处](https://sites.google.com/site/resourcesandsearchstrategies/google/advanced-searching-in-google)了解更多详细信息）：

*   权利
*   allintitle
*   inurl
*   蒜茸

例如，以下返回所有页面 sa 两个单词“hello”和“world”都在 url 中：

```
q=allinurl:hello+world 
```

对于 Google GUI 页面的语言（不是结果之一），必须将语言字符串（例如`en`英语、`fr`法语、`it`意大利语等）插入到`hl`参数的查询字符串中。也就是说，如果用英文版的谷歌搜索，查询字符串变成如下：

```
http://www.google.com/search?hl=en&q=hello+world+site:mywebsite.com 
```

要选择特定语言，例如意大利语，请使用`lr`查询参数：

```
lr=lang_it 
```

`cr`也可以使用该参数选择在特定地理区域发布的页面。例如，要查找在意大利发布的所有页面：

```
cr=countryIT 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-23T07:57:19.070

要创建复杂的`and`/`or`查询，您可以使用`()`和`OR`。

例如，如果我们要搜索

```
("tschakk buff" AND "boom bang") OR ("zata tong" AND "zong klirr") 
```

查询将如下所示：

```
https://www.google.com/search?q=("tschakk%20buff"%20"boom%20bang")%20OR%20("zata%20tong"%20"zong%20klirr") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T20:53:33.683

[Advangle](http://advangle.com)是一项不错的免费服务，您可以在其中直观地构建网络搜索查询并获得查询字符串（或 Google 和 Bing 的 URL）作为结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T15:26:12.383

虽然这本书的标题看起来很危险，但无论如何，如果你不滥用它，它会回答你所有的问题。

这本书的名字是一些 hackin9 杂志的 Michał Piotrowski 所著的“Dangerous Google – Searching for Secrets”。

祝你好运

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-06T15:39:22.590

如果您在使用之前尝试通过手动输入 url 来组装自己的 url，那么这个网站应该会很有帮助：[http ://www.googleguide.com/advanced_operators.html](http://www.googleguide.com/advanced_operators.html)

# java - 将数字的格式更改为以货币格式可读？

> ID：15852241
> 
> 赞同：0
> 
> 时间：2013-04-06T14:42:55.480
> 
> 标签：java, android

在我的应用程序中，我希望能够：

让这个数字**300000**看起来像这**300,000 美元**？我不希望它一定是“**美元**”，

我也希望能够选择**自己的**货币。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:07:58.390

只需在整数后面加上“USD”或其他任何内容。像

```
int cash = 100;
    String currency="USD";
    String my_cash=String.valueOf(cash)+currency; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:27:31.497

要执行您所描述的操作，请尝试从作为数字的字符串末尾每 3 个数字（字符）计数，然后添加一个`','`. 然后，在最后，添加“USD”（空格使它看起来更好）。

示例代码：

```
int toFormat = 1563992;
String output = "" + toFormat;
int counter = 0;
for (int index = output.length() - 1; index > 0; index--){
    counter++;
    if (counter % 3 == 0){
        counter = 0;
        output = output.subString(0,index) + "," + output.subString(index);
    }
}

output += " USD"; // or whatever you want
System.out.println(output); 
```

输出：`1,563,992 USD`

# jquery - ajax 回调、http 状态码和验证

> ID：15852244
> 
> 赞同：0
> 
> 时间：2013-04-06T14:43:15.483
> 
> 标签：jquery, ajax, json, oop, http-status-codes

我一直在研究一个用于返回 json 字符串的服务器端 ajax 类。例如，每当在服务器上执行 ajax 请求时，此类都可以返回 json 数据。现在，我想知道什么时候根据服务器的响应返回 http 状态代码是合适的。

因此，例如，假设用户正在提交注册表，并且请求是通过 ajax 发出的。如果服务器检测到格式错误或语法错误（IE 错误的电子邮件或名称或验证失败），在这种情况下允许服务器在标头内设置 http 状态代码错误（400）作为使用响应的一部分是否合适ajax 对象？

为了更进一步，我们可以使用 jquery .ajax error 来处理错误消息。

根据我的开发经验，我经常注意到验证错误或其他错误（如冲突）从服务器返回为 200，并且通常在 jquery.ajax 的成功函数中确定错误。这对我来说似乎不是很好的 http 做法？你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:58:11.323

您可以设置响应代码。例如在 php -

```
<?php
http_response_code(404);
?> 
```

# javascript - 将 json 绑定到 DOM

> ID：15852246
> 
> 赞同：1
> 
> 时间：2013-04-06T14:43:31.553
> 
> 标签：javascript, jquery, json, ruby-on-rails-3, best-in-place

我正在寻找一个库，它为我提供了一种将 json 绑定到由 rails 视图模板呈现的现有 dom 元素的轻量级方法。

我需要这样做的原因是我的应用程序允许就地编辑（使用 best_in_place），并且由于这些编辑，我页面上的其他数据需要更新并实时显示给用户。在编辑成功回调中，我正在对我的 API 进行 ajax 调用，以获取一个包含我想要显示的重新计算值的 json 对象。只需将该结果绑定到现有的 DOM 元素。

我知道我们会知道像 angular.js 和 knockout.js 这样的库，虽然我没有排除它们，但我希望找到一个更轻的选项。也许是一个 jquery 插件。

我确实找到了[jquery-load-json](https://code.google.com/p/jquery-load-json/)，但这并不是我想要的。它想基于模板为我呈现 HTML。我只需要将 json 动态绑定到现有的 Dom 元素。

我欢迎任何想法，并对实现这一目标的其他方式持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:25:42.930

您可以使用[D3.js](http://d3js.org/)

D3.js 是一个基于数据操作文档的 JavaScript 库。D3 帮助您使用 HTML、SVG 和 CSS 将数据变为现实。D3 对 Web 标准的重视为您提供了现代浏览器的全部功能，而无需将自己束缚于专有框架，结合了强大的可视化组件和数据驱动的 DOM 操作方法。

[在http://jsfiddle.net/jmeza/G52cC](http://jsfiddle.net/jmeza/G52cC)查看示例

Html 代码和脚本 d3.sj

```
<script type="text/javascript" src="http://mbostock.github.com/d3/d3.min.js"></script>
<div id="container">
    <table class="letters">
        <tr>
            <td>a</td>
        </tr>
        <tr>
            <td>b</td>
        </tr>
        <tr>
            <td>c</td>
        </tr>
        <tr>
            <td>d</td>
        </tr>
    </table>
</div> 
```

Javascript代码

```
// create some people
var people = [{
    upper: 'A'
}, {
    upper: 'B'
}, {
    upper: 'C'
}, {
    upper: 'D'
}];

var table = d3.select('table.letters');
var rows = table.selectAll('tr').data(people);

console.log('rows', rows); 
```

如果您查看 chrome 控制台可以看到 json 数据属性绑定到 DOM 元素：

![在此处输入图像描述](https://i.stack.imgur.com/Ax1nU.png)

# scala - 类型边界意外改变了 Scala 隐式参数解析的优先级

> ID：15852251
> 
> 赞同：4
> 
> 时间：2013-04-06T14:44:33.387
> 
> 标签：scala, implicit

下面的 Scala 示例显示了一种情况，其中所需的隐式参数（类型`TC[C]`）可以由范围内的隐式方法`a`和`b`. 但是在运行时，不会产生歧义，并且会打印“B”。

```
object Example extends App{
  trait A
  trait B extends A
  class C extends B

  class TC[X](val label: String)

  implicit def a[T <: A]: TC[T] = new TC[T]("A")
  implicit def b[T <: B]: TC[T] = new TC[T]("B")

  println(implicitly[TC[C]].label)
} 
```

`a`请注意，隐式方法和唯一不同`b`的是类型边界，它们都可以匹配`TC[C]`。如果`b`删除该方法，则`a`改为隐式解析。

虽然我发现这种行为在实践中很方便，但我想了解它是指定的语言功能，还是只是实现的怪癖。

`b`是否存在编译器优先考虑的语言规则或原则`a`，而不是将它们视为等效且因此模棱两可的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:00:22.627

有一条关于此优先级的规则，即两场比赛中最具体的一场将获得更高的优先级。来自[Scala Reference](http://www.scala-lang.org/docu/files/ScalaReference.pdf)，在 6.26.3 'Overloading Resolution' 下：

> 备选方案 A 相对于备选方案 B 的相对权重是一个从 0 到 2 的数字，定义为
> 
> *   如果 A 与 B 一样具体，则为 1，否则为 0，并且
> *   如果 A 在派生自定义 B 的类或对象的类或对象中定义，则为 1，否则为 0。
> 
> 如果满足以下条件之一，则类或对象 C 派生自类或对象 D：
> 
> *   C 是 D 的子类，或
> *   C 是从 D 派生的类的伴随对象，或
> *   D 是派生 C 的类的伴生对象。

# paypal - 通过贝宝按钮传递会话变量

> ID：15852253
> 
> 赞同：0
> 
> 时间：2013-04-06T14:45:02.037
> 
> 标签：paypal, session-variables

我设置了一个简单的 PayPal BuyNow 按钮。

1.  用户点击按钮
2.  用户去paypal购买
3.  用户被重定向到安全下载页面

我遇到的问题是访问下载页面。它应该通过传递给它的会话变量来访问。

如何通过 PayPal BuyNow 按钮传递会话变量？

它应该从按钮代码中传递吗？如果有怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:04:23.410

会话变量不会像表单变量那样被传递。因此，除非您获取他们的响应信息来创建会话变量，否则 Paypal 不会与此有任何关系。

会话变量在浏览会话期间（直到用户关闭浏览器）或您在代码中指定的时间长度（1 天、10 天、30 天等）创建并存储在 Web 服务器上。 .)。它们不依赖于正在查看的页面。如果您在提交 paypal 按钮之前创建此变量，则当用户访问下载页面时，您的代码应读取该变量并允许用户执行您为他们编写的任何操作。

但是，需要注意的是，用户必须启用 cookie 才能使会话变量起作用。

希望这可以帮助。

# java - javax.sound.sampled.LineUnavailableException ：为什么我会收到此异常？

> ID：15852254
> 
> 赞同：6
> 
> 时间：2013-04-06T14:45:11.117
> 
> 标签：java, javasound

当执行以下方法时：

```
private void beep_player_1() {
    try {
        //clip_Player_2.close();
        clip_Player_1 = AudioSystem.getClip();
        ais = AudioSystem.getAudioInputStream(new File(Constants.Player1_Default_Tone)); // PATH FOR THE .WAV FILE
        clip_Player_1.open(ais);
        clip_Player_1.loop(0); // PLAY ONCE
    }catch(Exception exc) {
        System.out.println(exc);
     }
} 
```

`LineUnavailableException`被抛出。这可能是什么原因？

```
javax.sound.sampled.LineUnavailableException: line with format PCM_SIGNED 44100.0 Hz, 24 bit, stereo, 6 bytes/frame, little-endian not supported. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T23:31:36.490

> 这可能是什么原因？

```
javax.sound.sampled.LineUnavailableException: line with format 
  PCM_SIGNED 44100.0 Hz, 
  24 bit, 
  stereo, 
  6 bytes/frame, 
  little-endian not supported. 
```

我不知道其余的，但我遇到的大多数 PC 使用 8 或 16 位“位深度”，而使用 24 位。它表示非常精细的录音质量。如果 8 位是“手机质量”而 16 位是“CD 质量”，那么 24 位就是“主录音质量”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-20T01:16:30.223

这是一个已知问题，但仅适用于 Windows。Java 无法识别 Windows 上的声音设备播放 24 位数据（或录制 24 位数据）的能力。Java 可以很好地在 Linux 和 Mac 上处理 24 位。我在这里和其他地方看到了其他线程，其中一些始于 2012 年。

没有多少人指出这个问题。我在这里只看到了几个线程，在 Oracle 上只看到了一个。我没有看到解决方法（除了将声音数据转换为 16 位），也没有看到任何修复它的努力。

# css - CSS 中的旋转加载器

> ID：15852257
> 
> 赞同：1
> 
> 时间：2013-04-06T14:45:27.497
> 
> 标签：css, css-animations, keyframe

首先，对不起，如果标题是错误的，因为我不知道这些是否真的被称为旋转装载机。这就是我所说的：[JSFiddle](http://jsfiddle.net/pKmYx/)

这些装载机有两个问题，

*   在 .chrome-loader 中，如果我设置`height: 50px; width: 50px;`了 ，并且在`.ring-maker`set`top: 2.5px; left: 2.5px`中它不能很好地工作。px 单位是否支持最多 2 位小数的值？我猜他们没有。那么我能做些什么来修复它呢？我基本上想让它和上面的大小一样。也许，其他一些单位？

*   因为`.win8-loader`我为第一个点设置了这个 CSS 动画。

    ```
    @-webkit-keyframe win8dot1 {
        0% {left: -10px;}
        33% {left: 500px;}
        66% {left: 780px;}
        100% {left: 1280px;}
    } 
    ```

    但它不起作用。第一个点甚至不动。

PS：`abc1-de2`关键帧允许使用名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T15:16:48.357

你必须纠正2个问题

你的 CSS

```
.win8-loader .dot1 { -webkit-animation: win8-dot1 2.5s infinite linear; }

@-webkit-keyframe win8dot1 { 
```

更正：

```
.win8-loader .dot1 { -webkit-animation: win8dot1 2.5s infinite linear; }

@-webkit-keyframes win8dot1 { 
```

# python - ModelForm 中的可选外键

> ID：15852263
> 
> 赞同：0
> 
> 时间：2013-04-06T14:46:11.010
> 
> 标签：python, django, django-forms

我想验证一个包含可选 FK 的表单：

```
class Address(models.Model):
    mandatory_field = models.CharField(max_length=100)
    optional_field = models.CharField(max_length=20, blank=True, null=True)
class Show(models.Model):
    name = models.CharField(max_length=100)
    optional_address = models.ForeignKey(Address, blank=True, null=True)

class AddressForm(forms.ModelForm):
    class Meta:
        model = Address

class ShowForm(forms.ModelForm):
    class Meta:
        model = Show 
```

在视图表单中，我想像这样执行验证：

```
if request.method == 'POST':
    form = ShowForm(request.POST)
    if form.is_valid():
        do anything... 
```

但我不知道如何验证 AddressForm。如果至少填写了地址的一个字段，则应进行此验证。由于 AddressForm 有一个必填字段，因此我无法每次都对其进行验证。

您是否有想法将地址验证包含在显示表单的验证中？

谢谢你，朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:05:58.723

如果我理解正确，如果至少有 1 个地址实例，则需要将“可选地址”字段设为必填

```
class ShowForm(forms.ModelForm):
    class Meta:
        model = Show

    def __init__(self, *args, **kwargs):
        super(ShowForm, self).__init__(*args, **kwargs)
        if Address.objects.exists():
            self.fields['optional_address'].required = True 
```

# c++ - 自动填充以正确 Qt 表中的大小

> ID：15852265
> 
> 赞同：1
> 
> 时间：2013-04-06T14:46:23.120
> 
> 标签：c++, qt

我正在尝试通过做一些项目来学习 Qt，并希望快速了解我的需求的一部分。

我有带有多行段落的数据库，我想使用一些视图在 Qt 中显示。

我另外想要的是用户不必为了阅读而重新调整窗口大小，所以，如果进入大段落，那么大小会缩小，而小段落，字体会增加，从而占用总空间来显示.

请建议：

*   什么逻辑或功能适合缩小和扩大尺寸，或者是否有一个小部件/视图已经这样做（通过修改属性）或关于如何实现它的建议。
*   同样的问题，显示缩小/扩展的东西，但只使用树视图。那么我可以在树视图中执行此操作吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:34:23.773

这是一种您可以使用自定义`QItemDelegate`. 请注意，此解决方案并不完整，您仍然需要在这里做一些工作。

首先，一些代码来设置 a`QStandardItemModel`和`QTreeView`. 视图使用自定义委托，如下所述。

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QStandardItemModel model(4, 4);
    for (int row = 0; row < 4; ++row) {
        for (int column = 0; column < 4; ++column) {
            QStandardItem *item = new QStandardItem(QString("row %0, column %1").arg(row).arg(column));
            model.setItem(row, column, item);
        }
    }

    Delegate delegate;

    QTreeView view;
    view.setItemDelegate(&delegate);
    view.setModel(&model);
    view.setWindowTitle("QTreeView with custom delegate");
    view.show();

    return a.exec();
} 
```

这里是`Delegate`. 它查看有多少空间可用于文本，然后尝试找到适合的字体大小。我目前只检查宽度并忽略高度。

```
class Delegate : public QItemDelegate
{
    void paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const;
};

void Delegate::paint(QPainter *painter, const QStyleOptionViewItem &option, const QModelIndex &index) const
{
    QRect availableSpace = option.rect;
    // padding taking place, don't know how to find out how many pixels are padded. 
    // for me, subtracting 6 looked ok, but that's not a good solution
    availableSpace.setWidth(availableSpace.width() - 6);
    QString text = index.data().toString();
    QStyleOptionViewItem newOption(option);

    // initial font size guess
    float size = 20;
    int width;
    // try to make font smaller until the text fits
    do
    {
        newOption.font.setPointSizeF(size);
        size -= .1;
        width = QFontMetrics(newOption.font).width(text);
    }
    while (width > availableSpace.width());

    newOption.textElideMode = Qt::ElideNone;

    // call the parent paint method with the new font size
    QItemDelegate::paint(painter, newOption, index);
} 
```

**结果如下所示：**

![带有自定义委托的 QTreeView](https://i.stack.imgur.com/OR7AS.png)

# security - 自定义用户提供程序的 Symfony2 问题

> ID：15852266
> 
> 赞同：0
> 
> 时间：2013-04-06T14:46:27.737
> 
> 标签：security, symfony

我在 Symfony2 中的自定义用户实体提供程序中遇到了一些问题。

我有这个错误：

```
FatalErrorException: Error: Class Cms\ControlPanel\UserBundle\Entity\User contains 1 abstract method and must therefore be declared abstract or implement the remaining methods (Symfony\Component\Security\Core\User\UserInterface::getUsername) in /Users/mathijs/workspaces/cms/src/Cms/ControlPanel/UserBundle/Entity/User.php line 144 
```

用户.php：144：

```
public function equals(UserInterface $user)
{
    return $user->getEmail() == $this->getEmail();
} 
```

它说了一些关于 getUsername 的内容，但在我的文件中仍然存在：getEmail。

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:53:25.400

错误意味着该类`User`缺少该方法`getUsername`。`getUsername`在类中实现方法`User`。

```
public function getUsername()
{
    return $this->email;
} 
```

# ruby-on-rails - 内存中关联引用损坏：保存前引用父对象返回 nil

> ID：15852269
> 
> 赞同：3
> 
> 时间：2013-04-06T14:46:34.637
> 
> 标签：ruby-on-rails, associations

我有以下两个模型：

```
class Seller < ActiveRecord::Base
  has_many :cars, :dependent => :destroy
end

class Car < ActiveRecord::Base
  belongs_to :seller
end 
```

现在我需要能够在将对象保存到数据库之前从汽车中引用卖方，这目前不起作用：

```
seller = Seller.new
=> #<Seller id: nil, name: nil, created_at: nil, updated_at: nil>
seller.cars.build(:brand => 'Audi', :model_name => 'A4')
=> #<Car id: nil, brand: 'Audi', model_name: 'A4', created_at: nil, updated_at: nil> 
```

现在该协会从卖方工作，但不是从汽车方面：

```
car = seller.cars.first
=> #<Car id: nil, brand: 'Audi', model_name: 'A4', created_at: nil, updated_at: nil>
car.seller
=> nil 
```

如何让协会正常运作？

PS。如前所述，如果我将对象保存到数据库，那么引用将按应有的方式工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T14:57:25.457

好吧，我似乎自己找到了答案：

我必须`:inverse_of`在卖家上指定然后它才能工作：

```
class Seller < ActiveRecord::Base
  has_many :cars, :inverse_of => :seller, :dependent => :destroy
end 
```

# ajaxcontroltoolkit - AjaxControlToolkit 7.0123 中断 UpdatePanel 异步回发

> ID：15852271
> 
> 赞同：1
> 
> 时间：2013-04-06T14:46:53.363
> 
> 标签：ajaxcontroltoolkit, webforms, asp.net-4.5

我在 VS2012 中有一个针对 ASP.NET 4.5 构建的 ASP.NET Web 应用程序。在应用程序中有许多包含 ListView 控件的表单，这些控件又包含 UpdatePanel 控件，因此发生的任何编辑或添加的新数据都是异步执行的，并且在用户刷新页面时不会重复。

直到今天，这一切都很好。今天，我使用 NuGet 将最新版本的 AjaxControlToolkit (7.0123) 添加到项目中，并对脚本等进行了修改，[如 Stephen Walther 在此处指定的](http://stephenwalther.com/archive/2012/09/20/september-2012-release-of-the-ajax-control-toolkit.aspx)。

自从将 AjaxControlToolkit 引入项目以来，异步回发似乎已经变得同步。例如，如果我在 ListView 中编辑一个项目，当我按下 F5（在 IE 或 Firefox 中）时，系统会提示我将重新发送数据。

标记很简单...

```
<asp:ListView ID="LocationList" runat="server" ItemType="Model.Location" DataKeyNames="ID" InsertItemPosition="LastItem" DeleteMethod="LocationList_DeleteMethod" InsertMethod="LocationList_InsertMethod" SelectMethod="LocationList_SelectMethod" UpdateMethod="LocationList_UpdateMethod">
  <LayoutTemplate>
    <asp:UpdatePanel ID="ListViewUpdatePanel" runat="server">
      <ContentTemplate>
        <table class="table table-condensed table-striped">
          <thead>
            <tr>
              <th runat="server">
                <asp:LinkButton ID="SortByDescription" runat="server" CommandName="Sort" CommandArgument="Name" Text="Description" />
              </th>
              <th></th>
            </tr>
          </thead>
          <asp:PlaceHolder ID="itemPlaceholder" runat="server" />
        </table>
      </ContentTemplate>
    </asp:UpdatePanel>
    <div class="pagination align-center">
      <asp:DataPager runat="server" />
    </div>
  </LayoutTemplate>
  <ItemTemplate>
    <tr>
      <td>
        <%#: Item.Name %>
      </td>
      <td>
        <asp:LinkButton ID="Edit" runat="server" CommandName="<%#: Global.CommandNames.Edit %>" CommandArgument="<%#: Item.ID %>" Text="Edit" />
      </td>
    </tr>
  </ItemTemplate>
  <EditItemTemplate>
    <tr>
      <td>
        <asp:TextBox ID="Description" runat="server" Text="<%#: BindItem.Name %>" />
      </td>
      <td>
        <asp:LinkButton ID="Update" runat="server" CommandName="<%#: Global.CommandNames.Update %>" Text="Update" />
        <asp:LinkButton ID="Cancel" runat="server" CommandName="<%#: Global.CommandNames.Cancel %>" Text="Cancel" />
      </td>
    </tr>
  </EditItemTemplate>
  <InsertItemTemplate>
    <tr>
      <td>
        <asp:TextBox ID="Description" runat="server" Text="<%#: BindItem.Name %>" />
      </td>
      <td>
        <asp:LinkButton ID="Insert" runat="server" CommandName="<%#: Global.CommandNames.Insert %>" Text="Add" />
      </td>
    </tr>
  </InsertItemTemplate>
</asp:ListView> 
```

提供的标记位于 ContentPanel 中，页面使用 MasterPage。MasterPage 具有上面概述的 ToolkitScriptManager 控件。

正如我已经说过的，这在安装 AjaxControlToolkit 之前运行良好。

我还尝试更改页面布局，就像将 UpdatePanel 移到整个 ListView 之外（然后将寻呼机放在 UpdatePanel 下）；这没什么区别。

除了涉及 AjaxControlToolkit 的一些兼容性和/或配置问题之外，我完全不知道是什么原因造成的。我找到了对类似问题的其他参考，但我还没有找到任何有效的解决方案（例如，有文章指出使用静态客户端 ID 时出现问题，但正如您从标记中看到的那样，我已经尝试删除这些并且没有区别）。

# android - android如何定位元素以支持所有设备

> ID：15852272
> 
> 赞同：2
> 
> 时间：2013-04-06T14:47:02.953
> 
> 标签：android, android-layout, multiscreen

我有定位元素的问题。

无论屏幕大小如何，我想要的是所有设备中的这个图像。

![在此处输入图像描述](https://i.stack.imgur.com/5GXmU.png)

我所拥有的是两种不同尺寸的

![在此处输入图像描述](https://i.stack.imgur.com/tfl84.png)![在此处输入图像描述](https://i.stack.imgur.com/i5hkH.png)

我希望我的 textViews 和 editTexts 保持它们在活动视图中的位置。（imageView中的图像“包含图像的绿色-蓝色-红色-黄色正方形”）

这是我的 layout.xml

```
 <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical">
                <TextView
                        android:layout_height="30dp"
                        android:layout_width="150dp"
                        android:layout_marginTop="60dp"
                        android:layout_marginLeft="100dp"
                        android:textSize="19dp"
                        android:textStyle="bold"
                        android:gravity="center"
                        android:text="@string/login_app_name">
                </TextView>
                <RelativeLayout
                        android:layout_width="fill_parent"
                        android:layout_height="20dp"
                        android:layout_marginTop="128dp"
                        android:gravity="center_vertical">
                            <TextView
                                    android:layout_height="20dp"
                                    android:layout_width="100dp"
                                    android:layout_marginLeft="35dp"
                                    android:textStyle="bold"
                                    android:gravity="right|center_vertical"
                                    android:text="@string/login_username">
                            </TextView>
                            <EditText
                                    android:layout_height="20dp"
                                    android:layout_width="140dp"
                                    android:layout_alignParentRight="true"
                                    android:layout_marginRight="10dp"
                                    android:background="@drawable/login_edit_text">
                            </EditText>
                </RelativeLayout>
                <RelativeLayout
                        android:layout_width="fill_parent"
                        android:layout_height="20dp"
                        android:layout_marginTop="2dp">
                            <TextView
                                    android:layout_height="20dp"
                                    android:layout_width="100dp"
                                    android:layout_marginLeft="35dp"
                                    android:textStyle="bold"
                                    android:gravity="right|center_vertical"
                                    android:text="@string/login_password">
                            </TextView>
                            <EditText
                                    android:layout_height="20dp"
                                    android:layout_width="140dp"
                                    android:layout_alignParentRight="true"
                                    android:layout_marginRight="10dp"
                                    android:background="@drawable/login_edit_text">
                            </EditText>
                </RelativeLayout>

        </LinearLayout>
    </RelativeLayout> 
```

我怀疑这个问题与我用来定位元素的填充和边距有关。但我找不到其他方法。

有没有一种方法可以建议我的元素在所有屏幕尺寸中保持它们的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:02:27.840

为不同的设备制作单独的xml文件，并将两个xml的图像分开放置，以适应不同的标准分辨率。为两个 XML 文件链接两个单独的类，现在根据屏幕分辨率调用这两个类中的任何一个。您可以使用以下代码获取屏幕分辨率：

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);

final int height = dm.heightPixels;
final int width = dm.widthPixels; 
```

使用 if-else 条件并选择要意图的类

# objective-c - iPad iOS6 在哪里以编程方式找到 Autolayout 示例项目

> ID：15852277
> 
> 赞同：0
> 
> 时间：2013-04-06T14:47:29.643
> 
> 标签：objective-c, xcode, ios6, autolayout, demo

我正在寻找可以演示如何以编程方式将自动布局应用于 UIViews 的示例 xCode 项目。我看到很多关于如何应用自动布局的问题，但我完全是个新手，需要先玩一些东西才能了解自动布局的工作原理。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:41:23.830

看看这个： [http](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2) ://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2 （带有 IB）和这个： [http://www.techotopia.com/index。 php/Implementing_iOS_6_Auto_Layout_Constraints_in_Code](http://www.techotopia.com/index.php/Implementing_iOS_6_Auto_Layout_Constraints_in_Code)（无 IB）

另外：如果您想以编程方式执行此操作，我更喜欢使用数学而不是复杂的 AutoLayout 语句。如果你想让一个按钮从底部向上放置 20 像素，只需使用类似`[[[[UIScreen mainscreen]bounds]size]height]-20]`我认为这更容易使用的东西。

# jsp - servlet 中的 Ahref

> ID：15852280
> 
> 赞同：0
> 
> 时间：2013-04-06T14:47:47.830
> 
> 标签：jsp, tomcat, session-cookies, jsp-tags

我目前正在使用教程（[http://www.java-programming.info/tutorial/pdf/csajsp2/07-Cookies.pdf](http://www.java-programming.info/tutorial/pdf/csajsp2/07-Cookies.pdf)）来尝试启用cookie创建，我的servlet在下面的代码中，但是我想要添加一个 href 或按钮，以便当用户受到欢迎时，他们可以单击并被带到我的 webContent 文件夹中的 jsp ，我正在使用 jsp 、 eclipse indigo 和 tomcat 6 ，任何提示都会真正帮助添加 href 为如下所示不起作用，顺便说一句，代码中的 w3schools 链接可以忽略

```
package The_Quiz;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

/** Servlet that processes a registration form containing
 *  a user's first name, last name, and email address.
 *  If all the values are present, the servlet displays the
 *  values. If any of the values are missing, the input
 *  form is redisplayed. Either way, the values are put
 *  into cookies so that the input form can use the
 *  previous values.
 *  <p>
 *  From <a href="http://courses.coreservlets.com/Course-Materials/">the
 *  coreservlets.com tutorials on servlets, JSP, Struts, JSF, Ajax, GWT, and Java</a>.
 */

 public class RegistrationServlet extends HttpServlet {
  @Override
  public void doGet(HttpServletRequest request,
                HttpServletResponse response)
  throws ServletException, IOException {
 response.setContentType("text/html");
 boolean isMissingValue = false;
 String firstName = request.getParameter("firstName");
 if (isMissing(firstName)) {
  firstName = "Missing first name";
  isMissingValue = true;
 }
 String lastName = request.getParameter("lastName");
    if (isMissing(lastName)) {
  lastName = "Missing last name";
  isMissingValue = true;
 }
 String emailAddress = request.getParameter("emailAddress");
 if (isMissing(emailAddress)) {
  emailAddress = "Missing email address";
  isMissingValue = true;
 }
 Cookie c1 = new LongLivedCookie("firstName", firstName);
 response.addCookie(c1);
 String formAddress =
  "The_Quiz.RegistrationForm";
       if (isMissingValue) {
  response.sendRedirect(formAddress);
    } else {
  PrintWriter out = response.getWriter();
  String docType =
    "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 " +
    "Transitional//EN\">\n";
  String title = "Thanks for Registering";
  out.println
    (docType +
     "<HTML>\n" +
     "<HEAD><TITLE>" + title + "</TITLE></HEAD>\n" +
     "<BODY BGCOLOR=\"#FDF5E6\">\n" +
     "<CENTER>\n" +
     "<H1 ALIGN>" + title + "</H1>\n" +
     "<UL>\n" +
     "  <LI><B>First Name</B>: " +
            firstName + "\n" +
     "</UL>\n" +
     "<a href="Question_1.jsp">Visit W3Schools</a>" +       
     "</CENTER></BODY></HTML>");
     }
   }

  /** Determines if value is null or empty. */

  private boolean isMissing(String param) {
   return((param == null) ||
       (param.trim().equals("")));
        }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:23:03.993

你添加了一个 cookie，但你得到了一个请求参数。您应该`CookieUtilities`根据书中的示例创建并使用`CookieUtilities.getCookieValue` 如果您想获取参数 - 您需要在您的 URL 中发送请求参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:24:18.977

cookie的创建应该是这样的

```
Cookie c = new Cookie('cookiename','value'); 
```

formAddress 的第二件事，您应该像这样指定 url

```
/RegistrationForm 
```

不要给出包名。

是的，对于锚标签，用单引号指定jsp的url

# php - 将会话变量回显到下一页？

> ID：15852289
> 
> 赞同：0
> 
> 时间：2013-04-06T14:48:47.227
> 
> 标签：php, mysql, session, hyperlink

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:57:28.360

试试这个......为了更容易调试你拥有的整个代码

```
<?php
            $online_set = online_channel();
            while ($online = mysql_fetch_array($online_set)) {
                ?>
                <div class="online_row">
                    <a href="profile.php?id=<?php echo $online['user_id'];?>">
                        <img width=25px height=25px src="data/photos/<?php echo $online['user_id'];?>/_default.jpg/" class="online_image" />
                        <div class="online_text\">
                            <?php echo $online['display_name'];?>
                        </div>
                    </a>
                </div>
                <?php
            }
?> 
```

只需查看我发布的代码以了解回显整个 div 的更好方法

# android - 仅在活动和托管活动中进行选择

> ID：15852290
> 
> 赞同：0
> 
> 时间：2013-04-06T14:48:47.457
> 
> 标签：android

目前，当我单击列表视图的一行时，我希望有一个新屏幕供用户编辑所选行的详细信息。

我意识到我只能使用`Activity`. 但是，在未来，我可能/可能不需要支持 Tablet UI。因此，我想知道，在这种情况下，我是否应该在一个片段中实现我的所有逻辑和 UI，而另一个专用`FragmentActivity`于托管该片段？

我发现有好有坏

## 好的

更容易的代码重用和 UI 重用，以满足不同的布局要求，如新的平板电脑 UI 布局。

## 坏的

需要注意 2 个类 (`FragmentActivity`和`Fragment`)，而`Activity`不仅仅是。

就个人而言，我更倾向于`FragmnetActivity`+`Fragment`设计。但是，我不确定我选择的设计是否有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:52:50.010

你弄错了——如果一切都做对了，你的 FragmentActivity 几乎是一个虚拟主机，它有接口让片段传达他们的需求，所有代码都应该留在片段中。如果您需要建议 - 选择片段 - 它更加灵活且不复杂。

# java - 从java中以空格分隔的行读取条目

> ID：15852294
> 
> 赞同：0
> 
> 时间：2013-04-06T14:49:01.583
> 
> 标签：java, whitespace

我正在尝试读取 java 中以空格分隔的列的条目/行。

例子：

```
Header (without quotes):
"  A B  C   DDD EE         FFFFFFF  GG  " 
```

行（不带引号）：

```
"     9 $   123456     foobar      3.0   foo, bar      "<br>
"     4 %      654       barf      1.0   foobar, foobar" 
```

第 1 行的映射：

```
A: 9
B: $
C: 123456
DDD: foobar
EE: 3.0
FFFFFFF: 
GG: foo, bar 
```

问题是每列的宽度可能不同，并且标题列与带有值的行不在同一水平面上。

已知的事情：

*   列之间正好有一个空格作为分隔符
*   填充字符是/是/许多空格

我试图计算空格，但是当有两个空列时遇到了问题。即使使用模式匹配或正则表达式，我也找不到解决方案。Split(" ") 不起作用，因为可能有很多 epmty 列。

任何提示/帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:52:22.850

您使用什么语言？您可以在 PHP 中使用正则表达式来分割空格：

```
$string = ' A B C DDD EE FFFFFFF  GG ';
$arr = preg_split('/[\s]+/', $string); 
```

我希望这有帮助 ：）

# python - 整数列表到元组列表python

> ID：15852295
> 
> 赞同：6
> 
> 时间：2013-04-06T14:49:08.863
> 
> 标签：python, list

`[1, 109, 2, 109, 2, 130, 2, 131, 2, 132, 3, 28, 3, 127]`我有这个数组，我想把它变成一个元组列表，每个元组有 2 个值。所以这个列表变成`[(1, 109), (2, 109), (2, 130), (2, 131), (2, 132), (3, 28), (3, 127)]`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-06T14:55:21.297

您可以使用[zip](http://docs.python.org/2/library/functions.html#zip)结合[切片](http://techearth.net/python/index.php5?title=Python%3aBasics%3aSlices)来创建一个新的[元组](http://docs.python.org/release/1.5.1p1/tut/tuples.html)[列表](http://docs.python.org/release/1.5.1p1/tut/lists.html)。

```
my_new_list = zip(my_list[0::2], my_list[1::2]) 
```

这将生成一个具有以下输出的新列表

```
[(1, 109), (2, 109), (2, 130), (2, 131), (2, 132), (3, 28), (3, 127)] 
```

这背后的过程非常简单。[我们首先使用slicing](http://techearth.net/python/index.php5?title=Python%3aBasics%3aSlices)将现有列表拆分为两个新列表。

```
print my_list[0::2] # [1, 2, 2, 2, 2, 3, 3]
print my_list[1::2] # [109, 109, 130, 131, 132, 28, 127] 
```

然后使用[zip](http://docs.python.org/2/library/functions.html#zip)将这两个列表组合成一个元组列表。

```
print zip(my_list[0::2], my_list[1::2]) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-06T14:54:11.847

```
>>> it = iter(L)
>>> zip(*[it]*2)
[(1, 109), (2, 109), (2, 130), (2, 131), (2, 132), (3, 28), (3, 127)] 
```

* * *

### 解释

`it = iter(L)`在初始列表上创建迭代器

`[it]*2`两次 crates 由相同迭代器组成的列表。

`*`参数中最先使用的用来解包参数，这样就`zip(*[it]*2)`变成了`zip(it,it)`. 尽管您可以使用`zip(it,it)`,`zip(*[it]*2)`是一种更通用的结构，它可以扩展到结果元组中的任意数量的值。

这种方法的核心是`zip`在每次迭代中尝试从每个参数中获取一个值。但事实证明，所有参数实际上都是同一个迭代器，因此它每次都会产生一个新值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T15:16:11.553

另一种方法：

```
lst = [1, 109, 2, 109, 2, 130, 2, 131, 2, 132, 3, 28, 3, 127]

print [(lst[i], lst[i + 1]) for i in xrange(0, len(lst), 2)]
#[(1, 109), (2, 109), (2, 130), (2, 131), (2, 132), (3, 28), (3, 127)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-09T18:09:48.207

受 ovgolovin 回答的启发：

```
>>> it=iter(L)
>>> [(el, next(it)) for el in it]
[(1, 109), (2, 109), (2, 130), (2, 131), (2, 132), (3, 28), (3, 127)] 
```

可能更容易看到它是如何工作的。还可以反转元组顺序：

```
>>> it=iter(L)
>>> [(next(it), el) for el in it]
[(109, 1), (109, 2), (130, 2), (131, 2), (132, 2), (28, 3), (127, 3)] 
```

# html - 什么是 DOM 生成的代码？

> ID：15852298
> 
> 赞同：0
> 
> 时间：2013-04-06T14:49:27.197
> 
> 标签：html, firefox, dom, browser

我显然对 HTML 和 Web 浏览器以及 python 也很陌生。我在 Firefox 中安装了 Web Developer 扩展，并注意到除了“查看源代码”选项之外，还有两个附加的“查看生成的源代码”和“查看框架源代码”选项。这些是什么？为什么它们应该不同？

1.  我不知道生成的源是什么。
2.  框架不是页面的一部分吗？如果是这样，为什么我需要一个单独的“查看帧源”选项？这是否意味着常规的“查看页面源代码”不会显示页面中所有元素的源代码？
3.  如果我想查看执行/用于向我显示页面的代码，我应该查看哪个选项，为什么？
4.  如果我想使用 requests 模块在 python 中获取此代码，我该如何获取这些不同的来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T14:52:07.303

HTML代码可以动态修改为javascript。“查看生成的源代码”将向您显示 HTML，因为它可能已被 javascript 修改，并且与服务器提供的 html 不同。所以这对于调试 javascript 应用程序很有趣。

“查看框架源代码”适用于使用 HTML 框架集的网站。此类站点是多个单个 html 站点的组合，这些站点一起显示在一个页面上。是一种较旧的网页设计尝试，但仍被广泛部署。所以这样的网站可以看起来像一个简单的页面，左侧是菜单，旁边是内容。使用框架集会有一个 menu.html 和一个 content.html。两个 html 站点可以分别显示在“Web 开发人员工具栏”中，同时在其上单击鼠标右键并选择“显示框架源”

应该回答问题 1 和 2。问题 3。

> 如果我想查看执行/用于向我显示页面的代码，我应该查看哪个选项，为什么？

回答使用“查看生成的源...”，因为这将为您提供您在浏览器中实际看到的 html，无论它是否由 javascript 生成。

* * *

不幸的是，我不是 python 专家，所以问题 4 保持开放

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:56:18.547

生成的源是浏览器获取帧源然后在浏览器上执行javascript以修改此页面的结果。

要了解与程序相比浏览器如何获取 html 页面的更多信息，请在此处查看我的答案： [https ://stackoverflow.com/a/15775702/707949](https://stackoverflow.com/a/15775702/707949)

然后获取 sourge html 页面检查这个答案： [https ://stackoverflow.com/a/15799102/707949](https://stackoverflow.com/a/15799102/707949)

并获取生成的 html 源代码，检查第一个答案的结尾

# android - 如何在布局中播放按钮的声音？

> ID：15852299
> 
> 赞同：0
> 
> 时间：2013-04-06T14:49:29.607
> 
> 标签：android, media-player

我有一个布局，其中显示了多个按钮。onclick 按钮分别播放一个声音。我的代码就像但它不起作用：-

```
@Override
public void onClick(View view) {
    resetPlayer();
    int index = 0;
    if (view.equals(objbutton1))
        index = R.raw.sound1;

    while (true) {
        this.objplayer = MediaPlayer.create(this, index);
        this.objplayer.setLooping(false);
        this.objplayer.start();
        this.objplayer
                .setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
                    @Override
                    public void onCompletion(MediaPlayer mp) {
                        MainActivity.this.objplayer.release();
                        MainActivity.this.objplayer = null;

                    }
                }
                );
        if(view.equals(objbutton2))
        {
            index=R.raw.sound2;
            continue;

        }
        if(view.equals(objbutton3))
        {
            index=R.raw.sound3;
            continue;

        }
        if(view.equals(objbutton4))
        {
            index=R.raw.sound4;
            continue;

        }
        if(view.equals(objbutton5))
        {
            index=R.raw.sound5;
            continue;

        }
        break;
    }

}

private void resetPlayer() {
    if (this.objplayer != null) {
        if (this.objplayer.isPlaying())
            this.objplayer.stop();
        this.objplayer.release();
        this.objplayer = null;
    } 
```

应用程序仅播放一种声音，单击其他按钮时不会更改声音

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:12:26.727

用这个

```
 MediaPlayer mp = MediaPlayer.create(getApplicationContext(), index);
                    mp.start(); 
```

像...

```
 private MediaPlayer mp; // declare it in public area.

    public void onClick(View view) {
    int index = 0;
    if (view.equals(objbutton1)){
        index = R.raw.sound1;
            if(mp !=null && mp.isPlaying()) mp.stop();
        mp = MediaPlayer.create(getApplicationContext(), index);
            mp.start();
        }
        if(view.equals(objbutton2))
        {
            index=R.raw.sound2;
            if(mp !=null && mp.isPlaying()) mp.stop();
        mp = MediaPlayer.create(getApplicationContext(), index);
            mp.start();
        }
        if(view.equals(objbutton3))
        {
            index=R.raw.sound3;
          if(mp !=null && mp.isPlaying()) mp.stop();
          mp = MediaPlayer.create(getApplicationContext(), index);
         mp.start();
        }
        if(view.equals(objbutton4))
        {
            index=R.raw.sound4;
          if(mp !=null && mp.isPlaying()) mp.stop();
          mp = MediaPlayer.create(getApplicationContext(), index);
         mp.start();
        }
        if(view.equals(objbutton5))
        {
            index=R.raw.sound5
          if(mp !=null && mp.isPlaying()) mp.stop();
         mp = MediaPlayer.create(getApplicationContext(), index);
         mp.start();
        }
} 
```

并`onDestroy()`把这个`mp.release();`

# java - 字符串的排列

> ID：15852300
> 
> 赞同：0
> 
> 时间：2013-04-06T14:49:33.853
> 
> 标签：java

我正在尝试编写一个简单的方法来打印所有字符串排列。关于给定字符串的排列有很多主题，但这不是我所寻求的。我想从 1 个字母的字符串开始，然后到 10 个字母的字符串。

最后我发现对十六进制代码执行此操作相当容易：

```
int counter = 0;
while (true) {      
    String a = Integer.toString(counter, 16); //fails on 26
    System.out.println(a);
    counter++;
} 
```

但是，如果我将基数 16 更改为 26，则不会发生任何事情（打印所有 0）。如果它真的有效，我会感到惊讶:)，因为我没有检查文档中允许的基数。我仍然想保持相同的方法，只是将我的字符串视为基数为 26 的大数。

如何将数字转换为基数 26 字符串？

# node.js - 客户端连接到 Node js TCP 服务器后立即断开连接

> ID：15852310
> 
> 赞同：2
> 
> 时间：2013-04-06T14:50:57.473
> 
> 标签：node.js, sockets, tcp, websocket

这是我第一次使用 node js。我试图让客户端连接到服务器并保持连接而不关闭。

这一切都托管在虚拟机中托管的 ubuntu 服务器版本中。

我已经使用 netstat -ant 检查了服务器实际上正在监听端口 5000

我的浏览器也可以使用 Websockets。

我得到以下错误输出

```
Echo server dot come
192.168.1.107
node.js:134
        throw e; // process.nextTick error, or 'error' event on first tick
        ^
Error: EPIPE, Broken pipe
    at Socket._writeImpl (net.js:159:14)
    at Socket._writeOut (net.js:450:25)
    at Socket.write (net.js:377:17)
    at Socket.ondata (stream.js:36:26)
    at Socket.emit (events.js:81:20)
    at Socket._onReadable (net.js:678:14)
    at IOWatcher.onReadable [as callback] (net.js:177:10) 
```

如果我在连接事件处理程序上调用服务器上的 socket.end()，我会得到一个断开连接的客户端。我的问题是如何使用此代码建立稳定的连接，我必须更改什么或者我在这里做错了什么？把我的头发拉出来-提前谢谢！

代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Test RS Server (built over nodejs)</title>
<link rel="stylesheet" href="style.css"></link> 
<script src="jquery.min.js" ></script>
<script src="client.js" ></script>
</head>
<body>
<label>Message</label>
<input type="text" id="message_box"></input>
<input type="button" id="submit_btn" value="Send"></input>
<div style="clear:both;"/>
<label>Output</label>
<textarea rows="10" cols="100" id="output_box"></textarea>

</body>
</html> 
```

客户端JS

```
var message_box; 
var output_box;
var submit_btn;
var url = "wss://192.168.1.107:5000";
var socket;

function createListeners() {
    if ("WebSocket" in window) {
        output_box.html("Supports sockets.");
        socket= new WebSocket(url);
        socket.onopen= function() {
            socket.send("con opened");
            output_box.html("Connection opened.");
        };
        socket.onmessage= function(response) {
            //  alert('got reply '+s);
            console.log(response);
            output_box.html(response);
        };
        socket.onclose = function() { 
            // websocket is closed.
            output_box.html("Connection is closed..."); 
        };
        submit_btn.click(function(e) {
            socket.send(message_box.val());
        });
    } else {
        output_box.html("doesnt support sockets");
    };
};

$(document).ready(function() {
    message_box = $("#message_box");
    output_box = $("#output_box");
    submit_btn = $("#submit_btn");
    createListeners();
}); 
```

服务器 JS 代码

```
var net = require('net');
var server = net.createServer(function (socket) {
    socket.write('server says this\r\n');
    socket.pipe(socket);
});
server.on('connection', function(socket) {
    socket.write("Echo server dot come\r\n"+socket.address().address);
    console.log("Echo server dot come\r\n"+socket.address().address);
    // socket.end();
    socket.pipe(socket);
});
server.listen(5000); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:21:47.073

您正在尝试将 WebScoket 客户端与简单的 TCP 服务器一起使用。这是不同的协议。您需要设置 WebSocket 服务器以使其工作。您可以使用[websocket](https://github.com/Worlize/WebSocket-Node)模块来做到这一点。[在此处](https://github.com/Worlize/WebSocket-Node#server-example)查看服务器示例代码。

# jquery - jQuery 下拉菜单不会在资源管理器中打开 - 如何解决这个问题？

> ID：15852313
> 
> 赞同：1
> 
> 时间：2013-04-06T14:51:18.017
> 
> 标签：jquery, html, css

我必须对我的脚本进行一些调整，以允许 Sprytabs 在这个下拉菜单中运行。在 FF 和 Chrome 中，一切对我来说都很完美，但是我也在使用 IE9，菜单甚至都不会打开。但是，如果我在 IE 中打开 webdeveloper 工具，菜单开始正常工作，但在新加载浏览器时将无法再次打开。我不知道这是否是 IE 中脚本的焦点问题？任何帮助，将不胜感激

[http://jsfiddle.net/7aSDS/53/](http://jsfiddle.net/7aSDS/53/)

```
$(function(){

       $('#navigation_horiz ul li').bind('mouseenter',function(e){
        $('#navigation_horiz ul li').removeClass('active');
        $(this).addClass('active');
        if($(this).children('.dropdown').length>0){
            $('#navigation_horiz ul').next('.dropdown').attr('id',$(this).children('.dropdown').attr('id'));            

            $('#navigation_horiz ul').next('.dropdown').html($(this).children('.dropdown').html());
                        console.log($('#navigation_horiz ul').next('.dropdown').html());
            $('#navigation_horiz ul').next('.dropdown').slideDown(500);
            $('#navigation_horiz ul').next('.dropdown').children().css('opacity',0);
            $('#navigation_horiz ul').next('.dropdown').children().animate({opacity:0},0).animate({opacity:1},1000,'linear');
        }
    });

    jQuery.expr[':'].focus = function( elem ) {
      return elem === document.activeElement && ( elem.type || elem.href );
    };  

    $('#navigation_horiz').bind('mouseleave',function(){
        if($('#navigation_horiz ul').next('.dropdown').children().length > 0 && $('#navigation_horiz ul').next('.dropdown').attr('id')=='dropdown_login' && ($('#navigation_horiz ul').next('.dropdown').find('input').is(":focus") || $('#navigation_horiz ul').next('.dropdown').find('select').is(":focus") )){
        }else{
            $('#navigation_horiz ul li').removeClass('active');
            $('#navigation_horiz ul').next('.dropdown').delay(700).slideUp(500);
        }
    });

    $('#TabbedPanels1 .TabbedPanelsContentGroup').children().hide();
    $('#TabbedPanels1 .TabbedPanelsContentGroup').children(":eq(0)").show();

    $("#TabbedPanels1 .TabbedPanelsTabGroup li").live('click',function(){
        $(this).parent('ul').next('.TabbedPanelsContentGroup').children().hide();
        $(this).parent('ul').next('.TabbedPanelsContentGroup').children(":eq("+$(this).attr('tabindex')+")").show();
    }); 
    <!--

    //-->

});
var TabbedPanels1 = new Spry.Widget.TabbedPanels("TabbedPanels1"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:38:36.620

在您的代码中尝试此操作，希望对您有所帮助...

```
 <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:12:52.880

您的代码包含大量无效的 HTML……资源管理器讨厌无效的 HTML。

看：

[http://validator.w3.org/check?uri=http%3A%2F%2Fjsfiddle.net%2F7aSDS%2F53%2Fshow%2F&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http://jsfiddle.net/7aSDS/53/show/&charset=%28detect%20automatically%29&doctype=Inline&group=0)

我会全部修复，但您应该真正专注于修复以下结构错误：

*   看到结束标签`div`，但有开放元素。
*   未封闭的元素模块。
*   `/>`用于非空 HTML 元素的自闭合语法 ( )。忽略斜线并将其视​​为开始标记。
*   `div`在此上下文中，元素模块不允许作为元素的子级。（抑制来自该子树的更多错误。）

# java - 基于token延迟提交任务

> ID：15852314
> 
> 赞同：2
> 
> 时间：2013-04-06T14:51:25.617
> 
> 标签：java, multithreading, guava, callable

伙计们。我有一个任务我无法解决，因为我对多线程很陌生。我想编写一个将维护以下语义的类：

```
interface TokenAwareTaskExecutor(){
   //Callable<Long> returns the time the task finishes.
   public void submitTask(String token, Callable<Long> task);
   public long getDelay();
} 
```

在提交任务时，服务会查找之前的调用是否添加了这样的令牌。如果是这样，则该任务应在延迟之后以及任何其他具有相同令牌的已提交任务已执行之后提交。如果不存在这样的令牌，请添加它并立即提交任务。总而言之，我想实现一个负载平衡策略，允许独立处理具有给定频率的唯一令牌。你能指导我看什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:05:28.537

如果没有太多不同的标记，一种解决方案可能是将每个标记映射到`ScheduledThreadPoolExecutor`. 然后，如果在地图中找到了执行者，则延迟调度任务。否则，立即创建一个新的执行和计划。

另一种方法是只有一个`ScheduledThreadPoolExecutor`和一个将令牌映射到一个`ScheduleInfo`对象的映射，该对象由一个原子计数器组成，该计数器计算该令牌正在等待的任务数量以及具有该令牌的最后一个任务的调度时间。对计数器和时间的任何更改都必须同时发生并同步。

我们将每个传入任务包装在一个外部 Callable 中，该 Callable 在调度时使用in 中的`synchronized`方法递增计数器。如果计数器为零，我们将立即调度并将调度时间设置为当前时间。如果计数器大于零，我们将延迟添加到 scheulding 时间并安排该确切时间。`enter()``ScheduleInfo`

`synchronized`当内部任务完成后，外部任务必须再次递减计数器，这发生`exit()`在`ScheduleInfo`. 我不确定如何解释延迟（调用之间的时间*或*一个任务结束与下一个任务开始之间的时间）。在后一种情况下，我们也必须在这里调整调度时间。同样，重要的是`enter`不能`exit`重叠，因此必须同步。

没有尝试任何代码，这就是我的想法，所以我欢迎任何批评。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:29:51.067

实施将涉及以下内容：

1.  需要存储已提交的令牌以及这些令牌请求的状态：为了实现这一点，我将创建一个内部类，其中包含令牌名称、最后请求的状态、提交时间和最后请求的结束时间。我将使用 ConcurrentHashmap 将相应的字符串标记存储为键，并将每个 bean 的实例存储为值，并且每当有请求进入时，我将通过使用同步块来锁定该 bean。

2.  每次请求到来时，它都会检查 map 中是否存在令牌条目，如果不存在，它将创建一个条目并继续执行任务。如果存在条目，它将尝试获取 bean 实例的锁定，这意味着如果已在 bean 上获取锁定，那么它将等待。

3.  一旦一个请求完成了它的工作，它会在释放锁之前更新它在相应 bean 中的状态。

以上2点基本上为实现设置了一个freamork，您可以扩展它以实现其他方面，例如如果出现超过2个以上的多个请求然后依次排队[您可以使用fairnes lock]，如果您想添加任何多个请求之间的额外延迟，那么这也可以完成

# java - Java多线程与方法调用结合使用？

> ID：15852316
> 
> 赞同：0
> 
> 时间：2013-04-06T14:51:27.147
> 
> 标签：java, multithreading, concurrency

我在互联网上遇到了以下 Java 类：

```
public class Lock1 implements Runnable {
int b=100;
public synchronized void m1() throws Exception {
    b=1000;
    Thread.sleep(50);
    System.out.println("b="+b);
}

public synchronized void m2() throws Exception {
    Thread.sleep(30);
    //System.out.println("m2");
    b=2000;
}

public void run() {
    try {m1();}
    catch(Exception e) {
        e.printStackTrace();
    }
}

public static void main(String[] args) throws Exception {
    Lock1 tt=new Lock1();
    Thread t = new Thread(tt);
    t.start();

    tt.m2();
    System.out.println(tt.b);
}
} 
```

尝试运行了很多次，结果几乎总是：

```
 1000
     b=1000 
```

在我最初的猜测中，我认为第一行应该是“2000”，因为 tt.m2() 只是一个方法调用（不是线程），所以 main 方法应该继续执行并得到结果“b”作为一个在方法 m2 中被赋值为 2000。

我所做的第二次尝试是取消注释

```
 System.out.println("m2") 
```

在 m2 方法中。令人惊讶的是，结果几乎总是：

```
 m2
 2000
 b=1000 
```

为什么在 m2 方法中添加语句，会导致 tt.b 的输出值发生变化？

对不起，我在这里对线程和方法调用之间的区别感到很困惑，希望高手能帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T15:26:21.120

Java 意义上的同步结合了几件事。在这种情况下，这些点很有趣：

*   互斥
*   读者的记忆障碍
*   作家的记忆障碍

输入`synchronized`块（或方法）后，您有两个保证：您拥有锁（互斥），并且 JVM 和编译器将丢弃 *同步对象*的任何缓存。这意味着访问`this.b`将从 RAM 中获取 'b' 的实际值，而不是从任何缓存中获取，*而只会从一次*中获取。然后它将再次使用缓存的副本。

依次留下一个`synchronized`块可以保证 CPU 将所有脏的（即写入的）缓存刷新到内存中。

你的东西的重点是：`System.out.println(tt.b);`绝不是同步的，这意味着对它的访问没有跨越定义的内存屏障。因此，尽管另一个线程已经写入了一个新值`b`并将其刷新到 RAM 中，但主线程并不知道它应该`b`从 RAM 中读取，而不是从自己的缓存中读取。

解决方案是：

```
synchronized(tt){
    System.out.println(tt.b);
} 
```

这符合黄金法则，如果某些东西是同步的，那么对它的**每次**访问都应该同步，而不仅仅是一半的访问。

关于你添加的`System.out`：有三件事：

首先：它很慢（与一些内存摆弄相比）。这意味着在此期间 CPU 或 JVM 可能会自行决定，新的外观`tt`可能是合适的

第二：它很大（与一些内存摆弄相比）。这意味着仅被触摸的代码可能会`tt`从缓存中逐出。

第三：内部同步。这意味着您跨越了一些记忆障碍（这可能与您无关`tt`- 谁知道）。但这些也可能会产生一些影响。

这是多线程调试的主要规则：`System.out`根据 Murphy 的说法，添加以捕获错误实际上会隐藏问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:03:17.230

我想这是特定于 JVM 实现的。

基本上，每个线程都有自己的对象变量副本（视图），并且不确定它们来回同步的方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T15:20:52.060

最可能的原因`System.out.println`是速度慢。“意外”结果的原因是延迟 ( `Thread.sleep`) 和打开输出流 ( `System.out.println`) 的开销之间的竞争条件。

# django - 不安装 django.contrib.messages.middleware.MessageMiddleware 就无法添加消息

> ID：15852317
> 
> 赞同：18
> 
> 时间：2013-04-06T14:51:31.190
> 
> 标签：django, django-admin

我是 Django 的新手。我正在尝试运行一个应用程序，我需要向管理员添加一个新用户。服务器正在运行。当我输入新用户的信息并点击“保存”时，我收到以下错误。我正在使用 django-trunk。

```
MessageFailure at /admin/auth/user/add/
You cannot add messages without installing
django.contrib.messages.middleware.MessageMiddleware

Request Method: POST
Request URL:    http://localhost:8000/admin/auth/user/add/
Django Version: 1.6.dev20130403090717
Exception Type: MessageFailure
Exception Value:    You cannot add messages without installing django.contrib.messages.middleware.MessageMiddleware 
```

对可能发生的事情有任何想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-12-04T17:34:09.427

对我来说，问题是特定于单元测试的。事实证明，某些中间件在某些类型的单元测试中不起作用，更多信息在这里：

[https://code.djangoproject.com/ticket/17971](https://code.djangoproject.com/ticket/17971)

和这里：

[为什么我的 Django 单元测试不知道安装了 MessageMiddleware？](https://stackoverflow.com/questions/11938164/why-dont-my-django-unittests-know-that-messagemiddleware-is-installed)

我的解决方案是模拟这些测试的消息框架，可能有更好的解决方案（django 测试客户端？）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-07T06:15:27.183

检查您是否有`django.contrib.messages`in[`INSTALLED_APPS`](https://docs.djangoproject.com/en/dev/ref/settings/#installed-apps)和`django.contrib.messages.middleware.MessageMiddleware`in [`MIDDLEWARE_CLASSES`](https://docs.djangoproject.com/en/dev/ref/settings/#middleware-classes)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-02-13T23:44:53.720

如果您正在运行普通的 django 代码，则应 `django.contrib.messages.middleware.MessageMiddleware`按照其他人的建议添加到中间件

如果您正在运行测试用例并使用请求工厂，那么正如上面@hwjp 回答的那样，这是一个错误（不会被修复）。请求工厂不调用中间件，开发人员也不打算改变这种行为。

然而，有一个简单的解决方案。

在您的测试设置文件（即`settings/test.py`）中添加以下行

```
MESSAGE_STORAGE = 'django.contrib.messages.storage.cookie.CookieStorage' 
```

在您的测试代码中，您可以编写这样的代码

```
request = RequestFactory().get("/")
# Add support  django messaging framework
request._messages = messages.storage.default_storage(request) 
```

就是这样。将此请求对象传递给任何使用 django 消息的代码都可以正常工作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-03-15T12:00:01.070

检查是否是

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
) 
```

代替

```
MIDDLEWARE = (
   'django.middleware.common.CommonMiddleware',
   'django.contrib.sessions.middleware.SessionMiddleware',
   'django.contrib.auth.middleware.AuthenticationMiddleware',
   'django.contrib.messages.middleware.MessageMiddleware',
) 
```

元组名称应为 MIDDLEWARE_CLASSES

MIDDLEWARE_CLASSES 折旧[https://docs.djangoproject.com/en/2.1/releases/1.10/#id3](https://docs.djangoproject.com/en/2.1/releases/1.10/#id3)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-06-26T19:39:23.013

2018 更新在 django 2.0+ 中，设置中的名称已更改。现在使用`MIDDLEWARE`而不是`MIDDLEWARE_CLASSES`设置中的列表名称！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-10T08:37:20.963

我遇到了同样的错误。您必须注意 MIDDLEWARE_CLASSES 中中间件的顺序。在finally中插入相应的中间件。像这样，

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
) 
```

注意顺序排列。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-21T09:24:02.337

`WSGI_request`当通常作为方法`request`的参数调用时，您可能会出错`add_message()`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-04T10:54:04.473

如果在测试中需要该请求，则可以按照@Ramast 的建议对其进行模拟。[我发现bug 票证](https://code.djangoproject.com/ticket/17971)中提到的解决方案（已关闭，无法修复）很有帮助。

```
from django.contrib.messages.storage.fallback import FallbackStorage
from django.test import RequestFactory

def dummy_request():
    """Dummy request for testing purposes with message support."""
    request = RequestFactory().get('/')
    # Add support django messaging framework
    setattr(request, 'session', 'session')
    setattr(request, '_messages', FallbackStorage(request))
    return request 
```

# c++ - 究竟什么是 C++ 头文件和声明？

> ID：15852318
> 
> 赞同：0
> 
> 时间：2013-04-06T14:51:33.990
> 
> 标签：c++

我知道有关头文件和前向声明的基础知识，但我想知道，如果我在两个单独的头文件中声明完全相同的东西然后编译它，那会奏效吗？

在这种情况下，C++ 接口是否可移植，我的意思是，如果我有两个库并且它们在某处共享相同的接口（声明或其他），理论上我可以在程序中复制相同的声明并实际编译它，或者如果不是为什么？

例如，C++ 如何能够区分两个不同文件中的两个相同声明之间的区别？

假设我有两个不同的库，但它们共享一些接口，它们是分开编译的，但使用相同的工具，是否有可能在未来的步骤中将这些库放在一起并实际传递这两个库之间的接口，就好像它是相同，兼容的接口，即使它最初是从不同（但相同）的头文件编译的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:55:31.570

给定标识符的函数声明、变量声明和类定义可以根据需要经常出现在源代码中。它们每次出现时都必须相同（如果您在多个翻译单元中包含给定的头文件，这是自动的）。

只有函数、变量和类成员函数的*定义*必须精确出现一次（内联函数有特殊规则）。

（模板有点不同：模板*定义*可能会重复出现，但所有出现的地方都必须相同。但是模板需要链接器进行一些重要的重复数据删除工作。）

# android - 将 Android 的 DownloadManager 移植到 2.2 等旧版本

> ID：15852326
> 
> 赞同：-1
> 
> 时间：2013-04-06T14:52:29.960
> 
> 标签：android

有没有办法将 DownloadManager 移植到较旧的 android 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:05:16.570

是的，有一种方法 - 与任何其他软件相同。获取源代码和端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:09:15.643

> 有没有办法将 DownloadManager 移植到较旧的 android 版本？

不是任何传统意义上的。

原则上，您可以获取提供下载应用程序和下载提供程序的 AOSP 应用程序，并尝试将其向后移植以在旧版本的 Android 上运行。

但是，`DownloadManager`它本身是一个系统服务，只能通过修改框架进行反向移植。您可以尝试创建某种`DownloadManager`与下载提供程序通信的类似工作，但它`DownloadManager`本身不是。

而且，我不能说这些中的任何一个都可以多么容易地被反向移植。

# c - ulimit -c unlimited 命令是如何使用的，它有什么作用？

> ID：15852330
> 
> 赞同：2
> 
> 时间：2013-04-06T14:52:40.913
> 
> 标签：c, netbeans, coredump, ulimit

我现在正在帮助编写一个程序，并且在 Windows 上，该程序运行良好。在 Mac 上，将框架目录更改为唯一合适的位置后，出现此错误：

`run:`

```
A fatal error has been detected by the Java Runtime Environment:

SIGSEGV (0xb) at pc=0x00007fff92309bb2, pid=12438, tid=44807

JRE version: 7.0_10-b18
Java VM: Java HotSpot(TM) 64-Bit Server VM (23.6-b04 mixed mode bsd-amd64 compressed oops)
Problematic frame:
C  [CoreFoundation+0x1bb2]  CFDictionaryGetValue+0x12

Failed to write core dump. Core dumps have been disabled. To enable core dumping, try "ulimit -c unlimited" before starting Java again
An error report file with more information is saved as:
/Downloads/BiscuitAnimator-Mac-master/hs_err_pid12438.log

If you would like to submit a bug report, please visit:
http://bugreport.sun.com/bugreport/crash.jsp
The crash happened outside the Java Virtual Machine in native code.
See problematic frame for where to report the bug.

Java Result: 134
BUILD SUCCESSFUL (total time: 4 seconds) 
```

如何在 NetBeans 中使用 ulimit -c unlimited 命令/设置核心转储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:51:43.527

如果您的程序中有一些错误（意外错误场景）并导致程序崩溃，您应该能够调试程序崩溃的原因。为此，操作系统会将进程堆栈复制到一个名为核心转储文件的文件中。

ulimit ，是一个系统命令。

ulimit -c unlimited，用于将核心转储文件大小设置为无限制的命令。除了无限制，您还可以指定核心转储文件大小的最大限制。

有关更多信息，请键入 man ulimit

# php - PHP mysql麻烦将数据添加到表中

> ID：15852331
> 
> 赞同：0
> 
> 时间：2013-04-06T14:52:41.490
> 
> 标签：php, mysql, database, insert, mysqli

我是 php 的新手，我一直在尝试将一系列变量插入到 mysql 数据库中。但是，似乎在创建表时数据没有输入到表中。我希望有人能告诉我为什么。任何帮助将非常感激。

php代码：

```
<?php
$team = $_POST['team'];
$int1 = $_POST['int1'];
$int2 = $_POST['int2'];
$int3 = $_POST['int3'];
$int4 = $_POST['int4'];
$int5 = $_POST['int5'];
$int6 = $_POST['int6'];
$int7 = $_POST['int7'];
$int8 = $_POST['int8'];
$int9 = $_POST['int9'];
$int10 = $_POST['int10'];
$int11 = $_POST['int11'];
$int12 = $_POST['int12'];
$int13 = $_POST['int13'];
$int14 = $_POST['int14'];
$con=mysqli_connect("127.0.0.1:3306","root","password","my_db");
// Check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }
$sqli="CREATE TABLE $team(int1 INT,int2 INT,int3 INT,int4 INT,int5 INT,int6 INT,int7 INT,int8 INT,int9 INT,int10 INT,int11 INT,int12 INT,int13 INT,int14 INT)";
if (mysqli_query($con,$sqli))
  {
  echo "<br />Table created successfully";
  }
else
  {
  echo "<br />Error creating table: " . mysqli_error();
  }
$sql="INSERT INTO $team (int1, int2 ,int3 ,int4 ,int5 ,int6 ,int7 ,int8 ,int9 ,int10 ,int11 ,int12 ,int13 ,int14 )
VALUES ($int1,$int2,$int3,$int4,$int5,$int6,$int7,$int8,$int9,$int10,$int11,$int12,$int13,$int14)";
if (mysqli_query($con,$sql))
  {
  echo "<br />Record added";
  }
else
  {
  echo "<br />Error adding record";
  }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:58:43.043

首先，您永远不应该将 $_POST 值直接插入数据库，而不使用 strip_tags、htmlentities 或其他一些函数来消除可能的恶意代码。

其次，我建议查看 MySQL 文档以了解创建表的正确语法。[http://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:45:02.833

首先，在没有经过清理（验证）的情况下插入数据存在很大的安全风险。

其次，利用php中的mysqli_error [http://php.net/manual/en/mysqli.error.php](http://php.net/manual/en/mysqli.error.php)来记录或打印错误。

因为您在没有验证的情况下插入数据，如果任何变量`$int1.... $int14`为空白或未从请求脚本的表单中填写，您的 sql 查询将变得不正确并通过生成某种语法错误而失败，可以使用 mysqli_error 进行跟踪，如讨论以上。

```
if (mysqli_query($con,$sql))
  {
  echo "<br />Record added";
  }
else
  {
  echo "<br />Error ".mysqli_error($con);
  } 
```

要查看任何字段留空时可能出现的问题，请考虑提交的值： $team = 'tbl_team'; $int1 = 1; $int2 = 2; $int3 = 3; $int4 = 4; $int5 = ''; $int6 = 6; $int7 = 7; $int8 = 8; $int9 = 9; $int10 = ''; $int11 = 11; $int12 = 12; $int13 = 13; $int14 = 14;

现在看看如果我们在这种情况下打印它，你的 sql 查询会发生什么：

```
$sql="INSERT INTO $team 
                 (int1, int2 ,int3 ,int4 ,int5 ,int6 ,int7 ,
                   int8 ,int9 ,int10 ,int11 ,int12 ,int13 ,int14 )
      VALUES                        
                   ($int1,$int2,$int3,$int4,$int5,$int6,$int7,
                   $int8,$int9,$int10,$int11,$int12,$int13,$int14)";
print $sql 
```

将导致：

```
 INSERT INTO tbl_team (int1, int2 ,int3 ,int4 ,int5 ,int6 ,int7 ,int8 ,int9 ,int10 ,int11 ,int12 ,int13 ,int14 )VALUES (1,2,3,4,,6,7,8,9,,11,12,13,14)"; 
```

顺便说一句，这是一个 SQL 语法问题。

如果您完全是新手并且还没有理解一个单词，您可以尝试使用以下代码行代替您原来的代码以获得更好的机会。

```
$sql="INSERT INTO $team (int1, int2 ,int3 ,int4 ,int5 ,int6 ,int7 ,
                          int8 ,int9 ,int10 ,int11 ,int12 ,int13 ,int14 )
      VALUES
                        ('$int1','$int2','$int3','$int4','$int5','$int6','$int7',
                         '$int8','$int9','$int10','$int11','$int12','$int13','$int14')"; 
```

# asp.net - 如何使按钮看起来像超链接 aspx.net

> ID：15852332
> 
> 赞同：3
> 
> 时间：2013-04-06T14:52:43.243
> 
> 标签：asp.net, button

我想使用一个按钮（该按钮不仅仅是链接）在 aspx.net 中显示为超链接。这意味着该按钮不会具有通常具有的白色背景，并且看起来像突出显示的文本，例如链接。提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T15:00:42.697

给你的按钮一个`CssClass`

```
<asp:Button ID="button" Text="Button" CssClass="button" /> 
```

然后为您的按钮应用 css：

```
.button {
    background-color:transparent;
    border:none;
    cursor:pointer;
    text-decoration:underline;
    padding: 0px;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T14:59:46.533

你想要一个 asp:LinkBut​​ton 控件

W3 学校： [http ://www.w3schools.com/aspnet/control_linkbutton.asp](http://www.w3schools.com/aspnet/control_linkbutton.asp)

MSDN： http: [//msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.linkbutton (v=vs.80).aspx](http://msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.linkbutton(v=vs.80).aspx)

# cocos2d-iphone - 使用cocos2d语言objective c实现平台游戏的无限滚动

> ID：15852338
> 
> 赞同：1
> 
> 时间：2013-04-06T14:53:14.070
> 
> 标签：cocos2d-iphone, scroll

我正在尝试使用 cocos2d 库开发 2D 游戏。我还在学习框架。

请理解，我是游戏开发的新手，但对使用目标 c 进行编程并不陌生。

这是我在游戏开发工作中面临的问题——我觉得我缺少对如何开发无限滚动游戏的理论理解。你们中的任何人都可以为我提供一些指导吗？

下面是我对使用 cocos2d 框架实现无限滚动的理解：

1.  Cocos2d 有一个处理当前场景和场景转换的单例导演类

2.  在当前场景中，我觉得我必须创建一个由多个图像组成的平台对象，并将它们作为子对象添加到当前图层。并不断地对平台精灵运行一个移动动作。因此，当我检测到特定图像不在屏幕上时，我必须用另一个图像替换它。这样我就可以创建无限滚动。

如果第 2 点不连贯，我很抱歉。我只是试图把我对如何无限滚动的理解。

你能帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:28:57.047

[我在这篇文章中](http://www.koboldtouch.com/display/IDCAR/Four+Ways+of+Scrolling+with+Cocos2D)剖析了如何使用 cocos2d-iphone 实现滚动。您可能想要的是“假滚动”方法，其中移动两个背景图像并在一个完全离开屏幕后切换位置。

您只想对背景层执行此操作，而不是单个精灵。你的世界并没有真正移动，它只是背景平移造成了移动的错觉。所有精灵等（玩家、敌人）的移动仍然是相对于屏幕坐标的。

您将在 Shoot'em Up 项目中[我的 Learn Cocos2D 2 书的代码中找到一个有效的实现。](http://www.learn-cocos2d.com/store/book-learn-cocos2d/)

如果您不想自己实现此功能，[KoboldTouch 支持瓷砖地图的无限/无限滚动](http://www.koboldtouch.com/x/cYBq)。在这里，游戏对象实际上随着背景无限移动（直到浮动支持的最大坐标，大约为 +/- 1600 万点）。

# php - 重定向登录用户

> ID：15852341
> 
> 赞同：0
> 
> 时间：2013-04-06T14:53:31.857
> 
> 标签：php, redirect, login, user-accounts

我已经为用户创建了配置文件，这样当用户登录时，他们就会被重定向到他们自己的配置文件页面。

login.php（仅相关代码）

```
 $MemberID = user_id_from_username($username);
        $_SESSION['MemberID'] = $username;
        header('location: member.php?username='.$username); 
```

成员.php

```
if (logged_in () === true){
        echo "Welcome, ".$_SESSION['MemberID']. "!<br><a href='logout.php'>Logout</a>\n<a href='index.php'>Back to homepage</a></p>";
    }

    if(isset($_GET['username']) === true & empty ($_GET['username']) === false) {   
        $username = $_GET ['username'];
        //check if user actually exisits
        if (user_exists($username) === true) {
        //get username from user id
            $MemberID = user_id_from_username($username);
            $profile_data =user_data($MemberID,'Name','Address','Postcode','DOB','Mobile','CoinsAvailable','Email','profile','OddJobName','Description','CoinValue','DaysAvailable');//Need to pull out stuff from oddjob table
            echo $MemberID;
        }else{
            protect_page();
        }
} 
```

相关功能：

```
function user_data($MemberID){ //pass in memberid to get info about user
        $data = array();//data to be returned
        $MemberID =(int)$MemberID;//creating int from this input

        $func_num_args = func_num_args(); //count number of arguments from user data on init.php
        $func_get_args = func_get_args();

        if ($func_num_args >1) { //if more then 1, unset the first element of array 
            unset($func_get_args[0]);

            $fields = '`' . implode('`,`', $func_get_args) . '`';   //taking array and converting to string

            $data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `member`,`oddjob` WHERE member.MemberID = oddjob.MemberID AND member.MemberID = $MemberID"))or die (mysql_error());
                //echo $MemberID;
                return $data;

        }
}

function logged_in() {
    return (isset($_SESSION['MemberID'])) ? true : false; //Email
}

if (logged_in() ===true) {
    $session_MemberID = $_SESSION['MemberID'];//grabbing value from login
    $user_data= user_data($session_MemberID,'MemberID','Name','Address','Postcode','DOB','Mobile','CoinsAvailable','Email','Password','RepeatPassword','OddJobName','Description','DaysAvailable','profile');
    exit();
    } 
```

所有这些代码都允许用户被重定向到他们自己的页面，当他们登录时，他们的名字与其他`$profile_data`信息一起显示。现在我希望用户能够通过单击 update_info.php 的链接来更新他们自己的信息。但我不知道如何让会员用户名在他们访问 update_info.php 时出现在 URL 中，就像他们登录时一样。

在会员页面（链接所在的位置）中，我尝试了：

```
<a><?php header('location:update_info.php?username='.$username)?>">Update info</a></p> 
```

但是现在当用户登录时，他们被重定向到 update_info.php 而不是 member.php。谁能告诉我如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:57:34.740

也许你想写这个？

```
<a href="update_info.php?username=<?php echo $username ?>">Update info</a></p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:57:55.040

你的意思是：

```
<a href="update_info.php?username=<?php echo $username; ?>">Update info</a> 
```

这会将 $username 传递给 update_info.php 页面

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T15:08:01.657

好的。
让我们解释一下如何构建 -basic- 身份验证的基础知识。然后将其扩展到安全的:)

1 - 用户登录：如果凭据正常，您检查数据库。
如果是 -> `$_SESSION['loggedIn'] = true`;

2 - 在您要检查此人是否已登录的每个页面上；你把支票：
`if(!$_SESSION['loggedIn']) { header('location:login.php');}`

一些值得思考的东西：您不想在客户端存储“只是”一个布尔值来检查是否登录。您最好生成一个随机会话ID字符串。将此存储在数据库中，并将此 ID 存储在`$_SESSION['loggedin']`. 现在，您不再简单检查您的值，而是`$_SESSION['loggedIn']`在数据库中查找存储的会话 ID 的存在性和可用性。

**Post Scriptum：**
不要在函数中嵌套函数。
`$data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM`成员`,`怪事`WHERE member.MemberID = oddjob.MemberID AND member.MemberID = $MemberID"))or die (mysql_error());`

这对我们来说是不可读的，但对你来说尤其不可读。你最好这样写：

```
$sql = "SELECT $fields FROMmember,oddjobWHERE member.MemberID = oddjob.MemberID AND member.MemberID = $MemberID";
$res = mysql_query($sql) or die(mysql_error());
$data = mysql_fetch_assoc($res); 
```

**Post Post Scriptum：**
停止使用`mysql_* functions`in php.ini 文件。[看到这个网站](http://php.net/mysql_query)上的红框了吗？不再支持这些功能。你最好开始使用 PDO；顺便说一句，其中还内置了一些检查（mysql注入）标准；以及更多！

# java - JSP WebApp - 从 Ubuntu 切换到 Win7 后能够读取但不能更新 mysql 表

> ID：15852345
> 
> 赞同：-1
> 
> 时间：2013-04-06T14:53:56.920
> 
> 标签：java, mysql, jsp, jdbc

我创建了一个将新用户的凭据存储在数据库中的`inscription`表单*（太大而无法在此处发布） 。*`mysql`当我用我的 Ubuntu 计算机开发和测试它时，它运行良好。问题是，我将文件导出`war`到我的 Win7 计算机中，即使它使我能够从我的数据库表中读取，它也不会让我更新它。为了进行测试，我尝试使用 mySql 命令行创建一个新用户，它工作正常。我也更换了我的`Mysql J connector`.

```
Caused by: com.mysql.jdbc.MysqlDataTruncation: Data truncation: Data too long for column 'password' at row 1
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4118)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4052)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2503)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2664)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2815)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2458)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2375)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2359)
    at com.sdzee.dao.UtilisateurDaoImpl.creer(UtilisateurDaoImpl.java:86)

CREATE TABLE  bdd_sdzee.Utilisateur (
 id INT( 11 ) NOT NULL AUTO_INCREMENT ,
 email VARCHAR( 60 ) NOT NULL ,
 passeword VARCHAR( 32 ) NOT NULL ,
 nom VARCHAR( 20 ) NOT NULL ,
 date_inscription DATETIME NOT NULL ,
 PRIMARY KEY ( id ),
 UNIQUE ( email )
) ENGINE = INNODB; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:32:00.067

要修复此错误，您需要增加数据库中**密码**字段的长度。使用 HeidiSQL ( [http://www.heidisql.com/](http://www.heidisql.com/) ) 之类的 mysql 客户端连接到 Windows 中的数据库，并将字段的长度更改为更大的 varchar 或 blob。

# angularjs - AngularJS：选择元素 - 具有不同的模型和选项值

> ID：15852346
> 
> 赞同：0
> 
> 时间：2013-04-06T14:54:05.260
> 
> 标签：angularjs

我的控制器中有一个 javascript 对象，如下所示：

```
$scope.options = [
    {
        "actualValue": "age",
        "displayValue": "Age"
    },
    {
        "actualValue": "maiden",
        "displayValue": "Maiden Name"
    }
]; 
```

现在，我正在显示一个选择元素，其中元素的选项将是上面编写的“displayValue”属性中的值：

```
<select ng-options="entry.displayValue for entry in options" ng-model="biodata">
    <options>-- Select a BioData Option --</option>
</select> 
```

现在，我的问题是，`ng-model`当用户从下拉列表中选择一个值时，上面的选择元素是“displayValue”属性。我希望它`ng-model`是“actualValue”属性。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:23:07.583

```
<select ng-options="entry.actualValue as entry.displayValue for entry in options"></select> 
```

小提琴：http: [//jsfiddle.net/rzV65/](http://jsfiddle.net/rzV65/)

已经在这里回答了：[如何在 AngularJS 的 ng-options 中设置 value 属性？](https://stackoverflow.com/questions/12139152/how-to-set-value-property-in-angularjs-ng-options)

# android - Android SQLite 使用 db.query() 代替 rawquery()

> ID：15852348
> 
> 赞同：15
> 
> 时间：2013-04-06T14:54:11.780
> 
> 标签：android, sqlite

我有 tableA、tableB 和 tableC 表 A 和 tableB 由 tableA.Id(PK) = tableB.tableAId(FK) 连接 表 B 和 tableC 由 tableB.Id(PK) = tableC.tableBId(FK) 连接

我希望能够做到这一点：

```
SELECT c.ALL from tableC c
INNER JOIN tableB b on c.tableBId = b.Id
INNER JOIN tableA a on b.tableAId = a.Id
WHERE a.Id = 108 
```

我在网上找到了很多使用 db.rawquery() 来实现这个查询的帖子。但是我也听说 rawquery() 不如 query() 安全。因此，为了寻求初学者的最佳实践，我的问题是：

有没有办法使用 db.query() 而不是 db.rawquery() 来实现这个查询？

提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-06T14:59:07.060

> 有没有办法使用 db.query() 而不是 db.rawquery() 来实现这个查询？

因此，值得一提的是 rawQuery() 是一个把戏。但也存在另一种方法。

query() 方法旨在对一张表执行查询。**但是**如何`JOIN`在 SQLite 中创建表的最佳方法是使用[`SQLiteQueryBuilder`](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html#setTables%28java.lang.String%29)setTables() 方法，您可以加入。

因此，我建议您使用提到**的 SQLiteQueryBuilder**。但是对于您只需要分配原始语句的 rawQuery() 方法，它会稍微复杂一些。

如果不知道如何开始，请查看以下示例：

*   [如何使用 SQLite 连接](http://martin.cubeactive.com/android-creating-a-join-with-sqlite/)

## 笔记：

是`rawQuery()`不是`query()`因为`query()`方法使用比“原始”语句更安全的预编译语句更安全。但是你总是可以（应该）使用**占位符**来显着提高语句的安全性，作为防止`SQL`注入的主要保护，并且语句也变得更加易于阅读。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-11-18T11:20:39.557

这有点晚了，但我认为其他正在寻找它的人可能会从中受益：

`db.query()`方法本身通过其参数支持`LEFT OUTER JOIN`AND ，因此您实际上不需要使用它来完成它。它也更容易，而且非常直接。`INNER JOIN``table``SQLiteQueryBuilder`

这种方法在[Google I/O 2015 Schedule app 的源代码](https://github.com/google/iosched/blob/master/android/src/main/java/com/google/samples/apps/iosched/provider/ScheduleDatabase.java#L77)中被广泛使用。

一个快速示例（为简洁起见省略了字符串常量）：

```
Cursor cursor = db.query(NoteContract.Note.TABLE_NAME 
+ " LEFT OUTER JOIN authors ON notes._id=authors.note_id", projection, selection, 
selectionArgs, null, null, "notes._id"); 
```

关键在于 的第一个参数`db.query()`。

目前只支持`LEFT OUTER JOIN`和`INNER JOIN`，对于大多数应用来说已经足够了。

我希望这个答案可以帮助其他正在寻找这个的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-21T19:59:47.937

是的，您可以使用 query() 而不是 rawQuery()，给定一个假设 - 您要加入的表中没有两个相同的列名。

如果满足该标准，那么您可以使用此答案 [https://stackoverflow.com/a/34688420/3529903](https://stackoverflow.com/a/34688420/3529903)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-23T05:27:45.447

根据**SharpEdge**的评论，并根据**Nimrod Dayan**的回答尝试了一个更复杂的示例后，这里有一个更复杂的示例。

使用了 4 个连接，还使用了一个生成的列。它使用一个表达式（减去时间戳），然后在 WHERE 子句中使用它。

**基本上，该方法是将连接子句附加到表名字符串（SQLite 然后将其移动到列之后）。**

`DBConstants.SQL?????`解析为相应的 SQL，例如`DBConstants.SQLISNOTNULL`解析为`IS NOT NULL`

`DBConstans.CALCULATED?????`是计算列的名称。

`DB????TableConstants.????_COL`解析为列名（`.._FULL`解析为 table.column，例如避免模棱两可的 _ID 列）。

方法（`getToolRules`）如下：-

```
public Cursor getToolRules(boolean rulesexist,
                               int minimumruleperiodindays,
                               int minimumbuycount) {

        String columns[] = new String[] {
                "0 " + DBConstants.SQLAS + DBConstants.STD_ID,
                DBProductusageTableConstants.PRODUCTUSAGE_PRODUCTREF_COL,
                DBProductusageTableConstants.PRODUCTUSAGE_AISLEREF_COL,
                DBProductusageTableConstants.PRODUCTUSAGE_COST_COL,
                DBProductusageTableConstants.PRODUCTUSAGE_BUYCOUNT_COL,
                DBProductusageTableConstants.PRODUCTUSAGE_FIRSTBUYDATE_COL,
                DBProductusageTableConstants.PRODUCTUSAGE_LATESTBUYDATE_COL,
                DBProductusageTableConstants.PRODUCTUSAGE_ORDER_COL,
                DBProductusageTableConstants.PRODUCTUSAGE_RULESUGGESTFLAG_COL,
                DBProductusageTableConstants.PRODUCTUSAGE_CHECKLISTFLAG_COL,
                DBProductusageTableConstants.PRODUCTUSAGE_CHECKLISTCOUNT_COL,

                "(" +
                        DBProductusageTableConstants.PRODUCTUSAGE_LATESTBUYDATE_COL +
                        "- " +
                        DBProductusageTableConstants.PRODUCTUSAGE_FIRSTBUYDATE_COL +
                        " / (86400000)" +
                        ") " + DBConstants.SQLAS + DBConstants.CALCULATED_RULEPERIODINDAYS,

                DBProductsTableConstants.PRODUCTS_NAME_COL,

                DBAislesTableConstants.AISLES_NAME_COL,
                DBAislesTableConstants.AISLES_ORDER_COL,
                DBAislesTableConstants.AISLES_SHOPREF_COL,

                DBShopsTableConstants.SHOPS_NAME_COL,
                DBShopsTableConstants.SHOPS_CITY_COL,
                DBShopsTableConstants.SHOPS_ORDER_COL,

                DBRulesTableConstants.RULES_ID_COL_FULL +
                        DBConstants.SQLAS + DBRulesTableConstants.RULES_ALTID_COL,
                DBRulesTableConstants.RULES_AISLEREF_COL,
                DBRulesTableConstants.RULES_PRODUCTREF_COL,
                DBRulesTableConstants.RULES_NAME_COL,
                DBRulesTableConstants.RULES_USES_COL,
                DBRulesTableConstants.RULES_PROMPT_COL,
                DBRulesTableConstants.RULES_ACTON_COL,
                DBRulesTableConstants.RULES_PERIOD_COL,
                DBRulesTableConstants.RULES_MULTIPLIER_COL

        };
        String joinclauses = DBConstants.SQLLEFTJOIN +
                DBProductsTableConstants.PRODUCTS_TABLE +
                DBConstants.SQLON +
                DBProductusageTableConstants.PRODUCTUSAGE_PRODUCTREF_COL + " = " +
                DBProductsTableConstants.PRODUCTS_ID_COL_FULL + " " +

                DBConstants.SQLLEFTJOIN +
                DBAislesTableConstants.AISLES_TABLE +
                DBConstants.SQLON +
                DBProductusageTableConstants.PRODUCTUSAGE_AISLEREF_COL + " = " +
                DBAislesTableConstants.AISLES_ID_COL_FULL +

                DBConstants.SQLLEFTJOIN +
                DBShopsTableConstants.SHOPS_TABLE +
                DBConstants.SQLON +
                DBAislesTableConstants.AISLES_SHOPREF_COL + " = " +
                DBShopsTableConstants.SHOPS_ID_COL_FULL +

                DBConstants.SQLLEFTJOIN +
                DBRulesTableConstants.RULES_TABLE +
                DBConstants.SQLON +
                DBProductusageTableConstants.PRODUCTUSAGE_PRODUCTREF_COL + " =  " +
                DBRulesTableConstants.RULES_PRODUCTREF_COL +
                DBConstants.SQLAND +
                DBProductusageTableConstants.PRODUCTUSAGE_AISLEREF_COL + " = " +
                DBRulesTableConstants.RULES_AISLEREF_COL
                ;
        String ruleexistoption = DBRulesTableConstants.RULES_ID_COL_FULL;
        if (rulesexist) {
            ruleexistoption = ruleexistoption + DBConstants.SQLISNOTNULL;
        } else {
            ruleexistoption = ruleexistoption + DBConstants.SQLISNULL;
        }

        String whereclause = DBProductusageTableConstants.PRODUCTUSAGE_BUYCOUNT_COL +
                " = ?" +
                DBConstants.SQLAND + ruleexistoption +
                DBConstants.SQLAND +
                "(" + DBConstants.CALCULATED_RULEPERIODINDAYS + " / ?) > 0" +
                DBConstants.SQLAND +
                DBProductusageTableConstants.PRODUCTUSAGE_BUYCOUNT_COL + " > ?";

        if (minimumbuycount > 0) {
            --minimumbuycount;
        }
        String[] whereargs = new String[] {
                "0",
                Integer.toString(minimumruleperiodindays),
                Integer.toString(minimumbuycount)
        };
        return db.query(DBProductusageTableConstants.PRODUCTUSAGE_TABLE + joinclauses,
                columns,whereclause,whereargs,null,null,null);

    } 
```

在 SQLite 管理器中创建的基本 SQL 用作构建方法的指南（看起来好得多，恕我直言，比在调试中从游标中提取的 SQL 更好）是：-

*笔记！`0 AS _ID`用于使游标被a使用`CursorAdapter`（即CursorAdapters需要一个名为_ID的列）*

```
SELECT 

0 AS _id,
productusage.productusageproductref,
productusage.productusageaisleref,
productusage.productusageorder,
productusage.productusagecost,
productusage.productusagebuycount,
productusage.productusagefirstbuydate,
productusage.productusagelatestbuydate,
productusage.productusagerulesuggestflag,
productusage.productusagechecklistflag,
productusage.productusagechecklistcount,

/*********************************************************************************************************************************
 Calculate the period in days from between the firstbuydate and the latestbuydate 
*********************************************************************************************************************************/
(productusagelatestbuydate - productusagefirstbuydate) / (1000 * 60 * 60 * 24) AS periodindays,

products.productname,

aisles.aislename,
aisles.aisleorder,
aisles.aisleshopref,

shops.shopname,
shops.shopcity,
shops.shoporder,

rules._id AS rule_id,
rules.rulename,
rules.ruleuses,
rules.ruleprompt,
rules.ruleacton,
rules.ruleperiod,
rules.rulemultiplier

FROM productusage
LEFT JOIN products ON productusageproductref = products._id
LEFT JOIN aisles ON productusageaisleref = aisles._id
LEFT JOIN shops ON aisles.aisleshopref = shops._id
LEFT JOIN rules ON productusageaisleref = rules.ruleaisleref AND productusageproductref = rules.ruleproductref
WHERE productusagebuycount > 0 AND rules._id IS NULL AND (periodindays / 2)  > 0 AND productusage.productusagebuycount > 0 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-05-12T04:23:29.957

```
public HashMap<String, String> get_update_invoice_getdata(String gen) {
    // TODO Auto-generated method stub
    HashMap<String, String> wordList;
    wordList = new HashMap<String, String>();
    Cursor cur_1 = ourDataBase
            .rawQuery(
                    "SELECT * FROM  Invoice i JOIN Client c ON i.Client_id=c.Client_id JOIN TAX t ON i.Tax_id=t.Tax_id JOIN Task it ON i.Task_id=it.Task_id WHERE i.Inv_no=?",
                    new String[] { gen });
    int intext = cur_1.getColumnIndex(C_ORG_NAME);
    int intext5 = cur_1.getColumnIndex(TA_NAME);
    int intext6 = cur_1.getColumnIndex(TA_RATE);
    int intext7 = cur_1.getColumnIndex(TA_QTY);
    int intext8 = cur_1.getColumnIndex(TA_TOTAL);

    if (cur_1.moveToFirst()) {

        do {
            wordList.put("Org_name", cur_1.getString(intext));
            wordList.put("client_id", cur_1.getString(2));
            wordList.put("po_number", cur_1.getString(4));
            wordList.put("date", cur_1.getString(3));
            wordList.put("dis_per", cur_1.getString(7));

            wordList.put("item_name", cur_1.getString(intext5));
            wordList.put("item_rate", cur_1.getString(intext6));
            wordList.put("item_cost", cur_1.getString(intext7));
            wordList.put("item_total", cur_1.getString(intext8));

        } while (cur_1.moveToNext());
    }

    return wordList;
} 
```

# c - 测量短执行时间

> ID：15852353
> 
> 赞同：1
> 
> 时间：2013-04-06T14:55:09.123
> 
> 标签：c

```
time_start();

int op = 0;
for(int i = 1; i <= n; i++)
    op += arr[i]*pow(x, i);

time_stop(); 
```

这是我要测量的代码部分，time_start() 和 time_stop() 函数只是将 clock() 输出保存在某处，然后 execution_time() 返回差值，给出执行时间。

问题是对于 < 50000，输出仅为 0 毫秒或 1 毫秒。这是正确的输出吗？这可以更准确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:03:21.013

您需要在运行时和计时器代码的分辨率之间有足够的“比例”，以获得准确和可测量的结果。最简单的解决方案是在被测试的一小段代码上迭代数百（或数千）次。

但是，任何方法都可能产生缓存效应，因此请确保您测量的是您的实际想法。

# c++ - 如何合并两个priority_queue？

> ID：15852355
> 
> 赞同：3
> 
> 时间：2013-04-06T14:55:16.007
> 
> 标签：c++, c++11

我有两个`priority_queue`这样的`float`：

```
std::priority_queue<float> queue1;
std::priority_queue<float> queue2; 
```

我需要合并它们。但是 STL`merge`算法不允许`priority_queue`直接使用：

```
merge(
  queue1.begin(), queue2.end(),
  queue2.begin(), queue2.end(),
  queue1
); 
```

有没有办法在`priority_queue`不使用辅助数据结构的情况下进行合并？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T14:59:57.293

`priority_queue`是容器适配器，而不是常规的标准容器。特别是，它不提供`begin()`and`end()`成员函数。因此，您必须将元素从一个队列中弹出并将它们推入另一个队列：

```
while (!queue2.empty())
{
    queue1.push(queue2.top());
    queue2.pop();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-20T02:26:46.187

添加到 Andy 的答案中，一项重要的优化是始终将较小优先级队列中的元素合并到较大的优先级队列中。这可以使用`std::swap`：

```
// merge elements into dest from src
template<typename T>
void merge_pq(std::priority_queue<T>& dest, std::priority_queue<T>& src) {
  if (dest.size() < src.size()) {
    std::swap(dest, src);
  }
  while (!src.empty()) {
    dest.push(src.top());
    src.pop();
  }
} 
```

这可以产生真正的差异，尤其是当两个优先级队列的大小非常不同时。

在最近的 Facebook 黑客杯编程竞赛中，有一个问题要求您将优先级队列合并为更大算法的一部分。如果您不进行此优化，您的代码将花费太长时间，并且您将无法正确回答问题。这发生在我身上；我的代码在没有这个优化的情况下运行了 5 多分钟，但在比赛结束后我添加这个优化时不到 10 秒。我没有收到这个问题的功劳。希望如果您正在阅读本文并遇到类似的问题，您会更成功:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-20T05:43:12.807

为了获得更好的性能，您可以从队列中[“窃取”底层容器](https://stackoverflow.com/a/1385520/8414561)，合并它们并从合并的容器中构造另一个，而不是像之前建议的那样逐个处理它们`priority_queue`：

```
// https://stackoverflow.com/a/1385520/8414561
template <class T, class S, class C>
S& Container(std::priority_queue<T, S, C>& q) {
    struct HackedQueue : private std::priority_queue<T, S, C> {
        static S& Container(std::priority_queue<T, S, C>& q) {
            return q.*&HackedQueue::c;
        }
    };
    return HackedQueue::Container(q);
}

int main()
{
    std::priority_queue<int> queue1{std::less<int>{}, {1,2,3,4,5,6,7}};
    std::priority_queue<int> queue2{std::less<int>{}, {10,14,15}};

    auto v1 = std::move(Container(queue1));
    auto v2 = std::move(Container(queue2));

    v1.insert(v1.end(), std::make_move_iterator(v2.begin()), std::make_move_iterator(v2.end()));

    std::priority_queue<int>queue3{std::less<int>{}, std::move(v1)};
    while (!queue3.empty()) {
        std::cout << queue3.top() << std::endl;
        queue3.pop();
    }
} 
```

[活生生的例子](http://coliru.stacked-crooked.com/a/ff4012f050d31f6f)。

# jquery - 框架位置更改时的Jquery执行功能

> ID：15852356
> 
> 赞同：3
> 
> 时间：2013-04-06T14:55:20.440
> 
> 标签：jquery

当页面的框架更改位置时，我试图触发一个功能。我可以得到框架对象，但似乎没有要绑定的事件......应该是这样的

```
$(function(){
    var object = get_mainframe();
    object.locationChange(function(){
           alert('truggered');
        });
}); 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:00:12.673

`onload`每当 iframe 的位置发生变化和加载时，JavaScript 中的函数就会触发：

```
$(function(){
    var object = get_mainframe();
    object.onload = function () {
        alert('truggered');
    };
})' 
```

# ios - 每次我尝试登录我的应用程序时 FBSessionStateClosedLoginFailed

> ID：15852362
> 
> 赞同：5
> 
> 时间：2013-04-06T14:56:01.327
> 
> 标签：ios, objective-c, facebook

嗨，每次我运行它都会返回一个 FBSessionStateClosedLoginFailed 状态。我检查了我的捆绑包名称、URL 设置等，一切都很酷。事实上，脸书知道我已经通过该应用程序进行了身份验证。但是，每当我调用 openWithCompletion 时，我的会话都会失败！

```
 [appDelegate.session openWithCompletionHandler:^(FBSession *session,
                                                     FBSessionState status,
                                                     NSError *error) {
        switch (status) {
            case FBSessionStateOpen:
                NSLog (@"Open");
                break;
            case FBSessionStateClosed:
                NSLog (@"Closed");
                break;
            case FBSessionStateClosedLoginFailed:
                NSLog (@"Failed");
                break;
            default:
                break;
        }

        [self updateView];
    }]; 
```

我在应用程序委托中创建了这个，它也被成功调用，但总是返回 false：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    return [FBSession.activeSession handleOpenURL:url];
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-21T10:17:11.593

您是否在您的应用程序委托中尝试过此操作：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url
{
    return [FBSession.activeSession handleOpenURL:url];
} 
```

我有一个类似的问题在[这里解决了](https://stackoverflow.com/questions/12661104/ios6-facebook-integration-login-always-fbsessionstateclosedloginfailed-never-ope)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T00:25:52.563

好吧，多么奇怪。我采用了 FB SDK 登录示例，使用了我的 FB 应用程序代码和捆绑 ID，它可以正常工作。然后我重新运行了我的，它有效吗？也许FB服务器复制需要一些时间？不知道，但它现在去了....

# php - “使用”和将参数传递给控制器 功能之间的区别

> ID：15852369
> 
> 赞同：8
> 
> 时间：2013-04-06T14:56:24.507
> 
> 标签：php, closures, anonymous-function, silex

我没有具体的问题，只是想加深我对 Silex 以及一些新的 PHP 特性的理解。这是基于 Silex 文档的“使用”页面上的代码示例：

```
$blogPosts = array(
    1 => array(
        'date'      => '2011-03-29',
        'author'    => 'igorw',
        'title'     => 'Using Silex',
        'body'      => '...',    );

$app->get('/blog/{id}', function (Silex\Application $app, $id) use ($blogPosts) {
    //do stuff
} 
```

**问题**

*   `$app`将and`$id`作为**参数**传递给函数和**使用**-ing`$blogPosts`变量之间有什么区别？

*   也可以`$blogPosts`作为**参数**传递给函数吗？

*   另外，我更常看到`use ($app)`. **使用**-ing the`$app`和传递它是一个**参数**有什么区别？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T15:11:22.807

这与 silex 无关，与“一些新的 PHP 特性”有关。您正在创建一个匿名函数（也称为闭包），可多次使用不同的`$app`和`$id`值，但只有相同的`$blogPosts`值。

```
<?php
$a = "a";
$b = "b";
$c = function ($d) use ($b) {
    echo $d . "." . $b . PHP_EOL;
};
$b = "c";
$e = function ($d) use ($b) {
    echo $d . "." . $b . PHP_EOL;
};

$c($a); // prints a.b, and not a.c
$e($a); // prints a.c 
```

在这里，我正在用 $b 构建一个函数，一旦它被构建，我将它与不必以与函数参数命名相同的方式命名的变量一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-06T20:57:38.290

也许这使它更透明

```
<?php
$a = "a1";
$b = "b1";
$f = function ($x) use ($b) {
    echo $x . $b;
};
$f($a); // prints a1b1

// now let's change values of $a and $b
$a = "a2";
$b = "b2"; //--> won't be used as $b was 'b1' when declaring the function.
$f($a); // prints a2b1
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:39:12.257

使用允许将变量从父作用域导入闭包作用域。

它将允许函数 get() 使用从父范围导入的适当参数 $blogPosts 调用您的闭包。

# android - 一个反向的无限列表视图

> ID：15852370
> 
> 赞同：2
> 
> 时间：2013-04-06T14:56:34.333
> 
> 标签：android, commonsware-cwac

我正在尝试使用 Commonsware Endless Adapter ( [https://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless) ) 做一个无尽的列表视图，默认情况下工作正常。

我想做的是一个基本的聊天应用程序。新项目应该出现在最后，并且当用户滚动到顶部时，无限适配器应该可以加载聊天历史记录。

这本身并不难做到。如果 ArrayAdapter 包含位于位置 0 的最新数据项，则只需`android:stackFromBottom`在 ListView 的 XML 声明中使用会将列表的开头放在末尾。

为确保“加载更多”指示符位于顶部，我覆盖了`getItem`等`getView`，为它提供了相反的位置 ( `count-1-position`)。

**我的问题：**当 EndlessAdapter 在列表末尾添加新数据时，“加载更多”指示器仍然可见，导致它无休止地获取更多数据，直到没有更多数据可供获取。预计它会加载一批，然后用户需要向下滚动（此处：向上）以加载更多元素。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:06:21.330

就个人而言，我会考虑在这种情况下使用下拉刷新，而不是`EndlessAdapter`.

话虽如此，如果您看到额外的行出现，但挂起的视图仍然存在，那么您的修改`getView()`无法正常工作。出现的其他行将表明其`notifyDataSetChanged()`本身正在运行（否则，这些行将不会显示）。所以，如果挂起的视图仍然显示，那么`getView()`大概是返回挂起的视图（位置 0，我猜）。事实上，我不知道如何让反向`EndlessAdapter`工作，因为第一行应该始终是挂起的视图，并且应该始终加载数据，直到您用完数据（并且，在聊天的情况下，这是可能永远不会这样）。

因此，我再次使用下拉刷新，否则您将不得不切换到关注滚动事件的不同“无尽”方案，而不是仅仅等待显示挂起的视图，如获取更多数据的触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-01T18:30:16.260

不关心 notifyDataSetChanged() 帮助。我实现了一个适配器来返回 Integer.MAX_VALUE 作为元素的计数，尤其是计算缓存中的索引。

这是一些片段：

```
 <ListView
        android:id="@+id/logContainer"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:stackFromBottom="true" />

......

    logContainer.setOnScrollListener(new OnScrollListener() {
        @Override
        public void onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) {

            if ((logAdapter.getCachedCount() - (Integer.MAX_VALUE - firstVisibleItem)) <= LINES_TO_TRIGGER_PRELOAD && !logAdapter.isPreloading()) {
                logAdapter.preloadAtBackground();
            }
        }

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {}
    });

class LogAdapter extends BaseAdapter {

    private ArrayList<String> logList = new ArrayList<String>();

    @Override
    public int getCount() {
        return Integer.MAX_VALUE;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView logLineView = new TextView(LogViewDialog.this);
        int idx = logList.size() - (Integer.MAX_VALUE - position);
        logLineView.setText(logList.get(idx));
        return logLineView;
    }

    ......... 
```

# rest - 如何在客户端模拟 REST 服务响应？

> ID：15852374
> 
> 赞同：0
> 
> 时间：2013-04-06T14:56:59.040
> 
> 标签：rest, junit, mocking, resteasy

我想在我的 JUnit 测试中使用来自预定义 xml 文件中内容的响应主体来模拟 RESTEasy 客户端响应。考虑以下 Person 服务客户端 API 和 Person 实体：

```
package my.company.com;

import java.net.URI;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlRootElement;

import org.apache.http.auth.AuthScope;
import org.apache.http.auth.Credentials;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.CookieStore;
import org.apache.http.client.protocol.ClientContext;
import org.apache.http.impl.client.BasicCookieStore;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.protocol.BasicHttpContext;
import org.apache.http.protocol.HttpContext;
import org.jboss.resteasy.client.ClientRequest;
import org.jboss.resteasy.client.ClientResponse;
import org.jboss.resteasy.client.core.executors.ApacheHttpClient4Executor;

public class PersonServiceClient {
    private final DefaultHttpClient httpClient;

public PersonServiceClient(String username, String password) {
    Credentials credentials = new UsernamePasswordCredentials(username, password);
    httpClient = new DefaultHttpClient();
    httpClient.getCredentialsProvider().setCredentials(AuthScope.ANY, credentials);
}

public Person[] getPersons() throws Exception
{
    URI url = new URI("http://www.mycompany.com/persons/");
    Person[] persons = getByRest(url, Person[].class);
    return persons;
}

private <T> T getByRest(URI url, Class<T> returnType) throws Exception {
    ClientRequest client = createClientRequest(url.toString());
    ClientResponse<T> response = client.get(returnType);
    return response.getEntity();
}

private ClientRequest createClientRequest(String url) {
    // Storing cookie to avoid creating new client for every call
    CookieStore cookieStore = new BasicCookieStore();
    HttpContext httpContext = new BasicHttpContext();
    httpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);
    ApacheHttpClient4Executor clientExecutor = new ApacheHttpClient4Executor(httpClient, httpContext);

    ClientRequest clientRequest = new ClientRequest(url, clientExecutor);
    return clientRequest;
}

@XmlRootElement(name = "resource")
@XmlAccessorType(XmlAccessType.FIELD)
public class Person {
    private String type;
    private String name;
    private String addres;
    private String phone;

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type= type;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getAddres() {
        return addres;
    }

    public void setAddres(String addres) {
        this.addres = addres;
    }

    public String getPhone() {
        return phone;
    }

    public void setPhone(String phone) {
        this.phone = phone;
    }

    public Person() {
    }
}
} 
```

以及 response-test1.xml 的内容：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<collection>
    <resource>
        <type>Peson</type>
        <name>Christopher Monroe</name>
        <addres>Wall Street 2</addres>
        <phone>12345678</<phone>
    </resource>
    <resource>
        <type>Person</type>
        <name>John Dee</name>
        <addres>Down town 2</addres>
        <phone>2997562123</phone>
    </resource>
</collection> 
```

如何使用上面的 response-test.xml 文件中的内容模拟下面的 JUnit 测试中的响应主体？

```
@Test
public void testGetPersons() throws Exception{
    PersonServiceClient client = new PersonServiceClient("joe", "doe");
    Person[] persons = client.getPersons();
} 
```

我尝试按照这篇文章中的示例[进行操作。RESTEasy 是否有客户端模拟框架？](https://stackoverflow.com/questions/13631692/is-there-a-client-side-mock-framework-for-resteasy)但它并没有准确显示如何选择响应正文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:47:19.973

我建议不要模拟 RESTEasy 客户端，而是使用 WireMock 模拟服务器（免责声明 - 我写的）： [http ://wiremock.org/](http://wiremock.org)

它可以通过 JUnit 中的流畅 Java API 进行配置，并运行嵌入式 Web 服务器，该服务器提供存根响应并允许您验证从应用程序发送的请求。

我在这里更详细地写了关于不模拟 HTTP 客户端的理由： [介绍 WireMock](http://zenslapped.wordpress.com/2012/08/18/introducing-wiremock-an-http-service-stubbing-library/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T13:43:28.343

考虑使用工厂创建`ClientRequest`然后模拟工厂以返回模拟的`ClientRequest`.

# google-maps-api-3 - Google Maps API fitBounds 未正确设置缩放

> ID：15852378
> 
> 赞同：0
> 
> 时间：2013-04-06T14:57:20.920
> 
> 标签：google-maps-api-3, fitbounds

我有一个问题，我认为 fitBounds 调用没有正确设置缩放级别。我已经设法在这里重现了我的测试用例[http://tom.haddons.net/map.html](http://tom.haddons.net/map.html) - 基本上四个外点是我设置的边界，如果你加载页面，然后放大一级，它们'都仍然可见。那么为什么谷歌地图不设置缩放级别呢？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:53:03.237

我通过执行以下操作设法解决了这个问题：

```
 var minlatminlong = new google.maps.LatLng({{ min_latitude }}, {{ min_longitude }});
  var minlatmaxlong = new google.maps.LatLng({{ min_latitude }}, {{ max_longitude }});
  var maxlatminlong = new google.maps.LatLng({{ max_latitude }}, {{ min_longitude }});
  var maxlatmaxlong = new google.maps.LatLng({{ max_latitude }}, {{ max_longitude }});

  zoomChangeBoundsListener = google.maps.event.addListener(map, 'bounds_changed', function(){
      var bounds = this.getBounds();
      if ((bounds.getSouthWest().lng() > {{ min_longitude }}) || (bounds.getNorthEast().lng() < {{ max_longitude }}) || (bounds.getSouthWest().lat() > {{ min_latitude }}) || (bounds.getNorthEast().lat() < {{ max_latitude }})) {
          this.setZoom(this.getZoom() - 1);
      } else {
          google.maps.event.removeListener(zoomChangeBoundsListener);
      }
  }); 
```

请注意，包含在“{{”和“}}”中的任何内容都是我传递给 html 模板的变量。

# django - 在 django 模板中列出类似参数。可能吗？

> ID：15852381
> 
> 赞同：0
> 
> 时间：2013-04-06T14:57:32.210
> 
> 标签：django, google-app-engine, templates

有没有可能向这个函数发送一个列表或一个像参数一样的元组：

self.response.out.write(template.render(self.path, sentList))

我是新手，听说您只能发送字典。这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:49:57.447

您只能传递一个字典，但该字典中的项目可以是列表：

```
self.response.out.write(template.render(self.path, {'numbers': [1,2,3,4,5,6]})) 
```

然后您可以在您的模板中访问`{{ numbers}}`它，并使用

```
{% for number in numbers%}{{ number}}{% endfor %} 
```

# objective-c - 如何在目标 c 中编写阶乘

> ID：15852384
> 
> 赞同：-6
> 
> 时间：2013-04-06T14:57:43.100
> 
> 标签：objective-c, loops, factorial

我一直在阅读一本编程书，它要我编写一个程序，列出前 10 个阶乘数字的表格。过去 45 分钟我一直在尝试，但无法提出解决方案。请帮忙！我很确定该程序涉及使用循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:21:29.417

计算阶乘的最简单方法是使用递归函数或简单循环，如下所示。我将由您来决定如何在表格中列出信息，因为有很多方法可以给猫剥皮。

头文件函数声明：

```
-(int)factorialRecursive:(int)operand;
-(int)factorialLoop:(int)operand; 
```

实现文件函数声明：

```
-(int)factorialRecursive:(int)operand
{
    if( operand == 1 || operand == 0) {
        return(1);
    } else if( operand < 0 ) {
        return(-1);
    }

    return( operand * [self factorialRecursive:operand-1] );
}

-(int)factorialLoop:(int)operand
{

    if( operand == 1 || operand == 0) {
        return(1);
    } else if( operand < 0 ) {
        return(-1);
    }

    int factorial = 1;
    for(int i = operand; i > 1; i-- ) {
        factorial *= i;
    }

    return( factorial );

} 
```

样品电话：

```
int factNumber = 10;
NSLog(@"%d! = %d",factNumber,[self factorialRecursive:factNumber]);
NSLog(@"%d! = %d",factNumber,[self factorialLoop:factNumber]); 
```

# node.js - 节点 - 防止子进程进入父目录

> ID：15852387
> 
> 赞同：1
> 
> 时间：2013-04-06T14:57:59.810
> 
> 标签：node.js, directory, cd, child-process

我正在从我的节点服务器生成一个进程，即在`/tmp/running/username`（它是用户上传的节点进程）

我如何防止它读取（或知道存在）除 之外的任何东西`/tmp/running/username`？

我可以以任何需要的方式生成该过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T05:21:38.350

您可以将该进程作为 的参数生成`chroot`，这将更改您的进程的根目录：

```
spawn('chroot', ['/tmp/running/username', 'yourprocess', 'arg1', ...]); 
```

另一种方法是使用[node-posix](https://github.com/melor/node-posix#posixchrootpath)`chroot`模块中的函数（但为了防止生成外部程序的 Node 进程也被 chroot，您可能需要先 fork 并从子进程调用 chroot）。

# php - 无法通过 php 连接到 last.fm api

> ID：15852390
> 
> 赞同：1
> 
> 时间：2013-04-06T14:58:21.660
> 
> 标签：php, api, last.fm

我正在尝试使用从[https://github.com/matto1990/PHP-Last.fm-API](https://github.com/matto1990/PHP-Last.fm-API)下载的包通过 php 连接到 Last.fm api 。这是我的代码：

```
 public function getTopArtists($methodVars) {
    // Check for required variables
    if ( !empty($methodVars['user']) ) {
        $vars = array(
            'method' => 'user.gettopartists',
            'api_key' => $this->auth->apiKey
        );
        $vars = array_merge($vars, $methodVars);

        if ( $call = $this->apiGetCall($vars) ) {
            if ( count($call->topartists->artist) > 0 ) {
                $i = 0;
                foreach ( $call->topartists->artist as $artist ) {
                    $topartists[$i]['name'] = (string) $artist->name;
                    $topartists[$i]['rank'] = (string) $artist['rank'];
                    $topartists[$i]['playcount'] = (string) $artist->playcount;
                    $topartists[$i]['mbid'] = (string) $artist->mbid;
                    $topartists[$i]['url'] = (string) $artist->url;
                    $topartists[$i]['streamable'] = (string) $artist->streamable;
                    $topartists[$i]['images']['small'] = (string) $artist->image[0];
                    $topartists[$i]['images']['medium'] = (string) $artist->image[1];
                    $topartists[$i]['images']['large'] = (string) $artist->image[2];
                    $i++;
                }

                return $topartists;
            }
            else {
                $this->handleError(90, 'This user has no top artists');
                return FALSE;
            }
        }
        else {
            return FALSE;
        }
    }
    else {
        // Give a 91 error if incorrect variables are used
        $this->handleError(91, 'You must include artist variable in the call for this method');
        return FALSE;
    }
} 
```

但是当我尝试执行相同的操作时，我收到一条消息：错误 99 - 无法建立连接，因为目标机器主动拒绝了它。

# javascript - 从页面重定向到 dojo 视图

> ID：15852398
> 
> 赞同：1
> 
> 时间：2013-04-06T14:59:09.037
> 
> 标签：javascript, html, dojo, ibm-mobilefirst

如何通过单击简单按钮从工作灯中的页面 html 重定向到 DOJO 视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T08:40:24.747

如果您要显示的 Dojo 视图是在同一个 HTML 页面中定义的，您只需获取对 View 小部件的引用并调用它的 show() 函数，如下所示：

```
require(["dijit/registry"], function(registry){
    registry.byId("myDojoView").show();
}); 
```

# perl - 美元的变化？在 perl 中调用 close 之后

> ID：15852400
> 
> 赞同：1
> 
> 时间：2013-04-06T14:59:18.213
> 
> 标签：perl, pipe

以下是代码

```
use strict;  
use warnings;

my $cmd = "ls";  
my $pid = open(INPUT,"$cmd 2>&1 |");  
print "PID = [$pid] [$?]\n";  
if (!defined($pid)) {  
    print "PID not defined\n";  
} else {  
    print "BEFORE CLOSING exit code is [$?]\n";  
}  
close INPUT;  
print "AFTER CLOSING [$?]\n"; 
```

输出如下：

```
PID = [32300] [0]  
BEFORE CLOSING exit code is [0]  
AFTER CLOSING [13] 
```

为什么是美元的价值？调用 close() 后发生变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:18:43.177

根据[perl close](http://perldoc.perl.org/functions/close.html)的文档：

...关闭管道还等待在管道上执行的进程退出 - 如果您希望之后查看管道的输出 - 并隐式将该命令的退出状态值放入`$?`and `${^CHILD_ERROR_NATIVE}`。...

所以在你的例子中，`$?`包含命令 ls 的退出状态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:33:46.430

[`perlvar`](http://perldoc.perl.org/perlvar.html)说`$?`是：

> 最后一个管道关闭、反引号 (`` ) 命令、成功调用 wait() 或 waitpid() 或来自 system() 运算符返回的状态。

很明显，它必须反映管道关闭的状态。在任何这些操作之前，它的内容是没有意义的。

# jquery - 如何在每个 html 页面中重用 html 代码？

> ID：15852401
> 
> 赞同：12
> 
> 时间：2013-04-06T14:59:21.943
> 
> 标签：jquery, html, css

假设我的代码如下：

```
<!DOCTYPE HTML>
<html>
<head>
<style>
#overlay_form{
    position: absolute;
    border: 5px solid gray;
    padding: 10px;
    background: white;
    width: 270px;
    height: 190px;
}
#pop{
    display: block;
    border: 1px solid gray;
    width: 65px;
    text-align: center;
    padding: 6px;
    border-radius: 5px;
    text-decoration: none;
    margin: 0 auto;
}
</style>
<script src="jquery.js"></script>
<script type="text/javascript">

$(document).ready(function(){
    //open popup
    $("#pop").click(function(){
        $("#overlay_form").fadeIn(1000);
        positionPopup();
    });

    //close popup
    $("#close").click(function(){
        $("#overlay_form").fadeOut(500);
    });
});

//position the popup at the center of the page
function positionPopup(){
    if(!$("#overlay_form").is(':visible')){
        return;
    }
    $("#overlay_form").css({
        left: ($(window).width() - $('#overlay_form').width()) / 2,
        top: ($(window).width() - $('#overlay_form').width()) / 7,
        position:'absolute'
    });
}

//maintain the popup at center of the page when browser resized
$(window).bind('resize',positionPopup);

</script>
</head>
<body>

<a href="#" id="pop" >PopUp</a>
<br />
<form id="overlay_form" style="display:none">
<h2> Put your contents here..</h2>
<label>Username: </label><input type="text" name="username" /><br /><br />
<label>Password: </label><input type="text" name="password" /><br /><br />
<input type="button" value="Login" />
<a href="#" id="close" >Close</a>
</form>

</body>
</html> 
```

这是一个弹出对话框示例。假设我想在我的所有网页（a.html、b.html、c.html 等）中使用此对话框，使上述代码可重用的最佳和最简单的方法是什么？因为我认为将“overlay_form”复制粘贴到每个 html 页面中是不合理的。

我还处于 Javascript 的初级阶段，所以为此创建一个 jQuery 插件对我来说太难了。这就是为什么我想寻求其他方法来做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-06T15:05:28.187

您可以将代码放在不同的文件中并使用[http://api.jquery.com/load/](http://api.jquery.com/load/)`.html`加载它`.load()`

```
$('#targetid').load('somewhere/a.html'); // loads the .html in the #targetid 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T15:02:51.543

如果您想多次重用代码，最佳实践是将所有 jQuery 代码放入外部`.js`文件，将所有 CSS 放入外部样式表，然后从每个页面引用这些文件。

例如对于 CSS，在一个名为的文件中`style.css`：

```
<link rel="stylesheet" type="text/css" href="style.css"> 
```

和一个名为的文件中的jQuery `jQueryFunctions.js`：

```
<script type="text/javascript" src="jQueryFunctions.js"></script> 
```

关于在不同页面上包含相同的 HTML 代码，我能想到的最简单的方法之一是使用 PHP[的 include()](http://us2.php.net/manual/en/function.include.php)函数。[这是一个非常简单的单页教程](http://www.inmotionhosting.com/support/edu/website-design/using-php-and-mysql/using-php-include-function)，用于在使用它的多个页面上重用 HTML 表单。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T16:08:24.253

将所有可重用代码放在一个 html 文档中，并使用以下 php 代码将其调用到页面：

```
<?php include("example.html") ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T01:15:39.113

[适度的 HTML](https://github.com/goalzen/modest)可以做到这一点。

它看起来像这样：

**main.xhtml**

```
<?xml version='1.0' encoding='UTF-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <include>overlayForm</include>
  </head>
  <body>
    <overlayForm/>
  </body>
</html> 
```

**覆盖表单.xml**

```
<form style="display:none">
  <h2> Put your contents here..</h2>
  <label>Username: </label><input type="text" name="username" /><br /><br />
  <label>Password: </label><input type="text" name="password" /><br /><br />
  <input type="button" value="Login" />
  <a href="#" id="close" >Close</a>
</form> 
```

# asp.net-mvc-3 - 压缩pdf文件使其变大

> ID：15852405
> 
> 赞同：0
> 
> 时间：2013-04-06T14:59:34.267
> 
> 标签：asp.net-mvc-3, gzipstream

我压缩上传`.pdf`的文件并将它们保存到服务器的文件系统。一切正常，但文件变大了，从 30kb 到 48kb。我可能做错了什么？这是我压缩上传文件的代码部分：

```
FileStream sourceFile = System.IO.File.OpenRead(filePath);
FileStream destFile = System.IO.File.Create(zipPath);
GZipStream compStream = new GZipStream(destFile, CompressionMode.Compress);

try
{
    int theByte = sourceFile.ReadByte();
    while (theByte != -1)
    {
        compStream.WriteByte((byte)theByte);
        theByte = sourceFile.ReadByte();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:11:32.313

我想问题出`GZipLib`在这里。我`DotNetZip`改用了，文件现在按预期变小了。可以在[这里](http://dotnetzip.codeplex.com/)下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T09:22:09.443

System.IO.Compression..::.DeflateStream 和 System.IO.Compression..::.GZipStream 类的压缩算法得到了改进，因此已经压缩的数据不再膨胀。这导致更好的压缩比。此外，已删除压缩流的 4 GB 大小限制。

它已在 .NET 4 中修复。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-07T13:07:14.770

> 我可能做错了什么？

PDF 文件标准已经提供了不同部分的压缩。所以你得到的可能是一个已经压缩的文件。您知道当您尝试压缩压缩文件时会发生什么吗？这就像你试图压缩一个 ZIP 文件一样：有点无用的努力。

# rebol - rebol 通过插入符号位置获取区域中的线

> ID：15852406
> 
> 赞同：4
> 
> 时间：2013-04-06T14:59:36.660
> 
> 标签：rebol

如何在 carret 所在的区域获得线路？例如，通过将插入符号放在 0816 行（该行的任何位置），我如何获得“0816 LEANYER NT DARWIN DELIVERY CENTRE”行？谢谢

```
rebol []

sample-data: [
"0810 TIWI NT DARWIN DELIVERY CENTRE"
"0811 WAGAMAN NT DARWIN DELIVERY CENTRE"
"0812 WANGURI NT DARWIN DELIVERY CENTRE"
"0813 CASUARINA NT PO Boxes CASUARINA"
"0814 ANULA NT DARWIN DELIVERY CENTRE"
"0815 KARAMA NT DARWIN DELIVERY CENTRE"
"0816 LEANYER NT DARWIN DELIVERY CENTRE"
"0817 MALAK NT DARWIN DELIVERY CENTRE"
"0818 MARRARA NT DARWIN DELIVERY CENTRE"
"0819 SANDERSON NT DARWIN DELIVERY CENTRE"
"0820 WULAGI NT DARWIN DELIVERY CENTRE"
"0821 SANDERSON NT PO Boxes SANDERSON"
"0822 NIGHTCLIFF NT PO Boxes NIGHTCLIFF"
"0823 NIGHTCLIFF NT PO Boxes NIGHTCLIFF"
"0824 NIGHTCLIFF NT PO Boxes NIGHTCLIFF"
"0825 NIGHTCLIFF NT PO Boxes NIGHTCLIFF"
]

gui: layout [
b1: backcolor yellow
style fld field 300
across
c1: crit1: fld "hello"
return
ab: area 790x300 font-size 18 wrap []
return

button "Start" [       
        for counter 1 16 1 [ 
         append ab/text reduce [sample-data/(counter) newline]
         ]
         show ab
         ]

button "Quit" [quit]
]
view gui 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T10:30:27.950

当您单击文本或区域面时，文本的索引将放置到系统/视图/插入符号中。因此，一旦光标在您的区域面上可见，您就可以抓住这个插入符号索引，然后计算它在哪一行。

但是，除非您希望用户编辑区域面，否则我会认为使用列表面会更容易使用。

这是一些工作代码 - 添加此按钮

```
button "Find" [
    use [ before cnt ][
        if all [ 
            system/view/caret 
            find ab/text system/view/caret
            before: copy/part ab/text find ab/text system/view/caret
        ][
            parse/all before [ (cnt: 1 ) some [ thru newline ( cnt: cnt + 1 ) ]]
            alert pick sample-data cnt  
        ]
    ]
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T11:43:13.607

所以这是你问的版本；

```
button "Find" [
    use [ before cnt ][
        if start: system/view/caret [
            ;find the previous newline char (if no this is the first line)
            start: either found? st: find/reverse/tail start newline [st] [head start]
            end: either found? st: find start newline [st] [tail start]
            probe copy/part start end
        ]
    ]
] 
```

请接受格雷厄姆的回答，我只是扩展了他的版本。

# php - PHP：imdb 刮板海报

> ID：15852409
> 
> 赞同：0
> 
> 时间：2013-04-06T14:59:47.717
> 
> 标签：php, scraper

我有一个来自另一个站点的 iMDb-Scraper。它工作得很好，现在 iMDb 改变了它的 html 输出，正则表达式不再找到海报。我是正则表达式的菜鸟，所以也许有人可以帮助我

这是行

```
$arr['poster'] = $this->match('/img_primary">.*?<img src="(.*?)".*?<\/td>/ms', $html, 1); 
```

和功能（也许不感兴趣）

```
function match_all($regex, $str, $i = 0) {
    if(preg_match_all($regex, $str, $matches) === false)
        return false;
    else
        return $matches[$i]; 
```

这是来自 iMDb 的特定 HTML 输出

```
<td rowspan="2" id="img_primary">
<div class="image">
<a href="/media/rm3465715968/tt1905041?ref_=tt_ov_i" > 
<img height="317"
     width="214"
     alt="Fast and the Furious 6 (2013) Poster"
     title="Fast and the Furious 6 (2013) Poster"
     src="http://ia.media-imdb.com/images/M/MV5BMTM3NTg2NDQzOF5BMl5BanBnXkFtZTcwNjc2NzQzOQ@@._V1_SX214_.jpg"
    itemprop="image" />
        </a>
</div></td> 
```

有人可以更改我找回 jpg 的正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:07:14.577

如果你改变它怎么办

```
'/img_primary">.*?<img.*?src="(.*?)".*?<\/td>/ms' 
```

这对我有用：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors',1);

$regexp = '/img_primary">.*?<img.*?src="(.*?)".*?<\/td>/ms';

$string = file_get_contents('test.html');

$matches = array();
preg_match_all($regexp,$string,$matches);
var_dump($matches); 
```

# java - 队列和迭代问题

> ID：15852410
> 
> 赞同：-4
> 
> 时间：2013-04-06T14:59:54.680
> 
> 标签：java, loops, queue, iteration

谁能帮我解决这个问题？我不知道如何解决它，甚至不知道如何开始。

下面的代码段是一个从 1 到 5 的计数控制循环。在每次迭代中，循环计数器要么被打印，要么被放入队列中，具体取决于方法 random（假设 random 随机返回 true 或 false ）。

在循环结束时，队列中的元素被删除并打印。由于队列的逻辑属性，此代码段无法打印循环计数器值的某些序列。您将获得一个输出，并要求您确定代码段是否可以生成输出。

```
for(count = 1; count <= 5; count++) {
   if(random())
      system.out.println(count);
   else 
      queue.enqueue(count);  
}
while (!queue.isEmpty())
{
   number = queue.dequeue();
   system.out.println(number);
} 
```

1.  以下是可能的： 1 2 3 4 5
    真、假或信息不足？

2.  以下是可能的： 1 3 5 4 2
    真、假或信息不足？

3.  以下是可能的： 1 3 5 2 4
    真、假或信息不足？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:03:03.153

> 我不知道如何解决它，甚至不知道如何开始。

以下是关于如何开始的建议：

使用笔和纸，模拟程序的多次运行（随机选择两个分支之一，而不是每次`random()`调用），看看是否发现任何规律。即使您不这样做，代码中也只有 32 条不同的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:04:13.210

这令人困惑。查看控制台，如果 random() 为真，我将打印出计数。否则我会把它排入队列。然后我将在最后打印出队列，在不知道实际顺序的情况下打印出包含 1-5 在内的每个数字。让队列中的 println 看起来像这样会更有用： System.out.println("Queue " + number);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:06:56.100

**一种。** *真的*。这是`random()`返回*true* 5 次的情况（这将以 0.03125 的概率发生）

**湾。**让我们假设这是*真的*：

**可能的情况：**

当`i = 1` `random()`返回*true*所以它打印 1。

然后，为了使**b**如我们假设的那样为真，`i = 2`它必须`random()`返回*false*（否则程序将打印 1 与我们的假设相矛盾）。

因此，我们将使用 else 语句并入队 1。

对于`i = 3`.

现在我们要打印 4，假设`random()`返回*true*。

所以，在队列中我们有： 2 3 5

.. 继续这样想，你就会知道答案。

解决这个问题的关键是假设：

**无论何时，您都可以假设它`random()`是真/假。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T15:16:17.090

您的循环从 1 变为 5。但是，任何数量的这些都可以放入队列并在最后打印。

因此，存在三种明确的情况：

1.  所有条目都已打印（没有排队）。您将获得 12345。
2.  所有条目都排队。您将再次获得 12345。
3.  打印了一些条目 - 一些条目已排队。

在情况 3 中，显然您将得到**两个递增序列**，其中**第一个序列中缺少的数字出现在第二个序列中**。

所以，现在你可以看到会发生什么，我建议你开始考虑如何识别这些。

# database - 如何检查数据库中的现有电子邮件但不包括已登录客户的电子邮件？

> ID：15852416
> 
> 赞同：0
> 
> 时间：2013-04-06T15:00:34.573
> 
> 标签：database, vb.net, visual-studio-2010, ms-access

如何检查电子邮件是否在数据库中但不包括登录用户的电子邮件？我在注册以检查数据库中的电子邮件时在我的项目中使用此代码，它工作正常......但我想提供更新注册客户的电子邮件的选项，从而排除计算他自己的电子邮件。当访问我的个人资料页面（客户可以更新他的数据的页面）时，我正在提取所有信息并将其写入文本框中，因此即使他只更新了他的姓名，其余所有信息也会被相同的数据覆盖。这是适用于所有电子邮件的代码：

```
 Function GetEmail() As Boolean
    Dim EmailOk As Boolean
    Dim CustomerId As Integer = 0

    Try
        If IsNothing(Session("UserName")) Or Session("UserName").ToString() = "" Then
            Response.Redirect("../Login.aspx")
        Else
            CustomerId = Convert.ToInt32(Session("CustomerID"))
        End If
    Catch ex As Exception
        Response.Redirect("../Login.aspx")
    End Try

    'declares an instance of the database object allowing us to get the data from the table

    Dim tblCustomer As New DatabaseTable("Members.mdb", "select Email from tblCustomer", "#PN", "#PW")
    'declaring variables for loop
    Dim EmailNumber As Integer = 0
    Dim EmailCount As Integer
    Dim Email As String = txtEmail.Text
    Dim Counter As Integer
    'get the number of the emails
    EmailCount = tblCustomer.Count
    'loop thrue each item
    For Counter = 0 To EmailCount - 1
        'adds number to counter, if found message that subscribed
        If Email = tblCustomer.RecordNumber(Counter).Item("EMail") Then
            EmailNumber = EmailNumber + 1
            EmailOk = False
            'if did not find email will message that not subscribed
        ElseIf EmailNumber = 0 Then
            EmailOk = True

        End If
    Next

    Return EmailOk
End Function 
```

>

这是我尝试过的更改，我认为它会起作用，但没有......

```
Dim tblCustomer As New DatabaseTable("Members.mdb", "select Email from tblCustomer where CustomerID <>" + CustomerId.ToString() + " ", "#PN", "#PW") 
```

CustomerID.ToString() 是从会话中写入的登录客户 ID，因此是当前客户 ID 任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:05:17.840

好的，我确实解决了这个问题！我花了一些时间，它不是太专业，但它确实有效！我在登录时将用户的电子邮件存储在会话中。我仍然使用相同的代码来检查电子邮件是否在数据库中，但我只运行检查客户是否更改了文本框中的电子邮件。所以首先我检查文本框中的电子邮件是否 = 会话电子邮件，如果不是一切都很好，因为电子邮件保持不变，并且在注册时验证它是正确的。而且它与我运行验证代码不同。它看起来很乱，所以如果有人仍然对如何做有更好的想法，请告诉我。如您所见，我必须编写相同部分的代码两次，因为有两种可能验证是可以的，但我只能在客户更改电子邮件文本框时运行 GetEmail()。

```
lbltester.Text = Session("UserEmail")
If txtEmail.Text = lbltester.Text Then
Dim myCustomers As New clsCustomer
clsCustomer.Update(txtFirstName.Text.Trim(), txtLastName.Text.Trim(), txtHouseNumber.Text.Trim(), txtStreet.Text.Trim(), txtCity.Text.Trim(), txtCounty.Text.Trim(), txtCountry.Text.Trim(), TxtPostCode.Text.Trim(), txtPhone.Text.Trim(), txtEmail.Text.Trim(), CustomerId)
Dim popupScript As String = "alert('Profile Updated Sucessfully');"
ClientScript.RegisterStartupScript(Page.GetType(), "script", popupScript, True)
Else
Call GetEmail()
     If EmailOk = True Then
     Dim myCustomers As New clsCustomer
     clsCustomer.Update(txtFirstName.Text.Trim(), txtLastName.Text.Trim(), txtHouseNumber.Text.Trim(), txtStreet.Text.Trim(), txtCity.Text.Trim(), txtCounty.Text.Trim(), txtCountry.Text.Trim(), TxtPostCode.Text.Trim(), txtPhone.Text.Trim(), txtEmail.Text.Trim(), CustomerId)
     Session("UserName") = txtFirstName.Text.Trim() + " " + txtLastName.Text.Trim()
      Dim popupScript As String = "alert('Profile Updated Sucessfully');"
      ClientScript.RegisterStartupScript(Page.GetType(), "script", popupScript, True)

        Else

        Dim popupScript As String = "alert('Email already exist in database');"
        ClientScript.RegisterStartupScript(Page.GetType(), "script", popupScript, True)
        txtEmail.Focus()
        End If
     End If 
```

# linux - 编译 OpenGL 程序 GL/glew.h 缺失

> ID：15852417
> 
> 赞同：51
> 
> 时间：2013-04-06T15:00:39.590
> 
> 标签：linux, opengl, glew

我按照[本教程](http://anytimeir.wordpress.com/2012/05/16/installing-opengl-development-environment-in-ubuntu/)的说明将 OpenGL 安装到运行 Linux Mint 的计算机上。我正在尝试编译使用 OpenGL 的程序，但出现编译错误：`fatal error: GL/glew.h: No such file or directory`. 我检查了 /usr/include/GL 文件夹，并且 glew.h 确实丢失了。我不知道为什么它丢失了，因为我执行了命令`sudo apt-get install libglew1.5`并给出了输出：

```
Reading package lists... Done
Building dependency tree       
Reading state information... Done
libglew1.5 is already the newest version.
0 upgraded, 0 newly installed, 0 to remove and 465 not upgraded. 
```

为什么 glew.h 文件丢失？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-06T16:20:10.857

`libglew`只是库，而不是开发文件（头文件）。您需要单独安装它们。基于 Debian 的系统上的包名`libglew-dev` 是`glew-devel`

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-12-13T16:41:30.440

运行以下命令：

```
sudo apt-get install libglew-dev 
```

# macos - Mac OS X 上的 Qt 字体系列和样式

> ID：15852418
> 
> 赞同：2
> 
> 时间：2013-04-06T15:00:41.750
> 
> 标签：macos, qt, fonts

我有一个基于 Qt (PyQt) 在 Mac OS X（和其他平台）上运行的 GUI 应用程序。它允许用户选择字体并具有粗体和斜体选项的复选框。

在更新到新的基于 Cocoa 的 Qt 时，用户发现`QFontComboBox`不再显示不同的字体样式（例如压缩、倾斜、粗体...），而只显示字体系列名称。在碳下，它显示了两者。用户也不能在组合框中输入带有样式的名称。此外，我无法构造将名称传递给构造函数的相同字体`QFont`。

`QFont`似乎对这些缺失的样式一无所知。令人困惑的是，它还有另一种不同的风格概念。看起来`QFontDatabase`有关于样式变体的信息。它还可以根据系列、样式和磅值构建字体。

那么，以下更改是正确的方法吗？

1.  `QFontDatabase`与其使用粗体和斜体按钮，不如使用一个组合框来填充`QFontComboBox`.

2.  将样式存储在保存的文档中（作为文本），而不是粗体或斜体。

所以

*   我可以依靠不同语言的系统上的风格相同吗？我可以将它包含在保存的文档中吗？

*   样式“Bold Italic”是否`QFont`与设置 a 的粗体和斜体属性一样强大`QFont`？

*   如果我想保留粗体和斜体复选框，如何将这些属性转换为正确的样式？我能猜出“粗体”、“斜体”还是“粗体斜体”？

# node.js - 在不重新启动“服务器”的情况下编写 node.js

> ID：15852421
> 
> 赞同：4
> 
> 时间：2013-04-06T15:00:47.927
> 
> 标签：node.js, meteor

我一直在玩 Meteor（您可能知道它是一个 node.js 框架），并且非常喜欢如何启动它，然后让它运行，同时在保存时自动实现代码更新。

有没有办法只运行 node.js 来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:05:01.940

你试过[nodemon](https://github.com/remy/nodemon)吗？它几乎与您正在寻找的相同。

# mongodb - Mongodb 不能在引用的文档上使用点符号？

> ID：15852422
> 
> 赞同：0
> 
> 时间：2013-04-06T15:00:50.960
> 
> 标签：mongodb

Mongodb 的点符号功能非常酷，但我发现它似乎不适用于引用的文档。

所以点符号只能用于嵌入式数组或子文档，对吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:28:54.473

点符号[只能用于](http://docs.mongodb.org/manual/reference/glossary/#term-dot-notation)在单个文档（或[子文档](http://docs.mongodb.org/manual/core/read-operations/#read-operations-subdocuments)）的字段内进行查询。它不能用于引用/查询其他文档。

虽然有时我认为添加它会是一个有趣的特性，但通常很容易创建一个不需要它来实现“可查询性”或性能的替代模式设计。

# java - 在外部 java 方法中调用数据源

> ID：15852423
> 
> 赞同：1
> 
> 时间：2013-04-06T15:00:56.060
> 
> 标签：java

我想将托管 bean 拆分为多个文件，因为源代码重复了多次。

这是我想放入外部文件的外部 Java 方法：

```
public class CalcWeight implements Serializable
{

    // Call the Oracle JDBC Connection driver as service
    @Resource(name = "jdbc/Oracle")
    // Data source
    private DataSource ds;

    public float TotalDCWeightCalc(int dcId) throws SQLException
    {

        float DCWeight = 0;

        if (ds == null)
        {
            throw new SQLException("Can't get data source");
        }

        ........... SQL query

        return DCWeight;
    }
} 
```

我使用此代码调用外部 Java 方法：

```
@ViewScoped
public class DCProfileTabGeneral implements Serializable
{

    // Call the Oracle JDBC Connection driver as service
    @Resource(name = "jdbc/Oracle")
    // Data source
    private DataSource ds;

    // Weight initialization
    private CalcWeight weight;
    // Power initialization
    private CalcPower power;
    // Cooling initialization
    private CalcCooling cooling;

    // Constructor
    public DCProfileTabGeneral()
    {

        // Weight initialization
        weight = new CalcWeight();

    }
    ..........................
    weight.TotalDCWeightCalc(id)
    .....................
} 
```

运行此代码时收到此错误消息：

```
java.sql.SQLException: Can't get data source 
```

我该如何解决这个问题？

# php - 如何将 PHP 表单与 Smarty 集成？

> ID：15852427
> 
> 赞同：2
> 
> 时间：2013-04-06T15:01:32.853
> 
> 标签：php, forms, smarty

我正在尝试将 Web 联系表单添加到使用 Smarty PHP 模板的网站。

我最初的尝试（如下）会产生一个空白网页。

**.tpl 文件**

```
{debug}
{extends file='toxtweet.tpl'}
{block name=body}
    <form action="" method="post">
    {foreach from=$formitems as key=name item=value}
        <label for={$name}>{$value}</label>
        <input type="text" name={$name} size="50"/>
    {/foreach}
    <input type="submit" value="E-mail" />
    </form>
{/block} 
```

**.php 文件**

```
<?php
   include 'base.php';
   include './scripts/recaptchalib.php';
   $formitems = parse_ini_file("formitems.ini");
   $smarty -> assign('formitems',$formitems);
   $smarty -> display("contact.tpl");
 ?> 
```

`base.php`并且`toxtweet.tpl`在所有其他页面上都可以正常工作，所以我认为它们不是问题。`recaptchalib.php`有正确的路径。

如果删除这些`{foreach} ... {/foreach}`行，空白网页将正常显示。如果我使用格式`{foreach $x as $y}`或`{foreach from=$x key=k value=v}`.

调试显示`ini`具有值的文件`formitems`已正确加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T09:39:29.690

从你的 foreach 中删除“as”，它应该可以工作。

# html - 修改和设计裁剪图像

> ID：15852432
> 
> 赞同：0
> 
> 时间：2013-04-06T15:02:12.780
> 
> 标签：html, css, image, crop

我在 html & css 中裁剪了一张图片。当我对`<span>`标签进行编码时，显示的裁剪图像。但我需要知道如何修改它。

我有以下代码：

```
 <style type="text/css">
.design  {
padding-left:25px;
background:url('Flings.png') no-repeat top left;
display: inline-block;
height: 17px;
width: 0px;
margin-left: 550px;
}
</style>
<div style="height: 200px;">
<span class="design" style='font-size: 40px;'></span>
</div> 
```

当我使用 span 标签时，会显示裁剪后的图像。但我想修改它。

例子：

```
<span class="desgin" style='color: red;'></span></h3> 
```

我想给图像本身上色并改变它的大小，我有点卡在这里。

希望你能很好地理解我，我会很高兴得到任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:12:30.830

所以你想缩放然后给图像着色？您可以使用缩放图像，`background-size`但这不是很好的支持。[不幸的是，CSS3 过滤器也没有着色](http://net.tutsplus.com/tutorials/html-css-techniques/say-hello-to-css3-filters/)过滤器。

您应该使用`<img>`so 缩放工作来做到这一点`background-size`，然后在图像顶部使用另一个透明元素来提供色调效果。不幸的是`<img>`，标签不支持伪元素，因此需要使用包装器。

[jsFiddle](http://jsfiddle.net/Tyriar/hk43H/)

**HTML**

```
<div class="red-tint">
    <img src="https://www.google.com.au/images/srpr/logo4w.png" />
</div> 
```

**CSS**

```
img {
    /* scale the image */
    width:200px;
    height:auto;
}

.red-tint {
    position:relative;
    display:inline-block;
}

.red-tint:after {
    background: rgba(255, 0, 0, 0.5);
    display:block;
    content:"";
    position:absolute;
    left:0;
    right:0;
    top:0;
    bottom:0;
    z-index:1;
} 
```

## 更新

啊，你想裁剪，那么这只是使用背景位置的问题。您将需要给出负的左侧和顶部位置，以`background-position`表示距图像左上角的偏移量。例如，这将绘制一个 200x100 的图像块，距离图像左侧 100 像素，从顶部向下 20 像素。

[jsFiddle](http://jsfiddle.net/Tyriar/zQ8Y5/)

```
.design {
    width:200px;
    height:100px;
    background:url(https://www.google.com.au/images/srpr/logo4w.png) no-repeat;
    background-position:-100px -20px;
} 
```

# python - 如何找到计数器的第二个最大值 - Python

> ID：15852436
> 
> 赞同：8
> 
> 时间：2013-04-06T15:02:41.337
> 
> 标签：python, collections, dictionary, counter, multiset

可以这样访问计数器的最大值：

```
c = Counter()
c['foo'] = 124123
c['bar'] = 43
c['foofro'] =5676
c['barbar'] = 234
# This only prints the max key
print max(c), src_sense[max(c)] 
# print the max key of the value
x = max(src_sense.iteritems(), key=operator.itemgetter(1))[0]
print x, src_sense[x] 
```

**如果我想要一个按降序计数的排序计数器怎么办？**

**我如何访问第二个最大值，或者第三个或第 N 个最大值键？**

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-06T15:07:07.263

> 集合的 most_common(self, n=None) 方法.Counter 实例
> 
> 列出 n 个最常见的元素及其从最常见到最少的计数。如果 n 为无，则列出所有元素计数。

```
>>> Counter('abcdeabcdabcaba').most_common(3)
[('a', 5), ('b', 4), ('c', 3)] 
```

所以：

```
>>> c.most_common()
[('foo', 124123), ('foofro', 5676), ('barbar', 234), ('bar', 43)]
>>> c.most_common(2)[-1]
('foofro', 5676) 
```

请注意，这`max(c)`可能不会返回您想要的：迭代 a`Counter`是迭代键，所以`max(c) == max(c.keys()) == 'foofro'`，因为它是字符串排序后的最后一个。你需要做类似的事情

```
>>> max(c, key=c.get)
'foo' 
```

获得具有最大值的 (a) 键。以类似的方式，您可以`most_common`完全放弃并自己进行排序：

```
>>> sorted(c, key=c.get)[-2]
'foofro' 
```

# iphone - pushViewController 不适用于 TabbarController

> ID：15852438
> 
> 赞同：6
> 
> 时间：2013-04-06T15:02:57.130
> 
> 标签：iphone, ios, pushviewcontroller

我有一个使用情节提要的标签栏控制器应用程序。每个选项卡都有一个 UIWebview。如果链接是外部链接（如果它不是我的网站），我想在用户单击 Webview 上的链接时捕获链接我想在不同的 UIViewControl 中打开链接。（就像 popupi Twitter iphone 应用程序那样）

现在; 我得到了用于捕获链接的代码（如果链接是 bing.com，那么它应该打开另一个视图控制器）但我无法打开另一个 UIViewController（在本例中为 PopViewController）。它给了我这个错误：

**'GundemViewController' 没有可见的@interface 声明选择器'pushViewController:animated:'**

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

//CAPTURE USER LINK-CLICK.

NSURL *url = [request URL];

NSString *urlString = [url absoluteString];

/******
 UIWebViewNavigationTypeLinkClicked: When user click on a link in the app it senses the action
 */

if (navigationType == UIWebViewNavigationTypeLinkClicked) {
    if ([urlString hasPrefix:@"http://www.bing.com/"]) {

        PopViewController *popUpView = [[PopViewController alloc] initWithNibName:@"PopupViewController" bundle:nil];

        [self pushViewController:popUpView animated:YES];
        return NO;
    }
}

return YES;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T15:24:03.290

您可以在每个选项卡中嵌入导航控制器，而不是：

```
UITabBarController
    Tab1 View Controller
    Tab2 View Controller
    Tab3 View Controller 
```

你有

```
UITabBarController
    Tab1 Navigation Controller
        Tab1 View Controller
    Tab2 Navigation Controller
        Tab2 View Controller
    Tab3 Navigation Controller
        Tab3 View Controller 
```

等等。您只能调用`-pushViewController:animated:`导航控制器的实例。

在您的应用程序委托中，您可能会初始化每个视图控制器，将它们放入一个数组中，然后将该数组分配给选项卡栏控制器。要添加导航控制器，您还有一个额外的步骤：

```
UIViewController *tab1Controller = [[MyViewController alloc] initWithNibNamed:@"MyViewController" bundle:nil];
UINavigationController *tab1Nav = [[UINavigationController alloc] initWithRootViewController:tab1Controller];

// etc 
```

然后将标签栏控制器的视图控制器数组设置为您创建的导航控制器。

在您的视图控制器中，您将调用它而不是调用`-pushViewController:animated:`on 。`self``self.navigationController`

*编辑：*

如果您不想要导航控制器，可以使用

```
[self presentViewController:popUpView 
                   animated:YES 
                 completion:nil]; 
```

呈现弹出窗口。在弹出窗口中，当用户触摸关闭按钮时，使用

```
[self.presentingViewController dismissViewControllerAnimated:YES completion:nil]; 
```

解雇它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:07:59.440

是什么`GundemViewController`？看看为什么从而不是`self.navigationController`返回`UINavigationController`。一种方法是在推送视图控制器之前设置断点，然后进入`self.navigationController`调用。

# .htaccess - 如何将 www.site.com/index.php/ 重定向到 www.site.com/index.php？

> ID：15852439
> 
> 赞同：1
> 
> 时间：2013-04-06T15:02:57.183
> 
> 标签：.htaccess, mod-rewrite, rewrite

我已经包含一个重定向 url 来将 www.site.com/machines/ 重定向到页面

```
 RewriteRule ([^/\.]+)/$ index.php?task=cat&p_name=$1 [L] 
```

因为客户端想要优化 url 以按名称而不是 id 显示机器
但是在 index.php www.site.com/index.php/ 的情况下，它应该重定向到索引页面。我厌倦了在重写 url 之前使用这个条件

```
 RewriteCond %{REQUEST_URI} !^/index.php/$ [NC] 
```

但这并没有完全重定向到页面 www.site.com/index.php。因为这个，一些css和图像没有正确显示所以我尝试了另一种方法

```
 RewriteCond %{REQUEST_URI} ^/index.php/$ [NC]
 RewriteRule ^index.php/$  index.php? [R=301,L] 
```

在这里它像这样重定向 [http://www.site.com/home/user/public_html/www.site.com/index.php](http://www.site.com/home/user/public_html/www.site.com/index.php) 请帮助我重定向网址谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:19:20.340

您可以在此处摆脱条件并简单地使用：

```
RewriteRule ^index\.php/$ /index.php [L,R=301] 
```

CSS 和图像未显示的问题可能是因为您在 html 中使用了相对 URI。您需要将它们更改为绝对 URI（带有前导斜杠的）或将相对 URI 基础添加到页面标题：

```
<base href="/"> 
```

或任何基础应该是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:40:42.147

我认为您忘记在基本名称之前放置一个斜杠：

```
RewriteRule ^index.php/$ /index.php? [R=301,L] 
```

但是，如果您使用此代码而不是那个代码，它看起来会更好：

```
RewriteCond %{REQUEST_URI} ^/index.php/$ [NC]
RewriteRule ^(.*) /index.php [QSA,R=301,L] 
```

# python - 如何通过 cxfreeze 使用 pyqt4 模块打包 python 程序

> ID：15852440
> 
> 赞同：1
> 
> 时间：2013-04-06T15:02:58.893
> 
> 标签：python, pyqt4

我用PyQt4.QtGui和QtCore写了一个程序，打包成exe，在我的电脑上运行良好，在别人的电脑上运行不了

**错误是这样的：**

```
cx_Freeze: Python error in main script
---------------------------
Traceback (most recent call last):
  File "C:\Python33\lib\site-packages\cx_Freeze\initscripts\Console3.py", line 27, in <module>
  File "baidu.py", line 6, in <module>
  File "C:\Python\32-bit\3.3\lib\importlib\_bootstrap.py", line 1607, in _handle_fromlist
  File "C:\Python\32-bit\3.3\lib\importlib\_bootstrap.py", line 313, in _call_with_frames_removed
  File "C:\Python\32-bit\3.3\lib\importlib\_bootstrap.py", line 1558, in _find_and_load
  File "C:\Python\32-bit\3.3\lib\importlib\_bootstrap.py", line 1525, in _find_and_load_unlocked
  File "ExtensionLoader_PyQt4_QtGui.py", line 11, in <module>
ImportError: DLL load failed: 找不到指定的模块。 
```

**打包的文件是：**

```
├─_bz2.pyd
├─_hashlib.pyd
├─_socket.pyd
├─_ssl.pyd
├─baidu.exe
├─icudt49.dll
├─icuin49.dll
├─icuuc49.dll
├─LIBEAY32.dll
├─libGLESv2.dll
├─lxml.etree.pyd
├─PyQt4.QtCore.pyd
├─PyQt4.QtGui.pyd
├─PyQt4.QtNetwork.pyd
├─python33.dll
├─Qt5Core.dll
├─Qt5Gui.dll
├─Qt5Network.dll
├─Qt5PrintSupport.dll
├─Qt5Widgets.dll
├─sip.pyd
├─SSLEAY32.dll
└─unicodedata.pyd 
```

我只是用“cxfreeze baidu.py --base-name=Win32GUI --target-dir d:\123”来打包的。我想知道我在使用cxfreeze时是否遗漏了一些参数导致这个问题，以及如何将其打包为exe。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T14:30:30.280

`d3dcompiler_43.dll`需要运行 pyqt

# c# - Marshal.GetActiveObject("Word.Application") 中的 MK_E_UNAVAILABLE

> ID：15852441
> 
> 赞同：1
> 
> 时间：2013-04-06T15:03:00.567
> 
> 标签：c#

0x800401E3 (MK_E_UNAVAILABLE) 错误发生在我的情况下，当 UAC（用户帐户控制）未设置为非限制性“从不通知我”时。

`Microsoft.Office.Interop.Word.Application wd = (Microsoft.Office.Interop.Word.Application) System.Runtime.InteropServices.Marshal.GetActiveObject("Word.Application");`

发布和安装项目后运行代码时会抛出错误。相反，在编辑器中调试时，一切都很好。

这是由于安全设置或凭据吗？请问如何正确编写这样的代码？

当然，Win Word 已打开，文档也已打开，并且此代码在 UAC 设置为“从不通知我”的情况下一直运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:09:49.317

将 word as a service 运行是一项令人讨厌的业务，请参见[此处](http://support.microsoft.com/kb/257757?wa=wsignin1.0)。我经历了很多问题使它工作。我让它工作的方式是在单独的进程中运行它，它只启动一次。主程序通过将命令作为字符串发送到进程的标准输入并等待标准输出上的响应来与进程通信。如果响应没有及时分配，则进程被终止并重新启动

# scala - 为什么 Jetty 使用 text/html 内容类型提供 css

> ID：15852443
> 
> 赞同：2
> 
> 时间：2013-04-06T15:03:06.420
> 
> 标签：scala, jetty, embedded-jetty

我在 Scalatra 应用程序中使用嵌入式 Jetty 服务器。问题是它提供`css`具有`text/html`内容类型的文件：

下面是主要方法：

```
package yard.web

import org.eclipse.jetty.server.Server
import org.eclipse.jetty.webapp.WebAppContext
import org.scalatra.servlet.ScalatraListener

object JettyMain {
  def main(args: Array[String]) {
    val server = new Server(9080)
    val context: WebAppContext = new WebAppContext("src/main/webapp", "/")
    context.setServer(server)
    context.setInitParameter(ScalatraListener.LifeCycleKey, "yard.web.ScalatraBootstrap")
    context.addEventListener(new ScalatraListener())
    server.setHandler(context)

    server.start()

    println("Press ENTER to stop server")
    Console.readLine()
    server.stop()
    server.join()
  }
} 
```

该文件位于`src/main/webapp/libs/bootstrap/css/bootstrap.css`，并提供：

```
$ curl --head http://localhost:9080/libs/bootstrap/css/bootstrap.css
HTTP/1.1 200 OK
Content-Type: text/html;charset=UTF-8
Last-Modified: Sat, 06 Apr 2013 14:30:35 GMT
Content-Length: 127247
Accept-Ranges: bytes
Server: Jetty(8.1.10.v20130312) 
```

为什么 Jetty 认为它是一个 html 文件？

* * *

这是`ScalatraBootstrap`完整性类：

```
package yard.web

import org.scalatra.LifeCycle
import javax.servlet.ServletContext
import yard.Settings
import yard.db.Store

class ScalatraBootstrap extends LifeCycle {
  override def init(context: ServletContext) {

    val settings = Settings.default
    val db = Store(settings).db

    context mount (new MainServlet, "/")
  }
} 
```

* * *

*更新*：使用 a`ResourceHandler`会导致 css 以正确的内容类型提供服务。但是，该应用程序不起作用:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T15:31:20.830

CSS 文件通常从`org.eclipse.jetty.servlet.DefaultServlet`.

这是在`etc/webdefault.xml`分发的文件中声明的。

由于您使用的是嵌入式模式，因此您需要通过调用[WebAppContext.setDefaultsDescriptor(String)](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/webapp/WebAppContext.html#setDefaultsDescriptor%28java.lang.String%29)手动提供此文件路径`etc/webdefault.xml`。

最后，mime 类型本身由`DefaultServlet`via[`mime.properties`](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-http/src/main/resources/org/eclipse/jetty/http/mime.properties?id=jetty-8.1.10.v20130312)文件加载，该文件由 Jetty 通过调用`Classloader.getResource("/org/eclipse/jetty/http/mime.properties")`.

注意：该`mime.properties`文件在文件中找到`jetty-http-8.1.10.v20130312.jar`。

# xslt - xslt 和 SOAP 命名空间：如何添加

> ID：15852445
> 
> 赞同：-1
> 
> 时间：2013-04-06T15:03:16.443
> 
> 标签：xslt, soap, xml-namespaces

我有这个基本的 SOAP 响应：

```
<?xml version="1.0" encoding="WINDOWS-1252" standalone="yes"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/">
    <SOAP-ENV:Body xmlns="http://www.xxx.com/dotnet/types/"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
        <a>
            <b>
                   <c>
                    c-value
                   </c>
                       b-value
            </b>
                a-value
        </a>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我只想输出 c 节点的值：c-value。

我不明白为什么这个 xsl 不起作用：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
>
<xsl:output method="xml" encoding="UTF-8" omit-xml-declaration="yes" indent="yes"/>
<xsl:template match="/">
 <xsl:value-of select="//c"/>
</xsl:template>
</xsl:stylesheet> 
```

似乎问题出在名称空间中，`<SOAP-ENV:Body xmlns="http://www.xxx.com/dotnet/types/"` 如果我删除它，它就可以工作。

我想我应该更改 xpath`select="//c"`或在 xls 中的某个位置添加所需的命名空间，但我做错了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:03:16.443

好的，这个链接很有帮助：[How to 'select' from XML with namespaces?](https://stackoverflow.com/questions/284094/how-to-select-from-xml-with-namespaces-with-xslt)

我添加了这样的命名空间：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"
xmlns:xxx="http://www.xxx.com/dotnet/types/"
>
<xsl:output method="xml" encoding="UTF-8" omit-xml-declaration="yes" indent="yes"/>
<xsl:template match="/">
 <xsl:value-of select="//xxx:c"/>
</xsl:template>
</xsl:stylesheet> 
```

首先将 xmlns:xxx 添加到 xlst，然后 XPath 变为 //xxx:c。

用SO写问题，解决问题......

# java - 检测变量变化

> ID：15852448
> 
> 赞同：1
> 
> 时间：2013-04-06T15:03:20.147
> 
> 标签：java

我正在尝试编写一个程序，以在整个程序运行过程中不断检查变量的变化。这是否需要线程中的无限循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:07:12.463

有比定期轮询变量值更好的选择。轮询可能会错过变量更改，即使没有发生任何事情，它也需要计算资源。

您可以将变量包装在包装类中，并仅通过设置器更改它。

如果您使用的是 Eclipse，则可以在值更改时要求调试器停止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:06:27.213

为您的变量使用包装类，例如：

```
class VarWrapper{
    private Object myVar;

    public Object getMyVar() {
        return myVar;
    }
    public void setMyVar(Object myVar) {
        //[1],Here you'll know myVar changed
        this.myVar = myVar;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:07:34.110

```
Class Test{
   private int var;

   public void setVariable(int var){
     this.var = var;
     varChangedCallBack(); 
   }

   public void varChangedCallBack(){
      //Do something on var changed
   }
} 
```

由于上面的变量是私有的，因此只能通过 setter 进行更改。更改后我们调用回调方法，您可以在其中对变量更改做任何您想做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T15:24:53.847

如果您有一个专用线程来检查变量状态，那么应该通过对象上的同步通知唤醒这个等待线程来完成。等待线程将在该对象上同步等待。

如果您没有专用线程，那么这就是观察者模式。[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)

# action - 2013 年 7 月即将发生的变化：无法为同一个 Open Graph 对象创建多个创建操作。解释？

> ID：15852453
> 
> 赞同：0
> 
> 时间：2013-04-06T15:03:38.460
> 
> 标签：action, facebook-opengraph

在他们关于即将发生的重大变化的博客文章中 [http://developers.facebook.com/blog/post/2013/04/03/platform-updates--operation-developer-love/](http://developers.facebook.com/blog/post/2013/04/03/platform-updates--operation-developer-love/)

FB 写道：我们不再允许对同一个 Open Graph 对象进行多个创建操作，如此处所述： [https ://developers.facebook.com/docs/opengraph/creating-object-types/](https://developers.facebook.com/docs/opengraph/creating-object-types/)

我认为这意味着您只能将一种操作类型定义为创建类型，这是合理的，但似乎并非如此。似乎对于每个用户，您只能创建一个动作实例！

在该页面上，他们给出了创建食谱的示例。很公平，但是保持这个例子，如果你允许你的用户创建一个食谱并包含像食谱名称这样的属性呢？在用户创建一个“食物”操作属性设置为“香蕉面包”的菜谱后，他们再也不能创建另一个菜谱（例如一个操作属性设置为“披萨”的菜谱。）我尝试设置“创建”属性并确认我不能创建一个以上的 action 属性实例。我想知道我是不是误会了？是否只是避免标记您的创建操作的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:44:28.097

不，它不像每个用户只能创建一个动作对象对。根据我的理解，文档的意思是说您只能为每个对象定义一个创建类型的操作。例如，从文档中，`recipe`对象有一个，`create action`即`write`，现在配方对象不能有任何其他创建类型的动作，比如可能是`add`可以添加新配方的动作，从而创建配方对象。把它放在一行中：**在与对象相关的所有动作中，只有一个动作应该是创建对象。**

# python - 如何让 cygwin 了解 enthought python？

> ID：15852455
> 
> 赞同：0
> 
> 时间：2013-04-06T15:03:49.770
> 
> 标签：python, cygwin, scipy, enthought

我需要在 cygwin 上使用 scipy，所以我认为让它工作的最快方法是安装 enthought python。但是，我随后意识到我必须让 cygwin 意识到 enthought 才能使用它，例如，以便从 cygwin shell 调用 Python 我得到 enthought python（使用 scipy）而不是 cygwin。

我怎么做？

我猜我的问题很简单，但我只是在学习所有这些，所以请耐心等待:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T17:53:30.653

只需将带有 enthought python 的目录放在路径中带有 Cygwin 的 python 的目录之前。如果两者都在同一个目录中，请使用 ln 创建符号链接，将其存储在另一个目录中，并将其放在路径的较高位置。上一个答案有将其添加到您的路径的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T17:15:52.420

至少从一开始就考虑卸载 cygwin 版本的 Python。以后重新安装很容易。

*   复制您的 Windows 路径。
*   安装 Windows 版本的 Enthought Python。
*   检查新的 Windows 路径。新条目*可能*必须转移到 cygwin 中的 bash shell。（我还没有看到 Enthought。可能有不止一个新路径条目。）但是为了确定，在不更改 bash 路径的情况下进行测试。
*   将新路径条目添加到，嗯，.bashrc，我想。cygwin 下的路径将是一个冒号分隔的字符串。您需要使用 /cygdrive 路径；期望使用这样的条目将 Entought 放入路径中。

    /cygdrive/c/程序文件/Enthought

要真正*做到*这一点，请编辑 .bashrc，并将这两行（或类似的内容）放在最后。

```
PATH=$PATH:/cygdrive/c/Program\ Files/Enthought
export PATH 
```

请注意，反斜杠允许正确解释文件路径中的空格。export 语句保证 bash 调用的程序也将包含该路径。

# java - 生成乳胶源文件

> ID：15852457
> 
> 赞同：1
> 
> 时间：2013-04-06T15:03:57.507
> 
> 标签：java, latex, code-generation

创建从文本文件（具有自己的语法）生成乳胶源文件的“解释器”需要和推荐哪些工具（例如使用java）？

例子：

```
This is a list of items:
* first
* second
* third 
```

应该生成一个可编译的 *.tex 文件，其中包含

```
This is a list of items:
\begin{itemize}
  \item first
  \item second
  \item third
\end{itemize} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T15:39:53.520

您正在尝试开发的东西称为*parser*。开发解析器时首先要做的是确定要解析的文件的[形式语法](http://en.wikipedia.org/wiki/Formal_grammar)（即输入文件必须遵循的语法规则）。形式语法通常用[EBNF](http://en.wikipedia.org/wiki/Formal_grammar)表示。例如，文本文件中包含的项目列表的正式语法可能是：

```
list = { list_element } ;
list_element = *, " ", {" "}, {all_characters} ;
all_characters = ? all visible characters ? ; 
```

如果您要解析的文件的语法是[规则](http://en.wikipedia.org/wiki/Regular_grammar)的（即没有递归），您可以简单地使用正则表达式解析您的文件（尽管它们可能会变得复杂）。

即使您的语法不规则也可以使用的另一个选项是使用*解析器生成器*。解析器生成器采用您的*形式语法*并生成一个程序，该程序能够解析符合您的语法的输入文件，并生成一个表示输入文件的[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，您可以使用它来生成输出文件（最后！）。Java 中最常见的解析器生成器是[javacc](http://en.wikipedia.org/wiki/JavaCC)和[ANTLR](http://en.wikipedia.org/wiki/Antlr)（尽管它们[更多](http://java-source.net/open-source/parser-generators)）。

解析的理论相当复杂，但*解析器生成器*的使用听起来要简单得多。所以具体来说，我的建议是：

1.  确定输入文件的语法并将其写下来
2.  遵循 javacc 教程（请参阅此[SO 帖子](https://stackoverflow.com/questions/1010621/anybody-has-some-links-to-javacc-tutorials)）

你应该能够从你的文本文件中生成 tex 文件。

# c++ - 将一个 std::string 复制到另一个时的段错误？

> ID：15852459
> 
> 赞同：1
> 
> 时间：2013-04-06T15:04:04.737
> 
> 标签：c++, oop, class, scope, segmentation-fault

我有以下课程：

```
class StdinIo : public FileIo{
    public:
             StdinIo();
             ~StdinIo();

             static StdinIo* createObj(const std::string&);
             static bool     checkPath(const std::string&);
    private:
             std::string     tempPath;
             std::string     newPath();
}; 
```

实施1：

```
StdinIo::StdinIo()
        :FileIo(newPath())
{    
}    
std::string StdinIo::newPath(){
        printf("%s Using FileIo\n", __PRETTY_FUNCTION__);
        std::stringstream tempPathStream;

        tempPathStream << tmpnam(NULL) << getpid();

        tempPathStream.flush();
        const char* szTempPath = tempPathStream.str().c_str();

        FILE *fp=fopen(szTempPath,"wb");
        size_t rv=1;
        char buffer[1024*8];
        if(fp){
                while(rv){
                        rv=fread(buffer,1,sizeof(buffer),stdin);
                        fwrite(buffer,1,rv,fp);
                }
                fclose(fp);
        }
        return tempPathStream.str();
} 
```

实施2：

```
StdinIo::StdinIo()
        :FileIo(newPath())
{    
}    
std::string StdinIo::newPath(){
        printf("%s Using FileIo\n", __PRETTY_FUNCTION__);
        std::stringstream tempPathStream;

        tempPathStream << tmpnam(NULL) << getpid();

        tempPathStream.flush();
        tempPath = tempPathStream.str();
        const char* szTempPath = tempPath.c_str();

        FILE *fp=fopen(szTempPath,"wb");
        size_t rv=1;
        char buffer[1024*8];
        if(fp){
                while(rv){
                        rv=fread(buffer,1,sizeof(buffer),stdin);
                        fwrite(buffer,1,rv,fp);
                }
                fclose(fp);
        }
        return tempPath;
  } 
```

根据我对堆栈的了解，实现 1 应该给出 segFault 而实现 2 不应该。但相反的情况正在发生。我无法弄清楚为什么。

我需要 tempPath 字符串作为类成员，以便稍后在析构函数中删除该文件。

```
StdinIo::~StdinIo(){
      if( unlink(tempPath.c_str()) != 0 )
              perror( "Error deleting file" );
} 
```

在这里和那里注释掉行之后，我发现在下面的行中，发生了 seg-fault：

```
 tempPath = tempPathStream.str(); 
```

gdb 说：

```
 Program received signal SIGSEGV, Segmentation fault.
 __exchange_and_add_dispatch (__mem=0xfffffffffffffff8, __val=<optimized out>)
     at /usr/src/debug/gcc-4.7.2-20120921/obj-x86_64-redhat-linux/x86_64-redhat-          linux/libstdc++-v3/include/ext/atomicity.h:83
 83       return __exchange_and_add_single(__mem, __val); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:14:01.353

在对象完全初始化之前，您的第二个实现调用`newPath()`和访问（将其传递给基类构造函数）。`tempPath`这会导致未定义的行为。

如果您绝对需要文件名的本地副本而不对现有代码进行重大更改，您可以使用实现#1 进行类似的操作。

```
class StdIoSpecialData : public FileIo
{
protected:

    StdIoSpecialData(const std::string &fname)
        : FileIo(fname),
          tempPath(fname)
    {
    }
    const std::string tempPath;
};

class StdIo : public StdIoSpecialData
{
public:
    StdIo()
       : StdIoSpecialData(newPath())
    {
    }
}; 
```

# php - 在 JavaScript 中使用 php

> ID：15852461
> 
> 赞同：0
> 
> 时间：2013-04-06T15:04:13.573
> 
> 标签：php, ajax, wordpress

我有一个发布到 PHP 文件的 ajax 函数。现在，由于我使用的是 WordPress，我可以使用 get_url 函数，因此我不需要对整个 URL 进行硬编码。

WordPress 函数是一个 PHP，所以我尝试在 ajax 帖子中使用 PHP。但它不会成功。有任何想法吗 ？有可能吗？

这就是我所拥有的。

```
$(document).ready(function(){

$('#submit').click(function(){

$.post('<?php echo get_template_directory_uri(); ?>/send.php', $("#mycontactform").serialize(),  function(response) {
$('#success').html(response);
//$('#success').hide('slow');
});
return false;

});

}); 
```

我也尝试过这样的引号内的php echo。

```
 $.post(' "<?php echo get_template_directory_uri(); ?>" /send.php' .... 
```

以太方式我得到这条路

```
http://mysite.com/%27%3C?php%20echo%20get_template_directory_uri();%20?%3E%27/send.php&email=&message=&name=&sent=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:15:39.163

Javascript 到 PHP = 不，你不能将 javascript 嵌入到 php，只有 php 可以嵌入 html 和 javascripts。

更好的方法是创建一个 .php 文件并在其中插入 javascript ...

**示例：js.php**

```
<?php
    function doSubmit() {
        ?>
        <script>
            $('#submit').click(function(){
                $.post('<?php echo get_template_directory_uri(); ?>/send.php', $("#mycontactform").serialize(), function(response) {
                    $('#success').html(response);
                    //$('#success').hide('slow');
                    });
                return false;
            });
        </script>
        <?php
    }
?> 
```

使用“include(js.php);”调用 js.php 并在另一个 php 中调用函数

**在你的 index.php 里面**

```
<?php
include('js.php');
?>
<html>
    <head><script><?php doSubmit();?></script></head>
    <body>
    </body>
</html> 
```

# tkinter - 通过在窗口标题中添加 * 来表示未保存的更改 - 如何在 Mac OS X 上的窗口关闭按钮中添加黑点？

> ID：15852462
> 
> 赞同：0
> 
> 时间：2013-04-06T15:04:28.167
> 
> 标签：tkinter, cross-platform, tk

我正在使用`TopLevel`包含`Text`小部件的窗口在 Tkinter 中编写文本编辑器。目前，当文档/缓冲区包含未保存的更改时，我会在窗口标题前加上星号，如`MyDocument`-> `*MyDocument`，这在 *nix 环境下是惯用的。为此，我使用如下`edit_modified`方法：`Text`

```
import Tkinter as tk
class EditingWindow(tk.Toplevel):
    # [...]

    self.text = tk.Text(...)

    # track modifications of the text:
    self.text.bind("<<Modified>>", self.modified)

    def modified(self, event=None):
        if self.text.edit_modified():
            title=self.title()
            if title[0] != '*':
                self.title("*" + title)
        else:
            title=self.title()
            if title[0] == '*':
                self.title(title[1:])

    def save(self, event=None):
        # [... saving under a filename kept in the variable self.filename ...]
        self.text.edit_modified(False)
        self.title(os.path.basename(self.filename)) 
```

**我的问题是：**在 Mac OS X 上，不是在窗口标题前加上星号，而是在窗口关闭按钮（左上角的红色圆形按钮）中出现一个黑点，表示未保存的更改。是否可以从 Tkinter（或更一般地说，从 Tcl/Tk）访问此功能？

**编辑 2：** 在最初建议使用 applescript 之后，Kevin Walzer 提出了解决方案：设置`tkinter`'s `wm_attributes`. 以上，相当于使用

```
self.wm_attributes("-modified", 1) # sets black dot in toplevel's close button (mac) 
```

和

```
self.wm_attributes("-modified", 0) # unsets black dot in toplevel's close button (mac) 
```

在`self.modified`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-11T03:26:01.720

是的，这可以使用 wm_attributes 并将“已修改”标志设置为 true 来完成。

例子：

```
from Tkinter import *
root= Tk();
Label(root,text='This is the Toplevel').pack(pady=10)
root.wm_attributes("-modified", 1)
root.mainloop() 
```

# android - 从android上的服务获取数据

> ID：15852464
> 
> 赞同：0
> 
> 时间：2013-04-06T15:04:31.107
> 
> 标签：android, performance, service, web

我有一项服务，每 5 分钟提供一次新图像。我想知道如何在 android 上快速加载图像。我正在考虑制作一个带有图像的网站，或者一个 android 应用程序 - 什么会更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:25:34.827

一旦您的服务下载了图像，您就可以使用处理程序来更新您的 UI 线程……如果您下载更高分辨率的图像，最好对其进行解码[高效加载位图 ..](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# apache - 使用 apache 上的 htaccess 对除某个文件以外的所有文件发送访问被拒绝错误

> ID：15852467
> 
> 赞同：2
> 
> 时间：2013-04-06T15:04:54.123
> 
> 标签：apache, .htaccess, http-status-code-403

我有一个包含各种 .php 文件的文件夹，我想防止直接访问它们，但要访问 index.php。

这是我到目前为止得到的，它似乎有效：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond $1 !^(index\.php)
RewriteRule ^(.*)$ /403.php/$1 [R=403]
</IfModule> 
```

这是正确的方法吗？另请注意，我在文件夹中的文件中实际上并不存在 403.php。

编辑：为了更好地阐明我想要做什么——我有一个文件夹（我们可以假设名为“includes”），其中包含一个 index.php 文件，以及 index.php 包含的各种其他文件。

我不希望用户/恶意机器人/任何人能够直接访问除 index.php 之外的“包含”中的任何内容。

如果他们到达其他任何东西（无论文件是否存在），我想向浏览器发送 403 - Access Denied HTTP 响应代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:16:09.953

正确的方法是使用`F`标志，它只是返回一个 403 禁止，你可以使用`-`它作为目标，它的意思是“什么都不做，让 URI 原封不动地通过”：

```
RewriteEngine on
RewriteCond $1 !^(index\.php)
RewriteRule ^(.*)$ - [L,F] 
```

或者您可以尝试将条件与规则结合起来：

```
RewriteEngine on
RewriteRule !index\.php$ - [L,F] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T18:39:37.590

您可以创建一个错误页面。实际上，一些控制面板有一个应用程序，允许他们的用户创建一个支持 SSI 的 403 *（禁止）*页面，扩展名为*.shtml 。*在该应用程序的**cPanel**中。标题为*“高级”*部分中的*“错误页面”*，403 页面将保存在*403.shtml*基本名称中。如果您没有找到此类应用程序，您可以手动创建启用 SSI 的 HTML 文件，前提是您的服务器配置为允许这样做。如果不可能，您仍然可以使用另一个扩展程序。

 **所以，更正确的方法是重新映射已经存在的错误页面，例如：

```
RewriteCond %{REQUEST_URI} !^/index\.php
RewriteRule ^(.*) /403.shtml 
```

但无论如何，你想做什么？**

# redirect - 将域重定向到 Openshift 页面

> ID：15852468
> 
> 赞同：2
> 
> 时间：2013-04-06T15:04:57.207
> 
> 标签：redirect, dns, openshift, paas

我想将我的 domain.com 重定向到 openshift 页面 (openshift-app.rhcloud.com)。[我已经按照这里](https://www.openshift.com/blogs/custom-url-names-for-your-paas-applications-host-forwarding-and-cnames-the-openshift-way)的描述完成了它并且它有效。唯一的问题是，在任何我不会成为地址的网站上，地址将永远是`domain.com`. 例如：

```
openshift-app.rhcloud.com -> domain.com
openshift-app.rhcloud.com/site1 -> domain.com
openshift-app.rhcloud.com/site2/subsite1 -> domain.com 
```

所有这些网站都将重定向到`domain.com`. 是否有可能以“正常”方式重定向它，从而显示整个地址？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T06:50:03.097

使用 mod_rewrite 的 301 重定向将规则添加到 .htaccess：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^openshift-app.rhcloud.com$
RewriteRule (.*)$ http://www.domain.com/$1 [R=301,L] 
```

专门用于文件夹 ${OPENSHIFT_REPO_DIR}/wsgi/.htaccess 中的墨盒 python-2.6

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^openshift-app.rhcloud.com$
RewriteRule ^application/(.*)$ http://www.domain.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T06:57:25.693

我终于解决了这个问题。我所要做的就是：

为 openshift 页面添加别名（对于 www.mydomain.com 和 mydomain.com）

将这些规则添加到域

```
mydomain.com.   A   <ip_address_to_openshift_page>
www             A   <ip_address_to_openshift_page>
mydomain.com.   NS  <dns_of_domain_provider> 
```

例如（我的域在 linuxpl.com 上）：

```
mydomain.com.   A   107.22.142.72
www             A   107.22.142.72   
mydomain.com.   NS  ns15.linuxpl.com. 
```

# c++ - 构造函数中的 C++ 函数指针

> ID：15852480
> 
> 赞同：2
> 
> 时间：2013-04-06T15:06:05.513
> 
> 标签：c++, function-pointers

我正在尝试将函数指针传递给类的构造函数。但是，当我尝试编译代码时，出现错误。代码和错误是：

快速查找.h

```
#ifndef QUICKFIND_H
#define QUICKFIND_H
#endif // QUICKFIND_H

template <class T>
class QuickFind
{
private:
    int size;
    int *array;
    int (*giveIndex)(const void *a);
public:
    QuickFind<T>(int n,int (*ptr)(const void *));
    void connect (const T* u,const T* v);
    bool isConnected(const T* u,const T* v);
}; 
```

文件 quickfind.cpp 中的构造函数定义

```
template <class T>
QuickFind<T>::QuickFind(int n,int (*ptr)(const void *))
{
    size=n;
    array=new int[n];
    giveIndex=ptr;
    for(int i=0;i<n;i++)
    {
        array[i]=i;
    }
} 
```

在我的主要功能文件中：

```
int giveIndex (const void *ptr)
{
    temp *tptr=(temp*)ptr;
    return tptr->getA();
}

int main()
{
     QuickFind<temp> *qf=new QuickFind<temp>(10,giveIndex);
} 
```

在这里，我收到`'undefined reference to QuickFind<temp>::QuickFind(int, int (*)(void const*))'`错误。我无法弄清楚问题...请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:10:18.890

一件事错了，你不需要在构造函数上：

```
template <class T>
class QuickFind
{
private:
    int size;
    int *array;
    int (*giveIndex)(const void *a);
public:
    QuickFind(int n,int (*ptr)(const void *));  /// <---- here, no <T>
    void connect (const T* u,const T* v);
    bool isConnected(const T* u,const T* v);
}; 
```

在你的情况下，它模板化的类，但这个函数不是。而且，模板函数必须在头文件中定义，以便包含它们的文件可以看到代码并替换参数类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T16:56:30.257

将以下所有内容放在一个 CPP 文件中以查看它的工作原理。如其他注释中所述，对于模板类，您必须将整个定义放在头文件中。不要将函数声明与其定义分开到单独的 CPP 文件中。在这种情况下，将整个实现放在一个 CPP 文件中可以达到相同的目的。

我对您的代码进行了一些更改，以使其类型安全、内存泄漏安全和异常安全。例如，我用 std::vector 替换了您的动态分配数组。std::vector 具有您需要的所有功能，但会为您管理内存，并且会在您的课程超出范围时进行清理。

```
#include <vector>
#include <iostream>
#include <functional>

template <typename T>
class QuickFind
{
private:
    std::vector<int> data;
std::function<int (const T&)> func;
public:
    QuickFind(int n, std::function<int (const T&)> f) : data(n), func(f)
    {
        int i = 0;
        for(auto it = data.begin(); it != data.end(); ++it)
            data[i]=i++;
    }

    void connect (const T& u, const T& v)
    {
        std::cout << func(u) << "\n";
        std::cout << func(v) << "\n";
    }
    bool isConnected(const T* u,const T* v);
};

class temp
{
    int val;
public:
    temp(int i) : val(i)
    {}

    int getA() const
    {
        return val;
    }
};

int giveIndex (const temp &t)
{
    return t.getA();
}

int main()
{
     temp t1(5), t2(10);

     QuickFind<temp> qf1(10,giveIndex);
     qf1.connect(t1, t2);

     // this example uses a lambda as the callback
 auto giveIndex2 = [](const temp& t) { return t.getA(); };
 QuickFind<temp> qf2(20, giveIndex2);
 qf2.connect(t1, t2);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:49:21.443

编译器想知道在编译模板类方法时将从模板类中实例化哪些类型的对象。因此，可能会出现编译时或链接时错误。 [这](http://www.codeproject.com/Articles/48575/How-to-define-a-template-class-in-a-h-file-and-imp)更多地解释了各种错误及其原因。

`#include "quickfind.cpp"`经过一些努力，在我的情况下添加头文件的末尾。

# r - mclapply 附加参数

> ID：15852482
> 
> 赞同：4
> 
> 时间：2013-04-06T15:06:12.893
> 
> 标签：r, parallel-processing, lapply, mclapply

我创建了一个函数 DevCstat()。

它接受参数：indat、mod、Covar、txtMat、PatCovar。

indat 是一个列表，我想将该函数应用于列表的每个元素。

mod、Covar、txtMat、PatCovar 是我想在每次调用函数时使用的对象，这些不会改变列表元素。

这似乎有效：

```
lapply(test, DevCstat, mod='A', Covar=Covar,txtMat=txtMat, PatCovar=PatCovar) 
```

但是，并行版本不起作用：

```
mclapply(test,DevCstat,mod = 'A', Covar=Covar, txtMat=txtMat, PatCovar=PatCovar, SIMPLIFY = F, mc.cores = getOption("mc.cores", numcore)) 
```

我得到错误

```
all scheduled cores encountered errors in the user code 
```

我认为问题在于 mclapply 没有传递额外的参数。

有谁知道如何正确地做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T15:50:36.223

您可以从以下示例中看到`mclapply`确实允许以这种方式使用额外参数：

```
mclapply(2:4, function(i,j,k) c(i,j,k), i=1, k=5) 
```

我认为您的问题是`mclapply`不带`SIMPLIFY`参数，因此它将其传递给导致错误的函数。您可能会混淆`mcmapply`，它确实需要一个`SIMPLIFY`参数。

# python - 将进度从线程发送到 gui

> ID：15852490
> 
> 赞同：3
> 
> 时间：2013-04-06T15:07:10.867
> 
> 标签：python, pyqt, pyqt4

我有一个带有状态栏的 qt 程序。我正在寻找一种更新此状态栏的好方法。我当然可以从代码中发出信号，但我希望将 gui 和“真实”代码分开，并且我希望代码能够独立于 gui 运行。我想出的解决方案是将小计提供给 gui，如下面的一个极其简化的示例所示。

```
#in file1:
from time import sleep

class WorkerClass():
    def updater(self):
        yield 10  # total
        if some_condition:
            yield 'end'  # return early
        for i in xrange(1, 11):
            sleep(1)  # dummy for real task
            yield i  # subtotal

#in file2, in some function in the MainWindow class:
worker = WorkerClass()
u = worker.updater()
total = u.next()
self.progress_bar.setRange(0, total)
for i in u:
    if i == 'end': break
    self.progress_bar.setValue(i)
print 'done!' 
```

然而，我觉得这不是应该做的方式。什么是返回小计的更好方法，而不在 file1 中使用 qt 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:24:08.383

将进度条设置为（自定义）[观察者](http://en.wikipedia.org/wiki/Observer_pattern)。例如：

```
def dowork(observer=None):
  worker = WorkerClass()
  u = worker.updater()
  total = u.next()
  if observer:
    observer.progress_total(total)
  for i in u:
    if i == 'end': break
    if observer:
      observer.progress(i)
  print 'done!' 
```

观察者可能看起来像：

```
class ProgressBarObserver(object):
  def __init__(self, progbar):
    self.progbar = progbar
  def progress_total(self, n):
    self.progbar.setRange(0, n)
  def progress(self, i):
    self.progbar.setValue(i) 
```

调用代码将它们配对：

```
dowork(ProgressBarObserver(self.progress_bar)) 
```

我希望这会有所帮助。

# php - jQuery文件上传到base64中的数据库

> ID：15852496
> 
> 赞同：1
> 
> 时间：2013-04-06T15:07:30.153
> 
> 标签：php, mysql, base64, jquery-file-upload

我在使用带有引导皮肤 ( [https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload) ) 的 Jquery 文件上传器时遇到问题。该程序本身可以很好地工作，即使使用 github ( [https://github.com/blueimp/jQuery-File-Upload/wiki/Working-with-databases](https://github.com/blueimp/jQuery-File-Upload/wiki/Working-with-databases) ) 上描述的数据库也是如此。

但我真正需要的是将图片以base64格式保存在数据库中。我似乎无法得到它。所以在 add_img 函数中，我需要以某种方式获取 base64 中的图片。

```
// Standard file uploader code
function add_img($img_name)
{
    $add_to_db = $this->query("INSERT INTO pics (pic_name, pic) VALUES ('".$img_name."','picture in base64 here')");
    return $add_to_db;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:26:21.253

使用以下代码将您的图像转换为 base64 并将其存储到 db。

```
$imagedata = file_get_contents("filepath/filename.jpg");
$base64data = base64_encode($imagedata); 
```

编辑：

```
$file->size = $file_size;//from current code

$imagedata = file_get_contents($file_path);
$base64data = base64_encode($imagedata);
$this->add_img($base64data); 
```

希望这对你有用

# javascript - 使用 PhoneGap 从 Android 调用 Javascript

> ID：15852499
> 
> 赞同：3
> 
> 时间：2013-04-06T15:07:40.090
> 
> 标签：javascript, android, cordova

我有和应用程序构建的`PhoneGap`，我正在尝试`Javascript`从本机代码进行通信。

在我的`DroidGap`扩展课程中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    Logger.log("oncreate");
    super.onCreate(savedInstanceState);
    super.init();
    super.appView.getSettings().setJavaScriptEnabled(true);
    super.appView.getSettings().setSupportZoom(true);
    super.appView.getSettings().setBuiltInZoomControls(true);
    super.appView.getSettings().setDisplayZoomControls(false);
    jsinterface = new CommunicationInterface(this, appView);
    super.appView.addJavascriptInterface(jsinterface, "communicationinterface"); 
} 
```

javascript接口：

```
public class CommunicationInterface {
    private WebView mAppView;
    private DroidGap mGap;

    public CommunicationInterface(DroidGap gap, WebView view)  {
        mAppView = view;
        mGap = gap;
    }

    public String getTestString() {
        return "teststring";
    }

    public void parse(Object o) {
        Logger.log(o);
    }
} 
```

位于`Javacript`外部文件中（我创建了一个 HTML 文件，该文件在`header`:中有这一行`<script type="text/javascript" src="scripts.js"></script>`）

`Scripts.js`：

```
function sendToInterface() {
    alert("alert");
    var map = new Object();
    (...)
    window.communicationinterface.parse(map); //communication js -> android seems to work.
} 
```

我在其他帖子中读到可以在 PhoneGap 和 Android 之间进行通信，但到目前为止我还没有取得任何成功。我确实设法创建了一个警报，但那是与`loadUrl("javascript:alert('Alert');")`，但我也读过你不应该这样做，因为那`sendJavascript()`是为了（它会导致泄漏、重新加载页面等）。我试图通过该`sendJavascript()`方法拍摄几个字符串，但无济于事：

*   `sendJavascript("javascript:alert('Alert');")`
*   `sendJavascript("javascript:sendToInterface();")`
*   `sendJavascript("sendToInterface();")`
*   `sendJavascript("window.sendToInterface();")`

如何从本机 -> PhoneGap 进行通信（或者我已经拥有的有什么问题）？到目前为止，其他帖子和问题并没有帮助我解决这个特殊问题。

读：

*   [http://www.jumpbyte.com/2012/phonegap-native-to-javascript/](http://www.jumpbyte.com/2012/phonegap-native-to-javascript/)
*   [Phonegap：“processMessage failed”无法发送 javascript 函数 (Cordova 2.5.0)](https://stackoverflow.com/questions/15603395/phonegap-processmessage-failed-unable-to-send-javascript-function-cordova-2)
*   [Android Java和Phonegap Javascript之间的通信？](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascript)（虽然这是另一个方向，但我正在尝试同时做）
*   [http://www.intelligrape.com/blog/2013/01/31/using-sendjavscript-to-inject-javascript-into-android-phonegap-application/](http://www.intelligrape.com/blog/2013/01/31/using-sendjavscript-to-inject-javascript-into-android-phonegap-application/)
*   [Phonegap - Android - 从本机调用 javascript 导致泄漏窗口](https://stackoverflow.com/questions/8271536/phonegap-android-calling-javascript-from-native-causes-leakedwindow)
*   [如何使用phonegap插件从android调用javascript函数](https://stackoverflow.com/questions/11716167/how-to-call-javascript-function-from-android-using-phonegap-plugin)

**编辑**

我写了一个工作项目：

Java部分

```
import org.apache.cordova.DroidGap;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.Bundle;
import android.util.Log;

public class App extends DroidGap {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///sdcard/ds/index.html");
    System.out.println("loading from sdcard");
    Thread t = new Thread() {
      public void run() {
        try {
          for (int i = 0; i < 3; i++) {
            sleep(2000);
            sendValue("value " + i, "another vlaue " + i);
          }
        } catch (Exception e) {
          e.printStackTrace();
        }
      };
    };
    t.start();
  }

  public void sendValue(String value1, String value2) {

    System.out.println("sendvalue in app");
    JSONObject data = new JSONObject();
    try {
      data.put("value1", value1);
      data.put("value2", value2);
    } catch (JSONException e) {
      Log.e("CommTest", e.getMessage());
    }
    String js = String.format("window.plugins.appcomm.updateValues('%s');",
        data.toString());
    this.sendJavascript(js);
  }
}

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class AppComm extends Plugin{

  private static AppComm instance;

  public AppComm () {
    instance = this;
  }

  public static AppComm getInstance() {
    return instance;
  }

  @Override
  public PluginResult execute(String action, JSONArray args, String callbackId) {
    System.out.println("in execute from appcomm");

    return null;
  }

  public void sendValue(String value1, String value2) {
    System.out.println("sendvalue in appComm");
    JSONObject data = new JSONObject();
    try {
      data.put("value1", value1);
      data.put("value2", value2);
    } catch (JSONException e) {
      Log.e("CommTest", e.getMessage());
    }
    String js = String.format(
        "window.plugins.commtest.updateValues('%s');",
        data.toString());
    this.sendJavascript(js);
  }
} 
```

res/xml/plugins.xml

```
<plugins>
    <plugin name="App" value="org.apache.cordova.App"/>
    <plugin name="Geolocation" value="org.apache.cordova.GeoBroker"/>
    <plugin name="Device" value="org.apache.cordova.Device"/>
    <plugin name="Accelerometer" value="org.apache.cordova.AccelListener"/>
    <plugin name="Compass" value="org.apache.cordova.CompassListener"/>
    <plugin name="Media" value="org.apache.cordova.AudioHandler"/>
    <plugin name="Camera" value="org.apache.cordova.CameraLauncher"/>
    <plugin name="Contacts" value="org.apache.cordova.ContactManager"/>
    <plugin name="File" value="org.apache.cordova.FileUtils"/>
    <plugin name="NetworkStatus" value="org.apache.cordova.NetworkManager"/>
    <plugin name="Notification" value="org.apache.cordova.Notification"/>
    <plugin name="Storage" value="org.apache.cordova.Storage"/>
    <plugin name="Temperature" value="org.apache.cordova.TempListener"/>
    <plugin name="FileTransfer" value="org.apache.cordova.FileTransfer"/>
    <plugin name="Capture" value="org.apache.cordova.Capture"/>
    <plugin name="Battery" value="org.apache.cordova.BatteryListener"/>
    <plugin name="SplashScreen" value="org.apache.cordova.SplashScreen"/>

    <plugin name="AppComm" value="com.example.plugin.AppComm"/>
</plugins> 
```

科尔多瓦.xml

```
<?xml version="1.0" encoding="utf-8"?>
<cordova>
    <access origin=".*"/> <!-- allow local pages -->
    <log level="DEBUG"/>
    <preference name="classicRender" value="true" />
</cordova> 
```

Index.html 标头

```
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0" />
    <title>
    </title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js">
    </script>
    <script type="text/javascript" charset="utf-8" src="cordova.js"></script>   
    <script type="text/javascript" charset="utf-8">
    var AppComm=function(){};

    AppComm.prototype.updateValues=function(a){
    var map = new Object();
    map["X1"] = "hallo";
    map["X2"] = "hi";
    cordova.exec(null, null, null);
    };

    cordova.addConstructor(function(){cordova.addPlugin("appcomm",new AppComm)});
    </script>
</head> 
```

问题之一是 javascript 位于单独的文件中（我认为这是问题之一）。如果问的不多，我怎样才能正确调用 java，以及使用什么值？如何实现execute方法以及如何调用它（我真的不擅长JQuery）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T13:25:01.853

首先，您正在使用`Plugin`子类。`Plugin`已弃用并已替换为`CordovaPlugin`. 如果您使用的是旧版本的 PhoneGap，我建议您升级。

其次，您的 exec 调用是错误的。插件开发的文档清楚地说明您必须传递 5 个参数，而您要传递 3 个空值。您希望如何处理？

```
cordova.exec(function(winParam) {}, function(error) {}, "service",
             "action", ["firstArgument", "secondArgument", 42,
             false]); 
```

在这里，`service`和`action`参数数组决定了您的 Java 代码中会发生什么。前两个决定了在特定条件下 JavaScript 会发生什么。因此，虽然您可以对前两个使用 null，但您必须指定最后三个。

我有一个适用于 PhoneGap 2.3.0 的工作示例插件。请看下面的代码：

```
public class ExampleJSCommunicator extends CordovaPlugin {

    public boolean execute (final String action, final JSONArray args, CallbackContext callbackContext) throws JSONException {
        PluginResult.Status status = PluginResult.Status.OK;
        String result = "";

        cordova.getActivity ().runOnUiThread (new Runnable () {
            @Override
            public void run() {
                try {
                    String displayText = "";
                    if (action.equals ("buttonClicked")) {
                        displayText = args.getString(0) + " was clicked";
                    }

                    else if (action.equals ("animationRunning")) {
                        displayText = args.getBoolean(0) ? "Animation started running" : "Animation stopped running";
                    }

                    TextView label = (TextView) cordova.getActivity().findViewById (R.id.textView);
                    label.setText (displayText + " and the Activity knows it!");
                } catch (JSONException e) {
                    e.printStackTrace();
                }
            }
        });

        return true;
    }
} 
```

使用上面的代码，您的 Java 端插件能够处理两个自定义“动作” -`buttonClicked`和`animationRunning`. 这些操作符合我的目的，但您可以以其他方式命名它们。

现在，您仍然需要注册您的插件，以便 Cordova 知道它。这是在`xml/config.xml`文件中完成的。在 下`plugins`，您必须添加以下内容：

```
<plugin name="ExampleJSCommunicator" value="com.example.phonegap.ExampleJSCommunicator"/> 
```

然后您可以从 JavaScript 传递数据（或“动作”），如下所示。请注意，参数（`which.id`和`animationRunning`在数组中传递）：

```
cordova.exec (null, null, "ExampleJSCommunicator", "buttonClicked", [which.id]);  // my first action
cordova.exec (null, null, "ExampleJSCommunicator", "animationRunning", [animationRunning]);  // my second action 
```

这两个`exec`调用将触发`ExampleJSCommunicator`类中的执行方法，并将在各自的 if 块中进行处理。调用 exec 的位置无关紧要，只要在包含 cordova.js 文件后声明 JavaScript 代码即可。我的 JavaScript 包含在一个单独的 main.js 文件中，它工作得很好：

```
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<script type="text/javascript" charset="utf-8" src="main.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T22:12:59.527

到目前为止，您实际上并没有使用 Apache Cordova 为您提供的任何工具来制作插件，而只是尝试使用标准 Android SDK 来添加一个类。如果您正在寻找添加功能，我建议您编写一个插件，原因如下：

*   Apache Cordova 在 WebView 和 Java 之间有替代的通信方式，因此即使 addJavascriptInterface 失败它仍然可以工作
*   你不需要覆盖东西

我强烈建议您阅读此内容并将您的自定义 Java 代码移动到插件中： http: [//docs.phonegap.com/en/2.5.0/guide_plugin-development_android_index.md.html](http://docs.phonegap.com/en/2.5.0/guide_plugin-development_android_index.md.html)

但是，您示例中的主要错误是在您的类中使用 WebView 而不是 CordovaWebView。WebView 没有有效的 sendJavascript 方法，并且发送 Javascript 的唯一简单方法是使用 loadUrl。

# jquery - jQuery 类的障碍

> ID：15852503
> 
> 赞同：2
> 
> 时间：2013-04-06T15:07:47.560
> 
> 标签：jquery, class

[http://i.stack.imgur.com/zJxqx.png](http://i.stack.imgur.com/zJxqx.png)

我刚开始学习 Jquery，我决定制作游戏 Bomberman。

我遇到了一个大问题：我的小家伙必须停在障碍物前面，这样他就无法通过它们，但是使用我的代码，他只能停在放置在顶部的障碍物上（也是第一个添加的）

在我的代码中，我尝试说他检查每个类（这就是我没有使用 id 的原因），但这不起作用。我也尝试用“Each”修复它，但这只是破坏了一切。

$(文档).ready(函数(){

```
$("#Main").append('<div id="Player"></div>');
$("#Main").append('<div id="test1" class="Bottel" style="absolute; top:0px; left: 100px;"></div>');
$("#Main").append('<div id="test2" class="Bottel" style="absolute; top:30px; left: 100px;"></div>');
$("#Main").append('<div id="test3" class="Bottel" style="absolute; top:100px; left: 100px;"></div>');
$("#Main").append('<div id="test4" class="Bottel" style="absolute; top:200px; left: 100px;"></div>');
$("#Main").append('<div id="test5" class="Bottel" style="absolute; top:200px; left: 200px;"></div>');
//$(".Bottel").css('left',100 + 'px');

movement() 
```

函数运动（）{

```
$(document).keydown(function(e) {

    var position = $("#Player").position();
    var min = 270;

    switch (e.keyCode){
        case 37: 

            if (position.left >= 1) //&& $(".Bottel").position().left -44 >= position.left) 
            {
            if (($("div[class^='Bottel']").position().left +44 <= position.left) || ($("div[class^='Bottel']").position().left  >= position.left) || ($("div[class^='Bottel']").position().top + 35 <= position.top )){
            $("#Player").css('left',(position.left) - 20 + 'px');
            $("#Player").css('background','url(left.png) no-repeat');
            //});
            }
            else{
            //alert("test");
            //alert("test");
                //position = $("#Player").position();
            $("#Player").css('left',(position.left) + 'px');
            $("#Player").css('background','url(left.png) no-repeat');

            }

            }

            break;
        case 38: 

            if (position.top >= 1 ){
            if ($(".Bottel").position().left + 35 <= position.left || $(".Bottel").position().left - 40  >= position.left || $(".Bottel").position().top + 41 <= position.top ){
            $("#Player").css('top',(position.top) - 20 + 'px');
            $("#Player").css('background','url(top.png) no-repeat');
            }
            else{
            $("#Player").css('top',(position.top) + 'px');
            $("#Player").css('background','url(top.png) no-repeat');
            }
            //$("#Player").css('top',position.top - 20 + 'px');
            //$("#Player").css('background','url(top.png) no-repeat');
            }

            break;
        case 39: 
        //$.each($("#Main .Bottel"), function(i, .Bottel) { 
        //var location = $(".Bottel").position().left;
        //alert(location + ",");
        //alert(position().left);

            if (position.left <= 452 - 33) //&& $(".Bottel").position().left -44 >= position.left)

            {
            if ($(".Bottel").position().left -44 >= position.left || $(".Bottel").position().top + 35 <= position.top || $(".Bottel").position().left <= position.left ){
            $("#Player").css('left',(position.left) + 20 + 'px');
            $("#Player").css('background','url(right.png) no-repeat');
            }
            else{
            $("#Player").css('left',(position.left) + 'px');
            $("#Player").css('background','url(right.png) no-repeat');
            }
            }
            //});

            break;
        case 40: 

            if (position.top <= 393 - 41){
            $("#Player").css('top',position.top + 20 + 'px');
            $("#Player").css('background','url(bottem.png) no-repeat');             
            }

        break;
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:15:07.483

`each()`是正确的方法。就像是：

```
case 37:

  if (position.left > 0) {

    var canGoLeft = true;

    $('.Bottel').each(function() {
      var obstaclePosition = $(this).position();
      if (...collision detection code...) {
        canGoLeft = false;
        // optional: chuck 'return false;' in here to stop the each loop early 
      }
    });

    if (canGoLeft) {
      $("#Player").css({
        'left': (position.left) - 20 + 'px',
        'background':'url(left.png) no-repeat'
      });
    } else {
      $("#Player").css({
        'left': (position.left) + 'px',
        'background':'url(left.png) no-repeat'
      });
    }
  }

  break; 
```

“碰撞检测代码”将用于`this`指代您正在检查的当前障碍物，例如：

```
 if ((obstaclePosition.left +44 <= position.left) || (obstaclePosition.left  >= position.left) || (obstaclePosition.top + 35 <= position.top )){ 
```

注意：我认为您的碰撞检测代码可能需要更多的工作来解释障碍物的高度。

# java - “Main Method not Public” - 尝试在 Eclipse 上运行程序时出现错误消息

> ID：15852507
> 
> 赞同：0
> 
> 时间：2013-04-06T15:08:20.597
> 
> 标签：java, class, main

这是我在 Eclipse 上使用的代码，我不明白我哪里出错了。我是Java初学者，所以我对这个主题不太熟悉。任何帮助将非常感激。当我尝试通过运行程序查看我已经走了多远时，错误总是会出现，请缓解计算机术语，我是这个大声笑的新手。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.border.LineBorder;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;
import java.awt.BorderLayout;

public class CBombRombot extends JFrame implements ActionListener, ChangeListener {

    private JPanel panel;
    private JPanel bottompanel;
    private JPanel rightpanel;

    private static void main(String[] args) {
        CBombRombot frame = new CBombRombot();
        frame.setTitle("CBombRobot Application");
        frame.setSize(875, 550);
        frame.show();
        frame.setResizable(false);
        frame.setLocationRelativeTo(null);
    }

    private void createGUI() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        Container window = getContentPane();
        window.setLayout(new BorderLayout());

        panel = new JPanel();
        panel.setPreferredSize(new Dimension(650, 450));
        panel.setBackground(Color.white);
        window.add(panel);

        rightpanel = new JPanel();
        rightpanel.setPreferredSize(new Dimension(200, 180));
        rightpanel.setBackground(Color.lightGray);
        window.add(rightpanel, BorderLayout.EAST);

        bottompanel = new JPanel();
        bottompanel.setPreferredSize(new Dimension(400, 50));
        bottompanel.setBackground(Color.lightGray);
        window.add(bottompanel, BorderLayout.SOUTH);
    }

    @Override
    public void stateChanged(ChangeEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        // TODO Auto-generated method stub
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T15:09:26.383

好吧，您的主要方法需要公开：

```
public static void main(String[] args) 
```

看看那里的一些教程，[例如](http://www.geom.uiuc.edu/~daeron/docs/javaguide/java/nutsandbolts/main.html)：

> 在 Java 语言中，当您使用 Java 解释器执行一个类时，运行时系统首先调用该类的 main() 方法。然后 main() 方法调用运行应用程序所需的所有其他方法。

[或者Oracle](http://docs.oracle.com/javase/tutorial/getStarted/application/#MAIN)官方教程：

> 在 Java 编程语言中，每个应用程序都必须包含一个 main 方法，其签名是：`public static void main(String[] args)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:15:25.070

您需要将 main 方法声明为 public static void。这是原因：

*   公共 - JVM调用main方法来运行项目范围之外的方法，因此访问说明符必须是公共的，以允许从应用程序之外的任何地方调用
*   static - 当 JVM 调用 main 方法时，被调用的类不存在对象，因此它必须具有静态方法才能允许从类调用。
*   void - Java 是独立于平台的语言，因此如果它会返回某个值，那么该值可能对不同的平台意味着不同，因此与 C 不同，它不能假定将值返回给操作系统的行为。

参考：[为什么java中的main()是public static void main](http://www.coderanch.com/t/411381/java/java/main-java-declared-public-static)

# python - 在 Scrapy 中设置线程池大小

> ID：15852510
> 
> 赞同：-3
> 
> 时间：2013-04-06T15:08:27.490
> 
> 标签：python, multithreading, scrapy

如何在 Scrapy (python) 中设置线程池大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T19:33:40.060

由于 Scrapy 不使用多线程，而是使用称为[Twisted](http://twistedmatrix.com/)的底层异步 http 框架，您一定是在谈论一次可以运行多少个蜘蛛？请参阅[CONCURRENT_REQUESTS](http://doc.scrapy.org/en/latest/topics/settings.html#concurrent-requests)文档。 *默认值：16*

# php - 无法让我的 PHP 表单邮件程序工作

> ID：15852512
> 
> 赞同：0
> 
> 时间：2013-04-06T14:17:50.830
> 
> 标签：php, forms

我是 PHP 脚本的新手，所以当我决定在我的网站上创建一个“订单”时，我从一个“现成的”（即，谷歌搜索并从其他人的代码开始）表单开始并对其进行了编辑。但是，我无法让它向我发布任何电子邮件。我的表单代码如下所示（当我的 REP 点足够高时，我会发布一张图片）：

```
<form action="form.php">
Name: <input type="text" name="Name" value="" size="60"> <font color=red>*</font><br>
Address: <input type="text" name="Address" value="" size="58"> <font color=red>*</font><br>
E-mail: <input type="text" name="Email" value="" size="60"> <font color=red>*</font><br><br>
Campaign No: <input type="text" name="BookNumber" value="" size="2"> <font color=red>*</font><br><br>
<table border=1><tr><td>Page No. </td><td>Product No. </td><td>Product Name </td><td>Shade/Fragrance </td><td>QTY </td><td>Unit Price </td><td>Total Price </td></tr>
<tr><td>
    <input type="text" name="Item1Page" value="" size="3">
</td><td>
    <input type="text" name="Number1" value="" size="5">
</td><td>
    <input type="text" name="Product1" value="" size="50">
</td><td>
    <input type="text" name="Fragrance1" value="" size="15">
</td><td>
    <input type="text" name="QTY1" value="" size="2">
</td><td>
    <input type="text" name="Uprice1" value="" size="6">
</td><td>
    <input type="text" name="Tprice1" value="" size="6">
</td></tr>
<tr><td>
    <input type="text" name="Item2Page" value="" size="3">
</td><td>
    <input type="text" name="Number2" value="" size="5">
</td><td>
    <input type="text" name="Product2" value="" size="50">
</td><td>
    <input type="text" name="Fragrance2" value="" size="15">
</td><td>
    <input type="text" name="QTY2" value="" size="2">
</td><td>
    <input type="text" name="Uprice2" value="" size="6">
</td><td>
    <input type="text" name="Tprice2" value="" size="6">
</td></tr>
<tr><td>
    <input type="text" name="Item3Page" value="" size="3">
</td><td>
    <input type="text" name="Number3" value="" size="5">
</td><td>
    <input type="text" name="Product3" value="" size="50">
</td><td>
    <input type="text" name="Fragrance3" value="" size="15">
</td><td>
    <input type="text" name="QTY3" value="" size="2">
</td><td>
    <input type="text" name="Uprice3" value="" size="6">
</td><td>
    <input type="text" name="Tprice3" value="" size="6">
</td></tr>
<tr><td>
    <input type="text" name="Item4Page" value="" size="3">
</td><td>
    <input type="text" name="Number4" value="" size="5">
</td><td>
    <input type="text" name="Product4" value="" size="50">
</td><td>
    <input type="text" name="Fragrance4" value="" size="15">
</td><td>
    <input type="text" name="QTY4" value="" size="2">
</td><td>
    <input type="text" name="Uprice4" value="" size="6">
</td><td>
    <input type="text" name="Tprice4" value="" size="6">
</td></tr>
<tr><td>
    <input type="text" name="Item5Page" value="" size="3">
</td><td>
    <input type="text" name="Number5" value="" size="5">
</td><td>
    <input type="text" name="Product5" value="" size="50">
</td><td>
    <input type="text" name="Fragrance5" value="" size="15">
</td><td>
    <input type="text" name="QTY5" value="" size="2">
</td><td>
    <input type="text" name="Uprice5" value="" size="6">
</td><td>
    <input type="text" name="Tprice5" value="" size="6">
</td></tr>
<tr><td>
    <input type="text" name="Item6Page" value="" size="3">
</td><td>
    <input type="text" name="Number6" value="" size="5">
</td><td>
    <input type="text" name="Product6" value="" size="50">
</td><td>
    <input type="text" name="Fragrance6" value="" size="15">
</td><td>
    <input type="text" name="QTY6" value="" size="2">
</td><td>
    <input type="text" name="Uprice6" value="" size="6">
</td><td>
    <input type="text" name="Tprice6" value="" size="6">
</td></tr>
<tr><td>
    <input type="text" name="Item7Page" value="" size="3">
</td><td>
    <input type="text" name="Number7" value="" size="5">
</td><td>
    <input type="text" name="Product7" value="" size="50">
</td><td>
    <input type="text" name="Fragrance7" value="" size="15">
</td><td>
    <input type="text" name="QTY7" value="" size="2">
</td><td>
    <input type="text" name="Uprice7" value="" size="6">
</td><td>
    <input type="text" name="Tprice7" value="" size="6">
</td></tr>
<tr><td>
    <input type="text" name="Item8Page" value="" size="3">
</td><td>
    <input type="text" name="Number8" value="" size="5">
</td><td>
    <input type="text" name="Product8" value="" size="50">
</td><td>
    <input type="text" name="Fragrance8" value="" size="15">
</td><td>
    <input type="text" name="QTY8" value="" size="2">
</td><td>
    <input type="text" name="Uprice8" value="" size="6">
</td><td>
    <input type="text" name="Tprice8" value="" size="6">
</td></tr>
<tr><td>
    <input type="text" name="Item9Page" value="" size="3">
</td><td>
    <input type="text" name="Number9" value="" size="5">
</td><td>
    <input type="text" name="Product9" value="" size="50">
</td><td>
    <input type="text" name="Fragrance9" value="" size="15">
</td><td>
    <input type="text" name="QTY9" value="" size="2">
</td><td>
    <input type="text" name="Uprice9" value="" size="6">
</td><td>
    <input type="text" name="Tprice9" value="" size="6">
</td></tr>
<tr><td>
    <input type="text" name="Item10Page" value="" size="3">
</td><td>
    <input type="text" name="Number10" value="" size="5">
</td><td>
    <input type="text" name="Product10" value="" size="50">
</td><td>
    <input type="text" name="Fragrance10" value="" size="15">
</td><td>
    <input type="text" name="QTY10" value="" size="2">
</td><td>
    <input type="text" name="Uprice10" value="" size="6">
</td><td>
    <input type="text" name="Tprice10" value="" size="6">
</td></tr>
<tr><td>
    <input type="text" name="Item11Page" value="" size="3">
</td><td>
    <input type="text" name="Number11" value="" size="5">
</td><td>
    <input type="text" name="Product11" value="" size="50">
</td><td>
    <input type="text" name="Fragrance11" value="" size="15">
</td><td>
    <input type="text" name="QTY11" value="" size="2">
</td><td>
    <input type="text" name="Uprice11" value="" size="6">
</td><td>
    <input type="text" name="Tprice11" value="" size="6">
</td></tr>
<tr><td colspan=6 align=right>Order Processing Charge</td><td align=right>$0.80</td></tr>
</table>

<br><br>
<input type="submit" value="Send">
<input type="reset" value="Reset">
</form> 
```

我的 PHP 脚本看起来像这样。我假设（因为我使用了模板并更改了它）我不小心删除了错误的行或没有正确定义变量：

```
<?php
if(isset($_POST['email_out'])) {
    if(!isset($_POST['Name']) ||
        !isset($_POST['Email']) ||
        !isset($_POST['Address'])) 
    $email = $_POST['Name']; // required
    $email = $_POST['Address']; // required
    $email = $_POST['Email']; // required
    $email = $_POST['BookNumber'];     
    $email = $_POST['Item1Page'];     
    $email = $_POST['Number1'];
    $email = $_POST['Product1'];
    $email = $_POST['Fragrance1'];
    $email = $_POST['QTY1'];
    $email = $_POST['Uprice1'];
    $email = $_POST['Tprice1'];
    $email = $_POST['Item2Page'];     
    $email = $_POST['Number2'];
    $email = $_POST['Product2'];
    $email = $_POST['Fragrance2'];
    $email = $_POST['QTY2'];
    $email = $_POST['Uprice2'];
    $email = $_POST['Tprice2'];
    $email = $_POST['Item3Page'];     
    $email = $_POST['Number3'];
    $email = $_POST['Product3'];
    $email = $_POST['Fragrance3'];
    $email = $_POST['QTY3'];
    $email = $_POST['Uprice3'];
    $email = $_POST['Tprice3'];
    $email = $_POST['Item4Page'];     
    $email = $_POST['Number4'];
    $email = $_POST['Product4'];
    $email = $_POST['Fragrance4'];
    $email = $_POST['QTY4'];
    $email = $_POST['Uprice4'];
    $email = $_POST['Tprice4'];
    $email = $_POST['Item5Page'];     
    $email = $_POST['Number5'];
    $email = $_POST['Product5'];
    $email = $_POST['Fragrance5'];
    $email = $_POST['QTY5'];
    $email = $_POST['Uprice5'];
    $email = $_POST['Tprice5'];
    $email = $_POST['Item6Page'];     
    $email = $_POST['Number6'];
    $email = $_POST['Product6'];
    $email = $_POST['Fragrance6'];
    $email = $_POST['QTY6'];
    $email = $_POST['Uprice6'];
    $email = $_POST['Tprice6'];
    $email = $_POST['Item7Page'];     
    $email = $_POST['Number7'];
    $email = $_POST['Product7'];
    $email = $_POST['Fragrance7'];
    $email = $_POST['QTY7'];
    $email = $_POST['Uprice7'];
    $email = $_POST['Tprice7'];
    $email = $_POST['Item8Page'];     
    $email = $_POST['Number8'];
    $email = $_POST['Product8'];
    $email = $_POST['Fragrance8'];
    $email = $_POST['QTY8'];
    $email = $_POST['Uprice8'];
    $email = $_POST['Tprice8'];
    $email = $_POST['Item9Page'];     
    $email = $_POST['Number9'];
    $email = $_POST['Product9'];
    $email = $_POST['Fragrance9'];
    $email = $_POST['QTY9'];
    $email = $_POST['Uprice9'];
    $email = $_POST['Tprice9'];
    $email = $_POST['Item10Page'];     
    $email = $_POST['Number10'];
    $email = $_POST['Product10'];
    $email = $_POST['Fragrance10'];
    $email = $_POST['QTY10'];
    $email = $_POST['Uprice10'];
    $email = $_POST['Tprice10'];
    $email = $_POST['Item11Page'];     
    $email = $_POST['Number11'];
    $email = $_POST['Product11'];
    $email = $_POST['Fragrance11'];
    $email = $_POST['QTY11'];
    $email = $_POST['Uprice11'];
    $email = $_POST['Tprice11'];
    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
  if(!preg_match($email_exp,$email)) {
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$name)) {
    $error_message .= 'The Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$address)) {
    $error_message .= 'The address you entered does not appear to be valid.<br />';
  }
    $email_message = "Form details below.\n\n";
    $email_message .= "Name: ".clean_string($Name)."\n";
    $email_message .= "Address: ".clean_string($Address)."\n";
    $email_message .= "Email: ".clean_string($Email)."\n";
    $email_message .= "BookNumber: ".clean_string($BookNumber)."\n";
    $email_message .= "Item1Page: ".clean_string($Item1Page)."\n";
    $email_message .= "Number1: ".clean_string($Number1)."\n";
    $email_message .= "Product1: ".clean_string($Product1)."\n";
    $email_message .= "Fragrance1: ".clean_string($Fragrance1)."\n";
    $email_message .= "QTY1: ".clean_string($QTY1)."\n";
    $email_message .= "Uprice1: ".clean_string($Uprice1)."\n";
    $email_message .= "Tprice1: ".clean_string($Tprice1)."\n";
    $email_message .= "Item2Page: ".clean_string($Item2Page)."\n";
    $email_message .= "Number2: ".clean_string($Number2)."\n";
    $email_message .= "Product2: ".clean_string($Product2)."\n";
    $email_message .= "Fragrance2: ".clean_string($Fragrance2)."\n";
    $email_message .= "QTY2: ".clean_string($QTY2)."\n";
    $email_message .= "Uprice2: ".clean_string($Uprice2)."\n";
    $email_message .= "Tprice2: ".clean_string($Tprice2)."\n";
    $email_message .= "Item3Page: ".clean_string($Item3Page)."\n";
    $email_message .= "Number3: ".clean_string($Number3)."\n";
    $email_message .= "Product3: ".clean_string($Product3)."\n";
    $email_message .= "Fragrance3: ".clean_string($Fragrance3)."\n";
    $email_message .= "QTY3: ".clean_string($QTY3)."\n";
    $email_message .= "Uprice3: ".clean_string($Uprice3)."\n";
    $email_message .= "Tprice3: ".clean_string($Tprice3)."\n";
    $email_message .= "Item4Page: ".clean_string($Item4Page)."\n";
    $email_message .= "Number4: ".clean_string($Number4)."\n";
    $email_message .= "Product4: ".clean_string($Product4)."\n";
    $email_message .= "Fragrance4: ".clean_string($Fragrance4)."\n";
    $email_message .= "QTY4: ".clean_string($QTY4)."\n";
    $email_message .= "Uprice4: ".clean_string($Uprice4)."\n";
    $email_message .= "Tprice4: ".clean_string($Tprice4)."\n";
    $email_message .= "Item5Page: ".clean_string($Item5Page)."\n";
    $email_message .= "Number5: ".clean_string($Number5)."\n";
    $email_message .= "Product5: ".clean_string($Product5)."\n";
    $email_message .= "Fragrance5: ".clean_string($Fragrance5)."\n";
    $email_message .= "QTY5: ".clean_string($QTY5)."\n";
    $email_message .= "Uprice5: ".clean_string($Uprice5)."\n";
    $email_message .= "Tprice5: ".clean_string($Tprice5)."\n";
    $email_message .= "Item6Page: ".clean_string($Item6Page)."\n";
    $email_message .= "Number6: ".clean_string($Number6)."\n";
    $email_message .= "Product6: ".clean_string($Product6)."\n";
    $email_message .= "Fragrance6: ".clean_string($Fragrance6)."\n";
    $email_message .= "QTY6: ".clean_string($QTY6)."\n";
    $email_message .= "Uprice6: ".clean_string($Uprice6)."\n";
    $email_message .= "Tprice6: ".clean_string($Tprice6)."\n";
    $email_message .= "Item7Page: ".clean_string($Item7Page)."\n";
    $email_message .= "Number7: ".clean_string($Number7)."\n";
    $email_message .= "Product7: ".clean_string($Product7)."\n";
    $email_message .= "Fragrance7: ".clean_string($Fragrance7)."\n";
    $email_message .= "QTY7: ".clean_string($QTY7)."\n";
    $email_message .= "Uprice7: ".clean_string($Uprice7)."\n";
    $email_message .= "Tprice7: ".clean_string($Tprice7)."\n";
    $email_message .= "Item8Page: ".clean_string($Item8Page)."\n";
    $email_message .= "Number8: ".clean_string($Number8)."\n";
    $email_message .= "Product8: ".clean_string($Product8)."\n";
    $email_message .= "Fragrance8: ".clean_string($Fragrance8)."\n";
    $email_message .= "QTY8: ".clean_string($QTY8)."\n";
    $email_message .= "Uprice8: ".clean_string($Uprice8)."\n";
    $email_message .= "Tprice8: ".clean_string($Tprice8)."\n";
    $email_message .= "Item9Page: ".clean_string($Item9Page)."\n";
    $email_message .= "Number9: ".clean_string($Number9)."\n";
    $email_message .= "Product9: ".clean_string($Product9)."\n";
    $email_message .= "Fragrance9: ".clean_string($Fragrance9)."\n";
    $email_message .= "QTY9: ".clean_string($QTY9)."\n";
    $email_message .= "Uprice9: ".clean_string($Uprice9)."\n";
    $email_message .= "Tprice9: ".clean_string($Tprice9)."\n";
    $email_message .= "Item10Page: ".clean_string($Item10Page)."\n";
    $email_message .= "Number10: ".clean_string($Number10)."\n";
    $email_message .= "Product10: ".clean_string($Product10)."\n";
    $email_message .= "Fragrance10: ".clean_string($Fragrance10)."\n";
    $email_message .= "QTY10: ".clean_string($QTY10)."\n";
    $email_message .= "Uprice10: ".clean_string($Uprice10)."\n";
    $email_message .= "Tprice10: ".clean_string($Tprice10)."\n";
    $email_message .= "Item11Page: ".clean_string($Item11Page)."\n";
    $email_message .= "Number11: ".clean_string($Number11)."\n";
    $email_message .= "Product11: ".clean_string($Product11)."\n";
    $email_message .= "Fragrance11: ".clean_string($Fragrance11)."\n";
    $email_message .= "QTY11: ".clean_string($QTY11)."\n";
    $email_message .= "Uprice11: ".clean_string($Uprice11)."\n";
    $email_message .= "Tprice11: ".clean_string($Tprice11)."\n";
mail("relay-hosting.secureserver.net", "Website form submission", $email_message, ""); 
}
?>

<html>
<head>
<meta http-equiv="refresh" content="5;URL=welcome.html">
</head>
<body>
Thankyou for your order.<br><br>This page will automatically refresh.
</body>
</html> 
```

最后的一点点 HTML 是我的确认确认，并且是唯一似乎可以正常工作的部分。

作为其 PHP 处理的一部分，GoDaddy 需要电子邮件 TO 标签“relay-hosting.secureserver.net”来接受和转发我的电子邮件（根据 GoDaddy）。

在有人来说我可以不用 PHP 并使用直接 HTML 来完成之前，我知道这是可以做到的。但是 HTML 发布到电子邮件客户端，我想确保使用移动设备或不使用电子邮件客户端（例如，通过浏览器使用 Gmail）的人也可以使用此表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:11:11.550

mail() 函数的第一个参数是 To: 电子邮件地址，我在您的示例中看到了主机名。

另外，考虑在所有这些表单元素中使用数组，并在显示表单并获取其数据时对其进行迭代——我相信这将使代码更具可读性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T14:12:26.277

由于评论字段的功能有限，因此我在此处说明了我的更改。按照建议，我找到了一些书并做了一些阅读。我分别使用了@DirkMcQuickly 和@Alexey 建议的新模板和数组。我的新代码如下所示（出于隐私考虑，删除了我的实际电子邮件）：

```
<?php 
 $from = $_REQUEST['Email'] ; 
 $name = $_REQUEST['Name'] ; 
 $to = "toaddress@address.com";
 $headers = "From: $from"; 
 $subject = "Order Submission"; 

 $fields = array(); 
 $fields{"Name"} = "Name"; 
 $fields{"Address"} = "Address"; 
 $fields{"Phone"} = "Phone"; 
 $fields{"Email"} = "Email"; 
 $fields{"BookNumber"} = "Book Number"; 
 $fields{"Item1Page"} = "Page Number1"; 
 $fields{"Number1"} = "Product Number1"; 
 $fields{"Product1"} = "Product1"; 
 $fields{"Fragrance1"} = "Fragrance1"; 
 $fields{"Uprice1"} = "Unit Price1"; 
 $fields{"Tprice1"} = "Total Price1"; 
 $fields{"Item2Page"} = "Page Number2"; 
 $fields{"Number2"} = "Product Number2"; 
 $fields{"Product2"} = "Product2"; 
 $fields{"Fragrance2"} = "Fragrance2"; 
 $fields{"Uprice2"} = "Unit Price2"; 
 $fields{"Tprice2"} = "Total Price2"; 
 $fields{"Item3Page"} = "Page Number3"; 
 $fields{"Number3"} = "Product Number3"; 
 $fields{"Product3"} = "Product3"; 
 $fields{"Fragrance3"} = "Fragrance3"; 
 $fields{"Uprice3"} = "Unit Price3"; 
 $fields{"Tprice3"} = "Total Price3"; 
 $fields{"Item4Page"} = "Page Number4"; 
 $fields{"Number4"} = "Product Number4"; 
 $fields{"Product4"} = "Product4"; 
 $fields{"Fragrance4"} = "Fragrance4"; 
 $fields{"Uprice4"} = "Unit Price4"; 
 $fields{"Tprice4"} = "Total Price4"; 
 $fields{"Item5Page"} = "Page Number5"; 
 $fields{"Number5"} = "Product Number5"; 
 $fields{"Product5"} = "Product5"; 
 $fields{"Fragrance5"} = "Fragrance5"; 
 $fields{"Uprice5"} = "Unit Price5"; 
 $fields{"Tprice5"} = "Total Price5"; 
 $fields{"Item6Page"} = "Page Number6"; 
 $fields{"Number6"} = "Product Number6"; 
 $fields{"Product6"} = "Product6"; 
 $fields{"Fragrance6"} = "Fragrance6"; 
 $fields{"Uprice6"} = "Unit Price6"; 
 $fields{"Tprice6"} = "Total Price6"; 
 $fields{"Item7Page"} = "Page Number7"; 
 $fields{"Number7"} = "Product Number7"; 
 $fields{"Product7"} = "Product7"; 
 $fields{"Fragrance7"} = "Fragrance7"; 
 $fields{"Uprice7"} = "Unit Price7"; 
 $fields{"Tprice7"} = "Total Price7"; 
 $fields{"Item8Page"} = "Page Number8";  
 $fields{"Number8"} = "Product Number8"; 
 $fields{"Product8"} = "Product8"; 
 $fields{"Fragrance8"} = "Fragrance8"; 
 $fields{"Uprice8"} = "Unit Price8"; 
 $fields{"Tprice8"} = "Total Price8"; 
 $fields{"Item9Page"} = "Page Number9"; 
 $fields{"Number9"} = "Product Number9"; 
 $fields{"Product9"} = "Product9"; 
 $fields{"Fragrance9"} = "Fragrance9"; 
 $fields{"Uprice9"} = "Unit Price9"; 
 $fields{"Tprice9"} = "Total Price9"; 
 $fields{"Item10Page"} = "Page Number10"; 
 $fields{"Number10"} = "Product Number10"; 
 $fields{"Product10"} = "Product10"; 
 $fields{"Fragrance10"} = "Fragrance10"; 
 $fields{"Uprice10"} = "Unit Price10"; 
 $fields{"Tprice10"} = "Total Price10"; 
 $fields{"Item11Page"} = "Page Number11"; 
 $fields{"Number11"} = "Product Number11"; 
 $fields{"Product11"} = "Product11"; 
 $fields{"Fragrance11"} = "Fragrance11"; 
 $fields{"Uprice11"} = "Unit Price11"; 
 $fields{"Tprice11"} = "Total Price11"; 

 $body = "The following is an order from our AVON Web Order Form:\n\n"; foreach($fields as $a => $b){   
 $body .= sprintf("%20s: %s\n",$b,$_REQUEST[$a]); } 

 $headers2 = "From: fromaddress@address.com"; 
 $subject2 = "Thank you for your order"; 
 $autoreply = "Thank you for your order. We will contact you when your order is ready for delivery. If you have any questions, feel free to contact us.";

 if($from == '') {print "You have not entered an email, please go back and try again";} 
 else { 
 if($name == '') {print "You have not entered a name, please go back and try again";} 
 else { 
 $send = mail($to, $subject, $body, $headers); 
 $send2 = mail($from, $subject2, $autoreply, $headers2); 
 if($send) 
 {header( "Location: thankyou.html" );} 
 else 
 {print "We encountered an error sending your mail, please try again later."; } 
 }
}
 ?> 
```

这个新脚本甚至包括一封确认电子邮件，我决定使用一个专用的“谢谢”页面，其中包含一个链接，而不是像以前那样在末尾标记嵌入式 HTML。现在可以享受美食了！接下来我看看我是否能够格式化输出。

# ruby - 如何获得所有定义的类？

> ID：15852515
> 
> 赞同：5
> 
> 时间：2013-04-06T15:09:17.020
> 
> 标签：ruby

有没有办法获取所有已定义类的列表。我正在寻找这样的代码：

```
Class.instances.each do |klass|
  puts klass.name
end 
```

如果没有办法做到这一点。是否可以定义一个类 A 使其后代在其中注册？例如以这种方式：

```
class A
  ...
end

class B < A
end

class C < B
end

A.descendants   # => [B, C] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T15:16:43.123

ObjectSpace 可以帮助您获取一个类的所有实例。这将因此返回所有定义的类

```
ObjectSpace.each_object(Class) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T15:17:41.833

```
p ObjectSpace.each_object(Class){|ob| p ob} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T15:20:19.683

除了`ObjectSpace`，您可以定义的智能钩子方法是`inherited`，Ruby 将在其类被子类化时调用它。

```
class A
  @sub_classes = []

  def self.inherited(sub_class)
    @sub_classes << sub_class
  end
end 
```

# hadoop - 如何将 EMR 生成的 S3 上的小文件与数千个 reducer 合并

> ID：15852520
> 
> 赞同：0
> 
> 时间：2013-04-06T15:10:07.880
> 
> 标签：hadoop, amazon-web-services, amazon-s3, emr, cascalog

我的 cascalog EMR 作业在 S3 存储桶上生成了数千个小文件。它生成的文件数量与我使用的减速器数量相同。转储所有这些小文件需要几分钟时间。我想知道是否有办法在 S3 上连接它们以便我可以快速转储它们？

谢谢

炕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T05:40:24.193

这个问题有几个解决方案——这是我使用的一个：

[https://github.com/nathanmarz/dfs-datastores/blob/develop/dfs-datastores/src/main/java/com/backtype/hadoop/Consolidator.java](https://github.com/nathanmarz/dfs-datastores/blob/develop/dfs-datastores/src/main/java/com/backtype/hadoop/Consolidator.java)

# asp.net - 无法使用 mod_mono 托管 ASP.NET MVC 4 应用程序

> ID：15852524
> 
> 赞同：3
> 
> 时间：2013-04-06T15:10:22.827
> 
> 标签：asp.net, asp.net-mvc-4, mono, debian, mod-mono

我正在尝试使用 mod_mono 在 apache 中托管 ASP.NET MVC 4 应用程序，但我不断收到以下错误：

```
An exception has occurred while generating HttpException page:
System.NullReferenceException: Object reference not set to an instance of an object
at System.Web.Util.HttpEncoder.GetCustomEncoderFromConfig () [0x00000] in <filename unknown>:0
at System.Lazy`1[System.Web.Util.HttpEncoder].InitValue () [0x00000] in <filename unknown>:0

The actual exception which was being reported was:
System.Web.HttpException: Initial exception ---> System.Configuration.ConfigurationErrorsException: Error deserializing configuration section httpRuntime: Unrecognized attribute 'targetFramework'. (/var/www/nishkriya/Web.config line 1)
at System.Configuration.ConfigurationSection.DeserializeSection (System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0
at System.Configuration.Configuration.GetSectionInstance (System.Configuration.SectionInfo config, Boolean createDefaultInstance) [0x00000] in <filename unknown>:0
at System.Configuration.ConfigurationSectionCollection.get_Item (System.String name) [0x00000] in <filename unknown>:0
at System.Configuration.Configuration.GetSection (System.String path) [0x00000] in <filename unknown>:0
at System.Web.Configuration.WebConfigurationManager.GetSection (System.String sectionName, System.String path, System.Web.HttpContext context) [0x00000] in <filename unknown>:0
at System.Web.Configuration.WebConfigurationManager.GetSection (System.String sectionName) [0x00000] in <filename unknown>:0
at System.Web.HttpRuntime..cctor () [0x00000] in <filename unknown>:0
--- End of inner exception stack trace --- 
```

我从源代码编译了 mono 和 mod_mono。

```
root@inez ~# mono --version
Mono JIT compiler version 3.0.7 ((no/514fcd7 Thu Mar 21 22:55:42 GMT 2013)
Copyright (C) 2002-2012 Novell, Inc, Xamarin Inc and Contributors. www.mono-project.com
    TLS:           __thread
    SIGSEGV:       altstack
    Notifications: epoll
    Architecture:  amd64
    Disabled:      none
    Misc:          softdebug
    LLVM:          supported, not enabled.
    GC:            Included Boehm (with typed GC and Parallel Mark) 
```

该应用程序设置为使用 /usr/local/bin/mod_mono_server4 指向

```
exec /usr/local/bin/mono $MONO_OPTIONS "/usr/local/lib/mono/4.5/mod-mono-server4.exe" "$@" 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T12:14:16.970

您可以在 mono Jexus [http://linuxdot.net](http://linuxdot.net)上尝试另一个 asp.net Web 服务器，它支持 ASP.NET MVC 4 应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T12:08:18.657

这闻起来像一个糟糕的安装。您是否在 /usr/bin 中安装了另一个单声道（除了 /usr/local/bin）？如果是，那么您应该擦拭您的盒子并重新开始，但这次请查看本[指南](http://www.mono-project.com/Parallel_Mono_Environments)。

# php - 通过 CURL 在特定项目上发布任务

> ID：15852525
> 
> 赞同：1
> 
> 时间：2013-04-06T15:10:31.030
> 
> 标签：php, asana

我似乎在尝试使用 Asana API 时遇到了困难。我正在尝试在**特定项目**上发布任务。

这是我正在尝试的：

```
$api = 'myapikey';
$url = 'https://app.asana.com/api/1.0/tasks';

$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); // Don't print the result
curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 30);
curl_setopt($curl, CURLOPT_TIMEOUT, 30);
curl_setopt($curl, CURLOPT_FAILONERROR, true);
curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, 0); // Don't verify SSL connection
curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, 0); //         ""           ""
curl_setopt($curl, CURLOPT_USERPWD, $api);
curl_setopt($curl, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($curl, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));
$data = array(
    "data" => array(
        "workspace" => "workspace id",
        "name" => "Task Name",
        "notes" => "notes",
        "assignee" => "assignee id"
    )
);
$data = json_encode($data);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $data);        
$html = curl_exec($curl);
curl_close($curl);

$html = json_decode($html);
var_dump($html); 
```

它没有用，它在`Undefined Project`. 我尝试了以下变体：

1.  `$url = 'https://app.asana.com/api/1.0/projects/4649161839339/tasks';`

2.  `$url = 'https://app.asana.com/api/1.0/tasks/projects/4649161839339';`

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T18:29:09.467

您可以通过指定一个`projects`字段在创建时将项目添加到任务中，该字段由一组项目 ID 组成以添加任务，即：`"projects" => [4649161839339],`。这应该包含在开发人员文档中。

对于 PHP

```
$data = array(
    "data" => array(
        "workspace" => "workspace id",
        "projects" => array('project_id'),
        "name" => "Task Name",
        "notes" => "notes",
        "assignee" => "assignee id"
    )
); 
```

创建任务后，您可以使用`/tasks/ID/addProject`和`/tasks/ID/removeProject`端点添加和删除项目。

# php - strtotime 返回错误的数字？

> ID：15852526
> 
> 赞同：0
> 
> 时间：2013-04-06T15:10:31.637
> 
> 标签：php, strtotime

当我运行这个：

```
echo strtotime("January 1, 1970 00:16:00"); 
```

我明白了：

```
-2640 
```

这怎么可能？我不想要一个负数，我想要一个正数。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:12:16.127

您的时区设置为 GMT。时间戳采用 UTC，目前比 GMT 晚一小时。

# c++ - 编译器认为“A(A&)”暂时接受右值？

> ID：15852528
> 
> 赞同：21
> 
> 时间：2013-04-06T15:10:39.623
> 
> 标签：c++, c++11, overload-resolution, list-initialization

我有这个代码

```
struct A { A(); A(A&); }; 
struct B { B(const A&); }; 

void f(A); 
void f(B); 

int main() { 
   f(A()); 
} 
```

令我惊讶的是，这在 GCC 和 Clang 中失败了。Clang 例如说

```
Compilation finished with errors:
source.cpp:8:10: error: no matching constructor for initialization of 'A'
       f(A()); 
         ^~~
source.cpp:1:21: note: candidate constructor not viable: expects an l-value for 1st argument
    struct A { A(); A(A&); }; 
                    ^
source.cpp:1:16: note: candidate constructor not viable: requires 0 arguments, but 1 was provided
    struct A { A(); A(A&); }; 
               ^
source.cpp:4:13: note: passing argument to parameter here
    void f(A); 
```

`f`当第二个工作正常时，他们为什么选择第一个`f`？如果我删除第一个`f`，则调用成功。对我来说更奇怪的是，如果我使用大括号初始化，*它也可以正常工作*

```
int main() { 
   f({A()}); 
} 
```

他们都叫第二个`f`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-06T15:21:24.490

这是一个语言怪癖。第一个`f`匹配得更好，因为您`A`不需要转换来匹配参数类型 ( `A`)，但是当编译器尝试进行调用时，找不到合适的复制构造函数会导致调用失败。在执行重载解决步骤时，该语言不允许考虑实际调用的可行性。

最接近的匹配标准引用 ISO/IEC 14882:2011 13.3.3.1.2 用户定义的转换序列 [over.ics.user]：

> 将类类型的表达式转换为相同的类类型被赋予精确匹配等级，而将类类型的表达式转换为该类型的基类的转换被赋予转换等级，尽管事实上复制/移动为这些情况调用构造函数（即，用户定义的转换函数）。

对于列表初始化案例，您可能需要查看：13.3.3.1.2 用户定义的转换序列 [over.ics.user]

> 当非聚合类类型 T 的对象被列表初始化（8.5.4）时，重载决策分两个阶段选择构造函数：
> 
> — 最初，候选函数是类 T 的初始化器列表构造函数（8.5.4），参数列表由初始化器列表作为单个参数组成。
> 
> — 如果没有找到可行的初始化列表构造函数，则再次执行重载决议，其中候选函数是类 T 的所有构造函数，参数列表由初始化列表的元素组成。

因为重载决议必须在每种情况下查看可行的构造函数，`f(A)`并且它必须拒绝`f(B)`尝试绑定但仍然可行的序列。`A()``A(A&)``B(const A&)`

# scala - 在参与者系统中隐式传递请求上下文

> ID：15852531
> 
> 赞同：5
> 
> 时间：2013-04-06T15:11:00.933
> 
> 标签：scala, akka, actor, implicit-conversion, implicit

我想在协作参与者系统中隐式传播请求上下文。

为了简化和呈现这种情况，我的系统有多个参与者，传递给这些参与者的消息需要包含这个 RequestContext 对象。

ActorA 接收 MessageA 类型的消息 ActorB 接收 MessageB 类型的消息

当 ActorA 需要向 ActorB 发送消息时，作为 MessageA 处理的一部分，它会执行业务逻辑，然后根据逻辑结果以及 MessageA 中可用的 RequestContext 构造一个 MessageB，然后将其发送给 ActorB

```
def handle(ma:MessageA) {
 val intermediateResult = businessLogic(ma)
 actorB ! MessageB(intermediateResult, ma.requestContext)
} 
```

我们要处理大量消息，并且显式传递 requestContext 很麻烦。

我正在尝试使用 Scala 的隐式功能的创造性方法来避免将嵌入在传入消息中的 RequestContext 显式注入到传出消息中。

这些消息是案例类（它们必须是）。我已经阅读了有关隐式规则的内容，但是将对象的属性带入当前的隐式范围似乎有些牵强。

我相信这应该是一个普遍的要求。有什么建议么 ？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T16:38:50.610

在您的示例中，您对相关消息的处理已经被分解为一个方法，这使得这很简单：

```
trait RequestContext

case class MessageA(req: RequestA, ctx: RequestContext)
object MessageA {
  def apply(req: RequestA)(implicit ctx: RequestContext) = MessageA(req, ctx)
}

case class MessageB(req: RequestB, ctx: RequestContext)
object MessageB {
  def apply(req: RequestB)(implicit ctx: RequestContext) = MessageB(req, ctx)
}

class Example extends Actor {

  def receive = {
    case MessageA(req, ctx) => handle(req)(ctx)
  }

  def handle(req: RequestA)(implicit ctx: RequestContext): Unit = {
    val intermediateResult = businessLogic(req) // could take implicit ctx as well
    actorB ! MessageB(intermediateResult)
  }
} 
```

但正如您所见，在声明消息类型时仍然存在一些开销，并且`handle`方法的签名也需要更改。这个方案是否值得取决于这些隐含值的消费者和生产者之间的比例（即，如果不止一件事物`handle`使用上下文，它更有意义）。

上述变化可能是：

```
case class MessageA(req: RequestA, ctx: RequestContext)
object MessageA {
  def apply(req: RequestA)(implicit ctx: RequestContext) = MessageA(req, ctx)
  implicit def toContext(implicit msg: MessageA) = msg.ctx
}

case class MessageB(req: RequestB, ctx: RequestContext)
object MessageB {
  def apply(req: RequestB)(implicit ctx: RequestContext) = MessageB(req, ctx)
  implicit def toContext(implicit msg: MessageB) = msg.ctx
}

...
def handle(implicit ma: MessageA): Unit = {
  val intermediateResult = businessLogic(req)
  actorB ! MessageB(intermediateResult)
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T18:23:48.830

在我看来，最简单的方法是让你的 val 隐含在案例类中。

```
case class MessageA(req: RequestA)(implicit val ctx: RequestContext)

case class MessageB(req: RequestB)(implicit val ctx: RequestContext)

def businessLogic(req:RequestA):RequestB

def handle(ma: MessageA): Unit = {
  // import all the members of ma so that there is a legal implicit RequestContext in scope
  import ma._
  val intermediateResult = businessLogic(req)
  actorB ! MessageB(intermediateResult)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-27T19:33:01.457

创建一个包含原始消息和上下文的通用信封类。创建一个特征扩展`Actor`（你必须把它放在`akka._`包中）。解包信封的覆盖方法`aroundReceive()`，初始化参与者的受保护变量以存储当前上下文，使用解包消息调用原始接收方法，取消初始化上下文变量。相当可疑的方法，但这正是`Actor.sender()`行为方式。

要将消息发送给这样一个上下文绑定的参与者，您必须手动将消息包装到上面提到的信封中，或者您也可以通过引入一个扩展来自动执行此任务，该扩展`ActorRef`通过将消息提升到上下文来实现告诉/询问操作-边界。

这不仅仅是一个概念，而是我最近成功尝试的方法的简要总结。此外，我通过引入另一个抽象概念对它进行了更多概括——隐式上下文环境，如基于 actor、基于 ThreadLocal、基于 Future 等，这使我能够轻松地在所有同步/异步操作链中隐式传递上下文数据。

# php - PHPSESSID 是如何保存的？

> ID：15852537
> 
> 赞同：1
> 
> 时间：2013-04-06T15:11:20.620
> 
> 标签：php

有谁知道的工作原理`PHPSESSID`？它是如何工作的以及保存在哪里？它是保存在客户端还是服务器端，如果他知道我的，另一台 PC 是否能够从他的 PC 连接到我的帐户`PHPSESSID`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:15:38.573

是的，这就是为什么最好不要通过 url 传递会话 id，而是使用 cookie：

php.ini：`session.use_cookies = 1`

在这种情况下，服务器中有一个文件夹 (php.ini: `session.save_path`) 将存储文件，并且在您的硬盘驱动器中还有一个 cookie，用于将您的凭据映射到注册的 session_id。

php.ini：`session.cookie_lifetime`

设置此 cookie 的生存时间（0 表示无限），而

php.ini：`session.gc_maxlifetime`

定义它将在服务器上存在多长时间。

利用

php.ini：`session.cookie_httponly = 1`连同`session.cookie_secure = 1`（如果您使用的是 ssl）

改善对您的 cookie 信息的保护，使它们无法通过 javascript 访问，这是在 xss 攻击将您的 cookie 发送到恶意目的地时的最后机会降落伞。

正如Explosion Pill所指出的那样，总有一种方法可以被劫持。你所能做的就是让它变得更难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T15:18:10.410

会话数据以会话 ID 作为标识保存在服务器端的文件系统中。实际位置会有所不同，您可以通过`session.save_path`ini 设置进行更改。您也可以更改`PHPSESSID`名称，但这将作为 cookie 提供给客户端并引用会话文件。在我的系统上

```
/var/lib/php5/sess_53jsd3icrkbqbbfrl6qlv6e6a7 
```

浏览时我有 PHPSESSID cookie `53jsd3icrkbqbbfrl6qlv6e6a7`。

由于这用于识别会话，因此如果暴露它会带来安全风险，所以是的，如果用户知道会话 ID，他们可以窃取您的会话。这称为会话劫持。请注意，即使`session.use_cookies = 1`是不够的，因为如果他们知道，没有什么可以阻止某人设置该 cookie。使用 https 加密 cookie 是我所知道的唯一有效的解决方案。

# ios - SDK“iOS 6.0”中的产品类型“应用程序”需要代码签名

> ID：15852542
> 
> 赞同：1
> 
> 时间：2013-04-06T15:12:08.903
> 
> 标签：ios, certificate

我已经完成了我的应用程序，我创建了开发和分发配置文件，并且我在没有代码设计的情况下对其进行了测试，并且运行正常，但是当我将代码设计更改为分发配置文件时，我收到了这个错误检查依赖项

```
 CodeSign error: code signing is required for product type 'Application' in SDK 'iOS 6.0' 
```

我的设备是 6.0.1，我的 xcode 是 4.5.2 任何帮助请

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T22:21:18.447

您需要转到构建设置并为“任何 iOS SDK”的每个调试和发布设置一个“代码签名身份”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-23T04:40:26.563

@mskw 是正确的，但我还必须做一些其他事情才能让它工作（小而微妙但必要！）：

单击代码窗口顶部的小按钮，显示一个 iOS 设备（我碰巧插入了该设备）：

![在此处输入图像描述](https://i.stack.imgur.com/kJydZ.png)

而是选择一个模拟器。

![在此处输入图像描述](https://i.stack.imgur.com/bW0dk.png)

我认为这只是因为我当时碰巧插入了 iPad。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-29T07:03:01.847

1.取消选中编辑方案中的测试。

2.我在代码签名身份中将ios开发人员更改为“任何iOS SDK”，但没有工作。

**最后**

我在调试和发布代码签名身份中将“任何 iOS SDK”更改为 iOS 开发人员，如下图所示

[![在此处输入图像描述](https://i.stack.imgur.com/GCzzf.png)](https://i.stack.imgur.com/GCzzf.png)

# asp.net - 在 div 中居中 toastr 通知

> ID：15852550
> 
> 赞同：5
> 
> 时间：2013-04-06T15:12:31.830
> 
> 标签：asp.net, css, toastr

我试图让我的[toastr 通知](http://www.johnpapa.net/toastr100beta/)出现在 div 的中间。我已经看到了一些建议，例如[这个](http://www.johnpapa.net/centering-toastr-with-css/)，但它基于整个窗口而不是在 div 中居中。

当 toastr 对表单上的元素一无所知时，是否可以将 toast 通知集中在表单元素中？

我最近的尝试是在页面中大致居中吐司，但我想将它放在某个 div 中。那可能吗？如果是这样，怎么做？

这是我的居中尝试：

```
.toast-center {
    top: 50%;
    left: 40%;
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/BAh8H.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T15:29:24.100

您可以尝试创建一个新的 div 并将其放置在您预期的 div 的中心。

然后您可以使用`positionClass`toastr 选项，这是您的通知弹出位置

```
toastr.options: {
    "positionClass": "your-newly-created-div-class"
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-01T07:49:31.727

在 toastr.css 中，添加：

```
.toast-top-center {
    top: 12px;
    left:50%;
    margin:0 0 0 -150px;
} 
```

在 JavaScript 中，使用这个：

```
toastr.options = {
    positionClass: 'toast-top-center'
}; 
```

如果您的 toast div 有其他宽度，您可以将上面的 CSS 修改为它的一半宽度。

```
margin:0 0 0 (here caculate the -width/2 px for yourself) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-08T14:42:26.977

你可以用jquery来做

在 toastr.css 中，添加：

```
.toast-top-center { 
   top: 12px;   
   margin: 0 auto;  
   left: 50%;   
   margin-left: -150px;
 } 
```

在 js 文件中添加以下内容：

```
toastr.options = {
    positionClass: 'toast-top-center'
};

toastr.success("Your Message Header", "Your Message");

var $notifyContainer = $('#toast-container').closest('.toast-top-center');
if ($notifyContainer) {
   // align center
   var windowHeight = $(window).height() - 90;
   $notifyContainer.css("margin-top", windowHeight / 2);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-05T08:09:36.697

以下片段在角度 ~9.1.0 中使用**"ngx-toastr": "^12.1.0"**进行了测试。

**组件名称.ts**

```
import { ToastrService } from 'ngx-toastr';

@Component({
  selector: 'app-component-name',
  templateUrl: './component-name.component.html',
  styleUrls: ['./component-name.component.scss']
})
export class ComponentName implements OnInit {

    constructor(private readonly toastrService: ToastrService) { }

      ngOnInit(): void {
        this.toastrService.toastrConfig.positionClass = 'toast-top-center';
      }
} 
```

**组件名称.scss**

```
.toast-top-center { 
    top: 12px;   
    margin: 0 auto;  
    left: 50%;   
    margin-left: -150px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-11T22:36:21.497

在 ngx-toastr (^14.1.4) 的最新版本中有一个针对这个问题的原生解决方案，如果您检查 toast.css 文件，您可以看到以下内容：

```
.toast-center-center {
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
 }
```

`{positionClass: 'toast-center-center' }`因此，当您调用 toastr 通知时，您只需在 .ts 中使用

# bash - 这是 busterjs 单元测试框架中的错误吗？

> ID：15852552
> 
> 赞同：0
> 
> 时间：2013-04-06T15:12:43.630
> 
> 标签：bash, node.js, unit-testing, buster.js

我在 busterjs 中运行我的测试，其中一个有错误 - 但我仍然得到一个 0 返回码。这导致我的 CI 服务器在应该为“红色”时将构建状态显示为“绿色”

```
iMac:tests caseyflynn$ buster test
API GET /users: ..
Module components/apiAuth: .........
Module components/controllers: ....
Module components/routeParrot: ..F.

Deferred: API GET /users GET /api/users "client_super_admin" returns all users for given client
Deferred: API GET /users GET /api/users "super_admin" returns all users
Deferred: API GET /users GET /api/users "client_admin" returns all users for given client
Deferred: API GET /users GET /api/users "client_delegate" returns all users for given client
Deferred: API GET /users GET /api/users "client_auditor" returns all users for given client

Failure: Module components/routeParrot Modifies socket.io request to API
    [assert.calledWith] Expected function spy() {} to be called with arguments { headers: [], method: "get", url: "/api/users" }, { jsonAPIRespond: function () {} }
    spy({
  data: { headers: [], method: "get", url: "/users" },
  headers: [],
  method: "get",
  requestType: "socketio",
  url: "/api/users"
}, { jsonAPIRespond: function () {} })
    at Object.buster.testCase.Modifies socket.io request to API (./componentsTests/routeParrotTest.js:70:21)

4 test cases, 19 tests, 44 assertions, 1 failure, 0 errors, 0 timeouts, 5 deferred
Finished in 0.044s
iMac:tests caseyflynn$ echo $?
0 
```

# ios - 按下主页按钮时，CABasicAnimation 消失

> ID：15852554
> 
> 赞同：3
> 
> 时间：2013-04-06T15:12:58.910
> 
> 标签：ios, objective-c, background, cabasicanimation

我正在实现一个游戏，其中有一些 CABasicAnimations。例如，像这样：

```
CABasicAnimation * borddroit = [CABasicAnimation animationWithKeyPath:@"transform.translation.x"];
borddroit.fromValue = [NSNumber numberWithFloat:0.0f];
borddroit.toValue = [NSNumber numberWithFloat:749.0f];
borddroit.duration = t;
borddroit.repeatCount = 1;
[ImageSuivante2.layer addAnimation:borddroit forKey:@"borddroit"]; 
```

我用这个功能暂停了它：

```
-(void)pauseLayer:(CALayer*)layer
{
    CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
    layer.speed = 0.0;
    layer.timeOffset = pausedTime;
} 
```

当我的应用程序进入后台时，因为用户按下主页按钮，动画正确设置为暂停，但是当我重新打开我的应用程序时，动画消失了。

请问我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T15:16:21.307

这是正确的内置行为。当您离开应用程序时，所有动画都会从它们的图层中删除：系统会`removeAllAnimations`在每个图层上调用。

这并不重要，通常是因为以下原因：假设您将一个球从 A 点设置为 B 点，并且当用户离开您的应用程序时，它在动画中到 B 点的一半。当用户回来时，动画消失了，但球*在*B 点，所以应用程序可以继续。所发生的只是我们跳过了一些动画部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T10:36:24.537

观察`UIApplicationWillEnterForegroundNotification`并重新设置动画`CAAnimation`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-09T09:51:02.467

只需在您`UIViewController`或您的`UIView`班级中添加以下代码。无需恢复或重新开始动画。它会自己处理:)

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(becomeActive:) name:UIApplicationWillEnterForegroundNotification object:nil];

-(void)becomeActive : (NSNotification*)notification
  {
    NSLog(@"app become active");
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-05T09:20:57.373

当视图从可见区域消失时，所有动画都会被删除（不仅是当应用程序进入后台时）。为了修复它，我创建了自定义`CALayer`子类并覆盖了 2 个方法，因此系统不会删除动画 -`removeAnimation`并且`removeAllAnimations`：

```
class CustomCALayer: CALayer {

    override func removeAnimation(forKey key: String) {

        // prevent iOS to clear animation when view is not visible
    }

    override func removeAllAnimations() {

        // prevent iOS to clear animation when view is not visible
    }

    func forceRemoveAnimation(forKey key: String) {

        super.removeAnimation(forKey: key)
    }
} 
```

在您希望将此层用作主层覆盖`layerClass`属性的视图中：

```
override class var layerClass: AnyClass {

    return CustomCALayer.self
} 
```

# c - IF - 带有字符比较的条件在 C 中不起作用

> ID：15852556
> 
> 赞同：4
> 
> 时间：2013-04-06T15:13:11.640
> 
> 标签：c

**我真的不知道这是什么错误。这似乎是对的，不是吗？**

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
   char op;

   printf("Type in operator (+,-,/,*):");
   scanf("%i",&op);

   if(op == '+')
   {
      printf("You entered a plus");
   }

   system("pause"); 
   return 0;
} 
```

我希望它在输入 + 时打印“你输入了一个加号”。它不是。

*我对 C 有点陌生。在此先感谢 :)*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:14:14.453

`if`条件很好。问题是`scanf()`格式，应该是

```
scanf("%c",&op); 
```

（`%i`读取一个整数，而`%c`读取一个`char`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:14:34.553

```
scanf("%i", &op); 
```

你期待一个整数。所以，当你写一个字符并按下`<Enter>`时，`scanf`失败（你可以检查它的返回值来查看它）：

```
if (scanf("%i", &op) != 1)
{
    /* Treat the error. */
} 
```

使用相当`%c`格式`scanf`来读取字符：

```
scanf("%c", &op); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T17:57:35.100

您的问题是格式说明符错误

```
//In scanf instead of 
scanf("%i",&op);
// you have to provide 
scanf("%c",&op);

%i use for reading integer whereas %c use for reading char. 
```

# php - Javascript foreach 每次都给我相同的价值

> ID：15852563
> 
> 赞同：0
> 
> 时间：2013-04-06T15:14:12.097
> 
> 标签：php, javascript, jquery, ajax, forms

我在 javascript 中有一个 foreach 函数，可以一次上传多个文件，并在 div 中显示它们以及上传的百分比。我的问题我现在只是在测试，我创建了一个变量来获取输入中每个文件的名称，但是一个输入中有多个文件，所以我提醒我创建的变量以获取文件的名称，但我得到了提醒每次最后一个文件。下面是我的代码。

```
$('#File').change(function(event) {
        for(I = 0; I < this.files.length; I++)
        {
            var Name = this.files[I].name;
            var Type = this.files[I].type;
            var Size = this.files[I].size;

            var Add = '';
            Add += '<div class="UploadLabel" style="width:60%;">'+Name+'</div>';
            Add += '<div id="UpPer" class="UploadLabel" style="width:10%;">0%</div>';
            Add += '<div class="UploadLabel" style="width:15%;">N/A</div>';
            Add += '<div class="UploadLabel" style="width:15%;">'+Type+'</div>';
            $('#UploadContent').append(Add);

            var Data = new FormData();
            Data.append('File[]', this.files[I]);
            var Request = new XMLHttpRequest();

            Request.upload.addEventListener('progress', function(event) {
                if(event.lengthComputable)
                {
                    var Percent = event.loaded / event.total;
                    alert(Name);
                }
            });

            Request.open('POST', 'Upload/Upload.php');
            Request.setRequestHeader('Cache-Control', 'no-cache');
            Request.send(Data);
            $('#UploadModal').fadeIn('fast');
        }
    }); 
```

查看进度功能，我提醒了 Name 变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:16:32.753

那是因为你的变量`Name`在调用回调时具有循环结束的值。

您可以使用立即调用的函数来保护此变量：

```
(function(Name){
    Request.upload.addEventListener('progress', function(event) {
         if(event.lengthComputable){
               var Percent = event.loaded / event.total;
               alert(Name);
         }
    });
})(Name); 
```

这个中间函数创建了一个作用域，其中新的 Name 变量受到保护。

或者，如果您需要其他变量，您可以声明一个`I`包含循环全部内容的函数。

你也可以使用 jQuery `each`：

```
$.each(this.files, function(I) {
      // the content of your loop
}); 
```

使用 by 调用的函数`each`也会为所需的 Name 值创建一个范围。

# ruby - 在 Ruby 中，可以将文件和行号放入 Logger.formatter 吗？

> ID：15852570
> 
> 赞同：3
> 
> 时间：2013-04-06T15:14:53.983
> 
> 标签：ruby, logging

我想要一个输出格式，如：

> /some/path/to/the/source/file(999) ：要记录的消息

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T15:14:53.983

此解决方案依赖于内部 Logger 调用链结构。因此，由 Logger 本身支持这一点会很好，这样它就不那么脆弱了。

```
require 'logger'

...

module MyModule

@@_logger_ = Logger.new(STDOUT);

def self.log
    @@_logger_
end

def log
    @@_logger_
end

@@_logger_.formatter = proc do |severity, datetime, progname, msg|
    fileLine = "";
    caller.each do |clr|
        unless(/\/logger.rb:/ =~ clr)
            fileLine = clr;
            break;
        end
    end
    fileLine = fileLine.split(':in `',2)[0];
    fileLine.sub!(/:(\d)/, '(\1');
    "#{fileLine}) : #{msg}\n"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T18:26:44.763

__FILE__ 和 __LINE__ 是一种动态常量，用于保存当前正在执行的文件和行。

[class_eval <<-"end_eval", __FILE__, __LINE__ 在 Ruby 中是什么意思？](https://stackoverflow.com/questions/2496102/what-does-class-eval-end-eval-file-line-mean-in-ruby)

# vb.net - 使用 google search api 无限搜索 dotnet

> ID：15852573
> 
> 赞同：0
> 
> 时间：2013-04-06T15:15:02.430
> 
> 标签：vb.net, google-api

我刚刚开始熟悉 google search api，这真的是一件好事，我可以经常使用它。但是当我在 visual basic 中测试它时，我发现它是有限的，你每天不能搜索超过 100 个查询。有什么方法可以搜索更多吗？

这是我的代码：

```
 Dim client As New Google.API.Search.GwebSearchClient("http://www.google.com")
    Dim results As IList(Of Google.API.Search.IWebResult) = client.Search("site:uploadbaz.com " + TextBox1.Text, 5)

    For Each result As IWebResult In results
            ListBox1.Items.Add(result.Url)
            ListBox2.Items.Add(result.Content)
    Next 
```

# javascript - 滑块内容在初始化前出现一秒钟

> ID：15852575
> 
> 赞同：0
> 
> 时间：2013-04-06T15:15:19.107
> 
> 标签：javascript, css

我有一个小问题，希望你能帮助我。 [我的滑块](http://12hrs.net/guides/12-hrs-in-antwerp/)在图片加载之前显示文件名（`image1.jpg, image2.jpg`）。

我尝试将以下代码添加到我的 CSS 中，但没有任何运气：

```
 .slider > .rsContent {
display: none;
   } 
```

你们还有其他的想法如何摆脱它吗？

这是[文档](http://help.dimsemenov.com/kb/royalslider-jquery-plugin-issues/slider-content-appears-for-a-second-before-initialization)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:42:58.187

您的图像标签在您的 <HTML> 标签之外。我不知道这是否是无意的，但我希望这没有帮助。将它们移动到您的 html 中并使用您的 CSS 隐藏它们，并在加载顺序中尽可能地向上移动您的样式表。

基本上就是您帖子下的两条评论中描述的内容。两者都做应该可以解决它。

# python - 如何将 ndarray 转换为结构化数组？

> ID：15852579
> 
> 赞同：2
> 
> 时间：2013-04-06T15:15:40.667
> 
> 标签：python, numpy

我有一个带有 shape 的常规 float ndarray `(100,50)`。如何为前两列（即`'idx1'`和`'idx2'`）以及`'data'`其余列命名。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T16:13:20.520

您可以使用该`view`方法。这是一个示例，使用形状为 (3, 5) 的数组进行演示：

```
In [21]: x
Out[21]: 
array([[  0.,   1.,   2.,   3.,   4.],
       [  5.,   6.,   7.,   8.,   9.],
       [ 10.,  11.,  12.,  13.,  14.]])

In [22]: y = x.ravel().view(dtype=[('idx1', float), ('idx2', float), ('data', float, 3)])

In [23]: y['idx1']
Out[23]: array([  0.,   5.,  10.])

In [24]: y['data']
Out[24]: 
array([[  2.,   3.,   4.],
       [  7.,   8.,   9.],
       [ 12.,  13.,  14.]])

In [25]: y['data'][1]
Out[25]: array([ 7.,  8.,  9.]) 
```

请注意，这`y`是一个一维数组；它具有形状 (3,)。如果您将转换更改为`y = x.view(...)`（即不要 ravel `x`），`y`则将具有 (3,1)，并且`y['idx1']`将具有形状 (3,1)。

# jquery - 调用自的函数未定义

> ID：15852580
> 
> 赞同：3
> 
> 时间：2013-04-06T15:16:00.003
> 
> 标签：jquery, scope

在`<head>`网页中，我在准备好的文档中具有以下功能：

```
<script type="text/javascript">
    jQuery(document).ready(function ($){
        function productImageCycle(){
            // Function contents...
        };
    });
</script> 
```

该函数的内容在指定元素上调用 jQuery Cycle 插件。我可以在同一文档就绪事件中的其他任何地方成功调用它，`productImageCycle();`用于 AJAX 编辑的内容。

但是 - 就在结束`</body>`标记之前 - 我像这样调用相同的插件（以建议的方式），以便它适用于页面加载：

```
<script type="text/javascript">
    jQuery(document).ready(function ($){
        // Function... (identical to contents of "productImageCycle")
    });
</script> 
```

但这意味着我在重复代码。

我尝试用调用中声明的函数替换后者`<head>`，但是在页面加载时插件无法工作，并且浏览器控制台告诉我 productImageCycle 未定义。

我可以很容易地在页面加载时从内部调用它，`<head>`但我相信这是一个坏主意；是吗？如果是这样，有没有办法从内部调用它`<body>`？

注意：我想这与范围有关——我正在努力理解这个概念，但它还没有完全奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:20:00.383

我建议不要在另一个函数中声明顶级函数。你为什么不把头代码转过来？这样，您还可以省略`$(document).ready`将来的调用。

头：

```
function productImageCycle(){
    jQuery(document).ready(function ($){
        // Function contents...
    });
}(); 
```

（注意`()`最后，直接调用函数）。

# c# - c# task阻塞了ui

> ID：15852581
> 
> 赞同：-1
> 
> 时间：2013-04-06T15:16:06.453
> 
> 标签：c#

我有这段代码可以从 url 反序列化 JSON，但 GUI 仍然被阻止，我不知道如何解决它。

按钮代码：

```
private void button1_Click(object sender, EventArgs e)
{
    var context = TaskScheduler.FromCurrentSynchronizationContext();
    string RealmName = listBox1.Items[listBox1.SelectedIndex].ToString();
    Task.Factory.StartNew(() => JsonManager.GetAuctionIndex().Fetch(RealmName)
    .ContinueWith(t =>
    {
        bool result = t.Result;
        if (result)
        {
            label1.Text = JsonManager.GetAuctionIndex().LastUpdate + " ago";
            foreach (string Owner in JsonManager.GetAuctionDump().Fetch(JsonManager.GetAuctionIndex().DumpURL))
            {
                listBox2.Items.Add(Owner);
            }
        }
    },context));
} 
```

获取和反序列化函数

```
public async Task<bool> Fetch(string RealmName)
{           
    using (WebClient client = new WebClient())
    {
        string json = "";
        try
        {
            json = client.DownloadString(new UriBuilder("my url" + RealmName).Uri);                 
        }
        catch (WebException)
        {
            MessageBox.Show("");
            return false;
        }
        catch
        {
            MessageBox.Show("An error occurred");
            Application.Exit();
        }
        var results = await JsonConvert.DeserializeObjectAsync<RootObject>(json);

        TimeSpan duration = DateTime.Now - Utilities.UnixTimeStampToDateTime(results.files[0].lastModified);
        LastUpdate = (int)Math.Round(duration.TotalMinutes, 0);
        DumpURL = results.files[0].url;
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:22:08.017

在您的`Fetch`方法中，您还应该使用 await 从 WebClient 下载字符串数据，方法是将其更改为：

```
json = await client.DownloadStringAsync(new UriBuilder("my url" + RealmName).Uri); 
```

而不是使用`Task`带有延续的a，你应该在你的按钮事件处理程序中使用await：

```
private async Task button1_Click(object sender, EventArgs e)
{
    string RealmName = listBox1.Items[listBox1.SelectedIndex].ToString();

    bool result = await JsonManager.GetAuctionIndex().Fetch(RealmName);
    if (result)
    {
        label1.Text = JsonManager.GetAuctionIndex().LastUpdate + " ago";
        foreach (string Owner in await JsonManager.GetAuctionDump().Fetch(JsonManager.GetAuctionIndex().DumpURL))
        {
            listBox2.Items.Add(Owner);
        }
    }
} 
```

延续现在由 C# 编译器设置。默认情况下，它将在 UI 线程上继续，因此您不必手动捕获当前同步上下文。通过等待您的 Fetch 方法，您会自动将 Task 解包为 bool，然后您可以继续在 UI 线程上执行代码。

# c++ - dllexport 避免头文件中的模板实例化

> ID：15852585
> 
> 赞同：1
> 
> 时间：2013-04-06T15:16:28.863
> 
> 标签：c++, templates, dllexport

我有一个像下面这样的 c++ 类，它编译得很好，直到我尝试从 dll 中导出它。

MyClass.h：

```
class SomeClassNotDefinedHere;

class MyClass {
   protected:
   templated<SomeClassNotDefinedHere> m_member;     
} 
```

如果我使用导出它

```
 class __declspec(dllexport) MyClass 
```

它无法编译，试图实例化`templated<SomeClassNotDefinedHere>`.

有没有一种简单的方法可以避免这种情况？我不想添加 SomeClassNotDefinedHere 作为使用 MyClass 的每个库的依赖项。

一些模板化的代码，这是一个类似于类的智能指针。（试图使我的示例最小化，真正的模板类是[osg::ref_ptr](http://www.openscenegraph.org/projects/osg/browser/OpenSceneGraph/trunk/include/osg/ref_ptr)）

```
template<class T>
 class templated
{
    public:
        typedef T element_type;

        templated() : _ptr(0) {}
        templated(T* ptr) : _ptr(ptr) { if (_ptr) _ptr->ref(); }
        templated(const templated& rp) : _ptr(rp._ptr) { if (_ptr) _ptr->ref(); }
       private:
            T* _ptr;
} 
```

避免类或大型重新设计是我宁愿避免的，代码已经在 linux 上使用。

# c# - 计时器滴答时将图片框移动到随机 X 和 Y

> ID：15852590
> 
> 赞同：1
> 
> 时间：2013-04-06T15:17:10.353
> 
> 标签：c#

我有一个名为 barrierPicture 的图片框，当我的计时器 (obstacleTimer) 滴答作响时，我想将其移动到一个新的随机 X 和 Y 位置。

它移动的意义在于它是我制作的游戏中的障碍。

表格的 1025；545px 大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:26:55.017

假设您的图片框尺寸为 100x100 像素。timer1 应该被启用

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public Random r = new Random();
        private void timer1_Tick(object sender, EventArgs e)
        {
            int x = r.Next(0,925);
            int y = r.Next(0,445);
            pictureBox1.Top = y;
            pictureBox1.Left = x;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:24:56.683

尝试这样的事情：

```
 public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            tm.Interval = 100;
            tm.Tick += new EventHandler(tm_Tick);
            tm.Start();
        }
        Timer tm = new Timer();
        void tm_Tick(object sender, EventArgs e)
        {
            pictureBox1.Location = new Point((int)(new Random().Next(0, 1025)), (int)(new Random().Next(0, 545)));
        }

    } 
```

**已编辑：**您还必须检查您的图片是否在表格内：

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            tm.Interval = 1000;
            tm.Tick += new EventHandler(tm_Tick);
            tm.Start();
        }
        Timer tm = new Timer();
        int X = 0;
        int Y = 0;
        void tm_Tick(object sender, EventArgs e)
        {
            X = ((int)(new Random().Next(0, 1025)));
            Y = ((int)(new Random().Next(0, 545)));
            if (X > 1025 - pictureBox1.Width)
            {
                X = 1025 - pictureBox1.Width;
            }
            if (Y > 545 - pictureBox1.Height)
            {
                Y = 545 - pictureBox1.Height;
            }
            pictureBox1.Location = new Point(X, Y);
        }

    } 
```

# javascript - 如何调用控制器方法和更新视图？

> ID：15852591
> 
> 赞同：1
> 
> 时间：2013-04-06T15:17:11.530
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3, razor

我正在为学术目的学习 ASP.net，为了掌握信息的传递方式，我正在尝试实现这一点：

页面上有一个文本框、按钮和表格。当我在 texbox 中输入文本并按下按钮时，它会将内容发送到该视图的控制器 (Stocks.addSymbol(string)) 中的一个方法，然后将字符串添加到列表中并更新页面中的表格以包含新字符串（无需刷新）。

它分为两部分：从视图调用控制器方法（可能使用 Javascript/JQuery），以及在不强制刷新的情况下更新视图中的内容。

由于我是 ASP.net 的新手并且对 Javascript/JQuery 相当陌生，因此我们将不胜感激任何帮助。谢谢！

索引.cshtml：

```
<script>
    $(function() {
        $('#addStock').on('click', function () {
            console.log("Sending data");
            $.ajax({
                dataType: "json",
                url: 'StockController/AddStock',
                data: {symbol: $('#symbol').val()}
            }).done(function (data) {
                console.log("adding row");
                $('#dataTable').append('<tr><td>' + data.name + '</td><td>' + data.symbol + '</td><td>' + data.price + '</td></tr>');
            });
            console.log("completed?");
        });
    });
</script>

<p>
 <label for="symbol">Stock Symbol</label>
 <input type="text" id="symbol" name="symbol">
 <input type="button" id="addStock" value="Look up">
</p>

@if (ViewBag.success)
{
    <table id="dataTable">
        <tr>
            <th>Name</th>
            <th>Symbol</th>
            <th>Price</th>
        </tr>
        @foreach (StocksWithFriends.Controllers.Stock s in ViewBag.stocks)
        {
            <tr>
                <td>@s.name</td>
                <td>@s.symbol</td>
                <td>@s.price</td>
            </tr>
        }
    </table>
} 
```

StockControler.cs：

```
public ActionResult AddStock(string symbol)
{
      Console.WriteLine("Fetching " + symbol);
      Stock s = GetStock(MakeStockUrl(symbol));
      Console.WriteLine("Stock result: " + s.ToString());
      return Json(s);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:38:56.293

一般来说，你应该发布你到目前为止所做的事情。因为你是新来的，所以我会给你一点推动力。您的页面将与此类似。

```
<html>
<head>
<script src="path/to/jquery.js"></script>
</head>
<body>

<p>
 <label for="symbol">Stock Symbol</label>
 <input type="text" id="symbol" name="symbol">
 <input type="button" id="add" value="addStock">
</p>

<table id="dataTable">
 <tr>
  <th>Symbol</th>
  <th>Price</th>
 </tr>
 <tr>
  <td>MO</td>
  <td>65</td>
 </tr>
</table>

<script>
$(function() {
 $('#addStock').on('click', function() {
  $.ajax({
   dataType: "json",
   url: 'controller/action',
   data: {symbol: $('#symbol').val()}
  }).done(function(data) {
   $('#dataTable').append('<tr><td>' . data.symbol . '</td><td>' . data.price . '</td></tr>');
  });
 });
});
</script>
</body>
</html> 
```

然后您的操作将如下所示。

```
public ActionResult Action(string symbol) {
  return Json(new {symbol=symbol, price=53.21});
} 
```

更改所有占位符 URL/方法名称，并在 ASP.NET 操作中添加一些逻辑，然后从那里开始分支。

# node.js - 使用 node.js os.cpus() 检测用户空闲时间？

> ID：15852597
> 
> 赞同：2
> 
> 时间：2013-04-06T15:18:03.660
> 
> 标签：node.js, appjs

我正在开发一个使用 node.js 作为平台的 appjs 聊天应用程序。我一直在检测计算机何时空闲（当用户离开或不使用它时）。

node.js 中有 os 模块，它`os.cpus()`为每个核心提供了这样的信息：

```
[ { model: 'Intel(R) Core(TM) i7 CPU         860  @ 2.80GHz',
    speed: 2926,
    times:
     { user: 252020,
       nice: 0,
       sys: 30340,
       idle: 1070356870,
       irq: 0 } },
  { model: 'Intel(R) Core(TM) i7 CPU         860  @ 2.80GHz',
    speed: 2926,
    times:
     { user: 306960,
       nice: 0,
       sys: 26980,
       idle: 1071569080,
       irq: 0 } },
  { model: 'Intel(R) Core(TM) i7 CPU         860  @ 2.80GHz',
    speed: 2926,
    times:
     { user: 248450,
       nice: 0,
       sys: 21750,
       idle: 1070919370,
       irq: 0 } },
  { model: 'Intel(R) Core(TM) i7 CPU         860  @ 2.80GHz',
    speed: 2926,
    times:
     { user: 256880,
       nice: 0,
       sys: 19430,
       idle: 1070905480,
       irq: 20 } },
  { model: 'Intel(R) Core(TM) i7 CPU         860  @ 2.80GHz',
    speed: 2926,
    times:
     { user: 511580,
       nice: 20,
       sys: 40900,
       idle: 1070842510,
       irq: 0 } },
  { model: 'Intel(R) Core(TM) i7 CPU         860  @ 2.80GHz',
    speed: 2926,
    times:
     { user: 291660,
       nice: 0,
       sys: 34360,
       idle: 1070888000,
       irq: 10 } },
  { model: 'Intel(R) Core(TM) i7 CPU         860  @ 2.80GHz',
    speed: 2926,
    times:
     { user: 308260,
       nice: 0,
       sys: 55410,
       idle: 1071129970,
       irq: 880 } },
  { model: 'Intel(R) Core(TM) i7 CPU         860  @ 2.80GHz',
    speed: 2926,
    times:
     { user: 266450,
       nice: 1480,
       sys: 34920,
       idle: 1072572010,
       irq: 30 } } 
] 
```

那么它是否适合检测用户空闲？据我了解，我可以使用两个值：`user`和`idle`. 该`idle`值迭代得非常快，但它`user`以混乱的方式迭代。我正在寻找的是知道用户何时不移动鼠标或不输入任何应用程序（不仅在我的应用程序中）并且在一些阈值超时（例如 60 秒）不活动后我需要将他的状态更改为“离开”当他回来时，将其改回“在线”。您能否指出一些算法如何做到这一点，甚至为我放弃一些代码示例？提前致谢。

**编辑。** 据我所知，每个操作系统都有 API 来检测用户是否空闲，例如作为平台的 Adob​​e Air 有能力轻松做到这一点，我知道我可以使用 node-ffi 甚至编写一个模块。此外，据我所知，Chromium 也有这种[开箱即用的](https://code.google.com/p/chromium/codesearch#chromium/src/chrome/browser/idle.h&q=idle.h&sq=package%3achromium&type=cs&l=5)能力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:54:34.433

根据 os.cpus()[文档](http://nodejs.org/api/os.html#os_os_cpus)：

> 返回一个对象数组，其中包含有关安装的每个 CPU/核心的信息：型号、速度（以 MHz 为单位）和时间（一个包含 CPU/核心花费的毫秒数的对象：user、nice、sys、idle 和 irq） .

因此，该`times`字段显示了在 cpu 内核上花费的所有时间以及自启动以来它是如何使用的。但这不是您要查找的内容，因为输出详细说明了系统的 CPU 使用情况，而不是 appjs 窗口的详细信息。

现在如何找出您的 appjs 应用程序处于活动/空闲状态。您应该检查 appjs[页面](https://github.com/appjs/appjs)。有一些类似的事件`mousemove`，`keydown`您可以在您的应用程序中使用它们。

```
 window.addEventListener('keydown', function(e){
  //if last trigger is there remove it and add new trigger
  //else call makeactive()
  });

  window.addEventListener('mousemove', function(e){
  //if last trigger is there remove it and add new trigger
  //else call makeactive()
  });

//To trigger timeout activity do something like this 
setTimeout(function () {
//change icons, set status as away.
}, 60000); // after 60 seconds timeout

//To reset inactivity changes if it is already idle
makeactive(){
//reset icons, set status as active.
} 
```

# ruby-on-rails - Active Admin：如何自定义选择过滤器的标签？

> ID：15852600
> 
> 赞同：8
> 
> 时间：2013-04-06T15:18:13.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, filter, activeadmin

这似乎应该相当简单，购买我一直无法找到有关该主题的任何文档。

我有以下过滤器：

```
filter :archived, as: :select 
```

...它以选择框的形式为我提供了一个工作过滤器，其中包含“任何”、“是”和“否”选项。

我的问题是：如何自定义这些标签以使功能保持不变，但标签是“全部”、“实时”和“存档”？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-08T18:38:25.990

快速简便：

```
filter :archived, as: :select, collection: [['Live', 'true'], ['Archived', 'false']] 
```

但是，这不会让您在不更改 I18n 的情况下自定义“全部”选项。

更新：这是另一种选择：

```
# Somewhere, in an initializer or just straight in your activeadmin file:
class ActiveAdmin::Inputs::FilterIsArchivedInput < ActiveAdmin::Inputs::FilterSelectInput
  def input_options
    super.merge include_blank: 'All'
  end

  def collection
    [ ['Live', 'true'], ['Archived', 'false'] ]
  end
end

# In activeadmin
filter :archived, as: :is_archived 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T11:18:56.583

我有同样的问题，但我需要在索引过滤器和表单输入中自定义选择，所以我找到了一个类似的解决方案：在应用程序/输入中（如建议 formtastic）我创建了两个类：

在 app/inputs/country_select_input.rb 中：

```
class CountrySelectInput < Formtastic::Inputs::SelectInput

  def collection
    I18nCountrySelect::Countries::COUNTRY_CODES.map { |country_code|
      translation = I18n.t(country_code, scope: :countries, default: 'missing')
      translation == 'missing' ? nil : [translation, country_code]
    }.compact.sort
  end

end 
```

在 app/inputs/filter_country_select_input.rb 中：

```
class FilterCountrySelectInput < ActiveAdmin::Inputs::FilterSelectInput

  def collection
    I18nCountrySelect::Countries::COUNTRY_CODES.map { |country_code|
      translation = I18n.t(country_code, scope: :countries, default: 'missing')
      translation == 'missing' ? nil : [translation, country_code]
    }.compact.sort
  end

end 
```

在我的 app/admin/city.rb 中：

```
ActiveAdmin.register City do

  index do
    column :name
    column :country_code, sortable: :country_code do |city|
      I18n.t(city.country_code, scope: :countries)
    end
    column :created_at
    column :updated_at
    default_actions
  end

  filter :name
  filter :country_code, as: :country_select
  filter :created_at

  form do |f|
    f.inputs do
      f.input :name
      f.input :country_code, as: :country_select
    end
    f.actions
  end

end 
```

如您所见，ActiveAdmin 在不同的上下文、索引过滤器或表单输入中查找 Filter[:your_custom_name:]Input 和 [:your_custom_name:]Input。因此，您可以创建此类扩展 ActiveAdmin::Inputs::FilterSelectInput 或 Formtastic::Inputs::SelectInput 并自定义您的逻辑。

它对我有用，我希望你能发现它有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-01T11:43:07.890

这是一个有效的技巧......无需您编写新的输入控件！

```
filter :archived, as: :select, collection: -> { [['Yes', 'true'], ['No', 'false']] }

index do
  script do
    """
      $(function () {
        $('select[name=\"q[archived]\"] option[value=\"\"]').text('All');
      });
    """.html_safe
  end
  column :id
  column :something
end 
```

它既不“干净”也不“优雅”，但效果很好:)

# android - 从手机和 sim Android 读取所有联系人

> ID：15852601
> 
> 赞同：6
> 
> 时间：2013-04-06T15:18:16.190
> 
> 标签：android, android-contentprovider

编辑 ::: 代码有效。这是 Eclipse 的问题，代码按预期在 logcat 中显示输出。

安卓 2.3.3

我对使用 contentproviders 很陌生。我只是想尝试一个如何从手机中检索联系人的示例。当我在我的 SAMSUNG Mobile 上尝试时，我看到的例子很少，但没有一个对我有用。

这是我使用的代码...

```
public class Class_Add_Contact extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_add_contact);

        readContacts();    
    }

    private void readContacts() {
        // TODO Auto-generated method stub

        ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null,null, null);

        while (cur.moveToNext()) {

            String name =cur.getString(cur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));    
            String phoneNumber = cur.getString(cur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

            System.out.println(name + "   " + phoneNumber);
            }
    }
} 
```

代码看起来不错，但 logcat 中没有显示任何数字。有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T15:23:49.373

试试这个

```
Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null); 

while (cursor.moveToNext()) {
    String contactId = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
    String name = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
    System.out.println(contactId + "   " + name);
}
cursor.close(); 
```

它返回联系人的姓名和 id（id 可能是联系人表的行号）

# jquery - Highcharts 和通过 Ajax 加载数据

> ID：15852603
> 
> 赞同：0
> 
> 时间：2013-04-06T15:18:27.633
> 
> 标签：jquery, ajax, json, highcharts

刚开始使用 Highcharts 并希望我遇到的问题是我所缺少的相对简单/愚蠢的问题。

我从 Highcharts 实时更新演示中获取了样本 - [http://www.highcharts.com/demo/dynamic-update](http://www.highcharts.com/demo/dynamic-update)

并仅修改系列数据片段以提取“真实”数据：

原始代码：

```
series: [{
    name: 'CPU utilization',
    data: (function () {
      // generate an array of random data
      var data = [],
        time = (new Date()).getTime(),
        i;
      for (i = -279; i <= 0; i++) {
        data.push({
          x: time + i * 1000,
          y: Math.random() * 10
        });
      }
      return data;
    })()
  }
] 
```

替换为：

```
series: [{
    name: 'CPU utilization',
    data: (function () {
      $.ajax({
        url: '/api/data/query',
        data: query,
        content: "application/json",
        type: "POST",
        success: function (point) {
          var vals = point.queries[0].results[0].values;
          var data = [],
            i;
          for (i = -vals.length + 1; i <= 0; i++) {
            data.push({
              x: vals[i + vals.length - 1][0],
              y: vals[i + vals.length - 1][1]
            });
          }
          return data;
        }
      });
    })()
  }
] 
```

随机和真实的数据输出格式看起来相同：

随机的：

```
Array[280]
[0 … 99]
0: Object
x: 1365259804521
y: 9.2204492539 
```

真实的：

```
Array[280]
[0 … 99]
0: Object
x: 1365259979000
y: 3 
```

但是，当尝试使用真实数据时，我遇到了 highcharts 错误：

```
Uncaught TypeError: Cannot call method 'push' of undefined highcharts.js:199
P.addPoint highcharts.js:199
$.ajax.success test2.html:265
c jquery-1.9.1.min.js:3
p.fireWith jquery-1.9.1.min.js:3
k jquery-1.9.1.min.js:5
r 
```

关于在哪里看的任何建议？我确信这是我正在做的事情，因为这必须是相当常规的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:32:05.997

“数据”超出范围，因此立即函数调用不返回任何数据。在 ajax 调用之外声明**var 数据强文本。**像这样的东西：

```
(function() {
  var data = [];
  $.ajax({
    url: '/api/data/query',
    ...
    ...
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:20:13.513

所以这就是最终的工作：

```
 series: [{
        name: 'CPU utilization',
        data: (function() {
                        var data;
                        $.ajax({
                        url: '/api/data/query',
                        data: query,
                        async: false,
                        content: "application/json",
                        type: "POST",
                        success: function(point) {
                        data =  point.queries[0].results[0].values;
                        }
                        });
            return data;
        })()
    }] 
```

我怀疑如果我将数据检索移动到它自己的函数中，就不需要'async：false'？

# c++ - 模板类之间的可见性

> ID：15852604
> 
> 赞同：0
> 
> 时间：2013-04-06T15:18:40.053
> 
> 标签：c++, templates, iterator

我有两个类，TwoWayVector 和 TwoWayVectorIterator，顾名思义，我正在尝试实现我自己的向量类和一个迭代器。我似乎遇到了一些可见性问题，而且我也不确定如何从方法 TwoWayVector.begin(); 构造​​一个 TwoWayVectorIterator；

双向矢量.cc

```
#include <sstream>

using namespace std;

template <class T> class TwoWayVector{
public:

T* data;
int capacity;
int nextFree;

TwoWayVector(){
    capacity = 10;
    nextFree = 0;
    data = new T[capacity];
}

~TwoWayVector(){
    delete data;
}

T& operator[](const int index){
    if( index >= capacity || capacity + index < 0){
        string number = static_cast<ostringstream*>( &(ostringstream() << index) )->str();
        string error = "index " + number + " is out of bounds"; 
        throw error;
    }
    else if(index < 0){
        return data[nextFree+index];
    }
    return  data[index];
}
 //memory leaks?
void push_back(T object){
    if(capacity <= nextFree){
        capacity = capacity*2;
        T* tmp = new T[capacity];
        for(int i=0; i<capacity; i++){
            tmp[i] = data[i];
        }
        delete data;
        data = tmp;
    }
    data[nextFree] = object;
    nextFree++;
}

T pop_back(){
    nextFree--;
    T result = data[nextFree];
    data[nextFree] = NULL; 
    return result;
}

int size(){
    return nextFree;
}

TwoWayVectorIterator begin(){
    TwoWayVectorIterator<T> iterator= new TwoWayVectorIterator<T>(0,this);
    return (iterator);
}

}; 
```

TwoWayVectorIterator.cc

```
using namespace std;

template <class T> class TwoWayVectorIterator{
public:
TwoWayVector<T>* vector;
int currentPosition;
TwoWayVectorIterator(TwoWayVector<T>& vec){
    currentPosition = 0;
    vector = vec;
}
TwoWayVectorIterator( int pos , TwoWayVector<T>& vec){
    currentPosition = pos;
    vector = vec;
}

bool& operator==(const TwoWayVectorIterator* vector2){
    bool address, position;
    address = (&vector == &vector2) ? true : false;
    position =(currentPosition == vector2->currentPosition) ? true : false;
    return (address && position);
}

bool& operator!=(const TwoWayVectorIterator* vector2){
    bool address, position;
    address = (&vector == &vector2) ? true : false;
    position=(currentPosition == vector2->currentPosition) ? true : false;
    return (address && position);
}

TwoWayVectorIterator& operator++(){
    currentPosition = (currentPosition+1);
    return *this;
}
TwoWayVectorIterator& operator++(int){
    currentPosition = (currentPosition+1);
    return *this;
}
TwoWayVectorIterator& operator=(TwoWayVectorIterator* vector2){
    &vector = vector2;
    currentPosition = vector2->currentPosition;
    return *this;
}
TwoWayVectorIterator& operator+(int n){
    currentPosition = currentPosition+n;
    return *this;
}
TwoWayVectorIterator& operator-(int n){
    currentPosition = currentPosition-n;
    return *this;
}
bool& operator<(TwoWayVectorIterator* vector2){
    return (currentPosition<vector2->currentPosition);
}
T& operator*(){
    return vector[currentPosition];
}
}; 
```

从 Test.cc 调用

```
using namespace std;
#include <iostream>
#include "TwoWayVector.cc"
#include "TwoWayVectorIterator.cc"

int main(){

TwoWayVector<int> numbers;
numbers.push_back(3);
numbers.push_back(2);
numbers.size();
TwoWayVectorIterator current = numbers.begin();
return 0; 
```

}

编译器错误：

```
In file included from Test.cc:3:
TwoWayVector.cc:59: error: ‘TwoWayVectorIterator’ does not name a type
Test.cc: In function ‘int main()’:
Test.cc:18: error: missing template arguments before ‘current’
Test.cc:18: error: expected `;' before ‘current’ 
```

我已经尝试过声明几种不同的方式，不同的包含方案，并调用 TwoWayVectorIterator current = numbers.begin() ，但我不想指定迭代器的类型。

非常感谢这里的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:32:19.410

**第一个问题：**

似乎您还没有`#include`d 包含`TwoWayVectorIterator`from file 定义的文件`TwoWayVector.cc`，该文件在 function 中使用其定义`begin()`。

尝试添加此指令：

```
 #include <sstream>
    #include "TwoWayVectorIterator.cc"
^^  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

**第二个问题：**

在里面`TwoWayVectorIterator.cc`，你必须提出一个前向声明，让它知道存在`TwoWayVector`：

```
template<typename T> class TwoWayVector; 
```

**第三个问题：**

此外，在函数中，`begin()`您使用`TwoWayVectorIterator`的返回类型没有指定必要的模板参数：

```
TwoWayVectorIterator<T> begin(){
//                  ^^^
    TwoWayVectorIterator<T> iterator= new TwoWayVectorIterator<T>(0,this);
    return (iterator);
} 
```

**第四个问题：**

您的`main()`函数遇到类似的问题：

```
int main()
{
    TwoWayVector<int> numbers;
    // ...
    TwoWayVectorIterator<int> current = numbers.begin();
    //                  ^^^^^
    // ...
} 
```

**第五个问题：**

另一个问题是构造函数`TwoWayVectorIterator`应该接受一个*指针*，而不是一个引用`TwoWayVector`（至少从你使用它的方式来看）：

```
TwoWayVectorIterator( int pos , TwoWayVector<T>* vec){
//                              ^^^^^^^^^^^^^^^^
    currentPosition = pos;
    vector = vec;
} 
```

**第六个问题：**

`operator ==`您的和的重载`operator !=`正在返回对临时对象的*引用，*`bool`当函数返回时，该引用最终将被销毁，给您留下一个悬空引用，并在您尝试取消引用它时立即导致未定义的行为。

您应该只返回 a `bool`：

```
 bool operator==(const TwoWayVectorIterator* vector2){
//  ^^^^ 
//  Return by value here!

        // ...
        return (address && position);
    }

    bool operator!=(const TwoWayVectorIterator* vector2){
//  ^^^^
//  Return by value here!

        // ...
        return (address && position);
    } 
```

* * *

**相关建议：**

此外，您应该避免`using`在全局命名空间范围内使用此类指令：

```
using namespace std; 
```

这会将`std`命名空间中的所有名称导入全局命名空间，可能会导致不希望的名称冲突。

作为进一步的一般建议，请避免为您的变量提供标准容器类的名称（例如`vector`）。选择类似`myVector`, 或`innerVector`, 或任何您认为最适合作为描述性名称的名称。

此外，您应该遵循命名约定并为您的头文件和实现文件提供扩展名，例如分别为`.h`(或`.hpp`) 和`.cpp`.

# html - 用于提取文本的 Html 库

> ID：15852608
> 
> 赞同：-1
> 
> 时间：2013-04-06T15:19:05.267
> 
> 标签：html, c, html-parsing

我想从这样的页面中提取卡的成本：

[http://magic.tcgplayer.com/db/magic_single_card.asp?cn=Black%20Lotus](http://magic.tcgplayer.com/db/magic_single_card.asp?cn=Black%20Lotus)

我必须在 C 中使用什么库？并下载页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:28:56.787

[http://curl.haxx.se/libcurl/c/htmltidy.html](http://curl.haxx.se/libcurl/c/htmltidy.html) 您还应该尝试搜索“HTML 抓取”。

# c# - SQL Server 备份和恢复

> ID：15852615
> 
> 赞同：6
> 
> 时间：2013-04-06T15:19:53.933
> 
> 标签：c#, sql-server, backup, restore

**备份**

```
string connectionString1 = (@"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|Database1.mdf;Database=Database1;Integrated Security=True; User Instance=True");
            SqlConnection cn = new SqlConnection(connectionString1);
            cn.Open();
            SqlCommand cmd = new SqlCommand();
            SqlDataReader reader;
            cmd.CommandText = @"BACKUP DATABASE Database1 TO DISK = 'C:\SRI2Works.bak'";

            cmd.CommandType = CommandType.Text;
            cmd.Connection = cn;
            reader = cmd.ExecuteReader();
            cn.Close();
            MessageBox.Show("Database Backup Successfull."); 
```

**恢复**

```
string connectionString1 = (@"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|Database1.mdf;Database=Database1;Integrated Security=True; User Instance=True");
            SqlConnection cn = new SqlConnection(connectionString1);
            cn.Open();

            SqlCommand cmd = new SqlCommand();
            SqlDataReader reader;
            cmd.CommandText = @"use master; RESTORE DATABASE Database1 FROM DISK = 'C:\SRI2Works.bak'";
            cmd.CommandText = "DBCC CHECKDB ('Database1')";
            cmd.CommandType = CommandType.Text;
            cmd.Connection = cn;
            reader = cmd.ExecuteReader();
            cn.Close();
            MessageBox.Show("Database Restored Successfull."); 
```

此代码成功运行，但未进行任何更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-13T19:15:10.193

在还原数据库中尝试此代码：

```
 private void restoreButton_Click(object sender, EventArgs e)
    {
    string database = con.Database.ToString();
    if (con.State != ConnectionState.Open)
    {
        con.Open();
    }
    try
    {
        string sqlStmt2 = string.Format("ALTER DATABASE [" + database + "] SET SINGLE_USER WITH ROLLBACK IMMEDIATE");
        SqlCommand bu2 = new SqlCommand(sqlStmt2, con);
        bu2.ExecuteNonQuery();

        string sqlStmt3 = "USE MASTER RESTORE DATABASE [" + database + "] FROM DISK='" + textBox2.Text + "'WITH REPLACE;";
        SqlCommand bu3 = new SqlCommand(sqlStmt3, con);
        bu3.ExecuteNonQuery();

        string sqlStmt4 = string.Format("ALTER DATABASE [" + database + "] SET MULTI_USER");
        SqlCommand bu4 = new SqlCommand(sqlStmt4, con);
        bu4.ExecuteNonQuery();

        MessageBox.Show("database restoration done successefully");
        con.Close();

   }
   catch (Exception ex)
   {
        MessageBox.Show(ex.ToString());
   }
} 
```

有关更多说明，请查看本教程：[Backup & Restore Sql Server database using C#](http://www.csharp-tutorials1.blogspot.com/2016/03/backup-and-restore-sql-server-database.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:38:58.683

例如我们有 2 个菜单条；一个用于备份，另一个用于恢复，因此他们执行他们的方法！尝试这个 ：

```
 private void saveDatabaseToolStripMenuItem_Click(object sender, EventArgs e)
    {
        try
        {
            BackupDatabase();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message + " \nPlease choose the folder Sauvegardes to backup !");
        }

    }
    private void restoreDatabaseToolStripMenuItem_Click(object sender, EventArgs e)
    {
        try
        {
            RestoreDatabase();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
    private void BackupDatabase()
    {
        saveFileDialogBackUp.InitialDirectory = AppDomain.CurrentDomain.BaseDirectory + @"Sauvegardes";
        if (saveFileDialogBackUp.ShowDialog() == DialogResult.OK)
        {
            Con.ExecuteCmd("BACKUP DATABASE MyFooDatabase TO DISK = '" + saveFileDialogBackUp.FileName + "'");
            MessageBox.Show("Success , done!", "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
        }
    }
    private void RestoreDatabase()
    {
        openFileDialogBackUp.InitialDirectory = AppDomain.CurrentDomain.BaseDirectory + @"Sauvegardes";
        if (openFileDialogBackUp.ShowDialog() == DialogResult.OK)
        {
            Con.ExecuteCmd(" USE MASTER RESTORE DATABASE MyFooDatabase FROM DISK = '"+openFileDialogBackUp.FileName+"' WITH REPLACE");
            MessageBox.Show("Database Restored", "Information", MessageBoxButtons.OK, MessageBoxIcon.Information);
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T10:09:36.553

从您的代码中删除以下语句：

```
cmd.CommandText = "DBCC CHECKDB ('Database1')"; 
```

如果要覆盖现有数据库，请对 commandtext 使用以下命令：

```
cmd.CommandText = @"use master; RESTORE DATABASE Database1 FROM DISK = 'C:\SRI2Works.bak' WITH REPLACE"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-28T18:20:07.357

```
RESTORE DATABASE [C] FROM DISK = 'D:\\Inventory.bak' WITH RECOVERY, 
MOVE 'Inventory_Data'
 TO 'C:\\Program Files\\Microsoft SQL Server\\MSSQL\\Data\\c_Data.MDF', 
MOVE 'Inventory_Log' 
TO 
'C:\\Program Files\\Microsoft SQL Server\\MSSQL\\Data\\c_Log.LDF', 
REPLACE, stats =1 
```

您唯一需要关心的是，恢复数据库不是在 MS SQL SERVER 中创建的。在我的情况下，查询运行后它应该创建一个具有名称的新数据库`[C]`并在路径创建它的文件`[C:\\Program Files\\Microsoft SQL Server\\MSSQL\\Data\\]`

# c - 如何从标准输入读取一行

> ID：15852616
> 
> 赞同：0
> 
> 时间：2013-04-06T15:19:56.177
> 
> 标签：c

我正在尝试从用户读取文本行，但在程序终止`fgets`后不会立即工作`printf("Enter a string:");`并且没有机会输入任何内容。

```
fgets(string, 100, stdin) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:23:20.080

您可以这样做：

```
char mystr[100];
if ( fgets (mystr, 100 , stdin) != NULL ) {
    puts (mystring);
} 
```

您需`#include <stdio.h>`要这样做才能编译。

第一个指针必须指向一个足够大小的内存块，以适应第二个指针中传递的字符数。

# php - 通过 oauth 的 paypal rest api 凭证

> ID：15852629
> 
> 赞同：1
> 
> 时间：2013-04-06T15:21:33.290
> 
> 标签：php, oauth, paypal, openid

我正在使用贝宝的休息 API

[https://developer.paypal.com/webapps/developer/docs/api/](https://developer.paypal.com/webapps/developer/docs/api/)

每当我使用 API 来获取订单等时，我都需要一个 id 和密钥来请求访问令牌。然后我可以把它们拿回来。

我在想是否可以通过 OAuth 获取 id 和密钥？就像[storenvy.com](http://storenvy.com)一样。他们与贝宝登录连接。然后获取订单/交易。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T05:30:14.670

抱歉，直到现在才注意到这个问题——这目前是不可能的。我们打算在不久的将来支持一种从商家获取 Oauth 访问令牌的方式，以便您可以代表他们进行 API 调用。无需共享 API 凭据。这尚不可用，但希望很快可用。

# macos - 如何使用自制软件在 Mac OS X 上安装 GTest？

> ID：15852631
> 
> 赞同：32
> 
> 时间：2013-04-06T15:21:42.040
> 
> 标签：macos, repository, installation, homebrew, googletest

我正在尝试使用我的数据包管理器**Home Brew**安装 gtest，但没有它的存储库。我试图从 code.google 下载 gtest 但我不明白如何安装它，因为**cmake**和**make**不能解决问题。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2017-10-06T17:59:32.397

如果您想要不使用 Homebrew 的最新版本：

```
git clone https://github.com/google/googletest
cd googletest
mkdir build
cd build
cmake ..
make
make install 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-03-09T23:27:54.760

我刚刚使用 cmake 和 make 安装了 gtest。我可以向您展示我是如何手动安装 Google Test 的。这并不复杂，只需按照步骤进行即可。

1.  [从https://github.com/google/googletest/archive/release-1.8.0.zip](https://github.com/google/googletest/archive/release-1.8.0.zip)下载 gtest 文件并解压。

```
cd googletest-release-1.8.0/googletest/
mkdir bld
cd bld
cmake -DCMAKE_CXX_FLAGS=-std=c++11 ..
make
cp -a ../include/gtest /usr/local/include
cp -a *.a /usr/local/lib 
```

3.  删除文件夹`googletest-release-1.8.0`并`release-1.8.0.zip`

如果您想使用 google-test，请使用`#include <gtest/gtest.h>`.

如果要使用 Google Test 1.7.0 版，只需下载`release-1.7.0.zip`2\. 步骤中的 and`cd googletest-release-1.7.0`代替`cd googletest-release-1.8.0/googletest/`. 其余步骤相同。

我添加`-DCMAKE_CXX_FLAGS=-std=c++11`了`cmake`与`c++11`.

好好享受！

* * *

### 更新后的版本

从 v1.8.0 开始`gmock`包含在发布文件中。

这是安装`gtest`和`gmock`在**v1.8.0 - v1.10.0**中的一般步骤。（请随意将**1.10.0**替换为您想要的版本。）

```
# download release file and extract files from it
curl -LOk https://github.com/google/googletest/archive/release-1.10.0.tar.gz
tar -zxvf release-1.10.0.tar.gz
rm release-1.10.0.tar.gz

cd googletest-release-1.10.0/
mkdir build
cd build
# build gtest and gmock
cmake -DCMAKE_CXX_FLAGS=-std=c++11 ..
make

# copy requisite c++ files and compiled files to correct directories
cp -a ../googletest/include/* /usr/local/include
cp -a ../googlemock/include/* /usr/local/include
find . -name "*.a" -exec cp -a {} /usr/local/lib \;

# clean
cd ../..
rm -r googletest-release-1.10.0 
```

如果您只想安装`gtest`not `gmock`，您可以执行以下操作：

1.  删除命令`cp -a ../googlemock/include/ /usr/local/include`

2.  代替

    ```
     find . -name "*.a" -exec cp -a {} /usr/local/lib \; 
    ```

    和

    ```
     find . -name "libgtest*.a" -exec cp -a {} /usr/local/lib \;` 
    ```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-08T06:40:41.330

对于“为什么没有存储库？”这个问题。请参阅[相关的 gtest 常见问题解答问题](https://code.google.com/p/googletest/wiki/FAQ#Why_is_it_not_recommended_to_install_a_pre-compiled_copy_of_Goog)。但是，如果您愿意，您可以自己创建公式 - 有关详细信息，请参阅[这篇文章](http://answers.ros.org/question/42335/mac-os-x-install-error-no-available-formula-for-gtest/)（但不确定它是否适用于 1.6）。

但我建议您只安装 gtest：阅读[自述](http://googletest.googlecode.com/svn/trunk/README)文件以获取详细说明。有几个简单的步骤：
下载源代码并将其提取到某个目录`gtest_dir`。
构建目标文件：

```
g++ -I$gtest_dir/include -I$gtest_dir -c $gtest_dir/src/gtest-all.cc
g++ -I$gtest_dir/include -I$gtest_dir -c $gtest_dir/src/gtest_main.cc 
```

关联：

```
ar -rv libgtest.a gtest-all.o
ar -rv libgtest_main.a gtest_main.o 
```

**注意**：如果你想构建支持 C++11 和 libc++ 的 gtest，你需要做一些额外的工作：

*   [补丁 gtest-port.h](https://groups.google.com/forum/#!msg/googletestframework/F1B9LArL9_U/sJhGbXsuzGMJ)
*   `clang++ -std=c++11 -stdlib=libc++`使用而不是构建`g++`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-03-11T17:55:41.637

你可以使用这个：

```
brew install --HEAD https://gist.githubusercontent.com/Kronuz/96ac10fbd8472eb1e7566d740c4034f8/raw/gtest.rb 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-03-05T12:24:51.727

[这是slund](https://stackoverflow.com/a/46611467/10812852)答案的替代解决方案。`cmake ..`对我不起作用。

```
cd desktop
git clone https://github.com/google/googletest.git
cd googletest
mkdir build
cd build
cmake -DCMAKE_CXX_COMPILER="c++" -DCMAKE_CXX_FLAGS="-std=c++11 -stdlib=libc++" ../
make
sudo make install 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-02-08T07:24:05.983

自制配方： `brew install googletest`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-09T20:05:14.487

最新的 Homebrew 不再支持从 GitHub Gists 安装，因此 @Kronuz 的解决方案不再有效。这是错误：

*错误：从任意 URL 调用非校验和下载 gtest 公式文件被禁用！使用 'brew extract' 或 'brew create' 和 'brew tap-new' 在 GitHub 上的 tap 中创建公式文件。*

现在可以使用以下命令安装 GoogleTest：

```
brew install web-eid/gtest/gtest 
```

底层[存储库](https://github.com/web-eid/homebrew-gtest)基于@Kronuz 的要点，感谢@Kronuz 创建要点！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-04T22:13:37.023

ROS 存储库（[http://wiki.ros.org/kinetic/Installation/OSX/Homebrew/Source](http://wiki.ros.org/kinetic/Installation/OSX/Homebrew/Source)）有 gtest：

```
brew tap ros/deps
brew instal gtest 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-20T17:09:01.167

如果要从源安装它，最简单的方法如下

```
git clone https://github.com/google/googletest
cd googletest
cmake . -DCMAKE_BUILD_TYPE=Release 
make install 
```

# java-me - 是否可以从 JavaME 应用程序访问蓝牙免提麦克风/按钮？

> ID：15852632
> 
> 赞同：0
> 
> 时间：2013-04-06T15:21:44.280
> 
> 标签：java-me, bluetooth

有什么方法可以使用我的蓝牙免提作为 JavaME 应用程序界面？我正在寻找一种将免提装置用作附加的无线输入设备的方法。有什么方法可以使用我的免提装置吗？

# jquery - Jquery，ajax beforeSend 不起作用

> ID：15852634
> 
> 赞同：0
> 
> 时间：2013-04-06T15:21:45.237
> 
> 标签：jquery, ajax, file, upload, progress

这些是照片上传代码：

```
$.ajax({
    url: "php/uploadPhoto.php",
    type: "POST",
    data: formdata,
    processData: false,
    contentType: false,
    beforeSend: function(XMLHttpRequest){
        XMLHttpRequest.upload.addEventListener("progress", function(evt){
            if(evt.lengthComputable){
                var percentComplete = evt.loaded / evt.total;
                alert(percentComplete);
            }
        }, false);
    },
    success: function (res) {

    }
}); 
```

如果我不添加“beforeSend”部分，它会起作用....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T16:02:51.763

尝试这个：

```
$.ajax({
    url: "",
    data: formdata,
    cache: false,
    contentType: false,
    processData: false,
    type: 'POST',
    xhr: function() {
        var myXhr = $.ajaxSettings.xhr();
        if (myXhr.upload) {
            if (myXhr.upload.addEventListener) {
                myXhr.upload.addEventListener('progress', `YOUR CALLBACK`, false);
            } else if(myXhr.upload.attachEvent) {
                myXhr.upload.attachEvent('progress', `YOUR CALLBACK`);
            }
        }
        return myXhr;
    },
    success: function (data) { },
    error: function (jqXHR, textStatus, errorThrown) { }
}); 
```

# java - 计算器：无法在我的主 GUI 的弹出窗口中使用 ActionListener

> ID：15852637
> 
> 赞同：1
> 
> 时间：2013-04-06T15:21:54.517
> 
> 标签：java, swing, jbutton, actionlistener, calculator

我的计算器有点问题。主“GUI”有数字键盘和一些运算符，但我为所有三角函数添加了一个 JMenuItem，因为它们在新窗口中打开。我在主 GUI 上使用运算符（+、-、sqrt、power 等）没有问题，但我似乎根本无法让三角函数工作。我在代码中的注释中添加了更多信息（阅读名为 t 的第三个最后一个实例变量后面的注释）。

```
public class Calculator extends JFrame
{
    //TILVIKSBREYTUR    
    JFrame rammi;                //Rammi inniheldur panel
    JPanel pnl;                  //Panel inniheldur takka 
    private final Font BIGGER_FONT = new Font("monspaced", Font.PLAIN, 20); //Letur
    public JTextField txt;       //Textareitur
    private JButton b0;          //b0 - b9 eru númeratakkar
    private JButton b1;
    private JButton b2;
    private JButton b3;
    private JButton b4;
    private JButton b5;
    private JButton b6;
    private JButton b7;
    private JButton b8;
    private JButton b9;
    private JButton bDecPoint;   //Decimal point
    private JButton bc;          //Clear takki, endurstillir textareit
    private JButton bPlus;       //Plús takki
    private JButton bMinus;      //Mínus takki
    private JButton bPower;      //Veldatakki
    private JButton bSqrt;       //Kvaðratrótartakki
    private JButton bDivide;     //Deilingar takki
    private JButton bMult;       //Margföldunar takki
    private JButton bxRoot;       //N-tu rótartakki
    private JButton bEqual;      //Jafnt og takki
    private JButton bPer;        //prósent
    private JButton bAns;        //síðasta útkoma
    private JButton bPi;         //Pi
    private JButton bSvigi1;     //Svigi
    private JButton bSvigi2;     //Svigi
    private JSeparator sep1;     //Separator, skilur að textareit og lyklaborð
    private JSeparator sep2;     //Separatorm skilur að númer og virkja
    public  boolean number;      //tala
    public  boolean degPressed;  //Er Degrees valið ? 
    public  boolean trigOpen;    //Er Trigonmetry flipinn opinn?
    public  boolean trigOpenOp;  //hjálpar breyta fyrir virkni
    public  String  equalOp;     //Strengur fyrir virkja
    public  String ans;
    public  String ansOp;        //Strengur
    private JMenuBar menuBar;    //Menu bar
    private JMenu file;          //Flipi í menu bar
    private JMenuItem trigon;    //Hornaföll
    private JRadioButtonMenuItem deg;  //undirgluggi flipa í menubar
    private JRadioButtonMenuItem rad;  //undirgluggi flipa í menubar

    private Trigonmetry t;      //if I do: private Trigonmetry t = new Trigonmetry then it works
                                //perfectly but if I do that then the Trigonmetry window opens up 
                                //when I open the Calculator but I just want Trigonmetry window
                                //to open up when Trigonmetry MenuItem i pressed 

    private CalculatorOp op = new CalculatorOp();  //CalculatorOp classi sem sér um virkni virkjanna

    public Calculator(){
        initUI();
    }

    public final void initUI(){
        //TILVIKSBREYTUM GEFID GILDI
        rammi = new JFrame(); 
        degPressed = false;
        trigOpen   = false;
        trigOpenOp = false;
        trigon = new JMenuItem("Trigonmetry");
        pnl = new JPanel();
        txt = new JTextField("0.0");
        menuBar = new JMenuBar();
        file = new JMenu("File");
        file.setMnemonic(KeyEvent.VK_F);
        deg = new JRadioButtonMenuItem("Degrees");
        rad = new JRadioButtonMenuItem("Radians", true);
        number = true;
        equalOp = "=";
        ansOp   = "ANS";
        sep1 = new JSeparator();
        sep2 = new JSeparator(SwingConstants.VERTICAL);
        b0 = new JButton("0");
        b1 = new JButton("1");
        b2 = new JButton("2");
        b3 = new JButton("3");
        b4 = new JButton("4");
        b5 = new JButton("5");
        b6 = new JButton("6");
        b7 = new JButton("7");
        b8 = new JButton("8");
        b9 = new JButton("9");
        bc = new JButton("C");
        bPer = new JButton("%");
        bAns = new JButton("ANS");
        bDecPoint = new JButton(".");
        bPlus = new JButton("+");
        bMinus = new JButton("-");
        bPower = new JButton("x^n");
        bSqrt = new JButton("√x");
        bxRoot = new JButton("n√x");
        bDivide = new JButton("/");
        bMult = new JButton("*");
        bEqual = new JButton("=");
        //bSvigi1 = new JButton("(");
        //bSvigi2 = new JButton(")");

        //HÖNNUN RAMMA
        setTitle("GCalc");
        setLocationRelativeTo(null);
        setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        setMinimumSize(new Dimension(370, 280));

        //STADSETNING HLUTA
        txt.setHorizontalAlignment(JTextField.RIGHT);
        txt.setFont(BIGGER_FONT);
        pnl.setLayout(null);
        //tölur og clear
        bc.setBounds(10, 10, 50, 30);
        pnl.add(bc);
        bDecPoint.setBounds(10, 190, 50, 30);
        pnl.add(bDecPoint);
        b0.setBounds(70, 190, 50, 30);
        pnl.add(b0);
        b1.setBounds(10, 150, 50, 30);
        pnl.add(b1);
        b2.setBounds(70, 150, 50, 30);
        pnl.add(b2);
        b3.setBounds(130, 150, 50, 30);
        pnl.add(b3);
        b4.setBounds(10, 110, 50, 30);
        pnl.add(b4);
        b5.setBounds(70, 110, 50, 30);
        pnl.add(b5);
        b6.setBounds(130, 110, 50, 30);
        pnl.add(b6);
        b7.setBounds(10, 70, 50, 30);
        pnl.add(b7);
        b8.setBounds(70, 70, 50, 30);
        pnl.add(b8);
        b9.setBounds(130, 70, 50, 30);
        pnl.add(b9);
        //virkjar
        bAns.setBorder(null);
        bAns.setBounds(130, 190, 50, 30);
        pnl.add(bAns);
        bPlus.setBorder(null);
        bPlus.setBounds(200, 70, 30, 30);
        pnl.add(bPlus);
        bMinus.setBorder(null);
        bMinus.setBounds(240, 70, 30, 30);
        pnl.add(bMinus);
        bSqrt.setBorder(null);
        bSqrt.setBounds(240, 150, 30, 30);
        pnl.add(bSqrt);
        bPower.setBorder(null);
        bPower.setBounds(200, 150, 30, 30);
        pnl.add(bPower);
        bDivide.setBorder(null);
        bDivide.setBounds(200, 110, 30, 30);
        pnl.add(bDivide);
        bMult.setBorder(null);
        bMult.setBounds(240, 110, 30, 30);
        pnl.add(bMult);
        bxRoot.setBorder(null);
        bxRoot.setBounds(280, 70, 30, 30);
        pnl.add(bxRoot);
        bPer.setBorder(null);
        bPer.setBounds(320, 70, 30, 30);
        pnl.add(bPer);
        //bSvigi1.setBorder(null);
        //bSvigi1.setBounds(280, 110, 30, 30);
        //pnl.add(bSvigi1);
        //bSvigi2.setBorder(null);
        //bSvigi2.setBounds(320, 110, 30, 30);
        //pnl.add(bSvigi2);
        bEqual.setBounds(200, 190, 70, 30);
        pnl.add(bEqual);
        //seperators & textfield
        sep1.setBounds(20, 50, 330, 10);
        pnl.add(sep1);
        sep2.setBounds(190, 60, 10, 160);
        pnl.add(sep2);
        txt.setBounds(70, 10, 280, 30);
        pnl.add(txt);
        add(pnl);

        //Setjum inní Menu
        file.add(deg);
        file.add(rad);
        file.add(trigon);
        menuBar.add(file);
        getContentPane().add(menuBar, BorderLayout.NORTH);

        //HLUTIR SYNILEGIR
        setVisible(true);

        //NUMBER LISTENER
        ActionListener numberListener = new NumberListener();
        b0.addActionListener(numberListener);
        b1.addActionListener(numberListener);
        b2.addActionListener(numberListener);
        b3.addActionListener(numberListener);
        b4.addActionListener(numberListener);
        b5.addActionListener(numberListener);
        b6.addActionListener(numberListener);
        b7.addActionListener(numberListener);
        b8.addActionListener(numberListener);
        b9.addActionListener(numberListener);
        bDecPoint.addActionListener(numberListener);
        //bSvigi1.addActionListener(numberListener);
        //bSvigi2.addActionListener(numberListener);

        //OPERATOR LISTENER
        ActionListener operatorListener = new OperatorListener();
        bPlus.addActionListener(operatorListener);
        bMinus.addActionListener(operatorListener);
        bDivide.addActionListener(operatorListener);
        bMult.addActionListener(operatorListener);
        bSqrt.addActionListener(operatorListener);
        bPower.addActionListener(operatorListener);
        bEqual.addActionListener(operatorListener);
        bxRoot.addActionListener(operatorListener);
        bPer.addActionListener(operatorListener);
        if(trigOpen){
        t.bCos.addActionListener(operatorListener); 
        }
        //ANS LISTENER
        ActionListener ansListener = new AnsListener();
        bAns.addActionListener(ansListener);

        //CLEAR LISTENER
        ActionListener clearListener = new ClearListener();
        bc.addActionListener(clearListener);

        //Menu LISTENER
        ActionListener menuListener = new MenuListener();
        trigon.addActionListener(menuListener);

        //RadioButton LISTENER
        ActionListener radioListener = new RadioListener();
        deg.addActionListener(radioListener);
        //RadioButton LISTENER 2
        ActionListener radioListener2 = new RadioListener2();
        rad.addActionListener(radioListener2);

    }
    /**E: Núllstillir
    private void action() {
        number = true; 
        txt.setText("0.0");
        equalOp  = "=";
        op.setTotal("0.0");
    }  */

    //VIRKNI RADIO TAKKANS SEM BREYTIR YFIR Í GRÁÐUR
    class RadioListener implements ActionListener{
        public void actionPerformed(ActionEvent e){
            degPressed = true;
        }
    }

    //VIRKNI RADIO TAKKANS SEM BREYTIR YFIR Í RADÍANA
    class RadioListener2 implements ActionListener{
        public void actionPerformed(ActionEvent e){
            degPressed = false;
        }
    }

    //VIRKNI CLEAR TAKKANS
    class ClearListener implements ActionListener{
        public void actionPerformed(ActionEvent e){
            txt.setText("0.0");
        }
    }

    //VIRKNI TRIGONMETRY FLIPA
    class MenuListener implements ActionListener{
        public void actionPerformed(ActionEvent e){
            t = new Trigonmetry();
            trigOpen = true;
        }
    }

    //VIRKNI ANS TAKKA
    class AnsListener implements ActionListener{
        public void actionPerformed(ActionEvent e){
            ansOp = e.getActionCommand();
            if (ansOp.equals("ANS")) {
                txt.setText(ans);
            }
            else
                txt.setText("0.0");
        }
    }

    //VIRKNI TALNA TAKKA
    class NumberListener implements ActionListener{
        public void actionPerformed(ActionEvent event){
            String digit = event.getActionCommand(); 
            if (number){
                txt.setText(digit);
                number = false;
            } 
            else{
                txt.setText(txt.getText() + digit);
            }
        }
    }   

    // VIRKNI "VIRKJA"
    class OperatorListener implements ActionListener{
        public void actionPerformed(ActionEvent e){
            if (number){
                //action();
                txt.setText("0.0");
            }
            else{
                number = true; 
                String displayText = txt.getText();
                if (equalOp.equals("=")) {
                op.setTotal(displayText);
                } 
                else if (equalOp.equals("+")) {
                    op.add(displayText);
                } 
                else if (equalOp.equals("-")) {
                    op.subtract(displayText);
                } 
                else if (equalOp.equals("*")) {
                    op.multiply(displayText);
                } 
                else if (equalOp.equals("/")) {
                    op.divide(displayText);
                }
                else if(equalOp.equals("x^n")){
                    op.power(displayText);
                }
                else if(equalOp.equals("√x")){
                    op.squareRoot(displayText);
                }
                else if(equalOp.equals("n√x")){
                    op.xRoot(displayText);
                }
                else if(equalOp.equals("%")){
                    op.perCent(displayText);
                }
            //  else if(t.operand.equals("cos")){
                //  if(degPressed){
                    //  op.cOsDeg(displayText);
                    //}
                    //else
                    //  op.cOs(displayText);
                //}
                //else if(equalOp.equals("sin")){
                //  op.sIn(displayText);
                //}
                //else if(equalOp.equals("tan")){
                //  op.tAn(displayText);
                //}
                txt.setText("" + op.getTotalString());
                ans = txt.getText();
                equalOp = e.getActionCommand();
                //t.operand = e.getActionCommand();

            }
        }
    }   

    //*************** MAIN ***************//
    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                Calculator calc = new Calculator();
            }
        });
    }
} 
```

这是我的 Tigonmetry 类，如您所见，我也尝试在那里设置一个 actionListener

```
public class Trigonmetry extends JFrame
{
    JFrame frm;                  //rammi
    public JButton bCos;         //Cosinus
    public JButton bSin;         //Sinus
    public JButton bTan;         //Tangens
    public JButton baCos;        //arc Cosinus
    public JButton baSin;        //arc Sinus
    public JButton baTan;        //arc Tangens
    private JPanel panel;        //Panel
    public String operand;
    public Calculator cal;
    private CalculatorOp opp = new CalculatorOp();

    public Trigonmetry(){
        InitialUI();
    }

    public final void InitialUI(){
        frm = new JFrame(); 
        operand = "";
        bCos = new JButton("cos");
        bSin = new JButton("sin");
        bTan = new JButton("tan");
        baCos = new JButton("acos");
        baSin = new JButton("asin");
        baTan = new JButton("atan");
        panel = new JPanel();

        //HÖNNUN RAMMA
        setTitle("Trigonmetry");
        setLocationRelativeTo(null);
        setMinimumSize(new Dimension(180, 110));
        panel.setLayout(null);

        //TAKKAR
        bSin.setBorder(null);
        bSin.setBounds(20, 10, 40, 30);
        panel.add(bSin);
        bCos.setBorder(null);
        bCos.setBounds(70, 10, 40, 30);
        panel.add(bCos);
        bTan.setBorder(null);
        bTan.setBounds(120, 10, 40, 30);
        panel.add(bTan);
        baCos.setBorder(null);
        baCos.setBounds(20, 50, 40, 30);
        panel.add(baCos);
        baSin.setBorder(null);
        baSin.setBounds(70, 50, 40, 30);
        panel.add(baSin);
        baTan.setBorder(null);
        baTan.setBounds(120, 50, 40, 30);
        panel.add(baTan);
        add(panel);

        //HLUTIR SYNILEGIR
        setVisible(true);

        //OPERATORLISTENER
        ActionListener operandListener = new OperandListener();
        bCos.addActionListener(operandListener);
        bSin.addActionListener(operandListener);
        bTan.addActionListener(operandListener);
    }
        // VIRKNI "VIRKJA"
    class OperandListener implements ActionListener{
        public void actionPerformed(ActionEvent e){
            if (cal.number){
                //action();
                cal.txt.setText("0.0");
            }
            else{
                cal.number = true; 
                String displayText1 = cal.txt.getText();
                if (cal.equalOp.equals("=")) {
                opp.setTotal(displayText1);
                } 
                else if(operand.equals("cos")){
                    if(cal.degPressed){
                        opp.cOsDeg(displayText1);
                    }
                    else
                        opp.cOs(displayText1);
                }
                else if(operand.equals("sin")){
                    if(cal.degPressed){
                        opp.sInDeg(displayText1);
                    }
                    else
                        opp.sIn(displayText1);
                }
                else if(operand.equals("tan")){
                    if(cal.degPressed){
                        opp.tAnDeg(displayText1);
                    }
                    else
                        opp.tAn(displayText1);
                }
                cal.txt.setText("" + opp.getTotalString());
                operand = e.getActionCommand();
            }
        }
    }   

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:38:02.867

Trigonometry 的 Calculator 变量 cal 为空，因为它从未使用当前的 Calculator 实例初始化。您需要将 Calculator 实例放入 Trigonometry 类，以便 Trig 类可以调用 Calculator 的公共方法。一种方法是通过构造函数参数，另一种方法是通过 setter 方法，例如`setCalculator(Calculator calculator) {...}`. 构造函数参数技术的示例：

在 Calculator.java 中：

```
Trigonometry t = new Trigonometry(this); 
```

在三角函数类中：

```
// constructor now accepts a Calculator parameter
public Trigonmetry(Calculator calculator) {
  // initialize the cal field with the current Calculator instance
  cal = calculator; 
  InitialUI();
} 
```

还：

*   `setBounds(...)`根据 camickr 的建议，不要使用和空布局。
*   而是阅读布局管理器的使用，然后使用嵌套的 JPanel，每个 JPanel 都使用适当的布局管理器。
*   不要使用多个 JFrame。第二个 Trig 窗口应该是一个 JDialog（也是根据 camickr 的建议）。
*   学习和使用 Java 编码约定。类名以大写字母开头，方法和变量名以小写字母开头。
*   在这里提出问题时，请尝试将您的代码削减到显示您的问题的最低限度，仍然允许您的代码编译和运行，但不包含与您的问题无关的代码。上面发布的 95% 的当前代码对于解决问题和分散我们的注意力都是不必要的。

还：

*   如果您只希望 Trigonometry 实例在 Calculator 的控制下打开，那么没有代码显示它由 Trigonometry 调用，而是由 Calculator 调用。换句话说，不要`setVisible(true)`对自身进行 Trigonometry 调用，而是让 Calculator 在 Trigonometry 实例上调用它。

在计算器中：

```
class MenuListener implements ActionListener {
  public void actionPerformed(ActionEvent e) {
     t.setVisible(true);
     trigOpen = true;
  }
} 
```

在三角学中：

```
public final void InitialUI() { // this should be named initialUi()

  // ..... code deleted for brevity

  panel.add(baTan);
  add(panel);
  // !!  setVisible(true); // *** don't call this here ***
  ActionListener operandListener = new OperandListener();

  // ..... code deleted for brevity

} 
```

# html - 如何使用 HTML5 在网页上制作互动视频？

> ID：15852644
> 
> 赞同：0
> 
> 时间：2013-04-06T15:22:29.313
> 
> 标签：html, video, canvas, html5-video

我有一个低延迟（本地）的网络服务器，我想做的是从网络服务器生成视频内容，并允许用户通过点击视频与该视频内容进行交互，点击 x,y 将转到服务器。

用户点击的位置将决定视频的作用。此外，视频不会暂停等待点击，它需要继续播放。

我尝试使用图像，每 50 毫秒重新加载一个图像。在我的 MAC 上，Chrome 使用大约 10% 的 CPU 使用率每 50 毫秒重新加载一次图像，其中图像是用 PHP 生成的。嗯，这相当不错，百分之十是好的，但我在想有没有更好的方法？

稍后我还需要能够发送用户点击的 XY 坐标，我可以使用 URL 来做到这一点。

```
 <script type="text/javascript">

function reloadIt() {
  var n = Math.floor(Math.random()*1000001);
  $("#topaz").attr("src", "image.php?n=" + n);
  setTimeout(reloadIt, 50);
}

$(document).ready(function() {
  // Handler for .ready() called.
  setTimeout(reloadIt, 50);
});

  </script> 
```

你可以想到这个问题的另一种方式是，你如何编写一个用户可以控制摄像头的网络摄像头客户端？你如何用 HTML5 做到这一点？（不是 Flash），因此当用户单击向上时，相机会向上移动，并且视频会更改为向上移动。

有没有办法在 HTML5 中做这样的视频流？使用 Canva 和流数据到浏览器会有帮助吗？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:31:16.687

**您可以像这样创建点倾斜相机的错觉**

我不确定您是否已经拥有在画布中呈现视频的代码。如果您需要知道如何在画布中显示视频，这里有一个教程：[http ://html5doctor.com/video-canvas-magic/](http://html5doctor.com/video-canvas-magic/)

之后，假设您有一个源为 640x480 的屏幕外图像（或视频）和一个较小的画布 320x240。

```
<img width=640 height=480>
<canvas width=320 height=480> 
```

在画布中显示该图像的一**小部分**。

```
// grab a smaller part of the source and display it in the canvas
context.drawImage(source,X,Y,source.width,source.height,0,0,canvas.width,canvas.height); 
```

然后当用户点击时，只需调整您正在显示的源的哪一部分

```
// change the portion of the source you’re displaying
if(mouseX<canvas.width/2 && x>0){ x-=10; }
if(mouseX>=canvas.width/2 && x<canvas.width){ x+=10; }
if(mouseY<canvas.height/2 && y>0){ y-=10; }
if(mouseY>=canvas.height/2 && y<canvas.height){ y+=10; } 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/3KYC5/](http://jsfiddle.net/m1erickson/3KYC5/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;

    var img=new Image();
    img.onload=function(){
        draw();
    }
    img.src="http://dsmy2muqb7t4m.cloudfront.net/tuts/218_Trace_Face/10B.jpg";

    var x=200;
    var y=200;
    function draw(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.drawImage(img,x,y,canvas.width,canvas.height,0,0,canvas.width,canvas.height);
    }

    function handleMouseDown(e){
      mouseX=parseInt(e.clientX-offsetX);
      mouseY=parseInt(e.clientY-offsetY);

      // Put your mousedown stuff here
      if(mouseX<canvas.width/2 && x>0){ x-=10; }
      if(mouseX>=canvas.width/2 && x<canvas.width){ x+=10; }
      if(mouseY<canvas.height/2 && y>0){ y-=10; }
      if(mouseY>=canvas.height/2 && y<canvas.height){ y+=10; }
      draw();
    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});

}); // end $(function(){});
</script>

</head>

<body>
    <p>Click in the image to reveal in the direction of the click</p>
    <canvas id="canvas" width=320 height=240></canvas>
</body>
</html> 
```

# cocos2d-iphone - 将ccb文件拖到图层不起作用 cocosbuilder

> ID：15852652
> 
> 赞同：0
> 
> 时间：2013-04-06T15:23:52.287
> 
> 标签：cocos2d-iphone, cocosbuilder

这应该是一个快速的问题，我在[这里](http://code.zynga.com/2012/10/creating-a-game-with-cocosbuilder/)阅读 cocosbuilder 教程。我创建了一个 CCNode 类并为其添加了一些图像动画，然后我创建了一个 CCLayer 类并希望将节点添加到 CCLayer 类中。这是教程“从项目视图中，将 Dragon.ccb 文件拖到画布上”的内容。但是当我这样做时，它没有显示任何内容，它只是创建了一个新的 CCNode 类。有谁知道我做错了什么？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T19:21:45.950

没关系，我想通了。我只是没有保存课程。这种方式很奇怪，但如果你想保存你创建的类。您必须先双击它并手动保存。只需单击保存选项将不会保存您创建的每个类。所以你必须去每个班级并手动保存每个班级，我觉得这样有点蹩脚......

# ruby-on-rails - 在 aws beanstalk rails 容器上安排 cron 作业

> ID：15852656
> 
> 赞同：0
> 
> 时间：2013-04-06T15:24:05.850
> 
> 标签：ruby-on-rails, amazon-web-services, cron, whenever, amazon-elastic-beanstalk

我正在使用when gem 来配置我的crontab 并安排cron 作业。我的 config/schedule.rb 文件包含以下内容：

```
set :environment, "test"
set :output, {:error => "/var/log/cron_error.log", :standard => "/var/log/cron_log.log"}

every 1.minutes do
   runner 'TickerSymbol.update_prices'
end 
```

目前我正在 TickerSymbol.update_prices 方法中调用 Rails.logger.debug ...。另外，请注意 schedule.rb 文件中我正在尝试将计划 cron 作业的输出写入 /var/logs/*.log。这是行不通的。当我在 S3 上或通过 Beanstalk 管理控制台查看日志时，我会看到 /var/log 目录中的其他日志文件，但看不到我的 cron 日志文件。

我的 .ebextensions/[app name].config 文件包含以下内容：

```
sources: 
  /aws-scripts-mon: http://ec2-downloads.s3.amazonaws.com/cloudwatch-samples/CloudWatchMonitoringScripts.zip

option_settings:
  - option_name: AWS_SECRET_KEY
    value: XXX
  - option_name: AWS_ACCESS_KEY_ID
    value: XXX
  - option_name: BUNDLE_WITHOUT
    value: "production:development"
  - option_name: RACK_ENV
    value: test
  - option_name: RAILS_ENV
    value: test
  - option_name: RAILS_SKIP_MIGRATIONS
    value: true

container_commands:
  01-setupcron:
    command: echo "*/5 * * * * root perl /aws-scripts-mon/mon-put-instance-data.pl --mem-util --mem-used --mem-avail --aws-access-key-id $AWS_ACCESS_KEY_ID --aws-secret-key $AWS_SECRET_KEY > /dev/null" > /etc/cron.d/cwpump
  02-changeperm:
    command: chmod 644 /etc/cron.d/cwpump
  03-changeperm:
    command: chmod u+x /aws-scripts-mon/mon-put-instance-data.pl
  04-rake_routes:
    command: rake routes
  05-whenever:
    command: whenever -c
    command: whenever -i [app name] --update-crontab
    command: whenever -f
    command: crontab -l
    leader_only: true 
```

以下是我在使用 git aws.push 部署期间生成的日志文件的内容。此日志条目确认无论何时按预期生成 crontab 文件。

```
2013-04-06 14:50:37,469 [DEBUG] Running command 05-whenever
2013-04-06 14:50:37,470 [DEBUG] Generating defaults for command 05-whenever
<<<

2013-04-06 14:50:37,639 [DEBUG] Running test for command 05-whenever
2013-04-06 14:50:37,654 [DEBUG] Test command output: 
2013-04-06 14:50:37,654 [DEBUG] Test for command 05-whenever passed
2013-04-06 14:50:37,671 [INFO] Command 05-whenever succeeded
2013-04-06 14:50:37,671 [DEBUG] Command 05-whenever output: # Begin Whenever generated tasks for: [app name]
0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58 * * * * /bin/bash -l -c 'cd /var/app/ondeck && script/rails runner -e production '\''TickerSymbol.update_prices'\'' >> /path/to/my/cron_log.log 2>&1'

# End Whenever generated tasks for: [app name] 
```

我错过了什么吗？根据当前配置，我希望在 /var/log/cron_log.log 文件中看到来自 TickerSymbol.update_prices 的日志消息。但是，我没有看到任何迹象表明这些设置正在产生错误，也没有看到任何表明 cron 作业正在运行的迹象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:33:18.647

查看最后一个日志中的输出：

```
... cd /var/app/ondeck ... 
```

此目录仅在部署期间存在。如果您的 crontab 像它说的那样设置为 CD，它将无法工作。

# css - 以百分比设置宽度时的 HTML 缩放 div

> ID：15852658
> 
> 赞同：1
> 
> 时间：2013-04-06T15:24:20.717
> 
> 标签：css, html, width, scaling

因此，当用户第一次打开网站时，我需要`<div>`在屏幕中间放置一个，我尝试以百分比设置宽度并放入`<div>`标签`<center>`，但在这两种情况下缩放都无法正常工作。如何`<div>`在没有缩放问题的情况下将 a 放在屏幕中央？

通过“缩放不起作用”我的意思是当我放大太多时它会停止增加宽度，同时仍然增加高度和内容，所以它添加了换行符并且一切看起来完全错误

感谢您的回复，但是您的建议都有我描述的这个问题。到目前为止，唯一的出路是将位置设置为绝对位置，并以厘米为单位手动设置“顶部”、“左侧”、“宽度”和“高度”参数。看一下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="../../../All Files/HTML/Project/special.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div class='centering'>
      <div class='content'>
test test test test test test test test test test test test test test
      </div>
</div>
</body>
</html> 
```

和css文件：

```
.centering {
    text-align: center;
    background-color:#646464;
}
.content {
    text-align: left;
    margin: 0 auto;
    width:50%;
    background-color:#2B2B2B;
} 
```

我非常感谢您花时间帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:29:31.853

例如，如果您的 div 是：

```
<div id="content">
  //div content
 </div> 
```

然后在你的CSS中使用：

```
 #content {
  width: 50%;
  margin: 0 auto;
  } 
```

只需根据需要更改宽度即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:44:14.537

你有这个：

```
<center>
    <div>
    </div>
</center> 
```

试试这个：

```
<div class="centering">
    <div class="content">
        Text here!
    </div>
</div> 
```

在你的 CSS 中：

```
.centering {
    text-align: center;
}
.content {
    text-align: left;
    margin: 0 auto;
    width:50%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:58:59.200

你可以这样使用。

```
.wrapper{
      width:50%;
      margin:0 auto;
}

.content{
      float:left;
}

<div class='wrapper'>
      <div class='content'>
           //your content
      </div>
</div> 
```

或者对于内容选择器，您还可以将 text-align 属性指定为 left。

# graphics - 在延迟渲染中，用材质和 UV 缓冲区替换纹理缓冲区是否可行？

> ID：15852659
> 
> 赞同：0
> 
> 时间：2013-04-06T15:24:20.890
> 
> 标签：graphics, rendering, deferred

我试着尽我所能解决这个问题，但这是问题的实质，

制作一个延迟渲染器是否实用，而不是具有漫反射/镜面反射缓冲区，而是具有材质/ UV 缓冲区，材质的处理类似于平铺光剔除，着色器将传递所需的纹理（镜面反射，漫反射，发光、贴花等）并使用 UV 缓冲区中的 UV 对其进行采样。

我只是想想一种方法来获得延迟渲染的好处和前向渲染的灵活性，我想不出为什么这会使两者都变得最糟糕，但我找不到任何信息在任何类似的东西上，所以我不知道它在实用性上的优缺点是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:44:50.527

我不知道这种方法将如何改进正常的延迟渲染。延迟渲染的主要缺点是传递大缓冲区、多个照明模型的复杂性、透明度和抗锯齿。

您提出的方法需要巨大的缓冲区来存储所有模型的所有不同纹理，这将比漫反射和镜面反射缓冲区占用更多空间。

您的方法对光照模型没有任何改进，因为它仍然需要材质 ID 缓冲区和复杂的光照着色器。

您的方法无法解决透明度或抗锯齿问题。

总体而言，材质和 uv 缓冲区可以很容易地被仅包含 uv 坐标处材质颜色的漫反射缓冲区替换，就像在正常的延迟渲染中一样。

编辑：在您描述的情况下，使用多个（例如发光、漫反射、光泽、镜面反射......）缓冲区将这些用作纹理，并且只为每种材料加载一组，这可能是实用的。但是，它只会节省少量带宽，因为与您建议的材质纹理相比，正常设置只需要屏幕大小的纹理。此外，由于为每种材质切换多个纹理，可能会降低性能。

# python - python如何访问MagicMock中的输入参数？

> ID：15852660
> 
> 赞同：0
> 
> 时间：2013-04-06T15:24:23.157
> 
> 标签：python, mocking

我想为函数'method_a'添加一个单元测试：

```
def method_a(some_thing):
    #some logic here
    return update({'a':1}, request=some_thing)

def update(value, request):
    if request:
      return value.update({'b':2})
    return value.update({'c':3}) 
```

其实我不在乎更新方法的逻辑。我要做的就是使用 MagicMock 或任何工具来模拟更新方法，并让它返回它收到的第一个参数（在这种情况下，应该返回 {'a': 1}）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:21:26.787

你可以使用`patch`函数。这是一个例子：

```
from unittest import TestCase
from mock import patch

def method_a(some_thing):
    #some logic here
    return update({'a': 1}, request=some_thing)

def update(value, request):
    if request:
        return value.update({'b': 2})
    return value.update({'c': 3})

class TestMethodA(TestCase):
    def test_mocked_update(self):
        with patch('%s.update' % __name__, lambda value, request: value):
            self.assertEqual(method_a('test'), {'a': 1}) 
```

希望有帮助。

# javascript - 如何设置具有继承 + 私有属性 + getter / setter 的 javascript 类

> ID：15852661
> 
> 赞同：0
> 
> 时间：2013-04-06T15:24:51.563
> 
> 标签：javascript, node.js, class, inheritance, getter-setter

我希望使用带有私有可继承属性的[https://github.com/mozilla/BrowserQuest/blob/master/server/js/lib/class.js](https://github.com/mozilla/BrowserQuest/blob/master/server/js/lib/class.js)以及其中的一些 getter 和 setter。

基本上，我希望 getter / setter 修改私有属性和子类以继承 setter、getter 和私有属性。这是我到目前为止得到的：

```
var Person = Class.extend({
    init: function( name )
    {
        var name = "~";

        this.myName = name;

        return {
            set myName( value )
            {
                name = value + " +?";
            },
            get myName()
            {
                return name + "^^^^^^^^^";
            }
        }
    }
});
var c  = new Person( "cheese" );
console.log(c.myName);
c.myName = "zoom";
console.log(c.myName); 
```

跟踪：未定义缩放

奇怪的是，我的编辑器（Webstorm）将 c.myName 视为 setter/getter，但编译器认为它是未定义的公共属性 :(

任何帮助，将不胜感激。这是 Nodejs，但我认为问题在于 javascript。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:49:33.850

我假设 Node.js 或任何其他可以使用整个 EcmaScript 5 的环境。

如今，在 JavaScript 中拥有真正私有数据的唯一方法是在构造函数中保留一个变量，这就是您正在做的事情。但是，您`return`对`init`函数中的使用感到困惑。虽然该`init`函数几乎是构造函数，但它并没有被完全调用，所以`return`什么也不做。即使它做了什么，你想要的是将一个属性添加到`this`，而不是返回一个新对象。所以基本上你必须将其更改`return`为`Object.defineProperty`：

```
init: function (name) {
  // notice that the private variable has a different name
  // than the parameter
  var privateName = '~';

  Object.defineProperty(this, 'myName', {
    set: function (value) {
      privateName = value + " +?";
    },
    get: function () {
      return privateName + "^^^^^^^^^";
    }
  });

  this.myName = name;
} 
```

这仍然有继承的限制。如果您想从 Person 类继承并修改 getter 和 setter，您必须获取属性描述符，修改它并重新定义属性。那很痛苦。而且它不支持访问“超级getter/setter”。为了避免我们通常在 JavaScript 中所做的是忘记拥有真正的私有属性并按照约定使用私有属性，私有属性的名称以`_`. 然后你可以像这样在原型中简单地定义你的getter和setter：

```
var Person = Class.extend({
  init: function(name) {
    // the private name property
    this._name = '~';

    this.myName = name;
  },
  set myName(value) {
    this._name = value + " +?";
  },
  get myName() {
    return this._name + "^^^^^^^^^";
  }
}); 
```

这将让您在使用继承时访问超级 getter/setter。

有一个尖端功能可以让您拥有真正的私有并继承 getter 和 setter：WeakMap。WeakMap 基本上是一个对象，它在其他两个不计入垃圾收集的对象之间创建关系。最后一部分对于内存管理很重要，而第一部分是让你拥有真正私有的部分。您可以在 Firefox 的 Beta 版本和带有`--harmony_collections`标志的 Node.js 中尝试 WeakMaps。以下是它的工作原理：

```
function privatize() {
  var map = new WeakMap();
  return function (obj) {
    var data = map.get(obj);
    if (!data) {
      map.set(obj, data = {});
    }
    return data;
  };
}

var Person = (function () {
  var _private = privatize();

  return Class.extend({
    init: function(name) {
      // the private name property
      _private(this).name = '~';

      this.myName = name;
    },
    set myName(value) {
      _private(this).name = value + " +?";
    },
    get myName() {
      return _private(this).name + "^^^^^^^^^";
    }
  });
}()); 
```

# jquery - 使用jquery从codeigniter控制器获取数据的下拉人口

> ID：15852664
> 
> 赞同：0
> 
> 时间：2013-04-06T15:25:23.713
> 
> 标签：jquery, mysql, codeigniter, drop-down-menu, populate

我想使用 jquery 和 ajax 填充下拉列表。

我的jQuery电话是

```
<script>
        $(document).ready(function(){
            $.ajax({           
                type: "GET",
                url: "<?=base_url()?>user/getstate/",                  //the script to call to get data          
                data:'',                        //you can insert url argumnets here to pass to api.php
                dataType: 'json',                //data format      
                success: function(data){    //on recieve of reply
                    $("#state").append('<option selected>State</option>');
                    for(i in data) 
                        $("#state").append("<option value=\""+data[i][0]+"\">"+data[i][1]+"</option>");
                } 

            });
        });
    </script> 
```

需要填充的部分是

```
<select id="state" class="span2" style="height:30px" name="state" required>
</select> 
```

控制器中的功能是

```
public function getstate(){

        $this->load->model('usermodel');
        $data=$this->usermodel->getstate();
        echo json_encode($data);

} 
```

从中获取数据的模型是

```
public function getstate(){
    $sql="SELECT * FROM statelist";
    $query=$this->db->query($sql);
    $result=$query->result_array();
    return $result;
} 
```

statelist 中的数据是

席位 | 州名

wb | 西孟加拉邦

嘎| 果阿

我面临的问题是，当我加载页面时，我得到了带有 2 个元素的下拉列表，但以这种形式

状态
未定义
未定义

现在我不明白为什么我得到“未定义”而不是所需或预期的数据

州
西孟加拉邦
果阿

一个解决方案真的会帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:45:28.573

Jquery 将您的 json 转换为一个对象，因此您需要像这样引用它：

```
data.i 
```

不是

```
data[i] 
```

就像您使用数组一样。

但我猜我不是你的钥匙。如果您尝试在成功参数中记录数据“console.log(data)”，您应该能够看到正确的键名。

# javascript - Javascript 菜单高亮切换器

> ID：15852668
> 
> 赞同：1
> 
> 时间：2013-04-06T15:26:07.383
> 
> 标签：javascript, css

我正在尝试创建一个页面，该页面只是一个具有不同 div 的页面，这些 div 在未选择时被隐藏。

当前，我在菜单按钮上有一些问题，我希望突出显示所选页面，然后选择另一个选项卡时，突出显示了另一个选项卡。

说家，关于我们，联系我们

因此，如果它在 home div 中，则 Home 选项卡会突出显示，但如果它是 about us div，则会突出显示 about us。我想使用纯 css，但搜索后没有任何结果，所以我必须坚持使用 javascript。

这是我的代码

```
function Switcher(a,b,c,d,e){
document.getElementById('button1').style.background=a;
document.getElementById('button2').style.background=b;
document.getElementById('button3').style.background=c;
document.getElementById('button4').style.background=d;
document.getElementById('button5').style.background=e;
} 
```

带有 OnClick 功能

```
onClick="Switcher(#c5e043,#241009,#241009,#241009,#241009)" 
```

但它似乎不起作用，有什么帮助吗？或其他更简单的建议:)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:29:57.573

使用`backgroundColor`而不是背景：

```
function Switcher(a,b,c,d,e){
    document.getElementById('button1').style.backgroundColor = a;
    document.getElementById('button2').style.backgroundColor = b;
    document.getElementById('button3').style.backgroundColor = c;
    document.getElementById('button4').style.backgroundColor = d;
    document.getElementById('button5').style.backgroundColor = e;
} 
```

还将参数作为字符串传递：

```
onClick="Switcher('#c5e043', '#241009', '#241009', '#241009', '#241009')" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:56:53.597

*或其他更简单的建议:)？*

**脚本：**

```
function Switcher(Colors)
    {
    var Count=1;

Colors.split(",").forEach(function(xColor) { document.getElementById('button' + Count).style.background = xColor;
Count +=1; });

} 
```

**点击：**

```
onClick="Switcher("#c5e043,#241009,#241009,#241009,#241009")" 
```

# ruby-on-rails - 使用轮胎的 Elasticsearch 术语和范围过滤器

> ID：15852669
> 
> 赞同：1
> 
> 时间：2013-04-06T15:26:09.090
> 
> 标签：ruby-on-rails, elasticsearch, tire

我正在尝试在基于 elasticsearch+tire 的 Rails 中构建搜索功能，以搜索具有关联对象及其值的过滤的人员。一个人有_many 个对象，一个对象有_many 值。

我设法使对象名称（params [：object]）的过滤起作用，但不适用于对象+值。我应该如何为值和映射构造范围过滤器，以便值依赖于对象？

**人员控制器**

```
mapping do
  indexes :objects do
    indexes :_id   
    indexes :object_values do
      indexes :value
    end
  end     
  indexes :name, type: 'string', analyzer: 'snowball'  
end

def self.search(params)
  tire.search do
    query do
      boolean do
        must { string params[:query]} if params[:query].present?    
      end
    end
    filter :term, {"objects._id" => params[:object]} if params[:object].present?
    filter :range, “objects.object_values.value”  => {from: params[:value] } if   params[:value].present?
  end
end

def to_indexed_json
{      
  :name       => name,
  :objects => objects.map { |o| { 
    :_type => 'object',
    :_id   => o.id,
    :object_values => o.object_values.map {|ov| {
      :_type => 'object_value',
      :_id => ov.id,
      :value => ov.value } },
    } }
}.to_json
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T03:45:33.233

使用`gt`or`gte`而不是`from`指定范围的下限

```
filter :range, “objects.object_values.value”  => {from: params[:value] } 
```

# asynchronous - 阻塞、非阻塞和异步 I/O

> ID：15852671
> 
> 赞同：2
> 
> 时间：2013-04-06T15:26:14.633
> 
> 标签：asynchronous, io, blocking, nonblocking

我一直在阅读不同类型的 I/O 并开始想知道为什么操作系统不只是实现非阻塞 I/O 并通过忙等待来模拟阻塞 I/O。

我想到的一个原因可能是浪费了 CPU 周期。

有什么想法吗？

# php - Laravel 支持类

> ID：15852674
> 
> 赞同：1
> 
> 时间：2013-04-06T15:26:37.823
> 
> 标签：php, laravel, laravel-3

laravel 3 是否有专门用于处理电子邮件、FTP、文件上传、ZIP 文件、验证码、Web 服务的类？还是应该为函数制作自己的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:32:48.040

是的，借助[Bundles](http://bundles.laravel.com)的力量！如果他们把所有可能的特性都放在核心中，那么每个人都会抱怨这个框架会有多臃肿。这就是捆绑包的用武之地。

这里有些例子：

*   [验证码](http://bundles.laravel.com/search?q=captcha)
*   [电子邮件](http://bundles.laravel.com/search?q=mail)
*   [身份验证](http://bundles.laravel.com/search?q=oauth)

[Input 类](https://github.com/laravel/laravel/blob/master/laravel/input.php)支持文件上传。

# c++ - 与 MinGW 的静态和动态/共享链接

> ID：15852677
> 
> 赞同：35
> 
> 时间：2013-04-06T15:26:45.997
> 
> 标签：c++, gcc, mingw, static-linking, dynamic-linking

我想从一个简单的链接用法开始来解释我的问题。假设有一个库`z`可以编译为共享库 libz.dll(D:/libs/z/shared/libz.dll) 或静态库 libz.a (D:/libs/z/static/libz.dll)。一种）。

让我想链接它，然后我这样做：

```
gcc -o main.exe main.o -LD:/libs/z/static -lz 
```

根据[此文档](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)，gcc 将搜索 libz.a，即

> 成员为目标文件的归档文件

我还可以执行以下操作：

```
gcc -o main.exe main.o -LD:/libs/z/shared -lz 
```

上面的文档中没有提到该`-l`标志将搜索`lib<name>.so`.

如果我的 libz.a 和 libz.dll 在同一个目录中会发生什么？库将如何与程序链接？为什么我需要标志`-Wl,-Bstatic`以及`-Wl,-Bdynamic`是否`-l`同时搜索共享库和静态库？

如果我编译共享库发行版，为什么有些开发人员会为相同的模块提供带有 .dll 文件的 .a 文件？

例如，Qt 在 bin 目录中提供 .dll 文件，在 lib 目录中提供 .a 文件。它是同一个库，但分别像共享和静态一样构建吗？或者 .a 文件是某种提供与共享库链接的虚拟库，哪里有真正的库实现？

另一个例子是 Windows 上的 OpenGL 库。为什么每个编译器都必须在 MingW 中提供像 libopengl32.a 这样的静态 OpenGL 库？

带有 .dll.a 和 .la 扩展名的文件有什么用途？

PS这里的题很多，但是我觉得每题都依赖上一个题，没必要拆成几个题。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-06T16:27:12.843

请看一下[ld 和 WIN32 (cygwin/mingw)](https://sourceware.org/binutils/docs/ld/WIN32.html)。特别是，**直接链接到 dll**`-l`部分以获取有关LD 的 Windows 端口上标志行为的更多信息。提炼：

> 例如，当使用参数 -lxxx 调用 ld 时，它将尝试在其搜索路径的第一个目录中查找，

```
libxxx.dll.a
xxx.dll.a
libxxx.a
cygxxx.dll (*)
libxxx.dll
xxx.dll 
```

> 在移动到搜索路径中的下一个目录之前。
> 
> (*) 实际上，这不是`cygxxx.dll`但实际上是`<prefix>xxx.dll`，`<prefix>`由 ld 选项设置的位置`-dll-search-prefix=<prefix>`。在 cygwin 的情况下，标准 gcc 规范文件`-dll-search-prefix=cyg`包括`cygxxx.dll`.

**注意：**如果您曾经使用 MinGW 构建过 Boost，您可能还记得 Boost 库的命名完全遵循上面链接中描述的模式。

过去在 MinGW 中存在直接链接到 的问题`*.dll`，因此建议创建一个静态库`lib*.a`，其中包含导出的符号`*.dll`并链接到它。这个 MinGW wiki 页面的链接现在已经死了，所以我认为`*.dll`现在直接链接应该没问题。此外，我用最新的 MinGW-w64 发行版自己做了几次，还没有遇到任何问题。

您需要链接标志`-Wl,-Bstatic`，`-Wl,-Bdynamic`因为有时您想强制静态链接，例如，当搜索路径中也存在同名的动态库时：

```
gcc object1.o object2.o -lMyLib2 -Wl,-Bstatic -lMyLib1 -Wl,-Bdynamic -o output 
```

上面的代码片段保证`-l`flag 的默认链接优先级被覆盖`MyLib1`，即即使`MyLib1.dll`存在于搜索路径中，LD 也会选择`libMyLib1.a`链接。请注意，对于`MyLib2`LD 将再次更喜欢动态版本。

**注意：**如果`MyLib2`取决于`MyLib1`，则`MyLib1`也被动态链接，不管`-Wl,-Bstatic`（即在这种情况下它被忽略）。为了防止这种情况，您也必须`MyLib2`静态链接。

# emacs - 在 Emacs 中生成跟踪模板

> ID：15852679
> 
> 赞同：1
> 
> 时间：2013-04-06T15:26:56.763
> 
> 标签：emacs

在调试时，我通常会在执行过程中编写很多跟踪以在屏幕上打印变量。如果 Emacs 可以为我编写模板就好了。我不知道如何在 Emacs 上编程，所以我请求你的帮助 :)

我的想法如下。像 Mx trace-template 这样的东西，会询问变量的名称。然后，类似这样的内容将被添加到活动缓冲区中：

```
// trace20130604
cout << "test.cpp variable: " << variable << endl; 
```

注释中添加的日期允许对当天的痕迹进行快速搜索，以便在不需要时将其删除。“test.cpp”是活动缓冲区，自动插入。“变量”是 Emacs 命令在执行时询问您的变量名称。

你认为这会有用吗？易于实施？也许已经实施？:)

理想情况下，它应该是特定于模式的，因此可以根据您使用的语言插入正确的模板。

非常感谢你的帮助！

问候。

# 几种主要模式的解决方案

我已经扩展了 Francesco 的解决方案以涵盖两种主要模式。这是我第一次尝试在 Elisp 中做某事，我认为代码很难看，但它似乎可以工作。

```
(defun trace-template (variable-name)
  (interactive "sVariable Name: ")
  (if (string-equal (format "%s" major-mode) "c++-mode")
      (progn
            (insert (format-time-string "// trace%Y%m%d\n"))
            (insert (format "cout << \"%s %s:\" << %s << endl;\n\n"
                  (file-name-nondirectory buffer-file-name)
                  variable-name variable-name)))
    )
  (if (string-equal (format "%s" major-mode) "fortran-mode")
      (progn
            (insert (format-time-string "! trace%Y%m%d\n"))
            (insert (format "WRITE(*,*) \"%s %s:\", %s\n\n"
                  (file-name-nondirectory buffer-file-name)
                  variable-name variable-name)))
    )
  ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:26:50.107

第一个解决方案是使用[yasnippet](https://github.com/capitaomorte/yasnippet)扩展，它旨在满足您的需要：将（可能参数化的）模板插入到当前缓冲区中。

Yasnippet 可以使用 emacs 的打包系统轻松安装，例如通过[MELPA](http://melpa.milkbox.net/)存储库，它的[文档](http://capitaomorte.github.io/yasnippet/)解释了[如何编写自定义片段](http://capitaomorte.github.io/yasnippet/snippet-development.html)。模板后面的代码段可能如下所示：

```
#contributor : me <me@example.com>
#name : trace
# --
// `(format-time-string "%Y%m%d")`
cout << "`(file-name-nondirectory buffer-file-name)` $1:" << $1 << endl; 
```

Yasnippet 可以将片段扩展限制为特定模式，因此我认为您可以轻松定义多个以相同方式命名的特定于语言的片段。

* * *

另一种解决方案是编写一个自定义的 Emacs LISP 函数，如下所示：

```
(defun trace-template (variable-name)
  (interactive "sVariable Name: ")
  (insert (format-time-string "// trace%Y%m%d\n"))
  (insert (format "cout << \"%s %s:\" << %s << endl"
                  (file-name-nondirectory buffer-file-name)
                  variable-name variable-name))) 
```

# forms - Bootstrap 表单 - 标签和输入水平在同一行

> ID：15852681
> 
> 赞同：0
> 
> 时间：2013-04-06T15:27:07.177
> 
> 标签：forms, twitter-bootstrap

使用引导程序，每次添加“标签”时，都会创建一条新的垂直线。但是，我想要实现的是在同一行水平放置**两个标签。**

我曾尝试与“控制组”合作，但无法让它按照我想要的方式工作。

这基本上是我想要实现的（注意它们都是水平的）：

```
Date                       Start & End Time
 <<input goes here>>       <<start input here>>   <<end input here>> 
```

这是我目前（大致）[在这个 JS Bin 上](http://jsbin.com/amimos/1/edit)遇到的问题的链接。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T15:39:23.340

使用[网格](http://twitter.github.io/bootstrap/scaffolding.html#gridSystem)系统创建两列

```
<div class="row-fluid">
    <div class="span6"><!-- first col --></div>
    <div class="span6"><!-- second col --></div>
</div> 
```

# javascript - CKEditor 中的按钮重新启用

> ID：15852686
> 
> 赞同：0
> 
> 时间：2013-04-06T15:27:54.003
> 
> 标签：javascript, ckeditor

我有以下 Javascript 来禁用 CKEditor 上的按钮：

```
CKEDITOR.replace( 'text', {
    on : {
        instanceReady : function(ev) {
            ev.editor.commands.image.disable();
            ev.editor.commands.justifyleft.disable();
        }
    }
}); 
```

这可以很好地禁用加载时的按钮，但是单击任何其他未禁用的按钮时，它们都会重新启用。我尝试将代码放在其他几个地方，但没有运气。

放置禁用代码使其不会重新启用的正确位置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:33:02.763

如果您真的想禁用按钮，而不是隐藏它们，请检查我的答案 - [Show but disable wysiwyg buttons](https://stackoverflow.com/questions/15582226/show-but-disable-wysiwyg-buttons/15598583#15598583)。

如果您想完全删除它们，请查看本指南 - [http://docs.ckeditor.com/#!/guide/dev_toolbar](http://docs.ckeditor.com/#!/guide/dev_toolbar)

# java - 如何减少使用 GhostDriver 和 PhantomJS 从 Web 获取 URL 页面的时间

> ID：15852687
> 
> 赞同：1
> 
> 时间：2013-04-06T15:27:55.803
> 
> 标签：java, maven, selenium, phantomjs, ghostdriver

我在 Maven 中做项目。我尝试从 URl 获取页面。到目前为止，我成功地从网络获取页面。但我有两个问题，

**问题**，

1.  下面的代码需要大约 14 秒来获取任何两个 URL 页面，我怎样才能减少这个时间，帮助我优化这个。
2.  完成执行后，它不会从代码中退出。为什么 ？我用 结束了代码`driver.close()`。那么，为什么，它没有成功退出。我在开始之前和完成过程之后添加了快照。请看这些。

帮助我解决我的问题。请。

**我的代码：-**

```
package XXX.YYY.ZZZ.Template_Matching;

import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlPage;
import java.io.IOException;
import org.junit.Assert;
import org.junit.Test;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.phantomjs.PhantomJSDriver;
import org.openqa.selenium.phantomjs.PhantomJSDriverService;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.w3c.dom.Document;

public class HtmlUnit {

    public static void main(String[] args) throws Exception {
        String url1 = "http://www.jabong.com/men/shoes/men-loafers/?source=home-leftnav";
        String url2 = "http://www.jabong.com/fastrack-9915Pp36J-Black-Pink-Analog-Watch-198499.html";
        DesiredCapabilities caps = new DesiredCapabilities();
        caps.setCapability(PhantomJSDriverService.PHANTOMJS_EXECUTABLE_PATH_PROPERTY, "C://Users//jhamb//Desktop//phantomjs-1.9.0-windows//phantomjs.exe");
        WebDriver driver = new PhantomJSDriver(caps);
        driver.get(url1);
        String hml1 = driver.getPageSource();
        driver.get(url2);
        String hml2 = driver.getPageSource();
        driver.close();
        //System.out.println(hml1);
        //System.out.println(hml2);
           Document doc1 = Jsoup.parse(hml1);
           Document doc2 = Jsoup.parse(hml2);
           // Some operations using these DOM tree, just like , comparing Templates of two URLS
    }
} 
```

*开始过程之前的快照，*

![在此处输入图像描述](https://i.stack.imgur.com/Zfmjc.png)

*完成该过程后的快照，当它无故等待时，*

![在此处输入图像描述](https://i.stack.imgur.com/wESRc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T13:49:05.663

你需要使用

```
driver.quit(); 
```

代替

```
driver.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T05:45:03.260

我怀疑驱动程序正在创建一个线程并且它没有退出。尝试在 main 末尾添加 System.exit ，看看它是否解决了您的问题。

# macos - 在运行时更改 OSX 通知中心图标

> ID：15852688
> 
> 赞同：4
> 
> 时间：2013-04-06T15:28:07.737
> 
> 标签：macos, cocoa, nsnotificationcenter, nsusernotification

（现在）是否有官方支持的方式来在我的应用程序运行时更改 OSX 通知中心的 NSUserNotifications 图标？我在网上搜索，但答案并不是真的“最近”，所以我只是想仔细检查一下。

我想在它的标题/名称旁边显示当前正在播放的 Spotify 曲目的艺术品

到目前为止我尝试过的真的很丑：

1.  暂时用[IconFamily](https://stackoverflow.com/a/12315845/1595285)生成的 .icns 文件替换我的应用程序的 CFBundleIconFile（我知道我不应该修改包内的任何东西，但我不打算将应用程序放到 App Store）

2.  重新启动通知中心以“忘记”它最终缓存的图标

    NSRunningApplication* notificationCenter = [NSRunningApplication runningApplicationsWithBundleIdentifier:@"com.apple.notificationcenterui"]; [通知中心终止]；

    （我知道我真的不应该这样做）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-24T18:23:40.537

如果您**不**打算将您的应用程序提交到 App Store，那么 10.9 中有一个私有 API 可以执行 iTunes 所做的操作：

```
NSUserNotification *notification = [NSUserNotification new];
[notification setValue:anImage forKey:@"_identityImage"]; 
```

![在此处输入图像描述](https://i.stack.imgur.com/VqDk7.png)

# mysql - 在 Inno Setup 中安装 MySQL 服务

> ID：15852692
> 
> 赞同：0
> 
> 时间：2013-04-06T15:28:53.223
> 
> 标签：mysql, windows-services, inno-setup

我想在安装后安装 MySQL 服务`Inno Setup`。[这里](https://stackoverflow.com/questions/15204587/how-to-install-a-windows-service-with-inno-setup "这里")已经有类似的问题，但没有适合我的解决方案。

如果我`sc create`在解决方案中这样使用，那么在安装命令 promt 后只会弹出，但什么也不做。

我尝试根据某些页面修改命令，它在 cmd 中效果很好：

```
sc create "MySQLSW" binpath= "\"C:\Program Files (x86)\Drevarska spolecnost\MySQL Server 5.6\bin\mysqld\" --defaults-file=\"C:\Program Files (x86)\Drevarska spolecnost\my.ini\" MySQLSW" DisplayName= "MySQLSW" start= "auto" 
```

对于 Inno Setup 它需要双引号，所以我尝试了这个和它的几个变体

```
[Run] 
Filename: "{cmd}"; Parameters: "sc create ""MySQLSW"" binpath= ""\""{app}\MySQL Server 5.6\bin\mysqld\"" --defaults-file=\""{app}\my.ini\"" MySQLSW"" DisplayName= ""MySQLSW"" start= ""auto"""; 
```

但是 cmd 不会执行任何操作。问题可能出在那个反斜杠上，但我不知道正确的语法。

我也尝试从[这里](https://github.com/pgina/pgina/blob/master/Installer/scripts/services.iss "这里")添加 API并使用以下代码，但也一定有问题，因为它只是通过安装，但不会创建服务。

```
procedure CurStepChanged(CurStep: TSetupStep);
begin
if CurStep = ssPostInstall then
  begin
    if IsServiceInstalled('MySQLSW') = false then begin
      if InstallService(ExpandConstant('{app}\MySQL Server 5.6\bin\mysqld.exe'),ExpandConstant('--defaults-file="{app}\my.ini"'),'MySQLSW','Needed for mysql database',SERVICE_WIN32_OWN_PROCESS,SERVICE_AUTO_START) = true then begin
        StartService('MySQLSW');
      end
    end
    else if IsServiceRunning('MySQLSW') then
        MsgBox('MySQLSW is running',mbInformation, MB_OK);
  end;
end; 
```

我在这方面还不是很熟练，但我敢肯定，某处会有一些错位的报价，但我找不到。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:05:31.987

我至少发现了一个奇怪的地方。

[由https://github.com/pgina/pgina/blob/master/Installer/scripts/services.iss](https://github.com/pgina/pgina/blob/master/Installer/scripts/services.iss)定义的 InstallService ：

```
function InstallService(FileName, ServiceName, DisplayName, Description : string;ServiceType,StartType :cardinal) : boolean; 
```

你的来电

```
InstallService(ExpandConstant('{app}\MySQL Server 5.6\bin\mysqld.exe'),ExpandConstant('--defaults-file="{app}\my.ini"'),'MySQLSW','Needed for mysql database',SERVICE_WIN32_OWN_PROCESS,SERVICE_AUTO_START) 
```

您确定 ServiceName 可能包含此类内容吗？

FileName - ExpandConstant('{app}\MySQL Server 5.6\bin\mysqld.exe')
**ServiceName - ExpandConstant('--defaults-file="{app}\my.ini"')**
DisplayName - 'MySQLSW'
描述 - '需要 mysql 数据库的
ServiceType - SERVICE_WIN32_OWN_PROCESS
StartType - SERVICE_AUTO_START

试试这个

```
InstallService(ExpandConstant('"{app}\MySQL Server 5.6\bin\mysqld.exe"') + ExpandConstant(' --defaults-file="{app}\my.ini" MySQLSW'), 'MySQLSW' ,'MySQLSW','Needed for mysql database',SERVICE_WIN32_OWN_PROCESS,SERVICE_AUTO_START) 
```

# javascript - 在nodejs中导入MySQL数据库进行集成测试的最简单方法

> ID：15852697
> 
> 赞同：2
> 
> 时间：2013-04-06T15:29:20.150
> 
> 标签：javascript, mysql, node.js, orm

我有一个使用 nodejs 构建的 Web 应用程序，我想对我的 API 进行一些集成测试，这将涉及访问实时数据库。

在运行我的测试之前，是否有任何简单的方法可以加载和执行 SQL 转储文件以预填充数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:43:50.437

您可以在需要时对您的 sql 查询进行分组，以便在任何拆卸或拆卸事件中恢复您的数据库。

在运行需要干净的“数据结构”的测试之前，您可能想要使用任何类型的标志

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T17:42:29.397

要加载转储，请在终端中：

```
mysql -u youruser -p yourdatabasename < /path/to/your/dump_file.sql 
```

输入密码。

如果要创建转储，请在终端中：

```
mysqldump -u youruser -p yourdatabasename > /path/to/your/dump_file.sql 
```

# java - JPA：如何将 PK 设置为 MAX(PK) + 1

> ID：15852714
> 
> 赞同：0
> 
> 时间：2013-04-06T15:31:39.720
> 
> 标签：java, jpa, jdbc, insert

**场景：**我遇到了一些在事务中混合 JPA 和 JDBC 的代码。JDBC 正在插入一个基本上是空白行的表，将主键设置`(SELECT MAX(PK) + 1)`为`middleName`临时时间戳。然后该方法从同一个表中选择`max(PK)`+那个临时时间戳来检查是否存在冲突。如果成功，它会取消`middleName`和更新。该方法返回新创建的主键。

**问题：** 有没有更好的方法将实体插入数据库，将 PK 设置为`max(pk) + 1`并获得对新创建的 PK 的访问权限（最好使用 JPA）？

**环境：** 使用 EclipseLink，需要同时支持多个版本的 Oracle 和 MS SqlServer 数据库。

**奖励背景：**我问这个问题的原因是因为我`java.sql.BatchUpdateException`在运行集成测试时将此方法作为链的一部分调用时遇到了。链的上半部分使用 JPA`EntityManager`来持久化一些对象。

**有问题的方法**

```
@Override
@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
public int generateStudentIdKey() {
    final long now = System.currentTimeMillis();
    int id = 0;

    try {

        try (final Connection connection = dataSource.getConnection()) {

            if (connection.getAutoCommit()) {
                connection.setAutoCommit(false);
            }

            try (final Statement statement = connection.createStatement()) {
                // insert a row into the generator table
                statement.executeUpdate(
                    "insert into student_demo (student_id, middle_name) " + 
                    "select (max(student_id) + 1) as student_id, '" + now + 
                        "' as middle_name from student_demo");
                try (final ResultSet rs = statement.executeQuery(
                    "select max(student_id) as student_id " + 
                    "from student_demo where middle_name = '" + now + "'")) {

                        if (rs.next()) {
                            id = rs.getInt(1);
                        }
                }

                if (id == 0) {
                    connection.rollback();
                    throw new RuntimeException("Key was not generated");
                }

                statement.execute("update student_demo set middle_name = null " + 
                                  "where student_id = " + id);

            } catch (SQLException statementException) {
                connection.rollback();
                throw statementException;
            }
        }
    } catch (SQLException exception) {
        throw new RuntimeException(
           "Exception thrown while trying to generate new student_ID", exception);
    }

    return id;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T20:02:12.710

首先：回答这个问题很痛苦。但我知道，有时你必须与魔鬼打交道:(

所以从技术上讲，它不是 JPA，但如果你使用 Hibernate 作为 JPA-Provider，你可以使用

```
@org.hibernate.annotations.GenericGenerator(
    name = “incrementGenerator”,
    strategy = “org.hibernate.id.IncrementGenerator”)
@GeneratedValue(generator="incrementGenerator")
private Long primaryKey; 
```

Hibernate 解决方案是“线程安全的”，但不是“集群安全的”，即如果您在多个主机上运行您的应用程序，这可能会失败。您可以捕获适当的异常并重试。

~~如果你坚持你的解决方案：关闭`ResultSet`,`Statement`和`Connection`.~~ *抱歉，最初没有抓住 try-with-resources。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T13:06:50.383

JDBC 代码是病态的，没有任何意义，并且无法在多用户环境中工作。

我强烈建议修复代码以使用序列对象或序列表。

在 JPA 中，您可以只使用排序。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Sequencing](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Sequencing)

如果您真的想进行自己的排序，您可以自己分配 Id，使用 PrePersist 分配您自己的 id，或者在 EclipseLink 中实现您自己的 Sequence 子类来满足您的任何需求。您将需要使用 SessionCustomizer 注册此序列对象。

见， [http://wiki.eclipse.org/EclipseLink/Examples/JPA/CustomSequencing](http://wiki.eclipse.org/EclipseLink/Examples/JPA/CustomSequencing)

# java - 在不重新启动应用程序的情况下修改 Spring 消息文本？

> ID：15852716
> 
> 赞同：2
> 
> 时间：2013-04-06T15:31:51.363
> 
> 标签：java, eclipse, spring, messages

我正在做一个 Spring Web 应用程序。我使用 Spring 3.1 和 Eclipse。我通过 Eclipse 中的 Jetty 运行应用程序。

我有许多包含如下文本的 JSP 页面：

```
<spring:message code="label.subject"/> 
```

这种类型的文本来自 Spring 上下文中定义的名为 messages_en.properties 的文件：

```
<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource"> 
<property name="basenames">
<list>
<value>messages</value>
</list>
</property>
</bean> 
```

我需要不断修改messages_en.properties 中的文本。但是，如果不重新启动 Jetty，新文本不会出现在应用程序中，这对我来说非常不方便。

如何在不重新启动 Jetty 的情况下修改 Spring 消息文本？

谢谢你的帮助！

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:58:22.847

答案在[ResourceBundleMessageSource 的文档本身](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/context/support/ResourceBundleMessageSource.html)：使用`ReloadableResourceBundleMessageSource`。

```
<bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource"> 
  <property name="basenames">
    <list>
      <value>messages</value>
    </list>
  </property>
  <property name="cacheSeconds" value="1"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T15:36:17.970

您可以通过多种方式做到这一点。您可以使用文件监视器监视文件的更改并以编程方式重新加载资源。你可以看看这个：[http ://docs.oracle.com/javase/tutorial/essential/io/notification.html](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)

基本上，这个想法是在启动您的应用程序时在您的资源上注册一个文件监视器，然后当您更改它时，只需重新初始化您的资源。

# ajax - 将 DOM 对象传递给 oncomplete 事件的处理程序？

> ID：15852732
> 
> 赞同：3
> 
> 时间：2013-04-06T15:34:22.403
> 
> 标签：ajax, jquery, primefaces

如何将 DOM 对象（输入）传递给 oncomplete 事件的处理程序，以便我可以操作它的父级？

JSF 代码：

```
<p:datatable>
...
<p:column>

<h:inputText id="my_field" value="#{bean.my_field}">
    <p:ajax oncomplete="handle_oncomplete( $(this) )" listener="#{bean.handle_change}" />
</h:inputText>

</p:column>
...
</p:datatable> 
```

JS代码：

```
//NOT WORKING
function handle_oncomplete(my_param) {
  _parent = my_param.parent();                 
  _parent.css( "background", "#123456");
} 
```

我使用 my_param.attr('source') 来访问传递的 DOM 对象：

```
//WORKING
function handle_oncomplete(my_param) {
  _parent = $(my_param.attr('source')).parent();                 
  _parent.css( "background", "#123456");
} 
```

还有其他方法吗？

**编辑：** console.log(my_param.parent()) 输出

![在此处输入图像描述](https://i.stack.imgur.com/AgUUF.png)

**编辑：**添加代码以重现问题

```
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui"
xmlns:ui="http://java.sun.com/jsf/facelets">
<f:view contentType="text/html" locale="fr" encoding="UTF-8">
<h:head>
</h:head>
<h:body>
    <h:form id="dvForm">
        <div id="my_id" style="padding: 50px;">
            <h:inputText id="my_input">
                <p:ajax update="" oncomplete="complete_handler($(this) )"
                    listener="#{bean.handle_change}" />
            </h:inputText>
        </div>
    </h:form>
    <h:outputScript library="primefaces" name="jquery/jquery.js" />

    <script type="text/javascript">
        function complete_handler(my_param) {
             my_obj = my_param.attr('source');
             _parent = my_obj.parent();                 
             _parent.css( "background-color", "#123456");
        }
    </script>
</h:body> 
```

**编辑：**生成的 html 代码

```
<html xmlns="http://www.w3.org/1999/xhtml"><head><link type="text/css" rel="stylesheet"
href="/myproject/javax.faces.resource/theme.css.xhtml?ln=primefaces-aristo" /><script 
type="text/javascript" 
src="/myproject/javax.faces.resource/jquery/jquery.js.xhtml;jsessionid=5DDDEBBC02044818081D23A267940E72?ln=primefaces">
</script><script
type="text/javascript"
src="/myproject/javax.faces.resource/primefaces.js.xhtml;jsessionid=5DDDEBBC02044818081D23A267940E72?ln=primefaces">
</script></head><body>
<form id="dvForm" name="dvForm" method="post" 
action="/myproject/test/t1.xhtml;jsessionid=5DDDEBBC02044818081D23A267940E72"
enctype="application/x-www-form-urlencoded">
<input type="hidden" name="dvForm" value="dvForm" />
<div id="my_id" style="padding: 50px;"><input id="dvForm:my_input" type="text" 
name="dvForm:my_input"            onchange="PrimeFaces.ab({source:this,event:'valueChange',process:'dvForm:my_input',oncomplete:function(xhr,status,args){complete_handler($(this) );}},
arguments[1]);" /></div><input type="hidden" name="javax.faces.ViewState" 
id="javax.faces.ViewState" value="5837380100056002382:-3836335094805954101" autocomplete="off" />
</form>
<script type="text/javascript">
function complete_handler(my_input) {
    my_obj = my_input.attr('source');
    $(my_obj).parent().css('background-color', "#123456");
}
</script></body>
</html> 
```

# heroku - heroku 迁移问题

> ID：15852733
> 
> 赞同：-1
> 
> 时间：2013-04-06T15:34:53.763
> 
> 标签：heroku, migration

在我运行 heroku run db:migrate 之后，我得到了这个错误。. 该应用程序在开发中运行良好。我也在这个网站上做了一些研究，并尝试了几种解决方案，似乎不起作用。有人可以帮我弄清楚如何解决这个问题吗？

```
==  CreatePins: migrating =====================================================
-- create_table(:pins)
NOTICE:  CREATE TABLE will create implicit sequence "pins_id_seq1" for serial column "pins.id"
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  relation "pins" already exists
: CREATE TABLE "pins" ("id" serial primary key, "description" character varying(255), "created_at" timestamp N
OT NULL, "updated_at" timestamp NOT NULL) /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.13/lib/active_re
cord/connection_adapters/postgresql_adapter.rb:650:in `exec' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:27:29.897

所以这告诉你`pins`已经存在。可能是您创建`pins`了两个迁移，或者您设法在 Rails 不知道/记住它正在运行迁移的情况下创建了一个表。我发现如果您使用`heroku db:push`推送单个表（在这种情况下推`pins`送到 Heroku 但不是其中的内容），您可以进入这种状态，`schema_migrations`因此当您尝试运行迁移时，表存在。

如果它是新的并且您在 pin 中没有任何数据，您可以使用 psql、pgadmin 工具等来删除 pin 表，重新运行迁移并让 Rails 执行迁移并存储它已经完成的事实（它存储schema_migrations 表中迁移的标识）

# java - 如何重新加载保存先前状态的活动？

> ID：15852739
> 
> 赞同：0
> 
> 时间：2013-04-06T15:36:21.447
> 
> 标签：java, android, sqlite

我有一个游戏活动并使用 sqlite 数据库填充一些按钮，随机不重复，当游戏完成时，我会弹出一个带有 OK 按钮的警报对话框和一些信息。现在，当我按下 OK 时，我需要关闭该弹出窗口，并在该游戏活动中将一些其他数据重新加载到我的按钮，而无需重复。这我需要发生两次。我在我的其他游戏中执行此操作，但该弹出窗口没有“确定”按钮，它弹出 3 秒并使用处理程序关闭，并且我的活动重新加载新数据而不重复，这就像一个魅力。在这个游戏中，只有确定按钮是有区别的，它不起作用。我需要那个确定按钮。我有两个问题。

1.  我成功地重新加载了我的活动，但重复了，这告诉我我的活动是从头开始加载的。
2.  当活动第二次加载时，当我按下后退按钮时，我可以看到以前的游戏活动，这再次告诉我我有一个活动加载了两次。我每次只需要一次新数据。此外，我的计数器不起作用，因为在第二次加载后，我得到了第 3 次、第 4 次等等。

这是我的游戏和弹出活动：

```
public class ToploHladno extends Activity implements View.OnClickListener{

    Button b1, b2, b3, b4, b5, b6, b7, b8, b9, b10, bIzlaz, bDalje;
    String mButtonText1, mButtonText2, mButtonText3, mButtonText4, mButtonText5, mButtonText6,
    mButtonText7, mButtonText8, mButtonText9, mButtonText10, opis, odgovorNormalized;
    MediaPlayer buttonClicks, buttonFinal, buttonBack;
    public boolean music;
    final Context context = this;
    Editable ukucanRezultat;
    String tacanRezultat, ukucanRezultatVelikaSlova;
    int brojPoena;
    int counter = 0;

    LinkedList<Long> mAnsweredQuestions = new LinkedList<Long>();

    private String generateWhereClause(){
        StringBuilder result = new StringBuilder();
        for (Long l : mAnsweredQuestions){
            result.append(" AND _ID <> " + l);
        }
        return result.toString();
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.game);

        addListenerOnButton();

        nextQuestion();
    }

    private void addListenerOnButton() {

        b1 = (Button) findViewById(R.id.button1);
        b2 = (Button) findViewById(R.id.button2);
        b3 = (Button) findViewById(R.id.button3);
        b4 = (Button) findViewById(R.id.button4);
        bIzlaz = (Button) findViewById(R.id.bIzlaz);
        bDalje = (Button) findViewById(R.id.bDalje);

    }

    public void nextQuestion() {

        counter++;

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{ 

            mDbHelper.open();

            Cursor c = mDbHelper.getTestData(generateWhereClause());

            mAnsweredQuestions.add(c.getLong(0));

            mButtonText1 = c.getString(2);
            mButtonText2 = c.getString(3);
            mButtonText3 = c.getString(4);
            mButtonText4 = c.getString(5);

            b1.setOnClickListener(this);
            b2.setOnClickListener(this);
            b3.setOnClickListener(this);
            b4.setOnClickListener(this);

            if(counter < 3){

                b1.setText("30 poena");
                b2.setText("25 poena");
                b3.setText("22 poena");
                b4.setText("20 poena");

            }else{
                finish();
            }

        }

            finally{ 
                mDbHelper.close();
            }

    } 
```

弹出窗口：

```
public class Popup_opis extends Activity implements OnClickListener{

    TextView tvOpis;
    int brojPoenaPrimljeno;
    Button OK;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.popup_opis);

        initVariables();

    }

    private void initVariables() {

        OK = (Button) findViewById(R.id.bOK);
        tvOpis = (TextView) findViewById(R.id.tvOpis);

    OK.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            finish();
            Intent intent = new Intent(Popup_opis.this, ToploHladno.class);
            //intent.putExtra("myMethod", "nextQuestion"); //I tried also this
            startActivity(intent);

        }
    });
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:46:28.743

如果我理解正确，您`ToploHladno Activity`将从`Popup_opis Activity`使用`Intent`. 如果`ToploHladno Activity`还没有完成，我认为没有完成，那么就不需要`Intent`. 您可以`invalidate()`在调用它们之后调用`Views`您想要重新填充的对象，或者您需要对它们进行任何更改`onResume()``setText()``Views`

```
@Override
public void onResume()   
{
    // change your Buttons however you need in here then say you have btn1
    btn1.invalidate();
} 
```

您的第一个`Activity`尚未完成，因此您不需要甚至可能不想以`Intent`. 您将在关闭后返回它，`Dialog Activity`并且`onResume()`会被调用，以便您可以在那里做您需要的事情。这将使您无法`Layout`通过不创建 . 的新实例来重新绘制整体`Activity`。让我知道这是否适合您的需要

[无效](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)

*`startActivityForResult()`例子：*

```
Intent intent = new Intent(ToploHladno .this, Popup_opis .class);
intent.putExtra("counter", counter);
startActivityForResult( intent, 0 );  //second param is a request code. You will need this later 
```

然后在弹出活动中

```
public class Popup_opis extends Activity implements OnClickListener{

TextView tvOpis;
int brojPoenaPrimljeno;
Button OK;
int counter;

 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.popup_opis);

        //Get intent
        Intent recIntent = getIntent();
         counter = recIntent.getIntExtra("counter");   //get counter variable from previous activity

OK.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
       counter++;

        Intent intent = new Intent(Popup_opis.this, ToploHladno.class);
        intent.putExtra("counter", counter); //SEND BACK COUNTER
        setResult(RESULT_OK, intent);  // send result
finish(); 
```

然后在你之前的活动中

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
// would use REQUEST CODE sent earlier if more than one activity sends back intents here
    if (resultCode == RESULT_OK)
    {
        counter = data.getInteExtra("counter", 0);  // get updated counter variable
    }
} 
```

[更多关于 Docs 中的 startActivityForResult](http://developer.android.com/reference/android/app/Activity.html#setResult%28int%29)

# jquery - 在 1 之后为 100 个 div 设置动画

> ID：15852746
> 
> 赞同：0
> 
> 时间：2013-04-06T15:36:51.057
> 
> 标签：jquery, loops

我有 100 个 div 填充整个背景，div 的不透明度设置为 1.0 将动画为 0.0，然后它将显示其背面的内容..它将动画第一个 div，然后是第二个 div，然后是第三个等等在..

```
<style>
 body{background:url(background.jpg)}
 #grids{ width:100%; height:100%}
 #grids div{width:10%; height:10%;opacity:1.0}
</style>
<body>
 <div id="grids">
  <div></div>
  <div></div>
  <div></div>
  <!-- *100 divs* -->
 </div> 
```

我做的 jquery 是错误的，但我会显示..

```
$(function(){
 var i=0;
 while(i <= 99){
  $("#grids div").eq(i).animate({
   "opacity" : "0.0"
  },500,"linear", function(){i++});
 }
}); 
```

请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:44:27.893

您可以通过多种方式做到这一点。其中之一是：

```
animateDiv = function(divs) {
  var div = divs.shift();
  div.animate({opacity: 0}, 500, 'linear', function() {
    animateDiv(divs);
  });
};

divs = [];

$("div").each( function(i, element) {
   divs.push($(element));
});

animateDiv(divs); 
```

jsbin 演示[在这里](http://jsbin.com/iguvec/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:40:12.893

问题是循环在调用回调之前运行，因此动画在用户脚本、循环完成之前不会开始，因此该`i++`部分永远不会被调用，因此您创建了一个无限循环。

你可以做的是递归调用一个函数：

```
$(function(){
 var i=0;
 (function doOneAnimation(){
    $("#grids div").eq(i).animate({
      "opacity" : "0.0"
    },500,"linear", function(){
      if (i++<99) doOneAnimation();
    });
 })();
}); 
```

[演示](http://jsbin.com/iniqoy/1/edit)（点击“在 JS 上运行”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:40:37.570

```
$divs = $("#grid div");

var current = 0;

function animDivs()
{    $div = $divs.eq(current++);
     if($div.length) $div.animate({opacity:0},500,animDivs);
}

animDivs(); 
```

# c - \033 在 unix 中提示

> ID：15852749
> 
> 赞同：0
> 
> 时间：2013-04-06T15:37:28.257
> 
> 标签：c, unix, signals, terminal-emulator

我编写了一个从缓冲区打印一行的信号处理程序，它首先删除前一个提示，打印一行并在​​屏幕末尾再次打印提示。这是我的处理程序。

```
void print(int param)
{
  int c;
  signal(SIGALRM, print);
  printf("\b\b\b\b\b\b\b\b\b\b\033[0K");
  print_line();
  printf("\033[7m--HEY--\033[0m");
} 
```

这个处理程序正在做我想做的一切，除了我在屏幕末尾看不到提示。我不明白为什么我不能看到提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:39:33.650

标准输出通常是行缓冲的。以字符结尾`\n`，或者像这样显式刷新：

```
fflush(stdout); 
```

# python - 是否有适用于 Python 3 的 OAuth 库？

> ID：15852750
> 
> 赞同：12
> 
> 时间：2013-04-06T15:37:31.070
> 
> 标签：python, oauth, python-3.x, oauth-2.0

Python 3 最新的 Oauth 形式是什么？

我正在尝试使用我的经纪人的 API 创建一个股票筛选器，该 API 使用 Oauth。我发现的大多数信息都已过时或相互矛盾。我已经看到引用了以下模块：

Oauth - 似乎是原来的，现在已经过时了。我收到“'模块'对象没有属性'消费者'”的错误

Oauth2 - 较新的版本，显然也过时了？网上引用最多的一篇。pip 中的故障/无法弄清楚如何安装它。

Oauthlib - IIRC，声称是 Oauth 和 Oauth2 的新替代品

Rauth.OAuth2Service - 也可能替代 Oauth 和 Oauth2？

要求 - ？

Oauth_hook - ?

pyoauth2 - 我收到一个关于在 pyoauth2 的 init 中没有名为“client”的模块的错误。

它们似乎都没有按预期工作，我感觉这是由于 Oauth 3 支持不足。您是否让 OAuth 在 Python 3 中工作？如果是这样，你是怎么做到的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T12:11:47.980

看起来 Requets_oauthlib 有效。这是我在 Python 3 中使用的代码。我发布它是因为我发现的大多数示例代码都使用了我无法使用的格式。

```
from requests_oauthlib import OAuth1    

client_key = ''
client_secret = ''
resource_owner_key = ''
resource_owner_secret = ''

def query(queryurl):
        headeroauth = OAuth1(client_key, client_secret, resource_owner_key,
        resource_owner_secret, signature_type = 'auth_header')

        return requests.get(queryurl, auth = headeroauth)

query('http://website.com') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-07T04:52:00.607

这里是 rauth 的作者：rauth 是一个客户端库，目前还没有正式支持 Python 3。

然而，我们正在努力，并且在 GitHub 上有[一个活跃的分支](https://github.com/litl/rauth/tree/python-3)（恰当地命名为“python-3”）可以工作。您可以自由使用它，但请记住，当我们稍后正式发布对它的支持时，情况可能会略有变化。话虽如此，让人们在现实世界中测试它会很棒，这样我们就可以做出改变以适应 Python 3 生态系统。

另请注意：oauthlib 不是 rauth 的替代品，也不是客户端库。它试图成为一个通用的解决方案，就像 python-oauth2 一样，但它不提供客户端，不像 python-oauth2。

# python - 在 Django 中使用额外的斜杠重定向 url 的最佳方法？

> ID：15852754
> 
> 赞同：3
> 
> 时间：2013-04-06T15:38:44.730
> 
> 标签：python, django, redirect, django-urls

在django中将“mywebsite.com///”之类的网址重定向到“mywebsite.com/”的最佳方法是什么？

我可以在 settings.py 文件中使用与此相反的设置`APPEND-SLASH`还是必须使用

`from django.views.generic.simple import redirect_to`

并在 urls.py 文件中添加一个 urlpattern？

编辑：我不想让网页与“mywebsite.com/”相同，我试图让实际的网址更改为“mywebsite.com/”。对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:53:51.470

如果您愿意，您应该在 urls.py 文件中添加一个与此 url 匹配的 url 模式，并添加斜杠。

每个模式只是一个正则表达式，所以你可以很容易地告诉它匹配任何带有额外斜杠的 url。

```
urlpatterns = patterns('django.views.generic.simple',
('^your/url/*$', 'redirect_to', {'url': '/your/url/'}),
) 
```

通过将 /* 添加到 url 模式，它将匹配 /your/url/ 后面带有任意数量的斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:57:11.467

如果您想在应用程序级别执行此操作，我会避免创建新的 urlconf 规则，特别是如果它是全局性的。

您可以制作自己的中间件来自动处理此重定向，就像 django 在通用中间件中使用 APPEND_SLASH 设置附加斜线一样，这里是参考代码：[https ://github.com/django/django/blob/master/django /middleware/common.py#L66-80](https://github.com/django/django/blob/master/django/middleware/common.py#L66-80)

此外，您可能会发现此博客文章中的解决方案很有用：http: [//gregbrown.co.nz/code/append-or-remove-slash/](http://gregbrown.co.nz/code/append-or-remove-slash/)

# python - 使用字典，练习代码

> ID：15852757
> 
> 赞同：1
> 
> 时间：2013-04-06T15:38:52.353
> 
> 标签：python, dictionary, python-3.3

我为我之前的问题道歉，因为它们含糊不清且难以回答。我对编程还很陌生，并且仍在学习这一切的来龙去脉。所以请多多包涵。现在介绍背景信息。我正在使用 python 3.3.0。我将它加载到 Eclipse IDE 中，这就是我用来编写代码和测试它的工具。

现在问题是：我正在尝试学习如何创建和使用字典。因此，我的任务是创建一个价格匹配代码，通过用户界面不仅能够在字典中搜索项目（它们是键以及与键关联的值的位置和价格。）到目前为止我创建了一个用户界面，该界面可以很好地运行而不会出现任何错误（至少在 IDE 中）当我运行并输入所有提示时，空字典没有更新，因此我无法调用早期输入的字典。

我有到目前为止我在下面编写的代码，并且想知道是否有人可以告诉我我是否正确地做事。如果有更好的方法来解决这个问题。我仍在学习，所以关于代码行话的更详细的解释会很有用。

```
print("let's Price match") 
decition = input("Are you adding to the price match list?") 
if decition == "yes": 
    pricematchlist = {"Snapple":["Tops",99]} 
    location = input("Now tell me where you shopped") 
    item = input("Now what  was the item") 
    price = input("Now how much was the item") 
    int(price) 
    pricematchlist[item]=location,price 
    print(pricematchlist) 
else:  
    pricematchlist = {"Snapple":["Tops",99]}  
    reply = input("Ok so you want to search up a previous price?") 
    if reply == "yes": 
        search = input("What was the item?")
        pricematchlist.item(search) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:35:33.727

这些是一些小的变化。对于字典：您正确使用它们。

```
print("let's Price match") 
pricemathlist = {"Snapple":["Tops", 99]} # assign it here
decition = input("Are you adding to the price match list?").lower() #"Yes"-->"yes"
if decition == "yes": 
    # pricematchlist = {"Snapple":["Tops",99]}
    # If this whole code block is called repeatedly, you don't want to reassign it
    location = input("Now tell me where you shopped") 
    item = input("Now what  was the item") 
    price = int(input("Now how much was the item"))
    # int(price) does nothing with reassigning price
    pricematchlist[item]=location,price 
    print(pricematchlist) 
else:    
    reply = input("Ok so you want to search up a previous price?").lower()
    if reply == "yes": 
        search = input("What was the item?")
        print pricematchlist[search] # easier way of accessing a value 
```

# wordpress - Wordpress 缺少缩略图

> ID：15852760
> 
> 赞同：0
> 
> 时间：2013-04-06T15:39:06.313
> 
> 标签：wordpress, thumbnails

我的 wordpress 主题有问题，刷新后缩略图丢失图像有时可以

[我的网站](http://womensupply.com/category/dress/)

[问题图片](http://www.part.lt/img/48f85755577a0f5625d2e7219d740c4b246.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:31:09.550

确保您正在使用 ctrl + f5（仅限 Windows）刷新浏览器，
可能图像来自缓存。
其次，timthumb 有时需要相对路径才能正确加载图像。
我多次遇到这个问题，错误 403 被禁止。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:43:07.673

很可能与 timthumb 有关。

你的主题使用 thumb.php

阅读这个 - [http://www.der-prinz.com/images-displaying-solving-issues-timthumb/](http://www.der-prinz.com/images-displaying-solving-issues-timthumb/) 它可能会有所帮助

还请注意 timthumb [http://markmaunder.com/2011/08/01/zero-day-vulnerability-in-many-wordpress-themes/](http://markmaunder.com/2011/08/01/zero-day-vulnerability-in-many-wordpress-themes/)请参阅执行摘要部分。

# windows-runtime - 专注于负载的 WinRT 停止控制

> ID：15852768
> 
> 赞同：0
> 
> 时间：2013-04-06T15:39:53.923
> 
> 标签：windows-runtime, winrt-xaml

当我的应用程序启动时，第一个文本框具有焦点。在台式机上运行时这并不重要，但当它在平板电脑上运行时，这意味着屏幕键盘会弹出并遮盖一半屏幕。

当应用程序首次启动时，如何防止任何具有焦点的控件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-11T22:54:12.353

在您的页面上放置一个带有较早 TabIndex 的按钮：

```
<Button
    IsHitTestVisible="False"
    Opacity="0"
    TabIndex="1" /> 
```

需要注意的几点：

*   将可见性设置为 Collapsed 不起作用，因为引擎喜欢关注第一个 Visible 控件
*   您需要`IsHitTestVisible="False"`这样用户不会意外单击它，并且它不会意外阻止点击页面上的任何其他内容。
*   另一种控件类型可以工作，但它不应该是 TextBox，因为它仍然会调出虚拟键盘。
*   从那时起，您的 TextBox 上的设置`IsTabStop="False"`不起作用，它根本无法获得焦点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T22:04:41.757

我相信除了在所有控件上将 IsTabStop 设置为 false 之外，没有其他方法可以简单地移除焦点，但解决方法可能是放置一个不可见的控件（例如，将 IsTabStop 设置为 true 和 Opacity 设置为 0 的 UserControl）在你的页面。

# c# - 当另一个应用程序进程被触发时，我需要激活我的 only_one_instance wpf 应用程序的主窗口吗？

> ID：15852769
> 
> 赞同：3
> 
> 时间：2013-04-06T15:40:01.657
> 
> 标签：c#, .net, wpf

我有一个 Dictionary WPF 应用程序，我用热键 (Alt + A) 将它链接起来，这个应用程序在其 window_activated 事件中检查剪贴板中复制的文本并立即翻译它。

现在，当用户点击热键（Alt + A）时，会创建一个新的应用程序实例，所以我决定将其限制为一个实例，我设法做到了，但问题就在这里

用户点击（Alt + A）新实例被中止但先前存在的实例正在运行但我无法激活要激活的窗口这里是我编写的代码

> ```
>  /// <summary>
>     /// Application Entry Point.
>     /// </summary>
>     [STAThread]
>     [DebuggerNonUserCode]
>     [GeneratedCode("PresentationBuildTasks", "4.0.0.0")]
>     public static void Main()
>     {
>         // Get Reference to the current Process
>         var thisProc = Process.GetCurrentProcess();
>         // Check how many total processes have the same name as the current one
>         if (Process.GetProcessesByName(thisProc.ProcessName).Length > 1)
>         {
>             // the new application instance.
>             Application.Current.Shutdown();
>             foreach (var process in Process.GetProcessesByName(thisProc.ProcessName))
>             {
>                 if(process.Id != thisProc.Id)
>                 {
>                     // here i need to activate the main window of my one instance app.
>                 }                        
>             }
>             return;
>         }
>         var app = new App();
>         app.InitializeComponent();
>         app.Run();
>     } 
> ```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:48:32.570

经过一番努力，我找到了解决方案，这是对我有用的代码

知道我在 wpf 上使用 mui 项目。

> ```
>  public static class Win32 
>     {
>     //Import the FindWindow API to find our window
>     [DllImport("User32.dll", EntryPoint = "FindWindow")]
>     private static extern IntPtr FindWindowNative(string className, string windowName);
>     //Import the SetForeground API to activate it
>     [DllImport("User32.dll", EntryPoint = "SetForegroundWindow")]
>     private static extern IntPtr SetForegroundWindowNative(IntPtr hWnd);
>     public static IntPtr FindWindow(string className, string windowName)
>     {
>         return FindWindowNative(className, windowName);
>     }
>     public static IntPtr SetForegroundWindow(IntPtr hWnd)
>     {
>         return SetForegroundWindowNative(hWnd);
>     }
> } 
> ```

```
internal class Program : Application
{
    private static void Activate(string title)
    {
        //Find the window, using the Window Title
        IntPtr hWnd = Win32.FindWindow(null, title);
        if (hWnd.ToInt32() > 0) //If found
        {
            Win32.SetForegroundWindow(hWnd); //Activate it
        }
    }

    [STAThread]
    [DebuggerNonUserCode]
    [GeneratedCode("PresentationBuildTasks", "4.0.0.0")]
    public static void Main()
    {
        // Get Reference to the current Process
        var thisProc = Process.GetCurrentProcess();
        // Check how many total processes have the same name as the current one
        if (Process.GetProcessesByName(thisProc.ProcessName).Length > 1)
        {
            Activate("active dictionary");
            Current.Shutdown();
            return;
        }
        var app = new App();
        app.InitializeComponent();
        app.Run();
    }
} 
```

# jquery - 如何添加工具提示并从中删除按钮

> ID：15852771
> 
> 赞同：0
> 
> 时间：2013-04-06T15:40:13.230
> 
> 标签：jquery, youtube-api, tooltip

是否可以将工具提示添加到缩略图中以在将鼠标悬停在缩略图上时显示完整标题？还有一种方法可以删除“单击此处”按钮并显示缩略图等吗？工作代码可以在[这里找到](http://netx.clanteam.com/test.html)

```
<script>
$(document).ready(function(){
    $("button").click(function(){
        $("body").append("<div id = 'data'><ul>.</ul></div>");
        var dataContainer = $("#data ul");
        $.ajax({
            url:'http://gdata.youtube.com/feeds/api/users/googledevelopers/uploads?max-results=50&alt=jsonc&v=2&callback=?',
            dataType: "jsonp",
            timeout: 5000,
            success: function(data){

                     $.each(data.data.items, 
                               function(i, val) {

                                 if (typeof(val.player) !== 'undefined' && typeof(val.title) !== 'undefined') {

                                    dataContainer.append('<div class="d e"><a href='+val.player["default"]+' target="_blank">'+val.title+'</a><br /><img src="'+val.thumbnail.sqDefault+'" width="120" height="90" alt="'+val.title+'"/><br />Views '+val.viewCount+'</div>');
                                 }
                         });
                    }
                });
            });
});
</script>

<body>
<h2>Youtube Most Viewed</h2>
<p>most viewed today</p>
<p><button>Click Here</button></p>

<p><script language="JavaScript">
<!--
date=Date()
document.write(date)
//-->
</script></p>

</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:46:53.680

您要更改的内容似乎很简单-无需单击此处即可自动加载，请删除此行：

```
$("button").click(function(){ 
```

和结束线*之一：*

```
}); 
```

当然，您还需要删除：

```
<p><button>Click Here</button></p> 
```

至于标题，请尝试更改此行：

```
dataContainer.append('<div class="d e"><a href='+val.player["default"]+' target="_blank">'+val.title+'</a><br /><img src="'+val.thumbnail.sqDefault+'" width="120" height="90" alt="'+val.title+'"/><br />Views '+val.viewCount+'</div>'); 
```

到这个新行：

```
dataContainer.append('<div class="d e"><a href='+val.player["default"]+' target="_blank" title="'+val.title+'">'+val.title+'</a><br /><img src="'+val.thumbnail.sqDefault+'" width="120" height="90" alt="'+val.title+'"/><br />Views '+val.viewCount+'</div>'); 
```

# html - 文本输入周围的神秘“填充”

> ID：15852772
> 
> 赞同：1
> 
> 时间：2013-04-06T15:40:22.327
> 
> 标签：html, css, css-transitions, vertical-alignment

我有一个带有文本输入的页面，就像你在[这个小提琴中看到的那样](http://fiddle.jshell.net/spryno724/YuZHg/show/light/)

[来源](http://jsfiddle.net/spryno724/YuZHg/)

```
Easier to see on JSFiddle... 
```

请注意，当您第一次访问页面时，输入是如何稍微偏离垂直中心的。现在单击文本输入并观看一组额外的控件展开。现在文本输入跳到完美的垂直中心。模糊文本输入会导致控件折叠，并且文本输入不再位于垂直中心。

**注意：**如果您在文本输入中至少输入一个字母，额外的控件将不会隐藏。

有谁知道为什么输入不会停留在垂直中心？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:57:02.237

将内联元素垂直居中的一种更可靠的方法是将其设置`line-height`为与`height`.

添加这个：

```
section.explore header {
    line-height: 100px;
} 
```

删除这个：

```
section.explore header div.input {
    display: inline-table;
} 
```

并将您`<div>`的 s 更改为`<span>`s 以便选项和搜索栏都是`inline`/`inline-block`元素。

[jsFiddle](http://jsfiddle.net/Tyriar/WXSpx/)

当然，您的转换现在已损坏，您需要使用不同的方法。

**编辑：**经过一番摆弄后，我得到了它主要工作的[jsFiddle](http://jsfiddle.net/Tyriar/2v94J/)，主要是通过删除一堆样式：P 宽度转换还不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T16:16:14.057

它似乎偏离了中心，因为您的控件的“隐藏”状态虽然不可见，但仍在 DOM 中呈现。但是，与您的“活动”状态不同，“隐藏”状态的宽度被声明为 0，导致所有元素包裹在一起。这会影响该元素的垂直高度，从而导致差异。

我明白你想要什么，但我不认为你设置 CSS 的当前方式不会让你到达那里。您当前的居中方式完全取决于`margin-top: 30px`您的`.options`班级声明。可能会更好的方法是将 the`.input`和`.options`class 都包装在一个容器类中，并在那里进行垂直居中。

这是我的意思的一个例子：http: [//fiddle.jshell.net/YuZHg/6/](http://fiddle.jshell.net/YuZHg/6/) （虽然你仍然可以看到过渡时发生的轻微包装）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:59:28.033

从外观上看，主要问题是您的选项 div 的高度正在添加到容器块并按下输入。

这个的CSS是：

```
section.explore header div.options {
-moz-transition: all .25s ease-in-out;
-ms-transition: all .25s ease-in-out;
-o-transition: all .25s ease-in-out;
-webkit-transition: all .25s ease-in-out;
transition: all .25s ease-in-out;
-moz-opacity: 0;
-ms-opacity: 0;
-o-opacity: 0;
-webkit-opacity: 0;
filter: alpha(opacity=0);
opacity: 0;
display: inline-block;
height: 0;
margin-top: 33px;
max-height: 30px;
max-width: 0px;
overflow: hidden;
position: relative;
text-align: left;
width: 0px;
} 
```

问题是你的高度，最大高度的组合。

但是，有更简单的方法可以实现您正在尝试的内容：如果您知道每个元素的高度并且不考虑响应式布局，则只需使用绝对定位相应地定位它们。

这是一篇关于垂直对齐的好文章：http: [//css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)

# user-interface - WiX Burn：MsiPackage 内部 UI 显示，但在自定义 WPF UI 后面

> ID：15852773
> 
> 赞同：1
> 
> 时间：2013-04-06T15:40:30.300
> 
> 标签：user-interface, wix, burn

我正在创建一个具有[WPF](http://en.wikipedia.org/wiki/Windows_Presentation_Foundation) [UI](http://en.wikipedia.org/wiki/User_interface)的自定义引导程序。

*   首先：将显示 WPF 用户界面。
*   第二：当我单击安装按钮时，MsiPackage 将执行，内部 UI 将显示，因为我将 DisplayInternalUI 设置为 yes

一切都很好，但它有一个问题。内部 UI 显示在自定义 WPF UI 后面。

如何将内部 UI 设置为显示在窗口顶部？

单击“安装”按钮时，我尝试最小化 WPF UI。是的，WPF UI 将最小化，几秒钟后内部 UI 也将...它也显示最小化的窗口状态。

我的`bundle.wxs`：

```
 <BootstrapperApplicationRef Id="ManagedBootstrapperApplicationHost">
        <PayloadGroupRef Id="InstallerPayload"/>
    </BootstrapperApplicationRef>

    <Chain>
        <PackageGroupRef Id="NetFx40Full"/>
        <PackageGroupRef Id="InstallerPackages"></PackageGroupRef>
    </Chain>
</Bundle>

<Fragment>
    <PayloadGroup Id="InstallerPayload">
        <Payload SourceFile="..\CustomBootstrapper\bin\release\MahApps.Metro.dll"/>
        <Payload SourceFile="..\CustomBootstrapper\bin\release\System.Windows.Interactivity.dll"/>
        <Payload SourceFile ="..\CustomBootstrapper\bin\release\CustomBootstrapper.dll"/>
        <Payload SourceFile="..\CustomBootstrapper\BootstrapperCore.config" />
        <Payload SourceFile="C:\Program Files (x86)\WiX Toolset v3.7\SDK\Microsoft.Deployment.WindowsInstaller.dll"/>
    </PayloadGroup>
</Fragment>

<Fragment>
    <PackageGroup Id="InstallerPackages">
        <!-- <MsiPackage Id="CRMInstall" 
                         Vital="yes"  
                         Name="Packages\SetupProject1.msi" 
                         SourceFile="Packages\SetupProject1.msi" 
                         DisplayInternalUI="yes"> -->
        <MsiPackage Id="CRMInstall" 
                    Vital="yes"  
                    Name="Packages\StandardSetup.msi"
                    SourceFile="..\StandardSetup\bin\Release\StandardSetup.msi"
                    DisplayInternalUI="yes">
        </MsiPackage>
    </PackageGroup>
</Fragment>
..
.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T17:02:57.097

当您调用时，请`Engine.Apply()`确保将句柄传递给`Window`正在显示的 WPF。它应该是这样的：

```
var mainWindowHandle= new WindowInteropHelper(mainWindow).EnsureHandle();
Engine.Apply(mainWindowHandle); 
```

其中 mainWindow 是从 WPF 类继承的`Window`类。

# c# - C# 中的 Internet 访问控制器

> ID：15852776
> 
> 赞同：-1
> 
> 时间：2013-04-06T15:40:38.947
> 
> 标签：c#, .net

如何禁用/启用互联网连接？只是想禁用互联网连接而已`LAN`。

我试过了，但它不工作

```
string[] connections = DisconnectWrapper.Connections();           
for (int i = 0; i < connections.Length; i++)
{
    try
    {
        DisconnectWrapper.CloseConnection(connections[i]);
    }
    catch (Exception ex)
    { }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T15:56:15.227

您可以使用[WMI](http://msdn.microsoft.com/en-us/library/aa394216)。

添加`System.Management`到您的引用并尝试此代码

```
 SelectQuery wmiQuery = new SelectQuery("SELECT * FROM Win32_NetworkAdapter WHERE NetConnectionId != NULL");
            ManagementObjectSearcher searchProcedure = new ManagementObjectSearcher(wmiQuery);
            foreach (ManagementObject item in searchProcedure.Get())
            {
                if (((string)item["NetConnectionId"]) == "Local Network Connection")
                {
                    item.InvokeMethod("Disable", null);
                }
            } 
```

还有另一篇文章：以[编程方式禁用/启用网络连接](http://blog.opennetcf.com/ncowburn/2008/06/24/HOWTODisableEnableNetworkConnectionsProgrammaticallyUnderVista.aspx)。

`WMI`您可以禁用和启用所有网络连接。

**编辑：**

```
 using (ManagementObjectSearcher searcher = new ManagementObjectSearcher(@"select * from Win32_NetworkAdapter"))
        {
            ManagementObjectCollection results = searcher.Get();
            foreach (ManagementObject obj in results)
            {
                System.Console.WriteLine("Found adapter {0} :", obj["Caption"]);
                System.Console.WriteLine("Disabling adapter ...");
                object[] param = new object[0];
                obj.InvokeMethod("Disable",param);
                System.Console.WriteLine("Done.");
            }
            Console.ReadLine();
        } 
```

请注意，某些适配器无法禁用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T17:19:13.140

您可以通过对 netsh 进行 shell 调用来完成您需要的操作。

**例子：**

```
netsh interface set interface "Target Adapter Name" enabled
netsh interface set interface "Target Adapter Name" disabled 
```

Netsh 会阻塞，所以如果你等待你生成的进程退出，你就会知道它已经完成了。它需要管理员权限，因此您的进程也需要它。Netsh 会将其退出代码设置为 0 成功或 1 失败，因此您可以在需要时检查反馈。

# c# - Excel 互操作：你能听到范围值的变化吗？

> ID：15852779
> 
> 赞同：3
> 
> 时间：2013-04-06T15:41:22.693
> 
> 标签：c#, excel, interop, range, excel-interop

是否有可能，如果可以，如何使用 MS 互操作库从 C# 中收听 Excel 范围内的更改？

我知道如何读取命名范围内的值，但不知道如何监听并自动获取更改。通过谷歌并没有找到任何解决这个问题的方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T19:09:22.663

我认为 Range 对象没有 Change 事件。您可以收听 Worksheet Change 事件，并可能进行更多检查以确定更改是否是您想要捕获的更改。

# java - Android 在表面视图上放大和缩小画布，并使用 onDraw() 绘制多个位图

> ID：15852783
> 
> 赞同：0
> 
> 时间：2013-04-06T15:42:10.273
> 
> 标签：java, android, android-canvas, scale, surfaceview

我有一个画布/表面视图，我正在绘制多个位图，以便用户能够在画布上拖动和定位任何位置。我正在寻找一种方法来创建一个放大和缩小按钮，该按钮在选择时切换画布的 50% 缩放比例。

我的应用程序使用 onDraw() 方法将多个位图绘制到画布上。

我现在有一个功能，可以在切换缩放按钮时缩放每个单独的位图，但问题是让位图在缩放后相对于彼此对齐。我目前让它们缩小了它们的结束 x/y 位置，但是通过减小 50% 的大小，曾经彼此靠近的项目在缩小时不再那样。我希望有一个解决方案可以让我一次用整个画布完成这个任务。

如果我需要分享一些代码，请告诉我。

所有绘图发生的 SurfaceView 类

`public class BuildView extends SurfaceView implements SurfaceHolder.Callback {`

然后非缩放绘图发生为`canvas.drawBitmap(myBitmap,x,y,null);`

这是我的oncreate方法，注意BuildView gameView；正在开始我的surfaceview课程；

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Set full screen view
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
    WindowManager.LayoutParams.FLAG_FULLSCREEN);
     requestWindowFeature(Window.FEATURE_NO_TITLE);

     FrameLayout Game = new FrameLayout(this);
     LinearLayout GameWidgets = new LinearLayout (this);
     gameview = new BuildView(this, null);         
     //create buttons to lay over the surfaceview
     Button AddItemButton = new Button(this);
     //Button ZoomInButton = new Button(this);
     zoomButton = new Button(this);
     TextView MyText = new TextView(this);
     AddItemButton.setWidth(250);
     AddItemButton.setText("Add Item");
     AddItemButton.setId(1);
     AddItemButton.setOnClickListener(addItemHandler);
     MyText.setText("test");
     zoomButton.setWidth(250);
     zoomButton.setText("Zoom Out");
     zoomButton.setId(2);
     zoomButton.setOnClickListener(zoomHandler);
     // adding views to the main Game framelayout view * note the view "gameview" is the surface view that everything happens on
     GameWidgets.addView(AddItemButton); 
     GameWidgets.addView(zoomButton);
     Game.addView(gameview);
     Game.addView(GameWidgets); 

    int w=getWindowManager().getDefaultDisplay().getWidth()-25;
    int h=getWindowManager().getDefaultDisplay().getHeight()-25;
    gameview.wid = w; //set width and height in view
    gameview.hei = h;
    gameview.setWidthHeight(w, h);
    setContentView(Game); //trying this out
    gameview.updateImage(0, 0); //force bg change
    Log.i("views", "Added Game View");
    //setContentView(v);
} 
```

因为这里已经要求我当前如何缩放位图，请注意我正在寻找另一种缩放整个画布的方法。这是我的 onDraw() 方法的细节，但完整的方法在项目放置方面有更多逻辑，在缩放之前，如果用户选择缩放，我会检查一个布尔标志，但我认为你不想筛选那么多代码所以我只是把相关的东西放在这里。

```
protected void onDraw(Canvas canvas) { 
  float scaleHeight = getScaled(myBitmap.getHeight());
  float scaleWidth = getScaled(myBitmap.getWidth());                        

  scaler.postTranslate(-myBitmap.getWidth() / 4, -itemBit.getHeight() / 4); // Centers image
  scaler.postScale(scaleWidth, scaleHeight);
  Log.e("onDraw", "item not placed - scaler.postTranslate being called");
  scaler.postTranslate(itemX+myBitmap.getWidth()/2, itemY+myBitmap.getHeight()/2);
  canvas.drawBitmap(myBitmap, scaler, null);
} 
```

这是我的 getScaled 函数；

```
 float getScaled(int orig) {
    //return a scaled version
    int newScale = orig /2;
        float scaled = ((float) newScale) / orig;                           
    return scaled;
} 
```

# c - scanf 的这种行为的解释是什么？

> ID：15852785
> 
> 赞同：-1
> 
> 时间：2013-04-06T15:42:47.497
> 
> 标签：c, for-loop, scanf

我有这个代码：

```
#include <stdio.h>
int main()
{
    char vc[5]={1,1,1,1,0};
    int vi[4]={0,0,0,0};

    printf("Reading characters...\n");
    for(int i = 0 ; i < 4 ; i++)
        scanf("%c",&vc[i]);

    printf("Reading numbers...\n");
    for(int i = 0 ; i < 4 ; i++)
        scanf("%d",&vi[i]);

    for(int i = 0 ; i < 4 ; i++)
    printf("%c ",vc[i]);

    printf("\n");

    for(int i = 0 ; i < 4 ; i++)
    printf("%d ",vi[i]);

    printf("\n");

    return 0;
} 
```

在打印“阅读数字”并进入下一个 for 循环之前，我只能输入 2 个字符。为什么迭代只持续 2 步？应该是4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:44:27.570

这是因为`%c`不忽略空格，并且您可能正在回车。尝试：

```
scanf(" %c",&vc[i]);
       ^ 
```

该空间使`scanf`忽略任何空白。

# database - Zend 阻止数据库连接的具体操作

> ID：15852786
> 
> 赞同：1
> 
> 时间：2013-04-06T15:42:57.407
> 
> 标签：database, zend-framework2

当我在 Zend Framework 2 中请求具体操作时，这是否可以阻止数据库连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:30:26.853

正如山姆在评论中所说；如果您不想建立与数据库的连接，那么就不要。如果您的控制器操作中没有任何使用数据库的代码，则不会有数据库连接（前提是您没有在引导方法或类似方法中做一些时髦的事情）。

[如果您以标准方式](https://stackoverflow.com/questions/15700626/how-to-connect-to-database-in-zendframework-2/15725279#15725279)构建数据库连接，那么实际连接将被延迟加载，这意味着在您尝试使用它之前不会有实际连接。

在您的评论中，您声明您认为问题是由许多数据库连接引起的。我只是想澄清一下，每个请求只会有一个数据库连接（前提是您使用数据库）。

如果您没有调用数据库的代码，那么您的 Web 服务器实际上不会连接到您的数据库。无论哪种方式，如果您每页有 150 多张图像，那么这将是一个更大的问题，并且可能是页面加载缓慢的根本原因。也许考虑分页，或者如果您不以完整尺寸显示图片，那么请避免在 HTML 中缩放它们，因为您会从您的网络服务器向您的访问者发送大量不必要的数据。例如，您可以在添加图片时在 PHP 中调整它们的大小。之后，您甚至可以考虑使用内容交付网络 (CDN)，但这是一个不同的讨论......

# java - == 和 .equals() 之间的区别？

> ID：15852790
> 
> 赞同：-1
> 
> 时间：2013-04-06T15:43:07.283
> 
> 标签：java, string

我现在正在学习Java。当我使用`==`and`.equals()`进行字符串比较时，我得到了不同的结果。但是没有编译错误。谁能解释这两种操作之间的区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T15:44:23.797

*   `s1 == s2`比较字符串*引用*；这很少是你想要的。
*   `s1.equals(s2)`比较两个*字符序列*；这几乎总是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T15:44:44.110

`==`测试参考相等。

`.equals()`测试值相等。

例子：

```
String fooString1 = new String("Java");
String fooString2 = new String("Java");

// false
fooString1 == fooString2;

// true
fooString1.equals(fooString2); 
```

笔记：

`==`处理空字符串值。

`.equals()`从一个空字符串将导致`Null Pointer Exception`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T15:47:53.713

当 == 用于 String 之间的比较时，它会检查对象的引用。但是当使用 equals 时，它实际上会检查字符串的内容。所以例如

```
 String a = new String("ab");
  String b = new String("ab");
  if(a==b) ///will return false because both objects are stored on the different locations in memory

   if(a.equals(b)) // will return true because it will check the contents of the String 
```

我希望这有帮助

# java - JSP 参数对象到字符串

> ID：15852792
> 
> 赞同：-1
> 
> 时间：2013-04-06T15:43:32.283
> 
> 标签：java, jsp

我想向 jsp taglib 中定义的函数发送一个字符串。具体来说，我想发送一个我在页面中得到的参数。即这里的第二个参数应该是一个字符串。如果我使用 ${param.username} 它会给出错误，可能是因为 ${param.username} 是一个对象而不是字符串 ${insert:insert(5,)}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:55:44.867

不能将 EL 表达式 ( `${...}`) 嵌入到另一个 EL 表达式 ( `${...}`) 中。您只需

```
${insert:insert(5, param.username)} 
```

# eclipse - 相当于 Netbeans 中 Eclipse 的“订购和导出”

> ID：15852802
> 
> 赞同：0
> 
> 时间：2013-04-06T15:44:23.317
> 
> 标签：eclipse, netbeans, classpath

我在 Ubuntu 12.10 中使用 Netbeans 7.2.1，我正在尝试更改类加载的顺序。我在同一个包中有两个同名的类，但一个在我的源代码中，另一个在 JAR 中。我的项目源中的类具有更高的优先级，我想使用它而不是 JAR 中的类。在 Eclipse 中，我可以在 Project Properties -> Java Build Path 中的“Order and export”选项卡下更改顺序。

![](https://i.stack.imgur.com/pVX3I.png)

默认情况下，Netbeans 似乎优先考虑高于项目源的 JAR 类。如何更改类加载顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:44:23.317

*注意：我在写问题时发现了答案，我希望它对有类似问题的人有所帮助。*

转到项目属性 -> 库 -> 运行并确保“编译源”在“编译源的类路径”上方，方法是在列表中选择它并单击“上移”。

![运行时库](https://i.stack.imgur.com/opyik.png)

# ios - iOS 和 Facebook 游戏集成问题（高级）

> ID：15852812
> 
> 赞同：1
> 
> 时间：2013-04-06T15:45:14.370
> 
> 标签：ios, facebook, facebook-ios-sdk

Facebook 是存储和发送对象数据的可行平台吗？

假设我有一个 iOS 游戏。想邀请我的 Facebook 朋友一起玩。Facebook 是否有能力存储我的“邀请玩”数据，以便当朋友登录 iOS 时，该数据可用？如果是这样，我可以存储任意数据，也许是字典？

Candy Crush 会这样做，但我不确定这是在 Candy Crush 的后端处理还是通过 Facebook。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:39:01.723

我认为 Candy Crush 是通过它的后端来实现的。Facebook 肯定会存储您想要的所有数据，但我没有看到来自 facebook 的任何 API 允许我们访问它。

# java - Java读取文本文件并将每一行保存为一个新的字符串数组

> ID：15852813
> 
> 赞同：0
> 
> 时间：2013-04-06T15:45:18.207
> 
> 标签：java, android, arrays, string, file

我正在尝试构建一个将读取文本文件的应用程序，然后将每一行文本存储为数组列表。

这是我的文本文件：

```
1 , Where is the white house? , Paris , Amsterdam , New York , Washington 
2 , The Sopranos Is a..? , Italian Food , Tv series , Kind of Knife , A Book
3 , The Capital City Of Brazil is? , Rio de Janeiro, Amsterdam , Brazilia , Washington
4 ,Who Invanted The Phone ?, Alexander Graham Bell, Albert Einstein , Pinokio , Snoop Doog 
```

我基本上是在尝试构建一个琐事应用程序，它将从文本文件中选择每一行，然后将选定的行拆分为字符串数组，最后在屏幕上打印一个问题和四个答案。

到目前为止，这是我的代码：

```
public class QuestionSql extends Activity {

    private String[] value;
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.highscore);
        readFile();

    }

    private void readFile() {
        // TODO Auto-generated method stub
        AssetManager manger;
        String line = null;

        try {
            manger = getAssets();
            InputStream is = manger.open("text.txt");
            InputStreamReader isr = new InputStreamReader(is);
            BufferedReader br = new BufferedReader(isr);
            while ((line = br.readLine()) != null) {
                value = line.split(",");

                //System.out.print(value);
            }
            br.close();

        } catch (IOException e1) {
            System.out.println("not good");

        }

    }

} 
```

问题是应用程序只打印文本文件的最后一行

* * *

谢谢你的答案，它真的帮助了我！到目前为止，这是我的代码：

公共类 QuestionSql 扩展 Activity {

```
private String[] value;
private List<String[]> collection;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.highscore);

    readFile();
    convertListToString()
}

  private void convertListToString() {

    value = collection.toArray(new String[collection.size()]);

  }

private void readFile() {
    // TODO Auto-generated method stub
    AssetManager manger;
    String line = null;
    collection = new ArrayList<String[]>();

    try {
        manger = getAssets();
        InputStream is = manger.open("text.txt");
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        while ((line = br.readLine()) != null) {
            value = line.split(",");
           collection.add(value);

        }
        br.close();

    } catch (IOException e1) {
        System.out.println("not good");

    }

} 
```

}

现在，我需要转换 :collection = new ArrayList(); 进入 string[] 以便我可以在我的应用程序按钮上设置文本。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:51:11.213

如果要将每一行存储到字符串数组中，则需要创建*“字符串数组结构”*

因此，最有效的选择是创建`List<String[]>`将保存您的字符串数组。

您的方法不起作用的原因是您为每一行分配了新值到相同的字符串数组（总是被重写）并且在循环之后您的字符串数组包含最后一行的值。

```
List<String[]> collection = new ArrayList<String[]>();
String[] temp;
while ((line = br.readLine()) != null) {
   temp = line.split(",");
   if (temp.length > 0) {
      collection.add(temp);
   }
} 
```

但是，如果您想创建仅包含您的值的列表（我有点困惑），您可以使用：

```
List<String> collection = new ArrayList<String>();
String[] temp;
while ((line = br.readLine()) != null) {
   temp = line.split(",");
   if (temp.length > 0) {
      for (String s: temp) {
         collection.add(s);
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:51:01.973

您可以将所有拆分行存储到`ArrayList`：

```
private ArrayList<String[]> values;
@Override
protected void onCreate(Bundle savedInstanceState) {
    values = new ArrayList<String[]>();
    super.onCreate(savedInstanceState);
    setContentView(R.layout.highscore);
    readFile();
}

private void readFile() {
    // TODO Auto-generated method stub
    AssetManager manger;
    String line = null;

    try {
        manger = getAssets();
        InputStream is = manger.open("text.txt");
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        while ((line = br.readLine()) != null) {
            values.add(line.split(","));
            //System.out.print(value);
        }
        br.close();

    } catch (IOException e1) {
        System.out.println("not good");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:07:07.920

你能试试这个

```
private void readFile() {
    // TODO Auto-generated method stub
    AssetManager manger;
    String line = null;

    try {
        manger = getAssets();
        InputStream is = manger.open("text.txt");
        InputStreamReader isr = new InputStreamReader(is);
        BufferedReader br = new BufferedReader(isr);
        while ((line = br.readLine()) != null) {
           String[] value = line.split(",");

           for(int i=0;i<value.length;i++)
               System.out.print("*************************************************"+value[i]);
        }
        br.close();

    } catch (IOException e1) {
        System.out.println("not good");

    }

} 
```

# ios - UIImageView 性能不佳（用于本地图像）

> ID：15852820
> 
> 赞同：2
> 
> 时间：2013-04-06T15:45:53.007
> 
> 标签：ios, multithreading, uiimageview

我正在开发一个带有画廊的应用程序。所有图像都在设备光盘（文档目录）上，但我无法顺利显示。

由于某些图像很大（2000px * 2000px），我将它们加载到后台线程中，缩小它们然后在主线程上显示它们。

这是我的 UIImageView 扩展：

```
@implementation UIImageView (BackgroundResize) 

- (void)localImageFromPath: (NSString *) path scaledTo: (CGSize) size {
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0);
    dispatch_async(queue, ^{
        //Load image
        NSData * imgData = [[NSData alloc] initWithContentsOfFile:path];
        UIImage * original = [[[UIImage alloc]  initWithData:imgData] autorelease];
        [imgData release];
        CGSize imgSize = original.size;
        float widthScale = size.width / imgSize.width;
        float heightScale = size.height / imgSize.height;
        float scaleFactor = widthScale;
        if (heightScale < scaleFactor) {
            scaleFactor = heightScale;
        }
        UIImage * result = nil;
        //Scale if necessary
        if (scaleFactor < 1.0) {
            result = [[UIImage alloc] initWithCGImage:original.CGImage scale:1/scaleFactor orientation:original.imageOrientation];
        } else {
            result = [original retain];
        }
        NSLog(@"Image prepeared on backgroud thread, update ui image on main..");
        dispatch_async(dispatch_get_main_queue(), ^{
            NSLog(@"Begin updating image on main thread");
            self.image = result;
            [result release];
            [[NSNotificationCenter defaultCenter] postNotificationName:NTF_IMG_LOADED object:self];
            NSLog(@"Updated");
        });

    });
    dispatch_release(queue);

}
@end 
```

在控制台输出中，一切似乎都很完美，所有调试字符串都在不到 1 秒的时间内显示（对于 6 个非常大的图像），但 UI 被阻止并且图像显示延迟 10 秒。

在 iOS 上显示大型本地图像的正确方法是什么？

应用程序是为 iOS5+ 构建的..

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:50:09.803

您实际上并没有调整图像的大小。该`scale`参数`-initWithCGImage:scale:`设置图像像素与屏幕坐标点的比例；它对底层图像没有任何作用。您需要将图像实际绘制到 a`CGContext`以缩小它：

```
 //Load image
    UIImage * original = [[[UIImage alloc] initWithContentsOfFile:path] autorelease];

    CGSize imgSize = original.size;
    float widthScale = size.width / imgSize.width;
    float heightScale = size.height / imgSize.height;
    float scaleFactor = widthScale;
    if (heightScale < scaleFactor) {
        scaleFactor = heightScale;
    }

    UIImage * result = nil;
    //Scale if necessary
    if (scaleFactor < 1.0) {
        CGSize newSize = CGSizeMake(floorf(imgSize.width * scaleFactor),
                                    floorf(imgSize.height * scaleFactor));
        UIGraphicsBeginImageContextWithOptions(newSize, NO, 0);
        CGContextRef context = UIGraphicsGetCurrentContext();
        CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
        [original drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
        result = UIGraphicsGetImageFromCurrentImageContext();
        [result retain];
        UIGraphicsEndImageContext();
    } else {
        result = [original retain];
    } 
```

# c++ - 用 keyDown Glut C++ 模拟跳跃不是 100%

> ID：15852824
> 
> 赞同：0
> 
> 时间：2013-04-06T15:46:31.117
> 
> 标签：c++, glut

我正在使用`glutkeyboardfunc`and控制屏幕上的精灵`keyDown`。

例如。当我实现以下代码时，精灵成功跳起来：

```
 if(keyDown[119]){//w key = up
    sprite_y +=40.0f;
    spriteT=spriteJ;
 } 
```

在空中时，精灵使用以下代码返回：

```
 if(sprite_y>0){ gravity-=10*delta; sprite_y+=gravity; }
 else{ gravity=0; } 
```

我遇到的问题是，如果您将手指放在`w`键上，精灵会永远跳跃并继续上升。

我知道这是因为我正在使用该`keyDown`方法，所以我尝试了这个：

```
 if(keyDown[119]){//w key = up
    sprite_y +=40.0f;
    spriteT=spriteJ;
    keyDown[119]=0;//reset keyDown to keyUp
 } 
```

但我没有运气...

有没有办法可以将它限制在`keyDown`某个时间段内，或者只像按下一次一样？谢谢。

**编辑**我不太明白这个问题如何值得一票否决。你甚至读过它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:03:46.300

可以用一个变量来表示key之前的状态，然后看看有没有变化。

例如：

```
//Initialise a bool called keyWasDown to false

if (keyDown[119]){
    if (!keyWasDown){
        //Do jumping code
        keyWasDown = true;
    }
else {
    keyWasDown = false;
} 
```

# java - 更改 Restlet 发回的状态码以进行身份 验证

> ID：15852832
> 
> 赞同：0
> 
> 时间：2013-04-06T15:47:41.883
> 
> 标签：java, ajax, restlet, digest-authentication

我正在使用带有摘要式身份验证的 Restlet。效果很好。除了我想通过避免在第一次发回 401 时弹出浏览器的身份验证对话框来使其对 ajax/Javascript 更加友好。

这就是我认为可行的方法：

1.  使用文本字段获得的用户/通行证并存储在 javascript 对象中。
2.  Ajax 调用以保护资源。
3.  Reselt 发送回带有 Digest Auth 信息的非 401 代码（例如 406）。
4.  Javascript 捕获代码，将请求/用户/密码打包成哈希，发送到 restlet。

a) 上述方法可行吗？

b) 如何在 Restlet 中使用 Digest 发送不同的状态码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T20:58:57.930

是的，您必须返回非 401 响应，因为您无法更改浏览器行为，因为浏览器将始终显示弹出窗口。

另请参阅[如何防止浏览器调用基本身份验证弹出窗口并使用 Jquery 处理 401 错误？](https://stackoverflow.com/questions/9859627/how-to-prevent-browser-to-invoke-basic-auth-popup-and-handle-401-error-using-jqu)

您可以通过修改/覆盖 DigestAuthenticator 并设置不同的响应来更改响应，或者使用将检测 401 并将其切换到另一个状态的过滤器。

# php - 网站php sql上的搜索功能

> ID：15852833
> 
> 赞同：0
> 
> 时间：2013-04-06T15:47:42.230
> 
> 标签：php, mysql, search, phpmyadmin

我的网站上有一个简单的搜索框，目前仅根据满足的某些条件生成结果。

```
if(isset($_GET['action'])&&isset($_GET['searchbox'])) {
    if($_GET['searchbox']!='') {
        $result = mysql_query("SELECT * FROM `restaurants` WHERE `restaurant` LIKE '%{$_GET['searchbox']}%'");  // RESULT IS FIND EVERYTHING THAT MATCHES SEARCH FROM TABLE //
    } else {
        $result = mysql_query("SELECT * FROM `restaurants`");
    }
}

<form action="search.php" id="searchform" method="get" class="searchbox-container">
    <input type="text" id="searchbox" name="searchbox" class="searchbox" />
    <input type="submit" class="searchbox-btn" value="Search" />
    <input type="hidden" name="action" value="search" /> 
```

我想要的是搜索框从数据库中返回所有表数据的结果，而不仅仅是特定数据，例如餐厅名称。

我还希望它能够正常工作，以便如果有人搜索“sto”，则会显示“stoke”等结果，因此搜索不必完全是数据库中的内容。

如果代码错误或过时，请原谅代码，这是取自一个有点旧的大学教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T16:01:29.793

没有办法只使用 MySql 搜索数据库中的所有内容，您仍然需要选择在哪些表中搜索哪些列。您可以使用不同的查询搜索不同的数据，然后在 PHP 中加入结果或进行某种 JOIN。如果你不小心，你最终会得到一些完全低效的东西。

还有一点注意 - 这应该已经匹配了部分单词 - LIKE 子句中搜索词周围的 % 表示“此位置的任何字符”

要在您的餐厅中搜索更多字段，您可以从以下内容开始（例如，如果您有口号）：

```
$result = mysql_query("SELECT * FROM `restaurants` WHERE `restaurant` LIKE '%{$_GET['searchbox']}%' OR `slogan` LIKE '%{$_GET['searchbox']}%'"); 
```

**但是，您不应该将用户输入直接注入 SQL，这会使您容易受到攻击！**

要使用 JOIN 在其他表中搜索更多字段，您可以从以下内容开始（例如，如果您有一个 food 表）：

```
$result = mysql_query("SELECT `restaurants`.* FROM `restaurants` LEFT JOIN `food` ON `food`.`restaurant_id` = `restaurant`.`id` WHERE `restaurant` LIKE '%{$_GET['searchbox']}%' OR `food` LIKE '%{$_GET['searchbox']}%'"); 
```

如果您需要我刚刚给您的帮助，您可以查看这两页：

[http://dev.mysql.com/doc/refman/5.0/en/select.html](http://dev.mysql.com/doc/refman/5.0/en/select.html)

[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

# java - Java中的同步类（即Monitor）

> ID：15852837
> 
> 赞同：0
> 
> 时间：2013-04-06T15:48:18.860
> 
> 标签：java, synchronization

java中是否有任何与Monitor相同的同步CLASS概念？我不是说同步方法！我对 Monitor 类的了解是，当线程运行此类实例的任何方法时，其他线程可能无法访问该对象的任何方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:50:42.777

我能想到的唯一方法就是做每一种方法`synchronized`。没有捷径可以为整个班级自动实现这一目标。

# c# - 使用 JSON.NET 在 C# 中解析 Json

> ID：15852839
> 
> 赞同：2
> 
> 时间：2013-04-06T15:48:21.973
> 
> 标签：c#, json, json.net, deserialization

我正在用 c# 开发一个应用程序，它使用 Backpack.tf 的 api 在名为 TF2 的游戏中获取玩家背包的价值。

目前的代码是：

```
 (MAIN CLASS)
    JsonConvert.DeserializeObject<Json1>(json);
    (END OF MAIN CLASS)

public class Json1 {
    public static List<Json2> response { get; set; }
}
public class Json2
{
    public static int success { get; set; }
    public static int current_time { get; set; }
    public static IEnumerable<Json4> players { get; set; }
}
public class Json4 {
    public static int steamid { get; set; }
    public static int success { get; set; }
    public static double backpack_value { get; set; }
    public static string name { get; set; }
} 
```

我已经从主类等中删除了所有其他废话，但我只想说是的，我已经将 json 代码放入准备反序列化的 json 字符串中（使用 Console.Writeline 对其进行了测试）

问题是。每当我使用 Json4.name 之类的东西（写入控制台时）它总是返回 0。

对不起，如果我犯了一个愚蠢的错误，但我想我已经尝试过删除静态、更改变量类型等，但我仍然无法让它工作。请注意，这是我第一次尝试反序列化 Json 代码，我自己在底部编写了类，因为某些原因[http://json2csharp.com/](http://json2csharp.com/)不起作用。这是我试图反序列化的Json：

```
{
   "response":{
      "success":1,
      "current_time":1365261392,
      "players":{
         "0":{
            "steamid":"76561198045802942",
            "success":1,
            "backpack_value":12893.93,
            "backpack_update":1365261284,
            "name":"Brad Pitt",
            "stats_tf_reputation":2257,
            "stats_tf_supporter":1,
            "notifications":0
         },
         "1":{
            "steamid":"76561197960435530",
            "success":1,
            "backpack_value":4544.56,
            "backpack_update":1365254794,
            "name":"Robin",
            "notifications":0
         }
      }
   }
} 
```

（格式有点乱。还请原谅一些拼写错误:)）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T16:13:08.120

您的代码有几个问题：

a）您的所有字段都是静态的。去除静电；您需要他们成为实例成员。

b) 中的响应属性`Json1`应该只是一个实例，而不是列表。

c) Players 需要是字典（或自定义类型），而不是 IEnumerable，因为它不是 JSON 中的数组。

d) StreamId 有非常大的数字，不适合 int；将其更改为长（或字符串）。

```
public class Json1
{
    public Json2 response { get; set; }
}

public class Json2
{
    public int success { get; set; }
    public int current_time { get; set; }
    public IDictionary<int, Json4> players { get; set; }
}

public class Json4
{
    public long steamid { get; set; }
    public int success { get; set; }
    public double backpack_value { get; set; }
    public string name { get; set; }
} 
```

# c - 如何在 OpenSSL 中设置连接超时和操作超时

> ID：15852840
> 
> 赞同：9
> 
> 时间：2013-04-06T15:48:26.860
> 
> 标签：c, openssl, cross-compiling

libcurl 有这样的[超时选项](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)：

```
CURLOPT_CONNECTTIMEOUT - maximum time in seconds that you allow the connection to the server to take.
CURLOPT_TIMEOUT - maximum time in seconds that you allow the libcurl transfer operation to take. 
```

我想在 OpenSSL 中实现类似的超时机制。

下面的代码需要进行哪些更改，以便将超时值应用于 BIO_do_connect()、BIO_write() 和 BIO_read()？

我正在连接到服务器并使用 OpenSSL 提供的 BIO_write()/BIO_read() 向服务器发送/接收数据。我的代码基于[此处](http://www.ibm.com/developerworks/linux/library/l-openssl/index.html)提供的以下示例代码。

```
int main()
{
    BIO * bio;
    SSL * ssl;
    SSL_CTX * ctx;

    int p;

    char * request = "GET / HTTP/1.1\x0D\x0AHost: www.verisign.com\x0D\x0A\x43onnection: Close\x0D\x0A\x0D\x0A";
    char r[1024];

    /* Set up the library */

    ERR_load_BIO_strings();
    SSL_load_error_strings();
    OpenSSL_add_all_algorithms();

    /* Set up the SSL context */

    ctx = SSL_CTX_new(SSLv23_client_method());

    /* Load the trust store */

    if(! SSL_CTX_load_verify_locations(ctx, "TrustStore.pem", NULL))
    {
        fprintf(stderr, "Error loading trust store\n");
        ERR_print_errors_fp(stderr);
        SSL_CTX_free(ctx);
        return 0;
    }

    /* Setup the connection */

    bio = BIO_new_ssl_connect(ctx);

    /* Set the SSL_MODE_AUTO_RETRY flag */

    BIO_get_ssl(bio, & ssl);
    SSL_set_mode(ssl, SSL_MODE_AUTO_RETRY);

    /* Create and setup the connection */

    BIO_set_conn_hostname(bio, "www.verisign.com:https");

    if(BIO_do_connect(bio) <= 0)
    {
        fprintf(stderr, "Error attempting to connect\n");
        ERR_print_errors_fp(stderr);
        BIO_free_all(bio);
        SSL_CTX_free(ctx);
        return 0;
    }

    /* Check the certificate */

    if(SSL_get_verify_result(ssl) != X509_V_OK)
    {
        fprintf(stderr, "Certificate verification error: %i\n", SSL_get_verify_result(ssl));
        BIO_free_all(bio);
        SSL_CTX_free(ctx);
        return 0;
    }

    /* Send the request */

    BIO_write(bio, request, strlen(request));

    /* Read in the response */

    for(;;)
    {
        p = BIO_read(bio, r, 1023);
        if(p <= 0) break;
        r[p] = 0;
        printf("%s", r);
    }

    /* Close the connection and free the context */

    BIO_free_all(bio);
    SSL_CTX_free(ctx);
    return 0;
} 
```

我在 Ubuntu 上交叉编译 ARM（带有 CodeSourcery Lite 的 Eclipse）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T10:46:43.100

我最终做了类似以下的事情（伪代码）：

```
int nRet;
int fdSocket;
fd_set connectionfds;
struct timeval timeout;

BIO_set_nbio(pBio, 1);

nRet = BIO_do_connect(pBio);

if ((nRet <= 0) && !BIO_should_retry(pBio))
    // failed to establish connection.

if (BIO_get_fd(pBio, &fdSocket) < 0)
    // failed to get fd.

if (nRet <= 0)
{
    FD_ZERO(&connectionfds);
    FD_SET(fdSocket, &connectionfds);

    timeout.tv_usec = 0;
    timeout.tv_sec = 10;

    nRet = select(fdSocket + 1, NULL, &connectionfds, NULL, &timeout);
    if (nRet == 0)
        // timeout has occurred.
} 
```

您也可以对 BIO_read() 使用相同的方法。

您可能会发现[此链接](http://code.google.com/p/tortoisesvn/source/browse/trunk/ext/openssl/apps/ocsp.c?spec=svn23915&r=23893)很有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-27T08:03:31.570

对于连接，@jpen 给出了最好的答案。您必须将 BIO 标记为非阻塞并`select`用于确定它是否已连接和/或超时。

读音有些不同。因为 OpenSSL 可能会缓冲解密的数据（取决于使用的 TLS 密码套件），`select`所以当您尝试读取时可能会超时 - 即使数据实际上是可用的。处理读取超时的正确方法是首先检查[`SSL_pending`](https://www.openssl.org/docs/manmaster/ssl/SSL_pending.html)或[`BIO_pending`](https://www.openssl.org/docs/manmaster/crypto/BIO_pending.html). 如果挂起的函数返回零，则使用 select 设置超时。如果挂起的函数返回大于零，则只需调用`SSL_read`or`BIO_read`或任何其他读取函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T17:08:49.963

看一下`SSL_CTX_set_timeout ()`函数，它类似于 libcurl 的`CURLOPT_TIMEOUT`变量：

从[http://www.openssl.org/docs/ssl/SSL_CTX_set_timeout.html](http://www.openssl.org/docs/ssl/SSL_CTX_set_timeout.html)：

> SSL_CTX_set_timeout() 将新创建的 ctx 会话的超时设置为 t。超时值 t 必须以秒为单位。

在您的情况下，您可以在创建 ctx 对象后添加以下行：

```
SSL_CTX_set_timeout (ctx, 60); 
```

希望能帮助到你 ！

# django - django prepopulate modelform - 没有任何反应

> ID：15852841
> 
> 赞同：8
> 
> 时间：2013-04-06T15:48:28.060
> 
> 标签：django, django-forms, instance

这一定是一件非常简单的事情，但我似乎无法通过它..

我试图构建一个用户可以更新 ModelForm 的表单。首先，他插入一个用户 ID，然后我想向他展示预填充原始数据的表单，以便他只能更改他想要的字段。

在我的朋友 google、stackoverflow 和 django 文档的帮助下，我得出了这个结论：

视图.py

```
 user = User.objects.get(user_id=usr)  
 if request.method == 'POST':  
      form = TableForm(request.POST)  
      if form.is_valid():  
           #do something  
 else:  
      form = TableForm(instance=user)  
      return render_to_response('template.html',{'form':form}) 
```

表格.py

```
class TableForm(forms.ModelForm):
     pres_clinic = forms.ModelChoiceField(queryset=PresClinic.objects.all(),
        widget=SelectWithPop(), label=ugettext("Clinic presentation"),
        required=False)

     MAYBECHOICES = (
         ('', '---------'),
         (ugettext('Yes'), ugettext('Yes')),
         (ugettext('No'), ugettext('No')))

     bcg_scar = forms.ChoiceField(choices=MAYBECHOICES, label=ugettext(
            "BCG scar"), required=False)
     mantoux_register = forms.ChoiceField(choices=MAYBECHOICES,
        label=ugettext("Mantoux register"), required=False)
     date_diag = forms.DateField(widget=DateTimeWidget, label=ugettext(
         "Diagnosis date"), required=False)
     situation = forms.ModelChoiceField(queryset=Situation.objects.all(),
        widget=SelectWithPop(), label=ugettext("Patient status"),
        required=False)
     date_situation = forms.DateField(widget=DateTimeWidget, label=ugettext(
        "Date patient status"), required=False)

  class Meta:
    model = Table
    fields = ('pres_clinic', 'bcg_scar', 'mantoux_register',
            'date_diag', 'situation', 'date_situation')

def clean(self):
    cleaned_data = self.cleaned_data
    diag = cleaned_data.get('date_diag')

    errors = []

    now = datetime.date.today()

    if diag is not None and diag != u'':
        if diag > now:
            errors.append(ugettext('The field "Diagnosis date" should be '
                'smaller than the actual date'))
    if errors:
        raise ValidationError(errors)

    return cleaned_data 
```

模板：

```
 {{ form }} # presents the empty form and not the data from that user 
```

django的版本是1.4

谁能告诉我出了什么问题以及为什么我看不到填充的表格？

非常感谢你

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-06T16:10:59.300

您需要定义一个用于初始数据的字典，并将 TableForm(instance=user) 更改为 TableForm(initial=dict)，例如：

```
 user = User.objects.get(user_id=usr)  
 if request.method == 'POST':  
     form = TableForm(request.POST)  
     if form.is_valid():  
         #do something  
 else:  
      data = {'pres_clinic' : 'value', 'bcg_scar' : 'value', 'mantoux_register' : 'value'}
      form = TableForm(initial=data)  
 return render_to_response('template.html',{'form':form}) 
```

我还将渲染从 if 语句中响应，因此如果表单无效，页面应该重新加载并显示任何错误。

有关[django 文档的更多信息，请点击此处](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)

我希望这有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-29T14:30:46.243

你可以试试'model_to_dict'

```
from django.forms.models import model_to_dict

 user = User.objects.get(user_id=usr)  
 if request.method == 'POST':  
     form = TableForm(request.POST)  
     if form.is_valid():  
         #do something  
 else:          
     form = TableForm(initial=model_to_dict(user))  
 return render_to_response('template.html',{'form':form}) 
```

# unix - msync() 是如何工作的？

> ID：15852842
> 
> 赞同：0
> 
> 时间：2013-04-06T15:48:28.463
> 
> 标签：unix

我使用`mmap`将文件 F 映射到块 B，然后只写入 B 的一个字节。如果我使用 MS_SYNC 为 B 调用 msync()，操作系统是否将所有块写入 F？还是只将修改后的一个字节写入F？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:58:18.170

这是特定于操作系统和体系结构的，但很可能只有脏*页*会被写入磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:14:05.683

您的特定系统上的手册页是怎么说的？如果它不是开源的，那就是最好的选择，除非您可以找到适用于您的 UNIX 平台的更详细的文档。

在至少一个系统上， man msync 说：

> msync() 系统调用将修改后的整个页面写回文件系统并更新文件修改时间。只有那些包含 addr 和 len-1 后续位置的页面才会被检查。

# php - jquery在对话框中预览修改后的图像

> ID：15852844
> 
> 赞同：-1
> 
> 时间：2013-04-06T15:49:07.950
> 
> 标签：php, jquery, ajax

我有一个带有 2 个文件输入的表单，用户将选择要上传的图像。

在上传图像时提交时，我首先调整图像大小并使用 gd 将其与另一个图像合并，这工作正常。

在提交表单之前我想做什么，使用 Ajax 更改文件输入，获取图像，使用 gd（但不上传）在服务器上处理它，并在 ui 对话框中向用户显示最终结果供他们使用批准与否。

由于我无法控制的原因，我无法使用 html5。我知道您不能使用 Ajax 发布文件，需要使用 jquery-iframe-transport 或 jquery-file-upload 或其他类似的插件。

推荐什么以及如何返回最终图像以显示在对话框中，如果用户然后单击不同意，我如何清除文件输入字段？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:56:10.790

看看这个：[http ://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html](http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html)

上面的教程将向您展示如何使用 JQuery 进行图像上传。

您可以轻松更改处理上传的 php 文件，向用户显示图像，如果他们单击不赞成，则只需从服务器中删除文件并重新开始。

# c++ - POSIX cksum 和 Boost.CRC

> ID：15852845
> 
> 赞同：1
> 
> 时间：2013-04-06T15:49:07.887
> 
> 标签：c++, boost, posix, crc

我正在尝试`cksum`使用 Boost.CRC 实现简单的 POSIX。

我使用的代码相当于：

```
for(int i = 1; i<argc; ++i)
{
  support::file current(argv[i], support::file::access::read);
  size_t octets = 0;
  boost::crc_32_type crc;
  while(true)
  {
    size_t bytes_read = current.read_some(buffer_size, buffer);
    octets += bytes_read;
    crc.process_bytes(&buffer[0], bytes_read);
    if(bytes_read < buffer_size)
      break;
  }
  if(i>1)
    support::print("\n");

  support::print(boost::lexical_cast<string>(crc.checksum()) + " " + boost::lexical_cast<string>(octets) + " " + argv[i]);
} 
```

哪里`support::file`是一个简单`fopen`/`fread`二进制文件 I/O 包装器，我成功地用于`cat`实现。`support::print`提供与 相同的输出`std::cout`，但我需要它在 Windows 上进行可靠的非 ASCII 输出。

Boost 标头有这个：

```
typedef crc_optimal<32, 0x04C11DB7, 0xFFFFFFFF, 0xFFFFFFFF, true, true> crc_32_type; 
```

作为唯一的 32 位 CRC typedef。`cksum`它为空文件 ( )给出了错误的答案（使用 GNUWin32 coreutils 检查`touch test && cksum test`）。我尝试使用上述 typedef 并将其中一个或两个`0xFFFFFFFF`值修改为 0，我得到了空文件的正确结果，但任何其他文件仍然给出不同的结果。

Boost.CRC 与[POSIX`cksum`规范](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/cksum.html#tag_20_19)有何关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:50:31.740

这并不是对您问题的真正答案，而是我进行的调查的结果。当我用 VHDL 构建以太网控制器的简单实现时，我曾经与 CRC 作斗争，但我**确实**意识到，由于未知的原因，实现有时会非常不同。

好的，让我们开始吧。`typedef`您在以下位置找到的`boost/crc.hpp`：

```
typedef crc_optimal<32, 0x04C11DB7, 0xFFFFFFFF, 0xFFFFFFFF, true, true> crc_32_type; 
```

是 CRC 生成器的简单声明，它将为以太网生成 CRC。模板的参数如下：（`Bits`生成器输出的位数），`TruncPoly`（生成器使用的多项式），`InitRem`（在处理输入的第一个字节之前要输入算法的初始余数），`FinalXor`（`XORed`处理输入的所有字节后输出值应具有的值），`ReflectIn`以及`ReflectRem`（如果输入字节和/或输出应进行位反射，例如位 0 变为位 7，依此类推）。以太网不仅需要使用给定的多项式计算输出，而且还需要可以从 typedef 中读取的约束。

根据规范`cksum`，它的 CRC 生成器的 typedef 应该如下所示：

```
typedef crc_optimal<32, 0x04C11DB7, 0, 0xFFFFFFFF, false, false> cksum_crc_type; 
```

这是因为 ：

*   规范没有指定生成器的起始值，因此为 0。
*   根据规范的第 4 条，输出值应进行补码。通过将值与 1 进行异或，可以获得相同的结果。
*   位反射在任何地方都没有提到，因此不会执行。

但是，`cksum`与普通 CRC 相比，存在一个显着差异：

> (...) 后跟一个或多个八位位组，将文件的长度表示为二进制值，最低有效八位位组在前。应使用能够表示该整数的最小八位字节数。

普通 CRC 生成器不考虑已处理的八位字节数。这也可以解释为什么在处理零长度文件时会得到好的结果，但在处理较大的文件时会得到不好的结果。

不幸的是，我没有看到解决该问题的简单方法。我想你可以做的是通过`process_bytes`以下方式修改方法：

```
template < std::size_t Bits, BOOST_CRC_PARM_TYPE TruncPoly,
           BOOST_CRC_PARM_TYPE InitRem, BOOST_CRC_PARM_TYPE FinalXor,
           bool ReflectIn, bool ReflectRem >
inline
void
BOOST_CRC_OPTIMAL_NAME::process_bytes
(
    void const *   buffer,
    std::size_t  byte_count
)
{
    unsigned char const * const  b = static_cast<unsigned char const *>(
     buffer );
    process_block( b, b + byte_count );
    for(; byte_count; byte_count >>= 8)
        rem_ = (rem_ << 8) ^ crc_table_type::table_[((rem_ >> 24) ^ byte_count) & 0xFF];
} 
```

通过这样的实现，该方法给出了与 相同的结果`cksum`。`for`循环由 GNU coreutils 提供。

希望我有所帮助。

# java - 平铺地图碰撞？

> ID：15852850
> 
> 赞同：0
> 
> 时间：2013-04-06T15:49:35.940
> 
> 标签：java, collision-detection, tile

我已经在自己的游戏上工作了几个星期，并且一直被碰撞所困。游戏地图是平铺的（32*32 瓷砖），我不确定我应该从哪里开始玩家 - 瓷砖碰撞。我尝试过使用矩形，但每次它都以空白屏幕或很多错误结束。

我的主要课程：

```
package net.Exploration.alk;

import java.applet.Applet;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;

import javax.swing.JFrame;

public class Explore_Main extends Applet implements Runnable{

private static final long serialVersionUID = 1L;

public final int TARGET_FPS = 60;
public final long OPTIMAL_TIME = 1000000000 / TARGET_FPS;
public static long lastFpsTime = 0;
public static int fps = 0;
public static int renderFps = 0;

private static JFrame frame;

public static final int res = 1;

public static double offsetY = 121, offsetX = 2;
public static int dir = 0;

public static boolean moving = false;
public static boolean run = false;

private Image screen;
public static Player player;

public Level level;

public static Dimension screenSize = new Dimension(700, 560);
public static Dimension pixel = new Dimension(screenSize.width, screenSize.height);
public static Dimension Size;

public static String name = "Exploration Alpha 0.2";

public Explore_Main(){
    setPreferredSize(screenSize);
    addKeyListener(new Input());
}

public static void main(String[] args){
    Explore_Main explore = new Explore_Main();

    frame = new JFrame();
    frame.add(explore);
    frame.pack();

    Size = new Dimension(frame.getWidth(), frame.getHeight());

    frame.setTitle(name);
    frame.setResizable(false);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
    explore.start();
}

public void start(){
    requestFocus();

    //define classes
    level = new Level(1);
    player = new Player("billy bob");

    new Tile();

    run = true;
    new Thread(this).start();
}

public void stop(){
    run = false;
}

public void tick(double delta){

    frame.pack();

    player.tick(delta);
    level.tick(delta);

}

public void render(){

    Graphics g = screen.getGraphics();
    g.setColor(Color.black);
    g.drawRect(0, 0, 800, 800);

    level.render(g, (int)offsetX, (int)offsetY, (pixel.width / Tile.size) + 2, (pixel.height / Tile.size) + 2);
    player.render(g);

    g.setColor(Color.red);
    g.drawString("oX: " + (int)offsetX + " oY: " + (int)offsetY, 600, 515);
    g.drawString("FPS: " + renderFps, 600, 530);

    g = this.getGraphics();
    g.drawImage(screen, 0, 0, screenSize.width, screenSize.height, 0, 0,    pixel.width, pixel.height, null);
    g.dispose();

}

public void run() {
    screen = createVolatileImage(pixel.width, pixel.height);

    long lastLoopTime = System.nanoTime();

    while(run){

        long now = System.nanoTime();
        long updateLength = now - lastLoopTime;
        lastLoopTime = now;

        double delta = updateLength / (double)OPTIMAL_TIME;
        lastFpsTime += updateLength;
        fps++;

        if(lastFpsTime >= 1000000000){
            renderFps = fps;
            fps = 0;
            lastFpsTime = 0;
        }

        tick(delta);

        render();

        try{
            Thread.sleep((lastLoopTime - System.nanoTime() + OPTIMAL_TIME) / 1000000);
        }catch(Exception e){}

    }
}
} 
```

等级类：

```
package net.Exploration.alk;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.geom.Rectangle2D;

import org.newdawn.slick.SlickException;
import org.newdawn.slick.tiled.TiledMap;

public class Level 
{
public int width = 100;
public int height =100;
public Background[][] backgroundvariable = new Background[width][height];
public Solid[][] solid = new Solid[width][height];
public Item[][]item = new Item[width][height];
//Level = Map
//Dpath is the first part of a levels name
public final String Dpath = "Resources/World/Level_";
public String path = Dpath;

private boolean[][] blocked;

public TiledMap map = null;

public Level(int id)
{
    path = Dpath + Integer.toString(id) + ".tmx";
    System.out.println(path);

    try{
        map = new TiledMap(path,false);
    }catch(SlickException e)
    {
        System.out.println("Error Loading map!(Also might want to fix):");
    }
    for(int x = 0; x < backgroundvariable.length; x++)
    {
        for(int y = 0; y < backgroundvariable[0].length; y ++)
        {
            backgroundvariable[x][y] = new Background(new Rectangle(x * Tile.size, y * Tile.size,Tile.size,Tile.size),Tile.blank);
            solid[x][y] = new Solid(new Rectangle(x * Tile.size, y * Tile.size,Tile.size,Tile.size),Tile.blank);
            item[x][y] = new Item(new Rectangle(x * Tile.size, y * Tile.size,Tile.size,Tile.size),Tile.blank);

        }
    }

    loadWorld();

}
public void loadWorld()
{
    //declare layers
    int Background = map.getLayerIndex("background");
    int Solid = map.getLayerIndex("collision");
    int Item = map.getLayerIndex("items");

    for(int x = 0; x < backgroundvariable.length; x++)
    {
        for(int y = 0; y < backgroundvariable[0].length; y ++)
        {
        //terrain or background
        if(map.getTileId(x, y, Background) == 1){
            backgroundvariable[x][y].id = Tile.grass;
        }
        if(map.getTileId(x, y, Background) == 2){
            backgroundvariable[x][y].id = Tile.stone;
        }
        if(map.getTileId(x, y, Background) == 3){
            backgroundvariable[x][y].id = Tile.sky;
        }
        if(map.getTileId(x, y, Background) == 4){
            backgroundvariable[x][y].id = Tile.dirt;
        }

        //solids
        if(map.getTileId(x, y, Solid) == 1){
            solid[x][y].id = Tile.grass;

        //items
        {

        }

        }

    }}

}
public void tick(double delta)
{

}
public void render(Graphics g,int CamX,int CamY,int RenX,int RenY)
{
        for(int x = (CamX / Tile.size); x < (CamX / Tile.size) + RenX; x++){
            for(int y = (CamY / Tile.size); y < (CamY /Tile.size) + RenY; y++){
                if(x >= 0 && y >= 0 && x < width && y < height){
                    backgroundvariable[x][y].render(g);;
            }
        }

        }
    }

} 
```

玩家等级：

```
package net.Exploration.alk;

import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.awt.geom.Rectangle2D;

public class Player extends Rectangle{

    public double moveSpeed = 1.8;

    public static int[][] pImgRight = {{0, 0}, {1, 0}, {0, 0}};
    public static int[][] pImgLeft = {{2, 0}, {3, 0}, {2, 0}};

    public static boolean isMoving = false;
    public static boolean up = false;
    public static boolean down = false;
    public static boolean left = false;
    public static boolean right = false;

    private Rectangle PlayerRect;

    public int aniFrame = 0;
    public int aniTime = 10;
    public int aniDelta = 0;

    public Player(String name){

        width = 32;
        height = 32;
        setBounds((Explore_Main.pixel.width / 2) - (width / 2), (Explore_Main.pixel.height / 2) - (height / 2), width, height);
    }

    public void tick(double delta){

        aniDelta ++;

        if(aniDelta >= aniTime){
            aniFrame ++;
            aniDelta = 0;
            if(aniFrame > 2){
                aniFrame = 0;
            }
        }

        if(up){
            Explore_Main.offsetY -= moveSpeed * delta;
        }

        if(down){
            Explore_Main.offsetY += moveSpeed * delta;
        }

        if(left){
            Explore_Main.offsetX -= moveSpeed * delta;
        }

        if(right){
            Explore_Main.offsetX += moveSpeed * delta;
        }

    }

    public void render(Graphics g){

        if(down){
            g.drawImage(Tile.Characters, this.x, this.y, x + width, y + height, pImgRight[aniFrame][0] * Tile.size, pImgRight[aniFrame][1] * Tile.size, pImgRight[aniFrame][0] * Tile.size + Tile.size, pImgRight[aniFrame][1] * Tile.size + Tile.size, null);
        }else if(up){
            g.drawImage(Tile.Characters, this.x, this.y, x + width, y + height, pImgRight[aniFrame][0] * Tile.size, pImgRight[aniFrame][1] * Tile.size, pImgRight[aniFrame][0] * Tile.size + Tile.size, pImgRight[aniFrame][1] * Tile.size + Tile.size, null);
        }else if(left){
            g.drawImage(Tile.Characters, this.x, this.y, x + width, y + height, pImgLeft[aniFrame][0] * Tile.size, pImgLeft[aniFrame][1] * Tile.size, pImgLeft[aniFrame][0] * Tile.size + Tile.size, pImgLeft[aniFrame][1] * Tile.size + Tile.size, null);
        }else if(right){
            g.drawImage(Tile.Characters, this.x, this.y, x + width, y + height, pImgRight[aniFrame][0] * Tile.size, pImgRight[aniFrame][1] * Tile.size, pImgRight[aniFrame][0] * Tile.size + Tile.size, pImgRight[aniFrame][1] * Tile.size + Tile.size, null);
        }else{
            g.drawImage(Tile.Characters, this.x, this.y, x + width, y + height, pImgRight[0][0] * Tile.size, pImgRight[0][1] * Tile.size, pImgRight[0][0] * Tile.size + Tile.size, pImgRight[0][1] * Tile.size + Tile.size, null);
        }

    }

} 
```

# c - 无法将双倍转换为双倍

> ID：15852853
> 
> 赞同：4
> 
> 时间：2013-04-06T15:50:24.197
> 
> 标签：c

```
void load(int *n, double *x, double **arr, bool randomize)
{
    *arr = (double*)malloc((*n + 1) * sizeof(double));
    srand(time(NULL));
    for(int i = 0; i <= *n; i++)
    {
        if(! randomize)
        {   
            scanf("%lf", *arr + i);
        }
        else
        {
            *(arr + i) = rand();
        }
    }
} 
```

根据`randomize`我想用随机或自定义双数填充数组的参数。但是，此代码无法编译，它显示`"invalid conversion from int to double"`在 else 部分。

替换`rand()`为 5.0 之类的任何浮点值会显示“无法将双精度转换为双精度”。

`(double) rand()`或`(double) 5`抛出类似的错误。

`*n`当然是前面读到的这个函数，我这里就删掉了。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:53:22.993

您引用的错误消息不完整。它在 之后缺少一个星号`double`：类型`*(arr + i)`是`double*`而不是`double`，并且您不能将`int`或转换`double`为`double*`。

大概你的意思是

```
 *(*arr + i) = rand(); 
```

或者

```
 (*arr)[i] = rand(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T15:56:21.087

`*(arr + i) = rand();`->`(*arr)[i] = rand();`

# iphone - 如何刷新 iPhone 的 UIWebview？

> ID：15852855
> 
> 赞同：0
> 
> 时间：2013-04-06T15:50:28.350
> 
> 标签：iphone, ios, uiwebview

我有一个具有 UIWebView 的 iPhone 应用程序。X 小时后，用户再次启动应用程序，我发现 webview 显示相同的数据，即使页面可能有新内容。当用户在 X 小时后第二次启动应用程序时，如何自动让 UIWebView 刷新页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:06:42.467

用于重新加载 webView 使用

```
[webView reload]; 
```

计算时差：

```
- (NSTimeInterval)timeIntervalSinceDate:(NSDate *)anotherDate 
```

要计算 X 小时，请执行以下操作：

添加这是 viewDidLoad：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationEnteredBackground) name:UIApplicationDidEnterBackgroundNotification object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(applicationEnteredForeground) name:UIApplicationDidEnterForegroundNotification object:nil]; 
```

编写通知处理函数

```
 -(void)applicationEnteredBackground
 {
  //storing timestamp when user goes background 
  NSUserDefaults *userDefaults=[NSUserDefaults standardUserDefaults];
  [userDefaults setObject:[NSDate date] forKey:@"timeStamp"];
  [userDefaults synchronize];    
 }

 -(void)applicationEnteredForeground
 {
   NSUserDefaults *userDefaults=[NSUserDefaults standardUserDefaults];
   NSString *lastTimeOpened= [userDefaults objectForKey:@"timeStamp"];
   NSDateFormatter *formatter=[[NSDateFormatter alloc]init];
   //set formatter style as long
   if([[NSDate date] timeIntervalSinceDate:[formatter dateFromString:lastTimeOpened]] > X hours)
   {
     //reload your webview here.
   }
 } 
```

# .net - 通过本地网络的 URL 调用子程序？

> ID：15852859
> 
> 赞同：1
> 
> 时间：2013-04-06T15:50:46.833
> 
> 标签：.net, windows, vb.net, winforms

我正在用 Visual Basic .NET 编写一个程序来在本地网络上的 PC 上执行操作。

我基本上在寻找某种极其简单的解决方案，以允许我：

*   通过网络浏览器从网络上的其他机器调用子程序/函数
*   如果可能，将参数发布到 url 中（参见下面的乐观示例）
*   允许发送 html 的响应字符串（再次参见示例）

**示例：** 输入`http://192.168.1.72/function/argument1/argument2`将在该（本地网络）机器上运行我的 winforms 应用程序应用程序中的“函数”子/函数，并通过参数 1 和参数 2（如果包括），然后将响应页面/字符串返回到请求浏览器回馈

谁能指出我这样做的方法？我正在寻找一些相当简单但可靠的东西，因为它最终可能会全天候运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T17:50:11.030

> 我正在寻找一些相当简单但可靠的东西，因为它最终可能会全天候运行

我认为最简单的方法是使用 WCF 的[WebServiceHost](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webservicehost.aspx)类：

```
[ServiceContract]
public class MyService
{
    [OperationContract, WebGet(UriTemplate = "/function/{argument1}/{argument2}")]
    public string AMethod(string argument1, string argument2)
    {
        return argument1 + " " + argument2;
    }
} 
```

将此行放入应用程序的表单加载（或任何其他入口点），

```
var wsh = new WebServiceHost(typeof(MyService), new Uri("http://0.0.0.0/MyService"));
wsh.Open(); 
```

并`http://192.168.1.72/Myservice/function/a/b`从您的浏览器中调用。就这些。

***----完整的工作代码----***

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        protected override void OnLoad(EventArgs e)
        {
            var wsh = new WebServiceHost(typeof(MyService), new Uri("http://0.0.0.0/MyService"));
            wsh.Open();
        }
    }

    [ServiceContract]
    public class MyService
    {
        [OperationContract, WebGet(UriTemplate = "/function/{argument1}/{argument2}")]
        public string AMethod(string argument1, string argument2)
        {
            return argument1 + " " + argument2;
        }

        ///******** EDIT ********
        ///
        [OperationContract, WebGet(UriTemplate = "/function2/{argument1}/{argument2}")]
        public Stream F2(string argument1, string argument2)
        {
            return ToHtml("<html><h1>" + argument1 + " " + argument2 + "</h1></HtmlDocument>");
        }

        static Stream ToHtml(string result)
        {
            var data = Encoding.UTF8.GetBytes(result);

            WebOperationContext.Current.OutgoingResponse.ContentType = "text/html; charset=utf-8";
            WebOperationContext.Current.OutgoingResponse.ContentLength = data.Length;

            return new MemoryStream(data);
        }
        ///END OF EDIT
    }
} 
```

## 编辑

> *是否可以确定请求来自的 IP 地址？*

```
var m = OperationContext.Current
        .IncomingMessageProperties[RemoteEndpointMessageProperty.Name] as RemoteEndpointMessageProperty;

var address = m.Address; 
```

> *有什么方法可以使 {arguments} 可选？*

只需从属性中删除`UriTemplate`参数。`WebGet`然后你的网址将是

```
http://1192.168.1.72/MyService/AMethod?argument1=aaaa&argument2=bbb 
```

如果你想让参数 2 对 ex 来说是可选的，调用 as

```
http://1192.168.1.72/MyService/AMethod?argument1=aaaa 
```

并且 argument2 将在您的方法中获得默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T16:30:48.350

您需要的只是某种形式的 Web 服务。[您可能希望通过ASP.NET Web API](http://www.asp.net/web-api)使用 REST Web 服务。

不需要单独的进程间通信机制。

# ios - 在ios中将字符串转换为整数

> ID：15852865
> 
> 赞同：0
> 
> 时间：2013-04-06T15:51:27.647
> 
> 标签：ios, objective-c, nsstring, nsinteger

我知道这个问题已经被问过很多次了。您可以通过以下两种方式将字符串转换为整数：

`[myString intValue]`返回“C”类型或`[myString integerValue]`返回 NSInteger。

但我的要求是这样的：

```
int route1 = 12,route2 = 5,route3 = 6;
for (int j = 1; j < 4; j++) {
        int route = [[NSString stringWithFormat:@"route%i",j] integerValue];
        //do something using the route
} 
```

我需要路由变量根据变量 j 的值来获取不同路由的值。

我该怎么做？在这方面需要一些指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T15:54:13.363

您可以执行以下操作：

```
int routes[3] = {12, 5, 6}; 
```

在你的 for 循环中：

```
int route = routes[j]; 
```

无需转换任何东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:00:30.760

不完全确定您要在这里做什么。您可能应该使用路由整数数组或其他东西并引用索引。从看起来你试图从`"route1",` `"route2"`,中获取值的情况`"route3"`。

你应该看看`intValue`or的使用`integerValue`。如果你有一个`NSString`who's 值，`"1234"`它会返回 integer `1234`。

# regex - 使用正则表达式查找除一个字符串之外的所有字符串

> ID：15852869
> 
> 赞同：40
> 
> 时间：2013-04-06T15:52:18.673
> 
> 标签：regex

我想匹配除 string 之外的所有字符串`"ABC"`。例子：

```
 "A"     --> Match
 "F"     --> Match
 "AABC"  --> Match
 "ABCC"  --> Match
 "CBA"   --> Match
 "ABC"   --> No match 
```

我试过了`[^ABC]`，但它忽略了`"CBA"`（和其他人）。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-06T15:56:18.717

```
^(?!ABC$).* 
```

匹配除 . 之外的所有字符串`ABC`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T16:36:57.790

从你的例子来看，我认为你的意思是“所有字符串，除了那些包含*单词*ABC 的字符串”。

试试这个：

```
^(?!.*\bABC\b) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T16:54:22.227

## 使用 GNU Grep 反转匹配

您可以简单地使用单词边界和要拒绝的特定字符串来反转匹配。例如：

```
$ egrep --invert-match '\bABC\b' /tmp/corpus 
"A"     --> Match
"F"     --> Match
"AABC"  --> Match
"ABCC"  --> Match
"CBA"   --> Match 
```

这在您提供的语料库上非常有效。您的里程可能会因其他（或更复杂的）用例而异。

# c++ - 类成员函数静态和私有

> ID：15852870
> 
> 赞同：2
> 
> 时间：2013-04-06T15:52:21.353
> 
> 标签：c++

让一些类成员函数说 f() 既私有又静态有意义吗？例如

```
class MyClass
{
 ...
private:

static int foo();
} 
```

谢谢。

您好，感谢您的所有评论！好，我知道了。是的，确实最初我开始在我的班级中使用静态函数，因为它们与我班级的对象无关 - 正在执行一些其他操作。现在我也意识到他们不必公开。所以，我想我会像这样离开他们。当我删除 static 关键字时，我开始遇到一些错误（显然是由于它在整个班级中的使用方式，所以我现在懒得修复这些，只会将其设为私有并保留静态 :)）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T15:54:31.983

是的。例如：用于初始化或其他目的的私有静态成员函数。

有关更多信息，请参阅此帖子：[私有静态成员函数的用途是什么？](https://stackoverflow.com/questions/6445927/what-is-the-use-of-private-static-member-functions)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T15:53:39.290

当然，有时。例如，同一类的公共静态方法使用的实用程序函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T15:54:06.997

是的，拥有一个静态私有成员函数是有意义的。例如，它可能是仅由同一类的其他成员使用的无状态效用函数。

不，你的课没有意义。由于`MyClass`没有其他成员，因此没有实体可以看到您的`MyClass::foo`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T15:56:05.790

绝对地！想象一个纯静态的类，例如统计函数类。辅助函数可以是私有的和静态的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T15:57:10.013

当然。你可以将它用于你的类的内部目的，在私有函数中，即

```
class A{
    public:
        static int i_;
private:
    void privatef(){hiden_i_++;}
    static int hiden_i_;
}; 
```

# intuit-partner-platform - Intuit Anywhere - 令牌无效异常

> ID：15852871
> 
> 赞同：0
> 
> 时间：2013-04-06T15:52:27.377
> 
> 标签：intuit-partner-platform

我正在尝试通过 AppCenter WF 1.0 的要求。我的日志在这里：

[http://pastebin.com/jqqLWury](http://pastebin.com/jqqLWury)

我注意到我的 OauthResponse 页面被访问了两次：

CCC：信息 2013 年 4 月 8 日下午 2:40:22 OauthResponse 已于 2013 年 4 月 8 日下午 2:40:22 访问过 CCC：信息 2013 年 4 月 8 日下午 2:40:26 访问了 OauthResponse 4 /8/2013 下午 2:40:26

我在上面发布的日志似乎也两次访问了我的页面。

我尝试在[https://appcenter.intuit.com/TryBuy/IA/MYID](https://appcenter.intuit.com/TryBuy/IA/MYID)登录。我收到一个页面，要求连接到我的应用程序。当我连接并单击授权时，我被发送到 myapp.com/openid 并重定向到 myapp.com/home/index。我收到一个访问令牌、一个访问令牌密钥和一个领域。当我尝试使用这些凭据进行身份验证时，它失败了。

*我注意到该应用程序从未添加到我的公司应用程序列表中。*

我正在使用 Intuit Azure SDK。在我的开发区，这些设置是否正确？

**应用网址：myapp.com/openid**

**断开连接登陆网址：myapp.com/disconnect**

**管理用户网址：myapp.com/OauthResponse**

**OpenId 网址：[https ://www.myapp.com/openid](https://www.myapp.com/openid)**

**主机名域：myapp.com**

我正在使用我的开发消费者密钥和我的开发消费者密钥密钥。为什么我的凭据不好？

这是我的错误：

Intuit.Ipp.E​​xception.InvalidTokenException：在 Intuit.Ipp.Core.ServiceContext.GetQBOPartitionedURL(String qboServiceEndpoint) 在 Intuit.Ipp.Core.ServiceContext.GetBaseURL() 在 Intuit.Ipp.E​​xception.IdsExceptionManager.HandleException(IdsException idsException) 未经授权Intuit.Ipp.Core.ServiceContext..ctor(IRequestValidator requestValidator, String

这是我的代码：

```
string Authenticate()
    {
        string accessToken = HttpContext.Current.Session["accessToken"].ToString();
        string accessTokenSecret = HttpContext.Current.Session["accessTokenSecret"].ToString();
        string companyID = HttpContext.Current.Session["realm"].ToString();
        // now auth to IA
        OAuthRequestValidator oauthValidator = new OAuthRequestValidator(accessToken, accessTokenSecret, ConfigurationManager.AppSettings["consumerKey"].ToString(), ConfigurationManager.AppSettings["consumerSecret"].ToString());
        ServiceContext context = new ServiceContext(oauthValidator, accessToken, companyID, IntuitServicesType.QBO);
        dataServices = new DataServices(context);
        return "OK";
    } 
```

如果我通过我的网站登录而不使用该 URL，则一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T22:09:10.313

看起来我的应用程序 URL 在应用程序中心不正确。

就我而言，应用程序 URL 应该是[http://www.cloudcartconnector.com/OpenId](http://www.cloudcartconnector.com/OpenId)而我的 OpenIdUrl 应该是[https://www.cloudcartconnector.com/DirectConnectToIntuit](https://www.cloudcartconnector.com/DirectConnectToIntuit)

# ruby-on-rails - 在不更新数据库的情况下，在 Rails 中显示由挂起迁移生成的 SQL

> ID：15852872
> 
> 赞同：17
> 
> 时间：2013-04-06T15:53:08.317
> 
> 标签：ruby-on-rails, database, rake

我想有一种方法来生成将由 rake db:migrate 生成的实际 sql（即：如果我粘贴到 mysql 控制台中，它将起作用），而无需实际更新目标数据库。

rake db:migrate:status 可以很好地显示给定数据库的哪些迁移正在等待，但我还没有找到一种方法来生成实际的 SQL。

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-01-02T21:33:12.903

非常有趣的问题！我发现这种方式：

1.  假设您的迁移放在文件中`db/migrate/20160102210050_create_items.rb`并调用`CreateItems`
2.  转到 Rails 控制台并加载迁移文件：

    ```
    rails c
    require './db/migrate/20160102210050_create_items' 
    ```

3.  打开事务，在提交前运行迁移和回滚事务 :)

    ```
    ActiveRecord::Base.connection.transaction do
      CreateItems.new.migrate :up
      raise ActiveRecord::Rollback
    end 
    ```

如果您想在回滚时检查 SQL，只需调用`CreateItems.new.migrate :down`第 3 步。SQL 将在数据库上执行和测试，但不会提交 - 因此您可以验证迁移而不会受到影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-11T22:18:05.563

这可以通过对数据库适配器进行猴子修补来完成。此示例适用于 MySQL。

为“fake db:migrate”创建一个 rake 任务：

```
desc "Prints all SQL to be executed during pending migrations"
task :fake_db_migrate => :environment do

  module ActiveRecord
    module ConnectionAdapters
      class AbstractMysqlAdapter < AbstractAdapter

        alias_method :real_execute, :execute

        def execute(sql, name = nil)
          if sql =~ /^SHOW/ || sql =~ /^SELECT.*FROM.*schema_migrations/ || sql =~ /^SELECT.*information_schema/m
            real_execute(sql, name)
          else
            puts sql
          end
        end

      end
    end
  end

  Rake::Task["db:migrate"].invoke
end 
```

rake 任务猴子修补`execute`连接适配器中的方法，以便在实际运行迁移之前打印而不是执行 SQL。但是，我们仍然必须执行`db:migrate`任务使用的一些内部 SQL 来获取数据库模式并找出哪些迁移正在等待。这就是`real_execute`调用的作用。

### 测试

现在假设我们有一个待处理的迁移`db/migrate/20160211212415_create_some_table.rb`：

```
class CreateSomeTable < ActiveRecord::Migration
  def change
    create_table :some_table do |t|
      t.string :string_column, null: false, default: 'ok'
      t.timestamps
    end
  end
end

$ rake db:migrate:status
...
down    20160211212415  Create some table 
```

现在，让我们运行我们的假迁移任务：

```
$ rake fake_db_migrate
== 20160211212415 CreateSomeTable: migrating ==================================
-- create_table(:some_table)
CREATE TABLE `some_table` (`id` int(11) auto_increment PRIMARY KEY, `string_column` varchar(255) DEFAULT 'ok' NOT NULL, `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB
   -> 0.0009s
== 20160211212415 CreateSomeTable: migrated (0.0010s) =========================

BEGIN
INSERT INTO `schema_migrations` (`version`) VALUES ('20160211212415')
COMMIT 
```

迁移状态没有改变，即迁移仍然挂起：

```
$ rake db:migrate:status
...
down    20160211212415  Create some table 
```

`mysql2`使用gem在 rails 4.2.3 上测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-23T14:10:55.293

一个稍微低级的函数，可用于您的目的：

```
# Get SQL query of a migration expression without executing it.
#
# @example
#   schema_statement_to_sql { create_table(:tomatoes) }
#   # => "CREATE TABLE \"tomatoes\" (\"id\" serial primary key) "
def schema_statement_to_sql(&block)
  raise ArgumentError, 'No block given' unless block_given?

  connection = ActiveRecord::Base.connection
  original_execute = connection.method(:execute)
  sql_to_return = ''
  capturing_execute = proc { |sql| sql_to_return = sql }
  connection.define_singleton_method(:execute, &capturing_execute)

  begin
    connection.instance_eval(&block)
  ensure
    connection.define_singleton_method(:execute, &original_execute)
  end

  sql_to_return
end 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-06T17:20:27.647

你可以做

```
rake db:migrate --dry-run --trace 
```

并且 rake 将测试任务。然后使用列出的方法之一来获取将要运行的 SQL。

# java - 显示配对的蓝牙设备

> ID：15852873
> 
> 赞同：0
> 
> 时间：2013-04-06T15:53:12.703
> 
> 标签：java, android, bluetooth

我有一个显示可用配对设备的应用程序。

它第一次工作，显示范围内的一个配对设备，但如果我关闭并重新打开应用程序，设备不会显示。两个 BT 都打开，并且它们已配对

关于为什么的任何想法？

**代码**

```
private void getPairedDevices() {
    // TODO Auto-generated method stub
    devicesArray = btAdapter.getBondedDevices();
    if(devicesArray.size() > 0){
        for(BluetoothDevice device:devicesArray){
            pairedDevices.add(device.getName());
        }
    }
} 
```

这就是我获取配对设备并将它们添加到阵列的代码。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    init();
    if(btAdapter == null){
        Toast.makeText(getApplicationContext(), "no bluetooth detectd", 0).show();
        finish();
    }
    else{
        if(!btAdapter.isEnabled()){
            turnOnBt();
        }   
    }
    getPairedDevices();
    startDiscovery();
}
private void startDiscovery() {
    // TODO Auto-generated method stub
    btAdapter.cancelDiscovery();
    btAdapter.startDiscovery();
}
private void turnOnBt() {
    Intent intent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
    btAdapter.enable();
}
private void getPairedDevices() {
    // TODO Auto-generated method stub
    devicesArray = btAdapter.getBondedDevices();
    if(devicesArray.size() > 0){
        for(BluetoothDevice device:devicesArray){
            pairedDevices.add(device.getName());
        }
    }
} 
```

该方法适合并从中调用。

谢谢

# css - div没有在chrome中显示背景颜色

> ID：15852879
> 
> 赞同：0
> 
> 时间：2013-04-06T15:53:38.673
> 
> 标签：css, background-color

我现在正在做一个小任务，页面只能在 IE 中正确显示。没有一个`div` `background-color`s 出现。

HTML

```
<body bgcolor="#949191">
  <div id="heading">
    <div id="banner">
      <a href="index.html">
        <img src="images/banner.jpg" alt="Crown Awards" style="border-style: none"/>
      </a>
    </div>
    <div id="nav">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="news.html">News</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </div>
  </div>
  <div id="content"></div>
</body> 
```

CSS

```
#heading{
  height:100px;
  width:900px;
  background-color:"#FFFFFF";
  border-radius: 10px;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;            
  display:block;
  box-shadow: 10px 10px 5px #888888;
  margin-bottom:10px;
  position:relative;
}
#banner{
  width:415px;
  float:left;
  padding:20px;
  vertical-align:top;
}
#nav{
  width:400px;
  float:right;
  bottom:0;
  right:0;
  position:relative;
  display:block;
  background-color:"#003399";
  border-radius: 10px;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;  
}

#content{
  width:900px;
  background-color:"#FFFFFF";
  border-radius: 10px;
  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;
  -khtml-border-radius: 10px;            
  display:block;
  box-shadow: 10px 10px 5px #888888;
}    
ul {
  list-style-type:none;
  margin:0;
  padding:20px;
  vertical-align:bottom;
}
li {
  display:inline;
  float:right;
  padding: 20px 0px 20px 20px;
}
a {
  display:block;
} 
```

铬合金

![铬合金](https://i.stack.imgur.com/HW55W.png)

IE

![IE](https://i.stack.imgur.com/6hnfZ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T15:56:28.820

默认情况下，浮动元素不会影响其父元素的高度。在父元素上设置`overflow: hidden`以更改它。

不应引用 CSS 颜色代码。删除引号字符并[使用验证器](http://jigsaw.w3.org/css-validator/)。

由于出现在 Quirks 模式中的许多错误中的两个，因此背景颜色显示在 IE 中。通过使用合适的 Doctype 触发标准模式来避免它们。以`<!DOCTYPE html>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:13:27.977

采用

```
background-color: #003399; 
```

没有 ”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:13:38.087

如果子元素浮动，则父元素折叠。

对此的快速解决方法是将 css 添加`overflow:hidden`到父级，这将清除浮动并保留子级的所需高度。

CSS也不应该有`background-color`引号。

# facebook - 如果用户授予基本权限但未授予扩展权限，则 facebook->getUser() 返回 0

> ID：15852881
> 
> 赞同：0
> 
> 时间：2013-04-06T15:53:44.330
> 
> 标签：facebook, facebook-login

我确实像这样登录：

```
<script type="text/javascript">

function fbLogin(){
FB.init({ appId: 'FB_ID', 
status: true, 
cookie: true,
xfbml: true,
channelUrl: 'https://fbapps.promplac.si/channel.php',
oauth: true});
FB.login(function(response) {
if (response.authResponse) {
document.getElementById("korak1").submit();
} else {}
}, {scope:'email, user_likes, user_birthday, user_location, user_interests, photo_upload, publish_stream'});  
}
</script> 
```

这工作正常

当用户授予正常权限但未扩展我的表单时，我会提交，但是当我在 php: facebook->getUser() 中询问时，它返回 0。

是同一个用户再次使用我的应用程序，并且他再次没有授予扩展权限，我通常通过 facebook->getUser() 获取用户 ID。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T14:57:24.160

最后我从前端解决了它，我检查用户是否已登录，然后将访问令牌发送到 php。

一些代码示例：

```
document.getElementById("accesstoken").value=FB.getAuthResponse()['accessToken']; 
```

# android - 使用 Activity（不是 ListActivity）和 asyncTask onPostExecute() android 显示 listView

> ID：15852882
> 
> 赞同：0
> 
> 时间：2013-04-06T15:53:47.250
> 
> 标签：android, android-asynctask

当我运行我的应用程序时，它崩溃了。其实我注意到我在写`list.setAdapter(adapter);`的时候就出现了这个问题`PostExecute()`。谁能帮我？谢谢。

在`Searchbykey`活动中，用户可以从列表中选择一些项目

```
public class Searchbykey extends SherlockActivity {

    ActionBar actionbar;
    ListView listView;
    ArrayAdapter<String> adapter;
    double latitude, longitude;
    public static ArrayList<HashMap<String, String>> xml_results;
    public ProgressDialog progressDialog; 
    Intent intentResults ;
    int k=0;
    //XML node keys
    static final String KEY_ENV = "environment"; // parent node
    static final String KEY_TITLE = "title";
    static final String KEY_FEED = "feed";
    static final String KEY_ID = "id";
    static final String KEY_LAT = "lat";
    static final String KEY_LON = "lon";
    static final String KEY_DIF_LAT = "dif lat";
    static final String KEY_DIF_LON = "dif lon";
    static final String KEY_NAME = "name";
    static final String KEY_DESC = "description";

    String[] countries = new String[] {
            "India",
            "Pakistan",
            "Sri Lanka",
            "China",
            "Bangladesh",
            "Nepal",
            "Afghanistan",
            "North Korea",
            "South Korea",
            "Japan"
    };

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.keylist);

        actionbar=getSupportActionBar();
        actionbar.setTitle("Search by keyword(s)");

        //-------Get the location that calculate from previus acrivity. Before that activity start. 
        Bundle extras = getIntent().getExtras();
        if (extras == null) 
        {
            System.out.println("None");
        }

        //Get data via the key
        latitude = extras.getDouble("latitude");
        longitude = extras.getDouble("longitude");

        //----------I have a location service that detect the location and send a broadcast msg. So here I declare a register to listen the broadcast msg for location

        IntentFilter filter = new IntentFilter("xxx.yyy.intent.action.LOCATION");
        this.registerReceiver(new LocationReceiver(), filter);

        //The checkbox for the each item is specified by the layout android.R.layout.simple_list_item_multiple_choice
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_multiple_choice, countries);

        //Getting the reference to the listview object of the layout
        listView = (ListView) findViewById(R.id.ListView);

        //Setting adapter to the listview
        listView.setAdapter(adapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {

        getSupportMenuInflater().inflate(R.menu.keywordmenu, menu);

        (menu.findItem(R.id.search)).setIcon(R.drawable.action_search);
        (menu.findItem(R.id.clear)).setIcon(R.drawable.abs__ic_clear);

        //return(true);
        return super.onCreateOptionsMenu(menu);
    }

    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {
            case R.id.search:

            //-----------Call new activity that appears the search result   
            intentResults = new Intent (this, Keysearch_results.class);
            startActivity(intentResults);

            break;
        case R.id.clear:
            ClearSelections();
        break;
        }
        return true;

    }    
}

//-----The Keysearch_results is the activity that i want to take info from url (xml parser) and appear the result of search
public class Keysearch_results extends SherlockActivity {

    //XML node keys
    static final String KEY_ENV = "environment"; // parent node
    static final String KEY_TITLE = "title";
    static final String KEY_FEED = "feed";
    static final String KEY_ID = "id";
    static final String KEY_LAT = "lat";
    static final String KEY_LON = "lon";
    static final String KEY_DIF_LAT = "dif lat";
    static final String KEY_DIF_LON = "dif lon";
    static final String KEY_NAME = "name";
    static final String KEY_DESC = "description";

    public ProgressDialog progressDialog; 
    public ArrayList<HashMap<String, String>> listItems;

    //Menu Bar
    ActionBar actionbar;

    //List
    ListView listView;
    ArrayAdapter<String> adapter;

    //User Location
    double latitude, longitude;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.results);

        //Appear action bar
        actionbar=getSupportActionBar();
        actionbar.setTitle("Results");

        //Getting the reference to the listview object of the layout
        listView = (ListView) findViewById(R.id.ResList);

        ListAdapter adapter = new SimpleAdapter(this, listItems,
                R.layout.result_row,
                new String[] { "feed", "dif lat",}, new int[] {
                        R.id.name, R.id.dif});

   new YourDownload().execute();

    }

private class YourDownload extends AsyncTask<Void, Void, Integer> {

     // private String Content;

     @Override
     protected Integer doInBackground(Void... params) {

         if(isOnline()){
            listItems.clear();   
            int i; 
            HashMap<String, String> map = null; 
            XMLParser parser = new XMLParser();
            //getting XML
            String xml = null ;
          DefaultHttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            try {
                request.setURI(new URI("http://api.cosm.com/v2/feeds.xml?&key=Sov51TAorgtao6W_JuNodPN3KMqSAKxuZjFsblR3TUp4TT0g&lat=35.1446170529352&lon=33.3462524414062"));
            } catch (URISyntaxException e) {

                e.printStackTrace();
                System.out.print("http\n");
            }
            HttpResponse httpResponse = null;
            try {
                httpResponse = client.execute(request);
            } catch (ClientProtocolException e1) {

                e1.printStackTrace();
            } catch (IOException e1) {

                e1.printStackTrace();
            }
            HttpEntity httpEntity = httpResponse.getEntity();
            try {
                xml = EntityUtils.toString(httpEntity);
            } catch (ParseException e1) {
                e1.printStackTrace();
            } catch (IOException e1) {

                e1.printStackTrace();
            }

            //getting DOM element
            Document doc = parser.getDomElement(xml); 

            NodeList nl = doc.getElementsByTagName(KEY_ENV);
          //int size=nl.getLength(); 
            // looping through all item nodes <item>
            for (i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_FEED, parser.getValue(e, KEY_FEED));
                map.put(KEY_DIF_LAT, parser.getValue(e, KEY_LAT));
                map.put(KEY_DIF_LON, parser.getValue(e, KEY_LON));
                listItems.add(map);
            }
         }
         else{
            Toast.makeText(Keysearch_results.this, "No connection..", Toast.LENGTH_LONG).show();            
        }

            return 1;
        }

     @Override
     protected void onPostExecute(Integer result) {

         if(result==1 && listItems!=null)
         {

         listView.setAdapter(adapter);
         }
         progressDialog.dismiss();
         super.onPostExecute(result);
     } 

    }
} 
```

列表布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

 <TextView android:id="@+id/name" 
     android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:padding="10dp"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textStyle="bold"
    android:textSize="16sp" >
  </TextView>

   <TextView android:id="@+id/dif" 
   android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:padding="10dp"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textStyle="bold"
    android:textSize="16sp" > </TextView>

   <TextView android:id="@+id/dd" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:textStyle="bold"
    android:textSize="16sp" >
  </TextView>

</LinearLayout> 
```

错误：

```
 04-06 19:50:30.326: E/ActivityThread(795): Activity com.example.ioaaan.Searchbykey has leaked IntentReceiver com.example.ioaaan.Searchbykey$LocationReceiver@40cdb248 that was originally registered here. Are you missing a call to unregisterReceiver()?
    04-06 19:50:30.326: E/ActivityThread(795): android.app.IntentReceiverLeaked: Activity com.example.ioaaan.Searchbykey has leaked IntentReceiver com.example.ioaaan.Searchbykey$LocationReceiver@40cdb248 that was originally registered here. Are you missing a call to unregisterReceiver()?
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.LoadedApk$ReceiverDispatcher.<init>(LoadedApk.java:795)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.LoadedApk.getReceiverDispatcher(LoadedApk.java:596)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.ContextImpl.registerReceiverInternal(ContextImpl.java:1316)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.ContextImpl.registerReceiver(ContextImpl.java:1296)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.ContextImpl.registerReceiver(ContextImpl.java:1290)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.content.ContextWrapper.registerReceiver(ContextWrapper.java:423)
    04-06 19:50:30.326: E/ActivityThread(795):  at com.example.ioaaan.Searchbykey.onCreate(Searchbykey.java:121)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.Activity.performCreate(Activity.java:5104)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.os.Handler.dispatchMessage(Handler.java:99)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.os.Looper.loop(Looper.java:137)
    04-06 19:50:30.326: E/ActivityThread(795):  at android.app.ActivityThread.main(ActivityThread.java:5041)
    04-06 19:50:30.326: E/ActivityThread(795):  at java.lang.reflect.Method.invokeNative(Native Method)
    04-06 19:50:30.326: E/ActivityThread(795):  at java.lang.reflect.Method.invoke(Method.java:511)
    04-06 19:50:30.326: E/ActivityThread(795):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    04-06 19:50:30.326: E/ActivityThread(795):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    04-06 19:50:30.326: E/ActivityThread(795):  at dalvik.system.NativeStart.main(Native Method) 
```

抱歉所有这些错误，但我是 android 应用程序的新手，我不明白如何修复错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:05:26.617

注册和注销 `BroadcastReceiver`试试这个：

**1.**

```
//declare this as global in your class.
private LocationReceiver locationReceiver = new LocationReceiver(); 
```

然后在你的`OnCreate()`

```
IntentFilter filter = new IntentFilter("xxx.yyy.intent.action.LOCATION");    
this.registerReceiver(locationReceiver, filter); 
```

然后像这样`OnDestroy()`取消注册`locationReceiver`：

```
@Override
protected void onDestroy() {
    if (locationReceiver != null) {
        locationReceiver.cancel(true);
    }
    try {
        unregisterReceiver(locationReceiver);
    } catch (Exception e) {
        Log.e("UnRegister Receiver Error", "> " + e.getMessage());
    }
    super.onDestroy();
} 
```

**2.** 如果没有帮助，请删除您的`LocationReceiver`类并声明以下变量，其工作方式与以下相同`LocationReceiver`：

```
private final BroadcastReceiver locationReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent calledIntent)
         Log.d("LOC_RECEIVER", "Location RECEIVED!");

         latitude = calledIntent.getDoubleExtra("latitude", -1);
         longitude = calledIntent.getDoubleExtra("longitude", -1);            
    }
}; 
```

然后在你的`OnCreate()`，像这样注册`locationReceiver`：

```
IntentFilter filter = new IntentFilter("xxx.yyy.intent.action.LOCATION");    
this.registerReceiver(locationReceiver, filter); 
```

然后像这样`OnDestroy()`取消注册`locationReceiver`：

```
@Override
protected void onDestroy() {
    if (locationReceiver != null) {
        locationReceiver.cancel(true);
    }
    try {
        unregisterReceiver(locationReceiver);
    } catch (Exception e) {
        Log.e("UnRegister Receiver Error", "> " + e.getMessage());
    }
    super.onDestroy();
} 
```

希望这会有所帮助。顺便说一句，我在我的项目中使用了第二种方法。

# php - Nginx connect() 失败错误

> ID：15852884
> 
> 赞同：17
> 
> 时间：2013-04-06T15:53:57.397
> 
> 标签：php, nginx, server

我不知道为什么每次尝试打开页面时都会出现此错误：

```
2013/04/06 17:52:19 [error] 5040#0: *1 connect() failed (111: Connection refused) while connecting to upstream, client: 127.0.0.1, server: localhost, request: "GET /info.php HTTP/1.1", upstream: "fastcgi://127.0.0.1:9000", host: "localhost:8080" 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-06T18:27:13.173

我解决了，这是一个配置文件问题，我补充说：

```
location ~ .php$ {
    try_files $uri =404;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-12-16T20:24:06.560

对我来说，问题是我的 php-fpm 服务没有运行。您可以通过运行来检查它：

```
service php-fpm status 
```

并通过运行启动它

```
service php-fpm start 
```

有时 php-fpm 可能会破坏正在运行的实例，从而阻止重新启动。此命令是清除它们并重新启动 php-fpm 的一种干净方法

```
killall -9 php-fpm; service php-fpm restart 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-17T11:43:38.083

如前所述更新您的配置：

```
location ~ .php$ {
try_files $uri =404;
fastcgi_split_path_info ^(.+\.php)(/.+)$;
fastcgi_pass unix:/var/run/php5-fpm.sock;
fastcgi_index index.php;
include fastcgi_params;
} 
```

但不要忘记在更新后重新启动 nginx 服务器和 php-fpm

```
sudo /etc/init.d/nginx restart
sudo /etc/init.d/php-fpm restart 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-05T19:20:20.803

我发现我在 Debian Jessie (8.3) 实例上的 Docker 中运行 PHP7 时遇到了同样的问题。

*   运行命令“ps -aux”显示 php-fpm 没有运行
*   运行 'php-fpm -D' 将其作为去守护进程启动。
*   重新运行 'ps -aux' 表明 php-fpm 确实在运行
*   刷新我的测试页面向我显示了服务器 PHP 信息。

在我的 start.sh 脚本中添加了“php-fpm -D”，以便每次加载容器时都会启动。

希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-02T08:22:21.867

使用 fastcgi_pass unix:/var/run/php5-fpm.sock；只有 nginx 和 php 安装相同的服务器。如果 nginx 和 php 安装在其他服务器上，你必须使用 fastcgi_pass ip server:port;

# java - 方法将默认浏览器作为字符串返回？

> ID：15852885
> 
> 赞同：18
> 
> 时间：2013-04-06T15:53:58.627
> 
> 标签：java, string, browser, default

有没有一种方法可以将用户的默认浏览器作为字符串返回？

我正在寻找的示例：

```
System.out.println(getDefaultBrowser()); // prints "Chrome" 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-06T15:53:58.627

您可以通过使用注册表^([1])和正则表达式将默认浏览器提取为字符串来完成此方法。据我所知，没有一种“更清洁”的方法可以做到这一点。

```
public static String getDefaultBrowser()
{
    try
    {
        // Get registry where we find the default browser
        Process process = Runtime.getRuntime().exec("REG QUERY HKEY_CLASSES_ROOT\\http\\shell\\open\\command");
        Scanner kb = new Scanner(process.getInputStream());
        while (kb.hasNextLine())
        {
            // Get output from the terminal, and replace all '\' with '/' (makes regex a bit more manageable)
            String registry = (kb.nextLine()).replaceAll("\\\\", "/").trim();

            // Extract the default browser
            Matcher matcher = Pattern.compile("/(?=[^/]*$)(.+?)[.]").matcher(registry);
            if (matcher.find())
            {
                // Scanner is no longer needed if match is found, so close it
                kb.close();
                String defaultBrowser = matcher.group(1);

                // Capitalize first letter and return String
                defaultBrowser = defaultBrowser.substring(0, 1).toUpperCase() + defaultBrowser.substring(1, defaultBrowser.length());
                return defaultBrowser;
            }
        }
        // Match wasn't found, still need to close Scanner
        kb.close();
    } catch (Exception e)
    {
        e.printStackTrace();
    }
    // Have to return something if everything fails
    return "Error: Unable to get default browser";
} 
```

现在，无论何时`getDefaultBrowser()`调用，都应返回 Windows 的默认浏览器。

测试浏览器：

*   Google Chrome（函数返回“Chrome”）
*   Mozilla Firefox（函数返回“Firefox”）
*   Opera（函数返回“Opera”）

* * *

正则表达式 ( `/(?=[^/]*$)(.+?)[.]`) 的解释：

*   `/(?=[^/]*$)``/`匹配字符串中最后出现的
*   `[.]`匹配`.`文件扩展名中的
*   `(.+?)`捕获这两个匹配字符之间的字符串。

在我们针对正则表达式进行测试之前，您可以通过查看`registry`right 的值来了解它是如何捕获的（我已将捕获的内容加粗）：

> (默认) REG_SZ "C:/Program Files (x86)/Mozilla Firefox/ **firefox** .exe" -osint -url "%1"

* * *

^([1])仅限 Windows。我无法访问 Mac 或 Linux 计算机，但是通过浏览 Internet，我认为`com.apple.LaunchServices.plist`将默认浏览器值存储在 Mac 上，而在 Linux 上，我认为您可以执行命令`xdg-settings get default-web-browser`来获取默认浏览器。不过，我可能是错的，也许可以访问这些内容的人愿意为我测试并评论如何实施它们？

# windows - 我们可以为浏览器注册全局热键吗

> ID：15852894
> 
> 赞同：3
> 
> 时间：2013-04-06T15:54:18.493
> 
> 标签：windows, hotkeys, keyboard-shortcuts, global-hotkey

即使浏览器最小化或不在焦点上，我们也希望注册浏览器事件。例如，假设我们在 Microsoft Word 中做某事，如果我们按下键盘上的一个键（与 Word 或 Windows 操作系统的任何快捷方式无关），它应该在 Google Chrome 中打开一个新选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-19T00:11:00.510

该解决方案将特定于浏览器。您需要为 Firefox 创建一个 XPCOM 插件，为 Chrome 创建一个原生应用程序，为 IE 创建一个扩展程序等。这个特定于浏览器的插件必须使用 Windows API 注册每个热键，然后根据需要处理热键事件；这当然意味着您需要使用可以访问 Windows API 的语言。根据您希望在浏览器中自动化的内容，您可能需要在纯 javascript 中创建一个额外的插件来获得对浏览器 API 的完全访问权限。

# php - 如何解决“文档末尾的额外内容”错误php

> ID：15852895
> 
> 赞同：0
> 
> 时间：2013-04-06T15:54:18.697
> 
> 标签：php, sql, database, localhost, port

我认为端口有问题。我之前读过这个问题，人们写道服务器可能存在问题，不允许在指定端口上进行传出连接。问题是我没有在相关的 php 文件中声明任何特定的端口。

这里的代码：

```
<?php
header( 'Content-type: text/xml' );
mysql_connect( 'localhost:/tmp/mysql.sock', 'root', '' );
mysql_select_db( 'chat' );
mysql_query( "INSERT INTO chatitems VALUES ( null, null, '".
            mysql_real_escape_string( $_REQUEST['user'] ).
            "', '".
            mysql_real_escape_string( $_REQUEST['message'] ).
            "')" );
?> 
<success /> 
```

这里是我得到的错误：

![此页面包含以下错误：](https://i.stack.imgur.com/zjPt0.png)

希望有人知道该怎么做

PS：我的网站空间是 bplaced.net，我通过 PhpMyAdmin 管理我的 SQL 数据库

如果你想尝试访问[fl-webdesign.org/chat/test.html](http://fl-webdesign.org/chat/test.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:05:29.787

我的感觉是，您的源代码中可能有**UTF-8 BOM ：**

```
<?php
-----^ // The BOM might be here.
header( 'Content-type: text/xml' );
mysql_connect( 'localhost:/tmp/mysql.sock', 'root', '' );
mysql_select_db( 'chat' );
mysql_query( "INSERT INTO chatitems VALUES ( null, null, '".
            mysql_real_escape_string( $_REQUEST['user'] ).
            "', '".
            mysql_real_escape_string( $_REQUEST['message'] ).
            "')" );
?> 
<success /> 
```

您可以使用 HEX 编辑器对其进行检查。这方面的一些资源是：

*   [维基百科](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)
*   [谷歌](https://www.google.co.in/search?q=utf+8+bom&aq=f&oq=utf+8+bom&aqs=chrome.0.57.3888j0&sourceid=chrome&ie=UTF-8#hl=en&sclient=psy-ab&q=utf+8+bom+remover&oq=utf+8+bom+&gs_l=serp.3.0.0l3j0i22i30.6587.7874.0.9041.2.2.0.0.0.0.142.262.0j2.2.0...0.0...1c.1.8.psy-ab.4jd7P001JLE&pbx=1&bav=on.2,or.r_qf.&bvm=bv.44770516,d.aGc&fp=b64e532e7bac3b33&biw=1920&bih=979)

# php - 使用 php 从字符串中获取子域

> ID：15852897
> 
> 赞同：2
> 
> 时间：2013-04-06T15:54:50.600
> 
> 标签：php, regex, url

要获取我使用此代码的域名：

```
<?php
  $myURL   = 'http://answers.yahoo.com/question/index?qid=20130406061745AAmovgl';
  $pattern = '/\w+\..{2,3}(?:\..{2,3})?(?:$|(?=\/))/i';
  if (preg_match($pattern, $myURL, $domain) === 1) {
    $domain = $domain[0];
  }
  $ndomain = "http://$domain";
  echo $ndomain;
?> 
```

但它会输出：`http://yahoo.com`
但是，我怎样才能`http://answers.yahoo.com`准确地输出这个子域。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T15:56:22.827

您应该改用该[`parse_url`](http://php.net/manual/en/function.parse-url.php)函数，因为它的存在就是为了做这件事。

```
echo parse_url( $url, PHP_URL_HOST ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T16:03:11.443

你可以`parse_url()`这样使用：

```
$urlData = parse_url($myURL);
$host = $urlData['host']; //domain + subdomain 
```

# mysql - 插入错误 1241

> ID：15852902
> 
> 赞同：1
> 
> 时间：2013-04-06T15:55:31.067
> 
> 标签：mysql, database, sql-insert

我有两个 MySQL INNODB 表 'student' 和 'instructor'。它们几乎在每一个方面都是相似的。我可以将任意记录添加到“学生”表中，但不能添加到“教师”表中。两个表具有相同的结构，以 ID 作为主键。

（ID varchar、name varchar、dept_name、varchar、field4 int）

我尝试过诸如

```
INSERT INTO instructor VALUES ('12345', 'name', 'computer science', 50000);
INSERT INTO instructor SET ID = 67890, name = 'Polson', dept_name = 'Bioinformatics', salary = 100 ON DUPLICATE KEY SET name = 'Polson', dept_name = 'Bioinformatics', salary = 100;    
INSERT INTO instructor (ID) VALUES ('12345');
INSERT INTO instructor (ID) VALUE ('12345'); 
```

而所有这些查询都适用于“学生”表。到底是怎么回事？

这是我的创建表语句。我的用户拥有完全权限。我应该使用任何状态查询来查找问题吗？谢谢！

```
CREATE TABLE `instructor` (
  `ID` varchar(5) NOT NULL DEFAULT '',
  `name` varchar(20) DEFAULT NULL,
  `dept_name` varchar(25) DEFAULT NULL,
  `salary` decimal(10,2) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `dept_name` (`dept_name`),
  CONSTRAINT `instructor_ibfk_1` FOREIGN KEY (`dept_name`) REFERENCES `department` (`dept_name`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1

CREATE TABLE `student` (
  `ID` varchar(10) NOT NULL DEFAULT '',
  `name` varchar(20) DEFAULT NULL,
  `dept_name` varchar(25) DEFAULT NULL,
  `total_credits` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `dept_name` (`dept_name`),
  CONSTRAINT `student_ibfk_1` FOREIGN KEY (`dept_name`) REFERENCES `department` (`dept_name`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1

CREATE TABLE department ( 
 dept_name varchar(25) NOT NULL DEFAULT '',
 building varchar(15) DEFAULT NULL,
 budget float(12,2) DEFAULT NULL, 
 PRIMARY KEY (dept_name) 
) ENGINE=InnoDB DEFAULT CHARSET=latin1 
```

其中包含一个记录 Bioinformatics | DBI | 1000000.00

# c++ - C++11 - 清除返回值语法和 decltype 关键字

> ID：15852922
> 
> 赞同：0
> 
> 时间：2013-04-06T15:57:30.987
> 
> 标签：c++, c++11

从[这里](http://www.cprogramming.com/c++11/c++11-auto-decltype-return-value-after-function.html)阅读，这个 C++11 代码对我来说似乎很奇怪：

```
template <typename Builder>
auto
makeAndProcessObject (const Builder& builder) -> decltype( builder.makeObject() )
{
    auto val = builder.makeObject();
    // do stuff with val
    return val;
} 
```

我有几个问题：

1) decltype(builder.makeObject()) 在执行实际调用之前是否再调用一次 makeObject 函数？

2）如果不是，并且在编译时一切都是已知的（所以它是一种增强的宏），为什么下面的语法无效，我需要新的返回值语法？

```
//WRONG    
template <typename Builder>
    decltype( builder.makeObject() )
    makeAndProcessObject (const Builder& builder)
    {
        auto val = builder.makeObject();
        // do stuff with val
        return val;
    } 
```

**[奖励问题 - 对答案奖励 +1]** 3) 在[这个](https://stackoverflow.com/questions/15831470/return-value-syntax-and-template-not-working/15831536)问题中，一个人问为什么他的代码没有编译，答案是成员函数 makeObject 缺少“const”说明符。我得到了答案，但不知道为什么需要 const。

什么给了以下声明

```
template <typename Builder>
auto
makeAndProcessObject (const Builder& builder) -> decltype( builder.makeObject() ) 
```

如果 const Builder& 对象引用具有 const makeObject 或非 const makeObject？decltype(builder.makeObject()) 部分必须只找出函数的返回类型是什么，它不应该关心函数是否修改了作为参数传递的对象！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T16:06:19.450

一般来说，C++ 中的东西在声明之前是不可用的。在您的示例中，您尝试在声明之前使用 builder ：

```
template <typename Builder>
    decltype( builder.makeObject() ) // using builder here
    makeAndProcessObject (const Builder& builder) // but builder isn't declared until here
    {
        auto val = builder.makeObject();
        // do stuff with val
        return val;
    } 
```

添加了函数返回类型的新语法来解决这个问题。

```
template <typename Builder>
auto // dummy return type, meaning we will give it later
makeAndProcessObject (const Builder& builder)  // declaring builder here
-> decltype( builder.makeObject() ) // using builder here -- no problem.
{
    auto val = builder.makeObject();
    // do stuff with val
    return val;
} 
```

至于你的额外问题：语言更简单地说你必须给 decltype 一个有效的表达式，而不是有另一组关于哪些参数对 decltype 有效的规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T16:00:34.150

1.  不。 `decltype`创建一个未评估的*上下文*，就像`sizeof`. 编译器只查看类型信息，仅查看其他信息。

2.  您不能在前导返回类型中使用参数。

    ```
    decltype( builder.makeObject() ) makeAndProcessObject (const Builder& builder) 
    ```

导致错误，因为`builder`是未知标识符。这就是创建尾随返回类型的原因。

*   在未评估的上下文中，类型信息很重要。`this`参数是否`const`是类型信息的一部分。如果`decltype`不进行重载解析，那将毫无用处。如果您从未见过基于`const`成员函数的 -ness 的重载，这可能没有意义，但是可能有两个具有相同名称和参数的函数，一个用于`const`对象视图，另一个用于非对象视图。`const`. 并且返回类型可以不同（实际上，它们通常由 a 不同`const`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T16:14:07.383

答案：

1) 不。`decltype`只在编译时计算表达式的类型，而不在运行时计算表达式。出于这个原因，`decltype`据说是一个“未评估的上下文”，因为它是`sizeof`并且`noexcept`。

2) 请注意，在此声明中

```
template <typename Builder>
decltype( builder.makeObject() )
makeAndProcessObject (const Builder& builder) 
```

编译器`builder`在看到它的声明之前先看到它`const Builder& builder`，而对于接受的声明，在确定返回类型的那一刻，编译器已经解析了它需要的所有信息。关键字告诉编译器，`auto`当有更多信息可用时，稍后将给出返回类型。

3）问题不在于声明

```
template <typename Builder>
auto
makeAndProcessObject (const Builder& builder) -> decltype( builder.makeObject() ) 
```

它实际上是函数体。更准确地说，以下行：

```
auto val = builder.makeObject(); 
```

因为`builder`是`const Builder&`唯一`const`可以调用的方法，`builder`并且最初`makeObject()`不是其中之一。然后用这个方法`const`解决了这个问题。

**更新：**在阅读了**Ben Voigt**的[回答](https://stackoverflow.com/a/15852954/1137388)之后。与我上面所说的相反，这个问题**也**存在于声明中，因为它使用`decltype(builder.makeObject())`了我用于函数体的相同参数也适用于这里。

# c# - 从不同的程序集获取上下文

> ID：15852924
> 
> 赞同：1
> 
> 时间：2013-04-06T15:57:43.833
> 
> 标签：c#, unity-container, signalr

在我的项目中，我有不同的程序集。

SignalR 集线器（和客户端 MVC4 文件）位于`Website`项目中。

我的集线器如下所示：

```
public class PredictHub : Hub
{
    private readonly IChat _chat;

    public PredictHub(IChat chat)
    {
        _chat = chat;
    }

    public void Chat(String message)
    {
        _chat.AddMessage(message);
    }
} 
```

在我的第二次大会`Business`中`IChat.cs`，`Chat.cs`现场直播：

```
public class Chat : IChat
{
    public void AddMessage(String message)
    {
        var context = GlobalHost.ConnectionManager.GetHubContext<ChatHub>();
    }
} 
```

但是因为`Chat.cs`在`Business`程序集中，该`ChatHub`指令是未知的，因为它没有被引用。

这怎么可能解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T01:11:54.260

只有当 SignalR 和 Chat 类在同一个进程中时，才能获取上下文。

# javascript - 无法使用 Angular 解决 Facebook JS 上的第二个承诺

> ID：15852926
> 
> 赞同：2
> 
> 时间：2013-04-06T15:57:57.347
> 
> 标签：javascript, facebook-graph-api, angularjs, facebook-javascript-sdk

我正在使用 Facebook JS 和 AngularJS 开发一个应用程序。首先，我登录，然后获取好友并将其显示在列表中。这段代码一切正常：

```
var friendsController = app.controller(
    "FriendsController",
    function FriendsController($scope, friendsData, $location, $routeParams)
    {
        $scope.friendsData = friendsData.data;
        $scope.params = $routeParams;

        $scope.onClickFriend = function(friendId)
        {
            $location.path("friends/friend:" + friendId);
        }
    }
);

friendsController.loadFriends = function($q, $rootScope)
{
    var deferred = $q.defer();

    FB.api("/me/friends?fields=name,picture.type(square)", function(response)
    {
        $rootScope.$apply(deferred.resolve(response));
    });

    return deferred.promise;
} 
```

现在我想在新视图中加载朋友的详细信息，所以我创建了一个新视图`routeProvider`用一个新控制器和一个新承诺创建了一个新规则。

```
var friendDetailController = app.controller(
    "FriendDetailController",
    function FriendDetailController($scope, friendData, $routeParams)
    {
        $scope.friendData = friendData;
        $scope.params = $routeParams;

        console.log(friendData);
    }
);

friendDetailController.loadFriend = function($q, $route, $rootScope)
{
    var deferred = $q.defer();
    var friendUrl = $route.current.params.friendId.split(":")[1] + "?fields=id,name,picture.type(large)";

    FB.api("/" + friendUrl, function(response)
    {
        $rootScope.$apply(deferred.resolve(response));
    });

    return deferred.promise;
} 
```

问题是我正在进入`loadFriend`但它似乎没有调用 FB.api，这真的很奇怪，因为它正在运行`FriendsController`，这基本上是相同的。

实际上，似乎是第二个未调用的调用，因为如果我反转调用（第一个`FriendDetail`，然后是朋友），`FriendDetail`则可以正常工作。

# python - 无法在 Jinja2 模板中显示自定义错误消息

> ID：15852927
> 
> 赞同：0
> 
> 时间：2013-04-06T15:58:06.547
> 
> 标签：python, html, flask, jinja2

我正在（使用 Flask、Python、Jinja2）中编写注册用户函数，我正在检查用户名（或电子邮件）是否已经存在，如果存在则在 TextField 下方显示错误。

注册码是：

```
@app.route('/register', methods=['GET', 'POST'])
def register():
    form = SignupForm()
    error = None
    if form.validate_on_submit():
      user_by_name = Users.query.filter_by(username=form.username.data).first()
      user_by_email = Users.query.filter_by(email=form.email.data).first()
      if user_by_name:
        error = 'Username already taken. Choose another'
        return render_template('register.html', form=form, error = error)
      elif user_by_email:
        error = 'Email already registered. Login or register with another Email'
        return render_template('register.html', form=form, error = error)
      else:
         #Add user details to DB logic
          return redirect(url_for('index'))
    return render_template('register.html', form=form, error = error) 
```

我在文件中定义了一个**宏**`util.html`

```
 {% macro render_field(field) %}
    <div class="control-group {% if field.errors %}error{% endif %}">
        {% if kwargs.get('label', True) %}
            {{ field.label(class="control-label") }}
        {% endif %}
        <div class="controls">
            {{ field(**kwargs) }}
            {% for error in field.errors %}
                <p class="help-block">{{ error }}</p>
            {% endfor %}
        </div>
    </div>
   {% endmacro %} 
```

并将此**宏**用作`register.html`：

```
{% from "util.html" import render_field %}

{% extends "base.html" %} 

{% block content %}
    <form method="post">
        {{ form.hidden_tag() }}
        {{ render_field(form.username, label=True, class="input-xlarge", autofocus="autofocus", errors=error) }}
        {{ render_field(form.password, label=True, class="input-xlarge", autofocus="autofocus") }}
        {{ render_field(form.confirm, label=True, class="input-xlarge", autofocus="autofocus") }}
        {{ render_field(form.email, label=True, class="input-xlarge", autofocus="autofocus", errors=error) }}        

        <button class="btn" type="submit">Register</button>
    </form>
{% endblock %} 
```

现在，当我`localhost:5000/register`使用重复的*用户名*或*电子邮件*地址测试它时，它根本不会显示任何错误（也不会将任何用户添加到数据库中，这没关系）。但是当我输入任何*错误的电子邮件*或*将任何字段留空*时，它会显示相应`error`的，但不会显示`error`我想使用`register`视图传递的内容。

是否缺少任何与 Jinja2 相关的逻辑？

以及为什么它的显示`errors`与空白字段或错误有关，`email`但与我尝试传递的重复项无关`username`。

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T23:43:48.060

好吧，你做错了:)

```
{% for error in field.errors %}
      <p class="help-block">{{ error }}</p>
{% endfor %} 
```

此宏在相应的 field.errors 中搜索错误

但是您传递了错误上下文变量，该变量未附加到该字段。

解决这个问题的正确方法是添加`def validate_user`到您的表单定义中并检查其中的所有内容。
如果出错 -> raise ValidationError(message)
请参见此处的示例： [WTForms 文档](http://wtforms.simplecodes.com/docs/0.6.1/validators.html#custom-validators)

使用这种方法，如果未验证，您的 validate_on_submit() 不应返回 True。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-23T19:12:03.630

您可以像这个示例代码文件一样闪烁错误：views.py

```
@app.route('/')
def index():
    # some checks which provided error        
    if error:
        flash(error)
    return render_template('template.html') 
```

文件模板.html

```
{% for category, msg in get_flashed_messages(with_categories=true) %}
    <div class="category">{{ msg|safe }}</div>
{% endfor %} 
```

# java - 不能从 eeyore 的静态上下文中引用非静态方法？

> ID：15852928
> 
> 赞同：0
> 
> 时间：2013-04-06T15:58:09.140
> 
> 标签：java

我有一个名为`ChristopherRobin`（的子类`HundredAcreWoodsCharacter`）的类，其中有一个名为 的方法`FindTail()`。

在另一个类`Eeyore`（也是的子类`HundredAcreWoodsCharacter`）中，我想尝试`FindTail()`使用`ChristopherRobin`. 我不知道该怎么做。我试过

```
 if (ChristopherRobin.hasTail()) 
```

但这给了我错误：

```
non-static method hasTail() cannot be referenced from a static context 
```

如果有人可以提供帮助，那就太好了，谢谢。

此外，如果值得一提的是`GridWorld`（来自 AP 计算机科学案例研究）。`HundredAcreWoodsCharacter`是 的子类`Critter`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:00:09.977

*您正在调用class 上*的非静态方法，这是无法完成的。您需要先创建一个 ChristopherRobin 对象，然后调用该对象的方法。

```
// create the ChristopherRobin object and put in the christopherRobin variable
ChristopherRobin christopherRobin = new ChristopherRobin();

// now call the method on the *object* held by the variable
if (christopherRobin.hasTail()) {
  // do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:29:55.860

您可能需要重写 act() ，或者，因为这是 Critter 的子类，所以重写 act() 调用的方法之一。例如，如果有尾巴会影响此 Critter 的移动方式，那么您将覆盖`getMoveLocations()` 以下是如何使用 hasTail 的示例：

```
//Critters with tails can only move forward. 
public ArrayList<Location> getMoveLocations() {
   if(this.hasTail()) {
      ArrayList<Location> listOfOne = new ArrayList<Location>();
      listOfOne.add(getLocation.getAdjacentLocation(this.getDirection()) );
      return listOfOne;
   }
   else
      return super.getMoveLocations();
} 
```

# php - Zend 的自动加载器问题

> ID：15852930
> 
> 赞同：2
> 
> 时间：2013-04-06T15:58:12.813
> 
> 标签：php, zend-framework

我是 Zend 的新手，目前正在尝试使用 Swift Mailer 作为我的消息传递系统。但是，我不断收到此错误：

```
Fatal error: Class 'Adviser\Controller\Swift_Message' not found 
```

我做了一些研究，并认为这可能是自动加载器的问题。所以我添加了以下两行：

```
$autoloader = new StandardAutoloader();
$autoloader->registerNamespace('Swift_','/Applications/MAMP/htdocs/zsa/Swift-4.3.0/lib/classes/Swift'); 
```

我仍然收到错误消息。我还相应地将路径设置为“swift_required.php”

require_once '/Applications/MAMP/htdocs/zsa/Swift-4.3.0/lib/swift_required.php';

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:02:00.720

看起来 Swift 没有命名空间，所以如果可用的话，你应该使用 $autoloader->registerPrefix。

使用[http://getcomposer.org/](http://getcomposer.org/)也是一个不错的选择。

# java - notifyAll 操作的复杂性

> ID：15852935
> 
> 赞同：4
> 
> 时间：2013-04-06T15:58:45.713
> 
> 标签：java, multithreading, concurrency

我不明白 Java Concurrency in Practice 书中的以下片段：

*当只有一个线程可以取得进展时使用 notifyAll 是低效的 - 有时有点，有时很严重。如果有 10 个线程在条件队列上等待，调用 notifyAll 会导致每个线程都醒来并争夺锁；然后他们中的大多数或全部会马上回去睡觉。这意味着每个事件都会进行大量上下文切换和大量争用锁获取，从而使（可能）单个线程能够取得进展。（在最坏的情况下，使用 notifyAll 会导致 O(n ² ) 唤醒，其中 n 就足够了。）*

示例代码在清单 14.6 中：

```
@ThreadSafe
public class BoundedBuffer<V> extends BaseBoundedBuffer<V> {
    // CONDITION PREDICATE: not-full (!isFull())
    // CONDITION PREDICATE: not-empty (!isEmpty())

    public BoundedBuffer(int size) { super(size); }

    // BLOCKS-UNTIL: not-full
    public  synchronized void put(V v) throws InterruptedException {
        while (isFull())
            wait();
        doPut(v);
        notifyAll();
    }

    // BLOCKS-UNTIL: not-empty
    public  synchronized V take() throws InterruptedException {
        while (isEmpty())
            wait();
        V v = doTake();
        notifyAll();
        return v;
    }
} 
```

例如，我们可以有以下事件序列：

1.  两个消费者线程试图从缓冲区中获取一个对象，缓冲区是空的，所以它们被挂起。
2.  10 个生产者将 10 个对象放入缓冲区，缓冲区容量为 10。
3.  100001 个生产者尝试将 100001 个对象放入缓冲区，缓冲区已满，因此它们被挂起。
4.  第一个消费者从缓冲区中获取一个对象并调用 notifyAll。
5.  生产者将对象放入缓冲区并调用 notifyAll，缓冲区已满。

现在只有一个线程可以取得进展——消费者线程。我们还有100000个生产者，他们无法进步。

我不明白为什么在最坏的情况下会有 O(n ² ) 唤醒，在可以取得进展的线程被唤醒之前。

我认为最坏的情况是以下序列

1.  所有线程都被唤醒（因为 notifyAll）。我们“使用”了 O(n) 唤醒。
2.  一个生产者线程获得锁，其他线程被挂起。生产者线程无法取得进展，因此它被挂起并释放锁。
3.  现在*只有一个*生产者线程被唤醒，因为使用了不同的机制（线程恢复执行，因为它获得了锁——但这次*没有*调用 notifyAll）。我们仅“使用” O(1) 唤醒。
4.  第二个生产者无法取得进展，所以它被挂起并释放锁。
5.  所有其他等待的生产者都会发生类似的事件。
6.  最后，可以进行的线程（消费者线程）被唤醒。

我认为我们“使用”了 O(n) + O(n)*O(1) = O(n) 唤醒。

书中有错误，还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T16:35:53.293

有东西被放入队列 n 次。“n 次唤醒就足够了”意味着理想情况下，我们希望在生产者将某些东西放入缓冲区时通知一个消费者，例如，因此会有 n 个通知，甚至更好的是它们都没有竞争。但相反，所有等待锁的线程，包括所有生产者（减 1，执行 put 的线程）和所有消费者（无论如何都在等待的线程），每次在队列中删除时都会收到通知，他们所有人都为锁定而战，调度程序选择了一个胜利者。（而且我们甚至没有考虑所选线程必须等待的情况，这只是一个细节。）所以有 n 次 notifyAll 被调用，每次 put 一次，每个 notifyAll 唤醒多个生产者和多个消费者，这就是他们得到 O(n²）唤醒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-09T16:47:59.347

让我们有 n 个消费者线程和 n 个生产者线程，并且缓冲区是空的（完整缓冲区的示例类似）。所有线程都处于准备运行状态（调度程序可以选择任何运行）。

如果任何消费者运行 - 它将进入等待状态。如果任何生产者运行 - 它将成功并调用 notifyAll()。

最大化 wait() 调用（和唤醒）数量的情况：

```
Example for 5 producer and 5 consumer
+--------------+-------------------------------------+
| C-C-C-C-C-P  | all consumers move to waiting state |
+--------------+-------------------------------------+
| C*-C-C-C-C-P | 5 wake ups                          |
+--------------+-------------------------------------+
| C*-C-C-C-P   | 4 wake ups                          |
+--------------+-------------------------------------+
| C*-C-C-P     | 3 wake ups                          |
+--------------+-------------------------------------+
| C*-C-P       | 2 wake ups                          |
+--------------+-------------------------------------+
| C*           | 1 wake up                           |
+--------------+-------------------------------------+

P - producer
C - consumer
C* - consumer that succesfully finish take() method ( without wait() invoking) 
```

让我们数数：5 + 4 + 3 + 2 + 1 = 15

对于 n 个生产者和 n 个消费者：n + (n-1) + (n-2) + (n-3) + ... + 1 = 1 + 2 + 3 + 4 + ...+ n = 前 n 个元素的总和[等差数](https://en.wikipedia.org/wiki/Arithmetic_progression)列= n * (1 + n) /2 = (n + n^2) / 2 → O(n^2)

# c - 实现换行的不同方法

> ID：15852936
> 
> 赞同：0
> 
> 时间：2013-04-06T15:58:46.003
> 
> 标签：c

我正在尝试使用行长来换行并一次打印一行（行长），而不是将整行打印为一个块。我认为在每行长度添加 '\n' 字符就可以完成这项工作并编写了以下代码。

```
void wrap(char *tok, int len)
{
  int i, h;
  char *ss = tok;
  for (h = linelen; h < (len + 1); (h + linelen))
    {
      ss[h] = '\n';
      printf("%d\n", h);
      h += linelen;
    }
  char *token = strtok(ss, "\n");
  while (token)
    {
        printf("%s\n", token);
        token = strtok(NULL, "\n");
    }
} 
```

但是这段代码似乎不起作用。我还有哪些其他方法可以实现换行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:14:47.067

从这篇文章中被盗：[是否可以只打印出 C 字符串的某个部分，而不制作单独的子字符串？](https://stackoverflow.com/questions/7780809/is-it-possible-to-print-out-only-a-certain-section-of-a-c-string-without-making)

```
#include <stdio.h>
#include <string.h>

int main(void) {

    char *str = "helo world";
    int total_len = strlen(str);
    int single_len = 3;
    for (int i = 0; i < total_len; i += single_len) {
        /* print at most first three characters (safe) */
        printf("%.*s\n", single_len, str + i);
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T16:13:28.397

您不需要更改原始字符串，只需要在必要时打印出额外的换行符：

```
void wrap(char *str, int len, int linelen) {
    int i;
    for (i = 0; i < len; ++i) {
        printf("%c", str[i]);
        if (i > 0 && i % linelen == 0) {
            printf("\n");
        }
    }
} 
```

如果您的原始字符串中可能包含换行符，您可以跟踪当前行的长度，以便正确换行下一行：

```
void wrap(char *str, int len, int linelen) {
    int i, currlen;
    for (i = 0, currlen = 0; i < len; ++i, ++currlen) {
        printf("%c", str[i]);
        if (str[i] == '\n') {
            currlen = 0;
        }
        if (currlen > 0 && currlen % linelen == 0) {
            printf("\n");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T16:19:49.010

您的程序似乎想要分解`tok`成多个`linelen`字节，但您似乎并不关心要替换什么字符来实现这一点。这会使您的`wrap`例行程序丢弃原始输入中的信息。然后您调用`strtok`一次打印一个令牌，但损坏已经造成。

相反，我相信你应该重组你的代码，以便`strtok`用于查找令牌，然后计算打印当前令牌是否会让你超过你`linelen`。如果是这样，您打印一个换行符，打印令牌，并计算您当前运行的行长度，就像您刚刚打印的令牌的长度一样。您在同一行上打印的每个标记都会增加运行行的长度。

```
void wrap(char *tok, int linelen)
{
  int len = 0;
  char *ss = tok;
  char *token = strtok(ss, " \t\n");
  while (token) {
    int tokenlen = strlen(token);
    if (len && (len + tokenlen + 1 > linelen)) {
      puts("");
      len = 0;
    }
    if (tokenlen) {
      printf("%s%s", len ? " " : "", token);
      len += 1 + tokenlen;
    }
    token = strtok(0, " \t\n");
  }
  if (len) puts("");
} 
```

您的原始实现没有考虑如何处理制表符。如果将所有线性空白字符添加到`strtok`定界符，则所有制表符都将被视为标记分隔符，并且在包装输入时将被删除。正确处理制表符会使您的运行行长度计算复杂化，因为制表符会导致行长度跳转到下一个制表位。

# java - 当我使用break时从“for循环”获取字符串

> ID：15852943
> 
> 赞同：2
> 
> 时间：2013-04-06T15:59:22.513
> 
> 标签：java, loops, break, minecraft, bukkit

我有以下代码块（它是 bukkit 服务器的插件 [minecraft 游戏]）

```
 msg = lang.getString("Kick", "null"); //default msg.
            msg = msg.replace("\\n", "\n");
            int i = 0;
            Player target = null;
            for (i = 0; i < args.length; i++) {
                if (args[i].equalsIgnoreCase("-")){
                    StringBuilder sb = new StringBuilder();
                    for (int ii = i+1; ii < args.length; ii++) {
                            sb.append(args[ii]).append(" ");
                    }
                    msg = sb.toString().trim(); // - that msg I need
                    break;
                } 
                target = (Bukkit.getServer().getPlayer(args[i]));
                target.kickPlayer(msg); // <--- here 
```

如何从循环中获取“msg”字符串。
代码必须像这样工作：
播放器类型命令 /command target1 target2 - 原因
然后代码：
Get target1
Get target2
Get target3 但 target3 是“-”。那么'-'之后的每个参数都是原因（msg）。（然后我必须打破循环以获取玩家）
并用原因（msg）踢目标1。用原因（msg）踢目标2。
但是如果玩家输入 /command target1 target2... target999
然后用默认原因踢它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:11:30.213

首先，在这种情况下，您通过论点的方式并不是最好的。改为使用`for (String argument : args)`。还有一件事：你不能在`break`.

现在到你的问题。您想检查参数并检查是否`-`存在。之后的所有`-`内容都应添加到`String`. 该字符串具有默认值。如果有一个`-`默认值应该被删除，该值应该是之后的所有内容`-`。

```
boolean read = false;
String msg = "default message";
List<String> players = new ArrayList<String>();

for (String argument : args) {
    if (!read && !argument.equalsIgnoreCase("-")) {
        players.add(argument);
    } else if (!read && argument.equalsIgnoreCase("-")) {
        read = true;
        msg = "";
    } else {
        msg += argument;
    }
}

for (String player : players) {
    Player target = Bukkit.getServer().getPlayer(player);
    target.kickPlayer(msg);
} 
```

为此，您需要一个布尔值、消息字符串和一个应保存所有目标名称的列表。此代码遍历所有参数。

如果布尔值为 false 且参数不是`-`，则参数将保存在玩家列表中。否则，如果布尔值为 false，但参数为`-`布尔值，则布尔值被设置为 true，并且字符串的默认值被删除。否则（参数是消息的一部分）参数附加到字符串。

毕竟还有另一个循环，插件会遍历添加到列表中的所有玩家并踢他们向他们显示输入的消息。

干杯!

# jquery - 使用 jQuery，在悬停时添加 class="hover"，然后将元素添加到悬停的元素

> ID：15852944
> 
> 赞同：0
> 
> 时间：2013-04-06T15:59:25.957
> 
> 标签：jquery, onmouseover

我希望我有几个 div [最多 10 个]，我想自动添加其中一个并在特定元素悬停时显示它，我想我不能将它们一一添加到元素中并一一隐藏，并使用再次显示它们`:hover`

例子：

```
<div class="info1">extra info1</div> <!-- Hidden by deffult -->
<div class="info2">extra info2</div> <!-- Hidden by deffult -->
<div class="info3">extra info3</div> <!-- Hidden by deffult -->
<div class="info4">extra info4</div> <!-- Hidden by deffult -->

<div class="bla">I want info #1</div>
<br />
<div class="bla">I want info #2</div>
<br />
<div class="bla hovered">I want info #3</div> <div class="info3">extra info3</div> <!-- there wasn't info3, but its appeared because of the hovering -->
<br />
<div class="bla">I want info #4</div>
<br /> 
```

当我创建这个[[here]](http://jsbin.com/uduziz)时我失败了，因为我不需要 css 的帮助，正如你所看到的，`extra span`第一次加载时它没有隐藏（换句话说，它应该在第一次加载时隐藏，并且只在悬停时出现）。

我认为当我尝试使用失败的尝试时会更好`onmouseover="this.className='`，`.appendTo`但我不知道将它们一起使用的正确方法。

任何想法，建议？

更新：伙计们，我非常感谢您对`:hover`需要放置和隐藏`span`内部的解决方案的帮助`div`。但我需要更灵活、更专业的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:03:58.147

将跨度添加到每个 div 以开始。隐藏它们的CSS是：

```
`div.bla>span {display:none}` 
```

使用 jquery：

```
$('div.bla').hover(function() {
  $('span', this).show();
}, function() {
  $('span', this).hide();
}); 
```

或者，您可以通过 html 和 css 执行此操作而无需任何 javascript，尽管我建议您将 div 更改为超链接，但这不是必需的：

[http://jsfiddle.net/lucuma/ujQ5B/](http://jsfiddle.net/lucuma/ujQ5B/)

```
<a class="blah">link<span>something</span></a>

<div class="blah">link<span>something</span></div>

a.blah>span {display:none}
a.blah:hover>span {display:inline}

div.blah>span {display:none}
div.blah:hover>span {display:inline} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:07:28.170

将跨度添加到 div：

```
<div class="bla">I want info #1<span class="info">extra info</span></div>
<div class="bla">I want info #2<span class="info">extra info</span></div>
<div class="bla">I want info #3<span class="info">extra info</span></div>
<div class="bla">I want info #4<span class="info">extra info</span></div> 
```

和 CSS 做到了：

```
.info {display: none;}
.bla:hover .info {display: inline} 
```

[**小提琴**](http://jsfiddle.net/YmYYc/)

**编辑：**

使用索引来定位正确元素的 javascript 函数可能是这里的方法，如下所示：

```
$(function() {
    var elems = $('[class^="info"]').hide().css({
        position: 'absolute',
        top: 0, 
        left: 0,
        height: 30,
        width: 100
    });

    $('.bla').on('mouseenter mouseleave', function(e) {
        var i = $(this).index('.bla');
        elems.eq(i).toggle(e.type=='mouseenter');
    });
}); 
```

[**小提琴**](http://jsfiddle.net/g7tcU/)

# javascript - 没有 CSS3 变换的 CSS/Javascript/Jquery 3D 旋转动画？

> ID：15852946
> 
> 赞同：1
> 
> 时间：2013-04-06T15:59:43.887
> 
> 标签：javascript, jquery, css

我想以 3D 类型的方式翻转对象，但我希望动画可用于 IE8+、Firefox、Opera 等。显然只是水平折叠它是行不通的，因为它不会正确倾斜图像。有没有办法只扭曲图像的一部分，所以“更近”的部分会更宽，而“更远”的部分会更薄？

谢谢！

# c# - 将字体导入 Windows Server 进程

> ID：15852948
> 
> 赞同：1
> 
> 时间：2013-04-06T15:59:43.947
> 
> 标签：c#, image-processing, fonts, gdi

我有一项旨在进行图像处理的服务。其中一项任务是在图像上覆盖字符串，然后将其发送到程序并显示。

我无法在位图图像上覆盖文本，有人可以帮忙吗？

我正在尝试使用：

```
PrivateFontCollection fonts = new PrivateFontCollection();
public static FontFamily LoadFontFamily(string fileName, out PrivateFontCollection fontCollection)
{
    fontCollection = new PrivateFontCollection();
    fontCollection.AddFontFile(HostingEnvironment.ApplicationPhysicalPath + '/' + fileName);
    return fontCollection.Families[0];
}

FontFamily family = LoadFontFamily("arial.ttf", out fonts);
Font font = new Font(family, 20);

using (Graphics g = Graphics.FromImage(bitmap))
{
    g.DrawString("text", font, new SolidBrush(GetColorFromHexString(foreground)), new PointF(10F, 10F));
} 
```

根据[此页面](http://blog.andreloker.de/post/2008/07/03/Load-a-font-from-disk-stream-or-byte-array.aspx)上的信息。

由于该服务不知道“Arial”是什么 - 它显然失败了。我已将 .ttf 字体作为资源包含在服务中，并将构建内容设置为“始终复制”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:49:53.170

Arial 是最古老的 Windows 字体之一，长期以来，它作为所有 Windows 操作系统版本（包括 Windows 服务器）的默认安装的一部分提供。所以没有理由：

```
 Font font = new Font("Arial", 20); 
```

不应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T04:39:29.977

Wcf 与字体无关，所以我建议删除这个标签。

我没有错误，但是您的图像不包含您的字符串-您的逻辑无效。

我建议以下步骤：

1.  确保此代码适用于常规 winforms 项目
2.  尝试将此逻辑重新分解为单独的 dll（类库，而不是 win 表单）。如果您有 Resharper 之类的工具 - 它会添加所有必需的参考。
    *此时 - 您的代码应该在所有情况下都可以工作，所以*
3.  将其移回以通过您的 wcf 服务公开。

# c# - “executenonquery 连接属性尚未初始化”

> ID：15852958
> 
> 赞同：3
> 
> 时间：2013-04-06T16:02:03.287
> 
> 标签：c#, asp.net, sql, sql-server, sql-update

```
SqlConnection cn = new SqlConnection(@"DataSource=dbedu.cs.vsb.cz\SQLDB;Persist Security Info=True;User ID=*****;Password=*******");

SqlCommand cmd = new SqlCommand();
string finish = DropDownListFi.SelectedValue;
cn.Open();
String Name = Request.QueryString["Name"];
cmd.CommandText = "UPDATE navaznost_ukolu SET finish=@finish where Name='" + Name + "'";
cmd.Parameters.Add(new SqlParameter("@finish", finish));
cmd.ExecuteNonQuery();
cmd.Clone(); 
```

错误信息

> ***Executenonquery 连接属性尚未初始化。***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T16:03:56.167

您当前代码的问题是您没有设置对象的`Connection`属性`SqlCommand`。试试这个，

```
SqlCommand cmd = new SqlCommand();
cmd.Connection = cn; 
```

并且您还必须参数化在`name`

```
String Name = Request.QueryString["Name"];
cmd.CommandText = "UPDATE navaznost_ukolu SET finish=@finish where Name=@name";
cmd.Parameters.Add(new SqlParameter("@finish", finish));
cmd.Parameters.Add(new SqlParameter("@name", Name)); 
```

完整代码

```
string finish = DropDownListFi.SelectedValue;
String Name = Request.QueryString["Name"];
string connStr = @"DataSource=dbedu.cs.vsb.cz\SQLDB;
                   Persist Security Info=True;
                   User ID=*****;
                   Password=*******";
string sqlStatement = @"UPDATE navaznost_ukolu 
                        SET    finish = @finish 
                        WHERE  Name = @Name";

using (SqlConnection conn = new SqlConnection(connStr))
{
    using(SqlCommand cmd = new SqlCommand())
    {
        cmd.Connection = conn;
        cmd.CommandText = sqlStatement;
        cmd.CommandType = CommandType.Text;

        cmd.Parameters.Add(new SqlParameter("@finish", finish));
        cmd.Parameters.Add(new SqlParameter("@name", Name));

        try
        {
            conn.Open();
            cmd.ExecuteNonQuery();
        }
        catch(SqlException e)
        {
            // do something with the exception
            // do not hide it
            // e.Message.ToString()
        }
    }
} 
```

为了正确编码

*   `using`用于 propr 对象处理的use语句
*   使用`try-catch`块来正确处理对象

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T16:05:05.740

该错误是不言自明的，您尚未将连接分配给命令。您可以使用构造函数：

```
using(var cn = new SqlConnection(@"DataSource=dbedu.cs.vsb.cz\SQLDB;Persist Security Info=True;User ID=*****;Password=*******"))
using(var cmd = new SqlCommand(
    "UPDATE navaznost_ukolu SET finish=@finish where Name=@Name"
    , cn))
{
   string finish = DropDownListFi.SelectedValue;
   cn.Open();
   String Name = Request.QueryString["Name"];
   cmd.Parameters.AddWithValue("@finish", finish);
   cmd.Parameters.AddWithValue("@Name", Name);
   cmd.ExecuteNonQuery();
} 
```

请注意，我还为`Name`and`using`语句使用了 sql 参数，以确保任何实现`IDisposable`都得到处理，即使在出现异常的情况下也是如此。这也将关闭连接。

# java - 加载图像以设置背景时出错

> ID：15852959
> 
> 赞同：1
> 
> 时间：2013-04-06T16:02:18.240
> 
> 标签：java, image

我正在尝试加载图像并设置为背景，但在 selectionPanel 方法中出现错误“无法加载背景图像”。

图像处理似乎出了点问题，但我不知道是什么。

```
public class selectionPanel extends JPanel
{
  //Variable with the name of our pic
  private static final String path = "selbkgrnd.jpg";
  private ImageIcon imageIcon;
  private Dimension windowSize;
  private int imageHeight;
  private int imageWidth;

  protected selectionPanel()
  {

    this.imageIcon = new ImageIcon("selbkgrnd.jpg"); //Save image to imageIcon
    Image image = this.imageIcon.getImage();
    this.imageWidth = image.getWidth(null);
    this.imageHeight = image.getHeight(null);
    if ((this.imageWidth == -1) || (this.imageHeight == -1)) //Check if background image is succesfully loaded
    {
      JOptionPane.showMessageDialog(JOptionPane.getDesktopPaneForComponent(this), "Could not load background image", "Fatal error!", 0);

      System.exit(-1);
    }
    this.windowSize = new Dimension(this.imageWidth, this.imageHeight);
  }

  protected void startScreen()
  {
    setOpaque(false);
    setSize(this.windowSize);
  }

  protected int getImageHeight()
  {
    return imageHeight;
  }

  protected int getImageWidth()
  {
    return imageWidth;
  }

  @Override
  public void paintComponent(Graphics g)
  {
    g.drawImage(this.imageIcon.getImage(), 0, 0, null);
    super.paintComponent(g);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:04:10.350

通常这是由于您在错误的位置查找图像文件。尝试使用图像的完整路径，或者是相对于用户目录的路径，可以通过以下方式找到：

```
System.out.println("user directory: " + System.getProperty("user.dir")); 
```

**编辑**
你状态：

> 谢谢它使用完整路径，但是如果它在源代码文件夹中，它不应该只使用图像名称吗？

不，Java 将再次查找与用户目录相关的文件。

但是请注意，如果图像位于类文件目录或与此相关的目录中，并且您从中制作了一个 jar 文件并需要访问图像，那么您将无法使用文件。您需要将图像作为*资源*获取，并且相对路径会有所*不同*，因为它与 user.dir 无关，而是与类文件的位置相关。

# java - 打印平均数字

> ID：15852960
> 
> 赞同：0
> 
> 时间：2013-04-06T16:02:25.813
> 
> 标签：java

我是java新手。所以我正在练习一些问题。但我偶然发现了这个。我知道我非常接近正确的答案，我正在考虑设置一个其他条件，如果它小于0.it会打破. 尝试在这里和那里插入它，但它无法正常工作。

编写一个名为 printAverage 的方法，该方法接受控制台的 Scanner 作为参数，并反复提示用户输入数字。一旦键入任何小于零的数字，就会显示所有键入的非负数的平均值。将平均值显示为双精度数，不要四舍五入。例如，对您的方法的调用可能如下所示：

```
Scanner console = new Scanner(System.in);
printAverage(console);
The following is one example log of execution for your method:

Type a number: 7
Type a number: 4
Type a number: 16
Type a number: -4
Average was 9.0
If the first number typed is negative, do not print an average. 
```

我的尝试：

```
 public static void printAverage(Scanner console){

    int num=0;
    double sum=0;
    double avg=0;
    int counter=0;
    while(num>=0){
   System.out.print("Type a number: ");
     num=console.nextInt();

        if(num>0){
     sum+=num;
     counter++;
    avg=sum/counter;
        }

    }
    System.out.println("Average was " +  avg);

} 
```

抱歉。问题不清楚。例如，当我输入 0 0 1 1 -2 作为数字时。我应该得到

输入数字：0 输入数字：0 输入数字：1 输入数字：1 输入数字：-2 平均值为 0.5

但我得到

输入数字：0 输入数字：0 输入数字：1 输入数字：1 输入数字：-2 平均值为 1.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:09:02.597

尝试这个：

```
do {
    System.out.print("Type a number: ");
    num=console.nextInt();
    if (num >= 0) {
        sum+=num;
        counter++;
    }
} while (num >= 0);
if (counter > 0) {
    avg = sum / counter;
    System.out.println("Average was " +  avg);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:09:20.660

> 我正在考虑设置一个 else 条件，如果它小于 0.it 就会中断。尝试在这里和那里插入它，但它无法正常工作。

如果你把`else`或不放都无关紧要，因为`while()`, 正在处理打破计算

也因为`else`部分是循环中的最后一条语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:11:18.513

如果第一个数字是负数，要禁止打印，只需在`if`周围添加一个`System.out.println()`：

```
if (counter > 0) {
    System.out.println("Average was " +  avg);
} 
```

另外，现有的 有一个错误`if`，应该是

```
 if(num>=0){ 
```

# mysql - 将自定义数据库导入wordpress并保留帖子ID

> ID：15852961
> 
> 赞同：1
> 
> 时间：2013-04-06T16:02:36.447
> 
> 标签：mysql, database, wordpress, import, posts

我需要将旧数据库导入 WordPress。容易吧？没那么容易，我需要保持相同的帖子 ID，因为我使用包含帖子 ID 的自定义永久链接结构。

例如：/%postname%+id-%post_id%.html。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T19:17:24.480

假设这两个都是 WordPress 数据库，那么处理这个问题的最简单方法是使用`mysqldump`创建导出，然后针对您的新数据库执行生成的 SQL 文件。默认情况下，它将导出所有表，因此如果您只需要其中一些表，则需要明确指定它们。WordPress 帖子的“重要”表格：

*   `wp_posts`- 帖子
*   `wp_postmeta`- 发布元值
*   `wp_term_relationships`- 分类的帖子
*   `wp_term_taxonomy`- 分类法
*   `wp_terms`- 实际标签和类别值

将数据库导出到 SQL 文件，适当地替换 USERNAME、PASSWORD 和 DATABASE。这将删除/创建/填充表，因此如果您只想要数据，请使用该`–no-create-info`选项。

```
mysqldump -u USERNAME -pPASSWORD DATABASE > dump.sql 
```

然后将`dump.sql`文件导入新数据库：

```
mysql -u USERNAME -pPASSWORD NEW_DATABASE < dump.sql 
```

将维护所有数据库 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:30:14.787

在您的旧数据库中找出您最旧的（和最小的 id ）。假设是 45。

从全新安装的 WP 开始并删除“hello world”帖子，因此 post、post_meta 和 term_relationships 表与“hello world”帖子没有任何关系

截断您的帖子表并将起始值设置为 45，以便输入的第一条记录的 ID 为 45。

开始您的迁移，一次一条记录

在迁移旧数据库记录之前，计算该记录与上一个记录之间的差异。例如，如果您的下一篇文章的 ID 为 46，则 46-45=1。1 好，所以正常迁移。（正常运行 wp_insert ）当您发现差异不是 1 时，然后根据需要创建尽可能多的虚拟记录。例如，如果记录是 49，则 49-45=4。这意味着，您需要 3 个虚拟记录。因此，运行 3 wp_inserts，并在帖子标题中使用短语“to be deleted”。然后进行第 49 条记录迁移。

你一直这样下去，直到你达到你最大（最年轻）的记录。

然后只需删除所有标题为“待删除”的记录。但始终使用 WP api。以便为您维护跨表的关系完整性。

# c - 如何在 C 中创建没有缓冲区的管道？

> ID：15852965
> 
> 赞同：0
> 
> 时间：2013-04-06T16:03:16.010
> 
> 标签：c, buffer, posix, pipe

我想创建没有缓冲区的管道，但我发现只有`setbuf()`一个只适用于文件描述符的函数。你能推荐一些类似的管道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T16:13:04.677

如果您使用 来创建管道[`pipe`](http://linux.die.net/man/2/pipe)，那么除了系统缓冲区之外，您已经拥有未缓冲的文件描述符。

[`setbuf`](http://linux.die.net/man/3/setbuf)如果您使用普通的系统文件描述符，则仅适用于 stdio 文件并且不会干扰。

# c# - 继承分支独有的共享数据成员？

> ID：15852967
> 
> 赞同：1
> 
> 时间：2013-04-06T16:03:39.857
> 
> 标签：c#, oop, inheritance

我有以下情况。有没有一种简单的方法来设计它，以便在 ChildClass1 的所有实例之间共享数据成员样本，并与 ChildClass2 的所有实例共享它的单独实例？

```
abstract class BaseClass{
int sample = 0;
}

class ChildClass1: BaseClass{
}

class ChildClass2: BaseClass{
} 
```

我希望制作以下内容

```
ChildClass1 a = new ChildClass1();
ChildClass1 b = new ChildClass1();
ChildClass2 c = new ChildClass2(); 

a.sample = 10;

//a.sample = 10, b.sample = 10, c.sample = 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:25:42.553

也许这样做，你想要什么：

```
public abstract class BaseClass
{
    public abstract int Sample { get; set; }
}  

public class ChildClass1 : BaseClass
{
    private static int mSample = 0;
    public override int Sample 
    { 
        get { return mSample; }
        set { mSample = value; }
    }
}

public class ChildClass2 : BaseClass
{
    private static int mSample = 0;
    public override int Sample 
    { 
        get { return mSample; }
        set { mSample = value; }
    }
}

class Program
{
    static void Main(string[] args)
    {
        var a = new ChildClass1();
        var b = new ChildClass1();
        var c = new ChildClass2();

        a.Sample = 10;

        Console.WriteLine(a.Sample); // 10
        Console.WriteLine(b.Sample); // 10
        Console.WriteLine(c.Sample); // 0
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T17:55:29.567

您可能想查看[单例模式](http://msdn.microsoft.com/en-us/library/ff650316.aspx)。

创建一个作为单例的类来保存共享数据。然后让所有三个类都引用单例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:22:10.850

正如我在评论中所说，我认为您的设计存在固有缺陷，但为了提供答案，您可以这样实现：

```
abstract class BaseClass<TDERIVED>
{
    private static Dictionary<Type, int> sampleDictionary_ = new Dictionary<Type, int>();

    public BaseClass()
    {
    }   // eo ctor

    public int Sample
    {
        get
        {
            return sampleDictionary_.ContainsKey(typeof(TDERIVED)) ? sampleDictionary_[typeof(TDERIVED)] : 0;
        }
        set
        {
            sampleDictionary_[typeof(TDERIVED)] = value;
        }
    }
}

class ChildClass1 : BaseClass<ChildClass1>
{
}

class ChildClass2 : BaseClass<ChildClass2>
{
} 
```

这有一个额外的好处，如果您添加任何其他子类，它们将获得自己的响应版本。请注意，这*不是*线程安全的，因此如果您确实选择了此解决方案并希望在多线程环境中使用它，您可能需要放置一些线程安全代码。

# java - 将两个字符串与布尔值进行比较？

> ID：15852978
> 
> 赞同：1
> 
> 时间：2013-04-06T16:04:43.263
> 
> 标签：java, boolean, equals

我正在尝试这个代码编写练习，我很迷茫！

练习是：

完成以两个字符串和一个布尔值作为输入的方法。如果布尔值为真，则此方法比较前两个字符串，忽略大小写考虑（大写/小写）。如果两个字符串的长度相同，则认为它们相等而忽略大小写，并且两个字符串中的相应字符是相等的忽略大小写。

如果布尔值为 false，则此方法应比较两个字符串，如果第一个字符串表示与第二个字符串相同的字符序列，则返回 true，否则返回 false。

注意：`compareTwoStrings("HELLO", "", false)`应该返回false。

这是我的尝试：

```
public boolean compareTwoStrings (String a, String b, boolean isIgnoreCase) 
{ 
    if (a.equalsIgnoreCase(b)) {
        return (isIgnoreCase==true);
    }
    else if (a.equals(b)) {
       return (isIgnoreCase==false);
    }
} 
```

它甚至没有编译，但即使它编译了，我敢肯定它不会工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T16:11:40.813

你倒着做。主题说：如果布尔值是真的，那么做这个，否则，那么做那个。因此，您应该以相同的方式对其进行编程：

```
if (isIgnoreCase) {
    return ...
}
else {
    return ...
} 
```

剩下的留作练习。你应该能够自己弄清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T16:13:21.913

我认为请求的解决方案是以下方法：

```
public boolean compareTwoStrings(String a, String b, boolean isIgnoreCase)
{
    if (isIgnoreCase)
    {
        return a.equalsIgnoreCase(b);
    }

    return a.equals(b);
} 
```

您的方法无法编译，因为 Java 编译器假定在某些情况下，如果条件评估为`false`. 因此，编译器无法确保至少有一条`return`语句是可达的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T16:24:35.213

我想这就是你要找的。

```
public static void myMethod(String str, String str2, boolean bool) {

    if (bool) {
        str = str.toLowerCase();
        str2 = str2.toLowerCase();
        if (str.equals(str2))
            System.out.println("strings equal");
    }
    else {
        System.out.println("false condition");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T16:36:56.633

这可能是您问题的解决方案：

```
public boolean compareTwoStrings (String a, String b, boolean isIgnoreCase){ 
  if (isIgnoreCase) 
    return (a.toLowerCase()).equals(b.toLowerCase());        
  else 
   return a.equals(b);      
} 
```

# html - 使 div 填充父级的剩余空间

> ID：15852979
> 
> 赞同：13
> 
> 时间：2013-04-06T16:04:49.690
> 
> 标签：html, css, layout, css-float

我需要一些帮助来定位 div。HTML结构如下：

```
<div class="container">
    <div class="item">
        <div class="left">
            lorem lorem
        </div>
        <div class="right">
            <p>right</p>
            <p class="bottom">bottom</p>
        </div>
    </div>
</div> 
```

我有以下CSS：

```
.container {
    float: left;
    padding: 15px;
    width: 600px;
}
.item {
    float: left;
    padding: 15px;
    width: 570px;
}
.left {
    float: left;
    padding: 40px 20px;
    margin-right: 10px;
}
.right {
    position: relative;
    float: left;
}
.bottom {
    position: absolute;
    bottom: 0;
} 
```

左侧 div 的宽度和高度是动态的。

我想要实现的是：

1.  使右 div 的高度等于左 div 的高度。
2.  使右侧 div 的宽度用 class 填充 div 的其余部分`item`。
3.  带类的段落`bottom`应该在右 div 的底部。

这是一个代表我的目标的简单图像： ![在此处输入图像描述](https://i.stack.imgur.com/KgOo1.png)

[以及JSFiddle 演示](http://jsfiddle.net/PCvy9/)的链接。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T05:08:01.177

获得正确的位置和宽度`.bottom`似乎是跨浏览器 CSS 解决方案的最大障碍。

## 选项

**1.花车**

正如@joeellis 演示的那样，灵活的宽度可以通过仅浮动左列并应用于`overflow:hidden`右列来实现。

`.bottom`在任何浏览器中都无法实现的位置。对于具有相等、可变高度的浮动列，没有 CSS 解决方案。绝对定位的`.bottom`元素必须在右列 div 内，这样 100% 的宽度才能使其大小正确。`.bottom`但是由于右列不一定与左列一样高，因此定位`bottom:0`不一定将其放置在容器的底部。

**2\. HTML表格和CSS表格**

灵活的宽度可以通过为左侧单元格设置 1px 的宽度而不为右侧单元格指定宽度来实现。两个单元格都会增长以适应内容。任何额外的空间都将单独添加到正确的单元格中。

如果`.bottom`在右侧表格单元格内，则无法在 Firefox 中获得该位置。相对位置在 Firefox 中的表格单元格中没有影响；绝对位置和 100% 宽度不会相对于右侧表格单元格。

如果`.bottom`被视为右列中的单独表格单元格，则在除 Firefox 之外的任何浏览器中都无法实现右侧和底部表格单元格的正确高度。表格单元格的高度与宽度不同（Firefox 除外）。

**3\. CSS3 flexbox 和 CSS3 网格**

Flexbox 和网格是近期很有前途的布局工具。但是 IE9 或更早版本不支持 flexbox，并且除了 IE10 之外的任何浏览器都不支持网格。尚未测试是否可以实现此布局，但浏览器支持可能会阻止它们成为目前的选项。

## 概括

*   浮动不为任何浏览器提供解决方案。
*   HTML 表格和[CSS 表格](http://www.w3.org/TR/CSS21/tables.html)不提供跨浏览器解决方案。
*   [Flexbox](http://www.w3.org/TR/css3-flexbox/)没有为[IE9 或更早版本](http://caniuse.com/#search=flex)提供潜在的解决方案（并且可能会也可能不会为其他浏览器提供解决方案）。
*   [网格](http://dev.w3.org/csswg/css3-grid-layout/)只为[IE10](http://caniuse.com/#search=grid)提供了一个潜在的解决方案（并且可能会也可能不会提供解决方案）。

## 结论

目前似乎没有合适的 CSS 解决方案，可以在足够多的相关浏览器中工作，除了 flexbox（如果不需要支持 IE9 和更早版本）。

## jQuery

这是几个使用 jQuery 强制列具有相同高度的修改演示。两个演示的 CSS 和 jQuery 是相同的。HTML 的区别仅在于左右列中有多少内容。两个演示都在所有浏览器中测试良好。相同的基本方法可以用于纯 JavaScript。

*   [左侧更高的内容](http://jsfiddle.net/Matt_Coughlin/sjvCZ/3/)
*   [右侧较高的内容](http://jsfiddle.net/Matt_Coughlin/xK2sr/2/)

为简单起见，我将左右 div 的内部填充移至子元素 ( `.content`)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-06T16:42:25.630

相同高度的兄弟元素并保持在同一行可以通过将**它们显示为`table-cell`**和父元素来实现`display: table`。
工作小提琴： http: [//jsfiddle.net/SgubR/2/](http://jsfiddle.net/SgubR/2/)（它还显示了用于创建列*`overflow: hidden`的浮动元素技术。后者需要一个clearfix）*

CSS 中的 table-cell 使用你想要的任何 HTML 元素（section、div、span、li 等），它的语义与用于表格布局的 table、tr 和 td 元素无关（除了视觉结果相同，就是这样我们想要）。

*   `display: table`设置在父级上
*   `display: table-row`可以在中间的元素上使用，但如果没有它也可以工作，很好
*   `display: table-cell`设置在每个孩子身上
*   没有、部分或所有这些“单元”设置了宽度。浏览器将同时适应设置的内容和宽度，以计算它们的宽度（显然还有父级的总宽度）
*   `table-layout: fixed`将告诉浏览器切换到*其他*不关心内容数量的表格布局算法，只关心 CSS 设置的宽度
*   `vertical-align: top`大多数情况下都需要（但您可以设置其他值，非常适合复杂的布局）
*   边距不适用于“单元格”，仅适用于填充。边距仅适用于表本身。`border-collapse: separate`尽管您仍然可以使用和/或分隔“单元格”`border-spacing: 4px 6px`

兼容性：如果需要，IE6/7 的 IE8+
Fallback 与 inline-block 完全相同

以前的答案中更长的解释：**[这里](https://stackoverflow.com/questions/11359407/sidebar-height-stretch-with-the-content-height-css/11359442#11359442)**和**[那里](https://stackoverflow.com/questions/12019386/html-css-how-to-create-four-equal-size-tabs-that-fill-100-width/12019783#12019783)**还有很好的旧方法*仿列*（你的设计必须考虑到这种技术）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T16:26:52.237

只需在右列添加一个`oveflow`，不要浮动它。

```
.right {
  position: relative;
  overflow: hidden;
} 
```

这将`right`填充其余的宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T16:31:36.503

像这样的东西可能会起作用：

[http://jsfiddle.net/PCvy9/2/](http://jsfiddle.net/PCvy9/2/)

您要查找的内容的主要关键在于：

```
 .right {
   overflow: hidden;
   background-color: #C82927;
 } 
```

这是由于所谓的“块格式化上下文”。关于为什么在这里的很好的推理和教程：http: [//colinaarts.com/articles/the-magic-of-overflow-hidden/#making-room-for-floats](http://colinaarts.com/articles/the-magic-of-overflow-hidden/#making-room-for-floats)

然而，他们的身高并不完全相关。在此示例中，您的左侧块的高度仍需要手动设置（因为它是一个浮动容器）

# php - 为什么 php 在引用不存在的变量时不抱怨？

> ID：15852981
> 
> 赞同：7
> 
> 时间：2013-04-06T16:04:51.883
> 
> 标签：php, reference

我想知道为什么当我们引用一个不存在的变量（它是一个普通变量或数组）时 php 不抱怨，这就是它的方式，还是我还缺少其他东西？例如这段代码

```
<?php
$t = &$r["er"];
var_dump($r);
?> 
```

不会对不存在的变量发出警告。

除此之外，还`var_dump`展示了这个：

```
array(1) { ["er"]=> &NULL } 
```

这`&NULL`是我没想到的，我以为我会得到一个普通的`NULL`.

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T16:13:24.100

如果 PHP 解释器引用 var 分配的内存对我有用，PHP 将在哈希表中创建一个 null 元素，其键与您发送的键类似，并引用它。通过运行以下测试可以看到这一点：

```
<?php
$i = 0;
$arr = [];
$arrS = null;
$v = memory_get_peak_usage();
for ($i = 0; $i < 150; $i++) {
    $arrS = &$arr[rand()];
}
$v = memory_get_peak_usage() - $v;
echo $v; 
```

在默认堆大小之前，PHP 将准确返回已使用的额外 0 内存——因为它仍在分配已经“准备好的”数组项（PHP 将一些额外的哈希表元素保留为空，但出于性能目的分配）。您可以通过将其设置为 0 到 16（这是堆大小！）来看到这一点。

当你超过 16 岁时，PHP 将不得不分配额外的项目，并且会在 i=17、i=18 等上这样做，创建空项目以引用它们。

PS：与人们所说的相反，这不会**引发**错误、警告或通知。在没有引用的情况下调用一个空项目 - 引用一个不存在的项目不会。很大很大很大不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T16:46:39.323

> 不会对不存在的变量发出警告。

这就是引用的工作方式。 如果它尚不存在，则`$a = &$b;`创建，“供将来参考”，如果你愿意的话。`$b`这与通过引用传递的参数相同。也许这对你来说很熟悉：

```
preg_match($pattern, $string, $matches); 
```

这里第三个参数是引用参数，因此`$matches`在方法调用时不必存在，但会被创建。

> &NULL 是我没想到的，我以为我会得到一个普通的 NULL。

为什么没想到？`$r['er']`是“to/from”的引用`$t`。请注意，引用不是指针，`$r['er']`而是`$t`对相同值的相等引用，从一个到另一个没有方向（因此最后一句中的引号）。

# android - 创建 Intent 时如何将接口传递给构造函数

> ID：15852982
> 
> 赞同：2
> 
> 时间：2013-04-06T16:04:58.353
> 
> 标签：android, android-intent

我有两个活动：*MainActivity*启动*NewReminderActivity*。创建新提醒时，将通知第一个。因此它实现了接口**OnEventAddedListener**。

我是否需要使用序列化将*MainActivity*添加到意图中，还是有更好的解决方案？我从未见过任何使用序列化来完成此任务的示例，而且我确信将接口从一个活动传递到另一个活动以进行通信是很常见的。

```
public class MainActivity extends Activity implements OnEventAddedListener {

    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        if(item.getItemId() == R.id.action_addReminder)
        {
             // NewReminderActivity c = new NewReminderActivity(this);
             // Intent intent = new Intent(this, c.getClass()); // this won't work

             Intent intent = new Intent(this, NewReminderActivity.class);
             startActivity(intent);
             return true;
        } else {
             return super.onOptionsItemSelected(item);
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T15:47:09.770

您绝对不应该尝试将一个活动传递给另一个活动，无论是通过序列化它（由于多种原因甚至不起作用）还是设置参考。

Android 将负责清理内存中的旧活动，但只要您坚持对它的引用，就无法这样做。*永远不要在他们的上下文之外抓住其他活动或片段！*

您应该遵循有关使用[启动活动和获取结果](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)的文档，`startActivityForResult()`并通过`onActivityResult(int, int, Intent)`.

# php - CasperJS 将数据传回 PHP

> ID：15852987
> 
> 赞同：9
> 
> 时间：2013-04-06T16:05:31.427
> 
> 标签：php, web-scraping, screen-scraping, phantomjs, casperjs

CasperJS 正在由 PHP 使用`exec()`命令调用。在 CasperJS 完成检索网页部分等工作后，如何将检索到的数据返回给 PHP？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-05-10T20:00:04.013

我认为将数据从 CasperJS 传输到另一种语言（如 PHP）的最佳方式是将 CasperJS 脚本作为服务运行。因为 CasperJS 是基于 PhantomJS 编写的，所以 CasperJS 可以使用 PhantomJS 的嵌入式 Web 服务器模块，称为 Mongoose。

有关嵌入式 Web 服务器如何工作的信息，请参见[此处](http://phantomjs.org/api/webserver/)

这是一个关于 CasperJS 脚本如何启动 Web 服务器的示例。

```
//define ip and port to web service
var ip_server = '127.0.0.1:8585';

//includes web server modules
var server = require('webserver').create();

//start web server
var service = server.listen(ip_server, function(request, response) {

    var links = [];
    var casper = require('casper').create();

    function getLinks() {
        var links = document.querySelectorAll('h3.r a');
        return Array.prototype.map.call(links, function(e) {
            return e.getAttribute('href')
        });
    }

    casper.start('http://google.fr/', function() {
        // search for 'casperjs' from google form
        this.fill('form[action="/search"]', { q: 'casperjs' }, true);
    });

    casper.then(function() {
        // aggregate results for the 'casperjs' search
        links = this.evaluate(getLinks);
        // now search for 'phantomjs' by filling the form again
        this.fill('form[action="/search"]', { q: 'phantomjs' }, true);
    });

    casper.then(function() {
        // aggregate results for the 'phantomjs' search
        links = links.concat(this.evaluate(getLinks));
    });

    //
    casper.run(function() {
            response.statusCode = 200;
            //sends results as JSON object
            response.write(JSON.stringify(links, null, null));
            response.close();              
    });

});
console.log('Server running at http://' + ip_server+'/'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-10T04:47:54.857

您可以将输出从标准输出重定向到数组。

在[此](http://php.net/manual/en/function.exec.php)页面上，它说您可以执行以下操作：

```
string exec ( string $command [, array &$output [, int &$return_var ]] ) 
```

它接着说：

> 如果存在输出参数，则指定的数组将填充命令的每一行输出。

所以基本上你可以执行 exec('casperjs command here, $array_here);

# sql-server-2008 - 防止 sql server Compact 作为匿名合并拉取发布的订阅者

> ID：15852989
> 
> 赞同：0
> 
> 时间：2013-04-06T16:05:32.433
> 
> 标签：sql-server-2008, sql-server-2008-r2, sql-server-ce, replication, merge-replication

有没有办法将我的出版物指定为属性，说它不需要处理 sql compact 订阅？

Sql server 2008 R2 作为发布者，最初创建发布时，我将兼容性设置为 2005 及更高版本。我在其中一篇复制文章中不知不觉地使用了一个时间列，后来意识到对于 sql ce，它归结为 nvarchar 为时已晚。

首先，时间数据类型是从 2008 年开始引入的，所以我将发布兼容性更改为 2008 年。并创建新快照、重新初始化订阅等。目前我所有的订阅者都是 2008 快递。我永远不需要处理 2005 年的订阅者。

此外，我从不需要处理 2008 Compact 订阅者。由于时间不仅仅支持紧凑，我的理论是，如果我可以以某种方式指定发布不需要允许紧凑订阅者并重新生成我的快照和重做订阅，那么该列最终将作为“时间”而不是 nvarchar 下降。

那么，有没有可能？

**编辑：**

我忽略了一个事实，即没有“sql server 2008 compact”之类的东西。我想我现在的问题是，在我创建了一个 2005 年及以上“订阅者类型”的发布之后，后来至少存在一个订阅者（仅 2008 年快递），我将发布属性更改为 2008 年及以上，为什么没有新订阅者获得“时间”数据类型？有人可以保证，如果我完全删除该出版物并从头开始重新创建它，订阅将获得“时间”列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:57:03.700

“新建发布向导”有一个“订阅者类型”对话框，在此对话框中，仅选择 SQL Server 2008。

# iphone - 如何解决我在使用 Parse 推送 iPhone 应用程序通知时遇到的问题？

> ID：15852991
> 
> 赞同：0
> 
> 时间：2013-04-06T16:05:59.897
> 
> 标签：iphone, ios, parsing

我在[这里](https://parse.com/tutorials/ios-push-notifications)学习教程。

除非我进入第 10 步，否则我一直可以继续进行操作：右键单击它，选择“导出 Apple...”，然后将其保存为 .p12 文件。出现提示时不要输入导出密码！

当我右键单击 KeyChain 中的证书时，我没有看到“导出 Apple”的这个选项。我错过了一步吗？我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:37:28.620

要将证书导出为 .p12 文件，请在 Keychain 中选择证书，单击“文件”->“导出项目...”，选择 .p12 作为文件格式并保存。将出现的弹出视图上的密码字段留空以在没有密码的情况下保存。

# jquery - 如何获取 JS 字段值并在 MVC4 / JQuery 后面的控制器代码中使用它

> ID：15852992
> 
> 赞同：1
> 
> 时间：2013-04-06T16:06:04.397
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui-datepicker

我正在使用 ASP.Net MVC4 和 Jquery UI 日期选择器来处理日期字段我想知道如何使用代码中的变量。

@Html.ActionLink("新建", "创建")

```
<script>
    $(function () {
        $("#from").datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            onSelect: function (selectedDate) {
                $("#to").datepicker("option", "minDate", selectedDate);
            }
        });

        $("#to").datepicker({
            defaultDate: "+1w",
            changeMonth: true,
            numberOfMonths: 3,
            onSelect: function (selectedDate) {
                $("#from").datepicker("option", "maxDate", selectedDate);
            }
        });
    });
</script>

<p>
<label for="from">From</label>
<input type="date" id="from" name="from" value='<%=from%>'/>
<label for="to">to</label>
<input type="date" id="to" name="to" value='<%=to%>'/>
</p> 
```

我想使用从“from”/“to”字段中获得的值并在我的 Controller 中使用它们。

```
 public ActionResult index( )
        {
            DateTime first = 

            return View();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T16:12:03.007

**从：**

```
<label for="from">From</label>
<input type="date" id="from" name="from" value='<%=from%>'/>
<label for="to">to</label>
<input type="date" id="to" name="to" value='<%=to%>'/> 
```

**到：**

```
@using(Html.BeginForm("ActionName", "ControllerName", FormMethod.Post)){
    <label for="from">From</label>
    <input type="date" id="from" name="from" value='<%=from%>'/>
    <label for="to">to</label>
    <input type="date" id="to" name="to" value='<%=to%>'/>
    <input type="submit" value="Submit Form" />
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T16:12:57.180

您可以使用 HTML 表单：

```
@using (Html.BeginForm())
{
    <p>
        <label for="from">From</label>
        <input type="date" id="from" name="from" value='<%=from%>'/>
        <label for="to">to</label>
        <input type="date" id="to" name="to" value='<%=to%>'/>
    </p>    
    <button type="submit">OK</button>
} 
```

和一个控制器动作，它将被调用并作为参数传递给字段：

```
[HttpPost]
public ActionResult Index(DateTime from, DateTime to)
{
    // when the form is submitted this action will be invoked and passed the 
    // selected values
    ...
} 
```

# php - 处理没有 javascript 的 HTML 复选框？

> ID：15852995
> 
> 赞同：0
> 
> 时间：2013-04-06T16:06:33.367
> 
> 标签：php, html, checkbox

有没有办法`(detect checked, count checked etc)`在没有 Javascript 的情况下处理 HTML 中动态创建的复选框？Php 与这些复选框相呼应，我不太了解 Javascript。

例如，可以检测用户是否恰好单击了 6 个复选框的简单函数，然后它将处理 PHP 中的元素。

我正在社交网站上下文中制作“编辑精选朋友”类型的页面。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T16:17:00.800

假设您的复选框正在生成，如下所示：

```
echo '<input type="checkbox" name="boxes[]" /> Some label'; 
```

然后在接收 POST 请求的服务器端代码上，您可以执行以下操作：

```
if( count($_POST['boxes']) != 6) die("Please check exactly 6 boxes"); 
```

# python - 在整数字段中添加“月”“年”或“天” - OpenErp

> ID：15852998
> 
> 赞同：0
> 
> 时间：2013-04-06T16:06:41.417
> 
> 标签：python, integer, field, openerp, erp

我想在“整数”字段中添加一种日期。

喜欢 = 产品的生命周期 = 6 个月

我知道我可以使用整数作为数字，比如

```
'Lifetime' : fields.integer('Lifetime'), 
```

但是是否有可能添加年、月或日作为参数？

```
'Lifetime' : fields.integer('Lifetime' , 'Months' , 'Years' ...), 
```

等等？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T05:28:48.733

您需要添加不同的字段。例如，在设置菜单中，您将能够看到调度程序> 计划的操作。在那里你可以看到间隔号和间隔单位。