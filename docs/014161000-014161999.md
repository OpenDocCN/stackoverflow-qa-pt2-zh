# StackOverflow 问答 14161000-14161999

# java - 如果我使用反射实现 java 类的访问器，性能会降低多少？

> ID：14161002
> 
> 赞同：-2
> 
> 时间：2013-01-04T16:31:05.463
> 
> 标签：java, reflection

无论在类中提供访问器是好的还是坏的OO实践，我都想知道通过反射执行对对象特定属性的访问是否会降低性能（内存消耗或cpu时间）。

您是否实施了这一点并执行了基准测试？你知道有谁做过这样的基准测试吗？

编辑：

由于一些评论表明性能下降**很明显**，我修改了问题的标题以表明我想知道使用反射实现访问器的影响有多严重。

编辑：

感谢您的友好评论和回答。根据@Peter Lawrey 的回答和@EJP 的友好评论，这就是我的意思，并且想知道你们中是否有人在我提出问题之前已经实施：

```
package co.com.prueba.reflection;

import java.lang.reflect.Field;

public class A {

private String s;

public void setS(String s){
    this.s=s;
}

public String getS(){
    return this.s;
}

public static void main(String[] args) throws IllegalAccessException, NoSuchFieldException {

    System.out.println("Invoking .setAccesible(true) ...");
    A secondA = new A();
    for(int i=0; i<10; i++){
        long start = System.nanoTime();
        Field f = secondA.getClass().getDeclaredField("s");
        f.setAccessible(true);
        f.get(secondA);
        long end = System.nanoTime();
        System.out.println((end - start));
    }

    System.out.println("Without invoking .setAccesible(true) ...");
    A firstA = new A();     
    for(int i=0; i<10; i++){
        long start = System.nanoTime();
        Field f = firstA.getClass().getDeclaredField("s");          
        f.get(firstA);
        long end = System.nanoTime();
        System.out.println((end - start));
    }

    System.out.println("Invoking the getter ...");
    A thirdA = new A();
    for(int i=0; i<10; i++){
        long start = System.nanoTime();
        thirdA.getS();
        long end = System.nanoTime();
        System.out.println((end - start));
    }

} 
```

}

结果如下：

![在此处输入图像描述](../Images/7cb9f4f44a41203c1e8ce11fb3daaaf1.png)

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:46:08.270

在典型的机器上，通过反射调用 getter 的成本约为 3 ns。二传手也差不多。由于吸气剂可以在没有反射的情况下内联甚至消除，因此存在很大的相对差异。

3 ns 对您有多大影响？

我昨天提供了一个代码示例并在[此处给出了我的答案。](https://stackoverflow.com/a/14146641/57695);)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:56:55.570

为了获得其他人谈论的最小性能损失，请务必了解这**仅**涉及对现有`Method`对象的反射调用。如果您在每次调用中都进行查找，那么对性能的影响是**巨大的**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:39:36.003

我认为这个[线程](https://stackoverflow.com/questions/435553/java-reflection-performance)总体上回答了您关于性能的问题。并希望这个[博客](http://buzdin.blogspot.com/2011/01/is-java-reflection-really-slow.html)能帮助你获得一些信息。关于基准值。它有一些外部链接，例如来自 IBM- [Reflection 性能基准](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=13862806)的帖子。其中讨论了基准值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T16:40:39.053

[Java 反射性能](https://stackoverflow.com/questions/435553/java-reflection-performance)

它比以前更好（我认为在 1.4 之前），但仍然比直接访问变量慢。我相信这是由于必须将类和所有属性加载到内存中，然后在列表中搜索您想要的。

在进行 android 开发时，Google 建议（或至少是）直接访问变量以切断虚拟方法调用。

# jquery - 未捕获的类型错误：两个 Drupal jQuery 插件的对象 [对象对象]

> ID：14161003
> 
> 赞同：0
> 
> 时间：2013-01-04T16:31:07.373
> 
> 标签：jquery, drupal, plugins, typeerror

我正在使用 Drupal 7 母舰主题并安装了视图手风琴和 nivo 滑块。在可以预览将发布到块和页面的内容的视图页面上，我看到手风琴在那里工作，但是在实际页面上，我得到 Uncaught TypeError: Object [object Object] has no method 'accordion'在具有 nivo 滑块的主页上，我得到 Uncaught TypeError: Object # has no method 'nivoSlider'。我的猜测是我同时运行了两个版本的 jQuery，或者文件的顺序可能不正确。

我不确定，但从我在核心目录中看到的内容来看，jQuery 1.4.4 用于核心文件，我使用 jave jQuery 1.8.3（这是 script.js?mg3zbe 文件，倒数第二个），如果我采取1.4.4 离开网站，我得到一堆 jQuery 未定义的核心，如果我将 jQuery 1.8.3 从主题中取出，我的灰度渐变插件得到未定义，然后就中断了。

我不确定该做什么以及如何在 Drupal 中重新排序 jQuery 文件。在我的 .info 文件中，我只需要 js 文件

;--------------- JS -------------

脚本[] = js/script.js

脚本[] = js/灰度渐变.js

![在此处输入图像描述](../Images/7de81b37c1f4a0442268b56703bf0ba8.png)

我希望有人能指出问题所在并解决此问题。这让我疯狂。

这也是一个屏幕截图，显示我的手风琴设置正确，因此我可以排除这种情况。 ![在此处输入图像描述](../Images/af23744239e7db1e81eeae3b52cd4665.png)

# php - 为用户安全地生成 RSA 密钥

> ID：14161008
> 
> 赞同：1
> 
> 时间：2013-01-04T16:31:28.277
> 
> 标签：php, encryption, key, rsa

我有一个用户系统来管理用户属性、散列加盐密码、一个 RSA 公钥和一个加密的 RSA 私钥（通过实际的盐 + 密码）。

RSA 密钥是在用户注册期间生成的，或者如果密码被重置（由用户管理员或忘记密码），因为没有密码，私钥基本上会丢失。

目前，RSA 密钥是在客户端机器上生成的，用他们的密码加密（安全地存储在浏览器内存中），然后发送回服务器以存储数据。

但现在，我想为 RSA 密钥生成创建另外两个选项。这两个都将在消息队列系统上工作，该系统将在本地系统（通过 cron）上处理，或者系统将消息发送到另一个服务器（通过对称加密通道），该服务器创建密钥并将其发送回存储系统。

虽然这些方法是进行 RSA 生成的硬位的有效安全方法，但我目前的难题是如何保护该用户的计算私钥。拥有由密码保护的私钥意味着需要密码，并且任何其他机制都需要密钥可供代码使用，或者临时存储可供双方（用户和系统）使用的加密密钥.

我最初认为使用系统 RSA 密钥对存储用户密码会很好，当生成新密钥时，会获取用户密码（并从存储中删除）并用于加密新的私钥并存储它与用户。但这要求系统可以访问其私钥，这将使黑客可以访问用户密码。

如果将命令发送到单独的安全服务器（甚至是物理服务器），上述方法可能会起作用，因为如果这是唯一存储内部私钥的服务器，那么只有在该服务器被黑客入侵时才能访问它。

有没有人对我如何处理和保护即使黑客可以访问完整的源代码和数据库也无法破解的用户私钥有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:23:27.410

我不会评论您系统的任何安全方面。但是，在阅读您对私钥存储的想法时，我想起了我不久前读过的一篇关于[服务器端私钥存储](http://www.isoc.org/isoc/conferences/ndss/99/proceedings/papers/perlman.pdf)的论文，作者是 Charlie Kaufmann 和 Radia Perlman。摘要注释“......我们提出了即使 Alice 的密码是可猜到的也是安全的协议......”。

请注意，这篇论文是在 1999 年写的，这意味着你应该四处寻找更多关于这个概念的分析和改进。

# ruby - 找出在shebang中使用哪种红宝石的可靠方法

> ID：14161010
> 
> 赞同：0
> 
> 时间：2013-01-04T16:31:44.730
> 
> 标签：ruby, gem, rvm, shebang

我写了一个脚本`todo.rb`，第一行是`#!/usr/bin/env ruby`. 但是，运行此脚本会出现以下错误：

```
λ ~/ ruby todo/todo.rb 
/Users/xjia/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- highline/import (LoadError)
    from /Users/xjia/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from todo/todo.rb:6:in `<main>' 
```

我已经安装了 gem `highline`：

```
λ ~/ which gem
/Users/xjia/.rvm/rubies/ruby-1.9.3-p0/bin/gem
λ ~/ gem install highline
Successfully installed highline-1.6.15
1 gem installed
Installing ri documentation for highline-1.6.15...
Installing RDoc documentation for highline-1.6.15...
λ ~/ gem environment
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.10
  - RUBY VERSION: 1.9.3 (2011-10-30 patchlevel 0) [x86_64-darwin11.2.0]
  - INSTALLATION DIRECTORY: /Users/xjia/.rvm/gems/ruby-1.9.3-p0
  - RUBY EXECUTABLE: /Users/xjia/.rvm/rubies/ruby-1.9.3-p0/bin/ruby
  - EXECUTABLE DIRECTORY: /Users/xjia/.rvm/gems/ruby-1.9.3-p0/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-darwin-11
  - GEM PATHS:
     - /Users/xjia/.rvm/gems/ruby-1.9.3-p0
     - /Users/xjia/.rvm/gems/ruby-1.9.3-p0@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

我可以`require`在`irb`：

```
λ ~/ which irb
/Users/xjia/.rvm/rubies/ruby-1.9.3-p0/bin/irb
λ ~/ irb
irb(main):001:0> require 'highline/import'
=> true 
```

但是，`require`in`ruby`失败完全相同：

```
λ ~/ which ruby
ruby: aliased to bundled_ruby
λ ~/ ruby -v
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.2.0]
λ ~/ ruby -e "require 'highline/import'"
/Users/xjia/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- highline/import (LoadError)
    from /Users/xjia/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from -e:1:in `<main>' 
```

我在 Ubuntu 和 Mac OS X 下都使用[rvm 。在我的 Ubuntu 机器上，这条 shebang 行运行良好。](https://rvm.io)但是，它在 OS X 下很糟糕。那么找出可用的可靠方法是`ruby`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:21:38.277

问题在这里：

> `λ ~/ which ruby` `ruby: aliased to bundled_ruby`

你需要检查：

```
which bundled_ruby 
```

并确保它也有适当的shebang：

```
#!/usr/bin/env ruby 
```

最后删除 ruby​​ 的别名应该可以解决问题，您可能需要检查我的 gem `rubygems-bundler`，它默认与 RVM 一起安装 - 它提供了更“智能”的检测和使用捆绑器的方法。

# javascript - Chrome 扩展持久弹出窗口最佳实践

> ID：14161015
> 
> 赞同：9
> 
> 时间：2013-01-04T16:32:11.753
> 
> 标签：javascript, google-chrome-extension

我从文档中了解到，在失去焦点时关闭 chrome 扩展弹出窗口是一种设计选择。

我正在开发用户选择保存网页元素的扩展程序。当他与主网页交互时，我希望弹出窗口得到更新，但这显然是不可能的。

处理这种情况的正确方法是什么？（这是我的第一个 chrome 扩展）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T17:07:30.437

您可以让[内容脚本](http://developer.chrome.com/extensions/content_scripts.html)检测“保存”操作。让我们假设它是一个特定的 DOM 元素，您确定它会在特定的 main 中，或者您自己创建。

**内容.js**

```
//content script
document.onreadystatechange = function () {
if (document.readyState == "complete") {
    // Grab the UI frmo the mainpage you want to append the save functionality
    var someElementsYouWantToAppendASaveButtonTo = document.getElementsByTagName("...");

    var len = someElementsYouWantToAppendASaveButtonTo.length;
    for (var i = 0; i < len; i++) { 
        // Create a UI save button to provide a functionality
        var theSaveButton = document.createElement("button");
        theSaveButton.value = "Save to Chrome Extension";

        // Send data to extension when clicked
        theSaveButton.addEventListener("click", function() {
            var dataToSentToExtension = {...} // Retrieve from the clicked element, or whatever you want to save
            chrome.extension.sendMessage(dataToSentToExtension, function(response) {
                if(response.success) console.log("Saved successfully");
                else console.log("There was an error while saving")
            });
        }, false); 

        someElementsYouWantToAppendASaveButtonTo[i].appendChild(theSaveButton)
    }
}
} 
```

然后，在后台，您检测响应并根据需要设置弹出窗口。

**背景.js**

```
chrome.extension.onMessage.addListener(function(request, sender, sendResponse) {
    if(request.dataToSave) {
        chrome.storage.local.set(dataToSave, function() {...});

        // You can then set upn the proper popup for the next click or even switch to it
        switch(request.popupToDisplay) {
            case "awesomeDisplay":
            chrome.browserAction.setPopup({...})
            break;
        }

        var responseFromExtension = {success: true}
    } else {
        var responseFromExtension = {error: true}
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:04:23.840

您似乎正在寻找根据`popup.html`网页中的更改来修改\更新您的页面。如果是这样，请使用内容脚本并与（因为每次都失去焦点）建立单个消息[通信的](https://developer.chrome.com/extensions/extension.html#method-sendMessage)[连接](https://developer.chrome.com/extensions/extension.html#method-connect)并间接更新。`background page``popup.html`

## 参考：

*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [背景页面](https://developer.chrome.com/extensions/background_pages.html)
*   [消息传递](https://developer.chrome.com/extensions/messaging.html)

[除了](https://stackoverflow.com/questions/13546778/how-to-communicate-between-popup-js-and-background-js-in-chrome-extension/13549245#13549245)这些之外，`popup`还有`background page`很多关于[这些](https://stackoverflow.com/search?q=%5Bgoogle-chrome-extension%5D%20message%20passing)主题的问题，它们会让你开始。

# visual-studio-2010 - 在 Visual Basic 中使用字典：已添加具有相同键的项

> ID：14161024
> 
> 赞同：1
> 
> 时间：2013-01-04T16:32:51.037
> 
> 标签：visual-studio-2010, visual-studio, dictionary, text-files, streamreader

在 Visual Studio 2010 中创建此程序时，我遇到了一个问题。

我读入文本文件的内容并搜索每一行，以确保在添加新产品时，它们的现有 ID 不相同。文件内容如下所示：

```
0001|Unsmoked Middle Bacon
0002|Smoked Middle bacon
0003|Unsmoked Bits 
```

因此，如果用户尝试添加值“0001”，则会出现错误。只有我的代码出现错误...

```
appPath = Application.StartupPath
    productDB = New Dictionary(Of Integer, String)
    For Each line In IO.File.ReadAllLines(appPath & "/productlist.txt")
        Dim data = line.Split("|")
        productDB.Add(CInt(data(0)), data(1))
    Next

 If productDB.ContainsKey(newID) Then
        MsgBox("Prompt of same ID")
    Else
        MsgBox("Accepted fine")
    End If 
```

在线 - *productDB.Add(CInt(data(0)), data(1))* - 我似乎在弹出错误

```
ArgumentException was unhandled.

An item with the same key has already been added. 
```

很多人一直在提到他们的 resources.resx 文件搞砸了，但我已经尝试了各种方法，但似乎没有任何帮助:(

干杯，罗比。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:57:38.803

我自己的愚蠢错误。

文本文件中已经有一个重复的条目。（我有大约 40 行）

所以这与我想输入的 4 位数字没有任何关系，错误是在读取每一行时发生的。

```
"D'oh" - Homer Simpson 
```

# javascript - 在指令中包装 jQuery 插件时出现 AngularJS 错误

> ID：14161028
> 
> 赞同：0
> 
> 时间：2013-01-04T16:33:30.690
> 
> 标签：javascript, jquery, angularjs, directive

我正在为 AngularJS 制定一个指令，该指令构建一个可标记元素并利用[TagsInput](http://xoxco.com/projects/code/tagsinput/)

这是一个工作小提琴：http: [//jsfiddle.net/mgLss/](http://jsfiddle.net/mgLss/)

不知道为什么，但是当我将该指令添加到我的应用程序时，它可以正常工作，但是在它下面运行 angular 的任何其他东西都会失败，并且我收到以下错误消息：

```
Error: node is undefined
compositeLinkFn@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:3837
compositeLinkFn@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:3837
nodeLinkFn@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:4216
compositeLinkFn@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:3834
compositeLinkFn@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:3837
compositeLinkFn@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:3837
compositeLinkFn@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:3837
nodeLinkFn@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:4216
compositeLinkFn@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:3834
compositeLinkFn@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:3837
compile/<@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:3746
bootstrap/</<@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:932
Scope.$eval@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:7808
Scope.$apply@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:7888
bootstrap/<@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:930
invoke@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:2788
bootstrap@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:929
angularInit@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:904
@http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js:14397
f.Callbacks/o@http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js:2
f.Callbacks/p.fireWith@http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js:2
.ready@http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js:2
B@http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js:2 
```

我在 IRC 上花了最后一个小时，但我的问题没有得到任何确认，所以这里希望 Stack 能够像以前一样多次来救援。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:47:42.170

这与您正在使用的插件有关，它以角度不喜欢它的方式操纵 dom，老实说，我没有进入源代码指向问题的根源。但这是一种修复它的方法（一种丑陋的方法）。

```
<div ng:controller="TestCtrl">
    {{ hello }}
    <div><taggable default="changed"></taggable></div>
</div>
​ 
```

只需将该指令包装在另一个 DOM 元素中，确保插件是隔离的。

[http://jsfiddle.net/mgLss/33/](http://jsfiddle.net/mgLss/33/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:05:01.053

基于@fastreload 的答案，一个稍微不那么难看的解决方案，它不需要更改您的 HTML：

```
// as per @fastreload, wrap input in a div to prevent Angular from getting confused
template: "<div><input type=\"text\"></div>",
link: function(scope, elm, attrs) {
    elm.children().tagsInput({      // note children() 
```

您还应该在小提琴中最后包含 Angular（在管理资源下）（以及一般在您的代码中），然后`elm`自动是一个包装的 jQuery 元素，而不是一个包装的 Angular 元素，因此我们不需要`$(elm)`在链接中使用功能。

# php - .htaccess 拒绝除公共文件之外的所有直接文件请求

> ID：14161031
> 
> 赞同：1
> 
> 时间：2013-01-04T16:33:44.813
> 
> 标签：php, apache, .htaccess

这是我当前的“.htaccess”文件（放在我的文档根目录上）：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

我的项目结构是：

```
app/ <---- here i have all my php code
public/ <----- css/js/images
.htaccess
index.php <---- starting point 
```

我希望拒绝直接访问我的应用程序文件，例如“/app/controller/controllerName.php”（我将使用路由器来处理我的所有请求......），我该如何实现？不接触公用文件夹树？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:48:11.443

对于您当前的 .htaccess，如果这样做可能有意义：

```
ErrorDocument 404 index.php?error=404 
```

这允许服务器向客户端发送正确的“404”标头，并且它仍然可以让您控制响应。当您使用它时，您可能还想为 400、401、403 和 500 错误创建条目。

至于拒绝访问 app/ 文件夹，只需将 .htaccess 放入其中：

```
Deny From All 
```

# javascript - !function ($){...}(window.jQuery) 到底是做什么的？

> ID：14161032
> 
> 赞同：2
> 
> 时间：2013-01-04T16:33:46.390
> 
> 标签：javascript, jquery

我想确切地知道这里发生了什么。我知道`$(document).ready(function() {...});`它会做什么以及何时生效。也一样`jQuery(function($) {...}`。

但这有什么作用？

```
!function ($) {
  $(function(){
    var $window = $(window)
    //normal jquery stuff
  })
}(window.jQuery) 
```

它是在加载 jQuery 时而不是在文档“准备好”时加载的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T16:36:00.903

它创建了一个闭包，在该闭包中为变量`$`分配了 的值`window.jQuery`。

目的是允许将无信息命名的变量`$`用作快捷方式，而不会与也用作变量名`jQuery`的大量其他库和自定义函数发生冲突。`$`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T16:37:49.527

使用 ！函数之前的运算符导致它被视为表达式

```
!function () {}() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T16:38:58.903

您正在查看的语法用于设置 jQuery 闭包。这用于确保 jQuery`$`变量在代码中可用且正确；即它不能在全局范围内被其他任何东西覆盖（如果您使用多个库等，这是可能的）。

jQuery 插件作者经常使用这种技术——如果您有兴趣了解更多信息，请参阅[此处的文档](http://docs.jquery.com/Plugins/Authoring)，并更详细地解释为什么要将 jQuery 代码包装在这样的函数中。

您的示例中唯一不同的是，在文档中，该函数被括在括号中，而在您给出的示例中，它前面有一个`!`

是`!`一个`not`运算符，但实际上并没有用于任何事情；我认为它就在那里而不是括号来保存单个字符的代码。如果您要缩小 javascript，可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T16:38:02.427

不太确定，但我想这有点等同于`(function(){})()`方法，它是关于 js 闭包的。它确保`$`并且`jQuery`是同一件事

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T16:44:38.147

这 '！' 是一个“非”运​​算符。它在代码中没有做任何事情。它存在的唯一原因是表示该函数将立即执行。

您可能还会看到用括号括起来的函数。

```
(function() {}()); 
```

使用什么都是个人喜好。

# java - 使用 Java 中的正则表达式在给定段落中查找“wh”句子

> ID：14161033
> 
> 赞同：0
> 
> 时间：2013-01-04T16:33:48.540
> 
> 标签：java, regex

**你叫什么名字？你好吗？我在路上。你在哪里？你饿了吗？我喜欢你。**

在上一段中，答案应该选择所有 wh 问题，例如“你叫什么名字？你在哪里？”

如何在java中使用正则表达式实现上述目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:41:23.520

好的，我测试了这段代码，所以它现在应该可以工作了。它寻找`Wh`我能想到的所有英语单词，而不是试图`Wh`在一个单词中找到它自己。

```
String text = "What is your name? How do you do? I am in way. Where are you? Are you hungry? I like you. What about questions that contain a comma, like this one? Do you like my name, Whitney Houston? What is going to happen now, is you are going to do what I say. Is that clear? What's all this then?";

Pattern p = Pattern.compile("(?:Who|What|When|Where|Why|Which|Whom|Whose)(?:'s)?\\s+[^\\?\\.\\!]+\\?");
Matcher m = p.matcher(text);

List<String> questions = new ArrayList<String>();
while (m.find()) questions.add(m.group());

for (String question : questions) System.out.println(question); 
```

我刚刚意识到可能有一个以 开头的问题`Who's`，所以现在它允许`'s`在`Wh`单词之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:51:31.853

简单版（用于OP例句）...

```
 Pattern p = Pattern.compile("Wh[^\\?]*\\?");
    Matcher m = p.matcher(s);
    while (m.find()) {
            System.out.println(m.group());
    } 
```

对于更高级的匹配（确保 Wh 词在句首）...

```
 Pattern p = Pattern.compile("(^|\\?|\\.) *Wh[^\\?]*\\?");
    Matcher m = p.matcher(s);
    while (m.find()) {
            String match = m.group().substring(m.group().indexOf("Wh"));
            System.out.println(match);
    } 
```

# php - 如何根据当前日期从 myphpadmin 服务器检索数据？

> ID：14161034
> 
> 赞同：0
> 
> 时间：2013-01-04T16:33:50.910
> 
> 标签：php, mysql

我需要帮助创建 php 代码，该代码将根据当前日期提取保存在根文件夹中的图像。换句话说，当第二天发生时，每天都会在网页上显示一个新图像。下面是表格。

```
date                                file_location   
Wednesday, Jan 02, 2013 12:00 AM    "...\journal_prompts\2013-01-01.png"    
Thursday, Jan 03, 2013 12:00 AM     "...\journal_prompts\2013-01-02.png"    
Friday, Jan 04, 2013 12:00 AM       "...\journal_prompts\2013-01-03.png"    
Saturday, Jan 05, 2013 12:00 AM     "...\journal_prompts\2013-01-04.png"    
Sunday, Jan 06, 2013 12:00 AM       "...\journal_prompts\2013-01-05.png"    
Monday, Jan 07, 2013 12:00 AM       "...\journal_prompts\2013-01-06.png"    
Tuesday, Jan 08, 2013 12:00 AM      "...\journal_prompts\2013-01-07.png" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:37:55.337

为什么要为此使用数据库？你可以很容易地做到这一点，只使用 PHP：

```
<img src="...\journal_prompts\
    <?php echo(strftime("%Y-%m-%d")); ?>
.png"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:38:37.457

你可以这样试试——

```
<?php
$img = date('Y-m-d').".png";
?>
<img  src="...\journal_prompts\<?php echo $img?>" alt="today pic"/> 
```

# c++ - 编译 Twilio C++ 库时遇到问题

> ID：14161036
> 
> 赞同：1
> 
> 时间：2013-01-04T16:34:02.300
> 
> 标签：c++, makefile, twilio

为 Twilio 编译 C++ API。Laurent Luce 的指示不是很清楚，是两年前做的。

我究竟如何使用 libcurl 和 openssl 和 make (nmake) 来编译库？？？？当我尝试在 twilio++ 目录中的命令行上运行 nmake 时，我得到：

> makefile(25)：致命错误 U1001：语法错误：宏停止中的非法字符 '^'。

如果有人可以提供帮助或指点，我会很欣慰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:09:01.380

如果这个错误是由`$^`. 您可以尝试将其替换为`$**`. 但没有保证。通常，`nmake`不适用于 GNU makefile。为获得最佳效果，请使用 GNU `make`。

# php - php中的soap客户端-看起来我们没有XML文档

> ID：14161039
> 
> 赞同：1
> 
> 时间：2013-01-04T16:34:07.727
> 
> 标签：php, xml, soap

我收到错误消息：“看起来我们没有 XML 文档”。

这是我的 php 脚本：

```
<?php

$client = new SoapClient("http://ws-argos.cls.fr/argosDws/services/DixService?wsdl", array('trace' => 1, "exceptions" => 0));

$result = $client->getXml(array (
        'username' => 'my username',
        'password' => 'my password',
        'platformId' => '1',
        'nbPassByPtt' => 100,
        'nbDaysFromNow' => 10,
        'mostRecentPassages' => true
    ));

echo "====== REQUEST HEADERS =====" . PHP_EOL;
    var_dump($client->__getLastRequestHeaders());
    echo "========= REQUEST ==========" . PHP_EOL;
    var_dump($client->__getLastRequest());
    echo "========= RESPONSE =========" . PHP_EOL;
    var_dump($result); 
```

这是 __getLastRequest() 的结果：

```
<?xml version="1.0" encoding="UTF-8"?>

<SOAP-ENV:Envelope
    xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
    xmlns:ns1="http://service.dataxmldistribution.argos.cls.fr/types">

    <SOAP-ENV:Body>
        <ns1:xmlRequest>
            <ns1:username>my username</ns1:username>
            <ns1:password>my password</ns1:password>
            <ns1:platformId>1</ns1:platformId>
            <ns1:nbPassByPtt>100</ns1:nbPassByPtt>
            <ns1:nbDaysFromNow>10</ns1:nbDaysFromNow>
            <ns1:mostRecentPassages>true</ns1:mostRecentPassages>
        </ns1:xmlRequest>
    </SOAP-ENV:Body>

</SOAP-ENV:Envelope> 
```

根据文档，这就是请求的外观：

```
<soap:Envelope
    xmlns:soap=”http://www.w3.org/2003/05/soap-envelope”
    xmlns:typ=”http://service.dataxmldistribution.argos.cls.fr/types”&gt;

   <soap:Header/>

    <soap:Body>
      <typ:xmlRequest>
        <typ:username>mturiot</typ:username>
        <typ:password>qt</typ:password>
        <typ:platformId>1</typ:platformId>
        <typ:nbPassByPtt>2</typ:nbPassByPtt>
        <typ:nbDaysFromNow>10</typ:nbDaysFromNow>
        <typ:mostRecentPassages>true</typ:mostRecentPassages>
        </typ:xmlRequest>
    </soap:Body>

</soap:Envelope> 
```

我究竟做错了什么 ？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-30T06:12:19.670

我遇到了同样的问题，我转向以不同的方式获得解决方案。这可能不是最好的方法，但它确实有效。

[在此处找到](https://www.mikemackintosh.com/fixing-soap-exception-no-xml/)的解决方案的来源

```
$param = array(
'username'=>$username,
'password'=>$password,
'platformId'=>$platformId,
'nbDaysFromNow'=>20
);

$client = new SoapClient("http://ws-argos.cls.fr/argosDws/services/DixService?wsdl", 
array('trace' => 1, 
"exceptions" => 0, 
'style'=> SOAP_DOCUMENT,
'use'=> SOAP_LITERAL));
$results = $client->getXml($param);

$results = $client->__getLastResponse();
//Handle BOM
$xml = explode("\r\n", $results);
//The resultant CDATA is at 6th tag
$response = preg_replace( '/^(\x00\x00\xFE\xFF|\xFF\xFE\x00\x00|\xFE\xFF|\xFF\xFE|\xEF\xBB\xBF)/', "", $xml[6] );

//Get the CDATA content alone
$explode1 = explode("<return>", $response);
$xmlVar = explode("</return>", $explode1[1]);

$finalXML = $xmlVar[0];

//Convert string as XML
$xmlElem = simplexml_load_string('<xml>'  . $finalXML . '</xml>');
echo $xmlElem; 
```

# jquery - jquery ajax - 使用 Joomla 传递复选框值

> ID：14161041
> 
> 赞同：0
> 
> 时间：2013-01-04T16:34:17.320
> 
> 标签：jquery, joomla

我有一个带有许多复选框的 html 表：

```
<table id="webcam-table" class="pretty">
    <thead>
    <tr>
        <th>Camera Name</th>
        <th>Date Created</th>
        <th>Video Size</th>
        <th>Video Length</th>
        <th><input type="checkbox" name="checkboxselectall" title="Select All" />
        <button type="submit" class="deletebutton" name="delete_video" title="Delete the selected videos">Delete</button></th>
    </tr>
    </thead>
    <tbody>
        <form name="myform" action="">
        <tr >
            <td onclick="DoNav('<?php echo $url; ?>');">
                        <?php echo $this->result_videos[$i]["camera_name"]; ?> 
            </td>
            <td onclick="DoNav('<?php echo $url; ?>');">
                        <?php echo setlocalTime($this->result_videos[$i]["video_datetime"]); ?> 
            </td>
            <td onclick="DoNav('<?php echo $url; ?>');">
                        <?php echo ByteSize($this->result_videos[$i]["video_size"]); ?>
            </td>
            <td onclick="DoNav('<?php echo $url; ?>');">
                        <?php echo strTime($this->result_videos[$i]["video_length"]); ?>
            </td>
            <td>
            <input type="checkbox" value="<?php echo $this->result_videos[$i]["video_name"]; ?>" title="Mark this video for deletion"/>
            </td>
        </tr> 
```

我省略了一堆代码，它们是用于构建表格的 php 代码。注意输入类型复选框值返回视频的名称。这是删除视频所必需的。我的 jquery 代码来处理每个视频的值：

```
jQuery(".deletebutton").on("click", function() {
    if (confirm("Are you sure you want to delete the selected videos?"))
    {
        var values = [jQuery('input:checkbox:checked').map(function () {
            return this.value;
        }).get()];
        alert(values);
        var $this = jQuery(this);
        jQuery.ajax({
            url: 'index.php?option=com_recordings&task=deletevideos&videonames=+values+&format=raw',
            type: "POST",
            success: function(data){
                $this.closest("tr").remove();
            }
        });
    }
}); 
```

用户可以选择一个或多个复选框并点击删除按钮。这应该返回复选框的值（所有视频名称），它们被删除，我删除表中的行。

这就是问题所在。我正在使用 Joomla 组件开发，所以我在 url 中传递值。视频的名称太长了，无法做到这一点。有人可以选择多达 100 个视频名称，这会使 url 字符串太长。任何人都可以提出替代方案吗？

**编辑：**我将其更改为基于@Dasun 反馈的数组。见上文`values`。如果我用以下方法测试这个值：

```
alert(values); 
```

我得到一个看起来像这样的输出：`blah.mp4,foo.mp4,bar.mp4`. 我期望的。但是每个视频名称都在我不想要的查询字符串上。要么我没有正确创建数组，要么我不明白你如何只传递数组对象而不是查询字符串上数组的全部内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T05:21:51.163

如果我在下面理解您的问题应该可以帮助您。

使用 Joomla 表示法检索数据。

```
$array_json = JRequest::getVar('data', 0, ''); 
```

根据要求更新了答案。

您可以使用[AJAX](http://api.jquery.com/jQuery.ajax/)传输所有数据。

```
$.ajax({
  type: 'POST',
  url: 'index.php?option=com_recordings&task=deletevideos&videonames=+values+&format=raw',
  data: values,
  dataType: 'json',
  success: function(result) {
   alert('done');
  },
  error : function() {
   alert('error');
  } 
  }); 
```

在 PHP 级别检索它们，如上所示（getVar）。然后解码通过 AJAX 发送的数据。使用`json_decode`它将解码 JSON 字符串。[阅读更多](http://php.net/manual/en/function.json-decode.php)

例如：

```
$x = json_decode($array_json);
print_r($x); 
```

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:22:40.443

也许如果您的请求是您的 php 代码中的 POST，您将寻找 $_POST['videonames'] 那么您应该将它们作为请求的数据参数传递。

还要通过它 trought GET 它应该看起来像

```
 &videonames[0]=values[0]&videonames[1]=values[1] 
```

也许这段代码会起作用：

```
 $.ajax({
     type: 'POST',
     url: 'index.php?option=com_recordings&task=deletevideos&format=raw',
     data: { 'videonames': values},
     dataType: 'json',
     success: function(result) {
      alert('done');
     },
     error : function() {
      alert('error');
     } 
     }); 
```

# c# - MongoDB事务

> ID：14161042
> 
> 赞同：3
> 
> 时间：2013-01-04T16:34:27.413
> 
> 标签：c#, mongodb, mongodb-.net-driver

我在 C# 中有如下方法：

```
private void Save(object)
{
   mongoCollection.Save(object);
   someotherRelationaldb.Save(object);
} 
```

我有两个数据库，我必须在其中保存一个对象。一个是 MongoDB，另一个是关系数据库 SQL 服务器。如果关系数据库上的提交失败，我想回滚 MongoDB 保存（我想保持保​​存的顺序）。使用 C# 驱动程序回滚的正确方法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:39:59.787

你不能。
做到这一点的唯一方法是包裹`someotherRelationaldb.Save(object);`在一个 try catch 中，然后在 catch 中执行`mongoCollection.Remove`

您可能需要一个已知的标识符属性，`object`然后可以执行以下操作：

```
mongoCollection.Remove(Query.EQ("_id", object.Id)); 
```

所以，相当不整洁，你的 Save 方法看起来有点像：

```
private void Save(object)
{
   mongoCollection.Save(object);

   try
   {
      someotherRelationaldb.Save(object);
   }
   catch
   {
      mongoCollection.Remove(Query.EQ("_id", object.Id));
   }
} 
```

另一种方法是在成功写入**后**`object`更新的存储标志属性**`someOtherRelationaldb`**

 **这也不是很理想，但是您可以修改查询以仅返回`IsPersisted`flag 为 true 的文档。

尽管我认为这两种方法都不会在高度分片的环境中发挥良好的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-16T13:55:21.660

是的，

现在可以了。

例如Java；

```
try (ClientSession clientSession = client.startSession()) {
   clientSession.startTransaction();
   collection.insertOne(clientSession, docOne);
   collection.insertOne(clientSession, docTwo);
   clientSession.commitTransaction();
} 
```

[查看更多关于 mongodb 事务的信息](https://www.mongodb.com/transactions)**

# qt - 如何在网络上为 QWebView 缓存设置缓存驱动器

> ID：14161046
> 
> 赞同：0
> 
> 时间：2013-01-04T16:34:37.290
> 
> 标签：qt, qtwebkit, qwebview

我正在使用 QWebView 来显示我的 Web 内容，我想为我的 webview 设置缓存功能，因为我想设置缓存驱动器，但是我的客户端没有足够的可用内存，我怎样才能提供一些位于我的文件夹位置服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:13:28.107

使用[QNetworkDiskCache](http://doc.qt.digia.com/qt/qnetworkdiskcache.html)。创建一个并将其[分配给](http://doc.qt.digia.com/qt/qnetworkaccessmanager.html#setCache)[QNetworkAccessManager](http://doc.qt.digia.com/qt/qnetworkaccessmanager.html)的实例（通过网页对象使用，请参阅[QWebPage::setNetworkAccessManager](http://doc.qt.digia.com/qt/qwebpage.html#setNetworkAccessManager)）。

# concurrency - 实验弱序并发的工具

> ID：14161049
> 
> 赞同：2
> 
> 时间：2013-01-04T16:34:54.123
> 
> 标签：concurrency, c++11, lock-free, atomic, formal-verification

有哪些工具可以帮助人们尝试*弱序并发？* 也就是说，在自学部分围栏、弱原子、获取/使用/释放语义、无锁算法等方面可以玩什么沙盒？

一个人想要的工具或沙箱将锻炼和强调一个弱有序的线程算法，暴露出算法理论上可能失败的各种方式。例如，在 x86 上物理运行，该工具仍然能够暴露 ARM 类型的故障。

一个开源工具会更好。请指教。

参考：

*   [C++11 标准草案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)（PDF，见第 1、29 和 30 条）；
*   [汉斯-J。Boehm 的主题概述](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2480.html)；
*   [McKenney、Boehm 和 Crowl 关于这个主题](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2664.htm)；
*   [GCC 关于该主题的发展说明](http://gcc.gnu.org/wiki/Atomic/GCCMM)；
*   [Linux 内核关于该主题的注释](http://www.kernel.org/doc/Documentation/memory-barriers.txt)；
*   [Stackoverflow 上的相关问题和答案](https://stackoverflow.com/q/12346487/1275653)
*   [另一个问题，这个比较栅栏和原子的问题](https://stackoverflow.com/q/14167767/1275653)；
*   [Cppmem](http://svr-pes20-cppmem.cl.cam.ac.uk/cppmem/index.html)（根据@KerrekSB 的建议）；
*   [Cppmem 的帮助页面](http://svr-pes20-cppmem.cl.cam.ac.uk/cppmem/help.html)；
*   [Spin](http://spinroot.com/spin/Man/Manual.html)（根据@JohnZwinck 的建议，用于分析并发系统的逻辑一致性的工具）。

（这些参考文献面向 C++11，因为这正是我接触该主题的方式。但是，据我所知，非 C++ 的答案可能是最好的，因此请随意将您的答案扩展到 C++ 之外，如您所见合身。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:32:37.460

这比您直接提出的问题要笼统得多，但请看一下“Spin”，它是并发系统的“模型检查器”。在线手册在这里：[http ://spinroot.com/spin/Man/Manual.html](http://spinroot.com/spin/Man/Manual.html)

你可能会觉得它有点“老派”的感觉，但我看不出它为什么不适合你感兴趣的工作。但是，由于它很一般，你可能需要做一些工作来教工具有关问题空间的知识。好消息是它独立于平台。坏消息是您可能需要明确地对每个计算机体系结构进行建模（例如，Spin 本质上并不知道 ARM 与 x86 的保证）。但也许其中一些工作已经在其他地方完成（我没有检查），和/或您可以分享您所做的部分工作，以便其他人可能受益。毕竟，该工具是开源的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-06T10:55:56.983

您可能有兴趣查看[http://www.cprover.org/wmm/](http://www.cprover.org/wmm/)并点击那里的链接，指向有关弱内存的工具和相应论文，特别是 CAV 2013 论文[Partial Orders for Efficient BMC of Concurrent Software](http://www.cprover.org/wmm/cav13/index.shtml)和 CAV 2014 论文[不要坐在栅栏上：自动栅栏插入的静态分析方法](http://www.cprover.org/wmm/fence13/index.shtml)可能是很好的起点。您还将在那里找到许多真实世界的示例代码和基准测试。

# java - Java String.substring 方法潜在的内存泄漏？

> ID：14161050
> 
> 赞同：16
> 
> 时间：2013-01-04T16:34:55.173
> 
> 标签：java, string, memory-leaks

我正在通过 String 类 API 并且看起来存在由 substring 方法引起的潜在内存泄漏，因为它与原始 String 共享相同的字符数组。

如果原始字符串很大，则子字符串返回的小字符串可以防止原始字符串（由大数组备份）在 Java 中进行垃圾回收。

任何想法或我是否读错了 API。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-04T16:36:23.067

如果您获取一个相当大的字符串的子字符串而不进行复制（通常通过构造函数） ，*则*可能存在内存泄漏。`String(String)`

请注意，自[Java 7u6](http://www.transylvania-jug.org/archives/5530)以来，这已经发生了变化。请参阅[https://bugs.openjdk.java.net/browse/JDK-7197183](https://bugs.openjdk.java.net/browse/JDK-7197183)。

`String`围绕实现[享元模式](http://en.wikipedia.org/wiki/Flyweight_pattern)的对象的原始假设不再被视为有效。

有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/2147783/why-does-appending-to-a-string-save-memory/2147803#2147803)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T16:43:06.257

1.  在 Java 7u6 之前就是这种情况 - 您通常会通过以下方式处理该问题：

    ```
    String sub = new String(s.substring(...)); // create a new string 
    ```

    这有效地消除了依赖关系，原始字符串现在可用于 GC。顺便说一句，这是使用字符串构造函数有意义的唯一场景之一。

2.  从[Java 7u6 开始](http://mail.openjdk.java.net/pipermail/core-libs-dev/2012-May/010257.html)，创建了一个新字符串，不再存在内存问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-09T11:54:19.603

在 Java 7 中，String 的 subString 被修改为：

```
/**
     * Returns a new string that is a substring of this string. The
     * substring begins with the character at the specified index and
     * extends to the end of this string. <p>
     * Examples:
     * <blockquote><pre>
     * "unhappy".substring(2) returns "happy"
     * "Harbison".substring(3) returns "bison"
     * "emptiness".substring(9) returns "" (an empty string)
     * </pre></blockquote>
     *
     * @param      beginIndex   the beginning index, inclusive.
     * @return     the specified substring.
     * @exception  IndexOutOfBoundsException  if
     *             <code>beginIndex</code> is negative or larger than the
     *             length of this <code>String</code> object.
     */
    public String substring(int beginIndex) {
        if (beginIndex < 0) {
            throw new StringIndexOutOfBoundsException(beginIndex);
        }
        int subLen = value.length - beginIndex;
        if (subLen < 0) {
            throw new StringIndexOutOfBoundsException(subLen);
        }
        return (beginIndex == 0) ? this : new String(value, beginIndex, subLen);
    } 
```

因此，每次使用 beginIndex 不等于 0 的 subString 时，我们都会有新的 String 对象。

# php - 针对关联（一个恶魔）数组的特定部分？

> ID：14161052
> 
> 赞同：0
> 
> 时间：2013-01-04T16:34:57.037
> 
> 标签：php, arrays, indexing, key, associative

我想尝试交换这个数组的第一个和最后一个索引：

```
 <?php
 $their_name = array(
      'Jim'   => 'dad', 
      'Josh'  => 'son', 
      'Jamie' => 'mom', 
      'Jane'  => 'daughter', 
      'Jill'  => 'daughter'
 );
 ?> 
```

所以它看起来像这样：

```
 <?php
 $their_name = array(
      'Jill'   => 'dad', 
      'Josh'  => 'son', 
      'Jamie' => 'mom', 
      'Jane'  => 'daughter', 
      'Jim'  => 'daughter'
 );
 ?> 
```

昨晚我使用这些数组做了类似的事情：

```
$temp                   = $user_name[0];     
$user_name[0]           = end($user_name);    
$count                  = count($user_name);  
$user_name[$count-1]    = $temp;             
return $user_name; 
```

我假设这些方法将是相似的。但是，$their_name[0] 返回“J”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:47:30.893

这似乎非常基本，但这就是您要问的：

```
echo $their_name['Jane'];

$their_name['Josh'] = 'son-in-law'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:34:01.053

这是针对您的特定问题的潜在解决方案...

```
$their_name = array(
  'Jim'   => 'dad', 
  'Josh'  => 'son', 
  'Jamie' => 'mom', 
  'Jane'  => 'daughter', 
  'Jill'  => 'daughter'
);
// rewind array pointer to first element
reset($their_name);
// get key name
$firstKey = key($their_name);
// get value and remove from array
$firstValue = array_shift($their_name);

// advance pointer to last element 
end($their_name);
// get key name
$lastKey = key($their_name);
// get value and remove from array
$lastValue = array_pop($their_name);

// first element using last key and first value
$firstElement = array($lastKey => $firstValue);
// last element using first key and last value
$lastElement = array($firstKey => $lastValue);

// add them to the remaining elements 
$their_name = $firstElement + $their_name + $lastElement;

var_dump($their_name);
// Result:
array(5) {
    ["Jill"]=>
    string(3) "dad"
    ["Josh"]=>
    string(3) "son"
    ["Jamie"]=>
    string(3) "mom"
    ["Jane"]=>
    string(8) "daughter"
    ["Jim"]=>
    string(8) "daughter"
} 
```

# neural-network - 创建自己的连接的人工神经网络

> ID：14161055
> 
> 赞同：7
> 
> 时间：2013-01-04T16:35:13.543
> 
> 标签：neural-network, biological-neural-network

我一直在阅读有关前馈人工神经网络 (ANN) 的文章，通常他们需要训练来修改其权重以实现所需的输出。一旦调整后，当接收到相同的输入时，它们也将始终产生相同的输出（生物网络不一定）。

然后我开始阅读关于进化神经网络的文章。然而，进化通常涉及将两个亲本基因组重新组合成一个新的基因组，没有“学习”，而是真正通过适应度测试重新组合和验证。

我在想，人脑管理它自己的联系。它创造了联系，加强了一些联系，削弱了另一些联系。

是否有允许这样做的神经网络拓扑？神经网络一旦有不良反应，要么相应地调整它的权重，并可能创建随机的新连接（我不确定大脑是如何创建新连接的，但即使我没有，创建随机突变的机会新的连接可以缓解这种情况）。一个好的反应会加强这些联系。

我相信这种类型的拓扑被称为图灵 B 型神经网络，但我还没有看到任何关于它的编码示例或论文。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T16:50:08.430

这篇论文，[An Adaptive Spiking Neural Network with Hebbian Learning](http://www.personal.psu.edu/lnl/papers/neuro2.pdf)，专门讨论了新神经元和突触的创建。从介绍：

> 传统的基于速率的神经网络和较新的脉冲神经网络已被证明对某些任务非常有效，但它们存在长期学习和“灾难性遗忘”的问题。一旦对网络进行了训练以执行某些任务，就很难使其适应新的应用程序。**为了正确地做到这一点，人们可以模仿人类大脑中发生的过程：神经发生和突触发生，或者神经元和突触的诞生和死亡。**然而，为了有效，这必须在保持当前记忆的同时完成。

如果您在 google 上使用关键字“神经发生人工神经网络”或类似关键字进行搜索，您会发现更多文章。cogsci.stackexchange.com上也有类似的[问题](https://cogsci.stackexchange.com/questions/214/neural-networks-with-biologically-plausible-accounts-of-neurogenesis)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T09:53:01.327

整洁的网络以及级联添加自己的连接/神经元，通过构建结构来解决问题，以创建对刺激的特定响应

# webkit - 什么是与 WebKit 相关的“Chrome 客户端”？

> ID：14161056
> 
> 赞同：1
> 
> 时间：2013-01-04T16:35:14.247
> 
> 标签：webkit

WebKit 源代码和文档经常使用术语“Chrome 客户端”来描述用于前端显示的某个类。我对“Chrome”一词的含义感到困惑，因为它似乎与 Google Chromium 端口无关。很难在网络上搜索任何关于此的信息，因为搜索词“chrome”和“client”不可避免地会带来与 Google Chrome 浏览器相关的[结果](http://www.google.com/#hl=en&tbo=d&sclient=psy-ab&q=webkit+chrome+client&oq=webkit+chrome+client&gs_l=serp.3...1371.1371.0.1512.1.1.0.0.0.0.51.51.1.1.0.les%3B..0.0...1c.lmD0Sj12Y1w&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=a808cb29d0b3169b&bpcl=40096503&biw=1444&bih=989)，或者只是给我 WebKit 源代码的链接。

谁能解释一下 Chrome 客户端是什么，以及在这种情况下“Chrome”是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-19T23:45:56.537

[`ChromeClient`](http://trac.webkit.org/browser/trunk/Source/WebCore/page/ChromeClient.h?rev=140260#L89)是 WebCore 用来与构建在 WebCore 之上的多个 WebKit API 层交互的抽象接口。它的功能以包含特定 WebCore 的视图的用户界面（又名“chrome”）方面为中心`Page`。这种抽象很重要，因为在 WebCore 之上构建了许多单独的 API 层，并且每个 API 层处理用户界面的方式即使在同一操作系统上运行的 API 层之间也可能不同（例如，WebKit 和 WebKit2 有完全不同的需求） ）。

举个简单的例子，`ChromeClient::runJavaScriptAlert`由 JavaScript`alert`函数调用。[`runJavaScriptAlert`Cocoa`WebView`类](http://trac.webkit.org/browser/trunk/Source/WebKit/mac/WebCoreSupport/WebChromeClient.mm?rev=140260#L430)的实现只是`WebUIDelegate`像人们期望的那样调用适当的方法。其他情况，例如工具提示的显示，完全由具体`ChromeClient`实现直接处理，而不涉及任何`WebView`'s 委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T19:46:40.183

ChomeClient 是一个界面，它将显示 GUI 元素（如警报、弹出窗口、提示、窗口（window.open））委托给 WebKit 端口。

基本上我们可以说窗口相关的操作，比如滚动，通过窗口的无效部分请求重绘，..等

每个 WebKit 端口都通过覆盖 ChromeClient 接口来提供自己的实现。例如 Qt 可能有 ChromeClientQt.h & ChromeClientQt.cpp & GTK 可能有 ChromeClientGTk.h & ChromeClientGTk.cpp。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T07:47:18.770

Webkit 是 Safari 和 Chrome 使用的 Web 浏览器渲染引擎（以及其他，但这些是流行的）。

CSS 选择器上的 -webkit 前缀是只有该引擎才能处理的属性，与 -moz 属性非常相似。我们中的许多人都希望这会消失，例如 -webkit-border-radius 将被标准的border-radius 取代，并且对于多个浏览器，您不需要针对同一事物的多个规则。这实际上是“预规范”功能的结果，这些功能旨在不干扰标准版本的出现。

对于您的更新：...不，它实际上与 IE 无关，至少在 9 之前 IE 使用称为 Trident 的不同渲染引擎。

# c# - NumericUpDown 用于触摸屏应用

> ID：14161059
> 
> 赞同：1
> 
> 时间：2013-01-04T16:35:24.567
> 
> 标签：c#, winforms

我正在修改带有触摸屏界面的 Winform 应用程序。它在 GUI 中有很多带有大字体的 NumericUpDown 控件。但是每个控件仍然有一个手指的微小向上/向下箭头。有没有办法让箭头变大？或者有什么方法可以让箭头按列对齐？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T16:39:12.877

您可以轻松地创建一个复合用户控件，该控件由一个数字向上向下（没有按钮）和两个按钮组成。这将使您可以完全控制外观，并且实际上不会增加​​太多复杂性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-17T02:29:55.717

我只是有同样的问题，触摸屏应用程序。在 ILSpy 中进行一些挖掘可以获得可以通过反射设置的字段。当然，需要注意的是 MS 可以随时更改实现：

```
var field = typeof(NumericUpDown).GetField("defaultButtonsWidth", System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance);
field.SetValue(nudMyNumericUpDown, 30); 
```

# .net - 哪个更好地从字符串中删除长字符串的字母字符 - RegEx vs IsLetter

> ID：14161062
> 
> 赞同：1
> 
> 时间：2013-01-04T16:35:27.310
> 
> 标签：.net, regex, vb.net, loops

请让我知道哪个在性能 RegEx 或带 IsLetter 的循环方面更好。

我已经尝试了这两种方法，发现 RegEx 比 For Loop 花费的时间多一点......

```
Dim vStr1 As String, vStr2 As New StringBuilder

vStr1 = "Testadfasdfadsfasdfadsfas12312dfadsfdsa23131fadsfsadfsadf1sss 23 -1234"    

Method 1
-------------------
vStr2.Clear()
For Each vChr In vStr1
    If Char.IsLetter(vChr) = False Then vStr2.Append(vChr)
Next
vStr1 = vStr2.ToString
-------------------------

Method 2
-------------------
vStr1 = Regex.Replace(vStr1, "[A-Za-z^s]", "") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:39:57.887

以下是如何找出答案：

1.  [从http://www.linqpad.net/](http://www.linqpad.net/)下载 LINQPad
2.  编写 2 个替换的函数
3.  使用`Stopwatch`超过 10000 次迭代检查它们的性能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:06:59.740

循环方法会更快。无需为一个人编译正则表达式，在这些简单的情况下，RegEx 几乎总是松散的。

在方法 1 中，如果将 vStr2 的容量设置为 vStr1 的长度，它将避免缓慢的内存分配。

```
Dim vStr1 As String
vStr1 = "Testadfasdfadsfasdfadsfas12312dfadsfdsa23131fadsfsadfsadf1sss 23 -1234"
Dim vStr2 As New StringBuilder(vStr1.Length) 
```

此外，如果您多次执行此操作，请使用 vStr2.Clear() 而不是丢弃 StringBuilder 并分配一个新的。

在方法 2 中，您可以通过编译 RegEx 来改进。我也不确定你为什么在字符列表中有 ^s，这不会给出不同的结果吗？

# powershell - 在 IIS 6 中使用脚本禁用目录浏览

> ID：14161067
> 
> 赞同：0
> 
> 时间：2013-01-04T16:35:57.783
> 
> 标签：powershell, vbscript, iis-6, adsi

我正在尝试编写一个脚本来禁用所有目录/虚拟目录和 IIS 网站上的目录浏览。

我尝试在 PowerShell 中使用 ADSI，但很难理解如何枚举当前目录，并且不确定如何将 Directory Browsing 上的属性更改为 false。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:28:58.790

```
$iis = [ADSI]"IIS://$ComputerName/W3SVC/1/ROOT"

# list directories
$iis.Children | select name,@{n='DirBrowsingEnabled';e={$_.psbase.InvokeGet('EnableDirBrowsing')}}

# disable directory browsing on all directories
$iis.Children | where {!$_.psbase.InvokeGet('EnableDirBrowsing')} | foreach {
    $_.put('EnableDirBrowsing',$false)
    $_.psbase.CommitChanges()
} 
```

# asp.net - Handsontable - 输入验证，限制为包括小数点在内的数字

> ID：14161073
> 
> 赞同：1
> 
> 时间：2013-01-04T16:36:15.073
> 
> 标签：asp.net, validation, numeric, handsontable

我正在使用 Handsontable jQuery 插件来构建类似网格的 excel。最后，我必须将此表数据保存到一个 excel 文件中。我正在使用 ASP.NET。

我的问题：我想限制表格的所有单元格只取包括小数点在内的数字。我打算使用 OnBeforeChange 回调。我坚持严格执行此验证，因为单元格不是输入框（因此，我不能使用 jQuery.numeric 插件或类似插件）。我必须从头开始使用数学函数和代码，还是有其他更简单的方法来完成这个？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T20:16:24.913

您必须将数字属性添加到列：

```
jQuery( '#dataTable').handsontable({
    data: data,
    ...,
    columns: [
        {
            // To allow only numbers 
            type: 'numeric', 
            // Mask, if you enter 0 it will display 0.00,
            // if you enter 4 it will display 4.00
            // if you enter .5 it will display 0.50
            // if you enter 4.5 it will display 4.50
            // if you enter NaN it will display 0.00
            format: '0.00' 
        }
    ]
}); 
```

Handsontable 使用 Numeral.js 来格式化数字，你可以在这里查看：http: [//numeraljs.com/](http://numeraljs.com/)

# html - 当悬停在标题上时，它们的容器会在 IE9 上移动

> ID：14161076
> 
> 赞同：0
> 
> 时间：2013-01-04T16:36:21.100
> 
> 标签：html, internet-explorer

当悬停在标题上时，它们的容器会在 IE9 上移动

查看链接 [http://www.kbh.org.il/](http://www.kbh.org.il/)

它也发生在 IE7 上。

这是一个 Joomla 网站。抱歉，如果代码不好。

另一个可能相关的问题是选择文本时的奇怪行为。选择不准确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:35:17.217

您`PHP`可能做了一些意想不到的事情，因为您的 HTML 页面是`quirks mode`由于在页面顶部看到的一些残留内容而呈现的，之前`DOCTYPE`：

```
<iframe src="http://www.google.com/" width=1 height=1 style="visibility: hidden"></iframe><?xml version="1.0" encoding="utf-8"?> 
```

**可以肯定的是，我在IE8** for XP中没有看到任何容器移动，但在尝试时我确实看到了异常的文本选择。强制网页以**IE8 标准模式**呈现允许文本选择正常工作。

# ios - 如何设置 AddressBookAccessRequest alertView 的文本？

> ID：14161081
> 
> 赞同：3
> 
> 时间：2013-01-04T16:36:34.980
> 
> 标签：ios

我知道在 iOS 6 中我们应该首先请求访问联系人，如下所示： ![应用程序想访问您的联系人](../Images/80d926e305bb244bc1d1fcba8e02b3ca.png)

但是现在，我想知道***如何在警报视图中添加详细消息***，就在警报标题和两个按钮之间。我确实看到一些应用程序已经做到了。

我使用[ABAddressBookCreateWithOptions](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html)和[ABAddressBookRequestAccessWithCompletion](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html)，但前一个选项保留为 NULL 而后一个只接受回调块。

我搜索了很多，比如[另一个 Q](https://stackoverflow.com/questions/12648244/programmatically-request-access-to-contacts-in-ios-6)、[iOS 6 Release Notes](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)和[Apple Doc](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)，但没有成功。

非常感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T16:58:07.100

您可以`NSContactsUsageDescription`为此目的使用密钥。

将此键添加到您的 info.plist 并添加您要显示的消息作为值。

> **NSContactsUsageDescription**
> 
> NSContactsUsageDescription (String - iOS) 描述了应用访问用户联系人的原因。当系统提示用户允许访问时，此字符串将显示为对话框的一部分。
> 
> iOS 6.0 及更高版本支持此密钥。

请查看[**InfoPlistKeyReference**](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html)以获取更多密钥。

# drupal-6 - 如何在 Drupal 6 中使用带有提要模块的令牌

> ID：14161085
> 
> 赞同：1
> 
> 时间：2013-01-04T16:36:51.793
> 
> 标签：drupal-6, token, drupal-feeds

我正在尝试从 Excel 电子表格的自定义单元格中导入数据，但不知道如何使用映射标记。这将是其中之一：

Excel_sheet 标记 [sheet-cell-1-1] 表格中给定单元格的格式化字符串。

所以我想如果我输入 [sheet-cell-1-1] 作为源，它应该从电子表格中导入第一个单元格。但事实并非如此。有什么建议么？

# java - Hibernate SchemaExport 和 Persistence 单元

> ID：14161090
> 
> 赞同：5
> 
> 时间：2013-01-04T16:37:00.577
> 
> 标签：java, hibernate, persistence-unit

我上一个问题的后续问题：[Generate an SQL DB creation script with Hibernate 4](https://stackoverflow.com/questions/14014247/generate-an-sql-db-creation-script-with-hibernate-4)

目标是让命令行工具能够生成具有给定持久性单元的 SQL 模式的文件（类似于 Hibernate 工具中的 hibernatetool-hbm2ddl Ant 任务）。

根据我之前问题的答案，这可以通过`org.hibernate.tool.hbm2ddl.SchemaExport`.

我不想将所有实体添加到`Configuration`（如上一个答案中所建议的）我想指定一个`PersistenceUnit`.

是否可以*将*持久性单元添加到 Hibernate `Configuration`？

就像是

```
Properties properties = new Properties();
properties.put( "hibernate.dialect", "org.hibernate.dialect.PostgreSQLDialect" );
...
EntityManagerFactory entityManagerFactory =
    Persistence.createEntityManagerFactory( "persistentUnitName", properties );
Configuration configuration = new Configuration();

... missing part ...

SchemaExport schemaExport = new SchemaExport( configuration );
schemaExport.setOutputFile( "schema.sql" );
... 
```

**根据评论中的要求编辑**示例`persistence.xml`。每个类都有注释`@Entity`

```
<persistence
    xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0"
>

    <persistence-unit
        name="doiPersistenceUnit"
        transaction-type="JTA"
    >

        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>jdbc/doi</jta-data-source>

        <class>ch.ethz.id.wai.doi.bo.Doi</class>
        [...]
        <class>ch.ethz.id.wai.doi.bo.DoiPool</class>

        <exclude-unlisted-classes>true</exclude-unlisted-classes>

        <properties>
            <property name="hibernate.show_sql"                     value="false" />
            <property name="hibernate.format_sql"                   value="false" />
            <property name="hibernate.connection.characterEncoding" value="utf8" />
            <property name="hibernate.connection.charSet"           value="utf8" />
        </properties>

    </persistence-unit>

</persistence> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T09:12:22.380

好吧，如果您的类是通过 xml 映射 ( s) 映射的 - 您可以使用和`hbm`将包含 xmls 的文档或 jar 文件直接添加到`Configuration`实例中。`config.addJar(myJarFile)``config.add(myXmlFile)`

但是，如果您希望扫描带*注释*的类 - 我知道通过 Hibernate 没有这样直接的选项（`addPackage`添加元数据而*不是*类）。

您*可以*实现自己的扫描逻辑并添加所有带注释的类`config.addAnnotatedClass(myAnnotatedClass)`（或者可能根据您知道的包含 ORM 类的特定包执行此操作，从而可能节省一些时间）。

**更新 2**

哦，更好的是，您可以`ManagedType`通过以下方式迭代持久性单元的 s `getManagedTypes()`：

```
EntityManagerFactory entityManagerFactory =
    Persistence.createEntityManagerFactory( unitName, config.getProperties() );
final Set<ManagedType<?>> managedTypes =
    entityManagerFactory.getMetamodel().getManagedTypes();
    for ( ManagedType<?> managedType : managedTypes ) {
    final Class<?> javaType = managedType.getJavaType();
    config.addAnnotatedClass( javaType );
} 
```

**更新**

您可以通过检查相关来确定`PersistenceUnit`每个`Entity`-*无需解析 xml*`EntityManagerFactory` -

```
Class aClass = ... // get the class from your scanning
EntityManagerFactory entityManagerFactory =
    Persistence.createEntityManagerFactory( unitName, config.getProperties() );
ManagedType<?> managedType = null;
try {
    managedType = entityManagerFactory.getMetamodel().managedType( aClass );
} catch ( IllegalArgumentException e ) {
    // happens when aClass isn't a type managed by the persistence unit
}
if ( managedType != null ) {
    config.addAnnotatedClass( aClass );
} 
```

确保`Configuration`为每个持久性单元使用不同的实例。否则，带注释的类只会累积，DDL 也会累积。

我试过了，效果很好——为两个不同的持久性单元打印了两个不同的 DDL。

# c# - 使用 CompareTo 对具有两个参数的列表进行排序

> ID：14161095
> 
> 赞同：2
> 
> 时间：2013-01-04T16:37:22.453
> 
> 标签：c#, list, sorting, compareto

我目前正在使用列表中包含的对象类型中的“CompareTo”方法对 C# 列表进行排序。我想按 WBS（工作分解结构）对所有项目进行升序排序，我可以使用以下代码很好地管理它：

```
 public int CompareTo(DisplayItemsEntity other)
        {
            string[] instanceWbsArray = this.WBS.Split('.');
            string[] otherWbsArray = other.WBS.Split('.');

            int result = 0;

            for (int i = 0; i < maxLenght; i++)
            {
                if (instanceWbsArray[i].Equals(otherWbsArray[i]))
                {
                    continue;
                }
                else
                {    
                    result = Int32.Parse(instanceWbsArray[i]).CompareTo(Int32.Parse(otherWbsArray[i]));
                    break;
                }
            }
            return result;
        } 
```

现在，我希望能够考虑多个参数（如项目名称中的字母顺序），然​​后再考虑第二个参数，即 WBS。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T16:41:50.940

我不知道您的课程的详细信息，因此我将提供一个使用字符串列表和 LINQ 的示例。`OrderBy`将按字母顺序对字符串进行排序，`ThenBy`然后按长度对它们进行排序。您可以轻松地根据您的需要调整此示例。

```
var list = new List<string>
{
    "Foo",
    "Bar",
    "Foobar"
};
var sortedList = list.OrderBy(i => i).
    ThenBy(i => i.Length).
    ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T16:44:55.293

在像您这样的情况下，我们通常会这样做：

```
public int CompareTo( SomeClass other )
{
    int result = this.SomeProperty.CompareTo( other.SomeProperty );
    if( result != 0 )
        return result;
    result = this.AnotherProperty.CompareTo( other.AnotherProperty );
    if( result != 0 )
        return result;
    [...]
    return result;
} 
```

PS 发布代码时，请尝试仅包含与您的问题相关的代码。您发布的代码中有很多我不需要阅读的东西，这实际上让我的眼睛受伤。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T16:55:02.993

我喜欢 Eve 的回答，因为它很灵活，但我有点惊讶没有人提到创建自定义[`IComparer<T>`](http://msdn.microsoft.com/en-us/library/8ehhxeaf.aspx)实例

`IComparer<T>`是一个通用接口，它定义了一种用于比较该类型的两个实例的方法`T`。使用的优点`IComparer<T>`是您可以为常用的每个排序顺序创建实现，然后在必要时使用它们。这允许您在 types 方法中创建默认排序顺序`CompareTo()`并单独定义替代顺序。

例如

```
public class MyComparer
 : IComparer<YourType>
{
  public int Compare(YourType x, YourType y)
  {
     //Add your comparison logic here
  }
} 
```

`IComparer<T>`对于组合特别有用，您可以使用比较器来比较给定类型的某些属性，该比较器使用另一个对属性类型进行操作的比较器。

如果您需要对您无法控制的类型定义排序，它也非常有用。它的另一个优点是它不需要 LINQ，因此可以在旧代码中使用（.Net 2.0 以上）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T16:43:22.267

首先比较项目名称的字母顺序，如果不相等则返回值，如果不相等则根据第二个值进行比较

```
 public int CompareTo(DisplayItemsEntity other)
    {
       if(other.ProjectName.CompareTo(this.ProjectName) != 0)
       {
           return other.ProjectName.CompareTo(this.ProjectName)
       }

       //else do the second comparison and return

       return result;
    } 
```

# heroku - 重命名heroku应用程序的正确方法是什么？

> ID：14161098
> 
> 赞同：60
> 
> 时间：2013-01-04T16:37:43.637
> 
> 标签：heroku, heroku-toolbelt

似乎不是从命令行执行此操作的方法，当我从站点执行此操作时，我在尝试时遇到了这个问题`git push heroku master`：

```
 !  No such app as [previous app name]. 
```

这就像更改我在 git 中指向应用程序的方式一样简单吗？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-04T17:09:37.007

你试过了`heroku apps:rename NEWNAME`吗？

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-11-10T16:25:02.343

为什么要全部大写？

```
heroku apps:rename my_new_app_name 
```

这是了解更多信息的好地方：

[如何重命名您的 Heroku 应用程序](https://devcenter.heroku.com/articles/renaming-apps)

如果有人好奇，这种方法不需要任何进一步的配置，您应该立即进行修改。在撰写本文时，我能够在几秒钟内更改我的应用程序的名称，然后如果我愿意，可以再次这样做。希望这可以帮助。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-03-18T04:15:58.707

`heroku apps:rename new_name --app old-app-name`

^ 为我工作

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-08-27T17:35:53.877

用这个：

```
heroku apps:rename --app old_name new_name 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-02-13T12:03:19.793

如果您在网页上更改应用程序的名称，您应该更新 Git 遥控器

`git remote rm heroku heroku git:remote -a newname`

[https://devcenter.heroku.com/articles/renaming-apps](https://devcenter.heroku.com/articles/renaming-apps)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-10T17:34:47.023

试试这个命令：

```
heroku rename new_app_name 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-05-09T21:53:51.180

```
heroku rename new-name-app 
```

总是对我有用，但有关规则的更多信息，请关注此[页面](https://devcenter.heroku.com/articles/heroku-command)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-18T10:26:17.103

如果您想重命名您的 heroku 应用程序，请使用：heroku apps:rename new_name

请将“new_name”替换为您要为您的应用指定的名称。确保您不包含任何“https://”，因为这会给您带来问题。只需将 new_name 替换为您的应用名称

例如 heroku 应用程序：重命名葡萄柚博客

完成此操作后，heroku 要求您为应用程序的所有其他本地结帐更新 git 遥控器。您可以通过运行以下命令来执行此操作：heroku git:remote -a new_name

再次，将 new_name 替换为您之前输入的名称

例如 heroku git:remote -a grapefruitblog

# qt - 我应该使用哪个 qt 小部件来显示消息？

> ID：14161100
> 
> 赞同：23
> 
> 时间：2013-01-04T16:37:49.563
> 
> 标签：qt

QStatusBar 每次只有一行，我无法跟踪历史记录或将历史记录保存在日志文件中。

所以我想在我的主窗口中有一个停靠小部件，它能够以多行方式和自动滚动方式显示我需要的消息，然后自动保存到日志文件中。

我的问题是如何在 Qt 中做到这一点？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-04T16:54:12.787

如果您正在寻找类似于 QtCreator 的“应用程序输出”窗格的内容，那么一个简单的`QPlainTextEdit`就可以完成这项工作。`QPlainTextEdit::setReadOnly(true)`如果您不希望用户能够编辑其内容（即只有您的应用程序可以写入），您可以调用。

如果您想要自动滚动并自动保存到日志文件，则需要对其进行子类化。这里有一些东西可以帮助您入门：

```
class MyLogWindow : public QPlainTextEdit
{
    Q_OBJECT
/* snip */
public:
    void appendMessage(const QString& text);

private:
    QFile m_logFile;
};

void MyLogWindow::appendMessage(const QString& text)
{
    this->appendPlainText(text); // Adds the message to the widget
    this->verticalScrollBar()->setValue(this->verticalScrollBar()->maximum()); // Scrolls to the bottom
    m_logFile.write(text); // Logs to file
} 
```

我让你来处理样板文件（打开和关闭文件，处理换行符等）。

现在，只需将 的实例`MyLogWindow`放在您的.`QMainWindow``MyLogWindow::appendMessage()`

# php - 如何从表单操作中获取 url？像在 php 中抓取或解析

> ID：14161103
> 
> 赞同：0
> 
> 时间：2013-01-04T16:38:00.830
> 
> 标签：php

我想从 HTML 表单操作中获取 URL。我怎样才能在 PHP 中得到这个？表单标签如

```
<form method="post" action="my.aspx? id="aspnetForm" enctype="multipart/form-data">

</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:04:16.650

您可以尝试使用 DOM 加载 HTML，然后使用 xpath 提取信息：

```
// create a DOM document object and load your html
$doc = new DOMDocument();
$doc->loadHtml($yourHtml);

// create an Xpath selector for the document
$selector = new DOMXpath($doc);

// the following query will return all <form> elements
// you may refine it
$result = $selector->query('//form');

// get the first item (to keep the example simple)
$form = $result->item(0);

// get the value of the action attribute
$url = $form->getAttribute('action'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:55:27.573

您可以使用正则表达式。但我认为你会简单地进行下一步：

1.  使用**stristr**函数检测表单标记的开头 - 搜索字符串“<form”
2.  再次使用**stristr**查找字符串“action=”的开头
3.  使用**substr**截断前 7 个字符以开始 url 字符串
4.  使用**strpos**检测 url 字符串后的第一个空格
5.  使用**substr**获取 url 字符串
6.  从此字符串中删除空格和引号。用于此**str_replace**或**trim**功能

我认为这将帮助您研究如何解析任何 html 标签和其他内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:15:37.317

你可以这样..

```
 <?php
       $string = <<<XML
       <form method="post" action="my.aspx? id="aspnetForm" enctype="multipart/form-data"></form>
       XML;

      $xml = new SimpleXMLElement($string);

      $att = 'action';
      $attribute = $xml->form[0]->attributes()->$att; // answer
      ?> 
```

# asp.net - 在哪些情况下 HttpResponse.SupportsAsyncFlush 返回 false

> ID：14161105
> 
> 赞同：3
> 
> 时间：2013-01-04T16:38:06.187
> 
> 标签：asp.net, .net, iis, httpcontext

根据 MSDN ，在[`HttpResponse`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.aspx)名为的对象上有一个属性，[`SupportsAsyncFlush`](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.supportsasyncflush.aspx)它返回属性的值。[`HttpWorkerRequest.SupportsAsyncFlush`](http://msdn.microsoft.com/en-us/library/system.web.httpworkerrequest.supportsasyncflush.aspx)然而，当我`HttpWorkerRequest.SupportsAsyncFlush`通过反编译器查看该属性时，我可以看到它已经返回`false`，这让我觉得我错过了一些东西。

由于`HttpWorkerRequest`是一个抽象类，我认为托管层（IIS等）实现了这个类并在`HttpWorkerRequest.SupportsAsyncFlush`需要时覆盖了虚拟属性？如果是这种情况，在`HttpContext.Response.SupportsAsyncFlush`IIS 下哪些情况下会返回 false？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:08:57.480

所有 IIS 7.0+ 主机都会覆盖此属性以返回 true。如果正在使用自定义主机，则主机将不得不竭尽全力覆盖该属性以返回 true。例如，Cassini 主机不支持异步刷新，因此不会覆盖该属性。

tl;dr：如果您在 IIS 或 IIS Express 中运行，则可以保证这将返回 true。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-04T16:48:33.067

如果支持异步刷新操作，则返回 true。否则它将返回 false。

# android - android中的每小时列表视图

> ID：14161107
> 
> 赞同：-1
> 
> 时间：2013-01-04T16:38:13.957
> 
> 标签：android, android-layout

我正在尝试实现一个简单的日历作为我的第一个 Android 应用程序，但我不知道如何实现由`ListView`所有可用时间组成的每日视图，包括那些分配给他们的事件。

我应该生成空的时间并将它们插入到一个`ListView`？有没有更好的办法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:35:11.167

您插入`ListView`您想要向用户展示的内容。如果您想在没有事件的情况下显示一排空案例，那么是的，您将这些时间放入`ListView`. 但是，如果您要表示仅显示事件的小时数的折叠视图，则不包括其他小时数。

一个好主意是只表示带有事件的时间，但扩展列表以动态包含用户触摸它的当天的其他时间，反之亦然。

`ExpandableListView`如果您想拥有更像层次结构的东西，您也可以使用 an ，但`ExpandableListView`如果您想动态添加或删除项目到您的`ListView`.

# javascript - 在控制组中触发 .click() 事件

> ID：14161109
> 
> 赞同：0
> 
> 时间：2013-01-04T16:38:16.583
> 
> 标签：javascript, jquery, html, click

试图为我的控制组触发 .click() 事件。

编码的 HTML：

```
<div data-role="content" class="ui-content" role="main">
            <div id="gradegeoradio" data-role="fieldcontain">
                <fieldset data-role="controlgroup" data-type="horizontal">
                    <legend>
                    </legend>
                    <input id="grade" name="choose" value="Grade" type="radio"/>
                    <label for="grade">
                        Grade
                    </label>
                    <input id="geometry" name="choose" value="Geometry" type="radio"/>
                    <label for="geometry">
                        Geometry
                    </label>
                </fieldset>
            </div>... 
```

DOM 中的 HTML：

```
<div class="ui-content" role="main" data-role="content"> <div id="gradegeoradio" class="ui-field-contain ui-body ui-br" data-role="fieldcontain"> <fieldset class="ui-corner-all ui-controlgroup ui-controlgroup-horizontal" data-type="horizontal" data-role="controlgroup"><div class="ui-controlgroup-label" role="heading"> </div> <div class="ui-controlgroup-controls"> <div class="ui-radio"> </div> <div class="ui-radio"><input id="geometry" type="radio" value="Geometry" name="choose"> </input><label class="ui-btn ui-corner-right ui-controlgroup-last ui-radio-on ui-btn-active ui-btn-up-c" for="geometry" data-corners="true" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-theme="c"> <span class="ui-btn-inner ui-corner-right ui-controlgroup-last"> <span class="ui-btn-text">

                        Geometry

</span></span></label></div></div></fieldset></div> 
```

JQuery 试图触发事件：

```
$("#geometry").click(); 
```

事件监听器：

```
$("#geometry, #grade").click(function(){do stuff after click} 
```

我对这一切都很陌生，任何帮助将不胜感激。抱歉，DOM 中的 HTML 都是集群的，我复制并粘贴了它，但我不知道如何格式化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:58:54.753

只是为了总结评论中给出的答案。

您需要先绑定，然后触发。所以：

```
$("#geometry, #grade").click(function(){do stuff after click} 
```

必须先到

```
$('#geometry').click(); 
```

示例：http: [//jsfiddle.net/X2ExM/1/](http://jsfiddle.net/X2ExM/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:46:30.387

如果您尝试将事件绑定到您的几何单选按钮，我认为这是您尝试做的事情，您可以使用类似这样的东西

```
$('#geometry, #grade').bind('click', function() {
    //do some thing
});
$('#geometry, #grade').trigger('click'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:52:06.160

采用

```
 bind and trigger... 
```

使用这个，这是工作

```
 $('#gradegeoradio').bind('click', function() {
      alert("hello to all");
     });

     $('#gradegeoradio').trigger('click'); 
```

# r - R geom_ribbon（ggplot2）中的空带

> ID：14161112
> 
> 赞同：1
> 
> 时间：2013-01-04T16:38:30.947
> 
> 标签：r, ggplot2

我有以下名为“finaldata”的数据框

```
 structure(list(Dates = structure(c(325213200, 325216800, 325220400, 
325224000, 325227600, 325231200, 325234800, 325238400, 325242000, 
325245600, 325249200, 325252800, 325256400, 325260000, 325263600, 
325267200), tzone = "UTC", class = c("POSIXct", "POSIXt")), Qobs = c(0.7679669, 
0.7679669, 0.7679669, 0.7679669, 0.7679669, 0.7679669, 0.7679669, 
0.7679669, 0.7679669, 0.7679669, 0.7679669, 0.7679669, 0.7679669, 
0.7679669, 0.7679669, 0.7679669), LB1 = c(6.856253e-14, 6.856253e-14, 
6.856253e-14, 6.856253e-14, 6.856253e-14, 6.856253e-14, 6.856253e-14, 
-8.273674e-07, -4.344798e-06, -7.625017e-06, -1.004544e-05, -1.155634e-05, 
1.842427e-10, 1.813103e-10, 1.74717e-10, 1.658628e-10), UB1 = c(36.84034, 
36.72503, 36.61008, 36.49549, 36.38126, 36.26738, 36.15387, 36.04071, 
35.9279, 35.81546, 35.70336, 35.59162, 35.48023, 35.36925, 35.25862, 
35.14833), LB2 = c(0.3167181, 0.3142281, 0.3117576, 0.3093065, 
0.3068748, 0.3044625, 0.3020694, 0.3076093, 0.3253525, 0.3389268, 
0.3457364, 0.3467479, 0.3533797, 0.3724299, 0.3848245, 0.3882089
), UB2 = c(35.31174, 35.17496, 35.03872, 34.903, 34.7678, 34.63314, 
34.49901, 34.36992, 34.24928, 34.12819, 34.00447, 33.878, 33.75473, 
33.63942, 33.53223, 33.5228)), class = "data.frame", row.names = c(NA, 
-16L), .Names = c("Dates", "Qobs", "LB1", "UB1", "LB2", "UB2"
)) 
```

我使用以下代码绘制了 1 条曲线和 2 条重叠的色带：

```
xlabel <- "Time"
ylabel <- "Q"

p <- ggplot(data=finaldata, aes(x = Dates)) +
geom_ribbon(aes(ymin=LB1,ymax=UB1, fill = 'Res1'), alpha = 0.5) +
geom_ribbon(aes(ymin=LB2,ymax=UB2, fill = 'Res2'), alpha = 0.5) +
geom_line(aes(y=Qobs, color=factor(1))) +   
xlab(" ") +
scale_y_continuous("Q", lim=c(0,175)) +
scale_fill_manual("", values = c('Res1' = 'mistyrose3', 'Res2' = 'mistyrose'),labels = c(label1,label2)) +
scale_colour_manual(breaks = 1, values = "lightskyblue4",  labels = "Obs") +
theme(legend.position=c(0.85,0.85), legend.title = element_blank(), legend.background = element_blank()) 
```

结果是下图，它在第一个功能区中显示了一个空的垂直带。

![在此处输入图像描述](../Images/61edf28498ae272c52fc56dd3704017d.png)

当 LB1 为负时，似乎没有绘制色带。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-21T13:46:54.257

正如@BenBolker 指出的那样，`scale_y_continuous`删除所有超出限制的数据，`coord_cartesian`将图形缩放到您设置的限制而不更改数据。有关该图的简化示例，请参见下面的代码。

```
ggplot(data=finaldata, aes(x = Dates)) +
geom_ribbon(aes(ymin=LB1,ymax=UB1, fill = 'Res1'), alpha = 0.5) +
geom_ribbon(aes(ymin=LB2,ymax=UB2, fill = 'Res2'), alpha = 0.5) +
geom_line(aes(y=Qobs))+ geom_line(aes(y=LB1))+
coord_cartesian(ylim=c(0,175)) 
```

# share - Alfresco Share：从 Java 中检索配置数据

> ID：14161113
> 
> 赞同：2
> 
> 时间：2013-01-04T16:38:30.993
> 
> 标签：share, alfresco

我想`share-config-custom.xml`从 Share webapp 中的 Java bean 访问数据。

什么等效于以下 javascript 语法（访问配置根对象）但在 Java 上下文中：

```
config.scoped['RepositoryLibrary']['root-node'] 
```

是否将 share-config-custom 转换为 bean 本身？或者是否有从 Java 读取它的 API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:41:04.937

首先，没有“合理”的方式来使用这个 API “查看”一个 XML 配置文件。通常，`ConfigService`创建一个从各种来源合并的配置。但是无论如何都不需要直接查看 XML。

话虽如此，Javascript 对象`config`实际上是一个 `org.springframework.extensions.webscripts.ScriptConfigModel`.

要在 Java 中获得等价的东西，请参考`ConfigService`. 要获取引用，让 spring 将其注入到您的自定义 bean 中：

```
<property name="configService" ref="web.config" /> 
```

调用`configService.getGlobalConfig()`应该让你相当于`config.scoped`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T15:00:51.587

我知道这已经回答了，但安德烈亚斯的回答只让我走到了一半。配置类现在实际上是 XMLConfigService。

这是一个适用于 Enterprise 4.1.* Alfresco 的代码片段：

Java 类

```
import org.springframework.extensions.config.xml.XMLConfigService;

public class PDFValidate extends BaseJavaDelegate implements ExecutionListener
{
    protected XMLConfigService configService;

    public void setConfigService( XMLConfigService scriptConfigModel )
    {
        this.configService = scriptConfigModel;
    } 
```

豆注册：

```
<bean id="AbstractWorkflowDelegate" parent="baseJavaDelegate" abstract="true" depends-on="activitiBeanRegistry" />

<bean id="PDFValidate" parent="AbstractWorkflowDelegate" class="com.epnet.alfresco.metadata.listener.PDFValidate">
    <property name="repository" ref="repositoryHelper" />
    <property name="configService" ref="web.config" />
</bean> 
```

从那里，您可以在您的 java 代码中使用 configService 来获取配置值。XMLConfigService 位于我的 Alfresco 版本的 spring-surf-core-configservice-1.2.0-SNAPSHOT.jar 中。

# java - GWT 在构建路径中找不到 org.json

> ID：14161116
> 
> 赞同：1
> 
> 时间：2013-01-04T16:38:35.580
> 
> 标签：java, eclipse, gwt

我有一个奇怪的问题。我从 Google Web Toolkit 收到一条错误消息，说明如下：

```
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract 
com.pluspopularity.model.LinkItem com.pluspopularity.web.client.GreetingService.greetServer(java.lang.String) 
throws java.lang.IllegalArgumentException' threw an unexpected exception: 
java.lang.NoClassDefFoundError: org/json/JSONException 
```

现在，我可以找到很多关于这个`java.lang.NoClassDefFoundError: org/json/JSONException`异常的问题，但它们似乎都被 GWT 2.5 版修复了，因为`org.json`从那时起就包含在`gwt-dev.jar`包中。

我有 2.5 版，可以`org.json`在我的 GWT SDK 库中看到。

所以我不知道这个错误来自哪里。

我注意到：GWT SDK 文件夹包含很多 jar 文件，但是当我在 Eclipse 中将它作为 SDK 添加时只包含 4 个：`gwt-user.jar`、`gwt-dev.jar`和. 在 2.5 之前的 GWT 版本中有关此错误的一些问题中，我看到提到了一个文件。该文件位于我的 GWT SDK 文件夹中，但它不包含在 Eclipse 的 SDK 库中。我通过 Eclipse 重新安装了 GWT SDK，但仍然只包含这 4 个文件。`validation-api-1.0.0.GA-sources.jar``validation-api-1.0.0.GA.jar``gwt-servlet-deps.jar`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:42:10.797

您在运行时（显然）在服务器端收到错误。

如果 Eclipse 插件没有为你做这件事（我不知道它是否应该做），你应该去获取（或`gwt-servlet-deps.jar`任何包含.`org.json``WEB-INF/lib``gwt-servlet.jar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:47:34.850

org.json.JSONException 存在于**json-** 20090211.jar 中。

![在此处输入图像描述](../Images/425750c3c6de1a7164a5e7d014200595.png)

gwt-user 和 request-factory-server 都依赖它。在 maven 设置中，它会通过我们的 request-factory 自动复制，因为两者都在运行时范围内。

# java - 将 JFileChooser 放置在特定位置

> ID：14161122
> 
> 赞同：0
> 
> 时间：2013-01-04T16:38:45.680
> 
> 标签：java, swing

我正在开发一个摇摆应用程序，需要在一个表单上放置两个 JFileChoosers。我似乎无法将它们放置在特定位置（要求它们彼此相邻放置，而不是一个在另一个之上）。编码：

```
public class ServerGUI extends JFrame implements ActionListener {
     private JPanel JPanel1 = null;
     private JButton startStopButton = null;
     private JTextField portSelect = null;
     private JLabel portLabel = null;
     private JFileChooser rootDir = null;
     private JLabel rootLabel = null;
     private JFileChooser maintenanceDir = null;
     private JLabel maintenanceLabel = null;
     private JCheckBox maintenanceMode = null;
     private JLabel serverInfo = null;

     ServerGUI() {
       /// create an instance of our server
       webserver = new WebServer();
       /// build form controls -- with default options
       JPanel1 = new JPanel();
       startStopButton = new JButton("Start Server");
       portSelect = new JTextField("10008");
       portLabel = new JLabel("Port:");
       rootDir = new RootChooser(System.getProperty("user.dir"));
       /// choose directories only
       rootDir.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
       rootLabel = new JLabel("Choose web root directory:");
       maintenanceDir = new MainChooser(System.getProperty("user.dir"));
       /// choose directories only
       maintenanceDir.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
       maintenanceLabel = new JLabel("Choose maintenance root directory:");
       maintenanceMode = new JCheckBox("Switch to maintenance mode");
       /// not selected by default
       maintenanceMode.setSelected(false);
       serverInfo = new JLabel("Start");
       /// add controls onto form 
       add(JPanel1, "Center");
       serverInfo.setBounds(0, 0, 20, 10);
       JPanel1.add(serverInfo);
       startStopButton.addActionListener(this);
       startStopButton.setBounds(35, 10, 2, 3);
       startStopButton.setLayout(null);
       JPanel1.add(startStopButton);
       JPanel1.add(maintenanceMode);
       JPanel1.add(portLabel);
       JPanel1.add(portSelect);
       /// set layout for directory choosers
       // rootDir.setBounds(0, 0, 100, 100);
       // rootDir.setLayout(null);
       JPanel1.add(rootLabel);
       JPanel1.add(rootDir);
       // maintenanceDir.setBounds(130, 20, 100, 100);
       // maintenanceDir.setLayout(null);
       JPanel1.add(maintenanceLabel);
       JPanel1.add(maintenanceDir); 
       }
     } 
```

我尝试了 setBounds()、setLocation() 用于标签、setBound() 和 setLayout(null) 用于按钮之间的变化，并创建了 JFileChooser 的扩展类以尝试对 Dlg 位置进行硬编码。

```
 static class RootChooser extends JFileChooser {
       private static final long serialVersionUID = 1L;

       protected JDialog createDialog(Component parent)
            throws HeadlessException {
          JDialog dlg = super.createDialog(parent);
          dlg.setLocation(0, 40); // new location does not apply
          return dlg;
       }

       RootChooser(String filePath) {
        super(filePath);
       }
    } 
```

和

```
 static class MainChooser extends JFileChooser {
    private static final long serialVersionUID = 1L;

    protected JDialog createDialog(Component parent)
            throws HeadlessException {
        JDialog dlg = super.createDialog(parent);
        dlg.setLocation(200, 140); // does not work as expected
        return dlg;
    }

    MainChooser(String filePath) {
        super(filePath);
    }
 } 
```

如何将这些控件放置在特定位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:55:09.437

这样做

```
maintenanceDir = new MainChooser(System.getProperty("user.dir")); 
```

`maintenanceDir`声明时无济于事，因为`JFileChooser`您现在将自定义向下转换`JFileChooser` `MainChooser`为默认值`JFileChooser`。

问题是您没有创建自己的自定义实例，而是没有自定义方法`JFileChooser`的普通实例：`JFileChooser``createDialog(Component parent)`

```
 ...
 private JFileChooser rootDir = null;
 private JLabel rootLabel = null;
 private JFileChooser maintenanceDir = null;
 ... 
```

应该：

```
 ...
 private RootChooser rootDir = null;
 private JLabel rootLabel = null;
 private MainChooser maintenanceDir = null;
 ... 
```

# ios - SUP 2.1.3 - iOS 本机应用程序 - createCore 中存在异常

> ID：14161126
> 
> 赞同：0
> 
> 时间：2013-01-04T16:39:12.913
> 
> 标签：ios, sybase, sup

我正在使用 Sybase Unwired Platform 2.1 ESD 3 开发 iOS 应用程序。我在保存同步参数之前收到此错误：

```
Terminating app due to uncaught exception 'SUPPersistenceException', reason: 'exception is in createCore: Illegal key generator status: the key generator must be populated first.' 
```

这是源代码：

```
SUPConnectionProfile *sp = [SyncMBOFlowInboxSyncMBOFlowInboxDB getSynchronizationProfile];

[sp setAsyncReplay:NO];
[sp setUser:user];
[sp setPassword:pass];
[sp setServerName:server];

NSUserDefaults *usr = [NSUserDefaults standardUserDefaults];

SyncMBOFlowInboxFlowInboxSynchronizationParameters *pp = [SyncMBOFlowInboxFlowInbox getSynchronizationParameters];
[pp setS_USER_ID:[usr stringForKey:@"netUser"]];
[pp save]; <--The error appear after run this

[SyncMBOFlowInboxSyncMBOFlowInboxDB synchronize]; 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:20:48.260

每次启动应用程序时（即使您处于离线状态并且不是第一次同步），您都需要在尝试同步之前初始化您的 SUP 应用程序和相关数据库，否则您会收到该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:23:30.167

我找到了解决方案。

如果我使用 SynchronizationParameters，我需要先使用 [SyncMBOFlowInboxSyncMBOFlowInboxDB subscribe]。并在我完成使用数据库时取消订阅。

# c# - 在 VS2010 中为具有多个项目的解决方案创建部署包

> ID：14161128
> 
> 赞同：3
> 
> 时间：2013-01-04T16:39:20.963
> 
> 标签：c#, asp.net, visual-studio-2010, deployment, package

我有一个包含 14 个项目的解决方案。我正在尝试为此解决方案创建一个部署包。我可以使用向导打包单个项目以部署在我们的远程服务器上；但是，我很难找到有关将解决方案与多个项目打包的任何信息。

首先，是否可以为解决方案而不是项目创建部署包；

其次，任何人都能够指出有关此主题的任何信息（将解决方案与多个项目打包 - 而不是如何为项目创建部署包）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:52:24.147

是否可以为解决方案而不是项目创建部署包？

不知道您为解决方案创建一个包的目的，而只是简单地回答您的问题 - 不，您不能打包整个解决方案。VS 2010 和 2012 中的包选项是创建一个可部署的项目，其中包括网站等人工制品，用于另一种环境（如测试或生产）的 SQL。

但是，您可以在 VS2012中**压缩解决方案，这是一项新功能，方法是右键单击解决方案以创建可移植的解决方案的缩小版本。**

最好的信息来源是[微软](http://blogs.msdn.com/b/webdev/archive/2009/02/09/web-packaging-creating-a-web-package-using-vs-2010.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:12:15.747

部署远不止于 Visual Studio 提供的部署。

有关高学习曲线和所有选项，请参阅：

Wix 3.6 wix.codeplex.com

我们使用此工具来解决您描述的问题。

# php - PHP 邮件功能 Carbon Copys

> ID：14161129
> 
> 赞同：0
> 
> 时间：2013-01-04T16:39:25.783
> 
> 标签：php, email

我在使用 php 的邮件功能时遇到问题。

这是代码：

```
 public function send_email($emailInfo)
    {
    // email fields: to, from, subject, and so on
    $to             = $emailInfo['toEmail'];
    $from           = $emailInfo['fromEmail'];
    $subject        = $emailInfo['subject'];
    $message        = $emailInfo['message'];
    //$message          = $this->base_directory.'/application/views/emailtemplates/ticketresponse'($emailInfo['viewVars'], true);
    $headers        = 'From: '.$emailInfo['fromEmail'].' <'.$emailInfo['fromEmail'].'>';

    // boundary
    $semi_rand = md5(time());
    $mime_boundary = "==Multipart_Boundary_x{$semi_rand}x";

    // headers for attachment
    $headers .= "\nMIME-Version: 1.0\n" . "Content-Type: multipart/mixed;\n" . " boundary=\"{$mime_boundary}\"";

    if (is_array($emailInfo['cc']))
        {
        $headers .= 'Cc: ';
        foreach ($emailInfo['cc'] as $cc)
            {
            $headers .= $cc. ",";
            }
        $headers = substr($headers, 0, -1);
        $headers .= "\r\n";
        }   

    // multipart boundary
    $message = "This is a multi-part message in MIME format.\n\n" . "--{$mime_boundary}\n" . "Content-Type: text/plain; charset=\"iso-8859-1\"\n" . "Content-Transfer-Encoding: 7bit\n\n" . $message . "\n\n";
    $message .= "--{$mime_boundary}\n";

    // send
    @mail($to, $subject, $message, $headers, '-f'.$emailInfo['fromEmail']);
    } 
```

该函数确实发送了电子邮件，并且确实填充了 cc 收件人数组，但是这些收件人没有收到任何电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:56:01.530

我强烈建议避免使用 PHP 的内置`mail()`函数。除了发给站点管理员的最基本的恐慌电子邮件之外，它真的不适合任何目的。

除此之外（包括添加抄送地址等简单的东西），我建议使用像样的邮件程序类，例如[PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)。它将使您的代码*更*简单、更可靠。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:50:53.037

提供的任何附加标头必须用`\r\n`ie分隔`CRLF`。您正在为 cc 标头执行此操作，但不是为其他标头。这可能会产生影响。

```
$headers .= "\nMIME-Version: 1.0\r\n";
$headers .= "Content-Type: multipart/mixed;\r\n";
$headers .= " boundary=\"{$mime_boundary}\"\r\n"; 
```

# android - BitmapFactory.Options 抛出 nullPointerException

> ID：14161130
> 
> 赞同：0
> 
> 时间：2013-01-04T16:39:28.267
> 
> 标签：android, nullpointerexception

我有以下代码尝试重新缩放位图：

```
 FileInputStream stream = new FileInputStream(new File(getCachePath(context), makeCacheFileName(uri)));

            //Decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            value = BitmapFactory.decodeStream(stream, null, o);

            value = Bitmap.createScaledBitmap(
                    value, // bitmap to resize
                    o.outWidth, // new width
                    o.outHeight, // new height
                    true); // bilinear filtering

            stream.close(); 
```

日志如下：

```
 01-04 16:24:18.101: E/AndroidRuntime(27524): FATAL EXCEPTION: main
  01-04 16:24:18.101: E/AndroidRuntime(27524): java.lang.NullPointerException
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:344)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at com.network.ImageThreadLoader$DiskCache.get(ImageThreadLoader.java:295)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at com.network.ImageThreadLoader.loadImageFromCache(ImageThreadLoader.java:185)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at com.products.ProductListAdapter.switchImages(ProductListAdapter.java:119)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at com.products.ProductListAdapter.access$0(ProductListAdapter.java:79)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at com.products.ProductListAdapter$1.run(ProductListAdapter.java:73)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at android.os.Handler.handleCallback(Handler.java:587)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at android.os.Handler.dispatchMessage(Handler.java:92)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at android.os.Looper.loop(Looper.java:130)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at android.app.ActivityThread.main(ActivityThread.java:3683)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at java.lang.reflect.Method.invokeNative(Native Method)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at java.lang.reflect.Method.invoke(Method.java:507)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
  01-04 16:24:18.101: E/AndroidRuntime(27524):  at dalvik.system.NativeStart.main(Native Method) 
```

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:32:24.413

Nick，BitmapFactory.decodeStream 必须返回 null，这意味着它无法解码流。可能文件中的值不正确或者您无法打开文件。检查“流”是否为空。

# jquery - jquery滚动，在页面滚动时更改导航活动类，相对于部分

> ID：14161132
> 
> 赞同：13
> 
> 时间：2013-01-04T16:39:30.210
> 
> 标签：jquery, jsfiddle

[http://jsfiddle.net/motocomdigital/gUWdJ/](http://jsfiddle.net/motocomdigital/gUWdJ/)

我正在使用 jquery 滚动技术，我想适应我的项目。

请在此处将我的项目示例视为小提琴[http://jsfiddle.net/motocomdigital/gUWdJ/](http://jsfiddle.net/motocomdigital/gUWdJ/)

目前，您可以看到我的导航链接自动为相对于`<section>`'s 的滚动设置动画。

我的问题是，使用该方法，当部分到达窗口顶部时`$(window).scroll`，如何`.active`向我添加一个类？`nav a`

因此，例如，如果用户向下滚动页面（而不是导航链接），我希望将活动类添加为相对导航链接。指示您在页面上的位置。

*每次我猜测用户向下滚动页面时，都必须删除活动类然后添加。*

此外，您还必须考虑固定导航栏的 28px 高度，偏移顶部窗口。

任何人都可以向我展示一种我可以尝试使用或适应的技术，或者使用我的 jsfiddle 向我展示 :)

任何帮助将不胜感激，在此先感谢！

[http://jsfiddle.net/motocomdigital/gUWdJ/](http://jsfiddle.net/motocomdigital/gUWdJ/)

![在此处输入图像描述](../Images/a5ed8f902c0a2acfdb1e09f92ca29348.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-04T17:10:15.913

如果您想要更通用的功能：

[看演示](http://jsfiddle.net/gUWdJ/3/)

```
$(window).scroll(function() {
    var windscroll = $(window).scrollTop();
    if (windscroll >= 100) {
        $('nav').addClass('fixed');
        $('.wrapper section').each(function(i) {
            if ($(this).position().top <= windscroll - 100) {
                $('nav a.active').removeClass('active');
                $('nav a').eq(i).addClass('active');
            }
        });

    } else {

        $('nav').removeClass('fixed');
        $('nav a.active').removeClass('active');
        $('nav a:first').addClass('active');
    }

}).scroll();​ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T17:06:13.560

你可以这样做：http: [//jsfiddle.net/gUWdJ/1/](http://jsfiddle.net/gUWdJ/1/)

```
$(window).scroll(function() {

    if ($(this).scrollTop() < $('section[data-anchor="top"]').offset().top) {
       $('nav a').removeClass('active');
    }

    if ($(this).scrollTop() >= $('section[data-anchor="top"]').offset().top) {
      $('nav a').removeClass('active');
      $('nav a:eq(0)').addClass('active');
    }
    if ($(this).scrollTop() >= $('section[data-anchor="news"]').offset().top) {
      $('nav a').removeClass('active');
      $('nav a:eq(1)').addClass('active');
    }
    if ($(this).scrollTop() >= $('section[data-anchor="products"]').offset().top) {
      $('nav a').removeClass('active');
      $('nav a:eq(2)').addClass('active');
    }
    if ($(this).scrollTop() >= $('section[data-anchor="contact"]').offset().top) {
      $('nav a').removeClass('active');
      $('nav a:eq(3)').addClass('active');
    }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T15:31:04.807

我继续修改了 A. Wolf 的脚本，因为我需要确保我的菜单项以负的顶部差异而不是 0 点亮。这比创建一个单独的函数要好得多，并且避免了创建一个每个菜单项的单击事件。我还将修改此脚本以考虑菜单中的最后一项，如果倒数第二项是，它应该自动突出显示。我想我的非常相似但不同，因为我在我的主要突出功能之外处理了我的每个循环。我的修改的另一个好处是考虑到在菜单项内的链接中包含图像，并考虑到元素的高度以及该元素的底部何时到达页面顶部，这是突出显示的时间在一个新的开始之前结束。

```
function highlight(item)
{
var itemTop = jQuery(item).position().top;

var windowTop = jQuery(window).scrollTop(); 
var topDifference = (windowTop - itemTop); 

var itemHeight = jQuery(item).height();
var bottomDifference = topDifference - itemHeight; 

var menuId = jQuery('#nav-icons li a').attr('href');
if (menuId = item)
{
    if(topDifference > -1 && bottomDifference < 0)
    {
        jQuery("#nav-icons li a[href='" + item + "']").parent().addClass('active');
        jQuery("#nav-icons li a[href!='" + item + "']").parent().removeClass('active');
    }
    else {
        jQuery("#nav-icons li a[href='" + item + "']").parent().removeClass('active');
    }
}
}
jQuery('#nav-icons li a').each(function(){
var eachAttr = jQuery(this).attr('href');
highlight(eachAttr);
}); 
```

# wpf - Wpf datagrid不刷新动态

> ID：14161137
> 
> 赞同：0
> 
> 时间：2013-01-04T16:39:58.687
> 
> 标签：wpf, multithreading, datagrid

`TabResultadoBusqueda`我有以下代码，`Datagrid`.

我的问题是当我单击此窗口的一个按钮时，它会冻结，直到操作完成。

我希望用户在`Datagrid`加载时可以做其他事情，因为执行操作的时间是 1 分钟。

示例代码事件`Click`之一`Button`：

```
 TabResultadoBusqueda.ItemsSource = null;
 TabResultadoBusqueda.ItemsSource = (IEnumerable<articuloPOCO>)cambioDeArticuloListaAArticuloPOCOlista(m.todosArticulosPAGINADOS(0, 50));

           TabResultadoBusqueda.Dispatcher.BeginInvoke(DispatcherPriority.Background,
                     new Action(
                         () => aaaa1()
                                  )

                 ); 
```

aaa1的代码：

```
for (int j = 2; j < 15; j++)
        {
            ((List<articuloPOCO>)TabResultadoBusqueda.ItemsSource).AddRange((IEnumerable<articuloPOCO>)cambioDeArticuloListaAArticuloPOCOlista(m.todosArticulosPAGINADOS(j, 50)));
            TabResultadoBusqueda.Items.Refresh();

        } 
```

任何帮助都会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:57:11.983

在单独的线程上执行长时间运行的操作。这将使您的 UI 线程保持畅通和响应。看起来`BackgroundWorker`对你的情况有好处。在这里阅读[http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# c# - Windows 8 应用程序 - Webview 控件 (C#)。注入 JavaScript 以更改用户代理字符串

> ID：14161141
> 
> 赞同：0
> 
> 时间：2013-01-04T16:40:21.347
> 
> 标签：c#, javascript, windows-8, windows-store-apps, windows-store

我正在尝试在 Windows 8 应用程序中更改 Webview 的用户代理。目前，我正在这样做：

```
 [DllImport("urlmon.dll", CharSet = CharSet.Ansi)]
    private static extern int UrlMkSetSessionOption(int dwOption, 
    string pBuffer, int dwBufferLength, int dwReserved);
    const int URLMON_OPTION_USERAGENT = 0x10000001; 
```

然后，如果我需要将 UA 更改为 iPhone，例如：

```
 string ua = "Mozilla/5.0 (iPhone; CPU iPhone OS 6_0 like Mac OS X)" + 
"AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25";
            UrlMkSetSessionOption(URLMON_OPTION_USERAGENT, ua, ua.Length, 0); 
```

这完美地工作。但不幸的是，如果我要将此应用程序提交到 Windows 应用商店，我将无法使用此方法，因为*UrlMkSetSessionOption*在 Windows 8 应用程序中不受官方支持。

在寻找替代品时，我遇到了[这个](https://stackoverflow.com/a/13775640/1949034)。然而，尽管这样可行，但页面呈现非常糟糕，几乎没有显示任何图像或其他元素。

所以我希望另一种方法是使用*WebView.InvokeScript*方法并注入一些 JavaScript 来更改 UA。老实说，问题在于我是 JavaScript 的初学者。

我做了更多的搜索，显然这样的东西（[在这里找到](https://stackoverflow.com/a/1307088/1949034)）会起作用：

```
navigator.__defineGetter__('userAgent', function(){
return 'Mozilla/5.0 (iPhone; CPU iPhone OS 6_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25' // customized user agent
});

navigator.userAgent; // 'foo' 
```

但就像我说的，我完全是 Javascript 的初学者。那么我应该什么时候注入代码呢？我是否需要在 JavaScript 中侦听在触发时运行此代码的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-15T17:51:47.437

这很简单。

```
 string ua = "Mozilla/5.0 (iPhone; CPU iPhone OS 6_0 like Mac OS X)" + "AppleWebKit/536.26 (KHTML, like Gecko) Version/6.0 Mobile/10A5376e Safari/8536.25";
            Uri targetUri = new Uri(url);
            HttpRequestMessage hrm=new HttpRequestMessage(HttpMethod.Get,targetUri);
            hrm.Headers.Add("User-Agent",ua);
            webView1.NavigateWithHttpRequestMessage(hrm); 
```

# php - 将字符串转换为 JSON，通过 JQuery.Ajax 获取

> ID：14161147
> 
> 赞同：0
> 
> 时间：2013-01-04T16:40:41.597
> 
> 标签：php, javascript, ajax, json, split

我的 php 代码通过这个链接产生类似的东西`getPower.php?year=2012&country=tr`

```
"Kasan":[[1,50]]
"Tasan":[[1,51],[2,52],[3,52]]
"Hasan":[[1,50]]
"Masan":[[1,51],[2,52],[3,52]] 
```

使用此代码；

```
$row = $result->fetch_assoc();

echo json_encode($row['teamName']). ":" ;

putPowerbyTeam($db,$row['teamID'],$year); //End with echo "json_encode($returnArray);"  

echo "\n"; 
```

我正在使用这段代码将它们转换为 JavaScript 对象；

```
$.ajax({type: "GET",
url: "getPower.php",
data: {year : "year", country : "country"},
success: function(JSONText) {

    var lines = JSONText.split('\n');

    $.each(lines,function(lineNo,line)
                    {
        var mainItems = line.split(':');
        chart.series[lineNo].name = jQuery.parseJSON(eval(mainItems[0]));
        chart.series[lineNo].setData(jQuery.parseJSON(eval(mainItems[1])), true);
    });

},
error: function (xhr, ajaxOptions, thrownError) {
    alert(xhr.status);
    alert(thrownError);
} 
```

我是一个错误，说不能拆分空值。所以，返回 null 但我不能确定这个 javascrip 代码的任何部分。

那么，为什么会返回 null 呢？我能做些什么？其余的好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:44:57.260

你可以`dataType`这样使用：

```
$.ajax({type: "GET",
url: "getPower.php",
data: {year : "year", country : "country"},
dataType: 'json',
success: function(JSONText) {

// do something 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:45:37.103

不要尝试使用多个`echo`and构建您的 JSON `json_encode`。使用一个大的关联数组，然后`echo json_encode(array)`.

像这样的东西：

```
$array = array();

$teamName = $row['teamName'];

$array[$teamName] = putPowerbyTeam($db,$row['teamID'],$year); // Return the array instead of doing json_encode($returnArray);

echo json_encode(array); 
```

# php - Magento：检索未缓存的系统配置值

> ID：14161149
> 
> 赞同：3
> 
> 时间：2013-01-04T16:40:48.680
> 
> 标签：php, magento

我有一个脚本，通过 RESTful Web 服务将订单数据发送到第 3 方系统。该系统要求每个请求都发送一个唯一 ID，该 ID 从下一个请求开始自动递增。

我已经通过在 Magento 的表中为此添加一个变量来实现这一点`core_config_data`，并且作为我的代码的一部分，调用下面的函数来获取 ID 的下一个值，为下一个请求递增它。

```
class MyProject
{
    public function getNextApiId() {
        // Get the next ID.
        $id = Mage::getStoreConfig('myproject/next_api_id');

        // Increment the stored value for next time.
        $nextId = $id + 1; // change $id++ by $id + 1 otherwise the result of $nextId = $id - 1;
        Mage::getModel('core/config')->saveConfig('myproject/next_api_id',$nextId);

        // Refresh the config.
        Mage::getConfig()->cleanCache();
        Mage::getConfig()->reinit();

        // Return the ID.
        return $id;
    }
} 
```

如果我用我的脚本发送一个请求，这工作正常 - 值递增，下一个 ID 用于脚本的下一次执行。

但是，如果我在同一脚本执行中循环处理多个请求，则该值似乎已被缓存。下面的代码应该说明一般流程，尽管为了简洁起见我已经减少了它：

```
function sendRequest($item) {
    $apiId = $MyProject->getNextApiId();

    // Build and send request body
}

foreach($items as $item) {
    sendRequest($item);
} 
```

这将导致初始 ID 号用于所有`$items`.

和尝试刷新配置缓存似乎`cleanCache()`根本`reinit()`不起作用。关于如何阻止值被缓存的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T17:13:56.850

必须以不同的方式清理缓存，您必须重置存储的缓存并再次初始化它，从而导致循环。如果你没有循环，它也会被清理，但它需要商店的第二个 url 请求，它将初始化缓存。

试试这个：

```
function getNextApiId() {
    // Get the next ID.
    $id = Mage::getStoreConfig('myproject/next_api_id');

    // Increment the stored value for next time.
    $nextId = $id + 1;

    Mage::getConfig()->saveConfig('myproject/next_api_id',$nextId);

    // Refresh the config.
    Mage::app()->getStore()->resetConfig();

    // Return the ID.
    return $id;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T17:19:28.013

如果您只需要将唯一的 id 传递给 api，为什么还要费心费力 - 读取和写入 db、清除配置缓存等？

在 PHP 中有很多方法可以做到这一点，这里是一种：

```
$uniqueId = uniqid(); 
```

[http://php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

否则，如果您必须使用问题中的方法创建您的 ID，请确保您正确保存配置：

```
Mage::getConfig()
    ->saveConfig('myproject/next_api_id', $nextId)
    ->cleanCache();
Mage::app()->reinitStores(); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T14:38:08.827

Magento 配置适用于不经常更改的值，这些值会改变某物的行为。将这个值存储在配置中不仅不符合目的，而且会给站点带来性能问题。每次清除配置缓存时，站点都必须将配置文件中继到存储在缓存中的缓存 XML 文档中，这会给站点的加载时间带来不必要的延迟。

我的建议是执行以下操作之一：

一种。使用基于包含您的进程 ID 和 unix 时间戳（微秒）的生成模式的 UID。

湾。使用核心变量模型将您的值存储在：`Mage::getModel('core/variable')->loadByCode('myproject_next_api_id');`

我对选项“b”的警告是，如果您有可能此脚本可能同时运行多个实例，您*将*遇到竞争条件，这需要将 ID 存储在您通过自定义原子更新查询更新的数据库中.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-08T09:41:22.027

这是一个简单的替代方案：

```
protected function _getLastId()
{
    $id = Mage::app()->useCache('config') ?
        Mage::getResourceModel('core/config_data_collection')
            ->addFieldToFilter('path', self::XML_PATH_LAST_ID)
            //->addFieldToFilter('scope', $scope)
            //->addFieldToFilter('scope_id', $scopeId)
            ->getFirstItem()
            ->getValue() :
        Mage::getStoreConfig(self::XML_PATH_LAST_ID);
    return (int) $id;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-31T11:36:29.873

选择的答案以及许多其他涉及清除缓存的答案是完全可耻的，因为这`Mage::app()->getStore()->resetConfig();`将导致`Mage::getConfig()->reinit();`您最应该调用的答案...永远不会！

它将触发 Magento 完全重新解析 XML 配置，这非常**慢**，随着插件及其配置文件数量的增加，更是如此。

我见过一些插件开发人员复制粘贴这样的东西，最终给使用这些插件的人带来了巨大的性能问题。不仅通过使用这些代码（也如此），而且还巧妙地管理填充这些代码以在每个请求时调用，有效地导致配置缓存效率下降到 0！

如果您可以简单地更新更改的内容，为什么要清除整个配置缓存？

```
Mage::app()->getStore()->setConfig('foo', 'bar'); 
Mage::getConfig()->saveConfig('foo', 'bar')->saveCache(); 
```

第一行仅更新请求生命周期的配置项（运行时缓存）

第二行确保将相同的内容保存到`core_config_data`并更新缓存。

但无论哪种方式，@davidalger 的回答都正确地指出这`core_config_data`意味着很少更改数据。

# java - 将数据从视图发送到控制器

> ID：14161160
> 
> 赞同：0
> 
> 时间：2013-01-04T16:41:23.797
> 
> 标签：java, jsp, vraptor

嗨，我正在使用一个名为 Vraptor 的巴西框架，现在我的 JSP 中有一个对象

```
${solicitacao } 
```

现在我想将此对象发送到控制器或后端，而无需添加输入来放置对象的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:36:35.713

一般而言，如果不使用输入字段或在 url 中嵌入数据，就无法将数据从视图发送到控制器。但是，如果您在控制器的先前调用中已经有了日期，则可以将对象放在会话中以供以后检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:12:54.960

可以将会话用作：classe.campo 注意servlet在服务器上运行，并且“控制器”只有在浏览器屏幕中成为exeidos数据后才会被调用，因此您必须至少使用一个对象'input type ='隐藏'"

# android - SurfaceView 崩溃 - 为什么？

> ID：14161161
> 
> 赞同：1
> 
> 时间：2013-01-04T16:41:36.387
> 
> 标签：android, surfaceview

现在我正在尝试测试 SurfaceView。它显示在我的预览中。它以我的自定义 SurfaceView ('RollView') 的名称显示灰色背景。每次我尝试测试它。它只是立即崩溃。当我删除 com.hovanky.roll.RollView xml 标签时，它可以工作。但我失去了我的表面观点。我究竟做错了什么？

在 xml 中，我放入了我的自定义 SurfaceView

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:layout_width="match_parent"
         android:layout_height="match_parent">

<com.hovanky.roll.RollView
        android:id="@+id/rollview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:orientation="vertical"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

</RelativeLayout>
</FrameLayout> 
```

在我的活动中，这扩展了活动。我给我的 SurfaceView 提供句柄

```
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mRollView = (RollView) findViewById(R.id.rollview); 
```

然后，我绘制了我的自定义 SurfaceView 的骨架。

```
 class RollView extends SurfaceView implements SurfaceHolder.Callback {
 private SurfaceHolder holder;

 public RollView(Context context) {
    super(context);
    holder= getHolder();
    holder.addCallback(this);
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:45:07.283

将您的 RollView 类更改为：

```
 class RollView extends SurfaceView implements SurfaceHolder.Callback {
     private SurfaceHolder holder;

     public RollView(Context context) {
        super(context);
        holder= getHolder();
        holder.addCallback(this);
    }

    public RollView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }
   //your code here... 
```

# tomcat - 通过命令提示符重启 Tomcat：访问被拒绝

> ID：14161164
> 
> 赞同：0
> 
> 时间：2013-01-04T16:41:51.690
> 
> 标签：tomcat, command-line, windows-services, tomcat6, restart

我知道我可以使用

```
sc start Tomcat6 
```

或者

```
net start Tomcat6 
```

启动 tomcat 服务，但是我收到错误“访问被拒绝”。如何通过命令提示符重新启动tomcat服务并克服错误？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:45:05.307

如果您使用的是 Windows Server 2008 或更高版本 (R2)，则需要以管理员身份运行命令提示符。创建“cmd”或 c:\windows\system32\cmd.exe 的桌面快捷方式。然后右键单击快捷方式并“以管理员身份运行”。

# javascript - Javascript 和 DOM - insertBefore 只执行一次

> ID：14161168
> 
> 赞同：2
> 
> 时间：2013-01-04T16:42:06.217
> 
> 标签：javascript, dom

我有一个简单的脚本，将表行复制到全局 javascript 变量*（我知道在 javascript 中使用全局变量不是一个好主意，但这仅用于开发）*和一个在“onClick”上插入行副本的函数“ 事件。

它执行并插入一行。问题是它只会插入一行一次。

这是一个示例表

```
<table id="myTable">
    <tbody>
        <tr id="copyRow">
            <td>Sample Cell</td>
        </tr>
        <tr>
            <td><a href="javascript:void();" onClick="insertRow(copy_row, this.parentNode.parentNode.parentNode)">Insert Row</a></td>
        </tr>
    </tbody>
</table> 
```

这是我的示例 javascript：

```
<script type="text/javascript">
    copy_row = document.getElementByID('copyRow').cloneNode(true); //Runs when page first runs

    function insertRow(insertRow, insertBeforeMe){
     insertBeforeMe.parentNode.insertBefore(insertRow, insertBeforeMe)  
    }
</script> 
```

我很难过

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:48:18.773

您应该在每次调用 insertRow 函数时克隆节点，以便获得元素的新副本，而不是回收一个克隆的行。

```
copy_row = document.getElementByID('copyRow'); //Runs when page first runs

function insertRow(insertRow, insertBeforeMe){
 insertBeforeMe.parentNode.insertBefore(insertRow.cloneNode(true), insertBeforeMe)  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:46:45.993

它甚至不应该运行一次。JavaScript 区分大小写，因此您必须使用：

```
document.getElementById 
```

不是

```
document.getElementByID 
```

这是我[的脚本的工作版本](http://jsfiddle.net/eGY8V/)。

# mysql - 将大型 .sql 文件导入 MySQL

> ID：14161173
> 
> 赞同：12
> 
> 时间：2013-01-04T16:42:20.847
> 
> 标签：mysql, mysql-workbench, database-restore

我得到了一个**非常**大的 mysql 备份文件。它大约是 630 MB……我猜有人认为将图像存储在数据库中是个好主意……无论如何，我需要以某种方式在 MySQL 中恢复数据。但由于文件大小，我无法完成它。

起初我尝试用 MySQL Workbench 来做。但是当我尝试导入文件时，它给了我以下错误：

> 无法分配 xxxxx 字节来读取文件 C:\backup.sql

然后我尝试通过命令提示符进行操作。我输入了以下内容`cmd`：

```
C:\> mysql -u user -pPassword database < C:\backups.sql 
```

这最终给了我以下警告：

> ERROR 2006 (HY000) at line 68230: MySQL server has gone away

猜猜这也是因为大文件？

我对如何恢复数据没有其他想法。这仍然可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T17:01:30.213

增加[`wait_timeout`](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_wait_timeout)和/或[`interactive_timeout`](http://dev.mysql.com/doc/refman/5.0/en/server-system-variables.html#sysvar_interactive_timeout)应该有帮助。首先检查当前值：

```
C:\> mysql -hlocalhost -uroot -proot

mysql> SHOW VARIABLES LIKE 'wait_timeout'; 
```

如果这非常低（例如 30 秒），则增加它（例如 5 分钟）：

```
mysql> SET SESSION wait_timeout = 300;
mysql> SET SESSION interactive_timeout = 300; 
```

然后执行你的 SQL 文件：

```
mysql> \. database.sql 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-02T09:43:52.750

我有一个 3.5G 的转储文件，我尝试使用 PhpMyAdmin 和 MySql 工作台导入它，但没有成功。所以我只是用控制台来运行它

```
# mysql -u user_name -pYour_passwd your_db < your_dump.sql 
```

效果很好

# asp.net - 在 DAL 层中使用 PetaPoco 的正确方法（ASP.NET Web Forms VB.NET）

> ID：14161176
> 
> 赞同：1
> 
> 时间：2013-01-04T16:42:23.063
> 
> 标签：asp.net, vb.net, orm, data-access-layer, petapoco

我正在尝试使用 PetaPoco 为 ASP.NET Web 表单项目生成我的 DAL 层。

```
Namespace Eva.Dal.Polls  
Public Partial Class EVAMOD_PL_CategoryDb
    Private db As Eva.Dal.Core.EvaDb

    Public Function Insert(a As EVAMOD_PL_Category) As Object
        Return db.Insert(a)
    End Function

    Public Sub New()
        db = New Eva.Dal.Core.EvaDb
    End Sub
End Class

Public Partial Class EVAMOD_PL_GL_CategoryDb
    Private db As Eva.Dal.Core.EvaDb

    Public Function Insert(a As EVAMOD_PL_GL_Category) As Object
        Return db.Insert(a)
    End Function

    Public Sub New()
        db = New Eva.Dal.Core.EvaDb
    End Sub
End Class
End Namespace 
```

特别是我对如何打开数据库感兴趣。在 PetaPoco 网站上有这个例子

```
// Create a PetaPoco database 
objectvar db=new PetaPoco.Database("connectionStringName");
// Show all articles    
foreach (var a in db.Query<article>("SELECT * FROM articles")){
    Console.WriteLine("{0} - {1}", a.article_id, a.title);
} 
```

但是在 PetaPoco 附带的 T4 生成器中，有一个不错的部分，它与所有 DTO 一起生成类似

```
Namespace Eva.Dal.Core
Public Partial Class EvaDb
    Inherits Database

    Public Sub New() 
        MyBase.New("ConnectionString")
        CommonConstruct()
    End Sub

    Public Sub New(connectionStringName As String)
        MyBase.New(connectionStringName)
        CommonConstruct()
    End Sub

    Private Partial Sub CommonConstruct()
    End Sub

    Public Interface IFactory
        Function GetInstance() As EvaDb
    End Interface

    Public Shared Property Factory() As IFactory
        Get
            Return mFactory
        End Get
        Set
            mFactory = Value
        End Set
    End Property

    Private Shared mFactory As IFactory

    Public Shared Function GetInstance() As EvaDb
        If istance IsNot Nothing Then
            Return istance
        End If

        If Factory IsNot Nothing Then
            Return Factory.GetInstance()
        Else
            Return New EvaDb
        End If
    End Function

    <ThreadStatic> _
    Shared istance As EvaDb

    Public Overrides Sub OnBeginTransaction()
        If istance Is Nothing Then
            istance = Me
        End If
    End Sub

    Public Overrides Sub OnEndTransaction()
        If istance Is Me Then
            istance = Nothing
        End If
    End Sub

    Public Class Record(Of T As New)
        Public Shared ReadOnly Property Repo() As EvaDb
            Get
                Return EvaDb.GetInstance()
            End Get
        End Property
        Public Function IsNew() As Boolean
            Return Repo.IsNew(Me)
        End Function

        .......

    End Class
End Class
End Namespace 
```

那么使用 PetaPoco 创建我的 DB 对象并在 DAL 层中使用它的正确方法是什么？

另外，我读到 PetaPoco 有一种方法可以保持连接打开并重用它，我想这对于 BLL/DAL 架构是不可行的，例如，当您从 BLL 进行 2-3 次操作访问数据库时？或者如果是，那么应该如何正确处理？创建一个打开连接并执行所有 2-3 操作的 DAL 方法？由于在 BLL 中打开连接不应该是这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T18:00:34.383

**更新：**这是您可以使用共享连接的方式：

```
public class SharedConnection : IDisposable
{
    private Database _db;

    public SharedConnection(Database db)
    {
        _db = db;
        _db.OpenSharedConnection();
    }

    public void Dispose()
    {
        _db.CloseSharedConnection();
    }
}

public class FooBarDao
{
    private Database _db = new Database("conn_str_name");

    public SharedConnection GetSharedConnection()
    {
        return new SharedConnection(_db);
    }

    public Foo GetFoo(string id)
    {
        return db.SingleOrDefault<Foo>(
            "SELECT FooVal FROM FooTbl WHERE Id = @0", id);
    }

    public Bar GetBar(string id)
    {
        return db.SingleOrDefault<Bar>(
            "SELECT BarVal FROM BarTbl WHERE Id = @0", id);
    }
}

public class FooBarManager
{
    private FooBarDao _dao = new FooBarDao;

    public void GetFooAndBar(string fooId, string barId)
    {
        using (_dao.GetSharedConnection())
        {
            _dao.GetFoo(fooId);
            _dao.GetBar(barId);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:20:23.547

我总是创建一个包装器来实例化它：

```
public class DatabaseCreator
   public shared function GetContext() As EvaDb
       return new EvaDb(ConfigurationManager.ConnectionStrings("X").ConnectionString)
   end sub
end class 
```

我不会只为您正在执行的即时操作保持数据库连接打开的时间更长，但不会让它处于打开状态以供重用。通过多层，您可以想象构建应用程序以在您的业务组件之间共享连接（如存储库模式）。我已经习惯在每个存储库方法中打开连接，或者将引用传递给存储库的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T21:29:18.013

根据 Brian 的建议并阅读 Stackoverflow 上的另一个用户建议，我创建了一个静态帮助函数，它使用当前的 httpcontext 为每个请求创建（或返回现有的）单个 Db istance。这样（vb.net）：

```
 Public NotInheritable Class DbHelper
    Public Shared Function GetEvaDbIstance() As Eva.Dal.Core.EvaDb
        If HttpContext.Current.Items("EvaDb") Is Nothing Then
            Dim retval = New Eva.Dal.Core.EvaDb
            HttpContext.Current.Items("EvaDb") = retval
            Return retval
        End If
        Return DirectCast(HttpContext.Current.Items("EvaDb"), Eva.Dal.Core.EvaDb)
    End Function

    Private Sub New()

    End Sub
    End Class 
```

然后在我的 Dal 对象中，我只是

```
 Private db As New Eva.Dal.Core.EvaDb = DbHelper.GetEvaDbIstance() 
```

# java - 如何为 GUI java swing 应用程序提供 CLI

> ID：14161178
> 
> 赞同：0
> 
> 时间：2013-01-04T16:42:35.020
> 
> 标签：java, console, console-application

为现有的 GUI java swing 应用程序提供 CLI 的最佳实践是什么。

对于阅读文本字段，我可以使用`console.readLine(); or InputStreamReader(System.in)`，但我的 GUI 有单选按钮、复选框、组合框。那么这些 GUI 组件在 CLI 中的替代方案是什么？

我的 GUI 应用程序是一种向导，所以我想开发与 GUI 向导具有相同步骤顺序的 CLI。是否有编写 CLI 应用程序的最佳实践？

好用`Console class of java.io`吗？或者使用`sys.out.println()`与`InputStreamReader(System.in`) 的组合来写入和读取控制台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:30:28.830

你听说过CHARVA吗？可能不是您正在寻找的东西，但似乎很有希望。 [http://www.pitman.co.za/projects/charva/index.html](http://www.pitman.co.za/projects/charva/index.html)

# mysql - 错误 1064：在 mysql 工作台中使用列和数字更新表

> ID：14161179
> 
> 赞同：0
> 
> 时间：2013-01-04T16:42:39.063
> 
> 标签：mysql, mysql-workbench

我需要`update`一个带有`2`值的表，其中一个是另一个表的列，第二个是数字（`constant 1`），这是我的代码：

```
insert into table (col1, col2)
select colA from table2, '1' 
 where DATA_FORMAT(table2.created_at, '%y %m %d') = DATA_FORMAT(Now(), '%y %m %d'); 
```

错误信息是：

```
Error Code: 1064\. You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''0', '1', '1'  where DATA_FORMAT(newsletter.created_at, '%y %m %d') = DATA_FORMA' at line 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:45:10.283

试试这个：

```
insert into table (col1, col2)
select colA, '1' as ColB from table2
where DATE_FORMAT(table2.created_at, '%y %m %d') = DATE_FORMAT(Now(), '%y %m %d'); 
```

# jakarta-ee - 管理 Bean 和线程

> ID：14161180
> 
> 赞同：1
> 
> 时间：2013-01-04T16:42:51.607
> 
> 标签：jakarta-ee

我知道 EJB 规范不鼓励在 bean 中启动线程和打开套接字，但是这些限制是否适用于管理 Bean（使用 org.jboss.annotation.ejb.Management 注释）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:58:14.263

是的，在管理 Bean 中启动线程和打开套接字与此处描述的会话 Bean 中存在相同的问题：

[为什么不鼓励在 Java EE 容器中生成线程？](https://stackoverflow.com/questions/533783/why-spawning-threads-in-java-ee-container-is-discouraged)

根本问题是您没有让容器管理资源，并且您使用哪种类型的托管 bean 并没有区别。

# postgresql - PostgreSQL 数据文件位置

> ID：14161184
> 
> 赞同：8
> 
> 时间：2013-01-04T16:43:03.287
> 
> 标签：postgresql, postgresql-9.2

我在 Mac 上使用 PostgreSQL，我使用命令行创建了几个数据库。我正在查看 /Library/PostgreSQL/9.2/data 并且看不到任何 .dat 文件。我是否在寻找错误的数据文件位置？

我使用了以下命令：ps auxw | grep postgres | grep -- -D 如[在 Linux 上提到的 PostgreSQL 数据库默认位置](https://stackoverflow.com/questions/3004523/postgresql-database-default-location-on-linux)，它为我提供了 /Library/PostgreSQL/9.2/data 目录。

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T17:38:41.627

```
select setting from pg_settings where name = 'data_directory' 
```

和

```
ps auxw | grep postgres | grep -- -D 
```

两者都产生相同的结果。第一个通过 postgresql，第二个通过命令行。感谢@a_horse_with_no_name

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T18:08:31.567

PostgreSQL 允许您将数据存储在文件系统中相对任意的位置。您可以获得的默认位置`show data_directory`并不是[全部](https://stackoverflow.com/a/8237512/562459)。

# java - maven-compiler-plugin 3.0 未在 maven 下编译资源文件夹

> ID：14161187
> 
> 赞同：3
> 
> 时间：2013-01-04T16:43:05.607
> 
> 标签：java, maven, maven-3, maven-resources-plugin, maven-compiler-plugin

我正在将项目从 Maven 2 移植到 Maven 3。我也借此机会更新了一些插件的版本，即 maven-compiler-plugin，从 2.1 到 3.0，以及 maven-resources-plugin，到 2.6。

我在资源下有一个接口，如下所示：

```
public interface Version {
  public static final String VERSION = "${project.version}";
} 
```

在我的 pom.xml 中，在构建中，我有：

```
<resources>
  <resource>
    <directory>src/main/resources</directory>
    <filtering>true</filtering>
  </resource>
</resources> 
```

这是以前的工作。但是自从升级到 Maven 3，编译失败，找不到版本。

很明显，它没有编译 Version 或没有将其包含在类路径中。

Maven 3 或最新版本的 maven-compiler-plugin 是否有一些变化可能会影响这一点？从阅读文档没有任何改变......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:34:22.440

您必须将目标文件夹指定为如下所示。目前，如果您查看目标文件夹，您可能在那里有一个 Version.java 文件。通过添加 targetPath，它会将过滤后的 .java 文件放入您的 src/java 文件夹中，并将其编译到您的目标文件夹中。

```
<resource>
    <directory>src/main/resources</directory>
    <filtering>true</filtering>
     <includes>
       <include>**/*.java</include>
    </includes>
    <targetPath>${basedir}/src/main/java/</targetPath>
</resource> 
```

# android - 我的应用程序中的 Android 谷歌地图导航 - 可能吗？

> ID：14161189
> 
> 赞同：3
> 
> 时间：2013-01-04T16:43:06.820
> 
> 标签：android, web-services, google-maps

我想知道是否可以在我自己的应用程序中从 Google Maps API 绘制路线。

例如，这个解决方案：

```
final Intent intent = new Intent(Intent.ACTION_VIEW,Uri.parse("http://maps.google.com/maps?" + "saddr="+ latitude + "," + longitude + "&daddr=" + latitude + "," + longitude));
intent.setClassName("com.google.android.apps.maps","com.google.android.maps.MapsActivity");
                    startActivity(intent); 
```

将启动 Google Maps 应用程序并在该应用程序中开始导航。是否可以相同但在我的`MapFragment`对象或`GoogleMap`对象中绘制该路线？

我阅读了官方文档：

[https://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

它没有提到可以在里面导航`MapFragment`，但也没有提到它是不可能的..

# restful-url - 如何从 RESTful uri 获取模式信息？

> ID：14161196
> 
> 赞同：0
> 
> 时间：2013-01-04T16:43:29.357
> 
> 标签：restful-url, restful-architecture

有没有办法从 RESTful Web 服务获取模式信息？例如，soap 服务具有 WSDL，我们可以查看并创建任何代理类。我想知道是否有办法从一个宁静的网络服务中获取这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:49:40.980

这些帮助：

[为 Web API 创建帮助页面](http://www.asp.net/web-api/overview/creating-web-apis/creating-a-help-page-for-a-web-api)

[类似的 Stackoverflow 问题](https://stackoverflow.com/questions/10695095/asp-net-web-api-automatically-generate-api-documentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:46:43.043

> 有没有办法从 RESTful Web 服务获取模式信息？

一般来说，没有。REST 不包含有关其有效负载的元数据——这不是这种架构风格的目的。

如果 Web 服务真正符合 REST，则不需要此类元数据。

您将需要查看有效负载和文档。

# apache - Apache 将所有请求转发到特定的静态文件

> ID：14161199
> 
> 赞同：2
> 
> 时间：2013-01-04T16:43:49.227
> 
> 标签：apache, http, testing, request, forward

我正在尝试将虚拟主机上的所有 http 请求**转发（而不是重定向！）到静态文件。**

我想通过响应相同的数据来伪造请求。

我发现的所有示例都将我重定向到静态页面，我想将我的 URL 保留在浏览器中（没有 301,302，.. 状态代码）！

怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T12:31:09.673

听起来像是 mod_alias 中 AliasMatch 的教科书示例：

[http://httpd.apache.org/docs/2.0/mod/mod_alias.html#aliasmatch](http://httpd.apache.org/docs/2.0/mod/mod_alias.html#aliasmatch)

例如：

AliasMatch .* /usr/local/apache/my_static_file.html

# r - 将虚拟变量重新编码为有序因子

> ID：14161202
> 
> 赞同：3
> 
> 时间：2013-01-04T16:44:09.507
> 
> 标签：r, regression, r-factor

我需要一些关于逻辑回归编码因素的帮助。

我有六个代表收入等级的虚拟变量。我想将这些转换为单个有序因子以用于逻辑回归。

我的数据框如下所示：

```
 INC1 INC2 INC3 INC4 INC5 INC6
1      0    0    1    0    0    0  
2     NA   NA   NA   NA   NA   NA  
3      0    0    0    0    0    1  
4      0    0    0    0    0    1  
5      0    0    1    0    0    0  
6      0    0    0    1    0    0  
7      0    0    1    0    0    0  
8      0    0    0    1    0    0 
```

我希望它看起来像什么：

```
 INC
1   INC3  
2   NA   
3   INC6  
4   INC6  
5   INC3 
6   INC4  
7   INC3  
8   INC4 
```

这一定是一个常见（且简单）的操作，但我的搜索并没有找到关于如何执行这种重新编码的简明答案。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:06:51.197

这是基于另一个答案的解决方案，该答案保留 NA 值并转换为有序因子。

```
> inc
  INC1 INC2 INC3 INC4 INC5 INC6
1    0    0    1    0    0    0
2   NA   NA   NA   NA   NA   NA
3    0    0    0    0    0    1
4    0    0    0    0    0    1
5    0    0    1    0    0    0
6    0    0    0    1    0    0
7    0    0    1    0    0    0
8    0    0    0    1    0    0
> inc$F = factor(apply(inc, 1, function(x) names(x)[x == 1]),levels=names(inc),ordered=TRUE)

> inc
  INC1 INC2 INC3 INC4 INC5 INC6    F
1    0    0    1    0    0    0 INC3
2   NA   NA   NA   NA   NA   NA <NA>
3    0    0    0    0    0    1 INC6
4    0    0    0    0    0    1 INC6
5    0    0    1    0    0    0 INC3
6    0    0    0    1    0    0 INC4
7    0    0    1    0    0    0 INC3
8    0    0    0    1    0    0 INC4
> inc$F
[1] INC3 <NA> INC6 INC6 INC3 INC4 INC3 INC4
Levels: INC1 < INC2 < INC3 < INC4 < INC5 < INC6 
```

如果您连续有多个 1，这将中断。

# tcp - RemObjects：当建立不成功的 TCP/IP 连接时如何防止 UI 冻结？

> ID：14161203
> 
> 赞同：0
> 
> 时间：2013-01-04T16:44:12.440
> 
> 标签：tcp, tcpclient, delphi-prism, oxygene, remobjects

我正在测试我的程序 TCP/IP 连接，它使用 RemObjects TcpClient 和 TcpServer 控件并遇到问题。

如果主机或远程服务器没有监听连接，那么客户端只是简单地冻结尝试建立远程连接并最终崩溃。

```
SignalClient.ConnectNew(LocalIPEdit.Text,Int32.Parse(ClientPort.Text)); 
```

有什么方法可以防止这种情况并仍然将控制权交给用户吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:36:25.737

使用线程（或任务）是最简单的方法。您可以禁用围绕此开始/结束的控件。

# actionscript-3 - 从 AS3 的舞台中移除不同类型的对象，仅使用一种方法

> ID：14161204
> 
> 赞同：0
> 
> 时间：2013-01-04T16:44:18.557
> 
> 标签：actionscript-3, syntax, removechild

我正在用 ActionScript3 制作太空侵略者类型的游戏，并且我创建了一种从舞台上移除子弹的方法：

```
private function removeBullet(bb:Bullet = null):void {

    var leng:uint = bulletVector.length;
    if (bb)
    {
        for (var i:uint = 0; i < leng; i++)
        {
            if (bulletVector[i] == bb) 
            {
                bulletVector.splice(i, 1);
                break;
            }                   
        }

        // Remove bullet from the Display List
        removeChild(bb);

        // Return the bullet to its object pool
        bulletPool.returnObject(bb);    

    } else {

        // Remove all existing bullets currently on screen
        for (var j:uint = 0; j < leng; j++)
        {
            var bullet:Bullet = bulletVector[j];
            removeChild(bullet);
            bulletPool.returnObject(bullet);
        }
        bulletVector.splice(0, leng);   
    }
} 
```

*bulletVector*是一个包含当前显示的所有子弹的 Vector，*bulletPool*是一个对象池类，用于在舞台上不再使用子弹时将其返回到。如果没有参数传递给该方法，该方法将删除屏幕上的所有项目符号。

现在，我有一个**相同**的方法来从屏幕上移除敌人：

```
private function removeEnemy(ee:Enemy = null):void {

    var leng:uint = enemyVector.length;
    if (ee)
    {
        for (var i:uint = 0; i < leng; i++)
        {
            if (enemyVector[i] == ee) 
            {
                enemyVector.splice(i, 1);
                break;
            }               
        }

        // Remove enemy from the Display List
        removeChild(ee);

        // Return the enemy to its object pool
        enemyPool.returnObject(ee); 

    } else {

        // Remove all existing enemies currently on screen
        for (var j:uint = 0; j < leng; j++)
        {
            var enemy:Enemy = enemyVector[j];
            removeChild(enemy);
            enemyPool.returnObject(enemy);
        }
        enemyVector.splice(0, leng);    
    }
} 
```

“子弹”和“敌人”都是扩展 Sprite 类的类。我的问题是：是否可以将这两种方法合并为一种同时处理子弹和敌人的方法，具体取决于哪一种方法作为参数传递？

[编辑] 我想到的是这样的：（伪代码）

```
if (ee is Bullet) 
{ 
    var s:String = "bullet" 
} else if (ee is Enemy) 
{ 
    var s:String = "enemy" 
} 

eval[s+"Vector"].splice(i, 1); 
eval[s+"Pool"].returnObject(ee); 
```

[/编辑]

换句话说，是否有一种语法允许访问向量和/或类（对象池）而无需将它们的名称硬编码到方法中？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:15:06.670

像这样的东西可能对你有用......

```
private function removeItem(ee:* = null):void {

if (ee) {
//ee has a value

if (ee is Bullet) {
//remove bullet

} else if (ee is Enemy) {
//remove Enemy

}

} else {

//ee is null so remove all bullets and emenies

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:24:12.307

**简短的回答：对于敌人和子弹的列表，使用 Array 而不是 Vector。**

创建一个带有 3 个参数的方法：一个 list:Array 和一个 item:Sprite，以及一个 pool:Array，然后从指定的 Array 中删除该项目，而不是“硬编码”实例并以两个相同的方法结束。

```
/**
 * Removes item from specified list
 * @param   list
 * @param   item
 */
public function removeItem( list:Array, item:Sprite, pool:Array ):void
{
    // implement here
} 
```

**长答案：**

这很棘手，因为您使用的是向量。

我的第一个冲动是创建一个带有 2 个参数、一个列表和一个项目的通用函数：（让我们暂时忽略池）

```
/**
 * Removes item from specified list
 * @param   list
 * @param   item
 */
public function removeItem( list:Vector.<Sprite>, item:Sprite ):void
{
    // implement here
} 
```

但我猜你的子弹列表是 Vector 类型的。而且你的敌人列表是 Vector 类型的，对吧？

因此，即使 Bullet 和 Enemy 都扩展了 Sprite，如果您要使用 Vector. 的实例调用此方法，例如：

```
var list:Vector.<Bullet>;
var item:Bullet; // extends Sprite
removeItem( list, item ); 
```

这不会编译。你会得到：

```
Error: Implicit coercion of a value of type __AS3__.vec:Vector.<Bullet> to an unrelated type __AS3__.vec:Vector.<flash.display:Sprite>. 
```

**在单独的说明中**

您的 removeItem 方法似乎在做两件事。移除指定项目和/或移除所有项目。为了安全和清晰起见，我会将它们分开。每个方法应该只执行一件事。

此外，使用此设置，如果在运行时您对某个项目的引用意外为空，您最终将从列表中删除所有项目。可能不是你想要的。

我会声明两个函数：

```
function removeItem(...)

function removeAllItems(...) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:08:35.150

再想一想，我现在更倾向于使用软类型而不是使用数组，因为它不会强迫您更改应用程序的其余部分（例如，您可以保留向量）

```
public function removeItem(list:*, pool:ObjectPool, item:Sprite):void
{
    // remove item from specified list
    var indx:int = list.indexOf(item);
    if (indx >= 0) 
    {
        list.splice(indx, 1);
    }
    // remove display object from display list
    if (this.contains(item))
    {
        this.removeChild(item);
    }           
    // return itemitem to specified pool
    pool.returnObject(item);
} 
```

请注意，您无需迭代 Vector 即可找出要删除的索引（拼接）。您可以改用 indexOf 方法。

# c# - 如何在不影响性能的情况下执行 LINQ GroupBy、Select 和 Take？

> ID：14161211
> 
> 赞同：4
> 
> 时间：2013-01-04T16:44:54.387
> 
> 标签：c#, linq, entity-framework, data-structures

## 背景

我有一个通过 LINQ-to-Entities 称为视图的 SQL 数据集。其目的是在信用报告中提供未结余额 30 天、60 天等未结余额。

在 StackOverflow 上为您提供一个示例表很难在此处格式化，但这里是 SQL SELECT 语句，它应该让您了解原始数据结构：

```
SELECT TOP 1000 [TransactionId]
      ,[IndustrySector]
      ,[DataContributorId]
      ,[ExperienceMonth]
      ,[ExperienceMonthText]
      ,[Balance]
      ,[ARCurrent]
      ,[AR1to30PD]
      ,[AR31to60PD]
      ,[AR61to90PD]
      ,[Ar91PlusPD]
      ,[WeightedDTP]
  FROM [BCC].[dbo].[vwTransactionExperienceDetail] 
```

现在，当我通过 LINQ 调用此视图时，最终目标是构造一个对象，该对象将作为 JSON 返回给请求客户端。结果对象需要是分组的层次结构`Industry`，然后是`Contributors`（报告的数据），最后是个人`Reports`。为此，以下 LINQ 查询可以正常工作并且速度非常快：

```
 /// <summary>
        /// Gets the 25 month experience detail report with summed parameters (balance, DTP, etc).
        /// </summary>
        /// <param name="id">The transaction id.</param>
        /// <returns>List&lt;ExperienceDetail&gt;</returns>
        public static List<ExperienceDetail> Get25MonthExperienceDetail_Sum(int id)
        {
            var db = new BCCEntities();
            return
                db.vwTransactionExperienceDetails.Where(te => te.TransactionId == id)
                  .GroupBy(g => g.IndustrySector)
                  .Select(i => new ExperienceDetail
                      {
                          Industry = i.Key,
                          NumberOfContributors = i.GroupBy(c => c.DataContributorId).Count(),
                          Balance = i.Sum(s => s.Balance),
                          OneToThirty = i.Sum(s => s.ARCurrent),
                          ThirtyOneToSixty = i.Sum(s => s.AR1to30PD),
                          SixtyOneToNinety = i.Sum(s => s.AR31to60PD),
                          NinetyOneToOneTwenty = i.Sum(s => s.AR61to90PD),
                          OneTwentyOnePlus = i.Sum(s => s.Ar91PlusPD),
                          DTP = (i.Sum(s => s.Balance) != 0) ? i.Sum(s => s.WeightedDTP) / i.Sum(s => s.Balance) : i.Sum(s => s.WeightedDTP),
                          Contributions = i.GroupBy(dc => dc.DataContributorId).Select(c => new Contribution
                              {
                                  Balance = c.Sum(s => s.Balance),
                                  OneToThirty = c.Sum(s => s.ARCurrent),
                                  ThirtyOneToSixty = c.Sum(s => s.AR1to30PD),
                                  SixtyOneToNinety = c.Sum(s => s.AR31to60PD),
                                  NinetyOneToOneTwenty = c.Sum(s => s.AR61to90PD),
                                  OneTwentyOnePlus = c.Sum(s => s.Ar91PlusPD),
                                  DTP = (c.Sum(s => s.Balance) != 0) ? c.Sum(s => s.WeightedDTP) / c.Sum(s => s.Balance) : c.Sum(s => s.WeightedDTP),
                                  ContributorId = c.Key,
                                  Reports = c.Select(r => new Report
                                  {
                                      DTP = (r.Balance != 0) ? r.WeightedDTP/r.Balance : r.WeightedDTP,
                                      ReportDate = r.ExperienceMonth,
                                      Balance = r.Balance,
                                      OneToThirty = r.ARCurrent,
                                      ThirtyOneToSixty = r.AR1to30PD,
                                      SixtyOneToNinety = r.AR31to60PD,
                                      NinetyOneToOneTwenty = r.AR61to90PD,
                                      OneTwentyOnePlus = r.Ar91PlusPD,
                                      ContributorId = r.DataContributorId,
                                      Industry = i.Key
                                  })
                              })
                      }).ToList();
        } 
```

## 问题

我需要创建一个提供相同数据的附加服务，但仅限于每个贡献者*报告的最近一个月*`DataContributorId`( )。以下 LINQ 查询适用于此，但速度极慢 - 返回结果需要将近一分钟：

```
 /// <summary>
        /// Gets an experience detail report with summed parameters (balance, DTP, etc) for the most recent month.
        /// </summary>
        /// <param name="id">The transaction id.</param>
        /// <returns>List&lt;ExperienceDetail&gt;</returns>
        public static List<ExperienceDetail> Get25MonthExperienceDetail_MostRecentMonth(int id)
        {
            var db = new BCCEntities();
            db.CommandTimeout = 100000;
            return
                db.vwTransactionExperienceDetails.Where(te => te.TransactionId == id)
                  .OrderByDescending(o => o.ExperienceMonth)
                  .GroupBy(g => g.IndustrySector)
                  .Select(i => new ExperienceDetail
                  {
                      Industry = i.Key,
                      NumberOfContributors = i.GroupBy(c => c.DataContributorId).Count(),
                      Balance = i.GroupBy(dc => dc.DataContributorId).Sum(x => x.Select(z => z.Balance).FirstOrDefault()),
                      OneToThirty = i.Sum(s => s.ARCurrent),
                      ThirtyOneToSixty = i.Sum(s => s.AR1to30PD),
                      SixtyOneToNinety = i.Sum(s => s.AR31to60PD),
                      NinetyOneToOneTwenty = i.Sum(s => s.AR61to90PD),
                      OneTwentyOnePlus = i.Sum(s => s.Ar91PlusPD),
                      DTP = (i.Sum(s => s.Balance) != 0) ? i.Sum(s => s.WeightedDTP) / i.Sum(s => s.Balance) : i.Sum(s => s.WeightedDTP),
                      Contributions = i.GroupBy(dc => dc.DataContributorId).Select(c => new Contribution
                      {
                          Balance = c.Take(1).Sum(s => s.Balance),
                          OneToThirty = c.Take(1).Sum(s => s.ARCurrent),
                          ThirtyOneToSixty = c.Take(1).Sum(s => s.AR1to30PD),
                          SixtyOneToNinety = c.Take(1).Sum(s => s.AR31to60PD),
                          NinetyOneToOneTwenty = c.Take(1).Sum(s => s.AR61to90PD),
                          OneTwentyOnePlus = c.Take(1).Sum(s => s.Ar91PlusPD),
                          DTP = (c.Take(1).Sum(s => s.Balance) != 0) ? c.Take(1).Sum(s => s.WeightedDTP) / c.Take(1).Sum(s => s.Balance) : c.Take(1).Sum(s => s.WeightedDTP),
                          ContributorId = c.Key,
                          Reports = c.Select(r => new Report
                          {
                              DTP = (r.Balance != 0) ? r.WeightedDTP / r.Balance : r.WeightedDTP,
                              ReportDate = r.ExperienceMonth,
                              Balance = r.Balance,
                              OneToThirty = r.ARCurrent,
                              ThirtyOneToSixty = r.AR1to30PD,
                              SixtyOneToNinety = r.AR31to60PD,
                              NinetyOneToOneTwenty = r.AR61to90PD,
                              OneTwentyOnePlus = r.Ar91PlusPD,
                              ContributorId = r.DataContributorId,
                              Industry = i.Key
                          }).Take(1)
                      })
                  }).ToList();

        } 
```

## 问题

如何在不影响性能的情况下查询此“最近报告的月份”结果集？在过去的几个小时里，我尝试隔离查询中花费最多时间的部分，但我似乎无法发现它。诚然，我不知道如何有效地分析复杂 LINQ 查询的性能问题，并愿意发表评论。

最终的问题是：是否有替代此 LINQ 查询的替代方法，它会产生相同的结果集而不会造成如此严重的性能损失？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:09:56.423

在第二个查询中，您添加了：

`Balance = i.GroupBy(dc => dc.DataContributorId).Sum(x => x.Select(z => z.Balance).FirstOrDefault()),`

和

`.OrderByDescending(o => o.ExperienceMonth)`

尝试删除 groupBy 和 orderBy 以检查其中之一是否会导致性能问题，在这种情况下检查（并尝试）向此列添加索引（如果不存在）。

还要检查 SQL Profiler（如果 SQL Server 2005 或更低版本）或 SQL 扩展事件（如果 SQL Server 2008 或更高版本）。

您可以尝试使用[LinqPAD](http://www.linqpad.net/)工具来检查查询生成的 SQL DML

还有其他方法可以从数据库中获取数据：

1.  在数据库上创建视图，并从 LINQ 中读取
2.  编写[实体 SQL](http://msdn.microsoft.com/en-us/library/bb387145.aspx)查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T21:41:26.137

假设数据集相当小，我只会拉入所有月份， go `ToList()`，然后只过滤掉内存中最近的一个月。当查询变得复杂时，LINQ 可以做一些非常奇怪的事情。

# postgresql - 如何创建一个与另一个共享公共 id 的表，以及一旦从第一个表中删除哪一行在两个表中被删除

> ID：14161212
> 
> 赞同：1
> 
> 时间：2013-01-04T16:44:55.800
> 
> 标签：postgresql, foreign-keys, cascade, database-administration

如何创建一个与另一个共享公共 id 的表，以及一旦从第一个表中删除哪一行？

我听说过 FOREIGN KEY, REFERENCES 但不确定如何实际创建此类表。有什么例子可以让我开始吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:50:22.117

我认为您要么在谈论级联删除，要么在谈论您不应该做的非常奇怪的事情。:)

外键信息：[http ://www.postgresql.org/docs/8.3/static/tutorial-fk.html](http://www.postgresql.org/docs/8.3/static/tutorial-fk.html)

有关级联删除的信息（搜索“ON DELETE CASCADE”页面）：[http ://www.postgresql.org/docs/8.2/static/ddl-constraints.html](http://www.postgresql.org/docs/8.2/static/ddl-constraints.html)

**编辑：**添加示例：

表创建：

```
CREATE TABLE products (
    product_no integer PRIMARY KEY,
    name text,
    price numeric
);

CREATE TABLE orders (
    order_id integer PRIMARY KEY,
    shipping_address text,
    ...
);

CREATE TABLE order_items (
    product_no integer REFERENCES products ON DELETE RESTRICT,
    order_id integer REFERENCES orders ON DELETE CASCADE,
    quantity integer,
    PRIMARY KEY (product_no, order_id)
); 
```

触发级联删除的示例：

```
DELETE FROM orders                  -- This will delete all orders with 
WHERE order_id BETWEEN 1 AND 10 ;   -- order_id between 1 and 10 and 
                                    -- all associated order items. 
```

# excel - 使用两个结果变量（IF、THEN 和 AND？）分配 IF 语句结果

> ID：14161216
> 
> 赞同：0
> 
> 时间：2013-01-04T16:44:59.387
> 
> 标签：excel, vba, if-statement

嗯，我找不到最好的方法来做到这一点。另外，这段代码无论如何都不起作用。我希望返回带有两个变量的“一月”（以及所有 12 个月）的文本：

```
If month = "January" Then
        days = "31" And monthnum = "1"
End If 
```

建议？

最终奏效的语法：

```
If month = "January" Then
        days = 31
        mon = 1
    ElseIf month = "February" Then
        days = 29
         mon = 2
'elseif for the rest of the months
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:13:25.407

假设您可以使用英语语言环境

```
sMonth = "april"

monthnum = month("1 " & sMonth)
days = day(dateserial(2001,iif(monthnum=12, 1, monthnum+1),0)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T16:52:26.970

试试这个 VBA 语法

```
Dim days As Integer
Dim monthnum As Integer

'if then elseif end

If Month = "January" Then
        days = 31
        monthnum = 1
ElseIf Month = "February" Then
        days = 28
        monthnum = 2
ElseIf Month = "March" Then
        days = 31
        monthnum = 1
 ' repeat for all other months
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T21:35:00.190

您也可以使用 Case 语句

```
Sub MonthValue()

For b 1 To 20

Select Case Range("A" & a).Value
Case January, March, May, June, August, October, December
ActiveCell.Offset(0,1).Value = 31
Case Feburary
ActiveCell.Offset(0,1).Value = 28
Case April, June, September, November
ActiveCell.Offset(0,1).Value = 30
Case Else ActiveCell.Offset(0,1).Value = 0
End Select

Next b
End Sub 
```

# sql - 从 SQL 收集连续信息

> ID：14161218
> 
> 赞同：1
> 
> 时间：2013-01-04T16:45:02.977
> 
> 标签：sql, sybase

我正在使用sybase。

我有一个表，其中包含名为时间和数量的列。数量可以是零或非零。我需要找到所有情况，其中任何时候 1 秒内的任何后续数量 > 0 并且原始数量大于 40。

我无法从 SQL 结构的角度来考虑这个问题，但如果它是 C++ 代码，我可以使用 for 循环等轻松完成。

让我试着用一个例子来解释这一点。

从我以递增时间收集数据的附图中：

*   由于 10.01.01.000 > 40 和 10.01.01.001 > 0 的数量，我们将 10.01.01.000 包括在我们的短名单中

*   我们不包括 10.01.01.001 在我们的短名单中，因为即使数量 > 0 1 秒内的下一个数量，即 10.01.01.002 是 0

*   第 4 行不包含在我们的示例中，因为即使在 1 秒内也有下一个

```
RowNumber 时间数量

1 10:01:01.000 100

2 10:01.01.001 50

3 10:01:01.002 0

4 10:01.01.003 100

5 10:01:03.001 100

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:55:13.360

假设“下一个”你真的是指下一个并且没有多条记录，那么你可以用`lead`.

```
select t.RowNumber, t.Time, t.Quantity
from (select t.*,
             lead(time, 1) over (order by time) as nextTime,
             lead(quantity, 1) over (order by time) as nextQuantity
      from t
     ) t
where datediff(ms, t.time. t.nexttime) <= 1000 and
      (t.Quantity > 40 and t.nextQuantity > 0) 
```

如果您没有该`lead()`功能，您可以执行以下操作：

```
select t.RowNumber, t.Time, t.Quantity
from (select t.*,
             (select min(time) from t t2 where t2.time > t.time) as nexttime
      from t
     ) left outer join
     t tnext
     on tnext.time = t.nexttime
where datediff(ms, t.time. tnext.time) <= 1000 and
      (t.Quantity > 40 and tnext.Quantity > 0) 
```

# mysql - MySQL IF 然后用数学

> ID：14161223
> 
> 赞同：4
> 
> 时间：2013-01-04T16:45:12.550
> 
> 标签：mysql, select, if-statement

是否可以用数学做一个 mysql if/then 语句？

说...

```
 if product_name = "apple"
    then divide product_price by 4
    else do no math on product_price 
```

链接到类似这样的教程或任何帮助/方向将不胜感激。

我结束了使用 bluefeet 的方法并完成了这个。为将来可能需要的任何其他人提供样品，

```
 SELECT DISTINCT
    12345_parts.*,
    12345_parts.install_meter +
    12345_parts.meter_life -
    12345_parts.prior_meter
    AS nextdue,
       CASE 
          WHEN 12345_parts.part_name = "JET ENGINE"
          THEN 12345_parts.meter_life + 12345_parts.install_meter - 12345_parts.prior_meter - status_12345.meter / 4
          ELSE 12345_parts.meter_life + 12345_parts.install_meter - 12345_parts.prior_meter - status_12345.meter
       END AS remainder
    FROM 12345_parts, status_12345
    WHERE 12345_parts.overhaul LIKE '%HLY%'
    AND 12345_parts.active='ACTIVE' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:48:12.970

尝试这个：

```
SELECT IF(product_name = "apple", product_price / 4, product_price) price 
FROM products; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:05:03.157

您还可以使用`CASE`语句：

```
select 
   case 
      when product_name = 'apple' 
      then product_price/4
      else product_price
   end as price
from yourtable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:52:27.283

从您的示例中，您可以执行以下操作：

```
IF (product_name = "apple")
BEGIN 
  SELECT product_name, (product_price/4)
  FROM table
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T16:48:09.897

[IF 那么说明](http://dev.mysql.com/doc/refman/5.5/en/if.html)

直接来自 MySQL 站点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T16:48:31.403

你可以试试这个-

```
select If(product_name = "apple",product_price/4,product_price) as cal from tableName 
```

# java - Apache karaf - 如何记录：显示大量信息？

> ID：14161224
> 
> 赞同：2
> 
> 时间：2013-01-04T16:45:21.853
> 
> 标签：java, logging, osgi, apache-karaf

在 linux ubuntu 服务器上使用 karaf 2.2.9，我有一个 karaf 命令可以启动一些代码。这会在 karaf.log 中生成一些详细的功能日志。此命令定期执行（每 2 小时一次）。

我们要收集每次执行对应的日志。

**我们已经做了什么：**
我们有一个脚本外壳，它使用客户端 karaf 执行以下操作：

1.  执行 log:clear ==> 这会放置一个标记，以防止将来任何 log:display 命令在此标记之前执行

2.  执行我们的命令 ==> 这会在日志中写入内容

3.  执行 log:display -n 0 ==> 这将获取上一个 log:clear 和 now 之间的日志

4.  将结果写入文件以供以后统计和分析

所有这些每两个小时重复一次。

为了不限制过多的输出，我将 karaf/etc/org.apache.karaf.log.cfg 中的“size”参数修改为更高的值。

**问题：**
有时，输出可能非常丰富（当然，它越丰富，就越关键！）。
所以 ：

*   如果我将“size”参数设置得太低，则 log:display 不会占用所有必需的日志

*   如果我将“大小”参数设置得太高，karaf 会因内存不足而挂起，
    我已经增加了 karaf xx 内存。“日志”命令的文档很差。事实上，没有解释这个日志系统是如何工作的（或者我找不到它）。

**我的问题：**
有没有办法增加一些东西，以便我可以在 log:clear 和 log:display 之间获取相当舒适的日志量？

当然，也可以考虑其他解决方案，例如完全重新制作日志记录方法或程序，但这比为已经运行的系统找到正确的参数要花费更多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:09:27.247

Karaf 中使用的默认日志服务是[ops4j pax logging](http://team.ops4j.org/wiki/display/paxlogging/Pax+Logging)。

您可以使用文件 karaf/etc/org.ops4j.pax.logging.cfg 设置日志系统。这是一个类似 log4j 的配置文件。在这里您可以设置自己的附加程序和记录器，调整文件大小，备份索引等...

通过这种方式，您可以将特定的日志记录信息提取到不同的日志文件中。

# oop - 第一个参数为零时无法调用方法？

> ID：14161225
> 
> 赞同：3
> 
> 时间：2013-01-04T16:45:22.900
> 
> 标签：oop, lisp, common-lisp, clos

```
(defmethod carpet-append ((this carpet) (rect image-rectangle))
  (destructuring-bind (rect-width . rect-height)
      (rectangle-size rect)
    (destructuring-bind (bitmap-width . bitmap-height)
        (carpet-size this)
      (if this
          (iter:iter
            (iter:with min-area = (* (+ bitmap-width rect-width)
                                     (+ bitmap-height rect-height)))
            (iter:with min-pos = nil)
            (iter:for pos in (awailable-positions this))
            (iter:for test-area = (try-fit rect pos (carpet-bitmap this)))
            (when (and test-area (< test-area min-area))
              (setf min-pos pos))
            (iter:finally
             (let ((new-carpet
                    (make-carpet
                     :bitmap (make-array
                              (list (+ (car min-pos) rect-width)
                                    (+ (cdr min-pos) rect-height))
                              :element-type 'bit)
                     :rectangles (cons rect (carpet-rectangles this)))))
               (copy-bitmap-state this new-carpet)
               (setf (rectangle-position rect) min-pos)
               (place-image new-carpet rect)
               (return new-carpet))))
          (make-carpet
           :bitmap (make-array
                    (list rect-width rect-height)
                    :element-type 'bit)
           :rectangles (list rect)))))) 
```

`image-rectangle`并且`carpet`是结构。

当这个方法被这样调用时：

```
(carpet-append
 nil
 #s(image-rectangle
    :position (0 . 0)
    :size (48 . 76)
    :file "/home/wvxvw/projects/spritesheet/test-images/test-0.png")) 
```

我得到一个：

```
#<SIMPLE-ERROR "~@<There is no applicable method for the generic function ~2I~_~S~
 ~I~_when called with arguments ~2I~_~S.~:>" 
```

它是这样的吗？也许有一些方法可以让它接受`nil`作为一个论点？我将如何指定只有类型`nil`和`carpet`适用的参数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T17:15:29.073

如果您有一个带有类的 arglist`carpet`和`image-rectangle`，则参数最好是这些类或其子类。`NIL`当你的论点被声明为 class 时，你不能通过`carpet`。

因此`(if this`没有意义。如果您通过了一个地毯对象，而您不能通过其他任何东西，那么测试`this`将始终为真。

如果要为`NIL`对象和矩形编写方法，则可以使用[NULL](http://www.lispworks.com/documentation/HyperSpec/Body/t_null.htm)类。

```
(defmethod carpet-append ((this null) (rect image-rectangle))
   ...) 
```

由于 CLOS 没有 OR 或 AND 之类的类组合符，因此您必须为每种情况编写一个方法。

# jquery - 使用 Ajax 数据源时的数据表排序

> ID：14161226
> 
> 赞同：1
> 
> 时间：2013-01-04T16:45:36.567
> 
> 标签：jquery, jquery-plugins, datatable

我是 Datatable 的新手，正在尝试配置 Datatable，以便它使用 ajax 获取数据，将其显示为复选框、锚点和选项卡，并允许用户对其进行排序。我有 ajax 和格式化部分，但是当我尝试对复选框进行排序时，它什么也不做。我查找了[记录的示例](http://www.datatables.net/examples/plug-ins/dom_sort.html)并从中获取了排序处理程序：

排序代码：

```
/* Create an array with the values of all the checkboxes in a column */
        $.fn.dataTableExt.afnSortData['dom-checkbox'] = function (oSettings, iColumn) {
            var aData = [];
            $('td:eq(' + iColumn + ') input', oSettings.oApi._fnGetTrNodes(oSettings)).each(function () {
                aData.push(this.checked == true ? "1" : "0");
            });
            return aData;
        } 
```

创建复选框的代码：

```
 $('#example').dataTable({
        "bProcessing": true,
        "sAjaxSource": "sources/myData.json",
        "sAjaxDataProp": "items",
        "aoColumns": [
            {
                "mData": function (source, type, val) {
                    if (source.Published)
                        return '<input type="checkbox" checked="checked"/>';
                    else
                        return '<input type="checkbox" />';

                },
                //"sType": "dom-checkbox",
                "sSortDataType": "dom-checkbox"
                //, "bSortable": false
            },
            { "mData": "Author" },
            {
                "mData": function (source, type, val) {
                    return '<a href="' + source.Href + '">' + source.$name + '</a>';
                }
            }
        ]
    }); 
```

排序函数 (`$.fn.dataTableExt.afnSortData['dom-checkbox']`被调用并返回数据，但是表没有更新。（代码有效，但不适用于 ajax 表）。

数据样本：

```
{
    "items": [
        {
            "$name": "a",
            "Href": "http://google.com",
            "Author": "a",
            "Published": true
        },
        {
            "$name": "c",
            "Href": "http://www.whiskas.at/",
            "Author": "a",          
            "Published": false
        }
    ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T05:21:38.510

请注意，您编写的是标准 JavaScript，而不是 jQuery。如果 this 引用的是 jQuery 对象而不是 DOM 元素，则由于 jQuery 对象没有 checked 属性，所以 checked 将是未定义的。如果这是一个 jQuery 对象，您可以尝试以下一些示例：

```
this.prop("checked"); 
```

或者

```
$(this).is(":checked") 
```

将其替换为`this.checked`当前排序功能中的。这是一个例子：

```
//Create an array with the values of all the checkboxes in a column
$.fn.dataTableExt.afnSortData['dom-checkbox'] = function (oSettings, iColumn) {
  var aData = [];
  $('td:eq(' + iColumn + ') input', oSettings.oApi._fnGetTrNodes(oSettings)).each(function() {
    aData.push($(this).is(':checked') == true ? "1" : "0"); //New jQuery variable here
  });
  return aData;
} 
```

# ruby-on-rails - 如何在非 Rails 应用程序中使用 ActiveRecord 创建新的 MySQL 数据库？

> ID：14161229
> 
> 赞同：3
> 
> 时间：2013-01-04T16:45:58.010
> 
> 标签：ruby-on-rails, ruby, database, activerecord

我正在构建一个使用 ActiveRecord 的非 Rails 纯 ruby​​ 应用程序。我想编写一个 rake 文件，为它创建一个数据库和表。我尝试以下代码

```
namespace :db do
  task :create do
    conn = ActiveRecord::Base.connection
    create_db = "CREATE DATABASE foo_dev"
    conn.execute(create_db)
  end
end 
```

但这给了我

```
ActiveRecord::ConnectionNotEstablished: ActiveRecord::ConnectionNotEstablished 
```

错误。嗯，这很明显，因为我没有将 ActiveRecord 连接到任何数据库。

我该怎么办？

* * *

编辑：我想创建一个 MySQL 数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T16:53:08.057

建立连接，例如：

```
ActiveRecord::Base.establish_connection(
   :adapter   => 'sqlite3',
   :database  => './your_db.db'
) 
```

对于 sqlite，如果数据库（文件）不存在，则会创建它。然后执行迁移以创建表。

基于上一个问题[ActiveRecord 可以在迁移之外创建表吗？](https://stackoverflow.com/questions/2358903/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T09:17:37.873

感谢您的回答，但正如我在我的问题中编辑的那样，我忘了提到我想创建一个 MySQL 数据库。我未能通过 ActiveRecord 创建 MySQL 数据库。然后我在**mysql2** gem 的帮助下解决了这个问题。这是我的解决方案：

```
client = Mysql2::Client.new(:host => 'localhost', :username=>"#{YOUR_MYSQL_USERNAME}", :password=> "#{YOUR_MYSQL_PASSWORD}")
client.query("CREATE DATABASE company_db")
client.query('USE company_db')
client.query('CREATE TABLE employees ...')
... 
```

这里'USE company_db'查询很重要，因为它告诉gem我们想在这个数据库上运行查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-25T15:00:55.587

您需要在没有数据库的情况下连接，然后创建它，然后连接数据库：

```
connection_options = { adapter: "mysql2", host: "127.0.0.1", username: "root" }
database = 'foo'
ActiveRecord::Base.establish_connection(connection_options)
begin
  ActiveRecord::Base.connection.create_database(database)
rescue ActiveRecord::StatementInvalid
  # already exists ...
end
ActiveRecord::Base.establish_connection(connection_options.merge(database: database)) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-08-24T18:33:57.330

您可以使用`create_database`关闭连接的方法，如下所示：

```
ActiveRecord::Base.establish_connection(connetion_params)
ActiveRecord::Base.connection.create_database('database_name') 
```

# ruby-on-rails - 本地预编译资产的自定义 rake 任务 rails 3.2.8

> ID：14161232
> 
> 赞同：0
> 
> 时间：2013-01-04T16:46:10.100
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, capistrano

我需要在我的本地机器上预编译资产，然后使用 capistrano 进行部署并预编译资产。

我已添加到`development.rb`：

```
config.assets.prefix = "/dev-assets" 
```

另外，我已经添加到`application.rb`

```
config.assets.initialize_on_precompile = false 
```

而是`rake assets:precompile`手动执行，我想从 capistrano 文件中自动执行此过程，清理资产，上传......等。我已经尝试过这个自定义任务

```
namespace :assets do
    task :precompile, :roles => :web, :except => { :no_release => true } do
      from = source.next_revision(current_revision)
      if capture("cd #{latest_release} && #{source.local.log(from)} vendor/assets/ app/assets/ | wc -l").to_i > 0
        run_locally "bundle exec rake assets:precompile"
        run_locally "rsync -zvrh --progress -e 'ssh -i #{ssh_options[:keys][0]}' public/assets #{user}{server}:#{shared_path}"
        puts "cleaning up locally compiled assets"
        run_locally "bundle exec rake assets:clean"
      else
        puts "Skipping asset pre-compilation because there were no asset changes"
      end
    end
  end 
```

但我得到一个错误：

```
/config/deploy.rb:73:in `block (3 levels) in load': undefined method `[]' for nil:NilClass (NoMethodError) 
```

如何在本地和使用 capistrano 上传后预编译资产？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:52:43.127

问题已解决：

这是我的自定义任务工作正常：

```
 namespace :assets do
    task :precompile, :roles => :web, :except => { :no_release => true } do
      from = source.next_revision(current_revision)
      if capture("cd #{latest_release} && #{source.local.log(from)} vendor/assets/ app/assets/ | wc -l").to_i > 0
        run_locally("rm -rf public/assets/*") 
        run_locally "bundle exec rake assets:precompile"
        find_servers_for_task(current_task).each do |server|
         run_locally "rsync -vr --exclude='.DS_Store' public/assets #{user}@#{server.host}:#{shared_path}/"
        end
      else
        puts.info "Skipping asset pre-compilation because there were no asset changes"
      end
    end
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:51:42.070

看起来问题是`logger.info`在`else`块中。

如果您出于其他原因*需要*Capistrano 中的记录器，则可能需要手动初始化它，因为您实际上并未在服务器中运行。但是只打印到控制台可能会更容易（就像您对上面的其他消息所做的那样

代替

```
logger.info "Skipping ..." 
```

和

```
puts "Skipping ..." 
```

# android - 无法使用 HttpClient 从 Android 使用 REST 服务

> ID：14161240
> 
> 赞同：0
> 
> 时间：2013-01-04T16:47:01.817
> 
> 标签：android, google-app-engine, rest, httpclient

我正在实现一个托管在 GAE 中的 RESTful 服务，试图将数据保存到数据存储区。

```
@Path("/db")
public class DBAccess {

    private static final Logger log = Logger.getLogger(DBAccess.class.getName());

    // Allows to insert contextual objects into the class,
    // e.g. ServletContext, Request, Response, UriInfo
    @Context
    UriInfo uriInfo;
    @Context
    Request request;

    @POST
    @Produces(MediaType.TEXT_HTML)
    @Consumes(MediaType.APPLICATION_JSON)
    public void saveDataBase(final List<User> data,
            @Context HttpServletResponse servletResponse,
            @Context HttpServletRequest servletRequest) throws IOException {

        log.info("saveDatabae REST Service has been called.");

        Key dbKey = KeyFactory.createKey("DataBase", "default");

        Entity user;
        DatastoreService datastore = DatastoreServiceFactory
                .getDatastoreService();

        for (int i = 0; i < data.size(); i++) {
            user = new Entity("User", dbKey);
            user.setProperty("idUser", data.get(i).getIdUser());
            user.setProperty("idGMC", data.get(i).getIdGMC());

            datastore.put(user);
        }

        servletResponse.sendRedirect("../index.jsp");
    }
} 
```

另一方面，我有一个 Android 应用程序试图像使用它一样使用它

```
private static void post(String endpoint, Map<String, String> params)
            throws IOException, JSONException {

        Iterator<Entry<String, String>> iterator = params.entrySet().iterator();

        Log.v(TAG, "Posting params to " + endpoint);

        HttpClient httpClient = new DefaultHttpClient();

        HttpPost post = new HttpPost(endpoint);

        post.setHeader("content-type", "application/json");

        // Build JSON
        JSONObject dato = new JSONObject();

        while (iterator.hasNext()) {
            Entry<String, String> param = iterator.next();
            dato.put(param.getKey(), param.getValue());
        }

        StringEntity entity = new StringEntity(dato.toString());
        post.setEntity(entity);

        HttpResponse resp = httpClient.execute(post);
        String respStr = EntityUtils.toString(resp.getEntity());

        Log.v(TAG, "HttpResponse is " + respStr);

    } 
```

这被称为

```
Map<String, String> params = new HashMap<String, String>();
params.put("regId", regId);
post("http://pickapp-server.appspot.com/rest/db", params); 
```

在 GAE 管理控制台中，我得到以下日志条目：

![在此处输入图像描述](../Images/267d9991796c83b2eb3593bcc21af9bc.png)

关键是，用户实体永远不会在 GAE 数据存储中创建。我猜 REST 服务没有被调用。谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:55:42.040

您的 REST 方法似乎需要一组 JSON 对象，而 Android POST 提供一个 JSON 对象。尝试将其包装在`JSONArray`.

# .net - CefSharp - 与 webView 容器交互时一切都冻结

> ID：14161242
> 
> 赞同：0
> 
> 时间：2013-01-04T16:47:22.300
> 
> 标签：.net, winforms, vb.net-2010, chromium-embedded, cefsharp

我有一个带有 webView 的 winform 应用程序，它似乎可以正常工作......直到我加载这个特定页面。文档加载完成后，任何与容器交互或右键单击内容的尝试都会导致一切冻结。但是，我可以与内容交互，单击组合框等。我可以 ctrl + alt + delete （打印屏幕似乎也可以工作）并且它可以释放 ui，直到我再次尝试与表单交互，除了红色 [ X] 在角落里，我可以在所有东西都被释放后关闭表单。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T22:06:16.307

我最终不得不为这个项目使用 winforms 浏览器控件。CefSharp 当前使用的 CEF (1) 版本似乎与 Web 应用程序中使用的 javascript 存在问题。CEF 3 似乎没有这些问题，但 CefSharp 目前不支持 CEF 3。

# java - 基于 CLI 的 maven 工件启动器：根据 repo 中的工件创建类路径并调用 main(...)？

> ID：14161248
> 
> 赞同：1
> 
> 时间：2013-01-04T16:47:42.067
> 
> 标签：java, maven, executable-jar

在我们基于 maven 的构建管道中，我们目前在 target/lib 中收集给定工件的所有依赖项，然后创建一个指向所述依赖项的空可运行 jar，然后可以像在 Eclipse 中一样调用它。

这对我们来说效果很好，但现在我想知道我们是否可以通过分发一个仅包含所需工件的 maven 存储库并有一个微型启动器来简化该过程——只需给定主工件“坐标”——可以创建一个指向主工件的类路径存储库中的工件（没有任何复制步骤）以及所有传递依赖项，然后调用`main(....)`?

即 Maven 本身可以做什么，但只能使用“在单个离线存储库中定位适当的工件”和“创建类路径并调用类”功能。没有网络访问权限。没有范围解析等。越小越好。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:28:11.920

我不确定，但您可以查看[appassembler-maven-plugin](http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/)，它将生成 shell-/batch 文件，该文件将在脚本中自动生成类路径，然后您可以将其打包到包含所有依赖项等的生成 zip 文件中. 并且您可以简单地解压缩 zip 并启动​​ bat/sh 脚本以在命令行上运行应用程序？

另一种选择可能是使用[maven-exec-plugin](http://mojo.codehaus.org/exec-maven-plugin/)，但它更倾向于在构建时执行 java/external 程序，但也可能适用于您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:37:04.247

Appassembler [Maven 插件](http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/)可以做到这一点。

我用它做的一个项目是get-another-label。您可以[查看它的 pom](https://github.com/ipeirotis/Get-Another-Label/blob/master/pom.xml)以了解它是如何工作的。

另一个解决方案是 pomstrap，它看起来像 scm:checkout on steroids：

[http://pomstrap.tigris.org/](http://pomstrap.tigris.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:27:36.150

IMO 最简单的解决方案是[阴影](http://maven.apache.org/plugins/maven-shade-plugin/)插件。它创建了一个“uber-JAR”，其中包含所有依赖项。

这个插件的主要缺点是如果你有非类文件位于相同的类路径位置（这在 Spring 配置文件中经常发生）。您需要[告诉插件](http://maven.apache.org/plugins/maven-shade-plugin/examples/resource-transformers.html)如何解决任何重叠。

您*可以*创建一个包含所有依赖项的离线存储库。事实上，Spring 是为其培训课程这样做的。但是，要完成这项工作，您需要确保用户没有覆盖`settings.xml`（如果您依赖他们已经拥有 Maven，这不太可能）。但是，如果所有星星都对齐，那么就需要传递`mvn:exec`正确的参数了。

* * *

@ThorbjørnRavnAndersen - 你的问题似乎是关于创建一个可运行的 JAR；Maven 部分似乎是您解决问题的方法。我不确定您*为什么*要提供 Maven 存储库，但是从 G/A/V 到存储库位置的转换相当简单，而且您可以使用一点 XPath 来完成。或者您可以转向[Aether](http://www.sonatype.org/aether)，但这似乎违背了您的“轻量级、无网络、无版本范围”标准。

也许您可以解释*为什么*uber-JAR 不适合您的需求？

# c++ - 将纳秒转换为秒和纳秒

> ID：14161251
> 
> 赞同：1
> 
> 时间：2013-01-04T16:47:53.047
> 
> 标签：c++, time, integer-arithmetic

我有一个非常大的纳秒值（表示自纪元以来的纳秒），我尝试将其分解为自纪元以来的秒数和像这样的纳秒：

```
uint64_t nanosecondsEpoch;
unsigned secs = nanosecondsEpoch / 1000000000ULL;
unsigned nanos = nanosecondsEpoch - (secs * 1000000000ULL); 
```

问题是如果我尝试像这样将它缝合在一起：

```
uint64_t stichBack = secs * 1000000000ULL + nanos 
```

我得到了一些离题的东西。我认为原因是当我执行除法时，我得到 1357314854.03 秒，而 0.03 被丢弃（导致巨大差异）..但我很困惑，因为感觉我应该能够将两条信息都保存在未签名并在不诉诸浮动的情况下恢复信息？我是否在做一些我似乎无法理解的算术愚蠢的事情？

这是一个具体的例子：

从今天早上的某个时间开始的纳秒值：1357314854032484000

如果我可以使用 uint64_t 秒和纳秒无符号，但我想知道为什么我不能像上面那样打破上述值并将其重新组合在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:00:22.920

由于`1e9`小于`2^32-1`（最大无符号 32 位整数），如果原始值足够大，商可能仍然太大而无法放入 32 位整数。不确定您的原始值是多少，但您可能会因此截断您的`secs`值。

# objective-c - 对部分 NSAttributedString 应用粗体，同时保留字体大小和面

> ID：14161254
> 
> 赞同：2
> 
> 时间：2013-01-04T16:47:57.997
> 
> 标签：objective-c, ios, nsattributedstring

我正在为 iOS 开发一个富文本编辑器，使用 a`UITextView`和`NSAttributedString`. 它的功能与传统的类似（即选择一个区域，单击一个按钮，并将该效果应用于该区域，同时保留文本上的任何其他属性。

不幸的是`NSAttributedString`，并不是所有的都可以独立调整。其中一些（至少是粗体、字体和字体大小）都需要传递 a `UIFont`，它将为该区域设置所有这些属性（即使您只想设置一个）。将单个区域视为可能包含多个面和大小，这将导致幼稚的方法破坏许多现有格式。

有什么推荐的方法来完成这个吗？我在想我唯一的选择是遍历我想要应用它的区域的属性，将它分组为具有相同其他字体属性的块，然后将它单独应用于每个块。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T17:54:43.440

您有正确的想法，并且算法已经为您提供了`enumerateAttribute:inRange:options:usingBlock:`。要使用它来处理字体运行：

```
[myAttributedString enumerateAttribute:NSFontAttributeName
                               inRange:selectedRange
                               options:NSAttributedStringEnumerationLongestEffectiveRangeNotRequired
                            usingBlock:addBoldBlock
] 
```

其中*addBoldBlock*采用当前字体（作为块的第一个参数提供），添加粗体，并将其应用于当前块（作为块的第二个参数提供）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T16:07:14.927

这是我在 DTrichTextEditor 中使用的：

```
- (void)toggleBoldInRange:(NSRange)range
{
    // first character determines current boldness
    NSDictionary *currentAttributes = [self typingAttributesForRange:range];

    if (!currentAttributes)
    {
        return;
    }

    [self beginEditing];

    CTFontRef currentFont = (__bridge CTFontRef)[currentAttributes objectForKey:(id)kCTFontAttributeName];
    DTCoreTextFontDescriptor *typingFontDescriptor = [DTCoreTextFontDescriptor fontDescriptorForCTFont:currentFont];

    // need to replace name with family
    CFStringRef family = CTFontCopyFamilyName(currentFont);
    typingFontDescriptor.fontFamily = (__bridge NSString *)family;
    CFRelease(family);

    typingFontDescriptor.fontName = nil;

    NSRange attrRange;
    NSUInteger index=range.location;

    while (index < NSMaxRange(range)) 
    {
        NSMutableDictionary *attrs = [[self attributesAtIndex:index effectiveRange:&attrRange] mutableCopy];
        CTFontRef currentFont = (__bridge CTFontRef)[attrs objectForKey:(id)kCTFontAttributeName];

        if (currentFont)
        {
            DTCoreTextFontDescriptor *desc = [DTCoreTextFontDescriptor fontDescriptorForCTFont:currentFont];

            // need to replace name with family
            CFStringRef family = CTFontCopyFamilyName(currentFont);
            desc.fontFamily = (__bridge NSString *)family;
            CFRelease(family);

            desc.fontName = nil;

            desc.boldTrait = !typingFontDescriptor.boldTrait;
            CTFontRef newFont = [desc newMatchingFont];
            [attrs setObject:(__bridge id)newFont forKey:(id)kCTFontAttributeName];
            CFRelease(newFont);

            if (attrRange.location < range.location)
            {
                attrRange.length -= (range.location - attrRange.location);
                attrRange.location = range.location;
            }

            if (NSMaxRange(attrRange)>NSMaxRange(range))
            {
                attrRange.length = NSMaxRange(range) - attrRange.location;
            }

            [self setAttributes:attrs range:attrRange];
        }

        index += attrRange.length;
    }

    [self endEditing];
} 
```

这使用来自开源 DTCoreText 项目的 DTCoreTextFontDescriptor。

PS：您必须相应地调整它以与 UIFont 一起使用。

# linux - 在没有 3rd 方包的情况下监视目录的更改

> ID：14161256
> 
> 赞同：1
> 
> 时间：2013-01-04T16:48:02.267
> 
> 标签：linux, bash, shell, unix, ubuntu

许多其他问题都与 StackOverflow 相关。我没有找到任何结果不使用任何 3rd 方包的地方。

问题是我正在使用 Hetzner，他们希望允许我安装任何软件包。

我可以使用 PHP、Python、Java（几乎是标准集合）

> 如何监视新文件的目录（递归）并将引用获取到另一个文件中。

我尝试过这样的事情：

```
while true; do
    last=`cat log.txt`
    find "$UPLOAD_FOLDER"'/.' -type f > 'log.txt'
    now=`cat log.txt`

    diff -n <(echo "$last") <(echo "$now") >> 'queue.txt'

    sleep 60;
done; 
```

但它是不可靠的，它会污染,`queue.txt`等。`d3a``b5a`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:14:24.397

可能最简单的是使用标记文件：

```
touch markerFile
while true
do
    find "$UPLOAD_FOLDER"'/.' -type f -newer markerFile >> 'queue.txt'
    touch markerFile
    sleep 60
done 
```

查找和触摸之间可能存在轻微的竞争条件？

评论中建议的更复杂的双缓冲解决方案：

```
touch markerFileA
touch markerFileB
while true
do
    touch markerFileB
    find "$UPLOAD_FOLDER"'/.' -type f -newer markerFileA ! -newer markerFileB >> 'queue.txt'
    sleep 60
    touch markerFileA
    find "$UPLOAD_FOLDER"'/.' -type f -newer markerFileB ! -newer markerFileA >> 'queue.txt'
    sleep 60
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:54:38.383

您可以使用`sed`删除不需要的输出：

```
while :; do

    find "$UPLOAD_FOLDER/." -type f > "log1.txt"

    if [ -f "log2.txt" ]; then
        diff log1.txt log2.txt | sed '/^[^<]/d;s/^< //'

        fi

    mv "log1.txt" "log2.txt"

    sleep 60

done 
```

# objective-c - 如何在方法中返回带有异步请求的 BOOL？（目标-C）

> ID：14161257
> 
> 赞同：3
> 
> 时间：2013-01-04T16:48:06.667
> 
> 标签：objective-c

我有一个服务器，我在其中请求一些数据。

我正在检查是否存在具有特定名称的图像并且我需要返回一个 BOOL 值（是或否），但我不知道该怎么做，因为异步请求在完成时会调用回调，所以当它的完成方法很久以前就完成了，它不返回 BOOL 值，我不使用同步请求，因为它阻塞了主线程。

这是我的代码（我知道这是错误的，但我还是写了它来展示我想做的一个例子，因为我的英语不太好）：

```
- (BOOL)imageDoesExistsOnTheServer:(NSString *)imageName {
    BOOL exists;

    NSString * query = [[NSString alloc] initWithFormat:@"request=IMAGE&imageName=%@", imageName];

    DREasyURLRequest * imageExistsRequest = [[DREasyURLRequest alloc] initForSendDataToServerWithURLString:@"http://xxxxx.xxxxx/file.php" query:query];

    [imageExistsRequest sendAsynchronouslyWithCompletionForStringAsResponse:^(NSString *receivedResponse) {
        if ([receivedResponse isEqualToString:@"YES"]) {
            __block BOOL exists = YES;
        } else {
            __block BOOL exists = NO;
        }
    }];

    return exists;
} 
```

（DREasyURLRequest 是我为保存一些代码而创建的 NSMutableURLRequest 的子类，但 sendAsynchronouslyWithCompletionForStringAsResponse: 与异步 NSMutableURLRequest 方法完全相同。

你们能帮帮我吗？

PD：我知道，这段代码看起来很糟糕哈哈哈，但我不知道该怎么做......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T16:51:19.537

您的代码不会调用该块，因此您不能使用`return`它为您的代码提供任何内容。相反，停止考虑返回值，并开始考虑行为。当你得到积极的回应时，你希望发生一些事情，当你得到消极的回应时，你希望发生一些事情。因此，为每种行为编写方法，并在块中的适当位置调用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T16:53:40.157

你不能返回这样的值。该函数不会等到块的异步执行完成。处理此类情况的惯用模式是保持控制流的异步特性并相应地实现回调逻辑。例如，您可以使用委托或传入另一个块，它会通知您图像是否存在：

```
- (BOOL)imageDoesExistsOnTheServer:(NSString *)imageName completion:(void ^(BOOL exists)compl {
    // etc.
    [imageExistsRequest sendAsynchronouslyWithCompletionForStringAsResponse:^(NSString *receivedResponse) {
    if ([receivedResponse isEqualToString:@"YES"]) {
        compl(YES);
    } else {
        compl(NO);
    }
}]; 
```

并这样称呼它：

```
[self imageDoesExistOnTheServer:@"Foo.png" completion:^(BOOL exists) {
    if (exists) {
        // exists
    }
}]; 
```

# java - 如何使用 jsoup 从 HTML 中解析两个表格？

> ID：14161263
> 
> 赞同：2
> 
> 时间：2013-01-04T16:48:12.517
> 
> 标签：java, jsoup

[我需要使用站点http://www.informatik.uni-trier.de/~ley/pers/hd/k/Kumar:G=_Praveen.html](http://www.informatik.uni-trier.de/~ley/pers/hd/k/Kumar:G=_Praveen.html)中的 jsoup 库来解析 HTML 中的两个表 。因为有页面上有两个表格，我不知道如何解析表格内容。我需要提取第一个表格的内容，即只有作者姓名及其出版物和最后命名为共同作者的第二个表格......我试图编码（下面给出的代码）但它给出了错误......</p>

```
public class Main {
    public static void main(String[] args) {
        try {
            Document doc =Jsoup.connect(“http://www.informatik.unitrier.de/~ley/pers/hd/k/Kumar:G=_Praveen.html“).get();
            Elements trs = doc.select(“table tr”);
            Element table = doc.select(“table[class=coauthor]“).first();
            Iterator ite = table.select(“td”).iterator();
            ite.next();
            System.out.println(“Value 1: ” + ite.next().text());
            System.out.println(“Value 2: ” + ite.next().text());
            System.out.println(“Value 3: ” + ite.next().text());
            System.out.println(“Value 4: ” + ite.next().text());
            trs.remove(0);
            for (Element tr : trs) {
                Elements tds = tr.getElementsByTag(“td”);
                Element td = tds.first();
                System.out.println(“Blog: ” + td.text());
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

请建议我在上面的代码中需要做哪些确切的更改，以便我从表中获得我需要的确切信息..任何帮助将不胜感激..thanx 提前..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:10:17.877

## 作者和der出版物：

```
final String url = "http://www.informatik.uni-trier.de/~ley/pers/hd/k/Kumar:G=_Praveen.html";
Document doc = Jsoup.connect(url).get();

for( Element element : doc.select("table div.data") )
{
    // System.out.println(element); // Use this line if you need the HTML Element instead of the text
    System.out.println(element.text());
} 
```

**输出：**

```
G. Praveen Kumar, Anirban Sarkar: Weighted Association Rule Mining and Clustering in Non-binary Search Space. ITNG 2010: 238-243
G. Praveen Kumar, Arjun Kumar Murmu, Biswas Parajuli, Prasenjit Choudhury: MULET: A Multilanguage Encryption Technique. ITNG 2010: 779-782
G. Praveen Kumar, Anirban Sarkar, Narayan C. Debnath: A New Algorithm for Frequent Itemset Generation in Non-Binary Search Space. ITNG 2009: 149-153 
```

## 合著者：

```
for( Element element : doc.select("table td.coauthor") )
{
    System.out.println(element.text());
} 
```

**输出：**

```
Prasenjit Choudhury
Narayan C. Debnath
Arjun Kumar Murmu
Biswas Parajuli
Anirban Sarkar 
```

# c++ - 有没有办法改变 X11 中的 ConfigureNotify 事件频率？

> ID：14161264
> 
> 赞同：2
> 
> 时间：2013-01-04T16:48:14.220
> 
> 标签：c++, c, x11

我有一个小图形程序，它使用 ConfigureNotify 事件来检测窗口大小调整和重绘应用程序。但是，当拖动窗口调整大小时，调整大小事件似乎出现得有点慢，这会导致重绘变得不稳定。有没有办法配置这个事件率？除此之外，有没有办法检测调整大小的开始/结束，以便我可以推迟重绘直到达到最终大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:04:37.963

不，无法配置事件率；他们只是在 X 服务器认为合适的时候进来。但是，部分抖动可能正是因为您在调整大小事件后立即更新窗口（我希望您不要**在**事件处理程序中这样做......）原因是您立即让 X 服务器忙于您的绘画，几乎没有时间将事件发回。

我对这种行为的标准解决方案是：在调整大小时，使用计时器定期重绘（例如，每 200 毫秒左右）。使用绘画程序开始时的宽度和高度（请记住，您可以在绘画时接收调整大小事件！）。如果自上次计时器事件以来宽度/高度没有变化，则停止计时器。

我建议使用 Xt 工具包来实现定时器和其他回调；它比单纯的 Xlib 调用更容易使用。

# java - Java Swing 专注于 Tab 键

> ID：14161272
> 
> 赞同：2
> 
> 时间：2013-01-04T16:48:46.477
> 
> 标签：java, swing

当我们使用“Tab”键时，有没有办法将焦点跳过到特定组件。如果用户双击组件，那么焦点应该转到该文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T18:40:53.883

所以基本上你想改变按下的`JTable`功能？`Tab`

Swing 使用[`KeyBinding`s](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)`KeyBinding`通过添加一个新的 to 来简单地替换 Swing 组件在按键等上的现有功能`JTable`（美丽的原因是`JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT`）：

```
table.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT).put(KeyStroke.getKeyStroke(KeyEvent.VK_TAB, 0), "tab");
table.getActionMap().put("tab", new AbstractAction() {
    @Override
    public void actionPerformed(ActionEvent ae) {
        //do something on JTable tab pressed or do nothing
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T17:41:02.677

尝试`table_name.setFocusable(false);`

# javascript - 无法让ajax响应

> ID：14161273
> 
> 赞同：-1
> 
> 时间：2013-01-04T16:48:47.663
> 
> 标签：javascript, jquery, ajax

我正在尝试进行简单的 ajax 调用，并将返回的 JSON 字符串转换为 javascript 数组。这得到了正确的值..代码不起作用。我想简单地返回 json 字符串并将其转换为数组..

```
function getData(){
    var barcode = $('#idQuery').val();
    alert(barcode);
    var test = $.ajax({
        type: 'GET',
        dataType: 'json',
        url: 'http://example.com/public/ruser/family',
        data: {barcode: barcode},
        success: function(data){
            alert(data);
        }
    });
    alert(test);
} 
```

如果我把它放在 url 中，这是来自浏览器的响应。

```
[[{"age":10,"id":"1","name":"John Doe","points":"4275653423"}]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:24:09.453

```
function getData(){
    var barcode = $('#idQuery').val();
    alert(barcode);
    $.ajax({
        type: 'POST',
        contenttype: "application/json; charset=utf-8",
        url: "controller/action",
        data: {barcode: barcode},
        success: function(data){
            alert(data);
        }
    });

} 
```

尝试上面它应该工作让我知道进度......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:10:52.083

编辑：一旦响应是有效的json，并且ajax成功回调执行，为了将服务器返回的json字符串转换为javascript对象使用`JSON.parse()`

```
success: function (data) {
    var obj = JSON.parse(data);
    alert(obj.age);
} 
```

注意：只有更现代的浏览器原生支持 json 序列化 (JSON.parse)。为确保旧版浏览器支持此功能，建议使用 Douglas Crockford 的 json2.js：

[https://github.com/douglascrockford/JSON-js/blob/master/json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

只需下载并将上述内容包含在您的页面中，您就可以开始了。

编辑：来自服务器的响应包括一个数组，其中包含另一个数组，其中包含带有数据的对象：

`[[{"age":10,"id":"1","name":"John Doe","points":"4275653423"}]]`

服务器需要响应一个只包含对象的 json 字符串：

`'{"age":10,"id":"1","name":"John Doe","points":"4275653423"}'`

最后，服务器必须以正确的内容类型“application/json”响应

编辑：在您的评论中，您说服务器返回 303，这是一个重定向。您在 ajax 调用中使用的 url 重定向到另一个返回您想要的数据的 url。您需要使用返回数据的 url。url 需要完全匹配。例如，`http://example.com/public/ruser/family`不等于`http://example.com/public/ruser/family/`

编辑：最终代码：

```
function getData(){
    var barcode = $('#idQuery').val();

    var test = $.ajax({
        type: 'GET',
        dataType: 'json',
        url: 'http://example.com/public/ruser/family.json',
        data: { barcode: barcode },
        success: function (data) {
            var obj = JSON.parse(data);
            alert(obj.age);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:39:51.873

数据提供者是否与使用 $.ajax 的客户端在同一个域中？如果没有，您需要确保您使用的是 JSONP（我可以看到您不是来自您的函数），或者数据提供程序上的 Access-Control-Allow-Origin 标头设置为允许客户端域。

如果是跨域问题，则永远不会调用成功回调，您可以通过实现完整方法来测试错误以进行进一步调试。（注意：console.log 对调试比警报更有用。）

查看此日志为您记录的内容：

```
function getData(){
    var barcode = $('#idQuery').val();
    var test = $.ajax({
        type: 'GET',
        dataType: 'json',
        url: "http://api.flickr.com/services/feeds/photos_public.gne?format=json",
        data: {barcode: barcode},
        success: function(data){
            console.log(data);
        },
        complete: function(jqXHR, textStatus) {

            console.log(jqXHR)

            console.log("What's the issue? " + textStatus)
        }
    });
} 
```

此外，如果您使用 Chrome 的开发工具（您应该这样做，因为它们很棒），任何跨域错误都会记录到控制台。（使用 F12 打开它或右键单击并检查元素。）

# javascript - 切换“提交时输入”

> ID：14161274
> 
> 赞同：0
> 
> 时间：2013-01-04T16:48:52.363
> 
> 标签：javascript, jquery, forms

我有一个输入字段，通过 keyUp() 上的 AJAX 对数据库进行验证。

如果输入的文本令人满意，则启用 a。

我还想为文本输入字段切换提交时的输入。

```
<div id="faq_dupe" class="center-modal">
    <form id="faq_form" onsubmit="AJAXsendData(); hideModal('faq_dupe'); return false;">
        <input id="faq_dupe_search" type="text" placeholder="e.g. 00AA1" class="noEnterSubmit"/>
        <button id="faq_dupe_img" type="submit" disabled>
            <img src="/img/val-no.png"/>
            <div>Submit</div>
        </button>
    </form>
    <script type="text/javascript">
        $('.noEnterSubmit').keypress(function(e){
            if ( e.which == 13 ) return false;
        });
    </script>
    <script type="text/javascript">
        $('#faq_dupe_search').keydown(function() {
            var faqimg = '<img src="/img/load-a-40px.gif"/><div>Submit</div>';
            document.getElementById('faq_dupe_img').innerHTML = faqimg;
        });
    </script>
    <script type="text/javascript">
        $('#faq_dupe_search').keyup(function() {
            AJAXvalFAQid($('#faq_dupe_search').val());
        });
    </script>
</div> 
```

我有 AJAXvalFAQid() 添加和删除 .noEnterSubmit 类。

截至目前，无论是否应用了 .noEnterSubmit 类，按 Enter 将不会执行 onsubmit="" 中的脚本。

这是我最终使用的：

```
<script type="text/javascript">
    function onsubmit(event) {
        if(noEnterSubmit === true){
            event.preventDefault();
        }else{
            sendData();
            hideModal('faq_dupe');
            return false;
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:51:46.237

如果`.noEnterSubmit`在您进行初始绑定时出现在输入上，则无论该类是否存在，它将始终绑定到该输入。在 keyup 发生后，您需要检查类，如下所示：

```
$('#faq_dup_search').keypress(function(e){
    if($(this).hasClass('noEnterSubmit') && e.which == 13){
        return false;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:55:06.670

只有一个提交功能更容易。它可能看起来像这样：

```
function onsubmit(event) {
    if (input_is_valid()) {
        // all is well, let the event continue
    } else {
        event.preventDefault(); // block the submit
        show_errors();
    }
} 
```

和

```
<form id="faq_form">..</form>
<script type="text/javascript">
    $("#faq_form").submit(onsubmit);
</script> 
```

# c# - 更新edmx模型后，DbContext呢？

> ID：14161277
> 
> 赞同：4
> 
> 时间：2013-01-04T16:49:02.033
> 
> 标签：c#, visual-studio-2010, sql-server-2008-r2, entity-framework-5, dbcontext

我刚开始使用EF5。我创建了一个 MSSQL 数据库，然后创建了模型 (edmx) 文件，然后使用“添加代码生成项”来创建 EF5`dbcontext`类。

每当我更改数据库（添加列或更改数据类型）时，我都会看到“从数据库更新模型”不起作用，我需要删除并重新创建模型。这对我来说没问题，但是`DbContext`从`model.tt`模板文件生成的类会发生什么？我还必须`DbContext`再次生成所有类吗？

使用数据库优先环境并使`.edmx`模型和`DbContext`类与数据库保持同步的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-20T01:37:17.913

从数据库更新模型后，尝试`Run Custom Tool`使用实体模型，为我工作和测试。

从`Entity Model`→ `Right Click`→`Run Custom Tool`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T01:33:29.250

我可以看到两种方法：

1) 使用 edmx 和数据库优先流的 EF4 方法（EF5 也应该可以）。然后，每当您的数据库发生更改时，您只需从 edmx 设计器上下文菜单中“从数据库更新您的模型..”。这会自动更新您生成的实体类。

2) 使用 EF5 方法 - 一次生成您的 POCO 类，根本不使用 edmx。您可以使用 Entity Framework Power Tools 执行此操作，然后使用“逆向工程师代码优先”。当数据库模型更改时手动将更改应用于您的类（这显然只适用于增量数据库更改）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:07:39.187

在 VS2010 中，解决方案资源管理器的右上角有一个名为“转换所有模板”的按钮，用于更新生成的类

# iphone - 将对象从一个 NSDictionary 复制到另一个

> ID：14161281
> 
> 赞同：1
> 
> 时间：2013-01-04T16:49:31.093
> 
> 标签：iphone, objective-c, ios, cocoa

将对象从一个 NSDictionary 复制到另一个的最干净的方法是什么？我必须从字典中提取特定值并将它们存储在新字典中。目前我有一些像这样的简单代码......

```
NSString *value1 = [dictA objectForKey:@"1"];
[dictB setObject:value1 forKey:@"1"]; 
```

...但感觉它的通用代码比我想要的要多。我必须这样做很多次，我想知道是否有更清洁的方法来做到这一点。

提前感谢您的智慧！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T16:55:39.087

在现代 Objective-C 语法中，您实际上可以`dictA[@"key1"] = dictB[@"key1"]`使用可变字典编写。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T17:03:18.350

If you want to do this for a lot of keys, consider using `+ (id)dictionaryWithSharedKeySet:(id)keyset`. You'll have to create the keyset first with `sharedKeySetForKeys:` This would lead to only two lines of code...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T16:55:40.353

假设两个字典之间的键是相同的，那么也许你可以制作一个这样的辅助方法：

```
- (void)copyObjectFromDictA:(NSDictionary *)dictA toDictB:(NSDictionary *)dictB forKeys:(NSArray *)keys
{
  for (NSString *key in keys) 
  {
    [dictB setObject:[dictA objectForKey:key] forKey:key]];
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T16:51:23.463

为什么不在一行中？

```
[dictB setObject:[dictA objectForKey:@"1"] forKey:@"1"]; 
```

在上面的代码中，您可以根据需要更改密钥。

# android - 来自运行 Android 的三星设备的序列号

> ID：14161282
> 
> 赞同：19
> 
> 时间：2013-01-04T16:49:37.213
> 
> 标签：android, samsung-mobile

我有三星 Galaxy Tab 2.0 (7")

该设备的背面是格式的序列号

RF3C6000MNA

当我进入设备的设置，选择关于设备->状态->序列号时，也会出现此编号。

但是，我无法找到以编程方式提取此数字的方法。

我看过很多关于提取序列号的文章，但这会返回一个完全不同的数字。（使用 android.os.Build.SERIAL）

我已经提取了 IMEI 和 MAC 地址，所以我不需要代码。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-06T04:43:39.653

```
public static String getManufacturerSerialNumber() {
  String serial = null; 
  try {
      Class<?> c = Class.forName("android.os.SystemProperties");
      Method get = c.getMethod("get", String.class, String.class);
      serial = (String) get.invoke(c, "ril.serialnumber", "unknown");
  } catch (Exception ignored) {}
  return serial;
} 
```

**编辑：**这个答案已经有一段时间了，这里有几个更新点：

*   OP 询问了**Galaxy Tab 2**，而答案确实是`ril.serialnumber`（即使对于非 3G 型号 - 请参阅此[要点](https://gist.github.com/jgold6/f46b1c049a1ee94fdb52)）。根据Himanshu's answer **Galaxy Tab 3** uses `sys.serialnumber`（也支持[this answer](https://stackoverflow.com/a/27274950/1027527)）。代表*Radio Interface Layer*`sys.serialnumber`对平板电脑更有意义，大多数平板电脑都没有配备（分别对手机更有意义）。`ril.*`*`ril.serialnumber`*
**   没有用于获取设备序列号的标准 API（即包装上的序列号 -**不要**与`Settings.Secure.ANDROID_ID`散布在 API 中的各种其他“唯一”标识符混淆）。这意味着由制造商决定在哪里存储设备序列号（如果有的话）。在**S3 Mini**上是`ril.serialnumber`，在**NexusOne**上是`ro.serialno`（[要点](https://gist.github.com/tetsu-koba/992373)），在**Galaxy Tab 2**上是`ril.serialnumber`，在**Galaxy Tab 3/4**上是`sys.serialnumber`，在**Lenovo Tab**上[不是以上](https://stackoverflow.com/questions/23773975/how-to-get-real-serial-number-of-lenovo-tab-in-android). 在查找设备序列时，这些设置似乎是常见的嫌疑人，但不应被视为理所当然，因此不应依赖于跟踪独特的应用程序安装。*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-06T15:04:10.547

You can use the `getprop` command on the adb shell and check yourself that which of the files contains the correct serial number. Many times the serial number is located in different files and a code has to be device specific.

For samung Tab 3 you can use the following code:

```
try {

        Class<?> c = Class.forName("android.os.SystemProperties");

        Method get = c.getMethod("get", String.class, String.class);

        serialnum = (String) (get.invoke(c, "sys.serialnumber", "unknown"));

    } catch (Exception ignored) {

        serialnum = "unknown";

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:57:23.493

我们为我们的产品使用 Build 类。看看这是否匹配：http: [//developer.android.com/reference/android/os/Build.html#SERIAL](http://developer.android.com/reference/android/os/Build.html#SERIAL)*

# performance - .htaccess 文件来加速网站？

> ID：14161283
> 
> 赞同：-5
> 
> 时间：2013-01-04T16:49:40.787
> 
> 标签：performance, .htaccess, pagespeed

我的一个朋友为我构建了一个 htaccess 文件，而我现在实在是太菜鸟了，无法阅读并知道它确实（确切地）。我所知道的是它应该进行 gzip 压缩并缓存我的网站。当我进行速度测试时，它说“压缩 gzip”和“使用浏览器缓存”，我被告知 htaccess 文件应该这样做。这是一个基本的 HTML 网站，没什么疯狂的，但我只是想清理一些速度问题。无论如何，这是它的代码。如果有人可以看看它并告诉我出了什么问题，我将非常感激。如果您需要更多信息，我很乐意发布。多谢你们！

```
<ifmodule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/text text/html text/plain text/xml text/css application/x- javascript application/javascript
</ifmodule>

<IfModule mod_gzip.c>
    mod_gzip_on Yes
    mod_gzip_dechunk Yes
    mod_gzip_item_include file \.(html?|xml|txt|css|js)$
    mod_gzip_item_include handler ^cgi-script$
    mod_gzip_item_include mime ^text/.*
    mod_gzip_item_include mime ^application/x-javascript.*
    mod_gzip_item_exclude mime ^image/.*
    mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</IfModule>

<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType text/html "access 2 day"
    ExpiresByType text/css "access 2 day"
    ExpiresByType application/javascript "access 1 month"
    ExpiresByType text/plain "access 1 month"
    ExpiresByType image/jpeg "access 1 month"
    ExpiresByType image/jpg "access 1 month"
    ExpiresByType image/gif "access 1 month"
    ExpiresByType image/png "access 1 month"
    ExpiresByType application/pdf "access 1 month"
    ExpiresByType application/x-shockwave-flash "access 1 month"
    ExpiresDefault "access 2 days"
</IfModule>

<ifModule mod_headers.c>
    Header set Connection keep-alive
</ifModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:00:54.787

Check if the modules (deflate, gzip, etc) are enabled in your `httpd.conf` file.

# java - 如何以二进制形式显示按位运算的结果？

> ID：14161292
> 
> 赞同：1
> 
> 时间：2013-01-04T16:50:11.227
> 
> 标签：java, bit-manipulation, bitwise-operators

> **可能的重复：**
> [在 Java 中将十进制转换为二进制](https://stackoverflow.com/questions/5203974/converting-decimal-to-binary-in-java)

我发现这段代码将一个数字`x`、一个数组`p`和另一个`pmax`表示数组大小的数字作为输入`p`

```
public static int permute(int x, int p[], int pmax) {
    int y = 0;

    for (int i = 0; i < p.length; ++i) {
        y <<= 1;
        y |= (x >> (pmax - p[i])) & 1;
    }

    return y;
} 
```

此代码应`x` 根据数组中定义的规则排列存储在数字中的第一个字节的位`p`

例如，如果 are 的前 pmax 位`x`和`101`数组 p 如下： `p={2 1 3}` 那么这个函数（`y`）的结果将等于`011`

**问题**

我从未使用过按位运算符，我想查看上述代码的所有中间结果。例如做`y<<=1`什么以及为什么使用它。为此，我需要在某种程度上`y`以二进制形式显示变量，否则我只会得到一些随机小数，这无助于我理解任何事情。

那么如何在每次按位运算后以二进制格式显示结果呢？

如果这不是准确了解此代码功能的好方法，您会建议什么方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T16:52:41.613

[`Integer.toBinaryString(int x)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#toBinaryString%28int%29)会为你做这件事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T16:53:06.753

你在找[`Integer.toBinaryString(int i)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#toBinaryString%28int%29)吗？

# c# - 等待异步方法在 wp7 中返回结果

> ID：14161293
> 
> 赞同：0
> 
> 时间：2013-01-04T16:50:15.897
> 
> 标签：c#, windows-phone-7, asynchronous, windows-phone-7.1

你好朋友我有一个代码如下：

```
for (int i = 1; i < 6; i++)
{
    int j = 0;
    Nos[j++] = Config[i];

    var xmladd = "uri to download data";
    WebClient _proxy2 = new WebClient();
    _proxy2.DownloadStringCompleted += new DownloadStringCompletedEventHandler(DownloadStringCompleted);
    _proxy2.DownloadStringAsync(new Uri(xmladd));

    string msg = Config[11] + ":" + Config[12] + " .My Current Location is " + Properties.address + " , Latitude : " + clslatlong.ReturnLat() + " , Longitude : " + clslatlong.ReturnLongi(); 
} 
```

这里的问题是完成事件不会立即触发并继续执行进一步的代码，但我的下一个代码是基于完成事件返回的结果在这种情况下应该做什么？我的代码应该等待从完成的事件中获得响应，然后继续请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:52:45.587

如果取决于结果，您应该在请求完成处理程序中继续执行代码。这就是事件驱动或异步编码的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T19:14:43.143

异步编程可能会变得混乱；正确的方法是通过约翰保罗的回答：拆分你的函数并将它的一部分放在事件处理程序中。您的代码最终会*变得非常*混乱，因为您正在循环中执行异步操作。

您的问题有 WP7 和 WP7.1 标签；如果您可以只支持 WP7.1，那么您可以选择[Microsoft.Bcl.Async](https://nuget.org/packages/Microsoft.Bcl.Async)库（目前处于 Beta 版）。这在 WP7.1 上启用`async`/ `await`，这更容易：

```
for (int i = 1; i < 6; i++)
{
  int j = 0;
  Nos[j++] = Config[i];

  var xmladd = "uri to download data";
  WebClient _proxy2 = new WebClient();
  var result = await _proxy2.DownloadStringTaskAsync(xmladd);

  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:54:57.487

您可以将 Async CTP 库用于此类功能。

下载： [http ://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=9983](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=9983)

示例：http: [//10rem.net/blog/2012/05/22/using-async-and-await-in-silverlight-5-and-net-4-in-visual-studio-11-with-the-异步目标包](http://10rem.net/blog/2012/05/22/using-async-and-await-in-silverlight-5-and-net-4-in-visual-studio-11-with-the-async-targeting-pack)

# asp.net-mvc - Umbraco 4.11 MVC 模式 - 儿童网址？

> ID：14161294
> 
> 赞同：3
> 
> 时间：2013-01-04T16:50:18.993
> 
> 标签：asp.net-mvc, umbraco

在 MVC 模式下使用 Umbraco 4.11 时获取当前节点子节点的 URL 的正确方法是什么？这是我尝试过的，它一直返回一个空白 URL：

```
@if (CurrentPage.Children().Count() > 0) {
    <ul>
    @foreach (var child in CurrentPage.Children()) {
        <li><a href="@child.Url">@child.Name</a></li>
    }
    </ul>
} 
```

当这不起作用时，我采取了以下措施：

```
@Umbraco.NiceUrl(child.Id) 
```

这会返回一个 URL，但它上面有 .aspx 扩展名。所以我的下一个技巧是......

```
@Umbraco.NiceUrl(child.Id).Replace(".aspx", "") 
```

这并不完全可怕，但我想知道我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T17:22:33.293

您需要 NiceUrl() 方法来生成有效的 Url。要摆脱 .aspx 扩展名，您需要在 web.config 文件中将设置“umbracoUseDirectoryUrls”设置为 true：

```
<add key="umbracoUseDirectoryUrls" value="true" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T20:19:49.913

我无法将此添加为评论，但有一种方法可以在 umbracoSettings.config 中删除斜杠：

```
<addTrailingSlash>true</addTrailingSlash> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T16:07:51.730

获取仅节点名称（不带 .aspx）的其他方法是

```
@Model.NodeById(@child.Id).urlName 
```

但它只会给出没有“/”的节点名称

# git - Git错误致命：无法统计'*'：没有这样的文件或目录

> ID：14161297
> 
> 赞同：36
> 
> 时间：2013-01-04T16:50:23.560
> 
> 标签：git, github

我遇到了这个错误，发现关于如何在线修复它的文档很少。我通过尝试运行命令得到了错误`git add .`，并收到了这个响应：

**致命：无法统计“myPathToAFile”：没有这样的文件或目录**

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-04T16:50:23.560

为了解决这个问题，我从 git 中删除了该文件，然后通过执行以下操作重新添加它：

`git rm "myPathToAFile"`

`git add .`

`git commit -am 'my commit'`

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-02T11:03:56.773

尝试`git checkout my_branch -f`

如此处给出：[http ://www.nullreference.se/2010/08/20/git-merge-error-permission-denied/](http://www.nullreference.se/2010/08/20/git-merge-error-permission-denied/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-11T11:43:46.720

我遇到过同样的问题。我使用的是 Windows 7，我的问题是“最大路径长度限制”（路径最多 260 个字符）（请参阅[http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29 .aspx#maxpath](http://msdn.microsoft.com/en-us/library/aa365247%28VS.85%29.aspx#maxpath)了解更多详细信息）。

我的解决方法是稍微缩短类名。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-25T15:54:41.140

Windows 上此问题的另一个原因可能是保留的文件名。当我出于好奇尝试在我的 Windows 10 机器上克隆 Linux 内核存储库时碰到了它们，并且 Git 无法创建 aux.c 和 aux.h 文件。

所以你不能创建任何文件（任何扩展名）或文件夹命名为：CON、PRN、AUX、NUL、COM1、COM2、COM3、COM4、COM5、COM6、COM7、COM8、COM9、LPT1、LPT2、LPT3、LPT4、LPT5 , LPT6, LPT7, LPT8, LPT9，不区分大小写。

请参阅：[https ://docs.microsoft.com/en-us/windows/desktop/fileio/naming-a-file#naming-conventions](https://docs.microsoft.com/en-us/windows/desktop/fileio/naming-a-file#naming-conventions)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-06T04:44:17.000

以上都不适合我。

更新 Git 解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-13T14:35:14.230

与 Tejes 的评论类似，我只在名为“aux.R”的文件中遇到了这个问题，我无法`git pull`在 Windows 机器上使用它，而它在我的 linux 客户端上运行良好。

我通过将其重命名为“auxiliary.R”来修复它，现在可以正常工作了。

# php - 如何在 PHP 中从单独的日期字符串和时间字符串创建时间戳？

> ID：14161301
> 
> 赞同：3
> 
> 时间：2013-01-04T16:50:32.443
> 
> 标签：php, datetime

我需要一些帮助。

该代码使用`date()`函数获取*报告日期*，而*可用性时间*由用户手动输入。然后将*可用性时间*与*静态时间*进行比较，以显示该过程是否按时完成。

如果所有进程都在同一天运行，则此过程完美运行；但是，如果该过程在前一天的午夜之前完成，则会出现不准确的报告。这是我需要一些帮助的地方。

我需要获取设置为`H:i`格式的时间字符串，并将其与设置为`yyyy/mm/dd`. 执行此操作后，我可以将其与*报告日期戳*进行比较以获得正确的报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:59:16.693

分别连接两个字符串，日期和时间，然后将结果字符串插入[strtotime()](http://php.net/manual/en/function.strtotime.php)

```
$date = '2012/06/15';
$time = ' 10:33';
echo strtotime($date.$time) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T16:58:51.947

PHP 中的连接运算符是一个点，`"."`
您始终可以将任何日期与任何时间连接起来

```
$date = "2012/01/04";
$time = "22:12";
$datetime = $date." ".$time; 
```

然后您可以将后一个变量与相同格式的任何日期时间进行比较

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T17:01:11.857

这样的事情可能会为您指明正确的方向：

```
<?php

$date = "2013/01/04";
$time = "16:58"; // I'm assuming you meant H:i format (not capital I as in your question).

$timestamp = strtotime($date." ".$time);

echo $timestamp; // 1357318680

?> 
```

# git - 有没有办法更改我第一次提交的电子邮件？

> ID：14161302
> 
> 赞同：0
> 
> 时间：2013-01-04T16:50:46.427
> 
> 标签：git

> **可能重复：**
> [如何在 git 中更改提交的作者？](https://stackoverflow.com/questions/750172/how-do-i-change-the-author-of-a-commit-in-git)

我推送了 5 次提交，但我想更改我在第一次提交时推送的作者电子邮件地址。

那可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:12:30.317

我认为您正在寻找[git filter-branch](http://schacon.github.com/git/git-filter-branch.html)

你必须自己决定是否真的值得努力..

```
git filter-branch -f --commit-filter '
  if [ "$GIT_AUTHOR_EMAIL" = "wrongemail@adress.com" ];
  then
    GIT_AUTHOR_NAME="Firstname NAME";
    GIT_AUTHOR_EMAIL="email@adress.com";
    git commit-tree "$@";
  else
    git commit-tree "$@";
  fi' HEAD 
```

# ruby-on-rails-3 - 表格中的张贴

> ID：14161307
> 
> 赞同：0
> 
> 时间：2013-01-04T16:50:54.060
> 
> 标签：ruby-on-rails-3

我有一个在我看来已知的@company，还有一个显示在桌子上的@shops。

表格的每一行都包含一个供用户单击的按钮。

单击该按钮应触发在客户中的创建，并且客户属于商店和公司。我想与公司一起发送的 shop_id。

我需要为表格中的每行生成一个发布请求。我怎么做？用 form_for? 我如何每行做到这一点？以及如何将 shop_id （该行的）和 company_id （在视图中）发送到帖子？我不想使用 params[:shop_id] 因为用户可以更改它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:14:25.853

找到了解决方案。您需要使用隐藏字段：

```
<%= form_for '', :url => company_clients_url(shop), :html => {:method => :post} do %>
   <%= hidden_field_tag 'shop_id', shop.id %> 
```

稍后在控制器中，您可以使用 params[:shop_id] 来获取它

希望这可以帮助其他人。

# objective-c - 属性和带有实例变量的属性有什么区别？

> ID：14161313
> 
> 赞同：0
> 
> 时间：2013-01-04T16:51:35.260
> 
> 标签：objective-c, ios

> **可能重复：**
> [属性和实例变量声明](https://stackoverflow.com/questions/3736677/properties-and-instance-variable-declaration)

以下两者有什么区别：

一些类.h

```
@interface SomeClass : NSObject {
     NSString *someString;
}

@property (strong, nonatomic) NSString *someString;
@end 
```

一些类.h

```
@interface SomeClass : NSObject

@property (strong, nonatomic) NSString *someString;

@end 
```

我知道接口和属性之后的 { } 内的声明有什么区别，但是同时使用和只使用属性有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T16:56:12.387

由于 LLVM 版本 4.2 编译器不再有区别。您不再需要在 {} 中声明属性变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:56:50.610

```
{
     NSString *someString;
} 
```

这是一个伊瓦尔。

* * *

```
@property (strong, nonatomic) NSString *someString; 
```

这是一个创建 setter 和 getter（访问器）的属性。还会为您创建一个同名的类实例。

编辑：

如果只使用 ivar，则不能使用 self.ivar 名称。

你必须使用 by_ivar，意思是直接指向 ivar。

{ & } 内部受到保护。虽然@property 是公开的。

# android - 我可以在 onCreate 方法中使用 insert 方法吗？

> ID：14161315
> 
> 赞同：0
> 
> 时间：2013-01-04T16:51:41.403
> 
> 标签：android, sql, database, sqlite

我正在尝试将单行硬编码到我的 SQLite 数据库中。我想知道这是否可行，或者我是否应该做一些不同的事情？我想继续使用我的内容值，因为我有很多代码是用我的内容值编写的。

```
public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + DB_TBL + " (" +
                KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
                KEY_LEVEL + " INTEGER NOT NULL, " + 
                KEY_HEALTH + " INTEGER NOT NULL, " +
                KEY_NAME + " TEXT NOT NULL, " +
                KEY_CRIT + " INTEGER NOT NULL, " +
                KEY_CRIT_RANGE + " INTEGER NOT NULL, " +
                KEY_CRIT_INC + " INTEGER NOT NULL, " +
                KEY_HIT_RANGE + " INTEGER NOT NULL, " +
                KEY_HIT_INC + " INTEGER NOT NULL, " +
                KEY_CHAR_IMG + " INTEGER NOT NULL, " +
                KEY_TOTAL_XP + " INTEGER NOT NULL, " +
                KEY_XP + " INTEGER NOT NULL, " +
                KEY_XP_NEEDED + " INTEGER NOT NULL, " +
                KEY_COINS + " INTEGER NOT NULL, " + 
                KEY_SMALL_POTS + " INTEGER NOT NULL, " +
                KEY_LARGE_POTS + " INTEGER NOT NULL)"
            );
        DbHelper helper = new DbHelper();//I have to put a context in the argument 
        SQLiteDatabase database = helper.getWritableDatabase();//but I don't know what to put or if I'm doing it right
         values = new ContentValues();
            values.put(KEY_NAME, "User1");
            values.put( KEY_LEVEL, 1);
            values.put(KEY_HEALTH, 10);
            values.put(KEY_CRIT, 5);
            values.put(KEY_CRIT_RANGE, 2);
            values.put(KEY_CRIT_INC, 2);
            values.put(KEY_HIT_RANGE, 2);
            values.put(KEY_HIT_INC, 0);
            values.put(KEY_TOTAL_XP, 0);
            values.put(KEY_XP, 0);
            values.put(KEY_XP_NEEDED, 25);
            values.put(KEY_COINS, 5);
            values.put(KEY_SMALL_POTS, 0);
            values.put(KEY_LARGE_POTS, 0);
            values.put(KEY_CHAR_IMG, 1);
            database.insert(DB_TBL,  null, values);

    } 
```

日志猫

```
01-04 12:36:06.403: W/dalvikvm(18454): threadid=11: thread exiting with uncaught exception (group=0x40aa3228)
01-04 12:36:06.473: E/AndroidRuntime(18454): FATAL EXCEPTION: UpdateThread
01-04 12:36:06.473: E/AndroidRuntime(18454): java.lang.StackOverflowError
01-04 12:36:06.473: E/AndroidRuntime(18454):    at android.database.sqlite.SQLiteOpenHelper.<init>(SQLiteOpenHelper.java:77)
01-04 12:36:06.473: E/AndroidRuntime(18454):    at com.tanukiproductions.battleforchristmas.SQLiteTable$DbHelper.<init>(SQLiteTable.java:45)
01-04 12:36:06.473: E/AndroidRuntime(18454):    at com.tanukiproductions.battleforchristmas.SQLiteTable$DbHelper.<init>(SQLiteTable.java:46) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:55:37.570

你为什么不试试呢？它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:55:42.083

> 我想知道这是否可行，或者我是否应该做一些不同的事情？

这将起作用，只要`ourDatabase`引用`db`. 但最好的测试方法是自己尝试。

请注意，您将整数放入文本列中。虽然这不是 SQLite 中的错误，因为[类型 affinity](http://www.sqlite.org/datatype3.html#affinity)，它并没有真正的意义，当您尝试对这些列进行数字排序时可能会遇到麻烦。您应该将它们声明为`INTEGER`.

# css - 使用 CSS 缩放对象元素高度与宽度成比例 + 常量

> ID：14161321
> 
> 赞同：13
> 
> 时间：2013-01-04T16:52:06.303
> 
> 标签：css

这是一个高层次的问题：我有一个用于 16:9 视频的 Flash 视频播放器。播放器的总高度由视频本身加上一些控件占据。无论整个播放器的高度如何，控件的高度都是恒定的。所以我想做的是让播放器用 CSS 缩放，这样高度就满足了：y = rx + C，其中 x 是宽度，r 是视频高度与视频宽度的比率，C 是恒定高度的控件。

我已经制定了一些在 Webkit 中有效的东西，但似乎没有别的：

```
#video-container {
    height: 0px;
    padding-bottom: 56%; /* proportional scaling */
    position:relative;
    width: 100%;
}
#video-container object {
    height: 100%;
    padding-bottom: 50px; /* control height */
    position: absolute;
    width: 100%;
} 
```

在 Webkit 中，Flash 影片将垂直缩放以填充底部填充区域。但是，在其他所有浏览器中，底部填充只是空白区域。

是否有一个仅 CSS 的解决方案来缩放与宽度成正比的元素的高度**加上一些常数值**？关于 SO 有很多与比例缩放相关的问题，但常数部分是棘手的部分。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-04T17:35:48.580

这是一个使用稍微不同的数字的小提琴[，但设置是为了说明](http://jsfiddle.net/5CMYw/3/)`height`. 它基于您的原始想法，并进行了调整。它似乎在 IE8+、Chrome、Firefox 中测试良好。

本质上，您需要的代码可能是这样的：

```
#video-container {
    position:relative;
    width: 100%;
    height: 0px;
    padding-bottom: 56%; /* proportional scaling */
    padding-top: 50px; /* add constant */
}

#video-container object {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
} 
```

# jquery - jQuery同位素浏览器窗口大小问题

> ID：14161329
> 
> 赞同：1
> 
> 时间：2013-01-04T16:52:27.750
> 
> 标签：jquery, responsive-design, jquery-isotope

我遇到了 ISOTope 插件的问题 - 它是一种响应式设计，因此如果您在 iPad 上查看它，或者甚至更好地调整窗口大小，使其大致与 ipad 屏幕大小相同，或者使其更小。刷新页面和列表中的最后一个元素，旁边有图像，除非您将窗口的大小调整到左右 1px，否则您看不到了解更多按钮

该网站的链接在这里；[http://bit.ly/VIuH8e](http://bit.ly/VIuH8e)

```
jquery.isotope.min.js
jquery.isotope.run.js 
```

剧本;

```
$('ul.moreServices').isotope({
    // options
    itemSelector: 'li.one_half',
    layoutMode: 'fitRows'
}); 
```

我尝试在选择器中添加砖石并设置列宽，但没有任何乐趣

任何人都对如何根据浏览器窗口大小转发项目有任何想法，全视图浏览器窗口很好，只有当您调整窗口大小并刷新页面时它会导致问题，就像 ISOTope 正在切断列表中的最后一个元素.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:37:44.280

修复了这个问题 - 溢出被插件覆盖，因此对样式很重要。不太热衷于使用重要的 CSS 样式。但是，嘿，如果它解决了问题，那就不要争论了

# python - 使用python在opencv中创建自己的轮廓

> ID：14161331
> 
> 赞同：24
> 
> 时间：2013-01-04T16:52:36.207
> 
> 标签：python, numpy, opencv, image-processing, contour

我有一组对象的边界点。

我想使用opencv作为轮廓来绘制它。

我不知道如何将我的点转换为轮廓表示。

到通过以下调用获得的相同轮廓表示

```
contours,_ = cv2.findContours(image,cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE) 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-04T17:18:55.593

通过查看**轮廓**的格式，我认为这样的内容就足够了：

```
contours = [numpy.array([[1,1],[10,50],[50,50]], dtype=numpy.int32) , numpy.array([[99,99],[99,60],[60,99]], dtype=numpy.int32)] 
```

这个小程序给出了一个运行示例：

```
import numpy
import cv2

contours = [numpy.array([[1,1],[10,50],[50,50]], dtype=numpy.int32) , numpy.array([[99,99],[99,60],[60,99]], dtype=numpy.int32)]

drawing = numpy.zeros([100, 100],numpy.uint8)
for cnt in contours:
    cv2.drawContours(drawing,[cnt],0,(255,255,255),2)

cv2.imshow('output',drawing)
cv2.waitKey(0) 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-06-12T00:50:57.460

从点 L 的 python 列表创建自己的轮廓

```
L=[[x1,y1],[x2,y2],[x3,y3],[x4,y4],[x5,y5],[x6,y6],[x7,y7],[x8,y8],[x9,y9],...[xn,yn]] 
```

从 L创建一个 numpy 数组**ctr**，对其进行整形并强制其类型

```
ctr = numpy.array(L).reshape((-1,1,2)).astype(numpy.int32) 
```

**ctr**是我们的新计数，让我们在现有**图像上绘制它**

```
cv2.drawContours(image,[ctr],0,(255,255,255),1) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-10-05T01:32:58.197

轮廓只是连接所有连续点的曲线，因此要创建自己的轮廓，您可以[`np.array()`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html)按*顺时针顺序*`(x,y)`创建点

 *```
points = np.array([[25,25], [70,10], [150,50], [250,250], [100,350]]) 
```

而已！

* * *

根据您的需要，有两种方法可以将轮廓绘制到图像上：

**轮廓轮廓**

如果您只需要轮廓轮廓，请使用[`cv2.drawContours()`](https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_contours/py_contours_begin/py_contours_begin.html#how-to-draw-the-contours)

```
cv2.drawContours(image,[points],0,(0,0,0),2) 
```

![](../Images/37f89ea3f125aad7ed6f677988006ed1.png)

**填充轮廓**

要获得填充轮廓，您可以使用[`cv2.fillPoly()`](https://docs.opencv.org/2.4/modules/core/doc/drawing_functions.html#fillpoly)或`cv2.drawContours()`使用`thickness=-1`

```
cv2.fillPoly(image, [points], [0,0,0]) # OR
# cv2.drawContours(image,[points],0,(0,0,0),-1) 
```

![](../Images/71983f8d2c3e82a0cd4082e3f650ab37.png)

完整的示例代码

```
import cv2
import numpy as np

# Create blank white image
image = np.ones((400,400), dtype=np.uint8) * 255

# List of (x,y) points in clockwise order
points = np.array([[25,25], [70,10], [150,50], [250,250], [100,350]])

# Draw points onto image
cv2.drawContours(image,[points],0,(0,0,0),2)

# Fill points onto image
# cv2.fillPoly(image, [points], [0,0,0])

cv2.imshow('image', image)
cv2.waitKey() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-08T21:33:26.740

要添加到 Cherif KAOUA 的答案，我发现我必须转换为列表并压缩我的 numpy 数组。从文本文件中读取点数组：

```
 contour = []
  with open(array_of_points,'r') as f:
      next(f) // line one of my file gives the number of points
      for l in f:
          row = l.split()
          numbers = [int(n) for n in row]
          contour.append(numbers)

  ctr = np.array(contour).reshape((-1,1,2)).astype(np.int32)
  ctr = ctr.tolist()
  ctr = zip(*[iter(ctr)]*len(contour)) 
```*

# vba - 使用树视图在 MS Access '10 中基于自引用表创建层次结构

> ID：14161332
> 
> 赞同：1
> 
> 时间：2013-01-04T16:52:37.453
> 
> 标签：vba, ms-access, recursion, treeview, hierarchy

我试图按照此 Microsoft 帖子中的说明进行操作：http: [//support.microsoft.com/default.aspx ?scid=kb;en-us;209891](http://support.microsoft.com/default.aspx?scid=kb;en-us;209891)

创建基于自引用表的组织层次结构图，就像示例一样。我不断收到一个错误，即变量未定义并且 VBA 指向“Optional varReportToID As Variant”行，但说明说不要为此参数提供任何内容。我可以做些什么来使代码运行吗？我没有更改代码，我更改了表上的命名以匹配列出的变量。我在 MS Access 2010 中工作，但该示例适用于旧版本的 MS。

谢谢！

```
Option Explicit

'=================Load Event for the Form=======================
'Initiates the routine to fill the TreeView control
'============================================================

Public Sub Form_Load()
    Const strTableQueryName = "Employees"
    Dim db As DAO.Database, rst As DAO.Recordset
    Set db = CurrentDb
    Set rst = db.OpenRecordset(strTableQueryName, dbOpenDynaset, dbReadOnly)
    AddBranch rst:=rst, strPointerField:="ReportsTo", strIDField:="EmployeeID",      strTextField:="LastName"
End Sub

'================= AddBranch Sub Procedure ======================
'      Recursive Procedure to add branches to TreeView Control
'Requires:
'   ActiveX Control:  TreeView Control
'              Name:  xTree
'Parameters:
'               rst:  Self-referencing Recordset containing the data
'   strPointerField:  Name of field pointing to parent's primary key
'        strIDField:  Name of parent's primary key field
'      strTextField:  Name of field containing text to be displayed
'=============================================================
Sub AddBranch(rst As Recordset, strPointerField As String, _
          strIDField As String, strTextField As String, _
          Optional varReportToID As Variant)
    On Error GoTo errAddBranch
    Dim nodCurrent As Node, objTree As TreeView
    Dim strCriteria As String, strText As String, strKey As String
    Dim nodParent As Node, bk As String
    Set objTree = Me!xTree.Object
    If IsMissing(varReportToID) Then  ' Root Branch.
        strCriteria = strPointerField & " Is Null"
    Else  ' Search for records pointing to parent.
        strCriteria = BuildCriteria(strPointerField, _
            rst.Fields(strPointerField).Type, "=" & varReportToID)
        Set nodParent = objTree.Nodes("a" & varReportToID)
    End If

    ' Find the first emp to report to the boss node.
    rst.FindFirst strCriteria
    Do Until rst.NoMatch
        ' Create a string with LastName.
        strText = rst(strTextField)
        strKey = "a" & rst(strIDField)
        If Not IsMissing(varReportToID) Then  'add new node to the parent
            Set nodCurrent = objTree.Nodes.Add(nodParent, tvwChild, strKey, strText)
        Else    ' Add new node to the root.
            Set nodCurrent = objTree.Nodes.Add(, , strKey, strText)
        End If
        ' Save your place in the recordset so we can pass by ref for speed.
        bk = rst.Bookmark
        ' Add employees who report to this node.
        AddBranch rst, strPointerField, strIDField, strTextField, rst(strIDField)
        rst.Bookmark = bk     ' Return to last place and continue search.
        rst.FindNext strCriteria   ' Find next employee.
    Loop

'--------------------------Error Trapping --------------------------
    errAddBranch:
        MsgBox "Can't add child:  " & Err.Description, vbCritical, "AddBranch Error:"
        Resume exitAddBranch
End Sub 
```

# java - Google Chrome 无法使用 JAVA 输出流打印存储在文件系统中的图像

> ID：14161333
> 
> 赞同：0
> 
> 时间：2013-01-04T16:52:40.003
> 
> 标签：java, google-chrome, jquery-plugins

我有一个打印报告和证书的 grails 应用程序，我正在尝试使用 jQuery printElement 打印一部分 html。我的 Html 包含水印徽标以及一些不属于应用程序但存储在服务器文件系统中的图像。虽然我能够在 Firefox 中正确打印（pdf 以及使用打印机），但在 Google Chrome 中打印时出现问题。我的图像和徽标不是应用程序的一部分，而是图像存储在文件系统中，并使用 Java outputStreams 传输到浏览器。所有图像都在 chrome 中正确显示，但是当我尝试使用 jQuery printElement 打印到文件或使用打印机时，它无法打印 html 页面中显示的图像，而是在没有图像的情况下打印。

我正在使用 html img 标签进行打印，当我尝试使用以下代码打印存储在服务器上下文中的本地图像时，它在 chrome 中打印效果很好

```
<img src="${resource(dir:'images',file:'exclamation.png')}" alt="" /> 
```

但是当我尝试使用以下代码片段访问文件系统图像时，尽管它显示在 html 页面中，但它无法打印图像。

```
<img src="${createLink(action:'getImage', controller:'image')}?image=${logoPath}"/> 
```

在 html 中呈现为

```
<img src="/myApp/image/getImage?image=/home/dave/pictures/logo.png" > 
```

其中 logoPath 是存储在服务器文件系统中的图像的绝对路径。我也尝试过使用绝对属性，`<img>`但它没有帮助。

我可以在 Firefox 中打印它，但不能在 chrome 中打印。出于这个原因，我将应用程序限制为仅适用于 Firefox，如果我能让它也可以与 google chrome 一起使用，那将有很大的帮助。

使用

apache tomcat 6、JAVA 1.6、grails 1.3.7、jquery.printElement.min.js、Google Chrome 23（Linux 和 Windows 7）、Firefox 16、17

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T13:33:52.677

回答我自己的问题。我在 chrome 中找到了适合我的解决方案。我从 jquery.printElement.min.js 切换到 jquery.printElement.js 并按照作者的建议。

[https://github.com/erikzaadi/jQuery.printElement/issues/2](https://github.com/erikzaadi/jQuery.printElement/issues/2)

在 jquery.printElement.js

代替：

```
documentToWriteTo.open();
documentToWriteTo.write(html);
documentToWriteTo.close();
_callPrint(popupOrIframe); 
```

和：

```
documentToWriteTo.onload = _callPrint(popupOrIframe);
documentToWriteTo.open();
documentToWriteTo.write(html);
documentToWriteTo.close(); 
```

我尝试了上述建议，但仍然无法打印图像。所以我在js的_callPrint(element)函数中更改了超时，并将超时设置为75而不是50，它正在打印所有图像。

# mysql - 在 mysql 工作台中按 ctrl+w 会导致 ETB

> ID：14161336
> 
> 赞同：0
> 
> 时间：2013-01-04T16:52:41.703
> 
> 标签：mysql, sql, user-interface, ide, mysql-workbench

所以我使用 MySQL Workbench SQL Editor 5.2.45 CE

但是，每当我尝试使用键盘快捷键`Ctrl`+`W`关闭选项卡时，它不会关闭选项卡，而是在查询编辑器中打印出“ETB”并且不会关闭选项卡...

知道是什么原因造成的以及如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:33:13.257

您可能正在使用 Windows。当热键未在 UI 中处理时，ETB 输出来自编辑器，并且在没有为操作定义的情况下击中编辑器输入处理器（如选择单词或复制到剪贴板）。编辑器控件是一个 Scintilla 实例，它还能够显示不可打印的字符。

热键`Ctrl`+`W`以前用于关闭选项卡，但由于`Ctrl`+`F4`在 Windows 上更为常见，它已被更改。所以以后用`Ctrl`+`F4`代替。

# c# - 显示后更改 RadDesktopAlert telerik winform 控件的设置

> ID：14161338
> 
> 赞同：0
> 
> 时间：2013-01-04T16:52:43.980
> 
> 标签：c#, .net, winforms, telerik

在显示 Telerik RadDesktopAlert 后，我​​尝试更改 AutoClose 关闭属性，但它似乎不起作用。

我发现的唯一方法是再次隐藏和显示 DesktopAlert。

所以 ：

```
RadDesktopAlert alert = new RadDesktopAlert();
alert.Show();
alert.AutoClose = true; 
```

不起作用，因为在弹出显示属性更新后似乎不会考虑。

所以我找到的唯一方法是：

```
RadDesktopAlert alert = new RadDesktopAlert();
alert.Show();
alert.AutoClose = true;
alert.Hide();
alert.Show(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:48:34.280

也许您想更改[RadDesktopAlert.AutoCloseDelay 属性](http://www.telerik.com/help/winforms/p_telerik_wincontrols_ui_raddesktopalert_autoclosedelay.html)的默认值 10 秒。

# javascript - MenuIcons 中的 Titanium 单击事件

> ID：14161341
> 
> 赞同：0
> 
> 时间：2013-01-04T16:52:51.540
> 
> 标签：javascript, click, titanium, appcelerator, dom-events

我站在**MainMenuScreen**上，从那里添加了一个模块名称**MenuIcons**但我不知道为什么**MenuIcons**中的单击事件根本不起作用。但是，所有视图、图像和其他内容都可以完美显示，没有任何警告或错误。

这是代码的场景：

**MainMenuScreen.js**

```
function MainMenuScreen(userinfojson) {
    var main_window = Titanium.UI.createWindow({
        backgroundImage : '/assets/inventoryBackground.png'
    });
    var MainScreen = [];
    var MenuIcons = require('ui/common/menus/MenuIcons');
    MainScreen.menuIcons  = new MenuIcons(active_screen);
    main_window.add(MainScreen.menuIcons);

    var StatusScreen = require('ui/common/MenuScreen/StatusScreen');
    MainScreen.statusScreen = StatusScreen(userinfojson);
    main_window.add(MainScreen.statusScreen);

    return main_window;    
}
module.exports = MainMenuScreen; 
```

**菜单图标.js**

```
function MenuIcons(active_menu) {
    var view = Titanium.UI.createView({
        top : "12%",
        height : "10%"
    });
    var iconstatus_imageview = Titanium.UI.createImageView({
        left : '0%',
        top : '0%',
        image : '/assets/iconStatus.png',
        height : '100%',
        width : '13.8%'

    });
    iconstatus_imageview.addEventListener('click', function(e) {
        alert("Clicked");
    });

    view.add(iconstatus_imageview);
    return view;
}
module.exports = MenuIcons; 
```

因此，此“ **iconstatus_imageview** ”`imageview`的单击事件不起作用请帮助... :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:37:32.170

为了解决这个问题，我会为所涉及的视图/窗口添加颜色，看看是否有一个被绘制在另一个上。我最初没有看到 StatusScreen 代码的猜测是它在 MenuIcons 的顶部，但它是透明的，你看不到它。

我可能会注释掉这一行，看看菜单事件是否触发：

```
main_window.add(MainScreen.statusScreen); 
```

此代码有效，因此问题在您粘贴的代码中不可见。因此，应该查看您编辑的任何代码。

应用程序.js

```
var main_window = Titanium.UI.createWindow({
    //backgroundImage : '/assets/inventoryBackground.png'
    backgroundColor: 'white'
});
var MainScreen = [];
var MenuIcons = require('MenuIcons');
//MainScreen.menuIcons = new MenuIcons(active_screen);
MainScreen.menuIcons = new MenuIcons();
main_window.add(MainScreen.menuIcons);

// var StatusScreen = require('ui/common/MenuScreen/StatusScreen');
// MainScreen.statusScreen = StatusScreen(userinfojson);
// main_window.add(MainScreen.statusScreen);

//return main_window;
main_window.open(); 
```

菜单图标.js

```
function MenuIcons(active_menu) {
    var view = Titanium.UI.createView({
        top : "12%",
        height : "10%"
    });
    var iconstatus_imageview = Titanium.UI.createImageView({
        left : '0%',
        top : '0%',
        image : 'medical.png',
        height : '100%',
        width : '13.8%'

    });
    iconstatus_imageview.addEventListener('click', function(e){
        alert('clicked');
    });

    view.add(iconstatus_imageview);
    return view;
}
module.exports = MenuIcons; 
```

# c++ - 使用 gcc 编译内联汇编时出错，“shl”

> ID：14161342
> 
> 赞同：1
> 
> 时间：2013-01-04T16:53:05.103
> 
> 标签：c++, gcc, assembly, x86, inline-assembly

这是我试图转换为 gcc 样式 asm 内联汇编代码的实际代码。

```
#include<iostream>
using namespace std;

int reverse(int num);

int main(){
    int num;
    cout << "enter number: ";
    cin >> num;
    cout << endl;
    cout << reverse(num);
    return 0;
}

int reverse(int num){
    if(num == 0 || num == 1){
        return num;
    }
    __asm
    {
        xor eax, eax
        xor ecx, ecx     
        mov ebx, num    
        clc             ; clear carry
not_found:
        inc ecx
        shl ebx, 1
        jnc not_found

        rcr eax, 1
        mov edx, ecx
again:
        shl ebx, 1
        rcr eax, 1
        inc ecx
        cmp ecx, 32
        jne again

        dec edx     
again2:     
        shr eax, 1
        dec edx
        cmp edx, 0
        jne again2
    }

} 
```

由于我无法使用 gcc 编译上述代码，我尝试将其转换为可以由 gcc 编译器成功编译的东西，但到目前为止我无法产生任何有意义的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:25:16.027

根据 OP 注释中的代码，这是一个使用内联汇编移动一位的修改示例：

```
#include<iostream>
using namespace std;
int reverse(int num);
int main()
{
    int num;
    cout << "enter number: ";
    cin >> num;
    cout << endl;
    cout << reverse(num) << endl;
    return 0;
}

int reverse(int num)
{
    if (num == 0 || num == 1)
    {
        return num;
    }
    int temp = 0;
    asm( "shll $1, %0 \n\t" : "=r"(temp) : "0"(num));
    return temp;
} 
```

请注意，`gcc`如果您使用`r`约束要求将操作数放入寄存器中，那么您自己真的没有理由`mov`（至少在这个小样本中）。另外，我`0`在输入约束中使用了信号，表明它应该是与输出相同的寄存器，因为这就是`shl`工作原理。

仍然不确定`num == 1`条件，但大概是因为我们不知道完整函数的实际功能。

# objective-c - 从调度队列到主线程的嵌套回调不起作用？

> ID：14161344
> 
> 赞同：0
> 
> 时间：2013-01-04T16:53:06.347
> 
> 标签：objective-c, multithreading, objective-c-blocks, grand-central-dispatch

```
__block int x = 5;
dispatch_queue_t abe = dispatch_queue_create([[NSString stringWithFormat:@"abe'sQueue.%@", self] UTF8String], NULL);
dispatch_sync(abe, ^{
    NSLog(@"%@", [self returnSomething]);
    dispatch_async(dispatch_get_main_queue(), ^{
        x = 20;
    });
});

NSLog(@"%d", x); 
```

上面的结果总是 5 是 'x' 的记录值，即使主线程的嵌套回调异步更改了值。关于我哪里出错的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:06:48.717

您正在异步调度到主队列。该块被排队并且 dispatch_async() 立即返回。假设其余代码在主线程上运行，那么异步入队的块将在下一次通过主事件循环之前运行，直到上面的所有代码都执行后才会发生。

对于以这种方式设置标量变量，没有理由将 dispatch_async() 发送到主线程。只需直接设置变量（因为主线程在 dispatch_sync() 上被阻塞。

# r - 在数据框中自动创建派生变量

> ID：14161347
> 
> 赞同：0
> 
> 时间：2013-01-04T16:53:17.380
> 
> 标签：r, dataframe, apply, lapply, sapply

> **可能重复：**
> [使用“应用”函数系列处理 data.frames 列表](https://stackoverflow.com/questions/14141198/processing-the-list-of-data-frames-with-apply-family-of-functions)

我有一个包含六个数值变量 V1、V2、V3 和 V1.lag、V2.lag、V3.lag 的数据框。

**注意：我的真实数据集有更多变量，但我仅使用 3 进行说明！**

我希望能够自动（无需硬编码）运行所有 V 变量（不是滞后变量）并通过将每个 V 变量与对应的滞后变量相除来创建 V1.over.V1.lag 变量。

```
df<-data.frame(matrix(rnorm(216),72,6));
colnames(df) <- c("v1.raw", "v2.raw", "v3.raw", "v1.lag", "v2.lag", "v3.lag"); 
```

提前致谢

**编辑：我想出了如何识别“原始”列和“滞后”列**

```
raws <- sapply( names(df), function(x){ unlist(strsplit(x, "[.]"))[2] == "raw" } ); ## which are raw factors

lags <- sapply( names(df), function(x){ unlist(strsplit(x, "[.]"))[2] == "lag" } ); ## which are lagged factors 
```

但我仍然不知道如何将所有原始因素与其滞后因素分开

```
which(raws); 
```

会给我指数，但我如何将它们与滞后结合成新的因素？

```
df[which(raws)] / df[which(lags)] 
```

不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:16:34.830

假设您的 data.frame 中只有 v.raw 和 v.lag 列，这应该有效

```
 mm <- colnames(df) <- c("v1.raw", "v2.raw", "v3.raw", "v1.lag", "v2.lag", "v3.lag")
  df[,gregexpr('.raw',mm) > 0] /df[,gregexpr('.*lag',mm) > 0] 
```

**编辑**对解决方案的一些解释：

```
gregexpr('.raw',mm) > 0
[1]  TRUE  TRUE  TRUE FALSE FALSE FALSE  

head(df[,gregexpr('.raw',mm) > 0],1)
     v1.raw     v2.raw    v3.raw
1 0.7719037 -0.2078197 -1.223753

regexpr('.lag',mm) > 0
[1] FALSE FALSE FALSE  TRUE  TRUE  TRUE

head(df[,gregexpr('.lag',mm) > 0],1)
     v1.lag     v2.lag    v3.lag
1 0.7719037 -0.2078197 -1.223753 
```

比我们在一次操作中使用向量化`/`进行除法。

这里有一个例子：

```
df <- matrix(rep(c(1,2,3,4,5,6),each = 5),ncol=6)
colnames(df) <- c("v1.raw", "v2.raw", "v3.raw", "v1.lag", "v2.lag", "v3.lag")
    v1.raw v2.raw v3.raw v1.lag v2.lag v3.lag
[1,]      1      2      3      4      5      6
[2,]      1      2      3      4      5      6
[3,]      1      2      3      4      5      6
[4,]      1      2      3      4      5      6
[5,]      1      2      3      4      5      6

mm <- colnames(df)
df[,which(gregexpr('.raw',mm) > 0)] /df[,which(gregexpr('.lag',mm) > 0)]

   v1.raw v2.raw v3.raw      #as expected 1/4 2/5 3/6
[1,]   0.25    0.4    0.5 
[2,]   0.25    0.4    0.5
[3,]   0.25    0.4    0.5
[4,]   0.25    0.4    0.5
[5,]   0.25    0.4    0.5 
```

**Edit2**防止 Nan 为零

```
df <- matrix(rep(c(1,2,3,4,5,6),each = 5),ncol=6)
colnames(df) <- c("v1.raw", "v2.raw", "v3.raw", "v1.lag", "v2.lag", "v3.lag")
df[1,4] <- 0              ## I introduce a 0 here
mm <- colnames(df)
## I use ifelse , because it is vectorize also !
## If you find a 0 , don't compute , and retuen me the original value 
## You can do other things here 
ifelse(df[,which(gregexpr('.lag',mm) > 0)] != 0 ,
       df[,which(gregexpr('.raw',mm) > 0)] /df[,which(gregexpr('.lag',mm) > 0)],
       df[,which(gregexpr('.raw',mm) > 0)])  

    v1.lag v2.lag v3.lag    ## for some reasons ifelse choose other columns names!(lag not raw)
[1,]   1.00    0.4    0.5
[2,]   0.25    0.4    0.5
[3,]   0.25    0.4    0.5
[4,]   0.25    0.4    0.5
[5,]   0.25    0.4    0.5 
```

# c# - 为什么不会在 RaisePropertyChanged 上更新 UI？

> ID：14161348
> 
> 赞同：2
> 
> 时间：2013-01-04T16:53:25.580
> 
> 标签：c#, binding

我有一个静态 IList，它充当静态类中的存储库：

//静态类设置

```
public static IList RecentSearchedRepo = new ObservableCollection<object>(); 
```

和一个位于另一个类中的 IList，我将我的 UI 网格绑定到：

//组件类

```
private IList recentsearch = new ObservableCollection<object>();
public IList RecentSearch
{
    get
    {
        return recentsearch;
    }
    set
    {
        recentsearch = value;
        RaisePropertyChanged("RecentSearch");
    }
} 
```

我将对象添加到 RecentSearchedRepo ：

```
RecentSearchedRepo.add(searchitem) 
```

然后将RecentSearch设置为静态列表

```
RecentSearch = Settings.RecentSearchedRepo; 
```

XAML 片段：

```
<GridLayout:RecentSearchGrid x:Name="recentSearchGrid" ItemsSource="{Binding RecentSearch}" /> 
```

扩展 UserControl 的 RecentSearchGrid 类的片段：

```
 public IList ItemsSource
 {
     get
     {
         return GetValue(ItemsSourceProperty) as IList;
     }
     set
     {
         SetValue(ItemsSourceProperty, value);
     }
}

private static readonly DependencyProperty ItemsSourceProperty =
                    DependencyProperty.Register("ItemsSource", typeof(IList), typeof(RecentSearchGrid), new PropertyMetadata(null, OnItemsSourcePropertyChanged));

private static void OnItemsSourcePropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
     RecentSearchGrid source = d as RecentSearchGrid;

     if (source != null)
     {
      source.setListforgrid(source.ItemsSource);
     }
} 
```

问题是当我将第一项添加到`RecentSearchedRepo`UI 时，UI 已更新，但在随后的每次添加中，UI 都不会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:09:05.247

代替：

```
RecentSearch = Settings.RecentSearchedRepo; 
```

尝试做：

```
RecentSearch.Clear();
var freshData = Settings.RecentSearchedRepo;
if (freshData != null)
    foreach (var item in freshData)
        RecentSearch.Add(item); 
```

您通过重新分配引用来终止绑定。

**编辑**：在你之后

您正在倒退：那`OnItemsSourcePropertyChanged`不应该设置源，它实际上根本不应该存在。
您必须在 RecentSearchGrid.xaml 中绑定到在*RecentSearchGrid.xaml.cs**中*声明的`ItemsSource`依赖属性

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:21:36.057

我认为这里没有足够的信息来回答您的问题。以下简单的应用程序反映了我在问题中看到的场景，它按预期工作：

```
// MySettings.cs
public static class MySettings
{
    public static IList RecentSearchedRepo = new ObservableCollection<object>();
}

// MyVm.cs
public class MyVm : INotifyPropertyChanged
{
    private IList recentSearch = new ObservableCollection<object>();

    public event PropertyChangedEventHandler PropertyChanged;

    public MyVm()
    {
        this.RecentSearch = MySettings.RecentSearchedRepo;
    }

    public IList RecentSearch
    {
        get { return recentSearch; }
        set 
        { 
            recentSearch = value;
            this.RaisePropertyChanged("RecentSearch");
        }
    }

    private void RaisePropertyChanged(string p)
    {
        if (this.PropertyChanged != null) this.PropertyChanged(this, new PropertyChangedEventArgs(p));
    }
}

// MainWindow.xaml.cs
public partial class MainWindow : Window
{
    public MainWindow()
    {
        this.InitializeComponent();

        // Initialization as described in the question
        MySettings.RecentSearchedRepo.Add("SearchItem1");
        MySettings.RecentSearchedRepo.Add("SearchItem2");

        this.DataContext = new MyVm();
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        // Add a new item later
        MySettings.RecentSearchedRepo.Add("NewlyAddedSearchItem");
    }
}

// MainWindow.xaml
<Window x:Class="ScratchWpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <DockPanel>
        <Button DockPanel.Dock="Bottom" Content="Add new Search Item" Click="Button_Click_1" />
        <ListBox ItemsSource="{Binding RecentSearch}" />
    </DockPanel>
</Window> 
```

我将尝试戴上我的通灵帽，并询问您是否在错误的收藏中添加了其他物品。添加单个项目后是否会重新创建集合并将其放置在绑定中，但后来的项目被添加到原始集合而不是新集合？

鉴于您说RecentSearchGrid 是一个UserControl，我们还可以推断ItemsSource 的实现可能是自定义的，而不是从ItemsControl 继承的标准实现。最近SearchGrid 可能以某种方式错误地破坏了绑定。

我同意狒狒的观点。目的是`OnItemsSourcePropertyChanged`什么？在典型的实现中，我不希望它存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T18:21:49.240

问题可能如下： 如果实例没有更改，则不会调用**OnItemsSourcePropertyChanged 。**从 WPF 的角度来看，当您**RaisePropertyChangeEvent**，但绑定集合的实例没有改变时，**PropertyChange**处理程序根本不会被调用。

`Settings.RecentSearchedRepo`在应用程序的整个生命周期中是同一个实例吗？*

# c - 在c中实现http授权头

> ID：14161349
> 
> 赞同：0
> 
> 时间：2013-01-04T16:53:34.180
> 
> 标签：c, apache, http, header

我试图在包含授权标头的c编程上实现http（GET请求），但问题是我无法获得（200 ok），我只有一个通信会话（服务器回复需要401授权) 但仅此而已。

```
**while(1){

    strcpy(buffer,"GET /mywebsite/login.html/ HTTP1.1 \n\n");
    strcat(buffer,"Host: localhost\n\n");
    strcat(buffer,"Connection: keep-alive\n\n");
    strcat(buffer,"User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11\n\n");
    strcat(buffer,"Accept: text/html,application/xhtml+xml,application/xml;q=0.9;q=0.8\n\n");
    strcat(buffer,"Accept-Encoding: gzip,deflate,sdch\n\n");
    strcat(buffer,"Accept-Language: en-US,en;q=0.8\n\n");
    strcat(buffer,"Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3\n\n");
    status = send(sock, buffer, strlen(buffer), 0);
    if(status == -1) {
        printf("Error in send(). Error code: %d\n", WSAGetLastError());
        continue;
    }
    buffer[0]='\0';
    //The receiving functions
    status = recv(sock, buffer, BUFFER_SIZE, 0);
    if (status == -1) {
        printf("Error in recv(). Error code: %d\n", WSAGetLastError());
        continue;
    }
    buffer[status] = '\0';
    printf("The message received is: ");
    printf("%s\n\n", buffer);

    strcpy(buffer,"GET /mywebsite/login.html/ HTTP1.1\n\n");
    strcat(buffer,"Host: localhost\n\n");
    strcat(buffer,"Authorization: Basic QWRtaW46MTIzNA== \n\n");
    strcat(buffer,"User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11\n\n");
    strcat(buffer,"Accept: text/html,application/xhtml+xml,application/xml;q=0.9;q=0.8\n\n");
    strcat(buffer,"Accept-Encoding: gzip,deflate,sdch\n\n");
    strcat(buffer,"Accept-Language: en-US,en;q=0.8\n\n");
    strcat(buffer,"Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3\n\n");
    strcat(buffer,"Connection: keep-alive\n\n");
    status = send(sock, buffer, strlen(buffer), 0);
    if(status == -1) {
        printf("Error in send(). Error code: %d\n", WSAGetLastError());
        continue;
    }
    buffer[0]='\0';
    //The receiving functions
    status = recv(sock, buffer, BUFFER_SIZE, 0);
    if (status == -1) {
        printf("Error in recv(). Error code: %d\n", WSAGetLastError());
        continue;
    }
    buffer[status] = '\0';
    printf("%s\n\n", buffer);
    buffer[0]='\0';

}** 
```

第一个标头已成功发送，但下一个标头服务器无所事事（没有回复）请在这里提供一点帮助我不知道问题是什么... :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:02:24.917

There are some obvious problems:

*   Headers should be separated by "\r\n", not "\n\n", finally ending with "\r\n\r\n".
*   `send` and `recv` should be retried on errno==EINTR
*   `send` may send less bytes than requested, so it should be used in a loop to ensure all data are transferred.

# java - 在本机库中查找公开的方法以通过 JNA/JNI 访问？

> ID：14161355
> 
> 赞同：1
> 
> 时间：2013-01-04T16:53:53.827
> 
> 标签：java, linux, java-native-interface, native, jna

嗨：我想使用 JNA 访问本机库中的一些功能。

1）我如何内省本机库文件（例如.so文件）以查看可用的方法？

2) .so 文件中可访问的方法与为编译这些文件而构建的 C 代码之间是否存在一对一的映射？

3) JNA 是否保证在唯一的 java/native 互操作涉及从 Java 调用本地库的所有情况下工作（我认为这是 JNA 的经典用例）——或者有时需要 JNI？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T20:01:01.130

1) Windows 上的[depends.exe](http://dependencywalker.com)`objdump` , , `nm`, 等。在 *nix 变体上。

2) 大多数共享库都是为 C 风格的链接而设计的。这通常意味着您可以在库中查找与符号对应的地址，但类型（变量、常量或函数）和签名信息（对于函数）通常不嵌入库中。

3) JNA 使用很少的通用 JNI 操作来执行它所有的魔法：打开共享库、查找符号、读/写内存、调用函数。在极少数情况下，您*必须*在 JNA 上使用 JNI，至少在处理具有 C 链接的库时。

# macos - 关闭 Mac OS X 应用程序

> ID：14161356
> 
> 赞同：-1
> 
> 时间：2013-01-04T16:54:05.740
> 
> 标签：macos, window, osx-mountain-lion, close-application

我创建了一个 Mac OS X 应用程序，在开发过程中它很好，因为我用 Xcode 打开它。

但是现在，我尝试执行可执行文件并且它只在第一次工作，因为在关闭窗口后，应用程序仍然存在于内存中。我必须用活动监视器杀死它。

那么当我触摸窗口左上角的红色按钮时，我应该怎么做才能杀死应用程序呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:01:01.967

```
- (BOOL) applicationShouldTerminateAfterLastWindowClosed:(NSApplication *)application
{
return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:03:46.183

覆盖委托中的 windowWillClose 方法以使其终止应用程序。

```
- (void)windowWillClose:(NSNotification *)aNotification {
    [NSApp terminate:self];
} 
```

# mysql - 为时尚网店设计数据库时出现问题

> ID：14161361
> 
> 赞同：2
> 
> 时间：2013-01-04T16:54:13.237
> 
> 标签：mysql, sql, database-design, data-modeling

我为客户、产品和订单设计了我的数据库……我想出了 5 个表： **1\. 客户**

*   客户ID
*   电子邮件
*   密码
*   名
*   姓
*   注册日期

**2.产品**

*   product_id
*   type_id（指类型表）
*   价格
*   尺寸

**3.类型**

*   type_id
*   姓名
*   描述

**4\. 订购**

*   order_id
*   customer_id（指客户表）
*   总价
*   总税
*   日期

**5\. order_item**

*   order_item_id
*   order_id
*   product_id（指product_id）
*   数量
*   价格

我意识到鞋子/T 恤/衬衫会有尺码，但配饰没有...

我应该再添加 1 个表格`product_description`吗？所以在产品表中，会有`product_description_id`. 如果`product_description_id`是 0，那么它就没有任何像大小这样的描述，但如果它不是 0，那么它有......

**编辑** 过的伙计们，我还有 1 个问题，因为我想让客户一次购买超过 1 件商品（超过 1 种类型）：s 上面的表格可以做到吗？我的意思是，它适合那种情况吗？我已经编辑了表格，对不起，如果我要求太多：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:08:12.407

我建议考虑 oneTomany 表，因为一份订单可能包含不止一篇文章。

在这种情况下，您需要一个包含 Order_Id、Product_Id 的表，可能还有一个包含 Client_ID 和 Order_ID 等等的表……尝试将您需要一对多或多对多关系的所有情况个性化。

无论如何，先前答案中的建议阅读内容将对您有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:10:22.590

我会将产品描述添加到您的产品表中：

*   product_id
*   type_id
*   大小等

我会介绍一个订单表：

*   order_id
*   客户ID
*   总价
*   总税等

并将您的 order_description 重命名为 order_item

*   order_id
*   product_id
*   数量

ETC

# php - Facebook api 显示带有空白页面的警告

> ID：14161365
> 
> 赞同：-1
> 
> 时间：2013-01-04T16:54:30.157
> 
> 标签：php, facebook, facebook-graph-api

我正在将 facebook (facebook javascript api) 登录添加到我的页面，我的代码几乎是空的，无法进行测试。

我的代码如下：

```
<?php
require_once 'sdk/facebook.php';
?>

<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">

</head>
<body>
<?php
        // Simplifies parameters
        require("simplify_parameters.php");
?>
</body>
</html> 
```

我的简化参数代码：

```
<?php
        // Simplifies parameters

        // Creates app instance
        $facebook = new Facebook(array(
          'appId'  => 'xxxxxxxxxxxxxx', // I put xxx here as example
          'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxxx',
        ));

        // Gets user id
        $params_login = array("next" => "http://mylink.com/","scope" => "email,publish_stream");
        $params = array("next" => "http://mylink.com/logout.php");
        $fb_user_id = $facebook->getUser();
?> 
```

我收到以下错误：

警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由 /home/trick/public_html/sdk/facebook 中的（输出开始于 /home/trick/public_html/index.php:1）发送.php 在第 49 行

我在这里没有看到任何要求召开另一场会议的呼声。facebook.php 中只有一个，但没有其他。

当我起飞`require("simplify_parameters.php");`时，它不会显示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:58:30.280

该错误表明脚本已经输出了某些内容，并且您随后尝试修改标头。一旦有任何输出，您就不能修改标题或启动会话。在您的情况下，有问题的输出位于 index.php 的第 1 行。您可能有意外的换行符或空格或导致此错误的东西。

# html - HTML5 Contenteditable 字段和淘汰赛：事件在值绑定之前上升

> ID：14161368
> 
> 赞同：1
> 
> 时间：2013-01-04T16:54:50.687
> 
> 标签：html, knockout.js, contenteditable

我正在尝试显示绑定到可观察对象的可编辑字段。我使用淘汰赛加上'contenteditable'属性（html5）。编辑字段后，其值应作为 json 字符串发布到服务器。

问题在于将值发布到服务器。我希望上传新编辑的值，但我得到的是旧值而不是它。

这是 jsfiddle 上的问题说明：[链接](http://jsfiddle.net/N8LDH/15/)

看法：

```
<h2 contenteditable="true" data-bind="editableText: title, event: { change: valueChanged }"></h2> 
```

可编辑文本活页夹：

```
ko.bindingHandlers.editableText = { 
    init: function (element, valueAccessor) {
        $(element).on('blur', function () {
             var observable = valueAccessor();
             observable($(this).text());
        });
     },
     update: function (element, valueAccessor) {
     var value = ko.utils.unwrapObservable(valueAccessor());
     $(element).text(value);
}}; 
```

“更改”事件触发器：

```
 $('[contenteditable]').live('focus', function() {
                var $this = $(this);
                $this.data('before', $this.html());
                return $this;
            }).live('blur paste', function() {
                var $this = $(this);
                if ($this.data('before') !== $this.html()) {
                    $this.data('before', $this.html());
                    $this.trigger('change');
                }
                return $this;
            }).live('keypress', function(e) {
                var code = (e.keyCode ? e.keyCode : e.which);
                if (code == 13) {
                    var $this = $(this);
                    if ($this.data('before') !== $this.html()) {
                        $this.data('before', $this.html());
                        $this.trigger('change');
                    }
                    e.preventDefault();
                }
                return $this;
            }); 
```

# amazon-ec2 - boto ec2 get_all_instances 挂在 VPC 中

> ID：14161371
> 
> 赞同：2
> 
> 时间：2013-01-04T16:55:03.620
> 
> 标签：amazon-ec2, boto

我有一个脚本在尝试获取实例时挂起。我在 VPC 中的一台机器上运行，它在几周前工作，但没有。我假设有人可能已经更改了安全组或 ACL 设置，但是我看不到任何明显的东西。我正在寻找什么规则可能会阻止它并阻止它工作。它在 VPC 之外的机器上运行良好

```
reg = RegionInfo(name='eu-west-1', endpoint='ec2.eu-west-1.amazonaws.com')
conn = EC2Connection(aws_access_key_id=awsAccessKey, aws_secret_access_key=awsSecret, region=reg)
reservations = conn.get_all_instances() 
```

谢谢

# marklogic - cts：使用多面选项搜索不起作用

> ID：14161373
> 
> 赞同：0
> 
> 时间：2013-01-04T16:55:05.580
> 
> 标签：marklogic

我试过以下简单的查询：

```
let $options := (
  'faceted'
)
return cts:search(collection(),"Review",$options) 
```

它给了我 [1.0-ml] XDMP-OPTION: cts:search(fn:collection(), "Review", "faceted") -- 无效选项“faceted”。

从 ML 文档中，我发现这是一个有效的选项。请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T18:32:22.740

它应该是一个有效的选项，至少在 5.0 或更高版本中受支持。您是否有机会运行旧版本？

除此之外，“分面”选项只是一个优化标志。您仍然需要使用 cts:element-values() 和 cts:frequency() 等函数来获取构面值及其计数。

cts:search 上的文档可以在这里找到：[http ://docs.marklogic.com/cts:search](http://docs.marklogic.com/cts:search)

可以在此处找到有关如何生成方面信息的一些示例：[http ://docs.marklogic.com/cts:frequency](http://docs.marklogic.com/cts:frequency)

您可能还想查看搜索库，它添加了一些强大的功能，如集成方面计算和分页：

[http://docs.marklogic.com/search:search](http://docs.marklogic.com/search:search)

特别是搜索：搜索功能和相关功能可能非常值得研究。

！

# asp.net - 带有可编辑图片库的 ASP.NET CMS

> ID：14161379
> 
> 赞同：0
> 
> 时间：2013-01-04T16:55:21.240
> 
> 标签：asp.net, content-management-system, blogengine.net

一段时间以来，我一直在使用 BlogEngine 作为 CMS（Web 表单版本）。有谁知道 BE 的插件图片库（需要上传、删除等功能）？如果没有，我可以自定义任何独立的 ASP.NET 图像库并将其合并到 BlogEngine 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:31:23.633

尝试一下 - 在 BE 扩展库中找到了这个：

[http://dnbegallery.org/cms/List/Extensions/PrettyPhoto2](http://dnbegallery.org/cms/List/Extensions/PrettyPhoto2)

[http://rtur.net/blog/post/2011/01/04/Picasa-and-PrettyPhoto-updated-for-BlogEngineNET-20.aspx](http://rtur.net/blog/post/2011/01/04/Picasa-and-PrettyPhoto-updated-for-BlogEngineNET-20.aspx)

# java - 是否可以使用 HTTPS 协议的 URL 以“http://”开头的站点

> ID：14161386
> 
> 赞同：9
> 
> 时间：2013-01-04T16:55:55.497
> 
> 标签：java, http, https

我有一个网站，其 URL 以“http://”开头，但这给了我一个例外消息 - 不支持的协议：https。该站点是否有可能使用 HTTPS 协议，其 URL 仍然以“http://”而不是“https://”开头。

```
public ActionForward executeAction(ActionMapping mapping, ActionForm form,
              HttpServletRequest request, HttpServletResponse response)
      throws Exception {

    ActionForward forward = mapping.findForward(Constants.SUCCESS);
    String link = "http://abc.fgh.jkl.mno";
    URL thisURL;
    HttpURLConnection conn = null;
    try {
        thisURL = new URL(link);
        conn = (HttpURLConnection) thisURL.openConnection();
        System.out.println(conn.getResponseCode());
        System.out.println(conn.getResponseMessage());
        } catch (Exception ex) {
        ex.printStackTrace();
    }
    return forward;
} 
```

堆栈跟踪

```
java.net.ProtocolException: Unsupported protocol: https'
    at weblogic.net.http.HttpClient.openServer(HttpClient.java:342)
    at weblogic.net.http.HttpClient.New(HttpClient.java:238)
    at weblogic.net.http.HttpURLConnection.connect(HttpURLConnection.java:172)
    at weblogic.net.http.HttpURLConnection.followRedirect(HttpURLConnection.java:643)
    at weblogic.net.http.HttpURLConnection.getInputStream(HttpURLConnection.java:422)
    at           weblogic.net.http.SOAPHttpURLConnection.getInputStream(SOAPHttpURLConnection.java:36)
    at weblogic.net.http.HttpURLConnection.getResponseCode(HttpURLConnection.java:947)
    at com.cingular.cscape.da.struts.action.thisAction.executeAction(thisAction.java:56)
    at com.cingular.cscape.da.struts.action.BaseAction.execute(BaseAction.java:300)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:421)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:226)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)
    at org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:397)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
    at org.extremecomponents.table.filter.AbstractExportFilter.doFilter(AbstractExportFilter.java:53)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:42)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3496)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(Unknown Source)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2180)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2086)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1406)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T17:27:52.950

您是否注意到异常消息中不匹配的撇号？

```
java.net.ProtocolException: Unsupported protocol: https'
                                                       ^ 
```

更新：看起来这个撇号只是 WebLogic HttpClient 如何打印此异常的一个怪癖。

[在聊天会话](https://chat.stackoverflow.com/rooms/22192/discussion-between-linusunis-fed-and-raffaele)中发现了 Asker 的根本问题：他正在访问一个 http:// URL，该 URL 将他重定向到一个 https:// URL。该 https 地址的网络服务器正在提供他的 JRE/HttpClient 不信任的证书。

实际的异常应该是 SSLKeyException。我认为 WebLogic HttpClient 将此问题误报为不受支持的协议问题。我认为核心问题是：

`<Warning> <Security> <BEA-090477> javax.net.ssl.SSLKeyException: [Security:090477] Certificate chain received from www.X.com - nnn.nnn.nnn.nnn was not trusted causing SSL handshake failure.`

这是提问者在直接访问 https:// URL（而不是通过重定向链）时看到的消息。

默认情况下，Java 的 Http[s]URLConnection 会自动且安静地跟随重定向。如果您对重定向到的位置感到好奇，请尝试以下代码：

```
connection.setInstanceFollowRedirects(false);
String location = connection.getHeaderField("Location");
System.out.println("Redirected to: " + location); 
```

请注意，您被重定向到的 URL 也可能会将您重定向到其他地方，并且一直持续到[http.maxRedirects](http://docs.oracle.com/javase/7/docs/api/java/net/doc-files/net-properties.html#MiscHTTP)次。重定向可能以这种方式“链接”。如果他们确实链接，您将需要继续跟踪重定向，直到您到达不发出重定向的 URL。这就是 URL 连接最终在`setInstanceFollowRedirects(true)`.

此外，我在 sun.net.www.protocol.http.HttpURLConnection 中发现了一些代码，这似乎表明**HttpURLConnection 可能不支持切换协议（HTTP -> HTTPS）作为其自动重定向以下逻辑的一部分**：

```
private boolean followRedirect() throws IOException {
    // ... [snip] ...
    if (!url.getProtocol().equalsIgnoreCase(locUrl.getProtocol())) {
        return false;
    // ... [snip] ... 
```

WebLogic 有自己的（不同的）HttpURLConnection 实现，但它可能包含类似的逻辑来防止协议切换。因此，即使提问者解决了他的证书信任问题，他仍然可能无法使用 HttpURLConnection 自动跟踪从 HTTP 到 HTTPS 的重定向链。一种解决方法是手动使用`setInstanceFollowRedirects(false)`和遵循重定向。或者直接访问 HTTPS 站点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T17:09:37.297

HTTP 是在 TCP/IP 上运行的协议。HTTPS 是基于安全套接字的 HTTP（SSL 或更新的 TLS）。现在，什么是 URL？它是一个标识资源的字符串，大致如下：

```
scheme://host:port/path/to/resource 
```

请注意，有时我们不指定端口号，因为某些协议具有关联*的众所周知的*端口号。HTTP 是 80，HTTPS 是 443，所以这些数字是隐含的。但是，请注意，您可以将服务器套接字绑定到您想要的任何端口：如果您告诉 HTTP 服务器程序将其套接字绑定到 localhost 上的端口 8273，它会很乐意这样做。

就是说，在您的情况下，消息显示“不支持的协议：**https** ”。我们可以在这里猜测，但是我认为您传递给 URL 的字符串不是您想的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T12:02:00.477

另一种可能性是 HTTP 地址以 3xx 重定向响应响应 HTTPS URL，您的客户端尝试遵循该 URL，但不支持该 URL。您可以通过 tcpdump 或 wireshark 捕获网络流量。

有这么多支持 HTTPS 的 Java HTTP 客户端库，为什么不切换到其中之一呢？

# cordova - Cordova 2.2.0 关于 android 白名单问题

> ID：14161387
> 
> 赞同：2
> 
> 时间：2013-01-04T16:55:58.383
> 
> 标签：cordova, whitelist

我正在使用 cordova FileTranfer 下载功能将图像下载到我的 android 设备。我正在使用 wifi 连接从本地服务器下载文件

我已将所有此类域列入白名单

```
<?xml version="1.0" encoding="utf-8"?>
<cordova>
    <access origin="*"/>
    <log level="DEBUG"/>
</cordova> 
```

在 LogCat 我可以看到以下内容

```
01-04 16:48:09.190: D/FileTransfer(2448): download 'http://192.168.0.105/more.web/images//bf1c5a8d-0530-4c44-9e4b-0e0b29b36d10/bf1c5a8d-0530-4c44-9e4b-0e0b29b36d10DISTELDEMOAPP.jpg' to file://file:///mnt/sdcard/bf1c5a8d-0530-4c44-9e4b-0e0b29b36d10DISTELDEMOAPP.jpg 
```

在那之后

```
01-04 16:48:09.190: W/FileTransfer(2448): Source URL is not in white list: 'http://192.168.0.105/more.web/images//bf1c5a8d-0530-4c44-9e4b-0e0b29b36d10/bf1c5a8d-0530-4c44-9e4b-0e0b29b36d10DISTELDEMOAPP.jpg' 
```

无论如何，由于此警告（=错误？）

# sas - PROC APPEND 大量日志大小正在崩溃企业指南

> ID：14161388
> 
> 赞同：2
> 
> 时间：2013-01-04T16:55:59.277
> 
> 标签：sas, enterprise-guide

我正在使用 Enterprise Guide 4.2（对此没有选择）。

我正在使用 PROC APPEND 将大约 80k+ 观察结果附加到 SQL Server 表中。我认为数据的格式存在一些问题（例如不匹配的可变长度），但它执行得很好并且表已更新。然后，企业指南给了我以下信息：

> Log(af771r01 (Process Flow)) 的内容太大而无法显示。窗口将关闭，但内容将保留在项目中。

我能够通过将日志重定向到虚拟文件来成功禁用日志：

```
** The Append Proc below outputs 80k+ lines (in theory) to the log, crashing EG 4.2;
** This statement will temporarily disable logging;
FILENAME JUNK DUMMY;
PROC PRINTTO
     LOG=JUNK;
RUN;

** ========================================================
** Archive Summarized Enrollment Data
** ========================================================;
PROC APPEND BASE = Archive.MnthlyMbrCmpArch (
                       SASDATEFMT=(SYS_SRC_LOAD_DT='mmddyy10.')
                   )
            DATA = Work.R1_MBR_ENRL_ARCHIVE;
RUN;

** Reenable logging;
PROC PRINTTO;
RUN; 
```

这可以防止 EG 崩溃，但我会丢失所有警告和错误消息。我正在尝试调试该语句，所以我想要警告和错误，我只是不想要被淹没的日志。

有没有办法在不完全关闭的情况下部分禁用日志记录？或者有没有办法将日志重定向到文件，以便 EG 在尝试不打开它时不会崩溃？

我是 SAS 新手，对任何建议持开放态度，即使他们没有直接回答问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:10:38.480

`FILENAME`是的，您可以通过在语句中指定路径来将日志重定向到文件（而不是说`DUMMY`，它指的是不存在的文件）：

```
FILENAME JUNK 'path/file-name.log'; 
```

当然，您必须对您指定的位置具有“写入”权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:13:46.283

您可以使用以下命令隐藏日志中的大量信息：

```
options nonotes nonotes2; 
```

和/或：

```
options nomprint nomlogic nosymbolgen nomacrogen; /* IF CODE CONTAINS MACROS */ 
```

错误仍会打印到屏幕上，但除非您重新打开日志记录，否则您将没有多少信息可以调试它们。

一些 SAS 文档： http: [//support.sas.com/documentation/cdl/en/basess/58133/HTML/default/viewer.htm#a001906177.htm](http://support.sas.com/documentation/cdl/en/basess/58133/HTML/default/viewer.htm#a001906177.htm)

# html - 溢出-x 拒绝显示？

> ID：14161391
> 
> 赞同：0
> 
> 时间：2013-01-04T16:56:09.500
> 
> 标签：html, css, overflow

我在一个网站上工作，当窗口缩小（模拟平板电脑/手机）时，我无法让溢出-x 滚动。

```
html {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow-x: auto;
}

body {
    margin: 0;
    padding: 0;
    width: 100%;
    overflow: auto;
} 
```

我能想到的就是控制这个。[您可以在此处](http://www.beachhousevictoria.com/)查看该站点。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:04:18.520

您在`#wrapper`div 上设置了最小宽度，这在技术上意味着它永远不会有任何溢出的内容。

将包装器的 CSS 设置为以下内容：

```
#wrapper {
    margin: 0 auto;
    max-width: 2560px;
    min-width: 900px;
    overflow-x: auto;
    padding: 0;
    position: relative;
    width: 100%;
} 
```

并从 CSS 中删除`body`&`html`元素的溢出属性，它们都是不必要的。

进行上述更改后，您应该能够在移动设备上水平滚动，但上面的 min-width 值可能需要更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:11:32.580

如果你想让元素滚动，你应该为它定义宽度或者它的父级。
所以将 min-width 添加到您的 html 样式中：

```
html {
   margin: 0;
   padding: 0;
   height: 100%;
   overflow-x: auto;
   min-width: 1000px;  # this is when html will be scroll-x
} 
```

# c++ - C++ 二叉搜索树 - 复杂类型

> ID：14161393
> 
> 赞同：2
> 
> 时间：2013-01-04T16:56:15.783
> 
> 标签：c++, data-structures, binary-search-tree

我需要为 2 种类型的对象实现 BST；帐户和客户。这两种类型都有一个 pk（都称为“id”）。当我 google/research 寻找解决方案时，我可以找到大量 BST 解决方案，但它们似乎都适用于简单类型，例如 BST 解决方案可以对 {1,2,3,4,99,...999 等整数进行排序- 但我希望 BST 解决方案根据它们的 pk 对复杂类型/类进行排序。这可能/任何提示？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:09:25.927

用于构建整数二叉搜索树的逻辑应该可以立即推广到其他数据类型。不是在每个节点中存储一个整数作为键，而是在每个字段中存储您的客户和帐户名称，但在进行查找时只比较主键。真的应该这么简单。

也就是说，除非这是用于家庭作业，否则您应该只使用 std::map，它具有与二叉搜索树相同的复杂性保证，但已经为您编写、广泛可用且经过大量测试。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T17:30:43.553

一种方法是修改节点定义，添加对要存储的对象的引用并设置索引（在您的情况下为 pk），以对注释进行排序。在使用不同类型时，模板可能会解决：

```
class Account
{
    public:
        Account(int k) : pk(k) {};
        int pk;
    /* ... */
};

template<typename T>
class TreeNode
{
    public:
        TreeNode(T& the_object) : id(the_object.pk), object(the_object) {};

        int id;
        T& object;
};

int main () {
    Account a(9);
    TreeNode<Account> tn(a);
    std::cout << tn.id;
} 
```

如果要在树中混合不同的对象类型，另一种方法是定义一个包含 pk 属性访问器的类，并将帐户和客户置于其中，例如：

```
class Indexable
{
    public:
        Indexable(int the_pk) : pk(the_pk) {};
        int pk;
};

class Account : public Indexable
{
    public:
        Account(int k) : Indexable(k) {};
    /* ... */
};

class TreeNode
{
    public:
        TreeNode(Indexable& the_object) : id(the_object.pk), object(the_object) {};

        int id;
        Indexable& object;
};

int main () {
    Account a(9);
    TreeNode tn(a);
    std::cout << tn.id;
} 
```

正如其他答案所指出的，在生产中，您可能会考虑使用 std::map 或其他已知的树结构库。

# .htaccess - 将 domain.com 重定向到 domain.com/category 而不更改地址栏中的 url

> ID：14161394
> 
> 赞同：0
> 
> 时间：2013-01-04T16:56:21.893
> 
> 标签：.htaccess

我需要为 prestashop 1.5.3.1 重定向：当你输入 domain.com 时，您将被重定向到 domain.com/category，但无需更改浏览器地址栏中的 url。怎么做？现在我在主题 header.tpl 中使用 javascript 就像这样

```
{if $page_name == 'index'}
<script>
window.location.href="http://www.domain.com/category";
</script>
{/if} 
```

是否可以为我或其他东西编写一些 htaccess 示例？非常感谢

这是我完整的htaccess：

```
# ~~start~~ Do not remove this comment, Prestashop will keep automatically the code outside this comment when .htaccess will be generated again
# .htaccess automaticaly generated by PrestaShop e-commerce open-source solution
# http://www.prestashop.com - http://www.prestashop.com/forums

<IfModule mod_rewrite.c>
RewriteEngine on
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule . - [E=REWRITEBASE:/]
RewriteRule ^api/?(.*)$ %{ENV:REWRITEBASE}webservice/dispatcher.php?url=$1 [QSA,L] 

# Images
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$1$2$3.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$1$2$3$4.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$1$2$3$4$5.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$1$2$3$4$5$6.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$1$2$3$4$5$6$7.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$6/$1$2$3$4$5$6$7$8.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$6/$7/$1$2$3$4$5$6$7$8$9.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])([0-9])(\-[_a-zA-Z0-9-]*)?(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/p/$1/$2/$3/$4/$5/$6/$7/$8/$1$2$3$4$5$6$7$8$9$10.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^c/([0-9]+)(\-[\.*_a-zA-Z0-9-]*)(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/c/$1$2$3.jpg [L]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^c/([a-zA-Z_-]+)(-[0-9]+)?/.+\.jpg$ %{ENV:REWRITEBASE}img/c/$1$2.jpg [L]

# Dispatcher
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^.*$ - [NC,L]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteRule ^.*$ %{ENV:REWRITEBASE}index.php [NC,L]
</IfModule>

#If rewrite mod isn't enabled
ErrorDocument 404 /index.php?controller=404

# ~~end~~ Do not remove this comment, Prestashop will keep automatically the code outside this comment when .htaccess will be generated again 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T20:09:19.787

尝试：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$ [NC]
RewriteRule ^/?(index.\php)?$ /category [L] 
```

这仅适用于`http://domain.com/`or的请求`http://domain.com/index.php`，并且您将在`http://domain.com/category`不更改地址栏中的 URL 的情况下获得内容。`RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$ [NC]`如果您不需要它，您甚至可能会丢失线路。

# java - 单例范围类方法中的 Java 线程安全

> ID：14161395
> 
> 赞同：1
> 
> 时间：2013-01-04T16:56:23.930
> 
> 标签：java, multithreading, concurrency

所以我有一个 Singleton 类，其中有一个由多个线程调用的非静态公共方法。在非静态方法中，我有对存储过程创建的对象的本地引用，我猜这意味着“新”关键字在某处被调用。

```
 1 public void someMethod(SomeObjectParameter parameter) {
 2      
 3     Thing thingOne = synchornizedStoredProcedureCall(): 
 4     doSomethingWith(thingOne);
 5     doSomethingElseWith(thingOne);
 6
 7 } 
```

目前，第 3 行到第 5 行位于同步代码块中，我想将其简化为仅将存储过程调用同步。

所以...假设我们有两个线程，Thread1 和 Thread2。Thread1 即将执行第 3 行，Thread2 即将执行第 4 行。既然这是一个本地引用，那么每个线程会保持不同的引用还是 synchornizedStoredProcedureCall 会覆盖对 thingOne 的引用，因为 doSomethingWith 即将使用它？

如果 thingOne 被声明为 final 或者我让它不可变怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:59:06.827

> 每个线程会维护不同的引用还是 synchornizedStoredProcedureCall 会覆盖对 thingOne 的引用，因为 doSomethingWith 即将使用它？

不同的线程有不同的堆栈。存储在`thingOne`每个线程堆栈中，因此不能被其他线程覆盖。您还需要确保每次`synchornizedStoredProcedureCall()`都返回一个不同的实例，而不是一个或实例变量。两个线程都需要在不同的实例上工作。`Thing``static``Thing`

只要`doSomethingWith(...)`and调用是线程安全的并且*只*`doSomethingElseWith(...)`使用`thingOne`参数和常量（等），保护应该没问题。*`synchornizedStoredProcedureCall()`*

 *正如@Marko 指出的那样，没有看到`Thing`类，我们不能保证它是线程安全的并且不存储内部状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T17:04:10.970

答案取决于您尚未提出的许多细节。关于类的许多细节`Thing`：它可能有一些可能不是线程安全的内部共享状态（请参阅*Flyweight*设计模式）。这些事实必须记录在 Javadoc 类中；否则很难从源代码中找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T16:58:55.377

无论如何，Thingone 都是线程安全的，因为它在堆栈上被声明为 threadlocal。如果 thingone 是一个没有在方法中声明的实例变量，你就会遇到问题；但事实并非如此 - 所以你没有。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T17:02:14.060

你的thingOne 是局部变量。它是线程安全的。每个线程都有自己的本地副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T17:09:26.560

你需要确保它`thingOne`没有被共享。即使它是从同步方法返回的，如果它是从返回的单例的成员`synchornizedStoredProcedureCall`，您的实现也不再是线程安全的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T17:14:02.417

每个线程将维护一个不同的引用。如果 someMethod 是静态的，情况也是如此。

您仍然必须确保 Thing 实例本身是线程安全的。例如，Thing 类没有静态字段，两个 Thing 实例也没有指向同一个对象的非静态字段，或者如果它们有，它们以线程安全的方式处理它们。*

# sql-server - SSRS 的 IIF 和日期逻辑和格式

> ID：14161396
> 
> 赞同：0
> 
> 时间：2013-01-04T16:56:24.617
> 
> 标签：sql-server, visual-studio-2010, reporting-services

我有以下代码

```
=IIF(Month(Fields!effectivedate.Value) <> Month(Now()), Now(), Fields!effectdate.Value) 
```

在这段代码中，我检查是否`Fields!effectivedate.Value`是当前月份。

*   如果是当前月份，则显示`Fields!effectivedate.Value`。
*   如果不是当前月份，则显示当前日期。

除了做这个检查，我还想检查另一个值， `fields!Freeze.Value`

这是它在 VB.NET 代码中的样子

```
If fields!Freeze.Value = true
     Fields!effectdate.Value
else
     IIF(Month(Fields!effectivedate.Value) <> Month(Now()), Now(), Fields!effectdate.Value)
end if 
```

我将如何在 SSRS 代码中编写此代码？

如果我未能正确解释某些事情，请要求进一步澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:59:34.210

只需嵌套 IIf：

```
=IIf(Fields!Freeze.Value, Fields!effectdate.Value, IIF(Month(Fields!effectivedate.Value) <> Month(Now()), Now(), Fields!effectdate.Value)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:46:59.703

您将需要使用`IIf`由@lc 启动的嵌套函数。但是，您需要更清楚要在`Freeze`现场检查的内容。

例如，您可以使用该`IsNothing()`函数检查空格，或者如果它是布尔值，您**可能**需要查看`Fields!Freeze.Value = 1`.

# php - 我使用 switch 语句来包含特定文件，但它也包含“默认”

> ID：14161398
> 
> 赞同：0
> 
> 时间：2013-01-04T16:56:36.057
> 
> 标签：php, include, switch-statement

这是我的代码

```
 <?php
    $id = isset($_GET['id']) ? $_GET['id'] : '';
    switch ($id) {
        default:include_once('default.php');
        break;
        case 'actiune':include('jocuri/actiune/index.php');
        break;
        case 'aventura':include('jocuri/aventura/index.php');
        break;
     }
     ?>
    <!--games-->
     <?php
     $game = isset($_GET['game']) ? $_GET['game'] : '';
     switch ($game) {
         case 'nz':include('jocuri/actiune/ninja-vs-zombie/index.php');
         break;
         case 'aventura':include('/jocuri/aventura/index.php');
         break;
      }
      ?> 
```

因此，当我尝试从中访问 c​​ase 'nz' 时，它还包括顶部的默认值。那么我该怎么做才能只包含“nz”案例呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:59:59.027

尝试将默认语句移动到第一个 switch 语句的底部。switch 语句直接沿着每个 case 路径进行，因此需要 break 关键字。无论如何，默认案例将始终在案例中执行。将其放在底部将确保它仅在案例失败时才会执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:06:21.417

据我了解，您希望在提供*游戏*参数时忽略“顶部”（包括*id*文件） 。仅在未提供*游戏（或与您提供的案例**['aventura', 'nz']*不匹配）时尝试添加 IF 语句以执行第一个 switch 语句

 ***此外，您可以执行以下操作：

```
$id = isset($_GET['id']) ? $_GET['id'] : '';
$game = isset($_GET['game']) ? $_GET['game'] : '';

$games = array('nz' => 'jocuri/actiune/ninja-vs-zombie/index.php',
               'aventura' => '/jocuri/aventura/index.php');

$ids = array('actiune' => 'jocuri/actiune/ninja-vs-zombie/index.php',
             'aventura' => '/jocuri/aventura/index.php');

if (array_key_exists($game, $games))
{
  include($games[$game]);
}
else if (array_key_exists($id, $ids))
{
  include($ids[$id]);
}
else include('default.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:09:56.027

尝试这个

```
 <?php
$id = isset($_GET['id']) ? $_GET['id'] : '';
switch ($id) {

    case 'actiune':include('jocuri/actiune/index.php');
    break;
    case 'aventura':include('jocuri/aventura/index.php');
    break;
   default:include_once('default.php');
    break;
 }
 ?>
<!--games-->
 <?php
 $game = isset($_GET['game']) ? $_GET['game'] : '';
 switch ($game) {
     case 'nz':include('jocuri/actiune/ninja-vs-zombie/index.php');
     break;
     case 'aventura':include('/jocuri/aventura/index.php');
     break;
  }
  ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T17:26:53.517

（我确实尝试将此添加为对 osulerhia 答案的评论，但不能并认为如果我正确阅读它可能会回答海报的问题）。

我不确定我是否正确理解了您的问题，以及以上 osulerhia 的答案是否是您正在寻找的。

您期望两个单独的 GET 变量（“id”和“game”），如果游戏变量是“nz”，您不想显示用于“id”的 switch 语句的默认值？

如果这是正确的，那么您需要为您希望您的 switch 语句如何播放添加某种逻辑。然后，您还需要考虑是否希望其他任何一个显示“nz”是否是“游戏”的值。您的逻辑（写得很清楚）目前是：

```
Is the id variable "actiune" -> include a file

Is the id variable "aventura" -> include a file

Is the id variable anything else -> include the default file

Is the game variable "nz" -> include a file

Is the game variable "aventura" -> include a file 
```

如您所见，您的两个开关是完全独立的，您需要决定要显示什么以及何时显示它，例如，如果您希望一切都按上述方式工作，但不显示第一个开关的任何内容，如果游戏变量的值是“nz”，那么你可以将它包装在一个 if 语句中，例如：

```
if((isset($_GET['game']) && $_GET['game'] != "nz") || (!isset($_GET['game']))) { *your original switch statement* } 
```***

# asp.net-mvc - 如何在 asp.net mvc 4 中的视图上渲染 2 个模型？

> ID：14161399
> 
> 赞同：1
> 
> 时间：2013-01-04T16:56:49.200
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我有一个页面，其中包含一些文本框，这些文本框将保存到一个名为 的表中`Values`，比如说。我显示的文本框将填充下拉列表中的选择。这个下拉列表将从数据库中另一个名为`DropDownListValues`. 我假设我的控制器将建立在`Values`模型上，但我想我对如何将值提供给下拉列表有点困惑。我是否将其存储在一个`ViewBag`或呈现一个局部视图？只是想在这里找到最好的方法，因为我对 asp.net mvc 有点陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:00:11.387

是的，您将它们存储在 viewBag 中

```
 ViewBag.CompanyTypes = _Repository.GetCompanyTypes().
                Select(p => new SelectListItem { Text = p.CompanyType1, Value = p.CompanyTypeID.ToString() }); 
```

并像这样使用它：

```
@Html.DropDownListFor(model=> model.CompanyTypeID, (IEnumerable<SelectListItem>)ViewBag.CompanyTypes ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:04:22.797

我认为您可以同时使用它们，问题是存储在 ViewBag 中还是渲染部分视图？回答：是的，您可以在需要时同时使用它们。您可以为城市、办公室、少数受欢迎的用户等准备特定的扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T17:40:41.383

使用`ViewModel`. 这是在评论中，但我不能接受它作为答案，所以我决定发布答案

# iphone - 垂直滑块中只有一个方向

> ID：14161402
> 
> 赞同：2
> 
> 时间：2013-01-04T16:56:54.483
> 
> 标签：iphone, ios, ipad, uislider

在 iPad 的应用程序中，我正在尝试构建一个仅向上移动的滑块，它将通过一个按钮重置。

我发现了如何垂直放置它，只需进行转换：`CGAffineTransformMakeRotation`. 但是我怎样才能阻止滑块向下移动？

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:06:58.037

您需要为滑块的值设置一个处理程序：

```
[slider addTarget:self action:@selector(sliderUpdated:) forControlEvents:UIControlEventValueChanged]; 
```

您需要当前滑块值的实例变量：

```
float _sliderValue; 
```

您需要实现`sliderUpdated:`上面设置的方法。

```
- (void)sliderUpdated:(UISlider *)slider {
    float val = slider.value;
    if (val < _sliderValue) {
        // The user tried to move the slider down - move it back up
        slider.value = _sliderValue;
    } else {
        // The user moved the slider up - save this as the new value
        _sliderValue = val;
    }
} 
```

确保您的“重置”按钮处理程序将`_sliderValue`背面重置为滑块的最小值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:59:51.423

您可以创建一个自定义 UISlider 子类并实现该`- (BOOL)continueTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event`方法来检查滑块是否正在向下移动。

# php - soapheader 使用 php 进行身份验证

> ID：14161404
> 
> 赞同：2
> 
> 时间：2013-01-04T16:57:04.683
> 
> 标签：php, soap, soap-client, soapheader

> **可能重复：**
> [PHP SoapClient 和复杂的标头](https://stackoverflow.com/questions/4319088/php-soapclient-and-a-complex-header)

我有这个标题结构：

```
<soapenv:Header>
  <wsse:Security xmlns:wsse=”http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd” soapenv:mustUnderstand=”0”&gt;
    <wsse:UsernameToken>
    <wsse:Username Type=”http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#UsernameToken”&gt;votre_login</wsse:Username>
    <wsse:Password Type=”http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText”&gt;votre_password</wsse:Password>
    </wsse:UsernameToken>
  </wsse :Security>
</soapenv :Header> 
```

我如何使用方法将其放入 php 中`__setSoapHeaders()`？

我试过了：

```
$auth = array(
            'UsernameToken' => array(
                'Username' => '*****',
                'Password' => '*****'
            )
        );
$header = new SoapHeader('http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd','Security',$auth, 0);
$client->__setSoapHeaders($header); 
```

我有这个错误：

> com.ibm.wsspi.wssecurity.SoapSecurityException: WSEC5509E: Un jeton de sécurité dont le type est [ [http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile -1.0#UsernameToken]](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#UsernameToken]) 需要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T16:59:24.913

来自： http: [//php.net/manual/en/soapclient.setsoapheaders.php#93460](http://php.net/manual/en/soapclient.setsoapheaders.php#93460)

> 要创建复杂的 SOAP 标头，您可以执行以下操作：
> 
> 所需的 SOAP 标头：
> 
> ```
> <soap:Header> 
>  <RequestorCredentials xmlns="http://namespace.example.com/"> 
>   <Token>string</Token> 
>   <Version>string</Version> 
>   <MerchantID>string</MerchantID> 
>   <UserCredentials> 
>    <UserID>string</UserID> 
>    <Password>string</Password> 
>   </UserCredentials> 
>  </RequestorCredentials> 
> </soap:Header> 
> ```
> 
> 对应的PHP代码：
> 
> ```
> $ns = 'http://namespace.example.com/'; //Namespace of the WS. 
> 
> //Body of the Soap Header. 
> $headerbody = array('Token' => $someToken, 
>                 'Version' => $someVersion, 
>                 'MerchantID'=>$someMerchantId, 
>                   'UserCredentials'=>array('UserID'=>$UserID, 
>                                          'Password'=>$Pwd)); 
> 
> //Create Soap Header.        
> $header = new SOAPHeader($ns, 'RequestorCredentials', $headerbody);        
> 
> //set the Headers of Soap Client. 
> $soap_client->__setSoapHeaders($header); 
> ```

# objective-c - 识别用户手势的路径

> ID：14161405
> 
> 赞同：2
> 
> 时间：2013-01-04T16:57:28.780
> 
> 标签：objective-c, ios

我正在开发一个屏幕上有 9 个视图的应用程序，我希望用户以他们想要的方式连接视图，并将他们的序列记录为密码。但我不知道我应该使用哪个手势识别器。

我应该使用 CMUnistrokeGestureRecognizer 还是几个滑动手势的组合或其他任何东西？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:39:31.307

您可以使用 a [`UIPanGestureRecognizer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html)，例如：

```
CGFloat const kMargin = 10;

- (void)viewDidLoad
{
    [super viewDidLoad];

    // create a container view that all of our subviews for which we want to detect touches are:

    CGFloat containerWidth = fmin(self.view.bounds.size.width, self.view.bounds.size.height) - kMargin * 2.0;

    UIView *container = [[UIView alloc] initWithFrame:CGRectMake(kMargin, kMargin, containerWidth, containerWidth)];
    container.backgroundColor = [UIColor darkGrayColor];
    [self.view addSubview:container];

    // now create all of the subviews, specifying a tag for each; and

    CGFloat cellWidth = (containerWidth - (4.0 * kMargin)) / 3.0;

    for (NSInteger column = 0; column < 3; column++)
    {
        for (NSInteger row = 0; row < 3; row++)
        {
            UIView *cell = [[UIView alloc] initWithFrame:CGRectMake(kMargin + column * (cellWidth + kMargin),
                                                                    kMargin + row    * (cellWidth + kMargin),
                                                                    cellWidth, cellWidth)];
            cell.tag = row * 3 + column;
            cell.backgroundColor = [UIColor lightGrayColor];
            [container addSubview:cell];
        }
    }

    // finally, create the gesture recognizer

    UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self
                                                                          action:@selector(handlePan:)];
    [container addGestureRecognizer:pan];
}

- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    static NSMutableArray *gesturedSubviews;

    // if we're starting a gesture, initialize our list of subviews that we've gone over

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        gesturedSubviews = [NSMutableArray array];
    }

    // now figure out whether:
    //   (a) are we over a subview; and
    //   (b) is this a different subview than we last were over

    CGPoint location = [gesture locationInView:gesture.view];

    for (UIView *subview in gesture.view.subviews)
    {
        if (CGRectContainsPoint(subview.frame, location))
        {
            if (subview != [gesturedSubviews lastObject])
            {
                [gesturedSubviews addObject:subview];

                // an example of the sort of graphical flourish to give the
                // some visual cue that their going over the subview in question 
                // was recognized

                [UIView animateWithDuration:0.25
                                      delay:0.0
                                    options:UIViewAnimationOptionAutoreverse
                                 animations:^{
                                     subview.alpha = 0.5;
                                 }
                                 completion:^(BOOL finished){
                                     subview.alpha = 1.0;
                                 }];
            }
        }
    }

    // finally, when done, let's just log the subviews
    // you would do whatever you would want here

    if (gesture.state == UIGestureRecognizerStateEnded)
    {
        NSLog(@"We went over:");

        for (UIView *subview in gesturedSubviews)
        {
            NSLog(@"  %d", subview.tag);
        }

        // you might as well clean up your static variable when you're done

        gesturedSubviews = nil;
    }
} 
```

显然，您可以以任何您想要的方式创建您的子视图，并以您想要的任何方式跟踪它们，但我们的想法是让子视图具有唯一的`tag`数字，并且手势识别器只会看到您在一个手势中遍历它们的顺序.

即使我没有准确捕捉到您想要的内容，它至少向您展示了如何使用平移手势识别器来跟踪手指从一个子视图到另一个子视图的移动。

* * *

**更新：**

如果您想在用户登录时在屏幕上绘制路径，您可以`CAShapeLayer`使用`UIBezierPath`. 我将在下面演示这一点，但作为警告，我不得不指出这可能不是一个很好的安全功能：通常输入密码时，你会向用户展示足够多的内容，以便他们确认他们正在做他们想要什么，但还不够，以至于有人可以回头看看整个密码是什么。输入文本密码时，通常 iOS 会暂时显示您按下的最后一个键，但很快会将其转换为星号，这样您就无法看到整个密码。因此，我最初的建议。

但是，如果您真的一心想在用户绘制路径时向他们展示路径，您可以使用类似以下的内容。首先，这需要[Quartz 2D](https://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html)。因此添加`QuartzCore.framework`到您的项目中（请参阅[链接到库或框架](http://developer.apple.com/library/ios/#recipes/xcode_help-project_editor/Articles/AddingaLibrarytoaTarget.html)）。其次，导入 QuartCore 头文件：

```
#import <QuartzCore/QuartzCore.h> 
```

第三，将 pan 处理程序替换为：

```
- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    static NSMutableArray *gesturedSubviews;
    static UIBezierPath *path = nil;
    static CAShapeLayer *shapeLayer = nil;

    // if we're starting a gesture, initialize our list of subviews that we've gone over

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        gesturedSubviews = [NSMutableArray array];
    }

    // now figure out whether:
    //   (a) are we over a subview; and
    //   (b) is this a different subview than we last were over

    CGPoint location = [gesture locationInView:gesture.view];

    for (UIView *subview in gesture.view.subviews)
    {
        if (!path)
        {
            // if the path hasn't be started, initialize it and the shape layer

            path = [UIBezierPath bezierPath];
            [path moveToPoint:location];
            shapeLayer = [[CAShapeLayer alloc] init];
            shapeLayer.strokeColor = [UIColor redColor].CGColor;
            shapeLayer.fillColor = [UIColor clearColor].CGColor;
            shapeLayer.lineWidth = 2.0;
            [gesture.view.layer addSublayer:shapeLayer];
        }
        else
        {
            // otherwise add this point to the layer's path

            [path addLineToPoint:location];
            shapeLayer.path = path.CGPath;
        }

        if (CGRectContainsPoint(subview.frame, location))
        {
            if (subview != [gesturedSubviews lastObject])
            {
                [gesturedSubviews addObject:subview];

                [UIView animateWithDuration:0.25
                                      delay:0.0
                                    options:UIViewAnimationOptionAutoreverse
                                 animations:^{
                                     subview.alpha = 0.5;
                                 }
                                 completion:^(BOOL finished){
                                     subview.alpha = 1.0;
                                 }];
            }
        }
    }

    // finally, when done, let's just log the subviews
    // you would do whatever you would want here

    if (gesture.state == UIGestureRecognizerStateEnded)
    {
        // assuming the tags are numbers between 0 and 9 (inclusive), we can build the password here

        NSMutableString *password = [NSMutableString string];

        for (UIView *subview in gesturedSubviews)
            [password appendFormat:@"%c", subview.tag + 48];

        NSLog(@"Password = %@", password);

        // clean up our array of gesturedSubviews

        gesturedSubviews = nil;

        // clean up the drawing of the path on the screen the user drew

        [shapeLayer removeFromSuperlayer];
        shapeLayer = nil;
        path = nil;
    }
} 
```

这会产生用户在手势进行时绘制的路径：

![用户手指的路径](../Images/48475d441b0a508610849b11ed957413.png)

而不是显示用户在用户手指的每次移动时绘制的路径，也许您只是在子视图的中心之间绘制线条，例如：

```
- (void)handlePan:(UIPanGestureRecognizer *)gesture
{
    static NSMutableArray *gesturedSubviews;
    static UIBezierPath *path = nil;
    static CAShapeLayer *shapeLayer = nil;

    // if we're starting a gesture, initialize our list of subviews that we've gone over

    if (gesture.state == UIGestureRecognizerStateBegan)
    {
        gesturedSubviews = [NSMutableArray array];
    }

    // now figure out whether:
    //   (a) are we over a subview; and
    //   (b) is this a different subview than we last were over

    CGPoint location = [gesture locationInView:gesture.view];

    for (UIView *subview in gesture.view.subviews)
    {
        if (CGRectContainsPoint(subview.frame, location))
        {
            if (subview != [gesturedSubviews lastObject])
            {
                [gesturedSubviews addObject:subview];

                if (!path)
                {
                    // if the path hasn't be started, initialize it and the shape layer

                    path = [UIBezierPath bezierPath];
                    [path moveToPoint:subview.center];
                    shapeLayer = [[CAShapeLayer alloc] init];
                    shapeLayer.strokeColor = [UIColor redColor].CGColor;
                    shapeLayer.fillColor = [UIColor clearColor].CGColor;
                    shapeLayer.lineWidth = 2.0;
                    [gesture.view.layer addSublayer:shapeLayer];
                }
                else
                {
                    // otherwise add this point to the layer's path

                    [path addLineToPoint:subview.center];
                    shapeLayer.path = path.CGPath;
                }

                [UIView animateWithDuration:0.25
                                      delay:0.0
                                    options:UIViewAnimationOptionAutoreverse
                                 animations:^{
                                     subview.alpha = 0.5;
                                 }
                                 completion:^(BOOL finished){
                                     subview.alpha = 1.0;
                                 }];
            }
        }
    }

    // finally, when done, let's just log the subviews
    // you would do whatever you would want here

    if (gesture.state == UIGestureRecognizerStateEnded)
    {
        // assuming the tags are numbers between 0 and 9 (inclusive), we can build the password here

        NSMutableString *password = [NSMutableString string];

        for (UIView *subview in gesturedSubviews)
            [password appendFormat:@"%c", subview.tag + 48];

        NSLog(@"Password = %@", password);

        // clean up our array of gesturedSubviews

        gesturedSubviews = nil;

        // clean up the drawing of the path on the screen the user drew

        [shapeLayer removeFromSuperlayer];
        shapeLayer = nil;
        path = nil;
    }
} 
```

这会产生类似的东西：

![带线条的用户路径](../Images/04cbfcc8dcfd46693d4078ccfe7a46d8.png)

您有各种各样的选择，但希望您现在拥有构建块，以便您可以设计自己的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-15T15:25:54.333

原谅我 Rob，这里纯粹是抄袭 :) 在 swift 3.0 中需要相同的代码 :) 所以我把你写的这个很棒的小例子翻译成 swift 3.0。

```
ViewController.swift

import UIKit

class ViewController: UIViewController {

static let kMargin:CGFloat = 10.0;

override func viewDidLoad()
{
super.viewDidLoad()

// create a container view that all of our subviews for which we want to detect touches are:

let containerWidth = fmin(self.view.bounds.size.width, self.view.bounds.size.height) - ViewController.kMargin * 2.0

let container = UIView(frame: CGRect(x: ViewController.kMargin, y: ViewController.kMargin, width: containerWidth, height: containerWidth))
container.backgroundColor = UIColor.darkGray
    view.addSubview(container)

// now create all of the subviews, specifying a tag for each; and

let cellWidth = (containerWidth - (4.0 * ViewController.kMargin)) / 3.0

    for column in 0 ..< 3 {
        for row in 0 ..< 3 {
            let cell = UIView(frame: CGRect(x: ViewController.kMargin + CGFloat(column) * (cellWidth + ViewController.kMargin), y: ViewController.kMargin + CGFloat(row) * (cellWidth + ViewController.kMargin), width: cellWidth, height: cellWidth))
            cell.tag = row * 3 + column;
            container.addSubview(cell)
        }
    }

// finally, create the gesture recognizer

    let pan = UIPanGestureRecognizer(target: self, action: #selector(handlePan))
    container.addGestureRecognizer(pan)
}

func handlePan(gesture: UIPanGestureRecognizer)
{
    var  gesturedSubviews : [UIView] = []

// if we're starting a gesture, initialize our list of subviews that we've gone over

if (gesture.state == .began)
{
    gesturedSubviews.removeAll()
}

    let location = gesture.location(in: gesture.view)
    for subview in (gesture.view?.subviews)! {
        if (subview.frame.contains(location)) {
            if (subview != gesturedSubviews.last) {
            gesturedSubviews.append(subview)
                subview.backgroundColor = UIColor.blue
        }
    }

// finally, when done, let's just log the subviews
// you would do whatever you would want here

if (gesture.state != .recognized)
{
print("We went over:");

for subview in gesturedSubviews {
            print(" %d", (subview as AnyObject).tag);
}

// you might as well clean up your static variable when you're done

}
}
}

} 
```

**更新**：几乎就是这样；我也尝试翻译更新，但我的翻译遗漏了一些东西并且没有工作，所以我搜索了 SO 并制作了一个类似的，如果略有不同的最终解决方案。

```
import UIKit
import QuartzCore

class ViewController: UIViewController {

static let kMargin:CGFloat = 10.0;

override func viewDidLoad()
{
super.viewDidLoad()

// create a container view that all of our subviews for which we want to detect touches are:

let containerWidth = fmin(self.view.bounds.size.width, self.view.bounds.size.height) - ViewController.kMargin * 2.0

let container = UIView(frame: CGRect(x: ViewController.kMargin, y: ViewController.kMargin, width: containerWidth, height: containerWidth))
container.backgroundColor = UIColor.darkGray
    view.addSubview(container)

// now create all of the subviews, specifying a tag for each; and

let cellWidth = (containerWidth - (4.0 * ViewController.kMargin)) / 3.0

    for column in 0 ..< 3 {
        for row in 0 ..< 3 {
            let cell = UIView(frame: CGRect(x: ViewController.kMargin + CGFloat(column) * (cellWidth + ViewController.kMargin), y: ViewController.kMargin + CGFloat(row) * (cellWidth + ViewController.kMargin), width: cellWidth, height: cellWidth))
            cell.tag = row * 3 + column;
            container.addSubview(cell)
        }
    }

// finally, create the gesture recognizer

    let pan = UIPanGestureRecognizer(target: self, action: #selector(handlePan))
    container.addGestureRecognizer(pan)

}

// Here's a Swift 3.0 version based on Rajesh Choudhary's answer:

func drawLine(onLayer layer: CALayer, fromPoint start: CGPoint, toPoint end:CGPoint) {
    let line = CAShapeLayer()
    let linePath = UIBezierPath()
    linePath.move(to: start)
    linePath.addLine(to: end)
    line.path = linePath.cgPath
    line.fillColor = nil
    line.lineWidth = 8
    line.opacity = 0.5
    line.strokeColor = UIColor.red.cgColor
    layer.addSublayer(line)
}

var gesturedSubviews : [UIView] = []
var startX: CGFloat!
var startY: CGFloat!
var endX: CGFloat!
var endY: CGFloat!

func handlePan(gesture: UIPanGestureRecognizer) {

if (gesture.state == .began)
{
    gesturedSubviews = [];
    let location = gesture.location(in: gesture.view)
    print("location \(location)")
    startX = location.x
    startY = location.y
  }
  if (gesture.state == .changed) {
    let location = gesture.location(in: gesture.view)
    print("location \(location)")
    endX = location.x
    endY = location.y
    drawLine(onLayer: view.layer, fromPoint: CGPoint(x: startX, y: startY), toPoint: CGPoint(x:endX, y:endY))
    startX = endX
    startY = endY
}
if (gesture.state == .ended) {
        let location = gesture.location(in: gesture.view)
        print("location \(location)")
        drawLine(onLayer: view.layer, fromPoint: CGPoint(x: startX, y: startY), toPoint: CGPoint(x:location.x, y:location.y))
}

// now figure out whether:
//   (a) are we over a subview; and
//   (b) is this a different subview than we last were over

 let location = gesture.location(in: gesture.view)
    print("location \(location)")

    for subview in (gesture.view?.subviews)! {
        if  subview.frame.contains(location) {
                if (subview != gesturedSubviews.last) {

                gesturedSubviews.append(subview)

                subview.backgroundColor = UIColor.blue
                subview.alpha = 1.0

            }
        }
    }
}

} 
```

# jpa - 通过 Query.executeUpdate() 使用批量更新与对象的多个实体的 set 方法

> ID：14161412
> 
> 赞同：1
> 
> 时间：2013-01-04T16:57:56.800
> 
> 标签：jpa, eclipselink

有时，在我们有实体 ID 列表的情况下，我必须更新一组相关的已传递 ID 实体的字段，我正在徘徊在哪些情况下最好通过 1-st 使用标准方式：加载所有实体和 2-nd：调用相关的 set() 方法：

```
List<Long> ids = ....;
String par = "example";
List<User> users = USER_DAO.getUsers(ids);
for(User user : users) {
   user.setField(par);
} 
```

或者另一种方式是通过执行批量更新操作，例如：

```
Query query = em.createQuery("UPDATE User user SET user.field =:1? WHERE user.id IN : 2?");
int rowCount = query.executeUpdate(); 
```

您对该问题有一些了解和/或调查吗？或者情况，当第一种方式比第二种方式更好或 vs. 时？

欢迎所有建议，谢谢，SImeon

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:12:37.353

第二种方式会执行得更好，因为在数据库上执行的 sql 会更少。在您的第一种情况下，将为每个用户执行两个 sql（一个用于选择，一个用于更新）。在您的第一种情况下，当休眠将 sql 映射到对象时，您也会受到性能影响。

# ios - 使用 Twitter/FB 共享表时是否需要包括可达性？

> ID：14161413
> 
> 赞同：0
> 
> 时间：2013-01-04T16:58:00.620
> 
> 标签：ios, reachability

Apple 的 Reachability 类是否需要包含在允许通过内置 Facebook 和 Twitter 共享表共享的应用程序中？这是我的应用程序中唯一需要任何类型的网络调用的区域，但由于它是系统级功能并且我的应用程序不直接与 Twitter/Facebook 对话，我想我可能不需要包含它。

在相关说明中，如果我的应用程序将用户发送到 Safari 以获取帮助页面，我是否需要为此添加可达性？我的应用程序也不会在那里进行任何网络调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:03:53.550

据我所知，可达性用于检查互联网连接的可用性。如果您想在尝试任何与网络相关的操作之前确保设备当前具有 Internet 连接，这通常很有用。但是，这不是强制性的。

# mysql - mysql进程无法停止

> ID：14161415
> 
> 赞同：30
> 
> 时间：2013-01-04T16:58:11.420
> 
> 标签：mysql, ubuntu, percona

我最近在 Ubuntu 12.04 OS 桌面上安装了 5.5.28-29.2 Percona Server (GPL)，Release 29.2。我尝试使用不同的方法停止服务器：

```
- sudo /etc/init.d/mysql stop
- sudo kill -9 pid
- mysqladmin -u root -p shutdown 
```

所有这些方法都会停止该过程，但它会在它死后自动启动。我检查了 syslog (/var/log/syslog/) 并总是显示下一个跟踪：

```
Jan  4 17:50:44 kernel: [ 1915.494219] init: mysql main process (17311) killed by KILL signal
Jan  4 17:50:44 kernel: [ 1915.494245] init: mysql main process ended, respawning
Jan  4 17:50:44 kernel: [ 1915.500025] type=1400 audit(1357318244.557:48): apparmor="STATUS" operation="profile_replace" name="/usr/sbin/mysqld" pid=18458 comm="apparmor_parser"
Jan  4 17:50:46 /etc/mysql/debian-start[18501]: Upgrading MySQL tables if necessary.
Jan  4 17:50:46 /etc/mysql/debian-start[18504]: /usr/bin/mysql_upgrade: the '--basedir' option is always ignored
Jan  4 17:50:46 /etc/mysql/debian-start[18504]: Looking for 'mysql' as: /usr/bin/mysql
Jan  4 17:50:46 /etc/mysql/debian-start[18504]: Looking for 'mysqlcheck' as: /usr/bin/mysqlcheck
Jan  4 17:50:46 /etc/mysql/debian-start[18504]: This installation of MySQL is already upgraded to 5.5.28, use --force if you still need to run mysql_upgrade
Jan  4 17:50:46 /etc/mysql/debian-start[18515]: Checking for insecure root accounts.
Jan  4 17:50:46 /etc/mysql/debian-start[18520]: Triggering myisam-recover for all MyISAM tables 
```

你知道进程自动重启的原因吗？先感谢您！！

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-11T23:34:08.997

我遇到了同样的问题。运行该`kill`命令会终止该进程，但在我的情况下，它会在不同的进程 ID 下再次弹出。

我能弄清楚如何永久阻止它的唯一方法是：

```
sudo stop mysql 
```

希望有帮助。

来源：[http ://www.itfromscratch.com/how-to-stop-the-percona-mysql-server/](http://www.itfromscratch.com/how-to-stop-the-percona-mysql-server/)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-01-27T13:05:12.197

使用`sudo service mysql stop`对我有用。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-01-04T17:02:13.403

Want to kill all mysql instances? Try as root:

```
 pkill mysqld; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-10-25T12:41:53.370

我在 Mac OS 上使用 Homebrew。`brew services stop mysql`对我*不起作用*，但`sudo brew services stop mysql`确实如此。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-04T17:01:11.243

I'm going to guess here, but mysqld might be started via the mysql_safe init script, which will restart the server.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-02-27T02:57:02.450

对于那些事后看这几年的人，我有一个类似的问题，只是解决了它。

似乎在 /etc/init 目录中存在第二个名为 orig_mysql.conf 的初始化脚本以及 mysql.conf 文件。这导致暴发户启动了两个实例，显然当一个实例结束时它变得混乱。因此，发生了连续的重生。

我的解决方案：

1.  如果可能，通过 upstart 停止 mysql： `service mysql stop`
2.  删除其中一个 conf 文件（我删除了 /etc/init/orig_mysql.conf）。然后使用以下命令重新启动 init： `telinit u`
3.  手动终止任何剩余的 mysqld 进程。

一旦您确认没有 mysqld 进程正在运行并且它们不再重新生成，请使用 .restart 重新启动 mysql `service mysql start`。

希望这可以帮助某人。我花了两年时间解决这个问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-16T03:57:17.687

这可能不适用于这个特定的问题，但无论如何它都会发生。我检查了错误日志（“/var/log/mysql/error.log”），发现“explicit_defaults_for_timestamp=TRUE”导致了错误（“未知变量”）。所以我将它从 my.cnf ("/etc/mysql/my.cnf") 中删除，然后运行 ​​"sudo start mysql"，它就重新启动并运行了。我希望这也有帮助！

# mediaelement.js - resetOthermedia 而不是 pauseOther

> ID：14161417
> 
> 赞同：1
> 
> 时间：2013-01-04T16:58:23.740
> 
> 标签：mediaelement.js

有没有解决方案可以使用此命令而不是 pauseOthermedia？我在一页上有多个 mp3 播放器，当我播放一个播放器时，我可能会从一开始就将我离开的播放器重置为 0 最好的问候 dup

# ruby-on-rails-3 - link_to 辅助修改

> ID：14161427
> 
> 赞同：0
> 
> 时间：2013-01-04T16:59:09.477
> 
> 标签：ruby-on-rails-3, link-to, view-helpers

在我正在工作的 Rails 应用程序中，我`link_to`稍微修改了帮助程序：

```
 def link_to(*args, &block)
    args[1] = params[:client_id].present? ? "#{args[1]}?client_id=#{params[:client_id]}" : args[1]
    super
  end 
```

我这样做是为了不必在`:client_id => params[:client_id]`每次编写`link_to`应用程序内部时都添加。好吧，我有一种鸽子坑自己有以下问题......

如果我有这个`link_to`：

```
<%= link_to "Continue to billing info", add_product_path(:product_id => @product.id), :class => 'btn' %> 
```

使用我的`link_to`助手创建一个链接，如下所示：

```
http://localhost:3001/orders/add_product?product_id=35?client_id=HT274848772 
```

我对如何修改我的助手有点不知所措，以便链接在包含`:client_id`参数的同时正常工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:24:09.123

您想将参数添加到链接 url，而不是链接本身。也许你应该重写 url_for 助手，它是所有 url 助手使用的助手（[http://apidock.com/rails/ActionView/Helpers/UrlHelper/url_for](http://apidock.com/rails/ActionView/Helpers/UrlHelper/url_for)）

# javascript - 如何知道 DOM 元素是否在 jquery 范围内？

> ID：14161428
> 
> 赞同：0
> 
> 时间：2013-01-04T16:59:10.967
> 
> 标签：javascript, jquery

> **可能重复：**
> [jquery 选择 iframe 子项](https://stackoverflow.com/questions/2893280/jquery-select-iframe-children)

我的 asp.net 网站中有很多框架。由于我不知道它的布局，并且我需要更新`<span>`我的 jquery 代码所在的不同框架中的值，所以我执行以下操作：

`$('#myspan').text('sometext');`

但一切都会改变。所以我不知道是不是因为 jquery 没有设法用这个选择器捕获元素，因为它不在它的范围内或者为什么。

然而这：

`alert($('#myspan'));`它显示一个警报`[object][object]`作为结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:03:15.103

The jQuery function (`$('someSelector')`) will always return an object, even if no elements match the selector.

If you really are using multiple frames, you have a problem: jQuery can't find elements across frames, only in the current document/frame – unless you pass a proper context object for the specific document you want to target.

For example, if you have an `<iframe id="myframe">`, you can look for `#myspan` inside it with this:

```
var frameDoc = $('#myframe')[0].contentWindow.document;
var mySpan = $('#myspan', frameDoc); 
```

For that to work, the iframe's source must be hosted in the same domain as the main page. There's also the following cleaner options, suggested in the comments below:

```
var mySpan = $("#myframe").contents().find('#myspan') 
```

or

```
var mySpan = $('#myspan', $("#myframe").contents()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:06:14.333

调试 jQuery 问题的一个好方法是这种模式：

```
var e = $(...);
console.log(['Explanation', e.get()]); 
```

`get()`不带参数会将奇怪的 jQuery 选择器结果转换为普通的 JavaScript 数组，您可以在浏览器的控制台中展开该数组。这应该有助于查看选择器返回的内容。

如果它不匹配任何东西，那么您的选择器在某种程度上是错误的。如果元素确实存在，请在浏览器的开发工具中检查当前 DOM。

# javascript - 我的 jquery 切换有什么问题

> ID：14161429
> 
> 赞同：1
> 
> 时间：2013-01-04T16:59:15.210
> 
> 标签：javascript, jquery, html, toggle

我有 div，它的 id 是：manufacturer_63 ......它的风格是：显示：无，可见性：隐藏。

我写的是：

```
$('select.styled2').change(function() {

     var id = this.value;

            $.ajax({
              type: "GET",
              url: 'index.php?act=manufacturerHome&id='+id,
              success: function(data) {

                $("#manufacturer_"+id).html(data);
              }
            });

     $("#manufacturer_"+id).css('visibility','visible');
     $("#manufacturer_"+id).toggle("slow");

}); 
```

它不会切换它。如果我尝试：

```
 $("#manufacturer_"+id).css('display','block'); 
```

而不是切换 - 它有效。

如果我只是切换它可以工作的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:08:04.350

你真的应该这样做：

```
$('select.styled2').change(function() {
    var id = this.value;

    $.ajax({
        type: "GET",
        url: 'index.php?act=manufacturerHome&id='+id,
        success: function(data) {
            $("#manufacturer_"+id).html(data);
            $("#manufacturer_"+id).css('visibility','visible');
            $("#manufacturer_"+id).toggle("slow");
        }
    });
}); 
```

在您的代码中，无论 ajax 调用是否完成，都会显示该元素，而这只会在 ajax 调用成功后显示该元素。

顺便说一句，您不需要同时使用`display: none`和`visibility: hidden`。就`display: none`足够了，然后你就可以摆脱`$("#manufacturer_"+id).css('visibility','visible');`.

# flash - 在 AS3 和 AIR 中创建文档类

> ID：14161432
> 
> 赞同：0
> 
> 时间：2013-01-04T16:59:17.213
> 
> 标签：flash, class, air, document

基本上，我正在开发一个最终将作为 AIR 应用程序部署到桌面的应用程序。

我想创建一个带有按钮的模拟时钟和数字时钟，按下时可以在两者之间切换显示。除此之外，我还想在下面显示日期，但是我遇到了很多问题。

我已经为四个组件中的三个组件排序了代码，到目前为止我还没有尝试找出按钮，因为我非常乐意将数字时钟、模拟时钟和日期都显示在拖放桌面应用程序上第一的。当我说我已经整理好它时，我有一个完全可以工作的模拟时钟，我已经设法通过空气在桌面上显示它的寂寞，但是，我没有包括拖放功能。对于数字时钟和日期组件，我不确定如何将它们配置到文档类中。我遇到的主要问题是我不知道您是否可以将影片剪辑中的动态文本框引用到文档类。

这是显示日期的代码

```
{
var currentTime:Date = new Date();
var month:Array = new Array("January","February","March","April","May","June","July","August","September","October","November","December");
var dayOfWeek:Array = new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday");
date_text.text = dayOfWeek[currentTime.getDay()] + " " + currentTime.getDate() + " " + month[currentTime.getMonth()] + " " + currentTime.getFullYear();
} 
```

我已将动作脚本框架放入影片剪辑文件中，并为影片剪辑和影片剪辑中的动态文本框指定了实例名称“date_text”。基本上，我只是在如何将这段代码放入工作文档类中苦苦挣扎，因为数字时钟和日期功能都是相似的，我觉得解决方案很可能会导致我发现解决方案其他。

我遇到的另一个问题是，我不知道如何在一个空中应用程序上显示所有组件。我假设，您创建了另一个将其他四个链接在一起的文档类文件？我试图通过将一个新的 FLA 文件与模拟时钟链接来做到这一点，但它不起作用。代码如下。

```
 package
{
import flash.events.Event;
import flash.display.MovieClip;

public class time1 extends MovieClip
{

    public var now:Date;
    public function time1()
    {
        // Update screen every frame
        addEventListener(Event.ENTER_FRAME,enterFrameHandler);
    }
    // Event Handling:

    function enterFrameHandler(event:Event):void
    {
        now = new Date();

        // Rotate clock hands
        hourHand_mc.rotation = now.getHours()*30+(now.getMinutes()/2);
        minuteHand_mc.rotation = now.getMinutes()*6+(now.getSeconds()/10);
        secondHand_mc.rotation = now.getSeconds()*6;
    }
}
 } 
```

那是原始时钟文档类（移动指针的 3 个电影剪辑，钟面是图形，我可能必须在下面以某种方式引用）？

```
 package 
 {

import flash.display.MovieClip;

public class main extends MovieClip
{
    public var hourHand_mc:time1;
    public var minuteHand_mc:time1;
    public var secondHand_mc:time1;

    public function main()
    {
        hourHand_mc = new SecondHand();
        addChild(mySecondHand);
        hourHand_mc.x = 75;
        hourHand_mc.y = 75;
        minuteHand_mc = new SecondHand();
        addChild(mySecondHand);
        minuteHand_mc.x = 75;
        minuteHand_mc.y = 75;
        secondHand_mc = new SecondHand();
        addChild(mySecondHand);
        secondHand.x = 75;
        secondHand.y = 75;
    }
}

 } 
```

这是我尝试在单独的 FLA 文件中创建主文档类以尝试加载模拟时钟，然后在同一 AIR 应用程序中加载数字时钟、日期功能和切换显示按钮。

对此的任何帮助都非常感谢，我通过教程等阅读了很多关于它的内容，但我似乎无法完全掌握它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T09:42:37.797

我已经为影片剪辑和影片剪辑中的动态文本框指定了实例名称`date_text`。

请使用单独的名称命名影片剪辑，然后使用它来引用其中的文本字段。例如，您可以将影片剪辑符号命名为 date_text_MC，然后使用`date_text_MC.date_text`（注意点运算符）引用文本字段

那应该可以解决您的第一个问题。

# .net - WinRT 的 System.Net.Http.HttpClient 命名空间中 System.Net.WebClient.UploadString 的替代方法是什么？

> ID：14161433
> 
> 赞同：1
> 
> 时间：2013-01-04T16:59:18.530
> 
> 标签：.net, network-programming, windows-runtime, httpclient, webclient

我正在将应用程序从 WPF 移植到 Windows 8 应用程序。

我想知道`System.Net.WebClient.UploadString`在`System.Net.Http.HttpClient`命名空间中是否有类似的功能（因为`System.Net.WebClient`在 中不可用`WinRT`）如果是，非常感谢一个例子！如果没有，还有其他选择吗？

在旁注中，我能够在Morten Nielsen 的帮助下转换`WebClient.DownloadString`为等效的 using命名空间[http://www.sharpgis.net/post/2011/10/05/WinRT-vs-Silverlight-Part-7-制作-WebRequests.aspx](http://www.sharpgis.net/post/2011/10/05/WinRT-vs-Silverlight-Part-7-Making-WebRequests.aspx)`System.Net.Http.HttpClient`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:06:16.873

是的，你会使用[`PostAsync`方法](http://msdn.microsoft.com/en-us/library/hh138242.aspx)。

该方法采用一个[`Uri`](http://msdn.microsoft.com/en-us/library/system.uri.aspx)或一个字符串（就像 WebClient 类中的[`UploadString`方法](http://msdn.microsoft.com/en-us/library/system.net.webclient.uploadstring.aspx)一样）以及一个[`HttpContent`实例](http://msdn.microsoft.com/en-us/library/system.net.http.httpcontent.aspx)。

该`HttpContent`实例旨在与不同类型的内容无关，允许您不仅指定提供内容的机制（[`ByteArrayContent`](http://msdn.microsoft.com/en-us/library/system.net.http.bytearraycontent.aspx)对于字节数组，对于 a 的[StreamContent](http://msdn.microsoft.com/en-us/library/system.net.http.streamcontent.aspx)[`Stream`](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx)等），而且还指定结构（MultipartFormDataContent）。

也就是说，还有一个[`StringContent`类](http://msdn.microsoft.com/en-us/library/system.net.http.stringcontent.aspx)会发送字符串，如下所示：

// 内容。string post = "您要发布的内容";

```
// The client.
using (client = new HttpClient());
{
    // Post.
    // Let's assume you're in an async method.
    HttpResponseMessage response = await client.Post(
        "http://yourdomain/post", new StringContent(post));

    // Do something with the response.
} 
```

如果你需要指定一个[`Encoding`](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)，[有一个构造函数接受一个`Encoding`](http://msdn.microsoft.com/en-us/library/hh158992.aspx)，你可以像这样使用它：

```
// The client.
using (client = new HttpClient());
{
    // Post.
    // Let's assume you're in an async method.
    HttpResponseMessage response = await client.Post(
        "http://yourdomain/post", new StringContent(post),
         Encoding.ASCII);

    // Do something with the response.
} 
```

从那里开始，在发送响应时处理[`HttpResponseMessage`](http://msdn.microsoft.com/en-us/library/system.net.http.httpresponsemessage.aspx)（如果这对您很重要，如果它不是单向操作）。

# c# - OracleClient 和 C# 4.0 的溢出错误

> ID：14161434
> 
> 赞同：0
> 
> 时间：2013-01-04T16:59:19.917
> 
> 标签：c#, .net, c#-4.0, oracle10g, system.data.oracleclient

我正在使用 Visual Studio 2010、Oracle 数据库 10g 和库 System.Data.OracleClient。我的问题是当我想在 batabase 中执行程序时，我得到一个溢出错误。我正在阅读并说我需要 ROUND 或 TRUNCT 数字，因为它太大了。但我无权访问数据库来更改程序。我得到的值来自带有 Out Direction 的 OracleParameter。你知道我该如何解决这个问题吗？

```
objCommand.Connection = objConnection;
objCommand.CommandText = "Procedure_name";
objCommand.CommandType = CommandType.StoredProcedure;
objCommand.Parameters.AddRange(parameters); //parameters is a OracleParameter array. I fill it previously.

objConnection.Open();
objCommand.ExecuteNonQuery(); //Here throw the exception 
```

PS：程序在 PL/SQL 中完美运行，最大数量。数字是“1.66529411764706”；

PS2：同样，我没有更改程序的权限。我需要在 Visual Studio 中修复此错误。

PS3：错误是OCI-22053：溢出错误。这就是我从错误中得到的全部:(

谢谢！

```
parameters[0] = CreateParameter(PC_COD_CU, OracleType.VarChar, codCu);
parameters[1] = CreateParameter(PC_COD_EM, OracleType.VarChar, codEm);
parameters[2] = CreateParameter(PN_SACIC, OracleType.Number, ParameterDirection.Output);
parameters[3] = CreateParameter(PN_SAVSF, OracleType.Number, ParameterDirection.Output);
parameters[4] = CreateParameter(PN_MTO_B, OracleType.Number, ParameterDirection.Output);
parameters[5] = CreateParameter(PN_ULT_REM, OracleType.Number, ParameterDirection.Output);
parameters[6] = CreateParameter(PN_AVG_REM, OracleType.Number, ParameterDirection.Output);
parameters[7] = CreateParameter(PN_TO_SEG, OracleType.Number, ParameterDirection.Output);
parameters[8] = CreateParameter(PN_TA_APL, OracleType.Number, ParameterDirection.Output);
parameters[9] = CreateParameter(PN_TA_D, OracleType.Number, ParameterDirection.Output);
parameters[10] = CreateParameter(PN_DEV_ULT, OracleType.Number, ParameterDirection.Output);
parameters[11] = CreateParameter(PC_TO_F_OBL, OracleType.VarChar, ParameterDirection.Output);
parameters[12] = CreateParameter(PC_TO_F_VCF, OracleType.VarChar, ParameterDirection.Output);
parameters[13] = CreateParameter(PC_TO_F_VSF, OracleType.VarChar, ParameterDirection.Output);
parameters[14] = CreateParameter(PN_RA_MIN_VIG, OracleType.Number, ParameterDirection.Output);
parameters[15] = CreateParameter(PC_PE_MIN_SPP, OracleType.VarChar, ParameterDirection.Output);
parameters[16] = CreateParameter(PC_IND_CON_RES, OracleType.VarChar, ParameterDirection.Output);
parameters[17] = CreateParameter(PC_NUM_RES, OracleType.VarChar, ParameterDirection.Output);
parameters[18] = CreateParameter(PN_VA_NO_RES, OracleType.Number, ParameterDirection.Output);
parameters[19] = CreateParameter(PC_ME, OracleType.VarChar, ParameterDirection.Output);
parameters[20] = CreateParameter(PN_GA_SEP, OracleType.Number, ParameterDirection.Output);
parameters[21] = CreateParameter(PC_TO_TRA, OracleType.VarChar, ParameterDirection.Output);
parameters[22] = CreateParameter(PC_TO_BO, OracleType.VarChar, ParameterDirection.Output);
parameters[23] = CreateParameter(PN_PSEG_NO_D_MIN, OracleType.Number, ParameterDirection.Output);
parameters[24] = CreateParameter(PN_PSEG_NO_D_AVG, OracleType.Number, ParameterDirection.Output);
parameters[25] = CreateParameter(PN_PSEG_AJU_S_MIN, OracleType.Number, ParameterDirection.Output);
parameters[26] = CreateParameter(PN_PSEG_AJU_S_AVG, OracleType.Number, ParameterDirection.Output);
parameters[27] = CreateParameter(PN_PSEG_AJU_D_MIN, OracleType.Number, ParameterDirection.Output);
parameters[28] = CreateParameter(PN_PSEG_AJU_D_AVG, OracleType.Number, ParameterDirection.Output);
parameters[29] = CreateParameter(PN_PAJU_AU_S, OracleType.Number, ParameterDirection.Output);
parameters[30] = CreateParameter(PN_PAJU_AU_D, OracleType.Number, ParameterDirection.Output);
parameters[31] = CreateParameter(PN_PRP, OracleType.Number, ParameterDirection.Output);
parameters[32] = CreateParameter(PN_PJAN, OracleType.Number, ParameterDirection.Output);
parameters[33] = CreateParameter(PN_MON_TO_CAM, OracleType.Number, ParameterDirection.Output);
parameters[34] = CreateParameter(RETURN_VALUE, OracleType.Number, ParameterDirection.ReturnValue); 
```

所有参数名称都是先前设置的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:42:15.423

如果您可以确定哪个输出参数是问题，您可以尝试这个 hack。不是直接从 ADO.net 调用 SP，而是执行一条 SQL 语句，该语句包含一个调用 SP 的匿名 PL/SQL 块，并带有一个函数来修改输出参数（trunc、round 或 cast）。示例查询：

“BEGIN PROCEDURE_NAME(?,?,?,TRUNC(?),?,?); END;”

# javascript - 使用 Dojo (1.6) 操作 iFrame HTML

> ID：14161436
> 
> 赞同：0
> 
> 时间：2013-01-04T16:59:25.020
> 
> 标签：javascript, iframe, dojo

我一直在享受 dojo 和操作 HTML（主要是添加节点）。我的问题是我使用的是 dojo 1.6（由于公司内部的政治 IT 原因，我还不能升级到更新的版本）。

我的问题是这个..（我真的把它简化为基本问题）我有一个母版页，里面有一个 iframe。iframe 中的页面中有几个输入字段，我需要根据需要克隆其他输入字段。所有这些我都知道该怎么做，如果我在同一个页面中做，但我在 iFrame 内操作节点的经验是不存在的。

谁能指出我从母版页操作 iframe HTML 的 dojo 示例？任何线索将不胜感激。如果我有一个简单的示例，例如如何从母版页向 iFrame 页面添加 div，我会非常激动，这可能会让我滚动。

我将继续我的研究并更新它。我什至还没有遇到过一个例子，通常我的 Google-Fu 很好。非常感谢任何人都可以指出我的任何线索。

# jquery - 内容更改时jQuery函数不起作用

> ID：14161438
> 
> 赞同：0
> 
> 时间：2013-01-04T16:59:46.890
> 
> 标签：jquery, html, sorting, append, live

我正在使用这个函数来在元素中添加一个 div，

```
(function() {
        $('.p-item').append('<div class="p-info-wrap"></div>)';
}) (); 
```

我还在同一页面中有一个使用“quicksand”插件的可过滤画廊。在画廊内，我有上面提到的类（p-item）的元素。当我对画廊进行排序时，内容正在发生变化，并且附加的 div 上方突然消失了。

帮助我保持 div 活着，即使画廊已排序。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:05:13.750

在排序过程结束时调用此函数

```
function addDiv() {
  $('.p-item').append('<div class="p-info-wrap"></div>)';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:13:29.087

我不知道流沙是否提供了诸如排序后事件之类的任何钩子，但这是一种可以解决此问题的通用方法：

```
var doMod = true;
$('#tree')[0].addEventListener('DOMSubtreeModified', function() {
    if (!doMod) { return; }
    doMod = false; // Supress handling of subtree event
    $('#tree').append('foo');    
    doMod = true; // Restore the doMod flag
});

$('#tree').html('<p>New content</p>'); 
```

示例：http: [//jsfiddle.net/8dUSJ/](http://jsfiddle.net/8dUSJ/)

不过，“DOMSubtreeModified”事件已被弃用，它应该被[Mutation 观察者](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)所取代。我对后者了解不多，所以请参阅文档。它似乎有可疑的浏览器支持。

编辑：

只是为了让我们清楚这一点：上述解决方案不会让 DIV 保持“活动”。它只允许您在排序后阅读它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:29:47.553

您的代码末尾有问题`append()`，您有一个`'`外部而不是内部`append()`。

```
(function() {
    $('.p-item').append('<div class="p-info-wrap"></div>)';
})();        //------------------------------------------^-----here is the issue. 
```

试试这个：http: **[//jsfiddle.net/T8VC4/](http://jsfiddle.net/T8VC4/)**

```
(function() {
    $('.p-item').append('<div class="p-info-wrap"></div>');
})(); 
```

# socket.io - socket.io 使用安全吗？

> ID：14161439
> 
> 赞同：3
> 
> 时间：2013-01-04T16:59:47.820
> 
> 标签：socket.io

我正在考虑开始学习node.js和socket.io，但我首先有一个问题。socket.io 一开始就可以安全使用吗？来自 socket.io 网站的一个例子：

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost');
  socket.on('news', function (data) {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script> 
```

查看代码，似乎使用像firebug这样的标准工具，您可以轻松更改发送到服务器的数据，如果我想创建一个多人游戏，这将成为一个问题，因为我将传递数据不应修改，例如：项目索引、怪物索引等。

对不起，如果我听起来很愚蠢，因为我还没有开始学习 socket.io。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-01T16:58:45.350

正如@SLaks 所说，不可能验证客户端没有修改他们的数据。因此，需要在任何事务中进行服务器验证。最好只在服务器上进行大多数游戏计算。你是对的，使用 Javascript 更容易让潜在的作弊者利用游戏，因为他们可以按 F12 并开始黑客攻击。常规游戏要复杂得多，但仍然很有可能。保护自己免受不聪明黑客攻击的一种方法是缩小游戏的 JS 代码。

# jquery - 从 svg 字符串中删除元素

> ID：14161448
> 
> 赞同：0
> 
> 时间：2013-01-04T17:00:24.397
> 
> 标签：jquery, string, svg

我有一个 svg 字符串`str="<svg....</svg>"`：

```
<svg width="612" height="394" xmlns="http://www.w3.org/2000/svg">
 <g>
  <title>Layer 1</title>
  <rect id="svg_1" height="100" width="77" y="49.25" x="16.75" stroke-width="5" stroke="#000000" fill="#FF0000"/>
  <rect id="svg_2" height="127" width="160" y="176.25" x="343.75" stroke-width="5" stroke="#000000" fill="#FF0000"/>
 </g>
 <g>
  <title>Layer 2</title>
  <rect id="svg_3" height="112" width="174" y="28.25" x="194.75" stroke-width="5" stroke="#000000" fill="#FF0000"/>
  <text transform="matrix(1, 0, 0, 1.07143, 0, -8.80357)" xml:space="preserve" text-anchor="middle" font-family="serif" font-size="24" id="svg_4" y="94.85" x="281.75" stroke-width="0" stroke="#000000" fill="#000000">Hello</text>
  <rect id="svg_5" height="92" width="103" y="20.25" x="422.75" stroke-width="2" stroke="#ff9900" fill="#0000ff"/>
 </g>
</svg> 
```

我想获得其他字符串但没有元素。如何从第二层删除文本元素？我已经尝试过`var fstr = $(str).wrapAll('<div>').find('g:eq(1) text:eq(0)').remove().closest('div').html();`，但它不起作用。有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:43:18.773

要返回 SVG 字符串，您需要使用[`XMLSerializer`（或相应的等价物）](https://stackoverflow.com/questions/4916327/javascript-replacement-for-xmlserializer-serializetostring)：

```
var svg = $(str);
svg.children('g:eq(1)').children('text:first').remove();

function serializeXMLNode(xmlNode) {
    if (typeof window.XMLSerializer != "undefined") {
        return (new window.XMLSerializer()).serializeToString(xmlNode);
    } else if (typeof xmlNode.xml != "undefined") {
        return xmlNode.xml;
    }
    return "";
}

var strUpdated = serializeXMLNode(svg[0]);
console.log(strUpdated); 
```

[小提琴演示](http://jsfiddle.net/SbCVr/)

# google-chrome - How to selectively refresh a resource (ie. javascript source) from Chrome/Chromium Developer Tools without reloading the whole webpage

> ID：14161450
> 
> 赞同：2
> 
> 时间：2013-01-04T17:00:47.320
> 
> 标签：google-chrome, web, chromium

For debug purposes, I need to refresh only a part of a webpage (ie. javascript sources).

The only partial solution I found is, where jQuery is already present, to use a shorthand function from jQuery framework: [jQuery.getScript()](http://api.jquery.com/jQuery.getScript/)

From Chromium Developer Tools' Console typing:

```
$.getScript('http://resource_to_refresh.js'); 
```

But in this way, the scripts tab is not updated.

What is the best way to do it?

Thanks

# android - 有没有办法在 Android 中创建一个全面的弧线？

> ID：14161454
> 
> 赞同：0
> 
> 时间：2013-01-04T17:00:54.520
> 
> 标签：android, graphics, 2d, geometry

目前我能够创建一个静态弧

例如：

```
ShapeDrawable progressArc = new ShapeDrawable(new ArcShape(90, 12));
    progressArc.setIntrinsicHeight(100);
    progressArc.setIntrinsicWidth(100);
    progressArc.getPaint().setColor(Color.RED);
    ImageView iView = (ImageView) findViewById(R.id.background_circle);
    iView.setImageDrawable(progressArc); 
```

其中 background_circle 是在其中创建圆弧的 imageView。但是，当我尝试通过将所有内容放在一个循环中来为 ArchShape 的第二个参数提供动态值时，它只会呈现最后一个实例。我还尝试让线程休眠，但没有看到任何较早的实例正在呈现。

```
int i=0;

    while(i<12)
    {
    ShapeDrawable progressArc = new ShapeDrawable(new ArcShape(90, i*12));
    progressArc.setIntrinsicHeight(100);
    progressArc.setIntrinsicWidth(100);
    progressArc.getPaint().setColor(Color.RED);
    ImageView iView = (ImageView) findViewById(R.id.background_circle);
    iView.setImageDrawable(progressArc);

    i++;
    } 
```

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:29:25.723

希望这对其他人有帮助：

```
Handler handler = new Handler(); 
        while(i<30)
        {
            i++;
            handler.postDelayed(new Runnable()
            { 
                public void run() 
                {  

                    ShapeDrawable progressArc = new ShapeDrawable(new ArcShape(0, 12*i));
                    progressArc.setIntrinsicHeight(5);
                    progressArc.setIntrinsicWidth(5);
                    progressArc.getPaint().setColor(Color.BLUE);
                    iView = (ImageView) findViewById(R.id.background_circle);
                    iView.setImageDrawable(progressArc);

                    i++;
                }
            }, 1000*i);

        } 
```

如果有人有更有效的解决方案，请告诉我。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:22:43.433

您正在一个紧密的循环中执行此操作。当您设置 ImageView 的图像可绘制时，会在 UI 线程队列中放置一条消息以重绘 ImageView。

但是，由于您的循环没有给 UI 线程足够的时间来处理它的队列，因此更新将在您的循环完成后的某个时间发生。因此，您只会看到最后一个。

有几种方法可以做到这一点，但最简单的可能是在可运行文件中绘制你的弧，并使用计时器来绘制每次扫描，比如每 10 毫秒或任何看起来平滑的东西。

# android - Show status bar notification even after application is killed in Android

> ID：14161458
> 
> 赞同：2
> 
> 时间：2013-01-04T17:01:12.520
> 
> 标签：android, notifications, alarmmanager, kill

I have to make a different kind of notification in my application. The notifications should be shown even if the application is killed from the task manager. The notifications should be stacked one after the another. The existing notification code which I am using is given below.

This is the class for creating the notification:

```
public class TimeAlarm extends BroadcastReceiver {

     NotificationManager nm;

     @Override
     public void onReceive(Context context, Intent intent) {
      nm = (NotificationManager) context
        .getSystemService(Context.NOTIFICATION_SERVICE);
      CharSequence from = "Scheduled Training";
      CharSequence message = "Please attend the scheduled training";

      PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
        new Intent(), 0);
      Notification notif = new Notification(R.drawable.ic_launcher,
        "Scheduled Training", System.currentTimeMillis());
      notif.setLatestEventInfo(context, from, message, contentIntent);
      nm.notify(1, notif);
     }
    } 
```

This is the code I am using in the activity to create the notifications:

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

  duration=(EditText)findViewById(R.id.duration_editText);
        dateAndTimeLabel=(TextView)findViewById(R.id.timeTxt);

        updateLabel();
        updateNotification();
        am = (AlarmManager) getSystemService(Context.ALARM_SERVICE);

     // On Click Confirm

            confirm=(ImageView)findViewById(R.id.confirm_imageView);
            confirm.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    getDateTime();
                     count++;
                   setOneTimeAlarm();
                }
            });

      }

     public void setOneTimeAlarm() {
    Calendar calendar = Calendar.getInstance();
    calendar.set(Calendar.HOUR_OF_DAY, hour);
             calendar.set(Calendar.MINUTE, minute);
             calendar.set(Calendar.SECOND, 0);

          Intent intent = new Intent(this, TimeAlarm.class);
          PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0,
            intent,count);
          am.set(AlarmManager.RTC_WAKEUP,
           calendar.getTimeInMillis(), pendingIntent);
         }

    void updateNotification()
          {
              hour= dateAndTime.get(Calendar.HOUR_OF_DAY);
              minute=dateAndTime.get(Calendar.MINUTE);
          } 
```

This is not helping me achieve my goal. What should I do? I want to create kind of notification you can find in Ice Age village game.

# javascript - Disable shadowbox default loading image

> ID：14161459
> 
> 赞同：0
> 
> 时间：2013-01-04T17:01:21.417
> 
> 标签：javascript, jquery, shadowbox

Is there any way where I can disable shadowbox default loading image. We need to show our company loading image only. Right now, it shows shadowbox loading image and then our loading image.

```
Shadowbox.open({
 content:$("#load_image").html(),
 player:'html',
 width:250,
 height:100,
 options:{modal:true}
}); 
```

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:58:35.017

修改css的建议还不错。

仅将另一个图像应用于特定链接并不是很困难。

为您希望在 Shadowbox 中包含公司徽标的链接提供一个特殊的类名（我将`"foo"`在此示例中使用）

使用它来初始化 Shadowbox：

```
Shadowbox.init(
                {
                  onOpen:function(){
                            if($(Shadowbox.gallery[Shadowbox.current].link)
                                .hasClass('foo')){
                                  $('html').addClass('foo');
                                }
                         },
                  onClose:function(){$('html').removeClass('foo');}
                         }
              ); 
```

它将检查单击的链接是否具有特殊的 className `foo`。当它这样做时，它将这个 className 添加到`<html>`-element。

现在，您可以使用选择器将不同的图像作为加载图像应用于这些特定链接：

```
html.foo #sb-loading-inner span 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:31:45.180

如果我正确理解您的问题，您可以通过在 shadowbox.css 中更改 css 样式来更改显示的图像，或者为元素覆盖它`#sb-loading-inner span`

这是一个示例小提琴：http: [//jsfiddle.net/qrMsL/1/](http://jsfiddle.net/qrMsL/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:25:20.167

要自定义 ShadowBox 预加载图像，请编辑`background`以下行中的属性`shadowbox.css`：

```
#sb-loading-inner span{background:url(loading.gif) no-repeat;padding-left:34px;display:inline-block;} 
```

# javascript - 如何在 javascript 或 jquery 中获取工作文件夹的物理路径？

> ID：14161460
> 
> 赞同：0
> 
> 时间：2013-01-04T17:01:21.960
> 
> 标签：javascript, jquery, asp.net, ashx

如何在 jscript 或 jquery 中获取工作文件夹的物理路径？

我需要的是选择下拉目或者单击一个按钮时，我需要获取工作文件夹的完整路径。

前任：

```
var x="path" here x should be  x=E:/projects/projectname/xyz.aspx. 
```

我不想要当前文档的 url，我想要完整的路径，这样我就可以生成新的 aspx 页面并动态放置在该文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:14:03.153

我想你正在寻找这样的东西：

```
var x = ('<%=HttpUtility.JavaScriptStringEncode(Server.MapPath(Request.Url.LocalPath))%>'); 
```

现在，在我看来，除了有风险之外，我还不清楚客户端的信息有多大用处……

在我的电脑上，如果我这样做，它会打印`console.log(x)`：

```
\\company\home_drives$\rsanchez\visual studio 2012\Projects\test\test\Default.aspx 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:19:01.257

浏览器在沙箱中运行，这意味着禁止客户端脚本访问文件系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:11:39.163

您需要收集服务器上的所有物理路径，并将它们传递给客户端。如果您想要整个文件夹结构，则必须将其传递给客户端并构建文件夹结构。

我假设您指的是托管公司可能使用的文件管理器之类的东西。

# android - 如何从另一个应用程序启动一个新应用程序？

> ID：14161462
> 
> 赞同：-6
> 
> 时间：2013-01-04T17:01:24.993
> 
> 标签：android

我想在应用程序中单击按钮时启动另一个应用程序。
如何做到这一点？
如果设备中没有安装另一个应用程序，那么它将从给定的 Uri 下载该应用程序。怎么做？那么如何设置 CONTENT URI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:03:54.217

此代码将启动条码扫描仪应用程序的活动：

```
try {
    Intent intent = new Intent("com.google.zxing.client.android.SCAN");
    intent.putExtra("SCAN_MODE", "QR_CODE_MODE"); //this line is optional, you can pass extra information to the app with this code
    startActivityForResult(intent, 0);
} catch (Exception e) {
    Uri marketUri = Uri.parse("market://details?id=com.google.zxing.client.android");
    Intent marketIntent = new Intent(Intent.ACTION_VIEW,marketUri);
    startActivity(marketIntent);
} 
```

您可以使用以下代码启动一个新 Activity：

```
Intent i = new Intent(MainActivity.this, MakeKey.class);
startActivity(i);
finish(); 
```

MainActivity 是当前 Activity，MakeKey.class 是目标 Activity，只需编辑这段代码。

# c++ - QtCreator and Clang

> ID：14161467
> 
> 赞同：2
> 
> 时间：2013-01-04T17:01:56.033
> 
> 标签：c++, qt-creator, clang

I am trying to use QtCreator and Clang but mostly I don't get any error messages.

if I write

```
// To provoke an error message
int test(){
    return "hi";
} 
```

Qt prints me the following

```
D:\Qt\qtcreator-2.6.1\bin\CTest\main.cpp:-1: In function 'int test()':
:-1: error: [debug/main.o] Error 1 File not found 
```

I compiled clang by myself and it I get working binaries, just no error messages. I selected the Clang compiler in QtCreator with clang.exe.

# android - Android 模拟器在 MacBook Pro 视网膜显示屏上崩溃

> ID：14161475
> 
> 赞同：1
> 
> 时间：2013-01-04T17:02:34.370
> 
> 标签：android, android-emulator

我刚刚在我的 MacBook Pro 上的 Eclipse Juno 中安装了 Android SDK (4.2)，并试图通过学习一些教程来开始。但是当我使用 Galaxy Nexus 模拟器（选择 ARM CPU）时，它第一次工作。但是当我重新打开 Eclipse 以对项目进行一些更改时，我只是得到一个很大的崩溃日志，并且没有任何反应。我发现让它再次运行的唯一方法是从 ~/.android/avd 的命令行中删除模拟器，然后重新创建它。但这显然是不对的，也不应该是必要的。有任何想法吗？PS：这不是[Android Emulator 中讨论的问题，对于配备 Retina 显示屏的 Mac Book Pro 无法缩放到 100%](https://stackoverflow.com/questions/11213037/android-emulator-do-not-scale-to-100-for-mac-book-pro-with-retina-display)因为模拟器是全尺寸的，第一次启动时可以正常工作，但下次我打开 Eclipse 并尝试启动它时就完全不能工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:13:39.130

如果您在两个屏幕上运行，您可能会遇到这个问题，[Android VM 在 Launch Mac 上崩溃](https://stackoverflow.com/questions/13654656/android-vm-crashes-on-launch-mac)。我经常让我的模拟器在启动时崩溃，然后必须手动调整模拟器的 emulator-user.ini 文件以将 windows.x 和 windows.y 值设置为零。我怀疑这是因为我经常在一种和两种屏幕模式之间切换。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-03T07:24:31.687

这是一个特定的 MAC 问题，发生这种情况是因为您在 MAC 上运行了两个屏幕并将模拟器放在另一个窗口中。它保存了一些无法再次恢复窗口的值。所以这将在他们所说的新版本中更新，但尚未修复。要解决此问题，您需要通过转到您的文件夹来进行破解：

```
~/.android/avd/ 
```

根据您要运行的模拟器，进入*youremulator.avd*文件夹。如前所述，有一个文件称为

```
emulator-user.ini 
```

将 window.x 和 window.y 值更改为 0 并重新运行您的 java 程序。对我来说效果很好

# wordpress - How to display the images attached to a post inside the admin?

> ID：14161476
> 
> 赞同：3
> 
> 时间：2013-01-04T17:02:50.237
> 
> 标签：wordpress

Hello stackoverflow friends!

Hopefully somebody here can help me with this! I've looked all over the internet with no luck :(

What I want to do is somehow show the images attached to a post inside the WP admin. For example, the same way the post Featured Image shows. The only thing I found was how to display the number of attachments of a post in the admin columns but what I would like to see is thumbnails of all attached images inside each post in the post admin page. I think this will be very helpful since right now I cannot even tell which post has attachements.

I will like to accomplish this without using a plugin.

I have looked for days online with no luck. Any help will be greatly appreciated.

Thank you very much in advanced!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T17:46:28.710

解决方案是创建一个元框，然后将缩略图放在那里。这需要[add_meta_box()](http://codex.wordpress.org/Function_Reference/add_meta_box)函数和[wp_get_thumb_attachment_url()](http://codex.wordpress.org/Function_Reference/wp_get_attachment_thumb_url)。我们还需要找到某个帖子的所有附加图片，我们将在[这里](https://stackoverflow.com/questions/1815158/show-attached-image-to-post-on-wordpress)使用答案。

将所有这些放在一起，并假设 PHP 版本 >= 5.3 以便我们可以使用匿名函数，它看起来像这样：

```
add_action( 'add_meta_boxes', function() {
add_meta_box( 'att_thumb_display', 'Attachmed images', function( $post ) {
    $args = array(
        'post_type' => 'attachment',
        'post_mime_type' => 'image',
        'post_parent' => $post->ID
    );

    echo '<ul>';
    foreach( get_posts( $args ) as $image) {
        echo '<li><img src="' . wp_get_attachment_thumb_url( $image->ID ) . '" /></li>';
    }
    echo '</ul>';
}, 'post' );
}); 
```

`add_meta_box`我设置为“post”的参数表示此元框将在哪种帖子类型上可用。如果您希望它在页面上可用，则必须将其设置为页面。或者，如果您希望它可用于自定义帖子类型，您还必须相应地对其进行修改。

我希望这行得通。我没试过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T19:42:12.160

尝试这个 ：

```
 /* === Add Thumbnails to Posts/Pages List === */
if ( !function_exists('o99_add_thumbs_column_2_list') && function_exists('add_theme_support') ) {

    //  // set your post types , here it is post and page...
    add_theme_support('post-thumbnails', array( 'post', 'page' ) );

    function o99_add_thumbs_column_2_list($cols) {

        $cols['thumbnail'] = __('Thumbnail');

        return $cols;
    }

    function o99_add_thumbs_2_column($column_name, $post_id) {

            $w = (int) 60;
            $h = (int) 60;

            if ( 'thumbnail' == $column_name ) {
                // back comp x WP 2.9
                $thumbnail_id = get_post_meta( $post_id, '_thumbnail_id', true );
                // from gal
                $attachments = get_children( array('post_parent' => $post_id, 'post_type' => 'attachment', 'post_mime_type' => 'image') );
                if ($thumbnail_id)
                    $thumb = wp_get_attachment_image( $thumbnail_id, array($w, $h), true );
                elseif ($attachments) {
                    foreach ( $attachments as $attachment_id => $attachment ) {
                        $thumb = wp_get_attachment_image( $attachment_id, array($w, $h), true );
                    }
                }
                    if ( isset($thumb) && $thumb ) {
                        echo $thumb;
                    } else {
                        echo __('None');
                    }
            }
    }

    // for posts
    add_filter( 'manage_posts_columns', 'o99_add_thumbs_column_2_list' );
    add_action( 'manage_posts_custom_column', 'o99_add_thumbs_2_column', 10, 2 );

    // for pages
    add_filter( 'manage_pages_columns', 'o99_add_thumbs_column_2_list' );
    add_action( 'manage_pages_custom_column', 'o99_add_thumbs_2_column', 10, 2 );
} 
```

它会在管理帖子/页面列表中向您显示特色图像作为预览，如果您想在帖子本身中显示它 - 使用@Calle 建议：（在此处修改以工作）

```
add_action( 'add_meta_boxes', 'o99_add_attach_thumbs_meta_b' );

function o99_add_attach_thumbs_meta_b (){

add_meta_box ('att_thumb_display', 'Attached images','o99_render_attach_meta_b','post');

}

function o99_render_attach_meta_b( $post ) {
$output = '';
$args = array(
        'post_type' => 'attachment',
        'post_mime_type' => 'image',
        'post_parent' => $post->ID
    );
    //
    // uncomment if you want ordered list
    //
    // $output .= '<ul>';
     $images = get_posts( $args );
    foreach(  $images as $image) {
    //$output .= '<li>';
        $output .= '<img src="' . wp_get_attachment_thumb_url( $image->ID ) . '" />';
        //$output .= '</li>';
    }
   // $output .= '</ul>';
  echo $output;
} 
```

# html - Do html forms Use much cpu power?

> ID：14161478
> 
> 赞同：5
> 
> 时间：2013-01-04T17:03:03.827
> 
> 标签：html, css, forms

I'm going to have a page on my website that will have about 50 forms on it. Stacked in accordion CSS. Would this hurt users with slower computers?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T18:09:21.817

即使我不知道为什么你会在一个页面上需要 50 个表单，但拥有 50 个表单（假设 DOM 节点的平均数量），在呈现页面时将消耗微不足道的 CPU。

但是，如果在聚合中您的表单有大约一百万个 DOM 节点，您将能够在页面呈现时看到大量的 CPU 消耗。更重要的是，你在页面上使用 JavaScript 所做的事情，会增加更多的消耗。

在大多数情况下，您应该更关心内存使用情况。此外，如果您关心细节，请确保您遵循[有效的 HTML](http://validator.w3.org/)，有效地使用[CSS 选择器](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS)等。
为了优化渲染，[**这**](https://developers.google.com/speed/docs/best-practices/rendering)是一个良好实践列表。

此外，如果您使用大量 CSS 转换，它会消耗大量 CPU。

然而，最好的判断方法是自己测试。如果您使用的是 Chrome 浏览器，请务必留意 Chrome 任务管理器 ( `Shift`+ `Esc`)，并在重新加载页面或在页面上执行活动时关注 CPU 消耗。它还为您提供进程 ID，以防您想进一步调查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T17:30:23.540

一页50个表格不会增加你的CPU。但是，它会增加您的 html 文件的大小，从而增加下载大小。

它们还需要一些内存，但考虑到当今普通网络 PC 的平均规格，您无需担心客户端方面的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T18:02:27.113

我认为这不会伤害电脑速度较慢的人。不过要考虑的另一件事是，计算机速度较慢的人通常使用较旧的计算机，并且屏幕分辨率可能很小，这在当今时代似乎很奇怪，但可能禁用了 javascript（您提到了可能涉及 jquery 或 javascript 的手风琴） .

或者更糟糕的是，像 IE6 这样的旧浏览器。

不确定它如何“伤害他们”，但我会尝试尽可能使用干净紧凑的代码，以确保文件的下载时间不会太长。可以最小化和优化代码以更快地运行。尝试运行尽可能少的脚本或包含，以减少额外的连接和下载。如果您有翻转效果或只是基于颜色的 CSS 翻转，请保持图像更小更干净并使用 CSS 图像精灵。

您的 CPU 能力将用于服务器端，它应该能够输出 HTML 而不会引起问题。

# python - 在多个测试用例之间共享 selenium RemoteWebDriver 的单个实例

> ID：14161479
> 
> 赞同：0
> 
> 时间：2013-01-04T17:03:09.603
> 
> 标签：python, selenium, testcase

在多个测试用例之间共享一个 RemoteWebDriver 实例是否存在问题？如果不是，创建实例的最佳实践位置是什么？我正在使用 Python，所以我认为我的选项是模块级设置、测试用例类设置、测试用例实例设置（还有其他吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:28:37.060

共享单个 RemoteWebDriver 可能很危险，因为您的测试不再独立自包含。您必须小心清理浏览器状态等，并在之前的测试使浏览器崩溃的情况下从浏览器崩溃中恢复。如果您尝试跨多个线程、进程或机器进行分布的任何事情，您可能还会遇到更多问题。也就是说，您控制它的选项不依赖于 Selenium 本身，而是您用来驱动它的任何代码或框架。至少对于 Nose，我认为是基本的 pyunit，您可以在类、模块或包级别设置例程，并且可以将它们配置为针对每个测试、每个类、每个模块或每个包运行（如果有记忆的话） .

# c# - DataContract Parent reference in child property - how to avoid infinite serialization loop

> ID：14161484
> 
> 赞同：2
> 
> 时间：2013-01-04T17:03:28.397
> 
> 标签：c#, .net, serialization, datacontract

In a WCF service, I have a situation where there is a datacontract (object) that contains a collection of child items (where the collection has a datamemeber attribute). The objects in the child collection have a reference to the parent as a property. If the parent object child collection is empty or contains a null parent reference, all is good, but if the parent reference is populated and parent children are populated, it serializes for ever.

Here's a set of test console code to show you what I'm talking about.

```
class Program
    {
        static void Main(string[] args)
        {

            MyParentObject parent = BuildParent();

            string xml = Serializer<MyParentObject>.Serialize(parent);

            System.Console.Write(xml);

            System.Console.ReadKey();

        }

        static MyParentObject BuildParent()
        {

            MyParentObject parent = new MyParentObject();
            parent.MyParentObjectId = 123;
            parent.MyParentObjectName = "Test Parent Object";
            parent.MyChildren = new List<MyChildObject>();

            for (int i = 0; i < 10; i++)
            {
                MyChildObject child = new MyChildObject();
                child.MyParent = parent;
                child.MyChildObjectId = i;
                child.MyChildObjectName = string.Format("Test Child Name {0}", i.ToString());
                parent.MyChildren.Add(child);
            }

            return parent;

        }

    }

    [DataContract]
    public class MyParentObject
    {

        [DataMember]
        public int MyParentObjectId { get; set; }

        [DataMember]
        public string MyParentObjectName { get; set; }

        [DataMember]
        public List<MyChildObject> MyChildren { get; set; }

    }

    [DataContract]
    public class MyChildObject
    {
        [DataMember]
        public MyParentObject MyParent { get; set; }

        [DataMember]
        public int MyChildObjectId { get; set; }

        [DataMember]
        public string MyChildObjectName { get; set; }

    }

public class Serializer<T>
    {

        public static string Serialize(T entity)
        {

            StringBuilder sb = new StringBuilder();

            DataContractSerializer dcs = new DataContractSerializer(typeof(T));

            using (XmlWriter writer = XmlWriter.Create(sb))
            {

                dcs.WriteObject(writer, entity);
                writer.Flush();
            }

            return sb.ToString();
        }

    } 
```

Other than clearing out child/parent references that cause this infinite serialization loop, are there any ways around this?

EDIT: I know I can just remove the datamember attribute, but I'd like to keep it, and simply not serialize infinitely.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:08:31.330

尝试在 DataContract 属性中使用 IsReference 属性

```
[DataContract(IsReference = true)] 
```

# mysql - Mysql Phpmyadmin overhead

> ID：14161488
> 
> 赞同：0
> 
> 时间：2013-01-04T17:03:37.617
> 
> 标签：mysql, phpmyadmin

> **Possible Duplicate:**
> [In MySQL what does “Overhead” mean, what is bad about it, and how to fix it?](https://stackoverflow.com/questions/565997/in-mysql-what-does-overhead-mean-what-is-bad-about-it-and-how-to-fix-it)

![enter image description here](../Images/bee0a5524c5f32a6c199167e200f2e32.png)

Hi experts,

As you can see there is an overhead warning.The table is actually contain no data at all..

I keep getting this warning so often..I wonder is mysql really overhead or it just phpMyadmin thinggy..

Sure when i optimize the table, the overhead warning is gone..But after some insertion and deletion (u know during develope some feature), the overhead warning will show up again.

Im really curious why is this happening..Any insight is greatly appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:28:05.857

PHPmyAdmin 可能会比较您的数据使用量和开销，现在它认为该表是 100% 开销。它在技术上是正确的，因为它是空的，但这并不意味着它有什么可担心的。

# matlab - xlsx写入函数，从matlab导入数据到excel不工作，丢失数据

> ID：14161496
> 
> 赞同：1
> 
> 时间：2013-01-04T17:04:04.530
> 
> 标签：matlab, import, xlsx

我无法从 matlab 将数据导入 xlsx 文件。当我写

```
sample = [1;2;3;4] <br/> <br/>
A = {'Title'; sample};

xlswrite(filename, A); 
```

我得到了显示在 excel 上的标题，但它下面没有列号。当我擦除花括号和字符串“操作点”（即 A = 样本）时，我确实得到了一列数字 1、2、3、4。但是，它不会让我在其下方添加带有数字的标题。谁能帮我弄清楚我做错了什么。我正在查看我在 mathworks 帮助页面上看到的示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:19:40.543

当您想将字符串和数字都写入 Excel 时，您需要编写一个元胞数组。重要的是，元胞数组的每个元素都被写入单个 Excel 单元格。在您的情况下，您将尝试将向量写入第二个单元格，但这是行不通的。

这是您想要执行的操作：

```
sample = [1;2;3;4]

%# transform sample to a cell array
%# with one number per element
sample = num2cell(sample); 

%# create header
header = {'Title'};

A = [header;sample];

xlswrite(filename, A); 
```

# audio - Steinberg 的 VST SDK Qs [获取帧数]

> ID：14161498
> 
> 赞同：2
> 
> 时间：2013-01-04T17:04:08.900
> 
> 标签：audio, vst

我一直在互联网上搜索以得到这个，但没有白费。

我正在使用 C++ 中的 Steinberg 的 VST SDK。我正在开发一个效果插件，我需要知道声音文件的长度，即其中的帧数。所以我从 processReplacing 函数中知道块大小或（sampleFrames）。

```
void processReplacing (float **inputs, float **outputs, VstInt32 sampleFrames) 
```

任何人都知道如何获得整个声音文件中的总帧数？

我在这里先向您的帮助表示感谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T17:18:27.133

我想你对 VST 效果插件的实现方式有误解。

一般来说，VST 是为实时音频处理而设置的，重复调用渲染函数，其值`sampleFrames`与系统的处理延迟有关，并且可能在 256 或更小的区域内。

实现时`processReplacing()`，您将处理结果写入 - 指向的缓冲区，这些缓冲区`outputs`由主机应用程序传递给您，并保证`sampleFrames`其中有空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T17:18:11.207

我认为这在效果上是不可能的。你有没有想过制作合成器而不是效果器？所以你可以提供你自己的样本。“processReplacing”只从主机应用程序中获取样本，这可能是一切（现场无尽的音乐，样本等）也许你必须重新考虑你的插件设计。

# xaml - WPF中ToolTip样式中DataTemplate的DataContext

> ID：14161504
> 
> 赞同：2
> 
> 时间：2013-01-04T17:04:33.797
> 
> 标签：xaml, styles, tooltip, datatemplate, datacontext

我似乎无法在 ToolTipStyle 样式中为 Grid 找到正确的 DataContext。只会出现一个空白的工具提示。

```
<Window.Resources>
    <DataTemplate x:Key="ListTemplate">
        <StackPanel>
            <Grid>
                <TextBlock Text="{Binding Path=Name}">
                    <TextBlock.ToolTip>
                        <ToolTip Style="{StaticResource ToolTipStyle}" />
                    </TextBlock.ToolTip>
                </TextBlock>
            </Grid>
        </StackPanel>
    </DataTemplate>

    <Style TargetType="ToolTip" x:Key="ToolTipStyle">
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Grid>
                        <TextBlock Text="{Binding Path=Description}" />
                    </Grid>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Windows.Resources>

<ListBox ItemTemplate="{StaticResource ListTemplate}" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T11:55:12.563

工具提示/弹出窗口似乎存在于可视化树之外。我看到很多人绑定到 PlacementTarget 属性以返回。

> DataContext="{绑定路径=PlacementTarget.DataContext，RelativeSource={RelativeSource Self}}"

```
<DataTemplate x:Key="ListTemplate">
    <StackPanel>
        <Grid>
            <TextBlock>
                <TextBlock.ToolTip>
                    <ToolTip DataContext="{Binding Path=PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}" Text="{Binding Path=Name}" Style="{StaticResource ToolTipStyle}" />
                </TextBlock.ToolTip>
            </TextBlock>
        </Grid>
    </StackPanel>
</DataTemplate> 
```

# batch-file - 查找和替换字符串的 DOS 批处理脚本正在添加空格

> ID：14161506
> 
> 赞同：1
> 
> 时间：2013-01-04T17:04:39.100
> 
> 标签：batch-file

我有这个 DOS 批处理脚本来查找/替换字符串值，但它在文件的每一行上添加空格。我试过修剪空格，但文件最终完全空白。

```
SETLOCAL ENABLEEXTENSIONS
SETLOCAL DISABLEDELAYEDEXPANSION

set file="C:\Eclipse64\eclipse\configuration\.settings\org.eclipse.ui.ide.prefs"
set OldStr=XXXXXXX
set NewStr=%username%

if "!~OldStr!"=="" findstr "^::" "%~f0"&GOTO:EOF
for /f "tokens=1,* delims=]" %%A in ('"type %file% |find /n /v """') do (
set "line=%%B"
if defined line (
call set "line=echo.%%line:%OldStr%=%NewStr%%%"
for /f "delims=" %%X in ('"echo."%%line%%""') do %%~X >> %file%_new
) ELSE echo.
)

move /Y %file%_new %file% > nul 
```

输入 - 文件中的行：

```
eclipse.preferences.version=1
RECENT_WORKSPACES=C\:\\Users\\XXXXXXX\\workspace 
```

预期输出：

```
eclipse.preferences.version=1
RECENT_WORKSPACES=C\:\\Users\\jgemoll\\workspace 
```

实际输出：

```
eclipse.preferences.version=1 
RECENT_WORKSPACES=C\:\\Users\\jgemoll\\workspace 
```

实际输出在每行末尾都有一个尾随空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:13:39.923

删除此行中命令和重定向之间的空格：

```
for /f "delims=" %%X in ('"echo."%%line%%""') do %%~X >> %file%_new
::                                          this one ^ 
```

另一方面，为什么输出如此复杂？你可以替换这个：

```
call set "line=echo.%%line:%OldStr%=%NewStr%%%"
for /f "delims=" %%X in ('"echo."%%line%%""') do %%~X >> %file%_new 
```

就这样：

```
call echo %%line:%OldStr%=%NewStr%%%>> %file%_new 
```

或者您可以暂时启用延迟扩展（仅在此时）并使用不同的语法：

```
SETLOCAL ENABLEDELAYEDEXPANSION
echo !line:%OldStr%=%NewStr%!>> %file%_new
ENDLOCAL 
```

# php - PHPUnit：模拟 Symfony2 FormBuilderInterface - 类型提示问题

> ID：14161507
> 
> 赞同：2
> 
> 时间：2013-01-04T17:04:43.763
> 
> 标签：php, symfony, phpunit

我正在尝试测试扩展的类`Symfony\Component\Form\AbstractType`，并且无法`buildForm`使用 PHPUnit 模拟对象测试所需的方法：

```
class PageType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('name', 'text');
    }

    // ...
 } 
```

这是一些示例测试代码：

```
public function testBuildForm()
{
    $form = new PageType($this->manager);
    $formBuilder = $this->getMock('Symfony\Component\Form\FormBuilderInterface');
    $form->buildForm($formBuilder, array());
} 
```

不幸的是，调用`getMock()`失败：

```
PHP Fatal error:  Class Mock_FormBuilderInterface_f36f83d4 must implement interface Traversable as part of either Iterator or IteratorAggregate in Unknown on line 0 
```

我怀疑我可能已经犯了这个错误： [https ://github.com/sebastianbergmann/phpunit/issues/604](https://github.com/sebastianbergmann/phpunit/issues/604)

所以，我创建了一个界面来解决这个问题：

```
use Symfony\Component\Form\FormBuilderInterface;

interface FormBuilderInterfaceExtender extends \Iterator, FormBuilderInterface
{
} 
```

并更改了我的测试代码：

```
public function testBuildForm()
{
    $form = new PageType($this->manager);
    $formBuilder = $this->getMock('Pwn\ContentBundle\Tests\Helper\FormBuilderInterfaceExtender');
    $form->buildForm($formBuilder, array());
} 
```

现在我有一个 FormBuilder 实例，但 PHP 不认为它是 的实例`Symfony\Component\Form\FormBuilderInterface`，所以类型提示`$form->buildForm()`给出了这个错误：

```
Argument 1 passed to Pwn\ContentBundle\Form\Type\PageType::buildForm() must be an instance of Symfony\Component\Form\FormBuilderInterface, instance of Mock_FormBuilderInterfaceExtender_3527f313 given 
```

在其他情况下，当我使用模拟对象时，键入提示并`instanceof`正常工作，但在这里它没有：

```
var_dump($formBuilder);
var_dump($formBuilder instanceof \Symfony\Component\Form\FormBuilderInterface); 
```

给

```
class Mock_FormBuilderInterfaceExtender_76df04af#19 (1) {
  private $__phpunit_invocationMocker =>
  NULL
}
bool(false) 
```

看来我*可以*通过模拟一个实现接口的类来完成这项工作：

```
$formBuilder = $this->getMockBuilder('Symfony\Component\Form\FormBuilder')
                    ->disableOriginalConstructor()
                    ->getMock();

var_dump($formBuilder instanceof \Symfony\Component\Form\FormBuilderInterface);
// ^ gives bool(true) 
```

但是，我应该能够使用界面本身吗？为什么扩展接口会“丢失”类型提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T18:57:05.210

每当您无法测试 Symfony2 接口时，请查看组件的 Tests 目录，看看是否有专门用于测试的 mock。测试接口扩展了真实接口，并添加了使 phpunit 运行它们所需的任何调整。

在您的情况下，请尝试模拟`Symfony\Component\Form\Tests\FormBuilderInterface`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:04:14.403

似乎 PHPUnit 可以很好地模拟接口，并且扩展其他接口的接口没有问题。看看这个类和TestCase

**命名空间A.php**

```
<?php
namespace Testing;
interface NamespaceA {} 
```

**TestMockInterfaces.php**

```
<?php
require 'NamespaceA.php';

interface Custom extends Testing\NamespaceA, Iterator, ArrayAccess {}

class TestMockInterfaces extends PHPUnit_Framework_TestCase
{
    public function testMocks()
    {
        $oSolidMock = $this->getMock('Iterator');
        $this->assertTrue($oSolidMock instanceof Iterator);

        $oSketchyMock = $this->getMock('Custom');
        $this->assertTrue($oSketchyMock instanceof Iterator);
        $this->assertTrue($oSketchyMock instanceof ArrayAccess);
        $this->assertTrue($oSketchyMock instanceof \Testing\NamespaceA);
    }
} 
```

这通过了 100%，所以我怀疑还有其他事情发生。

`FormBuilderInterfaceExtender`在你模拟之后`var_dump(class_implements($formBuilder));`，看看它是否是你所期望的。

# collections - JRuby 遍历集合

> ID：14161508
> 
> 赞同：0
> 
> 时间：2013-01-04T17:04:54.793
> 
> 标签：collections, jruby

我有一个 sun.security.x509.X509CertImpl 对象，JRuby 将其视为“集合”。由于该集合可能包含多个 x509 证书，因此我正在尝试遍历该集合并打印出所有证书。

有人可以提供一些关于如何实现这一点的指示吗？

问候，

卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T13:58:56.830

在我的代码中

```
cert_chain = key_store.getX509CertificateChain(key_alias) 
```

=> Java::JavaUtil::Collections::UnmodifiableRandomAccessList

这是一个集合，您可以使用标准的 Ruby 方法

```
cert_chain.size 
```

=> 4

```
cert_chain[0] 
```

=> Java::SunSecurityX509::X509CertImpl

您不能将其作为一个集合进行迭代，因为它不是一个集合。

```
cert_chain[0].publicKey 
```

=> Java::SunSecurityRsa::RSAPublicKeyImpl

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:41:45.083

你试过这个吗？

```
your_object.each{|each|puts each} 
```

这将打印集合中的每个元素。

# ios - 以编程方式填充的水平 UIScrollView

> ID：14161512
> 
> 赞同：1
> 
> 时间：2013-01-04T17:05:09.067
> 
> 标签：ios

我有一个 SQLite 数据库表，其中包含用户选择的最喜欢的项目。我想在`UIScrollview`启用分页的情况下以水平显示这些项目，每页一个用户可以滑动的项目。

每个项目在屏幕上的视觉表示将由一个`UIImage`和两个或三个组成`UILabels`。

我以前用过`UIScrollview`，但只用了 2 页，内容都是在 IB 中创建的。现在我想以`NSMutableArray`编程方式创建内容（可能是？），有没有标准的方法来解决这个问题？

我可能会遍历我的项目的 for 循环并继续添加 的内容大小`UIScrollview`，但我将如何实际绘制内容？是否必须立即创建所有内容，还是会在用户滑动时显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:19:51.643

您只需将视图作为子视图添加到滚动视图并相应地设置内容大小，这样它就可以滚动了。例如，第一个视图的帧为 0,0,300,300，第二个视图的帧为 0,350,300,300，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:20:48.453

我认为您可以使用 1 个 UIScrollView 和 2 个项目视图来实现。由于每页仅显示 1 个项目，因此可以将 item_view_A 显示为活动页面（当前可见），将 item_view_B 显示为下一个项目。

item_view_A ===> item_view_B ===> item_view_A ===> item_view_B。

更新 UIScrollView 委托中 item_view 的内容。这样您只需要创建 2 组项目视图。

# php - 正则表达式返回一个空数组

> ID：14161513
> 
> 赞同：0
> 
> 时间：2013-01-04T17:05:12.983
> 
> 标签：php, regex

所以，我试图从文本文件中捕获 3 个字母的单词。我创建了一个 RegEx，但它返回一个 EMPTY 数组。我不知道为什么！这是文本文件的一部分。

```
================================================
Header of File with time and date
================================================
Loaded options from XML file: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/ID2PDF_options.xml
extendedPrintPDF started
Postfix '3.0' was append from file 'ESQ030112ELAM_lo-metadata.xml' for file: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/someFile.indd
printPDF started
PDF Export Preset: Some preset
PDF file created: ''/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/someFile.pdf'.
File someFileName.xml removed
postprocessingDocument started
INDD file removed: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/someFile.indd 
```

这是我的正则表达式：

```
/^Loaded options from XML file: '\/.*\/SM_Folder\/([a-zA-Z]{3})\/[a-zA-Z]+_Proof_\1\/processing\/ID2PDF_options.xml$/im 
```

`\`如果我在 前面 删除`\/([a-zA-Z]{3})`，我会收到`Unknown modifier:(`错误消息。

有人可以告诉我我需要做什么才能从记录的第一行获取“ESQ”吗？3 个字母的单词在其他记录中会有所不同，因此，我不能真正设计我的 RegEx 来仅捕获 ESQ。例如，它可能是 ABC 或 XYZ。但是，它将保留为 3 个字母的单词。任何有用的输入将不胜感激。

此外，这篇文章也没有太大帮助：[PHP Regex return array with values empty](https://stackoverflow.com/questions/10379990/php-regex-returning-array-with-values-empty)

笔记：

```
options.xml 
```

没有结束，`'`因为它不应该！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:09:33.237

```
[a-zA-Z]_Proof 
```

应该

```
[a-zA-Z]+_Proof 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T20:11:49.117

您在问题中提供的正则表达式模式和文件数据不会导致空数组。至少不适合我（稍后阅读）。有了`preg_match_all`我会正确地得到一场比赛。我用过这段代码：

```
$file = <<<FILE
================================================
Header of File with time and date
================================================
Loaded options from XML file: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/ID2PDF_options.xml
extendedPrintPDF started
Postfix '3.0' was append from file 'ESQ030112ELAM_lo-metadata.xml' for file: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/someFile.indd
printPDF started
PDF Export Preset: Some preset
PDF file created: ''/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/someFile.pdf'.
File someFileName.xml removed
postprocessingDocument started
INDD file removed: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/someFile.indd
FILE;

$pattern = '/^Loaded options from XML file: \'\/.*\/SM_Folder\/([a-zA-Z]{3})\/[a-zA-Z]+_Proof_\1\/processing\/ID2PDF_options.xml$/im';

$result = preg_match_all($pattern, $file, $matches);

var_dump($result, $matches); 
```

结果：

```
int(1)
array(2) {
  [0] =>
  array(1) {
    [0] =>
    string(127) "Loaded options from XML file: '/Thisis/some/Users/sumuser/Desktop/SM_Folder/ESQ/Virtual_Proof_ESQ/processing/ID2PDF_options.xml"
  }
  [1] =>
  array(1) {
    [0] =>
    string(3) "ESQ"
  }
} 
```

您可能会得到类似于以下的结果（这也是与上面完全相同的代码，但在不同的计算机上作为[演示这里](http://eval.in/5972)）：

```
int(0)
array(2) {
  [0]=>
  array(0) {
  }
  [1]=>
  array(0) {
  }
} 
```

如果你得到这个结果，那么这表明多行模式下的`^`and`$`与行尾不匹配，因为你没有`\n`那里，但很可能是 CRLF 序列（DOS/Windows 行尾）。您可以使用以下`ANYCRLF`选项获取所有这些序列：

```
$pattern = '/(*ANYCRLF)^Loaded options from XML file: \'\/.*\/SM_Folder\/([a-zA-Z]{3})\/[a-zA-Z]+_Proof_\1\/processing\/ID2PDF_options.xml$/im';
             ^^^^^^^^^^ 
```

这应该会给你结果。请参阅[工作演示](http://eval.in/5973)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:09:21.120

`\/([a-zA-Z]{3})`不是有效的正则表达式。您缺少分隔符。

```
preg_match_all(":\/([a-zA-Z]{3}):", $input, $matches); 
```

你可以选择任何字符，这里我选择了`:`。

# multithreading - 没有thread.abort的通用超时功能？

> ID：14161515
> 
> 赞同：1
> 
> 时间：2013-01-04T17:05:19.990
> 
> 标签：multithreading, amazon-web-services, abort

**参考：** [实现 C# 通用超时](https://stackoverflow.com/questions/299198/implement-c-sharp-generic-timeout)

我目前正在从事一个从 AWS 提取指标的项目，而我的程序只是在对 ListObjects 的一些特定调用上停滞不前。我告诉我的主管，我正在考虑为此目的使用线程中止，现在他要求我编写一个通用的超时函数，而不是一个特定于这种情况的超时函数。这似乎并不安全。现在我不完全理解我在引用问题中使用的片段，所以我在这里有点摸不着头脑。

在卡住的代码上调用堆栈：

> mscorlib.dll!System.Threading.Thread.Sleep(int millisecondsTimeout) + 0x5 字节 AWSSDK.dll!Amazon.S3.AmazonS3Client.pauseOnRetry(int retries, int maxRetries, System.Net.HttpStatusCode status, string requestAddr, System.Net. WebHeaderCollection 标头，System.Exception 原因）+ 0x5b 字节
> AWSSDK.dll！Amazon.S3.AmazonS3Client.handleRetry（Amazon.S3.Model.S3Request userRequest，System.Net.HttpWebRequest 请求，System.Net.WebHeaderCollection respHdrs，long orignalStreamPosition，int重试，System.Net.HttpStatusCode statusCode，System.Exception 原因）+ 0x17e 字节 AWSSDK.dll！Amazon.S3.AmazonS3Client.getResponseCallback（System.IAsyncResult 结果）+ 0x57a 字节
> AWSSDK.dll！Amazon.S3.AmazonS3Client.invoke（Amazon .S3.AmazonS3Client.S3AsyncResult s3AsyncResult, bool isRedirect) + 0xcde 字节
> AWSSDK.dll!Amazon.S3.AmazonS3Client.getResponseCallback(System.IAsyncResult 结果) + 0x636 字节
> AWSSDK.dll!Amazon.S3.AmazonS3Client.invoke(Amazon.S3.AmazonS3Client.S3AsyncResult s3AsyncResult, bool isRedirect) + 0xcde 字节
> AWSSDK.dll !Amazon.S3.AmazonS3Client.getResponseCallback(System.IAsyncResult 结果) + 0x636 字节
> AWSSDK.dll!Amazon.S3.AmazonS3Client.invoke(Amazon.S3.AmazonS3Client.S3AsyncResult s3AsyncResult, bool isRedirect) + 0xcde 字节
> AWSSDK.dll!Amazon。 S3.AmazonS3Client.getResponseCallback(System.IAsyncResult 结果) + 0x636 字节
> AWSSDK.dll!Amazon.S3.AmazonS3Client.invoke(Amazon.S3.AmazonS3Client.S3AsyncResult s3AsyncResult, bool isRedirect) + 0xcde 字节
> AWSSDK.dll!Amazon.S3.AmazonS3Client.invoke(Amazon.S3.AmazonS3Client.S3AsyncResult s3AsyncResult) + 0x53 字节
> AWSSDK.dll!Amazon.S3.AmazonS3Client.invokeListObjects(Amazon.S3.Model.ListObjectsRequest 请求，System.AsyncCallback 回调，对象状态，布尔同步）+ 0x102 字节 AWSSDK.dll!Amazon.S3.AmazonS3Client.ListObjects（Amazon.S3.Model.ListObjectsRequest 请求）+ 0x31 字节

首先，我想将其用于（亚马逊的 ListObjects 停顿）线程中止的目的是否安全？

其次，是否有一种安全的方法可以在没有异步线程中止的通用函数中执行此操作？

这是我所拥有的：

执行：

```
public static class Timeout<TResult>
{
    private static int _timeout = 5000;

    //WARNING - This method uses asynchronous thread aborting and can result
    //in roughhousing and !@#$ hitting the fan
    public static TResult Run(Func<TResult> function)
    {
        if (function == null) throw new ArgumentNullException("function to timeout is null");

        var sync = new object();
        var isCompleted = false;

        WaitCallback watcher = obj =>
        {
            var watchedThread = obj as Thread;

            lock (sync)
            {
                if (!isCompleted)
                {
                    Monitor.Wait(sync, _timeout);
                }
            }

            if (!isCompleted)
            {
                watchedThread.Abort();
            }
        };

        try
        {
            ThreadPool.QueueUserWorkItem(watcher, Thread.CurrentThread);
            return function();
        }
        catch (ThreadAbortException)
        {
            Thread.ResetAbort();
            return default(TResult);
        }
        finally
        {
            lock (sync)
            {
                isCompleted = true;
                Monitor.Pulse(sync);
            }
        }
    }
} 
```

来电：

```
response = Timeout<ListObjectsResponse>.Run(() => s3Client.ListObjects(request)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:27:48.447

首先要注意，线程中止对于长时间运行的应用程序来说是一件可怕的事情。它可能导致各种不可逆转的状态损坏（例如中止静态 ctor，导致整个班级永远被淹没）。向您的主管显示您链接到的“参考”下方的评论。

不要通过线程中止来实现这一点。

相反，在单独的线程上启动工作函数。启动计时器以检测超时情况。当它过去时，让工作线程运行但丢弃其结果并立即返回。

关键是让工人运行但丢弃其结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:54:35.940

好吧，我想我不需要使用泛型，我找到了亚马逊 AWS 根本问题的原因。显然，如果存储桶的名称中有句点并且区域不是美国（东部），则需要为客户端配置特定的端点。

# html - HTML5 视频 // 完全隐藏控件

> ID：14161516
> 
> 赞同：95
> 
> 时间：2013-01-04T17:05:30.343
> 
> 标签：html, video

我怎样才能完全隐藏 HTML5 视频控件？

```
<video width="300" height="200" controls="false" autoplay="autoplay">
<source src="video/supercoolvideo.mp4" type="video/mp4" />
</video> 
```

false 没有用——这是怎么做到的？

干杯。

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2013-01-04T17:08:09.030

像这样：

```
<video width="300" height="200" autoplay="autoplay">
  <source src="video/supercoolvideo.mp4" type="video/mp4" />
</video> 
```

`controls`是一个[布尔属性](https://html.spec.whatwg.org/multipage/infrastructure.html#boolean-attributes)：

> 注意：布尔属性不允许使用值“true”和“false”。要表示假值，必须完全省略该属性。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2016-03-29T19:10:01.203

您可以使用 CSS 伪选择器（如 Demo）隐藏控件：[https ://jsfiddle.net/g1rsasa3](https://jsfiddle.net/g1rsasa3)

```
//For Firefox we have to handle it in JavaScript 
var vids = $("video"); 
$.each(vids, function(){
       this.controls = false; 
}); 
//Loop though all Video tags and set Controls as false

$("video").click(function() {
  //console.log(this); 
  if (this.paused) {
    this.play();
  } else {
    this.pause();
  }
});
```

```
video::-webkit-media-controls {
  display: none;
}

/* Could Use thise as well for Individual Controls */
video::-webkit-media-controls-play-button {}

video::-webkit-media-controls-volume-slider {}

video::-webkit-media-controls-mute-button {}

video::-webkit-media-controls-timeline {}

video::-webkit-media-controls-current-time-display {}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.1/jquery.min.js"></script>
<!-- Hiding HTML5 Video Controls using CSS Pseudo selectors -->

<video width="800" autoplay controls="false">
  <source src="http://clips.vorwaerts-gmbh.de/VfE_html5.mp4" type="video/mp4">
</video>
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2017-08-21T09:53:32.993

一个简单的解决方案是——只是忽略用户交互:-)

```
video {
  pointer-events: none;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-06-20T03:41:48.127

首先，删除视频的“控件”属性。
对于 iOS，我们可以通过添加以下 CSS 伪选择器来隐藏视频的内置播放按钮：

```
video::-webkit-media-controls-start-playback-button {
    display: none;
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-02-23T05:28:58.020

有两种方法可以隐藏视频标签控件

1.  从视频标签中删除该`controls`属性。

2.  将 css 添加到 video 标签

    ```
    video::-webkit-media-controls-panel {
    display: none !important;
    opacity: 1 !important;} 
    ```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-06-27T06:58:26.740

```
<video width="320" height="240" autoplay="autoplay">
  <source src="movie.mp4" type="video/mp4">
  <source src="movie.ogg" type="video/ogg">
  Your browser does not support the video tag.
</video> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-03-17T13:13:02.773

这种方法适用于我的情况。

```
video=getElementsByTagName('video');
function removeControls(video){
  video.removeAttribute('controls');
}
window.onload=removeControls(video); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-26T21:43:11.810

```
document.addEventListener("DOMContentLoaded", function() { initialiseMediaPlayer(); }, false);

function initialiseMediaPlayer() {

    mediaPlayer = document.getElementById('media-video');

    mediaPlayer.controls = false;

    mediaPlayer.addEventListener('volumechange', function(e) { 
        // Update the button to be mute/unmute
        if (mediaPlayer.muted) changeButtonType(muteBtn, 'unmute');
        else changeButtonType(muteBtn, 'mute');
    }, false);  
    mediaPlayer.addEventListener('ended', function() { this.pause(); }, false); 
} 
```

# javascript - jQuery 表单提交事件仅适用于 Chrome

> ID：14161517
> 
> 赞同：0
> 
> 时间：2013-01-04T17:05:43.110
> 
> 标签：javascript, jquery

这是我的代码：

```
$("#addhash").submit(function(event) {
        // Cancel the default action
        event.preventDefault();

        // Store the value and remove any white space or disallowed chars
        var hash = $("#hashtoadd").val().replace(/\s/g, "").replace(/\W/g, "");

        // Check if anything was entered
        if(hash) {
            // Add the hashtag to the array
            hashes.push(hash);
            localStorage.hashes = JSON.stringify(hashes);
            var key = hashes.length - 1;

            // Clear the form field
            $("#hashtoadd").val("");

            // Set others to inactive
            $("#hashes").children().removeClass("active");

            // Add it to the list and make it the active page
            $("#hashes").append("<li class='active' id='" + key + "'><a href='#' class='close'>&times;</a><a class='hashtag' href='#" + hash + "'>#" + hash + "</a></li>");

            // Load the tweets
            getTweets(hash);
        }
}); 
```

此代码仅适用于 Chrome。似乎`event.preventDefault();`连开火都没有。我试图在一开始就设置一个警告对话框，但这也没有显示，这让我相信它甚至永远不会进入这里。我试过只使用一个`click ()`事件，也只使用一个`submit()`事件，但这些也不起作用。

**编辑：**我认为问题在于事件处理程序永远不会在其他浏览器中被调用。我已经更新了代码以反映它当前的状态。仍然无法正常工作。

**EDIT2：**根据要求，这是表单本身：

```
<form class="navbar-form pull-right" id="addhash">
    <div class="input-prepend input-append">
        <span class="add-on">#</span>
        <input type="text" placeholder="tag" tabindex="1" id="hashtoadd">
        <button class="btn" type="submit" href="#" id="submit"><i class="icon-plus"></i></button>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:16:18.260

不确定这是否正是您的问题，但

“从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。”

.live 仅在 DOM 中不存在所选对象时才需要使用，对于所有其他情况，您可以使用 .bind() 或表单 .submit()

# intellij-idea - IntelliJ 未正确显示 Maven 依赖项

> ID：14161518
> 
> 赞同：0
> 
> 时间：2013-01-04T17:05:47.117
> 
> 标签：intellij-idea

目前使用 maven 窗口工具栏，我看到了

![在此处输入图像描述](../Images/f13678ad7d2d995275096aa5e27066dd.png)

是否可以解决此问题以实际显示我拥有的依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:08:34.607

您的项目和/或 IntelliJ 似乎有问题。这是我的项目依赖项显示的内容：

![Maven 依赖项](../Images/87aa39c41e5c3865a42221158887f016.png)

**更新：**点击maven工具栏窗口左上角的“Reimport All Maven Projects”刷新Maven依赖。

# xcode - 在 Xcode 中运行与单步执行

> ID：14161523
> 
> 赞同：0
> 
> 时间：2013-01-04T17:06:02.003
> 
> 标签：xcode, debugging

如果我从头到尾进入每个调用，则相同的代码可以正常工作，但如果我只是在没有断点的情况下运行程序，则表现完全不同。这种不同的行为最终会导致 exit(1) 用于通知无法从中恢复的逻辑错误。

我相信我的程序应该可以运行，但是由于在运行和步进时以不同速度发生的线程问题，程序在运行时崩溃。我正在使用 Xcode 4.5.2，并且正在编写一个具有自动引用计数的 OpenGL 游戏。问题出现在我编写的非常标准的 C 代码中，没有显式的线程调用，只是简单的过程 C 指针算法。

为什么会这样？

# performance - 网站中 ASP.NET HttpHandler 和 WCF 客户端的 IIS 性能瓶颈

> ID：14161525
> 
> 赞同：3
> 
> 时间：2013-01-04T17:06:05.840
> 
> 标签：performance, wcf, iis-6, connection-pooling, throttling

我的 ASP.NET Web 应用程序存在性能问题，不知道去哪里调查。当我在我们的 Web 应用程序中启用 WCF 客户端时，Web 性能下降并且传入的 Web 请求开始排队。

## 情况：

ASP.NET 应用程序 (IHttpAsyncHandler) 作为通知通道：处理程序使客户端连接保持打开状态大约 20 秒（用于直接推送消息）。20 秒后，HTTP 请求完成并关闭，客户端将在几秒后重新连接。--> 这一切运行良好，大约有 500 个并发客户端。每秒大约有 20 到 50 个（重新）连接。

要进行日志记录，我们在 Web 应用程序中有一个跟踪侦听器，它使用 TCP.NET 绑定将日志消息发送到 WCF 服务。IHttpAsyncHandler 中的每个连接/断开连接都发送到跟踪侦听器。

## 问题：

没有跟踪监听器一切正常。当我启用跟踪侦听器时，Web 应用程序的性能会急剧下降。Web 请求开始排队。几秒钟后，请求队列增长到数百个条目。网络开始拒绝网络连接。

我想知道为什么启用 Trace Listener/WCF Client 会对性能产生如此大的影响。我不确定这是否更多是服务器/WCF 节流的问题，还是与性能限制有关。这可能是某种连接池限制问题吗？哪些性能计数器可以帮助我确定此问题的原因？

我会很感激任何想法。

服务器 A（Http 处理程序）：Win 2003 R2 SP2、IIS 6
服务器 B（WCF 主机）：Win 2008 R2 SP1、IIS 7、WAS 托管

* * *

**编辑：**为 TraceListener 中收到的每条消息创建和关闭 WCF roxy。
两个绑定，WCF 客户端和服务器都配置了 maxConnetions=300。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:12:42.257

您是让 wcf 客户端打开太久还是没有正确关闭它，为什么在这种有许多并发用户的场景中使用 wcf 作为跟踪侦听器，这似乎不是最佳解决方案。

您也可以尝试增加连接限制： [Why does WCF limit concurrent connections to 5?](https://stackoverflow.com/questions/686466/why-does-wcf-limit-concurrent-connections-to-5)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-01T08:57:20.963

原来，这一切都与服务器性能有关。服务器正在接近 CPU 最大值运行。启用跟踪侦听器时，每次调用大约需要多花 50 毫秒。然后，我们的网络服务器无法及时处理所有请求并开始对它们进行排队。

# netty - netty开发http解析问题

> ID：14161526
> 
> 赞同：0
> 
> 时间：2013-01-04T17:06:09.270
> 
> 标签：netty

我正在尝试从 netty 的代码中创建一个原始的异步 http 解析器，删除所有 netty 依赖项，但我没有得到这段代码

```
private void skipControlCharacters(ByteBuffer buffer) {
    for (;;) {
        char c = (char) ByteBufferUtil.readUnsignedByte(buffer);
        if (!Character.isISOControl(c) &&
            !Character.isWhitespace(c)) {
            buffer.position(buffer.position()-1);
            break;
        }
    }
} 
```

我有一个可以输入的测试

```
 GET / HTT 
```

然后喂

```
 P/1.1\r\nHost: www.example.com\r\nConnection: close\r\n\r\n 
```

自然，只有“GET / HTT”的第一个数据包会卡在循环中，直到我得到一个 BufferUnderflowException。在异步解析中，我们可能并不总是得到完整的数据包（这就是为什么 http 有 \r\n\r\n 以便我们可以知道何时我们有完整的 http 请求包）。还是只有在我进行一些准备时才能进行这种解析？？？这样我就必须自己缓存数据，直到收到 \r\n\r\n （我不喜欢其他层，但 http 解析器知道 http 解析，并且知道 \r\n\r\n 将是 http 特定的）。

谢谢，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:48:50.160

没关系，该死的愚蠢错误，G没有正确出现，而是作为空间出现。

# three.js - 在 Three.js 中使用“Per-Face-Materials”加载 Blender-Model

> ID：14161530
> 
> 赞同：3
> 
> 时间：2013-01-04T17:06:17.830
> 
> 标签：three.js, blender

我创建了一个简单的搅拌机模型。这只是一个对象。然后我创建了两种不同颜色的材质，并用第一种材质为对象的一些面着色，用第二种材质着色其他面。

然后，我使用提供的 Three.js-Export-Plugin 导出模型并检查流向：顶点、面、法线、骨骼、蒙皮、UV、颜色、材质、FlipYZ 和所有网格。

然后我尝试使用以下代码导入生成的 JS-Model：

```
<html>
    <head>
        <script src="three.js/build/three.js"></script>
        <script>
            window.onload = function(){

                var camera, scene, renderer;
                var geometry,  mesh;

                init();
                animate();

                function init() {
                    camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 10000 );
                    camera.position.z = 1000;
                    scene = new THREE.Scene();
                    renderer = new THREE.CanvasRenderer();
                    renderer.setSize( window.innerWidth, window.innerHeight );
                    document.body.appendChild( renderer.domElement );

                    /* INTERESTING CODE */

                    var loader = new THREE.JSONLoader(true);
                    loader.load("./spiderhead.js",function(geometry) {
                        mesh = new THREE.Mesh(geometry,new THREE.MeshSpriteMaterial());
                        mesh.position.set(0,0,0);
                        mesh.scale.set(200,200,200);
                        scene.add(mesh);
                    });

                    /* END OF INTERESTING CODE */                   

                }
                function animate() {
                    requestAnimationFrame( animate );
                    renderer.render( scene, camera );
                }
            }
        </script>
    </head>
    <body>
    </body>
</html> 
```

结果，我只是得到一个白屏（在 Firefox 中测试），所以我似乎做错了什么。

所以问题是：我如何正确地将包括颜色在内的这些模型导入到three.js中？

我之前已经成功导入了带有纹理和顶点颜色的模型，但是这种类型的模型似乎不起作用。

非常感谢你的帮助！

**更新**

当然，您可以在此处获取 Model.blend 文件：[https ://docs.google.com/open?id=0B82XARuHCQOKYjRjam5UQzdoUzA](https://docs.google.com/open?id=0B82XARuHCQOKYjRjam5UQzdoUzA)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:42:52.890

试试这个：

```
loader.load("./spiderhead.js", function( geometry, materials ) {
    mesh = new THREE.Mesh( geometry, new THREE.MeshFaceMaterial( materials ) ); 
```

确保`materials`是一个包含两种材料的数组。

并确保几何体的每个面都`materialIndex`设置为 0 或 1。

三.js r.54

# android - 有没有办法创建一个单选按钮子菜单？

> ID：14161537
> 
> 赞同：0
> 
> 时间：2013-01-04T17:06:53.623
> 
> 标签：android, radio, submenu

我有一个`Sub-Menu`我做的。但是，我只能弄清楚如何制作它，以便用户可以检查多项内容。但是，可悲的是，我找不到任何`attributes`可以做到`to check only one thing at a time`的，或单选按钮。谁能告诉我这个属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-12T18:21:41.080

我有同样的问题，我用下面的方法解决了。

```
<!--Normal View-->
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <!--Radio group that makes only one selected item-->
    <RadioGroup
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentEnd="true">

        <!--Different buttons-->
        <RadioButton
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="btn1" />

        <!-- sub buttons -->
        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:id="@+id/radios_extra">
            <!-- fill this radio group with extra items and when check btn1 change the visivility for VISIBLE -->
            <RadioGroup
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:inputType="text"
                android:id="@+id/extra_group"
                android:layout_alignParentLeft="true"
                android:layout_alignParentStart="true"
                android:layout_alignParentRight="true"
                android:layout_alignParentEnd="true"
                android:visibility="gone" />

        </RelativeLayout>

        <RadioButton
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="bt2" />

    </RadioGroup>

</RelativeLayout> 
```

# sql - 将 MAX 引入 SQL JOIN

> ID：14161541
> 
> 赞同：0
> 
> 时间：2013-01-04T17:07:02.397
> 
> 标签：sql, postgresql

我读过其他一些帖子，但没有一个能完全回答我的问题。

我设法生成以下选择：

```
SELECT regions.id, regions.name, auditoria_status from regions
LEFT OUTER JOIN regions regions_regions ON regions_regions.id = regions.parent_id
JOIN(
    SELECT auditoria.entidade_id, auditoria.entidade_tipo, MAX(auditoria.status) AS auditoria_status 
    from auditoria GROUP BY auditoria.entidade_id, auditoria.entidade_tipo
) AS a
ON a.entidade_id = regions.id AND a.entidade_tipo = 'Terceiro' ORDER BY regions.id 
```

这将正确列出我的所有地区。但我希望auditoria_status 能给我带来auditoria.status 的最大值。

其中一个区域记录在观众席表中有 3 个条目。一个状态为 0，一个状态为 1，第三个状态为 2。我希望得到这个区域 id，它的名称和 2，因为它是 auditia_status，但给了我 0。

我的目标是列出所有区域（不重复），但只为该区域带来表厅的最大状态

**编辑**

好的，这个 SQL 确实有效，这里的假人输入错误的 entidade_tipo 条件应该是“Region”而不是“Terceiro”。所以，它有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:14:11.773

你所做的只是加入你的子查询，你实际上并没有过滤它。

如果我正确理解了您的问题，并且您只需要它的 id、名称和最大状态，您可以这样做：

```
SELECT
   regions.*, a.max_status
FROM
   regions
JOIN
   (SELECT id, MAX(status) as max_status
    FROM auditoria WHERE entidade_tipo = 'Terceiro'
    GROUP BY id) AS a 
 ON
   regions.id = a.id
ORDER BY regions.id 
```

# c# - 在 C# 项目中创建文件夹的 Visual Studio 2010 宏

> ID：14161544
> 
> 赞同：0
> 
> 时间：2013-01-04T17:07:07.313
> 
> 标签：c#, visual-studio-2010, itemtemplate, visual-studio-macros, project-template

我们在 Visual Studio 中有一个大型 C# 项目，它下面有多个应用程序。开发人员通过手动创建文件夹将他们的应用程序添加到项目中。我想知道我们是否可以使用模板或宏自动执行此操作。我想在它下面添加文件夹和项目很困难。我在考虑宏还是其他什么？

有没有办法在 VS 2010 中的现有 C# 项目下自动创建文件夹？我在想我们是否可以向该 C# 项目的开发人员提供宏以运行它来为他们的应用程序创建文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:14:22.107

看看[http://studioshell.codeplex.com/](http://studioshell.codeplex.com/)这将 dte 可扩展性模型暴露给了 powershell。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:11:50.723

相信您说的是 Visual Studio 项目模板：

*   [创建项目和项模板](http://msdn.microsoft.com/en-us/library/vstudio/s365byhx%28v=vs.100%29.aspx)

*   [为您的开发团队创建可重用的项目和项目模板](http://msdn.microsoft.com/en-us/magazine/cc188697.aspx)

*   [创建您自己的 Visual Studio 项目模板](http://www.carlosag.net/articles/create-vs-template)

# c# - C#值切换值无需我触摸它

> ID：14161545
> 
> 赞同：0
> 
> 时间：2013-01-04T17:07:10.783
> 
> 标签：c#, monodevelop, unity3d

我正在使用 C# 在 Unity 中开发游戏。部分代码使用布尔值决定是否允许玩家购买建筑物的升级。如果是，则建筑物的整数加 1。接下来，布尔值设置为 false。如果他不是，那么此刻什么都不会发生。

游戏中有一个按钮，在功能上将周数增加 1，允许玩家再次能够升级建筑（因此再次将布尔值设置为 true）。

问题是购买升级后，布尔值设置为false，即使我再次将其设置回true，当我尝试升级建筑物时，布尔值似乎为false。我还尝试借助整数而不是布尔值（使用值 0 和 1）来检查它，但问题仍然存在。

这是一些代码：

```
using UnityEngine;
using System.Collections;
using System.Collections.Generic;

public class ActivateTrigger : MonoBehaviour
{
    public int transtech = 0;
    public int factech = 0;
    public bool facmag = true;
    public bool transmag = true;

    void OnGUI () {GUI.Box(new Rect(0, Screen.height - 120 - 60, 150, 30), "Week: " + week.ToString());
    if (GUI.Button(new Rect(0, Screen.height - 120 - 30, 150, 20), "Continue one week"))
    {       
        NextProcess();
    }
    if (GUI.Button(new Rect(20, 70, 120, 20), "Koop upgrade") )
    {
            Debug.Log("Facmag: " + facmag);
        if (facmag == true)
            {
        facmag = false;
            }
    }

    void NextProcess()
    {
        Debug.Log("Next process called");
        facmag = true;
        transmag = true;
        Debug.Log("Facmag: " + facmag);
    }
} 
```

因此，当调用 NextProcess() 时，调试日志显示该值为 true。但是在第一次购买升级后，无论我是否按下按钮执行 NextProcess()，该值都保持为 false。我想知道我是否完全错过了一些东西。这个类中没有其他代码使用布尔值，我所拥有的其他几个类也没有。那么问题出在哪里呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:18:05.740

**[简短回答]**

如果您的脚本附加到超过 1 个对象，则只有**OnGUI()**中最顶部的按钮正在修改**facmag**或调用**NextProcess()。**

**[我上面的评论略有扩展]**

Unity 对对象之间共享的脚本的执行顺序是不可控的。（不过，您可以[**在单个对象**](http://docs.unity3d.com/Documentation/Components/class-ScriptExecution.html)[中修改脚本顺序](http://docs.unity3d.com/Documentation/Components/class-ScriptExecution.html)**。）这意味着**OnGUI()**将以[随机顺序](http://answers.unity3d.com/questions/371502/order-execution-of-the-same-script.html)对其附加的 N 个对象调用 N 次。只有特定鼠标位置的“最顶部”GUI 元素才会接受鼠标输入。**

 **例子：

```
using UnityEngine;
using System.Collections;

public class OverlapButton : MonoBehaviour {
    public string id_;
    void OnGUI(){
            if(GUI.Button(new Rect(0,0,50,50),"Touch")){
                    Debug.Log("I'm object " + id_);
            }
    }
} 
```

如果将此脚本附加到 50 个对象，Unity 将绘制 50 个按钮，但只有 1 个按钮会响应鼠标单击，您无法控制哪个按钮。**

# c - 数组一致性 - 基本 C 编程

> ID：14161548
> 
> 赞同：0
> 
> 时间：2013-01-04T17:07:30.477
> 
> 标签：c, string, numbers

我有一个字符串结构（名字姓氏地址等）。

我需要确保第一个字符串（名称）中没有数字。我一直在尝试不同的方法，但都是徒劳的。有什么帮助吗？：/

顺便说一句，我是新来的。非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:09:49.910

您可以使用 中的`isdigit`功能`<ctype.h>`。

```
#include <ctype.h>

/* Return 1 if the name is valid, 0 otherwise. */
int check_surname(const char *name)
{
  for (int i = 0; name[i] != '\0'; i++)
  {
    if (isdigit((unsigned char)name[i]))
    {
      return 0;
    } 
  }
  return 1;
} 
```

> **C11 (n1570), § 7.4.1.5`isdigit`函数**
> 该`isdigit`函数测试任何十进制数字字符（如 5.2.1 中所定义）。
> 
> **C11 (n1570), § 5.2.1 字符集**
> 十进制数字：
> 0 1 2 3 4 5 6 7 8 9

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:11:28.813

要检查字符串是否不包含任何数字（十进制）字符，您可以编写如下函数：

```
#include <ctype.h>

int has_numbers(const char *p)
{
    while (*p) {
        if (isdigit((unsigned char)*p)) {
            return 1;
        }
        p++;
    }
    return 0;
} 
```

# linux - 将时间戳添加到 shell 脚本的 cat 输出

> ID：14161552
> 
> 赞同：3
> 
> 时间：2013-01-04T17:07:47.673
> 
> 标签：linux, shell, awk, cat

我有一个小脚本，可以将 ttyUSB 的输出转换为我想在每行前面加上时间戳的文件。从命令行这可以完成我想要的一切：

```
$ cat /dev/ttyUSB0 /home/pi/daily_logs/ttyUSSB0 | awk '{ print strftime("%Y-%m-%d %H:%M:%S"), $0; } 
```

我的问题是，当我将它添加到脚本时，一切正常，但未添加 awk 时间戳。我的脚本行如下所示：

```
cat < /dev/ttyUSB0 > /home/pi/daily_logs/ttyUSB0 | awk '{ print strftime("%Y-%m-%d %H:%M:%S"), $0; } & 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T17:14:45.423

您需要将 awk 的输出重定向到文件，而不是 cat 的。按照你的方式，awk 一无所获。实际上，[您可能根本不需要 cat](https://unix.stackexchange.com/questions/16279/should-i-care-about-unnecessary-cats)：

```
awk '{ print strftime("%Y-%m-%d %H:%M:%S"), $0; }' /dev/ttyUSB0 > /home/pi/daily_logs/ttyUSB0 & 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:16:16.183

您需要将 > /home/pi/daily_logs/ttyUSB0 放在管道之后。像这样：

`cat < /dev/ttyUSB0 | awk '{ print strftime("%Y-%m-%d %H:%M:%S"), $0; }' > /home/pi/daily_logs/ttyUSB0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T19:03:12.137

无用的使用 cat 阻碍了解决方案。为了最大限度地减少所需的更改，您还可以执行以下操作：

```
< /dev/ttyUSB0 > /home/pi/daily_logs/ttyUSB0 awk '...' & 
```

# ruby - 在列表框中动态选择多个值

> ID：14161556
> 
> 赞同：1
> 
> 时间：2013-01-04T17:07:50.290
> 
> 标签：ruby, ruby-on-rails-3, jquery

我的解决方案有效，但是有没有办法只使用对象来比较 jquery 值而不必使用逗号分隔的字符串？

此功能是显示已分配给角色的权限。我有一个带有 id 和名称的角色表，一个带有 id 和名称的权限表，以及一个带有 role_id 和 permission_id 的角色权限表。选择角色时，我想查询已经为该角色分配了哪些权限，并在多选列表框中选择它们。

这是我的模型，role.rb 和 permission.rb：

```
 class Role < ActiveRecord::Base
        has_and_belongs_to_many :permissions, :join_table => "roles_permissions"

        attr_accessible :description, :name
    end

    class Permission < ActiveRecord::Base
        has_and_belongs_to_many :roles, :join_table => "roles_permissions"

        attr_accessible :description, :name
    end 
```

我的控制器，roles_permissions_controller.rb：

```
 class RolesPermissionsController < ApplicationController
        def index
            # get all roles
            @roles = Role.all
            # get all permissions
            @all_permissions = Permission.all

            respond_to do |format|
                format.html # index.html.erb
                format.json { render json: @roles }
            end
         end

         def update_permissions
             # updates the permissions based on the role selected
             role = Role.find(params[:role_id])
             puts '  list of perms by role:' << role.name << '  id:' << params[:role_id] 
              # check for nil, create comma seperated string of id's
              if role.permissions.first == nil
                  @permissions = "" 
              else
                  @permissions = role.permissions.map{|a| a.id}.join(',').to_s
              end
         end
    end 
```

这是我的路线.rb：

```
 Stats::Application.routes.draw do
        resources :permissions
        resources :roles

        match "/roles_permissions/" => "roles_permissions#index"
        get 'roles_permissions/update_permissions', :as => 'update_permissions'
    end 
```

我的观点，roles_permissions/index.html.erb：

```
 <%= collection_select(:role, :id, @roles, :id, :name, options ={:prompt => "-Select a role"}) %>
    <br/>
    <%= collection_select(:permission, :id, @all_permissions, :id, :name, options ={},html_options ={ :multiple => true, :size => 10}) %>

    <br/>

    <script>
        $(document).ready(
          function()
          {
              $('#role_id').change(
                  function()
                  {
                      $.ajax({
                          url: "<%= update_permissions_path %>",
                          data:
                          {
                              role_id : $(this).val()
                          },
                          dataType: "script"
                       });
                   }
             );
          }
        );
    </script> 
```

最后是我的 js 文件 update_permissions.js.erb：

```
 var permissions = "<%= @permissions%>";
    $('#permission_id').val( permissions.split(",") ); 
```

# c# - 运行应用程序的每台 PC 具有不同的设置

> ID：14161558
> 
> 赞同：0
> 
> 时间：2013-01-04T17:08:02.240
> 
> 标签：c#, winforms, settings

我正在创建一个将通过 Click-Once 分发的收银机程序（我相信这是正确的术语，VS 内置包装）。运行此软件的每台 PC 都将具有不同的设置，例如信用卡处理。我如何/在哪里存储这些设置，这样它们就不会在每次更新时都被覆盖，因此它们可以根据安装的 PC 是唯一的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:19:27.743

这正是 WinForms 中内置应用程序设置的用途。它们允许您从默认配置开始，然后您可以在每个工作站上对其进行修改。更改将毫无问题地在升级后继续存在。

[这是一个教程](http://codehill.com/2009/01/saving-user-and-application-settings-in-winforms/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:09:53.907

听起来注册表是放置这些的好地方。

见[`Microsoft.Win32.Registry`](http://msdn.microsoft.com/en-us/library/5f1xf5kf.aspx)课堂。

> 此类提供在运行 Windows 的机器上的注册表中找到的一组标准根密钥。注册表是有关应用程序、用户和默认系统设置的信息的存储工具。例如，应用程序可以使用注册表来存储在应用程序关闭后需要保留的信息，并在重新加载应用程序时访问相同的信息。例如，您可以存储颜色首选项、屏幕位置或窗口大小。您可以通过将信息存储在注册表中的不同位置来控制每个用户的此数据。

* * *

另一种选择，使用内置的配置基础设施将涉及独特的设置在它自己的文件中，使用[`configSource`](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx). 每台计算机都有一个不同的文件（具有相同的架构），这些文件不会被更新。

# android - Android：如何在 ant 命令行构建期间传递版本信息？

> ID：14161564
> 
> 赞同：3
> 
> 时间：2013-01-04T17:08:19.740
> 
> 标签：android, android-build

当我使用 Ant 在命令行中构建 Android 项目时，我想更新 AndroidManifest.xml 文件中的 android:versionCode 和 android:versionName 。有没有办法可以使用属性文件注入版本号？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T19:56:10.350

您可以通过多种方式设置版本信息，

1.  作为命令行参数传递
2.  使用属性文件。

要作为命令行参数传递，

```
 <target name="set-version-using-commandline-args">
    <!-- Load properties from "version.properties" file -->     
    <replaceregexp file="AndroidManifest.xml" match="android:versionCode(.*)" 
        replace='android:versionCode="${Version.Code}"'/>
    <replaceregexp file="AndroidManifest.xml" match="android:versionName(.*)" 
        replace='android:versionName="${Version.Name}"'/>       
</target> 
```

然后像这样运行ant构建，

```
ant -DVersion.Code=100 -DVersion.Name=5.0.0.1201011 debug 
```

如果要使用属性文件传递版本信息，请使用此目标，

```
 <target name="set-version-using-file">
    <!-- Load properties from "version.properties" file -->             
    <property file="version.properties" />

    <replaceregexp file="AndroidManifest.xml" match="android:versionCode(.*)"
        replace='android:versionCode="${Version.Code}"'/>
    <replaceregexp file="AndroidManifest.xml" match="android:versionName(.*)"
        replace='android:versionName="${Version.Name}"'/>       
</target> 
```

有关详细说明，请参阅此博客文章。[Android：如何对命令行版本进行版本控制？](http://www.irasenthil.com/2013/01/android-how-to-version-command-line.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T19:58:38.003

当然！首先，创建您的属性文件。说，`spiffy.properties`。接下来，您将使用 Android Ant 构建`custom_rules.xml`文件。创建它，如果你还没有的话。

在该文件的顶部附近，添加如下所示的一行：

```
<property file="spiffy.properties"/> 
```

现在，向目标添加一个依赖项`-pre-build`来调用它：

```
<target name="-set-manifest-values">
  <replaceregexp file="AndroidManifest.xml">
    <regexp pattern="android:versionName=&quot;.*&quot;"/>
    <substitution expression="android:versionName=&quot;${version.name}&quot;"/>
  </replaceregexp>
  <replaceregexp file="AndroidManifest.xml">
    <regexp pattern="android:versionCode=&quot;.*&quot;"/>
      <substitution expression="android:versionCode=&quot;${build.number}&quot;"/>
  </replaceregexp>
</target> 
```

您的版本名称和内部版本号分别由`${version.name}`和指定`${build.number}`。由于它们是属性，因此您还可以在命令行上或作为持续集成设置的一部分指定它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T09:01:40.423

通过 Ruby 更新 AndroidManifest，请参阅[https://gist.github.com/cybertk/24ce4d20d76f9d6a16c6](https://gist.github.com/cybertk/24ce4d20d76f9d6a16c6)

```
 File.open('AndroidManifest.xml', 'r+') do |f|
        manifest = f.read

        build = ENV['TRAVIS_BUILD_NUMBER'] || 0
        # Update version
        manifest = manifest.gsub(
            /android:versionCode=".*"/, "android:versionCode=\"#{build}\"")

        # Write back
        f.rewind
        f.truncate(0)
        f.write(manifest)
    end 
```

# jquery - 移动网站的 .load() 替代方案

> ID：14161566
> 
> 赞同：0
> 
> 时间：2013-01-04T17:08:29.760
> 
> 标签：jquery, mobile, web

我正在使用 javascript .load() 函数将内容加载到 div 包装器中，但它在 android 上的 dolphin 移动浏览器中不起作用。所以我有：

```
$('#wrapper').load('content.php'); 
```

这会使网站崩溃。它适用于 iPhone 上的移动 Safari。这个代码有替代品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:12:48.207

```
$.get('content.php', function(data) {
$('#wrapper').html(data);
}); 
```

# django - Django：用户注册时保存推荐人

> ID：14161568
> 
> 赞同：3
> 
> 时间：2013-01-04T17:08:31.063
> 
> 标签：django, http-referer

我想保存用户注册时来自的网站。我对用户在注册之前在我的网站上看到的第一页的 HTTP 引用感兴趣。

我该如何实施？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T18:42:16.470

首先，将引用者保存到会话。您可能应该在某种中间件中执行此操作：

```
import urlparse

class SaveReferrerMiddleware(object):
    def process_request(self, request):
        referer = request.META.get('HTTP_REFERER', None)
        if referer is not None:
            domain = urlparse.urlparse(referer).netloc
            if domain not in ['www.yoursite.com', 'yoursite.com']:
                # External referer
                request.session['initial_referer'] = referer 
```

（显然，根据需要更改 yoursite.com 等）

然后，在您的注册视图代码中，将会话中的引用者保存到您的用户对象。

当然，这将取决于是否有地方存储该信息。如果您有自定义用户对象，则可以为其创建一个字段。在 Django 1.5 之前，您可以使用 AUTH_PROFILE_MODULE 来扩展用户类。请参阅[https://docs.djangoproject.com/en/dev/topics/auth/customizing/#extending-the-existing-user-model](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#extending-the-existing-user-model)

# jquery - 在 Telerik MVC Grid - 自定义命令中序列化类型对象时检测到循环引用

> ID：14161571
> 
> 赞同：0
> 
> 时间：2013-01-04T17:08:51.143
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-4, telerik-mvc

我面临的可能只是我的一个小疏忽，但我正试图在我的视图中序列化一个复杂的类。运行此代码时，我不断收到循环引用。

**控制器：**

```
public JsonResult EditPrice(int id)
{
    Category cat = _categoryDataGateway.GetCategory(id);
    return Json(new {category = cat}, JsonRequestBehavior.AllowGet);
} 
```

**查询：**

```
<script type="text/javascript">
function PriceChange(e) {
    if (e.name == "PriceCategory") {
        var priceWindow = $("#PriceWindow").data("tWindow");
        var category = e.response.category;
        $("#PriceDetails")
            .find("h2")
            .text(category.Name);
        priceWindow.center().open();
    }
}
</script> 
```

**查看 + Telerik：**

```
<div>
    @(Html.Telerik().Grid(Model)
    .Name("CategoryList")
    .Localizable("is-IS")
    .Columns(columns =>
    {
        columns.Bound(o => o.Name).Width("20%");
        columns.Bound(o => o.Id).Template(o => Html.Label(o.SuperCategory())).Title("Yfirflokkur").Width("15%");
        columns.Bound(o => o.Description).Width("35%");
        columns.Command(command =>
        {
            command.Custom("EditCategory").Text("Edit").Action("Edit", "Category").DataRouteValues(r => r.Add(k => k.Id));
            command.Custom("PriceCategory").Text("Price").Action("EditPrice", "Category").DataRouteValues(r => r.Add(k => k.Id).RouteKey("Id")).Ajax(true);
            command.Custom("DeleteCategory").Text("Delete").Action("Delete", "Category").DataRouteValues(r => r.Add(k => k.Id));
        }).Width("30%").Title("Actions");
    })
    .ClientEvents(events => events.OnComplete("PriceChange"))
    .Sortable()
    .Footer(false)
)
</div>
<div>
    @(Html.Telerik().Window()
        .Name("PriceWindow")
        .Visible(false)
        .Title("Price")
        .Modal(true)
        .Width(500)
        .Height(200)
        .Content(@<text>
                    <div id="PriceDetails">
                        <h2></h2>
                        <div>
                            <input id="CategoryPrice" type="text"/>
                        </div>
                        <div>
                            <button>Submit</button>
                        </div>
                    </div>
            </text>)
    )
</div> 
```

我的目标是能够按下网格中的“价格”按钮，然后弹出一个窗口，让我可以更改价格。问题是我已经能够使用这段代码并向视图发送一个简单的字符串，并且效果很好，例如从我的控制器发送“cat.Name”而不是只发送“cat”，所以基本上当我发送复杂类型“类别”我得到循环引用。
任何人都可以发现我的失败吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:43:56.240

我相信我会回答我自己的问题。在我发布问题后不久，我尝试了其他方法并且它起作用了，如下所示：

**控制器：**

```
public JsonResult EditPrice(int id)
{
    Category cat = _categoryDataGateway.GetCategory(id);
    return Json(new {Id = cat.Id, Name = cat.Name}, JsonRequestBehavior.AllowGet);
} 
```

**查询：**

```
<script type="text/javascript">
function PriceChange(e) {
    if (e.name == "PriceCategory") {
        var priceWindow = $("#PriceWindow").data("tWindow");
        var id = e.response.Id;
        var name = e.response.Name;
        $("#PriceDetails")
            .find("h2")
            .text(name)
            .end()
            .find("#CategoryIdHidden")
            .attr("value", id);
        priceWindow.center().open();
    }
}
</script> 
```

**Telerik 窗口：**

```
<div>
    @(Html.Telerik().Window()
        .Name("PriceWindow")
        .Visible(false)
        .Title("Verð")
        .Modal(true)
        .Width(300)
        .Height(200)
        .Content(@<text>
                    <div id="PriceDetails">
                        <h2></h2>
                        <div>
                            <input id="CategoryPrice" type="text"/>
                            <input id="CategoryIdHidden" type="hidden"/>
                        </div>
                        <div>
                            <span class="art-button-wrapper"onmouseover="className='art-button-wrapper hover'"
                                    onmouseout="className='art-button-wrapper'">
                                <span class="art-button-l"></span><span class="art-button-r "></span>
                                <button class="art-button">Breyta verði</button>
                            </span>
                        </div>
                    </div>
            </text>)
    )
</div> 
```

问题是我只需要从我的复杂类型中获取位并将其单独发送到视图以在那里进行序列化。还是非常感谢 ：）

# asp.net - 将 .cs 类文件转换为 .dll

> ID：14161575
> 
> 赞同：2
> 
> 时间：2013-01-04T17:09:23.053
> 
> 标签：asp.net, .net, vb.net, c#

我正在尝试将著名的 BingSearchContainer.cs 类文件转换为 .dll，以便可以在 vb.net 项目中使用它。我已阅读并遵循此处提到的每一步

[http://footyntech.wordpress.com/2011/07/27/creating-and-using-dll-files/](http://footyntech.wordpress.com/2011/07/27/creating-and-using-dll-files/)

但是，当我编译时，它给了我底部屏幕截图中显示的几个错误 ![在此处输入图像描述](../Images/5f28127ec9741ca3c26ca0776b2bdabe.png)

我还尝试将 .NET Framework 从 3.5 更改为 4.0，反之亦然，但没有运气。

有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T17:25:49.520

您必须引用代码使用的所需程序集，例如 System.Data.dll。使用命令行编译器，您可以使用开关 /r

```
csc /target:library /r:System.Data.dll /r:System.Data.Services.Client.dll /out:Student.dll BingSearchContainer.cs 
```

对于缺少的每种数据类型，您必须在 MSDN 中检查该数据类型所在的程序集并将其添加到列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T17:27:56.947

从这篇文章： [http ://weblogs.asp.net/sreejukg/archive/2012/07/04/integrate-bing-search-api-to-asp-net-application.aspx](http://weblogs.asp.net/sreejukg/archive/2012/07/04/integrate-bing-search-api-to-asp-net-application.aspx)

在我看来，您缺少这部分：

> 要构建代码文件，您需要添加对以下库的引用。System.Data.Services.Client

至少在我的系统上，这个程序集位于：

C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.0\System.Data.Services.Client.dll

因此，您需要从那里获取 System.Data.Services.Client 并将其复制到本地构建文件夹。然后添加`/reference:System.Data.Services.Client`到 csc 的命令行。或者，当然，只需使用 Visual Studio 并使用“添加引用...”的 .NET 选项卡为项目添加对 System.Data.Services.Client 的引用。

# java - 带对象的构造函数

> ID：14161576
> 
> 赞同：2
> 
> 时间：2013-01-04T17:09:24.810
> 
> 标签：java, constructor

我的代码处理两个类：Point 和 Line。线由两个点组成：

```
import java.util.Scanner;

public class Line {
Scanner scan = new Scanner (System.in);
private Point p1,p2;

public Line(int x1, int x2, int y1, int y2){
    p1=new Point(x1,y1);
    p2=new Point (x2,y2); 
```

现在我必须制作构造函数，但由于别名，我担心这段代码是不合法的：

```
public Line (Point p1, Point p2){
    this.p1=p1;
    this.p2=p2; 
    Line a1=new Line (p1.getX(),p1.getY(),(p2.getX()),p2.getY()); 
```

字符串 toString 方法：

```
public String toString()
{
    return "Line between: (" +  p1 + p2 + ")"; 
} 
```

主要是：

```
Point a=new Point (1,2);
    Point b=new Point (2,3);
    Line x=new Line(a,b);
    System.out.println(a);
    System.out.println(b);
    System.out.println(x); 
```

这里的输出应该是这样，但我的问题是：1）构造函数还可以吗？是否会导致混叠？2) String toString 方法是否合法？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:15:57.527

您应该将构造函数更改为：

```
public Line (Point p1, Point p2){
    this(p1.getX(),p1.getY(),(p2.getX()),p2.getY());
} 
```

局部`a1`变量没有意义（如前所述）。

真的，您可以改变构造函数的调用方式，并让主构造函数成为带有点的构造函数。这将简化为：

```
public Line(Point p1, Point p2) {
    this.p1 = p1; this.p2 = p2;
}

public Line(int x1, int y1, int x2, int y2) {
    this(new Point(x1, y1), new Point(x2, y2);
} 
```

山姆我很好地说明了如果一个点发生变化（我+1）会发生什么。解决此问题的一种简单方法是使点和线不可变。

toString 方法也很好。`p1`并且`p2`是实例变量，如果没有具有这些名称的局部变量或参数，则编译器会查找具有匹配名称的实例变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T17:16:09.073

构造函数是否可以取决于您的要求，除了 1 部分

```
Line a1=new Line (p1.getX(),p1.getY(),(p2.getX()),p2.getY()); 
```

如果那行代码有一个目的，那么该目的可能会被排除在您的示例之外，因为`a1`除非您对它执行某些操作，否则当构造函数完成时将超出范围。

* * *

您的构造函数所做的是获取您在 main 中声明的点，并将它们放入`Line x`. 如果你做类似的事情

```
Line x=new Line(a,b);
Line y=new Line(a,b); 
```

than`Line y`具有相同的点`Line x`，并且当您更改其中一个点的值时，您会为另一个更改它。

现在，如果您对此感到担心，那么您可以做类似的事情

```
public Line (Point p1, Point p2){
    this.p1=new Point(p1.getX(), p1.getY);
    this.p2=new Point(p2.getX(), p2.getY); 
    ... 
```

那只会复制该行

# mysql - 用户'root'@'localhost'的MySql访问被拒绝（使用密码：YES）

> ID：14161581
> 
> 赞同：0
> 
> 时间：2013-01-04T17:09:32.887
> 
> 标签：mysql, access-denied

我在访问 mysql 时遇到命令行问题。

```
Entering /usr/syno/mysql/bin/mysql -uroot -pxxxx -hlocalhost mediawiki 
```

给我

```
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES) 
```

但是，如果我省略密码，

```
/usr/syno/mysql/bin/mysql -uroot -p -hlocalhost mediawiki 
```

系统提示我输入密码并可以登录。

我在第一个命令行中做错了什么？

MySql 版本：5.1.49

`OS: Linux DiskStation 2.6.32.12 #2661 Mon Nov 12 23:09:58 CST 2012 armv5tel GNU/Linux (Synology NAS)`

迈凯尔

# android - 能够为谷歌地图意图选择方向类型

> ID：14161591
> 
> 赞同：1
> 
> 时间：2013-01-04T17:10:11.380
> 
> 标签：android, google-maps, android-intent

我正在使用谷歌地图来获取方向。问题在于，无论我在谷歌地图应用程序上搜索的最后一种方向是什么，这些方向都会出现。

例如，如果我最后使用谷歌地图获取步行路线，当我使用我的应用程序时，路线将自动搜索步行路线。

我想让用户能够选择他们的方向类型。

这是一个代码片段：

```
String directions = "http://maps.google.com/maps?saddr=" + myLocationString + "&daddr=" + officeLocationString;

                            // Create Google Maps intent from current location to  target location
                            Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
                                    Uri.parse(directions));
                            intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
                            fcontext.startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-10T15:41:02.310

我无法让它与上面的“&directionsmode =”一起工作，它只是被忽略了。我在浏览器中使用来自谷歌地图的 URL 进行了一些修改，我发现“&dirflg”在浏览器和安卓操作系统。

与这些值一起使用：r = 公交，b = 骑自行车，d = 驾驶，w = 步行

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T17:54:55.857

**编辑：截至 2013 年 1 月，Google Directions API 已更新，结果现在以 JSON 格式提供。URL 格式现在看起来像这样**：

`http://maps.googleapis.com/maps/api/directions/xml?origin=Chicago,IL&destination=Los+Angeles,CA&waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false`

**更多信息可[在此处](https://developers.google.com/maps/documentation/directions/)获得。**

* * *

将`directionsmode`参数添加到您的 URI 应该可以满足您的需求。

从[URL 方案文档](https://developers.google.com/maps/documentation/directions/)：

> 方向方式：运输方式。可设置为：驾车、公交或步行。

因此，也许您可​​以尝试以下方法：

```
String directions = "http://maps.google.com/maps?saddr=" + myLocationString + "&daddr=" + officeLocationString + "&directionsmode=" + directionsMode; 
```

# html - 自定义 HTML5 视频停止点/帧

> ID：14161599
> 
> 赞同：1
> 
> 时间：2013-01-04T17:10:45.560
> 
> 标签：html, video

嵌入普通 HTML5 视频时；视频将在视频的最后一帧停止并保持空闲。我希望视频停止；并显示不是第一帧，但可能是第二帧。这可能吗？例如。播放一次后；它停在第一个实际帧上（不是黑色）

基本上; 我正在创建按钮；每个按钮都会显示我设置为自动播放的 HTML5 视频；从那里我想要之前单击的按钮以显示 html5 视频的第一个实际帧；一旦它已经播放。我认为开始后 1 秒应该这样做；因为它将第一个“区域或框架”显示为黑色。

如何在 HTML5 中使用自动播放播放视频后自定义冻结帧的位置。

**编辑：//**

**我刚刚在下面尝试过，没有这样的运气；**

```
<script>

video.onended = function(e) {
/*Do things here?*/

{
    video.currentTime = 3.0;
}

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:12:38.037

您可以使用媒体 API 来监听`ended`事件，一旦它被触发，然后将视频设置为`currentTime`您想要的任何值（例如 1 秒）。

**编辑**

试试这个：

```
video.addEventListener('ended', function() { 
   this.currentTime = 1; 
}, false); 
```

`video`您的视频元素的句柄在哪里。

# xml - xslt 在 2 个值之间进行选择

> ID：14161600
> 
> 赞同：3
> 
> 时间：2013-01-04T17:10:50.023
> 
> 标签：xml, xslt, xpath

是否可以使用 xslt 仅选择介于 2 个给定值之间的那些值？

IE

```
<value>1</value> 
<value>1.2</value>
<value>1.3</value>
<value>1.4</value>
<value>1.5</value>
<value>2</value> 
<value>2.1</value>
<value>2.3</value>
<value>2.4</value>
<value>2.5</value> 
```

我只想显示 1 到 2 之间的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:05:52.697

当然：

```
select="value[. &gt; 1 and . &lt; 2]" 
```

如果要包括 1 和 2：

```
select="value[. &gt;= 1 and . &lt;= 2]" 
```

如果上限和下限在变量中（此处使用 $min 和 $max 作为示例）：

```
select="value[. &gt; $min and . &lt; $max]" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:27:34.953

与其他答案不同，我更喜欢使用身份覆盖

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="@* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="value[. &lt; 1 or . &gt; 2]"/>
</xsl:stylesheet> 
```

输出：

```
<root>
  <value>1</value> 
  <value>1.2</value>
  <value>1.3</value>
  <value>1.4</value>
  <value>1.5</value>
  <value>2</value> 
</root> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T04:18:39.597

**如果对值进行了排序（如在提供的 XML 文档中），这会更快——尤其是在`valu`最后一个想要的元素后面有很多元素`value`的**情况下：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <xsl:variable name="vStart" select=
   "(*[.>=1][1]
   |
    *[1]
    )
     [last()]
   "/>

  <xsl:variable name="vEnd" select=
   "($vStart/following-sibling::*[. > 2][1]
                             /preceding-sibling::*[1]
   |
    *[last()]
    )
     [1]
   "/>

  <xsl:variable name="vPosRange" select=
  "count($vEnd/preceding-sibling::*) - count($vStart/preceding-sibling::*)"/>

  <xsl:copy-of select=
   "$vStart|$vStart/following-sibling::*[not(position() > $vPosRange)]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<t>
    <value>1</value>
    <value>1.2</value>
    <value>1.3</value>
    <value>1.4</value>
    <value>1.5</value>
    <value>2</value>
    <value>2.1</value>
    <value>2.3</value>
    <value>2.4</value>
    <value>2.5</value>
</t> 
```

**产生了想要的正确结果**：

```
<value>1</value>
<value>1.2</value>
<value>1.3</value>
<value>1.4</value>
<value>1.5</value>
<value>2</value> 
```

**请注意**：

**在实践中，这为我们提供了一个纯 XPath 1.0 解决方案**，我们可以用它们定义的 XPath 表达式进行`$vPosRange`替换`$vStart`。`$vEnd`

# core-data - 将核心数据属性加载到文本字段

> ID：14161606
> 
> 赞同：0
> 
> 时间：2013-01-04T17:11:16.123
> 
> 标签：core-data, nsfetchedresultscontroller, viewdidload, fetched-property

我无法找到将保存的核心数据加载到文本字段的正确方法。我有一个带有静态单元格的视图，每个单元格都有多个文本字段，没什么特别的，这个想法只是填充文本字段并点击保存按钮，每次用户进入此视图时，文本字段都会显示最后一个估算的文本。

在保存部分之前一切正常，问题是切换到另一个视图然后返回时，文本字段未填充。我知道我必须使用视图加载和获取数据，但我不知道我做错了什么：

```
- (void)viewDidLoad
{

AppDelegate *appDelegate =[[UIApplication sharedApplication] delegate];
self.managedObjectContext=[appDelegate managedObjectContext];

NSError *error;
if (![[self fetchedResultsController] performFetch:&error]) 
{
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
}

[self fetchedResultsController];

self.myTextfield.text = myCoreDataVariable.coreDataProperty;

}

- (NSFetchedResultsController *)fetchedResultsController
{
if (_fetchedResultsController != nil)
{
    return _fetchedResultsController;
}

NSFetchRequest *fetchRequestDefinitions = [[NSFetchRequest alloc] init];
NSEntityDescription *entitydefinitionsData = [NSEntityDescription entityForName:@"DefinitionsData" inManagedObjectContext:self.managedObjectContext];
[fetchRequestDefinitions setEntity:entitydefinitionsData];

return _fetchedResultsController;
}

- (IBAction)Guardar:(id)sender
{
if (myCoreDataVariable == NULL)
{
    myCoreDataVariable = [NSEntityDescription insertNewObjectForEntityForName:@"DefinitionsData" inManagedObjectContext:self.managedObjectContext];
}

myCoreDataVariable.coreDataProperty = self.myTextfield.text;

[self.managedObjectContext save:Nil];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:14:59.020

刷新你的用户界面，`viewWillAppear`因为`viewDidLoad`get 在视图（或 nib 文件）初始化期间基本上只调用一次。

# selenium-webdriver - 使用 Selenium Webdriver sendkeys 在文本框中输入文本时出现问题

> ID：14161613
> 
> 赞同：1
> 
> 时间：2013-01-04T17:11:49.100
> 
> 标签：selenium-webdriver

我在使用 Selenium Webdriver 在文本框中输入文本时遇到问题。

我执行以下操作：

```
 element.clear();
            element.click();
            element.sendKeys(Keys.BACK_SPACE);
            element.sendKeys("Joe"); 
```

它输入“Joe”，但它是灰色的，这意味着它只是清除默认值，然后输入而不是单击文本框，然后输入它。当我手动输入“Joe”时，我单击文本框，使光标位于文本框中，但 element.click() 不会为我执行此操作。

谁能建议我一个解决方案？

![在此处输入图像描述](../Images/c8dfd705d499b409c1f70523728b4c63.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T22:09:21.283

你试过这个吗？您不必单击和退格。

```
element.clear();
element.sendKeys("Joe"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:22:41.357

尝试这个 `new Actions(driver).moveToElement(element).click().perform();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-05T09:15:40.490

```
Actions a = new Actions(driver);
a.SendKeys(element, "Your Text").Build().Perform(); 
```

# c# - 将 JSON.NET JObject 的属性/标记转换为字典键

> ID：14161615
> 
> 赞同：21
> 
> 时间：2013-01-04T17:11:58.567
> 
> 标签：c#, .net, json.net

我正在使用 JSON.NET 使用 .NET 解析来自 openexhangerates.org 服务器端的 JSON 响应。响应包含一个嵌套对象（“rates”），其中包含一长串数字属性：

```
 {
    "disclaimer": "Exchange rates provided for informational purposes only, with no guarantee whatsoever of accuracy, validity, availability, or fitness for any purpose; use at your own risk. Other than that, have fun! Usage subject to acceptance of terms: http://openexchangerates.org/terms/",
    "license": "Data sourced from various providers with public-facing APIs; copyright may apply; not for resale; no warranties given. Usage subject to acceptance of license agreement: http://openexchangerates.org/license/",
        "timestamp": 1357268408,
        "base": "USD",
        "rates": {
            "AED": 3.673033,
            "AFN": 51.5663,
            "ALL": 106.813749,
            "AMD": 403.579996,
            etc...
        }
    } 
```

属性名称对应于货币类型（例如“USD”）。我需要假设属性列表会随着时间而改变，所以我想将对象转换为 Dictionary 而不是相应的 C# 对象。

因此，不要将 JSON 对象反序列化为以下内容：

```
class Rates
{
public decimal AED; // United Arab Emirates Dirham
public decimal AFN; // Afghan Afghani
public decimal ALL; // Albanian Lek
public decimal AMD; // Armenian Dram
// etc...
} 
```

我想结束这个：

```
Dictionary<string,decimal>() {{"AED",0.2828},{"AFN",0.3373},{"ALL",2.2823},{"AMD",33.378} // etc...}; 
```

如何从响应字符串或调用 JObject.Parse(responseString) 生成的 JObject 开始执行此操作？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-04T17:15:03.347

`JObject`已经实现`IDictionary<string, JToken>`，所以我怀疑当您向下导航到该`rates`成员时，您应该能够使用：

```
var result = rates.ToDictionary(pair => pair.Key, pair => (decimal) pair.Value); 
```

不幸的是，它使用显式接口实现，这让这有点痛苦——但如果你通过`IDictionary<string, JToken>`接口，那就没问题了。

这是一个简短但完整的示例，它似乎适用于您提供的 JSON（保存到`test.json`文件中）：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Newtonsoft.Json.Linq;

class Test
{
    static void Main()
    {
        JObject parsed = JObject.Parse(File.ReadAllText("test.json"));
        IDictionary<string, JToken> rates = (JObject) parsed["rates"];
        // Explicit typing just for "proof" here
        Dictionary<string, decimal> dictionary =
            rates.ToDictionary(pair => pair.Key,
                               pair => (decimal) pair.Value);
        Console.WriteLine(dictionary["ALL"]);
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-21T01:54:28.797

这对你有用吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using Newtonsoft.Json.Linq;

namespace JsonNetTest
{

    class Program
    {
        static void Main(string[] args)
        {

            string jsonString = @"{
                'disclaimer': 'Exchange rates provided for informational purposes only, with no guarantee whatsoever of accuracy, validity, availability, or fitness for any purpose; use at your own risk. Other than that, have fun! Usage subject to acceptance of terms: http://openexchangerates.org/terms/',
                'license': 'Data sourced from various providers with public-facing APIs; copyright may apply; not for resale; no warranties given. Usage subject to acceptance of license agreement: http://openexchangerates.org/license/',
                'timestamp': 1357268408,
                'base': 'USD',
                'rates': {
                    'AED': 3.673033,
                    'AFN': 51.5663,
                    'ALL': 106.813749,
                    'AMD': 403.579996
                }
            }";

            JObject parsed = JObject.Parse(jsonString);

            Dictionary<string, decimal> rates = parsed["rates"].ToObject<Dictionary<string, decimal>>();

            Console.WriteLine(rates["ALL"]);

            Console.ReadKey();

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-10T10:54:51.637

如果您期望子对象具有对象属性（或字段），最好使用：

```
Dictionary<string, object> rates = parsed["rates"].ToObject<Dictionary<string, object>>(); 
```

否则会抛出错误。

# java - Struts2 使用 toString 方法代替 TypeConverter

> ID：14161616
> 
> 赞同：0
> 
> 时间：2013-01-04T17:12:01.050
> 
> 标签：java, struts2

我有一个 Struts2 应用程序，我正在尝试使用自定义类型转换器。

```
<s:a action="documentView">  
  <s:param name="documentTag" value="constructTag(#aDocumentIndex)"/>  
  view  
</s:a> 
```

`constructTag`只是一个返回一个动作方法`documentTag`

```
public DocumentTag constructTag(DocumentIndex documentIndex) {  
  return new DocumentTag(documentIndex);  
} 
```

呈现页面时`toString`使用方法而不是类型转换器。为什么 ？

PS：调用动作时类型转换器正常工作`documentView`。

# git - 带有指纹的密钥在 Heroku 中未授权

> ID：14161621
> 
> 赞同：3
> 
> 时间：2013-01-04T17:12:28.390
> 
> 标签：git, heroku

像许多其他人一样，尝试让我的应用程序推送到 Heroku，但不断收到此错误

```
$ heroku login
Enter your Heroku credentials.
Email: my@email.com
Password (typing will be hidden): 
Found existing public key: /Users/scotty/.ssh/id_rsa.pub
Uploading SSH public key /Users/scotty/.ssh/id_rsa.pub... done
Authentication successful.
$ git push heroku master

 !  Your key with fingerprint xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx:xx is not authorized to access todolist.

fatal: The remote end hung up unexpectedly 
```

我完成了[Heroku 页面](https://devcenter.heroku.com/articles/keys)上的所有步骤，并且在这些类似问题中尝试了大多数建议的修复：

[您的带有指纹的密钥 .... 无权访问... myapp。远端意外挂断。HEROKU，GIT 克隆](https://stackoverflow.com/questions/11499481/your-key-with-fingerprint-is-not-authorized-to-access-myapp-the-remote)

[当我尝试将最新更改推送到 Heroku 时，为什么我的带指纹的密钥未授权？](https://stackoverflow.com/questions/9049905/why-is-my-key-w-fingerprint-not-authorized-when-i-try-to-push-latest-changes-to)

[无法推送到 Heroku，因为密钥指纹](https://stackoverflow.com/questions/8786564/cannot-push-to-heroku-because-key-fingerprint)

我为 heroku 添加了一个新密钥，尝试使用 ssh-add -D 命令删除所有密钥，从 Heroku 中删除所有密钥，无论我尝试什么，我仍然得到相同的错误。

我只有一个 Heroku 帐户，所以多帐户问题不是问题。我现在只有一个 ssh 密钥，可用于我的 macbook 上的 github。

有没有人在上面链接的答案中没有提到任何建议？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T03:34:08.590

使用以下命令生成新密钥：

```
 ssh-keygen -t rsa -f ~/.ssh/id_rsa_heroku 
```

将其添加到本地 ssh 代理：

```
ssh-add ~/.ssh/id_rsa_heroku 
```

确保新密钥显示在 ssh-agent 中：

```
 ssh-add -l 
```

使用 -d 标志删除不必要的键。（这不会删除密钥，只会将其从 ssh-agent 中删除。）

```
ssh-add -d /Users/Niko/.ssh/id_rsa_hellonico 
```

将 ssh 密钥添加到您的帐户：

[https://dashboard.heroku.com/account](https://dashboard.heroku.com/account)

准备推送到heroku

```
git push heroku master 
```

# php - codeigniter 显示目录中的图像

> ID：14161623
> 
> 赞同：1
> 
> 时间：2013-01-04T17:12:33.207
> 
> 标签：php, image, codeigniter

我正在尝试通过浏览器中的函数显示我的codeigniter代码目录中的所有图像，因此我使用以下代码：

```
$imgdir = 'upload/'; //Pick your folder
$allowed_types = array('png','jpg','jpeg','gif'); //Allowed types of files
$dimg = opendir($imgdir);//Open directory
while($imgfile = readdir($dimg))
{

if( in_array(strtolower(substr($imgfile,-3)),$allowed_types) OR
in_array(strtolower(substr($imgfile,-4)),$allowed_types) )
/*If the file is an image add it to the array*/
{$a_img[] = $imgfile;}
}
echo "<ul>";

$totimg = count($a_img);  //The total count of all the images
//Echo out the images and their paths incased in an li.
for($x=0; $x < $totimg; $x++){echo "<li><img src='http://localhost/code/'" . $imgdir . $a_img[$x] . "' /></li>"; echo $imgdir . $a_img[$x];} 
echo "<li><img src='http://localhost/code/upload/corrosivo.jpg' /></li>";
echo "</ul>"; 
```

我不明白的是为什么我在以下浏览器中得到损坏的图像框：

```
echo "<li><img src='http://localhost/code/'" . $imgdir . $a_img[$x] . "' /></li>"; echo $imgdir . $a_img[$x];} 
```

与：

```
echo "<li><img src='http://localhost/code/upload/corrosivo.jpg' /></li>"; 
```

图像显示成功。

我已经验证了变量并且它们具有正确的内容。

# github - 我忘记了 github 密码。我在 GitHub 上更改了 SSH 密钥……但仍然不起作用

> ID：14161626
> 
> 赞同：0
> 
> 时间：2013-01-04T17:12:38.850
> 
> 标签：github, ssh-keys

现在，我在 GitHub 上有一个新密钥和一个新密码……但是：

`ssh -T git@github.com`

代理承认未能使用密钥签名。权限被拒绝（公钥）。

我关注的 Ubuntu 12.10：[https ://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-01T21:33:31.563

尝试`SSH_AUTH_SOCK=0`在 ssh 命令之前添加。喜欢`SSH_AUTH_SOCK=0 ssh user@server`

如果它对您有用，请添加`SSH_AUTH_SOCK=0`到您的 .bashrc 文件中。问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-27T01:02:04.083

阅读您的**ssh 密钥**：cat ~/.ssh/id_rsa.pub

复制它们并粘贴到**Github中的“** **SSH KEY** ” 。然后添加新的ssh密钥让机器识别：

 **```
ssh-add ~/.ssh/id_rsa 
```

问题将得到解决。**

# rspec - 从基于时间的 ID 动态添加的 JS capybara 中选择一个选项

> ID：14161627
> 
> 赞同：1
> 
> 时间：2013-01-04T17:12:38.477
> 
> 标签：rspec, capybara

我正在使用基于 Railscasts 的 js 代码向我的页面添加新课程。

使用 Rspec 和 Capybara 进行测试时，如何从动态生成的选择菜单中选择一个选项，该选项具有基于时间的唯一 ID？

我的想法是完成所有选择菜单，并抓住最后一个，但我没有点击任何东西。

Rspec 代码：

```
 click_link "Edit "
        click_link "Add Another Lesson" #this then uses JS to put another select menu on the screen.
        select("Lesson 2", from: "#{ideally it would find the last select tag here}") #this is what i don't know how to find. 
```

我知道有`all` 但不确定如何使用 Xpath 来查找最后一个选择标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:01:57.193

[Actions#select](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions#select-instance_method)只能通过名称、id 或标签文本来查找元素。你没有它，所以你应该使用[Element#select_option](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Element#select_option-instance_method)。我不知道任何 CSS 或 XPath 选择器会选择整个页面上的最后一个元素，所以我认为您可以使用：

`all('select').last.find(:option, 'Lesson 2').select_option`

查找所有选择但只使用最后一个可能看起来有点难看。在另一个元素中选择它可能会更好：

```
find(some_selector).find('select').find(:option, 'Lesson 2').select_option 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T20:06:18.687

伙计让我走得很远，谢谢@Andrey。

对我有用的是，对于 text_field 输入：

`all(:css, '.hearter')[0].set "Just Awesome Man"`

对于选择标签：

`all(:css, '.js-select')[0].select("1") # "1" was my value`

# php - Codeigniter 相对路径文件

> ID：14161629
> 
> 赞同：1
> 
> 时间：2013-01-04T17:12:42.173
> 
> 标签：php, codeigniter

我是codeigniter（和一般的php）的新手，我正在按照教程学习它。按照此链接：[https ://www.codeigniter.com/user_guide/tutorial/static_pages.html](https://www.codeigniter.com/user_guide/tutorial/static_pages.html)

在控制器中，它使用检查文件是否存在

```
 if ( ! file_exists('application/views/pages/'.$page.'.php')) 
```

我的问题是：这个脚本是从 application/controllers/pages.php 运行的，所以给定的路径不是`file_exists`相对于当前脚本吗？也就是说，它应该指向 application/controllers/application/views/pages/'.$page.'.php'。

然而，情况并非如此，路径实际上检查相对于路径根的文件！那么这是 php 问题还是 codeigniter ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:15:30.483

所有路径都相对于*入口*脚本（可能`index.php`或任何 Codeigniter 使用）。

要获取相对于当前脚本的路径，请使用`__FILE__`常量。

```
file_exists(dirname(__FILE__) . "/path/to/file.php"); 
```

# visual-studio - 为什么 web.config 总是使用 web deploy 更新

> ID：14161630
> 
> 赞同：1
> 
> 时间：2013-01-04T17:12:47.127
> 
> 标签：visual-studio, webdeploy

我使用 Visual Studio 2012 和 Web Deploy 将文件上传到网站。

当我在“编辑发布配置文件”中“开始预览”时，我总是在需要上传的文件列表中获得 Web.Config。

为什么在我的开发 PC 或网站上未更改 web.config 时会出现这种情况？

注意：在这种情况下，我没有使用 we.config 转换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:29:05.233

我的猜测是 web.config 转换过程会更新文件的最后修改日期，*无论您是否声明 transforms*。由于 MSDeploy 默认使用 last modified 作为执行更新的比较，因此每次都会更新文件。

（在您询问之前：如果您直接使用 msdeploy.exe，则可以切换到基于校验和的部署，但如果您使用 MSBuild，则不能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T20:18:22.733

Web.config 始终会更新，因为系统无法比较本地与远程，因为转换可能会更改 Web.config 文件的内容。即使您没有更改默认转换文件中的任何内容，或者即使您删除了转换文件，系统也会表现得好像可以进行转换一样。

# javascript - 如何改进 MODE.MULT 的实现

> ID：14161632
> 
> 赞同：2
> 
> 时间：2013-01-04T17:12:58.507
> 
> 标签：javascript, excel, underscore.js, excel-formula, lodash

我编写了 Microsoft Excel 的[MODE.MULT](http://office.microsoft.com/en-us/excel-help/mode-mult-function-HA102753222.aspx)函数的一个相对复杂的实现，该函数返回一个数组中最常出现或重复的值的数组。它是用三个循环实现的，包括一个嵌套到另一个循环中，我怀疑有一种更简单的方法来解决它。有关信息，它使用[Lo-Dash中的](https://github.com/bestiejs/lodash)[_.uniq](http://lodash.com/docs#uniq)从返回的数组中提取重复值。

```
function MODEMULT(range) {
  var n = range.length;
  var max = 0;
  var counts = new Array();
  var result = new Array();
  for (var i = 0; i < n; i++) {
    counts[i] = 0;
    for (var j = 0; j < n; j++) {
      if (range[j] === range [i]) {
        counts[i]++;
        max = (counts[i] > max) ? counts[i] : max;
      }
    }
  }
  for (var k = 0; k < n; k++) {
    if (counts[k] === max) {
      result.push(range[k]);
    }
  }
  return _.uniq(result);
} 
```

出于测试目的，`MODEMULT([1,2,3,4,3,2,1,2,3])`应返回`[2,3]`

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:26:27.790

您可以使用更少的循环，尽管这会影响内存使用，因为您将计算原始范围内的所有唯一条目：

```
function MODEMULT(range) {
  var n = range.length,
      // object to hold the number of occurrences per entry
      count= {},
      // array to hold those numbers which have the current max occurrences 
      maxItems = [],
      // reference to the current maximum
      max = 0,
      // JSLint placement of currentItem used inside the loop
      currentItem;

  for (var i = 0; i < n; i++) {
    currentItem= range[i];

    // Update the occurrences table.
    count[currentItem] = count[currentItem] ? count[currentItem] + 1 : 1;

    // If a new maximum is created, void the original maxItems and update max.
    if (count[currentItem] > max) {
       max = count[currentItem];
       maxItems = [];
    }

    // If the entry reaches the current max, add it to maxItems.
    if (count[currentItem] === max) {
        maxItems[maxItems.length] = currentItem;
    }
  }

  // No need for unique, as a duplicate value
  // will increase max and thus empty out maxItems.
  return maxItems;
} 
```

# vb.net - 我只希望字母被接受到 vb.net 上的文本框中

> ID：14161634
> 
> 赞同：0
> 
> 时间：2013-01-04T17:13:01.693
> 
> 标签：vb.net, string, validation, textbox, character

我一直在尝试这样做，所以文本框只接受字母，但验证不起作用。即使我输入数字，它也会处理它并显示“Thankyou for your details”的第一个 lblError，它实际上应该是“Enter A Valid Name”。对于此类问题，它们是类似于 IsNumeric 的验证测试吗？请帮助

```
 Dim MyName As String
    If txtMyName.Text Then
        MyName = txtMyName.Text
        lblError.Text = "Thankyou for your details"
    Else
        lblError.Text = "Enter A Valid Name "

    End If

End Sub 
```

结束类

而且我需要简单的方法，不需要 [a-zA-Z0-9] 或 RegEx 模式，因为我研究了这些但我无法使用它们。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:17:25.157

您可以检查文本字符串，即 textbox1.text，以确保它在 .Leave 事件中除了字母字符之外没有任何内容。例如，当用户切换到下一个控件时，这将捕获一个错误。您可以使用正则表达式来执行此操作（在此示例中导入 System.Text.RegularExpressions），或者您可以“手动”检查文本。

```
Private Sub TextBox1_Leave(ByVal sender As Object, ByVal e As System.EventArgs) Handles TextBox1.Leave
  If Not Regex.Match(TextBox1.Text, "^[a-z]*$", RegexOptions.IgnoreCase).Success Then
    MsgBox("Please enter alpha text only.")
    TextBox1.Focus()
  End If

End Sub 
```

如果您想在按下非字母键时立即停止用户，您可以使用 TextChanged 事件而不是 .Leave 事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T22:11:37.147

正则表达式是最干净的方法。但是你问了很长的路...

这通过从字符串中删除所有大写和小写字母来工作 - 留下任何其他内容。如果我们`stringname.length`在删除完成后查看字符串有多长时间，并发现数字为零，则验证通过。但是，如果数字大于零，则我们的字符串包含非字母字符。

```
If (TextBox1.Text <> "") Then

    Dim userInput As String = TextBox1.Text
    Dim filteredUserInput As String = userInput

    Dim listOfLetters As String() = New String() {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "a", "b", "c", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"}
    ' go through each letter in the 'listOfLetters' array and replace that letter with.. nothing
    For Each letter In listOfLetters
        filteredUserInput = Replace(filteredUserInput, letter, "")
    Next

    ' now we have done the work - count how many characters are left in the string, if it is more than 0 we have invalid characters
    If (filteredUserInput <> "") Then
        MsgBox("This failed validation, contains invalid chars (" + Str(filteredUserInput.Length) + ")")
    Else
        MsgBox("This passed validation")
    End If

End If 
```

或者如果你想要它功能化..

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    If (TextBox1.Text <> "") Then

        Dim userInput As String = TextBox1.Text
        ' if the 'isThisAValidString()' returns true then it is a valid (and has not faild validation) a-zA-Z
        If (isThisAValidString(userInput) = True) Then
            MsgBox("This is valid")
        Else
            MsgBox("This is not valid")
        End If

    End If

End Sub

Function isThisAValidString(input As String)

    Dim userInput As String = input
    Dim filteredUserInput As String = userInput

    Dim listOfLetters As String() = New String() {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "a", "b", "c", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z"}
    ' go through each letter in the 'listOfLetters' array and replace that letter with.. nothing
    For Each letter In listOfLetters
        filteredUserInput = Replace(filteredUserInput, letter, "")
    Next

    ' now we have done the work - count how many characters are left in the string, if it is more than 0 we have invalid characters
    If (filteredUserInput <> "") Then
        ' this failed!
        Return False
    Else
        'this passed
        Return True
    End If

End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T17:33:04.627

为什么不是正则表达式？这是工作的正确工具，除非您在问题中遗漏了一些东西。

您可以像这样构建一个所有英文字母的数组（它是大写的），然后您可以检查名称中的所有字符是否都在数组中。

```
Private Shared Function IsLetters(s As String) As Boolean
    For Each c As Char In s.ToUpper().ToCharArray()
        If Not onlyLetters().Contains(c) Then
            Return False
        End If
    Next
    Return True
End Function

Private Shared Function onlyLetters() As Char()
    Dim strs = New List(Of Char)()
    Dim o As Char = "A"C
    For i As Integer = 0 To 25
        strs.Add(Convert.ToChar(o + i))
    Next

    Return strs.ToArray()
End Function 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-21T21:07:08.757

首先，您应该注意您使用的是 Unicode。

其次，Unicode 很复杂。特别是，.NET 字符串使用 UTF-16 代码单元，其中一个或两个编码一个代码点。此外，一些代码点是“组合字符”——它们不能独立存在，而是经常单独出现或在字母之后出现多个。

下面是验证逻辑。它遍历字符串并检查每个文本元素（又名字素）的第一个代码点是否为 Unicode 字母。

```
Dim input = "ØysteinRene"+ Char.ConvertFromUtf32(&H301) +"e Galois" 
'COMBINING ACUTE ACCENT' (U+0301)
Dim etor = System.Globalization.StringInfo.GetTextElementEnumerator(input)
While (etor.MoveNext()) 
    Dim grapheme = etor.GetTextElement()
    ' check the first codepoint in the grapheme 
    ' (others will only be "combining characters")
    If Not Char.IsLetter(grapheme,0) Then 
        Throw New Exception("Your input doesn't match my idea of a name at """  _
                             + grapheme + """")
    End If
End While 
```

顺便说一句——你对名字的看法非常狭隘。我扔了一个空格来打破一个误解；这是一个明显的案例。但是，一般来说，我不想告诉用户我认为他们的名字无效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-20T20:57:38.587

这应该有助于它适用于任何其他文本输入，例如输入框（peudo）

```
enter code here 
```

textbox1.textchanged

暗检查，检查 2 为布尔值

check = textbox1.text like " *[A-Za-z]" ' 检查字母 check2 = textbox1.text like "* [0-9]" ' 检查非字母

如果 check = true 和 check2 = false 然后附加文本 elseif check = false 或 check2 = true 然后不附加文本

希望能帮助到你

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-21T18:19:35.520

你不能使用ASCII字符吗？像这样：

> ***（在按键事件上）***

```
If Asc(e.KeyChar) <> 8 Then
  If Asc(e.KeyChar) < 65 Or Asc(e.KeyChar) > 122 Then
  ' from 65 to 90 A - Z String is allowed ( Uppercase letter )
  ' from 97 to 122 a - z String is allowed ( Lowercase letter )
    If Asc(e.KeyChar) > 97 Or Asc(e.KeyChar) < 91 Or Asc(e.KeyChar) = 95 Then
  ' As we dont need to include letters between 91-96 we add this code. 
  ' ASCII CHARACTER 95 is Underscore Character.  so we add this manually.

      e.Handled = True

    End If
  End If
End If 
```

*如果您不需要允许“_”下划线然后删除“ `Or Asc(e.KeyChar) = 95`”* 您可以轻松地做到这一点。你应该看 ASCII 字符表来自己做。***[你可以在这里](http://deepappsstore.weebly.com/uploads/2/4/7/2/24721318/3871278_orig.png)***查看表格

# c# - WPF UserControl 修改渐变部分

> ID：14161635
> 
> 赞同：0
> 
> 时间：2013-01-04T17:13:02.657
> 
> 标签：c#, wpf, button, user-controls, gradient

如果我有一个`Button`带有这样背景的简单用户控件......

```
<LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
  <GradientStop Color="Red" Offset="1" />
  <GradientStop Color="Black" Offset="0" />
</LinearGradientBrush> 
```

有没有办法暴露一个渐变停止，这样使用控件的人可以只修改第一个（例如`Red`）并将渐变保持为`Black`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:46:04.210

我假设您的意思是让用户将渐变停止颜色设置为他们自己的 XAML 的一部分？如果是这样，您可以使用 a`DependencyProperty`并将其绑定`GradientStop.Color`到它。

在 UserControl.cs 中：

```
 public CoolControl()
    {
        InitalizeComponent();
        SetValue(ColorProperty, Colors.Red); // or any default color
    }

    public static DependencyProperty ColorProperty = DependencyProperty.Register("BackgroundColor", typeof(Color), typeof(CoolControl)); // replace CoolControl with the name of your UserControl

    public Color BackgroundColor
    {
        get
        {
            return (Color)GetValue(ColorProperty);
        }
        set
        {
            SetValue(ColorProperty, value);
        }
    } 
```

在 UserControl.xaml 中：

```
 <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
        <GradientStop Color="{Binding BackgroundColor, RelativeSource={RelativeSource AncestorType={x:Type my:CoolControl}}}" Offset="1" /> <!-- replace my:CoolControl with your namespace declaration and UserControl name -->
        <GradientStop Color="Black" Offset="0" />
    </LinearGradientBrush> 
```

使用控件：

```
 <Grid>
        <my:CoolControl BackgroundColor="Blue" />
    </Grid> 
```

# objective-c - 延迟 applicationDidEnterBackground 屏幕截图

> ID：14161636
> 
> 赞同：5
> 
> 时间：2013-01-04T17:13:03.307
> 
> 标签：objective-c, ios, cocoa-touch

当应用程序进入后台时，有没有办法延迟 iOS 进行的屏幕截图？原因是当用户转到主屏幕时我有时会显示一个视图，我希望删除此视图，因此它不会在应用程序恢复时显示。有问题的视图是 我调用的 （[此处](https://github.com/soffes/sstoolkit/blob/master/SSToolkit/SSHUDView.m)`SSHUDView`为源代码） 。这实际上在模拟器中有效，但在真实设备上无效（恢复时仍然显示）。任何人都知道如何处理这个问题？`dismissAnimated:NO``applicationWillResignActive``SSHUDView`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-06T21:25:16.570

我认为你应该在`applicationDidEnterBackground:`.

根据[苹果的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)：

*   **准备为他们拍照。**当该`applicationDidEnterBackground:`方法返回时，系统会为您的应用程序的用户界面拍照，并将生成的图像用于过渡动画。如果界面中的任何视图包含敏感信息，则应在`applicationDidEnterBackground:`方法返回之前隐藏或修改这些视图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T11:23:35.547

如果您查看`SSHUDView`实现，它使用`UIWindow`实例来显示内容；它使自己的 UIWindow 成为关键`UIWindow`：

```
[_hudWindow makeKeyAndVisible]; 
```

这可能就是为什么摆脱它如此棘手的原因。您可能会尝试`SSHUDView`在它自行关闭以将焦点返回到主窗口后执行以下操作：

```
[[[[UIApplication sharedApplication] windows] objectAtIndex:0] makeKeyWindow]; 
```

当 hud 视图自行解除它发送`resignKeyWindow`到它的私有`_hudWindow`对象时，您可以尝试在将焦点返回到主窗口之前对其进行处理，如下所示：

```
[[[[UIApplication sharedApplication] windows] objectAtIndex:1] resignKeyWindow]; 
```

但它可能会导致意想不到的问题，因为你绕过了`SSHUDView`API ......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T21:06:13.297

你能不能让视图控制器显示 SSHUDView 来监听`UIApplicationWillResignActiveNotification`并`[NSNotificationCenter defaultCenter]`以这种方式隐藏它？看起来有点hacky，所以它可能不起作用。只是一个想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T21:29:53.633

这对我有用，无论是模拟器还是真实硬件。`applicationDidEnterBackground:`您可以创建一个具有黑色背景的临时视图控制器，并以模态方式将其呈现在“最顶层”视图控制器上（如果已经有一个视图控制器以模态方式呈现）。只需在应用重新打开时将其删除`applicationWillEnterForeground:`

```
#import "AppDelegate.h"

@interface AppDelegate ()
@property (strong, nonatomic) UIViewController *veilController;
@end

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = [[UIViewController alloc] initWithNibName:nil bundle:nil];
    self.window.rootViewController.view.backgroundColor = [UIColor redColor];
    [self.window makeKeyAndVisible];

    UIViewController *vc0 = [[UIViewController alloc] initWithNibName:nil bundle:nil];
    vc0.view.backgroundColor = [UIColor blueColor];
    [self.window.rootViewController presentViewController:vc0 animated:NO completion:nil];

    UIViewController *vc1 = [[UIViewController alloc] initWithNibName:nil bundle:nil];
    vc1.view.backgroundColor = [UIColor purpleColor];
    [vc0 presentViewController:vc1 animated:NO completion:nil];

    return YES;
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    self.veilController = [[UIViewController alloc] initWithNibName:nil bundle:nil];
    self.veilController.view.backgroundColor = [UIColor blackColor];

    UIViewController *tvc = self.window.rootViewController;
    while (tvc) {
        if (tvc.presentedViewController) {
            tvc = tvc.presentedViewController;
        } else {
            [tvc presentViewController:self.veilController animated:NO completion:nil];
            tvc = nil;
        }
    }
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    [self.veilController dismissViewControllerAnimated:NO completion:nil];
    self.veilController = nil;
}

@end 
```

# excel - 具有动态范围的自动填充

> ID：14161637
> 
> 赞同：2
> 
> 时间：2013-01-04T17:13:04.917
> 
> 标签：excel, vba, dynamic, autofill

我正在构建一个程序来自动化一些工作，使用记录然后清理。它一直运行良好，直到计算时间对我来说太长了。它是一个简单的嵌套 IF 语句

```
ActiveCell.FormulaR1C1 = _
    "=IF(RC[-16]="""",""MISSING"",IF(RC[-14]="""",""MISSING"",RC[-14]-RC[-16]))" 
```

我们处理的数据范围从只有 10 行到几十万行。到目前为止，我不满意的“解决方案”将自动填充限制在 A1:A35000 范围内——这仍然需要 Excel 进行一些处理。这是避免`xlDown`将我带到第 1 百万行的解决方案。此外，我尝试减小纸张尺寸，效果也不错，但不是一个好的解决方案。

这是代码的样子：

```
Selection.AutoFill Destination:=ActiveCell.Range("A1:A35000"), Type:= _
    xlFillDefault 
```

我想做的是：

1.  从给定单元格中的数字引用的范围自动填充（因此，如果我输入的数据是 500 行，我有一个单元格，我输入 500 并且所有自动填充都来自 A1:A500），或者

2.  更优选地，这将通过让程序已经识别要自动填充的范围来自动完成。

我已经检查了解决方案，但无法弄清楚如何将其应用于我的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:30:43.493

我想你可能正在寻找以下...

```
Dim ws as Worksheet
Set ws = Worksheets("Sheet1")

Dim usedRows as Long

'Option One (not recommended): USED RANGE METHOD 
usedRows = ws.UsedRange.Rows.Count

'Option Two (more robust) .END(xlUp) METHOD (Assuming you have your Data in column "RC")
usedRows = ws.Cells(ws.Rows.Count, "RC").End(xlUp).Row

'YOUR
'CODE
'HERE

Selection.AutoFill Destination:=ws.Range(Cells(1,1),Cells(usedRows,1)), Type:= _ xlFillDefault 
```

如果该列在您的工作表中具有最常用的行。

感谢@scott 指出 .End(xlUp) 选项的优越性:)

# javascript - 主干：渲染树数据并更新更改

> ID：14161641
> 
> 赞同：1
> 
> 时间：2013-01-04T17:13:25.413
> 
> 标签：javascript, backbone.js, marionette, backbone-views, backbone-events

我从服务器获取某种树数据（仅用于示例）：

```
[
    {
    nodeName: "top level 1",
    nodes: [
        {
        nodeName: "2nd level, item 1",
        nodes: [
            {
            nodeName: "3rd level, item 1"}
        ]}
    ]},
{
    nodeName: "top level 2",
    nodes: [
        {
        nodeName: "2nd level, item 3",
        nodes: [
            {
            nodeName: "3rd level, item 7"},
        {
            nodeName: "3rd level, item 8"},
        {
            nodeName: "3rd level, item 9"}
        ]}
    ]}
]​ 
```

为了呈现这个，我正在使用 Backbone.Marionette.CollectionView 和 Backbone.Marionette.CompositeView [http://jsfiddle.net/AdWjU/179/](http://jsfiddle.net/AdWjU/179/)（在[derickbailey 的文章](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/ "德里克贝利的例子")之后）。

但我需要每 300 秒轮询一次服务器，它可以返回更改后的树：

```
[
    {
    nodeName: "top level 1",
    nodes: [
        {
        nodeName: "2nd level, item 1",
        nodes: [
            {
            nodeName: "3rd level, item 1"},
            {
            nodeName: "new name"} // changed
        ]}
    ]},
{
    nodeName: "top level 2",
    nodes: [
        {
        nodeName: "2nd level, item 3",
        nodes: [
            {
            nodeName: "3rd level, item 7"},
        {
            nodeName: "3rd level, item 8"},
        {
            nodeName: "3rd level, item 9"},
        {
            nodeName: "3rd level, item 10"} // added
        ]}
    ]}
]​ 
```

现在我只需调用 tree.update(data) 来重新渲染整个数据。

如何仅更新依赖于已更改属性的视图？

我正在尝试减少重新渲染的视图。我应该使用 CompositeViews 还是尝试使用 Backbone-relational 模型来完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:00:11.947

由于您每次在初始化时都在重建集合，因此无论何时调用`update`.

为了保留您的节点树，您必须同步从主干服务器中获取的树。最直接的方法是创建与 nodeName 一起传递的唯一 id，并以此为基础您的模型和集合。然后你可以重写这个：

```
if (nodes) {
  this.nodes = new TreeNodeCollection(nodes);
  this.unset("nodes");
} 
```

进行查找以查看您的节点是否存在并附加到相关集合，而不是将其爆破并重新创建。

# java - 具有 gson 值的 json 称为“受保护”

> ID：14161645
> 
> 赞同：1
> 
> 时间：2013-01-04T17:13:34.180
> 
> 标签：java, json, twitter, gson

用gson解析twitter的json，

他们的架构包括一个名为“受保护”的变量。由于显而易见的原因，我无法创建一个名为 protected 的变量......

我的决议是对“受保护”进行替换：使用“bProtected”之类的东西：

谁能想到更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:45:20.547

在 GSON 中，您可以使用`@SerializedName`技巧：

```
 class SomeYourDeserializationClass {
      ...
        @SerializedName("protected")
        public String myProtected;
      ...
   } 
```

# ruby - 无法连接到 heroku 上的任何辅助或主节点

> ID：14161647
> 
> 赞同：4
> 
> 时间：2013-01-04T17:13:43.157
> 
> 标签：ruby, heroku, mongoid, rack, mongohq

我将 Sinatra 应用程序上传到 heroku。在此之前，我在`MongoHQ`那里安装了免费插件。但是，我从 heroku 收到一个错误：

```
Moped::Errors::ConnectionFailure - Could not connect to any secondary or primary nodes for replica set <Moped::Cluster nodes=[<Moped::Node resolved_address="127.0.0.1:27017">]> 
```

这是我的 mongoid.yml

```
development:
  sessions:
    default:
      database: my_db
      hosts:
        - localhost:27017
      options:
        timeout: 10
production:
  sessions:
    default:
      uri: <%= ENV['MONGOHQ_URL'] %> 
```

那么，为什么会这样呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T00:22:07.783

如果您运行`heroku config`，您将看到 heroku 是否添加了您的 mongoid.yml 引用的 MONGOHQ_URL。另一种可能性是你没有设置你的 RACK_ENV=production via`heroku config:add RACK_ENV=production`

你能告诉我们运行的输出`heroku config`吗？

# c# - 当表中没有其他行与条件匹配时，Linq 表达式选择行

> ID：14161648
> 
> 赞同：0
> 
> 时间：2013-01-04T17:13:45.280
> 
> 标签：c#, sql, linq, where

我有一个包含 3 列的表：

* * *

**名称** varchar

**测试1** 位

**测试2** 位

**组** varchar

* * *

**客观的：**

我想选择每个组的每个名称只有 test1 为真的所有行。

* * *

为了澄清，以这些示例记录为例：

```
Name | Test1 | Test2 | Group
Foo    True    False   Group 1
Bar    True    False   Group 1
Bar    False   True    Group 2
Foo    False   True    Group 1
123    True    False   Group 1 
```

第二行将被选中，因为它从未为具有相同“名称”值的同一组的 Test2 测试为真。

第一行将不会被选中，因为它在表中的某个位置对具有相同组名的 Test2 测试为真。

最后一行将被选中，因为它从未对 Test2 进行过测试。

注意：我有明确搜索的组名。

**我试过的**

我尝试过（并且有效）是选择测试 1 为真的所有行。然后，我对每个 id 进行了另一次搜索（遍历第一个查询的结果）并测试它是否再次出现。我在这里所做的是一种解决方法，我知道 Linq 有很多“不存在的地方”功能，我想利用它们来改善我到目前为止所写内容的状态，所以希望我可以全部推出成一个声明。

**代码示例**

```
var items = itemsTable.Where(o => o.Group.Equals(GroupName) && o.Test1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:45:15.383

```
var items = itemsTable.Where(o => !o.Test2 && 
    !itemsTable.Any(x => x.Name == o.Name && x.Group == o.Group && x.Test2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:48:55.647

您可以使用以下内容：

```
var items = itemsTable.GroupBy(e => new { e.Name, e.Group }, e => e)
     .Where(g => !g.Any(e => e.Test2) &&  g.Key.Group.Equals(groupName))
     .SelectMany(e => e).ToList(); 
```

# javascript - 匹配字符串，除非它在方括号内

> ID：14161652
> 
> 赞同：2
> 
> 时间：2013-01-04T17:13:50.007
> 
> 标签：javascript, regex, lookahead

我正在尝试使我发现的一个 JQuery zen 编码插件适应我自己的用途。我遇到的问题之一是代码中的一个错误，例如

```
a[href="google.com"] 
```

将扩大到

```
 <a href="google.com" class="com"</a> 
```

代码使用的正则表达式是：

```
/(\.[\w-]+)/gi 
```

我已经修改了前瞻，看看它前面是否有偶数个括号。

```
/(\.[\w-]+)(?=([^\]]*\][^\]]*\])*[^\]]*$)/gi 
```

我使用了正则表达式测试器，它似乎可以工作，但是当使用 javascript 时`.match()`，它返回 ".com" 作为上述字符串中的匹配项。

以下响应解决了有问题的错误，但创建了一个新错误。现在：

```
a.class[href="google.com"] 
```

没有解决

[http://jsfiddle.net/sA9sQ/](http://jsfiddle.net/sA9sQ/)

**编辑：** 我接受了下面的答案，因为它让我到达了我需要去的地方。最终的正则表达式结果是`/(\.[\w-]+)(?=([^\]]*\][^\]]*\])*[^\]]*\.[\w-]+)/gi`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:17:51.587

尝试将前瞻移到正则表达式的前面，如下所示：

```
/(?=([^\]]*\][^\]]*\])*[^\]]*$)(\.[\w-]+)/gi 
```

# ember.js - 如何在没有 ember-data 的情况下检索模型？

> ID：14161654
> 
> 赞同：4
> 
> 时间：2013-01-04T17:13:56.193
> 
> 标签：ember.js

我有一个不适合 Ember-Data 的 Rest Adapter 的 API。大约有 3 个模型，因此我决定使用来自 jQuery 的普通旧 $.ajax。在找到一种如何检索模型并以正确的方式将它们传递给控制器​​的方法时，我大吃一惊。

考虑以下来自指南的示例：

```
App.Router.map(function(match) {
  match('/posts').to('posts');
});

App.PostsRoute = Ember.Route.extend({
  model: function() {
    return App.Post.findAll(); // Just renamed to .findAll.
  }
}); 
```

我发现 .findAll 方法必须返回一个 E.ArrayProxy 的实例，否则不可能做这样的事情：

```
{{#if content}}
  ...
{{else}}
  <strong>Nothing to display</strong>
{{/if}} 
```

我的实现看起来是这样的：

```
App.Post.reopenClass({
  findAll: function() {
    var result = Ember.ArrayProxy.create({content: []});

    $.getJSON('/posts', function(data) {
      $.each(data, function(i, row) {
        result.pushObject(App.Post.create(row));
      });
    });

    return result;
  }
}); 
```

我对此非常满意，但我无法想象如何使用单个对象。

```
App.PostsRoute = Ember.Route.extend({
  model: function(params) {
    return App.Post.find(params.post_id);
  }
});

// This will not work for me. Controller's content property will alway be null.
App.Post.reopenClass({
  find: function(postId) {
    var result = null;

    $.getJSON('/' + postId, function(data) {
      result = App.Post.create(data);
    });

    return result;
  }
}); 
```

解决办法是什么？

我是否应该返回带有空内容的虚拟 Ember.ObjectProxy 实例，并在内容实际填充了对象后以某种方式让 Ember 知道？什么是黄金之路？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T18:12:36.023

您可以只使用一个普通的旧对象，这基本上就是 ember-data 的工作方式。

```
App.Post.reopenClass({
  find: function(postId) {
    // Set some default properties here.
    var result = Ember.Object.create({
      isLoaded: false
    });

    $.getJSON('/' + postId, function(data) {
      result.setProperties(data);
      result.set('isLoaded', true);
    });

    return result;
  }
}); 
```

这是黄金之路吗？可能不是，您越深入 Ember，您就越想要 ember-data 承诺的丰富功能集。几个月前，我编写了自己的框架。与 ember-data 相比很糟糕，但它不需要根元素、侧载数据、下划线名称和支持的嵌入关系。我希望 ember-data 能够随着它的成熟解决这些问题，我知道他们一直在努力工作，以便更容易更换适配器和序列化程序。

# linux - linux中的Win32 API相当于什么？

> ID：14161656
> 
> 赞同：25
> 
> 时间：2013-01-04T17:13:59.977
> 
> 标签：linux, api, winapi

我不想知道windows和linux中的API函数是否存在一对一的等价关系，也不想知道每一个API函数。

我只想知道这两个基本的事情：

1.  我想了解为什么 Qt 平台独立
2.  我想知道我应该在 linux 中使用什么 API 来移植使用 Win32 API 编程的应用程序，或者换句话说，在 Win32 API 级别。

我知道这不切实际，但我想知道这种等效性。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-04T18:04:36.987

您需要了解[系统调用](http://en.wikipedia.org/wiki/Syscall)是什么。在 Linux 上，它们是最低可能的[用户](https://en.wikipedia.org/wiki/User_space)空间API（相比之下，[Win32 API](http://en.wikipedia.org/wiki/Win32_API)可能将真正的内核系统调用与一些库函数`libc`混合在一起。在 Linux 上也是如此）。[fork(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html) , [execve(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html) , [open(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html) , [pipe(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/pipe.2.html) , [mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html) , [read(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html) , [poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html) , [close(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/close.2.html) , [dup2(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/dup2.2.html) , [sigaction(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html)是重要的系统调用（但大约有 300 个，请参阅[syscalls(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)获取列表，这取决于您的精确 Linux[内核](https://kernel.org/)）。

## 不要期望每个 Windows 功能都可以在 Linux 上使用（反之亦然）。

甚至不要想到这样的等价物。

# 在 Linux 上获得不同的心态。

（特别是， Linux 和 Windows 上的[进程](http://en.wikipedia.org/wiki/Process_%28computing%29)非常不同）。

不要忘记 Linux 是**免费软件**，您可以深入了解您在 Linux 上使用的每个功能的源代码。阅读它，搜索它，改进它......

首先阅读[intro(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/intro.2.html)手册页，以及其他几个手册页（特别是[syscalls(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)、[intro(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/intro.3.html)等...）。另请阅读[高级 Linux 编程](http://advancedlinuxprogramming.com/)和[高级 Unix 编程](http://basepath.com/aup/)等。

一些库试图分解并为 Posix（例如 Linux）和 Windows 提供一个通用的抽象。特别是[Qt](http://qt-project.org/)（还有 Gtk 或[FLTK](https://www.fltk.org/)或[POCO](https://pocoproject.org/)，以及用于 Web 应用程序的[Wt](https://www.webtoolkit.eu/wt)和用于数据库的[sqlite ）。](https://sqlite.org/)

一些开源服务器软件（如[lighttpd](https://lighttpd.net/)、[exim](https://exim.org/)、[postgresql](https://postgresql.org/)等）可以在 Linux 和 Windows 上运行（当然是重新编译后）

如果您对图形界面感兴趣，请了解 X11 的重要作用[（](http://en.wikipedia.org/wiki/X11)注意 X11 服务器最靠近屏幕和键盘；大多数图形应用程序是 X11 客户端）。在 2016 年或 2020 年，X11 往往会被[Wayland取代（但如果您针对 Qt 或](https://en.wikipedia.org/wiki/Wayland_%28display_server_protocol%29)[GTK](https://gtk.org/)进行编码，您将不会注意到实现“细节” - 一个非常重要的细节）

如果您编写的应用程序仅使用 Qt 和/或 POCO 调用（未记录为特定于 Linux 或 Windows 的调用）以及标准 C++ 函数，则它应该可以从 Linux 源移植到 Windows，反之亦然。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T18:21:41.410

如果你想移植一个使用 Win32 调用的应用程序，你最好的选择可能是使用[WineLib](http://www.winehq.org/docs/winelib-guide/index)。这使用了支持 Wine 的库，但它与仅使用 Wine 运行应用程序不同——您将应用程序重新编译为 Linux 应用程序，只需使用 WineLib 共享库。但它仍然看起来像一个 Windows 应用程序，除非您随后修改 UI 层。

正如答案中其他地方所说，Linux中没有真正直接等同于Win32的东西——不同的Win32位由不同的组件提供，有时你可以选择组件。这是可能的，因为 Win32 的某些等效部分是在较低级别本地实现的——例如，Win32 提供 UI 组件，其等效项在 GTK、Qt 或任何数量的其他工具包（如 WineLib）中都可用，它们本身与 X 交互。就像您通常使用 Win32 中的组件而不是使用较低级别的 API 调用绘制自己的组件一样，您通常会使用高级 UI 工具包中的组件而不是直接使用 X。

# amazon-web-services - Elastic Beanstalk 的 IP 范围有哪些？

> ID：14161661
> 
> 赞同：4
> 
> 时间：2013-01-04T17:14:09.050
> 
> 标签：amazon-web-services, ip, amazon-elastic-beanstalk

我被要求提供我网站的 IP 范围，它托管在 Elastic Beanstalk（美国东部（弗吉尼亚北部））。有人可以告诉我目前是哪些，或者去哪里看？

提前致谢。

# wpf - 如何在 WPF 中将 WriteableBitmap 对象转换为 BitmapImage 对象

> ID：14161665
> 
> 赞同：7
> 
> 时间：2013-01-04T17:14:20.233
> 
> 标签：wpf, bitmapimage, writeablebitmap

如何将`WriteableBitmap`对象转换为`BitmapImage`WPF 中的对象？

[这个链接](https://stackoverflow.com/questions/3986638/how-can-i-convert-writeablebitmap-to-bitmapimage)涵盖了silverlight，WPF中的过程不一样，因为`WriteableBitmap`对象没有`SaveJpeg`方法。

所以我的问题是如何在 WPF 中将对象转换为`WriteableBitmap`对象？`BitmapImage`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T21:20:57.280

您可以使用其中一个`BitmapEncoders`将框架保存`WriteableBitmap`到新的`BitmapImage`

在此示例中，我们将使用 ，`PngBitmapEncoder`但只需选择适合您情况的那个。

```
public BitmapImage ConvertWriteableBitmapToBitmapImage(WriteableBitmap wbm)
{
    BitmapImage bmImage = new BitmapImage();
    using (MemoryStream stream = new MemoryStream())
    {
        PngBitmapEncoder encoder = new PngBitmapEncoder();
        encoder.Frames.Add(BitmapFrame.Create(wbm));
        encoder.Save(stream);
        bmImage.BeginInit();
        bmImage.CacheOption = BitmapCacheOption.OnLoad;
        bmImage.StreamSource = stream;
        bmImage.EndInit();
        bmImage.Freeze();
    }
    return bmImage;
} 
```

用法：

```
 BitmapImage bitmap = ConvertWriteableBitmapToBitmapImage(your writable bitmap); 
```

或者您可以将此作为扩展方法以便于使用

```
public static class ImageHelpers
{
    public static BitmapImage ToBitmapImage(this WriteableBitmap wbm)
    {
        BitmapImage bmImage = new BitmapImage();
        using (MemoryStream stream = new MemoryStream())
        {
            PngBitmapEncoder encoder = new PngBitmapEncoder();
            encoder.Frames.Add(BitmapFrame.Create(wbm));
            encoder.Save(stream);
            bmImage.BeginInit();
            bmImage.CacheOption = BitmapCacheOption.OnLoad;
            bmImage.StreamSource = stream;
            bmImage.EndInit();
            bmImage.Freeze();
        }
        return bmImage;
    }
} 
```

用法：

```
WriteableBitmap wbm = // your writeable bitmap

BitmapImage bitmap = wbm.ToBitmapImage(); 
```

# winforms - 刷信用卡后如何让winform字段自动提交表单？

> ID：14161669
> 
> 赞同：-1
> 
> 时间：2013-01-04T17:14:28.073
> 
> 标签：winforms, submit, credit-card

在我正在创建的收银机程序中，我希望在刷卡后自动提交表单。这是怎么做到的？所有信用卡的磁条中存储的字符数量是否相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:20:12.583

假设您刷了信用卡并获得了信用卡密码的最大长度。并且在`TextBox` `TextChanged Event`

```
if (textBox.Length == pinNumberLength)
{
   submitButton.PerformClick()//or logic here
} 
```

# c - 警告：从不兼容的指针类型返回（默认启用）

> ID：14161678
> 
> 赞同：0
> 
> 时间：2013-01-04T17:15:06.317
> 
> 标签：c, function, pointers, constants

我编写了一个函数。它得到 1 个字符串和 1 个输入的字符。字符是起点，从该字符开始打印。但我的代码给出了 2 个错误。你能帮助我吗？

```
#include <stdio.h>

char * mystrchr(const char * from, char c)
{
    int i;
    for(i=0; from[i]!='\0'; i++)
        if(from[i]==c)

    return (const *)from+i;

return 0;
}

int main()
{
    char *a;

    a=mystrchr("asdfg","d" );

    printf("%s", a);

return 0;
} 
```

注意：其中一个警告不适合标题。因此，我在那里写道：

传递 'mystrchr' 的参数 2 从没有强制转换的指针生成整数 [默认启用]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:32:55.440

```
#include <stdio.h>

char * mystrchr(const char * from, char c) {
   int i;
   for(i=0; from[i]!='\0'; i++)
      if(from[i]==c)
         return from+i;
   return 0;
}

int main() {
    char *a;
    a=mystrchr("asdfg",'d' );
    printf("%s", a);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:17:32.250

> 传递 'mystrchr' 的参数 2 从指针生成整数而不进行强制转换

因此，您正在传递一个指针 ( `"d"`is 的类型，并且在传递给函数时`char [2]`它会衰减)，但是该函数需要 a ，它是一个整数类型。`char *``char`

修正：改变

```
mystrchr("asdfg", "d"); 
```

至

```
mystrchr("asdfg", 'd'); 
```

（注意周围的单引号`'d'`- 单引号表示 a `char`，而双引号表示字符串文字。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:24:21.170

你的函数是这样声明的

```
char *mystrchr(const char *from, char c) 
```

并且旨在将非常量指针返回到 const`from`字符串的中间。您不得将 const 数据转换为非常量。所以你应该像这样声明你的函数：

```
const char *mystrchr(const char *from, char c) 
```

此时您可以删除`return`语句中的演员表。

```
return from+i; 
```

如果使用指针进行迭代，该函数可以说会更简单：

```
const char *mystrchr(const char *from, const char c)
{
    for (const char *p = from; *p; p++)
        if (*p == c)
            return p;
    return 0;
} 
```

* * *

另一个问题是该文字`"d"`是一个以空字符结尾的 C 字符串文字，而不是`char`. 您需要使用`'d'`来指定`char`文字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T17:16:37.607

您可以使用单引号作为第二个参数来消除一个警告。你通过`"d"`单`'d'`引号传递。像这样 ： `mystrchr("asdfg", 'd');`

`"d"``char*`当您接受函数定义中的参数时是类型，`char`因此只有警告。

还将代码更改`return (const *)from+i;`为`return from+i;`无需在此处进行类型转换。

因为`a`是`char*`类型并且您正在返回`const char *`类型并分配`const char*`给`char*`所以您收到不兼容的指针类型警告消息

# c# - 如何在每次部分回发时将 OnClientItemSelected 重新绑定到 autoCompleteExtender？

> ID：14161680
> 
> 赞同：0
> 
> 时间：2013-01-04T17:15:18.093
> 
> 标签：c#, ajaxcontroltoolkit, scriptresource.axd

我正在使用我公司的共享用户控件库中的一个控件，该控件实现了 AutoCompleteExtender。

我已将此控件放置在更新面板中。

我遇到的问题是 AutoCompleteExtender 的“OnClientItemSelected”属性是在初始页面加载时动态设置的。此时，属性设置没有问题，因为代码隐藏中的动态代码在 if(!IsPostback) 包装器中执行。

在部分回发之后，自动完成扩展器“忘记”在“OnClientItemSelected”事件上做什么并停止工作。

如果我对 jScript 函数执行 OnClientItemSelected 的两个选项之一进行硬编码，从表面上看它确实有效，但 ScriptResource.axd 不断抛出有关无效参数的错误，我假设是因为我正在尝试连接页面认为已经连接的东西起来，即使不是。

无论哪种方式，如果我强制 OnClientItemSelected 的设置发生，无论是否有回发，控件确实有效，但是 JavaScript 错误的静默丢弃既丑陋又令人担忧。如果可以避免的话，我也不想“破坏”共享控件。

那么，如何让 ScriptResource.axd 与 autocompleteextender 在每个部分回发时重新绑定其 OnClientClick 配合得很好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:56:16.540

事实证明，重新绑定代码只需要在 page_load 中再往下走。我在向我的一位同事解释问题时发现了这一点。他要求查看错误并让我从 if(!IsPostback) 包装器中剪切和粘贴代码，就像我在星期五所做的那样。我这样做了，但是在星期五我将代码移到了包装器之前。他只是指着包装纸下面，我不假思索地把它贴在包装纸下面。然后该代码始终如一地工作，没有错误。

只是去展示...共享的问题有时是解决的问题...

# c - 实时C编程vicInstallHandler需要帮助理解

> ID：14161685
> 
> 赞同：0
> 
> 时间：2013-01-04T17:15:41.627
> 
> 标签：c, vector, real-time, handler, irq

我去过我需要比评论更详细地理解这段代码，soemone可以帮忙吗？

```
void vicInstallIRQhandler(pVoidFunc_t pISR, uint32_t priority,
                      uint32_t vicIntSource) {

 // store the handler address in the correct slot in the vector 

 *(&VICVECTADDR0 + vicIntSource) = (unsigned long)pISR;

 // set the priority of the interrupt for this slot

 *(&VICVECTPRIORITY0 + vicIntSource) = priority;

 // clear FIQ select bit i.e. assign this interrupt source to IRQ

 VICINTSELECT &= ~(1UL << vicIntSource);

 // enable the interrupt

 VICINTENABLE |= (1UL << vicIntSource);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:31:53.233

其实评论还不错。但是，我尝试解释更多。总的来说，该函数设置中断处理程序，由指向实际服务程序的指针`pISR`、它的优先级和（物理）中断的索引来描述。

在您的 CPU 中，地址和相应的优先级存储在表中，其中包含起始地址`VICVECTADDR0`和`VICVECTPRIORITY0`，分别。通过将中断索引添加到基地址来找到正确的表条目。

`VICINTSELECT`并且`VICINTENABLE`是位向量，其中由中断索引寻址的位被设置和取消设置，分别。的语义`VICINTSELECT`是告诉 CPU 存在中断服务程序（清除位）。的语义`VICINTENABLE`是告诉 CPU 中断没有被屏蔽，即启用（设置位）。

我希望我的解释有点帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T03:09:26.420

@Wrekaar 是什么让你认为它会是逐字记录的？在我们复制粘贴之前，我们可能会在 abit 周围处理措辞（笑话）

# javascript - 如何在 kango 框架中的背景和内容脚本之间传输对象

> ID：14161686
> 
> 赞同：0
> 
> 时间：2013-01-04T17:15:40.950
> 
> 标签：javascript, google-chrome-extension, firefox-addon, browser-extension

是否可以在浏览器扩展中的背景和内容脚本之间传输对象？

我希望我的后台脚本来处理我的浏览器内存储。我的内容脚本应该跟踪用户交互并存储它们。因此，如果我的“抽象”存储引擎从后台脚本中获取，我计划使用单例模式来获取实例，以避免在用户记录交互并同时通过浏览器扩展的 UI 管理他的数据时出现同步问题。

我的第一次尝试是这样的：

**后台脚本**

```
var StorageEngine, _StorageEngine;

StorageEngine = (function() {
  var _instance;
  function StorageEngine() {}
  _instance = null;
  StorageEngine.getInstance = function() {
    return _instance != null ? _instance : _instance = new _StorageEngine;
  };
  return StorageEngine;
})();

_StorageEngine = (function() {
  function _StorageEngine() {}
  _StorageEngine.prototype.sayMyName = function(message) {
    return 'hello ' + message;
  };
  return _StorageEngine;
})(); 
```

**内容脚本**

```
(function() {
  kango.invokeAsync('StorageEngine.getInstance', function(val) {
    var asd;
    if (val) {
      debugger;
    }
    asd = val.sayMyName('Alice');
    return kango.console.log(asd);
  });
}).call(this); 
```

`val`不是未定义的，如果 google 调试器是可信赖的，但函数未定义，则它是一个对象`sayMyName`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:45:40.807

由于浏览器的限制，您不能将函数从后台传递到内容脚本，您只能传递 JSON 可序列化数据。

尝试以这种方式使用存储：

```
// background script
var storage = StorageEngine.getInstance();

// content script
kango.invokeAsync('storage.sayMyName', 'Alice', function(val) {
    kango.console.log(val);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:30:42.803

Chrome 扩展内容脚本存在于 中[`isolated worlds`](http://code.google.com/chrome/extensions/content_scripts.html#execution-environment)，这意味着它们共享 DOM，但具有单独的 JavaScript**沙箱**。

因此，您的`kango.invokeAsync`函数和所有变量都无法访问`content script`. 如果您想使用页面 JS 变量和函数，请在此处定义内容脚本。

```
var script = document.createElement('script'); // Create a Script Tag
script.src = chrome.extension.getURL("yourscript.js"); //Fetch the content script
script.onload = function () {
    this.parentNode.removeChild(this); //Remove script after script executed
};
(document.head || document.documentElement).appendChild(script); //ADD script tag 
                                                       //to head or Html element 
```

您的代码在内容脚本和后台页面之间没有任何[通信机制。](https://developer.chrome.com/extensions/extension.html#method-sendMessage)为您的所有功能需求添加消息通信[系统。](https://developer.chrome.com/extensions/extension.html#method-connect)

## 参考：

*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [背景页面](https://developer.chrome.com/extensions/background_pages.html)
*   [消息传递](https://developer.chrome.com/extensions/messaging.html)

# objective-c - UIRefreshControl 向后兼容

> ID：14161690
> 
> 赞同：1
> 
> 时间：2013-01-04T17:15:53.737
> 
> 标签：objective-c, ios, uirefreshcontrol

我正在使用 XCode 4.5 和 iOS SDK 6.0 编写一个 iOS 应用程序。我在我的应用程序中使用 UIRefreshControl，并且我的设备运行 iOS 6.0.1。UIRefeshControl 可以正常工作。如果我要在具有先前 iOS 版本的设备上运行此应用程序会发生什么？refreshcontrol 是否仍然有效，还是我必须使用其他工具来实现此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:19:14.220

iOS 6现在`UIRefreshControl`唯一支持的。试试这个：[ODRefreshControl](https://github.com/Sephiroth87/ODRefreshControl)

# arrays - Haskell中的二维可变数组并使用ANSI着色输出

> ID：14161691
> 
> 赞同：1
> 
> 时间：2013-01-04T17:15:55.083
> 
> 标签：arrays, haskell, matrix, ansi

我发现理解 Haskell 世界有点困难，所以我非常感谢一些帮助！

我想创建二维字符数组（一个 10x10 的符号矩阵），它应该是可变的，所以我尝试了这个：

```
import Data.Array.IO
arr <- newArray ((1,10), (1,10)) '!' :: IO (IOArray (Int, Int) Char)
a <- readArray arr (1,1) 
```

但它没有成功。您能否告诉我如何创建数组以及如何访问其成员，或者如果这不是一个好方法，另一种方法可以做到这一点？

而且我想问一下是否有一种方法可以将数组中的某些元素以不同的颜色着色。我导入了 System.Console.ANSI 但我不太确定如何准确地将我想要的颜色设置为不同的颜色。输出红色字母的示例将非常有帮助。

非常感谢您！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:37:15.893

这在我的笔记本电脑上编译并运行没有错误。

```
import Data.Array.IO       -- from the array package
import System.Console.ANSI -- from the ansi-terminal package

main :: IO ()
main = do
        arr <- newArray ((1,1), (10,10)) '!' :: IO (IOArray (Int, Int) Char)
        -- You had ((1,10), (1,10)), in the line above.
        -- That meant (1,10) was the only valid index!
        ch <- readArray arr (1,1)
        setSGR [SetColor Foreground Dull Red]   -- set foreground colour to red
        putStr [ch]
        setSGR []                               -- reset colours
        putStrLn "" 
```

我赞同 CA McCann 的建议，即使用普通的不可变数组而不是可变数组。（不幸的是，我在 Haskell 中使用数组的经验很少，所以我将把它留给其他人来建议如何一步一步从旧数组计算更新的数组。）

# javascript - 如何替换javascript项目中的所有符号名称

> ID：14161693
> 
> 赞同：0
> 
> 时间：2013-01-04T17:16:00.747
> 
> 标签：javascript, parsing

我想编写一些自动（使用规则系统和用作替换的单词列表）应该用其他东西替换所有变量和函数名称的东西：

例如：

```
var foot = 0;
function cat(state) {
    return state ? "running" : "sleep";
}
cat(foot); 
```

至：

```
var house = 0;
function bear(country) {
    return country ? "running" : "sleep";
}
bear(house); 
```

我已经搜索了网络，但没有找到任何可以轻松修改以执行此操作的项目。

你们中的任何人都知道如何做到这一点或知道我可以用作起点的项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:20:47.173

你是在寻找[混淆](http://en.wikipedia.org/wiki/Obfuscation)器还是你喜欢做什么？

[如何混淆（保护）JavaScript？](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:36:54.917

Google Closure Compiler ( [https://developers.google.com/closure/compiler/](https://developers.google.com/closure/compiler/) ) 能够识别函数和变量名称，但没有内置选项可以用您选择的名称替换它们。

因为直接查找和替换没有上下文，如果你想滚动你自己，你需要使用正则表达式来“解析”JavaScript，如果你使用递归正则表达式，这很困难但易于管理，如 .NET带平衡组

[http://msdn.microsoft.com/en-us/library/bs2twtah.aspx](http://msdn.microsoft.com/en-us/library/bs2twtah.aspx)

[使用正则表达式 c# 递归获取内部模式](https://stackoverflow.com/questions/9813751/get-inner-patterns-recursively-using-regex-c-sharp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:33:45.313

您可以编写一个简短的 Shell 脚本（例如 bash）。您需要`sed`和`for`循环以及包含单词列表的三个变量。如果您的第一个代码包含脚和猫以及名为 的文件中的状态`my_first_code.txt`，那么它将如下所示：

```
foot_words="house ba be bi bo bu"
cat_words="bear da de di do du"
state_words="country ka ke ki ko ku"

count=1
for word in $foot_words; do
    sed 's%foot%'$word'%g' my_first_code.txt > new_code_$count.txt
    ((count++))
done
count=1
for word in $cat_words; do
    sed -i 's%cat%'$word'%g' new_code_$count.txt
    ((count++))
done
count=1
for word in $state_words; do
    sed -i 's%state%'$word'%g' new_code_$count.txt
    ((count++))
done 
```

在此示例中，您将获得 6 个新文件`new_code_1.txt`、`new_code_2.txt`等`new_code_3.txt`。

**解释：**第一个`for`循环复制代码`my_first_code.txt`并将单词*foot*替换为*新单词*。另外两个`for`循环只是替换新文件中的单词。

# macos - 无法 'git push' - 远端意外挂断

> ID：14161694
> 
> 赞同：0
> 
> 时间：2013-01-04T17:16:06.213
> 
> 标签：macos, git, ssh

我在本地机器上有一个 git 存储库，我将它推送到 github 和一个由 HostGator 托管的登台服务器。我按照[本指南](http://www.arlocarreon.com/blog/git/push-git-repo-into-shared-hosting-account-like-hostgator/)设置我的登台服务器以允许我推送到它，这在过去运行良好。

在大约一个月没有推送任何内容之后，当我尝试推送到登台服务器（其中 [hostname] 被我的 url 替换）时，我现在看到了这个错误：

```
ssh: connect to host [hostname] port 22: Operation timed out
fatal: The remote end hung up unexpectedly 
```

`git remote -v`显示：

```
bright  [user]@[hostname]:[path to repo] (fetch)
bright  [user]@[hostname]:[path to repo] (push)
origin  git@github.com:[reponame.git] (fetch)
origin  git@github.com:[reponame.git] (push) 
```

我的 .git/config 的相关部分如下：

```
[remote "[remote in question"]
    url = [user]@[hostname]:[path to repo]
    fetch = +refs/heads/*:refs/remotes/[remote]/* 
```

值得注意的是，当我`ssh`进入此服务器时，我使用端口 2222，但正如您从错误消息中看到的那样，git 正在尝试使用端口 22。我认为情况一直如此，即使这正在工作正确。

我可以采取哪些步骤来确定`git push`我的登台服务器上超时的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:20:58.550

听起来您可能在本地`~/.ssh/config`文件中设置了端口 2222。也许该配置已被替换或删除？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:23:56.270

您需要在远程定义中指定端口使用：

```
url = git://[user]@[host]:2222/[path_to_repo] 
```

这只能使用以 git:// 开头的上述样式 url。

# c - 在这种情况下是否存在转换问题 if ((x+(y<<16)) == ('a'+('b'<<16)))

> ID：14161696
> 
> 赞同：1
> 
> 时间：2013-01-04T17:16:09.047
> 
> 标签：c, casting

我有以下代码

```
char x ='s', y='e';

if((x+(y<<16)) == ('a'+('b'<<16)))
    //do something

 switch (x+(y<<16)) {
    case 'a'+('b'<<16):
        //do something
        break; 
```

`if`在和 中进行的比较中是否有任何铸造问题`switch`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:00:09.327

您是否打算将第二个值移位 16 位 *then，然后添加第一个？如果是这样，那么您将遇到问题，因为`+`优先级高于`<<`

以下两个表达式证明了这一点：

```
'a' + 'c' << 16
'b' + 'b' << 16 
```

评估给了我们：

```
printf("%X : %X\n", 'a' + 'c' << 16, 'b' + 'b' << 16); 
```

结果是：

```
C40000 : C40000 
```

这是因为`'a'`和`'c'`都提升为`int`，加法完成，然后左移 16 位。与`'b'`和 也是如此`'b'`。因为`('a' + 'c') == ('b' + 'b')`，结果是一样的。

如果您打算（或假设）这样做：

```
'a' + ('c' << 16)
'b' + ('b' << 16)

printf("%X : %X\n", 'a' + ('c'<<16), 'b' + ('b'<<16)); 
```

结果是：

```
630061 : 620062 
```

我怀疑这是你想要达到的。如果不是，并且您依赖于当前的评估优先级，那么您可能对您所拥有的一切都很好。

**编辑**更新以更改问题内容：

本身不应该有铸造问题。所有值都被编译器提升`int`为当前编写的评估。如果您打算将结果分配给小于`int`您将遇到问题的东西。即使是`short`16 位的 a 也不够宽，因为那是您的移位深度。您需要至少 24 位的空间来进行正确的评估，并且您的实现`int`可能会同意这一点，除非您在一些半生不熟的嵌入式系统上（我见过奇怪的事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:22:20.230

最好加上一些括号以避免运算符优先级问题：

```
#define MYMACRO(X,Y) ((X)+(Y)<<16) 
```

否则可能会发生意想不到的事情：

```
switch(MYMACRO(a+1,b+1)) // expands into switch(a+1+b+1<<16) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T18:05:31.240

没有铸造问题。

编译器会将 x + y 提升为 int 并将其左移 16，然后进行整数比较。

为了便于阅读，假设您需要 unsigned int 比较，您可以将其编码如下。

```
`if((  (unsigned)(x+y)<<16u) == ( (unsigned)('a'+'b')<<16u))  ` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T17:25:18.383

看看像这样展开时会发生什么

```
MYMACRO(1<<2, 2<<3)+1 
```

所以

```
define MYMACRO(X,Y) X+Y<<16 
```

应该

```
define MYMACRO(X,Y) ((X)+(Y)<<16) 
```

# struts2 - 在 Struts2 动作类中调用非 getter 方法

> ID：14161697
> 
> 赞同：-1
> 
> 时间：2013-01-04T17:16:10.440
> 
> 标签：struts2

在 Struts2 Action 类中，如果我有一个名为 的方法`calculate()`，它会进行一些计算并显示结果，我如何使用 Struts 标记从 JSP 调用此方法`<s:property value="calculate"/>`？

如果我命名了方法`getCalculate()`，那么`<s:property value="calculate"/>`就可以了，但是是否可以使用方法名称调用该方法`calculate()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:35:17.457

您可以调用使用完整的方法名称，如

```
<s:set var="anyName"   value='calculate()'/> 
```

常见的例子是

```
<s:if test='String1.equals(String2)'>
     CASE
</s:if> 
```

# c# - Windows 8：SQLlite 或应用程序资源

> ID：14161702
> 
> 赞同：2
> 
> 时间：2013-01-04T17:16:34.443
> 
> 标签：c#, windows, sqlite, windows-8

我对 Windows 8 中的本地存储和持久数据有疑问。

由于我必须在本地应用程序中存储一些数据，我想知道开发它的最佳方法是什么。我到处都读到 SQLite 是一个不错的选择，但我在本教程 [“创建博客阅读器”](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx) 中看到提要数据源保存在 Application Local Resources 的 Application.Resources 属性中。

这是一个很好的解决方法吗？何时使用其中一种？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T09:55:06.377

如果使用得当，SQLite 可以作为[优秀的应用程序数据格式](http://www.sqlite.org/whentouse.html)。

它有很多好处：

*   允许非常快速地访问大型数据集（创建适当的索引时）。
*   确保数据的事务完整性。
*   通过使用各种可用的开源和商业工具，可以轻松检查和调试保存的数据。
*   随着应用程序的发展，通过简单地添加新表和/或列来扩展存储格式非常容易。通常，您可以毫不费力地与旧版本的数据库保持兼容。
*   ...

SQLite 已成为几乎所有移动设备（Android、iOS 等）的首选格式，在 SQLite 中存储除了媒体和程序二进制文件之外的几乎所有内容。

但即使对于桌面应用程序，SQLite 也正在成为首选格式。例如，Mozilla Firefox 和 Thunderbird 几乎将所有内容——书签、历史记录、电子邮件等都存储在 SQLite 数据库中。Google Chrome 和[许多其他应用程序](http://www.sqlite.org/famous.html)也是如此。

决定权在你手中，但如果使用得当，SQLite 会变得非常快速，并且对开发人员来说非常容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:54:25.027

要存储数据，您有以下方法：

1) 本地文件夹中的 SQL Lite。

2) 应用程序设置。

3) 本地文件。

此提要示例在 Application.Resources 中收集数据。

当您有大量数据和具有关系的数据类型时，请使用 SQLLite。当您有一个没有关系的数据系统时，请使用本地存储。

# sql-server - emulator windows azure compute emulator不工作，出现如下错误：

> ID：14161704
> 
> 赞同：1
> 
> 时间：2013-01-04T17:16:39.827
> 
> 标签：sql-server, azure

emulator windows azure compute emulator不工作，出现如下错误：

适用于 Microsoft Visual Studio 的 Windows azure 工具

系统缺少运行服务的先决条件。有关更多信息，请参见输出窗口

已经安装了 Visual Studio 2012 的 sdk，我相信 azure 工具已经附带了这个，但仍然无法运行模拟器。感谢有人帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:13:50.113

当您在 32 位或 64 位机器上完全安装时，有 4 个主要组件随 Windows Azure SDK 一起安装，这些组件是：

1.  Windows Azure 工具
2.  Windows Azure 库
3.  Windows Azure 创作工具
4.  Windows Azure 模拟器

您进行调查的第一步是检查您的安装并验证您是否安装了上述所有组件。如果您安装了所有 4 个组件，但仍然遇到完全相同的错误，请先卸载与 Windows Azure 相关的所有内容。并且当您使用 VS2012 时，您可以从[此处](http://go.microsoft.com/fwlink/?LinkId=254364&clcid=0x409)安装适用于 VS2012 的最新 Windows Azure SDK 的完整 WebPI 版本。

# python - 将嵌套的 JSON 内容转储转换为 XLS

> ID：14161710
> 
> 赞同：0
> 
> 时间：2013-01-04T17:16:58.670
> 
> 标签：python, json, excel

我有一个来自内容管理站点的 JSON 转储，其格式如下：

```
[
    {
        id: "obj1",
        children: [...]
    },

    {
        id: "obj2",
        children: [...]
    }

] 
```

有 2-4 个嵌套级别。

将其转换为 Microsoft Excel XLS 以便以某种方式处理嵌套级别，以便能够使用 Excel 的客户使用他们的数据的最佳方法是什么？

使用这些特定数据，一种方法是为每个顶级文件夹（嵌套级别）创建一个新工作表。所有工作表都将包含从该特定文件夹中的 JSON 对象中选取的相同列名。

有没有现成的工具可以将 JSON 导入 Excel？

最好作为命令行工具，如果需要脚本，那么在 Python 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:12:21.240

这取决于您的数据。

如果嵌套在没有任何重复的情况下发生，那么最简单的选择是复制所有内容，或者如果您的数据足够完整以能够假设您找到空白处的重复，则留下空格。

这意味着作为 CSV 的 XLS 将如下所示：

```
Element1 Element1.1 Element1.1.1 ...
Element1 Element1.1 Element1.1.2 ...
Element2 Element2.1 Element2.1.1 ... 
```

其中每个元素都是其左侧元素的子元素。您可以看到父母重复的次数与孩子重复的次数乘以每个孩子出现的次数。

你也可以做一个非常简单的两列表格：

```
**Parent**    **Child**
Element1      Element1.1
Element1.1    Element1.1.1  
Element1.1    Element1.1.2
Element2      Element2.1
Element2.1    Element2.1.1
... 
```

元素是什么取决于您的粒度。您可以将一对 key=values 组合为一个字符串，您可以将多个字段组合为一个并使用正则表达式将其解析回来，或者您可以将所有内容分开并将键视为一个元素，将值视为另一个元素。

最后，如果有一些规律，那么您可以采用更有趣的方法，假设您有一些重复的字段名，在这种情况下，您可以采用前面的任何方法，但使用字段名来生成矩阵而不是列表。第一个例子很简单，因为它显然是一个已经有一个隐式序号标题的元组列表，第二个是一个表格，可能看起来已经像一个矩阵，但你可以这样做。

```
**Parent**    **Child (default)** **Repeating key1** **Repeating key2**
e1            e1.1
e1.1          e1.1.1
e.1.1.1                           something          
e.1.1         e.1.1.2
e.1.1.2                                               somethingelse 
```

所以基本上最后你有一个稀疏矩阵。

有一些非常有趣的方法可以使用 XLS 上的几张表来存储具有三个维度的矩阵，但人类可读性可能会随之下降。它归结为您正在使用的数据，**没有通用的解决方案**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:21:18.100

我认为**PHP - 电子表格引擎** 是你所需要的..

以下是您查询的一些链接：

*   [链接 1](http://faisalman.github.com/simple-excel-php/)
*   [链接 2](http://phpexcel.codeplex.com/)

希望对你有帮助 ..：）

我猜你是在问这个..

```
 $excel = new SimpleExcel('csv');                    // instantiate new object (will automatically construct the parser & writer type as CSV)

           $excel->writer->setData(
               $array // this is array generated from json
            );                                                  // add some data to the writer
            $excel->writer->setDelimiter(";");                  // (optional) if delimiter not set, by default comma (",") will be used instead
            $excel->writer->saveFile('example'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-12-26T02:28:16.917

只需使用[平面库](https://www.npmjs.com/package/flat)来展平您的对象。

```
var flatten = require('flat')

flatten({
    key1: {
        keyA: 'valueI'
    },
    key2: {
        keyB: 'valueII'
    },
    key3: { a: { b: { c: 2 } } }
}) 
```

输出

```
{
  'key1.keyA': 'valueI',
  'key2.keyB': 'valueII',
  'key3.a.b.c': 2
} 
```

# sql - sql server 2008 中的日期时间变量问题

> ID：14161713
> 
> 赞同：0
> 
> 时间：2013-01-04T17:17:23.193
> 
> 标签：sql, sql-server, sql-server-2008

我试图在 SQL 中声明一个日期变量，当我调试它时，它挂起`SET`。查询还有更多内容，但它本质上是循环的，添加不同的输入，直到 12 月 31 日。

```
DECLARE @ShiftDate AS Datetime
BEGIN
    SET @ShiftDate = '2013-01-01 00:00:00.000'
END
DECLARE @ShiftDate AS DATETIME
BEGIN
SET @ShiftDate = '2013-01-01 00:00:00.000'
END

DECLARE @EndDate AS DATETIME
BEGIN
SET @EndDate = '2013-12-31 00:00:00.000'
END

GO
WHILE @ShiftDate <= @EndDate
BEGIN
INSERT INTO [ManufacturingTracking].[dbo].[TenteringCrewShift]
       ([SearchDate]
       ,[Shift])
 VALUES (@ShiftDate, 'B')
 SET @ShiftDate = DATEADD(DATE, 1, @ShiftDate)
 IF @ShiftDate > @EndDate
    BREAK
 ELSE
    CONTINUE
END 
```

如果我告诉它继续它会给出错误：

> *必须声明标量变量“@ShiftDate”。*

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:29:51.110

`GO`从您的脚本中删除；`GO`本质上是开始一个新的处理部分，并且不会`@ShiftDate`在脚本的下一部分中。

有关详细信息，请参阅[MSDN 文档`GO`](http://msdn.microsoft.com/en-us/library/ms188037.aspx)。

# jquery - 由于 jQuery 错误，无法从 jqGrid 中添加和编辑

> ID：14161718
> 
> 赞同：0
> 
> 时间：2013-01-04T17:17:37.513
> 
> 标签：jquery, jqgrid

我正在使用`jqGrid`插件来表示我的数据列表，以及使用它的添加/编辑/删除/查看/搜索数据`navGrid`，但是当我提交添加/编辑表单时，发生了错误，并且 firebug 中的错误消息如下：

```
$.type is not a function
var obj = $.type( pref ); 
```

以下是从数据库获取数据并将它们传递给 jqGrid 的代码：

```
/**
 * Update store of account grid.
 */
var updateGridStore = function() {
    $.ajax({
        type : "POST",
        url : CONTEXT + "/admin/doListAccounts.action",
        dataType : 'json',
        success : function(response) {
            if (response) {
                if (response.success) {
                    updateAccountGrid(response);
                } else {
                    alert(response.message);
                }
            } else {
                alert("Failed to get accounts.");
            }
        },
        error : function(error) {
            alert("error: " + error);
        }
    });
}; 
```

/** * 创建或更新帐户网格。*/

```
var updateAccountGrid = function(response) {
    jQuery("#accountGrid").jqGrid(
            {
                data : response.list,
                scrollrows : true,
                datatype : "local",
                colNames : [ "ID", "True Name", "Admin", "Email", 
"Mobile", "Telphone", "QQ",
                        "Dept", "Group", Status" ],
                colModel : [ {
                    name : 'id',
                    index : 'id',
                    width : 50,
                    editable : false,
                    align : 'center',
                    editoptions : {
                        readonly : false,
                        size : 45
                    }
                }, {
                    name : 'truename',
                    index : 'truename',
                    width : 140,
                    editable : true,
                    align : 'center',
                    editrules : {
                        required : true
                    },
                    editoptions : {
                        size : 45
                    }
                }....],
                rowNum : 25,
                autowidth : true,
                height : 200,
                rowList : [ 25, 50, 100, 150 ],
                pager : "#accountGridNav",
                sortname : 'id',
                viewrecords : true,
                sortorder : "desc",
                shrinkToFit : false,
                rownumbers : true,
                altRows : true,
                caption : "User Accounts"
            });

    jQuery("#accountGrid").jqGrid('navGrid', '#accountGridNav', {
        view : true
    }, 
    {
        jqModal : true,
        checkOnUpdate : true,
        savekey : [ true, 13 ],
        navkeys : [ true, 38, 40 ],
        checkOnSubmit : true,
        reloadAfterSubmit : false,
        closeOnEscape : true,
        bottominfo : "Fields marked with (*) are required"
    }, {
        jqModal : true,
        checkOnUpdate : true,
        savekey : [ true, 13 ],
        navkeys : [ true, 38, 40 ],
        checkOnSubmit : true,
        reloadAfterSubmit : false,
        closeOnEscape : true,
        bottominfo : "Fields marked with (*) are required"
    }, {
        reloadAfterSubmit : false,
        jqModal : false,
        closeOnEscape : true
    }, {
        closeOnEscape : true
    }, {
        navkeys : [ true, 38, 40 ],
        height : 250,
        jqModal : false,
        closeOnEscape : true
    });

    jQuery("#accountGrid").jqGrid('setGroupHeaders', {
          useColSpanStyle: true, 
          groupHeaders:[
            {startColumnName: 'email', numberOfColumns: 4, titleText: 'Contacts'},
            {startColumnName: 'deptName', numberOfColumns: 2, titleText: 'Department Info'}
          ] 
        });

    jQuery("#accountGrid").closest("div.ui-jqgrid-view").children(
            "div.ui-jqgrid-titlebar").css("text-align", "center").children(
            "span.ui-jqgrid-title").css("float", "none");
}; 
```

我不知道 $.type 是在哪里定义的？以及我该如何处理。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:49:50.563

也许，jQuery 别名在这里不起作用。您是否尝试过 jQuery.ajax 而不是 $.ajax ？

# c - 在 Mac OS X Mountain Lion 上运行 Server-Client c 程序时遇到问题

> ID：14161720
> 
> 赞同：1
> 
> 时间：2013-01-04T17:17:54.093
> 
> 标签：c, macos, sockets, unix

我刚开始用c学习UNIX网络编程，做了一个小的TCP Server-Client程序。

它在 Fedora 上运行完美，但在我的 MacBook 上存在一些连接问题。

编译可以在终端没有问题，但是在我运行“服务器”程序然后运行“客户端”程序之后，似乎“服务器”没有从“客户端”获得“连接”命令。代码和消息如下：

服务器.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/wait.h>
#include <errno.h>
#include <netinet/in.h>
#include <string.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <unistd.h>

#define MYPORT 1500
#define BACKLOG 5
#define MAXDATASIZE 100

int main()
{
    int servSock, cliProc;
    socklen_t sin_size;
    char buf[MAXDATASIZE], msg[MAXDATASIZE];
    struct sockaddr_in my_addr, income_addr;

    my_addr.sin_family = AF_INET;
    my_addr.sin_port = htons(MYPORT);
    my_addr.sin_addr.s_addr = htonl(INADDR_ANY);

    if ((servSock = socket(AF_INET, SOCK_STREAM, 0)) == -1)
        printf("Socket Error: %d\n", errno);
    else
        printf("Server Socket %d created\n", servSock);

    if (bind(servSock, (struct sockaddr *)&my_addr, sizeof(struct sockaddr)) == -1)
        printf("Bind Error: %d\n", errno);
    else
        printf("Server Bind created\n");

    listen(servSock, BACKLOG);
    printf("Server is waitting for connection...\n");

    sin_size = sizeof(struct sockaddr_in);
    if ((cliProc = accept(servSock, (struct sockaddr *)&income_addr, &sin_size)) == -1)
        printf("Accept Error: %d\n", errno);
    else
    {
        printf("Server accepted connection from %s\n", inet_ntoa(income_addr.sin_addr));
    }

    sprintf(msg, "Welcome to Server, you addr is %s", inet_ntoa(income_addr.sin_addr));
    send(cliProc, msg, strlen(msg), 0);

    if (recv(cliProc, buf, MAXDATASIZE, 0) == -1)
    {
        printf("Recv Error: %d\n", errno);
    }
    else
    {
        printf("Server received %s from %s\n", buf, inet_ntoa(income_addr.sin_addr));
    }

    close(cliProc);
    close(servSock);
    printf("Server Sockets closed\n");

    return 0;
} 
```

客户端.c：

```
#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/wait.h>
#include <errno.h>
#include <netinet/in.h>
#include <string.h>
#include <arpa/inet.h>
#include <netdb.h>
#include <unistd.h>

#define MAXDATASIZE 100
#define PORT 1500

int main(int argc, char *argv[])
{
    int cliSock, numbytes;
    char buf[MAXDATASIZE], msg[MAXDATASIZE];

    if (argc != 2)
    {
        printf("%d, Usage: Client Hostname\n", argc);
        exit(1);
    }

    struct hostent *he;

    if ((he = gethostbyname(argv[1])) == NULL)
    {
        printf("Couldn't get hostname\n");
        exit(1);
    }

    struct sockaddr_in dest_addr;

    dest_addr.sin_family = AF_INET;
    dest_addr.sin_port = htons(PORT);
    dest_addr.sin_addr = *((struct in_addr *)he->h_addr);

    if ((cliSock = socket(AF_INET, SOCK_STREAM, 0)) == -1)
        printf("Socket Error: %d\n", errno);
    else
        printf("Client Socket %d created\n", cliSock);

    if (connect(cliSock, (struct sockaddr *)&dest_addr, sizeof(struct sockaddr)) == 1)
        printf("Connect Error: %d\n", errno);
    else
    {
        printf("Client Connection created\n");
    }

    numbytes = recv(cliSock, buf, MAXDATASIZE, 0);
    buf[numbytes] = '\0';
    printf("Received Message: %s\n", buf);

    sprintf(msg, "4 8 15 16 23 42");
    send(cliSock, msg, MAXDATASIZE, 0);
    printf("Client sent %s to %s\n", msg, inet_ntoa(dest_addr.sin_addr));

    close(cliSock);
    printf("Client Sockets closed\n");

    return 0;
} 
```

服务器消息：

```
Server Socket 3 created
Server Bind created
Server is waitting for connection... 
```

客户留言：

```
Client Socket 3 created
Client Connection created
Received Message: 
```

任何帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:45:46.130

**a)**在您的服务器上，添加验证以检查是否`listen`成功。它很可能会失败。您可以通过以下方式找出原因：

```
fprintf(stderr, "Error: %s\n", strerror(errno)); 
```

**b）**在您的客户端上，以下条件正在检查错误的值。它应该检查`!= 0`. 引用[连接](http://linux.die.net/man/2/connect)：`If the connection or binding succeeds, zero is returned. On error, -1 is returned, and errno is set appropriately.`。

```
if (connect(cliSock,(struct sockaddr *)&dest_addr,sizeof(struct sockaddr)) == 1)
    printf("Connect Error: %d\n", errno);
else
    printf("Client Connection created\n"); 
```

**c）**`telnet`在像您这样的情况下，我通常建议使用已知可以工作的客户端测试连接，例如[netcat](http://netcat.sourceforge.net/)。这有助于减少验证区域。如果连接不成功，则问题出在您的服务器上。否则，这是您的客户的问题。当然，您仍然可能在这两个方面都遇到问题，但您需要一次修复一个错误。

# hlsl - HLSL：绘制一个中心圆

> ID：14161727
> 
> 赞同：0
> 
> 时间：2013-01-04T17:18:26.197
> 
> 标签：hlsl

我正在尝试编写一个模糊屏幕中心然后逐渐消失的后期处理着色器。

感谢此处发布的一些代码，我有一个模糊的抗锯齿圆圈，但它位于屏幕的左上角。问题似乎出在我计算圆的算法中：

```
float4 PS_GaussianBlur(float2 texCoord : TEXCOORD) : COLOR0
{
float4 insideColor = float4(0.0f, 0.0f, 0.0f, 0.0f);
float4 outsideColor = tex2D(colorMap, texCoord);

//Perform the blur:
for (int i = 0; i < KERNEL_SIZE; ++i)
    insideColor += tex2D(colorMap, texCoord + offsets[i]) * weights[i];

float dist = (texCoord.x * texCoord.x) + (texCoord.y * texCoord.y);
float distFromCenter = .5 - dist;  // positive when inside the circle
float thresholdWidth = 0.1;  // a constant you'd tune to get the right level of softness
float antialiasedCircle = saturate((distFromCenter / thresholdWidth) + 0.5);
return lerp(outsideColor, insideColor, antialiasedCircle);
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T02:38:41.010

试试这个：

```
float dx = 0.5 - texCoord.x, dy = 0.5 - texCoord.y;
float dist = dx * dx + dy * dy;
float distFromCenter = 0.25 - dist;  // positive when inside the circle 
```

# html - 在单页网站上隐藏 URL

> ID：14161728
> 
> 赞同：0
> 
> 时间：2013-01-04T17:18:26.420
> 
> 标签：html, url, navigation

我最近完成了我的新一页投资组合网站。我在隐藏链接的 URL 时遇到了一些麻烦。例如：当您单击“我的工作”链接时，它会将您带到位于网站“我的工作”部分的 div。

所以目前它显示为**http://www.springalldesign.co.uk/#title-wrapper**看起来很乱。
（**#title-wrapper**只是该部分顶部的 div 的名称）

我知道我可以将 div 更改为这样它会改为阅读**http://www.springalldesign.co.uk/#mywork**但我仍然认为它看起来很乱。无论您点击什么链接，我都希望 URL 能够阅读**http://www.springalldesign.co.uk/ 。**

提前致谢

[链接到网站](http://www.springalldesign.co.uk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:21:29.840

在第 101 行，您正在设置 URL 哈希：

```
location.hash = target; 
```

如果您不想显示哈希，只需删除此行。

请记住，这会阻止深度链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:28:11.173

我建议您保留井号 (#)，因为用户可以通过直接 URL 轻松获取特定页面（例如 What I Do => [http://www.springalldesign.co.uk/#whatido-title](http://www.springalldesign.co.uk/#whatido-title)）

要摆脱哈希 (#)，您可以将菜单的 <A href's> 分别更改为 <A onclick's>。请记住，您还应该提供“onclick”事件处理程序以正确导航。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T00:22:06.820

[**jsFiddle DEMO**](http://jsfiddle.net/3M7kd/show/) *（移除`/show/`以访问 jsFiddle 编辑页面。）*

您的主页只能显示一个`iframe`到您的网页。

然后，*URL 地址栏上的导航* **永远不会**改变。

在那个 jsFiddle 中，请注意地址栏是如何始终相同的。

# java - 创建 SchemaFactory 的新实例时出错

> ID：14161731
> 
> 赞同：-2
> 
> 时间：2013-01-04T17:18:29.143
> 
> 标签：java, android, xml, xsd

我在执行以下操作时遇到异常：

```
factory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema"); 
```

我得到了 ileagal 参数，有人可能知道为什么？

**部分堆栈跟踪**

> android.app.ActivityThread.access$1500(ActivityThread.java:117)，android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)，android.os.Handler.dispatchMessage(Handler.java:99)，android。 os.Looper.loop(Looper.java:123), android.app.ActivityThread.main(ActivityThread.java:3691), java.lang.reflect.Method.invokeNative(Native Method), java.lang.reflect.Method。调用（Method.java:507），com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run（ZygoteInit.java:847），com.android.internal.os.ZygoteInit.main（ZygoteInit.java:605），dalvik .system.NativeStart.main（本机方法）]

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-04T17:22:38.000

[根据http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/validation/SchemaFactory.html#newInstance(java.lang.String](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/validation/SchemaFactory.html#newInstance(java.lang.String) ) ，您需要正确转义冒号

尝试`factory = SchemaFactory.newInstance("http\://www.w3.org/2001/XMLSchema");`

# android - 坚持为什么我的 Android 应用程序无法运行？

> ID：14161732
> 
> 赞同：0
> 
> 时间：2013-01-04T17:18:30.663
> 
> 标签：android

我正在开发一个应用程序，它将执行以下操作：

1.  允许第一个用户“Sam”在 editText 字段中键入他/她的消息。
2.  按屏幕底部的“Alex”按钮启动新活动ActivityAlex
3.  允许用户“Alex”编辑 editText 字段。
4.  按屏幕底部的“Sam”按钮重新启动活动 MainActivity

到目前为止，我认为我已经完成了大部分工作，但我一直在坚持如何修复程序，以便它可以完成我想要它做的事情。

这是我的[日志猫](https://imgur.com/DZkFT)

这是我的主要活动：

```
package com.chatfriends;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    private Button alexButton; //initialize the buttons for "alex" and "sam"

    public void initialize(){

        alexButton = (Button) findViewById(R.id.button1); // initializing the buttons by location. Also need to define the button with two states (regular and yellow)

       alexButton.setOnClickListener(new OnClickListener(){
        public void onClick(View arg0){
        alexbutton(arg0);
        }

        public void alexbutton(View v) {
            Intent intent = new Intent(MainActivity.this, ActivityAlex.class); //the intent is telling the app what you want it to do. Think about setting the intent to the buttons.
            startActivity(intent);

        }
    });
  }
} 
```

这是我的活动亚历克斯：

```
package com.chatfriends;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class ActivityAlex extends MainActivity {

      @Override
      protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

        private Button samButton; //initialize the buttons for "alex" and "sam"

        public void initialize(){

            samButton = (Button) findViewById(R.id.button2); // initializing the buttons by location. Also need to define the button with two states (regular and yellow)

        samButton.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
            samButton(arg0);
            }

            public void samButton(View v) {
                Intent intent = new Intent(ActivityAlex.this, MainActivity.class); //the intent is telling the app what you want it to do. Think about setting the intent to the buttons.
                startActivity(intent);

            }
        });
    }
} 
```

这是我的清单代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.chatfriends"
    android:versionCode="1"
    android:versionName="1.0" xmlns:tools="http://schemas.android.com/tools" tools:ignore="OldTargetApi">

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" tools:ignore="MissingPrefix"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/app_name" >
           <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityAlex" />
    </application>

</manifest> 
```

这是 XML 布局文件。

活动主：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

        <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/userName1"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1"
        android:ems="10"
        android:inputType="textMultiLine" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="26dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="@string/button1"
        android:onClick="startalexbutton" />

</RelativeLayout> 
```

activityex.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ActivityAlex" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="@string/userName2"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1"
        android:ems="10"
        android:inputType="textMultiLine" >
    </EditText>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="26dp"
        android:layout_marginRight="20dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="@string/button2"
        android:onClick="startMainActivity" />

 </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:23:20.340

这是因为您为 xml 中的每个按钮使用以下行注册了按钮点击。

```
 <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="26dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="@string/button1"
        android:onClick="startalexbutton" />

 <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="26dp"
        android:layout_marginRight="20dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="@string/button2"
        android:onClick="startMainActivity" /> 
```

但是您尚未使用此名称定义任何 onClick() 方法。从 xml 中删除这些 onclick 行，或者使用相同的名称定义这些方法来监听按钮，而不是再次设置 onClickListeners()。如果您决定使用您在 xml 中注册的名称定义 onClick 方法，请执行以下操作。

```
public void startalexbutton(View view)
{
// Do what ever you need here when button is clicked. Because the control comes to this method when the button is clicked. 
} 
```

如果这样做，则不再需要 initialize() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:21:39.657

```
android:onClick="startalexbutton" 
```

这告诉您的程序在`startalexbutton()`按下时调用一个方法，并且该方法必须带有一个`View`参数（`public void startalexbutton(View view)`）。

这个方法会在你的`MainActivity`课堂上使用；但是，由于您已经使用`setOnClickListener()`它，只需从您的 XML**中删除。** `android:onClick="startalexbutton"`（您也可以删除`android:onClick="startMainActivity"`。）

*PS：以后请把您的LogCat日志以文本格式；然后它们 A) 出现在搜索结果中并且 B) 更容易阅读。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:21:51.547

您没有调用Activity来`initialize()`初始化Button `onCreate``ActivityAlex``MainActivity`

```
 @Override
      protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

          initialize() ;//<<<<initialize here
    } 
```

并从 xml 中的两个按钮中删除 onClick 属性为

在 activity_main.xml ：

```
 <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="26dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="@string/button1"
       /> 
```

在 activityalex.xml 中：

```
 <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_marginBottom="26dp"
        android:layout_marginRight="20dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="@string/button2"
         /> 
```

**笔记 ：**

当您`setOnClickListener`在 java 代码中添加任何 View 时，不需要`android:onClick` 使用 View xml添加

# templates - 编辑 Devexpress CodeRush SmartConstructor 代码模板

> ID：14161733
> 
> 赞同：0
> 
> 时间：2013-01-04T17:18:43.933
> 
> 标签：templates, devexpress, coderush

如何编辑 SmartConstructor TextCommand 的行为？

对于类变量：

```
public string MyVar1;
public string MyVar2; 
```

SmartConstructor 生成

```
public Class1(string myVar1, string myVar2)
{
    MyVar1 = myVar1;
    MyVar2 = myVar2;
} 
```

有没有办法修改代码模板，使其遵循这个编码标准？

```
public Class1(string pMyVar1, string pMyVar2)
{
    MyVar1 = pMyVar1;
    MyVar2 = pMyVar2;
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:48:48.057

转到 DevExpress -> 选项... 菜单。

导航到编辑器 | 代码风格 | 标识符选项页面。

根据您的要求修改参数命名样式。

# android - 使用 SlidingMenu 和 ActionBar Sherlock 的 Overlay 剪切操作栏

> ID：14161738
> 
> 赞同：5
> 
> 时间：2013-01-04T17:19:09.200
> 
> 标签：android, overlay, actionbarsherlock

我正在为 Black Ops 2 指南应用程序使用 ActionBarSherlock 库和滑动菜单库，并尝试在滑动菜单的同一活动中插入漂亮的“覆盖”功能。结果是：

*   覆盖不起作用
*   动作条切割

这是代码：

```
 requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.c_m_pyrrhicvictory);   
    Resources res = getResources();
    SlidingMenu menu = new SlidingMenu(this);
    menu.setMode(SlidingMenu.LEFT);
    menu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    menu.setShadowWidthRes(R.dimen.shadow_width);
    menu.setShadowDrawable(R.drawable.shadow);
    menu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    menu.setFadeDegree(0.35f);
    menu.attachToActivity(this, SlidingMenu.SLIDING_CONTENT);
    menu.setMenu(R.layout.main_slidingmenu);
    getActionBar().setDisplayHomeAsUpEnabled(true);
    getSupportActionBar().setBackgroundDrawable(getResources().
         getDrawable(R.drawable.ab_bg_black));
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    getSupportActionBar().setSubtitle("1/10 Standard");
    getSupportActionBar().setTitle("Missions"); 
```

截图： [主要活动](http://i.stack.imgur.com/BANZD.png) [SlidingMenu](http://i.stack.imgur.com/ZRz03.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-21T12:43:07.627

我找到了解决方案。在文件 SlidingMenu.java 中找到函数

```
public void attachToActivity(Activity activity, int slideStyle) {
        attachToActivity(activity, slideStyle, false);
    } 
```

并将第三个参数更改为 true，attachToActivity(activity, slideStyle, true); 即 actionbarOverlay 参数应设置为**true**。这个对我有用。不要忘记在 Menu 布局中添加 topMargin 或 padding，因为第一个列表项可能会被 ActionBar 隐藏。请参阅 CustomViewBehind.java 中的 onLayout 函数。

# .net - 什么会导致此 OLE 错误？（带有无效标头的数据包）

> ID：14161744
> 
> 赞同：1
> 
> 时间：2013-01-04T17:19:30.087
> 
> 标签：.net, winforms, ole, barcode-printing

我编写了一个使用 Seagull Scientific 的 BarTender .NET SDK 打印标签的应用程序。该应用程序日复一日地完美运行，打印数千个标签。但是，大约 3 周后，当我调用 BarTender 引擎的 Documents.Open 方法时，我收到此错误：

> OLE 收到带有无效标头的数据包。（来自 HRESULT 的异常：0x80010111）

在这个错误之后，我的应用程序一瘸一拐地打印了一些标签，但必须手动重新启动才能恢复全部功能。

我在 Seagull Scientific 用户论坛上询问过这个问题，但还没有得到任何帮助。我希望遇到此 OLE 错误的人（可能是在与 BarTender 无关的上下文中）可能会在这里有所启发。

# playframework-1.x - 在播放框架 1.2+ 的 groovy 模板中呈现两个列表

> ID：14161748
> 
> 赞同：0
> 
> 时间：2013-01-04T17:19:39.947
> 
> 标签：playframework-1.x

我正在尝试在使用 groovy 模板播放框架 1.2+ 时在列表中呈现列表。但是，当我在 #{list} 标记中使用 #{list} 标记时，我没有得到想要的结果。任何人都可以分享他们在使用 groovy 模板进行游戏时是如何解决这个问题的（无论是使用 Groovy 还是 CSS）。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T19:56:21.607

我用 Play 1.2.5 创建了一个小示例项目并修改了这两个文件：

**应用程序.java**：

```
public class Application extends Controller {

  public static void index() {
    List<List<String>> listWithLists = new ArrayList<List<String>>();

    List<String> listInList1 = new ArrayList<String>();

    listInList1.add("1st element in 1st list");
    listInList1.add("2nd element in 1st list");

    listWithLists.add(listInList1);

    List<String> listInList2 = new ArrayList<String>();

    listInList2.add("1st element in 2nd list");
    listInList2.add("2nd element in 2nd list");

    listWithLists.add(listInList2);

    render(listWithLists);
  }
} 
```

**索引.html**：

```
<ul>
#{list items:listWithLists, as:'listWithinList'}
  #{list items:listWithinList, as:'string'}
    <li>${string}</li>
  #{/list}
#{/list}
</ul> 
```

# backbone.js - 如何为 BackboneJS 使用创建通用表格模板

> ID：14161750
> 
> 赞同：0
> 
> 时间：2013-01-04T17:19:43.077
> 
> 标签：backbone.js, handlebars.js

所以到目前为止我的模板：

```
<script id="table-row" type="x-handlebars-template">
    <tr>
        {{#each this}}
            <td>{{.}}</td>
        {{/each}}
    </tr>
</script> 
```

我的渲染代码：

```
that.collection.each(function(model){
     var template = Handlebars.compile( $('#table-row').html() );
     that.table.append(template(model.toJSON()));
}); 
```

任何我的虚拟数据收集：

```
this.collection = new Backbone.Collection([
      {name: "Tim", age: 5},
      {name: "Ben", age: 26},
      {name: "Rob", age: 55}
    ]); 
```

现在，如何创建一个模板，它可以输出与`<td>`我的模型中的对象键一样多的 s？IE。我现在有'name'和'age'，但是我添加'height'，我必须专门更新这个模板，我怎样才能创建一个通用的表格行模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:30:34.690

我认为您需要一个自定义的 Handlebars 助手来迭代对象键。我没有使用过它，但是[像这样](https://gist.github.com/1371586)的东西应该可以解决问题。

这是该链接中的代码：

```
// HELPER: #key_value
//
// Usage: {{#key_value obj}} Key: {{key}} // Value: {{value}} {{/key_value}}
//
// Iterate over an object, setting 'key' and 'value' for each property in
// the object.
Handlebars.registerHelper("key_value", function(obj, fn) {
    var buffer = "",
        key;

    for (key in obj) {
        if (obj.hasOwnProperty(key)) {
            buffer += fn({key: key, value: obj[key]});
        }
    }

    return buffer;
}); 
```

# java - 类、对象、实体：有什么区别？

> ID：14161753
> 
> 赞同：12
> 
> 时间：2013-01-04T17:20:00.043
> 
> 标签：java, terminology

我还看到了其他术语：实体对象、值对象等。还有其他我应该知道的术语吗？这些术语指的是什么？

它们之间的差异，如果有的话，可以通过阅读代码来识别吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-04T17:41:21.323

类是创建对象的模板。并非所有 OO 语言都使用类（参见 Self，Javascript）。通常，类被实现为对象。

对象是一组数据，它与作用于该数据的函数（称为方法）打包在一起。调用类的构造函数为对象分配内存并初始化其成员变量。

实体是表示具有系统有兴趣跟踪的身份的事物的对象。典型的例子是客户和账户。

值对象是一个值，它没有标识，具有相同值的两个实例被认为是相同的。典型的例子是货币金额、地点、支付类型。

数据传输对象用于传递一堆数据。通常，它们用于分布式系统中以捆绑的形式发送数据，以避免重复的网络调用。数据传输对象没有身份（或者没有期望他们应该有任何身份），它们只是数据的容器。

通常，您可以区分实体和值对象，因为实体具有可识别的身份，系统关心的是创建、存储和更改它们。在对象映射到某个数据库的情况下，实体的主键是某种复合自然键或人工键，而值对象则按值进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:24:03.057

通常，类是定义一组属性和方法/函数的构造，而对象是在运行时创建的类的实际实例。

示例类定义：

```
public class Example{

...

} 
```

以下将在运行时将 Example 类的实例创建为 Object；

```
new Example(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-03-31T22:16:51.510

*   类定义实体，而对象是实际实体
*   类是定义对象所需的所有特征和动作的概念模型，而对象是真实模型
*   类是对象的原型
*   属于同一类的所有对象具有相同的特征和动作

# c# - 在 c# 中搜索小数组或使用 if 语句是否更高效？

> ID：14161757
> 
> 赞同：-1
> 
> 时间：2013-01-04T17:20:21.847
> 
> 标签：c#, arrays, parsing, search, lexer

假设我正在编写一个解析器，我需要检查 Scanner::NextToken 返回的当前标记（例如）是否是一小组值之一（比如 5-10 个项目；少一些或多一些）。

在这个小型开源项目 (https://github.com/gsscoder/exprengine) 中，在 Parser 类中，我声明了我使用 Array::Contains() 查询的各种静态数组（请参阅 Parser::Ensure() 方法）。

我猜我是否可以使用扫描器中用于检查令牌的相同技术来提高性能，这是一种使用 if 语句的辅助方法（如下所示）：

```
private static bool IsLineTerminator(int c)
{
  return c == 0x0A || c == 0x0D || c == 0x2028 || c == 0x2029;
} 
```

或者也许这也在扫描仪中，我应该使用解析器中使用的技术？

任何意见（动机良好）将不胜感激；只是不建议使用像 ANTLR 这样的工具生成解析器/扫描器——我想保留一个手写的实现。

问候，贾科莫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:24:19.700

本质上，这正是`Array.Contains`正在做的事情。您将使用稍微多一点`Contains`的调用堆栈，因为它不会被内联到那种程度，但是发生的事情的基本概念是相同的。您不太可能会看到显着的性能差异，但无论如何都要分析这两种方法并亲自看看。 [知道哪种方法更快的最好方法就是尝试一下，而不是随便问陌生人。](http://ericlippert.com/2012/12/17/performance-rant/)

对于可能更快的实际算法更改要考虑的另一种选择是使用 a`HashSet`而不是数组。仅对于 4 个值，速度差异可能很小，但基于散列的数据结构是专门为更快的搜索而设计的。（至少也值得测试）。`switch`语句也将实现为基于哈希的解决方案，因此您也可以考虑使用它。

# database - 从动态打开的数据库中隐藏 MS-Access 后台应用程序

> ID：14161761
> 
> 赞同：1
> 
> 时间：2013-01-04T17:20:35.723
> 
> 标签：database, forms, vba, ms-access

我正在使用以下代码从我的主应用程序中隐藏后台 MS-Access 窗口。

```
Global Const SW_HIDE = 0
Global Const SW_SHOWNORMAL = 1
Global Const SW_SHOWMINIMIZED = 2
Global Const SW_SHOWMAXIMIZED = 3
Private Declare Function apiShowWindow Lib "user32" Alias "ShowWindow" (ByVal hwnd As Long, ByVal nCmdShow As Long) As Long

Function fSetAccessWindow(nCmdShow As Long)
    Dim loX As Long
    Dim loForm As Form
    On Error Resume Next
    Set loForm = Screen.ActiveForm

    If Err <> 0 Then
        loX = apiShowWindow(hWndAccessApp, nCmdShow)
        Err.Clear
    End If

    If nCmdShow = SW_SHOWMINIMIZED And loForm.Modal = True Then
        MsgBox "Cannot minimize Access with " _
        & (loForm.Caption + " ") _
        & "form on screen"
    ElseIf nCmdShow = SW_HIDE And loForm.PopUp <> True Then
        MsgBox "Cannot hide Access with " _
        & (loForm.Caption + " ") _
        & "form on screen"
    Else
        loX = apiShowWindow(hWndAccessApp, nCmdShow)
    End If
    fSetAccessWindow = (loX <> 0)
End Function 
```

但是，我想对使用以下代码打开的另一个数据库（表单）执行相同的操作：

```
Dim appAccess As Access.Application
Set appAccess = CreateObject("Access.Application")
appAccess.OpenCurrentDatabase "myDatabasePath"
appAccess.DoCmd.OpenForm "myFormName"
Set appAccess = Nothing 
```

我怎样才能从主应用程序中完成这项工作？*我想我也可以从myDatabasePath数据库中的**myFormName*表单调用我的 fSetAccessWindow() 函数，但我想从调用第二个*mdb*文件的主应用程序中调用。

 **我正在使用 Access 2007 开发 Access 2000-2003 MDB 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:41:04.083

使用[Application.hWndAccessApp 方法](http://msdn.microsoft.com/en-us/library/office/ff196179.aspx)检索第二个 Access 应用程序实例的窗口句柄。

```
appAccess.hWndAccessApp 
```

将该值提供给`apiShowWindow()`函数。

我没有对此进行测试，因此不确定我是否忽略了某些东西，但这对我来说似乎是一个合理的起点。**

# iphone - 过于频繁地报告 Game Center 成就？

> ID：14161762
> 
> 赞同：1
> 
> 时间：2013-01-04T17:20:39.107
> 
> 标签：iphone, objective-c, ios, game-center, achievements

我正在用 cocos2d 开发一个关于跳跃青蛙的游戏。在这个游戏中，跳跃动作非常常见（每关 25 到 60 次，取决于难度）。我正在将游戏与Game Center集成，我想添加几个关于跳跃次数的成就（例如：“新手跳跃者：你已经跳跃了200次”，“中等跳跃者：你已经跳跃了1000次”......等等）

问题是我认为对 Game Center 的“调用”以更新每次跳跃的跳跃次数可能太多了，并且由于多次调用“reportAchievementWithCompletionHandler”方法，它可能会使应用程序运行缓慢或失败，但是这是我知道在解锁时显示成就的唯一方法（我的意思是，例如，显示第 200 次跳跃的成就解锁弹出窗口）

这真的是个问题吗？还是经常更新成就很正常？

提前致谢

# ios - 从哪里开始调试使用 iOS 5 构建的在 6 但不是 5.1 上运行的应用程序？

> ID：14161763
> 
> 赞同：1
> 
> 时间：2013-01-04T17:20:41.267
> 
> 标签：ios, xcode, debugging

我有一个需要支持 5.1 设备的应用程序。

它在 iOS 5 iPhone 上运行良好，但在 iPad 上运行良好。在装有 iOS 5.1.1 的 iPad 上，它只是挂起。我不确定如何调试它。我已经注释掉了所有内容，`didFinishLaunchingWithOptions:`但在结束之后，我只是挂起。如果我暂停应用程序，它会停在`mach_msg_trap`，这对我没有多大帮助……至少对我来说。

如果我在 iPad 6.0 模拟器上运行相同的应用程序，它工作正常。我已经使用 5.1 SDK 构建了该应用程序，并在所有模拟器中进行了尝试。

任何关于从哪里开始的帮助将不胜感激。我什至不确定要提供哪些详细信息来寻求帮助。

# android - 使用列表视图的选中项填充适配器

> ID：14161768
> 
> 赞同：0
> 
> 时间：2013-01-04T17:20:58.687
> 
> 标签：android, listview, checkbox, adapter

我有一个适配器来填充我的列表视图，（书籍列表）。我的列表视图包含一个复选框。一旦按下按钮，我希望在另一个列表视图（另一个活动）中显示所有选中的项目，我该怎么做？我正在尝试使用下面的代码。我怎样才能做到这一点？到现在为止，我到了祝酒列表视图中的项目数量，当我检查或取消选中一个项目以显示她的位置时，我祝酒。我想知道选中项目的所有位置是新项目其他listview。这里是适配器的代码：

```
public  class MyAdapter extends BaseAdapter
{

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    public ImageLoader imageLoader; 
    private ArrayList<Boolean> status_mag = new ArrayList<Boolean>();

    public MyAdapter(Activity a,ArrayList<HashMap<String, String>> d) {
        // TODO Auto-generated constructor stub
        activity = a;
        data=d;
        imageLoader=new ImageLoader(activity.getApplicationContext());
        for(int i=0;i<data.size();i++){status_mag.add(false);}
     }

    public ArrayList<Boolean> getStauts_mag(){
        return status_mag;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return data.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(final int position, View convertView,
            ViewGroup parent) {
        // TODO Auto-generated method stub
        View vi=convertView;
        if(vi == null)
        {
            LayoutInflater inflater=getLayoutInflater();
            vi=inflater.inflate(R.layout.list_row_megashore_mag, parent, false);
        }
        TextView title = (TextView)vi.findViewById(R.id.title); // title
        TextView price = (TextView)vi.findViewById(R.id.prix); // duration
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image
        TextView catg = (TextView)vi.findViewById(R.id.catg_mag);
        CheckBox acheter_mag = (CheckBox)vi.findViewById(R.id.checkBoxAchete_mag);
        HashMap<String, String> mag = new HashMap<String, String>();

        mag = data.get(position);
        title.setText(mag.get(MainMagazines.KEY_TITLE));
        price.setText(mag.get(MainMagazines.KEY_PRICE));
        catg.setText(mag.get(MainMagazines.KEY_CATG));
        imageLoader.DisplayImage(mag.get(MainMagazines.KEY_THUMB_URL), thumb_image);

        acheter_mag.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub

                if (isChecked) {
                    status_mag.set(position, true);
                    Toast.makeText(getApplicationContext(), "cheked" + position,
                            Toast.LENGTH_SHORT).show();
                } else {
                    status_mag.set(position, false);
                    Toast.makeText(getApplicationContext(), "uncheked" + position,
                            Toast.LENGTH_SHORT).show();

                }

            }

        });
        acheter_mag.setChecked(status_mag.get(position));
        return vi;

    }

} 
```

这里是主类中的代码，按钮尝试显示检查项目的总和。

```
final MyAdapter adapter_mag=new MyAdapter(this, booksList);

    getListView().setAdapter(adapter_mag);
    taille_mag=adapter_mag.getCount();
    getListView().setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

checkitems=(Button)findViewById(R.id.to_favoris);
    checkitems.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            for(int i=1;i<=taille_mag;i++){if (adapter_mag.status_mag.get(i)==true){toast_somme+=1;}}
            Toast.makeText(getApplicationContext(), "la somme de checked items" + toast_somme,
                    Toast.LENGTH_SHORT).show();

        }
    }); 
```

请帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:26:36.840

使用您当前的设置，只需循环`status_mag`检查是否检查了此索引。如果是这样，请将其保存在新列表中并将其绑定到您的新 ListView。

或者，如果根布局`list_row_megashore_mag.xml`实现 Checkable 您可以调用[`getCheckedItemPositions()`](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemPositions%28%29)以自动获取已检查行的 SparseBooleanArray。

# iphone - iPhone SDK - 即使 iPhone 重新启动也要安排操作？

> ID：14161769
> 
> 赞同：0
> 
> 时间：2013-01-04T17:21:08.367
> 
> 标签：iphone, timer, synchronization, delay, ios6

我目前正在为 Android 和 iOS 创建一个应用程序，我目前正在开发 iPhone 版本。我想要给用户 5 个选项，它们都是不同的同步间隔：30 分钟、3 小时、12 小时、24 小时和“每周一，6 点钟”。我在 Android 版本中使用了 Android 中的 Account manager 和同步功能，但我不知道 iPhone SDK 中是否有与此等效的功能。到目前为止，我发现的唯一一件事就是使用 NSTimer。我现在真的很想知道当 iPhone 重新启动时 NSTimer 是否被破坏，如果是 - 还有其他方法可以做到这一点吗？

我正在使用 iOS SDK 6.0，最低目标是 iOS 6.0。

# sql - 从 SQL 中的查询创建表

> ID：14161775
> 
> 赞同：1
> 
> 时间：2013-01-04T17:21:28.897
> 
> 标签：sql

我对 SQL 很陌生，我正在尝试从查询中创建一个表。但是，当我尝试执行查询时遇到了一些错误。

我正在尝试创建一个名为`"CUM_PRD"`以下列的表：

```
Gov_fld_nm,
Gov_pol_nm,
Oil_pd,
Gas_pd,
Water_pd. 
```

应使用此查询填充的值来自以下查询。

```
SELECT GOV_FLD_NM,
SUM (OIL_PD),
SUM (GAS_PD),
SUM (WAT_PD)
FROM PRE_PRD
GROUP BY GOV_FLD_NM 
```

此查询单独运行时可以正常工作，但是当我尝试将其包含在创建表查询中时，它不起作用。我相信我没有使用正确的语法。

有人可以帮忙吗？

这是我尝试使用的。

```
CREATE TABLE CUM_PRD
(
    GOV_FLD_NM NVARCHAR (50),
    OIL_PD INT,
    GAS_PD INT,
    WAT_PD INT
)
INSERT INTO CUM_PRD
SELECT (
    GOV_FLD_NM,
    SUM (OIL_PD),
    SUM (GAS_PD),
    SUM (WAT_PD)
)
FROM PRE_PRD
GROUP BY GOV_FLD_NM 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:24:57.193

如果要创建临时表，可以使用`SELECT ... INTO...`：

```
SELECT GOV_FLD_NM, SUM (OIL_PD), SUM (GAS_PD), SUM (WAT_PD) 
INTO #CUM_PRD
FROM PRE_PRD 
GROUP BY GOV_FLD_NM 
```

由于您的脚本没有创建临时表，为什么不先创建表，然后插入其中：

```
CREATE TABLE CUM_PRD 
( 
  GOV_FLD_NM NVARCHAR (50), 
  OIL_PD INT,
  GAS_PD INT, 
  WAT_PD INT 
); 
```

然后插入数据：

```
INSERT INTO CUM_PRD (GOV_FLD_NM, OIL_PD, GAS_PD, WAT_PD)
SELECT GOV_FLD_NM, SUM (OIL_PD), SUM (GAS_PD), SUM (WAT_PD) 
FROM PRE_PRD 
GROUP BY GOV_FLD_NM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:25:03.390

我会做

```
SELECT GOV_FLD_NM, SUM (OIL_PD), SUM (GAS_PD), SUM (WAT_PD) 
INTO CUM_PRD 
FROM PRE_PRD 
GROUP BY GOV_FLD_NM; 
```

SELECT INTO 为您创建一个表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:25:39.697

您应该使用 CREATE TABLE table_name AS 语法

```
CREATE TABLE CUM_PRD
AS
(
SELECT GOV_FLD_NM, SUM (OIL_PD) OIL_PD_SUM, SUM (GAS_PD) GAS_PD_SUM, SUM (WAT_PD) WAT_PD_SUM
FROM PRE_PRD
GROUP BY GOV_FLD_NM) 
```

# php - 发布时如何编辑小部件值？

> ID：14161780
> 
> 赞同：0
> 
> 时间：2013-01-04T17:22:05.070
> 
> 标签：php, symfony-1.4

让我们看看动作（表单基于模型）

```
$this->form->bind ($request->getParameter('task'));
if ($this->form->isValid())
{
    // cakk
} 
```

这一切都很好，当它真的无效时它是无效的等等。

但我想编辑一些字段，例如必须始终将日期设置为现在。或者必须对密码进行编码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:33:27.603

`doSave()`您可以以 .. 形式覆盖该方法，如下所示：

```
public function doSave($con = null)
{
   $this->values['form field'] = 'newvalue';
   parent::doSave($con);
} 
```

`$this->values`是一个包含表单上的值的数组。

## 更新

你可以使用一个 post 验证器 .. 像这样（再次在表单类中）：

```
$this->validatorSchema->setPostValidator(
     new sfValidatorCallback(array('callback' => array($this, 'methodName')))
);

public function methodName($validator, $values)
{
    // check / change what you need to
    $values['fieldname'] = 'new value';
    // return values
    return $values;
} 
```

# string - CakePHP 2.0：在我的模型末尾找不到类“字符串”？

> ID：14161782
> 
> 赞同：0
> 
> 时间：2013-01-04T17:22:05.710
> 
> 标签：string, model, cakephp-2.0, classnotfound

我正在使用 CakePHP 2.0

我有一个非常简单的用户模型：

```
<?php
    App::uses('Model', 'Model');

    class User extends AppModel {
        public $name = 'User';
        public $validate = array(
            'username' => array(
                'required' => array(
                    'rule' => array('notEmpty'),
                    'message' => 'A username is required'
                )
            ),
            'password' => array(
                'required' => array(
                    'rule' => array('notEmpty'),
                    'message' => 'A password is required'
                )
            )
        );

        public function beforeSave(array $options = array()) {
            if (isset($this->data[$this->alias]['password'])) {
                $this->data[$this->alias]['password'] = AuthComponent::password($this->data[$this->alias]['password']);
            }
            return true;
        }
    }
    ?> 
```

但是我不断收到以下错误：

**致命错误：在第 27 行的 /home/xxx/app/Model/User.php 中找不到类“字符串”。**

如果我评论 beforeSave 功能，错误就会消失。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T00:26:20.840

尝试改变：

```
 public function beforeSave(array $options = array()) { 
```

到

```
 public function beforeSave($options = array()) { 
```

# ios - 修改 iOS IPA 资产并退出（最好从 Windows）

> ID：14161783
> 
> 赞同：1
> 
> 时间：2013-01-04T17:22:11.307
> 
> 标签：ios, code-signing, game-engine, ipa

我正在开发一款 iOS 游戏。我可以访问 mac、xcode 等。问题是我的艺术家和设计师没有。我想给他们一个 ipa，让他们能够解压缩、修改资产，然后重建和测试 ipa，而不必使用 mac 或 xcode。ipa 不需要安装在除测试设备之外的任何 iOS 设备上。这可能吗？

我读了一些关于 xcode 附带的 codesign 的内容，但这似乎只能在 Mac 上运行 - 有替代方案吗？看起来 Marmalade（也许还有 UDK）向他们的用户提供了这个功能（在电脑上辞职），但我不想使用这些引擎。

最终，我只是在为艺术家或设计师寻找一种方法来测试他们的更改，而不需要他们从 xcode 或 mac 重建 ipa - 有什么想法吗？是否有一个系统允许艺术家或设计师将文件添加到应用程序可以访问的 iDevice 以自我修补其资产？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T00:50:51.280

我能想到的最佳解决方案是使用 Dropbox 的 iOS API 作为补丁接口将文件下载到文档文件夹中。然后，每当我从已安装的文件夹中加载文件时，我首先检查补丁文件夹中是否存在新资产，如果存在，则使用该文件。一个相当基本的概念，似乎在 iOS 设备上运行得非常好。

# sql-server-2008 - SSIS 包中的空文本文件

> ID：14161788
> 
> 赞同：3
> 
> 时间：2013-01-04T17:22:23.633
> 
> 标签：sql-server-2008, ssis

在我的项目中，我想在包触发时创建一个空文本文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T17:33:00.827

我可能只使用一条线`Script task.`

```
System.IO.File.Create(@"C:\OneEmptyTextFile.txt"); 
```

1.  `Script Task`在您的控制流上，从您的 SSIS 工具箱中拖动类型的任务
2.  双击新建`Script Task`
3.  在脚本任务编辑器中，单击`Edit Script...`
4.  在该`public void Main()`部分中，它声明`// TODO: Add your code here`用上面的代码替换该行。如果您使用的是 SSIS 2005 或如果您选择在 2008/2012 中使用 VB.NET，请删除尾随分号。
5.  单击 Integration Services 脚本任务窗口右上角的 X 按钮
6.  返回脚本任务编辑器，单击`OK`。

现在，每当该任务运行时，它将使用 File 对象的静态[Create](http://msdn.microsoft.com/en-us/library/d62kzs03.aspx)方法在请求的位置创建一个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-24T05:03:54.330

`FileStream`在使用该`File.Create`方法后处理对象以避免锁定问题可能是个好主意。

在这里阅读更多[System.IO.File.Create 锁定文件](https://stackoverflow.com/questions/4680284/system-io-file-create-locking-a-file)

# hadoop - 加载数据时出现 HDInsight VM 初始化错误

> ID：14161789
> 
> 赞同：1
> 
> 时间：2013-01-04T17:22:28.113
> 
> 标签：hadoop, jvm, azure-hdinsight

我正在尝试运行[此入门示例](http://gettingstarted.hadooponazure.com/loadingData.html)以将数据加载到我的单节点 HDInsight hadoop 集群中。当我运行示例时，我收到如下所示的错误：

```
c:\Hadoop\GettingStarted>powershell -ExecutionPolicy unrestricted -F importdata.
ps1 w3c
Attempting to import scenario w3c

Path
----
C:\Hadoop\GettingStarted\w3c
Error occurred during initialization of VM
java.nio.charset.IllegalCharsetNameException:
        at java.nio.charset.Charset.checkName(Charset.java:273)
        at java.nio.charset.Charset.lookup2(Charset.java:458)
        at java.nio.charset.Charset.lookup(Charset.java:437)
        at java.nio.charset.Charset.defaultCharset(Charset.java:579)
        at sun.nio.cs.StreamEncoder.forOutputStreamWriter(StreamEncoder.java:37)

        at java.io.OutputStreamWriter.<init>(OutputStreamWriter.java:94)
        at java.io.PrintStream.<init>(PrintStream.java:100)
        at java.lang.System.initializeSystemClass(System.java:1092) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:23:32.213

在您的机器上创建数据文件时，此问题似乎与文件写入权限有关。

# jsf-2 - 过滤器阻止重置表值

> ID：14161791
> 
> 赞同：0
> 
> 时间：2013-01-04T17:22:33.697
> 
> 标签：jsf-2, primefaces

我的 jsf 中的两个主要组件是 p:tree 和 p:dataTable

这个想法是根据树节点选择创建一个表。

杰夫：

```
<h:panelGrid columns="2" style="width: 100%" columnClasses="treeColumn,tableColumn">
        <h:panelGroup id="treePanel">
            <p:tree id="tree" 
                    value="#{genRepBean.root}" 
                    var="node" 
                    dynamic="true" 
                    cache="true" 
                    animate="true"
                    selectionMode="single"
                    selection="#{genRepBean.selectedNode}"
                    rendered="#{genRepBean.renderTree}"> 
                <p:ajax event="select" listener="#{genRepBean.onNodeSelect}" update=":mainForm:tablePanel"/>
                <p:treeNode expandedIcon="ui-icon-folder-open"  
                            collapsedIcon="ui-icon-folder-collapsed">  
                    <h:outputText value="#{node.name}" styleClass="tableTreeText"/>  
                </p:treeNode> 
                <p:treeNode type="au" icon="ui-icon-document">  
                    <h:outputText value="#{node.name}" />  
                </p:treeNode>  
            </p:tree> 
        </h:panelGroup>
        <h:panelGroup id="tablePanel">
            <p:dataTable id="acqDataTable"
                         var="acq"
                         value="#{genRepBean.acqList}" 
                         rendered="#{genRepBean.renderTable}"
                         filteredValue="#{genRepBean.filteredAcqList}"
                         paginator="true"
                         paginatorPosition="bottom"
                         paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                         rowsPerPageTemplate="5,10,15"
                         rows="10"
                         lazy="false"
                         style="width: 100%">
                <p:column headerText="ID" sortBy="#{acq.Id}" styleClass="tableTreeText"> 
                    <h:outputText value="#{acq.Id}" />  
                </p:column>
                <p:column headerText="IP ADDRESS" sortBy="#{acq.ipAddress}" styleClass="tableTreeText">  
                    <h:outputText value="#{acq.ipAddress}"/>  
                </p:column>
                <p:column headerText="STEP" sortBy="#{acq.Step}" filterBy="#{acq.Step}" filterMatchMode="contains" styleClass="tableTreeText">  
                    <h:outputText value="#{acq.Step}"/>  
                </p:column>
                <p:column headerText="STATUS" sortBy="#{acq.status}" filterBy="#{acq.status}" styleClass="tableTreeText">  
                    <h:outputText value="#{acq.status}"/>  
                </p:column>  
            </p:dataTable> 
```

bean（onNodeSelect）：

```
public void onNodeSelect() {
acqList.clear();
    this.acqList = AcqHelper.getAllViaStartDate(new java.sql.Date(startDate.getTime()));
    if (!acqList.isEmpty()) {
        DataTable dataTable = (DataTable) FacesContext.getCurrentInstance().getViewRoot().findComponent("mainForm:acqDataTable");
        dataTable.reset();
        renderTable = true;
  } 
```

我不想删除过滤器选项，因为它对客户端非常有用，但我不知道为什么它会阻止表刷新？

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:46:14.300

您不需要对 DataTable 模型进行更改。Primefaces 正在从`#{genRepBean.acqList}`. 只需在该列表中设置适当的值并重置`#{genRepBean.filteredAcqList}`列表。请求完成后，数据表将被刷新为新值。

# ios - iOS 本地化图像似乎没有本地化

> ID：14161803
> 
> 赞同：1
> 
> 时间：2013-01-04T17:23:36.330
> 
> 标签：ios, localization

这是那些愚蠢的简单问题之一，太简单了，我无法弄清楚是什么导致了问题。

我通过单击图像、本地化按钮并单击法语和中文语言本地化了大约 80 个图像，并创建了文件夹。[仅供参考，我们的应用程序已经实现并运行字符串本地化]。然后我将翻译后的图像复制到各自的文件夹中。

现在我可以单击图像的左箭头下拉菜单，然后单击法文和中文图像，我会看到图像的法文和中文版本。然后我重新启动模拟器，然后将语言更改为法语并运行我的应用程序，字符串都是法语，但我本地化的图像仍然是英语[与我尝试中文时相同]。

附加信息：

*   我的图像位于各自的 en.lproj 等文件夹中，基本文件夹中没有图像。
*   当我检查“复制捆绑资源”时，图像显示在基本文件夹中；它们是每个资源仅引用 1 个图像；IE。它没有明确显示所有不同的语言图像。
*   我已经尝试过 ios 5.1 和 6，以及视网膜而不是视网膜。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:34:25.093

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:28:13.433

对于本地化，最好在设备上进行测试。

尝试从设备中删除您的应用。做一个清洁。然后再次运行。这迫使 Xcode 重新复制所有内容，包括您的新文件。每当您修改设置包或资源时，最好删除并重新构建。

# pdf - imagick - 为 PDF 文件的每一页获取缩略图

> ID：14161804
> 
> 赞同：0
> 
> 时间：2013-01-04T17:23:39.813
> 
> 标签：pdf, imagemagick, thumbnails, imagick, multipage

我试图从我通过 move_uploaded_file() 上传的 pdf 文件中获取一些信息。

我需要每页的缩略图来做一些颜色分析。此外，我需要以实际距离单位（不是像素）为单位的每页的宽度和高度。

有没有办法在imagick而不是imagemagick中将pdf转换为图像。只是因为我正在使用 imagick 实例进行颜色分析。

现在这适用于单个图像文件，但不适用于多页 pdf。该怎么办知道...？

```
/* Read the image */
$im = new Imagick($file);

/* Thumbnail the image */
$im->thumbnailImage(null, 200);

/* Overwrite it */
file_put_contents($file, $im);

/* Gather Info */
$width = $im->getImageWidth();
$height = $im->getImageHeight();
$ratio = $width / $height;

/* Calculate gray */

$pixel_count = 0;
$sum_gray = 0;

for ($row=0;$row<$height;$row++) {
    for ($col=0;$col<$width;$col++) {
        $pixel = $im->getImagePixelColor($col, $row);
        $rgb = $pixel->getColor();
        $this_gray = .299*$rgb['r'] + .587*$rgb['g'] + .114*$rgb['b'];
        $sum_gray += $this_gray;
        $pixel_count++;
    }
} 

$gray = (1-($sum_gray / $pixel_count) / 256)*100; 
```

如果有人知道如何获取高度和宽度信息，请告诉我。

谢谢您的帮助！

# linux - iozone 什么是记录大小/记录长度？

> ID：14161809
> 
> 赞同：0
> 
> 时间：2013-01-04T17:24:07.067
> 
> 标签：linux, windows, performance, disk, iozone

我们已经构建了 Windows 文件服务器，我想运行 iozone 来测试磁盘 I/O 性能，那么我应该运行什么样的测试以及我如何知道在 X 大小的文件下会得到多少 i/oi？还有什么是`record size`或者`record lengh`我在谷歌搜索时多次遇到这个词..

我现在正在运行以下测试，但我不知道如何阅读统计数据以及结果意味着什么。

```
iozone -R -r 1M -s 100m

                                                    random  random    bkwd   record   stride
      KB  reclen   write rewrite    read    reread    read   write    read  rewrite     read   fwrite frewrite   fre
  102400    1024 1438781 1833689  1647187  1731045 1770870 1881794 1933970  4323897  1973719  1954304  1743602 10781 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-05T23:14:48.840

好吧，IOzone 通过将给定大小的文件分解为记录来对文件系统进行基准测试。根据给定的测试，这些记录以不同的方式写入（或读取），直到达到文件大小。

例如，您的命令 (iozone -R -r 1M -s 100m) 要求 IOzone 对 100MB 的文件执行所有测试（例如读取、重新读取、写入、重新写入等）。读/写操作被分成 1MB 的记录。这意味着对 1MB 的记录执行 100 次操作以实现测试。

看看结果。第一个数字是文件的大小。第二个是记录长度。然后，数字对应于为不同测试记录的吞吐量。有些测试会进行多次（例如读取、写入等）。第一次是按顺序完成的，第二次是通过随机位置访问完成的。

以下[文档](http://www.iozone.org/docs/IOzone_msword_98.pdf)详细解释了 IOzone。查看测试的描述以了解它们的含义。

# c# - 禁用/启用 ReorderList 控件

> ID：14161814
> 
> 赞同：2
> 
> 时间：2013-01-04T17:24:16.513
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, asp.net-3.5

希望这是一个简单的问题来回答

我在 UpdatePanel 内的页面上有一个 ReorderList 控件，我要做的就是禁用它，直到用户单击编辑按钮，并在用户单击保存/取消按钮后再次禁用它。

我试过切换 Enabled 属性，但这不起作用。更改 AllowReorder 会禁用控件，但不能通过将 AllowReorder 更改回 true 来重新启用它。

一定有办法做到这一点——要么我要疯了，要么我正遭受圣诞节后的忧郁！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:16:40.287

> 更改 AllowReorder 会禁用控件，但不能通过将 AllowReorder 更改回 true 来重新启用它。

其实应该的。如果您使用 UpdatePanel 控件或将按钮注册为异步回发控件，请仔细检查 ReorderList 控件是否在部分回发时更新。

此外，您可以使用下面的 javascript 禁用重新排序：

```
var dragDropWatcher = $find("<%= ReorderList1.UniqueID %>_dItemEx");
var originalCanDrop = dragDropWatcher.canDrop;

//to disable reorder
dragDropWatcher.canDrop = function(){ return false; };

//to enable reorder
dragDropWatcher.canDrop = originalCanDrop; 
```

# java-me - J2ME 记录存储删除然后插入异常

> ID：14161818
> 
> 赞同：-2
> 
> 时间：2013-01-04T17:24:32.000
> 
> 标签：java-me, recordstore

我正在处理 J2ME 记录存储，当我成功删除内容，然后我检查它时，它给了我正确的计数，它是零。但是当我再次插入时，它给了我查找记录异常的错误，因为它是在我之前插入的内容之后插入的。它从 2 而不是 1 插入。

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T19:36:40.173

记录存储中的记录 ID 是唯一的且自动递增的，就像 SQL 数据库中的主键一样。当 1 被使用时，不能再次使用。（除非您删除记录存储并重新创建它）。

# batch-file - 在批处理文件中存储值的问题

> ID：14161820
> 
> 赞同：2
> 
> 时间：2013-01-04T17:24:55.750
> 
> 标签：batch-file

我正在创建一个将在服务器上运行的 GPO。在批处理中，我设置了`SourcePath=%~0\..`一个可以很好地工作的变量，以允许我从与批处理本身运行的位置相同的位置访问文件。

```
%sourcepath%\Sigcheck\sigcheck.exe /accepteula -q -n "c:\path\file.exe" >fileversion
set /p filever= < fileversion 
```

此代码可以很好地检查`file.exe`将其放入`fileversion`. `fileversion`然后读入变量`filever`.

所以这段代码做了我想做的一切，但有一个问题。`fileversion`在 GPO 文件夹 ( `%sourcepath%`)中创建了一个名为的文件。这没关系，除非多个服务器同时执行批处理，它们都将尝试同时创建此文件并可能覆盖文件或导致错误。一旦值被读入变量`filever`，就不再需要它，但删除它是不够的，因为两个系统应该能够同时执行脚本。

是否有另一种方法可以将值捕获到不会出现此问题的变量中？我考虑过在前面放置一条本地路径，`fileversion`以便将其存储在本地，但我不喜欢这个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:56:59.980

然后不要使用文件，`FOR /F`而是使用循环直接读取命令的输出。这是一个例子：

```
FOR /F "delims=" %%L IN (
  '%sourcepath%\Sigcheck\sigcheck.exe /accepteula -q -n "c:\path\file.exe"'
) DO (
  SET "filever=%%L"
) 
```

单引号表示要运行和读取输出的命令。运行命令后，它的输出被循环逐行迭代。

如果输出只包含一行，那么上面的内容就足够了：变量被赋值并且循环终止。如果可能有更多行（并且您只想记住第一行并防止其他行覆盖第一个值），您至少有两个选择：

1.  仅当变量尚未设置（定义）时才存储值：

```
**SET filever=**
FOR /F "delims=" %%L IN (
  '%sourcepath%\Sigcheck\sigcheck.exe /accepteula -q -n "c:\path\file.exe"'
) DO (
  **IF NOT DEFINED filever** SET "filever=%%L"
) 
```

请注意，需要先取消设置变量（第一行）。

2.  存储值并跳出循环：

```
FOR /F "delims=" %%L IN (
  '%sourcepath%\Sigcheck\sigcheck.exe /accepteula -q -n "c:\path\file.exe"'
) DO (
  SET "filever=%%L"
  **GOTO out**
)

**:out** 
```

这会记住第一行并强制退出循环，以防止迭代其他行。

`FOR /F`您可以在内置帮助（`FOR /?`或`HELP FOR`）中阅读有关循环的更多信息。

# uiview - 如何加快绘制 UIView 的网格？

> ID：14161823
> 
> 赞同：0
> 
> 时间：2013-01-04T17:24:56.727
> 
> 标签：uiview, drawrect

目前我实例化 UIViews 的二维矩阵。每个 UIView 的 drawRect 都被覆盖以绘制 2-3 个形状中的 1 个。

随着网格的扩大，我注意到在每个子视图的 drawRect 中花费了过多的时间。由于我只有 2-3 个形状，我想通过每次仅绘制 2-3 个唯一 UIView 来加快矩阵的渲染，然后以某种方式在矩阵中实例化适当的预绘制 UIView 的副本。

我考虑将 UIView 捕获为 UIImage，制作 UIImage 的副本并实例化此副本。不过，我想知道，如果这个过程的开销使它不比 drawRect 快得多。

有人可以通过在二维矩阵中重用 UIView 来指出速度优化的最佳实践吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:26:20.763

此问题的快速修复方法是启用不需要进一步更新的给定 UIView 的 shouldRasterize 属性。

# asp.net - 当用户单击 ASP.Net DetailsView 的“新建”按钮时触发的事件

> ID：14161824
> 
> 赞同：1
> 
> 时间：2013-01-04T17:24:58.457
> 
> 标签：asp.net, vb.net, event-handling, code-behind, html-select

在 ASP.Net VB.Net 代码隐藏文件中，您能告诉我在 DetailsView 显示空白项（例如 DropDownLists）时，当用户单击 DetailsView 的“新建”按钮时我可以使用哪些事件触发，文本框等？

我需要使用此事件处理程序在从变量获得的 DropDownList 中预选一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:46:02.230

尝试 ItemCommand 事件。这是如何使用它。我只知道 C# ，但我想你已经掌握了窍门。

后面的代码：

```
protected void DetailsView_ItemCommand(object sender, DetailsViewCommandEventArgs e)
{
    if (e.CommandName == "New")
    {
        // Your code here
    }
} 
```

标记：

```
<asp:DetailsView ID="DetailsView" runat="server" OnItemCommand="DetailsView_ItemCommand" ... 
```

# java - 删除不起作用

> ID：14161826
> 
> 赞同：0
> 
> 时间：2013-01-04T17:25:01.503
> 
> 标签：java, mysql, sql

与 Java 和 MySQL 相关：按下按钮并检查数据库后，ID 为 25 的行仍然存在。为什么？

在 QueryManager.java 中，一切都已设置好并使用数据库。这是在 QueryManager.java 中：

```
public void removeGebruiker() {
        String query;
        query = "delete from gebruiker where gebruiker_ID = 25";
    } 
```

在 userPanel.java 中，我已经可以将用户添加到数据库，但删除不起作用。这是在 userPanel.java 中：

```
private void removeUserActionPerformed(java.awt.event.ActionEvent evt) {
        WinkelApplication.getInstance().getQueryManager().removeGebruiker();
        JOptionPane.showMessageDialog(null, "Gebruiker is verwijderd", "Gebruiker", JOptionPane.INFORMATION_MESSAGE);
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T17:27:19.363

您只需构造 a`String`并且从不执​​行它包含的查询。

在这里：

```
String query;
query = "delete from gebruiker where gebruiker_ID = '25'"; 
```

确保您实际执行查询。

如果代码真的使用了这个[QueryManager](http://outfit4you2.googlecode.com/svn-history/r3/outfit4you2/src/connectivity/QueryManager.java)，你需要打电话给`dbmanager.executeQuery(query);`我认为（虽然我是这个代码的新手）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T17:28:40.117

25 左右不带引号

```
 delete from gebruiker where gebruiker_ID = 25 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T17:31:00.853

你需要执行查询
试试这个链接[http://www.roseindia.net/jsp/execute-sql-query.shtml](http://www.roseindia.net/jsp/execute-sql-query.shtml)

# python - Python - 对列表列表中的元素进行排序

> ID：14161827
> 
> 赞同：5
> 
> 时间：2013-01-04T17:25:01.283
> 
> 标签：python, list, sorting

如果已在其他地方回答此问题，我们深表歉意；我试过搜索，但没有找到任何可以回答我的问题的东西（或者也许我有，但不明白）......

我对 Python（v2.6.2）相当陌生，并且有一个包含浮点值的列表列表，看起来如下所示（除了每个列表的完整内容有 2+ 百万个条目）：

```
cat = [[152.123, 150.456, 151.789, ...], [4.123, 3.456, 1.789, ...], [20.123, 22.456, 21.789, ...]] 
```

现在我想做的是按第三个列表的元素的升序对所有 3 个列表进行排序，这样我得到：

```
cat_sorted = [[152.123, 151.789, 150.456, ...], [4.123, 1.789, 3.456, ...], [20.123, 21.789, 22.456, ...]] 
```

我已经尝试了一些东西，但它们没有给我我正在寻找的东西（或者我可能没有正确使用它们）。有没有办法做我正在寻找的东西，如果是这样，什么是最简单和最快的（考虑到我有 3 x 200 万个条目）？有没有办法使用另一个列表对一个列表进行排序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T17:28:20.863

这会很痛苦，但是使用默认的 python 你有 2 个选项：

*   用 装饰第一个和第二个列表`enumerate()`，然后使用索引对它们进行排序以引用第三个列表中的值：

    ```
    cat_sorted = [
        [e for i, e in sorted(enumerate(cat[0]), key=lambda p: cat[2][p[0]])],
        [e for i, e in sorted(enumerate(cat[1]), key=lambda p: cat[2][p[0]])],
        sorted(cat[2])
    ] 
    ```

    尽管它可能有助于`cat[2]`就地排序而不是使用`sorted()`; 你无法绕过`sorted()`其他两个。

*   `zip()`将三个列表放在一起，然后对这个新列表的第三个元素进行排序，然后`zip()`再次返回原始结构：

    ```
    from operator import itemgetter
    cat_sorted = zip(*sorted(zip(*cat), key=itemgetter(2))) 
    ```

两者都不会是性能破坏者，而不是具有数百万个数字的普通 python 列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T17:29:40.173

如果你愿意使用额外的库，我建议使用[Python Pandas](http://pandas.pydata.org/)。它有一个类似于 R 的 DataFrame 对象，`data.frame`并在构造函数中接受一个列表列表，这将创建一个 3 列数据数组。然后您可以轻松地使用内置`pandas.DataFrame.sort`函数按第三列（升序或降序）排序。

有许多简单的 Python 方法可以做到这一点，但考虑到问题的规模，使用 Pandas 中的优化函数是一种更好的方法。如果您需要从排序数据中获得任何类型的汇总统计信息，那么 Pandas 是不二之选。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T17:30:01.060

我会采取的一般方法是对整个事物进行[schwartzian 变换。](http://en.wikipedia.org/wiki/Schwartzian_transform)

将三个列表压缩成一个元组列表。

使用第三个元素作为键对元组进行排序。

遍历新排序的元组列表并再次填写三个列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T17:49:28.120

为了完成，使用numpy的解决方案：

```
import numpy as np

cat = [[152.123, 150.456, 151.789],
        [4.123, 3.456, 1.789],
        [20.123, 22.456, 21.789]]

cat = np.array(cat) 
cat_sorted = cat[:, cat[2].argsort()]

print cat_sorted
[[ 152.123  151.789  150.456]
 [   4.123    1.789    3.456]
 [  20.123   21.789   22.456]] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T20:50:25.050

这里，`keys`是一个排序的索引列表。

```
keys = sorted(range(len(cat[2])), key=cat[2].__getitem__)
cat_sorted = [[cat[i][k] for k in keys] for i in range(3)] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-04T17:52:42.603

这是基于 Martijn Pieters 和 pcalcao 的出色回答的另一种方法

```
def sort_by_last(ll):
    """
        >>> sort_by_last([[10, 20, 30], [3, 2, 1]])
        [[30, 20, 10], [1, 2, 3]]

        >>> sort_by_last([[10, 20, 30], [40, 50, 60], [3, 2, 1]])
        [[30, 20, 10], [60, 50, 40], [1, 2, 3]]

        >>> sort_by_last([[10, 20, 30], [40, 50, 60], [1, 1, 1]])
        [[10, 20, 30], [40, 50, 60], [1, 1, 1]]

        >>> sort_by_last([[10, 20, 30], [40, 50, 60], [1, 3, 1]])
        [[10, 30, 20], [40, 60, 50], [1, 1, 3]]

        >>> sort_by_last([[152.123, 150.456, 151.789], [4.123, 3.456, 1.789], [20.123, 22.456, 21.789]])
        [[152.123, 151.789, 150.456], [4.123, 1.789, 3.456], [20.123, 21.789, 22.456]]
    """
    return [sorted(x, key=lambda y: ll[-1][x.index(y)]) for x in ll] 
```

大字符串有一个带有doctest的文档字符串，用于测试函数将其复制到一个文件并运行它 `python -m doctest -v <file>`

# treeview - Telerik mvc 树视图刷新查询

> ID：14161830
> 
> 赞同：0
> 
> 时间：2013-01-04T17:25:14.393
> 
> 标签：treeview, telerik-mvc

我有一个 Telerikmvc 树视图刷新问题。更新部分视图后，我需要刷新树视图。

我刷新网格的javascript函数是-

```
 var item = $("#TreeView").find(".t-input[name='itemValue'][value='" + Id + "']").closest("li");
                $("#TreeView").data("tTreeView").ajaxRequest(item); 
```

我收到“未找到元素”javascript 错误。

菜单视图 -

```
@(Html.Telerik().TreeView()
    .Name("TreeView")
    .ShowLines(false)
        .ClientEvents(events => events
                    .OnSelect("onSelect"))
    .BindTo(Model, mappings =>
    {
        mappings.For<Model>(binding => binding
                .ItemDataBound((item, products) =>
                {
                    item.Text = products.Name;
                    item.Value = products.Id.ToString();
                    item.ImageUrl = "~/Content/Images/project_icon.jpg";
                    item.LoadOnDemand = true;
                })
          )
        }
) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T16:26:31.487

我让它工作了。

我创建了一个 PartialView “菜单”。返回部分视图的控制器代码是

```
 public ActionResult Index()
   {
        return PartialView("Menu", GetAllProducts());
   } 
```

用于更新产品和刷新树视图的 Jquery 代码 -

```
$.ajax({
    url: url, 
    type: 'POST',
    data: postData,
    success: function (data) {

         **Refresh the tree view**
         $.get('/Menu/Index').done(function (data) {
            $("#leftnav").html($(data));
        });

    },
    error: function () {
        alert("Error updating for  Id : " + id);
    }
}); 
```

}

# clojure - Lein uberjar 在简单的“-main”用法上失败了，但也许我不明白它在做什么？

> ID：14161836
> 
> 赞同：5
> 
> 时间：2013-01-04T17:25:25.763
> 
> 标签：clojure, leiningen

我使用以下方法创建了一个简单的示例：

```
%> lein new lein-check 
```

我只修改了代码，使其现在有一个“主要”：

```
(defproject lein-check "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
            :url "http://www.eclipse.org/legal/epl-v10.html"}
  :main "lein-check.core"
  :dependencies [[org.clojure/clojure "1.4.0"]])

(ns lein-check.core
    (:gen-class))

(defn -main
  "I don't do a whole lot."
  [& args]
  (println "Hello, World!")) 
```

`lein uberjar`但是即使在`clean`我得到这个之后，我第一次跑步也是如此：

```
Compiling lein-check.core
Exception in thread "main" java.lang.ClassCastException:
     java.lang.String cannot be cast to clojure.lang.Symbol
        at clojure.core$find_ns.invoke(core.clj:3659)
        at clojure.core$load_one.invoke(core.clj:5228)
        at clojure.core$compile$fn__4895.invoke(core.clj:5426)
        at clojure.core$compile.invoke(core.clj:5425)
        at user$eval7.invoke(NO_SOURCE_FILE:1)
        at clojure.lang.Compiler.eval(Compiler.java:6511)
        at clojure.lang.Compiler.eval(Compiler.java:6501)
        at clojure.lang.Compiler.eval(Compiler.java:6477)
        at clojure.core$eval.invoke(core.clj:2797)
        at clojure.main$eval_opt.invoke(main.clj:297)
        at clojure.main$initialize.invoke(main.clj:316)
        at clojure.main$null_opt.invoke(main.clj:349)
        at clojure.main$main.doInvoke(main.clj:427)
        at clojure.lang.RestFn.invoke(RestFn.java:421)
        at clojure.lang.Var.invoke(Var.java:419)
        at clojure.lang.AFn.applyToHelper(AFn.java:163)
        at clojure.lang.Var.applyTo(Var.java:532)
        at clojure.main.main(main.java:37)
Compilation failed: Subprocess failed 
```

`uberjar`尽管成功创建了 jar ，但运行后续操作：

```
Created ....\lein-check-0.1.0-SNAPSHOT.jar
Including lein-check-0.1.0-SNAPSHOT.jar
Including clojure-1.4.0.jar
Created ....\lein-check-0.1.0-SNAPSHOT-standalone.jar 
```

uberjar 有时会在完成后运行 main 吗？它应该这样做吗？我不太确定这是用户错误、`lein`错误还是 clojure 错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T18:47:17.240

问题出在一线

```
 :main "lein-check.core" 
```

它应该是

```
 :main lein-check.core 
```

您使用的是字符串而不是符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T18:48:01.787

事实证明，[Lein 示例项目](https://github.com/technomancy/leiningen/blob/master/sample.project.clj#L113)将 显示`:main`为符号而不是字符串。更新后，运行`lein uberjar`将按预期工作。

特别是这一行：

`:main "lein-check.core"`

变成：

`:main 'lein-check.core`

# c# - 隐藏字段不与文件一起发布

> ID：14161839
> 
> 赞同：1
> 
> 时间：2013-01-04T17:25:36.833
> 
> 标签：c#, asp.net-mvc-3

我有以下 MVC 表单和控制器来上传具有给定 ID 的商品的图像。当此表单出于某种原因提交给控制器时，id 为空。我签入了呈现的 HTML，并在网页上呈现了正确的 ID。

表格：

```
@using(Html.BeginForm(new{id = ViewBag.id})){

<input type="hidden" name="id" id="id" value="@ViewBag.Id"/>

<label for="file">Filename:</label>
<input type="file" name="file" id="file" />
<input type="submit" />
} 
```

和控制器：

```
[HttpPost]
public ActionResult AddImage(int merchandiseId, HttpPostedFileBase image)
<snip> 
```

为什么提交此表单会导致商品 ID 为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:28:25.090

因为你使用了错误的名字。改变

```
<input type="hidden" name="id" id="id" value="@ViewBag.Id"/> 
```

至

```
<input type="hidden" name="merchandiseId" id="id" value="@ViewBag.Id"/> 
```

**或者**

```
public ActionResult AddImage(int merchandiseId, HttpPostedFileBase image) 
```

至

```
public ActionResult AddImage(int id, HttpPostedFileBase image) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:28:44.267

`merchandiseId`将是 0（而不是 null），因为您的表单上没有输入，称为`merchandiseId`.

```
<input type="hidden" name="merchandiseId" id="merchandiseId" value="@ViewBag.Id"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:29:48.283

更改`Html.BeginForm`如下：

```
@using(Html.BeginForm(new{merchandiseId = ViewBag.id})) 
```

这将解决您的问题。

# iterator - 生成器、枚举器、迭代器定义

> ID：14161843
> 
> 赞同：0
> 
> 时间：2013-01-04T17:26:13.323
> 
> 标签：iterator, generator, enumerator

有人可以提供生成器、枚举器、迭代器术语的定义。似乎不同的语言使用这些任意的，我想知道确切的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:34:16.867

枚举器是一种标记值的方式。如果您有一个整数容器，则可以为可能的值定义一个枚举。记住命名值比记住数字更容易，例如想象一下，如果你认识的每个人都没有名字，而是被赋予了一个唯一的数字。会更难记住。

迭代器是允许您遍历容器的对象。你一步一步地迭代它。一些容器很容易单步执行（如连续数组），但其他容器则不然（如链表，其中每个元素可以随机分散在整个内存中，或二叉树，其中可能有不同的可能顺序来单步执行数据）。迭代器允许您遍历容器而不用担心这些细节。

至于生成器，我对它们不熟悉，所以我会从维基百科给你留下这句话：

> 在计算机科学中，生成器是一种特殊的例程，可用于控制循环的迭代行为。生成器与返回数组的函数非常相似，因为生成器具有参数，可以调用，并生成一系列值。但是，生成器不是构建一个包含所有值的数组并一次返回它们，而是一次生成一个值，这需要更少的内存并允许调用者立即开始处理前几个值。简而言之，生成器看起来像一个函数，但行为却像一个迭代器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:31:49.373

维基百科提供了非常好的通用定义：

*   [迭代器](http://en.wikipedia.org/wiki/Iterator)
*   [发电机](http://en.wikipedia.org/wiki/Generator_%28computer_programming%29)
*   [枚举器](http://en.wikipedia.org/wiki/Enumerated_type)

简而言之，迭代器是一个可以使用循环重复读取的类；生成器是一个函数，它通过一个接一个地返回其值来充当迭代器；枚举器是一种数据类型，包含一个可能值的列表，可以在变量定义中使用这些值来强制它只包含这些值中的一个。

据我所知，这些术语的使用在语言之间非常一致，尽管语法不同（显然）。你看到了什么让你感到困惑？

# c# - 如何生成列表 在 SpecFlow 场景的步骤定义中？

> ID：14161851
> 
> 赞同：0
> 
> 时间：2013-01-04T17:26:46.633
> 
> 标签：c#, visual-studio-2012, specflow

在 SpecFlow[步骤定义](http://cukes.info/step-definitions.html#)的文档中，它显示了一个示例，您可以在该示例中通过在场景中使用逗号分隔列表在步骤定义中创建一个列表：

例如：

> 鉴于我在“周二、周五、周日”有空

会导致：

```
@Given("I am available on \"(.+)\"")
public void I_have_cukes_in_my_belly(List<String> days) {
    // Do something with the days
} 
```

不幸的是，当我这样做时，我得到了这个：

```
@Given("I am available on ""(.*)"")
public void I_have_cukes_in_my_belly(string days) {
    // Do something with the days
} 
```

我正在使用 VS 2012 和 SpecFlow 1.9.1 版。有谁知道我可能做错了什么？或者我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-26T07:18:40.787

您可以执行以下操作：

> 鉴于我在这些日子有空：
> 
> | 周天 |
> 
> | 星期一 |
> 
> | 星期二 |
> 
> | 星期三 |

然后你可以使用表格并将其转换为列表......

```
@Given("I am available on these days:")
public void I_have_cukes_in_my_belly(Table table) {
    List<string> days = new List<string>();
    foreach (var tableRow in table.Rows)
    {
        days.Add(tableRow["DaysOfWeek"]);
    }
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T22:55:18.027

目前似乎支持列表的唯一语言是 Java。我假设您在使用 VS2012 时使用 C#。如果您将链接页面上的代码示例切换到 C# 而不是 Java，List 示例就会消失，我会看到与您相同的行为。

但是，您可以简单地将字符串作为参数并将其放入列表中。1行。

C＃

```
[Given(@"I am available on ""(.*)""")]
public void GivenIAmAvailableOn(string days)
{
        List<String> daysList = new List<string>(days.Split(',')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-15T11:26:32.947

您可以尝试查询 Table 实例以获取您要查找的列表。

```
expectedTable.Rows.Select(row => row.Values.FirstOrDefault()).ToList() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T19:58:21.887

[如果您在Step Definitions](http://cukes.info/step-definitions.html#)页面上单击 C#，您将看到 List examples 消失。但是，正如 OCary 指出的那样，您可以通过拆分字符串来模拟它。

但我建议无需转换回列表，您可以通过 Linq 使用 IEnumerable 代替，这样您就可以更简单地解析列表，即

```
[Given(@"I am available on ""(.*)""")]
public void GivenIAmAvailableOn(string days)
{
    var daysList = from x in days.Split(',') select x.Trim(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-24T11:13:36.787

目前我正在使用步骤参数转换来获得正确的列表：

```
[StepArgumentTransformation(@"((?:.*)(?:,.*)*)")]
public List<string> StringToList(string list)
{
    // (
    //    (?:    - Don't capture
             .*  - Match any character
    //    )
    //    (?:    - Don't capture
    //       ,   - Separated by a comma
    //       .*  - Match any character
    //    )*     - Zero or more items after the first item
    // )

    return list
        .Split(',')
        .Select(x => x.Trim())
        .ToList();
} 
```

然后你就可以使用`List<string>`作为参数类型，像这样：

```
[Given(@"I am available on ""(.*)""")]
public void GivenIAmAvailableOn(List<string> days)
{
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-25T10:07:17.187

用于`Table`转换`IEnumerable<T>`器：

```
[StepArgumentTransformation]
public static IEnumerable<string> ToStringEnumerable(Table table) =>
    table.Rows.Select(t => t.Values.Single()); 
```

然后你可以在你的例子中使用它（或者`List<T>`如果你喜欢的话）：

```
@Given("I am available on \"(.+)\"")
public void I_have_cukes_in_my_belly(IEnumerable<String> days) {
    // Do something with the days
} 
```

# wordpress - 自定义 WooCommerce 数量选择器

> ID：14161852
> 
> 赞同：2
> 
> 时间：2013-01-04T17:26:48.137
> 
> 标签：wordpress, select, menu, e-commerce, woocommerce

我正在尝试将默认的 +/- 数量选择器更改为具有给定数量选项（即 1-10）的下拉菜单。

有谁知道如何做到这一点？

如果您希望我发布与此相关的任何代码，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-27T20:27:48.807

有一个插件可以为您执行此操作，称为 WooCommerce Advanced Product Quantities，它是免费的，允许您为所有产品数量输入设置最小值、最大值和步长值。为每个产品、每个类别/标签或站点范围设置规则。

[http://wordpress.org/plugins/woocommerce-incremental-product-quantities/](http://wordpress.org/plugins/woocommerce-incremental-product-quantities/)

它还适用于 WooCommerce 缩略图输入数量，它将这些数量框放入您的所有产品缩略图框中。

[http://wordpress.org/plugins/woocommerce-thumbnail-input-quantities/](http://wordpress.org/plugins/woocommerce-thumbnail-input-quantities/)

享受！完全公开，我是插件作者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-18T20:57:07.710

我没有尝试过，但我发现了这段代码[http://bastutor.blogspot.ca/2014/01/woocommerce-change-input-quantity-to-dropdown.html](http://bastutor.blogspot.ca/2014/01/woocommerce-change-input-quantity-to-dropdown.html)

```
/* Change Product Quantity Input to Dropdown */
function woocommerce_quantity_input() {
 global $product;

 $defaults = array(
  'input_name' => 'quantity',
  'input_value' => '1',
  'max_value'  => apply_filters( 'woocommerce_quantity_input_max', '', $product ),
  'min_value'  => apply_filters( 'woocommerce_quantity_input_min', '', $product ),
  'step'   => apply_filters( 'woocommerce_quantity_input_step', '1', $product ),
  'style'   => apply_filters( 'woocommerce_quantity_style', 'float:left; margin-right:10px;', $product )
 );

 if (!empty($defaults['min_value']))
  $min = $defaults['min_value'];
  else $min = 1;

 if (!empty($defaults['max_value']))
  $max = $defaults['max_value'];
  else $max = 20;

 if (!empty($defaults['step']))
  $step = $defaults['step'];
  else $step = 1;

 $options = '';
 for($count = $min;$count <= $max;$count = $count+$step){
  $options .= '<option value="' . $count . '">' . $count . '</option>';
 }

 echo '<div class="quantity_select" style="' . $defaults['style'] . '"><select name="' . esc_attr( $defaults['input_name'] ) . '" title="' . _x( 'Qty', 'Product quantity input tooltip', 'woocommerce' ) . '" class="qty">' . $options . '</select></div>';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T20:43:39.567

我也想做这个。到目前为止，我发现数量标记是在`woocommerce/templates/single-product/add-to-cart/quantity.php`. 您可以在主题文件夹中目录结构的最小镜像中[制作此文件的副本](http://wcdocs.woothemes.com/codex/template-structure/)`woocommerce/templates`，例如在本例中将其复制到`yourtheme/woocommerce/single-product/add-to-cart`. 在那里，您可以在不更改插件的情况下对其进行编辑，并且在更新插件时可能会被覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-31T14:22:06.387

您需要覆盖模板“quantity-input.php”，以便在 your-theme/woocommerce/global/ 文件夹中添加一个名为“quantity-input.php”的文件，然后您可以在该文件中进行更改，现在 wordpress 将使用您的文件来显示数量输入 html。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-06-15T06:37:57.100

```
Hi paste this in your function.php file

function woocommerce_quantity_input($data = null) {
    global $product;
    if (!$data) {
    $defaults = array(
    'input_name'   => 'quantity',
    'input_value'   => '1',
    'max_value'     => apply_filters( 'woocommerce_quantity_input_max', '', $product ),
    'min_value'     => apply_filters( 'woocommerce_quantity_input_min', '', $product ),
    'step'         => apply_filters( 'woocommerce_quantity_input_step', '1', $product ),
    'style'         => apply_filters( 'woocommerce_quantity_style', 'float:left;', $product )
    );
    } else {
    $defaults = array(
    'input_name'   => $data['input_name'],
    'input_value'   => $data['input_value'],
    'step'         => apply_filters( 'cw_woocommerce_quantity_input_step', '1', $product ),
    'max_value'     => apply_filters( 'cw_woocommerce_quantity_input_max', '', $product ),
    'min_value'     => apply_filters( 'cw_woocommerce_quantity_input_min', '', $product ),
    'style'         => apply_filters( 'cw_woocommerce_quantity_style', 'float:left;', $product )
    );
    }
    if ( ! empty( $defaults['min_value'] ) )
    $min = $defaults['min_value'];
    else $min = 1;
    if ( ! empty( $defaults['max_value'] ) )
    $max = $defaults['max_value'];
    else $max = 15;
    if ( ! empty( $defaults['step'] ) )
    $step = $defaults['step'];
    else $step = 1;
    $options = '';
    for ( $count = $min; $count <= $max; $count = $count+$step ) {
    $selected = $count === $defaults['input_value'] ? ' selected' : '';
    $options .= '<option value="' . $count . '"'.$selected.'>' . $count . '</option>';
    }
    echo '<div class="cw_quantity_select" style="' . $defaults['style'] . '"><select name="' . esc_attr( $defaults['input_name'] ) . '" title="' . _x( 'Qty', 'Product Description', 'woocommerce' ) . '" class="cw_qty">' . $options . '</select></div>';
    } 
```

# python - 是否可以有一个没有属性的实体类型？

> ID：14161855
> 
> 赞同：2
> 
> 时间：2013-01-04T17:26:55.077
> 
> 标签：python, google-app-engine, google-cloud-datastore

我想在 Datastore 中保留一个“事物”列表。对于这些“事物”，除了它们的名称之外不需要其他信息，并且这些名称必须是唯一的，即它们可以被认为是`key_name`一个实体。在这种情况下，我不需要实体类型的任何显式属性/字段（因为“事物”的名称可以保留在`key_name`实体内部）。这可能吗？如何？另一种方法是通过为名称指定一个专用字段/属性来复制这条信息。

```
class EntityKindWithNoProperty(db.Model):
    name = db.StringProperty() 
```

我觉得这种方法是重复信息。你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:44:59.047

这有效

```
class Empty(ndb.Model):
    pass

e = Empty(id="somestring")
e.put() 
```

[为了唯一性，您可以提前生成 ID，然后使用数字键](https://developers.google.com/appengine/docs/python/ndb/entities#numeric_keys)一一使用它们。或者，根据您的使用模型，get_or_insert。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:44:40.280

您是否考虑过拥有一个具有列表属性的实体？

```
class ThingSingleton(db.Model):
    things = db.StringListProperty() 
```

使用的最佳方法取决于您的查询模式和事物的预期基数。

# asp.net - 如何在不添加对包含完整 EntityFramework 模型的项目的引用的情况下向 Web 项目公开实体？

> ID：14161856
> 
> 赞同：1
> 
> 时间：2013-01-04T17:26:54.123
> 
> 标签：asp.net, entity-framework, web-applications

我在使用 EntityFramework 5 (VS 2012) 时遇到了这个问题。我的解决方案中有以下项目：

**我首先使用数据库和设计器**

1.  数据。我的实体模型和实体在哪里。
2.  安全。安全的业务逻辑在哪里。
3.  网络。网页界面

*Security*具有对*Data*的引用，因此它可以使用模型和实体从数据库中检索数据。在*安全*性中，我有一个方法将*MenuOptions*列表（这是项目数据中的一个实体）返回到 UI（Web 项目）。然后，在 Web 项目中，我想迭代*MenuOptions*列表以构建菜单。问题是我不想在我的*Web项目中添加对**Data*的引用，只是为了能够访问实体。那么，如何在不添加对整个项目的引用的情况下使*数据中的实体对**Web*可见？（我只希望 UI 可以访问实体）。

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:30:29.937

将 dll（或项目）中的实体分开，将 DbContext 继承的类和实体映射配置放在另一个中。这样您就可以在不同的项目中分发您的实体 dll，而无需共享数据库访问项。***

# web - 奇怪的网络应用

> ID：14161857
> 
> 赞同：0
> 
> 时间：2013-01-04T17:27:11.533
> 
> 标签：web, air

我想创建一个 Web 应用程序（桌面和移动版本），它可以在有和没有 Internet 连接的情况下工作，但在 Internet 连接可用时同步数据。Web 应用程序必须高度安全（传输加密和数据加密）。我认为 Adob​​e Flex 和 Air 作为开发工具。还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:28:41.123

HTML 5 是适合您的技术。也支持本地存储。

# c# - 为什么 sqlCommand.EndExecuteNonQuery() 被阻止？

> ID：14161858
> 
> 赞同：1
> 
> 时间：2013-01-04T17:27:15.420
> 
> 标签：c#, sql-server-2008, deadlock

我有一个使用连接字符串连接到 SQL Server 2008R2 的 C# 应用程序，`Asynchronous Processing=true;`并且`MultipleActiveResultSets=True;`

该应用程序有多个线程，每个线程都打开自己的连接来访问数据库。

大多数情况下，应用程序都在工作，但有时其中一些线程在以下代码中被阻塞：

```
IAsyncResult asyncResult = sqlCommand.BeginExecuteNonQuery();
int rowsAffected = sqlCommand.EndExecuteNonQuery(asyncResult); 
```

`sqlCommand.EndExecuteNonQuery()`永不返回，或超时。

我检查堆栈跟踪：

```
Child SP         IP               Call Site
000000000242d608 00000000778618ca [HelperMethodFrame_1OBJ: 000000000242d608] System.Threading.WaitHandle.WaitOneNative(System.Runtime.InteropServices.SafeHandle, UInt32, Boolean, Boolean)
000000000242d740 000007fef795bf64 System.Threading.WaitHandle.InternalWaitOne(System.Runtime.InteropServices.SafeHandle, Int64, Boolean, Boolean)
000000000242d780 000007fee438bed6 System.Data.SqlClient.SqlCommand.WaitForAsyncResults(System.IAsyncResult)
000000000242d7c0 000007fee438baf1 System.Data.SqlClient.SqlCommand.EndExecuteNonQuery(System.IAsyncResult) 
```

我已将时间设置`sqlCommand.CommandTimeout`为 30 秒，但我无法弄清楚为什么这个问题偶尔会发生。

我检查了 SQL Server 是否阻止了会话，但没有。是否有可能是因为同一个应用程序拥有多个连接，并且它们以某种方式相互阻塞？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:46:53.353

看起来这段代码毫无意义，但您应该检查 asyncResult 对象上的 IsCompleted 标志。如果 IsCompleted 为 false，则调用 EndExecuteNonQuery 将最终阻塞。

# ruby-on-rails - 具有自定义视图的路线

> ID：14161859
> 
> 赞同：2
> 
> 时间：2013-01-04T17:27:18.130
> 
> 标签：ruby-on-rails, ruby, controller, routes

我正在尝试研究如何使用 rails 来获得自定义路线以执行日期查询。如果可能的话，我想打电话给这份报告。所以我在浏览器上访问我的路线并获得以下信息。

```
http://localhost:3000/trips/report

Couldn't find Trip with id=report 
```

就像它试图在报告中作为 ID 读取一样？我不能完全弄清楚我哪里出错了？在我的`routes.rb`文件中，我创建了以下条目。

```
match 'trips/report'    =>  'trips#report' 
```

在我的旅行控制器中使用以下内容。

```
def report
  @trips.all :condition => ["DATE(date) = DATE(?)", Time.now]

  respond_to do |format|
    format.html
    format.json { render json: @trips }
  end
end 
```

我可能正在做一些非常愚蠢的事情！希望有人可以帮助我走上正确的道路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:30:13.037

您当然已经`trips`在您的 中声明了一个资源`routes.rb`，并且该资源生成的路由`GET 'trips/:id'`具有比后面定义的更高的优先级`match 'trips/report'`（Rails 使用第一个匹配规则）。如果是这种情况，请`report`像这样声明您的路线：

```
resources trips do 
  collection do
    get 'report'
  end
end 
```

查看[Rails 路由指南中的这一章](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)了解更多信息。

# sql - 创建一个选择语句，使用 Char Index 或类似的东西将一列转换为多列

> ID：14161863
> 
> 赞同：0
> 
> 时间：2013-01-04T17:27:27.613
> 
> 标签：sql, sql-server

1）问题1：在每6位之后拆分，基本上我需要在每5位之后拆分列，以便123456创建列，12345和6，我尝试使用下面的代码没有结果。没有空格或符号，只有数字。

`substring(COA.UserCode2,5,charindex('',COA.UserCode2)) as Account`, `substring(COA.UserCode2,6,charindex('',COA.UserCode2)) as Project`

2）问题2：在每个 * 之后拆分，我可以让下面的第一个工作（基金）但是如果我有一个像 1234*34*500 这样的字符串，我的成本中心和来源基本上不起作用，我需要列有 1234 的资金（我已经得到了），我的成本中心说 34，我的来源说 500

`substring(COA.UserCode3, 1,charindex('*',COA.UserCode3)) as Fund,`
`substring(COA.UserCode3, 3,charindex('*',COA.UserCode3)+1) as CostCenter,`
`substring(COA.UserCode3, 1,charindex('*',COA.UserCode3)) as Source`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:28:12.503

不知道您使用的是什么 DBMS（如果它具有特定的 SQL 扩展等）或数据在此处看起来如何，至少有一些建议：

1）如果数据的大小是固定的（总是6个字符长），你可以这样做：

```
SUBSTRING(UserCode2,1,5) as Account, SUBSTRING(UserCode2,6,1) as Project 
```

2）对于第二个问题，您可以执行以下任何操作：

如果数据是固定的：

```
SUBSTRING(UserCode3,1,4) as Fund, 
SUBSTRING(UserCode3,6,2) as CostCenter, 
SUBSTRING(UserCode3,9,2) as Source 
```

或者，如果数据是可变的并且您必须在 * 字符上进行拆分：

```
SUBSTRING(UserCode3,1,CHARINDEX('*',UserCode3,1)-1) as Fund,
SUBSTRING(UserCode3,CHARINDEX('*',UserCode3,1)+1,CHARINDEX('*',UserCode3,CHARINDEX('*',UserCode3,1)+1) - CHARINDEX('*',UserCode3,1)-1) as CostCenter,
RIGHT(UserCode3,3) as Source 
```

执行这么多 CHARINDEX 和 SUBSTRING 函数可能对性能不利，但如果不了解更多关于数据的信息，就很难做出明智的建议。

# objective-c - 将 UITableView 单元连接到单独的视图控制器

> ID：14161864
> 
> 赞同：-2
> 
> 时间：2013-01-04T17:27:32.030
> 
> 标签：objective-c, xcode, uitableview, tableview

我有多个单独的视图控制器（我需要），并希望将 TableView 中的每一行连接到一个单独的视图控制器。

至于代码，这是我到目前为止所拥有的。我只制作了tableView：

我的**ViewController.h**

```
[...]
@interface SimpleTableViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
[...] 
```

我的**ViewController.m**

```
[...]
@implementation SimpleTableViewController
{
NSArray *tableData;
}

[...]

- (void)viewDidLoad
{
[super viewDidLoad];
tableData = [NSArray arrayWithObjects:@"One", @"Two", @"Three", nil];
}

[...]

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [tableData count];
}

[...]

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
static NSString *simpleTableIdentifier = @"SimpleTableItem";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
}

cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
return cell;
} 
```

我还将 tableView 连接到 dataSource 和委托。我需要的是让上面的每个条目（一、二、三）连接到单独的视图控制器。我已经制作了所有的视图控制器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:15:19.407

如果我正确理解您的问题，您只需要在 didSelectRowAtIndexPath 方法中使用 if-else 或 switch 语句：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row == 0) {
        ViewController1 *vc1 = "instantiate a controller here"
        [self.navigationController pushViewController:vc1 animated:YES];
    else if (indexPath.row == 1) {
        ViewController2 *vc2 = "instantiate a controller here"
        [self.navigationController pushViewController:vc2 animated:YES];
    etc...... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:20:01.743

表格视图控制器中的每一行都是一个 UITableViewCell，所以我猜这就是您想要控制每一行的“视图控制器”时所指的内容。

您需要将 UITableViewCell 子类化，然后您可以在使用单元格时创建该子类的新实例

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

编辑：当然，您不必继承 UITableViewCell，但如果您想完全控制它，那么您可以这样做。

# php - MYSQL 在年份的日期中断之间进行选择

> ID：14161867
> 
> 赞同：3
> 
> 时间：2013-01-04T17:27:41.597
> 
> 标签：php, mysql, date, select

我创建了一个用户提交的简单表单。一切都很好，但我最近发现

```
SELECT * FROM `Forms` WHERE `Date` BETWEEN '{$startDate}' AND '{$endDate}' 
```

该列`Date`是 type `TEXT`。`MM/DD/YY`我需要它是文本，因为我认为以格式显示所有内容会更容易 。现在我不想冒险更改数据类型，因为表单工作正常。

日期列示例

```
01-03-2013
01-04-2013
07-25-2012
08-01-2012
08-01-2012
08-01-2012
08-01-2012 
```

工作查询前

```
SELECT * FROM `Forms` Where `Date` Between '01-08-2012' and '12-12-2012' 
```

前不工作查询

```
SELECT * FROM `Forms` Where `Date` Between '01-08-2012' and '01-04-2013' 
```

如果年份发生变化，有什么理由会破坏它？即使年份发生变化，我怎样才能让它工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T17:39:39.950

你可以那样做

```
SELECT * FROM `Forms` 
WHERE str_to_date(`Date`, '%d-%m-%Y') BETWEEN '2012-01-30' AND '2013-09-29' 
```

[**在这里演示**](http://sqlfiddle.com/#!2/7a145/1)

**编辑 ：**

如果你想在这里修你的桌子你怎么做

1.  [`DATE`](http://dev.mysql.com/doc/en/datetime.html)添加适当数据类型的新列：

    ```
    ALTER TABLE `Forms` ADD `new_date` DATE AFTER `Date`; 
    ```

2.  使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)函数用旧列中保存的日期填充该新列：

    ```
    UPDATE `Forms` SET `new_date` = STR_TO_DATE(`Date`, '%d-%m-%Y'); 
    ```

3.  删除旧列（如果需要，在其位置重命名新列）：

    ```
    ALTER TABLE `Forms` DROP `Date`, CHANGE `new_date` `Date` DATE; 
    ```

4.  更改您的应用程序以使用此新列。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T17:30:50.030

因为您的列是`TEXT`列 MySQL 将使用字母比较。

`01-08`出现在之前`01-04`，所以实际上已经是月份部分了。

要解决此问题，请将列转换为`DATE`类型或将日期的顺序反转为`YYYY-MM-DD`，在这两种情况下都`BETWEEN`应该正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T17:29:16.213

试试这个：：

```
SELECT * FROM `Forms` Where str_to_date(`Date`, '%d/%m/%Y') Between '01-08-2012' and '12-12-2012' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T17:32:53.027

如果您担心它会损坏然后导出数据库然后进行更改。您不会得到您期望的结果，因为它是 TEXT 字段而不是日期字段。MySQL按字符排序。因为它正在查看第一个字符，然后是下一个字符，然后是下一个字符。

就像 navnav 说的那样，它不会损坏，但会进行备份。

至于仅显示日期，您可以在空间上爆炸（）以仅获取日期：

```
<?php

list($date, $time) = explode(" ", $datetime, 2);
echo $date;

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T17:33:49.820

试试这个：

```
select * from "forms" where Date('column_name') between '' and '' 
```

# ruby-on-rails - 如何在终端中显示带有颜色的 Rails 服务器信息

> ID：14161869
> 
> 赞同：2
> 
> 时间：2013-01-04T17:27:46.233
> 
> 标签：ruby-on-rails

我正在使用带有 ruby​​-1.9.3-head 的 rails-3.2.10，我的问题是，当我运行时

```
rails s 
```

如何在我的 bash 终端中添加一些颜色？我想尝试使用 ruby​​-debug 选项，但 ruby​​-debug gemfile 仅不能与 1.9.x 一起安装。

有解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:32:16.777

我试过[了](http://cbpowell.wordpress.com/2012/04/05/beautiful-logging-for-ruby-on-rails-3-2/)，它在 Rails 3.2.13 和 Ruby 2.0.0 中完美运行。您可以自定义颜色和消息。

该解决方案也是[gem](https://github.com/jrochkind/formatted_rails_logger)的形式。

```
gem 'formatted_rails_logger' 
```

Gem 的格式更好，但没有上色。我更喜欢第一个解决方案。

问候！

编辑：

试试 gem [meta_request](https://github.com/qqshfox/meta_request)和[Rails Panel](https://github.com/dejan/rails_panel) chrome 扩展。您可以在浏览器中看到组织良好的服务器日志，显示参数、SQL 查询等。

# dde - 如何在计算机上运行 DDE 服务器

> ID：14161878
> 
> 赞同：3
> 
> 时间：2013-01-04T17:28:08.650
> 
> 标签：dde

我想查看当前在我的计算机上活动的所有 DDE 服务器（如果可能，还包括主题）的列表。我怎样才能做到这一点？是否为每个 DDE 服务器启动了一些服务？

我在互联网和 stackoverflow 上搜索了一段时间，没有找到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T17:39:54.773

在我经常使用的工具中，tcl 可以做到：

```
dde services {} {} 
```

返回所有活动的服务主题对。

您可以在 TCL 源代码树 (win/tclWinDde.c) 中查看实现。基本上，使用窗口和消息是很无聊的工作。首先，创建 DDE 客户端窗口。然后将 WM_DDE_INITIATE 发送到每个窗口（使用 EnumWindows），将客户端窗口句柄作为 WPARAM 传递。客户端窗口过程处理 WM_DDE_ACK，从 LOWORD(lParam) 和 HIWORD(lParam) 中的原子添加服务和主题。

# javascript - 如何使用 Jasmine 间谍检查“this”的值？

> ID：14161886
> 
> 赞同：2
> 
> 时间：2013-01-04T17:28:32.637
> 
> 标签：javascript, testing, mocking, jasmine

我想验证 Jasmine 间谍是否使用特定对象调用`this`. 我怎样才能做到这一点？

一个人为的例子：

```
var spy = jasmine.createSpy('method');
var obj = {property: 'value'};
spy.apply(obj);
// How can we verify that 'this' in the call to spy is 'obj'?​​​​​​​​ 
```

我为这个问题创造了一个[小提琴](http://jsfiddle.net/aknuds1/2eRQG/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:36:10.220

虽然我找不到有关此功能的任何文档（抱歉，如果我遗漏了某些内容），但`this`每次调用间谍时都会记录 的值。

```
var spy = jasmine.createSpy('method');
var obj = {
    property: 'value'
};
spy.apply(obj);
expect(spy.mostRecentCall.object).toEqual(obj); 
```

请参阅[此小提琴](http://jsfiddle.net/aknuds1/wDHHP/)以进行演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-30T20:35:01.950

我在进行测试时遇到了这样的问题，所以我决定编写自定义间谍匹配器：[https ://www.npmjs.com/package/jasmine-spy-matchers](https://www.npmjs.com/package/jasmine-spy-matchers)

使用它们，您可以访问新的匹配器：

```
expect(spy).toHaveBeenCalledWithContext(obj)

//or

expect(spy).toHaveBeenCalledWithContext(obj, 'foo', 'bar')
```

它的工作方式与 toHaveBeenCalledWith 相同，但也可以`context`验证

# asp.net-mvc-4 - 向 ASP.NET MVC 示例上的 OpenID 登录按钮添加图形

> ID：14161891
> 
> 赞同：2
> 
> 时间：2013-01-04T17:28:46.117
> 
> 标签：asp.net-mvc-4, dotnetopenauth

我正在使用 VS 2012 MVC4 (razor) 示例（几乎所有这些都是新的）并且我修改了 AuthConfig.cs 文件以允许 Google 和 Yahoo 的 OpenID 访问

```
 OAuthWebSecurity.RegisterGoogleClient();
        OAuthWebSecurity.RegisterYahooClient(); 
```

果然，提供了这两个 OpenID 选项。我想修改它，以便按钮显示适当的徽标。

DotNetOpenAuth 是否有返回图像路径的方法？我在想如果是这样，我可以修改 ExternalLogin“页面”。

```
@foreach (AuthenticationClientData p in Model)
{
        <button type="submit" name="provider" value="@p.AuthenticationClient.ProviderName"  title="Log in using your @p.DisplayName account"><img src="" />@p.DisplayName </button>            
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:16:57.620

你可以这样做（对不起，它是 vb.net 代码）：

在 AuthConfig RegisterAuth 方法中创建一个字典并将您的图标路径添加到所需的图像

```
Dim MsExtraData As New Dictionary(Of String, Object)
MsExtraData.Add("Icon", VirtualPathUtility.ToAbsolute("~/Images/Microsoft.png"))

' Then pass it as extraData parameter to the register client method
OAuthWebSecurity.RegisterMicrosoftClient(
        clientId:="yourkey",
        clientSecret:="yoursecret",
        displayName:="Microsoft",
        extraData:=MsExtraData) 
```

现在转到 Views\Account 文件夹中的 _ExternalLoginsListPartial 查看并使用以下代码更改按钮生成代码：

```
<button type="submit" id="<%: p.DisplayName%>" name="provider" value="<%: p.AuthenticationClient.ProviderName%>" title="Login with <%: p.DisplayName %>"><%: p.DisplayName%>
            <img src="<%: p.ExtraData("Icon")%>" alt="Icon for <%: p.DisplayName%>" />
        </button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:26:40.540

听起来不错。Twitter 和 Facebook 签名需要一个额外的字段：displayName。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-09T19:45:55.540

我刚刚使用 font-awsome 在 _ExternalLoginsListPartials 视图上执行该任务，如下所示：

```
 using (Html.BeginForm(Model.Action, "Account", new { ReturnUrl = Model.ReturnUrl }))
        {
            @Html.AntiForgeryToken()
            <div id="socialLoginList">
                <p>
                @foreach (AuthenticationDescription p in loginProviders)
                {
                    <button type="submit" class="btn btn-default" id="@p.AuthenticationType" name="provider" value="@p.AuthenticationType" title="Log in using your @p.Caption account"><span class="fa fa-@p.Caption.ToLower()">&nbsp;&nbsp;</span>@p.AuthenticationType</button>
                }
                </p>
            </div>
        }
```

当然，前提是您使用的是 Font-Awsome，但我认为它也适用于其他字形图标。这也是 MVC5 和 VS2013，但我想它仍然适用于以前的 MVC 版本，因为我只使用 html、css 和 Razor。

希望有帮助！

# java - 从片段中检索上下文

> ID：14161892
> 
> 赞同：20
> 
> 时间：2013-01-04T17:28:46.370
> 
> 标签：java, android, android-fragments, android-asynctask, android-context

我创建了一个类来从 PHP 文件的 JSON 编码中检索注释。这个类，从 AsyncTask 扩展而来：

```
public class RecuperarComentarisFoto extends AsyncTask<String, String, String>{

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(????);
        pDialog.setMessage("Creating Product..");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
    }

} 
```

如您所见，我正在尝试在“doInBackground”进程运行时显示 ProgressDialog。但是progressDialog构造函数，要求一个上下文，我不知道如何提供它。

我从片段调用这个类，所以我不能像这样访问上下文：

```
pDialog = new ProgressDialog(MyFragmentA.context); 
```

“主要”活动被称为：AndroidViewPagerActivity，它扩展了 FragmentActivity。

（主要，我的意思是它是创建选项卡并管理它们之间的导航的那个。）

这是它的代码：

```
public class AndroidViewPagerActivity extends FragmentActivity {
ViewPager mViewPager;
TabsAdapter mTabsAdapter;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    mViewPager = new ViewPager(this);
    mViewPager.setId(R.id.pager);
    setContentView(mViewPager);

    final ActionBar bar = getActionBar();
    bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_HOME);
    bar.hide();

    mTabsAdapter = new TabsAdapter(this, mViewPager);
    mTabsAdapter.addTab(bar.newTab().setText("Fragment A"), MyFragmentA.class, null);

    if (savedInstanceState != null) {
        bar.setSelectedNavigationItem(savedInstanceState.getInt("tab", 0));
    }

} 
```

如何访问上下文？我应该使用哪个上下文？“AndroidViewPagerActivity”上下文？那么如何从片段中访问它的上下文呢？

谢谢你。

塞尔吉

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-04T17:30:39.827

使用`getActivity()`里面`Fragment`获得一个`Context`你可以传递的。这有效，因为`Activity`继承自`Context`.

作为替代方案，您可以使用`getApplicationContext()`来获取`Context`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-05T08:42:58.810

@heiko-rupp 的答案已过时， `Fragment.getContext()`已在 API 23 的片段中引入。

要从您必须使用的片段中传递它，例如`this.getContext()`

[https://developer.android.com/reference/android/app/Fragment.html#getContext()](https://developer.android.com/reference/android/app/Fragment.html#getContext())根据文档刚刚

> 返回此片段当前关联的上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T18:21:31.020

好的，现在我知道了一些新的东西：

*   您必须从实例化片段的类中获取上下文。

您可以通过在片段（“孩子”）的代码中包含此内容来做到这一点。

```
Context cont;
cont=getActivity(); 
```

所以，一旦你有了上下文，你就通过它。在我的例子中，我必须给它传递一个 AsyncTask 类，这样我才能显示一个对话框。

```
new RecuperarComentarisFoto(cont).execute(); 
```

为了完成这个，在“RecuperarComentarisFoto”类上，我创建了一个构造函数。正如我所读到的，这样做是可以的。

```
private Context mContext;
public RecuperarComentarisFoto(Context context){
    this.mContext=context;
} 
```

还有魔法：

```
@Override
protected void onPreExecute() {
    super.onPreExecute();
    ProgressDialog pDialog = new ProgressDialog(this.mContext);
    pDialog.setMessage("Creating Product..");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(true);
    pDialog.show();
} 
```

这一切都以： ![在此处输入图像描述](../Images/c7aa69ad3c606a51dc615cadd72fb736.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T17:37:44.480

FragmentActivity 这将为您提供活动的上下文，然后您可以将其传递给您的 AsyncTask。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-31T13:45:24.993

不使用 getActivity() 的一个好方法是在片段内创建一个局部可为空的变量

## 科特林

```
private var attachedContext: Context? = null 
```

然后在 onAttach 你将当前上下文对应到片段

```
 override fun onAttach(context: Context) {
        super.onAttach(context)

        attachedContext = context
} 
```

最后，当您使用它时，您可以检查该上下文是否为空，如果不是，您可以继续

```
attachedContext?.let { safeContext -> 

  // Safe place that you know context is not null

} 
```

作为下一步，我已经放置了调试器，因此您可以看到附加到此变量的上下文是相同的，`getActivity()`但片段获取父活动的上下文包含在

[![在此处输入图像描述](../Images/105ad2b5ebb938d9a317307d3506ff21.png)](https://i.stack.imgur.com/yyBgz.png)

这是一种更好的方法，可以让我们的片段更清晰，并在生命周期中明确知道上下文来自何处。

# c# - 返回身份列表的过程

> ID：14161895
> 
> 赞同：1
> 
> 时间：2013-01-04T17:29:05.000
> 
> 标签：c#, sql-server-2008, tsql, stored-procedures

> **可能重复：**
> [如何检索通过 insert...select 插入的行的标识？](https://stackoverflow.com/questions/575273/how-can-i-retrieve-the-identities-of-rows-that-were-inserted-through-insert-se)

我需要一个可以在插入后返回主键列表（自动生成）的过程

```
PROCEDURE [dbo].[Person_InsertCloud]
@TablePerson Catalog.Type_Person READONLY
AS
SET NOCOUNT ON
    INSERT INTO dbo.PersonaTestCLOUD
    (IdPerson, IdDocument,NroDocument,Name,LastName, SecondLastName,BrandName, 
     Birthdate, IdSex, IdState, IdTypePerson, IdUbicationGeographic, NumberPhoneDefault,
     IdDirectory,IdPhoto)
    SELECT t.Id,t.IdDocument,t.NroDocument,t.Name,t.LastName,t.SecondLastName,t.BrandName,
        t.BirthDate,t.IdSex,t.IdState, t.IdTypePerson,t.IdUbicationGeographic,t.NumberPhoneDefault,
        t.IdDirectory, t.IdPhoto
    FROM @TablePerson t
    WHERE t.IdServer = -1; 
```

那可能吗？我在一个只返回一个 id 的过程之前使用过。

谢谢

# javascript - 为什么这个 $.getJSON 的回调函数没有被执行？

> ID：14161898
> 
> 赞同：0
> 
> 时间：2013-01-04T17:29:20.180
> 
> 标签：javascript, jquery, ajax, json

这是尝试获取 json 文件的脚本：

```
jQuery(function($) {

    //////////////////////HEADLINE NEWS JSON SERVER START///////////////////////////
    var container = $("#headlineNews"); //cache the element
    console.log("First Log message is here!")
    $.getJSON("/JsonControl/Headline_News.json", function(jsonObj) {
        console.log("Second Log message is here!")
        var val = "";

        for (var i = 0; i < jsonObj.news.length; ++i) {
            val += "<div id='newsHeading'>" 
                + jsonObj.news[i].heading 
                + "</div><br/><div id='newsSummary'>" 
                + jsonObj.news[i].summary 
                + "</div><br/>";

            if (jsonObj.news[i].linkText != "" && jsonObj.news[i].linkPath != "") {
                val += "<a href='" + jsonObj.news[i].linkPath + "'>" + jsonObj.news[i].linkText + "</a><br/><br/>";
            }

            val += "<div class='entryDivider'>____________________________________________________</div>";
        }

        container.html(val);
    });

    //////////////////////HEADLINE NEWS JSON SERVER END/////////////////////////////
});​ 
```

这是json文件本身：

```
{
    "news": [
        {
        "heading": "Bulky Item Pick-Up to Begin May 4th, 2012 for Residential Utility Account Holders.",
        "summary": "Click on the link below for more details.",
        "linkText": "Bulky Item Pick-Up",
        "linkPath": "/Displayable Files/City_Bulk_Pick_Up_for_e_mailing.pdf"},
    {
        "heading": "NOW OPEN!",
        "summary": "OKMULGEE RECYCLING CENTER<br/>301 E. 3rd Street<br/>(Corner of E. 3rd St. and N. Muskogee Ave.).",
        "linkText": "WHAT TO AND WHAT NOT TO RECYCLE",
        "linkPath": "/Displayable Files/Recycling_Items.pdf"}
    ]
}​

//To omit any of these options, simply leave them blank (i.e., "linkText":""). 
```

我尝试使用 console.log，但只有第一个执行，第二个没有执行，所以我知道 $.getJSON 分支的内容根本没有执行（这意味着 $.getJSON 语句是失败，如果我理解正确的话）。但是绝对不会发生脚本错误。

此外，服务器设置为提供 json 文件，因为另一个测试站点已经很好地执行了外部 json 文件。

感觉路径在某种程度上是错误的，但我没有得到 404，我已经重新检查了这条路径，以确保它在语法上至少是正确的十几次。

如果文件的路径正确，json 文件的语法正确，并且服务器确实配置为提供 json 文件（例如，设置了 application/json MIME 类型）， $.getJSON 命令怎么会失败？如果分支的其余部分不执行，是否还有其他可能，或者第二个 console.log 不会执行？

- - - - - - - - - -更新 - - - - - - - - - - - - - - -

我编辑了我的帖子以反映我（错误地）在我的 json 文件中的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:33:39.050

您应该使用 $.ajax，因为它允许您指定成功、错误和完成（最终）回调。也许您的回调没有被调用，因为它是一个成功回调并且请求返回一个错误。

```
$.ajax({
  url: 'ajax/test.html',
  type: 'POST',
  data: jsonData
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  },
  error: function(request, status, error) {
    //do stuff
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:48:52.547

试试这个，看看你是否在控制台中返回了 json。

```
$.getJSON("/JsonControl/Headline_News.json", function(jsonObj) {
   console.log(jsonObj);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T17:58:16.877

JavaScript 注释（或任何其他注释）在 JSON 语法中是不合法的。

# xcode - 自定义 OSX 应用程序图标

> ID：14161900
> 
> 赞同：0
> 
> 时间：2013-01-04T17:29:32.590
> 
> 标签：xcode, macos, icons

我找到了 Xcode 创建的应用程序可执行文件，但它具有默认图标。现在我想将它更改为我自己的图像，一个 png 512x512 文件。

但是当我将文件拖到 Xcode 中的“App icon”时，它会出现一个询问符号，并且应用程序不是使用该图标创建的。

那么有什么问题呢？

# java - Spring RequestMapping 周期

> ID：14161911
> 
> 赞同：3
> 
> 时间：2013-01-04T17:30:15.110
> 
> 标签：java, spring, spring-mvc

在我的 Spring App 中，我有一个这样注释的控制器：

```
@Controller
@RequestMapping("/1/site") 
```

如果我尝试将请求映射值更改为此，我会得到 404：

```
@Controller
@RequestMapping("/1.0/site") 
```

经期发生了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T20:08:42.090

点在 URL 中具有特殊含义。我会避免按照您的意图使用它。请改用破折号或下划线。有关详细信息，请参阅[SPR-5778](https://jira.springsource.org/browse/SPR-5778)。

# ios - iOS：动画图标模型“跳板”

> ID：14161917
> 
> 赞同：1
> 
> 时间：2013-01-04T17:30:34.710
> 
> 标签：ios, animation, springboard

我想知道当我长按其中一个时，是否可以模拟 iPhone 跳板中图标的微小移动。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T22:18:58.650

哈哈！

去年我参加了一次会议，其中一位演讲者是苹果公司的前员工，当时我正在创建图标摆动。

当他们创建它时，他们使用了缩放、旋转和平移（上、下和左、右）动画的组合。

当向史蒂夫乔布斯展示它时，他对展示给他的任何晃动都不满意。

最后，他们创建了一些自定义滑块（在主屏幕后面），他可以访问这些滑块，以便他可以自己自定义动画并“恰到好处”。

我知道这根本没有帮助，但认为它可能很有趣。

无论如何，看起来机器人猫在评论中提供的链接可能会给你一些值得一看的东西。

# avr - AVR-GCC 能否与 16 位 AVR I/O 寄存器一起正常工作？

> ID：14161918
> 
> 赞同：3
> 
> 时间：2013-01-04T17:30:38.233
> 
> 标签：avr, avr-gcc

### 前言

众所周知，对于原子和同时读取/写入 16 位 I/O 寄存器（定时器计数器、ICR/OCR、ADC...）的高位和低位部分，AVR 使用影子临时寄存器。例如`TCNT1`在 ATmega8 上阅读：

```
uint8_t tl, th;
tl = TCNT1L;   // tl <- TCNT1L, avr_temp <- TCNT1H (atomic)
th = TCNT1H;   // th <- avr_temp 
```

（这里`avr_temp`是 AVR 临时影子寄存器）。因此，`TCNT1H`例如，首先阅读是错误的。

### 问题

将 AVR-GCC 与如下代码一起使用是否安全？

```
uint16_t ticks;
ticks = TCNT1;
TCNT1 = 0x1234; 
```

AVR-GCC 是否总是为这些操作生成正确的代码？

（似乎是“否”（GCC怎么知道访问指向的内存`TCNT1`使用AVR影子寄存器？），但是avr-libc定义宏TCNT1以及TCNT1H、TCNT1L和[avr-](http://www.nongnu.org/avr-libc/user-manual/FAQ.html#faq_16bitio) libc'FAQ建议直接使用`TCNT1`。我我很困惑。）

我测试了 AVR-GCC v4.7.2，它似乎总是生成正确的代码。即使我写了 'TCNT1 |= 1' 它也会产生正确的代码`-O3`：

```
$ avr-gcc -std=c99 -mmcu=atmega8 -S -O3 -o - 1.c
...
in r24,0x2c     // TCNT1L
in r25,0x2c+1   // TCNT1H
ori r24,1
out 0x2c+1,r25
out 0x2c,r24
... 
```

即使我`TCNT1`用普通的 16 位变量进行更改，代码也是一样的。那么，“GCC 怎么知道访问指向的内存`TCNT1`使用 AVR 影子寄存器？” -- 默认情况下，似乎在访问*任何*16 位变量时*总是假设影子寄存器。*

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T13:17:46.467

我不知道它是怎么知道的，但我已经`TCNT1`在几十个程序中直接使用过，没有问题。[您链接](http://www.nongnu.org/avr-libc/user-manual/FAQ.html#faq_16bitio)的常见问题解答建议您这样做，就像我读过的每个教程一样。

常见问题解答的重点是确保在两个寄存器的写入之间不会发生中断。尽管 avr-gcc 会生成以正确顺序访问它们的代码，但它不能保证它们之间不会发生中断：您必须注意这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-12T17:56:55.947

如果您阅读例如 /usr/lib/avr/include/avr/iom32u4.h 的源代码，您会看到：

```
#define TCNT1 _SFR_MEM16(0x84) 
```

在 /usr/lib/avr/include/avr/sfr_defs.h 中扩展 _SFR_MEM16 宏，您会看到：

```
#define _SFR_MEM16(mem_addr) _MMIO_WORD(mem_addr) 
```

扩展_MMIO_WORD：

```
#define _MMIO_WORD(mem_addr) (*(volatile uint16_t *)(mem_addr)) 
```

然后查看stdint.h： typedef unsigned int uint16_t;

这里是编译器介入的地方。AVR平台上的int类型是16位，而AVR上的寄存器是8个，所以编译器必须进行2次内存访问（没有为它定义16位内存访问指令）利用）。根据[此处](http://www.nongnu.org/avr-libc/user-manual/group__avr__sfr.html)的文档：

> 编译器将根据被访问的寄存器地址选择正确的指令序列来生成。

* * *

顺便说一句，我最初认为它是[可变属性](https://gcc.gnu.org/onlinedocs/gcc/AVR-Variable-Attributes.html#AVR-Variable-Attributes)，但事实证明它是通过芯片的内存映射嵌入到 AVR 架构中的。*

# delphi - 禁用表单中的查找

> ID：14161924
> 
> 赞同：0
> 
> 时间：2013-01-04T17:30:48.563
> 
> 标签：delphi, dataset, lookup

我得到了一个表格来修改它，它是在加载时从数据集中填充的。数据集中有一个 ID 字段，显示在表单上的一个字段中。在此 ID 字段丢失的情况下，我需要在此字段中显示查找，用户可以从其中选择它丢失的几个原因，如果 ID 存在，我需要显示它而不显示查找。

我一直在努力寻找能够让我做到这一点的语法，任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:41:16.590

我希望我正确理解了这个问题

```
procedure TForm1.DataSourceDataChange(Sender: TObject; Field: TField);
begin
   if Field = MyFieldOfInterest then
     begin
        MyLookupComponent.visble := Field.IsNull;
        MyIDOnlyComponent.visble := not Field.IsNull; // or enabled ...
     end;
end; 
```

# github - Github - 创建回购失败

> ID：14161925
> 
> 赞同：1
> 
> 时间：2013-01-04T17:30:49.187
> 
> 标签：github

我想创建一个回购，但我失败了。这是我的步骤：

```
mkdir ~/Hello-World
cd ~/Hello-World
git init
touch README
git add README
git commit -m 'first commit'  --> 1 file changed, 1 insertion
git push origin master 
```

我被要求输入我的密码和用户名。

```
fatal :https://github.com/timokoerner/Hello-World.git/info/refs?service=git-receive-pack not found; did you run git update server info 
```

我有 git 版本 1.8。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T07:01:55.883

你可以：

*   *用现有*GitHub 存储库的名称替换您当前的远程命名源

    ```
    git remote set-url origin https://github.com/timokoerner/Xing.git 
    ```

*   尝试`git push -u origin master`第一次推送。
    请参阅“[为什么我需要显式推送新分支？](https://stackoverflow.com/a/17096880/6309) ”。
    在第一次推送之后，可以使用单个“ `git push`”发布其他提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:46:02.560

您输入了错误的用户名或密码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-28T01:59:52.233

“-u”是必需的。

> 混帐初始化
> 
> 在包含您不想提交的所有文件和目录中创建一个 .gitignore 文件
> 
> 混帐添加。//将所有文件添加到本地git
> 
> git status -a / 显示所有修改或添加的文件
> 
> git remote add origin git@github.com:USER/REPO.git
> 
> git push -u 起源大师

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T17:38:55.820

就个人而言，我在 Github 上创建初始存储库从来没有遇到过问题。

尝试去这里填写必要的字段：

[创建 Github 仓库](https://github.com/new)

完成后，您可以使用`git clone`创建存储库的本地实例。从那里，您可以像普通存储库一样推送和拉取它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-08T03:19:44.343

你输入你的 GitHub 用户名和 GitHub 密码了吗？

您还可以编辑遥控器，使其指向`https://timokoerner@github.com/timokoerner/Xing.git`。在这种情况下，这只会提示您输入（GitHub）密码。

# mysql - MYSQL 会话在一段时间后随着休眠而过期

> ID：14161930
> 
> 赞同：0
> 
> 时间：2013-01-04T17:31:00.387
> 
> 标签：mysql, hibernate

我们正在使用 MySQL 数据库开发 Hibernate。我们正面临与 MySQL 连接相关的问题。我们是：

1.  使用 tomcat 服务器启动我们的 Web 应用程序。

2.  使用 Hibernate 对 MySQL 进行一些数据库工作。

现在一切顺利，现在的问题是 MySQL 对每个非活动会话都有一个会话超时，这意味着我们通过任何语言建立的所有会话连接在其配置时间后都被 MySQL 拒绝。但是如果在该配置时间之后的请求被发送到 MySQL，它会被 MySQL 拒绝，并且 Hibernate 无法重新连接它。所以每次我们都需要重启Tomcat。

这是 Hibernate 配置问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:48:09.887

如果您向我们展示您的数据源连接字符串、池配置和休眠会话工厂配置，那就太好了。

但也许只需将参数 autoReconnect 添加到您的连接字符串即可解决此问题。

```
<property name="jdbcUrl" value="jdbc:mysql://localhost/your_db?autoReconnect=true&amp;allowMultiQueries=true"/> 
```

# perl - Perl映射函数输出分配给变量

> ID：14161931
> 
> 赞同：1
> 
> 时间：2013-01-04T17:31:03.213
> 
> 标签：perl, map

我想将`map`Perl 中函数的输出连接到一个字符串变量。但是，如果我尝试这个：

```
$body .= map {"$_\n"} sort(@{$hash{$server}->{VALID}});

```

$body 的值等于 3 而不是预期的

```
用户1
用户2
用户3

```

如果我做：

```
打印地图 {"$_\n"} sort(@{$hash{$server}->{VALID}});

```

它给了我我想要的。

那么如何模仿打印地图功能并将其分配给 body 变量呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T17:36:26.370

`map`用于将一个列表转换为另一个列表，这就是它返回的内容。这适用，`print`因为该`print`函数采用一个列表并将输出它们以`$,`（输出字段分隔符）的值分隔。

如果你想将一个列表连接成一个字符串，你必须使用[`join`](http://perldoc.perl.org/functions/join.html).

```
$body .= join "\n", sort(@{$hash{$server}->{VALID}}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T17:36:11.227

`print`连接由 返回的数组`map`，将具有 的值的项交错`$,`。所以，你需要这个来模拟`print`行为：

```
$body .= join $,, map {"$_\n"} sort(@{$hash{$server}->{VALID}}); 
```

只要`print`您担心，另一种有效的可能性是：

```
print "$_\n" for sort(@{$hash{$server}->{VALID}}); 
```

或者，启用 Perl v5.10 功能`say`，只需：

```
say for sort(@{$hash{$server}->{VALID}}); 
```

推断连接：

```
$body .= "$_\n" for sort(@{$hash{$server}->{VALID}}); 
```

# python - 使用 python 解析 xml 失败：xml.etree.cElementTree

> ID：14161932
> 
> 赞同：-2
> 
> 时间：2013-01-04T17:31:09.493
> 
> 标签：python, xml, parsing

我使用下载一个xml文件

```
wget -O example.xml http://gdata.youtube.com/feeds/api/videos?q=samsung+mobile&orderby=relevance&start-index=1&max-results=5&v=2 
```

我想从 x_HFR3Hmv44 获取视频 ID，例如“x_HFR3Hmv44”，发布时间为 2010-10-25T20:42:22.000Z

但是，我使用以下代码失败了

```
import xml.etree.cElementTree as et

sxml = open('example.xml', 'r').read()
tree=et.fromstring(sxml)
for el in tree.findall('published'):
    print el.getchildren()[1].text 
```

但我失败了，输出什么都没有

谁能告诉我哪里错了？谢谢！

是不是因为xml.etree.cElementTree不能处理xml文件？有类似的标签，而文件中未定义 yt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:07:04.813

您只是对 XML 结构感到困惑。添加`prettyprint=true`到您的查询字符串以获取缩进的 xml，这将使您更容易阅读。另请参阅[YouTube 的元素参考链接](https://developers.google.com/youtube/2.0/reference#API_Request_XML_Element_Definitions)以了解预期内容。

这将使您开始：

```
from urllib import urlopen
import xml.etree.cElementTree as ET

url = 'http://gdata.youtube.com/feeds/api/videos?q=samsung+mobile&orderby=relevance&start-index=1&max-results=5&v=2'

root = ET.parse(urlopen(url))

def qname(prefix, name, map={'atom':'http://www.w3.org/2005/Atom'}):
    """Helper function for namespaced element names"""
    return '{{{}}}{}'.format(map[prefix], name)

for e in root.findall(qname('atom','entry')):
    print e.findtext(qname('atom','id')), e.findtext(qname('atom','published')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:49:51.693

很难确切地说，但我认为你有两个问题：

1.  `Element.findall()`[根据 docs](http://docs.python.org/2/library/xml.etree.elementtree.html#finding-interesting-elements)，仅查找该元素的直接子元素。

2.  您需要指定该标签所属的命名空间。例如：

    列表（tree.iter（'{http://www.w3.org/2005/Atom}已发布'））

# excel - 如果1个单元格重复，Excel 2010将数据从1行移动到另一行

> ID：14161933
> 
> 赞同：0
> 
> 时间：2013-01-04T17:31:16.690
> 
> 标签：excel

我有一个包含各种列的电子表格。第 1 列是电话号码，另一列是文本字段。但是电话号码可以重复，但其他字段的信息是唯一的。

例如

```
Column 1    Column 2  
11111111    A  
11111111    B  
11111111    777  
22222222    B  
22222222    C 
```

希望输出为：

```
Column 1    Column 2    Column 3    Column 4  
11111111     A           B           777  
22222222     B           C 
```

有任何想法吗？

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:02:59.537

电子表格布局：

`B2:B7`: 电话号码
`C2:C7`: 文本 `F1`和右侧：辅助行，带有递增的条目号 (1,2,...n)，以使公式更简单。

`E3`: 唯一电话号码：
`{=INDEX($B$3:$B$7;MATCH(0;COUNTIF($E$2:E2;$B$3:$B$7);0))}`
数组公式：在公式窗口中按 Shift-Ctrl-Enter 插入，大括号是 Excel 插入的，不是用户插入的。公式可以抄下来。

`F3`: 对应电话号码的条目：
`{=OFFSET($B$2;SMALL(IF($E3=$B$3:$B$7;ROW($B$3:$B$7)-ROW($B$2);"");F$1);1)}`
另外一个数组公式，向下和向右复制

不包括错误处理：这是可能的，但公式的长度会加倍。

电子表格示例：[http ://www.bumpclub.ee/~jyri_r/Excel/Entries%20moved_to_one_row_for_duplicates.xls](http://www.bumpclub.ee/~jyri_r/Excel/Entries%20moved_to_one_row_for_duplicates.xls)

# tomcat7 - 删除 Tomcat 7.0.33 并安装 TomEE plus 1.5.1。错误弹出

> ID：14161934
> 
> 赞同：1
> 
> 时间：2013-01-04T17:31:29.700
> 
> 标签：tomcat7, apache-tomee

我删除了 Tomcat 7.0.33 并安装了 TomEE plus 1.5.1。但是，当我启动 TomEE 服务器时。错误弹出。Tomcat上有这样的错误。

你能提供一些建议吗？非常感谢。

```
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: java.lang.StackOverflowError
       at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
       at java.util.concurrent.FutureTask.get(FutureTask.java:111)
       at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
       at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
       at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
       at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
       at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
       at java.util.concurrent.FutureTask.run(FutureTask.java:166)
       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
       at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.StackOverflowError
       at java.lang.String.<init>(String.java:203)
       at java.util.zip.ZipCoder.toString(ZipCoder.java:59)
       at java.util.zip.ZipFile.getZipEntry(ZipFile.java:529)
       at java.util.zip.ZipFile.access$900(ZipFile.java:56)
       at java.util.zip.ZipFile$1.nextElement(ZipFile.java:511)
       at java.util.zip.ZipFile$1.nextElement(ZipFile.java:481)
       at java.util.jar.JarFile$1.nextElement(JarFile.java:242)
       at java.util.jar.JarFile$1.nextElement(JarFile.java:237)
       at org.apache.xbean.finder.archive.JarArchive$JarIterator.advance(JarArchive.java:105)
       at org.apache.xbean.finder.archive.JarArchive$JarIterator.advance(JarArchive.java:108)
       at org.apache.xbean.finder.archive.JarArchive$JarIterator.advance(JarArchive.java:108)
       at org.apache.xbean.finder.archive.JarArchive$JarIterator.advance(JarArchive.java:108)
       at org.apache.xbean.finder.archive.JarArchive$JarIterator.advance(JarArchive.java:108)
       at org.apache.xbean.finder.archive.JarArchive$JarIterator.advance(JarArchive.java:108)
       at org.apache.xbean.finder.archive.JarArchive$JarIterator.advance(JarArchive.java:108)
       at org.apache.xbean.finder.archive.JarArchive$JarIterator.advance(JarArchive.java:108)

....

Jan 04, 2013 10:07:01 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
       at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
       at java.util.concurrent.FutureTask.get(FutureTask.java:111)
       at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
       at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
       at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
       at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
       at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
       at java.lang.reflect.Method.invoke(Method.java:601)
       at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
       at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
       at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
       at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
       at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
       at java.util.concurrent.FutureTask.run(FutureTask.java:166)
       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
       at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
       at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
       at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
       ... 7 more

Jan 04, 2013 10:07:01 AM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
       at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
       at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
       at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
       at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
       at java.lang.reflect.Method.invoke(Method.java:601)
       at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
       at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
       at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
       ... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
       at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
       ... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
       at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
       at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
       at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
       ... 11 more 
```

# audio - 2D 碰撞和背景音乐 XNA 3.1

> ID：14161943
> 
> 赞同：-1
> 
> 时间：2013-01-04T17:32:04.070
> 
> 标签：audio, background, xna, collision

我正在为我的 XNA 任务制作守门员游戏，我想知道如何编写代码：检测到球与守门员发生碰撞，然后将球重置到其原始位置。另外，我将如何设置一首歌曲，以便在程序启动后立即在后台播放？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T19:09:06.543

开始了 ：

Texture2D 是 2D 对象的图形容器。矩形可用于包含纹理。

当您在指定的矩形内构造goalKeeper 对象时，您可以对矩形使用很多方法，即 rectangle.intersects(theObjectYouWantToCheckIntersectFor)。

所以你要做的是：

```
class Ball
{
Texture2D myTexture;
Rectangle myRect;
Vector2 velocity;

public Ball(Texture2D newTexture, Rectangle newRect, Vector2 newVelocity)//Constructor 
{
myTexture = newTexture;
myRect = nwRect;
speed = newVelocity;
}

public void Intersect Check(goalKeeper checkForIntersect)//pass in the goalKeeper object
{
if(rectangle.Intersects(checkForIntersect.rectangle)
{
Ball.Vector2 = Vector.Zero; //Or whatever place you want it to default to
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:08:18.537

对于碰撞，您只需围绕您的球和守门员制作一个矩形。然后使用 rectangles intersect 方法查看它们是否接触。

如果您想要更精确的碰撞，您可以检查图像中的像素并从中查看是否发生了碰撞。

对于背景音乐，请尝试：

加载内容：

```
MediaPlayer.IsRepeating = true; 
MediaPlayer.Play(Content.Load<Song>("Directory\\songtitle")); 
```

# java - 为什么这段代码编译，但运行时 ClassNotFoundException？

> ID：14161944
> 
> 赞同：1
> 
> 时间：2013-01-04T17:32:05.973
> 
> 标签：java, jvm, classnotfoundexception, ibm-jvm

我有一些使用专有 sun.*.OperatingSystemMXBean 的代码，所以我很小心。

```
try {
    _osBean = (com.sun.management.OperatingSystemMXBean) java.lang.management.ManagementFactory.getOperatingSystemMXBean();
}
catch (ClassCastException e) {
    _osBean = null;
} 
```

但是，当此代码在 IBM JVM 上`ClassCastException`运行时，我得到的是 runtime而不是`ClassNotFoundException`. 如果该类不可用，为什么这段代码能够编译得很好，JVM如何影响这样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:33:41.100

com.sun.* 包是 sun 为 sun JVM（热点）编写的私有类，不是公共 API（即使您的代码证明它们是可访问的）。IBM JVM 是一个完全不同的实现并且没有它们（因为它们不是任何 java/jvm 规范的一部分）。
我猜它编译得很好，因为您正在使用 sun/oracle JDK 进行编译
以尝试解决问题，请尝试转换为

```
java.lang.management.OperatingSystemMXBean 
```

而是（这是一个公共 API），看看它是否适合你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T17:33:59.650

您正在使用 Sun Javac 进行编译

```
com.sun.management.OperatingSystemMXBean 
```

与，但与 IBM Java 一起运行。您的 IBM 环境不会有任何与 Sun 相关的内容。com.sun.* 类是专有的，应谨慎使用。

顺便说一句，您只需针对 3rd-party jar 进行编译，而不是使用它进行部署，就可以得到这个错误。例如 Apache jar 或类似的。这不是特别与专有 jar 相关的错误，而是与一般部署问题相关的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-24T10:23:54.047

应用程序服务器操作可能是此错误的原因。例如在wildfly10 AP中，com.sun.management等系统类不能自动加载，您必须定义它才能加载AP。可以通过 \modules\system\layers\base\sun\jdk\main\module.xml 完成定义

```
<dependencies>
    <module name="sun.scripting" export="true"/>
    <system export="true">
        <paths>
        <path name="com/sun/management"/>
        </path>
        <exports>
            <include-set>
                <path name="META-INF/services"/>
            </include-set>
        </exports>
    </system>
</dependencies> 
```

通过将上述定义添加到提到的文件 wildfly10 可以加载类，您可以在运行时使用 com.sun.management.OperatingSystemMXBean 的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T17:34:36.240

大概您正在*针对*包含`com.sun.management.OperatingSystemMXBean`. 这不是标准 JDK 的一部分，这就是您不应该使用它的原因 - 它不能保证存在于其他 Java 系统上，并且似乎*不*存在于您正在使用的 IBM JVM 中。

这与针对执行时不存在的任何其他库进行编译相同。

也可以看看：

*   [“为什么开发人员不应该编写调用‘sun’包的程序”](http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T17:36:10.940

您正在使用 Sun 提供的编译器和 JDK（具有该类），但在没有该类的 IBM JVM 上运行。通常，如果它以 com.sun.* 开头是特定于 sun 的，如果您不能保证 JVM 将运行它，则不应依赖它。

# java - 在android中重复本地通知

> ID：14161945
> 
> 赞同：1
> 
> 时间：2013-01-04T17:32:23.427
> 
> 标签：java, android, eclipse

我正在尝试发出通知，无论安装了应用程序，它都会每隔一个月自动设置一次警报/通知，并在单击该通知时打开应用程序的特定活动

这是我的警报管理器代码

```
 // get a Calendar object with current time
    Calendar cal = Calendar.getInstance();
    // add 5 minutes to the calendar object
    cal.add(Calendar.MINUTE, 5);
    Intent intent = new Intent(this, AlarmReceiver.class);
    intent.putExtra(MESSAGE);

    PendingIntent sender = PendingIntent.getBroadcast(this, 10, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    // Get the AlarmManager service
    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
    am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

我做了一个警报课

```
 @Override
 public void onReceive(Context context, Intent intent) 
 {
   try {
         Intent newIntent = new Intent(context, Appointment.class);
         context.startActivity(newIntent);
        } 
   catch (Exception e) 
    {
       Toast.makeText(context, "There was an error somewhere, but we still received an alarm", Toast.LENGTH_SHORT).show();
         e.printStackTrace();
      }
} 
```

我的问题是，我想将其设置为每月 1 日的重复通知。警报代码，我在我的 mainActivity 中有它。我如何设置它每月重复一次

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:57:48.563

### `Schedule a repeating alarm can be achieved by setRepeating() of AlarmManager()`

`public void setRepeating (int type, long triggerAtMillis, long intervalMillis, PendingIntent operation)`

> 希望您可以通过检查哪个月份并通过设置标志来修改`INTERVAL_DAY *28`Or `INTERVAL_DAY*30`OR来实现您的目标。`INTERVAL_DAY*31`

```
 am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),AlarmManager.INTERVAL_DAY*30, sender); 
```

# c++ - C++ ifdef 用于重复行

> ID：14161948
> 
> 赞同：3
> 
> 时间：2013-01-04T17:32:29.573
> 
> 标签：c++, macros, comments, c-preprocessor

我有许多**printfs**我想注释掉，并且能够以灵活的方式再次取消注释。我正在考虑这样的解决方案：

```
#define SOMETHING
...

#ifdef SOMETHING
printf(....
#endif 
```

但一个薄弱的部分是我必须为每个 printf 都这样做。第一个问题，有人知道更有效的方法吗？如果是这样，请以一些片段为例，因为使用预处理器和宏定义我是初学者。

第二个问题，我可以对**couts**做同样的事情吗？如果不能，他们还有什么解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T17:35:30.297

您可以使用一个简单的宏来完成此操作，该宏允许您完全删除`printf`语句。

```
#ifdef PRINT_DATA
#define PRINT(x) printf x
#else
#define PRINT(x)
#endif

void test()
{
    PRINT(("Entering test\n"));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T17:44:00.097

除了[Caption Obvlious answer](https://stackoverflow.com/a/14161996/1139697)之外，既然您在询问`std::cout`：是的，这是可能的，但是，因为您将使用`<<`运算符，您必须提供一个特殊的 nullstream，它只会忽略每个输入：

```
#ifdef PRINT_DATA
#define OUT std::cout 
#else
#include <iosfwd> 
struct nullstream_t{};

template <typename T>
nullstream_t & operator<<(nullstream_t & s, T const &){return s;}
nullstream_t & operator<<(nullstream_t & s, std::ostream &(std::ostream&)){
    return s;
}

static nullstream_t nullstream;

#define OUT nullstream
#endif

#include <iostream>

int main(){
    OUT << "Hello World" << std::endl;
} 
```

这个想法仍然是一样的，你定义一个宏，它要么定义为空流，要么定义为`std::cout`空流。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T17:37:36.290

选择性地记录事物是许多人面临的问题。与其滚动您自己的解决方案并随着您的需求变化而慢慢扩展它，而是考虑使用现有的实现，例如[Boost.Log](http://boost-log.sourceforge.net/libs/log/doc/html/index.html) 它有很多您现在可能不需要但将来很可能需要的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T17:39:46.627

对于您关于 cout 的问题，这是我使用的：

```
#define verbose
//or
bool verbose = true;

//Verbose Output
#define VOUT(str) do { if (verbose) { std::cout << str; } } while (0,0) 
```

`(0,0)`用于避免 Visual Studio 上的一些编译器警告。使用 VOUT 如下所示：

```
int i = 5;
VOUT("Hello world " << i << '\n');
//'Hello world 5
//' 
```

# mysql - SQL 顺序的限制

> ID：14161949
> 
> 赞同：0
> 
> 时间：2013-01-04T17:32:35.447
> 
> 标签：mysql, select, restriction

在这里提问还是新手，所以这是我第二次尝试解决我面临的问题。

我有一张已经按分数订购的桌子。每个记录可以是 3 种类型之一。我想按分数对表格重新排序，但对每 10 条记录的组合施加额外的限制。特别是，有由 3 种类型中的每一种组成的特定组合。

在下面的示例中，我希望至少有 2 个 C 型，最多 2 个 A 型

**我有的**

```
------------------------------------------
ID      Score      Type
------------------------------------------
1       100         A
2       99          B
3       97          B
4       92          A
5       91          C
6       85          A
7       83          B
8       81          B
9       75          B
10      70          B
11      65          A
12      61          C
13      59          B 
```

**我想要的是**

```
------------------------------------------
ID      Score      Type
-----------------------------------------
1       100         A
2       99          B
3       97          B
4       92          A
5       91          C
7       83          B
8       81          B
9       75          B
10      70          B
12      61          C 
```

我认为这不能通过 Group By 或 usort 以有效的方式解决。我最初的解决方案是导出到 PHP 并在那里进行重新排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:54:21.703

我假设您希望返回所有 TYPE=C 的行和所有 TYPE=B 的行，但最多只返回 2 行 TYPE=A 的行。

这将在 ORACLE 中起作用 - ROWNUM 可用于子查询以限制行数。

（在另一个数据库中，ROWNUM 甚至可能没有实现）

```
SELECT 
T.*
FROM
(
    select *
    from
    (
            select T.ID, T.SCORE, T.TYPE 
            from YourTable T
            WHERE TYPE='A'
            ORDER BY T.SCORE DESC

    )
    WHERE ROWNUM <=2
    UNION 
    select *
    from
    (
            select T.ID, T.SCORE, T.TYPE 
            from YourTable T
            WHERE TYPE='B'
            ORDER BY T.SCORE DESC

    )

    UNION 
    select *
    from
    (
            select T.ID, T.SCORE, T.TYPE 
            from YourTable T
            WHERE TYPE='C'
            ORDER BY T.SCORE DESC

    )

) T
ORDER BY T.SCORE DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T18:19:07.497

尝试这个：

```
SELECT id, score, a.type 
FROM (SELECT id, score, a.type, IF(@lasttype = (@lasttype:=a.type), @index:=@index+1, @index:=0) indx 
      FROM tablename t, (SELECT @lasttype:='', @index:=0) AS a 
      ORDER BY TYPE, score DESC) AS a 
WHERE (a.type NOT IN ('A', 'C') OR (a.type IN ('A', 'C') AND indx <= 2)) 
ORDER BY score DESC; 
```

# mocking - Cakephp 1.3 模拟认证

> ID：14161957
> 
> 赞同：3
> 
> 时间：2013-01-04T17:32:58.810
> 
> 标签：mocking, cakephp-1.3, simpletest

我正在尝试编写和测试控制器动作。这是我所拥有的：

```
App::import('Component', 'Auth');
App::import('Controller', 'Goals');

class GoalControllerTest extends CakeTestCase {

    function startCase() {
            echo '<h1>Starting Test Case</h1>';
            $this->Goals = new TestGoalsController();
            $this->Goals->constructClasses();
            $this->Goals->Component->initialize($this->Goals);
    }

    function endCase() {
            unset($this->Goals);
            ClassRegistry::flush();
            echo '<h1>Ending Test Case</h1>';
    }

    function startTest($method) {
            echo '<h3>Starting method ' . $method . '</h3>';
            //$this->GoalsController = new TestGoalsController();
            Mock::generate('AuthComponent');
            $this->Goals->Auth = new MockAuthComponent();
    }

    function endTest($method) {
            echo '<hr />';
    }

    function testSetHomepage() {
            //get goal for test
            $sql = "SELECT id FROM goals limit 1";
            $goal = $this->Goals->Goal->query($sql);
            $this->Goals->params = Router::parse('/goals/setHomepage/');
            $this->Goals->beforeFilter();
            $this->Goals->Component->startup($this->Goals);
            $this->Goals->params['url']['goal_id'] = $goal[0]['goals']['id'];
            $this->Goals->params['url']['set_to'] = 1;
            $this->Goals->setHomepage();

            //Mock Auth
            $this->Goals->Auth->setReturnValue('user', 1);

            //check the set
            $sql = "SELECT GoalOnHome.goal_id FROM goals_users as GoalOnHome WHERE GoalOnHome.goal_id = '" . $this->Goals->params['url']['goal_id'] . "' limit 1";
            $result = $this->Goals->Goal->query($sql);

            $expected = false;
            $this->assertEqual(empty($result), $expected);
            unset($this->Goals->params['url']);
    }
} 
```

我正在尝试模拟身份验证组件，但在运行测试时出现此错误：

`Unexpected PHP error [Undefined property: MockAuthComponent::$enabled] severity [E_NOTICE] in`

有人可以帮我解决我在这里做错的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:13:05.577

我最近遇到了同样的问题。我通过简单地在 Mock 对象上设置属性来修复它。此外，我为 -method 配置了一个返回值`startup`- 否则，模拟身份验证将不起作用。

```
function startTest() {
    // Set up controller etc.
    // ...
    $this->Goals->Auth = new MockAuthComponent();  
    $this->Goals->Auth->enabled = true; // Should solve your error
    $this->Goals->Auth->setReturnValue('startup', true);
} 
```

# java - 使用 Camel 的消息监听器

> ID：14161961
> 
> 赞同：0
> 
> 时间：2013-01-04T17:33:07.203
> 
> 标签：java, spring, apache-camel, enterprise-integration

我试图了解 Camel 如何阅读一些书籍（Camel in Actions）和一些教程，但有些东西我实际上不明白。基本上，每当用户单击网页或进行特定操作时，我都必须处理从 Web 应用程序发送到某些 Rabbit 队列的一些消息。

我将创建一个 Maven 项目并定义一个配置路由来处理这个过程。我的怀疑与该过程的执行有关。如果我理解得很好，当我使用

```
maven camel:run 
```

它创建一个 CamelContext 实例并处理队列。但尚不清楚该进程是否会继续等待队列中的新消息。我是否需要创建一些东西来主动检查队列中的新消息，比如监听器或守护程序，或者可以使用 Spring 对其进行配置？

谢谢你的时间！
安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:58:09.587

如果您的应用程序定义了一个[camel-jms](http://camel.apache.org/jms.html)路由，那么它将在您的队列上创建一个侦听器，该侦听器将一直处于活动状态，直到您终止`maven came:run`进程

有关使用 maven 骆驼插件的更多信息，请参阅此页面：[http ://camel.apache.org/camel-maven-plugin.html](http://camel.apache.org/camel-maven-plugin.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T17:59:46.923

只要上下文启动并运行，并且您已将队列定义为路由的入口点，它就应该继续侦听消息并处理它们。就像是：

```
<camel:camelContext xmlns="http://camel.apache.org/schema/spring" id="echoContext">

       <route id="echoJmsConsumeRoute">
           <from uri="activemq:queue:xxx.xxx.xxx.xxx.testqueue"/>
           <to uri="log:echo?level=DEBUG"/>
       </route>
</camel:camelContext> 
```

如果你杀了 maven 进程，当然 JVM 也会终止。

# c# - ComboBox.SelectedItem 问题 C#

> ID：14161962
> 
> 赞同：0
> 
> 时间：2013-01-04T17:33:09.623
> 
> 标签：c#, combobox, selecteditem, selectedindex

我有一个应用程序，允许用户在其中加载他们之前在表单中所做的选择，然后允许他们保存更改。问题是，当我将项目加载到组合框中并以编程方式更改 selectedIndex 或 selectedItem 时，它不起作用。例如，如果我将 selectedIndex 分配给组合框不会通过 if 语句的第一项，我将检查 selectedIndex 是否为-1。是否有人对如何以编程方式将 selectedIndex 或 selectedeItem 分配给组合框有任何建议，其中项目也以编程方式添加，以便在这种情况下工作。谢谢

```
XmlNode trialNumber = doc.SelectSingleNode(pathString + "/trial");
selectTrialNumberComboBox.SelectedItem = trialNumber.InnerText.ToString();
selectTrialNumber = trialNumber.InnerText.ToString();
selectTrialNumberComboBox.Enabled = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:54:22.287

采用

```
selectTrialNumberComboBox.SelectedIndex = selectTrialNumberComboBox.Items.IndexOf(selectTrialNumberComboBox.Items.FindByText(trialNumber.InnerText.ToString())) 
```

# c# - 如何将自引用表绑定到 WPF TreeView

> ID：14161963
> 
> 赞同：3
> 
> 时间：2013-01-04T17:33:08.983
> 
> 标签：c#, wpf, entity-framework, data-binding, treeview

从 edmx 绑定自引用表的最佳解决方案是什么，例如：

![在此处输入图像描述](../Images/998ec3a043017b0d23ac593f36b98bd4.png)

到 WPF`TreeView`控件有类似的东西：

![在此处输入图像描述](../Images/d2ae335892361f11971ba81eebd74471.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:56:16.353

我用这个解决了这个问题`Binding Converter`：

```
 public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var item = value as MyTable;
        return  item.MyTable1.Where(i => i.parent_id== item.id); //return children
    } 
```

.xaml：

```
<TreeView Name="treeview1" ItemsSource="{Binding Converter={StaticResource HierarchyConverter}}" ItemTemplate="{StaticResource ItemTemplate}" >
      <TreeView.Resources>
            <local:HierarchyConverter x:Key="HierarchyConverter" />
            <HierarchicalDataTemplate x:Key="ItemTemplate" ItemsSource="{Binding Converter={StaticResource HierarchyConverter}}">
                  <TextBlock Text="{Binding element_name}" />
            </HierarchicalDataTemplate>
      </TreeView.Resources>
</TreeView> 
```

。CS ：

```
treeview1.ItemsSource = db.MyTable.Where(x => x.partnt_id== null);//elements that have no parent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T15:14:03.537

[Josh Smith 有一篇关于 Code Project](http://www.codeproject.com/Articles/26288/Simplifying-the-WPF-TreeView-by-Using-the-ViewMode)的优秀文章，它将引导您了解如何制作`TreeView`可以绑定到的视图模型。仅使用 EF 将无法逃脱，因为 EF 不进行递归。

# javascript - 如何合并同一键 javascript 上的数组？

> ID：14161964
> 
> 赞同：2
> 
> 时间：2013-01-04T17:33:09.650
> 
> 标签：javascript

如何在 javascript 中合并这两个对象？

```
h1 = {12: [{actor: 'wayne'}, {actor: 'bill'}], 13: [{actor: 'james'}]}
h2 = {13: [{actor: 'mark'}]} 
```

要得到：

```
result = {12: [{actor: 'wayne'}, {actor: 'bill'}], 13: [{actor: 'james'}, {actor: 'mark'}]} 
```

基本上我想根据对象的键连接数组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T17:36:31.390

你可以这样做：

```
for (var k in h2) {
   h1[k]=(h1[k]||[]).concat(h2[k]);
} 
```

结果对象将是 h1。

[演示](http://jsfiddle.net/n7j5G/)（打开控制台）

如果要保持 h1 不变，请执行以下操作：

```
h3 = {};
for (var k in h1) h3[k]=h1[k].slice();
for (var k in h2) h3[k]=(h3[k]||[]).concat(h2[k]); 
```

# php - Xdebug - 没有配置文件或跟踪输出

> ID：14161965
> 
> 赞同：5
> 
> 时间：2013-01-04T17:33:16.173
> 
> 标签：php, profiling, xdebug, trace

我在尝试使用 Xdebug 进行分析和跟踪时有点不知所措（调试工作正常）。更糟糕的是，我让它在不同的服务器/客户端设置上工作得很好，但我似乎看不出这与使用 localhost 的开发人员工作站有什么区别。也没有任何内容输出到 xdebug.log。

服务器：Ubuntu 10.04、PHP 5.3.2、Xdebug 2.2.1

php.ini：

```
xdebug.profiler_enable=0
xdebug.profiler_enable_trigger=1
xdebug.profiler_append = 1 
xdebug.profiler_output_dir="/var/www/xdebug-profiles"
xdebug.profiler_output_name="xdebug-profile.%t.%p"

xdebug.auto_trace=0
xdebug.trace_enable_trigger=1
xdebug.trace_options = 1 
xdebug.collect_params=4
xdebug.collect_return=1
xdebug.trace_format=2
xdebug.trace_output_dir="/var/www/xdebug-traces"
xdebug.trace_output_name="trace.%t.%p"

xdebug.file_link_format="xdebug://%f@%l"
xdebug.remote_log="/var/www/xdebug.log" 
```

显而易见的答案是“权限！” 不幸的是，我很确定不是这样：

```
# ls -ld /var/www/xdebug-profiles/
drwxrwxrwx 2 www-data www-data 4096 2013-01-02 10:40 /var/www/xdebug-profiles/ 
```

使用 Firebug，我可以看到浏览器中肯定设置了 xdebug cookie 以触发分析和跟踪。但是，即使我在 php.ini 中禁用触发并启用全局，我仍然没有得到任何输出。

有人有想法么？我刚出...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-04T21:00:03.703

啊哈。在玩了一些之后，看到 phpinfo() 中弹出了一些奇怪的东西，看起来“#”在 php.ini 中的注释已被弃用，所以我的 php.ini 中的哈希标记把它炸毁了。用分号替换它们，现在一切都很好。有点棘手，那个...

# c++ - 如何在不使用 C++ 中的友元函数的情况下访问私有变量

> ID：14161966
> 
> 赞同：-1
> 
> 时间：2013-01-04T17:33:16.570
> 
> 标签：c++

```
#include <iostream>

using namespace std;
class Point
    {
    friend void ChangePrivate( Point & );
    public:
    Point( void ) : m_i(0) {}
    void PrintPrivate( void ){cout << m_i << endl; }

private:
int m_i;
};

void ChangePrivate ( Point &i ) { i.m_i++; }

int main()
{
     Point sPoint;
     sPoint.PrintPrivate();
     ChangePrivate(sPoint);
    sPoint.PrintPrivate();
} 
```

这是如何使用友元函数访问私有变量的示例 如何在不使用友元函数的情况下使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:36:11.440

该关键字`friend`专门用于绕过访问控制施加的访问`private`限制`protected`。

如果您想在不使用的情况下访问私有变量`friend`，请将*公共*访问器添加到类本身：这是访问私有变量的最常见和预期的方式：

```
class Point
{
public:
    Point( void ) : m_i(0) {}
    void PrintPrivate( void ){cout << m_i << endl; }
    int getI() {return m_i;}
    void setI(int _i) {m_i = _i;}
private:
    int m_i;
};
...
Point sPoint;
sPoint.setI(sPoint.getI()+1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T17:59:13.100

这是一个符合标准的黑客（[来源](http://bloglitb.blogspot.ro/2010/07/access-to-private-members-thats-easy.html)）：

```
template<typename Tag, typename Tag::type M>
struct Rob { 
  friend typename Tag::type get(Tag) {
    return M;
  }
};

class Point
{
public:
    Point( void ) : m_i(0) {}
    void PrintPrivate( void ){cout << m_i << endl; }
private:
    int m_i;
};

struct Point_f { 
  typedef int Point::*type;
  friend type get(Point_f);
};
template struct Rob<Point_f, &Point::m_i>;

void ChangePrivate ( Point &i ) 
{  
    i.*get(Point_f()) = 4;
} 
```

[ideone 上的样品。](http://ideone.com/rpyuvp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T17:56:49.590

访问控制不适用于显式模板实例化的参数 ( `[temp.explicit]/12`)。这可以被用来为私有成员提供公共访问权限（[由 litb 提供](http://bloglitb.blogspot.com.au/2010/07/access-to-private-members-thats-easy.html)）：

首先是一些设置代码：

```
template<typename Tag>
struct result {
  /* export it ... */
  typedef typename Tag::type type;
  static type ptr;
};

template<typename Tag>
typename result<Tag>::type result<Tag>::ptr;

template<typename Tag, typename Tag::type p>
struct rob : result<Tag> {
  /* fill it ... */
  struct filler {
    filler() { result<Tag>::ptr = p; }
  };
  static filler filler_obj;
};

template<typename Tag, typename Tag::type p>
typename rob<Tag, p>::filler rob<Tag, p>::filler_obj; 
```

现在定义`Point`：

```
class Point
{
public:
    Point() : m_i(0) {}
    void PrintPrivate(){cout << m_i << endl; }
private:
    int m_i;
}; 
```

现在`result<Pointm_i>::ptr`通过显式实例化来填写`rob<Pointm_i, &Point::m_i>`——这是一个显式模板实例化，因此访问控制不适用：

```
struct Pointm_i { typedef int Point::*type; };
template class rob<Pointm_i, &Point::m_i>; 
```

并访问私有成员：

```
void ChangePrivate ( Point &i ) { (i.*result<Pointm_i>::ptr)++; }

int main()
{
     Point sPoint;
     sPoint.PrintPrivate();
     ChangePrivate(sPoint);
     sPoint.PrintPrivate();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T17:38:29.907

```
 void ChangePrivate ( Point &i ) { *(int*)( ((char*)&i) + 0 ) += 1; } 
```

如果适用或自定义计算的偏移量，用 offsetof() 替换 0。

或者类似的东西

```
struct HackPoint
{
  int m_i;
};

void ChangePrivate ( Point &i ) { ((HackPoint*)(void*)&i)->m_i++; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T17:41:40.993

尝试这个

```
*(int*)(&sPoint) += 1; 
```

代替

```
ChangePrivate(sPoint); 
```

但这不是一种好的编码风格，只是为了好玩。

*深入 C++ 对象模型* 这本书详细分析了 C++ 对象模型

# jquery - 无法获取所有 POST Success xml 数据

> ID：14161967
> 
> 赞同：0
> 
> 时间：2013-01-04T17:33:18.037
> 
> 标签：jquery, ajax

我正在尝试获取我的 xml 标记结果并将它们加载到地图上，但是当我发出警报时，我在变量中得到的发布结果是这样的：

> 加载的数据：[对象 XMLDocument]

这就是我的代码的样子：

```
function SendData() {

//get data from inputs

            $.ajax({
                type: "POST",
                url: "MapSearchxml.php",
                data: {
                    dataFromDate: FromDate,
                    //some more data
                    dataHasPatio: HasPatio
                },
                beforeSend: function (html) { // this happens before actual call
                },
                success: function (html) { // this happens after we get results

                alert("Data Loaded: " + html);

                }
            });
} 
```

在 Firebug 中，post 响应如下所示：

> `<markers><marker id="1" lat="48.153938" lng="17.108459" /></markers>`

我尝试将数据类型设置为 xml，如下所示：

```
 success: function (html) { // this happens after we get results
                alert("Data Loaded: " + html);
                }, 
                dataType: 'xml'
            });
} 
```

然而并没有发生任何变化。

这是我的 xml php 代码：

```
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

echo '<markers>';

while ($row = @mysql_fetch_assoc($result)){
  echo '<marker ';
  echo 'id="' . parseToXML($row['ID']) . '" ';
  echo 'lat="' . parseToXML($row['LAT']) . '" ';
  echo 'lng="' . parseToXML($row['LNG']) . '" ';
  echo '/>';
}

echo '</markers>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T18:31:23.433

这就是浏览器在将 XML 对象附加到文本字符串并在警报中显示数据时处理它们的方式。您的 ajax 调用看起来可以正常工作。

您可以尝试更改：

```
 success: function (html) { // this happens after we get results
       alert("Data Loaded: " + html);
    }, 
```

只是：

```
 success: function (html) { // this happens after we get results
       console.log(html);
    }, 
```

并在 JavaScript 控制台中查看对象。或者：

```
 success: function (html) { // this happens after we get results
        var xmlString = (new XMLSerializer()).serializeToString(html);
        alert("Data loaded: " + xmlString);
    }, 
```

# kml - 如何将谷歌代码嵌入谷歌地球气球

> ID：14161969
> 
> 赞同：0
> 
> 时间：2013-01-04T17:33:24.160
> 
> 标签：kml, google-earth, google-code

我正在尝试将 Google 代码，特别是动态图表时间格式嵌入到 Google 地球气球中：[https ://code.google.com/apis/ajax/playground/?type=visualization#motion_chart_time_formats](https://code.google.com/apis/ajax/playground/?type=visualization#motion_chart_time_formats)

有任何想法吗？我将代码复制粘贴到地标描述窗口中，但没有加载。

曼努埃尔·“曼尼”·菲奥尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T14:29:02.183

您必须将 HTML 嵌入描述中的 CDATA 块中，然后才能正常工作。

注意：您还应该向您的 KML 添加一个带有简短描述的*片段元素，这样完整的 HTML 就不会在位置面板中呈现。*

工作示例如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml>
 <Placemark>
  <snippet>Click to see embedded chart</snippet>

  <description>
<![CDATA[
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Google Visualization API Sample</title>
  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
  <script type="text/javascript">
    google.load('visualization', '1', {packages: ['motionchart']});

    function drawVisualization() {

      var time = [['2000W01', '2000W02'],
                  ['2002Q3', '2002Q4'],
                  [1990, 1991],
                  [(new Date(2000, 0, 1)), (new Date(2000, 0, 2))]];

    // ... rest of HTML/javascript truncated
    // full HTML found here:
    // https://code.google.com/apis/ajax/playground/?type=visualization#motion_chart_time_formats

    <div id="visualization" style="width: 800px; height: 400px;"></div>
  </body>
</html>
]]>
    </description>

    <Point>
            <coordinates>-122.087461,37.422069</coordinates>
    </Point>
  </Placemark>
</kml> 
```

可以在此处找到有关 KML 中描述元素（包括限制）的详细信息。 [https://developers.google.com/kml/documentation/kmlreference#description](https://developers.google.com/kml/documentation/kmlreference#description)

# javascript - jQuery 例程可在除 IE10 之外的所有其他浏览器上运行

> ID：14161973
> 
> 赞同：1
> 
> 时间：2013-01-04T17:33:44.433
> 
> 标签：javascript, jquery, html, internet-explorer-10

谁能告诉我为什么下面的代码在 IE10 中不起作用。这适用于所有其他浏览器（甚至 IE9），但 IE10 似乎并不喜欢它。该代码应该通过下拉列表选项检查用户选择并激活相关表单中的相关字段。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Company</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css" type="text/css">   
    <script src="js/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script src="js/script.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            /*Hiding the form */
            $(".install_download").css("display", "none");
            $(".hosted_install").css("display", "none");
            $(".reseller_install").css("display", "none");

            function goToByScroll(id){
                $('html,body').animate({scrollTop: $("#"+id).offset().top},'bottom');
            }

                goToByScroll("country");

                $(".subject_category").change(function(){

                    $(".install_Download").css("display", "none");
                    $(".hosted_install").css("display", "none");
                    $(".reseller_install").css("display", "none");

                    switch ($(".subject_category option:selected").text()) {                
                        case "General Enquiry":
                            $(".General_Enquiry").show("fast");
                            break;
                        case "Install/Download":
                            $(".install_download").show("fast");
                            goToByScroll("message");
                            break;
                        case "Hosted Install":
                            $(".hosted_install").show("fast");
                            goToByScroll("message");
                            break;
                        case "Solution Provider - Install":
                            $(".reseller_install").show("fast");
                            goToByScroll("message");
                            break;
                    }
                });
        });     
    </script>

    <!--[if lt IE 8]> 
        <div style='clear:both; text-align:center; position:relative;'><a href="http://www.microsoft.com/windows/internet-explorer/default.aspx?ocid=ie6_countdown_bannercode"><img src="http://storage.ie6countdown.com/assets/100/images/banners/warning_bar_0000_us.jpg" border="0" alt="" /></a></div>  
    <![endif]-->
    <!--[if lt IE 9]>
        <script type="text/javascript" src="js/html5.js"></script>
        <link rel="stylesheet" href="css/ie.css" type="text/css" media="screen">   
    <![endif]-->
</head> 
```

# javascript - 不太严格的电话正则表达式

> ID：14161984
> 
> 赞同：3
> 
> 时间：2013-01-04T17:34:20.647
> 
> 标签：javascript, regex

我想用 JavaScript 中的正则表达式验证电话号码。

我发现了很多匹配特定模式的表达式，例如`xxx-xxx-xxx`，但我正在寻找一个不太严格的表达式，它只匹配数字和可选的`-`，`,`并且`+`不将数字限制为特定模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T17:37:45.477

好的，那么如何：

```
/^[0-9\-,+]+$/ 
```

或者，如果您也想允许空格：

```
/^[0-9\-,+\s]+$/ 
```

您可能还希望要求电话号码至少有*n*位数字，您可以这样做：

```
/^[\-,+\s]*([0-9][\-,+\s]*){n,}$/ 
```

您需要`n`用所需的最少位数替换 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T17:40:02.320

试试这个：

```
([0-9]{3}[-,+]?){2}[0-9]{4} 
```

[这是在行动](http://regexr.com?33abm)

# javascript - 如何在 JavaScript 中实现 GROWTH 函数

> ID：14161990
> 
> 赞同：9
> 
> 时间：2013-01-04T17:34:39.367
> 
> 标签：javascript, excel, excel-formula

我正在尝试在 JavaScript中实现 Microsoft Excel 的[GROWTH函数。](http://office.microsoft.com/en-us/excel-help/growth-function-HA102753003.aspx?CTT=5&origin=HA102752955)此函数使用现有数据计算预测的指数增长。让它变得棘手的是它必须与多组`known_x's`值一起工作。我找不到任何参考方程。有什么建议么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T19:46:52.247

这是基于[我在 math.SE 的回答](https://math.stackexchange.com/a/270460)和维基百科页面上的[简单线性回归](http://en.wikipedia.org/wiki/Simple_linear_regression)公式的重新实现：

```
function growth ( known_y, known_x, new_x, use_const ) {
    // default values for optional parameters:
    if ( typeof( known_x ) == 'undefined' ) {
        known_x = [];
        for ( var i = 1; i <= known_y.length; i++ ) known_x.push(i);
    }
    if ( typeof( new_x ) == 'undefined' ) {
        new_x = [];
        for ( var i = 1; i <= known_y.length; i++ ) new_x.push(i);
    }
    if ( typeof( use_const ) == 'undefined' ) use_const = true;

    // calculate sums over the data:
    var n = known_y.length;
    var avg_x = 0; var avg_y = 0; var avg_xy = 0; var avg_xx = 0; 
    for ( var i = 0; i < n; i++ ) {
        var x = known_x[i]; var y = Math.log( known_y[i] );
        avg_x += x; avg_y += y; avg_xy += x*y; avg_xx += x*x;
    }
    avg_x /= n; avg_y /= n; avg_xy /= n; avg_xx /= n;

    // compute linear regression coefficients:
    if ( use_const ) {
        var beta = (avg_xy - avg_x*avg_y) / (avg_xx - avg_x*avg_x);
        var alpha = avg_y - beta*avg_x;
    } else {
        var beta = avg_xy / avg_xx;
        var alpha = 0;
    }
    // console.log("alpha = " + alpha + ", beta = " +  beta);

    // compute and return result array:
    var new_y = [];
    for ( var i = 0; i < new_x.length; i++ ) {
        new_y.push( Math.exp( alpha + beta * new_x[i] ) );
    }
    return new_y;
} 
```

[这是 ideone.com 上的演示。](http://ideone.com/4nxukT)您可以将输出与[Excel`GROWTH`文档页面](http://office.microsoft.com/en-us/excel-help/growth-function-HA102753003.aspx)上的演示工作表进行比较。

请注意，算法中求和循环的数值稳定性可以使用诸如 Wikipedia 页面上描述的用于[计算方差](http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance)的技术（如[Kahan 求和](http://en.wikipedia.org/wiki/Kahan_summation_algorithm)）来提高。但是，对于像这样的简单示例，朴素的求和循环已经足够好了。

# asp.net - 如何为 .NET 4.0 集成 SiteMinder SSO 身份验证和 Windows 身份验证？

> ID：14161991
> 
> 赞同：2
> 
> 时间：2013-01-04T17:34:42.850
> 
> 标签：asp.net, .net-4.0, single-sign-on, siteminder

我的问题是，我们有一组运行 SiteMinder 但非常糟糕的遗留代码。它允许在 IIS 上匿名，并避免使用 Active Directory。

我们正在重建此应用程序，并希望将 SiteMinder 与 IIS 和 .NET 4.0 集成。我知道我可以进来并构建自己的安全框架，它不需要用户名和密码（因为我们不希望 SiteMinder 提供），但我想知道是否有办法使用内置的在 Windows 身份验证（窗体或 Windows）中与 SiteMinder 集成。

此外，我看到旧版本的 .NET 具有 Passport 身份验证，但它已被删除。我认为这实际上可能会解决我们的问题，但最新版本的 .NET（IE 1.1 之后）不支持它。

任何和所有关于 SiteMinder 与 ASP.NET 4.0 集成的信息都将受到欢迎。我试图将足够的信息拼接在一起以使其正常工作。

我知道 SiteMinder 返回一组可自定义的标题。我想利用我们有一个包含唯一标识符的经过验证的标头来登录用户的事实，同时使用 Windows 身份验证。任何指导将不胜感激。如果我们可以创建一个集成 SiteMinder 和 ASP.NET 的指南（因为我还没有找到），我真的很喜欢它，但是如果有人知道类似的事情，请把它贴出来！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T15:09:23.270

对于将来来到这里并需要帮助的任何人，这里有几个有用的链接。

通过 SitMinder 获得的关于安全性的好[博客](http://www.coreblox.com/2011/09/setting-the-windows-security-context-with-siteminder/)。

这个论坛是专门为 SSO 设置的。[http://www.ssohelp.com](http://www.ssohelp.com)

如果您正在寻找有关 SSO 的信息，这应该可以帮助您入门，并且还可以为您提供一个可以找到一些更具体答案的地方。

# django - 在 django 中结合 order_by 和 distinct

> ID：14161993
> 
> 赞同：1
> 
> 时间：2013-01-04T17:35:14.180
> 
> 标签：django, postgresql, sql-order-by, distinct

大家好，

我读了很多关于它的内容，我可以理解缺少这样的实现，但我不明白为什么我不能用 Django 模拟 SELECT (SELECT DISTINCT[...]) ORDER BY 的行为.

我知道如果没有 ORDER BY 子句中的列，PostgreSQL 不支持 DISTINCT ON。但是我可以通过对 DISTINCT 的子选择执行 ORDER BY 来达到我想要的结果。我想在 Django 中做同样的事情，因为在这种情况下性能没有问题。但是 Django QuerySets（太）懒了。

我很想能够运行这个：

```
b = Backup.objects.filter(state__iexact='up').distinct('md5_checksum').order_by('-create_date', '-title') 
```

或者至少是这样的：

```
b = Backup.objects.filter(state__iexact='up').distinct('md5_checksum')
if b.count() > 6:
    b = b.order_by('-create_date', '-title') 
```

但不幸的是，即使尝试通过 count() 调用强制执行第一个查询，它也会尝试在同一查询中执行 distinct 和 order_by，但失败了。

因此，基于[此](https://stackoverflow.com/questions/11230124/django-order-by-with-distinct-using-postgres)，我必须回到 python 排序来做同样的事情：

```
b = sorted(b, key=lambda x: (x.create_date, x.title), reverse=True) 
```

如果有人有更优雅的解决方案，一种强制 Django 提交第一个 SELECT DISTINCT 的方法，我会很高兴拥有它。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T17:44:35.140

在该`order_by`方法中，您可以尝试添加`'md5_checksum'`为第一个参数。这可能有助于它正确订购，除非我误解了这个问题。

# php - 从 MySQL 数据库中删除字符

> ID：14161999
> 
> 赞同：0
> 
> 时间：2013-01-04T17:35:46.527
> 
> 标签：php, mysql

对不起 - 我是一个完全的新手，所以非常感谢任何帮助。

我在 mysql 数据库的一列（texty3）中有大约 30,000 个条目，需要删除某些字符/单词：

具体来说，

任何少于 3 个字符的单词。任何非大写单词。任何非字母数字。

我想知道是否有一个mysql命令？

我有人为将来通过 php 上传的脚本编写了一个脚本，看起来像这样，

```
function getmtext($str) {
    $text = '';
    $words = str_word_count($str, 1);
    foreach ($words as $word) {
        if ($word[0] >= 'A' && $word[0] <= 'Z') 
            if (strlen($word)>3) 
                $text .= $word.' ';
    }
    return $text;
} 
```

但我不知道如何编辑已经存在的条目。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:52:25.350

您可以使用相同的脚本来更新 SQL 中的条目，没有办法（我知道）按照您的要求使用纯 SQL 进行操作。

也就是说，您可以从数据库中检索数据（使用 mysql 函数），修改信息并将其返回到数据库。

为了争论，如果您在本地拥有数据库，名为 test 且没有密码以 root 身份登录，您可以使用以下内容：

```
function getmtext($str) {
    $text = '';
    $words = str_word_count($str, 1);
    foreach ($words as $word) {
        if ($word[0] >= 'A' && $word[0] <= 'Z') 
        if (strlen($word)>3) 
            $text .= $word.' ';
    }
    return $text;
}

//set the database parameters
$dbHost = "localhost";
$dbUser = "root";
$dbPass = "";
$dbName = "test";

//create the database connection
$dbConn = mysql_connect ($dbHost, $dbUser, $dbPass) or die ('MySQL connect failed. ' . mysql_error());
mysql_select_db($dbName) or die('Cannot select database. ' . mysql_error());

//sql to get all texty3 rows from table
$sql = "select id, texty3 from testtable";
$query = mysql_query($sql); //run the sql
while($result = mysql_fetch_assoc($query)) { //loop through each row
     $rowId = $result['id'];
     $text = $result['texty3'];
     $cleansedText = getmtext($text);
     mysql_query("update testtable set texty3 = '$cleansedText' where id = '$rowId';");
} 
```

这将通过数据库并使用该函数删除所有与函数中定义的参数不匹配的单词。（抱歉，我现在无法检查此代码，但它应该是正确的或至少接近）