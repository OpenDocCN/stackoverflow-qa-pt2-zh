# StackOverflow 问答 15950000-15950999

# svn - trac 和 subversion - 使用 subversion 向工单添加评论

> ID：15950000
> 
> 赞同：0
> 
> 时间：2013-04-11T13:25:19.390
> 
> 标签：svn, trac

有人可以帮我处理 Apache Subversion 和 Trac 吗？

当我提交更改并说“消息关闭 #123”时，我的消息将显示在实际票证中并显示它已被修复。

我还想发生的是，如果我想对文件进行一些更改但问题尚未解决，那么我希望将我的消息添加到实际票证中。

票务评论：comment:1:ticket:2 ----- 不工作！

当我检查我的时间线时，我可以看到我的 REV，上面是票证的链接，但我没有在票证中看到我的消息作为评论。

请问如何启用此功能或使其与示例一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:36:32.163

显然您已经正确配置了 TicketCommitUpdater。你需要的，只是一个神奇的词。这是一个：

```
refs 
```

例子：

```
This is a changeset message, refs #123. 
```

将在最后一个评论下方创建一个新评论。无需尝试参考评论。这是做不到的。但是无论如何，将作为前缀添加到消息的变更集的反向链接应该就足够了。

您（还）没有问，但当然您可以将两者混合使用：

```
This is another changeset, refs #42, #69 and #121, closes #124. 
```

还有更多，只需查看该[Trac 组件的参考文档](http://trac.edgewall.org/wiki/CommitTicketUpdater#Usage)即可。

# css - Centering floated images in div

> ID：15950007
> 
> 赞同：2
> 
> 时间：2013-04-11T13:25:35.577
> 
> 标签：css, css-float, centering

I'm trying to center floated images on my page, but I can't get it to work. Here is my code

```
.imcontainer {
    text-align:center;
    display:inline-block;
}.float {
    float: left;
    font-size: small;
    height: auto;
    margin: 5px 7px 0 3px;
    width: auto;
} 
```

### HTML

```
<div class="imcontainer">
    <div class="float"><img width="70px" height="70px" src="image.jpg"></div>
    <div class="float"><img width="70px" height="70px" src="image.jpg"></div>
    <div class="float"><img width="70px" height="70px" src="image.jpg"></div>
    <div class="float"><img width="70px" height="70px" src="image.jpg"></div>
    <div class="float"><img width="70px" height="70px" src="image.jpg"></div>
</div> 
```

How can I fix this problem?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:35:38.153

您可以将容器居中并内联阻止子项以实现所需的布局。

```
.imcontainer {
    text-align:center; /* center everything in the container */
}

.float { /* not really float any more so best to rename this */
    display:inline-block; /* so the children on the same line */
    font-size: small;
    height: auto;
    margin: 5px 7px 0 3px;
    width: auto;
} 
```

我肯定也会更正 HTML 以使其有效

```
<div class="imcontainer">
    <div class="float"><img width="70" height="70" alt="" src="image.jpg"/></div>
    <div class="float"><img width="70" height="70" alt="" src="image.jpg"/></div>
    <div class="float"><img width="70" height="70" alt="" src="image.jpg"/></div>
    <div class="float"><img width="70" height="70" alt="" src="image.jpg"/></div>
    <div class="float"><img width="70" height="70" alt="" src="image.jpg"/></div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:35:38.807

**我想你想要这样**

[http://jsfiddle.net/JZxxG/](http://jsfiddle.net/JZxxG/)

**你的 CSS**

```
.imcontainer {
    text-align: center;
    display: inline-block;
    width: 100%
}
.float {
    float: left;
    font-size: small;
    height: auto;
    width: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:05:52.417

@andyb 给出了一个完美的解决方案，但是如果您仍然不满意，您可以尝试添加`display: table-cell; text-align: center;`到 your`float`中，而不是添加到 your`imcontainer`中，如果您想要一些差距，请添加`padding value`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:31:21.323

尝试这个：

```
.float {
    float: left;
    font-size: small;
    height: auto;
    margin: 5px 7px 0 3px;
    width: 100px;
    text-align: center;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T13:35:08.680

使用这个 CSS：

```
.imcontainer {
    text-align: center;
}
.float {
    display: inline-block;
    font-size: small;
    height: auto;
    margin: 5px 7px 0 3px;
    width: auto;
} 
```

# android - 使用 Android 主题更改应用程序宽字体大小

> ID：15950010
> 
> 赞同：6
> 
> 时间：2013-04-11T13:25:36.597
> 
> 标签：android

是否可以在 Android 应用程序上使每一点文本都变大，模仿在全局设置屏幕中更改默认字体大小时发生的情况？我希望用户在设置屏幕中选择字体大小并更改所有文本，而无需在我的各个屏幕上放置额外的样式标签。

到目前为止，我有三个主题可以正确更改`TextView`'s 的字体大小，但不能更改`EditText`, 或`ListView`元素之类的字体大小

```
<style name="AppThemeSmall" parent="AppTheme">
    <item name="android:textViewStyle">@android:style/TextAppearance.Small</item>
    <item name="android:textAppearance">@android:style/TextAppearance.Small</item>
</style>

<style name="AppThemeMedium" parent="AppTheme">
    <item name="android:textViewStyle">@android:style/TextAppearance.Medium</item>
    <item name="android:textAppearance">@android:style/TextAppearance.Medium</item>
</style>

<style name="AppThemeLarge" parent="AppTheme">
    <item name="android:textViewStyle">@android:style/TextAppearance.Large</item>
    <item name="android:textAppearance">@android:style/TextAppearance.Large</item>
</style> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T10:37:24.847

我最终为 xml 添加了样式，这样感觉更干净，而且我有更多的控制权。

每个布局 xml（包括 EditText、AutoCompleteTextView）

```
 <TextView
   style="?textTitle"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:text="@string/ref" /> 
```

attrs.xml

```
<attr name="textTitle" format="reference" /> 
```

styles.xml（请注意，我也覆盖了微调器样式以保持大小一致

```
<style name="AppTheme.Small">
    <item name="textTitle">@style/small_title_text</item>
    <item name="android:spinnerItemStyle">@style/spinner_small</item>
</style>

<style name="AppTheme.Medium">
    <item name="textTitle">@style/medium_title_text</item>
    <item name="android:spinnerItemStyle">@style/spinner_medium</item>
</style>

<style name="AppTheme.Large">
    <item name="textTitle">@style/large_title_text</item>
    <item name="android:spinnerItemStyle">@style/spinner_large</item>
</style>

<!-- SMALL FONT SIZE -->
<style name="small_title_text">
    <item name="android:textSize">15sp</item>
    <item name="android:textStyle">bold</item>
</style>

<!-- MEDIUM FONT SIZE -->
<style name="medium_title_text">
    <item name="android:textSize">19sp</item>
    <item name="android:textStyle">bold</item>
</style>

<style name="medium_list_text"></style>

<!-- LARGE FONT SIZE -->
<style name="large_title_text">
    <item name="android:textSize">23sp</item>
    <item name="android:textStyle">bold</item>
</style>

<style name="large_list_text"></style>

<!-- SPINNER STYLES -->
<style name="spinner_small">
    <item name="android:textSize">17sp</item>
    <item name="android:paddingTop">0dip</item>
</style>

<style name="spinner_medium">
    <item name="android:textSize">21sp</item>
    <item name="android:paddingTop">0dip</item>
</style>

<style name="spinner_large">
    <item name="android:textSize">25sp</item>
    <item name="android:paddingTop">0dip</item>
</style> 
```

然后我在创建每个活动之前设置主题。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    PreferenceHelper mPrefs = PreferenceHelper.getInstance(this);
    setTheme(mPrefs.getTheme());
    setContentView(R.layout.activity_list); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:39:22.210

创建您自己的自定义小部件，该小部件从基本小部件扩展而来。在初始化期间，从共享首选项中检索字体设置。我猜你会把它存储在那里，当设置改变时。在初始化期间，小部件的 textsize 设置为存储的设置。在代码中：

```
public class MyCustomTextView extends TextView {

    public MyCustomTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context, attrs);
    }   

    public MyCustomTextView(Context context) {
        super(context);
        init(context, null);
    }

    private void init(Context context, AttributeSet attrs) {

        float size = .... // retrieve from your shared preferences
        setTextSize(size);
    }
} 
```

这样，您可以扩展所有具有 textsize 属性的小部件并在初始化期间对其进行更改。

# javascript - Javascript/HTML5 Geolocation using external js file

> ID：15950013
> 
> 赞同：-1
> 
> 时间：2013-04-11T13:25:47.207
> 
> 标签：javascript, html, geolocation, w3c-geolocation

I've just started experimenting with Geolocation in web pages.

I've found the useful code snippet on W3Schools ([http://www.w3schools.com/html/html5_geolocation.asp](http://www.w3schools.com/html/html5_geolocation.asp)) which works.

What I'm a bit perplexed about though, is that IF i put the block (minus the tags) in a separate .js file, call the js file in the of my page, the code doesn't work at all. Why is this?

I'd like to have the final working code in its own .js file tht I can reference from any page.

The js file is in the same folder as the htm/php file

As soon as I revert the script into the body of my page, it works. Could someone help me understand the cause for this please? (If it makes a difference, I'm using Firefox 20

* * *

**index.php**

```
<!DOCTYPE html>
    <html>
    <head>
    <script type="application/javascript" src="geo.js"></script>

    <title>
        TEST 3: GeoLocation
    </title>
    </head>
    <body>
    <p id="demo">Click the button to get your coordinates:</p>
    <button onclick="getLocation()">Try It</button>
    </body>
</html> 
```

**geo.js**

```
var x=document.getElementById("demo");

function getLocation(){
if (navigator.geolocation){
    navigator.geolocation.getCurrentPosition(showPosition);
}
else{
    x.innerHTML="Geolocation is not supported by this browser.";
}
}

function showPosition(position){
x.innerHTML="Latitude: " + position.coords.latitude + 
"<br />Longitude: " + position.coords.longitude;    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T11:35:12.550

我有同样的问题。变量 x 始终为空。我认为这是因为当您将外部 js 文件添加到标头时，局部变量 x 为空，因为它引用的元素尚未创建。

尝试添加

`<script type="text/javascript" language="javascript"> x = document.getElementById("demo"); </script>`

到 ID 为“demo”的元素下方的主体。

它对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:59:30.373

# c# - 数据绑定到列表无法正常工作

> ID：15950014
> 
> 赞同：0
> 
> 时间：2013-04-11T13:25:47.927
> 
> 标签：c#, asp.net, data-binding, drop-down-menu

我正在将一些数据数据绑定到 asp.net c# 中的下拉列表。使用下面的代码绑定数据时出现以下错误。从我的眼睛看一切都很好，但我可以弄清楚。这是奇怪的部分，页面在开发环境中运行时运行良好，但当我们在测试环境中运行时，它会报错。有什么建议么？

![在此处输入图像描述](https://i.stack.imgur.com/d0MKE.png)

页面加载：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (QSReturnHeaderID == Guid.Empty && !User.IsInRole("Returns_Edit") )
            Response.Redirect("ReturnsSearch.aspx");

        //Link the branch image to the branch list
        imgBranch.LinkControl = lstBranchPlant;

        //CompanyImageScript();
        if (!this.Page.IsPostBack)
        {
            lstBranchPlant.DataBind();
            lstReasonCode.DataBind();

            if (this.QSReturnHeaderID == Guid.Empty)
            {
                sm.SetStage("HeaderEntry");

            }
            else
            {
                LoadReturnHeader();

            }                
            LoadShipToAddressNumbers();
            LoadTradingPartnerIDs();
        }
    } 
```

数据绑定代码：

```
private void LoadTradingPartnerIDs()
{
    BCCR.Data.ReturnsData data = new BCCR.Data.ReturnsData();
    DataSet r = data.ReturnsTradingPartnerID_GetList();
    lstTradingPartnerID.DataSource = r;
    lstTradingPartnerID.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:46:44.583

您的方法中出现“*未设置对象实例的对象引用*”错误`LoadTradingPartnerIDs`。这*总是*意味着您正在尝试对未实例化的对象（已声明但未初始化的对象）执行某些操作。

您显示的堆栈跟踪表明它位于 ReturnsMaint.aspx.cs 的第 331 行。虽然我无法准确说出您的代码片段中的哪一行，但您当然应该能够在您的 IDE 中 =)

话虽如此，对于导致错误的原因，该方法只有两种可能性：

1.  `data.ReturnsTradingPartnerID_GetList();`正在返回 null 或空的 DataSet 对象。这似乎是最有可能的罪魁祸首。这将导致“r”成为您未实例化的对象，因此尝试将其绑定到您的数据绑定控件将导致此错误。
2.  `lstTradingPartnerID`尚未初始化（似乎非常不可能，因为这是从 Page_Load 调用的）。

由于您说它在开发中有效，但在测试中无效，因此我将确保您具有适当的访问权限，可以从测试中的数据存储中获取数据。无论在“幕后”发生什么`ReturnsTradingPartnerID_GetList();`，请确保您使用正确的连接字符串等来访问生成返回列表的数据存储。真正的问题在*那个*兔子洞的某个地方。

# android - 从 Android RenderScript 获取计算值

> ID：15950019
> 
> 赞同：2
> 
> 时间：2013-04-11T13:26:04.777
> 
> 标签：android, renderscript

我试图从 [1] 中制作源示例，因为我想使用数据类型“整数”将数据从 Java 交换到 Renderscript，反之亦然。此示例中的所有内容都运行良好，但我无法将数据从 RenderScript 取回 Java。我可以在调试输出中看到计算值，但使用`return mScript.get_numberC();`将返回 0。我也在尝试 [2]，但这也行不通。那么有没有可能在不使用分配的情况下从 RenderScript 接收数据？另一个问题是我如何将 Allocations 2 Integer Arrays 传递给 RenderScript 并在不使用`rsPackColorTo8888(mono)`? 因为我的应用程序与图形无关。

[1][如何使用 Allocations 将数组值传入和传出 Android RenderScript](https://stackoverflow.com/questions/9655346/how-to-pass-array-values-to-and-from-android-renderscript-using-allocations)

[2][如何在renderscript和android框架之间交换数据？](https://stackoverflow.com/questions/13004972/how-to-exchange-data-between-renderscript-and-android-framework)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T20:38:15.877

这实际上是 API 17 中的预期行为；您只能接收 Java 设置的最后一个值。为了将计算值传递回 Java，您必须将它们封装在分配中。

我们正在考虑在即将发布的版本中对此进行更改（从某种意义上说，我现在已经完成了大部分工作:)）。

# javascript - document order for DOM selection method

> ID：15950021
> 
> 赞同：3
> 
> 时间：2013-04-11T13:26:13.520
> 
> 标签：javascript

I know that live NodeList returned by `getElementsByTagName` preserves the document order of elements.

Is it true for `getElementsdByClassName`, `getElementsByName` and `querySelectorAll` methods?

does these method also preserve the document order?

Any DOM/HTML5 W3C standard link would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:29:09.573

是的。所有这些都按文档顺序/树顺序。

*   `getElementsByName`( [DOM Level-2-HTML](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-71555259) ) 返回一个`NodeList`
*   `querySelectorAll`（[选择器 API](http://www.w3.org/TR/selectors-api/#queryselectorall)）返回`NodeList`“按文档顺序”
*   `getElementsByTagName`( [DOM](http://www.w3.org/TR/dom/#dom-document-getelementsbytagname) ) 返回一个`HTMLCollection`
*   `getElementsByClassName`( [DOM](http://www.w3.org/TR/dom/#dom-document-getelementsbyclassname) ) 返回一个`HTMLCollection`

[`HTMLCollection`s](http://www.w3.org/TR/dom/#htmlcollection)和[`NodeList`s](http://www.w3.org/TR/dom/#nodelist)都被指定为

> 元素按[树顺序排序](http://www.w3.org/TR/dom/#concept-tree-order)。

当通过 indizes 访问它们时。NodeList 是否处于活动状态并不重要（当然，与静态 NodeList 中保存的文档顺序相比，实际文档顺序可能会发生变化）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:38:30.147

不，它们的工作方式不同。只有该`getElementsByTagName`方法返回一个实时集合。

该[`getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)方法返回一个`NodeList`对象，该对象是元素的实时集合。

该[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)方法返回一个`NodeList`不是实时集合的对象。

[`getElemendsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)and[`getElementsByName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)方法返回一个不是实时集合的[`HTMLCollection`对象。](https://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html#interface-htmlcollection)

（请注意，不同的文档`getElemenetsByName`指定 a`HTMLCollection`或 a `NodeList`。）

# php - php pdf创建中的致命错误不知道错误是什么

> ID：15950022
> 
> 赞同：0
> 
> 时间：2013-04-11T13:26:19.427
> 
> 标签：php

```
<?php
$pdf=pdf_new();
pdf_open_file($pdf, "test.pdf");
pdf_begin_page($pdf, 595, 842);
$arial = pdf_findfont($pdf, "Arial", "host", 1); 
pdf_setfont($pdf, $arial, 10);
pdf_show_xy($pdf, "There are more things in heaven and earth, Horatio,",50, 750);
pdf_end_page($pdf);
pdf_show_xy($pdf, "than are dreamt of in your philosophy", 50,730);
pdf_close($pdf);
?> 
```

错误是：

```
致命错误：在 /var/www/Sample/sam.php:4 中带有消息“不得在“对象”范围内调用函数”的未捕获异常“PDFlibException”
堆栈跟踪：
#0 /var/www/Sample/sam.php(4): pdf_begin_page(资源 id #2, 595, 842)
#1 {main} 在第 4 行的 /var/www/Sample/sam.php 中抛出

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-20T10:05:31.123

问题是 pdf_open_file() 返回一个被忽略/未检查的错误。

当您尝试执行 pdf_begin_page() 尽管没有有效的打开文件时，PDFlib 会引发异常。

这里是 PDFlib 手册的解释：

PDFlib 应用程序必须遵守某些易于理解的结构规则。例如，您显然在结束文档之前开始了它。PDFlib 使用严格的范围系统强制函数调用的正确排序。范围定义可在 PDFlib 手册中找到（表 1.3）。所有 API 函数描述都指定了每个函数的允许范围。在允许的范围之外调用函数会导致异常。您可以使用 PDF_get_option() 的范围 keward 查询当前范围。

此外，建议使用与 PDFlib 一起提供的当前示例作为起点，在那里您可以看到当前使用的 API 以及正确的错误处理。

一个完整的 PHP 示例如下所示：

```
<?php
/* $Id: hello.php,v 1.20 2013/01/24 16:58:59 rp Exp $
 *
 * PDFlib client: hello example in PHP
 */

try {
    $p = new PDFlib();

    # This means we must check return values of load_font() etc.
    $p->set_option("errorpolicy=return");

    /* all strings are expected as utf8 */
    $p->set_option("stringformat=utf8");

    /*  open new PDF file; insert a file name to create the PDF on disk */
    if ($p->begin_document("", "") == 0) {
        die("Error: " . $p->get_errmsg());
    }

    $p->set_info("Creator", "hello.php");
    $p->set_info("Author", "Rainer Schaaf");
    $p->set_info("Title", "Hello world (PHP)!");

    $p->begin_page_ext(595, 842, "");

    $font = $p->load_font("Helvetica-Bold", "unicode", "");
    if ($font == 0) {
        die("Error: " . $p->get_errmsg());
    }

    $p->setfont($font, 24.0);
    $p->set_text_pos(50, 700);
    $p->show("Hello world!");
    $p->continue_text("(says PHP)");
    $p->end_page_ext("");

    $p->end_document("");

    $buf = $p->get_buffer();
    $len = strlen($buf);

    header("Content-type: application/pdf");
    header("Content-Length: $len");
    header("Content-Disposition: inline; filename=hello.pdf");
    print $buf;

}
catch (PDFlibException $e) {
    die("PDFlib exception occurred in hello sample:\n" .
        "[" . $e->get_errnum() . "] " . $e->get_apiname() . ": " .
        $e->get_errmsg() . "\n");
}
catch (Exception $e) {
    die($e);
}

$p = 0;
?> 
```

# javascript - JavaScript - Image Paths

> ID：15950031
> 
> 赞同：0
> 
> 时间：2013-04-11T13:26:47.207
> 
> 标签：javascript, image, http, url

I have the following JavaScript/HTML code:

```
<head runat="server">
    <title>Home Page</title>
    <script src="Resources/jQuery.js" type="text/javascript"></script>

    <script type="text/javascript">
        function change_image()
        {
            var url = document.getElementById('Change_Image').src;

            if (url == 'http://placehold.it/200x200')
            {
                document.getElementById('Change_Image').src = 'http://placehold.it/100x100';
            }

            else
            {
                document.getElementById('Change_Image').src = 'http://placehold.it/200x200';
            }
        }

        setInterval(change_image, 1000);
    </script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <h1>Welcome to my Website</h1>
            <h2>Below you can find an example of visual cryptography</h2>
            <br />
            <br />
            <div><img id="Change_Image" src="http://placehold.it/200x200" alt="Letter A"/></div>
        </div>
    </form>
</body>
</html> 
```

The code switches between two images every two seconds. The images are stored online.

Now, in my project, I have a folder called Resources, containing two images called Share1.bmp and Share2.bmp.

If I modify the code above to use these two images, nothing works anymore. This is how I am doing it:

```
if (url == '../Resources/Share1.bmp')
            {
                document.getElementById('Change_Image').src = '../Resources/Share2.bmp';
            }

            else
            {
                document.getElementById('Change_Image').src = '../Resources/Share1.bmp';
            }

...
...
<div><img id="Change_Image" src="../Resources/Share1.bmp" alt="Letter A"/></div> 
```

What am I doing wrong? Am I passing the url to the images stored in my project incorrectly?

**EDIT**

When using my images, Share1.bmp is displayed correctly, however the switching does not occur. It seems that the problem is with the URLs in the JavaScript.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:37:58.097

使用 jQuery，您可以将两个图像都放在那里并让它们隐藏显示（切换）。

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

你的html：

```
<div class="someContainer">
 <img class="Change_Image" src="Resources/Share1.bmp" alt="Letter A" />
 <img class="Change_Image" src="Resources/Share2.bmp" alt="Letter B" 
   style="display:none"/>
</div> 
```

你的JavaScript：

```
$(document).ready(function(){
  var toggleImages=function(){
    $(".someContainer").find(".Change_Image").toggle();
    setTimeout(toggleImages,2000);
  }
  toggleImages();
}); 
```

要编写自己的切换实现（仅适用于此特定实例），您可以直接在包含图像的 div 之后添加此 JS：

```
<div class="someContainer" id="myImageContainer">
 <img src="Resources/Share1.bmp" alt="Letter A" />
 <img src="Resources/Share2.bmp" alt="Letter B" 
   style="display:none"/>
</div>
<script type="text/javascript">
 (function(){
   var images= document.getElementById("someContainer")
     .getElementsByTagName("img")
   ,toggleImages=function(){
     for(var i = 0;i < images.length;i++){
       images[i].style.display=(image.style.display==="none")?
         "":"none";
     }
     setTimeout(toggleImages,2000);
   };
   toggleImages();
 })();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:31:30.460

问题很可能是图像的相对路径。尝试将路径更改为（删除 ../）：

/Resources/Share2.bmp 和 /Resources/Share1.bmp

# java - 在java中计算S3对象（文件夹）的大小

> ID：15950032
> 
> 赞同：4
> 
> 时间：2013-04-11T13:26:48.527
> 
> 标签：java, amazon-web-services, amazon-s3, aws-sdk

我在亚马逊 S3 上存储所有类型的文件。在 amazon S3 存储桶中，所有文件都存储在不同的文件夹中，我知道 amazon s3 中没有文件夹的概念。对象仅由它们的键标识。如果我使用“mydocs/personal/profile-pic.jpg”之类的密钥存储任何文件，这意味着将在那里创建两个父文件夹（mydocs 文件夹中的个人文件夹）。

我想计算任何文件夹的大小，如 java 中的“mydocs”。我使用下面给出的代码计算了存储桶的总大小：

```
public long calculateBucketSize(String bucketName) {
long totalSize = 0;
    int totalItems = 0;
    ObjectListing objects = listObjects(bucketName);
    do {
        for (S3ObjectSummary objectSummary : objects.getObjectSummaries()) {
            totalSize += objectSummary.getSize();
            totalItems++;
        }
        objects = listNextBatchOfObjects(objects);
    } while (objects.isTruncated());
    System.out.println("Amazon S3 bucket: " + bucketName + " containing "
            + totalItems + " objects with a total size of " + totalSize
            + " bytes.");

    return totalSize;
} 
```

此方法将返回存储桶总大小。我想计算任何单个文件夹的大小。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-02-15T16:30:59.287

使用 org.apache.hadoop lib 有一个简单的方法

```
 def calculateSize(path: String)(implicit spark: SparkSession): Long = {
    val fsPath = new Path(path)
    val fs = fsPath.getFileSystem(spark.sparkContext.hadoopConfiguration)
    fs.getContentSummary(fsPath).getLength
  } 
```

这个函数可以计算s3、hdfs和本地文件系统的大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T12:29:44.033

对于 Scala 开发人员，这里是使用官方[AWS SDK for Java](http://aws.amazon.com/sdkforjava/)执行 AmazonS3 存储桶内容的***完整扫描和映射的递归函数***

```
import com.amazonaws.services.s3.AmazonS3Client
import com.amazonaws.services.s3.model.{S3ObjectSummary, ObjectListing, GetObjectRequest}
import scala.collection.JavaConversions.{collectionAsScalaIterable => asScala}

def map[T](s3: AmazonS3Client, bucket: String, prefix: String)(f: (S3ObjectSummary) => T) = {

  def scan(acc:List[T], listing:ObjectListing): List[T] = {
    val summaries = asScala[S3ObjectSummary](listing.getObjectSummaries())
    val mapped = (for (summary <- summaries) yield f(summary)).toList

    if (!listing.isTruncated) mapped.toList
    else scan(acc ::: mapped, s3.listNextBatchOfObjects(listing))
  }

  scan(List(), s3.listObjects(bucket, prefix))
} 
```

要调用上述 curried`map()`函数，只需在第一个参数列表中传递已经构造（并正确初始化）的 AmazonS3Client 对象（请参阅官方[AWS SDK for Java API 参考](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/index.html)）、存储桶名称和前缀名称。还传递`f()`要应用的函数以映射第二个参数列表中的每个对象摘要。

例如

```
val tuple = map(s3, bucket, prefix)(s => (s.getKey, s.getOwner, s.getSize)) 
```

将返回该`(key, owner, size)`桶/前缀中的完整元组列表

或者

```
map(s3, "bucket", "prefix")(s => s.getSize).sum 
```

将返回该桶/前缀内容的总大小

您可以像在函数式编程中`map()`通常通过[Monads处理的那样与许多其他函数结合使用](http://en.wikipedia.org/wiki/Monad_%28functional_programming%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:16:21.133

我认为您想获得每个级别的文件夹大小。就像你有一个根文件夹 R-Folder 和两个子文件夹 S1.1-Folder、S1.2-Folder 然后 S1.1-Folder 又有三个子文件夹 S1.1.1-Folder、S1.1.2-Folder、S1。 1.3 文件夹。现在你想要每个文件夹的文件夹大小

```
R-Folder (32MB)
|__S1.1-Folder (22MB)
|  |__S1.1.1-Folder (7MB)
|  |__S1.1.2-Folder (5MB)
|  |__S1.1.3-Folder (10MB)
|
|__S1.2-FOlder (10MB) 
```

我对么 ？

您必须保留状态为 isCompleted 的列表文件夹详细信息 - 并递归扫描每个文件夹。并且当内部文件夹成功完成时，您必须更新其相应父级的大小，并且该父级将更新到相应的父级，并且每次都会持续到根目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-09T07:55:15.547

陷入同样的​​问题，简单的解决方案是使用：

```
 ObjectListing objects = listObjects(bucketName,prefix); 
```

其中前缀是您的文件夹名称。

有关更多信息，请参阅此链接：

[http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/ObjectListing.html](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/ObjectListing.html)

[http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3Client.html](http://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3Client.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-30T10:54:33.803

对于 Java AWS SDK V2，下面是一个示例：

```
 public Long getFolderSize(String bucket, String prefix) {
    ListObjectsV2Request request =
        ListObjectsV2Request.builder().bucket(bucket).prefix(prefix).build();
    ListObjectsV2Iterable list = s3Client.listObjectsV2Paginator(request);
    long totalSize = 0;
    long numberItems = 0;
    for (S3Object object : list.contents()) {
      totalSize += object.size();
      numberItems++;
    }
    logger.info(
        "The size of the folder {}, is {} bytes, number of items {}",
        bucket + prefix,
        totalSize,
        numberItems);
    return totalSize;
  } 
```

# c# - WPF 中的 XML 序列化 - 非常长的 XML

> ID：15950034
> 
> 赞同：0
> 
> 时间：2013-04-11T13:26:49.827
> 
> 标签：c#, wpf, xml, xml-parsing

我有一个从系统 (OTA) 获得的大字符串，其中包含系统中的所有用户。

该字符串很长（如果我将其保存为文件，则大约为 9MB），当我尝试将其加载到 xml 时，我得到： `"Invalid URI: The Uri string is too long."`**（XDocument）**

或者

`"hexadecimal value 0x14, is an invalid character. Line 2, position 604946"` **（XML 文档）**

我只需要这个 XML（字符串）中的用户名，有人对解决方法有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:23:43.557

我使用带有流的序列化来解决文件大小的问题:) 所有助手的 10 倍 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:51:36.040

我猜您正在尝试使用`Load(string)`字符串为文档 uri 的位置加载文档。尝试改用静态方法`Parse`。

# image - contourf: plot unordered data

> ID：15950035
> 
> 赞同：0
> 
> 时间：2013-04-11T13:26:51.550
> 
> 标签：image, matlab, matlab-figure, contour

I have an unordered array of size 3xN, and I want to plot a contourf plot of the data. When I try

```
contourf(pnts(1,:),pnts(2,:),pnts(3,:)); 
```

Matlab gives error. I can see that `contourf` doesn't want 1xN arrays, it prefers matrices to draw. How can I rearrange my data so it can fit into `contourf`? I don`t seem to achieve it.

I actually don't seem to get how should the data be ordered for `contourf`. Any hint would be appreciated. My data can be similar to the one found in [**this**](https://stackoverflow.com/questions/15647727/contourf-and-nans-how-to-make-white-regions-transparent) post, but I dont know what shape will it have. Image of post:

![enter image description here](https://i.stack.imgur.com/XSytC.jpg)

My problem resides in not having a predefined shape. All the examples I found star with a `meshgrid` of x and Y and then they get Z values, but my X and Y values can be named "bounded random". I know that they are not bigger than a size, but I dont know more about it.

**EDIT** data: [http://pastebin.com/uUxJzttw](http://pastebin.com/uUxJzttw) You can directly copy-paste it into Matlab and it will be saved as variable.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:04:22.583

`contourf(X,Y,Z)`要求输入 X 和 Y 单调递增，您可以使用`griddata`将分散的数据点转换为网格上的一组点：

```
N = 20;
xq = [0:1/N:1] * (max( data(1,:) )-min( data(1,:) )) + min( data(1,:) );
xq = repmat( xq, [1 N] );
yq = [0:1/N:1]' * (max( data(2,:) )-min( data(2,:) )) + min( data(2,:) );
yq = repmat( yq, [N 1] );
vq = griddata(data(1,:),data(2,:),data(3,:),xq,yq);
contourf(xq, yq, vq); 
```

我用 N=20 和 30 尝试了你的数据。N=20 花了我大约 20 秒，而 N=30 就像 1-2 分钟。

# android - deleting an item from listview (using sqlite) results in only removing it from listview.Can't delete it from database

> ID：15950040
> 
> 赞同：0
> 
> 时间：2013-04-11T13:27:00.813
> 
> 标签：android, sqlite, listview

When I try to delete an item in list view ,it removes it from list view but when I add a new item or run the application again the items is still there.I can't delete it from database.

I am using this code:

```
...
SqlHandler sqlHandler;
ListView myListView;
myAdapter adapter;
ArrayList<myItems> items;
 ...
 myListView = (ListView) findViewById(R.id.myListView);
 sqlHandler = new SqlHandler(this);
 items = getItemsFromDatabase();

adapter = new myAdapter(this, items);
myListView.setAdapter(adapter);
myListView.setOnItemLongClickListener(this);
 ...
public boolean onItemLongClick(AdapterView<?> adapterView, View view,
        int position, long id) {

    final myItems selectedItem = items.get(position);

    if (selectedItem != null) {
        AlertDialog.Builder alt_bld = new AlertDialog.Builder(this);
        alt_bld.setMessage("Do you want to delete this item?")
                .setCancelable(false)
                .setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {

                                sqlHandler=new SqlHandler(getApplicationContext());
                                sqlHandler.deleteRecord(id);
                                items.remove(selectedItem);
                                adapter.notifyDataSetChanged(); 
```

For the database I use :

```
public class SqlHandler {
    public static final String DATABASE_NAME = "MY_DATABASE";
    public static final String DATABASE_TABLE = "MEM";
    public static final String KEY_ROWID = "_id";

        public static final int DATABASE_VERSION = 1;
            Context context;
            SQLiteDatabase sqlDatabase;
            SqlDbHelper dbHelper;

            public SqlHandler(Context context) {

                 dbHelper = new SqlDbHelper(context, DATABASE_NAME, null,
                   DATABASE_VERSION);
                 sqlDatabase = dbHelper.getWritableDatabase();
                }

    public void executeQuery(String query) {
     try {

      if (sqlDatabase.isOpen()) {
       sqlDatabase.close();
      }

      sqlDatabase = dbHelper.getWritableDatabase();
      sqlDatabase.execSQL(query);

     } catch (Exception e) {

      System.out.println("DATABASE ERROR " + e);
     }

}

        public Cursor selectQuery(String query) {
         Cursor c1 = null;
         try {

          if (sqlDatabase.isOpen()) {
           sqlDatabase.close();

          }
          sqlDatabase = dbHelper.getWritableDatabase();
          c1 = sqlDatabase.rawQuery(query, null);

         } catch (Exception e) {

          System.out.println("DATABASE ERROR " + e);

         }
         return c1;

}
        public SqlHandler open() throws SQLException
        {
            sqlDatabase = dbHelper.getWritableDatabase();
        return this;
        }

        public void Close(){
            dbHelper.close();

        }
        public void  deleteRecord(long rowId){
            try {
             sqlDatabase.delete(DATABASE_TABLE,KEY_ROWID + "="+rowId,null);
            }
            catch (Exception e)
            {
                Log.e("DB ERROR", e.toString());
                e.printStackTrace();
            }
        } 
```

and

```
public class SqlDbHelper extends SQLiteOpenHelper {
public static final String DATABASE_TABLE = "MEM";

public static final String TAG="DbHandler";

 public static final String KEY_ROWID = "_id";
 ...

 private static final String SCRIPT_CREATE_DATABASE = "create table "
   + DATABASE_TABLE + " (" + KEY_ROWID
   + " integer primary key autoincrement, " + ....);";

 public SqlDbHelper(Context context, String name, CursorFactory factory,
   int version) {
  super(context, name, factory, version);
  // TODO Auto-generated constructor stub

 }

 @Override
 public void onCreate(SQLiteDatabase db) {
  // TODO Auto-generated method stub
  db.execSQL(SCRIPT_CREATE_DATABASE);

 }

 @Override
 public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
  // TODO Auto-generated method stub
     Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
             + newVersion + ", which will destroy all old data");
  db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
  onCreate(db);
 } 
```

----------UPDATE---------------------

It should be sth like:

```
myItems theItems =(myItems)adapterView.getItemAtPosition(button_id);
String _id = theItems.getID();
String delQuery = "DELETE FROM MEM WHERE _id='"+_id+"' ";
sqlHandler.executeQuery(delQuery); 
```

but I have a problem with the (myItems)adapterView.. I am not sure how to handle this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:16:45.923

你遇到的问题是你的方法删除的调用，它应该是这样的：

```
public long deleteItem(myItems itemToDelete) {
    try {
             return sqlDatabase.delete(DATABASE_TABLE,COLUMN_ID + " = ?",new String[]{itemToDelete.getID()});
            }
            catch (Exception e)
            {
                Log.e("DB ERROR", e.toString());
                e.printStackTrace();
                return -1;
            }
} 
```

当您按`YES` `Button`of`AlertDialog`确认删除时，您应该从数据库中删除该项目，然后从数据库中重新加载项目并通知您的列表适配器以使用新数据刷新它：

```
myItems selectedItem = adapter.getItem(position);
long rows = sqlHandler.deleteItem(selectedItem);
if(rows>0) {
    //get new items from database 
    adapter.setItems(getItemsFromDatabase());
    adapter.notifyDataSetChanged();
} 
```

该项目将从数据库中删除，并将`listView`用新数据刷新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:36:58.713

我相信错误在这里：

```
 new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int id) { //<--- rename this to buttonId
          sqlHandler=new SqlHandler(getApplicationContext());
          sqlHandler.deleteRecord(id);  //<---- This "id" is the button that was clicked, not your item ID 
```

我想你想使用*另一个* `id`变量，但即使那样，我也不确定那是你真正想要的那个（它可能是）。从您的代码中，我无法快速分辨出真实 ID 在哪里。

# javascript - 带有条纹列的 HighCharts 列

> ID：15950045
> 
> 赞同：2
> 
> 时间：2013-04-11T13:27:19.757
> 
> 标签：javascript, highcharts

我正在使用 highcharts 来呈现一些数据。我想要一个列有条纹或条纹的柱形图。请有人可以帮助我了解如何实现这一目标。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:57:35.593

您可以使用模式：

图片：http: [//jsfiddle.net/VmxPQ/](http://jsfiddle.net/VmxPQ/)

```
 var r = chart.renderer,
        pattern = r.createElement('pattern')
            .attr({
                id: 'pattern',
                patternUnits: 'userSpaceOnUse',
                x: 0,
                y: 0,
                width: 15,
                height: 15,
                viewBox: '0 0 10 10',
            })
            .add(r.defs);

   r.rect(0, 0, 10, 10, 0)
       .attr('fill', '#ddd')
       .add(pattern);

   r.image('http://highcharts.com/demo/gfx/sun.png',0,0,30,30)

       .attr({
           stroke: '#333'
       })
       .add(pattern);

    pattern = r.createElement('pattern')
        .attr({
            id: 'pattern2',
            patternUnits: 'userSpaceOnUse',
            x: 0,
            y: 0,
            width: 15,
            height: 15,
            viewBox: '0 0 10 10',
        })
        .add(r.defs);

   r.rect(0, 0, 10, 10, 0)
       .attr('fill', '#eee')
       .add(pattern);

    //hover status
    r.image('http://highcharts.com/demo/gfx/sun.png',0,0,30,30) 

       .attr({
           stroke: '#666'
       })
       .add(pattern); 
```

# android - Android PlusClient 实现 & 获取令牌

> ID：15950054
> 
> 赞同：5
> 
> 时间：2013-04-11T13:27:37.207
> 
> 标签：android, google-api, oauth-2.0, google-plus

[所以我实现了谷歌加登录到我的应用程序......我的实现非常接近这里](https://gist.github.com/ianbarber/5170508)给出的例子。我和他最大的不同是我需要更大的范围。在构建我的 plusclient 时，我指定了以下范围：

```
 "https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/plus.me https://www.google.com/m8/feeds https://www.googleapis.com/auth/userinfo.email" 
```

稍后在我的 onConnected 方法中，我尝试从我的会话中获取一个访问令牌，以便传递给我们的服务器，在那里我们进行真正的肉类和土豆工作。

```
 GoogleAuthUtil.getToken(SplashActivity.this, mPlusClient.getAccountName(), "oauth2: https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/plus.me https://www.google.com/m8/feeds https://www.googleapis.com/auth/userinfo.email") 
```

这确实产生了一个访问令牌。耶！正确的？不。当我们尝试使用这个令牌时，它似乎与我们的应用程序无关。当通过谷歌的 tokeninfo 端点运行令牌时，我们得到了一些类似的东西

```
{
 "issued_to": "608941808256-43vtfndets79kf5hac8ieujto8837660.apps.googleusercontent.com",
 "audience": "608941808256-43vtfndets79kf5hac8ieujto8837660.apps.googleusercontent.com",
 "user_id": "107245641469745809180",
 "scope": "https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.profile https://www.google.com/m8/feeds https://www.googleapis.com/auth/userinfo.email",
 "expires_in": 3577,
 "email": "redacted@email.com",
 "verified_email": true,
 "access_type": "online"
} 
```

issue_to 值与我们的任何客户 ID 都不匹配。根据[这篇博](http://www.riskcompletefailure.com/2013/03/common-problems-with-google-sign-in-on.html)文的最后一部分，谷歌无法将此令牌请求与我们的项目相匹配。但是，在我们的 API 控制台中，我确实有 SHA 指纹用于 android，并且它确实与包名称用分号分隔。没有拼写错误。我已经等了几个小时，看看这是否是传播问题。我还添加了 SHA 指纹等来为我们的调试密钥库创建一个客户端 ID。无论是从 eclipse 中导出签名的 apk 还是直接运行它，我们都会遇到同样的问题。

这让我发疯。我不知道该转向哪里。

例如，当调用

googleapis.com/plus/v1/people/me/people/visible?access_token=TOKEN_HERE&maxResults=100&pageToken=&alt=json&orderBy=best

我明白了

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "accessNotConfigured",
    "message": "Access Not Configured"
   }
  ],
  "code": 403,
  "message": "Access Not Configured"
 }
} 
```

因为无论出于何种原因，谷歌都没有将该令牌与我的项目相关联。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:56:35.953

到目前为止，这是作为 google api 中的一个错误出现的。

如果我取出“ [https://www.google.com/m8/feeds](https://www.google.com/m8/feeds) ”范围，那么一切正常，并且令牌与我们的项目成功关联。如果将“ [https://www.google.com/m8/feeds](https://www.google.com/m8/feeds) ”作为请求的范围包含在内，尽管它会正确提示用户获得该特定权限，但 api 端的一切都会中断。虽然我们在请求这个范围的时候还是会得到一个token，但是这个token并没有和我们的项目相关联。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:40:03.553

```
 String accessToken = GoogleAuthUtil.getToken(getActivity(), plusClient.getAccountName(),    
 "oauth2:" + Scopes.PLUS_LOGIN + " " + Scopes.PLUS_PROFILE + " " + MY_SCOPE); 
```

我的代码有效。也许你在“oauth2:”之后有不必要的标签

# c# - 居中菜单 wpf 的标题

> ID：15950058
> 
> 赞同：2
> 
> 时间：2013-04-11T13:27:49.187
> 
> 标签：c#, wpf, xaml

我有一个包含菜单的 WPF 应用程序。我需要将菜单的标题居中：

```
 <MenuItem Header="_Paramètres" Height="60" Width="188" FontWeight="Bold" FontSize="16" HorizontalContentAlignment="Center"  >
     <MenuItem Header="_Régler" Height="30" Width="188" FontWeight="Bold" FontSize="16" Click="regler_Click_1"  x:Name="regler" Background="#FF150202" HorizontalContentAlignment="Center" />
 </MenuItem> 
```

菜单项居中，但菜单标题不居中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:33:14.877

您应该另外设置`HorizontalAlignment`root 的`MenuItem`。像这样。

```
<MenuItem Header="_Paramètres" Height="60" Width="188" FontWeight="Bold" FontSize="16" 
          HorizontalContentAlignment="Center" HorizontalAlignment="Center" >
    <MenuItem Header="_Régler" Height="30" Width="188" FontWeight="Bold" FontSize="16" 
              Click="regler_Click_1"  x:Name="regler" Background="#FF150202"/>
</MenuItem> 
```

此代码不需要设置`HorizontalAlignment`sub 的。`MenuItems`

您可以在链接中找到有关[Horizo​​ntalAlignment](http://msdn.microsoft.com/de-de/library/system.windows.frameworkelement.horizontalalignment.aspx)和[Horizo​​ntalContentAlignment](http://msdn.microsoft.com/de-de/library/system.windows.controls.control.horizontalcontentalignment.aspx)的更多信息。

**编辑**

好吧（评论中的问答），那么以下内容可能会有所帮助。

```
<MenuItem Header="_Paramètres" Height="60" Width="188" FontWeight="Bold" FontSize="16" 
          HorizontalAlignment="Stretch" HorizontalContentAlignment="Center" >
    <MenuItem Header="_Régler" Height="30" Width="188" FontWeight="Bold" FontSize="16" 
              Click="regler_Click_1"  x:Name="regler" Background="#FF150202"
              HorizontalAlignment="Stretch" HorizontalContentAlignment="Center"/>
</MenuItem> 
```

顺便说一句，您应该创建一个`Style`，以便您可以重复使用这些设置。

**编辑 2**

最后一个想法。如果这不起作用，我将永远不会再使用 XAML 实现 UI。;o)

```
<!-- Declare this as resource -->
<Style x:Key="CenteredTextMenuItem" x:TargetType="MenuItem">
    <Setter Property="HeaderTemplate">
        <DataTemplate>
            <TextBox Text={Binding} HorizontalAlignment="Stretch" 
                     HorizontalContentAlignment="Center" FontSize="16" FontWeight="Bold"/>
        </DataTemplate>
    </Setter>
    <Setter Property="Height" Value="30"/>
    <Setter Property="Width" Value="188"/>
</Style> 
```

用法

```
<MenuItem Header="_Paramètres" Height="60" Style="{StaticResource CenteredTextMenuItem}" >
    <MenuItem x:Name="regler" Header="_Régler" Click="regler_Click_1"  
              Background="#FF150202" Style="{StaticResource CenteredTextMenuItem}"/>
</MenuItem> 
```

# vbscript - 脚本适用于 Windows 7 但不适用于 XP

> ID：15950059
> 
> 赞同：1
> 
> 时间：2013-04-11T13:27:53.760
> 
> 标签：vbscript, windows-xp

下面的脚本用于将 zip 解压缩到不同的文件夹并覆盖现有文件。该脚本在 Windows 7 机器上运行良好，但是当我在 XP 机器上使用它时，它仍然询问我是否要覆盖。我不需要与此脚本进行人工交互。任何帮助将不胜感激。谢谢你。

```
strZipFile = "Location.zip"    'name of zip file
outFolder = "Location output folder" 'destination folder of unzipped files

Set objShell = CreateObject( "Shell.Application" )
Set objSource = objShell.NameSpace(strZipFile).Items
Set objTarget = objShell.NameSpace(outFolder)
intOptions = 4 + 16 + 1024
objTarget.CopyHere objSource, intOptions 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:35:34.777

[文档](http://msdn.microsoft.com/en-us/library/bb787866)说：

> **注意** 在某些情况下，例如压缩 (.zip) 文件，某些选项标志可能会被设计忽略。

在 WinXP 上似乎就是这种情况，因此当您想要强制替换现有文件时，您必须使用不同的方法。例如，您可以将文件提取到临时文件夹，然后将它们复制到实际目标：

```
Set fso = CreateObject("Scripting.FileSystemObject")

'create temporary folder with random name
Randomize
tempFolder = fso.BuildPath(fso.GetSpecialFolder(2), Fix(Rnd * 100000))
fso.CreateFolder tempFolder

strZipFile = "Location.zip"    'name of zip file
outFolder = "Location output folder" 'destination folder of unzipped files

Set objShell = CreateObject( "Shell.Application" )
Set objSource = objShell.NameSpace(strZipFile).Items
Set objTarget = objShell.NameSpace(tempFolder)
objTarget.CopyHere objSource

fso.CopyFolder tempFolder, outFolder, True
fso.DeleteFolder tempFolder, True   'delete temporary folder 
```

# c# - 在 Windows 任务调度程序中运行 C# 脚本？

> ID：15950061
> 
> 赞同：1
> 
> 时间：2013-04-11T13:27:57.640
> 
> 标签：c#

所以我是 C# 和编程新手，刚刚编写了我的第一个 C# 脚本。那么现在我该如何运行它呢？我是否将其保存为 .bat 文件并以这种方式运行？最终，我想安排它通过 Windows 任务调度程序运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:33:40.833

您的意思是 C# 程序，而不是脚本，对吧？只需使用控制台应用程序项目，并从调度程序调用它（可执行文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:32:39.283

如果您更喜欢将 C# 与脚本语言结合使用，这里有一些选项：

*   Powershell：[如何从 C# 运行 PowerShell 脚本](http://www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C)
*   Lua： [用于 C# 的 Lua 包装器？](https://stackoverflow.com/questions/1283641/lua-wrapper-for-c)
*   IronPython：[在 C# 应用程序中嵌入 IronPython](http://www.codeproject.com/Articles/53611/Embedding-IronPython-in-a-C-Application)

# android - 使用后台容器在自定义列表视图上加载动态数据

> ID：15950067
> 
> 赞同：3
> 
> 时间：2013-04-11T13:28:17.867
> 
> 标签：android, android-layout, listview, android-widget

我完全对我的图像列表视图感到困惑。我想在带有背景容器的单行中显示 2 个视频海报和文本视图（检查火车的附加图像）

这是垂直列表视图的单个单元格。

![在此处输入图像描述](https://i.stack.imgur.com/eTlVN.png)

根据视频的数量，我必须显示垂直列表视图，但每行包含 2 个视频海报和视频侧面的文本视图，其中火车引擎图像在开始或结束，反之亦然。

为了实现这个 UI，我编写了一个自定义适配器，在其中我设法通过使用相对布局来显示具有相关图像视图的火车车厢。

但是我如何管理单行上特定项目（行中的特定视频）的点击监听器。以及如何在每行的开头或结尾添加火车图像

这是我的代码的输出。 ![在此处输入图像描述](https://i.stack.imgur.com/oWM4a.png)

这是我的代码

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.main);
    final Context context = CustomAdapterExample.this;
    ListView ls2 = new ListView(context);
// clear previous results in the LV
    ls2.setAdapter(null);        
    // populate
    ArrayList<Device> videos = new ArrayList<Device>();
    Device my_video;
        for (int i=0;i<05;i++) {
            my_video = new Device("video link","Video id");
        videos.add(my_video);
        }
    CustomAdapter lvAdapter =  new CustomAdapter(context, videos);
    ls2.setAdapter(lvAdapter);
    ls2.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> arg0, View arg1,int arg2, long arg3) 
        {
            Toast.makeText(getBaseContext(), "You clicked on "+arg2, Toast.LENGTH_LONG).show();
        }
    });
     setContentView(ls2);
} 
```

这是适配器

```
class CustomAdapterView extends LinearLayout {        
public CustomAdapterView(Context context, Device device) 
{
    super( context );   
    //container is a horizontal layer
     setOrientation(LinearLayout.HORIZONTAL);
    setPadding(0, 6, 0, 6);
    LinearLayout Mainview = new LinearLayout(context);
    LinearLayout.LayoutParams Cellparams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    Mainview.setLayoutParams(Cellparams);
    ImageView firstImageContainer = new ImageView(context);
    ImageView trackImage = new ImageView(context);
    ImageView VideoViewContainer = new ImageView(context);
    TextView firsttext= new TextView(context);
    firsttext.setText("Testing of app");
    firsttext.setTextColor(Color.RED);
    firstImageContainer.setBackgroundResource(R.drawable.wagon); 
    VideoViewContainer.setBackgroundResource(R.drawable.video); 
    RelativeLayout layout = new RelativeLayout(context);
     RelativeLayout.LayoutParams firstContainerParams = new RelativeLayout.LayoutParams(160, 80);
     layout.setLayoutParams(firstContainerParams);
     trackImage.setBackgroundResource(R.drawable.line);
     RelativeLayout.LayoutParams trackRules = new RelativeLayout.LayoutParams(755,5); 
     trackRules.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    RelativeLayout.LayoutParams firstImageContainerParams = new RelativeLayout.LayoutParams(140, 90);
     RelativeLayout.LayoutParams VideoViewContainerParams = new RelativeLayout.LayoutParams(70,60); 
     VideoViewContainerParams.addRule(RelativeLayout.CENTER_VERTICAL);
     VideoViewContainerParams.setMargins(5, 0, 0, 0);
     layout.addView(firstImageContainer, firstImageContainerParams);
     layout.addView(VideoViewContainer, VideoViewContainerParams);
     layout.addView(trackImage, trackRules);
     ImageView secondImageContainer = new ImageView(context);
    ImageView secondtrackImage = new ImageView(context);
    ImageView secondVideoViewContainer = new ImageView(context);
    secondImageContainer.setBackgroundResource(R.drawable.wagon); 
    secondVideoViewContainer.setBackgroundResource(R.drawable.video); 
    RelativeLayout secondLayout = new RelativeLayout(context);
     RelativeLayout.LayoutParams secondContainerParams = new RelativeLayout.LayoutParams(160, 80);
    secondLayout.setLayoutParams(firstContainerParams);
    secondtrackImage.setBackgroundResource(R.drawable.line);
     RelativeLayout.LayoutParams secondtrackRules = new RelativeLayout.LayoutParams(755,5); 
     trackRules.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
    RelativeLayout.LayoutParams secondImageContainerParams = new RelativeLayout.LayoutParams(140, 90);
     RelativeLayout.LayoutParams secondVideoViewContainerParams = new RelativeLayout.LayoutParams(70,60); 
    secondVideoViewContainerParams.addRule(RelativeLayout.CENTER_VERTICAL);
    secondVideoViewContainerParams.setMargins(5, 0, 0, 0);
    secondLayout.addView(secondImageContainer, secondImageContainerParams);
    secondLayout.addView(secondVideoViewContainer, secondVideoViewContainerParams);
    secondLayout.addView(secondtrackImage, secondtrackRules);
     firstContainerParams.addRule(RelativeLayout.ALIGN_LEFT);
     secondImageContainerParams.addRule(RelativeLayout.ALIGN_RIGHT);
    Mainview.addView(layout,firstContainerParams);
    Mainview.addView(secondLayout,secondContainerParams);
    addView(Mainview);
}
     }
  public class CustomAdapter extends BaseAdapter /*implements OnClickListener*/ {
public static final String LOG_TAG = "BI::CA";
private Context context;
private List<videoData> videolist;
public CustomAdapter(Context context, List<Device> videolist ) { 
    this.context = context;
    this.videolist = videolist;
}
public int getCount() {                        
    return videolist.size();
}
public Object getItem(int position) {     
    return videolist.get(position);
}
public long getItemId(int position) {  
    return position;
}
public View getView(int position, View convertView, ViewGroup parent) 
{ 
    Device device = videolist.get(position);
    View v = new CustomAdapterView(this.context, device );  
    return v;
}
} 
```

如果我的实施是错误的，请给我一些指导。图库在 API 17 中已弃用，我无法使用它。

是否可以通过使用 tableview 或网格视图来创建这样的 Ui？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:17:53.630

最后，我想通过在列表视图布局中使用包含标记来显示所有包含与其他设备上相同的内容。

```
<HorizontalScrollView
    android:id="@+id/horizontalScrollView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
    <include android:id="@+id/train2" layout="@layout/train2" />
</HorizontalScrollView> 
```

在火车上我有这个

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal">
    <include android:id="@+id/boogi1" layout="@layout/boogi" />
    <include android:id="@+id/boogi2" layout="@layout/boogi" />
     <include android:id="@+id/engine" layout="@layout/engine" /> 
```

并访问我使用的每个图像视图和文本视图

```
 ImageView v1 = ((ImageView)vi.findViewById(R.id.train).findViewById(R.id.boogi1).findViewById(R.id.imageView1)); 
```

谢谢你的支持。只有一个问题是可以根据行的位置更改每一行的视图..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:35:41.230

我认为你需要尝试自定义 Listview，，试试这个 [http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)。

# iphone - 点击第一行时在 UITableView 中插入新行

> ID：15950069
> 
> 赞同：1
> 
> 时间：2013-04-11T13:28:24.480
> 
> 标签：iphone, objective-c, xcode, uitableview

我是 iOS 开发的新手。因此，如果您的答案尽可能详细，那就太好了。我的问题如下：我希望第二部分中的单元格总是说“添加新行”。如果单击此单元格，则应在顶部添加一个新行。我目前的代码是

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

// Return the number of sections.
return 2;
 }
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

// Return the number of rows in the section.
if (section == 0) {
    return 1;
}
else {

    return [entries count];
}
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath        *)indexPath
{
static NSString *simpleTableIdentifier = @"Cell";
static NSString *todayTableIdentifier = @"Notification";
UITableViewCell *cell = [tableView       dequeueReusableCellWithIdentifier:simpleTableIdentifier];
UITableViewCell *todaycell = [tableView dequeueReusableCellWithIdentifier:todayTableIdentifier];

if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];

}
NSString *entry;
if (indexPath.section == 0) {
    entry = [notifications objectAtIndex:indexPath.row];
    cell = todaycell;
} else {
    entry = [entries objectAtIndex:indexPath.row];
}
cell.textLabel.text = entry;

return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

int selectedRow = indexPath.row;
NSLog(@"row pressed %d", selectedRow);
NSArray *paths = [NSArray arrayWithObject:
                  [NSIndexPath indexPathForRow:2 inSection:2]];
if (selectedRow == 0)
{   [entries addObject:@"a new Entry"];
    [[self tableView] insertRowsAtIndexPaths:paths
                            withRowAnimation:UITableViewRowAnimationTop];
}
else {
    [[self tableView] deleteRowsAtIndexPaths:paths
                            withRowAnimation:UITableViewRowAnimationTop];
  }
} 
```

不幸的是，我的应用程序不断崩溃。

```
2013-04-11 16:52:39.717 MyStore[12924:c07] *** Assertion failure in -[UITableView    _endCellAnimationsWithContext:], /SourceCache/UIKit_Sim/UIKit-2380.17/UITableView.m:861
2013-04-11 16:52:39.718 MyStore[12924:c07] *** Terminating app due to uncaught exception '    NSInternalInconsistencyException', reason: 'attempt to delete row 2 from section 2, but there    are only 2 sections before the update'
*** First throw call stack:
(0x1faa012 0x13e7e7e 0x1fa9e78 0xb6d665 0xbb43c 0xca1f6 0xca271 0x5c6b 0xcb285 0xcb4ed    0xad55b3 0x1f69376 0x1f68e06 0x1f50a82 0x1f4ff44 0x1f4fe1b 0x1f047e3 0x1f04668 0x1bffc 0x21bd  0x20e5 0x1)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:31:56.547

这很正常，除了添加新行（视觉上）之外，您还需要更新数据源（在这种情况下为通知数组）。UI 只是数据源的可视化。所以：

```
[notifications addObject:@"a new Entry"];

[[self tableView] insertRowsAtIndexPaths:paths
                            withRowAnimation:UITableViewRowAnimationTop]; 
```

当你删除时：

```
 [notifications removeObjectAtIndex:indexPath.row];

 [[self tableView] deleteRowsAtIndexPaths:paths
                            withRowAnimation:UITableViewRowAnimationTop]; 
```

# django - Django 在线文件浏览器

> ID：15950072
> 
> 赞同：0
> 
> 时间：2013-04-11T13:28:25.180
> 
> 标签：django

大家：</p>

最近，我在使用 Django 开发我的网站时遇到了一个问题。在我的项目中，一个要求是在线查看文件。

也就是说，可以直接在chrome或firefox等浏览器中浏览pdf、jpeg、doc等格式的文件。

我知道这可以通过闪存来完成，FlexPaper 是一种解决方案。但是在 django 中，而不是在 flash 中，还有其他解决方案吗？有人知道吗？如果没有，我只能使用 flexpaper，并且可能无法通过苹果设备访问网站

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:35:48.293

我认为，您可以使用带有选项 inline=True 的[https://github.com/NetAngels/django-webodt](https://github.com/NetAngels/django-webodt)（[文档）：](http://pythonhosted.org/django-webodt/)

```
render_to_response(..., inline=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:36:08.133

那里有很多非 Flash 文件浏览器插件：Elfinder 有一个[Django 连接器](https://github.com/mikery/django-elfinder)，您可能可以与[CKfinder](http://cksource.com/ckfinder)集成。

django 包页面也有一个 django 文件浏览器[链接](https://www.djangopackages.com/grids/g/file-managers/)列表。

# javascript - 在不同的 js 块中使用一个变量

> ID：15950074
> 
> 赞同：1
> 
> 时间：2013-04-11T13:28:27.173
> 
> 标签：javascript, jquery

我有`var valueRegionSelect = $selectOptions.eq($item.index())[0].value;`变量 `$.fn.pjSelect = function() {`

我在另一部分需要这个变量：

```
/*******************************************************************************
 * map
 *******************************************************************************/
    (function() {
        var $mapForm = $('.b-map'); 
```

我考虑使用触发器，如果​​我了解它是如何工作的，但我想我错了：

```
 if (valueRegionSelect !== "") {
                        $body.trigger('regionChangeOnSelect.pj');
                    } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:29:57.160

全局声明该变量

```
var valueRegionSelect = null;

     //set the value in your function
valueRegionSelect = $selectOptions.eq($item.index())[0].value; //and use it anywhere
    /*******************************************************************************
     * map
     *******************************************************************************/
        (function() {
            var $mapForm = $('.b-map');
    if (valueRegionSelect !== "") {
                            $body.trigger('regionChangeOnSelect.pj');
                        } 
```

使用此代码

# graph - 具有不同三种不同输入数据的 Gnuplot 统计图

> ID：15950076
> 
> 赞同：0
> 
> 时间：2013-04-11T13:28:29.077
> 
> 标签：graph, statistics, gnuplot

我正在绘制间隔中数据采样的频率。代码是：

```
n=50 #number of intervals

plot "xxx.csv" u ($0):1 #To get the max and min value
max=GPVAL_Y_MAX
min=GPVAL_Y_MIN
width=(max-min)/n #interval width

#function used to map a value to the intervals
hist(x,width)=width*floor(x/width)
set ytic auto  
set xtic auto
plot    "xxx.csv" u (hist($1,width)):(1.0) smooth freq w histeps ls 1 title "xxx" 
```

这可行，但我想将两个相似的图表与不同的数据重叠。问题是数据不同，所以最大值、最小值和宽度不一样。数据是分开的文件，如 yyy.csv 和 zzz.csv。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T00:21:42.007

你有 gnuplot >= 4.6 吗？如果是这样，您可以使用该`stats`命令轻松获取这些文件的统计信息，否则可能需要执行您在脚本中所做的事情（绘图，然后使用`GPVAL_Y_MIN`等）并为每个数据集创建一组变量。

（发布我之前的评论作为答案。）

# jquery - 根据屏幕大小更改 bxslider 上的幻灯片数量

> ID：15950077
> 
> 赞同：4
> 
> 时间：2013-04-11T13:28:34.053
> 
> 标签：jquery, responsive-design, bxslider

当我的屏幕低于 430 像素时，我想更改 bxslider 上的最大幻灯片数。

我可以使用下面的，但这似乎有点过分了，必须两次声明所有内容。有没有其他人可以想到的方法？

```
 if ( $(window).width() < 430) {
    var myslider = $('#my-slider').bxSlider({
        ...
        maxSlides       : 1,
    });  
    }

    else {
    var myslider = $('#my-slider').bxSlider({
        ...
        maxSlides       : 4,
    });
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-11T14:18:06.603

您可以通过设置 maxSlides 变量来减少重复性，而不是重复滑块代码。

```
var maxSlides,
    width = $(window).width();

if (width < 430) {
    maxSlides = 1;
} else {
    maxSlides = 4;
}

var myslider = $('#my-slider').bxSlider({
    ...
    maxSlides: maxSlides,
}); 
```

[您可以使用三元运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)使其更简单，尽管尝试变得过于简洁不一定有好处。

```
var width = $(window).width();

var myslider = $('#my-slider').bxSlider({
    ...
    maxSlides: (width < 430) ? 1 : 4,
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-08T11:38:55.437

这是一个响应式解决方案，可在您调整窗口大小时动态调整设置：

```
var slider,
  oBxSettings = { /* Your bxSlider settings */ };

function init() {
  // Set maxSlides depending on window width
  oBxSettings.maxSlides = window.outerWidth < 430 ? 1 : 4;
}

$(document).ready(function() {
  init();
  // Initial bxSlider setup
  slider = $('#my-slider').bxSlider(oBxSettings);
});

$(window).resize(function() {
  // Update bxSlider when window crosses 430px breakpoint
  if ((window.outerWidth<430 && window.prevWidth>=430)
    || (window.outerWidth>=430 && window.prevWidth<430)) {
    init();
    slider.reloadSlider(oBxSettings);
  }
  window.prevWidth = window.outerWidth;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-28T23:04:21.487

我将它与 jquery 一起使用：

```
 var windowWidth = $(window).width();  
 var obxSettings = {...};
 slider.bxSlider(obxSettings);

 $(window).resize(function() {
    windowWidth = $(window).width();
    if(windowWidth < 768) {
    obxSettings.minSlides = 2;
    slider.reloadSlider();
 }   
 else {
    obxSettings.minSlides = 3;
    slider.reloadSlider();
 }
 }); 
```

# mongodb - 如何使用 Doctrine ODM 更新 MongoDB 中的嵌入文档

> ID：15950080
> 
> 赞同：0
> 
> 时间：2013-04-11T13:28:39.210
> 
> 标签：mongodb, symfony, doctrine, mongodb-php, doctrine-odm

我找不到如何在 Symfony2 中使用 Doctrine Mongo ODM 更新嵌入式文档。我有一个名为 Page 的类，其中包含许多嵌入式文档“评论”，我想使用 createQueryBuilder 来更新特定评论。这是我拥有的一个简单的类：

类页面{

```
protected $id;

/** @MongoDB\EmbedMany */
private $pageComment = array(); 
```

}

我搜索了整个互联网，但没有找到任何有关如何使用 Doctrine ODM 查询生成器更新文档子文档的信息。我会感谢任何信息，因为我是 Doctrine 和 Mongo 的新手。简而言之，我想在通过 id 搜索页面后更新页面中的特定评论。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:45:32.860

如果你想使用 queryBuilder 使用这个

```
$dm->createQueryBuilder('Page')
    ->update()
    ->field('page.pageComment')->set( <$newupdatePageCommentObj> )
    ->field('id')->equals('<matchedId>')
    ->getQuery()
    ->execute(); 
```

或者当您为 EmbedMany 成员变量生成 setter 和 getter 时，它将在您的类中生成添加和删除成员函数。所以在你的情况下，这些将是成员函数：

```
public function addPageComment(type_hint_with_your_pageComment_document $pageComment )
{
    $this->pageComment[] = $pageComment;
}
public function removePageComment( type_hint_with_your_pageComment_document $pageComment )
{
    $this->items->removeElement( $pageComment );
} 
```

因此，您可以使用 addPageComment() 函数，如果它不存在，它将添加它，并将更新它是否已经存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-02T10:23:43.343

您一次只能更新一个字段（而不是`pageComment.$`）：

```
$this->createQueryBuilder('page')
    ->update()
    ->field('id')->equals($pageId)
    ->field('pageComment.id')->equals($pageCommentId)
    ->field("pageComment.$.field1")->set($field1)
    ->getQuery()
    ->execute(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-23T15:26:31.983

```
 $yourArrayPageComment = array(
  "id" => new \MongoId($pageCommentId),
  "field1" => $field1,
  ...
)

 $this->createQueryBuilder('page')
            ->update()
            ->field('id')->equals($pageId)
            ->field('pageComment.id')->equals($pageCommentId)
            ->field("pageComment.$")->set($yourArrayPageComment)
            ->getQuery()
            ->execute(); 
```

# windows - 运行一次额外迭代的 Windows 批处理文件循环

> ID：15950081
> 
> 赞同：0
> 
> 时间：2013-04-11T13:28:42.237
> 
> 标签：windows, batch-file, for-loop, cmd

我正在使用 Windows 批处理文件一次性重命名大量文件。重命名只是为文件名添加前缀。该文件执行得很好，除了最后一个文件，前缀以某种方式应用了两次。我不确定我做错了什么。谁能给我指出问题？

```
for %%i in (*.csv) do ren %%i myprefix_%%i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:32:07.570

```
@echo off
SETLOCAL
DEL *.csv
XCOPY ..\*.csv .
(
for %%i in (*.csv) do (
echo ====================
echo %%i
dir *.csv
ren %%i x%%i
dir *.csv
echo ====================

)
)>u:\junk.txt&edit u:\junk.txt 
```

我在包含几个 .CSV 的目录下的一个干净目录中运行了上述批处理。它所做的只是删除当前目录的 .csvs，从父目录复制这些文件，然后通过前缀重命名。透露了不少。

（U：是 RAMDRIVE，EDIT 执行 EDITPLUS；notepad 也可以在这里执行）

该操作完全取决于添加的前缀。以“a”开头的前缀与以“x”开头的前缀的工作方式不同。并且结果取决于正在使用的文件系统。NTFS 按字母顺序显示文件名，但 RAMDRIVE 上的 FAT 系统不会对名称进行排序。

我相信这个问题是由“findnext”文件名机制没有按预期处理文件名列表的变化引起的。当它更改一个时，该名称可能会在列表中移动，因此文件可能会在再次遇到其新名称时被重新处理 - 可能多次。

治疗方法是将`for`选择替换为

```
for /f "delims=" %%i in ('dir /b *.csv') do ( 
```

创建并处理 DIR 列表的位置**，**因此更改不会影响它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T13:35:18.083

您的文件名中可能有一些空格。**在文件名周围使用双引号。**尝试以下操作：

```
for %%i in (*.csv) do ren "%%I" "myprefix_%%I" 
```

这将执行为：

```
ren "tmp - Copy.csv" "myprefix_tmp - Copy.csv" 
```

此外，您应该查找任何隐藏文件。

# c - 递归函数的增长顺序

> ID：15950084
> 
> 赞同：2
> 
> 时间：2013-04-11T13:28:44.760
> 
> 标签：c, recursion, time-complexity

以下问题是在**GRE 计算机科学考试 2001**中提出的。

Q-67：考虑以下**C 代码**。

```
int f(int x) {
    if(x<1) {
        return 1;
    } else {
        return f(x-1)+g(x);
    }
}

int g(int x) {
    if(x<2) {
        return 1;
    } else {
        return f(x-1)+g(x/2);
    }   
} 
```

以下哪项最能描述**f(x)**作为 x 的**函数**的**增长**？

 ****(A)**对数** (B)**线性** (C)**二次** (D)**三次** (E)**指数**

顺便说一句，**正确答案**是**（E）**指数（在其答案键中提到）。但是，我不知道解决这个问题的确切方法。

任何人都可以解决上述**重复关系**吗？你有任何**替代方法**吗？

请分享您的观点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:03:48.680

我认为这可以简化为 `f(x) >= f(x-1)+f(x-1) for x>1`，因为`g(x) = f(x-1)+g(x/2) >= f(x-1) for x>1`。第一个不等式是`f(x) >= 2*f(x-1)`，从这里很容易推导出`f(x) >= 2^x*f(1)`（`f`至少双倍的值每次`x`增长 1）。****

# javascript - 在 IE javascript 中本地保存画布

> ID：15950085
> 
> 赞同：2
> 
> 时间：2013-04-11T13:28:47.357
> 
> 标签：javascript, html, internet-explorer, canvas, execcommand

嗨，我想使用 execCommand("SaveAs") 在 IE 中本地保存画布。这是我的代码。

```
 var img = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");     
 window.win = open (img);
 setTimeout('win.document.execCommand("SaveAs")', 1000); 
```

但是，当新窗口打开时，页面无法显示。data:image/octet-stream;base64... 我该如何解决这个问题？非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:44:18.150

你叫`window.open`错了。[MDN](https://developer.mozilla.org/en/docs/DOM/window.open)

你要

```
 var win = window.open(),
      img = canvas.toDataURL("image/png")

  win.document.body.innerHTML= "<img src='" + img + "'></img>" // With correct delimiters
  win.document.close()
  setTimeout('win.document.execCommand("SaveAs")', 1000); 
```

# java - Eclipse RCP & SWT 小部件 & NLS

> ID：15950086
> 
> 赞同：0
> 
> 时间：2013-04-11T13:28:48.387
> 
> 标签：java, swt, eclipse-rcp, equinox

有谁知道是否可以对 SWT\RCP 应用程序中的某些 SWT 小部件进行 NLS？

**备注：如果您为插件****org.eclipse.jface**（包含） 创建自己的春分片段，则可以使用 JFace 组件`messages.properties`，所以让我说如果我想让斯洛伐克语 NLS 成为我在片段中`JFace`创建的组件。`messages_sk.properties`

有谁知道这是否也可以对作为插件**org.eclipse.ui**一部分的 SWT 进行？

我正在开发使用 SWT 的应用程序`FileDialog`，它具有默认的英文按钮等。我想让它们成为其他语言而不制作我自己的对话框，但改变 NLS ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T08:37:38.087

中的大部分部分`org.eclipse.swt`都可以本地化。我不知道本地化选项`FileDialog`和类似的“小部件”，因为该库直接调用一些 Win32 API（或其他操作系统上的类似 API）来创建它。因此，这部分高度依赖于操作系统，如果您以某种方式对其进行更改，它将无法移植。

如果要本地化其他部分`org.eclipse.swt`，比较简单。只需创建一个片段（例如`org.eclipse.swt.nls`），其中主机将是`org.eclipse.swt`。创建一个包`org.eclipse.swt.internal`。

`SWTMessages.properties`比从新包中复制文件`org.eclipse.swt.<ws>.<os>.<arch>_<version>.jar/org/eclipse/swt/internal`并将其重命名为`_SWTMessages.properties`.

然后您可以创建本地化`SWTMessages_<lang>.properties`文件（`<lang>`语言缩写在哪里：例如`sk`, `de`, `fr`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:33:50.223

我认为您没有机会将[org.eclipse.swt.widgets.FileDialog](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/FileDialog.html)按钮的文本国际化。

SWT 在这里使用系统文件对话框。对于使用德语 win32 系统的我来说，文本是德语的。这表明按钮文本也是系统相关的。

![在此处输入图像描述](https://i.stack.imgur.com/mZRQ1.png)

**PS：**
SWT 不是插件的一部分`org.eclipse.ui`。FileDialog 是插件的一部分`org.eclipse.swt.<ws>.<os>.<arch>_<version>.jar`

在哪里：

*   *ws* - 窗口系统: `gtk`, `win32`, 等等。
*   *os* - 操作系统：`win32`, `linux`,`solaris`等
*   *拱*- 架构：`x86`，`x86_64`
*   *版本*- 版本 ID（类似于`3.100.1.v4234e`）

# c# - 错误：此页面的状态信息无效，可能已损坏

> ID：15950091
> 
> 赞同：0
> 
> 时间：2013-04-11T13:29:05.277
> 
> 标签：c#, asp.net, asp.net-3.5

我看到了错误：

```
The state information is invalid for this page and might be corrupted 
```

在我的页面上。根据一些阅读，我认为该错误可能由于多种原因而发生，并且可能很难排除故障。

在 aspx 页面上，我有两个下拉控件：

```
<asp:DropDownList ID="DropDownList3" runat="server" DataSourceID="dsClients" DataTextField="Client_Name" DataValueField="Client_Name" AutoPostBack="True" OnSelectedIndexChanged="DropDownList3_SelectedIndexChanged" ondatabound="DropDownList3_DataBound"></asp:DropDownList>
<asp:DropDownList ID="ddQualIDInsert" runat="server" DataSourceID="dsQual" DataTextField="Project_Name" DataValueField="Qual_ID"></asp:DropDownList> 
```

在文件后面的代码中，我使用 ajax 根据从第一个下拉菜单中选择的值来更新和重建第二个下拉选项：

```
protected void DropDownList3_SelectedIndexChanged(object sender, EventArgs e)
{
   dsQual.Where = "Client_Name = \"" + ((DropDownList)sender).SelectedValue +"\"";
} 
```

有时会按每个填充的方式获取下拉列表，但大多数情况下会引发错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T09:35:29.447

我遇到了这个问题，我花了很长时间在我的代码中解决它。

* * *

首先是我有 UpdatePanel 和一个 jquery 对话框。下面是我正在使用的脚本。

```
<script>
     var uiDialog = $('.ui-dialog-container').parent();
     (uiDialog.next().length && uiDialog.appendTo((document.forms.item(0) != null) ?   document.forms.item(0) : document.body));
     //verifyUser();
     function ShowDialog() {

         dialog = $("#dialog-form").dialog({
             autoOpen: true,
             resizable: false,
             height: 400,
             width: 800,
             modal: true,
             overlay: {
                 backgroundColor: '#000',
                 opacity: 0.5
             }

         });
     }

</script> 
```

这是表格

```
<div id="dialog-form" title="Verify Transaction" style="display:none;" >
    <asp:ScriptManager ID="ScriptManager2" runat="server"  />

            <fieldset style="background-color:#ffd800;border-radius:5px;">

            <label for="fname">First Name    :</label>
            <label for="fname"><%= DetailsView1.Rows[7].Cells[1].Text %></label><br />

            <label for="lname">Last Name     :</label>
            <label for="lname"><%= DetailsView1.Rows[9].Cells[1].Text %></label><br />

            <label for="zip">Zip Code        :</label>
            <label for="zip"><%= DetailsView1.Rows[22].Cells[1].Text %></label><br />

            </fieldset>
    <hr />
    <asp:Button id="btnVerified" runat="server" OnClick="btnVerify_Click" UseSubmitBehavior="false" Text="Verified" />
            <asp:Button ID="btnCancelled" runat="server" OnClientClick="dialog.dialog('close')" Text="Cancelled" UseSubmitBehaviour="false"/>

</div> 
```

在这里，我们看到我在按钮控件中使用服务器端和客户端脚本。对他们来说，重要的是从对话框中删除表单标签，将脚本放入 UpdatePanel 并设置 UseSubmitBehaviour="false"。这将导致对话框回发，这是我们需要转到服务器端的内容。

最初我有表单标签。一旦我删除了表单标签，它就会执行事件 OnClientClick 和 OnClick 服务器端事件。干杯！！如果任何机构有这个问题，这里就是解决方案。

以下问题终于得到解决：

1.  客户端事件执行。
2.  使用 jQuery-UI 对话框弹出的服务器端事件执行。
3.  对话框执行 PostBack，这意味着我们可以在对话框内拥有一个带有控件的完整 ASP.NET 表单。
4.  “状态信息对此页面无效并且可能已损坏”的问题已得到解决。

注意：我在表单中使用 DetailsView 控件。

干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:35:21.873

您正在动态更改您的页面（服务器端控件），并且这会更改`view state`页面，因此在回发时，ASP.NET 会解密`view state`并且与预期的不匹配。

# c# - 使用数据集作为中继器控件的数据源？

> ID：15950096
> 
> 赞同：1
> 
> 时间：2013-04-11T13:29:28.547
> 
> 标签：c#, asp.net, webforms

我只是在学习 ASP.Net，所以我希望你能忍受我和我的问题。在我的程序中，我有一个数据集，其中包含指向各种图像的 Url 字符串。我的问题是，我可以将该数据集用作Repeater 控件的数据源，以便Repeater 使用这些Urls 来显示图像吗？

非常感谢您的任何帮助和建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T13:36:27.920

你当然可以。您将希望在代码隐藏中进行绑定，可能使用如下`Load`方法：

```
repeaterControl.DataSource = yourDataSet.Tables[0];
repeaterControl.DataBind(); 
```

您要到达`0`的索引在哪里。`DataTable`

然后你会想要构建这样的标记：

```
<asp:Repeater ID="repeaterControl" runat="server">
    <ItemTemplate>
        <asp:Image runat="server"
            ImageUrl="<%# DataBinder.Eval(Container.DataItem, "TheFieldName") %>" />
    </ItemTemplate>
</asp:Repeater> 
```

其中是包含 URL`TheFieldName`的字段/列的名称。`DataTable`现在，这段代码可能需要稍微调试一下，因为我没有围绕它构建一个完整的项目，但这会让你完成 99% 的工作，如果不是全部的话。

# c++ - C ++上的枚举内的枚举

> ID：15950100
> 
> 赞同：0
> 
> 时间：2013-04-11T13:29:39.077
> 
> 标签：c++, enums, constants

我正在尝试建立一个基于常量的结构。我有`ObjectTypes`(KEYBOARD, MOUSE, HAPTIC ...) 可以有`InputTypes`（鼠标可以是默认值和反向，而键盘可以是默认值和数字和触觉只能是默认值）。

为了让它工作，我试图`Constants`在 C++ 中调用的类中使用枚举中的枚举。`ObjectTypes`将参数和参数传递给函数可能会起作用`InputTypes`，所以我在原型中需要这样的东西：

```
changeInputSystem(SimulatorConstants::InputObject input, SimulatorConstants::InputTypes type) 
```

但是在 C++ 中，当我声明一个枚举时（内部）从中取出的每个值，其中一些值替换了其他值。

我现在的代码（不工作）是：

```
 enum InputObject {
        KEYBOARD,
    MOUSE,
    HAPTIC
};

enum InputTypes {
    enum KeyboardTypes {
        DEFAULT
    };
    enum MouseTypes {
        DEFAULT,
        INVERSE
    };
    enum HapticTypes {
        DEFAULT
    };
}; 
```

**注意：**我知道枚举之间没有继承，所以我需要任何可以以类似方式工作的解决方案。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:04:20.303

如果你做整个面向对象的事情，它就会起作用。因此，与其对所有事物进行枚举，不如使用类：

```
class InputObject {};

class Mouse : public InputObject
{
  void setDefault();
  void setInverse();
}; 
```

这样，InputObject 的类型可以保存在对象中，而您只传递实际的 InputObject。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T13:18:55.687

就像评论中写的那样，如果您可以访问 C++11 编译器，最好使用枚举类，这会将您自己接受的答案（在撰写本文时）代码更改为：

```
enum class KeyboardTypes {
   DEFAULT
};
enum class MouseTypes {
  DEFAULT,
   INVERSE
};
enum class HapticTypes {
   DEFAULT
}; 
```

当然，您的重载函数可以更改为更自然的版本：

```
void changeInputSystem(SimulatorConstants::MouseTypes type);
void changeInputSystem(SimulatorConstants::KeyboardTypes type);
void changeInputSystem(SimulatorConstants::HapticTypes type); 
```

而且，作为奖励，您的枚举不会隐式转换为整数值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:20:09.487

好的，做一些证明我终于用重载解决了它。我通过重载方法并创建三个不同的结构删除了 ObjectTypes：

```
struct KeyboardTypes {
   enum types{
      DEFAULT
   };
};
struct MouseTypes {
   enum types{
      DEFAULT,
      INVERSE
   };
};
struct HapticTypes {
   enum types{
      DEFAULT
   };
}; 
```

和重载的成员函数：

```
void changeInputSystem(SimulatorConstants::MouseTypes::types type);
void changeInputSystem(SimulatorConstants::KeyboardTypes::types type);
void changeInputSystem(SimulatorConstants::HapticTypes::types type); 
```

感谢所有帮助过的人。

# php - PHP脚本未执行

> ID：15950103
> 
> 赞同：-1
> 
> 时间：2013-04-11T13:29:51.407
> 
> 标签：php, forms, submit

我有一个包含 1222 个字段的表单（我知道这个数字很大，但它是用于保存翻译的表单）。当我提交表单时，脚本没有执行。我没有收到错误消息，并且错误日志为空。即使我发布的脚本只包含一个 echo 命令，也不会执行任何操作，我看到的只是一个空白页。

我很确定这是一个 PHP 设置问题，因为表单可以在其他服务器上提交而没有任何问题。任何人都可以阐明问题可能是什么？

HTML 是：

```
<form action="test.php" method="post">
    <input type="text" name="account-form-282f96c7d1ed98d24606d209dcad9842" value=""/>
    <!-- 1221 more inputs with different names, but format is the same as above -->
    <input type="submit" name="submitBT" value="Save"/>
</form> 
```

测试.php：

```
<?php
echo(1);
?> 
```

编辑1：如果我简化输入名称，例如：input_1、input_2 等，提交工作正常。

编辑 2：我注意到我收到了 406 Not Acceptable HTTP 响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T07:58:20.410

问题在于 mod_security，由于某种原因它不喜欢提交的数据并停止执行脚本。

# mysql - 获取表中不存在的 ID 列表

> ID：15950107
> 
> 赞同：2
> 
> 时间：2013-04-11T13:30:09.880
> 
> 标签：mysql, arrays, select

假设我有一个 id 列表，例如 (1, 3, 9, 2, 4, 86) 和一个带有列 id 的表。我想在我的列表中找到所有没有匹配行的数字。

即如果mysql表是这样的：

```
id  letter
1   a
2   b
3   c
4   d
5   e
6   f
7   g 
```

我有列表`(1, 3, 9, 2, 4, 86)`，我想要一个返回的查询`(9, 86)`。

我唯一能想到的就是构建一个非常大的虚拟表，例如：

```
select 1 as n union select 3 as n union select 9 as n union .... 
```

然后我可以加入反对。有没有更好的办法？我希望能够在 mysql 中完成这一切。作为旁注（虽然我不认为它是相关的），我的表有大约 10,000 行，而我正在使用的列表中有大约 100 个数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:48:41.207

您必须首先`create`包含一个包含**LIST元素的表**

IE`(1, 3, 9, 2, 4, 86)`

```
create table t
(
    num int
)
insert into t
values
(1),(3),(9),(2),(4),(86) 
```

现在你可以使用`NOT IN`

```
SELECT num
FROM t
WHERE num not in (select id from letter_table); 
```

**[SQL小提琴](http://sqlfiddle.com/#!3/f0f9f/1)**

来自**评论**。 ~~**编辑：**~~

有一种方法可以让您**不必坐在**桌子`create`旁

```
select N from
(select 1 as N
union all
select 3 as N
union all
select 9 as N
union all
select 2 as N
union all
select 4  as N
union all
select 86 as  N)t1
where t1.N
not in (select id from letter_table) 
```

请参考**[New SQL Fiddle](http://sqlfiddle.com/#!3/33ec9/1)**。

我认为OP想要的是**编辑**部分。

~~**PS确保您的数据库中不存在表t1**~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:50:08.990

创建一个包含 ID 的表，并且您可以轻松地做到这一点。在此处查看演示

```
SELECT
  S.id,
  ''   AS `letter`
FROM sequence S
WHERE S.id NOT IN(SELECT
                    id
                  FROM mytable) 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/a2a7b/8)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:49:42.320

假设您使用临时表或`UNION`@Luv 的答案中的方法，请考虑用`NOT IN`外连接替换它，因为它可能会执行得更好（当然，用您的实际环境和数据进行测试）：

```
SELECT num
FROM t
    LEFT OUTER JOIN letter_table
        ON t.num = letter_table.id
WHERE letter_table.id IS NULL; 
```

如果您使用 UNION 方法，请替换`FROM t`为`FROM ([big UNION here]) t`.

# java - 为正则表达式生成所有有效值

> ID：15950113
> 
> 赞同：18
> 
> 时间：2013-04-11T13:30:26.143
> 
> 标签：java, regex, generator

我知道通过使用 Xeger，我们可以获得指定模式的随机值。

```
String regex = "[0-9]{2}"; 
Xeger generator = new Xeger(regex);
String result = generator.generate(); 
```

我想知道有没有办法返回指定正则表达式的所有有效字符串。例如，对于 pattern: ，我们可以从to`[0-9]{2}`获取所有值。`00``99`

谢谢

编辑：

这里我们不考虑像 + 和 * 这样的无限输出；我们如何获得有限正则表达式的所有值？

最后编辑：

感谢大家！最后我不考虑所有可能的值，因为可能有数千个。我限制一个特定的数字作为值的数量来减少数量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T22:19:20.247

由于正则表达式是由有限状态机定义的，我想知道是否有一些东西能够在这些机器上自动推理，并且非常适合重新用于这项工作......并且[clojure.core.logic 交付](https://gist.github.com/Pet3ris/1676242)

因此，我查看[了正则表达式语法的定义](http://www.cs.sfu.ca/~cameron/Teaching/384/99-3/regexp-plg.html)（不幸的是，它缺少 {} 量词，但它们应该很容易添加到我的代码中）使其适应 java 转义，并制定了这个 110 行长的 clojure 程序：

```
(ns regexp-unfolder.core
  (:require [instaparse.core :as insta])
  (:require [clojure.core.logic :as l])
  (:require [clojure.set :refer [union difference]])
  (:gen-class :methods [#^{:static true} [unfold [String] clojure.lang.LazySeq]])
)

(def parse-regexp (insta/parser 
             "re = union | simple-re?
             union = re '|' simple-re
             simple-re = concat | base-re
             concat = simple-re base-re
             base-re = elementary-re | star | plus
             star = elementary-re '*'
             plus = elementary-re '+'
             elementary-re = group | char | '$' | any | set
             any = '.'
             group = '(' re ')'
             set = positive-set | negative-set
             positive-set = '['  set-items ']'
             negative-set = '[^' set-items ']'
             set-items = set-item*
             set-item = range | char
             range = char '-' char
             char = #'[^\\\\\\-\\[\\]]|\\.'" ))

(def printables (set (map char (range 32 127))))

(declare fns handle-first)

(defn handle-tree [q qto [ type & nodes]]
  (if (nil? nodes)
    [[q [""] qto]]
    ((fns type handle-first) q qto nodes)))

(defn star [q qto node &]
  (cons [q [""] qto]
         (handle-tree q q (first node))))

(defn plus [q qto node &] 
  (concat (handle-tree q qto (first node))
          (handle-tree qto qto (first node))))

(defn any-char [q qto & _] [[q (vec printables) qto]] )

(defn char-range [[c1 _ c2]]
  (let [extract-char (comp int first seq second)]
    (set (map char (range (extract-char c1) (inc (extract-char c2)))))))

(defn items [nodes]
  (union (mapcat
    (fn [[_ [type & ns]]]
      (if (= type :char)
        #{(first ns)}        
        (char-range ns)))
    (rest (second nodes)))))

(defn handle-set [q qto node &] [[q (vec (items node)) qto]])

(defn handle-negset [q qto node &] [[q (vec (difference printables (items node))) qto]])

(defn handle-range [q qto & nodes] [[q (vec (char-range nodes)) qto]])

(defn handle-char [q qto node &] [[q (vec node) qto]] )

(defn handle-concat [q qto nodes] 
  (let [syms (for [x  (rest nodes)] (gensym q))]
    (mapcat handle-tree  (cons q syms) (concat syms [qto] ) nodes)
  ))

(defn handle-first [q qto [node & _]] (handle-tree q qto node))

(def fns {:concat handle-concat, :star star, :plus plus, :any any-char, :positive-set handle-set, :negative-set handle-negset, :char handle-char})

(l/defne transition-membero
  [state trans newstate otransition]
  ([_ _ _ [state trans-set newstate]]
     (l/membero trans trans-set)))

(defn transitiono [state trans newstate transitions]
  (l/conde
   [(l/fresh [f] 
             (l/firsto transitions f)
             (transition-membero state trans newstate f))]
   [(l/fresh [r]
             (l/resto transitions r)
             (transitiono state trans newstate r))])
  )

(declare transitions)

;; Recognize a regexp finite state machine encoded in triplets [state, transition, next-state], adapted from a snippet made by Peteris Erins

(defn recognizeo
  ([input]
     (recognizeo 'q0 input))
  ([q input]
     (l/matche [input] ; start pattern matching on the input
        (['("")]
           (l/== q 'ok)) ; accept the empty string if we are in an accepting state
        ([[i . nput]]
           (l/fresh [qto]
                  (transitiono q i qto transitions) ; assert it must be what we transition to qto from q with input symbol i
                  (recognizeo qto nput)))))) ; recognize the remainder

(defn -unfold [regex] 
  (def transitions 
    (handle-tree 'q0 'ok (parse-regexp regex)))
  (map (partial apply str) (l/run* [q] (recognizeo q)))) 
```

使用 core.logic 编写，它应该很容易适应它也可以用作正则表达式匹配器

我将可打印字符限制为 32 到 126 个 ascii，否则处理`[^c]`诸如\w、\s 等字符类的转义

到目前为止，这是我在 clojure 中写的最重要的东西，但基础知识似乎已经涵盖得很好......一些例子：

```
regexp-unfolder.core=> (-unfold "ba[rz]")
("bar" "baz")
regexp-unfolder.core=> (-unfold "[a-z3-7]")
("a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v" "w" "x" "y" "z" "3" "4" "5" "6" "7")
regexp-unfolder.core=> (-unfold "[a-z3-7][01]")
("a0" "a1" "b0" "b1" "c0" "c1" "d0" "d1" "e0" "e1" "f0" "f1" "g0" "g1" "h0" "h1" "i0" "i1" "j0" "j1" "k0" "k1" "l0" "l1" "m0" "m1" "n0" "n1" "o0" "o1" "p0" "p1" "q0" "q1" "r0" "r1" "s0" "s1" "t0" "t1" "u0" "u1" "v0" "v1" "w0" "w1" "x0" "x1" "y0" "y1" "z0" "z1" "30" "31" "40" "41" "50" "51" "60" "70" "61" "71")
regexp-unfolder.core=> (-unfold "[^A-z]")
(" " "@" "!" "\"" "#" "$" "%" "&" "'" "(" ")" "*" "+" "," "-" "." "/" "0" "1" "2" "3" "4" "5" "6" "7" "8" "9" ":" ";" "{" "<" "|" "=" "}" ">" "~" "?")
regexp-unfolder.core=> (take 20 (-unfold "[abc]*"))
("" "a" "b" "c" "aa" "ab" "ac" "ba" "ca" "aaa" "bb" "cb" "aab" "bc" "cc" "aac" "aba" "aca" "baa" "caa")
regexp-unfolder.core=> (take 20 (-unfold "a+b+"))
("ab" "aab" "abb" "abbb" "aaab" "abbbb" "aabb" "abbbbb" "abbbbbb" "aabbb" "abbbbbbb" "abbbbbbbb" "aaaab" "aabbbb" "aaabb" "abbbbbbbbb" "abbbbbbbbbb" "aabbbbb" "abbbbbbbbbbb" "abbbbbbbbbbbb") 
```

由于我以这种方式开始，我还实现了无限输出:)

如果有人有兴趣，我[在这里上传](https://launchpad.net/regexp-unfolder)

显然，这是一个如何`unfold`从普通的旧 Java 调用的示例：

```
import static regexp_unfolder.core.unfold;

public class UnfolderExample{
    public static void main(String[] args){
        @SuppressWarnings("unchecked")
        Iterable<String> strings = unfold("a+b+");
        for (String s : strings){
            System.out.println(s);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T14:13:06.237

Here is in `C` language written open-source generator [RegLdg](http://regldg.com) - regular expression grammar language dictionary generator.

I believe, it will be not very difficult to make Java port of this program.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T16:12:33.477

查找所有匹配项与查找随机匹配项非常相似。[下面是在www.debuggex.com](http://www.debuggex.com)上生成随机匹配的逻辑的简单修改，假设您已经有一个解析树。

这个想法是，对于每个子树，您返回一个所有可能生成的字符串的列表，给定一个由解析树中所有先前节点生成的字符串。

```
AltTree.all = (prefix) ->
    rets = []
    for child in children
        rets.extend(child.all(prefix))

ConcatTree.all = (prefix) ->
    prefixes = [prefix]
    for child in children
        newPrefixes = []
        for p in prefixes
            newPrefixes.extend(child.all(p))
        prefixes = newPrefixes
    return prefixes

RepeatTree.all = (prefix) ->
    prefixes = [prefix]
    rets = []
    for i up to max
        newPrefixes = []
        for p in prefixes
            newPrefixes.extend(onlyChild.all(p))
        prefixes = newPrefixes
        if i >= min
            rets.extend(prefixes)
    return rets

CharsetTree.all = (prefix) ->
    rets = []
    for char in allValidChars():
        rets.push(prefix + char)
    return rets 
```

其余的树留作练习（最值得注意的是文字树）。

请注意，为了清楚起见，故意没有优化。调用`myTree.all('')`将生成一个列表，这样每个有效匹配字符串**对于生成此字符串的每个路径都会**出现一次。您可能希望添加重复数据删除并摆脱过度复制。

我还应该补充一点，这仅适用于具有*少量*总匹配字符串的正则表达式。这是因为正在存储所有字符串。如果你想绕过这个限制，你可以`yield`验证这个算法。您将需要维护您在树中的位置的堆栈（将其视为面包屑路径）。当请求一个新字符串时，您将从您走过的路径创建它，然后更新路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:13:29.263

这种算法的简单实现很简单：

```
def generate_matching(pattern):
    alphabets = [...]
    l = 1
    while True:
        # generate all Cartesian product of the alphabets of length `l`
        for s in itertools.product(alphabets, repeat=l):
            s = "".join(s)
            if pattern.match(s):
                print s
        l += 1 
```

# sql - db2 IDENTITY_VAL_LOCAL() 行为

> ID：15950114
> 
> 赞同：0
> 
> 时间：2013-04-11T13:30:28.237
> 
> 标签：sql, db2

我想在插入后立即检索为标识列创建的最后一个 ID，并且我想使用 IDENTITY_VAL_LOCAL()。在我的测试中，我有两种不同的行为。

当我使用这样的指令时，它工作正常。

```
 INSERT INTO(fld1,fld2, ..) VALUES (val1,val2 ) 
```

但是当我调用更复杂的插入时，我返回 NULL。我有类似的东西

```
 INSERT INTO(fld1,fld2, ..) SELECT a,b,c,.. FROM tbl1,tbl2.. WHERE ... 
```

是因为它真的只适用于 INSERT/VALUE 调用还是我看看别的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:35:15.400

尝试这个

```
INSERT INTO Tablename(fld1,fld2, ..) VALUES (val1,val2 )

SELECT SCOPE_IDENTITY()

INSERT INTO Tablename(fld1,fld2, ..) SELECT a,b,c,.. FROM tbl1,tbl2.. WHERE ...

SELECT SCOPE_IDENTITY() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-17T05:38:09.237

只需使用这个：

`VALUES IDENTITY_VAL_LOCAL()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T13:33:01.400

检索最后插入的标识列的正确语法是：

`SELECT IDENTITY_VAL_LOCAL() AS IDENTITY FROM SYSIBM.SYSDUMMY1`

# jquery - 如何使用 jquery 获取带有输入值的 HTML 字符串？

> ID：15950115
> 
> 赞同：2
> 
> 时间：2013-04-11T13:30:31.737
> 
> 标签：jquery

我需要在服务器上将 HTML 创建为 pdf，并需要来自浏览器的 HTML，其中包含 a`form`和其他内容。这样做只会在表单中给出一个没有值`$el.html()`的 HTML 字符串。`input`我如何获得`string`包含所有`input`值的 HTML？

我不想在浏览器上附加克隆，我只对包含所有输入值的 HTML 字符串感兴趣以传递给服务器。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:35:40.060

我认为这应该有效。只需在调用之前运行它`.html()`：

```
$("input[type='text']").each(function () {
    var $this = $(this);

    $this.attr("value", $this.val());
}); 
```

[http://jsfiddle.net/GyrWY/1/](http://jsfiddle.net/GyrWY/1/)

注意：如果您需要对其他输入类型执行此操作，则需要以不同方式处理它们。对于`textarea`您要设置`.text($this.val())`的复选框和单选按钮，您需要设置`checked`属性。`select`元素，您必须设置`selected`适当的`option`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T13:36:09.577

也许这会做到：

```
$("input").each(function() {
    $(this).attr("value", $(this).val());
});
$("textarea").each(function() {
    $(this).text($(this).val());
});
$("select option").each(function() {
    if ($(this).is(":selected")) {
        $(this).attr("selected", "selected");
    } else {
        $(this).removeAttr("selected");
    }
});
$("checkbox").each(function() {
    if ($(this).is(":checked")) {
        $(this).attr("checked", "checked");
    } else {
        $(this).removeAttr("checked");
    }
}); 
```

这会为所有类型的输入设置适当的 DOM 属性以匹配它们的当前状态。我希望我没有错过任何一个。

您可能想要克隆整个 DOM 并对其进行操作。上面的代码会影响如果用户按下表单的重置按钮会发生什么，当前状态将被视为默认状态。

# ember.js - 控制器已定义，但找不到

> ID：15950118
> 
> 赞同：0
> 
> 时间：2013-04-11T13:30:45.243
> 
> 标签：ember.js

尝试获取`nodeEditController`from`nodeController:startEditing`时，出现以下问题：

```
Uncaught TypeError: Cannot call method 'set' of undefined 
```

这是`NodeController`：

```
SettingsApp.NodeController = Ember.ObjectController.extend({
    isEditing: false,

    startEditing: function () {
        debugger;
        var nodeEditController = this.get('controllers.nodeEdit');
        nodeEditController.set('content', this.get('content'));
        nodeEditController.startEditing();
        this.set('isEditing', true);
    },
    ... 
```

这是`NodeEditController`：

```
SettingsApp.NodeEditController = Ember.ObjectController.extend({
    needs: ['node'],

    startEditing: function () {
        //debugger;
        // add the contact and its associated phone numbers to a local transaction
        var node = this.get('content');
        var transaction = node.get('store').transaction();
        transaction.add(node);
        // contact.get('phones').forEach(function (phone) {
        //   transaction.add(phone);
        // });
        this.transaction = transaction;
    },
    ... 
```

错误发生在一行中：

```
nodeEditController.set('content', this.get('content')); 
```

因为：

```
var nodeEditController = this.get('controllers.nodeEdit'); 
```

退货`undefined`。这是为什么？已`NodeEditController`定义！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:35:29.970

NodeController 缺少以下`needs`属性：

```
SettingsApp.NodeController = Ember.ObjectController.extend({
    needs : ["nodeEdit"],
    isEditing: false,

    startEditing: function () {
        debugger;
        var nodeEditController = this.get('controllers.nodeEdit');
        nodeEditController.set('content', this.get('content'));
        nodeEditController.startEditing();
        this.set('isEditing', true);
    },
    ... 
```

# deployment - 从 KB 修补程序中提取产品代码以在引导程序中使用

> ID：15950122
> 
> 赞同：4
> 
> 时间：2013-04-11T13:30:55.197
> 
> 标签：deployment, windows-installer, clickonce, bootstrapper

我需要将 KB Hotfix 添加到我的应用程序的先决条件中，我将通过为它创建引导程序包来做到这一点。

为此，我首先需要检查它是否已经安装，以便我可以绕过它。

我需要产品代码在[InstallCheck](http://msdn.microsoft.com/en-us/library/ms229432%28v=vs.80%29.aspx)中添加新的 MsiProductCheck，然后检查其值并在已安装时绕过它。

可以将 MsiProductCheck 与 KB 修补程序一起使用，还是应该使用另一个[InstallCheck](http://msdn.microsoft.com/en-us/library/ms229432%28v=vs.80%29.aspx)？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-06T22:38:16.203

有许多不同类型的 KB。

如果您不想安装它，并且您对 MSI 有点了解，当然您可以找到 ProductCode，如果它是 MSI KB。

两种常见类型：

*KB 文件具有后缀 .exe* - 其中包括一个 .msp（补丁）文件。您可以用鼠标右键打开 .exe，使用解包器如 7zip（不要双击，它将安装它）。然后使用像**Insted**（google for it）这样的工具来查看 .msp 文件的内部。但是补丁没有自己的 ProductCode，它们有自己的 GUID，并且补丁完整的 MSI 有自己的 ProductCode。对于 MSI 专家来说，这些东西可能更多。两个 GUID 都在摘要信息中，这不是普通表。我不知道“MsiProductCheck”来判断，你必须做什么才能使用这个信息。

*KB 文件的后缀为 .msu*（是的，不是 .msi）- 然后您可以使用任何 MSI 编辑器（如 Orca（在平台 SDK 中）或 Insted（再次））读取 ProductCode。看看属性表，就在那里。

大多数时候不推荐依赖 ProductCodes。如果您确定，您确切地想要那个 KB 作为先决条件，没关系。对于知识库以外的其他东西，我根本不建议这样做。

更好：如果可能，我会搜索 KB 执行的文件/注册表更改，并自己在程序中使用它（例如文件版本或注册表 GUID）来检查它是否已安装。文件版本（如果已更改）是一种很好的做法，因为您不仅仅依赖于一个修补程序，例如下次更改包含在 ServicePack 或新的 Windows 版本中等时。

我已经完成了诸如编写程序之类的事情，以确保根据不同的 Windows 版本满足许多不同的先决条件，而且我可以说，要做到完美，有时这是一项艰苦的工作，你可以花费数周和数月的时间。

# sql-server - 在 db 中自动递增的 id 之间的差距

> ID：15950123
> 
> 赞同：-1
> 
> 时间：2013-04-11T13:30:55.197
> 
> 标签：sql-server, database

我的数据库中有一个表，其 id 是 int auto increment。当我创建一个 ndew 条目时，一切顺利，id 增加 1。

但是今天我看到了一个大洞。其中一条记录的 id=56，下一条记录的 id=1055。

这是什么原因造成的。我们没有在这个数据库上做备份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:38:33.707

很可能在插入或事务回滚时出现了一些错误。表的标识值不受事务影响。因此，例如，即使您在表中插入一个值并回滚事务，您的身份值也将“保持递增”。简短的例子来说明：

```
create table _test (
    id int identity (1,1)
    ,txt varchar(2)
)
insert into _test(txt)
select 'aa' as txt

insert into _test(txt)
select 'bb' as txt union all 
select 'ccc'

GO

insert into _test(txt)
select 'dd' as txt

select * from _test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:33:17.847

有几件事会导致这种情况

1.  有人通过运行重新播种`DBCC CHECKIDENT`
2.  有人插入了一堆行并删除了它们
3.  尝试插入一批行，该批失败，一切都回滚，SQL Server 不重用标识值

还请记住，如果您使用`DELETE`语句删除所有行，则种子不会重置为 1，如果您`TRUNCATE`是表，则它是

# ruby-on-rails - 如何在 erb 模板中呈现数组数组的最佳方式？

> ID：15950128
> 
> 赞同：3
> 
> 时间：2013-04-11T13:31:08.270
> 
> 标签：ruby-on-rails, ruby, object, sinatra, erb

我有一个数组`[["Company Name", "Field6"], ["Email", "Field5"]]`

从该数组中，我正在创建具有值的字段数组：

```
[
  [{:label=>"Company Name", :value=>"gfdgfd"}],
  [{:label=>"Email", :value=>"gfdgfd@gfd.pl"}]
] 
```

使用

```
fields = [["Company Name", "Field6"], ["Email", "Field5"]]
# first element in array is Label and second is param id
fields_with_values = fields.collect do |field| 
 [
   label: field[0],
   value: params[field[1]]
 ]
end 
```

然后我想将该标签和值传递给 erb 模板（类似）：

```
# template.erb
<% fields_with_values.each do |field| %>
  l: <%= field.label %>
  v: <%= field.value %>
<% end %> 
```

收集这些 fields_with_values 的最佳方式是什么？也许我应该使用 Object.new

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:54:59.530

改为转换为哈希。

```
fields = [["Company Name", "Field6"], ["Email", "Field5"]]

fields_with_values = Hash[*fields.flatten]
# => {"Company Name"=>"Field6", "Email"=>"Field5"} 
```

在您看来，请解析哈希：

```
<% fields_with_values.each do |label, value| %>
  l: <%= label %>
  v: <%= params[value.intern] %>
<% end %> 
```

请注意，如果您的输入数组不均匀，这将中断，即。没有值的键。

* * *

### 编辑

正如下面的评论 (+1) 中所述，重复键将不起作用。与另一个字段具有相同标签的字段是不好的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:57:13.210

```
fields = [["Company Name", "Field6"], ["Email", "Field5"]]
# first element in array is Label and second is param id

fields_with_values = fields.collect do |label, param_id| 
  # It looks like there is no need for a nested array here, so just return a Hash
  {
    label: label,
    value: params[param_id]
  }
end

#=> [{:label=>"Company Name", :value=>"gfdgfd"}, {:label=>"Email", :value=>"gfdgfd@gfd.pl"}] 
```

看起来您正在尝试使用点语法从 Ruby 哈希中获取值，类似于您对 JavaScript 对象（例如`field.label`）使用点语法的方式。不幸的是，这不适用于 Ruby。我希望它这样做，因为它看起来很干净。对于 Ruby 哈希，您必须使用索引，在这种情况下它是一个符号：`field[:label]`. 您的 ERB 代码将如下所示：

```
# template.erb
<% fields_with_values.each do |field| %>
  l: <%= field[:label] %>
  v: <%= field[:value] %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:52:33.773

最简单的最基本方法是：

```
class Foo
 attr_accessors :label, :value
 def initialize (label, value)
   @label = label
   @value = value
 end
end

fields_with_values = fields.map do |field|
   Foo.new(field[0], params[field[1]])
end 
```

从这里开始，您可以使用 splat 运算符使其更加 Ruby 方式或动态创建对象等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:57:24.670

升：五：

我会做

```
fields_with_values = fields.collect do |field|
  {label: field[0], value: params[field[1]}
end 
```

并且在视图中

```
<% fields_with_values.each do |field| %>
  l: <%= field[:label] %>
  v: <%= field[:value] %>
<% end %> 
```

但是，假设标签是一家公司，价值是一封电子邮件。如果你有一个像

```
class Company < SomethingOrNothing
  attr_accessible :name, email

  # methods here
end 
```

你可以做

```
@companies = fields.collect do |field|
  Company.new(name: field[0], email: field[1]) 
end 
```

接着

```
<% @companies.each do |company| %>
  l: <%= comapny.name %>
  v: <%= company.email %>
<% end %> 
```

但是，很可能为此创建一个新类是过度工程，除非您将在代码中一遍又一遍地使用这个类。

# c# - 如何创建转换列表的扩展方法 到另一个列表 运行时的不同类型？

> ID：15950129
> 
> 赞同：0
> 
> 时间：2013-04-11T13:31:08.507
> 
> 标签：c#, generics, type-conversion

我知道以前有人问过这个问题，但是我尝试过的解决方案从未考虑过可为空的类型。

我需要一些能够处理转换的东西

> List<string> 到 List<Int32?>，List<string> 到 List<int>，List<string> 到 List<double>

等等

我正在尝试创建如下内容

```
private void RoutineCompleted(string category, List  Type fieldType = null)
{

//ToNewType is the extension method that I need.
var var convertedList = values.ToNewType(fieldType);

} 
```

我查看了以下代码，但它没有完成这项工作：

```
 public static IEnumerable Cast(this IEnumerable self, Type innerType)
    {
        var methodInfo = typeof(Enumerable).GetMethod("Cast");
        var genericMethod = methodInfo.MakeGenericMethod(innerType);
        return genericMethod.Invoke(null, new object[] { self }) as IEnumerable;
    } 
```

谁能帮我解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:35:29.370

`Convert.To...`如果您可以使用方法进行转换，则不需要扩展

```
List<string> strList = ...
List<int> intList = strList.Select(s => Convert.ToInt32(s)).ToList(); 
```

或者你可以使用`Convert.ChangeType`

```
public static IEnumerable<TOut> ConvertTo<TIn, TOut>(this IEnumerable<TIn> list)
{
    return list.Select(o => (TOut)Convert.ChangeType(o, typeof (TOut)));
}

List<string> strList = new List<string>();
IEnumerable<int> intList = strList.ConvertTo<string, int>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:41:31.643

您正在谈论的转换本身不是强制转换，而是类型转换。

您可以使用 Linq 来完成它们，例如：

```
var ints = new List(){1,2,3,4,51};
var strings = array.Select(x => x.ToString()); 
```

或者

```
var strings = new List() {"1.56","2.71","3.14"};
var doubles = strings.Select( x => Convert.ToDouble(x)); 
```

这些为您提供 IEnumerables，但您可以使用`.ToList()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:40:53.817

你可以试试这个：

```
public static IEnumerable<TTo> ChangeType<TTo, TFrom>(this IEnumerable<TFrom> self)
{
    return self.Select(e => (TTo)Convert.ChangeType(e, typeof(TTo)));
} 
```

**编辑：**

如果你不想使用泛型，你必须通过 type:`Type`像这样：

```
var list = new List<string> {"1", "3", "4", null};
var result = list.ChangeType(typeof (int?)); 
```

你可以尝试使用这个：

```
public static IEnumerable ChangeType(this IEnumerable self, Type type)
{
   var converter = TypeDescriptor.GetConverter(type);
   foreach (var obj in self)
   {
       yield return converter.ConvertFrom(obj);
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:43:28.780

这是一个简单的 LINQ `Select`：

```
IEnumerable<string> values = new[] { "1", "2", "3" };
var converted = values.Select(PerformConversion);

private int? PerformConversion(string input)
{
   ...
} 
```

每次转换都需要不同的方法，或者包含所有转换的参数化方法。例如：

```
private T? PerformConversion<T>(string input) where T : struct, IConvertible
{
    return (T?) Convert.ChangeType(input, typeof(T));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T14:00:49.710

Convert 类不能处理 Nullable 类型，所以我必须对它们进行特殊处理。

```
 static void Main(string[] args)
    {
        var strings = new[] { "1","2","3"};
        var ints = strings.ConvertItems<string, int>().ToList();
        var doubles = strings.ConvertItems<string, double>().ToList();
        var nullableints = strings.ConvertItems<string, int?>().ToList();
    }

    public static IEnumerable<TargetType> ConvertItems<SourceType, TargetType>(this IEnumerable<SourceType> sourceCollection)
    {
        var targetType = typeof(TargetType);
        if (targetType.IsGenericType && targetType.GetGenericTypeDefinition() == typeof(Nullable<>))
        {
            targetType = targetType.GetGenericArguments().First();
        }
        return sourceCollection.ConvertItems((source) => (TargetType)Convert.ChangeType(source, targetType));
    }

    public static IEnumerable<TargetType> ConvertItems<SourceType, TargetType>(this IEnumerable<SourceType> sourceCollection, Converter<SourceType, TargetType> convertor)
    {
        foreach (var item in sourceCollection)
        {
            yield return convertor(item);
        }
    } 
```

编辑：弱类型版本，当您只知道运行时的类型时

```
static void Main(string[] args)
    {
        var strings = new[] { "1","2","3"};
        var ints = strings.ConvertItems(typeof(int));
        var doubles = strings.ConvertItems(typeof(double));
        var nullableints = strings.ConvertItems(typeof(int?));
        foreach (int? item in nullableints)
        {
            Console.WriteLine(item);
        }
    }

    public static IEnumerable ConvertItems(this IEnumerable sourceCollection,Type targetType)
    {
        if (targetType.IsGenericType && targetType.GetGenericTypeDefinition() == typeof(Nullable<>))
        {
            targetType = targetType.GetGenericArguments().First();
        }
        foreach (var item in sourceCollection)
        {
            yield return Convert.ChangeType(item, targetType);
        }
    } 
```

# performance - 增加cpu核心与性能直接相关？

> ID：15950133
> 
> 赞同：0
> 
> 时间：2013-04-11T13:31:18.293
> 
> 标签：performance, architecture, computer-architecture

简单的问题，增加与性能直接相关的核心？

我的理解（如果我错了，请纠正我）是在多核系统中，与单核相比，通信开销和内存延迟是性能的限制因素。也许具有大型 L1 和 L2 缓存的单核系统可以比 Core 2 Duos 执行得更好？但是，为什么在几乎每一个新架构中，内核的数量都在增加。我来这里一定是有原因的。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:49:34.797

这取决于您的软件。如果您的 CPU 密集型计算任务不使用太多外部通信并且需要并行处理 - 多核是垂直扩展的方式。与单核 CPU 相比，它的性能要好得多……因为它可以并行执行计算任务（再次取决于您利用并行执行的特定任务）。例如，数据库服务器通常利用并行处理并在多核 CPU 上大幅扩展。

一旦垂直限制耗尽，您可以通过在集群中引入多个节点来水平扩展，并且您需要协调任务执行。

所以对于你的问题：

> 但是，为什么在几乎每一个新架构中，内核的数量都在增加。

原因之一是软件不断发展以利用并行处理和硬件来满足这种需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T16:08:00.440

通常，在扩展系统中的核心数量时，内存延迟和带宽都是一个问题。注意：可能有专门的例外，但总的来说，大多数现代系统在 6 个以上的硬件内核访问内存之前不会开始遇到内存瓶颈。

然而，通信开销可能非常昂贵。造成这种情况的技术原因非常复杂，超出了我的回答范围——某些方面与硬件有关，但其他方面仅与一个核心阻塞另一个核心完成计算的成本有关..两者都很糟糕。因此，使用多个内核的程序/应用程序通常必须在内核之间尽可能少地通信。这限制了可以卸载到单独内核的任务类型。

新系统正在添加更多内核仅仅是因为它在技术上是可行的。例如，提高单核性能在技术上和经济上都不再可行。我认识的几乎所有应用程序程序员都绝对更喜欢单个超快内核，而不是必须弄清楚如何有效地利用 12 个内核。但是，即使你给他们数千万美元，芯片制造商也无法生产出这样的核心。

只要光速是一个固定常数，并行处理就会一直存在。就像今天一样，CPU 中的大部分速度改进是由于单个指令的并行处理。Core 2 Duo（例如）将尽可能多地并行运行四个指令。这是有效的，因为在许多程序中，指令序列通常不会立即相互依赖：

1.  a = g_Var1 + 1;
2.  b = g_Var2 + 3;
3.  c = b * a;
4.  d = g_Var3 + 5；

现代 CPU 实际上会并行执行第 1,2 行和第 4 行，然后加倍返回并完成第 3 行——通常与第 5,6 行等中的任何内容并行执行。（假设其中任何一个都不需要'c'变量结果）。这是必要的，因为我们加速或缩短执行任何单个指令的管道的能力非常有限。因此，工程师们一直专注于“走向广泛”——更多并行指令、更多并行内核、更多并行计算机（最后一个类似于云计算、BOINC 或@home 项目）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T16:55:59.320

您假设核心*可以*变得更加复杂。在这一点上，这不是一个安全的假设。

您可以一次执行更多指令（“更宽”）或为更高频率执行更多指令（“更深”）。

这两种方法的收益都在递减。更宽的芯片依赖于指令级可用的并行性，在最好的情况下它基本上不超过大约 3 宽，通常约为 1。更深的芯片存在功率和热量问题（由于电压增加，功率通常与频率成二次方比例，而与核心数量成线性比例）并损害分支错误预测的恢复时间。

我们做多核芯片不是因为我们想做，而是因为我们没有更好的选择。

# javascript - PhoneGap 应用程序：通过 API 进行 FB 分享，无需 FB 弹出窗口

> ID：15950134
> 
> 赞同：1
> 
> 时间：2013-04-11T13:31:18.617
> 
> 标签：javascript, facebook, cordova, sdk, share

我们计划构建一个 PhoneGap 应用程序，并希望让用户能够在 Facebook 上共享信息。

我们想知道这是否可以在不离开我们的应用程序的情况下使用 FB JavaScript SDK 实现，这意味着无需 FB 打开其共享对话框。

好吧，如果有可能有人知道一个教程，它描述了我们将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:59:27.950

如果您向用户请求 PUBLISH_STREAM 权限，则根本不会出现对话框。

# erlang - 完全对 Riak + Erlang 的 riakc 客户端中的 MapReduce 感到困惑

> ID：15950139
> 
> 赞同：0
> 
> 时间：2013-04-11T13:31:28.803
> 
> 标签：erlang, riak

我在这里感到困惑的主要事情（我认为）是 qfun 的参数应该是什么以及返回值应该是什么。[自述文件](https://github.com/basho/riak-erlang-client)基本上没有说明这一点，它给出的示例丢弃了第二个和第三个参数。

现在我只是想理解这些论点，而不是把 Riak 用于任何实际的事情。最终，我将尝试用它重建我们的（缓慢的、基于 MySQL 的）财务报告系统。所以在这里忽略我的目标的无意义，为什么下面给我一个`badfun`例外？

数据只是名称和年龄的元组（对），键是名称。在从 Erlang 控制台插入数据之前，我没有对 JSON 等进行任何转换。

现在存储了一些`{Name, Age}`对，`<<"people">>`我想使用 MapReduce（除了了解“如何”之外没有其他原因）来获取值，在第一次使用时保持不变。

```
riakc_pb_socket:mapred(
    Pid, <<"people">>,
    [{map, {qfun, fun(Obj, _, _) -> [Obj] end}, none, true}]). 
```

但是，这只是给我带来了麻烦：

```
{error,<<"{\"phase\":0,\"error\":\"{badfun,#Fun<erl_eval.18.17052888>}\",\"input\":\"{ok,{r_object,<<\\\"people\\\">>,<<\\\"elaine\\\">"...>>} 
```

我如何只通过我的地图函数传递数据不变？有没有比 README 更好的 Erlang 客户端文档？该自述文件似乎假设您已经知道输入是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T21:09:32.793

有 2 个 Riak Erlang 客户端服务于不同的目的。

第一个是包含在 riak_kv 模块（riak_client.erl 和 riak_object.erl）中的内部 Riak 客户端。如果您连接到 Riak 控制台，或者您正在编写 MapReduce 函数或提交挂钩，则可以使用此功能。由于它是在 Riak 节点内运行的，因此它与 qfus 配合得非常好。

[另一个客户端是Erlang](https://github.com/basho/riak-erlang-client)的官方Riak 客户端，由外部应用程序使用，并通过协议缓冲区接口连接到 Riak。这就是您在上面的示例中使用的内容。由于它通过协议缓冲区连接，因此通常建议将 Erlang 中的 MapReduce 函数编译并[部署在集群的节点上作为命名函数](http://docs.basho.com/riak/latest/cookbooks/Erlang-Named-Functions/)。这也将使它们可以从其他客户端库访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:09:15.873

我认为我的代码实际上是正确的，我的问题在于我试图使用 shell 来执行代码。我需要实际编译代码才能在 Riak 中运行。这是 Erlang shell 及其编译方式的限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T07:52:57.470

在玩了几天之后，这里有一个巧妙的技巧，可以让开发更容易。利用 Erlang 的 RPC 支持以及它具有运行时代码加载的事实，将您的代码分发到所有 Riak 节点：

```
%% Call this somewhere during your app's initialization routine.
%% Assumes you have a list of available Riak nodes in your app's env.
load_mapreduce_in_riak() ->
  load_mapreduce_in_riak(application:get_env(app_name, riak_nodes, [])).

load_mapreduce_in_riak([]) ->
  ok;
load_mapreduce_in_riak([{Node, Cookie}|Tail]) ->
  erlang:set_cookie(Node, Cookie),
  case net_adm:ping(Node) of
    pong ->
      {Mod, Bin, Path} = code:get_object_code(app_name_mapreduce),
      rpc:call(Node, code, load_binary, [Mod, Path, Bin]);
    pang ->
      io:format("Riak node ~p down! (ping <-> pang)~n", [Node])
  end,
  load_mapreduce_in_riak(Tail). 
```

现在您可以引用模块中的任何函数，`app_name_mapreduce`它们将对 Riak 集群可见。如果需要，可以使用 code:delete/1 再次删除代码。

# powershell - 为什么 PowerShell 函数不能返回 MessageQueue 对象？

> ID：15950141
> 
> 赞同：1
> 
> 时间：2013-04-11T13:31:31.997
> 
> 标签：powershell, pipeline

我编写了以下函数的变体来返回一个`System.Messaging.MessageQueue`对象：

```
set-strictmode -version latest
add-type -AssemblyName System.Messaging
$VerbosePreference = 'Continue'
$DebugPreference = 'Continue'

function Get-MsmqQueue1 {
    New-Object "Messaging.MessageQueue" -Args '.\private$\barneytest'
}

function Get-MsmqQueue2 {
    $q = New-Object "Messaging.MessageQueue" -Args '.\private$\barneytest'
    $q
}

function Get-MsmqQueue3 {
    $q = New-Object "Messaging.MessageQueue" -Args '.\private$\barneytest'
    Write-Output $q
}

function Get-MsmqQueue3a {
    $q = New-Object "Messaging.MessageQueue" -Args '.\private$\barneytest'
    if ($q) {
        Write-Debug "Successfully created $($q.QueueName)"
    } else {
        Write-Error "No queue object created"
    }
    Write-Output $q
}

$q = Get-MsmqQueue3a
$q
if ($q) {
    Write-Debug $q.QueueName
} else {
    Write-Error "No queue object returned"
} 
```

它们都没有返回对象。它以某种方式被 PowerShell 吞并。请注意，“3a”版本具有日志记录以证明它写入管道的值*不是 null*，但*函数没有返回任何值*。

怎么会这样？这是一个 PowerShell 错误吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:50:26.200

我是个白痴。这不是一个错误，但它很有趣。因为`System.Messaging.MessageQueue`通过`System.Collections.IEnumerable`枚举它的消息来实现，所以我看到的行为是 PowerShell 实际上是从新创建的队列中读取消息并将它们放入管道而不是队列对象本身。当然，因为队列是新的，它们是空的，所以没有任何东西通过管道传递。

我今天下午的大部分时间和今晚的几个小时都在解决这个问题。我并不为自己感到骄傲。

# c# - C#在时间中删除部分字符串

> ID：15950142
> 
> 赞同：-6
> 
> 时间：2013-04-11T13:31:34.977
> 
> 标签：c#, asp.net

我有这个正在输出

**09:19:30.5070000 上午**

但我想看起来像这样**09:19:30 AM**

如何使用代码删除字符串末尾的那些额外毫秒？

被存储在`time.Text`

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:34:19.473

`DateTime.ToString("T")`我认为应该工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:42:32.087

```
string time = "09:19:30.5070000 AM";

StringBuilder sb = new StringBuilder(time);
string final = sb.Remove(8, 8).ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:41:29.863

如果它是一个，你可以试试这个`string`：

```
string strDate = "09:19:30.5070000 AM";
DateTime datDate;           
if (DateTime.TryParseExact(strDate,"hh:mm:ss.fffffff tt",
    System.Globalization.CultureInfo.InvariantCulture,
    System.Globalization.DateTimeStyles.None, out datDate))
{
    //Console.WriteLine(datDate.ToString("hh:mm:ss tt"));
     time.Text=datDate.ToString("hh:mm:ss tt");

} 
```

# c++ - 使用/购买 Qt SDK（包括 Qt Creator 等）

> ID：15950143
> 
> 赞同：2
> 
> 时间：2013-04-11T13:31:37.337
> 
> 标签：c++, qt, licensing, qt-creator

我目前正在学习 C++（我知道我必须在创建 GUI 应用程序之前学习所有内容，可能首先在控制台上，但是）

在搜索 SDK 时——这将有助于创建我的应用程序的 GUI——让我自己编写重要的代码——我找到、下载并安装了一个 C++ IDE；**[Qt SDK](http://qt.digia.com/)**（Qt Creator 试用 30 天；*版本 2.5.2*，基于*Qt 4.8.2*）。

我的问题是：

*   如果我喜欢该应用程序，并且试用期到期并且我想购买该应用程序，那么许可证将花费我多少钱？如果你们中的任何人使用过或使用过这个应用程序，你花了多少钱？（我检查了他们的网站，说实话，这非常令人生畏，并且没有包含有关定价等的信息。）
*   哪个许可证足以让我从网站创建应用程序并在线销售它们。（我显然是想避免买错许可证而惹上麻烦！）

如果你能帮助我，谢谢！如果这是一个非问题或不适合本网站，请给我参考等。**`:)`**

* * *

**笔记！**

我的应用程序将是闭源的（商业的，不是免费的，不包括一些）。我猜这会影响适用于我的许可条款/类型。

另外，如果我何时购买了该软件，我是否必须提及我使用过它或提供任何参考资料等？？

* * *

**澄清**

为了澄清，我的需求如下：

*   我的软件可能是免费的，也可能不是免费的（每个都有免费和付费版本）
*   我的软件的源代码不应该可用，我特别希望我的应用程序是封闭源代码的，即没有人可以访问用于构建它的源代码。
*   我将从网站（公司网站）销售/分发我的软件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T13:50:10.623

不要下载商业许可版本的试用版，而是在 [此处](http://qt-project.org/downloads)下载免费版本。请注意该页面右上角的信息：

> Qt 在 GPL v3、LGPL v2 和[商业许可](http://qt.digia.com/download)下可用。[在此处](http://qt-project.org/products/licensing)了解有关许可证的更多信息。

根据您对问题的评论，有适用于闭源商业应用程序的许可选项。IIRC 的主要限制是您不得对非商业许可证使用静态链接。查看[此处](https://stackoverflow.com/questions/7214764/static-vs-dynamic-libraries)和[此处](https://stackoverflow.com/questions/1993390/static-linking-vs-dynamic-linking)以了解有关静态与动态链接的更多信息。上面链接上的 Qt 二进制包已经编译为动态链接，所以如果你使用现成的（而不是自己编译），你不必担心它。部署应用程序时，只需确保包含相关的动态库文件（Windows 上的 .DLL）。

除了 Qt 网站上的链接，您可以在此处研究更多关于许可证类型的信息：

**GPL**

[维基百科](http://en.wikipedia.org/wiki/GNU_General_Public_License)。

[GNU](https://gnu.org/licenses/gpl.html) .

**LGPL**

[维基百科](http://en.wikipedia.org/wiki/GNU_Lesser_General_Public_License)。

[GNU](http://www.gnu.org/copyleft/lesser.html) .

根据您在编辑和评论中的描述，LGPL（免费）许可证似乎适合您。来自维基百科：

> LGPL 允许开发人员和公司使用 LGPL 软件并将其集成到他们自己的（甚至是专有的）软件中，而无需（根据强大的 copyleft 条款）发布他们自己的软件部分的源代码。只是 LGPL 软件部分需要由最终用户修改（通过源代码可用性）：因此，在专有软件的情况下，LGPL 部分通常以共享库（例如 DLL）的形式使用，所以专有部分和开源 LGPL 部分之间有明显的区别。

请注意，这使您的用户能够更新/修改 Qt 依赖项，但不能让他们查看或修改构建在 Qt 之上的源代码*。*如果您不希望这样做，您需要使用静态链接并购买商业许可证。

# .net-remoting - 无法连接到 IPC 端口：系统找不到指定的文件

> ID：15950146
> 
> 赞同：6
> 
> 时间：2013-04-11T13:31:41.717
> 
> 标签：.net-remoting

在我的 .net 2.0 应用程序中，远程对象突然被破坏并引发了以下异常。“无法连接到 IPC 端口：系统找不到指定的文件。”

我有 IPC 远程服务器，它创建了一个单例对象。

我已经覆盖了 InitializeLifetimeService() 方法并返回 null 以获得无限的生命周期。

服务器和客户端应用程序工作正常，但有时我们会遇到上述异常。

服务器代码：

//创建并注册进程心跳。BinaryServerFormatterSinkProvider serverprovider = new BinaryServerFormatterSinkProvider(); serverprovider.TypeFilterLevel = System.Runtime.Serialization.Formatters.TypeFilterLevel.Full；//承载 Heartbeat 对象并注册它。processHeartbeatChn = new IpcServerChannel("HeartbeatChannel", "localhost:" + applicationHeartbeatPort, serverprovider);

```
 //registers the channel
            ChannelServices.RegisterChannel(processHeartbeatChn, false);

            //register the service
            RemotingConfiguration.RegisterWellKnownServiceType(typeof(Heartbeat),
                appName, WellKnownObjectMode.Singleton); 
```

客户代码：

```
 string uri = string.Format(CultureInfo.InvariantCulture,"ipc://localhost:{0}/{1}", applicationHeartbeatPort, appName);

            //get the Heartbeat object
            remoteHeartbeat = (Heartbeat)Activator.GetObject(typeof(Heartbeat), uri); 
```

有什么热修复可以解决这个问题吗？

有人可以帮我吗？

# asp.net - 我应该使用类库项目还是新的 Web 应用程序？

> ID：15950148
> 
> 赞同：0
> 
> 时间：2013-04-11T13:31:49.170
> 
> 标签：asp.net, web-applications, class-library

我对整个编码事情很陌生（因此得名）。我最近编写了我的第一个网站 asp.net 4/Visual Studio 等。

我现在想编写一些可以在网站之间共享的代码（仅限我自己的）。起初我想到了一个可插入的类库解决方案来集中存储代码，但是，似乎类库没有配置文件之类的东西来存储我的配置，我开始怀疑类库是否是正确的选择，或者另一个 Web 应用程序是否更适合。

解决方案将是代码/配置，没有页面。

所以，有几个问题。

可以将 Web 应用程序合并到另一个 Web 应用程序中吗？

Web 应用程序是正确的方式还是我应该坚持使用类库解决方案？

在做出这样的决定之前，我应该遵循一份清单吗？

抱歉，如果这些问题看起来相当基本，但正如我所说，我在这方面的经验很少。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:39:10.797

我总是将类库与我的 Web 应用程序混合使用。我为每个 Web 应用程序提供了许多类库。您的类库将有权访问 Web 应用程序的 Web.config 文件，您只需添加`System.Configuration`命名空间。

我会将我们的类库分解成逻辑部分。例如，我有一个用于数据库访问、第三方 API 访问和另一个用于活动目录访问的类库。将您的库分解为可以在其他 Web 应用程序中轻松重用的逻辑部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:30:06.927

通过类库项目将您的网页与逻辑分开绝对是一个好主意。

“一个网络应用程序可以合并到另一个网络应用程序中吗？” 我相信只有编译后的代码可以合并到其他项目中，并且不包括 aspx 页面，所以不。

“网络应用程序是正确的方式还是我应该坚持使用类库解决方案？” - 我更喜欢具有单独类库的 Web 应用程序。以您需要单独的面向客户端和管理站点的实例为例，也许您有一个呼叫中心版本，它是（例如）本机 winforms 应用程序。我会有一个包含两个 webapp 项目、一个 winforms 项目和共享类库的解决方案，以支持所有三个 UI 版本。我们还有几个独立的库（例如，与 Web 应用程序不同的解决方案），例如我们的日志记录或自定义身份验证解决方案，我们将它们放入新的 Web 应用程序解决方案中。

“在做出这样的决定之前，我应该遵循一份清单吗？” - 我创建了一个 VS 模板，默认情况下有一个 Web 应用项目和一个类库。我不认为有任何选择可以做出，这就是我们所做的。

# linux - 哪个更快？`echo`ing 一个变量，或者 `tail`ing 一个长的输出文件，或者可能 `grep`ing 整个事情

> ID：15950153
> 
> 赞同：2
> 
> 时间：2013-04-11T13:31:57.577
> 
> 标签：linux, performance, bash, grep, tail

我很好奇在以下情况下哪个更快。我有大约 2MB 的输出文件和数千行（我们会说在 15k - 50k 之间的任何地方）。

我正在文件末尾（最后 10 行）左右寻找一个字符串。我多次这样做，有时使用相同的文件的最后 10 行，并且用于多个文件。

我很好奇以下哪个是最快和最有效的：

1.  `tail`最后 10 行，将它们保存为变量。当我需要`grep`或检查字符串时，`echo`该变量和`grep`输出
2.  每次我需要`grep`一些东西时，首先`tail`是输出文件，然后`pipe`是`grep`输出
3.  放弃上述任何一项，`grep`每次只放弃整个文件。

选项1）

```
if [ -f "$jobFile".out ]; then
{
  output=$(tail -n 10 "$jobFile".out)
  !((echo "$output" | grep -q "Command exited with non-zero status" ) 
    || (echo "$output" | grep -q "Error termination via Lnk1e")) 
    && continue
  {
    output "$(grep $jobID $curJobsFile)"
    sed -i "/$jobID/d" "$jobIDsWithServer"
  }
fi 
```

选项 2)

```
if [ -f "$jobFile".out ]; then
{
  !((tail -n 10 "$jobFile".out | grep -q "Command exited with non-zero status" ) 
    || (tail -n 10 "$jobFile".out | grep -q "Error termination via Lnk1e")) 
    && continue
  {
    output "$(grep $jobID $curJobsFile)"
    sed -i "/$jobID/d" "$jobIDsWithServer"
  }
fi 
```

选项 3)

```
if [ -f "$jobFile".out ]; then
{
  !((grep -q "Command exited with non-zero status" "$jobFile".out) 
    || (grep -q "Error termination via Lnk1e" "$jobFile".out)) 
    && continue
  {
    output "$(grep $jobID $curJobsFile)"
    sed -i "/$jobID/d" "$jobIDsWithServer"
  }
fi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:43:08.693

选项 2 使用 tail 两次，因此可能会比 1 稍慢。两者都比选项 3 快很多。

您可以做的另一件事是：

```
if [ -f "$jobFile".out ]; then
{
  !(tac "$jobFile".out | 
    grep -E -m1 -q "(Command exited with non-zero status|Error termination via Lnk1e)")
    && continue
  {
    output "$(grep $jobID $curJobsFile)"
    sed -i "/$jobID/d" "$jobIDsWithServer"
  }
fi 
```

这将以[相反的顺序](http://linux.about.com/library/cmd/blcmdl1_tac.htm)输出文件，并且 grep 将在第一次匹配后停止。它还将同时搜索两个搜索词，如果它与第一个词不匹配，则无需两次 grep。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:08:48.370

为什么不这样：

```
if tail -f "$jobfile.out" \ 
    | grep -F -e "Command exited with non-zero status" -e "Error termination via Lnk1e"
then
   output "$(grep $jobID $curJobsFile)"
   sed -i "/$jobID/d" "$jobIDsWithServer"
fi 
```

通过这种方式，您可以实时搜索尾部的输出，直到找到您要查找的内容。

当您不使用正则表达式时，在 grep 中使用该`-F`标志会更快。

# mercurial - Mercurial 管理同一项目的细微变化/配置

> ID：15950158
> 
> 赞同：1
> 
> 时间：2013-04-11T13:32:07.297
> 
> 标签：mercurial, configuration-management, multiple-projects

我目前正在使用 Mercurial 以及 Guestrepo 扩展来管理和版本化项目的不同组件。我已经有了一个相当稳定的工作流程来管理不同版本的组件。

但是，在对组件的细微变化进行版本控制时，我想不出一个有效的解决方案。例如，这是一个稍微不同的嵌入式设备驱动程序（例如不同的串行端口速度），或者一个用英语而不是德语编写的 GUI。

我不认为将它们堆叠在 Release/Stable 分支中是一个好的工作流程，因为不同配置（英语、西班牙语、中文……）的扩散可能会导致 Release 分支严重且无意义的膨胀。

另一方面，为每个分支创建一个单独的 Release 分支会导致我有很多很多分支，恕我直言，这不是最好的解决方案。

每当必须进行结构更改时，为每个配置创建单独的存储库将假设一项非常繁琐的任务，因为所有存储库都必须随着该更改进行更新。

对此有任何想法吗？

谢谢你。

* * *

正如@EldadAK 建议的那样，为每个配置创建一个存储库并从其他存储库导入核心功能似乎是个好主意。

但是，我仍然不知道如何安排“相同但略有不同”的组件，这些组件在一些细微的功能上有所不同，但它们的核心相同。

是代码架构问题吗？是否应该重构组件，以便主要核心和不同功能位于不同的组件中，这些组件使用每个配置的自定义构建相关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:12:05.933

IMHO, you should keep all changes in your main branch. Managing all branches or even multiple repositories is not scalable and will eventually get out of hand.

I don't think you should care about the size of your release branch. By keeping it all together, you will always know where you are, what is included in a release and when you really need to branch, have all the changes accumulated to that point.

It's my personal opinion that you should try and keep it simple to manage looking many revisions and years ahead...

Note - Project managers tend to think about next week. You need to think about next year...

I hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:21:17.187

> 对组件的细微变化进行版本控制时的有效解决方案

虽然我看不出在*一个 repo*中使用命名分支有任何严重的缺点，但您可以在 Mercurial 中使用另一种（“默认”事实上的）解决方案进行配置管理：[MQ](http://mercurial.selenic.com/wiki/MqExtension)

您只需稍微采用 MQ 的工作流程（相同数量的分支，相同数量的存储库）

# java - 在 for 循环中返回一系列打印语句

> ID：15950163
> 
> 赞同：0
> 
> 时间：2013-04-11T13:32:14.980
> 
> 标签：java

我有一个包含用户将输入其元素的数组列表的类。我想我可以成功地将元素添加到这个数组列表中，但我无法判断，因为我无法输出数组列表。我想在主程序中调用 viewNYC 方法，并让它在 cmd 提示符中显示其元素列表。任何人都可以帮忙吗？

```
import java.util.*;

class Hotels{

    public static ArrayList NYC = new ArrayList();

    public static String[] NYCArray = (String[])NYC.toArray(new String[NYC.size()]);

    public static void addNYC(String hotel){
        String NYChotel = hotel;
        NYC.add(NYChotel);
    }

    public static void viewNYC(){   //Will be called in main programme

        for(int i=0; i< NYCArray.length; i++){
            return System.out.println(i+1 + ") \t" + NYCArray[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:34:31.850

的返回类型`viewNYC`是`void`。删除循环`return`中的关键字：`for`

```
for (int i = 0; i < NYCArray.length; i++) {
   System.out.println(i + 1 + ") \t" + NYCArray[i]); // no "return"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:43:19.217

首先，从 sysout 中删除 return 语句：

```
System.out.println(i + 1 + ") \t" + NYCArray[i]); 
```

此外，如果我阅读了您的代码，我可以看到您有一个静态 String[] NYCArray，它不会在您的代码示例中更新。

因此，如果您 addNYC 是一家酒店，它将在 NYCArray 中不可见，此更新应在 addNYC 结束时完成（使用 ArrayList 的新大小创建一个新数组并将内容设置为您的 ArrayList 的内容）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:52:45.933

您确实在向 NYC 添加元素，但这些更改不会反映在 NYCArray 中。该行：

```
public static String[] NYCArray = (String[])NYC.toArray(new String[NYC.size()]); 
```

将 NYCArray 声明为字符串数组，并将其初始值设置为 NYC 的数组“副本”。但是，这条线只会运行一次，此时纽约市仍然是空的！

如果要打印 NYC 的内容，请执行以下操作：

```
System.out.println(Arrays.toString(NYC.toArray())); 
```

除非您有充分的理由保留它，否则我会完全摆脱 NYCArray。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:40:50.723

您的程序是否正在编译，因为它应该通过编译错误（无效方法无法返回值）在

```
 return System.out.println(i+1 + ") \t" + NYCArray[i]); 
```

因为

```
System.out.println() 
```

不返回任何东西。如果要打印数组，请使用

```
System.out.println(Arrays.deepToString(NYCArray)); 
```

# java - 在jsp页面中创建对象

> ID：15950166
> 
> 赞同：2
> 
> 时间：2013-04-11T13:32:26.987
> 
> 标签：java, jsp, servlets, syntax

我正在开发一个网络应用程序。我有一个调度程序 servlet，它成功调用了一个 JSP 页面，但是这个 JSP 必须从其他对象读取数据......但它会找到它......

这是不会找到“BackendServer”类的行。它给了我一个 ClassNotFoundException 错误...

```
 <%=new BackendServer().run("getCar")%> 
```

基本上上面的代码行在 JSP 中......如果我删除它，应用程序运行良好，没有此行的输出

我以这种方式在顶部导入了 BackendServer：

```
 <%@page import="com.servlet.java.*"%> 
```

如何让我的 JSP 找到我的 BackendServer？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:39:59.443

尝试添加一个空格，如：

```
<%@ page import="com.servlet.java.*"%> 
```

并确保文件来自 jar，将 jar 放入 lib。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:36:29.797

为什么不使用 Beans：

```
<jsp:useBean id="VarName" class="BackendServer"  scope = *page | request | session |application*/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:38:32.623

写出完全限定的名字。com.servlet.java.BackendServer 是你的类？

你确定这个类的 jar 在这个 Web 应用程序的类路径中吗？

罐子在哪里？

应用程序在哪里。

应该在公共库、全局应用程序容器类路径或此 Web 应用程序路径中

# symfony - Symfony 2 服务器迁移错误

> ID：15950167
> 
> 赞同：0
> 
> 时间：2013-04-11T13:32:31.057
> 
> 标签：symfony, annotations, doctrine, migration

我有一个 Symfony 2 项目，我已经移到了一个新的服务器上。

当我去加载新网站时，我收到以下错误：

```
PHP Fatal error:  Class 'Doctrine\\Common\\Annotations\\AnnotationRegistry' not found in /var/www/corpsite/corpsite/app/autoload.php on line 61 
```

我对 Symfony 非常陌生，因此感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:48:17.127

移动 Symfony2 实例可能会导致自动加载问题，您应该运行：

```
composer.phar dump-autoload --optimize 
```

（优化选项仅适用于 PROD，您将获得提升奖励）。

不要忘记清除 SF2 缓存：

```
app/console cache:clear --env=prod --no-debug

or...

rm -rf app/cache/* 
```

错误也可能来自非现有供应商，`composer install`这就是答案。

# c# - gdi32.GetObject 在运行 64 位时不起作用

> ID：15950168
> 
> 赞同：1
> 
> 时间：2013-04-11T13:32:31.247
> 
> 标签：c#, .net, 64-bit, pinvoke, gdi+

此代码在运行 32 位时运行良好。但是当我切换到 64 位时，该`GetObject`方法不起作用并且`BITMAP`结构为空。

```
IntPtr hBmp = ObtainValidBitmapHandleFromSystem();
BITMAP bmpData = new BITMAP();
/* BITMAP consists of four 32bit ints,
 * two 16 bit uints and one IntPtr */
 * 4 + sizeof(UInt16) * 2 + IntPtr.Size;
int cbBuffer = sizeof(Int32) * 4 + sizeof(UInt16) * 2 + IntPtr.Size;
NativeMethods.GetObject(hBmp, cbBuffer, out bmpData);

Bitmap bmp = new Bitmap(bmpData.Width, bmpData.Height, PixelFormat.Format32bppPArgb); 
```

本机方法实现：

```
private static class NativeMethods
{
    [DllImport("gdi32", CharSet = CharSet.Auto)]
    internal extern static int GetObject(
        IntPtr hgdiobj,     // handle to graphics object
        int cbBuffer,       // size of buffer for object information
        out BITMAP lpvObject    // Should be IntPtr, but we know we will use it only for BITMAP.
    );
} 
```

BITMAP 结构实现（删除文档以保持代码紧凑）：

```
[StructLayoutAttribute(LayoutKind.Sequential)]
private struct BITMAP
{
    public Int32 Type;
    public Int32 Width;
    public Int32 Height;
    public Int32 WidthBytes;
    public UInt16 Planes;
    public UInt16 BitsPixel;
    public IntPtr Bits;
} 
```

这个代码背后的想法在这个[问题](https://stackoverflow.com/questions/4627376/use-native-hbitmap-in-c-sharp-while-preserving-alpha-channel-transparency)中得到了充分的描述。

起初我认为这个问题是由不同大小`IntPtr`导致的不同大小引起的`cbBuffer`，但似乎情况并非如此，因为改变`cbBuffer`大小没有帮助。

`GetObject`在 64 位系统上使用 GDI 方法的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:34:19.227

问题是这一行：

```
cbBuffer = sizeof(Int32) * 4 + sizeof(UInt16) * 2 + IntPtr.Size; 
```

这适用于 32 位版本，因为结构的对齐方式没有填充。但在 64 位版本上，指针前有 4 个字节的填充。`cbBuffer`短 4 个字节也是如此。

那就是问题所在。解决方案是停止自己计算尺寸并使用[`Marshal.SizeOf()`](http://msdn.microsoft.com/en-gb/library/system.runtime.interopservices.marshal.sizeof.aspx)专为此目的设计的尺寸。

# magento - 观察者 Magento - 订单取消

> ID：15950169
> 
> 赞同：2
> 
> 时间：2013-04-11T13:32:31.610
> 
> 标签：magento

我想知道取消销售时我观察到的正确事件是什么。

我正在尝试“sales_order_item_cancel”，但我不知道这是否正确。另外我怎样才能得到销售的ID？

我正在尝试这种方式：

> `$order = $observer->GetEvent()->GetOrder()->getID();`

但不工作。

谢谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T13:36:55.327

应该总是驼峰式`..->get[Xyz]()`

```
$order = $observer->getEvent()->getOrder()->getId(); 
```

见 app/code/core/Mage/Sales/Model/Order.php 1139 order_cancel_after app/code/core/Mage/Sales/Model/Order/Item.php 512 sales_order_item_cancel

```
 Mage::dispatchEvent('sales_order_item_cancel', array('item'=>$this)); 
```

由于`sales_order_item_cancel`调度`item`尝试

```
print_r($observer->getEvent()->getItem()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:34:12.197

我认为`sales_order_payment_cancel`如果您想观察整个订单而不仅仅是单个项目，最好使用它。
您可以通过以下方式访问订单`$order = $observer->getPayment()->getOrder();`

干杯西蒙

# c - 读取文件并将输入转换为两个数组

> ID：15950171
> 
> 赞同：-2
> 
> 时间：2013-04-11T13:32:40.047
> 
> 标签：c, arrays, file

我想读取一个包含两列数字的文件。

```
1   2 
3   4
5   6
7   8 
```

我想将第一列中的数字放入一个数组中，将第二列中的数字放入另一个数组中。这两个数组将始终具有相同数量的元素。此程序中允许的最大元素数为 100。

这是我到目前为止所拥有的。这只是将元素作为常规 int 读取并打印出来。

```
while (!feof (filereader))
{  
  printf ("%d %d\n",col_one,col_two);
  fscanf (filereader, "%d %d", &col_one, &col_two);      
} 
```

那么如何将文件中第一列中的数字放入一个数组中，将第二列中的数字放入一个数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:37:31.790

```
int array1[100];
int array2[100];
int i, size = 0;

while (size<100 && fscanf (filereader, " %d %d", &array1[size], &array2[size])==2)
{  
     size++;
}

for (i=0; i<size; i++) {
   printf("array1[%d] = %d,  array2[%d] = %d\n",
          i, array1[i], i, array2[i]);
} 
```

在 scanf 格式说明符的开头添加空格， `" %d %d"`这将避免文件中的换行问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:40:21.250

由于你有一个最大尺寸，这很容易。只需像这样定义数组：

```
int firstArray[100];
int secondArray[100];
int size = 0; 
```

然后做你的循环，增加每一行的索引：

```
while (!feof (filereader))
{  
     fscanf (filereader, "%d %d", &col_one, &col_two);
     firstArray[size] = col_one;
     secondArray[size] = col_two;
     size++;
} 
```

也许还考虑确保`size < 100`文件太长。

# android - 外部库 jar 不完整

> ID：15950172
> 
> 赞同：1
> 
> 时间：2013-04-11T13:32:42.950
> 
> 标签：android, shared-libraries, android-resources

我正在尝试将外部 jar 库添加到我的 Android 项目中。它可以正确编译并下载到我的设备，但我得到以下 logcat：

```
04-11 08:17:16.849: E/AndroidRuntime(16053): FATAL EXCEPTION: main
04-11 08:17:16.849: E/AndroidRuntime(16053): java.lang.NoClassDefFoundError: org.puredata.android.service.R$raw
04-11 08:17:16.849: E/AndroidRuntime(16053):    at org.puredata.android.service.PdService.onCreate(PdService.java:184)
04-11 08:17:16.849: E/AndroidRuntime(16053):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:1951)
04-11 08:17:16.849: E/AndroidRuntime(16053):    at android.app.ActivityThread.access$2500(ActivityThread.java:117)
04-11 08:17:16.849: E/AndroidRuntime(16053):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:985)
04-11 08:17:16.849: E/AndroidRuntime(16053):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 08:17:16.849: E/AndroidRuntime(16053):    at android.os.Looper.loop(Looper.java:130) 
```

问题似乎是库编译中不包含 R 类。[通过这个问题](https://stackoverflow.com/questions/7994715/noclassdeffounderror-on-external-library-project-for-android)，我到达[了](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)这个令人困惑的文本状态的地方

> 重要更改：我们更改了库项目生成和打包 R 类的方式：

*   R 类不再打包在 Library Projects 的 jar 输出中。
*   图书馆项目不会为他们所依赖的图书馆项目生成 R 类。只有主应用程序项目会生成库 R 类以及它们自己的类。

    > 这意味着库项目无法从它们所依赖的另一个库项目中导入 R 类。这无论如何都不是必需的，因为它们自己的 R 类包含所有必要的资源。请注意，应用程序项目仍然可以从引用的库项目中导入 R 类，但同样，这不是必需的，因为它们自己的 R 类包含所有资源

所以，我有点卡住了。我如何/我可以强制图书馆包括其所需的资源？如果没有，我如何在不共享我的项目代码的情况下使用我想要提供的库中的 R 类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:37:53.293

Android 库项目与普通库不同。对于 API 级别 14 之前的 Android 版本，您无法将它们编译为独立的 jar 文件并包含到您的项目中。相反，您需要将它们作为库项目包含在您自己的 Android 项目中。这意味着您需要拥有库项目的完整源代码。没有它，您将无法将其用作库项目。

当您将其作为库项目包含到您自己的 Android 项目中并编译您的项目时，构建工具会将库项目和您自己的项目中的资源定义（R 类）结合起来，并创建一个 R 类。然后，您将可以访问您自己的项目和库项目中的资源。

从 API 级别 14 开始，库项目可以编译成独立的 jar，您可以在 google 的开发人员文档站点上找到有关如何执行此操作的信息。阅读[Android 库项目](http://developer.android.com/tools/projects/index.html#LibraryProjects)文档以获取更多信息。

# php - PHP 日期和时间到时间戳

> ID：15950176
> 
> 赞同：-3
> 
> 时间：2013-04-11T13:33:07.673
> 
> 标签：php

我有一个日期字段和一个时间字段供用户输入日期和时间，然后我需要将其转换为时间戳。这是我的代码

```
<input type='text' name='date' />
<input type='text' name='time' /> 
```

我怎样才能把它们放在一起，然后生成一个时间戳放在数据库中

任何帮助表示感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:34:01.377

使用[`strtotime()`](http://php.net/strtotime)功能：

```
$ts = strtotime($_POST['date'].' '.$_POST['time']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:36:05.680

尝试这个...

```
$timestamp = strtotime('date'); 
```

# c++ - 较新版本的 gcc 中的编译器错误

> ID：15950183
> 
> 赞同：0
> 
> 时间：2013-04-11T13:33:27.047
> 
> 标签：c++

以下代码使用 g++ 4.4.5 编译良好，但使用 g++ 4.5.3 报告错误。是编译器行为发生了变化吗？如果是这样，发生了什么变化？

```
#include <iostream>
using namespace std;

class A
{
  public:
        A() {}
};

int main()
{
  new A::A();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:38:10.117

好吧，显然编译器的行为已经改变，因为你有一个以前没有的错误。

问题是，对构造函数的调用不应被限定（即，以类型开头）。似乎 gcc 4.5.3 过去忽略了这个问题，而 4.5.5 在执行标准方面更加严格。

**编辑：**

我似乎记得这在 C++98 中是被禁止的（但每个人都让它滑动）。然而，C++11 标准至少在某些地方明确接受它（参见 §5.5.1/8）。很可能是在 gcc 中改进对 C++11 的支持时引入了一个错误，或者相反，现在它只允许在 C++11 标准接受的那些地方；至少 gcc 4.8.0[仍然拒绝该代码](http://liveworkspace.org/code/Frd02%246)。

奇怪的是，通常严格的 Clang 3.2 会在没有警告的情况下接受代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:40:30.650

虽然 class-name::class-name 表示法被定义为构造函数，但它不是 type-id。在 C++11 [5.3.1] 的 [expr.new] 定义中指定的*new*要求。

```
new-expression:
   ::optnew new-placementopt **new-type-id** new-initializeropt
   ::optnew new-placementopt( **type-id** ) new-initializeropt 
```

# sql-server - SQL - 从一对多关系返回下一个去公司

> ID：15950184
> 
> 赞同：0
> 
> 时间：2013-04-11T13:33:28.577
> 
> 标签：sql-server, sql-server-2005

我需要帮助来编写我坚持的查询。

我基本上需要他们的“CompanyStepCompanyCode”待处理的 CompanySteps 列表，这意味着没有分配为当前的“CompanyNextGoCompany”。因此，他们正在等待轮到他们在一系列步骤中进行报告。

Company 与 CompanyStep 之间存在一对多关系。一个拥有“CompanyWorkNumber”的公司可以有多个“CompanyStepStepOrder”。这是数据外观的一个小快照。抱歉格式不好，不知道如何在这里创建好的表格。

```
+-------------------+----------------------+------------------------+----------------------+----------+
| CompanyWorkNumber | CompanyStepStepOrder | CompanyStepCompanyCode | CompanyNextGoCompany | lastStep |
+-------------------+----------------------+------------------------+----------------------+----------+
|           8126599 |                    1 | COBML                  | COBML                |        1 |
|           8126599 |                    2 | LASHW                  | COBML                |        2 |
|           8126599 |                    3 | UXEBC                  | COBML                |        3 |
|           8256656 |                    1 | ARKHA                  | COBML                |        1 |
|           8256656 |                    2 | COMSCH                 | COBML                |        2 |
|           8256656 |                    3 | LASHW                  | COBML                |        3 |
|           8356657 |                    1 | ARKHA                  | COBML                |        1 |
|           8356657 |                    2 | COMSCH                 | COBML                |        2 |
|           8356657 |                    3 | LASHW                  | COBML                |        3 |
|           8656658 |                    1 | ARKHA                  | COBML                |        1 |
|           8656658 |                    2 | TNSRA                  | COBML                |        2 |
|           8886659 |                    1 | LASHW                  | LASHW                |        1 |
|           8886659 |                    2 | UXEBC                  | LASHW                |        2 |
|           8886659 |                    3 | LASHW                  | LASHW                |        3 |
+-------------------+----------------------+------------------------+----------------------+----------+ 
```

因此，对于 CompanyWorkNumber 8126599，我希望 LASHW 行返回，因为当前的“CompanyStepCompanyCode(COBML)”被分配在 Go 旁边，“CompanynextGoCompany(COBML)”仍然分配了他们的代码，这意味着他们还没有完成他们的步骤. 所以 LASHW 正在等待轮到他们。如果 LASHW 是下一个要走的公司，或者在步骤树下有多少，这并不重要，只要它在当前步骤的 CompanyCode 之后即可。

因此，对于 8886659，如果您注意到 LASHW 被指定为第一个继续执行 Step 的公司，但它们也是该 WorkNumber 上的最后一个，那么对于那个，“CompanyStepStepOrder”3 应该返回。

“lastStep”只是我做的一个Partion。我不确定它是否可以用于此。我正在寻找下一个等待去的公司来自另一张桌子，其中大约 300 家。我希望加入这 3 个表，以便我可以将信息作为一个 SELECT 来获取。

所以我正在考虑使用 WITH () 也许......？我一直在搞乱不同的查询，但还没有什么真正可靠的。有人对如何进行有任何建议吗？

如果有人让我知道如何在这里做一张桌子，那就太好了:)

此查询构建了上述的内存版本，以便您可以处理数据。

```
WITH SRC
(
    CompanyWorkNumber
,   CompanyStepStepOrder
,   CompanyStepCompanyCode
,   CompanyNextGoCompany
,   lastStep
) AS
(
    SELECT 8126599, 1, 'COBML', 'COBML', 1
    UNION ALL SELECT 8126599, 2, 'LASHW', 'COBML', 2
    UNION ALL SELECT 8126599, 3, 'UXEBC', 'COBML', 3
    UNION ALL SELECT 8256656, 1, 'ARKHA', 'COBML', 1
    UNION ALL SELECT 8256656, 2, 'COMSCH', 'COBML', 2
    UNION ALL SELECT 8256656, 3, 'LASHW', 'COBML', 3
    UNION ALL SELECT 8356657, 1, 'ARKHA', 'COBML', 1
    UNION ALL SELECT 8356657, 2, 'COMSCH', 'COBML', 2
    UNION ALL SELECT 8356657, 3, 'LASHW', 'COBML', 3
    UNION ALL SELECT 8656658, 1, 'ARKHA', 'COBML', 1
    UNION ALL SELECT 8656658, 2, 'TNSRA', 'COBML', 2
    UNION ALL SELECT 8886659, 1, 'LASHW', 'LASHW', 1
    UNION ALL SELECT 8886659, 2, 'UXEBC', 'LASHW', 2
    UNION ALL SELECT 8886659, 3, 'LASHW', 'LASHW', 3
)
SELECT
    *
FROM
    SRC AS S 
```

# perl - 为什么这里的 STDIN 在列表上下文中工作？

> ID：15950186
> 
> 赞同：4
> 
> 时间：2013-04-11T13:33:32.283
> 
> 标签：perl, list, stdin, reverse

根据上下文，我们得到一个标量或一个数组。到目前为止还好。
但在下面：

```
print reverse <STDIN>; 
```

为什么我会得到一个列表上下文？我的意思是根据文档的[反向是列表或标量上下文。](http://perldoc.perl.org/functions/reverse.html)[打印](http://perldoc.perl.org/functions/print.html)也是如此。

> 打印*一个字符串* **或字符串** *列表*。如果成功则返回真。

也是如此`STDIN`。那么为什么在`STDIN`这里检索直到 EOF 之前的行而不是只收集第一行呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T14:08:25.503

您似乎将两个独立的事物混为一谈：

*   运算符在列表、标量或 void 上下文中进行评估。
*   运算符决定在哪个上下文中评估其操作数。

* * *

的操作数[`reverse`](http://perldoc.perl.org/functions/reverse.html)总是在列表上下文中计算。

```
reverse LIST 
```

因此`<STDIN>`将在列表上下文中进行评估。

* * *

像所有可以返回标量以外的东西的运算符一样，`reverse`在标量上下文和列表上下文中的行为不同。

的操作数`print`总是在列表上下文中计算。

```
print LIST 
```

因此`reverse`将在列表上下文中进行评估。这意味着它将反转其操作数的顺序。它不会颠倒每个操作数的字符顺序，也不会连接列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T13:37:38.270

实际上[`print`](http://search.cpan.org/~rjbs/perl-5.16.3/pod/perlfunc.pod#print)总是打印一个字符串列表。你可以给它传递一个标量，但它的行为就好像它是一个列表一样。

所以在这种情况下`reverse`知道它是在列表上下文中调用的，因此会反转它的列表参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T13:51:18.880

`print reverse <STDIN>;`本质上是一样的：

```
@lines = <STDIN>;
@reversed_lines = reverse @lines;
print @reversed_lines; 
```

Saying`$line = <STDIN>;`会从 STDIN 读取*一行*，而从 STDIN`@line = <STDIN>;`读取一个*列表*。

的参数列表`print`始终是列表上下文。行上下文可以通过使用连接运算符来强制执行：`print reverse <STDIN> . "";`将读取*一行*而不是列表。

# c# - C# 富文本框粗体

> ID：15950192
> 
> 赞同：0
> 
> 时间：2013-04-11T13:33:52.003
> 
> 标签：c#, richtextbox

我正在尝试实现一个 RichTextBox，它显示某些带有格式的单词。Box 将用于新闻提要，因此新闻标题等内容应为粗体（其他感兴趣的词也应为粗体）。

目前，我已经使用

```
TextBox1.Rtf = @"{\rtf1\ansi This is in \b bold\b0.}"; 
```

由微软提供。这行得通。但是，当我使用：

```
TextBox1.RTF = @"{{rtf1\ansi" + my news + "}"; 
```

新闻出现时没有换行符。

为了解释我的情况，我的应用程序从远程数据库中获取消息。我希望能够从数据库中指定以粗体显示的内容。例如：

[B]Title[/B] 这是一些随机新闻，所以请注意 [i]this[/i] 和 [b]this too[/b]

举个例子。将格式远程包含到我的应用程序中的最佳方式是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:49:18.880

如果您只是在做一些非常简单的格式化（不是嵌套或任何东西），您可以标记您的原始文本并用 RTF 控制字符替换您的标记。例如，下面的示例使用 HTML 标记文本并将`<strong>`and`<br />`标记换成`{\b }`and`{\line}`组：

```
var my_news = "<strong>This is my title</strong><br />And this is my text";
my_news = my_news.Replace("<strong>", @"{\b ").Replace("</strong>", "}").Replace("<br />", @"{\line}");
richTextBox1.Rtf = @"{\rtf1\ansi " + my_news + "}"; 
```

# php - 导致巨大差距的标题图片

> ID：15950197
> 
> 赞同：0
> 
> 时间：2013-04-11T13:34:03.800
> 
> 标签：php, html, css

我已经设法让我制作的图像出现在默认标题徽标旁边的 woostore 主题标题中，但是图像和页面顶部之间出现了很大的差距，我认为这实际上是造成的以某种方式通过徽标。我不擅长编码只是有点反复试验，所以有人可以看看并告诉我该怎么做吗？

下面是具体的标头代码：

```
<?php } ?>

 <div id="header" class="col-full">

 <div id="logo">
 <div id="headbanner" style="height:500px; width:186px; position:relative; top:500px; left:275px;">
 <img src="http://aggidukes.co.uk/store/wp-content/uploads/2013/04/Store-header-Image.png" alt="Official Store" /></div> 
```

和网站地址：[http ://aggidukes.co.uk/store/](http://aggidukes.co.uk/store/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:40:10.557

在#headbanner 中只给浮动删除其他。

```
#headbanner{float:right;}
#search-top{float:right; clear:both;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:59:06.610

这是你目前拥有的。

```
#headerbanner{
  height: 500px;
  width: 186px;
  position: relative;
  top: 500px;
  left: 275px;
} 
```

将其更改为：

```
#headerbanner{
  float: left;
  margin: 0 0 0 198px;
} 
```

**给 id 为“Logo”的 div 100% 宽度。**

```
<div id="logo" style="&nbsp; &nbsp; width: 100%;">                                  
</div> 
```

**此外，您应该像这样重新排列您的徽标和标题横幅。**

```
<a href="http://aggidukes.co.uk/store/" title="" style="float: left;"><img src="http://aggidukes.co.uk/store/wp-content/uploads/2013/03/Logo.png" alt="Aggidukes Official Store"></a>
<div id="headbanner" style="float: left; margin: 0 0 0 198px;"><img src="http://aggidukes.co.uk/store/wp-content/uploads/2013/04/Store-header-Image.png" alt="Official Store"></div> 
```

包装徽标的链接应为“float:left;”

最终结果应该看起来像

```
<div id="header" class="col-full">
  <div id="logo" style="width: 100%;"> <a href="http://aggidukes.co.uk/store/" title="" style="float: left;"> <img src="http://aggidukes.co.uk/store/wp-content/uploads/2013/03/Logo.png" alt="Aggidukes Official Store"></a>
    <div id="headbanner" style="float: left;  margin: 0 0 0 198px;"> <img src="http://aggidukes.co.uk/store/wp-content/uploads/2013/04/Store-header-Image.png" alt="Official Store"></div>
    <h1 class="site-title"><a href="http://aggidukes.co.uk/store/">Aggidukes Official Store</a></h1>
    <span class="site-description"></span> </div>
  <!-- /#logo -->
  <div id="search-top">
    <form role="search" method="get" id="searchform" class="searchform" action="http://aggidukes.co.uk/store">
      <label class="screen-reader-text" for="s">Search for:</label>
      <input type="text" value="" name="s" id="s" class="field s" placeholder="Search">
      <input type="image" class="submit btn" name="submit" value="Search" src="http://aggidukes.co.uk/store/wp-content/themes/woostore/images/ico-search.png">
      <input type="hidden" name="post_type" value="product">
    </form>
    <div class="fix"></div>
  </div>
  <!-- /.search-top --> 
</div> 
```

# java - Apache tika，在 MailContextHandler 中读取解析的正文

> ID：15950199
> 
> 赞同：0
> 
> 时间：2013-04-11T13:34:07.033
> 
> 标签：java, apache-tika

MailContentHandler 的源代码是这样的：

```
try {
            BodyContentHandler bch = new BodyContentHandler(handler);
            parser.parse(is, new EmbeddedContentHandler(bch), submd, context); 
```

此时我想将正文内容作为字符串读取，并根据需要添加一些元数据（如果找到/匹配/生成）...我似乎无法在 BodyContentHandler 对象上调用 toString。

如果有人熟悉 tika，并创建或更改现有解析，请指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:24:58.010

[BodyContentHandler](http://tika.apache.org/1.3/api/org/apache/tika/sax/BodyContentHandler.html)是一个装饰 ContentHandler，详见[javadocs](http://tika.apache.org/1.3/api/org/apache/tika/sax/BodyContentHandler.html)。它所做的只是过滤掉 SAX 事件，以便下游处理程序只获取正文内容。但是，如果您在[没有任何参数](http://tika.apache.org/1.3/api/org/apache/tika/sax/BodyContentHandler.html#BodyContentHandler%28%29)的情况下创建它，它将在内部`WriteOutContentHandler`为您创建一个 100k 限制。

要获取主体本身，您需要询问您传递给的任何处理程序`BodyContentHandler`来获取它。如果您只想要纯文本，并且不会达到默认字符限制，请选择以下内容：

```
BodyContentHandler bch = new BodyContentHandler();
parser.parse(is, bch, metadata, new ParseContext());
String plainText = bch.toString(); 
```

如果你想获得 body 的 XHTML，你会想要更多类似的东西：

```
StringWriter sw = new StringWriter();
SAXTransformerFactory factory = (SAXTransformerFactory)
             SAXTransformerFactory.newInstance();
TransformerHandler handler = factory.newTransformerHandler();
handler.getTransformer().setOutputProperty(OutputKeys.METHOD, "xml");
handler.getTransformer().setOutputProperty(OutputKeys.INDENT, "no");
handler.setResult(new StreamResult(sw));

BodyContentHandler bch = new BodyContentHandler(handler);

parser.parse(is, bch, metadata, new ParseContext());

String xhtml = sw.toString(); 
```

# javascript - Select2 Page Up/Down 列表滚动

> ID：15950200
> 
> 赞同：6
> 
> 时间：2013-04-11T13:34:07.957
> 
> 标签：javascript, scroll, jquery-select2

[Select2](http://ivaynberg.github.io/select2/)吃`Page Up`and`Page Down`键事件以防止页面滚动，但我希望在按下这些键时滚动活动列表。

如果可能的话，挑战是按正确数量的索引或像素滚动列表。天真地，我呼吁`this.moveHighlight(-5);`和`KEY.PAGE_UP`类似的`KEY.PAGE_DOWN`。

将 Select2 下拉列表滚动一页的正确方法是什么？

这是吞下事件的代码：

```
if (e.which === KEY.PAGE_UP || e.which === KEY.PAGE_DOWN) {
    // prevent the page from scrolling
    killEvent(e);
    return;
} 
```

# android - LayerDrawable，setLayerInset 的奇怪行为

> ID：15950201
> 
> 赞同：2
> 
> 时间：2013-04-11T13:34:09.097
> 
> 标签：android, shapedrawable

我正在尝试使用具有 2 层的 LayerDrawable 以编程方式为 ImageButton 创建一个 Drawable。这些图层是 ShapeDrawables。一代表按钮表面，其尺寸与按钮的尺寸相匹配。第二个是按钮上的标志，它比按钮小。以停止按钮为例。

我正在尝试使用 setIntrinsicWidth/setIntrinsicHeight 和 setLayerInset 的组合将标志放入按钮中心，但我得到了一个奇怪的结果。

```
public Drawable createStopButtonDrawable(int width, int height) {
    //-- width = 60, height = 30
    ShapeDrawable button = new ShapeDrawable(new RectShape());      
    button.setIntrinsicHeight(height);
    button.setIntrinsicWidth(width);
    button.setShaderFactory(new ShapeDrawable.ShaderFactory() {         
        @Override
        public Shader resize(int width, int height) {
            return new LinearGradient(0, 0, 0, height, 
                    new int[]{0xCDCCCCCC, 0xCDFFFFFF, 0xCDCCCCCC}, 
                    new float[]{0, 0.3f, 1},
                    Shader.TileMode.REPEAT);
        }
    });

    ShapeDrawable sign = new ShapeDrawable(new RectShape());
    int signSize = (int)(STOP_SIGN_SIZE_RATIO * (float)Math.min(width, height));
    //-- signSize = 12
    sign.setIntrinsicHeight(signSize);
    sign.setIntrinsicWidth(signSize);
    Paint psPaint = sign.getPaint();
    psPaint.setStyle(Style.FILL);
    psPaint.setColor(PLAY_BUTTON_SIGN_COLOR);

    Drawable[] layers = new Drawable[]{ button, sign };
    LayerDrawable ld = new LayerDrawable(layers);
    ld.setBounds(0, 0, width, height);
    ld.setLayerInset(0, 0, 0, 0, 0);

    int sx = (int)( (width - signSize)/2.0f );
    //-- sx = 24
    int sy = (int)( (height - signSize)/2.0f );
    //-- sy = 9

    ld.setLayerInset(1, sx, sy, sx, sy);   //-- 1\. Sign stretched
    //ld.setLayerInset(1, sx, 10, sx, 9);  //-- 2\. Almost good
    return ld;
} 
```

这将生成带有拉伸符号以匹配按钮大小的按钮。

![标志拉伸](https://i.stack.imgur.com/LB4F5.png)

但是，如果我将“1\. 符号拉伸”这一行替换为“2\. 几乎好”，我会得到几乎预期的结果。

![标志几乎是正确的](https://i.stack.imgur.com/P464h.png)

我究竟做错了什么？

我还注意到显示的按钮表面大小为 59x29，而不是预期的 60x30。

# c# - 用换行检测TextBlock中的换行数？

> ID：15950210
> 
> 赞同：9
> 
> 时间：2013-04-11T13:34:29.973
> 
> 标签：c#, wpf, xaml, textblock, word-wrap

有什么方法可以检测文本块中的换行数`TextWrapping="Wrap"`吗？

我正在考虑使用非等宽字体。我需要这个，因为我正在创建一个新的个性化 MessageBox 窗口，它有一个大文本标题、动画、我的应用程序的徽标和我的应用程序的主题。

很明显，我需要根据正文消息的 LineBreaks 的数量来更改窗口的大小——类似于默认 MessageBox 窗口的行为方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T14:03:21.137

您可以看到没有换行的情况下获得了多少`txtName.ActualHeight`，然后将 ActualHeight（有换行）除以您之前获得的值。你应该得到行数。

注意：您不会在构造函数中获得实际高度。在文本块以表单呈现后，您将获得它。

例如：（NoWrap）

```
txt.ActualHeight
311.0 
```

（裹）

```
txt.ActualHeight
1420.4400000000019 
```

所以，

```
int lineCount = (txt.ActualHeight / 311.0) 
```

希望能帮助到你 ：）

**根据您的问题更新更新：**

如果您需要根据您的文本块高度设置消息框高度，您可以简单地执行以下操作：

```
msgbox.Height = txt.ActualHeight + 10; 
```

// 我加了 10 只是为了增加一点边距。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:11:30.390

Windows 可以根据内容调整其大小。请参阅[SizeToContent](http://msdn.microsoft.com/en-us/library/system.windows.window.sizetocontent.aspx)属性。

# java - 导入的类是否必须在父目录中的目录中？

> ID：15950211
> 
> 赞同：2
> 
> 时间：2013-04-11T13:34:31.003
> 
> 标签：java

所以我有一个我们会调用的程序`A.java`。

我正在尝试通过为在名为`helpers`.

我已经在包`helpers`内调用的类中编译了这两个类。`helpers`源代码位于`helpers`名为`helpers`. 我希望这不是坏的命名。

无论如何，如何设置类路径以便`A.java`获取这些类？

我的目录布局如下：

```
Java dir:
 -helpers
   -helpers.java
   -helpers.class
 -A
   -A.java
   -A.class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:46:47.883

首先，您应该尊重 Java 命名约定。类以大写字母开头。包都是小写的。

您还应该避免将 .class 文件放在与 .java 文件相同的目录结构中。

并且目录结构必须与源代码和类中的包结构完全匹配。

因此，如果您有 2 个类`a.A`和`helpers.Helpers`，则 thr 结构应如下所示：

```
project
  src
    a
      A.java
    helpers
      Helpers.java
  classes
    a
      A.class
    helpers
      Helpers.class 
```

为了能够编译源文件，请进入项目目录，然后键入以下命令：

```
javac -d classes -cp classes src/a/A.java src/helpers/Helpers.java 
```

为了能够运行 aA 类，请进入项目目录，然后键入以下命令：

```
java -cp classes a.A 
```

# c# - C# NavigationService.Navigate 在文件夹中导航？

> ID：15950219
> 
> 赞同：1
> 
> 时间：2013-04-11T13:34:55.583
> 
> 标签：c#, windows-phone-8

我想在 windows phone 8 中导航到文件夹中的 xaml 文件。

我得到了这段代码但没有用：

```
string testXaml = "/Xaml.AboutUs.xaml";
this.NavigationService.Navigate(new Uri(testXaml, UriKind.Relative)); 
```

它说`"No XAML was found at the location"`

# hibernate - Grails 一对多只保存子不刷新父子集

> ID：15950220
> 
> 赞同：0
> 
> 时间：2013-04-11T13:35:00.333
> 
> 标签：hibernate, grails, grails-orm, grails-2.2

使用经典的作者/书籍模式（grails 2.2.0）。

```
class Author {
    static hasMany = [books: Book]
}

class Book {
    static belongsTo = [author: Author]
} 
```

为什么当我创建一个子实例时它不会更新父集：

```
Author author = new Author().save()
Book book = new Book(author: author).save()

assert author.books.size == 1 // FAIL 
```

由于作者对象不会在数据库中更改，为什么我必须使用 author.addToBooks(book).save() ???

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:10:43.547

根据 Grails [addTo 文档](http://grails.org/doc/latest/ref/Domain%20Classes/addTo.html)，

*此外，调用 addTo* 会初始化关联的集合，并设置每个 Book 中作者属性的反向引用。*

**addTo**显式添加集合中的关联**和**反向引用。在您的示例中，您只添加了反向引用，而不是集合中的关联。基本上级联关联仅从所有者到依赖执行。如果您考虑一下，这是有道理的，因为如果您有以下情况会发生什么：

```
class Author {
    static hasMany = [fictionBooks: Book, nonFictionBooks: Book]
} 
```

那么您应该`new Book(author: author).save()`保存到哪个集合？

# r - 从 r 命令提示符调用的图形窗口，但不使用 rscript.exe

> ID：15950223
> 
> 赞同：0
> 
> 时间：2013-04-11T13:35:11.413
> 
> 标签：r, plot

我有一个 R 脚本（它打开一个显示地图和一些数据），我可以使用`source("myFile.R")`. 但是，当我尝试调用 with 时`rscipt.exe`，什么也没有发生。如何让图形窗口出现？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:41:53.573

它确实绘图，但脚本立即退出，你永远不会注意到。你可以试试这个——

```
x11()
plot(1:10)
locator(1) 
```

或者一些系统睡眠也应该起作用。

# c# - 如何在 Button 类中使用 Validating/Validated 事件？

> ID：15950227
> 
> 赞同：1
> 
> 时间：2013-04-11T13:35:22.713
> 
> 标签：c#, winforms, validation, button

我了解验证事件如何与文本框一起使用，但我不明白它是如何通过表单上的按钮触发的。

MSDN 没有在他们的[文档](http://msdn.microsoft.com/en-us/library/ms609089.aspx)中列出验证/验证。

但是，这两个属性都列为属性窗口中的事件。 ![在此处输入图像描述](https://i.stack.imgur.com/zZQI5.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:46:42.383

您正在访问错误的 MSDN 文档页面。您应该通过[Button Events](http://msdn.microsoft.com/en-us/library/system.windows.forms.button_events.aspx)，在那里您可以找到有关[Validated](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validated.aspx)和[Validating](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)事件的帮助。

> 每个`Control`派生对象都有两个名为`Validating`和 的事件`Validated`。它还有一个名为[`CausesValidation`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.causesvalidation.aspx). 当它设置为 true（默认为 true）时，控件将参与验证。否则，它不会。

例子：

```
private void textBox1_Validating(object sender, 
                System.ComponentModel.CancelEventArgs e)
{
   string errorMsg;
   if(!ValidEmailAddress(textBox1.Text, out errorMsg))
   {
      // Cancel the event and select the text to be corrected by the user.
      e.Cancel = true;
      textBox1.Select(0, textBox1.Text.Length);

      // Set the ErrorProvider error with the text to display.  
      this.errorProvider1.SetError(textBox1, errorMsg);
   }
}

private void textBox1_Validated(object sender, System.EventArgs e)
{
   // If all conditions have been met, clear the ErrorProvider of errors.
   errorProvider1.SetError(textBox1, "");
}
public bool ValidEmailAddress(string emailAddress, out string errorMessage)
{
   // Confirm that the e-mail address string is not empty. 
   if(emailAddress.Length == 0)
   {
      errorMessage = "e-mail address is required.";
         return false;
   }

   // Confirm that there is an "@" and a "." in the e-mail address, and in the correct order.
   if(emailAddress.IndexOf("@") > -1)
   {
      if(emailAddress.IndexOf(".", emailAddress.IndexOf("@") ) > emailAddress.IndexOf("@") )
      {
         errorMessage = "";
         return true;
      }
   }

   errorMessage = "e-mail address must be valid e-mail address format.\n" +
      "For example 'someone@example.com' ";
      return false;
} 
```

**编辑：**
[来源：](https://stackoverflow.com/a/3793637/770710)

> WinForms 上验证的最大问题是仅当控件“失去焦点”时才执行验证。因此，用户必须在文本框内实际单击，然后单击其他地方才能执行验证例程。如果您只关心输入的数据是否正确，这很好。但是，如果您试图确保用户不会通过跳过文本框而将其留空，则此方法效果不佳。
> 
> 在我的解决方案中，当用户单击表单的提交按钮时，我会检查表单上的每个控件（或指定的任何容器）并使用反射来确定是否为控件定义了验证方法。如果是，则执行验证方法。如果任何验证失败，则例程返回失败并允许进程停止。此解决方案效果很好，特别是如果您有多个要验证的表单。

参考：
[WinForm UI Validation](https://stackoverflow.com/questions/769184/winform-ui-validation)
[C# Validating input for textbox on winforms](https://stackoverflow.com/questions/8915151/c-sharp-validating-input-for-textbox-on-winforms)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:40:32.097

如果不满足您的条件，您可以使用验证事件取消按钮的操作，而不是将该操作放在 onClick 事件中，而是将其放在验证事件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:40:51.773

它们被列在那里是因为它们是从`Control`类继承的。这里是[Validated](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validated.aspx)，这里是[Validating](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.validating.aspx)。请注意，它们来自`Control`.

# php - 使用在本地 nginx 服务器上运行的 codeigniter 连接到外部 mysql 数据库

> ID：15950233
> 
> 赞同：0
> 
> 时间：2013-04-11T13:35:33.933
> 
> 标签：php, mysql, codeigniter, nginx, external

我在本地机器（Mac OSX 10.8）上的 nginx 网络服务器上运行了 codeigniter（php 框架）。

我正在尝试连接到由 mediaTemple 托管的外部 mySQL 数据库。

在 codeigniter 中加载数据库助手时，使用所有正确的详细信息，我不断得到：

```
 A Database Error Occurred
  Unable to connect to your database server using the provided settings. 
```

我的 database.php 文件的内容是：

```
 $db['default']['hostname'] = 'external-db.#######.gridserver.com';
  $db['default']['username'] = '#######';
  $db['default']['password'] = '#######';
  $db['default']['database'] = '#######_olliejennings';
  $db['default']['dbdriver'] = 'mysql';
  $db['default']['dbprefix'] = '';
  $db['default']['pconnect'] = TRUE;
  $db['default']['db_debug'] = TRUE;
  $db['default']['cache_on'] = FALSE;
  $db['default']['cachedir'] = '';
  $db['default']['char_set'] = 'utf8';
  $db['default']['dbcollat'] = 'utf8_general_ci';
  $db['default']['swap_pre'] = '';
  $db['default']['autoinit'] = TRUE;
  $db['default']['stricton'] = FALSE; 
```

我的 nginx.conf 文件的内容是：

```
 daemon off;

  user olliejennings staff;

  worker_processes 2;
  pid /opt/boxen/data/nginx/nginx.pid;

  events {
     worker_connections 1024;
  }

  http {
     include mime.types;
     default_type application/octet-stream;

     log_format main '$remote_addr - $remote_user [$time_local] $status '
                     '"$request" $body_bytes_sent "$http_referer" '
                     '"$http_user_agent" "http_x_forwarded_for"';

     access_log /opt/boxen/log/nginx/access.log main;
     error_log  /opt/boxen/log/nginx/error.log debug;

     sendfile on;

     tcp_nopush  on;
     tcp_nodelay off;

     gzip              on;
     gzip_http_version 1.0;
     gzip_comp_level   2;
     gzip_proxied      any;

     upstream www-upstream-pool {
          server unix:/tmp/php-fpm.sock;
     }

     server {
          listen      80;
          server_name localhost;

          location / {
               root   /opt/boxen/config/nginx/public;
          }
     }

     include /opt/boxen/config/nginx/sites/*;
  } 
```

我的 sites/olliejennings.conf 文件的内容是：

```
 server {
       server_name      olliejennings.dev;
       root         /Users/olliejennings/Code/olliejennings;
       index        index.php index.html index.htm;

       location ~* \.(ico|css|js|gif|jpe?g|png)(\?[0-9]+)?$ {
         expires max;
         log_not_found off;
         add_header Pragma public;
         add_header Cache-Control "public, must-revalidate, proxy-revalidate";
       }

       location / {
         # Check if a file exists, or route it to index.php
         try_files $uri $uri/ /index.php;
       }

       location ~ \.php$ {
         include fastcgi_php_default.conf;
         fastcgi_pass 127.0.0.1:9000;
         fastcgi_index index.php;
         fastcgi_param SCRIPT_FILENAME $document_root/index.php;
       }
   } 
```

注意：如果我不尝试连接到外部数据库，php 网站工作正常。

* * *

**编辑 - 发现差异是 nginx 和 apache 之间的 mySQL 设置**

这是我连接到 apache 上的数据库时 phpinfo() 抛出的内容：

![使用 apache 时的 mySQL 配置](https://i.stack.imgur.com/uZ44r.png)

这是使用 nginx 时 phpinfo() 抛出的内容，因为我无法连接到数据库：

![使用 nginx 时的 mySQL 配置](https://i.stack.imgur.com/zLjVr.png)

使用 nginx 时 mySQL 的套接字也是错误的，因为它不位于

```
/var/mysql/mysql.sock 
```

而是位于：

```
/temp/mysql.sock 
```

我已经在 php.ini 文件中更改了这些设置，但是在使用 nginx 时它们似乎没有被 php 读取，它似乎忽略了该文件中的任何更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:03:15.640

好的，所以我终于设法解决了这个问题。

当我尝试使用本机 php mysqli 时，[stormdrain](https://stackoverflow.com/users/183254/stormdrain)建议我收到以下消息：

```
Connect failed: mysqlnd cannot connect to MySQL 4.1+ using the old insecure authentication. 
```

所以为了解决这个问题，我做了以下事情：

1.  使用 phpmyadmin 连接到 mysql 数据库
2.  运行以下查询`SHOW VARIABLES LIKE 'old_passwords'`
3.  如果返回`ON`，那么我知道问题出在数据库上。
4.  运行此查询以关闭此变量 -`SET SESSION old_passwords=FALSE;`

然后我能够连接到 mySQL 数据库而没有任何问题或代码更改。

# android - Android：在执行代码之前使用 TelephonyManager 或 AudioManager 检查手机状态

> ID：15950244
> 
> 赞同：0
> 
> 时间：2013-04-11T13:35:51.103
> 
> 标签：android, telephonymanager, android-audiomanager

我的问题是，获取电话状态（是否处于通话模式）的最佳方式是什么，以决定进一步的方式。我想在决定是否执行声音通知之前检查手机状态。如果我理解正确，则`TelephonyManager`需要一个`BroadcastReceiver`so 应用程序才能检测到手机状态何时发生变化。但在我的应用程序中，我想在一个谨慎的时刻检查手机状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:42:29.983

我认为没有最好的方法，因为只有一种方法，通过 TelephonyManager 检查呼叫状态。无需接收器：

```
TelephonyManager tm = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
int callState = tm.getCallState(); 
```

有关调用状态常量，请参[见此内容。](http://developer.android.com/reference/android/telephony/TelephonyManager.html#CALL_STATE_IDLE)

# iphone - Qt 支持 iOS 吗？

> ID：15950256
> 
> 赞同：4
> 
> 时间：2013-04-11T13:36:29.810
> 
> 标签：iphone, ios, qt, qt5

我想知道是否可以使用 Qt 框架开发 iPhone 应用程序。如果可能的话，请给我一些参考。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:52:36.170

请留意 Qt 5.2。

这是它的当前状态（如@thelaws 所说）：

[https://www.qt.io/blog/2013/04/08/qt-5-1-alpha-available](https://www.qt.io/blog/2013/04/08/qt-5-1-alpha-available)

通过 Qt Lighthouse 为 iOS 支持提供了一些实验室。

[http://qt-project.org/forums/viewthread/7271](http://qt-project.org/forums/viewthread/7271)

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-18T09:10:03.890

如果您不想等到 Qt 5.2 发布，请查看[V-Play](http://v-play.net/) (v-play.net)。它是一个基于 Qt/QML 的跨平台游戏引擎。（这里还有一些关于它的文档：[API 参考](http://v-play.net/doc/vplay-group.html)）

亚历克斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T00:50:48.010

随着 Qt.5.1.1 的推出，我们可以进行如下更新：假设您已经安装了 Xcode，并且已经了解 iPhone 开发，接下来您可能会去这里：

[Qt 5.1.1 - IOS 的已知问题](http://qt-project.org/wiki/Qt_for_iOS_known_issues/)

[Qt 5.1.1 - IOS 支持](http://qt-project.org/doc/qt-5.1/qtdoc/ios-support.html/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-26T09:32:18.577

我刚刚为 iOS 编译了 Qt 5.2 beta 1 并写下了详细的编译说明。工作正常。

[在这个堆栈溢出答案](https://stackoverflow.com/a/19605007/2366874)中查看我的答案。

# jquery - jquery：hashchange，防止跳转到hash

> ID：15950258
> 
> 赞同：6
> 
> 时间：2013-04-11T13:36:29.700
> 
> 标签：jquery, html, css, hashchange

我设置了一个 hashchange 函数来显示/隐藏关于页面的不同部分，而没有 7 个单独的页面。这一切都很好，事实上，只有一件小事困扰着我，当相关内容显示在屏幕上时，例如：`#about01`如果你再次点击菜单按钮，浏览器会跳到这个 div 的顶部，我不这样做不想发生。
这是我的 jQuery：

```
jQuery(document).ready(function(){

    jQuery(window).on('hashchange', function(){
        var hashFound = determineContent();
        if(hashFound) return false;
    });

    function determineContent(){

        var hash = window.location.hash;
        jQuery('.about').hide();

        jQuery('.sub-menu').each(function(){

             if (jQuery(this).attr('hook') === hash.replace('#about', '')) {
               jQuery('#about'+jQuery(this).attr('hook')).fadeIn();
                 return true;
             }
        });

        jQuery('html, body').animate({scrollTop:0}, 'slow');
        return false;
    }

    determineContent();
}); 
```

HTML：

```
<div id="sub-menu">
        <li id="sub-menu-01" class="sub-menu" hook="01"><a href="#about01">TEST</a></li>
        <li id="sub-menu-02" class="sub-menu" hook="02"><a href="#about02">TEST</a></li>
        <li id="sub-menu-03" class="sub-menu" hook="03"><a href="#about03">TEST</a></li>
        <li id="sub-menu-04" class="sub-menu" hook="04"><a href="#about04">TEST</a></li>
        <li id="sub-menu-05" class="sub-menu" hook="05"><a href="#about05">TEST</a></li>
        <li id="sub-menu-06" class="sub-menu" hook="06"><a href="#about06">TEST</a></li>
        <li id="sub-menu-07" class="sub-menu" hook="07"><a href="#about07">TEST</a></li>
    </div>

<div id="about01" class="about">CONTENT HERE
</div>

<div id="about02" class="about">CONTENT HERE
</div>

<div id="about03" class="about">CONTENT HERE
</div>

<div id="about04" class="about">CONTENT HERE
</div>

<div id="about05" class="about">CONTENT HERE
</div>

<div id="about06" class="about">CONTENT HERE
</div>

<div id="about07" class="about">CONTENT HERE
</div> 
```

就像我说的那样，如果`#about01`显示，然后用户再次单击`#sub-menu-01`，则窗口会向下滚动到该 div 的顶部，这是 url 中哈希的正常行为。是一种防止默认行为而不是在单击时滚动到此 div 顶部的方法吗？
另外，我想弄清楚是否有一种方法可以`#about01`在页面加载时显示`www.website.com/about`而不是必须放入`www.website.com/about/#about01`等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:00:35.870

问题出在您的 jquery.each 块中。

jquery.each 块中的“return true”不会返回，但会继续下一个项目。此外，这不会从您的确定内容函数返回，因此滚动的下一个代码也将被执行，并且确定内容将始终返回 false。

使用标志，例如

```
var found = false;
JQuery.each(function(){
   if(found) return;
   //if your condition is true then found = true
})

if(found) return true;
//else continue the next line. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:38:59.367

```
$("#id").click(function(event) {
    event.preventDefault();

    //do stuff
}); 
```

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T13:38:49.667

```
$('a').click(function(event){
    event.preventDefault();
}); 
```

`preventDefault()`应该停止元素具有的任何默认事件。

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T13:38:57.493

尝试这个：

```
jQuery(window).on('hashchange', function(e){
    e.preventDefault();
    var hashFound = determineContent();
    if(hashFound) return false;
}); 
```

正如其名称所示，事件对象的`preventDefault()`方法将避免对该事件执行的默认行为。由于您希望在哈希更改时避免正常行为，因此该代码应该这样做。

# angularjs - 调用自定义 DSL 时获取“无法访问框架窗口”

> ID：15950263
> 
> 赞同：1
> 
> 时间：2013-04-11T13:36:41.840
> 
> 标签：angularjs, angular-scenario

我抓住了 Angular Seed 项目并修改了它的场景测试。我正在尝试一个非常简单的测试，所以我相信这是我所缺少的。这是 DSL 和场景规范：

```
angular.scenario.dsl('customDsl', function() {
  return function(selector) {
    return this.addFutureAction('customDsl', function ($window, $document, done) {
      done(null, selector + ' is ok!');
    });
  };
});

describe('my app', function() {
  it('should pass', function() {
    expect(customDsl('test')).toBe('test is ok!');
  });
}); 
```

运行测试时失败并显示以下消息：

```
Frame window is not accessible. 
```

我正在使用**Windows 7并在****Chrome**中运行场景。为了运行测试，我启动了服务器`node scripts\web-server.js`，然后`scripts\e2e-test.bat`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:59:57.537

似乎您需要先移动到应用程序的页面，然后才能运行任何场景。查看：

[http://plnkr.co/edit/cG4CQI](http://plnkr.co/edit/cG4CQI)

请注意，添加

```
browser().navigateTo('/') 
```

解决问题。把它拿出来，你可以复制你的错误。

# registry - AutoIt：有人知道这个 RegRead 调用有什么问题吗？

> ID：15950264
> 
> 赞同：0
> 
> 时间：2013-04-11T13:36:42.093
> 
> 标签：registry, autoit

尝试使用 AutoIt 获取此注册表项的值，但一直失败。

我的猜测是由于`,`和/或`.`键名，但我无法在 AutoIt 文档或其他 Google 搜索中找到有关此类问题的任何好信息。我尝试使用通常的转义字符单独和一起转义每个人`\`，但也没有运气。

我已经确认键名是正确的，并且还尝试了一个完全不同的 reg 键，我的脚本中没有奇怪的字符，只是为了看看它是否正常工作，它成功了。

```
Dim $VMWare_Path = RegRead("HKLM\SOFTWARE\VMware, Inc.\VMware Workstation", "InstallPath") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T02:13:45.883

**更新：** 嗯，解决方案原来是我需要根据操作系统版本从不同的注册表节点读取。最终代码：

```
Local $VMWPath

if @CPUArch = "X64" Then
   ;x64 Key
   $VMWPath = RegRead("HKLM\SOFTWARE\Wow6432node\VMware, Inc.\VMware Workstation", "InstallPath")
Else
  ;x86 Key
  $VMWPath = RegRead("HKLM\SOFTWARE\VMware, Inc.\VMware Workstation", "InstallPath")
EndIf 
```

# c++ - 最佳实践：文件打开/关闭操作

> ID：15950267
> 
> 赞同：0
> 
> 时间：2013-04-11T13:36:52.710
> 
> 标签：c++, visual-studio-2012

所以：我们正在研究教科书上所说的“高级文件操作”，而我正在编写一个不错的小型库存程序。简单的问题：什么更有效/被认为最好：在 main 中打开文件并通过引用各种函数（每个函数用于添加、读取和更改）来发送它，或者让每个函数打开和关闭文件为需要吗？任何一种方式都有真正的优势吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:39:37.990

在我个人的经验和意见中，只需制作一个文件阅读器功能，其中包含传入的文件名，以及另一个用于写入的功能。

如果您在 main() 中执行了这些功能，那么如果您处理多个文件，它会变得非常难看。

# node.js - NPM 总是要求我在 Express 项目中获得 root 权限

> ID：15950272
> 
> 赞同：6
> 
> 时间：2013-04-11T13:36:59.453
> 
> 标签：node.js, express, root

由于我使用的是 Express.js，所以我不能`npm install`正常使用了。我总是必须扎根才能让它工作......

假设我生成了一个项目

```
express --sessions --css css 
```

当我尝试做`npm install`之后，我遇到了这些错误

```
npm WARN package.json application-name@0.0.1 No README.md file found!
npm ERR! Error: EACCES, open '/Users/Arnaud/.npm/e7d16cae-express-3-1-1.lock'
npm ERR!  { [Error: EACCES, open '/Users/Arnaud/.npm/e7d16cae-express-3-1-1.lock']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '/Users/Arnaud/.npm/e7d16cae-express-3-1-1.lock' }
npm ERR!
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Darwin 12.3.0
npm ERR! command "node" "/usr/local/bin/npm" "install"
npm ERR! cwd /Users/Arnaud/Sites/test
npm ERR! node -v v0.10.2
npm ERR! npm -v 1.2.15
npm ERR! path /Users/Arnaud/.npm/e7d16cae-express-3-1-1.lock
npm ERR! code EACCES
npm ERR! errno 3
npm ERR! stack Error: EACCES, open '/Users/Arnaud/.npm/e7d16cae-express-3-1-1.lock'
npm ERR!
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/Arnaud/Sites/test/npm-debug.log
npm ERR! not ok code 0 
```

但是如果做 a `sudo npm install`，一切都很好......知道为什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T13:55:53.517

这可能是权限问题。要收回目录的所有权，请`/Users/Arnaud/.npm`在终端中执行以下命令

```
chown -R Arnaud /Users/Arnaud/.npm 
```

如果您在 OSX 上，您还可以使用磁盘工具来修复整个磁盘的权限，这也可能会为您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-21T00:01:16.160

如果您使用 MAC OS 或 Unix/Lunix 机器，您只需要注意安全措施，即使您是 root 所有者，您也需要在终端的命令行上使用**sudo命令。**因此，大多数时候使用 chown 命令更改文件和目录的所有权是不够的。

原因是你将执行的命令会对系统文件有很大的改变，你需要输入你的 root 管理员的密码，就像在 Windows 中他们要求你输入管理员密码进行系统更改一样，所以它看起来像这个：

*Ms-MacBook-Pro:~ AMB$ **sudo** npm install -g express-generator

**密码：（**输入您的根/管理员密码）

```
/usr/local/bin/express -> /usr/local/lib/node_modules/express-generator/bin/express-cli.js
/usr/local/lib
└─┬ express-generator@4.15.0 
  ├─┬ commander@2.9.0 
  │ └── graceful-readlink@1.0.1 
  ├── ejs@2.5.6 
  ├─┬ mkdirp@0.5.1 
  │ └── minimist@0.0.8 
  └── sorted-object@2.0.1 
```

Ms-MacBook-Pro:~ AMB$*

# windows-phone-7 - 获取 html 内容 windows phone

> ID：15950273
> 
> 赞同：4
> 
> 时间：2013-04-11T13:37:05.657
> 
> 标签：windows-phone-7

嗨，我要求 Windows phone 的替代方法以在 wpf 中获取网页的 HTML 内容，如下所示

```
 var doc = (HTMLDocument)webBrowser2.Document;
                var head = doc.getElementsByTagName("head").Cast<HTMLHeadElement>().First();
                var script = (IHTMLScriptElement)doc.createElement("script");

                //script.src = @"getSelectedText.js"; 
```

所以我会在我的 html 中附加一个脚本 javascript，它已经显示在浏览器中我找到 browser.savetostring 但它返回一个字符串而不是 html 我没有找到任何支持提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T11:41:06.200

例如，您可以下载一个`HTML`via ，注入您的并在with方法中显示结果。`WebClient``JavaScript``WebBrowser``NavigateToString`

# html - HTACCESS 和其他文件在保存时损坏

> ID：15950275
> 
> 赞同：0
> 
> 时间：2013-04-11T13:37:15.580
> 
> 标签：html, .htaccess, config, corruption

出于某种原因，当我打开一个工作的 .htaccess 文件并保存它而不进行任何实际更改（例如，键入空格后跟退格键以便内容保留）然后保存该文件并重新上传它，htaccess 文件不再工作并抛出一个几乎每一页都有一堆 404 错误。这发生在昨天。

今天我尝试修改一个配置文件，它似乎也以同样的方式损坏。

但是，当重新上传我从未保存过的原始文件时，一切正常。

我还尝试通过我的主机 cpanel 文件管理器修改文件，导致此配置文件出现相同的问题。

编辑：我还确认所有文件都以相同的权限上传，即 644 编辑：这两个事件连续两天发生在具有两个不同项目的不同虚拟主机上。我还修改了一些没有引起问题的 PHP 文件......

# android - Android 身份验证和会话

> ID：15950280
> 
> 赞同：3
> 
> 时间：2013-04-11T13:37:33.787
> 
> 标签：android, session, authentication

如何在 Android 应用程序中进行身份验证后让用户保持登录状态？我做了一些阅读，坦率地说，我对会话有点缺乏经验，但看起来在用户将他们的凭据提交给服务器并通过身份验证之后，服务器会发回会话 ID。我认为这个会话 ID 存储在用户的 android 设备上的某个地方。

我应该使用 sharedPreferences、sqlite 数据库还是本地存储来保存会话 ID？我读到共享首选项有点不安全，而 sqlite 数据库或本地存储将仅限于单个应用程序。

另外，我应该向服务器发出 HTTP 请求以发送/接收此信息，还是可以通过套接字连接完成。最终，我想制作一个使用套接字的多人游戏，尽管我认为某些功能（例如登录）不一定必须通过套接字，但不确定游戏开发人员通常是否有标准或通常的方式来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:27:07.787

> 我应该向服务器发出 HTTP 请求以发送/接收此信息吗

我不认为您只想通过 HTTP 发送您的身份验证。人们可能会拦截您的包裹并以纯文本形式读回数据。如果您的 android 应用程序在服务器上有一个 API 进行身份验证，我建议您使用 HTTPS 进行通信。

> 我应该使用 sharedPreferences、sqlite 数据库还是本地存储来保存会话 ID？

我自己在“MODE_PRIVATE”中使用 sharedPreferences 来存储 ID。您可以在不同的模式下创建 sharedPreferences 文件。私有模式意味着它只能由您的应用程序或具有相同用户 ID 的应用程序访问。这里解释了所有模式：

[http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)

如果您想在您的 android 设备上存储密码和用户，我建议您使用数据库。确保使用“salt and pepper”保护您的密码：

[http://barkingiguana.com/2009/08/03/securing-passwords-with-salt-pepper-and-rainbows/](http://barkingiguana.com/2009/08/03/securing-passwords-with-salt-pepper-and-rainbows/)

> 不确定游戏开发人员通常是否有标准或通常的方式来执行此操作

无法帮助您解决这个问题，但我认为如果您进行一些研究，您将能够弄清楚;)。

# iphone - SearchDisplayController 隐藏 searchResultsTableView 并显示底层表格视图禁用滚动

> ID：15950285
> 
> 赞同：0
> 
> 时间：2013-04-11T13:37:41.673
> 
> 标签：iphone, ios, scroll, searchdisplaycontroller

我有一个带有 searchDisplayController 和三个不同搜索范围的表格视图。对于前两个范围，我想在标准 searchResultsTableView 中显示搜索结果。对于最后一个，我想隐藏 searchResultsTableView 并在第一个表格视图单元格中显示带有一些自定义外观的表格视图。这很好用。

我的问题是底层表格视图的滚动不起作用。滚动指示器闪烁，我可以选择单元格，这意味着 UserInteractionEnabled = YES。什么可能会禁用滚动？scrollview 委托方法 scrollViewDidEndDragging 被调用但不是 scrollViewDidScroll。

有人有什么建议吗？谢谢

# angularjs - Angularjs UI ui-map 不适用于 IE8

> ID：15950287
> 
> 赞同：0
> 
> 时间：2013-04-11T13:37:51.380
> 
> 标签：angularjs, angularjs-directive, angular-ui

ui-maps 不会在 IE8 中加载地图。我可以在 chrome 中看到地图，但它不适用于 IE8。即使使用 IE8 访问链接（[http://angular-ui.github.io/](http://angular-ui.github.io/)），您也会注意到该指令不会带来地图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T15:01:49.637

user1791567 - 请包含一些示例代码，甚至更好的是显示问题的 jsfiddle。由于缺乏信息，它确实很难调试。angular-ui.github.io 上的地图也不见了。如果您指的是存储库中的演示，那它本身并不是一个功能齐全的应用程序......

还要确保您没有违反任何 IE 不兼容规则。有关信息，请参阅[http://docs.angularjs.org/guide/ie](http://docs.angularjs.org/guide/ie)。特别是通读评论，其中一些人还注意到 IE 8 不兼容。

至于为什么要加载 VS2010 调试器，可以将 vs.net 设置为您的脚本调试器，如果是这样，IE 中抛出的异常可以触发 Visual Studio 的加载。

# android - 在android中隐藏带有点的密码以用于编辑文本

> ID：15950291
> 
> 赞同：2
> 
> 时间：2013-04-11T13:37:54.533
> 
> 标签：android

我试图在edittext中隐藏密码，代码是：

```
text.setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD);

text.setTransformationMethod(new PasswordTransformationMethod()); 
```

相同的代码在我的其他应用程序中工作。

有人可以帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T13:40:41.497

尝试这个

```
<EditText
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:inputType="textPassword"
        /> 
```

希望它的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:41:50.213

将 edittext 输入类型属性更改为 xml 中的文本密码。

```
<EditText
        android:layout_width="200dp"
        android:layout_height="200dp"
        android:inputType="textPassword"
        /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-17T12:29:58.583

正如评论中提到的原始海报，调用会`setSingleLine (boolean singleLine)`重置`EditText`设置，因此您必须先调用它，然后再设置自定义设置，如密码`InputType`。

[https://developer.android.com/reference/android/widget/TextView.html#setSingleLine(boolean)](https://developer.android.com/reference/android/widget/TextView.html#setSingleLine(boolean))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T06:32:17.050

要以编程方式隐藏密码，请在 oncreate android.provider.Settings.System.putInt(this.getContentResolver(),android.provider.Settings.System.TEXT_SHOW_PASSWORD, 0); 下面添加这一行

# iphone - UIview 的快照不显示圆弧和圆角

> ID：15950297
> 
> 赞同：2
> 
> 时间：2013-04-11T13:38:15.570
> 
> 标签：iphone, ios, uibezierpath, quartz-core

我正在通过 UIBezierPath 在 uiview 上制作弧线。弧线做得很好，但是当我拍摄此 UIView 的快照以共享弧线时，快照中没有显示。uiview 显示为默认值，圆弧和圆角矩形不显示。这是快照 CGSize sz = CGSizeMake(bottomview.frame.size.width, bottomview.frame.size.height); 的代码

```
 UIGraphicsBeginImageContext(sz);
    [bottomview.layer renderInContext:UIGraphicsGetCurrentContext()];
    image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    resultImageView.image=image; 
```

这是制作 arc UIBezierPath *aPathbottom = [UIBezierPath bezierPath]; 的代码

```
[aPathbottom moveToPoint:CGPointMake(0, 262)];

[aPathbottom addLineToPoint:CGPointMake(0, 15)];
[aPathbottom addLineToPoint:CGPointMake(10, 10)];
[aPathbottom addLineToPoint:CGPointMake(20, 6)];
[aPathbottom addLineToPoint:CGPointMake(40, 3.5)];
[aPathbottom addLineToPoint:CGPointMake(60, 6)];
[aPathbottom addLineToPoint:CGPointMake(70, 10)];
[aPathbottom addLineToPoint:CGPointMake(80,15)];

[aPathbottom addLineToPoint:CGPointMake(80, 250)];
[aPathbottom addLineToPoint:CGPointMake(70, 256)];
[aPathbottom addLineToPoint:CGPointMake(60, 260.5)];
[aPathbottom addLineToPoint:CGPointMake(50, 264)];
[aPathbottom addLineToPoint:CGPointMake(55, 264.5)];
[aPathbottom addLineToPoint:CGPointMake(40, 265)];
[aPathbottom addLineToPoint:CGPointMake(45, 264.5)];
[aPathbottom addLineToPoint:CGPointMake(40, 264)];
[aPathbottom addLineToPoint:CGPointMake(20, 260.5)];
[aPathbottom addLineToPoint:CGPointMake(10, 256)];
[aPathbottom addLineToPoint:CGPointMake(0, 250)];
[aPathbottom closePath];

CAShapeLayer *maskLayerbottom = [CAShapeLayer layer];
maskLayerbottom.frame = bottomview.bounds;
maskLayerbottom.path = aPathbottom.CGPath;

bottomview.layer.mask = maskLayerbottom; 
```

我不知道为什么会这样。任何人都可以帮助我。

问候 chakshu 阿罗拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:40:40.733

我得到了我尝试过的答案
`[bottomview.layer addSublayer:maskLayerbottom];`， `bottomview.layer.mask = maskLayerbottom;`并且来自的快照`UIView`正在显示弧线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:47:49.853

你试过添加这个吗？

```
[bottomview.layer setMasksToBounds:YES]; 
```

# excel - 自动更新 SP Foundation 列表

> ID：15950299
> 
> 赞同：1
> 
> 时间：2013-04-11T13:38:25.577
> 
> 标签：excel, compare, workflow-foundation, lookup

我真的希望有人可以在这里帮助我...我正在使用 SharePoint Foundation 为我的雇主开发一个数据库。该数据库包含 26 列和大约 100,000 行（一个商务联系人数据库）。我们使用列表的内容导出到 MS Excel 中以加载到电子邮件管理器程序中以执行电子邮件拍摄。我遇到的问题是 - 电子邮件管理器程序将记录电子邮件快照的收件人取消订阅的位置，但这一次可能有数千个。我需要能够使用电子邮件管理器（在 MS Excel 中）返回的“未订阅”数据“自动”更新 SharePoint 列表。我预计创建一个工作流来查找/替换定义的字段。有人可以帮忙吗**？？？**

# java - Java：针对子文档的读取速度优化文件分隔符

> ID：15950306
> 
> 赞同：0
> 
> 时间：2013-04-11T13:38:39.640
> 
> 标签：java, performance, file, optimization

假设我有一个包含许多子文档的文件

```
//file.txt

BEGIN_FILE_1
loremipsumloremipsumloremipsum
loremipsumloremipsum
END_FILE_1

BEGIN_FILE_2
cupcakeipsum
cupcakeipsumcupcakeipsum
END_FILE_2 
```

可以使用什么样的定界（或某种替代策略）以使所述子文档的读取速度很快（即解释定界速度很快），但更重要的是，子文档的写入速度很快。请注意，容器文件将非常大（100MB 左右）。

我打算使用 FileWriter 来编写文件。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:13:01.720

通常，最佳策略取决于上下文 - 有多少子文档，每个文档是否只写入一次或更新/修改，每个子文档的大小是否已知/每个子文档的至少最大大小已知，哪种操作占优势（对于每次写入操作都会有大约 10 次读取，或者相反）？

假设子文档将被添加和读取但不被修改，最佳策略可能是使用标题指定文件数，以及每个文件在文件中开始/结束的行。像 - 第一行总是标题，然后是第 1..N FILE1、N+1..M FILE2 等行：

NUMBER_OF_FILES 个 FILE1_NAME FILE1_START FILE1_END FILE2_NAME FILE2_START FILE2_END

这将允许通过仅解析标题并直接读取该文件而不是通过文档搜索文件来读取任何文件的内容，并且写入只需要修改标题并写入文件末尾。

如果文件被修改/覆盖但大小固定，此策略可能仍然有用，因为覆盖操作会很快

# xcode - 返回键键盘iOS Textfield

> ID：15950307
> 
> 赞同：0
> 
> 时间：2013-04-11T13:38:43.150
> 
> 标签：xcode

所以，我在这里有一些代码，我想知道如果我通过按键盘上的返回键完成了在文本字段中的输入，我如何禁用键盘。我想要这个：如果 textfield.text 等于 @"kshglfjds" ... 将 imageView 设置为 @"image"

但我不知道如何编写该代码....

.h en .m 文件的截图： ![。H](https://i.stack.imgur.com/weBjm.png)

![.m](https://i.stack.imgur.com/18UW7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:42:35.870

设置一些对象（可能是您的视图控制器？）作为您的文本字段的委托，然后您可以通过实现此委托方法在完成编辑字段时检查文本字段的内容：

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    if([textField.text compare: @"kshglfjds" ] == NSOrderedSame)
    {
         // make your image visible
    }
} 
```

呃，现在我再次审查你的问题......我意识到你的问题根本不清楚。如果您想在按回车后*关闭键盘，请执行以下操作：*

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T09:15:36.027

```
- (void)hideKeyboard {

    [sender resignFirstResponder];

} 
```

将其连接到 TextField(s) as `Did End on Exit`。如果你使用`sender`而不是`textField`你可以将它连接到超过 1 个 TextField，因为 TextField 1 具有例如 name`textField`和 second `textField2`，但是如果你使用`sender`它，它会检测到哪个 TextField 正在调用该方法。否则，您需要为每个 TextField 设置 1 个 void，如下所示：

```
- (void)hideKeyboard1 {

    [textField resignFirstResponder];

}

- (void)hideKeyboard2 {

    [textField2 resignFirstResponder];

} 
```

# php - 从单级 XML 文件构建多维数组

> ID：15950309
> 
> 赞同：0
> 
> 时间：2013-04-11T13:38:53.290
> 
> 标签：php, arrays, multidimensional-array

**问题**

我一直在尝试从单个数组构建一个新数组，我需要在其中`Level 1's`进入顶层，然后`Level 2`进入它们的每个父级，`Level 1's`最后`Level 3's`进入它们的父 级`Level 2's`。

定义他们的父母之间的差异的方法是他们在数组中出现的顺序。

```
//Array Structure currently
Level 1
Level 2
Level 3
Level 3
Level 3
Level 2
Level 3
Level 3
Level 2

//Desired Array
Level 1
    Level 2
        Level 3
        Level 3
        Level 3
    Level 2
        Level 3
        Level 3
    Level 2 
```

**代码** 目前我这样做是为了得到我需要的东西：

```
$i = 0;
$singleArray = [];
foreach ($jamie['Row'] as $value){
    $item  = 0;
    $id = $value->Cell->Data;
    $level = substr ($value->Cell[1]->Data, 6, 1);
    $name = $value->Cell[2]->Data;

    /* Start Level One */
    if($level==1){
        $singleArray[$i] = array(
            'key' => $i,
            'id'=>(string) $id,
            'level'=>$level,
            'name'=>(string)$name
        );
    };
    /* End Level One */
    /* Start Level Two */
    if($level==2){
        $reverseArray = array_reverse($singleArray);
        foreach($reverseArray as $key => $value) {
            if($value['level']==1){
                $reverseArray = $value['key'];
                break;
            }
        }

        $tempArray = array(
            'key' => $i,
            'id'=>(string) $id,
            'level'=>$level,
            'name'=>(string)$name
        );

        array_push($singleArray[$reverseArray],$tempArray);
    };
    /* ENdLevel Two */
    $i++;
} 
```

基本上我正在做的是，当我通过构建数组 I 并查看它属于哪个级别时，然后我将我们目前拥有的数组保留并保留它，直到我们找到第一个级别 1，一旦我们有一级抓取它在数组中的位置并将其粘贴在数组项上并将新数组插入其中。这适用于第 2 级到第 1 级。我看不到它的第 3 级工作:(

**大批**

```
 0 => 
  array (
    'key' => 0,
    'id' => '7',
    'level' => '1',
    'name' => 'About Me',
  ),
  1 => 
  array (
    'key' => 1,
    'id' => '78',
    'level' => '2',
    'name' => 'My Conduct at Work',
  ),
  2 => 
  array (
    'key' => 2,
    'id' => '270',
    'level' => '3',
    'name' => 'Dispute Resolution/Grievance',
  ),
  3 => 
  array (
    'key' => 3,
    'id' => 'TBC',
    'level' => '3',
    'name' => 'Learn More',
  ),
  4 => 
  array (
    'key' => 4,
    'id' => '77',
    'level' => '2',
    'name' => 'My Environment, Health & Safety',
  ),
  5 => 
  array (
    'key' => 5,
    'id' => 'TBC',
    'level' => '3',
    'name' => 'Learn More',
  ),
  6 => 
  array (
    'key' => 6,
    'id' => '238',
    'level' => '3',
    'name' => 'Policies and Guidance',
  ),
  7 => 
  array (
    'key' => 7,
    'id' => '79',
    'level' => '2',
    'name' => 'My GSK Employment Journey',
  ),
  8 => 
  array (
    'key' => 8,
    'id' => '274',
    'level' => '3',
    'name' => 'Changes in Role',
  ),
  9 => 
  array (
    'key' => 9,
    'id' => '275',
    'level' => '3',
    'name' => 'Leaving GSK',
  ),
  10 => 
  array (
    'key' => 10,
    'id' => '273',
    'level' => '3',
    'name' => 'My Moves',
  ),
  11 => 
  array (
    'key' => 11,
    'id' => '272',
    'level' => '3',
    'name' => 'Starting at GSK',
  ),
  12 => 
  array (
    'key' => 12,
    'id' => '80',
    'level' => '2',
    'name' => 'My Personal Information',
  ),
  13 => 
  array (
    'key' => 13,
    'id' => 'TBC',
    'level' => '3',
    'name' => 'Learn More',
  ),
  14 => 
  array (
    'key' => 14,
    'id' => '276',
    'level' => '3',
    'name' => 'Manage my Personal Information',
  ),
  15 => 
  array (
    'key' => 15,
    'id' => '76',
    'level' => '2',
    'name' => 'My Talent, Performance & Development',
  ),
  16 => 
  array (
    'key' => 16,
    'id' => '266',
    'level' => '3',
    'name' => 'My Development',
  ),
  17 => 
  array (
    'key' => 17,
    'id' => '268',
    'level' => '3',
    'name' => 'My Learning',
  ),
  18 => 
  array (
    'key' => 18,
    'id' => '267',
    'level' => '3',
    'name' => 'My Performance',
  ),
  19 => 
  array (
    'key' => 19,
    'id' => '75',
    'level' => '2',
    'name' => 'My TotalReward',
  ),
  20 => 
  array (
    'key' => 20,
    'id' => '287',
    'level' => '3',
    'name' => 'Learn More My Benefits',
  ),
  21 => 
  array (
    'key' => 21,
    'id' => '288',
    'level' => '3',
    'name' => 'Learn More My Pay',
  ),
  22 => 
  array (
    'key' => 22,
    'id' => '264',
    'level' => '3',
    'name' => 'My Benefits',
  ),
  23 => 
  array (
    'key' => 23,
    'id' => '263',
    'level' => '3',
    'name' => 'My Pay',
  ),
  24 => 
  array (
    'key' => 24,
    'id' => '265',
    'level' => '3',
    'name' => 'My Recognition',
  ),
  25 => 
  array (
    'key' => 25,
    'id' => '81',
    'level' => '2',
    'name' => 'Time Off, Time & Attendance',
  ),
  26 => 
  array (
    'key' => 26,
    'id' => '281',
    'level' => '3',
    'name' => 'Flexible Working',
  ),
  27 => 
  array (
    'key' => 27,
    'id' => 'TBC',
    'level' => '3',
    'name' => 'Learn More',
  ),
  28 => 
  array (
    'key' => 28,
    'id' => '279',
    'level' => '3',
    'name' => 'Leave of Absence',
  ),
  29 => 
  array (
    'key' => 29,
    'id' => '280',
    'level' => '3',
    'name' => 'Time & Attendance',
  ),
  30 => 
  array (
    'key' => 30,
    'id' => '278',
    'level' => '3',
    'name' => 'Time Off',
  ) 
```

# javascript - Javascript 错误，对象 [object Object] 的未捕获 TypeError 属性“$”不是函数

> ID：15950310
> 
> 赞同：7
> 
> 时间：2013-04-11T13:38:54.710
> 
> 标签：javascript, jquery, joomla, types

我正在尝试在 Joomla 模块中插入脚本。该脚本是 JS 中的百分比加载器。我对另一个 js 有一些问题，但我终于设法解决了这些问题。

我得到的错误是：

> 未捕获的类型错误：对象 [object Object] 的属性“$”不是函数（匿名函数）

我正在尝试导入[Percentage Loader jQuery 插件](http://widgets.better2web.com/loader/)

js代码是：

```
$(function() {
  var $topLoader = $("#dttopLoader").percentageLoader({width: 256, height: 256, controllable : true, progress : 0.5, onProgressUpdate : function(val) {
      $topLoader.setValue(Math.round(val * 100.0));
    }});

  var topLoaderRunning = false;
  $("#dtanimateButton").click(function() {
    if (topLoaderRunning) {
      return;
    }
    topLoaderRunning = true;
    $topLoader.setProgress(0);
    $topLoader.setValue('0kb');
    var kb = 0;
    var totalKb = 999;

    var animateFunc = function() {
      kb += 17;
      $topLoader.setProgress(kb / totalKb);
      $topLoader.setValue(kb.toString() + 'kb');

      if (kb < totalKb) {
        setTimeout(animateFunc, 25);
      } else {
        topLoaderRunning = false;
      }
    }

    setTimeout(animateFunc, 25);

  });
}); 
```

我尝试将第一行从“$(function()...”更改为“jquery(function()...”，因为我在 stackoverflow 上阅读了许多主题，但仍然无法修复它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:47:35.550

[**在这个 SO 帖子**](https://stackoverflow.com/questions/10807200/jquery-uncaught-typeerror-property-of-object-object-window-is-not-a-funct)中似乎有一个类似的问题，但在 WordPress 中。

你说你正在使用 Joomla。Joomla 可能还包括加载“无冲突”模式的 jQuery 库，也许可以应用相同的解决方案。

尝试替换这个：

```
$(function() { 
```

有了这个：

```
jQuery(document).ready(function ($) { 
```

# c# - 使用和不使用合同名称的 MEF 导出是否有缺点？

> ID：15950314
> 
> 赞同：0
> 
> 时间：2013-04-11T13:39:05.320
> 
> 标签：c#, mef

我正在考虑尝试调整一组导出的测试处理程序，以便一些可以自动使用而无需人工交互，而另一些可以手动使用。当它们具有手动能力时，它们将显示不同的用户控件。

我知道您可以使用合同名称导出/导入，但我想知道这样使用有什么缺点：

```
[Export(typeof(TestStepHandler))]
[Export("ManualTest", typeof(TestStepHandler))] 
```

这样我就可以在与手动测试相关的一个 ViewModel 中导入合同名称，并在其他地方导入另一个 ViewModel 中的所有内容。我想我仍然需要一个手动测试的属性，以便“DataTemplate”在用户模式下显示时以不同的方式工作，但这很容易迭代导入的列表。

我确实考虑过我可以使用元数据以及`Lazy`导入和过滤，但是与使用和不使用合约名称的导出相比，它有什么优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T14:43:50.830

导出元数据优于导出合同的一个优点是，您可以使用元数据动态更改导出对象的过滤。与属性其静态。

您所描述的另一个缺点是您在被测代码中添加了与测试相关的代码。我不知道这是不是你真正想要的。

Appart 使用您提到的导出元数据的解决方案，还有另一种替换属性模型合同的方法：

使用 MEF2 的**约定**功能，它允许设置没有属性的导出/导入。如果您不熟悉 MEF2 约定，请查看本[系列迷你文章](http://blogs.microsoft.co.il/blogs/bnaya/archive/2013/01/06/mef-2-0-toc.aspx)。约定的好处在于它不能替代属性模型。两者可以一起工作。这意味着您可以在程序集上使用 MEF 属性，并在测试中使用约定来添加合同。这种方法的重要之处在于允许测试注入将用于创建目录的[RegistrationBuilder 。](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.registration.registrationbuilder.aspx)

# java - 用于应用 Checkstyle 修复的 Java Eclipse CheckStyle 快捷键

> ID：15950323
> 
> 赞同：3
> 
> 时间：2013-04-11T13:39:41.707
> 
> 标签：java, eclipse, checkstyle

我过去使用检查样式并记得使用快捷键来应用检查样式修复（节省大量点击）。我不记得我是否为它设置了快捷方式，或者它是否已经附带了一个。

我的问题分为两部分：1）是否有一种简单的方法来检查“应用 Checkstyle 修复”是否有快捷键组合？2）如果没有一个设置，有没有办法设置一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:40:57.447

发布后不久就找到了答案...以下是用于文档目的的步骤：

Windows -> 首选项 -> 常规 -> 键 -> 应用 Checkstyle 修复（默认：Ctrl+Alt+C）

# java - BufferedReader 字符串内存泄漏？

> ID：15950326
> 
> 赞同：4
> 
> 时间：2013-04-11T13:39:51.857
> 
> 标签：java, string, memory, bufferedreader

我正在为 AP Computer Science 开展一个项目，我们实际上是在创建一个图书馆，您可以在其中添加客户和书籍，向客户签出书籍等，我们必须能够读取/写入 CSV。我在处理这段代码时遇到了一些问题（这只是其中的一部分，我很确定其余部分可以正常工作，整个代码总共接近 600 行）：

```
public void readForBook()  {    
    try{ 
        BufferedReader CSVFile = new BufferedReader(new FileReader("book.csv"));

        String dataRow = CSVFile.readLine();
        dataRow = CSVFile.readLine();
        while (dataRow != null){
            String[] dataArray = dataRow.split(", ");
            int tbuid = Integer.parseInt(dataArray[0]);
            String t_title = dataArray[1];
            String tfirst = dataArray[2];
            String tlast = dataArray[3];
            String tdescription = dataArray[4];
            String tisbn = dataArray[5];
            String tdpurchase = dataArray[6];
            String tcopyrightyear = dataArray[7];
            double tcost = Double.parseDouble(dataArray[8]);
            dataRow = CSVFile.readLine();
            int crYear = Integer.parseInt(tcopyrightyear);

            Book tempBook = new Book(tbuid, t_title, tfirst, tlast, tdescription, tisbn, tdpurchase, crYear, tcost);
            BookList.add(tempBook);
        }
        CSVFile.close();
    } catch(IOException fnfe) { 
        System.out.println(fnfe.getMessage());
    }
}
public void readForCustomer(){      
    try{ 
        BufferedReader CSVFile = new BufferedReader(new FileReader("customer.csv"));

        String customerRow = CSVFile.readLine();
        customerRow = CSVFile.readLine();
        while (customerRow != null){
            String[] customerCSVArray = customerRow.split(", ");
            int tcuid = Integer.parseInt(customerCSVArray[0]);

            String temp_zip = customerCSVArray[7];
            int tzip = Integer.parseInt(temp_zip);
            String temp_balance = customerCSVArray[8];
            double tbalance = Double.parseDouble(temp_balance);

            Customer tempCustomer = new Customer(tcuid, customerCSVArray[1], customerCSVArray[2], customerCSVArray[3], customerCSVArray[4], customerCSVArray[5], customerCSVArray[6], tzip, tbalance, customerCSVArray[9]);
            CustomerList.add(tempCustomer);
        }
        CSVFile.close();
    } catch(IOException fnfe) { 
        System.out.println(fnfe.getMessage());
    }
} 
```

这是问题所在：第一个 readForBook 运行良好，但是 readForCustomer 是具有“线程中的异常”main“java.lang.OutOfMemoryError：Java 堆空间”错误的那个：

```
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
at java.nio.HeapByteBuffer.<init>(HeapByteBuffer.java:39)
at java.nio.ByteBuffer.allocate(ByteBuffer.java:312)
at sun.nio.cs.StreamDecoder.<init>(StreamDecoder.java:231)
at sun.nio.cs.StreamDecoder.<init>(StreamDecoder.java:211)
at sun.nio.cs.StreamDecoder.forInputStreamReader(StreamDecoder.java:50)
at java.io.InputStreamReader.<init>(InputStreamReader.java:57)
at java.util.Scanner.<init>(Scanner.java:590)
at Customer.<init>(Customer.java:6)
at Library.readForCustomer(Library.java:219)
at Library.importFromTextFile(Library.java:170)
at Library.mainMenu(Library.java:149)
at Library.<init>(Library.java:17)
at runIt.main(runIt.java:3) 
```

我通过 VisualVM 运行了一个堆转储，它说有大量的字符串实例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T13:42:35.037

在您的`while`循环中，您必须继续调用`CSV.readLine ()`. **你只在循环之外**调用它一次，这意味着你最终会得到一个无限循环并且可能是一个完整的堆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:45:15.217

将循环更改为：

```
 while ((customerRow = CSVFile.readLine()) != null){
     //...
  } 
```

并删除上面的行：`dataRow = CSVFile.readLine();`

# python - 如何在另一个具有计数功能的字典中创建字典？

> ID：15950333
> 
> 赞同：0
> 
> 时间：2013-04-11T13:40:11.500
> 
> 标签：python, dictionary, count

我有一组文件，我想在其中提取特殊名称并计算每个文件中的名称。我希望我的最终结果是两个字典，如下所示：

```
{ID1:{sam:1,maj:5, tif:7, paul:1},ID2={maj=4,bib=5},..} 
```

我为此编写了以下代码：

```
val={}   
for m in result:    
    f= open(path+m[1]+'.txt', 'r')
    for line in f:
        search_str= "my_name"
        if line.startswith(search_str):            
            linename = line.split(' ',2)[1].strip()
            key= get_name_part(linename)                       
            val[key] = val.get(key, 0) + 1 

    maindict[m[0]]=val 
```

其中 m[0] 是“fileID”（我的大字典的键），m[1]= 是必须打开的文件。

运行代码时，我的内部字典始终相同，但只有外部字典的键不同。像这样：

```
{ID1:{sam:1,maj:5, tif:7, paul:1},ID2={sam:1,maj:5, tif:7, paul:1},..} 
```

有人知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:47:01.190

你永远不会创建一个*新* `val`的字典，你只是不断地更新你在循环之前创建的那个。为每个创建一个新的`ID`：

```
maindict = {}
for m in result:
    val = maindict.setdefault(m[0], {})
    f= open(path+m[1]+'.txt', 'r')
    for line in f:
        search_str= "my_name"
        if line.startswith(search_str):            
            linename = line.split(' ',2)[1].strip()
            key= get_name_part(linename)                       
            val[key] = val.get(key, 0) + 1 
```

您可以使用`collections.Counter`and来简化代码`collections.defaultdict`：

```
from collections import Counter, defaultdict
import os

maindict = defaultdict(Counter)

for m in result:
    counts = maindict[m[0]]
    with open(os.path.join(path, m[1] + '.txt'), 'r') as f:
        search_str = "my_name"
        counts.update(get_name_part(line.split(None, 2)[1])
            for line in f if line.startswith(search_str)) 
```

# css - 是否可以在元素中插入边框，留下边距？

> ID：15950335
> 
> 赞同：0
> 
> 时间：2013-04-11T13:40:22.053
> 
> 标签：css, border

我希望我的一些 div 有一个顶部边框，但我希望这个边框稍微嵌入到元素中，让顶部的几个像素保持原样，div 内容在那里可见。

有没有办法做到这一点？我不是在寻找 js 或 jQuery 解决方案。

在下面的图片中，我希望棕色部分是一个 div，有一种 4px 橙色边框，插入或两个边框，一个橙色和一个棕色。它必须位于元素的顶部。

![在此处输入图像描述](https://i.stack.imgur.com/DmzRz.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T14:03:33.923

不完全是边框，但 CSS3 [box-shadow](https://developer.mozilla.org/en-US/docs/CSS/box-shadow)可以在盒子内部绘制，原始颜色边框在外面：

```
#my_div { 
    width: 200px;
    height: 100px;
    background: brown;
    padding: 10px;
    color: orange;
    border-top: 10px brown solid; 
    box-shadow: inset 0 5px  orange;
} 
```

[jsfiddle](http://jsfiddle.net/Aprillion/ZRSCN/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:54:00.710

[由于盒子模型标准](http://www.w3.org/TR/CSS2/box.html)，您所要求的不能用单个元素来完成，但是用两个元素来做是微不足道的。

```
<div class="outer">
    <div class="inner">
        What can I design fo
    </div>
</div> 
```

只需`.outer`在顶部填充并`.inner`可以处理边框。

[http://jsfiddle.net/ExplosionPIlls/NGbeB/](http://jsfiddle.net/ExplosionPIlls/NGbeB/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:57:03.213

如果边框要一直围绕元素而不仅仅是特定的一侧，则可以为此目的使用轮廓：

[http://tinker.io/95978](http://tinker.io/95978)

```
h1 {
    background: #CCC;
    outline: 2px solid;
    outline-offset: -8px;
    padding: 10px;
}

<h1>I like borders</h1> 
```

但是，任何版本的 IE 都不支持 outline-offset 属性。

您还可以使用伪元素来保持边框，这将允许您仅在特定边上指定边框。

[http://tinker.io/95978/1](http://tinker.io/95978/1)

```
h1 {
    position: relative;
    background: #CCC;
    padding: 10px;
}

h1:before {
    position: absolute;
    top: 4px;
    right: 4px;
    bottom: 4px;
    left: 4px;
    border: 2px solid;
    content: ' ';
    display: block;
} 
```

应该在 IE8+ 和几乎任何其他浏览器中工作。

# ios - 如何处理情节提要中的返回事件？

> ID：15950341
> 
> 赞同：1
> 
> 时间：2013-04-11T13:40:35.820
> 
> 标签：ios, xcode, storyboard, uistoryboard

我有一个简单的问题。我使用带有导航控制器的故事板。应用程序执行从第一个 VC 到另一个 VC 的 push segue。用户按下“返回”按钮后，他将返回到第一个 VC。我需要处理这个事件，刷新显示数据。

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:45:15.640

我希望您需要在第一个 VC 中刷新数据。在第一个 VC 中实现**viewDidAppear:**

```
-(void)viewDidAppear:(BOOL)animated
{
  [super viewDidAppear:animated];
  // refresh data
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:45:05.540

看一下这个问题：[iOS中navigationController中的后退按钮回调](https://stackoverflow.com/questions/5217992/back-button-callback-in-navigationcontroller-in-ios)

```
-(void) viewWillDisappear:(BOOL)animated {
if ([self.navigationController.viewControllers indexOfObject:self]==NSNotFound) {
   // back button was pressed.  We know this is true because self is no longer
   // in the navigation stack.  
}
[super viewWillDisappear:animated];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T17:45:49.060

在 iOs 5.0 之前的版本中，您可以使用 -viewWillDisappear：

```
- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];

    if (![[self.navigationController viewControllers] containsObject:self]) {
        //...
    }
} 
```

在 iOS 5.0+ 中，您可以使用 -didMoveToParentViewController：

```
- (void)didMoveToParentViewController:(UIViewController *)parent
{
    //...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-29T07:38:10.007

```
- (void)didMoveToParentViewController:(UIViewController *)parent{
    if(!parent){
        //...
    }
} 
```

# node.js - npm 没有为自己的本地安装包创建 ./node_modules

> ID：15950345
> 
> 赞同：2
> 
> 时间：2013-04-11T13:40:50.150
> 
> 标签：node.js, npm

我正在研究一个使用 C++ 开发 Nodejs 扩展的[Hello World](http://nodejs.org/api/addons.html#addons_hello_world)示例。一切正常，我可以运行该示例。但是我想使用**require('hello')**而不是**require('./build/Release/hello')**我知道需要将文件放在**node_modules**文件夹中。当我按照有关使用**NPM Install**本地安装软件包的说明进行操作时，不会创建文件夹**node_modules**（经过几个小时我已经开发了一种解决方法，但它是一团糟）。

我正在使用 Mac OS Mountain Lion 和 NPM 版本 1.2.17。NPM 从存储库（和卸载）在本地和全局安装包，没有任何问题。我检查了**NPM 根目录**，它指向 node_modules 文件夹并按照上一个[问题](https://stackoverflow.com/questions/7408979/npm-not-defaulting-local-installs-to-node-modules)中的建议重新安装了 NPM 。文件如下：

**包.json**

```
{
  "name": "HelloWorld",
  "version": "1.0.0",
  "description": "Nodejs Extension using C++",
  "main": "./build/Release/hello.node",
  "scripts": {
    "preinstall": "node-gyp rebuild",
    "preuninstall": "rm -rf build/*"
  },
  "repository": "",
  "readmeFilename": "README.md",
  "author": "",
  "license": ""
} 
```

**绑定.gyp**

```
{
  "targets": [
    {
      "target_name": "hello",
      "sources" : [ "src/hello.cc" ]
    }
   ]
} 
```

**你好.cc**

```
#include <node.h>
#include <v8.h>

using namespace v8;

Handle<Value> Method(const Arguments& args) {
   HandleScope scope;
   return scope.Close(String::New("Hello, World!"));
}

void init(Handle<Object> exports) {
  exports ->Set(String::NewSymbol("hello"),
    FunctionTemplate::New(Method)->GetFunction());
}

NODE_MODULE(hello, init) 
```

由于缺乏使用 NPM 的经验，我觉得我遗漏了一些简单的东西，因此希望能提供任何帮助。

此外，我是 Stack Overflow 的新手，因此我将不胜感激地收到任何关于如何改进未来问题的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:26:50.727

包的名称由 package.json 中的 name 属性确定。您设置它的方式将适用

```
`require("HelloWorld")` 
```

正如你所拥有的

```
`"name": "HelloWorld"` 
```

如果你想让它成为

```
`require("hello")` 
```

只需将您的 package.json 文件更改为

```
`"name": "hello"` 
```

对于您的安装问题 - 您如何以及在哪里运行 npm install？我创建了一个与 HelloWorld 相同级别的 HelloWorldClient 目录并运行

```
`npm install ../HelloWorld/` 
```

效果很好。我的客户端代码（将包名称更改为 hello 后）也可以正常工作：test.js：

```
var hello = require('hello');
console.log(hello.hello()); 
```

# android - Android 上的 Poco C++ Net 找不到地址

> ID：15950350
> 
> 赞同：4
> 
> 时间：2013-04-11T13:40:56.023
> 
> 标签：android, android-ndk, poco-libraries

我无法让我的 POCO C++ 库在 Android 上发送请求，它只会抛出错误，因为找不到地址，下面是我的代码。为什么它不起作用？我一直将[其](http://www.codeproject.com/Articles/252566/Learning-Poco-GET-with-HTTP)用作参考，并且希望在 android 和 ios 上都可以使用。

```
int NetPoco::getJson(string url){

try
  {
    printnet("Prepare session");

    // prepare session
    URI uri("www.google.se");
    HTTPClientSession session(uri.getHost(), uri.getPort());

    // prepare path
    printnet("Prepare path");

    string path(uri.getPathAndQuery());
    if (path.empty()) path = "/";

    // send request
    printnet("Prepare request for");
    printnet(path.c_str());
    HTTPRequest req(HTTPRequest::HTTP_GET, path, HTTPMessage::HTTP_1_1);
    session.sendRequest(req);

    // get response
    printnet("Get response");

    HTTPResponse res;
    cout << res.getStatus() << " " << res.getReason() << endl;

    // print response
    printnet("Print response");

    istream &is = session.receiveResponse(res);
    StreamCopier::copyStream(is, cout);
    printnet("RESULT");

  }
  catch (Exception &ex)
  {
    printnet(ex.displayText().c_str());
    //cerr << ex.displayText() << endl;
    return -1;
  }

  return 0;
} 
```

在我的 Android 设备上运行时，我只得到：

```
04-11 15:33:30.492: D/NET_TAG(16118): Prepare session
04-11 15:33:30.492: D/NET_TAG(16118): Prepare path
04-11 15:33:30.492: D/NET_TAG(16118): Prepare request for
04-11 15:33:30.492: D/NET_TAG(16118): www.google.se
04-11 15:33:30.500: D/NET_TAG(16118): No address found 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:08:38.887

使用本机网络仍然需要更新您的 android 清单以允许从应用程序进行网络操作：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# asp.net-mvc-3 - Jasig CAS SSO .NET 客户端未从其他应用程序注销

> ID：15950354
> 
> 赞同：0
> 
> 时间：2013-04-11T13:41:01.060
> 
> 标签：asp.net-mvc-3, single-sign-on, cas, jasig

我正在使用 Jasig CAS .NET 客户端在我的应用程序中使用来自服务器的 SSO 进行身份验证。我已经按照文档中的说明实现了所有内容，并在我的所有控制器中添加了 [Authorize]。

从我的应用程序和我正在尝试集成的应用程序登录工作正常。我可以从任一应用程序登录，并且用户已通过身份验证。

问题在于注销。如果我从其他应用程序中注销，用户仍然可以访问我的应用程序。

这是因为 CAS 注销无法删除 cookie 吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-08T08:34:28.473

您仍然登录到您的 Web 应用程序，因为身份验证信息存储在 cookie 中，并且您的 Web 应用程序（或 .NET CAS 客户端）不会检查每个页面请求是否仍然在 CAS 服务器上登录。cookie 用于此目的，直到过期。

所以基本上 CAS 服务器必须有一个*Single Sign-Out*页面，该页面可以让用户从所有使用该 CAS 服务器的 Web 应用程序中注销，包括您的。CAS 服务器必须配置为在您的 Web 应用程序中调用*注销*页面，这反过来会放弃 ASP.NET 会话并删除身份验证 cookie。该`CasAuthentication.SingleSignOut()`方法为您执行此操作。

# jquery - 针对 tinymce 运行 jQuery

> ID：15950358
> 
> 赞同：0
> 
> 时间：2013-04-11T13:41:23.313
> 
> 标签：jquery, wordpress, tinymce

我正在使用 chrome 控制台并尝试在其中添加一些 jQuery，以便在 WordPress TinyMCE 编辑器中操作对象的运行时样式。

我在编辑器中有一个带有“my_box”类的 div 元素，我正在尝试通过 jQuery 操作运行时样式，如下所示：

```
jQuery('#tinymce .my_box').hover(
    function(){
        jQuery(this).attr('style','border:3px dashed red')
    }
); 
```

但是，当我在控制台中运行它时，DOM 结果集为空 []。如何将事件附加到 tinymce 编辑器内的对象，以及在测试脚本是否有效后应该将其放置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:46:23.817

当它运行时，它将`.my_box`在包装器中找到当时存在的任何实例。如果他们当时不在那里，或者`#tinymce`不是真正的包装器而是正在生成一些tinymce，那么下面的选择器将什么也找不到。

```
jQuery('#tinymce .my_box').hover(
    function(){
        jQuery(this).attr('style','border:3px dashed red')
    }
); 
```

考虑这样的事情，`#tinymceWrap`一个独立的 div 包装编辑器：

```
jQuery('#tinymceWrap').hover(
    function(){
        // use find here so jquery will search for `.my_box` instances again on each hover
        jQuery(this).find('.my_box').css('border','3px dashed red');
    }
); 
```

# android - 如何在android的FrameLayout中获取视频播放的照片？

> ID：15950359
> 
> 赞同：4
> 
> 时间：2013-04-11T13:41:27.123
> 
> 标签：android, photo, android-framelayout

我正在帧布局内播放视频，当我按下按钮时，我想为该视频帧拍照并将其保存到 SD 卡。我怎样才能做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:19:42.047

如果照片是指缩略图，那么以下代码可能对您有用：

```
int id = **"The Video's ID"**
ImageView iv = (ImageView ) convertView.findViewById(R.id.imagePreview);
ContentResolver crThumb = getContentResolver();
BitmapFactory.Options options=new BitmapFactory.Options();
options.inSampleSize = 1;
Bitmap curThumb = MediaStore.Video.Thumbnails.getThumbnail(crThumb, id,
MediaStore.Video.Thumbnails.MICRO_KIND, options);
iv.setImageBitmap(curThumb); 
```

然后，您只需将此代码链接到使用 Android 的按钮按下`onClickListner`。一个使用监听器的简单示例如下：

```
final Button button = (Button) findViewById(R.id.button_id);
         button.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {
                 // Perform action on click
             }
         }); 
```

最后，要将缩略图保存到 SD 卡，您应该看一下这个答案：

[Android 将图像保存到 SQLite 或 SDCard 或内存](https://stackoverflow.com/questions/9273008/android-save-images-to-sqlite-or-sdcard-or-memory)

# linux - rsync带宽使用说明

> ID：15950360
> 
> 赞同：0
> 
> 时间：2013-04-11T13:41:28.490
> 
> 标签：linux, rsync

我有一个 rsync 脚本，该脚本当前从一个内部硬盘驱动器备份到另一个，我正在考虑添加一个异地备份（ rsync over ssh ），我的问题是带宽的使用是什么。这是我的日志显示的示例输出

```
sent 86511816 bytes  received 12798 bytes  5967214.76 bytes/sec
total size is 16458790438  speedup is 190.22 
```

我想知道如果我添加这个异地，它会发送 15 GB（总大小是......）还是 0.08 GB（发送......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:52:38.510

我认为它只会是0.08GB。总大小是整个备份的大小。

所以它类似于总=（发送+接收）*加速。

# c++ - 将 Python 异常转换为 std::string

> ID：15950370
> 
> 赞同：1
> 
> 时间：2013-04-11T13:41:46.967
> 
> 标签：c++, string, exception, python-3.x, converter

如何将发生的 Python 异常转换并保存到 std::string 或 wstring 中？这是我当前的代码：

```
 String ScriptErrorHandler::the_error()
    {
        if(PyErr_Occurred())
        {
            PyObject *error_type, *the_error, *the_traceback, *py_error_string, *py_error_unicode;
            PyErr_Fetch(&error_type, &the_error, &the_traceback);
            PyErr_NormalizeException(&error_type, &the_error, &the_traceback);
            if((error_type != NULL))
            {
                String the_error_string, the_traceback_string;
                if (the_error != NULL)
                {

                        py_error_string = PyObject_Str(the_error);
                        py_error_unicode = PyUnicode_FromObject(py_error_string);
                        const char* char_string = PyUnicode_AS_DATA(py_error_unicode);
                        auto char_length = PyUnicode_GET_DATA_SIZE(py_error_string);
                        the_error_string = String(char_string, char_length);
                }
                if(the_traceback != NULL)
                    auto the_traceback_string = PyBytes_AsString(the_traceback);
                String str_error(the_error_string);
                String str_traceback(the_traceback_string);
                String message(str_error + "\n Traceback: " + str_traceback);
                Py_XDECREF(error_type);
                Py_XDECREF(the_error);
                Py_XDECREF(the_traceback);
                return message;
            }
        }
        return StringUtil::BLANK;
    } 
```

调试显示 the_error_string 仅包含“i”，它是错误消息的第一个字符，应该类似于“invalid ..blabla”。

我究竟做错了什么？

我正在使用 Python 3.1

# php - PHP变量表示

> ID：15950377
> 
> 赞同：0
> 
> 时间：2013-04-11T13:41:54.663
> 
> 标签：php, variables

我有这个代码

```
if($pdo instanceof PDO){
    $this->last = 'lastInsertId'; 
}
else{
     $this->last = 'insert_id'; 
} 
```

当我在数据库中进行插入查询时，如何获取最后插入的 ID。我试过这样

```
$this->db->{$this->last}; 
```

但它没有用。

我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:48:24.327

`lastInsertId`是一种方法，因此您应该将其称为方法，而不是属性/字段。

```
$this->db->{$this->last}(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:45:50.783

尝试[`call_user_func`](http://php.net/call-user-func)`(Array($this->db,$this->last))`

# cordova - PhoneGap 的网络连接状态不会在 Ripple 中更新

> ID：15950382
> 
> 赞同：7
> 
> 时间：2013-04-11T13:42:02.300
> 
> 标签：cordova, ripple

用于检查当前网络连接的标准 PhoneGap API（见下文）似乎没有更新它在 Ripple Emulator 中的结果。当我更改连接类型并执行 checkConnection() 时，它会从第一次调用此函数时返回连接类型（在 deviceready 时）

```
function checkConnection() {    // Checks current network status
    networkState = navigator.connection.type;
    console.log(networkState);

    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';

    // DEBUG: notify on network state
    console.log("Connection type: " + states[networkState]);
} 
```

我还需要做些什么（添加事件侦听器？）才能让它工作吗？通常，设备只会在状态从在线变为离线时触发事件，但我需要区分“免费”互联网和 xG 连接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-06T08:32:40.633

显然 navigator.connection.type 在 windows 平台上的 cordova 中没有更新。查看代码，navigator.connection.type 仅在 'deviceready' 事件之后设置一次。

诀窍是在相关事件上使用 Connection#getInfo() 手动更新它

```
var connection = navigator.connection;
function errorCallback(e) {
  console.warn(e);
};
function updateConnection(info) {
  connection.type = info;
}
document.addEventListener("resume", function() {
  connection.getInfo(updateConnection, errorCallback);
});
document.addEventListener("online", function() {
  connection.getInfo(updateConnection, errorCallback);
});
document.addEventListener("offline", function() {
  connection.getInfo(updateConnection, errorCallback);
}); 
```

免责声明：从我自己的代码中重构/复制粘贴的部分，应该可以开箱即用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-24T16:28:34.913

我会说尝试添加一个超时功能来延迟通话。当这解决了问题时，我已经看到了类似的问题。首先执行以下操作：

```
networkState = navigator.connection.type; 
```

然后：

```
setTimeout(function(){

    networkState = navigator.connection.type; // have to do this second time to pick up the refreshed value
    console.log(networkState);

    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';

    // DEBUG: notify on network state
    console.log("Connection type: " + states[networkState]);
}, 500); 
```

这给了 navigator.connection.type 时间（本例中为 500 毫秒）来刷新它的值。

# javascript - 保存图像+在javascript中选择目录

> ID：15950383
> 
> 赞同：0
> 
> 时间：2013-04-11T13:42:03.720
> 
> 标签：javascript, html, image, save, save-as

我想做的是这个..我在`HTML`页面中有一个图像并使用一个按钮我想要这个保存按钮，你可以选择保存粘贴的位置，比如“将图像另存为”。

另外还打算创建一个简单的`input`会出现哪里保存图片的路径，让这个路径保存在数据库中。

这可能吗？欢迎任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:57:39.343

由于安全原因，这可能是不可能的。javascript 的许多客户端/本地功能被禁用。就像读写本地文件系统一样。如果你想做这样的事情，你需要用服务器语言来做，比如 php（推荐）

# ruby-on-rails - 机车 CMS 应用程序在 Heroku 部署后崩溃 - 无法加载 redcloth_scan

> ID：15950384
> 
> 赞同：1
> 
> 时间：2013-04-11T13:42:13.857
> 
> 标签：ruby-on-rails, deployment, heroku, locomotivecms

我有一个在 Heroku 上运行的 Locomotive CMS 实例，它已经运行了大约一年。我是唯一的开发人员，因此自上次工作部署以来没有任何部署。

昨天我更新了 config/environments/production.rb - 我改变的只是现有 ActionMailer 设置的值。承诺并推动，等等 - 该应用程序不再起作用。

当在生产和开发模式下运行时，该应用程序可以在开发机器上运行。

我是 Rails 和 Heroku 的新手，所以我在解释日志时遇到了一些困难。

我已将日志发布在： http: [//pastebin.com/GZpRaue6](http://pastebin.com/GZpRaue6)

我可以在日志中看到的唯一明确错误是：

> 无法加载 redcloth_scan

我已经尝试将 gem 'RedCloth' 添加到我的 gems 文件并安装包，因为它在源代码的原始版本中没有明确要求，但这没有任何区别。

我的 gemfile.lock中没有提到 redcloth_scan *，*但 RedCloth 被列为 Locomotive 的依赖项。

```
locomotive_cms (2.0.0.rc9)
  RedCloth (~> 4.2.8) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T20:22:45.253

在对 gemfile 搞砸之后，每次 gemfile 更改只会导致为不同的 gem 加载二进制文件时出现不同的问题。所以不是红布特有的问题。

我遇到了这个 SO 帖子：[供应商/捆绑的目的是什么？Heroku 告诉我删除它](https://stackoverflow.com/questions/12573596/what-is-the-purpose-of-vendor-bundle-heroku-tells-me-to-remove-it)

这种 --path 的使用当然不是一个优雅的解决方案，我的应用程序以前从来不需要这个 - Heroku 中一定发生了一些变化，我希望将来能够摆脱这种情况。但它现在已经修复了，这对我来说已经足够好了。

# python - 调用 PyEval_CallObject 时程序关闭

> ID：15950385
> 
> 赞同：2
> 
> 时间：2013-04-11T13:42:17.630
> 
> 标签：python, c, python-2.7

我正在尝试在 python 脚本中使用 C 模块，所以当代码到达 PyEval_Callobject 调用程序崩溃/关闭时。

C端代码：

```
 static PyObject *register_inactivity_callback(PyObject *self, PyObject *args)
{
    PyObject *temp;

    if (!PyTuple_Check(args) || PyTuple_Size(args) < 0)
    {
        fprintf(stderr, "invalid input parameter\n");
        Py_RETURN_NONE;
    }

    temp = PyTuple_GetItem(args, 0);
    if (!PyCallable_Check(temp))
    {
        fprintf(stderr, "parameter must be callable\n");
        Py_RETURN_FALSE;
    }
    Py_XINCREF(temp);
    Py_XDECREF(inactivity_callback);
    inactivity_callback = temp;

    Py_RETURN_TRUE;
}

void inactivity_callback_internal(void *arg)
{
    PyObject *arglist;
    struct input_event *event = (struct input_event *)arg;

    if (inactivity_callback && event)
    {
        arglist = Py_BuildValue("()");
        PyEval_CallObject(inactivity_callback, arglist);
        Py_DECREF(arglist);
    }
} 
```

蟒蛇方面：

```
def on_inactivity():
    print 'inactivity'

register_inactivity_callback(on_inactivity) 
```

我已经在 ubuntu 桌面平台上测试了这段代码及其工作，但是当我转移到 ARM 时，程序开始在 PyEval_CallingObject 上崩溃/关闭。

我在代码中做了什么可疑的事情吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:44:39.380

我找到了根本原因。PyEval_CallObject 函数需要被 PyGILState_Ensure/Release 函数包装。请参阅[http://docs.python.org/2/c-api/init.html](http://docs.python.org/2/c-api/init.html)（非 Python 创建的线程）。

```
gstate = PyGILState_Ensure();
PyEval_CallObject(inactivity_callback, arglist);
PyGILState_Release(gstate); 
```

# android - 在 BlackBerry 10 中强制退出 Android 应用程序

> ID：15950386
> 
> 赞同：0
> 
> 时间：2013-04-11T13:42:21.200
> 
> 标签：android, blackberry-10

对于 Android，我们有一个非常肮脏的解决方法——不要问，客户端——在主要活动中基本上是这样工作的。调用时`quitApp()`，活动堆栈被清除，应用程序完全退出。

```
public void quitApp() {
    Intent intent = new Intent(getApplicationContext(), MainActivity.class);
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    intent.putExtra("EXIT", true);
    startActivity(intent);
}

@Override
public void onResume() {
    super.onResume();
    if (getIntent().getBooleanExtra("EXIT", false)) {
      finish();
    }
} 
```

我们现在已经为 BlackBerry 10 打包了这个应用程序，除了这段代码之外，其他一切都运行良好。调用时发生的情况`quitApp()`是活动刷新（有时它会转到应用程序“暴露”之间的东西），但无论如何应用程序都会保持在屏幕上。

是否有任何其他解决方法可以强制退出为 BB10 打包的 Android 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:32:09.283

`System.exit(1);`会为你做的。

这是一个系统挂钩：[http ://docs.oracle.com/javase/1.5.0/docs/guide/lang/hook-design.html](http://docs.oracle.com/javase/1.5.0/docs/guide/lang/hook-design.html)

此处讨论：[我们何时应该在 Java 中调用 System.exit](https://stackoverflow.com/questions/3715967/when-should-we-call-system-exit-in-java)

这是 Android 文档： http: [//developer.android.com/reference/java/lang/System.html#exit(int)](http://developer.android.com/reference/java/lang/System.html#exit(int))

为什么你不应该在 Android 中使用 System.Exit：[退出应用程序是否令人不悦？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon?lq=1)

# java - MimeType 到编码文件

> ID：15950389
> 
> 赞同：0
> 
> 时间：2013-04-11T13:42:31.877
> 
> 标签：java, jsf-2, web

我需要返回一个编码的 PDF，但我需要 MIME 类型来执行它。我应该用什么？

谢谢！

```
ExternalContext ec = fc.getExternalContext();

    ec.responseReset(); 
     ec.setResponseContentType("??")
    ec.setResponseHeader("Content-Disposition", "attachment; filename=\"" + this.fileName + ".pdf" + "\""); 

    OutputStream output = ec.getResponseOutputStream();
    output.write(encrypted);
    output.flush();
    output.close();

    fc.responseComplete(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:47:44.127

我不完全确定编码 PDF 是什么以及它与普通 PDF 有何不同。由于您将其导出为`.pdf`文件，因此我认为标准的 PDF mime 类型`application/pdf`将适用。

# boost - cmake找不到提升线程

> ID：15950395
> 
> 赞同：2
> 
> 时间：2013-04-11T13:42:48.813
> 
> 标签：boost, cmake, ubuntu-12.04, emscripten

我正在尝试使用 emscripten 将一些项目编译为 js。该项目使用 cmake 作为构建工具。

这就是我调用 cmake 的方式：

```
cmake -DEMSCRIPTEN=1 
-DCMAKE_TOOLCHAIN_FILE=~/Documents/emscripten/cmake/Platform/Emscripten_unix.cmake
-DCMAKE_MODULE_PATH=~/Documents/emscripten/cmake 
-DCMAKE_BUILD_TYPE=Release 
-G "Unix Makefiles" 
-DRDK_BUILD_PYTHON_WRAPPERS= 
-DBOOST_INCLUDEDIR=~/Documents/boost_1_53_0/boost 
-DBOOST_LIBRARYDIR=~/Documents/boost_1_53_0/stage/lib 
-DBoost_REGEX_LIBRARY=~/Documents/boost_1_53_0/stage/lib/libboost_regex.a 
-DBOOST_ROOT=~/Documents/boost_1_53_0 
-DBoost_NO_SYSTEM_PATHS=TRUE 
-DBoost_USE_MULTITHREADED=FALSE 
-DBoost_USE_STATIC_LIBS=OFF 
-DBoost_USE_STATIC_RUNTIME=OFF 
-DBoost_ADDITIONAL_VERSIONS="1.53.0" 
-DBoost_DETAILED_FAILURE_MSG=TRUE 
-DBoost_NO_BOOST_CMAKE=ON 
-DBoost_DEBUG=TRUE 
.. 
```

这就是我在 /home/mnowotka/Documents/boost_1_53_0/stage/lib 目录中的内容：

```
ls -lh ~/Documents/boost_1_53_0/stage/lib
total 4.4M
-rw-rw-r-- 1 mnowotka mnowotka 2.6M Apr 11 10:49 libboost_regex.a
lrwxrwxrwx 1 mnowotka mnowotka   24 Apr 11 10:10 libboost_regex.so -> libboost_regex.so.1.53.0
-rw-rw-r-- 1 mnowotka mnowotka 1.9M Apr 11 10:10 libboost_regex.so.1.53.0 
```

这就是我从 cmake 得到的：

```
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:667 ] Include debugging info:
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:669 ]   _boost_INCLUDE_SEARCH_DIRS = /home/mnowotka/Documents/boost_1_53_0/boost;/home/mnowotka/Documents/boost_1_53_0/include;/home/mnowotka/Documents/boost_1_53_0
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:671 ]   _boost_PATH_SUFFIXES = boost-1_53_0;boost_1_53_0;boost-1_48_0;boost_1_48_0;boost-1_48;boost_1_48;boost-1_47_0;boost_1_47_0;boost-1_47;boost_1_47;boost-1_46_1;boost_1_46_1;boost-1_46_0;boost_1_46_0;boost-1_46;boost_1_46;boost-1_45_0;boost_1_45_0;boost-1_45;boost_1_45;boost-1_44_0;boost_1_44_0;boost-1_44;boost_1_44;boost-1_43_0;boost_1_43_0;boost-1_43;boost_1_43;boost-1_42_0;boost_1_42_0;boost-1_42;boost_1_42;boost-1_41_0;boost_1_41_0;boost-1_41;boost_1_41;boost-1_40_0;boost_1_40_0;boost-1_40;boost_1_40;boost-1_39_0;boost_1_39_0;boost-1_39;boost_1_39
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:696 ] location of version.hpp: /home/mnowotka/Documents/boost_1_53_0/boost/version.hpp
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:715 ] version.hpp reveals boost 1.53.0
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:808 ] guessed _boost_COMPILER = 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:818 ] _boost_MULTITHREADED = 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:861 ] _boost_RELEASE_ABI_TAG = -
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:863 ] _boost_DEBUG_ABI_TAG = -d
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:906 ] _boost_LIBRARY_SEARCH_DIRS = /home/mnowotka/Documents/boost_1_53_0/stage/lib;/home/mnowotka/Documents/boost_1_53_0/lib;/home/mnowotka/Documents/boost_1_53_0/stage/lib;/home/mnowotka/Documents/boost_1_53_0/lib;/home/mnowotka/Documents/boost_1_53_0/../lib;/home/mnowotka/Documents/boost_1_53_0/stage/lib
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:1119 ] Boost_FOUND = TRUE
-- Boost version: 1.53.0
-- Looking for include files CMAKE_HAVE_PTHREAD_H
-- Looking for include files CMAKE_HAVE_PTHREAD_H - found
-- Looking for pthread_create in pthreads
-- Looking for pthread_create in pthreads - not found
-- Looking for pthread_create in pthread
-- Looking for pthread_create in pthread - found
-- Found Threads: TRUE 
-- Found BISON: /usr/bin/bison 
-- Found FLEX: /usr/bin/flex 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:525 ] Boost not in cache
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:528 ] _boost_TEST_VERSIONS = 1.53.0;1.48.0;1.48;1.47.0;1.47;1.46.1;1.46.0;1.46;1.45.0;1.45;1.44.0;1.44;1.43.0;1.43;1.42.0;1.42;1.41.0;1.41;1.40.0;1.40;1.39.0;1.39
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:530 ] Boost_USE_MULTITHREADED = FALSE
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:532 ] Boost_USE_STATIC_LIBS = OFF
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:534 ] Boost_USE_STATIC_RUNTIME = OFF
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:536 ] Boost_ADDITIONAL_VERSIONS = 1.53.0
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:538 ] Boost_NO_SYSTEM_PATHS = TRUE
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:606 ] Declared as CMake or Environmental Variables:
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:608 ]   BOOST_ROOT = /home/mnowotka/Documents/boost_1_53_0
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:610 ]   BOOST_INCLUDEDIR = /home/mnowotka/Documents/boost_1_53_0/boost
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:612 ]   BOOST_LIBRARYDIR = /home/mnowotka/Documents/boost_1_53_0/stage/lib
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:614 ] _boost_TEST_VERSIONS = 1.53.0;1.48.0;1.48;1.47.0;1.47;1.46.1;1.46.0;1.46;1.45.0;1.45;1.44.0;1.44;1.43.0;1.43;1.42.0;1.42;1.41.0;1.41;1.40.0;1.40;1.39.0;1.39
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:696 ] location of version.hpp: /home/mnowotka/Documents/boost_1_53_0/boost/version.hpp
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:715 ] version.hpp reveals boost 1.53.0
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:808 ] guessed _boost_COMPILER = 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:818 ] _boost_MULTITHREADED = 
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:861 ] _boost_RELEASE_ABI_TAG = -
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:863 ] _boost_DEBUG_ABI_TAG = -d
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:906 ] _boost_LIBRARY_SEARCH_DIRS = /home/mnowotka/Documents/boost_1_53_0/stage/lib;/home/mnowotka/Documents/boost_1_53_0/lib;/home/mnowotka/Documents/boost_1_53_0/stage/lib;/home/mnowotka/Documents/boost_1_53_0/lib;/home/mnowotka/Documents/boost_1_53_0/../lib;/home/mnowotka/Documents/boost_1_53_0/stage/lib
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:977 ] Searching for REGEX_LIBRARY_RELEASE: boost_regex-1_53;boost_regex;boost_regex-1_53;boost_regex;boost_regex
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:1009 ] Searching for REGEX_LIBRARY_DEBUG: boost_regex-d-1_53;boost_regex-d;boost_regex-d-1_53;boost_regex-d;boost_regex;boost_regex
-- [ /usr/share/cmake-2.8/Modules/FindBoost.cmake:1119 ] Boost_FOUND = FALSE
CMake Error at /usr/share/cmake-2.8/Modules/FindBoost.cmake:1202 (message):
Unable to find the requested Boost libraries.

Boost version: 1.53.0

Boost include path: /home/mnowotka/Documents/boost_1_53_0

The following Boost libraries could not be found:

      boost_regex

No Boost libraries were found.  You may need to set BOOST_LIBRARYDIR to the
directory containing Boost libraries or BOOST_ROOT to the location of
Boost.
Call Stack (most recent call first):
Code/GraphMol/SLNParse/CMakeLists.txt:4 (find_package)

CMake Error: The following variables are used in this project, but they are set to NOTFOUND.
Please set them or make sure they are set and tested correctly in the CMake files:
Boost_REGEX_LIBRARY (ADVANCED)
linked by target "testSLNParse" in directory /home/mnowotka/Documents/rdkit-code/Code/GraphMol/SLNParse

-- Configuring incomplete, errors occurred! 
```

**我只有一个问题：为什么？**

我做错了什么？这让我发疯......

（顺便说一句：如果我设置`Boost_USE_STATIC_LIBS`和`Boost_USE_STATIC_RUNTIME` `ON`或`OFF`- 它也不起作用......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T16:13:08.367

1.  您知道，*Emscripten*目前只能使用它编译的源代码的模块（例如*Boost*、*Boost-Regex ）吗？*换句话说，*Emscripten*不能使用动态库或预编译的静态库！

    *   因此，您必须将*Boost-Regex*的源代码添加到您的*cmake*文件中并将它们一起构建（我已经有一段时间没有完成*cmake ，所以我无法告诉您如何操作）。*

    *   或者您可以从*cmake*中删除对*Boost-Regex*的检查并硬编码必要的参考

     *无论您选择做什么，您都必须使用*Emscripten构建**Boost-Regex*！* 
***   至于*Emscripten*，您应该真正使用，因为*Emscripten*`Boost_USE_STATIC_LIBS=ON`目前不支持动态库（见上文）。

    **   *Emscripten*也不支持调用`pthread*`或任何并发处理。您应该在代码中搜索这些内容。*** 

 **很抱歉听起来如此消极，但目前使用带有*Emscripten*的库可不是小菜一碟。**

# r - sftp 用 R 获取文件

> ID：15950396
> 
> 赞同：0
> 
> 时间：2013-04-11T13:42:49.520
> 
> 标签：r

我需要 sftp 获取一堆文件并解析它们并删除不需要的行并形成一个数据框。是否可以 sftp 从远程 ftp 服务器获取一堆文件并在 R 中处理这些 txt 文件？

这是我迄今为止尝试过的，但我收到身份验证错误：

```
library(RCurl) 
url="sftp://ftp.address.com/directory"
filenames = getURL(url, ftp.use.epsv = FALSE, ftplistonly = TRUE)
filenames = paste(url, strsplit(filenames, "\n")[[1]], sep = "")
con = getCurlHandle( ftp.use.epsv = FALSE)
sapply(filenames, getURL, curl = con) 
```

我收到此错误：

函数错误（类型，msg，asError = TRUE）：无法解析主机：sftp:; 没有请求类型的数据记录

好的，我已经这样做了，它有点工作。

```
getURL("sftp://site.com/filename.txt", userpwd="id:passed") 
```

还没好呢。我需要将 getURL 的输出写入文件，以便我可以对文件执行 readLines 以解析不需要的行等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T15:41:10.397

```
x<-getURL("sftp://site.com/filename.txt", userpwd="id:passed")
fileConn<-file("output.txt")
writeLines(x, fileConn)
close(fileConn)
y<-readLines("output.txt") 
```

现在我可以解析出 y。这就是我想出的。让我知道可能有更好的方法来做到这一点？

# jsf-2 - jsf 2 managedproperty注解和参数

> ID：15950401
> 
> 赞同：0
> 
> 时间：2013-04-11T13:42:55.430
> 
> 标签：jsf-2, annotations, param, managed-property

我正在使用 JSF 2 和 Sprig 3，我想从使用 faces-config.xml 迁移到注释。

旧的：faces-config.xml：

```
<managed-bean> 
    <managed-bean-name>banqueBean</managed-bean-name>
    <managed-bean-class>commun.BanqueBean</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <managed-property>
        <property-name>banqueService</property-name>
        <value>#{banqueService}</value>
    </managed-property>
    <managed-property>
        <property-name>banqueId</property-name>
        <value>#{param.banqueId}</value>
    </managed-property>
</managed-bean> 
```

新的一个 ：

```
public class BanqueBean{
    private Banque banque;
    @ManagedProperty(name = "banqueService", value = "#{banqueService}")
    private BanqueService banqueService;
    @ManagedProperty(value = "#{param.banqueId}")
    private String banqueId;

    // setters for banqueService and banqueId 
```

banqueId 的值使用以下方式设置：

```
<f:param value="#{banque.id}" name="banqueId" /> 
```

问题是当使用 faces-config.xml 时，“系统”在参数 banqueId 的设置器之前调用 banqueService 的设置器，这样我就可以在 setBanqueId 方法中使用 banqueService。

使用注释时，它会在 banqueService 之前调用 banqueId 的设置器，以便我将 null 作为它的值。

为什么它反转了这两个方法的调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:55:08.213

您根本不应该依赖托管属性设置器方法调用顺序。这在规范中没有定义。

只需在 JSF 完成所有托管属性的设置时挂起即可。这就是[`@PostConstruct`](http://docs.oracle.com/javaee/6/api/javax/annotation/PostConstruct.html)注解的方法。

```
@PostConstruct
public void init() {
    banque = banqueService.find(banqueId);
} 
```

停止在 setter 中执行业务逻辑，仅当您仍在使用不支持`@PostConstruct`.

* * *

**与具体问题无关**，您知道新的 JSF2`<f:viewParam>`吗？它还可以帮助您摆脱 bean 中的这个样板文件，最终只拥有一个`Banque`属性和一个可重用的`Converter`.

### 也可以看看：

*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id/4889226#4889226)

# django - Django 公共汽车时刻表查询 - 总和持续时间并添加到出发时间

> ID：15950405
> 
> 赞同：0
> 
> 时间：2013-04-11T13:43:10.970
> 
> 标签：django, django-models, django-queryset

我已经编写了一些 Django 模型并为公交车时刻表系统加载了一些数据，但是在编写查询时遇到了麻烦。以下是模型：

```
class VehicleJourney(models.Model):
    vehicle_journey = models.CharField(primary_key=True, max_length=100)
    journey_pattern = models.ForeignKey('JourneyPattern')
    departure_time = models.TimeField()

class TimingLink(models.Model):
    timing_link = models.CharField(primary_key=True, max_length=100)
    journey_pattern = models.ForeignKey('JourneyPattern')
    from_seq_no = models.IntegerField()
    from_stop = models.ForeignKey('Stop', related_name='+')
    to_seq_no = models.IntegerField()
    to_stop = models.ForeignKey('Stop', related_name='+')
    runtime = models.IntegerField()

class Stop(models.Model):
    stop_point = models.CharField(primary_key=True, max_length=100)
    common_name = models.CharField(max_length=250)

class JourneyPattern(models.Model):
    journey_pattern = models.CharField(primary_key=True, max_length=100)
    direction = models.CharField(max_length=100)
    service = models.ForeignKey('Service')

class Service(models.Model):
   service_code = models.CharField(primary_key=True, max_length=100)
   registered_operator_ref = models.ForeignKey('Operator')
   mode = models.CharField(max_length=100)
   description = models.CharField(max_length=250)
   start_date = models.DateField()
   end_date = models.DateField()
   origin = models.CharField(max_length=250)
   destination = models.CharField(max_length=250) 
```

该查询输入 from_stop、to_stop 和到达时间，以查找从 from_stop 出发并在到达时间到达 to_stop 的 3 辆下一辆公共汽车。

我想返回 from_stop 和 to_stop 之间的 TimingLinks，每个运行时依次添加到 VehicleJourney.departure_time 中，给出每个站点的出发时间。

关于如何最好地解决这个问题的任何见解？

# c# - Entity Framework 5 复杂类型

> ID：15950406
> 
> 赞同：2
> 
> 时间：2013-04-11T13:43:15.143
> 
> 标签：c#, entity-framework-5

我是 EF5 的新手，我正在研究复杂类型。

我可以看到为什么您会在 EF 模型中使用 Enum 类型，但我也看到了一些示例，说明您可以在其中创建自己的复杂类型，从而将表中的多个属性分组到一个复杂类型下。

一个示例是包含以下属性的表：-

> 名
> 
> 姓

您可以定义一个名为 Name 的复杂类型，然后可以像这样引用这两个属性：-

> 姓名.名字
> 
> 姓名.姓氏

我的问题是你为什么要这样做，你从哪里得到好处？

正如我所说，我是 EF5 的新手，所以我只是想更好地理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-06T01:56:44.330

仅使用名字和姓氏可能并不明显，但考虑更复杂的东西，例如地址。您可能需要在系统中传递地址，如果它位于自包含对象中，则要容易得多。

您还可以重用复杂类型。因此，一个很好的例子就是您的客户拥有送货地址和账单地址。

例如： ![在此处输入图像描述](https://i.stack.imgur.com/JyNyw.png)

# z3 - Z3：QBVF 中的函数扩展和编码

> ID：15950411
> 
> 赞同：1
> 
> 时间：2013-04-11T13:43:25.203
> 
> 标签：z3

我正在尝试使用 Z3 中的函数对公式进行编码，但我遇到了编码问题。考虑以下示例：

```
f(x) = x + 42
g(x1, x2) = f(x1) / f(x2)
h(x1, x2) = g(x1, x2) % g(x2, x1)
k(x1, x2, x3) = h(x1, x2) - h(x2, x3)
sat( k(y1, y2, y3) == 42 && k(y3, y2, y1) == 42 * 2 && ... ) 
```

我希望我的编码既高效（没有表达式重复）又允许 Z3 跨子问题重复使用有关函数的引理。这是我到目前为止所尝试的：

1.  内联每个自由变量实例化 y1、y2 等的函数。这引入了重复，并且性能不如我希望的那么好。
2.  用通用量词断言函数声明。这适用于非常具体的示例 - 从求解时间来看，Z3 似乎可以（？）重用涉及相同功能的先前查询的结果。但是，求解时间差异很大，并且在许多情况下 (1) 会更快。
3.  使用函数定义（即量词+ MACRO_FINDER 选项）。如果我对文档的理解是正确的，这应该会*扩展*功能，因此应该接近（1）。然而，就性能而言，结果有点令人惊讶（“>”意味着更快）：
    *   对于 (1) > (2) 我得到的问题：(1) > (3) > (2)
    *   对于 (2) > (1) 的问题，我得到： (2) > (1) = (3)

我还尝试使用上述大部分内容调整 MBQI 选项（和其他选项）。但是，目前尚不清楚最佳组合是什么。我正在使用 Z3 4.0。

问题是：编码问题的“正确”方法是什么？请注意，我只有解释函数（我真的不需要 UF）。我可以使用这个事实进行更有效的编码并避免功能扩展吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T17:27:17.757

我认为这个问题没有明确的答案。某些技术对一种类型的基准测试效果更好，而另一些技术对其他类型的基准测试效果更好。对于我们目前看到的 QBVF 基准，我们发现宏为我们提供了小基准规模和小求解时间的最佳组合，但这可能不适用于这种情况。

您对文档的理解是正确的，宏查找器将识别看起来像函数定义的量词，并用其定义替换对该函数的所有其他调用。可能并非所有宏都被拾取，或者您正在使用未正确检测到的准宏，这两种情况都可能有助于解释为什么性能有时比您的 (1) 更差。在 (1) > (3) 的情况下，差异有多大？预计会有一点开销，但运行时的巨大变化可能是由于某些宏格式错误或未被检测到。

一般来说，对这些问题进行编码并不是“正确”的方式。功能扩展并非总是可以避免的。权衡本质上是在急切地扩展 (1, 3) 或懒惰地扩展 (2) 之间。可能存在 SAT（快 1、3）和 UNSAT（快 2）类型的相关性，但也不能保证是这种情况。

# c# - 从 C# 确定 SVN 工作副本修订版

> ID：15950415
> 
> 赞同：0
> 
> 时间：2013-04-11T13:43:37.707
> 
> 标签：c#, svn

我正在用 C# 编写一个小型控制台工具，它需要知道 SVN 工作副本目录的修订号才能处理具有此编号的其他数据。通过直接读取所有 .svn 目录中的条目文件，我已经支持 SVN 1.4 到 1.6。但是**SVN 1.7**已将其更改为使用单个 .svn 目录，其中包含 SQLite 数据库。

确定工作目录的修订号的最佳方法是什么？

我刚刚尝试使用 SharpSVN，但它基本上没有记录，我不知道如何使用它。它也非常大，有 5 MB 和可能有几个 DLL。

我找不到可免费下载的简单 SVN 命令行客户端。另外，上次我看到一个，它很大，由许多文件组成，不完全可移植。（如果我的工具仅作为单个 .exe 文件提供，那就太好了。）

另一种选择是使用 SQLite 库（以单独的 DLL 形式提供）并自己挖掘数据库。我已经对此进行了基础研究，但我不确定如何检测未提交的修改。

TortoiseSVN，很可能已经安装在将要使用我的工具的机器上，不能使用，因为它包含单个 GUI 应用程序中的所有内容，没有我可以重用的 DLL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:31:35.503

如果您不想要 SharpSVN 并使用工作副本，那么在 99% 的主机中可能有 SVN CLI 工具。

检查可调用性`svnversion`并调用它`svnversion <PATH-TO-WC>`，拦截输出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T07:39:44.993

为此，我使用 Tortoise SVN 的名为“SubWCRev”的命令行工具（[http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-subwcrev.html](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-subwcrev.html)）。它允许确定最新版本、提交日期等...该解决方案的缺点是该工具使用文件，因此您需要定义模板文件并解析工具的输出文件。不过，这对我很有用。

# php - 带有 access_token 的 logout.php 不再起作用

> ID：15950416
> 
> 赞同：2
> 
> 时间：2013-04-11T13:43:38.570
> 
> 标签：php, facebook, logout

几个月前我们建立了 Facebook 集成，直到本周注销停止工作之前一切都很好。

我们用：

*   用于识别用户的 JS sdk
*   `file_get_contents`大多数事情从 php 直接调用 API（使用）

对于注销，我们将用户从我们的应用程序中注销（包括删除 cookie），然后使用 javascript 重定向到此 url：

```
"https://www.facebook.com/logout.php?access_token=". $FB_ACCESS_TOKEN . "&next=" . urlencode($loginUrl) 
```

用于将用户从 facebook 注销，然后将他们带到我们的登录页面。

现在，它让他们保持登录状态，并将他们带到

```
https://www.facebook.com/home.php 
```

这是一个 facebook 错误，还是我使用了一个从未打算供应用程序使用的功能？我猜我可以使用 javascript API 来让它工作，只是想检查一下我是否应该对我目前的做法做一些小的改变。

编辑：

另一个想法（如果有人知道的话）是权限的工作方式可能发生了变化，我的意思是在用户登录时请求额外的权限？目前我只要求：

```
email,publish_actions 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:15:22.317

如果注销 url 将您带到[https://www.facebook.com/home.php](https://www.facebook.com/home.php)，则意味着访问令牌或下一个 url 配置不正确。

尝试将下一个 url 设置为下一个页面（例如 www.yourapp.com/logout.php），然后从那里重定向到您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:24:21.950

来自 Facebook 的使用 Javascript 注销的[SDK 文档：](http://developers.facebook.com/docs/reference/javascript/FB.logout/ "开发工具包文档")

```
FB.logout(function(response) {
  // user is now logged out
}) 
```

`FB.logout`将使用户退出您的网站和 Facebook。

我建议使用回调来重定向用户，而不是直接链接到 facebook.com/logout.php

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:44:43.390

原来我的 access_token 无效。我将它存储在 varchar(150) 字段中，但现在较新的令牌比这更长。

因此，在登录页面上使用的令牌是正确的，但在后来的页面（如注销）上，它是从数据库中检索出来的，并且已被截断，因此 Facebook 无法再对其进行解密。

作为参考，对于其他人来说，它看起来没有最小长度 - 目前 255 可以工作，400 会更安全，但 oauth 规范允许任何长度，因此需要一个 smalltext 字段才能完全安全。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-25T20:45:56.333

您需要在 Facebook 应用设置中拥有要重定向到的页面的域

设置 -> 基本 -> 应用程序域

但是这些域有规则......

> 应用程序域必须与 Facebook Web Games URL (https)、移动站点 URL、Unity 二进制 URL、站点 URL 或安全页面选项卡 URL 的域匹配。

如果您想拥有 2 个不同的 URL，那么您可以同时使用“站点 URL”和“安全页面选项卡 URL”

设置 -> 基本 -> 网站 -> 网站 URL

设置 -> 基本 -> 页面选项卡 -> 安全页面选项卡 URL

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-14T03:20:24.987

这也发生在我身上，我终于意识到是因为我改变了网站的地方。我确实将 OAuth 重定向 URL 更新到新位置，但忘记在基本设置中更改站点地址....

1.  转到 Facebook 应用程序控制台
2.  转到设置-> 基本。在站点 URL 中输入我的新 URL

并且注销网址再次起作用！

# design-patterns - 与技术无关的前端模式和/或网站上支付表单的模板

> ID：15950417
> 
> 赞同：1
> 
> 时间：2013-04-11T13:43:39.333
> 
> 标签：design-patterns, web-applications, payment-processing

有谁知道用于在 Web 应用程序中实现支付网关的良好前端模板？

在实施支付表单时，您总是需要做很多**应用程序流程**来尝试避免主要两种情况：

1.  阻止用户两次提交付款（可能使用后退按钮，或刷新或其他）。
2.  处理可能需要很长时间和/或失败的支付交易。

我正在寻找的是经过试验和测试的通用前端模式，或者理想情况下是处理此问题的模板。

如果我可以下载一些经过尝试和测试的带有 javascript 的 html 模板，那将是很棒的，其中服务器端位只是被模拟。

或者，如果有一个可靠的模式来描述这一点。例如，

*   你在会话中放了什么，
*   您如何在“下一页”页面上触发 ajax 请求以处理长时间运行的进程，
*   如何避免后退按钮问题，
*   您如何恢复用户错误停止的事务...

那种东西。

有人知道这样的事情吗？

我在想有很多方法可以实现这一点，有没有一种可靠的方法，而无需我重新发明轮子！

# ant - 如何将可选参数传递给 Ant 并运行特定的测试用例

> ID：15950419
> 
> 赞同：1
> 
> 时间：2013-04-11T13:43:45.253
> 
> 标签：ant, junit

我有一个任务，用户可能（也可能不会）通过命令行将参数（JUnit 测试类）传递给 Ant。如果用户传递参数，那么只有这个特定的测试类将执行。如果没有，所有测试类都将运行，即“* */* .java”。

如何完成上述条件？我已经知道如何运行特定的测试类，但是有条件的东西 - 类名通过命令行通过 -D 与预定义列表（* */* .java） - 让我望而却步。

谢谢！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:41:34.087

我用这样的东西

```
 <batchtest todir="${test.results.dir}">
        <fileset dir="${tests.dir}">

            <include name="**/*${mytest}.class" if="mytest"/>
            <include name="**/*Test.class" unless="mytest"/>
        </fileset>
    </batchtest> 
```

关键是文件集成为传递命令行参数的函数

```
ant tests  -Dmytest=TestnamePattern 
```

# multithreading - 等待Scala中的任何给定期货？

> ID：15950430
> 
> 赞同：6
> 
> 时间：2013-04-11T13:44:19.160
> 
> 标签：multithreading, scala, future

假设我需要在 Scala 中执行一些并行任务。每个任务执行一些阻塞调用（例如`Process.waitFor`）。现在我想等到任何任务完成。

据我了解，我应该使用 Scala`Future`来包装任务。Scala中是否有任何API要等到任何给定的`Futures`完成？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T13:49:11.350

有这样做的内置方法：

```
Future.firstCompletedOf(yourFutures) 
```

[来自文档](http://www.scala-lang.org/api/current/index.html#scala.concurrent.Future$)：

> 将 Future 返回到列表中已完成的第一个未来的结果。

请注意，这不会中断所有其他期货，因此如果需要，您可以自行取消它们。

# c# - 使用handleref从图片框中提取图片

> ID：15950438
> 
> 赞同：0
> 
> 时间：2013-04-11T13:44:46.507
> 
> 标签：c#, windows, expression, webcam, encoder

我正在使用 Microsoft Expression Encoder 从网络摄像头捕获图像..

据推测，此代码用于将图像分配给图片框（**panelVideoPreview**）：

```
_deviceSource.PreviewWindow = new PreviewWindow(new HandleRef(panelVideoPreview,panelVideoPreview.Handle)); 
```

这一切都很好，但是一旦我尝试这个：

```
panelVideoPreview.Image.Save("C:\\Temp\\Temp3.jpg", System.Drawing.Imaging.ImageFormat.Jpeg); 
```

它说 Image 属性为空。我怎样才能解决这个问题？

任何可能的建议表示赞赏！

问候， Corné Vermeulen

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:53:30.340

我认为问题是 HandleRef 没有完成...您是否尝试过等待对象？

# java - 打开在 Mac OS 上不起作用的浏览器链接

> ID：15950444
> 
> 赞同：1
> 
> 时间：2013-04-11T13:45:10.310
> 
> 标签：java

单击按钮时，我希望应用程序打开一个 URL。所以我这样做：

```
Desktop desktop = Desktop.isDesktopSupported() ? Desktop.getDesktop() : null;
    System.out.println("Hey "+desktop);
    if (desktop != null && desktop.isSupported(Desktop.Action.BROWSE)) {
        try {
            desktop.browse(new URL("http://support.apple.com/kb/DL1572").toURI());
            System.out.println("here");
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

但`Desktop.isDesktopSupported()`返回假。我在 Mac OS X 10.7.5 上。有什么选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:57:55.493

在 Mac 上，这可以完成工作。多亏了[这个](http://alvinalexander.com/java/mac-java-open-url-browser-osascript)：

```
private void openUrlInBrowser(String url)
{
 Runtime runtime = Runtime.getRuntime();
 String[] args = { "osascript", "-e", "open location \"" + url + "\"" };
 try
 {
  Process process = runtime.exec(args);
 }
 catch (IOException e)
 {
// do what you want with this
 }
} 
```

# jquery - 如何格式化jquery函数？

> ID：15950447
> 
> 赞同：-2
> 
> 时间：2013-04-11T13:45:12.680
> 
> 标签：jquery, html

我有这个当前的功能：

```
$(function() {
    $(".test").datepicker({dateFormat: 'dd/mm/yy'  });
}); 
```

我希望能够在其中添加这一行：

```
onSelect: var dateObject = $(this).datepicker('getDate') 
```

我将如何正确格式化它，有人可以给我看一个例子。我是使用 jquery 的新手，所以我不太了解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:48:17.247

`onSelect`是您可以在日期选择器上设置的选项之一，因此您只需将其添加到`dateFormat`您已有的选项之后。

`onSelect`意味着是一个函数，因此您必须将要运行的代码包装在函数声明中。此外，jQuery 会在调用该函数时自动将选定的日期和 datepicker 的实例传递给该函数，因此参数如下所示：

```
$(function() {
    $(".test").datepicker({
        dateFormat: 'dd/mm/yy',  
        onSelect: function(selectedDate, instance) {
            var dateObject = $(this).datepicker('getDate');
        }
    });
}); 
```

jQuery 有大量的[API 文档](http://api.jqueryui.com/datepicker/)。你应该总是先看那里；他们很有可能可以为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:47:54.660

```
var defaultDate = $.datepicker.formatDate('dd/mm/yy', new Date()); 
```

然后在日期选择器中使用这个日期。

# assembly - 用汇编语言写 C = (A+B)^2 并转换为机器语言

> ID：15950451
> 
> 赞同：0
> 
> 时间：2013-04-11T13:45:18.217
> 
> 标签：assembly, x86

请我正在做一个作业，上面写着：将汇编语言中的 C = (A + B)^2 翻译成机器语言。我首先研究并编写了汇编程序：

```
MOV AX, A ; Move A to Register Ax 
ADD AX, B; Add B to A 
IMUL AX; Square(A+B) 
MOV BX, C ; Load c to Register Bx 
MOV BX, AX ; Mov (A+B)^2 to C in BX. 
```

请不太确定这个汇编代码，不知道如何将其转换为机器语言

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:04:08.187

如果您的变量 A、B 和 C 是内存中的变量，那么代码几乎是正确的。

你只需要改变这个

```
MOV BX, C ; Load c to Register Bx 
MOV BX, AX ; Mov (A+B)^2 to C in BX. 
```

对此

```
MOV C, AX ; Mov (A+B)^2 to C 
```

您可以通过汇编程序将汇编语言程序转换为机器，汇编程序是一种类似编译器的程序，将用汇编语言编写的程序作为输入程序。

那里有许多不同的 x86 汇编器。您需要选择一个，因为它们在语法和功能上略有不同（有时不是那么细微）。

如果我要用你的代码用 NASM 为 DOS 制作一个 16 位的 .COM 程序，我必须像这样重写它：

```
; file: AddSquar.asm
; to assemble with NASM: nasm -f bin AddSquar.asm -l AddSquar.lst -o AddSquar.com

BITS 16 ; 16-bit code
ORG 100H ; IP of first instruction is expected to be 100H in .COM programs

    MOV     AX, [A] ; Move A to Register Ax 
    ADD     AX, [B] ; Add B to A 
    IMUL    AX      ; Square(A+B) 
    MOV     [C], AX ; Mov (A+B)^2 to C

    RET ; terminate .COM program, return to DOS

A   DW 3
B   DW 4
C   DW 0 
```

生成的列表文件 (AddSquar.lst) 包含所有编码的指令（尽管由于某种原因`ORG 100H`没有考虑到所有地址，可能所有地址总是相对于代码的开头显示）：

```
 1                                  ; file: AddSquar.asm
 2                                  ; to assemble with NASM: nasm -f bin AddSquar.asm -l AddSquar.lst -o AddSquar.com
 3                                  
 4                                  BITS 16 ; 16-bit code
 5                                  ORG 100H ; IP of first instruction is expected to be 100H in .COM programs
 6                                  
 7 00000000 A1[0D00]                    MOV     AX, [A] ; Move A to Register Ax 
 8 00000003 0306[0F00]                  ADD     AX, [B] ; Add B to A 
 9 00000007 F7E8                        IMUL    AX      ; Square(A+B) 
10 00000009 A3[1100]                    MOV     [C], AX ; Mov (A+B)^2 to C
11                                  
12 0000000C C3                          RET ; terminate .COM program, return to DOS
13                                  
14 0000000D 0300                    A   DW 3
15 0000000F 0400                    B   DW 4
16 00000011 0000                    C   DW 0 
```

您可以在二进制文件 (AddSquar.com) 的十六进制查看器/编辑器中获得相同的结果：

```
0000000000: A1 0D 01 03 06 0F 01 F7 │ E8 A3 11 01 C3 03 00 04  Ў♪☺♥♠☼☺чиЈ◄☺Г♥ ♦
0000000010: 00 00 00                │ 
```

您还可以在反汇编中看到编码指令：

```
00000100  A10D01            mov ax,[0x10d]
00000103  03060F01          add ax,[0x10f]
00000107  F7E8              imul ax
00000109  A31101            mov [0x111],ax
0000010C  C3                ret
0000010D  0300              add ax,[bx+si]
0000010F  0400              add al,0x0
00000111  0000              add [bx+si],al 
```

我在上面使用了 NDISASM，如下所示`ndisasm -b 16 -o 0x100 AddSquar.com`：

如果您想手动将汇编代码转换为机器代码，恐怕您必须自己动手，因为 SO 不适合进行有关指令编码的大量讲座。

从 Intel 或 AMD 在线获取 CPU 手册。他们是免费的。阅读有关指令编码的章节，然后手动完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:57:53.530

您对 (A+B)² 的计算是正确的，但您似乎没有将其存储在正确的位置，我会这样做：

```
mov ax, A  ; Move A to Register Ax 
add ax, B  ; Add B to A 
imul ax    ; Square(A+B) 
mov C, ax  ; Move (A+B)^2 to C. 
```

但当然这取决于A，B和C实际上是什么......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-21T07:00:55.223

问题：

编写一个汇编语言代码来编写以下两个二项式定理的子程序：

```
SROUTINE_SUM:    SUM_SQ = (A+B)2 = A2 + B2 + 2*A*B

SROUTINE_DIF:    DIF_SQ = (A-B)2 = A2 + B2 - 2*A*B 
```

其中`SUM_SQ, DIF_SQ,`A 和 B 是预定义的数据标签，而`SROUTINE_SUM`和`SROUTINE_DIF`是子例程名称。

A 和 B 的测试值分别为 3 和 2。

您必须附上 AFD 调试器的快照，显示 SUM_SQ 和`DIF_SQ`.

# jquery - Jquery 表格排序器不工作。它是否符合 HTML5 标准？

> ID：15950452
> 
> 赞同：2
> 
> 时间：2013-04-11T13:45:19.597
> 
> 标签：jquery, html, tablesorter

我正在使用 jquery 表排序器，但似乎无法正常工作。我已经让它在其他解决方案中工作，但似乎无法在 HTML5 项目中复制它。

以下代码位于母版页的标题中；

```
<script type="text/javascript" src="TableSorter/jquery-latest.js"></script>
<script type="text/javascript" src="TableSorter/jquery.tablesorter.js"></script>
<script type="text/javascript" src="TableSorter/jquery.tablesorter.min.js"></script>
<script type="text/javascript" src="TableSorter/jquery.metadata.js"></script>
<script type="text/javascript" src="TableSorter/jquery.tablesorter.pager.js" ></script> 
```

同样在母版页中，我放置了 Jquery。该表是动态创建的，名称为“ctl00_ContentPlaceHolder1_memberTable”

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#ctl00_ContentPlaceHolder1_memberTable").tablesorter();
    });
</script> 
```

前端代码：

```
<%@ Page Title="" Language="vb" AutoEventWireup="false" MasterPageFile="~/SSASWeb.Master"
    CodeBehind="MemberList.aspx.vb" Inherits="SSASWeb_HTML5.MemberList" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <h2>
        Member List
    </h2>
    <div id="table" runat="server" style="margin-right: 50px" class="tablesorter">
    </div>
</asp:Content> 
```

填充表格的代码：

```
Dim ScriptManager As ClientScriptManager = Page.ClientScript
        Dim t As Table = HtmlHelper.ConvertToHtmlTable(ds.Tables(0))
        Dim i As Integer = 0
        For Each row As TableRow In t.Rows
          If i = 0 Then
            i = i + 1
            Continue For
          End If
          Dim strMemNo As String = row.Cells(0).Text
          row.Cells(0).Text = ""
          Dim a As New HtmlAnchor()
          a.HRef = "NameAndAddress.aspx?member=" + strMemNo
          a.InnerText = strMemNo
          row.Cells(0).Controls.Add(a)
        Next
        t.ID = "memberTable"
        table.Controls.Add(t) 
```

我在后端代码的调用中调用的函数：

```
Public Shared Function ConvertToHtmlTable(dt As DataTable) As Table
    Dim table As New Table()
    table.CssClass = "hovered tablesorter"
    Dim tHead As New TableRow()
    tHead.TableSection = TableRowSection.TableHeader
    For Each col As DataColumn In dt.Columns
      Dim cell As New TableCell()
      cell.Text = col.ColumnName
      tHead.Cells.Add(cell)
    Next
    table.Rows.Add(tHead)
    For Each row As DataRow In dt.Rows
      Dim tBodyRow As New TableRow()
      tBodyRow.TableSection = TableRowSection.TableBody
      For Each cell In row.ItemArray
        Dim rowCell As New TableCell()
        If Not IsDBNull(cell) Then
          Dim dtValue As DateTime
          If DateTime.TryParse(cell, dtValue) Then
            rowCell.Text = dtValue.ToShortDateString()
          Else
            rowCell.Text = cell
          End If
        End If
        tBodyRow.Cells.Add(rowCell)
      Next
      table.Rows.Add(tBodyRow)
    Next
    Return table
  End Function 
```

当我去运行它并单击标题时，没有任何反应，但我无法弄清楚我哪里出错了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:15:19.193

嗯，对我来说有两个可能的原因：

1º 不要使用：

```
<script type="text/javascript" src="TableSorter/jquery.tablesorter.js"></script> 
```

和

```
<script type="text/javascript" src="TableSorter/jquery.tablesorter.min.js"></script> 
```

同时，只选择一个。

2º 你可以使用

```
$("[id$=memberTable]").tablesorter(); 
```

# rubygems - 无法让 rails_autolink 在 rails 3.2.2 中工作

> ID：15950453
> 
> 赞同：1
> 
> 时间：2013-04-11T13:45:21.047
> 
> 标签：rubygems, ruby-on-rails-3.2

我需要在我的项目中使用函数[auto_link](http://apidock.com/rails/ActionView/Helpers/TextHelper/auto_link)。

所以我尝试安装 gem [rails_autolink](https://github.com/tenderlove/rails_autolink)。

**在 Gemfile 中：**

`gem 'rails_autolink'`

然后我停止服务器，运行`bundle install`，启动服务器。

**在我的控制器中：**

```
require 'rails_autolink'

# ...

auto_link("Go to http://www.rubyonrails.org and say hello to david@loudthinking.com") 
```

我得到：

> NoMethodError in Relation::CustomsController#index
> 
> 未定义的方法“auto_link”
> 
> # 
> 
> 在 app/controllers/relation/customs_controller.rb:12:in `index'

如何正确包含 rails_autolink ？

编辑：`gem install rails_autolink`没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:06:38.777

我的猜测是这`auto_link`不起作用，因为您在控制器的上下文中调用它。尝试做

```
class CustomsController < ApplicationController
  include ActionView::Helpers::TextHelper
end 
```

（如果您查看[这里](https://github.com/tenderlove/rails_autolink/blob/master/lib/rails_autolink/helpers.rb)的源代码，您会发现它`auto_link`是名为 的东西的一部分`TextHelper`。）

或者，如果可能，将`auto_link`调用从控制器移动到视图。无论如何，这是与视图相关的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:43:45.993

如果您尝试从文本中提取 URL，则最好使用`URI.extract`. 看到这个答案：[https ://stackoverflow.com/a/5855388/199712](https://stackoverflow.com/a/5855388/199712)

# c# - Javascript 动态消息滚动条

> ID：15950455
> 
> 赞同：1
> 
> 时间：2013-04-11T13:45:23.243
> 
> 标签：c#, jquery, asp.net

我慢慢的要疯了。我正在尝试在网页上放置文本自动收报机。它会在显示器上运行，甚至不会连接鼠标。它只是显示建筑物周围的一些信息。我想补充一件事，我认为这是个好主意。底部的滚动文本消息，少数人可以编辑。

我之所以使用[它](http://www.maxvergelli.com/jquery-scroller/)，是因为它是唯一一个看起来滚动得足够流畅且不那么神秘，以至于我需要在开发团队中才能理解。

因为我不能只更改 div 文本并让爬虫滚动它。我试图将它放在更新面板中，在渲染时设置 div 文本并重新启动爬虫。控制消息的 div 位于名为“crawlerUpdate”的 UpdatePanel 中 msgString 是我用来保存的全局 Javascript 变量div 重置时的值。

我已经设置`var oCrawlerUpdate = setInterval(function () { updateCrawler() }, 10000);`为每 10 秒更新一次消息（仅用于测试，轮询会更长）

我的更新爬虫看起来像：

```
 function updateCrawler(){
        msgString = '';
        $.getJSON('getCrawlerText.aspx', function (data) {
            $.each(data, function (index, elem) {
                msgString += index + 1 + '. ' + elem.message + '- - -';
            });

            if ($('#textCrawler').html() != msgString)
                __doPostBack("<%= this.postBackVehicle.UniqueID %>", "");
        });
    } 
```

这就是我开始失去它的地方。这有点超出我的理解，但它有点工作。我必须注册一个启动脚本。我假设在更新面板回发时被注入并执行。

```
 ScriptManager.GetCurrent(this).RegisterAsyncPostBackControl(this.postBackVehicle);
 ScriptManager.RegisterStartupScript(this.crawlerUpdate, this.GetType(), "reInitCrawler", "if(!msgString)msgString=\"Loading ticker message...\";$(\"#textCrawler\").html(msgString);initCrawler()", true); 
```

它在 Firefox 中 100% 运行。我更改了数据库中的消息，在接下来的 10 秒内，滚动条会重新启动并显示新消息。当我在人们将要使用的 IE7 中加载它时，我在 jQuery(1.4.1) 文件中的某处而不是在我的代码中得到一个未定义的错误，我不知道从哪里开始。很久以前，当我进行测试时，每次添加滚动条之前，我都能让 div 显示新消息。我可以在 div 中看到消息闪烁，但 IE 立即出错。

我还应该指出，onLoad div 是空白的，并且第一次通过它就可以工作。它会滚动我的加载消息，直到 10 秒后第一次轮询。我几乎可以肯定，我正在使这比需要的难度成倍增加，但我不知道。

我仍在谷歌搜索其他滚动工具，但这和我一样接近，我想了解为什么 IE 让我消化不良。我知道 IE 是一个善变的野兽，我希望它是相当容易的。我很接近，我想继续前进。

编辑：我没有完全使用提供的答案，但我转储了滚动库并使用了两个函数。

```
 function resetCrawler() {
        var contWidth = $('#scrollContainer').width();
        var blockWidth = $('#textCrawler').width();
        var moveLen = (contWidth + blockWidth) * -1
        var timeFigure = (-1 * moveLen)/.05;
        //console.log("Container: " + contWidth + " Block: " + blockWidth + " MovementSpan: " + moveLen + " TimeSpan: " + timeFigure);

        $('#textCrawler').html(msgString).css('left', contWidth).animate({ left: moveLen }, timeFigure, 'linear', function () { resetCrawler() });
    }

    function updateCrawler(){
        msgString = '';
        $.getJSON('getCrawlerText.aspx', function (data) {
            $.each(data, function (index, elem) {
                msgString += index + 1 + '. ' + elem.message + '- - -';
            });

            if ($('#textCrawler').html() != msgString) {
                resetCrawler();
            }
        });
    } 
```

我只是进行了每毫秒 px 的计算，无论消息有多长，它都以相同的速度滚动。我怀疑我遇到了与您发布的链接相同的问题，即我在 jQuery 中调用了一些东西。我只是在完成时再次调用它，这取决于内部 div 的宽度。还有更多工作要做，但我认为它已经足够好了......

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:54:33.793

我完全支持服务器端代码，而且我大部分时间都反对计时器，但是如果你所做的只是滚动一些文本并且你没有鼠标输入也没有其他需要运行的脚本，为什么不直接使用计时器？

明确设置您的 AJAX 调用不缓存结果，并使用计时器每隔一段时间调用您的 AJAX 以更新您的文本。

我在这里看到的唯一问题是确保您仍然流畅地滚动，而计时器不会影响执行移动的能力。

**更新：**我发现[这篇文章](https://stackoverflow.com/q/15771523/1506793)实际上告诉你如何做到这一点，使用一个与你想要做的事情相匹配的例子。

如果您对此有任何疑问，请告诉我。祝你好运！:)

# wpf - 功能区控件的 WPF 数据绑定

> ID：15950458
> 
> 赞同：6
> 
> 时间：2013-04-11T13:45:27.610
> 
> 标签：wpf, data-binding, ribbon

我有一个工作动态菜单，它是数据绑定到由应用程序动态控制的分层项目集合。以下是 WPF 声明供参考：

```
 <Menu Grid.Row="1" Grid.ColumnSpan="2" ItemsSource="{Binding Actions}" Style="{StaticResource ResourceKey=dynamicMenu}">
       <Menu.Resources>
            <HierarchicalDataTemplate DataType="{x:Type wm:AppAction}" ItemsSource="{Binding Path=Items}">
                <HierarchicalDataTemplate.ItemContainerStyle>
                    <Style TargetType="MenuItem">
                        <Setter Property="IsCheckable" Value="{Binding IsCheckable}" />
                        <Setter Property="IsChecked" Value="{Binding IsChecked}" />
                        <Setter Property="Visibility" Value="{Binding Path=IsVisible, Converter={wc:BoolToCollapsedConverter}}"/>
                        <Setter Property="Command" Value="{Binding Command}" />
                        <Setter Property="Icon" Value="{Binding Image}" />
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Text}" Value="">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type MenuItem}">
                                            <Separator HorizontalAlignment="Stretch" IsEnabled="False"/>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </HierarchicalDataTemplate.ItemContainerStyle>
                <StackPanel Orientation="Horizontal">
                    <Image Source="{Binding ImageSource}" />
                    <TextBlock Text="{Binding Text}" />
                </StackPanel>
            </HierarchicalDataTemplate>
        </Menu.Resources>
    </Menu> 
```

现在我想使用 Microsoft Ribbon 控件呈现这个底层菜单结构，最初使用 RibbonTab 和 RibbonGroup 用于级别 0 和 RibbonButton 用于级别 1（每个选项卡上的单个组）。

不幸的是，由于某种原因，它没有显示任何内容。这是我到目前为止所做的声明：

```
 <r:Ribbon Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" x:Name="ribbon" Title="WPF Prototype App" ItemsSource="{Binding Actions}">
        <r:Ribbon.Resources>
            <DataTemplate DataType="{x:Type wm:AppAction}">
                <r:RibbonTab Header="{Binding Text}">
                    <r:RibbonGroup Header="{Binding Text}" ItemsSource="{Binding Actions}" Width="333">
                        <r:RibbonGroup.Resources>
                            <DataTemplate DataType="{x:Type wm:AppAction}">
                                <r:RibbonButton Label="{Binding Text}" LargeImageSource="{Binding ImageSource}"/>
                            </DataTemplate>
                        </r:RibbonGroup.Resources>
                    </r:RibbonGroup>
                </r:RibbonTab>
            </DataTemplate>
        </r:Ribbon.Resources>
    </r:Ribbon> 
```

我有一种感觉，这可能很容易解决。我尝试使用 HierarchicalDataTemplate 但将 RibbonTab 的样式应用于 RibbonGroup 时出现错误。

另一个相关的问题是：如果 AppAction 对象具有功能区控件样式鉴别器属性（即 ControlStyle [Tab, Group, Button, CheckBox, ComboBox]），根据该属性的值动态创建适当的控件有多容易，或者它甚至可能吗？或者对于复杂的场景，只在负责这些任务的后续视图中定义功能区的一部分并在视图可见时附加它们是否更好？

编辑：以下是 AppAction 类的简化版本的内容：

```
 [ContentProperty("Items")]
public class AppAction: PropertyChangedBase
{
    public AppActionCollection Items { get; set; }

    ICommand command;
    public ICommand Command
    {
        get { return command; }
        set { CheckSet(ref command, value); }
    }

    string text;
    public string Text
    {
        get { return text; }
        set { CheckSet(ref text, value); }
    }

    Uri imageSource;
    public Uri ImageSource
    {
        get { return imageSource; }
        set { image = null; CheckSet(ref imageSource, value); NotifyOfPropertyChange(() => Image); }
    }

    public AppAction()
    {
        Items = new AppActionCollection();
    }
} 
```

AppActionCollection 简化：

```
public class AppActionCollection: ObservableCollection<AppAction>
{
} 
```

可以通过以下方式创建示例菜单树：

```
public class TestMenu
{
    AppActionCollection menu = new AppActionCollection();

    public TestMenu()
    {
        var m = new AppAction { Text = "File" };
        m.Items.Add(new AppAction { Text = "Open" });
        m.Items.Add(new AppAction { Text = "Save" });
        m.Items.Add(new AppAction { Text = "" });
        m.Items.Add(new AppAction { Text = "Exit", Command = ApplicationCommands.Close });
        menu.Add(m);

        m = new AppAction { Text = "Edit" };
        m.Items.Add(new AppAction { Text = "Copy" });
        m.Items.Add(new AppAction { Text = "Paste" });
        m.Items.Add(new AppAction { Text = "Cut" });
        m.Items.Add(new AppAction { Text = "Smile", Command = ApplicationCommands.Close });
        menu.Add(m);
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T14:48:42.270

抱歉耽搁了，我正在寻找解决您问题的方法，但不幸的是我没有找到。 `HierarchicalDataTemplate`对您没有帮助，因为功能区级别不是同一类型。

我认为解决问题的唯一方法是`DataTemplate`为每个级别制作新的。我知道这不是好的解决方案，但我认为这是唯一的方法。如果您找到更好的方法，请分享您的知识并告诉我。

注意：在`Menu`您可以使用的情况下，`HierarchicalDataTemplate`因为有一个 Type `MenuItem`。

**编辑：**

这就是我所达到的：

MainWindow.xaml.cs：

```
public ObservableCollection<AppAction> child
{
    get
    {
        ObservableCollection<AppAction> reVal = new ObservableCollection<AppAction>();
        reVal.Add(
            new AppAction() { Header = "File", Items = new ObservableCollection<AppAction>() { 
                new AppAction() { Header = "Font", Items = new ObservableCollection<AppAction>() { 
                    new AppAction() { Header = "Arial" }, 
                    new AppAction() { Header = "Segoe UI" }, 
                    new AppAction() { Header = "Tahoma" } } }, 
                new AppAction() { Header = "Other", Items = new ObservableCollection<AppAction>() { 
                    new AppAction() { Header = "Colse" } } } } });

        reVal.Add(
            new AppAction() { Header = "View", Items = new ObservableCollection<AppAction>() { 
                new AppAction() { Header = "A", Items = new ObservableCollection<AppAction>() { 
                    new AppAction() { Header = "AButton" } } }, 
                new AppAction() { Header = "B", Items = new ObservableCollection<AppAction>() { 
                    new AppAction() { Header = "BButton" } } }, 
                new AppAction() { Header = "C", Items = new ObservableCollection<AppAction>() { 
                    new AppAction() { Header = "CButton" } } } } });
        return reVal;
    }
} 
```

在 MainWindow.xaml 中：

```
<Window x:Class="rebbon.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="wind">

    <Window.Resources>
        <DataTemplate x:Key="buttonTempl">
            <RibbonButton Label="{Binding Header}"/>
        </DataTemplate>
        <Style TargetType="RibbonGroup" x:Key="groupStyle">
            <Setter Property="Header" Value="{Binding Header}"/>
            <Setter Property="ItemsSource" Value="{Binding Items}"/>
            <Setter Property="ItemTemplate" Value="{StaticResource buttonTempl}"/>
        </Style>        
        <Style TargetType="RibbonTab" x:Key="tabStyle">
            <Setter Property="Header" Value="{Binding Header}"/>
            <Setter Property="ItemsSource" Value="{Binding Items}"/>
            <Setter Property="ItemContainerStyle" Value="{StaticResource groupStyle}"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Ribbon ItemContainerStyle="{StaticResource tabStyle}" ItemsSource="{Binding ElementName=wind, Path=child}"/>
    </Grid>
</Window> 
```

**结果：**

![在此处输入图像描述](https://i.stack.imgur.com/5ISRp.png)

我希望这会对你有所帮助。

我尽力了。

# javascript - Ember.js - 如何将模型类的属性绑定到控制器？

> ID：15950470
> 
> 赞同：1
> 
> 时间：2013-04-11T13:46:07.400
> 
> 标签：javascript, model-view-controller, asynchronous, ember.js, coffeescript

我试图以某种方式将以下模型的属性绑定到控制器，以便在模型完成其异步调用时设置模型的长度属性，然后通知控制器发生更改并可以更新视图。

```
App.Articles = Ember.Object.extend()

App.Articles.reopenClass
    store: {}
    lengths: 0

    findAll: ->
        arr = Ember.ArrayProxy.create()

        $.ajax
            url: 'http://ajaxcall.asp',
            dataType: 'json'
            context: @
            success: (response) ->
                Ember.set(App.Articles, 'lengths', response.store.length)

                response.store.forEach (news, i) =>
                    txt = '<p>' + news.fields[2].text.replace(/[\r\n]+(?=[^\r\n])/g,'</p><p>') + '</p>'
                    article = 
                        'id': i
                        'date': news.fields[1].date
                        'title': news.fields[0].text
                        'text': txt
                        'short': news.fields[2].text.substring(0, 120) + '...'

                    art = @findOne(article.id)
                    art.setProperties(article)
                    return

                values = (values for keys, values of @store)
                arr.set('content', values)

                callback = ->
                    $('.loader-container').removeClass('show')
                    $('#articles-scroll').css('height', $(window).height() - 55)

                    articles_scroll = new iScroll 'articles-scroll', 
                        vScroll: true, hScroll: false, vScrollbar: false
                    return

                setTimeout callback, 100
                return
        arr

    findOne: (id) ->
        art = @store[id]
        if not art
            art = App.Currencies.create
                id: id
            @store[id] = art
        art 
```

所以我需要完成的是设置调用完成后返回的数据的长度，并在控制器中监听该更改，如下所示：

```
lengths: (->
    console.log 'test'
).property('App.Articles.lengths') 
```

但是，我对上面的代码没有运气，我不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T20:10:13.670

如果您想在模板中使用该值，只需使用控制器的长度属性：`{{controller.length}}`。

如果要观察控制器中的长度属性：

```
App.ArticlesController = Ember.ArrayController.extend({
  lengthDidChange: function() {
    console.log("Length changed to: " + this.get('length'));
  }.observes('length')
}); 
```

前提是您在路由的`model`钩子或其他地方设置了带有文章数组的控制器。

**更新：**

如果您想要一次性通知，请混入`Ember.Evented`您`ArrayProxy`返回的`findAll`内容（省略不需要的内容）：

```
App.Articles.reopenClass
  ...
  findAll: ->
    arr = Ember.ArrayProxy.createWithMixins(Ember.Evented)

    $.ajax
      ...
      success: (response) ->
        ...
        arr.set('content', values)
        arr.trigger('didLoad')

App.ArticlesRoute = Ember.Route.extend
  model: ->
    App.Articles.findAll()

  setupController: (controller, model)->
    model.one 'didLoad', ->
      console.log controller.get('lastObject`) 
```

# vb.net - 捕获 System.AccessViolationException

> ID：15950472
> 
> 赞同：0
> 
> 时间：2013-04-11T13:46:21.000
> 
> 标签：vb.net, error-handling

我有一个 Windows 服务以未处理的方式崩溃，异常 System.AccessViolationException。在尝试加载用户配置文件（模拟期间）时，我确实发生在 1000 种情况之一。虽然我有兴趣找到解决方案，但更重要的是我无法捕获这个未处理的错误 - 并以一种好的方式终止我的服务。

在启动期间，我添加了这个异常处理程序：

```
AddHandler AppDomain.CurrentDomain.UnhandledException, AddressOf UnhandledException 
```

如果我将 System.AccessViolationException 硬编码为代码中的相同位置，它会被我的处理程序捕获。但在 1000 次调用中，有 1 次调用进程终止，我只能在事件查看器中看到有关此信息的信息。

任何想法如何捕捉这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:56:13.613

你试过这个吗？

```
Try
    'your code
Catch ex As AccessViolationException
    'write your ex.ToString() on a file or whatever
End Try 
```

# c - 仅使用宏调用函数

> ID：15950476
> 
> 赞同：2
> 
> 时间：2013-04-11T13:46:34.480
> 
> 标签：c

我正在用 C 开发自己的断言函数，并在我的头文件中声明为：

```
void Certify_Continuity( const char* expression, const int line, const char* file ); 
```

应该使用定义为的宏调用它：

```
#if !defined ( ENABLE_DEBUG ) || defined ( __CALLE__ )
#define DEBUG_ASSERT( e ) (void)(e)
#else
#define DEBUG_ASSERT( e ) ( e ) ? (void)0 : Certify_Continuity( #e, __LINE__, __FILE__ )
#endif 
```

这里的问题是程序员可以直接调用*Certify_Continuity*。

是否有任何技术不允许用户直接调用该函数，只允许他使用宏调用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:59:23.127

宏只是在编译器正确运行之前执行的文本（令牌）替换，因此您不能阻止某人只是手动扩展宏并删除他们不喜欢的部分。

但是，您可以使某人这样做变得任意困难和危险。例如，您可以省略`Certify_Continuity`头文件中的声明，并像这样将其声明为内联：

```
#define DEBUG_ASSERT(e) do { \
    extern void Certify_Continuity( const char* expression, const int line, const char* file ); \
    if(!(e)) Certify_Continuity(#e, __LINE__, __FILE__); \
} while(0) 
```

这样，任何直接调用函数的人都必须先声明原型。

您还可以以其他人会三思而后行的方式命名它：

```
void DO_NOT_CALL__USE_DEBUG_ASSERT__Certify_Continuity(...) 
```

当然，如果有人有足够的决心绕过你，并且不关心他们代码中的疯狂疣，那么这就是他们的问题。如果他们为您工作或与您并肩工作，那么您就可以使用代码审查等外部因素来阻止这种行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:03:49.497

您可以使用 C 中`(foo)()`调用函数的技巧`foo`，同时`foo()`扩展宏`foo`（假设两者都存在）。

在您的情况下，您的宏应如下所示：

```
#if !defined ( ENABLE_DEBUG ) || defined ( __CALLE__ )
#define DEBUG_ASSERT( e ) (void)(e)
#else
#define DEBUG_ASSERT( e ) ( e ) ? (void)0 : (Certify_Continuity)( #e, __LINE__, __FILE__ )
#endif
#define Certify_Continuity(x,y,z) YOU_SHOULD_NOT_CALL_Certify_Continuity() 
```

如果用户尝试`Certify_Continuity`直接调用，则会发出一个`YOU_SHOULD_NOT_CALL_Certify_Continuity`不存在的错误。

当然，这并不能阻止用户像`(Certify_Continuity)()`.

# c# - 如何在没有打开图像 ui 的情况下在 c# 中的 Web 浏览器控件中插入图像？

> ID：15950477
> 
> 赞同：2
> 
> 时间：2013-04-11T13:46:37.683
> 
> 标签：c#, webbrowser-control, html-editor

我在 C# 中有一个 Web 浏览器控件，它的设计模式已打开。我用它来制作（所见即所得）HTML 编辑器。我想在没有 UI 的情况下在此插入照片，当用户想要插入图像时，我向他/她显示一个窗口，在其上显示用户的一些已知名称。然后通过搜索，他找到她/他的照片并将其添加到控制中。

这是我的开放图像形式：

![打开图像表单](https://i.stack.imgur.com/fcL7X.jpg)

照片在数据库中，用户只知道他们的名字。我将它们全部上传到一个文件夹中，并将上面的列表显示给用户，然后用户选择一张图片。我想通过它在硬盘中的位置添加图像并允许用户设置它的对齐方式。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:00:39.793

向文档添加新元素是非常合乎逻辑的。第一步是创建您希望追加的节点（元素），下一步是在文档中找到您希望追加它的位置，最后一步是实际执行追加。

我为你写了一个例子：

```
 private void Form1_Load_1(object sender, EventArgs e)
    {
        webBrowser1.DocumentText = "<html><body></img></body></html>";
    }

    private void insert_image_btn_Click(object sender, EventArgs e)
    {
        HtmlElement userimage = webBrowser1.Document.CreateElement("img");
        userimage.SetAttribute("src", "image location");
        userimage.Id = "imageid";
        webBrowser1.Document.Body.AppendChild(userimage);
    }
    private void btn_set_aliign_Click(object sender, EventArgs e)
    {
        webBrowser1.Document.GetElementById("imageid").SetAttribute("float", "right");
    } 
```

# php - 创建一个以 API 为中心的应用程序，我自己的疑惑

> ID：15950482
> 
> 赞同：3
> 
> 时间：2013-04-11T13:46:51.720
> 
> 标签：php, mysql, api, oauth, yii

我试图围绕所有这些“以 api 为中心”的概念进行思考，不知何故，由于各种原因（在颠倒过来之后）我无法自己找到答案，所以我希望你能帮助我:)

在这里，作为个人项目的一部分，我需要创建一个类似社交应用程序网站的东西，我说“喜欢”，因为它只是一个小项目，没什么花哨的。

我的想法是我创建一个休息服务，比如[http://api.domain.com/v1/](http://api.domain.com/v1/)以及所有需要的资源方法（创建/删除/更新/读取）。

现在，在创建此服务之后，我需要创建我的网站，例如[http://www.domain.com/](http://www.domain.com/)，并且该网站将与我的 api.domain.com 进行通信，以完成它所做的每个操作。如果有新用户注册，则将数据发送到 api 服务器，进行处理，返回答案等。

然后，在网站创建之后，我打算使用 phonegap 为 iphone 和 android 创建一个原生应用程序。这些移动应用程序基本上就像我的网站一样，连接到 api 服务器并执行各种操作。

如果不涉及授权，这非常简单，所以任何知道 api 端点的人都可以管理所有资源，正如你猜想的那样，我不想要，所以我必须实现某种授权机制和我不太确定要使用什么。我正在考虑实施 OAuth2，以便我的 api 充当 oauth 提供者，然后我的网站/移动应用程序将连接到 api，获得授权，然后完成他们的工作。这是一个好方法，有什么想法吗？

接下来，假设我坚持使用 oauth 并且一切正常，如果我想让我的用户有机会创建自己的应用程序来访问有关其他用户/或他们自己的数据的信息（基本上我有一个公共 api，为什么不利用这一点），那么将安装该应用程序的用户将需要批准它才能访问他的信息。我知道这对于 oauth 是可能的（因为 facebook/twitter/others 这样做），问题是，我如何区分简单的用户创建的应用程序和我自己的应用程序（如网站和移动应用程序）？这种分离是否可以通过在请求权限时提供各种“范围”来实现？如果没有，我应该使用什么其他方法？

我对oauth不太熟悉，所以可能有些问题有点不对，希望你能明白我的问题。

如果有帮助，我将使用 PHP 5.4 和 Yii 框架、Apache 2（mod ssl 可用）、MySQL。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T10:20:19.307

Yii 提供 CWebService (SOAP)，你可以使用它，或者创建你自己的 REST API。

我自己创建了一个 API，就像你想做的那样。

为了安全起见，我使用 CUserIdentity 使用 api 用户名和 api 密码登录：

```
if (Yii::app()->apiuser->isGuest) {

              if (!empty($_POST['apiUser']) && !empty($_POST['apiPassword'])) {

                $identity = new ApiUserIdentity($_POST['apiUser'],$_POST['apiPassword']);
                $identity->authenticate();

                if($identity->errorCode===ApiUserIdentity::ERROR_NONE)
                {

                    Yii::app()->apiuser->login($identity); // Login for 30 minutes
                    $responseData['success'] = 1;
                    $responseData['sessionId'] = Yii::app()->session->sessionID;

                } else {

                    $responseData['error'] = 'Incorrect username and/or password';

                }

              }

          } 
```

POST 数据来自它使用 api 的应用程序。SessionId 被传回应用程序，因此不需要下次登录。如果您使用 CURL 发出 api 请求，您可以使用以下命令将会话 ID 发送回下一个 api 请求：

```
$strCookie = "PHPSESSID=".$sessionId."; path=/";
// Set the COOKIE files
curl_setopt($ch, CURLOPT_COOKIESESSION, true );
curl_setopt($ch, CURLOPT_COOKIE, $strCookie); 
```

这样，每次下一个请求都会维护会话。

# batch-file - 将特定单词从文本文件复制到 MS Word 的批处理文件

> ID：15950484
> 
> 赞同：-1
> 
> 时间：2013-04-11T13:46:59.820
> 
> 标签：batch-file, ms-word

我正在处理一个自然语言处理项目，我必须为此创建一个批处理 (.bat) 文件，该文件会将文件的内容复制到 MS-WORD 中。

要复制的文本不是统一的，而是随机标记的标记，例如 [Venice] 之类的名词，形容词将标记为 (beautiful)，限定词将标记为 {the} 等。

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:34:16.237

这听起来太简单了——我是不是误会了什么？

```
copy yourfile.txt yourfile.rtf
yourfile.rtf 
```

# javascript - 带有自定义搜索框的 Google 自定义搜索？

> ID：15950487
> 
> 赞同：2
> 
> 时间：2013-04-11T13:47:07.033
> 
> 标签：javascript, css, search-engine, google-custom-search

我希望将 Google 自定义搜索添加到我的网站，但我已经设置了搜索框占位符的样式，我希望我的搜索框看起来像这样。

经过一番搜索，似乎所有以前的问题都像[这个](https://stackoverflow.com/questions/2174187/google-custom-search-with-custom-search-box-and-button)问题已经过时了。

关于样式，我发现的唯一一件事是：

```
<script>
    (function() {
    var cx = 'XXXXXXXXXX:YYYYYYYYY';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
})();
</script>
<div style="width:0px;overflow:hidden;height:0px;"> <!-- if you use display:nonw here it doesn't work-->
    <gcse:search></gcse:search>
</div>
<form id="searchbox_XXXXXXXXXX:YYYYYYYYY" action="">
    <input value="XXXXXXXXXX:YYYYYYYYY" name="cx" type="hidden"/>
    <input value="FORID:11" name="cof" type="hidden"/>
    <input id="q" style="" name="q" size="75" type="text"/>
    <button class="btn">Search</button>
</form> 
```

但是，当您提交表单时，什么也没有发生。

我注意到 action="" 留空，当我输入我的网站“www.kokorugs.com/”时，它也不起作用。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-02T19:12:51.613

我发现的唯一方法是使用 JQuery 在渲染的 Google 元素中创建挂钩。由于您想将自定义搜索框挂接到元素中，因此您应该渲染**gsce:results-only**而不是**gsce:search**并遵循我之前的[答案](https://stackoverflow.com/a/35754330/4830578)之一的实现。

# android - 所有 XML 布局都可以转换为 Android 中的 Java 代码吗？

> ID：15950491
> 
> 赞同：1
> 
> 时间：2013-04-11T13:47:25.417
> 
> 标签：android

在开发了几个应用程序之后，我知道很多人喜欢添加视图程序化盟友。

但是，所有的 XML 布局都可以动态转换为 Java 代码，这是真的吗？

使用 Java 代码生成布局的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:49:52.750

您正在创建的布局 XML 正在运行时转换为 java 代码。所以你的问题的答案是肯定的。你可以做同样的事情，基本上从头开始用java代码创建你的所有布局。

如您所知，这种方法的明显降级是您将花费更多时间来获得与 XML 文件相同的结果。

因此，除非您必须为布局动态添加视图，否则我看不出您有理由使用 java 代码执行该过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:52:28.517

> 但是所有的xml布局都可以动态转换为java代码吗？

是的

> 使用java代码生成布局的优缺点是什么？

根据文档，在 XML 中声明 UI 的优势在于，它使您能够更好地将应用程序的表示与控制其行为的代码分开。您的 UI 描述在您的应用程序代码之外，这意味着您可以修改或调整它，而无需修改源代码并重新编译。例如，您可以为不同的屏幕方向、不同的设备屏幕尺寸和不同的语言创建 XML 布局。此外，在 XML 中声明布局可以更轻松地可视化 UI 的结构，从而更容易调试问题。

* * *

**来自Ed Burnette 的[Hello Android](http://pragprog.com/titles/eband3/hello-android)：**
用户界面可以使用以下两种方法之一进行设计：程序性和声明性。程序只是意味着在代码中。例如，在编写 Swing 应用程序时，您编写 Java 代码来创建和操作所有用户界面对象，例如 JFrame 和 JButton。因此，Swing 是程序化的。

另一方面，声明式设计不涉及任何代码。当您设计一个简单的网页时，您会使用 HTML，这是一种类似于 XML 的标记语言，它描述了您希望在页面上看到的内容，而不是您想要如何做。HTML 是声明性的。

Android 试图通过让您以任何一种风格创建用户界面来跨越程序世界和声明世界之间的鸿沟。您可以几乎完全使用 Java 代码，也可以几乎完全使用 XML 描述符。如果您查找任何 Android 用户界面组件的文档，您将看到 Java API 和相应的声明性 XML 属性都执行相同的操作。

你应该使用哪个？无论哪种方式都有效，但 Google 的建议是尽可能使用声明性 XML。XML 代码通常比相应的 Java 代码更短且更易于理解，并且在未来版本中更改的可能性较小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:02:06.003

您可以在 XML 中执行的几乎所有操作都可以通过编程方式完成。我认为在可绘制形状等方面变得非常困难。当我事先不知道我需要添加什么时，我只以编程方式进行布局。

示例：我不知道有些文章可以有 1-x 条描述。然后我以编程方式创建添加到布局的 TextView。

# c# - 使用 XmlNamespaceManager 从 XmlNode 中进行选择

> ID：15950492
> 
> 赞同：3
> 
> 时间：2013-04-11T13:47:27.303
> 
> 标签：c#, .net, xml

我一直在寻找一种方法来从具有多个命名空间的`XmlNode`(NOT AN ) 中选择节点。`XmlDocument`

`XmlNamespaceManager`几乎我搜索过的每`XmlNamespaceManager`一篇文章`XmlNameTable`都建议我使用`XmlNode`.

我尝试使用 an 来执行此操作，`XmlDocument`因为它`XmlDocument`有一个属性`XmlDocument.NameTable`，但它对于 XmlNode 不存在。

我尝试手动创建一个 NameTable，但是当我使用`XmlDocument`. 我想我需要用一些东西填充那个 NameTable 或者以某种方式将它绑定到`XmlNode`以使其工作。请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:50:54.603

你能用吗

```
XPathNavigator nav = XmlNode.CreateNavigator();
XmlNamespaceManager man = new XmlNamespaceManager(nav.NameTable); 
```

包括其余的以防万一它会有所帮助：

```
man.AddNamespace("app", "http://www.w3.org/2007/app"); //Gotta add each namespace
XPathNodeIterator nodeIter = nav.Select(xPathSearchString, man);

while (nodeIter.MoveNext())
{
    var value = nodeIter.Current.Value;
} 
```

[http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.createnavigator.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.createnavigator.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-03T02:00:53.430

由于某种原因，XmlNamespaceManager 不会自动加载文档中定义的命名空间（这似乎是一个简单的期望）。由于某种原因，命名空间声明被视为属性。我能够使用以下代码自动添加命名空间。

```
private static XmlNamespaceManager AddNamespaces(XmlDocument xmlDoc)
{
    XmlNamespaceManager nsmgr = new XmlNamespaceManager(xmlDoc.NameTable);
    AddNamespaces(xmlDoc.ChildNodes, nsmgr);
    return nsmgr;
}
private static void AddNamespaces(XmlNodeList nodes, XmlNamespaceManager nsmgr) {
    if (nodes == null)
        throw new ArgumentException("XmlNodeList is null");

    if (nsmgr == null)
        throw new ArgumentException("XmlNamespaceManager is null");

    foreach (XmlNode node in nodes)
    {
        if (node.NodeType == XmlNodeType.Element)
        {
            foreach (XmlAttribute attr in node.Attributes)
            {
                if (attr.Name.StartsWith("xmlns:"))
                {
                    String ns = attr.Name.Replace("xmlns:", "");
                    nsmgr.AddNamespace(ns, attr.Value);
                }
            }
            if (node.HasChildNodes)
            {
                nsmgr.PushScope();
                AddNamespaces(node.ChildNodes, nsmgr);
                nsmgr.PopScope();
            }
        }
    }
} 
```

示例调用示例：

```
 XmlDocument ResponseXmlDoc = new System.Xml.XmlDocument();
    ...<Load your XML Document>...
    XmlNamespaceManager nsmgr = AddNamespaces(ResponseXmlDoc); 
```

并使用返回的 NamespaceManager

```
XmlNodeList list = ResponseXmlDoc.SelectNodes("//d:response", nsmgr); 
```

# apache-flex - 所有异步单元测试超时

> ID：15950496
> 
> 赞同：0
> 
> 时间：2013-04-11T13:47:45.957
> 
> 标签：apache-flex, ant, flexunit

我正在尝试在[sampleCLIProject](https://github.com/blegros/flexunit/tree/master/FlexUnit4SampleCIProject)的非常简化版本中通过 Ant 运行 FlexUnit 测试。当我通过 Flash Builder 编译时测试通过，当我在 Windows 上通过 Ant 运行它们时超时。此超时问题仅发生在异步测试的情况下。当我在 Mac OS X 上通过 Ant 运行它们时，Ant 无法从 Flash Player 接收数据。

这是运行测试的主要应用程序：

**TestRunner.mxml**

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
                xmlns:flexUnitUIRunner="http://www.adobe.com/2009/flexUnitUIRunner"
                layout="absolute"
                creationComplete="runTests();">
    <mx:Script>
        <![CDATA[
            import org.flexunit.demo.EchoPanelTest;
            import org.flexunit.listeners.CIListener;
            import org.flexunit.listeners.UIListener;
            import org.flexunit.runner.FlexUnitCore;

            public function runTests() : void {
                var core : FlexUnitCore = new FlexUnitCore();
                core.addListener(new UIListener(uiListener));
                core.addListener(new CIListener());

                core.run(EchoPanelTest);
            }
        ]]>
    </mx:Script>
    <flexUnitUIRunner:TestRunnerBase id="uiListener" width="100%" height="100%"/>
</mx:Application> 
```

这是 Ant 构建文件的相关部分：

**构建.xml**

```
 <target name="compile">
        <mxmlc file="${SRC_DIR}/TestRunner.mxml"
               output="${BIN_DIR}/Main.swf">
            <library-path dir="${LIB_DIR}"
                          append="true">
                <include name="*.swc" />
            </library-path>
            <compiler.verbose-stacktraces>true</compiler.verbose-stacktraces>
            <compiler.headless-server>true</compiler.headless-server>
        </mxmlc>
    </target>

    <target name="run"
            depends="compile">
        <chmod file="${BIN_DIR}/Main.swf"
               perm="777" />

        <flexunit swf="${BIN_DIR}/Main.swf"
                  timeout="5000"
                  toDir="${basedir}/reports"
                  haltonfailure="false"
                  verbose="true"
                  localTrusted="false"
                  command="${FLASH_PLAYER}" />
    </target> 
```

# html - 导航栏不会完全覆盖屏幕

> ID：15950501
> 
> 赞同：0
> 
> 时间：2013-04-11T13:47:56.993
> 
> 标签：html, css, navigationbar

我已经尽可能地搜索，但似乎找不到答案，可能是我没有使用正确的关键字。

无论如何，我制作了一个简单的导航栏并将其设置为 100% 宽度，但它不会覆盖屏幕的最右侧部分。我尝试使用 right:-5px; 但这没有帮助。

这是 jsfiddle，所以你可以看到我的代码。

[http://jsfiddle.net/xBkma/](http://jsfiddle.net/xBkma/)

**CSS：**

```
 #nav {
width: 100%;
float: left;
margin: 0 0 0 0;
padding: 0;
background-color: #F3B33C;
border-bottom: 4px solid #ccc;
position: absolute;
top: -1px;
left: -5px;
margin-right: -5px;
} 
```

**HTML**

```
<div id="nav">
    <ul>
    <li><a id="home" href="index.html"> <img src="images/black home.png" width="28" height="28"></a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Forum</a></li>
    <li><a href="#">Database</a></li>
    </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:53:58.277

您需要添加 box-sizing:border-box;

像这样

```
#nav {
width: 100%;
box-sizing: border-box;
float: left;
margin: 0 0 0 0;
padding: 0;
background-color: #F3B33C;
border-bottom: 4px solid #ccc;
position: absolute;
top: -1px;
left: -5px;
margin-right: -5px;
} 
```

还添加`body{padding: 0; margin: 0;}`

工作小提琴[http://jsfiddle.net/xBkma/8/](http://jsfiddle.net/xBkma/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:54:03.230

消除

> 位置：绝对

在导航上。位置和浮动相互矛盾。

[http://jsfiddle.net/xBkma/6/](http://jsfiddle.net/xBkma/6/)

```
html, body {
    padding: 0;
    margin: 0;
}

#nav {
    width: 100%;
    float: left;
    margin: 0 0 0 0;
    padding: 0;
    background-color: #F3B33C;
    border-bottom: 4px solid #ccc;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:54:59.993

您应该尝试删除 nav 元素中的 margin-right 和 left 属性，并将正文设置为边距 0。

```
body{
 margin: 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:51:21.457

删除`left: -5px`；然后再试一次

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T13:51:37.860

首先，您在使用时不需要浮动`position: absolute;`

其次进入你的导航，首先你需要重置浏览器默认样式表，你可以简单地使用这个

```
* {
   margin: 0;
   padding: 0;
} 
```

稍后更改`left: -5px;`为`left: 0;`from `#nav`，您就可以开始了

[**演示**](http://jsfiddle.net/xBkma/5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T13:51:58.063

只需删除`left: -5px`您在`#nav` [http://jsfiddle.net/xBkma/4/上添加的内容](http://jsfiddle.net/xBkma/4/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-11T13:52:30.340

试试这个代码：

```
body{
    padding:0px;
    margin:0px;
}
#nav {
    width: 100%;
    float: left;
    margin: 0 0 0 0;
    padding: 0;
    background-color: #F3B33C;
    border-bottom: 4px solid #ccc;
    position: absolute;
    } 
```

大多数浏览器似乎在正文上有一些填充和边距，因此将它们设置为零

# maven - 以编程方式修改 TeamCity 构建参数

> ID：15950512
> 
> 赞同：1
> 
> 时间：2013-04-11T13:48:26.470
> 
> 标签：maven, parameters, teamcity, teamcity-7.0, system-properties

我在 TC 构建配置中创建了一些系统属性。这些属性的值以这种方式传递给 Maven 配置：

```
clean test -Dargument1=%system.property1% -Dargument2=%system.property2% 
```

这按预期工作。我现在要做的是在构建完成时修改系统属性的值，以便下一次构建将获得这些值。是否可以通过 Java 或使用 Maven以*编程方式执行此操作？*这是正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T10:49:09.680

如果我在你那里，我会制作 maven 任务，它会在构建完成时通过 TeamCity restAPI 更新你的属性。

它看起来像是完成这项任务的最优雅的方式。

可以在此处找到 restAPI 插件的完整说明： [http](http://confluence.jetbrains.com/display/TW/REST+API+Plugin) ://confluence.jetbrains.com/display/TW/REST+API+Plugin 此处 描述了您的用例所需的内容： **构建配置和模板设置**

构建配置参数：GET/DELETE/PUT http://*teamcity_url_goes_here*/httpAuth/app/rest/buildTypes//parameters/ (accepts/produces text/plain) 您可以制作更新参数的请求。

一件更有趣的事情：如果您想在同一服务器上运行的 TeamCity 构建中执行对 REST API 的请求，您可以使用 %teamcity.serverUrl% 预定义参数来构造 URL

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:10:58.533

您可以为此定义构建属性。构建完成后，您可以制作一个 Maven 插件，该插件将发布请求发送到 TeamCity，并更改构建类型的这些构建属性的值。

# c - CodeWarrior 编译器警告：“可能丢失数据”

> ID：15950514
> 
> 赞同：1
> 
> 时间：2013-04-11T13:48:43.973
> 
> 标签：c, compiler-warnings, microcontroller, codewarrior, analog-digital-converter

请考虑以下代码：

```
unsigned int  beta;

unsigned int theta;

unsigned int m = 4;

unsigned int c = 986;

unsigned int Rpre = 49900;

unsigned int getUAnalog(unsigned char channel) // to get the PT1000 Signal

{

unsigned int result;

unsigned int f_temp;

//select channel and initiate conversion

ADCSC1 |= (channel & 0b11111);

//wait until conversion is complete

while(!ADCSC1_COCO);

f_temp = ADCRH;

f_temp <<= 8;

f_temp += ADCRL;

beta = (((f_temp) / (4096*28))*1000); // warning: possible loss of data.

theta = ((((beta)*(Rpre))/(1-beta))*1000);

result = (theta-c)/(m);

return result;
} 
```

我在 CodeWarrior 版本 5.9.0 上使用 MC9S08DZ60 ( [http://www.freescale.com/files/microcontrollers/doc/data_sheet/MC9S08DZ60.pdf ) 和 PT1000-温度传感器。](http://www.freescale.com/files/microcontrollers/doc/data_sheet/MC9S08DZ60.pdf)此函数用于计算温度并返回“结果”。但“beta”和“theta”值保持为 0。没有变化。

我也收到 C2705 警告：可能丢失数据。“结果”的价值是不对的。请帮助，因为我不知道出了什么问题！

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:40:24.323

您`4096*28`不适合 16 位无符号整数并且将被截断，给您错误的结果，这就是您收到警告的原因。

但最重要的是...

这个

```
beta = (((f_temp) / (4096*28))*1000); // warning: possible loss of data.

theta = ((((beta)*(Rpre))/(1-beta))*1000);

result = (theta-c)/(m); 
```

相当于

```
beta = (((f_temp) / (4096*28))*1000);

theta = ((((beta)*(49900))/(1-beta))*1000);

result = (theta-986)/(4); 
```

这又相当于：

```
result = ((((((((f_temp) / (4096*28))*1000))*(49900))/(1-(((f_temp) / (4096*28))*1000)))*1000)-986)/(4) 
```

如果您[绘制它](https://www.wolframalpha.com/input/?i=%28%28%28%28%28%28%28%28x%29+%2F+%284096%2a28%29%29%2a1000%29%29%2a%2849900%29%29%2F%281-%28%28%28x%29+%2F+%284096%2a28%29%29%2a1000%29%29%29%2a1000%29-986%29%2F%284%29)，您会看到在[= 14336/125 ≈ 115处存在](https://www.wolframalpha.com/input/?i=1-x%2a125%2F14336)[不连续性，`f_temp`](https://www.wolframalpha.com/input/?i=1-x%2a125%2F14336)并且[的范围`result`从 =0 处的 -986/4 (≈-247)到=115 或 -∞处`f_temp`的 ≈-4*10 ⁹`f_temp`在`f_temp`=14336/125](https://www.wolframalpha.com/input/?i=plot+%28%28%28%28%28%28%28%28x%29+%2F+%284096%2a28%29%29%2a1000%29%29%2a%2849900%29%29%2F%281-%28%28%28x%29+%2F+%284096%2a28%29%29%2a1000%29%29%29%2a1000%29-986%29%2F%284%29%2C+0+%3C%3D+x+%3C%3D+65535)处。

这表明要么你做错了什么（你有错误的公式或常数），要么你没有给我们足够的信息（有一个或多个有效范围`f_temp`会很好）。由于`result`.

# ruby-on-rails - Rails PostgreSQL 数组无法迭代

> ID：15950518
> 
> 赞同：1
> 
> 时间：2013-04-11T13:48:51.873
> 
> 标签：ruby-on-rails, arrays, postgresql, helper, production-environment

我为我的控制器编写了一个辅助方法来遍历一个属性，使用 PostgreSQL 将其表示为一个数组。

```
def format_cf array
  nums = ""
  array.each { |c| nums += "#{c}, " }
  unless nums.blank?
    nums.chop!.chop!
  end
  nums
end 
```

这样，我就不会`{}`在我看来得到凌乱的字符。我为此属性实现了一个空值作为字符串“{}”，这意味着我在迁移中设置了默认值。这对我的开发环境来说不是问题，因为它将它解释为一个空数组。但是，现在在生产中，这个辅助方法抛出一个错误说

```
ActionView::Template::Error (undefined method `each' for "{}":String) 
```

我的实现在这里是错误的，还是有人能想到我在比较 development.rb 和 production.rb 时可能忽略的一些模糊设置？

编辑：2013-04-11 9:00

我目前正在使用 capistrano 和 unicorn 和 nginx 进行部署

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T02:32:22.583

[如果您使用的是 rails 4 https://github.com/rails/rails/issues/10432](https://github.com/rails/rails/issues/10432)，我猜您可能也遇到了这个错误。基本上，迁移系统中有一个错误会`:string, array: true`变成正常`:string`指令。使用边缘东西的乐趣哈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:58:36.653

我猜你用水龙头在heroku上部署旅游数据库

```
heroku db:push 
```

问题是 taps 不支持 Postgres 数组，它最终将列转换为字符串。有很多解决方法。我用的是在heroku上打开一个控制台

```
heroku run console 
```

然后获取到数据库的连接

```
User.connection # or any of your models 
```

然后使用该方法执行原始sql`connection#execute`以创建备份列，删除当前字符串列并将其重新创建为数组。

您可能会发现使用heroku 建议的[导入/导出更有用](https://devcenter.heroku.com/articles/heroku-postgres-import-export)

如果你没有使用heroku，那么我完全错了，我不知道你的问题是什么:)

# frames - 基于两列的分组数据的期间

> ID：15950523
> 
> 赞同：1
> 
> 时间：2013-04-11T13:49:01.030
> 
> 标签：frames

我有一个名为 example.csv 的文件，其中包含该数据：

```
day,number,price,pr
2010-01-01 00:01:00,1,0.4,2
2010-01-01 00:02:00,1,1.2,4
2010-01-01 00:03:00,1,2.5,6
2010-01-01 00:04:00,1,9.1,2
2010-01-01 00:05:00,2,3.4,7
2010-01-01 00:06:00,2,6.9,9
2010-01-01 00:07:00,2,8.9,2
2010-01-01 00:08:00,3,9.1,5
2010-01-01 00:09:00,3,4.2,9
2010-01-01 00:10:00,3,11.2,2
2010-01-01 00:11:00,4,53.12,4
2010-01-01 00:12:00,4,45.21,1
2010-01-01 00:12:00,4,1.1,5
2010-01-01 00:13:00,4,3.43,2
2010-01-01 00:14:00,4,21.42,4 
```

加载数据：

```
 example = read.csv(file="path/example.csv", header=TRUE, sep=",") 
```

基于天

```
ddx <- xts(x = example[, c("number", "price", "pr" )], order.by = as.POSIXct(example[, "day"], tz = "GMT", format = "%Y-%m-%d %H:%M:%S")) 
```

应用它给出的输出是列日和价格：

```
period.apply(ddx$number, endpoints(ddx, on = "minutes", k = 3), sum) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:02:40.273

您的创建`xts`方法相当复杂。下面试试。

```
txt <- 'day,number,price
 2010-01-01 00:01:00,1,0.4
 2010-01-01 00:02:00,1,1.2
 2010-01-01 00:03:00,1,2.5
 2010-01-01 00:04:00,2,9.1
 2010-01-01 00:05:00,2,3.4
 2010-01-01 00:06:00,2,6.9
 2010-01-01 00:07:00,3,8.9
 2010-01-01 00:08:00,3,9.1
 2010-01-01 00:09:00,3,4.2
 2010-01-01 00:10:00,4,11.2
 2010-01-01 00:11:00,4,53.12
 2010-01-01 00:12:00,4,45.21
 2010-01-01 00:12:00,4,1.1
 2010-01-01 00:13:00,4,3.43
 2010-01-01 00:14:00,4,21.42'

DD <- read.csv(text = txt, stringsAsFactor = FALSE)
# DD is already a dataframe
DD
##                    day number price
## 1  2010-01-01 00:01:00      1  0.40
## 2  2010-01-01 00:02:00      1  1.20
## 3  2010-01-01 00:03:00      1  2.50
## 4  2010-01-01 00:04:00      2  9.10
## 5  2010-01-01 00:05:00      2  3.40
## 6  2010-01-01 00:06:00      2  6.90
## 7  2010-01-01 00:07:00      3  8.90
## 8  2010-01-01 00:08:00      3  9.10
## 9  2010-01-01 00:09:00      3  4.20
## 10 2010-01-01 00:10:00      4 11.20
## 11 2010-01-01 00:11:00      4 53.12
## 12 2010-01-01 00:12:00      4 45.21
## 13 2010-01-01 00:12:00      4  1.10
## 14 2010-01-01 00:13:00      4  3.43
## 15 2010-01-01 00:14:00      4 21.42

ddx <- xts(x = DD[, c("number", "price")], order.by = as.POSIXct(DD[, "day"], tz = "GMT", format = "%Y-%m-%d %H:%M:%S"))
ddx
##                     number price
## 2010-01-01 00:01:00      1  0.40
## 2010-01-01 00:02:00      1  1.20
## 2010-01-01 00:03:00      1  2.50
## 2010-01-01 00:04:00      2  9.10
## 2010-01-01 00:05:00      2  3.40
## 2010-01-01 00:06:00      2  6.90
## 2010-01-01 00:07:00      3  8.90
## 2010-01-01 00:08:00      3  9.10
## 2010-01-01 00:09:00      3  4.20
## 2010-01-01 00:10:00      4 11.20
## 2010-01-01 00:11:00      4 53.12
## 2010-01-01 00:12:00      4 45.21
## 2010-01-01 00:12:00      4  1.10
## 2010-01-01 00:13:00      4  3.43
## 2010-01-01 00:14:00      4 21.42 
```

要`period.apply`在数字列上使用，只需指定`ddx$number`而不是`ddx`

```
period.apply(ddx$number, endpoints(ddx, on = "minutes", k = 3), sum)
##                     number
## 2010-01-01 00:02:00      2
## 2010-01-01 00:05:00      5
## 2010-01-01 00:08:00      8
## 2010-01-01 00:11:00     11
## 2010-01-01 00:14:00     16 
```

# debugging - gdb 中的 mpirun OpenFOAM 并行应用程序

> ID：15950524
> 
> 赞同：1
> 
> 时间：2013-04-11T13:49:01.170
> 
> 标签：debugging, parallel-processing, gdb, openmpi

我正在尝试逐步完成 OpenFOAM 应用程序（在本例中为 icoFoam，但这个问题通常适用于任何 OpenFOAM 应用程序）。

我想使用 gdb 来逐步完成并行运行的分析（比如说，2 个 procs）。

为了简单地并行启动应用程序，我输入：

```
mpirun -np 2 icoFoam -parallel 
```

现在我想在 gdb 中逐步完成它。但是我无法并行启动 icoFoam 并对其进行调试，因为我无法弄清楚如何在应用程序开始执行之前设置断点。

我知道我可以做的一件事是在等待（和无限循环）的 MPI_Initialize 之后插入一段代码，直到我更改 gdb 中的某个变量。然后我将并行运行该应用程序，将一个 gdb 会话附加到每个 PID，然后愉快地调试。但我宁愿不必更改 OpenFOAM 源代码并重新编译。

那么，如何启动并行运行的应用程序，如何让它停止（比如在 main 的开头），然后在 gdb 中单步执行它？全部不改变原始源代码？

最亲切的问候，玛德琳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:05:44.167

[你可以试试这个资源](http://openfoamwiki.net/index.php/HowTo_debugging#gdb)

看起来正确的命令是：

```
mpirunDebug -np 2 xxxFoam -parallel 
```

# artifacts - 包含 0b 文件的 TeamCity 工件

> ID：15950529
> 
> 赞同：0
> 
> 时间：2013-04-11T13:49:18.313
> 
> 标签：artifacts, teamcity-7.0

我们正在使用 TeamCity 7.1.2，并且遇到了与我们持续构建生成的工件有关的问题。

具体来说，当我们在用于我们的工件的源中移动文件时，TeamCity 会在它们以前的位置创建这些文件的零字节大小版本（以及在它们的新位置中创建正确的副本）。

您可以在 TeamCity 中轻松看到这一点。

![团队城市 0b 文件](https://i.stack.imgur.com/bq4Ul.png)

`InstallScripts`文件夹中显示的各种 0b 文件*曾经*在此文件夹中，但后来已移至`Modules`和`Scripts`文件夹。

有没有其他人看到过这个，如果有，你能解决这个问题吗？我们已经在 TeamCity 中执行了*Enforce clean checkout*，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:35:30.280

事实证明这是一个[已知问题，已在 Perforce 7.1.3 中修复](http://youtrack.jetbrains.com/issue/TW-24046)。

目前，我们正在使用将构建配置切换为使用[代理端结帐而不是服务器端结帐](http://devnet.jetbrains.com/message/5251095)的解决方法。

# jquery - 如何安装jPicker？

> ID：15950532
> 
> 赞同：0
> 
> 时间：2013-04-11T13:49:37.737
> 
> 标签：jquery

我下载了 jPicker - A jQuery Color Picker Plugin ( [http://www.digitalmagicpro.com/jPicker/](http://www.digitalmagicpro.com/jPicker/) ) 并尝试在我的网站上安装它，但没有显示小选择器图标，我只有文本字段（我试过 jPicker绑定版）。

这是我的代码：

```
<link href="/css/jPicker.css" rel="stylesheet" type="text/css">
<link href="/css/jPicker-1.1.6.css" rel="stylesheet" type="text/css">
<link href="/css/jPicker-1.1.6.min.css" rel="stylesheet" type="text/css">

<script src="/js/jpicker-1.1.6.js"></script>
<script src="/js/jpicker-1.1.6.min.js"></script>
<script src="/js/jquery-1.4.4.min.js"></script>

<script type="text/javascript">        
  $(document).ready(
    function()
    {
      $('#Binded').jPicker();
    });
</script>
<input id="Binded" type="text" value="e2ddcf" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:52:39.503

你的脚本乱序了。jquery 应该永远是第一位的。

# git - GIT 中的开发线

> ID：15950533
> 
> 赞同：0
> 
> 时间：2013-04-11T13:49:44.220
> 
> 标签：git, perforce

我来自 Perforce 世界，现在开始掌握 Git 世界，并有以下与本地回购有关的问题......

我喜欢 P4 的一件事是我的开发线保存在服务器上，所以我不必备份我的提交（我认为是 Git 中的提交）......提供 P4 服务器的人为我做这件事。 ..他们非常好。

现在我已经开始使用 github 和 bitbucket。我可以克隆一个远程，分支一个开发线并在本地工作，但我也希望我的开发分支在 github 上，这样我可以将更改推送到他们的服务器并备份我的本地 repo，但不是在我开发时干扰主仓库。

所以，我的问题是我该怎么做？这在版本控制的分布式世界中是否经常发生，或者本地开发人员是否必须更加小心地备份他的本地分支？...谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:04:00.997

当然，每个人都想要他们的代码，即使是在某个地方备份的开发分支。不仅用于备份，还可以从其他计算机访问。

让我们看下面的场景：

```
~ $ git clone git@github.com:User/Repo local_repo
~/local_repo (master)$ cd local_repo
~/local_repo (master)$ git checkout -b dev
~/local_repo (dev)$ touch new_file
~/local_repo (dev)$ git add new_file
~/local_repo (dev)$ git commit 
```

现在，您在 github 上有一个远程的本地克隆，`dev`其中包含您进行了一些更改的新分支。

现在有两种情况：

1.  `User`是你吗，如果你有`dev`你的 github 克隆就可以了。这只需通过以下方式完成：

    ```
    ~/local_repo (anything)$ git push origin dev 
    ```

    它告诉 git 将`dev`分支推送到原点。

2.  你不能推到`origin`或者你不想用你的树枝污染它。在这种情况下，您需要在某处制作另一个遥控器，例如：

    ```
    ~ $ git clone --bare local_repo /address/to/another/remote
    ~/local_repo (anything)$ cd local_repo
    ~/local_repo (anything)$ git remote add personal /address/to/another/remote
    ~/local_repo (anything)$ git push personal dev 
    ```

    `/address/to/another/remote`可以是 git 可以理解并有权写入的任何地址。如果不确定，您可以简单地克隆到附近的目录，将目录复制到您的服务器并将新地址提供给`git remote add`. 或者，您可以在 github 上制作您自己的项目的非官方克隆（请参阅[此处](http://bitdrift.com/post/4534738938/fork-your-own-project-on-github)的一种方法）并将地址添加到其中作为远程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:05:11.287

您有两个主要选择：

1.  你可以在 Github 上 fork 主仓库。
    然后你可以在 Github 上推送你的分支，而不会干扰你的主仓库。然后，您将通过拉取请求将完成的工作重新集成到主存储库中。

2.  你也可以在你的主仓库上推送你的本地分支。
    如果你已经克隆了一个 Github repo，你的远程被称为 origin。因此，您可以将分支推送到与 origin/master 不同的分支：

    ```
    git push origin master:backup_my_branch 
    ```

    该命令将在 Github 存储库上创建一个名为 backup_my_branch 的新分支，其中将包含您的本地 master。您当然可以对不同于 master 的本地分支执行相同的操作。使用此解决方案，您的同事还可以查看 backup_my_branch 以进行处理。多么酷啊？

# azure - 将 blob 直接从客户端上传到容器

> ID：15950534
> 
> 赞同：0
> 
> 时间：2013-04-11T13:49:45.767
> 
> 标签：azure, azure-storage

谁能告诉我是否可以直接将文件上传到 blob 容器而不通过我的网络服务器路由它？我正在考虑某种客户端 JS/jQuery 脚本或将文件直接流式传输到 blob 容器的第 3 方上传模块。

在 Amazon S3 中，我使用了一个名为[Flajaxian Direct Uploader](http://www.flajaxian.com/flajaxian.com/DirectAmazonUploader1.0Help.html)的组件来实现这一点。

我需要将 zip 文件上传到大小为 50 mb - 200 mb 的 Azure blob 容器，并且通过 Web 服务器进行路由的速度较慢，并且会消耗额外的带宽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:32:18.787

是的，有可能。这可以通过让客户端联系您的 Web 服务器并请求共享访问签名来实现，该签名具有（写）只写访问权和有限的有效期。然后，您的客户端可以使用简单的 REST API 上传 Blob。这里的技巧是，如果您的 blob 大于 64mb，则必须使用 PUT 块和 PUT 块列表选项。后者对于 Javascript 客户端来说并不那么简单。如果您的客户可以使用 curl，则效果很好。

参考：

[放置斑点](http://msdn.microsoft.com/en-us/library/windowsazure/dd179451.aspx)

[放置块](http://msdn.microsoft.com/en-us/library/windowsazure/dd135726.aspx)

[PUT 阻止列表](http://msdn.microsoft.com/en-us/library/windowsazure/dd179467.aspx)

# networking - ns-3 源代码

> ID：15950535
> 
> 赞同：1
> 
> 时间：2013-04-11T13:49:46.647
> 
> 标签：networking, simulator, ns-3

ns-3 用户！我是 ns-3 的新手，请帮助我在这里理解一些东西：http: [//code.nsnam.org/ns-3-dev/file/tip/examples/wireless/wifi-simple-adhoc-grid.cc](http://code.nsnam.org/ns-3-dev/file/tip/examples/wireless/wifi-simple-adhoc-grid.cc)

我在这里无法理解某些内容（从 209 到 217 的行）：

```
 $ TypeId tid = TypeId::LookupByName ("ns3::UdpSocketFactory");
  Ptr<Socket> recvSink = Socket::CreateSocket (c.Get (sinkNode), tid); //sinkNode=0
  InetSocketAddress local = InetSocketAddress (Ipv4Address::GetAny (), 80);
  recvSink->Bind (local);
  recvSink->SetRecvCallback (MakeCallback (&ReceivePacket));
  Ptr<Socket> source = Socket::CreateSocket (c.Get (sourceNode), tid);
  InetSocketAddress remote = InetSocketAddress (i.GetAddress (sinkNode, 0), 80);
  source->Connect (remote);$ 
```

这里发生了什么？仅供参考：附加代码。

请帮我！谢谢你们！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T06:41:32.710

下面注释源代码。

获取可以创建 udp 套接字的工厂类的唯一 id

```
TypeId tid = TypeId::LookupByName ("ns3::UdpSocketFactory"); 
```

实际上在节点“sinkNode”上创建一个 udp 套接字（不管是什么）

```
Ptr<Socket> recvSink = Socket::CreateSocket (c.Get (sinkNode), tid); 
```

将我们刚刚创建的套接字绑定到 'any' ipv4 地址

```
InetSocketAddress local = InetSocketAddress (Ipv4Address::GetAny (), 80);
recvSink->Bind (local); 
```

使套接字将它收到的数据包转发到“ReceivePacket”函数

```
recvSink->SetRecvCallback (MakeCallback (&ReceivePacket)); 
```

在发送节点上创建一个 udp 套接字

```
Ptr<Socket> source = Socket::CreateSocket (c.Get (sourceNode), tid); 
```

将 udp 套接字连接到在 sink 节点上创建的 udp 套接字的 ip 地址和端口号。这只是为通过此套接字发送的数据包设置默认的“到”IP地址

```
InetSocketAddress remote = InetSocketAddress (i.GetAddress (sinkNode, 0), 80);
source->Connect (remote); 
```

# ruby-on-rails - ContactsController 中的语法错误#new

> ID：15950542
> 
> 赞同：0
> 
> 时间：2013-04-11T13:50:16.053
> 
> 标签：ruby-on-rails, model-view-controller, ruby-on-rails-3.2, routes

嗨，伙计们，我正在创建一个名为“app”的应用程序。到目前为止，有一个脚手架“联系人”，只需添加一个模型调用“地址”（地址有街道、城市、地区、邮政编码、国家 5 个属性），一个联系人可以有一个或多个地址。所以这是我的工作。路线.rb

```
 App::Application.routes.draw do
  resources :contacts
  resources :taggings
  resources :addresses
  root :to => 'Contacts#index'
end 
```

型号/联系人.rb

```
 class Contact < ActiveRecord::Base
  attr_accessible :Email, :Firstname, :Lastname, :Mobilephone, 
  has_many :taggings, :dependent => :destroy
  has_many :addresses, :through => :taggings
  validates_presence_of :Firstname, :Lastname
  attr_writer :address_street, :address_city, :address_region, :address_zipcode, :address_country
  after_save :assign_street, :assign_city, :assign_region, :assign_zipcode, :assign_country

  def address_streets
    @address_streets || addresses.map(&street).join('')
  end

  def address_citys
    @address_citys || addresses.map(&city).join('')
  end

  def address_regions
    @address_regions || addresses.map(&region).join('')
  end

  def address_zipcode
    @address_zipcodes || addresses.map(&zipcode).join('')
  end

  def address_countrys
    @address_countrys || addresses.map(&country).join('')
  end

  def assign_streets
    if @assign_streets
      self.addresses = @assign_streets.split(/\s+/).map do |street|
        Address.find_or_create_by_street(street)
      end
    end
  end

  def assign_citys
    if @assign_citys
      self.addresses = @assign_citys.split(/\s+/).map do |city|
        Address.find_or_create_by_city(city)
      end
    end
  end

  def assign_regions
    if @assign_regions
      self.addresses = @assign_regions.split(/\s+/).map do |region|
        Address.find_or_create_by_region(region)
      end
    end
  end

  def assign_zipcodes
    if @assign_zipcodes
      self.addresses = @assign_zipcodes.split(/\s+/).map do |zipcode|
        Address.find_or_create_by_zipcode(zipcode)
      end
    end
  end

  def assign_countrys
    if @assign_countrys
      self.addresses = @assign_countrys.split(/\s+/).map do |country|
        Address.find_or_create_by_country(country)
      end
    end
  end
end 
```

模型/标记.rb

```
class Tagging < ActiveRecord::Base
  attr_accessible :Address_id, :Contact_id
  belongs_to :contact
  belongs_to :address
end 
```

型号/地址.rb

```
class Address < ActiveRecord::Base
  attr_accessible :City, :Country, :Region, :Street, :Zipcode
  has_many :tagging, :dependent => :destroy
  has_many :contact, :through => :taggings
end 
```

view/contact/_form.html.erb **停止工作，因为我在下面添加了代码！！：**

```
 <form>
    <p>
    <%= f.label :street %><br />
    <%= f.text_field :address_street %>
    </p>
  </form> 
```

而contact_controllor.rb 我什么都没碰过。当我启动服务器并尝试加载到“创建新联系人”导轨时告诉我

```
SyntaxError in ContactsController#new

/media/sf_VM_working/app/app/models/contact.rb:3: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '('
  has_many :taggings, :dependent => :destroy
            ^
/media/sf_VM_working/app/app/models/contact.rb:33: syntax error, unexpected keyword_do_block, expecting keyword_end
      self.addresses = @assign_streets.split(/\s+/).map do |street|
                                                          ^
/media/sf_VM_working/app/app/models/contact.rb:41: syntax error, unexpected keyword_do_block, expecting keyword_end
      self.addresses = @assign_citys.split(/\s+/).map do |city|
                                                        ^
/media/sf_VM_working/app/app/models/contact.rb:45: syntax error, unexpected keyword_end, expecting $end 
```

和

```
app/controllers/contacts_controller.rb:1:in `<top (required)>' 
```

有人可以帮我检查问题出在哪里，我不是一个好人:'(...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:21:28.943

您在第 2 行有一个额外的逗号`contact.rb`- 第一条错误消息告诉您这一点（当它到达第 3 行时发现）：

> /media/sf_VM_working/app/app/models/contact.rb:3: 语法错误，意外的 tSYMBEG，期待 keyword_do 或 '{' 或 '(' has_many :taggings, :dependent => :destroy

并通过将您的属性写为*小写*（`:email, :firstname`而不是`:Email, :Firstname`）来节省一些悲伤

# java - Java 线程：期货仅使用第一个和最后一个线程的结果

> ID：15950551
> 
> 赞同：1
> 
> 时间：2013-04-11T13:50:45.743
> 
> 标签：java, multithreading, concurrency, future

我有一个简单的实用程序，它 ping 一组节点并将字符串的 ArrayList 返回到将来的对象以输出到文件。该程序应该一直运行到用户终止。

未来似乎没有收到结果（或至少将它们传递给方法以输出到文件）。无论我同时运行的线程数（总是小于 100，由输入文件确定），我只输出第一个和最后一个初始化线程的结果。

作为健全性检查，我创建了一个全局变量，每个线程将在其中发送其结果，然后关闭并将其结果返回给 Future 对象。此变量由所有线程正确更新。

有谁知道为什么 Future 似乎没有从线程中收到我所有的结果？

```
public class PingUtility{
    public static ExecutorService pool = Executors.newFixedThreadPool(100);
    static Future<ArrayList<String>> future;

    public static void main(String[] args) throws Exception {

        Timer timer = new Timer();
        TimerTask task = new TimerTask(){
            public void run(){
                //Creates a pool of threads to be executed
                ArrayList<String[]> nodes = new ArrayList<String[]>()
                future = pool.submit(new PingNode(nodes));
                }   
            }
        };

        timer.scheduleAtFixedRate(task, 0, interval);

        while(true){
            try{
                ArrayList<String[]> tempOutputArray = future.get();
                Iterator<String[]> it = tempOutputArray.iterator();
                while(it.hasNext()) appendFile(it.next());
                tempOutputArray.clear();
            }catch(Exception nullException){
            //Do nothing
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:57:08.333

您的问题是您正在修改`future`静态字段*而没有*在定时器任务线程中同步并在主线程中读取它。您需要在修改*和*读取它时对其进行同步，或者使用另一种机制在线程之间共享信息。

我建议从一个`static`字段切换到`LinkedBlockingQueue`一个更好的方式来将信息从`PingNode`调用发送到`appendFile(...)`方法。这样可以避免需要自己进行同步，并防止多个计时器任务将启动并覆盖`future`消费者之前的竞争条件`get()`。也许是这样的：

```
 BlockingQueue<String[]> queue = new LinkedBlockingQueue<String[]>();
 ...

 // inside of run, producer passes the queue into the PingNode
 public void run() {
     pool.submit(new PingNode(queue));
 }

 // consumer
 while (true) {
     String[] array = queue.take();
     ...
 } 
```

这不会影响您在完成后将如何停止线程。如果计时器任务被终止，实体可以向队列添加终止对象以停止主循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:02:43.603

Future 对象不像 ArrayList 那样是 bin，它只是指向单个计算结果。因为你只有一个指向这个 Future 的静态指针，所以我想象正在发生的事情是这样的：

```
 future = null
    nullException
    nullException
    nullException
    nullException
    ...
    First thread finally sets future = Future<ArrayList<String>>
    Call to future.get() blocks...
        Meanwhile, all other threads get scheduled, and they reassign future
        The last thread will obviously get the last say in what future points to
    Data is gathered, written to file, loop continues
    future now points to the Future from the last thread
    Results from last thread get printed 
```

# c# - Windows服务在启动期间失败的正确方法是什么

> ID：15950553
> 
> 赞同：2
> 
> 时间：2013-04-11T13:50:49.593
> 
> 标签：c#, service, windows-services

我需要我的服务在启动过程中检查某些文件的存在和结构，如果不满足某些条件则退出/失败/停止。我读了这个帖子：[Windows 服务失败的正确方法是什么？](https://stackoverflow.com/questions/4197036/what-is-the-proper-way-for-a-windows-service-to-fail) 但这无济于事。

我将 ServiceBase.ExitCode 属性设置为非零，然后调用 ServiceBase.Stop。但我得到 5 个事件日志条目。见下文：

```
Starting service. (I log this event via code)
Config.xml file not found. (I log this ERROR event via code)
Service stopped successfully. (SCM logs this message)
Service started successfully. (SCM logs this message)
Service cannot be started. The handle is invalid  (SCM logs this message) 
```

如您所见，除了最后两个条目外，一切正常。他们为什么在那里？如何在启动期间正确关闭服务？为什么 SCM 看不到服务已停止/失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:01:28.960

您没有提供足够的代码来真正了解，但我怀疑您正在尝试验证服务并在构造函数或 OnStart 中停止它。我喜欢处理服​​务的方式是在 OnStart 中启动我的计时器。在计时器的第一个间隔中，我可以验证所有代码，如果它无效关闭服务。如果它有效，请将计时器的间隔重置为我希望它运行的频率，然后设置一个布尔值，告诉它不要再次检查文件的有效性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T13:17:26.540

您正在尝试启动第二个服务实例（为同一 .exe 注册的另一个服务）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:04:46.417

您使用的返回码是`ExitCode`什么？如果它与相应的 windows 匹配`ExitCode`，那么这就是 SCM 将记录的内容。我假设你为你的 `ExitCode`.

另一件事是，如果您可以在默认值上运行，请让 Config.xml 丢失，并将问题记录在 EventLog 中。“配置文件丢失”

如果您真的希望它在 期间中止`OnStart`，请设置`ExitCode`然后抛出异常（`InvalidArgumentException`，`InvalidOperationException`）例如

这篇文章也有一些很好的建议。[.NET：缺少所需的配置设置时会抛出哪个异常？](https://stackoverflow.com/questions/417187/net-which-exception-to-throw-when-a-required-configuration-setting-is-missing)

# c++ - char[] 上的一元运算符

> ID：15950555
> 
> 赞同：0
> 
> 时间：2013-04-11T13:50:57.247
> 
> 标签：c++, visual-studio-2010, class, visual-c++, unary-operator

我正在尝试定义一元运算符 - 在 char 数组上

```
Int operator - (const char *rs){
  Int b(rs);
  return  b;
} 
```

但我收到两条错误消息

> IntelliSense：非成员运算符需要类或枚举类型的参数
> 
> 错误 C2803：'operator -' 必须具有至少一个类类型的形式参数

[我在msdn](http://msdn.microsoft.com/en-us/library/zy7kx46x%28v=vs.80%29.aspx)上查找了错误代码，但我仍然看不到我做错了什么。

我想执行类似的操作

```
-"1256ght78" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:52:30.190

你不能。您应该`class-type`为其重载的参数之一。您不能重载标准类型的运算符。

# iphone - 将带有 NSMutableArray 的 NSDictionary 作为值保存到 NSUserDefaults

> ID：15950563
> 
> 赞同：0
> 
> 时间：2013-04-11T13:51:13.870
> 
> 标签：iphone, ios, ipad, ios5

我将 UIImage 存储在 NSMutableArray 中，然后将 NSMutableArray 存储到 NSDictionary 中。NSDictionary 的键是文件夹名称，NSDictionary 的值是 NSMutableArray。现在我如何在 NSUserDefaults 中存储和检索 NSDictionary。

我做了如下：

```
NSMutableArray *imageArray=[[NSMutableArray alloc] init];
[imageArray addObject:selectedImage];

[allFolderWithImageDict setValue:imageArray forKey:@"UniqueFolderName"];

NSUserDefaults *defauktCenter = [NSUserDefaults standardUserDefaults];
[defauktCenter setValue:allFolderWithImageDict forKey:@"FolderImageDict"];
[defauktCenter synchronize]; 
```

但是 NSDictionary 没有保存在 NSUserDefaults 中。

请举一些例子

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:00:17.720

要存储和检索**自定义对象**的值，您可以使用`NSKeyedArchiver`和`NSKeyedUnarchiver`类：

```
// To Save. . .
NSData *resData = [NSKeyedArchiver archivedDataWithRootObject:allFolderWithImageDict];
[[NSUserDefaults standardUserDefaults] setObject:resData forKey:@"FolderImageDict"];

// To Load. . .
NSData *respData = [[NSUserDefaults standardUserDefaults] objectForKey:@"FolderImageDict"];
resultDictionary = [NSKeyedUnarchiver unarchiveObjectWithData:respData];
NSLog(@"dict :: %@",resultDictionary); 
```

祝你好运 ！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:45:12.580

而不是使用 NSDictionary，使用 NSMutableDictionary.... :)

并检索存储在字典中的数据......

```
 NSUserDefaults *d = [NSUserDefaults standardUserDefaults];

  NSString *loadname1 = [d objectForKey:@"FolderImageDict"];

  NSLog(@"%@", loadname1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:06:40.420

要在其中存储`UIImage`对象，`NSUserDefaults`您需要一个`UIImage`实现`NSCoding`协议的类别实现

这是一个： [https ://code.google.com/p/iphonebits/source/browse/trunk/src/Categories/UIImage-NSCoding.h](https://code.google.com/p/iphonebits/source/browse/trunk/src/Categories/UIImage-NSCoding.h) [https://code.google.com/p/iphonebits/source/browse /trunk/src/Categories/UIImage-NSCoding.m](https://code.google.com/p/iphonebits/source/browse/trunk/src/Categories/UIImage-NSCoding.m)

来自 [http://iphonedevelopment.blogspot.it/2009/03/uiimage-and-nscoding.html](http://iphonedevelopment.blogspot.it/2009/03/uiimage-and-nscoding.html)

# arrays - Perl - 检查每个不同数组中的任何元素是否与变量匹配

> ID：15950564
> 
> 赞同：3
> 
> 时间：2013-04-11T13:51:13.887
> 
> 标签：arrays, perl, loops, if-statement, www-mechanize

我有一个问题，我希望有人能提供帮助（为了解释我想要做什么而大大简化了）......

我有三个不同的数组：

```
my @array1 =  ("DOG","CAT","HAMSTER");
my @array2 =  ("DONKEY","FOX","PIG", "HORSE");
my @array3 =  ("RHINO","LION","ELEPHANT"); 
```

我还有一个包含网页内容的变量（使用 WWW::Mechanize）：

```
my $variable = $r->content; 
```

我现在想看看每个数组中的任何元素是否在变量中找到，如果是，它来自哪个数组：

例如

```
if ($variable =~ (any of the elements in @array1)) {
     print "FOUND IN ARRAY1";
} elsif ($variable =~ (any of the elements in @array2)) { 
     print "FOUND IN ARRAY2";
} elsif ($variable =~ (any of the elements in @array3)) {
     print "FOUND IN ARRAY3";
} 
```

使用数组执行此操作并遍历数组中的每个元素的最佳方法是什么？有没有更好的方法可以做到这一点？

非常感谢您的帮助，谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T14:16:08.367

您可以从数组元素中创建一个正则表达式，但您很可能希望禁用元字符*并*确保您没有得到部分匹配：

```
my $rx = join('\b|\b', map quotemeta, @array1);

if ($variable =~ /\b$rx\b/) {
    print "matched array 1\n";
} 
```

如果您确实想获得部分匹配，`FOXY`如下所示，只需删除所有`\b`序列。

**示范：**

```
use strict;
use warnings;

my @array1 =  ("DOG","CAT","HAMSTER");
my @array2 =  ("DONKEY","FOX","PIG", "HORSE");
my @array3 =  ("RHINO","LION","ELEPHANT");

my %checks = (
    array1 => join('\b|\b', map quotemeta, @array1),
    array2 => join('\b|\b', map quotemeta, @array2),
    array3 => join('\b|\b', map quotemeta, @array3),
);

while (<DATA>) {
    chomp;
    print "The string: '$_'\n";
    for my $key (sort keys %checks) {
        print "\t";
        if (/\b$checks{$key}\b/) {
            print "does";
        } else {
            print "does not";
        }
        print " match $key\n";
    }
}

__DATA__
A DOG ATE MY RHINO
A FOXY HORSEY 
```

**输出：**

```
The string: 'A DOG ATE MY RHINO'
        does match array1
        does not match array2
        does match array3
The string: 'A FOXY HORSEY'
        does not match array1
        does not match array2
        does not match array3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T15:40:31.883

首先，如果[当你发现自己给变量名添加了整数后缀时，认为***我应该使用数组***](https://stackoverflow.com/questions/1829922/concatenating-variable-names-in-c/1829927#1829927)。

因此，首先我要将单词集放入 arrayrefs 数组中。这将有助于确定匹配词的来源。

其次，我将使用[Regex::PreSuf](http://search.cpan.org/perldoc/Regex::PreSuf)从每个单词列表中创建一个模式，因为我总是忘记正确的方法。

第三注意，[在正则表达式模式中使用 \b 可能会导致令人惊讶的结果](http://blog.nu42.com/2012/04/using-b-in-regex-patterns-can-lead-to.html)。所以，相反，我将把内容分成单独的`\w`字符序列。

第四，您说“我还有一个包含网页内容的变量（使用 WWW::Mechanize）”。你想匹配评论中的单词吗？在`title`属性中？如果不这样做，您应该解析 HTML 文档以提取完整的纯文本或将匹配限制在某个元素或元素集内。

然后，`grep`从文本中的单词列表中，将那些在单词集中的单词映射到它们匹配的单词集中。

```
#!/usr/bin/env perl

use strict; use warnings;

use Regex::PreSuf qw( presuf );

my @wordsets = (
    [ qw( DOG CAT HAMSTER ) ],
    [ qw( DONKEY FOX PIG HORSE ) ],
    [ qw( RHINO LION ELEPHANT ) ],
);

my @patterns = map {
    my $pat = presuf(@$_);
    qr/\A($pat)\z/;
} @wordsets;

my $content = q{Lorem ipsum dolor sit amet, consectetur adipisicing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim
ad minim veniam, quis ELEPHANT exercitation ullamco laboris nisi ut aliquip
ex ea commodo consequat. Duis aute irure dolor in reprehenderit in HAMSTER
velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
cupidatat non proident, sunt in DONKEY qui officia deserunt mollit anim id
est laborum.};

my @contents = split /\W+/, $content;

use YAML;
print Dump [
    map {
        my $i = $_;
        map +{$_ => $i },
        grep { $_ =~ $patterns[$i] } @contents
    } 0 .. $#patterns
]; 
```

在这里，`grep { $_ =~ $patterns[$i] } @contents`提取`@contents`给定单词集中的单词。然后，`map +{$_ => $i }`将这些词映射到它们来自的词集。外部`map`只是循环每个单词集模式。

输出：

```
---
- 仓鼠：0
- 驴：1
- 大象：2
```

也就是说，您会得到一个 hashref 列表，其中每个 hashref 中的键是找到的单词，值是匹配的单词集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T13:57:02.633

```
my $re1 = join '|', @array1;
say "found in array 1" if $variable =~ /$re1/; 
```

Repeat for each additional array (or use an array of regexes and an array of arrays of terms).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T13:54:20.870

编辑：我认为您可以使用 perl 的[`map`](http://search.cpan.org/~rjbs/perl-5.16.3/pod/perlfunc.pod#map)函数，如下所示：

```
@a1matches = map { $variable =~ /$_/ ? $_ : (); } @array1;
print "FOUND IN ARRAY1\n" if $#a1matches >= 0;

@a2matches = map { $variable =~ /$_/ ? $_ : (); } @array2;
print "FOUND IN ARRAY2\n" if $#a2matches >= 0;

@a3matches = map { $variable =~ /$_/ ? $_ : (); } @array3;
print "FOUND IN ARRAY3\n" if $#a3matches >= 0; 
```

一个有趣的副作用是`@a1matches`包含.`@array1``$variable`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T14:23:02.187

如果您喜欢使用模块，[Regexp::Assemble可能会有所帮助。](http://search.cpan.org/~dland/Regexp-Assemble-0.35/Assemble.pm)它允许将正则表达式字符串组合成一个正则表达式，匹配所有单个正则表达式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T13:56:49.953

我假设`$variable`不是数组，在这种情况下使用`foreach`语句。

```
foreach my $item (@array1) {
    if ($item eq $variable) {
        print "FOUND IN ARRAY1";
    }
} 
```

并对每个数组重复上述操作，即array2，array3 ...

# python - 解释如何在 Python 中使用内存缓存

> ID：15950570
> 
> 赞同：1
> 
> 时间：2013-04-11T13:51:32.600
> 
> 标签：python, recursion, memcached, fibonacci

对于第 n 个斐波那契数，我有以下递归解决方案：

```
def fib(n):
if n == 0:
    return 0
elif n == 1:
    return 1
else:
    return fib(n-1) + fib(n-2)
x=input('which fibonnaci do you want?')
print fib(x) 
```

我需要更改它，以便它使用存储的内存缓存并从中获取内容以加快进程。我真的不知道该怎么做，谷歌也没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:54:37.577

用这个装饰你的功能：

[http://docs.python.org/3/library/functools.html#functools.lru_cache](http://docs.python.org/3/library/functools.html#functools.lru_cache)

文档中的示例之一实际上是斐波那契：

```
@lru_cache(maxsize=None)
def fib(n):
    if n < 2:
        return n
    return fib(n-1) + fib(n-2) 
```

这使：

```
>>> [fib(n) for n in range(16)]
[0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610]

>>> fib.cache_info()
CacheInfo(hits=28, misses=16, maxsize=None, currsize=16) 
```

**更新**

这仅适用于 Python3.2+

对于反向移植，请查看此页面：[http ://code.activestate.com/recipes/578078-py26-and-py30-backport-of-python-33s-lru-cache/](http://code.activestate.com/recipes/578078-py26-and-py30-backport-of-python-33s-lru-cache/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:02:33.843

这不是最优雅的解决方案，但会帮助您了解其工作原理。

```
import memcache

def fib(n):
    v = mc.get(str(n))
    if not v is None:
        print "Hit on cache: %s = %s" %(n, v)
        return v

    print "Miss on cache"
    if n == 0:
        return 0
    elif n == 1:
        return 1
    else:
        v = fib(n-1) + fib(n-2)
        mc.set(str(n), v)
        return v

mc = memcache.Client(['127.0.0.1:11211'], debug=0)
x=input('which fibonnaci do you want?')
print fib(x) 
```

如果您在 Ubuntu 上： sudo apt-get install python-memcache 运行此代码

# asp.net - 以编程方式获取表控制

> ID：15950574
> 
> 赞同：0
> 
> 时间：2013-04-11T13:51:37.437
> 
> 标签：asp.net

我有一个我正在以编程方式创建的表，然后在 CreateChildControls() 方法中向其中添加一些行和数据。它有 2 列，其中包含下拉列表控件。现在在客户端基于下拉列表中的选择，我正在添加更多通过复制最后一行的内容来创建行。有一个保存按钮，单击该按钮会调用 Web 部件的以下覆盖函数以取回表对象。问题是我在客户端添加的行不是已检索..仅检索最初在服务器端创建的行。有人可以告诉我我在这里做错了什么。

所以这样做 Table tab = FindControl("Main1") as Table; tab.rows 只给出最初在服务器上生成的 3 个，不包括在客户端创建的 2 个新的

```
Public Override Control FindControl(string id)

{

return base.FindControl(id);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:05:01.367

客户端添加的任何行都不会传递到服务器——这就是该技术的工作方式。更好的方法是让保存按钮生成 PostBack 并在服务器上添加新行。

如果绝对必须在客户端添加新行，那么您将需要编写一个 ajax 调用以在将新行添加到客户端后将它们添加到视图状态服务器端 - 当 PostBack 应该完美时，这似乎是很多工作足够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:06:30.860

我相信服务器端添加的控件存储在 ViewState 中，客户端 DOM 更改不会影响它。在您的表格和下拉列表周围添加 UpdatePanel，并在服务器端添加行，这对您来说可能是最简单的，也是最好的用户体验。

# python - UnboundLocalError：分配前引用的局部变量“Core_prices”

> ID：15950576
> 
> 赞同：0
> 
> 时间：2013-04-11T13:51:38.253
> 
> 标签：python

我使用一个函数计算服务器价格，所以我创建了一个函数，它检索服务器组件的默认价格并计算数据库中每个服务器的服务器价格，但我尝试运行此函数，但出现此错误：

```
function.py

import MySQLdb

def calculations_metric (param) :
    db = MySQLdb.connect("localhost", "root", "aqw", "PFE_Project")
    cursor = db.cursor()
    sql = "SELECT * FROM examples_calculationsmetric"
    cursor.execute(sql)
    results = cursor.fetchall()
    for row in results:
        RAM_prices = int(row[1])
        Core_prices = int(row[2])
        HHD_SATA_prices =int(row[3])
        HHD_SSD_prices =int(row[4])
        CPU_priority = int(row[5])
        Avaibility = int(row[6])
    db.close()

    db1 = MySQLdb.connect("localhost", "root", "aqw", "PFE_Project")
    cursor1 = db1.cursor()
    sql1 = "SELECT * FROM examples_servercomponents WHERE id ='%d'" %(param)
    cursor1.execute(sql1)
    results1 = cursor1.fetchall()
    for row in results1:
        if row[6] == 'SATA':
            Core_price = int(row[2]) * Core_prices # the error is here
            Priority_price = int(row[3]) * CPU_priority
            RAM_price = int(row[4]) * RAM_prices
            HDD_price = int(row[5]) * HHD_SATA_prices
            Availibility_price = int(row[7])*Avaibility

        elif row[6] == 'SSD':
            Core_price = int(row[2]) * Core_prices
            Priority_price = int(row[3]) * CPU_priority
            RAM_price = int(row[4]) * RAM_prices
            HDD_price = int(row[5]) * HHD_SSD_prices
            Availibility_price = int(row[7])*Avaibility

    price = Core_price + Priority_price + RAM_price + HDD_price + Availibility_price
    db1.close()
    return price 
```

我不明白错误是什么，所以如果有人能帮助我，我会非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:54:00.397

当您`SELECT * FROM examples_calculationsmetric`没有返回任何结果时，`Core_prices`永远不会设置（该循环中的其他变量也不会）。

Python 名称在分配给之前不存在，因此如果`results`是一个空列表，则`for`循环内的名称永远不会被分配给，因此在您稍后循环时*不*存在。`results1`

您可以为这些名称设置默认值作为解决方法：

```
RAM_prices = 0
Core_prices = 0
HHD_SATA_prices = 0
HHD_SSD_prices = 0
CPU_priority = 0
Avaibility = 0 
```

至少确保它们被定义。

# asp.net - Accordion 的第一个窗格在部分回发时闪烁

> ID：15950577
> 
> 赞同：0
> 
> 时间：2013-04-11T13:51:42.713
> 
> 标签：asp.net, postback, accordion

我正在使用带有大量窗格的 ASP.NET Accordion 控件用于数据输入表单。在几个窗格中有一些 UpdatePanel，因此可以启用或禁用这些面板中的某些控件，以防止用户将值输入到被他们在其他地方输入的值所排除的字段中。

一切正常，但由于某种原因，在大约一半的情况下（通过指定的 AsyncPostBack 触发器）触发了 UpdatePanel 回发，Accordion 的第一个窗格会瞬间展开和折叠。当页面进行完整回发时，这会给您带来可怕的“闪烁”体验，这正是我试图通过使用 UpdatePanels 来避免的。

该问题似乎与第一个窗格的内容无关 - 我尝试完全删除第一个窗格，以便第二个窗格成为第一个窗格，并且发生了同样的事情。

有人知道为什么会发生这种情况以及如何解决吗？

已更新代码 这是其中一个面板的示例。不要因为使用表格而被冒犯 - 这是一张实际的表格，我不只是将它用于布局目的！

```
<tr class="grouprow">
    <td>Transportation</td>
    <td><asp:RadioButtonList ID="rblTransportation" runat="server" RepeatDirection="Horizontal" SelectedValue='<%# Bind("AdmissionTransportation")%>' AutoPostBack="true" 
            OnSelectedIndexChanged="rblTransportation_SelectedIndexChanged" >
            <asp:ListItem Text="Unknown" Value="" />
            <asp:ListItem Text="Yes" Value="True" />
            <asp:ListItem Text="No" Value="False" />                                    
    </asp:RadioButtonList></td><td></td>
</tr>
<tr class="grouprow">
    <td>Transportation Duration</td>
    <td><asp:UpdatePanel ID="updTransportationHours" runat="server" UpdateMode="Conditional">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="rblTransportation" EventName="selectedindexchanged" />
            </Triggers>
            <ContentTemplate>
                <asp:TextBox ID="txtTransportationHours" runat="server" Text='<%# Bind("AdmissionTransportationHours")%>' CssClass="tinytextbox" />
                <label class="unit">Hours</label>
                <asp:RegularExpressionValidator ID="revTransportationHours" runat="server" ControlToValidate="txtTransportationHours" ValidationExpression="\d{1,3}(\.\d{1,2})?"
                    ValidationGroup="Past30Days" ErrorMessage="Invalid format for Transporation Duration. Please enter in format 'xxx.xx', e.g. '3.25'" Display="Dynamic" 
                    CssClass="error" >*</asp:RegularExpressionValidator>
                <asp:RangeValidator ID="rvTransportationDuration" runat="server" ControlToValidate="txtTransportationHours" CssClass="error" ValidationGroup="Past30Days" type="Double"
                    ErrorMessage="The Transportation Duration cannot be more than 100" MinimumValue="0" MaximumValue="100" >*</asp:RangeValidator>
            </ContentTemplate>
    </asp:UpdatePanel></td><td></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:51:44.790

答案非常简单，尽管我太累了，无法弄清楚为什么它现在才起作用。我只需要`ClientIDMode = AutoID`在 RadioButtonLists 和 CheckBoxLists 上进行设置，它们现在会触发异步回发而不是完整回发。它们也不需要在自己的 UpdatePanel 中。

我[从这个 SO question](https://stackoverflow.com/questions/4319156/updatepanel-gives-full-postback-instead-of-asyncpostback/4484867#comment-7093883)得到了答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:21:13.147

我相信您也需要`rblTransportation` `RadioButtonList` 包裹在 UpdatePanel 中。

由于该控件不在 UpdatePanel 中，因此会导致完整的回发。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-11T14:07:05.583

你能试试`<asp:blablacontrol style="Display:none;"> </asp:control>` modalpanels 有同样的问题吗？这段代码解决了我的问题

# database - 找出代码中的错误

> ID：15950579
> 
> 赞同：0
> 
> 时间：2013-04-11T13:51:50.020
> 
> 标签：database, asp-classic, vbscript

我昨天问了[这个问题](https://stackoverflow.com/questions/15903828/reorder-comma-seperated-sentences-into-new-paragraphs)并得到了答案。我通读了它并认为它可以工作，但是在将代码实现到我的 .asp 页面后，我得到了一个错误。

```
Dim strSQL
Set adoCon = Server.CreateObject("ADODB.Connection")
adoCon.Open "DRIVER={Microsoft Access Driver (*.mdb)}; DBQ=" & Server.MapPath("DatabaseName.mdb")
Set rsLogbook = Server.CreateObject("ADODB.Recordset")
strSQL = "SELECT TableName.FieldName FROM TableName;"
rsLogbook.Open strSQL, adoCon

'' get string and put into list
Dim myList As List(Of String) = rsLogbook("FieldName").ToString().Split(New () {","}, StringSplitOptions.RemoveEmptyEntries).ToList()

'' then close all your stuff
rsLogbook.Close
Set rsLogbook = Nothing
Set adoCon = Nothing

'' Sort your list
myList.Sort();

'' now output to where ever you want.
'' in this case, have an asp.literal control on your page where you want the text and call it myLit
For each sensor in myList
myLit.Text += "<p>" + sensor + "</p>"
Next
%> 
```

错误说

> “Microsoft VBScript 编译错误‘800a0401’
> 
> 预期的语句结束
> 
> 将 myList 调暗为 List(Of String) = rsLogbook("sensors").ToString().Split(New () {","}, StringSplitOptions.RemoveEmptyEntries).ToList() ------------ ^

我真的很感激这方面的任何帮助。

> 我在这里尝试使用此代码做的是从数据库中提取信息并使用 .asp 和 VB 脚本将其显示在网页中。我正在使用.asp页面中的Response.Write标签来实现包含数据库中信息的字段名称

**更新**

```
<%
Dim adoCon
Dim rsLogbook
Dim strSQL
Set adoCon = Server.CreateObject("ADODB.Connection")
adoCon.Open "DRIVER={Microsoft Access Driver (*accdb, *.mdb)}; DBQ=" & Server.MapPath("featuredvehicle.accdb")
Set rsLogbook = Server.CreateObject("ADODB.Recordset")
strSQL = "SELECT featuredvehicles.make FROM featuredvehicles;"
rsLogbook.Open strSQL, adoCon
Response.Write ("<br>")
Response.Write (rsLogbook("make"))
rsLogbook.Close
Set rsLogbook = Nothing
Set adoCon = Nothing
%> 
```

这也是其中包含数据库和表名的实际代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T05:28:16.357

如果您只想从数据库中检索一个字段并 Response.Write 所有行，您可以使用这样的东西。请注意，我已删除 VB.NET 代码来创建列表。我还在 SQL 查询中添加了 WHERE 子句，以防您不想要空值（根据 VB.NET），并添加了 ORDER BY 子句来替换 List 排序。

```
Dim strSQL
Set adoCon = Server.CreateObject("ADODB.Connection")
adoCon.Open "DRIVER={Microsoft Access Driver (*.mdb)}; DBQ=" & Server.MapPath("DatabaseName.mdb")
Set rsLogbook = Server.CreateObject("ADODB.Recordset")
strSQL = "SELECT TableName.FieldName FROM TableName WHERE TableName.FieldName != '' ORDER BY TableName.FieldName ASC;" 'Add order by clause so you don't need to sort the array
rsLogbook.Open strSQL, adoCon

Do Until rsLogBook.EOF
    Response.Write(rsLogbook("FieldName")) & "<br />"
    rsLogBook.MoveNext
Loop

rsLogbook.Close
Set rsLogbook = Nothing
Set adoCon = Nothing 
```

# sql - SQL Server：将表达式转换为数据类型 int 的算术溢出错误

> ID：15950580
> 
> 赞同：63
> 
> 时间：2013-04-11T13:51:52.167
> 
> 标签：sql, sql-server, tsql

我收到此错误

> msg 8115，级别 16，状态 2，第 18 行将
> 表达式转换为数据类型 int 的算术溢出错误。

使用此 SQL 查询

```
DECLARE @year VARCHAR(4);                       
DECLARE @month VARCHAR(2);                      

-- START OF CONFIGURATION SECTION                       
-- THIS IS THE ONLY SECTION THAT SHOULD BE MODIFIED                     
-- SET THE YEAR AND MONTH PARAMETERS                        

SET @year = '2013';                     
SET @month = '3';  -- 1 = January.... 12 = Decemeber.                       

-- END OF CONFIGURATION SECTION                     

DECLARE @startDate DATE                     
DECLARE @endDate DATE                       
SET @startDate = @year + '-' + @month + '-01 00:00:00';                     
SET @endDate = DATEADD(MONTH, 1, @startDate);                       

SELECT                          
    DATEPART(YEAR, dateTimeStamp) AS [Year]                         
    , DATEPART(MONTH, dateTimeStamp) AS [Month]                         
    , COUNT(*) AS NumStreams                        
    , [platform] AS [Platform]                      
    , deliverableName AS [Deliverable Name]                     
    , SUM(billableDuration) AS NumSecondsDelivered                      
FROM                            
    DeliveryTransactions                        
WHERE                           
    dateTimeStamp >= @startDate                     
AND dateTimeStamp < @endDate                        
GROUP BY                            
    DATEPART(YEAR, dateTimeStamp)                       
    , DATEPART(MONTH, dateTimeStamp)                        
    , [platform]                        
    , deliverableName                       
ORDER BY                            
    [platform]                      
    , DATEPART(YEAR, dateTimeStamp)                         
    , DATEPART(MONTH, dateTimeStamp)                        
    , deliverableName 
```

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2013-04-11T13:59:57.890

有问题`SUM(billableDuration)`吗？要找出答案，请尝试注释掉该行并查看它是否有效。

可能是总和超过了最大值`int`。如果是这样，请尝试将其替换为`SUM(CAST(billableDuration AS BIGINT))`.

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-01-18T05:31:45.327

更改`SUM(billableDuration) AS NumSecondsDelivered`为

`sum(cast(billableDuration as bigint))` 或者

`sum(cast(billableDuration as numeric(12, 0)))`根据您的需要。

Sum 表达式的结果类型与使用的数据类型相同。它在溢出时抛出错误。因此，将列转换为更大容量的数据类型，然后使用 Sum 操作可以正常工作。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-12-23T18:41:42.150

很简单：

```
Use COUNT_BIG(*) AS NumStreams 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T14:43:46.220

```
SELECT                          
    DATEPART(YEAR, dateTimeStamp) AS [Year]                         
    , DATEPART(MONTH, dateTimeStamp) AS [Month]                         
    , COUNT(*) AS NumStreams                        
    , [platform] AS [Platform]                      
    , deliverableName AS [Deliverable Name]                     
    , SUM(billableDuration) AS NumSecondsDelivered 
```

假设您引用的文本是确切的文本，则这些列之一无法进行您想要的数学计算。双击错误，它会突出显示导致问题的行（如果它与发布的不同，它可能不在上面）；我用变量测试了你的代码，没有问题，这意味着这些列之一（我们不知道更具体的信息）正在创建这个错误。

您的其中一个表达式需要被强制转换/转换为 int 才能通过，这就是`Arithmetic overflow error converting expression to data type int`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-28T19:45:37.207

就我而言，此错误来自 Null 值列中的数据类型“INT”。只需将数据类型更改为 varchar 即可解决该错误。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2016-12-27T05:34:10.457

```
declare @d real
set @d=1.0;
select @d*40000*(192+2)*20000+150000 
```

# sql - 如何编写查询以将列中的所有值放入字符串（将列转换为行）？

> ID：15950581
> 
> 赞同：0
> 
> 时间：2013-04-11T13:51:55.743
> 
> 标签：sql, oracle

如果这里是数据列：

```
+----+-------------+  
| id | data        |  
+----+-------------+  
|  1 | max         |  
|  2 | linda       |  
|  3 | sam         |  
|  4 | henry       |  
+----+-------------+ 
```

所以如何进行查询然后有结果：

```
"max, lina, sam, henry" 
```

很像列到行的转换。以上只是一个简单的演示，可能有 10000 多条`data`现场记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:56:59.847

对于 11g，使用`LISTAGG`

```
SELECT LISTAGG("data", ', ') WITHIN GROUP (ORDER BY "id") "data"
FROM TableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/81c2c/3)

*   [列表](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions087.htm)

# vb.net - 使用 VB.Net 从 PDF 文件中提取数据

> ID：15950582
> 
> 赞同：-1
> 
> 时间：2013-04-11T13:51:56.913
> 
> 标签：vb.net, pdf

我正在尝试从 VB.Net 中的大型 PDF 文件中提取一些数据，我在[网上](http://www.ehow.com/how_6199098_use-_amp_-print-pdf-file.html)找到了以下代码，但这没有帮助：

```
Sub PrintPDF (strPDFFileName as string)
    Dim sAdobeReader as String
    'This is the full path to the Adobe Reader or Acrobat application on your computer
     sAdobeReader = "C:\Program Files\Adobe\Acrobat 6.0\Reader\AcroRd32.exe"
     RetVal = Shell(sAdobeReader & "/P" & Chr(34) & sStrPDFFileName & Chr(34), 0)
End Sub 
```

我真的迷路了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:19:43.270

/P 将只显示加载文件并显示打印对话框 - 死胡同。

您可能需要某种类型的库来获取 PDF 的内容。

如果文件具有非常简单的结构，您也许可以通过读取字节来提取数据。看看是否可以用 Notepad++ 之类的文件打开它并查看内容。

BTW VS2010 有几个用于查看/编辑文件的编辑器：文件、打开文件...选择文件然后使用打开按钮上的下拉菜单。

# jquery - 在单击事件中使用通用选择器 (*) 仅选择被单击的而不是父项

> ID：15950585
> 
> 赞同：0
> 
> 时间：2013-04-11T13:52:08.970
> 
> 标签：jquery

我正在开发一个 DOM 检查器书签。我需要用户能够点击页面中的任何内容，因此我必须使用通用选择器 (*) 来附加点击事件。但是，当通过此选择器单击一个项目时，我会返回所选项目以及每个父项。我如何只获得选定的项目以便我可以使用它？

```
$(document).on("click", "*", function() {
    alert(this);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:53:15.750

```
$(document).on("click", "*", function(event) {
    event.stopPropagation();
}); 
```

jQuery 文档： [http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:57:01.527

> “我需要用户能够点击页面中的任何内容，因此我必须使用通用选择器 (*) 来附加点击事件。”

您不需要通用选择器，实际上您根本不需要第二个参数来指定选择器。当文档接收到点击事件时，它可以使用[`event.target`属性](http://api.jquery.com/event.target/)确定事件从哪个元素开始：

```
$(document).on("click", function(event) {
    // event.target is the element you care about
    alert(event.target.id);  // or whatever
    ...

}); 
```

# mysql - 用于返回连接到同一引用的多个字段的 SQL 查询

> ID：15950590
> 
> 赞同：0
> 
> 时间：2013-04-11T13:52:27.527
> 
> 标签：mysql, sql

所以我有下表，do_stock_movement，看起来像这样：

```
stock_movement_id sm_number sm_source_id sm_destination_id
15164b86a7533d 145 1516478840ee29 151644d8bd63f2
15166b89d1a9fc 194 15165c481bd9d0 151659e632cd48
```

列`sm_source_id`和`sm_destination_id`两个参考产品点存储在`do_product_points`.

我正在使用以下 SQL 查询：

```
选择 * 从 do_stock_movement
INNER JOIN do_product_points ON product_points_id = sm_source_id
WHERE sm_number = '145'
```

在`do_product_points`中，有一个名为 的字段`pp_name`。我需要对应`pp_name`的`sm_source_id`和`sm_destination_id`。

但是，上面的查询只会返回`pp_name`for `sm_source_id`，或者`sm_destination_id`如果您将连接字段更改为 for 。

什么 SQL 查询将返回对应`pp_name`的`sm_source_id`和`sm_destination_id`？

我希望这很清楚。如果不是，请提出问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:55:08.053

`JOIN`此表`do_product_points`再一次用于`sm_destination_id`：

```
SELECT 
  s.pp_name AS SourcePoint,
  d.pp_name AS DestinationPoint,
  ...
FROM do_stock_movement AS m
INNER JOIN do_product_points s ON s.product_points_id = m.sm_source_id
INNER JOIN do_product_points d ON d.product_points_id = m.sm_destination_id
WHERE m.sm_number = '145' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T13:56:03.203

您需要加入两次并使用别名：

```
SELECT *, Src.pp_name, Dst.pp_name FROM do_stock_movement
  INNER JOIN do_product_points as Src 
      ON Src.product_points_id = sm_source_id
  INNER JOIN do_product_points as Dst 
      ON Dst.product_points_id = sm_destination_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T13:57:16.337

您需要加入 product_points 表两次，一次使用 source_id，一次使用 destination_id：

```
SELECT * FROM do_stock_movement move
INNER JOIN do_product_points source ON source.product_points_id = move.sm_source_id
INNER JOIN do_product_points dest ON dest.product_points_id = move.sm_destination_id
WHERE sm_number = '145' 
```

# ios - 在 IOS 中检查两个位置的接近度

> ID：15950595
> 
> 赞同：3
> 
> 时间：2013-04-11T13:52:32.340
> 
> 标签：ios, objective-c, cocoa-touch

我有一个位置数组，当我添加另一个位置时，我希望能够检查数组中的其他位置是否在新位置的块内。这是我必须找到当前位置的代码：

```
//Geocoding Block
[self.geoCoder reverseGeocodeLocation: locationManager.location completionHandler:
 ^(NSArray *placemarks, NSError *error) {

     //Get nearby address
     CLPlacemark *placemark = [placemarks objectAtIndex:0];

     //String to hold address
    locatedAt = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"]    componentsJoinedByString:@", "]; 
```

该数组尚未创建，因为我想先弄清楚这一点，我不知道数组中应该保存什么（字符串...）。我知道如何进行搜索我只需要知道如何比较位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:16:14.620

您可以使用CLLocation 上[的`distanceFromLocation:`方法](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)获取两个位置之间的距离。（您可以使用 . 从 CLPlacemark 中获取 CLLocation `myPlacemark.location`。）因此，如果您有一个 CLLocation 对象数组，并且您想找到一个街区（1/20 英里或约 80 米）内的对象，您可以这样做这：

```
NSMutableArray *locationsWithinOneBlock = [NSMutableArray new];
for (CLLocation *location in myLocations) {
    if ([location distanceFromLocation:targetLocation] <= 80.0)
        [locationsWithinOneBlock addObject:location];
} 
```

这假设您有一个 CLLocation 对象数组`myLocations`，您希望针对一个名为 的 CLLocation 进行过滤`targetLocation`。

# objective-c - 过滤器以 abc# 开头并以 #objective c 结尾

> ID：15950598
> 
> 赞同：0
> 
> 时间：2013-04-11T13:52:33.923
> 
> 标签：objective-c, nsstring, nspredicate, nsscanner

我是新手，这是我的第一篇文章。

在我的 Inputstream 中，我正在获取消息列表，其中我必须过滤特定行并打印该行，但有时它会崩溃，有人能告诉我我在哪里犯了错误吗？

这是我的代码：

```
NSMutableArray *substrings = [NSMutableArray new];
NSScanner *scanner = [NSScanner scannerWithString:s];
[scanner scanUpToString:@"&abc" intoString:nil]; //
NSString *substring = nil;
[scanner scanString:@"&abc" intoString:nil]; // Scan the # character
if([scanner scanUpToString:@"&" intoString:&substring]) {
   // If the space immediately followed the &, this will be skipped
   [substrings addObject:substring];
   NSLog(@"substring is :%@",substring);
}
// do something with substrings
[substrings release]; 
```

* * *

我正进入（状态：

```
&xyz;123:183:184:142&          
&abc;134:534:435:432&             
&qwe;323:535:234:532& 
```

有时我会得到：

```
&qwe;323:535:234:532&       
&abc;423:123:423:341&            
&gfg;434:243:534:3434& 
```

* * *

我只想打印以 "&abc" 开头并以 "&" 结尾的字符串。

代码是否正确？有什么建议吗？

# asp.net-mvc - 在 MVC 视图 Razor 中正确使用引号

> ID：15950599
> 
> 赞同：0
> 
> 时间：2013-04-11T13:52:37.283
> 
> 标签：asp.net-mvc, razor

我在 ASP.Net Razer 视图中使用引号时遇到了一些困难，因为我一直将它们替换为 '

例如，如果我键入：

```
@{string test = "String 'with' quotes"}
@test 
```

我最终得到：

```
String &#39;with&#39; quotes 
```

在上面的示例中，这是可取的。

但是，以第二个例子为例：

```
@{string myJSFunction = myJSFunction('myString')"}
@myJSFunction 
```

我最终得到：

```
myJSFunction(&#39;myString&#39;) 
```

这会导致 javascript 函数损坏。

我曾尝试用 来排除引号`\`，但它们似乎没有任何效果。

这是我面临的实际问题：

```
@using (Ajax.BeginForm(
  "_MonthRanges", 
  "Projects", 
  new { id = ViewBag.InputResourceID }, 
  new AjaxOptions { 
      HttpMethod = "POST", 
      UpdateTargetId = "MonthRanges", 
      InsertionMode = InsertionMode.Replace,
      OnComplete = @myJSFunction
})) 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T13:53:26.957

在 razor 中，`@`将编码和渲染。试试[`Html.Raw`](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)方法。此方法返回非 HTML 编码的标记。

```
@Html.Raw(myJSFunction) 
```

所以如果你想在脚本块中执行函数，你可以这样做

```
@{string myJSFunction = "alert('Rise and Shine')";}
<script type="text/javascript">  
    @Html.Raw(myJSFunction)
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:54:08.587

运算符始终对`@`字符串进行 HTML 编码。如果您想要原始字符串值，请使用`@Html.Raw(myJSFunction)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:30:35.777

已经提到了您的问题的解决方案（Html.Raw()），但我不确定您为什么在给出的代码示例中使用 @。从外观上看，当您尝试分配它时，您已经在代码块中，那么为什么要使用剃须刀。

```
@using (Ajax.BeginForm(
  "_MonthRanges", 
  "Projects", 
  new { id = ViewBag.InputResourceID }, 
  new AjaxOptions { 
      HttpMethod = "POST", 
      UpdateTargetId = "MonthRanges", 
      InsertionMode = InsertionMode.Replace,
      OnComplete = @myJSFunction
})) 
```

应该

```
@using (Ajax.BeginForm(
  "_MonthRanges", 
  "Projects", 
  new { id = ViewBag.InputResourceID }, 
  new AjaxOptions { 
      HttpMethod = "POST", 
      UpdateTargetId = "MonthRanges", 
      InsertionMode = InsertionMode.Replace,
      OnComplete = myJSFunction
})) 
```

@ 告诉页面的 StreamWriter 将结果写入响应，因此旨在在 HtmlEncoding 之后注入页面。使用 Html.Raw 绕过了 Html 编码方面，但在您的情况下，您不是直接自己编写页面，而是让`Html.BeginForm`处理它，因此您不需要在`OnComplete`函数分配中使用 @。

**更新：**好的，我忘了提到的另一件事是传递给 AjaxOptions 的方法只是 Javascript 函数，看起来没有参数。参数由处理所有接线的 Unobtrusive 脚本自动传递。所以你的表格应该是这样的......

```
@using (Ajax.BeginForm(
  "_MonthRanges", 
  "Projects", 
  new { id = ViewBag.InputResourceID }, 
  new AjaxOptions { 
      HttpMethod = "POST", 
      UpdateTargetId = "MonthRanges", 
      InsertionMode = InsertionMode.Replace,
      OnComplete = "myJSFunction"
})) 
```

它会处理剩下的事情。如果您需要在`myJSFunction`函数中传递其他参数，您可能必须通过其他方式公开它们。可以作为 javascript 变量，也可以将其与其他元素关联并使用`$("elementselector").data("dataAttributeName")`（这是我首选和建议的方法）访问它。对不显眼的 ajax JavaScript 库进行的常见修改之一（我希望 Microsoft 能够采用此更改并完成它）是为`this`触发 ajax 事件的元素设置上下文。因此，在这种情况下，它将`this`等于表单元素。考虑到这一切，这是我的建议。

*首先：* 修改您的 Unobtrusive Ajax 脚本文件，以便将源元素分配给`this`关键字，这样它就可以在您的 JavaScript 中处理不显眼的事件。 [这个问题概述了它所涉及](https://stackoverflow.com/questions/14655280/get-calling-form-in-onsuccess/14655719#14655719)的内容（添加到文件中的一行）

*第二：* 将您的字符串添加到表单上的数据属性之一

```
@using (Ajax.BeginForm(
    "_MonthRanges",
    "Projects",
    new {id = ViewBag.InputResourceID},
    new AjaxOptions
        {
            HttpMethod = "POST",
            UpdateTargetId = "MonthRanges",
            InsertionMode = InsertionMode.Replace,

            OnComplete = "myJSFunction"
        },
    new { data_parameter_name = "myString" })) 
```

*第三：* 从处理您的事件的 javascriptfunction 内部访问您的参数。

```
<script>
    function myJSFunction(data, textStatus, jqXHR)
    {
        //data, textStatus and jqXHR are set for you by the unobtrusive ajax script file automatically, feel free to use them
        var parameter = $(this).data("parameterName");
        alert(parameter);
    }
</script> 
```

# iphone - 如何从 GPUImageView 获取 UIImage

> ID：15950602
> 
> 赞同：5
> 
> 时间：2013-04-11T13:52:44.980
> 
> 标签：iphone, uiimage, gpuimage

我在我的项目中使用 GPUImageView 库，它正在使用 GPUImageView 并且我在该 GPUImageView 上添加了诸如对比度和其他图像效果（如棕褐色等）的过滤器，一切都很好，但问题是现在我想将该 GPUImageVIew 转换为 UIImage 以便我可以从该 UIImage 中提取图像并将该图像发布到 Facebook 上，但我无法做到这一点，在 facebook 上发布的图像是简单的相机捕获的图像，没有我使用 GPUIMageView 添加的特殊效果。如何实现这一点。请帮助我。在此先感谢...以下是我的代码

```
 -(void) loadFilters
{
    for(int i = 0; i < 10; i++)
    {
        UIButton * button = [UIButton buttonWithType:UIButtonTypeCustom];
        [button setBackgroundImage:[UIImage imageNamed:[NSString stringWithFormat:@"%d.jpg", i + 1]] forState:UIControlStateNormal];
        button.frame = CGRectMake(10+i*(60+10), 5.0f, 60.0f, 60.0f);
        button.layer.cornerRadius = 7.0f;

        //use bezier path instead of maskToBounds on button.layer
        UIBezierPath *bi = [UIBezierPath bezierPathWithRoundedRect:button.bounds
                                                 byRoundingCorners:UIRectCornerAllCorners
                                                       cornerRadii:CGSizeMake(7.0,7.0)];

        CAShapeLayer *maskLayer = [CAShapeLayer layer];
        maskLayer.frame = button.bounds;
        maskLayer.path = bi.CGPath;
        button.layer.mask = maskLayer;

        button.layer.borderWidth = 1;
        button.layer.borderColor = [[UIColor blackColor] CGColor];

        [button addTarget:self
                   action:@selector(filterClicked:)
         forControlEvents:UIControlEventTouchUpInside];
        button.tag = i;
       // [button setTitle:@"*" forState:UIControlStateSelected];
        if(i == 0){
            [button setSelected:YES];
        }
        [self.filterScrollView addSubview:button];
    }
    [self.filterScrollView setContentSize:CGSizeMake(10 + 10*(60+10), 75.0)];
}
-(void) filterClicked:(UIButton *) sender
{
    for(UIView *view in self.filterScrollView.subviews)
    {
        if([view isKindOfClass:[UIButton class]])
        {
            [(UIButton *)view setSelected:NO];
        }
    }

    [sender setSelected:YES];
    [self removeAllTargets];

    selectedFilter = sender.tag;
    [self setFilter:sender.tag];
    [self prepareFilter];
}

-(void) setFilter:(int) index
{
    UIImage *inputImage = [UIImage imageNamed:@"Default-568h@2x.png"];
    img_New = [[UIImage alloc] init];
    switch (index) {
        case 1:
        {
            filter = [[GPUImageContrastFilter alloc] init];
            [(GPUImageContrastFilter *) filter setContrast:1.75];
           // img_New = [filter imageByFilteringImage:inputImage];
            if(Border==NO)
            {
                [imgBorder setImage:[UIImage imageNamed:@"borderNew1.png"]];
            }
        } break;
        case 2:
        {
            filter = [[GPUImageToneCurveFilter alloc] initWithACV:@"crossprocess"];
            //img_New = [filter imageByFilteringImage:inputImage];
            if(Border==NO)
            {
                [imgBorder setImage:[UIImage imageNamed:@"borderNew2.png"]];
            }
        } break;
        case 3:
        {
            filter = [[GPUImageToneCurveFilter alloc] initWithACV:@"02"];
            //img_New = [filter imageByFilteringImage:inputImage];
            if(Border==NO)
            {
                [imgBorder setImage:[UIImage imageNamed:@"borderNew3.png"]];
            }
        } break;
        case 4:
        {
            filter = [[GrayscaleContrastFilter alloc] init];
            //img_New = [filter imageByFilteringImage:inputImage];
            if(Border==NO)
            {
                [imgBorder setImage:[UIImage imageNamed:@"borderNew4.png"]];
            }
        } break;
        case 5:
        {
            filter = [[GPUImageToneCurveFilter alloc] initWithACV:@"17"];
            //img_New = [filter imageByFilteringImage:inputImage];
            if(Border==NO)
            {
                [imgBorder setImage:[UIImage imageNamed:@"borderNew5.png"]];
            }
        } break;
        case 6: {
            filter = [[GPUImageToneCurveFilter alloc] initWithACV:@"aqua"];
            //img_New = [filter imageByFilteringImage:inputImage];
            if(Border==NO)
            {
                [imgBorder setImage:[UIImage imageNamed:@"borderNew6.png"]];
            }
        } break;
        case 7: {
            filter = [[GPUImageToneCurveFilter alloc] initWithACV:@"yellow-red"];
            //img_New = [filter imageByFilteringImage:inputImage];
            if(Border==NO)
            {
                [imgBorder setImage:[UIImage imageNamed:@"borderNew7.png"]];
            }
        } break;
        case 8: {
            filter = [[GPUImageToneCurveFilter alloc] initWithACV:@"06"];
           // img_New = [filter imageByFilteringImage:inputImage];
            if(Border==NO)
            {
                [imgBorder setImage:[UIImage imageNamed:@"borderNew8.png"]];
            }
        } break;
        case 9: {
            filter = [[GPUImageToneCurveFilter alloc] initWithACV:@"purple-green"];
           // img_New = [filter imageByFilteringImage:inputImage];
            if(Border==NO)
            {
                [imgBorder setImage:[UIImage imageNamed:@"borderNew9.png"]];
            }
        } break;
        default:
            filter = [[GPUImageFilter alloc] init];
            //img_New = [filter imageByFilteringImage:inputImage];
            if(Border==NO)
            {
                [imgBorder setImage:[UIImage imageNamed:@""]];
            }
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T07:51:20.387

您可以通过以下方式获取图像

```
UIImage *currentFilteredImage = [filter imageFromCurrentlyProcessedOutput]; 
```

# javascript - 如何触发jScrollPane滚动到底部事件

> ID：15950604
> 
> 赞同：1
> 
> 时间：2013-04-11T13:52:48.087
> 
> 标签：javascript, jquery, jscrollpane

我已经搜索了很多，但找不到任何可以帮助我的东西。我需要一个在滚动条接近底部时触发的 javascript 事件。我记得在没有 jScrollPane 的情况下，我曾经使用 div 的绑定滚动事件来执行此操作，并且在事件内部它使用滚动顶部和高度等进行一些计算，以查看滚动是否已完成到/接近底部。我在 Jscrollpane 的滚动条中找不到任何类似的东西。我发现了几个类似的问题，但它们是用 Java 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:58:14.520

[这里](http://jscrollpane.kelvinluck.com/events.html)有一个描述这些事件的页面

```
 $('.scroll-pane').
    bind('jsp-scroll-y', function(event, scrollPositionY, isAtTop, isAtBottom) {
         // some basic math here            
    }); 
```

# ruby - 为什么在这种情况下并发循环比正常循环慢？

> ID：15950608
> 
> 赞同：2
> 
> 时间：2013-04-11T13:53:16.640
> 
> 标签：ruby

我正在学习 Ruby 中的线程，来自**The Ruby Programming Language** book 并发现这种方法被描述为每个迭代器的并发版本，

```
module Enumerable
  def concurrently
    map {|item| Thread.new { yield item }}.each {|t| t.join }
  end
end 
```

以下代码

```
 start=Time.now
 arr.concurrently{ |n| puts n} # Ran using threads
 puts "Time Taken #{Time.now-start}" 
```

输出：`Time Taken 6.6278332`

尽管

```
start=Time.now
arr.each{ |n| puts n} # Normal each loop
puts "Time Taken #{Time.now-start}" 
```

输出：`Time Taken 0.132975928`

为什么没有线程会更快？是实现错误还是第二个只有`puts`声明，而第一个需要时间进行资源分配/初始化/终止线程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:57:15.460

MRI（“黄金标准”红宝石）中的线程并不是真正并发的。有一个全局 VM 锁 (GVL) 可防止线程同时运行。但是，当当前线程在 I/O 上被阻塞时，它允许其他线程运行，但这不是你的情况。

因此，您的代码串行运行，并且您有线程开销（创建/销毁线程等）。这就是为什么它更慢。

# android - 使用新的 MediaCodec 库在 android 上进行视频压缩

> ID：15950610
> 
> 赞同：23
> 
> 时间：2013-04-11T13:53:36.733
> 
> 标签：android, video, compression

在我的应用程序中，我正在尝试上传用户从图库中挑选的一些视频。问题是通常 android 视频文件太大而无法上传，所以我们想先通过较低的比特率/分辨率来压缩它们。

我刚刚听说使用 API 16 引入的新[MediaCodec](http://developer.android.com/reference/android/media/MediaCodec.html) api（我以前尝试使用 ffmpeg 这样做）。

我现在正在做的事情如下：首先使用视频解码器解码输入视频，并使用从输入文件中读取的格式对其进行配置。接下来，我创建一个带有一些预定义参数的标准视频编码器，并将其用于对解码器输出缓冲区进行编码。然后我将编码器输出缓冲区保存到文件中。

一切看起来都不错 - 从每个输入和输出缓冲区写入和读取相同数量的数据包，但最终文件看起来不像视频文件，任何视频播放器都无法打开。

看起来解码没问题，因为我通过在 Surface 上显示它来测试它。我首先将解码器配置为使用 Surface，当我们调用 releaseOutputBuffer 时，我们使用渲染标志，我们能够在屏幕上看到视频。

这是我正在使用的代码：

```
 //init decoder
    MediaCodec decoder = MediaCodec.createDecoderByType(mime);
    decoder.configure(format, null , null , 0);
    decoder.start();
    ByteBuffer[] codecInputBuffers = decoder.getInputBuffers();
    ByteBuffer[] codecOutputBuffers = decoder.getOutputBuffers();

    //init encoder
    MediaCodec encoder = MediaCodec.createEncoderByType(mime);
    int width = format.getInteger(MediaFormat.KEY_WIDTH);
    int height = format.getInteger(MediaFormat.KEY_HEIGHT);
    MediaFormat mediaFormat = MediaFormat.createVideoFormat(mime, width, height);
    mediaFormat.setInteger(MediaFormat.KEY_BIT_RATE, 400000);
    mediaFormat.setInteger(MediaFormat.KEY_FRAME_RATE, 25);
    mediaFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT, MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420SemiPlanar);
    mediaFormat.setInteger(MediaFormat.KEY_I_FRAME_INTERVAL, 5);
    encoder.configure(mediaFormat, null , null , MediaCodec.CONFIGURE_FLAG_ENCODE);
    encoder.start();
    ByteBuffer[] encoderInputBuffers = encoder.getInputBuffers();
    ByteBuffer[] encoderOutputBuffers = encoder.getOutputBuffers();

    extractor.selectTrack(0);

    boolean sawInputEOS = false;
    boolean sawOutputEOS = false;
    boolean sawOutputEOS2 = false;
    MediaCodec.BufferInfo info = new MediaCodec.BufferInfo();
    BufferInfo encoderInfo = new MediaCodec.BufferInfo();

    while (!sawInputEOS || !sawOutputEOS || !sawOutputEOS2) {
        if (!sawInputEOS) {
            sawInputEOS = decodeInput(extractor, decoder, codecInputBuffers);
        }

        if (!sawOutputEOS) {
            int outputBufIndex = decoder.dequeueOutputBuffer(info, 0);
            if (outputBufIndex >= 0) {
                sawOutputEOS = decodeEncode(extractor, decoder, encoder, codecOutputBuffers, encoderInputBuffers, info, outputBufIndex);
            } else if (outputBufIndex == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {
                Log.d(LOG_TAG, "decoding INFO_OUTPUT_BUFFERS_CHANGED");
                codecOutputBuffers = decoder.getOutputBuffers();
            } else if (outputBufIndex == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {
                final MediaFormat oformat = decoder.getOutputFormat();
                Log.d(LOG_TAG, "decoding Output format has changed to " + oformat);
            } else if (outputBufIndex == MediaCodec.INFO_TRY_AGAIN_LATER) {
                 Log.d(LOG_TAG, "decoding dequeueOutputBuffer timed out!");
            }
        }

        if (!sawOutputEOS2) {
            int encodingOutputBufferIndex = encoder.dequeueOutputBuffer(encoderInfo, 0);
            if (encodingOutputBufferIndex >= 0) {
                sawOutputEOS2 = encodeOuput(outputStream, encoder, encoderOutputBuffers, encoderInfo, encodingOutputBufferIndex);
            } else if (encodingOutputBufferIndex == MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED) {
                Log.d(LOG_TAG, "encoding INFO_OUTPUT_BUFFERS_CHANGED");
                encoderOutputBuffers = encoder.getOutputBuffers();
            } else if (encodingOutputBufferIndex == MediaCodec.INFO_OUTPUT_FORMAT_CHANGED) {
                final MediaFormat oformat = encoder.getOutputFormat();
                Log.d(LOG_TAG, "encoding Output format has changed to " + oformat);
            } else if (encodingOutputBufferIndex == MediaCodec.INFO_TRY_AGAIN_LATER) {
                Log.d(LOG_TAG, "encoding dequeueOutputBuffer timed out!");
            }
        }
    }
            //clear some stuff here... 
```

这些是我用于解码/编码的方法：

```
 private boolean decodeInput(MediaExtractor extractor, MediaCodec decoder, ByteBuffer[] codecInputBuffers) {
        boolean sawInputEOS = false;
        int inputBufIndex = decoder.dequeueInputBuffer(0);
        if (inputBufIndex >= 0) {
            ByteBuffer dstBuf = codecInputBuffers[inputBufIndex];
            input1count++;

            int sampleSize = extractor.readSampleData(dstBuf, 0);
            long presentationTimeUs = 0;
            if (sampleSize < 0) {
                sawInputEOS = true;
                sampleSize = 0;
                Log.d(LOG_TAG, "done decoding input: #" + input1count);
            } else {
                presentationTimeUs = extractor.getSampleTime();
            }

            decoder.queueInputBuffer(inputBufIndex, 0, sampleSize, presentationTimeUs, sawInputEOS ? MediaCodec.BUFFER_FLAG_END_OF_STREAM : 0);
            if (!sawInputEOS) {
                extractor.advance();
            }
        }
        return sawInputEOS;
    }
    private boolean decodeOutputToFile(MediaExtractor extractor, MediaCodec decoder, ByteBuffer[] codecOutputBuffers,
            MediaCodec.BufferInfo info, int outputBufIndex, OutputStream output) throws IOException {
        boolean sawOutputEOS = false;

        ByteBuffer buf = codecOutputBuffers[outputBufIndex];
        if ((info.flags & MediaCodec.BUFFER_FLAG_END_OF_STREAM) != 0) {
            sawOutputEOS = true;
            Log.d(LOG_TAG, "done decoding output: #" + output1count);
        }

        if (info.size > 0) {
            output1count++;
            byte[] outData = new byte[info.size];
            buf.get(outData);
            output.write(outData, 0, outData.length);
        } else {
            Log.d(LOG_TAG, "no data available " + info.size);
        }
        buf.clear();
        decoder.releaseOutputBuffer(outputBufIndex, false);
        return sawOutputEOS;
    }

    private boolean encodeInputFromFile(MediaCodec encoder, ByteBuffer[] encoderInputBuffers, MediaCodec.BufferInfo info, FileChannel channel) throws IOException {
            boolean sawInputEOS = false;
            int inputBufIndex = encoder.dequeueInputBuffer(0);
            if (inputBufIndex >= 0) {
                ByteBuffer dstBuf = encoderInputBuffers[inputBufIndex];
                input1count++;

                int sampleSize = channel.read(dstBuf);
                if (sampleSize < 0) {
                    sawInputEOS = true;
                    sampleSize = 0;
                    Log.d(LOG_TAG, "done encoding input: #" + input1count);
                }

                encoder.queueInputBuffer(inputBufIndex, 0, sampleSize, channel.position(), sawInputEOS ? MediaCodec.BUFFER_FLAG_END_OF_STREAM : 0);
            }
            return sawInputEOS;
    } 
```

关于我做错了什么有什么建议吗？

我没有找到太多使用 MediaCodec 进行编码的示例，只是一些用于解码的示例代码......非常感谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T23:54:36.110

MediaCodec 的输出是原始基本流。您需要将其打包成视频文件格式（可能将音频混合回），然后许多播放器才能识别它。FWIW，我发现用于 Linux 的基于 GStreamer 的 Totem 电影播放器​​将播放“原始”视频/avc 文件。

**更新：**在 Android 上将 H.264 转换为 .mp4 的方法是使用Android 4.3 (API 18) 中引入的[MediaMuxer 类。](http://developer.android.com/reference/android/media/MediaMuxer.html)有[几个示例](http://bigflake.com/mediacodec/)（EncodeAndMuxTest、CameraToMpegTest）演示了它的使用。

# scripting - IOS编程，是怎么做的？

> ID：15950611
> 
> 赞同：-9
> 
> 时间：2013-04-11T13:53:37.083
> 
> 标签：scripting, cisco, cisco-ios

在我家中的 Cisco 800 路由器上，我看到一个叫做“IOS”的东西，我知道它是互联网操作系统。但在编程世界中，这是一种像 Python、Ruby、Java 等这样的语言吗？如果您想编写一个在路由器本身上运行的脚本，而不是让另一台计算机打开一个套接字，请转到该设备并运行一些 shell 命令。像每 60 分钟向我的路由器广播连接设备这样简单的事情。对于用于编写 IOS 的实际程序，我们在这里谈论的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:02:39.733

如果您想编写一个与您的路由器对话的程序，请搜索一个名为的程序`expect`- 它会很好地为您服务。它使用路由器的串行端口来执行此操作。

在回答您的基本问题时，不，您不能编写下载到将在其上运行的路由器的程序。

# sql - PL SQL函数while循环意外结束

> ID：15950613
> 
> 赞同：0
> 
> 时间：2013-04-11T13:53:38.833
> 
> 标签：sql, function, plsql, while-loop

我有一个函数，我想计算两个日期之间的秒数，这些秒数应该只在我们公司的营业时间内计算。因为完成任务可能需要几天时间，所以我创建了一个 while 循环，应该增加天数

这是我的循环：

```
 WHILE TO_DATE(TRUNC(dateIterator),'YYYY-MM-DD') < TO_DATE(TRUNC(CallbackUpdatedDate),'YYYY-MM-DD') LOOP
 calculateIntervalFrom := null;
calculateIntervalTo := null;

SELECT THIS_DATE_OPENING,
 THIS_DATE_CLOSING,
 NEXT_DATE_OPENING
INTO thisDateOpening, thisDateClosing, nextDay
FROM KS_DRIFT.SYS_DATE_KS
WHERE THIS_DATE = dateIterator;

-- gets calculated from
calculateIntervalFrom := thisDateOpening;

-- Gets calculateTo
IF dateIterator = TO_DATE(TRUNC(CallbackUpdatedDate),'YYYY-MM-DD') THEN
calculateIntervalTo := CallbackUpdatedDate;
ELSE
calculateIntervalTo := thisDateClosing;
END IF;
fromSeconds := abs(extract(second from TO_TIMESTAMP(calculateIntervalFrom))) + extract(minute from TO_TIMESTAMP(calculateIntervalFrom)) * 60 + extract(hour from TO_TIMESTAMP(calculateIntervalFrom)) * 60 * 60;
toSeconds :=abs(extract(second from TO_TIMESTAMP(calculateIntervalTo))) + extract(minute from TO_TIMESTAMP(calculateIntervalTo)) * 60 + extract(hour from TO_TIMESTAMP(calculateIntervalTo)) * 60 * 60;
intervalDifference := fromSeconds - toSeconds;

solvedSeconds := solvedSeconds + intervalDifference;
dateIterator := nextDay;
dbms_output.put_line(nextDay); 
```

**一个小小的解释**

所以想法是只要值`dateIterator`（即创建行的日期）与上次更新行的时间不同（`CallbackUpdatedDate`），它将从表中选择今天和接下来的几天营业时间`KS_DRIFT.SYS_DATE_KS`

如果今天的日期与它相同，`CallbackUpdatedDate`它将设置`calculateIntervalTo`等于，`CallbackUpdatedDate`否则它会将值设置为`thisDateClosing`

然后它将计算两个日期之间的秒数并将它们添加到`NUMBER` `solvedSeconds`

之后我会设置`dateIterator`为下一个开放日：`dateIterator := nextDay;`

这有效，但只有两次，然后它只是结束循环：

这是它尝试计算的两个日期：

创建时间：2013-03-26 10:23:33

最后更新时间：2013-04-03 09:25:10

```
dbms_output.put_line(nextDay); outputs these two values: 
```

2013-03-27 和 2013-03-27

从表面上看，while 循环中的 SELECT 语句似乎没有按预期工作，但我根本不明白为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:56:43.153

您如何处理日期看起来很奇怪：

```
TO_DATE(TRUNC(dateIterator),'YYYY-MM-DD') 
```

所以 dateIterator 是您截断的日期，即您删除时间部分。这为您提供了一个时间设置为 00:00:00 的日期。但是随后您在该日期使用 to_date 函数，就好像它是一个字符串一样。这在我看来是错误的。

然后在你的选择语句中你有

```
WHERE THIS_DATE = dateIterator 
```

我想知道：上面你必须从 dateIterator 中删除时间。在这里你没有。您的表是否有包含时间部分的 dateIterator 条目？

我希望这些发现已经有助于解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:55:10.593

与其使用 WHILE 循环，不如只使用一个查询？就像是：

```
select (end_date - start_date - 
        (select coalesce(sum(least(NEXT_DATE_OPENING,end_date) -
                             greatest(THIS_DATE_CLOSING,start_date)),0)
         from KS_DRIFT.SYS_DATE_KS
         where THIS_DATE_CLOSING < end_date and 
               NEXT_DATE_OPENING > start_date)) * 86400 available_time
from dual 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!4/72435/7)。

# iphone - 将 NSMutable 数组保存到文件返回 NO

> ID：15950614
> 
> 赞同：-3
> 
> 时间：2013-04-11T13:53:39.687
> 
> 标签：iphone, ios

在我的 iPhone 应用程序中，我需要将 NSMutable 字典保存在文件中。字典包含 NSString 键和 NSString 值。

```
-(NSString*)datafilePath{
    NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
    NSString* documentsDirectory = [paths objectAtIndex:0];
    return [documentsDirectory stringByAppendingPathComponent:@"resourceItemProperties.txt"];
}

- (void)applicationDidEnterBackground:(UIApplication *)application{
    if(resourceItemProperties && rootViewController.selectedIndex == 0)
    {
        BOOL test =  [resourceItemProperties writeToFile:[self datafilePath] atomically:YES];
}} 
```

但测试总是返回 NO；我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:58:01.800

```
NSDocumentationDirectory 
```

不。

```
NSDocumentDirectory 
```

是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:54:56.183

您应该使用`writeToFile:options:error:`传递`NSDataWritingAtomic`给选项的方法。然后，您可以使用错误输出参数找出调用失败的原因：

```
NSError *error;
if (![resourceItemProperties writeToFile:[self datafilePath]
                                 options:NSDataWritingAtomic
                                   error:&error]) {
    NSLog(@"%@", error);
} 
```

# django - 在 Django Social Auth 管道中收集额外的用户数据

> ID：15950616
> 
> 赞同：5
> 
> 时间：2013-04-11T13:53:39.987
> 
> 标签：django, django-socialauth

我正在使用 Django Social Auth (v0.7.22) 通过 Facebook 注册用户，并且工作正常。

我的疑问是如何为新用户收集额外的数据：

1.  如何检测新用户？
2.  将收集到的数据存储在哪里（在 Django 会话中或通过管道传递`**kwargs`）？

我的管道看起来像：

```
SOCIAL_AUTH_PIPELINE = (
    'social_auth.backends.pipeline.social.social_auth_user',
    'social_auth.backends.pipeline.misc.save_status_to_session',
    ## My customs ...
    'myapp.pipeline.load_data_new_user',
    'myapp.pipeline.handle_new_user',
    'myapp.pipeline.username',
    ##
    'social_auth.backends.pipeline.user.create_user',
    'social_auth.backends.pipeline.social.associate_user',
    'social_auth.backends.pipeline.social.load_extra_data',
    'social_auth.backends.pipeline.user.update_user_details',
) 
```

第一个自定义函数只是收集 Facebook 头像：

```
def load_data_new_user(backend, response, user, *args, **kwargs):
    if user is None:
        if backend.name == "facebook":
            try:
                url = "http://graph.facebook.com/%s/picture?width=200&height=200&redirect=false" % response['id']
                data = json.loads(urllib2.urlopen(url).read())['data']
                return {'avatar': data}
            except StandardError:
                return {'avatar': None}
        else:
            raise ValueError() 
```

我的疑惑：

1.  我正在检查是否`user`用于`None`检测新用户（不确定是否可以假设）。
2.  我将头像元数据存储在管道中`**kwargs`而不是使用会话中，可以吗？我什么时候应该使用会话。

其他自定义函数基于[Matias Aguirre 示例](https://github.com/omab/django-social-auth/tree/master/example)，并使用会话存储新用户的用户名。

```
def handle_new_user(request, user, *args, **kwargs):
    if user is None and not request.session.get('saved_username'):
        return HttpResponseRedirect('/form/')

def username(request, user, *args, **kwargs):
    if user is not None:
        username = user.username
    else:
        username = request.session.get('saved_username')
    return {'username': username} 
```

所以，我不确定何时使用会话或“正确的成语”来解决我的问题。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T14:05:23.000

[Matias Aguirre（django socialauth 创建者）在DSA google 邮件列表](https://groups.google.com/forum/?hl=es&fromgroups=#!topic/django-social-auth/xzDLi48weRM)中温柔地回答了我的问题

他的回答：

> 如您所见，收集数据很容易，但将数据放在哪里取决于您的项目、您计划如何处理数据以及您希望它在哪里可用。例如，如果您打算将头像图像放在用户配置文件模型上，那么您应该获取当前用户的配置文件并将其存储在那里，如果您使用带有 avatar_url 字段的自定义用户，那么您应该在之后填写该字段用户已创建，如果您打算下载图像并使用用户名（id 等）作为文件名将其存储到服务器本地，那么也这样做。
> 
> 会话通常用作与视图进行通信的机制。
> 
> 关于“用户是新用户”，当用户是否是新用户时，有一个标志“is_new”设置为 True/False，但在调用“create_user”之前它不会更新。
> 
> 管道条目“save_status_to_session”应放置在中断管道流的方法之前，在您的情况下为 handle_new_user。

感谢大家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:25:11.140

[在找到这篇文章](http://tryolabs.com/Blog/2012/02/13/get-user-data-using-django-social-auth/)之前，我在尝试使用 Tumblr 和 Instagram 获取额外数据时遇到了类似的问题。

`extra_data`创建/关联用户时，似乎有两种流行方式：

# *_EXTRA_DATA

这是处理许多数据的最简单方法，但根据情况可能无法访问。[在 docs](http://django-social-auth.readthedocs.org/en/v0.7.22/backends/oauth.html)的 OAuth 页面上有一个简短的提及。

例如，在您的设置文件中：

```
FACEBOOK_EXTRA_DATA = [('<actual field from FB>', '<your alias>')] 
```

但是，各种后端似乎没有返回一致的值，所以我必须调试`social_auth.backends.pipeline.social.load_extra_data`才能找到可以访问的字段。有时，各个后端会描述哪些字段可用（例如，[请参阅 Facebook 后端](http://django-social-auth.readthedocs.org/en/v0.7.22/backends/facebook.html)）或 API 文档，但最可靠的方法是单步执行其代码。

# 添加到管道

开始时，您可以定义自定义函数并将其挂接到管道中。从链接的文章（并稍作修改）：

```
def get_user_avatar(backend, details, response, social_user, uid,\
                user, *args, **kwargs):
    url = None
    if getattr(backend, 'name', None) == 'facebook':
        url = "http://graph.facebook.com/%s/picture?type=large" % response['id']

    if url:
        # Save the image somewhere, or just use the URL
        avatar = url
        social_user.extra_data['avatar'] = avatar
        social_user.save() 
```

在任何一种情况下，一旦你这样做了，额外的数据就可以通过`social_user.extra_data['your_field']`. 希望有帮助。

# 检测用户是否是新用户呢？

据我了解，除非您`django-socialauth`用于帐户登录，否则管道仅在初始关联上运行，因此该用户将始终是新用户。除此之外，我不是 100% 确定的。

# php - 如何在沙盒中测试贝宝经典 API

> ID：15950619
> 
> 赞同：0
> 
> 时间：2013-04-11T13:53:43.647
> 
> 标签：php, paypal

paypal支持两种paypal api：第一种：新的REST api（未完成，仅支持美元业务）第二种：经典api（支持所有币种）

所以我在沙盒中测试了经典的 api，但在用户的个人资料中找不到任何关于“帐户凭据”的信息。谁能帮我？？？

skd_config.ini 文件的配置：

```
;Account credentials
[Account]
acct1.UserName = xxxx@paypal.com
acct1.Password = xxxxx
acct1.Signature = yyyyyyyyyyyyyyy
acct1.AppId = APP-80W284485P519543T 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:37:19.160

如果您的测试沙盒卖家帐户默认没有创建这些，您可以登录该帐户并手动创建这些。要为您的沙盒帐户请求 API 凭证，请按照以下步骤操作：

1.登录您的测试沙盒 PayPal Premier 或 Business 帐户。

2.单击位于顶部导航区域的配置文件子选项卡。

3.单击请求 API 凭据。
- 如果您看到“API 访问”而不是第 3 步，请单击此处。

4.单击“设置 PayPal API 凭据和权限”链接。

5.单击请求 API 凭据链接。
- 如果您看到“查看 API 证书”而不是第 5 步，请单击此处

6.单击请求 API 签名单选按钮并阅读 API 许可协议和使用条款。

7\. 单击同意并提交按钮，填写 API 凭证请求表。

8.复制API用户名和密码旁边列出的值

9.选择签名哈希旁边列出的值，将其复制，然后将其保存到文件或其他位置。这是您的 API 签名。

# matlab - 计算列中的重复数字

> ID：15950620
> 
> 赞同：0
> 
> 时间：2013-04-11T13:53:45.077
> 
> 标签：matlab

这是我的数据：

```
3  3  2
2  4  1
4  1  2
7  5  2
3  4  1
2  6  2
1  5  1 
```

我想以某种方式返回我有 3 个重复的 1 和 4 个重复的 2。

我试过`find(ismember(e(:,3),set)`在哪里`set = [1, 2]`，`length(strfind(e(:,3),'1'))`但他们没有工作......找不到其他任何东西

如果它像那样返回我会更好

```
ans = 
      3 1
      4 2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T14:50:20.597

在这种情况下最好使用`tabulate`.

```
m = tabulate(a(:,3))

m =

1.0000    3.0000   42.8571
2.0000    4.0000   57.1429

[m(:,1), m(:,2)]

ans =

 1     3
 2     4 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T14:00:21.303

使用`unique`and`histc`计算元素的出现次数：

```
[U, ia, iu] = unique(A(:, 3));   %// Vector of unique values and their indices
counts = histc(iu, 1:numel(U));  %// Count values
res = [counts(:), U]; 
```

### 例子

让我们将此应用于您的示例：

```
A = [3 3 2; 2 4 1; 4 1 2; 7 5 2; 3 4 2; 2 6 1; 1 5 1];
[U, ia, iu] = unique(A(:, 3));
counts = histc(iu, 1:numel(U));
res = [counts(:), U]; 
```

我们得到的是：

```
res =
     3     1
     4     2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T14:05:55.983

```
data = [3  3  2
        2  4  1
        4  1  2
        7  5  2
        3  4  1
        2  6  2
        1  5  1];

d = data(:,3); %extract relevant data
u = unique(d)'; %find unique list of numbers
D = repmat(d, 1, length(u)); 
s = sum(bsxfun(@eq, u, D)); %count occurences of each number in the unique list
ans = [s', u'] 
```

**编辑：**

在这里找到更好的答案：[确定向量中每个唯一元素的出现次数](https://stackoverflow.com/questions/5385651/determining-the-number-of-occurrences-of-each-unique-element-in-a-vector)

# css - Firefox and Chrome ignoring background-size?

> ID：15950632
> 
> 赞同：6
> 
> 时间：2013-04-11T13:54:09.727
> 
> 标签：css, media-queries

I have a number of media queries in my site that resize various elements on pads/ smartphones. I've just added another media query to resize the same elements on lower-resolution laptops and discovered that Firefox and Chrome seems to be ignoring my use of background-size.

The media query is working, parts of them are being picked up, but not background-size. It works fine in safari.

Any ideas why?

My CSS is:

```
@media only screen and (min-height: 768px) and (max-height: 800px) {
    #title-we-are {
        background-size:95%;
        background: url(../img/title_we_are.png) bottom center no-repeat;
        height:254px;   
    }
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-11T14:42:51.777

你`background-size`被放在你的`background`速记之前，所以速记用它的默认值 ( [)](http://www.w3.org/TR/css3-background/#the-background)[覆盖它`auto`](http://www.w3.org/TR/css3-background/#the-background)，防止你之前的`background-size`声明生效。这是使用速记属性的[常见问题。](https://stackoverflow.com/questions/10455465/why-cant-i-seem-to-use-background-clip/10455580#10455580)

如果这在 Safari 中有效，很可能 Safari 尚未更新其`background`速记以识别`background-size`值，从而允许您`background-size`工作。

您需要切换它们，以便您的设置`background-size`值生效：

```
@media only screen and (min-height: 768px) and (max-height: 800px) {
    #title-we-are {
        background: url(../img/title_we_are.png) bottom center no-repeat;
        background-size:95%;
        height:254px;   
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-06T16:37:05.527

附加信息：我已经确定在 chrome 中使用“背景图像：url（）”，背景大小不起作用。

只有在使用“background: url()”速记时 background-size 才有效。

从 Chrome 56.0.2924.87（64 位）开始就是如此

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:56:20.307

..因为他们有另一种css格式：

```
-webkit-background-size: cover; //safari chrome
-moz-background-size: cover; // firefox
-o-background-size: cover; // opera 
```

# c++ - About file input/ouput and exception in C++

> ID：15950635
> 
> 赞同：0
> 
> 时间：2013-04-11T13:54:19.683
> 
> 标签：c++, file, exception, file-io, exception-handling

I am reading Jesse Liberty's SAMS Teach Yourself C++ in 10 Minutes and testing the examples in the book. I find that there are some bugs in the code about file i/o but I don't know where they are. The book does not mention anything about them. I think the problem is caused by `fstream` and `catch(...)` but I don't know how to fix it. So I would like to seek help from experienced C++ users here to help me.

## Problems:

I don't know why the program always call `ErrorHandling::handleNotANumberError();` **when the input file is empty**.

Moreover, the program has more errors **when the input file does not exist**. Exceptions are caught and `basic_ios::clear` is read. Why are there errors?

When I **delete the codes about exceptions**, it can work well when the file does not exist.

And when I input from an **empty file**, the message "invalid operator" is present.

I think that invalid operator is the **eof character**. Is it?

I have searched in Google but still cannot figure out what is happening. I know the following code is a bit long but I really want to know what happens.

## The major content in main.cpp :

```
ifstream tapeInputStream; //global variable for callback

char getOperator()
{
    char operatorInput;

    if
    (
        tapeInputStream.is_open() &&
        ( !tapeInputStream.eof() )
    )
    {
        tapeInputStream >> operatorInput;
    }
    else
    {
        cin >> operatorInput;
    }

    return operatorInput;
}

float getOperand()
{
    float operandInput = 1;

    if
    (
        tapeInputStream.is_open() &&
        ( !tapeInputStream.eof() )
    )
    {
        tapeInputStream >> operandInput;
    }
    else
    {
        cin >> operandInput;
    }

    return operandInput;
}

void showResult( float theResult )
{
    cout << endl << "Result: " << theResult << endl;
}

int main( int argc, char* argv[] )
{
    if ( argc > 1 ) //a filename is present
    {
        try
        {
            tapeInputStream.exceptions( tapeInputStream.failbit ); //cin or ofstream?
            tapeInputStream.open( argv[1], ios_base::in );
        }
        catch ( ios_base::failure &ioError )
        {
            ErrorHandling::handleInputStreamError( tapeInputStream, ioError );
            //the stream will be unopened but the failbit will not be set
        }
    }

    Calculator::aCalculatorExternalInterface CalculatorExternalInterface;

    CalculatorExternalInterface.getAnOperator = getOperator;

    CalculatorExternalInterface.getAnOperand = getOperand;

    CalculatorExternalInterface.showResult = showResult;

    int result = Calculator::calculateFromInput( CalculatorExternalInterface );

    tapeInputStream.close(); //close the file to make output stream in tape() possible

    Calculator::tape( '.', 0, argv[1] ); //stream and delete the tape

    return result;

} 
```

## Part of namespace Calculator in ExternalInterfaceModule.cpp :

```
bool nextCalculation
(
    const aCalculatorExternalInterface &theCalculatorExternalInterface
)
{
    char operatorInput = theCalculatorExternalInterface.getAnOperator();

    switch ( operatorInput )
    {
        case '.': //stop

            return true; //done will become true

        case '?': //show the tape

            tape( operatorInput );
            return false;

        case '=': case '@': //no operand sent to accumulator
        {
            anOperator operatorValue =
                ( operatorInput == '=' ? query : reset );

            float result = accumulator( operatorValue );

            if ( operatorValue == query )
            {
                theCalculatorExternalInterface.showResult( result );
            }

            return false;
        } //use curly brackets to define the scope
        case '+': case '-': case '*': case '/': //calculation
        {
            float number = theCalculatorExternalInterface.getAnOperand();

            anOperator operatorValue =
                operatorInput == '+' ? add :
                operatorInput == '-' ? subtract :
                operatorInput == '*' ? multiply :
                                       divide;

            accumulator( operatorValue, number );
            tape( operatorInput, number );

            return false;
        }
        case '!': //self-test

            selfTest();
            return false;

        default: //anythings else is an error

            throw runtime_error( "Error: Invalid operator.");

    }
}

int calculateFromInput
(
    aCalculatorExternalInterface &theCalculatorExternalInterface
)
{
    ErrorHandling::initialise();

    bool done = false;

    do
    {
        try
        {
            done = nextCalculation( theCalculatorExternalInterface );
        }
        catch ( runtime_error runtimeError )
        {
            ErrorHandling::handleRuntimeError( runtimeError );
        }
        catch (...)
        {
            ErrorHandling::handleNotANumberError();
        }
    }
    while ( !done ); //continue when undone

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T12:19:16.623

我不知道抛出的异常是什么，所以我只是添加了一些 if 语句来防止由于**空文件或不存在文件**而导致的任何错误。在问题引起问题之前处理问题的根源可能会更好。（我真的不太了解异常。）

**这是我在 main.cpp 中的新代码**

```
if ( argc > 1 ) //a filename is present
{
    try
    {

        tapeInputStream.exceptions( tapeInputStream.failbit );

        if ( existFile( argv[1] ) ) //no need to read file if it does not exist
        {
            tapeInputStream.open( argv[1], ios_base::in );

            if ( emptyFile() ) //no need to read file if it is empty
            {
                tapeInputStream.close();
            }
        }
    }
    catch ( ios_base::failure &ioError )
    {
        ErrorHandling::handleInputStreamError( tapeInputStream, ioError );
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:05:01.740

在行`catch ( ios_base::failure &ioError )`中，您只是在处理一种类型的错误。尝试`catch(...)`所有错误。请提及运行代码后出现的其他错误。

另外请确保您以正确的方式提供论据。 `Executable<space>file_name_as_argument.`

# c++ - 删除和重新分配全局指针 - segfault

> ID：15950637
> 
> 赞同：0
> 
> 时间：2013-04-11T13:54:21.387
> 
> 标签：c++, segmentation-fault, global-variables

我在 test.h 文件中有： `double *condmatrix`- 全局变量然后在主程序中执行：

```
cycle_start {
    proc1() {
    condmatrix = new double[maxdim];
    ....simple work with the array itself
    }
    proc2() {
    delete [] condmatrix;
    }
}//cycle finish 
```

这给了我一个段错误。我尝试用 [] 语法删除，没有和其他方式，它仍然给出一个段错误。Maxdim 因周期而异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:52:14.520

好吧，我发现我分配了两次指针，即：

```
condmatrix = new double [maxdim];
condmatrix = new double [maxdim];
delete [] condmatrix; 
```

我知道这不应该导致问题，但显然它确实如此，因为在重写代码分配一次后，它工作得很好。也许有一些内存损坏，我偶尔会修复。

# c# - Dynamically generated FileUploads can't give options

> ID：15950638
> 
> 赞同：0
> 
> 时间：2013-04-11T13:54:21.683
> 
> 标签：c#, asp.net, file-upload, controls, findcontrol

I'm adding at my `ASPX` page some controls dynamically. I need to add dynamically them, because the amount of controls depends on database record.

I'm using `UpdatePanel` and adding controls dynamically like that:

```
void AddFileUploadFields()
{
    for (int i = 0; i < Helper.uploadFieldsCount; i++)
    {
        FileUpload fileUpload = new FileUpload();
        string controlId = DateTime.Now.Ticks.ToString();
        Thread.Sleep(10); // for non-equal ID for each control
        fileUpload.ID = controlId;
        uploadFormsId.Add(controlId);

        UpdatePanel1.ContentTemplateContainer.Controls.Add(fileUpload);
        PlaceHolder1.Controls.Add(fileUpload);
     }
} 
```

Then from the button, which was defined statically in asp-tag `<asp:Button ... />` I'm trying to handle the file info, which I want to upload:

```
void buttonUpload_Click(object sender, EventArgs e)
{
    var iEnum = uploadFormsId.GetEnumerator();
    List<UploadFormDetails> uploadsInfo = new List<UploadFormDetails>();
    List<string> generatedFileNames = new List<string>();
    bool wereErrors = false;

    while (iEnum.MoveNext())
    {
        FileUpload uploadForm = (FileUpload)FindControl(iEnum.Current.ToString());
        uploadsInfo.Add(new UploadFormDetails(uploadForm.ID, uploadForm.HasFile, uploadForm.FileName));
    }
...
} 
```

The main problem does occur here:

`FileUpload uploadForm = (FileUpload)FindControl(iEnum.Current.ToString());`

When I'm getting control like that, all options of it, like `.HasFile` or `.FileName` are unavailable to see. It just looks like a new control with no saved options. Of course, I'm selecting some file for the test, please don't think that I'm trying to upload from empty form.

How could i fix it? I can't upload any file...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:57:31.700

我找到了一个解决方案，但我得到的结果是以其他方式设计的，它不使用`Server controls`ASP.NET，我处理了普通`HTML`元素。

在 ASPX 页面中，我定义了：

```
<%
    for (int i = 0; i < Helper.uploadFieldsCount; i++)
    {
        Response.Write("<input type='file' id='uploadField" + i.ToString() + "' name='uploadField" + i.ToString() + "' class='file_1' /><br />");
    }
%> 
```

`runat`在页面的主窗体中定义，一开始：

```
<body>
    <form enctype="multipart/form-data" id="form1" runat="server">
... 
```

在`CodeBehind`我正在上传一个随机生成的名称的新文件，基于`GUID`：

```
void buttonUpload_Click(object sender, EventArgs e)
{
    List<string> generatedFileNames = new List<string>();
    bool wereErrors = false;

    for (int i = 0; i < Helper.uploadFieldsCount; i++)
    {
        HttpPostedFile filePosted = Request.Files["uploadField" + i.ToString()];

        if (filePosted != null && filePosted.ContentLength > 0)
        {
            string fileNameApplication = System.IO.Path.GetFileName(filePosted.FileName);
            string fileExtensionApplication = System.IO.Path.GetExtension(fileNameApplication);
            string newFile = Guid.NewGuid().ToString() + fileExtensionApplication;
            string filePath = System.IO.Path.Combine(Server.MapPath("uploads"), newFile);

            if (fileNameApplication != String.Empty)
            {
                generatedFileNames.Add(newFile);
                filePosted.SaveAs(filePath);
            }
       }
... 
```

# image - How to make a clickable image which invokes an action with parameters

> ID：15950643
> 
> 赞同：1
> 
> 时间：2013-04-11T13:54:33.737
> 
> 标签：image, jsf-2, commandlink

I want to have a clickable image which sends two parameters to my action on click. I tried the following with `<h:graphicImage>`.

```
<h:graphicImage url="/pic/down.png" alt="download">
    <h:outputLink action="#{file.download}">
        <f:param name="id" value="#{file.id}"></f:param>
        <f:param name="name" value="#{file.name}"></f:param>
    </h:outputLink>
</h:graphicImage> 
```

However, it didn't work. How do I properly achieve this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:17:44.587

如果您了解[基本的 HTML](http://www.htmldog.com/guides/htmlbeginner/)会更容易。纯 HTML 格式的可点击图片如下所示：

```
<a href="..."><img src="..." /></a> 
```

但是，您的 JSF 代码生成的是这样的（右键单击，在浏览器中*查看源代码*以查看它）：

```
<img src="..."><a href=" ..." /></img> 
```

这是[无效](http://validator.w3.org)的HTML。你需要交换它们。

此外，我不确定这是否是不小心摆弄/在黑暗中射击的结果，`action`但`<h:outputLink>`. 您可能打算使用`<h:commandLink>`.

所以，总而言之，这应该做：

```
<h:commandLink action="#{file.download}"> 
    <h:graphicImage value="/pic/down.png" alt="download" />
    <f:param name="id" value="#{file.id}" />
    <f:param name="name" value="#{file.name}" />
</h:commandLink> 
```

*（确保这是放置在`<h:form>`）*

`#{file}`但是，我不确定将属性传递回显然与`#{file}`您调用操作的实例完全相同的实例是否有意义。您也可以省略这些`<f:param>`内容并直接在操作方法中访问属性。

```
<h:commandLink action="#{file.download}"> 
    <h:graphicImage value="/pic/down.png" alt="download" />
</h:commandLink> 
```

# delphi - Delphi：在内存流中搜索字符串的最简单方法

> ID：15950649
> 
> 赞同：1
> 
> 时间：2013-04-11T13:54:51.700
> 
> 标签：delphi, delphi-xe2, pascal, memorystream, delphi-xe3

在内存流（和多个字符串）中搜索字符串并返回真或假的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:07:01.827

```
var ms:TMemoryStream;
    strS:TStringStream;
    aStr:string;
    aPos:integer;
    found:boolean;
begin
    ms:=TMemoryStream.Create;
    ms.LoadFromFile('c:\aFile.txt');
    strS:=TStringStream.Create;
    strS.LoadFromStream(ms);
    aPos:=pos(aStr,strS.dataString);
    found:=aPos>0;
end; 
```

TStringStream 是一个经常被遗忘但非常有用的工具 - 比使用 pChars 等更容易和更安全。

对于多个搜索，要么使用 pos、substring 等进行 ackwardly 循环，要么使用 RegEx。

这段代码在 Delphi XE 中运行良好，虽然 TStringStream 很旧 - 不确定它是否兼容 unicode。

（这个例子有漏洞——为了简洁起见，我省略了最终代码）

# javascript - Parsing an AJAX result with jquery

> ID：15950650
> 
> 赞同：0
> 
> 时间：2013-04-11T13:54:52.950
> 
> 标签：javascript, ajax, jquery

I know that many topics exist about that, but I didn't find a solution to my issue. I make an AJAX request, and I'd like to parse the result, and inject it in a table in my page.

```
$.ajax( {
        type    :   "GET",
        url     :   "http://keyserver.gingerbear.net/pks/lookup?",
        data    :   "search=john.smith@gmail.com&fingerprint=on&op=index",
        dataType:   "html",
        success :   function(resultat){
                        $(resultat).ready(function() {
                                $('pre',$(resultat).html()).each(function(){
                                var htmlString = $(this).html();
                                console.log("Key ID : "+/0x[a-z0-9]{16}/i.exec(htmlString));
                                console.log("User : "+$(this).find('a:eq(1)').text());
                                console.log("Bits : "+/[0-9]{4}[RD]/.exec(htmlString));
                                console.log("Data : "+/[0-9]{4}-[0-9]{2}-[0-9]{2}/.exec(htmlString));
                                console.log("Fingerprint : "+/Fingerprint=(.*)/.exec(htmlString));
                                });
                        });
                    },
        // Blabla
    } ); 
```

I saw [here](https://stackoverflow.com/questions/12362126/parse-ajax-html-response-and-append-result) the beginning of a solution. For example I can do console.log($(resultat).find('a')) and I have the content of the first , but console.log($(resultat).find('pre')) doesn't work...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:00:35.693

首先，您应该使用`jQuery` [load](http://api.jquery.com/load/)将外部内容加载到元素中。

要回答您的问题，您不能使用在表示您正在搜索的元素时`find`查找`pre`标记（在这种情况下）。但是，您可以搜索父元素，然后从父元素中使用。`$(this)``pre``pre``.find`

```
var parent = $(this).closest("#parentDiv");
var preChild = parent.find("pre").first(); 
```

# php - duplicate entry error in mysql - codeigniter

> ID：15950652
> 
> 赞同：0
> 
> 时间：2013-04-11T13:54:53.933
> 
> 标签：php, mysql, codeigniter

hey guys i have an error of duplicate entry in database . . whereas data can be duplicate..error is like

`Duplicate entry 'Years-1' for key 'term_type'`

the insert code is

```
INSERT INTO tbl_investment (member_id, investment_type, scheme_name, term, term_type, receipt_count, `investment_amount`, investment_date, maturity_amount, maturity_date) 
VALUES ('162', 'RD', 'hgyuuy', '2', 'Years', '1', '15000', '2013-04-11', '1000', '2013-04-11')` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:56:42.343

term_type 设置为唯一，因此不可能输入具有相同值的多行，因此错误！

# ios - Xcode 4.5.1 中的“找不到文件”、“链接器命令失败，退出代码为 1”

> ID：15950653
> 
> 赞同：36
> 
> 时间：2013-04-11T13:54:55.417
> 
> 标签：ios, unit-testing, linker-errors, file-not-found

我正在开发一个现有的 iOS 应用程序，我必须为这个项目编写单元测试用例。它正在模拟器 6.0 中构建和运行。**每当我尝试测试项目时，它都会显示下面的错误消息。**我无法弄清楚确切的错误。

```
id: file not found: /Users/Yuva/Library/Developer/Xcode/DerivedData/FlyApp-aexukpgtbathuadgxlnm/Build/Products/Debug-iphonesimulator/FlyApp.app/FlyApp
clag: error: linker command failed with exit code 1 (use -v to see invocation) 
```

你能帮我解决这个链接器错误并测试应用程序吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2014-10-12T15:14:16.083

解决步骤：

1.  创建具有不同名称的新方案
2.  删除旧方案

3.  添加新方案

问题出在哪里：

我更改了产品名称并禁用了快照选项。然后，突然，这个错误弹出：

`ld: file not found:.././previousproductname.app/previousproductname`

我未能成功调试的步骤：

1.  删除派生数据，重新启动 Xcode。- 没有解决。

2.  遵循以下步骤：链接[http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/](http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/) - 相同的错误；没有解决。

3.  最后，我更改了方案名称，删除了旧方案并添加了新方案，解决了我的问题。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-11-07T15:47:25.350

我遇到了同样的错误信息。原来我已经重命名了我的应用程序目标，并且没有将测试目标、构建设置、捆绑加载器设置更新为我的新应用程序名称。

可以在[使用 Xcode 4 将单元测试添加到现有 iOS 项目](http://twobitlabs.com/2011/06/adding-ocunit-to-an-existing-ios-project-with-xcode-4/)中找到有关此设置的更多详细信息。我查看了相同的步骤，它帮助我在 Xcode 5 中修复了我的项目。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-05-28T12:16:55.267

您必须更改了产品名称。由于您的工作区名称和产品（应用程序）名称不匹配，会发生此错误。

您只需在 ProjectName-Tests 目标的 TEST HOST Build 设置中将工作区名称替换为产品（应用程序）名称，如图所示。为了赶上这一点，选择 ProjectName-Tests 目标，选择 Build Settings，搜索 Test Host 术语。

![在此处输入图像描述](https://i.stack.imgur.com/SYWVg.png)

这是此错误的标准配置解决方案。

干杯！！

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-10-31T02:41:34.260

删除您的方案然后重新创建它（单击新图标或使用 xcode 的自动创建）。这个对我有用。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-09-22T07:33:12.107

在 xcode 6 上，您需要：

1.  转到产品文件夹
2.  点击文件 .xctext
3.  在“目标”上选择测试
4.  并在主机应用程序上选择您的应用程序。
5.  单击构建应用程序。

为我工作！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-23T23:50:44.420

啊！这是我的 XCode 8.2 突然出现的一个非常令人沮丧的问题

在我的情况下，它归结为从方案中删除我的测试目标，构建并运行主应用程序，然后将测试目标读取到“测试”部分。

似乎测试目标试图在尚未构建的派生数据中找到它想要的东西。在不尝试构建测试的情况下运行应用程序也可以准备以前丢失的派生数据。

...Insanity 在 XCode 中做同样的事情两次并期待同样的结果：|

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-11T15:46:14.410

您的链接器正在以下位置查找文件：/Users/Yuva/Library/Developer/Xcode/DerivedData/FlyApp-aexukpgtbathuadgxlnm/Build/Products/Debug-iphonesimulator/FlyApp.app/FlyApp

您是否按照路径确定文件是否存在？请注意，FlyApp.app 可能是一个包，如果您从 Finder 中查看，则必须“查看包内容”。如果它不存在，要么 1）您需要先构建 FlyApp.app，或者 2）您的测试代码中有一些东西取决于它是否存在，这无法从您的问题中确定。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-01T04:39:24.577

答案在于您的 Build Settings > Library Search Paths 条目。确保那里没有列出完全限定的路径。用 $SRCROOT 成语装饰它们，并用双引号将路径括起来。如果有任何转义反斜杠，请确保也将其删除。

做一个清洁然后构建，你应该重新开始工作。这似乎是 Xcode 5.x 的问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-13T15:30:22.060

创建一个新方案。捆绑包 id / 目标名称 / 可执行文件 / 项目名称等都是略有不同的概念。如果您更改一个（如我所做的那样），旧方案可能仍设置为查找旧值作为可执行文件的名称，而构建过程可能已更新为不再构建该可执行文件。

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2019-12-11T11:21:41.407

在 Xcode 11 中选择产品 -> 方案 -> 新方案

这对我有用。 [图片](https://i.stack.imgur.com/19ZTy.jpg)

# android - 在 ViewPagerIndicator 中滚动当前选项卡突出显示

> ID：15950655
> 
> 赞同：0
> 
> 时间：2013-04-11T13:54:56.217
> 
> 标签：android, android-viewpager, android-tabs, viewpagerindicator

目前，如果我在 Jake Wharton 的 ViewPagerIndicator 中使用 TabPageIndicator，则当前选项卡仅在 ViewPager 捕捉到单个片段时突出显示。我希望的是当我慢慢滑动 ViewPager 时下划线滑过，然后在我的滑动完成时卡入到位。

我可以使用 ViewPagerIndicator 完成此操作吗？如果是这样，怎么做？如果没有，是否有可能更适合的不同库？

我必须支持到 2.3 - 4.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:45:46.937

[当您从 PlayStore ( https://play.google.com/store/apps/details?id=com.viewpagerindicator.sample](https://play.google.com/store/apps/details?id=com.viewpagerindicator.sample) )安装 ViewPagerIndicator 演示时，您可以看到什么是可能的。目前我认为这是不可能的。仅当您实际切换选项卡时，该行才会更改。

但是，在我看来，当您想要使用标签时，它仍然是最好的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T09:44:52.407

也许你可以试试这个库：

[https://github.com/astuetz/PagerSlidingTabStrip](https://github.com/astuetz/PagerSlidingTabStrip)

# dropbox - Dropbox API、重命名和唯一 ID

> ID：15950659
> 
> 赞同：4
> 
> 时间：2013-04-11T13:55:02.807
> 
> 标签：dropbox, dropbox-api, dropbox-php

我知道这篇文章已经提到了[这一点](https://stackoverflow.com/questions/15209512/dropbox-file-unique-identifier-restful-api)，但我希望对此有更多的澄清。

目前，使用[Dropbox Core API](https://www.dropbox.com/developers/core/api)似乎没有办法跟踪已重命名的文件。例如，如果您使用 API 将 Dropbox app_folder 与本地应用程序目录同步。您在 Dropbox 端重命名文件，然后调用[`delta`](https://www.dropbox.com/developers/core/api#delta)以查看应如何更新本地应用程序目录，您将返回两个条目...

```
array(
    0 => '/somefile.txt',
    1 => null
),
array(
    0 => '/somefile-renamed.txt',
    1 => array(
        'revision' => 343
        'rev' => 'd90se4c661'
        'thumb_exists' => false
        'bytes' => 1263
        'modified' => 'Tue, 09 Apr 2013 19:06:39 +0000'
        'client_mtime' => 'Tue, 09 Apr 2013 18:43:06 +0000'
        'path' => string '/somefile-renamed.txt'
        'is_dir' => false
        'icon' => 'page_white_text'
        'root' => 'app_folder'
        'mime_type' => 'application/octet-stream'
        'size' => '1.2 KB'
    )
) 
```

对于返回的每个数组，第一个元素是需要更新的文件，第二个元素是文件元数据信息。如果第二个元素是`null`，您应该删除该文件的本地版本（以及它下面的任何内容，如果它是一个目录）。

所以，在上面的例子中，它告诉你删除第一个文件并上传这个全新的文件。不幸的是，无法跟踪您被告知创建的这个新文件实际上只是您被告知要删除的文件的重命名版本。从您的应用程序的角度来看（非 Dropbox 方面），它看起来就像是一个严格的删除和一个新文件的进来。

如果您将这些文件中的数据存储在其他地方（如数据库中）并且您需要更新记录而不是创建新记录并删除旧记录，这可能会出现问题。

重命名后是否有一些公认的方法来跟踪文件关联？我似乎找不到使用元数据、增量或修订的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:21:28.000

我认为 Dropbox 不知道重命名和删除/添加文件之间的区别。每次我重命名硬盘驱动器上本地 Dropbox 文件夹中的文件时，我都会立即看到旧文件重新出现，并带有“已删除”图标覆盖，而新文件显示“正在上传”图标。

通过比较已删除和创建的文件的内容（也许还比较时间戳），您可能能够以合理的准确度检测重命名，但即便如此它也是不确定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T21:03:21.877

不幸的是，通过 Dropbox API 跟踪文件重命名的唯一方法是存储您需要跟踪的每个文件的内容哈希。

这是我检测重命名的方法：

1.  打电话`/delta`，直到 Dropbox 告诉我退出。

2.  现在我有了一个完整的更改列表，将这个文件列表过滤为：

    *   更新文件
    *   删除的文件
    *   新文件
3.  读取每个新文件的内容并对其内容进行哈希处理。

4.  对于每个已删除的文件，查找您存储的哈希，然后将其与每个新文件的哈希进行检查。如果两个哈希匹配，则文件已被重命名。

NB 只有当您可以在用户修改文件的那一刻更新文件的哈希时，此技术才有效。如果您的应用使用 Dropbox webhook 并且用户不编辑*然后*在离线时移动文件，则这是可能的。

我希望 Dropbox 最终会通过他们的 API 公开文件重命名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T15:53:38.120

您可以找到一个重命名的文件，因为 client_mtime 和 filesize 重命名不变。这是一种 hack，但比检查哈希更容易。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-13T20:03:39.343

在保管箱中，如果您有一个文件并且想要重命名它，那么只需按照此逻辑即可解决您的问题。

1.  获取文件名称并更改它并将更改名称存储在字符串变量中。
2.  保留原始文件的父路径。
3.  使用从 String 变量获取的更改名称将文件移动到其他位置。
4.  现在将文件从新地方移回旧地方，

> ```
>  How to do it Programatically, 
> ```

```
 Entry global_file;//assign any file to it 
  String FilePath=global_file.path;
  String parent_path=global_file.parentPath();//Keep parent path 

    String ChanageName= "Your changed Name";
    parent_path=parent_path+""+ChanageName; //setting path for renamed file to move to its original place.

    Entry RenamedFile    = mApi.move(FilePath, "/"+ChanageName);  //move to new place "/"
    Entry MoveRenameFile = mApi.move(RenamedFile.path,parent_path); //move to previous location 
```

# linux - Linux 网络设备驱动程序

> ID：15950663
> 
> 赞同：-2
> 
> 时间：2013-04-11T13:55:08.767
> 
> 标签：linux, networking, network-programming, linux-kernel, linux-device-driver

我正在为 I/O 数据传输编写 Linux 驱动程序。数据传输应通过网络通信。所以，我需要将数据从内核传输到以太网端口。连接到网络 I/O 控制硬件的以太网端口。我该如何实施？我该如何为此编写驱动程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:11:15.083

1.  阅读 Linux 设备驱动程序书（第 3 版的第 17 章）的“网络驱动程序”部分。
2.  查看现有的网络驱动程序。
3.  了解您正在使用的硬件的详细信息。
4.  为您的硬件实施驱动程序。

如果您不熟悉内核开发的其他方面（例如 PCIe），那么我建议您阅读整本书。您可以在这里购买或在线阅读 — [http://lwn.net/Kernel/LDD3/](http://lwn.net/Kernel/LDD3/)

祝你好运！

# sorting - Grails 按日期对现有集合进行排序

> ID：15950664
> 
> 赞同：4
> 
> 时间：2013-04-11T13:55:11.290
> 
> 标签：sorting, grails

我正在尝试按 dateCreated desc 对集合进行排序，但我似乎做不到。

到目前为止我已经尝试过：

```
 postOrder.sort({
            dateCreated: 'desc'
        })

 postOrder.sort(dateCreated: 'asc') 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T14:00:09.833

试试这个：

```
postOrder.sort{ it.dateCreated } //asc

postOrder.sort{ it.dateCreated }.reverse() //desc 
```

# ruby-on-rails - YAML 文件中的类实例

> ID：15950667
> 
> 赞同：0
> 
> 时间：2013-04-11T13:55:21.970
> 
> 标签：ruby-on-rails, yaml

我在 Ubuntu 的 /opt 目录中有一个 test.yaml 文件，其中有我的数据库设置，我在 environment.rb 中获取该文件，如图所示

```
require File.expand_path('../application', __FILE__)
class Settings
raw_config = File.read("/opt/test.yml")
erb_config = ERB.new(raw_config).result
settings = YAML.load(erb_config)[::Rails.env]
 if settings
  settings.each  do |name, value|
  puts "checking array" , name, value
  instance_variable_set("@#{name}", value)
  self.class.class_eval { attr_reader name.intern }
 end
 end
end 
```

现在在 mongoid.yml 文件中，我想使用该类，如代码所示

```
development:
 sessions:
  default:
   hosts:
    -Settings.sessions["default"]["hosts"]
  username: ve
  password: "123456"
  database: weather 
```

但出现这样的错误 Moped::Errors::ConnectionFailure (Could not connect to any secondary or primary nodes for replica set ]>):

我是一个新人，卡在那里。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T09:30:57.580

**理论：**

他们的关键是删除`mongod.lock`文件并再次启动 mongodb 服务。Ubuntu 中的锁定文件位于`/var/lib/mongod.lock`.

**细节：**

我在 Ubuntu 下遇到了同样的错误，这就是我所做的：

> vagrant@lucid32:~$ sudo service mongodb restart
> restart: 未知实例：
> 
> vagrant@lucid32:~$ sudo rm /var/lib/mongod.lock
> 
> vagrant@lucid32:~$ sudo service mongodb start
> mongodb start/running, process 2340
> 
> vagrant@lucid32:~$ sudo service mongodb restart
> mongodb start/running, process 2368

# java - Eclipse Checkstyle 禁用“行有尾随空格”

> ID：15950671
> 
> 赞同：8
> 
> 时间：2013-04-11T13:55:38.497
> 
> 标签：java, eclipse, checkstyle

我在 Win 7 上使用 Eclipse。我也在使用 checkstyle 并发现 checkstyle 抱怨评论中的尾随空格。

我希望在 checkstyle 中禁用此检查，而不是对我的环境进行任何修改，因为我希望与办公室中的其他开发人员共享检查样式文件，以确保每个人都可以在相同的 checkstyle “light”中看到代码 :)

我对可以解决此问题的其他内置功能感到满意。我试过了：`Ctrl+Shift+F`和`Ctrl+Alt+C`。两者都不会自动修复尾随空格。

![在此处输入图像描述](https://i.stack.imgur.com/PXRzL.jpg)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T14:08:18.900

找到在checkstyle中禁用它的方法：

首选项 -> CheckStyle -> Regexp -> RegexpSingleLine（禁用）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T14:04:25.653

窗口->首选项->Java->编辑器->保存操作。

按**配置**按钮。

在**代码组织**选项卡上检查**删除尾随空格**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-15T11:38:24.363

我认为更好的解决方案是教 Checkstyle 忽略作为注释一部分的行中的尾随空格。

在`checkstyle.xml`：

```
<module name="RegexpSingleline">
    <property name="format" value="(?!\*)[^$]\s+$"/>
    <property name="minimum" value="0"/>
    <property name="maximum" value="0"/>
    <property name="message" value="Line has trailing spaces."/>
</module> 
```

这个块基本上说：“抱怨不包含星号`(?!\*)`的行，后跟非行尾`[^$]`，后跟一个或多个空格，`\s+`然后是行尾`$`”。

# python - Join split words and punctuation with punctuation in the right place

> ID：15950672
> 
> 赞同：5
> 
> 时间：2013-04-11T13:55:38.760
> 
> 标签：python, join, split, punctuation

So I tried using `join()` after splitting a string into words and punctuation but it joins the string with a space in between the word and punctuation.

`b = ['Hello', ',', 'who', 'are', 'you', '?']
c = " ".join(b)`

But that returns:
`c = 'Hello , who are you ?'`

and I want:
`c = 'Hello, who are you?'`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T14:02:50.843

您可以先加入标点符号：

```
def join_punctuation(seq, characters='.,;?!'):
    characters = set(characters)
    seq = iter(seq)
    current = next(seq)

    for nxt in seq:
        if nxt in characters:
            current += nxt
        else:
            yield current
            current = nxt

    yield current

c = ' '.join(join_punctuation(b)) 
```

生成器`join_punctuation`生成的字符串已经加入了任何以下标点符号：

```
>>> b = ['Hello', ',', 'who', 'are', 'you', '?']
>>> list(join_punctuation(b))
['Hello,', 'who', 'are', 'you?']
>>> ' '.join(join_punctuation(b))
'Hello, who are you?' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:03:03.867

在得到结果后执行此操作，不完整，但有效......

```
c = re.sub(r' ([^A-Za-z0-9])', r'\1', c) 
```

输出：

```
c = 'Hello , who are you ?'
>>> c = re.sub(r' ([^A-Za-z0-9])', r'\1', c)
>>> c
'Hello, who are you?'
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T14:07:52.783

也许是这样的：

```
>>> from string import punctuation
>>> punc = set(punctuation) # or whatever special chars you want
>>> b = ['Hello', ',', 'who', 'are', 'you', '?']
>>> ''.join(w if set(w) <= punc else ' '+w for w in b).lstrip()
'Hello, who are you?' 
```

`b`这会在不完全由标点符号组成的单词之前添加一个空格。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-11T14:01:58.667

怎么样

```
c = " ".join(b).replace(" ,", ",") 
```

# c# - 将字符串值传递给双数组c#

> ID：15950673
> 
> 赞同：0
> 
> 时间：2013-04-11T13:55:39.877
> 
> 标签：c#

我目前有一个应用程序以字符串形式读回文本文件的内容。我想将所有这些值放在我创建的双数组中，但似乎无法让它在这里工作是我的代码：

```
using (StreamReader sr = new StreamReader("test.txt"))
{
    String line =  sr.ReadToEnd();
    x = doubles;
    Console.WriteLine(x);
} 
```

每次我运行它时，我都会收到错误“无法读取文件：输入字符串的格式不正确”有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:57:31.883

```
bool bSuccess;
double value;
bSuccess = double.TryParse("3.14", out value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:20:51.670

确保您的文件路径已针对 StreamReader 进行了删除，仅说明没有明显位置的“test.txt”不会访问您尝试从中读取的文件。

# ruby-on-rails - Where do I see the reason of a "Internal server error" when running Rails request specs?

> ID：15950677
> 
> 赞同：6
> 
> 时间：2013-04-11T13:56:00.627
> 
> 标签：ruby-on-rails, rspec

I have an "Internal server error" in one of my request specs (RSpec2 and Capybara), and I just don't know where to get more information about it. I've taken a look at the test.log, but there's no particular info about the problem, there's info about Rails rendering a 500 message.

Is this normal behavior? Where can I find more info? **Somewhere** Rails has to tell me what's wrong, doesn't it?

Thanks a lot for help, this one is driving me nuts.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T20:34:54.690

不幸的是，这是正常行为。然而，好消息是许多人似乎已经找到了某些解决方法。请参阅： [使用 capybara 和 selenium 获取要显示的 Rails 异常](https://stackoverflow.com/questions/4627928/get-rails-exceptions-to-show-using-capybara-and-selenium)

此外，您可以看到这里讨论的问题：[https ://github.com/jnicklas/capybara/issues/303](https://github.com/jnicklas/capybara/issues/303)

# php - Does Apache-Solr have a timeout if Solr is not reachable?

> ID：15950678
> 
> 赞同：1
> 
> 时间：2013-04-11T13:56:03.190
> 
> 标签：php, solr

I am using solr-php-client [https://code.google.com/p/solr-php-client/](https://code.google.com/p/solr-php-client/)

Does it have a timeout option that I can manually set? Because whenever Solr (webSolr) is unreachable, I'm having problems Even if the `$solr->search()` call is within a Try Catch block.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:02:58.423

在任何请求之前总是`PING`solr 服务器`insert/select/update/delete`

```
 $solr = new Apache_Solr_Service($hostname, $portname,$core);

 if(!$solr->ping())
 {
    echo "server not responding";
    exit;
 }

 $solr->search($basicQuery, $start_limit,$end_limit,$params); 
```

# ruby-on-rails - Gender method not accessible in rails, even though it's in the table

> ID：15950680
> 
> 赞同：0
> 
> 时间：2013-04-11T13:56:04.533
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

So I'm trying to set a conditional statement for what images should be displayed

This is the section in my home/index view file

```
<% if @cloth.gender == "Female" && @cloth.size == "2T-3T" || "4T-5T" %> 
```

This returns an error in the browser:

```
undefined method `gender' for #<Array:0x4d2c578> 
```

I set the home controller to:

```
def index
  @cloth = Cloth.all
end 
```

So it should be able to access all of "cloth", but it isn't. When I go into the rails console I can access cloth.gender. Not sure what to do here...

Entire code available at [https://github.com/yahtaa/oslr](https://github.com/yahtaa/oslr)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:01:29.610

更好的方法是使用`each`@cloths 上的方法：

```
<% @cloths.each do |cloth| %<
  <% if cloth.gender == "Female" && cloth.size == "2T-3T" || "4T-5T" %>
.... 
```

注意我说@cloths ...您可能应该将您的索引def更改为`@cloths = Cloth.all`（只是让您的代码更清晰一些）。

编辑

如评论和codeit的答案中所示，您最初编写的条件存在问题。另一种写法是

```
<% if cloth.gender == "Female" && (cloth.size == "2T-3T" || cloth.size == "4T-5T") %> 
```

感谢 codeit 发现了这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:29:03.450

尝试这个：

```
 @cloths.each do |cloth|
   if cloth.gender == "Female" && ["2T-3T", "4T-5T"].include?(cloth.size)
      #Or use  `if cloth.gender == "Female" && (cloth.size == "2T-3T" || cloth.szie == "4T-5T")`
   ..
 end 
```

`(cloth.size == "2T-3T" || "4T-5T")``cloth.size`当value 为时将返回 false `4T-5T`。因为`"2T-3T" || "4T-5T"`总是`2T-3T`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T13:59:44.747

`Cloth.all` will return an instance of an `Array`. You'll need to either use `each` to iterate over all the instances that `Cloth.all` returns, or grab an instance with `@cloth[0]`, for example.

# php - 停止页面内操作的 Jquery 模式对话框

> ID：15950684
> 
> 赞同：2
> 
> 时间：2013-04-11T13:56:15.483
> 
> 标签：php, jquery, modal-dialog

我已经查看了很多关于 jquery 模态对话框的页面，但仍然没有找到我需要的东西。

如果用户进行更改并单击我们网站上的内部链接，我希望弹出一个对话框，其中包含 3 个按钮选项——保存、放弃和取消。如果他们点击保存，它会调用保存函数，然后离开页面。

但是该页面设置有选项卡，每个选项卡将不同的 php 页面加载到母版页中。这些链接不是硬链接，它们不会重新加载页面。它们就像页面内锚链接（然后加载一个 php 页面）。所以我无法捕获锚请求并稍后将其发送到地址栏。

我已经有对话框，设置为模态。但是现在，当我单击另一个选项卡时，它会加载该选项卡，并同时弹出我的对话框。我希望它在单击对话框中的按钮之前不加载选项卡。

confirm() 函数完美地做到了这一点。但是我的模态对话框允许加载另一个选项卡。你能帮我设置一个模态对话框，在这种情况下像确认函数一样工作吗？

这是我的 Javascript 函数：

```
 function fw_chkTabStatusFmla() {
        if (jsg_fwTabWatchFmla == false) {

           $(function() {
              $( "#tabWarnFmla" ).dialog({
                  resizable: false,
                  height:240,
                  width:400,
                  modal: true,
                  buttons: {
                    Cancel: function() {
                      $( this ).dialog( "close" );
                    },
                    "Discard": function() {
                            $( this ).dialog( "close" );
                           //discard changes and continue
                    },
                    "Save": function() {
                            $( this ).dialog( "close" );
                           //function to save changes and continue
                    },
                  }
              });
          });
      }
 } 
```

这是我用的旧的。它正确地停止了行为，但只允许两个按钮。

```
 function fw_chkTabStatusFmla() {
        if (jsg_fwTabWatchFmla == false) {
            var x = confirm("If you leave this tab without saving you may lose your changes.\n\nClick 'OK' to proceed without saving.");
            if (x == true)         {
                jsg_fwTabWatchFmla = true;
                setConfirmUnload(false);
                return true;
            } else {
                return false;
            }
        }
    } 
```

在相关字段中进行更改时，我将 jsg_fwTabWatchFmla 变量设置为 false。

这是我必须运行该功能的内容。

```
 $(document).ready( function() {
            $('#tabs').tabs({
            select: function(event, ui) {                    
                return fw_chkTabStatusFmla();
            }
            });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:08:56.197

我认为您将需要更改选项卡的操作。我不确定您使用的是什么选项卡插件。但是对于 jQuery UI 选项卡，我会使用这种方法：

[http://api.jqueryui.com/tabs/#event-beforeActivate](http://api.jqueryui.com/tabs/#event-beforeActivate)

beforeActivate( event, ui )类型：tabsbeforeactivate

激活选项卡后直接触发。可以取消以防止选项卡激活。如果选项卡当前已折叠，则 ui.oldTab 和 ui.oldPanel 将是空的 jQuery 对象。如果选项卡正在折叠，则 ui.newTab 和 ui.newPanel 将是空的 jQuery 对象。

# javascript - JavaScript if statement

> ID：15950685
> 
> 赞同：0
> 
> 时间：2013-04-11T13:56:15.717
> 
> 标签：javascript, if-statement

Is there anyway to do this:

```
 if (document.getElementById("x").value == 2 || document.getElementById("x").value == 3) {
         //Do somthing
    } 
```

# Can I make it simple in some kind a way like this, I tried but it didn't work:

```
 if (document.getElementById("x").value == 2 || 3) {
         //Do somthing
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T13:58:25.307

就像其他答案的替代方案一样，如果您出于某种原因不想在该范围内声明另一个变量：

```
if (["2", "3"].indexOf(document.getElementById("x").value) > -1) {
    // Do something
} 
```

请注意，较旧的浏览器不支持`Array.prototype.indexOf`，因此您需要包含[一个 polyfill](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)来处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:01:03.150

有些不同：

```
if (document.getElementById("x").value in {2:0,3:0}) {
    //Do something
} 
```

我个人在这种情况下使用它 - 它通常实际上是最短的（尤其是当“OR”堆积时）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T13:57:39.540

您建议的方式行不通，因为您已经意识到自己。该`|| 3`部分将始终为[真](http://11heavens.com/falsy-and-truthy-in-javascript)，因此 if 语句中的代码将始终运行。

如果要使 if 语句更具可读性，可以将值保存在变量中，并在 if 语句中使用该变量。像这样的东西：

```
var xVal = document.getElementById("x").value;
if (xVal == 2 || xVal == 3) {
     //Do somthing
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:01:59.430

像下面这样尝试它会帮助你

**小提琴：http:** [//jsfiddle.net/RYh7U/129/](http://jsfiddle.net/RYh7U/129/)

**脚本：**

```
var value = document.getElementById("x").value;
if ((value in [,1,2]))
alert("Do SomeThing"); 
```

**完整脚本：**

```
<html>
<head>
<script type='text/javascript'>

function check()
{
   var value = document.getElementById("txtin").value;
   if ((value in [,1,2,3]))
     alert("Do SomeThing");
}

</script>
</head>
<body>
    <a href="#" onclick='check()'>check</a>
    <input type="text" id="txtin"/>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T14:02:09.833

尝试这个

```
var x=document.getElementById("x").value;

if (x == 2 || x == 3) {
         //Do somthing
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T13:57:44.353

你可以事先得到这个值，这会让它读起来更清楚

```
var yourValue = document.getElementById("x").value

if (yourValue == 2 || yourValue == 3) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-11T13:57:51.927

```
var myValue = document.getElementById("x").value;

if(myValue == 2 || myValue == 3) {
    //...
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-11T13:59:15.563

使用现代浏览器：

```
if( [2,3].indexOf(document.getElementById('x').value) > -1) 
```

旧版本的 IE 将需要一个 shim 来实现这一点。或者您可以自己实现它：

```
function in_array(needle,haystack) {
    var l = haystack.length, i;
    for( i=0; i<l; i++) {
        if( haystack[i] == needle) return true;
    }
    return false;
}
// ...
if( in_array(document.getElementById('x').value,[2,3])) { 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-11T13:59:22.170

如果你想在值为 2 或 3 时做某事，你只需要写

```
if (document.getElementById("x").value == 2 || document.getElementById("x").value == 3) {
    //Do something
} 
```

# c# - Converting daily event times to "Mon-Fri 10:00-10:30AM" format

> ID：15950686
> 
> 赞同：2
> 
> 时间：2013-04-11T13:56:15.770
> 
> 标签：c#, algorithm, time, formatting

I have a table that stores daily activities, e.g., "Morning Meeting." These activities take place on single or multiple days of every week at varying times during the day. I need an algorithm for producing a "nice" description of an activity time. Currently, I'm working with this data structure:

```
public class DailyActivityTime
{
    public int WeeklyActivityTimeId { get; set; }
    public bool Sunday { get; set; }
    public string SundayStartTime { get; set; }
    public string SundayEndTime { get; set; }
    public bool Monday { get; set; }
    public string MondayStartTime { get; set; }
    public string MondayEndTime { get; set; }
    public bool Tuesday { get; set; }
    public string TuesdayStartTime { get; set; }
    public string TuesdayEndTime { get; set; }
    public bool Wednesday { get; set; }
    public string WednesdayStartTime { get; set; }
    public string WednesdayEndTime { get; set; }
    public bool Thursday { get; set; }
    public string ThursdayStartTime { get; set; }
    public string ThursdayEndTime { get; set; }
    public bool Friday { get; set; }
    public string FridayStartTime { get; set; }
    public string FridayEndTime { get; set; }
    public bool Saturday { get; set; }
    public string SaturdayStartTime { get; set; }
    public string SaturdayEndTime { get; set; }
    public bool Biweekly { get; set; }
    public string DisplayText { get; set; }
} 
```

The `Start` and `End` times are persisted to SQL Server (2008 R2) as `TIME` data type (hence coming into the C# code as `TimeSpan`), and the `bool` properties are, of course, `BIT`. I want to write the conversion-to-description code in C# in the `DailyActivityTime` class itself, either in the constructor or in the `DisplayText` property getter.

So, for example, say the Morning Meeting activity occurs as follows:

```
Monday: 10:00-10:30AM  
Tuesday: 10:00-10:30AM  
Wednesday: 10:00-10:30AM  
Thursday: 10:00-10:30AM  
Friday: 10:00-10:30AM  
Saturday: 5:00-6:00PM  
Sunday: 5:00-6:00PM 
```

I need this example to be displayed as:

```
Mon-Fri 10:00-10:30 AM, Sat & Sun 5:00-6:00 PM 
```

Some basic facts:

1.  An activity can only occur once on any given day. I.e., the Morning Meeting cannot occur twice on Tuesday.
2.  Activities that occur on more than two days in a week that are not in sequence can be displayed in a comma-separated list, e.g., `Mon, Wed, Fri 1:00-1:30 PM`.
3.  Activities that are marked `Biweekly` would appear as "Every other..." and do not occur more than one day per week, e.g., `Every other Thurs 3:00-3:45 PM`.
4.  Though I've created the table and the related class for this entity already, I'm totally open to storing this data in a different format if there's a better solution.

I'm pretty sure I can figure this out by assigning an integer sequence to each day of the week and then comparing times, but it seems like there might be a better algorithm for this, possibly utilizing the `TimeSpan` structure. Anyone have any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:22:07.847

[时间段](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)库可以帮助您解决这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:20:10.713

我认为如果你每天维护一个类，在你的类中有一个数组，并使用索引器访问它们，你会发现你的代码更容易使用：

```
public class ActivityDay
{
    public bool Active { get; set; }
    public string StartTime { get; set; }
    public string EndTime { get; set; }
}

public class DailyActivityTime
{
    public int WeeklyActivityTimeId { get; set; }
    public bool Biweekly { get; set; }
    public string DisplayText { get; set; }
    private ActivityDay[] _days = new ActivityDay[7];

    public ActivityDay this[int day]
    {
        get { return _days[day]; }
        set { _days[day] = value; }
    }
} 
```

So `Sunday`become `foo[0]`, `Monday`is`foo[1]`等。想想看，您可以使用[DayOfWeek 枚举](http://msdn.microsoft.com/en-us/library/system.dayofweek.aspx)作为索引。

您可以创建`ActivityDay`一个结构，但随后您会遇到相当不方便的值语义。

# c++ - 最佳实践：如何在 C/C++ 中检查 NULL 返回值

> ID：15950688
> 
> 赞同：0
> 
> 时间：2013-04-11T13:56:20.117
> 
> 标签：c++, c, null

这是 C 和 C++ 的风格问题。你比较喜欢哪个

```
void f() {
  const char * x = g();
  if (x == NULL) {
    //process error
  }
  // continue function
} 
```

或这个：

```
void f() {
  const char * x = g();
  if (! x) {
    //process error
  }
  // continue function
} 
```

? 前者更清晰，但后者不那么冗长。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T14:02:11.487

这主要取决于您的工作组中*采用的约定。*

由于该表单对于习惯使用它的开发人员来说可能更清晰，因此对于习惯使用布尔形式`!= NULL`检查值的开发人员来说，反之亦然。`NULL`

正如*@Andy Prowl*提到的那样，C++11 中通过使用`nullptr`type :出现了一个更清晰的版本`if (x == nullptr)`。如果您正在编写 C++11 应用程序，那么团队中的每个成员都应该使用这种表示法作为惯例。

最后，存在几乎使用的不同模式，例如[`Null Object Pattern`](http://en.wikipedia.org/wiki/Null_Object_pattern)避免在代码中的任何地方进行此检查，以防此检查涉及您的应用程序的特定习惯。

# javascript - Logic of using jQuery .one

> ID：15950691
> 
> 赞同：3
> 
> 时间：2013-04-11T13:56:31.643
> 
> 标签：javascript, optimization, jquery

Using jQuery's [.one](http://api.jquery.com/one/) event handler to do a setup on the first click and something else on the next/subsequent clicks, is it possible to do write this more elegantly:

```
$('#start').one('click', function(){
    alert('one');

    // could also be .on for subsequent clicks
    $(this).one('click', function(){
        alert('two');    
    });

}); 
```

[Example fiddle](http://jsfiddle.net/vjHXb/)

**Update**: I was hoping that there was a jQuery pattern to using .one like this [self-defining function](http://jsfiddle.net/P6Zyy/1/), but reading [the source for .one()](http://james.padolsey.com/jquery/#v=git&fn=jQuery.fn.one) it's just an extension of .on()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:05:07.400

```
var clickIndex = 0;
$('#start').on('click', function(){
    alert(++clickIndex);
}); 
```

您可以在此处放置一个`switch`语句或一个`if`块以根据用户单击的次数运行不同的代码。如果`.one`侦听器取消绑定对您来说很重要，只需使用`.off`when`clickIndex`表示您已完成绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:15:38.630

也许是这样的：

```
$('#start').on('click', function(){
    var click = $(this).data('clicked')?$(this).data('clicked'):1;
    alert(click);
    if(click === 2)
        $(this).off('click')
    else $(this).data('clicked',++click);    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:00:21.563

我认为在这种情况下，您可以只使用数据属性或类并使用点击事件：

```
$('#start').on('click', function(){
    if (!$(this).data('clicked')) {
      alert('one');
      $(this).data('clicked', 'true');
    }
    else  {
      alert('more than one');
    }
}); 
```

或上课：

```
$('#start').on('click', function(){
    if (!$(this).hasClass('clicked')) {
      alert('one');
      $(this).addClass('clicked');
    }
    else  {
      alert('more than one');
    }
}); 
```

# c# - Boxing and Performance

> ID：15950692
> 
> 赞同：-6
> 
> 时间：2013-04-11T13:56:37.143
> 
> 标签：c#, .net

Could someone expand the spectrum of the samples of boxing and performance in .NET?

This sample is clear for me, but are there other cases?

*Code optimization flow*

**BAD CODE**

```
void CountVer1(int max)
{
    for (int i = 1; i <= max; i++)
    {
        Console.WriteLine("{0} out of {1}",
            i, max);
    }
} 
```

**GOOD CODE**

```
void CountVer2(int max)
{
    object maxObj = max;
    for (int i = 1; i <= max; i++)
    {
        Console.WriteLine("{0} out of {1}",
            i, maxObj);
    }
} 
```

**IDEAL CODE**

```
void CountVer3(int max)
{
    for (int i = 1; i <= max; i++)
    {
        Console.WriteLine("{0} out of {1}",
            i.ToString(), max.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:32:06.560

装箱被认为很慢，因为它意味着对象的分配。在您的情况下，该对象是短暂的（可能无法在 Gen0 中存活），这使得它很便宜。我最近做了一个微基准测试，将生成一个短寿命对象的成本放在大约 15 个 CPU 周期。在实际应用中成本可能会高一些，但拳击并不那么昂贵。

您应该避免在性能关键代码中进行分配。但这意味着每秒调用超过 1000 万次的代码。

如果您对上面的代码进行基准测试，您会发现这`Console.WriteLine`是昂贵的部分，优化这两个框的影响可以忽略不计。

在优化程序的性能时，我会：

1.  配置文件以识别瓶颈。但是 99% 的代码性能不是问题
2.  将其重写为您希望更好的版本
3.  再次对其进行分析，并验证性能改进是否显着。如果不是，请恢复为更简单的代码，或尝试其他变体。

# objective-c - Custom pin on MKMapView in iOS?

> ID：15950698
> 
> 赞同：4
> 
> 时间：2013-04-11T13:56:50.367
> 
> 标签：objective-c, annotations

I have tried just about everything to get an image displayed instead of the default red pin on my MKMapView.

**There are a lot of answers about this on the internet but all of them keep giving me this:**

* * *

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{
    if([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    NSString *annotationIdentifier = @"CustomViewAnnotation";
    MKAnnotationView* annotationView = [mapview dequeueReusableAnnotationViewWithIdentifier:annotationIdentifier];
    if(!annotationView)
    {
        annotationView = [[MKAnnotationView alloc] initWithAnnotation:annotation
                                                      reuseIdentifier:annotationIdentifier]];
    }
    annotationView.image = [UIImage imageNamed:@"map_location_pin.png"];
    annotationView.canShowCallout= YES;

    return annotationView;
} 
```

* * *

This doesn't help me at all, its just a method by the looks of it.

Please tell me how to use this to make the method return a annotation with a custom image. Just about all the other answers tell me to implement that method with no further explaination.

**Where do I call it? How do I call it?**

Thanks!

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T12:22:59.050

**我自己设法解决了这个问题，这是我在 4 个步骤中所做的：**

**第 1 步：您必须将地图视图的委托设置为 ViewController：**

*MapViewController.h*

```
 @interface MapViewController : UIViewController <MKMapViewDelegate> {
        IBOutlet MKMapView *mapView;
    }
@property (nonatomic, nonatomic) IBOutlet MKMapView *mapView; 
```

* * *

*MapViewController.m*

```
- (void)viewDidLoad
{    
    [super viewDidLoad];
    [mapView setDelegate:self];
} 
```

* * *

**第二步：实现方法：**

*MapViewController.m*

```
-(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation {
    MKPinAnnotationView *MyPin=[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"current"];
    //MyPin.pinColor = MKPinAnnotationColorPurple;

UIButton *advertButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[advertButton addTarget:self action:@selector(button:) forControlEvents:UIControlEventTouchUpInside];

/*MyPin.rightCalloutAccessoryView = advertButton;
 MyPin.draggable = YES;

 MyPin.animatesDrop=TRUE;
 MyPin.canShowCallout = YES;*/
MyPin.highlighted = NO;
MyPin.image = [UIImage imageNamed:@"myCustomPinImage"];

return MyPin;
} 
```

**Step3：创建一个名为“Annotation”（或任何其他名称）的类**

*注释.h*

```
#import <Foundation/Foundation.h>
#import <MapKit/MKAnnotation.h>

@interface Annotation : NSObject <MKAnnotation> {

    CLLocationCoordinate2D coordinate;
    NSString *title;
    NSString *subtitle;

}

@property(nonatomic, assign) CLLocationCoordinate2D coordinate;
@property(nonatomic, copy) NSString *title;
@property(nonatomic, copy) NSString *subtitle;

@end 
```

* * *

*注释.m*

```
#import "Annotation.h"

@implementation Annotation
@synthesize coordinate, title, subtitle;

@end 
```

**第 4 步：添加注释，您将拥有自定义图像！**

*MapViewController.m*

```
MKCoordinateRegion Bridge = { {0.0, 0.0} , {0.0, 0.0} };
        Bridge.center.latitude = [[[testArr objectAtIndex:updates] objectAtIndex:1] floatValue];
        Bridge.center.longitude = [[[testArr objectAtIndex:updates] objectAtIndex:0] floatValue];
        Bridge.span.longitudeDelta = 0.01f;
        Bridge.span.latitudeDelta = 0.01f;

        Annotation *ann = [[Annotation alloc] init];
        ann.title = @"I'm a pin";
        ann.subtitle = @"Your subtitle";
        ann.coordinate = Bridge.center;
        [mapView addAnnotation:ann]; 
```

我希望这有帮助！

# mysql - MySQL 5.5.30 cascaded triggers not working

> ID：15950702
> 
> 赞同：11
> 
> 时间：2013-04-11T13:57:00.990
> 
> 标签：mysql, dml, triggers

For some reason, on a MySQL 5.5.30 machine, a trigger which deletes a row from a second table does no longer fire the delete trigger on the second table.

This works perfectly on our local MySQL version 5.5.25

I did not find any documentation that would explain this behaviour, does somebody maybe have an equal problem?

This is either a bug which occurs in MySQL version greater than 5.5.25 or a "feature" which is enabled accidently.

```
UPDATE table1 => fires BEFORE UPDATE trigger ON table1
      table1 BEFORE UPDATE TRIGGER executes: DELETE FROM table2 => should fire BEFORE DELETE trigger on table2 ( but doesn't )
            table 2 BEFORE DELETE TRIGGER executes: DELETE FROM table3 (never happens) 
```

**OK here my reproduce steps:**

**Database**

```
CREATE DATABASE "triggerTest" DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci; 
```

**Tables**

```
CREATE TABLE "table1" (
  "id" int(11) NOT NULL AUTO_INCREMENT,
  "active" tinyint(1) NOT NULL DEFAULT '0',
  "sampleData" varchar(100) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  PRIMARY KEY ("id")
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci ROW_FORMAT=DYNAMIC;

CREATE TABLE "table2" (
  "id" int(11) NOT NULL AUTO_INCREMENT,
  "table1_id" int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY ("id"),
  CONSTRAINT "test2_fk_table1_id" FOREIGN KEY ("table1_id") REFERENCES "table1" ("id") ON DELETE CASCADE ON UPDATE CASCADE  
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci ROW_FORMAT=DYNAMIC;

CREATE TABLE "table3" (
  "id" int(11) NOT NULL AUTO_INCREMENT,
  "table1_id" int(11) NOT NULL DEFAULT '0',
  PRIMARY KEY ("id"),
  CONSTRAINT "test3_fk_table1_id" FOREIGN KEY ("table1_id") REFERENCES "table1" ("id") ON DELETE CASCADE ON UPDATE CASCADE  
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci ROW_FORMAT=DYNAMIC; 
```

**Triggers**

```
DELIMITER $$

CREATE TRIGGER "table1_rtrg_AI" AFTER INSERT ON "table1" FOR EACH ROW
BEGIN
    IF NEW."active" THEN
        INSERT INTO "table2" ( "table1_id" ) SELECT NEW."id";
    END IF;
END$$

CREATE TRIGGER "table1_rtrg_BU" BEFORE UPDATE ON "table1" FOR EACH ROW
BEGIN
    IF NOT NEW."active" AND OLD."active" THEN
        DELETE FROM "table2" WHERE "table1_id" = OLD."id";
    END IF;

    IF NEW."active" AND NOT OLD."active" THEN
        INSERT INTO "table2" ( "table1_id" ) SELECT NEW."id";
    END IF;
END$$

CREATE TRIGGER "table2_rtrg_AI" AFTER INSERT ON "table2" FOR EACH ROW
BEGIN
    INSERT INTO "table3" ( "table1_id" ) SELECT NEW."table1_id";
END$$

CREATE TRIGGER "table2_rtrg_BD" BEFORE DELETE ON "table2" FOR EACH ROW
BEGIN
    DELETE FROM "table3" WHERE "table1_id" = OLD."table1_id";
END$$

DELIMITER ; 
```

**Q: Why do you quote identifiers using double quotes? (instead of backticks)**

Because I don't like "niche syntax"

```
 mysql> show variables LIKE 'sql_mode';
+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------+
| Variable_name | Value                                                                                                                                                |
+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------+
| sql_mode      | PIPES_AS_CONCAT,**ANSI_QUOTES**,IGNORE_SPACE,NO_UNSIGNED_SUBTRACTION,STRICT_ALL_TABLES,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION |
+---------------+------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

**Testcase 1: Expected behaviour (database version 5.2.20)**

```
mysql> SELECT VERSION();
+-----------+
| VERSION() |
+-----------+
| 5.5.20    |
+-----------+
1 row in set (0.00 sec)

mysql> SET GLOBAL general_log := ON; 
```

**testing insert trigger**

```
mysql> INSERT INTO "table1" ( "active", "sampleData" ) SELECT 0, 'sample data row 1';
Query OK, 1 row affected (0.00 sec)
Records: 1  Duplicates: 0  Warnings: 0

general_log: 
130423 12:51:27 78010 Query     INSERT INTO "table1" ( "active", "sampleData" ) SELECT 0, 'sample data row 1'

mysql> INSERT INTO "table1" ( "active", "sampleData" ) SELECT 1, 'sample data row 2';
Query OK, 1 row affected (0.00 sec)
Records: 1  Duplicates: 0  Warnings: 0

general_log:
130423 12:51:33 78010 Query     INSERT INTO "table1" ( "active", "sampleData" ) SELECT 1, 'sample data row 2'
                78010 Query     INSERT INTO "table2" ( "table1_id" ) SELECT NEW."id"
                78010 Query     INSERT INTO "table3" ( "table1_id" ) SELECT NEW."table1_id" 
```

**expected table contents:**

```
mysql> SELECT * FROM "table1";
+----+--------+-------------------+
| id | active | sampleData        |
+----+--------+-------------------+
|  1 |      0 | sample data row 1 |
|  2 |      1 | sample data row 2 |
+----+--------+-------------------+
2 rows in set (0.00 sec)

mysql> SELECT * FROM "table2";
+----+-----------+
| id | table1_id |
+----+-----------+
|  1 |         2 |
+----+-----------+
1 row in set (0.00 sec)

mysql> SELECT * FROM "table3";
+----+-----------+
| id | table1_id |
+----+-----------+
|  1 |         2 |
+----+-----------+
1 row in set (0.00 sec) 
```

**testing update trigger, set active**

```
mysql> UPDATE "table1" SET "active" = 1 WHERE "id" = 1;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

query_log:
130423 12:52:15 78010 Query     UPDATE "table1" SET "active" = 1 WHERE "id" = 1
                78010 Query     INSERT INTO "table2" ( "table1_id" ) SELECT NEW."id"
                78010 Query     INSERT INTO "table3" ( "table1_id" ) SELECT NEW."table1_id" 
```

**expected table contents:**

```
mysql> SELECT * FROM "table1";
+----+--------+-------------------+
| id | active | sampleData        |
+----+--------+-------------------+
|  1 |      1 | sample data row 1 |
|  2 |      1 | sample data row 2 |
+----+--------+-------------------+
2 rows in set (0.00 sec)

mysql> SELECT * FROM "table2";
+----+-----------+
| id | table1_id |
+----+-----------+
|  2 |         1 |
|  1 |         2 |
+----+-----------+
2 rows in set (0.00 sec)

mysql> SELECT * FROM "table3";
+----+-----------+
| id | table1_id |
+----+-----------+
|  2 |         1 |
|  1 |         2 |
+----+-----------+
2 rows in set (0.00 sec) 
```

**testing update trigger, set inactive**

```
mysql> UPDATE "table1" SET "active" = 0 WHERE "id" = 2;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

query_log:

130423 12:52:49 78010 Query     UPDATE "table1" SET "active" = 0 WHERE "id" = 2
                78010 Query     DELETE FROM "table2" WHERE "table1_id" = NEW."id"
                78010 Query     DELETE FROM "table3" WHERE "table1_id" = OLD."table1_id" 
```

**expected table contents:**

```
mysql> SELECT * FROM "table1";
+----+--------+-------------------+
| id | active | sampleData        |
+----+--------+-------------------+
|  1 |      1 | sample data row 1 |
|  2 |      0 | sample data row 2 |
+----+--------+-------------------+
2 rows in set (0.00 sec)

mysql> SELECT * FROM "table2";
+----+-----------+
| id | table1_id |
+----+-----------+
|  2 |         1 |
+----+-----------+
1 row in set (0.00 sec)

mysql> SELECT * FROM "table3";
+----+-----------+
| id | table1_id |
+----+-----------+
|  2 |         1 |
+----+-----------+
1 row in set (0.00 sec) 
```

* * *

**Testcase2: unexpected behaviour (MySQL Version 5.5.30)**

Holy triggers grml - You know what? Shame that I didn't test the second case first - unfortunately I was not able to reproduce the error.. the test worked on 5.5.30 as well, will keep you updated :)

**EDIT** Trigger did not cascade because of an unknown definer which was remaining in the sql dump made for production. Removing DEFINER= in the trigger dumps (alternative solution would be to create the user or to change DEFINER= to an existing one) ~~solved the problem~~, solved a part of he problem.

The unknown definer did not cause any log file output

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T15:24:52.970

最终结论：MySQL 5.5.30 在这种情况下没有问题，服务器本身也没有配置错误。

几个自己犯的错误导致了这个问题：

**错误一：DEFINER 用户不存在**

我不是只在生产机器上生成数据库，而是偷懒将测试数据库转储到生产机器上。如果您没有`DEFINER`在`CREATE TRIGGER`语句中显式设置 a ，则将其设置为`CURRENT_USER`. `CURRENT_USER`不幸的是，在我的测试机器上，生产服务器上不存在这个确切的信息。

**错误二：懒惰**

[mysqldump](http://dev.mysql.com/doc/refman/5.5/en/mysqldump.html)使用 DEFINER 转储触发器定义，创建触发器应该会生成一个警告，但是我又懒惰了，做了这样的事情..

```
mysqldump --triggers --routines -h test -p database | gzip -3 | ssh production "gunzip -c | mysql -h production_database_host -p production_database" 
```

这**看起来很酷（omg geek）**并为您节省了大量的转储文件推送，但它抑制了您在从控制台中加载转储时可能看到的警告

MySQL 写了以下关于触发器定义器的内容：

> 如果您指定 DEFINER 子句，这些规则将确定合法的 DEFINER 用户值：
> 
> 如果您没有 SUPER 权限，则唯一合法的用户值是您自己的帐户，可以按字面意思指定，也可以使用 CURRENT_USER 指定。您不能将定义者设置为其他帐户。
> 
> 如果您有 SUPER 权限，您可以指定任何语法上合法的帐户名称。如果该帐户实际上不存在，则会生成警告。
> 
> **尽管可以使用不存在的 DEFINER 帐户创建触发器，但在帐户实际存在之前激活此类触发器并不是一个好主意。否则，关于权限检查的行为是未定义的。**
> 
> 来源：[http ://dev.mysql.com/doc/refman/5.5/en/create-trigger.html](http://dev.mysql.com/doc/refman/5.5/en/create-trigger.html)

**错误三：懒惰**

我有一个非常酷的 mysqldump 包装器，它能够生成干净、可重用的转储文件。在没有 DEFINER 的情况下覆盖触发器时，我在生产服务器上打开了一个控制台事务（锁定 table2），因此 table2 上的触发器根本没有更新，而是再次更新，因为我的数据 sql 管道超过 5 个服务器，我没有看到超时错误。

**结论：**

没有错误，只是没有正确创建触发器..

有时候你应该停止偷懒，给重要的事情**多一点时间**和注意力**可以为你节省很多时间**！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T22:15:33.270

MySQL 中的触发器（与存储过程不同）总是在`DEFINER`. 触发器可能无法正常工作，因为它们`DEFINER`没有执行部分或全部触发器的权限。特别是，在 MySQL 5.1 及更高版本中，`DEFINER`需要具有`TRIGGER`特权以及相关`SELECT`和/或`UPDATE`特权。

当触发器似乎不起作用时，请检查权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-06T05:46:15.837

请注意，外键操作不会触发触发器，请参阅[触发器的限制](https://dev.mysql.com/doc/refman/8.0/en/stored-program-restrictions.html)：

> 触发器不会被外键操作激活。

这意味着**级联删除外键**不会激活任何“ON DELETE”触发器......

# c# - C# thread-safe getter performance differences

> ID：15950704
> 
> 赞同：7
> 
> 时间：2013-04-11T13:57:02.023
> 
> 标签：c#, performance, locking

I am writting a thread safe object that basically represents a double and uses a lock to ensure safe reading and writing. I use many of these objects (20-30) in a piece of code that is reading and writing them all 100 times per second, and I am measuring the average computation time of each of these time steps. I started looking at a few options for implementations of my getter and after running many tests and collecting many samples to average out my measurement of computation time I find certain implementations perform consistently better than others, but not the implementations I would expect.

Implementation 1) Computation time average = 0.607ms:

```
protected override double GetValue()
{
    lock(_sync)
    {
        return _value;
    }
} 
```

Implementation 2) Computation time average = 0.615ms:

```
protected override double GetValue()
{
    double result;
    lock(_sync)
    {
        result = _value;
    }
    return result;
} 
```

Implementation 3) Computation time average = 0.560ms:

```
protected override double GetValue()
{
    double result = 0;
    lock(_sync)
    {
        result = _value;
    }
    return result;
} 
```

**What I expected:** I had expected to see implementation 3 be the worst of the 3 (this was actually my original code, so it was chance or lazy coding that I had written it this way), but surprisingly it is consistently the best in terms of performance. I would expect implementation 1 to be the fastest. I also expected implementation 2 to be at least as fast, if not faster than implementation 3 since I am just removing an assignment to the double result that is overwritten anyways, so it is unnecessary.

**My question is:** can anyone explain why these 3 implementations have the relative performance that I have measured? It seems counter-intuitive to me and I would really like to know why.

I realize that these differences are not major, but their relative measure is consistent every time I run the test, collecting thousands of samples each test to average out the computation time. Also, please keep in mind I am doing these tests because my application requires very high performance, or at least as good as I can reasonably get it. My test case is just a small test case and a my code's performance will be important when running in release.

EDIT: note that I am using MonoTouch and running the code on an iPad Mini device, so perhaps it's nothing related to c# and more something related to MonoTouch's cross compiler.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T08:54:14.843

坦率地说，这里还有其他更好的方法。以下输出（忽略用于 JIT 的 x1）：

```
x5000000
Example1        128ms
Example2        136ms
Example3        129ms
CompareExchange 53ms
ReadUnsafe      54ms
UntypedBox      23ms
TypedBox        12ms

x5000000
Example1        129ms
Example2        129ms
Example3        129ms
CompareExchange 52ms
ReadUnsafe      53ms
UntypedBox      23ms
TypedBox        12ms

x5000000
Example1        129ms
Example2        161ms
Example3        129ms
CompareExchange 52ms
ReadUnsafe      53ms
UntypedBox      23ms
TypedBox        12ms 
```

所有这些都是线程安全的实现。如您所见，最快的是有类型的框，然后是无类型的 ( `object`) 框。接下来是（以大约相同的速度）`Interlocked.CompareExchange`/ `Interlocked.Read`- 请注意后者仅支持`long`，因此我们需要进行一些位抨击以将其视为`double`.

显然，在您的目标框架上进行测试。

为了好玩，我还测试了一个`Mutex`；在相同规模的测试中，大约需要 3300 毫秒。

```
using System;
using System.Diagnostics;
using System.Threading;
abstract class Experiment
{
    public abstract double GetValue();
}
class Example1 : Experiment
{
    private readonly object _sync = new object();
    private double _value = 3;
    public override double GetValue()
    {
        lock (_sync)
        {
            return _value;
        }
    }
}
class Example2 : Experiment
{
    private readonly object _sync = new object();
    private double _value = 3;
    public override double GetValue()
    {
        lock (_sync)
        {
            return _value;
        }
    }
}

class Example3 : Experiment
{
    private readonly object _sync = new object();
    private double _value = 3;
    public override double GetValue()
    {
        double result = 0;
        lock (_sync)
        {
            result = _value;
        }
        return result;
    }
}

class CompareExchange : Experiment
{
    private double _value = 3;
    public override double GetValue()
    {
        return Interlocked.CompareExchange(ref _value, 0, 0);
    }
}
class ReadUnsafe : Experiment
{
    private long _value = DoubleToInt64(3);
    static unsafe long DoubleToInt64(double val)
    {   // I'm mainly including this for the field initializer
        // in real use this would be manually inlined
        return *(long*)(&val);
    }
    public override unsafe double GetValue()
    {
        long val = Interlocked.Read(ref _value);
        return *(double*)(&val);
    }
}
class UntypedBox : Experiment
{
    // references are always atomic
    private volatile object _value = 3.0;
    public override double GetValue()
    {
        return (double)_value;
    }
}
class TypedBox : Experiment
{
    private sealed class Box
    {
        public readonly double Value;
        public Box(double value) { Value = value; }

    }
    // references are always atomic
    private volatile Box _value = new Box(3);
    public override double GetValue()
    {
        return _value.Value;
    }
}
static class Program
{
    static void Main()
    {
        // once for JIT
        RunExperiments(1);
        // three times for real
        RunExperiments(5000000);
        RunExperiments(5000000);
        RunExperiments(5000000);
    }
    static void RunExperiments(int loop)
    {
        Console.WriteLine("x{0}", loop);
        RunExperiment(new Example1(), loop);
        RunExperiment(new Example2(), loop);
        RunExperiment(new Example3(), loop);
        RunExperiment(new CompareExchange(), loop);
        RunExperiment(new ReadUnsafe(), loop);
        RunExperiment(new UntypedBox(), loop);
        RunExperiment(new TypedBox(), loop);
        Console.WriteLine();
    }
    static void RunExperiment(Experiment test, int loop)
    {
        // avoid any GC interruptions
        GC.Collect(GC.MaxGeneration, GCCollectionMode.Forced);
        GC.Collect(GC.MaxGeneration, GCCollectionMode.Forced);
        GC.WaitForPendingFinalizers();

        double val = 0;
        var watch = Stopwatch.StartNew();
        for (int i = 0; i < loop; i++)
            val = test.GetValue();
        watch.Stop();
        if (val != 3.0) Console.WriteLine("FAIL!");
        Console.WriteLine("{0}\t{1}ms", test.GetType().Name,
            watch.ElapsedMilliseconds);

    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T12:22:51.707

仅测量并发读取具有误导性，您的缓存将为您提供比实际用例更好的结果数量级。所以我将 SetValue 添加到 Marc 的示例中：

```
using System;
using System.Diagnostics;
using System.Threading;

abstract class Experiment
{
    public abstract double GetValue();
    public abstract void SetValue(double value);
}

class Example1 : Experiment
{
    private readonly object _sync = new object();
    private double _value = 3;
    public override double GetValue()
    {
        lock (_sync)
        {
            return _value;
        }
    }

    public override void SetValue(double value)
    {
        lock (_sync)
        {
            _value = value;
        }

    }

}
class Example2 : Experiment
{
    private readonly object _sync = new object();
    private double _value = 3;
    public override double GetValue()
    {
        lock (_sync)
        {
            return _value;
        }
    }

    public override void SetValue(double value)
    {
        lock (_sync)
        {
            _value = value;
        }
    }

}

class Example3 : Experiment
{
    private readonly object _sync = new object();
    private double _value = 3;
    public override double GetValue()
    {
        double result = 0;
        lock (_sync)
        {
            result = _value;
        }
        return result;
    }

    public override void SetValue(double value)
    {
        lock (_sync)
        {
            _value = value;
        }
    }
}

class CompareExchange : Experiment
{
    private double _value = 3;
    public override double GetValue()
    {
        return Interlocked.CompareExchange(ref _value, 0, 0);
    }

    public override void SetValue(double value)
    {
        Interlocked.Exchange(ref _value, value);
    }
}
class ReadUnsafe : Experiment
{
    private long _value = DoubleToInt64(3);
    static unsafe long DoubleToInt64(double val)
    {   // I'm mainly including this for the field initializer
        // in real use this would be manually inlined
        return *(long*)(&val);
    }
    public override unsafe double GetValue()
    {
        long val = Interlocked.Read(ref _value);
        return *(double*)(&val);
    }

    public override void SetValue(double value)
    {
        long intValue = DoubleToInt64(value);
        Interlocked.Exchange(ref _value, intValue);
    }
}
class UntypedBox : Experiment
{
    // references are always atomic
    private volatile object _value = 3.0;
    public override double GetValue()
    {
        return (double)_value;
    }

    public override void SetValue(double value)
    {
        object valueObject = value;
        _value = valueObject;
    }
}
class TypedBox : Experiment
{
    private sealed class Box
    {
        public readonly double Value;
        public Box(double value) { Value = value; }

    }
    // references are always atomic
    private volatile Box _value = new Box(3);
    public override double GetValue()
    {
        Box value = _value;
        return value.Value;
    }

    public override void SetValue(double value)
    {
        Box boxValue = new Box(value);
        _value = boxValue;
    }
}
static class Program
{
    static void Main()
    {
        // once for JIT
        RunExperiments(1);
        // three times for real
        RunExperiments(5000000);
        RunExperiments(5000000);
        RunExperiments(5000000);
    }
    static void RunExperiments(int loop)
    {
        Console.WriteLine("x{0}", loop);
        RunExperiment(new Example1(), loop);
        RunExperiment(new Example2(), loop);
        RunExperiment(new Example3(), loop);
        RunExperiment(new CompareExchange(), loop);
        RunExperiment(new ReadUnsafe(), loop);
        RunExperiment(new UntypedBox(), loop);
        RunExperiment(new TypedBox(), loop);
        Console.WriteLine();
    }
    static void RunExperiment(Experiment test, int loop)
    {
        // avoid any GC interruptions
        GC.Collect(GC.MaxGeneration, GCCollectionMode.Forced);
        GC.Collect(GC.MaxGeneration, GCCollectionMode.Forced);
        GC.WaitForPendingFinalizers();

        int threads = Environment.ProcessorCount;

        ManualResetEvent done = new ManualResetEvent(false);

        // Since we use threads, divide the original workload
        //
        int workerLoop = Math.Max(1, loop / Environment.ProcessorCount);
        int writeRatio = 1000;
        int writes = Math.Max(workerLoop / writeRatio, 1);
        int reads = workerLoop / writes;

        var watch = Stopwatch.StartNew();

        for (int t = 0; t < Environment.ProcessorCount; ++t)
        {
            ThreadPool.QueueUserWorkItem((state) =>
                {
                    try
                    {
                        double val = 0;

                        // Two loops to avoid comparison for % in the inner loop
                        //
                        for (int j = 0; j < writes; ++j)
                        {
                            test.SetValue(j);
                            for (int i = 0; i < reads; i++)
                            {
                                val = test.GetValue();
                            }
                        }
                    }
                    finally
                    {
                        if (0 == Interlocked.Decrement(ref threads))
                        {
                            done.Set();
                        }
                    }
                });
        }
        done.WaitOne();
        watch.Stop();
        Console.WriteLine("{0}\t{1}ms", test.GetType().Name,
            watch.ElapsedMilliseconds);

    }
} 
```

结果是，在 1000:1 读：写比率下：

```
x5000000
Example1        353ms
Example2        395ms
Example3        369ms
CompareExchange 150ms
ReadUnsafe      161ms
UntypedBox      11ms
TypedBox        9ms 
```

100:1（读：写）

```
x5000000
Example1        356ms
Example2        360ms
Example3        356ms
CompareExchange 161ms
ReadUnsafe      172ms
UntypedBox      14ms
TypedBox        13ms 
```

10:1（读：写）

```
x5000000
Example1        383ms
Example2        394ms
Example3        414ms
CompareExchange 169ms
ReadUnsafe      176ms
UntypedBox      41ms
TypedBox        43ms 
```

2:1（读：写）

```
x5000000
Example1        550ms
Example2        581ms
Example3        560ms
CompareExchange 257ms
ReadUnsafe      292ms
UntypedBox      101ms
TypedBox        122ms 
```

1:1（读：写）

```
x5000000
Example1        718ms
Example2        745ms
Example3        730ms
CompareExchange 381ms
ReadUnsafe      376ms
UntypedBox      161ms
TypedBox        200ms 
```

*更新了代码以删除写入时不必要的 ICX 操作，因为该值总是被覆盖。还修复了计算除以线程的读取数的公式（相同的工作）。

# sql - 不需要舍入时使用 LIKE 匹配浮点数

> ID：15950705
> 
> 赞同：2
> 
> 时间：2013-04-11T13:57:02.523
> 
> 标签：sql, decimal, rounding, sql-like

所以这就是我想要完成的事情。我在两个表中有坐标数据，我试图将它们与关联表链接在一起。这是一对一的关联，所以如果我在表 A 中有 40 条记录，在表 B 中有 40 条记录，那么我应该在关联表中有 40 条记录。

现在这两个表中的数据大致相同，但绝不相同，实际上它们甚至很少具有相同的精度。一个表（我们会说 A）总是有 6 个小数位，而表 B 可能没有小数位或最多 6 个小数位。

因此，假设我们只是将表 A 中的一对数据与表 B 中的 12.345678 与 12.34 进行匹配。

所以我在我的 asp.net 代码中有一个 foreach，它强制将零放在表 B 数据的末尾，所以我们首先将 12.345678 与 12.340000 进行比较。

然后是 12.34567 对 12.34000。然后 12.3456 反对，12.3400 然后 12.345 反对，12.340

然后是 12.34，反对，12.34。

只要关联记录不存在，包含对表 A 中的 12.345678 或表 B 中的 12.34 的引用，就会创建一个新的关联记录。

现在您可能会问，Joe，那么您如何比较表 A 中的数据和表 B 中的数据？我最后保存了这部分，因为它是最奇怪的。

我正在使用 LIKE，我相信这会让一些人感到不安，因为你已经在想，“你到底为什么要使用 LIKE，它是用于浮点数的字符串匹配？”

好吧，因为它目前为止效果最好，大约 95% 的时间。其他 5% 的大部分只是因为数据差异太大，但有一个非常奇怪的子集绝对应该匹配。

因此，在插入记录之前，我会检查匹配项，只要我只有一个匹配项，我就会创建关联记录。

```
SELECT COUNT(*) FROM dbo.StartCoord 

WHERE StartLatitude LIKE '12.817%' 
AND StartLongitude LIKE '12.819%' 
```

现在我正在查看 12.817 和 12.819 的来源记录，完整值实际上是 12.8179 和 12.8199。所以它应该有效，并且在 95% 的时间里它确实有效。

现在对于奇怪的部分，也许使用 LIKE（应该只用于字符串匹配）导致 SQL Server 在后台进行舍入。我上面的 stmt 不起作用，但是如果我把它扔到 Microsoft SQL Server Management 中，并将其更改为...

```
SELECT COUNT(*) FROM dbo.StartCoord 

WHERE StartLatitude LIKE '12.817%' --trying to string match 12.8179
AND StartLongitude LIKE '12.82%'   --trying to string match 12.8199 
```

...有用！

我假设有人会说它实际上不是 LIKE，但事实上我将 LIKE '12.817%' 与浮点数进行比较并且浮点数导致 SQL Server 制定一些舍入机制。

但是，如果是这样的话，为什么 LIKE '12.817%' 会匹配原来的 12.8179？它是否应该也没有四舍五入，并且仅在 12.82 的情况下匹配？

阅读本文后，如果有人有更好的标题，我可以为将来遇到同样问题的其他人使用，那就太好了。

谢谢。

编辑：所以我完全忘记提及为什么采用这种方法。在一个表中，实际数据最多存储六个小数位，我想我一直将其用作表 A 的示例。但是，表 B 中的数据从无小数位到六位不等，有时会四舍五入，有时则不会。

So in Table A we may have 12.123456 and in somes cases, they give us Table B data that could be 12.1234 or sometimes it could be 12.1235\. How they give us data is not consistent, which is why I am working around it this way. Using rounding or casting(numeric) to handle both of these cases results in less Associations being created, but I've only started experimenting with that. I also found a STR() function I am interested to look at.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:06:10.627

如果您不想更改使用 LIKE。您可以将浮点数转换为小数，然后转换为 nvarchar，这应该会停止舍入问题。

```
SELECT COUNT(*) FROM dbo.StartCoord 
WHERE CAST(CAST(StartLatitude  as DECIMAL(12,6)) as nvarchar(20)) LIKE '12.817%' 
AND   CAST(CAST(StartLongitude as DECIMAL(12,6)) as nvarchar(20)) LIKE '12.819%' 
```

我假设您只需要 6 个小数位。

# android - Change keyboard input text in EditText android

> ID：15950708
> 
> 赞同：2
> 
> 时间：2013-04-11T13:57:12.433
> 
> 标签：android, android-edittext

I want to change keyboard input ,

Example :

**When user press a , it will be show c**

I tried to use `TextWatcher` and it hang because after calling `setText` , it will be arrive again TextWatcher event. So, it will deadlock and not working.

`setOnKeyListener` is not working also. `onKey` event arrive when Enter. Not arriving when I press a or b.

It is possible to change text input key in EditText Android ?

Update: setOnKeyListener

```
final EditText edittext = (EditText) findViewById(R.id.editText1);

        edittext.setOnKeyListener(new OnKeyListener() {

            @Override
            public boolean onKey(View arg0, int keycode, KeyEvent event) {
                // TODO Auto-generated method stub
                Log.i("onKey", "Arrive Keypress");
                if (event.getAction()!=KeyEvent.ACTION_DOWN)
                    return true;

                 if (event != null&& (keycode == KeyEvent.KEYCODE_ENTER)) {

                     applySearch();
                     return true;
                 }

                return false;
            } 

        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:04:21.800

使用`TextWatcher`，但要聪明地使用它。当你调用`setText`create时，`boolean flag == true`每次都检查这个`flag`。`onTextChanged`希望它的帮助。

```
public class MyActivity extends Activity implements TextWatcher {

EditText et;
boolean flag;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    et=(EditText) findViewById(R.id.et);
    et.addTextChangedListener(this);

}

@Override
public void beforeTextChanged(CharSequence s, int start, int count, int after) {

}

@Override
public void onTextChanged(CharSequence s, int start, int before, int count) {
    if(flag)
    {
        flag = false;
        return;
    }
    else
    {
        //do same staff
        flag = true;
        et.setText("new text");
    }
}

@Override
public void afterTextChanged(Editable s) {

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:04:12.677

是的，它是可行的，我使用吊索键盘（你可以在 Google Play 上找到这个应用程序）。你可以在手机的键盘设置下选择它作为默认值。

Rgds,

安巴尔

# java - Java通过反射包含类接口？Java 代理的解决方法？

> ID：15950712
> 
> 赞同：1
> 
> 时间：2013-04-11T13:57:17.577
> 
> 标签：java, class, reflection, interface, proxy

> **可能重复：** [java.lang.reflect.Proxy 的替代品，用于创建抽象类的代理（而不是接口）](https://stackoverflow.com/questions/3291637/alternatives-to-java-lang-reflect-proxy-for-creating-proxies-of-abstract-classes)

假设我有这个类：

```
public class MyClass {
    public void doStuff() {
        //stuff
    }

    public int getSomeIntStuff() {
        //int stuff
        return intStuff;
    }

    private void helperStuff() {
        //helper Stuff
    }
} 
```

有没有办法获得一个代表这个类的公共接口的接口类（动态生成？）？

此类的公共接口（如果已编写）将如下所示：

```
public interface MyClassInterface {
    void doStuff(); 
    int getSomeIntStuff();
} 
```

但这必须以某种方式动态生成，我希望是这样的：

```
Class<?> interfaceClass = MyClass.class.getEncompasingInterface(); 
```

我试图实现的是基于一些现有类而不是现有接口创建一个 Java 代理，并且该`Proxy.newProxyInstance(ClassLoader, Class<?>[], InvocationHandler)`方法期望作为第二个参数严格地列出 Java 接口而不是类。

# css - Dojo Dijit 菜单栏

> ID：15950716
> 
> 赞同：0
> 
> 时间：2013-04-11T13:57:26.643
> 
> 标签：css, dojo, widget

我的问题实际上是两个。
第一个是是否可以在单击时保持菜单的状态，即，我不希望在单击子菜单项后关闭菜单的第一级，但仅在再次单击它时才关闭。

第二个是我试图找到改变菜单栏第一级背景颜色的 CSS 类。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:27:51.263

不知道为什么要更改 CSS 定义，但可以使用以下代码更改背景：

```
 pMenuBar = new dijit.MenuBar({
     style: "width: 100%;height: 30px;margin-left:2px;margin-top:0px;color:#f5f7f7;font-size: 13px;background-color: transparent;"
  }); 
```

如果不透明，请提供您自己的颜色....

# java - java.lang.NoClassDefFoundError: org/apache/xpath/compiler/FuncLoader

> ID：15950717
> 
> 赞同：3
> 
> 时间：2013-04-11T13:57:26.597
> 
> 标签：java, noclassdeffounderror

我正在使用带有 Java 1.6 的 Eclipse，并在构建路径 xalan-2.7.1.jar、xmlsec-1.1.jar、xmlsec-2.0.jar 中包含以下 jar 文件，但在编译代码时仍然收到以下错误消息：

`java.lang.NoClassDefFoundError: org/apache/xpath/compiler/FuncLoader`

出错的代码是：

`static { org.apache.xml.security.Init.init(); }`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T14:07:45.470

根据[这个错误报告](https://issuetracker.springsource.com/browse/EBR-738)，Xalan 2.7.x 没有`FuncLoader`包含该类。尝试降级到 Xalan 2.6.x。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T09:04:59.823

尝试使用与 wss4j-1.6.16.jar 兼容的 xmlsec-1.3.0.jar

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T14:08:27.627

当不确定 a 发生的原因`NoClassDeFoundError`时，我发现咨询[findjar.com](http://www.findjar.com)很有用。

我发现有趣的是，[对于您的具体情况](http://www.findjar.com/class/org/apache/xpath/compiler/FuncLoader.html)，列出了各种版本的 xalan，但没有列出您在类路径中拥有的版本。也许那里有什么？

# c - 在读取期间完全清除调制解调器模块串行缓冲区

> ID：15950718
> 
> 赞同：2
> 
> 时间：2013-04-11T13:57:31.190
> 
> 标签：c, linux, serial-port, modem

我有一个 gsm 调制解调器模块，**首先**我从 microcom appl 尝试过。一切都很好。 **其次**，我在 c 中实现了自己的代码。如果我通过 AT 命令，我可以多次阅读它及其答案。我怎样才能清除端口？似乎有时我几乎可以读取端口直到永远。:-)

我试图不考虑这一点，但在处理回复时会引起混乱。

我使用 Linux。

塔马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:08:43.987

您可以使用[`tcflush()`](http://man7.org/linux/man-pages/man3/tcflush.3.html)刷新输入、输出或两者。

> tcflush() 根据 queue_selector 的值，丢弃写入 fd 引用的对象但未传输的数据，或接收但未读取的数据：
> 
> ```
>  TCIFLUSH
>           flushes data received but not read.
> 
>    TCOFLUSH
>           flushes data written but not transmitted.
> 
>    TCIOFLUSH
>           flushes both data received but not read, and data written but not
>           transmitted. 
> ```

# jquery - Nested jquery - when one function triggers then it should trigger another function too

> ID：15950726
> 
> 赞同：0
> 
> 时间：2013-04-11T13:57:46.447
> 
> 标签：jquery

Following is my code all i want when .clickover function being called then it should also call the `$(".popover").css` function. Kindly let me know how can i make such nested query

```
 $(function() { 
          $('#notc').clickover({
          title: "Notifications"

          },          function() {
            //$("div.popover").css("margin-left","60px");
            alert("hi");
            }); 

      }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:05:09.537

通过查看 Bootstrap 文档，我发现的第一个可能对您有用的函数是 onShown，例如：

```
$(function() { 
      $('#notc').clickover({
          title: "Notifications",
          onShown: function() {
              $("div.popover").css("margin-left","60px");
              alert("hi");
          }
       }); 

}); 
```

# javascript - Get the number of days between 2 dates using datepicker

> ID：15950731
> 
> 赞同：0
> 
> 时间：2013-04-11T13:57:59.350
> 
> 标签：javascript, jquery, jquery-ui, date, datepicker

```
$(function () {
    $("#from").datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function (selectedDate) {
            $("#to").datepicker("option", "minDate", selectedDate);
        }
    });
    $("#to").datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 3,
        onClose: function (selectedDate) {
            $("#from").datepicker("option", "maxDate", selectedDate);
        }
    });
});

$("#to").change(function () {
    var final = $("#to").datepicker("getDate");
    var start = $("#from").datepicker("getDate");
    var days = new Date(final - start);
    alert(days);
});

<label for="from">From</label>
<input type="text" id="from" name="from" />
<label for="to">to</label>
<input type="text" id="to" name="to" /> 
```

This is what I have by far, I pretend to get the number of days passed between 2 dates everytime that final date is filled. I'm having some trouble because of conversions :s

[Fiddle](http://jsfiddle.net/FxnMY/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:03:20.173

我相信最大的事情是它`datepicker('getDate')`已经返回了一个 Date 对象，因此`final`并且`start`已经是 date 对象。

现在您有两个日期对象，您可以在以下线程中编写代码示例来获取它们之间的天数

[如何使用 JavaScript 计算两个日期之间的天数？](https://stackoverflow.com/questions/2627473/how-to-calculate-the-number-of-days-between-two-dates-using-javascript)

以下代码直接从线程和google中翻录：您可以适当填写

```
var oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds
var firstDate = new Date(2008,01,12);
var secondDate = new Date(2008,01,22);

var diffDays = Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T17:33:07.043

以下示例对我来说效果很好。

```
$(document).ready(function(){
   var $datepicker1 =  $( "#firstday" );
   var $datepicker2 =  $( "#lastday" );
   $datepicker1.datepicker();
   $datepicker2.datepicker({
       onClose: function() {
           var fromDate = $datepicker1.datepicker('getDate');
           var toDate = $datepicker2.datepicker('getDate');
           // date difference in millisec
           var diff = new Date(toDate - fromDate);
           // date difference in days
           var days = diff/1000/60/60/24;

           alert(days);
       }
   });
}); 
```

参考：-[计算 jquery datepicker 中两个日期之间的天数](http://goo.gl/IDR3I4)

# java - 如何生成随机对象？

> ID：15950736
> 
> 赞同：2
> 
> 时间：2013-04-11T13:58:23.013
> 
> 标签：java, random

好的，所以我的任务是创建许多机器人，这些机器人可以摆脱困境。即墙上有一个洞，无论他们在哪里产卵，他们都必须找到出路。

![](https://i.imgur.com/nUUCTdP.png)

我创建了一个循环，可以制造 10 个不同的机器人，但它们都在同一个地方产卵：

```
EscapeBot[] Karel = new EscapeBot[numOfRobots];

for (int i = 0; i < numOfRobots; i++) {
    Karel[i] = new EscapeBot(London, 1, 1, Direction.NORTH);
    Karel[i].escapeRoom(); 
```

我应该声明整数，然后在坐标和方向所在的 for 循环中使用 math.random 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:03:04.787

如果没有看到你的课，我不能肯定地说`EscapeBot`，但这可能是你想要的，例如

```
Random rand = new Random();
new EscapeBot(London, rand.nextInt(max_x - 1) + 1, rand.nextInt(max_y - 1) + 1, Direction.NORTH); 
```

其中`max_x`是最大 x 坐标，max_y 是最大 y 坐标，假设基于 1 的索引（如果使用基于 0 的索引，则删除 -1 和 +1 部分）。您可能还需要一系列方向，例如

```
Direction[] directions = new Direction { Direction.NORTH, Direction.SOUTH, .. } 
```

这样您的 EscapeBot 将

```
new EscapeBot(London, rand.nextInt(max_x - 1) + 1, rand.nextInt(max_y - 1) + 1, directions[rand.nextInt(directions.length)]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:09:31.480

这样做怎么样（如果你想让机器人能够在任何地方生成，只需用你的地图尺寸替换生成变量）：

```
for (int i = 0; i < numOfRobots; i++) {
                Karel[i] = new EscapeBot(London, 
                SPAWN_X + SPAWN_LENGTH * Math.random(), 
                SPAWN_Y + SPAWN_WIDTH * Math.random(), 
                Direction.NORTH);

                Karel[i].escapeRoom();
} 
```

# jquery - JavaScript/jQuery 一个变量在两个函数中使用的最佳解决方案？例子

> ID：15950741
> 
> 赞同：1
> 
> 时间：2013-04-11T13:58:37.257
> 
> 标签：jquery, variables, global

我有点困惑。在 jQuery 中使用一个变量作为全局变量的最佳方法是什么 - 只需使用它两次单击功能？这是代码：

> [http://jsfiddle.net/DyqdA/](http://jsfiddle.net/DyqdA/)

HTML：

```
<div id = "div1">DIV # 1</div>
    <div id = "div2">DIV # 2</div>
    <input type = "button" value = "Click to see whick div you've chosen."/>
    <h1></h1> 
```

jQuery :

```
$(document).ready(function() { 
    var answer;
    $("#div1").click(function(event) { 
        window.answer = "FIRST";
    }); 

    $("div2").click(function(event) { 
        window.answer = "SECOND";
    });

    $("button").click(function() {
        $("h1").html(window.answer);
    }); 
})(jQuery); 
```

CSS：

```
#div1 {
    background-color: red; 
    height: 50px;
}
#div2 {
    background-color: blue; 
     height: 50px;
} 
```

我需要将文本保存到答案变量。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:00:19.453

只需删除`window.`，因为此变量不是全局变量。它可以在您尝试使用它的上下文中访问：

```
$(document).ready(function() { 
    var answer;
    $("#div1").click(function(event) { 
        answer = "FIRST";
    }); 

    $("#div2").click(function(event) { 
        answer = "SECOND";
    });

    $("input").click(function() {
        $("h1").html(answer);
    }); 
}); 
```

编辑：最后放弃`(jQuery)`。

EDIT2：另外，`div2`应该是`#div2`并且你的 html 中没有 a `button`，你有一个`input`type `button`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:04:28.313

[http://jsfiddle.net/DyqdA/1/](http://jsfiddle.net/DyqdA/1/)

```
$(document).ready(function() {   
    var answer;
    $("#div1").click(function(event) { 
        answer = "FIRST";
    }); 

    $("#div2").click(function(event) { 
        answer = "SECOND";
    });

    $("#displayDivButton").click(function() {
        $("h1").html(answer);
    }); 
})(jQuery); 
```

您正在使用（“button”）但没有任何“button”标签，您还使用（“div2”）而不是（“#div2”）......然后您可以在声明答案var时放下窗口在所有 3 个功能的范围内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-29T14:22:18.203

希望你期待这个：

```
myVar="Global Scope";

family = function(){

 var myVar="member";

member1= function() {
    console.log(myVar);
};

member2= function() {
    myVar = "member2";
    console.log(myVar);
  };

  member1();
  member2();

};

family();
console.log(myVar); 
```

# android - 跳转到微调器选择

> ID：15950745
> 
> 赞同：4
> 
> 时间：2013-04-11T13:58:51.277
> 
> 标签：android, actionbarsherlock, spinner

我有一个包含 20-30 个元素的微调器（Actionbar Sherlock Widget）；最后一个被选中。打开微调器后，我必须向下滚动到选择。有没有办法打开微调器并在不滚动的情况下查看选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:23:41.763

ActionBarSherlock **4.3.0**今天发布。[根据更改日志](https://github.com/JakeWharton/ActionBarSherlock/blob/master/CHANGELOG.md)中的最后一行，这似乎在新版本中已修复：

> 修复：打开时滚动列表导航到所选项目。

# android - 处理程序 sendMessageDelayed 仅在第一次工作

> ID：15950750
> 
> 赞同：1
> 
> 时间：2013-04-11T13:59:10.553
> 
> 标签：android, handler

我遇到了处理程序的问题。我第一次实例化它时它工作正常。

处理程序位于视图内：

```
 private long delayMillis; 
    private long mMoveDelay = 1000;

    /**
     * Create a simple handler that we can use to cause animation to happen.  We
     * set ourselves as a target and we can use the sleep()
     * function to cause an update/invalidate to occur at a later date.
     */
    private RefreshHandler mRedrawHandler;

    class RefreshHandler extends Handler {

        // serve per far vedere tile 2 almeno un tempo prestabilito checkTime

        @Override
        public void handleMessage(Message msg) {

            delayMillis+=mMoveDelay;
            System.out.println("--->handleMessage mMoveDelay"+10000);
            System.out.println("--->handleMessage delayMillis"+delayMillis);

            sleep();
        }

        public void sleep() {

            //this.removeMessages(0);
            sendMessageDelayed(obtainMessage(0), mMoveDelay);
            System.out.println("--->sleep delayMillis"+delayMillis);
        }
    }; 
```

几次后我跑

```
 mRedrawHandler = new RefreshHandler();
    mRedrawHandler.sleep(); 
```

sendMessageDelayed 被立即调用。这篇文章中的问题似乎相似：

[Handler.sendMessageDelayed(msg, delay) 无法正常工作](https://stackoverflow.com/questions/3076139/handler-sendmessagedelayedmsg-delay-not-working-correctly)

你有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T06:39:53.560

在 sleep 方法中，obtainMessage(0) 的对象是什么？这似乎是问题所在。您不能使用上次使用的消息对象。你必须创建新的消息对象。

# c - C：在多维数组中打印整行

> ID：15950759
> 
> 赞同：2
> 
> 时间：2013-04-11T13:59:23.363
> 
> 标签：c, multidimensional-array

我在 C 中有一个二维数组，如下所示：

```
int pop[18000][3] = {
  0, 1, 24,
  0, 2, 46,
  /* many other rows */
  6, 17999, 10,
  6, 18000, 10,
}; 
```

我想要做的是编写一个函数来检查每一行的最后一个值，如果它有某个值，则返回整行。我知道我可以用凌乱的方式做到这一点

```
for (i = 0; i <= 2; i++)
  if (pop[i][1] == 10)
    printf("%d, %d, %d\n", pop[i][0], pop[i][1], pop[i][2]); 
```

但我实际上正在寻找一种更通用的解决方案，允许我打印选定的整行（例如，在某些模拟中，我最终可能会创建具有数十列（如果不是数百列）的二维数组；我不想为此使用凌乱的方法）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:04:42.830

```
for(i=0;i<18000;i++)
{

 if(pop[i][2] == 10) // u sed last column
 for(j=0;j<3;j++)
       printf("%d",pop[i][j]);
 } 
```

有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:13:19.420

I would allocate a one-dimensional array of length `rows*columns` and use the following function:

```
void print(int *pop, int index, int value, int rows, int columns) {

    int i,j;

    for(i=0; i<rows; i++) {
        if(pop[i+(j-1)*index] ==  value) {
            for(j=0; j<columns; j++) {
                printf("%d, ", pop[i+j*columns]);
            }
            printf("\n");
        }
    }
} 
```

When you call the function you simply pass the array as argument with the number of rows and columns it has and the column number `index` on which you want to check for the value `value`. In this way you can use the function for any two-dimensional array for an arbitrary column number and value

```
// ...

int rows = 18000;
int columns = 3;
int index = 3;
int value = 10;
int *pop = malloc(sizeof(int)*rows*columns);

// Fill your pop array here

print(pop, index, value, rows, columns);

// ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:05:18.270

使用辅助功能：

```
void printArray(int *array, int length) {
    for (int i = 0; i < length; ++i) {
       printf("%d", array[i]);
    }

    printf("\n");
} 
```

用法 ：

```
for (i = 0; i < ROWS_COUNT; i++)
  if (pop[i][COLUMNS_COUNT - 1] == 10)
     printArray(pop[i], COLUMNS_COUNT); 
```

# c# - 调用 AddLink() 时，DataServiceContext entityTracker 成员变为 null！

> ID：15950761
> 
> 赞同：1
> 
> 时间：2013-04-11T13:59:25.937
> 
> 标签：c#, clr, wcf-data-services, odata, wcf-rest

在调用实例`AddLink`的方法时我有一个非常奇怪的问题。`DataServiceContext`调用是在使用数据服务的 WCF REST 服务的 POST 方法中进行的。我不会详细介绍与此服务架构相关的内容，但如果您有任何异议，请说明。

所以，这是方法实现：

```
 public DEvent PostEvent(DEvent inputEvent)
    {
        if (inputEvent == null)
            return null;
        try
        {                
            var ctx = EFTestDbEntities.CreateContext();
            var ev = new DEvent();

            // populate with data... not worth mentioning.

            ctx.AddToDEvents(ev); // No problem here...
            var es = new LDEvent_CEventState();
            ctx.AddToLDEvent_CEventState(es); // No problem here, aswell...
            // Next line throws NullReferenceException!!!
            ctx.AddLink(ev, "LDEvent_CEventStates", es); 
            ev.LDEvent_CEventStates.Add(es);                           
            ctx.SaveChanges();
            return inputEvent;
        }
        catch (Exception exc)
        {
            Trace.TraceError(exc.ToString());
            throw new WebFaultException(HttpStatusCode.BadRequest);
        }
    } 
```

调用`AddLink`会引发`NullReferenceException`MSDN 上未针对此特定函数记录的异常，[请在此处查看](http://msdn.microsoft.com/en-us/library/system.data.services.client.dataservicecontext.addlink%28v=vs.95%29.aspx)。该函数应该抛出参数 null 和无效操作异常。请注意，在抛出空异常之前，还有两个涉及实体跟踪器的调用。

在反射器的帮助下调试代码我注意到`ctx.entityTracker`成员在输入时变为空`AddLink()`。我从实例创建中跟踪实体跟踪器字段，发现没有理由改变它。我可能错过了什么，但我对此表示怀疑。我之前插入了更多操作，`AddLink()`但异常总是在同一个地方抛出。

当我在 WPF 应用程序中对此进行测试时，完全没有问题并且表现符合预期。

我错过了什么？

需要提一下，我使用的是 VS 2012 并使用 Nuget 获得了 OData V3。服务托管在 IIS 7.5 中，并且两者都在同一个应用程序池和网站上。项目中包含的包有：

*   Microsoft.Data.Edm，5.4.0
*   Microsoft.Data.OData，5.4.0
*   Microsoft.Data.Services.Client，5.4.0，这是`DataServiceContext`驻留的地方
*   系统空间，5.4.0

那么，这是一个 CLR 问题吗？还是 OData API？还是IIS？`ServiceHost`还是`DataServiceHost`？

非常感谢任何试图让我了解这里发生的事情的帮助，我真的希望我错过了一些东西。同时，我将重新启动我的工作站，希望所有这些问题都消失:)

# c# - 重建 CryptoStream 有多少开销？

> ID：15950763
> 
> 赞同：2
> 
> 时间：2013-04-11T13:59:30.940
> 
> 标签：c#, encryption

在过去的几天里，我一直在努力解决一个问题：在进行公钥交换 + 登录后，我的端点切换到`Rijndael`对称加密模式来加密客户端和服务器之间的消息。

问题是，我创建了加密流并让它保持开放，认为这是最好的方法，因为通道将用于发送多个连接。当我这样做时，加密永远不会完全输出到基本流。根据 msdn，它说：

> 使用完 CryptoStream 对象后，应始终通过调用 Close 方法显式关闭它。这样做会刷新流并导致所有剩余的数据块由 CryptoStream 对象处理。

为发送的每条消息重建它似乎需要很多开销。是否有某种原因，或者我只是错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:04:39.070

AES(Rijndael) 使用固定大小的块，因此输出可以是块大小的倍数。如果输入未与块大小对齐，则对其进行填充。解密时，此填充将被删除。要知道要添加多少填充，AES 需要知道确切的流长度。并且可以在流结束时（关闭后）确定该长度。

# android - Google Analytics V2 (GAV2) Easy Tracker sendView 不工作

> ID：15950766
> 
> 赞同：2
> 
> 时间：2013-04-11T13:59:47.160
> 
> 标签：android, google-analytics, google-analytics-api

我正在尝试动态设置活动的名称。但是，这无法正常工作，一旦我实时观看它并且（即使我等待一段时间）只显示主要活动的名称而不显示其他活动的名称。

我已经尝试了几种方法，（用于所有活动）例如：

*   将 EasyTracker 与 activityStart(this) 和 sendView("title") 一起使用
*   使用 GoogleAnalytics.getInstance(this).getTracker('xxx').sendView("title")

然而，似乎没有一个工作，我只看到 GA 网站上的第一个活动标题。

此外，如果您不想使用 EasyTracker，文档不是很详尽，所以也许我没有做任何形式的刷新等。

打开调试器后，有时我会看到一些已经存在的错误（例如[这个](https://stackoverflow.com/questions/15581347/google-analytics-for-android-v2-campaign-tracking-not-working)或其他错误，但一旦有几个“发送命中到存储”，它们似乎不会导致错误）。

# sql - SQL - 根据表中的列获取列表

> ID：15950767
> 
> 赞同：1
> 
> 时间：2013-04-11T13:59:48.713
> 
> 标签：sql, sql-server

我有一个名为“公司”的表。

在那一列用“|”分隔的“产品” （管道符号）如“12|13|14|15”。

我想从此表中获取产品为“12”的列表。

即有产品“12”的公司，甚至公司也可能有其他产品。

我想通过拆分列来获取列表。

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T14:01:13.617

尝试这个，

```
SELECT   *
FROM     Company
WHERE    '|' + Product + '|' LIKE '%|' + '12' + '|%' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/75421/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:03:42.733

你可以使用类似的东西

```
SELECT *
FROM   Company
WHERE  Product LIKE '12'
OR     Product LIKE '12|%'
OR     Product LIKE '%|12|%'
OR     Product LIKE '%|12' 
```

但是您可能应该考虑更改架构，以便拥有一个名为 CompanyProduct 的表，其中每个公司都有很多行。

# sorting - 组属性 - 不按字母顺序排序

> ID：15950768
> 
> 赞同：0
> 
> 时间：2013-04-11T13:59:52.363
> 
> 标签：sorting, grouping, reporting-services

在一个组中，我有四个 SSRS 按字母顺序排序的项目：Assigned、New、Old、Renew、

我希望报告按以下顺序排列：新的、更新的、已分配的、旧的、

如何在“组属性”>“排序”中完成此操作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:05:48.840

使用类似于以下的表达式设置您的 Group Sorting 属性：

```
=Switch(Fields!yourField.Value = "New", 1
  , Fields!yourField.Value = "Renew", 2
  , Fields!yourField.Value = "Assigned", 3
  , Fields!yourField.Value = "Old", 4) 
```

基本上，您正在根据您的字段创建一个计算值并按此计算值排序。

显然，您需要使用正确的名称更新您的字段详细信息。

**评论后编辑：**

我整理了一个小例子来确认这是否按预期工作。首先，创建一个示例数据集：

![在此处输入图像描述](https://i.stack.imgur.com/asUJ4.png)

我创建了一个基于数据集的带有表格的示例报告：

![在此处输入图像描述](https://i.stack.imgur.com/Fdj0L.png)

分组基于*Status*。默认情况下，这设置为在组级别按相同字段排序，即按字母顺序 bu *Status*。

![在此处输入图像描述](https://i.stack.imgur.com/rNpvw.png)

结果反映了这一点：

![在此处输入图像描述](https://i.stack.imgur.com/tGnKb.png)

下一步是在组级别应用基于表达式的排序。我使用了与上面完全相同的表达式，替换`Status`为`yourField`. 结果现在按要求排序：

![在此处输入图像描述](https://i.stack.imgur.com/rtEFi.png)

因此，您可以看到建议的解决方案确实有效。下一个问题 - 为什么它对你不起作用？如果您绝对确定您已在组级别正确实施此操作，我只能认为在子组中应用了排序。

例如，在创建表时，默认情况下将有一个**详细信息**组以显示数据集中的各个行 - 可能在此处设置了排序并且它阻止了父级排序正常工作。我也会检查表中的所有组和表排序表达式，并删除任何已设置的意外排序。

# jquery - 重新打开fancybox上的谷歌地图中的空Iframe？

> ID：15950769
> 
> 赞同：0
> 
> 时间：2013-04-11T13:59:57.377
> 
> 标签：jquery, google-maps, iframe, fancybox

发现当您使用 Google 地图作为 iframe 重新打开 fancybox 时 - iframe 是空的。[在此处](http://webdesignandsuch.com/posts/fancybox-google-maps/)查看演示

或示例

```
<div style="display:none;">
<div id="route-window" >
    <iframe id='i' width="650" height="480" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.com/maps?q=.+%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0,+%D0%91%D0%B5%D1%80%D0%B5%D0%B6%D0%BA%D0%BE%D0%B2%D1%81%D0%BA%D0%B0%D1%8F+%D0%BD%D0%B0%D0%B1,+%D0%B4.+16+%D0%90,+%D1%81%D1%82%D1%80.+2&amp;hl=ru&amp;ie=UTF8&amp;sll=47.879165,13.837945&amp;sspn=0.112139,0.308647&amp;hnear=%D0%BD%D0%B0%D0%B1.+%D0%91%D0%B5%D1%80%D0%B5%D0%B6%D0%BA%D0%BE%D0%B2%D1%81%D0%BA%D0%B0%D1%8F,+16%D0%90,+%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0,+%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D1%8F,+121059&amp;t=m&amp;source=gplus-ogsb&amp;hq=&amp;ll=55.743734,37.565174&amp;spn=0.023191,0.054932&amp;z=14&amp;iwloc=A&amp;output=embed"></iframe> <br /><small><a href="https://maps.google.com/maps?q=.+%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0,+%D0%91%D0%B5%D1%80%D0%B5%D0%B6%D0%BA%D0%BE%D0%B2%D1%81%D0%BA%D0%B0%D1%8F+%D0%BD%D0%B0%D0%B1,+%D0%B4.+16+%D0%90,+%D1%81%D1%82%D1%80.+2&amp;hl=ru&amp;ie=UTF8&amp;sll=47.879165,13.837945&amp;sspn=0.112139,0.308647&amp;hnear=%D0%BD%D0%B0%D0%B1.+%D0%91%D0%B5%D1%80%D0%B5%D0%B6%D0%BA%D0%BE%D0%B2%D1%81%D0%BA%D0%B0%D1%8F,+16%D0%90,+%D0%9C%D0%BE%D1%81%D0%BA%D0%B2%D0%B0,+%D0%A0%D0%BE%D1%81%D1%81%D0%B8%D1%8F,+121059&amp;t=m&amp;source=embed&amp;hq=&amp;ll=55.743734,37.565174&amp;spn=0.023191,0.054932&amp;z=14&amp;iwloc=A" style="color:#0000FF;text-align:left">Просмотреть увеличенную карту</a></small>
</div>
</div> 
```

和初始化链接

```
 $('#link]').fancybox(); 
```

链接

```
<a href="#route-window" id="link"> 
```

在第二次打开 - 谷歌返回空 iframe :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:43:41.750

感谢[肯尼迪](https://stackoverflow.com/users/1055987/jfk)提供与答案的[链接](http://groups.google.com/group/fancybox/browse_thread/thread/d7321b9a4df5b20b)

> 问题：在fancybox v1.3.2+ 中，内联内容被“移动”到了fancybox 中，而是留下了一个（隐藏的）临时容器。当您将 iframe 标记作为内联内容时，就会出现此问题。第一次触发fancybox时，iframe（标签）被移动到fancybox中，但是一旦你关闭fancybox，“移动”的iframe（标签）会移回文档中的原始位置，并且它会丢失其src属性的值并获取“about:blank”的值，因此第二次触发 fancybox 时，它只显示一个空（空白）框。
> 
> 解决方法：在 iframe（标签）移动到 fancybox 时缓存 src 属性的值，然后在 fancybox 关闭后将此值恢复到 iframe 标签
> 
> 所以你的脚本应该是这样的：

```
$(document).ready(function() {  
  var mySRC ="";  
  $("a.fancybox").fancybox({  
     'padding': 0,  
     // other API options etc  
     'onComplete': function() {  
         mySRC = $('#inlineParent iframe').attr('src');  
     },  
     'onClosed': function() { 
         $('#inlineParent iframe').attr('src',mySRC);  
     }  
  }); // fancybox
}); // ready 
```

**注意**：这仅适用于 fancybox v1.3.4

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T10:10:20.527

另一种选择是在页面的某处放置一个空白的 div，即

```
<div style="display:none" id="fb"></div> 
```

并有一个完整的克隆项目/ iframe等到那里加载模式

```
'onComplete': function() {
    $('#fb').append($(this.href).clone());
}, 
```

这确实意味着您将在页面上复制该项目并在模式打开时拥有 2 个实例，一旦关闭，它将位于与开始位置不同的隐藏 div 中。

# python - Flask_WTF：PasswordField 禁用自动完成

> ID：15950774
> 
> 赞同：4
> 
> 时间：2013-04-11T14:00:12.490
> 
> 标签：python, autocomplete, flask

如何将自定义参数添加到 flask_wtf 表单字段中的字段。我的要求之一是添加 `autocomplete="off"`到所有密码字段，但我似乎无法找到如何将此参数添加到 flast_wtf 生成表单中的密码字段。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T17:20:27.113

您可以通过名称直接将 HTML 属性传递给表单字段`class`，但 用于`class_`避免保留字的除外。

```
{{ form.password(autocomplete="off") }} 
```

如果您使用这样的[宏](http://flask.pocoo.org/docs/patterns/wtforms/#forms-in-templates)来呈现您的字段，您仍然可以通过它`**kwargs`：

```
{{ render_field(form.password, autocomplete="off") }} 
```

# javascript - 谷歌分析不同的域，不同的页面

> ID：15950775
> 
> 赞同：0
> 
> 时间：2013-04-11T14:00:13.123
> 
> 标签：javascript, web-services, google-analytics, multiple-domains

我有 2 个域：

1.  www.example.com
2.  www.aboutexample.com

在 nginx 上，我设置了一个代理：

```
www.example.com -> server:81
www.aboutexample.com -> SERVER:81/about 
```

所以，

```
www.aboutexample.com/some/things == www.example.com/about/some/things 
```

在我的页面上，我的分析设置如下：

```
_gaq.push(['_setAccount', ANALYTICS_ID],['_trackPageview']); 
```

当您检查主域时

`www.example.com/about/some/things`我明白了`/about/some/things`

当您检查 about 域时打赌：

`www.aboutexample.com/some/things`我明白了`/some/things`

我已经通过添加 2 个分析帐户来解决这个问题，一个用于`example.com`和另一个`aboutexample.com`，并且服务器根据域在它们之间切换，但是有没有办法将它们加入一个主（example.com）分析帐户并添加`aboutexample.com/*`as `example.com/about/*`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:08:54.937

您可以使用[虚拟综合浏览量](https://developers.google.com/analytics/devguides/collection/gajs/asyncMigrationExamples#VirtualPageviews)在同一网址上跟踪它们，以便报告有意义。

您仍然可以从主机名报告中区分一个域和另一个域，但页面报告上的 url 现在应该看起来相同。

例如：

```
_gaq.push(['_setAccount', ANALYTICS_ID]);
if(document.location.hostname === 'www.aboutexample.com'){
  _gaq.push(['_trackPageview', '/about' + document.location.pathname + document.location.search]);
}else{
  _gaq.push(['_trackPageview']);
} 
```

# jquery - 在 jQuery .Content 中包含超链接

> ID：15950782
> 
> 赞同：0
> 
> 时间：2013-04-11T14:00:23.090
> 
> 标签：jquery

 我正在使用此代码段以删除断点 ( `<br/>`) 并将我的文本包装在段落中：

```
$('.articleText').contents().filter(function() {
    return this.nodeType == 3;
}).wrap('<p></p>').end().filter('br').remove(); 
``` 

来源：[http ://api.jquery.com/contents/](http://api.jquery.com/contents/)

问题是我的文本包含一个未包含在段落中的超链接 () - 它只是被遗漏了......

这是我的文本片段：

`Lorem Ipsum is simply dummy text of the printing and typesetting industry. <br/><br/>Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a <a href="#">galley</a> of type and scrambled it to make a type specimen book.`

这就是它的转变方式：

```
<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
<p>Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a</p> 
<a href="#">galley</a> 
<p>of type and scrambled it to make a type specimen book.</p> 
```

这应该是这样的：

```
<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
<p>Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a <a href="#">galley</a> of type and scrambled it to make a type specimen book.</p> 
```

这怎么可能...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:03:03.000

该方法`.contents()`只返回调用者的*孩子*的内容，而不是所有的后代。因为您的`<a>`标签嵌套在一个孩子中，所以该方法不会拾取它`.contents()`。

尝试这个：

```
$('.articleText').contents().add($(this).find("*").contents())... 
```

注意：我还没有测试过上面的，所以它可能需要一些小的调整。

**更新：**如果我误解了您并且`<a>`不应该嵌入标签，那么您的标记中有错误：

尝试改变：

`<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.<p>`

至

`<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>`

如果您对此有任何疑问，请告诉我。祝你好运！:)

# php - PHP，随机清除标签内容

> ID：15950783
> 
> 赞同：0
> 
> 时间：2013-04-11T14:00:26.950
> 
> 标签：php

我目前正在从 BBC 新闻中提取 RSS 提要，该提要显示多个项目，每个项目都带有以下标签：

```
 <summary><?php echo($item->description); ?></summary>
 <media:comment>Automatic=No</media:comment> 
```

我试图让一些项目的摘要为空，而一些项目的内容则正常从提要中提取，即不为空。

如果摘要为空“自动 = 否”，但如果它有内容“自动 = 是”。

请有人帮我弄清楚如何创建随机摘要内容和“如果”条件？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:05:38.757

你可以使用[rand](http://php.net/manual/en/function.rand.php)

前任：

```
// Generate a random integer 0 or 1
if(rand()&1 == 1)
{
    echo "<media:comment>Automatic=No</media:comment>";
}
else
{
    echo "<media:comment>Automatic=Yes</media:comment>";
} 
```

# php - CSS/Javascript 测试问题

> ID：15950785
> 
> 赞同：1
> 
> 时间：2013-04-11T14:00:33.787
> 
> 标签：php, css, apache

好的，这有点冗长，但这是问题所在......

我正在测试一个运行 PHP 5.4.11 的 Apache 2.4.3 网络服务器，并且在显示 CSS 菜单和 javascript 的某些页面上遇到了问题。我说我不是网页设计者，只是服务器小兵...开发者在不同的页面上使用了绝对路径和相对路径来调用css和javascript。测试时，使用绝对路径的页面不显示css菜单，也不运行javascript，但是使用相对路径的页面会。可能使事情复杂化，我在服务器上运行两个基于名称的虚拟主机，该问题仅在 Domain1 上表现出来，辅助域不使用这些功能。当我在使用本地主机的服务器上或在主机文件中定义域的笔记本电脑上进行测试时，就会发生这种情况。我' 我不确定这是否与我测试站点的方式、站点的配置或两者的组合有关。css调用和配置文件如下：

* * *

来自有效网页的css调用：

```
<link href="../css/cu.css" rel="stylesheet" type="text/css"> 
```

文件位于：Document Root/domain1/Folder1/index.php

* * *

来自不起作用的网页的 css 调用：

```
<link href="http://www.domain1/css/cu.css" rel="stylesheet" type="text/css"/>
<script src="AC_RunActiveContent.js" type="text/javascript"></script> <style type="text/css"> 
```

文件位于：Document Root/domain1/index.php（domain1主网页）

* * *

httpd-vhost.conf：

```
<VirtualHost *:80>

ServerName www.domain1.com
DocumentRoot "/Document Root/domain1"
ServerAdmin admin@domain1.com
ScriptAlias /cgi-bin /Server Root/cgi-bin/
ErrorDocument 404 /domain1/error/404.php
ErrorLog logs/domain1-error_log
CustomLog logs/domain1-access_log common

<Directory "/var/www/html/domain1">
AllowOverride All 
Options FollowSymLinks 
Require all granted
</Directory>

<Directory "/Document Root/domain1/images">
AllowOverride All 
Options FollowSymLinks 
Require all granted
</Directory>

<Directory "/Document Root/domain1/includes">
AllowOverride All 
Options All
Require all granted
</Directory>

<Directory "/Document Root/domain1/css">
AllowOverride All 
Options All
Require all granted
</Directory>

</VirtualHost>

<VirtualHost *:80>

ServerName www.domain2.com
DocumentRoot "/Document Root/domain2/cuss"
ServerAdmin admin@domain2.com
ErrorDocument 404 /domain2/error/404.php
ErrorLog logs/domain2-error_log
CustomLog "logs/domain2-access_log" common

</VirtualHost> 
```

* * *

.htaccess 文件：文件位于：Document Root/domain1/

```
DirectoryIndex index.php index.html

Options +FollowSymLinks

RewriteEngine On

RewriteRule ^faq.php http://www.domain1/faq [L]

CheckSpelling on 
```

* * *

服务器上的主机文件：

```
127.0.0.1   localhost.domain    localhost
:1  www.domain1.com localhost6.domain   localhost6
<server ip address> www.domain1.com
<server ip address> www.domain2.com 
```

* * *

测试笔记本电脑上的主机文件：

```
127.0.0.1       localhost
<server ip address> www.domain1.com
<server ip address> www.domain2.com 
```

我需要尽快让这台服务器投入生产！有没有人知道如何测试它以确保它在上线时都能正常工作？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:18:41.240

在这里看起来像同样的问题：[How to use relative/absolute paths in css URLs?](https://stackoverflow.com/questions/5815452/how-to-use-relative-absolute-paths-in-css-urls)

我认为您只需将生产链接更改为：

```
<link href="css/cu.css" rel="stylesheet" type="text/css"/> 
```

因为**css**文件夹和**索引**文件在同一级别。

# java - 参数化 zip 文件输入

> ID：15950789
> 
> 赞同：-1
> 
> 时间：2013-04-11T14:00:39.770
> 
> 标签：java

作为我的应用程序的一部分，我已经编写了下面的代码来解压缩 eclipse 中的文件。我不希望用户每次都进入代码并输入文件名（`String str="C:/user/module/file.zip"`）他们想要解压缩任何文件。我想参数化输入的 zip 文件名。请帮我解决这个问题。

```
class demo{
public static void main(String[] args[]) {
        demo bn=new demo();
        String str="C:/user/module/file.zip";
        bn.unzip_file(str);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:03:33.713

该`args`变量包含命令行参数，其中`args[0]`包含可执行文件的路径。使用此参数代替对字符串进行硬编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:23:00.943

```
class demo{
public static void main(String[] args[]) {
        demo bn=new demo();
        String str= args[0]; // provided zip file path from command line.
        bn.unzip_file(str);
    } 
```

# php - PHP字符串比较然后突出差异

> ID：15950793
> 
> 赞同：0
> 
> 时间：2013-04-11T14:00:59.663
> 
> 标签：php, string

我将两组 json 数据存储到 sql 中的两个不同列中。

我需要比较两个字符串，然后突出显示不同的字符串。（我首先尝试将项目放入一个数组，然后是一个数组差异，没有提供我需要的东西）

这是第一个字符串 `{"Pri_ID":"340","SanctionID":"55555","PersonID":"387097","Type":"Athlete","OrgID":"253001","EntryDate":"2013-04-10"},{"Pri_ID":"349","SanctionID":"111222","PersonID":"497625","Type":"Athlete","OrgID":"253001","EntryDate":"2013-04-10"},{"Pri_ID":"334","SanctionID":"111111","PersonID":"420495","Type":"Athlete","OrgID":"253001","EntryDate":"2013-04-10"}"`

这是第二个字符串 `{"Pri_ID":"337","SanctionID":"111222","PersonID":"497625","Type":"Athlete","OrgID":"253001","EntryDate":"2013-04-10"},{"Pri_ID":"341","SanctionID":"111111","PersonID":"420495","Type":"Athlete","OrgID":"253001","EntryDate":"2013-04-10"},`

如您所见，从第二个字符串中删除了一条记录/字符串。我需要显示已删除的字符串。

这是我到目前为止所做的：

```
if (strcmp($str1, $str2)) {
    echo $str2;
} 
```

这不会剥离其他所有内容并显示字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:11:13.670

由于这是 JSON 数组，您可以先将其分解（您可以通过换行符来完成）以将每个 JSON 放入数组中，然后对它们中的每一个执行 json_decode()。然后你会得到两个由关联数组组成的数组。您所要做的就是制作循环并比较一个数组是否包含另一个数组并将缺少的数组放入第三个数组。

希望这可以帮助...

# html - Joomla！自定义组件 css 问题

> ID：15950794
> 
> 赞同：0
> 
> 时间：2013-04-11T14:01:01.547
> 
> 标签：html, css, joomla, components

构建自定义 Joomla！`<div class="m"> </div>`组件，在我的管理界面中，每次都会调用一个值为 m ( ) 的 css 类。怎么可能忽略不被包括在内。我正在寻找源代码，但到目前为止还没有任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:20:56.090

如果你没有找到哪里，我可以提出有趣的方法。

`m`您可以使用 jQuery 方法删除该类。

在页面加载时获取带有类的元素`m`并从该元素中删除此类。

```
<script>
    (function(){
        $('.m').removeClass('m');
    })
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T18:41:06.620

它由 bluestork 模板完成，负责在子菜单周围构建带有圆角的浅灰色框、扩展输出等。如果您不喜欢它，请在模板中更改它或使用其他模板 :-)

但是，你的问题是什么？它会破坏什么吗？

# c++ - 通过 ref 传递 const 指针比按值传递更好？

> ID：15950805
> 
> 赞同：1
> 
> 时间：2013-04-11T14:01:25.347
> 
> 标签：c++

传递表示数据的常量缓冲区的参数时，最好通过 ref 传递吗？例如，可以传递一个字符串，`const char * const`表示指针和内容都是常量。

但会`const char * const &`更好吗？我最近看到材料指出按值传递 const 值是误导性的，因为无论如何都会制作副本，所以以一种不正当的方式通过`const`val 传递指针会产生误导？如果要使用指针，`const`它应该由 ref 传递，因此`const char * const &`最好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:58:02.120

`const char* const x`表示 x 是指向常量 char 的常量指针

`const char* const & x`表示 x 是对指向常量 char 的常量指针的引用

第一个传递指针，第二个传递对指针的引用。就这两种情况下函数内可能的使用而言， x 充当只读字符指针。

针对 OP 的评论进行编辑：您可能混淆了 const 的正确性和通过引用传递的优势。

`const int* x`(相当于`int const* x`)是一个指向常量int的指针，int的值不能通过指针改变。换句话说，你可以做`x = (int*)y`（​​x 的值只会在函数范围内改变）但不能`*x = 1`。

`const int& x`（等价于`int const& x`）表示 x 是对常量 int 的引用。你不能做`x = 1`

`const int x`表示 x 是一个 const int。这基本上相当于 x 是只读的。x 是另一个 int 的副本，因此如果我们删除`const`并修改`x`它，它只会在函数范围内被修改。我不明白为什么有人会在这种情况下反对 const 。这用于避免编程错误，例如将 x 分配给其他值，然后再次使用它而忘记了值的变化。

仅当 x 是避免复制的对象时，使用`const int& x`而不是`const int x`才有意义。出于同样的目的，我们也可以使用`const int* const x`.

使用`const int* const &x`而不是`const int* const x`具有相同的效果，但有一些警告。例如，如果你这样做，`x`可以为空！这本身可能会令人困惑，因为通常您希望通过引用传递的值保证为非空。但是，在这种情况下，引用可以指向一个空指针，如果我们尝试取消引用，这将导致异常。当然，取消引用空指针也会导致异常，但这是众所周知的。到目前为止，我还没有看到使用`const int* const &x`.

`int * const x`不等于。**_** 表示指针是const，但是我们可以改变x的值（即我们可以做）`const * const &x``int * const x``*x = 3`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:50:07.970

正如您所说，通过时`reference`，不会提供任何副本作为参数，而是通过引用绑定。

重要的是要理解在函数内部未更改的引用参数应该是对`const`.

程序员常犯的错误是将函数不会更改的参数定义为`plain old references`. 但是，这样做会给函数的调用者一种误导性的印象，即函数可能会改变其参数的值。在适用的情况下，最好使用 a `reference to const`，因为 a`plain reference`过度限制了可以与函数一起使用的参数类型。

在适用的情况下，因为如果您希望更改参数，那么它不**应该**有`const reference parameter`.

此外，类似于 a `reference to const`， a`pointer to const`没有说明指针指向的对象是否为`const`。定义一个指向的指针`const`只会影响我们可以用指针做什么。

还有关于指针`top-level const`的概念。`low-level const`A`top-level const`表示指针本身是 a `const`，而如果指针指向 a `const`，则指向的那个`const`被称为 a `low-level const`。

# python - 在 PyParsing 中显示评估步骤

> ID：15950806
> 
> 赞同：2
> 
> 时间：2013-04-11T14:01:28.557
> 
> 标签：python, pyparsing

在[上一个问题](https://stackoverflow.com/questions/2642650/how-to-evaluate-a-custom-math-expression-in-python)中，有人告诉我[PyParsing](http://pyparsing.wikispaces.com/)作为评估自定义数学表达式的一种方式。我仍然对使用它感兴趣，但为了这样做，我需要能够检索一些评估子步骤。例如，在示例文件[dice2.py](http://pyparsing.wikispaces.com/file/view/dice2.py)中，对于卷“4d20+5.5+4d6.takeHighest(3)”，我想要类似的内容：

```
4d20 + 5.5 + 4d6.takeHighest(3)
[2,6,13,18] + 5.5 + [2,2,5,6].takeHighest(3)
39 + 5.5 + [2,5,6]
44.5 + 13
57.5 
```

到目前为止，我一直无法找到任何方法来检索此信息。这可能吗？如果是这样，我怎么能得到它？

# pjsip - 从 pjsip-app 示例运行 streamutil.c 和 playfile

> ID：15950807
> 
> 赞同：0
> 
> 时间：2013-04-11T14:01:28.947
> 
> 标签：pjsip

我正在尝试从示例中运行 streamutil.c 和 playfile，但在运行它们时出现错误。在运行 streamutil 时，我收到此错误：

```
19:07:43.822 os_core_unix.c !pjlib 2.1 for POSIX initialized
PJLIB INIT COMPLETE
19:07:43.825       pa_dev.c  PortAudio sound library initialized, status=0
19:07:43.825       pa_dev.c  PortAudio host api count=1
19:07:43.825       pa_dev.c  Sound device count=0
19:07:43.825          pjlib  select() I/O Queue created (0x7c87b8)
a.out: ../src/pjmedia/codec.c:53: pjmedia_codec_param_clone: Assertion `pool && src' failed. 
```

在运行播放文件时，我收到以下错误：

```
19:08:35.703 os_core_unix.c !pjlib 2.1 for POSIX initialized
19:08:35.705       pa_dev.c  PortAudio sound library initialized, status=0
19:08:35.705       pa_dev.c  PortAudio host api count=1
19:08:35.705       pa_dev.c  Sound device count=0
19:08:35.706          pjlib  select() I/O Queue created (0x13db7b8)
19:08:35.706   wav_player.c  File player '/home/udit/pjsip/alarma.wav' created: samp.rate=22050, ch=1, bufsize=4KB, filesize=265KB
19:08:35.706     playfile.c  Unable to open sound device: Unable to find default audio device (PJMEDIA_EAUD_NODEFDEV) [code=420006] 
```

我进行了很多搜索并尝试了许多解决方案，但都没有奏效。我认为我的音频设备有问题，但音频设备很好（用 aplay-l 等命令检查）。请有人告诉我我应该怎么做才能让它运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T11:26:06.687

Ubuntu上的解决方案是这样的：

1- 安装**libasound2-dev**：`sudo apt-get install libasound2-dev`

2-重新编译Pjsip包

解决了我的问题！！

# tfsbuild - TFSBuild 错误消息 - 访问被阻止？

> ID：15950811
> 
> 赞同：0
> 
> 时间：2013-04-11T14:01:34.277
> 
> 标签：tfsbuild

我们的新构建服务器在测试运行完成后构建失败，当它尝试发布测试报告时日志中出现以下错误：

> 无法访问拖放共享目录“\devbuildserver2\Builds\Matrix5313\Matrix5313-2_20130411.9”。

该路径确实存在，但令人困惑的是，运行 Team Build Service 的域帐户对该路径中的每个文件夹具有完全控制权，并且 Builds 也是对该帐户具有完全控制权的共享。在底部文件夹 Matrix5313-2_20130411.9 内是完整的构建加上通常的 BuildLog.txt、ErrorwarningsLog.txt 等。似乎任何试图发布测试报告的东西都不允许访问 - 但如果不是构建服务，什么?

谁能建议还需要做什么才能发布测试报告并完成构建过程？

操作系统 = Win7-64 位，使用 VS Team System 2008。

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:27:36.370

您的 UNC 路径`\`开头缺少反斜杠字符。这也假设`devbuildserver2`是一个有效的服务器，并且服务器处于活动状态，在网络上通信，权限正确等。

```
Current:
\devbuildserver2\Builds\Matrix5313\...

Should be:
\\devbuildserver2\Builds\Matrix5313\... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T13:19:55.883

从未解决此问题，这似乎是 TFS 2008 和 Windows 7 之间的不兼容问题。我通过在构建服务器上运行 VPC 并在其上运行 Windows XP 作为放置位置来解决此问题。这很痛苦，因为我们现在必须让机器保持登录状态，以便 VPC 可以运行，但至少它可以工作。MS 支持人员除了花更多的钱将 TFS 升级到更高版本之外，基本上一无所知。这一切都是因为我们没有“被允许”将 XP 从旧的构建服务器移动到新的服务器，因此不得不升级到 Win7。想象一下，如果每次道路重新铺面时，您都必须用一辆新汽车更换您的汽车。

# google-drive-api - 如何在网站上使用 google documentviewer。（使用指向非公开文件的 googleId url）

> ID：15950813
> 
> 赞同：0
> 
> 时间：2013-04-11T14:01:40.793
> 
> 标签：google-drive-api

**我想知道如何使用这样的 url 查看文件：**

```
 https://docs.google.com/a/myDomain/viewer 
```

我一直在尝试这个：

```
 http://docs.google.com/viewer?url=https%3A%2F%2Fdocs.google.com%2Fa%2FmyDomain%2Ffile%2Fd%2FgoogleId%2F 
```

但我不断让观众看到一些奇怪的 html。

**有没有办法使用 id 或 API 制作这种 url？**

如何使用这种 url 查看某个文件。我也不想公开。

我一直在使用 webContentLinks 但这需要 adobe reader 或其他插件下载 pdf。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:37:23.140

如果您想将其作为可编辑的文档提供，请使用`alternateLink`. 如果您只想嵌入文档的只读版本，那`embedLink`就是您正在寻找的。

这两个属性都可以在`drive#file`类型上使用。

# http - 用于转换功能的 RESTful api 设计

> ID：15950815
> 
> 赞同：3
> 
> 时间：2013-04-11T14:01:56.770
> 
> 标签：http, rest

我正在使用 flask 为一个库构建一个 RESTful api。这个库基本上有一堆函数，它们接受 unicode 字符串的输入，并进行拼写检查/翻译/音译等。

正如我所看到的，功能是资源，当我发出请求时我正在创建一个转换，似乎我应该只创建一个 POST api。

另外，由于我没有存储任何东西，我应该使用 GET 吗？

非 CRUD Rest Api 还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:32:15.940

我认为你没有太多选择：

*   您的资源需要处理文本
*   提交文本的 RESTful 方式是通过实体主体
*   `GET`请求不支持实体主体

`POST`这实际上是和之间的一个选择`PUT`，而且这个选择很明确：你不是在创建资源，所以它不可能是`PUT`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:38:30.370

函数/方法不能是资源，因为这意味着您正在进行 RPC（远程过程调用）。资源只是信息的来源（名词，例如用户、事物等）。另一方面，RPC 是关于调用方法/函数（一个动词，例如 createUser()、doSomething()）。

REST 中的资源只是提供统一接口的信息源（在您提供的所有资源中统一，主要是 CRUD 操作）。

所以你有两个选择：

*   重新考虑您正在使用的库，找到专有名词并将它们发布为可通过统一界面访问的资源
*   放弃 RESTful API 需求并轻松实现库的 RPC 网关

# tomcat - osgi bundle 已解决，但在运行时出现异常 Unsupported major.minor 版本 51.0

> ID：15950819
> 
> 赞同：0
> 
> 时间：2013-04-11T14:02:02.863
> 
> 标签：tomcat, osgi, bundle

我有一个实现 osgi 框架的 tomcat 服务器，其中预先部署了 osgi 包来证明 jsp 和 servlets webapps。使用的 Tomcat 版本是 6.0.24。这个 tomcat 安装捆绑了一个流行的行业工具。我不应该安装任何版本的 java 或设置 JAVA_HOME 以使 tomcat 工作。JAVA libs 和 bin 由工具本身提供，提供的版本为 1.6。

我有兴趣将自己的捆绑包添加到现有的 tomcat 中。因此，我在另一台具有 java 1.7 的机器上开发并测试了一个示例包，并且所选编译器的兼容性为 1.6，该包在其他机器上运行良好。当我部署捆绑包时，它具有已解决的状态，但是当我尝试启动捆绑包时，它会抛出“不支持的 major.minor 版本 51”。

更新：显然我部署了一个旧版本的包，它仍然在 java 1.7 中编译，我重新编译了具有 1.6 兼容性的包，并且包现在处于活动状态。

```
 osgi> ss sample

    Framework is launched.

    id      State       Bundle
    77      RESOLVED    sample.http2_1.0.0.2

    osgi> start 77
    org.osgi.framework.BundleException: The activator sample.http2.Activator for bundle sample.http2 is invalid
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:157)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:750)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:352)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:280)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:272)
    at org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._start(FrameworkCommandProvider.java:253)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute(FrameworkCommandInterpreter.java:155)
    at org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand(FrameworkConsole.java:303)
    at org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(FrameworkConsole.java:288)
    at org.eclipse.osgi.framework.internal.core.FrameworkConsole.run(FrameworkConsole.java:224)
    at java.lang.Thread.run(Thread.java:619)
    Caused by: java.lang.UnsupportedClassVersionError: sample/http2/Activator : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:183)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:576)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:546)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:477)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass_LockClassLoader(ClasspathManager.java:465)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:445)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:211)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:376)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:452)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:405)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:393)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:105)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:321)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:231)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:150)
    ... 14 more
    Nested Exception:
    java.lang.UnsupportedClassVersionError: sample/http2/Activator : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:183)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:576)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:546)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:477)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass_LockClassLoader(ClasspathManager.java:465)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:445)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:211)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:376)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:452)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:405)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:393)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:105)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:321)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:231)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:150)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:750)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:352)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:280)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:272)
    at org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._start(FrameworkCommandProvider.java:253)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute(FrameworkCommandInterpreter.java:155)
    at org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand(FrameworkConsole.java:303)
    at org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(FrameworkConsole.java:288)
    at org.eclipse.osgi.framework.internal.core.FrameworkConsole.run(FrameworkConsole.java:224)
    at java.lang.Thread.run(Thread.java:619)
    Nested Exception:
    java.lang.UnsupportedClassVersionError: sample/http2/Activator : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:183)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.defineClass(ClasspathManager.java:576)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findClassImpl(ClasspathManager.java:546)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClassImpl(ClasspathManager.java:477)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass_LockClassLoader(ClasspathManager.java:465)
    at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:445)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:211)
    at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:376)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:452)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:405)
    at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:393)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:105)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:321)
    at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:231)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadBundleActivator(AbstractBundle.java:150)
    at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:750)
    at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:352)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:280)
    at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:272)
    at org.eclipse.osgi.framework.internal.core.FrameworkCommandProvider._start(FrameworkCommandProvider.java:253)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute(FrameworkCommandInterpreter.java:155)
    at org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand(FrameworkConsole.java:303)
    at org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(FrameworkConsole.java:288)
    at org.eclipse.osgi.framework.internal.core.FrameworkConsole.run(FrameworkConsole.java:224)
    at java.lang.Thread.run(Thread.java:619)

    osgi> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:47:50.210

您的类文件是为 Java 7（版本=51）编译的，但您（可能）在 Java 6（版本=50）上运行它，请参阅[wikipedia](http://en.wikipedia.org/wiki/Java_class_file)。

所以这只是虚拟机在一个未知的类文件上犹豫不决。请注意，java 有不同的兼容性设置。有 Java 源级兼容性和 Java 目标级兼容性。类格式文件版本由目标兼容性设置，请参见[另一个 stackoverflow 问题](https://stackoverflow.com/questions/10663450/whats-the-difference-between-source-and-target-compatibility.)。在 javac 中，您要指定 -target 1.6。

[当您在 OSGi 中使用 OSGi Bundle-RequiredExecutionEnvironment](http://wiki.osgi.org/wiki/Bundle-RequiredExecutionEnvironment)选项时，您可以在启动应用程序之前获得更易读的错误。

# jquery - jQuery 属性选择器中的美元符号是什么意思？

> ID：15950823
> 
> 赞同：16
> 
> 时间：2013-04-11T14:02:09.607
> 
> 标签：jquery, jquery-selectors, dollar-sign

有这个 jQuery 似乎在寻找所有带有 的元素`id="scuba"`，但是它使用 attr() 来拉出 id？“scuba”可以成为 id 的一部分，而 attr 会拉出整个 id 吗？我从未在属性选择器中看到 $ ，就像下面的示例一样。

```
$('*[id$=scuba]').attr('id') 
```

所以我的问题是：

1.  在这个例子中`$`or做什么`$=`
2.  这段代码有什么作用？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-11T14:04:55.707

**美元符号**

第一个`$`是`jQuery()`函数的简写，[jQuery 对象构造函数](http://api.jquery.com/jQuery/)。

换句话说，它是一个名为 的变量，它`$`被分配了一个名为 的函数`jQuery`，正如在未缩小版本的 jQuery 源代码中所见：`window.jQuery = window.$ = jQuery;`

**美元等号**

第二个`$`是名为[Attribute Ends With Selector](http://api.jquery.com/attribute-ends-with-selector/)的 jQuery 选择器的一部分。在属性选择器中使用时，`$=`是一个逻辑运算符，字面意思是“*如果左侧值以右侧值结尾，则为真*”。

**这个脚本实际上做了什么**

`id`总体而言，此代码段首先选择具有以 .结尾的属性的任何元素`scuba`。然后它从生成的 jQuery 对象中检索`id`第一个元素的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:06:04.407

此代码选择所有具有`id`以结尾的属性`scuba`并返回其`id`值的 DOM 元素。

不过，我很确定在 周围加上引号是一个更好的主意`scuba`。

# c# - SaveAsync 上的 ContactStore InvalidCastException

> ID：15950826
> 
> 赞同：1
> 
> 时间：2013-04-11T14:02:12.457
> 
> 标签：c#, windows-phone-8, task, contacts, async-await

我正在尝试将联系人保存到 Windows Phone (8) 联系人存储。

我的代码没有做任何非标准的事情：

```
private async Task SaveContactToLocalStore(IMyLocalContact myLocalContact) {

    var store = await ContactStore.CreateOrOpenAsync(ContactStoreSystemAccessMode.ReadWrite,
                ContactStoreApplicationAccessMode.LimitedReadOnly);

    var contact = new StoredContact(store);

    var properties = await contact.GetPropertiesAsync();

    if (!string.IsNullOrWiteSpace(myLocalContact.Nickname) {
        properties.Add(KnownContactProperties.DisplayName, myLocalContact.Nickname);
    }

    /* Several such addition operations are executed, all identical, except for the values */

    await contact.SaveAsync();
} 
```

在标记的函数中的某处，`async`我调用我的保存函数：

```
await SaveContactToLocalStore(myLocalCOntact); 
```

我收到以下错误：`System.InvalidCastException`在 contact.SaveAsync()

完整的错误文本：

```
System.InvalidCastException: Specified cast is not valid.
at System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess(Task task)
at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
at System.Runtime.CompilerServices.TaskAwaiter.GetResult() 
```

我什至不知道从哪里开始调查。MSDN 中的示例工作正常。

# html - 模板文件的变化，Magento

> ID：15950827
> 
> 赞同：0
> 
> 时间：2013-04-11T14:02:17.340
> 
> 标签：html, css, magento-1.7

我是 magento 的新手。对于主题，我正在更改模板文件中的 html 和 css。当我升级 magento 时会发生什么？我对magento了解不多。

请帮助我以良好的方式做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:10:45.417

看看这个关于如何升级的好教程。

他们说：

> 1) 学习更改日志
> 
> 您应该熟悉需要升级的最新应用程序版本的任何新更改和修改。升级应用程序需要完全了解该应用程序中的新功能和修改。
> 
> 2) 升级前备份以前的版本
> 
> 保持安全总比事后后悔要好。在升级任何应用程序之前，您应该始终对所有以前的文件、文件夹、包和数据库进行完整备份。
> 
> 3) 保留旧的源代码
> 
> 您永远不知道新的升级版本的应用程序何时停止工作，因此最好让您的旧资源始终准备好使用，以防出现任何问题或新资源突然无法正常运行。

**当您研究变更日志时，您可以查看实现主题/模板的方式是否发生了变化。如果没有，您可以将模板文件复制到新安装的 magento 中。**

[http://www.medma.net/knowledge-base/index.php?title=2&article=1](http://www.medma.net/knowledge-base/index.php?title=2&article=1)

# homebrew - brew install open-mpi 失败

> ID：15950836
> 
> 赞同：1
> 
> 时间：2013-04-11T14:02:49.990
> 
> 标签：homebrew, openmpi, ctype

尝试安装`openmpi`，请阅读：

```
Could not determine if REAL*16 bit-matches C type 
```

Ran brew doctor，它给了我：

```
Your system is raring to brew 
```

### 全输出

```
% brew install open-mpi

==> Downloading http://www.open-mpi.org/software/ompi/v1.6/downloads/openmpi-1.6.
Already downloaded: /Library/Caches/Homebrew/open-mpi-1.6.4.tar.bz2
==> Using Homebrew-provided fortran compiler.
This may be changed by setting the FC environment variable.
==> ./configure --prefix=/usr/local/Cellar/open-mpi/1.6.4 --enable-ipv6
checking alignment of Fortran REAL*16... 16
checking for C type matching bit representation of REAL*16... pending
checking if long double == REAL*16... ./configure: line 40736: 15744 Abort trap: 6 
$F77 $FFLAGS conftest_f.f conftest_c.o -o conftest $LDFLAGS $LIBS 1>&5 2>&1
Error!
configure: error: Could not determine if REAL*16 bit-matches C type

READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting

brew doctor 
Your system is raring to brew 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T05:50:30.773

Homebrew 中最近的 gfortran 版本存在一些问题。尝试重新安装它`brew rm gfortran; brew install --fresh gfortran`。如果错误仍然存​​在，请转到 Homebrew GitHub 页面并将其报告为错误：[https](https://github.com/mxcl/homebrew/wiki/Troubleshooting) ://github.com/mxcl/homebrew/wiki/Troubleshooting 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T05:14:38.917

gmp 和 mpfr 瓶似乎存在问题，它们是 gfortran 的依赖项，因此是 open-mpi。尝试做`brew rm gmp mpfr; brew install --build-from-source gmp mpfr open-mpi`

参考：[https ://github.com/mxcl/homebrew/issues/19046](https://github.com/mxcl/homebrew/issues/19046)

# concurrency - Mutex 解决方案中的测试和设置

> ID：15950838
> 
> 赞同：0
> 
> 时间：2013-04-11T14:02:53.397
> 
> 标签：concurrency, operating-system, mutual-exclusion

我正在尝试检查这个互斥体解决方案的正确性，并且需要检查**互斥、活性和公平性**是否都得到满足。L1 和 L2 是任意代码行。有2个进程同时运行。下面是进程i的代码，j的代码是对称的。

```
bool waiting[i] = false;
bool waiting[j] = false;
bool busy = false;

cobegin(process i)

L1: Si(1)
L2: Si(2)
    waiting[i] = true;
L3: while (waiting[i] and TST(busy));
L4: [ Critical Section ]
L5: waiting[i] = false;
L6: busy = false;
L7: while(waiting[j];
L8: Go to L2 
```

我得到所有三个属性都满意，但我只需要确保我没有错过任何东西。你能找到不满意的房产吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:15:13.887

在 L3 行，`waiting[i]`将始终为 true，因为您刚刚在上一行将其更改为 true。我认为这是不可分割`TST`的指令的硬件实现。`test_and_set`在这种情况下，您可以使用`while ( TST ( busy ) );`并且解决方案是正确的。这`waiting`面旗帜似乎没有任何用途。

# spss - 如何关联十类变量？

> ID：15950844
> 
> 赞同：1
> 
> 时间：2013-04-11T14:03:12.190
> 
> 标签：spss

假设我们有一个分类变量 X，它可以取 10 个值。这 10 个类别中的每一个都有计数。我想看看类别之间是否存在相关性。我将如何在 SPSS 中执行此操作？有没有办法将 X 分成 10 个子变量？

我去**分析--->相关--->双变量**，只能找到变量X（不是10个类别）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:21:49.523

听起来您有一个具有互斥类别的变量。如果是这种情况，那么如果变量等于特定类别，则意味着它不等于任何其他类别。因此，关联这样的变量是没有意义的。

如果您没有相互排斥的类别（即，您有有时称为多变量的内容），那么您的 10 个响应选项将在 SPSS 中表示为 10 个单独的变量。然后，您可能会使用它`Analyze - correlate - bivariate`来检查类别共现之间的关系。

# datetime - oracle 10g 将带有时间戳的日期列转换为 dd-mon-yyyy 格式

> ID：15950845
> 
> 赞同：0
> 
> 时间：2013-04-11T14:03:12.587
> 
> 标签：datetime, oracle10g, typeconverter

您好我正在尝试使用 DD-MON-YYYY 格式将定义为日期的列转换为日期，但无法正常工作

```
 select 
   to_date(to_char
   (DESIGN_COMPLETION_DATE,'DD-MON-YYYY'),'DD-MON-YYYY') as Assessment_Completion_Date
    from nbi_dates 
```

也试过

```
 Select to_date(DESIGN_COMPLETION_DATE,'DD-MON-YYYY') as Assessment_Completion_Date
    from nbi_dates 
```

有效的是，但我无法对其进行任何计算，因为它是 char

```
 Select to_char(DESIGN_COMPLETION_DATE,'DD-MON-YYYY') as Assessment_Completion_Date
    from nbi_dates 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:12:46.503

If you have a `DATE` that includes a time portion but are only interested in the actual date part, you can use the [`trunc`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions220.htm) function:

```
select trunc(design_completion_date) as assessment_completion_date from nbi_dates 
```

An example of the difference using `sysdate`; notice the time on the `trunc`'d version has been set to midnight:

```
SQL> alter session set nls_date_format = 'DD/MM/YYYY HH24:MI:SS';

Session altered.

SQL> select sysdate, trunc(sysdate) from dual;

SYSDATE             TRUNC(SYSDATE)
------------------- -------------------
11/04/2013 15:14:31 11/04/2013 00:00:00 
```

A `DATE` has no inherent format. `DD-MON-YYYY` is a format mask applied to display the date, or to convert it to a string representation, which is usually only necessary for display anyway. What you have as your third option is right for that purpose, but not if you want to do any further date calculations with the result.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:07:37.780

```
Select to_date(to_char(DESIGN_COMPLETION_DATE,'DD-MON-YYYY'),'DD-MON-YYYY') as Assessment_Completion_Date
from nbi_dates 
```

或者简单地说（如果您想要日期对象进行计算但不用于渲染）

```
 Select DESIGN_COMPLETION_DATE as Assessment_Completion_Date
from nbi_dates 
```

# apache-flex - showDataEffect 不适用于动态 LineSeries - Flex 4 移动 adobe air

> ID：15950846
> 
> 赞同：2
> 
> 时间：2013-04-11T14:03:15.500
> 
> 标签：apache-flex, mobile, air, mxml, linechart

在我的移动应用程序中，我试图在 mx:LineChart 中动态创建系列。它的工作。我需要做的是在数据更改时应用效果。在静态系列上它总是有效的，但它不是。当我为系列更改 dataProvider 时，所有图表都在刷新 - 所有系列都只是隐藏并显示在没有幻灯片效果的新位置

这是我的声明

```
<fx:Declarations>
    <mx:SeriesSlide id="slideIn" duration="500" direction="down"/>
    <mx:SeriesSlide id="slideOut" duration="500" direction="up"/>
</fx:Declarations> 
```

这是系列创作循环

```
var s:LineSeries = new LineSeries();
s.setStyle("showDataEffect",slideIn);
s.xField = "x";
s.yField = "y";
s.setStyle("form","segment");
allSeriesLC.series.push(s); 
```

在创建第一个系列之后，我直接对这些系列进行了所有更改 - 无需再次创建它们。图表 id="allSeriesLC"

```
(allSeriesLC.series[i]).dataProvider = someArrayCollection; 
```

有可能让它工作吗？

# sencha-touch - 在动态创建的按钮上设置操作

> ID：15950856
> 
> 赞同：0
> 
> 时间：2013-04-11T14:03:39.810
> 
> 标签：sencha-touch, sencha-touch-2

我正在开发 Sencha Touch 2 应用程序，其中一些按钮是根据从 JSON 返回的视频数量动态创建的。

我已经创建了按钮，但是如何对这些按钮设置操作。我的意思是如何识别按下了哪个按钮。

通常在配置中我们有：

```
 config:
       {
            layout: 'vbox',
            fullscreen: true,

            listeners:
                [
                   {
                        delegate: '#button1',
                        event: 'tap',
                        fn: 'itemClicked'
                   },
                ], 
```

此操作将仅为“button1”设置。那么，例如，我如何设置 10 个按钮的操作。在我的行动中，我如何识别按下了哪个按钮。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:24:33.733

多谢你们，

我将这些按钮添加到面板中。我使用以下代码解决了它：

```
var b_Panel = Ext.getCmp('bottompanel');
for(var i=0; i<20; i++)
  {
    var aButton = Ext.create('Ext.Button',
     {
        text:'button'+i,
        margin:8,
        id:'button'+i,
        itemId:i,
        listeners:
         {
           tap: function()
             {
                console.log("Item ID is: "+this.getItemId());
             }
         }
     });

b_Panel.add(aButton); 
```

}

谢谢，

# sql - 在 PostgreSQL 中查找给定月份的最后一个工作日

> ID：15950859
> 
> 赞同：3
> 
> 时间：2013-04-11T14:03:47.550
> 
> 标签：sql, postgresql, greenplum

在 PostgreSQL 中查找给定月份的最后一个工作日

用法：如果月末在星期六或星期日，则返回上一个星期五，否则使用月末

例子：

*   2013 年 3 月 31 日是星期天，所以返回 2013 年 3 月 29 日
*   2013 年 11 月 30 日是星期六，所以返回 2013 年 11 月 29 日

如何在 PostgreSQL SQL 中编写这个？

到目前为止，我所拥有的是（仅返回月末，但是当它们落在星期六或星期日时，月末不存在）：

```
SELECT as_of_dt, sum(bank_shr_bal) as bank_shr_bal 
  FROM hm_101.vw_gl_bal 
 WHERE as_of_dt = (date_trunc('MONTH', as_of_dt) + INTERVAL '1 MONTH - 1 day')::date 
GROUP BY 1 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:10:56.087

```
with s as (
    select *, (date_trunc('MONTH', as_of_dt) + INTERVAL '1 MONTH - 1 day')::date last_day
    from
    hm_101.vw_gl_bal
)
SELECT
    as_of_dt,
    gl_acct_nbr,
    cc_nbr,
    sum(bank_shr_bal) as bank_shr_bal
FROM s
WHERE as_of_dt = (
    last_day
    -
    (extract(dow from last_day) = 5)::int
    -
    2 * (extract(dow from last_day) = 6)::int
    )
GROUP BY 1,2,3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:52:45.193

[日历表](https://stackoverflow.com/a/5030686/562459)确实简化了此类查询的 SQL。（“weekdays”表实际上是基于日历表的视图。它的结构应该很明显。）

```
select max(cal_date)
from weekdays
where cal_date < '2013-05-01' 
```

或者

```
select max(cal_date)
from weekdays
where cal_date between '2013-04-01' and '2013-04-30' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T12:19:54.203

```
select 
case
  when extract(dow from first_day_of_month) = 0 then first_day_of_month 
  when extract(dow from first_day_of_month) = 1 then first_day_of_month - 1
  when extract(dow from first_day_of_month) = 2 then first_day_of_month - 2
  when extract(dow from first_day_of_month) = 3 then first_day_of_month - 3
  when extract(dow from first_day_of_month) = 4 then first_day_of_month - 4
  when extract(dow from first_day_of_month) = 5 then first_day_of_month - 5
  when extract(dow from first_day_of_month) = 6 then first_day_of_month - 6
  end as first_weekday_of_month,
case 
  when extract(dow from last_day_of_month)  = 6 then last_day_of_month 
  when extract(dow from last_day_of_month)  = 5 then last_day_of_month - 6 
  when extract(dow from last_day_of_month)  = 4 then last_day_of_month - 5 
  when extract(dow from last_day_of_month)  = 3 then last_day_of_month - 4 
  when extract(dow from last_day_of_month)  = 2 then last_day_of_month - 3 
  when extract(dow from last_day_of_month)  = 1 then last_day_of_month - 2 
  when extract(dow from last_day_of_month)  = 0 then last_day_of_month - 1
  end as last_weekday_of_month
from(
  SELECT   
    (date_trunc('month', current_date) -'7day'::interval)::date first_day_of_month,
    (date_trunc('month', current_date) -'1day'::interval)::date as last_day_of_month
)subquery; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:48:53.800

一种解决方案是使用 CTE，在数据中逐月查找最后一天以及每个月的实际最后一天

```
WITH s1
as
(
SELECT 
 date_part('YEAR', as_of_dt) AOD_Year
,date_part('MONTH', as_of_dt) AOD_Month
,(date_trunc('MONTH', as_of_dt) + INTERVAL '1 MONTH - 1 day')::date AOD_MonthEnd
,max(as_of_dt) AOD_LastFound
  FROM hm_101.vw_gl_bal
where (date_trunc('MONTH', as_of_dt) + INTERVAL '1 MONTH - 1 day')::date = '2013-03-31'
 group by 1, 2, 3
)
SELECT 
 s1.AOD_MonthEnd
,s1.AOD_LastFound
,sum(v.bank_shr_bal) as bank_shr_bal 
  FROM hm_101.vw_gl_bal v
 INNER JOIN s1
    on v.as_of_dt = s1.AOD_LastFound
 WHERE v.as_of_dt = '2013-03-29'  
 GROUP BY 1, 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T15:06:35.143

您想要做的是从该月的最后一天（您拥有）中删除 0 到 2 天。

通过提取星期几 (DOW) 并检查它是 0（星期日）还是 6（星期六），我们知道要删除多少天。

你可以这样做：

```
... - INTERVAL '1 day' * CASE date_part('DOW', last_day_of_month)
                             WHEN 0 THEN 2 -- Sunday, remove 2 days.
                             WHEN 6 THEN 1 -- Saturday, remove 1 day.
                             ELSE 0 -- Don't remove any days.
                         END 
```

为了便于阅读，我没有在其中包含完整的 last_day_of_month 计算。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T15:07:37.193

您实际上可以在没有 CTE 或存储过程的情况下执行此操作。

```
select 
case 
  when extract(dow from last_day_of_month) = 0 
    then last_day_of_month - 2
  when extract(dow from last_day_of_month) = 6 
    then last_day_of_month - 1
  else 
    last_day_of_month 
end as last_weekday_of_month
from(
  SELECT (date_trunc('MONTH', as_of_dt) 
    + INTERVAL '1 MONTH - 1 day')::date as last_day_of_month
  from hm_101.vw_gl_bal 
)subquery; 
```

# c# - 单击按钮后等待加载页面

> ID：15950860
> 
> 赞同：0
> 
> 时间：2013-04-11T14:03:48.363
> 
> 标签：c#, webbrowser-control, invokemember

我希望能够单击按钮，然后等待页面加载。我搜索，但没有正常工作的解决方案。这是代码的一部分：

```
el = webBrowser1.Document.GetElementById("LoginButton");
el.InvokeMember("click");
webBrowser1.Navigate(url); 
```

我需要它是点击后，应用程序将加载页面，然后才转到另一个页面。此外，`webBrowser1.Navigate(url)`必须与单击的方法相同。因为这一切都在一个循环中。

请帮忙。

**已编辑。** **更多代码**（第一个代码是我需要的示例）

```
List<string> list1 = new List<string>();

            bool flag = true;

            while (flag)
            {
                flag = false;

                foreach (HtmlElement he2 in webBrowser1.Document.GetElementsByTagName("a"))
                {
                    if (he2.GetAttribute("href").Contains("profile.php?ID="))
                    {
                        list1.Add(he2.InnerText);
                    }

                }

                foreach (HtmlElement he in webBrowser1.Document.GetElementsByTagName("a"))
                {

                    if (he.InnerHtml == "Next")
                    {
                        flag = true;

                        he.InvokeMember("click");

                    }
                }

            } 
```

当我单击时，必须加载下一页，并且我必须在下一页上解析标签，但它在下一页加载之前开始解析页面，因此它解析同一页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:12:31.973

最后，我刚刚从我的按钮中获得了 href 并使用了这段代码（由 he.InvokeMember("click") 代替）：

```
 webBrowser1.Navigate(url_next);
 while (webBrowser1.ReadyState != WebBrowserReadyState.Complete)
     Application.DoEvents(); 
```

它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:26:46.580

您可以使用该`DocumentCompleted`事件来了解登录何时完成。

```
webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
el = webBrowser1.Document.GetElementById("LoginButton");
el.InvokeMember("click");

void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    Uri myUrl = new Uri("http://stackoverflow.com");
    if (e.Url == myUrl)
    {
        WebBrowser1.Navigate(url);
    }
} 
```

# ios - 在 iOS 中通过 opencv 或 opengl 拉伸图像区域

> ID：15950864
> 
> 赞同：6
> 
> 时间：2013-04-11T14:03:57.607
> 
> 标签：ios, image, opencv, image-processing, opengl-es

我正在尝试在脂肪图像中制作双下巴，如下面我想要的结果图像中所述。

![在此处输入图像描述](https://i.stack.imgur.com/6DgfL.jpg)

我通过将图像包裹在网格上并使网格变形，将正常脸变形为胖脸。

1.  原始图像

![在此处输入图像描述](https://i.stack.imgur.com/SWX9P.jpg)

2.  网格上的包裹图像，顶点位移 ![在此处输入图像描述](https://i.stack.imgur.com/5tYjh.png)

3.  当前结果图像

![在此处输入图像描述](https://i.stack.imgur.com/SuZDl.png)

我通过排列网格点进行了很多尝试，但无法获得第一张图片中显示的结果。

任何想法如何通过在 iOS 中打开 GL 或打开 CV 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T06:58:59.263

从第一张图片可以明显看出，产生双下巴或三下巴的附加效果。
这实际上看起来像是混合到原始图像中的预设图像或混合到扭曲图像中的原始下巴的缩放和拉伸版本。

# html - header margin-top 切断我的背景图像

> ID：15950870
> 
> 赞同：0
> 
> 时间：2013-04-11T14:04:13.247
> 
> 标签：html, padding

标题描述了我的整个问题。我的页面上有一个页眉，页边距位于 : `margin: 20px 0;`。这使得与内容的距离为 20 像素，与页面顶部的距离也是如此。唯一的问题是我的背景图片没有在 20 像素以下开始。如果我将边距更改为：`margin: 0 0 20px 0`它解决了我最初的问题，但现在我的标题卡在窗口顶部。任何帮助表示赞赏，我的代码如下。

HTML

* * *

```
<body>
  <div class="background">
  <div class="inner">
    <header id="header" role="banner">
          <div class="headerbanner">

          </div>
            <div class="clear"></div>
    </header>
  </div>

        <div class="content contentBackground">
            <div class="contentForm">
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>

            </div>
            <div class="sidebar">
            <div class="contentChat contentBlock">

            </div>
             <div class="contentOnline contentBlock">

             </div>
            <div class="contentTwitter contentBlock">

            </div>
        </div>
        </div>      
</body> 
```

CSS

* * *

```
.clear{
    clear: both; 
}
.inner{
    width:980px;
    margin: 0 auto;
}
.background{
    background-image:url('THE_IMAGE_URL'); 
    background-color:grey;
  background-attachment: scroll;
}
#header{
    height:120px;
    margin: 20px 0;
  background-color:green;
  color:white;
  font-size:70px;
  text-align:center;
  font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
  border-radius:10px;
  border: solid 5px #000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:09:55.577

用于`display:inline-block`您的`.background`css 类。

```
.background{
    background-image:url('THE_IMAGE_URL'); 
    background-color:grey;
    display:inline-block;
} 
```

[JS 小提琴演示](http://jsfiddle.net/3UBNK/)

# mysql - 使用 SQL LIMIT 和 OFFSET 查询选择所有记录

> ID：15950871
> 
> 赞同：37
> 
> 时间：2013-04-11T14:04:16.237
> 
> 标签：mysql, sql, database, postgresql, sqlite

我想知道是否有办法完成：

```
SELECT * FROM table 
```

通过使用`LIMIT`和`OFFSET`像这样：

```
SELECT * FROM table LIMIT all OFFSET 0 
```

我可以**使用**LIMIT 和 OFFSET 编写 SQL 语句但仍然得到 ALL 结果吗？

**当然我可以使用一个`IF`语句，但如果可能的话我宁愿避免它*

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-11T14:08:49.520

从[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/select.html)：

> 要检索从某个偏移量到结果集末尾的所有行，您可以为第二个参数使用一些较大的数字。此语句检索从第 96 行到最后一行的所有行：
> 
> 从 tbl 限制 95,18446744073709551615 中选择 *；

因此，获取所有行可能如下所示：

```
SELECT * FROM tbl LIMIT 0,18446744073709551615; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T14:10:38.810

这可能不是最好的方法，但它是第一个想到的......

`SELECT * FROM myTable LIMIT 0,1000000`

将 1000000 替换为某个足够大的数字，您知道该数字将始终大于表中的记录总数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-26T10:50:01.190

我在 nodeJS 和 MySQL 中使用了这段代码，它运行良好，它可能会对你有所帮助。你为什么用它？

1.  它是可靠的，因为它是一个将附加查询的字符串。
2.  如果要设置限制，则可以将限制与变量一起使用，否则将 0 与变量一起传递。

    ```
    var noOfGroupShow=0;  //0: all, rest according to number   
    if (noOfGroupShow == 0) {
        noOfGroupShow = '';
    } 
    else {
        noOfGroupShow = ' LIMIT 0, '+noOfGroupShow;
    }
    var sqlGetUser = "SELECT `user_name`,`first_name`,`last_name`,`image`,`latitude`, `longitude`,`phone`,`gender`,`country`,`status_message`,`dob` as user_date_of_birth FROM `tb_user` WHERE `user_id`=?"+noOfGroupShow; 
    ```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-04T19:00:50.987

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-08T04:48:42.793

随着记录的增长，使用`mysql_num_rows`动态查找记录总数，而不是使用`some large number`.

```
$cektotalrec=mysql_query("SELECT * FROM TABLE");
$numoffset=mysql_num_rows($cektotalrec); 
$numlimit="0"; 
```

然后：

```
$final="SELECT * FROM table ".$numlimit.", ".$numoffset""; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-11T14:09:15.577

也许不是最干净的解决方案，但将限制设置为非常高的数字可能会起作用。偏移量必须为 0。

为什么不使用`IF`将限制和偏移量添加到查询的语句，因为语句是真的？

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-03-30T18:52:22.293

1.  如果将限制设置为 mysql doc 定义的非常高的数字，则可能会收到错误消息。因此，您应该尝试将其限制为 9999999999999，除非您将服务器设置为更高，否则更高可能会给您带来错误。

2.  您可能想在函数中使用 LIMIT，因此这不是一个坏主意。如果你在一个函数中使用它，你可能希望它在某一点是 Limit All 而在另一点是 limit 1。

3.  下面，我列出了一个示例，您可能希望您的应用程序没有限制。

函数 get_navigation($select = "*", $from= "pages", $visible= 1, $subject_id = 2, $order_by = "position", $sort_by = "asc", $offset=0, $limit = 9551615 ){ 全局 $connection;

```
$query = " SELECT {$select} ";
$query .= " FROM {$from}  ";

$query .= " WHERE visible = {$visible} ";
$query .= " AND subject_id = {$subject_id} ";

$query .= " ORDER BY {$order_by}  {$sort_by} ";
$query .= " LIMIT {$offset}, {$limit} ";

mysqli_query($connection, $query);
$navigation_set = mysqli_query($connection, $query);
confirm_query($navigation_set);
return $navigation_set;

}

define ("SELECT", "*");
define ("FROM", "pages");
define ("VISIBLE", 1);
define ("SUBJECT_ID", 3);
define ("ORDER_BY", "position");
define ("SORT_BY", "ASC");
define ("LIMIT", "0");

$navigation_set = get_navigation(SELECT, FROM, VISIBLE, SUBJECT_ID, ORDER_BY, SORT_BY); 
```

# javascript - 标记、信息窗口和自动缩放以适应所有标记

> ID：15950872
> 
> 赞同：0
> 
> 时间：2013-04-11T14:04:16.473
> 
> 标签：javascript, google-maps, google-maps-api-3

我一直在尝试创建一个具有可点击标记的谷歌地图，并且缩放级别适应地图上标记的数量，我有以下代码，我知道它不太正确，但无法弄清楚为什么，任何关于我哪里出错的指针将不胜感激！

```
<script type="text/javascript">
function initialize() {

  // My options
  var myOptions = {
    mapTypeId: google.maps.MapTypeId.ROADMAP,
  }

  // Create map on #map_canva
  var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

  // Define boundarys
  var markerBounds = new google.maps.LatLngBounds();

  // Create array
  var countries = [
      {title:'Theatre by the Lake', lat:54.32223562211788, lon:-2.742498400000045, content:"<h2>Theatre by the Lake</h2>"},
      {title:'Pirelli International Rally',  content:"<h2>Pirelli International Rally</h2>"},
      {title:'Lowther Castle',  content:"<h2>Lowther Castle</h2>"},
      {title:'South Lakes Wild Animal Park',  content:"<h2>South Lakes Wild Animal Park</h2>"},
      {title:'Cumbria Karting',  content:"<h2>Cumbria Karting</h2>"},
  ];

  // Create markers
  for (var i = 0; i < countries.length; i++) { 
      var c = countries[i]; 
      c.marker = new google.maps.Marker({
          position: new google.maps.LatLng(c.lat, c.lon), 
          map: map,
          icon: '/display_images/icon_stockist.png',
          title: c.title});
      c.infowindow = new google.maps.InfoWindow({content: c.content}); 
      google.maps.event.addListener(c.marker, 'click', makeCallback(c)); 
      // Create marker bounds
      markerBounds.extend(countries);
  } 

  // Create info windows based on above content
  function makeCallback(country) { 
      return function () { 
          country.infowindow.open(map, country.marker); 
      }; 
  }
}

// Fit map to marker boundaries
map.fitBounds(markerBounds);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:39:51.627

您的问题是您在初始化函数中将 map 创建为局部变量，然后在调用时尝试使用该函数访问它，而该函数`map.fitBounds`无法访问它。

要么声明 map outwith of `initialize`，要么在你的初始化函数中移动 map.fitBounds() 。

此外，当您调用 时`markerBounds.extend(countries);`，您将整个国家数组传递给它，而您真正需要的是传递一个单一的 LatLng 对象。尝试这样的事情：

```
for (var i = 0; i < countries.length; i++) { 
      var c = countries[i]; 
      var latlng = new google.maps.LatLng(c.lat, c.lon);
      c.marker = new google.maps.Marker({
          position: latlng, 
          map: map,
          icon: '/display_images/icon_stockist.png',
          title: c.title});
      c.infowindow = new google.maps.InfoWindow({content: c.content}); 
      google.maps.event.addListener(c.marker, 'click', makeCallback(c)); 
      // Create marker bounds
      markerBounds.extend(latlng);
  } 
```

# javascript - 用于选择复选框的 Javascript 代码在 IE8 中不起作用

> ID：15950883
> 
> 赞同：0
> 
> 时间：2013-04-11T14:04:38.570
> 
> 标签：javascript

我有以下代码可以切换选择具有特定名称的所有复选框。

该代码在基于 webkit 的浏览器中运行良好，但在 IE8 中根本不起作用。

选择全部切换，不会选择任何内容。

```
<label class="checkbox">

<input name="product" type="checkbox" id="7553" value="true" title="option1">
option1
</label>

<label class="checkbox">

<input name="product" type="checkbox" id="65693" value="true" title="option2">
option2
</label>

<label class="checkbox">
<input type="checkbox" onClick="toggle(this)"><strong>Select all</strong>
</label> 
```

这是JS

```
<script type="text/javascript">
function toggle(source) {
checkboxes = document.getElementsByName('product');
for(var i in checkboxes)
checkboxes[i].checked = source.checked;
}
</script> 
```

谁能明白为什么以上在 IE8 中不起作用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:06:20.527

可能是因为你不应该`for..in`在数组（或者，在这种情况下，一个类似数组的对象）上使用。

尝试这个：

```
for( var i=0, l=checkboxes.length; i<l; i++) {
    checkboxes[i].checked = source.checked;
} 
```

# windows-phone-8 - Windows phone 8 webbrowser 控件在 Dropbox 上保持空白

> ID：15950886
> 
> 赞同：0
> 
> 时间：2013-04-11T14:04:45.540
> 
> 标签：windows-phone-8, browser, dropbox

我尝试使用保管箱连接创建 WP8 应用程序，但在身份验证过程中遇到问题。从我下载的库中，我得到一个指向登录屏幕的 URL，以验证我的应用程序。这工作正常，但在我输入登录数据后，屏幕保持空白。这是 webbrowser 控件中的行为。如果我在 Internet Explorer 中打开相同的 URL，它可以正常工作，但这不是替代解决方案，因为我的应用程序在后台冻结，所以我必须通过`WebBrowser`控制来解决它。

我的 webview 类中唯一的代码是这样的：

```
webview.Source = new Uri(url, UriKind.Absolute); 
```

webview 是`WebBowser`控件，`url`包含登录页面的 url。

有谁知道可能的解决方案？用户按下登录按钮后，我是否必须做一些事情来更改页面，还是应该自动工作？或者是否可以通过我的应用程序观察 Internet Explorer 以便我可以使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:18:09.643

我已经找到了这个问题的答案。我必须将属性 IsScriptEnabled 设置为 true 才能启用 JavaScript。此值默认为 false。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462081(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462081(v=vs.105).aspx)

# angularjs - AngularJS - 过滤器可以改变结果吗？

> ID：15950898
> 
> 赞同：0
> 
> 时间：2013-04-11T14:05:09.927
> 
> 标签：angularjs, angularjs-ng-repeat

是否可以对过滤器`mutate`的结果进行过滤？假设我想编写一个过滤器，它实际上会在上一个列表中添加一些东西

```
module.filter('family',function(){
  return function(data,expand){
    var people = [];
    data.forEach(function(child){
      people.push(child);
      // here add something extra
      if (expand){
        // the problem here I just want to demonstrate is that I have to 
        // generate the father and mother on the fly.
        people.push(angular.$copy(child.father,{}));
        people.push(angular.$copy(child.mother,{}));
      }
    });
    return people;
  }
}); 
```

我接下来要做的是：

```
<ul>
  <li ng-repeat="person in children|faimly:true">
    {{person.name}}
  </li>
</ul> 
```

这样做安全吗？我担心这可能会导致多个`$digest()`或`$apply()`

**编辑**

可能这里的主要问题是，我每次都必须返回**同一个对象**（因为`$watch`会比较`===`，并且 afaik 在第一次渲染时至少有 2 个`$digest`正在进行）。因此我不能`generate`过滤器中的对象 - 会导致无限循环。我对吗？

`generate`过滤器中的额外结果是否有任何选项？我可以以某种方式缓存它们，或者欺骗角度认为它们是相同的吗？

# php - 根据用户检查的内容更新隐藏的输入

> ID：15950901
> 
> 赞同：0
> 
> 时间：2013-04-11T14:05:12.370
> 
> 标签：php, jquery, html, wordpress

我创建了一个测试系统，它有多个步骤（使用 jquery），允许用户检查复选框以选择他们的答案，并带有一个摘要页面和一个最终提交按钮......所有这些都在一个表单中。我现在想创建评分系统。

1）首先，这是从 Wordpress 中为每个问题获取答案的代码（在循环中）：

```
<input type="checkbox" name="answer<?php echo $counter; ?>[]" value="<?php echo $row['answer']; ?>" /> 
```

2) 在 Wordpress 中，每个答案旁边都有一个带有是或否选项的下拉菜单，用于标记答案是对还是错。这是通过以下方式输出的：

```
<?php $row['correct']; ?> 
```

3) 用户检查的每个正确答案应计 1 分。密码由以下字段确定：

```
<?php the_field('pass_mark'); ?> 
```

4）我希望它在用户检查正确答案时用分数更新隐藏字段：

```
<input type="hidden" value="<?php echo $score; ?>" name="test-score" /> 
```

**当用户检查正确答案时，如何使用用户分数更新隐藏字段？我不知道该尝试什么才能先尝试一下！**

* * *

好的，每个人都发现了一个大漏洞。我完全愿意以一种隐藏的方式这样做，这样人们就无法查看源代码。针对的用户类型不知道如何查看源代码，但最好从正确的方式开始！

整个测试都在一个表单中，所以它只能在提交时更新隐藏字段吗？

我仍然需要一些例子来说明如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:24:15.237

Spokey 是对的 - 如果您在客户端评分，就像使用您建议的方法一样，用户将能够作弊。

相反，用户可以调用 JQuery $.post 来发布每个答案，然后将分数存储在 PHP 会话中。或者只是等到整个表单被提交，然后在服务器端评估整个表单的分数。

*** 更新 ***

您必须将表单提交给可以评估表单的脚本。所以说它被提交到 myForm.php

在 myForm.php 中，获取帖子变量：

```
$correct_answers = $however_you_get_your_correct_answers(); 

//Assuming $correct_answers is a associative array with the same keys being used in post - 

$results = array();
if($_POST){
   foreach ($_POST as $key=>$value) {
      if ($_POST[$key] == $correct_answers[$key]){
          $results[$key] = 'correct';
      }
      else  $results[$key] = 'incorrect';
   }
} 
```

这是未经测试的，但它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:24:49.187

在我看来，您应该为此目的使用会话，因为任何浏览器输出都可以在任何文本编辑器中保存和查看。这不是正确的目的哦隐藏的输入元素。当您需要自动提交某些内容时，您会使用隐藏输入，但在处理一些重要数据时永远不要使用它。

通过映射您的问题和答案`id`将允许您不透露真实的答案和分数`HTML`。

只是一个非常简单的例子如何做到这一点：

```
<?php 
  $questions = array(
    125 => array("text"=>"2x2?", "answer"=>"4", 'points'=>3),
    145 => array("text"=>"5x6?", "answer"=>"30", 'points'=>2),
  );
?>

<form method="post">
  <?php foreach ($questions as $id => $question): ?>
    <div><?php echo $question['text'] ; ?></div>
    <input type="text" name="question<?php echo $id ; ?>"/>
  <?php endforeach ; ?>
  <input type="submit" value="Submit"/>
</form>

/* In submission script */
<?php
if (isset($_POST['submit'])){
  foreach($questions as $id => $question){
    if (isset($_POST["question{$id}"])){
      $answer = $_POST["question{$id}"] ;
      if ($answer === $question['answer']){
        $_SESSION['score'] += $question['points'] ;
      }
    }
  }
} 
```

# python - 如何使绘图区域的迷你示例显示一些东西

> ID：15950904
> 
> 赞同：2
> 
> 时间：2013-04-11T14:05:17.170
> 
> 标签：python, pygtk, drawingarea

我写了一个小例子`DrawingArea`，启动时什么都不显示。如果我插入一个`raw_input()`只是为了在特定位置等待键盘按下，它会起作用，所以这是一种解决方法。这是代码：

```
#!/usr/bin/env python

import pygtk
pygtk.require('2.0')
import gtk

R = 300

window = gtk.Window(gtk.WINDOW_TOPLEVEL)
window.set_default_size(R, R)
drawing_area = gtk.DrawingArea()
window.add(drawing_area)
window.show_all()
gc = drawing_area.get_style().fg_gc[gtk.STATE_NORMAL]

if 0:
  raw_input()

drawing_area.window.draw_line(gc, R/10, R/10, R*9/10, R*9/10)

raw_input() 
```

此版本在打开的窗口中不显示画线；在 shell 中按 enter 后，它将终止（并删除窗口）。但是如果我启用`raw_input()`at`if 0:`块，它会等待两次在 shell 中输入，并且在两次输入之间它会显示绘制的线（所以通常代码可以工作，这似乎只是一个奇怪的刷新问题）。

我还尝试使用以下代码片段刷新 GTK 的事件队列：

```
while gtk.events_pending():  # drain the event pipe
  gtk.main_iteration() 
```

我把它插在不同的地方，总是无济于事。

我还尝试了通常`gtk.main()`作为脚本中最后一个命令的命令（当然）。但这也没有帮助。

我该如何正确地做到这一点，为什么`raw_input()`会有这种奇怪的副作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:36:05.230

您应该连接到绘图区域的`expose-event`信号。那是您应该尝试在绘图区域上绘制的唯一位置；这样做的原因是，当窗口最小化或另一个窗口在其上移动时，您绘制的任何内容都会再次被擦除。但是，expose 事件总是在正确的时间发生，因此您可以在需要时随时更新绘图。

像这样：

```
def on_drawing_area_expose(drawing_area, event, data=None):
    # ... do your drawing here ...

drawing_area.connect('expose-event', on_drawing_area_expose) 
```

还可以查看 Cairo 绘图，这是首选且更灵活的方式。[这](http://zetcode.com/gui/pygtk/drawing/)是一个教程。

# extjs - 分页工具栏 EXTJS 4 无法在网格中正确显示页面

> ID：15950907
> 
> 赞同：0
> 
> 时间：2013-04-11T14:05:30.770
> 
> 标签：extjs, extjs4

例如，我设置 pagesize = 2，但分页工具栏始终显示结果的总数。例如：“1 of 30”应该在页面中显示 2。网格正确显示两行，但 tbar 显示此消息并且导航按钮被禁用。有人对此有类似的问题，或对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:09:18.853

您需要在商店中设置 pageSize：[http](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-pageSize) ://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-pageSize 在创建期间。

```
var store = Ext.create('Your.data.Store', {
    pageSize: 2
}); 
```

# c++ - LNK2019 XAudio2Create - 未解析的符号

> ID：15950909
> 
> 赞同：0
> 
> 时间：2013-04-11T14:05:34.273
> 
> 标签：c++, com, xaudio2

我正在尝试与 DirectX SDK 取得联系。我设法安装它，创建了一个新的`Win32 Console Project`并添加了以下行

```
#include <iostream>
#include <xaudio2.h>

int main(int argc, char *argv[]){
IXAudio2* pXAudio = 0;
IXAudio2MasteringVoice *pXAudioMasterVoice = 0;
HRESULT hr;

CoInitializeEx(NULL, COINIT_MULTITHREADED);

hr = XAudio2Create(&pXAudio, 0, XAUDIO2_DEFAULT_PROCESSOR);
if(FAILED(hr)){
    CoUninitialize();
    return hr;
}

hr = pXAudio->CreateMasteringVoice(&pXAudioMasterVoice);
if(FAILED(hr)){
    pXAudio->Release();
    CoUninitialize();
    return hr;
}

CoUninitialize();
std::cout << "Done!" << std::endl;
} 
```

文档说，没有`xaudio2.lib`链接到，但它是一个`COM`-object，但我明白了`LNK2019 - unresolved external symbol "__imp__XAudio2Create@12"`

[这](http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.xaudio2.xaudio2create%28v=vs.85%29.aspx)是文档。

谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:33:13.917

[XAudio2Create](http://msdn.microsoft.com/library/windows/desktop/microsoft.directx_sdk.xaudio2.xaudio2create.aspx)不是 COM，它是标准的 DLL 导出，因此您需要与 Xaudio2.lib 链接。该库在`%Program Files%\Windows Kits\8.0\Lib\win8\um`（随 Windows 8 SDK 一起安装）中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-17T19:13:14.853

派对迟到了，但我通过遵循[此处](https://code.msdn.microsoft.com/windowsdesktop/XAudio2-Win32-Samples-024b3933)的 Windows 示例并确保我的包含如下所示：

```
#include <xaudio2.h>
#pragma comment(lib,"xaudio2.lib") 
```

# javascript - 多个画布图像随机出现

> ID：15950914
> 
> 赞同：1
> 
> 时间：2013-04-11T14:05:47.993
> 
> 标签：javascript, asp.net, html, html5-canvas

我正在尝试将不同的图像应用于多个画布。

图像被传递到在后面的代码中生成的 json 数组中，然后通过绘图循环到特定的画布。

现在这似乎有时会起作用，有时会渲染有时不会。

所以这里是代码。

```
function renderPlayer() {
        var imagesList = <%=imageList %>;
        var size = imagesList.length;
        for(var key in imagesList)
        {
            var image = imagesList[key][1];
            var gridPosition = imagesList[key][0];
            var playerCanvas = document.getElementById(gridPosition);
            window.context2 = playerCanvas.getContext("2d");
            //context2.save();
            playerCanvas.setAttribute("width", 97);
            var imageObj = new Image();
            imageObj.src = image;
            context2.drawImage(imageObj, 0, 10, 97, 97);
         }
    } 
```

上面的代码将它们放置在我期望它们的位置，但不是每次呈现页面时。

然而，下面的代码似乎只渲染最后一张图像。

```
 function renderPlayer() {
        var imagesList = <%=imageList %>;
        var size = imagesList.length;
        for(var key in imagesList)
        {
            var image = imagesList[key][1];
            var gridPosition = imagesList[key][0];
            var playerCanvas = document.getElementById(gridPosition);
            window.context2 = playerCanvas.getContext("2d");
            //context2.save();
            playerCanvas.setAttribute("width", 97);
            var imageObj = new Image();
            imageObj.onload = function(){
            context2.drawImage(imageObj, 0, 10, 97, 97);
            };
            imageObj.src = image;

         }
    } 
```

有没有人有任何建议为什么这可能不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:13:40.543

第一个示例失败了，因为您需要等待图像加载后才能在画布中绘制它。随机性是由于有时图像会在您运行`context2.drawImage(..)`命令时加载而有时不会，通过将此代码放在`onload`图像的处理程序中，您应该保证图像数据存在。

第二个例子看起来更好，但你应该改变`onLoad`并`onload`移动线条

```
var playerCanvas = document.getElementById(gridPosition);
var context2 = playerCanvas.getContext("2d"); 
```

在`for`循环之外，还要注意对第二行的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:15:43.427

同样的老问题......你所有的图像`onload`方法都引用了一个，并且`imageObj`每次循环都会被覆盖。

```
for(var key in imagesList)
{
    var image = imagesList[key][1];
    var gridPosition = imagesList[key][0];
    var playerCanvas = document.getElementById(gridPosition);
    window.context2 = playerCanvas.getContext("2d");
    //context2.save();
    playerCanvas.setAttribute("width", 97);
    (function(){
        var imageObj = new Image();
        imageObj.onload = function(){
           context2.drawImage(imageObj, 0, 10, 97, 97);
        };
        imageObj.src = image;
    })();
 } 
```

通过包装在一个立即执行的功能块中，每个都`imageObj`成为它自己的变量，每个 onload 函数都会*捕获*它。

# javascript - JavaScript：变量为假但如果语句为真？

> ID：15950918
> 
> 赞同：-1
> 
> 时间：2013-04-11T14:05:56.717
> 
> 标签：javascript, boolean

我有这个JS代码：

```
var show = elm.hasClassName('level0') ? false : true;
if(show) {
  doSomething()
} 
```

我正在使用 FireBug 检查 show 的值，它清楚地表明**false**。在调试时，我注意到无论如何都会调用 doSomething 函数。我错过了什么？

使用 if(false) 不会运行 doSomething 函数。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:34:42.463

从您显示的任何代码（！！！），我相信您的调试是错误的。可能是你看到的价值

`elm.hasClassName('level0')` 作为 `false`

但是，`var show = elm.hasClassName('level0') ? false : true;`手段`show`将被设置为倒数`elm.hasClassName('level0')`

只需`alert(show)`在 if 条件上方添加一个，然后查看打印的内容。看到这个小提琴[http://jsfiddle.net/g4Zqp/1/](http://jsfiddle.net/g4Zqp/1/)它工作得很好。

如果不是这种情况，你需要把你的完整代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:12:29.837

Try this

```
if( !elm.hasClassName('level0')) {
  doSomething()
} 
```

# python - NVM 无法在 Cygwin 中安装任何版本的 Node.js

> ID：15950919
> 
> 赞同：3
> 
> 时间：2013-04-11T14:06:02.680
> 
> 标签：python, node.js, cygwin, nvm

我已经了解到 Node.js 在新版本中选择不支持 Cygwin，但 NVM 也无法安装旧版本。我得到的错误：

```
$ nvm install v0.4.12
Additional options while compiling:
######################################################################## 100.0%
C:\Python27\python.exe: can't open file '/home/wvxvw/.nvm/src/node-v0.4.12/tools\
/waf-light': [Errno 2] No such file or directory
nvm: install v0.4.12 failed! 
```

*（为便于阅读而格式化）*

我认为这是因为 Python 二进制文件不知道 Cygwin 样式的路径（并且找不到`/home/`目录）我尝试从源代码（相同版本）构建并且面临同样的问题）。但是我不确定该怎么做。我不想将 Windows 中安装的 Python 更改为可以通过 Cygwin 安装的 Python。如果这个错误不仅仅是冰山一角，我可能只是更改 Makefile。

这个问题是针对那些可能会说尝试“修复”Makefile是否有意义的人，或者我应该只使用Cygwin的Python版本（它的问题是非常错误`fork`的，但我认为我可以忍受......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-17T14:45:07.743

命令不正确，请使用没有v的版本。尝试：**nvm install 0.4.12**

# mysql - 你能对 SHOW COLUMNS 或 DESC 的输出进行排序吗？

> ID：15950921
> 
> 赞同：2
> 
> 时间：2013-04-11T14:06:16.057
> 
> 标签：mysql, sql, database, sorting

是否可以（轻松）对 SHOW COLUMNS 或 DESC MySQL 命令的输出进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:38:20.030

您可以使用对表名进行排序，`order by`但您必须`select`将`information_schema`下面的列名按`alphabetical`顺序排列

```
SELECT column_name
FROM information_schema.columns
WHERE table_name = 'table_name' ORDER BY column_name 
```

# c++ - 如何访问像数组一样的元组（括号重载和类型安全）？

> ID：15950924
> 
> 赞同：1
> 
> 时间：2013-04-11T14:06:19.780
> 
> 标签：c++

我正在尝试构建一个可以像数组一样访问的元组类。我可能会把事情变成 (void *) 但这会破坏模板的目的，因为我试图获得类型安全。

我正在使用 VS2010 pro 进行编译。我当前的非工作解决方案会产生以下错误。

错误：“项目 &MyList::operator”：无法推断“N”的模板参数。

```
#include <tuple>
#include <stdio.h>

template <int size, typename Ty0, 
typename Ty1=std::tr1::_Nil, typename Ty2=std::tr1::_Nil, typename Ty3=std::tr1::_Nil,
typename Ty4=std::tr1::_Nil, typename Ty5=std::tr1::_Nil, typename Ty6=std::tr1::_Nil, 
typename Ty7=std::tr1::_Nil, typename Ty8=std::tr1::_Nil, typename Ty9=std::tr1::_Nil>
struct MyList {
    std::tuple<Ty0, Ty1, Ty2, Ty3, Ty4, Ty5, Ty6, Ty7, Ty8, Ty9> items;

    template <int N, typename Ty>
    Ty &operator[](int N) {
        auto &var = std::get<N>(items);
        return var;
    }
};

void main() {
    MyList<2, int, double> list;
    auto var = list[0];
} 
```

**潜在的解决方案：（编辑）**

1.  [具有同质数据的可变参数模板](http://cpptruths.blogspot.com/2012/01/array-like-access-and-iterators-for.html)
2.  [使用 constexpr C++11](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3413.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:34:50.510

这取决于你想用什么来索引元*组*。如果您使用的是运行时整数，那么显然您无法获得类型安全；编译器无法知道要返回什么类型（其他在元组是同质的情况下，见上文）。

另一方面，如果您只是在使用下标语法，则可以使用具有适当类型的索引对象来执行此操作，例如（用于说明）现成的`std::placeholders`：

```
template<typename T>
typename std::tuple_element<std::is_placeholder<T>::value,
  std::tuple<Ty0, Ty1, Ty2, Ty3, Ty4, Ty5, Ty6, Ty7, Ty8, Ty9>>::type &
operator[](T) { return std::get<std::is_placeholder<T>::value>(items); } 
```

用法：

```
using namespace std::placeholders;
auto var = list[_1]; 
```

# git - 如何摆脱 git 分支/拉取请求中不需要的更改？

> ID：15950926
> 
> 赞同：3
> 
> 时间：2013-04-11T14:06:24.970
> 
> 标签：git, github, git-merge, pull-request, gitx

常见场景：贡献者发送包含 1 或 2 个有用更改以及由他的 IDE 自动进行的*大量*（我不需要的）空白更改的拉取请求。

当然，我可以告诉他调整他的 IDE，并使用 GitX 之类的工具在提交之前进行特定的更改，但*损害已经造成*；要么他必须重新提交并强制推送，我必须接受所有更改，或者我们中的一个人必须在合并之前添加一个“撤消”提交。

**有没有更简单的方法？**

理想情况下，我可以像 GitX 中的提交过程一样合并：我可以从分支中取消暂存特定更改，并且该工具将自动重写提交或在合并之前进行“撤消”提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T20:21:50.220

您在本地摆脱了空白更改，开发人员将看到您不接受的所有空白更改作为针对她的版本的更改，等等。只是痛苦蔓延四方。

唯一的出路是就*一种*空白样式达成一致（可能由工具强制执行，或者在提交之前由外部工具完成）。统一为所有人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:45:48.347

就个人而言，我会告诉贡献者进行更改并重新提交+强制推送更改。由于贡献者可能正在你的 repo 的一个分支（“起源”）中处理一个特性分支，所以没有人关注他的提交。如果贡献者在没有人关注的分支上重写历史记录，并且在您拉入更改后可能会被删除，则不会造成真正的损害。为此，贡献者还可以创建一个具有最终合并的新功能分支-能够更改，发出新的拉取请求，并删除旧的分支和拉取请求（这样就不会重写历史记录）。

# mysql - 可以在sql查询中选择一个表来对结果进行分组吗

> ID：15950929
> 
> 赞同：0
> 
> 时间：2013-04-11T14:06:29.183
> 
> 标签：mysql

您好，我只是想知道是否可以在 sql 查询中选择表名作为结果的一部分，例如，当使用 UNION 连接 2 个表时，您可以指定每个结果的来源，因为到目前为止我必须添加一个额外的列调用`type`每个表来指定，似乎有更好的方法

```
SELECT id, name, type
FROM table1
UNION ALL
SELECT id, name, type
FROM table2
LIMIT 20` 
```

结果 = id、名称、类型 id、名称、类型

但我想仍然拥有类型/表名而不选择它，甚至不把它放在我的表中

请让我知道这是否可能，或者如果这是唯一的方法，请提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:08:32.137

试试这个：

```
SELECT id, name, type, 'table1' AS FromWhichTable
FROM table1
UNION ALL
SELECT id, name, type, 'table2'
FROM table2
LIMIT 20 
```

# iphone - 图像的像素化效果

> ID：15950930
> 
> 赞同：0
> 
> 时间：2013-04-11T14:06:30.343
> 
> 标签：iphone, objective-c, ios5, uiimage, imagefilter

我需要将像素化或模糊之类的过滤器应用于 UIimage 的一部分。虽然它与过滤器**CIPixellate**一起工作正常，但问题是这个过滤器可用于 ios 6 或更高版本。

我希望那里有专家可以帮助我解决这个问题：

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:59:14.070

[GPUImage](https://github.com/BradLarson/GPUImage)可以为您做到这一点。它是一个开源框架，与 iOS 5.0+ 兼容，另外一个好处是它可以在 GPU 上进行图像渲染工作，因此速度更快，并带有用于像素化图像的过滤器。

有关更多详细信息，请参阅[此答案](https://stackoverflow.com/questions/5049041/how-do-i-perform-a-fast-pixellation-filter-on-an-image)。

# java - 如何在 Jython 中使用 ExpectJ？

> ID：15950937
> 
> 赞同：1
> 
> 时间：2013-04-11T14:06:57.217
> 
> 标签：java, python, jython, expectj

在我们公司，我们出于某种原因使用 Jython。我需要用 ExpectJ 扩展它，但我不知道该怎么做。

我设法下载了**expectj-2.0.7.jar**、**expectj-2.0.7-sources.jar**和**expectj-2.0.7-javadoc.jar**文件，并使 Jython 和 Java 本身也可以访问它们。

所以我可以在我的 python 脚本中导入它，JVM 也可以找到 jars（通过使用[类路径加载程序 hack](http://www.jython.org/jythonbook/en/1.0/appendixB.html#working-with-classpath)）。但是根据[ExpectJ 的文档](http://expectj.sourceforge.net/apidocs/index.html)，还是有问题。

```
import expectj

ex = expectj.ExpectJ()                       # I cannot use the second form of the
                                             # constructor where I can pass a timeout
                                             # parameter

sh = ex.spawn(targetshell, 22, usr, passw)   # There is no spawn method in 
                                             # ExpectJ - but why??? 
```

这就是我卡住的地方。为什么 ExpectJ 对象没有`spawn`方法？有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T20:09:40.657

以下解决方案是确保生成的进程在执行下一个命令之前完成。它保证循环“发送-期望-等待发送中发送的命令完成”，然后“再次发送-再次期望-等待完成”。

为了等待命令提示符完成执行生成的进程，请使用`shell.expect("")`. 如果在此之后还有进一步的 expectJ send 和 expect 命令，则可以确保顺序执行。如果没有等待它已经派生的进程完成就执行`shell.expect("")`下一步，在以下情况下，scp 命令在发出下一个命令之前完成。`shell.send("exit\n")`

```
import expectj
expectinator = expectj.ExpectJ();
shell = expectinator.spawn(expectj.SshSpawn(host_name, 22, usr_name, ssh_pwd));
shell.send("scp -r src:usr:dest" + "\r")
shell.expect(remote_box_usr + "'s password:");
shell.send(ssh_pwd + "\r");
shell.expect("");
shell.send("exit\n");
shell.expectClose(); 
```

# web-services - 为什么符合 WS-I Basic Profile 很重要？

> ID：15950938
> 
> 赞同：7
> 
> 时间：2013-04-11T14:06:58.217
> 
> 标签：web-services, soap, wsdl

我看到很多人反对 WS-Transfer，说 WS-Transfer WSDL 它不符合 WS-I BP。一个例子是[here](http://stage.vambenepe.com/archives/193)。在阅读了几次之后，我仍然不明白为什么它必须符合要求。不符合 WS-I BP 是否意味着您不能在 JBossWS 中使用它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-20T20:42:04.117

> Web 服务是一种软件系统，旨在支持网络上可互操作的机器对机器交互。它有一个以机器可处理格式（特别是 WSDL）描述的接口。其他系统使用 SOAP 消息按照其描述所规定的方式与 Web 服务交互，通常使用带有 XML 序列化的 HTTP 以及其他与 Web 相关的标准来传达。
> 
> [http://www.w3.org/TR/2004/NOTE-ws-gloss-20040211/#webservice](http://www.w3.org/TR/2004/NOTE-ws-gloss-20040211/#webservice)

这就是理论。但在实践中，由于不同的人以不同的方式理解规范（结合许多异构平台、工具、应用程序和编程语言），最终结果是一团糟，导致供应商实现之间存在差异。这些差异影响了“可互操作的交互”，因此使不同的实现相互通信是一场噩梦。

必须做一些事情才能使不同的实现真正具有互操作性。 [WS-I](http://www.ws-i.org/)是朝这个方向迈出的一步：它提供了一套关于如何使用不同的规范来创建可互操作的 Web 服务的指南。还提供了一组[工具](http://www.ws-i.org/deliverables/workinggroup.aspx?wg=testingtools)来针对不同的实现测试这些指南。

> 为什么符合 WS-I Basic Profile 很重要？

基本上，WS-I Basic Profile 提供了有关如何结合使用 SOAP、WSDL 和 UDDI 等规范来开发可互操作的 Web 服务的指南。这很重要，否则您将限制您的目标受众。Web 服务旨在连接到其他组件，并且使每个组件都符合 WS-I 将使工作更容易，无论平台、工具、应用程序或编程语言如何。

在私有环境中使用不符合 WS-I 的 Web 服务，在其中为所有组件使用相同的技术堆栈可能最终不会成为问题，但是当向公众公开 Web 服务时，WS-I 基本配置文件很重要，因为它：

> 将显着简化在企业边界内和跨企业边界实施可互操作的 Web 服务解决方案的任务。
> 
> [http://www.internetnews.com/dev-news/article.php/2247551](http://www.internetnews.com/dev-news/article.php/2247551)

# postgresql - 使用 ST_Contains() 缓慢更新

> ID：15950939
> 
> 赞同：2
> 
> 时间：2013-04-11T14:06:58.723
> 
> 标签：postgresql, postgis, postgresql-performance

```
UPDATE tbl
SET city=s.city_name
FROM shp AS s
WHERE
ST_CONTAINS(s.city_geom,geom); 
```

使用上面的代码，我可以将确切的城市添加到 GPS 点。它在 5000 万行上运行大约 45-50 分钟。“城市”表中大约有 4000 个城市需要检查。

我有另一个形状文件，其中包含给定国家/地区的 19 个县（只有 1 个国家/地区）。将县添加到点大约需要 1.5 小时。

我有 52 个欧盟国家的第三个形状文件。它使用相同的 sql 查询运行了将近 25 个小时。

每个表都有 geom 索引，例如：

```
CREATE INDEX idx_txt_geom ON txt USING GIST(geom); 
```

**问**：为什么只检查几个多边形就这么慢？

解释分析：

```
Update  (cost=0.00..324.85 rows=1 width=286) (actual time=353.932..353.932 rows=0 loops=1)
  Buffers: shared hit=73090 read=1
  ->  Nested Loop  (cost=0.00..324.85 rows=1 width=286) (actual time=0.544..341.936 rows=471 loops=1)
        Join Filter: _st_contains(s.geom, prob.geom)
        Buffers: shared hit=69985
        ->  Seq Scan on world s  (cost=0.00..83.44 rows=244 width=48) (actual time=0.009..0.319 rows=244 loops=1)
              Buffers: shared hit=81
        ->  Index Scan using idx_prob_geom on prob  (cost=0.00..0.73 rows=1 width=270) (actual time=0.003..0.024 rows=9 loops=244)
              Index Cond: (s.geom && prob.geom)
              Buffers: shared hit=533
Total runtime: 354.640 ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T15:35:36.540

ST_CONTAINS 不能使用索引。尝试这个：

```
UPDATE tbl
SET city=s.city_name
FROM shp AS s
WHERE
(geom && s.city_geom) and ST_CONTAINS(s.city_geom,geom); 
```

`&&`检查边界框并使用索引。

# java - Java 文件“顶部”父级

> ID：15950942
> 
> 赞同：0
> 
> 时间：2013-04-11T14:07:09.467
> 
> 标签：java, file, scala

我有一个 java.io.File，例如

```
/foo/bar/baz 
```

在这种情况下，我想获取文件的“顶级”父级

```
/foo/ 
```

显然，这是 Linux 特有的——我不关心跨平台兼容的解决方案，但如果是这样，它会更优雅！

在 Scala 中，我设法想出的最好的方法如下：

```
def topParent( file : File ) : File =
{
    var temp = file
    while ( temp.getParent != "/" ) temp = temp.getParentFile
    temp
} 
```

它具有以下行为：

```
scala> topParent( new java.io.File( "/foo/bar/baz" ) )
res14: java.io.File = /foo 
```

但这似乎有点不雅。有没有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:58:49.080

正如 bmorris591 在评论中指出的那样，有一个递归解决方案可以在函数样式中使用尾递归执行相同的操作：

```
@tailrec def topParent(file: File): File = 
    if(file.getParent == "/") file else topParent(file.getParentFile) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:59:01.237

您可能想使用`getCanonicalFile`它来确保它的格式正确。

我不确定您认为哪种更优雅；无论如何，您都必须一路走回来。你也可以做类似的事情

```
def topParent(file: File): Option[File] = {
  Iterator.iterate(file.getCanonicalFile)(_.getParentFile).
    takeWhile(_ != null).
    toList.
    reverse.
    drop(1).
    headOption
} 
```

这至少避免了两次获得父母。

# backbone.js - 访问嵌套主干集合

> ID：15950944
> 
> 赞同：1
> 
> 时间：2013-04-11T14:07:22.030
> 
> 标签：backbone.js, backbone-views

下面是我用（FacetModels）填充我的收藏

如何访问 AvailableValues[] 数组

> “FacetModels”：[ { “FacetDisplayLabel”：null，“SelectedValues”：[]，“AvailableValues”：[]，“UnknownResults”：0，“ActionURI”：null，“FacetGroupName”：“Category”，“FacetGroupFriendlyId”： "SourceCategory", "FacetGroupOrder":10, "AllowSuggestions":false },

这是我的观点，你会看到我只能访问 FacetModels 数组，我需要能够传递 FacetModels[0].AvailableValues.Name 以便我可以显示每个类别名称

```
CategoryListItemView = Backbone.View.extend({
    tagName: "li",
    className: "category",
    initialize: function (options) {
        this.template = _.template( $("#categorylist_template").html());
    },
    render: function () {
        var category = this.model
        console.log(category);
        console.log(this.model.toJSON());
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    }
}); 
```

从控制台显示

a.Model {cid: "c2", attributes: Object, collection: r, _sharing: false, _previousAttributes: Object...} _sharing: false _events: Object _pending: false _previousAttributes: Object attributes: Object ActionURI: null AllowSuggestions: false数组 [8] 0：对象 ActionURI：“/api/search?firstname=thomas&firstname_variants=true&lastname=smith®ion=all&sourcecategory=armed%20forces%20utf0026%20conflict”计数：8943 DisplayLabel：“武装部队与冲突”IsUnknown：假名称：“武装部队与冲突” **原型**：对象 1：对象 2：对象 3：对象 4：对象 5：对象 6：对象 7：对象长度：8 **原型**：Array[0] FacetDisplayLabel：空 FacetGroupFriendlyId：“SourceCategory”FacetGroupName：“Category” " FacetGroupOrder：10 SelectedValues：数组 [0] UnknownResults：0**原型**：对象已更改：对象 cid：“c2”集合：r **原型**：对象

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:19:22.077

在您的视图中，javascript 数组可通过 this.model.get('AvailableValues') 获得。如果您需要将可用值作为主干集合，则可以覆盖 parse 以使用集合而不是数组填充 AvailableValues 属性。

还有一些其他的SO问题有这样的例子：

*   [骨干js-fetching-a-more-complex-data-and-using-as-a-collection](https://stackoverflow.com/questions/10020123/backbone-js-fetching-a-more-complex-data-and-using-as-a-collection)
*   [如何覆盖主干解析函数](https://stackoverflow.com/questions/12037984/how-to-override-backbones-parse-function)

# macos - 在 Mac OS 上安装 Adob e Air 3.7 SDK for Flex

> ID：15950945
> 
> 赞同：1
> 
> 时间：2013-04-11T14:07:23.450
> 
> 标签：macos, apache-flex, mobile, air, adobe

这听起来很简单，可能应该如此，但我只花了 3 个小时试图让最基本的设置运行起来，我迷失在 Adob​​e 创建的混乱中。我遵循了一些教程和文档，但似乎都没有工作。

我想要的只是使用最新的 Air 3.7 SDK 生成一个用于移动项目的 Flex。

*   我尝试了替换现在深深隐藏在 flashbuilders eclipse 文件夹中的 airsdk 的步骤。这只允许我用 3.7 为移动项目创建一个动作脚本，而不是 Flex 项目。

*   我尝试下载应该适用于 flex 开发人员的 Air sdk ( [http://airdownload.adobe.com/air/mac/download/latest/AdobeAIRSDK.tbz2](http://airdownload.adobe.com/air/mac/download/latest/AdobeAIRSDK.tbz2) )。我将这些文件叠加到现有的 Flex 4.6.0 文件夹中。结果是 Flashbuilder 不再将该文件夹识别为 Flex SDK。

我还在 PC 上尝试了后一步，到目前为止，我可以为 ipad 上的移动应用程序编译和调试 flex（使用快速模式）。标准模式和导出版本构建以永无止境的打包过程结束（现在 1.5 小时用于 hello world 应用程序，仍为 0%）

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:43:13.730

Apache Flex 在 flex-sdk 存储库的开发分支中有一些脚本可以帮助您。

`git clone [https://git-wip-us.apache.org/repos/asf/flex-sdk.git](https://git-wip-us.apache.org/repos/asf/flex-sdk.git) sdk
cd sdk
git checkout develop` 

（github 镜像有点过时，所以不能发布文件的直接链接抱歉）

查看 ide 目录，你会看到：

addAIRToSDK.sh - 这会将 AIR SDK 下载并合并到 Flex SDK checkAllPlayerGlobals.sh - 检查并下载 playerglobal.swc 的所有版本 setFlahsPlayerVerion.sh - 设置 Flex SDK 中的最低 Flash 播放器版本

这些脚本支持 AIR 3.7 和 Flash Player 11.7。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:05:53.070

我犯的错误是将文件从 AIRSDK 复制到 Flex SDK 文件夹中。这将在 PC 上运行，但 macOS Finder 不会按预期合并文件夹，最终文件会被删除。

合并文件夹的正确方法是使用 resync，如这篇文章 [Use Adob​​e Air 3.3 SDK with Flash Builder 中所述](https://stackoverflow.com/questions/10975151/use-adobe-air-3-3-sdk-with-flash-builder?rq=)

# c# - 何时使用 DbSet .Add() 与 DbSet 。附（）

> ID：15950946
> 
> 赞同：33
> 
> 时间：2013-04-11T14:07:26.293
> 
> 标签：c#, asp.net-mvc, entity-framework

我一直在使用`Add()`并遇到一个问题，即当一个孩子在数据库中复制一个父实体`Add`。使用`Attach()`解决了这个问题，但我想知道为什么而不是盲目地跌跌撞撞。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-11T14:19:57.823

好吧，当您使用`Attach`时告诉上下文实体已经在数据库中，`SaveChanges`对附加实体没有影响。`Add`另一方面，将上下文中实体的状态（如果它已经存在）更改为，这意味着当您调用 时`Added`，它将**始终**`SaveChanges`将实体插入数据库中。

这就是区别。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-04-30T20:48:46.627

> **在 ef-core 的情况下**

**附加**适用于向具有导航属性的数据库添加新实体的情况。**附加**仅将新创建的项目标记为已**更改**。

假设您要向行业添加新员工。如果数据库中已经存在该行业，则它必须有一个 ID。并且您要添加的 Employee 尚未插入到数据库中，因此它还没有 ID（*我在这里谈论的是行 ID*）。

所以 attach 所做的是因为 Industry 已经有一个 ID。附加标记为**Unchanged**。并且您还没有 ID 的 Employee 将其标记为已**添加**。

您可以在此处阅读有关此主题的更多信息：[https ://www.learnentityframeworkcore.com/dbcontext/modifying-data#attach](https://www.learnentityframeworkcore.com/dbcontext/modifying-data#attach)

# c# - 在 .cs 文件之间使用变量和常量

> ID：15950948
> 
> 赞同：0
> 
> 时间：2013-04-11T14:07:31.050
> 
> 标签：c#, variables, constants

我对 C# 和一般编程非常陌生，并且在使用单独的 .cs 文件中的变量和常量时遇到问题。我以前问过这个问题并得到了一些答案，但我认为我问错了，因为没有一个答案真正回答了我的问题。好的答案我想我只是提出了错误的问题。所以又来了。

我有一个类，其中包含一个常量列表，这些常量在名为 Common.cs 的文件中永远不会更改，并且这些常量需要在其他文件（如 Weapons.cs 文件）中引用。我遇到的问题是我总是收到一个错误，指出常量/变量“在当前上下文中不存在”。我不确定我做错了什么或错过了什么，但我确信这很简单。到目前为止，这是我的代码示例：

这是其中包含常量的类：

```
namespace MechLab
{
    public static class Common
    {
        public const int NUMBER_OF_EQUIPABLE_SECTIONS = 6;
        public const int NUMBER_OF_CRITICAL_SECTIONS = 8;
        public const int NUMBER_OF_SECTIONS = 11;
        public const int UNKNOWN_LOCATION = -1;
        public const int RIGHT_ARM = 0;
        public const int LEFT_ARM = 1;
        public const int RIGHT_TORSO = 2;
        public const int LEFT_TORSO = 3;
        public const int CENTER_TORSO = 4;
        public const int HEAD = 5;
        public const int RIGHT_LEG = 6;
        public const int LEFT_LEG = 7;
        public const int RIGHT_REAR_TORSO = 8;
        public const int LEFT_REAR_TORSO = 9;
        public const int CENTER_REAR_TORSO = 10;
        public const int BOTH_SIDE_TORSOS = 11;
        public const int BOTH_ARMS = 12;

        public const int NUMBER_OF_HARDPOINT_TYPES = 4;
        public const int BALLISTIC = 0;
        public const int ENERGY = 1;
        public const int MISSILE = 2;
        public const int AMS = 3;
        public const int OMNI = 4;

        public const int AMMO = 3;
        public const int OTHER = 4;
        public const int SELECTED = 5;

        public const double SRM_DAMAGE = 2.5;
        public const double LRM_DAMAGE = 1.8;
        public const double SRM_RECYCLE = 3.5;
        public const double LRM_RECYCLE = 3.25;
        public const double SRM_DELAY = 0.25;
        public const double LRM_DELAY = 0.5;
        public const double LRM_IMPULSE = 0.8;
        public const int SRM_RANGE = 270;
        public const int MRM_RANGE = 450;
        public const int LRM_MIN_RANGE = 180;
        public const int ENHANCED_LRM_MIN_RANGE = 90;
        public const int LRM_RANGE = 630;
        public const int LRM_MAX_RANGE = 1000;
        public const int EXTENDED_LRM_MIN_RANGE = 300;
        public const int EXTENDED_LRM_RANGE = 1140;
        public const int EXTENDED_LRM_MAX_RANGE = 1140;
        public const int SRM_SPEED = 300;
        public const int STREAK_SRM_SPEED = 200;
        public const int LRM_SPEED = 100;

        public const int ARTEMIS_CRITICALS = 1;
        public const int ARTEMIS_COST = 1;
        public const double ARTEMIS_TONNAGE = 1.0;

        public const int LASER_RANGE_MOD = 2;
        public const int PROJECTILE_RANGE_MOD = 3;

        public const int INTERNALS = 0;
        public const int ARMOR = 1;
        public const int INTERNALS_TOTAL = 8;
        public const int ARMOR_TOTAL = 8;

        public const int NUMBER_OF_MAIN_SECTION = 6;
        public const int NUMBER_OF_LESSER_SECTION = 3;
        public const int NUMBER_OF_MAIN_SECTION_CRITICALS = 12;
        public const int NUMBER_OF_LESSER_SECTION_CRITICALS = 6;

        public const int BALLISTIC_MAX_RANGE_MOD = 3;
        public const int ENERGY_MAX_RANGE_MOD = 2;

        public const int LOWER_ARM_ACTUATOR = 0;
        public const int HAND_ACTUATOR = 1;

        public const int UNKNOWN_ITEM_TYPE = 0;
        public const int COMPONENT_ITEM_TYPE = 1;
        public const int WEAPON_ITEM_TYPE = 2;
        public const int AMMO_ITEM_TYPE = 3;
        public const int EQUIPMENT_ITEM_TYPE = 4;
        public const int HEAT_SINK_ITEM_TYPE = 5;
        public const int JUMP_JET_ITEM_TYPE = 6;
        public const int ARMOR_ITEM_TYPE = 7;
        public const int INTERNAL_ITEM_TYPE = 8;
        public const int CASE_ITEM_TYPE = 9;
        public const int ENGINE_ITEM_TYPE = 10;
        public const int OTHER_ITEM_TYPE = 11;

        public const int TORSO = 0;
        public const int ARM = 1;
        public const int NUMBER_OF_MOVING_SECTIONS = 2;
        public const int YAW = 0;
        public const int PITCH = 1;
        public const int AXIS_OF_MOVEMENT = 2;

        public const double DOUBLE_HEAT_SINK_DISSIPATION = 1.4;
    }
} 
```

这是我的 Weapons.cs：

```
namespace MechLab
{
    public class Weapons
    {
        public int tons;
        public int heat;
        public int crits;
        public int minRange;
        public int maxRange;
        public int effectiveRange;
        public string hardpointType;
        public bool artemisCapable;
        public int ammoCount;
        public double damage;
        public double knock;
        public string weaponName;
        public int cost;
        public string equipmentName;
        public string shortName;

        void AC10()
        {
            equipmentName = "Autocannon 10";
            shortName = "AC10";
            crits = 7;
            cost = 400000;
            hardpointType = BALLISTIC;
            minRange = 0;
            maxRange = effectiveRange * PROJECTILE_RANGE_MOD;
            effectiveRange = 450;

        }
    }
} 
```

我看不出有什么问题，但是对于编码来说真的很陌生，我敢肯定我错过了一些相当明显的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T14:10:07.933

您的常量在`Common`类中，因此当您从`Weapon`类中引用它们时需要包含类名。

```
void AC10()
{
    equipmentName = "Autocannon 10";
    shortName = "AC10";
    crits = 7;
    cost = 400000;
    hardpointType = Common.BALLISTIC;
    minRange = 0;
    maxRange = effectiveRange * Common.PROJECTILE_RANGE_MOD;
    effectiveRange = 450;
} 
```

### 更新：

正如其他人所说，你的一些常量——你不会真正需要值的“类型”常量——可能会`enum`像 Marco 的回答那样更好。它们将在编译时获得分配值，但您实际上并不需要知道它们。

如果您有要使用其值的常量，请*保持*原样。我也会把他们分成不同的班级。似乎有一些根本不同的常量集，你目前用空格分隔，可以移动到它们自己的类中。具有描述性的类名将提高可读性和理解代码的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:47:34.810

对于一些常量，我建议将它们分组为枚举。这将增加您的代码的可读性

例如：

```
public enum Location
{
    UNKNOWN,
    RIGHT_ARM,
    LEFT_ARM,
    RIGHT_TORSO,
    LEFT_TORSO,
    CENTER_TORSO,
    [...]
}

public enum HardpointType
{
    BALLISTIC,
    ENERGY,
    MISSILE,
    AMS,
    OMNI
} 
```

这将在以后证明非常有用，因为我会考虑

```
MountWeapon(Location.RIGHT_ARM, HardpointType.BALLISTIC); 
```

比更容易理解

```
MountWeapon(1, 0); 
```

# c++ - 将字符串拆分为向量 C++

> ID：15950949
> 
> 赞同：0
> 
> 时间：2013-04-11T14:07:35.733
> 
> 标签：c++, visual-studio-2010, visual-c++

我一直在研究以下代码；它打开一个输入文件，读取输入，现在我希望获取该输入（存储在一个字符串中）并用空格分割它；将每个元素输入一个整数向量。

我了解如何进行类型转换。问题在于分裂。我如何有效地做到这一点？我想使用 while 循环或 for 循环，除非我无法索引字符串。我将字符串转换为常量 char，以便可以对其进行索引，但现在我无法将字符串中某个点的值与 if 语句中的表达式“”进行比较。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:13:11.960

Compare the current symbol to ' '.

# fortran - fortran 可以告诉你一系列变量使用了多少字节

> ID：15950952
> 
> 赞同：1
> 
> 时间：2013-04-11T14:07:46.537
> 
> 标签：fortran

假设我有一堆变量 a,b,c

```
integer*4 a
integer*8 b
real*8 c 
```

有没有办法在不手动计算的情况下确定这些变量使用了多少字节。我有一长串变量，我需要知道它们的大小以用于写出目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:34:11.387

在 Fortran 2008 中，内在函数[`storage_size`](http://gcc.gnu.org/onlinedocs/gfortran/STORAGE_005fSIZE.html)是要走的路。还有，[`c_sizeof`](http://gcc.gnu.org/onlinedocs/gfortran/C_005fSIZEOF.html)很有用。

对于 Fortran 95 中的整数，您可以使用[`bit_size`](http://gcc.gnu.org/onlinedocs/gfortran/BIT_005fSIZE.html).

如果您需要声明具有特定存储大小的变量，请使用模块中的种类常量，`iso_fortran_env`例如`real32`.

当然，如果您使用过时的和非标准的声明，`integer*4`或者`real*8`您总是知道字节数。它是星号后面的数字（定义为数字类型中可以存储的默认字符数）。

如果您需要一些变量集合的大小，您可以使用相同的组件创建派生类型：

```
type,sequence :: dummy_t
  integer*4 a
  integer*8 b
  real*8 c
end type
type(dummy_t) :: dummy 
```

并使用`storage_size(dummy)`或使用内部构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T15:25:26.577

如果您使用 gfortran/ifort，您可以使用 sizeof ( [gcc](http://gcc.gnu.org/onlinedocs/gfortran/SIZEOF.html) ) /( [IBM](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlf101l.doc%2Fxlflr%2Fsizeof.htm) ) 命令。不确定其他编译器。

# umbraco - Umbraco 模板网站

> ID：15950955
> 
> 赞同：0
> 
> 时间：2013-04-11T14:07:53.037
> 
> 标签：umbraco

是否可以在 Umbraco 中创建模板化的多站点设置。我的具体意思是，有没有一种方法可以让用户在 Umbraco 中创建一个新站点，但该站点已经设置了模板和项目，这些模板和项目在创建时预填充到新站点中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:52:53.223

快速回答是否定的。但请查看我对[umbraco 微型网站的](https://stackoverflow.com/a/11226912/1110395)回答，了解一些可能的解决方法。我认为您可能必须为要使用的每个“模板”创建多个副本文档类型，以便当用户创建新的“站点”时，他们可以选择要使用的“模板”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T18:29:17.643

我建议研究持续集成。我过去曾探索过这种可能性，并且已经走了很远。问题是在我完成之前，一个新版本出来了，我的大部分代码都坏了！:-)

查看 Anthony Dang 的视频，了解他如何制作空解决方案的单击部署。我喜欢这个家伙一直在创造的一些东西。希望这也正是您所追求的！

[http://thecogworks.co.uk/blog/posts/2012/november/automation-sparta-standard-naming-across-the-project-universe/](http://thecogworks.co.uk/blog/posts/2012/november/automation-sparta-standard-naming-across-the-project-universe/)

YouTube 上还有一段视频，他在其中谈到了他们是如何做到的。

[http://www.youtube.com/watch?v=WxE0qu4W0go](http://www.youtube.com/watch?v=WxE0qu4W0go)

# c - 在客户端代码中使用 fseek() 时 NFS 性能有问题

> ID：15950958
> 
> 赞同：1
> 
> 时间：2013-04-11T14:08:11.610
> 
> 标签：c, optimization, parallel-processing, mpi, nfs

我正在使用 MPI 开发一个简单的并行应用程序，其中涉及将文件加载到内存中。该文件通过 NFS 导出到计算机集群的节点。我注意到在某些情况下，随着数千个额外的 TCP 数据包从服务器传输到客户端，NFS 的性能会显着下降，我已经将问题定位在代码中 fseek() 的使用上：

```
//Seek to data and load them to array
fseek ( fp, ( unsigned int ) dec_number + start, SEEK_SET );

for ( i = 0; i < n * mpi_n; i++ ) {
    if ( ! feof ( fp ) )
        text[i] = fgetc ( fp );

    if ( i > 0 && n > mpi_n && i % mpi_n == 0 )
        fseek ( fp, n - mpi_n, SEEK_CUR );
}
fclose ( fp ); 
```

由于没有 fseek() 的相同代码可以正常工作，因此服务器是否有可能在每次 fseek() 之后实际重新发送文件的一部分？如何提高这种性能？

```
Time with cold NFS cache, without fseek(): ~4 sec
Time with hot NFS cache, without fseek(): ~3 sec
Time with cold NFS cache, with fseek(): ~12 sec
Time with hot NFS cache, with fseek(): ~3 sec 
```

具有 10 个节点的集群、具有冷 NFS 缓存和 fseek() 的 300MB 文件的 nfswatch 快照：

```
Total packets:
1903459 (network)   544803 (to host)        0 (dropped)

Packet counters:
NFS3 Read:                  116290      21%
NFS3 Write:                     10       0%
NFS Read:                        0       0%
NFS Write:                       0       0%
NFS Mount:                       0       0%
Port Mapper:                     0       0%
RPC Authorization:              29       0%
Other RPC Packets:               0       0%

TCP Packets:                544386     100%
UDP Packets:                    17       0%
ICMP Packets:                    0       0%
Routing Control:                 0       0%
Address Resolution:              0       0%
Reverse Addr Resol:              0       0%
Ethernet Broadcast:              0       0%
Other Packets:                  49       0% 
```

具有 10 个节点的集群、具有冷 NFS 缓存且没有 fseek() 的 2GB 文件的 nfswatch 快照：

```
Total packets:
251804 (network)   102650 (to host)        0 (dropped)

Packet counters:
NFS3 Read:                   37039      36%
NFS3 Write:                      1       0%
NFS Read:                        0       0%
NFS Write:                       0       0%
NFS Mount:                       0       0%
Port Mapper:                     0       0%
RPC Authorization:               2       0%
Other RPC Packets:               0       0%

TCP Packets:                102543     100%
UDP Packets:                    30       0%
ICMP Packets:                    1       0%
Routing Control:                 0       0%
Address Resolution:              0       0%
Reverse Addr Resol:              0       0%
Ethernet Broadcast:              0       0%
Other Packets:                  41       0% 
```

使用以下挂载命令挂载客户端：

/nfs on /nfs 类型 nfs (rw,rsize=8192,wsize=8192,timeo=14,intr)

# iphone - MKMapView setting userLocation

> ID：15950961
> 
> 赞同：0
> 
> 时间：2013-04-11T14:08:17.390
> 
> 标签：iphone, ios, objective-c, ios5, mapkit

My map view should work in 2 modes: with enabled Location Services and with disabled. If user disables locations services, application must give him the opportunity to manually set his current location. Also application should display blue pin that looks like `MKUserLocation` default pin. But the problem is `userLocation` property is **readonly**. And according to [apple's documentation](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKUserLocation_Class/Reference/Reference.html) about `MKUserLocation`

> You do not create instances of this class directly.

Can someone help me to solve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:10:45.887

You should provide your own blue pin. System blue pin is considered to be used as read only and if you'll try to use it in some other way that will certainly lead to problems. So if you need some custom current location pin behavior you should implement your own pin for sure. Use CLLocationManager to update location if location services are enabled.

# .net - WPF UserControl / View中的QueryString

> ID：15950967
> 
> 赞同：0
> 
> 时间：2013-04-11T14:08:27.550
> 
> 标签：.net, wpf, navigation, query-string, modern-ui

我正在尝试使用`<mui:ModernTab.Links>`UserControl 中的集合来显示包含项目列表的视图。理想情况下，我希望标签显示在列表中的一类数据。我正在考虑动态填充列表并使用查询字符串传递所选类别，但我不确定如何从我的视图（这是一个用户控件）中获取查询字符串数据。有没有更好的方法来做到这一点？也许我可以将一种样式应用于包含使其看起来像现代 UI 选项卡列表的项目的 ListBox？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:40:30.540

使用 ModernUI 框架的解决方案是使用 NavigationFrame 的上下文，MUI 为其提供了帮助程序。

[这个主题有更多信息](http://mui.codeplex.com/discussions/436518)。

# actionscript-3 - Flex 3.6 中的方向属性不起作用

> ID：15950968
> 
> 赞同：0
> 
> 时间：2013-04-11T14:08:30.260
> 
> 标签：actionscript-3, apache-flex, actionscript, flex3, arabic

根据文档：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Label.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Label.html)

属性方向在 flex 3 中可用，但您必须从样式中使用它，而不是像在 flex 4.5 中那样直接从文本字段中使用

所以我设置：

```
<mx:Style>
    .myFontStyle {
    direction: "rtl";
    }
</mx:Style> 
```

和：

`<mx:Label id="rtlLabel" styleName="myFontStyle"/>`

当我使用 flex 4.6 但不适用于 3.6 时它正在工作，有什么建议为什么或我做错了什么？或者，也许您知道处理阿拉伯语和希伯来语的任何不同方式？它可能是纯动作脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:36:43.403

请注意，[方向](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Label.html#style%3adirection)样式的文档说：

> 注意：此样式仅适用于 MX 组件将 UIFTETextField 指定为其 textFieldClass 时。

因此，要完成这项工作，您还需要设置[textFieldClass](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/Label.html#style%3atextFieldClass)样式：

```
<mx:Style>
    .myFontStyle {
    direction: "rtl";
    textFieldClass: ClassReference("mx.core.UIFTETextField");
    }
</mx:Style> 
```

我只是尝试将其作为测试，但是在使用 Flex 3 SDK 时，不包括此类（至少在我的环境中），并且我收到一个编译错误，说它找不到`UIFTETextField`. 我不经常使用 Flex 3 SDK，所以我可能只有一个旧版本（我正在使用这个 SDK：Flex 3.6A 和 Flash Builder 4.6）。但是，我有一种感觉，这种 RTL 功能仅在使用 Flex 4 SDK 时才存在……所以您只能在使用 Flex 4 SDK`<mx:Label />`进行编译时使用 with RTL 文本——尽管我不确定这有什么意义那将是。

我检查了`<mx:Label />`班级中的代码，但找不到任何对`direction`样式或`textFieldClass`文档所述此类定义的样式的引用。所以希望这只是意味着我的 3.6A SDK 刚刚过时。

但是，如果您查看`UIComponent`Flex 4 SDK 中的代码，它会谈到使用上述两种样式。但是`UIComponent`我的 Flex 3 SDK 中的类根本没有提到这些样式。也许你的 Flex 3 SDK 比我的好，或者也许其他人可以解释这部分。

# php - php code of frames not executed in public_html

> ID：15950973
> 
> 赞同：0
> 
> 时间：2013-04-11T14:08:40.177
> 
> 标签：php, ubuntu, apache2, public-html

I have a php site main.php in the `public_html` dir, which sources several frames:

```
<html>
<head>
<title>My Site</title>
</head>
<frameset rows="55, *, 0" frameborder="no">
    <frame id='headerFrame' src="headerFrame.php" scrolling="no">
    <frame src="mainPages/a.php">
    <frame src="mainPages/b.php">
</frameset>
</html> 
```

The php code tags in main.php (not shown) are executed correctly by the server, but when I review the frame sources in the browser, I see uninterpreted php tags in the html:

headerFrame.php:

```
<?php
include 'base.php';
?>
<html>
... 
```

How comes that main.php is interpreted, but headerFrame.php not? When I move the page to `/var/www/mypage/` this works out all well.

Environment: Ubuntu 12.10, apache2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:12:48.297

I found the error on my own, which is not completely evident in the posted snippet:

There where many includes with relative paths in the php scripts. And relative paths for `include` are handled differently for `/var/www/mypage` and `~/public_html/mypage`.

The former one considers relative paths relative to the running script file location, whereas the latter one handles relative paths relative to the main dir (`~/public_html/mypage`).

As in the latter case the included php files where not found, the php tags where dumped instead of interpreted by the apache server.

I use the default apache2 configuration for Ubuntu 12.10, except that I enabled the userdir.

# c# - 基于图形的应用程序的域服务和应用程序服务

> ID：15950974
> 
> 赞同：3
> 
> 时间：2013-04-11T14:08:41.457
> 
> 标签：c#, .net, domain-driven-design, service-layer

我试图围绕服务层的域驱动设计概念，包括应用程序服务和域服务。我遇到的几乎所有示例都与带有数据库的 CRUD 应用程序有关。我无法理解这些概念如何映射到图形应用程序，例如我为这个问题选择的示例应用程序，它是用 .NET/C# 开发的 Microsoft Paint 的克隆。

我阅读了[DDD 中服务层的基本概念](http://martinfowler.com/eaaCatalog/serviceLayer.html)和[扩展说明](http://www.informit.com/articles/article.aspx?p=1398617&seqNum=4)。我选择了以下应用层：

基础设施（跨领域）

*   日志记录

数据（文件系统）

*   位图图像、PngImage 等

领域

*   画布、图像、选择、形状、画笔等

应用

演示文稿（本地客户端 WPF）

*   意见
*   视图模型

我正在尝试设计的一个用例是用户在画布上绘制一个矩形。[从我读过的](https://stackoverflow.com/questions/11878137/service-layer-design-reason-to-put-things-into-a-service-layer)，由于用例需要多个域对象的合作，因此域服务 DrawingService 是有意义的。

另一个用例是用户加载要显示的文件。同样，[从我读过的内容来看](http://www.bennadel.com/blog/2385-Application-Services-vs-Infrastructure-Services-vs-Domain-Services.htm)，由于这个用例是一个命令和一个工作流，一个应用程序服务 FileLoadingService 是有意义的。

[正如 Martin Fowler 所描述](http://www.informit.com/articles/article.aspx?p=1398617&seqNum=4)的，我相信 Microsoft Paint 足够复杂，可以保证一个服务子系统，这里基于主题行为。然而，随着应用程序的增长，服务层可以重构为领域模型的分区，例如 CanvasService、SelectionService 等。那么现在是否需要另一个抽象层，[也许是应用程序外观](http://msdn.microsoft.com/en-us/library/ee658121.aspx)，因为多个服务必须协作？

**更新1：**

最初的评论表明 DDD 架构不适合绘图应用程序。有什么替代方案的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:46:17.080

恕我直言，绘图应用程序不太适合 DDD。它会使用别的东西

# iphone - iPhone 5 优化

> ID：15950995
> 
> 赞同：0
> 
> 时间：2013-04-11T14:09:42.187
> 
> 标签：iphone, ios

我对 iPhone 4 及以下应用程序如何针对 iPhone 5 进行优化感到非常困惑。我是一名设计师。优化是如何进行的？基本上我有一个带有大量旋钮和按钮以及其他交互式组件的应用程序。在我看来，有 3 个选项，但最好的方法（或最少的标准做法）是什么？

1) 保持 iPhone 5 的布局相同，但只是在背景上增加了额外的长度。

2) 缩放从 iPhone 4 到 iPhone 5 的组件的图像/布局，这样一切都是成比例的。

3）两者都有完全独立的图像和不同的布局。即对于 iPhone 5，我可以移动组件以更多地利用空间。这个问题（我不是开发人员）是组件的交互位置实际上已经移动，iPhone 4 和 5 是单独的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:53:29.197

要识别它是否是 iphone 5 iphone，请在文件中使用以下代码`nameYourApp-prefix.pch`：

```
//Macro iPhone5
#define IS_IPHONE_5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

在支持文件中找到该`nameYourApp-prefix.pch`文件，代码必须写在：

```
# ifdef __ OBJC__

      //Code Macro iPhone5

# endif 
```

然后只需使用“if”来检查该设备，如下所示：

```
if (IS_IPHONE_5) {

    //Code for 4 inch screen

}else{

   //Code for 3.5 inch screen

} 
```

将宏放在 中`nameYourApp-prefix.pch`，所有类都可以看到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T14:56:40.537

使用**UIKit 应用程序**，您的选择都不是理想的。您只需使用 Springs 和 Struts 或 Auto Layout 即可让您的用户界面元素捕捉到它们应该在的位置。

在纵向和横向之间切换时，解决方案是相同的。您定义哪些用户界面元素可以增长，哪些不能增长，要捕捉到哪些边缘等。

如果您没有 iPhone 5 设备，请在模拟器上运行它以测试布局。

例如，对于 a `UITableViewController`，`UITableView`应该在 iPhone 5 上垂直增长，以便您看到更多行。

我几乎总是至少有一个控件，在给定空间的情况下可以很好地成长。如果你不这样做，那么你可能只会在视图底部有更多的空白空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:12:38.283

## How iPhone 5 Optimization Works

When you tell iOS that your app is optimized for the iPhone 5 (through use of a cleverly named image file), iOS uses your existing Springs and Struts or Auto Layout (whatever you're using) to rearrange the interface.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T14:21:17.317

如果您没有，请**使用适当的自动调整大小掩码调整您的视图布局，**或者如果您只想支持 iOS 6，请查看**Auto Layout 。**你必须检查高度`[[UIScreen mainScreen] bounds]`。

**例子：**

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568) {
    // code for 4-inch screen (iPhone 5)
} else {
    // code for 3.5-inch screen (< iPhone 5)
} 
```

注意`[UIImage imageNamed:@"yourImage.png"]`只会加载 "background.png" 或**"yourImage@2x.png"** ，如果存在则不会加载**"yourImage-568h@2x.png" 。**

也检查**自动旋转 API**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T14:15:53.670

**第一个选择**是最简单的并且效果很好。您只需要担心全屏图像的特定资产，并确保 NavigationBar 和 TabBar（如果您的应用程序有）分别保持在顶部和底部。

缩放其他图像/组件（例如按钮），您将更改一般纵横比（您可能不希望这样做），因为 iPhone 4 和 5 的显示尺寸仅在高度上有所不同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T14:16:36.797

对于开发应用程序选项二更好。尽管您不必更改 iPhone 5 的所有图像，但某些图像会像 TabBarItem 一样。但是您必须为 iPhone4 和 5 创建不同的背景图像。

读出这个[苹果文档](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW1)来创建用户界面。

您可以使用此代码区分 iPhone 4 和 iPhone 5

```
 UIBtton * btn = [[UIButton alloc] init];
    CGRect screenBounds = [[UIScreen mainScreen] bounds];

            if (screenBounds.size.height == 568)
            {
              btn.frame = CGRectMake(60,60, 205, 175); 
              //this is for iPhone5
            }
            else
            {
              btn.frame = CGRectMake(60,50, 199, 170); 
              //this is for iPhone4
            } 
```

这里我的按钮位置和长度对于 iPhone 5 和 iPhone 4 是不同的

并根据 iPhone 屏幕尺寸设置控件的高度和宽度。

# api - 通过 A4Solution

> ID：15950997
> 
> 赞同：4
> 
> 时间：2013-04-11T14:09:42.917
> 
> 标签：api, alloy

我目前在我的项目中使用 Alloy api，我需要显示 A4Solutions。我可以使用 vizualiser Alloy 提供的 (vizGUI) 轻松做到这一点，但它对我的目的来说有点太有限了。所以我愿意从 A4Solution 对象生成我自己的图（使用任何其他图 api）。

我能够毫无问题地获得原子（这非常简单），但我真的不知道如何检索这些原子之间的关系。

我在网上查看了一些关于如何解析 A4Solution 的示例，但不幸的是什么也没找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T15:50:35.913

关系或字段，您可以从 sig 中检索，然后您可以评估它们以获得具体的原子，如下所示：

```
A4Solution sol = ...;
SafeList<Sig> sigs = sol.getAllReachableSigs();
for (Sig sig : sigs) {
  SafeList<Field> fields = sig.getFields();
  for (Field field : fields) {
    A4TupleSet ts = (A4TupleSet)(sol.eval(field));
    for(A4Tuple t: ts)
      for(int i=0; i<t.arity(); i++) 
        t.atom(i);
  }
} 
```

# scala - Scala 中阻塞调用的期货

> ID：15950998
> 
> 赞同：9
> 
> 时间：2013-04-11T14:09:43.447
> 
> 标签：scala, concurrency, future

`Akka`文档说：

> 您可能很想将阻塞调用包装在 Future 中并使用它来代替，但这种策略太简单了：当应用程序在负载增加的情况下运行时，您很可能会发现瓶颈或内存或线程不足。

他们提出以下策略：

*   在 a 中执行阻塞调用`Future`，确保在任何时间点此类调用的数量都有上限（提交无限数量的这种性质的任务将耗尽您的内存或线程限制）。

*   在 a 中执行阻塞调用`Future`，为线程池提供一个线程数上限，该上限适用于运行应用程序的硬件。

你知道这些策略的任何实施吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-11T14:21:25.157

期货在[执行上下文](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.concurrent.ExecutionContext)中运行。从`Future`API 中可以看出这一点：任何涉及将一些回调附加到未来或从任意计算或另一个未来构建未来的调用都需要隐式可用`ExecutionContext`对象。因此，您可以通过调整期货`ExecutionContext`运行的方式来控制期货的并发设置。

例如，要实施第二种策略，您可以执行类似的操作

```
import scala.concurrent.ExecutionContext
import java.util.concurrent.Executors
import scala.concurrent.future

object Main extends App {

  val ThreadCount = 10
  implicit val executionContext = ExecutionContext.fromExecutor(Executors.newFixedThreadPool(ThreadCount))

  val f = future {
    println(s"Hello ! I'm running in an execution context with $ThreadCount threads")
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T14:21:39.977

Akka 自己实现了这一切，您可以将阻塞调用包装到 Actors 中，然后使用[调度](http://doc.akka.io/docs/akka/2.0.1/scala/dispatchers.html)程序来控制执行线程池。

# c++ - 具有复数的运算符重载

> ID：15950999
> 
> 赞同：-2
> 
> 时间：2013-04-11T14:09:47.667
> 
> 标签：c++, templates, operator-overloading

我想重载 * 运算符，以便它将类的复杂子变量相乘并返回复杂结果。我的想法如下：

```
#include <complex>

using namespace std; 

class a{
public:
  std::complex<double> x0;
...
};

template<class T> complex<T>  operator*(const a &lfv, const a &rfv){
  return lfv.x0*rfv.x0;
} 
```

但它不起作用......有什么想法或评论吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T14:12:40.963

Your class holds `std::complex<double>` data members and is not a template. You need a non-template function:

```
std::complex<double> operator*(const a& lfv, const a& rfv){
  return lfv.x0*rfv.x0;
} 
```

In your example, there is no way for your template function to deduce the return type from the arguments passed to it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:13:18.517

复杂类已经解决了这个问题，即它总是在乘法后返回复杂的结果。

用法如下：

```
complex<double> p(10,20);
complex<double> q(2,3);
std::cout << p*q << endl; 
```

输出是：

```
(-40,70) 
```

* * *

或者，如果您可以这样做：

```
class a{
public:
  std::complex<double> x0;
};

complex<double>  operator*(const a &lfv, const a &rfv){
  return lfv.x0*rfv.x0;
}

int main()
{
    a  y;
    y.x0 = complex<double>(10,20);
    a  z;
    z.x0 = complex<double>(10,20);
    std::cout << y*z << endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:23:53.313

我想不出一种方法来做你正在寻找的东西（返回 a `complex<T>`from `operator*`），因为`operator*`不能自动扣除类型，所以你必须指定类型，如下例所示：

```
a my_var1;
a my_var2;
complex<double> result = operator*<double>(my_var1, my_var2); 
```

...或者您可以遵循@juanchopanza 的建议，不要使用带有`operator*`.