# StackOverflow 问答 14089000-14089999

# php - 不需要时xcode 打印标签

> ID：14089000
> 
> 赞同：0
> 
> 时间：2012-12-30T07:16:10.950
> 
> 标签：php, iphone, ios, web-services

我正在使用 xcode 进行编码，并且正在使用 phpscript 从我的数据库中获取信息。

我有一个看起来像这样的 phpScript：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<?php

    echo "你好";

?> 
```

问题是，当我尝试使用 NSLog 在 xcode 中打印出来时。

它在我不想要的控制台中打印：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
你好 
```

它应该只是显示：

```
你好 
```

我在 xcode 中使用这些代码来获取信息：

```
NSString *strURL = [NSString stringWithFormat:@"http://www.???.com/getcountry.php"];

// to execute php code
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

// to receive the returend value
NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding]; 
```

请指教，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T07:42:49.083

由于您的应用所做的只是获取脚本发送的内容，因此它会将您的 HTML 元标记视为普通文本。这就是它以纯文本形式显示在控制台中的原因。但如果您对输出 HTML 不感兴趣，则实际上不需要元标记。

如果您真的只需要脚本说`你好`，只需从 PHP 脚本中删除元标记并回显该文本：

```
<?php echo "你好"; ?> 
```

# android - 连接蓝牙设备时连接功能被阻止

> ID：14089004
> 
> 赞同：1
> 
> 时间：2012-12-30T07:17:02.987
> 
> 标签：android, bluetooth

我正在尝试从我的 HTC Wildfire 连接蓝牙设备，几个月前它工作正常并且能够与蓝牙设备建立连接，但是在 HTC 上更新软件后，事情并不顺利

当手机没有更新时，代码就像一个魅力一样工作

```
bluetoothSocket = bluetoothDevice.createRfcommSocketToServiceRecord(UUID_STRING); 
```

更新手机后，我探索并发现了以下代码

```
 Method m = bluetoothDevice.getClass().getMethod("createRfcommSocket", new Class[]{int.class});
 bluetoothSocket = (BluetoothSocket) m.invoke(bluetoothDevice, Integer.valueOf(1));
 bluetoothSocket.connect(); 
```

但是我的蓝牙连接被**阻塞了** `bluetoothSocket.connect()`。此外，代码没有达到 `bluetoothSocket.getInputStream()`and `bluetoothSocket.getOutputStream()`。

有没有人解决这个问题，

*我目前的 HTC 野火状态是*

1.  安卓操作系统 2.2.1
2.  内部版本号 2.25.720.4CL299259 发布密钥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T07:29:20.363

由于蓝牙连接过程非常耗时，并且无法预测某个时间限制。

最好把connect放进去

### 背景线程。

```
private class ConnectThread extends Thread {
private final BluetoothSocket mmSocket;
private final BluetoothDevice mmDevice;

public ConnectThread(BluetoothDevice device) {
    // Use a temporary object that is later assigned to mmSocket,
    // because mmSocket is final
    BluetoothSocket tmp = null;
    mmDevice = device;

    // Get a BluetoothSocket to connect with the given BluetoothDevice
    try {
        // MY_UUID is the app's UUID string, also used by the server code
        tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
    } catch (IOException e) { }
    mmSocket = tmp;
   }

   public void run() {
    // Cancel discovery because it will slow down the connection
    mBluetoothAdapter.cancelDiscovery();

    try {
        // Connect the device through the socket. This will block
        // until it succeeds or throws an exception
        mmSocket.connect();
    } catch (IOException connectException) {
        // Unable to connect; close the socket and get out
        try {
            mmSocket.close();
        } catch (IOException closeException) { }
        return;
     }

    // Do work to manage the connection (in a separate thread)
    manageConnectedSocket(mmSocket);
   }

   /** Will cancel an in-progress connection, and close the socket */
   public void cancel() {
    try {
        mmSocket.close();
    } catch (IOException e) { }
   }
   }

   private class ConnectedThread extends Thread {
   private final BluetoothSocket mmSocket;
   private final InputStream mmInStream;
   private final OutputStream mmOutStream;

   public ConnectedThread(BluetoothSocket socket) {
    mmSocket = socket;
    InputStream tmpIn = null;
    OutputStream tmpOut = null;

    // Get the input and output streams, using temp objects because
    // member streams are final
    try {
        tmpIn = socket.getInputStream();
        tmpOut = socket.getOutputStream();
    } catch (IOException e) { }

    mmInStream = tmpIn;
    mmOutStream = tmpOut;
   }

   public void run() {
    byte[] buffer = new byte[1024];  // buffer store for the stream
    int bytes; // bytes returned from read()

    // Keep listening to the InputStream until an exception occurs
    while (true) {
        try {
            // Read from the InputStream
            bytes = mmInStream.read(buffer);
            // Send the obtained bytes to the UI Activity
            mHandler.obtainMessage(MESSAGE_READ, bytes, -1, buffer)
                    .sendToTarget();
        } catch (IOException e) {
            break;
        }
      }
    }

    /* Call this from the main Activity to send data to the remote device */
    public void write(byte[] bytes) {
    try {
        mmOutStream.write(bytes);
       } catch (IOException e) { }
    }

   /* Call this from the main Activity to shutdown the connection */
    public void cancel() {
    try {
        mmSocket.close();
      } catch (IOException e) { }
     }
    } 
```

# sql - logback additivity is false 仍然在 Tomcat 控制台上生成休眠 sql 日志

> ID：14089005
> 
> 赞同：0
> 
> 时间：2012-12-30T07:17:23.983
> 
> 标签：sql, hibernate, logback

如何生成2个日志文件；将记录由 show-sql = true 属性生成的 Hibernate sql 消息。另一个将记录其余的 Hibernate 日志。

我已经配置了 logback.xml，如下所示：

```
<logger name="org.hibernate" level="debug" additivity="false">
    <appender-ref ref="hibernate" />
</logger>

<logger name="org.hibernate.SQL" additivity="false">
    <appender-ref ref="hibernate-sql" />
</logger> 
```

它按预期生成 2 个日志文件。但是，它在 Tomcat 控制台、hibernate appender 和 hibernate-sql appender 中复制 hibernate-sql 日志消息。

我如何限制 logback 仅在 hibernate-sql appender 中生成 Hibernate sql 日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T09:11:26.803

Hibernate 以两种截然不同且完全不同的方式编写生成的 SQL。当您将属性 hibernate.show_sql 设置为 true 时，它​​会告诉 Hibernate 将生成的 SQL 写入标准输出。没有任何日志框架参与其中。这就是为什么你几乎不应该使用它。只需从配置中删除该属性，Tomcat 控制台中的 SQL 就会消失。

Hibernate 编写 SQL 的第二种方式，也是您应该使用的方式，是将其发送到 org.hibernate.SQL 日志记录类别下的日志记录框架。它与 hibernate.show_sql 完全没有联系。

另外，如果您不知道，Hibernate 还会使用 org.hibernate.type 类别记录绑定到准备好的语句的参数的所有值。这是使用 hibernate.show_sql 无法获得的，因此使用 Hibernate 的日志记录而不是 show_sql 更加灵活且信息量更大。

# python - 在 emacs 的配置中存储 `local-set-key`

> ID：14089007
> 
> 赞同：1
> 
> 时间：2012-12-30T07:17:52.237
> 
> 标签：python, emacs, elisp, key-bindings

例如，我使用命令为in`local-set-key` 设置密钥。`C-c C-n``flymake-goto-next-error``python-mode`

`python-mode-hook`有没有一种方便的方法可以直接存储此键绑定，而不是编写表达式并将其包装到中？有人对此有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T08:29:47.327

命令

```
(local-set-key (kbd "C-c C-n") 'flymake-goto-next-error) 
```

在当前缓冲区的本地**地图**中工作。本地**地图**为**python-mode-map**时正确。

方便的最小长度命令（不使用**钩子**）

```
(define-key python-mode-map (kbd "C-c C-n") 'flymake-goto-next-error) 
```

在创建变量**python-mode-map**时工作。

*调用后动态*创建变量**python-mode-map**（在文件 python-mode.el 中）

 *```
(require 'python-mode) 
```

如果没有加载**python-mode ，命令****define-key**不能直接使用**python-mode-map**。使用挂钩是为了安全。您的 emacs 配置应该是可靠的（如果可能的话，它不应该依赖于命令的执行顺序），并且这种包装（带有钩子）命令可以防止错误情况：在**mode-map**中设置 keybind而没有 setup **mode**。*

# struts - “我有下面给出的validation.xml，什么是validation-rules.xml 用于在Struts 应用程序中进行验证

> ID：14089014
> 
> 赞同：0
> 
> 时间：2012-12-30T07:19:39.157
> 
> 标签：struts

> 块引用

我正在使用以下 Validation.xml
对在我的 Struts 应用程序中输入姓名、年龄、电子邮件、电话进行验证是否正确，它的
验证规则.xml 是什么...... ................** 请帮我.....

> 块引用

```
 <?xml version="1.0" encoding="UTF-8"?>
   <!DOCTYPE form-validation PUBLIC     
   "-//Apache Software Foundation//DTD Commons Validator Rules Configuration   
   1.1.3//EN"           
   "http://jakarta.apache.org/commons/dtds/validator_1_1_3.dtd"> 
   <form-validation> 
   <global>     
   <constant>     
   <constant-name>telephoneFormat</constant-name>     
   <constant-value>^\d{5,10}$</constant-value>     
   </constant> 
   </global> 
  <formset>     
  <form name="CustomerForm">         
  <field property="name" depends="required">             
  <arg key="label.name" />         
  </field>         
  <field property="age" depends="required, integer, intRange">  
  <arg0 key="label.age" />             
  <arg1 key="${var:min}" resource="false"/>
  <arg2 key="${var:max}" resource="false"/>             
  <var>                 
    <var-name>min</var-name>                 
    <var-value>1</var-value>             
 </var>             
 <var>                 
   <var-name>max</var-name>                 
   <var-value>125</var-value>             
 </var>         
</field>         
<field property="telephone" depends="required, mask">             
   <arg key="label.telephone" />             
   <arg1 key="label.telephone" />             
 <var>                 
   <var-name>mask</var-name>                 
   <var-value>${telephoneFormat}</var-value>             
 </var>         
</field>         
<field property="email" depends="email">             
  <arg0 key="label.email" />             
  <arg1 key="label.email" />         
</field>     
</form> 
 </formset> 
</form-validation> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T09:33:48.883

就validation.xml 而言，我觉得它没问题。我希望您在 MessageResources.properties 文件中进行了必要的输入。除非我弄错了，否则您使用的是网络上另一个示例中的上述内容。我在搜索关于validation.xml 的内容时遇到了它。

如果您有任何疑问，请告诉我，因为我已成功完成验证。

# android - 如何使用 Android Java 将文件上传和转换到 Google Drive？

> ID：14089019
> 
> 赞同：1
> 
> 时间：2012-12-30T07:21:09.133
> 
> 标签：android, google-drive-api

我正在成功地将文件上传到谷歌驱动器，但是在设置转换标志时遇到了困难。

以下是我尝试的，基于我找到的参考文件。

谁能建议我可能做错了什么？

```
 java.io.File fileContent = new java.io.File(csvfilepath);
          FileContent mediaContent = new FileContent("text/csv", fileContent);

          // File's metadata.
          File body = new File();
          body.setTitle(fileContent.getName());
          body.setMimeType("text/csv");

          File file = service.files().insert(body, mediaContent);//.execute();
          file.setConvert(true);
          file.execute();

          if (file != null) {
            showToast("Data Uploaded: " + file.getTitle()); 
```

[https://google-api-client-libraries.appspot.com/documentation/drive/v2/java/latest/com/google/api/services/drive/Drive.Files.Insert.html](https://google-api-client-libraries.appspot.com/documentation/drive/v2/java/latest/com/google/api/services/drive/Drive.Files.Insert.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T22:16:54.300

您正在尝试将转换标志设置为错误的对象，尝试用以下代码替换您的代码：

```
java.io.File fileContent = new java.io.File(csvfilepath);
FileContent mediaContent = new FileContent("text/csv", fileContent);

// File's metadata.
File body = new File();
body.setTitle(fileContent.getName());
body.setMimeType("text/csv");

// THIS IS THE NEW CODE
Insert request = service.files().insert(body, mediaContent);
request.setConvert(true);
File file = request.execute();
// END OF NEW CODE

if (file != null) {
  showToast("Data Uploaded: " + file.getTitle());
} 
```

# javascript - DRYing JSON 有什么众所周知的方法吗

> ID：14089022
> 
> 赞同：25
> 
> 时间：2012-12-30T07:21:50.817
> 
> 标签：javascript, json, http, compression, dry

考虑这个 JSON 响应：

```
[{
    Name: 'Saeed',
    Age: 31
}, {
    Name: 'Maysam',
    Age: 32
}, {
    Name: 'Mehdi',
    Age: 27
}] 
```

这适用于少量数据，但是当您想要提供大量数据（例如数千条记录）时，以某种方式防止响应 JSON 中的属性名称重复似乎是合乎逻辑的。

我用谷歌搜索了这个概念（DRYing JSON），令我惊讶的是，我没有找到任何相关的结果。当然，一种方法是使用简单的自制算法压缩 JSON，并在使用前在客户端解压缩：

```
[['Name', 'Age'], 
['Saeed', 31], 
['Maysam', 32], 
['Mehdi', 27]] 
```

但是，最佳实践会比每个尝试重新发明轮子的开发人员更好。你们有没有看到一个众所周知的被广泛接受的解决方案？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-30T07:53:11.310

首先，JSON 并不是最紧凑的数据表示方式。它意味着可以直接解析为一个 javascript 数据结构，该数据结构旨在立即使用，无需进一步解析。如果你想优化大小，那么你可能不希望自我描述 JSON，你需要让你的代码对如何处理数据和使用它做一些假设，并对接收进行一些手动解析结尾。正是这些假设和额外的编码工作可以为您节省空间。

如果代码已经知道服务器响应的属性名称和格式，则可以将数据作为交替值数组返回：

```
['Saeed', 31, 'Maysam', 32, 'Mehdi', 27] 
```

或者如果可以安全地假设名称不包含逗号，您甚至可以只返回一个逗号分隔的字符串，您可以将其拆分为各个部分并粘贴到您自己的数据结构中：

```
"Saeed, 31, Maysam, 32, Mehdi, 27" 
```

或者，如果您仍然希望它是有效的 JSON，您可以将该字符串放在这样的数组中，这仅比我的第一个版本稍好，其中项目本身是数组元素：

```
["Saeed, 31, Maysam, 32, Mehdi, 27"] 
```

这些假设和紧凑性将更多的责任放在了在您自己的 javascript 上解析数据的责任中，但正是移除了您开始使用的完整 JSON 的自我描述性质，这导致其更紧凑的性质。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-30T07:31:09.460

一种解决方案称为 hpack 算法

[https://github.com/WebReflection/json.hpack/wiki](https://github.com/WebReflection/json.hpack/wiki)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-30T07:33:39.090

您可能可以使用 CSV 格式而不是 JSON，因为您只需指定一次属性名称。但是，这将需要像您的示例中那样的刚性结构。

JSON 并不是真正适合 DRY 的东西，因为考虑到你可以用它做什么，它已经被很好地打包了。就个人而言，我将裸数组用于存储在文件中供以后使用的 JSON 数据，但对于简单的 AJAX 请求，我只是保持原样。

DRY 通常是指您自己编写的内容，因此如果您的对象是动态生成的，您无论如何都不应该担心它。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-30T11:24:26.090

使用通常很容易内置到大多数 Web 服务器和客户端中的 gzip 压缩？

在每一端生成和解析 JSON 仍然需要一些（额外的）时间和内存，但通过网络发送不会花费太多时间，并且代表您需要最少的实施工作。

即使您以某种方式预压缩源数据，也可能值得一试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T09:41:20.257

对于 JSON 来说，经常有大量字符串或“属性”重复实际上不是问题（XML 也不是）。

这正是 DEFLATE 算法地址的[重复字符串消除](http://en.wikipedia.org/wiki/DEFLATE#Duplicate_string_elimination)组件（由 GZip 使用）。

虽然大多数浏览器客户端可以接受 GZip 压缩响应，但返回服务器的流量不会。

这是否保证使用“JSON 压缩”（即[hpack](https://github.com/WebReflection/json.hpack/wiki)或其他方案）？

1.  它不太可能比在 Javascript 中实现 GZip 压缩快得多（这并非不可能；在相当快的机器上，您可以在 250 毫秒内压缩 100 KB）。

2.  安全地处理不受信任的 JSON 输入非常困难。您需要使用基于流的解析并确定最大复杂度阈值，否则您的服务器可能会大吃一惊。例如，参见 Armin Ronacher 的[Start Writing More Classes](http://lucumr.pocoo.org/2013/2/13/moar-classes/)：

    > 如果您整洁的小型 Web 服务器每秒通过 gevent 收到 10000 个请求，但使用的是 json.loads，那么我可能会通过向其发送 16MB 精心设计和嵌套的 JSON 来使其爬行停止，这些 JSON 会占用您所有的 CPU。

# php - 如何将函数传递给php中的类

> ID：14089023
> 
> 赞同：0
> 
> 时间：2012-12-30T07:21:51.457
> 
> 标签：php, class, callback

我有一个基于一些东西生成数据的类。我想从外部格式化该数据。所以我试图将一个函数传递给类，以便它格式化该数据。我看过很多例子，但似乎这是独一无二的。

任何人都可以给出如何做到这一点的想法吗？下面的代码给出了一个错误。

```
<?php
class someClass { 
    var $outsideFunc; // placeholder for function to be defined from outside
    var $somevar='Me'; // generated text 
    function echoarg($abc){ 
        $outsideFunc=$this->outsideFunc; // bring the outside function in
        call_user_func($outsideFunc,$abc); // execute outside function on text
        echo $abc;
    }

}

function outsidefunc($param){ // define custom function
    $param='I am '.$param;
}

$someClass=new someClass();
$someClass -> outsideFunc = 'outsideFunc'; // send custom function into Class
$someClass -> echoarg($someClass->somevar); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T07:28:21.143

为什么不将您的函数作为参数传递？

```
<?php
class someClass {
  public $somevar="Me";
  public function echoarg($abc,$cb=null) {
    if( $cb) $cb($abc);
    echo $abc;
  }
}

$someClass = new someClass();
$someClass->echoarg($someClass->somevar,function(&$a) {$a = "I am ".$a;}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T07:31:55.857

```
$someClass -> outsidefunc = 'outsidefunc'; 
```

在 PHP 中，函数名不区分大小写，但对象属性名是。你需要`$someClass->outsideFunc`，不是`$someClass->outsidefunc`。

请注意，良好的 OOP 设计实践要求使用[getter 和 setter 方法](https://stackoverflow.com/questions/4478661/getter-and-setter)，而不是直接从外部代码访问属性。另请注意，PHP 5.3 引入了对[匿名函数](http://www.php.net/manual/en/functions.anonymous.php)的支持。

* * *

> 是的。你说的对。现在没有错误。但它也不起作用。

默认情况下，PHP 不[通过引用传递参数](http://www.php.net/manual/en/language.references.pass.php)；outsidefunc() 实际上并没有做任何有用的事情。如果您希望它在调用者中将 $param 设置为其他值，并且不想只返回新值，您可以将函数签名更改为如下所示：

```
function outsidefunc(&$param) { 
```

您还需要更改调用函数的方式，因为[call_user_func() 不允许您通过引用传递参数](https://stackoverflow.com/questions/6259713/why-does-phps-call-user-func-function-not-support-passing-by-reference)。这些方法中的任何一种都应该起作用：

```
$outsideFunc($abc);
call_user_func_array($outsideFunc, array(&$abc)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T07:29:53.687

我不确定你到底在找什么，但我得到的是，你想在一个函数中传递对象，这可以通过 PHP 中的[类型提示来实现。](http://php.net/manual/en/language.oop5.typehinting.php)

```
class MyClass {
    public $var = 'Hello World';
}

function myFunction(MyClass $foo) {
    echo $foo->var;
}
$myclass = new MyClass;
myFunction($myclass); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T07:38:25.833

OP，也许您正在寻找闭包？它并不完全符合您的要求（实际上是向类添加函数），但可以添加到类变量中并像任何普通的匿名函数一样执行。

```
$myClass->addFunc(function($arg) { return 'test: ' . $arg });
$myClass->execFunc(0);

class myClass {
    protected $funcs;
    public function addFunc(closure $func) {
        $this->funcs[] = $func;
    }

    public function execFunc($index) { $this->funcs[$index](); } // obviously, do some checking here first.
} 
```

# c# - How can I Access to template controls in datagrid?

> ID：14089031
> 
> 赞同：0
> 
> 时间：2012-12-30T07:23:48.543
> 
> 标签：c#, wpf, xaml, datatemplate

I'm trying to access a control which is inside the control template of a datagrid control in code behind.

myxaml.xaml :

```
<DataGrid >
.
.
.
<DataGridTemplateColumn x:Name="discountGridTextcolumn" >
    <DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <TextBox Name="discountText"/>
            <ComboBox x:Name="discountType"/>
        </StackPanel>
    </DataTemplate>
</DataGridTemplateColumn.CellTemplate>
.
.
. 
```

mybehind.cs :

```
var comboBox = GetTemplateChild("discountType"); 
```

I get null reference.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-11-12T23:29:47.140

Went through many places and finally made my own solution, it is quite easy:

Let's say we want to get access to a CheckBox named "mycb" in row 0 column 2 of your dataGrid:

```
ContentPresenter cell = dataGrid.Columns[2].GetCellContent(dataGrid.Items[0]) as ContentPresenter;
CheckBox cb = (CheckBox)cell.ContentTemplate.FindName("mycb", cell); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T07:35:33.483

If It return null,you must place them in the `OnApplyTemplate()` method: for example

```
public override void OnApplyTemplate()
{
    base.OnApplyTemplate();

   var comboBox = GetTemplateChild("discountType") as ComboBox;
} 
```

Also try this [How to access Control Template parts from Code Behind](http://www.codeproject.com/Articles/179105/How-to-access-Control-Template-parts-from-Code-Beh)

**Updated**

From [How to: Find DataTemplate-Generated Elements:](http://msdn.microsoft.com/en-us/library/bb613579.aspx)

```
DataGridRow row = (DataGridRow)(yourgrid.ItemContainerGenerator.ContainerFromItem(yourgrid.SelectedItem));
DataGridDetailsPresenter presenter = FindVisualChild<DataGridDetailsPresenter>(row);
DataTemplate template = presenter.ContentTemplate;
ComboBox Com= (ComboBox)template.FindName("discountType", presenter); 
```

FindVisualChild Function:

```
private childItem FindVisualChild<childItem>(DependencyObject obj)
    where childItem : DependencyObject
{
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
    {
        DependencyObject child = VisualTreeHelper.GetChild(obj, i);
        if (child != null && child is childItem)
            return (childItem)child;
        else
        {
            childItem childOfChild = FindVisualChild<childItem>(child);
            if (childOfChild != null)
                return childOfChild;
        }
    }
    return null;
} 
```

Another solution [How to access objects (comboBox, TextBox...) in DataTemplate](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/31c4f3fb-e6c9-446d-9b37-6c9d6723e79a)

# python - 分层索引在 python pandas 中不起作用

> ID：14089039
> 
> 赞同：0
> 
> 时间：2012-12-30T07:25:32.463
> 
> 标签：python, pandas

我未能成功重现 Wes McKinney 的“Python for Data Analysis”一书第 148 页上的分层索引示例。我目前在 Mac OS X 10.8.2 上使用 python 2.7。（我在 ubuntu 上也有同样的问题，pandas 0.7-0.10 也有同样的问题）。

任何和所有的帮助表示赞赏。

```
frame = pd.DataFrame(np.arange(12).reshape((4, 3)), index = list('aabb'), 
                  columns = [['Ohio', 'Ohio', 'Colorado']['Green', 'Red', 'Green']]) 
```

错误信息：

```
TypeError                                 Traceback (most recent call last)
<ipython-input-27-681f4740a561> in <module>()
      1 frame = pd.DataFrame(np.arange(12).reshape((4, 3)), index = list('aabb'), 
----> 2                   columns = [['Ohio', 'Ohio', 'Colorado']['Green', 'Red', 'Green']])  

TypeError: list indices must be integers, not tuple 
```

仅供参考，我使用的是 pandas 库的 0.9 版：

```
pd.__version__
'0.9.0rc1' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T07:27:43.267

我没有这本书，但看起来你漏掉了一个逗号：

```
frame = pd.DataFrame(np.arange(12).reshape((4, 3)), index = list('aabb'), columns = [['Ohio', 'Ohio', 'Colorado'], ['Green', 'Red', 'Green']]) 
```

`'Colorado']`注意和之间的逗号`['Green'`。

# ipad - 是否有模拟 iPad 浏览器的在线服务（或软件）？

> ID：14089044
> 
> 赞同：0
> 
> 时间：2012-12-30T07:27:12.387
> 
> 标签：ipad, mobile-safari

我有一个不能在 iPad 上运行的网站，我希望找到一个独立运行的 iPad 浏览器版本，并且能够打开类似于 firefox/chrome 中的开发人员选项卡的东西，这样我就可以看到具体发生了什么以及失败的地方。

该站点在计算机浏览器中运行良好，不幸的是无法看到控制台，我真的对移动设备上的故障感到茫然，所以，我在这里看到了指向模拟器的其他答案，但他们一切似乎都只是显示模拟器，没有任何额外的调试资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T07:32:06.573

如果您拥有 Mac 或者您愿意在虚拟环境中运行 OS X，[免费的 Xcode 4](https://developer.apple.com/xcode/) 可以模拟 iPad。至于开发人员选项卡，您可以通过进入设置 -> Safari -> 高级来打开模拟器中的[Web Inspector 。](http://developer.apple.com/library/safari/#documentation/appleapplications/Conceptual/Safari_Developer_Guide/DebuggingYourWebsite/DebuggingYourWebsite.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T07:45:48.440

如果您使用 Google Chrome，Chrome 网上商店有一个名为 User-Agent Switcher 的插件，这是一个位于地址栏旁边的小部件，允许您更改用户代理，让服务器显示您是，比如说， iPad，导致服务器以正确的网页响应。

我不确定这是否可以帮助您，但对于 Web 开发人员来说是一个不错的工具 :)

那时您还可以使用 Chrome 的不错的检查器工具：p

[这是我使用的一个，但是还有很多其他可用的。](https://chrome.google.com/webstore/detail/user-agent-switcher/lkmofgnohbedopheiphabfhfjgkhfcgf?hl=en-US)

# javascript - Jquery Mobile 的表格不响应？

> ID：14089047
> 
> 赞同：0
> 
> 时间：2012-12-30T07:27:57.727
> 
> 标签：javascript, jquery, html, css, jquery-mobile

我正在使用来自 jquery 移动网站的简单表格。这是我的页面html，

```
 <div data-role="page" id="mainPage">
        <div data-role="content">

            <table data-role="table" id="my-table" data-mode="reflow">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Movie Title</th>
                        <th>Year</th>
                        <th>
                            <abbr title="Rotten Tomato Rating">Rating</abbr></th>
                        <th>Reviews</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th>1</th>
                        <td><a href="foo.com" data-rel="external">Citizen Kane</a></td>
                        <td>1941</td>
                        <td>100%</td>
                        <td>74</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div> 
```

但是我的页面看起来很丑。似乎这里没有应用 jquery。这是屏幕截图， ![在此处输入图像描述](../Images/881911a64ff59926420000e52def0cb7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T08:21:35.653

从这里， http: [//forum.jquery.com/topic/where-to-get-jquery-mobile-table-js](http://forum.jquery.com/topic/where-to-get-jquery-mobile-table-js)

> 表格功能仅在未发布的 1.3 版本中提供。
> 
> 如果您想测试 1.3，您可以从 GitHub 上查看并构建它，或者只需从在线测试文档下载 .js 和 .css 文件。
> 
> 由于这甚至还不是测试版软件，所以我不会在生产中使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T09:11:28.367

这里已经有一个可用的响应式表 jQM 插件：[https](https://github.com/frequent/tableview) ://github.com/frequent/tableview 。

它有两种模式，一种是非功能模式，它只是一个表格视图，另一种是与数据库[插件](http://www.datatables.net/)结合使用的功能模式。

这是一个演示：[http](http://www.franckreich.de/jqm/tableview/demo.html) ://www.franckreich.de/jqm/tableview/demo.html 。

# java - Java 参数传递

> ID：14089049
> 
> 赞同：0
> 
> 时间：2012-12-30T07:28:45.397
> 
> 标签：java, class, object, interface, parameter-passing

我对下面的代码感到困惑。这段代码是由其他人编写的，我目前正在研究代码以更了解参数传递在 Java 中的工作原理。

代码#1

```
addKeyListener((KeyListener)new TAdapter()); 
```

和代码#2

```
addKeyListener(new TAdapter()); 
```

假设 TAdapter 是扩展 KeyAdapter 类的类，意味着相同的事情并执行相同的事情？我还注意到我不一定必须将 TAdapter 对象显式转换为 KeyListener，即使从我在 Eclipse 中阅读的方法描述中该方法接受 KeyListener 对象也是如此。为什么这可能？我从 Java 文档中快速搜索了 KeyAdapter 类，显然 KeyAdapter 类实现了 KeyListener 接口。所以我可以安全地假设 Java 在参数传递中的工作方式之一是该方法可以接受一个类的实例，该类继承自实现方法描述中列出的同名接口的某个类？如果是这样，为什么这也是可能的？

PS 顺便说一句，我不明白程序员为什么将类命名为 TAdapter，T 代表什么？我在其他源代码中也注意到这种类型的类命名，但我从来不理解这种假定的约定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T07:35:52.510

嗯，是的，确实“该方法可以接受一个类的实例，该实例继承自某个实现接口的类”。

更一般地，`implements`一个接口的类在多态性方面可以说是该接口的子类，并且任何参数或变量都可以分配为其声明类的任何子类的实例。

至于那个班为什么叫这个名字`TAdapter`，恐怕我无法回答。至少，这不是任何常用的约定。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T07:40:46.183

如果方法将**ObjectParameter**作为参数，由于**多态性，它也可以使用****SubClassOfObjectParameter**。

 ****TAdapter**开头的T**只是**一种不好的命名风格，因为它很神秘！

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T08:09:23.967

> 所以我可以安全地假设 Java 在参数传递中的工作方式之一是该方法可以接受一个类的实例，该类继承自实现方法描述中列出的同名接口的某个类？

是的

> 如果是这样，为什么这也是可能的？

这是因为多态性。你应该读[这个](http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html)。特别是多态性小节。****

# git - 为 GIT 设置 Jenkins 时遇到问题

> ID：14089053
> 
> 赞同：-1
> 
> 时间：2012-12-30T07:29:43.623
> 
> 标签：git, ssh, jenkins

我一直在尝试在我的 MAC 上为 CI 设置 Jenkins。我以 Jenkins 用户的身份生成了一个公钥，并将其放在我的 git 服务器上的 associated_keys 文件中。它仍然会抛出一个错误，说权限被拒绝。请你帮助我好吗 ！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T08:36:48.813

设置 Jenkins 第一次使用 git 通常会失败，因为 SSH 在第一次尝试连接到主机时会发出警告并要求确认。像这样的东西：

```
The authenticity of host 'example.com (10.66.77.88)' can't be established.
RSA key fingerprint is ae:51:f4:c7:c5:3a:54:f2:96:2c:59:ff:e3:59:52:a2.
Are you sure you want to continue connecting (yes/no)? 
```

在交互式会话中，您可以键入`y`并添加主机，`~/.ssh/known_hosts`以便您随后不会收到警告，但是当 Jenkins 看到它时它将失败。

要解决此问题，`sudo su jenkins`请在您的机器上尝试以用户身份手动执行 git clone `jenkins`。然后您可以确认主机的有效性，从那时起 Jenkins 将能够连接没有问题。

这是一个非常常见的陷阱，所以我认为这可能是您正在经历的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:11:08.063

您可以尝试的第一件事是修复密钥文件名。来自“男人 ssh”

```
~/.ssh/authorized_keys
         Lists the public keys (DSA/ECDSA/RSA) that can be used for log-
         ging in as this user. 
```

# php - PDO 使用命名占位符为 INSERT 和 ON DUPLICATE KEY UPDATE 准备语句

> ID：14089055
> 
> 赞同：19
> 
> 时间：2012-12-30T07:29:50.250
> 
> 标签：php, pdo, prepared-statement, on-duplicate-key, sqlbindparameter

我想将 PDO INSERT 和 UPDATE 准备好的语句切换到 INSERT 和 ON DUPLICATE KEY UPDATE 因为我认为它会比我目前正在做的更有效率，但我无法找出正确的语法与命名占位符和 bindParam 一起使用。

我在 SO 上发现了几个类似的问题，但我是 PDO 的新手，无法成功地根据我的标准调整代码。这是我尝试过的，但它不起作用（它不插入或更新）：

```
try { 
  $stmt = $conn->prepare('INSERT INTO customer_info (user_id, fname, lname) VALUES(:user_id, :fname, :lname)'          
 'ON DUPLICATE KEY UPDATE customer_info SET fname= :fname, 
                                            lname= :lname   
                                            WHERE user_id = :user_id'); 
  $stmt->bindParam(':user_id', $user_id);  
  $stmt->bindParam(':fname', $_POST['fname'], PDO::PARAM_STR);
  $stmt->bindParam(':lname', $_POST['lname'], PDO::PARAM_STR);      
  $stmt->execute();
} 
```

这是我的代码的简化版本（我有几个查询，每个查询有 20 - 50 个字段）。我目前正在首先更新并检查更新的行数是否大于 0，如果不是，则运行插入，并且每个查询都有自己的一组 bindParam 语句。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-30T07:52:49.593

你的`ON DUPLICATE KEY`语法不正确。

```
$stmt = $conn->prepare('INSERT INTO customer_info (user_id, fname, lname) VALUES(:user_id, :fname, :lname)
    ON DUPLICATE KEY UPDATE fname= :fname2, lname= :lname2');

$stmt->bindParam(':user_id', $user_id);  
$stmt->bindParam(':fname', $_POST['fname'], PDO::PARAM_STR);
$stmt->bindParam(':lname', $_POST['lname'], PDO::PARAM_STR);      
$stmt->bindParam(':fname2', $_POST['fname'], PDO::PARAM_STR);
$stmt->bindParam(':lname2', $_POST['lname'], PDO::PARAM_STR); 
```

您不需要将表名或`SET`放在`ON DUPLICATE KEY`子句中，也不需要`WHERE`子句（它总是使用重复键更新记录）。

请参阅[http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)

您还遇到了 PHP 语法错误：您将查询拆分为两个字符串。

更新：

绑定多个参数：

```
function bindMultiple($stmt, $params, &$variable, $type) {
  foreach ($params as $param) {
    $stmt->bindParam($param, $variable, $type);
  }
} 
```

然后调用它：

```
bindMultiple($stmt, array(':fname', ':fname2'), $_POST['fname'], PDO::PARAM_STR); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-02-13T01:16:51.103

以下恕我直言，对于再次遇到此问题的任何人来说，这是正确的答案。
注意：此语句假定 user_id 是表中的 KEY。

声明确实是错误的，但接受的答案并不完全正确。

如果您使用相同的值插入和更新（而不是使用不同的值进行更新），则这是更正的查询伪代码：

```
try { 
    //optional if your DB driver supports transactions
    $conn->beginTransaction();

    $stmt = $conn->prepare('INSERT INTO customer_info (user_id, fname, lname) ' . 
                'VALUES(:user_id, :fname, :lname)' .
                'ON DUPLICATE KEY UPDATE fname=VALUES(fname), lname=VALUES(lname)');
    $stmt->bindParam(':user_id', $user_id);  
    $stmt->bindParam(':fname', $_POST['fname'], PDO::PARAM_STR);
    $stmt->bindParam(':lname', $_POST['lname'], PDO::PARAM_STR);      
    $stmt->execute();

    //again optional if on MyIASM or DB that doesn't support transactions
    $conn->commit();
} catch (PDOException $e) {
    //optional as above:
    $conn->rollback();

    //handle your exception here $e->getMessage() or something
} 
```

# ios - iOS / Obj-C：从 UIButton 标题中删除填充

> ID：14089062
> 
> 赞同：1
> 
> 时间：2012-12-30T07:30:27.113
> 
> 标签：ios, uibutton, uilabel, padding, uiedgeinsets

我正在尝试创建一个非常薄`UIButton`的 size =`CGSizeMake(75, 23)`以完全适合自定义背景图像。我希望按钮有一个标题。

在我调用`setTitle:forState:`按钮后调整大小以考虑标题周围的填充，搞砸背景图像（即导致它非常不合时宜地平铺）。我已在子视图中将标题字体设置为相当小的尺寸`UILabel`，因此导致问题的不是字体而是填充。因此我想删除这个填充。的默认值`contentEdgeInsets`和属性都是 all `imageEdgeInsets`，所以我认为填充位于子视图中的某个位置。如果是这样，我想我可以通过子类化和覆盖来消除它，但我不确定（我很高兴听到有人尝试过这个）。无论如何，我正在寻找更简单的出路。`titleEdgeInsets``UIButton``UIEdgeInsetsZero``UILabel``UILabel`[`textRectForBounds:limitedToNumberOfLines:`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instm/UILabel/textRectForBounds%3alimitedToNumberOfLines%3a)

我已经搜索和搜索，但没有找到任何东西。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:36:28.753

那会奏效。

我以前推荐过这个工具，但它是一个奇迹工作者:-)

[OBShapedButton](https://github.com/ole/OBShapedButton)

它将解决您的透明度问题这应该可以解决您的问题:-)

# r - data.frame中<-和=之间的区别是什么？

> ID：14089066
> 
> 赞同：2
> 
> 时间：2012-12-30T07:31:59.180
> 
> 标签：r

在 data.frame 中，`<-`会得到很奇怪的输出，这是什么原因？

```
x<-data.frame(name<-c("n1","n2"),age<-c(5,6))
y<-data.frame(name=c("n1","n2"),age=c(5,6))
> x
name....c..n1....n2.. age....c.5..6.
1                    n1              5
2                    n2              6
> y
  name age
1   n1   5
2   n2   6 
```

data.frame 中 <- 和 = 之间的区别是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T07:50:46.180

不，这并不奇怪。*您使用命名*和*未命名*对象调用 data.frame 的构造函数。

最初我认为data.frame 是一个列表并使用help(list) 来解释data.frame 的行为。即使哲学是相同的（命名和未命名的论点）这是一个错误，答案是在 data.frame 的帮助下

从 ?data.frame 我在这部分讨论参数的名称

> 如果参数都是命名的简单对象（不是列表、数据框矩阵），则参数名称给出列名。对于未命名的简单参数，参数的解析版本用作名称（删除了封闭的 I(...)）。

所以

```
x<-data.frame(name<-c("n1","n2"),age<-c(5,6)) 
```

这相当于：

```
 x <- data.frame(c("n1","n2"),c(5,6))   ## unnamed objects The functions return dotted pair list 
 name<-c("n1","n2")
 age<-c(5,6) 
```

那么对于 y

```
y<-data.frame(name=c("n1","n2"),age=c(5,6))  ## named objects functions return a list 
```

但请注意，这仅解释了简单对象参数的命名过程。命名比添加一些点更复杂。例如，我发现这些 2 语句是等效的（使用 check.names=T 或 F）非常令人惊讶：

```
 a <- data.frame(y <- list(x=1)) 
         a <- data.frame(y = list(x=1)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-30T07:54:54.683

是的，我想你会的。该表达式`age<-c(5,6)`确实给出了一个结果（来自 的值`<-`），但是由于您未能对参数列表中的形式使用正确的赋值运算符，因此完整的表达式被传递给 check.names 作为列的名称。它将所有无效字符转换为点。您可以阻止 check.names 被调用（并不是说您通常会这样做。

```
> x<-data.frame(name<-c("n1","n2"),age<-c(5,6), check.names=FALSE)
> x
  name <- c("n1", "n2") age <- c(5, 6)
1                    n1              5
2                    n2              6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T08:13:56.753

R，像许多语言一样，由内而外地工作。所以在你的 x 示例中，'name' 被分配了 'n1' 和 'n2' 的值，以及 5 和 6 的 'age' 值，但是当数据.frame 创建后，R 将这些列的名称解释为您提供的完整字符串，其中特殊字符变为点...最好坚持使用 y 示例的语法。

# asp.net - 如何为单页应用程序/静态 html 网站和 Web api 服务结合 ASP.NET 表单身份验证

> ID：14089076
> 
> 赞同：2
> 
> 时间：2012-12-30T07:33:31.570
> 
> 标签：asp.net, iis, asp.net-web-api, forms-authentication

我正在开发一个实现为静态 html 文件的单页应用程序，该文件向 Web Api Web 服务发出 AJAX 请求。它托管在 IIS 7.5 上。

当用户对自己的身份验证和 web api 服务（与网站共享相同的机器密钥）进行身份验证时，我无法在静态 html 文件上进行身份验证。

我基本上有一个带有静态 .html 文件的基本网站和一个带有 Web Api Web 服务的 asp.net 应用程序。大多数静态 html 文件应该只对经过身份验证的用户可用（具有有效 FormsAuthentication cookie 的请求，由 web api 应用程序中的 /api/login 路由发出），这些文件位于网站根目录下的“安全”文件夹中. Web Api ASP.NET 应用程序位于网站根目录下的“api”文件夹中：

WebsiteRoot/api/
secure/login.html 1.html 2.html

这很好用，像 1.html 这样的静态文件可以向 /api 路由下方的 web api 路由发出 AJAX 请求。现在我想将 1.html 和 2.html 移到 secure/ 中，以限制只有经过身份验证的用户才能访问它们。

Web api 服务本身使用 FormsAuthentication 来限制对服务路由的访问。用户通过向 /api/login（使用 [AllowAnnonymous] 配置）发出 AJAX 请求进行身份验证，现在我希望只有通过这种方式进行身份验证的用户才能被授予访问安全 / 文件夹中的静态 .html 文件的权限。

所以我的想法是这样的：

1) 确保 ASP.NET 管道处理对 .html 文件的请求。

2) 在静态网站中启用表单身份验证

3) 拒绝匿名访问 websiteroot/secure 文件夹。

4) 确保对 /api/login 进行身份验证时发出的 Auth cookie 对 /secure 文件夹上的身份验证机制也有效。

我已经尝试过这样做，但目前我被拒绝访问 websiteroot/secure 中的文件，即使请求已经过身份验证（它有一个由 web api 应用程序中的 /api/login 路由发出的 .ASPFORMSAUTHI cookie）

这是我所做的：我有 3 个 web.config 文件：1 个在 WebsiteRoot，1 个在 WebsiteRoot/api（Web api 应用程序的根）和 1 个在 WebsiteRoot/secure

为确保 4)，我对 FormsAuthentication 进行了相同的配置，并在网站根目录和 websiteroot/api web.config 文件中使用了相同的机器密钥。cookie 的域在两个文件中设置为相同。

然后，为了确保 1)，我将其添加到网站根 web.config 文件中，以确保 .html 文件（所有文件）由 ASP.NET 管道处理和验证：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
          <add  name="FormsAuthenticationModule"  type="System.Web.Security.FormsAuthenticationModule" />
          <remove  name="UrlAuthorization" />
          <add  name="UrlAuthorization" type="System.Web.Security.UrlAuthorizationModule"  />
          <remove  name="DefaultAuthentication" />
          <add  name="DefaultAuthentication"  type="System.Web.Security.DefaultAuthenticationModule" />
    </modules>
</system.webServer> 
```

以下是位于 websiteroot/api/ 的 web api 应用程序 web.config 文件中的相关内容：

```
<system.web>
<authentication mode="Forms">
  <forms name=".ASPXFORMSAUTH" protection="All" path="/" domain=".mydomain.com" timeout="7200" slidingExpiration="true" />
</authentication>
<machineKey validationKey="SAME_IN_BOTH_FILES" decryptionKey="SAME_IN_BOTH_FILES" validation="SHA1" decryption="AES" />
<roleManager enabled="true" defaultProvider="simple">
  <providers>
    <clear />
    <add name="simple" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData" />
  </providers>
</roleManager>
<membership defaultProvider="simple">
  <providers>
    <clear />
    <add name="simple" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
  </providers>
</membership>
... 
```

这是位于 websiteroot/ 的网站根 web.config 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.web>
        <authentication mode="Forms">
          <forms loginUrl="login.html" name=".ASPXFORMSAUTH" protection="All" domain=".mydomain.com" path="/" timeout="7200" slidingExpiration="true" />
        </authentication>
        <machineKey validationKey="SAME_IN_BOTH_FILES" decryptionKey="SAME_IN_BOTH_FILES" validation="SHA1" decryption="AES" />
    </system.web>
            <system.webServer>
                <modules runAllManagedModulesForAllRequests="true">
                      <add  name="FormsAuthenticationModule"  type="System.Web.Security.FormsAuthenticationModule" />
                      <remove  name="UrlAuthorization" />
                      <add  name="UrlAuthorization" type="System.Web.Security.UrlAuthorizationModule"  />
                      <remove  name="DefaultAuthentication" />
                      <add  name="DefaultAuthentication"  type="System.Web.Security.DefaultAuthenticationModule" />
                </modules>
            </system.webServer>
</configuration> 
```

这是位于 websiteroot/secure/ 中的 web.config 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.web>
        <authorization>
            <deny users="?" />
        </authorization>
    </system.web>
</configuration> 
```

请注意，如果我改变

```
<deny users="?" /> 
```

至

```
<allow users="?" /> 
```

然后我被授予访问 websiteroot/secure/ 中的 .html 文件的权限

所以我的问题是：

1) 当请求包含 /api/login 发出的 .ASPFORMSAUTH cookie 时，为什么对 /secure 的请求会被拒绝？

2) 对于如何制作静态网站，是否有替代解决方案，其中某些文件仅限于在同一站点上通过 Web api 服务进行身份验证的用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:25:15.740

我相信您已经意识到，但是您面临的问题与真正的 WebAPI 环境中的无会话有关。表单身份验证基于保存在客户端的会话 cookie，并由服务器端在每个后续请求中进行解释。

如果您通过 WebAPI 调用进行身份验证，则需要直接处理 cookie 的创建/读取。使用这种真正的 RESTful 实现的主要好处之一是您不应该真正拥有“会话”本身。

在我的应用程序中，我处理此问题的方法之一是使用唯一标识我的用户身份的数据密钥 - 然后将其存储在客户端的 cookie 中，以只有我的服务器可以理解的方式加密。我不会在这里讨论安全要求 - 因为有更好的论坛供您查看有关如何加密/解密等方面的信息 - 但基本交易是这样的：

1.  当您的客户进行身份验证时，为他们创建一个安全的 cookie
2.  为您的对象创建一个基类，该基类`Controller`知道如何解释该 cookie

然后，执行以下操作之一：

1）为您的静态内容创建一个[消息处理程序](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers "消息处理程序")，该处理程序还根据您设置的cookie处理身份验证 - 并检查对静态文件的权限......

或者 2) 创建一个新`Controller`的，它有一个可以为您的静态内容提供服务的操作。这样做的好处是能够从您的基本控制器类继承并从第 2 步免费获得身份验证。

# android - 当slidingdrawer打开listview参数改变

> ID：14089080
> 
> 赞同：1
> 
> 时间：2012-12-30T07:33:59.357
> 
> 标签：android, android-layout, animation, slidingdrawer

我的应用程序中有一个小动画，它的结尾改变了 ListView 的位置参数：`listArr.layout(0, (int) (actionBar.getHeight() + filterTabHeight), listArr.getWidth(), (int) (actionBar.getHeight() + listArr.getHeight() + filterTabHeight));`

即它的设置比它开始时低一点（它以全屏方式开始，按下按钮后，它向下滑动一点以在屏幕顶部显示它下面的东西）。

通过按下列表，我可以看到它的参数真的改变了，它的位置也真的改变了。现在，如果此时 SlidingDrawer 正在打开，则布局会重新排列，并且列表会重新设置为全屏。

为什么呢？

```
private void setFilterAnimationAnimation(boolean isOpenAnimation) {
    TranslateAnimation verticalAnimation;
    float scale = context.getResources().getDisplayMetrics().density;
    filterTabHeight = FILTER_HEIGHT_IN_DP * scale;

    if (isOpenAnimation) {
        listArr.layout(0, (int) (actionBar.getHeight() + filterTabHeight), 
                listArr.getWidth(), (int) (actionBar.getHeight() + listArr.getHeight() + filterTabHeight));
        verticalAnimation = new TranslateAnimation(0, 0, -filterTabHeight, 0);
    } else {
        listArr.layout(0, (int) (actionBar.getHeight()), 
                listArr.getWidth(), (int) (actionBar.getHeight() + listArr.getHeight()));
        verticalAnimation = new TranslateAnimation(0, 0, filterTabHeight, 0);
    }
    verticalAnimation.setInterpolator(new AccelerateDecelerateInterpolator());
    verticalAnimation.setDuration(250);
    animSet = new AnimationSet(false);
    animSet.cancel();
    animSet.reset();
    animSet.setFillAfter(true);
    animSet.addAnimation(verticalAnimation);
    isTabOpen = !isTabOpen;
    listArr.startAnimation(animSet);
} 
```

这是xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res/com.softtechnics.something"
android:id="@+id/coupon_list_layout"
style="@style/FillParent"
android:orientation="vertical" >

<include
    android:id="@+id/filter_tab"
    android:layout_width="match_parent"
    android:layout_height="34dp"
    android:layout_below="@+id/action_bar"
    layout="@layout/filter" />

<com.softtechnics.something.gui.components.ListArr
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/action_bar" />

<com.softtechnics.something.gui.components.ActionBar
    android:id="@+id/action_bar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true" />

<ProgressBar
    android:id="@+id/progress"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:visibility="gone" />

<com.softtechnics.something.gui.components.Footer
    android:id="@+id/drawer"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@id/action_bar"
    android:scaleType="fitXY"
    android:src="@drawable/head_bar_shadow" /> 
```

页脚是我的 SlidingDrawer。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T09:25:49.573

布局方法不会对视图应用永久更改。所以下次当你的布局更新时，一切都会回来。更改 listView 的 LayoutParams 以应用永久更改并阅读[此](https://stackoverflow.com/questions/6535648/how-can-i-dynamically-set-the-position-of-view-in-android)内容。

# python - Python - 读取、解析和写回文件

> ID：14089083
> 
> 赞同：2
> 
> 时间：2012-12-30T07:34:30.433
> 
> 标签：python, parsing

我正在尝试从文本文件中读取大约 5000 行代码，然后解析并将解析后的值存储到另一个文本文件中。

但是，我只能对前 967 行执行此操作（如输出文件所示，其中仅包含前 967 行的解析值）。

这是我为完成这项工作而编写的简单代码。

```
infile = open("Input.txt", "r")
outfile = open("Output.txt", "w")
for line in infile.readline():
    temp = infile.readline()
    value = temp.split("<_|_>")
    outfile.write(value[1]) 
```

我将如何编写其他 4000 多个值？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-30T07:44:26.043

因为您的`for`迭代不是在 中的行上`infile`，而是在其第一行中的字符上。第一行大概有 967 个字符。

`for line in infile.readline()`表示您正在从`infile`字符串中读取第一行。字符串是可迭代的，就像迭代它们会迭代该字符串中的字符一样。因此，您每次都在为该行中的每个字符运行循环。

您想要做的可能是这样的：

```
with open("Input.txt", "r") as infile, open("Output.txt", "w") as outfile:
    for line in infile:
        outfile.write(line.split("<_|_>")[0]) 
```

Python 中的文件对象也是可迭代的。遍历它们会遍历每一行。您*可以*使用`for line in infile.readlines()`(Note: `readlines`, not ) 代替，但这会在迭代之前`readline`将所有行读入一个巨大的数组中。`infile`直接对文件对象进行迭代只会一次将最新的读取行保留在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T13:36:22.740

为什么我们不能只使用

```
f1 = open('Input.txt','r')
f2 = open('Output.txt','w')

for i in f1:
f2.writelines(i)

f2.close() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T08:02:25.483

您应该阅读每一行并进行解析。您正在输入文件的单行上执行 for 循环。一个简单的方法是使用 while 循环

```
f1 = open('Input.txt','r')
f2 = open('Output.txt','w')
line = f1.readline()
while line:    
    value = line.split('<_|_>')
    f2.write(value[0])
    line = f1.readline() 
```

# android - 当 minsdk 高于 3 时，ICS 绘制位图按比例放大

> ID：14089084
> 
> 赞同：1
> 
> 时间：2012-12-30T07:34:36.733
> 
> 标签：android

我的小部件布局中有一个 ImageView，我在上面放置了一个画布生成的位图。

今天我在ICS中测试时遇到了奇怪的问题。

如果我将 minsdk 版本定义为高于 3，则在画布上绘制的图形位图（来自可绘制资源）将按比例放大。

当 minsdk 小于或等于 3 时，一切正常。这是它在 ICS 中的外观：

![普通的](../Images/39577b0715dbda53770aaa5eecee7d80.png)

如果我将 minsdk 设置为 4 或更高，这就是它的外观。看看太阳是如何放大的。

![在此处输入图像描述](../Images/22e8b56adf3eafeca4daf7985e603c9a.png)

还有另一个有趣的问题，如果 minsdk 为 3 或更低，当小部件在屏幕上时，所有 Toast 消息都会变得非常小！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:13:11.463

要测试您的应用程序在多个设备上是否工作/看起来相同，您应该简单地在不同的模拟器中运行它（相应地使用 SDK 级别 4、5、6...）而不更改 minSdk 属性。将 -file 的`target=`属性设置`project.properties`为最高安装的 SDK（例如`target=android-17`），这意味着您正在重新编译应用程序的最新 SDK 版本。清理项目（"Project" --> "Clean" --> "OK"），然后在不同的模拟器版本上进行测试，并将清单的 minSdkVersion 属性设置为支持的最低版本。这样，您在测试期间不应该看到任何奇怪的问题。

# asp.net-mvc - 在 ASP.NET MVC4 中使用 HTML.BeginForm 时，如何将类定义添加到表单中？

> ID：14089085
> 
> 赞同：2
> 
> 时间：2012-12-30T07:34:36.823
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有以下内容：

```
 @using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl })) 
```

我试过这个：

```
 @using (Html.BeginForm(new { @class = "form", ReturnUrl = ViewBag.ReturnUrl })) 
```

但是我没有看到添加了类“表单”。我定义它的方式有问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T07:49:54.337

Try defining htmlAttributes parameter explicitly like so:

```
@using (Html.BeginForm(null, null, FormMethod.Post, htmlAttributes: new { @class = "form-class" })) {
} 
```

**Update after reading comment** Try using one of the BeginForm overloads that allow you to specify route objects (I have not tested this because I dont have an IDE nearby)

```
@using (Html.BeginForm("Action", "Controller", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, htmlAttributes: new { @class = "form-class" })) {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T07:43:39.613

如果您想使用默认表单，那会很痛苦，但只需添加一些属性。[这是接受属性的重载方法签名](http://msdn.microsoft.com/en-us/library/dd505151%28v=vs.108%29.aspx)。因此，您还需要提供操作名称、控制器名称和表单方法。您拥有的第一个表单是设置 RouteValueCollection。

我过去所做的是创建自己的帮助程序来绕过限制。这是一个将所有其他参数短路的示例扩展方法。

```
using System.Web.Mvc.Html;

namespace MySite.Extensions {
    public static class HtmlFormExtensions {
        public static MvcForm BeginForm(this HtmlHelper htmlHelper, RouteValueDictionary routeValues, IDictionary<string, Object> htmlAttributes) {
            return htmlHelper.BeginForm(null, null, routeValues, FormMethod.Post, htmlAttributes);
        }
    }
} 
```

确保在视图中包含您的命名空间（或通过 web.config 的所有视图），然后像这样调用它：

```
@using (Html.BeginForm(new { ReturnUrl = ViewBag.ReturnUrl }, new { @class = "form" })) 
```

# c++ - STL 容器是否设计为允许继承？

> ID：14089088
> 
> 赞同：12
> 
> 时间：2012-12-30T07:35:07.510
> 
> 标签：c++, inheritance, stl, destructor

> **可能重复：**
> [是否可以从 STL 容器继承实现而不是委托？](https://stackoverflow.com/questions/2034916/is-it-okay-to-inherit-implementation-from-stl-containers-rather-than-delegate)

我的问题与[为什么 STL 容器没有虚拟析构函数有关？](https://stackoverflow.com/questions/1647298/why-dont-stl-containers-have-virtual-destructors)有些人（包括前一个问题的作者）确信没有虚拟 dtor 意味着类不可继承。我对如此强烈的声明持怀疑态度，因此我询问了来源或一些推理，但大多数受访者保持沉默。也没有人回应我的[回答](https://stackoverflow.com/a/13881095/205955)

所以我认为质疑前一个问题中的假设并澄清这个重要问题是个好主意。STL 容器是否设计为允许继承？更一般地说：继承需要虚拟析构函数吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-30T07:39:13.980

> **STL 容器是否设计为允许继承？**

标准库容器允许继承。没有什么能阻止您从标准库容器类继承。如果这样做，您将不会收到任何编译错误。
但是它们的设计目的不是为了允许通过基类指针破坏派生类对象。因此，如果您想在这种情况下使用继承（*简称动态多态*），那么标准库容器显然不是为它设计的。

> **继承需要虚拟析构函数吗？**

仅当您打算调用`delete`指向派生类对象的基类指针时，基类析构函数才需要是虚拟的。如果基类析构函数不是虚拟的，它将导致未定义的行为。

所以总结一下，规则是：

> ***如果您需要继承动态多态标准库容器类不是为它设计的，但如果您不需要，您可以安全地从它们继承。***

**注意：**您在您提供的答案链接中的分析是正确的。它只是没有得到回应，可能是因为答案是在原始 Q 发布后很长时间（*几年）发布的。*你现在有我的 +1。

# python - 使用第一个元素作为键加入元组列表

> ID：14089092
> 
> 赞同：-3
> 
> 时间：2012-12-30T07:36:21.013
> 
> 标签：python, sorting, tuples

我有一个元组列表（如下所示），我需要加入每个元组中的第一项。所以结果将是一个 (word, list(numbers)) 元组的列表。

```
In [351]: word_docid_pairs
Out[351]: 
[('bear', 1),
('is', 1),
('in', 1),
('gugledarc', 1),
('the', 1),
('sdpij', 2),
('emdf', 2),
('sai', 2),
('sd', 3),
('fuggle', 4),
('in', 4),
('gugledarc', 4),
('df', 4)] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T07:41:15.913

```
Python 2.7.3 (default, Sep 26 2012, 21:51:14) 
>>> ll = [('bear', 1),
... ('is', 1),
... ('in', 1),
... ('gugledarc', 1),
... ('the', 1),
... ('sdpij', 2),
... ('emdf', 2),
... ('sai', 2),
... ('sd', 3),
... ('fuggle', 4),
... ('in', 4),
... ('gugledarc', 4),
... ('df', 4)]
>>> dd = {}
>>> for key, value in ll:
...     dd.setdefault(key, []).append(value)
... 
>>> dd.items()
[('sai', [2]), ('emdf', [2]), ('df', [4]), ('is', [1]), ('bear', [1]), ('gugledarc', [1, 4]), ('in', [1, 4]), ('the', [1]), ('sdpij', [2]), ('fuggle', [4]), ('sd', [3])] 
```

正如所建议的，这是另一个使用`defaultdict`：

```
>>> from collections import defaultdict
>>> dd = defaultdict(list)
>>> for key, value in ll:
...     dd[key].append(value)
... 
>>> dd.items()
[('sai', [2]), ('emdf', [2]), ('df', [4]), ('is', [1]), ('bear', [1]), ('gugledarc', [1, 4]), ('in', [1, 4]), ('the', [1]), ('sdpij', [2]), ('fuggle', [4]), ('sd', [3])] 
```

# wpf - ContentControl更改时如何保持窗口大小

> ID：14089096
> 
> 赞同：1
> 
> 时间：2012-12-30T07:38:14.600
> 
> 标签：wpf, caliburn.micro

我有一个带有 ContentControl 的页面。ContentControl 被动态设置为当前仅包含 DataGrid 的 UserControl。发生这种情况时，页面将被调整大小以适应 DataGrid 的内容，这恰好使页面离开屏幕。

如果我将页面宽度从 Auto 更改为硬编码值，则在动态设置 ContentControl 时页面宽度不会改变。这是我想要的行为。但是，这也意味着当用户手动拖动窗口变大时，窗口的内容不会扩大到大于我设置的硬编码宽度值。

如何在设置 ContentControl 时使页面保持相同的大小，同时在用户增加窗口大小时仍允许页面增长？

```
<Page x:Class="SageWpf.Views.ShellView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      mc:Ignorable="d" Title="ShellView" MinHeight="450" MinWidth="800">

    <Grid Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Page, AncestorLevel=1}, Path=Width}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" BorderBrush="Black" BorderThickness="2" Width="193">
            <StackPanel Orientation="Vertical" Width="188">
                <Button x:Name="ItemsScreen" FontSize="28" Height="65" Margin="1" Opacity="1">Items</Button>
                <Button x:Name="CheckoutScreen" FontSize="28" Height="65" Margin="1" Opacity="1">Checkout</Button>
            </StackPanel>
        </Border>

        <ContentControl x:Name="ActiveItem" Grid.IsSharedSizeScope="True" Grid.Column="1"></ContentControl>
    </Grid>
</Page> 
```

如您所见，我的 MinWidth 为 800，并且我希望在单击 CheckoutScreen 按钮时页面保持在此宽度（如上所述，它将加载 ContentControl 和包含 DataGrid 的视图）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T16:46:17.833

您可以使用类似的方法让窗口保持由用户调整大小，但不能由控件本身调整。

```
<Grid  ScrollViewer.VerticalScrollBarVisibility="Auto"> 
```

# ios - 在 iOS 中监听 Facebook 令牌更新

> ID：14089101
> 
> 赞同：1
> 
> 时间：2012-12-30T07:39:14.780
> 
> 标签：ios, facebook

我目前使用的是 Facebook iOS SDK 3.1.1，没有原生集成。

如何检测令牌发生变化或过期但令牌相同，而无需在每次 FB 操作后针对本地 NSUserDefaults 副本进行显式检查？

我在 SDK 中找不到太多关于 NSNotificationCenter 方法名称或 KVO 用法的文档。

# php - 给出一组字符上的字符点

> ID：14089103
> 
> 赞同：0
> 
> 时间：2012-12-30T07:39:37.810
> 
> 标签：php, database

我想问一下。所以我取数据库实例的值我取数据库的值price，一般值例如3000。我想在3.000中插入一个字符点值3000。

描述：

```
$price = $row['price'];
// eg, the value of $price that is 3000
// Output to 3.000 
```

如何编码php来解决问题？请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T07:42:04.683

很难解读您的问题，但[`number_format()`](http://php.net/number-format)您正在寻找什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T07:42:58.803

我相信您正在寻找[number_format()](http://php.net/manual/en/function.number-format.php)。

```
php > echo number_format(3000, 0, ',', '.');
3.000
php > echo number_format(3000000, 0, ',', '.');
3.000.000 
```

# java - 使用 XMLAdapter 使用 jaxb 序列化通用字段

> ID：14089105
> 
> 赞同：1
> 
> 时间：2012-12-30T07:40:13.750
> 
> 标签：java, xml, generics, jaxb

我们有一个定义对象 ID (UID) 的类：

公共最终类 UUID 实现 Serializable, Comparable { .... }

和另一个类：

```
 @XmlType(name = "ChangeFieldValueInstruction")
    public static class ChangeFieldValueInstruction<T> extends Instruction
    {
        private T newVal;

        public ChangeFieldValueInstruction()
        {
            super();
        }

        public ChangeFieldValueInstruction(String fieldPath, T newVal)
        {
            super(fieldPath);
            setNewVal(newVal);
        }

        public T getNewVal()
        {
            return newVal;
        }

        public void setNewVal(T newVal)
        {
            this.newVal = newVal;
        }
      ................
    } 
```

这个类（UpdateObjectRequest）是通过一个网络服务（我们使用spring）传递的。

我有一个包信息文件，它为 UUID.class 定义了一个适配器，但是当我们将一个 UID 对象传递给 newVal 时，我们看到没有调用该适配器，实际上调用了默认的 UID 构造函数。我尝试使用@XmlAnyElement 注释getNewVal() 方法，并将@XmlJavaTypeAdapter 也添加到UID 类中（正如这里有人建议的那样），但它仍然不起作用。还尝试在 xsd 中使用 @XmlSeeAlso(UUID.class) BTW 注释 UpdateObjectRequest 我看到 newVal 被定义为 xs:anyType

那么有谁知道我怎样才能让它工作？10 倍。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T07:53:23.513

不可能，恕我直言。

这应该如何工作？您将拥有 SOAP WebService 有效负载的动态 XML 模式。接收服务应该如何反应，他猜不出元素的类型。

使用 SOAP、Web 服务及其操作，XML 类型在 WSDL - WebService 定义中预定义。这就是客户端和服务器可以互操作的方式，因为它们协商的有效载荷格式不是动态的。

您需要准确定义，可以在 ws 客户端和服务器之间传递哪些消息、类型

# ssl - Wininet SSL 与每个请求的客户端证书智能卡访问

> ID：14089106
> 
> 赞同：0
> 
> 时间：2012-12-30T07:40:39.130
> 
> 标签：ssl, x509certificate, wininet, cac, certificate-store

我正在使用 Wininet 库与客户端证书（存储在智能卡上）建立 SSL 连接。

问题是我看到每个已发送的 HttpRequest 都访问了智能卡。

从 Fidler 和 wireshark，我看到： 1\. 所有请求都是 HTTP 1.0 而不是 HTTP 1.1。2\. 每次连接都会进行完整的 SSL 握手 3\. 我不会被要求为每个请求输入 pin 码（仅适用于第一个请求），但我发送的每个请求都会访问智能卡。

有什么想法/线索吗？实际上，问题可能与wininet无关，但证书存储应该采取额外的步骤？

谢谢你，扎哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:44:56.663

好的，我仍然不明白为什么 wininet ssl 连接是 HTTP 1.0 而不是 HTTP 1.1（根据 MSDN 应该是 HTTP 1.1。），在 wininet.h 中明确 HTTP 版本是 1.0。

关于完整握手：我不能使用**INTERNET_FLAG_IGNORE_CERT_CN_INVALID**或**INTERNET_FLAG_IGNORE_CERT_DATE_INVALID**或相关证书忽略标志来忽略任何证书错误或证书验证检查。IE wininet 代码强制检查，看看您是否没有使用常规 IE 例程来处理安全性。如果安全检查被忽略或禁用，wininet 将为每个单独的请求强制执行一个新的 SSL 套接字。这意味着当安全检查被禁用时，请求不会一起共享。这是一种安全设计，用于确认您确实希望忽略/禁用每个请求的证书检查，而不是在多个请求之间共享未经验证的 SSL 会话。

问候，扎哈尔

# mysql - 如何始终返回子查询结果？

> ID：14089109
> 
> 赞同：2
> 
> 时间：2012-12-30T07:41:18.823
> 
> 标签：mysql, sql, select, join

我知道这个问题被问了很多，但不知道我是否应该使用`COALESCE` `ifnull`或其他东西。

我有以下查询：

```
 select (amount-
(select (sum(l.amount_sum)-sum(lr.reward)) as total
from logs l
join logs_rewards lr on l.id = lr.related_log_id
where l.agent_id = '1'))
as balance
from logs_payments
where agent_id = '1' 
```

现在的问题是，如果查询`agent_id`中不存在`logs_payments`将不会返回行，但我希望它做的是无论如何返回结果，但如果`amounts`不存在，将其设置为 0 用于子查询

现在我考虑过查询另一个表并像这样加入结果：

```
select (lp.amount-
(select (sum(l.amount_sum)-sum(lr.reward)) as total
from logs l
join logs_rewards lr on l.id = lr.related_log_id
where l.agent_id = '1'))
as balance
from agents a
join logs_payments lp on lp.agent_id = a.id
where a.id = '1' 
```

但这也没有用。我应该采取什么方法来解决这个问题？

为了清楚起见，我希望此查询始终返回子查询的金额结果，如果不存在金额仍然返回结果，但将其计算为 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T07:51:34.890

好吧，我使用 JW 关于 LEFT JOIN 的评论和 Saharsh 关于`ifnull`使用以下代码的评论让它工作：

```
select ifnull(sum(lp.amount),0)-
(select (sum(l.amount_sum)-sum(lr.reward)) as total
from logs l
join logs_rewards lr on l.id = lr.related_log_id
where l.agent_id = '1')
as balance
from agents a
left join logs_payments lp on lp.agent_id = a.id
where a.id = '1' 
```

谢谢两位的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T07:44:58.807

采用`LEFT JOIN`

```
SELECT  a.amount - COALESCE(b.total, 0) as balance
FROM    logs_payments a
        LEFT JOIN
        (
            SELECT  agent_id, sum(l.amount_sum) - sum(lr.reward) as total
            FROM    logs l
                    INNER JOIN logs_rewards lr 
                        ON  l.id = lr.related_log_id
            GROUP BY agent_id
        ) b ON a.agent_id = b.agent_id
WHERE   a.agent_id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T07:47:31.527

试试这个 ：

```
SELECT l.agent_id, IFNULL(lp.amount, 0) amt, l.total 
FROM (SELECT l.agent_id, (SUM(l.amount_sum) - SUM(lr.reward)) AS total 
      FROM logs l INNER JOIN logs_rewards lr ON l.id = lr.related_log_id 
      WHERE l.agent_id = '1') AS l 
LEFT jon log_payments lp ON l.agent_id =lp.agent_id 
WHERE l.agent_id = '1' 
```

# objective-c - 尝试将 NSString 添加到 NSMutableDictionary 不起作用

> ID：14089126
> 
> 赞同：0
> 
> 时间：2012-12-30T07:45:01.923
> 
> 标签：objective-c, nsmutabledictionary

我从文本字段中获取姓名和电话号码，直到这里一切正常。当我试图将这些数据添加到我`NSMutableDictionary`没有任何反应时。

* * *

## 视图控制器.h

```
@property(strong,nonatomic) NSMutableDictionary *contacts; 
```

* * *

## 视图控制器.m

```
- (IBAction)btnAdd:(id)sender {
    self.userName = self.name.text;
    self.userPhoneNumber = self.phoneNumber.text;
    [self addToDictionary:self.userName :self.userPhoneNumber];
    NSLog(@"ADDED: Key = %@, Value = %@", self.userName, self.userPhoneNumber);
    [self clearTextFields];
}

- (void)addToDictionary: (NSString*) _name: (NSString*) _phone{
    [self.contacts setObject:_name forKey:_phone];
} 
```

* * *

## 错误信息

> '_name' 的本地声明隐藏了实例变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T07:49:10.887

您很可能没有初始化您的字典。

将此添加到您的`viewDidLoad`方法中：

```
self.contacts = [NSMutableDictionary new]; 
```

至于最后的警告，当您拥有声明的属性时，将自动为您创建一个具有相同名称的 iVar，但之前添加了一个 _。IE 如果你有一个声明的属性，那么会为你创建`name`一个名为的实例变量。`_name`创建`addToDictionary:`方法时，您使用了相同的名称。这会阻止您访问 iVar，因此它会向您发出警告。要消除警告，请将`_name`and替换`_phone`为其他内容（例如`newName`and `newPhone`）。

# drupal - 当用户在 webform 中提交值并单击提交时如何创建节点？

> ID：14089131
> 
> 赞同：4
> 
> 时间：2012-12-30T07:46:05.890
> 
> 标签：drupal, drupal-6

我的网站（D6）有“快速查询表单”（使用 webform）& 当用户单击 webform 中的提交按钮时，我需要同时创建一个新节点。

当用户单击提交按钮时，我如何从 webform 获取值并将值插入节点。

请建议我如何做到这一点！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:12:50.207

您可以通过创建自定义模块来完成此操作。该模块将具有两个功能：

1.  HOOK_form_alter - 向现有网络表单添加额外的提交功能。
2.  自定义函数 - 自定义函数（从 HOOK_form_alter 调用）从提交的 web 表单中获取值并创建节点。

在创建模块之前，您应该使用核心节点模块和 CCK 创建一个内容类型，其中包含所有与 Web 表单相同的字段。

## HOOK_form_alter

在下面的示例中，将模块名称替换为 MODULENAME，并将您的网络表单的 ID 替换为 switch case 中的 XXX。此函数将 MODULENAME_create_node 添加到您的网络表单的提交函数数组中。我们将在下面定义 MODULENAME_create_node。

```
<?php
function MODULENAME_form_alter(&$form, $form_state, $form_id) {
  switch ($form_id) {

    case 'webform_client_form_XXX' :
    $first = array_shift($form['#submit']);
    array_unshift($form['#submit'], $first, 'MODULENAME_create_node');

    break;

  }
} 
```

## MODULENAME_create_node

这是将创建节点的主要功能。

```
<?php
function MODULENAME_create_node() {
  // Load all of the data submitted via the webform into a keyed array ($data)
  $data = array();
  foreach ($form_state['values']['submitted_tree'] as $key => $value) {
    $data[$key] = $value;
  }

  // The node_save() function (called later in this function) call
  // node_access_check, which means that anonymous calls to this function will
  // not be successful. Top get around this, we load user1 while executing this
  // function, then restore the user back to the original state at the end of
  // the function.
  global $user;
  $original_user = $user;
  $user = user_load(1);

  // Initialize the new node with default stuff
  $node = new stdClass();
  $node->type = 'YOUR_CONTENT_TYPE';
  $node->created = time();
  $node->changed = $node->created;
  $node->status = 1;
  $node->promote = 0;
  $node->sticky = 0;
  $node->format = 1;
  $node->uid = $user->uid;

  // You'll need to customize this based on what you named your webform and CCK fields.
  // Remember that all of the webform data is available and stored in the $data array.
  $node->title = $data['title'];
  $node->field_myfield1[0]['value'] = $data['myfield1'];
  $node->field_myfield2[0]['value'] = $data['myfield2'];

  //Save the node
  node_save($node);

  //Set the user state back to the original
  $user = $original_user;

} 
```

您还需要为您的模块创建一个信息文件。如果您不熟悉，请参阅 Drupal 关于[编写信息文件的文档。](http://drupal.org/node/231036)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-13T17:52:19.020

Bala - 您需要将 form 和 form_state 传递给自定义函数，如下所示：

```
<?php
function MYMODULENAME_create_node($form, $form_state) {
   // ... above code
} 
```

否则 $form_state 变量为空并且会抛出您遇到的错误。

# iphone - 如何创建自定义 UIWebView 页面

> ID：14089135
> 
> 赞同：2
> 
> 时间：2012-12-30T07:47:03.617
> 
> 标签：iphone, objective-c, ios, uiwebview

不是为一些编码问题而哭泣。只需要知道制作自定义 webview 的正确策略是什么。

我正在使用`NSXMLParser`并且我已经成功地将 wordpress 博客解析为带有缩略图、标题和其他标签的表格视图。

我还成功创建了一个`UIWebView`以下列方式显示博客文章的内容：

![输出](../Images/d713a86cbe28f425713fbd3bcdd21d48.png)

我想要的是从标题、图像开始自定义外观，然后是博客文章的书面内容。例如，Mashable 的 iPhone 应用程序，它显示博客文章，但它们看起来不像通用的 uiwebview 文章

![我想要的是](../Images/08cfa06cd89ee34aac1e76d8f0e336ba.png)

1.  因为我已经在应用程序中解析了很多内容。我是否需要在视图控制器中创建标签和图像等并从网站中提取日期来填充它们。
2.  或者有没有其他方法可以让 UIWebView 只显示我想要的博客文章中的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T08:04:45.230

Mashable 站点是移动网站（即检测移动设备并提供非常适合移动设备的 HTML 变体的网站）和基本上提供标准`UIWebView`、自定义工具栏（带有电子邮件、推文、fb 链接等）和底部的广告。

尝试解析标准网站以呈现适合移动设备的版本并不谨慎。首先，您应该从一个适合移动设备的网站开始。（作为 Mashable 所做的证据，在 iPhone Safari 中访问他们的网站，您会注意到您也喜欢那里的大部分外观和感觉。）然后，您可以决定是否也想部署一个便于从移动设备导航本网站的应用程序。

就个人而言，我认为一个应用程序只是一个简单的包装器，`UIWebView`可以在一些适合移动设备的网站中导航，并不是非常引人注目。您需要为用户提供一些重要的价值主张，超越典型的移动网站。您必须证明用户安装您的应用所花费的时间和精力是合理的。仅仅因为你喜欢它们在你的原生应用程序的定制生态系统中，并不意味着它对它们有意义。您需要让用户参与到有价值的活动中。（并没有冒犯 Mashable，他们的可能是一个糟糕的例子。感觉那里还不够。一些不错的新闻应用程序，例如*彭博社、经济学人，*甚至可能是《*华尔街日报》*或《*纽约时报》*可能是自定义属性的一个更好的例子，它提供了足够的用户体验优势来证明使用他们的应用程序是合理的。）

抛开这个更广泛的问题，你问了几个战术问题：

*   要获得该自定义标题栏，您只需创建控件以在情节提要或 NIB 中呈现该工具栏。那里没有什么非常复杂的。

*   要仅在您的 中显示特定网页`UIWebView`，您应该使您的控制器符合[`UIWebViewDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)，将您的控制器设置为`delegate`，`UIWebView`并实现[`shouldStartLoadWithRequest`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIWebViewDelegate/webView%3ashouldStartLoadWithRequest%3anavigationType%3a).

# php - php，当 number_format() 遇到 date_diff()

> ID：14089136
> 
> 赞同：0
> 
> 时间：2012-12-30T07:47:30.743
> 
> 标签：php, number-formatting, dateinterval

我的系统：win 7 32bit, wampserver 2.1e 请帮我找出以下混乱的解决方案。

```
<?php
echo number_format(10,2);   //output 10.00
$datetime1 = date_create('2012-12-13');
$datetime2 = date_create('2012-12-14');
$interval = date_diff($datetime1, $datetime2);
echo $interval->format('%d');  //output 1 
echo number_format(10,2);   // output :.00
echo number_format(10,2);  //output 10.00 
?> 
```

dateinterval->format 之后的第一个 number_format() 得到错误的结果。number_format 是否与 dateinterval 格式冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:01:03.477

我在 Win7 64bit WampServer 2.2 下运行了相同的脚本，我没有看到任何冲突。

可能您的困惑来自您在没有换行符的情况下打印值的事实。

尝试这个：

```
<?php
echo number_format(10,2)     . "<br>";
$datetime1 = date_create('2012-12-13');
$datetime2 = date_create('2012-12-14');
$interval = date_diff($datetime1, $datetime2);
echo $interval->format('%d') . "<br>";
echo number_format(10,2)     . "<br>";
echo number_format(10,2)     . "<br>"; 
```

它打印：

```
10.00
1
10.00
10.00 
```

# mysql - 我的桌子组织不好的另一个问题

> ID：14089139
> 
> 赞同：1
> 
> 时间：2012-12-30T07:47:47.627
> 
> 标签：mysql, sql, count, pivot

我有一个这样的表设置：

```
fruit1 | fruit2 | fruit3 | fruit4 | number1 | number2 | number3 | number4
--------------------------------------------------------------------------
apple  | orange | banana |  berry |    5    |    2    |    1    |    4   
orange | banana | apple  |  berry |    3    |    2    |    5    |    2
berry  | banana | orange |  apple |    1    |    2    |    5    |    2 
```

我需要一个 MySQL 查询来计算每个水果是每个数字的次数。所以，它最终会是这样的：

```
Fruit | 5's | 4's | 3's | 2's | 1's 
-----------------------------------
Apple | 2   | 0   | 0   | 1   | 0 
Banana| 0   | 0   | 1   | 1   | 1
... 
```

JW 帮了我很多，但我不知道如何从 JW 的解决方案转变为我现在需要的解决方案。
[需要帮助找出 MySQL 查询以计算某个数字](https://stackoverflow.com/questions/14088443/need-help-figuring-out-mysql-query-to-count-if-a-certain-number)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T08:04:48.853

由于您在评论中提到*最大值是 5*，所以这是一个使用您之前的问题的旋转版本`case`，您想要在这里，

```
SELECT fruit,
       SUM(CASE WHEN num = 5 THEN NumberOfInstance ELSE 0 END) `5's`,
       SUM(CASE WHEN num = 4 THEN NumberOfInstance ELSE 0 END) `4's`,
       SUM(CASE WHEN num = 3 THEN NumberOfInstance ELSE 0 END) `3's`,
       SUM(CASE WHEN num = 2 THEN NumberOfInstance ELSE 0 END) `2's`,
       SUM(CASE WHEN num = 1 THEN NumberOfInstance ELSE 0 END) `1's`
FROM
      (
        SELECT fruit, num, COUNT(*) NumberOfInstance
        FROM 
        (
          SELECT fruit1 fruit, number1 num FROM table1
          UNION ALL
          SELECT fruit2 fruit, number2 num FROM table1
          UNION ALL
          SELECT fruit3 fruit, number3 num FROM table1
          UNION ALL
          SELECT fruit4 fruit, number4 num FROM table1
        ) s 
        GROUP BY fruit, num
      ) s
GROUP BY fruit; 
```

*   [SQLFiddle 演示链接](http://sqlfiddle.com/#!2/3fa84/19)

# c# - 为什么我的单选按钮列表仅在选定值 = 1 时触发

> ID：14089142
> 
> 赞同：0
> 
> 时间：2012-12-30T07:48:25.313
> 
> 标签：c#, asp.net, ajax, updatepanel, radiobuttonlist

我不知道为什么`radiobuttonlist`只有当我选择第二个列表项时才会触发！

**我的 aspx ：**

```
 <asp:Panel ID="pnl_select_sign" runat="server" Visible="false">
            <asp:RadioButtonList ID="rb_select_sign" runat="server" AutoPostBack="true" RepeatDirection="Horizontal"
                OnSelectedIndexChanged="rb_select_sign_SelectedIndexChanged" CausesValidation="false" AppendDataBoundItems="true">
                <asp:ListItem Selected="True" Value="0">normal</asp:ListItem>
                <asp:ListItem Value="1">abnormal</asp:ListItem>
            </asp:RadioButtonList>
    </asp:Panel> 
  <div class="events" dir="rtl">
        <fieldset>
            <asp:UpdatePanel ID="UpdatePanel1" runat="server">
                <ContentTemplate>
                    <asp:Panel ID="pnl_PageNew_UC" runat="server" Width="100%">
                    </asp:Panel>
                    <asp:Panel ID="pnl_sign" runat="server" Width="100%" Visible="false">
                    </asp:Panel>
                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="rb_select_sign" EventName="SelectedIndexChanged" />
                </Triggers>
            </asp:UpdatePanel>
        </fieldset>
    </div> 
```

* * *

**我的 .cs ：**

```
 protected void rb_select_sign_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (rb_select_sign.SelectedValue == "0")
            {
                pnl_PageNew_UC.Visible = true;
                pnl_sign.Visible = false;

            }
            else
            {
                pnl_PageNew_UC.Visible = false;
                pnl_sign.Visible = true;

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T08:12:49.817

试试这个代码：

```
<asp:UpdatePanel ID="UpdatePanel2" runat="server" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Panel ID="pnl_select_sign" runat="server">
                <asp:RadioButtonList ID="rb_select_sign" runat="server" AutoPostBack="true" RepeatDirection="Horizontal"
                    OnSelectedIndexChanged="rb_select_sign_SelectedIndexChanged" CausesValidation="false"
                    AppendDataBoundItems="true">
                    <asp:ListItem Selected="True" Value="0">normal</asp:ListItem>
                    <asp:ListItem Value="1">abnormal</asp:ListItem>
                </asp:RadioButtonList>
            </asp:Panel>
        </ContentTemplate>
    </asp:UpdatePanel>

    <div class="events" dir="rtl">
        <fieldset>
            <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
                <ContentTemplate>
                    <asp:Panel ID="pnl_PageNew_UC" runat="server" Width="100%">
                        123
                    </asp:Panel>
                    <asp:Panel ID="pnl_sign" runat="server" Width="100%" Visible="false">
                        312
                    </asp:Panel>
                </ContentTemplate>
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="rb_select_sign" EventName="SelectedIndexChanged" />
                </Triggers>
            </asp:UpdatePanel>
        </fieldset>
    </div> 
```

在后面的代码中：

```
 protected void rb_select_sign_SelectedIndexChanged(object sender, EventArgs e)
        {
            if (rb_select_sign.SelectedValue == "0")
            {
                pnl_PageNew_UC.Visible = true;
                pnl_sign.Visible = false;

            }
            else
            {
                pnl_PageNew_UC.Visible = false;
                pnl_sign.Visible = true;

            }

            UpdatePanel1.Update();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T08:17:19.067

好吧，您的问题不是从 开始的`selectedvalue =1`，而是在您将面板的可见性设置为 true 时开始的。

问题本身在您的`AsyncPostBackTrigger`，您的触发器在 UpdatePanel*之外*，因此不再触发。

这很容易解决，将 RadioButtonList 放在 ContentTemplate 中：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <ContentTemplate>
    <asp:Panel ID="pnl_select_sign" runat="server" >
        <asp:RadioButtonList ID="rb_select_sign" runat="server" AutoPostBack="true" RepeatDirection="Horizontal" ... />
    </asp:Panel> 
    <asp:Panel ID="pnl_PageNew_UC" runat="server" Width="100%">
    </asp:Panel>
.... 
```

# java - 通过 getClass().getResource() 加载文件

> ID：14089146
> 
> 赞同：54
> 
> 时间：2012-12-30T07:49:11.987
> 
> 标签：java, file, load, embedded-resource

我已经按照加载资源文件的方式使用`getClass.getResource(path)`. 代码片段在这里：

```
String url = "Test.properties";

System.out.println("Before printing paths..");
System.out.println("Path2: "+ getClass().getResource(url).getPath());

FileInputStream inputStream = new FileInputStream(new File(getClass().getResource(url).toURI()));
i_propConfig.load(inputStream);
inputStream.close(); 
```

我已经在 Eclipse 中使用层次结构对其进行了配置（在源代码下有一个名为 SwingDemo 的文件夹。在 SwingDemo 中有我的 java 文件以及资源文件）...

1.  源代码
    *   摇摆演示
        1.  CustomDialog.java
        2.  测试属性

当我在 Eclipse 上运行它时，一切都运行良好。但是，一旦我尝试从 cmd 行运行应用程序，就会发生空指针异常。

命令行部署层次结构如下：

文件夹 ：`D:\Work\Java Progrms\SwingDemo`

等级制度：

1.  摇摆演示
    *   CustomDialog.java
    *   测试属性

首先，我`SwingDemo`从命令行（javac `CustomDialog.java`）在文件夹中编译了这个文件。然后我回到 Java Programs 文件夹（正如我在 .java 类中提到的包）并使用著名的

```
java SwingDemo.CustomDialog 
```

当我之前使用 new FileInputStream("path") 时，我曾经遵循类似的步骤。这样做后，我得到空指针异常..

我认为`getClass().getResource(url)`无法从特定目录加载文件。这就是为什么我将资源与我的 java 文件放在同一目录中的原因。它在 Eclipse 中运行良好。但是为什么当我从命令行运行时这会出错。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-12-30T08:05:20.050

`getClass().getResource()`使用类加载器加载资源。这意味着资源必须在要加载的类路径中。

使用 Eclipse 执行此操作时，您放在源文件夹中的所有内容都由 Eclipse“编译”：

*   .java 文件被编译成进入 bin 目录的 .class 文件（默认情况下）
*   其他文件被复制到 bin 目录（尊重包/文件夹hirearchy）

当使用 Eclipse 启动程序时，bin 目录因此位于类路径中，并且由于它包含 Test.properties 文件，因此该文件可以由类加载器加载，使用`getResource()`或`getResourceAsStream()`。

如果它不能从命令行运行，那是因为该文件不在类路径中。

请注意，您不应该这样做

```
FileInputStream inputStream = new FileInputStream(new File(getClass().getResource(url).toURI())); 
```

加载资源。因为只有从文件系统加载文件才能工作。如果你将你的应用打包成一个 jar 文件，或者你通过网络加载类，它就不会工作。要获取 InputStream，只需使用

```
getClass().getResourceAsStream("Test.properties") 
```

最后，正如文档所示，

```
Foo.class.getResourceAsStream("Test.properties") 
```

将加载与 Foo 类位于同一包中的 Test.properties 文件。

```
Foo.class.getResourceAsStream("/com/foo/bar/Test.properties") 
```

将加载位于包中的 Test.properties 文件`com.foo.bar`。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-02-17T19:32:24.140

从 jar 中的资源文件夹访问文件的最佳方法是通过`getResourceAsStream`. 如果您仍然需要将资源作为文件实例，您可以将资源作为流复制到临时文件中（JVM 退出时临时文件将被删除）：

```
public static File getResourceAsFile(String resourcePath) {
    try {
        InputStream in = ClassLoader.getSystemClassLoader().getResourceAsStream(resourcePath);
        if (in == null) {
            return null;
        }

        File tempFile = File.createTempFile(String.valueOf(in.hashCode()), ".tmp");
        tempFile.deleteOnExit();

        try (FileOutputStream out = new FileOutputStream(tempFile)) {
            //copy stream
            byte[] buffer = new byte[1024];
            int bytesRead;
            while ((bytesRead = in.read(buffer)) != -1) {
                out.write(buffer, 0, bytesRead);
            }
        }
        return tempFile;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
} 
```

# c++ - 一个翻译单元如何访问另一个翻译单元的全局范围？

> ID：14089147
> 
> 赞同：3
> 
> 时间：2012-12-30T07:49:28.653
> 
> 标签：c++, header, linker, declaration, extern

我一直在阅读有关链接器如何工作以及围绕此过程的所有内容，以便在[此（链接）](https://stackoverflow.com/questions/14087807/c-linking-files-with-gcc-compiler/14087840#comment19483399_14087840)问题中解释我的问题（很短，对参考感到抱歉，但它是相关的）。

**问题：** 如果在标题中我有一个变量声明（使用 extern），并且我想在多个源文件中使用这个变量（#包括每个课程中的头文件），我必须为此提供一个定义某处变量。问题是，如果我在某些源文件的主函数中提供定义，例如，其他文件仍然没有“看到”这个定义（这会导致链接错误）。如果我在其中一个全局范围内定义这个外部变量，它就可以正常工作，并且每个人都可以看到它。

为什么？其他文件如何访问另一个文件的全局范围？全局范围变量不是危险的吗？将变量定义放在其他什么范围内可以解决这样的链接错误？有人在标题中使用这样的外部变量声明吗？出于什么目的？

**编辑：**确切的示例情况在我一开始发布的链接中

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T08:08:31.827

A few clarifications:

What you're calling a "file" is more properly called a *translation unit*. It doesn't matter how many files are involved. Indeed, the same file could be re-compiled (say with different #defines, etc.)

Armed with that term, we can now rephrase your question: "How can a translation unit access the global scope of another translation unit"?

Quoting from the wikipedia article on [Linkage](http://en.wikipedia.org/wiki/Linkage_%28software%29):

> If the name has external linkage, the entity that name denotes may be referred to from another translation unit using a distinct declaration for that same name, and from other scopes within the same translation unit using distinct declarations.

In other words: by making sure that name as external linkage, it's in the global scope, and that's global for the program, not the translation unit.

Your remaining questions:

1.  Aren't global scope variables dangerous?

    I would never use the word "dangerous" to describe them, as I would certain standard library functions that have security flaws, etc. But I would say that can very often lead to very poorly designed code, and in the case of global variables specifically, a lot of headaches in multithreaded code. A good rule: avoid them unless you have a good reason not to.

2.  How to avoid the linkage error (in some other scope)

    No other magic declaration here: it's either visible outside the translation unit (external) or not (static). What you're probably asking for is : "What's the right way to let other modules access the variable?" And the answer is: write an accessor function (or even better, a class that manages that data with methods).

3.  Who uses this stuff and for what purpose?

    Always a hotly debated topic. Many people advise avoiding completely, but you'd be hard pressed not to find an extern in a project of sufficient size. The best reasons usually come down to the kind of things purists ignore: compatibility with legacy systems, performance, easy access for debuggers and other introspecting tools… or, of course, just cause it was easy, it was understood, and it just worked.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T08:04:02.523

当您放置一个变量时`in the main function`，您定义了一个在该函数中可见的局部变量。

您必须在一个源文件的文件范围内定义变量。

# adk - 如何通过单击android中另一个活动中的按钮来显示活动？

> ID：14089148
> 
> 赞同：0
> 
> 时间：2012-12-30T07:49:35.923
> 
> 标签：adk

我是 android 应用程序开发的初学者。

我试图`MainPage1Activity`通过`activity_main`在`MainActivity`. 我曾经`intent`将两者联系起来，但是当我在模拟器中运行应用程序并单击按钮时，什么也没有显示。我必须使用一个函数来使用另一个函数来显示另一个活动吗？？？？我在主要活动中使用的代码是：

```
public void viewalarm(View view){
    Intent intent = new Intent(this, MainPage1Activity.class);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T07:56:36.613

```
Intent intent = new Intent(this, NewActivity.class);
startActivity(intent); 
```

添加您的 Android 清单配置文件

```
<activity android:name="NewActivity"></activity> 
```

# iphone - FBUserSettingsViewController 在 ios 6 上关闭时崩溃

> ID：14089150
> 
> 赞同：1
> 
> 时间：2012-12-30T07:49:58.577
> 
> 标签：iphone, objective-c, facebook, ios6

我正在尝试使用`FBUserSettingsViewController`，但每次我尝试关闭它时它都会崩溃。我使用以下代码来显示它：

**PS：**它只在 ios 6 上崩溃并出现此错误：

```
// [FBUserSettingsViewController dealloc];

FBUserSettingsViewController *a =[[FBUserSettingsViewController alloc] init];
[a setDefaultAudience:FBSessionDefaultAudienceEveryone];
[a setDelegate:self];
[a setPublishPermissions:     [NSArray arrayWithObject:@"publish_actions"]];
[nav presentViewController:a animated:NO completion:nil]; 
```

这将其解雇：

```
- (void)facebookViewControllerDoneWasPressed:(id)sender{

    _facebook = [[Facebook alloc]
                 initWithAppId:@"176237615850674"
                 andDelegate:self];

    // Store the Facebook session information
    _facebook.accessToken = FBSession.activeSession.accessToken;
    _facebook.expirationDate = FBSession.activeSession.expirationDate;

    if ([nav respondsToSelector:@selector(dismissViewControllerAnimated:completion:)])
        [nav dismissViewControllerAnimated:YES completion:nil];
    else [nav dismissModalViewControllerAnimated:YES];

} 
```

关于这个主题还有另一个问题，但那里没有任何答案

[另一个问题](https://stackoverflow.com/questions/12827261/fbusersettingsviewcontroller-crashes-on-dismiss)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:04:00.777

Facebook iOS SDK 中存在错误。如果您查看 FBUserSettingsViewController 源代码中的 dealloc 方法，您会注意到它们在释放 ivars 之前调用了 [super dealloc]。同样的错误出现在 FBViewController 的 dealloc 中。

我已经修复了这两个错误并将我的更改推送到 GitHub 上的 facebook-ios-sdk 的一个分支。看看：[https ://github.com/Tafkadasoh/facebook-ios-sdk](https://github.com/Tafkadasoh/facebook-ios-sdk)

要解决您的问题，只需克隆此分支并从命令行调用“scripts/build_framework.sh”。之后，您将在“build/FacebookSDK.framework”文件夹中找到框架的固定版本。为我修复了崩溃。

# iphone - 我收到运行时错误：class is not key value coding-compliant for the key image

> ID：14089154
> 
> 赞同：0
> 
> 时间：2012-12-30T07:50:55.367
> 
> 标签：iphone, xcode

让我简要介绍一下我的项目，我正在显示照片库中的图像，我的视图控制器中有 Imageview 和按钮，当我按下按钮时，当我从库中选择照片时，它将导航到照片库图像将在图像视图中显示。

但是当我运行这个项目时，我遇到了运行时错误，请查看代码并建议我解决方案，如果缺少任何文件，请通知我，以便我可以上传您的需要。

我没有得到错误的确切位置，我用谷歌搜索，甚至看到堆栈溢出我仍然找不到任何解决方案

以下是 Viewcontroller.m 文件和控制台查看错误，请告诉我

```
view controller.m 

//
//  ViewController.m
//  ImagePicker
//
//  Created by Vaibhav on 12/30/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//

#import "ViewController.h"

@implementation ViewController

@synthesize imagepic;

-(IBAction)ButtonClicked{

    ipc=  [UIImagePickerController alloc];
    ipc.delegate=self;

    ipc.sourceType=UIImagePickerControllerSourceTypePhotoLibrary;

    [self presentModalViewController:ipc animated:YES ];

}

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    imagepic.image= [info objectForKey:UIImagePickerControllerOriginalImage ];
    [ [picker parentViewController] dismissModalViewControllerAnimated:YES ];

    [picker release];

}
- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker{
    [ [picker parentViewController]dismissModalViewControllerAnimated:YES ];
    [picker release];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

控制台上的错误消息：

```
2012-12-30 13:03:05.758 ImagePicker[1409:f803] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<ViewController 0x687b2e0> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key image.'
*** First throw call stack:
(0x13b9052 0x154ad0a 0x13b8f11 0x9b0032 0x921f7b 0x921eeb 0x93cd60 0x22f91a 0x13bae1a 0x1324821 0x22e46e 0xd5e2c 0xd63a9 0xd65cb 0x36a73 0x36ce2 0x36ea8 0x3dd9a 0xebe6 0xf8a6 0x1e743 0x1f1f8 0x12aa9 0x12a3fa9 0x138d1c5 0x12f2022 0x12f090a 0x12efdb4 0x12efccb 0xf2a7 0x10a9b 0x1d02 0x1c75)
terminate called throwing an exceptionCurrent language:  auto; currently objective-c
(gdb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T08:00:16.787

在您的`ViewController.xib`中，选择您的图像视图并检查`IBOutlet Connections`. 如果它连接到`IBOutlet`命名的`image`，请将其删除。您的图像视图应连接到`IBOutlet`相应`.h`文件中的图像视图。您可能已重命名`UIImageView`为`imagePic`以前`image`的 .

# .net - 使用 MSBuild 构建多个 .csproj 文件时创建“内存中 .sln”

> ID：14089155
> 
> 赞同：3
> 
> 时间：2012-12-30T07:51:19.297
> 
> 标签：.net, visual-studio, msbuild, continuous-integration

我们有一个使用多个.sln 文件的代码项目，每个文件都包含项目（一些项目由不同的解决方案共享，即存在于多个解决方案中）。

我们的问题是，当使用项目引用时，实际项目也必须驻留在同一个解决方案中。

所有这些项目都是在构建服务器上使用 MSBuild 构建的。

我想知道是否可以创建一个 MSBuild 脚本，以某种方式将所有项目“导入”到单个 MSBuild 项目中，这样就好像所有项目实际上位于同一个 Visual Studio .sln 文件下一样？

例如，我想要类似于以下脚本的内容：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <!-- Builds all *.sln files under this repository. -->
    <ItemGroup>
        <SolutionFiles Include="**/*.sln" />
    </ItemGroup>

    <Target Name="Build">
        <MSBuild Projects="@(SolutionFiles)" Targets="Rebuild" />
    </Target>

</Project> 
```

这是否意味着 MSBuild 将构建所有项目的内存中“主项目”，从而克服项目引用问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:30:56.553

为什么不直接使用上面的语法来构建 csprojs？

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

<!-- Builds all *.*proj files under this repository. -->
<ItemGroup>
    <!--SolutionFiles Include="**/*.sln" /-->
    <ProjectFiles Include="**/*.*proj"/>

</ItemGroup>

<Target Name="Build">
    <MSBuild Projects="@(ProjectFiles)" Targets="Rebuild" />
</Target>

</Project> 
```

默认情况下，即使您在命令行模式下没有 sln 文件，MSBuild 也会构建项目引用。如果您想省略项目引用（即您正在按顺序连续构建事物），您可以使用 /p:BuildProjectReferences=false...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T08:20:19.050

我做了类似的事情，只是在同一个文件夹中有多个 .sln 文件，所有这些文件都引用了部分或全部项目。就我而言，我为每种构建风格（CI、nightly、release 等）都有 .sln 文件。

因此，例如，您可能*总共*有以下项目：

*   网站
*   网站单元测试
*   公共图书馆
*   公共库单元测试
*   数据访问库
*   数据访问库单元测试
*   网站验收测试（例如 Selenium webdriver 测试）
*   压力测试

您可以有以下解决方案：

1.  **CI 解决方案**（在提交时运行）。这将引用单元测试项目及其目标

2.  **每晚解决方案**（每晚运行）。这将参考压力和验收测试项目

3.  **发布解决方案**（按需发布）。这将引用网站、通用和数据访问项目（即没有测试项目）

这只是一个简单的例子，但希望有所帮助。一旦设置了这个解决方案/项目结构，我不会看到太多要求它改变的呼声，但是如果添加了一个新项目，那么只需添加到相关的解决方案中就可以快速完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T17:55:07.297

您可以编写小型控制台应用程序，该应用程序将找到所有解决方案文件并构建它们。它甚至会选择正确的 MSBuild 版本：

创建 c# 控制台应用程序

添加对 Microsoft.Build 的引用并使用以下代码

```
 static void Main(string[] args)
  {
     string[] files = Directory.GetFiles(args[0], "*.sln", SearchOption.AllDirectories);

     foreach (string path in files)
     {
        RunMsBuild(path);
     }
  }

  public static void RunMsBuild(string SrcDir)
  {
     ProjectCollection pc = new ProjectCollection();
     Dictionary<string, string> GlobalProperty = new Dictionary<string, string>();

     //GlobalProperty.Add("Configuration", "Debug");
     //GlobalProperty.Add("Platform", "x86");
     //GlobalProperty.Add("OutputPath", "c:\\src");

     BuildRequestData buidlRequest = new BuildRequestData(SrcDir, GlobalProperty, null, new string[] { "Build" }, null);
     BuildResult buildResult = BuildManager.DefaultBuildManager.Build(new BuildParameters(pc), buidlRequest);
     if (buildResult["Build"].ResultCode == TargetResultCode.Success)
     {
        Console.WriteLine("Build Success");
     }
     else
     {
        Console.WriteLine("Build Fail");
     }
  } 
```

之后，您可以从控制台或脚本运行它，并将搜索解决方案文件的路径作为参数传递

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T21:05:01.927

**没关系，我错过了下面的答案，项目包括命令行模式**

这将是不容易或漂亮。但是，如果您真的想像您所要求的那样采用更“全面”的构建自动化和管理路线，那么下面的#4 是如何开始变得更好的。

1）**在 OP 示例中，使用 MSBuild 作为脚本**：在您的示例中，这更像是一种自动化，就像使用 shell 或批处理文件一样，而不是真正让您获得任何 MSBuild 项目技巧。请参阅关于 .sln 规则的#2，以及关于我认为您希望这样做更多的事情的#3，但这会起到其他作用。

2）**关于“仅记忆” .sln 问题**：从根本上说，我相信如果您希望 MSBuild 使用 .sln 来解决基于 .sln 的项目引用，那么它不能处于“零影响”或“仅内存”状态，并且必须被刷新或保存到磁盘。即使您拥有项目系统本身也是如此，因为 MSBuild 将查看文件本身以获取解析引用，并期望它在文件系统中，因为它在单独的进程中运行，并且有自己的想法。因此，如果您想使用 .sln 文件，则必须有实际的 .sln 文件。因此，对没有 .sln 文件的 .sln 方法的希望是正确的。如果您运行 VS 来运行 msbuild，它将生成这些，并且需要在 MSBuild 启动之前将它们刷新到磁盘，在那里它们将保持“零影响”状态直到构建......只是为了完全详细和清晰。

3）**关于“import .proj”问题**：我知道的一个类似的选项，`<Import Project="my/proj/path/mine.csproj"/>`就像是文件的批量包含，它将这些文件视为外部项目的一部分并编译为那个大会。经常被 microsft 内部使用。以这种方式使用的导入忽略了导入的 .proj 文件中的大部分内容，并且基本上是在寻找要包含的文件，就像外部项目中包含的任何其他文件一样。所以我认为这不会让你走得更远，除非你打算在同一个程序集中构建所有这些。如果你这样做，你将不得不以这种意图来构建包含的 .proj 文件，并滥用/构建外部以包含一切所需的引用等等。

4）**它的参考定义。**关于引用有很多选项，它们是否被复制，将被假定放置在 GAC 中，或者“只是不做任何事情，相信我他们会在运行时出现在应用程序域搜索路径中”。您可以关闭大部分 cr*p，然后您唯一的依赖是构建和语言编译器能够解析其类型和 whatnbot 的引用程序集，以便编译您当时尝试编译的依赖程序集. 如果您考虑一下，您会发现很多其他参考资料不是您自己构建的，而是构建时会拾取并用于编译的。所以真正的问题可能是，“我如何让我的自动化构建处于我编译依赖项的状态，并且看起来像任何其他参考？”

由于您控制构建，因此您可以控制 dll 的放置，并且可以负责构建顺序。而且...您可以控制引用。

这是剩下的经典问题：在设计时，如果引用指向 .sln 项目，那么您**无需构建即可**从外部程序集中获得类型的设计时查找，如果您将项目更改为不可知论，那么您将拥有编译。您可以在许多方面做一些棘手的事情，包括条件性 .proj 文件，这会给开发人员带来负担，并且可能需要手动编辑以保持同步，或者通过脚本预先构建 .proj 文件过滤器以修复引用，或制作它们是非 sln 引用并强制开发人员构建依赖项以解析类型，他们必须确保他们使用的环境与构建保持一致。

* * *

**所以问题归结为引用是如何定义的，是的，MSBuild 所需的任何内容都需要写入磁盘以供 MSBuild 运行，而与 VS 本身无关。**你必须选择你的毒药，因为问题是你不能同时定义两种方式的引用。这是一个经典的构建管理问题，你并不孤单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-23T15:17:35.123

我们需要在 TFS (Azure DevOps) 中组合几个 .csproj 文件，但在我们的标准构建/部署中排除其他文件。我最终得到了以下 .proj 文件。重要的是

*   在 Microsoft 的示例中，目标使用`<MSBuild ...`而不是like`<CSC`
*   我需要包含`Targets="..."`每个构建操作（构建、重建、清理、恢复）

我最终得到了一个看起来像的文件

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ItemGroup>
    <ProjectReference Include="one.csproj" />
    <ProjectReference Include="two.csproj" />
    <ProjectReference Include="three.csproj" />
  </ItemGroup>
  <Target Name="Build">
    <MSBuild Projects="@(ProjectReference)" Targets="Build" />
  </Target>
  <Target Name="Clean">
    <MSBuild Projects="@(ProjectReference)" Targets="Clean" />
  </Target>
  <Target Name="Rebuild">
    <MSBuild Projects="@(ProjectReference)" Targets="Rebuild" />
  </Target>
  <Target Name="Restore">
    <MSBuild Projects="@(ProjectReference)" Targets="Restore" />
  </Target>
</Project> 
```

# hash - 如果有纯文本，如何找到哈希算法？

> ID：14089156
> 
> 赞同：0
> 
> 时间：2012-12-30T07:51:23.897
> 
> 标签：hash, hashcode

如果将纯文本和相关哈希码放在一起，有什么方法可以找到算法？这个哈希似乎有点不寻常。

$Dpt=HIaHS-mpx#VkK

纯文本是：

A 20010517 0001-9999-0003 20010720.162031 00019 001 + PC BN * 0 BN + 0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:00:12.573

蛮力。哈希的意义在于它是单向的。当您使用相同的算法并获得相同的结果时，您只会发现使用了哪种算法。

# php - 声明调用插入到表中的确切值的变量

> ID：14089157
> 
> 赞同：0
> 
> 时间：2012-12-30T07:51:24.373
> 
> 标签：php, variables

谁能告诉我如何创建一个变量来调用插入表中的确切值？因为我只知道从文本框调用，像这样：

```
$fname = $_POST['txtfirstname'];
$lname = $_POST['txtlastname']; 
```

但是如果我从表中调用确切的插入值会怎么样？

```
$fname = ?;
$lname = ?; 
```

这将是代码：

```
for ($i=0; $i<sizeof($checkbox);$i++){
$sql2="INSERT INTO tblItems SELECT NULL , '".$checkbox[$i]."' , id FROM tblNames WHERE fname = '".$fname."' AND lname = '".$lname."'";
$result2=mysql_query($sql2);
 }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:26:20.900

首先，尝试使用新的方法连接到称为 PDO 的数据库

这是手册[PDO 手册。](http://php.net/manual/en/book.pdo.php)

要启动新连接，您需要使用此代码。

```
$dbh = new PDO('mysql:dbname=test;host=localhost', $username, $password); 
```

添加动态字段

```
$stmt = $dbh->prepare('select name, value from test');
$stmt->execute();
$stmt->bindColumn('name', $name);
$stmt->bindColumn('value', $value) 
```

# c# - asp.net中的ajax请求

> ID：14089161
> 
> 赞同：0
> 
> 时间：2012-12-30T07:51:54.893
> 
> 标签：c#, ajax, web-services

我有一个 asp.net 项目，它使用 JQuery 与服务器发送和接收数据。
在服务器端，我有一个响应请求的 Web 服务。问题在于响应不完整的 JSON。
例如，当我向方法结果发送请求时：

```
{"param1":"salam","p2":"alike" 
```

结果必须是：

```
{"param1":"salam","p2":"alike"} 
```

我还提到当我在 Windows Server 2008 中将我的网站发布到 IIS 7.0 时会出现问题。

# c++ - 获取适当的存储值类型？

> ID：14089166
> 
> 赞同：5
> 
> 时间：2012-12-30T07:53:06.910
> 
> 标签：c++, c++11

假设我们有一个 Box 类，如下所示：

```
struct Base {}

template<typename T>
struct Box : Base
{
    template<typename... Args>
    Box(Args&&... args)
        : t(forward<Args>(args)...)
    {}

    T t;
} 
```

然后我们有一个函数 MakeBox：

```
template<typename X>
Base* MakeBox(X&& x)
{
    return new Box<???>(forward<X>(x));
} 
```

类型`X`是从调用 MakeBox 时使用的参数推导出来的。

然后我们需要以某种方式从 X 计算出适当的“存储类型”参数 T。

我想如果我们只是天真地使用：

```
 return new Box<X>(forward<X>(x)); 
```

那么这将导致问题。

明明`std::bind`又`std::function`需要处理这些问题，他们是怎么做的呢？

无论如何在这里有`std::decay`帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T22:18:52.870

如果我正确理解您想要实现的目标，那么您需要使用`std::decay`. 假设您提供 to 类型的对象`S`，`MakeBox()`通用引用`X&&`将以这样的方式解析，以使函数参数成为类型`S&`或`S&&`取决于您的参数是（分别）是左值还是右值。

为了实现这一点并且由于通用引用的 C++11 规则，在第一种情况下，模板参数将被推断为`X=S&`（这里`X`不能作为 的参数`Box<>`，因为您的成员变量必须是对象而不是对象参考），而在第二种情况下，它将被推断为`X=S`（这里`X`可以作为 的参数`Box<>`）。通过应用`std::decay`，您还将在将推导类型作为模板参数提供给 之前隐式应用于`std::remove_reference`推导类型，您将确保它始终相等且永远不会（请记住，这永远*不会*像这里那样推导，它将是或`X``Box<>``X``S``S&``X`*`S&&``S``S&`）。*

 *```
#include <utility>
#include <type_traits>
#include <iostream>

using namespace std;

struct Base {};

template<typename T>
struct Box : Base
{
    template<typename... Args>
    Box(Args&&... args)
        : t(forward<Args>(args)...)
    {
    }

    T t;
};

template<typename X>
Base* MakeBox(X&& x)
{
    return new Box<typename decay<X>::type>(forward<X>(x));
}

struct S
{
    S() { cout << "Default constructor" << endl; }
    S(S const& s) { cout << "Copy constructor" << endl; }
    S(S&& s) { cout << "Move constructor" << endl; }
    ~S() { cout << "Destructor" << endl; }
};

S foo()
{
    S s;
    return s;
}

int main()
{
    S s;

    // Invoking with lvalue, will deduce X=S&, argument will be of type S&
    MakeBox(s);

    // Invoking with rvalue, will deduce X=S, argument will be of type S&&
    MakeBox(foo());

    return 0;
} 
```

如果你有兴趣，这里是 Scott Meyers 的一个很好的课程，他解释了通用引用的行为：

[Scott Meyers 谈通用参考](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11 "通用参考")

PS：**这个答案已被编辑**：我原来的答案建议使用`std::remove_reference<>`，但`std::decay`结果证明是一个更好的选择。感谢问题海报@Andrew Tomazos FathomlingCorps，他指出了这一点，以及@Mankarse，他首先在对原始问题的评论中提出了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T08:02:02.033

对于提供的示例`(1)`，您可以执行您想要的操作并存储该值。对于其他情况（例如何时`x`是数组），您可以使用`std::decay`将其衰减为指针并将其存储。*

# asp.net - 设置 IQueryable 属性以返回测试数据

> ID：14089171
> 
> 赞同：2
> 
> 时间：2012-12-30T07:53:32.277
> 
> 标签：asp.net, .net, entity-framework, rhino-mocks

我正在为我的 DAL 使用实体框架。我正在尝试使用 rhino mock 创建单元测试来测试我的存储库。我一直试图为类型为的属性设置返回值`IQueryable<Restaurant>`。

当我运行单元测试时，我不断得到

> *Unit.Tests.Infrastructure.Repository.WhenInvoked.ShouldReturnAllRestaurants：System.InvalidOperationException：上一个方法'IEnumerator.MoveNext();' 需要返回值或抛出异常。*

我的代码：

```
public interface IDbContext
{
    IQueryable<Restaurant> Restaurants { get; }
    IQueryable<Review> Reviews { get; }
    int SaveChanges();
    T Attach<T>(T entity) where T : class;
    T Add<T>(T entity) where T : class;
    T Delete<T>(T entity) where T : class; 
}

public class OdeToFoodDB : DbContext, IDbContext
{
    public DbSet<Restaurant> Restaurants { get; set; }
    public DbSet<Review> Reviews { get; set; }

    IQueryable<Restaurant> IDbContext.Restaurants
    {
        get { return Restaurants; }
    }

    IQueryable<Review> IDbContext.Reviews
    {
        get { return Reviews; }
    }

    int IDbContext.SaveChanges()
    {
        return SaveChanges(); 
    }

    T IDbContext.Add<T>(T entity)
    {
        return Set<T>().Add(entity); 
    }

    T IDbContext.Delete<T>(T entity)
    {
        return Set<T>().Remove(entity);
    }

    T IDbContext.Attach<T>(T entity)
    {
        var entry = Entry(entity);
        entry.State = System.Data.EntityState.Modified;
        return entity;
    }
}

public class RestaurantRepository : IRestaurantRepository
{
    private IDbContext _db;

    public RestaurantRepository()
    {
        _db = ObjectFactory.GetInstance<IDbContext>();
    }

    public RestaurantRepository(IDbContext db)
    {
        _db = db;
    }

    public List<Restaurant> GetAllRestaurants()
    {
        return _db.Restaurants.ToList(); 
    }
}

    [Test]
    public void ShouldReturnAllRestaurants()
    {
        _db.Stub(m => m.Restaurants.AsQueryable()).Return(_restaurant.AsQueryable());

        var sut = _restaurantRepository.GetAllRestaurants();
        //Some assert statement later. 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:17:31.890

您可以只创建一个数组/集合等并使用 .AsQueryable()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T18:32:07.197

我想出答案。在 Rhino 中，当您尝试在 Stub() 方法中指定属性时，属性 Restaurants 不必是 .AsQuerable()。

```
 [Test]
    public void ShouldReturnAllRestaurants()
    {
        _db.Stub(m => m.Restaurants).Return(_restaurant.AsQueryable());

        var sut = _restaurantRepository.GetAllRestaurants();
        //Some assert statement later. 
    } 
```

# c# - 是否可以将方法插入到 List<> 中？

> ID：14089172
> 
> 赞同：0
> 
> 时间：2012-12-30T07:53:49.707
> 
> 标签：c#, delegates

我有拖车清单。一个具有用户选择的对象。第二个将包含将在第一个列表中的对象上使用的方法。

`List 1` `List2`

`Paul` `Method ShakeHand`

`Mark` `Method HighFive`

`Annie` `Method Hug`

我将使用索引使列表 2 中的方法 0 使用列表 1 中的对象 0。他们将继续沿列表向下移动，直到采取每个操作。

我试过使用`Add()`里面的方法，但没有运气。我也没有运气使用谷歌，因为我不确定我应该使用什么术语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T07:57:05.323

您可以通过插入一个对象来做到这一点——即一个类的实例。

`Greet`使用命名或类似方法创建基类。创建实现该`Greet`方法并执行`ShakeHand`、`HighFive`或的子类`Hug`。插入适当子类的实例，然后`Greet`在需要时调用该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T07:58:23.410

使用`Func<T1, T2, .., TReturn>`或`Action<T1, ... Tn>`代表。唯一的问题是方法需要具有相同的签名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T10:09:52.873

这对我来说听起来有点动态。我会使用反射，既用于使用可用方法填充选择列表，也用于调用——这将我们引向参数问题。所有提议的解决方案都假定所有要调用的方法都具有相同的签名。如果这是真的，那么这些建议中的任何一个都将起作用，我和 Dmitry 需要最少的维护才能添加方法。如果您有合适的框架版本，Dmitry 的版本会更好（但您仍然需要反思来填充您的选择列表）。

# map - 图钉隐藏在重叠的必应地图中

> ID：14089174
> 
> 赞同：0
> 
> 时间：2012-12-30T07:54:43.870
> 
> 标签：map, bing, pushpin

我创建了一个 bing 地图应用程序，并且在浏览器中出现了两个重叠的 Bing 地图。一张地图隐藏另一张地图。图钉显示在隐藏的地图上。如何克服，请尽快告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T13:23:26.980

我建议查看您的代码，看看您是否将 Bing 地图两次加载到不同的 div 或有两个具有相同 ID 的 div。如果是这样，请检查是否需要它。你的意思是有两张地图？我以前没有遇到过这个问题，我怀疑您遇到的问题可能是您发现两个图钉重叠并且您想知道如何显示隐藏的图钉。在这种情况下，您需要实现集群。看看这个 Bing 地图模块：[http ://bingmapsv7modules.codeplex.com/wikipage?title=Client%20Side%20Clustering](http://bingmapsv7modules.codeplex.com/wikipage?title=Client%20Side%20Clustering)

# java - 在 GUI 中显示一些可选字符串

> ID：14089177
> 
> 赞同：1
> 
> 时间：2012-12-30T07:55:26.647
> 
> 标签：java, swing, user-interface, text

我的问题是我想实现一个显示一些字符串的 GUI 屏幕。可以选择显示的字符串。就像 Windows 中的任务管理器。但是我找不到那是什么。这是我想要的图片：

![](../Images/3d7d0d7fbbf7a87d86d69d3ec97c4438.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T08:01:16.080

如果您使用 swing，JList 可能会有所帮助。请检查[JList 示例](http://www.javabeginner.com/java-swing/java-jlist-class-example)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T08:04:16.883

你可以使用[`JTabbedPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTabbedPane.html)and[`JTable`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html)为此。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-30T08:09:33.327

如果您使用 Swing，您可以使用用户可选择的[JTable](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html)来实现相同的目的。

您应该在[此处参考用户选择示例](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#selection)

# android - 在活动之间播放 MediaPlayer 音频，但是当背景失去焦点并被带回来时暂停/恢复？

> ID：14089178
> 
> 赞同：4
> 
> 时间：2012-12-30T07:55:34.650
> 
> 标签：android, android-mediaplayer

我花了几乎一整天的时间来寻找特定 MediaPlayer 问题的解决方案。我希望我的 MediaPlayer 的音频在用户在我的应用程序中切换活动时继续播放，但在切换到另一个应用程序（主页按钮、最近的应用程序按钮等）时停止播放，并在应用程序再次成为焦点时恢复。不过，我似乎无法获得以这种方式工作的解决方案。并不是我不知道从哪里开始，而是我尝试过的每一个解决方案都很复杂，最后只是没有奏效。似乎我只需要应用程序能够判断活动何时停止切换活动，以及应用程序失去焦点。

我无法想象这样的情况是如此罕见，以至于没有一个简洁、优雅的解决方案来解决它。有人可以帮我弄清楚吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T08:16:24.963

我认为在活动之间共享 MediaPleer 的最佳方式是 android Service。创建一个服务来保存 MediaPlayer。您的活动在 onResume 中绑定到服务并在 onPause 中取消绑定。服务总是知道是否有人绑定到它。因此，如果没有人绑定（没有您正在运行的活动），它将停止播放。谷歌“来自服务的android MediaPlayer”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T09:36:06.840

您将需要使用意图过滤器实现一个[服务](http://developer.android.com/reference/android/app/Service.html)和一个 [广播](http://developer.android.com/reference/android/content/BroadcastReceiver.html)接收器，以侦听所需的操作和/或按键（主页按钮等）。Android 媒体播放器源可以从[这里](https://github.com/android/platform_packages_apps_music)下载。您要查看的两个类是[MediaButtonIntentReceiver](https://github.com/android/platform_packages_apps_music/blob/master/src/com/android/music/MediaButtonIntentReceiver.java)和[MediaPlaybackService](https://github.com/android/platform_packages_apps_music/blob/master/src/com/android/music/MediaPlaybackService.java)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T23:52:51.620

服务可能是要走的路。是否有服务，尽管这通常表明您设计的程序没有应有的强大。即使您确实创建了服务，您仍然需要知道何时暂停和何时恢复。

我实现了一个似乎对我有用的简单解决方案，而无需正确重构整个应用程序以获得更好的应用程序引擎：

在您希望音乐开始的初始活动中启动 mediaPlayer 后：

在初始和每个后续活动中，创建一个成员变量：private boolean mStopTheMusic = true;

然后在您希望音乐继续播放和/或适当停止的每个活动中覆盖以下内容：（注意：正确停止将是当任何其他应用程序而不是您的应用程序进入前台时。这些是停止音乐的适当时间）并且随时您以编程方式在当前活动之上启动一个新活动，设置 mStopTheMusic = false，因此您的背景音乐不会停止。

```
 @Override 
    public void onResume()
    {
        super.onResume();

        mStopTheMusic  = true;
        if (!MusicPlayer.IsMusicPlaying())
            MusicPlayer.StartMusic();  
    }

    @Override
    public void onPause() 
    {      
        super.onPause();
        if (mStopTheMusic)
          MusicPlayer.PauseMusic(); 
    }

   @Override 
   public void onBackPressed()
   {        
       mStopTheMusic = false;
       super.onBackPressed();   
   } 
```

# php - 如何让代码只运行一次

> ID：14089186
> 
> 赞同：0
> 
> 时间：2012-12-30T07:57:45.577
> 
> 标签：php, session, cookies

如何让代码只运行一次。
我正在开发一个 zencart 网站，我想让 php 在用户第一次打开我的网站时更新网站设置信息，但之后不再运行这些代码。怎么做？

```
<?php 

    //how to let codes runs only one time.
    //cookie and session? 
    function first_time_run(){
        //lot of code runs when user  open my site at first time in browser (such  as ie ,firefox)
        //but when it go to other page of my site or reenter my same page ,these codes will not run any more;
        //but if user reopen the browser , then enter my site ,thes codes will runs again
    }

    if($what){
        first_time_run();
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T08:02:26.357

使用会话变量。

```
if(isset($_SESSION['NEEDRUN'])){
 // run it
 // remove the session variable.
 unset($_SESSION['NEEDRUN']);
} 
```

现在这将仅在设置会话变量时运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T08:08:38.700

根据您的要求，shiplu 的解决方案可能会奏效。但是，如果您只希望代码运行一次（即客户第一次访问该站点时，做某事，然后再也不做），您需要在数据库中存储某种用户标识符。如果您只使用会话，一旦用户的会话结束（他或她离开站点、关闭浏览器等），则该会话变量不再存在。该客户下次访问该站点时，该脚本将再次运行。

You can also use a cookie that would persist after the user leaves the site, but still has limitations. Cookies have to have expirations (even if they are a year from now). When that cookie expires, that script will run again for the same customer. Additionally, a user can clear their cookies, use a different computer, etc and defeat your first_time_run check.

To conclude, the only lasting solution is to save some kind of customer identifier in a database and check that field whenever a user comes to your site.

# java - 如何通过命令提示符访问 Java API 方法？

> ID：14089196
> 
> 赞同：1
> 
> 时间：2012-12-30T08:00:10.487
> 
> 标签：java, command-prompt

有没有办法通过命令提示符访问 Java API 方法？

比如访问String类的方法，访问Integer类的方法。等等等等

这将作为我的参考，这样每当我在命令提示符下编写程序时，就可以轻松地搜索 API。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:24:57.733

如果您只是在寻找记住可用函数的简单方法，像[Eclipse](http://www.eclipse.org/)这样的 IDE会在您键入时自动完成可用函数，因此如果您想要的话，应该很容易找到它们。

但是，对“命令提示符”的引用令人困惑……如果您需要可以从命令提示符实际执行的语言，则需要一种具有解释器并且可以导入 Java API 的语言。 [Jython](http://www.jython.org)、[Groovy](http://groovy.codehaus.org/)或[Scala](http://www.scala-lang.org)都可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T08:29:29.390

简短的回答是**否定**的！没有办法。如上所述，您可以使用 eclipse 或 Netbeans IDE，您必须按**Ctrl+空格**才能获得智能感知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T08:35:52.573

您似乎正在寻找一种更简单的编程方式。IDE，例如[IntelliJ IDEA](http://jetbrains.com/idea)、[NetBeans](http://netbeans.org)或[Eclipse](http://eclipse.org)将是拥有和掌握的宝贵工具。

此外，这只是编程的一个事实，时不时地，我们必须回到 API 做一两件事。这真的没有什么问题。

# javascript - innerHTML 不评估 javascript 吗？

> ID：14089199
> 
> 赞同：1
> 
> 时间：2012-12-30T08:00:32.370
> 
> 标签：javascript, ajax

我正在尝试一种技术，将我的代码分解成单独的文件（这样一个可能有一堆不同部分的页面现在是多个文件而不是一个巨大的 HTML 页面）并使用 ajax 加载它们，然后设置内容作为一些父 div 的 innerHTML。这使得代码非常干净，并且在看似所有现代浏览器中都能很好地工作，但我只是注意到，当外部页面包含一个`<script>`标签时，该标签中的 javascript 将被忽略（不解析并加载到父页面的 javascript 上下文中）所以这些外部代码片段中存在的方法和变量完全丢失了。

我已经完成了一项工作，我在其中读取了脚本标签的内容，然后读取了`eval()`整个内容，这很有效......但是，我很好奇我是否忽略了一些将脚本包含在这些外部文件中的更原生机制，或者如果这种方法真的是实现我的目标的唯一方法。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T08:09:17.507

这不是一份工作`innerHTML`。您可能应该将外部文件加载为 DOM 对象（这是`XMLHTTPRequest`名称的来源），以便在`script`添加之前将标签转换为正确的对象。

使用 jQuery 对 Firefox 进行的快速实验（在此页面上，呵呵）表明`innerHTML`将添加一个不会执行的脚本元素，而这会执行：

```
$( 'body' ).append( $('<script>console.log( "hello, world!" );</script>' ) ); 
```

# python - 在不使用 subprocess.PIPE 的情况下在 subprocess.check_call 中捕获 stderr

> ID：14089202
> 
> 赞同：1
> 
> 时间：2012-12-30T08:00:59.930
> 
> 标签：python, subprocess, stderr

我想做以下事情：

*   从 Python 中输出到另一个可执行文件，使用`subprocess.check_call`
*   捕获子进程的stderr，如果有的话
*   将 stderr 输出添加到父进程的 CalledProcessError 异常输出中。

理论上这很简单。`check_call`函数签名包含一个kwarg `stderr`：

```
subprocess.check_call(args, *, stdin=None, stdout=None, stderr=None, shell=False) 
```

但是，紧随其后的[文档](http://docs.python.org/2/library/subprocess.html)包含以下警告：

> **注意**：不要使用`stdout=PIPE`或`stderr=PIPE`与此功能。由于当前进程中没有读取管道，因此如果子进程向管道生成足够的输出以填满 OS 管道缓冲区，则子进程可能会阻塞。

问题是，我能找到的几乎每个从子进程中获取 stderr 的示例都提到了使用`subprocess.PIPE`来捕获该输出。

如何在不使用的情况下从子进程中捕获 stderr `subprocess.PIPE`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T08:51:28.923

`stdout`并且`stderr`可以分配给几乎任何可以接收数据的东西，比如文件句柄。你甚至可以提供一个打开的 file_handle 来写入`stdout`和`stderr`：

```
file_handle = open('some_file', 'w')

subprocess.check_call(args, *, stdin=None, stdout=file_handle, stderr=file_handle, shell=False) 
```

现在每一行输出都进入同一个文件，或者你可以为每个文件创建一个不同的文件。

`stdin`也读起来像一个文件句柄，使用`next()`来读取每一行作为输入命令，除了初始的`args`.

它是一个非常强大的功能。

# javascript - 使用 jQuery 仅更改 div 中的文本

> ID：14089206
> 
> 赞同：0
> 
> 时间：2012-12-30T08:01:59.997
> 
> 标签：javascript, jquery

我有这样的结构：

```
<div class="comment">
    Some text goes here.
    <div class="controls">
      Controls go here.
    </div>
</div> 
```

如何在不影响`controls`div 的情况下仅替换“这里有一些文本”？

显然，可以在“这里有一些文本”周围添加另一个 div，然后替换它的内容，但是为了这个问题，假设我不能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T08:12:06.523

这在不修改现有 HTML 的情况下是可能的。只需使用 jQuery 找到文本节点，然后通过直接访问 DOM 来更改其值。

```
$('.comment').contents()[0].nodeValue = 'Some other text goes here.'; 
```

请参阅[.contents()的 jQuery 文档和](http://api.jquery.com/contents/)[.nodeValue](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeValue)的 MDN 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T08:09:08.123

而不是文本周围的“div”，可能是一个跨度，所以它是内联的。或使用：

```
<div class="comment">
    Some text goes here.
    <div class="controls">
      Controls go here.
    </div>
</div>
<script>
    var c = $('.comment').eq(0);
    c.html(c.html().replace('Some text goes here', 'Blah blah blah'));
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T08:09:46.883

我会这样：

```
$(function() {
    var children = $('.comment').children();
    $('.comment').text('har').append(children);
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T08:12:30.370

使用jQuery定位`controls`div，然后将其转换为DOM节点并使用原生JS更改文本

```
var textNode=$('.comment').find('.controls')[0].previousSibling
    textNode.nodeValue='New Text From Script' 
```

演示：http: [//jsfiddle.net/tmGDW/](http://jsfiddle.net/tmGDW/)

# node.js - 使用 Angular.js 和 Node.js 构建实时应用程序的更好方法是什么？

> ID：14089213
> 
> 赞同：10
> 
> 时间：2012-12-30T08:03:14.910
> 
> 标签：node.js, sockets, rest, socket.io, angularjs

我是 Angular.js 和 Node.js 的初学者，但我已经意识到制作实时应用程序有两种可能的方法。第一个是使用 Socket.io，另一个是使用带有 setInterval() 函数的 RESTful 作为客户端解决方案。我使用这两种替代方法构建了我的应用程序，但我不知道为什么使用一种替代另一种更好。

我的控制器使用 Angular.js（Socket.io 替代品）：

```
function MyController($scope, socket) {

  socket.on('test', function(data){
    $scope.data = data;
    console.log($scope.data);
  });

} 
```

我的控制器使用 Angular.js（RESTful 替代方案）：

```
function MyController($scope, $http) {

  setInterval(function() {
    $http.get('/test.json')
         .success(function(data, status, headers, config) {
           $scope.data = data;
           console.log($scope.data);
         });
  }, 1000);

} 
```

这些做事方式之间有什么区别？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T13:25:01.240

如果您想要一个完全实时的 Web 应用程序，那么套接字就是您的最佳选择。Socket.io 或 SockJS 都是非常好的客户端。当不支持 web 套接字时，它们有能力优雅地降级，但是，您可以选择您想要使用的传输方式。

您必须构建数据订阅服务，以便在所有用户之间传播更改。Tower.js 和 Meteor 都使用响应式方法，并且它们在模型更改时使用事件侦听器。根据您想要此功能的复杂程度或功能的强大程度，它们将是不同的可用实现。

当尝试在同时连接的多个用户之间同步客户端和服务器端数据时，它确实变得越来越复杂。我建议你看看这两个框架，看看它们是如何工作的，并可能复制它的一部分，或者它的全部功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-31T17:55:36.070

根据您的用例，我认为 Socket.IO 是要走的路。但是，在 Angular 中使用 WebSockets 有一些注意事项。我建议你看看我不久前写的一篇关于这个主题的博客文章：http: [//briantford.com/blog/angular-socket-io.html](http://briantford.com/blog/angular-socket-io.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-30T09:40:43.357

我们必须在推送器（使用 Websocket）和使用 Ajax 发布/订阅实时事件的 Pubnub 之间进行选择。在尝试跨应用程序的不同用户进行实时通信时，您的 Angular RESTful 替代方案是不够的。例如，您有一个团队使用的项目管理应用程序。一名团队成员可能正在添加/更新一项任务，而另一名成员可能正在同时查看。需要发布更新，并且当前登录的所有其他用户都将订阅更改的事件并可以收到通知。

我们一直在使用 Pubnub，它的运行速度非常快，虽然 Pusher 的技术更好，但目前并非所有浏览器都支持。

我知道问题是针对 AJ 和 NodeJS，但我觉得使用第三方订阅/发布 API 更容易管理，因为您不必管理 nodejs 服务器和更大的负载（当您的应用程序流行时）。Pusher/Pubnub 是可扩展的，您可以根据需要扩展您的应用程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-30T08:14:58.250

在您的情况下最好使用 Socket.io。

因为您似乎与后端进行了很多交互。如果是这样，而不是每隔一段时间查询 api，只需使用 Socket.io。

使用套接字将减少后端和客户端的工作量，并且还可以更轻松地控制基于事件的内容。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-30T13:13:36.077

Socket.io 具有以下优点：

*   减少不必要的流量和渲染
*   低延迟
*   （可以说）更简洁的代码

REST 具有以下优点：

*   支持所有浏览器和客户端
*   较少开放的连接
*   在集群、代理和其他复杂的网络拓扑中工作得更好

这些观点中的每一个都值得单独进行长时间的讨论，其中一些在很大程度上取决于应用程序的特性。但是，如果您按优先级标记它们，您会看到什么可能最适合您。

# javascript - 为什么在浏览器上按“停止”不会暂停 JavaScript 执行？

> ID：14089217
> 
> 赞同：0
> 
> 时间：2012-12-30T08:03:50.947
> 
> 标签：javascript, google-chrome

我正在调试一个非常敏感的树解析核心，有时我不小心写了一个无限循环。问题是，每次发生这种情况时，我只能杀死 Chrome 的进程并重新启动它。我什至无法关闭标签。为什么不点击“停止”按钮简单地停止 JavaScript 执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T08:06:38.920

停止按钮只是没有连接到 javascript 解释器。答案基本上就是这么简单。

它只是通过关闭网络请求并停止进一步解析或页面加载产生的进一步请求来停止网络请求。

如果您想知道为什么它也不会停止 javascript 的执行，那么您必须询问浏览器设计者/实施者（这对我来说似乎是一个合理的想法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T08:06:47.330

The stop button closes the connection between the client and the server, throwing away any more data that may be incoming.

If the java-script execution has already began, the stop button will do nothing to stop it from running.

# android - 关于 JSOUP 工作

> ID：14089231
> 
> 赞同：0
> 
> 时间：2012-12-30T08:05:32.573
> 
> 标签：android, jsoup

每次使用该应用程序时，Jsoup 都会从网站更新数据吗？？即，如果 JSOUP 从网站获取数据，那么当我再次使用该应用程序或仅使用之前提取的数据时，它会再次获取数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:37:03.050

每次使用`parse()`or方法时，Jsoup 都会加载数据`get()`。这些方法将返回`Document`包含您处理的所有代码的 a。

`parse()`因此，在您调用或`get()`再次调用之前，内容不会更新。您可以选择元素或进行更改，但不会有来自源的更新。

# hibernate - Hibernate - IllegalArgumentException 发生调用类的 getter

> ID：14089233
> 
> 赞同：11
> 
> 时间：2012-12-30T08:06:04.107
> 
> 标签：hibernate, illegalargumentexception

我似乎收到了这个错误，不知道为什么会收到这个错误。我什至不明白为什么 Hibernate 需要 User 类的 getter，因为它不应该直接对该类执行任何操作......

> 2012-12-30 09:38:56,713 [main] 错误 org.hibernate.property.BasicPropertyAccessor$BasicGetter - HHH000122：类中的 IllegalArgumentException：com.nortal.pirs.datamodel.User，属性的 getter 方法：idUser 2012-12- 30 09:38:56,714 [main] 错误 com.nortal.pirs.businesslogic.logic.VisitManagerLogic - 调用 com.nortal.pirs.datamodel.User.idUser java.lang.IllegalArgumentException 的 getter 时发生 IllegalArgumentException：对象不是声明类

完整的堆栈跟踪如下所示：

```
 Hibernate: select max(idVisit) from Visit
2012-12-30 09:38:56,713 [main] ERROR org.hibernate.property.BasicPropertyAccessor$BasicGetter - HHH000122: IllegalArgumentException in class: com.nortal.pirs.datamodel.User, getter method of property: idUser
2012-12-30 09:38:56,714 [main] ERROR com.nortal.pirs.businesslogic.logic.VisitManagerLogic - IllegalArgumentException occurred calling getter of com.nortal.pirs.datamodel.User.idUser
java.lang.IllegalArgumentException: object is not an instance of declaring class
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.hibernate.property.BasicPropertyAccessor$BasicGetter.get(BasicPropertyAccessor.java:164)
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.getIdentifier(AbstractEntityTuplizer.java:341)
    at org.hibernate.persister.entity.AbstractEntityPersister.getIdentifier(AbstractEntityPersister.java:4491)
    at org.hibernate.persister.entity.AbstractEntityPersister.isTransient(AbstractEntityPersister.java:4213)
    at org.hibernate.engine.internal.ForeignKeys.isTransient(ForeignKeys.java:209)
    at org.hibernate.engine.internal.ForeignKeys$Nullifier.isNullifiable(ForeignKeys.java:165)
    at org.hibernate.engine.internal.ForeignKeys$Nullifier.nullifyTransientReferences(ForeignKeys.java:94)
    at org.hibernate.engine.internal.ForeignKeys$Nullifier.nullifyTransientReferences(ForeignKeys.java:72)
    at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:128)
    at org.hibernate.action.internal.AbstractEntityInsertAction.makeEntityManaged(AbstractEntityInsertAction.java:139)
    at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:209)
    at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:183)
    at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:136)
    at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:328)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:136)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
    at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:55)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
    at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:49)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:756)
    at org.hibernate.internal.SessionImpl.save(SessionImpl.java:748)
    at org.hibernate.internal.SessionImpl.save(SessionImpl.java:744)
    at com.nortal.pirs.persistence.dbhibernate.visits.VisitDaoHibernate.addVisit(VisitDaoHibernate.java:46)
    at com.nortal.pirs.businesslogic.logic.VisitManagerLogic.addVisit(VisitManagerLogic.java:39)
    at com.nortal.pirs.test.persistence.filldata.FillVisits.fill(FillVisits.java:31)
    at com.nortal.pirs.test.persistence.filldata.FillVisits.main(FillVisits.java:21) 
```

尝试添加访问时发生此错误，该访问具有字段 idPatient，该字段的类型为 long，并且应该是为其注册访问的患者的 id，因此我得到这个的方法看起来像这样（VisitDaoHibernate 类）：

```
@Override
    public void addVisit(Visit visit) {
        session = connection.getSession();
        session.beginTransaction();
        session.save(visit); // here it happens...
        session.getTransaction().commit();
    } 
```

访问类：

```
 /**
 * @(#) Visit.java
 */

package com.nortal.pirs.datamodel;

import java.util.Date;

import com.nortal.pirs.datamodel.enumeration.VisitState;

public class Visit {
    private long idVisit;
    private long idPatient;
    private long idSpiProfessional;
    private long idProfession;
    private Date visitDate = new Date();
    private String reason = "";
    private VisitState visitState = VisitState.REGISTERED;

    /**
     * @param patient
     * @param spiProfessional
     * @param visitDate
     * @param reason
     * @param visitState
     * @param visitProfession
     */
    public Visit() {
    }   

    public Visit(Visit visit) {
        this.idPatient = visit.getIdPatient();
        this.idSpiProfessional = visit.getIdSpiProfessional();
        this.idProfession = visit.getIdProfession();
        this.visitDate = visit.getVisitDate();
        this.reason = visit.getReason();
        this.visitState = visit.getVisitState();
    }

    public long getIdVisit() {
        return idVisit;
    }

    public void setIdVisit(long idVisit) {
        this.idVisit = idVisit;
    }

    public long getIdPatient() {
        return idPatient;
    }

    public void setIdPatient(long idPatient) {
        this.idPatient = idPatient;
    }

    public long getIdSpiProfessional() {
        return idSpiProfessional;
    }

    public void setIdSpiProfessional(long idSpiProfessional) {
        this.idSpiProfessional = idSpiProfessional;
    }

    public long getIdProfession() {
        return idProfession;
    }

    public void setIdProfession(long idProfession) {
        this.idProfession = idProfession;
    }

    public Date getVisitDate() {
        return visitDate;
    }

    public void setVisitDate(Date visitDate) {
        this.visitDate = visitDate;
    }

    public String getReason() {
        return reason;
    }

    public void setReason(String reason) {
        this.reason = reason;
    }

    public VisitState getVisitState() {
        return visitState;
    }

    public void setVisitState(VisitState visitState) {
        this.visitState = visitState;
    }
} 
```

我的用户类：

```
 /**
 * @(#) User.java
 */

package com.nortal.pirs.datamodel;

import java.util.Date;

import com.nortal.pirs.datamodel.enumeration.Gender;
import com.nortal.pirs.datamodel.enumeration.UserState;

public class User {
    private long idUser;
    private String firstName = "";
    private String lastName = "";
    private String personCode = "";
    private Date birthDate = new Date();
    private Gender gender = Gender.MALE;
    private String email = "";
    private String password = "";
    private UserState userState = UserState.UNAPPROVED;

    public User(User user) {
        idUser = user.getIdUser();
        firstName = user.getFirstName();
        lastName = user.getLastName();
        personCode = user.getPersonCode();
        birthDate = user.getBirthDate();
        gender = user.getGender();
        email = user.getEmail();
        password = user.getPassword();
        userState = user.getUserState();
    }

    public User() {

    }

    public boolean sameAs(User user) {
        if (user == null) {
            return false;
        }

        if (this.getEmail().equals(user.getEmail())
                && this.getBirthDate().equals(user.getBirthDate())
                && this.getFirstName().equals(user.getFirstName())
                && this.getLastName().equals(user.getLastName())
                && this.getGender().equals(user.getGender())
                && this.getPassword().equals(user.getPassword())
                && this.getPersonCode().equals(user.getPersonCode())
                && this.getUserState().equals(user.getUserState())) {
            return true;
        } else {
            return false;
        }

    }

    /**
     * @param firstName
     * @param lastName
     * @param personCode
     * @param birthDate
     * @param gender
     * @param email
     * @param password
     * @param userState
     */
    public User(String firstName, String lastName, String personCode,
            Date birthDate, Gender gender, String email, String password,
            UserState userState) {
        super();
        this.firstName = firstName;
        this.lastName = lastName;
        this.personCode = personCode;
        this.birthDate = birthDate;
        this.gender = gender;
        this.email = email;
        this.password = password;
        this.userState = userState;
    }

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getPersonCode() {
        return personCode;
    }

    public void setPersonCode(String personCode) {
        this.personCode = personCode;
    }

    public Date getBirthDate() {
        return birthDate;
    }

    public void setBirthDate(Date birthDate) {
        this.birthDate = birthDate;
    }

    public Gender getGender() {
        return gender;
    }

    public void setGender(Gender gender) {
        this.gender = gender;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public UserState getUserState() {
        return userState;
    }

    public void setUserState(UserState userState) {
        this.userState = userState;
    }

    public long getIdUser() {
        return idUser;
    }

    public void setIdUser(long idUser) {
        this.idUser = idUser;
    }

} 
```

我的用户映射器 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.nortal.pirs.datamodel">

    <class name="User" table="User">

        <id name="idUser" type="long" column="idUser">
            <generator class="increment"/>
        </id>

        <property name="firstName" />
        <property name="lastName" />
        <property name="personCode" />
        <property name="birthDate" type="date"/>
        <property name="email" />
        <property name="password" />

       <property name="userState" column="userState" length="15">
             <type name="org.hibernate.type.EnumType">
                  <param name="enumClass">com.nortal.pirs.datamodel.enumeration.UserState</param>
                  <param name="type">12</param>
              </type>
        </property>

         <property name="gender" column="gender" length="15">
             <type name="org.hibernate.type.EnumType">
                  <param name="enumClass">com.nortal.pirs.datamodel.enumeration.Gender</param>
                  <param name="type">12</param>
              </type>
        </property>

         <joined-subclass name="Patient" table="Patient">
             <key column="idUser" />
             <property name="additionalInfo" column="additionalInfo" />
         </joined-subclass>

         <joined-subclass name="SpiProfessional" table="SpiProfessional">
                 <key column="idUser" />
         </joined-subclass>

    </class>

</hibernate-mapping> 
```

还有我的 VisitMapper xml ：（这是一个，实际上应该在行动，我什至不明白为什么 Hibernate 需要用户的吸气剂......）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="com.nortal.pirs.datamodel">

    <class name="Visit"
        table="Visit">

        <id name="idVisit">
            <generator class="increment"/>
        </id>

        <property name="visitDate" type="date" />
        <property name="reason" />

       <property name="visitState" column="visitState" length="15">
             <type name="org.hibernate.type.EnumType">
                  <param name="enumClass">com.nortal.pirs.datamodel.enumeration.VisitState</param>
                  <param name="type">12</param>
              </type>
        </property>

        <many-to-one name="idPatient" not-null="false" class="com.nortal.pirs.datamodel.Patient"/>
        <many-to-one name="idSpiProfessional" not-null="false" class="com.nortal.pirs.datamodel.SpiProfessional" />
        <many-to-one name="idProfession" not-null="false" class="com.nortal.pirs.datamodel.Profession" /> 
```

我只是希望有人可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-30T08:34:28.457

您告诉 Hibernate，访问类与 Patient 类（以及其他两个类）具有多对一的关联。它没有这样的关联。如果您有这样的关联，则 Visit 类将包含

```
private Patient patient;

public Patient getPatient() {
    return this.patient;
}

public void setPatient(Patient patient) {
    this.patient = patient;
} 
```

相反，您在访问实体中拥有的是患者的*ID*。这不构成关联。

阅读有关关联的[Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#tutorial-associations)，因为您错过了关联，以及 ORM 实际允许的大量功能，即能够加载、导航和查询对象图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-26T11:37:29.107

使用错误的参数绑定方法时也会出现此错误。例如：

```
select o from Order o where o.client in (:clients) 
```

使用

```
query.setParameter("clients", clientList); 
```

代替

```
query.setParameterList("clients", clientList); 
```

会导致上述错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-10T13:54:57.013

在我（我假设，很少见）的情况下，类似的错误是由于该字段：

```
 @MapKey
    public Map<Integer, AttributeValue_> getAttrValues() {
        return attrValues;
    } 
```

问题在于 AttributeValue 主键不是整数。因此，由 ClassCastException 引起的 IllegalArgumentException。

解决方案是使

```
 @MapKeyColumn(name = "attr_id") 
```

它将地图的键绑定到某个属性 attr_id。

# php - Symfony2 Doctrine - 删除或隐藏关系以保持一致性？

> ID：14089235
> 
> 赞同：3
> 
> 时间：2012-12-30T08:06:09.160
> 
> 标签：php, symfony, doctrine-orm

我有一个有很多关系的 Symfony2 项目，我希望数据集在任何时候都保持一致。例如，销售与产品相关联。

如果用户决定删除产品，但产品与销售挂钩，如何保持销售对象一致？

使用纯 SQL，我会添加一个带有 RESTRICT 关系的“隐藏”列。如果没有与产品关联的销售，则删除该产品。如果有一个或多个销售，该产品不会被删除，但隐藏字段设置为 true。

在用户界面中，SQL 请求将是

```
 SELECT * FROM product WHERE hidden = FALSE 
```

这是处理这个问题的正确方法吗？你有什么想法如何在 Symfony 2 中有类似的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T23:45:45.337

您可以使用[Doctrine 的注释](http://docs.doctrine-project.org/en/2.0.x/reference/annotations-reference.html)来帮助您始终保持数据的一致性。例如，当销售被删除时，它也会继续删除产品。

如果您使用的是一对一或一对多关系，您可以将**orphanRemoval**注释为 true：

> orphanRemoval：布尔值，指定是否应由 Doctrine 删除孤儿，即未连接到任何拥有实例的反向 OneToOne 实体。默认为假。

请参阅[此处](http://docs.doctrine-project.org/en/2.0.x/reference/annotations-reference.html#annref-onetoone)了解更多信息。

# java - Java 中的 Twain 设备（扫描仪）控件

> ID：14089236
> 
> 赞同：27
> 
> 时间：2012-12-30T08:06:21.087
> 
> 标签：java, twain, image-scanner, imagej

我想通过Java扫描一些论文。我找到了[mm 的计算孪生库](http://thorntonzone.com/manuals/Compression/Fax,%20IBM%20MMR/MMSC/mmsc/uk/co/mmscomputing/device/twain/index.html)。

当我在站点上运行示例[TwainExample.java](http://thorntonzone.com/manuals/Compression/Fax,%20IBM%20MMR/MMSC/mmsc/uk/co/mmscomputing/device/twain/TwainExample.java)时，我收到此错误。

> uk.co.mmscomputing.device.twain.TwainIOException：无法加载 Twain 源管理器。

另一方面，几乎相同的代码可以将 ImageJ 作为[插件使用](http://rsb.info.nih.gov/ij/plugins/twain-scan.html)。然而，当我单独使用这段代码时，我仍然收到同样的异常。

我想知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-02-04T08:12:27.310

您可以尝试下载 64 位的 TWAINDSM.DLL 并将其放入 C:/windows/system32 或 32（如果有）。在 SourceForge 上找到它

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-24T11:31:04.057

在过去，我成功地使用了[Morena](http://www.gnome.sk/Twain/jtp.html)库。它是商业的，但是如果可以为您工作，则有个人非商业许可证。甚至从签名的小程序中工作。

# python - 在 Python 中迭代和打印 JSON 对象

> ID：14089238
> 
> 赞同：3
> 
> 时间：2012-12-30T08:06:45.627
> 
> 标签：python, json, google-sheets, google-spreadsheet-api, python-requests

我有一个我想在 Python 中获取的 Google 电子表格，然后通过 JSON 处理它。工作到一半了，看了几个小时的Stackoverflow，我想是时候问一个问题了。

例如，JSON 文件的格式如下所示（来自[https://developers.google.com/gdata/docs/json](https://developers.google.com/gdata/docs/json)）。

```
{
  "version": "1.0",
  "encoding": "UTF-8",
  "feed": {
    "xmlns": "http://www.w3.org/2005/Atom",
    "xmlns$openSearch": "http://a9.com/-/spec/opensearchrss/1.0/",
    "xmlns$gd": "http://schemas.google.com/g/2005",
    "xmlns$gCal": "http://schemas.google.com/gCal/2005",
    "id": {"$t": "..."},
    "updated": {"$t": "2006-11-12T21:25:30.000Z"},
    "title": {
      "type": "text",
      "$t": "Google Developer Events"
    },
    "subtitle": {
      "type": "text",
      "$t": "The calendar contains information about upcoming developer 
       conferences at which Google will be speaking, along with other 
       developer-related events."
    },
    "link": [{
      "rel": "...",
      "type": "application/atom+xml",
      "href": "..."
      },{
      "rel": "self",
      "type": "application/atom+xml",
      "href": "..."
    }],
    "author": [{
      "name": {"$t": "Google Developer Calendar"},
      "email": {"$t": "developer-calendar@google.com"}
    }],
    "generator":{
      "version": "1.0",
      "uri": "http://www.google.com/calendar",
      "$t": "Google Calendar"
    },
    "openSearch$startIndex": {"$t": "1"},
    "openSearch$itemsPerPage": {"$t": "25"},
    "gCal$timezone": {"value": "America/Los_Angeles"},

    "entry": [{
      "id": {"$t": "..."},
      "published": {"$t": "2006-11-12T21:25:30.000Z"},
      "updated": {"$t": "2006-11-12T21:25:30.000Z"},
      "category": [{
        "scheme": "...",
        "term": "..."
      }],
      "title":{
        "type": "text",
        "$t": "WebmasterWorld PubCon 2006: Google Developer Tools in General"
      },
      "content": {
        "type": "text",
        "$t": "Google is sponsoring at
          <a href=\"http://www.pubcon.com/\">WebmasterWorld PubCon 2006</a>.
          \n Come and visit us at the booth or join us for an evening demo
          reception where we will be talking \"5 ways to enhance your website
          with Google Code\". \n After all, \n it is Vegas, baby! See you soon."
      },
      "link": [{
        "rel": "alternate",
        "type": "text/html",
        "href": "...",
        "title": "alternate"
        },{
        "rel": "self",
        "type": "application/atom+xml",
        "href": "..."
      }],
      "author": [{
        "name": {"$t": "Google Developer Calendar"},
        "email": {"$t": "developer-calendar@google.com"}
      }],
      "gd$transparency": {"value": "http://schemas.google.com/g/2005#event.opaque"},
      "gd$eventStatus": {"value": "http://schemas.google.com/g/2005#event.confirmed"},
      "gd$comments": {"gd$feedLink": {"href": "..."}},
      "gCal$sendEventNotifications": {"value": "true"},
      "gd$when": [{
        "startTime": "2006-11-15",
        "endTime": "2006-11-17",
        "gd$reminder": [{"minutes": "10"}]
      }],
      "gd$where": [{"valueString": "3150 Paradise Road,Las Vegas,NV 89109"}]},
    }]
  }
} 
```

我的Python代码如下：

```
import requests, json
r = requests.get('link-to-google-spreadsheet-json')
j = r.json() 
```

测试 JSON 文件输出的顶级层次结构如下：

```
>>> print j["version"]
1.0 
```

但是迭代对象，如下所示：

```
for feed in j["feed"]:
    for entry in feed["entry"]:
        for title in entry["title"]:
            print title["$t"]
        print
    print 
```

给我以下错误：

```
Traceback (most recent call last):
File "<console>", line 2, in <module>
TypeError: string indices must be integers. 
```

听起来它想从字符串中打印一个字母，只要我给出索引号。那么如何解析 JSON 以便它正确输出我想要的内容（例如，提要 -> 条目 -> 标题 -> $t）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T08:31:12.987

j['feed'] 是一个字典。您的代码应如下所示：

```
for entry in j['feed']['entry']:
    print entry['title']['$t'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T10:52:19.640

`feed`并且`title`是字典而不是列表，因此您不应该对它们进行 for 循环。您只需要一个用于条目列表的 for 循环。

# actionscript-3 - as3 hitTestObject() to hit all

> ID：14089241
> 
> 赞同：1
> 
> 时间：2012-12-30T08:06:58.910
> 
> 标签：actionscript-3, flash, sprite, removechild

In my game I have person who shoots and I need if the bullet hit somthing to delete the sprite.

```
var i = 1;
var f:Function;
addChild(bullet);
bullet.addEventListener(Event.ENTER_FRAME, f = function(){ 
    bullet.x += movex*i;
    bullet.y += movey*i;
    i++;
}); 
```

How to make `hitTestObject()` with everything?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T08:34:05.943

碰撞检测有很多技术，但是，使用的方法取决于目标对象的形状。像素完美命中测试是最准确的碰撞检测方法，尽管这很慢。几何命中测试可能是最快的，如果正确完成，可以非常准确。使用的一个缺点`hitTestObject`是它很慢。因此，如果您需要处理大量对象，我的意见是使用替代方法进行碰撞检测。

绝对对于对象到对象的碰撞检测，您需要遍历放置在数组中的每个目标对象（但为了提高 a 的性能`<Vector>`）并测试子弹是否击中目标对象。

```
bullet.addEventListener(Event.ENTER_FRAME, testCollision);

private function testCollision(e: Event) {        
    bullet.x += moveX*i;
    bullet.y += moveY*i;

    for (var j = 0; j < objects.length; j++) {     
        if (bullet.hitTestObject(objects[j])) {
            // Do something
        }
    }

    i++;
}; 
```

值得阅读这些文章以获得进一步的解释：

[http://plasticsturgeon.com/2011/03/actionscript-collision-detection-u-circle-circle-collision-detection/](http://plasticsturgeon.com/2011/03/actionscript-collision-detection-u-circle-circle-collision-detection/)

[http://www.mikechambers.com/blog/2009/06/24/using-bitmapdata-hittest-for-collision-detection/](http://www.mikechambers.com/blog/2009/06/24/using-bitmapdata-hittest-for-collision-detection/)

[http://www.mikechambers.com/blog/2009/06/25/strategies-for-optimizing-collision-detection-with-bitmapdata-hittest/](http://www.mikechambers.com/blog/2009/06/25/strategies-for-optimizing-collision-detection-with-bitmapdata-hittest/)

这是一个完成繁重工作的库： [http ://code.google.com/p/collisiondetectionkit/](http://code.google.com/p/collisiondetectionkit/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T08:41:19.837

我会这样处理它（我假设项目符号是您从库中添加的电影剪辑）。

我使用僵尸和植物作为已经在舞台上的电影剪辑的示例，您手动将其传递到 liveObjects 数组中。

对于更大规模的游戏，显然你不会硬编码，但我试图去掉额外的东西以使示例更容易理解）

```
import flash.events.Event;
import flash.display.MovieClip;

var liveObjects:Array = [
  zombie1, // A MovieClip on the stage
  zombie2, // ditto
  zombie3, // ditto
  plant1,  // ditto
  plant2   // ditto
];

// Create bullet
var bullet:Bullet = new Bullet();
bullet.x = 200;
bullet.y = 200;
addChild( bullet );
bullet.addEventListener( Event.ENTER_FRAME, f );

var i:int = 1;
var moveX:int = 1;
var moveY:int = 1;
function f( e:Event ){ 
  var thisBullet:MovieClip = ( e.currentTarget as MovieClip );
  thisBullet.x += moveX * i;
  thisBullet.y += moveY * i;
  i++;

  for( var j:int; j < liveObjects.length; j++ ) {
    if( thisBullet.hitTestObject( liveObjects[ j ] ) ) {
        trace( "Hit " + liveObjects[ j ] );
    }
  }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T08:16:17.080

希望你有一些包含所有敌人精灵引用的数组。只需用子弹循环调用 hitTestObject() 即可。

# backbone.js - Backbone.js navigation to index url

> ID：14089242
> 
> 赞同：0
> 
> 时间：2012-12-30T08:07:02.473
> 
> 标签：backbone.js

I have listing of posts at [http://example.com/posts](http://example.com/posts). Each post has edit link, like

[http://example.com/posts#/1/edit](http://example.com/posts#/1/edit)

when i click on the link, i am rendering edit post template and saving it. Now the issue is after updating the post, i want to redirect back [http://example.com/posts](http://example.com/posts).

when i do Backbone.history.navigate('/posts', true), i find [http://example.com/posts#posts](http://example.com/posts#posts) in the url.

May be i am missing something.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:13:20.543

尝试使用 Backbone 的路由器来执行导航。

您必须在您的应用程序中设置它的一个实例（每个 BB 应用程序都有一个）。这是执行导航的框架代码：

```
AppRouter = Backbone.Router.extend({ ... }) //should already be set on your app
app = new AppRouter();
app.navigate('/posts', {trigger: true}); 
```

# windows - Unable to kill a process in Perl

> ID：14089243
> 
> 赞同：2
> 
> 时间：2012-12-30T08:07:08.317
> 
> 标签：windows, perl, process, exe

I wrote a code to run an exe file as follow:

```
 #!/usr/local/bin/perl     
 use Cwd;                      
 $directory   = 'e:/USER/';
 chdir($directory) or die ; 
 system("Bnc25-Windows.exe -nw"); 
```

Now I want to write another code to stop it. I wrote:

```
 #!/usr/local/bin/perl     
 use Cwd;                      
 $directory   = 'e:/USER/';
 chdir($directory) or die ; 
 kill Bnc25-Windows.exe ; 
```

but it doesn't work and I see in task manager window that the exe file is running. I don't really know where is the problem. thanks for any help

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T08:11:12.187

You are using Windows. There is no `kill` command in Windows. You can use `taskkill` for this.

Use the `system` function again.

```
system("taskkill /im Bnc25-Windows.exe /f"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T11:06:24.213

[Perl`kill`函数](http://perldoc.perl.org/functions/kill.html)需要（信号名称/编号和）您要杀死的进程的数字 ID，而不是它的名称。

作为一般建议，我*强烈*建议您使用以下代码开始您的代码：

```
use strict;
use warnings; 
```

并修复它们生成的任何错误和警告。

例如，如果您使用问题中的代码完成了此操作，您将（在修复周围缺少的引号`Bnc25-Windows.exe`和`my`第一次声明之前缺少的引号之后`$directory`，以便代码通过`strict`检查）收到以下警告：

```
Unrecognized signal name "Bnc25-Windows.exe" at test.pl line 7. 
```

这会告诉您`kill`正在尝试解析`"Bnc25-Windows.exe"`为信号名称，这表明您尝试使用它的方式有问题，并希望您查看文档（请参阅链接以上），它既描述了`kill`在 Perl 中使用该函数的正确方法，还链接到关于在非 Unix 系统上使用它的[可移植性警告。](http://perldoc.perl.org/perlport.html#kill)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T08:21:39.017

`kill`杀死进程`PID`。您需要`killall`按可执行名称终止进程。两者都是`unix`命令，可在 via 上使用`cygwin`（您可能正在使用）。

# java - Java 类声明语法

> ID：14089246
> 
> 赞同：0
> 
> 时间：2012-12-30T08:07:57.630
> 
> 标签：java, android

> **可能重复：**
> [具有多个类的 Java 泛型通配符](https://stackoverflow.com/questions/745756/java-generics-wildcarding-with-multiple-classes)

我在阅读一个 Android 应用程序的源代码时遇到了一个语法问题。作为一名 Java 新手，我不知道某个特定部分的实际含义。代码看起来像。

```
public abstract class TabPagerActivity<V extends PagerAdapter & FragmentProvider>
        extends PagerActivity implements OnTabChangeListener, TabContentFactory { 
```

我感到困惑的是这部分：

```
<V extends PagerAdapter & FragmentProvider> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T08:25:25.290

该语法描述了`V`可以分配给`PagerAdapter`和的要求`FragmentProvider`，允许程序员指定多个接口作为类型匹配的要求。由于 Java 不直接支持多重继承，因此这些类型中至少有一种通常是接口，除非冗余信息以指定的父类和子类的形式存在。

[您可以在相应的教程](http://docs.oracle.com/javase/tutorial/java/generics/bounded.html)中找到有关 Java 泛型的多个界限的更多信息。

# wordpress - How WordPress loads posts using rewrited URLs with no unique idetifier?

> ID：14089250
> 
> 赞同：0
> 
> 时间：2012-12-30T08:08:44.613
> 
> 标签：wordpress, .htaccess, url-rewriting

I'm wonder how `WordPress` or some other websites rewrite URLs without any identifier mentioned.

for example in `WP` when i open `Permalink Settings` can select a custom URL format as below.

```
http://localhost/wordpress/sample-post/ 
```

Just post title has been mentioned and there is no way to know the `Post ID` apparently. Now thinking of how WP know which post have to be loaded ?

What i think myself is that this formatted URL has not been rewritten and just is a sample that WordPress use to rewrite every post after i create it. So every time i write a post it adds a new rewrite to `.htaccess` file.

But this solution is not logical and make us to have a dirty `htaccess` file and is very hard to maintenance because a lot of conflicts are likely.

Another solution is to think that there is no regular rewriting at all, and `WP` is processing URL itself, so when current URL matches to sample URL it know that's time to load an specific post.

This is feasible too, but the main problem still remained that how it know which Post have to be loaded ? Is it searching on DB using title ?! So how it can guarantee that titles are unique ?

That's a big challenge in my life ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T08:26:39.783

Wordpress 的`wp_post`表有一个名为 的列`post_name`，它用于存储帖子标题的唯一 url 友好版本。它使用该列的值搜索数据库。

这通常称为 a `slug`，并且它必须是唯一的。

# ios - Collection view scroll with limited cells

> ID：14089251
> 
> 赞同：2
> 
> 时间：2012-12-30T08:08:50.900
> 
> 标签：ios, scroll, uicollectionview

I have a collection view with only 1 cell to start with the user can add more cells as they please. The collection view does not scroll until I have enough cells to go past the scrollview frame.

How can I allow the collection view to scroll up and down without having more cells?

This behavior is similar to an empty table view. You can still scroll up and down just a bit.

I have been searching but cannot find a way to solve this, and honestly it is a weird question to ask I guess.

Any help is great, thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T08:22:29.557

集合视图和表格视图都是 UIScrollView 的子类。您正在寻找的行为是滚动视图的一部分 - 由`bounces`和`alwaysBounceVertical`属性控制。

[文档在这里](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/alwaysBounceVertical)。

# c# - How to add value in Document Library Column

> ID：14089259
> 
> 赞同：0
> 
> 时间：2012-12-30T08:09:38.450
> 
> 标签：c#, visual-studio-2010, sharepoint-2010, web-parts

i'm trying to figure out how to fill value in Document Library column using web part. Now im using this code to add value in Task List column using this code. I'm looking solution on how to use something simillar to add value in Document Library Column. Examples and Suggestion will be much appreciated. Thanks and Regards.

```
SPWeb oWeb = SPContext.Current.Web;

SPListItemCollection listItems = oWeb.Lists["DDC"].Items;

SPListItem oItem = listItems.Add();

oItem["Title"] = "New Task";

oItem.Update(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T06:45:12.077

请参考以下代码：

```
SPWeb oWeb = SPContext.Current.Web;
SPList lstTarget = oWeb.Lists.TryGetList("DDC");

Hashtable metaData = new Hashtable();

metaData.Add("Field1 Name", "Field1 Value");
metaData.Add("Field2 Name", "Field2 Value");
metaData.Add("Field3 Name", "Field3 Value");

byte[] bytes = File.ReadAllBytes("c:\folder\myfile.txt"); //Set path to file to be uploaded in document library.

oWeb.AllowUnsafeUpdates = true;
SPFile destfile = lstTarget.RootFolder.Files.Add("myfile.txt", bytes, metaData, true);
oWeb.AllowUnsafeUpdates = false; 
```

# c# - convert string to decimal before update a table or insert data into table

> ID：14089262
> 
> 赞同：3
> 
> 时间：2012-12-30T08:10:08.400
> 
> 标签：c#, sql, winforms, ado.net

I'd like to ask you how to convert a string into a decimal before update a table or insert data into table, after a user inserts a row, or update a row from a dataGridView.

**For example,** I put a decimal value `2.2` to the price column, then I save it to the database, then I refreshed the table, the value is `2`, not the `2.2`, or add `2.8`, then the table shows us `3`, not `2.8`.

In my case, I want the column of price to be decimal, I do it as following, but it is not work, please help, thanks.

In form1.css:

```
..............
         //after a user click the save button
         private void btnSave_Click(object sender, EventArgs e) 
         { 
             Infor.UpdateDataSet((DataSet)dataGridView1.DataSource); 
          }
......... 
```

Infor.css

```
 pInsert[3] = new SqlParameter("@p4", SqlDbType.Decimal, 40,
                                "price");
  pUpdate[2] = new SqlParameter("@p4", SqlDbType.Decimal, 40,
                                "price"); 
```

.........

```
 public static void UpdateDataSet(DataSet ds)
   {
      SqlConnection cnn = new SqlConnection(strConn);

      string sqlInsert, sqlUpdate, sqlDelete;
      sqlInsert = "insert into customers(customerid,companyname,
         contactname,price) values(@p1,@p2,@p3,@p4)";
      sqlUpdate = "update customers set companyname=@p2,
         contactname=@p3,price=@p4 where customerid=@p1";
      sqlDelete = "delete from customers where customerid=@p1";

      SqlParameter[] pInsert = new SqlParameter[4];
      SqlParameter[] pUpdate = new SqlParameter[4];
      SqlParameter[] pDelete = new SqlParameter[1];

      pInsert[0] = new SqlParameter("@p1", SqlDbType.VarChar,  5,
                                    "CustomerID");
      pInsert[1] = new SqlParameter("@p2", SqlDbType.VarChar, 40,
                                    "CompanyName");
      pInsert[2] = new SqlParameter("@p3", SqlDbType.VarChar, 40,
                                    "ContactName");
      pInsert[3] = new SqlParameter("@p4", SqlDbType.Decimal, 40,
                                    "price");

      pUpdate[0] = new SqlParameter("@p2", SqlDbType.VarChar, 40,
                                    "CompanyName");
      pUpdate[1] = new SqlParameter("@p3", SqlDbType.VarChar, 40,
                                    "ContactName");
      pUpdate[2] = new SqlParameter("@p4", SqlDbType.Decimal, 40,
                                    "price");
      pUpdate[3] = new SqlParameter("@p1", SqlDbType.VarChar,  5,
                                    "CustomerID");

      pDelete[0] = new SqlParameter("@p1", SqlDbType.VarChar,  5,
                                    "CustomerID");

      SqlCommand cmdInsert = new SqlCommand(sqlInsert,cnn);
      SqlCommand cmdUpdate = new SqlCommand(sqlUpdate,cnn);
      SqlCommand cmdDelete = new SqlCommand(sqlDelete,cnn);

      cmdInsert.Parameters.AddRange(pInsert);
      cmdUpdate.Parameters.AddRange(pUpdate);
      cmdDelete.Parameters.AddRange(pDelete);

      SqlDataAdapter da = new SqlDataAdapter();
      da.InsertCommand  = cmdInsert;
      da.UpdateCommand  = cmdUpdate;
      da.DeleteCommand  = cmdDelete;
      da.Update(ds, "customers");
      ds.AcceptChanges();
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T15:55:18.267

小数有两个因素，比例和精度。

精度是数字可以包含的位数。

比例是小数位数。

例子

*   1111\. **111** （精度：7，刻度**3**）
*   11\. **11111** （精度：7，刻度**5**）

您在创建参数时没有表示比例~~，只有一个精度~~（编辑：您实际上是在构造函数中以字节为单位指定大小，而不是精度）。您需要明确设置 Precision 和 Scale 属性以获得您想要的结果。

例子

*取自[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.scale.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.scale.aspx)。*

```
SqlParameter parameter = new SqlParameter("Price", SqlDbType.Decimal);
parameter.Value = 3.1416;
parameter.Precision = 8;
parameter.Scale = 4; 
```

来自上述来源的相关说明：

> 如果未明确指定 Scale 属性并且服务器上的数据不适合比例 0（默认值），则数据可能会被截断。

这同样适用于表中的列定义，还必须指定精度和小数位数，当然，还要匹配。 *（添加了@OlivierJacot-Descombes 的以下评论）*

# c - fgets cannot capture output from tty device

> ID：14089264
> 
> 赞同：0
> 
> 时间：2012-12-30T08:11:02.200
> 
> 标签：c, pipe, fgets

I am trying to get the RSSI value from a Option modem installed as ttyHS4 (control) and ttyHS5 (data) on a Linux board. Expected result shows up on console but the fgets just does not capture any console output data.

```
if ((f=popen("echo -e \"AT+CSQ\r\n\">dev\ttyHS4","r"))==NULL){  
perror("popen");  
exit(1);  
}  

while (fgets(buff,sizeof(buff),f){  
printf(":%s:\n",buff);  
} 
```

I tested with "echo \"TEST\"" in the popen command and code above was able to print out the ":TEST:" string. With the ttyHS4 output, I only can get a few output on the console but the fgets + fprintf does not get any data to work on.

Please advise where I could have faulted.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:14:10.870

您正在调用`popen()`创建一个文件描述符，该文件描述符将这个命令的标准输出引导到您的主程序：

```
echo -e ... >/dev/ttyHS4 
```

您*确实*意识到此命令不会向该文件描述符发送任何内容，对吗？`popen()`打开一个外壳 - 通常`/bin/sh`-*然后*执行该命令。由于重定向到`/dev/ttyHS4`，该`echo`命令不会将其标准输出发送到与其父 shell 相同的文件描述符，这会导致没有任何内容被写入`f`- 即使这不是问题，`echo`也永远不会读回调制解调器对您的响应..

但是你为什么还要使用`popen()`and `echo`，而不是直接打开`/dev/ttyHS4`读/写并在结果文件描述符上使用`read()`and呢？`write()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T08:30:20.683

路径中有制表符是非常不寻常的。您可能打算这样做：

```
popen("echo \"AT+CSQ\">/dev/ttyHS4","r") 
```

# java - Which method is proposed for split date string?

> ID：14089265
> 
> 赞同：3
> 
> 时间：2012-12-30T08:11:07.563
> 
> 标签：java, string, datetime

I have a `String` instance as following format:

```
yyyyMMddHHmmss 
```

and I want split any element of it to a integer variable. for sample:

```
String date_time = "20080519145436"; 
```

By above string result must be:

```
int year  = 2008;
int month  = 05;
int day  = 19;
int hour  = 14;
int minutes  = 54;
int second  = 36; 
```

I found two way for solve this issue:

1.  using a `SimpleDateFormatter` and fetch elements.
2.  using `subString()` method of `String` class.

My question is: Which way is proposed? There are another ways?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-30T08:14:49.577

使用[JodaTime](http://joda-time.sourceforge.net/)中的日期格式化机制。

例如：

```
final DateTimeFormatter parser = DateTimeFormat.forPattern ( "yyyyMMddHHmmss" );
final DateTime date = parser.parseDateTime( "20080519145436" );
int year = date.getYear();
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T08:21:34.080

你可以简单地使用 SimpleDateFormat

```
String date_time = "20080519145436"; 
        SimpleDateFormat df =new SimpleDateFormat("yyyyMMddHHmmss");
        Date d= df.parse(date_time);
        Calendar cal = Calendar.getInstance();
        cal.setTime(d);
        System.out.println(cal.get(Calendar.YEAR)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T08:34:43.447

甚至不要考虑使用 String.subString()。日期不是字符串，您不应该尝试将其作为字符串处理，因为您绝对不会对输入进行完整性检查。您可以输入任何 14 位输入，您的算法会将其拆分为无意义的日期部分，例如月 = 42。在这种情况下，使用 SimpleDateFormatter、JodaTime 或任何其他专门针对日期对象的算法将引发异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T08:20:29.547

另一种方法是

```
 long d = Long.parseLong("20080519145436");
    int year = (int) (d / 10000000000L);
    int month = (int) (d / 100000000L % 100);
    int day = (int) (d / 1000000L % 100);
    int hour = (int) (d / 10000L % 100);
    int minutes = (int) (d / 100L % 100);
    int second = (int) (d % 100); 
```

至于我认为＃2更快的选项

```
int year = Integer.parseInt(date_time.substring(0, 4)); 
... 
```

因为已知 SimpleDateFormat 很慢。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T08:40:08.360

使用 SimpleDateFormatter 并获取元素。

# c++ - how to correctly write vector to binary file in c++?

> ID：14089266
> 
> 赞同：29
> 
> 时间：2012-12-30T08:11:09.800
> 
> 标签：c++, fstream

Thanks to Mats Petersson for the explanation on how to to copy vector to array, it's seems work. Here is the code snipet:

```
#include <iostream>
#include <string.h>
#include <vector>
#include <fstream>

using namespace std;

class Student
  {
    private:
    char m_name[30];
    int m_score;

    public:
    Student()
      {

      }
    Student(const Student& copy)
      {
           m_score = copy.m_score;   //wonder why i can use this statment as
           strncpy(m_name, copy.m_name, 30); //declare it private
      }
      Student(const char name[], const int &score)
      :m_score(score)
      {
           strncpy(m_name, name, 30);
      }
      void print() const
      {
           cout.setf(ios::left);
           cout.width(20);
           cout << m_name << " " << m_score << endl;
      }
      };

      int main()
      {
        vector<Student> student;
        student.push_back(Student("Alex",19));
        student.push_back(Student("Maria",20));
        student.push_back(Student("muhamed",20));
        student.push_back(Student("Jeniffer",20));
        student.push_back(Student("Alex",20));
        student.push_back(Student("Maria",21));
      {
      Student temp[student.size()];
      unsigned int counter;
      for(counter = 0; counter < student.size(); ++counter)
      {
        temp[counter] = student[counter];
      }

      ofstream fout("data.dat", ios::out | ios::binary);
      fout.write((char*) &temp, sizeof(temp));
      fout.close();
      }

      vector<Student> student2;
      ifstream fin("data.dat", ios::in | ios::binary);

      {
        fin.seekg(0, ifstream::end);
        int size = fin.tellg() / sizeof (Student);
        Student temp2[size];
        fin.seekg(0, ifstream::beg);
        fin.read((char*)&temp2, sizeof(temp2));
        int counter;
        for(counter = 0; counter <6; ++counter)
        {
        student2.push_back(temp2[counter]);
        }
        fin.close();
      }
      vector<Student>::iterator itr = student2.begin();
      while(itr != student2.end())
      {
        itr->print();
        ++itr;
      }
      return 0;
      } 
```

But I guest this method will waste huge memory and be cumbersome. Maybe I will consider writing it Mr. with ocelot and other suggestions. Thanks everyone for the answer.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-30T09:30:43.717

要将一个**[POD](http://en.wikipedia.org/wiki/Plain_old_data_structure)**`vector<T>` **存储在**文件中，您必须写入向量的内容，而不是向量本身。您可以使用第一个元素的地址访问原始数据`&vector[0]`（假设它包含至少一个元素）。要获得原始数据长度，请将向量中的元素数乘以一个元素的大小：

```
strm.write(reinterpret_cast<const char*>(&vec[0]), vec.size()*sizeof(T)); 
```

从文件中读取向量时也是如此；元素计数是文件总大小除以一个元素的大小（假设您只在文件中存储一种类型的 POD）：

```
const size_t count = filesize / sizeof(T);
std::vector<T> vec(count);
strm.read(reinterpret_cast<char*>(&vec[0]), count*sizeof(T)); 
```

这仅适用于您可以根据文件大小计算元素数量（如果您只存储一种类型的 POD 或所有向量包含相同数量的元素）。如果您有具有不同 POD 且长度不同的向量，则必须在写入原始数据之前将向量中的元素数写入文件。

此外，当您在不同系统之间以二进制形式传输数字类型时，请注意[字节顺序](http://en.wikipedia.org/wiki/Endianness)。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-30T09:27:39.900

您正在写入文件矢量结构，而不是其数据缓冲区。尝试将写入程序更改为：

```
 ofstream fout("data.dat", ios::out | ios::binary);
 fout.write((char*)&student[0], student.size() * sizeof(Student));
 fout.close(); 
```

而不是从文件大小计算向量的大小，最好先写向量大小（对象数）。在这种情况下，您可以将其他数据写入同一文件。

```
 size_t size = student.size();
 fout.write((char*)&size, sizeof(size)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T08:17:26.010

您可能无法以二进制（您正在做的方式）写入任何`std::vector`内容，因为该模板包含内部指针，并且写入和重新读取它们是没有意义的。

一些一般性建议：

*   不要以二进制形式编写任何 STL 模板容器（如`std::vector`or `std::map`），它们肯定包含您真的不想按原样编写的内部指针。如果您真的需要编写它们，请实现您自己的写入和读取例程（例如，使用 STL 迭代器）。

*   避免随意使用`strcpy`。如果名称超过 30 个字符，您的代码将崩溃。至少，使用`strncpy(m_name, name, sizeof(m_name));`（但即使这样对于 30 个字符的名称也不好用）。其实`m_name`应该是一个`std::string`。

*   显式序列化您的容器类（通过处理每个有意义的成员数据）。您可以考虑使用[JSON](http://www.json.org/)表示法（或者可能是[YAML](http://yaml.org/)，或者甚至是 XML - 我觉得太复杂所以不推荐）来序列化。它为您提供了一种文本转储格式，您可以使用标准编辑器（例如`emacs`或`gedit`）轻松地对其进行检查。你会发现很多序列化的免费库，例如[jsoncpp](http://sourceforge.net/projects/jsoncpp/)和许多其他库。

*   学习编译`g++ -Wall -g`和使用`gdb`调试器和`valgrind`内存泄漏检测器；也学会使用`make`和写你的`Makefile`-s。

*   利用 Linux 是免费软件的优势，因此您可以查看它的源代码（即使 STL 标头很复杂，您也可能想研究 stdc++ 实现）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-30T08:20:53.013

对于函数 read() 和 write()，您需要所谓的“普通旧数据”或“POD”。这基本上意味着类或结构内部必须没有指针，也没有虚函数。vector 的实现当然有指针——我不确定虚函数。

您将不得不编写一个函数来一次存储一个学生（或者将一群学生转换为字节数组 [不是向量] 或类似的 - 但这更复杂）。

您不能将非 POD 数据（尤其是指针）写入二进制文件的原因是，当您再次读回数据时，您几乎可以肯定地打赌，内存布局已经与您写入时发生了变化。这有点像试图在商店的同一个停车位停车 - 当您下次出现时，其他人将停在入口的第三个位置，因此您必须选择另一个位置。将编译器分配的内存视为停车位，将学生信息视为汽车。

[从技术上讲，在这种情况下，情况更糟-您的向量实际上并不包含班级内的学生，这就是您正在写入文件的内容，因此您甚至没有保存有关学生的信息，而只是保存了信息关于他们所在的位置（停车位的数量）]

# java - How does java primitives work? , short(short+ int)?

> ID：14089269
> 
> 赞同：1
> 
> 时间：2012-12-30T08:11:51.783
> 
> 标签：java

I tried executing the below code :

```
public class Test5 {

/**
 * @param args
 */
public static void main(String[] args) {
    short x = 0;
    int i = 123456;

    x = (short) (x + i);
    System.out.println(x);
}

} 
```

How is the output "-7616"? how does integer and short work when type casted to short?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T08:21:30.330

长版： [http ://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html)

短版：Java 采用 int 的 16 个最低有效位，并将它们以相同的顺序放入 short 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T08:18:45.907

`short`是 2 字节整数。并且 java 类型不能像 C 中那样是“无符号”的。因此，最大值是 32767。（Short.MAX_VALUE）。

如您所见，您试图为该变量赋予更大的价值：

```
123456
 32767 
```

这种值的二进制表示是您发布的负值。顺便说一句，同样的情况发生在 C 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T08:22:13.533

当你添加一个 int 和一个 short 时，resut 是一个 int，即 4 个字节。

但是当你把它转换成一个short时，你是从int的最后两个字节做一个short。

`123456`的字节是`0x0 0x1 0xe2 0x40`，因此您正在缩短 from `0xe2 0x40`。

第一点`0xe2`1，产生的短路为负。

你可以玩这个简短的程序来看看会发生什么：

```
int i = 123456; // <== change the value
System.out.format("Bytes of %d: ", i);
byte[] bytes = ByteBuffer.allocate(4).putInt(i).array();
for (byte b : bytes) {
   System.out.format("0x%x ", b);
}
System.out.format("\nlast two bytes : %d*256 + %d = %d\n", bytes[2], bytes[3], (short)(bytes[2]*256 + bytes[3])); 
```

输出 ：

```
Bytes of 123456: 0x0 0x1 0xe2 0x40 
Last two bytes : -30*256 + 64 = -7616 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T08:22:53.353

这就是所谓的缩小原始转换。您正在尝试转换`int`为`short`.

它可能技术性太强，但请尝试理解[Java 语言规范，第 5.1.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T08:22:03.267

显式铸造。当您将 Java int 转换为 short 时，您将获得静默截断。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-30T08:22:12.030

的类型`x + i`是`int`。此 int 包含一个大于 short 最大值的值。当您将其转换为 short 时，将采用 32 位 int 的最后 16 位来制作 short，而这 16 位恰好代表一个负的 short 值。

Java 语言规范说：

> 有符号整数到整数类型 T 的窄化转换只会丢弃除 n 个最低位之外的所有位，其中 n 是用于表示类型 T 的位数。除了可能丢失有关数值大小的信息之外，这可能会导致结果值的符号与输入值的符号不同。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-30T08:15:28.317

数据类型的最大值`short`为 32,767。在这里你添加了 123456 和 0。123456 大于 的最大值`short`，所以它被截断。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-30T08:24:11.567

或者看看这段代码，运行它。举个例子应该更容易理解。

```
public class Test {
    public static void main(String args[]) throws Exception {
        short v = 32767;
        System.out.println(v);
        v += 1;
        System.out.println(v);
        v += 1;
        System.out.println(v);

        System.out.println();

        v = 0;
        for (int i = 0; i < 123; i++) {
            int intVal = i * 1000;
            v = (short) intVal;
            System.out.println("intVal[" + intVal + "] shortVal[" + v + "]");
        }
    }
} 
```

输出...

```
32767
-32768
-32767

intVal[0] shortVal[0]
intVal[1000] shortVal[1000]
intVal[2000] shortVal[2000]
intVal[3000] shortVal[3000]
intVal[4000] shortVal[4000]
intVal[5000] shortVal[5000]
intVal[6000] shortVal[6000]
intVal[7000] shortVal[7000]
intVal[8000] shortVal[8000]
intVal[9000] shortVal[9000]
intVal[10000] shortVal[10000]
intVal[11000] shortVal[11000]
intVal[12000] shortVal[12000]
intVal[13000] shortVal[13000]
intVal[14000] shortVal[14000]
intVal[15000] shortVal[15000]
intVal[16000] shortVal[16000]
intVal[17000] shortVal[17000]
intVal[18000] shortVal[18000]
intVal[19000] shortVal[19000]
intVal[20000] shortVal[20000]
intVal[21000] shortVal[21000]
intVal[22000] shortVal[22000]
intVal[23000] shortVal[23000]
intVal[24000] shortVal[24000]
intVal[25000] shortVal[25000]
intVal[26000] shortVal[26000]
intVal[27000] shortVal[27000]
intVal[28000] shortVal[28000]
intVal[29000] shortVal[29000]
intVal[30000] shortVal[30000]
intVal[31000] shortVal[31000]
intVal[32000] shortVal[32000]
intVal[33000] shortVal[-32536]
intVal[34000] shortVal[-31536]
intVal[35000] shortVal[-30536]
intVal[36000] shortVal[-29536]
intVal[37000] shortVal[-28536]
intVal[38000] shortVal[-27536]
intVal[39000] shortVal[-26536]
intVal[40000] shortVal[-25536]
intVal[41000] shortVal[-24536]
intVal[42000] shortVal[-23536]
intVal[43000] shortVal[-22536]
intVal[44000] shortVal[-21536]
intVal[45000] shortVal[-20536]
intVal[46000] shortVal[-19536]
intVal[47000] shortVal[-18536]
intVal[48000] shortVal[-17536]
intVal[49000] shortVal[-16536]
intVal[50000] shortVal[-15536]
intVal[51000] shortVal[-14536]
intVal[52000] shortVal[-13536]
intVal[53000] shortVal[-12536]
intVal[54000] shortVal[-11536]
intVal[55000] shortVal[-10536]
intVal[56000] shortVal[-9536]
intVal[57000] shortVal[-8536]
intVal[58000] shortVal[-7536]
intVal[59000] shortVal[-6536]
intVal[60000] shortVal[-5536]
intVal[61000] shortVal[-4536]
intVal[62000] shortVal[-3536]
intVal[63000] shortVal[-2536]
intVal[64000] shortVal[-1536]
intVal[65000] shortVal[-536]
intVal[66000] shortVal[464]
intVal[67000] shortVal[1464]
intVal[68000] shortVal[2464]
intVal[69000] shortVal[3464]
intVal[70000] shortVal[4464]
intVal[71000] shortVal[5464]
intVal[72000] shortVal[6464]
intVal[73000] shortVal[7464]
intVal[74000] shortVal[8464]
intVal[75000] shortVal[9464]
intVal[76000] shortVal[10464]
intVal[77000] shortVal[11464]
intVal[78000] shortVal[12464]
intVal[79000] shortVal[13464]
intVal[80000] shortVal[14464]
intVal[81000] shortVal[15464]
intVal[82000] shortVal[16464]
intVal[83000] shortVal[17464]
intVal[84000] shortVal[18464]
intVal[85000] shortVal[19464]
intVal[86000] shortVal[20464]
intVal[87000] shortVal[21464]
intVal[88000] shortVal[22464]
intVal[89000] shortVal[23464]
intVal[90000] shortVal[24464]
intVal[91000] shortVal[25464]
intVal[92000] shortVal[26464]
intVal[93000] shortVal[27464]
intVal[94000] shortVal[28464]
intVal[95000] shortVal[29464]
intVal[96000] shortVal[30464]
intVal[97000] shortVal[31464]
intVal[98000] shortVal[32464]
intVal[99000] shortVal[-32072]
intVal[100000] shortVal[-31072]
intVal[101000] shortVal[-30072]
intVal[102000] shortVal[-29072]
intVal[103000] shortVal[-28072]
intVal[104000] shortVal[-27072]
intVal[105000] shortVal[-26072]
intVal[106000] shortVal[-25072]
intVal[107000] shortVal[-24072]
intVal[108000] shortVal[-23072]
intVal[109000] shortVal[-22072]
intVal[110000] shortVal[-21072]
intVal[111000] shortVal[-20072]
intVal[112000] shortVal[-19072]
intVal[113000] shortVal[-18072]
intVal[114000] shortVal[-17072]
intVal[115000] shortVal[-16072]
intVal[116000] shortVal[-15072]
intVal[117000] shortVal[-14072]
intVal[118000] shortVal[-13072]
intVal[119000] shortVal[-12072]
intVal[120000] shortVal[-11072]
intVal[121000] shortVal[-10072]
intVal[122000] shortVal[-9072] 
```

# python - 需要一个工具来检测 C 代码中的变量类型

> ID：14089277
> 
> 赞同：4
> 
> 时间：2012-12-30T08:12:34.930
> 
> 标签：python, c, compiler-construction

我在一个开发特定源到源编译器的项目中。在这个阶段，我需要在 C 源代码中找到变量的类型。例如，如果代码是，`c[i]=j*f[k]+p;`我应该找到 、 、 、 、 和变量的类型`c`（`i`、`j`和`f`源`k`中`p`定义`int*`的`float`任何其他类型）。有什么工具可以做到这一点吗？如果有多个工具，我更喜欢基于 python 的工具。

提前谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T08:43:58.003

您可以使用[pycparser](https://bitbucket.org/eliben/pycparser)编写自己的解析器，您可以[在此处找到更多示例](https://bitbucket.org/eliben/pycparser/src/c49f06f258b47311a653be40c4701ecb256fd6b3/examples?at=default)

```
from pycparser import c_parser
parser = c_parser.CParser()
text = 'int x; int y; float z;'
ast = parser.parse(text, filename='<none>')
ast.show()
FileAST: 
  Decl: x, [], [], []
    TypeDecl: x, []
      IdentifierType: ['int']
  Decl: y, [], [], []
    TypeDecl: y, []
      IdentifierType: ['int']
  Decl: z, [], [], []
    TypeDecl: z, []
      IdentifierType: ['float'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T08:14:14.957

您应该能够使用 llvm-tools 从源代码创建[AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，然后分析 AST。除了你的任务是编写类似 llvm-tools 的东西 :)

这是一个如何使用 llvm-bindings for python 分析 c 文件的示例：

[http://www.mdevan.org/llvm-py/examples.html](http://www.mdevan.org/llvm-py/examples.html)

# c++ - How to implement an iterator/container that is standards-compliant?

> ID：14089281
> 
> 赞同：2
> 
> 时间：2012-12-30T08:13:04.277
> 
> 标签：c++, for-loop, c++11

Suppose I have an abstract container-like class called `RuleBook`. Users of `RuleBook` expect to be able to forward-iterate over the `RuleBook` to obtain `Rule`s.

Unlike standard containers, there will be no restrictions on the memory layout of the the concrete subclasses here. Instead, it is up to the implementers of the subclasses to comply with the forward-iteration requirement of `RuleBook` and satisfy this requirement based on its own data structures.

I am thinking that `RuleBook` should contain pure virtual `begin()` and `end()` so it would work with **range-based for**, but I am running into a few problems.

*What should the signatures be for begin() and end()? How should BasketballRules and CompanyRules be implemented?*

*How do we deal with the end condition when the iterator goes past the last item?*

In the example below, you can assume that `m_rp` and `m_rpp` only point to one Rule each. We want to return some kind of iterator for the guts (like a `Rule*`). We can also assume that all subclasses of Foo will contain `Rule` in various data structures, which will be up to the whim of the implementor.

If I implement the entire thing using `Rule*` as my iterator and `null_ptr` as my beyond-the-endpoint, would this be STL compliant?

I am currently looking into custom iterators, but I'm not even sure this problem fits well with that paradigm because each subclass must effectively define the guts of the iteration.

**CODE**

```
struct RuleBook
{
  // virtual Rule* begin() = 0;
  // virtual Rule* end() = 0; 
};

struct CompanyRules :
    public RuleBook
{
    Rule m_r;
};

struct BasketballRules :
    public RuleBook
{
    // return the three Rules, one-at-a-time, in succession
    Rule   m_r;
    Rule*  m_rp;
    Rule** m_rpp;
};

int
main( int argv, char* argc[] )
{
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T13:20:41.797

这将很难做到正确。

> begin() 和 end() 的签名应该是什么？

没有太多选择，它们几乎必须是这样的

```
RuleBook::iterator begin();
RuleBook::iterator end(); 
```

（如果需要，添加`const`重载）

> BasketballRules 和 CompanyRules 应该如何执行？

小心:)

> 当迭代器经过最后一项时，我们如何处理结束条件？

您正确设计了迭代器类型，因此它可以正常工作。您需要一个可以比较相等性并且可以递增的迭代器类型。当您有一个指向容器中最后一项的迭代器并递增它时，它必须等于过去的迭代器。

> 如果我使用 Rule* 作为我的迭代器和 null_ptr 作为我的超出端点来实现整个事情，这是否符合 STL？

不。如果您的迭代器类型只是`Rule*`在递增迭代器时不会移动到下一个`Rule`，它只是指向内存中的下一个位置，它甚至可能不是一个`Rule`对象，从而导致未定义的行为。例如，`BasketballRules`如果您`Rule*`指向`m_r`并递增它，您并没有指向一个有效的`Rule`对象，您指向的是由`m_rp`ie a占用的内存，`Rule*`并且取消引用它是未定义的行为。

此外，如果您不断增加 a ，`Rule*`您将永远无法达到最终`nullptr`值。

我给 Yakk 的答案投了赞成票，因为它是一个合理的实现，但很难做到正确。多态接口中需要考虑和包含很多事情，例如，如果您使用`==`比较两个`RuleBook::iterator`对象，其中一个指向 a`CompanyRules`和一个指向 a会发生什么`BasketballRules`，多态迭代器的相等性如何工作？

如果将迭代器分配给`BasketballRules`对象，将迭代器分配给对象，会发生`CompanyRules`什么？您需要多态类型的“深拷贝”。

对于每个容器，您需要不同的派生迭代器实现类型，容器的迭代器类型`CompanyRule`需要了解有关该类型的所有信息`CompanyRule`，对于每个派生容器类型，依此类推。这些具体的迭代器实现类型中的每一个都需要将几乎整个迭代器接口实现为虚函数。实现它的困难表明设计存在问题。

更简单的设计是为每个派生容器类型管理相同类型的实际物理容器。特定于每个派生容器的代码只包括在派生对象的内容更改时更新列表的内容。迭代器类型是直接且非多态的，例如

```
struct RuleBook
{
  typedef std::vector<Rule*> list_type;
  typedef list_type::iterator iterator;

  virtual iterator begin() = 0;
  virtual iterator end() = 0;
};

struct CompanyRules :
    public RuleBook
{
    CompanyRules() : m_list{ &m_r } { }
    Rule m_r;

    iterator begin() { return m_list.begin(); }
    iterator end() { return m_list.end(); }

private:
    list_type m_list;
};

struct BasketballRules :
    public RuleBook
{
    BaseketballRules() : m_list{ &m_r, m_rp, *m_rpp } { }

    // return the three Rules, one-at-a-time, in succession
    Rule   m_r;
    Rule*  m_rp;
    Rule** m_rpp;

    iterator begin() { return m_list.begin(); }
    iterator end() { return m_list.end(); }

private:
    // N.B.
    // must update m_list[1] any time m_rp changes
    // must update m_list[2] any time the pointee of m_rpp changes (harder!)
    list_type m_list;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T12:09:34.397

Boost 有一些迭代器帮助模板类——crtp，需要你实现一些方法。它们的`pImpl`基于用户将允许您的迭代器的合规和虚拟行为。即，`pImpl`是一个纯虚拟抽象类，迭代器将其工作委托给它。

编写一个纯虚拟`pImpl`迭代器。那是`begin`and的返回类型`end`。子类使用具体`pImpl`实例创建迭代器的实例，为数据的存储方式自定义编写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T09:07:53.413

确切的签名并不重要，因为基于范围的 for 循环是根据使用的表达式定义的。如果找到`begin`或`end`成员函数，则将它们称为`__range.begin()`和`__range.end()`。签名无关紧要的一个示例是，这些成员函数可以具有任意数量和类型的参数，只要它们可以像`.begin()`and一样调用`.end()`（这意味着参数必须具有默认值）。

如果类型没有`begin`和`end`成员函数，则使用表达式`begin(__range)`和`end(__range)`。（其中使用您在 range-for-loop 中使用的表达式`__range`进行`auto &&__range`初始化）。因此，只要依赖于参数的查找有效，确切的签名就很重要。

* * *

> BasketballRules 和 CompanyRules 应该如何执行？
> 
> 当迭代器经过最后一项时，我们如何处理结束条件？

这些是与 range-base-for-loops 如何工作不同的问题。您应该专门询问有关这些的其他问题。

但是如果你使用指针作为你的迭代器，那么使用`nullptr`作为结束迭代器是不合适的，因为递增最后一个有效指针不会给你一个空指针；它会给你一个超过范围末尾的指针。此外，如果您`Rule*`用作迭代器，那么您不会将实现留给容器类；容器必须维护一个连续的规则数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T09:37:44.643

也许您可以尝试类似 Alex Alllain 在他的关于基于范围的 for 循环的教程中解释的[方式](http://www.cprogramming.com/c++11/c++11-ranged-for-loop.html)。它还有一个示例，用于制作可通过基于范围的 for 循环迭代的数据结构

需要的东西是

1.  一个 .begin() 和一个 .end() 方法。它们也可以是独立的。
2.  operator!= 、 ++ 和 * 重载，以便支持需要执行的迭代器操作。

# dll - 将可执行文件链接到的所有 dll 复制到可执行文件目录

> ID：14089284
> 
> 赞同：2
> 
> 时间：2012-12-30T08:14:01.967
> 
> 标签：dll, cmake

[This question](https://stackoverflow.com/questions/10671916/cmake-how-to-copy-dll-files-into-release-debug-folder)询问类似的问题，但只需要手动指定要复制的dll。我的问题是：有没有办法让 CMake 复制链接到可执行库的所有 dll，而无需手动告诉 CMake 要复制哪些文件？有时 CMake 更了解是否需要 dll。例如，在一个同时安装了同一个库（例如 Boost）的 dll 和静态库的系统中，我们选择静态链接到 Boost，那么我们不需要复制 dll。因此，与手动指定要复制的文件相比，CMake 可以做出更好的决定。另一个例子是，我的 QT 库链接到 ICU 库，在编写 CMakeLists.txt 时，我对此一无所知，所以我不可能告诉 CMake 复制 ICU dll，所以这应该由 CMake 而不是人类。

假设操作系统是 Windows。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:40:40.013

Have a look at CMake's `BundleUtilities.cmake` which provides `fixup_bundle(...)`

Details can be found here:

[http://www.cmake.org/Wiki/BundleUtilitiesExample](http://www.cmake.org/Wiki/BundleUtilitiesExample)

[http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module:BundleUtilities](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module:BundleUtilities)

# clearcase - 如何在 cleartool 中获取活动的完整描述？

> ID：14089291
> 
> 赞同：1
> 
> 时间：2012-12-30T08:15:15.227
> 
> 标签：clearcase, cleartool

我使用 ClearQuest 将查询导出到 csv，其中包含有关我的所有开发人员活动的信息。但是，描述被截断。是否有一个 cleartool 命令可以输出给定活动的完整描述？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-09T20:07:03.290

你可以使用类似...

```
foreach act ( `cleartool lsact -s` )    
    set changeset = `cleartool lsact -fmt "%[versions]p" $act`
    echo $changeset | tr ' ' '\n' >> $tmpoutput
end

foreach line ( "`cat $tmpoutput`" ) 
    set file=`echo $line | sed -e "s|\(.*\)@@.*|\1|"`
end 
```

这列出了活动的更改集（不包括@@）。

资源：

[http://www.snip2code.com/Snippet/961/list-files-changed-in-clearcase-ucm-stre?fromPage=1](http://www.snip2code.com/Snippet/961/list-files-changed-in-clearcase-ucm-stre?fromPage=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T08:32:16.607

你可以试试

```
cleartool descr -l activity:MyActivity@\myPVob 
```

您需要使用活动的完全限定名称：`activity:xxx@\mypvob`(Windows) 或`activity:xxx@/vobs/mypvob`(Unix)

您也可以查看一下[`fmt_ccase`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)，以便只描述您想要的内容，给出一个简单的长描述`descr -l`。

*   `%[versions]CQp`将列出给定活动的所有版本
*   `%c`只会显示与活动相关的评论

所以这可能就足够了：

```
cleartool descr -fmt "%c" activity:MyActivity@\myPVob
or
cleartool lsactivity -fmt "%c" activity:MyActivity@\myPVob 
```

标题将通过`%[headline]p`.

该数据应该是可用的，即使在启用 ClearQuest 的项目中，任何 UCM 活动都会自动转换为[通过其 SQUID](http://publib.boulder.ibm.com/infocenter/ieduasst/rtnv1r0/index.jsp?topic=/com.ibm.iea.rcc/rcc/7.0/Operations/ucm_cq_/player.html)（SUM ClearQuest Integration Doodad）链接的 ClearQuest 工作项。
如此[处所述](https://www.ibm.com/developerworks/forums/thread.jspa?threadID=36944)，`%[crm_record_id]p`并`%[crm_state]p`允许您访问 ClearQuest® 记录 ID 和活动的状态。

* * *

但是，关于具体的评论，您不会在 ClearCase 活动中找到它。
如[本技术](http://www-01.ibm.com/support/docview.wss?uid=swg21239440)说明所示，它看起来像这样：

```
cleartool lsact -long ACT00032163
activity "ACT00032163"
16-May-06.14:58:24 by Joe User (jou)
 "Created automatically as a result of 'Work On' action in ClearQuest"
 owner: jou
 group: liteline
 stream: jou-act3g-v1.0-2@/vobs/projects
 title: Draft of Test cases for UC01-1,2,3,7,8,10,11,30,32 and 04-2
 change set versions:
   ... 
```

所以 ClearCase 注释是一个生成的注释。

要访问 ClearQuest 记录的描述字段，您需要使用 ClearQuest API（例如 VB 脚本）：

*   首先[建立一个 ClearQuest 会话](http://publib.boulder.ibm.com/infocenter/cqhelp/v8r0m0/topic/com.ibm.rational.clearquest.api.tut.doc/topics/cqapi_overview_crs.htm)，
*   然后[通过它的 id 获得正确的记录](http://publib.boulder.ibm.com/infocenter/cqhelp/v8r0m0/topic/com.ibm.rational.clearquest.apiref.doc/topics/c_get_entity_objs.htm)，你已经通过了`%[crm_record_id]p`，如上所述。

那将是这样的：

```
require CQPerlExt; 
$CQsession = CQSession::Build();

set cqrecord = sessionObj.GetEntity("defect", "BUGID00000031")
set cqdescrfield = cqrecord.GetFieldValue("Description")
set cqdescr = cqdescrfield .GetValue() 
```

# android - android自定义吐司

> ID：14089298
> 
> 赞同：6
> 
> 时间：2012-12-30T08:17:11.017
> 
> 标签：android, toast

我能够使用此代码制作自定义吐司

```
 LayoutInflater inflater = getLayoutInflater();

    View layout = inflater.inflate(R.layout.custom_toast_layout, (ViewGroup)findViewById(R.id.custom_toast));

    TextView text = (TextView) layout.findViewById(R.id.toast_tv);
    text.setText("Hello! This is a custom toast!");

    Toast toast = new Toast(getApplicationContext());       
    toast.setDuration(Toast.LENGTH_LONG);
    toast.setView(layout);
    toast.show(); 
```

但是，由于我不明白 的目的`LayoutInflater`，我将代码修改为...

```
Toast toast = new Toast(getApplicationContext());
    toast.setView(findViewById(R.id.custom_toast));
    toast.setDuration(Toast.LENGTH_SHORT);
    toast.show(); 
```

我得到 RuntimeException 说“必须调用 setView”..

*   为什么我不能在不使用的情况下将视图分配给 toast `LayoutInflater`？

*   一般的目的是什么，`LayoutInflater`以便我可以将此体验应用于其他自定义视图？

**编辑：** 我在`onListItemClick()`接口方法中使用这些代码..设置内容后..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T08:35:11.407

你的问题有你的答案，每个自定义视图都应该先膨胀，这就是你修改后的代码出错的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T08:37:43.547

```
LayoutInflater inflater = getLayoutInflater();
View layout = inflater.inflate(R.layout.custom_toast,
                               (ViewGroup) findViewById(R.id.toast_layout_root));

TextView text = (TextView) layout.findViewById(R.id.text);
text.setText("This is a custom toast");

Toast toast = new Toast(getApplicationContext());
toast.setGravity(Gravity.CENTER_VERTICAL, 0, 0);
toast.setDuration(Toast.LENGTH_LONG);
toast.setView(layout);
toast.show(); 
```

这也是你所做的，它是完整的正确代码，你有你的答案，为了分配自定义视图，我们必须先使用自定义视图。

谢谢

# java - 如何让 Spring 打印出哪些弹簧配置文件处于活动状态？

> ID：14089301
> 
> 赞同：19
> 
> 时间：2012-12-30T08:17:28.910
> 
> 标签：java, spring

我正在使用 spring 3.1 配置文件，并希望 Spring 在启动时打印出哪些配置文件处于活动状态。例如，日志文件中输出的前几行。

```
02:59:43,451 INFO  [ContextLoader] Root WebApplicationContext: initialization started
02:59:43,544 INFO  [XmlWebApplicationContext] Refreshing Root WebApplicationContext: startup date [Sun Dec 30 02:59:43 EST 2012]; root of context hierarchy
02:59:43,610 INFO  [XmlBeanDefinitionReader] Loading XML bean definitions from class path resource [spring.xml]
02:59:43,835 INFO  [XmlBeanDefinitionReader] Loading XML bean definitions from class path resource [spring-security.xml]
02:59:43,971 INFO  [SpringSecurityCoreVersion] You are running with Spring Security Core 3.1.3.RELEASE
02:59:43,971 INFO  [SecurityNamespaceHandler] Spring Security 'config' module version is 3.1.3.RELEASE 
```

我想从 spring 中看到的是打印出正在使用的 spring 版本以及当前处于活动状态的配置文件的东西。

如何让 spring 打印出它的版本以及哪些配置文件处于活动状态？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-30T08:32:20.227

实现[`EnvironmentAware`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/EnvironmentAware.html)接口

例如

```
class MyEnvironmentAware implements EnvironmentAware{
    private static Environment env = null;

    @Override
    public void setEnvironment(Environment environment) {
            env = environment;
            //log the stuff you want here
     }
} 
```

将此类标记为 Spring bean

或者

只需注入[`Environment`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/core/env/Environment.html)一个您急切加载的 bean 并从中打印您需要的详细信息

喜欢

```
@Autowired
Environment env; 
```

在你急切加载的bean中，并打印它

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-30T09:55:03.467

您可以通过配置 log4j 来获取它，因为该对象会在级别`Environment`记录配置文件的激活。`DEBUG`

```
log4j.logger.org.springframework.core.env=DEBUG, A1 
```

如果`A1`是您的日志附加程序。不幸的是，在调试级别还有很多其他的东西，所以它不是很好，但是你可以在没有修改源代码的情况下获得活动配置文件。

配置在启动时登录独立的 Swing 应用程序：

```
58   [main] DEBUG org.springframework.core.env.StandardEnvironment  - Activating profile 'production' 
```

请注意，这是脆弱的，因为它依赖于调试级别的日志，在每次提交到 spring 时都会迅速改变。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-05-18T10:32:30.043

```
@Value("${spring.profiles.active}")
private String activeProfiles; 
```

这将为您提供一个带有活动配置文件的字符串。

如果您在配置中包含 DefaultFormattingConversionService：

```
@Bean
public ConversionService conversionService() {
    return new DefaultFormattingConversionService();
} 
```

它将返回一个字符串列表：

```
@Value("${spring.profiles.active}")
private List<String> activeProfiles; 
```

# hadoop - 在 HDFS Hadoop 中的文件更改所有者期间获取文件 inode？

> ID：14089308
> 
> 赞同：1
> 
> 时间：2012-12-30T08:18:45.963
> 
> 标签：hadoop, hdfs

如何在活动文件中获取文件 INode？例如：

在客户端类型命令下如下：

```
./hadoop fs -chown -R hadoop:hadoop hdfs://nn:9000/A1.txt 
```

在文件更改所有者操作期间如何获取“A1.txt”文件INode？

谢谢！

* * *

感谢 Harsh J 的以下回答。我知道 API。让我换一种说法：如果我想在文件 inode 中添加一些东西，如何获得指向活动文件 inode 的指针？非常感谢。

* * *

感谢 Harsh J 的回答。我知道 API。让我换个方式说：

如果我想向文件 inode 添加内容，如何获取指向活动文件 inode 的指针？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:23:42.543

鉴于不清楚的问题，我将假设您在 HDFS 中查找给定文件的详细信息，包括其所有元数据（例如 mtime、atime、所有者等）。

HDFS API以[FileStatus](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileStatus.html)对象`INode`的形式为客户端提供内部表示。这也是几乎所有子命令检索和使用的对象。`hadoop fs`

为您的 HDFS 实例使用适当的 Java API，您可以[为](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/fs/FileStatus.html)您的`hdfs://nn:9000/A1.txt`. 示例片段如下所示：

```
Path path = new Path("hdfs://nn:9000/A1.txt");
FileStatus inode = path.getFileSystem(new Configuration())
                       .getFileStatus(path);
// Use inode's information as desired.
// An example to print owner:
System.out.println(inode.getOwner()); 
```

# jquery - 使用 jquery 的 HTML 页面选项

> ID：14089309
> 
> 赞同：1
> 
> 时间：2012-12-30T08:18:47.297
> 
> 标签：jquery, html, css, options

我正在尝试创建一个 html 页面选项。这个选项菜单是一个在悬停或点击时出现的面板，从那里我可以更改颜色、背景图案等，我认为这是在更改 css 文件或者它正在做其他事情，但我不知道怎么做。我试图在谷歌上找到一些东西，但我没有。

如果您不明白我在寻找什么，请查看此页面，将鼠标悬停在“+”按钮上，您就会看到。 [http://themes.fbpixel.com/?theme=Landisimo%20-%20Landing%20Page](http://themes.fbpixel.com/?theme=Landisimo%20-%20Landing%20Page)

**编辑：如果有人知道已经为此类事情完成的 jquery 插件，请提交链接。**

**EDIT2：我真正想要的是一个插件，它保留我所做的属性更改，当我转到另一个网站页面时，颜色是我在第一页上选择的颜色。一个例子是：我的主页是红色的，我从面板选项中选择蓝色，当我进入博客页面时，该页面上的颜色为蓝色（我在上一页中选择的颜色）。**

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T09:04:39.413

你可以做这样的事情，HTML：

```
<body class="red">
    <p>Some text</p>
    <a href="#" id="paint-blue">paint blue</a>
    <a href="#" id="paint-red">paint red</a>
</body> 
```

CSS：

```
body.red {
    background-color: red;
}

body.red p {
    color: yellow;
}

body.blue {
    background-color: blue;
}

body.blue p {
    color: white;
}
/* Some more stuff */ 
```

JS：

```
$("#paint-blue").click(function(event) {
    event.preventDefault();
    $("body").removeClass("red").addClass("blue");
}

$("#paint-red").click(function(event) {
    event.preventDefault();
    $("body").removeClass("blue").addClass("red");
} 
```

这个想法是，根据顶级`body`元素的类，页面上的某些元素的样式会有所不同。

编辑：您链接到的示例页面使用 cookie 存储所选主题，从外观上看，它总是加载黄色主题，然后一些`onload`JS 检查 cookie 中的值并更改颜色。 [这](http://www.tutorialspoint.com/javascript/javascript_cookies.htm)是一些使用 JS 设置和读取 cookie 的随机教程。事情`onload`看起来像：

```
$(document).ready(function() {
    // Should be easy to write if you look at the tutorial
    var colour = getColourFromCookie();
    if (colour == 'blue') {
        $("#paint-blue").click();
    }
    // red is default, no need to do anything
}); 
```

您可以比示例站点做得更好的一件事是，您可以根据 cookie 值呈现不同的页面（不同的正文类），而不是总是呈现一个版本然后在客户端更改它 - 至少在我的计算机上有在 JS 启动并更改颜色之前有明显的延迟。

# javascript - 如何在 jQuery Mobile 的 Listview 搜索栏中突出显示搜索到的文本？

> ID：14089318
> 
> 赞同：0
> 
> 时间：2012-12-30T08:20:33.173
> 
> 标签：javascript, jquery, jquery-mobile, mobile-application

我有一个带有 data-role="listview" 和 data-filter="true" 的 div，它过滤了我的可折叠 div 的“列表”。过滤器功能非常好用，但不会突出显示文本。所以我想知道如何修改过滤器以添加高亮功能。JQM 文档有一段用于更改列表项的过滤方式（[在此处查看](http://jquerymobile.com/test/docs/lists/docs-lists.html)），但我无法让它工作，而且我对原始 javascript 不是很有经验。

我的代码示例在这里：

```
<div data-role="collapsible-set">
    <div data-role="listview" data-filter="true">
        <div class="collapsibleDirectory" data-role="collapsible">
            <H3>Accounting</H3>
            <p>Tyee Carr, Visiting professor<br />
            Phone: <a href="tel:3605469264">360-546-9264</a><br />
            Location: VCLS 308 A<br />
            Email: <a href="mailto:tjcarr@vancouver.wsu.edu">tjcarr@vancouver.wsu.edu</a></p>

            <p>Jane Cote, Acedemic Director - College of Business<br />
            Phone: <a href="tel:3605469756">360-546-9756</a><br />
            Location: VCLS 308 D<br />
            Email: <a href="mailto:janecote@vancouver.wsu.edu">janecote@vancouver.wsu.edu</a></p>

            <p>Claire Kamm Latham, Associate Professor<br />
            Phone: <a href="tel:3605469757">360-546-9757</a><br />
            Location: VCLS 308 Q<br />
            Email: <a href="mailto:clatham@vancouver.wsu.edu">clatham@vancouver.wsu.edu</a></p>

            <p>Brian Routh, Faculty and IMA Faculty Advisor<br />
            Phone: <a href="tel:3605469338">360-546-9338</a><br />
            Location: VCLS 308 T<br />
            Email: <a href="mailto:routh@vancouver.wsu.edu">routh@vancouver.wsu.edu</a></p>

            <p>Debra Sanders, Professor, Associate Director, Master of Program<br />
            Phone: <a href="tel:3605469147">360-546-9147</a><br />
            Location: VCLS 308 F<br />
            Email: <a href="mailto:dsanders@vancouver.wsu.edu">dsanders@vancouver.wsu.edu</a></p>

            <p>Ben Kulp, Acedemic Coordinator<br />
            Phone: <a href="tel:3605469551">360-546-9551</a><br />
            Location: VCLS 308 B<br />
            Email: <a href="mailto:van.cbadvising@vancouver.wsu.edu">van.cbadvising@vancouver.wsu.edu</a></p>

            <p>Mary Stender, Acedemic Coordinator<br />
            Phone: <a href="tel:3605469751">360-546-9751</a><br />
            Location: VCLS 308 C<br />
            Email: <a href="mailto:mstender@vancouver.wsu.edu">mstender@vancouver.wsu.edu</a></p>
        </div>
    </div>
</div> 
```

完整的项目和源代码可以在这里找到：www.dtc-wsuv.org/mscoggins/ASWSUV/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T03:43:55.027

请尝试复制粘贴此馅饼.. [http://pastebin.com/5UZEaAHS](http://pastebin.com/5UZEaAHS)

它使用来自这里的插件[http://johannburkard.de/resources/Johann/jquery.highlight-4.closure.js](http://johannburkard.de/resources/Johann/jquery.highlight-4.closure.js)

# javascript - 将 CSS 样式应用于基于同一级别的另一个类的类

> ID：14089322
> 
> 赞同：0
> 
> 时间：2012-12-30T08:21:29.627
> 
> 标签：javascript, jquery, css

我有一个 jquery 轮播，它将“活动”类应用于 div 中的图像。在同一个 div 中，我也有一个带有“fade”类的跨度，它应用了不透明度的 css 样式：0; 我想知道是否有办法使用 CSS 或 javascript 将 span 类的 CSS 样式更改为 opacity: 1; 当图像（与 span 标签处于同一级别）应用了“活动”类时。

```
<div> 
     <img src="image1" class="active">
     <span class="fade">
         <p>Text</p>
     </span>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T08:28:06.283

在 CSS 中使用[相邻兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)：

```
img.active + span.fade {
    /* styles here */
}​ 
```

**演示：http:** [//jsfiddle.net/QBfPg/](http://jsfiddle.net/QBfPg/)

# javascript - 按钮的颜色，具有公共对象实例的事件侦听器

> ID：14089328
> 
> 赞同：0
> 
> 时间：2012-12-30T08:22:09.313
> 
> 标签：javascript, html, dom, javascript-events

这里是 Javascript 初学者...尝试添加类似于 css 伪类“Active”的功能，但使用的是原版 javascript。我试图在按下按钮时更改按钮的颜色，然后在释放按钮时恢复原始颜色。这就是我所拥有的：

```
myButton.addEventListener("mousedown", btnEvent);
myButton.addEventListener("mouseup", btnEvent);

...

btnEvent = function (e) {
    var storedColor;
    if (e.type == 'mousedown') {
        storedColor= e.target.style.backgroundColor;
        e.target.style.backgroundColor = someColorWhilePressed;
    } else if (e.type == 'mouseup') {
        e.target.style.backgroundColor = storedColor;
    };
}; 
```

这不起作用，在 mouseup 时，'storedColor' 是未定义的。我认为这是因为没有共享同一个函数对象，而是创建了两个？如何才能做到这一点？附加到同一元素的两个或多个事件侦听器是否可以共享一个可以在调用之间持久化数据的公共目标对象（函数）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:30:43.210

您的变体不起作用，因为`storedColor`它是局部变量，并且每次`btnEvent`调用函数时都会创建它。

您可以在函数中存储颜色`btnEvent`，因为函数是 JavaScript 中的对象。

演示：http: [//jsfiddle.net/LQSe4/](http://jsfiddle.net/LQSe4/)

```
var btnEvent = function (e) {
    if (e.type == 'mousedown') {
        btnEvent['storedColor'] = e.target.style.backgroundColor;
        e.target.style.backgroundColor = someColorWhilePressed;
    } else if (e.type == 'mouseup') {
        e.target.style.backgroundColor = btnEvent['storedColor'];
    };
};

myButton.addEventListener("mousedown", btnEvent);
myButton.addEventListener("mouseup", btnEvent); 
```

或者您可以将原始颜色存储在 DOM 元素中（演示：http: [//jsfiddle.net/rk33f/](http://jsfiddle.net/rk33f/)）：

```
var btnEvent = function (e) {
    if (e.type == 'mousedown') {
        e.target['storedColor'] = e.target.style.backgroundColor;
        e.target.style.backgroundColor = '#F00';
    } else if (e.type == 'mouseup') {
        e.target.style.backgroundColor = e.target['storedColor'];
    };
};

var myButton = document.getElementById('btn');

myButton.addEventListener("mousedown", btnEvent);
myButton.addEventListener("mouseup", btnEvent);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T08:38:04.507

在这种情况下，它特定于一个元素，您可能最好将颜色存储在元素本身上：

```
btnEvent = function (e) {
    var elm = e.target,
        color;

    if (e.type == 'mousedown') {
        elm.setAttribute("data-storedColor", e.target.style.backgroundColor);
        elm.style.backgroundColor = someColorWhilePressed;
    } else if (e.type == 'mouseup') {
        color = elm.getAttribute("data-storedColor"):
        if (color) {
            elm.style.backgroundColor = color;
            elm.removeAttribute("data-storedColor");
        }
    };
}; 
```

在那里，我们将颜色存储在[data-* 属性](http://www.w3.org/TR/html5/dom.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)上。您也可以只使用“expando”属性（您分配给元素的临时属性，例如`elm.mySpecialProperty = ...`），但 expandos 通常不是最佳实践。

* * *

旁注：

*   除非您在某处声明变量，否则您将[*成为隐式全局恐怖的*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)`btnEvent`牺牲品。要么在它前面放一个，或者更好的是，让它成为一个函数*声明*而不是一个表达式：[](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)*`var`*

     **```
    function btnEvent(e) {
        // ...implementation...
    } 
    ```** 
***   [`addEventListener`](https://developer.mozilla.org/en/docs/DOM/element.addEventListener)有第三个参数，你应该提供它。我似乎记得有些浏览器对此很挑剔（尽管任何现代浏览器都可能不是）。（你想要价值`false`。）**

# django - 如何让客户端知道服务器端出了什么问题？

> ID：14089331
> 
> 赞同：0
> 
> 时间：2012-12-30T08:22:17.403
> 
> 标签：django, error-handling

我是 Web 开发的新手，想知道这样做的常见做法是什么..

例如，当用户注册时，
服务器可能由于各种原因无法注册用户

```
1\. password doesn't match (ok.. could be validated on client side, but..)
2\. email is not valid
3\. email is already taken. 
```

我想保留任何`status code`生成的 http 服务器。比如 403, 500 ..
我只想`fail code`在响应中添加 ，以便客户端可以在状态代码不是 200 时查看失败代码。

我怎么能在 django 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T09:03:12.393

您决定在您的视图中生成哪个响应。对于此任务，最好使用 django 表单[https://docs.djangoproject.com/en/dev/topics/forms/#](https://docs.djangoproject.com/en/dev/topics/forms/#)并返回带有状态代码 200 的响应和带有错误描述的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T09:39:31.787

您列举的错误不应是服务器错误。他们仍然应该返回 200。

由于这是针对移动应用程序的，我假设您有一个返回 JSON 或 XML 响应的 API。

如果没有错误，您的响应将是这样的： {"success" : True}

如果有错误，您的回复将是 {"success" : False, "error_message" : "Email is not valid"}

# java - Java 正则表达式，捕获多个组

> ID：14089334
> 
> 赞同：1
> 
> 时间：2012-12-30T08:22:58.537
> 
> 标签：java, regex

使用我找到的 SO 上的示例代码和我正在搜索的字符串，我试图捕获飞机类及其座位组。输入文件的飞机配置格式为 J28W36Y156，表示 28 个 J（商务）舱座位、36 个 W（高级经济舱座位）和 156 个 Y（经济舱）座位。

我使用的Java代码如下：

```
 s = "J12W28Y156";
    patternStr = "(\\w\\d+)+";
    p = Pattern.compile(patternStr);
    m = p.matcher(s);
    if (m.find()) {
        int count = m.groupCount();
        System.out.println("group count is "+count);
        for(int i=1;i<=count;i++){
            System.out.println(m.group(i));
        }
    } 
```

正则表达式似乎只捕获最后一个班级座位配置，即。Y156。如何让这个正则表达式捕获多个组中的所有班级/座位组合。这是否与我需要指定的“贪婪”匹配有关？我希望输出类似于数组，例如。

{J12，W28，Y156}

多谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T08:34:46.150

您的第一个错误是对`\w`. 这是 javadoc 所说的：

`\w A word character: [a-zA-Z_0-9]`

这意味着`\w`捕获字母和数字。因此，在您的情况下，考虑到字母始终为大写，我将使用以下模式：

`[A-Z]\d+`

现在它将捕获第一个位置标记。所以你应该自己实现循环：

```
Pattern p = Pattern.compile("([A-Z]\\d+)");
Matcher m = p.matcher(str);
while (m.find()) {
    String place = m.group(1);
    // A12, W28 etc is here
} 
```

# php - LessCSS Assetic @import 缓存禁用

> ID：14089336
> 
> 赞同：1
> 
> 时间：2012-12-30T08:24:02.450
> 
> 标签：php, css, symfony, less, assetic

我有一个“小”问题正在从我那里偷走大量的时间。

我在 symfony2.1 中使用**带有**lesscss**过滤**器的**资产**。问题是，Assetic(?) 没有注意到使用`@import`. 例如：

全局.less：

```
@import "colors";

body {
    background: @backgroundColor;
} 
```

颜色.less：

```
@backgroundColor: #333; 
```

现在，如果我改变我`@backgroundColor`的*colors.less*，什么都不会发生。我必须在我的*global.less*文件中添加空格，然后它才会重新编译我的 CSS。

起初，我检查了它是否是 APC 加速器问题，所以我禁用了它，但事实并非如此。然后我检查了assetic github，发现了这个：[问题#79](https://github.com/kriswallsmith/assetic/issues/79#issuecomment-9810791)

我试过了，但故事还是一样，好像我什么都没做。然后我检查了我的**Assetic**版本是否有这个功能，因为我发现“ArrayCache”类在 2 个月前被合并了，所以我将*composer.json*设置为需要“dev-master”Assetic Bundle（它在中更新-12 月，因此它合并了新的 Assetic 版本）。仍然没有成功。

我现在没有主意了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T11:19:46.163

这是一个已知的错误，Assetic 无法找到导入的 less 文档的更改。

为了解决这个问题，我使用了仅在开发环境中工作的[LessElephantBundle 。](http://knpbundles.com/matteosister/LessElephantBundle)它将扫描更少的文件以进行更改，如果失败，您可以使用 force_compile var。

在assetic:dump --env=prod 上，你不需要它，assetic 会在没有缓存的情况下重新生成你所有的css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-06T04:38:31.260

2年后，这个问题仍然发生在我身上。我修复它的方法是在 PHPStorm 中设置一个 File Watcher，`touch`每次修改 @imports 引用的 LESS 文件之一时，它都会在主 LESS 文件上运行命令。这会破坏缓存，并重新编译 CSS 文件。

# c# - 刷新组合框项目，最简单的方法

> ID：14089342
> 
> 赞同：11
> 
> 时间：2012-12-30T08:25:54.090
> 
> 标签：c#, winforms, c#-4.0, combobox

我用谷歌搜索了很多。也发现了很多。不幸的是，没有什么是直截了当的，简单的，最重要的是，简单的。我希望有人写 a`method`并`List<string>`删除 previous `Items`，然后设置 this `List<string>`。

目前我有一个方法，但它不是没有错误的。

```
public void refreshList(List<string> list){
    albumList.Items.Clear();
    albumList.DataSource =  list;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-09-12T13:00:25.400

对于任何仍然想知道的人。

您可以使用 BindlingList 和 BindingSource。

```
BindingList<YOUR_CLASS_TYPE> bindinglist = new BindingList<YOUR_CLASS_TYPE>()
BindingSource bSource = new BindingSource();
bSource.DataSource = bindinglist;
ComboBox.DataSource = bSource; 
```

您将所有项目添加到您的绑定列表中，它们将在您的组合框中自动更新。

如果您想要一个可排序的组合框，您可以使用从 IList 继承的容器构造 BindingList，例如具有排序功能的 List。然后，您可以对该 IList 引用进行排序，它将再次反映在组合框中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-30T08:35:47.597

你不需要 albumList.Items.Clear();

这段代码工作得很好

```
public void refreshList(List<string> list){
    albumList.DataSource =  list;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-30T08:30:03.040

当绑定到数据源时，`Items.Clear();`不起作用。这应该是：

```
albumList.DataSource = list; 
```

或者可以肯定：

```
albumList.DataSource = null;
albumList.DataSource = list; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-09T15:44:24.570

如果您使用的是 DataSource，则需要清除项目以显示新列表。由于在使用 DataSource 时无法清除，因此需要先将其设置为 null。

```
albumList.DataSource = null;
albumList.Items.Clear();
albumList.DataSource = list; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-08T12:07:36.413

我一直在处理类似问题的任务

将数据源设置为 null 并将列表重新分配给它的初始解决方案根本不起作用。尽管它确实清除了项目并显示了列表中的新项目，但它使选择该列表中的任何项目成为不可能。但是在互联网上挖掘时，我发现了一个旧的 VB 解决方案，它最终可以工作并达到预期的效果。

这是您需要做的：

1.  在重新填充之前清除列表对象。请参见下面的代码：

    ```
    //adding the instantiation of the list object so you know what I'm clearing
    List<string> listExample = new List<string>();
    listExample.Clear(); 
    ```

2.  刷新组合框，以便它选择新列表。请参见下面的代码：

    ```
    if (albumList.DataSource == null) 
    { 
        albumList.DataSource = listExample; 
    } 
    else 
    {
        albumList.Refresh();
    } 
    ```

# ruby-on-rails - 在模型中获取当前用户详细信息的好方法是什么？

> ID：14089355
> 
> 赞同：0
> 
> 时间：2012-12-30T08:29:05.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, module, mongoid

我在我的 rails 应用程序中使用 devise gem 进行身份验证。我想在 after_create 回调中获取有关当前用户的某些信息。这怎么可能？
我的模型代码是：

```
class Department
  field :name
  after_create :create_news
  private
  def create_news
    @user = current_user
  end
end 
```

但是当我创建新部门时，出现以下错误。

```
undefined local variable or method `current_user' for #<Department:0x00000005b51648> 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T09:07:21.010

rails 中的访问控制是在控制器级别完成的，而不是模型级别。因此，rails 没有提供从模型代码内部访问当前用户、cookie 等的机制。如果您愿意，您可以通过参数将数据传送到模型中的方法。但是，这会忽略业内一些最优秀的程序员的设计决策，所以我认为这可能不是一个好的选择。

换句话说，不要做你想做的事。将如何做事的知识放在你的模型中，但将控制谁可以做这些事情放在控制器中。

另一方面，如果您出于某种原因尝试存储当前用户，那么您应该通过某种关联（或嵌套文档，因为您使用的是 mongo）来做到这一点。在这种情况下，不要`current_user`在模型内部使用，而是创建一个`attr_accessor`用户，将模型实例上的用户设置为`current_user`控制器中的用户，然后将其保存在回调中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-30T08:53:59.590

current_user 仅对控制器和视图可用。如果您的`department`模型已连接到`user`模型，您应该添加`belong_to`关联并可以执行类似的操作

```
after_create :create_news
def create_news
 @current_user = self.user
end 
```

# database - 可以使用 MS Notepad 创建用于网站集成的关系数据库吗？

> ID：14089361
> 
> 赞同：-1
> 
> 时间：2012-12-30T08:30:03.367
> 
> 标签：database, web

### **情况：**

我是喜欢学习在*记事本*中构建一切的人之一。我也使用 Visual Studio、Eclipse、Sublime、SQL Server 等，但发现记事本开发提供了对技能集的一定程度的掌握和工艺，即在没有编译帮助、智能感知依赖等的情况下跟踪错误。我的整体*个人*目标是能够使用标准文本编辑器开发整个业务级 Web 服务。这时候，我可以熟练地通过canvas/SVG完全从内存中完成HTML5/CSS3/Javascript和图形，但是现在是后端Asp.net/MVC和数据库学习的时候了。我知道 C#、T-SQL 和 RDB 设计，但仅限于 Visual Studio 方面。

### **问题：**

是否可以通过 CREATE TABLE 语法在 MS 记事本中手动创建功能齐全的 RDB，存储在服务器上，并作为动态系统集成到网站中？请注意，我不是指使用 CSV 文件，而是手动编码表、属性、关系等并运行查询。我意识到没有人再这样做了，因此我无法在 Google 上找到答案，但如果这里有任何老派的数据库/后端开发人员可以提供见解，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T08:37:06.053

是的，归根结底，关系数据库中的所有内容都可以从文本编辑器中创建。没有不能用于创建整个模式甚至从纯 SQL 文本文件填充数据的“缺失”命令。

# objective-c - NSDateFormater，iPhone 和 iPhone 模拟器上的不同结果

> ID：14089362
> 
> 赞同：0
> 
> 时间：2012-12-30T08:30:10.267
> 
> 标签：objective-c, ios, nsdate, nsdateformatter, nscalendar

当我在 iPhone 模拟器上运行此代码时，结果为 1（2012 年 12 月 30 日星期日），但在 iPhone 上运行时，结果为 7。为什么？

```
 NSCalendar *gregorijan = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

 NSDateFormater * dateFormat = [[NSDateFormatter alloc] init];
 NSDate *newDate = [NSDate date]; 
```

……

```
 [dateFormater setDateFormat:[NSString localizedStringWithFormat:@"e"]];

 NSLog (@"%d",[[dateFormater stringFromDate:self.newDate] integerValue]);

 return [[dateFormater stringFromDate:self.newDate] integerValue]; 
```

我在 iPhone 和模拟器上有不同的价值观......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:57:54.227

不要设置日期格式，而是设置日期和时间样式。短、​​中或长。这使用设备区域设置进行格式化。

# java - 使用 Ping 结果动态更改 JLabel

> ID：14089363
> 
> 赞同：0
> 
> 时间：2012-12-30T08:30:12.540
> 
> 标签：java, swing, ping, event-dispatch-thread

我想用简单的 Ping 生成的每个新字符串动态更改 JLabel，但无法弄清楚如何用 Ping 执行时传入的每个新字符串替换 JLabel 上的现有字符串。以下是我到目前为止所拥有的。到目前为止，它会替换 JLabel 的文本，但只是在 Ping 完成执行之后。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import java.io.*;

public class Ping extends JFrame implements ActionListener{

private JButton runButton = new JButton("Run");
private JLabel pingResult = new JLabel("Result"); 
private String results;

public Ping(){
    runButton.addActionListener(this);

    add(pingResult, BorderLayout.CENTER);
    add(runButton, BorderLayout.NORTH);

}

//Action Listener
public void actionPerformed(ActionEvent e)
{
    String buttonString = e.getActionCommand( );

    if (buttonString.equals("Run"))
    {
        //Execute Ping
        try {
            String line;
            Process p = Runtime.getRuntime().exec("/sbin/ping -c 4 www.google.com");
            BufferedReader input = new BufferedReader(
                new InputStreamReader(p.getInputStream()));

            while ((line = input.readLine()) != null) {
                results += line + "\n";
                pingResult.setText(results);
                //System.out.println(line);
            }

            input.close();
        }catch (Exception err){
            err.printStackTrace();
        }

    }else{
        System.exit(0);
    }
}

public static void main(String[] args) {
    Ping sp = new Ping();
    sp.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    sp.setSize(400, 400);
    sp.setVisible(true);
    sp.setLayout(new BorderLayout());
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T08:40:32.690

在事件调度线程上调用 setText。为此使用 SwingUtils.invokeLater。不要从 EDT 执行长时间的操作。正如您所经历的那样，这将导致您的应用程序冻结。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:53:43.517

您的代码冻结了 EDT（事件调度线程）。这就是 Ping 完成后更新 JLabel 文本的原因。你应该避免这样做。在不同的线程中运行持久的操作并使用 SwingUtils.invokeLater 更新它是一种解决方案。另一个是 SwingWorker 类的用法。你可以在这里找到[教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。

下面是第一个选项的示例。我使用 JTextArea 而不是 JLabel。

还有一件事你应该使用 ProcessBuilder 而不是 Runtime.exec()，[这](http://www.java-tips.org/java-se-tips/java.util/from-runtime.exec-to-processbuilder.html)是一篇很好的文章为什么。

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.nio.charset.Charset;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;
import javax.swing.SwingUtilities;

public class PingExample {
  private static final Logger logger = Logger.getLogger(PingExample.class.getName());

  public static void main(String[] args) {
    PingExample p = new PingExample();
    p.run();
  }

  private void run() {
    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        JFrame frame = new PingFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
      }
    });
  }

  private class PingFrame extends JFrame {
    private static final long serialVersionUID = 1L;

    private JTextArea textArea;

    private PingFrame() {
      super.setName("Ping Frame");
      this.addComponents();
      super.setSize(400, 240);
    }

    private void addComponents() {
      super.setLayout(new BorderLayout());

      this.textArea = new JTextArea(10, 0);
      JScrollPane scrollPane = new JScrollPane(this.textArea);
      super.add(scrollPane, BorderLayout.NORTH);

      JButton button = new JButton("Run");
      button.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
          new Thread(new Ping(PingFrame.this.textArea)).start();
        }
      });
      super.add(button, BorderLayout.SOUTH);
    }

    private class Ping implements Runnable {
      private JTextArea textArea;

      private Ping(JTextArea textArea) {
        this.textArea = textArea;
      }

      @Override
      public void run() {
        try {
          List<String> commands = new ArrayList<>(10);
          commands.add("ping");
          commands.add("www.google.com");

          ProcessBuilder builder = new ProcessBuilder();
          builder.command(commands);
          Process process = builder.start();

          try (
              BufferedReader br = new BufferedReader(
              new InputStreamReader(process.getInputStream(), Charset.defaultCharset()))) {
            String line = br.readLine();
            while (null != line) {
              final String text = line;
              SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                  Ping.this.textArea.append(text);
                  Ping.this.textArea.append("\n");
                }
              });
              line = br.readLine();
            }
          }

          process.waitFor();
          process.destroy();
        } catch (IOException | InterruptedException x) {
          logger.log(Level.SEVERE, "Error", x);
        }
      }
    }
  } 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T08:38:50.250

确切地说，它只会在 ping 完成后更新它。如果您想在完成之前执行此操作，则需要为其使用**不同的线程**。

# c++ - 如何让基类对象调用派生类非虚函数？

> ID：14089365
> 
> 赞同：1
> 
> 时间：2012-12-30T08:30:21.140
> 
> 标签：c++

我有一个带有纯虚函数的基类，我有一个派生类，其中定义了基类虚函数以及它自己的函数。

现在我已经将基类对象指向派生类，例如：

```
Base *bc =new Child(); 
```

我想使用这个对象调用子类方法（未在父类中定义或声明）。

但我收到编译器错误`memeberFunction not define in Base class`。

代码如下：

```
class Base
{
public:
  virtual void method1() = 0;
};

class child : public Base
{
public:
  virtual void method1() {}
  void Method2() { /* some implementation */ }
}; 
```

我怎样才能做到这一点？

```
bc->Method2(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T08:59:55.343

您想单独执行此操作的事实表明设计选择错误。在大多数情况下，使用 dynamic_cast 也表明设计选择不好。另请注意，dynamic_cast 非常慢，比调用虚函数慢得多。顺便说一句，您可以使用 static_cast 来投射派生树。这当然也是极其罕见的（CRTP 就是一个例子）。在这一点上，我还想知道：您怎么知道该对象是“孩子”而不是其他一些 Base-Derived 对象？如果你真的知道这一点，你为什么不首先和孩子*而不是基地*一起工作呢？（顺便看看智​​能指针，例如 unique_ptr。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:11:56.620

OOP 的一个原则是能够通过一组通用的函数查看一组不同的对象。为了解决您的问题，您可以使用动态或静态强制转换，但这样做，您会将 OOP 最有用的方面之一扔出窗外。

如果您开始为您的对象进行大量的左右转换，那么首先拥有继承层次（多态性）的目的是什么？

通常，当您在层次结构的基础上设置大量（纯）虚函数时，OOP 会很好地工作；即使其中一些或许多功能对某些子类没有用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T09:19:12.383

正确的方法是在基类上实现 Method2。如果你想以正确的方式去做，没有如果、但是或替代方案。错误的方法是使用 dynamic_cast，它会起作用，但它仍然不是正确的做法。

如果您绝对不能更改基类，那么您必须首先问自己为什么它不是基类的一部分。请注意，如果期望类能够在子类中执行此操作，但由于某种原因您不能在基类中执行此操作，那么正确的做法是将其实现为纯虚拟，或者有一个实现做一些合适的“这不是你要找的成员函数”类型的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T08:36:56.427

您应该将（使用 dynamic_cast）`bc`转换为`Child *`，然后调用`Method2()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T09:40:34.783

正确的做事方式实际上取决于您要表达的内容。假设您的类层次结构是：class Animal

类袋鼠是一种动物，它可以跳跃

现在用你的 Animal 指针你只知道它是一个动物。你不能让它跳跃，因为你知道指针可能指向一头大象。

您的三个选项：a）根本不让动物跳跃（改用袋鼠指针）b）使用dynamic_cast。这样你可以表达：如果是袋鼠，让它跳，否则不要 c) 将 jump() 添加到基类（动物）并让 Elephant::jump 抛出异常或什么都不做。

如果您还希望其他动物跳跃，则 b 解决方案变得非常复杂。许多 C++ 程序员也不喜欢 dynamic_cast。

# iphone - 如何在不使用 GPUImage 的情况下在 iOS 中的 UIImage 上添加鱼眼图像过滤器

> ID：14089369
> 
> 赞同：1
> 
> 时间：2012-12-30T08:30:44.360
> 
> 标签：iphone, objective-c, c, image-processing

我想在我的 iPhone 应用程序中为 UIImage 添加一些滤镜效果。这些滤镜是： 1\. 鱼眼滤镜效果。2\. 结晶图像效果（与六边形中的马赛克效果瓷砖相同） 3\. 电视图像过滤器。

我已经做了很多谷歌搜索并搜索了很多关于这些过滤器的内容，我得到了使用 GPUImage 效果的最大结果。我使用它，但存在 Cocoas2d 和 GPUImage 冲突的问题。在我的项目中，我已经使用了 cocoas 2d。所以我不能使用GPUImage，请不要建议使用GPUImage。

我想以其他方式实现这些过滤器。但我对此一无所知。

我已经使用 C 代码实现了许多过滤器，例如饱和度、模糊、棕褐色、阈值、锐度等等。但是使用了这 3 个过滤器（Fisheye、Crystalizem TV）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T01:32:17.493

也许您应该发布“解决 GPUImage 和 cocoas2d 问题”。

此外，您还可以完美地使用 GPUImage 仅从原始 UIImage 到过滤后的 UIImage，而与图层、视图或任何 UI 无关。

来自 GitHub：

```
UIImage *inputImage = [UIImage imageNamed:@"Lambeau.jpg"];

GPUImagePicture *stillImageSource = [[GPUImagePicture alloc] initWithImage:inputImage];
GPUImageSepiaFilter *stillImageFilter = [[GPUImageSepiaFilter alloc] init];

[stillImageSource addTarget:stillImageFilter];
[stillImageSource processImage];

UIImage *currentFilteredVideoFrame = [stillImageFilter imageFromCurrentlyProcessedOutput]; 
```

在这种情况下，cocoas2d 应该无法识别 inputImage 和 currentFilteredVideoFrame。

# java - 带有 1 个 SSB 和 1 个支持 jar 的简单 EAR，不会部署在 JBoss AS 7.1.1 上

> ID：14089370
> 
> 赞同：0
> 
> 时间：2012-12-30T08:30:48.237
> 
> 标签：java, jboss, java-ee-6, packaging, ejb-3.1

我尝试在 JBoss AS 7.1.1 上部署一个非常简单的 EJB3 项目，但在部署时出现以下错误：

```
04:04:07,806 INFO  [org.jboss.as.repository] (HttpManagementService-threads - 3) JBAS014900: Content added at location /usr/servers/jboss-as-7.1.1.Final/standalone  /data/content/bf/96c04e5d7d6d2147cd1c85eb6f7cc18805dfcb/content
04:04:13,367 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015876: Starting deployment of "simplecalculatorejb.ear"
04:04:13,453 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015876: Starting deployment of "simplecalculatorejb.jar"
04:04:13,454 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015876: Starting deployment of "lib/simplecalculatorejbcommon.jar"
04:04:13,707 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015877: Stopped deployment lib/simplecalculatorejbcommon.jar in 3ms
04:04:13,708 INFO  [org.jboss.as.server] (HttpManagementService-threads - 3) JBAS015870: Deploy of deployment "simplecalculatorejb.ear" was rolled back with failure message {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.deployment.unit.\"simplecalculatorejb.ear\".PARSEjboss.deployment.subunit.\"simplecalculatorejb.ear\".\"lib/simplecalculatorejbcommon.jar\".STRUCTUREMissing[jboss.deployment.unit.\"simplecalculatorejb.ear\".PARSEjboss.deployment.subunit.\"simplecalculatorejb.ear\".\"lib/simplecalculatorejbcommon.jar\".STRUCTURE]"]}
04:04:13,715 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2)  JBAS015877: Stopped deployment simplecalculatorejb.jar in 11ms
04:04:13,723 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015877: Stopped deployment simplecalculatorejb.ear in 19ms
04:04:13,729 INFO  [org.jboss.as.controller] (HttpManagementService-threads - 3) JBAS014774: Service status report
JBAS014775:    New missing/unsatisfied dependencies:
  service jboss.deployment.subunit."simplecalculatorejb.ear"."lib/simplecalculatorejbcommon.jar".STRUCTURE (missing) dependents: [service jboss.deployment.unit."simplecalculatorejb.ear".PARSE] 
```

我的耳朵是这样的：

```
simplecalculatorejb.ear 

 --- simplecalculatorejb.jar

 --- lib/simplecalculatorejbcommon.jar

 --- META-INF/application.xml 
```

和 application.xml 看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE application PUBLIC "-//Sun Microsystems, Inc.//DTD J2EE Application 1.3//EN"
    "http://java.sun.com/dtd/application_1_3.dtd">
<application>
    <display-name>simplecalculatorear</display-name>
    <module>
        <ejb>simplecalculatorejb.jar</ejb>
    </module>
    <module>
        <java>lib/simplecalculatorejbcommon.jar</java>
    </module>
</application> 
```

关于为什么会这样失败的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:34:21.673

您不应该在 application.xml 中包含“支持 jar”。您使用的`<module><java>`标签用于所谓的*Application Client Container*。

只需删除该模块声明。/lib 已经是 Java EE 将扫描实用程序 jar 的默认目录（就像战争档案中的 WEB-INF/lib 一样）。

# windows - Windows批处理文件将某些文件类型从子目录复制到一个文件夹并重命名

> ID：14089371
> 
> 赞同：2
> 
> 时间：2012-12-30T08:30:54.630
> 
> 标签：windows, batch-file, cmd, copy

我曾尝试制作一个批处理脚本，将位于 G:(此处为随机命名的子文件夹)\000.mpg 中的所有 *.mpg 文件复制到 E:\PVR。

```
for /R g:\ %%f in (*.mpg) do copy %%f E:\PVR\ 
```

问题是源文件名相同，而它们是所有子文件夹中具有相同名称的不同文件。该脚本会覆盖以前的文件，因此在批量复制后我只有最后一个文件。请帮我用计数器或其他东西重命名复制的文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T21:52:56.017

这应该可以解决问题。

```
@echo off
setlocal disableDelayedExpansion
set "src=."
set "dest=\temp"
set mask=*.mpg
for /r "%src%" %%F in (%mask%) do (
  if exist "%dest%\%%~nxF" (call :copyDup "%%F") else copy "%%F" "%dest%" >nul
)
exit /b

:copyDup
set /a cnt=1
:loop
set /a cnt+=1
if exist "%dest%\%~n1(%cnt%)%~x1" goto :loop
copy %1 "%dest%\%~n1(%cnt%)%~x1" >nul
exit /b 
```

# ms-access - 使用记录集填充列表框并比较日期

> ID：14089376
> 
> 赞同：4
> 
> 时间：2012-12-30T08:32:05.647
> 
> 标签：ms-access, vba

我的程序有 3 个字段，即标题、开始日期和结束日期供用户输入。我希望填充我的列表框，该列表框称为“filteredResults”，其中包含的记录的磁贴等于用户输入的磁贴或属于日期范围的磁贴。

我可否知道：

1）如何使用从查询中获得的记录集填充列表框？

2）如何比较查询中的日期？

非常感谢！

```
Private Sub FilterProj_Click()
Dim title As String, startDate As Date, endDate As Date
Dim db As DAO.Database
Dim rs As DAO.Recordset
Set db = CurrentDb
Set rs = db.OpenRecordset("SELECT * FROM Project WHERE  ORDER BY [ProjectId] DESC")
filteredResults.Recordset = rs 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-30T08:53:38.773

对于问题 1：

直接从查询中填充：

```
Me.mylistbox.rowsource = _
  db.OpenRecordset("SELECT titles FROM Project _
           WHERE title = '" & parameter & "' ORDER BY [ProjectId] DESC") 
```

使用 Recordset 对象填充：

```
If (rs.RecordCount <> 0) Then 
   Do While Not rs.EOF
      mylistbox.Items.Add(rs.Fields(0).Value)
      rs.MoveNext()
   Loop
End IF 
```

另一种方法：

```
Dim db As DAO.Database
Dim rs As DAO.Recordset
Dim qdf As DAO.QueryDef
Dim strSQL As String

strSQL = "SELECT titles from Projects _
       WHERE title = '" & parameter & "' ORDER BY [ProjectId] DESC"

Set db = CurrentDb
Set qdf = CurrentDb.CreateQueryDef("", strSQL)
qdf.Connect = strConn

Set rs = qdf.OpenRecordset()

Set Me.mylistbox.Recordset = rs 
```

问题2：

不是很清楚。我假设您需要`parameterized`查询。通过将用户的值设置为`where, and`子句。

```
 db.OpenRecordset("SELECT titles FROM Project _ 
      WHERE title = '" & parameter & "' ORDER BY [ProjectId] DESC") 
```

或者您可以使用以下文章自行设置`parameter`。`query design view`

*   [来自MSDN](http://office.microsoft.com/en-sg/access-help/using-parameters-with-queries-and-reports-HA001117077.aspx)的参考资料：使用参数化查询

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T16:46:24.193

将`filteredResults`列表框的行源属性设置为使用与此类似的策略的查询。

```
SELECT p.ProjectId, p.title, p.date_field
FROM [Project] AS p
WHERE
    p.title = Forms![YourForm]![txtTitle]
    OR
        (
                p.date_field >= Forms![YourForm]![txtStartDate]
            AND p.date_field <= Forms![YourForm]![txtEndDate]
        )
ORDER BY p.ProjectId DESC 
```

每当您想要更新 的内容`filteredResults`以反映对用户提交的标题、开始日期和/或结束日期的更改时，您可以重新查询列表框：

```
Me!filteredResults.Requery 
```

您可以从命令按钮或文本框的更新后事件触发重新查询。

注意我假设您的`Project`表格包含一个名为的文本字段`title`和一个名为的日期/时间字段`date_field`。我为文本框起了自己的名字 ( `txtTitle, txtStartDate, txtEndDate`)。`txtStartDate`将和的 Format 属性设置为“General Date” `txtEndDate`。用您的表单名称替换`YourForm`.

# android - 如何停止当前播放的铃声？

> ID：14089380
> 
> 赞同：11
> 
> 时间：2012-12-30T08:32:20.240
> 
> 标签：android, ringtone

我正在编写一个应用程序，有时会触发应该播放铃声的提醒。我可以启动铃声，但无法停止。我的片段中有一个关闭方法，应该停止当前播放的铃声并关闭活动，但它不能正常工作。这是它的作用：

```
 RingtoneManager ringMan = new RingtoneManager(getActivity());
    ringMan.stopPreviousRingtone();
    getActivity().finish(); 
```

该方法确实被执行并且活动关闭，但铃声只是继续播放。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-04T12:15:01.370

### stopPreviousRingtone() 不停止铃声的原因

我发现只有`RingtoneManager.stopPreviousRingtone()`在`Ringtone`同**一个`RingtoneManager`实例**创建的情况下才能停止使用铃声。确认这一点的一种简单方法是创建一个带有 a`RingtoneManager`和三个按钮的活动：

1.  单击第一个按钮将使用`RingtoneManager`开始铃声。
2.  单击第二个按钮将调用`stopPreviousRingtone()`.`RingtoneManager`
3.  单击第三个按钮将调用`stopPreviousRingtone()`完全不同的`RingtoneManager`实例。

完成此操作后，您应该会发现只有单击第二个按钮才会停止铃声。

### 如果您有权访问原始铃声实例，则停止铃声

如果您有权访问原始`Ringtone`实例，则只需调用该`stop()`方法：

```
Ringtone ringtone = RingtoneManager.getRingtone(getActivity());
ringtone.play();
...
ringtone.stop(); 
```

### 在保留对原始铃声的引用时停止铃声是不可能的

您可以尝试创建一个[服务](http://developer.android.com/guide/components/services.html)，该服务将在铃声启动时加载和播放铃声，并在铃声被销毁时停止铃声。这是一个例子：

```
public class RingtonePlayingService extends Service
{
    private Ringtone ringtone;

    @Override
    public IBinder onBind(Intent intent)
    {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId)
    {
        Uri ringtoneUri = Uri.parse(intent.getExtras().getString("ringtone-uri"));

        this.ringtone = RingtoneManager.getRingtone(this, ringtoneUri);
        ringtone.play();

        return START_NOT_STICKY;
    }

    @Override
    public void onDestroy()
    {
        ringtone.stop();
    }
} 
```

然后，您只需启动服务即可在后台[启动](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)铃声：

```
Intent startIntent = new Intent(context, RingtonePlayingService.class);
startIntent.putExtra("ringtone-uri", ringtoneUri);
context.startService(startIntent); 
```

而且，要停止铃声，只需[停止](http://developer.android.com/reference/android/content/Context.html#stopService%28android.content.Intent%29)服务：

```
Intent stopIntent = new Intent(context, RingtonePlayingService.class);
context.stopService(stopIntent); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-23T03:40:17.857

您必须创建一个从 Service 类扩展的类，下面给出了演示代码

请注意，这是我的大学项目的代码，它用于使用来自 BroadcastReciever 扩展 Activity 的铃声启动默认警报，并从不同的正常 Android Activity 停止铃声。

**服务类代码：**

```
import android.app.Service;
import android.content.Intent;
import android.media.Ringtone;
import android.media.RingtoneManager;
import android.net.Uri;
import android.os.IBinder;
public class AlarmRing extends Service {
static Ringtone r;

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    //activating alarm sound
    Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
    r = RingtoneManager.getRingtone(getBaseContext(), notification);
    //playing sound alarm
    r.play();

    return START_NOT_STICKY;
}
@Override
public void onDestroy()
{
    r.stop();
}
} 
```

**Activity 调用服务的代码：**

```
Intent i = new Intent(context, AlarmRing.class);
context.startService(i); 
```

**活动结束或关闭服务：**

```
Intent i = new Intent(this, AlarmRing.class);
stopService(i);` 
```

注意：请注意上下文参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T12:25:15.023

像这样使用应用程序上下文创建 RingtoneManager 对象

```
RingtoneManager ringMan = new RingtoneManager(getApplicationContext());
    ringMan.stopPreviousRingtone(); 
```

和 RingTone 对象也只能这样创建。

```
mRingTome = RingtoneManager.getRingtone(getApplicationContext(), notification);
            mRingTome.play(); 
```

它对我有用。

# macos - Mac OS 音频框架

> ID：14089381
> 
> 赞同：1
> 
> 时间：2012-12-30T08:33:09.513
> 
> 标签：macos, audio, core-audio, audiounit

有CoreAudio.framework；CoreAudioKit.framework; AudioUnit.framework; AudioToolbox.framework。

我最关心AudioUnit和AudioToolbox；好像AudioUnit是最底层的，AUGraph是基于AudioUnit的。

因为 AUGraph 驻留在 AudioToolbox.framework 中，所以我希望 AudioToolbox.framework 依赖于 AudioUnit.framework。但是，当我使用 otool -L 检查依赖时，完全是另一种方式，即：AudioUnit 依赖于 AudioToolbox。

这让我很困惑。

有没有人能解释一下mac OS中的四个Audio框架？

# javascript - javascript eval() 可以在使用前取变量名并替换它们吗

> ID：14089388
> 
> 赞同：0
> 
> 时间：2012-12-30T08:34:31.220
> 
> 标签：javascript, jquery, spry

非常感谢阅读，

问题背景：在多个手风琴面板中使用 spry 的搜索功能。

我正在尝试使用`eval`（因为这是我能想到的唯一方法）来完成这个简单的事情：

```
var ds1 = new Spry.Data.XMLDataSet("ajaxxmllogdaneiz1.php",'root/row]');

var ds2 = new Spry.Data.XMLDataSet("ajaxxmllogdaneiz2.php",'root/row]');

var str1="ds";

var str2= 1;

var result= str1.concat(str2);

//result is now ds1

eval ("result.filter(filterFunc)"); 
```

我想`ds1.filter(filterFunc)`被叫但`result.filter(filterFunc)`被叫。有没有办法`ds1.filter(filterFunc)`被调用`eval`或替代（Jquery？）？非常感谢恐龙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T08:41:51.750

你应该使用这个：

```
eval(result + ".filter(filterFunc)"); 
```

但是你真的应该考虑*根本不* `eval`考虑。我不明白为什么这会是可取的。如果必须，我建议将要操作的变量存储在已知位置。例如：

```
​var Foo = function() {
    return {
        "bar": function() {
            console.log("baz");
        }
    }
};

var foo_list = {};
foo_list["foo"] = Foo();

var part_1 = "fo";
var part_2 = "o";

foo_list[part_1 + part_2].bar(); 
```

[小提琴](http://jsfiddle.net/AYGkw/1/)

（您也可以以`window`这种方式存储它，但我也建议不要这样做。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T08:42:40.270

如果您尝试访问的变量在全局范围内，那么您可以使用：

```
var result = 'ds1';

window[result].filter(filterFunc); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T08:41:42.527

要使用 of`result`而不是`"result"`本身的值，您可以执行以下操作：

`eval (result+".filter(filterFunc)");`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-20T22:51:48.863

您不需要将 eval 用于执行完全任意代码之外的任何事情。

您可能希望将`XMLDataSet`s 存储在数组中。

```
var datasets = [];
for (var n=1; n<=2; n++) {
    datasets.push(new Spry.Data.XMLDataSet("ajaxxmllogdaneiz" + n + ".php", "root/row"));
}

for (var i=0; i<datasets.length; i++) {
    var ds = datasets[i];
    ds.filter(filterFunc);
} 
```

# c++ - QCheckBox->isChecked() 问题

> ID：14089389
> 
> 赞同：0
> 
> 时间：2012-12-30T08:34:33.090
> 
> 标签：c++, qt, qcheckbox

选中复选框时，以下代码不起作用。无论复选框是否被选中，它都会跳转到“else”语句。

```
 void MainWindow::runButtonClicked()

        {
            if (MainWindow::betAllRed->isChecked()==true){
                red.didBet=true;
                qDebug()<<"bet Red true";
            } else{
                qDebug()<<"red not checked";
            }
        } 
```

这里有什么明显的问题还是其他地方有问题？我是否需要连接插槽才能获得检查状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T09:41:49.767

问题是您访问 betAllRed 复选框的方式。如果您使用的是设计器，则可以使用 Ui 访问它；

```
if(ui->betAllRed->isChecked()) 
```

如果您使用自己的代码：

```
QComboBox *betAllRed = new QComboBox(this); 
```

只需使用以下方式访问它：

```
if(this->betAllRed->isChecked()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:26:49.593

我怀疑你做错了，你实际上有两个`betAllRed`字段：你已经创建和初始化`QCheckBox* MainWindow::betAllRed`，然后你在 MainWindow::ui 中还有一个复选框（可能具有相同的名称，如果你在 Designer 中重命名它，否则使用默认值设计师创建的名称）。

如果是这种情况，请删除您自己的`betAllRed`，然后修复`ui->betAllRed`用于访问复选框的代码（如果它现在具有默认名称，则可能在 Designer 中重命名该复选框）。

然后是关于您的这一行的编码风格说明：

```
if (MainWindow::betAllRed->isChecked()==true){ 
```

那条线就等于这条线，它会更短更清晰：

```
if (betAllRed->isChecked()) { 
```

# wcf - 从实体框架返回结果时，WCF 调用失败

> ID：14089390
> 
> 赞同：3
> 
> 时间：2012-12-30T08:34:37.303
> 
> 标签：wcf, entity-framework, communicationexception

我使用实体框架和 WCF 创建了一个简单的测试解决方案。我在服务合同中只有一个函数，称为`GetAllCustomers()`从数据库中检索客户并将其返回给客户端。客户端应用程序调用该函数并将客户名称写入控制台。

当我`GetAllCustomers()`通过代理从客户端调用时，我收到一条`CommunicationException`消息，

> *接收对 的 HTTP 响应时出错`http://localhost:8000/Service1`。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。*

内部例外是`System.Net.WebException`：

> *底层连接已关闭：接收时发生意外错误。*

内部异常的下一级是`System.IO.IOException`：

> *无法从传输连接读取数据：现有连接被远程主机强行关闭。*

最后的内部异常是`System.Net.Sockets.SocketException`：

> *现有连接被远程主机强行关闭*

这是客户端代码：

```
static void Main(string[] args)
{
    Console.WriteLine("Press Enter to begin.");
    Console.ReadLine();

    ServiceReference1.Service1Client MyService = new ServiceReference1.Service1Client();

    CUSTOMER[] cl = MyService.GetAllCustomers();

    foreach (CUSTOMER c in cl)
    {
        Console.WriteLine(c.CUSTFNAME + " " + c.CUSTLNAME);
    }

    Console.WriteLine("Press Enter to exit.");
    Console.ReadLine();
} 
```

这是主机应用程序代码：

```
static void Main(string[] args)
{
    ServiceHost hostA = null;

    try
    {
        hostA = new ServiceHost(typeof(Service1), new Uri("http://localhost:8000") );
        hostA.AddServiceEndpoint(typeof(IService1), new BasicHttpBinding(), "Service1");

        hostA.Open();

        Console.WriteLine();
        Console.WriteLine("Host started.  Press Enter to terminate host.");
        Console.ReadLine();

    }
    finally
    {
        if (hostA.State == CommunicationState.Faulted)
            hostA.Abort();
        else
            hostA.Close();
    }
} 
```

这是该函数的服务库代码：

```
public HashSet<CUSTOMER> GetAllCustomers()
{
    var db = new TRS11Entities();

    HashSet<CUSTOMER> TheCusts = new HashSet<CUSTOMER>();

    foreach (CUSTOMER c in db.CUSTOMERs)
    {
        TheCusts.Add(c);
    }

    //CUSTOMER TestCust1 = new CUSTOMER();
    //TestCust1.CUSTFNAME = "Joe";
    //TestCust1.CUSTLNAME = "Schmoe";
    //CUSTOMER TestCust2 = new CUSTOMER();
    //TestCust2.CUSTFNAME = "Peter";
    //TestCust2.CUSTLNAME = "Pumpkineater";
    //TheCusts.Add(TestCust1);
    //System.Threading.Thread.Sleep(45000);
    //TheCusts.Add(TestCust2);

    return TheCusts;
} 
```

奇怪的是，如果我通过用下面注释掉的代码替换 foreach 块来绕过数据库，它会很好用！

我首先认为这可能是数据库查询时间过长的超时问题。但是，我的测试代码在那里有 45 秒的睡眠，它仍然可以将数据返回给客户端。原始代码仅在大约 3 秒后给出异常。

此外，如果我通过直接实例化 WCF 服务而不是通过端点/代理来调用原始函数（使用 foreach 块），它也可以正常运行并返回数据库中的所有客户。

最后，我认为可能是返回的数据集太大的问题，所以我修改了foreach块并在将前5个客户添加到结果后插入了一个break语句，我仍然得到了异常。

那么，还有什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T04:10:42.123

很难说可能是什么问题。您可以打开 WCF 跟踪和诊断，这可以为您提供更多详细信息。

为了让您快速上手 - 在您的网络（或应用程序）配置中：

1) 在配置元素下的任意位置添加 System.Diagnostics 部分。您可以将路径替换为您希望存储文件的路径。

```
<system.diagnostics>
    <sources>
      <source name="System.ServiceModel.MessageLogging" switchValue="Warning, ActivityTracing">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="ServiceModelMessageLoggingListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
      <source name="System.ServiceModel" switchValue="Warning, ActivityTracing" propagateActivity="true">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="ServiceModelTraceListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add initializeData="C:\temp\services_messages.svclog" type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" name="ServiceModelMessageLoggingListener" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack">
        <filter type="" />
      </add>
      <add initializeData="C:\temp\services_tracelog.svclog" type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" name="ServiceModelTraceListener" traceOutputOptions="LogicalOperationStack, DateTime, Timestamp, ProcessId, ThreadId, Callstack">
        <filter type="" />
      </add>
    </sharedListeners>
  </system.diagnostics> 
```

2) 在 system.ServiceModel 下添加以下内容：

```
<diagnostics wmiProviderEnabled="false">
      <messageLogging logEntireMessage="true" logMalformedMessages="true" logMessagesAtServiceLevel="true" logMessagesAtTransportLevel="true" />
    </diagnostics> 
```

3) 在 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin\ 下启动 SvcTraceViewer.exe。加载消息跟踪 (services_messages.svclog) 和服务跟踪日志 (services_tracelog.svclog)。您可以在工具中拖放文件或打开一个然后添加另一个

4) 寻找问题的红色粗体字母。

如果您想让编辑 WCF 配置的体验更令人满意，您可以使用与 SvcTraceViewer.exe (#3) 位于同一文件夹下的 SvcConfigEditor.exe。只需打开配置文件，您应该会看到 Diagnostics 文件夹，它允许您启动/停止和配置诊断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T23:30:52.733

我认为问题在于 Entity Framework 中的 CUSTOMER 类型包含详细记录（销售等）的集合（容器类型），这使得数据太大。我最终创建了一个没有这些的新类型，之后它运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T04:40:06.450

如果 DataContext.ContextOptions.ProxyCreationEnabled = true 更改为 false

DataContext.ContextOptions.ProxyCreationEnabled = true

或者

返回克隆客户

公共类客户：ICloneable { Public int Id { get; 放; }

```
public object Clone()
 {
     var cloneObject = new Customer();
      cloneObject.Id=this.Id; 
      return cloneObject;
 } 
```

}

public HashSet GetAllCustomers() { var db = new TRS11Entities(); HashSet TheCusts = new HashSet(); foreach (db.CUSTOMERs 中的客户 c) { TheCusts.Add(c.Clone()); }

```
//CUSTOMER TestCust1 = new CUSTOMER();
//TestCust1.CUSTFNAME = "Joe";
//TestCust1.CUSTLNAME = "Schmoe";
//CUSTOMER TestCust2 = new CUSTOMER();
//TestCust2.CUSTFNAME = "Peter";
//TestCust2.CUSTLNAME = "Pumpkineater";
//TheCusts.Add(TestCust1);
//System.Threading.Thread.Sleep(45000);
//TheCusts.Add(TestCust2);

return TheCusts; 
```

}

# php - 使用 5 或 10 英里的邮政编码进行搜索

> ID：14089393
> 
> 赞同：3
> 
> 时间：2012-12-30T08:34:49.660
> 
> 标签：php, mysql, latitude-longitude

> **可能重复：**
> [mySQL 选择 y 范围内 x 公里/英里内的邮政编码](https://stackoverflow.com/questions/4011944/mysql-select-zipcodes-within-x-km-miles-within-range-of-y)

我有 2 个表，第一个是邮政编码和类别，第二个是邮政编码、纬度和经度。现在我想搜索...在我转到我的问题
**Table1 (uk_data)**
**comp_post_code** cat1 **cat2之前听到的是表格格式**

* * *

**表2 (uk_pc)**
**邮政编码** 纬度 **经度**

* * *

现在我想通过成本代码搜索 cat1 和 cat2 ......我已经做了......在这里

```
SELECT * from uk_data where 
cat10 like :comp_post_code  AND (
cat1 like :cat OR
cat2 like :cat) 
```

这给了我这个邮政编码上的结果，但现在我想搜索 5 个地雷和 10 英里区域内的项目，我该怎么做？
我知道如何计算邮政编码之间的距离，但这里是代码

```
function distance($lat1, $lon1, $lat2, $lon2, $unit) { 

  $theta = $lon1 - $lon2; 
  $dist = sin(deg2rad($lat1)) * sin(deg2rad($lat2)) +  cos(deg2rad($lat1)) * cos(deg2rad($lat2)) * cos(deg2rad($theta)); 
  $dist = acos($dist); 
  $dist = rad2deg($dist); 
  $miles = $dist * 60 * 1.1515;
  $unit = strtoupper($unit);

  if ($unit == "K") {
    return ($miles * 1.609344); 
  } else if ($unit == "N") {
      return ($miles * 0.8684);
    } else {
        return $miles;
      }
} 
```

但不知道我怎样才能让这个循环到小鸡表 2 以获得 5 或 10 英里的结果......请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T08:56:38.940

我认为类似的问题在[这里](https://stackoverflow.com/questions/4011944/mysql-select-zipcodes-within-x-km-miles-within-range-of-y)。

不确定，但你可以在里面找到的东西`PHP`也类似于[`Geokit gem of RoR`](https://github.com/imajes/geokit-rails)

# wpf - MVVM 中的权限 (ACL) 感知 GUI

> ID：14089400
> 
> 赞同：0
> 
> 时间：2012-12-30T08:35:52.797
> 
> 标签：wpf, user-interface, mvvm, acl

MVVM 基于绑定和命令。我知道 , 和 commands 的绑定`IsEnabled`可以`IsReadOnly`帮助`Visibility`实现`CanExecute`将权限考虑在内的 GUI。
然而，我对这种方法有些怀疑。

第一个是需要伴随 VM 的每个涉及 ACL 逻辑的属性`CanRead`| `CanWrite`可以绑定到相应控件的属性。这意味着绑定的大量基础结构编码和 XAML 类型。解释原因的动态工具提示也可以添加到列表中。

第二个是 XAML 中的错误输入会破坏安全性，尤其是在读取权限方面：控制将保持可见。在大多数（不是所有）情况下，这个问题可以通过业务逻辑层解决，该层将属性保留为默认值。但是在“返回的路上”（VM->BL）系统必须只关心允许的属性。

安全被称为横切关注点。我了解具有拦截功能的 AOP 或 DI 如何帮助提高 BL 级别的安全性，但我没有关于在 MVVM 设计模式的上下文中为 GUI 实现所有这些东西的好主意。

请您分享您解决此问题的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:22:50.403

我所做的是在 ViewModel 级别创建“字段”的概念。这些字段本质上是“模型的每个属性的属性”的抽象。

例如，“Order”视图模型中的字段“OrderNumber”将其 ReadOnly 属性设置为 True，并且“帐户”视图模型中的字段“名称”将其必需属性设置为 true（这更像是业务逻辑而不是一种安全性，但无论如何我将这些东西封装在字段中）。

然后，我在一个特殊的类中为 XAML 使用创建了几个附加属性，以及一个特殊的容器（“字段编辑器”），它的默认样式有一堆指向 VM 中这些字段的绑定。例如，当“IsReadOnly”属性发生更改时，容器（实际上是一个 ContentControl）会沿着其可视子项向下移动，并将任何 TextBox、ComboBox 等设置为只读状态（使用巨大的 switch 语句，因为您可能想要为不同的控件设置不同的属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:39:27.590

根据您的应用程序，这可能会有些困难，但我通常使用 Prism 模块解决此类问题。显然，如果您不使用 Prism，这将毫无帮助。

例如，如果用户只有对某些数据的只读访问权限，我会在负责的模块中加载一个完全不同的视图。或者，如果他们无权访问，则该模块不会加载任何内容。这样，您可以为只读和读写访问编写单独的视图。

我想你可以走得更远，也可以换掉 ViewModel，但我不需要这样做。

需要注意的是，我的应用程序使用用户的 Windows 凭据（以及我们公司 AD 中的成员角色）进行身份验证，因此可以在启动时进行处理。如果您有不同的登录/认证系统，您可能需要修改引导程序以在加载模块之前等待登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T20:25:57.943

在我看来，MVVM其实是解决你刚刚解决的问题的好方法。由于 MVVM 实际上是将 UI 与代码分离的问题，因此您可以真正在 UI（视图）中做“任何”您喜欢的事情，并将所有逻辑放置到模型中。这是控制中的特权和“流”之类的逻辑。

这样，编码器（通常设计不佳）可以创建控件的逻辑。比如用户什么时候可以保存、删除、打开，以及检查权限和设计师不需要知道的东西。设计者（通常不能很好地编码）可以决定用户如何使用控件。就像应该从按钮、上下文菜单或工具栏进行保存一样。模型/逻辑甚至可以放置在设计人员看不到的自己的 DLL 中，并且只使用可用的可用属性。

责任完全由编码人员承担，并置于模型中。

对我来说，MVVM 不是“基于绑定和命令”。绑定和命令可以很好地用于非 MVVM 编码方式。但我知道这可能会让人感到困惑，因为 MVVM 促使程序员比平时更多地使用命令和绑定。但事实并非如此。这是关于分离逻辑和 UI，所以像你解释的问题可能会以最好的方式解决:-)

这至少是我对 MVVM 以及权限和访问控制的想法。

希望我没有完全误解你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T15:54:34.067

根据我的观点和经验，UI 永远不应该用于强制安全，而只是根据您的业务逻辑 (BL) 向用户展示他们能做什么和不能做什么。这可以防止 XAML 拼写错误导致违规的问题，此外，有大约十亿个实用程序和黑客可以分析/使 UI 执行用户希望它执行的操作。

例如： http:
[//newtipstrik.wordpress.com/2012/02/06/win-enabler/](http://newtipstrik.wordpress.com/2012/02/06/win-enabler/)
[http://snoopwpf.codeplex.com/](http://snoopwpf.codeplex.com/)

总之，是的，您的 UI 应该只“了解”安全上下文，而不是实现它的全部或部分。

# performance - 嵌套`if`s会提高性能吗？

> ID：14089401
> 
> 赞同：2
> 
> 时间：2012-12-30T08:36:08.440
> 
> 标签：performance, optimization, if-statement, conditional-statements, short-circuiting

如果我有这个代码：

```
if (isFoo() && isBar())
{
    ...
} 
```

程序会先计算第一个条件，再计算第二个条件，然后判断是通过还是跳过下面的块。

但是，如果我像这样嵌套条件：

```
if (isFoo())
    if(isBar())
    {
        ...
    } 
```

现在它检查第一个条件，如果它是假的，它不会打扰第二个条件。

如果第二个条件（作为一个函数）是一个耗时的内存昂贵的猪，那么嵌套它似乎更好。

这是真的？我以前从未见过这样的代码，我在第一个示例之后做了一个假设，但 IMO 很有可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T09:11:27.427

这取决于编程语言。

大多数现代/流行语言都支持[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)，这意味着程序不会评估整个表达式，而是在获得整个表达式的结果后立即停止评估（其他人已经给出了示例）。

# 但也有例外

我知道**不支持**短路评估的两种语言是 Microsoft VB(6) 和 VB.NET。

VB6根本不支持，所以这里嵌套`If`s if是常用的优化技术。此外，在诸如

`If Not rs Is Nothing And Not rs.EOF`

不使用嵌套`If`s 会导致执行错误，而`rs`is `Nothing`。

`VB.NET`引入了两个新的逻辑运算符[`AndAlso`](http://msdn.microsoft.com/en-us/library/cb8x3kfz%28v=vs.80%29.aspx)，[`OrElse`](http://msdn.microsoft.com/en-US/library/ea1sssb2%28v=vs.80%29.aspx)它们支持短路评估。

标准`VB.NET` `And`和`Or`运营商不支持短路评估，这是新手开发人员常见的错误来源。

# 优化

在这两种情况下（语言支持而不是短路评估），您都可以检查表达式，以便*更快地评估 first*。

因此，而不是（如果用户是女性，使用偶数键并且它已登录，则检查 DB）：

```
if (db.getUserSex() == FEMALE && userKey % 2 == 0 && userKey % 2 && isUserLogged) 
```

使用（检查是否登录（布尔值），使用偶数键（算术运算符）并最后检查数据库中的性别）：

```
if (isUserLogged && userKey % 2 == 0 && db.getUserSex() == FEMALE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T08:48:40.983

在 C#/C++ 和许多其他语言中，您`AND`实际上有两个逻辑运算符：`&`和`&&`:

`&`操作员将评估这两个条件

`&&`运算符将仅首先计算，如果等于`FALSE`，则跳过表达式的第二部分。

这同样适用于逻辑`OR`运算符。有两个运算符：`|`和`||`：

`|`操作员将评估这两个条件

`||`运算符将仅首先计算，如果等于`TRUE`，则跳过表达式的第二部分。

因此，回答您的问题，在您使用的示例中`&&`，它将表现为两个嵌套`if`的

**[编辑]**：好的，找到使用 | 的例子并不容易 和 &，我个人在最短代码竞赛中使用过它们））这是它们真正有用的地方（不是因为它们比 && 和 || 短）。还要考虑以下示例：

```
static bool LaunchFirstRocket()
{
    // Launching rocket if all is ok return true, or return false if we failed to launch it.
}

static bool LaunchSecondRocket()
{
    // Launching rocket if all is ok return true, or return false if we failed to launch it.
} 

static void Main(string[] args)
{
    if (LaunchFirstRocket() & LaunchSecondRocket())
    {
        Console.WriteLine("Both rockets have launched successfully!");
    }
} 
```

在这里，无论第一个方法的结果如何，我们都将强制执行这两种方法。如果第一颗火箭失败了，我们还想发射第二颗，这是我们的逻辑。是的，还有**很多**其他方法可以编写此类代码，但这只是用于**教育目的**的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T08:39:10.707

我相信大多数编译器都会为你做这个优化。如果 && 的第一个条件为假，则不会执行第二个条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T08:40:46.987

> 程序将计算第一个条件，然后计算第二个条件，

不，不是在大多数现代语言中（例如 C、C++）。由于已知如果第一个条件为假，则`AND`表达式的值不可能是假以外的任何值，因此不评估第二部分。在这两种语言中，标准明确定义了这种优化（称为“短路评估”）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-30T08:58:48.997

这取决于。正如其他人所指出的，在具有[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)的编译语言（例如 C 和 C++）中，两个版本都可能编译为完全相同的代码。

在某些解释性语言中，例如 Perl，第二个版本实际上可能*比*第一个版本慢很多，因为输入代码块的开销很小。例如，这个人工基准清楚地显示了差异：

```
use Benchmark ':all';
my $count = shift || 10_000_000;
our ($foo, $bar, $baz) = (1, 1, 1);
timethese( $count, {
    'and'    => 'if ($foo && $bar) { $baz++; }',
    'nested' => 'if ($foo) { if ($bar) { $baz++; } }',
}); 
```

输出：

```
Benchmark: timing 10000000 iterations of and, nested...
       and:  2 wallclock secs ( 2.41 usr +  0.00 sys =  2.41 CPU) @ 4149377.59/s (n=10000000)
    nested:  4 wallclock secs ( 3.54 usr +  0.00 sys =  3.54 CPU) @ 2824858.76/s (n=10000000) 
```

当然，在实践中，这种差异可能完全是微不足道的，尤其是与开始使用解释语言的一般开销相比。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-30T08:39:35.100

所有现代语言都会短路任何 AND'ed 子句。所以，在你的例子中，如果 isFoo() 为假，它甚至不会检查 isBar()，它会退出 if 语句。

# objective-c - IBOutlet 在自定义 UIView 中为零（使用 STORYBOARD）

> ID：14089410
> 
> 赞同：21
> 
> 时间：2012-12-30T08:37:18.583
> 
> 标签：objective-c, uiview, storyboard, iboutlet

我有一个自定义`UIView`课程。在里面我已经声明了一个 `IBOutlet`属性`UIImageView`。

```
#import <UIKit/UIKit.h>

@interface SettingItem : UIView{

}

@property (strong, nonatomic) IBOutlet UIImageView *myImage;

@end 
```

现在我正在使用故事板。有一个视图控制器。我拖到`UIView`视图控制器。我拖了一个`UIImageView`作为上面的子视图`UIView`。我将“SettingItem”类设置为`UIView`来自情节提要。`SettingItem`我通过从实用程序窗口的插座正常拖动将插座连接到 myImage 。

* * *

## `SettingItem`执行

```
#import "SettingItem.h"

@implementation SettingItem

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self baseInit];
    }
    return self;
}

-(id) initWithCoder:(NSCoder *)aDecoder{
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Initialization code
        [self baseInit];
    }
    return self;
}

- (void) baseInit{
    NSLog(@"myImage %@"self.myImage);
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

现在我的问题`myImage`总是`nil`，上面`NSLog`只是为出口打印`(null)`。我检查了情节提要中的视图并检查了它的出口参考和指向`myImage`. 我错过了一些东西。我搜索了帮助，但找不到任何解决方案。

你能指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2014-06-26T13:11:39.363

在您的视图中覆盖 awakeFromNib - 这是分配 IBOutlets 后要调用的第一个生命周期方法，并且是您的代码的正确位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-16T05:52:03.813

在 awakeFromNib 中初始化它们：

```
- (void)awakeFromNib
{
    //init code
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-13T18:26:15.323

我刚刚遇到了完全相同的问题，解决方案非常简单：

您即将访问`myImage`- 就是这样。

Withing`-(id) initWithCoder:(NSCoder *)aDecoder{`和`- (id)initWithFrame:(CGRect)frame`the`UIView`尚未绘制。所以 myImage 还没有初始化。

如果添加 a`UIButton`和 an`IBAction`并执行以下操作，则可以对其进行测试：

```
- (IBAction)buttonClicked:(id)sender {
    NSLog(@"%@",myImage);
} 
```

你会看到如何`myImage`不再是`nil`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T15:52:38.867

我有类似的问题，但我终于弄清楚出了什么问题 - 这是 XIB 文件和 Storyboard 之间的习语不同。

在我看到的所有关于 Xib 文件的教程中，如果我有一个 UITableViewController 创建一个 DetailViewController 来让我编辑表中项目的内容，那么 tableViewController 在第一次显示它时创建了一个 DVC 的实例，但是然后在需要编辑列表中的另一个项目时重用同一个 DVC 实例。

使用情节提要，看起来由表视图显示的视图通常在每次表视图调用它时创建一个新视图（并且它不会调用 UIViewController 模板中的 init 版本）。正如先前的答案所述，您必须等到“ViewDidLoad”才能访问任何控件，即使您之前已经显示过此视图。

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-28T12:04:18.170

您可以不使用属性的设置器，这样您就可以在实际填充时执行您需要的操作吗？

```
@IBOutlet weak var xxx:UIKitClass! {
  didSet { 
    outletSetup() 
  }
} 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2013-01-09T19:59:13.467

`[self baseInit]`在里面打电话`-(void)viewWillAppear:(BOOL)animated`。`myImage`那里应该有一个值。

```
#import "SettingItem.h"

@implementation SettingItem

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

    }
    return self;
}

-(id) initWithCoder:(NSCoder *)aDecoder{
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Initialization code

    }
    return self;
}
-(void)viewWillAppear:(BOOL)animated
{
   [self baseInit];
}

- (void) baseInit{
    NSLog(@"myImage %@"self.myImage);
} 
```

* * *

## 回答 #7

> 赞同：-6
> 
> 时间：2012-12-30T09:02:11.930

在您的 .h 文件中，您需要替换您的代码：

```
#import <UIKit/UIKit.h>

@interface SettingItem : UIView{

}

@property (strong, nonatomic) IBOutlet UIImageView *myImage;

@end 
```

使用此代码

```
#import <UIKit/UIKit.h>

@interface SettingItem : UIView{

  IBOutlet UIImageView*myImage;

}

@end 
```

你实际上并没有告诉 Xcode myImage 是什么，你只是让它成为一个强大的、非原子的属性

# java - 通过双击运行 Java Swing 应用程序（无控制台）

> ID：14089411
> 
> 赞同：4
> 
> 时间：2012-12-30T08:37:19.253
> 
> 标签：java, swing, logging, jar

假设我有一个启动 Swing GUI 的可执行 JAR。如果它是从控制台启动的（例如`java -jar myapp`），那么控制台也被应用程序使用（即正在打印日志）。此日志记录需要一些时间，非常冗长。

请注意，我只有一个 JAR，而不是源代码。

**问题：***双击运行*JAR会发生什么？显然没有日志是可见的，但它们只是不可见，还是这确实提高了应用程序的性能（通过跳过日志记录）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T08:46:07.530

如果您不想看到控制台，请使用`javaw`启动程序而不是`java`. 所以你会运行：`javaw -jar myapp.jar`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T08:51:10.373

如果您打算停止记录，您可以关闭您的记录`Logger#setLevel(Level.OFF)`（假设您使用的是标准记录器）。如果您的目的是减少日志消息的详细程度，则可以使用 Level.WARNING 例如，仅记录 WARNING 和 SEVERE 消息。通常，您可以将要记录的最低级别设置为任何级别。当您的应用程序在没有控制台的情况下启动时，它通常没有`Console`附加到它（但我认为这是一个平台问题，例如，我认为某些平台可能会提供中央控制台，而 Java Web 应用程序在 servlet 容器中运行，即使容器是从控制台开始通常没有附加控制台）所以我不会出于任何原因将我的代码打赌。如果您仍然希望您的日志在一个没有附加的应用程序中`Console`在运行时，您始终可以使用`Logger#addHandler(FileHandler)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T08:58:01.513

通常`System.out.println()`不是日志记录的首选。这是一个 IO 操作且耗时。如需关闭，需在代码中手动注释。

使用 log4j 或 java Logger。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T12:22:40.027

`System.out.prinln()` prints to the output stream of the process. The JVM doesn't know and care about where the output actually goes. It could be the console, or it could be redirected to a file, or piped to another process, or sent to nowhere. The instruction is a blocking operation, so the time taken by the instruction depends on where it actually goes. Printing to a console is slower than printing to a file, which is slower than printing to nowhere.

# asynchronous - 异步操作的这个属性的名称是什么。（提升 asio 相关）

> ID：14089412
> 
> 赞同：1
> 
> 时间：2012-12-30T08:37:21.343
> 
> 标签：asynchronous, boost-asio

该属性可以这样描述：**如果该操作被取消，则它的处理程序保证在执行时出现错误**。

例如，[boost::asio::deadline_timer](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/deadline_timer.html)没有该属性，如[deadline_timer::cancel function 文档的备注部分](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/basic_deadline_timer/cancel/overload1.html)所述。因此，即使取消计时器上的等待操作，它的回调也有可能在没有错误的情况下执行。

另一方面，该属性适用于 asio 套接字（至少我希望如此 :)，因为文档中没有这样的评论）。

编辑：一个伪代码演示了截止时间计时器中缺少此属性：

```
1# User calls timer.async_wait with a handler H which is to be
   executed when the action finishes.
2# Time passes.
3# Timeout has been reached, asio internally inserts the handler H into
   a queue for later execution, but with error code indicating success.
   User is unaware of when this step takes place.
4# User calls cancel on the timer, thus would expect the handler to be
   executed with an error code indicating failure.
5# Asio takes the handler H from the queue and executes it with error
   code indicating success as set in the step #3. 
```

只需在步骤 #4 中设置一个布尔标志，然后在步骤 #5 中检查它，就可以轻松解决此问题，所以这不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T01:57:30.883

[TR2 的文档](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio.html)和[网络库提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2175.pdf)都没有定义异步操作的术语，在取消时保证错误。但是，所有异步操作，包括[`boost::asio::deadline_timer::async_wait()`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/basic_deadline_timer/async_wait.html)，都会表现出这种行为。处理程序的设计使其始终提供相关操作的状态。如果没有这种保证，当发生取消或多个操作时，开发人员将在处理程序中处于未知状态。

取消仅适用于尚未发生的操作。我相信文档仅针对计时器类强调了这一点，因为异步操作的可见性不同。对 I/O 对象的操作具有很高的可见性。例如，可以嗅探网络以观察套接字上的异步写入操作。另一方面，定时器的操作可见性低。等待操作的机制是 Boost.Asio 中的一个实现细节，API 不提供对操作执行外部监控的能力。

在伪代码中，已经到了超时，说明异步等待操作已经完成。因此，它不能再被取消，因为该操作已经发生。因此，处理程序将不会被错误调用`boost::asio::error::operation_aborted`。重要的是要理解取消是一种操作，而不是状态变化。因此，无法查询计时器以查看是否发生了取消。此外，如果用户希望取消修改处理程序的错误代码，那么用户可能会迷失在异步操作的启动、完成和通知之间的时间分离导致的继承复杂性中。

* * *

以下所有内容都非常具体地介绍了实现细节。在这种情况下，在 Boost.Asio 将使用 epoll 作为其反应器的系统上，使用[boost::asio::ip::tcp::socket::async_receive在套接字上进行异步读取。](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/basic_stream_socket/async_receive.html)

### 初始化

1.  当创建套接字对象时，它的服务会[`reactive_socket_service_base`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/impl/reactive_socket_service_base.ipp)通知反应器初始化任务（`reactor::init_task()`）。
2.  然后反应器将通知`io_service`初始化任务。这会导致将标记操作添加到`io_service`的操作队列中。
3.  当套接字以有效的文件描述符打开时，与文件描述符 ( `descriptor_data`) 关联的数据结构将注册到反应器。这个结构体有自己的操作队列，实际上它本身就是一个操作。
4.  反应器从中提取文件描述符`descriptor_data`并将其添加到文件描述符列表中以在反应器内观察。

### 启动异步读操作

1.  [`boost::asio::detail::reactive_socket_service_base::async_receive()`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/reactive_socket_service_base.hpp)创建一个[`boost::asio::detail::reactive_socket_recv_op`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/reactive_socket_recv_op.hpp)对象。这个对象是一个操作对象。它的`perform()`成员函数将尝试从套接字读取数据，并且它的`complete()`成员函数将调用用户的完成处理程序。
2.  [`boost::asio::detail::reactive_socket_service_base::start_op()`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/impl/reactive_socket_service_base.ipp)使用读取操作调用，该操作调用[`reactor::start_op()`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/impl/epoll_reactor.ipp).
3.  反应器`descriptor_data`为套接字获取，锁定特定于描述符的互斥体，将操作推入特定于描述符的操作队列，通知`io_service`有工作，然后解锁互斥体。

### socket获取数据，异步读操作完成开始

1.  `io_service::run*()`被调用。
2.  如果有任何操作准备好运行，`io_service`则只会检查其操作队列。在这种情况下，初始化期间创建的标记操作在队列中。该操作被标识为标记，表示存在反应器，并调用[`reactor::run()`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/impl/epoll_reactor.ipp).
3.  反应堆将阻塞`epoll_wait`。当套接字的文件描述符有活动时，则标识该事件。从事件`descriptor_data`中提取，并将其推送到调用者的操作队列中，就像`descriptor_data`操作一样。
4.  然后将传递回调用者的操作添加到`io_service`的操作队列中，该队列现在包含`descriptor_data`操作和原始标记操作。
5.  该`descriptor_data`操作从`io_service`队列中弹出，并调用`complete()`成员函数，导致[`epoll_reactor::descriptor_state::do_complete`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/impl/epoll_reactor.ipp)运行。
6.  `do_complete`调用`epoll_reactor::descriptor_state::perform_io`，其中在`descriptor_data`操作队列中的操作被迭代并被`perform()`调用。这包括`boost::asio::detail::reactive_socket_recv_op`在异步操作启动期间被推入队列的操作。
7.  读取操作的`perform()`成员函数将调用[`socket_ops::non_blocking_recv()`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/impl/socket_ops.ipp)，尝试从套接字读取实际数据。错误代码和传输的字节存储在操作中。
8.  该操作从`descriptor_data`的操作队列中移除，并添加到`io_service`via [`task_io_service::post_deferred_completion`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/impl/task_io_service.ipp)。

### 异步读取操作的通知

1.  现在`io_service`它的队列中有两个操作：完成的读取操作和标记操作。其`reactor`队列中没有操作。
2.  读操作最终被迭代到，并`complete()`调用其成员函数。在[`reactive_socket_recv_op::do_complete`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/reactive_socket_recv_op.hpp)中，用户处理程序使用错误代码和传输的字节进行调用。

### 消除

1.  [`boost::asio::detail::reactive_socket_service_base::cancel()`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/impl/reactive_socket_service_base.ipp)调用. `reactor::cancel_ops`_`descriptor_data`
2.  [`epoll_reactor::cancel_ops()`](http://svn.boost.org/svn/boost/trunk/boost/asio/detail/impl/epoll_reactor.ipp)遍历`descriptor_data`的操作队列。每个操作都从 的操作队列中弹出，将`descriptor_data`其错误代码设置为`boost::asio::error::operation_aborted`，然后添加到`io_service`的操作队列中。

因此，取消只会影响尚未通过从`descriptor_data`' 的操作队列中删除它们来调用的操作。如果一个操作已被调用，那么它已经从`descriptor_data`的操作队列中移除并添加到`io_service`操作队列中。

# ms-access - MS Access SQL更新表查询的第一列更新所有非选定列

> ID：14089413
> 
> 赞同：1
> 
> 时间：2012-12-30T08:37:21.870
> 
> 标签：ms-access

我只想更新 MS Access 2010 中的一个选定列。但是当我使用下面的更新查询时，
MS Access 会更新所有`tarih`列值。当我只写下面的 Select 查询时，它可以正常工作。但是当我在嵌套更新查询中使用它时，更新查询会更新所有`tarih`列值。我能做些什么？

```
UPDATE words
SET tarih='12'  
WHERE
  tarih = (SELECT FIRST(tarih)   
           FROM words  
           WHERE tarih='11') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T16:14:12.097

该示例查询应具有与此相同的影响：

```
UPDATE words SET tarih='12'
WHERE tarih = '11'; 
```

用简单的英语，它将`tarih`在所有行中更改为 12，其中`tarih`11。但是，如果您的`words`表包含多行，其中`tarih`11，并且您希望`tarah`仅在其中一行中更改为 12，您需要一种方法来告诉数据库哪个它应该更新的那些行之一。

例如，如果您的`words`表包含一个名为 的自动编号主键字段`id`，则以下查询应该执行您想要的操作。

```
UPDATE words SET tarih='12'
WHERE id = DMin("id", "words", "tarih='11'"); 
```

`words`尝试适用于您的实际表的类似方法。您实际上不需要使用自动编号字段。可以改为使用另一种类型的主键字段。如果您的表不包含主键，请考虑添加一个。如果没有主键，您可以使用字段组合来唯一标识应更新的行。但是，如果没有唯一标识每一行的字段组合，您将无法`UPDATE`仅匹配多个匹配项中的“第一个”。

# android - Android 内存值对与 SQLite

> ID：14089416
> 
> 赞同：2
> 
> 时间：2012-12-30T08:38:12.717
> 
> 标签：android

如果在应用程序的动态行为期间需要它们，存储大量值对的最佳方法是什么？在内存中（例如 LinkedHashMap）还是 SQLite DB？我有超过 4000 行的 personID 和 personName，我需要一个 EditText 和一个 Spinner。如果我在 EditText 中输入正确的 personID，Spinner 应该跳转到正确的 personName，但 Spinner 也应该包含所有的 personNames。

目前我已经通过以下方式实现了“内存中”的解决方案，因为一个简单的数组不能大于 64k。代码当然是生成的。我也尝试在 XML 中定义数组，但它也有相同的限制。

```
public enum CompPeople {
    INSTANCE;

    public LinkedHashMap<Short, String> peopleIDs = new LinkedHashMap<Short, String>();

    public void initialize() {
        peopleIDs = new LinkedHashMap<Short, String>();
        setPeople1();
        setPeople2();
        setPeople3();
        setPeople4();
    }

    public void setPeople1() {
        peopleIDs.put(new Short((short) 1011), "John Doe");
        peopleIDs.put(new Short((short) 1012), "Jack Knight");
        peopleIDs.put(new Short((short) 1013), "Sue Doe");
        ...
    }

    public void setPeople2() {
        ...
    }

    public void setPeople3() {
        ...
    }

    public void setPeople4() {
        ...
    }
} 
```

如果 SQLite 方式会更好，有没有比这里描述的在第一次运行应用程序时初始化数据库更好的解决方案？： [http ://www.reigndesign.com/blog/using-your-own-sqlite-数据库在-android-applications/](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T08:49:05.380

需要考虑的几点：

1.  在数据库和内存结构之间做出决定时，第一个关注点*必须*是持久性要求。如果您需要在应用程序退出后保留数据，那么您*将*不得不使用某种持久存储，即数据库或平面文件。

2.  无论如何完成，在数据库中持久化对象都会变得更慢，并且可能更难以编程。如果您可以将对象舒适地放入内存中，那么使用数据库将不需要额外的复杂性。

3.  一般而言， 4000 行并没有*那么*大，尽管如果由于存储 blob 等原因行大小足够高，它*可能在嵌入式设备的上下文中。*您希望每行占用多少空间？因为如果我们谈论的是 3-4 MB，那么你*最好*只使用内存结构......

# php - jquery & 单选按钮

> ID：14089418
> 
> 赞同：0
> 
> 时间：2012-12-30T08:38:51.667
> 
> 标签：php, javascript, jquery, html, ajax

我正在尝试在 jquery 中做一个非常简单的事情，但这是行不通的。

我有这个单选按钮：

```
<input type="radio" id="price" name="shipping" class="styled" /> 
```

在 Head 我有这个代码：

```
$(document).ready(function() {

$("input[name=shipping]").change(function() {
    alert("123");
});

}); 
```

我的代码有什么问题？

也许是因为我正在使用“自定义复选框和单选按钮”？ [http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T09:02:17.540

您的代码正确，但问题可能来自另一个地方。

检查 **[萤火虫](https://addons.mozilla.org/en/firefox/addon/firebug)控制台**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T08:43:43.923

我查看了您导入的脚本。

它看起来非常过时，并且包含以下内容

```
inputs[a].onchange = Custom.clear; 
```

这将删除您之前添加的事件侦听器。

我的建议是，按偏好顺序：

1.  删除这个可能只为静态页面制作的插件
2.  将您自己的脚本放在正文末尾而不是标题内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T08:45:30.950

你的代码看起来不错。 **[JS-BIN Demo](http://jsbin.com/ilaqih/1/edit)** 确保为单选按钮提供相同的名称：

```
<div>
  <input type="radio" id="price1" name="shipping" class="styled" />
  <input type="radio" id="price2" name="shipping" class="styled" />
</div> 
```

您的代码将起作用。

另一种方法是使用单击而不是更改：

```
$(document).ready(function() {
$("input[name=shipping]").click(function() {
    alert("123");
});  
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T09:02:54.733

尝试这个

```
$(document).delegate("input[name=shipping]", "change", function() {
   alert('abc');
}); 
```

# javascript - 在刷新页面砌体工作正常，但第一次重叠

> ID：14089419
> 
> 赞同：7
> 
> 时间：2012-12-30T08:38:58.890
> 
> 标签：javascript, jquery, asp.net, jquery-masonry

当我的页面第一次加载时，砌体重叠图像，如果我刷新页面，它开始工作正常。我不知道我做错了什么。我的页面链接是这个 www.bhinderblink.com

```
<script type="text/javascript">
    $(window).load(function () {
        $('#container').masonry({
            // options
            itemSelector: '.box',
            columnWidth: 240,
            isAnimated: true,
             isFitWidth: true,
            animationOptions: {
                duration: 650,
                easing: 'linear',
                queue: false
            }
        });
    });   

</script> 
```

在 .ajax 成功时，它从 xmlobject 获取数据...

```
function OnSuccess(response) {
        var xmlDoc = $.parseXML(response.d);
        var xml = $(xmlDoc);

        pageCount = parseInt(xml.find("PageCount").eq(0).find("PageCount").text());

        var pic_infoVar = xml.find("pic_info");

        pic_infoVar.each(function () {
            var customer = $(this);
            //...........

            var $picString = $("<div class='box'><img id='theImg' src='/pic/jas/" + customer.find("pic_name").text() + ".jpg" + "'/><div>Detail2</div></div>");
            $("#container").append($picString).masonry('appended', $picString, true);

        });

        $("#imgloader").hide();
        $("body").css({ "opacity": "100" });
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T18:20:41.580

我也有类似的问题，图像在第一次加载时重叠。我通过首先加载图像来克服这个问题。

```
 $(".id").imagesLoaded(function(){
    $('.id').masonry({
                itemSelector: '.scrapcontent',
                columnWidth: 3,
                isAnimated:true,
                animationOptions: {
                    duration: 700,
                    easing:'linear',
                    queue :false
               }
         });
} 
```

如果图像已加载，那么只有您的砌体任务必须开始。它应该可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-03T12:20:09.413

这是因为脚本在内容（图像）未完全加载之前运行。因此定位误差。

试试这个 ：-

```
<head>
<script>
      $(window).load(function(){
          $('#selector').masonry({
               itemSelector : '.item',
               columnWidth : 200,
               isAnimated: true,
               animationOptions: {
                    duration: 700,
                    easing: 'linear',
                    queue: false
               }
          });
      });
</script>
</head> 
```

# optimization - 复制工作簿时在整个工作簿中保留彩色突出显示的公式

> ID：14089430
> 
> 赞同：-1
> 
> 时间：2012-12-30T08:40:27.550
> 
> 标签：optimization, excel, excel-2010, vba

“我试图使条件有效，但没有结果，必须有一种方法可以在单元格满足条件时将单元格粘贴为格式（单元格颜色为 RGB（128、128、128）），否则粘贴所有值，如下编码不起作用，我希望这次我的问题能被接受，任何帮助将不胜感激！请在 DropBox 链接 >>>“ [文件中找到我的 Excel 工作簿](https://www.dropbox.com/s/88c4a49i8p6xzsw/My%20Report.xlsx)

```
Sub CopyPasteSave()
Dim wbSource As Excel.Workbook
Dim wbTarget As Excel.Workbook
Dim nm As Name
Dim ws As Worksheet
Dim CellsToCopy() As String
Dim i As Long
Dim Path As String
Dim rcell As Range
Dim lastCol As String
Dim lastRow As String
Dim cell As Range

If MsgBox("Copy specific sheets to a new workbook" & vbCr & _
          "New sheets will be pasted as values, named ranges removed" _
 , vbYesNo, "NewCopy") = vbNo Then
    Exit Sub
End If
Set wbSource = ActiveWorkbook
Set rcell = Sheets("EPF Daily Report").Range("I5")
Path = "D:\"
'Enter cells to copy with formulas
CellsToCopy = Split(("B11,B12"), ",")
Application.ScreenUpdating = False
' Copy specific sheets
' *SET THE SHEET NAMES TO COPY BELOW*
' Sheet names go inside quotes, separated by commas
On Error GoTo ErrCatcher
wbSource.Sheets(Array("InletManifold", "Separator", "Crude Strippers & Reboilers ", "Water Strippers  & Reboilers ", "Crude Storage&Export", "GSU,FLARE & GEN", "EPF Utility", "EPF Daily Report", "Choke Size")).Copy
On Error GoTo 0
' Paste sheets as values
' Remove External Links, Hyperlinks and hard-code formulas
' Make sure A1 is selected on all sheets
Set wbTarget = ActiveWorkbook
For Each ws In wbTarget.Worksheets
    With ws
           .Cells.Select

         For Each cell In Selection

        If cell.Interior.Color = Excel.XlRgbColor.rgbGrey Then

        .[A1].PasteSpecial Paste:=xlFormats  ' paste the formulas that i want to keep

        Else

          .[A1].PasteSpecial Paste:=xlValue ' all other cells paste them as values
        End If

        Application.CutCopyMode = False
        Application.DisplayAlerts = False
        .Cells.Hyperlinks.Delete
        Application.DisplayAlerts = False
        Application.Goto .Range("A1")

        Next

    End With
Next ws
With wbTarget
   ' Remove named ranges
    For Each nm In .Names
        nm.Delete
    Next nm
    ' Input box to name new file
    'NewName = InputBox("Please Specify the name of your new workbook", "New Copy")
    ' Save it with the NewName and in the same directory as original
    .SaveAs Filename:=Path & " " & "EPF Daily Report" & " " & rcell.Value & ".xls"
    .Close SaveChanges:=True
End With

Exit_Point:
Application.ScreenUpdating = False
Application.DisplayAlerts = True
Exit Sub

ErrCatcher:
MsgBox "specified sheets do not exist within this work book"
Resume Exit_Point
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T07:53:57.983

在代码的以下注释中，我假设您只想复制指定单元格的公式，然后仅当这些单元格被格式化为灰色时。

```
 Sub CopyPasteSave()

     . . .    

1\.  CellsToCopy = Split(("B11,B12"), ",")

   <This use of split to assign array elements does not work. Better
    to go with CellsToCopy = Array("B11", "B12").>

    . . .

    For Each ws In wbTarget.Worksheets
       With ws

2\.        .Cells.Copy        
          .[A1].PasteSpecial Paste:=xlValues

         <You have lost your reference to wbSource. Better written as
          wbSource.Worksheets(ws.Name).Cells.Copy and wbSource.Worksheets(ws.Name).
          [A1].PasteSpecialPaste:=xlValues. (I am assuming the reference to
          [A1] will work.)>

2\.        Set acell = wbSource.workbook

         <You have declared acell as a String, but are trying to assign a 
          workbook to it. To iterate across all the cells in the source workbook, 
          you'll have to do it sheet-by-sheet.>

3\.        Do While Not IsEmpty(acell)

         <Misplaced?>

4\.        If acell.Interior.ColorIndex = 48 Then '-- make sure color index is correct
             For i = LBound(CellsToCopy) To UBound(CellsToCopy)
                wbSource.Worksheets(ws.Name).Range(CellsToCopy(i)).Copy
                ws.Range(CellsToCopy(i)).PasteSpecial xlPasteFormulas
             Next i
          End If

          <Would suggest that you move the Empty and color test into the For 
           ... Next loop. Also, no need to specifically reference ws, as you are
           already in With ws...End With.> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T20:33:34.710

“感谢 Chuff 的宝贵通知，现在它正在工作，我修改了如下代码，但复制工作表时有点慢！”

```
Sub CopyPasteSave()
    Dim wbSource As Excel.Workbook
    Dim wbTarget As Excel.Workbook
    Dim nm As Name
    Dim ws As Worksheet
    Dim Path As String
    Dim rcell As Range
    Dim cell As Range

    If MsgBox("Copy specific sheets to a new workbook" & vbCr & _
            "New sheets will be pasted as values, named ranges removed", _
            vbYesNo, "NewCopy") = vbNo Then
        Exit Sub
    End If
    Set wbSource = ActiveWorkbook

    Set rcell = wbSource.Worksheets("EPF Daily Report").Range("I5")
    Application.ScreenUpdating = False
    Application.DisplayAlerts = False
    ' Copy specific sheets
    ' *SET THE SHEET NAMES TO COPY BELOW*
    ' Sheet names go inside quotes, separated by commas
    On Error GoTo ErrCatcher
    wbSource.Worksheets(Array("InletManifold", "Separator", _
        "Crude Strippers & Reboilers ", "Water Strippers  & Reboilers ", _
        "Crude Storage&Export", "GSU,FLARE & GEN", "EPF Utility", _
        "EPF Daily Report", "Choke Size")).Copy
    On Error GoTo 0
    ' Paste sheets as values
    ' Remove External Links, Hyperlinks and hard-code formulas
    ' Make sure A1 is selected on all sheets
    Set wbTarget = ActiveWorkbook
    For Each ws In wbTarget.Worksheets
        With ws
            For Each cell In .UsedRange
                If cell.Interior.Color <> RGB(192, 192, 192) Then
                    If cell.HasArray Then
                        With cell.CurrentArray
                       .Value = .Value 'clearing array
                        End With
                       Else
                       cell.Value = cell.Value
                    End If
                End If
            Next cell
            .Hyperlinks.Delete
        End With
    Next ws
    With wbTarget
        ' Remove named ranges
        For Each nm In .Names
            nm.Delete
        Next nm
        Path = "C:\"
        .SaveAs Filename:=Path & " " & "EPF Daily Report" & " " & rcell.Value & ".xls"
        .Close SaveChanges:=False
    End With

Exit_Point:
    Application.ScreenUpdating = True
    Application.DisplayAlerts = True
Application.Visible = False
    Exit Sub

ErrCatcher:
    MsgBox "specified sheets do not exist within this work book"
    Resume Exit_Point
End Sub 
```

# algorithm - 自动创建配色方案

> ID：14089436
> 
> 赞同：1
> 
> 时间：2012-12-30T08:41:25.350
> 
> 标签：algorithm, colors, color-scheme

是否有创建“漂亮”配色方案的算法？

“好”的标准是：

*   无限数量的颜色，但在典型用例中限制在 10 以下

*   令人赏心悦目，因此当计算机只能显示 16 种或更少的固定颜色时，看起来不会有人跳入某些颜色罐或试图模仿计算机游戏的配色方案。

*   合理的对比度，即方案中的任意颜色组合可以毫无问题地得到区分。理想情况下，这将考虑到人类对色差的感知没有 1:1 映射到频率。明显的对比度会因多种颜色而分解。

实际背景是我想以一种很好且有用的方式[为 Degraph 创建的图表着色。](https://github.com/schauder/degraph/wiki/Examples)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:01:46.013

我通常选择一种基色并以 5-6 步更改色调（=更改主色）如果我需要更多颜色，我会更改饱和度（强度或灰色）或亮度。

这里的问题是，就三个值 H、S、L 的“距离”而言，您应该避免两个相邻的颜色（在您的绘图上）靠近在一起。

这很容易实现并给出可接受的结果。

例如（使用 windows 颜色编辑器）
(S=140, L=160): H=0,40,80,120,160,200
(S=90 , L=180); H=20,60,100,140,​​ 180

请不要使用太多颜色。也可以使用填充图案。

# php - Magento - 将根类别链接添加到菜单

> ID：14089442
> 
> 赞同：1
> 
> 时间：2012-12-30T08:42:15.887
> 
> 标签：php, magento

我是 Magento 的新手，我不知道如何将根类别链接到菜单。后端似乎没有此选项。

关于如何实现这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:28:27.167

$rootcategory_id = Mage::app()->getStore()->getRootCategoryId();
$collection = Mage::getSingleton('catalog/category')->load($rootcategory_id);
$rootcaturl= $collection->getUrl();//**默认类别url**即*商店的根类别*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T08:48:26.283

在根类别下创建一个新类别并将所有类别放入其中。

# php - Jquery - 确认对话框 - 工作 php 代码

> ID：14089443
> 
> 赞同：0
> 
> 时间：2012-12-30T08:42:16.390
> 
> 标签：php, javascript, jquery, modal-dialog

我有一个关于 jquery 的问题。我的代码如下所示：

```
 <button id="callConfirm'.$row['id'].'">DEL</button>

    <div id="dialog" title="Realy?">
 Realy delete '.$row['marks'] .' s váhou   '.$row['weight'] .' z   '.$row['id']  .' ?
</div>​

 <script type="text/javascript">
$("#dialog").dialog({
 autoOpen: false,
modal: true,
 buttons : {
    "Opravdu" : function() {

   alert("You have confirmed!");        },
    "Ne" : function() {
      $(this).dialog("close");
    }
  }
});

$("#callConfirm'.$row['id'].'").on("click", function(e) {
e.preventDefault();
$("#dialog").dialog("open");  
});
 </script>' 
```

我需要单击以使*Opravdu*执行如下所示的**delele.php**脚本：

```
 <?php
 include 'conn.php';
 $back = urldecode($_GET['back']);
 $id = mysql_real_escape_string($_GET['id'] * 1);
 mysql_query("DELETE FROM znamky WHERE id=$id");
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T08:53:52.110

```
"Opravdu" : function() {
  $.get("delete.php?id=...&back=...",function(data) {
   alert(data);
  });
} 
```

从删除返回的数据

以下是您可能希望将 ID 传递给 gialog 的方式

[jquery-ui，使用 dialog('open') 并将变量传递给 DIALOG](https://stackoverflow.com/questions/2889877/jquery-ui-use-dialogopen-and-pass-a-variable-to-the-dialog)

# iphone - 如何在 UITabBarController 中的两个 UIViewController 之间传递信息

> ID：14089444
> 
> 赞同：1
> 
> 时间：2012-12-30T08:42:24.347
> 
> 标签：iphone, ios, uiview, uiviewcontroller, uitabbarcontroller

在我的 iPhone 应用程序中，有两个 UIViewController；两者都嵌入在 UITabBarController 中。然而，当 TabBarController 被点击并且 VC 的开关时，屏幕上的 VC 将数据上传到 NSUserDefaults，然后被切换到的 VC 从 NSUserDefaults 获取该数据。

我目前所做的是在第一个 VC 的 viewWillDisappear 中上传数据，然后在第二个 VC 的 viewWillAppear 中获取它。**问题是即将放在屏幕上的 VC 的 viewWillAppear 在“旧”VC 的 viewWillDisappear 之前被调用，**因此它会尝试获取尚未上传的数据。

我可以使用什么，所以“旧 VC”是第一个知道它什么时候要离开屏幕的人，这样它就可以在新的 VC 获取数据之前上传数据？

*我还尝试设置一个 UITabBArControllerDelegate 以便旧的 VC 会收到 - tabBarController:didSelectViewController: 但是调用也太晚了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T08:45:32.873

如果您不打算传输大量信息，则可以使用默认变量作为众多可用选项之一。它可能不是最好的，但它会起作用。

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:Variable forKey:@"variable"];
    [defaults synchronize]; 
```

设置变量

和

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *fetchVariable = [defaults objectForKey:@"variable"]; 
```

在另一个 VC 中检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T08:46:43.963

> 我可以使用什么，所以“旧 VC”是第一个知道它什么时候要离开屏幕的人，这样它就可以在新的 VC 获取数据之前上传数据？

您可以尝试使用`– tabBarController:didSelectViewController:`UITabBarControllerDelegate 方法将数据保存在`NSUserDefaults`; 这当然应该`viewWillAppear`在任何控制器中调用。

如果您想保留当前的方法，请尝试在第二个视图控制器中使用`viewDidAppear:`而不是。`viewWillAppear:`如果您没有从中获取大量数据`NSUserDefaults`（我猜应该是这种情况）并且您的第二个视图控制器 UI 没有在显示数据时引入延迟，这应该可以正常工作。

您拥有的另一种方法是让第一个控制器在`NSUserDefaults`每次更改时更新其数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T08:58:42.150

写和回读听起来像是不必要的开销。当然，除非您无论如何都需要编写它。

我会让前一个`UIViewController`将包装在一个对象中的所有数据传递给`UITabBarController`，然后将它传递给新的`UIViewController`. 如果这是所有（或大部分）选项卡的模式，请创建一个新协议并让您`UIViewController`的 s 实现它。然后，您`UITabBarController`只需检查控制器是否符合您的协议，就可以确定哪些控制器需要它。

# c - 有没有办法禁用磁盘文件的系统（unix）缓存？

> ID：14089447
> 
> 赞同：5
> 
> 时间：2012-12-30T08:43:15.193
> 
> 标签：c, unix, caching

我目前正在对 C 中的磁盘文件操作（可能是一种 dbms）上的 b+tree 与普通平衡树进行性能测试。b+tree 预计比 bbst 更快，因为它执行的磁盘 I/ Ø 操作。但是我发现，经过一些测试，系统正在对磁盘文件进行缓存，文件完全保存在内存中（我的内存大小是32GB）！b+tree 绝不会比 bbst 快，因为不会执行磁盘 I/O。所以我想知道是否有一种方法可以禁用系统缓存，以便 b+tree 在性能上获胜？我试过用 O_DIRECT|O_SYNC 打开文件：

```
int fd = Open("sb.dat", O_DIRECT|O_SYNC|O_CREAT|O_RDWR, S_IRWXU|S_IRWXG|S_IRWXO); 
```

但这似乎行不通。

这是 getrusage() 提供的一些信息

页面回收：1359821

页面错误：9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T09:00:04.770

AFAIK 即使您使用内核仍会从磁盘缓存块`O_DIRECT`，您可以删除内核缓存，但这仅在第一次有效：

```
echo 3 > /proc/sys/vm/drop_caches 
```

# python - Python：从多维数组中删除重复项

> ID：14089453
> 
> 赞同：3
> 
> 时间：2012-12-30T08:44:16.943
> 
> 标签：python, arrays, multidimensional-array, numpy, duplicates

在 Python`numpy.unique`中，可以非常有效地从一维数组中删除所有重复项。

1）如何删除**二维数组**中的重复行或列？

2) **nD 数组**怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T09:08:25.193

如果可能的话，我会使用熊猫。

```
In [1]: from pandas import *

In [2]: import numpy as np

In [3]: a = np.array([[1, 1], [2, 3], [1, 1], [5, 4], [2, 3]])

In [4]: DataFrame(a).drop_duplicates().values
Out[4]: 
array([[1, 1],
       [2, 3],
       [5, 4]], dtype=int64) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:19:20.970

以下是另一种比`for`循环执行得更好的方法。10k+100 次重复需要 2 秒。

```
def tuples(A):
    try: return tuple(tuples(a) for a in A)
    except TypeError: return A

b = set(tuples(a)) 
```

这个想法灵感来自*Waleed Khan*的第一部分。所以不需要任何可能有进一步应用的附加包。我猜它也是超级Pythonic。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-02T19:20:08.310

numpy_indexed包为 n 维情况解决了这个问题[。](https://github.com/EelcoHoogendoorn/Numpy_arraysetops_EP)（免责声明：我是它的作者）。事实上，解决这个问题是启动这个包的动机；但它已经发展到包含许多相关的功能。

```
import numpy_indexed as npi
a = np.random.randint(0, 2, (3, 3, 3))
print(npi.unique(a))
print(npi.unique(a, axis=1))
print(npi.unique(a, axis=2)) 
```

# asp.net - 在使用 Asp.net Web API 时使用 DataContract 和 DataMember 属性有什么好处吗？

> ID：14089455
> 
> 赞同：7
> 
> 时间：2012-12-30T08:44:32.693
> 
> 标签：asp.net, asp.net-web-api, datacontract, data-members

很多时候我看到开发人员在他们的 Asp.net Web API 模型中使用 DataContract 和 DataMember 属性？

有什么区别和最佳实践？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T11:50:04.287

使用 , 的主要优点`DataContract`是可以避免 和 的一些常见序列化提示的重复`XmlMediaTypeFormatter`属性`JsonMediaTypeFormatter`。即，您可以选择加入/退出要序列化的模型的特定属性或重命名属性，并让两个格式化程序都尊重这一点。

例如：

```
[DataContract]
public class Sample {

   [DataMember]
   public string PropOne {get;set;}

   public string PropTwo {get;set;}

   [DataMember(Name="NewName")]
   public string PropThree {get; set;}
} 
```

相当于：

```
public class Sample {
   public string PropOne {get;set;}

   [XmlIgnore]
   [JsonIgnore]
   public string PropTwo {get;set;}

   [JsonProperty(PropertyName = "NewName")]
   [XmlElement("NewName")]
   public string PropThree {get; set;}
} 
```

# ssl - 使用 SAN 创建 X509 证书

> ID：14089456
> 
> 赞同：1
> 
> 时间：2012-12-30T08:44:33.250
> 
> 标签：ssl, openssl, ssl-certificate

`openssl`是否可以在不接触配置文件的情况下使用 SAN（主题备用名称）创建 X509 证书？

您在 Google 上搜索有关该主题的所有示例（例如[此处](http://apetec.com/support/GenerateSAN-CSR.htm)或[此处](http://blog.icewolf.ch/archive/2012/01/10/openssl-certificate-signing-request-csr-for-san-certificates.aspx)）都声称您需要调整或创建配置文件。

这在没有例如使用命令行开关并被要求提供 SAN 的情况下是否有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:50:57.423

[本文档](http://www.crsr.net/Notes/SSL.html)中描述了一个解决方案，要求您使用环境变量只修改一次配置文件，例如：

```
[ v3_req ]
subjectAltName=$ENV::ALTNAME 
```

请注意，此配置文件不必是全局的。您还可以使用本地 OpenSSL 配置文件。例如使用`OPENSSL_CONF`环境变量（或`-config`选项）：

```
export OPENSSL_CONF=./openssl.cnf
export ALTNAME="DNS:my.host.name,IP:10.0.0.1"
openssl req -new -x509 -key myhost-key.pem -out myhost-cert.pem -days 365 
```

# windows - x86 可执行程序在 64 位操作系统上可以使用多少内存？

> ID：14089468
> 
> 赞同：1
> 
> 时间：2012-12-30T08:47:09.140
> 
> 标签：windows, process, 64-bit, ram

我认为这个问题听起来很清楚，但需要进一步解释：

假设我们有**一台装有 8GB RAM 的 Windows 7 x64 PC**；（***64位操作系统和32位进程是我的意图***）

**问题一：****64位**进程在这种环境下可以使用多少内存？

**问题2：这个环境下****32位**进程可以使用多少内存？

**问题3：**如果32bit进程在这种环境下只能使用2GB内存（即使是LARGE ADDRESS SPACE AWARE: 3gb），但是大多数游戏都是32bit的；那么这是否意味着：虽然我们安装了8gb的内存，例如游戏在任何给定时间只能使用 2-3gb 的 RAM？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T08:53:29.410

> 问题一：64位进程在这种环境下可以使用多少内存？

它可以使用**你所有的内存**。

> 问题2：32位进程在这种环境下可以使用多少内存？

对于 x64 机器上的 x86 可执行文件，它默认消耗 2GB。如果 IMAGE_FILE_LARGE_ADDRESS_AWARE 设置它可以使用**4GB**。^([微软](http://msdn.microsoft.com/en-us/library/aa366778.aspx))_

有趣的是，如果未设置或清除 IMAGE_FILE_LARGE_ADDRESS_AWARE，则 x64 可执行文件在 x64 机器上最多可以使用**2GB 。**

> 问题3：（我不确定）如果32位进程在这种环境下只能使用2GB的ram，（即使它是LARGE ADDRESS SPACE AWARE：3gb），另一方面（据我所知）大多数的游戏是 32 位的；这是否意味着：虽然我们安装了 8gb 的内存，但（例如游戏）在任何给定时间只能使用 2-3gb 的内存？？？？

没有它的**4GB**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T09:25:48.537

在像 Windows 这样的按需分页保护模式操作系统上，可用的 RAM 量与进程可以使用的*虚拟内存量完全无关。*限制因素是分页文件可以支持多少虚拟内存。Windows 中的分页文件以在启动时和注册表设置时确定的大小开始。从那里，当进程需要更多内存时，Windows 可以在必要时增加页面文件的大小。

> 64位进程可以使用这个环境多少内存？

这是不可预测的，但至少与页面文件中的当前可用空间一样多。您通常会获得大约 13 GB 的数据。这个空间可以突飞猛进地*增长，在程序的第二次运行时，它可能会消耗更多的内存，因为 Windows 会赶上并增加页面文件。*您可以在Mark Russinovich的这篇[博客文章](http://blogs.technet.com/b/markrussinovich/archive/2008/11/17/3155406.aspx)中看到这一点。

> 在这种环境下 32 位进程可以使用多少内存？

默认为 2 GB。程序的 EXE 标头中的大地址感知选项位可以将其扩展到 4 GB。大多数 32 位程序将关闭此选项位。

> 如果一个 32 位进程在这种环境下只能使用 2GB 的内存...

它是 2 或 4 GB，而不是 3。再次强调，它与 RAM 无关。即使在具有 8 GB RAM 的机器上，LAA 的 32 位进程也*不太*可能消耗 4 GB RAM。RAM 是一种共享资源，所有进程都需要其中的一部分。消耗 4 gig 的 32 位进程很可能会将其中的一些页面换出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T09:24:57.543

Win32 应用程序，x64 操作系统：

*   同时地：
    *   高达 2 GB 的地址空间（由于碎片等原因，有效数量较小）
    *   如果进程二进制文件标有 /LARGEADDRESSAWARE，则最多 4 GB 的地址空间
*   不一定同时，通过内存映射文件，[映射/取消映射感兴趣的视图](http://alax.info/blog/1325)：
    *   所有可用内存，特别是 4 GB 及更多

# silverlight - 从 导航后仍在运行的 WP7 页面

> ID：14089470
> 
> 赞同：1
> 
> 时间：2012-12-30T08:47:55.703
> 
> 标签：silverlight, windows-phone-7

我正在 Silverlight 中实现一个有很多计时器的游戏。每次从该页面导航时，我都会停止所有这些计时器。

在某些情况下，当我从游戏页面导航到菜单页面时，游戏仍在运行并且我听到游戏声音，尽管计时器都已停止。

那么有没有办法在从 WP7 页面导航时完全杀死它？

谢谢。

更新：

场景如下：

1- 玩家开始游戏。2-当游戏结束时，玩家被导航到结果页面。3- 当播放器在结果页面并按下返回键时，将进行如下处理：

```
 protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        e.Cancel = true;
        NavigationService.Navigate(new Uri("/Pages/MainMenu.xaml", UriKind.Relative));
    } 
```

4-问题是游戏页面的构造函数已执行，尽管我告诉他导航到主菜单而不是返回游戏页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:33:32.273

你没有办法“杀死”一个页面。如果您正在进行向前导航，则页面将保留（并继续运行）在后台，以便您可以使用后退按钮返回到它。如果您正在执行后退导航，则页面将在某个时候被垃圾收集（假设您已取消所有事件，处置任何非托管资源等）

**更新：**

所以我需要指出的第一件事是你在这里误导了用户。他们正在按下后退按钮，而是完成了向前导航。这不仅会在那个时候让用户感到困惑，而且当他们在 MainMenu 页面上并按下后退按钮时会发生什么？他们会返回结果页面（那将是最后一件事）？但是你已经从后台绕了一个弯路，所以用户记住的路是什么和它最终是什么已经不同了。这是可能导致您的提交失败的类型（[5.2.4.1 – 返回按钮：上一页](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh184840%28v=vs.105%29.aspx)）。

就数字 4 而言，导航回页面不会调用构造函数。只有在第一次创建页面时才会调用它。另一方面，向后或向前导航到该页面将调用 OnNavigatedTo 方法，因此请检查那里正在执行哪些工作。

以下是我解决这两个问题的建议：当游戏结束并且用户已导航到结果页面时，使用 NavigationService.RemoveBackEntry()**将游戏页面从后台完全删除。**这将允许页面被垃圾收集器拾取（假设它没有任何其他对象持有对它的引用（见上文））并且将不再处于用户按下后退按钮时所采用的路径中. 如果上一页是 MainMenu 页面（我假设它是，基于名称），那么您的问题就解决了。如果不是，那么可能是时候重新考虑您的导航路径了……

# c# - 如何在 ASP .NET MVC 中重定向到另一个操作时保存模型状态？

> ID：14089472
> 
> 赞同：4
> 
> 时间：2012-12-30T08:48:19.373
> 
> 标签：c#, asp.net-mvc, modelstate

我有一个家庭控制器

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var m = new ModelClass
                    {
                        Prop1 = 1,
                        Prop2 = "property 2"
                    };

        return View(m);
    }

    public ActionResult SubAction()
    {
        ModelState.AddModelError("key", "error message value");
        return RedirectToAction("Index");
    }

} 
```

模型：

```
public class ModelClass
{
    public int Prop1 { get; set; }
    public string Prop2 { get; set; }
} 
```

并查看：

```
@model MvcApplication9.Models.ModelClass
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@Html.TextBoxFor(m => m.Prop1)
@Html.TextBoxFor(m => m.Prop2)

@Html.ValidationMessage("key")
<br/>
@Html.ActionLink("action", "SubAction", "Home") 
```

当我单击`action`actionlink 时，我希望看到`error message value`，但是当我从重定向`SubAction`到`Index`action时，`ModelState`错误会丢失。如何保存这些模型错误，设置在 中`SubAction`，并在视图中显示它们，由`Index`操作返回？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T08:57:46.950

如果您只是想获得一条错误消息，请使用`TempData`：

```
TempData.Add("error", "I'm all out of bubblegum..."); 
```

然后，在您的其他操作或视图中，您可以使用`TryGetValue`：

```
object message = string.Empty;

if(TempData.TryGetValue("error", out message)
{
     // do something with the message...
} 
```

# c# - UnitOfWork类的结构图和生命周期

> ID：14089476
> 
> 赞同：2
> 
> 时间：2012-12-30T08:48:40.403
> 
> 标签：c#, dependency-injection, ef-code-first, structuremap

我使用结构映射库和以下代码在 WinForm 应用程序中配置 DI：

```
 private static void InitializeStructureMap()
        {
            ObjectFactory.Initialize(x =>
            {
                x.For<IUnitOfWork>().HybridHttpOrThreadLocalScoped().Use
                    <CouponContext>();

                x.For<ICouponService>().Use<EFCouponService>();
                x.For<IUserService>().Use<EFUserService>();
            });
        } 
```

我也使用以下代码以一种形式获取类的实例：

```
private IUnitOfWork uow;
private IUserService userService;

public LoginForm()
{
    InitializeComponent();

    uow = ObjectFactory.GetInstance<IUnitOfWork>();
    userService = ObjectFactory.GetInstance<IUserService>();
} 
```

我的 App 中 UnitOfWork 的生命周期如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T09:04:35.373

默认情况下，它是每个请求，但您可以配置它

```
x.For<IUnitOfWork>()
 .LifecycleIs(Lifecycles.GetLifecycle(InstanceScope.Singleton)) 
```

从文档：

```
PerRequest - The default operation.  A new instance will be created for each request.
Singleton - A single instance will be shared across all requests
ThreadLocal - A single instance will be created for each requesting thread.  Caches the instances with ThreadLocalStorage.
HttpContext - A single instance will be created for each HttpContext.  Caches the instances in the HttpContext.Items collection.
HttpSession - A single instance will be created for each HttpSession.  Caches the instances in the HttpContext.Session collection.  Use with caution.
Hybrid - Uses HttpContext storage if it exists, otherwise uses ThreadLocal storage. 
```

# knockout.js - 嵌套数组的敲除映射

> ID：14089483
> 
> 赞同：2
> 
> 时间：2012-12-30T08:50:12.837
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0, knockout-mvc

这是我抓取数据并调用映射的 javascript：

```
function loadData() {
    currentViewModel.isLoading(true);
    $.get('/api/myevents/' + eventId, null, function (data) {
        var details = ko.mapping.fromJS(data);
        currentViewModel.eventDetails(details);
    });
};

var viewModel = function () {
    var _self = this;
    this.eventDetails = ko.observable(null);
    this.isLoading = ko.observable(false);
    this.addShow = function () {
        addShowDialog();
    };
};

var currentViewModel = new viewModel();

ko.applyBindings(currentViewModel);

loadData(); 
```

在我将数组添加到返回的数据中之前，它似乎可以正常工作。出于某种奇怪的原因，它没有被淘汰赛映射。

我附上了映射两侧对象的屏幕截图。一般来说，我是淘汰赛的新手，我在这里错过了一些基本的东西吗？

谢谢。

![从服务器返回的数据](../Images/11fb3e111c4c0ac579fb32754b90ae8a.png) ![敲除映射的数据](../Images/789eab72a5a75bee13332448bad27f87.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T13:54:24.967

`Shows: Object[0]`您是否通过and来判断失败`length: 0`？如果你看`_latestValue`你会看到`Array[5]`。一个 Array 映射到一个`ObservableArray`，它是一个函数。你必须调用函数 - `Shows()`，在这种情况下 - 来访问里面的真实数组。

这是一个显示数组映射工作正常的小提琴：

[http://jsfiddle.net/jearles/VyH6y/](http://jsfiddle.net/jearles/VyH6y/)

您可以使用此示例来映射到您的确切场景。

# php - 如何防止AJAX服务器端传输？

> ID：14089485
> 
> 赞同：1
> 
> 时间：2012-12-30T08:50:34.570
> 
> 标签：php, ajax, abort, transmission

不问如何中止 AJAX。

在这种情况下，有谁知道如何防止服务器传输？

例如，在动态分页中，用户可能一次快速滚动 1 行，从而引起许多请求。

这可以在客户端 jQuery 上轻松取消`abort`，但是对于我们这些在带宽分配上吝啬的人来说，我们如何才能在收到新请求时阻止先前的请求传输？

提前谢谢了！

**细节**

实际上，这是因为我使用的是 jQuery UI Slider，并且我已经将`slide`事件设置为命中服务器。

正如你所料，如果你把那个傻瓜滑过 10%，服务器就像疯了一样被击中，即使我已经`abort`编辑了，它仍在传输所有数据。

这是问题的真正根源，因为可能（在我看来）快速按下向上或向下按钮是无法停止的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T09:23:09.087

我想我想多了。

在动态分页的情况下，我想我可以在 php 的开头设置一个`$_SESSION`等于并将它保存在一个变量中。`microtime(true)`

在传输（或任何其他资源密集型步骤）之前，我可以检查它是否仍然相等。如果没有，`exit`.

但是，如果其他人可以提出允许多个并行请求的通用解决方案，他们会得到我的检查和 +1。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-30T09:03:52.977

在这种情况下，您可以考虑使用服务器发送的事件。这将打开一个持久的 HTTP 连接，用于将数据从服务器传输到客户端。这样可以防止客户端快速请求数据并浪费带宽。示例代码：

服务器端：（PHP）

```
<?php
@set_time_limit(0);
header('Content-type: text/event-stream');
header('Transfer-encoding: chunked');
while(true){
    echo 'data:'.$data."/n/n";//todo: send data here
    ob_flush();
    flush();
}
?> 
```

客户端：（javascript）

```
var ev = new EventSource('path/to/script');
ev.onmessage = function(e){
    var data = e.data;
    //todo: handle data here
}; 
```

希望这可以帮到你。

# android - 收到电子邮件后自动从电子邮件正文拨打号码的代码

> ID：14089488
> 
> 赞同：0
> 
> 时间：2012-12-30T08:50:46.160
> 
> 标签：android, email

我是安卓世界的新手。有没有办法拨打从特定电子邮件地址收到的电话号码，以便在收到电子邮件时，无需用户交互即可自动拨打电子邮件主题或内容中出现的否

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T09:00:32.850

不确定您所说的“直接”是什么意思，但是有一种方法可以检测 a 中的电话号码`String`并使其可点击并进入电话应用程序。这是使用[Linkify](http://developer.android.com/reference/android/text/util/Linkify.html)类完成的。例如，您可以在`TextView`包含消息的内容上调用以下方法，并`Linkify`使其检测到的每个电话号码都可点击。

```
Linkify.addLinks(textView, Linkify.PHONE_NUMBERS); 
```

希望这可以帮助。

# c# - 页面导航后计时器未触发

> ID：14089489
> 
> 赞同：0
> 
> 时间：2012-12-30T08:50:57.287
> 
> 标签：c#, timer, windows-phone-8

我有这个类可以在一段时间内运行函数：

```
namespace Test
{
    public static class At
    {
        private static void ExecuteDelayedAction(object o)
        {
            (o as Action).Invoke();
        }

        public static void Do(Action action, TimeSpan delay, int interval = Timeout.Infinite)
        {
            new Timer(new TimerCallback(At.ExecuteDelayedAction), action, Convert.ToInt32(delay.TotalMilliseconds), interval);
        }
        public static void Do(Action action, DateTime dueTime, int interval = Timeout.Infinite)
        {
            if (dueTime >= DateTime.Now) Do(action, dueTime - DateTime.Now, interval);
        }
        public static void Do(Action action, int delay, int interval = Timeout.Infinite)
        {
            Do(action, TimeSpan.FromMilliseconds(delay), interval);
        }
    }
} 
```

而且在我的应用程序中，我有两个页面 -`Login.xaml`和`MainPage.xaml`. 仅出于测试目的，我在`MainPage`构造函数中放入了以下代码：

```
public MainPage()
{
    InitializeComponent();
    At.Do(delegate { Debug.WriteLine("MainPage"); }, 5000);
} 
```

我的问题如下：如果应用程序`MainPage`首先打开，那么计时器工作正常并且委托被执行。但是，如果应用程序`Login`首先打开然后导航到，`MainPage`那么计时器就会静默失败。为什么会发生，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:39:58.487

我怀疑您正在创建的计时器正在被垃圾收集（GC'ed），因为您没有在任何地方持有对它的引用，而只是删除了对新创建的计时器的引用。

由于在页面之间导航会导致创建相当多的内存，因此可能会触发 GC。

尝试通过保留对计时器对象的引用来修复它。我会创建一个`Do`类实例，您可以在其中隐藏一个私有计时器，并保留对它的引用。但是，如果您想保留当前的静态类设计，您可以只返回一个作为计时器的对象。

```
 public static object Do(Action action, TimeSpan delay, int interval = Timeout.Infinite)
    {
        var t = new Timer(new TimerCallback(At.ExecuteDelayedAction), action, Convert.ToInt32(delay.TotalMilliseconds), interval);
        return t;
    } 
```

然后您需要在页面中存储对计时器的引用。

```
public MainPage()
{
    InitializeComponent();
    this.doObject = At.Do(delegate { Debug.WriteLine("MainPage"); }, 5000);
} 
```

当然，如果`MainPage`是 GC，那么您的计时器也会如此，但您可以通过将计时器的范围更改为适合您要运行的操作的范围来解决此问题。

# php - 翻译 wordpress 主题

> ID：14089497
> 
> 赞同：1
> 
> 时间：2012-12-30T08:53:07.277
> 
> 标签：php, wordpress

我想将我的语言文件加载到 wordpress 模板中。为此，我在模板根目录中创建了一个名为 (languages) 的文件夹。我还为该目录中的语言生成了 (*.po , *.mo) 文件。

我已将此代码添加到 functions.php 文件中：

```
 load_theme_textdomain( 'mytheme', TEMPLATEPATH.'/languages');

    $locale_file = TEMPLATEPATH."/languages/$locale.php";
    if ( is_readable($locale_file) )
    {
        require_once($locale_file); 
    } 
```

我的语言文件的名称是 (ar.po,ar.mo)。所以我尝试使用这条线：

```
_e("home","mytheme"); 
```

但没有任何替换，文字还是一样。问题是什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T09:49:20.000

我不确定这是否是问题所在，但`wp-config.php`也必须启用语言支持。

例子：

```
define('WPLANG', 'bg_BG');
define('WP_LANG_DIR', $_SERVER['DOCUMENT_ROOT'].'wordpress/languages'); 
```

[从这里](http://codex.wordpress.org/Editing_wp-config.php#Language_and_Language_Directory)复制：

> WPLANG 定义语言翻译 (.mo) 文件的名称。WP_LANG_DIR 定义 WPLANG .mo 文件所在的目录。如果 WP_LANG_DIR 未定义，WordPress 首先查找 wp-content/languages，然后查找 wp-includes/languages 以查找由 WPLANG 文件定义的 .mo。

# php - 为什么不能使用 mootools 更改 cookie 值？

> ID：14089504
> 
> 赞同：0
> 
> 时间：2012-12-30T08:53:48.257
> 
> 标签：php, cookies, mootools

为什么不能使用 mootools 更改 cookie 值？
如果我在 php 中设置了 cookie 值，我将无法使用 mootools 更改 cookie 值。
为什么失败？它是mootools的错误吗？

```
<?php 
    setcookie('drres','hello');
?>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-yui-compressed.js"></script>
<script type="text/javascript">

    function drres_cookie_read(){
        alert(Cookie.read('drres'));
    }
    function drres_cookie_write(){
        Cookie.write('drres','world');
        alert(Cookie.read('drres'));    // result is "hello" not "world",why?
    }
</script>
<button onclick="drres_cookie_read()">read</button>
<button onclick="drres_cookie_write()">write</button> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:08:47.900

您不能在同一实例/页面中设置和访问 cookie。浏览器识别 cookie 并根据从服务器发送到浏览器的标头存储它。从技术上讲，您无法更新 cookie，只能用新的覆盖它一个同名的。设置后您必须进行重定向或刷新`setcookie('drres','world');`。使用 更新值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T09:24:31.677

我懂了。我认为这是一种跨脚本保护。您不能写入或删除服务器设置的 cookie。（否则，例如，您将能够覆盖登录 cookie）。

# jquery - 滚动（鼠标触摸边框时向左/向右）行为类似于 Windows 8 但使用 jQuery

> ID：14089511
> 
> 赞同：2
> 
> 时间：2012-12-30T08:54:17.797
> 
> 标签：jquery, html

我喜欢我们可以在 Windows 8 起始页上“滚动”的方式：我们只需触摸屏幕的左边界或右边界，显示屏就会移动。你明白我的意思吗？

有没有办法用 jQuery 重现这种行为？

因此，当我将鼠标光标移动到页面的右边框时，页面会自动向右滚动。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T09:08:03.993

**编辑：**概念证明：

## [jsBin 演示](http://jsbin.com/obocen/4/edit)

你当然可以：

*   你需要知道元素的宽度
*   应用隐藏的溢出
*   跟踪`mousemove`元素内部`offset`
*   如果鼠标在“热点”内，则使用`scrollLeft` **方向动画** `-=15` `+=15`
*   像动画一样`.stop().animate({scrollLeft: direction },200, 'linear', loop);`（`loop`你的函数名回调在哪里）

jQuery：

```
var direction = '';
function loop(){
  $('#movable').stop().animate({scrollLeft: direction },200,'linear',loop);
}

var movableW = $('#movable').width();

$('#movable').on('mousemove',function( e ){

  var ofs = $(this).offset();
  var pos = {X: e.pageX-ofs.left};

  if( pos.X < 20){
     direction = '-=20';
     loop();
  }else if(pos.X > movableW-20){
     direction = '+=20';
     loop();
  }else{
     $(this).stop();
  }

}).on('mouseleave', function(){
  $(this).stop(); 
}); 
```

# c - 多维数组中的字符串初始化

> ID：14089514
> 
> 赞同：4
> 
> 时间：2012-12-30T08:54:53.813
> 
> 标签：c, multidimensional-array

如何在多维数组中分配字符串值，将数组作为函数参数发送，并将其返回给主函数？我试过这个，但它给出了一个错误：

```
char a[250][250][250];   // does not work
a[][0][2] = "0";         // does not work
a[][1][2] = "0";         // does not work

char a[][2][2] = {"0", "1"};  // works

// error: expected primary-expression before ']' token
a[i][j][max] = add_func(a[i][j][], i, j); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T08:58:05.817

声明后你不能分配，但使用`strcpy()`

```
char a[250][250][250];

strcpy(a[0][1],"0"); 
```

或在声明时指定：

```
char a[250][250][250] = {"0","2"};  
char a[][250][250] = {"0","2"}; 
```

或者如果你想分配一个字符。

```
a[i][j][k] = '0'; 
```

其中 i、j、k 是小于 250 的任何值

* * *

## 如何在 C 中声明和初始化 3D 数组

通常`a[3][4][2]`是一个三维数组，可以看作

`a[3][4][2]`：由**3 个二维数组**组成，其中**每个二维数组由 4 行和 2 列组成**。可以声明为：

```
char a[3][4][2] =  { 
                       { //oth 2-D array 
                         {"0"},
                         {"1"},
                         {"2"},
                         {"4"}
                       },
                       { //1th 2-D Array
                         {"0"},
                         {"1"},
                         {"2"},
                         {"4"}
                       },
                       { //2nd 2-D array
                         {"0"},
                         {"1"},
                         {"2"},
                         {"4"}
                       },
                   }; 
```

**注意**：“1”表示两个字符，另外一个来自 null ('\0') 字符。

**如果是整数数组：**

```
int a[3][2][3]=  
        {
            { //oth 2-D array, consists of 2-rows and 3-cols
            {11, 12, 13},
            {17, 18, 19}
            },
            {//1th 2-D array, consists of 2-rows and 3-cols
            {21, 22, 23},
            {27, 28, 29}
            },
            {//2th 2-D array, consists of 2-rows and 3-cols
            {31, 32, 33},
            {37, 38, 39}
            },
        }; 
```

[**链接了解**](http://rajkishor09.hubpages.com/hub/How-to-work-with-Multidimensional-Array-in-C-Programming)

* * *

**第二个错误**：

对此，`a[i][j][max]`一个字符不能分配字符串，所以，

```
a[i][j][max] = '0' ; // is correct  expression 
```

但

```
a[i][j][max] = "0";  // is not correct, wrong 
```

* * *

请阅读[**WhozCraig 评论**](https://stackoverflow.com/questions/14089514/string-initialization-in-multidimensional-array#comment19486006_14089514)。您正在堆栈中声明巨大的内存！

* * *

根据[**您的评论**](https://stackoverflow.com/questions/14089514/string-initialization-in-multidimensional-array/14089530#comment19486134_14089530)：

函数声明：

```
char add_func(char a[250][250][250], int i, int j); // function definition 
```

试试这样：

```
 char a[250][250][250];
  a[i][j][max] = add_func(a, i, j ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-30T09:28:58.470

要**初始化**字符串表，您可以使用花括号。最外面的维度（我不知道还能怎么称呼它）或正方形中最左边的数字是可选的。

所以这会起作用

```
char table[][3][10] = {
    {"row1-col1", "row1-col2", "row1-col3"},
    {"row2-col1", "row2-col2", "row2-col3"},
    {"row3-col1", "row3-col2", "row3-col3"},
    {"row4-col1", "row4-col2", "row4-col3"}
    }; 
```

您不需要键入`table[4][3][10]`. 编译器计算它。的大小`table`为 120 字节。由于内容都是您可以使用的字符串

```
char *table[][3] = ... 
```

这将**节省 20% 的空间**。

花括号只能在初始化阶段使用。不是在那之后。因此以下代码将不起作用。

```
a[][0][2] = "0"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T09:05:13.787

您可能想改用指针：

```
char *a[2][2] = { "0", "1", "2", "3" }; 
```

# php - 我应该使用 urandom 还是 openssl_random_pseudo_bytes？

> ID：14089516
> 
> 赞同：9
> 
> 时间：2012-12-30T08:55:23.367
> 
> 标签：php, random, salt

我正在用 php 5.4 开发一个站点，我想知道哪个更好地用于生成随机盐以确保密码安全？

```
$salt = sha1(openssl_random_pseudo_bytes(23)); 
```

或者

```
$seed = '';
$a = @fopen('/dev/urandom','rb');
$seed .= @fread($a,23);
$salt = sha1(seed); 
```

还是我应该选择：

```
$salt =  openssl_random_pseudo_bytes(40); 
```

或者

```
$salt = '';
$a = @fopen('/dev/urandom','rb');
$salt .= @fread($a,23); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-30T10:23:52.820

在实践中，几乎可以肯定没有区别。

两者都[`openssl_random_pseudo_bytes`](http://php.net/openssl_random_pseudo_bytes)提供`/dev/urandom`加密安全的伪随机字节源。两者都不能保证是*真正*随机的，但在实践中，通过任何已知或可预见的技术，两者都有望与真正的随机性无法区分。

Kmkaplan 指出`/dev/urandom`在某些条件下可以返回理论上可预测的输出，这在技术上是正确的，如下所述[`man unrandom`](http://linux.die.net/man/4/urandom)：

> “从*/dev/urandom*设备读取不会阻塞等待更多熵。因此，如果熵池中没有足够的熵，则返回的值理论上容易受到驱动程序使用的算法的加密攻击.如何做到这一点的知识在当前的非机密文献中是不可用的，但理论上可能存在这样的攻击。如果这是您的应用程序中的一个问题，请改用*/dev/random*。

[但是，正如OpenSSL 文档](http://www.openssl.org/docs/crypto/RAND_bytes.html)`openssl_random_pseudo_bytes`中所指出的（在内部[调用](https://github.com/php/php-src/blob/master/ext/openssl/openssl.c)OpenSSL 函数），实际上也是如此：`RAND_pseudo_bytes`

> "`RAND_pseudo_bytes()`将**num**个伪随机字节放入**buf**。`RAND_pseudo_bytes()`如果由但通常不用于密钥生成等。”

这些警告实际上都不应该吓到你使用这些方法——它们描述的弱点只是理论上的，除非可能在某些人为的情况下（例如在启动后立即没有硬件 RNG 的无盘嵌入式设备上），并且不应该在通常部署 PHP 的情况下具有实际问题。

结果是，这些随机数生成方法都不会成为密码系统[中最薄弱的环节](https://buildsecurityin.us-cert.gov/bsi/articles/knowledge/principles/356-BSI.html)，因此您可以安全地选择其中任何一种。如果您感到偏执，甚至可以同时使用两者。

* * *

附言。一个优点`openssl_random_pseudo_bytes`是它也可以在 Windows 上运行。另一方面，`/dev/urandom`即使没有安装 OpenSSL PHP 扩展，它也可以在 Unix 上使用。因此，为了获得最大的可移植性，您确实应该实现对两者的支持。

此外，请始终检查您是否确实收到了与预期一样多的字节；例如，您上面问题中的基于代码可能会在不存在`/dev/urandom`的 Windows 等系统上静默返回一个空字符串。`/dev/urandom`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-30T09:02:51.800

出于安全目的，您最好使用`openssl_random_pseudo_bytes`. OpenSSL 负责收集足够的熵来为您提供良好的随机性。`/dev/urandom`被设计为*永远不会*阻塞，并且可能会被欺骗给你不那么随机的字节。

对于随机字节，您不需要通过 SHA1 运行它们。

总而言之，请执行以下操作：

```
$salt = openssl_random_pseudo_bytes(40, $cstrong);
if (! $cstrong) {
    exit('This should not happen');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-03T06:40:04.833

我知道这是一篇旧帖子，但如果有人偶然发现这里是一个简单的解决方案：

compat_random.php
[https://gist.github.com/anzz1/29a787fac8ef6d693b41779911287505](https://gist.github.com/anzz1/29a787fac8ef6d693b41779911287505)

```
<?php
  require_once(dirname(__FILE__) . '/compat_random.php');

  $salt = random_bytes(40);
?> 
```

完毕。

compat_random.php 只有 2KB，62 行代码。
您应该能够将它与任何 PHP 版本一起使用。

它按以下顺序检查这些函数：

*   random_bytes (PHP >= 7) [密码安全]
*   openssl_random_pseudo_bytes (OpenSSL) [加密安全]
*   mcrypt_create_iv (php_mcrypt) [密码安全]
*   /dev/urandom（UNIX 系统）[密码安全]

您很可能确实有其中一个可用，但如果您没有，它最终会回落到

*   mt_rand() (PHP >= 4) [密码不安全，但在大多数情况下都很好]
*   rand() [不安全]

# ruby-on-rails - Rails：将嵌套属性映射到模型的对象

> ID：14089517
> 
> 赞同：0
> 
> 时间：2012-12-30T08:55:34.127
> 
> 标签：ruby-on-rails, ruby

```
# models
class A < ActiveRecord::Base
    has_many :b

class B < ActiveRecord::Base
    belongs_to :a

# controllers
class aController < ApplicationController
    def a_with_b
        @a_with_b = A.find(1, :include => [:b])
        puts @a_with_b # => #<A id:1> // `b` not mapped to `@a_with_b`
        puts @a_with_b.b # => [#<B id:1>, #<B id:2>] // still there's `b`
    end
end 
```

问题：
如何`b`映射到`@a_with_b`？
预期的：

```
puts @a_with_b # => #<A id:1 b:[#<B id:1>, #<B id:2>] > 
```

上面写的所有实际原因是能够获得具有适当结构的序列化对象：例如

```
{something: true, nothing: false, a: @a_with_b}.to_xml # =>

<xml>
  <something>true</something>
  <nothing>false</nothing>
  <a>
    <id>1</id>
    <bs>
      <b> <id>1</id> </b>
      <b> <id>2</id> </b>
    </bs>
  </a>
<xml> 
```

导轨 v.2.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:07:51.300

如果你想序列化 JSON 中的数据，你可以这样做：

```
@a_with_b = A.find(1, :include => [:b])
puts @a_with_b.to_json(:include => [:b]) # return a JSON encoded string
puts @a_with_b.as_json(:include => [:b]) # return a Hash 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T09:27:39.163

我只是花了一些时间来实现这个，看起来发生的事情是从数据库中提取数据，并放入 activerecord 对象缓存中，这样如果你引用它们，它就不需要数据库询问。这些对象最终*不会*以您想要的方式嵌套，但我想不出这应该是一个问题的原因。

换句话说，除非您看到生成的 SQL 查询不符合您的期望，否则这可能是您想要的行为。

# php - Smarty 无法访问 templates_c 中的编译文件

> ID：14089525
> 
> 赞同：1
> 
> 时间：2012-12-30T08:57:11.120
> 
> 标签：php, smarty

我刚刚安装了 cms 系统，但出现以下错误：

```
[function.include]: failed to open stream: No such file or directory in
 /home/postertest/domains/buyuseraccounts.com/public_html/libs/Smarty.class.php 
on line 1283 
```

当我检查 templates_c 文件时，请求的文件在那里：

**%%45^45E^45E480CD%%index.tpl.php**

当我尝试直接通过浏览器访问编译文件时，它会给出 404。当我重命名文件 (%%45^45E^45E480CD%%index.tpl.php) 时，我可以访问它。因此，该错误似乎是由 Apache 引起的。我该怎么办？

**更新**

实际上，现在我在同一服务器上的另一个 CMS 上对其进行了测试，看来我也无法直接访问 templates_c 下的文件。但是，Smarty 不会导致任何错误。我尝试将工作 cms 的 smarty 分布置于非工作状态，但它仍然给出相同的错误。

# mysql - 如何找出未告诉我如何运行的存储过程的参数

> ID：14089531
> 
> 赞同：1
> 
> 时间：2012-12-30T08:58:11.073
> 
> 标签：mysql, sql, stored-procedures

我目前正在参加数据库管理的在线课程。我坚持的问题如下。我已经完成了整个课程并没有找到答案，我也浏览了这里和其他网站。无济于事。所以我想知道是否有人可以帮助我解决这个问题？

问题：假设您的同事为您创建了一个存储过程，但没有告诉您如何运行它。你怎么知道程序使用了哪些参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T09:01:01.817

在下面执行此查询，

```
SHOW CREATE PROCEDURE procedureName; 
```

它将向您显示参数和整个过程是如何创建的。

# java - 发送邮件时出错 - ConnectException

> ID：14089533
> 
> 赞同：3
> 
> 时间：2012-12-30T08:58:24.273
> 
> 标签：java, email, jakarta-mail, connectexception

我使用以下 Java 代码发送电子邮件。

```
import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;
import javax.activation.*;

public class SendEmail
{
   public static void main(String [] args)
   {    

      String to = "abcd@gmail.com";
      String from = "web@gmail.com";
      String host = "localhost";
      Properties properties = System.getProperties();
      properties.setProperty("smtp.gmail.com", host);
      Session session = Session.getDefaultInstance(properties);
      try{
         MimeMessage message = new MimeMessage(session);
         message.setFrom(new InternetAddress(from));
         message.addRecipient(Message.RecipientType.TO,
                                  new InternetAddress(to))
         message.setSubject("This is the Subject Line!");
         message.setText("This is actual message");
         Transport.send(message);
         System.out.println("Sent message successfully....");
      }catch (MessagingException mex) {
         mex.printStackTrace();
      }
   }
} 
```

当我运行该文件时，我收到以下错误：

```
javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25;
nested exception is:
java.net.ConnectException: Connection refused: connect
at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1282)
at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:370)

Caused by: java.net.ConnectException: Connection refused: connect
    at java.net.DualStackPlainSocketImpl.connect0(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source) 
```

如果有人可以帮助我，我将不胜感激。

如何解决`ConnectException`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T09:03:55.590

我可以看到您正在尝试`Gmail`用作您的 SMTP 服务器。此行不正确：

```
properties.setProperty("smtp.gmail.com", host); 
```

您使用主机名作为属性名，这是不正确的。因为您没有设置`mail.smtp.host`属性 JavaMail 尝试连接到 'localhost'。改为设置以下属性：

```
properties.put("mail.smtp.starttls.enable", "true"); 
properties.put("mail.smtp.host", "smtp.gmail.com");
properties.put("mail.smtp.user", "username"); // User name
properties.put("mail.smtp.password", "password"); // password
properties.put("mail.smtp.port", "587");
properties.put("mail.smtp.auth", "true"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T09:01:13.450

将主机名更改为：smtp.gmail.com

```
String host = "localhost"; 
```

将其更改为：

```
String host = "smtp.gmail.com" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T09:03:05.967

你必须尝试这样的事情

```
String host = "smtp.gmail.com";
String from = "user name";
Properties props = System.getProperties();
props.put("mail.smtp.host", host);
props.put("mail.smtp.user", from);
props.put("mail.smtp.password", "asdfgh");
props.put("mail.smtp.port", "587"); // 587 is the port number of yahoo mail
props.put("mail.smtp.auth", "true");

Session session = Session.getDefaultInstance(props, null);
MimeMessage message = new MimeMessage(session);
message.setFrom(new InternetAddress(from));

InternetAddress[] to_address = new InternetAddress[to.length];
int i = 0;
// To get the array of addresses
while (to[i] != null) {
    to_address[i] = new InternetAddress(to[i]);
    i++;
}
System.out.println(Message.RecipientType.TO);
i = 0;
while (to_address[i] != null) {

    message.addRecipient(Message.RecipientType.TO, to_address[i]);
    i++;
}
message.setSubject("sending in a group");
message.setText("Welcome to JavaMail");
// alternately, to send HTML mail:
// message.setContent("<p>Welcome to JavaMail</p>", "text/html");
Transport transport = session.getTransport("smtp");
transport.connect("smtp.mail.yahoo.co.in", "user name", "asdfgh");
transport.sendMessage(message, message.getAllRecipients());
transport.close(); 
```

现在你正在尝试连接到**localhost**

礼貌[这个答案](https://stackoverflow.com/a/46681/662250)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T09:03:21.260

尝试将此添加到您的属性中：

```
private static final String SMTP_HOST = "smtp.gmail.com"; //Use Gmail's SMTP Host.
private static final String SMTP_PORT = ""; //Use Gmail's Port Number for SMTP.
properties.setProperty("mail.smtp.host", SMTP_HOST);
properties.setProperty("mail.smtp.port", SMTP_PORT); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-04T05:50:28.630

假设我的

电子邮件：liferayasif@gmail.com

密码：密码

```
public Session getSession() {

        Properties props = new Properties();

        props.put("mail.smtp.starttls.enable", "true"); 

        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.user", "liferayasif"); // User name
        props.put("mail.smtp.password", "password"); // password
        props.put("mail.smtp.port", "587");
        props.put("mail.smtp.auth", "true");

        props.put("mail.session.mail.pop3.host", "pop.gmail.com");

        props.put("mail.session.mail.pop3.password", "password");

        props.put("mail.session.mail.pop3.port", "110");

        props.put(" mail.session.mail.pop3.user", "USER");

        props.put("mail.session.mail.imap.host", "imap.gmail.com");

        props.put("mail.session.mail.imap.port", "993");

        props.put("mail.session.mail.store.protocol", "imap");

        props.put("mail.session.mail.transport.protocol", "smtp");

        props.put("mail.session.mail.smtp.host", "smtp.gmail.com");

        props.put("mail.session.mail.smtp.password", "password");

        props.put("mail.session.mail.smtp.user", "liferayasif@gmail.com");

        props.put("mail.session.mail.smtp.port", "465");

        props.put("mail.session.mail.smtp.auth", "true");

        props.put("mail.session.mail.smtp.starttls.enable", "true");

        props.put("mail.session.mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");

        Session session = Session.getInstance(props,
         new javax.mail.Authenticator() {
            protected PasswordAuthentication getPasswordAuthentication() {
               return new PasswordAuthentication("liferayasif", "password");
            }
         });

      return session;
    } 
```

# javascript - 流体图像翻转 Twitter Bootstrap Rails

> ID：14089543
> 
> 赞同：0
> 
> 时间：2012-12-30T09:00:19.423
> 
> 标签：javascript, html, css, twitter-bootstrap-rails

我已经开始为我正在开发的 Rails 应用程序创建翻转图像效果。我正在使用 twitter-bootstrap-rails gem 来保持应用程序在设备上看起来不错。我当前的实现遇到的问题是，当调整浏览器大小时，图像不再调整为浏览器的宽度，并且翻转效果超出了图像的边界。我认为问题源于`.photo`课堂，但我不确定如何解决它，或者是否有更好的方法来实现我想要的结果？

**HTML**

```
<% @photos.each do |photo| %>
<div class="photo row">
  <div class="span8 photo"><%= image_tag photo.image_url(:large).to_s %></div>
  <div class="span4 hover">
    <div class="bg"></div>
    <div class="description">
      <h4><%= link_to photo.title, photo_path(photo) %></h4>
      <hr>
      <p><%= raw photo.tag_list.map { |t| link_to t, tag_path(t)}.join(' ') %></p>
    </div>
  </div>
</div>
<% end %> 
```

**CSS：**

```
 .photo {
    position: relative;
    width: 770px;
  }

  .photo .hover {
    position: absolute;;
    height: 90.4%;
    left: 3.09%;
    top: 4.8%;
    width: 93.82%;
    display: none;
  }

  .photo .hover .bg {
    z-index: 1;
    position: absolute;
    height: 100%;
    width: 100%;
    background: #FFF;
    -webkit-opacity: 0.8;
    -moz-opacity: 0.8;
    filter:alpha(opacity=80);
    opacity: 0.8;
  }

  .photo .hover .description {
    position: relative;
    text-align: center;
    top: 40%;
    z-index: 2;
  } 
```

**JS**

```
jQuery(document).ready(function($) {

  $(".photo").mouseenter(function () {
      $(this).find('.hover').fadeIn(300);
  }).mouseleave(function (){ 
    $(this).find('.hover').stop(true, true).fadeOut(300);
  });

}); /* End Dom Ready */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T09:47:12.477

我不是前端专家，但您遇到的问题可能是由于事件侦听器在调整大小时被引导程序的 JS 清除所致。出于某种原因，DOM 元素的行为就像它们在某些类型的转换下被销毁和重新创建一样，这意味着您的回调将消失。

解决这个问题的方法曾经是使用`.live()`，但这显然[已被弃用](http://api.jquery.com/live/)。看起来`.on()`就是你想要的。但是，有一些警告！

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。

[来源](http://api.jquery.com/on/)

这意味着您需要确保将事件附加到一个容器，该容器保证不会以清除事件侦听器的方式进行操作，但理想情况下，该容器应尽可能靠近 DOM 层次结构。如果还没有一个，只需用一个 div 包围图像就可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T06:28:43.697

Bootstrap 使用媒体查询来调整 span8 的大小。因此，我们需要重新排列 html 以在 span8 中包含悬停元素，然后使用尺寸百分比来保留相对于照片的纵横比。

**HTML**

```
<% @photos.each do |photo| %>
<div class="row">
  <div class="span8 photo">
    <%= image_tag photo.image_url.to_s %>
    <div class="hover">
      <div class="bg"></div>
      <div class="description">
        <h4><%= link_to photo.title, photo_path(photo) %></h4>
        <hr>
        <p><%= raw photo.tag_list.map { |t| link_to t, tag_path(t)}.join(' ') %></p>
      </div>
    </div>
  </div> 
</div>
<% end %> 
```

**CSS**

```
.photo {
  position: relative;
}

.photo .hover {
  position: absolute;
  height: 90%;
  width: 94%;
  top: 0;
  left: 0;
  padding: 3%;
  display: none;
}

.photo .hover .bg {
  z-index: 1;
  position: relative;
  height: 100%;
  width: 100%;
  background: #FFF;
  -webkit-opacity: 0.8;
  -moz-opacity: 0.8;
  filter:alpha(opacity=80);
  opacity: 0.8;
}

.photo .hover .description {
  position: absolute;
  text-align: center;
  top: 40%;
  width: 94%;
  height: 90%;
  z-index: 2;
} 
```

# iphone - 每次我滑动到下一页时，内存都会增加很多。仪器泄漏报告和静态分析仪都可以

> ID：14089545
> 
> 赞同：1
> 
> 时间：2012-12-30T09:00:52.900
> 
> 标签：iphone, objective-c, ios, memory-leaks, instruments

在 xocde 中使用 ARC。app的素材页面是这样的： ![在此处输入图像描述](../Images/01de5a04a1e16e32700c98b2ebb393b0.png)

该应用程序运行良好，但是当我滑动到下一页时，内存增加了很多（每页大多为 30k），因为仪器分配给出了以下内容： ![在此处输入图像描述](../Images/f2f34c59d28b38643bc474a779d0f628.png)

细节是： ![在此处输入图像描述](../Images/83d36a7ea5fee571dbb8a92ba9eacc1c.png)

我不明白出了什么问题？我的环境是：xcode 4.5.2，启用了 ARC。真的很感激有人可以帮助我。

重点是： ![在此处输入图像描述](../Images/01269d5f37aff65b645644bee50c76e8.png)

然后是快照细节：

![在此处输入图像描述](../Images/1d6b9936fcb55bc2a95129c1d467f935.png)

我很确定在滑动到下一页时我删除了所有视图对象，因此应用程序应该清理上一页中这些视图对象的内存。只是不知道为什么这些 304 字节的对象会增加内存以及这里出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T09:11:13.817

这似乎是一个废弃记忆的案例。废弃的内存并不完全是内存泄漏，因为您不会丢失该内存的踪迹。相反，它是在可能/应该被释放时未释放的内存，因此整体内存使用量增加。

查看[这篇文章](http://developer.apple.com/library/ios/#recipes/instruments_help-memory-allocations-help/Finding_Abandoned_Memory/07_Finding_Abandoned_Memory.html)，了解在 Instruments 中使用 heapshot 分析处理此问题的方法。

关于 heapshot 分析方法的另一个有趣的分步讨论在[这里](http://useyourloaf.com/blog/2011/03/08/using-heapshots-to-find-abandoned-memory.html)。

# php - PHP：为什么会出现语法错误，意外的“endwhile”（T_ENDWHILE）？

> ID：14089549
> 
> 赞同：-1
> 
> 时间：2012-12-30T09:01:43.150
> 
> 标签：php

PHP：为什么在第 38 行出现语法错误、意外的“结束时”(T_ENDWHILE)？我第一次尝试使用 php 和 mysql 创建一个论坛，但我不确定我的代码有什么问题。

```
<?php
session_start();
require"db_connect.php";

$sql = "SELECT forum_id, forum_name FROM forum_tbl";
if ($query = $db->prepare($sql)){
    $query->bind_result($f_id, $f_name);
    $query->execute();
    $query->store_result();
}else{
    echo $db->error;
}

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<title>Forum</title>
<meta/>
<style type="text/css">
</style>
</head>

<body>
<div class="container">
<div class="content">
    <table align="center" width="80%">
        <?php
        if($query->num_rows !==0)
        while($row = $query->fetch())
        ?>  
        <tr>
        <td><a href="forum.php?id=<?php echo $f_id?>"><?php echo $f_name;?>    </a></td>
        </tr>
        <?php endwhile; endif;?>    
    </table>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T09:02:53.313

您缺少`:`for`if`和`while`。它应该是

```
if($query->num_rows !==0):
while($row = $query->fetch()): 
```

看到最后的`:`s 了吗？

阅读有关[PHP 备用控制结构语法](http://php.net/manual/en/control-structures.alternative-syntax.php)的更多信息。

# html - 全屏按钮创建

> ID：14089566
> 
> 赞同：0
> 
> 时间：2012-12-30T09:04:33.547
> 
> 标签：html, wordpress, flash, online-game

我使用 iframe 插件嵌入 swf 文件以在我的网站上玩游戏。但我想在这个游戏的下方显示一个全屏按钮。我该怎么做？我使用 WordPress。我的网站[http://www.dewdropzone.com](http://www.dewdropzone.com)我使用这种类型的嵌入代码。

```
<div align='center'>
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,16,0" id="game" height="490" width="650">
<param name="movie" value="http://www.cricketgames.me/games/swf/cricket-rivals.swf" />
<param name="quality" value="high" />
<param name="allowscriptaccess" value="always" />
<embed src="http://www.cricketgames.me/games/swf/cricket-rivals.swf" height="490" width="650" quality="high" name="FlashContent" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed>
</object>
<br /><a href='http://www.cricketgames.me/'>Cricket Games</a>
</div> 
```

# javascript - 使用Javascript调整页面宽度

> ID：14089569
> 
> 赞同：1
> 
> 时间：2012-12-30T09:04:40.600
> 
> 标签：javascript, html, css, slider

我的页面结构如下：

```
<container>
   <header>
   <main-content>
   <footer>
</container> 
```

我正在使用`javascript`以下代码调整容器的宽度：

```
function getPageSize() {
            var de = document.documentElement;
            var w = window.innerWidth || self.innerWidth || (de && de.clientWidth) || document.body.clientWidth;
            var h = window.innerHeight || self.innerHeight || (de && de.clientHeight) || document.body.clientHeight;
            arrayPageSize = [w, h];
            return arrayPageSize;
        }
        $(document).ready(function () {
            var page = getPageSize();
            var x = page[0];
            var y = page[1];
            $("#container").css({width: (x) + 'px'}); 
```

**编辑**

现在，我正在使用一个滑块 [将 a 设置`div`为宽度`9999em`并在其中插入滑块元素]。当浏览器窗口最大化时，页面打开良好。

对于不同的分辨率设备，有没有更好的方法来实现这一点，这样当我按下 时`(Ctrl)+(-)`，页面仍然会变得更小而显示另一个`screens`。我怎样才能使页面保持在中间，而不显示其他`screens`.

这是图像： ![在此处输入图像描述](../Images/f3670472dfd9792b95cf74a65c250c91.png)

*我实验的一件事是*：如果我将`container`元素的宽度设置为`px`，我会得到想要的结果。但是，我无法预先`container`设置（我正在使用 ( `$(window).width()`) 设置的宽度，因为它取决于不同的设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T09:47:16.113

怎么样：

```
$(window).resize(function() {
  var pageSize= $(window).width();
   $("#container").css({width: (pageSize) + 'px'}); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T09:07:54.503

关于什么：

```
width: auto 
```

或者

```
width: 100% 
```

因为它是您页面的最父容器...

***编辑**后提出问题：* 要使您的容器始终“居中”而不是左对齐，您可以使用：

```
margin: auto 
```

使`container`始终处于中心位置..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T11:28:31.383

你应该看看一些响应式 CSS 框架，它们为各种设备解决了这样的问题。一个例子是 Bootstrap（现在非常流行），但还有其他的。

无论如何，当我想在 Javascript/jQuery 中进行*绝对控制时，我保持中心化的方式是：*

```
var desiredWith = x;
var pad = ($(window).width() - desiredWidth) / 2;
$(selector).css({position: 'absolute', left: pad, right: pad, width: auto;}); 
```

这并不总是（通常？）在一些较旧的浏览器中工作，但我在一家不针对它们的公司工作，所以我不能告诉你哪些坏了。

# php - PHP将链接发布到Facebook作为页面而不是用户

> ID：14089570
> 
> 赞同：1
> 
> 时间：2012-12-30T09:05:07.223
> 
> 标签：php, facebook

我使用以下代码将消息发布到粉丝页面：

```
$message = "test";
$link = "http://test.com";
$pageid = "123456789";
$post_url = '/'.$pageid.'/feed';
$msg_body = array(
'message' => $message,
if ($fbuser) {
try {
$postResult = $facebook->api($post_url, 'post', $msg_body );
} catch (FacebookApiException $e) {
echo $e->getMessage();
}
}else{
$loginUrl = $facebook->getLoginUrl(array('redirect_uri'=>$homeurl,'scope'=>$fbPermissions));
header('Location: ' . $loginUrl);
} 
```

并且工作正常（作为粉丝页面名称发布），但如果我改变：

```
'message' => $message, 
```

到

```
'link' => $link, 
```

以我的用户名而不是粉丝专页发布，可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T09:22:53.360

您必须获得为此页面授予的访问令牌，并在发布时使用它：

```
$accounts = $facebook->api('/me/accounts');
foreach($accounts['data'] as $account){
   if($account['id'] == $pageid){
      $token = $account['access_token'];
   }
}
$msg_body = array(
    'link' => $link,
    'access_token' => $token
);
$postResult = $facebook->api($post_url, 'post', $msg_body); 
```

# qt - 如何为 Windows 安装开源 Qt 库 5 二进制版本

> ID：14089572
> 
> 赞同：5
> 
> 时间：2012-12-30T09:05:20.117
> 
> 标签：qt, visual-c++, installation, qt5

这个问题专门针对`Qt libraries 5.0.0 for Windows (VS 2010 406 MB)`http://qt-project.org/downloads [（](http://qt-project.org/downloads)但我认为它也将适用于未来的 5.xx 版本），并将其安装在“干净的”Windows 工作站上。

需要什么才能让它工作？*我追求的是最小的下载包集，这意味着“完全合格”下载名称的有序列表，最好带有指向 Microsoft 下载的链接。*

来自同一下载页面的最新 Qt Creator 将用作 IDE，因此不需要安装 Visual Studio，如果可以避免，确实会更好。

我目前的理解是，我需要找到 VC++ Express，然后找到它的 SP1 更新，然后找到调试包以获取 Qt Creator 的调试器后端。不确定我是否需要 Windows SDK 包，或者是否可以将 VS 替换为某些版本的 Windows SDK。不，qt-project 网页没有回答这个问题，对于这个特定场景的说明非常模糊（使用二进制库下载而没有完整的非免费 Visual Studio 2010）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-30T10:32:06.587

严格来说，您只需要[Windows SDK v7.1](http://www.microsoft.com/en-us/download/details.aspx?id=8279)及其[SP1 编译器更新](http://www.microsoft.com/en-us/download/details.aspx?id=4422)。一定要安装“Windows 调试工具”（Qt Creator 需要用于调试器集成）。这将安装 VS2010 中包含的命令行编译器和工具。

作为 IDE，您可以使用[Qt Creator](http://qt-project.org/downloads#qt-creator)，这对于 Qt 项目非常棒，甚至对于非 Qt 项目也非常棒。当然你可以随意使用任何你想要的IDE，只是Qt Creator自带了，嗯，什么都有：集成Qt文档、集成GUI设计器、集成QML设计器、集成版本控制（svn/git需要单独安装） .

或者，您需要找到 VS2010 Express 及其更新，尽管这会使您无法在 IDE 中集成 Qt（因为免费的 VS 版本不支持扩展）。

由 hyde 编辑以添加链接（2013 年 1 月测试）：

*   [Visual C++2010 Express 可以从此页面下载](http://www.microsoft.com/visualstudio/eng/downloads)（向下滚动）
*   [Visual Studio 2010 Service Pack 下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=23691)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-21T06:44:26.893

对于 Windows 10 和 Qt 5.7，我下载并安装了以下工具：

*   [Visual Studio 2016 社区](https://www.visualstudio.com/en-us/downloads/download-visual-studio-vs.aspx)
*   [Windows 10 SDK](https://developer.microsoft.com/en-us/windows/downloads/windows-10-sdk)中的 Windows 调试工具（仅选中此项）

# android - 在 sqlite 中更新一列中的所有数据

> ID：14089577
> 
> 赞同：0
> 
> 时间：2012-12-30T09:06:17.673
> 
> 标签：android, sqlite

我在 sqlite 数据库中有数据。当我从数据库中删除数据时，每个数据都有`ID`一个主键，我想使用`ID`数据库中的所有数据。例如，

```
+----+--------+
| ID |  NAME  |
+----+--------+
| 01 | Taylor |
+----+--------+
| 02 |  Mark  |
+----+--------+
| 03 |  Bell  |
+----+--------+
| 04 |  Jane  |
+----+--------+ 
```

然后我`02 | Mark`从数据库中删除，然后数据库必须`ID`自动使用。

```
+----+--------+
| ID |  NAME  |
+----+--------+
| 01 | Taylor |
+----+--------+
| 02 |  Bell  |
+----+--------+
| 03 |  Jane  |
+----+--------+ 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T09:11:12.623

不要那样做。不要仅仅因为删除记录就更改数据库中的 ID。即使 SQLite 不是一个“真正的”数据库 - 不要那样做。

相反，您可以在查询数据库时获取行号。根据[此处的答案](https://stackoverflow.com/questions/9151706/getting-row-number-for-query)，您可以执行以下操作：

```
SELECT id, name, 
    (SELECT COUNT(*) FROM table AS t2 
        WHERE t2.id<=t1.id) AS row_num
FROM table AS t1
ORDER BY id 
```

注意：如果您的表很大，此查询可能会成为性能问题。不要担心它，但请记住它。

# java - 允许用户在 Android 中每天点击一次菜单

> ID：14089579
> 
> 赞同：1
> 
> 时间：2012-12-30T09:07:03.193
> 
> 标签：java, android, eclipse, datetime, actionbarsherlock

我正在创建一个在 actionbarsherlock 中有一个菜单项的程序。现在我希望用户每天单击该菜单一次，不再单击。我怎样才能做到这一点？这是我到目前为止所拥有的：

```
int hour = today.get(Calendar.HOUR_OF_DAY);

if (hour < 24) {

    try {
        if (gotGenders.contentEquals("Male")) {
            AlertDialog.Builder alertDialog = new AlertDialog.Builder(
                    Monitor.this);
            alertDialog.setTitle(gotNames);
            alertDialog.setMessage("You are currently burning "
                    + caloriesForMen() + " calories per hour");
            alertDialog.setPositiveButton("Save",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // TODO Auto-generated method stub

                        }
                    });

            alertDialog.setNegativeButton("Discard",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // TODO Auto-generated method stub
                            dialog.dismiss();
                        }
                    });

            alertDialog.setCancelable(false);
            showAlertDialog = alertDialog.create();
            showAlertDialog.show();
        }
        else if (gotGenders.contentEquals("Female")) {
            AlertDialog.Builder alertDialog = new AlertDialog.Builder(
                    Monitor.this);
            alertDialog.setTitle(gotNames);
            alertDialog.setMessage("You are currently burning "
                    + caloriesForWomen() + " calories per hour");
            alertDialog.setPositiveButton("Save",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // TODO Auto-generated method stub
                            // dialog.dismiss();
                        }
                    });

            alertDialog.setNegativeButton("Discard",
                    new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            // TODO Auto-generated method stub
                            dialog.dismiss();
                        }
                    });

            alertDialog.setCancelable(false);
            showAlertDialog = alertDialog.create();
            showAlertDialog.show();

            count = 1;
        }
    } catch (Exception ex) {
        ex.printStackTrace();

        AlertDialog.Builder errorDialog = new AlertDialog.Builder(
                Monitor.this);
        errorDialog.setTitle("No User Selected!");
        // errorDialog.setMessage("You are currently burning " +
        // caloriesForWomen() + " per hour");
        errorDialog.setPositiveButton("OK",
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog,
                            int which) {
                        // TODO Auto-generated method stub
                        dialog.dismiss();
                    }
                });

        errorDialog.setCancelable(false);
        errorAlertDialog = errorDialog.create();
        errorAlertDialog.show();
    }
} else {
    count = 0;

    AlertDialog.Builder waitDialog = new AlertDialog.Builder(
            Monitor.this);
    waitDialog.setTitle("Wait after the day is over");
    waitDialog.setPositiveButton("OK",
            new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    dialog.dismiss();
                }
            });

    waitDialog.setCancelable(false);
    waitAlertDialog = waitDialog.create();
    waitAlertDialog.show();
} 
```

这使我可以多次选择菜单，如何将其限制为每天仅单击一次？感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T09:41:53.793

要实现这一点，您应该将上次访问的日期存储在某处（db、sharedpreferences、在文件中），然后：

```
long lastVistedDateTime = getLastVistedDateTime();
int lastDay = new Date(lastVistedDateTime).getDay();
int today = Calendar.get(Calendar.DATE);
if (today != lastDay){
    //an other day
    setLastVistedDateTime(Calendar.getInstance().getTimeInMillis());
} 
```

要将日期与当前区域设置进行比较，请使用：

```
String lastDate = DateFormat.getDateInstance(DateFormat.MEDIUM).format(new Date(lastVistedDateTime));
String nowDate = DateFormat.getDateInstance(DateFormat.MEDIUM).format(new Date());
if (!nowDate.equals(lastDate)){
    //an other day
    setLastVistedDateTime(Calendar.getInstance().getTimeInMillis());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T09:56:37.947

我认为总的来说 gezdy 的回答有正确的方法，但我想提出一个简化。

Calendar.DAY_OF_YEAR [http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#DAY_OF_YEAR](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#DAY_OF_YEAR)

为您提供一年中的当前日期 (1-365)。因此，与其以毫秒为单位进行任何数学运算，不如抓住该值并将其存储，并在随后的尝试中进行比较。应该将 gezdy 的答案中的代码减少到大约 3 行（同时做同样的事情）。

唯一可能的缺点是

1.  用户可以更改其设备上的时钟
2.  如果用户一年只使用一次应用程序，然后在一年后的同一天再次使用，则用户可能会遇到应用程序使用被意外阻止的情况。（不大可能）。

# php - Drupal 错误“无法为池分配内存”

> ID：14089588
> 
> 赞同：1
> 
> 时间：2012-12-30T09:08:39.187
> 
> 标签：php, drupal, drupal-6

我的 Drupal 站点出现此错误：

> 警告：未知：无法为池分配内存。在第 0 行的未知中

我观察到了[Wordpress](https://stackoverflow.com/questions/3723316/warning-require-once-function-require-once-unable-to-allocate-memory-for-p)的类似帖子， 但不确定它是否适用于 Drupal。任何人都可以解释我该怎么做。我正在使用 Drupal`6.27`和 PHP `5.2.17`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T10:34:44.033

这是 APC 配置问题。[APC](http://php.net/manual/en/book.apc.php)是 PHP 的操作码缓存

在您的 php.ini 或链接到 php.ini 的 apc.ini 中搜索 APC 设置。

可能的解决方案是使用这些：减少 apc.ttl 并增加 apc.shm_size

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T12:54:54.490

有时即使您尝试使用 ini_set() 覆盖设置，错误仍然会发生。在这种情况下，您也可以完全禁用 is。对于低流量站点，这将不是问题。

将此行添加到 index.php 文件的顶部：

ini_set('apc.cache_by_default',0);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T10:21:34.853

您的 Drupal 站点使用 PHP 编程语言运行。您可以配置网站使用的 PHP 版本。

PHP 5.5 的最新版本。使用 OPcache 操作码缓存，并包含 APCu 扩展以 100% 兼容 APC 用户缓存 API。

我将版本从 PHP 5.3 升级到 PHP 5.5，这对我有用。

# c# - C# 中的可交易对象？

> ID：14089592
> 
> 赞同：5
> 
> 时间：2012-12-30T09:10:21.963
> 
> 标签：c#, .net, ado.net, transactionscope

*看代码：*

```
class MyClass {  public static int g=1;}

using (TransactionScope tsTransScope = new TransactionScope())
{
    //Do stuff here
    MyClass.g=999;
    tsTransScope.Complete();
} 
```

*   查看“*在这里做事*”部分：我可以在其中写入什么*类型*的对象，以便它们可以*事务处理*？我已经知道我可以编写 ADO 命令，并且它们会在必要时回滚/提交。但是通过`C#`POV：一个类必须具有什么实现才能成为可*交易*的（实现一些接口或什么？）

*   如果它是`TransactionScope` 它所称的，在一个`using`子句内（这是 try + finally），逻辑说如果有一个回滚：`MyClass.g`应该返回它的值 1。但是。这没有发生。所以我想这与第一个问题有关。如何使 MyClass 可*交易*？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T09:22:46.377

你应该实现[`System.Transactions.IEnlistmentNotification`](http://msdn.microsoft.com/en-us/library/system.transactions.ienlistmentnotification.aspx)接口，[这篇](http://msdn.microsoft.com/en-us/library/ms229975%28v=vs.80%29.aspx)文章，[这](http://msdn.microsoft.com/en-us/library/ms229975%28v=vs.80%29.aspx)可能会对你有所帮助

对于现成的事务性内存存储，有（[软件事务性内存](http://en.wikipedia.org/wiki/Software_transactional_memory)），而[STM.NET](http://msdn.microsoft.com/en-us/devlabs/ee334183.aspx)不是最终的东西，但微软正在努力！

一个小例子：

```
using System.IO;
using System.Text;
using System.Transactions;

namespace Sakher.Transactions
{
    public class TsansactionalFileWriter
    {
        private FileTransactionEnlistment fileTransactionEnlistment = new FileTransactionEnlistment();
        public TsansactionalFileWriter(string filePath)
        {
            fileTransactionEnlistment.FilePath = filePath;
            Transaction.Current.EnlistVolatile(fileTransactionEnlistment, EnlistmentOptions.None);
        }

        public void AppendText(string text)
        {
            fileTransactionEnlistment.Content.Append(text);
        }

        public void WriteAllText(string text)
        {
            fileTransactionEnlistment.Content = new StringBuilder(text);
        }
    }

    public class FileTransactionEnlistment : IEnlistmentNotification
    {
        public string FilePath { get; set; }
        public StringBuilder Content { get; set; }

        public FileTransactionEnlistment()
        {
            Content = new StringBuilder();
        }

        public void Commit(Enlistment enlistment)
        {
            File.WriteAllText(FilePath, Content.ToString());
        }

        public void InDoubt(Enlistment enlistment)
        {

        }

        public void Prepare(PreparingEnlistment preparingEnlistment)
        {
            //You can create the file here
            preparingEnlistment.Prepared();
        }

        public void Rollback(Enlistment enlistment)
        {
            //Do ssomething when the transaction is rolled-back (You may delete the file if you have created it!)
        }
    }

} 
```

使用代码：

```
 using (TransactionScope tr = new TransactionScope())
        {
            TsansactionalFileWriter writer = new TsansactionalFileWriter("c:\\myFile.txt");
            writer.AppendText("sdfgssdfgsdf");
            tr.Complete();
        } 
```

*** EDTI : 为 ROYI 添加了 G 守门员 :) ***

```
using System.Transactions;

namespace Sakher.Transactions
{
    public class  Royi_s_gReturnerClass 
    {
        private GReturnerEnlistment fileTransactionEnlistment = new GReturnerEnlistment();
        public Royi_s_gReturnerClass()
        {
            Transaction.Current.EnlistVolatile(fileTransactionEnlistment, EnlistmentOptions.None);
        }
    }

    public class GReturnerEnlistment : IEnlistmentNotification
    {
        public int GOldValue { get; set; }

        public GReturnerEnlistment()
        {
            GOldValue = MyClass.g;
        }

        public void Commit(Enlistment enlistment)
        {

        }

        public void InDoubt(Enlistment enlistment)
        {

        }

        public void Prepare(PreparingEnlistment preparingEnlistment)
        {
            preparingEnlistment.Prepared();
        }

        public void Rollback(Enlistment enlistment)
        {
            MyClass.g = GOldValue;
        }
    }

} 
```

您的代码将是：

```
class MyClass {  public static int g=1;}

using (TransactionScope tsTransScope = new TransactionScope())
{
    Royi_s_gReturnerClass returner = new Royi_s_gReturnerClass();
    //Do stuff here
    MyClass.g=999;
    tsTransScope.Complete();
} 
```

# mamp - OSX Mountain Lion 上禁用了防火墙，但传入连接仍被阻止

> ID：14089598
> 
> 赞同：2
> 
> 时间：2012-12-30T09:11:19.877
> 
> 标签：mamp, firewall

突然间，即使防火墙关闭，我的 MacBook 的所有传入连接似乎都被阻止了。我发现了这一点，因为我无法再将 iPhone 连接到笔记本电脑上的 MAMP 服务器。

iPhone 和笔记本电脑都在同一个子网中，我的路由器中没有特殊设置，我的系统日志中似乎没有任何内容。我试图从我的 iphone 在笔记本电脑上的各种据称打开的端口上远程登录，但没有连接。

我也没有运气重新启动路由器。

有什么建议么？

# javascript - Graph API /me 对象地址属性的权限是什么。是因为隐私而禁用的吗？

> ID：14089602
> 
> 赞同：0
> 
> 时间：2012-12-30T09:11:30.797
> 
> 标签：javascript, facebook-graph-api

图形 API 为 /me 对象地址属性返回 null。我找不到地址许可。用户当前地址有什么权限？由于隐私问题，地址是否总是无法访问？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:11:52.153

用户登录后，您可以调用 /me?access_token=ACCESS_TOKEN ，它至少会返回有关用户的基本信息。无需特殊权限。

一件重要的事情是 access_token 必须与用户绑定（又名 - 在用户登录后收到）。如果您只是获取应用程序的 access_token（使用`client_credentials`），那么`/me`将不是有效的端点。您可以通过[调试器运行 access_token 来查找](https://developers.facebook.com/tools/debug)

如果您不使用`access_token`，或者您使用`acces_token`与人无关的 （如列出的场景），您将获得：

```
{
   "error": {
      "message": "An active access token must be used to query information about the current user.",
      "type": "OAuthException",
      "code": 2500
   }
} 
```

所以`/me`永远不应该回来`null`。总会有某种 json 响应。如果这没有帮助，请在对此的评论中发布该回复。

# javascript - 每次加载时如何加载不同的css

> ID：14089604
> 
> 赞同：1
> 
> 时间：2012-12-30T09:11:39.267
> 
> 标签：javascript, css

我正在尝试添加一些 css。但我希望它在每次页面加载时都更改它（显然我会指定在不同时间加载的内容）

例如有时我想加载

```
<style>
    html, body, a, a:hover {
        cursor:url(&#39;
        http://www.edwdwed.com/cursowedwedrsfolder/Tredwedwedwedolll-face.png&#39;
        ), auto !important;
    }
</style> 
```

有时我想加载

```
<style>
    html, body, a, a:hover {
        cursor:url(&#39;
        http://www.snazzyspace.com/cursorsfolder/MEgusta.png&#39;
        ), auto !important;
    }
</style> 
```

我找到了一种在冲浪后随机化内容的方法，但这仅适用于图像而不适用于脚本/CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T09:25:40.867

工作代码...它在每个页面加载时随机设置背景颜色...

```
function setCSS(selector, attribute, value) {
    var cssRuleCode = document.all ? 'rules' : 'cssRules'; //account for IE and FF
    found = false;

    for (var S = 0; S < document.styleSheets.length; S++){
        if(document.styleSheets[S][cssRuleCode]){
            for(var n = 0; n < document.styleSheets[S][cssRuleCode].length; n++) {

                if(document.styleSheets[S][cssRuleCode][n]["selectorText"] == selector) {
                    if(document.styleSheets[S][cssRuleCode][n].style[attribute]) {
                        document.styleSheets[S][cssRuleCode][n].style[attribute] = value;
                        found = true;
                        break;
                    }
                }

            }
        }

    }

    if(!found) {
        // Let's add
        for (var S = 0; S < document.styleSheets.length; S++){
            try {
                document.styleSheets[S].insertRule(selector + ' { ' + attribute + ': ' + value + '; }',document.styleSheets[S][cssRules].length);
                break;
            } catch(err){
                try {
                    document.styleSheets[S].addRule(selector, attribute + ': ' + value + ';');
                    break;
                } catch (err){}
            }
        }
    }
}

window.onload = function(){
    urls = ["url('http://www.iwdownload.com/image/1982.png'), auto !important;",
        "url('http://www.iwdownload.com/image/13534.gif'), auto !important;"];
    var rand = Math.floor((Math.random() * urls.length));
    setCSS("html, body, a, a:hover", "cursor", urls[rand]);
}; 
```

*参考：[使用 Javascript 更改 CSS 值](https://stackoverflow.com/questions/566203/changing-css-values-with-javascript)*

**更新**

要将背景颜色设置`body`为蓝色，请使用

```
setCSS("body", "background", "blue"); 
```

**更新 2：博客 **

对于博主，将以下内容复制粘贴到`</head>`博主模板 HTML 中。然后重新加载您的博客，背景应更改为随机颜色。

```
&lt;script type=&quot;text/javascript&quot;&gt;

    function setCSS(selector, attribute, value) {
        var cssRuleCode = document.all ? &#39;rules&#39; : &#39;cssRules&#39;; //account for IE and FF
        for (var S = 0; S &lt; document.styleSheets.length; S++){
            if(document.styleSheets[S][cssRuleCode]){
                for(var n = 0; n &lt; document.styleSheets[S][cssRuleCode].length; n++) {
                    if(document.styleSheets[S][cssRuleCode][n][&quot;selectorText&quot;].indexOf(selector) != -1) {
                        if(document.styleSheets[S][cssRuleCode][n].style[attribute]) {
                            document.styleSheets[S][cssRuleCode][n].style[attribute] = value;

                            break;
                        }
                    }
                }
            }

        }
    }

    window.onload = function(){
        colors = [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, &quot;orange&quot;, &quot;white&quot;];
        var rand = Math.floor((Math.random() * colors.length));
        setCSS(&quot;body&quot;, &quot;background&quot;, colors[rand]);
    };

&lt;/script&gt; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T09:26:33.753

`class`我建议您为标签准备不同的 CSS，`<body>`例如：

**CSS**

```
body.style1{...}
body.style2{...}
... 
```

并用 javascript 操作它

**JS**

```
var rand = Math.floor((Math.random()*NumberOfYourStyle)+1);
var style = "style" + rand;
document.getElementsByTagName('body')[0].className+=style; 
```

[工作示例](http://jsfiddle.net/Pp5up/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T09:26:40.410

您可以使用模板引擎动态生成 CSS。

例如，使用[Velocity](http://velocity.apache.org)代替普通的 CSS ，这是一个非常简单的模板引擎。

或者，如果您更有可能在服务器上支持 PHP，请使用 PHP 生成 CSS 代码而不是 HTML（是的，PHP 可以做到这一点）。

或者，使用[CSSOM](http://dev.w3.org/csswg/cssom/)来操作 CSS 客户端，使用 JavaScript。

# html - 使用音频标签播放多首音乐

> ID：14089605
> 
> 赞同：0
> 
> 时间：2012-12-30T09:11:45.960
> 
> 标签：html, audio

> **可能重复：**
> [HTML 5 视频或音频播放列表](https://stackoverflow.com/questions/2551859/html-5-video-or-audio-playlist)

我想在页面的背景播放音频。

```
<audio autoplay="true" loop="true" src="track1.mp3" ></audio> 
```

但我想播放不止一首曲目。

通过这样做，`m3u`播放列表不起作用：

```
<audio autoplay="true" loop="true" src="playlist.m3u" ></audio> 
```

这也是：

```
<audio autoplay="true" loop="true" >
<source src="track1.mp3" type="audio/mpeg">
<source src="track2.mp3" type="audio/mpeg">
</audio> 
```

如何使用`audio`标签播放曲目列表？

# alphablending - Emgu CV 中的 Alpha 混合

> ID：14089609
> 
> 赞同：4
> 
> 时间：2012-12-30T09:12:23.637
> 
> 标签：alphablending, emgucv, computer-vision

嗨，我正在学习 Emgu CV。我想执行 alpha blend(addWeighted)。我有以下代码

```
Image<Bgr, Byte> image = new Image<Bgr, Byte>(filename);
Image<Gray, Byte> grayImage = image.Convert<Gray, Byte>();
Image<Bgr, Byte> blendImage; 
```

如何 alpha 混合这两个图像？（Bgr 和灰色）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:39:21.423

尝试将灰度图像转换回彩色，然后将它们混合。

```
Image<Bgr, Byte> grayBGRImage = grayImage.Convert<Bgr, Byte>();
double alpha = 0.5; // Or however you would like to blend them
double beta = 1 - alpha;
double gamma = 0;
Image<Bgr, Byte> blendImage = image.AddWeighted(grayBGRImage, alpha, beta, gamma); 
```

# c# - 如何填写listBox控件？

> ID：14089610
> 
> 赞同：1
> 
> 时间：2012-12-30T09:12:31.003
> 
> 标签：c#, .net, winforms

我从数据库获取数据：

```
 SqlCommand cmd = new SqlCommand("SELECT * FROM ItemShape", conn);

        conn.Open();

        SqlDataReader reader = cmd.ExecuteReader(); 
```

我需要用接收到的数据填充我的控件，如下所示：

```
 foreach (DataRow item in dt.Rows)
        {
           lbxObjects.DisplayMember = item["Shape"].ToString();
           lbxObjects.ValueMember = item["ID"].ToString();
        } 
```

但是在调试任何想法后我的控件是空的，上面有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T09:22:00.340

（*抱歉 - 我对 ASP.NET 太投入了，我的第一种方法本来可以奏效 - 但在 Winforms 中，它没有......*）

你可以使用这样的东西 - 将数据加载到一个`DataTable`（所以你的控件有所有可用的数据）并绑定它：

```
using (SqlCommand cmd = new SqlCommand("SELECT * FROM ItemShape", conn))
{
    SqlDataAdapter dap = new SqlDataAdapter(cmd);
    DataTable tblShapes = new DataTable();
    dap.Fill(tblShapes);

    // define Display and Value members
    lbxObjects.DisplayMember = "Shape";
    lbxObjects.ValueMember = "ID";

    // set the DataSource to the DataTable 
    lbxObjects.DataSource = tblShapes;
} 
```

这样，您不必手动迭代列表 - Listbox 类将为您完成！您只需要定义要绑定的项目集合（通过设置`DataSource`），以及每个项目的哪个属性使用 as`DisplayMember`和 as`ValueMember`

当你在它的时候——如果你只需要`ID`并且从**那张**`Shape`桌子上——在你的!**`SELECT`**

 **```
using (SqlCommand cmd = new SqlCommand("SELECT ID, Shape FROM ItemShape", conn))
{ 
```

如果你真的只需要其中的两个，那么检索**所有列**是没有意义的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T09:18:43.887

使用以下代码：

```
while (dataReader.Read())
          {
            object ID = dataReader["ID"];
            object shape = dataReader["shape"];
            lbxObjects.Items.Add(ID.ToString() + ": " +  shape.ToString());
          } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T09:44:40.947

您必须使用阅读器作为列表框的数据源

```
using( SqlCommand cmd = new SqlCommand("SELECT * FROM ItemShape", conn))
    {
          conn.Open();
          using(SqlDataReader reader = cmd.ExecuteReader())
          {
              if(reader.Read())
              {
                   lbxObjects.Text= item["Shape"].ToString();
                   lbxObjects.Value= item["ID"].ToString();
                   lbxObjects.DataSource=reader;
                   lbxObjects.DataBind();
              }
           }
    } 
```**

# c# - AssemblyInformation 中的应用程序名称

> ID：14089611
> 
> 赞同：4
> 
> 时间：2012-12-30T09:12:45.530
> 
> 标签：c#, windows-phone-7, windows-phone-8

我想更改应用程序名称。我修改了程序集信息中的应用程序名称，但它仍然在 Tile 菜单中显示 PhoneApp1。

谁能告诉我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:09:17.523

感谢您的回答，但我使用的是 VS Ultimate 2012，在属性屏幕上看不到部署选项。可能是缺少某些工具。

![属性屏幕](../Images/a186a66b5d2de8727558b1f4d8e6efaa.png)

无论如何，我通过 WMAppManifest.xml 实现了它，谢谢

![WMAppManifest.xml](../Images/e943a12e33fbd3af0f46a46d43c22da4.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T21:46:55.443

如果是您要更改的图块上的文本，则在项目设置中完成。在 Visual Studio 中，单击顶部的“项目”菜单，然后单击“PhoneApp1 属性”。然后更改下图中显示的值。

![在此处输入图像描述](../Images/48da59c318946baf0d53a3f545066f43.png)

名为“Title”的顶部是应用程序列表，而“Tile Options”下的一个显然是用于开始屏幕的磁贴。

如果您愿意，也可以在 WMAppManifest.xml 文件中进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T09:44:03.583

我想您正在使用 .net 在整个解决方案中搜索您的旧项目名称的出现，并将其替换为您的新名称。在执行此操作之前，请将您的解决方案复制到另一个文件夹中，以确保您不会破坏您的解决方案。

# javascript - 为 fb:comments 使用 comment.create 侦听器 - fql.query 回调中的评论

> ID：14089615
> 
> 赞同：3
> 
> 时间：2012-12-30T09:13:14.323
> 
> 标签：javascript, facebook, facebook-javascript-sdk, dom-events

我插入了以下有效的插件：

```
<fb:comments href="http://www.example.com/" width="580" num_posts="10"></fb:comments> 
```

当有人添加评论时，此评论应发布在另一个网站上的特定帖子中。对于此操作，必须请求用户许可。

当有人点击插入评论按钮时，事件监听`FB.Event.subscribe('comment.create' ...` 器被触发。

然后，如果用户未授予发帖权限，则会打开一个弹出窗口并询问用户是否允许发帖到其他页面。然后将插入的评论从数据库中拉出（因为在变量comment_response的回调中没有带有评论消息的变量）。

问题是，回调的变量响应`fql.query`是空的。我还尝试等待几秒钟超时。

如果我获取 comment_response.commentID 的输出并将其硬编码在其他回调之外并刷新页面，我会得到一个结果。

此外，如果我做一个简单的请求，比如提取名称而不是查询评论，我也会得到一个结果。这段代码有什么问题？

```
 <div id="fb-root"></div>

    <script type="text/javascript">
      window.fbAsyncInit = function() {

        var post_id = 64564346456756;
        var user_id = 12434566778788;

        // init the FB JS SDK
        FB.init({
          appId      : '75645367543465745', // App ID from the App Dashboard
          status     : true, // check the login status upon init?
          cookie     : true, // set sessions cookies to allow your server to access the session?
          xfbml      : true  // parse XFBML tags on this page?
        });

        //post comment
        FB.Event.subscribe('comment.create', function(comment_response){ 
            //console.log( comment_response );

            //try to post on fanpage ... login
            FB.login(function(login_response) {
                 //console.log(response);

                 // user is logged in and granted permissions.
                  if (login_response.authResponse) {

                      //get comment
                      //comment_response.commentID comment_response.href
                      //console.log( comment_response.commentID );

                      FB.api({
                            method: 'fql.query',
                            query: "SELECT text FROM comment WHERE post_fbid = '"+comment_response.commentID+"' AND object_id IN (SELECT comments_fbid FROM link_stat WHERE url='http://www.example.com/')",
                            access_token: login_response.accessToken
                          },
                          function( response ) {

                              //console.log( resp[0].text );
                              console.log(response);

                          });

                  } 
                  else { // User cancelled login or did not fully authorize.

                  }
             }, {scope:'publish_stream, read_stream'});

        });

      };

      // Load the SDK's source Asynchronously
      (function(d, debug){
         var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement('script'); js.id = id; js.async = true;
         js.src = "//connect.facebook.net/de_DE/all" + (debug ? "/debug" : "") + ".js";
         ref.parentNode.insertBefore(js, ref);
       }(document, /*debug*/ false));

    </script>

    <fb:comments href="http://www.example.com/" width="580" num_posts="10"></fb:comments> 
```

# android - 无法显示弹出对话框

> ID：14089617
> 
> 赞同：2
> 
> 时间：2012-12-30T09:15:13.140
> 
> 标签：android, popup

我试图从菜单选项中显示一个弹出对话框。代码是 -

```
public void createNewList(){
        popupCreateList = new PopupWindow(popupCreateListView,LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        popupCreateList.setBackgroundDrawable(new BitmapDrawable());
        popupCreateList.setOutsideTouchable(true);
        Log.i(TAG,"popUpListView-->>>" + popUpListView.getParent());
        //((ViewGroup)popUpListView.getParent()).removeView(popUpListView); <--Commented

        popupCreateList.showAtLocation(findViewById(R.id.layoutTaskManagerID), Gravity.CENTER, 0, 0); <-- ERROR
        //popupCreateList.showAsDropDown(listsButton, 50, -30);

    } 
```

每当我尝试运行它时，它都会给我以下 logcat 错误 -

```
12-30 14:43:00.735: E/AndroidRuntime(1385): FATAL EXCEPTION: main
12-30 14:43:00.735: E/AndroidRuntime(1385): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
12-30 14:43:00.735: E/AndroidRuntime(1385):     at android.view.ViewGroup.addViewInner(ViewGroup.java:3378)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at android.view.ViewGroup.addView(ViewGroup.java:3249)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at android.view.ViewGroup.addView(ViewGroup.java:3225)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at android.widget.PopupWindow.preparePopup(PopupWindow.java:965)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at android.widget.PopupWindow.showAtLocation(PopupWindow.java:836)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at android.widget.PopupWindow.showAtLocation(PopupWindow.java:809)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at ray.kaushik.simple.task.manager.TaskManagerActivity.createNewList(TaskManagerActivity.java:340)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at ray.kaushik.simple.task.manager.TaskManagerActivity.onMenuItemSelected(TaskManagerActivity.java:324)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:958)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at com.android.internal.view.menu.IconMenuView.invokeItem(IconMenuView.java:468)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at com.android.internal.view.menu.IconMenuItemView.performClick(IconMenuItemView.java:126)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at android.view.View$PerformClick.run(View.java:16966)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at android.os.Handler.handleCallback(Handler.java:615)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at android.os.Looper.loop(Looper.java:137)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at android.app.ActivityThread.main(ActivityThread.java:4745)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at java.lang.reflect.Method.invokeNative(Native Method)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at java.lang.reflect.Method.invoke(Method.java:511)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-30 14:43:00.735: E/AndroidRuntime(1385):     at dalvik.system.NativeStart.main(Native Method) 
```

当我尝试第二次单击时会遇到此错误。如果我取消注释注释行以删除视图仍然保持不变。dumone plz 可以为此提供理由。请详细说明，因为我是 android 开发的新手。有什么相同的想法吗？在此先感谢。

射线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T09:49:01.153

您这样做而不是使用警报是否有特定原因？警报是一个弹出对话框（您可以在其中有多个按钮）。另一种方法（如果 Alert 还不够）是创建一个具有 Alert 主题（在清单中设置）的整个活动，然后你调用`startActivity()`它，它看起来像一个警报，即使它是一个功能齐全的活动它将位于活动堆栈的顶部）。

除非我不理解您，否则您尝试从菜单启动它的事实完全无关紧要。你可以从任何地方开始它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T11:44:01.767

使用这个工作示例代码（我编写并测试了它），并适应您的需求：create menu\my_options_menu.xml

```
 <menu xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:id="@+id/popup1" 
 android:title="popup1" />
 </menu> 
```

创建布局\popup.xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" 
   android:background="@android:color/background_light">
   <LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:layout_margin="1dp"
    android:background="@android:color/darker_gray">
    >
    <LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:layout_margin="20dp">
    <TextView
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:text="It's a PopupWindow" />
    <ImageView
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:src="@drawable/ic_launcher" />
    <Button
      android:id="@+id/dismiss"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:text="Dismiss" />
  </LinearLayout>
</LinearLayout>
</LinearLayout> 
```

在您的主要活动中添加以下内容：

```
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.my_options_menu, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.popup1:
        if (popupCreateList!=null) return true;
        LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
        View popupView = layoutInflater.inflate(R.layout.popup, null);
        popupCreateList = new PopupWindow( popupView,LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
        popupCreateList.setBackgroundDrawable(new BitmapDrawable());
        popupCreateList.setOutsideTouchable(true);
        popupCreateList.showAtLocation((RelativeLayout)findViewById(R.id.main_activity_layout), Gravity.CENTER, 0, 0); 
        Button btnDismiss = (Button)popupView.findViewById(R.id.dismiss);
        btnDismiss.setOnClickListener(new Button.OnClickListener(){

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                popupCreateList.dismiss();
                popupCreateList=null;
            }});

        return true;
    default:
    return super.onOptionsItemSelected(item);
    }
} 
```

更多：我建议您阅读这些文章以启发您：

[http://android-er.blogspot.it/2012/03/example-of-using-popupwindow.html](http://android-er.blogspot.it/2012/03/example-of-using-popupwindow.html)

[http://android-ed.blogspot.it/2011/08/using-popupwindow-in-android.html](http://android-ed.blogspot.it/2011/08/using-popupwindow-in-android.html)

[android中的弹出窗口](https://stackoverflow.com/questions/5944987/popupwindow-in-android)

# android - 无法创建数据库表，这与我拥有的第一个数据库相同（我克隆并更改了名称）

> ID：14089625
> 
> 赞同：0
> 
> 时间：2012-12-30T09:17:03.903
> 
> 标签：android, database, sqlite

在我的 Android 程序中，我需要**1 DB 中的 3 个 DB**或**3 个 DB 表**。首先会有一些数据。二是要有密码。我正在创建第二个。**第一个编译没有问题**，但第二个给了我一些错误，在过去的 10 个小时里，我无法修复它。（**我克隆了第一个数据库表**，粘贴到第二个并更改了变量、名称等。**我控制了几次，没有语法错误？**） *注意：我是开发正确登录过程的新手。这是我的作业，教授不希望我给他一个正确的登录过程，所以我不需要安全性等。密码是否正确。登录是否正常。*

一些帮助会很棒，正如我所说，我浪费了我的 10 个小时......

# 数据库适配器

```
package com.example.tsfc;

import java.io.IOException;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBLogin {

public static final String  KEY_SELECT = "select";

private static final String TAG = "DBLogin";

private static final String     DATABASE_NAME = "DBLog";
private static final String     DATABASE_TABLE = "log";
private static final int    DATABASE_VERSION = 3;

private static final String DATABASE_CREATE = "create table if not exists log (" +
        "select string not null " + 
        ");";

private final Context context;

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBLogin(Context ctx){

    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper{

    DatabaseHelper(Context context){

        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    @Override
    public void onCreate(SQLiteDatabase db){
        try{
            db.execSQL(DATABASE_CREATE);
        }
        catch(SQLException e){e.printStackTrace();}
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion){

        Log.w(TAG, "Upgrading database from version " + oldVersion + " to " + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS contacts");
        onCreate(db);
    }

}

public DBLogin open() throws SQLException{

    db = DBHelper.getWritableDatabase();
    return this;
}

public void close(){
    DBHelper.close();
}

public long insertRecord(String select){

    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_SELECT, select);

    return db.insert(DATABASE_TABLE, null, initialValues);

}

 public Cursor getAllRecords() 
    {
        return db.query(false, DATABASE_TABLE, new String[] {KEY_SELECT}, null, null, null, null, null, null);
    }

public Cursor getRecord(long rowId) throws IOException {

     Cursor mCursor =
                db.query(true, DATABASE_TABLE, new String[] {KEY_SELECT}, 
                null, null, null, null, null, null, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;

}

public boolean updateRecord(long rowID, String select){

    ContentValues args = new ContentValues();
    args.put(KEY_SELECT, select);
    return db.update(DATABASE_TABLE, args, null, null) > 0;
}
public String[] displayRecord(Cursor cr)
{
     String array[] = {cr.getString(0), cr.getString(1), cr.getString(2), cr.getString(3), cr.getString(4), cr.getString(5)};

     return array; 
    } 
} 
```

# 在 main.java 中创建数据库

```
package com.example.tsfc;
//some imports.....

public class MainActivity extends Activity {
static{
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

    StrictMode.setThreadPolicy(policy);
}
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button userButton = (Button)findViewById(R.id.user_button);
    userButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent i = new Intent(MainActivity.this, ShowMessagesPage.class);
            startActivity(i);
        }
    });

    try {           
        String destPath = "/data/data/" + getPackageName() + "/databases/DBMessages";
        File f = new File(destPath);            
        if (!f.exists()) {          
            CopyDB( getBaseContext().getAssets().open("meee"), 
                new FileOutputStream(destPath));
        }
    } catch (FileNotFoundException e) {         
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    Button loginButton =(Button)findViewById(R.id.login_button);
    loginButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent i = new Intent(MainActivity.this, LoginPage.class);
            startActivity(i);

        }
    });

    try {           
        String destPath = "/data/data/" + getPackageName() + "/databases/DBLog";
        File f = new File(destPath);            
        if (!f.exists()) {          
            CopyDB( getBaseContext().getAssets().open("meeemeeee"), 
                new FileOutputStream(destPath));
        }
    } catch (FileNotFoundException e) {         
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

}

public void CopyDB(InputStream inputStream, OutputStream outputStream) 
throws IOException {
    //---copy 1K bytes at a time---
    byte[] buffer = new byte[1024];
    int length;
    while ((length = inputStream.read(buffer)) > 0) {
        outputStream.write(buffer, 0, length);
    }
    inputStream.close();
    outputStream.close();
}

boolean checkConnection(){
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

    if (cm.getActiveNetworkInfo() != null
            && cm.getActiveNetworkInfo().isAvailable()
            && cm.getActiveNetworkInfo().isConnected()) {
        return true;

    }
    else {
        return false;
    }

}

public void sendMessage(View view) {

    Intent intent = new Intent(this, ShowMessagesPage.class);

    if (checkConnection()){
        startActivity(intent);  
    }
    else {Toast.makeText(this, "There is no internet connection. Please check and try again.", Toast.LENGTH_SHORT).show();
          return;
    }   
}

public void login(View view) {
    Intent intent = new Intent(this, LoginPage.class);

    if (checkConnection()){
        startActivity(intent);  
    }
    else {Toast.makeText(this, "There is no internet connection. Please check and try again.", Toast.LENGTH_SHORT).show();
      return;
}   
}} 
```

# 在数据库上工作

```
public class LoginPage extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login_page);

        Button loginButton = (Button)findViewById(R.id.login);
        loginButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
            try {
                isOK();
            } catch (IOException e) {
                e.printStackTrace();
            }
            }});}

    public String sman;
    public String sdev;
    public String spass;
    public String sor;

    boolean checkConnection(){
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);

        if (cm.getActiveNetworkInfo() != null
                && cm.getActiveNetworkInfo().isAvailable()
                && cm.getActiveNetworkInfo().isConnected()) {
            return true;

        }
        else {
            return false;
        }

    }

private void isOK() throws IOException{ 
    DBLogin db = new DBLogin(this);
    Spinner spinner = (Spinner) findViewById(R.id.spinner1);

EditText passEditText = (EditText) findViewById(R.id.pass);
spass = passEditText.getText().toString();

String sor = spinner.getSelectedItem().toString();

db.open();        
long id = db.insertRecord("asdasd123");
id = db.insertRecord("qweqwe123");

db.close();

if (spass.matches("")) {
    Toast.makeText(this, "You have entered something wrong. Please check.", Toast.LENGTH_SHORT).show();
 return;}
 else {
     if(checkConnection()){
         Log.d("test", "adding");
         db.open();
         Cursor cr = db.getRecord(1);
         Cursor cr2 = db.getRecord(2);

         if(spass == cr.toString() && sor == "Manager") {
             Toast.makeText(this,"Password confirmed", Toast.LENGTH_LONG).show();
             Intent i = new Intent(this, ManagerView.class);
             startActivity(i);}
         else if (spass == cr2.toString() && sor == "Developer"){
             Toast.makeText(this,"Password confirmed", Toast.LENGTH_LONG).show();
             Intent a = new Intent(this, DeveloperView.class);
             startActivity(a);}
         else {
             Toast.makeText(this,"Password is incorrect", Toast.LENGTH_LONG).show();
            return;
         }
         db.close();
         return;}
     else {Toast.makeText(this, "There is no internet connection. Please check and try again.", Toast.LENGTH_SHORT).show();
      return;
        }   
 }}} 
```

# LOGCAT

```
12-30 10:53:45.871: E/SQLiteLog(907): (1) near "select": syntax error
12-30 10:53:45.901: E/SQLiteDatabase(907): Error inserting select=asdasd123
12-30 10:53:45.901: E/SQLiteDatabase(907): android.database.sqlite.SQLiteException: near "select": syntax error (code 1): , while compiling: INSERT INTO log(select) VALUES (?)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at com.example.tsfc.DBLogin.insertRecord(DBLogin.java:82)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at com.example.tsfc.LoginPage.error(LoginPage.java:77)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at com.example.tsfc.LoginPage.access$0(LoginPage.java:63)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at com.example.tsfc.LoginPage$1.onClick(LoginPage.java:31)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.view.View.performClick(View.java:4202)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.view.View$PerformClick.run(View.java:17340)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.os.Handler.handleCallback(Handler.java:725)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.os.Looper.loop(Looper.java:137)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at java.lang.reflect.Method.invokeNative(Native Method)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at java.lang.reflect.Method.invoke(Method.java:511)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-30 10:53:45.901: E/SQLiteDatabase(907):  at dalvik.system.NativeStart.main(Native Method)
12-30 10:53:45.901: E/SQLiteLog(907): (1) near "select": syntax error
12-30 10:53:45.950: E/SQLiteDatabase(907): Error inserting select=qweqwe123
12-30 10:53:45.950: E/SQLiteDatabase(907): android.database.sqlite.SQLiteException: near "select": syntax error (code 1): , while compiling: INSERT INTO log(select) VALUES (?)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteStatement.<init>(SQLiteStatement.java:31)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1467)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1339)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at com.example.tsfc.DBLogin.insertRecord(DBLogin.java:82)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at com.example.tsfc.LoginPage.error(LoginPage.java:78)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at com.example.tsfc.LoginPage.access$0(LoginPage.java:63)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at com.example.tsfc.LoginPage$1.onClick(LoginPage.java:31)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.view.View.performClick(View.java:4202)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.view.View$PerformClick.run(View.java:17340)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.os.Handler.handleCallback(Handler.java:725)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.os.Looper.loop(Looper.java:137)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at java.lang.reflect.Method.invokeNative(Native Method)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at java.lang.reflect.Method.invoke(Method.java:511)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-30 10:53:45.950: E/SQLiteDatabase(907):  at dalvik.system.NativeStart.main(Native Method)
12-30 10:53:45.960: D/test(907): adding
12-30 10:53:45.990: E/SQLiteLog(907): (1) near "select": syntax error
12-30 10:53:45.990: D/AndroidRuntime(907): Shutting down VM
12-30 10:53:45.990: W/dalvikvm(907): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-30 10:53:46.010: E/AndroidRuntime(907): FATAL EXCEPTION: main
12-30 10:53:46.010: E/AndroidRuntime(907): android.database.sqlite.SQLiteException: near "select": syntax error (code 1): , while compiling: SELECT DISTINCT select FROM log
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1161)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1073)
12-30 10:53:46.010: E/AndroidRuntime(907):  at com.example.tsfc.DBLogin.getRecord(DBLogin.java:95)
12-30 10:53:46.010: E/AndroidRuntime(907):  at com.example.tsfc.LoginPage.error(LoginPage.java:89)
12-30 10:53:46.010: E/AndroidRuntime(907):  at com.example.tsfc.LoginPage.access$0(LoginPage.java:63)
12-30 10:53:46.010: E/AndroidRuntime(907):  at com.example.tsfc.LoginPage$1.onClick(LoginPage.java:31)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.view.View.performClick(View.java:4202)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.view.View$PerformClick.run(View.java:17340)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.os.Handler.handleCallback(Handler.java:725)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.os.Handler.dispatchMessage(Handler.java:92)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.os.Looper.loop(Looper.java:137)
12-30 10:53:46.010: E/AndroidRuntime(907):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-30 10:53:46.010: E/AndroidRuntime(907):  at java.lang.reflect.Method.invokeNative(Native Method)
12-30 10:53:46.010: E/AndroidRuntime(907):  at java.lang.reflect.Method.invoke(Method.java:511)
12-30 10:53:46.010: E/AndroidRuntime(907):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-30 10:53:46.010: E/AndroidRuntime(907):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-30 10:53:46.010: E/AndroidRuntime(907):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:20:11.527

`select`是一个 SQL 关键字。您可以重命名此列以使用不是关键字的名称（并且在未来版本的 DB 中不会成为关键字），或者使用双引号将其强制解释为标识符：`"select"`。

# jquery - BlackBerry Webworks Unknow Host domainname .com :80 错误

> ID：14089626
> 
> 赞同：1
> 
> 时间：2012-12-30T09:17:11.460
> 
> 标签：jquery, html, blackberry-webworks

我正在开发这个从服务器加载所有内容的应用程序。

这是我的 config.xml 的示例

```
<content src="http://somedomain.com/test_dl/integrateLayout/inde​x.html" />
<access uri="http://somedomain.com/" subdomains="true">
<feature id="blackberry.ui.menu" />
<feature id="blackberry.ui.dialog" />
<feature id="blackberry.system" />
<feature id="blackberry.system.event" />
<feature id="blackberry.app" />
<feature id="blackberry.app.event" />
<feature id="blackberry.push" />
</access>
<rim:connection timeout="60000">
<id>TCP_WIFI</id>
<id>MDS</id>
<id>BIS-B</id>
<id>TCP_CELLULAR</id>
<id>WAP2</id>
<id>WAP</id> 
</rim:connection> 
```

昨天工作正常，但是当我尝试运行该应用程序时突然。它给了我错误 Unknown host somedomain.com :80 错误。

目前，我在 OS 7.1 上运行的 9900 上运行该应用程序。

有人可以帮忙吗？

# perl - 调试 Perl 脚本

> ID：14089630
> 
> 赞同：2
> 
> 时间：2012-12-30T09:18:59.397
> 
> 标签：perl, shell

我已经对 Perl 脚本调试进行了一些研究，但找不到我想要的东西。

让我在这里解释一下我的问题。

我有一个 Perl 脚本，它没有进入最后一个 while 循环，似乎因为它没有按照指示在里面打印任何内容。

所以，我想知道有没有更简单的方法可以一一查看所有行，就像我们在 shell 脚本中看到的那样

```
set -x 
```

这是我的 Perl 脚本代码

```
#!/usr/bin/perl -w

my $ZONEADM = "/usr/sbin/zoneadm list -c";

use strict;
use diagnostics;
use warnings;

system("clear");
print "Enter the app\n";
chomp(my $INS = <>);

print "\nEnter the Symmitrix ID\n";
chomp(my $SYMM = <>);

print "\nEnter the Server\n";
chomp(my $SRV = <>);

print "\nEnter the devices\n";
while (<>) {
  if($_ !~ m/(q|quit)/) {    
    chomp($_);
    my $TEMP_FILE = "/export/home/ptiwari/scripts/LOG.11";
    open (my $FH, '>>', $TEMP_FILE);
    my @arr = split(/:/, $_);
    if($arr[3]) {
      print $FH "/".$INS."db/".$arr[0]."  ".$SYMM."  ".$arr[1]."  ".$arr[2]."  ".$arr[3]."\n";
    }
    else {
      print $FH "/".$INS."db/".$arr[0]."  ".$SYMM."  ".$arr[1]."  ".$arr[2]."\n";
    }
    undef @arr;
    close $FH;
  }
  else {
    exit;
  }
}

my $IS_ZONE = qx($ZONEADM|grep -i $SRV|grep -v global);
if($IS_ZONE) {
  $IS_ZONE = "yes";
}
else {
  $IS_ZONE = "no";    
}    

open(my $FLH, '<', "/export/home/ptiwari/scripts/LOG.11");
my @lines;
while(<$FLH>) {
  my ($GLOBAL_MTPT, $SYM, $SYM_DEV, $SIZE, $NEWFS) = split;
  print $GLOBAL_MTPT."  ".$SYM."  ".$SYM_DEV;
  print "\n";
} 
```

我已经尝试过`perl -d`了，但它没有向我展示任何可以帮助我解决为什么它没有进入 while 循环的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T12:15:19.437

您的`while(<>)`循环没有合理的终止条件。正`/q|quit/`则表达式是错误的。

1.  如果任何行包含`q`or ，则退出整个脚本`quit`。如果设备描述包含类似`quill`或的内容，您也将退出`acquisition`。键入意外的效果`q`类似于`Ctrl``C`.

2.  完成循环并继续执行脚本的唯一方法是发送 EOF。这需要用户`Ctrl``D`敲击键盘，或者简单地结束一个文件。然后你的脚本*将*继续。

这个脚本还有其他一些错误/奇怪的地方。主要批评： (a) 全大写变量被非正式地保留给 Perl 和实用模块。小写或混合大小写变量也可以。(b) 您的脚本包含相当多的冗余代码。要么将其重构为`sub`s，要么重写您的逻辑

这是一个可能更容易调试/可能不包含某些错误的示例重写。

```
#!/usr/bin/perl
use strict;
use warnings;
use diagnostics;

use constant DEBUG_FLAG => 1;  # set to false value for release
my $zoneadm_command = "/usr/sbin/zoneadm list -c";
my $temp_file_name = "/export/home/ptiwari/scripts/LOG.11";

sub prompt { print "\n", $_[0], "\n"; my $answer = <>; chomp $answer; return $answer }
sub DEBUG  { print STDERR "DEBUG> ", @_, "\n" if DEBUG_FLAG }

system("clear");
my $app_name = prompt("Enter the app");
my $symm_id  = prompt("Enter the Symmitrix ID");
my $server   = prompt("Enter the server name");
print "Enter the devices.\n";
print qq(\tTo terminate the script, type "q" or "quit".\n);
print qq(\tTo finish the list of devices, type Ctrl+D.\n);

open my $temp_file, ">>", $temp_file_name
    or die "Can't open log file: $!";

while (<>) {
  chomp; # remove trailing newline
  exit if /^q(?:uit)?$/; # terminate the script if the input line *is* `q` or `quit`. 
  my @field = split /:/;
  # grep: select all true values
  @field = grep {$_} ("/${app_name}db/$field[0]", $symm_id, @field[1 .. 3]);
  print $temp_file join("  ", @field), "\n";
}
close $temp_file;

DEBUG("finished the reading loop");

# get the zones with only *one* extra process
my @zones = 
    grep {not /global/}
    grep {/\Q$server\E/i}
    map  {chomp; $_}
        qx($zoneadm_command);
my $is_zone = @zones ? "yes" : "no";

DEBUG("Am I in the zone? $is_zone");

open my $device_file, "<", $temp_file_name or die "Can't open $temp_file_name: $!";

while (<$device_file>) {
  chomp;
  my ($global_mtpt, $sym, $sym_dev) = split;
  print join("  ", $global_mtpt, $sym, $sym_dev), "\n";
  # or short: print join("  ", (split)[0 .. 2]), "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T09:32:42.897

你需要这样的东西来进入脚本：

[http://www.devshed.com/c/a/Perl/Using-The-Perl-Debugger/](http://www.devshed.com/c/a/Perl/Using-The-Perl-Debugger/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T09:34:51.880

你真的可以使用调试器：http: [//perldoc.perl.org/perldebug.html](http://perldoc.perl.org/perldebug.html)

但是，如果您喜欢像 bash -x 一样进行跟踪，请查看以下讨论： [http ://www.perlmonks.org/?node_id=419653](http://www.perlmonks.org/?node_id=419653)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T14:37:48.383

[Devel::Trace](https://metacpan.org/module/Devel%3a%3aTrace) Perl 模块旨在模拟shell 程序的`sh -x`跟踪。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-30T11:31:53.813

尝试从最后一个 open 语句中删除“my $”，并在最后一个 while 语句中删除“$”。或者更好的是，试试这个：

```
open(my FLH, '<', "/export/home/ptiwari/scripts/LOG.11");

my @lines = <FLH>;
foreach (@lines) {
    my ($GLOBAL_MTPT, $SYM, $SYM_DEV, $SIZE, $NEWFS) = split;
    print $GLOBAL_MTPT." ".$SYM." ".$SYM_DEV;
    print "\n";
} 
```

让我知道结果。

# syntax-highlighting - 为什么“linenos”选项无法在 Jekyll 中添加行号？

> ID：14089633
> 
> 赞同：4
> 
> 时间：2012-12-30T09:20:23.360
> 
> 标签：syntax-highlighting, jekyll, line-numbers

我正在使用 jekyll 生成我的网站。我想在我的代码块中添加一个行号列。我搜索了谷歌，每个人都告诉我在hightlight标签中添加一个“linenos”选项，但在我的情况下我不起作用：

```
{% highlight ruby linenos %}
def foo():
puts 'foo'
end
{% endhighlight %} 
```

亮点运行良好，但行号....

你能帮我解决这个问题吗？如果您想查看源 css/html 文件，请点击[此处](https://github.com/winnieliu/winnieliu-winnieliu.github.com)。

谢谢！

进一步检查：

为本节生成的 html 是：

```
<div class="highlight"><pre><code class="ruby">
    <span class="k">def</span> <span class="nf">foo</span><span class="p">():</span>
    <span class="nb">puts</span> 
    <span class="s1">&#39;foo&#39;</span>
    <span class="k">end</span>
</code></pre></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T05:27:37.487

我克隆了您的存储库，生成了站点，并在浏览器中查看。**一切看起来都很好。**（我喜欢你的布局！）这向我表明你的设置有些时髦。代码突出显示对您有用吗？如果没有，您可能没有正确设置 Pygments。

安装：

```
sudo apt-get install python-setuptools
sudo easy_install Pygments 
```

要生成 css：

```
pygmentize -S default -f html > default.css 
```

确保你`pygments: true`的 _config.yml 中有。

确保正确放置此样式表并将其包含在您的 default.html 中。

我看到您的页面中已经包含此样式表，并且您的 _config.yml 看起来不错，但是对于需要此答案的其他任何人，都可以。

如果您使用生成站点，`jekyll --no-auto`您会在输出中看到任何错误吗？

让我知道，我很乐意尝试并提供进一步的帮助。:)

* * *

**更新**：这是为我为您拥有的突出显示测试博客文章生成的 HTML。

```
<div class="highlight"><pre><code class="c"><span class="lineno">1</span> <span class="cp">#include &lt;stdio.h&gt;</span>
<span class="lineno">2</span> 
<span class="lineno">3</span> <span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="lineno">4</span> <span class="p">{</span>
<span class="lineno">5</span>   <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Hello World!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="lineno">6</span>   <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="lineno">7</span> <span class="p">}</span>
</code></pre>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T22:41:22.877

我刚刚遇到了与 pygments 和 jekyll 相同的问题。我的降价看起来像

```
{% highlight c# linenos %}

    //my code

{% endhighlight %} 
```

以及生成的 HTML

```
<div class="highlight">
    <pre>
        <code class="c">
            ...
        </code>
    </pre>
</div> 
```

突出显示有点奇怪，没有添加行号。最终的问题是 Pygments 显然没有将“c#”识别为有效语言，而是我不得不添加“csharp”。

（以防其他人在设置时遇到此问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-07T10:38:09.367

我做了同样的事情。虽然行号显示 css 并不漂亮。主要原因是引导程序与我的 style.css 冲突。将以下内容添加到 style.css 解决了它。

```
.highlight pre {
    background-color: transparent;
    border: transparent;
    color: inherit;
} 
```

# php - 通过 AJAX 调用获取数据值

> ID：14089635
> 
> 赞同：1
> 
> 时间：2012-12-30T09:20:50.653
> 
> 标签：php, jquery, ajax

我想获取已序列化的表单值并通过 AJAX 调用发送

```
var searchData = $("#SearchForm").serialize();

$.ajax({
    type: "POST",
    url: "search.php",
    data: { 
        thedata : searchData,
        page : "listPage="+pageNumber
    },
    success: function(searchResult){
        $("#search-section").ajaxComplete(function() {
                        $(this).html(searchResult);
        }); 
    }
}); 
```

如果我想访问服务器端的数据该怎么办，通常如果我只发送1个数据，我从不定义.ajax中的数据，比如......

```
...
data: searchData,
... 
```

我可以访问服务器端的序列化数据，就像......

```
$_POST['inputValue1'];
$_POST['inputValue2'];
etc... 
```

但是如果我有 2 个或更多数据要通过 .ajax 发送，我应该怎么做，因为它必须首先定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T09:27:16.323

只需您可以如下使用

```
 data: searchData+"&listPage="+pageNumber 
```

# c++ - 通过单个函数返回另一个函数的多个参数

> ID：14089637
> 
> 赞同：4
> 
> 时间：2012-12-30T09:21:01.820
> 
> 标签：c++, function, syntax, c++11, arguments

由于我选择了具有误导性的问题标题，因此该问题已作为完全重复的问题关闭。这没有错，但提出了一个经常讨论的问题，例如在[这个问题](https://stackoverflow.com/questions/321068/returning-multiple-values-from-a-c-function)中。由于内容是关于 Stackoverflow 从未涵盖的更具体的主题，我希望重新打开这个问题。这发生在现在，所以问题来了。

我给出了一个期望三个整数值作为参数的函数`length(int x, int y, int z);`。我不能修改这个函数，例如接受一个结构或元组作为单个参数。

在 C++ 中有没有办法编写另一个函数，它可以用作上面函数的单个参数，比如`length(arguments());`？

无论如何，该函数的返回类型`arguments();`似乎需要是`int, int, int`. 但据我所知，我无法在 C++ 中定义和使用这样的函数。我知道我可以返回一个列表、一个元组、一个结构或一个类`arguments()`。这个问题被关闭了，因为有些人认为我会问这个问题。但困难的部分是传递元组、结构或其他三个给定的整数参数。

这可能吗？如果可以，在 C++ 中怎么可能？使用 C++11 的解决方案会很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T10:28:58.297

我认为没有任何直接的方法可以做你想做的事，但这是我在代码的几个地方使用的 C++11 技术。基本思想是使用我调用的模板函数`call_on_tuple`来获取函数参数`f`以及进一步参数的元组，扩展元组并在扩展的参数列表上调用函数：

```
template <typename Fun, typename... Args, unsigned... Is>
typename std::result_of<Fun(Args...)>::type
call_on_tuple(Fun&& f, std::tuple<Args...>&& tup, indices<Is...>)
{ return f(std::get<Is>(tup)...); } 
```

所以这个想法是，而不是打电话

```
length(arguments()); 
```

你会打电话给

```
call_on_tuple(length,arguments()); 
```

这假设它`arguments()`已更改，因此它返回 a `std::tuple<int,int,int>`（这基本上是您引用的问题的想法）。

现在困难的部分是如何获取`Is...`参数包，它是一个整数包，`0,1,2,...`用于对元组的元素进行编号。

如果你确定你总是有三个参数，你可以`0,1,2`按字面意思使用，但如果你的目标是让它适用于任何 n 元函数，我们需要另一个技巧，其他帖子已经描述了这个技巧，例如在几个[这个帖子的](https://stackoverflow.com/questions/687490/how-do-i-expand-a-tuple-into-variadic-template-functions-arguments)答案。

将参数的数量`sizeof...(Args)`转换为整数*列表*`0,1,...,sizeof...(Args)`是一个技巧：

我将把这个技巧和实现`call_on_tuple`放在一个命名空间中`detail`：

```
namespace detail {

  template <unsigned... Is>
  struct indices
  { };

  template <unsigned N, unsigned... Is>
  struct index_maker : index_maker<N-1,N-1,Is...>
  { };

  template <unsigned... Is>
  struct index_maker<0,Is...>
  { typedef indices<Is...> type; };

  template <typename Fun, typename... Args, unsigned... Is>
  typename std::enable_if<!std::is_void<typename std::result_of<Fun(Args...)>::type>::value,
              typename std::result_of<Fun(Args...)>::type>::type
  call_on_tuple(Fun&& f, std::tuple<Args...>&& tup, indices<Is...>)
  { return f(std::get<Is>(tup)...); }
} 
```

现在实际函数`call_on_tuple`在全局命名空间中定义如下：

```
template <typename Fun, typename... Args>
typename std::enable_if<!std::is_void<typename std::result_of<Fun(Args...)>::type>::value,
            typename std::result_of<Fun(Args...)>::type>::type
call_on_tuple(Fun&& f, std::tuple<Args...>&& tup)
{
  using std::tuple;
  using std::forward;
  using detail::index_maker;

  return detail::call_on_tuple
    (forward<Fun>(f),forward<tuple<Args...>>(tup),typename index_maker<sizeof...(Args)>::type());
} 
```

它基本上调用`detail::index_maker`生成递增整数列表，然后调用`detail::call_on_tuple`它。

因此，您可以这样做：

```
int length(int x, int y, int z)
{ return x + y + z; }

std::tuple<int,int,int> arguments()
{ return std::tuple<int,int,int> { 1 , 2 , 3 }; }

int main()
{
  std::cout << call_on_tuple(length,arguments()) << std::endl;
  return 0;
} 
```

希望这与您需要的足够接近。

*笔记。*我还添加了一个`enable_if`以确保仅与`f`实际返回值的函数一起使用。您可以轻松地为返回的函数创建另一个实现`void`。

再次抱歉过早地结束您的问题。

PS。您需要添加以下包含语句来测试它：

```
#include <tuple>
#include <type_traits>
#include <iostream> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T09:26:29.220

这是不可能的，C++ 不允许本机提供 3 个返回值，这些返回值可以用作另一个函数的 3 个*单独*的输入参数。

但是有返回多个值的“技巧”。`length()`尽管这些都没有为您的问题提供完美的解决方案，因为它们不能在不修改的情况下用作单个参数`length()`。

使用容器对象，如`struct`,`tuple`或`class`

```
typedef struct { int a,b,c; } myContainer;

myContainer arguments(int x, int y, int z) {
  myContainer result;
  result.a = 1;
  // etc
  return result;
}

myContainer c = arguments(x, y, z);
length(c.a, c.b, c.c); 
```

诀窍是重载`length()`函数，所以看起来你可以用一个参数来使用它：

```
void length(myContainer c) {
  length(c.a, c.b, c.c);
}

length(arguments()); 
```

当然，您可以通过使用`inline`、宏等进一步优化它。

我知道这仍然不是您想要的，但我认为这是最接近的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T09:22:50.340

你需要声明一个`struct { int a, b, c; }`或类似的东西（一个类也可以） - 我认为你一直在编程 python 或 php 或类似的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T09:42:02.530

大多数编程语言会通过某种形式的适配器函数来做到这一点。这是一个将要调用的函数（此处`length`）和调用它的参数作为参数的函数。您可能可以使用模板在 C++ 中构建类似的东西。查看`functional`标题以获得灵感。

Perl 是一种本机提供您正在寻找的语言的语言。你可以写：

```
sub arguments {
    return 1, 2, 3;
}
sub length {
    my ($p1, $p2, $p3) = @_;
    # … Work with $p1, $p2 and $p3
}
length(arguments()); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-30T09:24:29.493

通过引用传递参数，这样您就可以在不返回或返回结构的情况下更改它们。您只能从函数返回单个值。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-30T09:36:22.377

我们只能返回一个值。但如果您想返回多个值，您可以使用数组或定义对象或结构

```
 int* arguments() {
        int x[1,4,6] 
        return x;
    };

    void length(int i[]);

    length(arguments()); 
```

# c# - Monitor.TryEnter / Monitor.Exit 和 SynchronizationLockException

> ID：14089640
> 
> 赞同：6
> 
> 时间：2012-12-30T09:22:04.357
> 
> 标签：c#, .net, multithreading, locking

是否可以检测同一线程是否试图释放锁？我们在代码中有很多地方看起来像：

```
try
{
    try
    {
       if(!Monitor.TryEnter(obj, 2000)) 
       { 
            throw new Exception("can not lock"); 
       }
    }
    finally
    {
       Monitor.Exit(obj);
    }
}
catch
{
    //Log
} 
```

上面的代码非常简化，实际上Enter和Exit语句位于自定义对象（锁管理器）中。

问题是，在那个结构中，我们`SynchronizationLockException`在尝试“退出”时遇到了问题，因为它看起来像没有成功锁定的线程，最终试图释放。

所以问题是，我如何知道制作 Monitor.Exit 的线程是否与制作 Monitor.Enter 的线程相同？
我认为我可以使用 CurrentThread.Id 来同步进入和退出，但我不确定它是否足够“安全”。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-30T09:39:43.783

> 所以问题是，我如何知道制作 Monitor.Exit 的线程是否与制作 Monitor.Enter 的线程相同？

据我所知，你不能轻易做到。您无法找出哪个线程拥有监视器。

然而，这只是一个*编码*问题——你应该改变你的代码，这样它就不会在不应该释放监视器的时候*尝试释放它。*所以你上面的代码可以重写为：

```
if (!Monitor.TryEnter(obj, 2000))
{
    throw new Exception(...);
}
try
{
    // Presumably other code
}
finally
{
     Monitor.Exit(obj);
} 
```

或者更好的是，如果您使用的是 .NET 4，请使用接受参数的[重载：`TryEnter`](http://msdn.microsoft.com/en-us/library/dd289679.aspx)`ret`

```
bool gotMonitor = false;
try
{
    Monitor.TryEnter(obj, ref gotMonitor);
    if (!gotMonitor)
    {
        throw new Exception(...);
    }
    // Presumably other code
}
finally
{
    if (gotMonitor)
    {
        Monitor.Exit(obj);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T10:11:35.717

正如您认为在 try-catch 中调用 Monitor.Exit 是 'durty'（脏？），这里有一个非常简单的想法，试图“带走 durty”。锁对于同一个线程是可重入的，如果一个线程成功获取，在它释放之前，另一个线程的尝试将失败。这样您就可以考虑以下内容：

```
public void Exit(object key) {
    if(!IsActive) {
        return;
    }

    if(LockDictionary.ContainsKey(key)) {
        var syncObject=LockDictionary[key];

        if(Monitor.TryEnter(syncObject.SyncObject, 0)) {
            SetLockExit(syncObject);
            Monitor.Exit(syncObject.SyncObject);
            Monitor.Exit(syncObject.SyncObject);
        }
    }
} 
```

我们调用 Monitor.Exit 两次，因为我们将它锁定了两次，一次在代码外部，一次在此处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-19T11:44:59.213

我知道这是一个较老的问题，但无论如何这是我的答案。我会在 if 中移动 try-finally 构造：

```
try
{
    if(Monitor.TryEnter(obj, 2000))
    {
        try
        {
            // code here
        }
        finally
        {
            Monitor.Exit(obj);
        }
    }
    else
    {
        throw new Exception("Can't acquire lock");
    }
}
catch
{
    // log
} 
```

# java - Spring AOP介绍中丢失了原始接口

> ID：14089642
> 
> 赞同：4
> 
> 时间：2012-12-30T09:22:37.073
> 
> 标签：java, spring, spring-aop

这是我的 Spring AOP 配置。

```
<bean id="myObject" class="com.madzone.learn.spring.aop.OriginalClass"></bean>
<bean id="aspect" class="com.madzone.learn.spring.aop.AspectClass"></bean>
<aop:config>
    <aop:aspect ref="aspect">
        <aop:declare-parents
            types-matching="com.madzone.learn.spring.aop.OriginalClass+"
            implement-interface="com.madzone.learn.spring.aop.IntroducedInterface"
            default-impl="com.madzone.learn.spring.aop.IntroducedInterfaceImpl" />
    </aop:aspect> 
```

```
ApplicationContext context = new ClassPathXmlApplicationContext("myApp.xml");
Object myObject = context.getBean("myObject");
if (myObject instanceof OriginalClass) {
    System.out.println("This is OriginalClass");
}
if(myObject instanceof IntroducedInterface) {
    System.out.println("This is IntroducedInterface");
} 
```

通过这个介绍，我能够调用*IntroducedInterface*中的方法。但是，我无法访问 OriginalClass 的方法。在上面的代码片段中，我从未打印出“This is OriginalClass”。

从“介绍”的定义中，我了解到实现新接口的代理将从 OriginalClass 扩展并使其“方法也可访问”。

我在这里错过了什么吗？如果有的话，有人可以解释原因吗？

PS：以下是来自 Spring in Action（第 3 版）的图片描述了这一点。 ![调用者可以访问“现有方法”和“引入方法”两个接口吗？](../Images/35966019fad74302152cbed0fac7c137.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T09:33:57.417

> 从“介绍”的定义中，我了解到实现新接口的代理将从 OriginalClass 扩展并使其“方法也可访问”。

我不知道你从哪里得到这种印象。默认情况下，所有 Spring AOP 都是在[JDK 动态代理](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Proxy.html)上构建的，它仅适用于接口。代理一个具体的类是不可能的。Spring 支持使用 CGLIB 代理来代理类，但参考指南不鼓励使用它，而是支持*对*[接口](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-introduction-proxies)进行编程以减少耦合。

# 64-bit - 在 64 位主机上安装到“Program Files (x86)”

> ID：14089647
> 
> 赞同：2
> 
> 时间：2012-12-30T09:22:59.823
> 
> 标签：64-bit, nsis

我正在尝试使用“x64.nsh”将默认安装目录设置为`PROGRAMFILES64`if 在 64 位主机上。安装程序脚本类似于以下内容：

```
!include x64.nsh
# set to default here, override in .onInit if on 64bit
InstallDir "$PROGRAMFILES\AppName"

function .onInit
    ${If} ${RunningX64}
        SetRegView 64
        StrCpy $INSTDIR "$PROGRAMFILES64\AppName"
    ${EndIf}
functionEnd 
```

但它顽固地安装到`c:\Program Files\AppName`.

我看过一些例子（尤其是[这个](http://bojan-komazec.blogspot.cz/2011/10/nsis-installer-for-64-bit-windows.html)），但似乎没有一个对我有用。有没有完整的例子？

这是否与 nsis 创建一个 32 位安装程序 ( `PE32 executable (GUI) Intel 80386`) 的事实有关，即使在 64 位操作系统上打包 64 位代码时也是如此？

**编辑**：我实际上不介意只有 64 位的安装程序，因为有（并且可能不会有）32 位版本。但我似乎无法`Program Files (x86)`从`$PROGRAMFILES64`变量中得到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T10:51:14.650

正如@leppie 所指出的，将 64 位二进制文​​件安装到其中是正确的`c:\Program Files`（不像`c: Program Files (x86)`我认为的基于安装其他一些 64 位软件。仅 64 位的安装程序可以`$PROGRAMFILES64`直接使用。

# objective-c - What kind of property should be set to nil in dealloc?

> ID：14089648
> 
> 赞同：5
> 
> 时间：2012-12-30T09:23:07.673
> 
> 标签：objective-c, ios, automatic-ref-counting

I'm using ARC. Will ARC automatically release all the properties in `dealloc`? Is it necessary to manual set all public properties and private field to `nil`? Are there any good pattern to follow?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T09:29:37.070

Under ARC, the pattern is... don't do anything in dealloc, or even implement it. ARC takes care of your properties and instance variables for you.

The only exception is that dealloc is a good place to unregister for notifications, if your object has registered for any.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T09:47:16.197

Good question. When using `ARC` the compiler will implement a `dealloc` method for you and will handle implicitly the release of your instance variables and properties.

You may still need a custom -`dealloc` if your class needs to do anything other than releasing memory (e.g unregister for notifications like jrturton mentioned).

You can get a good grasp of what's you need to consider when transitioning to ARC in those Apple official [notes](https://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html#//apple_ref/doc/uid/TP40011226-CH1-SW11).

# drupal - reCaptcha 将我锁定在我的 Drupal 网站之外。无法登入

> ID：14089660
> 
> 赞同：0
> 
> 时间：2012-12-30T09:24:38.120
> 
> 标签：drupal, drupal-6, drupal-modules, recaptcha

我正在使用 Drupal 6 开发一个网站，并启用 reCaptcha 模块来检查其功能。它现在将我重定向到 google recaptaha 页面：`https://www.google.com/recaptcha/admin/create` 我不确定确切的过程，我还没有设置密钥，只有当我可以访问我的网站时我才能这样做。我无法登录甚至禁用该模块。根据 Drupal 论坛上的建议，我访问了数据库并从 `system`表中禁用了模块，但我仍然得到了重定向。我清除了 MySQL 数据库中的所有缓存表，但仍然相同。我应该怎么做才能访问和禁用模块？有没有好的教程/视频来设置`reCapthca`模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:20:44.280

请尝试以下操作： 1\. 清除浏览器缓存和 cookie 2\. 使用不同的浏览器检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T05:05:35.593

从系统表中备份 recaptcha 行。删除系统表中的 recaptcha 行。那应该禁用模块。

如果仍然出现相同的错误，请访问您的 drupal 网站 cron 作业 url 链接将如下所示

[http://www.yoursite.com/cron.php](http://www.yoursite.com/cron.php)

# asp.net - IModelBinder 和 IModelBinderProvider 的区别 asp.net mvc 3

> ID：14089662
> 
> 赞同：2
> 
> 时间：2012-12-30T09:25:32.420
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, modelbinders

问题很简单：我应该何时实施`IModelBinder`以及何时实施`IModelBinderProvider`？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T15:23:01.080

`IModelBinderProvider`是一家提供`IModelBinder`实现的工厂。对于类型总是使用相同模型绑定器的简单情况，您只需要使用 IModelBinder。对于需要动态确定要使用的模型绑定器的更复杂的情况，您将实现 IModelBinderProvider。

[吉米博加德](http://lostechies.com/jimmybogard/2011/07/07/intelligent-model-binding-with-model-binder-providers/)和[布拉德威尔逊](http://bradwilson.typepad.com/blog/2010/10/service-location-pt9-model-binders.html)解释得比我好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-18T07:34:00.447

当您使用 IModelBinderProvider 时，您仍然需要将 IModelBinder 用于活页夹类

```
 We use IModelBinderProvider to help us don't need to register manual like
    ModelBinders.Binders.Add(typeof(HomePageModels1), new HomeCustomBinder1());
    ModelBinders.Binders.Add(typeof(HomePageModels2), new HomeCustomBinder2());

... 
```

我们只需要添加 1 行

```
ModelBinderProviders.BinderProviders.Add(new YourModelBinderProvider()); 
```

当控制器有参数时。它会自动调用方法

```
public IModelBinder GetBinder(Type modelType) 
```

为您定制您的模型

# vb.net - PayPal - 10001 内部错误：超时处理请求快速结帐

> ID：14089666
> 
> 赞同：2
> 
> 时间：2012-12-30T09:26:12.490
> 
> 标签：vb.net, paypal, express-checkout

我在使用 Express Checkout 时遇到问题。我尝试了网络上提供的所有解决方案，但我无法使其工作！我将 VB 2012 用于 Web 和 ASP.NET。我在网站上构建了一个购物车并尝试集成 PayPal Express Checkout（目前使用 Sandbox 中的测试帐户）。当我单击 PayPal 按钮时，它会显示错误：

10001 内部错误：处理请求超时

调试应用程序我发现问题出在他尝试拨打电话时：

```
Try
    Using myWriter As New StreamWriter(objRequest.GetRequestStream())
          myWriter.Write(strPost)
    End Using
Catch e As Exception
End Try 
```

其中 strPost 如下：

```
METHOD=SetExpressCheckout&RETURNURL=http%3a%2f%2flocalhost%3a63223%2fCheckout%2fCheckoutReview.aspx&CANCELURL=http%3a%2f%2flocalhost%3a63223%2fCheckout%2fCheckoutCancel.aspx&BRANDNAME=PayPal+Sample+Application&PAYMENTREQUEST_0_AMT=36&PAYMENTREQUEST_0_ITEMAMT=36&PAYMENTREQUEST_0_PAYMENTACTION=Sale&PAYMENTREQUEST_0_CURRENCYCODE=USD&L_PAYMENTREQUEST_0+_NAME=Modena&L_PAYMENTREQUEST_0_AMT=36&L_PAYMENTREQUEST_0_QTY=1&USER=minni_1356740302_biz_api1.gmail.com&PWD=1356740320&SIGNATURE=AlYEmGf5ECuFHhwJgGlXJ.tMCTY0AFMcAx3nUjv6Ssg4RlD7YYwyoOJb&VERSION=88.0&BUTTONSOURCE=PP-ECWizard 
```

有什么问题？

我真的需要帮助......感谢任何和所有帮助。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T09:56:52.297

此错误可能仅表示 PayPal 沙箱服务器存在问题，或者可能表示您的请求存在问题。不过，我刚才能够使用 SetExpressCheckout 成功进入沙盒，所以我猜它一定与您的请求有关。

我马上看到的一件事是，您将无法在 ReturnURL 和 CancelURL 中使用 localhost，因为在使用时它将从 PayPal 的服务器上运行。因此，“localhost”将是他们的服务器，而不是您的服务器，并且重定向将不起作用。您需要使用自己的公共 IP 地址或设置某种域来指向您的测试服务器。这可能是他们的服务器不喜欢的。

我注意到的另一件事是，您只是将值 36 用于您的金额。PayPal 文档指定您需要在金额值上使用两位小数，因此您需要确保并传递 36.00。

我注意到的下一件事（可能是导致您的问题的原因）是您的一个参数名称无效：[L_PAYMENTREQUEST_0+_NAME]

你需要把那个+从那里拿出来。我敢打赌这会解决你的问题，但我仍然会解决其他问题。

# macos - NSDatePicker：获取选定的日期范围

> ID：14089670
> 
> 赞同：1
> 
> 时间：2012-12-30T09:26:38.793
> 
> 标签：macos, cocoa

我有一个 NSDatePicker 控件配置为在图形视图中选择日期范围。我可以使用获取选定的日期，`datePicker.dateValue`但问题是如果选择了一个范围，我该如何访问它？ ![在此处输入图像描述](../Images/86b2caed9bec59e3f52631d7622b7ecc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:55:02.473

当`NSDatePicker`处于 NSRangeDateMode 时，所选日期范围的长度由 给出[`-[NSDatePicker timeInterval]`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSDatePickerCell_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDatePickerCell/timeInterval)。

# python - Python IRC 机器人系统正常运行时间

> ID：14089673
> 
> 赞同：0
> 
> 时间：2012-12-30T09:27:22.607
> 
> 标签：python, bots, irc

我正在尝试在我的 irc 机器人中显示系统正常运行时间。我正在使用的脚本是：

```
 #linux
import os, sys
from datetime import timedelta
from util import hook
import subprocess
import datetime
@hook.command
def uptime_linux(inp,say=None):
    with open('/proc/uptime', 'r') as f:
        uptime_seconds = float(f.readline().split()[0])
        uptime_string = str(timedelta(seconds = uptime_seconds))
        say(uptime_string)
# windows

def uptime():
    """Returns a datetime.timedelta instance representing the uptime in a Windows    2000/NT/XP machine"""
    if not sys.platform.startswith('win'):
        raise RuntimeError, "This function is to be used in windows only"
    cmd = "net statistics server"
    p = subprocess.Popen(cmd, shell=True, 
          stdin=subprocess.PIPE, stdout=subprocess.PIPE)
    (child_stdin, child_stdout) = (p.stdin, p.stdout)
    lines = child_stdout.readlines()
    child_stdin.close()
    child_stdout.close()
    lines = [line.strip() for line in lines if line.strip()]
    date, time, ampm = lines[1].split()[2:5]
    #print date, time, ampm
    m, d, y = [int(v) for v in date.split('/')]
    H, M = [int(v) for v in time.split(':')]
    if ampm.lower() == 'pm':
        H += 12
    now = datetime.datetime.now()
    then = datetime.datetime(y, m, d, H, M)
    diff = now - then
    return diff

@hook.command
def uptime_win(inp,say=None):
    if __name__ == '__main__':
        say(uptime()) 
```

它没有给我一个错误，但它没有显示。我查看了代码，我不明白为什么我看不到它。也许它可能很小但我看不到它：D。我包含了所需的模块，但它仍然无法正常工作:'(。另外我想问一下你们是否有更简单的方法来获得 Windows 的正常运行时间（我已经有 linux）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T12:49:01.733

我现在看不出有什么问题，但如果它有助于我工作的机器人做了类似的事情，也许你可以看看那里：

uptime() 在[https://bazaar.launchpad.net/~p1tr-dev/p1tr/main/view/head:/plugins/info.py使用定义在](https://bazaar.launchpad.net/~p1tr-dev/p1tr/main/view/head:/plugins/info.py)[https://bazaar.launchpad.net/~p1tr-](https://bazaar.launchpad.net/~p1tr-dev/p1tr/main/view/head:/lib/plugin.py) 的 _get_output [dev/p1tr/main/view/head:/lib/plugin.py](https://bazaar.launchpad.net/~p1tr-dev/p1tr/main/view/head:/lib/plugin.py)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T16:12:12.857

没有在 Windows 上测试，因为我手边没有 Windows 盒子，但是使用[psutil](http://code.google.com/p/psutil/)（应该是跨平台的）

```
>>> pid = psutil.Process(1) # get main process (kernel or close to it)
>>> pid
<psutil.Process(pid=1, name='init') at 31222480>
>>> pid.create_time # create_time is effectively system up time (or should be close to it)
1356597946.03 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:53:09.077

我认为您不在主模块中，因此您必须删除`if __name__ == '__main__':`

# javascript - 如何提高 JS 滚动性能？

> ID：14089677
> 
> 赞同：4
> 
> 时间：2012-12-30T09:28:08.927
> 
> 标签：javascript, jquery

我正在改造我的网站，新网站可以在[http://beta.namanyayg.com/上找到](http://beta.namanyayg.com/)

网站上与滚动相关的主要有两件事：

*   要检查用户在哪个“页面”上，通过计算顶部偏移量和滚动位置，然后向页面添加一个类。
*   平滑滚动菜单点击。

我已经*为两者编写了代码，但是有很多 lag*。

第一个几乎总是导致滞后。结果，第二个也落后了。我已经包含了一个布尔值来检查它是否平滑滚动并禁用了正常的滚动事件，但是没有太大的变化。

您对如何提高性能有任何建议，以便没有（或至少更少）滞后？先感谢您！:)

...或者它根本与 JS 无关？我已经优化了其他所有内容...

编辑：**[http](http://beta.namanyayg.com/js/main.js)** **: //beta.namanyayg.com/js/main.js 上的未缩小 JS**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-12T13:43:13.310

如果你使用[underscore](http://underscorejs.org/#debounce)，它有一个很棒的`_.debounce`功能，非常适合这种事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T09:42:00.847

要检查用户从页面顶部滚动了多少（即他现在在哪个“页面”上），可以通过以下方式实现：

```
$(window).scroll(function () { 
    var scrollAmount = $(window).scrollTop(); // in pixels

    if(scrollAmount > SOME_AMOUNT)
    {
       // add required css class
    }
}); 
```

例如，要平滑滚动到某个 id，您可以使用：

```
$("html, body").animate({ scrollTop: $("#someID").scrollTop() }, 1000); 
```

这些都是 jQuery 解决方案，因此您应该包含 jquery 库。还有一个很好的 jQuery 插件，叫做[waypoints](http://imakewebthings.com/jquery-waypoints/)来执行这些计算。它可能对您有用，并且它还有一些其他不错的功能和示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T12:54:56.227

我也有同样的问题。我有一个带有数千个较小 div 的可滚动 div。每次我调用 scrollTop 来获取或设置滚动位置时，它有时会等待至少 1 秒。

我阅读了这些幻灯片：[http](http://www.slideshare.net/nzakas/high-performance-javascript-2011) : //www.slideshare.net/nzakas/high-performance-javascript-2011（尤其是幻灯片 138-139），现在我意识到每次调用 scrollTop，即使是作为 getter，都会使 javascript 重新布局页。这很可能是延迟的原因，但不幸的是我还没有找到解决方案，就像在不引起重新布局的情况下调用 scrollTop 的方式一样。

注意：我只在 Chrome 上进行了测试。

另请阅读本文的“浏览器很聪明”部分：[http ://www.phpied.com/rendering-repaint-reflowrelayout-restyle/](http://www.phpied.com/rendering-repaint-reflowrelayout-restyle/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-16T13:03:15.237

我找到了一个简单的方法来解决获取 scrollTop 的滞后问题，只需在滚动处理程序中调用它并将结果保存在变量中即可。

例如在 jQuery 中：

```
var scrollPos = 0,
    element = $('.class');

element.scroll(function(){
    scrollPos = element.scrollTop();  
}); 
```

对于第二个问题，设置 scrollTop，我通过仅显示可见元素来减少 DOM 元素的数量。在您的情况下，请确保仅将可见页面添加到 DOM。当滚动到下一页时，在滚动处理程序中删除顶部的（使用 jQuery .detach）并将下一个附加到 DOM。

# c - 合并排序，使用 for 循环进行合并

> ID：14089678
> 
> 赞同：0
> 
> 时间：2012-12-30T09:28:16.850
> 
> 标签：c, mergesort

我正在尝试用 C 编写代码以在合并函数中`mergesort`使用循环。`for`不幸的是，它不起作用。在函数中，我按降序`main`创建一个`array`on 10 ，然后调用该函数对它们进行排序。合并函数显然存在错误，因为从未实现升序，并且在某些数组大小中会出现一些长数字。我究竟做错了什么？这是功能：`ints``mergesort`

```
#include <stdio.h>
#include <stdlib.h>

void mergesort(int array[], int left, int right);

int main()
{
    int i;
    int arr[10];
    for(i=10;i>0;i--){
        arr[10-i]=i;
    }
    for(i=0;i<10;i++){
        printf("arr[%d] = %d\n",i,arr[i]);
        }
    mergesort(arr,0,9);
    puts("\n");
    for(i=0;i<10;i++){
        printf("arr[%d] = %d\n",i,arr[i]);
        }
    return 0;
}

void mergesort(int array[], int left, int right)
{
    void merge(int array[],int left, int mid, int right);
    int mid;
    if(left<right){
        mid=(left+right)/2;
        mergesort(array,left,mid);
        mergesort(array,mid+1,right);
        merge(array,left,mid,right);
    }
}

void merge(int array[], int left, int mid, int right)
{
    int i;
    int l=0;
    int r=mid+1;
    int arr_sorted[10];

    for(i=0;i<=right;i++){
        if((l<=mid) && (r<=right)){
            if(array[l]<array[r]){
                arr_sorted[i]=array[l];
                l++;
            }
            else {
                arr_sorted[i]=array[r];
                r++;
            }
        }
        if(l>mid){
            arr_sorted[i]=array[r];
            r++;
        }
        if(r>right){
            arr_sorted[i]=array[l];
            l++;
        }
    }
    for(i=0;i<=right;i++){
        array[i]=arr_sorted[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T09:36:31.957

首先看起来很奇怪的是为什么您将`left`参数传递给`merge`，但从`0`to迭代`right`；`left`甚至没有在这个函数中使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T09:43:03.723

合并功能中需要的一些更正：

```
void merge(int array[], int left, int mid, int right)
{
    int i;
    int l=left; //If you are passing left, then it should be used here !!
    int r=mid+1;
    int arr_sorted[10];

    for(i=0;(l<=mid)&&(r<=right);i++){ 
//Your condition for this loop unnecessarily complicates the rest of the code. This is a better way to go about it
//The loop body is fine
       if(array[l]<array[r]){
                arr_sorted[i]=array[l];
                l++;
            }
            else {
                arr_sorted[i]=array[r];
                r++;
            }
        }

//Now, checking for remaining elements and adding them to the result
//The conditions are simple because of the test condition we used in the previous for loop
        if(l>mid){
           for(;r<=right;r++,i++) arr_sorted[i]=array[r];
        }
        if(r>right){
            for(;l<=mid;l++,i++)  arr_sorted[i]=array[l];
        }
    }
    for(i=0;i<=right;i++){
        array[i]=arr_sorted[i];
    }
} 
```

此外，作为一种风格，尽量将前向声明保留在一个地方（更重要的是函数是相关的）。代替 ：

```
void mergesort(int array[], int left, int right)
{
    void merge(int array[],int left, int mid, int right);//This line should be moved to the top with the mergesort forward declaration
    int mid;
    if(left<right){
        mid=(left+right)/2; 
```

尝试做：

```
#include <stdio.h>
#include <stdlib.h>

void mergesort(int array[], int left, int right);
void merge(int array[],int left, int mid, int right); // <-------- 
```

不过，这只是一个偏好问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T11:59:59.873

这是整个工作合并排序，您可以看到差异，如果您有任何其他问题，请告诉我。我不得不更改名称，因为 stdlib 具有合并排序实现。

```
#include <stdio.h>
#include <stdlib.h>

int mymergesort(int array[], int left, int right);

int main()
{
    int i;
    int arr[10];
    for(i=10;i>0;i--){
        arr[10-i]=i;
    }
    for(i=0;i<10;i++){
        printf("arr[%d] = %d\n",i,arr[i]);
        }

    mymergesort(arr,0,9);
    puts("\n");
    for(i=0;i<10;i++){
        printf("arr[%d] = %d\n",i,arr[i]);
        }
    return 0;
}

int mymergesort(int array[], int left, int right)
{
    void mymerge(int array[],int left, int mid, int right);
    int mid;

    mid=(left+right)/2;
    if(left<right){
        mymergesort(array,left,mid);
        mymergesort(array,mid+1,right);
        mymerge(array,left,mid,right);
    }
    return 0;
}

void mymerge(int array[], int left, int mid, int right)
{
    int i=0;
    int l=left;
    int r=mid+1;
    int arr_sorted[10];

    for(i=left;i<=right;){
        if((l<=mid) && (r<=right)){
            if(array[l]<array[r]){
                arr_sorted[i]=array[l];
                l++;
                i++;

            }
            else {
                arr_sorted[i]=array[r];
                r++;
                i++;
            }
        }

        if(l>mid){
            for(;r<=right;r++){   
                arr_sorted[i]=array[r];
                i++;

            }   
            break;
        }
        if(r>right){
            for(;l<=mid;l++){

                 arr_sorted[i]=array[l];
                    i++; 
            }
            break;
        }
    }
    for(i=left;i<=right;i++){
        array[i]=arr_sorted[i];
    }
} 
```

# backbone.js - 骨干模型保存，验证失败

> ID：14089679
> 
> 赞同：2
> 
> 时间：2012-12-30T09:28:29.610
> 
> 标签：backbone.js, coffeescript

再多的谷歌搜索都无法解决我的困惑，所以我想我会在这里问这个问题。

我正在尝试保存模型并使用成功/错误回调。在[主干文档](http://documentcloud.github.com/backbone/#Model-save)中，它声明您像这样保存模型：`model.save([attributes], [options])`.

我在文档中找不到任何地方告诉您如何保存整个模型（即不指定属性），但遇到了[这个问题](https://stackoverflow.com/questions/5757555/how-do-i-trigger-the-success-callback-on-a-model-save)，第二个答案说要保存您可以执行的整个模型`model.save({}, [options])`。

但是我尝试这样做无济于事。我的代码如下：

骨干模型：

```
class Student extends Backbone.Model
  url: ->
    '/students' + (if @isNew() then '' else '/' + @id)

  validation:
    first_name:
      required: true
    last_name:
      required: true
    email:
      required: true
      pattern: 'email'

  schema: ->
    first_name:
      type: "Text"
      title: "First Name"
    last_name:
      type: "Text"
      title: "Last Name"
    email:
      type: "Text"
      title: "Email" 
```

在我看来，我有以下功能：

```
class Students extends CPP.Views.Base
  ...
  saveModel = ->
    console.log "model before", @model.validate()
    console.log "model attrs", @model.attributes
    @model.save {},
      wait: true
      success: (model, response) ->
        notify "success", "Updated Profile"
      error: (model, response) =>
        console.log "model after", @model.validate()
        console.log "model after is valid", @model.isValid()
        console.log "response", response
        notify "error", "Couldn't Update" 
```

在保存之前的第一个 console.log 中，我被告知模型是有效的，通过`undefined`响应的方式。如果确实查看模型，我可以看到所有三个字段都已填写。

同样，在接下来的两个控制台日志中，错误`@model.validate()`和`@model.isValid()`都分别返回`undefined`和`true`。但是我从尝试保存模型中得到的响应是`Object {first_name: "First name is required", last_name: "Last name is required", email: "Email is required"}`

最后在我得到的模型属性的 console.log 中：

```
Object
  created_at: "2012-12-29 23:14:54"
  email: "email@email.com"
  first_name: "John"
  id: 2
  last_name: "Doe"
  type: "Student"
  updated_at: "2012-12-30 09:25:01"
  __proto__: Object 
```

这让我相信，当我传递`{}`给我的模型时，它实际上是在尝试将属性保存为 nil，否则为什么会出错？

有人可以指出我做错了什么吗？我宁愿不必将每个属性单独传递给保存！

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:51:14.967

根据建议的答案，`Hui Zheng`我修改了服务器中的控制器，以 JSON 格式返回学生。

然而，为了找到问题的真正根源，我阅读了关于保存的[主干文档](http://documentcloud.github.com/backbone/docs/backbone.html#section-57)，并发现当`wait: true`作为选项给出时，它执行以下操作：

```
if (!done && options.wait) {
        this.clear(silentOptions);
        this.set(current, silentOptions);
} 
```

在进一步调查清楚后，我发现

```
clear: function(options) {
  var attrs = {};
  for (var key in this.attributes) attrs[key] = void 0;
  return this.set(attrs, _.extend({}, options, {unset: true}));
}, 
```

从这里看起来好像每个属性都被清除然后被重置。但是，在清除我的模型时，我编写的验证将失败（因为`first_name`, `last_name`,`email`是必需的）。

在[backbone.validation 文档](https://github.com/thedersen/backbone.validation)中，我们被告知可以使用参数`forceUpdate: true`，所以我选择在保存模型时使用它。我现在假设（尽管这可能不是一个好习惯）来自服务器的数据是正确的，因为这也已经过验证。

因此我的最终代码是：

```
saveModel = ->
  @model.save {},
    wait: true
    forceUpdate: true
    success: (model, response) ->
      notify "success", "Updated Profile"
    error: (model, response) ->
      notify "error", "Couldn't Update" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:19:56.103

您确定之前已正确设置模型的属性`save`吗？即使没有设置任何属性，它仍然可能通过`validate`（取决于`validate`函数的定义方式）。请尝试在控制台中打印模型以验证这一点。顺便说一句，最好传递`null`而不是`{}`in `save`，这样`set`就不会调用模型的方法。

更新：

根据 Backbone 的源代码，如果`null`作为 的第一个参数传递`save`，模型的属性将保持不变，直到模型成功保存在服务器上。所以另一种可能是你的服务器成功保存了模型但是返回了一个损坏的对象，导致模型的`set`方法失败。如果仍然无法解决问题，追踪`model.set`方法可能会有所帮助。</p>

# php - mod_rewrite：如何查看变量内容？

> ID：14089680
> 
> 赞同：0
> 
> 时间：2012-12-30T09:28:39.690
> 
> 标签：php, javascript, html, apache, mod-rewrite

有没有办法使用 javascript 或 PHP 显示 mod_rewrite 变量的内容，如 THE_REQUEST 或 REQUEST_FILENAME？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T17:21:01.950

*是的，如果*mod_rewrite 变量已导出到 Apache 环境变量中，这可以在 PHP 中使用[$_SERVER 变量来完成。](http://php.net/manual/en/reserved.variables.server.php)

 *为了导出 Apache mod_rewrite 变量，以便 PHP 通过 Apache 环境变量访问它，请确保 Apache VirtualHost 包含以下配置：

```
RewriteEngine On
RewriteRule .* - [E=API_VERSION:%{API_VERSION},NE]
RewriteRule .* - [E=THE_REQUEST:%{THE_REQUEST},NE]
RewriteRule .* - [E=REQUEST_URI:%{REQUEST_URI},NE]
RewriteRule .* - [E=REQUEST_FILENAME:%{REQUEST_FILENAME},NE]
RewriteRule .* - [E=IS_SUBREQ:%{IS_SUBREQ},NE]
RewriteRule .* - [E=HTTPS:%{HTTPS},NE] 
```

一旦这些变量被导出，PHP 就可以用来渲染 mod_rewrite THE_REQUEST 和 REQUEST_FILENAME 变量，或者任何其他 Apache 环境变量。

```
<?php
echo $_SERVER['THE_REQUEST'];
echo $_SERVER['REQUEST_FILENAME'];
?> 
```*

# perl - perl 的 cgi 脚本和 apache 的大小或配置限制

> ID：14089682
> 
> 赞同：1
> 
> 时间：2012-12-30T09:29:28.683
> 
> 标签：perl, apache, cgi

我试图找到通过 Perl CGI 脚本生成的相当大的 HTML 页面的问题。

只要生成的网页大小不超过 1 MB，我的 CGI 脚本就可以工作。

但是一旦网页大小超过 1 MB，页面就会在我的浏览器中显示一次正确，但重新加载后页面将被切断为 1 MB。效果会保持一段时间（> 5 分钟？），然后在重新加载一次后消失。

我想我确定了问题的一些可能来源：

*   perl 打印到的问题`STDOUT`
*   Apache 限制/错误
*   Apache的配置问题
*   生成网页的缓存问题
*   完全不同的东西

我已经尝试过的：

*   重新启动 Apache 似乎不会将持续时间更改为“一次修复”。
*   Perl 的立即刷新由`$|=1;`

有谁知道问题出在哪里？

这是一个测试脚本，我可以用它来重现效果：

```
#!/Programme/perl/perl/bin/perl

$| = 1;

use strict;

use CGI qw/:standard -nosticky -debug/;   # CGI scripting
use CGI::Carp qw(fatalsToBrowser); # show error messages in browser
use CGI::Session qw(-ip_match);

my $cgi;

my $top   = 30;
my $i;

$cgi     = new CGI;

print <<EOF;
Expires: -1
Cache-control: no-store
Pragma: no-cache

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>
<title>Testpage</title>
<meta http-equiv="Content-Type" content="text/html"; charset="iso-8859-1">
<META HTTP-EQUIV="expires" CONTENT="-1">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-store">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">

</head>
<body bgcolor="#efefef" text="#000000" marginwidth="0" marginheight="0">
EOF

for ($i=0;$i<10000;$i++){

    # any popup_menu
    print $cgi->popup_menu(-name     => "monthSel$i",
                            -values   => [1,2,3,4,5,6,7,8,9,10,11,12],
                            -default  => 1, 
                            -override => 1,
                            -style    => 'position:absolute; top: '. $top . 'px; left:50px'
                          );
    $top += 30;
}

# close body
print "</body>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T23:33:32.900

好吧，我想我解决了这个问题，虽然我并没有真正找到这个问题的根本原因。

脚步：

*   当我用不同的系统测试它时，一切都很好（至少有 5000 个弹出菜单）。
*   本地主机本身不起作用
*   **但是**：当通过常规网络堆栈强制数据包时（最初用于使用 Wireshark 进行调试，页面显示正确！

结论：似乎是系统的内部问题

在这里找到了通过网络堆栈强制本地数据包的方法：[Sniffer for localhost (Windows OS)](https://stackoverflow.com/questions/1566234/sniffer-for-localhost-windows-os) (use `http://localhost./`instead of `http://localhost/`)

# facebook - wp_is_post_autosave 不工作

> ID：14089684
> 
> 赞同：0
> 
> 时间：2012-12-30T09:29:34.910
> 
> 标签：facebook, wordpress, autosave

我想在不使用任何插件的情况下在 Facebook 上自动发布我的 WP 博客的所有文章。

我写了一些工作代码来做到这一点，这没关系......但我还需要仅在发布新文章时调用此代码（不适用于修订或自动保存）。

这是您需要查看的我的 function.php 文件的一部分：

```
add_action( 'save_post', 'koolmind_facebook_post_article',3 );
function koolmind_facebook_post_article( $post_id ) {
    /* configuration of facebook params */
    ....
    ....
    /* end config */

    if ( !wp_is_post_revision( $post_id ) && !wp_is_post_autosave( $post_id ) ) {

        /* retrieve some data to publish */

        /* invoke my code to publish on facebook */
    }
} 
```

一旦我点击“添加新文章”，我的代码就会被调用，并且一个空的草稿被发送到我的 Facebook 页面。此外，只要我在文章正文中插入一个字符，就会触发自动保存，并且会再次将新帖子（几乎是空的）发送到 facebook。

我只想阻止这种自动发布并仅在按下 PUBLISH 按钮时将我的数据发送到 facebook。

那可能吗？

* * *

更新

最后我发现了问题。我的 fb 代码中有一个错误。现在的问题是在更新我的帖子时避免多次发布。

这是现在的代码：

```
add_action('pending_to_publish', 'koolmind_facebook_post_article');
add_action('draft_to_publish', 'koolmind_facebook_post_article');
add_action('new_to_publish', 'koolmind_facebook_post_article');

function koolmind_facebook_post_article( $post_id ) {
require_once 'facebook/facebook.php';

/* some code here */

//verify post is not a revision
if ( !wp_is_post_revision( $post_id ) ) {
        $post_title = get_the_title( $post_id );
    $post_url = get_permalink( $post_id );
    $post_excerpt = get_the_excerpt();
    $post_image = 'http://.../default.jpg'; //default image

        if( $thumb_id = get_post_thumbnail_id( $post_id ) ){
            $image_attributes = wp_get_attachment_image_src( $thumb_id );
            $post_image = $image_attributes[0];
        } 

        /* some code here */
    }
} 
```

让我解释一下这个问题：

如果我使用这 3 个钩子我没有问题，但是代码是在我的特色图像存储到数据库之前执行的，所以 $post_image 总是等于默认图像。

如果我改用 publish_post 钩子，则特色图像设置正确（可能是因为在保存所有数据后调用了此钩子），但如果我更新我的帖子（wp_is_post_revision 似乎没有被解雇），我无法避免将数据发送到 Facebook。

希望您有一个好主意...现在代码几乎可以了！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T17:46:25.353

'save_post' 挂钩'[在数据保存到数据库后运行](http://codex.wordpress.org/Plugin_API/Action_Reference)'。这意味着您可以执行此验证：

```
//WP hook
//the last parameter 2 means you pass 2 variables to the callback:
//the ID and the post WP object 
add_action( 'save_post', 'koolmind_facebook_post_article',3,2 );

//Callback
function koolmind_facebook_post_article( $post_id, $post ) {

// Validation:

    //If current WP user has no permissions to edit posts: exit function
    if( !current_user_can('edit_post', $post_id) ) return;

    //If is doing auto-save: exit function
    if( defined('DOING_AUTOSAVE') AND DOING_AUTOSAVE ) return;

    //If is doing auto-save via AJAX: exit function
    if( defined( 'DOING_AJAX' ) && DOING_AJAX ) return;

    //If is a revision or an autosave version or anything else: exit function
    if( $post->post_status != 'publish') return;

    /* configuration of facebook params */

    /* invoke my code to publish on facebook */

} 
```

它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T09:38:44.323

尝试使用：

```
add_action('publish_post', 'koolmind_facebook_post_article'); 
```

# asterisk - Asterisk AGI - 使用 php agi 发起呼叫

> ID：14089687
> 
> 赞同：5
> 
> 时间：2012-12-30T09:29:57.857
> 
> 标签：asterisk, phone-call, agi

有人知道，我们如何使用 PHP AGI 脚本发起外部号码呼叫？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T16:46:31.893

你有两个可能的选择。一种是使用“Originate”命令。有关示例，请参见[http://www.voip-info.org/wiki/view/Asterisk+manager+Example:+Originate 。](http://www.voip-info.org/wiki/view/Asterisk+manager+Example:+Originate)

另一个是我在我的解决方案中喜欢的，因为它不需要 AMI，它使用假脱机调用文件。请参阅[https://wiki.asterisk.org/wiki/display/AST/Asterisk+Call+Files](https://wiki.asterisk.org/wiki/display/AST/Asterisk+Call+Files)了解如何操作。诀窍是在 /tmp 中创建假脱机文件，然后将文件“移动”到 ../spool/asterisk/outgoing 目录中。

如果您为假脱机呼叫分配一个唯一的通道变量键/值，那么您可以使用您的拨号计划来选择它并适当地路由呼叫。

# spring - @NumberFormat 注释不起作用

> ID：14089688
> 
> 赞同：3
> 
> 时间：2012-12-30T09:30:09.917
> 
> 标签：spring, spring-mvc

试图在 JSP 中显示货币符号，但我没有看到。做了我的研究，我只是不知道我应该添加什么才能让它工作。这就是我所拥有的。

```
<mvc:annotation-driven /> 
```

控制器

```
@NumberFormat(style = Style.CURRENCY)
private Double value = 50.00;

@ModelAttribute("value")
@NumberFormat(style = Style.CURRENCY)
public Double getValue() {
    return value;
}

@RequestMapping(method = RequestMethod.GET)
public ModelAndView loadForm(@ModelAttribute("user") User user) {
    ModelAndView instance 
    modelAndView.addObject("value", 100.00);
    return modelAndView;
} 
```

JSP

```
<spring:bind path="value">
     <input type="text" name="${value}" value="${value}"/>
</spring:bind>

<spring:bind path="value">
     ${value}
</spring:bind> 
```

输出

```
 <input type="text" name="value" value="100.0"/>

 100.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T09:33:55.360

尝试`value`对 name 属性使用字符串文字，而不是使用 EL 解析它

```
<spring:bind path="value">
     <input type="text" name="value" value="${value}"/>
</spring:bind> 
```

此外，将字段值移动到新对象中。目前我不相信代码正在使用控制器中的字段或控制器中的 getter。

```
public class MyForm(){

    @NumberFormat(style = Style.CURRENCY)
    private Double value = 50.00;

    @ModelAttribute("value")
    @NumberFormat(style = Style.CURRENCY)
    public Double getValue() {
        return value;
    }
} 
```

然后将对象添加到控制器中的模型中：

```
@RequestMapping(method = RequestMethod.GET)
public ModelAndView loadForm(@ModelAttribute("user") User user) {
    ModelAndView instance 
    modelAndView.addObject("myForm", new MyForm());
    return modelAndView;
} 
```

然后通过jsp访问：

```
<spring:bind path="myForm.value">
     <input type="text" name="${status.expression}" value="${status.value}"/>
</spring:bind>

<spring:bind path="myForm.value">
     ${status.value}
</spring:bind> 
```

目前代码的主要问题是它没有使用字段/访问器，它只是在模型中放置一个值，它不使用任何带注释的字段/方法。

参考资料： http: [//www.captaindebug.com/2011/08/using-spring-3-numberformat-annotation.html#.UOAO_3fghvA](http://www.captaindebug.com/2011/08/using-spring-3-numberformat-annotation.html#.UOAO_3fghvA)

[Spring MVC spring:bind 标签是如何工作的，status.expression 和 status.value 的含义是什么？](https://stackoverflow.com/questions/614729/how-is-the-spring-mvc-springbind-tag-working-and-what-are-the-meanings-of-statu)

# java - 带有 IntelliJ 社区版的 Google App Engine Java

> ID：14089692
> 
> 赞同：12
> 
> 时间：2012-12-30T09:32:16.377
> 
> 标签：java, google-app-engine, intellij-idea

是否可以将 App Engine Java 与 IntelliJ 社区版一起使用？我知道终极版有一个官方插件。

我想：

*   有运行/调试配置

*   部署到应用引擎

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T09:20:58.447

社区版没有这个功能，[查看矩阵](http://www.jetbrains.com/idea/features/editions_comparison_matrix.html)，我也不知道有任何第三方插件会将此功能添加到社区版。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-03-30T23:51:40.147

您可以获得终极版为 App Engine 开发，只需下载 EAP： [https ://confluence.jetbrains.com/display/IDEADEV/IDEA+2016.1+EAP](https://confluence.jetbrains.com/display/IDEADEV/IDEA+2016.1+EAP)

我使用 Community EAP 一年了，才意识到 Ultimate 预发布版本是免费的。

我已经使用 EAP 1.5 年了，它的稳定性不亚于发行版，这是可悲的，但确实如此。
如果您报告的错误是真正的问题，您可以通过 EAP 获得 1-2 周的修复周转时间。
到目前为止，还没有严重到足以阻止我使用 IDE 的问题，只是轻微的烦恼。即使发生这种情况，您也可以在 YouTrack 中提交错误后降级到以前的 EAP 版本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-04T17:53:10.773

我不知道这是否可以接受，但 Android Studio - 免费且基于 IntelliJ 社区版 - 提供与 Google App Engine 的集成。

示例链接：[https ://cloud.google.com/tools/android-studio/app_engine/add_module](https://cloud.google.com/tools/android-studio/app_engine/add_module)

# javascript - 延迟 CSS 过渡 2 秒

> ID：14089693
> 
> 赞同：4
> 
> 时间：2012-12-30T09:32:24.543
> 
> 标签：javascript, jquery, html, css

好的，所以我创建了一个按钮，将鼠标悬停在它上面时会显示一个菜单。一旦鼠标离开按钮，菜单就会被隐藏。这是完美的，但是当我从鼠标移到菜单本身时，菜单不应该消失。这也在发生，但我使用 css 创建了一个反弹效果，使其更时尚一点，如果我尝试在动画发生之前将鼠标悬停在菜单上，菜单会再次隐藏，因为菜单之间的差距和按钮在弹跳动作期间，所以我想延迟隐藏 2 秒，这样即使有人继续按钮并尝试移动菜单，它也应该等待至少 2 秒才能消失。[链接到小提琴](http://jsfiddle.net/sP5hg/)

**HTML 代码**

```
<div id="menu">
            <ul class="menu" id="tempMenu">
    <li class="listOfNumbers"><a id="Menus" href="">Numbers</a><div>
                        <ul class="submenu">
                            <li>
                                <a id="one" href="">one</a>
                            </li>
                            <li>
                                <a id="two" href="">two</a>
                            </li>
                            <li>
                                <a id="three" href="">three</a>
                            </li>
                            <li>
                                <a id="four" href="">four</a>
                            </li>
                            <li>
                                <a id="five" href="">five</a>
                            </li>
                            <li>
                                <a id="six" href="">six</a>
                            </li>
                            <li>
                                <a id="seven" href="">seven</a>
                            </li>
                            <li>
                                <a id="eight" href="">eight</a>
                            </li>
                        </ul>
                    </div>
                </li>
    </ul>
</div>
​ 
```

**CSS 代码：**

```
ul.menu .listOfNumbers{
    position: fixed;
    margin-left: 20px;
    list-style-type: none;
    margin: 15px 0;
    float: left;
    height: 30px;
    line-height: 30px;

}
ul.menu .listOfNumbers a{
    position: fixed;
    margin-left: 93px;
    background: #666 -webkit-gradient( linear, left bottom, left top, color-stop(0.3, rgb(00,00,00)), color-stop(0.9, rgb(80,80,80)) );
     background: -moz-linear-gradient(top, rgba(76,76,76,1) 0%, rgba(89,89,89,1) 12%, rgba(102,102,102,1) 25%, rgba(71,71,71,1) 39%, rgba(17,17,17,1) 60%, rgba(0,0,0,1) 77%, rgba(19,19,19,1) 91%);
   background: -ms-linear-gradient(top, rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(17,17,17,1) 60%,rgba(0,0,0,1) 77%,rgba(19,19,19,1) 91%); /* IE10+ */
background: linear-gradient(to bottom, rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(17,17,17,1) 60%,rgba(0,0,0,1) 77%,rgba(19,19,19,1) 91%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4c4c4c', endColorstr='#131313',GradientType=0 ); /* IE6-9 */
    display: block;
    padding: 0;
    text-decoration: none;
    color: #fff;
    font-size: 12px;
    font-weight: bolder;
    text-shadow: #000 0 -1px 1px;
    width: 90px;
    text-align: center;
    border-bottom: 1px solid #000;
    border-top: 1px solid #666;
    border-left: 1px solid #666;
    border-right: 1px solid #000;
    -webkit-transition:text-shadow .7s ease-out, background .7s ease-out;
    -moz-transition: text-shadow .7s ease-out, background .7s ease-out;
    -moz-box-shadow: white 7px 5px 20px;
    -webkit-box-shadow:white 7px 5px 20px;
    box-shadow: white 7px 5px 20px;
}
ul.menu .submenu{
    display: none;
   top: -30px;
   position: absolute;
    opacity: 0;
}
ul.menu .submenu li{
    list-style-type: none;
}
ul.menu li:hover .submenu{

    display: block;
    top: -2px;
    opacity: 1;
    animation:mymove 1.2s linear;
    -moz-animation:mymove 1.2s linear; /* Firefox */
    -webkit-animation:mymove 1.2s linear; /* Safari and Chrome */
    -o-animation:mymove 1.2s linear; /* Opera */
    -ms-animation:mymove 1.2s linear; /* IE */
}
@keyframes mymove
{
0%   {top:-10px;opacity:0.1;}
10%  {top:3px;opacity:0.3;}
30%  {top:40px;opacity:0.4;}
60%  {top:-5px;opacity:0.5;}
80%  {top:20px;opacity:0.7;}
90%  {top:10px;opacity:0.9;}
95%  {top:5px;opacity:0.95;}
100% {top:3px;opacity:1;}
}

@-moz-keyframes mymove /* Firefox */
{
0%   {top:-10px;opacity:0.1;}
10%  {top:3px;opacity:0.3;}
30%  {top:40px;opacity:0.4;}
60%  {top:-5px;opacity:0.5;}
80%  {top:20px;opacity:0.7;}
90%  {top:10px;opacity:0.9;}
95%  {top:5px;opacity:0.95;}
100% {top:3px;opacity:1;}
}

@-webkit-keyframes mymove /* Safari and Chrome */
{
0%   {top:-10px;opacity:0.1;}
10%  {top:3px;opacity:0.3;}
30%  {top:40px;opacity:0.4;}
60%  {top:-5px;opacity:0.5;}
80%  {top:20px;opacity:0.7;}
90%  {top:10px;opacity:0.9;}
95%  {top:5px;opacity:0.95;}
100% {top:3px;opacity:1;}
}

@-o-keyframes mymove /* Opera */
{
0%   {top:-10px;opacity:0.1;}
10%  {top:3px;opacity:0.3;}
30%  {top:40px;opacity:0.4;}
60%  {top:-5px;opacity:0.5;}
80%  {top:20px;opacity:0.7;}
90%  {top:10px;opacity:0.9;}
95%  {top:5px;opacity:0.95;}
100% {top:3px;opacity:1;}
}

@-ms-keyframes mymove /* IE */
{
0%   {top:-10px;opacity:0.1;}
10%  {top:3px;opacity:0.3;}
30%  {top:40px;opacity:0.4;}
60%  {top:-5px;opacity:0.5;}
80%  {top:20px;opacity:0.7;}
90%  {top:10px;opacity:0.9;}
95%  {top:5px;opacity:0.95;}
100% {top:3px;opacity:1;}
}

ul.menu .submenu li:first-child a{
  -webkit-border-top-left-radius:10px;
    -webkit-border-bottom-left-radius:2px;
    -webkit-border-top-right-radius:10px;
    -webkit-border-bottom-right-radius:2px;
    -moz-border-top-left-radius: 10px;
    -moz-border-radius-bottomleft:2px;    
    -moz-border-top-right-radius: 10px;
    -moz-border-radius-bottomright: 2px;
    border-top-left-radius: 10px;
    border-bottom-left-radius:2px;    
    border-top-right-radius: 10px;
    border-bottom-right-radius:2px;
    margin: 34px 95px;
    z-index: 1000;

}
ul.menu .submenu li:last-child a{
    -webkit-border-top-left-radius:2px;
    -webkit-border-bottom-left-radius:10px;
    -moz-border-top-left-radius: 2px;
    -moz-border-radius-bottomleft:10px;
    -webkit-border-top-right-radius:2px;
    -webkit-border-bottom-right-radius:10px;
    -moz-border-top-right-radius: 2px;
    -moz-border-radius-bottomright: 10px;
    border-top-left-radius: 2px;
    border-bottom-left-radius:10px;    
    border-top-right-radius: 2px;
    border-bottom-right-radius:10px;
    margin:260px 95px;
     z-index: 1000;

}

ul.menu .submenu li:nth-of-type(2) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;
    margin: 68px 95px;
     z-index: 1000;

}
ul.menu .submenu li:nth-of-type(3) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;
    margin: 100px 95px;
     z-index: 1000;

}
ul.menu .submenu li:nth-of-type(4) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;
    margin: 133px 95px;
     z-index: 1000;

}
ul.menu .submenu li:nth-of-type(5) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;
    margin: 165px 95px;
     z-index: 1000;

}
ul.menu .submenu li:nth-of-type(6) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;
    margin: 197px 95px;
     z-index: 1000;

}

ul.menu .submenu li:nth-of-type(7) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;
    margin: 229px 95px;
     z-index: 1000;

}​ 
```

我不知道是否有必要涉及 javascript 或 jQuery。但是，如果使用它们中的任何一个都可以实现，那么它也很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T09:34:26.700

也许你想要`transition-delay`：[https ://developer.mozilla.org/en-US/docs/CSS/transition-delay](https://developer.mozilla.org/en-US/docs/CSS/transition-delay)

**编辑：**

> 您可以指定多个延迟；每个延迟都将应用于由 transition-property 属性指定的相应属性，该属性充当主列表。如果指定的延迟少于主列表中的延迟，则将缺失值设置为初始值 (0s)。如果有更多延迟，列表会被简单地截断为正确的大小。在这两种情况下，CSS 声明都保持有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T12:55:39.447

jsfiddle [http://jsfiddle.net/sP5hg/6/](http://jsfiddle.net/sP5hg/6/)

```
 ul.menu .listOfNumbers{
    position: relative;
    margin-left: 20px;
    list-style-type: none;
    margin: 15px 0;
    float: left;
    line-height: 30px;
    z-index: 1000;
}
ul.menu .listOfNumbers a{
    margin-left: 93px;
    background: #666 -webkit-gradient( linear, left bottom, left top, color-stop(0.3, rgb(00,00,00)), color-stop(0.9, rgb(80,80,80)) );
     background: -moz-linear-gradient(top, rgba(76,76,76,1) 0%, rgba(89,89,89,1) 12%, rgba(102,102,102,1) 25%, rgba(71,71,71,1) 39%, rgba(17,17,17,1) 60%, rgba(0,0,0,1) 77%, rgba(19,19,19,1) 91%);
   background: -ms-linear-gradient(top, rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(17,17,17,1) 60%,rgba(0,0,0,1) 77%,rgba(19,19,19,1) 91%); /* IE10+ */
background: linear-gradient(to bottom, rgba(76,76,76,1) 0%,rgba(89,89,89,1) 12%,rgba(102,102,102,1) 25%,rgba(71,71,71,1) 39%,rgba(17,17,17,1) 60%,rgba(0,0,0,1) 77%,rgba(19,19,19,1) 91%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4c4c4c', endColorstr='#131313',GradientType=0 ); /* IE6-9 */
    display: block;
    padding: 0;
    text-decoration: none;
    color: #fff;
    font-size: 12px;
    font-weight: bolder;
    text-shadow: #000 0 -1px 1px;
    width: 90px;
    text-align: center;
    border-bottom: 1px solid #000;
    border-top: 1px solid #666;
    border-left: 1px solid #666;
    border-right: 1px solid #000;
    -webkit-transition:text-shadow .7s ease-out, background .7s ease-out;
    -moz-transition: text-shadow .7s ease-out, background .7s ease-out;
    -moz-box-shadow: white 7px 5px 20px;
    -webkit-box-shadow:white 7px 5px 20px;
    box-shadow: white 7px 5px 20px;
}
ul.menu .submenu{
    display: none;
   top: -30px;
   position: absolute;
    /*opacity: 0;*/
}
ul.menu .submenu li{
    list-style-type: none;
}

ul.menu li:hover .submenu{

    display: block;
    top: -2px;
    /*opacity: 1;*/
    animation:mymove 1.2s linear;
    -moz-animation:mymove 1.2s linear; /* Firefox */
    -webkit-animation:mymove 1.2s linear; /* Safari and Chrome */
    -o-animation:mymove 1.2s linear; /* Opera */
    -ms-animation:mymove 1.2s linear; /* IE */
}
@keyframes mymove
{
0%   {top:-10px;opacity:0.1;}
10%  {top:3px;opacity:0.3;}
30%  {top:40px;opacity:0.4;}
60%  {top:-5px;opacity:0.5;}
80%  {top:20px;opacity:0.7;}
90%  {top:10px;opacity:0.9;}
95%  {top:5px;opacity:0.95;}
100% {top:3px;opacity:1;}
}

@-moz-keyframes mymove /* Firefox */
{
0%   {top:-10px;opacity:0.1;}
10%  {top:3px;opacity:0.3;}
30%  {top:40px;opacity:0.4;}
60%  {top:-5px;opacity:0.5;}
80%  {top:20px;opacity:0.7;}
90%  {top:10px;opacity:0.9;}
95%  {top:5px;opacity:0.95;}
100% {top:3px;opacity:1;}
}

@-webkit-keyframes mymove /* Safari and Chrome */
{
0%   {top:-10px;opacity:0.1;}
10%  {top:3px;opacity:0.3;}
30%  {top:40px;opacity:0.4;}
60%  {top:-5px;opacity:0.5;}
80%  {top:20px;opacity:0.7;}
90%  {top:10px;opacity:0.9;}
95%  {top:5px;opacity:0.95;}
100% {top:3px;opacity:1;}
}

@-o-keyframes mymove /* Opera */
{
0%   {top:-10px;opacity:0.1;}
10%  {top:3px;opacity:0.3;}
30%  {top:40px;opacity:0.4;}
60%  {top:-5px;opacity:0.5;}
80%  {top:20px;opacity:0.7;}
90%  {top:10px;opacity:0.9;}
95%  {top:5px;opacity:0.95;}
100% {top:3px;opacity:1;}
}

@-ms-keyframes mymove /* IE */
{
0%   {top:-10px;opacity:0.1;}
10%  {top:3px;opacity:0.3;}
30%  {top:40px;opacity:0.4;}
60%  {top:-5px;opacity:0.5;}
80%  {top:20px;opacity:0.7;}
90%  {top:10px;opacity:0.9;}
95%  {top:5px;opacity:0.95;}
100% {top:3px;opacity:1;}
}

ul.menu .submenu li:first-child a{
  -webkit-border-top-left-radius:10px;
    -webkit-border-bottom-left-radius:2px;
    -webkit-border-top-right-radius:10px;
    -webkit-border-bottom-right-radius:2px;
    -moz-border-top-left-radius: 10px;
    -moz-border-radius-bottomleft:2px;    
    -moz-border-top-right-radius: 10px;
    -moz-border-radius-bottomright: 2px;
    border-top-left-radius: 10px;
    border-bottom-left-radius:2px;    
    border-top-right-radius: 10px;
    border-bottom-right-radius:2px;
    margin: 35px 93px 0;

}
ul.menu .submenu li:last-child a{
    -webkit-border-top-left-radius:2px;
    -webkit-border-bottom-left-radius:10px;
    -moz-border-top-left-radius: 2px;
    -moz-border-radius-bottomleft:10px;
    -webkit-border-top-right-radius:2px;
    -webkit-border-bottom-right-radius:10px;
    -moz-border-top-right-radius: 2px;
    -moz-border-radius-bottomright: 10px;
    border-top-left-radius: 2px;
    border-bottom-left-radius:10px;    
    border-top-right-radius: 2px;
    border-bottom-right-radius:10px;

}

ul.menu .submenu li:nth-of-type(2) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;
}
ul.menu .submenu li:nth-of-type(3) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;

}
ul.menu .submenu li:nth-of-type(4) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;

}
ul.menu .submenu li:nth-of-type(5) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;

}
ul.menu .submenu li:nth-of-type(6) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;

}

ul.menu .submenu li:nth-of-type(7) a{
    -webkit-border-top-left-radius:0px;
    -webkit-border-bottom-left-radius:0px;
    -moz-border-top-left-radius: 0px;
    -moz-border-radius-bottomleft:0px;
    -webkit-border-top-right-radius:0px;
    -webkit-border-bottom-right-radius:0px;
    -moz-border-top-right-radius: 0px;
    -moz-border-radius-bottomright: 0px;

} 
```

* * *

major CSS changes:

1.  change the LI's position to relative and remove its children's position fix so that LI's size will include all of its children; This step is critical, since it will make the li:hover works all the time even the mouse could move out of link "Numbers";
2.  apply z-index on the LI rather than on the sub menus, I'm afraid this should be more rational, since we want the whole menu should be on the top front;

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T09:56:28.510

看看这个[W3School 的解释](http://www.w3schools.com/css3/css3_transitions.asp)

它说你可以在任何时候指定一个过渡，有多个过渡，还有更多你可以用 CSS3 做的事情。请仔细阅读本教程，它将对您有很大帮助。

# java - 在设置壁纸之前启动裁剪图像活动

> ID：14089694
> 
> 赞同：0
> 
> 时间：2012-12-30T09:32:29.133
> 
> 标签：java, android, image

在我的应用程序中，用户可以单击按钮将 imageview 中的图像设置为墙纸。

这是代码：

```
WallpaperManager myWallpaperManager = WallpaperManager
    .getInstance(getApplicationContext());

try {
    myWallpaperManager.setBitmap(
        ((BitmapDrawable) fullSizeImage.getDrawable()).getBitmap());
    //setResource(fullSizeImage.getDrawable());
    Toast.makeText(
        FullSizeImageDisplay.this,
        "Wallpaper set",Toast.LENGTH_SHORT).show();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

它将图像设置为墙纸，但不能在所有设备上正常工作，其中只有一部分图片设置为墙纸。

我希望用户在将图像设置为墙纸之前获得裁剪图像的选项，例如在将图像设置为图库中的墙纸之前的 Android 节目。

可以从我的应用程序启动 Gallery 中的该活动以裁剪图像还是有其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T10:44:27.840

加载 Image 后，您可以在 onActivityResult 中启动一个意图。在那里你可以用这个意图开始裁剪，例如：

```
 Intent cropYourPicIntent = new Intent(
                "com.android.camera.action.CROP"); 
```

但这只是为了理解我的意思，还有很多代码要做。

# objective-c - #define 语句中的“预期不合格 ID”

> ID：14089697
> 
> 赞同：0
> 
> 时间：2012-12-30T09:33:13.630
> 
> 标签：objective-c, xcode, cocos2d-iphone, c-preprocessor

我试图通过使用`#define`语句来简化我的代码。这是因为它包含大量重复的代码“块”，这些代码不能使用显而易见的替代方法来重复，函数，因为在这些块中，变量需要像在语句中那样`#define`声明，例如`#define dostuff(name) int name##Variable;`.

* * *

## 代码

```
#define createBody(name,type,xpos,ypos,userData,width,height) b2BodyDef name##BodyDef;\
name##BodyDef.type = type==@"dynamic"?b2_dynamicBody:b2_staticBody;\
name##BodyDef.position.Set(xpos,ypos);\
name##BodyDef.userData = userData;\
name=world->CreateBody(&name##BodyDef);\
b2PolygonShape name##shape;\
name##shape.SetAsBox(width/ptm_ratio/2,height/ptm_ratio/2); 
```

...并将其应用于以下内容：

```
createBody(block, @"dynamic", winSize.width*5/6/ptm_ratio, winSize.height*1/6/ptm_ratio, ((__bridge void*)blockspr), blockspr.contentSize.width, blockspr.contentSize.height)
//                                                               error  appears  there:  ^ 
```

现在我的观点是一切都很好，没有错误，除了一个让我害怕的错误：

> 预期的不合格 ID

如图所示，它指向 中的第一个括号`((__bridge ...`。（该参数通过参数传递`userData`给`createBody`。）

我知道这段代码远非简单，但由于其他一切正常，我相信必须存在答案。

这是我关于SO的第一个问题，所以如果有任何不清楚或不足的地方，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T15:36:37.267

> 我试图通过使用#define 语句来简化我的代码。

这在我心里敲响了警钟。

将其分解为功能。你说你不能。我说你可以。

请注意，您的宏在这里：

```
createBody(name,type,xpos,ypos,userData,width,height); 
```

它的语法与 C 函数**完全相同。**所以你已经创建了一个函数，你只是将它声明为一个宏。没有理由不能将它重写为函数（C 或 Objective-C 无关紧要）。您不需要为每个主体指定自己的名称，而是可以将它们存储在字典中（但要小心，因为 Box2D 拥有主体的所有权）。

# wpf - WPF Datagrid 控件能否在列布局方面表现得像 WinForms DataGridControl？

> ID：14089705
> 
> 赞同：7
> 
> 时间：2012-12-30T09:35:08.260
> 
> 标签：wpf, layout, datagrid

基本上，我想让 WPF DataGrid 控件的列布局与 WinForms DataGridView 完全一样

更具体地说，这是我正在寻找的行为：

*   网格控件应该占用它给定的空间（即，无论它的父控件中有多少空间可供它使用）。这里我指的是控件，而不是列。

*   创建的列（无论是自动还是手动）可能会也可能不会占用所有这些空间。

*   如果在创建列后剩余空间，则不应扩展最后一列以填充该空间

*   如果在创建列后还有剩余空间，则不应创建一个没有任何内容的空列来填充该额外空间

据我所知，在 WPF 中，最后两个要点似乎是相互排斥的，您必须选择其中一个。有没有人找到办法做到这两点？我已经搜索了很多并且没有找到我正在寻找的东西，但是我发现的所有帖子往往都是几年前的，所以我希望现在有人已经弄清楚了这件事。

编辑：sa_ddam213，这是我整理的一个快速 xaml 项目来测试您的建议。

```
<Window x:Class="DataGridFix.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:DataGridFix"
        Title="MainWindow" Height="350" Width="525">

    <Window.Resources>
        <ObjectDataProvider x:Key="data"
                    ObjectType="{x:Type local:TestObject}"
                    MethodName="GetTestData" />
    </Window.Resources>
    <StackPanel>
        <DataGrid HorizontalAlignment="Left"  ColumnWidth="Auto" Height="150" VerticalAlignment="Top" ItemsSource="{Binding Source={StaticResource data}}" />
    </StackPanel>
</Window> 
```

这是背后的代码：

命名空间 DataGridFix { public class TestObject { public int Id { get; 放; } 公共字符串名称 { 获取；放; }

```
 public static List<TestObject> GetTestData()
    {
        var items = new List<TestObject>();

        items.Add(new TestObject() { Id = 1, Name = "Joe" });
        items.Add(new TestObject() { Id = 2, Name = "Matt" });
        items.Add(new TestObject() { Id = 3, Name = "Hal" });

        return items;
    }
} 
```

}

我从您的建议中看到的唯一值得注意的是将 Horizo​​ntalAlignment 设置为 Left。我这样做了，并尝试将 ColumnWidth 设置为各种设置，但每个设置都有相同的问题（当然除了 * ......从技术上讲，我可以把那个弄乱，但我不会进入那个）。

如果您使用鼠标扩展任何列，然后减小列大小，则会出现空填充列。我从您的帖子中注意到的唯一其他区别是您将 DataGrids 放在 StackPanel 中，因为您有多个。我只是为了见鬼而尝试过，但结果相同。如果您发现我所做的与您的建议之间有任何其他区别，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T01:25:57.230

为了获得您想要的行为，您可能必须修改`DataGrid`.

看一下代码。我已经非常接近`DataGridView`我认为的 WinForms 外观。

要删除额外的列，您必须从`DataGridColumnHeadersPresenter`. 我刚刚评论了它。其余的只是默认模板。

另一个修改是对模板的`DataGrid.`
By 设置`HorizontalAlignment="Left"`，`ScrollContentPresenter`行不再占据控件的所有宽度。

这些是我对默认模板所做的仅有的 2 处更改。

![在此处输入图像描述](../Images/6a60d68e1f2beab0f793dcb25fcd4801.png)

```
<Style TargetType="{x:Type DataGridColumnHeadersPresenter}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridColumnHeadersPresenter}">
                <Grid>
                    <!-- Remove this filler column -->
                    <!--<DataGridColumnHeader x:Name="PART_FillerColumnHeader" IsHitTestVisible="False" />-->
                    <ItemsPresenter />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="{x:Type DataGrid}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGrid}">
                <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                SnapsToDevicePixels="True"
                                Padding="{TemplateBinding Padding}">
                    <ScrollViewer Focusable="false" Name="DG_ScrollViewer">
                        <ScrollViewer.Template>
                            <ControlTemplate TargetType="{x:Type ScrollViewer}">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Button Command="{x:Static DataGrid.SelectAllCommand}"
                                                    Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=CellsPanelHorizontalOffset}"
                                                    Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type DataGrid}, ResourceId=DataGridSelectAllButtonStyle}}"
                                                    Focusable="false"
                                                    Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=HeadersVisibility, Converter={x:Static DataGrid.HeadersVisibilityConverter}, ConverterParameter={x:Static DataGridHeadersVisibility.All}}" />

                                    <DataGridColumnHeadersPresenter Grid.Column="1" Name="PART_ColumnHeadersPresenter"
                                                    Visibility="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=HeadersVisibility, Converter={x:Static DataGrid.HeadersVisibilityConverter}, ConverterParameter={x:Static DataGridHeadersVisibility.Column}}"/>

                                    <!-- Set HorizontalAlignment="Left" to have the rows only take up the width they need and not fill the entire width of the DataGrid -->
                                    <ScrollContentPresenter HorizontalAlignment="Left" x:Name="PART_ScrollContentPresenter" Grid.Row="1" Grid.ColumnSpan="2" CanContentScroll="{TemplateBinding CanContentScroll}" />

                                    <ScrollBar Grid.Row="1" Grid.Column="2" Name="PART_VerticalScrollBar"
                                                        Orientation="Vertical"
                                                        Maximum="{TemplateBinding ScrollableHeight}"
                                                        ViewportSize="{TemplateBinding ViewportHeight}"
                                                        Value="{Binding Path=VerticalOffset, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
                                                        Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>

                                    <Grid Grid.Row="2" Grid.Column="1">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}, Path=NonFrozenColumnsViewportHorizontalOffset}"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <ScrollBar Grid.Column="1"
                                                    Name="PART_HorizontalScrollBar"
                                                    Orientation="Horizontal"
                                                    Maximum="{TemplateBinding ScrollableWidth}"
                                                    ViewportSize="{TemplateBinding ViewportWidth}"
                                                    Value="{Binding Path=HorizontalOffset, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
                                                    Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                                    </Grid>
                                </Grid>
                            </ControlTemplate>
                        </ScrollViewer.Template>
                        <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                    </ScrollViewer>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**更新**
.NET 4 和 .NET 4.5 之间确实存在差异。
我在装有 Visual Studio 2012 的 Windows 8 机器上进行开发，因此作为测试，我尝试以 .NET 4 为目标，看看我是否可以复制错误的行为。但它仍然工作得很好。

可以肯定的是，我尝试在仅安装了 .NET 4 的另一台机器上运行该应用程序，当使列变大然后再次变小时，这里出现了空行。

问题似乎`DataGridRows`是行为不正常。在仅安装 .NET 4 的机器上运行时，它们会在缩小列时保持当前大小。在 .NET 4.5 上，它们按预期调整大小。

获得所需行为的新解决方案实际上比以前的解决方案简单得多。

通过简单地将 设置为并`HorizontalAlignment`删除填充列，它可以在 .NET 4 和 .NET 4.5 上运行。并且不再需要更换整个模板。`DataGridRows``left``DataGrid`

```
<Style TargetType="DataGridRow">
    <Setter Property="HorizontalAlignment" Value="Left" />
</Style>
<Style TargetType="DataGridColumnHeadersPresenter">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridColumnHeadersPresenter}">
                <Grid>
                    <ItemsPresenter />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-30T10:28:29.267

WPF 中的 Columns 有很多布局选项，只需选择要显示的内容即可。

*   像素
*   大小到单元格
*   SizeToHeader
*   汽车
*   成比例的（*）

如果您将 设置`HorizontalAlignment`为`Left`将`DataGrid`根据`ColumnWidth`您选择的内容调整大小以适应其内容。

这是一些可用列设置的示例

```
 <StackPanel>
        <DataGrid HorizontalAlignment="Left"  ColumnWidth="100" Height="64" VerticalAlignment="Top" ItemsSource="{Binding ElementName=UI, Path=GridItems}" />
        <DataGrid HorizontalAlignment="Left"  ColumnWidth="SizeToCells" Height="64" VerticalAlignment="Top" ItemsSource="{Binding ElementName=UI, Path=GridItems}" />
        <DataGrid HorizontalAlignment="Left"  ColumnWidth="SizeToHeader" Height="64" VerticalAlignment="Top" ItemsSource="{Binding ElementName=UI, Path=GridItems}" />
        <DataGrid HorizontalAlignment="Left"  ColumnWidth="Auto" Height="64" VerticalAlignment="Top" ItemsSource="{Binding ElementName=UI, Path=GridItems}" />
        <DataGrid HorizontalAlignment="Left"  ColumnWidth="*" Height="64" VerticalAlignment="Top" ItemsSource="{Binding ElementName=UI, Path=GridItems}" />
    </StackPanel> 
```

![在此处输入图像描述](../Images/8b3db408499d5fed38203f51ad770b22.png)

# c# - 为什么 System.Reflection.IntrospectionExtensions.GetTypeInfo 有无法访问的代码？

> ID：14089706
> 
> 赞同：7
> 
> 时间：2012-12-30T09:35:30.117
> 
> 标签：c#, .net, .net-4.5

新的 .NET4.5 API 在 IntrospectionExtensions 类中具有以下逻辑

```
public static TypeInfo GetTypeInfo(this Type type)
{
  if (type == (Type) null)
    throw new ArgumentNullException("type");
  IReflectableType reflectableType = (IReflectableType) type;
  if (reflectableType == null) 
    return (TypeInfo) null; // <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< HERE!
  else
    return reflectableType.GetTypeInfo();
} 
```

为什么这个方法有无法访问的代码？这是一个错误还是故意做的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T09:47:38.110

混淆是由类`==`上定义的运算符引起的`Type`。

如果您查看 IL，您会看到调用了运算符而不是`ReferenceEquals`.

```
L_0002: call bool System.Type::op_Equality(class System.Type, class System.Type) 
```

所以代码实际上是可以访问的:)

# hadoop - Hadoop CombineFileInputFormatInput

> ID：14089717
> 
> 赞同：0
> 
> 时间：2012-12-30T09:37:52.850
> 
> 标签：hadoop

在输入格式中使用 CombineFileInputFormatInput 时出现错误 InstantiationException。

```
Configuration conf = new Configuration();
conf.set("fs.default.name", "hdfs://master:54310");

Job job = new Job(conf, "WordCount");
job.setJarByClass(WordCount.class);
job.setMapperClass(WordCountMapper.class);
job.setReducerClass(WordCountReducer.class);
job.setOutputKeyClass(Text.class);
job.setOutputValueClass(IntWritable.class);

job.setInputFormatClass(CombineFileInputFormat.class);
job.setOutputFormatClass(TextOutputFormat.class);

FileInputFormat.addInputPath(job, new Path("/user/hduser/CombineFileInputFormatInput"));
FileOutputFormat.setOutputPath(job, new Path("/user/hduser/CombineFileInputFormatOutputNew2"));

System.exit(job.waitForCompletion(true) ? 0 : 1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:25:25.853

`CombineFileInputFormat`是一个抽象类，你必须扩展它并实现 createRecordReader 方法：

```
/**
 * This is not implemented yet. 
 */
public abstract RecordReader<K, V> createRecordReader(InputSplit split,
  TaskAttemptContext context) throws IOException; 
```

然后用`job.setInputFormatClass(..)`扩展类的名称替换调用。

# c# - 我可以按大小将 log4net 限制为 eventview 吗？

> ID：14089728
> 
> 赞同：0
> 
> 时间：2012-12-30T09:40:08.643
> 
> 标签：c#, asp.net, logging, log4net, event-log

我的 webApplication 使用写入事件查看器的 log4net。

我想将其大小限制为 1 GB。

有没有办法在 webcofig 中做到这一点？（因为它可以限制为日志文件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T09:42:38.420

是的，但默认情况下不是。现有的[EventLogAppender](http://logging.apache.org/log4net/release/sdk/log4net.Appender.EventLogAppenderMembers.html)不支持 MaximumLogSize。

[Event Log API](http://msdn.microsoft.com/en-us/library/sbswcb15.aspx)确实支持大小限制（[EventLog.MaximumKilobytes](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.maximumkilobytes.aspx)和[EventLog.OverflowAction](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.overflowaction.aspx)），因此您可以扩展现有的 appender 并提供此功能。

来自 MSDN

> MaximumKilobytes 属性表示事件日志文件的大小限制。当事件日志达到大小限制时，配置的 OverflowAction 值确定是丢弃新条目，还是新条目覆盖旧条目。

--

> OverflowAction 值，指定事件日志达到其最大日志大小时存储新条目的配置行为。默认值为 OverwriteOlder。

# php - Hundreds of Simultaneous Jobs: Node or PHP/nginx

> ID：14089734
> 
> 赞同：-1
> 
> 时间：2012-12-30T09:41:16.493
> 
> 标签：php, node.js, express, resque, phantomjs

I am implementing a Job queueing system that should be easy to scale (by adding more servers) and has to handle hundreds to thousands of simultaneous job processes at any one time. The load can change drastically over time.

Each job involve executing an instance of a headless browser (Phantom/Zombie) for about 1 minute. Within the 1 minute, most of it is idling time without any significant CPU processing involved.

**Question:** Will Node's event loop help in reducing the amount of resources used in this scenario, since there is considerable waiting on Network IO *(did I get this right?)* while a PHP/nginx implementation will start a new thread for each job and sleep the thread until the job is done 1 minute later. Or is there not really any strong reasons for choosing either one?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T17:18:01.907

It does not really matter. Your job dispatcher/scheduler will not be the bottleneck, most of your CPU time will be spent on the actual headless browser instance.

# c# - 将 Sqlite 用于多个平台（ARM、x64 和 x86）的更好方法？

> ID：14089737
> 
> 赞同：1
> 
> 时间：2012-12-30T09:41:53.327
> 
> 标签：c#, sqlite, windows-runtime

我将 Visual Studio 2012 用于典型的 LOB 应用程序。这个应用程序有 DAL、BLL 和 UI 层。

除 Sqlite 外，所有项目都基于可移植类库 (PCL)，因此我可以编译一次，它们适用于所有平台。

但是数据库是Sqlite。Sqlite 使用的是原生代码，所以我需要为每个平台部署一个包。例如，当我需要为ARM处理器部署时，我需要为ARM重新编译所有项目（超过20个），因为Sqlite放在较低层。大多数项目直接或间接依赖于放置 Sqlite 的 DAL。

哪种方法是解决这种情况的最佳方法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T09:56:49.240

看看这个关于 SQLite for .NET的[网页。](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)

有一个独立于平台的 SQLite.dll 版本。它将动态加载具有特定于平台的本机代码的附加 DLL。他们提出了以下目录布局（在您的应用程序目录中）：

```
System.Data.SQLite.dll (required, managed-only core assembly)
System.Data.SQLite.Linq.dll (optional, managed-only LINQ assembly)
x86\SQLite.Interop.dll (required, x86 native interop assembly)
x64\SQLite.Interop.dll (required, x64 native interop assembly) 
```

在您的项目中，您只需添加独立于平台、仅托管的 DLL。出于这个原因，您可以编译一次，它应该可以在所有平台上运行。仅托管到本机 DLL 之间没有硬链接。这仅在运行时解决。

希望这种方法可以扩展到 ARM 架构。

请注意，该页面还包含混合模式程序集、针对某些 VC 运行时库动态链接的程序集等。您需要避免使用它们。它们会引起很多头痛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T07:46:02.183

一旦您在应用程序中包含原生库，您就需要为每个平台构建一个单独的包，以便每个平台都包含适用于该平台的正确库。

如果您尚未将[SQLite 用于 Windows 运行时 Visual Studio 扩展](http://visualstudiogallery.msdn.microsoft.com/23f6c55a-4909-4b1f-80b1-25792b11639e)，那么您应该这样做。它将 SQLite 作为扩展添加到您的添加引用对话框。如果您从那里将其添加到您的项目中，则每次构建时都会自动包含正确项目的本机库。

要从 .NET 访问本机库，您可以使用独立于平台[的 sqlite-net](https://nuget.org/packages/sqlite-net)。

由于您使用的是 PCL，因此您可能不是仅为 WinRT 编写应用程序。在这种情况下，答案可能并不完全适用，但我需要更多信息才能为您提供更具体的建议。

# objective-c - 谷歌云存储objective c示例

> ID：14089742
> 
> 赞同：2
> 
> 时间：2012-12-30T09:43:14.027
> 
> 标签：objective-c, google-cloud-storage

我从以下路径获得了用于 Objective C 的 Google API，用于使用云存储模块。

[Google API Objective-C 客户端](http://code.google.com/p/google-api-objectivec-client/)

不幸的是，该 api 没有为云存储提供任何示例代码，所以我尝试自己做，但我无法成功。下面是我在做什么

1.  我从 Google API 控制台启用了 Cloud Storage 计费
2.  我做了一个名为“ahs_test”的桶
3.  我为已安装的应用程序创建了一个客户端 ID
4.  我在 Outh2.0 上取得了成功，并在上层 SVN 路径提供了库。这样做之后，我写了下面的代码并得到下面的错误消息
5.  请注意，在阅读了 Google Cloud Storage 之后，我有点确定我必须在我的请求标头中发送“x-goog-project-id”，但我想知道这个 API 的代码没有做类似的事情。（我可能会犯一些错误，所以留下这个以获得任何帮助......在此先感谢......）

* * *

```
// Code....

GTLServiceStorage *service = self.storageService
GTLQueryStorage *query = [GTLQueryStorage queryForBucketsGetWithBucket:@"ahs_test"];
_fileListTicket = [service executeQuery:query
completionHandler:^(GTLServiceTicket *ticket,
                                        GTLStorageBuckets  *bucketList,
                                        NSError *error) {

}];

// Error Message I get (Detailed from loger) 
```

* * *

```
storage.buckets.get

2012-12-30 07:11:30 +0000
Request: POST https://www.googleapis.com/rpc?prettyPrint=false
Request headers:
  Accept: application/json-rpc
  Authorization: Bearer _snip_
  Cache-Control: no-cache
  Content-Type: application/json-rpc; charset=utf-8
  User-Agent: com.example.DriveSample/1.0 google-api-objc-client/2.0 MacOSX/10.8 (gzip)

Request body: (128 bytes)
{
  "jsonrpc" : "2.0",
  "method" : "storage.buckets.get",
  "id" : "gtl_3",
  "params" : {
    "bucket" : "ahs_test",
    "max-results" : 150
  },
  "apiVersion" : "v1beta1"
}

Response: status 200
Response headers:
  Cache-Control: no-cache, no-store, max-age=0, must-revalidate
  Content-Encoding: gzip
  Content-Length: 132
  Content-Type: application/json; charset=UTF-8
  Date: Sun, 30 Dec 2012 07:10:44 GMT
  Expires: Fri, 01 Jan 1990 00:00:00 GMT
  Pragma: no-cache
  Server: GSE
  X-Content-Type-Options: nosniff
  X-Frame-Options: SAMEORIGIN
  X-XSS-Protection: 1; mode=block

Response body: (168 bytes)
{
  "error" : {
    "message" : "Access Not Configured",
    "data" : [
      {
        "reason" : "accessNotConfigured",
        "message" : "Access Not Configured",
        "domain" : "usageLimits"
      }
    ],
    "code" : 403
  },
  "id" : "gtl_3"
} 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T21:56:43.507

Google API 库使用默认情况下未启用的 Cloud Storage JSON API。请检查它是否在 Google API 控制台中启用。

# php - PHP PDO fetchAll 到类和构造函数中

> ID：14089743
> 
> 赞同：0
> 
> 时间：2012-12-30T09:43:39.357
> 
> 标签：php, oop, constructor, pdo

我正在尝试找到使用类将数据转换为类但使用同一类插入表或返回信息的最佳方法，但我不确定最好的方法。构造函数似乎在概念上给我带来了麻烦。现在我有一个页面，它使用以下命令将所有记录查询到一个类中：

`$query->fetchAll(PDO::FETCH_CLASS, "Contact", array($dbh))`

当然，这会将每条记录放入“联系人”类中，将每一行放入同名的私有数据成员和用于添加/更新/删除记录的数据库连接句柄中。这工作得很好。但是把原始数据变成一个类给我带来了麻烦。遵循上述代码的语法 [据我所知]，我不能有任何其他构造函数参数，否则这将是一个草率的 hack。这是我的代码：

```
class Contact {
    private $dbh;
    private $Contact_ID;
    private $Contact_First_Name;
    private $Contact_Last_Name;
    private $Contact_Email;
    private $Contact_Phone_Number;

    public function __construct($dbh) {
        $this->dbh = $dbh;
    }

    // .. 
} 
```

因此，如果我尝试使用表单中的数据创建一个新的联系人对象，则无法存储数据成员。我尝试了一个 hack 让它在具有默认参数的情况下工作，并检查默认值是否不会更改（因为它是 fetchAll() 的一部分），或者如果它不是，则存储新值但那不起作用。

谢谢。

# php - Drupal 7 自定义主菜单

> ID：14089752
> 
> 赞同：0
> 
> 时间：2012-12-30T09:45:05.703
> 
> 标签：php, html, drupal, hook

我需要通过 template.php (Drupal 7) 中的 Hook 实现以下结构：

```
<ul class="first border">
<li><a href="#link"><span class="big">Main Menu Title</span><span class="small">Main Menu Description</span></a><ul class="flyout"><li class="submenu"><a href="#link">Submenu Item</a></li></ul></li></ul> 
```

我在 template.php 中的当前状态如下：

```
 function mytheme_menu_link(array $variables) {
  $element = $variables['element'];
  $sub_menu = '';
  $element['#localized_options']['html'] = TRUE;

  if ($element['#below']) {
    $sub_menu = drupal_render($element['#below']);
  }

  if ($element['#original_link']['menu_name'] == "main-menu" && isset($element['#localized_options']['attributes']['title'])){
    $element['#title'] .= '<span class="description">' . $element['#localized_options']['attributes']['title'] . '</span>';
  }

  $output = l($element['#title'], $element['#href'], $element['#localized_options']);
  return '<li' . drupal_attributes($element['#attributes']) . '>' . $output . $sub_menu . "</li>\n";
} 
```

我尝试了一些东西，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T10:36:43.353

如果您想在菜单选项上设置类，请下载[menu_attributes](http://drupal.org/project/menu_attributes)。为了弄清楚为什么它不起作用，您是否将 mytheme 更改为您的实际名称？

# c# - JavaScript 无法在 ModalPopupExtender 中获取下拉选定索引

> ID：14089753
> 
> 赞同：1
> 
> 时间：2012-12-30T09:45:08.713
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, modalpopupextender

我在 UpdatePanel 中有一个带有多个下拉列表的 ModalPopupExtender，我使用 JavaScript 打开页面并在查询字符串中传递参数。

下拉列表选择的索引始终设置为 0（ModalPopupExtender 启动时的初始值）。

有什么帮助吗？

JS函数

```
function openInterfacePage() {
    var url = "Interface.aspx?";
    if ($('#<%= DDLPOP.ClientID %>').prop("selectedIndex") > 0) {
        url += "pop=" + $('#<%= DDLPOP.ClientID %> option:selected').val().trim();
    }
    if ($('#<%= DDLDevicePOPUP.ClientID %>').prop("selectedIndex") > 0) {
        url += "&device=" + $('#<%= DDLDevicePOPUP.ClientID %> option:selected').val().trim();
    }
    if ($('#<%= DDLDeviceInterface.ClientID %>').prop("selectedIndex") > 0) {
        url += "&interface=" + $('#<%= DDLDeviceInterface.ClientID %> option:selected').val().trim();
    }
    window.open(url, "mywindow", "toolbar=0,titlebar=0,status=0,resizable=0,menubar=0,location=1, width=920,height=500");
} 
```

prop("selectedIndex") 始终 = 0，我认为 javascript 无法识别回发后发生的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:07:47.693

我发现了这背后的原因，我发布它以防其他人面临同样的问题。

我把我的代码放在一个用户控件中，而javascript函数在同一个用户控件中，所以页面中有相同函数的不同副本（页面中使用用户控件的次数相同）。

所以我从用户控件中删除了这些功能并将其放在页面中，所以现在该功能只有一个副本。并将下拉列表控件的 ID 作为参数传递给函数。

# html - css的div宽度高度问题

> ID：14089755
> 
> 赞同：1
> 
> 时间：2012-12-30T09:45:43.413
> 
> 标签：html, css, height

出于某种原因，蓝色 div 比页面的“结束”更远，并且我得到了一个垂直滚动条。显然我不应该。有任何想法吗？HTML：

```
<!DOCTYPE html>
<head>
<link href="index.css" rel="stylesheet" type="text/css" />
<title></title>
</head>

<body>
<div id="body">
<div id="wrap">

<!--header starts-->
<div id="header">
<div id="name">
<h1>Comp <span>any</span> Name</h1>
</div><!--end name-->   
<div id="nav"><br>
    <ol>
        <li><a href="programs.html">Our Programs</a></li>
        <li><a href="contact.html">Contact Us</a></li>
        <li><a href="about.html">About Us</a></li>
        <li><a href="index.html">Home</a></li>
    </ol>
</div><!--end nav-->
</div><!--end header-->
<!--header ends-->

<!--content1 starts-->
<div id="content1">
<img src="images/placeholder.png" width="400" height="323" alt="logo"> 
<div id="imgright">
<h2>What We Do</h2>
<p>"Lorem ipsum dolor sit amet, consectetur adipisicing 
    elit, sed do eiusmod tempor incididunt ut labore et 
    dolore magna aliqua. Ut enim ad minim veniam, 
    quis nostrud exercitation ullamco laboris nisi ut 
    aliquip ex ea commodo consequat. Duis aute irure 
    dolor in reprehenderit in voluptate velit esse 
    cillum dolore eu fugiat nulla pariatur. Excepteur sint 
    occaecat cupidatat non proident, sunt in culpa qui o
    fficia deserunt mollit anim id est laborum."</p>
<div id="button">
<h4>Request A Program</h4>
</div><!--end button-->
</div><!--end imgright-->
</div><!--end content1-->
<!--content1 ends-->

<!--content2 starts-->
<div id="content2">
<div id="one">
  <img src="images/arrow.png" width="16" height="14" alt="arrow1">
  <h3>Contact Us</h3>
  <p>"Lorem ipsum dolor sit amet, 
    consectetur adipisicing elit, sed do 
    eiusmod tempor incididunt ut labore 
    et dolore magna aliqua. Ut enim ad 
    minim veniam"</p> 
</div><!--end one-->

<div id="two">
  <img src="images/arrow.png" width="16" height="14" alt="arrow2"> 
  <h3>About Us</h3>
  <p>"Lorem ipsum dolor sit amet, 
    consectetur adipisicing elit, sed do 
    eiusmod tempor incididunt ut labore 
    et dolore magna aliqua. Ut enim ad 
    minim veniam"</p>
</div><!--end two-->

<div id="three">
  <img src="images/arrow.png" width="16" height="14" alt="arrow3"> 
  <h3> View Our Programs</h3>
  <p>"Lorem ipsum dolor sit amet, 
    consectetur adipisicing elit, sed do 
    eiusmod tempor incididunt ut labore 
    et dolore magna aliqua. Ut enim ad 
    minim veniam"</p>
</div><!--end three-->  
</div><!--end content2-->
<!--content2 ends-->

<!--footer starts-->
<div id="footer">
<h5>Insert some footer information, copyright information also</h5>    
</div>    <!--end footer-->
<!--footer ends-->
</div><!--end wrap-->
</div><!--end body-->
<div id="blue">
</div><!--end blue-->
</body>
</html> 
```

CSS：

```
@charset "utf-8";
/* CSS Document */

html, body{
margin:0;
padding:0;
}

#body{
background-image:url(images/background.jpg);
background-repeat:repeat;
margin-top:-25px;
padding:0;  
}
#wrap{
border-width:3px;
border-style:solid;
border-color:white;
width:1024px;
height:100%;
margin:0 auto;
padding-top:5px;
}

#header h1{
font-size:36px;
font-family: Terminal, Verdana, Geneva, sans-serif;
color: white;
}

span{
font-size:100px;
color:black;
font-family:brush script std, Verdana, Geneva, sans-serif;
}

#nav{
margin-top:-110px;
margin-bottom:75px;
margin-right:40px;
}

#nav ol {
margin: 0;
padding: 0;
list-style: none;
line-height: normal;
}

#nav li {
display: block;
float: right;
}

#nav a {
display: block;
float: left;
margin-right: 3px;
padding: 10px 20px;
text-decoration: none;
font: 24px "Trebuchet MS", Arial, Helvetica, sans-serif;
color: white;
}

#nav a:hover { 
text-decoration: none; 
color: black;
}

#content1 img{
margin-left:25px;
}

#imgright{
margin-left:445px;
margin-top:-389px;
}

#button h4{
font-family:"Times New Roman", Times, serif;
font-size:24px;
color:white;
}

h2{
font-family:"Times New Roman", Times, serif;
font-size:48px;
}

#imgright p{
color: white;
font-size:24px;
font-family: "Times New Roman", Times, serif;
margin-top:-30px;
margin-left:20px;
}

#content2{
background-color:#2e3192;
}

#one, #two, #three{width:341.3px;}

#one h3{
font-family:trajan pro, Verdana, Geneva, sans-serif;
color:white;
}
#one p{
font-family:vijaya, Verdana, Geneva, sans-serif;
color:white;
}

#two h3{
font-family:trajan pro, Verdana, Geneva, sans-serif;
color:white;
}
#two p{
font-family:vijaya, Verdana, Geneva, sans-serif;
color:white;
}

#three h3{
font-family:trajan pro, Verdana, Geneva, sans-serif;
color:white;    
}

#three p{
font-family:vijaya, Verdana, Geneva, sans-serif;
color:white;
}

#one{
margin-top:50px;
}

#two{
margin-top:-104px;
margin-left:360px;
}

#three{
margin-top:-408px;
margin-left:720px;
}

#footer{
position:absolute;
bottom:0;
color:white;
}

#footer h5{
margin-left:300px;
}

#blue{
position:absolute;
top:500px;
z-index:-1;
background-color:#2e3192;
height:100%;
width:100%;
} 
```

这是它目前的样子： ![目前看起来像](../Images/b798961e688f1e80e33e4e5d59db0e4e.png)

这就是它应该的样子，没有滚动条并且停在底部。 ![应该看起来像](../Images/9d16dcd71ac6df5af735ec4be6249454.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T09:50:23.347

### 两种方式：

**移除高度**

```
#wrap{
    border-width:3px;
    border-style:solid;
    border-color:white;
    width:1024px;
    height:100%; // Make this auto. height: auto;
    margin:0 auto;
    padding-top:5px;
} 
```

或者

**溢出隐藏**

```
#body{
    background-image:url(images/background.jpg);
    background-repeat:repeat;
    margin-top:-25px;
    padding:0;
    overflow: hidden; // Add this
} 
```

# ajax - 在厚盒中添加 wp_editor

> ID：14089758
> 
> 赞同：4
> 
> 时间：2012-12-30T09:46:27.417
> 
> 标签：ajax, editor, wordpress, thickbox

我想在前端的模态对话框（厚框）内添加一个 wp_editor，但只得到一个没有按钮的空编辑器。（WordPress 3.5 和插件开发）

wp_editor 通过 ajax 调用附加...

页面中似乎缺少一些重要的 javascript。

是否可以以某种方式在 WP 中预加载编辑器脚本？

这是一个暴露问题的示例插件（为每个内容添加一个编辑链接）：

```
<?php
/*
Plugin Name: ThickboxEditor
*/

$thickboxeditor = new ThickboxEditor();

class ThickboxEditor{

    function __construct()
    {

        add_action( 'wp_print_styles', array( &$this, 'wp_print_styles' ) );
        add_action( 'init', array( &$this, 'init' ) );
        add_filter( 'the_content', array( &$this, 'the_content' ) );
        add_action( 'wp_ajax_thickboxeditor', array( &$this, 'editor' ) );
        add_action( 'wp_ajax_nopriv_thickboxeditor', array( &$this, 'editor' ) );

    }

    function the_content( $content ){

        $content .= '<a href="' . admin_url( 'admin-ajax.php' ) . '?action=thickboxeditor" class="thickbox" title="Add new note">EDIT THICKBOXEDITOR</a>';

        return $content;

    }

    function editor(){

        wp_editor( $this->postcontent, 'postcontent', array(
            'media_buttons' => false,
            'teeny' => false,
            'textarea_rows' => '7',
            'tinymce' => array( 'plugins' => 'inlinepopups, fullscreen, wordpress, wplink, wpdialogs' )
        ) );

        die(0);

    }

}
?> 
```

**更新**

感谢@danielauener，一种解决方案是初始化 mceAddControl。因此，这是同一插件的工作示例：

```
<?php
/*
Plugin Name: ThickboxEditor
*/

$thickboxeditor = new ThickboxEditor();

class ThickboxEditor{

    function __construct()
    {

        add_action( 'wp_print_styles', array( &$this, 'wp_print_styles' ) );
        add_action( 'init', array( &$this, 'init' ) );
        add_filter( 'the_content', array( &$this, 'the_content' ) );
        add_action( 'wp_ajax_thickboxeditor', array( &$this, 'editor' ) );
        add_action( 'wp_ajax_nopriv_thickboxeditor', array( &$this, 'editor' ) );
        add_action( 'wp_footer', array( &$this, 'wp_footer' ) );

    }

    function wp_footer(){

        echo '<!--';
        wp_editor( '', 'invisible_editor_for_initialization' );
        echo '-->';

    }

    function the_content( $content ){

        $content .= '<a href="' . admin_url( 'admin-ajax.php' ) . '?action=thickboxeditor" class="thickbox" title="Add new note">EDIT THICKBOXEDITOR</a>';

        return $content;

    }

    function editor(){

        wp_editor( '', 'postcontent', array(
            'media_buttons' => false,
            'teeny' => false,
            'textarea_rows' => '7',
            'tinymce' => array( 'plugins' => 'inlinepopups, fullscreen, wordpress, wplink, wpdialogs' )
        ) );

        ?>

        <script language="javascript">
            jQuery(document).ready(function(){
                tinymce.execCommand('mceAddControl',true,'postcontent');
            });
        </script>

        <?php

        die(0);

    }

}
?> 
```

跳过丑陋的 wp_editor 初始化真的很好:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:01:58.593

有趣的是，thickbox 不提供任何回调。但正如我在推特上提到的，我会尝试`$.ajaxSuccess`调用来解决丑陋的 js-inject。只需将以下内容添加到您的 javascript 文件之一：

```
(function($) {
    // gets called for every successful ajax call
    $(document).ajaxSuccess( function(evt, request, settings) {

        // make sure this call was from your thickbox
        if ($('#your-thickbox-selector').length > 0) {
            tinymce.execCommand('mceAddControl',true,'postcontent');
        }
    }); 
})( jQuery ); 
```

**更新：**该`ajaxSuccess`方法必须分配给一个元素，更改了代码

# xpages - xPages @DbLookup 问题

> ID：14089764
> 
> 赞同：0
> 
> 时间：2012-12-30T09:47:17.987
> 
> 标签：xpages

我在几个重复控件和计算值中有这个代码

```
 @Unique(@DbLookup(database,view,key,columnnumber)) 
```

我可以看到，如果“columnnumber”是一个分类列，那么 DbLookup 只返回第一个类别。

今天我的解决方案是用这个未分类的列创建另一个视图，但这对我的客户来说是一个糟糕的解决方案，对我来说还有更多的工作。

有人知道这是否是一个错误？还是有其他解决方案？

我有 Lotus Domino 8.5.3 UP1 和同一个设计师

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T19:25:44.697

您可以通过以下方式获取视图条目：

```
var vc:NotesViewEntryCollection = database.getView("view").getAllEntriesByKey(key, true); 
```

然后您可以使用以下命令循环集合：

```
var ve:NotesViewEntry = vc.getFirstEntry();
ve = vc.getNextEntry(); 
```

在循环中，通过以下方式获取列值：

```
ve.getColumnValues(); 
```

我的理解是，这将比@DbLookup 执行得更好——我相信——它具有类似的代码。循环视图的最快方法是按照 Fredrik 的建议使用 ViewNavigator：

[http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Fast_Retrieval_of_View_Data_Using_the_ViewNavigator_Cache](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Fast_Retrieval_of_View_Data_Using_the_ViewNavigator_Cache)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:40:43.137

尝试改用@DbColumn 或视图导航器。

# mockito - Mockito 方法不可访问

> ID：14089770
> 
> 赞同：12
> 
> 时间：2012-12-30T09:48:53.913
> 
> 标签：mockito

我使用以下 Maven 行在我的项目中设置了 mockito：

```
<dependency>
    <groupId>org.mockito</groupId>
    <artifactId>mockito-all</artifactId>
    <version>1.8.5</version>
    <scope>test</scope>
</dependency> 
```

我使用注释没有问题，`@Mock`但我无法访问和使用 mockito 方法，例如：

```
when(someMock.someMethod()).thenReturn(); 
```

Eclipse 只是无法识别它们。

请帮忙。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-31T01:19:32.580

尝试调用`Mockito.when(foo.getBar()).thenReturn(baz)`and `Mockito.verify(foo).getBar()`，它不会依赖静态导入。与`@Mock`注解不同，注解在技术上是一个类，`when`并且`verify`是 Mockito 类上的静态方法。

一旦你有这个工作，然后尝试大卫提到的静态导入：

```
import static org.mockito.Mockito.when;   // ...or...
import static org.mockito.Mockito.*;      // ...with the caveat noted below. 
```

这将允许您在`Mockito.when`不指定`Mockito`类的情况下使用。您也可以使用通配符，但是根据[这个 SO 答案](https://stackoverflow.com/a/2791970/1426891)，[Java 文档](http://download.oracle.com/javase/1,5.0/docs/guide/language/static-import.html)建议谨慎使用通配符——尤其是因为如果稍后将类似名称的静态方法添加到 Mockito 中，它可能会中断。

添加`import org.mockito.*;`是不够的，因为这会添加`org.mockito`包中的所有类，但不会添加`org.mockito.Mockito`.

特别是对于 Eclipse，您可以通过将光标放在`when`部件上`Mockito.when`并按 Control-Shift-M（“添加导入”）来添加静态导入。您还可以添加`org.mockito.Mockito`到您的收藏夹（Window > Preferences > Java > Editor > Content Assist > Favorites > New Type），以便所有 Mockito 静态方法都显示在您的 Ctrl-Space 内容辅助提示中，即使您没有专门导入它们。（您可能还想对 org.mockito.Matchers 执行此操作，它们在技术上可通过继承在 org.mockito.Mockito 上使用，但由于这个原因可能不会出现在 Eclipse 中。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-18T16:45:07.307

Kotlin 语法 - 不要忘记 ` ` 反引号：

```
import org.mockito.Mockito.`when`

`when`(someMock.someMethod()).thenReturn(); 
```

# c# - 更新 SQL Server 数据库中的数据

> ID：14089774
> 
> 赞同：1
> 
> 时间：2012-12-30T09:49:28.440
> 
> 标签：c#, asp.net, sql-server

我已注册为我的数据库表。我想将用户输入的信息更新到我的 SQL Server 数据库中。但它不起作用，它不会发生任何错误，但数据键不会更新到我的数据库中。如果我的代码有任何问题，请有人帮助我？谢谢。

```
protected void Button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("Data Source=USER-PC;Initial Catalog=webservice_database;Integrated Security=True");

    SqlCommand cmd = new SqlCommand("UPDATE registration SET username = @username, password = @password, retypepassword = @retypepassword, gender = @gender, birth = @birth, address = @address, city = @city, country = @country, postcode = @postcode, email = @email, carno = @carno", con);

    con.Open();

    cmd.Parameters.AddWithValue("@username", TextBoxUsername.Text);
    cmd.Parameters.AddWithValue("@password", TextBoxPassword.Text);
    cmd.Parameters.AddWithValue("@retypepassword", TextBoxRPassword.Text);
    cmd.Parameters.AddWithValue("@gender", DropDownListGender.Text);
    cmd.Parameters.AddWithValue("@birth", DropDownListDay.Text);
    cmd.Parameters.AddWithValue("@address", TextBoxAddress.Text);
    cmd.Parameters.AddWithValue("@city", TextBoxCity.Text);
    cmd.Parameters.AddWithValue("@country", DropDownListCountry.Text);
    cmd.Parameters.AddWithValue("@postcode", TextBoxPostcode.Text);
    cmd.Parameters.AddWithValue("@email", TextBoxEmail.Text);
    cmd.Parameters.AddWithValue("@carno", TextBoxCarno.Text);

    cmd.ExecuteNonQuery();

    con.Close();

    if (IsPostBack)
    {
        Response.Redirect("UpdateSuccess.aspx");
    } 
```

在我单击确认后，它以某种方式仅更新我`gender`的从男性到女性的列，其他数据列不会更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:11:38.270

这可能是因为@username 在 UPDATE 和 WHERE 中都使用了。如果它改变了，WHERE 将是错误的，如果它没有改变，它可以被排除在查询之外。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-18T11:19:26.947

sql更新

SqlCommand cmd = new SqlCommand("update[Testing].[dbo].[student] set name='" + tb1.Text + "',age='" + tb2.Text + "',mobile='" + tb3 .Text+ "' 其中 id = '" + tb4.Text + "'", con);

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-24T03:07:46.957

```
protected void Button1_Click(object sender, EventArgs e)
{
    SqlConnection con = new SqlConnection("Data Source=USER-PC;Initial Catalog=webservice_database;Integrated Security=True");

    SqlCommand cmd = new SqlCommand("SELECT * FROM registration WHERE username = " + TextBoxUsername.Text + "UPDATE registration SET username = @username, password = @password, retypepassword = @retypepassword, gender = @gender, birth = @birth, address = @address, city = @city, country = @country, postcode = @postcode, email = @email, carno = @carno", con);

    con.Open();

    cmd.Parameters.AddWithValue("@username", TextBoxUsername.Text);
    cmd.Parameters.AddWithValue("@password", TextBoxPassword.Text);
    cmd.Parameters.AddWithValue("@retypepassword", TextBoxRPassword.Text);
    cmd.Parameters.AddWithValue("@gender", DropDownListGender.Text);
    cmd.Parameters.AddWithValue("@birth", DropDownListDay.Text);
    cmd.Parameters.AddWithValue("@address", TextBoxAddress.Text);
    cmd.Parameters.AddWithValue("@city", TextBoxCity.Text);
    cmd.Parameters.AddWithValue("@country", DropDownListCountry.Text);
    cmd.Parameters.AddWithValue("@postcode", TextBoxPostcode.Text);
    cmd.Parameters.AddWithValue("@email", TextBoxEmail.Text);
    cmd.Parameters.AddWithValue("@carno", TextBoxCarno.Text);

    cmd.ExecuteNonQuery();

    con.Close();

    if (IsPostBack)
    {
        Response.Redirect("UpdateSuccess.aspx");
    } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-30T10:20:26.627

我认为在页面加载中，您将再次加载所有数据，并且 Button1_Click 在页面加载后运行并且您丢失了所有数据，您可以在 page_load 方法中尝试您的代码

```
private void Page_Load()
{
    if (IsPostBack)
    {
        SqlConnection con = new SqlConnection("Data Source=USER-PC;Initial Catalog=webservice_database;Integrated Security=True");

    SqlCommand cmd = new SqlCommand("UPDATE registration SET username = @username, password = @password, retypepassword = @retypepassword, gender = @gender, birth = @birth, address = @address, city = @city, country = @country, postcode = @postcode, email = @email, carno = @carno " + "WHERE username = @username", con);

    con.Open();
.
.
.

    }
} 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-12-31T05:46:29.850

我从未见过这种类型的语法。通常，如果一个人正在使用参数，那么一个人正在使用`stored proc`（最佳实践）。如果使用`inline SQL`，则将语句构建`SQL`为单个文本行并执行它。我建议为其中之一重新编码。

如果你想尝试你已经开始的`SQL`，你可能需要先声明所有的变量。例如

```
SqlCommand cmd = new SqlCommand("declare @username varchar(100), @password varchar(100), 
@retypepassword varchar(100) @gender varchar(10), @birth date, @address varchar(100), 
@city varchar(100) @country varchar(100), @postcode varchar(10), @email varchar(100), 
@carno varchar(100) UPDATE registration SET username = @username, password = @password, 
retypepassword = @retypepassword, gender = @gender, birth = @birth, address = @address, 
city = @city, country = @country, postcode = @postcode, email = @email, carno = @carno", 
con); 
```

# android - Android中基于CelID的位置？

> ID：14089775
> 
> 赞同：2
> 
> 时间：2012-12-30T09:49:56.497
> 
> 标签：android, iphone, gps, triangulation

关于 Celids 以及我们如何使用它们来粗略估计用户位置的 SO 上已经说了很多。最有名的，[这里](https://stackoverflow.com/questions/82184/public-cell-id-databases)。

在 Android 中，应用程序开发人员可以通过简单地查询 SDK 来获得纬度/经度吗？还是他们仍然需要将 Cell-ID 与 Web 服务或公共数据库进行匹配？

根据[此链接](http://developer.android.com/guide/topics/location/strategies.html#BestPerformance)，您可以进行以下调用以获取“位置信息”。这个信息是纬度/经度吗？

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

如果确实如此，那么每天的查询数量是否有限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T10:40:38.547

正如您所提到的，以下代码将为您提供网络估计位置：

`locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);`

它不仅仅是 cell-id（移动网络位置），因为它也可以为您提供 wifi/互联网连接位置。

每天的查询次数没有限制。

上面的代码让你注册 locationListener。在位置侦听器中，您必须实现一个方法`onLocationChanged(Location location)`。所有新位置都将发送到此方法，您可以使用 Location 对象获取纬度/经度。

您也可以注册 GPS 位置监听器。它的工作方式完全相同。

我对iPhone一无所知。

# symfony - 表单类型中的“未知实体命名空间别名”

> ID：14089780
> 
> 赞同：0
> 
> 时间：2012-12-30T09:50:46.833
> 
> 标签：symfony, symfony-2.1

在 Symfony2 表单类型中使用自定义实体字段时，我收到错误**Unknown Entity namespace alias 'DummyUserBundle' 。**我真的不明白是什么原因。仅当我尝试自定义该字段时才会出现该错误。

这失败了：

```
<?php
namespace Dummy\Bundle\TasksBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Doctrine\ORM\EntityRepository;

class TaskType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('assigned', 'entity', array(
            'class' => 'DummyUserBundle:User',
            'label' => 'My own label',
            //custom query builder coming here once I get this working
        ));
    }
} 
```

然而，这有效：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('assigned');
} 
```

在我的 config.yml 我有`auto_mapping: true`.

有什么建议么？

# sqlite - Windows 8 应用程序 - 与 Skydrive 的 Sqlite 同步

> ID：14089781
> 
> 赞同：2
> 
> 时间：2012-12-30T09:50:47.083
> 
> 标签：sqlite, windows-8, synchronization, onedrive

目前我正在编写一个使用 Sqlite 作为数据库的 Windows 8 应用程序。我想让用户能够在任何设备上的应用程序的每个实例中查看他的数据。通常这个问题可以通过使用像 Windows Azure 这样的在线数据库轻松解决。但就我而言，这不是一个选择。

使用微软的免费服务“Skydrive”作为平台在多个设备之间同步数据库文件是不是一个好主意？有人知道任何处理这个问题的开源项目或博客可以节省我一些时间来编写必要的代码吗？

如果这是一个坏主意，我可以使用哪些其他选项。我想保留 Sqlite 作为我的应用程序的数据库。

我很高兴收到任何可能对我有帮助的反馈或资源链接。

此致

菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T10:48:47.307

imo 这不是一个好主意，因为访问 db 文件很容易。Ofc 你可以说访问数据库文件很容易，因为你只需要知道应用程序包的应用程序数据路径，但它仍然比打开 skydrive 困难得多。想想如果有人将skydrive上的这个目录公开会发生什么。

我会结合本地数据库和在线数据库。在线数据库作为同步数据的服务，本地数据库用于正常工作。

# wcf - WCF 使用 Async/Await - 客户端中阻塞的通道

> ID：14089783
> 
> 赞同：0
> 
> 时间：2012-12-30T09:51:34.447
> 
> 标签：wcf, asynchronous, task, block

我正在使用 .Net 4.5，我的服务是使用异步编写的并返回 Task<>。
当我从客户端调用服务时，我使用等待。
当服务在等待之后返回时，如果客户端代码调用另一个非异步操作，则似乎通道被阻塞。

示例代码：

```
value = await Service.InitAsync();
Service.SyncOperation(); // Further callbacks/return values from Server are blocked and this statement never returns 
```

（在我看来，异步/等待的全部意义在于允许我在一个方法中编写完整的流程，并让框架处理线程和回调）

我可以通过使用新任务和 Task.Yield 包装对服务的调用来解决此问题：

```
async Task<T> CallAsync<T>(Func<Task<T>> func)
{
    Task<T> t = await func;
    await Task.Yield();
    return t;
} 
```

在客户端：

```
value = CallAsync(Service.InitAsync);
Service.SyncOperation(); //Now the server is not blocked since Yield changed back to the client context. 
```

我的问题是，有没有其他方法可以在不将服务调用包装在客户端中的情况下做到这一点？也许服务中的某些属性或属性？

谢谢

# maven - 如何在 Sonar Server 中设置多个源位置？

> ID：14089784
> 
> 赞同：10
> 
> 时间：2012-12-30T09:51:45.133
> 
> 标签：maven, jenkins, hudson, sonarqube

我正在使用 Maven 3，在我的 java 项目中，pom 文件包含一个源位置，如下所示。

```
<build>
        <sourceDirectory>src/main/java</sourceDirectory>
        <testSourceDirectory>src/test/java</testSourceDirectory>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>${JDK}</source>
                    <target>${JDK}</target>
                    <excludes>
                        <!--<exclude>**/**/api/notification/**/INotificationProfileManager.java</exclude> -->
                    </excludes>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-ejb-plugin</artifactId>
                <configuration>
                    <version>1.3</version>
                    <archive>
                        <manifest>
                            <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
                            <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                        </manifest>
                        <manifestEntries>
                            <Class-Path>./MubarsherTradeClasspath-1.0.jar</Class-Path>
                            <Specification-Vendor>Mubasher</Specification-Vendor>
                            <Implementation-Vendor>Mubasher</Implementation-Vendor>
                            <Sealed>false</Sealed>
                        </manifestEntries>
                    </archive>
                </configuration>
            </plugin> 
```

编译后，生成的文件位于`.../generate/src/main/java/...`路径中。当**Sonar**分析完成时，它会检查这些生成的类，这些类本身具有`../src/main/java/...`路径，因此分析失败。

所以我需要知道如何定义多个源路径以从声纳分析？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-18T13:28:02.167

你可以使用 sonar-runner 来做到这一点。这更有用。

您可以声明两个模块。一个按源目录。然后你必须通过声明一个属性文件来配置执行。

该文件应如下所示

```
sonar.projectKey=myproject
sonar.projectName=myprojectname
sonar.projectVersion=version
sonar.sourceEncoding=UTF-8

sonar.modules=normalsource-module, generated-module

normalsource-module.sonar.projectName=Normal Sources Module
normalsource-module.sonar.language=java
normalsource-module.sonar.sources=src/main/java
normalsource-module.sonar.binaries=target/classes
normalsource-module.sonar.projectBaseDir=.

generated-module.sonar.projectName=Generated Sources Module (Java)
generated-module.sonar.language=java
generated-module.sonar.sources=src/main/java
generated-module.sonar.binaries=target/classes
generated-module.sonar.projectBaseDir=. 
```

希望这可以帮助，

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-27T13:24:25.500

您可以使用属性 sonar.sources 指定源，并使用逗号分隔值添加不同的路径，如下所示：

```
sonar.sources  = aap1/src/main/java,aap2,src/main/java 
```

# regex - 解析源代码时如何在 sed 中打印部分正则表达式匹配？

> ID：14089787
> 
> 赞同：2
> 
> 时间：2012-12-30T09:52:11.990
> 
> 标签：regex, parsing, sed, match

我想像这样在正则表达式匹配之间打印部分：

```
echo "this is foo and another foo quux" | sed 's/this\(.*\)another.*/\1/' 
```

哪个打印

```
 is foo and 
```

什么是完全可以的，因为我想在这个和另一个打印之间得到一部分。

但是，如果我想解析我的源代码并使用：

```
cat source_code | sed 's/.*AdulterateFood\(.*\)DangerousFood.*/\1/' 
```

而且我确实知道 AdulterateFood 和 DangerousFood 在源代码中只有一次，它仍然会打印所有内容，整个文件:( 我想知道为什么.. AdulterateFood 和 DangerousFood 位于不同的行。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T11:25:02.813

sed 默认打印每个输入行。如果您不想要这种行为，则需要添加 -n 选项。如果您希望它打印与您的 RE 匹配的行，您必须在替换命令的末尾添加一个“p”以告诉 sed 打印该行。所以这：

```
sed -n 's/.*AdulterateFood\(.*\)DangerousFood.*/\1/p' source_code 
```

似乎是您要的，但是由于您没有提供任何示例输入和预期输出，因此这只是一个猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:21:13.650

要打印 AdulterateFood 和 Dangerous food 之间的所有行：

```
sed -n '/AdulterateFood/,/DangerousFood/p' file 
```

# android - 获取客户从标准拨号盘拨打的号码

> ID：14089794
> 
> 赞同：1
> 
> 时间：2012-12-30T09:54:25.900
> 
> 标签：android

我尝试使用该代码从标准拨号盘接听电话：

```
 <action android:name="android.intent.action.CALL" />
        <data android:scheme="tel" />
        <category android:name="android.intent.category.DEFAULT" />
        <action android:name="android.intent.action.CALL_PRIVILEGED" />
   </intent-filter>

</activity> 
```

一切都很好，当用户从标准电话拨号盘拨号时，我的应用程序打开了。但我没有找到解决方案，我怎样才能得到一个电话号码，哪个用户被拨打了。PhonePadActivity 活动 onCreate 块中的代码：

```
Intent intent = getIntent();

String number = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
Toast.makeText(this, "Call was made to-->>" + number, 5000).show(); 
```

最后给了我一个空值:(

尝试使用广播接收器：

在清单中：

> ```
>  <receiver
>         android:exported="true"
>         android:name="com.myapps.android.DialBroadcastReceiver" >
>         <intent-filter >
>             <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
>         </intent-filter>
>     </receiver>
> 
> <uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" /> 
> ```

这是 DialBroadcastReceiver 类：

```
package com.myapps.android;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class DialBroadcastReceiver extends BroadcastReceiver {
    private static final String THIS_FILE = "PhonePadActivity";

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Log.e(THIS_FILE,"In onReceive()");

        if (intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL)) {
             String number = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

             Log.e(THIS_FILE,"Number is: "+number);

        }
    }

} 
```

但是当用户按下拨号时，会触发日志点头

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T11:12:35.547

这对我有用：

在清单中：

```
<intent-filter>
    <action android:name="android.intent.action.CALL"/>
    <category android:name="android.intent.category.DEFAULT"/>
    <action android:name="android.intent.action.CALL_PRIVILEGED"/>
    <data android:scheme="tel"/>
</intent-filter> 
```

在活动中：

```
String inputURI = this.getIntent().getDataString();
if (inputURI != null) {
    Uri uri = Uri.parse(Uri.decode(inputURI));
    if (uri.getScheme().equals("tel")) {
        String calledNumber = uri.toString();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T12:10:43.553

您收到的号码代码不正确。代替：

```
Intent intent = getIntent();

String number = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
Toast.makeText(this, "Call was made to-->>" + number, 5000).show(); 
```

和：

```
Uri data = getIntent().getData(); 
if (data != null && ("tel".equals(data.getScheme()))) { 
    String number = PhoneNumberUtils.getNumberFromIntent(getIntent(), this); 
    if (number != null) { 
      Toast.makeText(this, "Call was made to-->>" + number, 5000).show();
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T11:11:01.120

*   添加`<intent-filter android:priority="9999">`到清单中的意图过滤器声明，以确保您排在第一位
*   从清单中接收者声明的属性中删除`com.myapps.android`-part `android:name`（即它应该是`android:name=".DialBroadcastReceiver"`：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-23T13:03:58.293

在文件中注册一个`BroadcastReceiver`这样的：`Manifest`

```
<!-- DIAL Receiver -->
<receiver
    android:exported="true"
    android:name="receivers.DialBroadcastReceiver" >
    <intent-filter >
        <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
    </intent-filter>
</receiver> 
```

您需要以下权限`NEW_OUTGOING_CALL`：

最终，您可以像这样接收广播并检索拨打的号码：

```
public class DialBroadcastReceiver extends BroadcastReceiver {

  @Override
  public void onReceive(Context context, Intent intent) {

    Log.v("DileBroadCastReceiver","In onReceive()");

    if (intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL)) {
      String number = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);
      Log.v("DialBroadcast Receiver","Number is: "+number);
    }
  }
} 
```

# c# - 如何在全文搜索中找到搜索关键字的位置？

> ID：14089796
> 
> 赞同：1
> 
> 时间：2012-12-30T09:54:39.533
> 
> 标签：c#, full-text-search, sql-server-express

我在我的 C# 项目中使用带有全文搜索的 Sql Express Advanced。我正在使用这个 Sql 语句来查找文档。

```
select id,Name,TypeID,StatusID from document where Contains([Content],'FormsOf (INFLECTIONAL, \"" + TextBoxSearch.Text + "\")') 
```

它工作正常。我想要的是在文本中找到搜索关键字的位置。是否有任何内置功能或任何第 3 方代码来执行此操作。

我可以用词干类来做，但它太复杂了，当有更多两个词时找不到。

# dashboard - Dundas仪表板中的错误不起作用

> ID：14089797
> 
> 赞同：2
> 
> 时间：2012-12-30T09:54:56.273
> 
> 标签：dashboard, dundas

我刚刚安装了 Dundas 仪表板 4.0.2 并且安装成功。但是，当我尝试打开程序时，网页显示错误：

> “/”应用程序中的服务器错误。编译错误描述：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：CS0009：元数据文件 'c:\Windows\Microsoft.NET\assembly\GAC_MSIL\System.Web.Services\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Web.Services.dll' 无法打开 -- '试图加载格式不正确的程序。'
> 
> 源错误：
> 
> {没有相关的源代码行]
> 
> 源文件：行：0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:10:27.330

看起来与以下链接中的错误消息相同： [http ://www.telerik.com/community/forums/silverlight/vs-extensions/silverlight-demo-error.aspx](http://www.telerik.com/community/forums/silverlight/vs-extensions/silverlight-demo-error.aspx)

基于此，似乎未安装某些先决条件。如果那里提出的解决方案可以解决您的问题，请发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T14:18:35.740

我建议在服务器上重新安装 .NET 4.0 框架。

完成此操作后，检查 IIS 并确保运行 Dundas Dashboard 的应用程序池设置为使用 ASP.NET 4.0（不是 2.0）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T04:56:03.607

嗨，不久前我遇到了同样的问题。我通过卸载最新版本的 Microsoft Silverlight 并安装它的第 4 版解决了这个问题。瞬间解决了我的问题。Silverligh 和 Windows 的新版本似乎确实存在问题。

# php - 没有重复值时重复键条目

> ID：14089800
> 
> 赞同：4
> 
> 时间：2012-12-30T09:55:58.433
> 
> 标签：php, mysql, sql, pdo

当没有值甚至相同时，我收到一个非常奇怪的重复输入错误...

```
INSERT INTO offer_status (id,user_id,sql_id,disabled) 
VALUES ('8854011812','8854','11812','0') 
```

回报：

> `#1062`- 键“PRIMARY”的重复条目“2147483647”

这对我来说根本没有意义！

注意：这段代码通常不会执行，我只是在调试。通常在我的PHP中我有：

```
$offer=$campid;
$id=$user_id.'0'.$offer;
$sql="INSERT INTO offer_status (id,user_id,sql_id,disabled) VALUES (?,?,?,?)
ON DUPLICATE KEY UPDATE disabled=VALUES(disabled)";

    $db->prepare($sql)->execute(array($id, $user_id, $offer, 0)); 
```

`id`是主键。这里发生了什么？

补充：结果`DESC offer_status`：

```
Field   Type    Null    Key Default Extra
id  int(12) NO  PRI NULL    
user_id int(12) NO      NULL    
sql_id  int(12) NO  MUL NULL    
favor   tinyint(4)  NO      0   
disabled    tinyint(4)  NO      0   
pref    int(2)  NO      0 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-30T09:59:31.767

`8854011812`超出`int`范围。它将被替换为最大`int`数字`2147483647`。

第二次插入大于`int`最大值的值时，会出现重复键错误。

如果您需要如此高的数字，您可以将数据类型更改为`bigint`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:01:11.633

原来如此。既然你提到这`ID`是主要的，我猜它的数据类型是 `int`，最大值`SIGNED INT`是`2147483647`。您应该已经将数据类型更改为`decimal(15,0)`或`VARCHAR(15)`这样的值会被覆盖。

您插入的值`8854011812`有点超出 an`int`可以容纳的范围。

# jquery - Jquery：更改第一个单词颜色跨度问题

> ID：14089801
> 
> 赞同：1
> 
> 时间：2012-12-30T09:55:59.380
> 
> 标签：jquery

我正在尝试使用 jquery 更改定义类或标记的第一种颜色。一切正常，但我有一个标题有自己的跨度和麻烦。我正在使用下面的代码为第一个单词添加 span 元素和内联样式。

```
$(document).ready(function()
{

    $('.header-logo, h1').each(function() {
        var h = $(this).html();
        var index = h.indexOf(' ');
        if(index == -1) {
            index = h.length;
        }
        $(this).html('<span style="color:black;">' + h.substring(0, index) + '</span>' + h.substring(index, h.length));
    });

}); 
```

这完美地添加了跨度标签并改变了颜色。但我有一个具有以下 html 结构的标题

```
<h1>
    <span id="fav" class="btn-fav"><a href="#"Add to fav</a></span>
    <span class="the-title">Title text goes here</span>
</h1> 
```

在这里，我只想为“标题文本在此处”第一个单词（标题）添加颜色，但通过将另一个跨度标记添加到跨度标记中来破坏 javascript 结构，如下所示

```
<span style="color:black;">
<span< span=""> class="btn-fav id="fav">..... 
```

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T10:16:09.880

您可以使用`html`方法，`html`接受一个函数，您可以找到第一个单词并按`span`元素包装它。

```
$('h1 .the-title').html(function(i, html){
   return html.replace(/(\w+\s)/, '<span class="black">$1</span>')
})​; 
```

[http://jsfiddle.net/AuKWT/](http://jsfiddle.net/AuKWT/)

请注意，您应该修复您的标记：

```
<span id="fav" class="btn-fav"><a href="#"Add to fav</a></span>
                                   ------^ 
```

* * *

```
$('.header-logo, h1').each(function() {
    var $this = $(this), $title = $this.find('.the-title');
    if ($title.length) {
        $title.html(function(i,h) {
            return h.replace(/(\w+\s)/, '<span class="black">$1</span>')
        })
    } else {
        $this.html(function(i,h) {
            return h.replace(/(\w+\s)/, '<span class="black">$1</span>')
        })
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T10:14:22.717

我猜您正在尝试更改任何指定类元素的首次出现的颜色。为此，您无需更改整个 HTML

```
 $('.header-logo h1 ').find('.the-title').html(function(i, h){
    return h.replace(/\w+\s/, function(firstWord){
      return '<span style="color:Green;font-weight:bold">' + firstWord + '</span>';
    }); 
 }); 
```

# python - 加速对字符串列表进行操作的函数

> ID：14089802
> 
> 赞同：2
> 
> 时间：2012-12-30T09:56:21.407
> 
> 标签：python, python-3.x

我想从我的代码中加速该函数，该代码被非常频繁地调用。此函数接收字符串的输入列表（通常长度为 4）并生成字符串列表，其中对应的条目替换为大写字母，顺序对应于输入字符串的字母数字顺序。然后这个列表组合成一个字符串。示例：输入列表`['wwTv', 'NzkT', 'wwTv', 'JhXc']`，输出字符串`'C,B,C,A'`。在实际示例中，每个列表中有许多重复项。

你能提出更有效的解决这个特定问题的方法吗？还是我的直截了当的算法足够好，无法显着改进？

下面是我的代码示例（Python 3.2）。这里输入数据的样本是随机创建的并传递给函数`f`。

```
import timeit
import string, random

dumb_label_set = ['A', 'B', 'C', 'D', 'E']

def a(labels):
    uniq_labels = sorted(set(labels))
    dumb_labels = [dumb_label_set[uniq_labels.index(a)] for a in labels]
    s_name = ','.join(dumb_labels)
    return(s_name)

def b(labels):
    uniq_labels = {l: i for i, l in enumerate(sorted(set(labels)))}
    dumb_labels = [dumb_label_set[uniq_labels[a]] for a in labels]
    s_name = ','.join(dumb_labels)
    return(s_name)

labels = []
for i1 in range(100000):
    labels.append([''.join(random.choice(string.ascii_letters) for ii in range(random.randint(1,4))) for i2 in range(4)])

start = timeit.default_timer()
res_a = [a(l) for l in labels]
print(timeit.default_timer() - start)

start = timeit.default_timer()
res_b = [b(l) for l in labels]
print(timeit.default_timer() - start)

print(res_a == res_b) 
```

结果：

```
0.41835449560994675
0.4420497451417873
True 
```

我的函数`a`稍微快一点，然后`b`由 Martijn Pieters 提出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T10:03:40.070

我会使用字典将标签映射到索引：

```
uniq_labels = {l: i for i, l in enumerate(sorted(set(labels)))}
dumb_labels = [dumb_label_set[uniq_labels[a]] for a in labels] 
```

使用较小的`labels`集合来促进在更易于管理的时间内进行多次传递会给出：

```
>>> import timeit
>>> import string, random
>>> dumb_label_set = ['A', 'B', 'C', 'D', 'E']
>>> def f(labels):
...     uniq_labels = sorted(set(labels))
...     dumb_labels = [dumb_label_set[uniq_labels.index(a)] for a in labels]
...     s_name = ','.join(dumb_labels)
...     return(s_name)
... 
>>> def f_dict(labels):
...     uniq_labels = {l: i for i, l in enumerate(sorted(set(labels)))}
...     dumb_labels = [dumb_label_set[uniq_labels[a]] for a in labels]
...     s_name = ','.join(dumb_labels)
...     return s_name
... 
>>> labels = []
>>> for i1 in range(100):
...     labels.append([''.join(random.choice(string.ascii_letters) for ii in range(random.randint(1,4))) for i2 in range(4)])
... 
>>> timeit.timeit('[f(l) for l in labels]', 'from __main__ import f, labels', number=10000)
6.586822032928467
>>> timeit.timeit('[f(l) for l in labels]', 'from __main__ import f_dict as f, labels', number=10000)
7.633307933807373 
```

但正如您所看到的，对于您的小输入集，您的方法更快。似乎设置映射比最多 4 次`.index()`查找需要更多时间。

如果您的标签序列包含（更多）元素，我的方法将获胜：

```
>>> dumb_label_set = string.ascii_uppercase
>>> labels = []
>>> for i1 in range(100):
...     labels.append([''.join(random.choice(string.ascii_letters) for ii in range(random.randint(1,4))) for i2 in range(26)])
... 
>>> timeit.timeit('[f(l) for l in labels]', 'from __main__ import f, labels', number=1000)
3.069930076599121
>>> timeit.timeit('[f(l) for l in labels]', 'from __main__ import f_dict as f, labels', number=1000)
2.404794931411743 
```

这里最重要的一课是使用[`timeit`模块](http://docs.python.org/3/library/timeit.html)来比较不同的方法。该`timeit`模块使用适合您平台的最佳计时器，并比较被测代码的*多次运行以消除外部调度影响（磁盘 I/O、其他进程等）。*

即使只计时一次， using`timeit.default_timer`也比 using 更可取`time.time`；它*可能*仍然是同一个计时器，但它将成为您平台上最准确的时钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T19:57:19.297

如果你真的想让它快速工作，也可以看看 cython。当然，一定要看看这里提出的其他算法，但是一旦你选择了最快的算法，cython 仍然可以给它一个很好的提升。

目前采用您的原始方法`a`，`b`我只是将它们移动到另一个模块并使用 cython 和 gcc (-O3) 编译。没有类型信息，我得到以下时间：

```
a:          0.4449379859997862
b:          0.48829928699888114
a (cython): 0.29741462399942975
b (cython): 0.2461447869991389 
```

我敢肯定，标记变量的类型可以给它另一个推动力。

# java - GWT 和 JSNI 将 Javascript 按钮添加到 HTML 面板中

> ID：14089810
> 
> 赞同：2
> 
> 时间：2012-12-30T09:57:03.067
> 
> 标签：java, javascript, gwt, jsni

我创建了一个简单的 Javascript 文件，其中包含一个简单的按钮。

```
function testfuncion() {
    document.write('<input type="button" name="hello" value="hello">');
} 
```

然后我在 gwt 中创建了一个 HTML 面板。

```
HTML panelHtmlTry = new HTML(); 
```

怎样才能把Javascript按钮放到HTML面板中？

在这个实验中，我无法在 gwt 中创建按钮，而只能将 Javascript 对象放入 gwt 面板中。

PS：我可以使用 html 面板或水平面板。我的目标是在每个 GWT 面板上放置一个 javascript 按钮并显示它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:20:43.733

是的，有一种更简单的方法可以做你想做的事。但如果你想做你想做的事。您可以通过 JSNI 调用自定义 JavaScript 方法。

此 JSNI 方法调用您的自定义 JS 脚本，该脚本包含在主机页面中。

```
private native void testfunction() /*-{
  $wnd.testfuncion();
}-*/; 
```

$wnd 是对浏览器`window`对象的引用，请参阅[GWT Docs on JSNI](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI?hl=de.)

然后你可以在你的 GWT 代码的任何地方调用这个 JSNI 方法：

```
testfunction(); 
```

每次，文件中的 JavaScript 函数都会通过 JSNI 调用。

* * *

您可以临时重新定义 document.write，以便它在`HTML`您希望的小部件中设置按钮。

```
private native void testfunction(HTML html) /*-{
  var originalWriteFunc = $wnd.document.write;
  $wnd.document.write = function(str) {
    html.@com.google.gwt.user.client.ui.HTML::setHTML(Ljava/lang/String;)(str);
  };

  $wnd.testfuncion();
  $wnd.document.write = originalWriteFunc;
}-*/; 
```

因此，您需要使用 HTML 小部件调用 testfunction，该小部件应放置在按钮所在的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:02:59.043

鉴于不允许对 JS 文件进行修改，并且假设是**document**`input` **中唯一`input`**的，您可以扩展`HTML`以包装`input`元素：

```
public class MyInputHtml extends HTML {

    public MyInputHtml() {

        // initialize DOM with external script content
        testfunction();

        // set the DOM element as the widget's element
        Element body = RootPanel.get().getElement();
        Element el = body.getElementsByTagName("input").getItem(0);
        setElement(el);
    }

    private native void testfunction() /*-{
        $wnd.testfuncion();
    }-*/;
} 
```

当然，最好将 分配`input`给`id`. 这样你就可以通过调用来查找它`RootPanel.get(id)`，从而避免了基于索引的搜索。这将使您的代码更加健壮，因为 DOM 中的更改不会影响此查找。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T10:04:56.730

让您的 testFunction 返回一个字符串。这可以插入到您的 panelHtmlTry 中。

# c# - 如何在 VS2012 中轻松创建对现有方法的单元测试

> ID：14089811
> 
> 赞同：1
> 
> 时间：2012-12-30T09:57:17.747
> 
> 标签：c#, visual-studio-2010, unit-testing, visual-studio-2012

如此处发布： [http ://connect.microsoft.com/VisualStudio/feedback/details/748493/missing-funtionality-of-creating-a-new-unit-test-from-editor](http://connect.microsoft.com/VisualStudio/feedback/details/748493/missing-funtionality-of-creating-a-new-unit-test-from-editor)

没有自动方式将 UT 添加到现有代码中

> doronneu 于 2012 年 6 月 14 日上午 4:53 发布 那么如何在不手动编码的情况下将新测试添加到现有测试项目中？Microsoft 于 2012 年 6 月 14 日凌晨 4:48 发布

.

> 测试-> 新测试菜单被有意删除。在 Visual Studio 2012 中，我们重新架构了单元测试框架以使其更具可扩展性。因此，我们已经与内置的 mstest 一起构建了 nUnit/xUnit 等适配器。
> 
> “新测试”菜单没有任何可以插入第 3 方适配器的扩展点。因此我们决定删除它。我们将所有新测试项目类型移动到文件 -> 新建 -> 项目对话框中。

是否有任何解决方法（resharper？）可以将 UT 添加到现有方法中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T19:04:25.247

我为 VS2012 中的单元测试找到的最佳解决方法是回到 VS2010！

它们通常是项目兼容的，因此在两个版本的 VS 之间来回切换通常效果很好（对于 C# 项目）。

VS2012 中的单元测试支持已被扼杀并且完全未完成 - 它是如何在这种可怕的状态下发布的，我无法理解。（考虑到我们为每个许可证支付了多少，这太离谱了！）在 2010 年，您可以轻松地获得它来创建单元测试所需的所有样板代码，但这一切都从 2012 年开始。在 2010 年，您可以运行测试并查看进度。过去了，一切都过去了——2012 年你不知道发生了什么（如果有的话）。在 2010 年，您将获得测试运行的结果，并对发生的情况有所了解。在 2012 年，它为您提供了一份不完整的谎言清单，然后您检查您的“通过”代码并在您的构建服务器因 2012 年刚刚扫过的许多失败测试而崩溃时开始发誓。总之：我的意见只是“不要在 2012 年进行单元测试，使用 2010 年”。

希望 VS 2013 不久之后，他们将有机会在其中实现单元测试支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T18:12:36.477

现在我重新阅读了您的问题并查看了“MS Issue Post”，看起来他们确实稍微移动了标准菜单布局。同样根据它没有解决方法，您需要就此联系 MS 支持站点。

但是，这里有足够的信息[来](http://tfs.visualstudio.com/en-us/learn/code/3rd-party-unit-tests-plugin-in-vs/)安装 NUnit 并开始编写测试。不过，这仍然不意味着自动。

# javascript - FadeIn 像 Facebook 一样的图像（如果没有完全加载，显示它模糊）

> ID：14089814
> 
> 赞同：1
> 
> 时间：2012-12-30T09:58:38.760
> 
> 标签：javascript, jquery, facebook, image

我正在编写一个加载大量图像的 jquery 插件。

我宁愿先模糊地显示图片，如果它已满载，则完整。

Facebook 就是一个很好的例子。

这种技术是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:14:00.613

这取决于保存图像的格式。

JPG 图像通常从上到下加载（并因此显示）。但是，如果它们以逐行（也称为隔行）格式存储，那么它们将以颗粒格式加载整个图像并逐渐提高质量。Facebook 以渐进式格式保存他们的图像。

有一些实用程序可用于从第一种格式转换为第二种格式。这是一个众所周知的链接（ImageMagick）：[ImageMagick](http://www.imagemagick.org/script/index.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T14:04:01.143

通常的做法是将缩略图版本的图像的宽度和高度设置为大图像的全尺寸，并在加载大图像时将缩略图替换为全图像。当您在缩略图上设置完整尺寸时，它会变得“模糊”，因为它被浏览器插入到更大的尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T10:23:36.003

你只有两张图片：一张质量差，一张质量好。当您要显示图像时，您首先将 image.src 设置为质量差的图像，然后立即设置为良好的图像路径（延迟为 0 的 setTimeout 也可以）。

它可以工作，因为浏览器在完全加载之前不会替换 img 标签中的图像。质量差的图像加载速度比好图像快得多，因此用户在加载时首先会看到模糊图像和完全加载的图像。

例子

```
img.src = 'path/to/fuzzyImage.jpg';
setTimeout(function() {
    img.src = 'path/to/fullImage.jpg';
}, 0); 
```

# android - Android：垂直填充屏幕并在顶部和底部留出空间

> ID：14089819
> 
> 赞同：0
> 
> 时间：2012-12-30T10:00:28.690
> 
> 标签：android, android-layout

我正在创建一个游戏，我的 .9.png 启动图像应该垂直填充屏幕（方向是 potrait），但在屏幕的顶部和底部留下一个小的边框空间，但在边框方面却相反间距，它将间距留在启动图像的两侧。

这是我的splashscreen.xml

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<ImageView  android:id="@+id/splashScreenImage"
    android:src="@drawable/starfighter"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
</ImageView>
<TextView 
android:text="game by: alphy poxy - graphics by: alpho07"
android:id="@+id/creditsText"
android:layout_gravity="center_horizontal|bottom"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
</TextView>
</FrameLayout> 
```

我的清单文件的一部分

```
 <application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.space_fighter.MainActivity"
        android:label="@string/app_name" android:screenOrientation="portrait">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="SFMainMenu" android:screenOrientation="portrait">      </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:04:45.357

这完全取决于您指定的图像。

如果您`scaleType="centerInside"`为您指定，`ImageView`则图像将适合分配的空间，保持 xy 比率。因此，如果您指向具有所需图像比例的图像，您将获得所需的效果。

有关如何使用的示例，请参阅[此站点](http://etcodehome.blogspot.com/2011/05/android-imageview-scaletype-samples.html)`scaleType`。

# android - Android 多点触控调整列表视图字体大小

> ID：14089823
> 
> 赞同：0
> 
> 时间：2012-12-30T10:01:24.630
> 
> 标签：android, scale, pinchzoom

我在下面有一个 ScaleGestureDetector，我可以在调用 adpater notifyDataSetChanged 后检测到 onScale 事件并实时调整我的视图大小。但是，它很慢，因为我的观点很复杂。有没有办法捕获视图的临时图像，然后调整图像大小以向用户显示效果，最后在 onScaleEnd 触发时更改真正的最终视图数据？

多谢

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/view/ScaleGestureDetector.java#ScaleGestureDetector.OnScaleGestureListener](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/view/ScaleGestureDetector.java#ScaleGestureDetector.OnScaleGestureListener)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T15:58:52.407

我通过以下来实现这一点

1.  保存位图

    this.setDrawingCacheEnabled(true);

    ivSnapShotBitmap = Bitmap.createBitmap(this.getDrawingCache());

    this.setDrawingCacheEnabled(false);

2.  onDraw(画布画布)

    canvas.drawBitmap(ivSnapShotBitmap, 0, 0, null);

    canvas.scale(ivScaleFactor, ivScaleFactor);

    超级.onDraw（画布）；

这可以支持类型 10 及以下的 API 级别进行多点触控缩放，因为视图本身不支持 scale(x,y)

其中一个问题是当视图被缩小时。右侧和底部的空白区域将显示原始背景，我仍在寻找修复它的方法。

# c# - MVC 4 下拉列表格式化移动应用程序

> ID：14089824
> 
> 赞同：0
> 
> 时间：2012-12-30T10:01:36.953
> 
> 标签：c#, css, html, asp.net-mvc-4, mobile-application

MVC 4 的新手。

我刚刚开始一个测试项目。我已成功将数据绑定到 html5 下拉列表。

我的问题是为什么我的 dd 呈现为丑陋的灰色/白色框，而不是像其他控件那样呈现为蓝色上的性感白色。

在我附上的屏幕截图中，蓝色似乎是丑陋的。

任何人都知道如何通过一个例子来操纵这个？

我查看了 CSS 并有一个小提琴，但似乎无法确定与 html5 控件的连接。

![在此处输入图像描述](../Images/71109a25e2e68a43f466c5de7fb0b660.png)

```
public ActionResult Index()
    {
        ViewBag.Message = "My Blah";
        List<SelectListItem> Languages = new List<SelectListItem>();
        Languages.Add(new SelectListItem
        {
            Text = "English",
            Value = "1",
            Selected = true
        });
        Languages.Add(new SelectListItem
        {
            Text = "русский",
            Value = "2",
        });
        ViewData.Add("Languages", Languages);
        return View();
    }

@using Resources;
@{
    ViewBag.Title = "Home Page";
}
<h2>@ViewBag.Message</h2>

@Html.DropDownList("Languages")

<ul data-role="listview" data-inset="true">
    <li data-role="list-divider">Navigation</li>
    <li>@Html.ActionLink(@HomeResource.About, "About", "Home")</li>
    <li>@Html.ActionLink(@HomeResource.Contact, "Contact", "Home")</li>
</ul> 
```

CSS 保持不变

编辑代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T10:11:14.670

你一定是把 CSS 搞砸了。没有你看到你的代码很难说。

但是这里有一些步骤，您可以尝试设置并开始：

1.  使用 Mobile 模板创建一个新的 ASP.NET MVC 4 应用程序
2.  添加视图模型：

    ```
    public class MyViewModel
    {
        public string Value { get; set; }
        public IEnumerable<SelectListItem> Items
        {
            get
            {
                return new[]
                {
                    new SelectListItem { Value = "1", Text = "item 1" },
                    new SelectListItem { Value = "2", Text = "item 2" },
                    new SelectListItem { Value = "3", Text = "item 3" },
                };
            }
        }
    } 
    ```

3.  更新 HomeController 以将视图模型传递给视图：

    ```
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View(new MyViewModel());
        }
    } 
    ```

4.  在相应的视图中渲染下拉列表 ( `~/Views/Home/Index.cshtml`)：

    ```
    @model MyViewModel

    @Html.DropDownListFor(x => x.Value, Model.Items)

    <ul data-role="listview" data-inset="true">
        <li data-role="list-divider">Navigation</li>
        <li>@Html.ActionLink("About", "About", "Home")</li>
        <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
    </ul> 
    ```

5.  运行应用程序并获得所需的输出：

![在此处输入图像描述](../Images/32bf0f439cc4085b2cb17c1ff912efca.png)

# android - 如何使用 soundPool 在单击按钮时播放短声？

> ID：14089826
> 
> 赞同：1
> 
> 时间：2012-12-30T10:01:50.780
> 
> 标签：android, button, soundpool

我有 5 个按钮。每次单击按钮时，我都想播放短声。每个按钮都会从我的原始文件夹中播放不同的声音。目前，我可以从第一个按钮播放声音，但是如何在不创建大量代码的情况下从另一个按钮分配声音？请。帮助。

到目前为止，这是我的代码：

```
public class Alphabet extends Activity {
private Button a, b, c, d, e;
    private SoundPool spool;
    private int soundID;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.alphabet);

    Button a = (Button) findViewById(R.id.a);
    Button b = (Button) findViewById(R.id.b);
    Button c = (Button) findViewById(R.id.c);
    Button d = (Button) findViewById(R.id.d);
    Button e = (Button) findViewById(R.id.e);

    a.setOnClickListener(new OnClickListener() 
    { 
          public void onClick(View v) { 
          Sound(); 
          } 
     });

    b.setOnClickListener(new OnClickListener() 
    { 
          public void onClick(View v) { 
          Sound(); 
          } 
     });

    c.setOnClickListener(new OnClickListener() 
    { 
          public void onClick(View v) { 
          Sound(); 
          } 
     });

    d.setOnClickListener(new OnClickListener() 
    { 
          public void onClick(View v) { 
          Sound(); 
          } 
     });

    e.setOnClickListener(new OnClickListener() 
    { 
          public void onClick(View v) { 
          Sound(); 
          } 
     });

    this.setVolumeControlStream(AudioManager.STREAM_MUSIC);
    spool = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);
    soundID = spool.load(this, R.raw.a, 1);

}
public void Sound(){
    AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
    float volume = (float) audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
    android.util.Log.v("SOUND","["+volume+"]["+spool.play(soundID, volume, volume, 1, 0, 1f)+"]");
}; 
```

}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-30T10:28:07.127

例如，您可以将参数设置为您的 Sound() 方法，例如

```
 Sound(int soundID){

      spool.load(this, soundID)
      AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
      float volume = (float) audioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
    } 
```

并将您的声音从您的 onClick 中的原始文件夹放入方法中：

```
 public void onClick(View v) { 
      Sound(R.raw.a,1); //put the sounds as parameter
      } 
```

# php - php中的静态图片

> ID：14089827
> 
> 赞同：0
> 
> 时间：2012-12-30T10:02:10.493
> 
> 标签：php, javascript, jquery, ajax, timer

我做了这个片段：

*   文件验证码.php

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script>
setInterval(function(){chrono('t');},1000);
</script>
<?php
include('function.php');
session_start();
global $list;

$list= captcha_list($_SESSION['id']);
if (isset($_POST['know'])){
?>
<script>
inte = 0;
var string ='<?php
$str='';
 $x=sizeof($list);

      for($j=0;$j < $x;$j++)
    { 

     for($i=0;$i < 7;$i++)
    { 

          $str=$str.$list[$j][$i].';'; 
          }
     } 
echo $str.$list[$x-1];
?>';
var count='<?php 
$x1=sizeof($list);
echo $x1;
?>';
var table =string.split(';');
var longuer=table.length-1;
currentElement=15;
document.getElementById("im").src=table[currentElement];
</script>
<?php
}
?>

<script>

function chrono(id){

 inte= parseInt(document.getElementById(id).innerHTML,10);

var string ='<?php
$str='';
 $x=sizeof($list);

      for($j=0;$j < $x;$j++)
    { 

     for($i=0;$i < 7;$i++)
    { 

          $str=$str.$list[$j][$i].';'; 
          }
     } 
echo $str.$list[$x-1];
?>';
var count='<?php 
$x1=sizeof($list);
echo $x1;
?>'
var table =string.split(';');

var longuer=table.length-1;

if ( typeof this.currentElement == 'undefined' ) this.currentElement = 1;

switch(inte)
{
case 0:

document.getElementById(id).innerHTML='7';
if(currentElement==count*7-6){
currentElement=1;

}else{

currentElement+=7;

}

document.getElementById("im").src=table[currentElement];

  break;

case 1:
document.getElementById(id).innerHTML='0';
break;

 case 2:
document.getElementById(id).innerHTML='1';
break;

  case 3:
document.getElementById(id).innerHTML='2';
   break;

  case 4:
document.getElementById(id).innerHTML='3';
  break;

  case 5:
document.getElementById(id).innerHTML='4';
   break;

  case 6:
document.getElementById(id).innerHTML='5';
  break;

  case 7:
document.getElementById(id).innerHTML='6';

break;

default:
    break;
}

};
</script>
</head>

<body style="background-image:url(paper_03.png)" >

 <form name="form_2"  style="background-image:url(paper_02.png);position: absolute; top:30px; left: 200px; width: 500px; height: 500px;"  method="post" >
                    <CENTER>
                        <table style="position: relative; top:30px;" >
                    <tr><td colspan=4><label>Image will be refresh in <label id="t" name="t"> 7 </label>  seconds
                     </label></td><td></td></tr>
                    <tr><td height=200px ><label>Image </label></td><td></td><td height=200px colspan=2><input type="image" id="im" src=<?php  echo $list[0]['captcha'];?> style=" height=150px" /> </td></tr>
                    <tr><td height=200px><label>Text </label></td><td colspan=3 height=200px><input type="text" name="cap" style="width: 400px" /> </td></tr>
                    <tr><td></td><td><input type="submit" name="answer" value="SUBMIT ANSWER" style="height:200%;background-image:url(paper_03.png)"/> </td><td><input type="submit" name="know" value="DON'T KNOW" style="height:200%; background-image:url(paper_03.png)"/> </td><td><input type="submit" name="pause" value="SUBMIT AND PAUSE" style="height:200%;background-image:url(paper_03.png)"/> </td>
                    </tr>

                </table>

    </CENTER>
</form>     
</body>
<footer>
<?php 
include('header_footer/footer.php');
?>
</footer>

</html> 
```

图像一个接一个地传递，但如果我单击“知道”按钮，页面刷新并显示第一张图像。我想如果我点击“知道”下一个图像将显示。

1.  错误是什么？
2.  我该如何解决？

# javascript - 在 javascript 中扩展 html 元素

> ID：14089831
> 
> 赞同：0
> 
> 时间：2012-12-30T10:03:23.057
> 
> 标签：javascript, html, prototype, extend

我正在开发一种工具，该工具通过从用户选择的较小部分组装它来创建 GUI。这些较小的部分是以编程方式创建的 html 元素。

考虑到效率，我想知道这些元素是否可以共享一个原型，就像普通的 javascript 对象一样。

这是我的扩展方法：

```
var extend = function(o){
    var F = function(){};
    F.prototype = o;
    var x = new F();
    x._proto_ = o;
    return x;
}; 
```

这与 Object.create() 相同，它只是像在 Mozilla 中一样保留对原型的引用。

所以这适用于普通对象：

```
var a = { x: 0, y: 1};
var b = extend(a);
b.y; // 1 
```

但是当我尝试将它用于实际的 html 元素时，它失败了：

```
var a = document.createElement("div");
a.whatever = //whatever..
var b = extend(a);
document.body.appendChild(b); //this throws an error. 
```

错误内容为：“试图在不存在的上下文中引用节点。”

这是怎么回事？用html元素不可能做到这一点吗？

任何想法表示赞赏..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:45:11.780

因为`b`，您在`extend`调用后得到的不是 DOM 元素，而是一个对象，它在原型中保存对 DOM 元素的引用。

PS你确定你需要`x.prototype = o;`line in`extend`函数吗？

# http - RESTeasy 后端 - Restlet 前端：响应实体 null

> ID：14089834
> 
> 赞同：0
> 
> 时间：2012-12-30T10:04:18.087
> 
> 标签：http, gwt, jetty, restlet, resteasy

我的服务器上有一些 REST 服务（Jetty、RESTeasy）和一个 GWT 客户端。我选择在前端使用 Restlet-GWT 模块。

我创建了一个 JSE 客户端（RESTeasy 客户端）并且我的服务被很好地调用（我在 Jetty 服务器的日志中看到了 SQL 跟踪）并且我得到了一个 xml 响应。

然后我尝试从 GWT 和 Restlet。该网络服务被称为（码头日志），但我有一个空响应。

网络服务（后端）：

```
@GET
@Path("/getArt/{id}")
@Produces("application/xml")
public Art getArt(@PathParam("id")int id){
    Art art= artDAO.findById(id);
    return art;
} 
```

前端 GWT：

```
public class Front_End implements EntryPoint {

/**
 * This is the entry point method.
 */
public void onModuleLoad() {    
final Client client = new Client(Protocol.HTTP);
client.get("http://localhost:8080/rest/service/getArt/1", new Callback() {
    @Override
    public void onEvent(Request request, Response response) {

        System.out.println("Reponse : " + response.getEntity().getText());
    }
});
} 
```

RESTeasy客户端工作：

```
public Object test(int id){
    try {

        ClientRequest request = new ClientRequest("http://localhost:8080/rest/service/getArt/"+id);

        request.accept("application/xml");
        ClientResponse<String> response = request.get(String.class);

        if (response.getStatus() == 200) 
        {
            Unmarshaller un = jc.createUnmarshaller();
            Object o = un.unmarshal(new StringReader(response.getEntity()));
            return o;
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
} 
```

RESTeasy 和 Restlet “兼容”吗？我应该在后端使用 Restlet 而不是 RESTeasy 吗？我错过了什么？

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:21:35.597

这是一个 SOP 问题。我的服务器在 8080 端口上运行，GWT 在 8888 端口上运行。

我使用了一个代理（把它放在客户端的 /war 中）：

代理.jsp

```
<%@page import="javax.naming.Context"%>
<%@page import="javax.naming.InitialContext"%><%@page session="false"%>
<%@page import="java.net.*,java.io.*" %>

<%
try {
String reqUrl = request.getQueryString();
URL url = new URL(reqUrl.substring(4));

HttpURLConnection con = (HttpURLConnection)url.openConnection();
con.setDoOutput(true);
con.setRequestMethod(request.getMethod());
int clength = request.getContentLength();
if (clength > 0) {
    con.setDoInput(true);
    byte[] idata = new byte[clength];
    request.getInputStream().read(idata,0,clength);
    con.getOutputStream().write(idata,0,clength);
}
response.setContentType(con.getContentType());
BufferedReader rd = new BufferedReader(new InputStreamReader(con.getInputStream()));
String line;
while ((line = rd.readLine()) != null) {
    out.println(line);
}
rd.close();
} catch (Exception e) {
    e.printStackTrace();
    response.setStatus(500);
}
%> 
```

然后在您拨打电话的班级中，您的网址变为：

```
String url ="proxy.jsp?url=" + URL.encode("http://localhost:8080/rest/service/getArt/1"); 
```

还有另一种解决方法，请查看[https://developers.google.com/web-toolkit/doc/1.6/tutorial/Xsite](https://developers.google.com/web-toolkit/doc/1.6/tutorial/Xsite)

# java - ClassNotFoundException：HibernateDaoSupport - Tomcat 7

> ID：14089839
> 
> 赞同：0
> 
> 时间：2012-12-30T10:05:14.563
> 
> 标签：java, spring, hibernate, tomcat, classnotfoundexception

我的 Web 应用程序有问题。在 .java 文件中，我看到了 HibernateDaoSupport，所有测试都成功了。当我在服务器上运行应用程序时出现此错误

```
Caused by: java.lang.ClassNotFoundException: org.springframework.orm.hibernate3.support.HibernateDaoSupport
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 55 more 
```

pom.xml 依赖项

```
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>2.5.6</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate</artifactId>
        <version>3.2.6.ga</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-annotations</artifactId>
        <version>3.3.1.GA</version>
    </dependency>

    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>jta</artifactId>
        <version>1.1</version>
    </dependency>

    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2</version>
    </dependency>

    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.9</version>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>

    <dependency>
        <groupId>asm</groupId>
        <artifactId>asm</artifactId>
        <version>3.3.1</version>
    </dependency>

    <dependency>
        <groupId>javax.inject</groupId>
        <artifactId>javax.inject</artifactId>
        <version>1</version>
    </dependency>

    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.1.13</version>
    </dependency>

    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.1.13</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>

    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
    </dependency>

    <dependency>
        <groupId>org.glassfish.web</groupId>
        <artifactId>el-impl</artifactId>
        <version>2.2</version>
    </dependency>

</dependencies> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>DVDProject</display-name>

    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>classpath:properties/log4j.properties</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:spring/context/applicationContext.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
    </listener>

    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>

    <welcome-file-list>
        <welcome-file>faces/default.xhtml</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

</web-app> 
```

Web 部署程序集：http: [//i46.tinypic.com/2z5t6af.png](http://i46.tinypic.com/2z5t6af.png)

怎么了？感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T17:41:04.643

在您的工作区尝试`ctrl`++`shift`并`T`查看您从哪里获得课程`org.springframework.orm.hibernate3.support.HibernateDaoSupport`，一旦您知道这一点，解决问题可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:10:57.387

确保您的 Maven 依赖项位于构建路径上。

![在此处输入图像描述](../Images/260dd696cbdf01d42f28e3d37af8b054.png)

并包含在导出中。

![在此处输入图像描述](../Images/ce11a9164d4f7c10dfef78ace5f611e0.png)

以及在部署程序集中配置

![在此处输入图像描述](../Images/e9f8ca06bfb9d5076b51d4608d1709fd.png)

可以通过右键单击项目并选择 Maven>Update Project 将这些项目添加到您的项目中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T10:12:12.237

`HibernateDAOSupport`是的一部分`spring-orm`。如果您正在使用它，它应该在您的直接依赖项中，并且应该与 webapp 一起部署。

编辑：

它也在似乎在类路径中的一体化弹簧罐中，所以我也很困惑。尝试只使用这个多合一的罐子，或者只使用 spring-xxx 罐子。在最新版本的 Spring 中，一体式 jar 不再存在，所以我将只使用小的 spring-xxx jar。

# c# - 抑制 GC 内存优化

> ID：14089848
> 
> 赞同：2
> 
> 时间：2012-12-30T10:07:52.033
> 
> 标签：c#, garbage-collection, defragmentation

我正在编写一个在多个线程中调用多个基于 C 的函数（p/Invoke）的程序。

有时，程序会因访问冲突错误而崩溃。我的第一个想法是 GC 优化了内存并将 C 函数正在处理的内存块移动到不同的位置。

我想做的是让 GC 工作，但禁用它移动（碎片整理）内存的部分。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T16:32:29.833

正如其他答案所说，首先要做的是确保您正确固定对象。假设你已经这样做了，还有什么问题？

```
class C
{
    public int handle;
    ...
    ~C() { InteropLibrary.DestroyHandle(handle); }
}

void M()
{
    C c = GetSomeObjectUsefulInUnmanagedCode();
    D d = InteropLibrary.UnmanagedMethodThatUsesHandle(c);
    // COMMENT
    d.DoSomethingWithStoredHandle();
} 
```

如果在`COMMENT`(*) 处发生垃圾收集怎么办？垃圾收集器可以自由地说“嘿，`c`这个方法中再也不会引用局部变量；我可以咄咄逼人，把它当作死了！”。如果终结器运行并且句柄被销毁，那么当最后一个方法运行时，它访问一个被销毁的句柄并崩溃。

为了解决这个罕见但可能出现的问题，您可以`GC.KeepAlive`告诉垃圾收集器在清理特定引用时不那么激进。如果你一直`c`存活到方法结束，那么你知道它的析构函数不可能运行。

* * *

(*) 当然 GC 运行在不同的线程上，并且可以随时运行。GC 可中断和不可中断的操作细节很复杂，您不应依赖这些实现细节来确保正确性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T10:28:10.340

`fixed`在大多数情况下，您可以使用关键字。

从 Eric Lippert 的新[博客](http://ericlippert.com/2012/12/11/taking-responsibility/)看来，至少还有另外两种可能性：

*   使用[GCHandle](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.gchandle.aspx)分配内存
*   [使用像AllocHGlobal](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.allochglobal.aspx)这样的外部非托管分配器

请注意，在这两个选项中，您需要确保正确释放内存。

附带说明一下，如果您的问题是移动了一小部分内存（导致访问冲突），那么解决方案几乎永远不会禁用*整个*移动内存部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T10:13:54.347

我不认为您可以全局执行此操作，但您可以使用`fixed`关键字来固定特定对象，以获得所需的效果。

# c# - 在 wp7 中更新 XML XNode 值

> ID：14089857
> 
> 赞同：1
> 
> 时间：2012-12-30T10:11:05.483
> 
> 标签：c#, linq-to-xml, isolatedstorage

你好朋友我需要一些关于在 wp7 中更新 xml 节点的帮助。我的xml如下：

```
<?xml version="1.0" encoding="utf-8"?>
<ConfigData>
  <CallerNo1>123</CallerNo1>
  <MobileNo1>123</MobileNo1>
  <MobileNo2>123</MobileNo2>
  <MobileNo3>123</MobileNo3>
  <MobileNo4>123</MobileNo4>
  <MobileNo5>123</MobileNo5>
  <EmailNo1>123</EmailNo1>
  <EmailNo2>123</EmailNo2>
  <EmailNo3>123</EmailNo3>
  <EmailNo4>123</EmailNo4>
  <EmailNo5>123</EmailNo5>
</ConfigData> 
```

我想将值更新为 1111 所以我编写了以下代码来实现它：

```
using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                {
                    IsolatedStorageFileStream isoFileStream = myIsolatedStorage.OpenFile("Configuration.xml", FileMode.Open, FileAccess.ReadWrite);
                    XDocument xml = XDocument.Load(isoFileStream, LoadOptions.None);
                    xml.Element("ConfigData").SetElementValue("CallerNo1", "11111");
                    xml.Save(isoFileStream);
                    isoFileStream.Flush();
                    isoFileStream.Close();
                } 
```

然后在我再次读取文件后，它显示如下 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ConfigData>
  <CallerNo1>123</CallerNo1>
  <MobileNo1>123</MobileNo1>
  <MobileNo2>123</MobileNo2>
  <MobileNo3>123</MobileNo3>
  <MobileNo4>123</MobileNo4>
  <MobileNo5>123</MobileNo5>
  <EmailNo1>123</EmailNo1>
  <EmailNo2>123</EmailNo2>
  <EmailNo3>123</EmailNo3>
  <EmailNo4>123</EmailNo4>
  <EmailNo5>123</EmailNo5>
</ConfigData><?xml version="1.0" encoding="utf-8"?>
<ConfigData>
  <CallerNo1>11111</CallerNo1>
  <MobileNo1>123</MobileNo1>
  <MobileNo2>123</MobileNo2>
  <MobileNo3>123</MobileNo3>
  <MobileNo4>123</MobileNo4>
  <MobileNo5>123</MobileNo5>
  <EmailNo1>123</EmailNo1>
  <EmailNo2>123</EmailNo2>
  <EmailNo3>123</EmailNo3>
  <EmailNo4>123</EmailNo4>
  <EmailNo5>123</EmailNo5>
</ConfigData> 
```

创建新的 xml 并将其附加到现有 xml 应该如何更改 xml 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:10:40.370

这是因为当您调用正在写入`Save(Stream)`的实例时，您需要重置流中的位置以覆盖已经存在的内容。`XmlDocument``isoFileStream`

最简单的方法是创建一个新`IsolatedStorageFileStream`的写作：

```
using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
{
    XDocument xml = null;
    //Read the file stream into an XDocument using a reading stream
    using (IsolatedStorageFileStream isoFileStream = myIsolatedStorage.OpenFile("Configuration.xml", FileMode.Open, FileAccess.Read))
    {
        xml = XDocument.Load(isoFileStream, LoadOptions.None);
        xml.Element("ConfigData").SetElementValue("CallerNo1", "11111");
    }

    //Write it back out using a write one.
    using (IsolatedStorageFileStream isoFileStream = myIsolatedStorage.OpenFile("Configuration.xml", FileMode.Truncate, FileAccess.Write))
    {
        xml.Save(isoFileStream, SaveOptions.None);
    }
 } 
```

# scala - 类 scala.tools.nsc.Interpreter 已弃用，找不到替代方案

> ID：14089860
> 
> 赞同：3
> 
> 时间：2012-12-30T10:11:37.647
> 
> 标签：scala

我正在使用`scala 2.10_RC2`

我看到`scala.tools.nsc.Interpreter`in`scala-compiler.jar`已被弃用。口译员工作正常，但我担心它可能会在不久的将来消失。

我在网上找不到任何关于替代方案的信息，任何有关它的信息将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T12:21:24.327

查看[每晚的文档，](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/compiler/index.html#scala.tools.nsc.Interpreter)您会发现使用[scala.tools.nsc.interpreter](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/compiler/index.html#scala.tools.nsc.interpreter.package)包中的类并使用类[ILoop](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/compiler/index.html#scala.tools.nsc.interpreter.ILoop)的建议。

# ios - 使用 instantiateViewControllerWithIdentifier 从情节提要创建不同的视图控制器实例

> ID：14089865
> 
> 赞同：2
> 
> 时间：2012-12-30T10:12:51.410
> 
> 标签：ios, storyboard, viewcontroller

我正在从情节提要实例化视图控制器。每次调用 instantiateViewControllerWithIdentifier 时，我都想创建一个新的视图控制器实例。它没有做我想要的，相反，它总是返回相同的视图控制器实例。我想我应该以编程方式创建视图控制器，而不是使用情节提要。在我深入研究之前，真的不可能从故事板上询问一个新的视图控制器实例吗？

编辑：我对这种行为是错误的，显然情节提要的行为与我期望的完全一样，即，instantiateViewControllerWithIdentifier 每次都会返回一个新实例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-30T10:25:03.197

这有点奇怪：从[官方文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIStoryboard_Class/Reference/Reference.html)中提到： **`This method creates a new instance of the specified view controller each time you call it`**. 您是否 100% 确定每次调用此方法时都会返回相同的实例。

否则，是的，您需要明确地实例化您的自定义视图控制器。

# android - NavUtils.shouldUpRecreateTask 在 JellyBean 上失败

> ID：14089867
> 
> 赞同：14
> 
> 时间：2012-12-30T10:13:11.270
> 
> 标签：android, android-intent, android-activity, android-notifications

I have an application that issues notifications that when selected start an activity. 根据 Android 文档，我可以使用 NavUtils.shouldUpRecreateTask 检查活动是直接启动（即从通知中启动）还是通过正常的活动堆栈启动。但是它给出了错误的答案。我正在 JellyBean 上对此进行测试，但使用了支持库。

基本上 shouldUpRecreateTask 总是返回 false，即使活动已经从通知中启动。

关于为什么 shouldUpRecreateTask 没有给出正确答案的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-08T10:29:43.417

这是不正确的！当您从通知开始时，您必须在构建通知时创建堆栈，如下所述：http: [//developer.android.com/guide/topics/ui/notifiers/notifications.html#NotificationResponse](http://developer.android.com/guide/topics/ui/notifiers/notifications.html#NotificationResponse)

因此，在创建通知时，您必须这样做：

```
Intent resultIntent = new Intent(this, ResultActivity.class);
// ResultActivity is the activity you'll land on, of course
TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
// Adds the back stack
stackBuilder.addParentStack(ResultActivity.class);
// Adds the Intent to the top of the stack
// make sure that in the manifest ResultActivity has parent specified!!!
stackBuilder.addNextIntent(resultIntent);
// Gets a PendingIntent containing the entire back stack
PendingIntent resultPendingIntent =
        stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT); 
```

然后当您单击 UP 按钮时，您需要常规代码，即：

```
if (NavUtils.shouldUpRecreateTask(this, intent)) {
    // This activity is NOT part of this app's task, so
    // create a new task when navigating up, with a
    // synthesized back stack.
    TaskStackBuilder.create(this)
    // Add all of this activity's parents to the back stack
            .addNextIntentWithParentStack(intent)
            // Navigate up to the closest parent
            .startActivities();
} else {
    NavUtils.navigateUpTo(this, intent);
} 
```

这对我来说非常有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T13:05:35.373

我仍然不知道为什么 shouldUpRecreateTask 失败 - 查看它的源代码并没有多大帮助。但解决方案非常简单——我只是在附加到通知的 Intent 中添加一个额外的标志值，然后在 onCreate() 中检查它。如果已设置，则已从通知中调用了 Activity，因此必须重新创建返回堆栈。

代码如下所示：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Bundle b = getIntent().getExtras();
    fromNotification = b.getInt("fromNotification") == 1;
    setContentView(R.layout.threadlist);
}

@Override
public boolean onHomeButtonPressed() {
    if(fromNotification) {
        // This activity is not part of the application's task, so create a new task
        // with a synthesized back stack.
        TaskStackBuilder tsb = TaskStackBuilder.from(this)
                .addNextIntent(new Intent(this, COPAme.class));
        tsb.startActivities();
    } 
        // Otherwise, This activity is part of the application's task, so simply
        // navigate up to the hierarchical parent activity.
    finish();
    return true;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-19T12:07:26.360

我和OP有同样的问题。NavUtils.shouldUpRecreateTask 似乎总是返回 false。（JellyBean 也是） 我用下面的实现了同样的功能。

```
case android.R.id.home:
Intent upIntent = new Intent(this,ParentActivity.class);
upIntent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
startActivity(upIntent);
finish();
return true; 
```

可以通过这种方式获取“父”意图，而不是硬编码。

```
Intent upIntent = NavUtils.getParentActivityIntent(this); 
```

# node.js - 为什么 Node.js 只接受 SAN 证书中的 IP 地址，而不接受 CN？

> ID：14089872
> 
> 赞同：5
> 
> 时间：2012-12-30T10:14:06.393
> 
> 标签：node.js, ssl, ssl-certificate

正如我在对[主机名/IP 与证书的替代名不匹配的](https://stackoverflow.com/questions/14088787/hostname-ip-doesnt-match-certificates-altname/)[回答](https://stackoverflow.com/a/14089295/1333873)中指出的那样，当请求的主机名作为证书的公用名 (CN) 给出时，Node.js 确实成功地验证了主机名上的 TLS 证书。

```
Request    : localhost
Common Name: localhost
=> Success 
```

现在，当我尝试对 IP 地址进行相同操作时，验证失败：

```
Request    : 192.168.178.31
Common Name: 192.168.178.31
=> Fail 
```

仅当我将 IP 地址指定为主题备用名称 (SAN) 时才有效：

```
Request                 : 192.168.178.31
Common Name             : 192.168.178.31
Subject Alternative Name: 192.168.178.31
=> Success 
```

如[创建证书时IP地址作为主机名（CN）的](https://stackoverflow.com/questions/11708717/ip-address-as-hostname-cn-when-creating-a-certificate-https-hostname-wrong)[答案](https://stackoverflow.com/a/11710762/1333873)中所述？[(HTTPS 主机名错误：应该是 <ipAddress>)](https://stackoverflow.com/questions/11708717/ip-address-as-hostname-cn-when-creating-a-certificate-https-hostname-wrong) ,

> 不建议在证书中使用 IP 地址 [...]。

作为替代方案，在[如何解决 SSL 证书服务器名称/我可以使用 keytool 添加替代名称的](https://stackoverflow.com/questions/8443081/how-are-ssl-certificate-server-names-resolved-can-i-add-alternative-names-using)[答案](https://stackoverflow.com/a/8444863/1333873)中建议使用它吗？将 IP 地址添加为 SAN（这又在 Node.js 中工作）。

现在我的问题是：*不推荐*并不意味着*错误*或*禁止*。除了*不建议*Node.js 不支持 CN 中的 IP 地址之外，是否有任何具体原因，或者为什么如果这样做会带来风险（安全性，无论如何，......）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:39:30.353

该实现仅符合[HTTPS 规范](https://www.rfc-editor.org/rfc/rfc2818#section-3.1)：

> 在某些情况下，URI 被指定为 IP 地址而不是主机名。在这种情况下，iPAddress subjectAltName 必须出现在证书中，并且必须与 URI 中的 IP 完全匹配。

当我在您引用的答案中说“不推荐”时，更多的是在使用 HTTPS 时使用 IP 地址。一些浏览器让你侥幸逃脱，但我也引用了那里的规范，它确实使用了“必须”这个词。毋庸置疑，RFC 比您在此处找到的任何答案都更具权威性。

# f# - 带有表达式的 F# 类型定义

> ID：14089875
> 
> 赞同：8
> 
> 时间：2012-12-30T10:14:20.807
> 
> 标签：f#

是否可以这样表达：

```
type id = int > 0 
```

我知道它不可能静态地做，因为这意味着 F# 有依赖类型。在 C# 中，我习惯于用代码契约来做这种事情并获得运行时强制。我在这里寻找类似的东西。

谢谢

编辑：感谢您提供各种利弊的答案。目前我只使用 F# 的一个小子集，它是 ocaml 核心的一个子集，可以很容易地进行编程证明。所以不上课。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-30T20:09:07.197

与其他人所说的相反，如果我正确理解您的问题，我建议**不要在这里使用类。**
由于值是*不可变*的，我们只需要应用一次约束。任何包装类都将是开销和负载 GC。相反，一个简单的函数将完成这项工作：

```
let inline constrained predicate errormessage value =
    if not (predicate value)
    then invalidArg "value" errormessage
    else value

let positive =
    constrained (fun x -> x > 0) "Value must be positive"

let int1 = positive 5      // OK
let int2 = positive -3     // ArgumentException 
```

您可以对其他类型执行相同操作：

```
let mustBeLong =
    constrained (fun (x:string) -> x.Length > 3) "String must be long"

let str1 = mustBeLong "foobar"  // OK
let str2 = mustBeLong "baz"     // ArgumentException 
```

在结构中使用相同的：

```
type Point2D =
   struct 
      val X: int
      val Y: int
      new(x: int, y: int) = { X = positive x; Y = positive y }
   end

let point1 = Point2D(5, 3)  // OK
let point2 = Point2D(5, -2) // ArgumentException 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T16:48:21.597

将其定义为联合类型：

```
type Id = Id of int 
```

并使用另一个函数隐藏构造函数：

```
let Id n =
  assert(n > 0)
  Id n 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T17:14:38.027

在 F# 中，您必须求助于类并检查构造函数中的参数。其他类型（例如可区分联合、记录和结构）具有隐式构造函数，您无法轻易更改这些构造函数。

```
type Id(i: int) =
    do if i <= 0 then 
         invalidArg "i" "the argument has to be a positive integer"
    member x.Value = i 
```

模式匹配不能很好地与类一起使用。您可以使用活动模式解决问题：

```
let (|Id|) (id: Id) = id.Value

let id = Id(1)

match id with
| Id 1 -> printfn "matched"
| _ -> printfn "unmatched" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T10:44:49.760

You could create a generic class like so:

```
type verify<'t>(t:'t,cond) =
    let mutable tval = t
    let _verify v = if not (cond v) then failwith "bad argument"
    do _verify tval
    member x.get() = tval
    member x.set v =
        _verify v 
        tval <- v 
```

then you can use it with

```
verify(1,fun t -> t>0) 
```

using `.set` will recheck the condition.

# javascript - 在选择多个的jQuery选择的插件中动态添加新选项

> ID：14089877
> 
> 赞同：1
> 
> 时间：2012-12-30T10:14:34.800
> 
> 标签：javascript, jquery, html, jquery-plugins, append

我正在使用选择大师[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

**例子**

* * *

```
<select data-placeholder="Click to Select Role..." style="width:200px;"  id="geoRange" name="geoRange" class="chzn-select" tabindex="8" multiple>
<option value="1">England</option>
</select> 
```

* * *

我在此选择中添加新选项

* * *

```
$('#geoRange').append( new Option('USA',2) ); 
```

* * *

它不工作

如何添加新选项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:01:44.920

更新选择列表后，您显然还需要通知 Chosen 您这样做了。

```
$("#geoRange").trigger("liszt:updated"); 
```

我自己没有使用过选择（使用 Select2 代替），但这就是文档所说的。见[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T10:25:56.717

```
 <script type="text/javascript">
function fnc()
{
var select1 = document.getElementById("geoRange");
select1.options[select1.options.length] = new Option('USA', 2);
}
</script>
</head>

<body>
<select data-placeholder="Click to Select Role..." style="width:200px;"  id="geoRange" name="geoRange" class="chzn-select" tabindex="8" multiple>
<option value="1">England</option>
</select>
<input type="button" onclick="fnc()" value="click me" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T11:02:31.887

```
$('#geoRange').append( new Option('USA',2) ); 
```

以下语句解决了我的问题

```
 $("#geoRange").trigger("liszt:updated"); 
```

# xamarin.ios - MonoTouch Binding - 从单独的标头绑定#DEF

> ID：14089879
> 
> 赞同：1
> 
> 时间：2012-12-30T10:15:11.363
> 
> 标签：xamarin.ios

我正在绑定一个 ObjC 库，一切正常，但我有一个问题。ObjC 库正在使用在单独的标头中定义的一些值。

例如，带有以下内容的标题：

```
#define SOME_PROPERTY_1 TRUE
#define SOME_PROPERTY_2 TRUE
#define SOME_PROPERTY_3 FALSE 
```

根据这些属性，库将对视图进行一些更改（因此这些更改在库中，而不是在我的 C# 代码中）。

我想从我的 C# 代码中访问这些属性，以便我可以更改它们。现在，如果我想更改它们并且我无法动态更改它们（目标是什么），我需要再次构建我的库。

这可能吗？

我已经对此进行了搜索，但我不明白这两个建议的解决方案：

1.  将它们放在我的 C# 代码中而不是绑定中 -> 我认为这不是一个解决方案，因为在这种情况下，库将不知道这些更改？（无连接）
2.  将它们绑定为（静态）属性

不幸的是，我不知道该怎么做。在这个标题中，这些不是类/接口，只有#DEF 语句，所以我不知道我应该在哪个“类”中定义这些属性。

然后将标头包含在其他一些 ObjC 类中。我试图看看我是否可以在那里定义它们，但它是一个接口并且属性不被接受。

所以基本上，我绑定了一个“SomeController”类，并且“SomeController.h”被定义为接口

```
@interface SomeController : UIViewController 
```

然后在“SomeController.m”中你有

```
#import "Constants.h" //The file with only #DEF statements
@implementation SomeController
{
...
} 
```

有任何想法吗？

问候， 马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T00:25:02.653

这是不可能的，因为您的 SOME_PROPERTY_# 实际上不是变量，它们是预处理指令。

这意味着 ObjectiveC 预处理器会将源代码中 SOME_PROPERTY_# 的所有实例替换为您定义的值，但最终可执行文件中没有 SOME_PROPERTY_# 变量/常量。

例如：

```
#define SOME_PROPERTY_1 TRUE
void foo ()
{
    Bool value = SOME_PROPERTY_1;
} 
```

将由预处理器转换为：

```
void foo ()
{
    Bool value = TRUE;
} 
```

如您所见，转换后的源代码中没有 SOME_PROPERTY_1 。

这意味着您不能动态更改 SOME_PROPERTY_# 的值。

# php - 在 redirect_uri 使用 fb 链接登录 Facebook 应用

> ID：14089880
> 
> 赞同：0
> 
> 时间：2012-12-30T10:15:32.303
> 
> 标签：php, facebook, facebook-graph-api

我从开发人员那里创建了一个页面选项卡应用程序，因此在我拥有的字段中：

画布网址：http: [//ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/](http://ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/)

安全画布网址：[https ://ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/](https://ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/)

页面标签网址：http: [//ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/](http://ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/)

安全页面标签网址：[https ://ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/](https://ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/)

所以问题是：我想创建一个类似这样的登录对话框：

```
$dialog_url = "https://www.facebook.com/dialog/oauth?client_id=".$app_id."&redirect_uri=".urlencode($my_url)."&state=".$_SESSION['state']."&scope=publish_stream"; 
```

在哪里`$my_url = "http://www.facebook.com/1mil.Fotografii/app_415786855156952";`

它给了我错误，因为该 url 不属于应用程序设置，但在某些应用程序源中，我看到这个带有 facebook 链接的 Url 工作。如果我设置

[https://ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/](https://ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/)

登录网址后，我的应用程序无法在 Iframe 模式下打开，它会打开[https://ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/](https://ingersidemon.ro/proiecte/pitzi-world.ro/.facebook/concurs/)而不是在 facebook 中，我错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:31:42.167

是的，您的应用不拥有[http://facebook.com](http://facebook.com)域，将 $my_url 更改为 $my_url = 'http://ingersidemon.ro/proiecte/' ...您可以在其中处理 facebook 响应，检查 facebook api 以查看facebook 发给你什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T17:04:31.350

> $my_url = "http://www.facebook.com/1mil.Fotografii/app_415786855156952";
> 
> 它给了我错误，因为 url 不属于应用程序设置

由于在我的浏览器中调用该 URL 只会将我带到页面本身（就像直接调用[https://www.facebook.com/1mil.Fotografii](https://www.facebook.com/1mil.Fotografii)一样），我怀疑你要么没有在页面上安装这个应用程序，要么您可能仍然在应用设置中打开了沙盒模式。

# php - 如何使用 dompdf 创建多个页面

> ID：14089883
> 
> 赞同：11
> 
> 时间：2012-12-30T10:16:14.973
> 
> 标签：php, mysql, arrays, dompdf

我在多维数组及其值方面遇到了一些麻烦。

我正在寻找的是，从我的查询中，我在数组中搜索教师姓名。之后我想使用 dompdf 创建一个 pdf。问题在于循环。我无法创建一个正确的循环，它可以按照我希望的方式工作。我的示例查询是

```
 $q11 = "select id from teachers order by teacher ";
    $r11 = mysql_query($q11) or die(mysql_error());
    while($rows11 = mysql_fetch_array($r11)){
        $teacher = $rows11['id'];
        $dompdf->"It will start working";
    } 
```

现在我知道，这段代码令人困惑，但我想要的是，它应该在一个 pdf 文件中为每位教师创建 dompdf。就像从查询中一样，它应该获取教师，并且应该为每个教师创建一个 dompdf 页面。目前它根据我的查询搜索的最后一个值只制作一页。

请帮忙。有点急

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-30T10:27:46.050

你的循环工作正常。您向 PDF 添加页面的方式可能是错误的。显然，您一次又一次地覆盖一页，而不是附加新的一页。

**编辑**

我从来没有使用过dompdf。快速浏览一下文档让我觉得您创建了类似于 HTML 标记的内容，然后将其转换为 PDF，我说对了吗？

***示例代码***

```
$html = <<<HTML
  <html>
      <head>
            <style type="text/css">
                /* Your document styling goes here */
            </style>
      </head>
      <body>
HTML;

while ( $row = $dbResult->fetch_assoc() ) {
    $html .= '<div class="teacherPage">'
                 . $row['name'] // your teacher document goes here
             '</div>';
}

$html .= '</body></html>';

$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->render();
$dompdf->stream("sample.pdf"); 
```

如果您想知道不寻常的语法`$var = <<<HTML \r\nHTML`，那就是[heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)。当你有很多外来的内联代码时，使用 heredocs 会更舒服，这可以有变量`{$varname}`，你不需要担心引号。您需要确保的是，heredoc close`HTML`是在一个新行中并且没有缩进。

**编辑2**

仍然不太确定，您正在使用哪个库。我发现[这个扩展](http://code.google.com/p/dompdf/wiki/Usage)看起来不错，它被称为 dompdf，就像你在问题中所说的那样。

您的最新评论表明您到目前为止还没有解决您的问题，因此我决定添加更多信息以使您达到目标。

> *免责声明：我不会编写函数式代码，也不会对此进行测试，但以下提示将推动您朝着正确的方向完成工作。*

dompdf 能够读取您输入文档的 CSS2 和 CSS3 属性。

上面循环中的每个循环都`while`代表一位老师，他们每个人在输出文档中都有自己的页面。

我将页面放入带有 class 的 div 容器中`teacherPage`。您可以在此容器中填充您希望为教师显示的所有信息。

现在我们需要做的就是告诉 dompdf 每个`teacherPage`都是一个新页面。这可以使用[CSS3 附带的](http://www.w3.org/TR/css3-page/)`@page`标记来完成

我在上面的示例文档中添加了一个空的 css 容器`<style type="text/css"></style>`，这就是页面样式应该去的地方。

**示例 CSS**

```
@page teacher {
  size: A4 portrait;
  margin: 2cm;
}

.teacherPage {
   page: teacher;
   page-break-after: always;
} 
```

`@page`您可以定义一个命名的 page ，它可以具有`teacher`对整个页面容器有效的属性。

`page-break-after: always`将在每个容器之后开始一个新页面

希望这会有所帮助，玩得开心:)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-11T18:12:46.923

显然，没有溢出问题，并且结果超出了工作表的允许边距。您可以做的是将数据与另一个表中的父级分开并放在它们之间：

```
<div style="page-break-before: always;"></div> 
```

# java - Spring 3.2 mvc，如何在控制器中重写 url 作为重定向视图的一部分，并发送永久状态代码

> ID：14089885
> 
> 赞同：2
> 
> 时间：2012-12-30T10:16:27.237
> 
> 标签：java, spring, spring-mvc, url-rewriting

```
 @RequestMapping(value = "/Foo/{id}/{friendlyUrl:.*}", method = RequestMethod.GET)
 public ModelAndView getFoo(@PathVariable final Long id, @PathVariable final String friendlyUrl) { 
```

所以它匹配 ID 和任何字符串。但我希望用户看到我指定的字符串。

```
foo = fooService.get(id); //use id from pathvariable
redirectView = new RedirectView(foo.getCorrectUrl()); //set url to correct url, not that in path
redirectView.setStatusCode(HttpStatus.MOVED_PERMANENTLY); //moved permanently
modelAndView = new ModelAndView(redirectView);
modelAndView.setViewName("myFoo.jsp");
return modelAndView; 
```

一切正常，除了用户看到的网址不正确。

它（应该是）与在 stackoverflow 网站上的现有问题上更改问题标题时相同的功能。

**编辑，现在做下面几乎可以工作的**

```
 return new ModelAndView("redirect:/Foo/"+id+"/"+foo.getUrl()); 
```

**但这会返回一个临时移动的状态码，我想要永久 301。**

他们是一种使用 spring-mvc 控制器获取重写 url 和永久移动状态代码的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:18:06.587

在您的代码中，您有

```
foo = fooService.get(id); //use id from pathvariable
redirectView = new RedirectView(foo.getCorrectUrl()); //set url to correct url, not that in path
redirectView.setStatusCode(HttpStatus.MOVED_PERMANENTLY); //moved permanently
modelAndView = new ModelAndView(redirectView);
modelAndView.setViewName("myFoo.jsp");
return modelAndView; 
```

The call to `modelAndView.setViewName("myFoo.jsp");` effectively replaces the value of View (redirectView reference) that was passed to ModelAndView contructor. So you should not call setViewName in this case.

# nltk - nltk pos_tag 用法

> ID：14089887
> 
> 赞同：8
> 
> 时间：2012-12-30T10:16:57.930
> 
> 标签：nltk, pos-tagger

我正在尝试在 NLTK 中使用语音标记并使用了以下命令：

```
>>> text = nltk.word_tokenize("And now for something completely different")

>>> nltk.pos_tag(text)

Traceback (most recent call last):
File "<pyshell#4>", line 1, in <module>
nltk.pos_tag(text)
File "C:\Python27\lib\site-packages\nltk\tag\__init__.py", line 99, in pos_tag
tagger = load(_POS_TAGGER)
File "C:\Python27\lib\site-packages\nltk\data.py", line 605, in load
resource_val = pickle.load(_open(resource_url))
File "C:\Python27\lib\site-packages\nltk\data.py", line 686, in _open
return find(path).open()
File "C:\Python27\lib\site-packages\nltk\data.py", line 467, in find
raise LookupError(resource_not_found)
LookupError: 
**********************************************************************
Resource 'taggers/maxent_treebank_pos_tagger/english.pickle' not
found.  Please use the NLTK Downloader to obtain the resource: 
```

但是，我收到一条错误消息，其中显示：

```
engish.pickle not found. 
```

我已经下载了整个语料库，并且 English.pickle 文件在 maxtent_treebank_pos_tagger 中

我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T20:28:44.393

您的 Python 安装无法访问 maxent 或 treemap。

首先，检查标记器是否确实存在：从命令行启动 Python。

`>>> import nltk`

然后你可以检查使用

`>>> dir (nltk)`

查看列表以查看是否存在`maxent`并且`treebank`两者都存在。

更容易打字

```
>>> "maxent" in dir(nltk)
>>> True
>>> "treebank" in dir(nltk)
>>> True 
```

使用`nltk.download()`--> Models 选项卡并检查树形图标记器是否显示为已安装。您还应该尝试再次下载标记器。

![NLTK 下载器，模型选项卡](../Images/8165bc1b3304d84da4ab0bd3979d1e82.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-31T05:18:48.840

如果您不想使用下载器 gui，您可以在 python 或 ipython shell 中使用以下命令：

```
import nltk
nltk.download('punkt')
nltk.download('maxent_treebank_pos_tagger') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T11:39:17.283

超过 50 个语料库和词汇资源，例如 WordNet：[http](http://www.nltk.org/nltk_data/) ://www.nltk.org/nltk_data/免费。使用[http://nltk.github.com/nltk_data/](http://nltk.github.com/nltk_data/)作为服务器索引而不是 googlecode Google 代码 401：需要授权

# performance - 查找两个节点之间所有路径的高效算法

> ID：14089888
> 
> 赞同：4
> 
> 时间：2012-12-30T10:17:08.227
> 
> 标签：performance, algorithm, graph, time-complexity, path-finding

我目前正在研究递归 DFS，以检索无向和未加权图中两个节点之间的所有路径。它在保存路径的同时递归地获取开始和结束节点以及节点及其相邻节点上的DFS。我想知道是否有更有效的方法来查找所有路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T10:21:18.110

有指数级的简单路径，而 DFS 基本上将它们全部创建为 0，因此您的方法是正确的，尽管很耗时（但这是问题本身的一部分，而不是算法）。

如果存在这样的节点，您可以通过从图形中消除不通向目标的节点来稍微优化它 - 在计算它们之前有效地修剪不成功的搜索。

请注意，如果图形包含循环 - 可能有无限数量的路径（尽管有限数量的*简单*路径）。请注意，为避免无限循环并获取所有简单路径，您的 DFS 将需要维护一个`visited`集合，该集合按路径修改（一旦“发现”一个节点将其插入到集合中，一旦从堆栈中弹出，将其删除从集合）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T13:31:30.350

您可以调整 Dijkstra 的算法，另请参阅 [A Recursive Algorithm to Find all Paths Between Two Gives Nodes](http://www.technical-recipes.com/2011/a-recursive-algorithm-to-find-all-paths-between-two-given-nodes/)

# mysql - Mysql选择条件

> ID：14089890
> 
> 赞同：0
> 
> 时间：2012-12-30T10:18:24.063
> 
> 标签：mysql, sql, select, union

我有下表：

```
match_id player_1 player_2
1        AAA      BBB
2        CCC      DDD
3        CCC      AAA 
```

我想知道玩家 AAA 和 BBB 之间比赛的 match_id，但我不知道他们的确切顺序（AAA vs BBB 或 BBB vs AAA）。

现在我使用类似的构造`WHERE (('player_1' = AAA AND 'player_2' = BBB) OR ('player_1' = BBB AND 'player_2' = AAA))`，但它不能使用键，所以我怀疑它是最有效的。

它在小表（1k+ 条目）上运行良好，但现在我正在处理另一个项目，该表中可能有 100k+ 行，所以我有点担心。

请建议我让 match_id 了解两名球员的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:35:15.813

尝试查询

```
select match_id from table_name where "AAA" in (player_1,player_2) and   
"BBB" in (player_1,player_2); 
```

并且不要忘记创建 player_1 和 player_2 字段的索引。这将有助于提高性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T10:30:35.217

尝试**UNION**或**UNION ALL**在两列上实现索引：

```
SELECT match_id FROM tablename 
WHERE player1='AAA' AND player2='BBB' 
UNION 
SELECT match_id FROM tablename 
WHERE player1='BBB' AND player2='AAA' 
```

**或者**你也可以试试这个

```
SELECT matchid FROM tablename 
WHERE player1 IN ('AAA', 'BBB') AND player2 IN ('AAA', 'BBB') AND 
      player1 != player2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T10:37:17.017

是的，在条件中使用 OR 肯定会减慢您的查询速度。我建议稍微改变方法。请检查您的模型是否允许以“排序”方式存储玩家（如果您使用 ID，则按 ID，如果您使用名称，则按字母顺序）：每次您有两个玩家要存储时，将按字母/数字顺序排列的 player_1首先，在 player_2 中是另一个。

假设*AAA vs BBB*和*BBB vs AAA*将始终存储为 ('AAA', 'BBB')，您可以将查询缩短为：

```
WHERE ('player_1' = 'AAA' AND 'player_2' = 'BBB') 
```

# jquery - 页面加载后，jQuery ajax 回调函数不会触发

> ID：14089895
> 
> 赞同：0
> 
> 时间：2012-12-30T10:20:14.573
> 
> 标签：jquery

我是 jQuery 的新手并且遇到了问题。在下面的简单代码片段中，我正在进行 ajax 调用以返回当前日期时间。如果我在页面加载后立即单击按钮，则会收到消息“按钮已单击”。WebMethod 也被调用。但是，我没有收到“成功”消息，在我看来，成功的回调函数没有被调用。但是当我在页面加载后等待几秒钟然后单击按钮时，一切正常。这是否意味着 jQuery 脚本需要时间来加载？如果是这种情况，当我在页面加载后不久单击按钮时，我是如何收到消息“按钮单击”的。

```
<script>

        $(document).ready(function () {
              $("#btnClick").click(function () {
                  GetDate();
              });
          });

       function GetDate() {
            alert("Button clicked!");
            $.ajax({
                type: "POST",
                url: "WebForm1.aspx/GetDate",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    alert("success");
                },
                error: function (msg) {
                    alert("error");
                }

            });
        }
</script>

<form runat="server">
   <asp:Button ID="btnClick" runat="server" />
</form>

//WebForm.aspx.cs
[System.Web.Services.WebMethod]
public static string GetDate()
{
  return DateTime.Now.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T10:40:53.460

您已订阅`.click()`按钮的事件，但尚未取消默认操作。因此，当用户单击此按钮时，ASP.NET 会向服务器执行 PostBack 并重定向您离开，从而没有时间执行 AJAX 请求。

以下是取消按钮默认操作的方法：

```
$(document).ready(function () {
    $("#btnClick").click(function () {
        GetDate();
        return false; // <!-- Cancel the default action of the button
    });
}); 
```

或者：

```
$(document).ready(function () {
    $("#btnClick").click(function (evt) {
        evt.preventDefault();  // <!-- Cancel the default action of the button
        GetDate();
    });
}); 
```

此外，您不需要`dataType: 'json'`AJAX 请求中的属性。您已将 contentType 标头设置为`application/json`意味着您正在调用的 Page Method 将返回 JSON 并设置正确的 Content-Type 响应标头。因此 jQuery 将使用此标头并已在成功回调中为您解析结果，您可以在其中直接显示它：

```
success: function(msg) {
    alert('Success. The result is ' + msg.d);
} 
```

`.d`请注意我是如何在成功回调中使用该属性的。这是由于 ASP.NET 页面方法基础结构如何序列化 JSON 响应的性质。它看起来像这样：

```
{"d":"12/30/2012 12:45:02 PM"} 
```

# android - 在 Android 中读取 SMS 和 MMS 数据库

> ID：14089896
> 
> 赞同：3
> 
> 时间：2012-12-30T10:20:16.743
> 
> 标签：android, database, sms, mms

Google 在 Android API 中提供了关于联系人提供程序的非常好的文档。（你可以在[这里](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.html)看到它。它包含这些数据库中使用的所有表和列名称的完整详细信息。我试图为 sms 和 mms 数据库（位于 mmssms.db 中）寻找相同的信息，但我看不到任何文档。所以我的问题是：

*   首先，真的没有这样的文件吗？
*   如果是的话，为什么谷歌试图让我们远离这个？
*   而且，在您看来，我怎样才能获得有关所用表的更多详细信息以及该表中每一列的描述（即每一列的用途）。

顺便说一句，我需要这些信息来编写一个读取 sms/mms 数据的 java 程序。你可以假设我已经得到了 mmssms.db 文件。

谢谢，我很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:45:07.847

1.  android中没有关于sms和mms数据库的官方文档

2.  …………

3.  您可以从`Telephony.java`. 您可以在此处获取文件。[电话.java](https://github.com/android/platform_frameworks_base/blob/ics-mr1-release/core/java/android/provider/Telephony.java)

# mysql - 使用外键创建表显示错误

> ID：14089902
> 
> 赞同：1
> 
> 时间：2012-12-30T10:21:02.180
> 
> 标签：mysql, sql, database, foreign-keys

我正在尝试创建一个表，但收到一个错误消息，告诉我第 9 行有问题。这是代码。

```
CREATE TABLE shirts_link (
    adult VARCHAR(1) NOT NULL,
    kids VARCHAR(1) NOT NULL,
    babies VARCHAR(1) NOT NULL,
    shirt_id INT(4) NOT NULL,
    size_id INT(4) NOT NULL,
    price_id INT(4) NOT NULL,
    PRIMARY KEY (shirt_id,size_id,price_id),
    FOREIGN KEY (shirt_id) REFERENCES shirts(id),
    FOREIGN KEY (size_id) REFERENCES shirt_sizes(id),
    FOREIGN KEY (price_id) REFERENCES shirt_prices(id)
    )ENGINE=INNODB; 
```

这是我试图链接到的其他表..

```
CREATE TABLE shirts (
    id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY NOT NULL,
    shirt_name VARCHAR(20) NOT NULL,
    men VARCHAR(10) NULL,
    women VARCHAR(10) NULL,
    boys VARCHAR(10) NULL,
    girls VARCHAR(10) NULL,
    babies VARCHAR(10) NULL,
)ENGINE=INNODB;

CREATE TABLE shirt_sizes (
    id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
    size_name VARCHAR(10) NOT NULL
)ENGINE=INNODB;

CREATE TABLE shirt_prices (
        id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
        price_cat VARCHAR(10) NOT NULL,
        price NUMERIC(6,2) NOT NULL
    )ENGINE=INNODB; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T10:22:35.417

问题是你用单引号包裹*表名*和*列名。*它不应该是或`backtick`使用

```
FOREIGN KEY (shirt_id) REFERENCES shirts(id),
FOREIGN KEY (size_id) REFERENCES shirt_sizes(id),
FOREIGN KEY (price_id) REFERENCES shirt_prices(id) 
```

或者

```
FOREIGN KEY (`shirt_id`) REFERENCES `shirts`(`id`),
FOREIGN KEY (`size_id`) REFERENCES `shirt_sizes`(`id`),
FOREIGN KEY (`price_id`) REFERENCES `shirt_prices`(`id`) 
```

但在这种情况下，它们是*可选*的，因为它们都不是 MySQL 保留关键字。

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

**更新 1**

键的数据类型必须彼此相同，将这些列声明为`UNSIGNED`

```
shirt_id INT(4) UNSIGNED NOT NULL,
size_id INT(4) UNSIGNED NOT NULL,
price_id INT(4) UNSIGNED NOT NULL, 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/fb7c6/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T10:25:10.337

```
CREATE TABLE shirts_link (
    adult VARCHAR(1) NOT NULL,
    kids VARCHAR(1) NOT NULL,
    babies VARCHAR(1) NOT NULL,
    shirt_id INT(4) NOT NULL,
    size_id INT(4) NOT NULL,
    price_id INT(4) NOT NULL,
    PRIMARY KEY (shirt_id,size_id,price_id),
    FOREIGN KEY (shirt_id) REFERENCES shirts(id),
    FOREIGN KEY (size_id) REFERENCES shirt_sizes(id),
    FOREIGN KEY (price_id) REFERENCES shirt_prices(id)
    )ENGINE=INNODB; 
```

它在[sqlfiddle](http://www.sqlfiddle.com/#!2/0f4f4)上对我有用 这是我的代码：

```
CREATE TABLE shirts(
  id INT NOT NULL,
  PRIMARY KEY (id)
  );
CREATE TABLE shirts_link (
    adult VARCHAR(1) NOT NULL,
    kids VARCHAR(1) NOT NULL,
    babies VARCHAR(1) NOT NULL,
    shirt_id INT(4) NOT NULL,
    size_id INT(4) NOT NULL,
    price_id INT(4) NOT NULL,
    PRIMARY KEY (shirt_id,size_id,price_id),
    FOREIGN KEY (shirt_id) REFERENCES shirts(id)
    ); 
```

# javascript - 在 express 中很好地处理偶尔的未定义错误

> ID：14089906
> 
> 赞同：0
> 
> 时间：2012-12-30T10:22:01.377
> 
> 标签：javascript, node.js, express

如果在任何时候，我得到一个错误，通过尝试使用未定义的东西做某事，我的整个快速应用程序会因 TypeError 而崩溃，而不是通过重定向到 HTTP 500 页面来很好地处理它。

有什么方法可以处理这些异常，或者我需要手动检查我的路由器方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:35:57.170

您是否从[**docs-Express 错误处理**](http://expressjs.com/guide.html#error-handling)中尝试过这个？

> 错误处理中间件的定义与常规中间件一样，但是必须使用 4 的数量定义，即签名 (err, req, res, next)：
> 
> ```
> app.use(function(err, req, res, next) {
>    console.error(err.stack);
>    res.send(500, 'Something broke!');
> }); 
> ```
> 
> 虽然不是强制性的错误处理中间件通常是最后定义的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T10:31:25.730

也许`try { ... } catch(e) {...}`是你正在寻找的？或者只是检查值是否未定义。简单`if (value) { ...`就行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T15:59:23.557

正如现象所提到的，您可以使用快速错误处理程序中间件在集中位置处理错误。

```
app.use(function(err, req, res, next) {
console.error(err.stack);
res.send(500, 'Something broke!');
}); 
```

除了从你的路线传递错误，你可以使用 next 像这样将错误传递给这个中间件

```
app.get('/login',function(req,res,next){
next("your error"); // The error middle-ware handle this error.
}) 
```

# python - 创建一个循环，在数据集的所有项目上运行函数（参数是数据集的索引）？

> ID：14089910
> 
> 赞同：3
> 
> 时间：2012-12-30T10:23:04.437
> 
> 标签：python, numpy

所以我有一个功能：

```
def connection(n,m,r):
          is_connected = ((x[n]-x[m])**2 + (y[n]-y[m])**2)**0.5
          if is_connected < 2*r:
              return n + " " + "connects with" + " " + m
          else:
              return "no connection" 
```

这基本上可以查看两个圆（具有对应于索引 n 和 m 的坐标）是否连接。n 和 m 参数是指数据集 x 和 y 中的索引，它们来自 numpy.random 数组：

```
array([[ 0.31730234,  0.73662906],
   [ 0.54488759,  0.09462212],
   [ 0.07500703,  0.36148366],
   [ 0.33200281,  0.04550565],
   [ 0.3420866 ,  0.9425797 ],
   [ 0.36115391,  0.16670599],
   [ 0.95586938,  0.52599398],
   [ 0.13707665,  0.6574444 ],
   [ 0.77766138,  0.56875582],
   [ 0.79618595,  0.7139309 ]]) 
```

由于数组基本上是 10 组坐标，我从中生成了两个列表，x 和 y（x 是数组的第一列，y 是第二列）。m 和 n 是这些列表中的索引。因此， n 和 m 对应于数组中的索引，但我不确定如何？

我现在一直在做的是手动输入索引以查看该数组中的任何两个圆圈是否连接 - 是否有一个 -for 循环可以以更有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-30T11:03:26.993

无论如何，您应该以不同的方式做事。不幸的是，`cKDTree`哪个更快没有必要的功能，但即使是另一个`KDTree`也应该给你一个巨大的速度提升（并且更优雅地解决它）

```
from scipy.spatial import KDTree
from itertools import chain

tree = KDTree(circles)

# unfortunatly only a list of lists, because there may be a different amount
# also the point itself is included every time.
connections = tree.query_ball_tree(tree, 2*r)

# if all you want is a list of lists of what connects with what
# connections is already what you need. The rest creates a connectivity matrix:    

repeats = [len(l) for l in connections]
x_point = np.arange(len(circles)).repeat(repeats)
y_point = np.fromiter(chain(*connections), dtype=np.intp)

# or construct a sparse matrix here instead, scipy.sparse has some graph tools
# maybe it even has a better thing to do this.
connected = np.zeros((len(circles),) * 2, dtype=bool)
connected[x_point, y_point] = True 
```

虽然它没有`cKDTree`不幸使用，但这仍然为您节省了`O(N^2)`复杂性......当然如果`len(circles)`很小，那没关系，但是您可以只使用广播，（或也`distance_matrix`来自`scipy.spatial`）：

```
distances = np.sqrt(((circles[:,None,:] - circles)**2).sum(-1))
connected = distances < (2 * r)

# if you need the list of lists/arrays here you can do:
connections = [np.flatnonzero(c) for c in connected] 
```

但请注意，第二种方法是一个内存饥渴的怪物，只有`circles`在很小的情况下才有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T16:01:05.140

**编辑：**刚刚意识到以下只是seberg最后一种方法的扩展版本......

如果您的数据集很小，例如（非常）几千个元素，您可以使用 numpy 暴力破解：

```
import numpy as np
n = 10 # the number of circles
circles = np.random.rand(n, 2) # the array of centers
distances = circles.reshape(n, 1, 2) - circles.reshape(1, n, 2)
# distances now has shape (n, n, 2)
distances = np.sqrt(np.sum(distances**2, axis=2))
# distances now has shape (n, n)
# distances[i, j] holds the distance between the i-th and j-th circle centers 
```

当您想检查哪些半径`r`重叠的圆时，您可以执行以下操作：

```
r = 0.1
overlap = distances < 2 * r
# overlap[i, j] is True if the i-th and j-th circle overlap, False if not 
```

您可以将最后两行重复用于您想要的任何值`r`，而无需执行更密集的上一步计算。

它使用了大量不必要的内存，因此对于（中等）大型数据集会崩溃，但由于所有循环都由 numpy 运行，因此它应该很快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T10:39:58.800

一个简单的例子是：

```
# m is your array
rows = m.shape[0]
for x in range(rows):
    for y in range(rows)[x+1:]:
        # x, y correspond to indices of two circles
        conn = connection(x, y, r) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T10:41:05.567

you can use [map](http://docs.python.org/2/library/functions.html#map)

to do so, simply change connection to accept a circle as its parameter, and have the `r` as part of the circle

```
def connection(circle):
    n, m, r = circle
    is_connected = ((x[n]-x[m])**2 + (y[n]-y[m])**2)**0.5
    if is_connected < 2*r:
        return n + " " + "connects with" + " " + m
    else:
        return "no connection" 
```

and have your list be a list of circles AND their radius.

```
circles = array([
   [ 0.31730234,  0.73662906, r],
   [ 0.54488759,  0.09462212, r],
   [ 0.07500703,  0.36148366, r],
   [ 0.33200281,  0.04550565, r],
   [ 0.3420866 ,  0.9425797 , r],
   [ 0.36115391,  0.16670599, r],
   [ 0.95586938,  0.52599398, r],
   [ 0.13707665,  0.6574444 , r],
   [ 0.77766138,  0.56875582, r],
   [ 0.79618595,  0.7139309 , r]]) 
```

then simply do this:

```
map(connection, circles) 
```

if the r is external, or a member then you want to use this:

```
def connection(coord):
    n, m = coord
    is_connected = ((x[n]-x[m])**2 + (y[n]-y[m])**2)**0.5
    if is_connected < 2*r:
        return n + " " + "connects with" + " " + m
    else:
        return "no connection"

coords = array([
   [ 0.31730234,  0.73662906],
   [ 0.54488759,  0.09462212],
   [ 0.07500703,  0.36148366],
   [ 0.33200281,  0.04550565],
   [ 0.3420866 ,  0.9425797 ],
   [ 0.36115391,  0.16670599],
   [ 0.95586938,  0.52599398],
   [ 0.13707665,  0.6574444 ],
   [ 0.77766138,  0.56875582],
   [ 0.79618595,  0.7139309 ]])

map(connection, coords) 
```

or you can keep your current format, and do a slightly uglier implementation. and i still dont know where you get the `r` from.

```
for item in circles:
    connection(item[0], item[1], r) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T11:12:57.843

在查看了您的一些回复后，我给您写了一个新的答案，它完全改变了您的代码。

```
def check_overlap(circleA, circleB, r):
    # your code.
    # in each circle you have [x-coord, y-coord]

circles = [
    [0.34, 0.74], [0.27, 0.19],
    [0.24\. 0.94], [0.64, 1.42]]

for a, b in ((a,b) for a in circles for b in circles):
    if a != b:
        check_overlap(a, b, r) 
```

这清楚地表明了您在代码中所做的事情，python 就是关于可读性的。

[注意：最后一个功能与使用itertools.product](http://docs.python.org/2/library/itertools.html#itertools.product)相同，但没有导入它。

# android - 刷新选项卡式android项目中所有选项卡的列表视图？

> ID：14089911
> 
> 赞同：0
> 
> 时间：2012-12-30T10:23:19.617
> 
> 标签：android, multithreading, listview, tabs, message

我在 android 中有一个选项卡式应用程序，每个选项卡上有三个选项卡和一个列表视图（活动），还有一个线程在连接到网站的主要活动处运行，以每 20 分钟获取一次新项目列表。

我想在收到新项目时更新所有这三个列表。

我有一个包含列表的静态类，我用新项目更新了这些列表，但是如何向活动活动发送消息，以便活动使用来自静态类的新数据刷新自身？

是否可以向当前正在运行的活动发送消息？一个简单的代码请。

* * *

我知道我必须通知更改，但如何通知？我对每个活动（标签）都有这些行：

```
TabSpec newlistspec = tabHost.newTabSpec("جديد");
newlistspec.setIndicator("جديد", getResources().getDrawable(R.drawable.icon_newlist_tab));
Intent photosIntent = new Intent(this, NewList.class);
newlistspec.setContent(photosIntent); 
```

现在怎么通知？你能提供一个代码吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T13:23:43.423

如果您的 Activity 是 ListActivity ，您可以使用 notifyDataSetChanged() 告诉 Activity 您的 List 已更改，并且在 Activity 中，我认为您可以使用下面的代码来更新您的 ListViews ：

```
YourListadapter.changeCursor(YourChangedCursor);
YourListadapter.notifyDataSetChanged(); 
```

希望能帮助到你！

# android - 查找超过 2 个数字的 LCM 的工作示例

> ID：14089912
> 
> 赞同：1
> 
> 时间：2012-12-30T10:23:26.043
> 
> 标签：android, lcm

安卓 2.3.3

我编写了一个用于计算 2 个以上数字的 LCM 的程序，它对我有用。我想分享它，以便它可能对正在寻找它的人派上用场。这可能不是最好的解决方案，但是，我按照我的要求做了。您可以根据需要对其进行修改。

我已经对输入进行了硬编码，而且我的程序也使用 ArrayLists 来执行操作。你可能想改变这些。

先决条件 ::: 1\. 计算输入范围的素数。

```
public class PlusMinusActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */

    EditText edtxtExpression;
    Button btnLCM, btnGCD;

    ArrayList<String> alPrimes = new ArrayList<String>(); // Contains List of Prime Numbers
    ArrayList<String> alNumbers = new ArrayList<String>(); // Contains the input => Numbers for which LCM is to be determined
    ArrayList<String> alResult = new ArrayList<String>(); // Contains the numbers that make up the LCM

    String strExp = ""; // Temporary String to display the result

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        edtxtExpression = (EditText)findViewById(R.id.edtxtExpression);
        btnLCM = (Button)findViewById(R.id.btnLCM);
        btnGCD = (Button) findViewById(R.id.btnGCD);

        btnLCM.setOnClickListener(this);
        btnGCD.setOnClickListener(this);

        addData();

        strExp = alNumbers.toString();
        System.out.println("strExp Value is ::: "+strExp);
    }

    private void addData() {
        // TODO Auto-generated method stub

        //alPrimes.add(String.valueOf(1));
        alPrimes.add(String.valueOf(2));
        alPrimes.add(String.valueOf(3));
        alPrimes.add(String.valueOf(5));
        alPrimes.add(String.valueOf(7));
        alPrimes.add(String.valueOf(9));
        alPrimes.add(String.valueOf(11));
        alPrimes.add(String.valueOf(13));
        alPrimes.add(String.valueOf(17));
        alPrimes.add(String.valueOf(19));
        alPrimes.add(String.valueOf(23));
        alPrimes.add(String.valueOf(29));

        alNumbers.add(String.valueOf(1));
        alNumbers.add(String.valueOf(5));
        alNumbers.add(String.valueOf(7));
        alNumbers.add(String.valueOf(9));

        System.out.println("alPrimes ::: "+alPrimes.toString());
        System.out.println("alNumbers ::: "+alNumbers.toString());

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch (v.getId()) {
        case R.id.btnLCM:
            calculateLCM();
            break;

        case R.id.btnGCD:
            calculateGCD();
            break;
        default:
            break;
        }

    }

    // Calculates LCM
    private void calculateLCM() {
        // TODO Auto-generated method stub

        int i=0, count=0;

        while(i < alPrimes.size()) 
        {
            count = 0;
            int p = Integer.parseInt(alPrimes.get(i)); // Getting the element from PrimeNumbers List
            System.out.println("Prime Number ::: "+p);
            int j=0;

            while(j < alNumbers.size())
            {
                int n = Integer.parseInt(alNumbers.get(j)); // Getting the number from Input List
                System.out.println("Number ::: "+n);

                if(n % p == 0 && n != 1)
                {
                    count++; // Counts the number of integers that gets divided (% = 0) by that particular prime number
                    System.out.println("Count :::"+count);
                }

                j++;
            }

            if(count >= 2) // If two or more numbers, gets divided, then we do the division
            {
                alResult.add(String.valueOf(p)); // adding the prime number to Result list
                System.out.println("Result ::: "+alResult.toString());

                j=0;

                while(j < alNumbers.size())
                {

                    int n = Integer.parseInt(alNumbers.get(j));
                    System.out.println("Number ::: "+n);

                    if(n % p == 0)
                    {
                        int result = n/p;
                        System.out.println("Temp Result ::: "+result);

                        alNumbers.remove(j); // Replace the element by the result
                        System.out.println("After Removing ::: "+alNumbers.toString());
                        alNumbers.add(j, String.valueOf(result));
                        System.out.println("After Adding ::: "+alNumbers.toString());
                    }

                    j++;
                }

                i = -1; // iterate the Input list from the start
            }

            else if(count == 0 || count == 1)
            {
                boolean allPrimes = checkAllPrimes();

                if(allPrimes)
                {
                    break;
                }
            }

            i++;
        }

        calculateResult();

    }

    // Calculates the result 
    private void calculateResult() {
        // TODO Auto-generated method stub

        int i=0;

        while(i < alNumbers.size())
        {
            alResult.add(alNumbers.get(i));
            i++;
        }

        int result = 1;
        i=0;

        while(i < alResult.size())
        {
            result *= Integer.parseInt(alResult.get(i));
            i++;
        }

        edtxtExpression.setText("LCM of "+strExp+" is ::: "+result);
    }

    // Checks whether the elements in the ArrayList are all prime numbers
    // returns true if all are prime
    //
    private boolean checkAllPrimes() {
        // TODO Auto-generated method stub

        int i=0;
        boolean areAllPrimes = true;

        while(i < alNumbers.size())
        {
            int n = Integer.parseInt(alNumbers.get(i));

            if(! (alPrimes.contains(n) || n == 1))
            {
                areAllPrimes = false;
                break;
            }

            i++;
        }

        return areAllPrimes;
    }

    private void calculateGCD() {
        // TODO Auto-generated method stub

    }

} 
```

![程序的输出](../Images/08816f7c9c9aec90cf3ff0fd977762c7.png)

对于以下输入 :::

```
alNumbers.add(String.valueOf(10));
alNumbers.add(String.valueOf(15));
alNumbers.add(String.valueOf(20));
alNumbers.add(String.valueOf(25)); 
```

![具有不同输入的输出](../Images/07134a888b8d46f733141834e7a629dd.png)

对于以下输入 :::

```
alNumbers.add(String.valueOf(10));
alNumbers.add(String.valueOf(15));
alNumbers.add(String.valueOf(20));
alNumbers.add(String.valueOf(25));
alNumbers.add(String.valueOf(110));
alNumbers.add(String.valueOf(130)); 
```

![输出 6 个值](../Images/e6c8fb0f6a6aedc87c5c6036ac224e79.png)

我对 Android 和 Java 也很陌生。所以，如果这不是一个好的解决方案，请不要介意。

希望能帮助到你...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:44:07.877

You could probaly simplify your code using this idea:

```
 static int ggt(int a, int b)
    {
        if (b == 0)
            return a;
        return ggt(b, a % b);
    }

    static void Main(string[] args)
    {
        int lcm = 1;

        foreach(int x in new int[] { 1,5,7,9 })
            lcm = x * lcm / ggt(x, lcm);

        Console.WriteLine("{0}", lcm);
    } 
```

Syntax is c#, but hopefully readable enough. 'ggt' ist the german abbrevation for 'gcd' (greatest common divisor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-19T15:23:36.367

```
//LCM of range of numbers using JAVA
n=s.nextInt();//Reading range value
for(i=0;i<n;i++)
{
    a[i]=s.nextInt();   //reading list of numbers
}
Arrays.sort(a,0,n);   //Sorting the numbers
k=a[n-1];   //Assigning biggest value in the sorted array to k
j=1;          
l=k;         
for(i=0;i<n;i++)
{
    if(k%a[i]==0)
    {
       continue;  //checking whether all the elements are divisible by k
    }
    else 
    {
       j=j+1; 
       k=l*j;//multiples of highest element i.e k in the sorted array 
       i=-1;//Assigning -1 to i, so as to check whether all the elements 
            //in the array are divisible by k or not from the beginning
    }
}
System.out.println("LCM of range of numbers:"+k); 
```

输入：

6

2 4 6 8 9 3

输出：

数字范围LCM：72

# bash - Shell - 删除除单个文件夹之外的所有内容

> ID：14089915
> 
> 赞同：3
> 
> 时间：2012-12-30T10:24:14.533
> 
> 标签：bash, shell

我有一个目录，其中包含一个`.git`与其他各种文件和文件夹一起命名的文件夹。我想删除所有文件和所有文件夹，除了我的`.git`目录。

请注意，如果任何文件夹包含名为 的子文件夹`.git`，我也想删除它们。只应保留根 git 存储库！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T10:25:20.597

这很简单：

```
shopt -s extglob dotglob
rm -rf !(.git) 
```

见[http://mywiki.wooledge.org/glob](http://mywiki.wooledge.org/glob)

# haskell - 解决极端情况 Haskell 模块导入和导出

> ID：14089916
> 
> 赞同：9
> 
> 时间：2012-12-30T10:24:38.127
> 
> 标签：haskell, compiler-construction, compilation

我正在编写一个小的 Haskell 编译器，我想尽可能多地实现 Haskell 2010。我的编译器可以解析一个模块，但完成一个程序的模块似乎是一项不平凡的任务。我制作了一些棘手但可能有效的 Haskell 模块示例：

```
module F(G.x) where
  import F as G
  x = 2 
```

这里的模块`F`export `G.x`，但`G.x`与 , 相同`F.x`，所以当且仅当它 export 时，模块才会`F`导出。`x``x`

```
module A(a) where
  import B(a)
  a = 2

module B(a) where
  import A(a) 
```

在此示例中，要解析模块的导出，`A`编译器必须检查`a`导入的来源`B`是否与声明的相同`a = 2`，但只有在`B`导出`a`时才会`A`导出`a`。

```
module A(f) where
  import B(f)

module B(f) where
  import A(f) 
```

在解析 module 期间`A`，编译器可能假设import `f`from`B`存在，这意味着`A`export `f`，因此`B`可以 import`A(f)`和 export `f`。唯一的问题是在任何地方都没有`f`定义:)。

```
module A(module X) where
  import A as X
  import B as X
  import C as X
  a = 2

module B(module C, C.b) where
  import C
  b = 3

module C(module C)
  import B as C
  c = 4 
```

在这里，`module`导出导致导出列表相互依赖并依赖于它们自身。

所有这些示例都应该是有效的 Haskell，如 Haskell 2010 规范所定义。

我想问是否有任何想法如何正确和完整地实现 Haskell 模块？

假设一个模块只包含（简单的）变量绑定，`import`s（可能带有`as`or `qualified`），并导出可能合格的变量和`module ...`缩写列表。该算法必须能够：

*   计算每个模块的导出变量的有限列表
*   将每个导出的变量链接到其绑定
*   将每个模块中使用的每个（可能是合格的）变量链接到它的绑定

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-30T11:05:17.977

您可能对[Haskell 98 模块系统的正式规范](http://web.cecs.pdx.edu/~mpj/pubs/hsmods.pdf)感兴趣。

我还在一系列博客文章中介绍了一些有趣的边缘案例，目前仅发布了[第一个](http://ro-che.info/articles/2012-12-25-haskell-module-system-p1.html)。

最后，我正在研究那个——一个处理 Haskell 模块的库。它被称为[haskell-names](https://github.com/feuerbach/haskell-names)。

根据您的目标，您可以简单地在编译器中使用它、研究源代码或贡献代码。（您的示例将成为出色的测试用例。）

* * *

回答你的问题：递归模块是通过计算一个固定点来处理的。

您从模块图中的强连接组件开始。对于此组件中的每个模块，您首先假设它不导出任何内容。然后您重新访问这些模块，并根据新信息计算新的导出列表。你可以证明这个过程是单调的——每次导出列表增长（或者，至少不缩小）。它迟早会停止增长——然后你就达到了固定点。

您可以通过借鉴静态分析的一些想法来优化此算法（该社区非常擅长计算不动点），但我的包目前实现了朴素算法（[代码](https://github.com/feuerbach/haskell-names/blob/master/src/Language/Haskell/Modules/Recursive.hs)）。

# c# - 插入期间字符串未被识别为有效的日期时间

> ID：14089917
> 
> 赞同：0
> 
> 时间：2012-12-30T10:24:51.357
> 
> 标签：c#, asp.net, datetime, linq-to-entities, calendarextender

当我尝试转换为日期时间时出现以下错误。

> 字符串未被识别为有效的日期时间。

```
 cost.b_date = DateTime.Parse(c_date.Text) ;//c_date.Text = 12/28/2012 
```

然后我试试

```
 string date = string.Format("{0:yyyy-MM-dd}",c_date.Text);
    cost.b_date = DateTime.Parse(date) ; 
```

但我得到了同样的例外，如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:29:24.120

`string.Format`当*输入*是字符串时使用是没有意义的。

如果你知道字符串的格式，你应该使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)or [`DateTime.TryParseExact`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparseexact.aspx)。例如，对于您拥有的字符串，您可以使用：

```
DateTime date = DateTime.ParseExact(text, "MM/dd/yyyy",
                                    CultureInfo.InvariantCulture); 
```

你应该考虑：

*   这是用户输入吗？如果是这样，请使用它`TryParseExact`来更轻松地检测用户错误，而不会出现异常。
*   你肯定知道确切的格式吗？如果没有，使用[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)可能更合适。
*   你确定了解文化吗？如果它不是当前线程的文化，您应该明确指定它。
*   您是否*必须*将值作为文本开始？如果您可以使用另一种输入形式来为您提供值作为`DateTime`开始，那将是可取的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T10:29:57.567

```
CultureInfo provider = CultureInfo.InvariantCulture;
DateTime result = DateTime.ParseExact(c_date.Text, "d", provider); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T10:29:56.260

尝试使用 DateTime.ParseExact。

```
DateTime date = DateTime.ParseExact(c_date.Text, "yyyy/MM/dd", null); 
```

# node.js - 如何使用 grunt 将编译好的玉文件复制到目标文件夹

> ID：14089921
> 
> 赞同：11
> 
> 时间：2012-12-30T10:25:10.817
> 
> 标签：node.js, build-automation, pug, npm, gruntjs

对于我正在开发的单页应用程序，我具有以下结构：

*   距离
    *   css
    *   js
    *   库
    *   部分
    *   索引.html
*   源代码
    *   css
    *   js
    *   库
    *   意见
        *   部分
        *   索引.jade

快递服务器将使用目录**dist为项目提供服务。**我有一些琐碎的任务（使用*grunt-contrib-clean*、*grunt-contrib-copy*）来清理**dist**并将**src/css**、**src/js**、**src/lib**复制到**dist**。

问题在于**src/views**。该目录包含需要编译成html文件的jade文件。编译后，我希望它们在**dist**中（dist 根目录中的 index.html，部分作为子目录）。

目前我正在使用**grunt-contrib-jade**任务来编译和复制翡翠文件。我想将它们复制到 dist，因为我不想将编译后的 html 文件添加到源代码管理中。但是现在这不是真的可行，因为你必须指定每个玉文件（现在只有几个，但会增加）：

```
 jade: {
        compile: {
            options: {
                pretty: true
            },
            files: {
                // TODO make one line
                'dist/index.html': ['src/views/index.jade'],
                'dist/partials/banner.html': ['src/views/partials/banner.jade'],
                'dist/partials/dashboard.html': ['src/views/partials/dashboard.jade'],
                'dist/partials/navbar.html': ['src/views/partials/navbar.jade'],
                'dist/partials/transfer.html': ['src/views/partials/transfer.jade']
            }
        }
    }, 
```

**有没有办法将 grunt-contrib-jade 任务（或另一个）与目录过滤器一起使用？**像这样：

```
 jade: {
        compile: {
            options: {
                pretty: true
            },
            dir: {
                'dist': ['src/views']
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-03T21:57:35.093

[Grunt wiki](http://gruntjs.com/api/grunt.file#grunt.file.expandmapping)的一点澄清- 扩展映射：

```
grunt.file.expandMapping(patterns, dest [, options]) 
```

> 请注意，虽然此方法可用于以编程方式为多任务生成文件数组，但最好使用[配置任务指南](http://gruntjs.com/configuring-tasks)的“动态构建文件对象”部分中描述的声明性语法。

假设上述情况，配置将如下所示：

```
files: [ { 
  expand: true, 
  src: "**/*.jade", 
  dest: "dist/", 
  cwd: "src/views", 
  ext: '.html'
} ]; 
```

与声明性配置相同的结果。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-31T07:28:12.857

我最终升级到 grunt 0.4（这会导致一些其他问题，但我可以处理）。

使用 grunt 0.4 版，可以使用[grunt.file.expandMapping](http://gruntjs.com/api/grunt.file#grunt.file.expandmapping)：

```
 jade: {
        compile: {
            options: {
                pretty: true
            },
            files: grunt.file.expandMapping(['**/*.jade'], 'dist/', {
                cwd: 'src/views',
                rename: function(destBase, destPath) {
                    return destBase + destPath.replace(/\.jade$/, '.html');
                }
            })

        }
    }, 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-12T14:32:59.430

如果您只想将文件的扩展名从 .jade 更改为 .html，另一种选择是使用`flatten`和`ext`参数，如下所示：

```
jade: {
    compile: {
        options: {
            data: { debug: false, title: 'My awesome application' }
        },
        files: grunt.file.expandMapping(['**/*.jade'], '<%= yeoman.dist %>/views', {
            cwd: '<%= yeoman.app %>/views',
            flatten: true,
            ext: '.html'
       })
    }
} 
```

甚至更好（如此[处](https://github.com/gruntjs/grunt/wiki/Configuring-tasks)所述）：

```
jade: {
    compile: {
        options: {
            data: { debug: false, title: 'My awesome application' },
            pretty: true
        },
        files: [
            {
                expand: true,
                cwd: '<%= yeoman.app %>/views',
                src: ['**/*.jade'],
                dest: '<%= yeoman.dist %>/views',
                ext: '.html'
            }
        ]}
} 
```

谢谢。

# ios - 如何计算给定标题上最近的国家？

> ID：14089927
> 
> 赞同：1
> 
> 时间：2012-12-30T10:25:43.550
> 
> 标签：ios, mapkit, geospatial, core-location, geography

我想从用户的当前位置计算给定方向（以度数提供）上最近的国家（在世界地图上查看）。

我意识到这样做的一种方法是使用[此处](https://stackoverflow.com/questions/378281/lat-lon-distance-heading-lat-lon)提供的公式来介入，例如，从点到点增加 5 英里，直到我最终到达一个不是用户起始国家的国家。然而，就地理编码资源的使用而言，这似乎非常低效。

你们中有人知道我可以为此使用更好的算法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T18:51:22.640

减少反向地理编码操作量的一种方法是将此问题视为边界搜索。如果您使用[二分搜索算法](http://en.wikipedia.org/wiki/Binary_search)，并对每个点进行反向地理编码，您可以通过最少的反向地理编码操作找到从当前国家到相邻国家的国家/地区的变化。

在二分搜索中，您的航向是恒定的，并且您有最小范围（5 英里）和最大范围（12,000 英里），您正在搜索边界所在的范围。然后，您对边界外的位置进行反向地理编码，以找出那里的国家/地区。一个问题是，就在边界之外可能是海洋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T10:54:39.950

我会用`MKReverseGeocoding`. 检查[此 SO question](https://stackoverflow.com/questions/1382900/how-to-retrieve-users-current-city-name)以获取代码示例。

# security - 非命名机器之间的安全 TCP 通信？

> ID：14089930
> 
> 赞同：0
> 
> 时间：2012-12-30T10:26:33.770
> 
> 标签：security, node.js, encryption, tcp

给定一组在网络上的机器，它们将使用 TCP 相互通信。

我的要求是：

*   数据必须加密。
*   数据不得发送到未经授权的机器，即使它位于同一网络上。
*   不得从未经授权的机器接收数据。
*   机器只知道其他机器的 IP 地址。

为了更好的想象，想象一个聊天网络，只有授权的客户才能参与，所有的通信都要加密。

我最初的想法是使用 TLS 证书：

*   每台授权机器都有该证书的副本。
*   使用证书可以加密连接。
*   使用服务器端的证书，它可以用来验证服务器。
*   在客户端使用证书，它可以用来验证客户端。
*   由于未经授权的机器没有证书，它们无法解密、发送或接收数据。

从理论上讲，这应该可以按预期进行。在实践中，它没有。

问题之一是机器只知道彼此的IP地址，它们不需要绑定域名。由于不建议将证书用于 IP 地址（Node.js 甚至不会验证 IP 地址为 CN 的证书），而且 IP 地址甚至可能随着时间而改变，我开始思考这是否是正确的方法。

当然，我可以自己开始实现所有这些：加密层，身份验证模式，......但我不会在那之后运行。如果有更方便的方法来解决这个问题，我将不胜感激。

因此，基本上归结为使用 TLS 证书进行加密和身份验证，不是因为绑定到域名，而是因为存在特定的证书。

我将如何实现这一点并解决上述问题？或者——我是在朝着完全错误的方向奔跑吗？我该如何以更好的方式解决这个问题？

# random - 使用matlab的循环对称高斯变量

> ID：14089934
> 
> 赞同：0
> 
> 时间：2012-12-30T10:27:03.273
> 
> 标签：random, matrix, statistics, gaussian, normal-distribution

任何人都可以帮助我，我想使用Matlab生成一个元素为零均值和单位方差独立且同分布（iid）循环对称高斯变量的矩阵任何人都知道此代码以及如何操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:24:12.903

在 matlab 中使用这个命令很容易生成一个元素为零均值和单位方差的矩阵：

```
normrnd(mu, sigma) 
```

*   `mu`是平均值
*   `sigma`是标准差。

更多细节请`help normrnd`在 MATLAB 中。

# wordpress - 更改自定义帖子类型重写

> ID：14089935
> 
> 赞同：2
> 
> 时间：2012-12-30T10:27:08.703
> 
> 标签：wordpress, .htaccess, mod-rewrite

我有一个自定义主题，它为我的投资组合使用自定义帖子类型，*例如 mysite.com/portfolio/*。***一旦我单击特定的投资组合***项目，URL 将更改为*mysite.com/portfolio-type /name/*

 **将中间的**投资组合类型 URL**更改为另一个值（例如“展示”）的最简单方法是什么？

**这是我的functions.php的自定义帖子类型部分：**

```
 // CUSTOM POST TYPES

    function justins_custom_post_types() {

        // Portfolio

        $labels_portfolio = array(
            'add_new' => 'Add New', 'portfolio-type',
            'add_new_item' => 'Add New Portfolio Post',
            'edit_item' => 'Edit Portfolio Post',
            'menu_name' => 'Portfolio',
            'name' => 'Portfolio', 'post type general name',
            'new_item' => 'New Portfolio Post',
            'not_found' =>  'No portfolio posts found',
            'not_found_in_trash' => 'No portfolio posts found in Trash', 
            'parent_item_colon' => '',
            'singular_name' => 'Portfolio Post', 'post type singular name',
            'search_items' => 'Search Portfolio Posts',
            'view_item' => 'View Portfolio Post',
        );
        $args_portfolio = array(
            'capability_type' => 'post',
            'has_archive' => true, 
            'hierarchical' => true,
            'labels' => $labels_portfolio,
            'menu_position' => 4,
            'public' => true,
            'publicly_queryable' => true,
            'query_var' => true,
            'show_in_menu' => true, 
            'show_ui' => true, 
            'supports' => array( 'comments', 'editor', 'excerpt', 'thumbnail', 'title' ),
            'singular_label' => 'Portfolio',
        );
        register_post_type( 'portfolio-type', $args_portfolio );

    }

    add_action( 'init', 'justins_custom_post_types' );

    // CUSTOM TAXONOMIES

    function justins_custom_taxonomies() {

        // Portfolio Categories 

        $labels = array(
            'add_new_item' => 'Add New Category',
            'all_items' => 'All Categories' ,
            'edit_item' => 'Edit Category' , 
            'name' => 'Portfolio Categories', 'taxonomy general name' ,
            'new_item_name' => 'New Genre Category' ,
            'menu_name' => 'Categories' ,
            'parent_item' => 'Parent Category' ,
            'parent_item_colon' => 'Parent Category:',
            'singular_name' => 'Portfolio Category', 'taxonomy singular name' ,
            'search_items' =>  'Search Categories' ,
            'update_item' => 'Update Category' ,
        );
        register_taxonomy( 'portfolio-category', array( 'portfolio-type' ), array(
            'hierarchical' => true,
            'labels' => $labels,
            'query_var' => true,
            'rewrite' => array( 'slug' => 'portfolio-type/category' ),
            'show_ui' => true,
        ));

        // Portfolio Tags   

        $labels = array(
            'add_new_item' => 'Add New Tag' ,
            'all_items' => 'All Tags' ,
            'edit_item' => 'Edit Tag' , 
            'menu_name' => 'Portfolio Tags' ,
            'name' => 'Portfolio Tags', 'taxonomy general name' ,
            'new_item_name' => 'New Genre Tag' ,
            'parent_item' => 'Parent Tag' ,
            'parent_item_colon' => 'Parent Tag:' ,
            'singular_name' =>  'Portfolio Tag', 'taxonomy singular name' ,
            'search_items' =>   'Search Tags' ,
            'update_item' => 'Update Tag' ,
        );
        register_taxonomy( 'portfolio-tags', array( 'portfolio-type' ), array(
            'hierarchical' => true,
            'labels' => $labels,
            'query_var' => true,
            'rewrite' => array( 'slug' => 'portfolio-type/tag' ),
            'show_ui' => true,
        )); 
```

}

**主题作品集部分的参考网址：http:** [//html.orange-idea.com/commander/4-columns-portfolio/](http://html.orange-idea.com/commander/4-columns-portfolio/) *（这个没问题）*

**单项：** [http ://html.orange-idea.com/commander/portfolio-type/summer-time/](http://html.orange-idea.com/commander/portfolio-type/summer-time/) *（/portfolio-type/加在URL中）*

我还想提一下，该主题由一个**单一的portfolio-type.php**文件组成。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:02:09.343

也许这会做你想要的：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  (.*)/portfolio-type/(.*)
RewriteRule .* http://html.orange-idea.com/%1/showcase/%2  [QSA,R=301,L] 
```

它将重定向：

`http://html.orange-idea.com/commander/portfolio-type/summer-time/`

对此：

`http://html.orange-idea.com/commander/showcase/summer-time/`

如果是相反的方式，我认为是：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI}  (.*)/showcase/(.*)
RewriteRule .* http://html.orange-idea.com/%1/portfolio-type/%2  [QSA,L] 
```

它将静默映射这个传入的 URL::

`http://html.orange-idea.com/commander/showcase/summer-time/`

对此：

`http://html.orange-idea.com/commander/portfolio-type/summer-time/`**

# internet-explorer - 为什么我不能让 csspie 工作？

> ID：14089937
> 
> 赞同：0
> 
> 时间：2012-12-30T10:27:59.793
> 
> 标签：internet-explorer, rounded-corners, css, css3pie

我有一个 div，我想显示为一个小的彩色圆圈。我使用border-radius 属性添加了圆角，这当然可以在Firefox、Chrome 甚至IE9 中完美运行，但不能在IE 的早期版本中使用。我正在尝试使用[CSSPIE](http://css3pie.com/)在早期版本的 IE 中呈现圆角。我下载了 PIE.htc 并将其保存在我的 css 文件夹中。

这是我的CSS的要点：

```
width: 25px;
height: 25px;
background-color: red;
-moz-border-radius: 50px;
-webkit-border-radius: 50px;
border-radius: 50px;
behavior: url(/PIE.htc); 
```

但是，该 div 在 IE7 和 8 中仍显示为红色正方形而不是圆形。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:39:05.343

### 路径问题？

~~代替：~~

 ~~```
behavior: url(/PIE.htc); 
```~~ 

和：

```
behavior: url("PIE.htc"); 
```

 ~~**编辑**

从[文档](http://css3pie.com/documentation/known-issues/#relative-paths)：

> IE 将行为属性的 URL 解释为相对于源 HTML 文档，而不是像其他所有 CSS 属性一样相对于 CSS 文件。这使得调用 PIE 行为不方便，因为 URL 必须是：
> 
> ```
> 1\. Absolute from the domain root — this makes the CSS not easily moveable between directories — or,
> 2\. Relative to the HTML document — this makes the CSS not easily reusable between different HTML files. 
> ```

将路径更改为相对于 HTML 文件而不是相对于 css 文件。~~

# python - selenium python代码中的“self”在做什么？

> ID：14089940
> 
> 赞同：4
> 
> 时间：2012-12-30T10:28:09.240
> 
> 标签：python, python-2.7

> **可能重复：**
> [Python 'self' 解释](https://stackoverflow.com/questions/2709821/python-self-explained)

我只是在文档的帮助下编写了如下代码，但对某些方法的作用`selenium`感到困惑？为什么我需要导入类？`self``argument list``unittest`

```
import unittest
from selenium import webdriver
from selenium.webdriver.common.keys import Keys

class PythonOrgSearch(unittest.TestCase):

    def setUp(self):
        self.driver = webdriver.Firefox()

    def test_search_in_python_org(self):
        driver = self.driver
        driver.get("http://www.python.org")
        self.assertIn("Python", driver.title)
        elem = driver.find_element_by_name("q")
        elem.send_keys("selenium")
        elem.send_keys(Keys.RETURN)
        self.assertIn("Google", driver.title)

    def tearDown(self):
        self.driver.close()

if __name__ == "__main__":
    unittest.main() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T10:33:45.730

`self`在成员方法的情况下，用于表示类的调用实例。这是必需的，以便类的成员方法作用于正确的对象。这与 Selenium 没有任何关系，而是该语言的一般特性。

类似于`this`C++ 中的参数

定义类时，在定义类的数据成员时使用该`self`参数，就像在您的类中所做的那样。

# java - 侦听器事件的不同类

> ID：14089942
> 
> 赞同：1
> 
> 时间：2012-12-30T10:28:18.717
> 
> 标签：java, events

我正在开发一个使用 actionListener 和 WindowListener 事件的简单应用程序。目的是根据添加到面板的单击按钮使 default_close_operation 工作。这可以使用内部类轻松完成，但是我想为每个侦听器事件使用不同的类。这是代码：

```
//test.java
import java.awt.event.WindowEvent;
import javax.swing.*;
public class test extends JFrame 
{
    public static void main(String args[])
    {
        new test();
    }

    private JButton button, exit;
    action a1 = new action();
    close c1 = new close();
    public test()
    {
        this.setSize(200,200);
        this.setTitle("test ");
        this.setVisible(true);
        this.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        button = new JButton("Button");
        exit = new JButton("Exit");
        exit.addActionListener(c1);
        button.addActionListener(a1);
        JPanel p1 = new JPanel();
        p1.add(button);
        p1.add(exit);
        this.add(p1);
    } 
```

}

//action.java

```
import javax.swing.*;
import java.awt.event.*;
public class action extends WindowAdapter implements ActionListener
{
    JButton b1;

    public void actionPerformed(ActionEvent e)
    {
        b1 = (JButton)e.getSource();
        if(b1.getText().equalsIgnoreCase("button"))
        {
            b1.setText("Clicked");
        }
        else if(b1.getText().equalsIgnoreCase("exit"))
        {
            System.exit(0);
        }
    }
} 
```

//关闭.java

```
import javax.swing.*;
import java.awt.event.*;
public class close extends WindowAdapter
{
    public void windowClosing(WindowEvent e)
    {
        exit.doClick(); //WRONG as no variable exists with exit name.
    }
} 
```

一切都很好，除了 close.java 类。如何将 WindowClosing 方法指向操作类，以便程序以正确的方式终止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T10:40:13.467

您可以像对 Action 类所做的那样扩展 ActionListener 并退出您在 Action.java 中处理事情的方式

```
//from your code
else if(b1.getText().equalsIgnoreCase("exit"))
    {
        System.exit(0);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T12:20:18.487

You need JFrame to perform operation in your own action listener like this

```
public class MyListener extends WindowAdapter implements ActionListener
{

    JFrame frame ;
    public MyListener(JFrame component) {
        this.frame = component;
    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        String actionCommand = e.getActionCommand();
        if(actionCommand.equals("Exit")) {
            //When the last displayable window within the Java virtual 
            // machine (VM) is disposed of, the VM may terminate
            frame.dispose();
        }
    }

    @Override
    public void windowClosing(WindowEvent e) {
             // perfrom operation after window closed
        Component component = e.getComponent();
        String name = component.getName();
        System.out.println("Component " + name + " is closing");

    }

    @Override
    public void windowClosed(WindowEvent e) {
        System.out.println("window is closed");
    }

} 
```

Add listener to the Frame and Button

```
 JFrame frame = new JFrame("Test Frame");   
    buttonExit = new JButton("Exit");
    listener = new MyListener(this);
    frame.addWindowListener(listener);
    buttonExit.addActionListener(listener); 
```

# c# - 如何使用 asp.net 头文件获取客户端 IP 地址？

> ID：14089945
> 
> 赞同：-5
> 
> 时间：2012-12-30T10:29:00.193
> 
> 标签：c#, asp.net

如何使用 asp.net 头文件获取客户端 IP 地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T10:31:31.893

在 ASP.NET 中有一个[`UserHostAddress`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.userhostaddress.aspx)在[`HttpRequest`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.aspx)类上调用的属性，它将为您提供以下信息：

```
protected void Page_Load(object sender, EventArgs e)
{
    string ip = Request.UserHostAddress;
    Response.Write("Your IP address is " + ip);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T10:30:48.263

```
Request.Servervariables("REMOTE_ADDR") 
```

这将返回发出请求的远程主机的 IP 地址

# android - 修改 Android 应用程序和许可

> ID：14089946
> 
> 赞同：-1
> 
> 时间：2012-12-30T10:29:04.990
> 
> 标签：android, licensing

默认短信/彩信应用程序的代码已打开。我可以修改这个应用程序吗（我必须扩展一些功能）并且都制作广告支持版本和没有广告的付费版本。是否违反许可？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T11:17:20.440

如果你想要一些违反许可的东西，我认为你不应该这样做。大多数情况下，您可以获得替代示例和开源代码，只需尝试 Google。

**-编辑-**

您提供的链接有一个带有许可条款的通知文件，下面是该文件的部分

```
Redistribution. You may reproduce and distribute copies of the
      Work or Derivative Works thereof in any medium, with or without
      modifications, and in Source or Object form, provided that You
      meet the following conditions: 
```

我认为您可以修改代码，但您必须满足某些条件，请参阅此处的完整详细信息

[https://github.com/android/platform_packages_apps_mms/blob/master/NOTICE](https://github.com/android/platform_packages_apps_mms/blob/master/NOTICE)

# asp.net - 可以使用 asp.net windows 窗体和 node.js 使用 issnode

> ID：14089947
> 
> 赞同：2
> 
> 时间：2012-12-30T10:29:06.717
> 
> 标签：asp.net, node.js, iisnode

我正在阅读有关[iisnode](https://github.com/tjanczuk/iisnode)的信息，我得到的是 iis 节点允许在 IIS中托管[nodeJS应用程序。](http://nodejs.org/)

所以我要求你：

第一：：[iisnode](https://github.com/tjanczuk/iisnode)到底是什么？我能用它做什么？

第二:: 我想知道我是否可以将它与我的 asp.net 网络表单应用程序一起使用？如果可以的话，你能给我提供简单的教程吗？请我需要完整的教程，而不仅仅是一段代码。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:44:24.353

从这里的 IISNode wiki[什么是 iisnode](https://github.com/tjanczuk/iisnode/wiki)

> iisnode 是一个本地 IIS 模块，它允许在 Windows 上的 IIS 中托管 node.js 应用程序。

在幕后，IISnode 是微软在其云平台 Azure 上托管 node.js 应用程序的方式。更多信息：[Windows Azure 和 iisnode 上的 Node.js](http://www.tikalk.com/iisnode)

注意 Azure 不是强制性的，您可以在没有 Azure 的普通 IIS 上托管 node.js，但微软必须开发它以便能够以非常可扩展的方式托管 node.js。wiki 页面列出了 IISnode 的所有优点。

这与 ASP.NET 无关。ASP.NET 也可以托管在 IIS 上，但它是一个完全不同的体系结构。您可以在同一台机器上混合使用两者，但它们并不密切相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T15:50:14.577

您是 Azure 中的环境吗？你可以启动一个默认的 Linux VM，安装 Nginx (http://wiki.nginx.org/Main) 并在那里运行 Node。我还会研究 Cloud 8 IDE (https://c9.io/)

大约一年前，我开始研究 Node...我知道这并不能直接回答您的问题，但您在问（介绍/基本）简单问题..我会选择：Node.js In Action (http: //www.manning.com/cantelon/)，其中包括非常好的教程和对 Node.js 的深入介绍

要回答您询问的有关将 ASP.NET 与 Node.js 交互的问题，它绝对可以在多个级别上工作。您可以使用 RESTful 服务、POX 服务、Socket.io/WebSockets 实现 Node.js 服务器，它们可以在服务器端与 ASP.NET 交互和/或使用从客户端到 Node.js 端点的 Ajax 调用。

这实际上是实现复杂/企业应用程序的首选方式，因为 Node.js 非常适合非阻塞 I/O……但是它不是很好的同步任务（复杂的 CPU 密集型任务）。因此，您可以让 Node.js 服务完成您的：数据检索/CRUD 操作和 ASP.NET 处理业务逻辑（即任何复杂的数学、物理、LINQ、并发任务等）

# asp.net - 登录后重定向到所选页面

> ID：14089950
> 
> 赞同：1
> 
> 时间：2012-12-30T10:29:27.817
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

为了仅授权登录用户访问我使用过的特定页面：

```
[Authorize(Roles="administrator")]
[Authorize(Roles="subscriber")] 
```

管理员和订阅者是我网站上的唯一角色。现在，当未登录的用户尝试访问未经授权的女巫的页面时，这将起作用，他会自动被重定向到登录页面。用户登录后出现问题；我想将他重定向到他之前尝试访问的页面。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:35:32.210

当表单身份验证模块将`ReturnUrl`用户重定向到登录页面时，它会在查询字符串中传递一个。当显示此登录表单时，请查看您的浏览器地址栏。

因此，一旦您成功登录，您就可以重定向到此 url。

在您创建 MVC 应用程序时为您创建的默认 AccountController 甚至有一个示例：

```
[HttpPost]
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
            if (Url.IsLocalUrl(returnUrl))
            {
                return Redirect(returnUrl);
            }
            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
        else
        {
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
        }
    }

    // If we got this far, something failed, redisplay form
    return View(model);
} 
```

请注意 LogOn 操作如何使用 ReturnUrl 参数，如果身份验证成功，我们会将用户重定向到他最初请求的页面。

但显然，这只有在目标 url 可以通过 GET 请求访问时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T10:33:23.710

```
if (Request.QueryString["returnurl"] != null) return Redirect(Request.QueryString["returnurl"]); 
```

# html - html select中的不同默认值和选定值

> ID：14089958
> 
> 赞同：0
> 
> 时间：2012-12-30T10:30:51.677
> 
> 标签：html, jsp

我需要为 HTML`<select>`标签设置不同的默认值和选定值。这意味着我需要`<form>`使用 selected 加载`<option>`，然后在按下`<button type="reset">`按钮后将另一个选项设置为选择标签，但是如何？

```
<select size="1" name="select1" >
    <option  value='1'> default value </option>
    <option selected="true" value="2">selected value</option>
</select> 
```

按钮的 onclick 事件不起作用：

```
<button onclick="resetSearchPanel();" type="reset"> ... 
```

java脚本函数：

```
 function resetSearchPanel() {

  document.forms['submitSearch'].elements['select1'].value = "1";

} 
```

上面的代码片段在按钮类型属性设置为“按钮”时有效，但在类型设置为重置时无效！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T10:36:31.180

点击重置，只需将选择标签中所需的值设为选中即可。

在重置按钮的 Onclick() 方法上，确保您编写了一个可以执行任何操作的函数。

如果您将按钮类型设置为`reset`，它将重置整个表单数据，因此您选择的标签将不会具有您设置的值。去掉`reset`标签，应该没问题。

如果您必须将类型用作“重置”，那么您必须使用变通方法来确保在表单重置后执行您的代码，但强烈建议不要使用这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T11:11:39.147

重置按钮会将所有值重置为默认值。它`onclick`发生**在**实际重置之前，因此您在那里所做的任何更改都将丢失。

由于甚至没有“onafterclick”，如果必须使用重置按钮，唯一的方法是使用计时器：

```
function resetSearchPanel() {
    window.setTimeout(function() {
        document.forms['submitSearch'].elements['select1'].value = "1";
    }, 100);
} 
```

这将在单击按钮后 0.1 秒更改所选值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T11:13:35.283

您给出的按钮`type='reset'`不知道为什么，因为类型重置会清除表单数据。所以对于你的问题，你需要给按钮`type='button'`

```
<button onclick="resetSearchPanel();" type="button"> 
```

希望这对你有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-30T10:35:30.163

选择您在使用 JavaScript 加载页面时需要的选项。

# android - 带有 SimpleCursorAdapter 和部分的列表视图

> ID：14089959
> 
> 赞同：0
> 
> 时间：2012-12-30T10:31:21.267
> 
> 标签：android, xml, simplecursoradapter

目前我有一个简单的列表视图，由 SimpleCursorAdapter 提供。现在我想用几个部分来扩展列表视图。所以我改变了我对 cursorAdapter 的查询并添加了一些 groupBy。

我在 Stackoverflow 上也看了很多关于如何继续的信息。但我有点困惑。如何设置部分？我需要额外的 Layout.xml 吗？我需要sectionIndexer吗？

请任何建议/伪代码都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T10:38:01.960

而不是 ListView 使用可扩展的 ListView

# java - 40,000 字节的高性能数据压缩

> ID：14089961
> 
> 赞同：3
> 
> 时间：2012-12-30T10:31:28.227
> 
> 标签：java, network-programming, compression

我在互联网上看到过*zlib*和*lzo*等数据压缩库。但我不确定压缩 40,000 字节的最佳方法（它们在`byte[][](x,y = color)`一个最多秒。

我不确定这是否可能以及最好的选择是什么。我还需要输出的`byte[]`含义是我需要丢失数组的第二维，并在解压缩发生时能够再次获得它。我不想将任何数据保存到文件中，因为我将把它发送给客户端，而当我发送数据时，我只需要给它一个`byte[]`，它会完成所有其余的工作。（我无法更改向客户端发送数据的方法。）感谢您的帮助。

编辑：我不介意我是否丢失数据，只要该数据每次发送时都会发送相同的数据，因为每 1/4 秒就会发送一次带有新信息的更新，我不会发送图像所以你所说的关于 png dossent 的内容真的很有帮助，因为我正在制作服务器程序上的颜色（不是从文件中读取）。希望这可以帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:37:01.643

从根本上说，没有通用的压缩方案可以以无损方式对任意数据的*每个输入实现显着压缩。*您可以忍受获得比开始时更多的数据的可能性，或者数据丢失......这是您的选择。不过，试图将数据降低到原始数据的 1/20 通常是一项艰巨的任务。

鉴于这是图像数据，您可能不应该查看通用压缩例程 - 而是查看图像格式，例如 JPEG、PNG 等。除此之外，某些图像格式具有“质量”选项，可让您以降低保真度为代价实现更大的压缩。不过，200 字节真的不是很多信息......

在您关注事物的性能方面之前，我会专注于获得可行的结果（足够小，但质量足够好）。当你有一些东西在工作时，你可以看到它是否足够快——但是如果它不符合你的初始要求，那么努力让它变得更快是没有意义的。

如果您使用基于图像的压缩，则事物的 1D/2D 方面可能会丢失。如果您采用某种自定义方案，则很容易存储一个维度的长度并推断另一个维度。这基本上是您的要求中问题最少的部分:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T10:52:39.733

您不能总是在不丢失数据的情况下将 40000 字节压缩到 200 字节。但是，如果您的数据是计算机生成的颜色很少的图像，则生成 200 字节或更少字节的可能性不大：

1) 将数据提供给 PNG 压缩库。

最好的压缩需要一些时间，但您可以通过稍微牺牲压缩级别来节省大量时间。如果您的库是 OptiPNG，那么 2 或 3 级可能是速度和压缩之间的良好平衡。

2）由于您知道图像大小，因此删除标题和所有其他可以在接收端恢复的块。你应该剩下的就是`IDAT`块。即便如此，您也可以从中剥离前几位（块头）。

解压时：

1) 预先`IHDR`添加块（预先知道）和（如果您使用调色板）`PLTE`块（也预先知道）和`IDAT`块的标题。附加`IEND`块。

2) 将此数据提供给 PNG 解压缩库。

文件格式有`.png`据可查。您可以使用[维基百科](http://en.wikipedia.org/wiki/.png#.22Chunks.22_within_the_file)作为您的起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T14:31:59.357

要检查您尝试做的事情在*理论上*是否可行，请获取一个或多个输入图像样本并计算该数据的[熵](http://en.wikipedia.org/wiki/Entropy_%28information_theory%29)（或[“香农熵”](http://en.wikipedia.org/wiki/Shannon_entropy)）。这将至少估计您的数据中实际包含多少信息（熵）。

如果一个输入图像中的熵计算到超过 200*8 位，则可能*没有*通用的无损压缩方案可以*对单个图像*进行所需的压缩。

但是，如果您有一系列图像，您可能只对从一个图像到下一个图像的差异进行编码，并*平均*实现您的目标带宽；例如常见的视频编解码器。

也许还可以阅读[“源代码”](http://en.wikipedia.org/wiki/Data_compression)。

# ios - Xcode将特殊字符（NSString）转换为NSData

> ID：14089964
> 
> 赞同：0
> 
> 时间：2012-12-30T10:31:36.033
> 
> 标签：ios, xcode, special-characters, nsdata

> **可能重复：**
> [如何从 NSString continaing 国际字符准备 NSURL？](https://stackoverflow.com/questions/3418754/how-to-prepare-an-nsurl-from-an-nsstring-continaing-international-characters)

我在将特殊字符转换为 NSData 格式时遇到问题。

```
NSString *strURL = [NSString stringWithFormat:@"http://www.???.com/1.php?test=你好"];

NSLog(@"%@", strURL);

// to execute php code
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

NSLog(@"%@", dataURL); 
```

当我打印出 dataURL 时，结果是（null），而当我的 strURL 是英文时，它会打印它应该打印的正确数据。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T14:33:44.043

您应该尝试将 UTF-8 添加到您的字符串

```
[strURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

# c# - Spark 视图引擎/ASP.NET MVC 中的 For 循环

> ID：14089966
> 
> 赞同：0
> 
> 时间：2012-12-30T10:31:59.090
> 
> 标签：c#, templates, templating, spark-view-engine

我正在将 Spark 与 WPF 一起使用。这很好用，我可以格式化模板并从自定义 DTO（我的模型）中提取标量属性。我很难让 for 循环工作。通过查看[Spark 文档](http://sparkviewengine.com/documentation/expressions#Loopinganditeration)，我应该能够做到这一点，但我得到了一个 spark 异常：

```
Dynamic view compilation failed.

c:\Users\Echilon\AppData\Local\Temp\tmp4490.tmp(73,73): error CS0103: The name 'Sections' does not exist in the current context 
```

以下代码在模板中可以正常工作以`Name`从模型中提取属性：`<h1>${Name}</h1>`但 for 循环会生成异常：

```
<for each="var sect in Sections">
    ${#sect.Name}
    <!-- HTML for each element omitted -->
</for> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:00:48.317

我需要导入集合命名空间以及包含 IList 中对象类型的命名空间：

```
<use namespace="System.Collections.Generic"/>
<use namespace="System.Web.Mvc"/>
<use namespace="MyOtherAssembly"/>
<viewdata Sections="IList[[ISection]]"/> 
```

# php - 如何在使用htaccess重写动态url时制作href

> ID：14089967
> 
> 赞同：0
> 
> 时间：2012-12-30T10:32:03.467
> 
> 标签：php, .htaccess, url-rewriting, href

我想使用 .htaccess 文件来制作友好的 URL。但是当我点击href中指定的链接时

```
<a href="category.php?id= <?php echo "{$row['name']}"; ?>">Example </a> 
```

`$row['name']`是动态的。数据存在于 MySQL 数据库中。

代码（category.php）：

```
<?php
if($_GET['id']){
  $result = $_GET['id'];
}
echo "this is {$result} page";
?> 
```

这只是将传递的参数存储在`$result`变量中并将其显示在屏幕上。

代码（.HTACCESS 文件）：

```
Options -Multiviews
RewriteEngine On
RewriteRule   ^website/(.+)$   category.php?id=$1 
```

当我单击链接时，它会显示 URL，`http://mydomain.com/category.php?id=Rohit` 而不是`http://mydomain.com/website/rohit`.

但是，当我手动写入 URL 时，`http://mydomain.com/website/rohit`它会显示相同的页面。这表明 .htaccess 文件正在工作。当我单击单词示例时，我想直接显示上述 URL。

一个例子
当我们点击维基百科中的巴拉克奥巴马页面时，它会转到`http://en.wikipedia.org/wiki/Barack_obama`但原始链接也可以 - `http://en.wikipedia.org/w/index.php?title=Barack_obama`。两个页面显示相同的数据。他们不会向用户显示第二个 URL，而是向用户显示另一个 URL。我想达到同样的结果。

如何编写链接以便重写 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T10:38:31.970

改变

```
<a href="category.php?id= <?php echo "{$row['name']}"; ?>">Example </a> 
```

至

```
<a href="website/<?php echo "{$row['name']}"; ?>">Example </a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T10:45:14.597

使用 apache mode_rewrite 和 mod_replace 可以做到这一点，但我不推荐它。因为我猜你想以两种方式支持它并且你正在使用 PHP，所以我会创建一个函数（或类/方法）来重写你的书面 url。IE：

```
<a href="<?php getUrl('category.php', $row['name']}) ?>">Example</a> 
```

这样就可以根据用户请求处理不同的 URL。

```
function getUrl($phpfile, $argument) {

   if ('<some logic to check if user request is rewritten') {    
      return "website/" . $argument; 
   } else {    
      return $phpfile . "?id=" . $argument; 
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T10:57:19.817

如果您使用的是 url 重写，那么在 href 中您必须自己传递 SEO 友好的 url；对于最佳实践，创建一个通用函数并将您的参数传递给该函数并为 href 生成 SEO 友好的 url；

或者在 href 硬编码 href url 中创建类似 category.php?id=123 的网址，例如 website/123

或者您必须定义规则，例如如果用户访问您的页面，例如 category.php?id=123 然后将用户重定向到网站/123

# java - 为什么此代码有效？声明前赋值？

> ID：14089974
> 
> 赞同：4
> 
> 时间：2012-12-30T10:33:31.997
> 
> 标签：java, initialization

这是Java。我知道 1 的分配`index`是在`initialization block`实例化类时首次运行的，但为什么这是有效的？

```
public class arr {
    {
        index = 1;
    }

    int index;

    void go() {
        System.out.println(++index);
    }
    public static void main(String [] args){
          new arr().go(); 
        }
    } 
```

输出为 2。

我应该得到一个`symbol not found`编译错误。这种行为是初始化块固有的吗？在*正常*情况下`int index;`应该来之前`index = 1;`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-30T10:42:53.077

+1，看起来真的很奇怪。但事实上，非静态初始化块只是由 javac 插入到对象构造函数中。如果我们反编译 arr.class 我们将得到真正的代码

```
public class arr {
    int index;

    public arr() {
        index = 1;
    }

    void go() {
        System.out.println(++index);
    }

    public static void main(String args[]) {
        (new arr()).go();
    }

} 
```

让更多的乐趣考虑这个难题

```
public class A {
    int index;

    A() {
        index = 2;
    }

    {
        index = 1;
    }
} 
```

什么是新的 A().index ？正确答案是2。见反编译的A.class

```
class A {
    int index;

    A() {
        index = 1;
        index = 2;
    }
} 
```

也就是说，非静态初始化块首先出现在对象构造函数中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T10:36:34.113

非静态初始化块在构造函数之后立即运行，因此代码正确且输出符合预期。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-30T10:36:51.987

代码的顺序无关紧要。正如您所说，

> 在正常情况下 int 索引；应该在 index = 1 之前；

这正是声明该字段然后分配值 1 所发生的情况。编译器不关心类中这些项目的物理顺序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-30T10:38:32.453

从[Java Tutorial](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)中，Java 编译器将初始化程序块复制到每个构造函数中。因此，这种方法可用于在多个构造函数之间共享代码块。

下面是使用 final 方法初始化实例变量的示例：

```
 class Whatever {
        private varType myVar = initializeInstanceVariable();

        protected final varType initializeInstanceVariable() {

            // initialization code goes here
        }
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-30T10:40:55.130

[Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)指出：

> 一个类可以有任意数量的静态初始化块，它们可以出现在类主体的任何位置。

此外，变量也是如此，您可以在声明它们之前“使用”它们：

```
class T {

    public static void main(String[] args) {
        T t = new T();
        System.out.println(t.a);
    }

    public int a = 14;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-30T11:47:47.277

与某些语言（例如 C）不同，类（静态）变量和实例变量的*声明顺序在 Java 中是不相关的。*您可以在声明之前（以文本方式）引用类/实例变量。所以即使这是有效的......

```
public class X {
   private int a = b;
   private int b = a;
   ...
} 
```

...虽然初始化程序实际上并没有实现任何有用的东西。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-30T10:50:24.190

Java 是一种在执行任何特技之前完全解析您的代码的语言（我试图避免无聊的编译器细节）。因此，如果您的初始化程序块出现在字段声明之前，则无关紧要，事情发生的特定顺序。类加载（当然还有字段加载）、静态初始化程序、构造函数、非静态初始化程序都在任何方法调用之前运行（可以在不执行构造函数和非静态成员的情况下执行静态调用）。您应该考虑阅读一些 SCJP（现在的 OCPJP）书籍，例如“K&B”，以真正了解幕后发生的事情。在这个阶段，像“JVM internals”这样的教程可能有点过头了（但你应该考虑将它保存在你的存档中以供以后参考）。

# c# - 如何使用控制台应用程序显示结果

> ID：14089978
> 
> 赞同：7
> 
> 时间：2012-12-30T10:34:50.977
> 
> 标签：c#, .net, console, output, console-application

我用 C# 编写了一个类，我想在控制台中显示。但我无法显示它。

我的程序没有任何错误，这意味着程序运行它但我看不到结果:(

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-30T10:37:31.947

您可以使用[Console.WriteLine(Object)](http://msdn.microsoft.com/en-us/library/swx4tc5e.aspx)打印输出，并使用[Console.Read()](http://msdn.microsoft.com/en-us/library/system.console.read.aspx)等待用户输入。

```
Console.WriteLine("Hello world");
Console.WriteLine("Press any key to exit.");
Console.Read(); 
```

如果没有 Console.Read，有时输出就来了，程序很快就退出了。所以输出不能很容易地看到/验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-29T11:24:26.973

没问题，我明白你在问什么...

关于 Microsoft Visual Studio 2010

1.  写`Console.WriteLine("Where are you console?");`在你的代码的某个地方——确保你一定会看到它。

2.  按调试按钮（或播放按钮）

3.  在 Microsoft Visual Studio 中，转到调试 -> Windows -> 输出

应该会弹出一个小的“输出”窗口，您可以看到控制台写入语句！- 显然你必须运行代码，它就会出现。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-30T10:40:50.403

Press `CTRL`+`F5` to see your output. This will wait the console screen until you press any key.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-30T10:42:52.913

[On MSDN](http://msdn.microsoft.com/en-us/library/0wc2kk78%28v=vs.90%29.aspx) you can find basic guide how to create console applications and how to output results.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-05T13:21:22.067

您的主要结构必须采用“Windows 窗体”架构。因此，尝试附加父（基）进程，例如：

```
namespace MyWinFormsApp
{
    static class Program
    {
        [DllImport("kernel32.dll")]
        static extern bool AttachConsole(int dwProcessId);
        private const int ATTACH_PARENT_PROCESS = -1;

        [STAThread]
        static void Main(string[] args)
        {
            if (Environment.UserInteractive) // on Console..
            {
                // redirect console output to parent process;
                // must be before any calls to Console.WriteLine()
                AttachConsole(ATTACH_PARENT_PROCESS);

                // to demonstrate where the console output is going
                int argCount = args == null ? 0 : args.Length;
                Console.WriteLine("nYou specified {0} arguments:", argCount);
                for (int i = 0; i < argCount; i++)
                {
                    Console.WriteLine("  {0}", args[i]);
                }
            }
            else
            {
                // launch the WinForms application like normal
                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);
                Application.Run(new Form1());
            }
        }
    }
} 
```

（或从头开始编写控制台应用程序）

# c# - 实体框架未按预期运行

> ID：14089983
> 
> 赞同：0
> 
> 时间：2012-12-30T10:35:30.460
> 
> 标签：c#, entity-framework

我正在使用[http://msdn.microsoft.com/en-us/data/jj591506](http://msdn.microsoft.com/en-us/data/jj591506)上的教程自学实体框架。

```
using (var db = new DatabaseEntities())
{
            // Section 1
            var section = new Section
            {
                SectionID = 1,
                SectionLetter = "d"
            };
            db.Sections.Add(section);
            db.SaveChanges();

            // Section 2

            var query = from b in db.Sections 
                        orderby b.SectionLetter
                        select b;

            foreach (var item in query)
            {
                this.Title = item.SectionLetter;
            }
} 
```

当我一起使用上面代码的第 1 节和第 2 节时，它们运行良好。但是，当我只运行第 2 节时，标题不会改变，这意味着它甚至不会返回单个项目，因此不会进入 foreach 循环。我不明白为什么它不会进入循环。

我意识到这个问题可能有一个明显的答案，但我认为我应该在 stackoverflow 上提问，而不是问同事，以便其他有相同问题的人可以找到答案。

我怀疑这个问题可能有一个线索：[System.Data.Entity not working as expected for MVC Entity Framework](https://stackoverflow.com/questions/13838681/system-data-entity-not-working-as-expected-for-mvc-entity-framework)。不幸的是，我似乎无法解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T11:20:12.430

看起来该行`var db = new DatabaseEntities()`正在连接到没有任何行的数据库。检查`Connection`属性`db`以确保它位于正确的服务器/实例/文件上。

如果您在 上执行“快速查看”，您应该能够看到表格的内容`query.ToArray()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:21:21.060

你确定如果你只运行第 2 节：

```
var query = from b in db.Sections 
            orderby b.SectionLetter
            select b; 
```

变量`query`实际上会产生结果吗？您是否已将其调试到可以看到查询内部内容的程度？

```
 var query = (from b in db.Sections 
              orderby b.SectionLetter
              select b).ToList(); 
```

试试这个，然后在它后面放一个断点。然后查看查询变量中有多少元素。如果有 0，那么你的 foreach 不会做很多事情是合乎逻辑的。

您是否检查过您的实际数据库以查看其中是否有任何记录？

# git - 如何在企业环境下管理 Git 中的软件版本？

> ID：14089986
> 
> 赞同：4
> 
> 时间：2012-12-30T10:35:39.220
> 
> 标签：git, version-control, development-environment, branching-and-merging, git-rebase

我想开发一个有两个版本（基本版和专业版）的新项目。
基础版和专业版有一些定制。所以我想我应该如何正确管理分支机构以满足我的要求。
这是我思考的结果：

![第一个状态](../Images/8102aac360cb384d2b848c0ab60a21b9.png)

![在此处输入图像描述](../Images/9ba475807c3b58c8c66bb4b87ddb5d95.png)

第二张图片显示了从`Version1.0`分支到`Release1.0`分支以及`Master`分支和`Version2.0`分支的一些错误修复的更新。
你怎么看？
我如何执行`Shift forward...`操作（在第二张图片中）？
（我必须使用 Git）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T13:20:48.277

从 Git 的标准工作流程开始会更容易：**[git-flow](http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/)**，在此[GitHub 存储库](https://github.com/nvie/gitflow)中定义。
请参阅这篇[入门文章](http://yakiloo.com/getting-started-git-flow/)：

![工作流 git 流](../Images/04272e3f5628114118da7476a7997fff.png)

这将管理版本*和*功能。

# ios - how to change the text "no results" when search in tableview?

> ID：14089988
> 
> 赞同：4
> 
> 时间：2012-12-30T10:35:57.590
> 
> 标签：ios, uitableview, uisearchbar, uisearchdisplaycontroller

After search in UITableView with no result, I want to change the text "No results" to "Not Match...".But I can't find where.Please help!

![enter image description here](../Images/f719a91f0c7e69de151aa38989e90607.png)

Here is some code:

```
- (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar{
 if ([self.webSearchData count] == 0) {

            for (UILabel *label in self.searchTable.subviews) {
                if (label.text = @"No Results") {
                    label.text = @"Not Match";
                }
            }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-10T13:15:44.217

It's an old thread, but for anyone having the same issue, try something like this.

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if (tableView == _searchDisplayController.searchResultsTableView) {
        if (_searchResults.count == 0) {
            for (UIView *view in tableView.subviews) {
                if ([view isKindOfClass:[UILabel class]]) {
                    ((UILabel *)view).text = @"YOUR_TEXT";
                }
            }
        }

        return _searchResults.count;
    } else {
        return (_items.count == 0) ? 0 : _items.count;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T13:45:32.317

Create a custom view with a label having text "No Results" and load it whenever your search query contain no value.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T10:22:32.847

Loop through the **subviews** and seek for the **UILabel** in it and to clarify more that its the subview that we are seeking for check the string/text matches "No Results".
if it matches then simply change the text to **"No Match"**.

or

or show up a single row with a blank cell when you're still waiting for the user to press the search button.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-08T01:27:15.873

If you change your localization native development region in your Info.plist the string will be replaced with a native language version. If you change to e.g. de it will be "Keine Ergebnisse". This is tested on iOS 9\. You could try to change the text via the internationalization. Maybe this is helpful for some people reading and searching for this thread.

related to: [searchDisplayController: change the label "No Results"](https://stackoverflow.com/questions/1165224/searchdisplaycontroller-change-the-label-no-results)

# php - PHP + Actionscript AMF（通过 SabreAMF） - 如何返回 PHP 数组并映射到 actionscript 中的数组/对象

> ID：14089992
> 
> 赞同：0
> 
> 时间：2012-12-30T10:36:35.503
> 
> 标签：php, actionscript, amf

快速说明：我的动作脚本技能*很弱*......我*不是猴子*，所以如果给出适当的建议，我可以弄清楚：

因此，我们使用**SabreAMF**来处理对后端的一些 AMF 调用。

事情进展顺利。

回调服务器和动作脚本方面都按预期工作。

我们要解决的一个问题是：

就目前而言，当我们需要返回一组（数组）数据时，我们只需通过执行以下操作（在 php 端）将其连接起来：

```
return 'VALUE1|VALUE2|VALUE3'; 
```

然后在动作脚本方面，我们做这样的事情：

```
var parts:Array=result.split('|');

/* parts[0] = VALUE1 , parts[1] = VALUE2 , parts[2] = VALUE3 */ 
```

以上工作正常，但我不禁认为必须有一种更清洁的方式来做事。

我们想做如下的事情：

**PHP结束（SabreAMF）：**

```
 return array('Param1'=>'Value1','Param2'=>'Value2','Param3'=>'Value3'); 
```

并将这些数据自动映射到 actionscript 端的数组或对象。一个人可以返回数组并将它们正确映射（并且自动地，手指交叉）在动作脚本方面是合乎逻辑的。

**所以，问题如下：**

当使用 SabreAMF 处理对基于 PHP 的后端的 actionscript AMF 调用时，是否可以返回一个数组并让 actionscripts AMF 处理程序自动将数据集映射到数组（理想情况下）或对象而不使用连接？

串联接缝有点像黑客。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T12:10:55.420

使用 json_encode() 通过 JSON 将其作为字符串发送，然后在 AS3 中使用任何 JSON 库将其转换为适当的数据结构。我认为这是最简单的方法......或者我错了，有人会给我们更好的答案。

编辑：您也可以将其作为 XML 字符串发送，尽管我的 AS3 同事始终坚持使用 JSON 作为更简单的替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T08:02:15.887

您可以使用 AMF 做您想做的事。Flash 将透明地解释接收到的数据。不过，您可能想检查 AmfPHP，因为 Sabre AMF 未维护。（免责声明：我运行 AmfPHP）。

JSON 和 XML 也可以。AMF 可能需要更多的工作来设置，这取决于您所知道的。它的主要优点是节省带宽和强大的打字，所以找出最适合你的。

[http://www.silexlabs.org/amfphp/](http://www.silexlabs.org/amfphp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T20:17:19.380

PHP AMF3 扩展可以更快地合并到您的项目中。

看看这个 - [https://github.com/neoxic/php-amf3](https://github.com/neoxic/php-amf3)

```
// Have your data
$data = array('Param1'=>'Value1','Param2'=>'Value2','Param3'=>'Value3');

// Encode into AMF3
$str = amf3_encode($data);

// Print to stdout (or use your way to pass it to the client)
print $str; 
```

# c++ - 当构造函数具有相同的参数类型（文件路径）时，如何从数组创建（初始化）std::tuple

> ID：14089993
> 
> 赞同：2
> 
> 时间：2012-12-30T10:36:35.237
> 
> 标签：c++, c++11, tuples, variadic-templates

我有一些类都有一个带有文件路径的构造函数。我想从主函数中的 argv 参数创建一个 std::tuple 。这是一个草图

```
class A { 
  public:
  A(const char *); // Taking a file path
};

class B {
  public:
  B(const char *); // Taking a file path
};

int main(int argc, char* argv[]) {
  auto tup(myCreateTuple<A, B, A>(argc, argv)); 
  // myCreateTuple would in this case use argv[1], argv[2]
  // and argv[3] to create A(argv[1]), B(argv[2]) and A(argv[3]). 
  // argc is just passed along to verify that argv is long enough.
  // tup would have of the type std::tuple<A ,B, A>
} 
```

创建元组成员的顺序并不重要（即允许未定义构造函数的执行顺序）。你知道如何实现 myCreateTuple 吗？

我想有可能一起避免 myCreateTuple 而是使用

```
std::tuple<A, B, A> tup{ A(argv[1]), B(argv[2]), A(argv[3]) }; 
```

但这将是一个不太通用的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T12:07:49.883

用于[`<redi/index_tuple.h>`](http://gitorious.org/redistd/redistd/blobs/master/include/redi/index_tuple.h)提供在包扩展中生成数组索引的编译时整数序列：

```
#include <tuple>
#include <assert.h>
#include <redi/index_tuple.h>

template<typename... T, unsigned... I>
inline std::tuple<T...>
myCreateTuple_impl(char** argv, redi::index_tuple<I...>)
{
  return std::tuple<T...>(argv[I+1]...);
}

template<typename... T>
inline std::tuple<T...>
myCreateTuple(int argc, char** argv)
{
  assert(argc > sizeof...(T));
  return myCreateTuple_impl<T...>(argv, redi::to_index_tuple<T...>());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:47:00.350

根据您传入的类型数创建值 1 2 3（或 0 1 2）的整数的编译时间序列。

然后将序列作为索引引用到数组中，并使用 ... 语法将 setter 引用到元组中。或者将 ... 直接放入构造函数调用中，并使用取消引用数组的 int 序列。

# jquery - 使用主 div ID 在 ul 中添加 li

> ID：14089998
> 
> 赞同：1
> 
> 时间：2012-12-30T10:37:08.093
> 
> 标签：jquery, html, html-lists

```
<div id="my_chzn" class="chzn-container chzn-container-multi chzn-container-active" style="width: 200px;" title="">

      <div style="left: 0px; width: 198px; top: 22px;" class="chzn-drop">
             <ul class="chzn-results">
                <li style="" class="active-result" id="geoRange_chzn_o_0">ABC</li>
                <li style="" class="active-result" id="geoRange_chzn_o_1">DEF</li>
                <li style="" class="active-result" id="geoRange_chzn_o_2">GHI</li>
                <li style="" class="active-result" id="geoRange_chzn_o_3">JKL</li>
                <li style="" class="active-result" id="geoRange_chzn_o_4">MNO</li>
                <li style="" class="active-result" id="geoRange_chzn_o_5">PQR</li>
             </ul>
      </div>
</div> 
```

* * *

```
<div id="geoRange_chzn" class="chzn-container chzn-container-multi chzn-container-active" style="width: 200px;" title="">

      <div style="left: 0px; width: 198px; top: 22px;" class="chzn-drop">
             <ul class="chzn-results">
                <li style="" class="active-result" id="geoRange_chzn_o_0">ABC</li>
                <li style="" class="active-result" id="geoRange_chzn_o_1">DEF</li>
                <li style="" class="active-result" id="geoRange_chzn_o_2">GHI</li>
                <li style="" class="active-result" id="geoRange_chzn_o_3">JKL</li>
                <li style="" class="active-result" id="geoRange_chzn_o_4">MNO</li>
                <li style="" class="active-result" id="geoRange_chzn_o_5">PQR</li>
             </ul>
      </div>
</div> 
```

* * *

第一个主 div`id=my_chzn`和第二个主 div 和`div id=geoRange_chzn`其他东西是一样的；在上述情况下，如何`li`根据主 div ID 添加？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T10:39:48.920

你可以做

```
$('#my_chzn .chzn-drop ul').append('<li class="active-result" id="geoRange_chzn_o_6">STU</li>'); 
```

`li`在带有 id 的`ul`div 内的类的 div 内添加一个。`chzn-drop``my_chzn`

要将其添加`li`到另一个 div，请像这样更改 id：

```
$('#geoRange_chzn .chzn-drop ul').append('<li/>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T10:50:08.367

```
var s = "geoRange_chzn" // here is the id only
$("#"+s+" *").each( function(e) {
    var s = $(this).prop("tagName");
    if(s=="UL") {
        $(this).append('<li style="" class="active-result" id="geoRange_chzn_o_5">PQR</li>');
    }
}); 
```

​如果您只有 id，那么您可以使用上述技术附加到 UL 元素。

[工作小提琴](http://jsfiddle.net/tH2TG/)